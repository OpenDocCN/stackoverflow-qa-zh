# StackOverflow 问答 10506000-10506999

# python - 获取数据时如何保留mysql格式

> ID：10506003
> 
> 赞同：0
> 
> 时间：2012-05-08T20:29:26.353
> 
> 标签：python, mysql

我已`customer_price`存储为`DECIMAL (8,2)`.

使用 Python，我将如何保留小数点后的两位数？

```
cursor.execute("SELECT customer_price FROM table")
customer_price = cursor.fetchone() # this will give me values such as 7 instead of 7.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:35:18.997

这并不意味着 Python 会丢失小数点后的数字。如果您只需要以 2 位小数打印它们，那么您应该查看[这个问题](https://stackoverflow.com/questions/2075128/python-print-all-floats-to-2-decimal-places-in-output)的答案。IE：

```
'%.2f' % your_number 
```

# tridion - SDL Tridion SP 1 HR 1 - 升级默认模板构建块

> ID：10506005
> 
> 赞同：3
> 
> 时间：2012-05-08T20:29:32.307
> 
> 标签：tridion

我正在尝试在升级的 SDL Tridion 2011 SP1 HR 1 机器上安装新的 UI 功能，但遇到了一个小问题。

打开模板生成器以使用“工具 > 创建默认构建块”升级默认构建块时（如此处所述：[sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory =true&filename=InstallingServerRolesInDotNET.xml](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=InstallingServerRolesInDotNET.xml) ) 过程完成，但我没有获得最新的构建块，例如 CMS 上没有安装“为内容启用内联编辑”。

我的问题是，如何手动升级它以确保我的默认 TBB 文件正确？我猜我在某处放置了正确的 dll，然后再次要求模板生成器执行默认构建块的创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:34:41.507

[已解决] 我在另一台 SDL Tridion 机器上找到了**Tridion.SiteEdit.Templating dll**，发现它包含两个似乎缺少的构建块。

在这个环境中，我手动添加了 dll，然后手动创建了两个模板构建块 + 所需的两个参数模式。不是最快的方法，但一切都很好！

如果有更简洁的方法来解决这个问题，请添加到这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:57:35.070

安装 UI 后，您始终可以在 Tridion bin 文件夹中找到 Tridion.SiteEdit.Templating dll。

# php - foreach 在 wordpress 插件类中

> ID：10506011
> 
> 赞同：0
> 
> 时间：2012-05-08T20:29:53.313
> 
> 标签：php, wordpress

`Wordpress`我在创建插件时遇到了一个小问题。该插件是基于类的，问题似乎出`foreach`在函数内的调用上。该`foreach`调用正在遍历数组并使用选项 api 将选项添加到 Wordpress。任何帮助使其正常工作将不胜感激。

**阵列**

```
$settings = array();
$settings['version'] = '0.1';
$settings['release'] = 'development';
$settings['license_accepted'] = 'false'; 
```

**功能**

```
public function settings($action) {
        $supported_actions = array('install', 'update', 'uninstall');
        if (in_array($action, $supported_actions) == true) {
            foreach($settings as $setting => $value) {
                $current = 'plugin_'.$setting;
                if ($action == 'install') {
                    add_option($current, $value, null, true);
                }
                if ($action == 'update') {
                    update_option($current, $value, null, true);
                }
                if ($action == 'uninstall') {
                    delete_option($current);
                }
            }
        } else {
            return false;
        }
} 
```

**问题**

> 警告：为 foreach 提供的参数无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:34:04.090

`$settings`数组在哪里声明？它很可能超出范围。

如果你在你`var_dump($settings);`之前做一个`foreach`你会得到空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:35:20.480

您需要将`$settings`变量带入函数范围内。您可以通过使用参数来做到这一点：

```
$settings = array(...);
$pluginClass->settings($action, $settings); 
```

或者使用依赖注入（我更喜欢），但我认为这对你和插件来说都很难。

# java - 从 Java 代码执行特定的 CMD 命令

> ID：10506012
> 
> 赞同：-2
> 
> 时间：2012-05-08T20:29:55.697
> 
> 标签：java, compilation, cmd, runtime

我有一个带有 main 方法的 .java 类文件，它产生一个文件“output.txt”。

我想用Java编写一个程序来编译并运行它，以便将给定Java类生成的文件“output.txt”输出到指定的文件夹。如何才能做到这一点？

我可以编译并运行它，但我无法`cd`在 Java 中创建类似命令的东西。不允许在 Java 中显示绝对类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:38:28.000

创建一个`File`指向指定文件夹的对象。

然后使用`new File(file, "output.text")`在上面指向的文件夹中创建一个引用“output.txt”的文件对象。请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#File(java.io.File, java.lang.String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#File%28java.io.File,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:59:52.330

> 我想用Java编写一个程序来编译并运行它，以便将给定Java类生成的文件“output.txt”输出到指定的文件夹。如何才能做到这一点？

让我们直截了当：

*   现有的 Java 应用程序在某处`A`输出一个文件`output.txt`……。您无法更改该应用程序。
*   您想编写一个应用程序，该应用程序以您可以控制写入的目录的方式`B`运行。`A``output.txt`

问：可以做吗？

A：这取决于如何`A`打开输出文件。

*   如果`A`使用文件的*相对*路径名；例如`new FileWriter(new File("output.txt"))`，它可以完成；见下文。

*   如果`A`使用文件的*绝对*路径名；例如`new FileWriter(new File("/output.txt"))`，那么它就*无法*完成。没有实用的方法可以`A`将文件放在其他地方。（我不会说这在理论上是不可能的，但你需要诉诸任何理智的开发人员都不会认真考虑做的事情。）

您如何处理相对情况是在启动它时`B`使用`ProcessBuilder`指定不同的*当前目录*。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)有一个例子涵盖了这一点`A`；查找示例中的使用 ... 及其规范。`setDirectory`

（注意：您也可以通过运行更改目录并运行命令的外部脚本来执行此操作。但这种方法涉及特定于平台的内容，如果您希望代码可移植，则应避免使用。）

# android - SQLite 插入错误

> ID：10506016
> 
> 赞同：0
> 
> 时间：2012-05-08T20:30:16.807
> 
> 标签：android

这是调用文件：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    dbActivities = new DBActivities(this);
    dbActivities.open();    // Create or open the existing DB if already created
}

private final BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) {
                smsCount++;
                Log.d(LOG_TAG, "smsCount=" +smsCount);
                long dbInsertReturn = dbActivities.insertIntoDB(smsCount);
            }
        }
}; 
```

这是执行实际数据库操作的文件：

```
public class DBActivities {
    private static final String LOG_TAG = "SMSCounterActivity";

    private static final String DATABASE_NAME = "sms_details_database";
    private static final String DATABASE_TABLE = "sms_details_table";
    private static final String KEY_DATE = "date";
    private static final String KEY_SMS_CURRENT_COUNT = "sms_current_count";
    private static final String CREATE_SMS_DETAILS_TABLE = "CREATE TABLE " + DATABASE_TABLE + "(" + KEY_DATE + " TEXT, " + KEY_SMS_CURRENT_COUNT + " INTEGER);";
    private static final int DATABASE_VERSION = 1;

    private final Context mContext;
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    public DBActivities(Context param_context) {
        this.mContext = param_context;
    }

    // Database helper class for creating and updating database
     private static class DatabaseHelper extends SQLiteOpenHelper {
         DatabaseHelper(Context context) {
             super(context, DATABASE_NAME, null, DATABASE_VERSION);
         }

         @Override
         public void onCreate(SQLiteDatabase db) {
             Log.i(LOG_TAG, "Creating DataBase: " + CREATE_SMS_DETAILS_TABLE);
             db.execSQL(CREATE_SMS_DETAILS_TABLE);
         }

         @Override
         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
             Log.w(LOG_TAG, "Upgrading database from version " + oldVersion + " to " + newVersion);
         }
     }

     // Create a new DB. If DB already exists, open it !
    public DBActivities open() throws SQLException {
        Log.d(LOG_TAG, "Trying to open DB now. Table query=" + CREATE_SMS_DETAILS_TABLE);
        mDbHelper = new DatabaseHelper(mContext);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    // DB format: date | sms_current_count
    // date = YYYY-MM-DD
    public long insertIntoDB (int db_value_to_insert) {
        ContentValues dbValues = new ContentValues();
        dbValues.put(KEY_DATE, getCurrentDate());
        dbValues.put(KEY_SMS_CURRENT_COUNT, db_value_to_insert);
        return mDb.insert(DATABASE_TABLE, null, dbValues);
    }

    private String getCurrentDate() {
        Calendar calendar = Calendar.getInstance();
        String currentDate = calendar.get(Calendar.YEAR) + "-" + (calendar.get(Calendar.MONTH)+1) + "-" + calendar.get(Calendar.DAY_OF_MONTH);
        Log.d(LOG_TAG, "currentDate=" +currentDate);
        return currentDate;
    }
} 
```

这是 logcat 日志：

```
05-09 01:52:33.363: D/SMSCounterActivity(444): Trying to open DB now. Table query=CREATE TABLE sms_details_table(date TEXT, sms_current_count INTEGER);
05-09 01:54:30.472: D/SMSCounterActivity(444): smsCount=1
05-09 01:54:30.482: D/SMSCounterActivity(444): currentDate=2012-5-9
05-09 01:54:30.592: I/Database(444): sqlite returned: error code = 1, msg = table sms_details_table has no column named sms_current_count
05-09 01:54:30.612: E/Database(444): Error inserting sms_current_count=1 date=2012-5-9
05-09 01:54:30.612: E/Database(444): android.database.sqlite.SQLiteException: table sms_details_table has no column named sms_current_count: , while compiling: INSERT INTO sms_details_table(sms_current_count, date) VALUES(?, ?);
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
05-09 01:54:30.612: E/Database(444):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
05-09 01:54:30.612: E/Database(444):    at com.android.main.DBActivities.insertIntoDB(DBActivities.java:66)
05-09 01:54:30.612: E/Database(444):    at com.android.main.SMSCounterActivity$1.onReceive(SMSCounterActivity.java:52)
05-09 01:54:30.612: E/Database(444):    at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:892)
05-09 01:54:30.612: E/Database(444):    at android.os.Handler.handleCallback(Handler.java:587)
05-09 01:54:30.612: E/Database(444):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 01:54:30.612: E/Database(444):    at android.os.Looper.loop(Looper.java:123)
05-09 01:54:30.612: E/Database(444):    at android.app.ActivityThread.main(ActivityThread.java:4627)
05-09 01:54:30.612: E/Database(444):    at java.lang.reflect.Method.invokeNative(Native Method)
05-09 01:54:30.612: E/Database(444):    at java.lang.reflect.Method.invoke(Method.java:521)
05-09 01:54:30.612: E/Database(444):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-09 01:54:30.612: E/Database(444):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-09 01:54:30.612: E/Database(444):    at dalvik.system.NativeStart.main(Native Method) 
```

我无法弄清楚数据库插入失败的原因。logcat显示建表查询正常。表中仍然缺少 sms_current_count 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:32:58.187

通常，当您的创建脚本很好并且数据库中不存在一列时，这是因为您更改了架构而没有增加数据库版本。如果是这种情况，您的 CREATE 脚本的唯一问题是它尚未运行

# sql-server-2005 - 查找重复呼叫率

> ID：10506028
> 
> 赞同：2
> 
> 时间：2012-05-08T20:31:37.667
> 
> 标签：sql-server-2005

我对 SQL Server 有点陌生，并且正在使用 2005 版本。

我需要能够做的是计算进来的重复呼叫的数量。

我称为**EP_Call_Int**的表有名为 "Daily_Dispo_Date" (datetime) 、 "Login" (nvarchar(35))、 "Policy" (int)、 "Dispo" (Nvarcar(50)) 的列，并且具有如下所示的数据：

```
Daily_Dispo_Date     Login    Policy  Dispo
2012-03-01 10:31:54  b_smith  42484   Cancellation
2012-03-01 10:45:12  s_tomas  48424   Payment
2012-03-01 11:01:32  b_smith  41546   Billing Question
2012-03-01 11:04:34  s_tomas  42484   Cancellation
2012-03-01 11:15:42  d_jones  48425   Payment
2012-03-01 11:50:02  d_jones  48425   Billing Question
2012-03-01 13:02:09  b_smith  48425   Billing Question
2012-03-02 10:31:54  d_jones  42489   Payment
2012-03-02 10:45:12  s_tomas  48434   Cancellation
2012-03-02 11:01:32  d_jones  41540   Payment
2012-03-02 11:04:34  s_tomas  41546   Billing Question
2012-03-02 11:15:42  d_jones  48417   Payment
2012-03-02 11:50:02  d_jones  44525   Billing Question
2012-03-02 13:02:09  s_tomas  41546   Billing Question
2012-03-03 10:31:54  d_jones  42089   Cancellation
2012-03-03 10:45:12  s_tomas  48434   Cancellation
2012-03-03 11:01:32  d_jones  41440   Cancellation
2012-03-03 11:04:34  s_tomas  41646   Payment
2012-03-03 11:15:42  d_jones  48817   Payment
2012-03-03 11:50:02  d_jones  41546   Payment
2012-03-03 13:02:09  s_tomas  41446   Payment 
```

[我在 SQL Fiddle Link http://sqlfiddle.com/#!3/0de9c](http://sqlfiddle.com/#!3/0de9c)中有所有测试数据

我想做的是计算我们公司收到的重复电话的数量。我需要如何计算它们是使用 5 分钟到 3 天的时间范围。所以第一次约会将是那个人第一次打电话，如果他们再次打电话，就不能算作对同一个人的双重打击。

所以我试图让我的最终结果看起来像：

```
Daily_Dispo_Date    Dispo             Total_Calls   Total_Repeating
2012-03-01          Cancellation      2             1
2012-03-01          Payment           2             0
2012-03-01          Billing Question  3             2
2012-03-02          Payment           3             0
2012-03-02          Cancellation      1             1
2012-03-02          Billing Question  3             2
2012-03-03          Cancellation      3             0
2012-03-03          Payment           3             0 
```

到目前为止，我的查询如下所示：

```
DECLARE @Start DATETIME, @End DATETIME
SET @Start = '20120401'
SET @End = '20120403'
;With [Find_First_Call] As
(
  Select 
     [Policy]
    ,[Dispo]
    ,Min([Daily_Dispo_Date]) As [Call_Date] --need to figure out how to have reset after each call
  From [EP_Call_Int]
  Group By [Policy], [Dispo]
)
Select 
  DateAdd(dd, DateDiff(dd, 0, [Daily_Dispo_Date]), 0) As [Daily_Dispo_Date]
, [Dispo]
, Count([Dispo]) As [Total_Calls]
,(
 Select
   Count([EP_Call_Int2].[Dispo])
 From [EP_Call_Int] as [EP_Call_Int2]
   Left Join [Find_First_Call] as [Find_First_Call] On [Find_First_Call].[Policy] = [EP_Call_Int].[Policy]
   And [Find_First_Call].[Dispo] = [EP_Call_Int].[Dispo]
 Where [EP_Call_Int2].[Daily_Dispo_Date] >= DateAdd(n, 5, [Find_First_Call].[Call_Date])
   And [EP_Call_Int2].[Daily_Dispo_Date] <= DateAdd(dd, 3, [Find_First_Call].[Call_Date])
   And DateAdd(dd, 0, [EP_Call_Int].[Daily_Dispo_Date]), 0) = DateAdd(dd, 0, [EP_Call_Int2].[Daily_Dispo_Date]), 0)
) As [Total_Repeat_Calls]
From [EP_Call_Int]
Where [Daily_Dispo_Date] Between @Start And @End
And [Policy] Like '[4]____'
Group By DateAdd(dd, [Daily_Dispo_Date], 0), [Dispo]
Order By [Daily_Dispo_Date], [Total_Calls] Desc 
```

所以简而言之，如果有人在 3 天内出于同样的原因打了 3 次电话，这将算作 2 次回电。如果他们在第 1 天、第 2 天和第 3 天打电话，我需要它在第 1 天和第 2 天显示重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:01:10.143

我不确定我是否所有规则都正确，但我认为这可能会做到：

```
;with Call_ordinal_no as (
  select 
    convert(date, [Daily_Dispo_Date]) as CallDate,
    [Login],
    [Dispo],
    row_number() over (
      partition by 
        convert(date, [Daily_Dispo_Date]),
        [Login],
        [Dispo]
      order by [Daily_Dispo_Date]
    ) as CallNumber
  from [EP_Call_Int]
)
select 
  CallDate as Daily_Dispo_Date,
  Dispo,
  count(*) as Total_Calls,
  sum(case when CallNumber > 1 then 1 else 0 end) as Total_Repeating
from Call_ordinal_no
group by CallDate, Dispo
order by CallDate; 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/0de9c/34](http://sqlfiddle.com/#!3/0de9c/34)

**更新：**

在更深入地讨论了规则之后，我认为这是正确的 SQL：

```
;with calls as (
  select 
    DateAdd(dd, DateDiff(dd, 0, c.[Daily_Dispo_Date]), 0) as CallDate,
    c.[Login],
    c.[Dispo],
    c.[Policy],
    case 
      when first.[Login] is null then 0
      else 1 
    end as IsRepeat
  from [EP_Call_Int] c
  left join [EP_Call_Int] first
    on c.[Login] = first.[Login]
    and c.[Dispo] = first.[Dispo]
    and c.[Policy] = first.[Policy]
    and datediff(minute, first.[Daily_Dispo_Date], c.[Daily_Dispo_Date])
      between 5 and 3 * 24 * 60
)
select 
  CallDate,
  Dispo,
  count(*) as Total_Calls,
  sum(IsRepeat) as Total_Repeating
from calls
group by CallDate, Dispo
order by CallDate, Dispo 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/0de9c/69](http://sqlfiddle.com/#!3/0de9c/69)

# javascript - 优化for循环，避免浪费查找

> ID：10506037
> 
> 赞同：1
> 
> 时间：2012-05-08T20:32:13.437
> 
> 标签：javascript, for-loop

我有以下 JavaScript 代码：

```
 var postcodes = [['BD1',8],['BD2',20],['BD7',30]];

    var rangeColours = [['red',10],['black',20],['blue',30]];

    var postcodeColours = [];

    for(var i=0; i<postcodes.length; i++) {
        var match = 0;
        for(var x=0; x<rangeColours.length; x++) {
            if(postcodes[i][1] <= rangeColours[x][1] && match == 0){
                postcodeColours.push([postcodes[i][0],rangeColours[x][0]]);
                match = 1;
            } 
        }   
    } 
```

代码的输出是：（顺便说一句很好）

```
 [BD1,red][BD2,black][BD7,blue] 
```

我想知道是否有办法让代码更高效，尤其是在减少第二个 for 循环中发生的浪费查找方面？目前我正在使用“匹配”变量并将其设置为 1，如果邮政编码数组元素的值小于 rangeColours 数组元素的值，以确保推送不会针对每个邮政编码数组元素重复，是有更优雅的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T20:34:47.257

如果您真的想优化查找，您可以通过将其存储在本地来删除循环体内`postcodes[i]`的冗余查找`rangeColours[x]`

```
for(var i=0; i<postcodes.length; i++) {
    var postcodeCurrent = postcodes[i];
    var match = 0;
    for(var x=0; x<rangeColours.length; x++) {
        var rangeColourCurrent = rangeColours[x];
        if(postcodesCurrent[1] <= rangeColoursCurrent[1] && match == 0){
            postcodeColours.push([postcodesCurrent[0],rangeColoursCurrent[0]]);
            match = 1;
        } 
    }   
} 
```

我不确定这是否会对性能产生明显的影响。感觉像是一个微优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:36:11.170

使用[`break`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/break)声明

```
for(var i=0; i<postcodes.length; i++) {
    for(var x=0; x<rangeColours.length; x++) {
        if(postcodes[i][1] <= rangeColours[x][1]){
            postcodeColours.push([postcodes[i][0],rangeColours[x][0]]);
            break;
        } 
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T20:35:36.600

你当然可以这样做：

```
for(var i=0; i<postcodes.length; i++) {
    var match = 0,
        codes = postcodes[i],
        coloursLength = rangeColours.length;
    for(var x=0; x<coloursLength; x++) {
        var colours = rangeColours[x];
        if(codes[1] <= colours[x][1] && match == 0){
            postcodeColours.push(codes[0], colours[0]);
            match = 1;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T20:51:18.100

您可以设置找到匹配项后的值，而不是使用`match`变量 or 。`break``x`

```
for(var i=0; i<postcodes.length; i++) {
    for(var x=0; x < rangeColours.length; x++){
        if(postcodes[i][1] <= rangeColours[x][1]){
            postcodeColours.push([postcodes[i][0],rangeColours[x][0]]);
            x = rangeColours.length;
        }  
    }
} 
```

# xcode - Xcode中是否有在窗口之间切换的快捷方式？

> ID：10506040
> 
> 赞同：43
> 
> 时间：2012-05-08T20:32:18.063
> 
> 标签：xcode

我同时在两个项目上做了很多工作，我想知道是否有键盘快捷键，或者分配一个以便在窗口之间切换的方法。目前这是通过转到 Window 菜单标题并向下滚动来完成的，但我本质上是一个捷径人！我试过进入偏好，但它似乎是唯一一个你不能分配的！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-05-17T10:02:01.163

我想这最近发生了变化（我在 XCode 6.1 上），但对于任何查看它的人来说，现在都是`CMD`+ `~`。请参阅[在 xcode 中切换项目窗口的键盘快捷键。](http://www.mackenziesoftware.com/2015/05/keyboard-shortcut-to-switch-project-windows-in-XCode.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-08T20:44:16.793

前段时间我遇到了同样的问题。
我这样解决了：进入 Mac 的系统偏好设置，然后选择键盘 -> 快捷键和键盘。在那里，您可以找到带有默认快捷方式的“将焦点移到下一个窗口”。

[![在此处输入图像描述](../Images/3d06f45382dab8ff9cd8d7e7317a606f.png)](https://i.stack.imgur.com/ujAy2.png)

在 Xcode 中，这将是冲突的快捷方式：

[![在此处输入图像描述](../Images/2474b695c54f01f78ba200aca8854389.png)](https://i.stack.imgur.com/HzV9h.png)

但是，该快捷方式与 Xcode 冲突，因此您只需要修改 Xcode 或系统之一 :)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-05-28T10:47:01.007

要在项目之间切换，请使用 COMMAND + ~（波浪号）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-19T05:32:34.287

有关更新的 Xcode（即 Xcode 7 到至少 Xcode 12），请参阅[https://stackoverflow.com/a/36923255/6426003](https://stackoverflow.com/a/36923255/6426003)。

除非项目最大化，否则基本上`Command`+仍然有效。`~`

要在最大化的项目之间切换，请使用3 指向左或向右**拖动。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-02T13:17:54.090

对于xCode 13.0，在选项卡之间切换的快捷方式是`CMD`++ 。`Shift``]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-22T10:30:57.507

要在一个项目内的 TABS 之间切换：

*   显示上一个标签：`control`+ `shift`+`tab`
*   显示下一个：`control`+`tab`

[![在此处输入图像描述](../Images/8a54d27ea7f39e183e6d7a61e1411ab3.png)](https://i.stack.imgur.com/cgq7L.png)

它 100% 有效。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-01-03T17:05:25.890

在打开的窗口之间切换 => ⌘ + `

++++++有人在我的解决方案上打了-1，但是：

它是 MACOS 中所有 APP WINDOWS 的标准 ++++++

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2014-12-08T13:01:20.460

您可以使用`⌘</kbd>+`{` and `⌘</kbd>+`}` as shortcuts.``

# django - 使用 Models FileField save() 为超过 2.5 MB 的上传文件分块文件

> ID：10506042
> 
> 赞同：2
> 
> 时间：2012-05-08T20:32:21.283
> 
> 标签：django, file-upload, chunking

`FileField.save()`超过 2.5M 的文件的幕后工作如何？我在另一篇文章中读到，`FileField.save()`将对要保存的文件进行自动分块。但是，如果您将文件保存到与保存超过 2.5M 文件的 tmp 目录相同的机器上，您是否需要分块？在 tmp 目录位于我要保存文件的同一台机器上的大文件上传情况下，是否`save()`只是`mv`将文件从 tmp 目录转到目标目录并绕过分块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:16:45.743

这与将上传的文件保存到模型时处理无关，在这种情况下使用移动。这是关于在上传过程中存储该文件 - 小文件被放入内存，较大的文件被分成块并写入临时文件。

关于保存文件：

[https://github.com/django/django/blob/master/django/db/models/fields/files.py](https://github.com/django/django/blob/master/django/db/models/fields/files.py)

[https://github.com/django/django/blob/master/django/core/files/storage.py](https://github.com/django/django/blob/master/django/core/files/storage.py)

关于上传：

[https://github.com/django/django/blob/master/django/core/files/uploadedfile.py](https://github.com/django/django/blob/master/django/core/files/uploadedfile.py)

# c# - Visual Studio 安装项目中的应答文件

> ID：10506045
> 
> 赞同：0
> 
> 时间：2012-05-08T20:32:32.070
> 
> 标签：c#, visual-studio-2010, setup-project

我正在尝试在 Visual Studio 中创建一个安装项目。我希望它是无人值守的安装。知道如何将答案文件传递给它吗？到目前为止，我认为我可以创建一个自定义安装操作并将答案文件的内容（作为参数传入）复制到另一个文件。这是正确的方法还是有其他标准方法来处理答案文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:02:46.193

对于正常设置，您实际上并不需要答案文件。只需[使用 q-switch 调用您的设置文件，](http://support.microsoft.com/kb/227091)所有内容都应使用默认配置进行安装。

```
msiexec -i c:\pathtofile\mypackage.msi /q 
```

如果您确实需要更改一些默认值，尽管您可以直接在安装项目中更改它们，但也可以在调用 msi 时更改它们，如下所示：

```
msiexec -i c:\pathtofile\mypackage.msi ALLUSERS=1 
```

[可以在此处找到属性参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx)的完整列表。

# android - 安卓音乐服务

> ID：10506054
> 
> 赞同：2
> 
> 时间：2012-05-08T20:33:09.317
> 
> 标签：android, service

这是一个简单的例子，但无法理解。音乐播放器。我有带有 UI 和功能的 Activity（播放、暂停、停止 ....）。我需要做在后台播放音乐的服务。服务和活动如何沟通。例如：

1.  在活动中我们选择歌曲
2.  id song 有意向服务（在 putExtra 的帮助下）
3.  服务 -> 播放（歌曲）
4.  我们关闭活动和服务工作
5.  通过时间（歌曲更改）我们打开活动，他显示新的当前歌曲。

服务如何“说出”活动的变化？以及如何再次“说”有关更改的服务？（我们开始的服务所以 putExtra 不适合）。

如果有代码示例显示请。抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:51:10.860

互联网上有许多服务和活动之间通信的示例。

这有一些例子：[How to have Android Service communication with Activity](https://stackoverflow.com/questions/2463175/how-to-have-android-service-communicate-with-activity)

这也是如此：[将数据从服务发送到活动](https://stackoverflow.com/questions/1464853/sending-data-from-service-to-activity)

基本上看起来你可以使用一个意图或只拥有一个单例服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:54:53.667

另外，特别是对于音乐播放器，请查看此项目：

[https://github.com/kreed/vanilla](https://github.com/kreed/vanilla)

这是他们用来播放音乐的服务：[https ://github.com/kreed/vanilla/blob/master/src/org/kreed/vanilla/PlaybackService.java](https://github.com/kreed/vanilla/blob/master/src/org/kreed/vanilla/PlaybackService.java)

看起来他们以某种方式在服务中使用回调。

# objective-c - 使用整个应用程序使用的方法编写类的正确方法是什么

> ID：10506055
> 
> 赞同：2
> 
> 时间：2012-05-08T20:33:15.883
> 
> 标签：objective-c, ios, xcode, class

我正在开发一个有多个视图的应用程序。所有这些视图及其视图控制器都使用相同的方法（它是一个文件解析器）。因此，为了避免重复，我考虑只使用文件解析方法创建一个新类。但现在我不确定如何以正确的方式做到这一点。我应该选择哪个班级？它是 Cocoa 类的子类吗？我想我只是在使用 Foundation 框架的方法。

还是我完全错了，它是一个模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:47:20.947

iPhone SDK 的一个常用模式是使用共享单例实例，您可以在`[NSNotificationCenter defaultCenter]`或中查看此示例`[NSUserDefaults standardUserDefaults]`。

您可以通过向您的类添加静态方法来实现这样的模式：

```
// FileParser.h
+ (FileParser*)sharedParser;

// FileParser.m
+ (FileParser*)sharedParser {
    static FileParser* kSharedParser = nil;
    if(kSharedParser == nil) kSharedParser = [[FileParser alloc] init]; 
    // Note the over-retained object, this is by design. You should never release this object.
    // it will be destroyed when your application is killed.
    return kSharedParser;
} 
```

然后，您可以通过在应用程序中的任何位置导入`FileParser.h`和写入来访问您的共享实例。`[[FileParser sharedParser] parseSomething:something];`

PS：这不是线程安全的，如有必要，请阅读 iOS 上的线程同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:42:47.217

您可以创建一个单例对象。只有一个对象的实例被创建。更多地将单例对象视为一种设计模式。

您也可以只拥有一个类并且只为该类编写类方法（+）。仅当您不必在类中存储任何实例变量，或者这些实例被声明为静态时，这才有效。

我认为单例对象将是最好的方法。尽管它在哲学上与上面 ant 的答案非常相似，因为它只会生成 FileParser 对象的一个​​实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T01:17:11.647

这只是归结为“我如何重用实现？”，这是一个应该熟悉的问题。

如果不需要状态（例如 ivars），您可以使用这种方法。另请注意，这可能会使用多态性：

```
@interface MONStatelessFileParser

+ (MONResource *)resourceAtURL:(NSURL *)pURL;

@end 
```

如果需要状态（例如 ivars），您可以使用这种方法，然后在需要时保留实例。多态性也适用：

```
@interface MONFileParserWithState

@property (nonatomic, copy, readwrite) NSString * elProperty;

- (MONResource *)openResource;

@end 
```

如果您没有多种读取文件的方式（类似于 NSDocument）并且不需要多种策略来打开文件，则可以避免多态性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T20:37:37.217

如果您希望某个类（A）包含可用于跨视图/视图控制器等的文件解析方法，您可以通过将 A 添加到应用程序委托来实现，在其中实例化 A 并通过应用程序委托引用重用 A 实例.

这样您就不必在每个视图/视图控制器等中实例化 A。

# java - Hibernate saveOrUpdate 方法会删除孩子吗？

> ID：10506056
> 
> 赞同：7
> 
> 时间：2012-05-08T20:33:21.073
> 
> 标签：java, hibernate

我有一个应用程序通过休眠加载对象，然后将这些对象作为分离对象传递到另一层。对这些对象的任何更改都会发送回我调用`saveOrUpdate()`这些对象的休眠层。

`saveOrUpdate()`如果我在调用之前简单地从集合中删除子对象，休眠将删除传递到的对象中包含在集合中的一对多关系子对象`saveOrUpdate()`吗？

如果不是，那么这通常如何在使用分离对象的休眠应用程序中完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T20:53:54.977

> `saveOrUpdate()`如果我在调用之前简单地从集合中删除子对象，休眠将删除传递到的对象中包含在集合中的一对多关系子对象`saveOrUpdate()`吗？

不，默认情况下不是。在这种情况下，此类子对象被称为“孤儿”，假设某些其他实体也没有对它们的引用。

这在文档[11.11 中进行了讨论。传递持久性](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-transitive)：

> 一种特殊的级联样式 ，`delete-orphan`仅适用于一对多关联，并指示该`delete()`操作应应用于从关联中删除的任何子对象。使用注释没有`CascadeType.DELETE-ORPHAN`等价物。相反，您可以使用属性 orphanRemoval，如示例 11.4 “<code>@OneToMany with `orphanRemoval`”中所示。**如果从`@OneToMany`集合中删除实体或从关联中取消引用关联实体，则如果设置为 true `@OneToOne`，则可以将此关联实体标记为删除`orphanRemoval`**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:53:52.310

默认情况下，它不会。您可以使用 @Cascade(CascadeType.DELETE_ORPHANS) 来实现这一点。

# xml - PHP 解析错误 - 意外的 T_STRING

> ID：10506057
> 
> 赞同：16
> 
> 时间：2012-05-08T20:33:25.880
> 
> 标签：xml, php

在 Windows（WAMP）中，我有一个这样的 index.php

```
<?xml version="1.0" encoding="utf-8"?>
<?php
    // ...
?> 
```

它按预期工作。
现在我刚刚在 Ubuntu 上配置了一个 LAMP，同一个文件（从浏览器调用时）给了我一个错误。看着`error.log`我发现

> PHP Parse 错误：语法错误，第 1 行 /var/www/test/index.php 中的意外 T_STRING

如果我删除第一行一切正常。
怎么了？为什么这适用于 Windows 而不是 Linux？
这可能是由特定扩展引起的吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-08T20:36:21.707

听起来您启用了短标签，这将导致 PHP 尝试解析`<?`.

[`short_open_tag`](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)将php.ini 中的配置选项设置为`0`or`Off`并重新启动 Apache。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:55:54.900

将 XML 作为字符串使用并不是一个好主意。

您应该使用 php XML 库，例如[http://de.php.net/manual/en/book.dom.php](http://de.php.net/manual/en/book.dom.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T20:35:44.583

您是否检查了是否在 php.ini 上启用/禁用了短标签？

# php - Facebook cURL 以我的身份发帖？

> ID：10506060
> 
> 赞同：1
> 
> 时间：2012-05-08T20:33:46.990
> 
> 标签：php, facebook, facebook-graph-api, curl

创建脸书应用

使用 cURL 从应用程序发布消息，但它似乎是我发布的？我怎样才能从应用程序发布，这是我的 cURL

```
 $attachment =  array(
    'access_token' => $token,
    'message' => '$message',
    'name' => '$name',
    'link' => '$link',
    'description' => '$description',
    'picture'=> '$picture',
    'actions' => json_encode(array('name' => '$name2','link' => '$link2'))
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/'.$pId.'/feed');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
$result = curl_exec($ch);
curl_close ($ch); 
```

该帖子有效，但看起来好像我发布了它而不是应用程序，建议？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:40:31.490

这是对我有用的代码

```
$file = 'image.jpg';
$args = array(
   'message' => 'Photo from application',
    'access_token'=>urlencode('Your Access token'),
);
$args[basename($file)] = '@'.realpath($file);

$ch = curl_init();
$url = 'https://graph.facebook.com/me/photos';
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$result = curl_exec($ch);
curl_close ($ch); 
```

可能对你有帮助。

# php - kohana：包含字符串的文件？

> ID：10506062
> 
> 赞同：0
> 
> 时间：2012-05-08T20:33:54.633
> 
> 标签：php, kohana

我是 kohana 的新手，而不是 php 专家，如果这是重复的，请原谅，但我什至不知道执行搜索的正确术语。

我想要一个文件，我可以在其中拥有一个键值列表，并且我希望这些可以从模板和/或控制器中访问。

为了做到这一点：1）我需要做什么来创建这样的文件？我把它放在哪个文件夹里？是什么使它可以被模板文件和控制器访问？

2) 我应该将每个键声明为 $string 并分配一个值，即 $example = "example value"; 或者，还有更好的方法？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T22:22:37.623

听起来您想将一些数据存储在配置文件中。您可以在此处了解如何使用配置文件：http: [//kohanaframework.org/3.2/guide/kohana/files/config](http://kohanaframework.org/3.2/guide/kohana/files/config)

使用全局 Kohana 类可以在您的应用程序中的任何位置读取配置数据，例如：`Kohana::$config->load('myconf');`但通常您不想访问视图中的全局变量，而是将数据传递给您的视图，例如：

```
class Controller_Contact extends Controller {

        public function action_index()
        {    
                $names = Kohana::$config->load('names');

                $view = View::factory('people')
                        ->set('names', $names);

                $this->response->body($view);
        }
} 
```

# git - Wordpress 的版本控制或其他管理大量 Wordpress 网站的解决方案？

> ID：10506065
> 
> 赞同：0
> 
> 时间：2012-05-08T20:33:59.347
> 
> 标签：git, wordpress

我有一个管理 30 多个 Wordpress 网站的客户。每个 Wordpress 安装可能有不同版本的 Wordpress、不同的插件、不同的插件版本、不同的主题等。目前所有这些都通过 SFTP 进行管理。

没有版本控制的安全网是可怕的工作。有没有人努力将 Wordpress 网站纳入版本控制？好像有两块：

*   实际的 WP 安装目录/连同它的 wp-content 文件夹。
*   驱动它的 MySQL 数据库。

我想我可以不让数据库进入版本控制，我会确保它经常备份。

有人做过吗？从私人 Github 或 BitBucket 帐户托管呢？经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:44:19.320

我工作的公司的设置大致相同，我们有大约 80 个字的新闻安装两个是多站点安装，在我们使用 git 的版本控制下有 3-4 个，并禁用了对盒子的 ftp 访问以强制使用 git 进行部署，这有助于在尝试跟上数据库的所有更改时，我们有一些脚本将数据库转储到公司的网络驱动器中。

希望对您的问题有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:39:40.350

我认为最好的解决方案（但需要一些时间和精力来实施）是将所有站点移动到 WordPress 多站点设置中。

有很多地方可以获得关于此的分步说明，但 WordPress 本身对您需要做什么有很好的解释：http: [//codex.wordpress.org/Create_A_Network](http://codex.wordpress.org/Create_A_Network)

我正在为我的许多自由职业者客户运行多站点设置，这很棒。它们都从一个 WordPress 核心运行，因此您只需要更新它。他们都可以拥有自己的插件，当然，没有在网络上使用的插件需要为使用它们的站点单独更新。

我也在运行一个使用 Subversion 的大型 WordPress 网站，这很棒。但是，它不一定是尝试与 30 多个站点争吵的好解决方案。

# xna - 使用 sprite 和 XNA 对战斗机进行编程

> ID：10506068
> 
> 赞同：0
> 
> 时间：2012-05-08T20:34:16.160
> 
> 标签：xna, 2d, sprite

嘿，我目前正在制作一个 2D 战斗机，很像使用 XNA 4.0 的老式真人快打。无论如何，我目前正在尝试编写打孔动画。

玩家处于空闲状态，按下左键时，玩家应该出拳。

现在假设玩家面向屏幕的左侧。我所有的精灵都面向右侧绘制。所以当玩家出拳时，精灵会被翻转和绘制。

问题是，动画让它看起来像是玩家突然向右传送，因为它将翻转的打孔帧的最左边部分与他空闲帧的最左边部分对齐（至少我是这么认为的）。我似乎想不出办法来解决这个问题。

我的代码现在很大。如果有人可以确定问题的可能部分，我很乐意发布该代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T00:25:46.933

如果我做对了，你可以使用这个重载来绘制：

```
SpriteBatch.Draw (Texture2D, Rectangle, Nullable<Rectangle>, Color, Single, Vector2, SpriteEffects, Single) 
```

来自 msdn：使用指定的纹理、目标矩形、源矩形、颜色、旋转、原点、效果和图层将一个精灵添加到一批精灵中进行渲染。

因此，您可以将精灵的原点作为其中心，例如，它将围绕中心旋转。只需找到旋转的最佳原点即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:12:58.263

好的，所以我解决了这个问题。确实问题出在精灵表上。设计它的人并没有在每一帧中将每个图像居中。

因此，他将所有图像居中，但帧的大小不同。但这个问题依然存在。

经过一些调试，我弄清楚发生了什么。在空闲帧中，这些帧中角色的两侧都有一个 2 像素的空间。在 Punch 帧中，在这些帧中角色的两侧都有一个 23 像素的空间。

我的`Draw()`功能是根据 2D 位置向量绘制每一帧。这个位置向量，指定每一帧的左上角。

现在，由于 Idle 帧和 Punch 帧在每帧中角色左侧的像素宽度不同，因此当玩家按下 Punch 时，角色看起来像是“传送”了。

现在我对这个问题的解决方案 - 使所有框架尺寸相同！这解决了我的“传送”问题。不过，我想不出任何替代解决方案来解决这个问题。

现在有一件事我不明白。有很多游戏的精灵表由不同的帧大小组成。他们如何在没有传送问题的情况下使用它们？！

# c# - C#监听80端口

> ID：10506069
> 
> 赞同：2
> 
> 时间：2012-05-08T20:34:17.000
> 
> 标签：c#

我想监听 80 端口。为此，我编写了一个 TCP 监听器并赋予它管理员权限。但它不起作用（它失败了）。

这是错误：

```
试图以一种被其禁止的方式访问套接字
访问权限

```

我的代码：

```
static void Main(string[] args)
{
    WindowsPrincipal pricipal = new WindowsPrincipal(WindowsIdentity.GetCurrent());
    bool hasAdministrativeRight = pricipal.IsInRole(WindowsBuiltInRole.Administrator);
    if (hasAdministrativeRight == true)
    {
        TcpListener server;
        Int32 port = 80;
        IPAddress localAddr = IPAddress.Parse("127.0.0.1");
        server = new TcpListener(localAddr, port);
        server.Start();
        Byte[] bytes = new Byte[256];
        String data = null;
        while (true)
        {
            Console.Write("Waiting for a connection... ");
            TcpClient client = server.AcceptTcpClient();
            Console.WriteLine("Connected!");
            data = null;
            NetworkStream stream = client.GetStream();
            int i;
            while ((i = stream.Read(bytes, 0, bytes.Length)) != 0)
            {
                data = System.Text.Encoding.ASCII.GetString(bytes, 0, i);
                Console.WriteLine("Received: {0}", data);
                data = data.ToUpper();

                byte[] msg = System.Text.Encoding.ASCII.GetBytes(data);
                stream.Write(msg, 0, msg.Length);
                Console.WriteLine("Sent: {0}", data);
            }

            client.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:45:26.763

我怀疑 80 端口已经被 IIS 或 Skype 使用。您将需要关闭它们或更改它们使用的端口。

运行它并找出哪个进程（PID）正在使用端口 80：

```
C:\> netstat -ano

Active Connections
  Proto  Local Address          Foreign Address        State           PID
  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       4 
```

如果 PID 指向系统进程（在我的情况下为 4），那么我相信这就是 IIS。

[MSDN 套接字错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)

有关更多详细信息，请将您的 server.Start() 调用包装在 try/catch 中并捕获 SocketException 并检查 SocketException.ErrorCode。

```
try
{
    server.Start();
}
catch (SocketException exception)
{
    Console.Write(exception.ErrorCode);
} 
```

[MSDN TcpListener.Start()](http://msdn.microsoft.com/en-us/library/xt2x8705.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:00:01.933

如果您的机器中有 IIS，则 IIS 使用端口 80（默认），然后按照此链接[https://stackoverflow.com/a/108397/1221319](https://stackoverflow.com/a/108397/1221319)阻止 IIS 侦听端口 80。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T13:25:17.587

据我所知，要通过 80 端口绑定 TCP 连接，您需要获得管理员权限。因此，您必须以管理员身份运行您的程序，并且`HttpListener`您正在使用的程序应该可以正常工作。尝试将此添加到您的清单文件中：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

# url - joomla模块中的基本网址

> ID：10506072
> 
> 赞同：6
> 
> 时间：2012-05-08T20:34:38.497
> 
> 标签：url, joomla

晚上，

我在 Joomla 模块中实现了一些 AJAX 功能。现在当我激活 SEF 时，AJAX 不再工作了。这是因为外部 php 文件的路径已更改。要解决此问题，我需要添加基本 url，现在的问题是：如何获取以下基本 url：

```
remote: "modules/mod_module/libs/elements/db_checker.php" 
```

所以它应该是这样的

```
remote: "<?php echo $baseurl; ?>modules/mod_module/libs/elements/db_checker.php" 
```

所以完整的链接应该变成

```
remote: "http://www.mysite.com/modules/mod_module/libs/elements/db_checker.php" 
```

我无法让 URI 工作，请帮助我

提前致谢

**更新**

自己修好了:)这是修复：

```
<?php echo JURI::root().'modules/mod_module/libs/elements/db_checker.php'; ?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T19:00:34.510

自己修好了:)这是修复：

```
<?php echo JURI::root().'modules/mod_module/libs/elements/db_checker.php'; ?> 
```

# javascript - 简单的游戏开发

> ID：10506077
> 
> 赞同：0
> 
> 时间：2012-05-08T20:35:03.180
> 
> 标签：javascript, jquery, html

我是 js 和游戏开发的新手，但我想学习……为了学习，我正在创建一些多人游戏 - 做一个更大的词。

所以我有一个字母，用户在 stop div 上停止，然后尝试创建一个比其他字母更大的字母。

这是整个代码：http: [//jsfiddle.net/9rtFa/4/](http://jsfiddle.net/9rtFa/4/)

我需要的是当字母停止时，当用户停止它时，当用户点击一些带有字母的 div 时，该字母写入 div "F" 。当单击按钮“x”将最后一个字母清除到 div“f”中时......我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:47:40.513

尝试这个：

```
$(".letter").click(function(){
   $("#F").text($("#F").text() + $(this).text())
   if( $("#F").text().length > 0) $(".letter").unbind("click");    
})

$('#b').click(function(){
   $("#F").text($("#F").text().slice(0, -1))
}) 
```

[http://jsfiddle.net/9rtFa/11/](http://jsfiddle.net/9rtFa/11/)

# jquery - 如何在导航栏中动态突出显示当前页面，如 Stackoverflow

> ID：10506079
> 
> 赞同：1
> 
> 时间：2012-05-08T20:35:04.267
> 
> 标签：jquery

我的 header.php 页面中有一个导航栏，我将其包含在我网站的每个页面中。如何向当前页面添加一个 current_page 类？

我试过了

```
$('a[href="'+window.location+'"]').addClass('menu-highlight'); 
```

但是如果设置了我的 GET 变量，它就不起作用，并且我的 href 是相对 url。

我的一个想法是在 php 页面上，包括文件以保存与页面相对应的数字，并使用 Jquery 在属性中使用该数字更改 li。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:10:53.477

最佳实践是在服务器端代码中处理这个问题。但是，如果您使用的是绝对路径链接，而不是完整的 URL 链接，则可以使用

`window.location.pathname`

排除查询字符串而不是

`window.location.href`

其中包括它

```
window.location.href
=> "http://stackoverflow.com/questions/10506079/how-to-dynamically-highlight-the-current-page-in-nav-bar-like-stackoverflow?test=foo"

window.location.pathname
=> "/questions/10506079/how-to-dynamically-highlight-the-current-page-in-nav-bar-like-stackoverflow" 
```

# iphone - 在 xcode 4.3 for iphone 中导入 TBXML

> ID：10506081
> 
> 赞同：0
> 
> 时间：2012-05-08T20:35:18.030
> 
> 标签：iphone, objective-c, xcode4, tbxml

我想使用 TBXML 解析器，因为我发现它非常快。在它的指南中[http://www.tbxml.co.uk/TBXML/Guides_-_Include_in_project.html](http://www.tbxml.co.uk/TBXML/Guides_-_Include_in_project.html)在某个地方说

“4\. 在项目下的组树中找到 Targets 节点。单击箭头展开并右键单击项目的目标文件。选择“获取信息”并导航到“常规”选项卡。 4\. 单击加号窗口底部添加链接库。从列表中选择“libz.dylib”。您现在可以关闭此信息窗口。“

我使用的是 xcode 4.3，但看不到任何 Targets 组。如何添加链接库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:44:02.353

为了在 xcode 4.3 中添加对库的引用，您单击项目的根目录（您可以在左上角看到项目名称。然后单击“目标”下的项目并转到“构建阶段”选项卡。在那里您可以添加任何你想要的。

# iphone - 通话结束后没有声音

> ID：10506088
> 
> 赞同：0
> 
> 时间：2012-05-08T20:35:29.190
> 
> 标签：iphone

通话结束后如何恢复音频。

这是我的代码，但它不工作不知道为什么

```
@interface MainViewController : UIViewController <InfoDelegate, AVAudioPlayerDelegate> 
```

在 m 文件中

```
-(void)audioPlayerBeginInterruption:(AVAudioPlayer *)audioPlayer;
{

}
-(void)audioPlayerEndInterruption:(AVAudioPlayer *)audioPlayer;

{
   [self.audioPlayer play];
   } 
```

任何想法我在代码中做错了什么或遗漏了什么。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:45:09.153

根据您的音频停止的方式（您打电话了`[self.audioPlayer stop]`吗？），您可能需要在再次拨打电话`[self.audioPlayer prepareToPlay]`之前先拨打电话`play`。

我相信你应该做的是以下几点：

```
-(void)audioPlayerBeginInterruption:(AVAudioPlayer *)audioPlayer;
{
    [self.audioPlayer 暂停];
}

-(void)audioPlayerEndInterruption:(AVAudioPlayer *)audioPlayer;
{
    [self.audioPlayer 播放];
}   

```

根据我的经验，如果您打电话给`stop`您，那么您必须先打电话，然后`prepareToPlay`才能再次打电话`play`。

**编辑：**

或者，您可能需要直接通过 AudioSession 处理中断。

您的应用程序应该初始化 AudioSession，如下所示：

```
AudioSessionInitialize(NULL, NULL, AudioInterruptionListener, NULL); 
```

然后，在/块`AudioInterruptionListener`之外实现，如下所示：`@implementation``@end`

```
#define kAudioEndInterruption @"AudioEndInterruptionNotification"
#define kAudioBeginInterruption @"AudioBeginInterruptionNotification"

无效的音频中断监听器（
                             无效 *inClientData,
                             UInt32 inInterruptionState
                             )
{
    NSString *notificationName = nil;
    开关（inInterruptionState）{
        案例 kAudioSessionEndInterruption：
            通知名称 = kAudioEndInterruption；
            休息;

        案例 kAudioSessionBeginInterruption：
            通知名称 = kAudioBeginInterruption；
            休息;

        默认：
            休息;
    }

    如果（通知名称）{
        NSNotification *notice = [NSNotification notificationWithName:notificationName object:nil];
        [[NSNotificationCenter defaultCenter] postNotification:notice];
    }
}

```

回到您的 Objective-C 中，您需要监听此代码可能发布的通知，如下所示：

```
// 监听音频中断开始/结束
[[NSNotificationCenter defaultCenter] addObserver:self
                                         选择器：@选择器（开始音频中断：）
                                             名称：kAudioBeginInterruption 对象：无]；
[[NSNotificationCenter defaultCenter] addObserver:self
                                         选择器:@selector(endAudioInterruption:)
                                             名称：kAudioEndInterruption 对象：无]；

```

和：

```
-(void)beginAudioInterruption:(id)context
{
    [self.audioPlayer 暂停];
}

-(void)endAudioInterruption:(id)context
{
    [self.audioPlayer 播放];
}

```

试一试。:-)

# ruby-on-rails - 使用 feedzirra 解析 XML 产品提要

> ID：10506090
> 
> 赞同：0
> 
> 时间：2012-05-08T20:35:42.300
> 
> 标签：ruby-on-rails, feedzirra

我正在将大约 200 个产品提要加载到一个非常耗时的网站中。寻找新的方法来做到这一点（在 Nokogiri 之外）我正在研究 Feedzirra。我目前正在使用 Feedzirra 0.3.1。安装没有任何问题。

我想解析以下 XML 产品提要（以及许多其他提要）：

```
feed = "http://adtraction.com/productfeed.htm?type=feed&format=XML&encoding=UTF8&epi=0&zip=0&cdelim=tab&tdelim=singlequote&sd=0&apid=52561763&asid=257117013"

feed_obj = Feedzirra::Feed.fetch_and_parse(feed) 
```

但是当我这样做时，我只会得到零响应。看起来至少它正在获取提要，因为在响应之前需要几秒钟。

我的问题：

1.  是否可以为此使用 Feedzirra？或者，Feedzirra 是否只能用于 RSS 提要？
2.  我可以期望使用 Feedzirra 更快地阅读和解析它们吗？或者这是一条死胡同？
3.  您是否得到相同的响应和/或您能看出问题所在吗？

编辑：更改了代码，这并不是我在应用程序中使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:48:22.617

看起来 Feedzirra 正在使用基于 Nokogiri 的 sax-machine 进行 xml 解析，因此使用它而不是纯 nokogiri 方法不太可能获得那么多的性能提升。与它自己的主机合作可能会有所帮助。如果文件没有变化，您可以相当容易地检查标题，而不是一遍又一遍地拉文件

很可能您收到的是空响应，因为它超时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:11:09.713

您的代码片段中有几个缺陷：

1.  `1`不是 Ruby 中的变量，它是一个`Fixnum`并且不能为它分配任何值
2.  您必须在 url 周围加上括号才能将其转换为字符串并将其分配给变量。
3.  除非您定义它，否则我很确定这`using`不是 Ruby 中的指令

将您的代码更改为这样的内容，它很可能应该可以工作：

```
first = "http://adtraction.com/productfeed.htm?type=feed&format=XML&encoding=UTF8&epi=0&zip=0&cdelim=tab&tdelim=singlequote&sd=0&apid=52561763&asid=257117013"
feed = Feedzirra::Feed.fetch_and_parse(first) 
```

`feed`然后应该是您可以进一步处理的某种 Feedzirra 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:59:37.700

仔细一看，Feedzirra 似乎只适用于博客提要，并不真正适用于我的问题。我将不得不考虑其他选择。

# ruby - 为什么 Ruby 的默认参数值没有分配给 nil 参数？

> ID：10506091
> 
> 赞同：28
> 
> 时间：2012-05-08T20:35:44.423
> 
> 标签：ruby

我是 Ruby 的新手，遇到了一些让我有点困惑的事情。

我在方法签名中设置了默认参数值。

调用该方法时，我向该参数传递了一个`nil`参数。

但是没有分配默认值；它仍然存在`nil`。

```
# method with a default value of 1000 for parameter 'b'
def format_args(a, b=1000)
  "\t #{a.ljust(30,'.')} #{b}"
end

# test hash
dudes = {};
dudes["larry"] = 60
dudes["moe"] = nil

# expecting default parameter value
puts "Without nil check:"
dudes.each do |k,v|    
  puts format_args(k,v)
end

# forcing default parameter value
puts "With nil check:"
dudes.each do |k,v|    
  if v 
    puts format_args(k,v)
  else 
    puts format_args(k)
  end
end 
```

输出：

```
Without nil check:
     larry......................... 60
     moe........................... 
With nil check:
     larry......................... 60
     moe........................... 1000 
```

这是预期的行为吗？

我错过了什么 ruby​​-foo？

似乎与`nil`我习惯`null`用其他语言思考的“没有价值”不同。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-08T20:39:15.227

*未提供参数*时使用默认参数。

如果您提供它作为`nil`，那么它将是`nil`。所以是的，这是预期的行为。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-04-28T14:30:05.697

如果要设置默认值，即使传递了 nil，并且仍然允许在没有参数的情况下调用该方法，则需要将默认值设置为 nil 并使用“或等于”运算符：

```
def foo(bar=nil)
  bar ||= "default value"
  puts bar
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-15T01:30:42.873

`*`调用该方法时，您还可以使用 Ruby 的 splat 运算符 ( )：

```
dudes.each do |k,v|    
  puts format_args(k,*v)
end 
```

输出：

```
 larry......................... 60
     moe........................... 1000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-28T11:20:03.567

`v.is_nil?`在 if 语句中尝试 ...。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T20:49:06.377

在 Ruby 中，方法总是返回一些东西。有时，没有什么可以返回（数据库中的查询变成空的或类似的东西）。`nil`适用于这些情况；它的意思是“这里什么都没有”，但它*是*对对象的引用。要获得您想要的行为，只需不传递任何参数。

```
def talk(msg="Hello")
  puts msg
end

talk #=> "Hello" 
```

# google-chrome - 触发器：使用 JavaScript 在 Google Chrome 中悬停

> ID：10506094
> 
> 赞同：3
> 
> 时间：2012-05-08T20:35:56.450
> 
> 标签：google-chrome, hover, mouseover

我正在尝试`:hover`使用 JavaScript 将伪类添加到元素中。

我不想使用简单的`.hover`类，因为它显然是多余的，而且我希望是可以避免的。

这是我到目前为止所做的：

```
// creates a new mouseover event
var event = document.createEvent('MouseEvents');
event.initEvent('mouseover', true, false);

// applies this event to my HTML element
element.dispatchEvent(event); 
```

如果元素是一个按钮，这个东西在 Firefox 中完美运行。

问题是，`:hover`CSS 规则不适用于 Chrome 或`<div>`元素。

此处提供演示：

[http://jsfiddle.net/thZ7r/](http://jsfiddle.net/thZ7r/)

PS感谢RobW的回答。`.hover`我仍然觉得使用拖放效果有点难看，但似乎它是唯一的选择。

# vb.net - 为什么会抛出异常消息：重定向 URI 不能包含换行符。？

> ID：10506095
> 
> 赞同：0
> 
> 时间：2012-05-08T20:36:02.493
> 
> 标签：vb.net, iis

有一些看起来像这样的 VB.NET 代码：

```
If (strSPToken <> "ERROR") AndAlso (strSPToken <> "EMPTY") OrElse (strSPToken <> "") Then
                Page.Response.Clear()
                Page.Response.Redirect(String.Format("https://www.somewebsite.com/authenticationsso.ashx?strToken={0}&strEmail{1}", strSPToken, strEmail))
                                Else 
               Page.Response.Redirect(strRequestUrl)
            End If 
```

基本上，这会将用户电子邮件传递到第 3 方站点，然后生成并返回令牌。然后又将两者与此重定向一起传递以登录用​​户。我还有一些与此类似的其他方法，它们工作正常，但不知何故，我一直在 IIS 中收到换行错误。唯一与我的其他身份验证器不同的是，此端点 URL 是 .ashx。我的其他人是 .asmx 或 REST。

我已经尝试了该`HttpUtility.UrlEncode(URL)`选项，但仍然无法正常工作...

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:39:06.147

不管`strSPToken`是什么，它都有一个换行符，这正是错误告诉你的。

我想电子邮件地址也可能有一个新行，或者`strRequestUrl`.

使用您的调试器。

# php - PHP 数组：结果集中的内容

> ID：10506103
> 
> 赞同：3
> 
> 时间：2012-05-08T20:36:56.380
> 
> 标签：php, mysql, arrays

我有一个相当简单的问题，我一直无法找到解决方案。我想用 mySQL 列的内容填充一个数组。

基本上我有一个收集结果集的循环，我需要从这个结果集中取出一个特定的列并将其放入一个数组中。

```
 foreach ($results as $row){

      $names = array();

      $names[] = $row['name'];

    }; 
```

假设结果集中有 40 个名称，它们现在应该都在 $names 数组中，但是当我尝试在屏幕上打印内容时，我只得到最后一个结果：

```
 echo $names[0]; or print_r($names); 
```

我也试过：

```
 while($row = mysql_fetch_array($results)) {

       $names[] = $row['name']; 

    } 
```

但是我已经有了 foreach 设置和工作，所以我不想引入另一个循环来填充数组。

我知道查询和循环都在工作，因为我可以通过放置直接回显每个名称的值：

```
 echo $row['name'] 
```

在循环中并查看结果名称打印在屏幕上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T20:38:00.977

尝试

```
$names = array();
foreach ($results as $row){
      $names[] = $row['name'];
} 
```

您在每个循环中重新声明`$names`一个空白数组，删除您添加到其中的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:39:28.410

```
$names = array();
foreach ($results as $row){
    $names[] = $row['name'];
}; 
```

您的问题是`$names = array();`每次遍历结果集时都声明一个新数组

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T20:39:47.420

您每次都通过在循环内对其进行初始化来覆盖数组值。以下将起作用：

```
$names = array(); //Outside
foreach ($results as $row){
      $names[] = $row['name'];
} 
```

否则，您将推动第一次迭代，并在下一次迭代中一遍又一遍地清除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T20:40:43.847

您正在循环中声明变量，并希望在不可能的情况下使用它。[阅读有关 php 变量范围的信息。](http://php.net/manual/en/language.variables.scope.php)

# google-apps-script - 无权在 Google Apps 脚本中调用 msgBox

> ID：10506105
> 
> 赞同：0
> 
> 时间：2012-05-08T20:37:09.243
> 
> 标签：google-apps-script, google-sheets, google-sheets-formula, google-sheets-custom-function

即使是最简单的 Google Apps 脚本，我也无法运行，例如，当我通过将电子表格设置为单元格来运行此脚本时，`=pantsHate(Y)`我收到了以下错误：

> 错误：您无权调用 msgBox

```
function pantsHate(pref) {

var preference = pref;

switch (preference) {

 case "Y":
  Browser.msgBox("You hate pants.");
  break;
 case "N":
  Browser.msgBox("You do not hate pants.");
  break;
 default:
  Browser.msgBox("You hate answering Y or N");
  break;
 }

return pref;

} 
```

我的最终目标是编写一个小函数来操作日期，特别是我需要准确找出两个日期之间经过了多少天（闰年、特定日期/月份等都是因素）。这个程序只是一个测试，但我似乎已经做错了什么......非常感谢任何帮助！

更新：我在一个新项目中尝试了这个并且它有效...... arg！
更新2：再次运行它`=pantsHate("Y")`，我得到了同样的错误，在这个“新”项目中......为什么谷歌，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:21:00.150

自定义函数只会返回一个值到它们所在的单元格，除非返回一个可能影响连续单元格的数组。

自定义函数无法启动消息框（Browser.msgbox()）

自定义函数是在电子表格单元格中作为公式的全部或部分输入的函数，它从脚本编辑器调用函数。当您声明：

> 例如，当我通过将电子表格的单元格设置为 =pantsHate(Y) 来运行此脚本时，我收到此错误：

=pantsheet(Y) 是一个自定义函数，因为您是从电子表格公式调用它并且它无法启动 Browser.msgbox()

# objective-c - 即使我设置了数据源、委托，另一个视图的 UIPickerView 属性也没有显示

> ID：10506113
> 
> 赞同：0
> 
> 时间：2012-05-08T20:37:26.827
> 
> 标签：objective-c, ios, ipad, interface-builder, uipickerview

我有一个`FilterViewController`充当数据源并代表`UIPickerView`我在模态视图中显示的一个。My`pickerView`是 a 的属性，`FilterActionSheetView`而后者又是 a 的属性`FilterActionSheetViewController`。

我的代码如下：

```
 UIPickerView *pickerView = self.customASVC.actionSheetView.pickerView;

    pickerView.delegate = self;
    pickerView.dataSource = self;

    NSLog(@"%@,pickerView);

    [self.tabBarController.view addSubview:self.customASVC.view];
    [self.customASVC viewWillAppear:NO]; 
```

然而，结果`NSLog()`总是`nil`这样，因此我的选择器视图永远不会出现，即使是一个空的选择器视图。我的印象是，只要我设置`pickerView`' 的数据源并适当地委托它就会显示出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:02:05.760

customASVC 或 actionSheetView 或 pickerView（作为 actionSheetView 属性的 pickerView）为 nil。将该链分解为单独的语句，看看你在哪里得到一个 nil 值。

# jquery - jQuery - 选择页面上除一个 div 之外的所有内容

> ID：10506117
> 
> 赞同：0
> 
> 时间：2012-05-08T20:37:48.830
> 
> 标签：jquery, background, popup, fade

如何使用 jQuery 选择页面上除特定 div 之外的所有内容？

实际上，我正在尝试在特定 div 的弹出窗口中淡化其余的背景。但问题是并非所有内容都在某个 div 中。**很少有元素没有任何父 div。**

```
<body>
    12345

    <div id='second_div'>
       XXXXXX
    </div>

    56789

    <div id='popup'>
       AAAAA
    </div>
</body> 
```

我正在使用下面的代码，但这**不是淡化没有父 div 的内容**（即 12345 和 56789）。它只是'second_div'（即XXXXXX）的淡化内容。

```
$('body > div:not(#popup)').css("opacity",'0.7'); 
```

请指导我如何使用 jQuery 执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:39:23.313

我想你正在寻找这个：

```
$("body > *").not('#popup').css("opacity", '0.7'); 
```

之所以可行，是因为它选择了 的所有直系后代，`body`然后删除了具有`id`of 的所有直系后代`popup`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:47:57.513

测试了它并且完美地工作，虽然我已经测试了另一个但它没有，但无论如何，祝你好运！

```
var lines = $('body').html().split('\n');
$.each(lines, function(k, v){
  lines[k] = '<span>'+v+'</span>';
});

$('body').html(lines.join(''));

$('body > *').css("opacity", '0.7').find('#popup').parent().css("opacity", '1');
; 
```

# php - Aptana Studio - 将 .project 放在单独的目录中

> ID：10506119
> 
> 赞同：2
> 
> 时间：2012-05-08T20:37:51.187
> 
> 标签：php, netbeans, ide, aptana

我最近下载了 Aptana 工作室。但是，我在处理项目文件时遇到了问题。在 NetBeans 中，我能够选择项目文件位置，然后是文件实际存储的位置。这允许分离项目文件（Aptana 中的 .project）和实际上是我的应用程序一部分的文件。

如何在 Aptana Studio 中执行此操作？我这辈子都想不通。谢谢！积分归于解决方案有效的人。如果您还可以告诉我如何让项目在本地工作时通过 FTP 自动上传，Brownie 指出，但这还不是我真正研究过的东西。

谢谢！:)

**编辑**- 经过更多的摆弄，我发现我可以链接资源。然而，虽然这更接近我正在寻找的东西，但它并不完全相同。当我链接资源时，我注意到虽然我可以在 Aptana 中（在链接的项目文件下）创建文件夹等等，但它们实际上并没有出现在 ACTUAL 文件所在的文件系统中。我想将 Aptana 用作实际的文件管理器，但项目文件位于其他位置。这不可能吗？

**编辑**- 更多的摆弄告诉我，我可以通过设置目标文件夹是实际文件所在的连接来链接资源。这更接近我想要的，但它很草率——我必须扩展三个级别的文件夹才能简单地访问我的文件。尽管有人可能会说这是一个小问题，但这很烦人。有什么解决办法吗？

# r - 我正在尝试根据 R 中因子变量的级别在循环中更改工作目录

> ID：10506120
> 
> 赞同：2
> 
> 时间：2012-05-08T20:37:54.260
> 
> 标签：r

我在一个学区工作，并计划制作独特的 PDF 报告，我将把这些报告发送到一个共享驱动器，其中包含我学区 40 多所学校中每所学校的一个文件夹。

我正在尝试在我的`for`循环中设置工作目录，以便每所学校都能获得为其学校量身定制的报告。学校文件是根据名为“school_name”的某个变量的级别命名的，现在我想根据我正在使用学校数据的事实写入这些文件夹[i]。

```
schools <- levels(as.factor(data$school_name))
for (i in 1:length(schools)) {
  setwd("W:\\Data Analysis Results\\"paste(schools[[i]]))
  ## some command to create a unique PDF report for school [[i]]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T20:45:05.633

这个小改动应该可以做到：

```
schools <- levels(as.factor(data$school_name))
for (i in 1:length(schools)) {
  setwd(file.path("W:/Data Analysis Results", schools[[i]]))
  # some command to create a unique PDF report for school [[i]]
} 
```

file.path 函数是为这些任务而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:43:17.393

你有`paste`错误的地方：

```
setwd(paste0("W:\\Data Analysis Results\\",schools[[i]])) 
```

或者如果你有一个旧版本的 R 没有`paste0`

```
setwd(paste("W:\\Data Analysis Results\\",schools[[i]],sep="")) 
```

# java - Java程序拦截和加密流量？

> ID：10506127
> 
> 赞同：0
> 
> 时间：2012-05-08T20:38:20.537
> 
> 标签：java, encryption, aes, traffic, intercept

我找不到明确的答案，所以我想我会问。

我将如何创建一个 Java 程序来拦截和加密（最好使用 AES）离开计算机的所有互联网流量？我认为最大的问题是捕获和加密所有内容，这也是我不知道该怎么做的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:40:49.293

如果你自动加密所有离开机器的流量，reserver 上的服务器如何知道如何解密它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:43:36.300

您还需要一个程序来解密服务器端的流量。一种简单的方法是使用 Tor 网络。[https://www.torproject.org/](https://www.torproject.org/)其他方法是使用 https-anywhere，它在可能的情况下提供强制使用[https://www.eff.org/https-everywhere](https://www.eff.org/https-everywhere)

# html - 搜索按钮上的文本在 IE7/8 中不可读

> ID：10506132
> 
> 赞同：0
> 
> 时间：2012-05-08T20:38:46.997
> 
> 标签：html, internet-explorer-8, internet-explorer-7

搜索框上的文本应该显示为“查找”，但有时在 IE7/8 中该文本不可读。

![潦草的文字](../Images/319d15f37cd34cfec0b5c9b32602ec53.png)

当用户上下滚动页面查看搜索结果时，按钮上的文字消失。

![文字消失](../Images/11c2f36a3d00f962bb7743df15544d8a.png)

CSS：

```
#search-primary .search-inputs td.submit input {
    display: block;
    cursor: pointer;
    font-size: 17px;
    _padding: 2px 0.2em 3px;
    width: 60px;
    margin-top: -1px;
    height: 30px;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T12:25:11.910

```
overflow-y: scroll;  /* IE8 fix */ 
```

为我工作

# jquery - 动态添加图像的滚动条

> ID：10506135
> 
> 赞同：1
> 
> 时间：2012-05-08T20:38:53.597
> 
> 标签：jquery, jscrollpane

我正在使用[**这个**](http://jscrollpane.kelvinluck.com/ajax.html)最好的 JQuery 滚动条插件。

这是他们网站上用于加载动态内容和附加滚动条的示例[**演示**](http://jscrollpane.kelvinluck.com/ajax.html)

我有一个简单的 div 并尝试使用上传器上传一些图像并将上传的图像附加到这个 div

这就是我的意思：

```
 uploader.bind('FileUploaded', function (up, file) {
          $('#paginationimages').append("<img class='LoadclickImage' align='left' 
          style='height:90px;width:120px;' src='Uploads/" + 
          $("<%=currentDirectory.ClientId%>").value + "/" + file.name + "' 
          width='120' height='90' rel='group1' href='Uploads/" + 
          $("<%=currentDirectory.ClientId%>").value + "/" + file.name + "'  
          data-full='Uploads/" + $("<%=currentDirectory.ClientId%>").value + "/"
          +file.name + "'>");
  }); 
```

现在我如何添加滚动条

通常在网站的默认示例中，我们可以为 div 使用一个类，如下所示，它为 div 添加了一个滚动条。但我想知道如何为动态内容执行此操作。

```
<div class="scroll-pane-arrows">
</div> 
```

这就是我的 div 的样子：

```
<div id='paginationimages' class="thumbs">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:25:05.930

```
 uploader.bind('FileUploaded', function (up, file) {
          $image = "<img class='LoadclickImage' align='left' 
          style='height:90px;width:120px;' src='Uploads/" + 
          $("<%=currentDirectory.ClientId%>").value + "/" + file.name + "' 
          width='120' height='90' rel='group1' href='Uploads/" + 
          $("<%=currentDirectory.ClientId%>").value + "/" + file.name + "'  
          data-full='Uploads/" + $("<%=currentDirectory.ClientId%>").value + "/"
          +file.name + "'>";
          $('#paginationimages').append($image).jScrollPane(...);
  }); 
```

# c# - 在 C# 中搜索 XML

> ID：10506140
> 
> 赞同：0
> 
> 时间：2012-05-08T20:39:28.400
> 
> 标签：c#, xml

我有一个要在 C# 中搜索并返回子节点的 xml。

例如

```
<STOCK>
   <STOCKNAME name="Microsoft">     
      <STOCKSYMBOL>MSFT</STOCKSYMBOL>
   </STOCKNAME>
   <STOCKNAME name="Apple Inc.">        
       <STOCKSYMBOL>AAPL</STOCKSYMBOL>
   </STOCKNAME>
   <STOCKNAME name="Google">        
       <STOCKSYMBOL>GOOG</STOCKSYMBOL>
   </STOCKNAME> 
</STOCK> 
```

如果我传递字符串 Microsoft，我只想得到 MSFT 的返回。我认为我做错了

```
String stockText = "";
XmlTextReader reader = new XmlTextReader(@"C:\xml\stockname2.xml");

while (reader.Read())
{
    switch (reader.NodeType)
    {
        case XmlNodeType.Element:
             break;

        case XmlNodeType.Text:
             if (reader.GetAttribute("name") == stock) 
             {
                stockText = reader.GetAttribute("symbol");
             }
             break;
    }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T20:47:14.923

我不会称其为“错误的”，因为您可以做到这一点，但这绝对不是最好的方法。本质上，您将重写称为 XPath 的东西，它[内置于 .net 框架](http://msdn.microsoft.com/en-us/library/ms256115.aspx)中（并且是许多解析器支持的[W3C 规范）](http://www.w3.org/TR/xpath/)

您可以将代码简化为：

```
var doc = new XmlDocument();
doc.Load(@"C:\xml\stockname2.xml");

var node = doc.SelectSingleNode("//STOCK/STOCKNAME[@name = 'Microsoft']/STOCKSYMBOL");
string symbol = node.InnerText; // this should be "MSFT" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:43:06.140

“搜索 XML”的最佳方式是使用 XPath 和/或 XQuery。这在 C#（和所有 .Net 语言）中得到完全支持。

这里有些例子：

*   [http://forums.asp.net/t/1182136.aspx/1](http://forums.asp.net/t/1182136.aspx/1)

*   [http://support.microsoft.com/kb/308333](http://support.microsoft.com/kb/308333)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T20:46:45.140

使用 Linq2Xml

```
string searchFor="Microsoft";
XDocument xDoc = XDocument.Load(.....);

var result =  xDoc.Descendants("STOCKNAME")
    .Where(x=>x.Attribute("name").Value==searchFor)
    .Select(x=>x.Element("STOCKSYMBOL").Value)
    .SingleOrDefault(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T22:41:13.687

它可能不是很健壮，但我会做这样简单的事情：

```
String stock = "Microsoft";
String stockText = "";
XmlTextReader reader = new XmlTextReader(@"C:\xml\stockname2.xml");

while(reader.ReadToFollowing("STOCKNAME"))
{
    if(reader.GetAttribute("name") == stock)
    {
        reader.ReadToDescendant("STOCKSYMBOL");
        stockText = reader.ReadElementContentAsString();
        break;
    }
} 
```

只要您的 XML 变化不大，它就可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T21:04:06.317

我同意其他发帖者的观点，即 XPath 和面向文档的方法是更好的方法，但为了理解您编写的代码，我们开始：

当您点击与您正在寻找的公司匹配的元素时，您想要*前进*到文本节点并获取*其*值。像这样的东西：

```
 while (reader.Read())
    {
        switch (reader.NodeType)
        {
            case XmlNodeType.Element:
                if (reader.GetAttribute("name") == stock)
                {
                    if (reader.Read() && reader.NodeType == XmlNodeType.Text)
                    {
                        stockText = reader.Value;
                    }
                }
                break;
        }
    } 
```

（对于潜入我的 C# 的任何 Javaisms 表示歉意。）

我更喜欢面向文档的解决方案的原因是您可以加载一次 XML 并多次查询它（对于许多股票，在您的情况下）。使用 XmlTextReader，您只需通过文件一次。

# jsf - PrettyFaces 3.32 / JSF 2 / Servlet 3.0 的问题

> ID：10506148
> 
> 赞同：0
> 
> 时间：2012-05-08T20:39:52.410
> 
> 标签：jsf, servlets, prettyfaces

我有一个问题。看起来 PrettyFaces 正在覆盖我的 webservlet url 模式。

我的 pretty-config.xml 的一部分

```
<url-mapping id="searchClassifiedAdsBeanRewrite">
     <pattern value="/#{prefixDummy}/#{region:searchBean.region}/#{category:searchBean.category}" />
     <view-id value="/searchClassifiedAds.html" />
</url-mapping> 
```

我的 servlet urlPattern 如下

```
@WebServlet(urlPatterns = {"/images/*", "/images/temp/*"}) 
```

现在，每次我有适用于我的漂亮面孔定义的 url 时，我的 webservlet urlpattern 都不会被调用。不是第一个或第二个 url 模式。

如果我没有漂亮的面孔匹配，那么一切正常。（即使我更改了 #{prefixDummy} 和硬代码，它也不起作用。

我正在使用文件 servlet（实际上是 BalusC 的一个示例）来显示动态图像！

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:25:10.923

PrettyFaces 支持论坛可能是您想从这个问题开始的地方：http: [//ocpsoft.org/support/forum/prettyfaces-users](http://ocpsoft.org/support/forum/prettyfaces-users)

但是既然你在这里问:) 基本上你看到的是预期的行为。PrettyFaces 将匹配任何入站 Servlet 请求、转发、错误或包含匹配给定模式。如果您的图像 URL 恰好与该模式匹配，那么您的 Pretty URL 映射将与任何其他 URL 一样匹配这些 URL。

您需要更严格地限制该模式，使其不会与您的其他 URL 冲突。

[当包含 Rewrite 核心框架 ( http://ocpsoft.org/rewrite/](http://ocpsoft.org/rewrite/) )时，PrettyFaces 4 中将更容易解决这个问题。您将能够匹配一个 URL，同时排除由现有 Servlet 映射的 URL。）

这在重写中已经是可能的：

```
ConfigurationProvider.begin()
.addRule(Join.path("/{prefixDummy}/{region}/{category}").to()
         .when(Not.any(ServletMapping.includes("/{prefixDummy}/{region}/{category}")))
         .where("region").bindsTo(PhaseBinding.to(El.parameter("searchBean.region")))
         .where("category").bindsTo(PhaseBinding.to(El.parameter("searchBean.category")))) 
```

注意负约束：`ServletMapping.includes("/{prefixDummy}/{region}/{category}")`当容器中的 Servlet 可以处理请求时，它会阻止规则匹配。

# facebook - 无法使用应用程序 access_token 而不是用户 access_token 查询“权限”FQL 表

> ID：10506150
> 
> 赞同：0
> 
> 时间：2012-05-08T20:39:55.373
> 
> 标签：facebook, facebook-graph-api, permissions, facebook-fql, facebook-access-token

我正在尝试`permissions`使用我的应用程序查询 FQL 表，`access_token`例如：

```
https://graph.facebook.com/fql?&access_token=337313372909587|U_TaFVlx-9D6vOJXXXXZp22034k&q=select user_about_me from permissions where uid = me() 
```

我的应用访问令牌在哪里`337313372909587|U_TaFVlx-9D6vOJXXXXZp22034k`（当然我更改了它）

问题是它不起作用。相反，如果我尝试用 替换应用程序`access_token`，`user access_token`它可以工作。

关键是，根据[文档](https://developers.facebook.com/docs/reference/fql/permissions/)，我正在尝试做的事情应该是可能的。

这是 API 或文档中的错误吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:16:07.507

如果这不是您的问题中的错字，则您`where uid=me()`在查询中使用

`me()`是当前会话用户（即您正在使用其访问令牌的用户）的用户 ID 的占位符

如果您尝试使用应用访问令牌进行该调用，则需要指定用户 ID

`https://graph.facebook.com/fql?&access_token=APP_ACCESS_TOKEN&q=select user_about_me from permissions where uid = USER_ID`应该工作（为我工作）

# django - 正确构建 Django 模型

> ID：10506156
> 
> 赞同：1
> 
> 时间：2012-05-08T20:40:29.027
> 
> 标签：django, model

我正在为锻炼创建一个跟踪应用程序，我想知道创建模型的最有效方法。我做的大多数练习都有重复、组和重量。但是有些跑步有距离和时间。起初，我打算创建两个不同的模型来捕捉每个模型，但后来我认为合并起来可能会更好。现在，我不确定。

好的，下面是我的第一关：

```
LEVELS = (
    (1, '1 - Hardly'),
    (2, '2'),
    (3, '3'),
    (4, '4'),
    (5, '5 - Average'),
    (6, '6'),
    (7, '7'),
    (8, '8'),
    (9, '9'),
    (10, '10 - Very'),

class Jog(models.Model):
    distance = models.DecimalField("Distance (Miles)", max_digits=4, decimal_places=2)
    time = models.DecimalField("Time (Minutes)", max_digits=4, decimal_places=2)
    intensity = models.IntegerField("Intensity", choices = LEVELS, default = 5)
    date = models.DateTimeField("Date", blank=True, default=datetime.now)   
    notes = models.TextField("Notes", blank=True)

    def __str__(self):
        return "%s Miles in %s Minutes (Intensity of %s)" % (self.distance, self.time, self.intensity)

    class Meta:
        verbose_name = "Jog"

class Exercise_Type(models.Model):
    name = models.CharField("Exercise Name", max_length=200, unique = True)
    slug = models.SlugField(max_length=100, blank=True)
    notes = models.TextField("Notes", blank=True)

    def __str__(self):
        return self.name

class Workout(models.Model):
    exercise_type = models.ForeignKey(Exercise_Type, verbose_name="Exercise Type")
    reps = models.IntegerField("Repetitions")
    sets = models.DecimalField("Sets", max_digits=2, decimal_places=1)
    weight = models.IntegerField("Weight", blank=True, null=True)
    intensity = models.IntegerField("Intensity", choices = LEVELS, default = 5)
    date = models.DateTimeField("Date", blank=True, default=datetime.now)
    notes = models.TextField("Notes", blank=True) 
```

这似乎很愚蠢，因为慢跑是一种锻炼方式，只是因为它具有不同的测量特征而被分开。所以我想，如果我做这样的事情怎么办。在锻炼类型中定义必要的字段，然后通过询问用户锻炼类型来启用/抑制它们：

```
class Exercise_Type(models.Model):
    name = models.CharField("Exercise Name", max_length=200, unique = True)
    slug = models.SlugField(max_length=100, blank=True)
    notes = models.TextField("Notes", blank=True)

    distance = models.BooleanField("Use Distance Field?", default = False)
    time = models.BooleanField("Use Time Field?", default = False)
    reps = models.BooleanField("Use Reps Field", default = False)
    sets = models.BooleanField("Use Sets Field?", default = False)
    weight = models.BooleanField("Use Weight Field?", default = False)

    def __str__(self):
        return self.name

class Workout(models.Model):
    exercise_type = models.ForeignKey(Exercise_Type, verbose_name="Exercise Type")
    distance = models.DecimalField("Distance (Miles)", max_digits=4, decimal_places=2, blank = True, null=True)
    time = models.DecimalField("Time (Minutes)", max_digits=4, decimal_places=2, blank = True, null=True)
    reps = models.IntegerField("Repetitions", blank = True, null=True)
    sets = models.DecimalField("Sets", max_digits=2, decimal_places=1, blank = True, null=True)
    weight = models.IntegerField("Weight", blank=True, null=True)
    intensity = models.IntegerField("Intensity", choices = LEVELS, default = 5)
    date = models.DateTimeField("Date", blank=True, default=datetime.now)
    notes = models.TextField("Notes", blank=True) 
```

这似乎是一种资源浪费，因为从技术上讲，无论是否需要，每次练习都会涉及每个领域。

然后我想，子分类呢？就在那时，我放弃了，决定吸引那些比我更有知识的人。

组织这个模型的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:12:47.933

由于每个练习都有一个或多个要测量的属性，因此您应该将这些属性提取出来，因此您最终会得到三个主要模型。

```
class Metric(models.Model):
   name = models.CharField(max_length=20)
   description = models.TextField(null=True, blank=True)
   measured_in = models.CharField(max_length=20, null=True, blank=True)
   # other fields

class Measurement(models.Model):
   metric = models.ForeignKey(Metric)
   value = models.CharField(max_length=20, null=True, blank=True)
   workout_date = models.DateField(auto_now=True)

class Workout(models.Model):
   # common attributes for each workout
   name = models.CharField(max_length=200)
   notes = models.TextField()
   metrics = models.ManyToManyField(Measurement) 
```

您将各种指标（您测量的事物）添加到`Metric`. 对于每次锻炼，您可以通过添加创建新的`Measurement`. 最后，您在创建它时将其与每个锻炼相关联。

这是一个示例：

```
reps = Metric.objects.create(name='Reps')
my_reps = Measurement.objects.create(metric=reps,value=10)
w = Workout(name="Weights")
w.metrics.add(my_reps)
w.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:20:05.627

这正是继承的目的。创建一个泛型`Workout`类型，然后使用锻炼类型对其进行子类化。具有子类的唯一/特定属性。

```
class Workout(models.Model):
    date = models.DateTimeField("Date", blank=True, default=datetime.now)
    notes = models.TextField("Notes", blank=True)

class Jog(Workout):
    distance = models.DecimalField("Distance (Miles)", max_digits=4, decimal_places=2, blank = True, null=True)
    time = models.DecimalField("Time (Minutes)", max_digits=4, decimal_places=2, blank = True, null=True)

class Weightlifting(Workout):
    reps = models.IntegerField("Repetitions", blank = True, null=True)
    sets = models.DecimalField("Sets", max_digits=2, decimal_places=1, blank = True, null=True)
    weight = models.IntegerField("Weight", blank=True, null=True) 
```

等等。如果您不需要在`Workout`任何地方使用泛型类型，则可以将其设为抽象模型。

# linux - 如何在 Ubuntu 11.10 上安装 gcc 4.4.6

> ID：10506158
> 
> 赞同：-1
> 
> 时间：2012-05-08T20:40:43.517
> 
> 标签：linux, gcc, ubuntu, x86-64

我读过 GCC 4.4.6 打包在 Ubuntu 版本 11.10 (Oneiric) 中。我的问题是如何使用 apt-get 安装它，因为`apt-get install gcc446`两者都不起作用`apt-get install gcc44.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:23:50.583

第 1 步：sudo apt-get install build-essential

第 2 步：sudo apt-get install gcc-4.4

第 3 步：通过 sudo gcc -v 检查安装的版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:49:10.680

它使用以下命令成功安装。

```
sudo apt-get install gcc-4.4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:09:12.570

有一个名为 build-essential 的元包应该安装编译器和一堆相关/需要的包：

```
sudo apt-get install build-essential 
```

首先做 sudo apt-get update 的建议是合理的，这将更新包列表并且所有版本都应该很好地匹配。

但是，如果您没有`/etc/apt/sources.list`手动修改文件。如果是这样，那么您所做的某些更改或您添加的存储库可能包含冲突的包，这会导致您看到的问题。如果是这种情况，请查看文件并修复麻烦的条目。当然，如果您需要帮助，您可以发布您的`sources.list`文件（或 中的任何片段`/etc/apt/sources.list.d`），也许有人可以帮助您修复它们。

# eclipse - Eclipse CDT 和外部库 (VTK)

> ID：10506162
> 
> 赞同：1
> 
> 时间：2012-05-08T20:40:50.113
> 
> 标签：eclipse, linker, vtk

我正在尝试在 Windows7 上的 Eclipse CDT 中使用外部库 (VTK)。我尝试将包含目录 (-I) 和 lib 目录 (-L) 添加到项目选项中。我不确定 DLL 文件。

```
g++ -LE:\VTK\VTKLibs\lib\vtk-5.4 -LE:\HSimulator\New Folder 
-o VTK_Cygwin.exe src\VTK_Cygwin.o 
-lvtkGraphics -lvtkftgl -lvtkjpeg -lvtkpng -lvtktiff -lvtkzlib -lvtkHybrid -lvtkmetaio 
-lvtkImaging -lvtkfreetype -lvtkCommon -lvtkalglib 
```

但是，我收到以下错误：

```
src\VTK_Cygwin.o: In function `~vtkSmartPointer':
include/vtkSmartPointer.h:27: undefined reference to `_imp___ZN19vtkSmartPointerBaseD2Ev' 
```

我尝试了不同的方法，但我无法找出问题所在。有没有办法跟踪 Eclipse CDT 中的链接问题？

谢谢

# java - 奇怪的 DefaultTreeCellRenderer 行为，仅部分执行 getTreeCellRendererComponent()

> ID：10506170
> 
> 赞同：1
> 
> 时间：2012-05-08T20:41:40.147
> 
> 标签：java, swing, jtree, treecellrenderer

我创建了一个 JTree，即使有多个根节点（这对我来说相当困难，因为这是我的第一个 JTree），并且准备好（我想）更进一步；一个细胞渲染器。

我尝试为每个节点设置一个图标，效果很好。现在我正在尝试检查它是什么类型的节点（不仅是叶子和分支），并构建我想要的图像文件名的字符串。`isKlas()`现在总是返回 true，所以它应该是 klas_fold.png 或 klas_unfold.png。但是`getTreeCellRendererComponent()`只是部分执行，因为文件路径永远不会被打印，也没有任何图标更改，它始终是默认值！

这是我的代码：

```
import javax.swing.*;
import javax.swing.tree.*;
import java.awt.*;

public class RATree extends JTree {

    private static final long serialVersionUID = -3855798479619346917L;

    public RATree(Object[] top) {
        super(top);
        MyRenderer renderer = new MyRenderer();
        this.setCellRenderer(renderer);

        setBorder(BorderFactory.createRaisedBevelBorder());
    }

    protected ImageIcon createImageIcon(String path) {

        java.net.URL imgURL = getClass().getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }

    class MyRenderer extends DefaultTreeCellRenderer {

        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {
            TreeItem node;
            String fileName = "";
            super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
            try {
                node = (TreeItem) value;
            }
            catch (ClassCastException ex)
            {
                ex.printStackTrace();
                return this;
            }

            if(node.isKlas()) {
                fileName += "klas_";
            }

            if(expanded) {
                fileName += "unfold.png";
                this.setIcon(createImageIcon("../bin/" + fileName));
            }
            else {
                fileName += "fold.png";
                this.setIcon(createImageIcon("../bin/" + fileName));
            }

            System.out.println("fileName: " + fileName); //Doesn't get executed, or at least, I can't see it.
            return this;
        }

    }
    public static void main(String[] args) {
        JFrame f = new JFrame("Short, Self Contained, Correct (Compilable), Example");
        Object[] root = {new TreeItem("name", "someURL"), new TreeItem("name", "someUrl")};
        f.add(new RATree(root));
        f.setSize(100,100);
        f.setVisible(true);
    }
} 
```

是的，它是一个内部类。

谢谢！

**编辑：**

我发现这是一个 ClassCastException 搞砸了事情。但这很奇怪，因为我像这样初始化 Tree `new JTree({new TreeItem("params"), new TreeItem("params")});`：所以我应该能够将它们从 Object 转换回 TreeItem？（TreeItem 是我的类之一。它扩展了 DefaultMutableTreeNode）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:07:47.030

1）您是否尝试通知 TreeModel`TreeModel.nodeChanged(node);`值已更改

2）`Icon(s)`直接放到TreeModel里面，而不是re_create里面`TreeCellRenderer`

3) `JTree`(`JTable`和from )`JList`与Renderer for JTable共享相同的[概念](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)`JList``JComboBox`

4）请阅读[自定义树的显示](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#display)

[5)这里](http://www.java2s.com/Code/Java/Swing-JFC/CatalogSwing-JFC.htm)和[这里的](http://www.exampledepot.com/egs/javax.swing.tree/pkg.html)例子

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T21:17:16.323

我自己解决了！我以为那`Object value`是我放在 JTree 中的 TreeItem，但它是另一回事。我通过这样做得到了 TreeItem（就像在 mKorbel 提供的自定义树的显示链接中一样）：

```
TreeItem node = (TreeItem) ((DefaultMutableTreeNode)value).getUserObject(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T21:09:10.790

我很高兴你弄清楚了 try-catch 部分。要解决此问题，请确保您没有提供除 TreeItem 实例之外的任何 DefaultTreeModel。你应该把这条线`System.out.println(value.getClass())`放在你的 catch 块中。

此外，您应该考虑创建图标的单个实例，而不是每次展开或折叠树节点时都创建一个新实例。

# javascript - AJAX 未定义变量

> ID：10506174
> 
> 赞同：0
> 
> 时间：2012-05-08T20:42:25.013
> 
> 标签：javascript, ajax, undefined

我在我的网站的另一个地方使用相同的代码，它在其中工作......我有一个带有 onChange 命令的下拉菜单，它调用 getClient(this.value) javascript代码，但是当它调用时，我得到这个错误：

```
Uncaught exception: ReferenceError: Undefined variable: getXMLHTTP
Error thrown at line 4, column 2 in getClient(client) in edit_client.php:
var req = getXMLHTTP();
Called from line 1, column 0 in <anonymous function>(event) in edit_client.php:
getClient(this.value) 
```

不确定为什么 getXMLHTTP 会作为未定义的变量返回。

# java - 使用 LittleEndian 将一组短裤写入文件的好方法

> ID：10506180
> 
> 赞同：3
> 
> 时间：2012-05-08T20:43:02.130
> 
> 标签：java

我有一个**short[512x512] 数组**需要写入一个带有**little endian的****二进制文件**。我知道如何用**little endian写****一个简短**的文件。我认为可能有比**逐个**循环遍历数组**更好的方法**。

 ******* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T21:09:04.723

有点像这样：

```
short[] payload = {1,2,3,4,5,6,7,8,9,0};
ByteBuffer myByteBuffer = ByteBuffer.allocate(20);
myByteBuffer.order(ByteOrder.LITTLE_ENDIAN);

ShortBuffer myShortBuffer = myByteBuffer.asShortBuffer();
myShortBuffer.put(payload);

FileChannel out = new FileOutputStream("sample.bin").getChannel();
out.write(myByteBuffer);
out.close(); 
```

有点像这样把它拿回来：

```
ByteBuffer myByteBuffer = ByteBuffer.allocate(20);
myByteBuffer.order(ByteOrder.LITTLE_ENDIAN);
FileChannel in = new FileInputStream("sample.bin").getChannel();
in.read(myByteBuffer);
myByteBuffer.flip();
in.close(); // do not forget to close the channel

ShortBuffer myShortBuffer = myByteBuffer.asShortBuffer();
myShortBuffer.get(payload);
System.out.println(Arrays.toString(payload)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:45:39.970

如果你*真的*需要这个快速，最好的解决方案是将短裤放入一个`ByteBuffer`小端字节顺序。然后，在一个操作中使用`FileChannel`.

使用方法设置`ByteBuffer`' 字节顺序`.order()`。******

# mysql - 标记系统：Toxi 解决方案问题

> ID：10506181
> 
> 赞同：4
> 
> 时间：2012-05-08T20:43:02.410
> 
> 标签：mysql, database-design, database-schema, tagging

我对标签数据库模式的 Toxi 解决方案有点头疼。我正在开发一个用户可以提交项目的系统，这些项目可以有与之关联的标签。在阅读了 tagschemas 之后，我发现 Toxi 解决方案最适合我的需求。但是，我不完全确定我的计划是否正确，所以我想请您对此发表意见。

我将拥有三个数据库。
`items`包含`item_id`和其他人
`tagmap`使用`item_id`和`tag_id`作为外键
`tags`包含`tag_id`和`tag_text`

添加新项目时，我是否可以假设将标签添加到数据库的过程如下？

1.  将提交的标签排序到数组中
2.  对于数组中的每个标签：
    1.  从 tag_text 与当前标签匹配的标签中获取 tag_id
    2.  如果返回 0 行：
        1.  将标签添加到标签表
        2.  获取 tag_id
    3.  将 item_id 和 tag_id 添加到 tagmap
3.  完成（给用户一个好的，等等）

这意味着我们最终会在标签映射中为每个项目的每个标签创建一个条目。这似乎是正确的，但我不禁认为有更好的方法来做到这一点，而不是在那里结束大量的条目......

至于编辑标签，我已经想到了以下过程，虽然我认为我还没有找到更好的方法。

1.  使用 item_id 获取标签并插入可编辑字段
2.  用户进行更改。提交时：
3.  从 tagmap 中删除 item_id 与正在编辑的行匹配的行
4.  与上面列出的过程相同

我对那里的第 3 点有点怀疑。有没有办法让我检查是否有任何标签已被删除，这样我就可以有选择地删除标签，而不仅仅是删除并重新添加它们？只是为了确定：当删除标记映射行时，相关项目不会被删除，因为它指向一个外键而不是一个外键，对吧？

此外，我可能想跟踪使用标签的次数，但我不想运行查询来计算每次需要显示的次数。我正在考虑让 cron 作业每小时或每两小时计算一次 tagmap 中每个 tag_id 的实例数，然后更新 tags 表中的 tag_use 值。这是正确的方法，还是有更好的方法？

回想起来，那是相当大量的文字。Welp，与其说太详细，不如说漏掉信息，与其问太少，不如问太多问题，学很多新东西。好机会我今天花了太多时间研究这个，明天一切都会变得更有意义。

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T19:01:32.437

首先，“毒”不是一个标准术语。始终定义您的条款！或者至少提供相关链接。

现在到问题本身......

> 我将拥有三个数据库。

不，您将有 3 张桌子。

> 添加新项目时...

您几乎走在正确的轨道上，除了您可以使用 SQL 的基于集合的特性来“合并”其中的许多步骤。例如，用标签标记项目 1：'tag1'、'tag2' 和 'tag3' 可以这样完成......

```
INSERT IGNORE INTO tagmap (item_id, tag_id)
SELECT 1, tag_id FROM tags WHERE tag_text IN ('tag1', 'tag2', 'tag3'); 
```

`IGNORE`即使 item 已经连接到这些标签中的某些标签，它也允许此操作成功。

这假设所有必需的标签都已经在`tags`. 假设`tag.tag_id`是自动增量，您可以执行以下操作以确保它们是：

```
INSERT IGNORE INTO tags (tag_text) VALUES ('tag1'), ('tag2'), ('tag3'); 
```

> 这意味着我们最终会在标签映射中为每个项目的每个标签创建一个条目。这似乎是正确的，但我不禁认为有一种更好的方法可以做到这一点，然后在那里有大量的条目......

没有魔法。如果“项目连接到特定标签”是您要记录的知识，那么它*必须*在数据库中具有某种物理表示。

> 至于编辑标签...

您的意思是重新标记项目（不修改标签本身）？

要删除不在列表中的所有标签，请执行以下操作：

```
DELETE FROM tagmap
WHERE
    item_id = 1
    AND tag_id NOT IN (
        SELECT tag_id FROM tags
        WHERE tag_text IN ('tag1', 'tag3')
    ); 
```

这将断开该项目与除“tag1”和“tag3”之外的所有标签。依次执行上面的 INSERT 和 DELETE 以“覆盖”添加和删除标签。

您可以在[SQL Fiddle](http://sqlfiddle.com/#!2/49981/3)中使用所有这些。

> 只是为了确定：当删除标记映射行时，相关项目不会被删除，因为它指向一个外键而不是一个外键，对吧？

正确的。FK 的子端点不会触发引用操作（例如 ON DELETE CASCADE），只有父端点会。

顺便说一句，您使用此模式是因为您想要`tags`（旁边`tag_text`）中的其他字段，对吗？如果你这样做了，不要仅仅因为所有连接都消失而丢失这些额外的数据是期望的行为。

但是，如果您只想要`tag_text`，您将使用更简单的模式，其中删除所有连接与删除标签本身相同：

![在此处输入图像描述](../Images/f0f28ab59441194786059827c7584a83.png)

这不仅会简化 SQL，还会提供更好的[集群](http://use-the-index-luke.com/sql/clustering)。

乍一看，“toxi”可能看起来像是在节省空间，但实际上可能并非如此，因为它需要额外的表和索引（并且标签往往很短）。

> 另外，我可能想跟踪标签的次数...... cron 作业......

在你决定做这样的事情之前进行测量。上面提到的我的 SQL Fiddle 在 PK 中使用了非常慎重的字段顺序`tagmap`，因此数据以一种对这种计数非常友好的方式聚集在一起（记住：[InnoDB 表是聚集的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)）。在这成为问题之前，您必须拥有真正大量的项目（或需要异常高的性能）。

无论如何，**测量**真实的数据量！

# ms-access - 访问：用户可以从组合框中选择（返回一个数字）或键入一个名称（返回一个字符串）

> ID：10506183
> 
> 赞同：1
> 
> 时间：2012-05-08T20:43:07.637
> 
> 标签：ms-access

所以在我的 Access 应用程序中，有一个字段，用户可以从下拉列表中选择一个名称，或者键入一个。该列表应返回一个数字（如果在 People 表中，则为所选人员的 PersonID）或字符串（如果输入不在数据库中的某人的姓名）。

这一定是一个相当普遍的要求，但我没有看到任何非常简单的方法来做到这一点。我首先想到的方法是使用 VBA 代码，如果用户键入名称而不是从列表中选择，则在 People 表中为新人创建一个条目，然后返回他的 PersonID（由 AutoNumber 新分配）。这可能涉及向用户询问有关新人的所需信息（例如电话号码）的对话。

有没有更好的办法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:59:07.377

使用组合框的 NotInList 事件。这是一个快速示例：

```
Private Sub PersonID_NotInList(NewData As String, Response As Integer)
Dim Result As VbMsgBoxResult, NewPersonID As Long, MaxPersonID As Long

    On Error GoTo Err_PersonID_NotInList

    Response = acDataErrDisplay
    Result = MsgBox("'" & NewData & "' is not currently in the database.  " & _
                    "Would you like to add '" & NewData & _
                    "' to the database?", vbYesNo + vbExclamation, _
                    "Person Not In List")
    If Result = vbYes Then
        MaxPersonID = DMax("PersonID", "People")
        DoCmd.OpenForm "AddPerson", , , , acFormAdd, acDialog, NewData            
        NewPersonID = DMax("PersonID", "People")
        If NewPersonID > MaxPersonID Then
            Me.PersonID = NewPersonID
            Me.PersonID.Requery
            Response = acDataErrAdded
        End If
    End If

Exit_PersonID_NotInList:
    Exit Sub
Err_PersonID_NotInList:
    MsgBox Err.Description
    Resume Exit_PersonID_NotInList
End Sub 
```

笔记：

*   使用 DMax 不是获取新添加的 PersonID 的可靠方法，但它使示例更易于阅读。您应该`SELECT @@Identity`改用（谷歌了解更多信息）。
*   我将 NewData 作为 OpenArg 传递给“AddPerson”表单。这将允许您在打开 AddPerson 表单时预先填充此人的姓名。

# xml - xml 包含另一个 xml

> ID：10506191
> 
> 赞同：-1
> 
> 时间：2012-05-08T20:43:37.637
> 
> 标签：xml

我们有xml存储格式，比如

```
<record> data </record> 
```

我们遇到了一个数据本身可以是 xml 的用例。如何将 xml 数据包含在另一个 xml 元素中，例如

```
<record> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T20:46:16.880

XML 元素包含如下 XML 是完全有效的：

```
<record><record>test</record></record> 
```

如果这不是您所需要的，请在您的问题中进一步澄清。作为最后的手段，您可以考虑使用 CData Elements。

```
<record>
    <![CDATA[<someotherbadlyformedxml>data<br></someotherbadlyformedxml>]]>
</record> 
```

但是，如果您的所有数据都是有效的 XML，那么确实没有理由这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:47:57.300

如果您能提供帮助，您可能不想像这样嵌套 XML。但是，如果必须，请使用 CDATA。

这是对[CDATA的引用](https://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T20:49:06.173

两种可能的解决方案：

1.  在编写记录元素之前转义字符串/xml 数据。

2.  使用 CDATA 部分

# javascript-events - mouseclick 更改文本颜色并取消绑定先前单击的

> ID：10506196
> 
> 赞同：0
> 
> 时间：2012-05-08T20:44:24.423
> 
> 标签：javascript-events, jquery

我正在努力实现我们在 gmail 中看到的东西。当我将鼠标悬停在它上面时，它会更改文本颜色，单击时会将文本的颜色更改为红色。当我单击另一行时，会发生同样的事情。但是，就我而言，由于我的新手知识，我错过了一些东西。我需要取消绑定上一次单击，因为上一次单击使文本保持红色。

```
$("#index td").hover(
            function() {
                $(this).css( {'background': '#e9e7e7',
                              'cursor': 'pointer'});
            },
            function () {
                $(this).css({'background': '#ffffff',
                              'cursor': 'pointer'});
            }
        ).click(function(){
            $(this).css({ 'color': 'red'});
        }); 
```

**编辑**

```
<tr style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); cursor: pointer; background-position: initial initial; background-repeat: initial initial; " class="selected"><td style="padding:2.5px 0px 2.5px 2px;">XYZZZZ</td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:54:00.580

我认为您最好使用 CSS 处理悬停事件并使用 JS 处理单击。这是一个例子：http: [//jsfiddle.net/ZmcNN/1/](http://jsfiddle.net/ZmcNN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:47:19.757

如果我理解正确，那么您想重置先前在单击行上设置的红色。

如果是这样，那么在单击中，您需要将所有其他颜色的颜色设置为默认值，

```
 var $tds = $("#index td");
    //..
    //..
    .click(function(){
        $tds.css({'background': '#ffffff',
                          'cursor': 'pointer'});

        $(this).css({ 'color': 'red'});
    }); 
```

或者，正确的方法是定义 2 个 CSS 类 1\. 突出显示 2\. 选择，然后相应地添加/删除它们。

**CSS：**

```
.highlight { background: '#ffffff', cursor: 'pointer'}
.selected { color: 'red'; } 
```

**JS：**

```
 var $tds = $("#index td");

    $tds.hover(
        function() {
            $(this).addClass('highlight');
        }, function () {
            $(this).removeClass('highlight');
        }
    ).click(function(){
        $tds.removeClass('selected');
        $(this).addClass('selected');
    }); 
```

注意：如果我没记错的话，这些东西通常适用于`tr`s 而不是`td`s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T20:49:53.287

我不确定我是否完全理解这个问题，但我认为您可能需要[one()](http://api.jquery.com/one/)函数：

```
$("#foo").one("click", function(){
    alert("This will be displayed only once.");
}); 
```

以上基本上相当于这样做：

```
$("#foo").bind("click", function(e) {
    alert("This will be displayed only once.");
    $(this).unbind(e);
}); 
```

# css - 菜单div的父div上的自动高度......如何？

> ID：10506200
> 
> 赞同：0
> 
> 时间：2012-05-08T20:44:31.607
> 
> 标签：css, html, wrapper, markup

那么基本的想法是让包装器根据孩子的高度自动扩展高度。但问题是菜单子项有一个浮动属性，如果它比内容大 - 它只是伸出来，你可以通过加载代码看到这一点。我不喜欢玩相对位置，表格单元格。如果我在包装器上设置 float:left 它实际上会由于某种原因使我的整个标记出错。我还有其他方法可以做到这一点吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <style>
            div.wrap{
                background-color:grey;
                padding:5px;
            }
            div.left{
                background-color:orange;
                float:left;
                width:200px;
                height:400px;
            }
            div.content{
                margin-left:200px;
                height:200px;
                background-color:white;
            }
        </style>
    </head>
    <body>
        <div class="wrap">
            <div class="left">
                Menu
            </div>
            <div class="content">
                Text
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:49:13.420

内部`div.wrap`：

```
<div class="clear"></div> 
```

内部`<style>`：

```
div.clear{
    clear:both;
} 
```

# android - 是否可以通过编程方式设置 drawableLeft？

> ID：10506220
> 
> 赞同：6
> 
> 时间：2012-05-08T20:46:12.680
> 
> 标签：android

在 XML 中，我们可以使用这种方式设置 drawableLeft：

```
 <Button
    android:id="@+id/previewBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/white_btn"
    android:drawableLeft="@drawable/green_circle"
    android:drawablePadding="16dp"
    android:text="Button" /> 
```

如何以编程方式做同样的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-08T20:49:14.223

是的，使用[setCompoundDrawablesWithIntrinsicBounds](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28int,%20int,%20int,%20int%29)

并为第一个参数定义drawable，然后为所有其他参数定义0。

代码应如下所示：

```
Button b = findViewById(R.id.myButton);

b.setCompoundDrawablesWithIntrinsicBounds(R.drawable.myDrawable, 0, 0, 0); 
```

如果您的drawable也是在代码中创建的，那么您需要使用另一个[setCompoundDrawablesWithIntrinsicBounds](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable%29)方法，该方法需要4个drawable，并为除了左边的所有内容传递null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:50:22.883

使用的方法是[setCompoundDrawablesWithIntrinsicBounds](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable%29)。此方法采用所有四个可绘制选项（左、上、右、下），因此如果您只想要左，请传入`null`其他选项。

# sql - 使用 ADODB 连接从已关闭的工作簿中检索数据。某些数据被跳过？

> ID：10506223
> 
> 赞同：5
> 
> 时间：2012-05-08T20:46:23.290
> 
> 标签：sql, excel, vba

我目前正在编写一些代码，可以通过 ADODB 连接访问单独的工作簿。由于速度的原因，我选择了这个而不是其他方法。下面是我的代码：

```
 Sub GetWorksheetData(strSourceFile As String, strSQL As String, TargetCell As      range)
    Dim cn As ADODB.Connection, rs As ADODB.Recordset, f As Integer, r As Long
    If TargetCell Is Nothing Then Exit Sub
    Set cn = New ADODB.Connection
    On Error Resume Next
    cn.Open "DRIVER={Microsoft Excel Driver (*.xls)};DriverId=790;ReadOnly=True;" & _
    "DBQ=" & strSourceFile & ";"
    ' DriverId=790: Excel 97/2000
    ' DriverId=22: Excel 5/95
    ' DriverId=278: Excel 4
    ' DriverId=534: Excel 3
    On Error GoTo 0
    If cn Is Nothing Then
    MsgBox "Can't find the file!", vbExclamation, ThisWorkbook.Name
    Exit Sub
    End If

    ' open a recordset
    Set rs = New ADODB.Recordset
    On Error Resume Next
    rs.Open strSQL, cn, adOpenForwardOnly, adLockReadOnly, adCmdText
    ' rs.Open "SELECT * FROM [SheetName$]", _
    cn, adOpenForwardOnly, adLockReadOnly, adCmdText
    ' rs.Open "SELECT * FROM [SheetName$]", _
    cn, adOpenStatic, adLockOptimistic, adCmdText
    ' rs.Open "SELECT * FROM [SheetName$] WHERE [Field Name] LIKE 'A%'", _
    cn, adOpenStatic, adLockOptimistic, adCmdText
    ' rs.Open "SELECT * FROM [SheetName$] WHERE [Field Name] LIKE 'A%' ORDER BY [Field                 Name]", _
    cn, adOpenStatic, adLockOptimistic, adCmdText

    ' optional ways of retrieving a recordset
    ' Set rs = cn.Execute("[A1:Z1000]") ' first worksheet
    ' Set rs = cn.Execute("[DefinedRangeName]") ' any worksheet

    On Error GoTo 0
    If rs Is Nothing Then
    MsgBox "Can't open the file!", vbExclamation, ThisWorkbook.Name
    cn.Close
    Set cn = Nothing
    Exit Sub
    End If

    'RS2WS rs, TargetCell
    TargetCell.CopyFromRecordset rs ' optional approach for Excel 2000 or later

    If rs.State = adStateOpen Then
    rs.Close
    End If
    Set rs = Nothing
    cn.Close
    Set cn = Nothing
    End Sub 
```

现在，这段代码大部分都有效，但是当一行包含混合数据类型时，查询将跳过一些值。例如：

原始数据：

```
 3844774 12505604
    3844794 12505604
    4266113 3281271
    4295817 1307HX 
```

返回数据：

```
 3844774 12505604
    3844794 12505604
    4266113 3281271
    4295817 
```

注意最后一位数据是如何被跳过的。这适用于多个条目，但仅限于包含字母的条目（使其成为文本）。原始表格也将所有内容都设置为文本。有什么建议让它不会跳过这些行吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T20:58:38.843

那是因为您缺少 IMEX :)

请参阅此链接（**将数据视为文本部分**）

[http://connectionstrings.com/excel-2007](http://connectionstrings.com/excel-2007)

> 从那个链接引用。
> 
> 将数据视为文本
> 
> 当您想将文件中的所有数据视为文本时使用此选项，覆盖 Excels 列类型“常规”以猜测列中的数据类型。

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\myFolder\myExcel2007file.xlsx;Extended Properties="Excel 12.0 Xml;HDR=YES;IMEX=1"; 
```

> 如果要将列标题读入结果集中（即使有标题也使用 HDR=NO）并且列数据是数字，请使用 IMEX=1 以避免崩溃。
> 
> 始终使用 IMEX=1 是检索混合数据列数据的更安全方法。考虑这样一种情况：一个 Excel 文件可能工作正常，导致该文件的数据导致驱动程序猜测一种数据类型，而另一个包含其他数据的文件导致驱动程序猜测另一种数据类型。这可能会导致您的应用崩溃。

对于 XLS 文件，请参阅此链接

[http://connectionstrings.com/excel](http://connectionstrings.com/excel)

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:59:20.317

你应该使用这个。

```
OLEDB;Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\MyExcel.xls;Extended Properties="Excel 8.0;HDR=Yes;IMEX=1"; 
```

> "IMEX=1;" tells the driver to always read "intermixed" (numbers, dates, strings etc) data columns as text. Note that this option might affect excel sheet write access negative.

[For more reading please read it.](http://www.connectionstrings.com/excel)

# scala - Scala Nil 等效于 Set

> ID：10506226
> 
> 赞同：28
> 
> 时间：2012-05-08T20:46:36.157
> 
> 标签：scala, scala-collections

scala中是否有等效的`Nil`for ？`Set`

我尝试将`Nil`其用作 的值`Set`，但出现错误（预期为 的`Nil`类型`List`）

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-08T20:52:00.800

`Set.empty`是那个集合；虽然你不能直接得到它，但事实证明它只是`Set`伴生对象中的一个私有对象（很明显，称为`EmptySet`）。所做`Set.empty`的只是将该集合与强制转换返回到正确的类型。

它是通过这种方式完成的，而不是 with `Nil`，因为集合的参数是*不变*的。 `Nil`是`List[Nothing]()`，但您不能向 a 添加任何内容`Set[Nothing]()`。

如果需要指定空集的类型，可以使用 eg `Set.empty[String]`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-08T20:49:12.397

您可以使用`Set.empty`或简单地使用`Set()`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-08T20:49:12.443

我想你正在寻找`Set.empty`

# javascript - 用 JQuery 附加 html，输入值已更改

> ID：10506227
> 
> 赞同：0
> 
> 时间：2012-05-08T20:46:38.430
> 
> 标签：javascript, jquery, html

我正在加载一个带有 AJAX 调用的 html 表单。返回是一些输入的 html 代码。如果我对代码发出警报，我有这个：

```
<input type="hidden" name="data[Point][lat]" id="PointLat" value="45820545077811445" autocomplete="off" /> 
```

将 html 代码添加到页面后（使用 jQuerys 的`html()`方法），我的源代码如下所示：

```
<input id="PointLat" type="hidden" value="0" autocomplete="off" name="data[Point][lat]"> 
```

我的想法在这里用完了！谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:55:55.670

请附加您的 javascript，使您的 ajax 调用并处理返回值。如果没有这个，我能给你的唯一建议是 append() 在你传入时将 html 直接附加到 dom 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:01:54.200

我以与您尝试过的完全相同的方式进行了尝试...您提供的代码无法更改它...。

肯定存在一些代码..它改变了`PointLat`搜索某物`$("#PointLat").val(0)`或 `$("#PointLat").val('')`类似物的价值……

请发布@cole 提到的代码更新

# php - 如何显示存储在 MySQL 中的 VSD

> ID：10506233
> 
> 赞同：0
> 
> 时间：2012-05-08T20:47:00.333
> 
> 标签：php, mysql, mime

我正在尝试在网页中显示 VSD（Visio 文档）；我的问题是我将 VSD 的内容保存在 SQL 表中。

我已经在这个表中存储了一些图像，并且可以很好地显示它们中的大多数，但是由于 VSD 没有可以从 getimagesize 派生的“mime”类型，我不确定要发送回什么样的标题我的客户。

有没有人有这样做的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:56:29.797

如果您要查找的只是 MIME 类型，请查看[此页面](http://filext.com/file-extension/VSD)。您可以尝试一个 MIME 类型列表。

# php - MySQL 和 php 将不起作用

> ID：10506236
> 
> 赞同：-4
> 
> 时间：2012-05-08T20:47:16.910
> 
> 标签：php, mysql, apache

我已经尝试了很多方法来在我的 apache 服务器上实现 php 和 mysql 交互，php 似乎可以正常工作，mysql 在终端上可以正常工作，但是每次使用它与 MySQL 交互时，它都会返回一个空白页面。这是我尝试用作示例的链接之一。我每次都将它保存为 test.php 或 test.html ，但什么也没显示。我已正确输入我的用户并通过，但不会显示。 [http://www.anyexample.com/programming/php/php_mysql_example__display_table_as_html.xml](http://www.anyexample.com/programming/php/php_mysql_example__display_table_as_html.xml)

顺便说一句，apache 完美地显示了没有 db 函数的 php 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:37:34.090

我希望当您说“apache 显示 PHP 脚本”时，它实际上意味着它运行它，而不是显示代码。对于您的问题，因为 cilosis 和保罗说您需要发布您的代码和收到的错误，以便我们为您提供帮助。

首先让我们回顾一下。您是否使用正确的 SQL 用户名和密码？您是否也在连接到正确的数据库和表“它们甚至存在于您的数据库中吗？”。

还请检查您的 Xampp/wampp/lampp 或其他是否实际运行。

还要检查您的 apache 是否正在运行。

还请将带有 PHP 和 SQL 代码的文件保存为 .php 而不是 .html。

如果所有这些都在运行并且您正在连接到正确的数据库以及所有，如果您的文件保存为 .php，那么问题应该出在您的代码中。因此，您真的应该发布它。:)

# iphone - 在 safari 中打开 url 时应用程序崩溃

> ID：10506237
> 
> 赞同：1
> 
> 时间：2012-05-08T20:47:17.920
> 
> 标签：iphone, objective-c, xcode, safari, nsurl

我正在尝试使用以下代码在 safari 中打开 url：

```
- (IBAction)webButton:(id)sender {

    NSString *url = @"www.google.com";

    url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication]openURL:[NSURL URLWithString:url]];

} 
```

但是每次应用程序崩溃。

有人遇到过类似情况吗？

这是关闭崩溃：[http ://dl.dropbox.com/u/77033905/urlInSafariCrashesUp.png](http://dl.dropbox.com/u/77033905/urlInSafariCrashesUp.png)

**更新：**

```
NSString *recipients = @"mailto:first@example.com?subject=Hello from Croatia!";
    NSString *body = @"&body=It is sunny in Croatia!";

    NSString *email = [NSString stringWithFormat:@"%@%@", recipients, body];
    email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]]; 
```

这是用于打开邮件，但与 sharedApplication 相同。它崩溃了。

**更新 2：** 控制台日志：argv char ** 0xbffff520 *argv char * 0xbffff658 **argv char '/' argc int 1

**更新 3：** 它调用 IBAction 但崩溃了。当我在根视图中尝试此代码时，它可以工作。我在 IB 按钮中添加并连接，一切正常。

在子视图中调用 UIApplication sharedApplication 有问题吗？我应该用不同的方式打电话吗？

**更新 4：**

我发现问题是即使我在子视图中调用空 IBAction，所以问题显然不在 UIApplication 中，而是在子视图中调用 IBAction。

```
- (IBAction)webButton:(id)sender {

  // empty

} 
```

**更新 5：** 解决方案：[如何在子视图中调用 IBAction？](https://stackoverflow.com/questions/10515259/how-to-call-ibaction-in-subview/10516023#10516023)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:55:33.003

您没有提供有效的 URL，URL 的格式始终为`scheme:<host part>`。

```
// This is correct and will work:
[[UIApplication sharedApplication] openUrl:[NSURL URLWithString:@"http://www.google.com"]]

// Updated with body and subject:
NSMutableString* url = [NSMutableString stringWithString:@"mailto:"];
[url appendString:@"first@example.com"];
[url appendFormat:@"?subject=%@", [@"Hello from Croatia" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[url appendFormat:@"&body=%@", [@"This is a body" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:53:35.437

如果你做类似的事情它会崩溃吗

```
NSString *url = @"http://www.google.com";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

我相信你需要那里的“ **http://** ”。

# php - PHP 类中的 foreach

> ID：10506240
> 
> 赞同：-1
> 
> 时间：2012-05-08T20:47:25.470
> 
> 标签：php, oop

我是 OOP 的新手并且有一个课程，在这个课程中我正在尝试运行

```
foreach($categories as $category) { 
                public function beam_channels_setting.$category->name()
                {
                    echo "<input name='beam_plugin_options[beam_channels".$category->name"]' type='text' value='{$this->options['beam_channels.$category->name']}'/>";

                        } 
        } 
```

但是我不断收到此错误：意外的 T_FOREACH

我知道这是因为它正在寻找一个函数，但我不知道如何克服这个问题，我会把它全部放在另一个函数中吗？

## 班级

```
Class BEAM_Options {

    public $options;
    public $categorielist;

    public function __construct()
    {
        $args = array(
            'type'                     => 'post',
            'orderby'                  => 'name',
            'order'                    => 'ASC',
            'hide_empty'               => 0, //<--IMPORTANT!!
            'hierarchical'             => 1,
            'taxonomy'                 => 'category',
            'pad_counts'               => false );
        $categories = get_categories($args);
        $this->options = get_option('beam_plugin_options');
        $this->register_settings_and_fields();
    }

    public function add_menu_page()
    {
        add_options_page('Ad Management', 'Ad Management', 'administrator', __FILE__, array('BEAM_Options', 'display_options_page'));
    }

    public function display_options_page()
    {
        ?>

        <div class="wrap">
            <?php screen_icon(); ?>
            <h2> Ad Management</h2>
            <form method="post" action="options.php">
                <?php settings_fields('beam_plugin_options'); ?>
                <?php do_settings_sections(__FILE__); ?>

                <p class="submit">
                    <input name="submit" type="submit" class="button-primary" value="Save Changes" />
                </p>
            </form>
        </div>
        <?php
    }

    public function register_settings_and_fields()
    {
        register_setting('beam_plugin_options', 'beam_plugin_options');
        add_settings_section('beam_main_section', 'Settings', array($this, 'beam_main_section_cb'), __FILE__); //id, title, section, callback, page
        add_settings_field('beam_refresh_time_truth','Do you want the Advertisements to Auto-Refresh?', array($this,'beam_refresh_time_truth_setting'), __FILE__, 'beam_main_section');
        add_settings_field('beam_refresh_time','Refresh Time(seconds)', array($this,'beam_refresh_time_setting'), __FILE__, 'beam_main_section');
        $args = array(
            'type'                     => 'post',
            'orderby'                  => 'name',
            'order'                    => 'ASC',
            'hide_empty'               => 0, //<--IMPORTANT!!
            'hierarchical'             => 1,
            'taxonomy'                 => 'category',
            'pad_counts'               => false );
            $categories = get_categories($args);
          foreach($categories as $category) { 
        add_settings_field("beam_channels.$category->name","$category->name", array($this,"beam_channels_setting.$category->name"), __FILE__, 'beam_main_section');
        }
    }

          foreach($categories as $category) { 
                public function beam_channels_setting.$category->name()
                {
                    echo "<input name='beam_plugin_options[beam_channels".$category->name"]' type='text' value='{$this->options['beam_channels.$category->name']}'/>";

                        } 
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:50:06.243

如果在 a 内，则**必须**在 a内。[`foreach()`](http://php.net/manual/en/control-structures.foreach.php) **[`function`](http://php.net/manual/en/language.functions.php)`class`**

 **```
public function somefunction(){
 foreach(...){
  ...
 }
} 
```

如果您希望在每次实例化类时调用它，您可以使用[`__construct()`](http://php.net/manual/en/language.oop5.decon.php).

```
public function __construct(){
 foreach(...){
  ...
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:56:04.707

```
public function beam_channels_setting.$category->name() {..} 
```

不会工作。如果你想声明你的函数，它必须在你的循环之外。

```
public function functionName(){
     ...
} 
```

然后在你的循环中使用它：

```
foreach(...){
  $this->functionName();
} 
```

在你的课上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T20:50:23.753

是的，foreach 必须在一个函数中。如果希望在构造类时执行它，可以将它放在[__construct()](http://php.net/manual/en/language.oop5.decon.php)函数中。**

# objective-c - JSON结构表示

> ID：10506249
> 
> 赞同：0
> 
> 时间：2012-05-08T20:47:52.540
> 
> 标签：objective-c, json

我想在我的应用程序中使用 JSON，我从来没有使用过它。我有一个这样的对象：

```
@interface Selection : NSManagedObject

@property (nonatomic, retain) NSString * book_id;
@property (nonatomic, retain) NSString * contenu;
@property (nonatomic, retain) NSNumber * page_id;
@property (nonatomic, retain) NSNumber * nbrOfOccurences;
@property (nonatomic, retain) NSString * next;
@property (nonatomic, retain) NSString * previous; 
```

@结尾

我想构建`JSON`同步到我的服务器。我的对象使用的结构是什么`"Selection"`，即：如何以格式表示许多`"Selection"`对象`JSON`？谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:51:35.660

将它们放入一个 Array，然后使用 JSON 序列化程序对 Array 进行序列化。

这是我使用的一个：

[https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:33:57.333

做这个：

```
NSArray *objects = [NSArray arrayWithObjects:book_id, 
                                             contenu,
                                             page_id,
                                             nbrOfOccurences,
                                             next,
                                             previous,
                                             nil];
NSError *error = nil;
NSData *jsonData = [JSONSerializer dataWithJSONObject:objects
                                              options:0
                                                error:&error]; 
```

现在`jsonData`包含`objects`数组的 JSON 编码表示。要将它们取回，请反转过程：

```
NSArray *objects = [JSONSerializer JSONObjectWithData:jsonData
                                              options:0
                                              error:&error]; 
```

# c# - 列表 排序不起作用

> ID：10506252
> 
> 赞同：0
> 
> 时间：2012-05-08T20:48:00.727
> 
> 标签：c#, .net, string, list, sorting

我想对 List 进行排序，其中字符串数组的最后一个元素是排序键。我需要前 5 个结果。（低调）

这可行，但我不想使用 LINQ：

```
 ...
    List<string[]> gameResults = OpenResults(fileLocation);
    gameResults.Add(CurrentPlayerResult());

    var newOrderedGameResults =
    from line in currentGameResults
    orderby int.Parse(line.LastOrDefault())
    select line;
    ... 
```

但这不会：

```
 public void SaveResults(string fileLocation = @"..\..\GameResults.txt")
    {
        // string[] format:
        // [0],..,[n-1], [n]
        // names,        mistakeCount 
        List<string[]> gameResults = OpenResults(fileLocation);
        gameResults.Add(CurrentPlayerResult()); 

        QuickSort(gameResults, 0, gameResults.Count - 1);
        try
        {
            using (StreamWriter resultsFile = new StreamWriter(fileLocation))
            {
                foreach (var line in gameResults.Take(5))
                {
                    for (int i = 0; i < line.Length - 1; i++)
                    {
                        resultsFile.Write("{0} ", line[i]);
                    }
                    // dont add " " after last element
                    resultsFile.WriteLine("{0}", line[line.Length - 1]);
                }
            }
        }
        catch (IOException exception)
        {
            Console.WriteLine("The file could not be write:");
            Console.WriteLine(exception.Message);
        } 
```

在哪里：

```
 private void QuickSort(List<string[]> listToSort, int left, int right)
    {
        int pivot = left; //(left + right) / 2;
        int leftHold = left;
        int rightHold = right;

        while (left < right)
        {
            while (GetScoreFromLine(listToSort[right]) >= pivot && left < right)
            {
                right--;
            }
            if (left != right)
            {
                listToSort[left] = listToSort[right];
                left++;
            }

            while (GetScoreFromLine(listToSort[left]) <= pivot && left < right)
            {
                left++;
            }
            if (left != right)
            {
                listToSort[right] = listToSort[left];
                right--;
            }
        }
        listToSort[left] = listToSort[pivot];
        pivot = left;
        left = leftHold;
        right = rightHold;

        if (left < pivot)
        {
            QuickSort(listToSort, left, pivot - 1);
        }
        if (right > pivot)
        {
            QuickSort(listToSort, pivot + 1, right);
        }
    } 
```

和：

```
 private int GetScoreFromLine(string[] lineToParce)
    {
        int length = lineToParce.Length;
        return int.Parse(lineToParce[length - 1]);
    } 
```

不工作，正确。

**有没有办法使用 ARRAY.SORT？** 任何人都可以帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:02:18.173

你使用 List 所以你也可以使用 List.Sort 我猜。使用比较器委托，或者如果您还坚持使用比较器类。

```
List<string[]> lists = new List<string[]>
{
     new string[] { "1", "b", "5"},
     new string[] { "2", "b", "3"},
     new string[] { "3", "b", "1"},
     new string[] { "4", "b", "2"},
};
lists.Sort((a, b) => int.Parse(a[a.Length - 1]) - int.Parse(b[b.Length - 1])); 
```

我不确定为什么在展示带有列表的示例时特别要求使用 Array.Sort。无论如何，如果您需要，您可以使用 List.ToArray() 然后使用

```
var arr = lists.ToArray();
Array.Sort(arr, (a, b) => int.Parse(a[a.Length - 1]) - int.Parse(b[b.Length - 1])); 
```

这几乎是相同的，并且很好地展示了 .NET 框架在 2005 年使用 .NET 2.0 将泛型添加到 CLR 时多年来的一致发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:00:52.557

以下内容应该可以满足您的需要：

```
public void SaveResults(string fileLocation = @"..\..\GameResults.txt")
{
    // string[] format:
    // [0],..,[n-1], [n]
    // names,        mistakeCount 
    List<string[]> gameResults = OpenResults(fileLocation);
    gameResults.Add(CurrentPlayerResult()); 
    gameResults.Sort(CompareResults);
    ...
}

private int CompareResults(string[] left, string[] right)
{
    if ((left == null && right == null) || (left.Length == 0 && right.Length == 0))
        return 0;
    else if (left == null || left.Length == 0)
        return 1;
    else if (right == null || right.Length == 0)
        return -1;

    int leftVal = int.Parse(left[left.Length - 1]);
    int rightVal = int.Parse(right[right.Length - 1]);

    return leftVal.CompareTo(rightVal);
} 
```

# java - 覆盖 internalFrameClosing 方法

> ID：10506253
> 
> 赞同：0
> 
> 时间：2012-05-08T20:48:05.193
> 
> 标签：java, swing, jinternalframe

我想要做的是，当某人单击我的 jinternalframe 上的 x 按钮时，它不会摆脱它，只是将它隐藏起来。这是我的代码，但它仍然摆脱了框架。

```
characterFrame.addInternalFrameListener(new InternalFrameAdapter(){
    public void internalFrameClosing(InternalFrameEvent e) {
        characterFrame.setVisible(false);
        return;
    }
}); 
```

有任何想法吗？？我想覆盖关闭窗口时发生的事情，只让它运行我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:16:48.037

[`JInternalFrame#setDefaultCloseOperation`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JInternalFrame.html#setDefaultCloseOperation%28int%29)方法是否`HIDE_ON_CLOSE`符合您的要求？你的问题并不完全清楚

# jquery - 使用淘汰赛时没有触发jquery点击事件

> ID：10506259
> 
> 赞同：6
> 
> 时间：2012-05-08T20:48:27.810
> 
> 标签：jquery, knockout.js

根据[knockout点击绑定文档的“注3”](http://knockoutjs.com/documentation/click-binding.html)，Knockout阻止点击事件执行默认功能。要覆盖此行为，我所要做的就是从我的处理函数返回 true。所以，我有这个标记：

```
<div data-bind="visible:Pages().length == 0">
    <div class="alert alert-info">Click "Parse" button.</div>
    <button class="btn" id="btnParse" title="Parse Tabs">Parse</button>
</div> 
```

现在，我想将点击事件附加到按钮上，如下所示：

```
$(function () {       
    $('#btnParse').on('click', function () { alert('clicked'); return true;});
}); 
```

请注意，我从函数中返回 true。这个偶数处理程序永远不会触发。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-12T04:29:52.537

您的点击处理程序永远不会触发的原因是因为它从未应用于您的元素。因此，当您在 jquery 中执行此操作时：

```
$('.some-class').on('some-event', someFunction); 
```

然后，要将处理程序绑定到该事件，首先 jQuery 必须找到您的`$('.some-class')`选择器。在您的情况下，`#btnParse`当您绑定事件时，很可能尚未通过敲除呈现到页面。或者，也有可能，原始元素被渲染、销毁，然后另一个元素被渲染。在第二种情况下，事件处理程序不会保留在按钮上。一种替代方法（我不推荐）是将处理程序绑定在 DOM 中更高的位置，例如在`document`级别上，并将事件过滤到仅具有 id 的事件`#btnParse`：

```
$(document).on('click', '#btnParse', function () { console.log('hi'); }); 
```

我不推荐这样做的原因是因为它是糟糕的淘汰赛做法，您应该按照`click`其他一些帖子的建议使用绑定。此外，您正在使用 id 属性，这对于模板化动态内容通常不是一个好主意 - 除非您绝对需要唯一静态元素的 id，否则只需使用类。

至于如何正确使用 Knockout 的点击绑定，一件棘手的事情是您需要了解 Knockout 如何进行范围界定。例如，如果您在循环内绑定单击，并且您想要主视图模型中的处理程序，则必须引用父范围，因为循环会更改您的上下文：

```
<!-- ko foreach: someCollection -->
    <a data-bind="click: $parent.someFunction"></a>
<!-- /ko --> 
```

此外，如果您需要更改处理程序使用 (the `this`) 执行的 Javascript 上下文，则需要像这样绑定单击处理程序：

```
<!-- ko foreach: someCollection -->
    <a data-bind="click: $parent.someFunction.bind($parent)"></a>
<!-- /ko --> 
```

稍微玩一下这些东西，如果您仍然感到困惑，请提出一个新问题。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T23:38:19.323

我认为问题与淘汰赛对您尝试绑定事件的 DOM 的修改有关。要解决此问题，请尝试将 click 函数分配给父`<div>`元素。分配单击处理程序时，使用带有选择器的重载来指定您希望仅在单击包含的按钮时处理单击。例如，像这样更改 div：

```
<div id="btnContainer" data-bind="visible:Pages().length == 0">
    <div class="alert alert-info">Click "Parse" button.</div>
    <button class="btn" id="btnParse" title="Parse Tabs">Parse</button>
</div> 
```

然后将您的脚本更改为：

```
$(function () {       
    $('#btnContainer').on('click', '#btnParse', function () { alert('clicked');});
}); 
```

请注意，如果它`<div>`包含在另一个修改 DOM 的逻辑块中（模板、foreach 循环等），您可能需要将标签设置为不属于此类逻辑块`#btnContainer`的第一个祖先。`<button>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:48:14.187

在我的情况下，我正在使用一个 observableArray，它需要将一些 jQuery 魔法应用于该数组中的每个项目。我在自定义绑定方面遇到了一些问题，不想从该数组中的每个项目中获取两个变量。所以，在我的包装中，我将一些黑暗魔法作为一个函数添加到一个不可观察的项目中，这样当点击名称时，我正在处理的地图就会移动到那个位置。

HTML：

```
<ul data-bind="foreach: filteredItems">
    <li class="seat">
        <span class="name" data-bind="text:fullName, click: toggleEmp"></span>
    </li>
</ul> 
```

代码：

```
function viewModel() {
    var vm = this;
    vm.empData = function(data) {
        var emp = this;
        emp.office_x_loc = ko.observable(data.xLoc);
        emp.office_y_loc = ko.observable(data.yLoc);
        emp.toggleEmp = function () {
            jQuery('#skyLineMap').lhpMegaImgViewer( 'setPosition', emp.office_x_loc(),emp.office_y_loc(), 0.8, false );
    };//*/
}//*/ 
```

我希望这有帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T21:15:39.123

您为点击绑定引用的注释是指您的视图模型中的方法，而不是您的自定义点击处理程序。

换句话说，如果您`data-bind="click: doSomething"`在`<button>`元素中有 a，`doSomething()`如果您希望它执行您的自定义处理程序，则视图模型中的方法应该返回 true。

# android - BluetoothServerSocket.accept() 返回未连接的 BluetoothSocket 的问题

> ID：10506260
> 
> 赞同：3
> 
> 时间：2012-05-08T20:48:28.250
> 
> 标签：android, sockets, bluetooth, nfc, nfc-p2p

我正在制作一个 Android 应用程序（EDIT1：在 Nexsus S 的 4.0.3 上开发），它通过蓝牙共享数据 P2P，并且在使两个设备连接时遇到了令人讨厌的障碍。我们的应用程序使用 NFC 将一台设备的 MAC 地址传递给另一台设备。然后，发送者创建一个BlueToothServer 套接字实例并调用accept，而接收者使用它收到的MAC 地址创建一个BluetoothDevice 实例并尝试连接。

我们遇到的问题是从accept() 返回的BluetoothSocket。它的文档清楚地指出它应该返回一个连接的套接字，但它返回一个断开连接的套接字，甚至不能通过调用 connect() 来连接。我已经检查了套接字具有的 MAC 地址并将其清除，并且仅返回的事实 accept() 意味着已成功连接足够长的时间以制作套接字，所以我在这里不知所措，还有什么可以尝试的。

还值得一提的是，接收方的 BluetoothSocket 在此期间声称它实际上已连接。显然，它只是在等待从未来自其他设备的数据时挂起，但是在多个地方使用检查点，我们知道直到那时它总是声称已连接。

对此的任何帮助或建议将不胜感激。

其他相关信息：

发送者和接收者是同一个应用程序，但代表不同的活动。这个应用是一个游戏，加入游戏需要有游戏的人把它给别人，这是由NFC发起的（最终假设通过蓝牙发送的数据是加入所需的游戏数据）。发送者拥有游戏并处于赠送游戏的活动中，而接收者处于想要接收游戏的活动中，然后进入赠送活动以允许他们将游戏传递给其他人。现在说清楚，虽然我们现在可以合并这两个活动，但我们稍后将使用相同的技术作为实际游戏的一部分，无法确保两者都开启同样的活动，

我们还确定 UUID 正确匹配。我们有一个具有恒定 UUID 的全局类，我们只是在某个时候生成并使用它。根据您的目的，UUID 在某些情况下需要是特定的东西，但我也理解它，对于这种特殊用途，我们应该生成自己的。

BluetoothServerSocket 被创建并作为 NdefPushbackComplete 回调的一部分从中调用 accept()，因此在发送方开始设置其服务器套接字之前，另一部电话肯定有​​ Ndef 消息。

客户端或服务器蓝牙代码都没有像网上常见的那样在自己的线程上运行，这是设计使然，因为我们希望交换在任何一方可以做任何其他事情之前完全发生。

如果我忽略了任何重要的事情，我很乐意提供。最后，这是客户端和服务器端代码。它的这个版本使用了一个不安全的套接字，但是我已经尝试了两种方法，并且用于测试它的电话是配对的。

客户：

```
String s = new String(msg.getRecords()[0].getPayload());
otherBluetoothMACAddress = s;
Log.d(DEV, "WaitingToGetGame: Other BT Address... "
    + otherBluetoothMACAddress);

Toast.makeText(getApplicationContext(), s, Toast.LENGTH_LONG).show();

Log.d(DEV, "WaitingToGetGame: Getting remote device");
BluetoothDevice bluetoothDevice = bluetoothAdapter
    .getRemoteDevice(otherBluetoothMACAddress);

ObjectInputStream objectInputStream;
ObjectOutputStream objectOutputStream;

try
{
  Log.d(DEV, "WaitingToGetGame: Getting BluetoothSocket");
  bluetoothSocket = bluetoothDevice
      .createInsecureRfcommSocketToServiceRecord(SDP_UUID);

  Log.d(DEV, "WaitingToGetGame: Connecting...");
  bluetoothSocket.connect();

  Log.d(DEV,
      "WaitingToGetGame: Bluetooth "
          + ((bluetoothSocket.isConnected()) ? ("is ") : ("is NOT "))
          + "Connected.");

  Log.d(DEV, "WaitingToGetGame: Getting input stream");
  bluetoothInputStream = bluetoothSocket.getInputStream();

  Log.d(DEV,
      "WaitingToGetGame: Bluetooth "
          + ((bluetoothSocket.isConnected()) ? ("is ") : ("is NOT "))
          + "Connected.");
  Log.d(DEV, "WaitingToGetGame: Getting output stream");
  bluetoothOutputStream = bluetoothSocket.getOutputStream();

  Log.d(DEV,
      "WaitingToGetGame: Bluetooth "
          + ((bluetoothSocket.isConnected()) ? ("is ") : ("is NOT "))
          + "Connected.");
  objectInputStream = new ObjectInputStream(bluetoothInputStream);
  objectOutputStream = new ObjectOutputStream(bluetoothOutputStream);

  Log.d(DEV, this.getClass().getSimpleName() + ": Receiving game data");
  game = (Game) objectInputStream.readObject();

  Log.d(DEV, this.getClass().getSimpleName() + ": Sending acknowledgment.");
  objectOutputStream.writeObject(new Boolean(true));
  objectInputStream.close();
  objectOutputStream.close();
  bluetoothInputStream.close();
  bluetoothOutputStream.close();
  bluetoothInputStream = null; // GC
  bluetoothOutputStream = null; // GC
  bluetoothSocket.close();
  bluetoothSocket = null; 
```

服务器：

```
BluetoothServerSocket bluetoothServerSocket = null;
ObjectInputStream objectInputStream;
ObjectOutputStream objectOutputStream;

try
{

  Log.d(DEV, this.getClass().getSimpleName()
      + ": Getting BluetoothServerSocket");
  // bluetoothServerSocket = bluetoothAdapter
  // .listenUsingRfcommWithServiceRecord(user.getName(), SDP_UUID);
  bluetoothServerSocket = bluetoothAdapter
      .listenUsingInsecureRfcommWithServiceRecord(user.getName(), SDP_UUID);

  Log.d(DEV, this.getClass().getSimpleName() + ": Waiting for connection.");
  bluetoothSocket = bluetoothServerSocket.accept();
  bluetoothServerSocket.close();
  BluetoothDevice dev = bluetoothSocket.getRemoteDevice();
  Log.d(DEV, dev.getAddress());

  Log.d(DEV, this.getClass().getSimpleName() + ": Bluetooth "
      + ((bluetoothSocket.isConnected()) ? ("is ") : ("is NOT "))
      + "Connected.");
  // At this point bluetoothSocket should be ready to use.

  Log.d(DEV, this.getClass().getSimpleName() + ": Getting input stream");
  bluetoothInputStream = bluetoothSocket.getInputStream();

  Log.d(DEV, this.getClass().getSimpleName() + ": Bluetooth "
      + ((bluetoothSocket.isConnected()) ? ("is ") : ("is NOT "))
      + "Connected.");

  Log.d(DEV, this.getClass().getSimpleName() + ": Getting output stream");
  bluetoothOutputStream = bluetoothSocket.getOutputStream();

  // Log.d(DEV, this.getClass().getSimpleName()
  // + ": Attempting direct connect()");
  // bluetoothSocket.connect();

  objectInputStream = new ObjectInputStream(bluetoothInputStream);
  objectOutputStream = new ObjectOutputStream(bluetoothOutputStream);

  Log.d(DEV, this.getClass().getSimpleName() + ": Sending game data.");
  objectOutputStream.writeObject(game);

  Log.d(DEV, this.getClass().getSimpleName() + ": Waiting for response.");
  Boolean response = (Boolean) objectInputStream.readObject();

  objectInputStream.close();
  objectOutputStream.close();
  bluetoothInputStream.close();
  bluetoothOutputStream.close();
  bluetoothInputStream = null; // GC
  bluetoothOutputStream = null; // GC
  bluetoothSocket.close();
  bluetoothSocket = null;
}// try
catch( IOException e )
{
  Log.d(
      DEV,
      this.getClass().getSimpleName() + ": "
          + java.util.Arrays.toString(e.getStackTrace()));
  e.printStackTrace();
  return;
}
catch( ClassNotFoundException e )
{
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:30:01.023

到目前为止，我无法在您的程序中找到错误，但是：

*显然，它只是在等待从未来自其他设备的数据时挂起，但是在多个地方使用检查点我们知道，直到那时它总是声称已连接。*

实际上，这意味着 2 个设备已连接，只是您的 BT 客户端应用程序没有连接套接字 -> 它连接到其他地方。

你可以尝试几件事：

*   你必须用 try/catch 包围你的阻塞调用，否则你不能确定你的代码按预期工作。所以环绕*bluetoothSocket.connect();* 在您的客户端代码中，并且*bluetoothSocket = bluetoothServerSocket.accept();* 在服务器代码中。**客户端代码应在 bt 客户端连接错误时捕获 IOException**。我认为这是我发现确定客户端连接是否成功的最佳方法！Ofc .isConnected() 之后可以这样做，就像在您的代码中一样。

*   在 ASyncTask 中运行您的蓝牙代码，如果不是（甚至更好）服务。我知道你宁愿不这样做，但它可能会为你省去很多痛苦。我的 BT 代码从 ASyncTasks 完美运行 - 具有自定义 UUID，在 2 个 Android 之间，在 1 个 Android 和 1 个 BT-USB 加密狗之间，1 个 Android - 1 个嵌入式设备等。

*   把UUID改成SDP，看看能不能用！

但是有一个问题，**您是否尝试过从服务器端传输某些内容？**它应该工作..让我知道这是否有效！

# java - java正则表达式IP地址模式匹配

> ID：10506262
> 
> 赞同：2
> 
> 时间：2012-05-08T20:48:38.180
> 
> 标签：java, jsp

为了区分内部用户和外部用户，我在 scriplet 标记中使用了 java 正则表达式，代码如下：

```
String ipAddress  = request.getHeader("iv-remote-address");

String internalIPs = 
"166.41.8.X" + "|" +"12.16.X.X" + "|" +"12.22.X.X" + "|" +"132.23.X.X" + "|";

Pattern p = Pattern.compile("^(?:"+internalIPs.replaceAll("X", "(?:\\d{1,2}|1\\d{2}|2[0-4]\\d|25[0-5])")+")$");

Matcher m = p.matcher(ipAddress);

if (m.matches())
{
    //print internal IP     
} else{
    //print external IP 
} 
```

如果输入为 166.41.8.2，则 IP 地址被正确识别为内部 IP 如果输入为 12.16.2.1 或 12.22.12.3，则 IP 地址未被正确识别为内部 IP。我想这与匹配模式与 2 个“X”有关。任何人都可以识别模式匹配的问题吗？或者可以推荐一种匹配 IP 地址模式的最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:58:55.880

2 处更正：

1.  句号`.`应该被转义，否则它意味着任何字符
2.  `\\d`在您的`replaceAll`通话中需要双重转义，因为这最终成为您的最终正则表达式。

这是工作代码：

```
String ipAddress  = "12.16.2.1";
String internalIPs = 
"166\\.41\\.8\\.X" + "|" +"12\\.16\\.X\\.X" + "|" +
"12\\.22\\.X\\.X" + "|" +"132\\.23\\.X\\.X" + "|";

Pattern p = Pattern.compile("^(?:"+internalIPs.replaceAll("X",
                            "(?:\\\\d{1,2}|1\\\\d{2}|2[0-4]\\\\d|25[0-5])")+")$");

//System.out.println(p.pattern());

Matcher m = p.matcher(ipAddress);
if (m.matches())
    System.out.println("print internal IP"); // gets printed  
else
    System.out.println("print external IP"); 
```

### 备选方案：

由于您在`internalIPs.replaceAll`调用中并没有真正使用任何正则表达式，因此最好使用`String#replace`方法（不支持正则表达式），这样就不需要双重转义。所以只需像这样使用：

```
Pattern p = Pattern.compile("^(?:" + internalIPs.replace("X",
                            "(?:\\d{1,2}|1\\d{2}|2[0-4]\\d|25[0-5])")+")$"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:56:32.370

我不知道这是否是原因，但请尝试将`.`您的内部 IP 声明中的`\.`

`.`in regexp 用于匹配所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:03:01.173

我建议不要使用正则表达式执行过于复杂的 IP 体操。

"([0-9]{1,3}.){3}[0-9]{1,3})" 进行一般检查是可以的，那么我会做一个

```
"166.41.8.123".split ("\\.") 
```

其次是 Integer.parseInt 和范围检查或值比较。

# sql - 正则表达式作为 SQL 模式的一部分

> ID：10506265
> 
> 赞同：3
> 
> 时间：2012-05-08T20:48:42.843
> 
> 标签：sql, regex, database, schema

假设我有一个关系数据库，除其他外，我想在其中存储员工姓名及其标识字符串。标识字符串的格式是严格定义的：它是三个大写字母字符，后跟一个破折号，后跟一个四位数字。

问题：任何关系数据库是否允许定义特定文本字段必须符合的正则表达式？就像在我的示例中一样，最好让数据库根据简单的正则表达式检查员工 ID 的所有值，而不是在 UI 级别进行。

另一个问题：如果我遇到这样的问题（即需要根据一组额外的约束来验证字段值），这是否意味着我的模式已非规范化并且我应该修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:52:26.210

是的，您可以使用检查约束来执行此操作。

*   [PostgreSQL 检查约束支持正则表达式](http://joseph.randomnetworks.com/2004/05/24/postgresql-check-constraint-supports-regular-expressions/)

显然，对此的支持因供应商而异。有些数据库对正则表达式的支持有限或不支持，有些不支持检查约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:59:21.203

您可以通过字段上的约束进行检查。这取决于您使用的数据库。在 SQL Server 中，您可能必须使用如下语法：

```
check (len(EmpId) = 7 and left(EmpId, 3) between 'AAA' and 'ZZZ' and
       substring(EmpId, 4) = '-' and isnumeric(right(EmpId, 4)) = 1 
```

首先，检查约束进入表创建，前面是“CONSTRAINT 语句。

其次，正则表达式将是一种更简洁的方法。但是，并非所有数据库都支持它们。

第三，上述内容并不完美。例如，它允许前三个字符使用“B1B”。更复杂的逻辑可以解决这个问题。

最后，为了保证大写，您可能需要将排序规则设置为区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:21:48.413

关于你的第二个问题，这取决于。（当然视情况而定。它总是视情况而定。）如果您总是将员工标识字符串用作单个“整体”值，那么它就是标准化的。如果你发现你不断地将它们分解成“第一和第二”部分（3 个字符，4 个数字），那么你就是在打破第一个范式。（粗略地说，您在一列中有两个事实，应该将它们分成各自的列。）

假设适当的规范化，在我看来，您必须依靠数据库来确保数据格式正确这一事实引发了对数据源完整性的质疑。为什么数据在传递到数据库*之前*没有经过检查、清理和正确格式化？RDBMS 非常擅长存储、排序和检索数据，但它们在处理复杂算法方面并不那么热门。这不是他们的目的。您可以在数据库中执行此操作，是的，但有更好的方法可以执行此操作。

# entity-framework - 结构可以映射到 CTP Code First 中的表吗？

> ID：10506275
> 
> 赞同：1
> 
> 时间：2012-05-08T20:49:16.167
> 
> 标签：entity-framework

有没有办法将 struct 映射到 Code First 中的表。我到处看了看，似乎每个人都在谈论 POCO 课程。我找不到任何关于结构的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:48:21.177

不，不支持结构。

# asp.net - 从外部脚本调用 ASP.NET 页面方法

> ID：10506276
> 
> 赞同：2
> 
> 时间：2012-05-08T20:49:19.037
> 
> 标签：asp.net, vb.net, httpwebrequest, webmethod

### 背景

我有一个 ASP.NET 站点，在我们公司的 Intranet 服务器内部托管。该站点使用客户端的默认网络凭据进行身份验证。该站点的主页`Default.aspx`包含以下 Web 方法，可将一些数据从 Oracle 服务器同步到 MS SQL 服务器：

```
<WebMethod()> _
Public Shared Sub syncOracle()        
    OracleSync.MainSync()
End Sub 
```

当我从网站本身（例如从页面上的按钮或其他东西）访问该网络方法时，它可以正常工作并按预期执行。

### 问题

我想在服务器上设置一个定期调用此方法的计划任务。到目前为止，我的方法是在 VB 中编写一个简单的控制台脚本，该脚本将通过以下方式访问 Web 方法`HTTPWebRequest`：

```
Sub Main()
    Dim myReq As HttpWebRequest = _
       WebRequest.Create("http://vm-prod1/dev/default.aspx/syncOracle")
    myReq.Credentials = CredentialCache.DefaultNetworkCredentials
    myReq.Method = "POST"
    myReq.ContentLength = 0

    Dim response As HttpWebResponse = CType(myReq.GetResponse(), HttpWebResponse)

    Console.WriteLine(response.StatusCode)

    Console.ReadKey()
End Sub 
```

这将返回 200 的“OK”状态，但是当我解析实际响应时，我没有得到从页面访问方法时得到的响应（相反，我得到了整个 aspx 页面的代码）。并且同步没有触发。

### 问题

是否有人对更好/不同的方法（可能不使用 HttpWebRequests）或对我当前可能效果更好的方法的修改有任何见解？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:26:30.867

到目前为止，您可以做的最简单的事情是删除页面方法并切换到使用简单的通用处理程序。

使用通用处理程序，您没有所有标准的 Web 表单页面生命周期，而是为您提供了一种非常灵活和简单的方式来运行您所描述的处理。

因此，我将在项目中添加一个通用处理程序 (.ashx) 文件。将代码放入您需要运行的代码中。然后只需从控制台脚本执行页面。

# c# - 读取 IDbConnection.Command 数据的最快方法

> ID：10506283
> 
> 赞同：0
> 
> 时间：2012-05-08T20:50:10.680
> 
> 标签：c#, ado.net, dataset

现在我正在使用

```
OleDbDataAdapter objDataReader = new OleDbDataAdapter();
objDataReader.SelectCommand = myCommand;
objDataReader.Fill(myDataTable); 
```

但我觉得 DataTable 对象是一个庞大的对象，我想知道是否有一种方法可以让我自己的对象发送到数据读取器，或者使用更轻的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:00:04.810

> 但我觉得 DataTable 对象是一个庞大的对象，我想知道是否有一种方法可以让我自己的对象发送到数据读取器，或者使用更轻的对象？

您调用**DataTable**的[Load](http://msdn.microsoft.com/en-us/library/system.data.datatable.load.aspx)方法以使用`IDataReader`. 你说反了，这不是真的。

就 DataReader 而言，这实际上非常快。如果您不喜欢使用 DataTable，您可以查看其他替代方案，例如 Entity Framework，或者通过迭代 DataReder 来简单地补充您自己的自定义业务对象，如下所示：

```
while (reader.Read())
{
   //Hydrate your objects here
} 
```

# iphone - 辞去 UIScrollView 作为第一响应者

> ID：10506284
> 
> 赞同：0
> 
> 时间：2012-05-08T20:50:14.700
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我向我的 UIScrollView 添加了一个自定义视图 我怎样才能让我的 UIScrollView 响应滚动事件 另外，我的 customView 中有一些按钮应该响应“内部修饰”

```
entry526 = [[_526 alloc] initWithNibName:@"0526" bundle:nil];
        entry526.view.frame = entry526.view.bounds;
        [self.scrollView addSubview:entry526.view];
        self.scrollView.contentSize = entry526.view.frame.size;
        entry526 = nil; 
```

UPD：我已经设法让我的 ScrollView 滚动，但按钮仍然没有响应。这是它们的呈现方式：

```
UIScrollView
  -UIView
    -UIButton 
```

![在此处输入图像描述](../Images/e2ab8c87913ff7443ad8492f9b065eb4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:05:55.787

要使滚动视图响应滚动事件，您需要将 contentSize 属性设置为大于 UIScrollView 的框架的值。

为了使您的按钮响应内部修饰，请像往常一样进行操作。将它们链接到 Interface Builder 中的 IBAction 或在代码中调用按钮上的 addTarget。

在 SO 和网络上有这两个问题的一百万个例子。

# java - 使用 NIO 将 Tomcat 服务器作为 Windows 服务运行

> ID：10506287
> 
> 赞同：0
> 
> 时间：2012-05-08T20:50:20.900
> 
> 标签：java, tomcat

背景：我们继承了一个使用 Tomcat Server NIO 连接器（带有 SSL）进行开发的 Java 项目。项目安装程序在部署产品时将 Tomcat 安装为 Windows 服务。没有尝试在 server.xml 文件中配置 APR 连接器（使用 SSL）而不是 NIO 连接器，因为看起来 Tomcat 在开发和生产日志中都按预期执行。

这种做法危险吗？使用两个 server.xml 文件，一个用于开发（NIO），一个用于生产（APR）不是更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:58:05.630

在您的情况下，APR 和 NIO 连接器之间的主要区别在于您使用的是 SSL。APR 的 SSL 配置使用 OpenSSL，而 NIO 连接器使用 Java 自己的 JSSE。

在负载非常高的环境中，您可能会看到使用 APR+OpenSSL 来提高应用程序的 HTTPS 保护部分的速度，但是 NIO 在大量并发连接时表现得非常好。

与您的应用程序使用的 CPU 周期相比，SSL 解码/解密通常只是工作的一小部分，这也是事实。

如果它表现良好，那很好。在生产中使用 NIO+SSL 当然没有危险。

# nunit - SpecFlow.NUnit 通过 Nuget：缺少对 nunit.core 的引用

> ID：10506293
> 
> 赞同：18
> 
> 时间：2012-05-08T20:50:29.527
> 
> 标签：nunit, nuget, specflow

我刚刚通过 nuget 安装了“specflow.nunit”包，但是包含规范的项目需要编译，因为`SpecFlowNUnitExtension`添加到项目中的类缺少对 nunit.core 的引用（更具体地说是“NUnit.Core”和找不到“NUnit.Core.Extensibility”命名空间）。其他人有同样的问题吗？你有办法解决吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-11T14:31:37.283

我通过安装 NUnitTestAdapter Nuget 包来修复它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T21:11:07.097

Okei，看来我已经找到解决它了；所需的 dll 可以从[http://www.nunit.org/index.php?p=download](http://www.nunit.org/index.php?p=download)下载。下载“bin”版本，解压缩 zip 存档，在“lib”文件夹内有 SpecFlowNUnitExtension 所需的 2 个程序集： - nunit.core.dll - nunit.core.interfaces.dll

添加对这两个 dll 和项​​目编译的引用。

（虽然有点尴尬；这些程序集不应该与 specflow.nunit 包捆绑在一起吗？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-22T17:21:09.677

我们的修复是从我们的项目中删除 SpecFlowNUnitExtension.cs，该项目是在安装 SpecFlow.NUnit NuGet 包期间添加的。根据文件顶部的注释，仅当您使用我们未使用的 nunit.console 运行器之一时才需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T15:21:21.883

我不确定这仍然是一个问题，但我今天遇到了同样的问题。我可能做错了什么...... :)

经过大量搜索、安装和重新安装，我找到了这篇文章： [https ://answers.launchpad.net/nunitv2/+question/192677](https://answers.launchpad.net/nunitv2/+question/192677)

我安装了已弃用的 NUnit.Runners 包，它最终使参考错误消失了。这看起来真的很笨拙，所以再一次，我一定遗漏了一些东西，但我认为在此记录会有所帮助，以防其他人遇到此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-29T14:41:51.483

安装 NUnitV2.Core Nuget 包解决了缺少的参考错误。

# sql-server - SQL INSERT：在插入之前增加一个 int 值

> ID：10506296
> 
> 赞同：0
> 
> 时间：2012-05-08T20:50:50.540
> 
> 标签：sql-server, insert

我有一个变量，

```
DECLARE @CN int = (SELECT [CONTROL_NUMBER] FROM myTable) 
```

我需要执行一个插入语句，其中该变量的值在运行时递增。

所以，

```
INSERT INTO myTable2 (ControlNumber)
SELECT CNC+(@CN increment the value here) FROM aTable 
```

所以插入的值会像，

```
aa1234
ab1235
cd1236... 
```

等等

绝对`@CN`是一个 int，所以我会在插入值之前将其更改为字符串。

感谢帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:58:05.233

```
SET @CN = @CN + 1
INSERT INTO myTable2 (ControlNumber) 
SELECT CNC + Cast(@CN as varchar) FROM aTable 
```

# hibernate - hibernate PersistentenSet 未包含在类型集中

> ID：10506303
> 
> 赞同：1
> 
> 时间：2012-05-08T20:51:21.243
> 
> 标签：hibernate, gwt

我有3个类，推荐，判断，用户，关系是：一个推荐可能有多个判断，一个用户可能有多个判断（根据不同的推荐），这是我的JPA类：

班级推荐

```
@Entity
@Table(name = "RECOMMENDATIONS")
public class Recommendation implements Serializable, Cloneable {
...

@OneToMany(cascade = {CascadeType.REFRESH, CascadeType.DETACH }, fetch = FetchType.EAGER, mappedBy="recommendation", targetEntity=Judgement.class)
private Set<Judgement> judgements;

    ...
    public Recommendation() {
        super();
        this.judgements = new LinkedHashSet<Judgement>();
    }
   ...
} 
```

班级用户：

```
@Table(name = "USERS", uniqueConstraints = @UniqueConstraint(columnNames = "email"))
public class User implements Serializable, Cloneable {
...
    @OneToMany(mappedBy="judge", targetEntity=Judgement.class, cascade = { CascadeType.REFRESH, CascadeType.DETACH }, fetch = FetchType.EAGER)
    private Set<Judgement> judgements;
...
    public User() {
        super();
        this.judgements = new LinkedHashSet<Judgement>();
    }

...
} 
```

班级判断：

```
@Entity
@Table(name = "JUDGEMENTS")
public class Judgement implements Serializable, Cloneable {
    @ManyToOne(cascade = { CascadeType.REFRESH, CascadeType.DETACH})
    @JoinColumn(name = "id")
    private Recommendation recommendation;

    @ManyToOne(cascade = { CascadeType.REFRESH, CascadeType.DETACH})
    @JoinColumn(name = "user_id")
    private User judge;
...
    public Judgement() {
        super();
    }
...
} 
```

在 db 中，我有以下表格：用户推荐；判断；

我在用户中有一些数据，在推荐中有一些数据，但在判断表中为空，当我加载我的应用程序时出现以下异常：

```
com.google.gwt.user.client.rpc.SerializationException: Type 'org.hibernate.collection.PersistentSet' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = [] 
```

我调试了加载推荐记录的判断字段时出现的代码，它无法实例化它。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:48:01.127

包含由 hibernate 加载的数据库实体的对象是不可序列化的。因此，它们不能用作 gwt 远程过程调用的传输对象。

最简单的解决方案是将实体实例（在您的情况下为推荐、判断和用户的实例）中的所有内容复制到简单的数据持有者对象中，并将持有者对象用作远程过程调用中的参数。对于小型项目，这是一个很好的解决方案。对于更大的项目，您可以考虑使用 Gilead 库；在这种情况下，您甚至可以从延迟加载中获益。

Google 提供了将 hibernate 集成到 GWT[的良好文档。](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)

# asp.net - 在 ASP.NET 网站中使用 LoadLibrary 加载非托管 DLL

> ID：10506304
> 
> 赞同：2
> 
> 时间：2012-05-08T20:51:25.987
> 
> 标签：asp.net, f#, loadlibrary

我正在开发一个在 Visual Studio 2010 中开发的 ASP.NET 网站。该网站的大部分内容都是用托管代码（F# 和 C#）编写的，但它的某些功能使用非托管 DLL (QuickPDF)。该站点在本地运行良好，但在部署到托管服务提供商 (aspnethosting.co.uk) 时，LoadLibrary 调用失败，返回 IntPtr.Zero 句柄。

根据托管服务提供商的控制台，该站点以完全（内部）信任级别运行。

DLL 位于网站的 bin 目录中，托管服务提供商告诉我它具有适当的权限。

我已经尝试使用 .\ 完全不使用 DLL 的特定路径，还尝试使用 Assembly.GetExecutingAssembly().CodeBase 确定当前程序集路径是什么（参见下面的 F# 代码）——在本地运行时效果很好。

我还能做些什么来帮助解决这个问题？

这是计算出 DLL 路径的 F# 代码：

```
let assemblyDirectory =
    let codeBase = Assembly.GetExecutingAssembly().CodeBase;
    let uri = new UriBuilder(codeBase)
    let path = Uri.UnescapeDataString(uri.Path)
    Path.GetDirectoryName(path) 
```

这是 F# 代码使用该路径的地方（已检查它指向 DLL）

```
let dllPath = Path.Combine(assemblyDirectory, "QuickPDFDLL0814.dll")
if not (File.Exists(dllPath)) then
    failwith ("Could not find QuickPDF DLL at: " + dllPath)
let lib = QuickPDFDLL0814.PDFLibrary(dllPath) 
```

这是尝试加载 QuickPDF dll 的 C# 代码 - 这是它失败的地方 - 即。dllHandle 等于 IntPtr.Zero。

```
 public PDFLibrary(string dllFileName)
    {
        dll = new DLL(dllFileName);
        if (dll.dllHandle != IntPtr.Zero)
        {
            instanceID = dll.QuickPDFCreateLibrary();
            dll.RegisterForShutdown(instanceID);
        }
        else
        {
            dll = null;
        }
    }
...
    public DLL(string dllFileName)
    {
        dllHandle = LoadLibrary(dllFileName);
        if (dllHandle == IntPtr.Zero)
            throw new InvalidOperationException("Could not load library " + dllFileName);
        else
        { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:23:49.160

我破解了它。QuickPDF 提供 32 位和 64 位版本的 DLL。我需要使用 64 位版本。[红脸] 感谢那些提供答案的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T22:31:18.073

可以加载 dll 时，LoadLibrary 失败。

当 DLL 不存在（未找到）或 DLL 存在（并找到）但无法加载此 DLL 的某些依赖项时，可能会发生这种情况。我建议你： 1\. 比较两种情况的 PATH 环境变量。试试 GetEnvironmentVariable 函数。2\. 找出 QuickPDF.dll 使用了哪些组件，并验证它们是否出现在 aspnethosting.co.uk

# visual-studio-2010 - SQL Management Studio 2012 更改 Visual Studio 2010 样式

> ID：10506306
> 
> 赞同：0
> 
> 时间：2012-05-08T20:51:30.853
> 
> 标签：visual-studio-2010, styles, sql-server-2012

其他人遇到这个问题或知道如何解决它？我的计算机上安装了 Visual Studio 2010 和 Sql Management Studio 2012。每次打开管理工作室时，我的 VS 样式都会更改，因此我必须重新导入它们。我尝试将相同的样式导入到 Management Studio 中，但它似乎仍然将一些样式更改回默认值（我猜）。有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:15:47.453

这个问题我已经有一段时间了。这不仅仅是因为 SSMS，似乎某些插件/扩展会争夺样式。当它发生时，实际上有一个比重新导入样式更简单的解决方案。

转到：工具 - 选项 - 字体和颜色，然后单击“确定”。就是这样。您无需更改任何内容，只需在选项的字体和颜色部分点击确定即可。

我偶然发现了它，但后来在论坛上证实其他人正在使用相同的技巧。到目前为止，它每次都对我有用。希望这可以帮助。

# msbuild - 从命令行转换 web.config 文件

> ID：10506308
> 
> 赞同：38
> 
> 时间：2012-05-08T20:51:36.843
> 
> 标签：msbuild

我有两个构建环境可以定位；发布和分期。Web.config 如下所示：

```
<system.web>     
    <authentication mode="Windows">
    </authentication>

    <authorization>
        <deny users="?" />
    </authorization>
</system.web> 
```

我想通过构建到暂存配置来转换它：Web.Staging.config

```
<system.web>     
    <authentication mode="Windows">
    </authentication>

    <authorization xdt:Transform="Replace">
        <deny users="?" />
        <allow roles="StagingRoles" />
        <deny users="*" />
    </authorization>
</system.web> 
```

我像这样从命令行构建：

```
msbuild buildscript.build /p:Configuration=Staging 
```

构建后，我看不到构建工件文件夹中转换的 web.config 文件。这里有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-08T21:03:13.150

如果您将以下 xml 添加到 Web 应用程序的 .csproj 文件的底部，您将确保配置转换发生在每次构建之前：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" />
<Target Name="BeforeBuild">
    <TransformXml Source="Web.Base.config" Transform="Web.$(Configuration).config" Destination="Web.config" />
</Target> 
```

**编辑：**响应您的评论，您应该能够使用 Web.config 作为 TransformXml 任务中的源参数（参见步骤 #2）。如果您只想在构建脚本中执行配置转换，请按照以下说明操作：

1) 在构建脚本中导入 WebApplication.targets，如下所示：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

2) 在构建脚本目标中执行 TransformXml 构建任务：

```
<Target Name="MyBuildScriptTarget">
    <TransformXml Source="Web.config" Transform="Web.$(Configuration).config" Destination="Web.config" />
    ...other build tasks...
</Target> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-06-23T01:19:27.733

乔纳森的回答很好。我稍微调整了一下以允许保留原始的 Web.config 文件。这些是我添加到 .csproj 文件底部的行：

```
 <!-- the step to copy the config file first avoids a 'File is being used by another process' error -->
  <Target Name="BeforeBuild">
    <Copy SourceFiles="Web.config" DestinationFiles="Web.temp.config" OverwriteReadOnlyFiles="True" />
    <TransformXml Source="Web.temp.config" Transform="Web.$(Configuration).config" Destination="Web.config" />
  </Target>
  <Target Name="AfterBuild">
    <Copy SourceFiles="Web.temp.config" DestinationFiles="Web.config" OverwriteReadOnlyFiles="True" />
    <Delete Files="Web.temp.config" />
  </Target> 
```

我可以看到 web.config 文件是通过在 Visual Studio（或从命令行）中运行构建来转换的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-12-02T21:10:54.787

对乔纳森的回答的微小改进：

使用下面的这一行来导入 Web 目标将允许与任何 Visual Studio 版本兼容。请注意，这与 v10.0 版本无关

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\WebApplications\Microsoft.WebApplication.targets" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-18T05:05:59.597

使用 Jenkins 构建转换，我还看到 web.config 没有转换，但是，实际转换发生在您进行部署时。我使用一个多合一的 msbuild 命令来一起进行构建和部署。

`MSBuild MyProj.csproj /P:Configuration=Release /P:DeployOnBuild=True /P:DeployTarget=MsDeployPublish /P:MsDeployServiceUrl=https://your server/msdeploy.axd /P:AllowUntrustedCertificate=True /P:MSDeployPublishMethod=WMSvc /P:CreatePackageOnPublish=True /P:UserName=username /P:Password=password1 /P:DeployIISAppPath="Default Web Site or name of your website"`

运行后，您可以在服务器上验证是否发生了转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-13T23:29:10.043

如果您想继续使用命令行，请将其添加到命令中：

```
/p:UseWPP_CopyWebApplication=true /p:PipelineDependsOnBuild=false 
```

[来源](https://stackoverflow.com/a/53178334/2526059)

# c# - WPF 编码 UI 测试：可靠地定位桌面图标

> ID：10506313
> 
> 赞同：0
> 
> 时间：2012-05-08T20:52:01.827
> 
> 标签：c#, wpf, unit-testing, coded-ui-tests

任何人都知道使用编码的 UI 测试 API 可靠地定位桌面图标的正确方法吗？通过单击特定桌面图标的录制操作创建的自动生成代码在录制当天就可以使用。第二天打开笔记本电脑时，录制操作不再起作用，因为找不到图标。

我正在尝试手工制作，所以我尝试了：

```
public void LaunchOi()
{
   var desktop = ApplicationUnderTest.Desktop.GetChildren().First(c => c.Name == "Desktop");

   var folderView = new WinWindow(desktop);

   // I copied these numbers from autogenerated code.  
   // Yesterday, PropertyNames.Instance = 7, today = 9\.  Why so?
   folderView.SearchProperties[WinWindow.PropertyNames.ControlId] = "1";
   folderView.SearchProperties[WinWindow.PropertyNames.Instance] = "9";
   folderView.Find();

   var winList = new WinListItem(folderView);
   winList.SearchProperties[WinListItem.PropertyNames.Name] = "OCC600 OI";          
   winList.Find();

   Mouse.DoubleClick(winList, MouseButtons.Left);
} 
```

正如我的评论中所指出的，`WinWindow.PropertyNames.Instance`不会保持不变。昨天录的时候`WinWindow.PropertyNames.Instance`是7点，今天是9点。有人知道为什么吗？我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:26:49.600

正如 Schaliasos 在评论中提到的，您应该从删除实例属性开始。实例属性非常不可靠，尤其是在与桌面一样频繁更改的情况下。

关于实例属性的更多解释......当缺少有效的搜索属性时，通常会在录制中使用实例属性。因此，作为录制的最后努力，录制器会说我有 20 个具有相同搜索属性的控件，并且应该使用的控件是编号 7。然后第二天当您运行您可能添加或添加的应用程序时删除了几个桌面图标，并说你现在有 22 个图标。现在框架仍在寻找控件的实例 7，但昨天的 7 是今天的 9。

如果有任何其他可用的搜索属性，您应该找到并使用它们而不是实例。如果这不可能，请寻找其他方法来实现相同的目标，也许可以尝试直接在 C# 中打开文件，而不是使用 UI。

# perl - Debian 上的 Perl：在系统上安装 perl 冲突

> ID：10506314
> 
> 赞同：5
> 
> 时间：2012-05-08T20:52:12.193
> 
> 标签：perl, debian, cpan, apt

我将 Debian 开发系统（作为测试）上的所有 perl 模块更新为最新版本。我想看看升级实时服务器上的模块是否安全。它似乎有效，除了我开始从 Imager 收到一个奇怪的错误（与 API 版本号有关，但现在这并不重要）。

我尝试重新安装 Imager 和任何相关的库，但似乎没有解决问题。

进一步看，我发现有问题的开发系统似乎有多个 perl 目录，包括：

```
/usr/lib/perl (which contains 5.14.2 and subdirs)
/usr/lib/perl5 (which contains a range of perl modules)
/usr/local/lib/perl (which contains another 5.14.2 and a set of modules)
and even /root/perl5 (which contains a small list of modules including i486-linux-gnu-thread-multi-64int) 
```

看起来（尽管我不完全确定我是否正确阅读了此内容），系统上的模块已使用每种可能的方法安装，apt-get、aptitude、cpan、从源代码安装和 cpanminus，并且不同的模块是最终进入不同的 perl 目录（我猜是安装），主要是 /usr/local/lib/perl 或 /usr/lib/perl5。我不知道那里至少有 2 个不同的 perl 安装。

我*认为*/usr/lib/perl 是我想保留的，所以，我尝试将 /usr/local/lib/perl 重命名为 perl.save 然后链接 /usr/local/lib/perl /usr/lib/perl . 然后我重新安装了所有丢失的软件包。
大多数软件包似乎都安装了，但是我收到了这个不祥的消息；

* * *

有 /usr/local/lib/perl/5.14.2

想要 /usr/lib/perl/5.14

您的 perl 和您的 Config.pm 似乎对它们运行的​​架构有不同的想法。

Perl 认为：[5.14.2]

配置说：[i486-linux-gnu-thread-multi-64int]

这可能会也可能不会导致问题。如果您在构建此扩展时遇到问题，请检查您的 perl 安装。

* * *

之后，该特定模块的安装失败。可能有充分的理由。

我想解决这个问题的原因是我们的开发系统都是虚拟的，而所有其他开发系统都是这个（损坏的）系统的克隆 - 所以这是一个我需要解决的问题，而不需要从头开始重建整个系统（虽然他是一个选项）。

我确实尝试克隆系统，然后清除 perl，但是这让我的系统非常破碎，无法做任何事情。

有关解决此问题的有用方法的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:00:07.843

有许多使用“local::lib”模块的“perl virtualenv”项目。这使您可以在本地目录中为您的特定应用程序安装东西。如果使用得当，这些将覆盖系统中的任何内容。

这个[https://github.com/stoned/pll](https://github.com/stoned/pll)使用 cpanm 以便您可以安装到您的虚拟环境中。

这可能不是您想要的，但需要考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:40:32.417

根据我上面的评论，cpanm 以 root 身份安装并配置为将模块放入 /root/perl5。这让我意识到我被一个男生错误抓住了——当我 sudo -s 到 root 时，root 所拥有的环境与我以 root 或 su - root 身份登录时的环境不同。因此，已经在各种宫殿中安装了一些东西，其中一些隐藏在另一个环境中（例如，不包括在@INC 中）。由于 ikegami 指出的问题，系统也没有找到所有的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T13:12:35.873

以防万一有人对此仍有疑问，我正在本地安装 5.18（对我来说是第一次），我将 2 个库添加到 PERL5LIB。在安装 Moose 后，我在安装 Moose 时遇到问题，没有问题。

# ruby - 在单个嵌入式文档中更新 MongoDB 中的单个字段

> ID：10506316
> 
> 赞同：3
> 
> 时间：2012-05-08T20:52:34.533
> 
> 标签：ruby, mongodb

我们有一些看起来像这样的嵌入式文档：

```
 {
"_id" : ObjectId("4e402353bc9f6ec5a6000001"),
"first_name" : "Chris",
"last_name" : "Jones",

    "alerts" : [
    {
        "_id" : ObjectId("4f7cd6ffc067db00070022d4"),
        "name" : "Default",
        "email_frequency" : "weekly",
        "interested_industries" : [
            "Computer Software",
            "Internet"
        ],
        "interested_employers" : [
            "Facebook",
            "AOL"
        ],
        "interested_skills" : [ ],
        "matches" : [
            ObjectId("4ee46a2a0dd0c70017000365"),
            ObjectId("4efa1707bacfa40001012b65"),
            ObjectId("4e402376bc9f6ec5a6000a7a"),
            ObjectId("4e4e0eb8d052fc4028021f66"),
            ObjectId("4ee55d8500ca410014000003"),
            ObjectId("4ee63d06d96b850001008688"),
            ObjectId("4e57be7ed052fc606a002335"),
            ObjectId("4f05d47d9ce340001702ba42"),
            ObjectId("4f200ffcaf5f34000e0021a4"),
            ObjectId("4e4de701d052fc33da00052f")
        ],
        "updated_at" : ISODate("2012-05-03T18:26:14.774Z")
    }
]
 } 
```

由于上面的文档包含在一个数组中，我无法从选择器中选择它，如下所示：

```
User.collection.update({"_id" => user.id}, {:$set => {"alert.matches" => matches}}) 
```

但这将更新所有#alerts 匹配项。我只想更新 ID 为“4fa7fd60e5be08bcc9000644”的警报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:48:50.477

您可能可以使用[位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)来识别数组元素：

> **$ 位置运算符**
> 
> $ 运算符（单独）表示“查询中匹配的数组项的位置”。使用它来查找数组成员，然后对其进行操作。

所以也许是这样的：

```
User.collection.update(
    { :_id => user.id, :matches => BSON::ObjectId('4e40238dbc9f6ec5a6000eed') },
    { :$set => { 'alert.matches.$' => matches } }
) 
```

但正如 Sergio 指出的那样，根据您问题中的有限信息，很难梳理出文档的结构。

* * *

我回答后似乎有更多信息出现，它看起来像：

```
{ :$set => { 'alerts.$.matches' => ... } } 
```

是你需要的。而且您需要`:matches`在查询中`$`包含一些内容以供参考。

# grails - 从静态映射块设置可为空

> ID：10506317
> 
> 赞同：0
> 
> 时间：2012-05-08T20:52:45.370
> 
> 标签：grails, grails-domain-class

我有一种情况，我宁愿不使用内置约束。

我们确实使用约束（当前）来驱动数据库模式的创建。如果我们停止使用内置约束并转而使用静态映射块，那么似乎（从我迄今为止检查的内容来看）所有的基础都被覆盖了。

一个例外是可为空的约束。我看不到以控制模式生成的方式在静态映射块中将列标记为不可为空的方法。有没有办法这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:17:03.943

我认为最简单的方法（假设您具有数据库访问权限）是使用`grails schema-export`生成相关的 DDL 并简单地将非空约束添加到 DDL 并在数据库上手动运行它。请务必在适当的 DataSource 中更新 dbCreate 以“验证”，否则您最终可能会意外破坏此更改。

# iphone - 如何判断 UITableView 是否包含特定的 NSIndexPath？

> ID：10506318
> 
> 赞同：17
> 
> 时间：2012-05-08T20:52:46.670
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

这是我正在使用的代码：

```
if (appDelegate.currentMainIndexPath != nil /* && doesPathExistInTableView */)
{
    [tblView scrollToRowAtIndexPath:appDelegate.currentMainIndexPath atScrollPosition:UITableViewScrollPositionTop animated:NO];
    appDelegate.currentMainIndexPath = nil;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-10-22T09:34:27.143

你可以使用这个。传递它 indexpath 的行和部分

**目标 C：**

```
-(BOOL) isRowPresentInTableView:(int)row withSection:(int)section
{
    if(section < [self.tableView numberOfSections])
    {
        if(row < [self.tableView numberOfRowsInSection:section])
        {
            return YES;
        }
    }
    return NO;
} 
```

**斯威夫特 3：**

```
func isRowPresentInTableView(indexPath: IndexPath) -> Bool{
    if indexPath.section < tableView.numberOfSections{
        if indexPath.row < tableView.numberOfRows(inSection: indexPath.section){
            return true
        }
    }

    return false
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-04-27T08:55:45.860

对卡姆兰汗的回答的迅速改编：

```
extension UITableView {
  func hasRowAtIndexPath(indexPath: NSIndexPath) -> Bool {
    return indexPath.section < self.numberOfSections && indexPath.row < self.numberOfRowsInSection(indexPath.section)
  }
} 
```

**斯威夫特 4：**

```
extension UITableView {
    func hasRow(at indexPath: IndexPath) -> Bool {
        return indexPath.section < self.numberOfSections && indexPath.row < self.numberOfRows(inSection: indexPath.section)
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-15T06:42:04.217

有一个更方便的方法来判断 indexPath 是否有效：

对于 Swift 3.0：

```
open func rectForRow(at indexPath: IndexPath) -> CGRect 
```

对于 Objective-C

```
- (CGRect)rectForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

如果 indexPath 无效，您将获得 CGRectZero。

```
func isIndexPathValid(indexPath: IndexPath) -> Bool {
    return !tableView.rectForRow(at: indexPath).equalTo(CGRect.zero)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T20:57:08.220

如果您的意思是“索引 n 处是否有一个单元格”，那么您只需将数据源的大小与 n 进行比较

```
if (appDelegate.currentMainIndexPath != nil [datasource count] > n)
{
    [tblView scrollToRowAtIndexPath:appDelegate.currentMainIndexPath atScrollPosition:UITableViewScrollPositionTop animated:NO];
    appDelegate.currentMainIndexPath = nil;
} 
```

数据源例如是一个 NSArray。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-06T08:54:54.660

这就是你的做法：

```
indexPath.row < [self.tableView numberOfRowsInSection:indexPath.section] 
```

在上下文中：

```
if (indexPath.row < [self.tableView numberOfRowsInSection:indexPath.section]) {
    [self.tableView scrollToRowAtIndexPath:indexPath
                          atScrollPosition:UITableViewScrollPositionTop
                                  animated:YES];
} 
```

插入到您的代码中：

```
if (appDelegate.currentMainIndexPath != nil &&
    indexPath.row < [tblView numberOfRowsInSection:indexPath.section]) {
    [tblView scrollToRowAtIndexPath:appDelegate.currentMainIndexPath
                   atScrollPosition:UITableViewScrollPositionTop
                           animated:NO];
    appDelegate.currentMainIndexPath = nil;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-22T09:47:24.183

你也可以使用 UITableView 的`numberOfRowsInSection`方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-02T01:10:43.150

我重复了[卡姆兰的回答](https://stackoverflow.com/a/26504470/347339)：

```
+ (BOOL)isIndexPath:(NSIndexPath *)indexPath inTableView:(UITableView *)tableView {
    if (!indexPath) {
        return NO;
    }
    if (indexPath.section < [tableView numberOfSections]) {
        if (indexPath.row < [tableView numberOfRowsInSection:indexPath.section]) {
            return YES;
        }
    }
    return NO;
} 
```

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2012-05-09T03:35:26.367

您可以尝试`UITableViewCell`通过：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath;
// returns nil if cell is not visible or index path is out of range 
```

这是完整的代码：

```
UITableViewCell *cell = [cellForRowAtIndexPath:appDelegate.currentMainIndexPath];

if (appDelegate.currentMainIndexPath != nil && cell !=nil)
{
    [tblView scrollToRowAtIndexPath:appDelegate.currentMainIndexPath atScrollPosition:UITableViewScrollPositionTop animated:NO];
    appDelegate.currentMainIndexPath = nil;
} 
```

# php - 谷歌地图地方没有填充

> ID：10506319
> 
> 赞同：1
> 
> 时间：2012-05-08T20:52:50.273
> 
> 标签：php, jquery, google-maps-api-3, wordpress

我正在尝试在搜索字段上使用 Google Maps 自动完成功能，但我只需要根据迄今为止输入的内容在下拉列表中列出地点 - 我实际上不需要更新地图或任何东西。

我通过 WP 的 enqueue 函数插入库，它看起来像这样：

```
function typeright_enqueue() {
  wp_register_script( 'GMaps-Library', 'http://maps.googleapis.com/maps/api/js?key=' . get_option('maps_key') . '&sensor=false&libraries=places');
  wp_enqueue_script( 'GMaps-Library' );

  wp_register_script( 'GMaps-Call', plugins_url() . '/typeright-jobroller-plugin/js/gmaps-call.js');
  wp_enqueue_script( 'GMaps-Call' );    
}

add_action('wp_enqueue_scripts', 'typeright_enqueue'); 
```

从那里我通过如下所示的调用初始化 Google Places 功能：

```
function initialize() {
  var input = document.getElementById('near');
  var autocomplete = new google.maps.places.Autocomplete(input);
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

出于某种原因，当我查看控制台时，我可以看到来自 Google 地图的活动，但没有出现位置下拉菜单。我究竟做错了什么？

[在http://rockstar.tinygiantstudios.co.uk/](http://rockstar.tinygiantstudios.co.uk/)上有一个演示- 该操作应该在使用“位置”输入时发生。

希望有人能拯救我的发际线...

# cakephp - 使用 CakePHP 和多个 $all 进行 MongoDB 搜索

> ID：10506320
> 
> 赞同：1
> 
> 时间：2012-05-08T20:53:03.033
> 
> 标签：cakephp, mongodb

假设我有一个简单的数据库，并且我正在尝试查找所有会说英语和西班牙语和/或英语和法语（但不是西班牙语和法语）的用户。我有一张`users`桌子，上面有一些这样的记录：

```
{
    "username": "jdoe",
    "languages": ["english", "spanish", "french"]
} 
```

当我这样搜索时，我得到了预期的结果：

```
db.find({ "languages" : { $all:['english', 'spanish'], $all:['english', 'french'] } }) 
```

但我不知道如何用蛋糕做到这一点。我可以像这样匹配一个语言对：

```
$this->User->find('all', array('conditions' => 'User.languages' => array('$all' => array('english', 'spanish')))); 
```

但是我被困在如何搜索多对上；数组数组似乎没有这样做。

这是别人开始的项目，所以我对 CakePHP 或 MongoDB 的细微差别不是特别熟悉；我有一种感觉，我忽略了一些明显的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:16:18.000

您的 shell 查询示例可能返回了测试数据的预期结果，但它在技术上是不正确的，因为您正在破坏`$all`查询对象中的属性。使用顶级`$or`运算符，正确的查询将是：

```
db.users.find({"$or": [
    {"languages": {"$all": ["english", "spanish"]}},
    {"languages": {"$all": ["english", "french"]}}
]}); 
```

这转换为 CakePHP 为：

```
$results = $this->User->find('all', array('conditions' => array(
    '$or' => array(
        array('User.languages' => array('$all' => array('english', 'spanish'))),
        array('User.languages' => array('$all' => array('english', 'french'))),
    ),
))); 
```

`_id`我在 CakePHP 应用程序中使用以下夹具数据（sans）对此进行了测试：

```
{ "username" : "john", "languages" : [ "english", "spanish", "french" ] }
{ "username" : "mike", "languages" : [ "spanish", "french" ] }
{ "username" : "bill", "languages" : [ "english" ] }
{ "username" : "fred", "languages" : [ "english", "french" ] }
{ "username" : "luke", "languages" : [ "english", "spanish" ] } 
```

约翰、弗雷德和卢克回来了。

# iphone - 第二个图像如何查看表格视图单元格？

> ID：10506321
> 
> 赞同：0
> 
> 时间：2012-05-08T20:53:09.663
> 
> 标签：iphone, ios, facebook-graph-api, uitableview, uiimageview

我正在实现一个应用程序，它有 2 个图像，我需要在同一个 tableviewcell 上显示。

但是，由于应用程序的设置方式，我不能将 tableviewcell 子类化。所以我想以编程方式创建一个图像视图，然后添加到 cell.contentview，但它只是出错了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T20:56:19.597

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
[imageView setFrame:CGRectMake(x,y,width,height)]; //note this is in the cell coordinate system
[cell.contentView addSubview:imageView]; 
```

# objective-c - Facebook 单点登录后应用程序崩溃

> ID：10506322
> 
> 赞同：1
> 
> 时间：2012-05-08T20:53:17.567
> 
> 标签：objective-c, ios, facebook, ios-simulator, facebook-ios-sdk

我在我的应用程序中实现了 Facebook，并注意到我有一些我无法解决的问题。

当 Facebook signle-signon 在 Facebook.app 中获得批准后返回我的应用程序时，同时从 XCode 运行和调试.. 应用程序在恢复时会挂起，大约 30 - 40 秒后它会切换回请求 facebook 身份验证的页面。当我独立运行应用程序时，没有在 XCode 中进行调试，应用程序会在 10 到 15 秒后崩溃。我从设备中提取了崩溃日志，结果如下：http: [//pastebin.com/MeT7Rt52](http://pastebin.com/MeT7Rt52)

当我在模拟器中测试它时，同样的事情发生了......尽管它使用的是 Safari。我不相信 Facebook 或 Safari 是或可能是问题的根源......因为它不可能。

我已经搜索和搜索，但找不到这个问题的答案。

这是我的 AooDelegate 中的一些代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);
    [FlurryAnalytics startSession:APP_FLURRY];

    [TestFlight takeOff:APP_TESTFLIGHT_KEY];
    facebook = [[Facebook alloc] initWithAppId:APP_FB_APP_ID andDelegate:self];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window setBackgroundColor:[UIColor scrollViewTexturedBackgroundColor]];

    [...]

    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [facebook handleOpenURL:url]; 
}

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:12:36.240

我认为这不会解决问题，但是，您可以尝试添加此方法：

```
- (BOOL)application:(UIApplication *)application 
            openURL:(NSURL *)url 
  sourceApplication:(NSString *)sourceApplication 
         annotation:(id)annotation  {
    return [facebook handleOpenURL:url];
} 
```

已`- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url`弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:16:59.787

我孤立了这个问题，这个问题的答案是我没想到的。在我的应用程序中，我使用[TestFlightApp](https://testflightapp.com/)的 API。我应该在启动应用程序时启动它，因为我应该......但是，这也是阻止应用程序返回到其先前状态的事情（看起来）。

我禁用了 TestFligthApp，应用程序恢复正常。

谢谢您的回答！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:04:28.193

Facebook SDK 是完整的错误，我使用的是 Facebook + 单例，它将 Facebook SDK 组合成单例形式，使其更易于使用。

# c# - ConfigurationProperty 的典型示例

> ID：10506323
> 
> 赞同：4
> 
> 时间：2012-05-08T20:53:17.943
> 
> 标签：c#, .net

我正在尝试利用 .NET 配置并了解自定义部分、元素等。

似乎实现这些自定义部分需要明确声明 getter 和 setter，通常会导致代码膨胀。

例如这里：

[http://msdn.microsoft.com/en-us/library/2tw134k3.aspx](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)

具体来说，我们似乎有必要在 get 和 set 方法中显式地返回和设置内容。

```
// Create a "remoteOnly" attribute.
[ConfigurationProperty("remoteOnly", DefaultValue = "false", IsRequired = false)]
public Boolean RemoteOnly
{
  get
  { 
    return (Boolean)this["remoteOnly"]; 
  }
  set
  { 
    this["remoteOnly"] = value; 
  }
} 
```

与以下

```
[ConfigurationProperty("remoteOnly", DefaultValue = "false", IsRequired = false)]
public Boolean RemoteOnly { get; set } 
```

不等同于上述。

这真的是真的吗 - 即使有这样的香草属性，我们也必须冗长吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:05:14.490

是的，因为您依赖于外部存储机制（最终填充配置文件的基类字典）。

此外，如果您担心代码膨胀，那么您担心的是错误的事情。写一次，再也不看。您不应该有太多处理自定义配置设置的代码，否则会使您的代码库膨胀。可能有一点点肿块，但不会膨胀。另外，我很高兴您现在而不是在 VS2005 之前处理这个问题 - 您必须编写更多代码（您必须手动解析 XML 部分）。

最后，如果您仍然非常讨厌它，您可以随时使用“我将永远需要的最后一个配置部分处理程序”： [https ://sites.google.com/site/craigandera/craigs-stuff/clr-workings/the -last-configuration-section-handler-i-ll-ever-need](https://sites.google.com/site/craigandera/craigs-stuff/clr-workings/the-last-configuration-section-handler-i-ll-ever-need)

自从他写那篇文章以来已经有很长时间了，但它应该仍然可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:04:42.790

更简洁的形式`{ get; set; }`扩展到使用私有数据成员（如果我没记错的话）。这只是 C# 的语法糖，与配置系统没有任何关系。

对于 ConfigurationProperty，您需要访问当前对象上的索引器以存储/检索您的值，因为这就是系统的设计方式。你是对的，它有点冗长，但没有真正的解决方法 - 这就是必须存储/检索值的方式。

我可以建议一些[代码片段](http://msdn.microsoft.com/en-us/library/z41h7fat.aspx)来让您更容易（并且更不容易出错）创建这些属性吗？

# javascript - 骨干网：从视图类添加路由到路由器

> ID：10506327
> 
> 赞同：1
> 
> 时间：2012-05-08T20:53:39.813
> 
> 标签：javascript, backbone.js

我试图弄清楚是否有办法让我在骨干网中动态添加路由。我有根据特定用户的权限动态添加的视图。我希望能够让视图类在实例化时添加其路由，而不必在路由器中定义所有路由（我使用的是单个应用程序范围的路由器）。

我尝试使用骨干路由器文档中描述的路由方法，但是当我检查路由器的“路由”对象时，我没有看到添加的路由。

我怀疑你会说我可以为每个视图创建一个新的路由器......可能是这样，但我不想这样做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:24:07.267

> 我尝试使用骨干路由器文档中描述的路由方法，但是当我检查路由器的“路由”对象时，我没有看到添加的路由。

Router 的 routes 对象只是您传递给 extends 函数的哈希值。

实际路线被添加到 Backbone.history 对象中。

因此，当您使用 Router.route() 函数时，它不会修改路由器的 Routes 哈希，但它实际上会将路由添加到 Backbone.history，它会按预期工作。

```
Workspace = Backbone.Router.extend({
  routes: {
    "help":                 "help",    // #help
    "search/:query":        "search",  // #search/kiwis
    "search/:query/p:page": "search"   // #search/kiwis/p7
  },
  help: function() {
    console.log("help");       
  },
  search: function(query, page) {
    console.log("search",query,page);
  },
  new: function() {
    console.log("new");
  }
});

Main = Backbone.View.extend({
    tagName: 'div',
    initialize: function() {
        app.route('new','new');
    },
    render: function() {
      return this;   
    }
});

​app = new Workspace();
Backbone.history.start();
main = new Main();
app.navigate('new',{trigger:true});  //=> "new" 
```

现场示例：http: [//jsfiddle.net/edwardmsmith/XsDQu/4/](http://jsfiddle.net/edwardmsmith/XsDQu/4/)

# php - 真的很难过 $_POST PHP 问题

> ID：10506329
> 
> 赞同：1
> 
> 时间：2012-05-08T20:53:48.967
> 
> 标签：php, post, odbc

我正在构建一个 CMS，并且正在尝试制作一个版本控制系统。

每次用户发布对现有网页的更新时，我都希望“版本控制”表保留已编辑字段的事件日志......

为此，我运行了一堆循环来检查用户刚刚填写的表单内容是否与点击提交之前网站上的内容不同...

因此，在我进行任何更新之前，我有以下代码（如果格式不正确，请道歉）：

```
$sql = "select * from pages where ID =" .$_POST[id];
$rs = odbc_exec ($db, $sql);
$contents_original = odbc_result($rs,"content");
$title_original = odbc_result($rs,"title");
$pageorder_original = odbc_result($rs,"pageorder");
$parent_original = odbc_result($rs,"parent");
$footer_original = odbc_result($rs,"footer");

$updated_content = trim(stripslashes(strtolower(htmlentities($_POST['content']))));
$original = trim(strtolower($contents_original));

if ($updated_content == $original) {
                $a = 'n';
                } else {
                $a = '<p>Contents changed.';
                } 
```

// 以此类推，从变量 $b - $e ... 然后：

```
 $update = "$a $b $c $d $e"; 
```

然后是更新例程（所有这些都可以正常工作），并且在版本更新结束时，我将 $update 的内容插入到“事件”列中的 SQL 中（这也可以正常工作）

然而！假设用户使用原始页面内容加载表单并单击提交...如果表单没有任何更改，则 $a 将 = ' '，因此，不应在“事件”列中输入任何内容。除了它不断输入“内容已更改”，事实上，它对每个字符串都这样做（例如标题字段、页脚字段等）！奇怪的是有 2 个整数输入，它们被事件菜单记录得很好。

如果我打印出 strlen(stripslashes(strtolower(htmlentities($_POST['content'])))) 和 strlen(strtolower($contents_original)) 它表明长度不同......

代码或数据库长度中没有任何内容会导致这种抑制。

* * *

输出：stripslashes(strtolower(stripcslashes($thenewcontent)))

章鱼你好！

欢迎来到乔纳森米。爱德华兹的平面设计页面。

无论您需要设计什么——一个商业网站、一个乐队标志，只要你能想到的——我都有能力为您提供创意和专业的产品。

单击下面的缩略图以快速浏览：

要安排报价，或者如果您只是想谈谈想法，请给我发电子邮件至：contact[at]angry-octopus.co.uk 或致电 (0789)694-3379

* * *

从条带输出（strtolower（html_entity_decode（$contents_original）））

章鱼你好！

欢迎来到乔纳森米。爱德华兹的平面设计页面。

无论您需要设计什么——一个商业网站、一个乐队标志，只要你能想到的——我都有能力为您提供创意和专业的产品。

单击下面的缩略图以快速浏览：

要安排报价，或者如果您只是想谈谈想法，请给我发电子邮件至：contact[at]angry-octopus.co.uk 或致电 (0789)694-3379

^^^^^^^^^^^^^^ 以上所有内容均从记事本 .TXT 复制/粘贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:57:19.757

如果调用`htmlentities()`，字符串可能会因为字符转换而变长。或者更短，因为您还使用`stripslashes()`. （谢谢豪尔赫）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:06:10.687

是数据库中的数据多字节，

如果数据是 unicode（多字节），则普通的 strlen 函数无法正常工作，因为它们会将字符串计为单字节

您可以尝试使用该功能：

```
mb_strlen (strtolower($contents_original)) ) 
```

[http://www.php.net/manual/en/ref.mbstring.php](http://www.php.net/manual/en/ref.mbstring.php)

# macos - 在 OSX Lion 下的 emacs 中查询替换内部区域

> ID：10506334
> 
> 赞同：0
> 
> 时间：2012-05-08T20:54:00.747
> 
> 标签：macos, emacs, terminal, osx-lion, replace

我在 OSX Lion 下的终端中使用 emacs，由于某种原因，我无法在活动区域​​内搜索和替换。标记似乎正在工作，即如果我设置标记`Ctrl-<space>`然后向前移动，我可以杀死活动区域。但是，如果我设置标记，向前移动，然后发出`Meta-x` `query-replace`命令，它将循环遍历从光标所在位置到文件末尾的所有匹配字符串（就好像我没有标记活动区域一样）。

关于如何解决这个问题的任何想法？

~~我使用的是 GNU Emacs 22.1.1，我通过 macports 安装了它。~~

我使用的是与 OSX 捆绑在一起的 GNU Emacs 22.1.1。我从 macports 安装了 GNU Emacs 23.4.1 并解决了问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:37:09.507

Emacs 22.1.1 已经五年了。

[http://emacsformacosx.com/](http://emacsformacosx.com/)始终拥有最新的稳定版、预测试版和夜间版本。

您应该更新到 23 的最新稳定版本，或 24 的最新预测试版本（通常也非常稳定）。

# asp.net - 内联 Listview 列宽设置

> ID：10506335
> 
> 赞同：0
> 
> 时间：2012-05-08T20:54:06.577
> 
> 标签：asp.net, vb.net, listview

我正在尝试设置列表视图的列宽。

我已经查看了大量的链接，但我发现没有一个描述设置内联列表视图的列宽。没有 CSS 文件。在线文档上的 MSDN 上说要使用 CSS 或内联，但我似乎无法让内联工作。甚至这个例子也显示了固定的 col 宽度....

[http://msdn.microsoft.com/en-us/library/bb398790.aspx#ApplyingStylesToListViewItems](http://msdn.microsoft.com/en-us/library/bb398790.aspx#ApplyingStylesToListViewItems)

我在 itemTemplate 和 Alternate 模板中的标签中添加了 Width 属性，并尝试了 LayoutTemplate 中的设置。

似乎没有任何效果。有人可以指点我一个教程或提供一个编码示例来调整 Listview WEB 控件的列宽，而不是 Windows listview 控件。

谢谢你！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:53:07.857

我所做的是在我的模板中定义了另一个表。所以，假设我只想更改 EditItemTemplate 字段的大小，而我的 LayoutTemplate 有 9 秒。在 EditItemTemplate 我做了：

```
 <EditItemTemplate>
  <tr>
    <td colspan="9">
      <table>
        <tr>
           <td>
              <!-- any controls you want... -->
              <asp:TextBox ID="blah" runat="server" Text="'<%# Bind("blah") %>'                                          Width="whateverpx"/> 
```

...关闭标签...这个想法是根据您的需要制作模板布局并在您的 asp 上设置宽度：控件。

# iphone - 可以为原生 iOS 应用程序指定的捆绑包 ID 的数量是否有限制？

> ID：10506336
> 
> 赞同：1
> 
> 时间：2012-05-08T20:54:08.770
> 
> 标签：iphone, ios, facebook

我一直在尝试为我的原生 iOS 应用程序添加一个新的捆绑包 ID，虽然系统说它已保存，但当我在 30 分钟后返回时，我添加的 ID 不再存在。

目前我在应用程序中有 6 个捆绑包。

谢谢伙计们/姑娘们！

# android - 我的 Android 服务突然停止并创建了一个新服务

> ID：10506346
> 
> 赞同：0
> 
> 时间：2012-05-08T20:54:58.533
> 
> 标签：android, service

我有一个运行服务的非常简单的 Android GPS 记录应用程序。Activity 只不过是一个控制服务的启动/停止按钮。单击按钮后，我启动了一个新的后台服务（使用 START_STICKY）。然后我关闭Activity，服务正常运行。我可以再次运行该应用程序以停止服务。

该服务只是将 GPS 坐标记录到文件中。我正在登录每个方法和异常捕获。在某些时候，可能是几分钟或几小时，我的服务将停止，但不会调用 onDestroy 并且不会引发异常。日志只是显示我的最后一个文件写入工作，然后什么也没有。我怀疑 GC 正在杀死它，但我认为 START_STICKY 基本上意味着“请尽可能长时间地运行我”。30 秒后，服务的新副本启动（不同的 PID），onCreate 和 onStartService 照常调用。

如果/当它杀死它的父 Activity 或应用程序时，Android 会杀死一个服务吗？是否有必要在单独的线程中运行服务以防止这种情况？为什么整个服务生命周期不完整（不调用 onDestroy）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:12:41.620

一个服务实际上是在主线程中运行的，如果你做的工作可能需要一些时间，你应该创建一个新线程。如果您使用[IntentService](http://developer.android.com/guide/topics/fundamentals/services.html#ExtendingIntentService)而不是常规服务，Android 可以为您执行此操作。

我应该补充一点，Android 会杀死一个占用主线程超过 5(?) 秒的进程。锁定主线程会导致 ANR（Application Not Responding），也许这就是您在 Service 中遇到的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:22:59.537

Android 不会在其父 Activity 关闭时终止后台服务。但是当设备屏幕被锁定时，它会暂停后台作业。您的问题可能与此有关。当屏幕再次解锁时，该服务有望从它离开的地方继续工作。

# javascript - JQuery .click(function() 在 IE 中不起作用

> ID：10506348
> 
> 赞同：0
> 
> 时间：2012-05-08T20:55:03.173
> 
> 标签：javascript, jquery, internet-explorer

以下代码适用于除 IE 之外的所有浏览器。我使用的是 IE 9，并且已经包含了 jquery 库。为什么`.click(function()`不工作。函数内部的代码永远不会运行。

```
newEntryRow.find('.dispmsg').click(function(){
    alert("this code is not running");
    showEntryById(1);
}); 
```

任何想法为什么会发生这种情况以及如何解决它的任何想法。谢谢。

newEntryRow 是 li 元素的克隆，但就像我上面所说的，它适用于所有其他浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:58:57.087

验证“newEntryRow.find('.dispmsg')”是否正在返回一个元素。“.dispmsg”是一个标签吗？如果是，您可能需要调用 event.preventDefault()。除此之外，您可以尝试使用 .bind() 代替。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T20:59:20.980

`showEntryById`似乎表明您正在传递`id`值，但是单独的数字（在`1`您的情况下）不是有效的值`id`，请尝试使用 alpha 或字母数字字母的组合。

还要确保它`newEntryRow`是一个 jQuery 对象，尝试在控制台上输出它。

# python - Django 表单向导 - done() 方法中的缩进错误？

> ID：10506350
> 
> 赞同：0
> 
> 时间：2012-05-08T20:55:16.537
> 
> 标签：python, django

我一直在尝试编写我的 done() 方法，但出现缩进错误：

```
IndentationError at /addWizard/
expected an indented block (views.py, line 105) 
```

我的 views.py（第 105 行是 if 语句）

```
class AddWizard(SessionWizardView):
    def get_template_names(self):
        return ['business/add_{0}_form.html'.format(self.steps.current)]

    def done(self, form_list, **kwargs):
        if form_list[0].get('ad_type') == '1': #LINE 105
            ad_type = "Basic"
        else:
            ad_type = "Other"

        return render_to_response('business/done.html', {
            'form_data': ad_type,
        }) 
```

如果 return 语句是单独的，那么它唯一的工作方式。我已经盯着它看了好几个小时了。

# oracle - Oracle 数据库：11gR2 Alter Database Link，它需要什么样的用户权限？

> ID：10506351
> 
> 赞同：2
> 
> 时间：2012-05-08T20:55:18.197
> 
> 标签：oracle, oracle11gr2

我正在尝试执行以下操作以将数据库链接更改为 11gR2.02 中的新密码，

更改数据库链接 dblink_name 连接到由 new_password 标识的 db_account；

但它给出了 ORA-01031 的权限错误。上面的语句在拥有这个数据库链接的架构中运行，并且这个架构已经创建了这个数据库链接，所以这个架构有创建数据库链接的权限。我检查了所有权限，在 11gR2 中没有授予更改数据库链接权限，那么为了运行上述语句，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:11:31.103

这将需要`ALTER DATABASE LINK`或`ALTER PUBLIC DATABASE LINK`系统特权才能执行。请参阅“先决条件”下的[ALTER DATABASE LINK](https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/ALTER-DATABASE-LINK.html "Oracle 数据库/第 21 版：SQL 语言参考")文章。根据文档，无论如何您都无法使用此命令更改密码，您必须删除并重新创建链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:31:00.270

只是想补充一下，在em GUI中，没有alter database link系统权限可以选择授予用户，但是当我在sqlplus中运行以下命令时，将alter database link授予userabc；故事的寓意是，不要 100% 相信 em（也许 em 版本落后了），对于新功能，从 sqlplus 运行命令以授予特权，而不是依赖 em 下拉框来获得那些 11gR2 新功能。

# lotus-notes - 从一个文档中检索表单并将其放入另一个表单上的 RTF

> ID：10506359
> 
> 赞同：1
> 
> 时间：2012-05-08T20:55:44.840
> 
> 标签：lotus-notes, lotusscript, richtext, richtextediting

我有一个 mail-in 数据库，其中 mailDoc 是从传入电子邮件中检索到的值表。没什么特别的，它只是让使用这种方式更容易。我有一个**预定代理**读取这些传入的电子邮件并处理它们以确定附件和客户名称的有效性。当我遇到无效附件时，我需要在我创建的一些解释错误的文本下向发件人发送一封电子邮件，其中包含原始电子邮件的副本（表中的所有内容）。

我尝试使用 RenderToRTItem 并将其设置为这封新（传出）电子邮件上的现有正文字段。根据帮助文档的说明，RenderToRTItem 要求我在使用此功能之前保存电子邮件。问题是我不想保存这些电子邮件。

RenderToRTItem 在没有保存的情况下确实从 mailDoc 中检索了附件并将其放在电子邮件的一行下方，但我需要检索整个表单而不仅仅是附件。

如何从 mailDoc 表单中检索所有数据，将其放入 memoDoc 上已添加的文本下的 Body 字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:43:18.940

尝试以下解决方法以避免保存文档：
1 添加值为“0”的 saveoptions 字段
2 保存文档（它不会真正保存）
3 测试 RenderToRTItem 是否有效

我没有对 RenderToRTItem 使用这个技巧，但它适用于许多其他类似的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:34:59.020

您（可能）将无法解决首先保存文档的要求，但为什么不保存文档然后稍后将其删除呢？您可以在文档“ToBeDeleted”上设置一个项目，然后创建另一个计划代理来删除具有该项目的所有文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:43:05.880

根据您对肯的回答的回应：

尝试创建一个新的虚拟 NotesRichTextItem。将您的 RenderToRTItem 放入该虚拟项目中。然后调用 BodyItem.appendRTItem(dummyRTItem)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:18:12.597

如果您只想要电子邮件的内容，为什么不将您的文本添加到新电子邮件的正文中，然后只需使用 AppendRTItem 将原始电子邮件内容附加到正文中？

# asp.net - 图片按钮的 CSS

> ID：10506361
> 
> 赞同：1
> 
> 时间：2012-05-08T20:55:53.547
> 
> 标签：asp.net, css

我到处搜索，找不到将css边框设置为asp图像按钮的解决方案。

页眉中的 Css 脚本

```
 .HoverBorder {border:5px solid #eee;}
            .HoverBorder:hover {border:5px solid #5CB3FF;} 
```

正文页面上的图像按钮

```
 <asp:ImageButton ID="ImageButton1" runat="server" CssClass="HoverBorder" SkinId="ButtonSkin" 
         ImageUrl="~/images/gnome_view_refresh.png" ToolTip="Refresh" Width="30px" Height="30px"  /> 
```

它应该设置一个边框，然后在悬停时更改边框颜色。任何想法为什么它不能按预期工作。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:14:23.750

你可以像这样尝试翻转

```
 .HoverBorder:rollover {border:5px solid #5CB3FF;} 
```

您还可以查看 SkinId "ButtonSkin" 的 css 中的某些内容是否覆盖了您的边框。

# javascript - 在 innerHTML 中返回多个结果

> ID：10506368
> 
> 赞同：0
> 
> 时间：2012-05-08T20:56:15.763
> 
> 标签：javascript, return, innerhtml, getelementbyid

我是 JavaScript 新手，正在尝试更多地了解它可以做什么以及如何使用它。

是否可以作为计算结果返回多个结果？

我正在为一个班级项目做一个计算器。我想做的是在我的页面上返回 3 个值：

`Interest rate`

`total amount borrowed`和 `monthly repayment`

到目前为止，我已经设法让它在页面上的一个 div 中显示每月还款，但我希望能够在页面上显示所有 3 作为一个计算的结果。

这可能吗？

到目前为止，这是我想出的：HTML： `<p><input type="button" onclick="main();" value="Calculate"></p>`

JavaScript：

```
function main()
{

var userInput1 = 0;
var userInput2 = 0;
var displayResult;

userInput1 = document.getElementById("loan_amount").value;
userInput1 = parseFloat(userInput1);
userInput2 = document.getElementById("loan_term").value;
userInput2 = parseFloat(userInput2);

displayResult = calcLoan(userInput1,userInput2);
document.getElementById("Result1").innerHTML=displayResult;

}

function calcLoan(userInput1,userInput2)
{
var interest =0;

    if (userInput1 <1000)
    {
    alert("Please enter a value above £1000")
    }
    else if (userInput1 <= 10000)
    {
    interest = 4.25 + 5.5;
    }
    else if (userInput1 <= 50000)
    {
    interest = 4.25 + 4.5;
    }
    else if (userInput1 <= 100000)
    {
    interest = 4.25 + 3.5;
    }
    else 
    {
    interest = 4.25 + 2.5;
    }

var totalLoan = 0;  

    totalLoan = userInput1 +(userInput1*(interest/100))*userInput2; 

var monthlyRepayment = 0;
var monthly;

    monthlyRepayment = totalLoan/(userInput2*12);
    monthly=monthlyRepayment.toFixed(2);

    alert("Interest Rate = " + interest + "%" +" "+"Total Loan amount = " + "£"+ totalLoan +" "+ "Your monthly repayment is = " + " " + "£"+ monthly);

return monthly; 

} 
```

如果有人能指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:09:47.677

您可以创建具有多个自定义字段的变量并在函数之间传递它们。因此，您的函数应如下所示：

```
function main()
{
    ...

    displayResult = calcLoan(userInput1,userInput2);
    document.getElementById("Result1").innerHTML = displayResult.interest;
    document.getElementById("Result2").innerHTML = displayResult.totalLoan;
    document.getElementById("Result3").innerHTML = displayResult.monthly;
}

function calcLoan(userInput1,userInput2)
{
    ...

    alert("Interest Rate = " + interest + "%" +" "+"Total Loan amount = " + "£"+ totalLoan +" "+ "Your monthly repayment is = " + " " + "£"+ monthly);

    var result;
    result.interest = interest;
    result.totalLoan = totalLoan;
    result.monthly = monthly;

    return result; 
} 
```

并且不要忘记添加 ID 为 Result1、Result2 和 Result3 的 div 元素。

```
<div id="Result1"></div>
<div id="Result2"></div>
<div id="Result3"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:11:21.703

尝试一些 JavaScript OOP。一个函数可以很容易地返回多个值。有几种方法可以做到这一点。尝试阅读此： http: [//killdream.github.com/blog/2011/10/understanding-javascript-oop/](http://killdream.github.com/blog/2011/10/understanding-javascript-oop/)和此： http: [//net.tutsplus.com/tutorials/javascript-ajax/the-basics- of-object-oriented-javascript/](http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/)

# c# - 更新表中的值：SQLite 错误。提供给命令的参数不足

> ID：10506375
> 
> 赞同：1
> 
> 时间：2012-05-08T20:56:35.647
> 
> 标签：c#, .net, sqlite, exception-handling, ado.net

是的！又是我——这些天我好像不得不经常问你……

这次我的问题：我创建了一个 SQLite 命令来更新表中的一些（不是全部）值。这是我的代码：

```
using (SQLiteConnection con = new SQLiteConnection(string.Format("Data Source={0};Version=3;", mstrDatabase)))
{
    try
    {
        using (SQLiteCommand com = new SQLiteCommand("update WDATEN set TS_OUT = @TS_OUT, DATA_OUT = @DATA_OUT where ID = @ID", con))
        {
            com.Parameters.AddRange(new SQLiteParameter[] 
            {
                new SQLiteParameter("TS_OUT", DbType.DateTime){ Value = date},
                new SQLiteParameter("DATA_OUT", DbType.Double){ Value = numRest.Value}
            });
            con.Open();
            com.ExecuteNonQuery();
            mDa.Fill(dsWDaten.WDATEN);
            con.Close();
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Beim Speichern des Datensatzes ist ein Fehler aufgetreten.\n" + ex.ToString(), "Fehler", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

可悲的是，每次我执行此代码块时 - 我都会遇到异常：

> SQLite 错误。提供给命令的参数不足。

在此处和其他页面上搜索对我没有帮助。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T20:58:56.397

您的查询包含三个参数（@TS_OUT、@DATA_OUT 和 @ID），但您只提供前两个参数，而不是 @ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:58:08.127

我看不到您`@ID`在代码中设置参数的位置。您的 SQL 语句包含三个参数，您只提供两个参数。

# node.js - Docco 没有像宣传的那样工作

> ID：10506378
> 
> 赞同：0
> 
> 时间：2012-05-08T20:56:47.830
> 
> 标签：node.js, documentation, coffeescript, requirejs, docco

我正在尝试使用[docco](http://jashkenas.github.com/docco/)自动记录我的咖啡脚本。在下面的示例中，注释得到正确输出。但是右窗格的输出中没有给出代码......只是“***未定义***”作为输出。现在，我已经仔细检查了，我已经安装了必备包：Node.js、Pygments 和 CoffeeScript。

例如：东西.咖啡

```
    ##标题一
    # ## 子标题
    #
    # > 一些块引用
    asdf = 1

    # # 另一个标题
    ＃ * 我的列表
    # * 第二项
    qwerty =“aa”：“bbb”

```

我唯一能想到的是 pygments 没有输出正确的东西。这是我从[docco](http://jashkenas.github.com/docco/)得到的反馈：

```
    $ docco thing.coffee
    %lt 缓冲区 45 72 72 6f 72 3a%gt
    %lt 缓冲区 20%gt
    %lt 缓冲区 6e 6f 20 6c 65 78 65 72 20 66 6f 72 20 61 6c 69 61 73 20 27 63 6f 66 66 65 65 2d 73 63 72 69 70 74 27 20 66 6f 75 6e 64 0a
    docco：thing.coffee -> docs/thing.html

```

有什么我想念的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:02:31.720

在这里测试了你的代码，它工作正常。当我运行 docco 时，它只输出最后一行，所以很可能 docco 使用的依赖项有问题。

# php - PHP：在运行时更改 xdebug.profiler_output_name 选项

> ID：10506385
> 
> 赞同：2
> 
> 时间：2012-05-08T20:57:14.023
> 
> 标签：php, profiling, xdebug

我可以在运行时更改选项 xdebug.profiler_output_name 以指定应用程序模块分析吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:59:56.917

您无法在脚本中更改探查器输出名称，因为探查器在 PHP 启动脚本之前启动。因此，当脚本启动时，文件已经创建。你应该可以使用`.htaccess`，

下一个版本的 Xdebug (2.3) 将允许从脚本*启动*分析器，这也将允许您更改`xdebug.profiler_output_name`脚本中的设置（当然，只要您在启动分析器之前这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:00:03.420

在 var_dump-ing 时，我使用以下代码段打印出整个对象和字符串：

```
// make xdebug stop bugging me
ini_set('xdebug.var_display_max_children', 1024);
ini_set('xdebug.var_display_max_data', 1048576);
ini_set('xdebug.var_display_max_depth', 32); 
```

只需将密钥替换为您的`xdebug.profiler_output_name`和所需的值即可。

# sql - SQL Server 2005 唯一索引插入从暂存表与 Where Not In

> ID：10506390
> 
> 赞同：1
> 
> 时间：2012-05-08T20:57:32.970
> 
> 标签：sql, tsql

我在 tblCombined 中设置了一个唯一索引。它按顺序设置在名为 cyDate、dtlNr 和 seq 的字段上。

我有另一个表 - 临时表 - 称为 tblDailyResults。它具有与 tblCombined 完全相同的字段，但没有索引。每天，我都会从提要中接收到此临时表中的记录。

如果你愿意，我想做的是设置一个“catch”，这样如果重复的记录违反了唯一索引，它就不会出错——相反，它不会被插入；它将保留在暂存表中（然后我可以发出一个警报，指出这一点并从那里管理它）。

这是我尝试过的：

```
 Insert Into tblCombined
    ( 
        cyDate      
        ,dtlNr
        ,seq
        ,chCode
        ,opCode
        ,nrCode

    )

    Select
        cyDate      
        ,dtlNr
        ,seq
        ,chCode
        ,opCode
        ,nrCode

    From tblDailyResults

    Where Not Exists (Select cyDate ,dtlNr ,seq From tblCombined) 
```

但是，这似乎不起作用。我测试了几条记录——改变了已经插入的字段，它仍然排除了不重复的记录。我承认我不熟悉使用“不存在”，所以也许我没有正确使用它。

我也尝试过 Where Not In，但这似乎不适用于多列。

任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:02:52.407

你也需要一个`where`部分`not exists`，比如......

```
where not exists (select 1 from tblcombined 
  where tblcombined.cydate = tbldailyresults.cydate 
  and tblcombined.dtlnr = tbldailyresults.dtlnr 
  and tblcombined.seq = tbldailyresults.seq) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:09:15.627

这是另一种方法：

```
Insert Into tblCombined
( 
    cyDate      
    ,dtlNr
    ,seq
    ,chCode
    ,opCode
    ,nrCode
)

Select distinct 
    a.cyDate      
    ,a.dtlNr
    ,a.seq
    ,a.chCode
    ,a.opCode
    ,a.nrCode
From tblDailyResults a
left join tblCombined b on a.cyDate = b.cyDate
                        and a.dtlNr= b.dtlNr
                        and a.seq= b.seq
                        and a.chCode= b.chCode
                        and a.opCode= b.opCode
                        and a.nrCode= b.nrCode
where b.cydate is null 
```

# matlab - 如何在matlab中检测瞳孔？

> ID：10506393
> 
> 赞同：0
> 
> 时间：2012-05-08T20:57:51.630
> 
> 标签：matlab, image-processing, video-capture

下面是我从某处下载的源代码，它能够检测红色物体并显示其中心坐标。

```
a = imaqhwinfo;
[camera_name, camera_id, format] = getCameraInfo(a);

% Capture the video frames using the videoinput function
% You have to replace the resolution & your installed adaptor name.
vid = videoinput(camera_name, camera_id, format);

% Set the properties of the video object
set(vid, 'FramesPerTrigger', Inf);
set(vid, 'ReturnedColorspace', 'rgb')
vid.FrameGrabInterval = 1;

%start the video aquisition here
start(vid)

% Set a loop that stop after 100 frames of aquisition
while(vid.FramesAcquired<=100)

% Get the snapshot of the current frame
data = getsnapshot(vid);

% Now to track red objects in real time
% we have to subtract the red component 
% from the grayscale image to extract the red components in the image.
diff_im = imsubtract(data(:,:,1), rgb2gray(data));
%Use a median filter to filter out noise
diff_im = medfilt2(diff_im, [3 3]);
% Convert the resulting grayscale image into a binary image.
diff_im = im2bw(diff_im,0.17);

% Remove all those pixels less than 300px
diff_im = bwareaopen(diff_im,300);

% Label all the connected components in the image.
bw = bwlabel(diff_im, 8);

% Here we do the image blob analysis.
% We get a set of properties for each labeled region.
stats = regionprops(bw, 'BoundingBox', 'Centroid');

% Display the image
imshow(data)

hold on

%This is a loop to bound the red objects in a rectangular box.
for object = 1:length(stats)
    bb = stats(object).BoundingBox;
    bc = stats(object).Centroid;
    rectangle('Position',bb,'EdgeColor','r','LineWidth',2)
    plot(bc(1),bc(2), '-m+')
    a=text(bc(1)+15,bc(2), strcat('X: ', num2str(round(bc(1))), 'Y: ',  num2str(round(bc(2)))));
    %disp(' X-Coordinate   Y-cordinate')
    %x=gallery('uniformdata',[5 3],0);
    %disp(x)
    set(a, 'FontName', 'Arial', 'FontWeight', 'bold', 'FontSize', 12, 'Color',      'yellow');
end

hold off
end
% Both the loops end here.

% Stop the video aquisition.
stop(vid);

% Flush all the image data stored in the memory buffer.
flushdata(vid);

% Clear all variables
% clear all
sprintf('%s','That was all about Image tracking, Guess that was pretty easy :) ') 
```

问题是我想检测眼睛的瞳孔，所以我需要检测图像中的黑色，但我不知道如何修改代码以改变它能够检测黑色。那么，对此有什么想法吗？请帮助我，谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T22:03:30.920

```
diff_im = imsubtract(data(:,:,1), rgb2gray(data)); 
```

是算法提取颜色数据的红色分量的地方。所以这就是你必须做出一些改变的地方。

您可以继续使用灰度，而不是提取红色组件（如代码注释中所指出的那样）。

```
diff_im = rgb2gray(data); 
```

但我认为这会导致找到白色物体。为了解决这个问题，您可以更改 blob 分析，或者只是反转输入。我认为它是这样的：

```
diff_im = imcomplement(rgb2gray(data)); 
```

我无法在这里测试它，因为我无法访问图像处理工具箱。你能自己测试一下吗？

## 用八度音阶测试[使用图像包](http://octave.sourceforge.net/image/index.html)

我用于测试的图片可以在[这里](http://www.toptenz.net/wp-content/uploads/2010/11/child-eye1-560x372.jpg)找到。

```
% Get the snapshot of the current frame
  data = imread('child-eye1-560x372.jpg');

% Now to track red objects in real time we have to subtract the red component
% from the grayscale image to extract the red components in the image.
  diff_im = rgb2gray(data);
  imwrite(diff_im,'diff_im.jpg');
%Use a median filter to filter out noise
  diff_im = medfilt2(diff_im, [3 3]);
  imwrite(diff_im,'diff_im_filt1.jpg');
% Convert the resulting grayscale image into a binary image.
  diff_im = im2bw(diff_im,0.17);
  imwrite(diff_im,'diff_im_filt2.jpg'); 
```

这些只是过滤步骤，blob 分析功能在 octave 中不可用。生成的图像是：

![child-eye1-560x372.jpg](../Images/1b11cdaf4d70c214aba68fac45b91f2d.png) ![diff_im.jpg](../Images/50278f147ad766211371083386751057.png) ![diff_im_filt1.jpg](../Images/f0d979c4200f4fc3b2c952ef099ab4fe.png) ![diff_im_filt2.jpg](../Images/cc70b45a5e06402b53a30a378a30b0c4.png)

如果我降低过滤器值`im2bw`到 0.07，结果会更好： ![diff_im_filt2b.jpg](../Images/df937e7eb5a334d567804c415895874d.png)

如您所见，这部分过程似乎没问题。最后一张图片是二进制的，所以大的大斑点不应该太难找到。和以前一样，我自己无法测试...

也许问题不在于算法，而在于您提供的数据。如果图片中有许多小的黑色斑点，算法会找到它们并将它们包含在结果中。

# expression-blend - 在 Win8 Metro Style App 中动画化视觉状态变化

> ID：10506395
> 
> 赞同：1
> 
> 时间：2012-05-08T20:58:05.060
> 
> 标签：expression-blend, windows-runtime, transitions, visualstatemanager, winrt-xaml

使用 Blend 4 使用 WPF，您可以通过从效果的下拉列表中进行选择来将动画添加到视觉状态管理器中的视觉状态更改 - 这很容易并且效果很好。

但是，使用 Blend for Visual Studio 11 Beta 创建 Metro Style 应用程序时，当我单击添加过渡动画到 VSM 中的视觉状态更改时，它会直接进入故事板录制模式。有谁知道如何动画视觉状态变化？（例如：我希望单击时按钮的颜色变化淡入）。或者锄头我通过情节提要创建相同的动画？

所有回应表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:46:48.543

我不是 Blend 专家，但如果您在 Blend 中录制任何 Storyboard - 然后您可以转到 XAML 视图并将您的 Storyboard 移动到按钮的 ViewState 元素（假设您已经提取了控件的模板。

# sql-server - 数据库还原错误

> ID：10506397
> 
> 赞同：1
> 
> 时间：2012-05-08T20:58:09.047
> 
> 标签：sql-server, database-backups

我有来自另一台 PC 的 SQL Server 备份文件 - 我无法更改此文件

当我尝试恢复时，我收到此错误：

> *数据库备份在运行版本 10.50.1600 的 SQL Server 上。该版本与运行版本 10.00.2531 的此服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:03:55.070

您正在尝试将在 SQL Server 2008 R2 上备份的数据库还原到运行 SQL Server 2008 的服务器。您*不能*倒退。您要么需要将 10.00.2531 服务器升级到 SQL Server 2008 R2，要么需要使用导入/导出向导、SSIS 或第三方工具来复制架构/数据。

# python - 无法从 QML 中检索 PySide Signal 参数

> ID：10506398
> 
> 赞同：6
> 
> 时间：2012-05-08T20:58:09.740
> 
> 标签：python, qml, pyside, pyside2

我注意到 QML 可以使用 Connections 对象接收从 Python 发出的信号。不幸的是，我不知道如何让该对象接收该信号的参数。

我创建了一个最小的测试用例来演示我想要做什么：

最小的.py

```
from PySide import QtCore, QtGui, QtDeclarative
import sys

# init Qt
app = QtGui.QApplication(sys.argv)

# set up the signal
class Signaller(QtCore.QObject):
    emitted = QtCore.Signal(str)

signaller = Signaller()

# Load the QML
qt_view = QtDeclarative.QDeclarativeView()
context = qt_view.rootContext()
context.setContextProperty('signaller', signaller)
qt_view.setResizeMode(QtDeclarative.QDeclarativeView.SizeRootObjectToView)
qt_view.setSource('min.qml')
qt_view.show()

# launch the signal
signaller.emitted.emit("Please display THIS text!")

# Run!
app.exec_() 
```

和 min.qml

```
import QtQuick 1.0

Rectangle {
    width:300; height:100

    Text {
        id: display
        text: "No signal yet detected!"

        Connections {
            target: signaller
            onEmitted: {
                display.text = "???" //how to get the argument?
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-09-13T18:02:23.633

从 Qt for Python 5.12.5、5.13.1 开始，它的工作方式与 PyQt 中的相同：

```
from PySide2.QtCore import Signal

sumResult = Signal(int, arguments=['sum'])
sumResult.emit(42) 
```

质量管理体系：

```
onSumResult: console.log(sum) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T22:35:18.820

从 Qt 4.8 开始，PySide 根本不处理信号参数名称。

但是您可以使用命名参数创建一个 QML 信号，并使用 Javascript 将您的 python 信号连接到它：

```
import QtQuick 1.0

Rectangle {
    width:300; height:100

    Text {
        id: display
        text: "No signal yet detected!"

        signal reemitted(string text)
        Component.onCompleted: signaller.emitted.connect(reemitted)

        onReemitted: {
          display.text = text;        
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T21:14:28.057

对不起，我不能发表评论，因为我需要有更高的声誉。响应“无法分配给不存在的属性”，这是由您初始化应用程序的顺序引起的。您的根上下文对象需要在引擎之前创建。

好的：

`context = Context() engine = QQmlApplicationEngine() engine.rootContext().setContextProperty("context", context)`

不好：

`engine = QQmlApplicationEngine() context = Context() engine.rootContext().setContextProperty("context", context)`

# php - 如何使用jQuery获取按钮单击时所有选中复选框的ID

> ID：10506401
> 
> 赞同：0
> 
> 时间：2012-05-08T20:58:15.687
> 
> 标签：php, jquery, html

```
<html>  
    <input type='checkbox' id='1' name='checkMr[]' value='1' />       
    <input type='checkbox' id='2' name='checkMr[]' value='2' />            
    <input type='checkbox' id='3' name='checkMr[]' value='3' />         
    <input type='checkbox' id='4' name='checkMr[]' value='4' />        

    <a id="savedoctorschedule" style="float: right;" class="clyes clbutton clbtnSave">Save</a>       
</html> 

<script>
$j("#savedoctorschedule").bind("click", function () { 
    $j.ajax({
        url: "schedulemr.php",
        type: "post",
        data: { schmrid: $j("#sel_mr").val(), 
        schedocid: $j("#checkMr[]").val(), 
        schedate: $j("#date1").val(), },
        success:function(response){         
        }
</script>

<?php
include '../includes/include.php';
$schmrid = $_POST['sel_mr'];
$schedate = $_POST['date1'];
$schedocid = $_POST['checkMr'];
foreach($schedocid as $a => $b)
{
   $sql="INSERT INTO tbl_mr_schedule(doctor_idscheduled_date) 
   VALUES ('".$schedocid[$a]."','".$schmrid."','0','".$date."','".$schedate."');";
   mysql_query($sql) or die(mysql_error());
}
header('Location:../visitplan/');
?> 
```

我想要使​​用 jQuery 选中复选框的所有 id；复选框可能是`n`数字。我想在数据库中插入选中复选框的值，其中记录数将取决于选中复选框的数量。这将使用 PHP 作为服务器端脚本。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:02:01.433

试试下面，

```
$(':checkbox[name="checkMr[]"]:checked') //returns you the list of selected checkbox 
```

那么你也能，

```
var selectedID = [];
$(':checkbox[name="checkMr[]"]:checked').each (function () {
    selectedID.push(this.id);
}); 
```

[**演示**](http://jsfiddle.net/skram/ww7us/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:42:46.460

```
$("#savedoctorschedule").click(function(e){
    e.preventDefault();
    var sList = "";
    $('input[name="checkMr[]"]').each(function () {
        if(this.checked){
            sList += "(" + $(this).attr('id') + ")";
        }
    });
    alert(sList);
    }
);​ 
```

请找到[FIDDLE](http://jsfiddle.net/u2Mds/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T20:59:25.800

由于多种原因，您的文档无效。跳过明显的（缺少 doctype/ `<body>`/etc），id 属性可能不以数字开头；`id="1"`是无效的。您必须使用非数字前缀，例如`id="check-1"`或将 ID 分配为`value`复选框的。

解决此问题后，您可以使用以下内容查找所有选中的复选框，并检索它们的值（或您选择使用的任何属性）。

```
$("input:checked").map(function () { return $(this).val(); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:02:22.937

ID 不能以数字开头。更新 id 后，使用 attr('value') 或 .val() 检索与输入关联的值。

# javascript - javascript 没有在 Firefox 中执行。好的铬

> ID：10506403
> 
> 赞同：0
> 
> 时间：2012-05-08T20:58:33.593
> 
> 标签：javascript, html5-audio

我在 Firefox 中运行此代码时遇到问题。在chrome中没问题，但是firefox存在一个问题，它无法运行。当它应该被执行时，浏览器什么也不做，停留在主屏幕上。这些是使代码停止执行的方法

```
function muteAudio(){
 backMus.volume -= 0.01;
 var voldown=setTimeout("muteAudio()", 20);
 if (backMus.volume <= 0.02){
     clearTimeout(voldown);
     backMus.muted = true;
 }
} 
```

任何想法将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:00:27.240

`backMus`是某个元素的 id 并且您没有明确定义此变量，是吗？

```
var backMus = document.getElementById('backMus'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:01:15.557

尝试 ：

```
var voldown=setTimeout(function(){muteAudio()}, 20); 
```

# c++ - Shapes 不是类或命名空间

> ID：10506407
> 
> 赞同：0
> 
> 时间：2012-05-08T20:58:39.427
> 
> 标签：c++, linux, enums, g++

我刚刚从 Windows (Visual Studio) 切换到 Linux (Mint)，现在我正在使用 QTCreator 来处理普通的 c++ 项目。虽然当我尝试编译我正在使用 VS2010 处理的项目时，一切似乎都运行良好，但 g++ 不会接受以下语法。

```
enum{
    LINE,
    POLYGON,
    TRIANGLE
}Shapes; 
```

...很多代码...

```
gEngine.AddItem(1,0,Shapes::POLYGON,0,0,0);
gEngine.AddItem(1,2,Shapes::POLYGON,400,400,-1);
gEngine.AddItem(1,2,Shapes::POLYGON,800,400,-1);
gEngine.AddItem(1,2,Shapes::POLYGON,800,800,-1);
gEngine.AddItem(1,2,Shapes::POLYGON,400,800,-1);
gEngine.AddItem(1,2,Shapes::POLYGON,400,400,-1);
gEngine.AddItem(1,1,Shapes::POLYGON,0,0,0); 
```

(G++) 返回：Shapes 不是类或命名空间；即使它与 VS2010 完美编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:03:26.617

我想你想要

```
enum Shapes{
  LINE,
  POLYGON,
  TRIANGLE
}; 
```

这声明了一个枚举类型 Shapes，但是您所定义的变量 Shapes 的类型（没有名称）是一个枚举。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T21:00:51.703

没有类型`Shapes`，但您声明了一个名为`Shapes`.

要定义类型，请`enum Shapes {...}`创建该类型的变量。

# javascript - JS函数中的PHP变量

> ID：10506408
> 
> 赞同：-2
> 
> 时间：2012-05-08T20:58:40.270
> 
> 标签：javascript, php, dns

如何在 js 函数中为多种语言的标签“空闲”和“忙碌”编写 php 变量。我正在尝试越来越多，但没有工作。此功能用于域检查[链接](http://webscripts.softpedia.com/script/Web-Hosting-Tools/Domain-Checker-44826.html)

```
function checkDomain (domain, tld) {
    try {
        xml['tld-' + tld].abort();
        xml['tld-' + tld].open('get', 'domena/php/checkDomain.php?domain=' + domain + '.' + tld);
        xml['tld-' + tld].onreadystatechange = function () {
            if (xml['tld-' + tld].readyState == 4) {
                if (xml['tld-' + tld].responseText == 'available') {
                    el['tld-' + tld].innerHTML = '<font color="#00CC00">Free</font>';
                } else {
                    el['tld-' + tld].innerHTML = '<font color="#EE0000">Busy</font>';
                }
            } else {
                el['tld-' + tld].innerHTML = '<img src="domena/img/loader.gif" alt="Checking domenin..." />';
            }
        }
        xml['tld-' + tld].send(null);
    } catch (e) {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:04:06.630

如果那是一段代码在 .js 文件中或标签之间，请尝试对 PHP 变量进行回显，例如

```
xml['tld-' + <?php echo $tld;?>].abort(); 
```

假设 $tld 是您要插入的 PHP var。

或者更好的是，您可以将 PHP 变量添加到*checkDomain*函数的参数中，例如：

```
function checkDomain (domain, tld, phpVar) {
 ...} 
```

因此，当您调用此函数时，您添加 PHP 变量值，如下所示：

```
onclick="checkDomain(domain, tld, <php echo $var;?>);" 
```

或类似的东西。

这回答了你的问题？

欢呼！

# jquery - jquery bootstrap 与哪些浏览器兼容？

> ID：10506411
> 
> 赞同：0
> 
> 时间：2012-05-08T20:58:46.617
> 
> 标签：jquery, twitter-bootstrap

不确定这是否是正确的地方，但我在以下位置找到了这个简洁的代码：http: [//twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

它不会在任何地方写它兼容的浏览器......我假设所有新浏览器，但是 IE6 或 IE7 呢？

再次，抱歉，如果这是一个错误的地方，但我想不出比这个很棒的社区更好的地方了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:01:35.727

[它绝对兼容 IE7：](http://twitter.github.com/bootstrap/index.html)

> ### 跨越一切
> 
> 最初只考虑现代浏览器构建，Bootstrap 已经发展到包括对所有主要浏览器（甚至 IE7！）的支持，并且使用 Bootstrap 2，平板电脑和智能手机也是如此。

...请不要告诉我你真的关心 IE6 支持。无论如何，[它不被支持](https://github.com/twitter/bootstrap/issues/737)，尽管[有一组非官方的 IE6 支持修复](https://github.com/empowering-communities/Bootstrap-IE6)。

# perl - 我可以在基类中使用 Moose 中的属性修饰符来处理来自子类的多个属性吗？

> ID：10506416
> 
> 赞同：1
> 
> 时间：2012-05-08T20:58:59.237
> 
> 标签：perl, moose

我有几个模块具有许多与日期时间相关的属性，这些属性接受日期戳并返回人类可读的字符串（ dd Mon yyyy hh:mm:ss ）。

```
package ModuleOne;

use Moose;

extends 'ModuleBase';

has date_attr_one => ( ... ); 
```

进而 ...

```
package ModuleTwo;

use Moose;

extends 'ModuleBase';

has date_attr_mouse => ( ... ); 
```

由于它目前正在工作，我正在使用“around”属性修饰符，这样如果没有参数，则返回格式为“2012 年 5 月 3 日 12:33:42”的日期。如果有格式为“2012 年 5 月 3 日 12:33:42”的参数，我想将其设置为日期戳。

所以，在 ModuleOne 中，会有：

```
has date_attr_one => ( ... ); 
```

其次是：

```
around 'date_attr_one' => sub { ... } 
```

第二个模块中发生了相同类型的事情。

我遇到的问题是有多个模块在执行此操作，并且每个模块都使用“around”修饰符和相同的重复代码。我想将修饰符移动到基类中，以便扩展基类的每个模块都可以使用该修饰符。我尝试使用正则表达式将其放入基类中：（在基类中）

```
around qr/date_attr_one/ => sub { ... } 
```

我在那里放了一些从未执行过的打印语句。角色不允许这样的事情。

有没有办法将修饰符移动到基类中，以便扩展基类的每个模块都可以使用该修饰符，其中属性在每个模型中具有不同的名称？

因此，如上例所示，属性修饰符周围的基类将需要处理 $self->date_attr_one 和 $self->date_attr_mouse 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T01:33:47.097

如果您创建一个如下所示的包，那么您在类中所需要的只是：

```
has date => (
   is     => 'rw',
   isa    => 'My::Date',
   coerce => 1,
); 
```

示例代码：

```
my $o = My::Class->new(date => '03 May 2012 12:33:42');
say $o->date();
say 0+$o->date();

$o->date(1336062822);
say $o->date();
say 0+$o->date(); 
```

上述模块：

```
package My::Date;

use strict;
use warnings;

use Moose;
use Moose::Util::TypeConstraints;

use DateTime::Format::Strptime qw( );
use POSIX                      qw( strftime );

my $format = DateTime::Format::Strptime->new(
   pattern   => '%d %b %Y %H:%M:%S',
   locale    => 'en_US',
   time_zone => 'local',
   on_error  => 'croak',
);

has epoch => (
   is       => 'rw',
   isa      => 'Num',
   required => 1,
);

sub as_string {
   return strftime('%d %b %Y %H:%M:%S', localtime( $_[0]->epoch ));
}

coerce __PACKAGE__,
   from 'Num',
      via { __PACKAGE__->new( epoch => $_ ) },
   from 'Str',
      via { __PACKAGE__->new( epoch => $format->parse_datetime($_)->epoch ) };

use overload (
   '""' => sub { $_[0]->as_string },
   '0+' => sub { $_[0]->epoch },
   fallback => 1,
);

1; 
```

# ember.js - ember.containerview 定义像常规视图？

> ID：10506423
> 
> 赞同：1
> 
> 时间：2012-05-08T20:59:31.420
> 
> 标签：ember.js

你能像这样定义一个容器视图并让它作为一个常规视图工作吗？因为它不适合我。但是当我切换到一个普通的 Ember.View.extend() 时，标题和描述就会呈现。

App.SectionView = Ember.ContainerView.extend({ tagName: 'li', classNames: ['section'], defaultTemplate: Ember.Handlebars.compile(sectionTemplate), titleBinding: 'content.title', descriptionBinding: 'content.description ' });

containerView 不能与模板一起使用吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:30:05.983

ContainerView 会覆盖#render，因此它不适用于模板。所以，你应该做的是让 App.SectionView 成为 Ember.View，在那里显示你的标题和描述，让 ContainerView 成为一个子视图。

# php - 具有多维数组的 CodeIgniter 分层循环

> ID：10506425
> 
> 赞同：0
> 
> 时间：2012-05-08T20:59:58.167
> 
> 标签：php, codeigniter, multidimensional-array, foreach

我在这条消息的底部生成了数组。我正在使用 CodeIgniter 和此数组通过以下视图显示层次结构信息：

```
<?php foreach($products['top_cats'] as $top_cat): // $top_cat ?>
    <h2><?php echo $top_cat['cat_name']; ?></h2>
    <?php if( ! empty($products['sub_cats'][$top_cat['cat_id']])): ?>
        <?php foreach($products['sub_cats'][$top_cat['cat_id']] as $sub_cat): ?>
            <h3><?php echo $sub_cat['name']; ?></h3>
            <!-- problem below -->
            <?php $this->load->view('products_table_v', $products[$sub_cat['id']][$n]); ?>
            <?php var_dump($n); ?>
        <?php endforeach; ?>
    <?php endif; ?>
<?php endforeach; ?> 
```

`$products[top_cats][14]`涉及`$products[sub_cats][14]`和`$products[sub_cats][14]`涉及`$products[products][14]`（我希望这是有道理的）。`$products[products][14]`因此，当我在 foreach for 中时，我需要传递给视图`$products[sub_cats][14]`（再次，我希望这是有道理的？）...

我的问题是我需要将正确的 sub-sub(-sub) 数组传递给子视图（其中包含一个良好的工作 foreach 循环）。我无法理解如何为数组提供子视图（我已经把代码弄瞎了）。

请帮忙。

```
Array
(
    [top_cats] =&gt; Array
        (
            [14] =&gt; Array
                (
                    [cat_id] =&gt; 14
                    [cat_name] =&gt; Alcopops
                    [cat_desc] =&gt; 
                    [cat_featured] =&gt; n
                    [cat_parent_id] =&gt; 
                    [cat_sort_order] =&gt; 
                    [category_active] =&gt; y
                )

            [2] =&gt; Array
                (
                    [cat_id] =&gt; 2
                    [cat_name] =&gt; Beers and Lagers
                    [cat_desc] =&gt; <p>hh</p>
                    [cat_featured] =&gt; n
                    [cat_parent_id] =&gt; 0
                    [cat_sort_order] =&gt; 
                    [category_active] =&gt; y
                )

            [79] =&gt; Array
                (
                    [cat_id] =&gt; 79
                    [cat_name] =&gt; Household
                    [cat_desc] =&gt; 
                    [cat_featured] =&gt; n
                    [cat_parent_id] =&gt; 
                    [cat_sort_order] =&gt; 
                    [category_active] =&gt; y
                )

            [5] =&gt; Array
                (
                    [cat_id] =&gt; 5
                    [cat_name] =&gt; Soft Drinks
                    [cat_desc] =&gt; 
                    [cat_featured] =&gt; n
                    [cat_parent_id] =&gt; 
                    [cat_sort_order] =&gt; 
                    [category_active] =&gt; y
                )

            [4] =&gt; Array
                (
                    [cat_id] =&gt; 4
                    [cat_name] =&gt; Spirits
                    [cat_desc] =&gt; 
                    [cat_featured] =&gt; n
                    [cat_parent_id] =&gt; 
                    [cat_sort_order] =&gt; 
                    [category_active] =&gt; y
                )

            [3] =&gt; Array
                (
                    [cat_id] =&gt; 3
                    [cat_name] =&gt; Wines
                    [cat_desc] =&gt; 
                    [cat_featured] =&gt; n
                    [cat_parent_id] =&gt; 
                    [cat_sort_order] =&gt; 
                    [category_active] =&gt; y
                )

        )

    [sub_cats] =&gt; Array
        (
            [3] =&gt; Array
                (
                    [25] =&gt; Array
                        (
                            [id] =&gt; 25
                            [name] =&gt; Champagne and Sparkling Wines
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 3
                        )

                    [22] =&gt; Array
                        (
                            [id] =&gt; 22
                            [name] =&gt; Australian Wines
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 3
                        )

                )

            [14] =&gt; Array
                (
                    [30] =&gt; Array
                        (
                            [id] =&gt; 30
                            [name] =&gt; White Rum
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 4
                        )

                    [32] =&gt; Array
                        (
                            [id] =&gt; 32
                            [name] =&gt; Liquers
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 4
                        )

                )

            [2] =&gt; Array
                (
                    [8] =&gt; Array
                        (
                            [id] =&gt; 8
                            [name] =&gt; Canned Lager
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 2
                        )

                    [12] =&gt; Array
                        (
                            [id] =&gt; 12
                            [name] =&gt; Bottled Beer
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 2
                        )

                    [10] =&gt; Array
                        (
                            [id] =&gt; 10
                            [name] =&gt; Bitter Cans
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 2
                        )

                    [7] =&gt; Array
                        (
                            [id] =&gt; 7
                            [name] =&gt; Super Beers
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 2
                        )

                    [13] =&gt; Array
                        (
                            [id] =&gt; 13
                            [name] =&gt; Cider
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 2
                        )

                    [9] =&gt; Array
                        (
                            [id] =&gt; 9
                            [name] =&gt; Stout
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 2
                        )

                )

            [] =&gt; Array
                (
                    [5] =&gt; Array
                        (
                            [id] =&gt; 5
                            [name] =&gt; Soft Drinks
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 
                        )

                    [79] =&gt; Array
                        (
                            [id] =&gt; 79
                            [name] =&gt; Household
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 
                        )

                    [14] =&gt; Array
                        (
                            [id] =&gt; 14
                            [name] =&gt; Alcopops
                            [desc] =&gt; 
                            [cat_parent_id] =&gt; 
                        )

                )

        )

    [products] =&gt; Array
        (
            [25] =&gt; Array
                (
                    [1347] =&gt; Array
                        (
                            [product_id] =&gt; 1347
                            [category_id] =&gt; 25
                            [name] =&gt; Asti Spumante Martini
                            [description] =&gt; 
                            [source_price] =&gt; 29.00
                            [source_pack_size] =&gt; 6
                            [source_item_size] =&gt; 75.00
                            [source_unit_id] =&gt; 2
                            [resale_price] =&gt; 7.00
                            [resale_pack_size] =&gt; 1
                            [percentage_return] =&gt; 22.59
                            [product_code] =&gt; WNAS001
                            [product_image] =&gt; 1347_.jpg
                            [current_stock] =&gt; 5
                            [stock_level_id] =&gt; 0
                            [featured] =&gt; y
                            [active] =&gt; y
                            [so_member_of_group_id] =&gt; 0
                            [discount_amount] =&gt; 3.50
                            [created_at] =&gt; 2009-07-22 10:21:57
                            [modified_at] =&gt; 
                            [product_unit_id] =&gt; 2
                            [unit_name] =&gt; Centilitre
                            [unit_symbol] =&gt; cl
                            [stock_levels_id] =&gt; 
                            [stock_levels_name] =&gt; 
                            [cat_id] =&gt; 25
                            [cat_name] =&gt; Champagne and Sparkling Wines
                            [cat_desc] =&gt; 
                            [cat_featured] =&gt; n
                            [cat_parent_id] =&gt; 3
                            [cat_sort_order] =&gt; 
                            [category_active] =&gt; y
                        )

                    [1566] =&gt; Array
                        (
                            [product_id] =&gt; 1566
                            [category_id] =&gt; 25
                            [name] =&gt; Blossom Hill Zinfandel Sparkling
                            [description] =&gt; 
                            [source_price] =&gt; 29.99
                            [source_pack_size] =&gt; 6
                            [source_item_size] =&gt; 70.00
                            [source_unit_id] =&gt; 2
                            [resale_price] =&gt; 8.49
                            [resale_pack_size] =&gt; 1
                            [percentage_return] =&gt; 29.35
                            [product_code] =&gt; WNBH010
                            [product_image] =&gt; 
                            [current_stock] =&gt; 30
                            [stock_level_id] =&gt; 
                            [featured] =&gt; n
                            [active] =&gt; y
                            [so_member_of_group_id] =&gt; 
                            [discount_amount] =&gt; 0.00
                            [created_at] =&gt; 2011-03-21 10:35:47
                            [modified_at] =&gt; 
                            [product_unit_id] =&gt; 2
                            [unit_name] =&gt; Centilitre
                            [unit_symbol] =&gt; cl
                            [stock_levels_id] =&gt; 
                            [stock_levels_name] =&gt; 
                            [cat_id] =&gt; 25
                            [cat_name] =&gt; Champagne and Sparkling Wines
                            [cat_desc] =&gt; 
                            [cat_featured] =&gt; n
                            [cat_parent_id] =&gt; 3
                            [cat_sort_order] =&gt; 
                            [category_active] =&gt; y
                        )

                )

            [22] =&gt; Array
                (
                    [1020] =&gt; Array
                        (
                            [product_id] =&gt; 1020
                            [category_id] =&gt; 22
                            [name] =&gt; Auction House Cabernet Sauvignon Merlot (Aus)
                            [description] =&gt; 
                            [source_price] =&gt; 20.00
                            [source_pack_size] =&gt; 6
                            [source_item_size] =&gt; 75.00
                            [source_unit_id] =&gt; 2
                            [resale_price] =&gt; 5.00
                            [resale_pack_size] =&gt; 1
                            [percentage_return] =&gt; 27.18
                            [product_code] =&gt; WNAH008
                            [product_image] =&gt; 1020_.jpg
                            [current_stock] =&gt; 35
                            [stock_level_id] =&gt; 0
                            [featured] =&gt; y
                            [active] =&gt; y
                            [so_member_of_group_id] =&gt; 0
                            [discount_amount] =&gt; 0.75
                            [created_at] =&gt; 2008-03-10 14:56:16
                            [modified_at] =&gt; 
                            [product_unit_id] =&gt; 2
                            [unit_name] =&gt; Centilitre
                            [unit_symbol] =&gt; cl
                            [stock_levels_id] =&gt; 
                            [stock_levels_name] =&gt; 
                            [cat_id] =&gt; 22
                            [cat_name] =&gt; Australian Wines
                            [cat_desc] =&gt; 
                            [cat_featured] =&gt; n
                            [cat_parent_id] =&gt; 3
                            [cat_sort_order] =&gt; 
                            [category_active] =&gt; y
                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:11:24.743

```
foreach($products['top_cats'] as $top_cat): // $top_cat ?>
    <h2><?php echo $top_cat['cat_name']; ?></h2>
    <?php if( ! empty($products['sub_cats'][$top_cat['cat_id']])): ?>
        <?php foreach($products['sub_cats'][$top_cat['cat_id']] as $sub_cat): ?>
            <h3><?php echo $sub_cat['name']; ?></h3>

            // Replaced bit
            <?php if( ! empty($products['products'][$sub_cat['id']])): ?>
                <?php $this->load->view('products_table_v', $products['products'][$sub_cat['id']]); ?>
            <?php endif; ?>

        <?php endforeach; ?>
    <?php endif; ?>
<?php endforeach; ?> 
```

# ruby-on-rails - Rails 3 中的视图可以使用哪些方法和变量？

> ID：10506428
> 
> 赞同：0
> 
> 时间：2012-05-08T21:00:02.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我有一个关于 Rails 的问题。Rails 中视图可用的变量和方法有哪些？今天我遇到了一个问题，在处理现有项目时，我们的`my_model_helper.rb`文件中缺少一个方法。我什至不知道 a 中的方法`_helper.rb`可用。

例如，我知道控制器中的任何实例变量都可以从视图中获得，但这是我知识的限制。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:18:13.093

您已经命名了视图中可用的内容：控制器和助手中定义的实例变量。Helpers 可以在`_helper.rb`-files 和控制器内部定义为常规方法，但您必须用`helper_method`( [link](http://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html#method-i-helper_method) ) 标记它们。

当然，其中定义的方法`_helper.rb`在任何视图中都可用，但控制器的助手仅可用于使用此控制器呈现的视图。

我希望您已经了解`params`、`request`、`response`和`session`其他访问/操作用户请求/响应状态的核心方法。

# desire2learn - 图书馆部分的 Desire2Learn Valence API

> ID：10506435
> 
> 赞同：1
> 
> 时间：2012-05-08T21:00:33.890
> 
> 标签：desire2learn

是否有可用于检查给定问题库部分名称是否存在的 Valence API 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:13:10.787

目前 Valence 中没有与问题库或测验相关的 API。

# regex - 为什么这个 scala 正则表达式匹配失败？

> ID：10506438
> 
> 赞同：1
> 
> 时间：2012-05-08T21:00:47.087
> 
> 标签：regex, scala

我有以下简单的应用程序：

```
object TestPatternMatch extends App {

  if (args.length != 1)
    throw new IllegalArgumentException("takes one argument which is a regex string that will be used to limit the org deletion")

  val pattern = args(0).r
  println("looking for orgs with name matching regex: " + pattern)

  val orgs = Seq("zephyr-test-123", "abcdef", "zephyr-test-xyz-xyz-xyz")

  orgs.foreach {
    _ match {
      case pattern(x) ⇒ println("matched " + x)
      case y          ⇒ println("failed to match " + y)
    }
  }
} 
```

当我像下面这样称呼它时，我期待在第一个和第三个组织上匹配。我错过了什么？

```
[info] Running TestPatternMatch zephyr-test-.*
looking for orgs with name matching regex: zephyr-test-.*
failed to match zephyr-test-123
failed to match abcdef
failed to match zephyr-test-xyz-xyz-xyz 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T21:03:26.697

您的模式不包含`()`匹配组所需的`x`.

```
val R0 = "zephyr-test-.*".r
val R0() = "zephyr-test-123"    // matches, with no assignments
val R0(x) = "zephyr-test-123"   // MatchError, nothing to bind `x` to

val R1 = "zephyr-test-(.*)".r
val R1(x) = "zephyr-test-123"   // matches, x = "123" 
```

# seo - 谷歌机器人提交随机 GET 参数

> ID：10506445
> 
> 赞同：2
> 
> 时间：2012-05-08T21:01:09.080
> 
> 标签：seo, googlebot

出于某种原因，Google bot 似乎经常访问我的动态页面之一，将 %2letter% 发送到 get 参数，即。%zy%、%zn%、%xp%、%yu% 等。

我的访问日志充满了数千个这样的条目，其中 Google 机器人正在搜索 2 个字母的各种组合，一些组合被发送了很多次。这是什么行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:15:06.123

可能是您的网站正在被虚假的 google bot 索引。这是包含更多信息的网站： http: [//stopmalvertising.com/security/fake-google-bots.html](http://stopmalvertising.com/security/fake-google-bots.html)。

另外，请查看以下文章：[如何验证 Googlebot](http://googlewebmastercentral.blogspot.com/2006/09/how-to-verify-googlebot.html)。

# html - css绝对输入div位置

> ID：10506446
> 
> 赞同：0
> 
> 时间：2012-05-08T21:01:09.330
> 
> 标签：html, css, position

我有一个文本框容器 div ( `div.tb`) `position:relative`，其中包含输入和占位符 div，它们都有`position:absolute`.

问题是输入文本垂直居中，但占位符文本未垂直居中。

所以我需要占位符文本垂直居中，就像输入一样。

HTML：

```
<div class="tb">
    <div class="placeholder">username</div>
    <input type="text" name="tb-username" />
</div> 
```

CSS：

```
.tb{
    position: relative;
    height: 28px;
    border: 1px solid #CCCCCC;
    background-color: #FFFFFF;
}

.tb input, .tb .placeholder{
    position: absolute;
    top: 0px;
    left: 0px;
    right: 0px;
    bottom: 0px;
    height: 28px;
} 
```

使用最新的 Chrome for Mac Os X 测试

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:11:24.743

尝试更改占位符文本的行高。我没有看到您在做什么，但这应该可以解决问题。（将行高设置为等于您的输入高度。希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:18:24.860

如果你只需要支持 Chrome & FF & IE 8+ 那么

以下CSS将有所帮助：

```
display: table-cell; vertical-align: middle; 
```

还请查看以下实现相同的不同方法

[如何为所有浏览器垂直居中 div？](https://stackoverflow.com/questions/396145/whats-the-best-way-of-centering-a-div-vertically-with-css)

# bing-maps - 使用 Bing 地图检测鼠标右键

> ID：10506449
> 
> 赞同：1
> 
> 时间：2012-05-08T21:01:16.520
> 
> 标签：bing-maps

我正在尝试在 Bing 地图上单击鼠标右键。我得到的只是浏览器上下文菜单（我想禁用它）。如何修改以下代码以使鼠标右键单击起作用？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
    <script type="text/javascript">

        var map = null;

        function GetMap() {
            // Initialize the map
            map = new Microsoft.Maps.Map(document.getElementById("myMap"),
                         { credentials: "MyApiKey" });

            //Add handler for the map click event.
            Microsoft.Maps.Events.addHandler(map, 'click', function (e) {
                alert('click');
                if (e.isSecondary)
                    alert('rightclick');
            });
        }
    </script>
</head>
<body onload="GetMap();">
    <div id='myMap'>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:39:42.383

假设您使用的是 v7，您可以在地图上注册一个[右键单击事件：](http://msdn.microsoft.com/en-us/library/gg427609.aspx)

```
 Microsoft.Maps.Events.addHandler(map, 'rightclick', function(e) {
        alert('click');
        if (e.isSecondary)
            alert('rightclick');
    }); 
```

要禁用浏览器上下文菜单，这里已经回答了这个问题：

[必应地图 V7 上下文菜单](https://stackoverflow.com/questions/8648694/bing-maps-v7-context-menu)

相关部分重新粘贴如下：

```
<body oncontextmenu="return false">
...
</body> 
```

# mysql - 添加到 LEFT JOIN 查询

> ID：10506454
> 
> 赞同：1
> 
> 时间：2012-05-08T21:01:42.173
> 
> 标签：mysql

嗨，我需要帮助添加一个新的 CLAUSE，这对我来说非常先进，我无法弄清楚。//使用`ect.author_id`查询 exp_channel_titles 表 author_id 列并扫描这些行以获得最终结果。由 IF ect.status = 'Members-id5' AND ect.status = 'complete'... 确定，然后使用带有 Members-id5 的行作为 ect.entry_id。我的问题是我该怎么做？我标记了我假设新 CLAUSE 甚至查询会去的地方，但我可能是错的。

我的问题是最多有 5 个不同的 ect.entry_id 所以我试图用 status = Members_id5 隔离行中的一个，但前提是 status = complete 也存在。这似乎是我必须在 PHP 中用数组做的任何想法？

```
 SELECT
             ect.entry_id
        ,    ect.author_id
        ,    ect.title
        ,    ect.status
        ,    ecd.field_id_13
        ,    ecd.field_id_14
        ,    ecd.field_id_15
        ,    ecd.field_id_25
        ,    ecd.field_id_27
        ,    ecd.field_id_28
        ,    ecd.field_id_29
        ,    ecd.field_id_30
        ,    ecd.field_id_31
        ,    ecd.field_id_32
        ,    ecd.field_id_33
        ,    ecd.field_id_34
        ,    ecd.field_id_35
        ,    exm.email
    FROM exp_channel_titles as ect
    LEFT JOIN exp_channel_data as ecd
      ON ecd.entry_id = ect.entry_id
    LEFT JOIN exp_members as exm
      ON exm.member_id = ect.author_id

// new CLAUSE

    WHERE ect.title LIKE '%Member%'
    AND ect.status = 'Members-id5' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:53:01.163

如果我正确理解您的问题，您只想返回`exp_channel_titles`status = "Members-id5" 但其 author_id 存在另一条状态为“Complete”的记录的记录。

如果我有这个权利，我相信你只需要在桌子上再次加入（INNER JOIN，而不是 LEFT（外）JOIN）：

```
JOIN exp_channel_titles as ect_status ON ect.author_id = ect_status.author_id AND ect.status = 'complete' 
```

添加到现有查询的该子句应仅返回`exp_channel_titles`状态为“Members-id5”但具有匹配记录且状态为“完成”的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:32:05.337

根据您的评论，听起来您想找到有一条记录 where ect.status = "Members-id5" 和另一条记录 where ect.status = "complete" 的个人。然后，您希望 SELECT 查询仅适用于这些人。您可以使用 WHERE 子句中的两个子查询来做到这一点。像这样的东西：

```
WHERE ect.title LIKE '%Member%'
AND ect.author_id IN 
     (select author_id from exp_channel_titles where ect.status = "Members-id5")
AND ect.author_id IN
     (select author_id from exp_channel_titles where ect.status = "complete") 
```

第一个子查询生成所有作者 ID 的列表，这些 ID 中至少有一条带有“Members-id5”的记录，IN 子句检查当前正在考虑的作者 ID 是否是其中之一。第二个对具有“完整”记录的所有作者 ID 的列表执行相同操作。如果这两个条件都为真，那么这意味着该个人是您想要返回其记录的人。

我不熟悉您的数据结构，因此这可能不是您需要的确切代码（特别是 ect.author_id 可能实际上不是要比较的字段），但希望这能给您带来想法。

# java - Java日期计数

> ID：10506455
> 
> 赞同：-4
> 
> 时间：2012-05-08T21:01:49.300
> 
> 标签：java

我需要使用 java.util.Date、java.util.Calendar 和 java.text.SimpleDateFormat 计算两个日期之间经过的天数。我脑子坏了，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:49:02.167

这似乎是一个面试问题，在两个月前的一次面试中向我提出了类似的问题。

好吧，这里有另一个提示：你有两个约会。Java 为您提供每个日期的毫秒时间。说 t1 和 t2。

不失一般性，我们可以假设 t1>t2。现在 t = t1-t2

将 t 除以 86400 * 1000 （一天中的毫秒数），这就是你的答案:)

# wordpress - wordpress - 如何检查一个类别是否是另一个类别的子类别？

> ID：10506456
> 
> 赞同：0
> 
> 时间：2012-05-08T21:01:50.830
> 
> 标签：wordpress

我正在寻找一个`WordPress`函数来检查一个类别是否是另一个类别的子类别，例如`cat_is_ancestor_of()`.

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:20:17.280

你可以试试这个

```
function category_has_parent($catid){
    $category = get_category($catid);
    if ($category->category_parent > 0){
        return true;
    }
    return false;
} 
```

如下使用它

```
if(category_has_parent('5')) // 5 is the category id
{
    echo "it has a parent !";
} 
```

# javascript - 获取 touchmove 或 touchend 结束的当前 DOM 对象

> ID：10506463
> 
> 赞同：8
> 
> 时间：2012-05-08T21:02:13.327
> 
> 标签：javascript, dom, javascript-events

正如 Mozilla 在[TouchEvent](https://developer.mozilla.org/en/DOM/TouchEvent)页面上所说：

> 事件的目标是接收到与触摸点对应的 touchstart 事件的同一元素，即使触摸点已移出该元素。

这与 mousemove 和 mouseup 不同，后者的目标实际上是鼠标所在的 DOM 元素。

在不使用任何库的情况下，获取我的`touchmove`或`touchend`事件发生的元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T21:04:50.890

从事件对象中读取坐标 ([`pageX`](https://developer.mozilla.org/en/DOM/event.pageX)和)。[`pageY`](https://developer.mozilla.org/en/DOM/event.pageY)然后用于[`document.elementFromPoint(x, y)`](https://developer.mozilla.org/en/DOM/document.elementFromPoint)获取该位置的顶部元素。

# groovy - Groovy - 将列表扩展为闭包参数

> ID：10506473
> 
> 赞同：7
> 
> 时间：2012-05-08T21:02:59.347
> 
> 标签：groovy, closures, dynamic-programming

是否可以有一个列表并将其用作闭包签名的参数，而不是几个变量？原因是我必须从 java 代码中调用闭包，而 java 代码不知道 groovy 闭包需要哪些变量。

最好举个例子。

假设我有一个“闭包存储库”，每个闭包可能有不同的签名。例如：

```
closures = [
    closureA: { int a, String b ->
        a.times {
            System.err.println(b);
        }
    },
    closureB: { int a, int b, String c ->
        (a+b).times {
            System.err.println(c);
        }
    }
] 
```

然后我有一个方法可以暴露给我的 java 代码来调用这些闭包：

```
def tryClosureExpansion(String whichClosure, Object ... args) {
    def c = closures[whichClosure]
    c.call(args)     // DOESNT COMPILE !
} 
```

它是Java，我会这样称呼这个方法：

```
// these calls will happen from Java, not from Groovy
tryClosureExpansion("closureA", 1, "Hello");
tryClosureExpansion("closureB", 1, 5, "Hello more"); 
```

请参阅上面无法编译的行。我觉得 groovy 足够“groovy”来处理这样的事情。有什么可以飞的替代品吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T21:08:05.520

做：

```
c.call( *args ) 
```

工作？不在电脑自动取款机上测试它

# c - C 中的 JSON 解析器（打印 JSON）

> ID：10506475
> 
> 赞同：0
> 
> 时间：2012-05-08T21:03:06.363
> 
> 标签：c, json, printf

首先让我说我不是 C 方面的专家。我一直在审查 JSON 解析器的代码。

我试图理解这段代码。

```
/* Render the cstring provided to an escaped version that can be printed. */
static char *print_string_ptr(const char *str)
{
    const char *ptr;
    char *ptr2,*out;
    int len=0;
    unsigned char token;

    if (!str)
        return cJSON_strdup("");
    ptr = str;
    while ((token = *ptr) && ++len) {
        if (strchr("\"\\\b\f\n\r\t", token))
            len++;
        else if (token < 32)
            len += 5;
        ptr++;
    }

    out = (char*)cJSON_malloc(len + 3);
    if (!out)
      return 0;

    ptr2 = out;
    ptr = str;
    *ptr2++ = '\"';
    while (*ptr) {
        if ((unsigned char)*ptr > 31 && *ptr != '\"' && *ptr != '\\')
            *ptr2++ = *ptr++;
        else {
            *ptr2++ = '\\';
            switch (token = *ptr++) {
                case '\\':      *ptr2++='\\';   break;
                case '\"':      *ptr2++='\"';   break;
                case '\b':      *ptr2++='b';    break;
                case '\f':      *ptr2++='f';    break;
                case '\n':      *ptr2++='n';    break;
                case '\r':      *ptr2++='r';    break;
                case '\t':      *ptr2++='t';    break;
                default:
                    /* escape and print */
                    sprintf(ptr2, "u%04x", token);
                    ptr2 += 5;
                    break;
            }
        }
    }
    *ptr2++ = '\"';
    *ptr2++ = 0;
    return out;
} 
```

对这段代码的实际工作方式进行一个非常概括的总结会非常棒，我的印象是它“美化”了 JSON 字符串，对吗？

乍一看，它似乎是用 r 代替 \r，但这样做有什么意义呢？

我一直在研究 sprintf 的功能，但只是针对简单的事情，例如打印货币值或其他格式问题。但我不知道 sprintf 函数在这里做什么：

```
sprintf(ptr2,"u%04x",token);ptr2+=5; 
```

ptr2+=5 的目的是什么？

对此的任何见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:11:48.900

`\n`这段代码所做的是用字符串中的转义序列（例如（两个字符`\\`和））替换不可打印的字符，例如 U+000A（换行符`n`）。

变量`ptr2`指向输出中的当前点，变量`ptr`指向正在写入输出的字符串中的当前点。

```
// Write "u" followed by a 4-digit hexadecimal number to the output
sprintf(ptr2,"u%04x",token);
// Advance the output pointer by five spaces
ptr2 += 5; 
```

通过对比，

```
*ptr2++ = 'r'; 
```

是相同的，

```
// Write "r" to the output
*ptr = 'r';
// Advance the output pointer one space
ptr++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:14:51.163

该函数正在转义字符串内容，而不是美化它 - 例如，它将回车符（ASCII 代码 13）转换为字符串`\r`，它在其代码等中转换其他不可打印的字符。

```
sprintf(ptr2,"u%04x",token); 
```

放入(the )`ptr2`的十六进制表示，用 s 填充为长度为四个字符 (the )，并以- 为前缀`token``x``0``04``u`

```
ptr2+=5; 
```

将`ptr2`指针移到刚刚由`sprintf`- 生成的字符串之后，即 5 个字符长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:16:59.803

它所做的是将控制字符转换为您通常在 C 源代码中使用的转义序列。

```
if ((unsigned char)*ptr>31 && *ptr!='\"' && *ptr!='\\') 
    *ptr2++=*ptr++; 
```

这基本上是在说“如果我们有一个普通字符，如字母、数字等，只需将其直接从输入复制到输出。”

```
 else
 {
     *ptr2++='\\'; 
```

否则，我们将在输出中生成一个以反斜杠开头的转义序列。

```
 switch (token=*ptr++)
     {
         case '\\':      *ptr2++='\\';   break;
         case '\"':      *ptr2++='\"';   break;
         case '\b':      *ptr2++='b';    break; 
```

然后，根据它找到的控制字符，它生成转义序列的第二个字符，因此输入中的实际“退格”字符（比较等于“\b”）将产生两个字符“\”和'b' 在输出中。

```
 case '\f':      *ptr2++='f';    break;
          case '\n':      *ptr2++='n';    break;
          case '\r':      *ptr2++='r';    break;
          case '\t':      *ptr2++='t';    break; 
```

换页、换行、回车和制表符也是如此。

```
 default: sprintf(ptr2,"u%04x",token);ptr2+=5;   break; 
```

否则，将控制字符渲染为十六进制，所以它变成类似`\1234`.

# mule - 异常模式是否适用于提交事务？

> ID：10506481
> 
> 赞同：1
> 
> 时间：2012-05-08T21:03:29.437
> 
> 标签：mule

标签`exception-pattern`上的属性是否有效？`commit-transaction`也就是说，在默认的异常策略中，我可以让它工作，

```
<commit-transaction exception-pattern="*"/> 
```

但不是这个：

```
<commit-transaction exception-pattern="some.specific.Exception"/> 
```

这是配置的相关片段：

```
<mule ...>
    <jms:activemq-connector name="JMSConnector" brokerURL="${messaging.brokerURL}" />
    <flow name="aFlow">
        <jms:inbound-endpoint name="endpoint.Name" queue="${queue}"
                              exchange-pattern="request-response"
                              connector-ref="JMSConnector" />
        <component>
            <spring-object bean="ThrowsBusinessException" />
        </component>

        <default-exception-strategy>
            <commit-transaction exception-pattern="com.BusinessException" />
        </default-exception-strategy>
    </flow>
</mule> 
```

如果我使用`exception-pattern="*"`，则不会重新传递 JMS 消息。但是，如果我使用更具体`exception-pattern`的 ，则会重新传递消息。如果抛出的异常是`BusinessException`.

这是在骡 CE 3.2.1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:36:47.293

核心问题如下：组件抛出的所有异常都包装在`org.mule.component.ComponentException`.

`default-exception-strategy`过去但现在无法将此异常解包为其根本原因，这意味着`exception-pattern`将应用于`org.mule.component.ComponentException`.

IMO 这是 Mule 中的一个错误。我已经打开了[MULE-6218](http://www.mulesoft.org/jira/browse/MULE-6218)。请投票/观看。

同时，您可以创建自定义异常策略，在处理 Mule 异常之前对其进行解包。为此，请使用：`ExceptionHelper.getRootException(ex)`

# .net - .NET 内存泄漏和最佳实践

> ID：10506483
> 
> 赞同：0
> 
> 时间：2012-05-08T21:03:38.630
> 
> 标签：.net, vb.net

在 Microsoft.NET (VB) 中编写函数以避免内存泄漏的最佳方法是什么。我一直遵循这种风格：

```
Public Sub TestMemoryLeak()
        Dim testCon As SqlConnection
        Try
            testCon = New SqlConnection
        Catch

        Finally
            If testCon.State = ConnectionState.Open Then
                testCon.Close()
            End If
            testCon = Nothing
        End Try
    End Sub 
```

这里连接引用在 TRY 子句之前创建，并在 TRY 子句之后初始化。我相信即使抛出异常，连接也总是关闭和取消引用。这是好习惯吗？我在 TRY 子句中看到很多创建引用和取消引用的代码，但这意味着如果抛出异常，则无法正确处理内存。一些开发人员说他们不喜欢在 finally 子句中进行清理。我不完全明白为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T21:04:44.367

您应该只使用以下`Using`语句：

```
Using testConn As New SqlConnection(...)
    ...
End Using 
```

这将编译为`Finally`在所有情况下都会处理的。

# php - 创建一个自定义页面来操作 elgg 上的数据

> ID：10506485
> 
> 赞同：0
> 
> 时间：2012-05-08T21:03:45.130
> 
> 标签：php, crud, elgg

我是 Elgg 开发的新手。到目前为止，我只是自定义了外观。但是现在我想要新的实体进行交互，其中一个是“组织”，另一个是“产品”。对于那些实体，我必须创建一个页面来注册新组织、更新和删除它。“产品”实体也是如此。

有可能吗？有没有办法创建一个页面（只有在用户有权限的情况下才能访问）和操作实体数据？有人有样品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:10:03.110

我建议查看一些 Elgg 的教程：

[http://docs.elgg.org/wiki/Tutorials](http://docs.elgg.org/wiki/Tutorials)

特别是这个：

[http://docs.elgg.org/wiki/Tutorials/Blog](http://docs.elgg.org/wiki/Tutorials/Blog)

您可以逐字遵循，但不要创建“博客”对象，而是创建“产品”对象，即：

```
...
$product = new ElggObject();
$product->subtype = "product";
$product->title = $title;
$product->description = $body;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:29:45.577

您可以在 Elgg 中轻松创建任何实体。检查上面提到的 Elgg 博客教程。此外，如果您在 Elgg 社区中提出这些问题会更好。

# actionscript-3 - 存储来自其他关键帧的实例坐标

> ID：10506487
> 
> 赞同：0
> 
> 时间：2012-05-08T21:03:50.793
> 
> 标签：actionscript-3, flash, keyframe

我要做的是从不同的关键帧中获取实例的坐标并将其存储，如果有多个关键帧，可能存储在数组中。

然后我希望能够在这些位置之间进行补间，可能使用 greensock 的 Tweenlite 类。

我在其他帖子中读到，在播放头位于特定帧之前，对象甚至实例在技术上都不存在。在这个对象存在之前，无论如何要获得这些坐标吗？可能通过在屏幕外创建一个单独的 DisplayObjectContainer 来播放这些帧并存储坐标。

我正在使用 Flash 5.5 和 AS3。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:34:59.813

你可以试试这样的。这假设您有一个每帧包含一个 MovieClip 的 MovieClip。

```
var current:int = 1;
var points:Array = new Array();

while(current < myMc.totalFrames){
     myMc.gotoAndStop(current);
     var child:MovieClip = myMc.getChildAt(0) as MovieClip;
     var p:Point = new Point();
     p.x = child.x;
     p.y = child.y;
     points.push(p);
     current++;
} 
```

# scala - 将“for”循环从 Java 重写为 Scala

> ID：10506490
> 
> 赞同：4
> 
> 时间：2012-05-08T21:04:01.857
> 
> 标签：scala, for-loop

我需要将一些 Java 代码转换为 Scala。我有这样的来源。如何在 Scala 中重写它？问题可能很简单。但它比文档中的 for(i <- 1 until 10) {} 示例更难匹配。

```
for (int i = password.length(); i != 0; i >>>=1)
  { some code } 
```

国王问候，阿列克谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T21:11:13.287

如果你希望它尽可能快——我假设这是给定 shift 操作的情况——那么你应该使用一个 while 循环：

```
var i = password.length()
while (i != 0) {
  // some code
  i >>>= 1
} 
```

在相同的操作下，这是 Java 比 Scala 更紧凑的少数情况之一。

您还可以使用尾递归：

```
final def passwordStuff(password: Password)(i: Int = password.length): Whatever = {
  if (i != 0) {
    // Some code
    passwordStuff(password)(i >>> 1)
  }
} 
```

这将编译成与 while 循环相同的速度（无论如何，几乎在所有情况下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T23:27:15.053

如果您寻求异国情调的功能方式，您可以编写如下内容：

```
Stream.iterate(password.length)(i => i >>> 1).takeWhile(0!=) 
```

它懒惰地执行以下操作：将密码长度作为初始值，应用于`{ => i >>> 1 }`它，将其传递给下一次迭代，应用......通过，......

然后我对计算进行了限定，将其限制为仅那些不等于 0 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:06:48.037

`i >>>=`1 等价`i /= 2`于正整数。

将这些知识与[Incrementing the for loop (loop variable) in scala by 5](https://stackoverflow.com/questions/4194075/incrementing-the-for-loop-loop-variable-in-scala-by-power-of-5)的答案相结合，您应该进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:36:26.317

不知道 >>>= 运算符。让我们尝试更实用一点，foreach 接受一个函数 A => Unit，在这种情况下 A 是 Int

```
def breakdownBy2(from:Int):List[Int] = if(from == 0) Nil else List(from) ++  breakdownBy2(from/2)
breakdownBy2(passoword.length).foreach(println(_)) 
```

# firefox - 在 emacs 中运行 browse-url 而不将焦点放在浏览器上

> ID：10506496
> 
> 赞同：3
> 
> 时间：2012-05-08T21:04:24.897
> 
> 标签：firefox, browser, emacs

`browse-url`当每次运行命令时（通过命令）在 Emacs 缓冲区中打开链接时，浏览器会优先考虑并从 Emacs 中窃取焦点。

我怎样才能改变这种行为？我想让firefox简单地在后台打开链接，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:34:00.257

当您使用 Firefox 时，它很可能`browse-url-firefox`是被调用的函数，并且您确实有一些配置默认参数的能力（请参阅文档字符串），但我在`firefox --help`.

然而，听起来`browser.tabs.loadDivertedInBackground`Firefox 中的设置控制了这种行为。访问它`about:config`并将其设置为`true`.

*   [http://www.techsupportalert.com/content/how-stop-firefox-stealing-window-focus.htm](http://www.techsupportalert.com/content/how-stop-firefox-stealing-window-focus.htm)
*   [http://labnol.blogspot.co.nz/2006/07/secret-firefox-trick-prevent-browser.html](http://labnol.blogspot.co.nz/2006/07/secret-firefox-trick-prevent-browser.html)

# java - 奇怪地方的 Java 注释

> ID：10506501
> 
> 赞同：3
> 
> 时间：2012-05-08T21:04:52.367
> 
> 标签：java, spring, annotations

浏览 spring 框架项目的源代码时，我遇到了一个看起来像这样的方法：

```
@RequestMapping("primitive")
public @ResponseBody String primitive(@RequestParam Integer value) {
    return "Converted primitive " + value;
} 
```

作为一个普通的java用户，我以前没有遇到过这个。据我所知，@ 符号在 java 注释之前，但方法签名本身似乎有注释。`@ResponseBody`和`@RequestParam`部分在做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T21:06:27.467

`@ResponseBody`实际上只是一个 Plain-Jane Method[注释](http://tutorials.jenkov.com/java-reflection/annotations.html#method)。您可以将它们放在 scope 关键字之后。

`@RequestParam`注释不是方法签名的一部分。这是一个[参数注释](http://tutorials.jenkov.com/java-reflection/annotations.html#parameter)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:11:39.463

这些注释是特定于 Spring 的，因此您需要深入了解 Spring 以了解所有注释及其含义。

每当我需要在 Spring 中学习新东西时，我总是会跳回文档：[http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)

如果您打算使用 Spring 进行企业开发，那么在您的生活中至少通读一遍整本书是件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T23:20:37.677

注释可以在 Java 代码中的许多地方添加。找出确切位置的一个好方法是查看[`@Target`](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/Target.html)元注释。此注解应用于其他注解，以向编译器描述对其有效的位置。无论如何，`@Target`注释需要一个 数组[`ElementType`](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/ElementType.html)，并且这个枚举具有应用注释的所有有效位置。

从 Java 6 开始，`ElementType`枚举包含以下值：

`ANNOTATION_TYPE`, `CONSTRUCTOR`, `FIELD`, `LOCAL_VARIABLE`, `METHOD`, `PACKAGE`,`PARAMETER`和`TYPE`

在您的示例中，`@RequestMapping`and`@ResponseBody`都是`METHOD`级别注释，即使它们没有应用在完全相同的位置（一个在方法范围修饰符之前和一个之后），并且`@RequestParam`是`PARAMETER`级别注释。

# math - 等距角和比例尺之间有什么联系？

> ID：10506502
> 
> 赞同：0
> 
> 时间：2012-05-08T21:04:53.920
> 
> 标签：math, projection, isometric

我正在尝试为自定义角度计算等距投影矩阵。在我使用的引擎中，有一个投影矩阵定义如下：

```
var project:Matrix = new Matrix();
projection.rotate(45 * (Math.PI / 180) );
scale = 1.4142137000082988; // not sure why this magic number is needed- now working on a "real" solution
projection.scale(scale * 1, scale * .5); 
```

（上面的语法是动作脚本，但这并不重要）我目前正试图了解[维基百科文章](http://en.wikipedia.org/wiki/Isometric_projection#Mathematics)。我看到 beta 角是 45，就像上面的矩阵一样，但我不明白“魔术”数字来自哪里，以及等距角和比例尺比 (1,1/2) 之间的联系。

如果我想使用自定义角度，如何计算出我使用的角度而不是 45 ？，比例值和比例是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:15:24.373

根据数学，它看起来像

```
scale = 1/cos(θ) 
```

或者

```
scale = 1/sin(θ) 
```

哪里`θ`是旋转的角度。

*   `45 * (Math.PI / 180)`转换`45°`为弧度 ( `π/4`)
*   `cos(π/4) = sin(π/4) = 0.7071067811865476`
*   `1/cos(π/4) = 1/sin(π/4) = 1.414213562373095`这就是你的神奇数字。

（自从我在 JavaScript 中运行这些快速计算以来的百万分之一的差异）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:50:54.827

只是为了保留观点，而不是其他。缩放不是实现等距正字法的必要条件。但是，当应用第一个旋转角度 (45 度) 时，图像会失去其原始比例。为了解决这个问题，图像通常按比例缩小。

等轴测投影是一种特殊类型的正交投影，其中每个轴均等表示并且轴之间的角度为 120 度。为此：绕水平轴旋转 45 度；然后围绕垂直轴旋转余弦 30 度的反正弦。所以，没有这样的自定义角度。该应用程序正在模拟具有非均匀比例变换的二次旋转。x 轴刻度保持初始 45 度旋转；然而，y 轴被缩短了 50%。基本上，尺度变换是实现二次旋转变换（arcsin(cos(30 * (PI/180)))）。

您所指的“幻数”是 45 度余弦的两倍。

# c# - C#从一个范围级别向下修改字符串数组

> ID：10506503
> 
> 赞同：2
> 
> 时间：2012-05-08T21:04:54.633
> 
> 标签：c#, arrays, if-statement, scope

我是 C# 的新手，但我知道我应该能够弄清楚这一点。我的搜索技巧也没有给我一个直接的答案。

我有两个存储在字符串数组中的应用程序设置（它们已从分隔列表中拆分出来）。

最终，我想根据两种设置运行一段代码。

条件是：

1.  如果数组 1 (domattributes) 中存在设置，请在每个设置值上运行代码。
2.  如果数组 2 (intlattributes) 中也存在设置，则对数组 1 或数组中包含的每个设置值运行代码
3.  下面是我尝试使用 if/else 语句构建字符串数组的方法，但它不起作用。

我得到错误

> 当前上下文中不存在名称“attributeIds”

我假设这是因为字符串数组实际上是在 if/else 语句中构建的，并且可能与尝试使用它的 foreach 方法处于不同的范围内。任何帮助，将不胜感激。这是代码：

```
if (!string.IsNullOrEmpty(DomAttributesSetting))
{
    if (!string.IsNullOrEmpty(IntlAttributesSetting))
    {
        string[] domattributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
        string[] intlattributeIds = IntlAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
        string[] attributeIds = new string[domattributeIds.Length + intlattributeIds.Length];
        Array.Copy(domattributeIds, attributeIds, domattributeIds.Length);
        Array.Copy(intlattributeIds, 0, attributeIds, domattributeIds.Length, intlattributeIds.Length);
    }
    else
    {
        string[] attributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
    }
    foreach (string attributeId in attributeIds)
    {
        PersonAttribute personAttribute = (PersonAttribute)person.Attributes.FindByID(int.Parse(attributeId));
        if (personAttribute == null)
        {
            personAttribute = new PersonAttribute(person.PersonID, int.Parse(attributeId));
        }... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T21:07:53.537

`attributeIds`您只需要声明**一次**，并且必须在语句之外`if`声明它，以便它对方法的其余部分可见。

试试这个：

```
string[] attributeIds;
if (!string.IsNullOrEmpty(IntlAttributesSetting))
{
    string[] domattributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
    string[] intlattributeIds = IntlAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
    attributeIds = new string[domattributeIds.Length + intlattributeIds.Length];
    Array.Copy(domattributeIds, attributeIds, domattributeIds.Length);
    Array.Copy(intlattributeIds, 0, attributeIds, domattributeIds.Length, intlattributeIds.Length);
}
else
{
    attributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
}

foreach (string attributeId in attributeIds)
{
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:09:14.587

如果 attributeIds 不在您的范围内，您可以将其放入您的范围内。在你的 if/else 之前，把这个

```
string[] attributeIds = null; 
```

然后，您可以在 foreach 循环中访问它，确保您只是分配给它并且不要尝试再次创建它

```
attributeIds = new string[domattributeIds.Length + intlattributeIds.Length]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:09:56.530

每当您在一对大括号 ( `{}`) 中声明一个变量时，它就在那个范围内——在它之外它是未知的。

这意味着您的`domattributeIds`,`intlattributeIds`和`attributeIds`变量仅在围绕它们的语句中是已知*的*（`if`并且您正在范围内创建*第二个* `attributeIds`变量`else`）。您需要在该范围之外声明它们才能在这些范围之外使用它们：

```
string[] attributeIds;

if (!string.IsNullOrEmpty(IntlAttributesSetting))
{
    ...
    attributeIds = new string[domattributeIds.Length + intlattributeIds.Length];
    ...
    Array.Copy(intlattributeIds, 0, attributeIds, domattributeIds.Length, intlattributeIds.Length);
}
else
{
    attributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:12:02.880

您在 if 语句中声明 attributeIds（并在 else 语句中再次声明）。为了在 if/else 范围之外访问该变量，请在父范围中声明它：

```
string[] attributeIds = null;
if (condition1) {
    attributeIds = ...
} else {
    attributeIds = ...
}

foreach (string attributeId in attributeIds) {
    ....
} 
```

# php - WordPress - 按自定义帖子类型和类别获取帖子，每个类别自动包含在 DIV 中

> ID：10506505
> 
> 赞同：1
> 
> 时间：2012-05-08T21:04:58.333
> 
> 标签：php, wordpress

抱歉，问题标题太长了。我试图准确。

我需要设计一个 WordPress 查询，它会自动从某个自定义帖子类型中获取帖子，检测每个帖子的分类方式，然后按类别将帖子输出到页面上，每个类别都包含在自己的 DIV 中。

例如，我有一个名为“地图数据”的自定义帖子类型。在此自定义帖子类型中，我有一个名为“类别”的层次分类法，在该分类法中，有许多类别，“类别 #1”、“类别 #2”等等。每个类别都有许多帖子。

因此，查询应该获取自定义帖子类型中所有类别的列表，然后输出如下内容：

```
<div id="category-1">
     <div class="post">This is a post in Category 1</div>
     <div class="post">This is another post in Category 1</div>
</div>
<div id="category-2">
     <div class="post">This is a post in Category 1</div>
     <div class="post">This is another post in Category 1</div>
</div> 
```

我有以下代码可以与默认的 WordPress 类别系统一起使用，但是，我需要重新编写它或更新它，以便它可以与自定义帖子类型及其分类一起使用。

```
<?php 
    $cat_args=array();
    $categories=get_categories($cat_args);
    foreach($categories as $category) {
        $args=array(
            'category__in' => array($category->term_id),
        );
    $posts=get_posts($args);
        if ($posts) {
            echo '<div class="cat" id="' . $category->slug.'" name="' . $category->name.'">';
            foreach($posts as $post) {
          setup_postdata($post); 
?>

<?php the_title();?>
<?php the_content();?>

<?php
        } // foreach($posts
        echo '</div>';
      } // if ($posts
    } // foreach($categories
?> 
```

如果有人可以提供更新的代码供我尝试，或者提供一个工作示例，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:41:06.843

我这样做了，它得到了所有分类法，但它可以很容易地修改以激活你尝试的内容

```
// for a given post type, return all
$post_type = 'shows';
$tax = 'show-topic';
$tax_terms = get_terms($tax, array('orderby' => 'id', 'order' => 'ASC', 'exclude' => '135, 49, 25, 24, 54'));
if ($tax_terms) {
    foreach ($tax_terms as $tax_term) {
        $args = array(
            'post_type' => $post_type,
            "$tax" => $tax_term->slug,
            'post_status' => 'publish',
            'posts_per_page' => - 1,
            'orderby' => 'title',
            'order' => 'ASC',
            'caller_get_posts' => 1
            ); // END $args
        $my_query = null;
        $my_query = new WP_Query($args);
        if ($my_query->have_posts()) {
            echo '<h3>' . $tax_term->name . '</h3>';
            while ($my_query->have_posts()) : $my_query->the_post();
            ?>
          <div class="post row" id="post-<?php the_ID(); ?>">
                    <div class="thumb-box three column">
                        <?php
            $src = wp_get_attachment_image_src(get_post_thumbnail_id());
            if (has_post_thumbnail()) {
                the_post_thumbnail();
            } else {
                if (get_post_meta($post->ID, "thumbnail", true)):
                    ?>
                                <a href="<?php the_permalink() ?>" rel="bookmark"><img src="<?php echo get_post_meta($post->ID, "thumbnail", true); ?>" alt="<?php the_title(); ?>" /></a>
                            <?php else: ?>
                                <a href="<?php the_permalink() ?>" rel="bookmark"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/insp-tv-small.png" alt="<?php the_title(); ?>" /></a>
                            <?php endif;
            }
            ?>
                    </div>
                    <div class="post-content nine columns">
                        <h4 class="posttitle archiveposttitle">
                            <a href="<?php the_permalink() ?>" rel="bookmark" title="<?php _e('Permanent Link to', 'buddypress') ?> <?php the_title_attribute(); ?>"><?php the_title(); ?></a>
                        </h4>
                        <div class="entry">
                            <?php the_excerpt(); ?>
                        </div>
                    </div>
                </div>
          <?php
            endwhile;
        } // END if have_posts loop
        wp_reset_query();
    } // END foreach $tax_terms
} // END if $tax_terms

?> 
```

# drupal - Webform Submit Button 的作用类似于 Reset 按钮

> ID：10506511
> 
> 赞同：0
> 
> 时间：2012-05-08T21:05:24.600
> 
> 标签：drupal, drupal-6, drupal-webform

我们在 Drupal 上设置了一个简单的网络表单：

[http://www.example.com/page](http://www.example.com/page)

有些用户可以毫无问题地提交它，而对于其他用户，当他们单击提交时表单会重置。没有明确的相关性，一位用户使用：我们测试过的 IE9 和 Windows 7，并且能够毫无问题地提交，但无论多次尝试，该用户都没有。

我们正在使用 6.x-3.14 drupal webform 模块，以防信息相关。

我们已经尝试禁用 javascript，但这并没有解决问题。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:15:20.133

我看到你有代码“form action="/volunteer-day-in-the-life"...” 没有通过提交虚假信息搞砸你的页面，你能解释一下当表单提交成功时你会在哪里结束? 是否有可能正在输入数据，但用户只是被发送回该页面，就好像它被刷新/重新加载一样，或者内容完全丢失了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:17:45.893

您需要更改模块上的设置。

```
<form action="/volunteer-day-in-the-life"  accept-charset="UTF-8" method="post" id="webform-client-form-19740" class="webform-client-form" enctype="multipart/form-data"> 
```

表单动作不应该是页面的来源，它只是提交给自己。我不知道你怎么能有成功的帖子，我马上就把它弄坏了。

# c# - 从下拉列表中获取价值

> ID：10506514
> 
> 赞同：1
> 
> 时间：2012-05-08T21:05:54.587
> 
> 标签：c#, ajax

我有 2 个下拉列表，ddl1 和 ddl2。我使用 javaScript，因此如果 ddl1 更改为特定值，则 ddl2 将被禁用并默认为其列表中的项目。这工作正常。

但是，当我单击回传到服务器的“添加”时，来自 ddl2 的值未设置为 JavaScript 设置的值。

如何使该值在服务器端可用？我假设我需要进行 AJAX 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:08:00.137

提交表单时不会发布禁用的表单字段。它们被视为不存在。您可以尝试通过 JavaScript 设置隐藏字段，然后在服务器端查找该字段。实际上，您可以将隐藏字段命名为与第二个下拉菜单相同的名称，但如果您再次启用下拉菜单，请不要忘记删除隐藏字段。

此外，正如评论中提到的，您可以将下拉菜单设为“只读”而不是“禁用”，它应该可以避免这个问题。

我希望这会有所帮助！

# android - 用 Fragment 模拟 PreferenceActivity

> ID：10506524
> 
> 赞同：1
> 
> 时间：2012-05-08T21:07:23.480
> 
> 标签：android, expandablelistview, fragment, preferenceactivity

我正在开发一个带有几个片段的 ViewPager，其中一个我希望它是一个“PreferenceActivity”问题是我使用的是 API7，所以没有 PreferencesFragment...我已经在寻找一种嵌入活动的方法(PreferencesActivity) 在一个 Fragment 中，并因缺少结果而放弃。所以我的下一步是在片段中“构建”偏好活动外观，所以我的问题是如何构建一个看起来就像偏好活动的界面，更具体地说是一个 listPreferences 看起来相似（带有文本标题和描述、图标、行为等）？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:55:02.590

不完全是 OP 正在寻找的答案，但是......

[过去几周我一直在研究非常相似的东西，发现除了手动扩展ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)或使用 ListView 构建布局之外，没有完美的解决方案，以最适合您的可重用性需求为准。然后只需在需要的地方实例化/扩展视图或布局。

遗憾的是，我们不能使用标准化的[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)片段，这会在具有多个设置（例如“常规设置”和“实例特定”设置（例如，考虑外部设备配置）时）防止主题和样式重复。例如，在后者中，在选项卡中使用根本不是坏习惯。但话又说回来，在这个“特定于实例”的屏幕上使用 PreferenceActivity 中的其他资源是不好的做法，所以我离题了......

# html - css/html 响应和视口缩放问题

> ID：10506528
> 
> 赞同：2
> 
> 时间：2012-05-08T21:07:34.010
> 
> 标签：html, xhtml, mobile-website, viewport, responsive-design

我使用带有元视口和 css3 媒体查询的 html 来使网站响应移动浏览器。它在黑莓上完美运行，但在 IOS 和 Android 设备上放大更多。它似乎使事情翻倍？我读到这与视口比例有关，但如果我把它缩小，那么它会在黑莓和其他一些设备上搞砸。我已经尝试了几天的搜索并尝试了很多东西，但我似乎无法弄清楚。我想做的一个例子是[http://www.dribbble.com/](http://www.dribbble.com/)如果有帮助的话。

有解决办法吗？你可以在这里查看网站[http://new.comedytime.tv/](http://new.comedytime.tv/)我使用的元视口是：

`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />`

感谢所有帮助！坦克！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:30:42.387

对于您的问题，我没有直接的解决方案，但我做了一些测试。我检查了我的 Android（FF Mobile，Android 4.0），它似乎以正确的缩放比例出现。这是主页顶部的快速截图：[https](https://dl.dropbox.com/u/71993227/2012-08-20_10-10-12.png) ://dl.dropbox.com/u/71993227/2012-08-20_10-10-12.png （你提到你也测试过，但只是想给你额外的反馈）。

据我所知，您的视口标签似乎是正确的，我在自己的网站上对其进行了测试，并且工作正常。

因为黑莓和其他一些设备太小了，你可能必须包含另一个只针对小屏幕的媒体查询，并为它们做一些 css 调整。希望这有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T17:12:04.720

尝试

```
 user-scalable = 0 
```

而不是

```
 user-scalable = no 
```

这应该适用于每个设备的分辨率。缩放被停用。

```
 <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /> 
```

使用 css 媒体查询来调整每个宽度和高度的显示。

# javascript - jQuery 中的 ASP 样式中继器

> ID：10506529
> 
> 赞同：1
> 
> 时间：2012-05-08T21:07:43.200
> 
> 标签：javascript, jquery, cordova

我正在尝试“循环”通过结果，例如以下 html 是使用 javascript 设置的。（在 Javascript 中解析 XML）但我不知道如何一次循环遍历多个变量。基本上我一直有姓氏循环并在一行中循环。

```
 <div class="files-box">
         <img class="replace-2x file-image" width="32" src="images/files/doc.png" alt="img">
             <p class="file-title" id="list">[SURNAME]</p>
             <a href="#" class="file-href file-open">[PHONE NUMBER]</a>
             <a href="#" class="file-href">[CALLLINK]</a>       
             <div class="clear"></div>
             </div>   
     </div> 
```

这是我的 Javascript

```
function onDeviceReady()
    {

        $.ajax({
               type: 'GET',
               url: 'Lookupbysurname.aspx?surname=beech',
               dataType: 'xml',
               success: function(xmlDoc) {
               var $xml = $(xmlDoc);
               $xml.find('Surname').each(function() {
                                           $("#list").append($(this).text());
                                           });
               }
               });

    }

    </script> 
```

基本上，我试图遍历 xml 结果（姓氏、电话号码和呼叫链接）并每次都重新创建上面的 html，并将 [SURNAME] 等变量替换为正确的结果。它在一个phonegap应用程序中

编辑：根据要求，下面是 XML 布局

```
<Results>
    <Result>
        <FirstName>Tom</FirstName>
        <Surname>Bedh</Surname>
        <Company>Company INC/Company>
        <Job_Title>Test Title</Job_Title>
        <callID>10582</callID>
        <CompanyID>10001</CompanyID>
    </Result>
</Results> 
```

这是当前布局中不断发生的事情

![在此处输入图像描述](../Images/12054094a60b77093bd6387e88127bfd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:11:24.953

尝试这样的事情。首先你需要改变你的 HTML 结构：

```
<div id="container">
<div class="files-box">
     <img class="replace-2x file-image" width="32" src="images/files/doc.png" alt="img">
     <p class="file-title surname">[SURNAME]</p>
     <a href="#" class="file-href file-open phone-number">[PHONE NUMBER]</a>
     <a href="#" class="file-href call-link">[CALLLINK]</a>       
     <div class="clear"></div>
</div>   
</div>
​ 
```

jQuery：

```
var $block = $('#container .files-box').remove();

$xml.find('Result').each(function() {
    var $result = $(this),
        $myblock = $block.clone();

    $myblock.find(".surname").text($result.find('Surname').text());
    $myblock.find(".phone-number").text($result.find('Phone').text());
    $myblock.find(".call-link").text($result.find('callID').text());
    $('#container').append($myblock);
});​ 
```

[http://jsfiddle.net/mblase75/aKJYZ/](http://jsfiddle.net/mblase75/aKJYZ/)

# c# - 如何跨页面处理自定义令牌

> ID：10506532
> 
> 赞同：0
> 
> 时间：2012-05-08T21:07:53.417
> 
> 标签：c#, javascript, asp.net

我有一个自定义登录，它返回一个加密的令牌，表示用户已登录。此令牌通过 QueryString 传递到另一个页面（Dash.aspx）。

Dash.aspx 从 QueryString 中获取令牌并将其发布到页面上的隐藏字段。Javascript 读取该值并将其保存在内存中。然后使用该令牌进行 Web 服务调用。当这些调用完成时，会返回一个新的 Token 值，并且 javascript 会存储该值（替换旧值）。

我想在登录后添加新页面以供访问。这些页面需要传递给它们的有效令牌。用户会从 Dash.aspx 移动到这些新页面之一并返回（因此母版页顶部只有几个不同的链接）

我不喜欢通过 QueryString 传递令牌。而且我不确定如何在页面更改可访问的地方更新令牌。如果可能的话，我想避免使用 Session 来存储和传递令牌

如何更谨慎地传递我的令牌并确保它始终传递最新的值？

我意识到这是一个相当广泛的问题，但我不知所措。我觉得可能有一些预先构建的想法可以处理这个问题，我只是不知道什么或如何使用它。

谢谢

**更新**

因此，要求提供一个示例：

第一步：用户登录->zholen/zholen123

*   调用服务来验证用户名和密码 -> 返回 Token ('ABC')
*   重定向到页面 Dash.aspx?token=ABC

第 2 步：Dash.aspx 从查询字符串中获取令牌并分配给页面上的隐藏字段

*   Javascript 对象从隐藏字段中获取令牌并在内部存储
*   JS 对象对各种服务进行多次异步调用，每个服务返回一个新的更新令牌，内部令牌更新为新值（**令牌每 30 分钟过期**）

* * *

期望的新步骤

第 3 步：从 Dash.aspx 移动到 Account.aspx

*   Account.aspx 需要有效的令牌才能加载
*   调用更多服务并更改Token

第 4 步：使用最新令牌从 Account 移动到 Dash.aspx

* * *

服务调用是通过 Web 服务 (asmx) 或通过页面方法进行的，具体取决于操作是否需要数据返回 (asmx) 或 html 返回（页面方法 -> 预填充数据的表）**或页面加载**

根据 Cookies 的建议，我认为可以在 C# 端的这些调用期间用新的令牌值重置 cookie，假设我可以从 ASMX 做那种事情并且整个事情的异步不会'不会引起问题。

此外，我可以使内部存储最新令牌的 JS 对象将该值放回隐藏字段，如果这有助于使其从 C# 端可访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:39:46.757

您可以使用 cookie...您可能希望使用中间加密，因为 cookie 可以从外部读取。

```
 //c#

        HttpCookie cookie = new HttpCookie("myTokenCookie");
        cookie.Value = tokenString;
        Response.SetCookie(cookie);

        // then get it back later
        s = Request.Cookies["myTokenCookie"].Value;

        // then you could write it into a hidden input for retrieval in JS 
```

# spring - 如何指示 JMSTemplate.receive() 应该使用 DurableSubscriber

> ID：10506538
> 
> 赞同：3
> 
> 时间：2012-05-08T21:08:08.090
> 
> 标签：spring, jms, spring-jms, ems

我想在不使用 xml 配置的情况下执行此操作。我正在玩弄 Spring JMS，看看它是否满足我的需求。无论如何使用

```
JmsTemplate jmsTemplate = new JmsTemplate(connectionFactory);
jmsTemplate.receive() 
```

使其等效于纯 JMS 调用：

```
MessageConsumer consumer = session.createDurableSubscriber(topic, "durable name");
Message message = consumer.receive(); 
```

不需要通过xml配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:17:47.153

试试这个，但你打算怎么称呼它？

> ```
>  //Create connection facotry ..in this case JndiObjectFactoryBean because i am looking up a JNDI
>   org.springframework.jndi.JndiObjectFactoryBean connectionFactory = new JndiObjectFactoryBean();
>   connectionFactory.setJndiName(jndiName);
>   connectionFactory.setJndiTemplate(jndiTemplate);
> 
>   org.springframework.jms.core.JmsTemplate template = new org.springframework.jms.core.JmsTemplate();
>   template.setConnectionFactory(connectionFactory)
>   template.setPubSubDomain(false);
> 
>   Message message = template.receive(); 
> ```

有关更多信息，请查看 [http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jms/core/JmsTemplate.html#receive%28%29](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jms/core/JmsTemplate.html#receive%28%29)

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jms.html#jms-receiving-sync](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jms.html#jms-receiving-sync)

# android - Android 按钮工具提示

> ID：10506543
> 
> 赞同：3
> 
> 时间：2012-05-08T21:08:30.843
> 
> 标签：android

![iOS 实现](../Images/9a306dae4e82a0305980aaee5502201f.png)

我是 Android 新手，我想知道是否可以有一个带有嵌入式工具提示的 Android 按钮元素？我想在按钮上有一个图像，按下时会打开某种对话框/提示信息覆盖。所以不是悬停工具提示，而是一个可点击的元素，它位于按钮点击位置以外的地方。如果有人可以指导我了解最佳实践，那就太好了！

```
<LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:gravity="center" 
    android:paddingLeft="5dip" 
    android:paddingRight="5dip">

    <Button android:id="@+id/settings_predefined_message_btn"
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"
        android:text="@string/settings_predefined_messages"
        android:background="@drawable/selector_longbutton_witharrow" 
        style="@style/ButtonTextStyle"
        android:layout_marginTop="10dip" 
        android:gravity="center" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:24:33.647

（作为对您关于在另一个之上设置视图的最后评论的回应。）

很简单，您可以像这样使用多个 LinearLayout：

```
<LinearLayout
    android:id="@+id/tab1"
    ... />

    <TextView
        android:text="Predefined Message"
        ... />

    <ImageButton
        ... />

</LinearLayout> 
```

您的 LinearLayout（可能还有 TextView）应该有一个 OnClickListener 来执行主要功能，ImageButton 将有第二个 OnClickListener 用于工具提示。

**或者**，您可以使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)将带有 OnClickListener 的工具提示 ImageButton 放置在具有自己的 OnClickListener 的 TextView 之上。

如果您愿意，您可以将这些自定义视图中的任何一个传递给 ActionBar 来为您构建选项卡。希望有帮助。

**添加**

一个（丑陋的！）RelativeLayout 示例：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="A long text sample"
        />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button1"
        android:layout_marginRight="10dp"
        android:text="i"
        />

</RelativeLayout> 
```

# iphone - 尝试下载大文件时的崩溃日志

> ID：10506550
> 
> 赞同：1
> 
> 时间：2012-05-08T21:09:18.903
> 
> 标签：iphone

我正在尝试从我们的服务器下载文件。我的代码基本上是这里列出的内容： [Downloading a large file in iOS app](https://stackoverflow.com/questions/10501890/downloading-a-large-file-in-ios-app)

它每次大约在一半时崩溃。当我查看控制台时，我看到：

```
May  8 13:48:53 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.test) Bug: launchd_core_logic.c:3732 (25562):3
May  8 13:48:53 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.test) Assuming job exited: <rdar://problem/5020256>: 10: No child processes
May  8 13:48:53 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.test) Job appears to have crashed: Segmentation fault: 11
May  8 13:48:53 unknown com.apple.debugserver-64[1541] <Warning>: 1 [0605/1303]: error: ::read ( 4, 0x2809d4, 1024 ) => -1 err = Bad file descriptor (0x00000009)
May  8 13:48:53 unknown SpringBoard[15] <Warning>: Application 'TestDev' exited abnormally with signal 11: Segmentation fault: 11
May  8 13:48:53 unknown ReportCrash[1555] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-05-08-134853.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
> 
May  8 13:50:53 unknown SpringBoard[15] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=0
May  8 13:50:53 unknown SpringBoard[15] <Notice>: MultitouchHID: detection mode: 0->255
May  8 13:50:53 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 1
May  8 13:50:54 unknown kernel[0] <Debug>: [000581.599475]: AppleDPDisplay::setLCDStateGated:(0x81d1eb40) Disabling
May  8 13:50:54 unknown kernel[0] <Debug>: [000000.000174]: AppleDPDisplay::terminateLink:(0x81d1eb40) Waited 0 ms for display to disable
May  8 13:50:54 unknown kernel[0] <Debug>: [000000.000025]: AppleDPDisplay::terminateLink:(0x81d1eb40) ret=0x00000000
May  8 13:50:54 unknown kernel[0] <Debug>: [000000.000759]: AppleDPDisplay::deviceTerminated:(0x81d1eb40) device=0x952a3a80
May  8 13:50:54 unknown kernel[0] <Debug>: [000000.000117]: AppleDPDisplay::setPower:(0x81d1eb40) enable=0 ret=0x00000000
May  8 13:50:54 unknown kernel[0] <Debug>: [000000.000024]: AppleDPDisplay::setLCDStateGated:(0x81d1eb40) enable=0 ret=0x00000000 
```

我有 NSZombieEnabled，但我什么也没看到。当我关闭它时，我会遇到同样的崩溃。

在日志中，我看到

```
Count   resident pages
152534 (jettisoned) 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:39:11.940

这似乎是苹果的错误。

Apple 工程师在源代码 launchd_core_logic (http://opensource.apple.com/source/launchd/launchd-392.36/launchd/src/launchd_core_logic.c) 中的评论：

```
 /* We have to work around one of two kernel bugs here. ptrace(3) may
         * have abducted the child away from us and reparented it to the tracing
         * process. If the process then exits, we still get NOTE_EXIT, but we
         * cannot reap it because the kernel may not have restored the true
         * parent/child relationship in time.
         *
         * See <rdar://problem/5020256>.
         *
         * The other bug is if the shutdown monitor has suspended a task and not
         * resumed it before exiting. In this case, the kernel will not clean up
         * after the shutdown monitor. It will, instead, leave the task
         * task suspended and not process any pending signals on the event loop
         * for the task.
         *
         * There are a variety of other kernel bugs that could prevent a process
         * from exiting, usually having to do with faulty hardware or talking to
         * misbehaving drivers that mark a thread as uninterruptible and
         * deadlock/hang before unmarking it as such. So we have to work around
         * that too.
         *
         * See <rdar://problem/9284889&9359725>.
         */ 
```

# hibernate - 当表具有 UUID 字段时，我可以使用 Hibernate 工具对 Postgresql 数据库进行反向工程吗？

> ID：10506555
> 
> 赞同：1
> 
> 时间：2012-05-08T21:10:05.087
> 
> 标签：hibernate, postgresql, hibernate-mapping, uuid, hibernate-tools

我想实现以下工作流程：我在 postgresql 9 中设计表，我使用 Eclipse Indigo 中的 Hibernate 工具为这些表生成 POJO，并且我希望 Hibernate 使用注释。使用 Eclipse Indigo、最新的 Postgresql JDBC 驱动程序、Java 1.6 和来自 Eclipse 市场的 Hibernate 工具，这不起作用。

逆向工程向导将表的 UUID 字段视为 OTHER，并生成类型为 Serializable 的字段，而不是 UUID。插入 POJOS 抱怨试图将 bytea 数据插入 UUID 字段。简单地说：如何使用休眠工具对 POJOS 进行逆向工程，以便自动处理 UUID？

这是生成的字段：

私有可序列化实例 ID；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:52:21.790

## 自定义用户类型

您需要使用自定义用户类型来告诉 Hibernate 如何将 UUID 列序列化和反序列化为 java 对象。这是我的（使用 Hibernate 3.6.8.Final）：

```
package your.package.usertype;

import java.io.Serializable;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;
import java.util.UUID;

import org.hibernate.HibernateException;
import org.hibernate.usertype.UserType;

public class UUIDType implements UserType {
    private final int[] sqlTypesSupported = new int[] { Types.NUMERIC };
    private final String CAST_EXCEPTION_TEXT = " cannot be cast to a java.util.UUID"; 

    public int[] sqlTypes() {
        return sqlTypesSupported;
    }

    @SuppressWarnings("rawtypes")
    public Class returnedClass() {
        return UUID.class;
    }

    public boolean equals(Object x, Object y) throws HibernateException {
        if (x == null) {
            return y == null;
        } else {
            return x.equals(y);
        }
    }

    public int hashCode(Object x) throws HibernateException {
        return x == null ? null : x.hashCode();
    }    

    public Object nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {
        assert(names.length == 1);
        Object value = rs.getObject(names[0]);
        if (value == null) {
            return null;
        }        

        UUID uuid = UUID.fromString( rs.getString( names[0] ) );
        return rs.wasNull() ? null : uuid;
    }

    public void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException, SQLException {
        if (value == null) {
            st.setNull(index, Types.NULL);
            return;
        } 

        if (!UUID.class.isAssignableFrom(value.getClass())) {
            throw new HibernateException(value.getClass().toString() + CAST_EXCEPTION_TEXT);
        }        

        UUID uuid = (UUID) value;
        st.setObject(index, uuid, Types.OTHER);
    }

    public Object deepCopy(Object value) throws HibernateException {
        if (value == null)
            return null;
        UUID uuid = (UUID) value;
        return new UUID( uuid.getMostSignificantBits(), uuid.getLeastSignificantBits() );
    }

    public boolean isMutable() {
        return false;
    }

    public Serializable disassemble(Object value) throws HibernateException {
        return (Serializable) value;
    }

    public Object assemble(Serializable cached, Object owner) throws HibernateException {
        return cached;
    }

    public Object replace(Object original, Object target, Object owner) throws HibernateException {
        return original;
    }
} 
```

## 休眠映射

您的 Hibernate 映射需要为 uuid 属性指定用户类型的类名：

```
<property name="uuid" type="your.package.usertype.UUIDType">
    <column name="uuid" not-null="true" />
</property> 
```

## 逆向工程

由于您使用的是代码生成，因此您需要告诉逆向工程过程将这些列映射到您的自定义 UUIDType 用户类型。通过将所有 OTHER 类型映射到 UUIDType（未经测试），您应该能够在 hibernate.reveng.xml 文件中执行此操作：

```
<type-mapping>
    <sql-type jdbc-type="OTHER" hibernate-type="your.package.usertype.UUIDType" />
</type-mapping> 
```

或通过指定特定的表/列：

```
<table name="your_table">
    <column name="uuid" type="your.package.usertype.UUIDType" />
</table> 
```

或者，您可以通过创建自己的 ReverseEngineeringStrategy 类来更好地控制逆向工程过程，而不是使用 hibernate.reveng.xml：

```
package your.package.reveng;

import org.hibernate.cfg.reveng.DelegatingReverseEngineeringStrategy;
import org.hibernate.cfg.reveng.ReverseEngineeringStrategy;
import org.hibernate.cfg.reveng.TableIdentifier;

public class CustomReverseEngineeringStrategy extends DelegatingReverseEngineeringStrategy {
    public CustomReverseEngineeringStrategy( ReverseEngineeringStrategy delegate ){
        super(delegate);
    }

    public String columnToHibernateTypeName( TableIdentifier table, String columnName, int sqlType, int length, int precision, int scale, boolean nullable, boolean generatedIdentifier ){
        if( table.getName().equals("your_table") && columnName.equals("uuid") ){
            return "your.package.usertype.UUIDType";
        } else {
            return super.columnToHibernateTypeName( table, columnName, sqlType, length, precision, scale, nullable, generatedIdentifier );
        }
    }
} 
```

**编辑：**看起来 org.hibernate.type.PostgresUUIDType 自 3.6.0.Beta1 以来就存在。您可能只能使用这种类型，但我认为您仍然必须在映射中指定它并直接进行逆向工程以将其用于所需的列。

# java - 如何将消息的发送和接收移动到服务器线程？

> ID：10506556
> 
> 赞同：1
> 
> 时间：2012-05-08T21:10:07.437
> 
> 标签：java, multithreading, network-programming

我有一个使用类 Game 的类`TCPServer`。我想将所有低级发送和接收分开`TCPServer`。所以我给出`TCPServer`了一个单独的线程来不断读取传入的消息。我想将这些消息返回给`Game`. 但我不知道该怎么做。`Game`还应该通过向客户端发送消息来对这些消息做出反应。

我认为/知道可以通过将线程从`TCPServer`to移动，`Game`但这是解决此问题的最佳方法吗？将两个类分开不是更好吗？

我有以下伪代码。

```
public class Game{
   TCPServer tcpServer = new TCPServer();

   public void execute(){
       // do something
       Object o = new Object;
       send(o);

       if(receive(o)){  // WRONG
          // do something with the receive object
       }
   }

   private void send(Object o){
      tcpServer.send(o);
   }

   private Object receive(Object o){
      return tcpServer.receive(o);
}

public class TCPServer extends Thread{
   private ServerSocket serverSocket;
   Socket client = new Socket;

   public void run(){
     Object o = receive();
     // How do I get this object o in the Server class in function execute()?
   }

   private Object receive(){
      return serverSocket.listen();

   }

   public void send(Object o){
      client.send(o);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:25:38.257

我认为正确的方法是使用`BlockingQueue`s. 而不是在当前线程中发送消息，`Game`只需将它们添加到`sendQueue`. 然后`TCPServer`将有一个接收线程将内容添加到该`readQueue`和另一个线程将内容从`sendQueue`该套接字写入。

我现在不太了解您的线程模型。通常，您有一个线程调用`accept()`a`ServerSocket`然后分叉一个客户端处理程序线程。如果`Game`要维护许多这些客户端连接，那么您将拥有以下内容：

1.  TCPServer 有一个线程调用`accept()`.
2.  当它获得连接时，会创建一个`ClientHandler`对象并将其添加到游戏正在处理的客户端集合中。
3.  每个`ClientHandler`都有一个`sendQueue`和`receivedQueue`——也许每个都是`LinkedBlockingQueue`
4.  每个`ClientHandler`分叉一个从客户端接收的读取线程并添加到 `receivedQueue`一个正在等待`sendQueue`并写入客户端套接字的写入线程。

要做到这一点，这里有很多工作要做。如何在客户端套接字关闭时正确关闭读取器和写入器线程将是一个挑战。

希望这里有帮助。

# c# - 使用相同功能的多个自定义验证器

> ID：10506557
> 
> 赞同：0
> 
> 时间：2012-05-08T21:10:23.083
> 
> 标签：c#, asp.net

我实现了一个通用逻辑客户端和服务器端，以便在多个自定义验证器中使用相同的功能。我目前正在测试它，但它只显示第一个失败的控件的错误消息，而不是其他控件。我可以将相同的函数传递给多个自定义验证器，还是需要为每个自定义验证器创建一个单独的函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:50:26.033

我自己解决了，如果你设置自定义验证器的 controlToValidate 属性，你会得到一个奇怪的行为。

# mysql - 如何在 MySQL 数据库中将某些地址标记为已发送？

> ID：10506559
> 
> 赞同：0
> 
> 时间：2012-05-08T21:10:28.167
> 
> 标签：mysql, sql, phpmyadmin

我有一个包含 70,000 个姓名、地址等的数据库。我还有一个包含 30,000 个地址的列表，这些地址已经发送到了订单。

现在我有以下 MySQL 语句：

```
UPDATE `order_requests`
  SET `exported_sent`='sent_2012_05_07'
WHERE `request_address` IN (SELECT `request_address` FROM sent_list) 
```

我觉得这应该可行，唯一的问题是涉及的查询太多以至于 phpMyAdmin 一直超时。不幸的是，我只能匹配 fname、lname、地址、zip 等内容，因为这两个表没有通过公共 id 或类似的东西链接。

PS。我正在编写一个 php 脚本，这样我就不必再次手动执行此操作，但我之前的人做错了，所以我正在解决问题！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:12:49.937

加入连接可能会快得多

```
UPDATE `order_requests` JOIN sent_list USING(request_address) SET `exported_sent`='sent_2012_05_07'; 
```

如果没有连接，MySQL 很可能会重新`SELECT request_address FROM sent_list`执行`order_requests`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:13:54.280

由于标准浏览器超时，phpMyAdmin 可能会超时。您是否尝试过通过命令行 MySQL 客户端运行查询？它不应受到相同的默认超时的影响。

# c# - 通过扩展实现 Linq 和无限递归

> ID：10506563
> 
> 赞同：1
> 
> 时间：2012-05-08T21:10:50.243
> 
> 标签：c#, linq, recursion

鉴于此答案： [https ://stackoverflow.com/a/4263048](https://stackoverflow.com/a/4263048)

哪个很好，我们如何确保 out 查询不会进入无限递归？

使用提供的示例类，如果框相互指向并且答案不存在，它会永远搜索吗？或者是 Linq“执行计划”的一部分，因为缺少实际的词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:14:06.077

不，它在第一次 yield return 时返回自己，并且只有在 box 的内容不为空时才会递归；所以当你得到一个空盒子时，递归就会展开。

FindBoxBySize 看起来匹配大小（来自找到的项目）或默认值。

# php - PHP 错误消息，Wordpress 主题

> ID：10506566
> 
> 赞同：0
> 
> 时间：2012-05-08T21:11:12.670
> 
> 标签：php, wordpress

我有一个博客：[http ://www.techonomic.com/](http://www.techonomic.com/)

我创建了自己的主题，移植到新主机后，尝试登录时收到以下消息：

> 警告：无法修改标头信息 - 标头已由 /customers/ 中的（输出开始于 /customers/c/5/c/techonomic.com/httpd.www/wp-content/themes/techonomic/functions.php:59）发送c/5/c/techonomic.com/httpd.www/wp-includes/functions.php 在第 861 行
> 
> 警告：无法修改标头信息 - 标头已由 /customers/ 中的（输出开始于 /customers/c/5/c/techonomic.com/httpd.www/wp-content/themes/techonomic/functions.php:59）发送c/5/c/techonomic.com/httpd.www/wp-includes/functions.php 在第 862 行

问题是，很难分辨这些行是什么，因为 funtions.php 只有大约 100 行长，但显然代码在执行时会使其更长。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:13:43.380

打开输出缓冲。您可能在新服务器上禁用了它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:19:26.617

打开文件`/customers/c/5/c/techonomic.com/httpd.www/wp-content/themes/techonomic/functions.php`，转到第 59 行，在发送标头之前找出输出数据的内容。它可能是失败的函数调用的错误消息，或者任何数量的过早输出数据的其他事物。

底线：在尝试更改 HTTP 标头之前，您**无法将任何数据输出到浏览器。**

# vb.net - 如何在检索数据时抑制 Essbase 的缩小行为？

> ID：10506574
> 
> 赞同：0
> 
> 时间：2012-05-08T21:11:40.930
> 
> 标签：vb.net, essbase

我编写了一些代码来从 Essbase 中提取数据。在检索数据之前，我放大其中一个单元格，然后运行代码以检索数据。但是，在成功检索数据后，它会缩小以仅显示顶级一代。检索后如何避免缩小？

```
 x = Essbase.EssVConnect(DirectCast("[" & Globals.ThisAddIn.Application.ActiveWorkbook.Name & "]" &   Globals.ThisAddIn.Application.ActiveSheet.Name, String), "user", "password", "server", "application", "database")

    Dim range As Excel.Range = Globals.ThisAddIn.Application.Range("ESSQRY_AT1")
    x = Essbase.EssVRetrieve(DirectCast("[" & Globals.ThisAddIn.Application.ActiveWorkbook.Name & "]" & Globals.ThisAddIn.Application.ActiveSheet.Name, String), range, 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:09:45.570

我认为您需要提供更多代码以查看发生了什么（例如，您发布的语句之前和之后的代码）。Essbase 将数据检索到一个新的网格对象中——您是否可能正在查看原始网格，这就是它看起来已被缩小的原因？

# ruby-on-rails - Rails 数据库默认值和布尔字段的模型验证

> ID：10506575
> 
> 赞同：30
> 
> 时间：2012-05-08T21:11:41.543
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

在 Rails 模型中，我有一个属性`is_subscriber`，当我构建一个 db 迁移以将此列添加到数据库时，我将默认值指定为 false：

```
t.boolean  "is_subscriber",   :default => false 
```

我还在模型中指定了这个属性需要存在：

```
validates :is_subscriber, presence: true 
```

那么，当我创建模型实例而不指定此属性时，为什么会出现此错误？

```
2012-05-08T21:05:54+00:00 app[web.1]: ActiveRecord::RecordInvalid (Validation failed: Is subscriber can't be blank): 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-08T21:18:08.180

从[这里](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000083)

> 如果要验证布尔字段的存在（其中真实值为真和假），您将需要使用 validates_inclusion_of :field_name, :in => [true, false] 这是由于 Object#blank? 处理布尔值。假的空白？# => 真

或以 Rails3 方式

```
validates :field, :inclusion => {:in => [true, false]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T15:12:14.067

我已经解决了这个问题：

```
validates_presence_of :is_subscriber, :if => 'is_subscriber.nil?' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T15:17:25.250

我认为将其包装在自定义验证器中会更整洁。

在`/app/validators/is_boolean_validator.rb`

```
class IsBooleanValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, parameters)
    if !parameters.in? [true,false]
      record.errors[attribute] << 'This must be true or false.'
    end
  end
end 
```

那么您必须通过将以下内容添加到`/config/application.rb`

```
config.autoload_paths += %W["#{config.root}/app/validators/"] 
```

（不要忘记重新启动服务器以加载它）

然后，您可以更整洁地验证

```
validates: :field1, field2, is_boolean: true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-22T19:50:42.880

```
validates :column_name, :inclusion => {:in => [true, false]} 
```

# java - Jsoup 连接和重试

> ID：10506577
> 
> 赞同：2
> 
> 时间：2012-05-08T21:11:47.497
> 
> 标签：java, connection, jsoup

我正在使用`JSoup`连接到一个网站。我有时会发现 `JSoup`连接超时，当这种情况发生时，我想 `JSoup`重试连接，当它第三次失败时，它将向数组列表添加一个字符串。

我目前的代码是：

```
try {
        Document doc = Jsoup.connect(sitemapPath)
                .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                .timeout(10000)
                .get();

        Elements element = doc.select("loc");
        return element;
    } catch (IOException e) {
        return null;
    } 
```

我正在考虑用 while 循环做一些事情，但我必须返回元素，所以我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T02:29:46.923

```
 ArrayList<String> l = new ArrayList();
    Document doc = null;
    int i = 0;
    boolean success = false;

    while( i < 3){
        try {
            doc = Jsoup.connect(sitemapPath).get();
            success = true;
            break;
        } catch (SocketTimeoutException ex){
            l.add("text...");               
        }
        catch (IOException e) {
        }           
        i++;
    }

    if(success){
        // Selector code ...
        Elements element = doc.select("loc");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-06T05:30:31.133

这是基于 Rodri_gore 回答的稍微简洁的版本。它使用 for 循环而不是 while 循环，并利用“doc”只有在循环在三个超时后正常退出时才会为 null 的事实。

之所以如此，是因为我**只**捕获了 SocketTimeoutException。如果我试图在同一个 try/catch 块中捕获其他异常，那么逻辑将不再成立。"doc" 可能为 null，因为发生了不同的异常。

顺便说一句，您可以使用[http://www.google.com:81/](http://www.google.com:81/)来**测试超时错误**。

```
 Document doc = null;

  for (int i = 1; i <= 3; i++) {
      try{
          doc = Jsoup.connect(url).get();
          break; // Break immediately if successful
      }
      catch (SocketTimeoutException e){
          // Swallow exception and try again
          logger.warn("jsoup Timeout occurred " + i + " time(s)");
      }                 
  }

  if (doc == null){
      // Timed out 3 times. Do whatever you want here.
  }
  else{
      // Do something with doc
  } 
```

我通常使用此代码创建一个实用程序方法，然后通过 url 或连接对象调用此方法。然后，我将该方法调用包装在 try catch 中，以处理 jsoup 可能抛出的所有其他异常。

# java - Java - 静态和最终变量

> ID：10506579
> 
> 赞同：1
> 
> 时间：2012-05-08T21:11:51.857
> 
> 标签：java, static, final

我知道这不起作用，但这只是一个例子，所以我可以理解为什么它不起作用。

```
public class MyClass {

    final static JButton b;

 public void myMethod() {
   b = new JButton("Hello!");
 }
 } 
```

1) 为什么线路有错误`final static JButton b;`？为什么当我删除`static`关键字时这个错误会消失？

2）有或没有`static`关键字，有一个错误的行`b = new JButton("Hello!");` 我想知道这是为什么？我认为可以在方法中实例化最终变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T21:14:42.513

当您将静态字段声明为 时`final`，必须在静态初始化程序块中或使用初始化程序表达式对其进行静态初始化。您不能在构造函数中对其进行初始化。

当您将非静态字段声明为 时`final`，它必须在每个构造函数中进行初始化，或者使用初始化表达式，或者在实例初始化块中进行初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:18:33.100

`final`仅允许立即或在构造函数中进行赋值。所以只允许以下内容。

```
class A {
    static final B b = new B();
    static final C c;
    static { // Static initializer block.
         c = new C();
    }
    final B b2 = new B();
    final C c2;
    { // Initializer block.
         c2 = new C();
    }
    final D d2;
    A() {
        d2 = new D();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:19:56.850

由于该字段`static final`需要使用类本身进行初始化，因此编译器要求您提供一个不同于默认值的值。您可以提供默认初始化程序或在初始化块中提供值：

任何一个

```
public class MyClass {
  final static JButton b = new JButton("Hello!");
} 
```

或者

```
public class MyClass {
  final static JButton b;

  static{
      b = new JButton("Hello!");
  }
} 
```

是有效的。

到`yourMethod`调用的时候已经太晚了，因为预计此时您的类已经初始化，并且您希望相关字段也已初始化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T21:25:56.123

有些人应该重新阅读 static 和 final 的真正含义。

静态**变量**对于其类的每个实例都是全局的。如果你有一个 Person 类，里面有一个“int static age = 0”，你说 age++; 在您的构造函数中，age 在每个实例中都将具有相同的值！意味着 3x new Person() 期望年龄为 3，在每个 Person 实例中！michael.age == 3 和 susan.age == 3 和 tom.age == 3

因此，您需要为该变量保留一些空间，并且必须初始化并声明它！因为这意味着“你对一个类的所有实例都有一个变量”......

接下来，**最终变量**必须在其声明中填充数据，因为您可能不会！稍后编辑该变量！像一个 const（常数）

所以有最后一个**静态 final**。正如您可能已经了解到的，此变量适用于类的每个实例，在其声明中初始化，并且整体上不可更改！这解释了java的类综合“const”（常量）变量！

给你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T21:15:48.867

必须直接（靠近变量）或使用静态块初始化静态最终变量。

最终变量（非静态）必须直接（靠近变量）或使用初始化块或在对象构造函数中声明。

# c++ - Xerces C++ 未解决的链接器错误

> ID：10506582
> 
> 赞同：1
> 
> 时间：2012-05-08T21:12:08.613
> 
> 标签：c++, xml, windows-7, visual-studio-2005, xerces-c

我正在使用 VS2005 为我创建的模式生成和构建 Xerces .hxx/.cxx 文件。我能够生成模式并编译它们，但是在链接时我收到了以下链接器错误。我将 xerces-c_3D.lib 包含在 Linker->Input->Additional Dependencies 选项卡中。它似乎找到了它。因为当我从 Linker->General->Additional Library Directories 中取出位置时，VS 抱怨找不到 xerces-c_3D.lib

我使用[http://wiki.codesynthesis.com/Using_XSD_with_Microsoft_Visual_Studio](http://wiki.codesynthesis.com/Using_XSD_with_Microsoft_Visual_Studio)来设置项目。

我还尝试构建示例应用程序之一，并在设置包含和库后，它构建成功。我什至在 vs 2010 中构建并做了同样的事情并且它有效。所以我不知道在哪里看。

任何建议表示赞赏。

```
1>------ Build started: Project: ProjectBlue, Configuration: Debug Win32 ------
1>Linking...
1>UniqueID.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_NONAMESPACESCHEMALOCACTION" (__imp_?fgXSI_NONAMESPACESCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB) referenced in function "protected: __thiscall xsd::cxx::zc_istream_base<char>::zc_istream_base<char>(class xsd::cxx::ro_string<char> const &)" (??0?$zc_istream_base@D@cxx@xsd@@IAE@ABV?$ro_string@D@12@@Z)
1>Arch.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_NONAMESPACESCHEMALOCACTION" (__imp_?fgXSI_NONAMESPACESCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>ArchDetails.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_NONAMESPACESCHEMALOCACTION" (__imp_?fgXSI_NONAMESPACESCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>ArchType.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_NONAMESPACESCHEMALOCACTION" (__imp_?fgXSI_NONAMESPACESCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_NONAMESPACESCHEMALOCACTION" (__imp_?fgXSI_NONAMESPACESCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>TSPI.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_NONAMESPACESCHEMALOCACTION" (__imp_?fgXSI_NONAMESPACESCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>UniqueID.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_SCHEMALOCACTION" (__imp_?fgXSI_SCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>Arch.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_SCHEMALOCACTION" (__imp_?fgXSI_SCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>ArchDetails.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_SCHEMALOCACTION" (__imp_?fgXSI_SCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>ArchType.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_SCHEMALOCACTION" (__imp_?fgXSI_SCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_SCHEMALOCACTION" (__imp_?fgXSI_SCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>TSPI.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgXSI_SCHEMALOCACTION" (__imp_?fgXSI_SCHEMALOCACTION@SchemaSymbols@xercesc_3_1@@2QBGB)
1>UniqueID.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgURI_XSI" (__imp_?fgURI_XSI@SchemaSymbols@xercesc_3_1@@2QBGB)
1>Arch.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgURI_XSI" (__imp_?fgURI_XSI@SchemaSymbols@xercesc_3_1@@2QBGB) referenced in function "public: class std::_Vector_const_iterator<class xercesc_3_1::DOMAttr *,class std::allocator<class xercesc_3_1::DOMAttr *> > & __thiscall std::_Vector_const_iterator<class xercesc_3_1::DOMAttr *,class std::allocator<class xercesc_3_1::DOMAttr *> >::operator+=(int)" (??Y?$_Vector_const_iterator@PAVDOMAttr@xercesc_3_1@@V?$allocator@PAVDOMAttr@xercesc_3_1@@@std@@@std@@QAEAAV01@H@Z)
1>ArchDetails.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgURI_XSI" (__imp_?fgURI_XSI@SchemaSymbols@xercesc_3_1@@2QBGB)
1>ArchType.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgURI_XSI" (__imp_?fgURI_XSI@SchemaSymbols@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgURI_XSI" (__imp_?fgURI_XSI@SchemaSymbols@xercesc_3_1@@2QBGB)
1>TSPI.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::SchemaSymbols::fgURI_XSI" (__imp_?fgURI_XSI@SchemaSymbols@xercesc_3_1@@2QBGB)
1>UniqueID.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_3_1::XMLString::equals(unsigned short const *,unsigned short const *)" (__imp_?equals@XMLString@xercesc_3_1@@SA_NPBG0@Z)
1>Arch.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_3_1::XMLString::equals(unsigned short const *,unsigned short const *)" (__imp_?equals@XMLString@xercesc_3_1@@SA_NPBG0@Z)
1>ArchDetails.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_3_1::XMLString::equals(unsigned short const *,unsigned short const *)" (__imp_?equals@XMLString@xercesc_3_1@@SA_NPBG0@Z) referenced in function "void __cdecl xsd::cxx::xml::dom::clear<char>(class xercesc_3_1::DOMElement &)" (??$clear@D@dom@xml@cxx@xsd@@YAXAAVDOMElement@xercesc_3_1@@@Z)
1>ArchType.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_3_1::XMLString::equals(unsigned short const *,unsigned short const *)" (__imp_?equals@XMLString@xercesc_3_1@@SA_NPBG0@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_3_1::XMLString::equals(unsigned short const *,unsigned short const *)" (__imp_?equals@XMLString@xercesc_3_1@@SA_NPBG0@Z)
1>TSPI.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_3_1::XMLString::equals(unsigned short const *,unsigned short const *)" (__imp_?equals@XMLString@xercesc_3_1@@SA_NPBG0@Z)
1>UniqueID.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXMLNSURIName" (__imp_?fgXMLNSURIName@XMLUni@xercesc_3_1@@2QBGB)
1>Arch.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXMLNSURIName" (__imp_?fgXMLNSURIName@XMLUni@xercesc_3_1@@2QBGB)
1>ArchDetails.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXMLNSURIName" (__imp_?fgXMLNSURIName@XMLUni@xercesc_3_1@@2QBGB)
1>ArchType.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXMLNSURIName" (__imp_?fgXMLNSURIName@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXMLNSURIName" (__imp_?fgXMLNSURIName@XMLUni@xercesc_3_1@@2QBGB)
1>TSPI.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXMLNSURIName" (__imp_?fgXMLNSURIName@XMLUni@xercesc_3_1@@2QBGB) referenced in function "public: __thiscall xsd::cxx::xml::string::~string(void)" (??1string@xml@cxx@xsd@@QAE@XZ)
1>UniqueID.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned long __cdecl xercesc_3_1::XMLString::stringLen(unsigned short const * const)" (__imp_?stringLen@XMLString@xercesc_3_1@@SAKQBG@Z)
1>Arch.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned long __cdecl xercesc_3_1::XMLString::stringLen(unsigned short const * const)" (__imp_?stringLen@XMLString@xercesc_3_1@@SAKQBG@Z)
1>ArchDetails.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static unsigned long __cdecl xercesc_3_1::XMLString::stringLen(unsigned short const * const)" (__imp_?stringLen@XMLString@xercesc_3_1@@SAKQBG@Z) referenced in function "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl xsd::cxx::xml::transcode<char>(unsigned short const *)" (??$transcode@D@xml@cxx@xsd@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PBG@Z)
1>ArchType.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned long __cdecl xercesc_3_1::XMLString::stringLen(unsigned short const * const)" (__imp_?stringLen@XMLString@xercesc_3_1@@SAKQBG@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned long __cdecl xercesc_3_1::XMLString::stringLen(unsigned short const * const)" (__imp_?stringLen@XMLString@xercesc_3_1@@SAKQBG@Z)
1>TSPI.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned long __cdecl xercesc_3_1::XMLString::stringLen(unsigned short const * const)" (__imp_?stringLen@XMLString@xercesc_3_1@@SAKQBG@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "public: virtual unsigned short const * __thiscall xercesc_3_1::InputSource::getEncoding(void)const " (?getEncoding@InputSource@xercesc_3_1@@UBEPBGXZ)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "public: virtual unsigned short const * __thiscall xercesc_3_1::InputSource::getPublicId(void)const " (?getPublicId@InputSource@xercesc_3_1@@UBEPBGXZ)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "public: virtual unsigned short const * __thiscall xercesc_3_1::InputSource::getSystemId(void)const " (?getSystemId@InputSource@xercesc_3_1@@UBEPBGXZ)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall xercesc_3_1::InputSource::setEncoding(unsigned short const * const)" (?setEncoding@InputSource@xercesc_3_1@@UAEXQBG@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall xercesc_3_1::InputSource::setPublicId(unsigned short const * const)" (?setPublicId@InputSource@xercesc_3_1@@UAEXQBG@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall xercesc_3_1::InputSource::setSystemId(unsigned short const * const)" (?setSystemId@InputSource@xercesc_3_1@@UAEXQBG@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMErrorHandler" (__imp_?fgDOMErrorHandler@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesLoadSchema" (__imp_?fgXercesLoadSchema@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesSchemaExternalNoNameSpaceSchemaLocation" (__imp_?fgXercesSchemaExternalNoNameSpaceSchemaLocation@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesSchemaExternalSchemaLocation" (__imp_?fgXercesSchemaExternalSchemaLocation@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesUserAdoptsDOMDocument" (__imp_?fgXercesUserAdoptsDOMDocument@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesHandleMultipleImports" (__imp_?fgXercesHandleMultipleImports@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesSchemaFullChecking" (__imp_?fgXercesSchemaFullChecking@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgXercesSchema" (__imp_?fgXercesSchema@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMValidate" (__imp_?fgDOMValidate@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMElementContentWhitespace" (__imp_?fgDOMElementContentWhitespace@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMNamespaces" (__imp_?fgDOMNamespaces@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMEntities" (__imp_?fgDOMEntities@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMDatatypeNormalization" (__imp_?fgDOMDatatypeNormalization@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMComments" (__imp_?fgDOMComments@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static class xercesc_3_1::DOMImplementation * __cdecl xercesc_3_1::DOMImplementationRegistry::getDOMImplementation(unsigned short const *)" (__imp_?getDOMImplementation@DOMImplementationRegistry@xercesc_3_1@@SAPAVDOMImplementation@2@PBG@Z) referenced in function "struct xsd::cxx::xml::dom::auto_ptr<class xercesc_3_1::DOMDocument> __cdecl xsd::cxx::xml::dom::parse<char>(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class xercesc_3_1::DOMErrorHandler &,class xsd::cxx::xml::properties<char> const &,unsigned long)" (??$parse@D@dom@xml@cxx@xsd@@YA?AU?$auto_ptr@VDOMDocument@xercesc_3_1@@@0123@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAVDOMErrorHandler@xercesc_3_1@@ABV?$properties@D@123@K@Z)
1>T6EchoTEC.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __thiscall xercesc_3_1::InputSource::InputSource(unsigned short const * const,class xercesc_3_1::MemoryManager * const)" (__imp_??0InputSource@xercesc_3_1@@IAE@QBGQAVMemoryManager@1@@Z) referenced in function "public: __thiscall xsd::cxx::xml::sax::std_input_source::std_input_source<char>(class std::basic_istream<char,struct std::char_traits<char> > &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (??$?0D@std_input_source@sax@xml@cxx@xsd@@QAE@AAV?$basic_istream@DU?$char_traits@D@std@@@std@@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@6@@Z)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMXMLDeclaration" (__imp_?fgDOMXMLDeclaration@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMWRTFormatPrettyPrint" (__imp_?fgDOMWRTFormatPrettyPrint@XMLUni@xercesc_3_1@@2QBGB)
1>T6EchoTEC.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_3_1::XMLUni::fgDOMWRTDiscardDefaultContent" (__imp_?fgDOMWRTDiscardDefaultContent@XMLUni@xercesc_3_1@@2QBGB)
1>C:\Users\MCA\Documents\Visual Studio 2010\Projects\ProjectAlpha\ProjectBlue_2005\Debug\ProjectBlue.exe : fatal error LNK1120: 31 unresolved externals
1>Build log was saved at "file://C:\Users\MCA\Documents\Visual Studio 2010\Projects\ProjectAlpha\ProjectBlue_2005\Debug\BuildLog.htm"
1>ProjectBlue - 62 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:24:08.290

简单的答案是将 Properties->C/C++->Language->Treat WChar_t As Built in Type 设置为 No(/Zc:wchar_t-)

# forms - ReCaptcha 无效 + CodeIgniter 表单助手 = 表单数据丢失

> ID：10506586
> 
> 赞同：2
> 
> 时间：2012-05-08T21:12:47.313
> 
> 标签：forms, validation, codeigniter, captcha, recaptcha

当我使用 codeIgniter 和 ReCaptcha 时，这是一个奇怪的行为。

我使用 ReCaptcha 作为一个简单的应用程序/助手。我所做的唯一更改是将 API 重命名为“recaptcha_helper.php”，然后我添加了

```
if(!defined('RECAPTCHA")){ 
   define('RECAPTCHA',true);
   [API code]
} 
```

将数据发布到我的控制器时，结果是......不像预期的那样。

```
ReCaptcha valid / form valid = works fine!
ReCaptcha valid / form not valid = works fine!
ReCaptcha not valid / form valid = all form data lost
ReCaptcha not valid / form not valid = all form data lost + validation lost 
```

我也像我制作的所有其他网站一样使用“set_value（'input_name'）”。直到今天，当我将 recaptcha 放入表单中时，它曾经像魅力一样发挥作用。

这是控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Register extends MY_Controller {

    var $form_rules = array(    
                        array(
                            'field' => 'user_first_name',
                            'label' => 'Prénom ',
                            'rules' => 'trim|required|max_lenght[50]|xss_clean'),
                        array(
                            'field' => 'user_last_name',
                            'label' => 'Nom ',
                            'rules' => 'trim|required|max_lenght[50]|xss_clean'),
                        array(
                            'field' => 'user_email',
                            'label' => 'Courriel ',
                            'rules' => 'trim|required|max_lenght[100]|valid_email|xss_clean'),
                        array(
                            'field' => 'user_email_confirm',
                            'label' => 'Confirmation du courriel ',
                            'rules' => 'trim|required|max_lenght[100]|matches[user_email]|xss_clean'));

    public function __construct(){
        parent::__construct();
    }
    public function register(){

        $this->load->library('form_validation');
        $this->form_validation->set_rules($this->form_rules);

        // RECAPTCHA STUFF
        $this->load->helper('recaptcha');
        $publickey = "****";
        $privatekey = "****";
        # the response from reCAPTCHA
        $resp = null;
        # the error code from reCAPTCHA, if any
        $error = null;

        if(isset($_POST) && count($_POST)>0){
            $resp = recaptcha_check_answer ($privatekey,
                                            $_SERVER["REMOTE_ADDR"],
                                            $_POST["recaptcha_challenge_field"],
                                            $_POST["recaptcha_response_field"]);
            if ($resp->is_valid) {
                if($this->form_validation->run()){
                    $new_data = array(  'user_first_name' => $_POST['user_first_name'],
                                        'user_last_name' => $_POST['user_last_name'],
                                        'user_email' => $_POST['user_email']);
                    $this->db->insert('user', $new_data);
                    $new_user_id = $this->db->insert_id();
                    $this->load->view('header');
                    $this->load->view('sent');
                    $this->load->view('footer');
                    return;
                }
            }else{
                 $error = $resp->error;
            }
            $data = $_POST;
        }

        $data['recaptcha'] = recaptcha_get_html($publickey, $error);

        $this->load->view('header');
        $this->load->view('inscription_form', $data);
        $this->load->view('footer');
    }
} 
```

这是表格

```
<div id="inscription">        
    <?php echo form_open(); ?>
        <p>
            <label for="user_first_name">Pr&eacute;nom *</label>
            <input type="text" name="user_first_name" value="<?php echo set_value('user_first_name'); ?>" maxlength="50" />
            <?php echo form_error('user_first_name'); ?>
        </p>
        <p class="clear">
            <label for="user_last_name">Nom *</label>
            <input type="text" name="user_last_name" value="<?php echo set_value('user_last_name'); ?>" maxlength="50" />
            <?php echo form_error('user_last_name'); ?>
        </p>
        <p class="clear">
            <label for="user_email">Courriel *</label>
            <input type="text" name="user_email" value="<?php echo set_value('user_email'); ?>" maxlength="100" />
            <?php echo form_error('user_email'); ?>
        </p>
        <p class="clear">
            <label for="user_email_confirm">Confirmation du courriel *</label>
            <input type="text" name="user_email_confirm" value="<?php echo set_value('user_email_confirm'); ?>" maxlength="100" />
            <?php echo form_error('user_email_confirm'); ?>
       </p>
       <div class="clear"></div>
        <div><?php echo $recaptcha; ?></div>
        <p><input type="submit" value="Envoyer"/></p>
        <p class="clear">* Tous les champs de ce formulaire sont requis.</p>
    </form>
</div> 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:47:33.390

为了重新填充表单，您**必须**运行 form_validation 命令。

但是您的问题是，在您的代码中，如果 reCaptcha 失败，您将永远不会运行验证，因此无需再次填写表单（因为它实际上从未进入验证）。

所以改变你的代码，首先运行表单验证。如果表单验证返回 true，则检查验证码。

```
if(isset($_POST) && count($_POST)>0){
        $resp = recaptcha_check_answer ($privatekey,
                                        $_SERVER["REMOTE_ADDR"],
                                        $_POST["recaptcha_challenge_field"],
                                        $_POST["recaptcha_response_field"]);
         if($this->form_validation->run()) 
          {
            if ($resp->is_valid) 
            {
                $new_data = array(  'user_first_name' => $_POST['user_first_name'],
                                    'user_last_name' => $_POST['user_last_name'],
                                    'user_email' => $_POST['user_email']);
                $this->db->insert('user', $new_data);
                $new_user_id = $this->db->insert_id();
                $this->load->view('header');
                $this->load->view('sent');
                $this->load->view('footer');
                return;
            }
            else
            {
                  $error = $resp->error;
            }
        }
        $data = $_POST;
    } 
```

一件事 - 改进你的代码 - 让你的 reCaptcha ($resp->is_valid) 成为一个回调方法 - 然后你可以实际运行验证码作为表单验证的一部分，而不是单独的方法。

[有关回调，请参见此处](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks "有关回调，请参见此处")

```
public function _recaptcha_check($str)
    {
              $resp = recaptcha_check_answer ($str,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);
          if ( ! $resp->is_valid)
          {
            $this->form_validation->set_message('_recaptcha_check', 'Your reCaptcha was wrong!');
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    } 
```

并在您设置规则的地方设置它（注意回调名称的双“_”）

```
array(
                            'field' => 'recaptcha_response_field',
                            'label' => 'Recaptcha',
                            'rules' => 'required|callback__recaptcha_check'), 
```

# android - 通过 ADB 开启飞行模式

> ID：10506591
> 
> 赞同：24
> 
> 时间：2012-05-08T21:12:52.333
> 
> 标签：android

我已经看遍了，我还没有找到这个问题的具体答案。我希望找到一种从 ADB 切换飞行模式的方法，它不以任何方式涉及 GUI。我找到并使用了调出菜单然后使用keyevents打开飞行模式的方法，但由于需要考虑UI布局可能发生的变化，这种方法只是一个临时解决方案。

我开始认为没有办法通过意图打开或关闭飞行模式，但如果您有任何信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2016-10-26T20:14:07.633

首先，我永远不会依赖在大多数答案中建议的*盲目浏览 UI的解决方案。*更多在下面的注释中。

我喜欢 Gmurali 的第一个答案，它建议以下启用飞行模式：

```
adb shell settings put global airplane_mode_on 1 
```

不幸的是，它不起作用。它只是改变*飞行模式*图标的状态，但所有**无线电仍然处于活动状态**。

它缺少一个非常重要的部分，即在设置更改后立即**广播意图**以通知应用程序*飞行模式*状态已更改。

要**启用*飞行模式***，请使用以下命令：

```
adb shell settings put global airplane_mode_on 1
adb shell am broadcast -a android.intent.action.AIRPLANE_MODE 
```

要**禁用*飞行模式***，您必须将设置更改为 0 并再次广播意图：

```
adb shell settings put global airplane_mode_on 0
adb shell am broadcast -a android.intent.action.AIRPLANE_MODE 
```

它已经**过测试并在 Android 6 上运行**。

* * *

## 笔记

许多答案建议使用活动打开飞行模式设置，然后模拟一些按键以在 UI 中导航。**我不建议依赖它**。设备上可能只有短暂的延迟，并且在打开设置对话框之前会按下按键，或者例如同时出现一些意外的对话框。在这两种情况下，按键都会导致一些意想不到的、可能有害的事情。

此外，不同品牌、型号、Android 版本等设备上的 UI 可能会有所不同。我已经在 Samsung Galaxy S4（Android 6.0.1）上对其进行了测试，但它在那里不起作用。这可能是三星和默认用户界面之间的差异。

设置操作方法应该是完全安全的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-10-31T10:06:32.223

对于较新的 android，这会启用/禁用 wifi。不是你的任务，但我很乐意在这里找到它：

```
adb shell svc wifi disable 
```

或者

```
adb shell svc wifi enable 
```

归功于这个答案：[https ://stackoverflow.com/a/27228962/1021872](https://stackoverflow.com/a/27228962/1021872)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-16T14:06:29.687

```
adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS
adb shell input keyevent 19 & adb shell input keyevent 23 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-30T13:07:04.510

**仅适用于 Rooted 设备。**.

开启飞行模式：

```
adb shell -c settings put global airplane_mode_on 1
adb shell -c am broadcast -a android.intent.action.AIRPLANE_MODE --ez state true 
```

关闭飞行模式：

```
adb shell -c settings put global airplane_mode_on 0
adb shell -c am broadcast -a android.intent.action.AIRPLANE_MODE --ez state false 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-23T11:13:03.217

打开 APN 模式

```
adb shell settings put global airplane_mode_on 1 
```

关闭 APN 模式

```
adb shell settings put global airplane_mode_on 0 
```

在 Android-L 上验证

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-11T05:02:32.793

### 关闭飞行模式：

```
if [[ "$(adb shell dumpsys wifi | grep mAirplaneModeOn)" == "mAirplaneModeOn true" ]]; then  

    adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS
        && input keyevent 19
        && input keyevent 23
        && input keyevent 4
fi 
```

### 开启飞行模式：

```
if [[ "$(adb shell dumpsys wifi | grep mAirplaneModeOn)" == "mAirplaneModeOn false" ]]; then            

    adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS
        && input keyevent 19
        && input keyevent 23
        && input keyevent 4
fi 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-06-30T17:39:58.820

这就是我能够在*模拟器*（API 25）上启用飞行模式以克服权限问题的方式。

```
adb -s emulator-5554 shell settings put global airplane_mode_on 1
adb -s emulator-5554 shell 'su 0 am broadcast -a android.intent.action.AIRPLANE_MODE' 
```

请注意，您的“ **su 0** ”可能会有所不同。例如，对于较旧的 api，我必须使用 ' **su &** '

如果您只想禁用模拟器上的数据，请使用

```
svc data disable 
```

但是，我见过几秒钟后*模拟器自动重新连接的情况。*

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-05-01T17:46:12.273

`adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS & adb shell input keyevent KEYCODE_ENTER & adb shell input keyevent 4`

将切换飞行模式。但是，有谁知道是否有办法明确取消选中或选中该框？问题是我找不到在切换之前检查状态的方法。`adb shell settings get global airplane_mode_on`对我不起作用，找不到设置。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-11T09:10:59.257

使用以下命令启动*Settings* > *Wireless networks*，切换*飞行模式*并返回（按返回）：

*   视窗/DOS： `adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS & adb shell input keyevent 19 & adb shell input keyevent 23 & adb shell input keyevent 4`
*   Unix/Linux： `adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS ; adb shell input keyevent 19 ; adb shell input keyevent 23 ; adb shell input keyevent 4`

在三星 Galaxy S (Android OS 2.3.3) 上测试。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-02T18:31:59.733

由于在 Nougat 之后广播命令停止工作，我建议使用如下内容：

```
adb shell "input keyevent KEYCODE_WAKEUP;input keyevent KEYCODE_MOVE_HOME;am start -a android.settings.AIRPLANE_MODE_SETTINGS;sleep 0.5;input keyevent KEYCODE_ENTER;pm clear com.android.settings;input keyevent KEYCODE_HOME" 
```

这适用于三星 S7

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-28T11:30:38.907

在我的 .zshrc 文件中，我添加了它来模拟飞行模式。

```
alias android:online="androidOfflineOnline enable"
alias android:offline="androidOfflineOnline disable"
function androidOfflineOnline {
   adb shell svc data $1
   adb shell svc wifi $1
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-12-21T15:58:11.750

威廉的[答案](https://stackoverflow.com/a/17678765/1991683)是最适合我的答案-> Android 5.0 Lollipop。但是，有时它不会切换，因为它试图在设置活动完全加载之前切换。

所以我让终端休眠了 0.1 秒。我添加了点击后退退出设置

```
adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS
adb shell input keyevent 19 ; sleep 0.1; adb shell input keyevent 23; sleep 0.3; adb shell input keyevent 4;
echo "Toggled airplane mode"; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-16T18:28:21.940

如果手机已root，则可以使用此命令。此外，如果使用 Magisk，shell 必须获得“su”权限

# 启用飞行模式

adb -s ZY32234G3V shell "su -c 'input keyevent KEYCODE_WAKEUP;input keyevent KEYCODE_MOVE_HOME;settings put global plane_mode_on 1;am broadcast -a android.intent.action.AIRPLANE_MODE --ez state true'"

# 禁用飞行模式

adb -s ZY32234G3V shell "su -c 'input keyevent KEYCODE_WAKEUP;input keyevent KEYCODE_MOVE_HOME;settings put global plane_mode_on 0;am broadcast -a android.intent.action.AIRPLANE_MODE --ez state false'"

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-03T17:06:44.697

如果您具有 root 访问权限，并且[David Ferenczy Rogožan](https://stackoverflow.com/users/971141/david-ferenczy-rogo%C5%BEan)[的回答](https://stackoverflow.com/a/40271379/2140449)中的方法给您留下了安全异常：

```
Permission Denial: not allowed to send broadcast android.intent.action.AIRPLANE_MODE 
```

您可以尝试以超级用户身份运行命令，如下所示。

### 启用飞行模式

```
adb shell "su -c 'settings put global airplane_mode_on 1'"
adb shell "su -c 'am broadcast -a android.intent.action.AIRPLANE_MODE'" 
```

### 禁用飞行模式

```
adb shell "su -c 'settings put global airplane_mode_on 0'"
adb shell "su -c 'am broadcast -a android.intent.action.AIRPLANE_MODE'" 
```

* * *

根据我对**Android 9**的经验，su 的显式调用仅对广播命令是必需的，而对于前者我可以保留：

```
adb shell settings put global airplane_mode_on [0|1] 
```

* * *

感谢[Arya](https://stackoverflow.com/users/492015/arya)将这个技巧留在上述答案的评论部分。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-27T23:10:32.757

我在移动自动化框架中使用的一种工作方法：

> 使用 OS 5.x 6.x 7.x 和 8.x 需要针对 9.x 进行测试

```
/**
 * Method to set Android device Airplane mode.
 * 
 * @param status
 * 
 *               true - turn on airplane mode false - turn off airplane mode
 */
public static void setAndroidDeviceAirplaneMode(boolean status) {
    try {

        String airplaneModeStatus = "";
        if (status) {
            airplaneModeStatus = "0";
        } else {
            airplaneModeStatus = "0";
        }
        String sdkPath = System.getenv("ANDROID_HOME") + "/platform-tools/";
        Runtime.getRuntime().exec(sdkPath + "adb shell settings put global airplane_mode_on " + airplaneModeStatus);
        Thread.sleep(1000);
        Process process = Runtime.getRuntime()
                .exec(sdkPath + "adb shell am broadcast -a android.intent.action.AIRPLANE_MODE");
        process.waitFor();
        Thread.sleep(4000);
        if (status) {
            logger.info("Android device Airplane mode status is set to ON");
        } else {
            logger.info("Android device Airplane mode status is set to OFF");
        }
    } catch (Exception e) {
        System.out.println(e.getMessage());
        logger.error("Unable to set android device Airplane mode.");
    }
} 
```

# c - 如何从套接字获取箭头键

> ID：10506593
> 
> 赞同：-2
> 
> 时间：2012-05-08T21:13:10.257
> 
> 标签：c

我通过套接字从 telnet 获取字符。我不知道如何检查是否按下了箭头键。我有 char * 缓冲区，存在此消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T23:28:13.093

键盘上的光标字符没有 Ascii 值 - 因此没有标准方法将它们表示为 char。此外，telnet 没有对另一端的机器做任何假设，它可能是 1950 年代的电传打字机，不知道光标。

发送消息的程序必须使用某些操作系统特定的功能（ncurses 或扫描码）检测箭头键，然后在 telnet 链接上以某种方式对其进行编码，通常通过发送转义符，然后发送一个字符来表示每个箭头。

一个合理的解决方案是假设 vt102 代码 - 第一个流行的字符可寻址终端

编辑：请参阅[如何使用 Net::Telnet 模块在 Perl 中发送箭头键？](https://stackoverflow.com/questions/2502197/how-do-i-send-an-arrow-key-in-perl-using-the-nettelnet-module)

# c++ - 如何检查两个 std::vector 是否仅包含相同的元素？

> ID：10506595
> 
> 赞同：6
> 
> 时间：2012-05-08T21:13:22.073
> 
> 标签：c++, algorithm, stl, vector, comparison

我需要一个算法或标准库函数来比较两个向量元素，如下所示：

```
class Utility
{
    template <class T>
    static bool CheckIfVectorsEquivalent(   const std::vector<T> & Vec1,
                                            const std::vector<T> & Vec2)
    {
        // ???
    }
}; 
```

在以下规格下工作：

```
std::vector<int> v1, v2, v3, v4, v5, v6, v7, v8;

// Returns false when not all the elements are matching between vectors
v1.push_back(1);
v1.push_back(3);
v1.push_back(5);
v2.push_back(2);
v2.push_back(3);
v2.push_back(8);
Utility::CheckIfVectorsEquivalent(v1, v2);  // Must return false

// Returns true when all the elements match, even if the are not in the same order
v3.push_back(3);
v3.push_back(1);
v3.push_back(7);
v4.push_back(7);
v4.push_back(3);
v4.push_back(1);
Utility::CheckIfVectorsEquivalent(v3, v4);  // Must return true

// Returns false when one of the vectors is subset of the other one
v5.push_back(3);
v5.push_back(1);
v5.push_back(7);
v6.push_back(7);
v6.push_back(3);
v6.push_back(1);
v6.push_back(18);
v6.push_back(51);
Utility::CheckIfVectorsEquivalent(v5, v6);  // Must return false

// Returns true when the both vectors are empty
Utility::CheckIfVectorsEquivalent(v7, v8);  // Must return true 
```

是否有任何标准（使用 STL）方法可以做到这一点？如果没有，我该如何编写这个算法？太让我困惑了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T21:15:04.740

标准方法是**对这两个向量进行排序并使用 operator`==`**来比较相应的值。

实现该算法的示例解决方案是：

```
#include <vector>
#include <algorithm>

template<typename T>
bool compare(std::vector<T>& v1, std::vector<T>& v2)
{
    std::sort(v1.begin(), v1.end());
    std::sort(v2.begin(), v2.end());
    return v1 == v2;
} 
```

由于排序，它的复杂度为 O(n*log(n))。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-08T21:36:21.827

如果您只能使用 c++11 解决方案，那么[`std::is_permutation`](http://en.cppreference.com/w/cpp/algorithm/is_permutation)这正是您想要的

```
template <class FI1, class FI2>
bool is_permutation ( FI1 first, FI1 last, FI2 d_first ); 
```

如果你不能这样做，那么在即将发布的 boost 1.50 版本中，将会有

```
boost::algorithm::is_permutation 
```

具有相同的界面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T21:16:02.350

从每个向量创建一个`multiset`，然后比较它们是否相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:20:33.437

对于未排序的输入，这个问题有一个 O(n) 解决方案：

```
#include <vector>
#include <algorithm>
#include <iostream>
#include <boost/function_output_iterator.hpp>

template <typename T>
T xorfunc(const T& a, const T& b) {
  return a^b;
}

template <typename T>
bool compare(const std::vector<T>& v1, const std::vector<T>& v2) {
  if (v1.size() != v2.size())
    return false;

  T result = 0;
  std::transform(v1.begin(), v1.end(), v2.begin(), boost::make_function_output_iterator([&result](const T& r) { result ^= r; }), std::ptr_fun(&xorfunc<T>));
  return !result;
} 
```

它适用于整数输入，并利用了适用于任何配对值组合的事实`a ^ b ^ c ^ d == 0`。它永远不会给出假阴性，它*可能会*给出假阳性，但你可以在 O(n) 空间/时间中进一步减少这些。如果您主要是打负数，那么这可能作为预排序+比较步骤来快速排除它们很有用。它适用于您展示的所有测试用例：

```
int main() {
    std::vector<int> v1, v2, v3, v4, v5, v6, v7, v8;

    // Returns false when not all the elements are matching between vectors
    v1.push_back(1);
    v1.push_back(3);
    v1.push_back(5);
    v2.push_back(2);
    v2.push_back(3);
    v2.push_back(8);
    std::cout << compare(v1, v2) << " (false)" << std::endl;  // Must return false

    // Returns true when all the elements match, even if the are not in the same order
    v3.push_back(3);
    v3.push_back(1);
    v3.push_back(7);
    v4.push_back(7);
    v4.push_back(3);
    v4.push_back(1);
    std::cout << compare(v3, v4) << " (true)" << std::endl;  // Must return true

    // Returns false when one of the vectors is subset of the other one
    v5.push_back(3);
    v5.push_back(1);
    v5.push_back(7);
    v6.push_back(7);
    v6.push_back(3);
    v6.push_back(1);
    v6.push_back(18);
    v6.push_back(51);
    std::cout << compare(v5, v6) << " false" << std::endl;  // Must return false

    // Returns true when the both vectors are empty
    std::cout << compare(v7, v8) << " true" << std::endl;  // Must return true

} 
```

给出：

```
0（假）
1（真实）
0 假
1 对

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T21:27:04.450

最简单的方法是创建 Vec1 和 Vec2 的副本，对它们进行排序并使用`==`.

另一种方法是从 Vec1 和 Vec2 构建两个多重集，并使用`==`.

另一种方法是使用映射（std::map 或 unordered_map）来存储计数器 - 即增加 Vec1 的每个元素的存储值并减少 Vec2 的每个存储元素，然后检查 map 是否包含非零元素。如果 map 中存储了非零元素，则向量不相等。

凌乱的伪代码示例：

```
std::vector<Value> vec1, vec2;
//initialize vec1 and vec2, fill with data
typedef int Counter;
typedef unordered_map<Value, Counter> CounterMap;

CounterMap counters;
for (size_t i = 0; i < vec1.size(); i++)
    counters[vec1[i]]++;
for (size_t i = 0; i < vec2.size(); i++)
    counters[vec2[i]]--;

bool equal = true;
for (CounterMap::const_iterator i = coutners.begin(); equal && (i != counters.end()); i++)
    if (i->second != 0)
        equal = false; 
```

根据您的 STL（或 boost）实现、数据类型和向量中存储数据的顺序）其中一种方法会更快，但很难分辨是哪一种。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T22:08:46.720

如果我们认为 int 对于以下算法中的计算足够大，则有一个简单的 O(N) 算法。

0：初始化：max(v1,v2)的大小有素数，product1=1，product2=1

1：如果 v1 的大小 != v2 的大小，则返回 false

2：

```
foreach (  i in v1 ) {
   product1 *= primes[v1[i]]
   product2 *= primes[v2[i]]
} 
```

3.

```
result product1 == product2; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-09T23:22:39.753

```
 v7.push_back(3);
  v7.push_back(1);
  v7.push_back(7);

  v8.push_back(7);
  v8.push_back(3);
  v8.push_back(1);
  v8.push_back(1);
  v8.push_back(7);

  std::cout << compare(v7, v8) << " true or false" << std::endl; 
```

在上述条件下，函数比较将返回真或假。我失去了计数。如果返回真。我们不能使用这种方式：标准方式是对这两个向量进行排序并使用运算符 == 来比较相应的值。

# jquery - jqGrid 是否有 afterSort 事件或类似事件？

> ID：10506596
> 
> 赞同：6
> 
> 时间：2012-05-08T21:13:31.810
> 
> 标签：jquery, jqgrid

我需要根据 jqGrid 中的排序顺序来操作本地数组，因为我正在使用行索引来修改本地数据数组，当网格按备用列排序时，该数组会塞满。我可以看到 jqGrid 有一个`onSortCol`事件在单击标题后但在排序之前触发，但在排序之后没有调用。我在文档中看不到任何可以挂钩的内容？有任何想法吗？

编辑：添加一些代码

这是我的 jqGrid 代码的全部内容：

```
$list.jqGrid({
    formatter: {
        currency: { decimalSeparator: ".", thousandsSeparator: ",", decimalPlaces: 2, prefix: "$", suffix: "", defaultValue: '0.00' }
    },
    datatype: "local",
    colNames: ['Id',
    '<img src=\'Images/Global/alert.gif\' alt=\'Set As Favourite\' title=\'Set As Favourite\' />',
    'Delivery #', 'Pickup', 'From', 'Deliver', 'To', 'Destination',
    'Carrier', 'Vehicle', 'Load', 'IsSelected', 'Status','PickupResourceId','DeliverResourceId'],
    colModel: [
        { name: 'Id', index: 'ConsignmentId', width: 65, hidden: true },
        { name: 'Favourite', index: 'Favourite', width: 18, align: 'center' },
        { name: 'DeliveryNumber', index: 'DeliveryNumber', width: 65 },
        { name: 'Pickup', index: 'Pickup', width: 60, align: 'left', sorttype: 'date', datefmt: 'd/M/Y' },
        { name: 'From', index: 'From', width: 85, formatter: 'rowHeight' },
        { name: 'Deliver', index: 'Deliver', width: 60, align: 'left', sorttype: 'date', datefmt: 'd/M/Y' },
        { name: 'To', index: 'To', width: 85, align: 'left', formatter: 'rowHeight' },
        { name: 'Destination', index: 'Destination', align: 'left' },
        { name: 'Carrier', index: 'Carrier', width: 65, align: 'left' },
        { name: 'Vehicle', index: 'Vehicle', width: 65, align: 'left' },
        { name: 'Load', index: 'Load', align: 'left', formatter: 'rowHeight' },
        { name: 'IsSelected', index: 'IsSelected', width: 5, hidden: true },
        { name: 'Status', index: 'Status', width: 5, hidden: true },
        { name: 'PickupResourceId', index: 'PickupResourceId', hidden:true},
        { name: 'DeliverResourceId', index: 'DeliverResourceId', hidden:true}
    ],

    altRows:true,
    altclass:'myAltRowClass',

    width: gridWidth,
    height: "100%",
    loadonce: true,
    gridview: true,
    page: $listpg.val(),
    cellLayout: 7,

    pager: '#dispatch-footer',
    rowNum: 10,
    viewrecords: true,
    rowList: [10, 20, 30],
    sortname: 'invid',
    sortorder: 'desc',
    multiselect: true,
    onPaging: function (pgButton) {
        $listpg.val($list.getGridParam('page'));
    },
    onCellSelect: function (rowId, colId, cellContent, e) {
        if (colId != 0 ) { //&& colId != 2
            hideMsgs();
            $list.jqGrid('resetSelection');
            $list.jqGrid('setSelection', rowId);

            rowIdx = ($(this).getGridParam('rowNum') * ($(this).getGridParam('page') - 1)) + (rowId - 1);
            rowWasRemoved = false;

            var cons = $list.jqGrid('getCell', rowId, 1);
            loadDelivery({});
            eCargo.api.get('v1.00/delivery/' + cons, 0, loadDelivery,
                funcError('Unable to load Delivery', 5000, $jobEdit));
            $jobEdit.dialog('open');
            $jobEdit.block();
        }
        /*if (colId == 2) {
            var newImage = $list.getCell(rowId, colId) == '' ? exclIcon : '';
            $list.setCell(rowId, colId, newImage, "", "");
            $list.jqGrid('resetSelection', rowId);
        }*/
    },
    onSelectRow: function (rowid, status) {
        var ret = $list.jqGrid('getRowData', rowid);
        if (status) {
            if (selectedIds.indexOf(ret.Id) == -1)
                selectedIds.push(ret.Id);
        }
        else {
            selectedIds.splice(selectedIds.indexOf(ret.Id), 1);
        }
        $gIds.val(selectedIds.join('|'));
    },
    loadComplete: function () {
        var ids = $list.getDataIDs();
        for (var i = 0; i < ids.length; i++) {
            $list.setRowData(ids[i], false, { height: 40 });
        }
        $('#jqgh_cb').css('text-align', 'center');
    },
    gridComplete: function () {
        var ids = $list.getDataIDs();
        for (var i = 0; i < ids.length; i++) {
            //if late
            if (dates.compare(
                    new Date($list.jqGrid('getCell', ids[i], 'Deliver')).addDays(1),
                    $list.jqGrid('getCell', ids[i], 'Deliver'))
                && $list.jqGrid('getCell', ids[i], 'Status') !== 'DELIVERED') {
                //$list.find("#" + ids[i]).css({ color: 'red' });
            }
            if ($gIds.val() != '') {
                var ret = $list.jqGrid('getRowData', ids[i]);
                if (selectedIds.indexOf(ret.Id) > -1)
                    $list.jqGrid('setSelection', ids[i]);
            }
        }
        $('#jqgh_cb').css('text-align', 'center');
    },
    onSelectAll: function (aRowids, status) {
        hideMsgs();
        var ids = $list.jqGrid('getDataIDs');
        for (var i = 0; i < ids.length; i++) {
            var ret = $list.jqGrid('getRowData', ids[i]);
            //setIsSelected(ret.InvoiceId, status);
            //$list.jqGrid('setCell', ids[i], 'IsSelected', status);
            if (status) {
                if ($.inArray(ret.Id, selectedIds) == -1)
                    selectedIds.push(ret.Id);
            }
            else
                selectedIds.splice(selectedIds.indexOf(ret.Id), 1);
        }
        $gIds.val(selectedIds.join('|'));
    }
})
.navGrid('#dispatch-footer', { edit: false, add: false, del: false, search: false }); 
```

这是将数据加载到网格中的位置以及 json 的格式化函数：

```
var consLoader = new Loader({
    $grid: $list,
    URL: 'v1.00/delivery',
    count: 20,
    Error: funcError('Unable to retrieve search consignments.', 5000, $(this)),
    SearchNotFound: funcSuccess('No consignments found.', 5000),
    GridBound: function () {
        this.$grid.jqGrid('setGridParam', { page: $listpg.val() }).trigger("reloadGrid");
    },
    DetailsSuccess: function (rtn) {
        var ldr = this;
        ldr.bindGrid = true;
        $.EO_each(rtn, function (i, e) {
            ldr.list.push(formatConsignment(e));
        });
    }
});

function formatConsignment(cons) {
    var icon = '';
    if (cons.ReturnLiability)
        icon = retnIcon;
    if (cons.ConsignmentAttrs && cons.ConsignmentAttrs.match('PRIORITY'))
        icon = exclIcon; // exclIcon is favourite
    return {
        $raw: cons,
        Id: cons.ConsignmentId,
        Favourite: icon,
        DeliveryNumber: cons.ConsignmentNbr,
        From: cons.PickupResourceName.toProperCase(),
        Pickup: vortalDateTime(cons.PickupPlannedDepartureDate),
        To: cons.DeliverResourceName.toProperCase(),
        Deliver: vortalDateTime(cons.DeliverPlannedArrivalDate),
        Destination: eCargoAddress(cons.DeliverToAddress).toProperCase(),
        Carrier: cons.CarrierResourceName.toProperCase(),
        Vehicle: cons.Vehicle == undefined ? '' : cons.Vehicle.toProperCase(),
        Load: cons.Description.toProperCase(),
        Comments: cons.Comments ? cons.Comments : '',
        PickupResourceId: cons.PickupResourceId,
        DeliverResourceId: cons.DeliverResourceId,
        Status: cons.Status,
        IsSelected: false
    };
} 
```

这是三个记录的一些 json。

```
{"_type":"Consignments","_":[{"_type":"Consignment","Deleted":"N","NoOrder":"N","ConsignmentId":4166306,"ObjectTypeName":"CONSIGNMENT","ReadTimestamp":"2012-03-16 19:34:17.113","ConsignmentAuths":"ASSIGN_VEHICLE|CHANGE|CREATE_LEGS|DEASSIGN_VEHICLE|DELIVER|DISPATCH|MAKE_PRIORITY|NOTIFY|REMOVE_PRIORITY|SUBCONTRACT|VIEW|","ConsignmentAttrs":"JOBTYPE=Grocery|","Description":"Palleted: 750 KGS, 10.52 M3, 224 Cartons, 4 PAL, 4 Lifts","ConsignmentNbr":"0081604437","PickupActualDepartureDate":"16 Mar 2012 19:33:30","Status":"DISPATCHED","NextAction":"Confirm Delivery","Vehicle":"cfd","DeliverResourceId":23760,"CarrierResourceId":2255,"PickupResourceId":7320,"OwnerResourceId":7320,"DeliverResourceName":"PAK N SAVE GLEN INNES","CarrierResourceName":"Cardinal Logistics Ltd","PickupResourceName":"Griffins Foods - DC","OwnerResourceName":"Griffins Foods - DC","CarrierResourceShortName":"Cardinal Logistics Ltd","DeliverToAddress":{"_type":"DeliverToAddress","Address":{"_type":"Address","Street":"182 APIRANA AVENUE","Suburb":"GLEN INNES","City":"AUCKLAND","Country":"NZ","RegionId":478,"RegionName":"AKE"}},"PickupAddress":{"_type":"PickupAddress","Address":{"_type":"Address","Street":"113-3 Savill Drive","Suburb":"Otahuhu","City":"Auckland","Country":"New Zealand","RegionId":400,"RegionName":"South Akld"}},"PickupPlannedArrivalDate":{"_type":"PickupPlannedArrivalDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeZone":"UTC@@plus;12"}},"PickupPlannedDepartureDate":{"_type":"PickupPlannedDepartureDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeZone":"UTC@@plus;12"}},"DeliverPlannedArrivalDate":{"_type":"DeliverPlannedArrivalDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeValue":"99:99"}},"DeliverPlannedDepartureDate":{"_type":"DeliverPlannedDepartureDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012"}},"ConsignmentItems":{"_type":"ConsignmentItems","_":[{"_type":"ConsignmentItemHeader","Deleted":"N","ConsignmentItemId":94540510,"ConsignmentItem":{"_type":"ConsignmentItem","Deleted":"N","Item":{"_type":"Item","ItemId":97277,"ItemDesc":"Palleted","Weight":7500000,"WeightUomCode":"Kilograms","WeightUomId":594,"Volume":105200,"VolumeUomCode":"m³","VolumeUomId":615,"Qty1":2240000,"Qty1UomCode":"Cartons","Qty1UomId":766,"Qty2":40000,"Qty2UomCode":"Pallet","Qty2UomId":648,"Qty3":40000,"Qty3UomCode":"Lifts","Qty3UomId":733}}}]},"ConsignmentPartners":{"_type":"ConsignmentPartners","_":[{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45203410,"RoleId":5,"RoleCode":"OWNER","RoleName":"Owner","PartnerName":"Griffins Foods - DC","PartnerResourceId":7320,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"113-3 Savill Drive","Suburb":"Otahuhu","City":"Auckland","Country":"NZ","RegionId":400,"RegionName":"South Akld"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45203411,"RoleId":1,"RoleCode":"CARRIER","RoleName":"Carrier","PartnerName":"Cardinal Logistics Ltd","PartnerResourceId":2255,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"71-77 Westney Rd","Suburb":"Mangere","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45203412,"RoleId":6,"RoleCode":"PICKUP_POINT","RoleName":"Outwards Goods","PartnerName":"Griffins Foods - DC","PartnerResourceId":7320,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"113-3 Savill Drive","Suburb":"Otahuhu","City":"Auckland","Country":"NZ","RegionId":400,"RegionName":"South Akld"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45203413,"RoleId":4,"RoleCode":"MGR_SPECTATOR_OUT","RoleName":"Manager Spectator Outwards Goods","PartnerName":"Griffins Foods Ltd","PartnerResourceId":3329,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Hunua Road","Suburb":"Papakura","PostCode":"1733","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45203414,"RoleId":11,"RoleCode":"DIVISION_MANAGER_OUT","RoleName":"Division Manager Outwards","PartnerName":"Griffins Foods Ltd","PartnerResourceId":3329,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Hunua Road","Suburb":"Papakura","PostCode":"1733","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45203415,"RoleId":3,"RoleCode":"DELIVERY_POINT","RoleName":"Inwards Goods","PartnerName":"Glen Innes Pak N Save","PartnerResourceId":23760,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"182 Apirana Avenue","City":"Auckland","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}}]},"AutoGenerateItems":"N","OriginatingOrder":{"_type":"OriginatingOrder","Deleted":"N","OrderId":8944037,"SalesOrderNumber":"3977545","PurchaseOrderNumber":"3977545","OrderType":"order","Description":"Palleted: 515.2 KGS, 10.12 M3, 224 Cartons, 6 PAL, 6 Lifts","SourceSystemReference":"0081604437","SourceSystem":"GRIFFINS"},"PickupCarrierId":2255,"PickupCarrierName":"Cardinal Logistics Ltd","L1_ResidualSplitLoad":{"_type":"L1_ResidualSplitLoad","Deleted":"N","NoOrder":"N","AutoGenerateItems":"N"}},{"_type":"Consignment","Deleted":"N","NoOrder":"N","ConsignmentId":4167062,"ObjectTypeName":"CONSIGNMENT","ReadTimestamp":"2012-03-16 18:03:33.407","ConsignmentAuths":"ASSIGN_VEHICLE|CHANGE|CREATE_LEGS|DEASSIGN_VEHICLE|DELIVER|DISPATCH|MAKE_PRIORITY|NOTIFY|REMOVE_PRIORITY|SUBCONTRACT|VIEW|","ConsignmentAttrs":"JOBTYPE=Grocery|","Description":"Palleted: 153.91 KGS, 1.0124 M3, 54 Cartons, 1 PAL, 1 Lifts","ConsignmentNbr":"0081604564","PickupActualDepartureDate":"16 Mar 2012 18:03:28","Status":"DISPATCHED","NextAction":"Confirm Delivery","Vehicle":"cfd","DeliverResourceId":29305,"CarrierResourceId":2255,"PickupResourceId":7320,"OwnerResourceId":7320,"DeliverResourceName":"METRO NEW WORLD QUEEN STREET 616672","CarrierResourceName":"Cardinal Logistics Ltd","PickupResourceName":"Griffins Foods - DC","OwnerResourceName":"Griffins Foods - DC","CarrierResourceShortName":"Cardinal Logistics Ltd","DeliverToAddress":{"_type":"DeliverToAddress","Address":{"_type":"Address","Street":"125 QUEEN STREET","Suburb":"AUCKLAND CENTRAL","City":"AUCKLAND","Country":"NZ","RegionId":454,"RegionName":"ACM"}},"PickupAddress":{"_type":"PickupAddress","Address":{"_type":"Address","Street":"113-3 Savill Drive","Suburb":"Otahuhu","City":"Auckland","Country":"New Zealand","RegionId":400,"RegionName":"South Akld"}},"PickupPlannedArrivalDate":{"_type":"PickupPlannedArrivalDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeZone":"UTC@@plus;12"}},"PickupPlannedDepartureDate":{"_type":"PickupPlannedDepartureDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeZone":"UTC@@plus;12"}},"DeliverPlannedArrivalDate":{"_type":"DeliverPlannedArrivalDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeValue":"08:00"}},"DeliverPlannedDepartureDate":{"_type":"DeliverPlannedDepartureDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeValue":"08:00"}},"ConsignmentItems":{"_type":"ConsignmentItems","_":[{"_type":"ConsignmentItemHeader","Deleted":"N","ConsignmentItemId":94557821,"ConsignmentItem":{"_type":"ConsignmentItem","Deleted":"N","Item":{"_type":"Item","ItemId":97277,"ItemDesc":"Palleted","Weight":1539100,"WeightUomCode":"Kilograms","WeightUomId":594,"Volume":10124,"VolumeUomCode":"m³","VolumeUomId":615,"Qty1":540000,"Qty1UomCode":"Cartons","Qty1UomId":766,"Qty2":10000,"Qty2UomCode":"Pallet","Qty2UomId":648,"Qty3":10000,"Qty3UomCode":"Lifts","Qty3UomId":733}}}]},"ConsignmentPartners":{"_type":"ConsignmentPartners","_":[{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45200146,"RoleId":5,"RoleCode":"OWNER","RoleName":"Owner","PartnerName":"Griffins Foods - DC","PartnerResourceId":7320,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"113-3 Savill Drive","Suburb":"Otahuhu","City":"Auckland","Country":"NZ","RegionId":400,"RegionName":"South Akld"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45200147,"RoleId":1,"RoleCode":"CARRIER","RoleName":"Carrier","PartnerName":"Cardinal Logistics Ltd","PartnerResourceId":2255,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"71-77 Westney Rd","Suburb":"Mangere","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45200148,"RoleId":6,"RoleCode":"PICKUP_POINT","RoleName":"Outwards Goods","PartnerName":"Griffins Foods - DC","PartnerResourceId":7320,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"113-3 Savill Drive","Suburb":"Otahuhu","City":"Auckland","Country":"NZ","RegionId":400,"RegionName":"South Akld"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45200149,"RoleId":4,"RoleCode":"MGR_SPECTATOR_OUT","RoleName":"Manager Spectator Outwards Goods","PartnerName":"Griffins Foods Ltd","PartnerResourceId":3329,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Hunua Road","Suburb":"Papakura","PostCode":"1733","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45200150,"RoleId":11,"RoleCode":"DIVISION_MANAGER_OUT","RoleName":"Division Manager Outwards","PartnerName":"Griffins Foods Ltd","PartnerResourceId":3329,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Hunua Road","Suburb":"Papakura","PostCode":"1733","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45200151,"RoleId":3,"RoleCode":"DELIVERY_POINT","RoleName":"Inwards Goods","PartnerName":"METRO NEW WORLD QUEEN STREET 616672","PartnerResourceId":29305,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"125 QUEEN STREET","Suburb":"AUCKLAND CENTRAL","City":"AUCKLAND","Country":"NZ","RegionId":454,"RegionName":"ACM"}}}]},"AutoGenerateItems":"N","OriginatingOrder":{"_type":"OriginatingOrder","Deleted":"N","OrderId":8945604,"SalesOrderNumber":"3978056","PurchaseOrderNumber":"3978056","OrderType":"order","Description":"Palleted: 136.91 KGS, 1.047 M3, 64 Cartons, 1 PAL, 1 Lifts","SourceSystemReference":"0081604564","SourceSystem":"GRIFFINS"},"PickupCarrierId":2255,"PickupCarrierName":"Cardinal Logistics Ltd","L1_ResidualSplitLoad":{"_type":"L1_ResidualSplitLoad","Deleted":"N","NoOrder":"N","AutoGenerateItems":"N"}},{"_type":"Consignment","Deleted":"N","NoOrder":"N","ConsignmentId":4167304,"ObjectTypeName":"CONSIGNMENT","ReadTimestamp":"2012-03-16 15:39:10.247","ConsignmentAuths":"ASSIGN_VEHICLE|CHANGE|CREATE_LEGS|DEASSIGN_VEHICLE|DELIVER|DISPATCH|MAKE_PRIORITY|NOTIFY|REMOVE_PRIORITY|SUBCONTRACT|VIEW|","Description":"Palleted Goods: 1765 KG, 5.81 M3, 4 CARTONS, 4 CHEP","ConsignmentNbr":"PZC-01298521","PickupActualArrivalDate":"16 Mar 2012 00:00:00","PickupActualDepartureDate":"16 Mar 2012 00:00:00","ProtectionType":"Ambient","Status":"DISPATCHED","NextAction":"Confirm Delivery","Vehicle":"cfd","DeliverResourceId":23773,"CarrierResourceId":23103,"PickupResourceId":29069,"OwnerResourceId":29061,"DeliverResourceName":"Mt Albert Pak N Save","CarrierResourceName":"Route and Retail","PickupResourceName":"PZ Cussons Auckland","OwnerResourceName":"PZ Cussons (NZ) Pty Ltd","DeliverToAddress":{"_type":"DeliverToAddress","Address":{"_type":"Address","Street":"1167-1177 New North Road","City":"MT ALBERT","RegionId":2,"RegionName":"New Zealand"}},"PickupAddress":{"_type":"PickupAddress","Address":{"_type":"Address","Street":"EX Mondiale AKL","Suburb":"78 Montogomerie Road, Airport Oaks","City":"Auckland","RegionId":284,"RegionName":"Auckland"}},"PickupPlannedArrivalDate":{"_type":"PickupPlannedArrivalDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"16 Mar 2012","TimeValue":"14:30"}},"PickupPlannedDepartureDate":{"_type":"PickupPlannedDepartureDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"16 Mar 2012","TimeValue":"14:30"}},"DeliverPlannedArrivalDate":{"_type":"DeliverPlannedArrivalDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeValue":"17:00"}},"DeliverPlannedDepartureDate":{"_type":"DeliverPlannedDepartureDate","VortalDateTime":{"_type":"VortalDateTime","DateValue":"19 Mar 2012","TimeValue":"17:00"}},"ConsignmentItems":{"_type":"ConsignmentItems","_":[{"_type":"ConsignmentItemHeader","Deleted":"N","ConsignmentItemId":94550141,"ConsignmentItem":{"_type":"ConsignmentItem","Deleted":"N","Item":{"_type":"Item","ItemId":2321559,"ItemDesc":"Palleted Goods","Weight":17650000,"WeightUomCode":"Kilogram","WeightUomId":593,"Volume":58100,"VolumeUomCode":"m³","VolumeUomId":615,"Qty1":40000,"Qty1UomCode":"Cartons","Qty1UomId":766,"Qty2":40000,"Qty2UomCode":"Chep","Qty2UomId":723}}}]},"ConsignmentPartners":{"_type":"ConsignmentPartners","_":[{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190257,"RoleId":6,"RoleCode":"PICKUP_POINT","RoleName":"Outwards Goods","PartnerName":"PZ Cussons Auckland","PartnerResourceId":29069,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"EX Mondiale AKL","Suburb":"78 Montogomerie Road, Airport Oaks","City":"Auckland","Country":"NZ","RegionId":284,"RegionName":"Auckland"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190258,"RoleId":11,"RoleCode":"DIVISION_MANAGER_OUT","RoleName":"Division Manager Outwards","PartnerName":"Foodstuffs Inbound","PartnerResourceId":23095,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Kiln Street","Suburb":"Silversteam","City":"Wellington","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190259,"RoleId":11,"RoleCode":"DIVISION_MANAGER_OUT","RoleName":"Division Manager Outwards","PartnerName":"FIN Account Managers","PartnerResourceId":27078,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190260,"RoleId":3,"RoleCode":"DELIVERY_POINT","RoleName":"Inwards Goods","PartnerName":"Mt Albert Pak N Save","PartnerResourceId":23773,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"1167-1177 New North Road","Suburb":"Mt Albert","City":"Auckland","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190261,"RoleId":17,"RoleCode":"LOGISTICS_PROV","RoleName":"Logistics Provider","PartnerName":"Foodstuffs Inbound","PartnerResourceId":23095,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Kiln Street","Suburb":"Silversteam","City":"Wellington","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190262,"RoleId":5,"RoleCode":"OWNER","RoleName":"Owner","PartnerName":"PZ Cussons (NZ) Pty Ltd","PartnerResourceId":29061,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Building C4","Suburb":"Pacific Road, Mt Wellington","City":"Auckland","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190263,"RoleId":1,"RoleCode":"CARRIER","RoleName":"Carrier","PartnerName":"Route and Retail","PartnerResourceId":23103,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"3 Roma Road, Mt Roskill","Suburb":"DX Box CX 15021","City":"Auckland","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190264,"RoleId":2,"RoleCode":"CARRIER_SPECTATOR","RoleName":"Carrier Spectator","PartnerName":"Foodstuffs Inbound","PartnerResourceId":23095,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"Kiln Street","Suburb":"Silversteam","City":"Wellington","Country":"NZ","RegionId":2,"RegionName":"New Zealand"}}},{"_type":"ConsignmentPartner","Deleted":"N","PartnerId":45190265,"RoleId":1,"RoleCode":"CARRIER","RoleName":"Carrier","PartnerName":"Cardinal Logistics Ltd","PartnerResourceId":2255,"PartnerAddress":{"_type":"PartnerAddress","Address":{"_type":"Address","Street":"71-77 Westney Rd","Suburb":"Mangere","City":"Auckland","Country":"NZ","RegionId":261,"RegionName":"Auckland South"}}}]},"AutoGenerateItems":"N","OriginatingOrder":{"_type":"OriginatingOrder","Deleted":"N","OrderId":8946047,"PurchaseOrderNumber":"138807","OrderType":"order","Description":"Foodstuffs Consignment","SourceSystem":"CMP"},"PickupCarrierId":2255,"PickupCarrierName":"Cardinal Logistics Ltd","L1_ResidualSplitLoad":{"_type":"L1_ResidualSplitLoad","Deleted":"N","NoOrder":"N","AutoGenerateItems":"N"}}]} 
```

注意我升级到 jqGrid 4.3.2 但没有效果。让我知道发布加载程序代码是否会有所帮助，但这实际上只是调用我们的 api 来拉回 json 并设置一些属性以将数据绑定到网格/处理错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:34:35.443

您可以将`loadComplete`其用作“afterSort”事件。这真是进行此类行动的好地方。如果需要，您可以在 event 内部设置一些变量`onSortCol`并对其进行测试，然后在`loadComplete`. 这样，您将能够区分由于更改排序顺序而重新加载网格和由于其他原因重新加载网格。

顺便说一句，jqGrid 有内部行索引。是`_index`。例如，查看[答案](https://stackoverflow.com/a/8026210/315935)以获取更多信息。此外，您可以使用jqGrid 的[getLocalRow](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L3494-3505)方法，它可以让您引用`data`by rowid 中的项目。如果需要，您可以修改[getLocalRow](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L3494-3505)方法返回的对象的任何属性。

**更新**：从您发送给我的电子邮件中，我知道您在从服务器加载数据后`data`针对方法设置了 jqGrid 的参数。`setGridParam`在这种情况下，您必须`_index`通过调用`refreshIndex`方法来重建另一个内部 jqGrid 参数。方法是table DOM的expando，对应的调用如下`$("#grid")[0].refreshIndex()`。

在大多数情况下，`_index`它将自动重建，但在您的情况下，它是未定义的。所以我认为手动重建`_index`使用`refreshIndex`方法应该可以解决你的问题。

我建议您`_index`在设置网格之后`data`和重新加载网格*之前*`.trigger("reloadGrid")`使用.

[您可以在答案](https://stackoverflow.com/a/9002088/315935)中找到有关`refreshIndex`方法用法的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:23:00.270

它使用包含排序停止事件的 jQuery-UI 可排序。你可以用它来听，

```
$('#jqgrid').on( "sortstop", function(event, ui) {
  ...
}); 
```

我没有对此进行测试，所以我不确定您需要听网格中的哪个元素。

# c# - 从 EntitySet 中取出逗号分隔的字符串

> ID：10506600
> 
> 赞同：0
> 
> 时间：2012-05-08T21:13:52.553
> 
> 标签：c#, .net, string, linq, linq-to-sql

如何转换`EntitySet<>`为字符串？即（鲍勃，乔，弗兰克）？

在下面的 LINQ`ContactType`中是一个单独的表，可以有许多值。我正在尝试将其转换为逗号分隔的字符串。

```
var caseNotes =context.tblCaseNotes
                .Where(cn => cn.PersonID == personID)
                .OrderBy(cn => cn.ContactDate)
                .Select(cn => new
                            {
                                cn.ContactDate,
                                cn.ContactDetails,
                                cn.TimeSpentUnits,
                                cn.IsCaseLog,
                                cn.IsPreEnrollment,
                                cn.PresentAtContact,
                                ContactType = string.Join(", ", cn.tblCaseNoteContactTypes.ToArray()),
                                cn.InsertDate,
                                cn.InsertUser,
                                cn.CaseNoteID,
                                cn.ParentNote
                            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:20:47.327

您必须选择`tblCaseNoteContactTypes`要连接的列

```
 ContactType = string.Join(", ", 
         cn.tblCaseNoteContactTypes.Select(x => x.MyColumn)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:17:14.973

附加`.ToArray();`在 LINQ 查询的末尾，并将其用作参数`String.Join()`

```
String.Join(", ", yourLinqQuery.ToArray()); 
```

为此，您的 LINQ 查询必须返回一个字符串，以便 Array 是一个字符串数组。或具有`ToString()`与您想要的匹配的对象。

[String.Join（字符串，对象[]）](http://msdn.microsoft.com/en-us/library/dd988350.aspx)

编辑：当您添加新信息时：

如果 tblCaseNotesContactTypes 是一个对象，则需要`.Select(t -> {return t converted to string})`在`.ToArray()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:17:53.763

检查是否为空？

`ContactType = cn.tblCaseNoteContactTypes.Any() ? string.Join(", ", cn.tblCaseNoteContactTypes.ToArray()) : String.Empty`

还，

`tblCaseNoteContactTypes`

如果这个集合的成员不是字符串，`Join`将会有一些麻烦。

# java - 使用视图作为基础容器 Android

> ID：10506603
> 
> 赞同：0
> 
> 时间：2012-05-08T21:14:05.327
> 
> 标签：java, android

这里是范围。我正在尝试创建一个基类，您将对其进行子类化并遇到一些障碍。我想创建一个返回视图的方法，以便它可以被它的任何子类覆盖，例如`ListView`, `GridView`,`TextView`等。不确定这是否可能，或者我是否以错误的方式进行操作，但这里是代码以下。

这是我班级中的基本视图方法：

```
 View backViewController()
{
    return null;
} 
```

这是子类：

```
@Override
    View backViewController()
{
    MenuList = (ListView) findViewById(R.id.backView);
    return MenuList;
} 
```

MenuList 是我在子类中创建的 ListView 并尝试代替基本视图使用。我收到的错误是“返回类型不兼容”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:45:10.187

是的，这行得通，就像 menuList 会通过继承的视图一样。所以错误一定在其他地方，检查你在eclipse中的类型层次，或者检查你是否导入了正确的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:43:36.600

R.id.backView 是 xml 布局中的 ListView 吗？

# jquery - jQuery Templates Plugin 在编译前移除外部 div 标签

> ID：10506605
> 
> 赞同：1
> 
> 时间：2012-05-08T21:14:08.883
> 
> 标签：jquery, html, templates, jquery-templates

我正在使用 jQuery 模板插件将单独的 html 文件呈现为模板。我的一个模板如下所示：

```
<div class="row">
    <div class="span4">
        test1
    </div>
    <div class="span4">
        test2
    </div>
    <div class="span4">
       test3
    </div>
</div> 
```

出于测试目的，我实际上还没有渲染任何数据。

当我使用 firebug 进行调试时，我可以看到我的 ajax 调用获取了正确的 html（与上面完全相同）。然后我使用一个 json 对象（存储在 var 中`data`）来填充我检索到的模板（存储在 var 中`template`），如下所示：

```
$.tmpl(template, data).appendTo('#person-item-placeholder'); 
```

生成的 html（由萤火虫检查）是这样的（注意缺少的`div`元素）

```
<div id="person-item-placeholder">
    <div class="span4">test1‌&lt;/div>
    <div class="span4">‌test2‌&lt;/div>
    <div class="span4">test3‌&lt;/div>
</div> 
```

如何防止模板插件删除该元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T22:24:09.510

该`jQuery.tmpl`领域的文档有点模糊

从表面上看，您尝试过的应该可以工作，但模板参数选项之一显示为：

> 模板参数可以是 .... 一个 HTML 元素（或包装元素的 jQuery 对象），其内容将用作模板。

这里的关键词是“内容”，换句话说，包装器被丢弃了，尽管它没有说在传递字符串时会发生这种情况。忽略这一点，症状与问题中的描述完全相同。

一种可能的解决方案是将模板预先包装在一个虚拟容器中，例如一个 div。

如果我是对的，那么这应该有效：

```
$.tmpl('<div>+'template+'</div>', data).appendTo('#person-item-placeholder'); 
```

或许 ：

```
$.tmpl($(template).wrap('<div/>'), data).appendTo('#person-item-placeholder'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:22:10.650

请浏览[jquery 模板文档](http://api.jquery.com/jquery.tmpl/)此页面上的示例，您遗漏了其他内容......

还要检查是否有任何丢失的标签......这一定是导致它的原因......其他一切似乎都很好......仍然与示例进行交叉检查

# c# - 在 Silverlight/PInvoke 中从剪贴板获取图像

> ID：10506607
> 
> 赞同：0
> 
> 时间：2012-05-08T21:14:14.000
> 
> 标签：c#, silverlight, winapi, pinvoke, gdi+

所以......如标题。

虽然我能够在[这里](http://imagetools.codeplex.com/discussions/273754)找到解决方案。

但解决方案是首先将图像写入临时文件并将其读入流中。

所以我一直在尝试修改解决方案，这是我尝试了**6 个小时**的案例......：

**情况1）**

直接从流中读取，而不是使用：

```
internal static extern int GdipSaveImageToStream(GpImage *image, IStream* stream, GDIPCONST CLSID* clsidEncoder, GDIPCONST EncoderParameters* encoderParams); 
```

变成：

```
[DllImport("gdiplus.dll", ExactSpelling=true, CharSet=CharSet.Unicode)]
internal static extern int GdipSaveImageToStream(IntPtr image, IntPtr stream, [In] ref Guid Encoder, IntPtr encoderParams); 
```

我试图将 IntPtr.Zero 传入流参数，但 IntPtr 的输出结果仍然为零......失败......

**案例2）**

让我们试试......像其中一篇文章所说的那样获取像素数据。

我知道我可以通过调用 GetClipboardData 来获取 HBITMAP：

```
[DllImport("user32.dll")]
static extern IntPtr GetClipboardData(uint uFormat); 
```

所以让我们尝试使用 GetBitMapBits，假设我知道图像的大小：

```
[DllImport("gdi32.dll")]
static extern int GetBitmapBits(IntPtr hbmp, int cbBuffer, [Out] byte[] lpvBits); 
```

现在至少我可以看到正在复制的数据，但 GetBitMapBits 适用于 16 位窗口......失败

**案例 3)**

好的，所以我应该使用 GetDIBits 来获取像素数据......

```
[DllImport("gdi32.dll")]
public static extern int GetDIBits(IntPtr hdc, IntPtr hbmp, uint uStartScan,
                                   uint cScanLines, [Out] byte[] lpvBits, ref BitmapInfo lpbmi, uint uUsage); 
```

但现在的问题是......我可以在哪里获得剪贴板的设备上下文......

而且，我怎么知道剪贴板图像的宽度和高度.....

在 WPF/WinForm 中，我们可以使用 FromHBitmap 方法轻松完成。除了写入文件并阅读之外，我想不出任何其他方式。或者写一个COM来解决这个问题......

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:18:40.460

经过数小时的 google、msdn 和实验……

我发现我实际上可以通过使用 IntPtr.Zero 从 hBitmap 获取 BitmapInfo ..

```
hDC = User32.GetDC(IntPtr.Zero);
Gdi32.GetDIBits(hDC, hBitmap, 0, 1, null, ref bi, DIB_RGB_COLORS); 
```

这会给我一个包含图像宽度、高度的 BitmapInfo。

然后现在我可以使用宽度和高度来计算我需要的字节数组的大小，所以现在我可以使用：

```
//Similiarly, hMemDC is also a device context that created using IntPtr.Zero.
Gdi32.GetDIBits(hMemDC, hBitmap, 0, (uint)pixelHeight, binaryData, ref bi, DIB_RGB_COLORS); 
```

有了我的 binaryData，我终于可以将它们映射到具有高度、宽度、字节 [] 的 WriteableBitmap :)

# php - 使用/从 PHP 读取 SQlite3 .db 文件：stdClass::error

> ID：10506608
> 
> 赞同：0
> 
> 时间：2012-05-08T21:14:16.990
> 
> 标签：php, database, sqlite, pdo, stdclass

我有一个可以从 SQlite 3.exe 读取的 file.db（二进制），但我想在表格中排序一段时间后回显信息。我有以下代码：

```
<?php
$db = new PDO('sqlite:file.db');
$query = $db->prepare("SELECT * FROM `Timers` LIMIT 1");
$query->execute();
while($row = $query->fetchObject())
{
    echo $row->Values;
}
?> 
```

预期结果：
512

实际结果：
注意：未定义的属性：stdClass::$Values

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:20:18.537

除非您有一个名为“值”的列——否则这是不可能的。返回的对象将具有与获取的列名称相同的属性。[http://www.php.net/manual/en/pdostatement.fetchobject.php](http://www.php.net/manual/en/pdostatement.fetchobject.php)

# html - 如何使我的页脚与内容一起推送？

> ID：10506609
> 
> 赞同：1
> 
> 时间：2012-05-08T21:14:20.633
> 
> 标签：html, css, footer

好的，所以我正在设计的页面上有这个页脚，但是我遇到了问题；页脚粘在页面底部，但内容可以超越它......这就是我的意思 - [http://i46.tinypic.com/2zted15.png](http://i46.tinypic.com/2zted15.png)。

这是我的页脚的 CSS/HTML 代码：http: [//pastebin.com/ZKCuBjhn](http://pastebin.com/ZKCuBjhn)

非常感谢先进。

编辑：这是整个页面的代码 - HTML 代码：pastebin.com/RAj11cPP --- CSS 代码：pastebin.com/0kMgb1R2

注意：代码中荒谬的
标签数量是为了证明我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:20:52.500

尝试添加`clear: both;`到您的页脚样式。很高兴看到页面其余部分的代码。

**真正的答案：**
查看您的代码后，似乎这更像是您想要的：http: [//pastebin.com/Letx9hPA](http://pastebin.com/Letx9hPA)

我将页脚的位置更改为固定，使其保持在页面底部。如果这不是您想要的，则将位置全部移除，以便可以自由地向下推。

此外，我将您的内容包装在一个内容 div 中，以便我可以在底部添加所需的垫片以使其全部可见。`padding-bottom: 100px`通过设置页脚高度添加的间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:41:43.567

您正在使用 position: absolute 的 div，因此您将其从页面的正常流程中删除，之后，上部内容将通过。

如果您之前的 html 是一个 div 或类似的包含整个上级部分的内容，则使用 div，不要“绝对定位”它，使用 width: 100% 和 margin: 0 auto; 问题不在于您的页脚，而在于页脚之前的代码。

如果它是一个 div，你必须给出一些高度，但使用最小高度，所以当它里面的内容溢出时，div 表现得很好，并将你的页脚向下推。如果您使用高度，那么 div 将采用该高度，并且您溢出的内部将泄漏。

这是一个简单的代码：

```
body {
        background-color: #d6d6d6;
    }

    .header {
        background-color: #006F8D;
        color: #fff;
        margin: 0 auto;
        width: 600px;
        height: 100px;
    }

    .center {
        background-color: #fff;
        color: #454545;
        margin: 0 auto;
        width: 600px;
        min-height: 100px;
    }

    .footer {
        background-color: #fff;
        color: #454545;
        margin: 0 auto;
        width: 600px;
        height: 50px;
        border-top: 1px solid #ccc;
    } 
```

这是 CSS，现在是 HTML：

```
<div class="header">menu 1 - menu2 - menu3</div>
    <div class="center">Middle<br />
    Middle<br />
    Middle<br />
    Middle<br />
    Middle<br /><br />
    v
    v
    Middle<br /><br />Middle<br /><br />Middle<br /><br />v
    v<br />v
    Middle<br /><br />v
    v<br />Middle<br />
    v
    v
    v
    v
    v
    v
    vMiddle<br />Middle<br />Middle<br />Middle<br />
    <br />Middle<br />Middle<br />Middle<br />Middle<br />Middle<br />Middle<br />Middle<br />
</div>
<div class="footer">Footer</div> 
```

如果您需要绝对定位您的页脚，那么答案是另一个。澄清一下，我会回答另一个问题。

编辑：你的代码和我的（没有使用你的css和上帝，不要使用不推荐使用的标签！！！！字体，中心等）

```
 <style type="text/css">
           .header {
        background-color: #006F8D;
        color: #fff;
        margin: 0 auto;
        width: 600px;
        height: 100px;
    }

    .center {
        background-color: #fff;
        color: #454545;
        margin: 0 auto;
        width: 600px;
        min-height: 100px;
    }

    .footer {
        background-color: #fff;
        color: #454545;
        margin: 0 auto;
        width: 600px;
        height: 50px;
        border-top: 1px solid #ccc;
    }
</style>
</head>
<title>Website Homepage</title>
<body>

<!--====================Begin Navigation Bar========================-->
<div class="header" id="navigation">
<div style="float:left;">
    <a href="index.html">Home</a>
    <a href="signup.html">Sign Up</a>
    <a href="login.html">Login</a>
    <a href="#">Link</a>
    <a href="#">Link</a>
    <a href="#">Link</a>
</div>
 </div>
<!--====================End Navigation Bar==========================-->

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<!--====================Begin Content Area======================-->
<div class="center" style="padding:10">
See my problem?
</div>
<!--====================End Content Area========================-->

    <!--====================Begin Footer========================-->

<div class='footer'>
<div style="padding-top:20px;">

                Website. All Rights Reserved.

<form action="http://www.google.com/search" method="get" onSubmit="Gsitesearch(this)">
<input name="q" type="hidden" />
<input type="text" placeholder="Search our site..." name="qfont" /> <input type="submit" value="Search" />
</form>
</div>
</div>

    <!--====================End Footer==========================-->

</body>
</html> 
```

# javascript - JQuery - 一起添加选定的元素 - 组合子选择器

> ID：10506615
> 
> 赞同：1
> 
> 时间：2012-05-08T21:14:49.690
> 
> 标签：javascript, jquery

我想结合我的选择器，它根据鼠标悬停事件选择一个元素。这就是我到目前为止所拥有的。

```
parentItem.mouseenter(function ()
{
    var childItems = $(this).add(this + "li:first");
    childItems.show();
}); 
```

我知道我不能单独使用“this”，也不能将两者加在一起，因为它不是字符串。

我将如何实现这个概念？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:21:36.837

你不能这样做`this + "li:first"`，`this`是一个 DOMElement，而不是一个字符串。做就是了：

```
$(this).add("li:first"); 
```

虽然，这可能不是你想要的。这将`<li>`在页面上找到第一个（并将其添加到包含 的 jQuery 对象中`this`）。

如果你想要第一个`<li>`是 的孩子`parentItem`，试试这个：

```
$("li:first", this); 
```

（这与 相同`$(this).find("li:first");`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:21:53.037

如果我理解正确，您正在尝试选择`li`触发事件的元素下的第一个？您可以`this`用作*上下文*：

```
parentItem.mouseenter(function ()
{
    var childItems = $("li:first",this);
    childItems.show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:19:54.350

您不能连接`this`（在这种情况下是 DOM 元素），因为它不能被强制转换为字符串。 `.add`只需将更多元素添加到集合中。 `$(this)`已经与当前元素匹配（即鼠标悬停），因此这似乎可以满足您的需要：

```
$(this).add("li:first").show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:21:43.500

> 我想结合我的选择器，它根据鼠标悬停事件选择一个元素。这就是我到目前为止所拥有的。

您没有指定要实现的目标，但是您可以使用 next() prev() child() parent() jQuery 方法

编辑：Ayways 是您的目标只是简单地选择父母孩子的第一个元素吗？

# f# - 在 F# 中存根记录

> ID：10506618
> 
> 赞同：1
> 
> 时间：2012-05-08T21:14:55.140
> 
> 标签：f#, nsubstitute

由于 F# 记录是真正的密封类，我不能存根记录类型。是否有一个属性我可以放在 F# 中的记录上，这样它就不会被编译为密封，以便我可以存根记录？

```
type Quote = {a:string}

mock<Quote> 
```

这抛出

> System.TypeLoadException：无法从程序集“DynamicProxyGenAssembly2，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”加载类型“Castle.Proxies.QuoteProxy”，因为父类型是密封的。

如果你很好奇。这是模拟的定义：

```
let mock<'typee when ^typee : not struct> = Substitute.For<'typee>() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T21:23:48.537

我认为没有办法告诉 F# 编译器将 F# 记录生成为非密封类。

但是，问题是，为什么要存根记录？我的理解是存根用于模仿某种类型的某些功能。但是 F# 记录是由编译器生成的，因此如果您信任 F# 编译器，则不需要模拟它们，因为它们的行为总是可以预测的。

如果你想在记录中添加一些成员，那么你可以模拟这些。为此，您可以定义一个接口，在记录类型中实现它并为该接口生成存根：

```
type IFoo = 
  abstract Foo : int -> int

type Bar = 
  { Number : int }
  interface IFoo with
    member x.Foo(n) = n + x.Number 
```

通常，仅通过检查操作是否为指定的输入给出正确的结果，就可以测试以函数式编写的代码。测试内部实现调用一些其他操作（即使用存根）的需要较少。当然，这可能并不总是适用于您与其他组件互操作的实际场景......

# sencha-touch - 商店不从远程 URL 加载？

> ID：10506619
> 
> 赞同：-1
> 
> 时间：2012-05-08T21:14:58.080
> 
> 标签：sencha-touch, extjs, sencha-touch-2

只是试图让一个面板充满一个从商店填充自己的列表。我得到的只是一个空白窗口。它甚至没有在 Chrome 的网络窗口中发送 HTTP 请求。

列表：

```
myapp.companies_list = {
        fullscreen: true,
        title: 'Companies',
        iconCls: 'info',
        xtype: 'list',
        itemTpl: '{name}',
        store: {
            fields: ['name'],
            autoload: true,
            proxy: {
                type: 'jsonp',
                url: base_url+'/index.php/mobile/companies',
                reader: {
                    type: 'json',
                    rootProperty: 'companies'
                }
            }
        },
        listeners:{
            initialize: function(){
                this.getStore().load();
            }
        }
    } 
```

如果没有听众，这将*无法工作。*为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:58:43.747

它是**autoLoad**，而不是**autoload**。注意大写**L**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:06:03.057

我有同样的问题，我将代理设置放入模型而不是存储和自动加载工作。

如果不起作用，您可以将 jsonp 更改为 ajax 或休息。

# android - 结合 Maven/Ant+Ivy 构建管理对双平台桌面/Android 部署的敏感性？

> ID：10506624
> 
> 赞同：2
> 
> 时间：2012-05-08T21:15:32.647
> 
> 标签：android, maven, ant, m2eclipse, ivy

我目前正准备开始一个新项目，并且想知道构建管理工具的选择（Maven 和 Ant+Ivy 的非排他性替代品）。

一般情况如下：

*   小型，多人项目，
*   所有开发人员都使用 Eclipse 作为 IDE，
*   两个目标：Android（主要）和 Java SE，
*   我们将在 CI（特别是 Jenkins）中，因此需要某种构建管理。

关于设想的项目结构：

*   一个通用模块，包含大部分代码和常见依赖项，
*   一个特定于 Android 的模块，带有特定于 Android 的 deps 和代码，
*   一个特定于桌面的模块，带有特定于桌面的 deps 和代码。

以及非技术方面的考虑：

*   在项目中，我是负责构建管理和 CI 的人，
*   我有使用 Maven 和 Ant 的经验，但在配置前者方面有更多的实践，
*   只有常春藤的基本知识，
*   我在将 Maven 用于 Android 构建方面的经验非常复杂，尤其是在与 Eclipse 的互操作方面。

> 目前看起来最好的选择是使用：
> 
> 1.  用于基础（和桌面）项目的 Maven，
> 2.  用于 Android 项目的 Ant+Ivy。

表面上看起来会很好，但我的直觉告诉我，涉及这么多技术可能最终在实践中会很痛苦。

总而言之，我的问题是：

**给定条件，是否可以使用块引用中描述的设置，或者我们应该使用纯 Maven/Ant+Ivy（如果是，是哪一个以及为什么）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T23:00:51.070

## 哪一个？

我会采用纯 Maven 方法。

## 为什么？

您描述的场景非常适合[Aggregation （或 Multi-Module](http://maven.apache.org/pom.html#Aggregation)）项目，根据我自己的经验，与 Ant 相比，Maven 提供了一种更有效、更合理、更原生的方式来管理具有模块间依赖关系的多模块项目。

您的项目结构：

```
my-project/
  common-lib/  <-- classic Java project, build as a jar library
  desktop-app/  <-- classic Java project, build as a jar application
  android-app/  <-- Android project, build as a apk application
  android-app-test/ <-- Android Test project, build as a apk application
  pom.xml 
```

你的根 pom.xml：

```
<modules>
  <module>common-lib</module>
  <module>desktop-app</module>
  <module>android-app</module>
  <module>android-app-test</module>
</modules> 
```

通过使用[android-maven-plugin](http://code.google.com/p/maven-android-plugin/)，您可以维护一个标准和统一的方式来从命令行跨团队发布您的多模块项目（更准确地说，android-maven-plugin 用于构建 Android 子模块项目的发布） .

通过使用两个 Eclipse 插件：m2e 和 m2e-android（均可通过 Eclipse Marketplace 获得），您可以在 Eclipse 跨团队中维护一个标准和统一的方式来导入/开发/调试您的多模块项目。

由于 Maven 具备管理一切的资格，因此无需使用 Ant+Ivy。

# java - 如何从 cassandra-jdbc ResultSet 获取列名？

> ID：10506636
> 
> 赞同：0
> 
> 时间：2012-05-08T21:16:53.007
> 
> 标签：java, cassandra

将 CQL 语法与 cassandra-jdbc 驱动程序一起使用....这不起作用，只需获取空字符串：

```
 PreparedStatement pstmt = conn.prepareStatement("select * from myCF");
      ResultSet rset = pstmt.executeQuery();
      ResultSetMetaData rsmd = rset.getMetaData();
      int cols = rsmd.getColumnCount();
      pset.next();
      print rsmd.getColumnName(0);
      print pset.getString(0);
      ... 
```

显然我必须每行使用 unwrap 或类似的东西......当你不知道列名时，请发布完整的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:09:32.693

好的，这是有效的：

```
 ResultSet res = pstmt.executeQuery();
    CassandraResultSet crs = res.unwrap(CassandraResultSet.class);
    crs.next() ;
    ResultSetMetaData rsmd = crs.getMetaData();
        cols = rsmd.getColumnCount();
        for(int i=1 ; i <= cols ; i++) {
          String colNm = rsmd.getColumnName(i);
          String colVal = null;
          String colType = rsmd.getColumnTypeName(i);
          if (colType.equals("JdbcLong")) {
              colVal = "" + crs.getLong(i);
          } else if (colType.equals("JdbcInteger")) {
              colVal = "" + crs.getInt(i);
          } else {
              colVal = crs.getString(i); 
```

请注意，为了正确显示键、列名和值，我必须定义一个列族，如下所示：

```
NOTE: you wont be able to understand your column names and values unless
you set the Cassandra Type hints via cassandra-cli.  To have a schema like below
where all un-referenced column types are UTF8Type:
   CREATE COLUMN FAMILY  MyColFam  WITH key_validation_class=UTF8Type
     AND default_validation_class=UTF8Type AND comparator=UTF8Type
     AND column_metadata = [ 
          {column_name: an_integer_column, validation_class: IntegerType}
         {column_name: a_long_column,     validation_class: LongType}
     ]; 
```

# performance - JavaFX 2 绘图性能

> ID：10506637
> 
> 赞同：7
> 
> 时间：2012-05-08T21:16:53.867
> 
> 标签：performance, drawing, javafx-2

感觉JavaFX 2的绘图性能比Swing差。我认为原因之一是您如何绘制事物，例如，在绘制线条时，必须为每条线创建一个[Line](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/Line.html)对象并将其添加到某个容器中，而在 Swing 中，只需获取一次 Graphics2D，然后在不创建每次都有新对象。那么，有没有更高效的方式来使用 JavaFX 2 进行绘制，例如，如果您必须绘制大约 3000 条弧线？什么是最好的“绘图表面”？目前我正在使用[Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)。感谢您的任何提示！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T23:56:52.553

您当前使用组的方法可能很好，并且您可能会发现在您的组内绘制 3000 条弧线的性能对于您的应用程序用户来说是完全可以接受的。

当前使用组的替代方法是使用布局窗格，这将添加一些方便的功能，但会增加额外的开销层，当您有数千个易于手动布局的对象时，这是不必要的。

有关JavaFX 2.2 即将推出的直接绘制接口（称为 Canvas 节点）及其含义的讨论，请参阅[JavaFX 邮件列表存档。](http://mail.openjdk.java.net/pipermail/openjfx-dev/2012-April/001210.html)

尽管将对象粘贴到容器中似乎性能较差，但如果需要，容器实现可以利用现代 GPU 中内置的加速保留模式渲染硬件。另请注意，JavaFX 架构在内部跟踪脏区并缓存昂贵的渲染操作的结果以提高性能。因此，容器的使用本身并不意味着比可能依赖于立即模式实现的直接绘制接口更慢的性能。

选择绘图表面将取决于应用程序。大多数 JavaFX 应用程序的最佳表面将是场景图节点的集合，而不是画布节点。在场景图中使用多个节点而不是单个 Canvas 节点（通常）会更容易开发，并且性能将完全可以接受。

最终，很可能会写很多博客文章来比较 Canvas 与许多场景图对象的性能，并可能与其他框架（如 html canvas、java2d、swing 等）进行比较。因此，及时回答这样的问题会更容易.

*有关的*

Osvaldo 的[JavaFX 性能分析](http://weblogs.java.net/blog/opinali/archive/2011/11/25/javafx-balls-30)虽然很老，但也包含对您问题中提出的一些问题的深入讨论。

在[openjfx wiki](https://wiki.openjdk.java.net/display/OpenJFX/Main)中有一个很好的关于[性能提示和技巧](https://wiki.openjdk.java.net/display/OpenJFX/Performance+Tips+and+Tricks)的部分。

有一些相关的 StackOverflow JavaFX 性能问题：

*   [JavaFX 2 路径绘制性能](https://stackoverflow.com/questions/12733051/javafx-2-path-drawing-performance)
*   [在 Java 中显示数百万张图像的最佳方式是什么？](https://stackoverflow.com/questions/14467719/what-could-be-the-best-way-to-view-millions-of-images-with-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:46:47.587

在 JavaFX 2.2 中，计划添加一个类似的对象，`HTML5 Canvas`它非常适合您绘制大量 primitev 的需要。

有关详细信息，请参阅下一期附加的文档：http: [//javafx-jira.kenai.com/browse/RT-17407](http://javafx-jira.kenai.com/browse/RT-17407)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T11:57:51.550

查看[Pixel Graphics](http://www.javaworld.com/community/node/8373)实验帖子中的**提示**。有两种方法，第一种`Group`是使用`ImageView`的，另一种是使用的。虽然我自己没有尝试过，但作者说这种`ImageView`方法更快并且具有更好的可视化效果。另一方面，它使用不推荐使用的 API 方法。

# c - 使用 poll/select 一次读取一个字节

> ID：10506653
> 
> 赞同：0
> 
> 时间：2012-05-08T21:18:30.147
> 
> 标签：c, operating-system

我正在尝试读取设备的文件描述符。使用 poll/select 使用以下代码。我能够读取设备的字节。我想知道何时是退出循环的正确时间。我是一次读取一个字符。一旦它读取了我需要从循环中退出的所有字节。我该如何完成。

```
while (continue_reading) 
{   n = read(radioFd, &rc, 1);
        if(rc == START_OF_FRAME)
        {
             start_buffering = 1;
             printf("SOF found \n");
        }
        if(1 == start_buffering)
        {
             read_buffer[read_count] = rc;
             read_count += n;
        } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:36:01.750

如果您的设备表现得像文件，则必须测试读取返回值 (n) 是否为 0（文件结尾）。并且您还需要测试它是否为 -1，以识别错误并检查 errno。

# html - HTML iFrame 定位

> ID：10506655
> 
> 赞同：0
> 
> 时间：2012-05-08T21:18:33.763
> 
> 标签：html, iframe

这是有关此问题的代码的链接：http: [//virtual.weltec.ac.nz/s13/blog/blog.html](http://virtual.weltec.ac.nz/s13/blog/blog.html)

基本上，我想移动我的 iFrame，使其在我的 CSS 菜单栏下对齐。做这个的最好方式是什么？是否有诸如“坐标”标签之类的东西可以将其准确定位在我想要的位置，或者以其他方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:22:07.913

也许如果你让它显示为块元素？

```
ul, iframe{
    display:block;
} 
```

# google-sheets - 使用电子表格使用 setHtmlContent 更新 Google 站点中的所有页面

> ID：10506656
> 
> 赞同：0
> 
> 时间：2012-05-08T21:18:43.937
> 
> 标签：google-sheets, google-apps-script, google-sites

我是一个新手，试图从 James Ferreira 的优秀书籍中修改脚本，但遇到了麻烦。我想使用 setHtmlContent 从电子表格更新 Google 网站中的所有现有页面。我可以更改一页，但不是全部。这可能吗？这是我正在使用的脚本：

```
function updatePages()
{
  var pages = SitesApp.getSite('site', 'scriptbetatest').getAllDescendants();
  var key =  '00000000000000000000000000000000000';
  var sheet = 'Sheet1';
  var ss = SpreadsheetApp.openById(key).getSheetByName(sheet);
  var productDetails = rangeToObjects(ss.getDataRange().getValues());

  for (var i = 0; i < productDetails.length; ++i)
  {
    var page = pages[0].setHtmlContent('<div>'+'</div>')
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:29:22.143

看起来好像你想用 i 替换零：

```
var page = pages[i].setHtmlContent('<div>'+'</div>') 
```

# android - Android - 多线程导致应用程序崩溃

> ID：10506657
> 
> 赞同：1
> 
> 时间：2012-05-08T21:18:44.423
> 
> 标签：android, multithreading

嗨，每次在我的游戏中破坏某些东西后，我都会创建一个爆炸动画的新对象，该对象是通过在我的表面视图线程中使用线程类来完成的。在短时间内摧毁多艘船后，应用退出活动。为什么是这样？

```
explosion ex = new explosion(x,y);
ex.start(); 
```

和

```
class explosion extends Thread implements Runnable{

    private long startTime;
    private int num = 0;
    private int x;
    private int y;
    public explosion(int mx, int my){
        x = mx;
        y = my;
        startTime = System.currentTimeMillis();
    }
    public void run(){
        while(num < 3){
            long millis = System.currentTimeMillis();
            canvas.drawBitmap(explosions.get(num),x,y,null);
            if(millis - startTime > 50){
                startTime = System.currentTimeMillis();
                num++;
                Log.d("Explosion","Animate");
            }
        }
        Log.d("Explosion","End Thread");
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:22:41.043

从developer.android复制...

> 不管你是否使用 AsyncTask，请始终记住这两条关于单线程模型的规则：
> 
> - 不阻塞 UI 线程，
> 
> - 并确保您仅在 UI 线程上访问 AndroidUI 工具包。

我相信这条线会导致你崩溃......

```
canvas.drawBitmap(explosions.get(num),x,y,null); 
```

此链接详细说明了在另一个线程上更新 UI 的步骤：

[http://developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:29:57.527

它闻起来像一个设计问题。为什么要为动画运行线程？恕我直言，我认为您应该在当前线程中运行它并使用基于时间的动画。您几乎不需要更改您的代码，因为它已经是基于时间的。

# c# - 更改父引用后刷新属性的绑定

> ID：10506658
> 
> 赞同：2
> 
> 时间：2012-05-08T21:18:59.787
> 
> 标签：c#, .net, wpf, binding

假设我有一个 ViewModel，上面有一个名为 Customer 的属性。当客户更改时，它会引发 NotifyPropertyChanged。

Customer 类上有其他属性（在 setter 中都会引发 NotifyPropertyChanged）。例如，它具有 FirstName 和 LastName 字符串。其中的另一个属性称为地址。

Address 具有 Line1、Line2、Zip、State 等属性。它们在更改时也会引发 NotifyPropertyChanged。

我有直接绑定到这些元素的 UI 元素。我发现当我做这样的事情时：

```
CurrentCustomer = FoundCustomer; 
```

我的 BoundControls 中的 FirstName 和 LastName 等项目正在更新，但 Line1、Line2、Zip 和 State 没有。

我已经尝试过制作这样的 Address 的 ViewModel 实例：

```
CurrentAddress = FoundCustomer.Address; 
```

当我这样做时，绑定的属性会正确更新。

有什么我缺少的绑定吗？它只更新一层吗？还是只有值（不是参考）对象？

或者这应该有效，我需要仔细查看我的绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:52:03.213

尝试在 setter 中提升 NotifyPropertyChanged，仅在需要提升属性时尝试在代码中的某处提升属性。

# mysql - Grails：将枚举类型的mysql字段映射到域类

> ID：10506659
> 
> 赞同：4
> 
> 时间：2012-05-08T21:18:59.990
> 
> 标签：mysql, grails, grails-orm, grails-domain-class

**如何将枚举类型的 mysql 字段映射到 grails 域类？**

我正在使用带有 grails v.2.0.3 的现有（旧版）mySQL 数据库。我收到错误列类型的错误：

```
failed; nested exception is org.hibernate.HibernateException: Wrong column type in
facilities.ost_fac_syslog for column log_type. Found: enum, expected: varchar(255) 
```

SQL字段定义为：

```
mysql> describe ost_fac_syslog;
+------------+---------------------------------+------+-----+--------------------
| Field      | Type                            | Null | Key | Default    
+------------+---------------------------------+------+-----+----------------------+
| log_id     | int(11) unsigned                | NO   | PRI | NULL    auto_increment |
| log_type   | enum('Debug','Warning','Error') | NO   | MUL | NULL    |                | 
```

我的域类是：

```
class OstFacSyslog {
    static mapping = {
       table 'ost_fac_syslog'
       version false
       id column: 'log_id', name:'logId'
       logType column: 'log_type', type: 'enum', name: 'logType'
    }

    Integer logId
    LogType logType

    enum LogType {
        Debug('Debug'), Warning('Warning'), Error('Error')
            private final String toString
        LogType(String toString) {this.toString = toString}
        String getName() {name()}
        String toString() {toString}
    }
} 
```

谢谢，我很感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T21:45:36.177

您需要指定列`sqlType`而不是 (Java) `type`。更改您的映射：

```
static mapping = {
    ...
    logType column: 'log_type', type: 'enum', name: 'logType'
} 
```

到：

```
static mapping = {
    ...
    logType column: 'log_type', sqlType: 'enum', name: 'logType'
} 
```

# linq - 使用 Linq 选择表 A 中的记录时检查表 B 中的字段值

> ID：10506662
> 
> 赞同：0
> 
> 时间：2012-05-08T21:19:12.477
> 
> 标签：linq, linq-to-sql

希望我能说清楚：我有一个带有 CategoryID 的类别表和一个可用的布尔字段。

```
 Dim catquery = _
         From cat In SQLEngine.DigiwaiterSQLDataSet.Categories
         Where cat.Field(Of Boolean)("Available") = True
         Select cat 
```

我还有一个产品表，其中包含一个可用的布尔字段和一个 CategoryID，它指示产品所属的类别。

```
Dim prodquery = _
         From prod In SQLEngine.DigiwaiterSQLDataSet.Products
         Where prod.Field(Of Boolean)("Available") = True
         Select prod 
```

我如何使用 LINQ 检查类别表/Catquery 以查看产品的类别是否可用？

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:56:32.883

您可以使用联接：

```
Dim prodquery = _
         From prod In SQLEngine.DigiwaiterSQLDataSet.Products
         Join cat in SQLEngine.DigiwaiterSQLDataSet.Categories
             On prod.Field(Of Int32)("CategoryId") Equals cat.Field(Of Int32)("CategoryId")
         Where prod.Field(Of Boolean)("Available")
         AndAlso cat.Field(Of Boolean)("Available")
         Select prod 
```

（我删除了`= True`部分，这没用）

# javascript - 信息框 padding-left

> ID：10506663
> 
> 赞同：4
> 
> 时间：2012-05-08T21:19:12.877
> 
> 标签：javascript, css, google-maps-api-3, dom

我正在使用 Google Maps API3 和 InfoBox 扩展创建地图：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)

我可以向信息框添加整体填充，例如：

```
var infoOptions = {
disableAutoPan: true,
closeBoxURL: "",
pixelOffset: new google.maps.Size(20, 0),
boxStyle: { background: "#ffffff", padding:"4px" }
}; 
```

但是当我尝试将其更改为仅左填充时，它会导致地图不显示：

```
var infoOptions = {
disableAutoPan: true,
closeBoxURL: "",
pixelOffset: new google.maps.Size(20, 0),
boxStyle: { background: "#ffffff", padding-left:"4px" }
}; 
```

我在两者之间所做的唯一更改是在填充样式器的末尾添加“-left”。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:48:01.653

我最终弄清楚了如何使它工作。诀窍是使用 HTML DOM 属性而不是 CSS，所以在我的例子中是：

```
boxStyle: { background: "#ffffff", paddingLeft:"4px" } 
```

而不是我之前的。

# iphone - 当项目有多个目标时，kCFBundleNameKey 返回 null

> ID：10506665
> 
> 赞同：2
> 
> 时间：2012-05-08T21:19:25.480
> 
> 标签：iphone, xcode, null, bundle, nsbundle

我试图通过使用 kCFBundleNameKey 来获取包的短名称

```
NSString *shortBundleName=[[NSBundle mainBundle] 
        objectForInfoDictionaryKey:(NSString *) kCFBundleNameKey]; 
```

它工作正常但是当我有多个目标由于某种原因它返回 null 时，是否有解决方法？

获取捆绑包工作正常：

> NSString *fullBundleName=[[NSBundle mainBundle] objectForInfoDictionaryKey:(NSString *) kCFBundleIdentifierKey];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-18T09:10:57.230

核心基础/CFBundle.h：

```
CF_EXPORT
const CFStringRef kCFBundleNameKey;
/* The human-readable name of the bundle.  
This key is often found in the InfoPlist.strings 
since it is usually localized. */ 
```

所以，你应该注意你的目标 info.plist

# php - Mysql对字谜求解器的多个查询

> ID：10506668
> 
> 赞同：3
> 
> 时间：2012-05-08T21:19:37.077
> 
> 标签：php, mysql, anagram

我有一个名为“字典”的简单但巨大的表，它有 2 列。ID 和单词。我有一个 php 字谜算法，它可以创建给定单词的所有可能组合。我想检查该词是否存在于我的字典中，如果存在则显示它。但我必须使用太多查询。例如，一个 9 个字母的单词是 362880 个组合。知道如何减少数据库调用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:22:57.337

尝试这样的事情：

```
SELECT word
FROM dictionary
WHERE word LIKE '%a%a%a%'
AND word LIKE '%n%'
AND word LIKE '%g%'
AND word LIKE '%r%'
AND word LIKE '%m%'
AND CHAR_LENGTH(word) = 7 
```

更好的是，将排序后的字母排列与单词一起存储，并在查询时对字母进行排序。

```
SELECT word
FROM dictionary
WHERE sorted_word = 'aaagmnr' 
```

添加索引以`sorted_word`获得最佳性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:22:52.307

只为一个查询尝试这样的事情，虽然我不知道这样的查询会有多有效：

```
$possibilities = array( "at", "ta");
$sql = 'SELECT * FROM dictionary_table 
            WHERE word IN ("' . implode( '", "', $possibilities) . '")'; 
```

这将生成 SQL 查询：

```
SELECT * FROM dictionary_table 
            WHERE word IN ("at", "ta") 
```

好处是查询是动态的，所以无论`$possibilities`有多少，这在理论上都是可行的。为了提高效率，我肯定会索引该`word`列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:23:03.783

是的，首先将所有排列直接放入 php。其次，做这样的查询

```
SELECT myWord FROM myTable
WHERE myWord in (LIST OF PERMUTATION FROM PHP) 
```

哪里`LIST OF PERMUTATION`可以这样计算`"' . implode( '", "', $permutations) . '"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:25:15.090

我不知道您的表有多大，但是如果您在服务器上有足够的内存并且您必须在请求中多次执行此操作 - 将数据库加载到 php 并让 php 执行此操作，可能使用关联数组。

编辑：或者：将所有组合输入到一个数组中，将其拆分为大小为 100 的垃圾并使用准备好的语句。

# android - 通过 BroadcastReceiver 替代 FileObserver？

> ID：10506677
> 
> 赞同：3
> 
> 时间：2012-05-08T21:20:11.903
> 
> 标签：android, broadcastreceiver, android-manifest, android-service, android-activity

我需要监视放置在 SD 卡中的文件（递归）。由于广播接收器可以通过设置特定的意图过滤器“动作”来接收系统事件，我们大概可以使用它来处理打开、删除等文件更改事件。我们只需要知道什么是“动作”、“类别”和“数据” " 值将与要使用的任何特定“用户权限”一起在清单文件中设置。

另一种方法是实现 FileObserver 但这有垃圾收集的问题，即使我们创建一个服务来保存它的对象，服务本身也可能在资源不足时终止（点 5.2 [http://www.vogella.com/articles/ AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)）所以它不完全是一个完整的证明方法。

您能否告诉我哪些配置值将使 BroadcastReceiver 能够接收此类事件/意图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:56:11.847

> 由于广播接收器可以通过设置特定的意图过滤器“动作”来接收系统事件，我们可以使用它来处理文件更改事件，如打开、删除等。

不会。普通的 Java I/O 操作不会产生广播。

> 另一种方法是实现 FileObserver 但这有垃圾收集的问题，即使我们创建一个服务来保存它的对象，服务本身也可能在资源不足时终止......所以它不是一个完整的证明方法。

除了修改固件之外，没有“万无一失”的方法可以让您持续监控外部存储操作。

我会使用`AlarmManager`用户选择的轮询周期定期扫描目录的更改，以便他们可以控制您的应用程序的电池和 CPU 消耗。

# c++ - RegEnumValue 使应用程序崩溃

> ID：10506680
> 
> 赞同：1
> 
> 时间：2012-05-08T21:20:19.573
> 
> 标签：c++, winapi, registry

我目前正在学习如何使用 c++ 处理注册表。我制作了一个应用程序，应该查看某个键中的某个值是否存在。但是，应用程序一到达 RegEnumValue() 就会崩溃。有什么想法可能是什么问题？

代码：

```
#include <iostream>
#include <windows.h>
#include <Psapi.h>

using namespace std;

bool registerKeyExists(char* key, char* subkey);

int main()
{
    while(true){
        if(registerKeyExists("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", "SynTPEnh")){
            return 0;
        }
    }

    return 0;
}

bool registerKeyExists(char* key, char* subkey){
    HKEY keyEnum;
    if(RegOpenKeyEx(HKEY_LOCAL_MACHINE, key, 0, KEY_READ, &keyEnum) == ERROR_SUCCESS){
        char* valueName;
        DWORD valueSize = 100;
        DWORD cbName;
        FILETIME lastFiletime;
        DWORD i = 0;
        DWORD returnCode = ERROR_SUCCESS;
        while(returnCode == ERROR_SUCCESS){
            cout << "This show!" << endl;
            returnCode = RegEnumValue(keyEnum, i, valueName, &valueSize, NULL, NULL, NULL, NULL);
            cout << "This doesn't show!" << endl;
            if(valueName == subkey)
                return true;
            i++;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:21:51.190

您没有为值的名称提供任何空格。您正在传递一个未初始化的指针`valueName`，`RegEnumValue()`它拒绝（显然是通过使您的应用程序崩溃）。请尝试以下操作：

```
char valueName[100];
DWORD valueSize = sizeof(valueName); 
```

这将为返回的值名称保留 100 个字符。

您还需要使用`strcmp()`而不是`==`测试字符串值：

```
if (strcmp(valueName, subkey) == 0) ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T21:32:10.000

来自 RegEnumValue() 的 SDK 文档：

```
LONG WINAPI RegEnumValue(
  __in         HKEY hKey,
  __in         DWORD dwIndex,
  __out        LPTSTR lpValueName,         // <=== here
  __inout      LPDWORD lpcchValueName,
  __reserved   LPDWORD lpReserved,
  __out_opt    LPDWORD lpType,
  __out_opt    LPBYTE lpData,
  __inout_opt  LPDWORD lpcbData
); 
```

请注意`__out`lpValueName 参数上的 SAL 注释。这意味着“将通过您提供的指针进行*写入”。*特别是，写下 SDK 文章其余部分中记录的值的名称。

问题是，您没有传递指向可写入内存的初始化指针。一个足以接收字符串的 TCHAR[] 数组，如下一个参数 lpcchValueName 所示。你让它未初始化。并谎称您为数组分配了 100 个字符。

卡布姆。

# project-management - 使用看板基础/精益开发时的容量规划

> ID：10506682
> 
> 赞同：1
> 
> 时间：2012-05-08T21:20:25.040
> 
> 标签：project-management, estimation, kanban, capacity-planning

我们目前正在使用 Scrum 帮助开发一组 C++ 和 C# 软件库。领域的性质使得我们需要对不断变化的需求做出相当大的反应——以至于由于高水平的紧急工作，冲刺计划往往最终成为浪费时间。我认为是时候切换到精益（看板）开发模型而不是 Scrum，因为过去这对我们来说效果很好。

不过，我还想，我希望能够向我的经理证明我的团队人手不足。我不清楚如何有效地做到这一点，因为精益方法支持在任务估计上花费的时间非常少。我应该鼓励我们的客户（和我的经理）关注工作的优先级，而不是每个功能需要多长时间。问题是，我们还有一个艰难的最后期限要完成，他们想知道我们可以完成它。为了承诺，我觉得有必要衡量事情并计算我认为我需要的员工！

问题是，如果我的团队正在使用专注于优先级的流程，我不知道如何为更多员工提出论据——我需要估计我们期望完成的所有工作，然后提出数字来证明“我们需要 X 更多的人”。

本质上，我想我是在问，当您采用精益、敏捷的流程时，是否有人有任何好的技巧来衡量团队能力，并提出改变团队能力的理由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:12:44.713

在看板中，您可以设置“服务等级”并为每个等级分配“服务等级协议”。

例如，阻碍客户的问题是第一优先级，甚至可能导致我们超出 WIP 限制并从正在进行的工作切换到满足。这样的工作将在 3 天内完成 90% 的时间。（此类协议应源自真实数据，如果您每天记录项目状态，您将开始积累这些数据，例如，在累积流程图中。）

除了服务等级和 SLA，您还可以规定团队 20% 的时间应该花在这些紧急（“加急”）问题上，60% 用于正常工作（例如功能开发），也许 20% 用于持续改进、卫生、技术故事等。

如果你能在这方面得到管理层的同意，然后如果你能证明你将 60% 的时间花在紧急消防问题上，那么你就可以证明你需要更多的团队成员才能变得“正常”（预期）的东西完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:54:00.613

你有详细的功能列表吗？如果是这种情况，您可以这样处理：

*   列出您的功能，并为每个功能列出您的故事。
*   然后与您的团队一起尝试估算故事：比较具有相似功能的每个故事来估算它。您还可以使用一些估算工具，例如规划扑克。
*   计算延迟并尝试与您的经理一起找出下一个版本需要什么。让他参与决策，如果您需要删除某些功能或让更多人参与此过程，他会亲自查看。

# c# - 在 Silverlight 和 TextBlocks 中绑定时的 string.format 类型？

> ID：10506684
> 
> 赞同：0
> 
> 时间：2012-05-08T21:20:29.167
> 
> 标签：c#, silverlight, xaml, binding

我有这样的 XAML。基本上它连接了多个绑定到不同属性的字符串。假设出于某种原因，我不想在 VM 上公开另一个属性以将其作为单个属性。

是否有任何其他 XAML 绑定方法可以使其更紧凑？

```
<StackPanel Grid.Column="1" Orientation="Horizontal">
    <TextBlock Text="Added by " FontSize="10" Foreground="#2C2C2C" />
    <TextBlock Text="{Binding Document.MEMUser.UserName}" Foreground="#2C2C2C" FontSize="10" />
    <TextBlock Text=" on " FontSize="10" Foreground="#2C2C2C"/>
    <TextBlock Text="{Binding CreatedOn, Converter={StaticResource DateTimeToStringConverter}}" Foreground="#2C2C2C" FontSize="10" />
    <!--BIND COMMANDS TO PARENT ViewModel to process operations-->
    <Button Content="Delete" Command="{Binding DataContext.DeleteCommand, ElementName=LayoutRoot}" CommandParameter="{Binding}" />
    <Button Content="Download" Command="{Binding DataContext.DownloadCommand, ElementName=LayoutRoot}" CommandParameter="{Binding}" />
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:34:46.067

您可以使用转换器连接所有字符串，您需要传递一些包含所有所需属性的对象实例。

旁注：您可以在 StackPanel 中将字体大小和前景设置为 TextBlock.FontSize 和 TextBlock.Foreground

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:37:29.030

您可以`<Run>`在 中使用元素`TextBlock`：

```
<StackPanel Grid.Column="1" Orientation="Horizontal">
    <TextBlock FontSize="10" Foreground="#2C2C2C">
       <Run Text="Added by "  />
       <Run Text="{Binding Document.MEMUser.UserName}" />
       <Run Text=" on " />
       <Run Text="{Binding CreatedOn, Converter={StaticResource DateTimeToStringConverter}}" />
    </TextBlock>
    <!--BIND COMMANDS TO PARENT ViewModel to process operations-->
    <Button Content="Delete" Command="{Binding DataContext.DeleteCommand, ElementName=LayoutRoot}" CommandParameter="{Binding}" />
    <Button Content="Download" Command="{Binding DataContext.DownloadCommand, ElementName=LayoutRoot}" CommandParameter="{Binding}" />
</StackPanel> 
```

# java - Struts 2 动作类实例化

> ID：10506688
> 
> 赞同：0
> 
> 时间：2012-05-08T21:20:41.867
> 
> 标签：java, struts2

是否可以将 Struts2 动作类的实例化限制为仅一个实例。基本上对动作强制执行单例模式。我正在扩展 ActionSupport 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:25:35.153

从技术上讲，当然，我想——但整个框架假设每个请求都有一个实例，只是这样测试，如果你这样做，我只会预测非常糟糕的事情。

扩展`ActionSupport`使这种情况更加可怕，因为它添加的所有内容*也*假设每个请求一个实例。例如，显然每个请求的错误和信息消息之类的东西都是实例属性——因此您需要重新实现相当一部分`ActionSupport`以使其成为线程安全的。

无论如何，您为什么要这样做？

# iphone - 如何在我的项目的第一个视图上添加动画

> ID：10506691
> 
> 赞同：-1
> 
> 时间：2012-05-08T21:20:48.093
> 
> 标签：iphone, objective-c

> **可能重复：**
> [从启动图像到主视图的平滑过渡](https://stackoverflow.com/questions/6310274/smooth-transition-from-launch-image-to-main-view)

我有应用程序让我们假设你好世界，我需要在应用程序启动画面消失后在你好世界视图上做淡入淡出动画，我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:33:33.017

您可以通过将其 alpha 设置为 0 来淡入视图，然后将其添加到初始视图控制器的视图中

```
[myViewController addSubview:myNewView]; 
```

然后你可以打电话

```
[UIView animateWithDuration:0.5 animations:^(void){
    [myNewView setAlpha:1.0];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:16:25.247

在您的 HelloViewController 中，您需要将此代码放在 ViewDidAppear 委托方法中，如下所示

```
- (void)viewDidAppear:(BOOL)animated {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.6];
    [self.view setAlpha:0.0];
    [UIView commitAnimations];
} 
```

希望能帮助到你

# .net - 如何为自定义异常类型关闭“抛出异常时中断”

> ID：10506695
> 
> 赞同：27
> 
> 时间：2012-05-08T21:21:13.693
> 
> 标签：.net, visual-studio, visual-studio-2010, debugging, exception

我正在做一些调试，我真的想打开“抛出异常时中断”选项。我依赖的第三方程序集会定期抛出异常。其中一些，比如 SynchronizationLockException 我可以通过 Debug -> Exceptions 菜单关闭。

问题是它们也有一些自定义异常类型。有没有办法关掉这些？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-08T22:52:14.040

在*Debug > Exceptions*对话框中，单击*Add*，选择*Common Language Runtime exceptions*，然后输入异常的全名（不是程序集限定名称）。然后取消选中此异常的*抛出*复选框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-05T20:06:43.947

在 Visual Studio 2019 中，当异常发生时，会出现一个信息对话框。

只需取消选中“当此异常类型为用户未处理时中断”。

[![异常对话框](../Images/dff2c84e7b1cdab6923d82759789dd92.png)](https://i.stack.imgur.com/hn57H.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-10-05T11:04:26.077

我认为您可以尝试取消选中此选项`<All Common Language Runtime Exceptions not in this list>`：

[![取消选中](../Images/0ae3b6c23b0d8f50b3540ee6cc8369f9.png)](https://i.stack.imgur.com/rMQmP.png)

在这种情况下，大多数 .NET Framework 内置异常都会中断，但不会出现在列表中的自定义异常类型。

如果您发现更多想要中断的异常类型，您可以右键单击`Common Language Runtime Exceptions`然后添加更多类型来中断：

[![添加要中断的类型](../Images/2525f1812e337373851009268dc78ee2.png)](https://i.stack.imgur.com/WVHsZ.png)

# javascript - javascript - 语法 - 更改预加载的图像

> ID：10506697
> 
> 赞同：2
> 
> 时间：2012-05-08T21:21:21.567
> 
> 标签：javascript, jquery, syntax

这可能是一个非常新的问题，但我真的需要帮助，我有 5 个缩略图和一个大图像。

我只想做的是，当您单击缩略图时，大图像会发生变化。大图像始终是动画 gif，这就是我使用一些预加载图像的原因。（我在 FF 上遇到问题，仅更改 src 时动画没有显示）

这是代码

```
function preloader()
{
if (document.images)
    {
      pic1= new Image(800,550);
      pic1.src='contest-landing/card_large1.gif';

      pic2= new Image(800,550);
      pic2.src='contest-landing/card_large2.gif';

      pic3= new Image(800,550);
      pic3.src='contest-landing/card_large3.gif';
    }
}

$j("li img").on("click", function(){
     var whatImage = $j(this).attr('id');
     //document.bigImage.src = pic3.src That is working, its always showing the image #3
     document.bigImage.src = pic+whatImage.src // I cant get that to work, so it doesnt show always the same image
 }); 
```

HTML：

```
<ul>
    <li><img src='/card_thumb1.jpg' id="1" class="cardThumb"></li>
    <li><img src='/card_thumb2.jpg' id="2" class="cardThumb"></li>
    <li><img src='/card_thumb3.jpg' id="3" class="cardThumb"></li>            
</ul>

<img id="bigImage" name="bigImage" src='card_large1.gif' width="800" height="550"  /> 
```

所以，我的问题与语法有关。我想替换那条线

文档.bigImage.src = pic3.src

所以这个数字是从id中获取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:41:00.857

尝试将 Image 对象存储在另一个对象的属性中，而不是为每个对象使用单独的变量。

```
var pics = {}; // An object to hold our Images. Always use `var` to declare variables!

function preloader() {

    if (document.images) {

        pics[1] = new Image(800, 550);
        pics[1].src='contest-landing/card_large1.gif';

        pics[2] = new Image(800, 550);
        pics[2].src='contest-landing/card_large2.gif';

        pics[3] = new Image(800, 550);
        pics[3].src='contest-landing/card_large3.gif';

    }
}

$j("li img").on("click", function(){
    var whatImage = this.id;
    document.getElementById('bigImage').src = pics[whatImage].src;
}); 
```

`id`顺便说一句，您可以（并且应该）为这些元素使用非数字属性。

# vb.net - 在vb中查询访问db在更改操作系统日期后返回null

> ID：10506698
> 
> 赞同：2
> 
> 时间：2012-05-08T21:21:25.237
> 
> 标签：vb.net, ms-access

我有一个返回所需值的选择语句，但是当我将操作系统日期从英语（美国）更改为英语（英国）时，它现在返回 null。我认为问题与日期有关，因为在查询中选择的值是数据库中的日期与组合框中的日期相同，但我不知道我还能做什么。看起来组合框中的日期和数据库中的日期并不相同，但组合框中的日期实际上是从数据库中检索的，并且在我更改系统日期格式之前一直返回值正常。有人可以告诉我们可以做什么以及为什么在更改系统日期后会出现这种行为吗？这是我的选择命令：

```
cmd4.CommandText = _
    "SELECT sum(brought_qtty), recieved_qtty from brought_coffee, centre_weigh where brought_date=#" & _
    dtComb.Text.Trim & "#" & _
    "and crop_year=" & Today.Year & "and brought_date=weigh_date and weigh_centre='" & _
    cenComb.Text.Trim.Substring(0, 2) & "' group by recieved_qtty"` 
```

`dtComb.Text`是组合框中的日期值，`brought_date`是数据库日期。这种比较会不会有问题`where brought_date=#" & dtComb.Text.Trim`？我正在使用vb，并且数据库正在访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:19:57.847

为避免此问题，您需要处理适当的数据类型。在您的情况下，您需要将参数传递/设置为日期类型，而不是字符串。因此，定义适当类型的参数 (OleDbParameter) 并将其传递给查询 (OleDbCommand)。

一些示例可以在这里找到：http: [//msdn.microsoft.com/en-US/library/system.data.oledb.oledbparameter (v=vs.90).aspx](http://msdn.microsoft.com/en-US/library/system.data.oledb.oledbparameter(v=vs.90).aspx)

像这样的东西：

```
...
cmd4.CommandText = "SELECT sum(brought_qtty), recieved_qtty from brought_coffee, centre_weigh where brought_date = ? and crop_year = ? and brought_date = weigh_date and weigh_centre = ? group by recieved_qtty"

cmd4.Parameters.Add("p1", OleDbType.Date).Value = Convert.ToDateTime(dtComb.Text.Trim())
cmd4.Parameters.Add("p2", OleDbType.Integer).Value = Today.Year
cmd4.Parameters.Add("p3", OleDbType.VarChar).Value = cenComb.Text.Trim.Substring(0, 2)

... 
```

请注意，参数的名称无关紧要，但分配它们的顺序确实（应该与 SQL 中的 ? 顺序匹配）。

# jquery - 新闻滑块 CSS 和 HTML

> ID：10506699
> 
> 赞同：0
> 
> 时间：2012-05-08T21:21:26.860
> 
> 标签：jquery, html, css

我的网站有一个我想使用的新闻滑块，但我有一个小问题。完成 HTML 和 CSS 后，我需要旋转“展示柜”，现在我尝试了使用 Jquery 的不同指令，但完全没有运气。有人可以指点我或帮助我创建这个吗？

这是我到目前为止所取得的成就图片：http: [//i.stack.imgur.com/Lzakd.png](http://i.stack.imgur.com/Lzakd.png)

这是我网站的链接：http://www.unscspartanteamomega.com/hproto

这是一个使用类似于我想要实现的东西的网站的链接：http: [//home.jejaju.com/play/kids/](http://home.jejaju.com/play/kids/)

我是 jquery 的新手，所以我不太了解，但如果有人可以帮助或指出我有用的东西，我将不胜感激每一个小帮助。自上周以来，我一直在努力。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:51:39.013

包括在此处找到的 jquery 循环插件：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

然后你只需要添加以下javascript：

```
$(document).ready(function() {
  $('.topNewsBlock').cycle();
}); 
```

# javascript - 用 next 和 prev 突出显示 P 标签

> ID：10506701
> 
> 赞同：1
> 
> 时间：2012-05-08T21:21:39.880
> 
> 标签：javascript, html, css

我想在按下向上箭头和向下箭头时允许用户上下滑动，我的意思是如果突出显示“罗马”并且我按下然后应该突出显示“米兰”。这是我的 HTML：

```
<li id="place">
  <p>roma</p>
  <p>milan</p>
  <p>napoli</p>
</li> 
```

我想使用 Javascript 来做到这一点，也许使用`onclick()`. 我应该使用哪个 javascript 属性以及如何使用 css 突出显示某些内容谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:25:37.570

您可以附加一个 CSS 类以在单击时突出显示相应的元素。使用 jQuery 切换将允许您切换元素的突出显示。jsFiddle 示例即将推出...

**jQuery 示例：http:** [//jsfiddle.net/2NS5V/2/](http://jsfiddle.net/2NS5V/2/)

**JavaScript 示例：http:** [//jsfiddle.net/GDEeW/1/](http://jsfiddle.net/GDEeW/1/)

# php - 无法通过 HTTPS 访问 SOAP Web 服务

> ID：10506708
> 
> 赞同：2
> 
> 时间：2012-05-08T21:22:06.797
> 
> 标签：php, apache, soap, ssl, nginx

我想要做的是使用 SSL 访问一个 Web 服务（我构建的）。它似乎没有工作。一些相关信息：

*   使用 HTTP 一切正常。仅当我使用 HTTPS 时才会出现此问题。
*   输出的实际错误消息如下：

SOAP-ERROR: Parsing WSDL: Couldn't load from ... : failed to load external entity ...

*   该服务是用 PHP 实现的。
*   如果我运行 php -m 或检查 phpinfo() openssl 似乎安装正确。
*   否则 SSL 证书似乎工作正常。我可以在网站的其余部分使用 HTTPS；只是 Web 服务有问题。

*   如果我尝试通过浏览器通过 HTTPS 访问 WSDL，它工作正常。如果我尝试访问 SOAP 端点 URL 之一，则会收到错误消息。

*   我编写了一个最小化的 PHP 脚本来尝试对服务进行实际调用。当尝试检索 WSDL 本身时，它将收到错误消息。
*   Web 服务器是在 Debian 上运行的 Apache
*   这似乎不是代码问题。我在开发服务器上运行了类似的代码，它在那里运行良好，即使使用 HTTPS。
*   生产系统运行在代理系统上，前面有 nginx。似乎这很可能与该问题有关，但不知道从哪里开始解决该问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:52:19.910

我想指出这可能与您的 nginx 配置有关，对于 SSL，有几个不错的地方可以开始寻找：

1.  验证你在 nginx 上的监听端口是 443
2.  验证您的代理位置是 127.0.0.1:80（端口 80，因为它是 HTTP，除非您自定义它）
3.  如果您使用的是 CentOS，我发现 iptables 是许多问题的罪魁祸首。有时我只是忘记在防火墙中打开端口 443。要进行配置，请转到`/etc/sysconfig/iptables/`并添加防火墙规则。

最后但并非最不重要....

我找到了这个关于 SOAP over SSL 的漂亮指南 :) [http://soapoverhttps.blogspot.ca/](http://soapoverhttps.blogspot.ca/)

# java - 如何在 JFrame 中动态重绘 JPanel？

> ID：10506712
> 
> 赞同：0
> 
> 时间：2012-05-08T21:22:15.640
> 
> 标签：java, swing, oop, object

我正在制作一个简单的 java swing 程序，允许用户玩二十一点。我有 10-15 个类代表程序中的 1 个“屏幕”，它们每个都扩展 JLayeredPane 并实现动作侦听器。我还有其他的甲板、卡片、回合、玩家等课程。

然后在另一个类中有两个属性：一个数组 arra（包含所有面板）和一个 Jframe 数组（所有面板都将转到），具有公共静态 void main。

然后在同一个类中我做了两件事，一个替换面板的方法：

```
public void screenInit(int i)
{
    one.setContentPane(arra[i-1]);
    one.invalidate();
    one.validate();
    one.repaint();
} 
```

然后我在 psvm 中创建这个类的一个对象，并从放入第一个面板开始。

所以我的问题是现在第一个面板已经启动，它的动作监听器附加到一个 JButton 它如何访问在包含 JFrame 和数组的类中创建的 JFrame，以便它可以使用上面的方法。现在，我每次都必须创建一个新框架，所以它建立在彼此之上？

如果这是不可能的，我应该如何组织我的课程，使每个面板上的多个按钮相互连接？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:37:56.550

1) 在您使用 Swing JComponents 的情况下，您可以删除代码行`one.invalidate();`，因为没有理由为当前`LayoutManager`显示`JPanel` 的 GUI 的无效元素设置状态

2）如果你`remove / modify / add`的 JComponent(s) 顶部已经可见`Container`，那么我在代码行`revalidate()`和`repaint()`

3) 没有人知道您真正的问题是什么，也没有人可以在您的显示器中看到代码，最好通过重新绘制 GUI 来隔离问题并使用[SSCCE编辑您的问题](http://sscce.org/)

# jquery - 如何使用 Jquery 在表格行和列中添加对象

> ID：10506714
> 
> 赞同：1
> 
> 时间：2012-05-08T21:22:25.090
> 
> 标签：jquery, jquery-ui

嗨，我有一张下面描述的表格。我有一个包含行和列的对象，我保存在数据库中。

我想根据数据在表格行和列中显示该对象。

例如我的对象是`chart[rows][columns]`

因此，如果是`chart[0][0]`，它将显示在第一行和第一列中，如果是`chart[0][1]`，它将显示在第一行和第二列中，依此类推...在我的情况下，该行将始终为0，并且我已固定三列显示如下

我如何使用 Jquery 获得此功能

我的表是

```
<table id="dashboardDesigner" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td id="Col1" style="border: solid 1px black; height: 100px; width: 300px" class="connectedSortable">
        </td>
        <td id="Col2" style="border: solid 1px black; height: 100px; width: 300px" class="connectedSortable">
        </td>
        <td id="Col3" style="border: solid 1px black; height: 100px; width: 300px" class="connectedSortable">
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:43:16.190

jQuery 包含可以查找特定字符串的函数 (http://api.jquery.com/contains-selector/)。因此，您所要做的就是获取一些输入以将变量数据发送到选择器，如下所示：

```
$("td:contains('" + variable + "')"); 
```

然后选择它的父级：

```
$("td:contains('" + variable + "')").parent(); 
```

并显示它：

```
$("td:contains('" + variable + "')").parent().html().appendTo("div.showFindResult"); 
```

# php - 魔术方法 __construct() 和 __destruct() 的用途是什么。他们总是需要吗？

> ID：10506717
> 
> 赞同：0
> 
> 时间：2012-05-08T21:22:45.377
> 
> 标签：php

魔术方法 __construct() 和 __destruct() 的用途是什么。他们总是需要吗？

需要一个很好的简单答案，这有点令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:27:50.277

它们不是必需的。Construct 在初始化时调用，即在创建/构造对象时调用。清理时调用 Destruct。

**例子：**

```
class Foo
{
    function __construct()
    {
        echo "start";
    }

    function __destruct()
    {
        echo "end";
    }
}

$foo = new Foo(); // outputs start
echo ' : ';
unset( $foo );    // outputs end
echo ' ! '; 
```

以上代码段输出`start : end !`。如果我们不使用`unset`析构函数，在清理时仍然会在脚本末尾调用，输出将是：`start : ! end`

**关联**

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:29:00.787

About `__construct()`，它使您可以对新创建的对象做一些事情**并**覆盖`__construct()`父类的方法。

所以它可能不是必需的（也不是），但是如果一个类扩展了另一个类，则可能需要添加一个构造函数来避免自动调用父构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:47:42.350

我对构造的最常见用途是将类变量初始化为默认值。不过，我还没有需要使用 destruct 。

# ruby-on-rails - content_tag 块中的 form_for

> ID：10506719
> 
> 赞同：1
> 
> 时间：2012-05-08T21:22:55.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这个功能`module MessagesHelper`：

```
def message_block( message, ticket, comment )
  content_tag( :div, :class => "message", :id => "message-" + message.id.to_s ) do
    content_tag( :p, message.body, :class => "message-body", :id => "message-body-" + message.id.to_s ) +

    content_tag( :div,  content_tag( :a, "add comment", :id => "comment-link-" + ticket.id.to_s, :class => "comment-link" ), :id => "comment-" + ticket.id.to_s, :class => "comment" ) +

    form_for( comment, :html => { :class => "add-comment", :id => "add-comment-" + ticket.id.to_s } ) do |f|
      f.label :body, "add comment"
      f.text_area :body
      f.submit "add comment"
    end
  end
end 
```

要获得此预期结果：

```
<div class="message">
  <p></p>
  <div class="comment">
  </div>
  <form class="add-comment">
  </form>
</div> 
```

在我的部分观点中，`_messages.html.erb`：

```
<% if !@message.nil? %>
  <% @message.each do |m| %>
  <%= message_block( m, @ticket, @comment ) %>
<% end %> 
```

甚至没有加载到 DOM中`text_area`，我只能看到`add comment`按钮。这都在`TicketController`（不是`MessageController`或`CommentController`）中。

对我的问题有任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T01:18:37.947

我想我刚刚遇到了同样的问题。我发现助手只返回一个字符串。因此，在您的帮助程序中由 'f.submit "add comment"' 生成的最后一个输出是返回的内容并被放入您的视图模板中。要解决此问题，您需要连接所有字符串输出并在帮助程序末尾返回该大字符串。希望这能解决您的问题。

我认为这是将助手限制为单个输出的惯例。因为否则，部分可能是要走的路。

小心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:47:10.913

你有一个很难阅读和维护的助手。我建议您考虑使用 partial 。

这是示例。假设您想要渲染很多表单，并且您考虑创建一个助手，它接受一些标题、表单对象和要包含在表单中的字段列表。这里通过部分解决方案。

在您的`views/shared/_render_some_stuff.erb`（注意开头的下划线）中创建：

```
<%= title %>
<%= form_for object do |f| %>
    <% fields.each do |field_name| %>
        <%= f.label field_name %>
        <%= f.text_field field_name %>
    <% end %>
<% end %> 
```

并以这种方式在任何视图中“注入”它：

```
<%= render 'shared/render_some_stuff', 
            title: 'Hello', object: Product.first, fields: [:title, :price] %> 
```

（注意：这里开头没有下划线。你只需要它来区分你在目录中的部分，但这里不是）

我想它打败了你的方法？

# html - CSS未连接到HTML

> ID：10506722
> 
> 赞同：0
> 
> 时间：2012-05-08T21:22:57.280
> 
> 标签：html, css

我似乎在让 HTML 文件读取我的 CSS 文件时遇到问题。我已将两者联系起来，但由于某种原因，结果没有显示出来。我已将这两个文件保存在服务器上的同一个文件夹中，但由于某种原因，我一直遇到障碍。你认为问题可能是什么？谢谢！

```
<head>
    <meta Campus DrinkThink/> 
    <title>Campus DrinkThink</title> <!--this is the link to the style sheet--> 
    <link rel="stylesheet" type= "text/css" href="sftp://ec2-user@23.21.112.84/var/www/html/campusdrinkthink.css" /> 
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:27:29.750

99.9999999999999% 的情况下，CSS 文件的路径不正确。

在您的情况下，您指向的是 FTP 服务器，而不是 Web 服务器上的位置。

我不确定您的配置是什么样的，但请尝试

```
<link rel="stylesheet" type= "text/css" href="/campusdrinkthink.css" /> OR
<link rel="stylesheet" type= "text/css" href="/html/campusdrinkthink.css" /> 
```

PS：您的 META 标签无效。不确定您要在那里实现什么，但[请阅读](http://www.w3schools.com/tags/tag_meta.asp)它应该是什么样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:42:48.607

如果您在同一个文件夹中有 index.html（或您的 html）和 css 表，则不需要整个地址，您可以使用以下方式调用它：

```
<link href="campusdrinkthink.css" rel="stylesheet" type="text/css" /> 
```

如果 css 在文件夹中，则调用将是：

```
<link href="FOLDER/campusdrinkthink.css" rel="stylesheet" type="text/css" /> 
```

所以...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:52:00.800

实际上问题是浏览器不支持**sftp模式。**

尝试`sftp://ec2-user@23.21.112.84/var/www/html/campusdrinkthink.css`直接在浏览器中打开。

例如，Mozilla Firefox 显示消息：

```
Firefox could not define, how to open this address, because the protocol (sftp) is not assigned to any application. 
```

# ocaml - 缩进让打开Mod

> ID：10506728
> 
> 赞同：3
> 
> 时间：2012-05-08T21:23:16.217
> 
> 标签：ocaml, typerex

有没有办法从 TypeRex 获得这种布局？

```
let alert ctx x = 
  let open Alert in
  Printf.printf "...Alert: type = %s, status = %s\n"
    (Type.to_string (type_ x)) (status x);
  flush stdout 
```

我最终得到了这个，而不是这对我来说看起来不是最理想的

```
let alert ctx x = 
  let open Alert in
      Printf.printf "...Alert: type = %s, status = %s\n"
        (Type.to_string (type_ x)) (status x);
      flush stdout 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:50:57.363

Typerex 还没有实现缩进。我们仍在使用 tuareg-mode 的缩进，但计划重新实现。

# mysql - 以整数形式获取 MySQL 中两个日期之间的年差

> ID：10506731
> 
> 赞同：26
> 
> 时间：2012-05-08T21:23:33.623
> 
> 标签：mysql

我正在尝试计算数据库中一个人的年龄。
让我们假设有这个简单的表：

```
student(id, birth_date); 
```

其中 id 是主键（确实该表更复杂，但我已对其进行了简化）。
我想知道一个人多大了：

```
select id, datediff(curdate(),birth_date) 
from student 
```

但它会以天为单位返回结果，而不是以年为单位。我可以将其除以 365：

```
select id, datediff(curdate(),birth_date) / 365
from student 
```

但它返回一个浮点值，我想要一个整数。
所以我可以计算年份：

```
select id, year(curdate())-year(birth_date) 
from student 
```

但是有一个问题：比如现在是五月，如果一个人战争出生于 1970 年 6 月，他还有 31 岁而不是 32，但表达式返回 32。
我无法摆脱这个问题，谁能帮帮我?

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-05-23T08:59:40.830

对于遇到此问题的任何人：

另一种方法是：

```
SELECT TIMESTAMPDIFF(YEAR, date_of_birth, CURDATE()) AS difference FROM student 
```

对于月份的差异，替换`YEAR`为`MONTH`，对于天数，替换`YEAR`为`DAY`

希望有帮助！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-08T21:28:01.383

```
select id, floor(datediff(curdate(),birth_date) / 365)
from student 
```

将结果设置为整数怎么样？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T21:29:27.993

尝试：

```
SELECT 
  DATE_FORMAT(FROM_DAYS(TO_DAYS(NOW())-TO_DAYS(birth_date)), '%Y')+0
  AS age FROM student; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-21T07:53:09.357

接受的答案几乎是正确的，但可能导致错误的结果。

事实上，`/ 365`不考虑闰年，如果比较与生日具有相同日期和月份的日期，可能会导致错误的结果。

为了更准确，您必须将其除以 4 年的平均天数，即 (365 * 4) + 1（每 4 年闰年）=> 365.25

你会更准确：

```
select id, floor(datediff(curdate(),birth_date) / 365.25) from student 
```

测试了我的一个项目并且它正在工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T21:28:04.250

为什么不对第二种方法的输出使用 MySQL 的 FLOOR() 函数？任何分数都将被删除，从而为您提供所需的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T21:41:02.480

您可以使用它来获取整数值。

```
select id, CAST(datediff(curdate(),birth_date) / 365 as int)
from student 
```

如果你想阅读`CONVERT()`这里`CAST()` [是链接。](http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T21:19:20.050

我建议这样做：

```
DATE_FORMAT(NOW(),"%Y")
   -DATE_FORMAT(BirthDate,'%Y')
   -(
     IF(
      DATE_FORMAT(NOW(),"%m-%d") < DATE_FORMAT(BrthDate,'%m-%d'),
      1,
      0
     )
    ) as Age 
```

这应该非常适合闰年;-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-08T18:33:33.240

这有效，即使考虑到闰年！

```
select floor((cast(date_format('2016-02-29','%Y%m%d') as int) - cast(date_format('1966-03-01','%Y%m%d') as int)/10000); 
```

只需确保保留`floor()`小数点即可

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-01T17:20:06.367

我没有足够的声誉来对 Rat-a-tat-a-tat Ratatouille 的答案添加评论以改进他的代码。这是更好的 SQL 查询：

```
SELECT IFNULL(TIMESTAMPDIFF(YEAR, birthdate, CURDATE()), YEAR(CURDATE()) - YEAR(birthdate)) AS age 
```

这更好，因为有时“生日”可能只包含出生年份，而日和月为 0。如果 TIMESTAMPDIFF() 返回 NULL，我们可以通过从出生年份减去当前年份来找到粗略的年龄。

# php - JavaScript/PHP [显示/隐藏]

> ID：10506734
> 
> 赞同：0
> 
> 时间：2012-05-08T21:23:48.137
> 
> 标签：php, javascript, html, dom

我想弄清楚如何使用 JavaScript 显示/隐藏 PHP 脚本。

JavaScript：

```
<script type="text/javascript">
function showhide(id){ 
    if (document.getElementById){ 
    obj = document.getElementById(id); 
    if (obj.style.display == "none"){ 
    obj.style.display = ""; 
    } else { 
     obj.style.display = "none"; 
    } 
  }
} 
</script> 
```

正文代码：

```
<?php
echo "<a href='javascript:showhide('delivery.php');'>Show/Hide Delivery options</a>";
require "delivery.php" ?> 
```

关于为什么/如何让它发挥作用的任何想法？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:26:38.803

我认为您正在寻找的是 ajax（例如[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:30:11.327

JavaScript 是客户端，这意味着它在您的 PC 上执行，在从服务器下载网站之后。

PHP 是服务器端的，这意味着它在服务器计算机上执行，然后将纯 HTML 页面发送到您的 PC。

这就是为什么它不可能。你必须使用 PHP 来做到这一点，使用一些变量。否则，您可以使用 javascript/ajax 向服务器发送请求，然后服务器将新信息发送回客户端，然后客户端可以更新页面。

但最好像这样在 PHP 中执行此操作：

```
if (isset($_GET['some_var'])) {
    switch ($_GET['some_var']) {
        default: case "blah":
                 include("somefile.php"); break;
        case "nyah":
                 include("some_other_file.php"); break;
    }
} 
```

'some_var' 可以通过如下形式发送到 PHP 页面：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="GET">
    <input type="text" name="some_var" value="blah"/>
    <input type="submit" value="Go"/>
</form> 
```

如果您在文本字段中输入“blah”并发送它，页面将显示“somefile.php”，但如果您输入“nyah”，它将显示“some_other_file.php”的内容。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:33:09.640

你无法以你在这里做的方式实现你想做的事情。正如@Ozzy 在评论中所说，这是不可能的。

原因是 Javascript 代码永远不知道 PHP 代码在做什么。JS 代码所知道的只是浏览器接收到的内容。这意味着它获取`delivery.php`文件的内容作为页面的一部分，但不知道它来自一个单独的文件到页面的其余部分，更不用说知道那个文件被调用了。

快速的答案是在语句周围添加一个包装`<div>`元素。`require()`

这将为您提供一个您的 Javascript 代码可以针对显示/隐藏功能的元素。

因此，您的 PHP 代码现在可能如下所示：

```
<?php
echo "<a href='javascript:showhide('deliveryblock');'>Show/Hide Delivery options</a>";
echo "<div id='deliveryblock'>";
require "delivery.php"
echo "</div>";
?> 
```

（这确实假设由 生成的内容`delivery.php`是有效的 HTML 代码，但是您没有向我们展示该文件的外观，所以我只需要做出这个假设）。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:34:42.723

我认为您基本上是在尝试在页面上显示/隐藏一些内容。您的`showhide`函数仅适用于您网页上的某些 html 组件。因此，只需尝试将“delivery.php”的内容放入像`<div id='deliverydiv'></div>`. 然后使用`showhide('deliverydiv')`.

# javascript - 编码 window.location.href 时遇到问题

> ID：10506736
> 
> 赞同：0
> 
> 时间：2012-05-08T21:24:02.537
> 
> 标签：javascript, facebook-graph-api

以下是使用 URL 中的空格进行重定向，我正在尝试使用 encodeURIComponent 将其删除。

谁能告诉我我做错了什么？

编辑：根据下面的建议，我将发布整个脚本...

```
<script>        
window.fbAsyncInit = function() {
    FB.init({
        appId   : '<?php echo $AppID; ?>',
        oauth   : true,
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true // parse XFBML
    });

  };

function fb_login(){
    FB.login(function(response) {

        if (response.authResponse) {

            FB.api('/me', function(response) {
                //Ajax Loader       
                     $.post("addtodb.php",
                     {name: response.name, email:response.email},
                        function(data) {
                        window.location.href = "next.php?name="+escape(response.name)+"&email="+(response.email); //redirect after post callback
                     })
            });

        } else {
        }
    }, {
        scope: 'email'
    }
    );
}
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T01:03:25.763

```
escape('foo bar');//foo%20bar
encodeURI('foo bar');//foo%20bar
encodeURIComponent('foo bar');//foo%20bar 
```

这三个例子效果很好。如果不这样做，请检查 fi 没有其他代码导致错误或在此处发布整个脚本

# javascript - Tumblr 点赞按钮会影响其他变量吗？

> ID：10506742
> 
> 赞同：0
> 
> 时间：2012-05-08T21:24:33.437
> 
> 标签：javascript, tumblr

我在 Tumblr 上的笔记不能正常工作，你可以在这里看到：http: [//herrhansen.tumblr.com/post/19630628091](http://herrhansen.tumblr.com/post/19630628091)（页面底部）

我相信变量 {PostNotes} 通常会将like-notes 和 reblog-notes 放在一个列表中。但是我的笔记不知何故被分开了，好像只有我的“like-notes”受CSS影响，“reblog-notes”的显示非常奇怪。

我猜我用于 tumblr 赞按钮的 JavaScript（从[http://like-button.tumblr.com/](http://like-button.tumblr.com/)复制）弄乱了我的笔记。

这可能吗？

这是like-button的javascript：

```
<script>
window.onload = function () {
document.body.insertAdjacentHTML( 'beforeEnd', '<iframe id="my-like-frame"             style="display:none;"></iframe>' );
document.addEventListener( 'click', function ( event ) {
var myLike = event.target;
if( myLike.className.indexOf( 'my-like' ) > -1 ) {
    var frame = document.getElementById( 'my-like-frame' ),
        liked = ( myLike.className == 'my-liked' ),
        command = liked ? 'unlike' : 'like',
        reblog = myLike.getAttribute( 'data-reblog' ),
        id = myLike.getAttribute( 'data-id' ),
        oauth = reblog.slice( -8 );
    frame.src = 'http://www.tumblr.com/' + command + '/' + oauth + '?id=' + id;
    liked ? myLike.className = 'my-like' : myLike.className = 'my-liked';
};
}, false );
};
</script> 
```

我尝试将变量放入列表中，但列表的定位仅适用于类似注释。

即使代码像这样简单（没有标签）：

```
 {block:PostNotes} 

                    {PostNotes}

                        {/block:PostNotes} 
```

笔记变得很奇怪。

不幸的是，我对javascript不是很熟悉。是否可能导致问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:27:31.287

此代码在加载时添加，但仅在单击“赞”按钮时触发，因此，由于我在每次页面加载时都看到格式错误，因此我必须得出结论，此 JavaScript 不是问题。

我会关注 CSS 和 HTML 格式问题。有趣的是，[它似乎不是列表本身的 HTML](http://jsfiddle.net/hvZxA/1/)。

编辑：这是这个“reblog”类属性，它只出现在你损坏的元素上。进入 Firebug 或开发工具并将其删除，您会看到格式已恢复。

```
div .reblog {
position: relative;
left: 90%;
top: -9px;
height: 18px;
display: inline-block;
width: 17px;
z-index: 1;
} 
```

# unit-testing - 如何沿多个维度构建 BDD 单元测试？

> ID：10506754
> 
> 赞同：4
> 
> 时间：2012-05-08T21:25:49.007
> 
> 标签：unit-testing, bdd

考虑以下测试输出：

![通过测试规范说明我的情况](../Images/8f9ced6c95babae61588ccbc37c43a82.png)`

总而言之，不支持 Word 文档，而支持 PDF。所以我们立即拒绝 Word 文档。但是对于 PDF，还有更多的步骤需要测试，所以我们这样做了。

问题是，假设我还想支持文本文件，它具有与 PDF 完全相同的工作流程。我正在测试的代码基本上如下所示：

```
function uploadDocument(type, document) {
    if (type !== "application/pdf" && type !== "text/plain") {
        throw new UnsupportedMediaTypeError();
    }

    // do all the steps involving temp documents, hashing, ownership, etc.
} 
```

我的问题是：我怎样才能为此构建我的测试？我不想将“上传 PDF 时”下面的整个树复制为“上传文本文件时”。

我觉得我经常遇到这个问题。如您所见，我已经做了一些重复（“删除临时文档成功”和“提交临时文档成功”下的条目是相同的）。

本质上，这是一个改变系统的多个维度并组合测试它们的问题。一定有人想到了如何构建这样的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:12:58.367

我似乎需要将其分解为 2 个测试（可能更多，但这是一个不同的主题）

```
Given A document of type <doc_type> 
Then it should have an allowed status of  <status>

Examples:
| doc_type | status  | 
| word      | fail   | 
| text      | accept | 
| pdf       | accept | 
```

然后您的测试将简化为

```
...
when uploading a valid file type
... 
```

快乐测试，卢埃林

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-14T20:38:39.507

我通过以下方式理解您的示例：

*   您区分支持和不支持的媒体类型。
*   所有不受支持的媒体的行为都是相同的
*   所有支持的媒体的行为都是相同的
*   对于支持的媒体，使用内容，但仅作为原始字节（散列）

因此，对不同类型的支持媒体执行两次测试似乎没有什么价值。让我解释一下您可能正在使用的不同可能的开发过程：

A. 可能性 如果您正在执行 BDD，那么选择测试来“驱动”您的实现。但是，在您为 pdf 实现所有内容之后，代码已经到位。您只需要一个额外的测试用例来“驱动”您添加`&& type !== "text/plain"`分数。对于来自重复树的所有其他测试，您不会添加任何额外的代码。因此，来自复制树的测试没有“驱动”特性。

可能性 B. 您正在做测试用例设计，只需使用 BDD 表示法来制定您的测试。在这种情况下，您的目标是定义一个可以发现可能的错误的测试套件。您对代码有白盒知识，这意味着您知道对 pdf 和文本文件的处理是相同的。因此，您只需要为 pdf 文件和文本文件制作不同的测试用例，这可能会发现额外的错误。这里可能有一些场景，例如，如果文件扩展名可能会阻止它被存储 - 但很可能并非对于所有场景，区别都是相关的。

可能性 C. 最后，还有一个类似于 b 的可能场景，但您没有白盒知识。鉴于在您的示例测试用例内部是如何讨论的，这并不适合您的示例，因此我不会对此进行详细说明。

在讨论了测试级别之后，还需要在设计级别上提到一些内容：您的代码 a) 区分受支持和不受支持的媒体，b) 处理所有受支持的媒体。它在同一个函数中完成所有这些，这甚至可能是您最初考虑复制测试的原因：由于在这个大函数中参数`type`和`document`可访问性，有人甚至可能`type`在处理部分使用，使其不太常见。您可能会考虑在单独的函数中处理不同的职责，然后单独测试这些函数：一个函数确定是否支持类型（仅使用`type`参数），一个函数处理支持的文档（仅使用`document`参数）。

# mysql - SQL 关系、触发器和外键

> ID：10506756
> 
> 赞同：2
> 
> 时间：2012-05-08T21:25:53.250
> 
> 标签：mysql, sql, database

> 在关系 Doctor(SSN, First_Name, Last_Name), Clinic (ID, Name, Address) 和 WorksFor(Doctor_SSN,Clinic_ID) 中，添加触发器：当医生从一个诊所转移到另一个诊所时，通过插入医生的第一个来提交报告和姓氏以及新旧诊所名称进入医生转移关系。

我希望有人解释以下 SQL 代码是否正确，以及触发器和外键如何工作。

## 表

```
CREATE TABLE Doctor(
    SSN INT PRIMARY KEY,
    First_Name VARCHAR(50),
    Last_Name VARCHAR(50),
);

CREATE TABLE Clinic(
    ID INT PRIMARY KEY,
    Name VARCHAR(50),
    Address VARCHAR(255),
);

CREATE TABLE WorksFor(
    Doctor_SSN INT REFERENCES Doctor(SSN),
    Clinic_ID INT REFERENCES Clinic(ID)
); 
```

1.  在上面的代码中，我可以得到 Doctor 和 Clinic 表的具体图片。但是 WorksFor 关系如何工作？[从我在Django 框架](http://djangoproject.com)上工作的一点经验中，我有点了解外键是如何工作的，但除此之外，我不知道创建外键关系时数据库中会发生什么。MySQL 是否会创建一个全新的表，其中包含WorksFor 关系**的**Doctor 和 Clinic 表的**所有**属性？

***   然后是触发器。概念相当容易理解。我只想问您是否可以验证以下 SQL 代码是否与上面的任务描述匹配。简而言之，当旧诊所的 ID 与新诊所的 ID 不同时，我会创建一个新表，其中包含医生的名字、姓氏、旧诊所名称、新诊所名称。同样，我不完全确定外键是如何工作的。当我调用 current.Name 时，它​​会给我诊所的名称，因为 Clinic_ID 引用了诊所关系？和Doctor一样，下面的代码会起作用还是我错过了什么？** 

 **## 扳机

```
CREATE TRIGGER DoctorTransfer(
    AFTER UPDATE ON WorksFor
    REFERENCING
        OLD ROW AS current
        NEW ROW AS new
    FOR EACH ROW
    WHEN(current.Clinic_ID <=> new.Clinic_ID)
    INSERT INTO doctor_transfer VALUES
        VALUES(new.First_Name, new.Last_Name, current.Name as Old Clinic,
                         new.Name as New Clinic); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:55:39.137

**对于 #1**

> MySQL 是否会创建一个全新的表，其中包含 WorksFor 关系的 Doctor 和 Clinic 表的所有属性？

[MySQL文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)说以下[强调我的]

> InnoDB**需要外键和引用键上的索引，**以便外键检查可以快速且不需要表扫描。**在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列**。如果引用表不存在，则会在引用表上自动创建此类索引。如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。index_name，如果给定，如前所述使用。
> 
> InnoDB 允许外键引用任何索引列或列组。但是，在引用的表中，必须有一个索引，其中引用的列按相同顺序列为第一列。

所以不，它只使用索引，因为 FK 只关心被引用表中键的存在（插入到子表中）或引用表中引用者的存在（删除/更新父母）

**对于 #2** 你有一些语法问题。

[这是来自Create Trigger](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)文档的示例触发器。没有`REFERENCES`关键字。否`WHEN`它只是直接引用`NEW`并使用标准`WHERE`从句

```
CREATE TRIGGER testref BEFORE INSERT ON test1
  FOR EACH ROW BEGIN
    INSERT INTO test2 SET a2 = NEW.a1;
    DELETE FROM test3 WHERE a3 = NEW.a1;
    UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
  END;
| 
```**

# django - django：django.utils.functional.SimpleLazyObject 的目的？

> ID：10506766
> 
> 赞同：54
> 
> 时间：2012-05-08T21:27:04.770
> 
> 标签：django, django-views

我遇到了一个问题，我分配`request.user`给一个名为 的变量`prior_user`，然后基本上验证了用户，然后检查是否`request.user != prior_user`. 我希望它们不一样，`prior_user`应该包含 `AnonymousUser. 令我惊讶的是，它们是一样的。

示例代码：

```
prior_user = request.user   # request object, obtained froma  view
authenticate_user(request)   # some function that authenticates
print prior_user.username != request.user.username   # returns False i.e.they are the same! 
```

然后我发现prior_user 实际上包含一个django.utils.functional.SimpleLazyObject 的实例，所以我认为它是某种惰性查找类型的东西，即prior_user 的值在实际使用之前不会被查找。查看源代码，我无法确认这一点。

任何有 django 经验的人都可以告诉我发生了什么以及为什么需要它？

这让我有点动摇，因为通常的赋值语句不能按我预期的方式工作，而 Django 中还有什么这样的行为？我也没有在[文档](https://docs.djangoproject.com/en/dev/ref/request-response/#httprequest-objects)中看到这一点。

所以任何对 django 有超人了解的人都可以提供一些清晰的信息吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-08T22:01:31.020

`auth`中间件添加了一个`user`属性，`request`即`SimpleLazyObject`. `SimpleLazyObject`, 本身是 的子类`LazyObject`。`LazyObject`是，如实际代码所述：

> 另一个类的包装器，可用于延迟包装类的实例化

`SimpleLazyObject`仅通过传入的方法设置该类（`_wrapped`属性 on ），在本例中为. 这是该方法的代码：`LazyObject``get_user`

```
def get_user(request):
    if not hasattr(request, '_cached_user'):
        request._cached_user = auth.get_user(request)
    return request._cached_user 
```

这本身实际上只是一个包装器`auth.get_user`，它启用了一种缓存机制。所以这实际上是最终运行的：

```
def get_user(request):
    from django.contrib.auth.models import AnonymousUser
    try:
        user_id = request.session[SESSION_KEY]
        backend_path = request.session[BACKEND_SESSION_KEY]
        backend = load_backend(backend_path)
        user = backend.get_user(user_id) or AnonymousUser()
    except KeyError:
        user = AnonymousUser()
    return user 
```

所以，这里真正发生的一切`request.user`都是模棱两可的，直到它实际用于某事。这很重要，因为它允许它根据*当前*的身份验证状态进行调整。如果您在进行身份验证*之前*访问它的属性，它会返回一个实例`AnonymousUser`，但如果您进行身份验证然后访问它，它会返回一个实例`User`。

# javascript - 使用按钮单击而不是正文加载

> ID：10506770
> 
> 赞同：0
> 
> 时间：2012-05-08T21:27:22.313
> 
> 标签：javascript, html, button, onload

我正在尝试使用 Google 地理编码器 API 将用户的位置信息直接输入到表单中（反向地理编码）。我使用[这篇](https://stackoverflow.com/questions/6797569/html5-geolocation-easiest-way-to-get-city-name)文章中最流行的答案作为代码库。

如该答案所示，当我使用*body onload="initialize()"时，我的表单已正确填充。*但是，当我尝试使用按钮启动该功能时，什么也没有发生（我删除了 body onload 属性）。我尝试了以下两种变体。

```
<a href="javascript:;" style="center" onclick="initiate()" class="button">Get Geolocation data</a>

<input type="button" value="Get Geolocation Data" onclick="initiate()"> 
```

有人可以指出我的错误吗？完整代码如下：

```
 <!DOCTYPE html> 
<html> 
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
<title>Reverse Geocoding</title> 

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript"> 
  var geocoder;

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 
//Get the latitude and the longitude;
function successFunction(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    codeLatLng(lat, lng)
}

function errorFunction(){
    alert("Geocoder failed");
}

  function initialize() {
    geocoder = new google.maps.Geocoder();

  }

  function codeLatLng(lat, lng) {

    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
      console.log(results)
        if (results[1]) {
         //formatted address
         alert(results[0].formatted_address)
        //find country name
             for (var i=0; i<results[0].address_components.length; i++) {
            for (var b=0;b<results[0].address_components[i].types.length;b++) {

            //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
                if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                    //this is the object you are looking for
                    city= results[0].address_components[i];
                    break;
                }
            }
        }
        //city data
        alert(city.short_name + " " + city.long_name)

        } else {
          alert("No results found");
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
  }
</script> 
</head> 
<body onload="initialize()"> 

</body> 
</html> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:30:05.320

**看起来像一个错字：使用`initialize`而不是`initiate`.**

您声明您正在使用`body onload="initialize()"`，并且当您将对初始化函数的调用移动到按钮的 onclick 时，它停止工作。

但是，在您的示例中，您使用了`initiate`：

```
<a href="javascript:;" style="center" onclick="initiate()" class="button">Get Geolocation data</a>

<input type="button" value="Get Geolocation Data" onclick="initiate()"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:30:22.167

那是因为您在锚元素上使用 onlick 而不停止其默认行为。试试这个。

```
<a href="#" style="center" onclick="return initialize()" class="button">Get Geolocation</a> 
```

`initialize`并从js 方法返回 false 。

```
function initiate() {
   geocoder = new google.maps.Geocoder();
   return false;
} 
```

正如@Michael 提到的，还有一个错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:35:44.540

改变这个：

```
<a href="javascript:;" style="center" onclick="initiate()" class="button">Get Geolocation data</a> 
```

对此：

```
<a href="javascript:initiate();return(false);" style="center" class="button">Get Geolocation data</a> 
```

并确保您的函数被称为**initial()**或**initialize()**。那里似乎有一个错字。

# asp.net-mvc - ASP.NET MVC - 会话状态未通过 -> 断点不起作用

> ID：10506774
> 
> 赞同：0
> 
> 时间：2012-05-08T21:27:41.487
> 
> 标签：asp.net-mvc, facebook, visual-studio-2010, debugging, session-state

**问题已解决，见下文**

我正在做的是这样的：

生成随机数 -> 将其存储在会话中 -> 使用 Facebook 的 OAuth 服务的“状态”参数将其传递给 facebook -> 验证返回的状态是否与我的会话中的状态相同（这样做是为了保护 CSRF） .

这总是有效的，没问题。但不知何故，它不再工作了（会话似乎是空的，因为当我尝试阅读它时我得到了 NullReferenceException）。我可能改变了一些东西，但我不知道是什么。

我尝试在facebook返回状态的代码部分设置断点，但不知何故它永远不会到达断点......我的断点之间的代码被执行，但我的断点没有被命中。

这是执行一切的代码：

```
public ActionResult SignUpButton()
{
    int random = RandomHelpers.GetRandomInteger(null);
    Session.Add("facebookState", random.ToString(CultureInfo.InvariantCulture));

    ViewBag.Uri = "https://www.facebook.com/dialog/oauth?" +
        "client_id=" + _facebookAuthenticationService.GetAppId() + 
        "&redirect_uri=" + _facebookAuthenticationService.GetReturnUri() + 
        "&scope=email" +
        "&state=" + random;

    return PartialView();
}

public ActionResult Register()
{
    string error = Request.QueryString["error"];
    string state = Request.QueryString["state"];
    string originalState = Session["facebookState"].ToString(); 
```

（为简洁起见，我删除了其余部分）。SignUpButton 函数返回一个局部视图，其中包含一个带有指向 facebook 的注册 URL 的按钮。Facebook 返回 localhost:xxx/Account/Register（即 Register 函数），该函数被命中（尽管 Register 中的断点不做任何事情），并且在 Session["facebookState"].ToString( ） 部分。

这是我在 web.config 中与会话相关的设置的样子：

```
<sessionState mode="InProc">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</sessionState> 
```

我就是想不通。我已经重写了代码，使其不再产生错误并从 facebook graph API 返回数据，但是我不能调试这部分代码是不可接受的（记录：SingUpButton 方法中的断点*被*命中） .

我希望任何人都可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:30:56.950

哦，上帝，那太愚蠢了。发布此消息后（在寻找解决方案 2 小时后），我发现了问题所在：

Visual Studio 更改了运行我的应用程序的端口。我将其设置为固定端口（右键单击 MVC 项目 -> 网络 -> 特定端口），现在它工作正常。

我现在觉得很傻...

# c# - 如何获取所有正在运行的线程的列表

> ID：10506782
> 
> 赞同：1
> 
> 时间：2012-05-08T21:28:16.233
> 
> 标签：c#, multithreading

我必须说这可能是一种糟糕的模式，但在我的沙箱中，我创建了一个界面，每次单击按钮时都会调用后台服务（触发线程并使其保持活动状态）。

这很好，因为我可以创造一个混乱的局面，并了解环境将如何处理这个问题。

但是，否则，我面临一个问题：*我怎样才能让所有线程当前正在运行并将它们全部杀死。打电话给GB什么的。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:33:52.253

我假设您不想要***所有***正在运行的线程的列表-您想要通过某种特定机制启动的正在运行的线程的列表，对吗？

如果是这种情况，您可以在启动这些线程时执行以下操作：

```
List<Thread> myThreads = new List<Thread>();

public void StartAThread() {
    Thread t = new Thread( ... whatever ...);
    myThreads.Add(t);
    t.Start();
} 
```

现在，假设你想以***极端的偏见***杀死那些线程——也就是说，你现在想让它们死掉，而且你不关心半途而废的连锁反应，你可以这样做：

```
foreach (var t in myThreads)
    t.Abort(); 
```

# codeigniter - 从自己的 html_helper 执行 link_tag

> ID：10506784
> 
> 赞同：0
> 
> 时间：2012-05-08T21:28:31.570
> 
> 标签：codeigniter

我想执行标准`link_tag();`，但从我自己的 /application/helpers 中的 MY_html_helper.php 中我无法执行正常方式：

```
$CI =& get_instance();
$link = $CI->html->link_tags($href); 
```

我不在这个助手中工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:43:57.987

每个帮助文件只是一个函数的集合，要使用那些你需要首先加载它的函数，在你的情况下，你想从你自己的帮助文件中使用它，所以你需要使用 codeIgniter 的加载方法加载帮助文件并做你应该

```
$CI =& get_instance();
$CI->load->helper('html');
echo link_tags($href); 
```

# java - 在 Java 中引用另一个类变量

> ID：10506785
> 
> 赞同：1
> 
> 时间：2012-05-08T21:28:32.300
> 
> 标签：java, android, class, variables

我以为我已经解决了这个问题，但我显然没有。

在一个 Android 应用程序中，我正在制作一个微调器，它将根据先前微调器的选择来更改它的内容。侦听器工作并且第二个微调器正在更改，但是有第三个微调器没有获取其内容。

我想要达到的目标是：

```
if (spinner1.selection == "Acura") {
spinner2 = "Acura";
} 
```

我调用的字符串数组是`R.java`文件中的整数，因此对于 Acura 来说，它将是：`R.array.Acura`

所以我的问题是：

如何`R.array.*`根据字符串动态调用整数。

我希望我的问题是有道理的。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:33:52.627

在您的活动中使用[getIdentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法来查找资源 ID。

例如：

```
spinner2 = "Acura";
int arrayResourceId = getResources().getIdentifier(spinner2, "array", getPackageName()); 
```

# android - 如何判断 Android 设备是否具有开放附件模式

> ID：10506786
> 
> 赞同：1
> 
> 时间：2012-05-08T21:28:46.357
> 
> 标签：android, arduino, adk

有谁知道如何检查这个？我刚刚购买了三星 Galaxy Tab 2（运行 Android 4.0.3 的 7" 版本），打算用它连接到我的 Arduino Mega ADK 板。但我不确定 Galaxy 选项卡是否具有此处列出的必要打开附件模式：[http://developer.android.com/guide/topics/usb/adk.html](http://developer.android.com/guide/topics/usb/adk.html)

似乎仅仅因为软件是正确的并不意味着该设备是兼容的，并且这因制造商而异。由于这是一款新平板电脑，因此我没有找到任何东西。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:53:17.017

将 Galaxy Nexus 添加到列表中。

Nexus S ICS 4.0.4 工作，4.0.3 坏了。

确保电源充足 - 如果板 + 电话串联由 USB 集线器供电，至少 Nexus S 会脱落并间歇性地停止看到 ADK 板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T00:53:43.793

我不知道你如何才能知道你的设备是否有这种 ADK 模式（我在尝试设置我的东西时未能尝试遵循该领先优势。）但这里有一些我发现的问题：

确保您使用的是 Arduino IDE v1.0，我尝试了 23 一段时间。但是你必须使用newset 一个。

我还必须编辑草图才能使其正常工作。这是我的新设置方法。我刚刚添加了一些打印语句，这样我就可以知道它在哪个部分失败了。结果对我来说，这个`init_joystick ( 5 );`电话就在它死去的地方。我对此发表了评论，一切顺利。

```
void setup()
{
    Serial.begin(115200);
    Serial.print("\r\nStart");

    init_leds();
        Serial.print("\r\nDone LED");
    init_relays();
        Serial.print("\r\nDone Relay");
    init_buttons();
        Serial.print("\r\nDone button");
    //init_joystick( 5 );

    // autocalibrate OFF
    touch_robot.set_CS_AutocaL_Millis(0xFFFFFFFF);

    servos[0].attach(SERVO1);
    servos[0].write(90);
    servos[1].attach(SERVO2);
    servos[1].write(90);
    servos[2].attach(SERVO3);
    servos[2].write(90);

    b1 = digitalRead(BUTTON1);
    b2 = digitalRead(BUTTON2);
    b3 = digitalRead(BUTTON3);
    //b4 = digitalRead(JOY_SWITCH);
    c = 0;

    acc.powerOn();
        Serial.print("\r\nDone Setup");
} 
```

ADK demokit 草图中对 Setup 方法的这种更改允许注册连接并让应用程序执行其他漂亮的事情。

但是，我只在我知道支持 ADK 的设备上进行了测试：

*   银河连结
*   连结小号
*   摩托罗拉 Xoom

您必须为 ADK 设备提供足够的电源 - 当 ADK 设备由 USB 集线器供电时，至少 Nexus S 可能会不稳定。迹象表明 ADK 模式无缘无故地消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:29:23.757

**capsense**的问题是因为**capsense**不存在！您需要将 CapacitiveSensor.h 添加到项目中，然后将所有对**capsense**的引用更改为**CapacitiveSensor**以解决这些错误（arduino ide 1.5.2）。仍然可以连接。（4.1.3）我想知道是否喜欢 SExperia mini pro 并需要一个扩展坞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:19:32.497

我有一个三星 Galaxy Tab 2（运行 Android 4.0.3 的 7" 版本）和一个 Android 附件，它可以与至少 3 台其他设备一起使用，但不在 Tab 上。也许是因为它在 4.0.3 中被破坏（与Nexus S，其中 4.0.3 已损坏，但 4.0.4 未损坏）。此外，在其他三星设备上运行的 2.3.4+ 已剥离 USB 附件库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T07:18:06.473

我刚买了一个 7 英寸屏幕的三星 Galaxy Tab 2。它运行的是 Android 4.0.3，我可以让它与 Arduino Mega ADK 一起工作！我正在运行 Arduino 0023 接口来编译代码。Arduino 1.0 接口破坏了太多库，所以我切换到旧接口。注释掉“init_joystick(5);”行 如果你没有盾牌。我可以使用示波器验证 3 个伺服系统的波形是否正确。

如果您仍然无法使其工作，请尝试注释掉与操纵杆相关的任何代码，因为它可能挂在 I2C 通信上。否则，请访问 dfrobot 网站并以 60 美元左右的价格订购 ADK 防护罩，以便正确读取操纵杆。那是我的下一步。

更新：注意到平板电脑的更新速度真的很慢。如果你没有屏蔽，修复是注释掉这一行：

//touchcount = touch_robot.capSense(5);

触摸设备连接到串行线路，所以我假设没有一个会由于超时而导致长时间延迟。

# c# - 通过 tcp 从 linux 连接到 windows

> ID：10506788
> 
> 赞同：0
> 
> 时间：2012-05-08T21:29:04.120
> 
> 标签：c#, c++, tcp, tcpclient

我在 windows (c#) 上有一个 tcp 服务器应用程序，它接受端口 3000 的任何连接 我在 linux(ubuntu)(c++) 上有一个 tcp 客户端应用程序，它通过端口 3000 发送一个简单的文本

我在 windows 上也有一个客户端，在 linux 上有一个服务器，我可以完美地发送文本：从 linux 到 linux 从 windows 到 windows 从 windows 到 linux

问题是当我尝试从 linux 客户端发送到 windows 服务器时，我在 linux 上的 c++ 应用程序告诉我主机不存在

我已经检查了 IP 地址，这是正确的我也尝试用主机名来做

但它不起作用

有人知道为什么会这样吗？？？

这是我在客户端上的代码（linux-c++）：

```
int sockfd, portno, n;
struct sockaddr_in serv_addr;
struct hostent *server;  
struct in_addr addr={0};
char buffer[256];
if (argc < 3) {
   fprintf(stderr,"usage %s hostname port\n", argv[0]);
   exit(0);
}
portno = atoi(argv[2]);
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");
addr.s_addr=inet_addr(argv[1]);
//server=gethostbyname(argv[1]);
server = gethostbyaddr((char *) &addr, 4, AF_INET);
if (server == NULL) {
    fprintf(stderr,"ERROR, no such host\n");
    exit(0);
} 
```

我打电话ping，一切正常

我在 Windows 上运行我的服务器并打开端口 3000 到任何连接

我尝试使用 windowsIP/windowsHostName 和端口 3000 运行我的客户端（上面的代码）（已经尝试过另一个端口）

问题出在：

```
server = gethostbyaddr((char *) &addr, 4, AF_INET); 
```

服务器为空，因此它打印“错误，没有这样的主机”

但是ip是正确的。

当我使用相同的代码与 linux(c++) 上的服务器连接时，它可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:28:17.143

最可能的原因是您的 Windows 防火墙阻止了到端口 3000 的传入连接。

转到控制面板并禁用防火墙并再次测试。如果这是问题，您必须添加一条规则以允许传入连接到您的 3000 端口。您还应该在规则中包含允许的主机 IP（您的 Linux IP）以避免意外远程连接出现问题。

您可以尝试从 linux 建立一个 telnet 连接到您的服务器 IP 地址和 3000 端口。它可能会被防火墙拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T17:37:59.183

您需要将虚拟框中的网络类型设置为“NAT”。如果它在桥接适配器中，则会出现上述问题。可以在这里找到详细的讨论：http: [//ubuntuforums.org/archive/index.php/t-1786307.html](http://ubuntuforums.org/archive/index.php/t-1786307.html)

# java - 如何在 JTextField 中显示淡灰色的“重影文本”？

> ID：10506789
> 
> 赞同：19
> 
> 时间：2012-05-08T21:29:14.687
> 
> 标签：java, swing, jtextfield

我不知道我是否得到了正确的名称，但我正在寻找是否有一种特定的方法来实现一个文本字段，以便当它没有焦点并且为空时，一个微弱的灰色字符串文本显示在字段中。单击该字段时，文本应该消失，就像 StackOverflow 的搜索栏的工作方式一样。我知道我可以更改使用`setForeground()`和焦点侦听器来完成此操作，但我只是想知道是否有人知道一些可以为我处理此问题的 Java 实现。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-08T22:01:14.543

对于它的价值，我发现实际实现它很有趣，所以我想与你分享它（我不是在寻找投票）。

它真的是非侵入性的，因为你所要做的就是调用`new GhostText(textField, "Please enter some text here...");`。其余的代码只是为了让它运行。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class Test {

    public static class GhostText implements FocusListener, DocumentListener, PropertyChangeListener {
        private final JTextField textfield;
        private boolean isEmpty;
        private Color ghostColor;
        private Color foregroundColor;
        private final String ghostText;

        protected GhostText(final JTextField textfield, String ghostText) {
            super();
            this.textfield = textfield;
            this.ghostText = ghostText;
            this.ghostColor = Color.LIGHT_GRAY;
            textfield.addFocusListener(this);
            registerListeners();
            updateState();
            if (!this.textfield.hasFocus()) {
                focusLost(null);
            }
        }

        public void delete() {
            unregisterListeners();
            textfield.removeFocusListener(this);
        }

        private void registerListeners() {
            textfield.getDocument().addDocumentListener(this);
            textfield.addPropertyChangeListener("foreground", this);
        }

        private void unregisterListeners() {
            textfield.getDocument().removeDocumentListener(this);
            textfield.removePropertyChangeListener("foreground", this);
        }

        public Color getGhostColor() {
            return ghostColor;
        }

        public void setGhostColor(Color ghostColor) {
            this.ghostColor = ghostColor;
        }

        private void updateState() {
            isEmpty = textfield.getText().length() == 0;
            foregroundColor = textfield.getForeground();
        }

        @Override
        public void focusGained(FocusEvent e) {
            if (isEmpty) {
                unregisterListeners();
                try {
                    textfield.setText("");
                    textfield.setForeground(foregroundColor);
                } finally {
                    registerListeners();
                }
            }

        }

        @Override
        public void focusLost(FocusEvent e) {
            if (isEmpty) {
                unregisterListeners();
                try {
                    textfield.setText(ghostText);
                    textfield.setForeground(ghostColor);
                } finally {
                    registerListeners();
                }
            }
        }

        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            updateState();
        }

        @Override
        public void changedUpdate(DocumentEvent e) {
            updateState();
        }

        @Override
        public void insertUpdate(DocumentEvent e) {
            updateState();
        }

        @Override
        public void removeUpdate(DocumentEvent e) {
            updateState();
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                init();
            }
        });
    }

    public static void init() {
        JFrame frame = new JFrame("Test ghost text");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        JTextField textField = new JTextField();
        JButton button = new JButton("Grab focus");
        GhostText ghostText = new GhostText(textField, "Please enter some text here...");
        textField.setPreferredSize(new Dimension(300, 24));
        panel.add(textField);
        panel.add(button);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
        button.grabFocus();
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-28T16:06:19.277

非常感谢纪尧姆，这非常好！

为了便于使用，我只是更改了一些内容：

1.  使用 JTextComponent 而不是 JTextField 所以它适用于所有文本输入
2.  取出测试类并使其公开且非静态以使其独立

这是代码：

```
import java.awt.Color;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.JTextComponent;

public class GhostText implements FocusListener, DocumentListener, PropertyChangeListener
{
    private final JTextComponent textComp;
    private boolean isEmpty;
    private Color ghostColor;
    private Color foregroundColor;
    private final String ghostText;

    public GhostText(final JTextComponent textComp, String ghostText)
    {
        super();
        this.textComp = textComp;
        this.ghostText = ghostText;
        this.ghostColor = Color.LIGHT_GRAY;
        textComp.addFocusListener(this);
        registerListeners();
        updateState();
        if (!this.textComp.hasFocus())
        {
            focusLost(null);
        }
    }

    public void delete()
    {
        unregisterListeners();
        textComp.removeFocusListener(this);
    }

    private void registerListeners()
    {
        textComp.getDocument().addDocumentListener(this);
        textComp.addPropertyChangeListener("foreground", this);
    }

    private void unregisterListeners()
    {
        textComp.getDocument().removeDocumentListener(this);
        textComp.removePropertyChangeListener("foreground", this);
    }

    public Color getGhostColor()
    {
        return ghostColor;
    }

    public void setGhostColor(Color ghostColor)
    {
        this.ghostColor = ghostColor;
    }

    private void updateState()
    {
        isEmpty = textComp.getText().length() == 0;
        foregroundColor = textComp.getForeground();
    }

    @Override
    public void focusGained(FocusEvent e)
    {
        if (isEmpty)
        {
            unregisterListeners();
            try
            {
                textComp.setText("");
                textComp.setForeground(foregroundColor);
            }
            finally
            {
                registerListeners();
            }
        }

    }

    @Override
    public void focusLost(FocusEvent e)
    {
        if (isEmpty)
        {
            unregisterListeners();
            try
            {
                textComp.setText(ghostText);
                textComp.setForeground(ghostColor);
            }
            finally
            {
                registerListeners();
            }
        }
    }

    @Override
    public void propertyChange(PropertyChangeEvent evt)
    {
        updateState();
    }

    @Override
    public void changedUpdate(DocumentEvent e)
    {
        updateState();
    }

    @Override
    public void insertUpdate(DocumentEvent e)
    {
        updateState();
    }

    @Override
    public void removeUpdate(DocumentEvent e)
    {
        updateState();
    }

} 
```

# c++ - Directshow C++ CLR 中未解析的令牌 (0A00001x)

> ID：10506790
> 
> 赞同：2
> 
> 时间：2012-05-08T21:29:15.180
> 
> 标签：c++, clr, directshow, linker-errors

我正在尝试将 PlayCap 从 Microsoft SDK 从 C++ 迁移到 C++ CLR。

目前，我在 directshow 课程中不断获得 LNK2020 和 LNK2001。

```
 public ref class Form1 : public System::Windows::Forms::Form
{
public:
    static IVideoWindow * DC_VW = NULL;
    static IMediaControl *DC_MC = NULL;
    static IMediaEventEx *DC_ME = NULL;
    static IGraphBuilder *DC_GB = NULL;
    static ICaptureGraphBuilder2 * DC_CGB2 = NULL;
    Form1(void)
    {

        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::Button^  button1;
protected: 
private: System::Windows::Forms::Panel^  panel1;

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->button1 = (gcnew System::Windows::Forms::Button());
        this->panel1 = (gcnew System::Windows::Forms::Panel());
        this->SuspendLayout();
        // 
        // button1
        // 
        this->button1->Location = System::Drawing::Point(136, 324);
        this->button1->Name = L"button1";
        this->button1->Size = System::Drawing::Size(217, 53);
        this->button1->TabIndex = 0;
        this->button1->Text = L"button1";
        this->button1->UseVisualStyleBackColor = true;
        this->button1->Click += gcnew System::EventHandler(this, &Form1::button1_Click);
        // 
        // panel1
        // 
        this->panel1->Location = System::Drawing::Point(37, 31);
        this->panel1->Name = L"panel1";
        this->panel1->Size = System::Drawing::Size(444, 269);
        this->panel1->TabIndex = 1;
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(511, 389);
        this->Controls->Add(this->panel1);
        this->Controls->Add(this->button1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->ResumeLayout(false);

    }
#pragma endregion
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
         {
            HRESULT hr;
            IBaseFilter *DC_SF = NULL;

            hr = GetInterfaces();
            if(FAILED(hr))
            {
                int x = ::MessageBox(NULL, (LPCWSTR)L"Failed to get interfaces. hr=0x%x", (LPCWSTR)L"OK", MB_OK);
            }
            hr = DC_CGB2->SetFiltergraph(DC_GB);
            if(FAILED(hr))
            {
                int x = ::MessageBox(0, (LPCWSTR)L"failed to set filter graph hr=0x%x", (LPCWSTR)L"OK", MB_OK);
            }
            //hr = FindCaptureDevice(&DC_SF);
         }
private: HRESULT GetInterfaces(void)
         {
             HRESULT hr;

             void* Temp;
             hr = CoCreateInstance (CLSID_FilterGraph, NULL, CLSCTX_INPROC, IID_IGraphBuilder, (void **) &Temp);
             DC_GB = (IGraphBuilder*)Temp;
             if(FAILED(hr))
             {
                 return hr;
             }

             hr = CoCreateInstance (CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC, IID_ICaptureGraphBuilder2, (void **)&Temp);
             DC_CGB2 = (ICaptureGraphBuilder2*)Temp;
             if(FAILED(hr))
                 return hr;

             hr = DC_GB->QueryInterface(IID_IMediaControl, (LPVOID*) &Temp);
             DC_MC = (IMediaControl*)Temp;
             if(FAILED(hr))
                 return hr;

             hr = DC_GB->QueryInterface(IID_IVideoWindow, (LPVOID*) &Temp);
             DC_VW = (IVideoWindow*)Temp;
             if(FAILED(hr))
                 return hr;

             hr = DC_GB->QueryInterface(IID_IMediaEventEx, (LPVOID*) &Temp);
             DC_ME = (IMediaEventEx*)Temp;
             if(FAILED(hr))
                 return hr;

             hr = DC_ME->SetNotifyWindow(panel1->Handle.ToInt64(), WM_APP+1, 0);
             return hr;
         }
}; 
```

到目前为止，这几乎是 PlayCap 代码的要点，除了我必须移动声明并使它们成为静态。

我不断得到

```
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000012) IID_IMediaEventEx
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000013) IID_IVideoWindow
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000014) IID_IMediaControl
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000016) CLSID_CaptureGraphBuilder2
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000017) IID_ICaptureGraphBuilder2
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000018) CLSID_FilterGraph
1>DirectshowC++.obj : error LNK2020: unresolved token (0A000019) IID_IGraphBuilder
1>DirectshowC++.obj : error LNK2001: unresolved external symbol IID_IMediaEventEx
1>DirectshowC++.obj : error LNK2001: unresolved external symbol IID_IVideoWindow
1>DirectshowC++.obj : error LNK2001: unresolved external symbol IID_IMediaControl
1>DirectshowC++.obj : error LNK2001: unresolved external symbol IID_ICaptureGraphBuilder2
1>DirectshowC++.obj : error LNK2001: unresolved external symbol CLSID_CaptureGraphBuilder2
1>DirectshowC++.obj : error LNK2001: unresolved external symbol IID_IGraphBuilder
1>DirectshowC++.obj : error LNK2001: unresolved external symbol CLSID_FilterGraph 
```

它们都在 strmif.h 头文件中，它找到了文件和它们，但我知道链接器错误是怎么回事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:32:32.873

您可能希望链接 strmiids.lib 和 strmbase.lib。

# java - 进度条加载后的新活动 - Android -

> ID：10506791
> 
> 赞同：0
> 
> 时间：2012-05-08T21:29:17.150
> 
> 标签：java, android, android-activity, android-intent, progress-bar

加载进度条后无法启动新活动。我卡在进度条上，不知道应该把新活动放在哪里。我的问题有什么解决办法吗？

```
ProgressBar myProgressBar;
int myProgress = 0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    myProgressBar=(ProgressBar)findViewById(R.id.progressbar_Horizontal);

    new Thread(myThread).start();
}

private Runnable myThread = new Runnable(){

    public void run() {
        // TODO Auto-generated method stub
        while (myProgress<100){
            try{
                myHandle.sendMessage(myHandle.obtainMessage());
                Thread.sleep(50);
            }
            catch(Throwable t){

            }
        }
    }
    Handler myHandle = new Handler(){

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            myProgress++;
            myProgressBar.setProgress(myProgress);
        }
    };
}; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:34:46.783

请将此添加到您的按钮单击事件中。

```
 progressDialog = ProgressDialog.show(this, "", "Loading...");
            new Thread() {

                public void run() {

                    Intent ddIntent = new Intent(
                            MainActivity.this, MainWall.class);
                    startActivity(ddIntent);
                    progressDialog.dismiss();
                }

            }.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:39:35.137

```
public void run() {
    //don't hard code things, use a constant for max progress value
    while ( myProgress<MAX_PROGRESS ){
        try{
            myHandle.sendMessage(myHandle.obtainMessage());
            //same
            Thread.sleep( SLEEP_TIME );
        } catch(Exception ex){
          //never live an empty catch statement, you are missing exceptions and
          //can't correct them
          Log.e( "MyCurrentClass", "Error during async data processing",e );
        }//catch
    }//while
    //start new activity here
    startActivity( MyClass.this, NewActivity.class );
}//met 
```

# php - file_exists 和 is_file 遇到问题

> ID：10506792
> 
> 赞同：1
> 
> 时间：2012-05-08T21:29:18.753
> 
> 标签：php, file-exists

我已经准备了这段代码，正如你所见，我已经注释掉了我的问题区域

```
//prepare the image file path that includes the isbn in the file name
    $imageFilePath = '"./data/images/' . $book[0] . '.jpg"';

            // Debugging
    // $var = "==>" . file_exists($imageFilePath) . "<==is it true?";
    // $str .= $var;
    // //tests if file is NOT there, if it isn't the imagepath reflects the default image
    // if (file_exists($imageFilePath) == false){

        // $imageFilePath = '"./data/images/default.jpg"';
    // } 
```

我的图像路径变量就像一个魅力，现在如果文件不存在，我想使用默认图像。当 if 语句未注释时，我的所有图像都成为默认图像

我试过 is_file 和 file_exists，但无济于事。您还可以看到我尝试使用 $var 变量捕获结果，==> 和 <== 之间没有空格。

我刚刚开始学习编程，一般来说，我通常能够在这里和那里使用回声或使用互联网进行调试。我找不到解决方案。

非常感谢所有帮助，并在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:34:31.377

你可以做这样的事情

```
$imageFilePath = "somethingToCheck";
$imageFilePathDefault = "somethingDefault";
$imageFilePath = file_exists($imageFilePath) ? $imageFilePath : $imageFilePathDefault; 
```

对于`file_exists`接受的解释和论据，请看[这里](http://php.net/manual/en/function.file-exists.php)

对于第三行代码，让我们将其解释为：

```
if(file_exists($imageFilePath))
 $imageFilePath = $imageFilePath; //confirm that is valid
else
 $imageFilePath = $imageFilePathDefault; //change to default 
```

**编辑**后编辑，我还建议从您的路径中删除双重配额

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:34:45.443

去掉双引号：

```
$imageFilePath = './data/images/' . $book[0] . '.jpg'; 
```

# javascript - 使用 JS 提高性能

> ID：10506798
> 
> 赞同：0
> 
> 时间：2012-05-08T21:29:48.417
> 
> 标签：javascript, performance

在开发中使用 javascript 时，比如说一个照片博客，您可以在其中从文件夹中检索所有图像并以所有独特的方式显示它，或者进行 ajax 调用以从服务器检索数据并使用动态应用的所有样式和逻辑加载它（或任何涉及跨越数百行甚至数千行的重击 js 代码的事情），JS 开发人员专注于提高代码效率的所有领域（在性能方面）。

例如，我们遇到了很多在线画廊。如果 js 开发人员必须从他的服务器加载大约 50 张图像到网站上，那么他首先关心的是什么。我提出这个只是为了让一个 JS 代码的实例不得不处理大量的数据。

我正在寻找的是，我目前正在参与 JS 开发，当我编写中型（或大型）js 应用程序时，我应该专注于提高性能。

1.  在使用的内存方面？
2.  在使循环有效方面？
3.  在使用 Jquery 或 Dojo 等第三方框架方面？
4.  在设计和使用的算法方面（我想这个选项总是打开的）

编写更高效的 JS 代码的任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T00:19:11.790

我的一位教授说 - “好的算法，不需要微优化”。

有一个类似的[问题](https://stackoverflow.com/questions/10021223/how-to-manage-dom-elements)。JavaScript 的问题在于它并不单独存在于网页中。有 HTML ( DOM ) 和 CSS。

1.  关于使用的内存 - 这是一个基本问题。如果你想要更快的速度，你需要更多的内存，或者相反。这是一个权衡取舍的[^(维基百科)](http://en.wikipedia.org/wiki/Trade-off)。您必须定义某种平衡。在我个人看来（如[这里](https://stackoverflow.com/questions/10185015/easiest-way-to-have-unlimited-inputs-in-html/10423423#10423423)），您将获得更简洁的代码，更少的变量（对象）无需克隆，并且 HTML 将更简洁。限制持有 DOM 集合引用的变量。

2.  关于循环 - 循环本身不是问题。问题在循环内部：不要一遍又一遍地检查某事。使用记忆[^(维基百科)](http://en.wikipedia.org/wiki/Memoization)。小心对 DOM 集合的迭代，如果随着时间的推移有很多动态添加的元素，它们可能会变慢。使用变量来缓存当前状态或位置（哦！这里的权衡）。

3.  像 jQuery 这样的第三方库非常有用，因为它们提供了一种在每个浏览器上执行相同操作的统一方式。但是像 jQueryUI 一样寻找一些模块。很多时候，我只需要 jQuery 中包含的另一个名为[sizzle](http://sizzlejs.com/)的库中的选择器，而不是整个库中的选择器。但尽管如此，我还是反对他们的统治地位。HTML5 正在传播并呈现出一种原生功能，至少如果不是更好的话，它应该会更快。

4.  关于算法 - 使用设计模式。它们是多年来发展起来的技术，经过测试和验证。就像使用闭包，防止全局变量的未命名的自执行函数等......

当然还有其他有用的技巧，例如：

*   代码的缩小
    *   [YUI 压缩](http://developer.yahoo.com/yui/compressor/)器，[Google Closure 编译器](http://closure-compiler.appspot.com/home)，节省带宽；
    *   还有混淆器和打包器 - 使用好的算法，它们***可能***会有所帮助，但有时它们可​​能会引入错误！！！;
    *   在某些页面上，您可能会看到类似`var doc = document;`的缩短调用`document`；
*   使用 CDN - 来自[Google](https://developers.google.com/speed/libraries/devguide)或[ASP](http://www.asp.net/ajaxlibrary/cdn.ashx)主机；
*   图像优化 - [JPG 可以优化](http://www.jpegmini.com/main/home)为更小的尺寸（关于画廊）；
*   在另一台主机上导出 JavaScript 和 CSS 等静态内容，以防止反复发送 cookie 数据。（这里的另一个副作用是你不需要安装服务器端语言，只需要http服务器）

作为您可能熟悉或不熟悉的工具：

*   [JsLint](http://www.jslint.com/) - 检查 JavaScript 代码错误；
*   [JsonLint](http://jsonlint.com/) - 检查 json 数据中的错误；
*   [JsPerf](http://jsperf.com/) - 用于测试和比较脚本的性能。还包含其他用户设计的测试列表；
*   [regexpal](http://regexpal.com/) - 正则表达式助手；
*   有很多“粘贴和分享”网站 jsfiddle、pastebin 等；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:47:48.667

使用[分析器](https://stackoverflow.com/questions/2140716/how-to-profile-and-and-get-javascript-performance)来衡量您的性能瓶颈在哪里，然后看看您可以对它们做些什么。

> 即使是优秀的程序员也非常擅长构建最终会出错的性能参数，因此最好的程序员更喜欢分析器和测试用例而不是推测。——马丁·福勒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:51:28.227

性能调优是非常非常特定于应用程序的。正如唐纳德·克努斯[所说](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)，

> 我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源

一般来说，最好的办法是编写您的应用程序，然后找出您需要优化的内容。应用程序加载时间过长？使用压缩器并延迟加载大量资源（例如图像）。CPU使用率过高？也许您过于频繁地更新 DOM 而不是批量更新。直到你有一个工作样本，然后分析它，你才会知道。

第三方库是构建原型并快速工作的绝佳工具。缺点通常是 1）它们的有效负载可能很大，增加了加载时间（尽管这可以通过使用 CDN/缓存来缓解），2）它们使执行 CPU 密集型的事情变得更容易，因为它隐藏了很多发生了什么。尽管这只是在您遇到 CPU 问题时才会出现的问题，但情况并非总是如此（如果不进行分析，很难提前知道）。

每次修改 DOM 时，浏览器都必须重排并确定页面应该如何随着您的更改而呈现。这就是为什么建议您使用 CSS 类来修改/更改样式的原因，因为它们可以一次更改，而堆叠样式更改意味着您正在更改的每个属性都会重排。

有很多这类 JS 性能提示。这一切归结为您的实际工作示例基于分析器（例如 Chrome 开发工具中可用的）以及用户体验向您展示的内容。

# java - 具有类变量的后增量运算符

> ID：10506806
> 
> 赞同：1
> 
> 时间：2012-05-08T21:30:43.530
> 
> 标签：java, increment

这段代码的输出是：

`c: 1 , id: 0`

我想知道为什么输出不是：

`c: 0 , id: 1`

```
class A {
    private static long c;
    private final long id = c++;
    public A() {
       print("c: " + c + " , id: " + id);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:33:49.647

因为像这样的表达式`c++`操作是这样的：

*   评估`c`；记住这一点（例如`tmp = c`；）
*   增量`c`
*   表达式的结果是原始值 ( `tmp`)

因此，在这种情况下，您从 开始`c = 0`，因此`id`变为 0... 但`c`在此过程中递增，因此`c`在计算表达式后为 1。

有关详细信息，请参阅Java 语言规范的[第 15.14.2 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)提炼：

> 在运行时，如果操作数表达式的求值突然完成，则后缀增量表达式出于同样的原因突然完成并且不会发生增量。否则，将值 1 添加到变量的值，并将总和存储回变量中。在加法之前，对值 1 和变量的值执行二进制数字提升（第 5.6.2 节）。如有必要，在存储变量之前，可通过缩小原语转换（第 5.1.3 节）和/或对变量类型进行装箱转换（第 5.1.7 节）来缩小总和。后缀增量表达式的值是存储新值之前变量的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:33:32.203

`id = c++`将 的值分配`c`给`id`，**然后**递增`c`。就好像您执行了以下操作：

```
c = 0;
id = c; // assigns zero
c = c + 1; 
```

试试`id = ++c`吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:33:59.350

因为你使用 C++。

c++ 意味着您首先将变量保存到您的 id，然后递增 ++。

如果您使用 ++c，您将首先递增，然后将其保存到 id。

但它会返回 c:1 id:1 因为 c++ 意味着 c = c+1！

如果你说： id = c+1 你会得到 c:0 和 id:1

# java - Java XML 字符串解析为对象

> ID：10506812
> 
> 赞同：2
> 
> 时间：2012-05-08T21:31:03.830
> 
> 标签：java, xml, dom, xml-parsing

我正在尝试将 XML 字符串从服务器传递到解析器并制作对象数组列表，但我目前得到的只是一个空数组列表。

获取和解析 XML 的代码

```
package parkinglot_api;

import java.net.*;
import java.sql.Date; 
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.io.*;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class ParkingLotInstance {
/*
 * Parking Lot API instance
 *      Constructor
 *          URL - String
 *      getParkingLotInfo()
 *          Returns XML from Specified Server
 *      parseParkingLotInfo()
 *          XML - String
 *          Returns ArrayList of Lot Objects
 */

public static URL serverURL;

public ParkingLotInstance( URL connurl ){
    serverURL = connurl;
}

public String getParkingLotInfo(){
    //Get a response from API server

    URL APIurl = this.serverURL;
    String APIresponse = "";

    System.out.println(APIurl);
    try {
        APIurl.openConnection();
        BufferedReader in = new BufferedReader(
                new InputStreamReader(APIurl.openStream()));

        String output;
        while ((output = in.readLine()) != null)
            APIresponse += output;
        in.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return APIresponse;

}

public ArrayList parseParkingLotInfo( String XML ){
        ArrayList lots = new ArrayList();

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        try {

            //Using factory get an instance of document builder

             dbf.setNamespaceAware(false);
             DocumentBuilder builder = dbf.newDocumentBuilder();

             InputSource inStream = new InputSource();

             inStream.setCharacterStream(new StringReader(XML));
             Document dom = builder.parse(inStream);

            //get the root element
            Element docEle = dom.getDocumentElement();

            //get a nodelist of elements
            NodeList nl = docEle.getElementsByTagName("Lot");

            if(nl != null && nl.getLength() > 0) {
                for(int i = 0 ; i < nl.getLength();i++) {

                    //get the employee element
                    Element el = (Element)nl.item(i);

                    //get the Employee object
                    Lot l = parseLot(el);

                    //add it to list
                    lots.add(l);
                }
            }

        }catch(ParserConfigurationException pce) {
            pce.printStackTrace();
        }catch(SAXException se) {
            se.printStackTrace();
        }catch(IOException ioe) {
            ioe.printStackTrace();
        }

        return lots;
}

public Lot parseLot(Element el){

    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd");

    //Initialize Parking Lot Variables
    int id = getIntValue(el,"id");
    int occupancy = getIntValue(el,"occupancy");
    Boolean status = Boolean.parseBoolean(getTextValue(el,"status"));
    String name = getTextValue(el,"name");
    Date updated = null;
    try {
        updated = (Date) dateFormat.parse(getTextValue(el,"updated"));
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    String description = getTextValue(el,"description");

    //Construct Parking Lot
    Lot lot = new Lot( 
         id
       , occupancy 
       , status
       , name
       , updated
       , description 
      );

    return lot;
}

/**
 * I take a xml element and the tag name, look for the tag and get
 * the text content
 * i.e for <employee><name>John</name></employee> xml snippet if
 * the Element points to employee node and tagName is 'name' I will return John
 */
private String getTextValue(Element ele, String tagName) {
    String textVal = null;
    NodeList nl = ele.getElementsByTagName(tagName);
    if(nl != null && nl.getLength() > 0) {
        Element el = (Element)nl.item(0);
        textVal = el.getFirstChild().getNodeValue();
    }

    return textVal;
}

/**
 * Calls getTextValue and returns a int value
 */
private int getIntValue(Element ele, String tagName) {
    //in production application you would catch the exception
    return Integer.parseInt(getTextValue(ele,tagName));
}
} 
```

对象类

```
 package parkinglot_api;

 import java.util.Date;
 import com.google.gson.Gson;
 import com.google.gson.GsonBuilder;
 import com.thoughtworks.xstream.XStream;
 import com.thoughtworks.xstream.io.xml.DomDriver;

 public class Lot {
/*
 * Parking Lot Object
 *     ID: Unique Identifier
 *     Occupancy: The Current Amount of Cars in the Lot
 *     Status: Describes if the Lot is Open or Closed
 *     Name: A String Identifier of the Lot
 *     Updated: The Last time the Lot's current status record was updated.
 */

//Initiate Parking Lot Fields
public int id;
public int occupancy;
public Boolean status;
public String description;
public String name;
public Date updated;

//Parking Lot Constructor
public Lot( 
      int newId
    , int newOccupancy 
    , Boolean newStatus
    , String newName
    , Date newUpdated
    , String newDescription 
){

    id = newId;
    occupancy = newOccupancy;
    status = newStatus;
    name = newName;
    updated = newUpdated;
    description = newDescription;
}

//Convert Java Object to JSON
public String toJSON(){
    Gson gson = new GsonBuilder().setPrettyPrinting().create();

    String jsonLot = gson.toJson(this);
    return jsonLot;
}

//Convert Java Object to XML
public String toXML(){
    XStream xstream = new XStream(new DomDriver());
    xstream.alias("lot", Lot.class);
    String xml = xstream.toXML(this);

    return xml;
}
} 
```

从实例类调用方法的类

```
 package parkinglot_api;

 import java.net.MalformedURLException;
 import java.net.URL;
 import java.util.ArrayList;

 public class Example {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    URL serverURL;
    try {
        serverURL = new URL("http://localhost:8080");

        ParkingLotInstance API = new ParkingLotInstance(serverURL);

        String parkingLotXML = API.getParkingLotInfo();

        ArrayList Lots = API.parseParkingLotInfo(parkingLotXML);

        System.out.println(Lots);

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

 } 
```

XML

```
<?xml version='1.0' ?>
    <campus count='4'>
    <lot>
      <id>1</id>
      <occupancy>25</occupancy>
      <status>true</status>
      <description></description>
      <name>lot1</name>
      <updated class="sql-date">2012-10-05</updated>
    </lot>
    <lot>
      <id>2</id>
      <occupancy>25</occupancy>
      <status>true</status>
      <description></description>
      <name>lot2</name>
      <updated class="sql-date">2012-10-06</updated>
    </lot>
    <lot>
      <id>3</id>
      <occupancy>25</occupancy>
      <status>false</status>
      <description></description>
      <name>lot3</name>
      <updated class="sql-date">2012-10-07</updated>
    </lot>
    <lot>
      <id>4</id>
      <occupancy>25</occupancy>
      <status>true</status>
      <description></description>
      <name>lot4</name>
      <updated class="sql-date">2012-11-07</updated>
    </lot>
    </campus> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:37:29.760

我认为最好的解决方案是使用为您完成所有工作的 JAXB。[你可以在这里](http://www.vogella.com/articles/JAXB/article.html)找到一个很好的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:44:11.447

`getElementsByTagName("...")`区分大小写，您`"lot"`的文件和`docEle.getElementsByTagName("Lot")`代码中都有，请尝试将其替换为`docEle.getElementsByTagName("lot")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T07:19:36.243

是的，您应该使用带有适当注释的 JAXB。通过这种方式，您可以避免大部分解析内容逻辑。Jaxb 会为你做这件事。

# facebook - 查询其他用户发布的自定义操作

> ID：10506814
> 
> 赞同：1
> 
> 时间：2012-05-08T21:31:24.453
> 
> 标签：facebook, facebook-graph-api, custom-action

据我了解，可以使用以下 URL 查询用户在应用中发布的自定义操作的列表。

```
https://graph.facebook.com/me/gym:workedout?access_token=<accessToken> 
```

在这种情况下，应用程序是“gym”，而自定义操作是“workedout”。

我的问题是；用户可以查询我们由其他用户发布的自定义操作吗？如果可以，如何查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T00:29:23.767

是的，只要他们授予您适当的权限，您的应用就可以在任何 Open Graph 应用中读取用户朋友的活动。将上面调用中的“我”替换为您要查询其活动的应用用户朋友的用户 ID - 您需要适当的权限 ( `friends_actions:[APP_NAMESPACE]`)

短版，以'gym'和'workedout'为例`friends_actions:gym`，向用户请求权限，然后查询`/<user id>/gym:workedout`

它必须为特定的朋友完成，而不是在 /friends 连接上，所以对于给定的用户，查看他们的朋友发布的所有活动的最佳方式（**并且对该用户可见**（你会惊讶有多少人不这样做） '不考虑这个..）），是：

*   来自用户的请求`user_actions:APP_NAMESPACE`和`friends_actions:APP_NAMESPACE`许可
*   获取该用户使用该应用程序的朋友的列表。如果您在同一个应用程序中执行此操作，您可以通过调用`/me/friends?fields=installed`并查找用户来执行此操作`installed: true`
*   如果您从不同的应用程序执行此**操作**，则需要用户告诉您，如果您想优化查询，他们的哪些朋友使用该应用程序，否则您需要在执行之前将他们的整个朋友列表分成批次下一步
*   通过调用请求该应用程序中朋友的操作列表`/APP_NAMESPACE:ACTION_NAME?ids=COMMA_SEPARATED_LIST_OF_UIDS`（例如`/gym:workedout?ids=4,5,1234567889,1111111111`：）
    *   警告：您还需要知道 API 中调用了什么操作；如果它是针对您自己的应用程序以外的应用程序，我不确定这样做的好方法（有人知道吗？）

# java - Amazon EMR：将 XML 或属性文件传递到 JAR

> ID：10506815
> 
> 赞同：3
> 
> 时间：2012-05-08T21:31:25.687
> 
> 标签：java, jar, hadoop, amazon-s3, emr

我一直在从单个 JAR 文件在 hadoop 集群上运行几个 map reduce 作业。JAR 的 Main 接受 XML 文件作为命令行参数。XML 文件包含每个作业的输入和输出路径（名称-值属性对），我使用它们来配置每个 mapreduce 作业。我可以像这样将路径加载到配置中

```
 Configuration config = new Configuration(false);
    config.addResource(new FileInputStream(args[0])); 
```

我现在正在尝试使用 Amazon 的 Elastic MapReduce 运行 JAR。我尝试将 XML 文件上传到 S3，但当然使用 FileInputStream 从 S3 加载路径数据不起作用（FileNotFound 异常）。

使用 EMR 时如何将 XML 文件传递​​到 JAR？

（我查看了引导操作，但据我所知，这是指定 hadoop 特定的配置）。

任何见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T03:34:34.983

如果您添加一个简单的引导操作

```
hadoop fs -copyToLocal s3n://bucket/key.xml /target/path/on/local/filesystem.xml 
```

然后，您将能够按照您的预期在 /target/path/on/local/filesystem.xml 上打开 FileInputStream。引导操作在集群中的所有主/从机器上同时执行，因此它们都将具有本地副本。

要添加该引导操作，您需要创建一个包含上述命令的 shell 脚本文件，将其上传*到*S3，并将其指定为脚本引导操作路径。不幸的是，s3 中的 shell 脚本是目前唯一允许的引导操作类型。

# database - 如何将 HTML5 页面连接到后端？

> ID：10506816
> 
> 赞同：0
> 
> 时间：2012-05-08T21:31:29.523
> 
> 标签：database, html, backend

我对 HTML5 完全陌生。

以前我开发过 Silverlight 和 ASP .Net 应用程序。

我的问题是：

如何开发一个基于 HTML5 的网站，用户登录，页面显示来自后端数据库的数据？

我可以使用 Visual Studio 2010 开发它吗？

我用什么作为连接到数据库的后端？

你有任何样品可以链接到这里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:38:52.030

我个人推荐 asp net MVC3 用于这种事情（带有剃刀）。您可以将小标签放入已经有效的 HTML（包括 HTML 5）

我还将使用实体框架来访问数据库（我认为它适用于多个提供程序，例如 SQL Server、My SQL、Oracle 等）。它使它非常简单。

您说您以前使用过 ASP，但我将在

[http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=aspdotnet-mvc3-intro](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=aspdotnet-mvc3-intro)

您可以在 VS2010 中执行此操作，后端将是实体框架。

如果您以前从未使用过 MVC，那么一旦获得它，您就不会想以任何其他方式进行操作。

# c++ - c++设计模式

> ID：10506817
> 
> 赞同：0
> 
> 时间：2012-05-08T21:31:30.037
> 
> 标签：c++, oop

这个可以吗？我基本上通过封装所有游戏实体和逻辑的类替换了对引用全局变量的单个函数的调用，以下是我想如何在 main 中调用新类，只是想知道对此的一般 c++ 大师共识是什么。

```
class thingy
{
public:
    thingy()
    {
        loop();
    }
    void loop()
    {
        while(true)
        {
            //do stuff

            //if (something)
                //break out
        }
    }
};

int main (int argc, char * const argv[]) 
{
    thingy();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T21:34:16.793

包含 game/events/... 循环的构造函数并不常见，执行此类操作的常用方法是使用构造函数设置对象，然后提供一个单独的方法来开始冗长的阐述。

像这样的东西：

```
class thingy
{
public:
    thingy()
    {
        // setup the class in a coherent state
    }

    void loop()
    {
        // ...
    }
};

int main (int argc, char * const argv[]) 
{
    thingy theThingy;
    // the main has the opportunity to do something else
    // between the instantiation and the loop
    ...
    theThingy.loop();
    return 0;
} 
```

实际上，几乎所有的 GUI 框架都提供了一个行为类似的“应用程序”对象。以 Qt 框架为例：

```
int main(...)
{
    QApplication app(...);
    // ... perform other initialization tasks ...
    return app.exec(); // starts the event loop, typically returns only at the end of the execution
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T21:37:22.593

我不是 C++ 大师，但我可能会这样做：

```
struct thingy
{
    thingy()
    {
        // set up resources etc
    }

    ~thingy()
    {
        // free up resources
    }

    void loop()
    {
        // do the work here
    }
};

int main(int argc, char *argv[])
{
    thingy thing;
    thing.loop();
    return 0;
} 
```

构造函数用于构造对象，而不是用于处理整个应用程序的逻辑。同样，如果需要，您在构造函数中获取的任何资源都应在析构函数中适当处理。

# ruby - 未初始化的常量 ActiveRecord::Base::StrictgitSanitizer

> ID：10506818
> 
> 赞同：0
> 
> 时间：2012-05-08T21:31:30.047
> 
> 标签：ruby, ruby-on-rails-3, rake

我正在尝试运行 rake 来测试我的 Rails 3.2.3 应用程序，但我收到了这个奇怪的错误

```
gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security.rb:206:in `const_get': uninitialized constant ActiveRecord::Base::StrictgitSanitizer (NameError) 
```

我的规范文件完全是空的，我还没有开始编写测试代码，只是空白的自动生成的规范文件。

我需要有关如何调试此问题的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T01:17:18.203

我想知道您是否不小心将单词粘贴`git`到`config.active_record.mass_assignment_sanitizer = :strict`了**config/environment.rb 中**。不知何故，ActiveModel`Strictgit`用作名称的一部分，它应该使用类似`Logger`or的东西`Strict`。

我刚刚查看了**gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security.rb**的第 206 行，其中发生了错误。206行周围的方法是：

```
def mass_assignment_sanitizer=(value)
  self._mass_assignment_sanitizer = if value.is_a?(Symbol)
    const_get(:"#{value.to_s.camelize}Sanitizer").new(self)
  else
    value
  end
end 
```

据我所知，`mass_assignment_sanitizer=(value)`只有在 Rails 本身的值`:logger`和值被调用。`:strict`

# java - java.lang.IllegalStateException：启动spring应用程序时没有名为encodingFilter的过滤器

> ID：10506819
> 
> 赞同：4
> 
> 时间：2012-05-08T21:31:30.647
> 
> 标签：java, spring, spring-mvc

我正在尝试运行一个弹簧应用程序。我的 web.xml 看起来

```
<?xml version="1.0" encoding="utf-8"?>
&lt;web-app   
 xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" version="2.4">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/beans.xml</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>
        org.apache.cxf.transport.servlet.CXFServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/version/2.0/*</url-pattern>
</servlet-mapping>
<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/version/2.0/*</url-pattern>
</filter-mapping>
<filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>utf-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter> 
```

我收到错误

java.lang.IllegalStateException：在 org.eclipse.jetty.servlet.ServletHandler.setFilterMappings(ServletHandler.java:1249) 的 org.eclipse.jetty.servlet.ServletHandler.updateMappings(ServletHandler.java:1148) 没有名为 encodingFilter 的过滤器.eclipse.jetty.servlet.ServletHandler.addFilterMapping(ServletHandler.java:1079)

我正在创建一个 jetty-pkg 作为 jar 文件并将其作为 java -jar myjar.jar 运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:00:40.533

我在某处读到应该在 <filter-mapping> 之前创建 <filter> 。我交换了位置并能够修复它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:49:40.303

您使用的是什么 Jetty 版本？

会不会和这个bug有关？

[http://jira.codehaus.org/browse/JETTY-1113](http://jira.codehaus.org/browse/JETTY-1113)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-16T01:04:08.923

只需将您的`web.xml`XSD 定义更新为较新的版本，例如 3.1

```
<?xml version="1.0" encoding="utf-8"?>
<web-app version="3.1" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"> 
```

# jquery - jQuery 与样式切换器和 Lightbox2 冲突

> ID：10506820
> 
> 赞同：0
> 
> 时间：2012-05-08T21:31:33.050
> 
> 标签：jquery, scripting, lightbox, styleswitching

我正在创建的网页上遇到 jQuery 冲突。我不擅长脚本，所以我不知道如何解决这个问题。

我已经在这里上传了文件 - [http://tinyurl.com/74e3k4z](http://tinyurl.com/74e3k4z)

底部的 jQuery 灯箱和顶部的切换器脚本之间存在冲突，最初来自这里，[http://www.marcofolio.net/webdesign/create_a_better_jquery_stylesheet_switcher.html](http://www.marcofolio.net/webdesign/create_a_better_jquery_stylesheet_switcher.html)。

现在 jQuery 灯箱 2 不起作用。:(

此处代码的实际问题与脚本文件的顶部区域有很大关系：

```
google.load("jquery", "1.3.1");
google.setOnLoadCallback(function() 
```

我已经尽可能多地注释了代码，请让我知道我做错了什么以及如何在这个可怕的脚本世界中改进！

# html - 两列布局 - 展开浮动 div

> ID：10506821
> 
> 赞同：1
> 
> 时间：2012-05-08T21:31:39.220
> 
> 标签：html, css

我有两列，左侧 div 是导航栏，它向左浮动，内容可以任意扩展（高度），我希望左侧浮动 div（左侧导航）随内容扩展分区。

我有一个示例标记。我希望黄色 div 扩展为等于红色 div，而不必指定 div 的高度。

到 jsfiddle 的链接是 [http://jsfiddle.net/saaedb/F5c97/1/](http://jsfiddle.net/saaedb/F5c97/1/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:44:24.113

您需要使用 Javascript/jQuery 来实现这一点。这是一个小提琴：http: [//jsfiddle.net/KjyNm/](http://jsfiddle.net/KjyNm/)

jQuery：

```
$(document).ready(function() {
 $("#leftnav").css("height", $("#content").height());
});​ 
```

HTML：

```
<div id="wrapper" style="">
  <div id="leftnav">

  </div>
  <div id="content">

  </div>
</div> 
```

# php - 通过 PHP 中的对象从提交按钮获取 POST

> ID：10506822
> 
> 赞同：0
> 
> 时间：2012-05-08T21:31:49.397
> 
> 标签：php, javascript, ajax, post

我正在使用对象从另一个页面获取表单（包含提交按钮）。我似乎无法弄清楚如何从该提交按钮获取 POSTED 信息，我想我可能需要 ajax。

所以例如

```
Page 1  calls to page1processing for a form

$getform = new page1processing;
$getform->form1($arbitraryVariable); 
```

第 1 页处理包含表单

```
Class page1processing{

  function form1($arbitraryVariables){
    echo <form name=.....>
    echo 'pretend this is info for some text boxes and junk';
    echo '<input type="submit" name ="submitButton"/>';
    }
   if(isset($_POST['submitButton'])){
       .....
    } 
```

所以，我想我要问的是我应该在哪里放置 if 语句来检查“submitButton”是否被按下？它应该在 page1 还是 page1processing 上？我花了一些时间在一堆代码中摸索，无法弄清楚这是我的代码错误，还是我检查发布信息的过程。

我在另一页上有表格的原因只是为了让 page1 保持整洁。我发现在 HTML 中放置一个对象比一大块代码更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:04:36.800

这是一个 ajax/jquery 解决方案。您可以使用班级或 ID、直播或委托。

```
 $("#submitButton").live('submit', function(e) {

                //CODE HERE
        }); 
```

# opencv - OpenCV 错误：断言失败（j < nimages）

> ID：10506823
> 
> 赞同：3
> 
> 时间：2012-05-08T21:31:52.283
> 
> 标签：opencv

我在我们的论文（文凭）中使用了 OpenCV 的 MeanShiftAlgorithm。QT4.6 中的示例运行良好。只有在我们自己的 GUI 应用程序中，我们收到一个 320x3x240 RGB 流，才会给它以下错误消息：

```
OpenCV Error: Assertion failed (j < nimages) in histPrepareImages, file /home/luca/OpenCvSDK/opencv-src/modules/imgproc/src/histogram.cpp, line 148
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/luca/OpenCvSDK/opencv-src/modules/imgproc/src/histogram.cpp:148: error: (-215) j < nimages in function histPrepareImages 
```

GUI 是在 Ubuntu 下使用 Eclipse/QT4.6 编程的。这是代码：

```
// Mean Shift Algorithm On
minSat=65;
ch[1]={0};
if (m_meanShiftAlgoOn)
{
    if (m_firstFrame)
    {
        m_firstFrame = false;
        // Define ROI
        imageROI= m_currentFrame(       cv::Rect(m_meanShift_xPos,m_meanShift_yPos,
                                                 m_meanShift_width,m_meanShift_height));
        cv::rectangle(m_currentFrame,   cv::Rect(m_meanShift_xPos,m_meanShift_yPos,m_meanShift_width,
                                                 m_meanShift_height),cv::Scalar(0,0,255));
        // Get the Hue histogram
        ColorHistogram hc;
        cv::MatND colorhist= hc.getHueHistogram(imageROI,minSat);

        finder.setHistogram(colorhist);
        finder.setThreshold(0.2f);

        // Convert to HSV space
        cv::cvtColor(m_currentFrame, hsv, CV_BGR2HSV);

        // Split the image
        cv::split(hsv,v);

        // Eliminate pixels with low saturation
        cv::threshold(v[1],v[1],minSat,255,cv::THRESH_BINARY);
        // for debug only: shows the frame with threshold
        //m_currentFrame = v[1];

        // Get back-projection of hue histogram
        result1= finder.find(hsv,0.0f,180.0f,ch,1);
        // for debug only: shows the frame with back-projection of hue histogram
        //m_currentFrame = result1;

        cv::bitwise_and(result1,v[1],result1);
        // for debug only: shows the frame with bitwise_and of src1 and src2
        //m_currentFrame = result1;
    }
    else
    {
            // Second frame

        // Convert to HSV space
        cv::cvtColor(m_currentFrame, hsv, CV_BGR2HSV);

        // Split the frame
        cv::split(hsv,v);

        // Eliminate pixels with low saturation
        cv::threshold(v[1],v[1],minSat,255,cv::THRESH_BINARY);
        // for debug only: shows the frame with eliminated pixels with low saturation
        //m_currentFrame = v[1];

        // Get back-projection of hue histogram
        result2= finder.find(hsv,0.0f,180.0f,ch,1);     // here code crash
        // for debug only: shows the frame with back-projection of hue histogram
        //m_currentFrame = result2;

        // Eliminate low stauration pixels
        cv::bitwise_and(result2,v[1],result2);

        // Get back-projection of hue histogram
        finder.setThreshold(-1.0f);
        result2= finder.find(hsv,0.0f,180.0f,ch,1);
        cv::bitwise_and(result2,v[1],result2);

        cv::Rect rect(m_meanShift_xPos,m_meanShift_yPos,m_meanShift_width,m_meanShift_height);
        cv::rectangle(m_currentFrame, rect, cv::Scalar(0,0,255));

        cv::TermCriteria criteria(cv::TermCriteria::MAX_ITER,10,0.01);

        cv::rectangle(m_currentFrame, rect, cv::Scalar(0,255,0));

    }
}
else
    m_firstFrame = true; 
```

投资回报率的参数是：

```
m_meanShift_xPos= 80
m_meanShift_yPos= 120
m_meanShift_width= 80
m_meanShift_height= 90 
```

这里仍然是文件 histogramm.cpp/LINE 1163 中的函数（如错误消息中所示）

```
static void histPrepareImages( const Mat* images, int nimages, const int* channels,
                               const Mat& mask, int dims, const int* histSize,
                               const float** ranges, bool uniform,
                               vector<uchar*>& ptrs, vector<int>& deltas,
                               Size& imsize, vector<double>& uniranges )
{
    int i, j, c;
    CV_Assert( channels != 0 || nimages == dims );

    imsize = images[0].size();
    int depth = images[0].depth(), esz1 = (int)images[0].elemSize1();
    bool isContinuous = true;

    ptrs.resize(dims + 1);
    deltas.resize((dims + 1)*2);

    for( i = 0; i < dims; i++ )
    {
        if(!channels)
        {
            j = i;
            c = 0;
            CV_Assert( images[j].channels() == 1 );
        }
        else
        {
            c = channels[i];
            CV_Assert( c >= 0 );
            for( j = 0; j < nimages; c -= images[j].channels(), j++ )
                if( c < images[j].channels() )
                    break;
            CV_Assert( j < nimages );               // line 148
        }

        CV_Assert( images[j].size() == imsize && images[j].depth() == depth );
        if( !images[j].isContinuous() )
            isContinuous = false;
        ptrs[i] = images[j].data + c*esz1;
        deltas[i*2] = images[j].channels();
        deltas[i*2+1] = (int)(images[j].step/esz1 - imsize.width*deltas[i*2]);
    }

    if( mask.data )
    {
        CV_Assert( mask.size() == imsize && mask.channels() == 1 );
        isContinuous = isContinuous && mask.isContinuous();
        ptrs[dims] = mask.data;
        deltas[dims*2] = 1;
        deltas[dims*2 + 1] = (int)(mask.step/mask.elemSize1());
    }

    if( isContinuous )
    {
        imsize.width *= imsize.height;
        imsize.height = 1;
    }

    if( !ranges )
    {
        CV_Assert( depth == CV_8U );

        uniranges.resize( dims*2 );
        for( i = 0; i < dims; i++ )
        {
            uniranges[i*2] = histSize[i]/256.;
            uniranges[i*2+1] = 0;
        }
    }
    else if( uniform )
    {
        uniranges.resize( dims*2 );
        for( i = 0; i < dims; i++ )
        {
            CV_Assert( ranges[i] && ranges[i][0] < ranges[i][1] );
            double low = ranges[i][0], high = ranges[i][1];
            double t = histSize[i]/(high - low);
            uniranges[i*2] = t;
            uniranges[i*2+1] = -t*low;
        }
    }
    else
    {
        for( i = 0; i < dims; i++ )
        {
            size_t j, n = histSize[i];
            for( j = 0; j < n; j++ )
                CV_Assert( ranges[i][j] < ranges[i][j+1] );
        }
    }
} 
```

提前感谢您的任何回答...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-12-18T16:39:09.587

对我来说，我必须改变

```
img = cv2.imread('image.jpg', 0) 
```

至

```
img = cv2.imread('image.jpg') 
```

这`0`是一个[imreadModes](https://docs.opencv.org/master/d4/da8/group__imgcodecs.html)要求 cv 以灰度模式读取图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T13:46:23.613

我今天在运行一个涉及的示例时遇到了同样的问题`python-opencv`，在我检查代码后，我发现图像的位置错误，希望答案可以帮助你。

# cocoa - 在 Cocoa 中添加自定义形状

> ID：10506824
> 
> 赞同：0
> 
> 时间：2012-05-08T21:31:55.047
> 
> 标签：cocoa

有谁知道如何将自定义形状（例如圆形、三角形、六边形等）添加到 Cocoa 应用程序中？我应该使用一些特殊的对象吗？谢谢。

不要说添加自定义形状的图片之类的东西。我想改变形状的颜色来做我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:47:15.327

您可以使用`NSBezierPath`类（[类文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsbezierpath_Class/Reference/Reference.html)）从贝塞尔曲线中制作您想要的任何形状。

这是用于绘制多边形（五边形、六边形等）的类别和类方法。

```
@interface NSBezierPath (Polygons)
+ (NSBezierPath *)bezierPathWithPolygonAt:(NSPoint)origin
    radius:(float)r sides:(int)nsides;
@end

@implementation
+ (NSBezierPath *)bezierPathWithPolygonAt:(NSPoint)origin
    radius:(float)r sides:(int)nsides
{
    NSBezierPath *p = [NSBezierPath bezierPath];
    int i;
    for (i = 0; i < nsides; ++i) {
        float a = i * (atanf(1.0f) * 8.0f / nsides);
        NSPoint pt = NSMakePoint(origin.x + r * cosf(a),
                                 origin.y + r * sinf(a));
        if (i == 0)
            [p moveToPoint:pt];
        else
            [p lineToPoint:pt];
    }
    [p closePath];
    return p;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:02:12.117

我认为 For You 最好使用 Quartz 图形。

> Quartz 是 Cocoa 中所有图形的中心。它提供了基本的图形数据结构和绘图例程。

看看这两个教程会对你有帮助：

[石英简介](http://cocoadevcentral.com/d/intro_to_quartz/)。

[石英 II 简介](http://cocoadevcentral.com/d/intro_to_quartz_two/)。

在 Quartz 中，您可以轻松绘制任何形状并更改颜色。

# asp.net-mvc-4 - 如何获取视图对象（System.Web.Mvc.IView）

> ID：10506825
> 
> 赞同：2
> 
> 时间：2012-05-08T21:32:03.703
> 
> 标签：asp.net-mvc-4, asp.net-mvc-views

如何从任何控制器检索同一项目中的视图对象？

[这个 StackOverflow 答案](https://stackoverflow.com/questions/5181260/get-html-from-net-mvc-view-without-actually-rendering-the-view-in-the-browser)建议使用 System.Web.Mvc.ViewEngines.Engines.FindView 但我无法从 System.Web.Http.ApiController 派生 System.Web.Mvc.ControllerContext 实例。

我试图让视图对象在其上调用 Render 以将其作为字符串取出。

# c# - MVC 2 DropDownList 在列表的情况下不选择值

> ID：10506828
> 
> 赞同：3
> 
> 时间：2012-05-08T21:32:15.850
> 
> 标签：c#, asp.net-mvc, model-view-controller, drop-down-menu

我正在使用 ASP.Net MVC 2 并且无法正确绑定 DropDownList。

我正在使用强类型 ViewModel 和 HTML.DropDownListFor 语句在我的视图中创建下拉列表。该语句在“正常”场景中运行良好，我只是将 DropDown 绑定到 ViewModel 中的一个简单字段。当我的 ViewModel 包含多个对象的列表（数组）时，我在使用这种场景时遇到问题，我希望每个对象中的一个字段绑定到（单独的）下拉菜单。在这种情况下，DropDown 没有得到正确的初始值。

例如，我们有一个可以有多个地址的人的情况。每个地址由街道、城市和州组成。我希望将状态显示为下拉菜单。我的模型是：

```
public class PersonModel : CommonViewModel
{
    public IList<SelectListItem> AvailableStates { get; set; }

    public string Name { get; set; }

    public IList<AddressModel> Addresses { get; set; }

    public PersonModel()
    {
        AvailableStates = GenerateStates();
    }

    private IList<SelectListItem> GenerateStates()
    {
        List<SelectListItem> items = new List<SelectListItem>();
        items.Add(new SelectListItem() { Text = "WA", Value = "WA" });
        items.Add(new SelectListItem() { Text = "NY", Value = "NY" });
        items.Add(new SelectListItem() { Text = "IH", Value = "IH" });
        items.Add(new SelectListItem() { Text = "FL", Value = "FL" });
        items.Add(new SelectListItem() { Text = "CA", Value = "CA" });

        return items;
    }
}

public class AddressModel
{
    public string Street { get; set; }
    public string City { get; set; }
    public string State { get; set; }
} 
```

现在在我的视图中，我想使用类似的东西：

```
<% using (Html.BeginForm("SubmitPersonDetails", "Home", new { actionMode = "Person"}, FormMethod.Post, new { id = "SubmitPersonForm" }))
   {%>
    <div class="formrow longinput">
    <%= Html.LabelFor(person => person.Name)%>
    <%= Html.TextBoxFor(person => person.Name)%>
</div>
<h4>Addresses</h4>
<% for (int i = 0; i < Model.Addresses.Count; i++) { %>
<div class="formrow">
<%= Html.TextBoxFor(person => person.Addresses[i].Street)%>
<%= Html.TextBoxFor(person => person.Addresses[i].City)%>
<%--<%= Html.TextBoxFor(person => person.Addresses[i].State)%>--%>
<%= Html.DropDownListFor(person => person.Addresses[i].State, Model.AvailableStates) %>
</div>
<% } %>
 <input class="button primary" type="submit" value="Submit" name="Submit" />
<% } %> 
```

对于文本框，这很好用（如果我只使用文本框作为状态，请参阅注释掉的位）。DropDown 的生成正确，但未设置为正确的值。如果我在 DropDowns 中选择一个值并提交表单，则正确的值将放回我的模型中。

我还尝试将地址部分放在 UserControl 中，然后渲染几次。如果我使用 Html.RenderPartial 呈现 UserControl，则在 DropDOwn 中设置了正确的值，但在回发时，我的模型没有正确填充。如果我使用 EditorFor 渲染 UserControl，我会遇到与上面的代码相同的问题：DropDown 没有获得正确的初始值，但在回发时，我确实获得了在我的模型中设置的选定值。

我尝试的另一件事是使地址不是列表，而是在我的视图模型中硬编码几个地址（属性：Address1、Address2、Address3），然后使用：<%= Html.DropDownListFor(person => person.Address1.State, Model .AvailableStates) %> 在这种情况下，DropDown 确实获得了正确的值。显然，由于缺乏灵活性，我不想使用这种解决方法。

我究竟做错了什么？我是 MVC 的新手，所以也许我的整个方法都是错误的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T21:41:24.160

这是帮助程序的一个限制，`DropDownListFor`它无法从复杂的 lambda 表达式中提取值，例如您正在使用的那个（包含数组索引访问的 lambda 表达式）。一种可能的解决方法如下：

```
<%= Html.DropDownListFor(
    person => person.Addresses[i].State, 
    new SelectList(
        Model.AvailableStates, 
        "Text", 
        "Value", 
        Model.Addresses[i].State
    )
) %> 
```

It's a bit ugly as we are now passing the same value in the SelectList constructor but this time the DropDownListFor helper will be able to properly set the corresponding option.

# android - 无法显示我的自定义 SurfaceView 的 2 个实例

> ID：10506832
> 
> 赞同：6
> 
> 时间：2012-05-08T21:32:51.100
> 
> 标签：android, tabs, surfaceview

我已经创建了自己的自定义 SurfaceView，它可以自己正常工作，但是当我尝试将两个放在[TabWidget](http://developer.android.com/reference/android/widget/TabWidget.html)中的单独选项卡上时，无论选择哪个选项卡，都只会显示一个，并且它始终是 SurfaceView 在应用程序启动。

为了说明问题，我创建了可以编译以显示问题的示例代码。

下面的SurfaceView，叫做SurfaceViewCircle，只是简单的创建一个位图，默认画一个蓝色的圆圈，然后显示出来。有一个公共方法changeColour()，它将改变位图中的圆圈颜色。

其次，我创建了一个 XML 布局，它只包含一个 SurfaceViewCircle 实例。

在 Activity 类中，我创建了一个 TabWidget 和主机等。然后我将上述 XML 膨胀两次，但在一个实例中，我将 SurfaceViewCircle 的颜色更改为红色。一旦应用程序运行，无论我选择哪个选项卡，红色圆圈总是显示，除了当应用程序退出并显示蓝色圆圈时的简短实例。

谁能指出我在使用 SurfaceView 时是否遗漏了一步？

这是活动代码：

```
public class TestActivity extends Activity  {
/** Called when the activity is first created. */

private TabHost mTabHost;
private Context mTabHostContext;
private View surfaceView1, surfaceView2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /*
     * Setup tabs
     */
    setContentView(R.layout.maintabs);
        setupTabHost(); //Prepares the TabHost from code rather than XML;
    mTabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider); //Sets a thin dividing line
    mTabHostContext = mTabHost.getContext();
    surfaceView1 = LayoutInflater.from(mTabHostContext).inflate(R.layout.surfaceviewindependent, null);
    SurfaceViewCircle s = (SurfaceViewCircle)surfaceView1.findViewById(R.id.circle1);
    /*
     * Change the colour to red
     */
    s.changeColour(getResources().getColor(R.color.red_square));

    /*
     * Create a second layout containing SurfaceViewCircle but leave circle as default blue.
     */
    surfaceView2 = LayoutInflater.from(mTabHostContext).inflate(R.layout.surfaceviewindependent, null);
    setupTab(surfaceView1,"SurfaceView1");
    setupTab(surfaceView2,"SurfaceView2");

}

private void setupTabHost() {
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();
}

private void setupTab(final View view, final String tag) {
    View tabview = createTabView(mTabHost.getContext(), tag); // This creates a view to be used in the TAB only

    /* this creates the tab content AND applies the TAB created in the previous step in one go */
    TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(new TabContentFactory() {
        public View createTabContent(String tag) {return view;}
    });
    mTabHost.addTab(setContent);

}

private static View createTabView(final Context context, final String text) {
    View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
    TextView tv = (TextView) view.findViewById(R.id.tabsText);
    tv.setText(text);

    return view;
}   
} 
```

这是我的自定义 SurfaceView：

```
public class SurfaceViewCircle extends SurfaceView implements SurfaceHolder.Callback{

private Paint paint, circlePaint;
private Bitmap bitmap = null;
private int w;
private int h;
private int colour = 0;
private Resources r = null;
private _Thread t = null;
private boolean surfaceIsCreated;

public SurfaceViewCircle(Context context) {
    super(context);
    initialise();
}

public SurfaceViewCircle(Context context, AttributeSet attrs) {
    super(context, attrs);
    initialise();
}

public SurfaceViewCircle(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    initialise();
}

private void initialise(){
    r = getResources();
    getHolder().addCallback(this);
    paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setFilterBitmap(true);
    colour = R.color.blue_square;
    circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    circlePaint.setColor(r.getColor(colour));
    circlePaint.setStyle(Style.FILL);
    circlePaint.setStrokeWidth(0.02f);
    t = new _Thread(getHolder());

}

public void changeColour(int colour){
    circlePaint.setColor(colour);
    if (surfaceIsCreated){
        createBitmap();
    }
    synchronized (t){
        t.notify();
    }
}

private Bitmap createBitmap(){
    Bitmap b = null;
    b = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(b);
    c.scale((float)w, (float)w);        //Scales the background for whatever pixel size
    c.drawCircle(0.5f, 0.5f, 0.5f, circlePaint);
    //c.drawColor(r.getColor(colour));
    return b;
}

public void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
    int width = measure(widthMeasureSpec);
    int height = measure(heightMeasureSpec);

    int d = Math.min(width, height);
    setMeasuredDimension(d,d);
}

private int measure(int measureSpec) {
    int result = 0;
    // Decode the measurement specifications
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    return specSize;
}

@Override
protected void onSizeChanged(int w, int h, int oldW, int oldH){
    super.onSizeChanged(w, h, oldW, oldH);
    //synchronized (this){
        this.w = Math.min(w, h);
        this.h = w;
    //}
    Bitmap b = createBitmap();

        bitmap = b;

    Log.i("Square", "onSizeChanged() called.");

}
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    Log.i("Panel", "surfaceCreated() called.");
    t.setRunning(true);
    t.start();
    surfaceIsCreated = true;

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    Log.i("Square", "surfaceDestroyed() called.");

    surfaceIsCreated = false;
    boolean retry = true;
    synchronized (t){
        t.setRunning(false);
        t.notify();
    }
    while (retry) {
        try {
            t.join();
            retry = false;
        } catch (InterruptedException e) {
            // we will try it again and again...
        }
    }

}

private class _Thread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private boolean _run = false;

    public _Thread(SurfaceHolder surfaceHolder) {
        _surfaceHolder = surfaceHolder;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    @Override
    public void run() {
        Canvas c = null;
        while (_run){
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    synchronized(bitmap){
                        c.drawBitmap(bitmap, 0, 0, paint);
                    }
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
            synchronized(this){
                try {
                    wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block

                }
            }
        }
    }
}
} 
```

maintabs.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout android:orientation="vertical"
        android:layout_width="fill_parent" android:layout_height="fill_parent">
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:layout_marginLeft="0dip" android:layout_marginRight="0dip" />
            <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" android:layout_height="fill_parent" />
    </LinearLayout>
    </TabHost>
</LinearLayout> 
```

和surfaceviewindependent.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
<uk.co.androidcontrols.gauges.SurfaceViewCircle
android:id="@+id/circle1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:layout_margin="1dip">
</uk.co.androidcontrols.gauges.SurfaceViewCircle>
</LinearLayout> 
```

我还注意到其他人在[这里遇到了类似的问题。](http://androidforums.com/application-development/225216-tabbed-surfaceviews-possible.html)

为糟糕的格式道歉，但代码编辑器几乎不可能用于大代码引号！

**附加信息**

我尝试使用`setVisibility()'`in`onvisibilityChanged()`但最终导致异常：

```
protected void onVisibilityChanged(View changedView, int visibility){
    super.onVisibilityChanged(changedView, visibility);
    changedView.setVisibility(visibility);
    Log.i("SurfaceViewCircle", "onVisibilityChanged() called.");
}

java.lang.IllegalThreadStateException: Thread already started. 
```

看起来调用`changedView.setvisibility()`每次都会破坏表面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T00:11:57.930

我根据您的代码构建了一个测试项目，并且令人惊讶地花了将近几个小时来摆弄它。我现在会迅速脱口而出我的发现，因为我应该开工了！

首先，您肯定会创建两个选项卡，每个选项卡都有一个单独的 custom 实例`SurfaceView`。没关系。

现在，当第`Activity`一个启动并显示第一个选项卡时，只有第一个`SurfaceView`被初始化并`surfaceCreated()`调用，此时它`Thread`运行。

当第二个选项卡被选中时，`SurfaceView`回调`createTabContent()`为其提供的第二个选项卡会像第一个选项卡一样被初始化。从那时起，直到 s 的拆除`Activity`，*两个* `SurfaceView`s 都保持在其有效的表面状态。在选项卡之间切换永远不会调用`surfaceDestroyed()`任何一个`SurfaceView`，因此`SurfaceCreated()`也永远不会再次调用。首次创建后也不会再次调用“onMeasure()”。因此，这告诉我两个`SurfaceView`s 都保留在整个`View`层次结构中。两者`SurfaceViews`都`Thread`在运行，如果你没有`wait()`在其中，两者都会不断地尝试渲染到视频内存。

如您所知， a在层次结构`SurfaceView`中的位置（或者更确切地说，不位于）方面非常独特。`View`这里似乎发生的是`SurfaceView`，无论选项卡选择如何，第一个被创建的是在视频内存上看到输出的那个。

我首先尝试的一件事是让第二个`SurfaceView`明显小于第一个，其中的圆圈比例较小。当从第一个选项卡（较大`SurfaceView`的红色圆圈较大）切换到第二个选项卡（较小`SurfaceView`的蓝色圆圈）时，我可以看到可见的大小`SurfaceView`正确减小，就好像第二个`SurfaceView`变得可见一样，而不是其较小的蓝色圆圈是可见的，我只有第一个`SurfaceView`大红色圆圈的很大一部分穿过，但被第二个较小的尺寸裁剪掉了`SurfaceView`。

我最终玩的是以下两种方法调用：

```
((SurfaceView)surfaceView1.findViewById(R.id.circle1)).setVisibility(View.GONE);

((SurfaceView)view.findViewById(R.id.circle1)).bringToFront(); 
```

后者`bringToFront()`似乎没有取得任何成就。但是在*第二个*选项卡被选中时使用第一个调用，然后让它很好地从红色圆圈切换到蓝色*圆圈*`setVisibility(View.GONE)`。 *`SurfaceView` *`SurfaceView`**

 **因此，我认为您需要尝试做的是寻找合适的`TabHost`API 回调方法来覆盖将在`every`选择选项卡时调用的方法（可能使用），并将其用作在所有 s 上适当`TabHost.OnTabChangeListener`调用以控制哪个一个出现在顶部。`setVisibility()``SurfaceView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T15:24:15.970

看起来不推荐我想用 SurfaceView 做的事情：[链接](http://groups.google.com/group/android-developers/browse_thread/thread/7d08a124a2e48bb3)**

# vba - 使用 VBA 来自受密码保护的网站的数据

> ID：10506833
> 
> 赞同：4
> 
> 时间：2012-05-08T21:32:54.360
> 
> 标签：vba, excel, automation, excel-2007, password-protection

使用 Excel 2007 和 VBA 6.5

我正在尝试自动化数据收集任务，但是我一直遇到“运行时错误 91 -”对象变量或未设置块变量。”这是一个参考问题还是与我的脚本有关。

谢谢。

脚本包含在下面（密码和变量保护）

```
Sub Basic_Web_Query()

Set ie = CreateObject("InternetExplorer.Application")
    With ie
        .Visible = True
        .Navigate "https://www.urbics.com/Login.php"
        Do Until .ReadyState = 4
            DoEvents
        Loop
        .document.all.Item("User Name").Value = "UserName"
        .document.all.Item("Password").Value = "Password"
        .document.forms(0).submit
    End With

With ActiveSheet.QueryTables.Add(Connection:= _
"URL;http://www.urbics.com/Urbics.php?hs=a97cd706q9948q11e1qbbacq00259002436c&pgreq=AVTotals&aid=4517", Destination:=Range("$B$4"))

.Name = "q?s=goog_2"
.FieldNames = True
.RowNumbers = False
.FillAdjacentFormulas = False
.PreserveFormatting = True
.RefreshOnFileOpen = False
.BackgroundQuery = True
.RefreshStyle = xlInsertDeleteCells
.SavePassword = False
.SaveData = True
.AdjustColumnWidth = True
.RefreshPeriod = 0
.WebSelectionType = xlSpecifiedTables
.WebFormatting = xlWebFormattingNone
.WebTables = "1,2"
.WebPreFormattedTextToColumns = True
.WebConsecutiveDelimitersAsOne = True
.WebSingleBlockTextImport = False
.WebDisableDateRecognition = False
.WebDisableRedirections = False
.Refresh BackgroundQuery:=False

End With
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:37:09.633

更改这些行

```
 .document.all.Item("User Name").Value = "UserName"
    .document.all.Item("Password").Value = "Password" 
```

到

```
 .document.all.Item("loginUserName").Value = "UserName"
    .document.all.Item("loginUserPassword").Value = "Password" 
```

然后再试一次。

# delphi - 德尔福挂钩 x64

> ID：10506834
> 
> 赞同：2
> 
> 时间：2012-05-08T21:33:04.060
> 
> 标签：delphi, 64-bit

请我使用以下代码 [ [delphi Hook SetClipboardData from user32.dll](https://stackoverflow.com/questions/10143733/delphi-hook-setclipboarddata-from-user32-dll) ] 在 x86 中挂钩剪贴板，效果很好，但我现在的问题是 x64，我认为问题出在 x64 下的 PUSH 和 RET 值。如果我是正确的，请有人给我 x64 上 PUSH 和 RET 的正确值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:55:19.660

我认为你应该改变

```
cOpen.Push := $68; 
```

至

```
cOpen.Push := $E9; 
```

# c# - How do I calculate network speed?

> ID：10506837
> 
> 赞同：3
> 
> 时间：2012-05-08T21:33:12.657
> 
> 标签：c#, wcf

**Solved:**

I'm using WCF to transfer files by streaming. The client calls a method in the service, then the service take the file from the client. On the way, I'm sending back by CallBack the speed.

My problem is that I can't determine which speed am I calculating. When the service takes the file from the client, it uses download speed. However, when the client sends the file it is the upload speed. Which one do I need to calculate, and how?

**Not solved yet:**

When the client calls the service's method (and gives it the stream with a **reference to the file**),it takes **TOO** long (depends on the size of the file) from the time the client calls the method until the service's method starts to activate. Why does this happen? A one Gigabyte file will take forever.

*From the time the service's method starts, the all thing works fine with no problems. So showing the service is a waste of time.

(client)

```
Stream TheStream = File.OpenRead(@"C:\BigFile.rar");
Service1.GiveAFile(TheStream); 
```

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:21:34.303

Source : [How to calculate network bandwidth speed in c#](http://www.m0interactive.com/archives/2008/02/06/how_to_calculate_network_bandwidth_speed_in_c_/)

```
CODE:
using System;
using System.Net.NetworkInformation;
using System.Windows.Forms;

namespace InterfaceTrafficWatch
{
    /// <summary>
    /// Network Interface Traffic Watch
    /// by Mohamed Mansour
    /// 
    /// Free to use under GPL open source license!
    /// </summary>
    public partial class MainForm : Form
    {
        /// <summary>
        /// Timer Update (every 1 sec)
        /// </summary>
        private const double timerUpdate = 1000;

        /// <summary>
        /// Interface Storage
        /// </summary>
        private NetworkInterface[] nicArr;

        /// <summary>
        /// Main Timer Object 
        /// (we could use something more efficient such 
        /// as interop calls to HighPerformanceTimers)
        /// </summary>
        private Timer timer;

        /// <summary>
        /// Constructor
        /// </summary>
        public MainForm()
        {
            InitializeComponent();
            InitializeNetworkInterface();
            InitializeTimer();
        }

        /// <summary>
        /// Initialize all network interfaces on this computer
        /// </summary>
        private void InitializeNetworkInterface()
        {
            // Grab all local interfaces to this computer
            nicArr = NetworkInterface.GetAllNetworkInterfaces();

            // Add each interface name to the combo box
            for (int i = 0; i < nicArr.Length; i++)
                cmbInterface.Items.Add(nicArr[i].Name);

            // Change the initial selection to the first interface
            cmbInterface.SelectedIndex = 0;
        }

        /// <summary>
        /// Initialize the Timer
        /// </summary>
        private void InitializeTimer()
        {
            timer = new Timer();
            timer.Interval = (int)timerUpdate;
            timer.Tick += new EventHandler(timer_Tick);
            timer.Start();
        }

        /// <summary>
        /// Update GUI components for the network interfaces
        /// </summary>
        private void UpdateNetworkInterface()
        {
            // Grab NetworkInterface object that describes the current interface
            NetworkInterface nic = nicArr[cmbInterface.SelectedIndex];

            // Grab the stats for that interface
            IPv4InterfaceStatistics interfaceStats = nic.GetIPv4Statistics();

            // Calculate the speed of bytes going in and out
            // NOTE: we could use something faster and more reliable than Windows Forms Tiemr
            //       such as HighPerformanceTimer http://www.m0interactive.com/archives/2006/12/21/high_resolution_timer_in_net_2_0.html
            int bytesSentSpeed = (int)(interfaceStats.BytesSent - double.Parse(lblBytesSent.Text)) / 1024;
            int bytesReceivedSpeed = (int)(interfaceStats.BytesReceived - double.Parse(lblBytesReceived.Text)) / 1024;

            // Update the labels
            lblSpeed.Text = nic.Speed.ToString();
            lblInterfaceType.Text = nic.NetworkInterfaceType.ToString();
            lblSpeed.Text = nic.Speed.ToString();
            lblBytesReceived.Text = interfaceStats.BytesReceived.ToString();
            lblBytesSent.Text = interfaceStats.BytesSent.ToString();
            lblUpload.Text = bytesSentSpeed.ToString() + " KB/s";
            lblDownload.Text = bytesReceivedSpeed.ToString() + " KB/s";

        }

        /// <summary>
        /// The Timer event for each Tick (second) to update the UI
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void timer_Tick(object sender, EventArgs e)
        {
            UpdateNetworkInterface();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:05:51.577

For the second issue:

Most likely your service is loading the entire file into memory before streaming it back to the client.

You might look at the following question to get an idea of how to properly chunk it.

[How can I read/stream a file without loading the entire file into memory?](https://stackoverflow.com/questions/6865890/how-can-i-read-stream-a-file-without-loading-the-entire-file-into-memory)

# php - PHPExcelReader 无法写入数据库

> ID：10506840
> 
> 赞同：2
> 
> 时间：2012-05-08T21:33:30.030
> 
> 标签：php, mysql, sql

[我正在使用来自http://sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/)的 phpexcelreaderclass ，我一直在关注这个 tut：[http ://rackerhacker.com/2008/11/07/importing-excel-files-into- mysql-with-php/](http://rackerhacker.com/2008/11/07/importing-excel-files-into-mysql-with-php/)

现在一切似乎进展顺利，但似乎没有向数据库中插入任何内容？它向我回显了工作表中的数据，所以我猜它会读取它并将其显示回来，但它只是没有写入 MySQL 数据库。

```
<?php
    ini_set('display_errors',1); 
    error_reporting(E_ALL);
    require_once 'Excel/reader.php';
    $data = new Spreadsheet_Excel_Reader();
    $data->setOutputEncoding('CP1251');
    $data->read('Export.xls');

    $conn = mysql_connect("localhost","root","");
    mysql_select_db("excel",$conn);

    for ($x = 2; $x <= count($data->sheets[1]["cells"]); $x++) {
        $rep_num = $data->sheets[1]["cells"][$x][1];
        $description = $data->sheets[1]["cells"][$x][2];
        $repair_type = $data->sheets[1]["cells"][$x][3];
        $sql = "INSERT INTO data (`rep_num`,`description`,`repair_type`) 
            VALUES ('$rep_num',$description,'$repair_type')";
        echo $sql."\n";
        mysql_query($sql);
} 
```

我想这很明显，我敢肯定，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:37:38.490

尝试

```
$sql = "INSERT INTO data (rep_num, description, repair_type) VALUES ('$rep_num','$description','$repair_type')"; 
```

确保您的字段名称正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:41:37.013

检查您的 mysql_query 方法结果，如下所示：

```
$result = mysql_query($sql);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

[php.net - mysql 查询描述](http://php.net/manual/en/function.mysql-query.php)

# sql - SQL 按 2 个日期列排序

> ID：10506843
> 
> 赞同：4
> 
> 时间：2012-05-08T21:14:44.123
> 
> 标签：sql

我有一张订单表。每个订单都有一个`delivery_date`, 和一个`collection_date`。

我想检索订单作为一周的时间表，显示接下来要做的事情。

所以我想我希望显示时间序列，以便周三的集合出现在周二的交付和周四的另一个交付之间。

关于如何使用 SQL 执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T21:29:01.260

使用 Union ALL，我将您的每个订单记录视为两条记录：一条用于交货，一条用于收集。如果您有另一个日期（修复？），您将合并另一个具有类似字段的子查询。

因为你没有在你的订单表上提供任何规格，所以我编了很多。

```
select *
from (
   Select OrderID
       , 'Colection' as VisitType
      , Collection_Date as VisitDate
   from Orders
   Union All
   Select OrderID
     , 'Delivery' as VisitType
     , Delivery_Date as VisitDate
  from Orders
) as v
order by v.VisitDate 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T21:29:52.883

根据您使用的数据库，它将类似于以下内容

```
ORDER BY CASE WHEN delivery_date > collection_date 
         THEN collection_date ELSE delivery_date END 
```

# c++ - 输出到 stdout/cout/etc 的进程间同步

> ID：10506846
> 
> 赞同：0
> 
> 时间：2012-05-08T21:33:44.537
> 
> 标签：c++, unix, synchronization, posix

有没有办法在不相关的进程之间将输出同步到标准输出流（无论是 C`stdout`还是 C++ `std::cout`），这样不相关进程的输出就不会被穿插？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:36:21.547

尽管有一个名为 的函数`sync_with_stdio`，但这并不能满足您的想法。

您将需要使用一些操作系统提供的同步原语，例如`boost::scoped_lock`with `boost::mutex`（在一个进程内）或 Boost.MPI 原语进行进程间同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T01:18:22.373

取决于你所说的不相关是什么意思。在没有父/子关系的意义上，这些进程可以是不相关的，但它们仍然必须以某种方式进行编程，例如信号量、互斥锁、文件锁或其他任何方式。没有秘密的系统调用（我知道）会自动同步来自两个单独进程的两个单独的流。

# ruby - 在文件中添加换行符

> ID：10506856
> 
> 赞同：4
> 
> 时间：2012-05-08T21:34:21.470
> 
> 标签：ruby, file-io

如何在 Ruby 中为文件写入换行符？

我要写入文件的代码是：

[完整代码请求]

```
print("Word:")                                  #Prompt for word to scrambe
word = gets.chomp                               #Inputs word
wordLength = word.length                        #Gets word length
randomAmount = wordLength * wordLength          #Finds out how many ways to randomize
amountDone = 0                                  #Loop variable for process of randomizing
while amountDone != randomAmount
puts "---------------------------\n"
x = word.chars.to_a.shuffle                 #Changes each character to an array and randomizez them
File.open("output.txt","a+") {|f| f.write(x)}
puts "#{amountDone}:\n #{x}"                
amountDone += 1
puts "---------------------------\n"
end
puts "Type any key to continue..."
endWord = gets.chomp                            #Close program prompt 
```

-

```
File.open("output.txt","a+") {|f| f.write(x) } 
```

但问题是那行 ^ 在一个循环中。这意味着它实际上一遍又一遍地重复了很多次。因此，每当您打开输出文件时，输出都会被压缩在一起。所以我写的程序基本上所做的就是将单词打乱成尽可能多的方式。因此，如果我的输入是“Abcdefgh”，那么文件中的输出将显示为一个连续的行：

> bdfcegAhhbgfeAcdhcedbAgfdfcAhgebefcdbghAdAfhegbcAegdfhbcbchdgefAhAbedfcgdAfcbhgefhgdAbceefdhcgAbAefbhgcdfAcebdhgAebgchfddhcfAbegcAdfbhgecAgdfhebedAghbfcedbAchgfbhAcgfdeceghAbfddAbfehcgbAhefdgcecfghbdAAhcgdfbedchAgfbebfhAgecdedAhcbgfAfdceghbehdcAbfgcegdhbfAfdAbchgegAhbfecdgeAdhfcbcbdAehfgfhgbcAedchdgbefAfhecdAbgAbedgcfhehcgfbdAAhgcebfdbAcehgfddfchgebAhcAbegdffAbehgcdchdbgAfebeAhgdfcbegcdhfAfecbdhAgdbfehgAcdbcehgfAgdehfcbAbgedAcfhdgcAfehbdfhAgecbcAgdhebfghbAefcdgebhAfdcgecdbAfhgbcAhfedhAbfgdcebAedfhcgbdfchAge

所以，我想做的是我想在输出之间进行某种分离。所以每次输出时都会有一个新行、一个空格、一个管道、一个斜杠等。

我已经试过了

```
File.open("output.txt","a+") {|f| f.write(x)+" " } 
```

和

```
File.open("output.txt","a+") {|f| f.write(x)," " } 
```

和

```
File.open("output.txt","a+") {|f| f.write(x)" " } 
```

但它不起作用。那么我怎么能解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:37:48.073

```
File.open("output.txt","a+") { |f| f.puts(x) } 
```

应该这样做

编辑：

您可以像这样将换行符附加到 x ：

```
x + "\n" 
```

编辑2：

您想在循环之外打开文件。试试这个：

```
File.open('testfile.txt', 'a+') do |f|
  (1..3).each do |i|
    f.puts("test #{i}")
  end
end 
```

它适用于我的机器（MBP）。它在文件中放置了 3 行：

```
test 1
test 2
test 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T22:32:24.620

在最简单的级别上，您可以简单地添加另一个`write`语句：

```
separator = '\n' # or space, tab, etc
...
File.open("output.txt","a+") {|f|
    f.write(x)
    f.write(separator)
} 
```

结合这两个`write`调用应该也可以：

```
separator = '\t'
...
File.open("output.txt","a+") {|f| f.puts(x + separator) } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T00:06:28.757

当我想出这个解决方案时，我实际上嘲笑它是多么简单。

我真正需要做的就是将间距与线条分开添加。因此对于：

```
File.open("output.txt","a+") {|f| f.write(x) } 
```

所有需要做的就是添加这一行：

```
File.open("output.txt","a+") {|f| f.write(" ") } 
```

所以它会是：

```
File.open("output.txt","a+") {|f| f.write(x) }
File.open("output.txt","a+") {|f| f.write(x) }      #This is hilarious 
```

所以解决方案一直都很简单，尽管如果有更简单的解决方案（也许代码在一行而不是 2 行）。

我认为@seph 的答案确实有效，但仍然以相同的方式逐个字母然后一个空格来写。如果您将“puts”更改为“write”，我认为它会单独编写每个。

```
File.open('testfile.txt', 'a+') do |f|
(1..3).each do |i|
f.puts("#{x} #{randomAmount}")
end
end

#change that to

File.open('output.txt', 'a+') do |f|
(randomAmount).each do |i|
f.write("#{amountDone}:\n#{x}")
end
end 
```

然后我认为它有效。我不确定自从我尝试这个时它是否真的有效，因为我放错了我的 output.txt 文件，所以我认为我的主目录中的空文件有输出（这不是真的）所以我得到了错误的想法。

但是感谢所有尝试过的人！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T21:48:49.313

您需要在“”和 x 周围加上括号。

```
File.open("output.txt","a+") {|f| f.write(x)+" " } 
```

应该改为

```
File.open("output.txt","a+") {|f| f.write(x + " ") } 
```

# javascript - 脚本未使用动态生成的 JQuery 脚本标记执行

> ID：10506857
> 
> 赞同：2
> 
> 时间：2012-05-08T21:34:27.570
> 
> 标签：javascript, jquery

我在外部 JS 文件中有以下代码（即：test.js）；如果它检测到 JQuery 源不存在，则会创建一个指向 JQuery 源的附加脚本标记。该代码实际上创建了脚本标记并将其插入到正在创建的实际脚本之前：

```
if (typeof(jQuery) == "undefined") {
 var head = document.getElementsByTagName("head")[0];
 // get any and all script tags 
 var scripts = document.getElementsByTagName("script");
 // the actual script call the actions (ie: this one "test.js")
 thisScript = scripts[scripts.length - 1];
 // create element
 var script = document.createElement("script");
 script.setAttribute("type", "text/javascript");
 script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js");
head.insertBefore(script,thisScript); 
} 
```

以上工作正常。但是，我遇到的问题是，一旦创建了 JQuery 源脚本标记，“test.js”上的其余代码就不起作用了。就好像代码无法访问 JQuery 函数（或者不知道 JQuery 在那里）。

因此，“test.js”上的以下代码不起作用：

```
$(document).ready(function() {

 // ...

}); 
```

根据 FF 12 的 FireBug，我得到的错误是：“$ 未定义” 关于为什么会发生这种情况或如何解决它的任何想法？

注意：我知道我可以将 JQuery 放在目标页面上；但是，这不是一个选项，因为代码必须能够检测 JQuery 是否存在；如果没有，则创建指向 JQuery 的脚本标记并运行 Jquery 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:44:00.793

当您像正在做的那样手动插入脚本标记时，该脚本将异步加载。这意味着页面的其他部分不会等待该脚本被加载。

这与页面源中存在脚本标记不同，因为在这种情况下，脚本将同步加载，并且页面的其他部分在加载该脚本之前不会执行。

这样做的结果是，在加载、解析和运行动态插入的脚本标记之前，您的页面 javascript 的其余部分正在执行。因此，您尝试在安装 jQuery 之前使用它。

我知道解决您的问题的两种选择：

1.  将 jQuery 脚本标签的插入更改为同步加载的内容。我知道这样做的唯一方法是使用`document.write()`将新的脚本标签写入您的文档，而不是像您正在做的那样将其插入头部。添加到文档中的内容`document.write()`是同步处理的。

2.  继续像您正在做的那样动态插入您的脚本，但添加一个监视事件，以便您知道脚本何时已成功加载，并且仅在您收到 jQuery 已成功加载的通知之后运行使用 jQuery 的初始化代码。

还有一些脚本加载库（例如 require.js）将为您执行第二个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:43:08.700

听起来您的加载顺序有问题。'$ is not defined' 错误被触发，因为 jQuery 尚未加载。然后你加载 jQuery。这当然不会重新加载您的第一个脚本，因此错误仍然存​​在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T21:43:34.253

这已在此处得到解答：[检查 jQuery 是否包含在 Header (Joomla) 中](https://stackoverflow.com/questions/1331982/check-if-jquery-is-included-in-header-joomla)

```
 if (typeof jQuery == 'undefined') { 
   var head = document.getElementsByTagName("head")[0];
   script = document.createElement('script');
   script.id = 'jQuery';
   script.type = 'text/javascript';
   script.src = 'js/jquery.js';
   head.appendChild(script); 
} 
```

# jquery - 使用 PNG 的 Alpha 作为“热点”来附加点击/悬停事件，可能吗？

> ID：10506859
> 
> 赞同：5
> 
> 时间：2012-05-08T21:34:32.020
> 
> 标签：jquery, click, png, z-index, alpha

**开放讨论** *我正在寻找优化此代码，可能会创建一个对象。但更重要的是，我是新手。我想学习传递、检索、返回变量。如果有人对此有任何好的教程链接，或者想讨论，请从这里开始。:)*

众所周知，图像是矩形。我在单独的 z-index 图层上的 div 中有一些透明的 PNG。我遇到了一个问题，我试图点击其中一张图片，但它被顶部的 div 以更高的 z-index 阻止了。是否可以通过 PNG 及其父 div 单击来实现此效果？请参阅附图作为参考，它更好地说明了我的观点。

谢谢！

![图像](../Images/dbff333ec5ddb8b3c4c92243f1c8dea1.png)

简而言之，出于某种原因，我认为我可以使用 PNG 的 alpha 作为热点。哈哈@那个主意。因此，我在一个新的单独容器中创建了覆盖 div，它们充当了热点。

![img2](../Images/9639e1ae6a75ad45e3afc2c3c6abba8e.png)

如您所见，这是一个无限轮播。命中点的 z-index 以及图像的 z-index 在点击时会发生变化。至少可以说这是一个有趣的项目。我正在寻找优化它，并学习如何更有效地使用函数（即传递、检索变量、返回变量等）。

我希望我回家后会发布 javascript 来引发一些有趣的对话。如果您对如何优化有任何想法，请分享！:)

```
(function (w, d) {
$(w).load(function () { //window load
    preload();
    $('#info div a:not([rel=ad])').find('img').hide();  //hides 'learn more' buttons
}); //end window.load

$(d).ready(function () {        //document ready
    onHover();                  //activate hover
    onClick();                  //activates click function
});                             //end document.ready

var isFirst =   ["1"],      //flag to see if the first click was triggered on a hotspot or not
    pxPos   =   ["1px", "399px", "577px", "782px", "969px", "1162px", "1330px"],    //pixel position where we will animate the targets
    name    =   ["bill", "sophia", "brian", "jenn", "mom"],                         //names of talent; array used 
    thisZ   =   0;                                                                  //z-index used later to swap current target to front, and move others behind current

$('.left, .right').hide(); 

function onHover () {               //hover function  -- note: 'thisName' is a different variable in this f(n) than in onClick()
    $('.hit').hover(function () {
        var _this = this,
        thisName = $(_this).parent().attr('id'),
        img = '_img/' + thisName + '.png';
        $(_this).parent().next().find('img').attr('src', img);

    }, function() {
        var _this = this,
        thisName = $(_this).parent().attr('id'),
        img = '_img/' + thisName + '-d.png';
        if (!($(this).parent().next().hasClass('current'))) {
            $(_this).parent().next().find('img').attr('src', img);
        }
    })
}

function onClick () {
    $('a.left').bind('click', function (e) { 
        e.preventDefault();
        //left arrow click function
        if (!$('.p').is(":animated")) {                     //checks if animation is running and prevents click action
            pos = 'p5';
            var o = [name[1],name[2],name[3],name[4],name[0]];
            name = o;
            var thisName = name[3];
            updateArr(thisName, pos);
        }; //end if animated
    })

    $('a.right').bind('click', function (e) {               //right arrow click function
        e.preventDefault();
        if (!$('.p').is(":animated")) {                     //checks if animation is running and prevents click action
            pos = 'p3';
            var o = [name[4],name[0],name[1],name[2],name[3]];
            name = o;
            var thisName = name[3];
            updateArr(thisName, pos);
        } //end if animated
    })

    $('.hit').bind('click', function () {                   //click function
        if (!$('.p').is(":animated")) {                     //checks if animation is running and prevents click action
            var _this = this;
            var thisName = $(_this).parent().attr('id');    //name of person who is clicked on

            if(isFirst[0] === "1") {                        //execute actions on first click
                $('h1').hide();
                $('.left, .right').fadeIn().show();         //fade in arrows
                $('#bg2').fadeIn().show();                  //fade in dark bg

                var pos = checkPosition(_this);             //checks position of clicked person
                updateArr(thisName, pos);                   //update array

                isFirst[0] = "2";                           //sets flag to "not first click"

            }else if(isFirst[0] === "2") {                  //all other clicks but the first click

                var pos = checkPosition(_this);             //checks position of clicked person
                updateArr(thisName, pos);                   //update array

            }   //end if
        }   //end if animated
    })      //end hit check
}

function checkPosition (_this, thisName) { //find current position and return
    var pos;
    if($(_this).parent().next().hasClass('p1')) {
        pos = 'p1';
    }else if($(_this).parent().next().hasClass('p2')) {
        pos = 'p2';
    }else if($(_this).parent().next().hasClass('p3')) {
        pos = 'p3';
    }else if($(_this).parent().next().hasClass('p4')) {
        pos = 'p4';
    }else if($(_this).parent().next().hasClass('p5')) {
        pos = 'p5';
    }
    return pos;
} //end checkClickPosition()

function updateArr (thisName, pos) { //update array

    // find person index in array
    for(l=0; l <= name.length; l++) {
        if(thisName == name[l]) {
            var thisIndex = l;
        }
    } //end for

    // search for index by matching index to position in array. create new array.
    if(thisName === name[thisIndex]) {
        var o = [];

        if(thisIndex === 0) {
            o = [name[2],name[3],name[4],name[0],name[1]];
        }else if(thisIndex === 1) {
            o = [name[3],name[4],name[0],name[1],name[2]];
        }else if(thisIndex === 2) {
            o = [name[4],name[0],name[1],name[2],name[3]];
        }else if(thisIndex === 3) {
            o = [name[0],name[1],name[2],name[3],name[4]];
        }else if(thisIndex === 4) {
            o = [name[1],name[2],name[3],name[4],name[0]];
        }
        name = o; //update array with new array

        updateFlags(); //update current flag

    } //end if

    //removes previous hilight and current class
    $.each($('.p'), function () {
        if(($(this).attr('class').length > 5)) { 
            var oldImg = $(this).find('img').attr('src');
            img = '_img/' + $(this).prev().attr('id') + '-d.png';
            $(this).find('img').attr('src', img);
            $(this).removeClass('current');
        }
    });

    //creates new hilight
    $('#' + thisName).next().addClass('current');
    img = '_img/' + thisName + '.png';
    $('#' + thisName).next().find('img').attr('src', img);

    updateZIndex();         //update z-indexes
    animate(pos);           //animates array

    var current = thisName;
    return disorderText(current);

} //end updateArr()

function updateFlags() {
    //removes position flags
    $('.p').each (function() {
        $(this).removeClass('p1 p2 p3 p4 p5');
    }); //end each

    //add new flags
    for(i=0; i < name.length; i++) {
        $('#' + name[i]).next().addClass('p' + (i + 1));
    } //end for
} //end updateFlags()

function updateZIndex (thisZ) {
    //re-orders hotspot z-indexes
    $("#" + name[3]).children().each(function(thisZ) {
        thisZ++;
        $(this).css({'z-index': thisZ + 800});
    });
    $("#" + name[4]).children().each(function(thisZ) {
        thisZ++;
        thisZ = thisZ + 1;
        $(this).css({'z-index': thisZ + 700});
    });
    $("#" + name[2]).children().each(function(thisZ) {
        thisZ++;
        thisZ = thisZ + 1;
        $(this).css({'z-index': thisZ + 600});
    });
    $("#" + name[1]).children().each(function(thisZ) {
        thisZ++;
        thisZ = thisZ + 1;
        $(this).css({'z-index': thisZ + 500});
    });
    $("#" + name[0]).children().each(function(thisZ) {
        thisZ++;
        thisZ = thisZ + 1;
        $(this).css({'z-index': thisZ + 400});
    });
    $('.p1').css({'z-index': 40});
    $('.p2').css({'z-index': 50});
    $('.p3').css({'z-index': 60});
    $('.p4').css({'z-index': 70});
    $('.p5').css({'z-index': 30});

} //end updateZIndex()

function animate (pos) {

    //set up selector names for hitspot container and image container
    var selector1 = '#' + name[0] + ', #' + name[0] + 'i',
        selector2 = '#' + name[1] + ', #' + name[1] + 'i',
        selector3 = '#' + name[2] + ', #' + name[2] + 'i',
        selector4 = '#' + name[3] + ', #' + name[3] + 'i',
        selector5 = '#' + name[4] + ', #' + name[4] + 'i',
        easeType = 'easeOutCubic',
        easeOutType = 'easeOutCubic';

    if (pos === 'p1') {
        $(selector1).animate({'left': pxPos[6]}, 400, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[1]}, 600, easeType); //p5
        $(selector2).animate({'left': pxPos[6]}, 400, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[2]}, 600, easeType); //p1
        $(selector3).animate({'left': pxPos[6]}, 400, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[3]}, 600, easeType); //p2
        $(selector4).animate({'left': pxPos[4]}, 1350, easeType); //p3
        $(selector5).animate({'left': pxPos[5]}, 1350, easeType); //p4
    }else if (pos === 'p2') {
        $(selector1).animate({'left': pxPos[6]}, 400, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[1]}, 700, easeType); //p5
        $(selector2).animate({'left': pxPos[6]}, 400, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[2]}, 700, easeType); //p1
        $(selector3).animate({'left': pxPos[6]}, 400, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[3]}, 700, easeType); //p2
        $(selector4).animate({'left': pxPos[4]}, 1550, easeType); //p3
        $(selector5).animate({'left': pxPos[5]}, 1550, easeType); //p4
    }else if (pos === 'p3') {
        $(selector1).animate({'left': pxPos[6]}, 200, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[0]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[1]}, 500, easeType); //p5
        $(selector2).animate({'left': pxPos[2]}, 700, easeType); //p1
        $(selector3).animate({'left': pxPos[3]}, 700, easeType); //p2
        $(selector4).animate({'left': pxPos[4]}, 700, easeType); //p3
        $(selector5).animate({'left': pxPos[5]}, 700, easeType); //p4
    }else if (pos === 'p4') {
        $(selector1).animate({'left': pxPos[1]}, 500, easeType); //p5
        $(selector2).animate({'left': pxPos[2]}, 700, easeType); //p1
        $(selector3).animate({'left': pxPos[3]}, 700, easeType); //p2
        $(selector4).animate({'left': pxPos[4]}, 700, easeType); //p3
        $(selector5).animate({'left': pxPos[5]}, 700, easeType); //p4
    }else if (pos === 'p5') {
        $(selector1).animate({'left': pxPos[1]}, 700, easeType); //p5
        $(selector2).animate({'left': pxPos[2]}, 700, easeType); //p1
        $(selector3).animate({'left': pxPos[3]}, 700, easeType); //p2
        $(selector4).animate({'left': pxPos[4]}, 700, easeType); //p3
        $(selector5).animate({'left': pxPos[0]}, 200, easeOutType).delay(0).animate({'opacity': 0}, 0).animate({'left':pxPos[6]}, 0).animate({'opacity': 100}, 0).animate({'left': pxPos[5]}, 500, easeType); //p4
    }

} //end animate()

function disorderText (current) {

    var _this           =       ['swd', 'osa', 'nar'],
        swd             =       "Of the 15 million Americans who work evening or night shirts, 25% may have shift work disorder.",
        osa             =       "18 million Americans suffer from OSA.",
        nar             =       "Narcolepsy affects 1 in every 2,000 Americans.",
        link            =       "<a href=''><img src='_img/learn-more.png' width='125' height='31' class='learn_more' /></a>",
        brian_quote     =       '"' + "I get enough sleep during the day, but I'm still exhausted at work." + '"',
        sophia_quote    =       '"' + "Since I started working nights, I struggle to stay awake." + '"',
        jenn_quote      =       '"' + "I'm so tired on my shift that it's hard to do my job" + '"',
        bill_quote      =       '"' + "I struggle to stay awake even outside of work - I'm almost dozing off at my son's Little League games." + '"',
        mom_quote       =       '"' + "Quote to come." + '"',
        i               =       0,
        p_name          =       "",
        quote           =       "",
        info            =       "",
        disorderArr     =       ["_this", "swd", "osa", "nar", "link", "brian_quote", "sophia_quote", "jenn_quote", "bill_quote", "mom_quote", "i", "pname"];

    $('#info').children().each (function () {
        $(this).removeClass('open');
        $(this).find('.content').html('<p>');
    });

    switch(current) {
        case 'brian'    :   i = 0;
                            p_name = '<h2><b>Alex,</b> Bartender</h2>';
                            info = swd;
                            quote = brian_quote;
                            break;
        case 'sophia'   :   i = 0;
                            p_name = '<h2><b>Sophia,</b> EMT</h2>';
                            info = swd;
                            quote = sophia_quote;
                            break;
        case 'jenn'     :   i = 0;
                            p_name = '<h2><b>Susan,</b> Nurse</h2>';
                            info = swd;
                            quote = jenn_quote;
                            break;
        case 'bill'     :   i = 1;
                            p_name = '<h2><b>Martin,</b> Real Estate</h2>';
                            info = osa;
                            quote = bill_quote;
                            break;
        case 'mom'      :   i = 2;
                            p_name = '<h2><b>Susan,</b> Mom</h2>';
                            info = nar;
                            quote = mom_quote;
                            break;
    }
    $('#' + _this[i]).addClass('open');

    //handles information swap
    $('#info').children().each (function () {
        if($(this).hasClass('open')) {
            $(this).find('.header span').addClass('down');
            $(this).children().find('a img').show();            //show 'learn more' button
            $(this).find('.content').addClass('disorder');
        }else if(!$(this).hasClass('open')) {
            //$(this).children().find('a').hide();              //hide 'learn more' button
            $(this).find('.header span').removeClass('down');
            $(this).find('.content').removeClass('disorder');
        }
    }); //end show/hide 'learn more' button

    return $('#' + _this[i]).find('.content').html(p_name + '<p class="gen_quote"><i>' + quote + '</i></p>' + '<p class="gen_info"><b>' + info + '</b></p>' + '<p class="learn-more">' + '&nbsp' + link);
}

function preload(imgArray) {
    $(imgArray).each(function(){
        $('<img/>')[0].src = this;
    });
}

preload([ '_img/ad.png', '_img/arrow_sm_d.png', '_img/arrow_sm.png', '_img/arrow-left.png', '_img/arrow-right.png', '_img/bill-d.png', '_img/bill.png', '_img/border.png', '_img/brian-d.png', '_img/brian.png', '_img/corner.png', '_img/hit.gif', '_img/jenn-d.png', '_img/jenn.png', '_img/mom-d.png', '_img/mom.png', '_img/sidebar-bg.png', '_img/sophia-d.png', '_img/sophia.png', '_img/stone-bg-d.jpg', '_img/stone-bg.jpg' ]); 
```

}（窗口，文档））；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:43:40.043

尝试`pointer-events`css属性：

> CSS 属性 pointer-events 允许作者控制在什么情况下（如果有）特定图形元素可以成为鼠标事件的目标。如果未指定此属性，则 visiblePainted 值的相同特征适用于 SVG 内容。
> 
> 除了指示该元素不是鼠标事件的目标之外，值 none 还指示鼠标事件“通过”该元素并以该元素“下方”的任何内容为目标。

[https://developer.mozilla.org/en/CSS/pointer-events](https://developer.mozilla.org/en/CSS/pointer-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:40:32.507

这是一个很好的问题，我通常不是悲观主义者，但我真的不认为你会在这里找到不涉及游戏规则改变的解决方案。也就是说，我建议使用 SVG 而不是 PNG。这样，您实际上可以拥有与您的形状边界相匹配的热点。我不确定这是否适用于您的场景。查看 Raphaël — JavaScript 库。

你知道吗？您可能还可以使用 HTML5 Canvas 元素将光栅图像绘制到画布上，但您可能仍需要手动逐步遍历每个像素以在其上构建热点，使用 alpha 通道作为数据。

我希望我们有这种能力，本地人，但我真的不这么认为。我希望我给出了一些好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:54:11.393

一个有趣的方法是使用 CSS 属性[pointer-events:none](http://www.w3.org/TR/SVG11/interact.html#PointerEventsProperty)，这会禁止元素接收任何悬停和点击事件。相反，它会将其传递给下面的元素。

您可以查看这个非常[有用的讨论](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements)以获取有关此问题的更多详细信息。

此外，请注意此 CSS 属性的浏览器兼容性。您可能需要研究一下它的兼容性以及与哪些版本的明确答案。

**这是我的简短研究：**

[来自 Mozilla 开发网络的指针事件兼容性](https://developer.mozilla.org/en/CSS/pointer-events)

[“我可以使用吗？”中的指针事件兼容性](http://caniuse.com/pointer-events)

[指针事件教程和一些兼容性说明](http://robertnyman.com/2010/03/22/css-pointer-events-to-allow-clicks-on-underlying-elements/)

# bezier - 当三次贝塞尔曲线上的 P0 == P1 时，如何在 t = 0 时计算非零 dx/dt 和 dy/dt？

> ID：10506868
> 
> 赞同：3
> 
> 时间：2012-05-08T21:34:53.467
> 
> 标签：bezier, quadratic, derivative, cubic

在开始这个问题之前，我使用 P0、P1、P2 和 P3 来表示四个三次贝塞尔点，并使用“t”，因为它是参数化的。另外，我在这个站点以及谷歌中搜索过类似的问题，但找不到。如果这是一个常见问题，我深表歉意。

问题：在这两种情况下，三次贝塞尔曲线的 dx/dt 和 dy/dt 的斜率均为 0

```
1: t = 0 and P0 == P1
2: t = 1 and P2 == P3 
```

这是一个示例来说明 (1)，其中 t = 0 且 P0 == P1。

求下列三次贝塞尔曲线在 t = 0 处的切线（即 dx/dt 和 dy/dt）：

```
(100, 100) (100, 100) (150, 150) (200, 100) 
```

为了求切线，我们需要三次贝塞尔曲线的一阶导数：

```
Cubic Bezier definition
B(t) = (1-t)^3P0 + 3t(1-t)^2P1 + 3t^2(1-t)P2 + t^3P3    
First derivative of a bezier curve (if you'd like to see the steps I used to get here, let me know)
B'(t) = (-3P0 + 9P1 - 9P2 + 3P3)t^2 + (6P0 - 12P1 + 6P2)t + (-3P0 + 3P1) 
```

将 t = 0 代入一阶导数方程，我们得到

```
B'(0) = -3P0 + 3P1 
```

最后，回想一下 P0 = P1 = (100, 100)，所以 dx/dt 和 dy/dt 是：

```
dx/dt = dy/dt = -3*(100) + 3*(100) = 0 
```

这告诉我......对于这个三次贝塞尔曲线，在 t = 0 处没有切线。如果您要绘制图表并查看它，这是没有意义的。

为了得到非零斜率，我所做的是：将点 P1、P2 和 P3 视为二次贝塞尔曲线，将它们转换为等效的三次贝塞尔曲线，然后在 t = 0 处找到一阶导数。有没有我可以避免这样做吗？我发现很难接受 dx/dt 和 dy/dt 为 0 的切线。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T02:55:45.340

对于案例 1（以及对于案例 2），导数`B'(t)`at`t = 0`确实是未定义的。`t = 1`

要了解为什么会出现这种情况，我们可以在您的示例上“向后”运行 de Casteljau 算法，以将曲线的参数范围从 到`t = 0 ... 1`加倍`t = -1 ... 1`。这会产生以下三次贝塞尔曲线控制点：

```
(300,400) (0,-100) (100,200) (200,100) 
```

如果你绘制这条曲线，你会看到你的原始曲线`t = 0.5 ... 1`。您还会看到`t = 0.5`在这条延长曲线上有一个尖点，就在原始曲线的开头。这个尖点就是为什么你的曲线在起点是不可微的。

但是，曲线的*切线与导数***并不**完全相同。因此，如果您只需要切线，那么您很幸运。（导数与曲线相切，但任何其他垂直于曲线法线的向量也是如此。）

事实证明，曲线末端的切线通常等价于：

```
P1 - P0 at t = 0
P3 - P2 at t = 1 
```

但是，如果（且仅当）`P0 = P1`和/或`P2 = P3`，则退化点处的切线（即在`t = 0`if`P0 = P1`和/或`t = 1`if处`P2 = P3`）等价于：

```
P2 - P1 
```

`B'(t)`您可以通过评估as来验证情况是否如此`t->0`。

事实上，如果你将延伸曲线一分为二，`t = 0.5`然后将`P2 - P1`方程应用于每一侧，你会看到在尖端有两条*不同的切线。*曲线每一半的切线指向完全相反的方向。这是为什么此时导数未定义的另一个说明。

最后一点：您将点 P1、P2 和 P3 视为二次贝塞尔曲线的技巧也会为您提供正确的切线。但是，这**不会**为您提供正确的导数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:30:29.310

这个问题已经得到正确回答，但我想你想知道基础数学：

您正在寻找三次贝塞尔曲线的末端斜率。由于曲线（即它的 x 和 y 值）在 t 中是参数化的，因此您将分别区分 x 和 y wrt t。您到达的对可以被认为是沿曲线行进的点的瞬时“速度”。因此，在这种情况下，点的初始速度为零（或更准确地说是零向量），但（很可能）加速度（或如果失败，至少加速度的变化率）将不为零，因此点的速度将变为非零（非零向量），因此它将从这些坐标移动并追踪曲线。

但是您在视觉上看到的斜率不是参数化的，即它不依赖于时间。IOW 您正在寻找的是 dy/dx，而不是对 (dx/dt, dy/dt)，并且假设 dx/dt 和 dy/dt 在 t=0 时对于您的曲线都为零，dy/dx = (dy/dt)/(dx/dt) = 0/0，这是不确定的。要评估这一点，必须应用 L'Hopital 规则。[您可以从维基百科文章](http://en.wikipedia.org/wiki/L%27H%C3%B4pital%27s_rule)中获得该规则的详细处理，但基本上这意味着要评估这种不确定的限制，我们可以分别区分分子 f 和分母 g 以获得 f' 和 g' ，然后 limit(f/g) 是等于极限（f'/g'）。现在，如果 p0、p1、p2 和 p3 是定义三次方的点，那么：

dy / dt = ypart ( 3 * ( p1 - p0 ) + 6 * t * ( p2 - 2 * p1 + p0 ) + 3 * t ** 2 * ( p3 - 3 * p2 + 3 * p1 - p0 ) )

dx / dt = xpart ( 3 * ( p1 - p0 ) + 6 * t * ( p2 - 2 * p1 + p0 ) + 3 * t ** 2 * ( p3 - 3 * p2 + 3 * p1 - p0 ) )

-> (dy/dt) / (dx/dt) = ypart ( p1 - p0 ) / xpart ( p1 - p0 )

但是当 p0 == p1 时，这变得不确定。现在按照 L'Hopital 的规定，

极限（t->0）[（dy/dt）/（dx/dt）]=极限（t->0）[（d2y/dt2）/（d2x/dt2）]

现在：

d2y/dt2 = ypart ( 6 * ( p2 - 2 * p1 + p0 ) + 6 * t * ( p3 - 3 * p2 + 3 * p1 - p0 ) )

d2x/dt2 = xpart ( 6 * ( p2 - 2 * p1 + p0 ) + 6 * t * ( p3 - 3 * p2 + 3 * p1 - p0 ) )

在 t = 0 时，(d2y/dt2) / (d2x/dt2) = ypart ( p2 - 2 * p1 + p0 ) / xpart ( p2 - 2 * p1 + p0 )

但由于 p1 == p0，这变成：ypart (p2 - p0) / xpart (p2 - p0)，这正是 Naaff 告诉你的结果。请注意，即使 p2 == p0（一条*真正*退化的曲线，尤其是三次曲线，在这种情况下它只是一条直线！），那么即使这也是不确定的，您可以再次区分分子和分母以获得：

限制（dy/dx）=限制（t->0）[（d3y/dt3）/（d3x/dt3）]=ypart（p3-p0）/xpart（p3-p0）

我希望它对你有用......（顺便说一句，它似乎不像在 math.stackexchange 上那样在这里使用类似 TeX 的符号，否则我会提供数学标记。）

# ruby-on-rails - Ruby and Rails and Haml - 将 ruby 代码放入 haml 页面

> ID：10506872
> 
> 赞同：0
> 
> 时间：2012-05-08T21:35:25.850
> 
> 标签：ruby-on-rails, ruby, haml

我试图弄清楚如何将 Ruby 代码放入 HAML 文件中，以便确定请求通过哪个控制器，并设置一些适当的设置。

我将此代码添加到文件顶部：

```
ruby:
  active_is = "#{request[:controller]}/#{action_name}" 
```

但它因错误而崩溃：

```
Illegal nesting: nesting within plain text is illegal. 
```

这是否意味着我的语法已关闭？我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:40:08.783

[语言过滤器](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#filters)前面是冒号，而不是相反：

```
:ruby
  active_is = "#{request[:controller]}/#{action_name}" 
```

但是，通常情况下，它更容易[使用`-`](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#running_ruby_)：

```
- active_is = "#{request[:controller]}/#{action_name}" 
```

# java - 有人能解释一下Java泛型中原始类型的使用吗？

> ID：10506876
> 
> 赞同：2
> 
> 时间：2012-05-08T21:35:57.067
> 
> 标签：java, generics, primitive, primitive-types

我在我的 Java 代码中使用了以下语句，我惊讶地发现它实际上可以编译：

```
ResponseEntity<byte[]> responseEntity = restTemplate.getForEntity(url.toString(), byte[].class, params); 
```

文档中此方法的签名是：

```
ResponseEntity<T> getForEntity(String url, Class<T> responseType, Map<String, ?> urlVariables) 
```

我的印象是你不能在 Java 的泛型中使用原语。如果是这样，这是如何工作的？这本质上是在幕后发生的其他事情的语法糖吗？我的（很可能是错误的）猜测是编译器转换`byte[]`为`Array`并以某种方式使用它。我想知道是否有人可以向我解释这是如何以及为什么起作用的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T21:40:48.677

我猜，这是因为数组实际上是 Java 中的对象（引用类型），它们是`Object`. 因此，泛型适用于它们，就像适用于任何 Java 引用类型一样。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-08T21:43:58.090

这是关于实际目的的“包装器”。我的意思是，尽管您使用原始类型（int 或 byte），但您创建了一个对象（您知道，*新的*保留字表示您正在实例化一个对象）。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-05-08T21:44:19.700

我假设您使用的是 JDK 5 或更高版本。如果是这样，那么 Autoboxing 的作用就是在内部将原始 byte[] 转换为 Byte[]。

# mongodb - 如何在 MongoDB 的数组元素中切换布尔字段？

> ID：10506878
> 
> 赞同：6
> 
> 时间：2012-05-08T21:36:03.057
> 
> 标签：mongodb, positional-operator

考虑这些数据

```
{ 
    "_id" : ..., 
    "array" : [
        { "name" : "value1","flag" : true } ,
        { "name" : "value2","flag" : false }
  ]
} 
```

我想切换第二个数组元素（从假到真）

我知道我可以使用非常有用的 $ 位置运算符更新特定元素，如下所示：

```
db.myCollection.update(
    {'array.name':'value2'},
    {
        $set: {
            'array.$.flag':true
        }
    },false,true); 
```

但是有没有办法将 $ 位置运算符也用于值设置？

例如像这样？

```
db.myCollection.update(
    {'array.name':'value2'},
    {
        $set: {
            'array.$.flag':'!array.$.flag' //<--
        }
    },false,true); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T21:40:36.470

不，目前不可能。MongoDB 不允许在依赖于文档字段的更新中使用表达式。您必须在两个单独的操作中获取和设置。

但是，有一个技巧可以在一个操作中实现（因此是原子的）。而不是一个布尔值，有一个整数。然后偶数值将表示`false`，奇数值 - `true`。

```
// get documents with false flag
db.collection.find({flag: {$mod: [2, 0]}})

// get documents with true flag
db.collection.find({flag: {$mod: [2, 1]}})

// toggle flag
db.collection.update(query, {$inc: {flag: 1}}); 
```

# c - C 函数原型

> ID：10506879
> 
> 赞同：1
> 
> 时间：2012-05-08T21:36:12.463
> 
> 标签：c

在这里学习C，我对如何使用函数原型感到很困惑。

我主要是在将函数调用到 main 中时遇到问题。我确定我这里有一些东西搞砸了，因为这一切都是打印内存中的任何内容。

感谢您的帮助。

```
#include <stdio.h>

double source_volt(double vs);

int main()
{
    double source_volt(double vs);
    double vs;
    printf("%lf", vs);
    return 0;
}

double source_volt(double vs)
{

    int valid = 0;
    do
    {
        printf("Enter source voltage Vs in volts: ");
        scanf("%lf", &vs);

        if (vs < 0 || vs > 100)
        {
            valid = 0;
            printf("Please enter a number between 0 and 100.\n");
        }
        else
            valid = 1;
    }while(!valid);
    return vs;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:43:01.353

这对您不起作用：

```
int main()
{
    double source_volt(double vs); //You already declared the function, 
                                   //you dont need the doubles
    double vs;
    printf("%lf", vs);
    return 0;
} 
```

反而：

```
int main()
{
    double vs;
    vs = double source_volt(vs); //The double keyword is gone
    printf("%lf", vs);
    return 0;
} 
```

但实际上，您根本不需要在源电压中进行论证。

*您可以将该*函数重写为：

```
double source_volt(void)
{
    double vs;
    int valid = 0;
    do
    {
        printf("Enter source voltage Vs in volts: ");
        scanf("%lf", &vs);

        if (vs < 0 || vs > 100)
        {
            valid = 0;
            printf("Please enter a number between 0 and 100.\n");
        }
        else
            valid = 1;
    }while(!valid);
    return vs;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:43:29.730

main 内的行`double source_volt(double vs);`实际上重新声明了该函数。然后`vs`在 main 中使用而不初始化它。

定义的函数`source_volt`将像这样调用：

```
double vs;
vs = source_volt( vs ); 
```

但是，我还想指出，通过将 double 传递给 tho 函数，您并没有获得任何好处。您可以在其中声明一个局部变量`source_volt`并返回它以获得相同的结果。

# python - Python TUI 库

> ID：10506881
> 
> 赞同：9
> 
> 时间：2012-05-08T21:36:21.140
> 
> 标签：python, curses, tui, urwid

我正在Linux中使用带有TUI的python（不是GUI，这只是la脚）在Linux中编写一个小型数独游戏/求解器，只是为了好玩。我的问题是，哪个库更好（我的意思是更容易处理，更好的支持，更直接和易于理解），选择是[诅咒](http://docs.python.org/library/curses.html)或[urwid](http://excess.org/urwid/)或者如果有人有更好的建议，为什么？我有一些 Tkinter 和 wxPython 经验。

任何帮助或信息将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T14:11:27.380

您可能想查看[Unicurses](https://github.com/unicurses/unicurses#installing-unicurses)，它在 UNIX 系统中包装了 python 核心 curses 模块，并在基于 Windows 的机器上包装了免费的 pdcurses 库。

该库旨在模拟原始 ncurses 库的语法和样式，因此，如果您对使用 curses 样式编程学习 TUI 设计感兴趣，请查看它。

从我读过的少量文档来看，[Urwid是一个非常有趣的库，它使用事件循环（](http://urwid.org/)[反应器模式](http://en.wikipedia.org/wiki/Reactor_pattern)）作为应用程序设计的基础，很像 tkinter 或 Twisted。此外，urwid 有一个专门设计用于 Twisted 的事件循环类，因此如果您的目标是创建用于网络的 TUI，那么它是一个不错的选择。Twisted 也使用反应器模式，所以如果你想学习*这种*风格，我会推荐它。

最后，如果您确实使用 ncurses 风格的库，请查看[Dan Gookin 关于 ncurses 的书](https://rads.stackoverflow.com/amzn/click/com/0470107596)。一个非常好的资源，我所知道的唯一一个今天在印刷。

还有其他选项，例如[newt](http://hurley.wordpress.com/2008/01/25/create-simple-ansi-based-ui-with-python-newt/)、[pygcurses](http://inventwithpython.com/pygcurse/)等，但这应该可以帮助您入门。祝你好运，今天的 TUI 编程是一种难以攻破的技术迷恋，但它是有益的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-14T22:39:53.313

虽然以上对于 Linux 来说是一个完全合理的解决方案，但 OP 要求其他建议和理由。

谁愿意在像 Python 这样的现代 OO 语言中使用像 curses 这样的低级 API？更不用说如果你被困在 Windows 中（OP 不是，但对很多人来说是个问题）......必须有更好的方法。

为了尝试解决这个问题，我整理了一个简单的跨平台类（是的 - Windows 包含在内，而不会退回到 PDcurses）来完成大多数人想要从他们的终端/控制台完成的所有事情。如果您使用的是 Linux，这是一种更人性化的 curses 编程方式。如果您在 Windows 上，则相同的类可以正常工作，没有外部二进制依赖项。[您可以在asciimatics](https://github.com/peterbrittain/asciimatics)中找到 Screen 类。

此外，我还创建了大量更高级别的对象来创建动画和 TUI。例如，这是一个使用 TUI 小部件的示例记录：

[![文本 UI 小部件](../Images/beb51354844cbac4d4f50b540df0ac2d.png)](https://asciinema.org/a/45946)

如果您需要额外的功能，请告诉我，我会看看我能做些什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T22:26:09.693

如果您的游戏将在控制台中运行，那么只需选择[curses](http://docs.python.org/library/curses.html)。

如果您的游戏将作为 GUI 应用程序运行，那么只需选择[PySide](http://www.pyside.org)。

# c# - 在 NAudio 中保存 WMA

> ID：10506885
> 
> 赞同：0
> 
> 时间：2012-05-08T21:36:24.730
> 
> 标签：c#, wav, naudio, wma

我正在尝试使用 NAudio 将 WAV 文件转换为 WMA 文件。我已经设法让它部分工作，但声音效果的最后几秒钟被切断了。

```
WaveFileReader wr = new WaveFileReader(@"C:\mywav.wav");
WmaWriter ww = new WmaWriter(new FileStream(@"C:\mywma.wma",FileMode.Create),new WaveFormat(44100,2),profile);

byte[] buff = null;

int read = 0;

buff=new byte[wr.Length];
read = wr.Read(buff,0,buff.Length);
while ((read > 0))
{
  ww.Write(buff,0,read);
  read = wr.Read(buff,0,buff.Length);
} 
```

这只是部分写入 WMA 文件，而不是读入的整个 WAV 文件。或者，有没有一种方法可以转换为 WMA 而无需 C# 中的 NAudio？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T22:27:40.837

正如评论中所讨论的，`using`对编写器（实际上是读取器）使用一个块，以便正确刷新和关闭流。

# java - Java编程给出错误“找不到符号”

> ID：10506886
> 
> 赞同：-1
> 
> 时间：2012-05-08T21:36:25.307
> 
> 标签：java, swing, grid-layout

这个项目是 jpanel 中的一个 java 测验。尝试编译程序时出现此错误。我的 gidlayout 似乎有问题，但我在另一个程序中使用它并且它运行良好。

错误：

```
QuizGUI.java:53: cannot find symbol
symbol  : constructor GridLayout(int,int,int,int,int)
location: class java.awt.GridLayout
JPanel questionPanel = new JPanel(new GridLayout(0, 1, 0, 10, 0));
^
QuizGUI.java:89: cannot find symbol
symbol  : method createEmptyBorder(int,int,int,int,int)
location: class javax.swing.BorderFactory
mainPanel.setBorder(BorderFactory.createEmptyBorder(ebGap, ebGap, ebGap, ebGap, ebGap)); 
```

代码：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import javax.swing.*;
import javax.swing.BorderFactory;
import javax.swing.ButtonGroup;
import javax.swing.ButtonModel;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.SwingConstants;

public class QuizGUI{

private JPanel mainPanel = new JPanel();
private Question[] questions =
{
new Question("What percent is the earth made up of water?","70", new String[]
{
"80", "85", "50", "69"
}),
new Question("How many months in a year?", "12", new String[]
{
"1", "Several", "100", "Heck if I know?"
}),
new Question("Who was buried in Grant's Tomb?", "Grant", new String[]
{
"Washington", "Jefferson", "Lincoln", "Mickey Mouse"
}),
new Question("What's the air-speed velocity of a fully ladden swallow",
"African or European?", new String[]
{
"100 mi/hr", "25 mi/hr", "50 mi/hr", "-10 mi/hr"
}),
new Question("What color was Washington's white horse?", "White",
new String[]
{
"Blue", "Brown", "Chartreuse", "Mauve"
})
};
private QuestionGUI[] questionGuis = new QuestionGUI[questions.length];

public QuizGUI()
{
JPanel questionPanel = new JPanel(new GridLayout(0, 1, 0, 10, 0));
for (int i = 0; i < questionGuis.length; i++)
{
questionGuis[i] = new QuestionGUI(questions[i]);
JComponent comp = questionGuis[i].getComponent();
comp.setBorder(BorderFactory.createEtchedBorder());
questionPanel.add(comp);
}

JButton checkAnswersBtn = new JButton("CheckAnswers");
checkAnswersBtn.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e)
{
int score = 0;
for (QuestionGUI quest : questionGuis)
{
if (quest.isSelectionCorrect())
{
score++;
}
else
{
System.out.println("For the question: \"" + quest.getQuestion().getQuestion() + "\",");
System.out.println("\"" + quest.getSelectedString() + "\" is the wrong answer");
System.out.println("The correct answer is: \"" + quest.getQuestion().getCorrectAnswer() + "\"");
}
}
System.out.println("Score: " + score);
}
});
JPanel btnPanel = new JPanel();
btnPanel.add(checkAnswersBtn);

int ebGap = 10;
mainPanel.setBorder(BorderFactory.createEmptyBorder(ebGap, ebGap, ebGap, ebGap, ebGap));
mainPanel.setLayout(new BorderLayout());
mainPanel.add(questionPanel, BorderLayout.CENTER);
mainPanel.add(btnPanel, BorderLayout.SOUTH);
}

public JComponent getComponent()
{
return mainPanel;
}

private static void createAndShowUI()
{
JFrame frame = new JFrame("Quiz");
frame.getContentPane().add(new QuizGUI().getComponent());
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.pack();
frame.setLocationRelativeTo(null);
frame.setVisible(true);
}

public static void main(String[] args)
{
java.awt.EventQueue.invokeLater(new Runnable()
{
public void run()
{
createAndShowUI();
}
});
}
}

class QuestionGUI
{
private JPanel mainPanel = new JPanel();
private Question question;
private ButtonGroup buttonGrp = new ButtonGroup();

public QuestionGUI(Question question)
{
this.question = question;

JPanel radioPanel = new JPanel(new GridLayout(1, 0, 10, 0));
for (String str : question.getAnswers())
{
JRadioButton rButton = new JRadioButton(str);
rButton.setActionCommand(str);
radioPanel.add(rButton);
buttonGrp.add(rButton);
}
mainPanel.setLayout(new BorderLayout(10, 10));
mainPanel.add(new JLabel(question.getQuestion(), SwingConstants.LEFT), 
BorderLayout.NORTH);
mainPanel.add(radioPanel, BorderLayout.CENTER);
}

public Question getQuestion()
{
return question;
}

public String getSelectedString()
{
ButtonModel model = buttonGrp.getSelection();
if (model != null)
{
return model.getActionCommand();
}
else
return null;
}

public boolean isSelectionCorrect()
{
ButtonModel model = buttonGrp.getSelection();
if (model != null)
{
return question.isCorrect(model.getActionCommand());
}
return false;
}

public JComponent getComponent()
{
return mainPanel;
}
}

class Question
{
private String question;
private String answer;
private List<String> answers = new ArrayList<String>();

public Question(String q, String answer, String[] badAnswers)
{
question = q;
this.answer = answer;
for (String string : badAnswers)
{
answers.add(string);
}
answers.add(answer);
Collections.shuffle(answers);
}

public String getQuestion()
{
return question;
}

public String[] getAnswers()
{
return answers.toArray(new String[0]);
}

public String getCorrectAnswer()
{
return answer;
}

public boolean isCorrect(String selection)
{
return answer.equals(selection);
}
} 
```

我很困惑为什么会这样。我几乎为另一个项目做了同样的事情并且它工作并且没有网格布局被破坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:40:00.780

您在代码中将五个参数传递给 createEmptyBorder：

```
mainPanel.setBorder(BorderFactory.createEmptyBorder(ebGap, ebGap, ebGap, ebGap, ebGap)); 
```

但实际上需要四个：[http ://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/BorderFactory.html#createEmptyBorder%28int,%20int,%20int,%20int%29](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/BorderFactory.html#createEmptyBorder%28int,%20int,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:40:37.500

1）`new GridLayout(0, 1, 0, 10, 0)` [GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)只有[四个参数](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html#GridLayout%28int,%20int,%20int,%20int%29)

2) `EmptyBorder(int,int,int,int,int)` [EmptyBorder](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)只有[四个参数](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T21:40:58.140

您将五个 int 值传递给 GridLayout 构造函数。我检查了 API，没有构造函数需要五个值 - 有一个需要四个值。

[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

# java - 是否可以使用 Hibernate 工具在没有 EJB 的情况下使用 Hibernate Annotations 生成 POJO？

> ID：10506888
> 
> 赞同：0
> 
> 时间：2012-05-08T21:36:37.007
> 
> 标签：java, hibernate, hibernate-tools

我在 Eclipse Indigo 下使用休眠工具。Hibernate 控制台选择了 Annotations 选项，hibernate 版本为 4.0。

只有当我选择 Generate EJB3 Annotations 选项时，hibernate 工具向导才会生成注释。这引入了对 EJB 的依赖，我不想要它。

如何说服 Hibernate 工具生成使用普通（非 jpa）hibernate 注释的 POJO（通过逆向工程）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:28:23.710

那么您可能想将“Hibernate 3.x”指定为版本，而不是 4.0。如果我没记错的话，Hibernate 4.0 提供了仅限 JPA 的注解，以及一些额外的“扩展”注解。

现在，我认为真正的问题是：为什么要摆脱 JPA？请注意，EJB3 ！= JPA。事实上，JPA 是曾经被称为 EJB 实体 Bean 的替代品。并且添加 JPA 依赖项*不会*在您的项目中添加 EJB 依赖项。

# mysql - 从查询中获取并回显 mysql 数组

> ID：10506889
> 
> 赞同：0
> 
> 时间：2012-05-08T21:36:37.723
> 
> 标签：mysql, database, arrays

我正在尝试从我的数据库中获取一组 id，然后能够回显每个 id。像这样的东西：

```
$query = mysql_query("SELECT id FROM TableName WHERE field = 'test' ORDER BY id DESC") or die(mysql_error());

$row = mysql_fetch_array($query);

echo "array: ".$row[1]." <br>";
echo "array: ".$row[2]." <br>";
echo "array: ".$row[3]." <br>"; 
```

这似乎不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:40:49.410

问题是 mysql_fetch_array 获取一个基于 0 的数组。您正在从数据库中获取单个字段，该字段将存储在结果数组中的 $row[0] 中。由于您只回显行 [1] 到行 [3]，因此您永远不会看到结果：

```
$row = mysql_fetch_array($query);
print_r($row); 
```

应该给你：

```
Array (
    0 => 'id_field_value_here'
) 
```

和

```
echo $row[0] 
```

也会输出

```
id_field_value_here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:39:16.663

`mysql_fetch_array`获取 1 行。你需要做类似的事情

```
...
$res = array();
while ($row = mysql_fetch_array($query))
{
  $res[] = $row;
}
//now $res[0] - 1st row, $res[1] - 2nd, etc 
```

# c++ - 推送 C++ 预处理器

> ID：10506893
> 
> 赞同：1
> 
> 时间：2012-05-08T21:36:47.940
> 
> 标签：c++, gcc, c-preprocessor

我正在尝试以一种可以极大地简化我的开发进度的方式使用 C++ 中的预处理器！我有一个非常简单的问题，我在使用常规 C++ 类的同时使用 C API 库。这个库基于回调/事件，我只能提供函数（而不是方法）。因此，我有一个重复的模式，为每个事件声明一个静态和非静态函数：

```
public: // Here is the static method which is required
    static inline Vector StaticEventClickLeft(Vector vec) { return globalClass->EventClickLeft(vec); }
private: // And here is the method (i.e non-static)
    Vector EventClickLeft(Vector vec); 
```

我想创建一个宏，在一行中定义这两个。它会使我的标题的大小至少减少十倍！这是我最接近的尝试（但还远远不够）：

```
#define DECL_EVENT(func, ret, ...) \
    public: static inline ret S ## Event ## func(__VA_ARGS__) { return globalClass->Event ## func(__VA_ARGS__); } \
    private: ret Event ## func(__VA_ARGS__); 
```

如果我像这样使用这个宏`DECL_EVENT(ClickLeft, Vector, Vector vec)`。这将是输出：

```
public: static inline Vector SEventClickLeft(Vector vec) { return globalClass->EventClickLeft(Vector vec); }
private: Vector EventClickLeft(Vector vec); 
```

你可以清楚地看到问题所在。静态函数调用该方法并提供参数的类型以及名称。由于指定了类型，因此会导致编译器错误；`include/plugin.h:95:2: error: expected primary-expression before ‘TOKEN’ token` .

那么我该如何解决呢？必须有一些解决方案，我相信一些宏观专家可以提供一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:54:12.487

首先，在您的类型周围放置括号，以便预处理器可以解析它。所以你会像这样调用 DECL_EVENT：

```
DECL_EVENT(ClickLeft, Vector, (Vector) vec) 
```

以下是一些宏，它们将检索类型并剥离类型（您需要命名它们，我离开命名空间只是为了演示）：

```
#define EAT(...)
#define REM(...) __VA_ARGS__
#define STRIP(x) EAT x
#define PAIR(x) REM x 
```

这些宏是这样工作的。当您编写`STRIP((Vector) vec)`时，它将扩展为`vec`. 当你写`PAIR((Vector) vec)`它时，它会扩展为`Vector vec`. 接下来，您要做的是将这些宏应用于传入的每个参数，所以这里有一个简单的`APPLY`宏，可以让您对最多 8 个参数执行此操作：

```
/* This counts the number of args */
#define NARGS_SEQ(_1,_2,_3,_4,_5,_6,_7,_8,N,...) N
#define NARGS(...) NARGS_SEQ(__VA_ARGS__, 8, 7, 6, 5, 4, 3, 2, 1)

/* This will let macros expand before concating them */
#define PRIMITIVE_CAT(x, y) x ## y
#define CAT(x, y) PRIMITIVE_CAT(x, y)

/* This will call a macro on each argument passed in */
#define APPLY(macro, ...) CAT(APPLY_, NARGS(__VA_ARGS__))(macro, __VA_ARGS__)
#define APPLY_1(m, x1) m(x1)
#define APPLY_2(m, x1, x2) m(x1), m(x2)
#define APPLY_3(m, x1, x2, x3) m(x1), m(x2), m(x3)
#define APPLY_4(m, x1, x2, x3, x4) m(x1), m(x2), m(x3), m(x4)
#define APPLY_5(m, x1, x2, x3, x4, x5) m(x1), m(x2), m(x3), m(x4), m(x5)
#define APPLY_6(m, x1, x2, x3, x4, x5, x6) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6)
#define APPLY_7(m, x1, x2, x3, x4, x5, x6, x7) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7)
#define APPLY_8(m, x1, x2, x3, x4, x5, x6, x7, x8) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8) 
```

现在介绍如何编写`DECL_EVENT`宏：

```
#define DECL_EVENT(func, ret, ...) \
public: static inline ret S ## Event ## func(APPLY(PAIR, __VA_ARGS__)) { return globalClass->Event ## func(APPLY(STRIP, __VA_ARGS__)); } \
private: ret Event ## func(APPLY(PAIR, __VA_ARGS__)); 
```

注意：这可能在 MSVC 中不起作用，因为它们有一个错误的预处理器（尽管有解决方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:37:57.287

试图在 C++ 中滥用预处理器通常是个坏主意。

有什么理由不能`boost::signal`满足您的需求吗？

作为奖励，您可以使用`std::function`（或者`boost::function`如果您被困在 C++03 领域）将您的成员函数绑定到对象实例并摆脱全局。

# ios - iOS - IB 视图模式

> ID：10506894
> 
> 赞同：5
> 
> 时间：2012-05-08T21:36:51.337
> 
> 标签：ios, xcode, iboutlet

我只是好奇，但 IB 视图模式甚至用于什么？

![在此处输入图像描述](../Images/9261dfa1ee7e0f1283f3afd60b7e0467.png)

我改了很多次都没效果？有人可以解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:40:49.387

它改变了视图填充图像的方式。

尝试设置图像并更改值以查看差异。

# vb6 - 如何将 vb 文本框设置为“缓冲区”的内容？

> ID：10506895
> 
> 赞同：2
> 
> 时间：2012-05-08T21:36:57.107
> 
> 标签：vb6

我是 VB 的新手。我正在测试一些旧的 VB 代码。代码如下 -

```
 Public GlobalCommArea() As Byte
  ...
  ...
  'GlobalCommArea is set to some value 
```

现在，我想查看这个 GlobalCommArea 变量的内容。（顺便问一下，它是一个变量吗？）

所以我尝试了

```
 outputBox.Text = GlobalCommArea 
```

但是 outputBox （这是一个文本框）没有显示任何内容。我应该怎么做才能将 GlobalCommArea 的内容打印到文本框中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:14:51.617

Byte 数据类型实际上是一个字节数组。您需要将其转换为字符串。使用它来转换它：

```
outputBox.Text = StrConv(GlobalCommArea, vbUnicode) 
```

根据 GlobalCommArea 中存储的内容，您可能需要更改 vbUnicode 参数。

希望这可以帮助

# node.js - 如何在 Meteor 客户端中使用 npm 模块？

> ID：10506899
> 
> 赞同：7
> 
> 时间：2012-05-08T21:37:17.920
> 
> 标签：node.js, meteor

我对如何在 Meteor 客户端代码中使用 npm 模块感到非常困惑。

我知道像 fs 这样的模块只能在服务器端工作，但在这种情况下，我想使用这样的简单文本模块来显示漂亮的日期：

[https://github.com/ecto/node-timeago](https://github.com/ecto/node-timeago)

我已经尝试在 /public/node_modules 下安装该模块，并且按照 SO 的这些说明，它在服务器端运行良好：（ [我们如何或可以通过 npm 与 Meteor 一起使用节点模块？](https://stackoverflow.com/questions/10165978/how-do-we-or-can-we-use-node-modules-via-npm-with-meteor)）

```
Meteor.startup(function () {
  var require = __meteor_bootstrap__.require
  var timeago = require('timeago')
  console.log(timeago(new Date()))
  ... 
```

但是它在客户端代码中不起作用：

```
if (Meteor.is_client) {
  var require = __meteor_bootstrap__.require
  var timeago = require('timeago')
  console.log(timeago(new Date()))
  ...

Uncaught ReferenceError: __meteor_bootstrap__ is not defined" 
```

在这种情况下，服务器端对我来说有点没用，因为我正试图在客户端上呈现文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T21:58:25.600

我不相信您需要使用服务器端版本。仅将 npm 内容用于服务器端，顺便说一句，也将其放入您的 /public/ 中。谁知道也许你可以在 /public/ 中调用它，试试看。或者试试这个。

使用类似 jquery timeago.js 的东西

把它放在 /client/ 或类似 /client/js 的地方

创建一个 /client/helpers.js 或类似的东西。

使用车把助手。

```
Handlebars.registerHelper('date', function(date) {
  if(date) {
    dateObj = new Date(date);
    return $.timeago(dateObj);
  }
  return 'a long long time ago in a galaxy far away';
}); 
```

从模板调用“日期”车把辅助函数的示例。

```
{{ date created }} 
```

其中 date 是 handebars 助手， created 是来自流星/mongo 集合的日期。

请参阅 github Britto 项目。这就是我得到这个代码片段并在我编写的聊天室应用程序中使用它的地方。工作正常。

还有其他几个漂浮在那里。访问 madewith.meteor.com 并仔细阅读一些项目的来源。

# python - TypeError：只能将元组（不是“列表”）连接到元组”

> ID：10506904
> 
> 赞同：13
> 
> 时间：2012-05-08T21:37:31.703
> 
> 标签：python

我编写了一个简单的脚本来根据每用户平均收入 (ARPU)、利润和客户保持客户的年数 (ltvYears) 来模拟客户生命周期价值 (LTV)。下面是我的脚本。它在“ltvYears = ltvYears + [ltv_loop]”这一行引发错误。错误消息是“TypeError: can only concatenate tuple (not "list") to tuple”。有人可以告诉我是什么原因造成的吗？我怀疑问题可能源于“ltvYears = ('f',[])”，我在其中添加了类型代码以消除另一个错误（将 float 乘以 int）。

我是 Python 新手，所以这段代码很可能是初学者的错误。

```
lowYears = 0
highYears = 20
modeYears = 3
ARPU = 65.0*12.0
MARGIN = .30
ltvYears = ('f',[])
ltv = []

def ltv(arpu, years, margin):
    return arpu * years * margin

N = 10000    
for n in range(N):
    #estimate LTV
    ltv_loop = random.triangular(lowYears, highYears, modeYears) 
    ltvYears = ltvYears + [ltv_loop]
    ltv = ltv + [ltv(ARPU, ltvYears, MARGIN)]

show = 0

if (show==1):
    #plot ltv histogram
    plt.hist(ltv,bins=10)
    plt.title("LTV Probability Density")
    plt.xlabel("")
    plt.ylabel("$")
    plt.show() 
```

编辑 - 这是我的变量的屏幕截图。 ![在此处输入图像描述](../Images/1ded5264b8913d16f38896faa4577f9d.png)

EDIT2 ---我在下面的帮助下找到了解决方案。总共有三个问题：

1.  我错误地将相同的名称分配给变量和函数（+1 @autopopulated 指出这一点）
2.  这条线是多余的“ltvYears = ltvYears + [ltv_loop]”
3.  此行应该使用“ltv_loop”作为第二个参数“ltv = ltv + [calculateltv(ARPU, ltv_loop, MARGIN)]”

+1 @DonCallisto 和 @RikPoggi 对项目 2 和 3 的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T21:42:07.407

`ltvYears`是一个元组，它被定义为

```
ltvYears = ('f',[]) 
```

所以当谈到这一行时：

```
ltvYears = ltvYears + [ltv_loop] 
```

Python不知道该怎么做，因为您的错误清楚地表明：

> “TypeError：只能将元组（不是“列表”）连接到元组”

不清楚该行的行为应该是什么，因此很难提出解决方案。

也许您只需要将 ltvYears 定义为 a`list`并调用该`.append`方法。

* * *

## 编辑

OP[在这里说：](https://stackoverflow.com/questions/10506904/typeerror-can-only-concatenate-tuple-not-list-to-tuple/#comment13584738_10506904)

> `ltvYears = ('f',[])`我添加了`'f'`以指示该数组将包含浮点数。在我这样做之前，我遇到了一个关于将浮点数和整数相乘的错误。

你不需要这样做。Python 不是 C。

做就是了：

```
ltvYears = [] 
```

然后：

```
ltvYears.append(ltv_loop) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T21:48:47.220

如果 ltvYears 是一个元组，那么你可以像这样连接：

```
ltvYears += (ltv_loop,) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T21:40:00.640

从你的代码

```
ltvYears = ltvYears + [ltv_loop] 
```

`ltvYears`是一个元组，这就是你得到那个错误的原因。

那是因为您不能将 a 附加`list`到元组。也许您必须更改`ltvYears`使其成为列表的类型

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T21:42:40.930

（这与您要询问的问题不同，请参阅@Rik 的回答，但您也遇到了这个问题）

您已经定义了一个与变量同名的函数：

```
...
ltv = []

def ltv(arpu, years, margin):
    return arpu * years * margin
... 
```

这将用函数对象替换您的列表变量，当然您不能附加到该函数对象，因此该行将失败：`ltv = ltv + [ltv(ARPU, ltvYears, MARGIN)]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T21:41:40.937

它实际上就像错误消息所述的那样简单：不允许连接列表和元组。

`ltvYears`是一个元组。`[ltv_loop]`是一个列表。

# mongodb - 添加第二个嵌套文档

> ID：10506907
> 
> 赞同：0
> 
> 时间：2012-05-08T21:37:39.057
> 
> 标签：mongodb, nosql

我有一个具有这种结构的文档

```
{
    name : "...",
    ...,
    ...,
    ...,
    hours : {
        standard : {
            ...
        }
} 
```

我需要补充：

```
{
    holiday : {
        ...
    }
} 
```

在小时文件内，最终得到：

```
{
    name : "...",
    ...,
    ...,
    ...,
    hours : {
        standard : {
            ...
        },
        holiday : {
            ...            
        }
    }
} 
```

我试着跑步

```
{
    $set : {
        hours : {
            holiday : {
                ...            
            }
        }
    }
} 
```

但这只是在几个小时内用假期取代了我的标准。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:41:38.030

试试这个：

```
db.collection.update(query, {$set: {'hours.holiday': {...}}}); 
```

# sql - 移动模拟器连接失败（合并复制）

> ID：10506916
> 
> 赞同：0
> 
> 时间：2012-05-08T21:38:23.863
> 
> 标签：sql, sql-server-ce

我正在尝试复制 SQL CE 3.5 SP1 数据库，但在同步时，我抛出以下错误：

“使用提供的连接信息无法连接到 SQL Server。SQL Server 不存在，访问被拒绝，因为 IIS 用户不是运行 SQL Server 的计算机上的有效用户，或者密码不正确。”

我正在使用 Windows Mobile 6 Professional 模拟器，而我尝试连接的机器是运行 Windows XP Professional SP3 的 Windows 虚拟机。我已经为模拟器配置了网络适配器设置（我可以访问网页），验证了用户权限，仔细检查了 IIS 设置，并三次检查了我的连接字符串：

```
 SqlCeReplication rpl = null;

        try
        {
            // Creates the replication object.
            rpl = new SqlCeReplication();
            // Establishes the connection string.
            rpl.SubscriberConnectionString = @"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Password = *; Temp File Max Size = 512; 
            Max Database Size = 512; Max Buffer Size = 512; Flush Interval = 20; Autoshrink Threshold = 10; Default Lock Escalation = 100";
            // Sets the Publisher properties.
            rpl.PublisherSecurityMode = SecurityType.NTAuthentication;
            rpl.Publisher = "PUBLISHER";
            rpl.PublisherLogin = "INDICOPUBLIC\\subuser";
            rpl.PublisherPassword = "*";
            rpl.PublisherDatabase = "PUBLISHER";
            rpl.Publication = "ParkSurveyPublication";
            // Sets the internet replication properties.
            rpl.InternetUrl = "http://replication/sqlce/sqlcesa35.dll";
            rpl.InternetLogin = "INDICOPUBLIC\\subuser";
            rpl.InternetPassword = "*";
            rpl.ConnectionManager = true;
            // Sets the Distributor properties.
            rpl.Distributor = "PUBLISHER";
            rpl.DistributorLogin = "INDICOPUBLIC\\subuser";
            rpl.DistributorPassword = "psrAdmin";
            rpl.DistributorSecurityMode = SecurityType.NTAuthentication;
            // Sets the timeout properties.
            rpl.ConnectionRetryTimeout = 120;
            rpl.ConnectTimeout = 6000;
            rpl.ReceiveTimeout = 6000;
            rpl.SendTimeout = 6000;
            // Sets the Subscriber properties.
            rpl.Subscriber = "ParkSurveySubscriber";
            rpl.HostName = "Mobile1";
            rpl.CompressionLevel = 6;
            rpl.ExchangeType = ExchangeType.BiDirectional;
            // Call the replication methods.
            rpl.Synchronize();

        }
        catch (SqlCeException sqlEx)
        {
            MessageBox.Show(sqlEx.Message);
        }
        finally
        {
            // Disposing the replication object
            if (rpl != null)
            {
                rpl.Dispose();
            }
        } 
```

我还尝试在移动模拟器的文件资源管理器中打开主机本身，并提示“找不到网络路径。”。这让我相信这是模拟器本身的 ActiveSync 问题。有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:34:51.203

尝试使用 IP 地址而不是主机名，并从设备上的 IE 测试代理 URL。如果您的数据库服务器是 SQL 2012，请确保在所有组件上使用最新版本的 3.5 SP2

# c# - 关闭 SQLDataReaders - 如何判断它们是否已关闭？

> ID：10506919
> 
> 赞同：3
> 
> 时间：2012-05-08T21:38:44.837
> 
> 标签：c#, database-connection, connection-pooling, sqldatareader

我发现我遇到了一些网站连接池问题，并且正在追踪它们。我知道要寻找的一件事是确保所有 SQLDataReader 都已关闭，但我已经完成并确保它们已关闭。我脑海中突然出现的一个问题是关于返回 SQLDataReaders 的方法以及它们如何关闭（或不关闭）。

所以这就是我如何设置东西和一些示例方法：

```
public static SqlDataReader ExecuteReader(SqlCommand cmd)
{
    SqlConnection c = new SqlConnection(Properties.Settings.Default.DatabaseConn);
    cmd.Connection = c;
    c.Open();
    return cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);
} 
```

然后我有一个使用'ExecuteReader（）'的方法

```
public static SqlDataReader GetData()
{
  SqlCommand Query = new SqlCommand("select * from SomeTable");
  return ExecuteReader(Query);
} 
```

现在说我有另一种调用“GetData”的方法。我显然简化了事情。

```
public static SqlDataReader GetMoreData()
{
  return GetData;
} 
```

所以我的问题是，当我这样调用“GetMoreData”时

```
SqlDataReader dr = GetMoreData();
//do some stuff with 'dr'
dr.close(); 
```

*我的所有*SqlDataReaders 和连接都正确关闭了吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:42:22.540

### 描述

`SqlDataReader`实现`IDisposable`接口。在实现`IDisposable`您应该调用`Dispose`或使用`using` 的每个类上以释放资源，在这种情况下关闭阅读器和底层连接。

> **IDisposable 接口**定义释放分配资源的方法。

### 样本

```
using(SqlDataReader dr = GetMoreData()) 
{
    try
    {   
       // do your stuff
    }
    catch(Exception ex)
    {
       // handle the exception
    }
} // the reader will get closed here 
```

**或者**

```
SqlDataReader dr;
try
{   
    dr = GetMoreData();
    // do your stuff
}
catch(Exception ex)
{
   // handle the exception
}
finally
{
   // close the reader
   dr.Dispose();
} 
```

## 编辑

**JotaBe**的好评论

 **> 但是如果他实现了一个返回 DataReader 的方法，那么 using 应该在方法的调用者中使用。因此无法保证 DataReader 已关闭。

我不建议退货，`SqlDataReader`但如果你想这样做，你需要这样做

```
SqlDataReader reader;
try
{
   reader = methodThatReturnsAReader();
}
catch(Exception ex)
{
   // handle the exception
}
finally
{
   // close the reader
   reader.Dispose();
} 
```

### 更多信息

*   [MSDN - IDisposable 接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)
*   [MSDN - SqlDataReader 类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:46:11.760

只要您确定每次都调用 dr.Close() （即使在抛出异常的情况下），那么是的，您的连接也将关闭。但是，将这种类型的代码包装到 try/finally 块中通常是一种好习惯，其中 finally 块包含 dr.Close() 语句。

另一种选择是 using 语句，它利用 SqlDataReader 实现的 IDisposable 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T22:59:28.747

只要在每个被调用的地方都使用该`using`语句，它就会保护您。这很难管理，因此您可以通过更改设计来更好地保护自己。`SqlDataReader dr = GetMoreData()``GetMoreData()`

来自[Microsoft 模式和实践](http://msdn.microsoft.com/en-us/library/ms998569.aspx#scalenetchapt12%5Ftopic13)：

"当满足以下条件时使用 DataSet：

- 你必须在层之间缓存或传递数据。”

和....相比：

“当满足以下条件时使用 DataReader：

——你有一个数据容器，比如一个可以放入数据的业务组件。”

我会说您的应用程序有层并且似乎不使用业务组件。虽然 DataSet 的开销确实比 DataReaders 大得多，但请考虑一下：

*   泄漏连接的成本（高，不可预测）与使用数据集的成本（可测量）
*   您需要多少数据 - 您可以返回`DataTable`还是`DataRow`代替 DataSet？

DataReader 非常适合低级代码，例如数据访问组件，但不应在应用程序的不同部分之间传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T22:06:34.917

我建议您永远不要从方法中返回 DataReader。您将关闭 DataReader 的责任交给方法调用者。如果方法调用者不能确保 DataReader 已关闭，即使发生异常，您也会遇到严重的麻烦。

**当然，你不应该这样做。**

最糟糕的是，在某些情况下，打开的 DataReader 会在数据库中创建锁。

唯一的例外是该方法是私有的，并且您确保所有方法调用者都在关闭 DataReader。但它仍然很容易出错。**

# ajax - Django - 在点击重定向提交无效表单提交按钮后

> ID：10506920
> 
> 赞同：1
> 
> 时间：2012-05-08T21:38:47.427
> 
> 标签：ajax, django, forms, submit

我有一个 django 项目，其中我有一个由 ajax 加载的 div 中的表单。

当我提交带有空字段的表单时，它会返回带有所需字段的表单。

当我再次点击提交时，它会重定向到表单的操作，而不是在 div 中重新加载表单并显示错误，就像我第一次提交时一样。

有谁知道错误可能发生在哪里？我想象在我的 django 项目中的 ajax 或视图中的某个地方。

这是第二次提交返回的内容：

```
{"success": false, "form": "<head>\n\n</head>\n<body>\n<form action=\"/cookbook/createrecipe/\" method=\"POST\" name=\"recipeform\" id=\"createrecipeform\">\n\t<table>\n\t\t<div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='c5ea952ee2144b377b375d91b0843c75' /></div>\n\t\t<tr><th><label for=\"id_name\">Name:</label></th><td><ul class=\"errorlist\"><li>This field is required.</li></ul><input id=\"id_name\" type=\"text\" name=\"name\" maxlength=\"200\" /></td></tr>\n<tr><th><label for=\"id_author\">Author:</label></th><td><ul class=\"errorlist\"><li>This field is required.</li></ul><input id=\"id_author\" type=\"text\" name=\"author\" maxlength=\"100\" /></td></tr>\n<tr><th><label for=\"id_picture\">Picture:</label></th><td><input type=\"file\" name=\"picture\" id=\"id_picture\" /></td></tr>\n<tr><th><label for=\"id_ingredients\">Ingredients:</label></th><td><ul class=\"errorlist\"><li>This field cannot be null.</li></ul><textarea id=\"id_ingredients\" rows=\"10\" cols=\"40\" name=\"ingredients\"></textarea></td></tr>\n<tr><th><label for=\"id_steps\">Steps:</label></th><td><ul class=\"errorlist\"><li>This field cannot be null.</li></ul><textarea id=\"id_steps\" rows=\"10\" cols=\"40\" name=\"steps\"></textarea></td></tr>\n<tr><th><label for=\"id_prep_time\">Prep time:</label></th><td><ul class=\"errorlist\"><li>This field is required.</li></ul><input type=\"text\" name=\"prep_time\" id=\"id_prep_time\" /></td></tr>\n<tr><th><label for=\"id_type\">Type:</label></th><td><ul class=\"errorlist\"><li>This field is required.</li></ul><select name=\"type\" id=\"id_type\">\n<option value=\"\" selected=\"selected\">---------</option>\n<option value=\"SW\">Sandwich</option>\n<option value=\"AP\">Appetizers</option>\n<option value=\"SD\">Sauces and Dressings</option>\n<option value=\"SS\">Soups and Salads</option>\n<option value=\"VG\">Vegetables</option>\n<option value=\"RG\">Rice, Grains and Beans</option>\n<option value=\"PA\">Pasta</option>\n<option value=\"BR\">Breakfast</option>\n<option value=\"MT\">Meat</option>\n<option value=\"SF\">Seafood</option>\n<option value=\"BP\">Bread and Pizza</option>\n<option value=\"DT\">Desserts</option>\n</select><input type=\"hidden\" name=\"reset_recipe\" id=\"id_reset_recipe\" /></td></tr>\n\t</table>\n\t<p><input type=\"submit\" value=\"Submit\"></p>\n</form>\n</body>"} 
```

这是我的ajax代码：

```
<script type="text/javascript"> 
$(document).ready(function(){
    var form = $('form#createrecipeform');
    form.submit(function(e) {
    e.preventDefault();
    console.log('ajax form submission function called successfully.');
    //form = $(this);
    console.log(form)
    var serialized_form = form.serialize();
        $.ajax({ type: "POST", 
            url: $(this).attr('action'),
            data: serialized_form, 
            success: (function(data) { 
                console.log('ajax success function called successfully.');
                data = $.parseJSON(data);
                if (data.success) {
                    console.log('success');
                } else {        
                    console.log('failure');
                    var newForm = data.form;
                    form.replaceWith(newForm);  
                }
            })
        });
        return false;
    });
});
</script> 
```

这是视图：（createrecipe 是表单的操作，account 是加载 ajax 的页面）

```
def createrecipe(request):
        print "entering createrecipeview"
        if request.method == 'POST':
            print "form is a post"
            form = RecipeForm(request.POST)
            print form.errors
            if form.is_valid():
                print "form is valid"
                form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})
                form = form.save()

                t = loader.get_template('cookbook/create_form.html')
                c = RequestContext(request, {
                'form': form,
                })

                data = {
                'replace': True,
                'form': t.render(c),
                'success': True,
                }

                json = simplejson.dumps(data)
                return HttpResponse(json, mimetype='text/plain')
            else:
                print "form is invalid"
                form = RecipeForm(request.POST)
                t = loader.get_template('cookbook/create_form.html')
                c = RequestContext(request, {
                    'form':form,
                })

                data ={
                    'form': t.render(c),
                    'success': False,
                }

                json = simplejson.dumps(data)
                return HttpResponse(json, mimetype='text/plain')

def account(request):
    user = request.user
    if request.user.is_authenticated():

        cookbooks = user.cookbooks
        if cookbooks.all().exists():
            cookbook = cookbooks.all()[0]
            form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})
            recipe_list = cookbook.recipes.all()
        else:
            raise Http404
    else:
        return HttpResponseRedirect('/accounts/login')
    t = loader.get_template('cookbook/account.html')
    c = RequestContext(request, {
        'form': form,
        'recipe_list': recipe_list
    })
    return HttpResponse(t.render(c)) 
```

这是 create_form.html 模板：

```
<head>

</head>
<body>
<form action="{% url cookbook.views.createrecipe %}" method="POST" name="recipeform" id="createrecipeform">
    <table>
        {% csrf_token %}
        {{ form.as_table }}
    </table>
    <p><input type="submit" value="Submit"></p>
</form>
</body> 
```

这是包含 create_form 模板的帐户模板：

```
{% extends "cookbook/base.html" %}
{% load pagination_tags %}
{% load comments %}

    <h1>{{ user }}'s Cookbook</h1>

<ul>
{% block nav-cookbooks %}
<li><a class="nav-inactive" href="/cookbooks/">Cookbooks</a></li>
{% endblock %}
{% block nav-account %}
<li><a class="nav-active" href="/account/">My Cookbook</a></li>
{% endblock %}
</ul>
{% block content %}
{% autopaginate recipe_list 6 %}
    <div id="recipe_cont">
            {% for recipe in recipe_list %}
        <div class="recipe">
            <div class="button">    
            <a href="{% url cookbook.views.userrecipe recipe.id %}" style="display: none;"></a>   
            <img src="{{ STATIC_URL }}chicknbraw.jpg" alt="" height="70" width="70" style="display:inline;" />
            <h4>{{ recipe.name }}</h4>
             </div>
            <h5>{{ recipe.author }}</h5>
            <h5>Prep Time: {{ recipe.prep_time }} minutes</h5>

            <h6><a href="/addrecipe/{{ recipe.id }}">Add Recipe</a>
                <a href="/removerecipe/{{ recipe.id }}">Remove Recipe</a></h6>
        </div>
    {% endfor %}
    </div>

    <div id="popupContact" class="popup">
            <a id="popupContactClose" style="cursor:pointer;float:right;">x</a>
            <p id="contactArea">
            <h1 style="text-align:center">Create New Recipe</h1>
            {% include 'cookbook/create_form.html' %} 
            </p>
    </div>
    <div id="backgroundPopup">
    </div>  
    <div id="col2-footer">
    {% paginate %}
    <p id="recipe_order_text"> order by: <a href="/userbook/ordered/name">abc</a>|<a href="/userbook/ordered/date">date</a> 
    </div>

{% endblock %}

{% block footer %}
        <a class="create" style="cursor:pointer" >Create New Recipe</a>
{% endblock %} 
```

很抱歉放了这么多代码，但这一切似乎都依赖于另一段代码，所以我认为所有相关代码都会有所帮助

感谢你给与我的帮助

凯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:49:01.667

在您的 javascript 中，您正在劫持表单以便它通过 ajax 提交，但随后您在表单上调用 replaceWith，因此您被劫持的表单被删除并被一个新的非劫持表单替换。要解决这个问题，您可以

1）仅替换表单的内容 - 这应该有效，因为您只是将事件附加到表单本身而不是其子元素

2）将你的js写成一个函数，你可以首先在初始表单上调用，然后在通过ajax加载的任何新表单上调用。

更新：例如，

```
<script type="text/javascript"> 
$(document).ready(function(){

    function hijack() {
        var form = $('form#createrecipeform');
        form.submit(function(e) {
            e.preventDefault();
            console.log('ajax form submission function called successfully.');
            //form = $(this);
            console.log(form)
            var serialized_form = form.serialize();
            $.ajax({ type: "POST", 
                url: $(this).attr('action'),
                data: serialized_form, 
                success: (function(data) { 
                    console.log('ajax success function called successfully.');
                    data = $.parseJSON(data);
                    if (data.success) {
                        console.log('success');
                    } else {        
                        console.log('failure');
                        var newForm = data.form;
                        form.replaceWith(newForm);
                        hijack();
                    }
                })
            });
            return false;
        });
    };

    hijack();

});
</script> 
```

# objective-c - 何时使用@property？

> ID：10506925
> 
> 赞同：3
> 
> 时间：2012-05-08T21:39:02.810
> 
> 标签：objective-c, performance, properties

是否应该使用`@property`将经常访问的变量，例如粒子的位置？`@property`为变量创建 getter 和 setter，这增加了调用方法的开销。在大多数情况下，这并不明显，但是如果该属性每秒被访问一百万次（在不同的实例中）怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:44:50.243

您是正确的，Objective-C 运行时将为访问器增加一定数量的开销`@property`。然而，这是在 Objective-C 类之间共享信息的公认方式。如果您已经测量了您的应用程序并确定`@property`开销实际上是一个处理瓶颈，您应该只考虑一种不同的方法。

请记住，现代处理器在*GHz*范围内运行，而“每秒一百万次”发生的事情仅在*MHz*范围内。很有可能，您的瓶颈将在其他地方。

如果你*确实*有问题，你总是可以在`Particle`一个更大的 Objective-C`ParticleCloud`类中的一组简单结构上进行粒子处理。这将允许您的程序的其余部分忽略`Particle`对象的确切实现，同时消除对`@property`访问器的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:45:21.697

你真的在使用getter和setter吗？如果没有，请不要使用属性。如果是这样，请使用它。知道开销是否显着的唯一方法是进行自己的性能测试并记录过程前后的时间，运行完全相同的模拟并比较经过的时间。如果它对性能有影响，但可以忽略不计，请不要担心。您甚至可能会发现使用 @property 比您使用的任何其他方法更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:48:37.637

在我看来，你应该使用`@property`你的对象的属性。我知道这听起来很愚蠢，但我所说的属性是指其他类可以访问的“公共”属性。如果只有你的类需要那个属性，那么在你的实现中保持它是私有的，事情会更顺畅和更干净。

@property 的好处之一是您可以指定是否希望它们是只读的（即没有设置器）。所以这确实是公共 API 的问题。

# ios - iOS - 移动视图时界面元素重叠

> ID：10506926
> 
> 赞同：0
> 
> 时间：2012-05-08T21:39:04.363
> 
> 标签：ios, uitableview, uiview, uitextfield

我的应用程序有以下界面布局：

![在此处输入图像描述](../Images/83ac7886305efef5dfced1e3656c9bcf.png)

当我单击文本字段时（如果您点击添加标签，则会添加一个新文本字段），我让视图向上滚动以免被键盘挡住，以便用户可以正确看到他正在输入的内容，但是当我发生以下情况时这样做：

![在此处输入图像描述](../Images/b6243455ecc4d09a20d62223720c7907.png)![在此处输入图像描述](../Images/f4a06de7a4f911b4187c3df8ab170c25.png)

这是我用来滚动的代码：

```
- (void)keyboardWillShow:(NSNotification *)notification {
  if (self.keyboardIsShown) {
    return;
  }

  NSValue *keyboardBoundsValue = [[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey];
  CGSize keyboardSize = [keyboardBoundsValue CGRectValue].size;

  NSTimeInterval animationDuration = 0.3;

  CGRect frame = self.view.frame;

  frame.origin.y -= keyboardSize.height - 94 + self.firstResponder.superview.superview.frame.origin.y;
  frame.size.height += keyboardSize.height - 94 + self.firstResponder.superview.superview.frame.origin.y;

  [UIView beginAnimations:@"ResizeForKeyboard" context:nil];
  [UIView setAnimationBeginsFromCurrentState:YES];
  [UIView setAnimationDuration:animationDuration];
  self.view.frame = frame;
  [UIView commitAnimations];

  self.keyboardIsShown = YES;
}

- (void)keyboardWillHide:(NSNotification *)notification {
  NSValue *keyboardBoundsValue = [[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey];
  CGSize keyboardSize = [keyboardBoundsValue CGRectValue].size;

  NSTimeInterval animationDuration = 0.3;

  CGRect frame = self.view.frame;

  frame.origin.y += keyboardSize.height - 94 + self.firstResponder.superview.superview.frame.origin.y;
  frame.size.height -= keyboardSize.height - 94 + self.firstResponder.superview.superview.frame.origin.y;

  [UIView beginAnimations:@"ResizeForKeyboard" context:nil];
  [UIView setAnimationBeginsFromCurrentState:YES];
  [UIView setAnimationDuration:animationDuration];
  self.view.frame = frame;
  [UIView commitAnimations];

  self.keyboardIsShown = NO;
} 
```

知道如何使视图元素显示在导航栏后面或消失或其他可以正常工作的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:50:39.153

实现您想要的快速方法是将导航栏放在视图树中的“内容”视图下方。这样导航栏将保持在顶部。如果您动态添加内容。确保将它们添加为导航栏后面的视图的子视图。

// 编辑

正如评论中所建议的：

```
self.view.clipsToBounds = YES;
CGRect frame = self.yourWrappingView.frame;
NSUInteger distanceToMove = 200;
self.yourWrappingView.frame = CGRectMake(frame.origin.x - distanceToMove, frame.origin.y, frame.size.width, frame.size.height); 
```

这应该对你有用：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:15:32.123

可能您没有使用真正的`UINavigationController`. 但你应该。所以你不会有这些问题和正确的调整大小行为。但是要在您当前的架构中解决它：

*   确保导航栏是 nib 文件/情节提要中最顶层的对象
*   为您的 UINavigationBar 添加一个 IBOutlet ，如果您动态插入新视图，请使用`[self insertSubview: newView belowSubview: navigationBarOutlet];`

# objective-c - 尝试在 XCode 中以异步方式淡入从 URL 加载的图像

> ID：10506929
> 
> 赞同：0
> 
> 时间：2012-05-08T21:39:18.670
> 
> 标签：objective-c, ios, xcode

我想从 URL 加载图像，然后将它们分配为不同 UIButtons 的背景图像。当视图出现时，我需要这样做。

我的问题是，当我尝试使图像在加载时淡入时，动画直到所有图像都加载完毕后才开始。我认为这是因为动画代码已被读取，但在它有时间执行之前，程序开始加载新图像。

如何让图像一个接一个地淡入淡出？

以下代码用于获取图像（调用 downloadImageByPrice atURL），然后执行动画。

```
-(void) obtainImage:(int)i atURL:(NSString *)URLString{

    UIImage *image = [self downloadImageByPrice:i atURL:URLString];

    // Make images fade in when they have been found
    [[_buttonArray objectAtIndex:i] setAlpha:0.0];

    [[_buttonArray objectAtIndex:i] setImage:image forState:UIControlStateNormal];

    [UIView beginAnimations:@"fadeIn" context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.8];

    [[_buttonArray objectAtIndex:i] setAlpha:1.0];
    [UIView commitAnimations];

} 
```

此方法用于一个接一个地加载所有图像。我希望我的循环等到每个图像都出现后再开始加载下一个。

```
-(void) loadAllImagesAtURL:(NSString *)URLString{
    for(int i =0; i<[_buttonArray count];i++){
        [self obtainImage:i atURL:URLString];
    }    
} 
```

我试过使用选择器，或者没有运气的完成^方法，但我对这些概念的理解仍然很低。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T22:29:45.353

看一下这个：

***视图控制器.h***

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController
@property (strong, nonatomic) NSMutableArray *buttonArray;
-(void) loadAllImagesAtURL:(NSString *)URLString;
- (UIImage *)downloadImageAtURL:(NSString *)urlString;
@end 
```

***视图控制器.m***

```
#import "ViewController.h"
@implementation ViewController
@synthesize buttonArray = _buttonArray;
- (void)viewDidLoad {
    [super viewDidLoad];
    [self setButtonArray:[NSMutableArray array]];
    int margin = 20;
    int buffer = 8;
    int width  = 100;
    int height = 50;
    for (int i = 0; i < 4; i = i + 1) {
        UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
        [btn setAlpha:0.0];
        [btn setFrame:CGRectMake(margin + ((width + buffer) * i), margin, width, height)];
        [btn setTitle:[NSString stringWithFormat:@"%d", i] forState:UIControlStateNormal];
        [[self buttonArray] addObject:btn];
        [[self view] addSubview:btn];
    }
    [self loadAllImagesAtURL:@"https://www.google.com/images/srpr/logo3w.png"];
}
-(void) loadAllImagesAtURL:(NSString *)URLString {
    static int i = -1;
    i = i + 1;
    if (i < [[self buttonArray] count]) {
        UIImage *image = [self downloadImageAtURL:URLString];
        // Make images fade in when they have been found
        [[_buttonArray objectAtIndex:i] setImage:image forState:UIControlStateNormal];
        [UIView animateWithDuration:1.0
                         animations:^{
                             [[_buttonArray objectAtIndex:i] setAlpha:1.0];
                         } 
                         completion:^(BOOL finished) {

                             [self loadAllImagesAtURL:URLString];
                         }
         ];
    }
}
- (UIImage *)downloadImageAtURL:(NSString *)urlString {
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *image = [UIImage imageWithData:data];
    return image;
}
@end 
```

对我来说，这会创建 4 个按钮（最初是不可见的），在下载图像时会淡入。这是你想要的吗？

# android - 谷歌网络工具包验证错误

> ID：10506935
> 
> 赞同：1
> 
> 时间：2012-05-08T21:39:44.143
> 
> 标签：android, eclipse, gwt, android-c2dm

我刚刚安装了用于开发 C2DM 应用程序的 gwt 2.4.0 google web toolkit。但是 Eclipse 显示一个问题**“验证 GWT 组件（63%）”**，之后什么也没有发生。

如何解决这个问题。请帮忙。

# php - PHP 短路评估（好/坏？）

> ID：10506936
> 
> 赞同：3
> 
> 时间：2012-05-08T21:39:45.630
> 
> 标签：php, short-circuiting

这是一个一般性的问题，但为了解释它，我将使用一个具体的例子。

我有一个加载文档的功能。如果该文档不存在，它将创建它，如果它确实存在，则将其转换为 JSON 数组。我总是希望这个函数返回某种类型的数组，无论文件是否存在问题`json_decode()`或文件不存在。目前我正在这样做......

```
function load($file) {
    if( ! file_exists($file)) {
        $handle = fopen($file, 'w');
        fclose($handle);
    }

    $raw = file_get_contents($file);
    $contents = json_decode($raw, TRUE);

    return( ! $contents ? array() : $contents);
    //cant use ternary shorthand "?:" in PHP 5.2, otherwise this would be shorter
} 
```

现在，上面的代码没有任何问题（至少我认为没有问题，并且工作正常）。然而，我一直在寻找改进我的代码并在保持其清晰易读的同时对其进行压缩的方法。而那个 return 语句一直困扰着我，因为它看起来效率很低。所以今天我开始思考并且发生了一些事情。我记得看到 mysql 教程做了一些事情，`connect() or die();`所以我想，为什么不`json_decode() or array();`呢？这甚至会起作用吗？所以我重写了我的函数来找出......

```
function load($file) {
    if( ! file_exists($file)) {
        $handle = fopen($file, 'w');
        fclose($handle);
    }

    $raw = file_get_contents($file);
    return json_decode($raw, TRUE) or array();
} 
```

似乎，它甚至读起来也足够令人愉快。继续我的下一轮问题。这是好习惯吗？我明白，但其他人会吗？它真的有效吗，或者这是一个快乐结局的错误？我环顾四周，发现我要问的是所谓的短路评估，而不是错误。很高兴知道。我使用这个新术语来优化我的搜索并想出了更多的材料。

[博客条目](http://www.johnciacia.com/2010/10/18/short-circuit-evaluation-in-php/)

[维基百科](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

我发现的几乎所有内容都没有提到以我询问的方式使用短路的方式总是提到 MySQL 连接。现在，我知道大多数人反对使用该`or die()`术语，但这仅仅是因为它是一种处理错误的不雅方式。对于我要询问的方法来说，这不是问题，因为我不想使用`or die()`. 还有其他理由不使用它吗？Wikipedia 似乎是这样认为的，但仅参考 C。我知道 PHP 是用 C 编写的，因此这绝对是相关信息。但是这个问题在 PHP 编译中已经被淘汰了吗？如果不是，它是否像维基百科所说的那样糟糕？

这是来自维基百科的片段。

**维基百科**- “短路会导致现代处理器上的分支预测错误，并显着降低性能（一个显着的例子是高度优化的光线，光线追踪中的轴对齐框相交代码）[需要澄清]。一些编译器可以检测到这种情况并发出更快的代码，但由于可能违反 C 标准，这并不总是可能的。高度优化的代码应该使用其他方式来执行此操作（例如手动使用汇编代码）“

大家怎么看？

**编辑**

我已经调查了另一个论坛并在那里得到了一些不错的结果。普遍的共识似乎是这种形式的变量赋值虽然有效，但不是首选，在现实世界中甚至可能被认为是不好的形式。我会继续关注地面，如果有任何新情况出现，我会更新。感谢 Corbin 和 Matt 的意见，特别是 Corbin 澄清了一些事情。如果您有兴趣，[这里是论坛帖子的链接。](http://forums.devshed.com/php-development-5/php-short-circuit-evaluation-good-bad-904285.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:52:59.443

你问了几个不同的问题，所以我会尽力解决所有问题。

错过的分支预测：除非您使用 C 或汇编进行编码，否则不要担心这一点。在 PHP 中，你离硬件太远了，考虑分支预测对你没有帮助。无论哪种方式，这将是一个非常微小的优化，尤其是在一个开始进行大量字符串解析的函数中。

> 还有其他理由不使用它吗？Wikipedia 似乎是这样认为的，但仅参考 C。我知道 PHP 是用 C 编写的，因此这绝对是相关信息。

PHP 可能会将其解析为不同的执行结构。除非您计划运行此功能数百万次，或者您知道这是一个瓶颈，否则我不会担心。`or`在 2012 年，我发现使用to 短路不太可能导致十亿分之一秒的差异。

至于格式，我觉得`$a or $b`很丑。我的头脑并不理解它在 if 子句中看到的短路。

```
if (a() || b()) 
```

我非常清楚 b() 只有在 a() 不评估为真时才会执行。

然而：

```
return a() or b(); 
```

对我来说没有同样的清晰度。

这显然只是一种观点，但我将提供两种关于如何编写它的替代方案（在我看来，它们更清晰一点）：

```
function load($file) {
    if (!file_exists($file)) {
        touch($file);
        return array();
    }

    $raw = file_get_contents($file);

    $contents = json_decode($raw, true);

    if (is_array($contents)) {
        return $contents;
    } else {
        return array();
    }

} 
```

如果您不在乎文件是否实际被创建，您可以更进一步：

```
function load($file) {

    $raw = file_get_contents($file);

    if ($raw !== false) {
        $contents = json_decode($raw, true);
        if ($contents !== null) {
            return $contents;
        }
    }

    return array();

} 
```

我想这些代码片段真的归结为个人喜好。第二个片段可能是我要使用的片段。其中的关键路径可能会更清晰一些，但我觉得它在不牺牲可理解性的情况下保持简洁。

编辑：如果您是每个函数返回 1 的人，则以下可能更可取：

```
function load($file) {

    $contents = array();

    $raw = file_get_contents($file);

    if ($raw !== false) {
        $contents = json_decode($raw, true);
        if ($contents === null) {
            $contents = array();
        }
    }

    return $contents;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:53:16.033

将你的代码压缩成最简单的行，你可以得到它并不总是最好的方法，因为通常压缩代码看起来很酷，但通常很难阅读。如果您对代码和可读性有任何疑问，我建议您在代码中添加一些标准注释，这样任何人都可以仅从您的注释中理解代码。

就最佳实践而言，这是一个见仁见智的问题，如果您对它感到满意，那就继续吧，如果需要，您可以随时在项目生命周期后重新访问代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T09:19:40.837

我确实喜欢短路声明，因为它是一种进行单行变量检查的方法。

我更喜欢：

```
isset($value) or $value = 0; 
```

而不是：

```
if (!isset($value)) {
  $value = 0;
} 
```

* * *

但我没有直接在退货中使用它，这篇文章很想尝试。

可悲的是，它不能正常工作，至少对我来说：

```
return $data[$key] or $data[1]; 
```

在我期待一个数组时，在所有情况下都会返回值 1。

以下工作顺利：

```
// Make sure $key is valid.
$data[$key] or $key = 1;

return $data[$key]; 
```

但令我惊讶的是，当 $data 中不存在 $key 时，PHP 没有抛出任何错误。

# ruby-on-rails - 在我的 Rails 应用程序中，如何在创建新产品时自动附加用户 ID？

> ID：10506938
> 
> 赞同：0
> 
> 时间：2012-05-08T21:39:51.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 应用程序，有两个单独的数据库表、用户和产品。一个用户拥有_许多产品，而一个产品属于_一个用户。

当我创建一个产品时，我希望它自动将 user_id 添加到 products 表中的 user_id 数据库列中。我需要对我的 mvc 进行哪些更改以确保在创建新产品时添加正确的 user_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:46:45.550

您可以通过用户来确定新产品的创建范围。

例如，而不是这个：

```
Product.create(params[:product]) 
```

你来做这件事：

```
current_user.products.create(params[:product]) 
```

其中“current_user”是创建产品的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:57:26.523

作为一个建议，您可能希望返回并接受您之前一些问题的答案，这将提高您的回复率并增加将来有人回答您的问题的可能性。

有几种方法可以做到这一点，一种方法：

**创建当前用户函数**

```
class ApplicationController < ActionController::Base
  private
  # Finds the User with the ID stored in the session with the key
  # :current_user_id This is a common way to handle user login in
  # a Rails application; logging in sets the session value and
  # logging out removes it.
  def current_user
    @_current_user ||= session[:current_user_id] &&
      User.find_by_id(session[:current_user_id])
  end
end 
```

[http://guides.rubyonrails.org/action_controller_overview.html#session](http://guides.rubyonrails.org/action_controller_overview.html#session)

确保意识到安全问题。像 Devise 这样的宝石也可以提供帮助。

*添加到产品控制器*

```
class ProductsController < ApplicationController
  def create
    current_user.products.create! params[:product]   # make sure attr_accessible is setup on products
  end
end 
```

# javascript - 跟随鼠标位置的对象减慢

> ID：10506941
> 
> 赞同：1
> 
> 时间：2012-05-08T21:40:02.937
> 
> 标签：javascript, jquery, math

我有一些缓慢跟随鼠标位置的 div。在开始时它开始很好，但它越接近鼠标位置越慢。我在下面有一个非常有效的代码，但我想改进它，以便 div 始终以恒定的速度跟随鼠标，而不是不断变化的速度。

```
var xp = x, yp = y;
var loop = setInterval(function(){
xp += ((mouseX - xp) ) / 100;
yp += ((mouseY - yp)) / 100;
object.css({left:xp, top:yp});
},20);} 
```

因为当它靠近时它会跳水 100，所以数学变得更小，导致 X/Y 移动得更慢。我希望它保持相同的速度，无论它来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:53:11.310

这是解决方案：

```
var loop = setInterval(
    function()
    {
        speed = 20;
        xp += (mouseX - xp)>speed ? speed : ((mouseX - xp)<-speed ? -speed : (mouseX - xp));
        yp += (mouseY - yp)>speed ? speed : ((mouseY - yp)<-speed ? -speed : (mouseY - yp));
        object.css({left:xp, top:yp});
    },20
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:46:12.020

您是否尝试过使用网络工作者？

使用 Web Worker，您可以发送“繁重”任务以在后台线程中完成，这样您的 UI 线程就不会变得迟缓并且您的 Web 应用程序保持响应。

设置非常简单。

```
var worker = new Worker('someWorker.js'); 
```

看一看：

[https://developer.mozilla.org/En/Using_web_workers](https://developer.mozilla.org/En/Using_web_workers)

# php - 限制每个会话的 html5 视频显示？

> ID：10506942
> 
> 赞同：3
> 
> 时间：2012-05-08T21:40:03.510
> 
> 标签：php, wordpress, video, html5-video, jwplayer

我想限制每个会话的视频和照片显示。例如，访问者观看了 3 个视频，当他尝试观看第四个视频时，他被重定向到订阅页面。我将使用 JWPlayer 或原生 HTML5，没关系，这将在 WP 中工作，但希望通过任何方式使用 PHP 来做到这一点（无论如何我都不是专家）。

因此，理想情况下，这将是工作流程：1) 访客观看视频 1 --> 可选消息 --> 您还有 2 个视频 2) 访客观看视频 2 --> 可选消息 --> 您还有 1 个视频 3) 访客观看video3 --> 可选消息 --> 您还有 0 个视频 4) 访客尝试观看 video4 --> 重定向

到目前为止，我找到了限制每个带宽或每个时间的方法（只有 1 个视频，然后重定向），但我需要正好提供 3 个视频，无论时间或大小如何，所以这些解决方案不起作用。关于如何实现这一目标的任何想法？

编辑：这是一些要重定向的代码，我真的没有添加任何东西，因为我不需要什么，但看看：

```
<script src="text/javascript">
function vidplay(){
    var video = document.getElementById('video');
    video.play();
    video.addEventListener('ended',function(){
        window.location = 'http://SUBSCRIBE_PAGE';
    });
}
</script>
<video controls id="video" width="640" height="360" onclick="vidplay()">
    <source src="video/video.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:43:06.170

在会话中存储一个计数（理想情况下是一个视频 ID 列表，以便他们可以在一个会话中多次观看同一视频），这可能会因用户清除 cookie 而无效。否则，如果您的用户有一个他们必须登录的帐户，请存储他们针对数据库表观察的历史记录。

编辑：现在我注意到您在这里使用 wordpress，所以我无法帮助将其添加到其中，但这是基于会话的方法的示例

```
<?php

// Obviously use your variable here
$ID_OF_VIDEO_HERE = $_REQUEST['video'];

if(isset($_SESSION) === false)
  session_start(); // Start PHP session management
if(isset($_SESSION['videos_viewed']) === false)
  $_SESSION['videos_viewed'] = array();

if(isset($_SESSION['videos_viewed'][$ID_OF_VIDEO_HERE]) === FALSE AND count($_SESSION['videos_viewed']) >= 3)
{
  // Redirect the User
  header('location: http://SUBSCRIBE_PAGE');
  exit();
}
else
{
  // Add current video ID to list
  $_SESSION['videos_viewed'][$ID_OF_VIDEO_HERE] = true;
}

// JUST FOR TESTING
var_dump($_SESSION['videos_viewed']);

?> 
```

# wpf - 单选按钮中的 FocusVisualStyle 不起作用

> ID：10506950
> 
> 赞同：0
> 
> 时间：2012-05-08T21:40:45.510
> 
> 标签：wpf, tabs, focus, styles, radio-button

这对我不起作用，仅在按下 Tab 键时才专注于单选按钮！有谁知道如何解决？

```
 void SelectPaymentModeView_Loaded(object sender, RoutedEventArgs e)
    {
        this.radPaymentMode.Focus(); 
    } 
```

单选按钮的内容是文本...我也试试 Keyboard.Focus(this.radPaymentMode);

* * *

查看完整代码：

```
PaymentMode[] modes = data[1] as PaymentMode[];
if (modes.Length > 0)
{
    for (int i = 0; i < modes.Length; i++)
    {
        RadioButton rad = new RadioButton();

        rad.Name = "radPayment" + i;
        rad.GroupName = "PaymentModes";
        rad.Content = modes[i].Name;
        rad.DataContext = modes[i];
        rad.Margin = new Thickness(110, 0, 0, 5);
        rad.VerticalAlignment = System.Windows.VerticalAlignment.Center;
        rad.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        Grid.SetRow(rad, 3 + i);
        Grid.SetColumn(rad, 1);
        gridPaymentModes.RowDefinitions.Insert(3, new RowDefinition());
        gridPaymentModes.Children.Add(rad);
        radPaymentModes.Add(rad);

        if (!string.IsNullOrEmpty((this.DataContext as Order).Payment))
        {
            String paymentOrder = rad.Content as String;
            if (paymentOrder.Equals((this.DataContext as Order).Payment))
            {
                rad.IsChecked = true;
            }
        }

        rad.Checked += new RoutedEventHandler(rad_Checked);
    }
    radPaymentModes[0].Loaded += SelectPaymentModeView_Loaded;
}

 void SelectPaymentModeView_Loaded(object sender, RoutedEventArgs e)
    {
        FocusManager.SetFocusedElement(FocusManager.GetFocusScope((sender as RadioButton)), (sender as RadioButton));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:40:32.187

键盘焦点管理器使虚线焦点装饰器在使用键盘选项卡到控件时可见（例如，WPF 希望在使用鼠标时隐藏焦点矩形，以减少视觉混乱）。

要强制它，请使用这样的代码（假设 btnRadio 是您的按钮）：

```
 FocusManager.SetFocusedElement(FocusManager.GetFocusScope(btnRadio), btnRadio); 
```

# jquery - 返回数据上的 jQuery JSON AJAX 错误

> ID：10506951
> 
> 赞同：0
> 
> 时间：2012-05-08T21:40:47.890
> 
> 标签：jquery, .net, ajax, json, select

我想从 JSON 创建一个动态选择输入（下拉菜单）。

我尝试了两种方法来获取下拉菜单选择输入的 JSON 对象（我在注释掉的 JS 中标记了尝试 1 和尝试 2）。

我将字符串返回给客户端，但是，前端并未将其视为 JSON 对象，而只是一个字符串。我尝试使用 .Net 序列化程序和 Json2 Parse 对其进行解析和序列化。

AJAX 调用

```
function getcategories(categoryId) {

    $.ajax({
        type: 'POST',
        url: '/Services/Category.aspx/GetCategory',
        data: '{"categoryId":"' + categoryId + '"}',
        contentType: 'application/json; charset=utf-8',
        global: false,
        async: false,
        dataType: 'json',
        success: function (msg) {
            if (msg.d == null || msg.d == '') {
                //end of the road. not more categories. so don't add another DDL
                jsonList = '';
                console.log("No more DDLs: ");
            } else {
                //attempt 1: converting returned data to Json
                //var json = JSON.parse(msg.d);//just returns [object object]
                //jsonList = json.d;
                //attemp2: trying to consume stringbuilder string as Json
                //or if I do the below, I also get an error Table does not exist
                //jsonList = msg.d
            }
        }

    });
    return false;

} 
```

返回的 JSON

```
{
    "Table": [{
        "categoryid": "0",
        "categoryname": "--Select Category1--"
    }, {
        "categoryid": "2",
        "categoryname": "subname2"
    }, {
        "categoryid": "3",
        "categoryname": "subname3"
    }, {
        "categoryid": "4",
        "categoryname": "subname4"
    }]
} 
```

尝试在这里循环使用它：

```
//simplified function inside the ready()
//add dynamic select with options from Json
$('<select id ="DDL' + nextSelect + '" class="cascade"><option value="-">-- Step' + nextSelect + ' --</option></select>').appendTo('div .chooseSteps');
console.log("Obj " + categoryJson); //shows the Json string 
console.log("TABLE " + categoryJson.Table); //returns undefined :(
var listItems = "";

//Says that Table does not exist (undefined)
for (var i = 0; i < categoryJson.Table.length; i++) {
    listItems += "<option value='" + categoryJson.Table[i].categoryid + "'>" + categoryJson.Table[i].categoryname + "</option>";
} 
```

所以我的目标是获得显示和获取表值的选项。

我整个下午都在搜索论坛，找不到有效的解决方案，这让我发疯。感谢你的理解。

我将 jQuery 1.7.1 AJAX 与 Json2.js（作为旧浏览器的备份）与 Asp.Net 4 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:44:46.967

您的回复没有`d`属性。

不要试图解析它。jQuery 就是这样做的。

只需这样做：

```
jsonList = msg.Table 
```

虽然我看不到您从 AJAX 调用转换到底部代码的位置，但我不确定两者之间发生了什么。

这些表明未解析 JSON：

```
console.log("Obj " + categoryJson); //shows the Json string 
console.log("TABLE " + categoryJson.Table); //returns undefined :( 
```

所以在这里你需要`$.parseJSON`它。同样，我发现这两个代码示例之间没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:46:46.920

好吧，您似乎需要调用： msg.Table 而不是 msg.d ... msg.d 似乎未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T22:01:16.490

您可以使用 jquery.each 遍历 javascript 对象

html

```
<select id="fillme"></select>​ 
```

javascript

```
var categoryJson = {"Table":[{ "categoryid":"0","categoryname": "--Select Category1--             
"},{"categoryid":"2","categoryname":"subname2"},
{"categoryid":"3","categoryname":"subname3"},
{"categoryid":"4","categoryname":"subname4"}]};

var table = categoryJson.Table;

$(table).each(function(key,cat){
    var option = '<option value="'+cat.categoryid+'">'+cat.categoryname+'</option>';
    $('#fillme').append(option);
}); 
```

[jquery 示例此代码的作用](http://jsfiddle.net/BwMQH/1/)

# ruby-on-rails-3 - 乘客崩溃，在 apache 启动时挂起

> ID：10506959
> 
> 赞同：0
> 
> 时间：2012-05-08T21:41:16.970
> 
> 标签：ruby-on-rails-3, apache, ubuntu, passenger

在全新安装的 Ubuntu 上，使用 Ruby/Rails/RVM 和 Apache 通过Passenger，apache 将在干净重启时出现，但在第一次请求 Rails 应用程序时崩溃。

我之前已经做过很多次了……除了安装在多用户模式下的 RVM。

似乎可能有一些图书馆冲突？

详情如下。

*   64 位 Ubuntu 11.10 安装
*   创建了一个发布用户和组
*   卸载默认的 apache、ruby、passenger (sudo apt-get remove ...)
*   使用系统版本安装的 RVM（多用户）
*   使用 RVM 安装 ruby​​ 1.9.3p194（作为发布用户安装）
*   将发布用户添加到组`rvm`
*   ruby 和 gems 在 /usr/local/rvm/ 下并且都在组中`rvm`并且可读
*   安装 apache2 和各种支持库 ( `sudo apt-get install apache2`)
*   将 apache2 用户 ( `www-data`) 添加到组`rvm`
*   `gem install passenger`从 gem ( )安装乘客
*   使用乘客来制作乘客模块（`passenger-install-apache2-module`）。没有错误。
*   配置 apache 以加载正确的模块（在 /usr/local/rvm... 下）
*   配置apache以引用正确的PassengerRoot和PassengerRuby
*   注意：这一切都没有参考 Rails 应用程序
*   启动 apache ( `sudo apache2ctl start`) ...这挂起

Apache error.log 显示

```
[ pid=1303 thr=140033289561952 file=ext/apache2/Hooks.cpp:1389 time=2012-05-07 19:54:15.497 ]: Initializing Phusion Passenger...
[ pid=1303 thr=140033289561952 file=ext/apache2/Hooks.cpp:1664 time=2012-05-07 19:54:15.536 ]: Shutting down Phusion Passenger...
[ pid=1312 thr=140533444790112 file=ext/common/LoggingAgent/Main.cpp:283 time=2012-05-07 19:54:15.537 ]: Logging agent online, listening at unix:/tmp/passenger.1.0.1303/generation-0/logging.socket 
```

换句话说，乘客在它开始后不久就终止了。 `/var/log/syslog`显示PassengerWatchd 的堆栈转储。

我尝试在独立模式下运行乘客。纳达。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:05:36.713

对于任何寻找的人来说，这最终成为了几个人的问题，并且这里的[乘客谷歌组上发布了几个很好的解决方法](https://groups.google.com/d/topic/phusion-passenger/RWgxl6sRycY/discussion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:47:39.653

确保您的passenger.conf 使用与控制台中相同的ruby 版本。

```
$ cat /etc/apache2/mods-available/passenger.conf 
PassengerRuby /home/ubuntu/.rvm/rubies/ruby-1.9.2-p320/bin/ruby
PassengerRoot /home/ubuntu/.rvm/gems/ruby-1.9.2-p320/gems/passenger-3.0.18
PassengerDefaultUser www-data 
```

比较PassengerRuby是一样的：

```
$ which ruby
/home/ubuntu/.rvm/rubies/ruby-1.9.2-p320/bin/ruby 
```

# java - 使用反射调用类中的所有设置器

> ID：10506960
> 
> 赞同：3
> 
> 时间：2012-05-08T21:41:23.163
> 
> 标签：java, reflection, invoke

我有一个域对象，出于这个问题的目的，我将使用以下私有变量调用 Person：

```
String name
int age 
```

它们中的每一个都有getter 和setter。现在我也有`Map<String, String>`以下条目：

```
name, phil
age, 35 
```

我想在 Person 类中填充所有 setter 方法的列表，然后遍历该列表并使用映射中的值调用每个方法。

这是否可能，因为我在网上看不到任何接近此的示例。非常感谢示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T21:46:07.983

当然有可能！您可以通过执行以下操作获取所有以“set”开头的方法：

```
Class curClass = myclass.class;
Method[] allMethods = curClass.getMethods();
List<Method> setters = new ArrayList<Method>();
for(Method method : allMethods) {
    if(method.getName().startsWith("set")) {
        setters.add(method);
    }
} 
```

现在你已经掌握了方法。您是否已经知道如何为您的类实例调用它们？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:50:14.023

您是否尝试过[`BeanUtils.populate()`](http://commons.apache.org/proper/commons-beanutils/apidocs/org/apache/commons/beanutils/BeanUtils.html#populate%28java.lang.Object,%20java.util.Map%29)）来自[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)？

```
BeanUtils.populate(yourObject, propertiesMap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:49:16.497

我认为您可以使用一个库，即[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)。如果您有一个包含字段和值对的映射，[PropertyUtils](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/PropertyUtils.html)类可以帮助您：

```
Person person = new Person();
for(Map.Entry<String, Object> entry : map.entrySet())
    PropertyUtils.setProperty(person, entry.getKey(), entry.getValue()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-07T13:32:40.120

这是一个完整的解决方案，可以预先验证输出类，然后为地图包含的所有属性调用设置器。它纯粹使用`java.beans`和`java.lang.reflect`。

```
public Object mapToObject(Map<String, Object> input, Class<?> outputType) {
    Object outputObject = null;
    List<PropertyDescriptor> outputPropertyDescriptors = null;
    // Test if class is instantiable with default constructor
    if(isInstantiable(outputType) 
            && hasDefaultConstructor(outputType)
            && (outputPropertyDescriptors = getPropertyDescriptors(outputType)) != null) {
        try {
            outputObject = outputType.getConstructor().newInstance();
            for(PropertyDescriptor pd : outputPropertyDescriptors) {
                Object value = input.get(pd.getName());
                if(value != null) {
                    pd.getWriteMethod().invoke(outputObject, value);
                }
            }
        } catch (InstantiationException|IllegalAccessException|InvocationTargetException|NoSuchMethodException e) {
            throw new IllegalStateException("Failed to instantiate verified class " + outputType, e);
        }
    } else {
        throw new IllegalArgumentException("Specified outputType class " + outputType + "cannot be instantiated with default constructor!");
    }
    return outputObject;
}

private List<PropertyDescriptor> getPropertyDescriptors(Class<?> outputType) {
    List<PropertyDescriptor> propertyDescriptors = null;
    try {
        propertyDescriptors = Arrays.asList(Introspector.getBeanInfo(outputType, Object.class).getPropertyDescriptors());
    } catch (IntrospectionException e) {
    }
    return propertyDescriptors;
}

private boolean isInstantiable(Class<?> clazz) {
    return ! clazz.isInterface() && ! Modifier.isAbstract(clazz.getModifiers());
}

private boolean hasDefaultConstructor(Class<?> clazz) {
    try {
        clazz.getConstructor();
        return true;
    } catch (NoSuchMethodException e) {
        return false;
    }
} 
```

# variables - 如何在 SSIS 中将数据库名称设置为变量？

> ID：10506962
> 
> 赞同：6
> 
> 时间：2012-05-08T21:41:35.143
> 
> 标签：variables, ssis, oledbconnection

在我当前的项目中，数据库名称不断变化，我不想每次都修改我的 OLE DB 源。因此，我想将其设置为变量。也就是说，在每个 OLE DB 源中，我都可以将其用作参数。但是，似乎 SSIS 不允许将数据库名称作为参数传输。那么我应该怎么做才能最小化我的变化呢？

我希望在 OLE DB Source 中执行类似这样的 SQL 语句：

```
Select OrderID
  From ?.Order 
```

而且我只需要在更改数据库名称时修改我的变量。感谢您提供任何解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:09:16.963

您需要将包配置添加到您的包中，并将连接管理器的数据库名称设置为配置之一

![在此处输入图像描述](../Images/56e5a5cd86fe2d672bfe10fb7d027b67.png)

只需右键单击控制流上的任何空白区域并选择“包配置”并按照向导进行操作。

我建议您从 XML 配置开始，因为它更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:46:07.280

给你几个建议：

*   [http://social.msdn.microsoft.com/Forums/en-us/sqlintegrationservices/thread/586bf0a7-16c1-4a24-a9b2-7b8fb0cffda9](http://social.msdn.microsoft.com/Forums/en-us/sqlintegrationservices/thread/586bf0a7-16c1-4a24-a9b2-7b8fb0cffda9)
*   [http://social.msdn.microsoft.com/forums/en-US/sqlintegrationservices/thread/b72e1b45-9a78-4865-912a-4587fa72c7f7](http://social.msdn.microsoft.com/forums/en-US/sqlintegrationservices/thread/b72e1b45-9a78-4865-912a-4587fa72c7f7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T02:10:05.943

我喜欢在连接管理器中管理 Server\Instance.Database，在任务或适配器级别管理 Schema.Table 或 View。我建议外部化连接管理器连接字符串。您可以使用包配置来执行此操作，也可以自己管理它（我使用带有 ConnectionName 和 ConnectionString 列的表，并加密 ConnectionString 列）。在我看来，SSIS 包内的硬编码数据库名称不是最佳实践。

我最近记录了一些关于 SSIS 连接管理的会话 - 一个用于[2005、2008 和 2008 R2](http://andyleonard.me/wp3/managing-ssis-connections/)；[2012 年的另一个](http://andyleonard.me/wp3/managing-connections-in-ssis-2012/)。我还录制了一个关于[在 SSIS 中管理配置](http://andyleonard.me/wp3/microtraining-ssis-package-configurations/)的会话（尽管音频很差）。

我希望这些帮助。

安迪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-13T17:58:00.767

查看这篇关于如何参数化数据库名称的精彩帖子。这是一篇关于 SSIS 中的参数和环境主题的非常详尽的博客文章。

[http://www.sqlchick.com/entries/2015/1/4/parameterizing-connections-and-values-at-runtime-using-ssis-environment-variables](http://www.sqlchick.com/entries/2015/1/4/parameterizing-connections-and-values-at-runtime-using-ssis-environment-variables)

# python - 无法从python中的函数增加全局变量

> ID：10506973
> 
> 赞同：64
> 
> 时间：2012-05-08T21:42:12.337
> 
> 标签：python

> **可能重复：**
> [在创建它们的函数之外的函数中使用全局变量](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)

我有以下脚本：

```
COUNT = 0

def increment():
    COUNT = COUNT+1

increment()

print COUNT 
```

我只想增加全局变量 COUNT，但这给了我以下错误：

```
Traceback (most recent call last):
  File "test.py", line 6, in <module>
    increment()
  File "test.py", line 4, in increment
    COUNT = COUNT+1
UnboundLocalError: local variable 'COUNT' referenced before assignment 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-08T21:44:01.260

它是一个全局变量，所以这样做：

```
COUNT = 0

def increment():
    global COUNT
    COUNT = COUNT+1

increment()

print COUNT 
```

可以在不声明全局变量的情况下访问全局变量，*但*如果要更改它们的值，则需要全局声明。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-08T21:44:40.387

这是因为全局变量不会渗入您的函数范围。您必须使用该`global`语句来强制执行此分配：

```
>>> COUNT = 0
>>> def increment():
...     global COUNT
...     COUNT += 1
... 
>>> increment()
>>> print(COUNT)
1 
```

请注意，使用全局变量是一个非常糟糕的主意——它使代码难以阅读和使用。相反，从您的函数返回一个值并使用它来做某事。如果您需要从一系列函数中访问数据，请考虑创建一个类。

还值得注意的是，`CAPITALS`它通常是为常量保留的，所以这样命名你的变量是个坏主意。对于正态变量，`lowercase_with_underscores`是首选。

# php - 将照片上传到另一个域

> ID：10506982
> 
> 赞同：0
> 
> 时间：2012-05-08T21:42:55.000
> 
> 标签：php, html, curl

我有许多不同的域，我希望用户能够选择一张照片，但是我想上传/存储在一个中央分离域上的照片。

有没有更明智的方法来做到这一点？

我考虑过使用来自其他域的 iframe（因此它们正在与所需的域交互），但还没有尝试过。

我也读过 curl 可以做到这一点。

任何其他想法/问题/疑虑...

所有建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:32:14.143

有几种方法可以处理这个问题。以下是我看到的场景。

场景 A：所有域都在同一台服务器上。使用此设置，您实际上可以通过将图像和其他文件存储在 Apache 无法访问的目录中来帮助您的服务器安全。然后，您使用 PHP 通过虚拟链接将文件提供给最终用户。Drupal 使用它的私有文件系统来做到这一点。

如果用户能够从其他域上传图像，则只需让所有域将图像写入同一目录，然后始终返回“中心”域的 URL 以检索它们。

场景 B：域存在于两台或多台服务器上。通过此设置，您真正需要做的是设置一个 API，让其他域在后台进行通信以将照片发送到核心存储库域。该域保存它并返回一个 URL 用于访问它。

无论哪种情况，您都应该真正查找 CDN 技术。它基本上是你想要完成的事情，还有更多。我还建议在任何一种情况下，您始终对所有图像使用中央域上的路径，而不是通过当前域将它们返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:47:33.813

没有理由让 iframe 或 curl 参与其中。假设所有这些域都在同一个服务器（或同一个服务器集群）上，没有什么要求使用一个域上的文件上传的文件只能从该域提供。上传表单可以对上传的文件执行任何操作，包括将其存储在可从您的中心域访问的位置。

# javascript - 在 Ember.js 中重新创建 Bootstrap 下拉功能

> ID：10506983
> 
> 赞同：4
> 
> 时间：2012-05-08T21:43:00.390
> 
> 标签：javascript, twitter-bootstrap, ember.js

**编辑：**寻找一种在单击按钮以外的任何内容时关闭下拉列表的方法：http: [//jsfiddle.net/brennan/s4JTn/](http://jsfiddle.net/brennan/s4JTn/)

我正在寻找（重新）在我的 ember 应用程序中创建 twitter 的下拉菜单。*当单击下拉列表以外*的任何内容时，我在尝试关闭下拉列表时特别遇到问题。IE。我正在寻找一种方法来向我的应用程序添加一个事件侦听器，以在单击应用程序主体时关闭我的下拉列表。

这是我的（孩子）观点。

```
categorySelect: Ember.View.extend({
    isOpen: false,
    selected: /* removed for brevity */,
    content:[
        /* removed for brevity */
        /* follows structure: {slug: 1, title: 'title', isActive: true} */
    ],

    dropdownToggle: function(e){
        var open = this.get('isOpen');
        if(open){
            this.set('isOpen', false);
        }else{
            this.set('isOpen', true);
        }
    },
    select: function(e){
        var selected = e.context;

        this.content.setEach('isActive', false);

        this.set('selected', selected);
        selected.set('isActive', true);

        this.set('isOpen', false);
    }
}) 
```

这是我的模板代码...

```
{{#view categorySelect tagName="div" class="btn-group" classBinding="isOpen:open"}}
                        <a class="btn dropdown-toggle btn-facebook btn-small" {{action "dropdownToggle" on="click"}} href="#">
                            {{selected.title}}
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu pull-right">
                            {{#each content}}
                            <li {{bindAttr class="isActive:active"}}><a href="#" {{action "select" on="click"}}>{{title}}</a></li>
                            {{/each}}
                        </ul>
                    {{/view}} 
```

我尝试将事件侦听器添加到正文中，如下所示，这是行不通的。如果我单击任何 ember 视图，Ember 似乎会停止传播。因此，如果我直接单击正文，它会起作用，但如果我单击任何视图，它就不起作用:(

```
didInsertElement: function(){
        var self = this;
        $('body').on('click', function(){
            self.set('isOpen', false);
        });
    }, 
```

寻求帮助和建议。另外，如果上面的任何代码看起来像废话，请告诉我我正在尽可能多地学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T04:16:55.727

我的设置与您大致相同，通过使用 didInsertElement 在 body 元素上创建事件侦听器来工作。

唯一的区别是我在 dropdownToggle 中有一个 e.stopPropagation() 调用：

```
dropdownToggle: function(e){
    // [removed]
    e.stopPropagation();
}, 
```

没有那条线，我无法保持下拉菜单打开，因为单击下拉菜单会传播到正文并立即将其关闭。

在我的设置中，点击视图确实会传播到正文（因此上面的代码），点击其他视图确实会触发正文上的事件侦听器。

我的猜测是你的其他视图中有一些代码阻止了对身体的传播？

[以 http://jsfiddle.net/bjaeP/](http://jsfiddle.net/bjaeP/)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:04:29.907

我修改了你的小提琴：http: [//jsfiddle.net/tV8X6/](http://jsfiddle.net/tV8X6/)

这对我有用。刚刚删除了 'dropdownToggle' 的动作助手，并为 a 标签添加了数据属性，并为你的 'categorySelect' 视图添加了 'dropdown' 类

# asp.net - 网页导航被取消 - ASP.NET & ABC PDF

> ID：10506992
> 
> 赞同：1
> 
> 时间：2012-05-08T21:43:36.253
> 
> 标签：asp.net, iis-7.5, abcpdf, windows-server-2008-x64

我正在将我的应用程序从 IIS 6.0/Windows Server 2003 移动到 IIS 7.5/Windows Server 2008 R2，它使用 WebSuperGoo ABCpdf 控件将网页转换为可打印的 PDF。

当我浏览到将网页转换为 PDF 的页面时，它会生成一个 PDF 的“导航到网络已取消”错误页面。

我使用的是 ABCpdf 的 8.1.0.9 版本，并将页面中的命名空间从 更改`WebSupergoo.ABCpdf7`为`WebSupergoo.ABCpdf`.

有没有人预料到这个问题并知道如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:35:21.377

我刚刚遇到了同样的错误，我的同事立即给出了答案。在我的情况下，该网站受到 IIS 的密码保护。

ABCpdf 不知道如何输入凭据信息，因此如果页面要求输入用户名/密码，它将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:44:35.553

我已经完全放弃了 ABC PDF，并将其替换为[Winnovative HTML to PDF Converter for .NET](http://www.winnovative-software.com/Html-To-Pdf-Converter.aspx)

我们更新了我们的可再发行许可证，因为我们公司的另一位开发人员正在使用旧版本，并提到它可以很好地替代 ABC PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:18:40.293

这也可能是服务器看不到网站 URL。这在运行 NAT 的生产服务器上是正常的。只需更改服务器上的主机文件以允许域解析。

# java - 如何使用 Java 从 ATOM 提要中提取 XHTML？

> ID：10506994
> 
> 赞同：2
> 
> 时间：2012-05-08T21:43:45.180
> 
> 标签：java, android, xml, atom-feed

我正在尝试从 RSS 提要中提取一些 XHTML，以便将其放置在 WebView 中。有问题的 RSS 提要有一个名为的标签`<content>`，内容中的字符是 XHTML。（我要配对的网站是博客提要）尝试提取此内容的最佳方法是什么？这些`<`字符使我的解析器感到困惑。我已经尝试过 DOM 和 SAX，但都不能很好地处理这个问题。

[以下是请求的 XML 示例。](http://pastebin.com/pbUB7DQF)在这种情况下，我希望内容标记内的 XHTML 基本上是一个字符串。`<content> XHTML </content>`

编辑：根据 ignyhere 的建议，我尝试过 XPath，但我仍然遇到同样的问题。[这是我的测试的 pastebin 样本。](http://pastebin.com/UFhtyg87)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T01:42:57.687

我会尝试用 XPath 攻击它。像这样的东西会起作用吗？

```
public static String parseAtom (InputStream atomIS) 
   throws Exception { 

   // Below should yield the second content block
   String xpathString = "(//*[starts-with(name(),"content")])[2]";
   // or, String xpathString = "//*[name() = 'content'][2]";
   // remove the '[2]' to get all content tags or get the count, 
   // if needed, and then target specific blocks 
   //String xpathString = "count(//*[starts-with(name(),"content")])"; 
   // note the evaluate expression below returns a glob and not a node set

   XPathFactory xpf              = XPathFactory.newInstance (); 
   XPath xpath                   = xpf.newXPath (); 
   XPathExpression xpathCompiled = xpath.compile (xpathString); 

   // use the first to recast and evaluate as NodeList 
   //Object atomOut = xpathCompiled.evaluate ( 
   //   new InputSource (atomIS), XPathConstants.NODESET); 
   String atomOut = xpathCompiled.evaluate ( 
      new InputSource (atomIS), XPathConstants.STRING); 

   System.out.println (atomOut); 

   return atomOut; 

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:11:13.020

它并不漂亮，但这是我用来解析来自 Blogger 的 ATOM 提要的（本质），它使用[XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。代码很恶心，但它来自一个真实的应用程序。无论如何，你可能会得到它的一般味道。

```
 final String TAG_FEED = "feed";

public int parseXml(Reader reader) {
    XmlPullParserFactory factory = null;
    StringBuilder out = new StringBuilder();
    int entries = 0;

    try {
        factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        xpp.setInput(reader);

        while (true) {
            int eventType = xpp.next();
            if (eventType == XmlPullParser.END_DOCUMENT) {
                break;
            } else if (eventType == XmlPullParser.START_DOCUMENT) {
                out.append("Start document\n");
            } else if (eventType == XmlPullParser.START_TAG) {
                String tag = xpp.getName();
                // out.append("Start tag " + tag + "\n");
                if (TAG_FEED.equalsIgnoreCase(tag)) {
                    entries = parseFeed(xpp);
                }
            } else if (eventType == XmlPullParser.END_TAG) {
                // out.append("End tag " + xpp.getName() + "\n");
            } else if (eventType == XmlPullParser.TEXT) {
                // out.append("Text " + xpp.getText() + "\n");
            }
        }
        out.append("End document\n");

    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    //        return out.toString();
    return entries;

}

private int parseFeed(XmlPullParser xpp) throws XmlPullParserException, IOException {
    int depth = xpp.getDepth();
    assert (depth == 1);
    int eventType;
    int entries = 0;
    xpp.require(XmlPullParser.START_TAG, null, TAG_FEED);
    while (((eventType = xpp.next()) != XmlPullParser.END_DOCUMENT) && (xpp.getDepth() > depth)) {
        // loop invariant: At this point, the parser is not sitting on
        // end-of-document, and is at a level deeper than where it started.

        if (eventType == XmlPullParser.START_TAG) {
            String tag = xpp.getName();
            // Log.d("parseFeed", "Start tag: " + tag);    // Uncomment to debug
            if (FeedEntry.TAG_ENTRY.equalsIgnoreCase(tag)) {
                FeedEntry feedEntry = new FeedEntry(xpp);
                feedEntry.persist(this);
                entries++;
                // Log.d("FeedEntry", feedEntry.title);    // Uncomment to debug
                // xpp.require(XmlPullParser.END_TAG, null, tag);
            }
        }
    }
    assert (depth == 1);
    return entries;
}

class FeedEntry {
    String id;
    String published;
    String updated;
    // Timestamp lastRead;
    String title;
    String subtitle;
    String authorName;
    int contentType;
    String content;
    String preview;
    String origLink;
    String thumbnailUri;
    // Media media;

    static final String TAG_ENTRY = "entry";
    static final String TAG_ENTRY_ID = "id";
    static final String TAG_TITLE = "title";
    static final String TAG_SUBTITLE = "subtitle";
    static final String TAG_UPDATED = "updated";
    static final String TAG_PUBLISHED = "published";
    static final String TAG_AUTHOR = "author";
    static final String TAG_CONTENT = "content";
    static final String TAG_TYPE = "type";
    static final String TAG_ORIG_LINK = "origLink";
    static final String TAG_THUMBNAIL = "thumbnail";
    static final String ATTRIBUTE_URL = "url";

    /**
    * Create a FeedEntry by pulling its bits out of an XML Pull Parser. Side effect: Advances
    * XmlPullParser.
    * 
    * @param xpp
    */
public FeedEntry(XmlPullParser xpp) {
    int eventType;
    int depth = xpp.getDepth();
    assert (depth == 2);
    try {
        xpp.require(XmlPullParser.START_TAG, null, TAG_ENTRY);
        while (((eventType = xpp.next()) != XmlPullParser.END_DOCUMENT)
        && (xpp.getDepth() > depth)) {

            if (eventType == XmlPullParser.START_TAG) {
                String tag = xpp.getName();
                if (TAG_ENTRY_ID.equalsIgnoreCase(tag)) {
                    id = Util.XmlPullTag(xpp, TAG_ENTRY_ID);
                } else if (TAG_TITLE.equalsIgnoreCase(tag)) {
                    title = Util.XmlPullTag(xpp, TAG_TITLE);
                } else if (TAG_SUBTITLE.equalsIgnoreCase(tag)) {
                    subtitle = Util.XmlPullTag(xpp, TAG_SUBTITLE);
                } else if (TAG_UPDATED.equalsIgnoreCase(tag)) {
                    updated = Util.XmlPullTag(xpp, TAG_UPDATED);
                } else if (TAG_PUBLISHED.equalsIgnoreCase(tag)) {
                    published = Util.XmlPullTag(xpp, TAG_PUBLISHED);
                } else if (TAG_CONTENT.equalsIgnoreCase(tag)) {
                    int attributeCount = xpp.getAttributeCount();
                    for (int i = 0; i < attributeCount; i++) {
                        String attributeName = xpp.getAttributeName(i);
                        if (attributeName.equalsIgnoreCase(TAG_TYPE)) {
                            String attributeValue = xpp.getAttributeValue(i);
                            if (attributeValue
                            .equalsIgnoreCase(FeedReaderContract.FeedEntry.ATTRIBUTE_NAME_HTML)) {
                                contentType = FeedReaderContract.FeedEntry.CONTENT_TYPE_HTML;
                                } else if (attributeValue
                                .equalsIgnoreCase(FeedReaderContract.FeedEntry.ATTRIBUTE_NAME_XHTML)) {
                                    contentType = FeedReaderContract.FeedEntry.CONTENT_TYPE_XHTML;
                                } else {
                                    contentType = FeedReaderContract.FeedEntry.CONTENT_TYPE_TEXT;
                                }
                                break;
                            }
                        }
                        content = Util.XmlPullTag(xpp, TAG_CONTENT);
                        extractPreview();
                    } else if (TAG_AUTHOR.equalsIgnoreCase(tag)) {
                        // Skip author for now -- it is complicated
                        int authorDepth = xpp.getDepth();
                        assert (authorDepth == 3);
                        xpp.require(XmlPullParser.START_TAG, null, TAG_AUTHOR);
                        while (((eventType = xpp.next()) != XmlPullParser.END_DOCUMENT)
                        && (xpp.getDepth() > authorDepth)) {
                        }
                        assert (xpp.getDepth() == 3);
                        xpp.require(XmlPullParser.END_TAG, null, TAG_AUTHOR);

                    } else if (TAG_ORIG_LINK.equalsIgnoreCase(tag)) {
                        origLink = Util.XmlPullTag(xpp, TAG_ORIG_LINK);
                    } else if (TAG_THUMBNAIL.equalsIgnoreCase(tag)) {
                        thumbnailUri = Util.XmlPullAttribute(xpp, tag, null, ATTRIBUTE_URL);
                    } else {
                        @SuppressWarnings("unused")
                            String throwAway = Util.XmlPullTag(xpp, tag);
                    }
                }
            } // while
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        assert (xpp.getDepth() == 2);
    }
}

public static String XmlPullTag(XmlPullParser xpp, String tag) 
    throws XmlPullParserException, IOException {
    xpp.require(XmlPullParser.START_TAG, null, tag);
    String itemText = xpp.nextText();
    if (xpp.getEventType() != XmlPullParser.END_TAG) {
        xpp.nextTag();
    }
    xpp.require(XmlPullParser.END_TAG, null, tag);
    return itemText;
}

public static String XmlPullAttribute(XmlPullParser xpp, 
    String tag, String namespace, String name)
throws XmlPullParserException, IOException {
    assert (!TextUtils.isEmpty(tag));
    assert (!TextUtils.isEmpty(name));
    xpp.require(XmlPullParser.START_TAG, null, tag);
    String itemText = xpp.getAttributeValue(namespace, name);
    if (xpp.getEventType() != XmlPullParser.END_TAG) {
        xpp.nextTag();
    }
    xpp.require(XmlPullParser.END_TAG, null, tag);
    return itemText;
} 
```

I'll give you a hint: None of the return values matter. The data is saved into a database by a method (not shown) called at this line:

```
feedEntry.persist(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:51:14.390

我可以在这里看到你的问题，这些解析器没有产生正确结果的原因是因为你的`<content>`标签的内容没有被包装到`<![CDATA[ ]]>`，我会做什么，直到我找到更合适的解决方案，我会使用快速而肮脏的技巧：

```
private void parseFile(String fileName) throws IOException {
        String line;
        BufferedReader br = new BufferedReader(new FileReader(new File(fileName)));
        StringBuilder sb = new StringBuilder();
        boolean match = false;

        while ((line = br.readLine()) != null) {
            if(line.contains("<content")){
                sb.append(line);
                sb.append("\n");
                match = true;
                continue;
            }

            if(match){
                sb.append(line);
                sb.append("\n");
                match = false;
            }

            if(line.contains("</content")){
                sb.append(line);
                sb.append("\n");
            }
        }

        System.out.println(sb.toString());
    } 
```

这将为您提供 String 中的所有内容。您可以通过稍微修改此方法来选择性地将它们分开，或者如果您不需要实际`<content>`，您也可以将其过滤掉。

# html - 3 个垂直背景图像显示为一张图像，内容位于中心图像中。中心图像“切断”并且与页脚图像不匹配

> ID：10506995
> 
> 赞同：0
> 
> 时间：2012-05-08T21:43:52.420
> 
> 标签：html, css

jsfiddle 链接：http: [//jsfiddle.net/djDWF/84/](http://jsfiddle.net/djDWF/84/)

问题是，文本/图像的内部容器（文本填充）边距/宽度正在影响中心背景图像。接触页脚的重复图像不会延伸到全高，并且会被切断，因此中心图像和页脚图像不匹配（这很难说，但是如果您在我的 jfiddle 示例中添加或删除文本，您可以看到中心图像在它与页脚相遇的地方发生变化。）。

这是一个学校项目，虽然我不需要实际做这种类型的图像背景，但我已经做到了，所以还不如继续。如果可能，我不想使用 javaScript，因为这还不是课程的一部分。

我尝试删除文本包装器并单独设置每个 p 标签的样式，但会出现相同的效果。

我还尝试了使用行高和边距的数学组合。如果我将 line-height 设置为等于右边距和底部边距，并将左边距设置为等于页脚的高度，那么效果会起作用，但是因为我的页脚图像太大，这不是一个可行的解决方案。

从数学上讲，我试图与页脚高度保持相同的比率，但这也不起作用（否则我做错了。我尝试将每个比率除以相同的数量。）

有没有办法只使用 CSS 而不必求助于表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T22:59:48.577

**所以简而言之，问题是：**您可以在页脚分隔处看到一条线，因为重复的中心背景没有完全显示它的最后一次重复，因为容器不够大。

**解决方案：**如果它不需要可变并且您知道要放入多少内容，则可以设置一个高度：实时示例 - [http://jsfiddle.net/djDWF/85](http://jsfiddle.net/djDWF/85)。

```
div#background-center{
    background:url(http://i.imgur.com/gsNFa.png) repeat-y;
    float:left;
    width:700px;
    height: 1604px; /* add this */
} 
```

显然，选择适合您最终文本的任何高度。

对于您当前的图像，如果不使用 JavaScript，就无法自动执行此操作。