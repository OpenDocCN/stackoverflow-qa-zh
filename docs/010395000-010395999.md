# StackOverflow 问答 10395000-10395999

# php - mysql php中的WHERE子句

> ID：10395010
> 
> 赞同：1
> 
> 时间：2012-05-01T07:51:07.827
> 
> 标签：php, mysql

这是mysql语句

```
 $query="SELECT * FROM `error_report` AS e
                 INNER JOIN `pages` AS p ON e.page_id=p.page_id
                WHERE `task_id` ='".$this->task_id."' AND 
                    ((google_host_fail=1
                    OR robots_noindex_nofollow=1
                    OR xrobots_noindex_nofollow=1
                    OR google_cache_fail=1
                    OR forbidden_word=1)
                    OR (google_title_fail=1 AND h1_fail=1 AND h2_fail=1 AND h3_fail=1))"; 
```

我想在这里，在有任务ID的条件下返回结果..和/或括号中的两个语句中的任何一个问题出在最后一个where语句中，我想要一个条件，如果所有这些字段。

我用类似的语句遇到了另一个 sql 问题。

```
 public function check_success()
  {
      $query="SELECT e.* FROM `error_report` AS e
           INNER JOIN `pages` AS p ON e.page_id=p.page_id
            WHERE `task_id` ='".$this->task_id."' 
                AND ((google_title_fail=0) OR (google_title_fail=1 AND h1_fail=0))";
      $result=$this->db->query($query)->result_array();
      if(count($result)>0)
      {
          return 1;
      }
     return 0;
  } 
```

我想实现上述相同..但我没有看到我的陈述有效

如何将 where 语句用方括号括起来，以便它们在两个函数中都起作用。

```
 public function findFinalResult()
  {
      if($this->check_fail())
      {
          return "Failure";
      }
     else if($this->check_success())
     {
         return "Success";
     }
     return "Warning";

  } 
```

最终结果每次都失败..？为什么 ？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:11:59.233

```
SELECT * FROM error_report AS e INNER JOIN pages AS p ON e.page_id=p.page_id WHERE task_id ='151' AND (OR google_host_fail=1 OR robots_noindex_nofollow=1 OR xrobots_noindex_nofollow=1 OR google_cache_fail=1 OR forbidden_word=1) OR (google_title_fail=1 AND h1_fail=1 AND h2_fail=1 AND h3_fail=1) 
```

由于括号开头的不必要的 OR 语句而发生错误。

```
...AND (OR google_host_fail=1 OR robots_noindex_nofollow=1
OR xrobots_noindex_nofollow=1 OR google_cache_fail=1 OR forbidden_word=1)... 
```

# tridion - 我们发布的每个页面都会在服务器上增加大约 2 MB 的内存。是配置问题吗？

> ID：10395013
> 
> 赞同：-3
> 
> 时间：2012-05-01T07:51:14.010
> 
> 标签：tridion

我们发布的每个页面都会在服务器上增加大约 2 MB 的内存。是配置问题吗？

仅供参考，它是带有旧 vbscript 代码的 SDL Tridion 2011 SP1。请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:02:04.410

不 - 这不是配置问题。

至少，也就是说，假设您看到的是内存泄漏。Tridion 在渲染过程中会缓存各种项目，并且其中一些缓存行为是可配置的。您是说每次页面渲染都会增加内存吗？而且它不会再次下降？哪个进程拥有这个内存？它是发布者服务，还是 COM+ 代理 (dllhost)，还是其他什么？

仅仅通过配置 Tridion 是不可能造成内存泄漏的。

您的事件日志中是否出现了任何可能对此有所启发的错误？不要忘记查看应用程序/系统日志以及 Tridion 日志。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T10:25:52.763

它会一直增加直到停止响应吗？还是这块内存后来被回收了？

使用 VBScript 模板不一定是个问题，但我肯定会尝试确保您的所有对象都在模板中正确发布（将它们设置为`Nothing`），并且代码审查总是一个好主意。

正如 Dave 所建议的，使用默认模板进行测试始终是一个好主意。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T11:14:58.437

我认为最重要的评论已经发表。这很可能是由于没有释放您使用过的对象`Set blah = foo`而不使用`Set blah = Nothing`释放它而导致的内存泄漏。但是，如果发布者没有继续增长到失败点，那么发布者可能只是很好地缓存了您的模板。

对于 Tridion 的早期版本，我们有一个名为 CodePlumber 的社区构建的 PowerTool（可在[SDLTridionWorld.com 的 BBX 上获得](http://www.sdltridionworld.com/community/extension_overview/powertools.aspx)）来查找此类泄漏。正如您清楚地知道 VBScript（并且该工具是使用基于 VbScript 的经典 ASP 编写的），可能值得阅读该代码或重新使用它来测试您的模板。您甚至可能希望通过将其迁移到新版本来赚取一些奖励积分[PowerTools for 2011](http://code.google.com/p/tridion-2011-power-tools/)框架来获得一些奖励积分。

我的最后一个问题是这些模板是否已从早期版本的 Tridion 中移出，如果是，是否观察到相同的内存增长。如果没有，您可能会看到在发布过程中如何处理旧模板的新问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T15:26:59.003

你没有提到内存在哪里增加，但最常见的地方是在 COM+ 对象中。

如果是这种情况，解决此问题的蛮力方法是在内存阈值处实现 COM+ 回收。阈值取决于您开始发现问题的位置以及服务器上的可用内存，但 1GB 是开始调整的好点。

这种回收应该不会影响您的用户体验。

请注意，这实际上并不能解决问题 - 它只是防止问题导致系统的其余部分瘫痪。

正如其他发帖人所提到的，解决问题可能意味着在您的旧 VBScript 代码中跟踪内存泄漏。

# wpf - WPF：如何限制 Combobox ItemsSource 中的项目数？

> ID：10395015
> 
> 赞同：0
> 
> 时间：2012-05-01T07:51:20.567
> 
> 标签：wpf, c#-4.0, collectionviewsource

我创建了一个 WPF 自定义组合框，它能够根据“搜索字符串”过滤项目。ComboBox ItemsSource 绑定到 ObservableCollection。

ObservableCollection 是“Person”对象的集合。它公开了一个属性“使用计数”。

现在，如果“搜索字符串”为空，我必须显示 ObservableCollection 中的前 30 条记录。“Person”类中的“UsageCount”属性决定前30 条记录（即必须显示UsageCount 最大的前30 条记录）。UsageCount 属性动态变化。我如何做到这一点..请帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:10:04.300

要处理您的可搜索排序集合，您可以构建自己的对象，从 ObverservableCollection 继承，重载 Item 默认属性，添加（通知）SearchString 属性，监听您的 Person 整个列表的更改，基于更改（更改 SeachString 或一个人的UsageCount）一个新的人的私人列表，并使用NotifyCollectionChanged事件来通知它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:39:03.773

这是一个想法，如果您需要过滤为什么不绑定到 ListCollectionView

```
in the View 

   ComboBox ItemsSource="{Binding PersonsView}" //instead of Persons 
```

在您的视图模型中：

```
public ListCollectionView PersonsView
{
    get { return _personsView; }
    private set
    {
        _personsView= value;
        _personsView.CommitNew();
        RaisePropertyChanged(()=>PersonsView);
    }
} 
```

一旦你填充你的列表

```
PersonsView= new ListCollectionView(_persons); 
```

在您看来，您显然有一个地方可以响应组合框的更改，您可以在其中更新过滤器，您可以将应用过滤器放在那里

```
_viewModel.PersonsView.Filter = ApplyFilter; 
```

其中 ApplyFilter 是决定显示内容的操作

```
//this will evaluate all items in the collection
private bool ApplyFilter(object item)
{
    var person = item as Person;
    if(person == null)
    {
        if(person is in that 30 top percent records)
            return false; //don't filter them out 
    }
    return true;
    }

    //or you can do some other logic to test that Condition that decides which Person is displayed, this is obviously a rough sample
} 
```

# html - CSS 展开 div 并添加滚动条

> ID：10395016
> 
> 赞同：0
> 
> 时间：2012-05-01T07:51:23.640
> 
> 标签：html, css, word-wrap

我基于这个优秀的教程实现了树渲染：

[http://thecodeplayer.com/walkthrough/css3-family-tree](http://thecodeplayer.com/walkthrough/css3-family-tree)

但是对于大树，似乎整个子树都像文本一样被“包裹”起来，这将树分裂成混乱的混乱。

请参阅此处的代码：

[http://jsfiddle.net/shkAh/](http://jsfiddle.net/shkAh/)

任何想法如何自动扩展画布并添加滚动条？我尝试了各种溢出：自动排列，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:58:24.197

您可以指定树的宽度。尝试在 CSS 中添加这样的内容： `div.tree { width: 2000px; }`

# ios - iOS泄密仪CGContextDrawPDFPage

> ID：10395017
> 
> 赞同：1
> 
> 时间：2012-05-01T07:51:25.043
> 
> 标签：ios, memory-management, cgcontextdrawpdfpage

我知道这个问题已经被问过好几次了，但我无法针对我的特殊情况解决它。CGContextDrawPDFPage 在泄漏工具中被指示为泄漏。此外，当这段代码运行时，应用程序崩溃，我确信这是由于内存问题。

```
 pdfURLDocument = [[NSURL alloc] initFileURLWithPath: [docsDir stringByAppendingPathComponent:documentName]];
    pdfDocument = CGPDFDocumentCreateWithURL((CFURLRef)pdfURLDocument);
    [pdfURLDocument release];

    page = CGPDFDocumentGetPage(pdfDocument, 1);
    CGPDFPageRetain(page);

    // determine the size of the PDF page
    CGRect pageRect = CGPDFPageGetBoxRect(page, kCGPDFMediaBox);
    pdfScaleWidth = (1/((CGFloat) gridSizeDocument)) * self.frame.size.width/pageRect.size.width;
    pdfScaleHeight = (1/((CGFloat) gridSizeDocument)) * self.frame.size.height/pageRect.size.height;
    pageRect.size = CGSizeMake(pageRect.size.width*pdfScaleWidth, pageRect.size.height*pdfScaleHeight);

    // Create a low res image representation of the PDF page        
    UIGraphicsBeginImageContext(pageRect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // First fill the background with white.
    CGContextSetRGBFillColor(context, 1.0,1.0,1.0,1.0);
    CGContextFillRect(context,pageRect);

    CGContextSaveGState(context);
    // Flip the context so that the PDF page is rendered
    // right side up.
    CGContextTranslateCTM(context, 0.0, pageRect.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // Scale the context so that the PDF page is rendered 
    // at the correct size for the zoom level.
    CGContextScaleCTM(context, pdfScaleWidth, pdfScaleHeight);
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
    CGContextSetRenderingIntent(context, kCGRenderingIntentDefault); 
    CGContextDrawPDFPage(context, page);
    CGContextRestoreGState(context);

    backgroundImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    CGPDFPageRelease(page); 
```

另外，我包括了 CGPDFPageRelease(page); 在 dealloc 方法中。此外，它可能有助于补充它适用于小型文档，但只会在大型文档上崩溃。但是，内存泄漏仍然存在于较小的内存中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T13:27:28.830

我知道这是一个老问题，但有两个观察结果：

1.  你需要释放你的`pdfDocument`：

    ```
    CGPDFDocumentRelease(pdfDocument); 
    ```

2.  但是，您不应该*释放*with `page`，`CGPDFPageRelease(page)`因为这是一个自动释放的对象并且您不拥有它（当然，除非您使用 保留它`CGPDFPageRetain`）。

如果您使用静态分析器（Xcode 的“产品”菜单上的“分析”），它应该指出这两个问题。

根本问题是`CGContextDrawPDFPage`6.0 之前的 iOS 版本中的泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:38:17.023

发布需要*在*页面被使用之后发布，而不是之前。所以首先，`CGPDFPageRelease(page)`在这个代码块中移到最后，看看是否有帮助。此外，问题可能与`CGPDFDocumentRef`存储在`pdf`变量中有关。如果上述方法没有帮助，最好说明如何获取参考，以及在何处保留和释放它。

# java - 使用 GWT 生成器/链接器将生成的工件发送到源目录

> ID：10395018
> 
> 赞同：1
> 
> 时间：2012-05-01T07:51:31.010
> 
> 标签：java, gwt, code-generation

我有一个自定义生成器，它在 gwt 中创建我自己的延迟绑定层，但我还需要在纯 java 模块中使用生成的代码。由于我的 gwt 生成器已经根据类上的注释发出“当前绑定设置”，我希望它也为我的纯 java 实例化器生成等效的样板。

我所需要的只是我的链接器阶段甚至生成器阶段将生成的文件发送到我的工作源包中{就像 android 生成器为 R.java 所做的那样}。如何任意将 java 文件发送到我的源文件夹中？我应该只使用 java.io.File 吗？我更喜欢使用像 soyc 这样的编译器标志，这样用户就可以定义他们想要生成源的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T15:33:36.267

由于没有其他人回答，我将把这个黑客扔在那里。

覆盖 StandardGeneratorContext$GeneratedUnitWithFile。寻找：

```
 FileOutputStream fos = null;
  try {
    fos = new FileOutputStream(file);
    diskCache.transferToStream(sourceToken, fos);
  } 
```

添加

```
 File newFile = rebaseFile(file); // Make a copy wherever you need 
    diskCache.transferToStream(sourceToken, fos); 
```

使用它可以根据需要重新设置保存的文件。我建议使用静态 ThreadLocal 来告诉生成器在哪里保存副本。当生成器子系统在 StandardGeneratorContext 上调用 .finish() 时调用它（通常在 GWT.create 的末尾）；您可以手动调用它，只要您没有任何待提交的 PrintWriters 可以提交。

# macos - Emacs Haskell 模式 - Speedbar 未更新

> ID：10395024
> 
> 赞同：4
> 
> 时间：2012-05-01T07:52:23.230
> 
> 标签：macos, haskell, emacs

我在 OS X 上使用 Emacs 23.4（来自[http://emacsformacosx.com/](http://emacsformacosx.com/)）。我的`~/.emacs`文件包含：

```
(load "/path/to/haskell-site-file")

(add-hook 'haskell-mode-hook 'turn-on-haskell-doc-mode)
(add-hook 'haskell-mode-hook 'turn-on-haskell-indent)

(require 'speedbar)
(speedbar-add-supported-extension ".hs")

(add-to-list 'load-path "/usr/local/share/ghc-mod-1.10.15")
(setq exec-path (append exec-path '("/usr/local/bin")))
(autoload 'ghc-init "ghc" nil t)
(add-hook 'haskell-mode-hook (lambda () (ghc-init) (flymake-mode))) 
```

当我调用 Speedbar 时，`M-x speedbar`我确实得到了一个 speedbar 框架，其中显示了 Haskell 文件的变量、导入、实例和数据类型。但是当我编辑 Haskell 文件时，速度条框架不会刷新以反映对文件的编辑。我尝试调用`Speedbar > Update`菜单，但这并没有成功。如何更新速度条框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T23:08:43.080

Speedbar 默认使用 imenu 从缓冲区中获取标签，而 imenu 非常懒惰地重新解析缓冲区。此外，一旦 speedbar 有标签列表，它就会继续使用该列表，直到您“关闭”文件。下次您打开文件以查看标签时，它将从 imenu（或您用于标签的任何工具）重新获取标签。

由于 imenu 比 speedbar 更懒惰，你可以使用 speedbar shift-click 重新打开文件，speedbar 会强制 imenu 重新解析。

# .net - 无限循环似乎是由交叉依赖视图引起的

> ID：10395025
> 
> 赞同：0
> 
> 时间：2012-05-01T07:52:23.323
> 
> 标签：.net, wpf

在我的图形应用程序中，我有一个将所有页面导出为图像的功能，我有这个异常，我不知道从哪里开始寻找解决它：

```
An infinite loop appears to have resulted from cross-dependent views. 
```

任何人都可以帮助我了解这个例外吗？如何解决？或者是什么导致了这样的崩溃？

这是堆栈跟踪：

```
 at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
   at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
   at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at KETAB.KStudio.UI.SingleInstanceManager.OnStartup(StartupEventArgs e) in C:\Users\KETAB\Desktop\KStudio.V3.0.0_Official_Before_Gitex\KETABStudio\App.xaml.cs:line 555
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
   at KETAB.KStudio.UI.SingleInstanceManager.Main(String[] args) in C:\Users\KETAB\Desktop\KStudio.V3.0.0_Official_Before_Gitex\KETABStudio\App.xaml.cs:line 536
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:49:33.243

好吧，没有任何代码可以看，但我还是会试一试。

第一步是减少视图之间的相互依赖。也许有一个他们都看的模型，而不是让他们互相看。

另一个步骤可能是使更新代码仅在需要时进行更新。有时，当我有一个控件更改另一个控件并且我在另一个控件更改时输入逻辑来更新它时，我发现我的更新内容在不需要更改时被调用。例如，如果某些事件导致控件的大小调整，您可能希望计算新值，然后仅在它们实际更改时才更改大小属性。（即：与新值不同）

希望这可以帮助...

# php - 如何制作记录集（类别和子类别）

> ID：10395032
> 
> 赞同：0
> 
> 时间：2012-05-01T07:52:41.180
> 
> 标签：php, mysql, sql

我有 2 张桌子：

`categories (id, categoryName)`, `menu (id, menuname, category_id)`

我想显示所有类别，在`menu`. 并且每次`categoryName`显示 5之后`menuname`。

是否可以在一个记录集中执行此操作？

谢谢！

这些是我的 2 个记录集：

```
$query = "select a.id, a.name from categories as a where a.id in (select count(*) from menu as b on b.category_id = a.id)";
$result = mysql_query($query);
while ($row = mysql_fetch_array($result)) {
    echo $row['name'];
    $category_id = intval($row['id']);
    $query = "select menuname from menu where category_id = $category_id limit 0, 5";
    $resultmenu = mysql_query($query);
    while ($rowmenu = mysql_fetch_array($resultmenu)) {
        echo $rowmenu['menuname'];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:03:20.117

如上所述，我不确定“*在每个 categoryName 之后显示 5 个菜单名*”是什么意思。

但是要按字母顺序显示所有类别/菜单名称的列表，您可以使用以下内容：

```
SELECT      C.categoryName,
            M.menuname
FROM        categories C
INNER JOIN  menu M ON M.category_id = C.id
ORDER BY    C.categoryName,
            M.menuname 
```

**更新**：

目前，您的第一个查询最多只会返回一行。子查询当前正在计算`menu`行数，然后该数字用于从类别表中提取一行，这不是您想要的。

以下查询连接到`menu`表以确保至少存在一个项目，然后按`category`字段分组以确保每个项目仅返回一次：

```
$query = "select a.id, a.name from categories as a inner join menu as b on b.category_id = a.id group by a.id, a.name" 
```

**更新 2**

啊对不起，我现在明白了。不，我认为不可能在单个查询中实现您想要的。即使有可能我也不会推荐它。查看您的代码，您只想`categoryName`为每组菜单项打印一次。如果您能够像这样在一个结果集中拉回`categoryName`和项目：`menuname`

```
| categoryName | menuname |
---------------------------
| category1    | menu1    |
| category1    | menu2    |
| category1    | menu3    |
| category2    | menu4    | 
```

在遍历结果时，您需要手动检查`categoryName`更改的时间，以便为该组`menuname`项目打印一次。

# eclipse - 在交叉表 BIRT 中展开和折叠（钻孔）

> ID：10395034
> 
> 赞同：0
> 
> 时间：2012-05-01T07:52:57.133
> 
> 标签：eclipse, birt, crosstab, data-cube

我已经实现了一个数据立方体，显示每年（行）的人口。顶级分组在大陆上，下一级分组是大陆。我想在每个大陆上放置一个 + 符号，单击时会按国家/地区划分人口，然后在州一级进行另一级别的分组，依此类推。是否有可能实现这是 BIRT。

[Birt Tool的Cross Tab中的动态数据](https://stackoverflow.com/questions/9936650/dynamic-data-in-cross-tab-of-birt-tool)尚未被接受，如果我的问题重复，请见谅。

问候，

南迪什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:29:10.580

根据[这个 Eclipse 论坛帖子](http://www.eclipse.org/forums/index.php/mv/msg/81843/254153/0721fcbf90e6161c6e591e524db0f57b/#msg_254153)，交叉表中的向下钻取/向下钻取功能应该已添加到 BIRT 2.3.1 - 但是，我在更新的 BIRT 版本中没有看到它。它在[BIRT Data Analyzer](http://www.birt-exchange.com/be/products/birt-user-experience/analytics/features/birt-data-analyzer/)中可用，尽管这不是 BIRT 社区版的一部分。

# objective-c - 在 iPhone/iPad 上获取 ARP 表

> ID：10395041
> 
> 赞同：6
> 
> 时间：2012-05-01T07:54:10.163
> 
> 标签：objective-c, ios, xcode, arp

我正在尝试像[这里](https://stackoverflow.com/questions/2189200/get-router-mac-without-system-call-for-arp-in-objective-c "https://stackoverflow.com/questions/2189200/get-router-mac-without-system-call-for-arp-in-objective-c")一样在我的 iPad 上获取 ARP 条目。

编译代码以在我的 iPad（而不是模拟器）上运行时，我收到了缺少标题错误消息。您可以通过将头文件复制到本地项目中来解决它们，如本文所述[。](https://stackoverflow.com/questions/2258172/how-do-i-query-the-arp-table-on-iphone "https://stackoverflow.com/questions/2258172/how-do-i-query-the-arp-table-on-iphone")

问题出在线路上

> sdl = (struct sockaddr_dl *)(sin + 1);

在这段代码中：

```
-(NSString*) ip2mac: (char*) ip 
{ 

    int expire_time, flags, export_only, doing_proxy, found_entry; 

    NSString *mAddr = nil; 
    u_long addr = inet_addr(ip); 
    int mib[6]; 
    size_t needed; 
    char *host, *lim, *buf, *next; 
    struct rt_msghdr *rtm; 
    struct sockaddr_inarp *sin; 
    struct sockaddr_dl *sdl; 
    extern int h_errno; 
    struct hostent *hp; 

    mib[0] = CTL_NET; 
    mib[1] = PF_ROUTE; 
    mib[2] = 0; 
    mib[3] = AF_INET; 
    mib[4] = NET_RT_FLAGS; 
    mib[5] = RTF_LLINFO; 
    if (sysctl(mib, 6, NULL, &needed, NULL, 0) < 0) 
        err(1, "route-sysctl-estimate"); 
    if ((buf = malloc(needed)) == NULL) 
        err(1, "malloc"); 
    if (sysctl(mib, 6, buf, &needed, NULL, 0) < 0) 
        err(1, "actual retrieval of routing table"); 

    lim = buf + needed; 
    for (next = buf; next < lim; next += rtm->rtm_msglen) { 
        rtm = (struct rt_msghdr *)next; 
        sin = (struct sockaddr_inarp *)(rtm + 1); 
        sdl = (struct sockaddr_dl *)(sin + 1); 
        if (addr) { 
            if (addr != sin->sin_addr.s_addr) 
                continue; 
            found_entry = 1; 
        } 
        if (nflag == 0) 
            hp = gethostbyaddr((caddr_t)&(sin->sin_addr), 
                               sizeof sin->sin_addr, AF_INET); 
        else 
            hp = 0; 
        if (hp) 
            host = hp->h_name; 
        else { 
            host = "?"; 
            if (h_errno == TRY_AGAIN) 
                nflag = 1; 
        } 

        if (sdl->sdl_alen) { 

            u_char *cp = LLADDR(sdl); 

            mAddr = [NSString stringWithFormat:@"%x:%x:%x:%x:%x:%x", cp[0], cp[1], cp[2], cp[3], cp[4], cp[5]]; 

        //  ether_print((u_char *)LLADDR(sdl)); 
        } 
        else 

            mAddr = nil; 

    } 

    if (found_entry == 0) { 
        return nil; 
    } else { 
        return mAddr; 
    } 

} 
```

它给出以下错误消息：

**指向不完整类型'struct sockaddr_inarp*'的指针的算术**

当您为 iPad 模拟器编译代码时，一切运行良好。

有谁知道如何解决这个问题？[这里](http://www.iphonedevsdk.com/forum/iphone-sdk-development/76712-help-implementing-arp-iphone.html#post428871 "http://www.iphonedevsdk.com/forum/iphone-sdk-development/76712-help-implementing-arp-iphone.html#post428871")提出了一个类似的问题（但未解决）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:17:47.177

导入 <netinet/if_ether.h> 后，您应该对其进行编辑并更改行

```
#include <net/if_arp.h> 
```

至

```
#include "if_arp.h" 
```

然后在您的项目中导入 <net/if_arp.h> 。这应该可以解决该错误。

无论如何，您需要导入以编译您发布的代码的标头是：

```
#include "if_ether.h"
#include "route.h"
#include "if_arp.h"
#include "if_dl.h" 
```

希望这会有所帮助=)

编辑：

您需要“将文件添加到项目”，而不是简单地使用#import 或#include 导入它。您可以从以下链接找到以上文件： [“netinet”](http://opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/netinet/) [下的文件 “net”下的文件](http://opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T07:34:07.583

```
#include <net/ethernet.h> 
```

而不是弄乱原始标题。此处的更多信息：[函数“ether_ntoa”的隐式声明在 C99 中无效](https://stackoverflow.com/questions/11245280/implicit-declaration-of-function-ether-ntoa-is-invalid-in-c99)

# ios - UIView transitionFromView 在容器中没有动画

> ID：10395042
> 
> 赞同：2
> 
> 时间：2012-05-01T07:54:15.123
> 
> 标签：ios, animation, uiview, transition

我正在使用 UIView transitionFromView 在两个视图之间切换。我目前正在 UIView 子类中执行以下操作：

```
UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"img.png"]];

imgView.frame = CGRectMake(0, 0, 100, 100);

UIView *detailView = [[UIView alloc] initWithFrame:imgView.frame];
detailView.backgroundColor = [UIColor redColor];

detailView.frame = imgView.frame;

[self addSubview:imgView];

[UIView transitionFromView:imgView toView:detailView duration:1.0 
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                completion:^(BOOL finished){

                }
 ]; 
```

这按预期工作。过渡按其应有的方式执行。问题是我需要在包含先前代码的视图的子视图中进行转换。所以，我把所有东西都放在一个容器中，并尝试对其进行动画处理：

```
UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"img.png"]];

imgView.frame = CGRectMake(0, 0, 100, 100);

UIView *container = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 500, 500)];
UIView *detailView = [[UIView alloc] initWithFrame:imgView.frame];
detailView.backgroundColor = [UIColor redColor];

detailView.frame = imgView.frame;

[container addSubview:imgView];

[self addSubview:container];

[UIView transitionFromView:imgView toView:detailView duration:1.0 
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                completion:^(BOOL finished){

                }
 ]; 
```

但在这种情况下，动画不会运行。相反，我只看到没有过渡的最终结果。谁能帮我弄清楚这两种情况有何不同？

这里描述了同样的问题，但我认为现有的“解决方案”不足以完全描述这种行为。 [使用 transitionFromView 和 transitionWithView 的过渡行为](https://stackoverflow.com/questions/3602434/transition-behavior-using-transitionfromview-and-transitionwithview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T16:57:28.493

考虑使用 dispatch_after 和 performSelector:withObject:afterDelay 将动画延迟到另一个运行循环：

或在添加子视图后使用 [CATransaction flush]

更多信息请访问[http://andrewmarinov.com/working-with-uiviews-transition-animations/](http://andrewmarinov.com/working-with-uiviews-transition-animations/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:15:34.367

我不知道为什么第一个有效，但这不是使用此方法的正确方法。被转换离开的视图将从层次结构中移除，并且被转换到的视图将作为动画的一部分添加。所以跳过添加 detailView （或使用[UIViewAnimationOptionShowHideTransitionViews](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/c/econst/UIViewAnimationOptionShowHideTransitionViews)选项。

# apache2 - Apache服务器——多个目录，不同的错误日志

> ID：10395043
> 
> 赞同：6
> 
> 时间：2012-05-01T07:54:25.907
> 
> 标签：apache2, error-log

我在 /var/www 中有两个目录（例如 /var/www/app1 和 /var/www/app2），我希望将它们的错误日志发送到不同的文件。两者都在同一个域下，所以我*认为*我不能将它们放在不同的虚拟主机下。因此，例如，我将访问它们：

[http://localhost/app1](http://localhost/app1)

[http://localhost/app2](http://localhost/app2)

我遇到了这个页面：

[为Apache中的不同子目录生成访问日志](https://stackoverflow.com/questions/1460757/generate-access-logs-for-different-subdirectories-in-apache)

其解决方案非常适合访问日志。但是，“env”参数似乎不适用于 ErrorLog 指令。

在这个“发现”之前，我正在研究这个，这似乎是错误的：

```
<VirtualHost *:80>
  ServerAdmin ray@localhost

  DocumentRoot /var/www/app1

  <Directory />
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order deny,allow
    allow from all
  </Directory>

  ErrorLog ${APACHE_LOG_DIR}/app1/error.log

  LogLevel warn

  CustomLog ${APACHE_LOG_DIR}/app1/access.log combined
</VirtualHost> 
```

我对我应该做什么有点迷茫。也就是说，如果有某种方法可以让 ErrorLog 工作，或者我是否应该继续尝试为每个目录配置虚拟主机。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T11:07:02.650

为什么要在上下文中设置`Directory`选项？使用代替`/``VirtualHost``<Directory /var/www/app1>``<Directory />`

由于[Apache ErrorLog 指令文档](http://httpd.apache.org/docs/current/mod/core.html#errorlog)，它的上下文是`server config, virtual host`- 这意味着只能为整个服务器或为 a 定义 ErrorLog `VirtalHost`，而不是为 a `Directory`。所以如果你想将不同的日志发送到不同的文件，尝试使用`SetEnvIf`设置一个Env变量。根据您所在的目录，它应该类似于`SetEnvIf Request_URI ^\/a1\/ a1`and `SetEnvIf Request_URI ^\/a2\/ !a1`。然后根据`a1`环境变量写入日志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-25T19:39:16.217

为每个目录设置自定义 ID，您可以按目录分隔日志，如下所示：

```
<Directory app1>
    SetEnv app1
</Directory>
<Directory app2>
    SetEnv app2
</Directory>
CustomLog ${APACHE_LOG_DIR}/site1.log combined env=app1
CustomLog ${APACHE_LOG_DIR}/site2.log combined env=app2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-01T13:03:32.190

最后我做到了，首先为每个文件夹创建内部子域，然后使用 proxypass 传递子域内容。

启用 apache 模组：

```
a2enmod authz_core dir proxy proxy_http 
```

**/etc/hosts**

```
127.0.0.1       localhost
127.0.0.1       a.localhost
127.0.0.1       b.localhost 
```

**/etc/apache2/sites-available/default.conf**

```
<VirtualHost *:80>
        ServerName localhost
        ServerAdmin fake@mail.com
        DocumentRoot "/dev/null"

        ProxyPass /a http://a.localhost/
        ProxyPassReverse /a http://a.localhost/
        ProxyPass /b http://b.localhost/
        ProxyPassReverse /b http://b.localhost/

        LogLevel debug

        ErrorLog ${APACHE_LOG_DIR}/default-error.log
        CustomLog ${APACHE_LOG_DIR}/default-access.log combined

</VirtualHost> 
```

**/etc/apache2/sites-available/a.conf**

```
<VirtualHost *:80>
        ServerName a.localhost
        ServerAdmin fake@mail.com
        DocumentRoot "/Publikoa/a"

        <Directory "/Publikoa/a">
                DirectoryIndex index.html
                Require all granted
        </Directory>

        LogLevel debug

        ErrorLog ${APACHE_LOG_DIR}/a-error.log
        CustomLog ${APACHE_LOG_DIR}/a-access.log combined

</VirtualHost> 
```

**/etc/apache2/sites-available/b.conf**

```
<VirtualHost *:80>
        ServerName b.localhost
        ServerAdmin fake@mail.com
        DocumentRoot "/Publikoa/b"

        <Directory "Publikoa/b">
                DirectoryIndex index.html
                Require all granted
        </Directory>

        LogLevel debug

        ErrorLog ${APACHE_LOG_DIR}/b-error.log
        CustomLog ${APACHE_LOG_DIR}/b-access.log combined

</VirtualHost> 
```

启用网站：

```
a2ensite default a b 
```

重启阿帕奇：

```
/etc/init.d/apache2 restart 
```

# mongodb - 分片现有集合 - MongoDB

> ID：10395044
> 
> 赞同：1
> 
> 时间：2012-05-01T07:54:31.657
> 
> 标签：mongodb, sharding

我在farm1-server1 上有一个mongo 集合，我设法将它复制到farm2-server1 - db 路径是/db/data。farm2-server1 是 3 台服务器的一部分，我想对我刚刚在所有 3 台服务器之间复制的集合进行分片。为此，我停止了 server1 上的复制，启动了 mongod（在端口 27017 上）并将其指向我复制的集合（/db/data）——我还添加了指令：configsvr = true。

我启动了 mongos 并添加了以下指令 configdb = server1:27017

然后我使用以下指令在服务器 1-3 的每一台服务器上启动分片进程（mongod）：shardsvr = true

我希望对集合进行分片，但发生的情况是我复制的旧集合在此配置中无法识别，因此无法分片。

我已经读过现有的集合可以被分片，所以我在这里一定做错了。任何帮助表示赞赏。我可以提供配置文件是必需的。

谢谢，诺姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:24:19.480

听起来你错过了一些步骤 - 你需要

1.  添加分片
2.  启用分片
3.  对集合进行分片

[http://www.mongodb.org/display/DOCS/Configuring+Sharding#ConfiguringSharding-ConfiguringtheShardCluster](http://www.mongodb.org/display/DOCS/Configuring+Sharding#ConfiguringSharding-ConfiguringtheShardCluster)

# iphone - 从 coredate 加载后步进器值重置

> ID：10395046
> 
> 赞同：0
> 
> 时间：2012-05-01T07:54:40.770
> 
> 标签：iphone, ios, xcode, ipad, uistepper

我正在构建一个 UITabledetail 视图，其中包含一个步进器和一个 UILabel。

uilabel 将显示按下的步进器数量。

当我使用核心数据来保存 uilabel 的值时，我的问题就来了。例如 uilabel 的最终值为 30。

当我加载数据时，uilabel 显示为 30，但是当我再次按下步进器时，uilabel 再次重置为 1。

有没有办法让步进器根据我保存的值继续计数？

下面是我的代码。

```
- (IBAction)stepperValueChanged:(id)sender 
{
    double stepperValue = ourStepper.value;
    self.label.text = [NSString stringWithFormat:@"%.f", stepperValue];

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:04:36.387

```
- (IBAction)stepperValueChanged:(id)sender 
{

    NSString *tempString = [NSString stringWithFormat:@"30"];// you can pass here whatever data(stepper value) that you retrieve from core data...
    double steppervalue = [tempString doubleValue];

    double stepperValue = ourStepper.value+steppervalue;
    self.label.text = [NSString stringWithFormat:@"%.f", stepperValue];

  } 
```

希望对你有帮助..

# android - 我的所有资源都在 .apk 文件中重复

> ID：10395048
> 
> 赞同：0
> 
> 时间：2012-05-01T07:55:03.483
> 
> 标签：android, eclipse, resources, apk

我最近想知道为什么我的 Android APK 文件大约是它使用的资源文件夹的两倍。我解压了 apk，发现 Eclipse 复制了所有资源！

通常所有内容都存储在我的项目文件夹的“资产”子文件夹中（该文件夹包含纹理、声音文件等）。但是 Eclipse 将所有这些文件直接复制到了 apk 的根文件夹中。所以所有文件都是重复的，最终文件大小是应有大小的两倍。

我已经尝试删除资产，清理项目并重新添加资产。仍然会发生同样的事情。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:01:52.973

这里有一些文章可能对您有所帮助。

看看[这里](https://stackoverflow.com/questions/9300916/raw-assets-duplicated-when-building-apk)和[这里](https://gamedev.stackexchange.com/questions/27598/android-apk-export-duplicating-libgdx-assets-folder)。

希望这会有所帮助）

# c - C error: array type has incomplete element type

> ID：10395054
> 
> 赞同：3
> 
> 时间：2012-05-01T07:55:43.043
> 
> 标签：c, gcc, ubuntu, struct

I'm trying to compile a program in Ubuntu 11.04 that works well in Windows but it gives the above error. I have added a comment to the line that is causing the error. Here's the code:

```
route_input() {
    int num_routes;//Variable to act as the loop counter for the loop getting route details
    int x;

    char route_id[3];
    char r_source[20];
    char r_destination[20];
    int r_buses;

    printf("Please enter the number of routes used: \n");
    scanf("%d", &num_routes);
    char routes_arr[num_routes][10];//An array to hold the details of each route

    printf("\nNumber of routes is %d\n", num_routes);

    struct route r[num_routes];//An array of structures of type route (This line causes the error)

    fflush(stdin);

    for (x = num_routes; x > 0; x--) {
         printf("\nEnter the route number: ");
         scanf("%s", r[x].route_num);
         printf("Route number is %s", r[x].route_num);

         printf("\nEnter the route source: ");
         fflush(stdin);
         scanf("%s", r[x].source);
         printf("Source = %s", r[x].source);

         printf("\nEnter the route destination: ");
         fflush(stdin);
         gets(r[x].destination);
         printf("Destination = %s", r[x].destination);

         printf("\nEnter the number of buses that use this route: ");
         scanf("%d", &r[x].num_of_buses);
         printf("Number of buses = %d", r[x].num_of_buses);

    }

    for (x = num_routes; x > 0; x--) {
        printf("\n\n+++Routes' Details+++\nRoute number = %s, Source = %s, Destination = %s, Number of buses for this route = %d\n", r[x].route_num, r[x].source, r[x].destination, r[x].num_of_buses);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:40:25.483

The error message is caused because you have an incomplete declaration of `struct route`. i.e. somewhere you have a line that says

```
struct route; 
```

with no specification of what is in the struct. This is perfectly legal and allows the compiler to know the struct exists before it knows what is in it. That allows it to define pointers to items of type `struct route` for opaque types and for forward declarations.

However, the compiler cannot use an incomplete type as the elements for an array because it needs to know the size of the struct to calculate the amount of memory needed for the array and to calculate offsets from indexes.

I'd say you have forgotten to include the header that defines your route struct. Also, it's possible that Ubuntu has an opaque type called `struct route` in its library already, so you may have to rename your struct to avoid a clash.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:40:09.910

You need to include the header file that defines `struct route`.
I'm not sure which header this is, and it may differ between Linux and Windows.

In Linux, `net/route.h` defines `struct rtentry`, which may be what you need.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:36:40.483

As far as I know C (at least GCC won't) doesn't allow you to have variables as array indexes, that's why it's producing that error. Try a constant instead.

It doesn't happen with multi dimensional arrays because row is not complusary in multi dim arrays but in case of single dim arrays array index must be a variable.

Some compilers do allow such behaviour that's why it isn't producing an error in windows.

# jquery - iOS 版 Safari 上的元素损坏

> ID：10395056
> 
> 赞同：0
> 
> 时间：2012-05-01T07:56:04.860
> 
> 标签：jquery, css, ios

我在 iOS 的以下页面上遇到了一个非常令人沮丧的错误：http: [//makethemostof.co.uk/test.html](http://makethemostof.co.uk/test.html)

右上角有一个标签，上面写着“购物袋（空）”，在 iOS 上消失了。我试图用 Firebug for iPad 诊断问题，但似乎找不到原因。我怀疑这与元素是 position:fixed 的事实有关，但我真的不确定。

有谁知道为什么当 Mac 上的 webkit（以及据我所见的 Windows）运行良好时，iOS 会以这种方式运行？我错过了什么？

顺便说一句，还有一些 jQuery 作用于页面的那个区域（大约第 100 行），这也可能导致问题的原因。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:05:52.930

它的样式迫使它位于屏幕的右侧。

```
#bag-overview, #bag-close
...
margin: 0 0 0 720px;
... 
```

导致问题将其发送到右侧。将其更改为更小的东西以查看栏，您必须从那里决定将其放置在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:48:27.863

这是#bag 元素溢出的问题。我已将溢出设置为现在可见，并直接对包含的元素进行更改以隐藏它们。奇怪的是，这适用于所有其他浏览器 - 在我看来，iOS 似乎对溢出有正确的解释：隐藏。

# java - 使用 sleep 功能时出现错误异常

> ID：10395059
> 
> 赞同：0
> 
> 时间：2012-05-01T07:56:29.500
> 
> 标签：java, android

我想在播放旋律时将我的应用程序延迟一段时间，并在完成后更改图像视图上的图像。

```
public void addListenerOnButtons() {    
    harmonicaTecknad= (ImageView)this.findViewById(R.id.harmonicatecknadspelautblas);
    harmonicaTecknad.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {            
        harmonicaTecknad.setImageResource(R.drawable.harmonicatecknadtryckrood);
        RunAnimations();
        utblas=MediaPlayer.create(SpelaTonerActivity.this, R.raw.utblas4);
        utblas.start();
        Thread timer = new Thread(){
            public void run() {
                try { // The delay should occur here
                    sleep(utblas.getDuration());
                } catch(InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    harmonicaTecknad.setImageResource(R.drawable.harmonicatecknad1);
                }
            }
        };
        timer.start();
    }
} 
```

我得到一个异常错误，显然我无法在线程内设置图像，那么我应该在哪里设置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:07:18.997

这一切都在[android 文档](http://developer.android.com/resources/articles/painless-threading.html)中通过示例进行了详细解释：

> Android 提供了几种从其他线程访问 UI 线程的方法。您可能已经熟悉其中的一些，但这里有一个完整的列表：
> 
> *   Activity.runOnUiThread（可运行）
> *   View.post（可运行）
> *   View.postDelayed（可运行，长）
> *   处理程序
> 
> [...]
> 
> 不幸的是，这些类和方法也可能使您的代码更复杂，更难阅读。当您实施需要频繁更新 UI 的复杂操作时，情况会变得更糟。
> 
> 为了解决这个问题，Android 1.5 及更高版本的平台提供了一个名为 AsyncTask 的实用程序类，它简化了需要与用户界面通信的长时间运行任务的创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:40:36.253

在 UI 线程上编写`harmonicaTecknad.setImageResource(R.drawable.harmonicatecknad1);`代码，因为您不能将 UI 代码写入非 UI 线程。

所以只需将上面的代码行替换为

```
runOnUiThread(new Runnable()
{
    @Override
    public void run()
    { 
            harmonicaTecknad.setImageResource(R.drawable.harmonicatecknad1);
    }
}); 
```

如果您仍然遇到错误，那么出于测试目的只需更改`sleep(utblas.getDuration());`sleep(1000);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:16:12.613

正如其他答案所说，您需要从 UI 线程设置图像。但是，虽然您可以使用`Thread.sleep()`，但通常应避免将 sleep 用于逻辑。当事情发生时，大多数类都有一些方法来获取回调 - 例如在你的情况下你可以使用`MediaPlayer.OnCompletionListener`. 您注册了来自媒体播放器的回调，并且该回调将始终在 UI 线程上。这是它的样子：

```
public void addListenerOnButtons() {    
    harmonicaTecknad= (ImageView)this.findViewById(R.id.harmonicatecknadspelautblas);
    harmonicaTecknad.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {            
      harmonicaTecknad.setImageResource(R.drawable.harmonicatecknadtryckrood);
      RunAnimations();
      utblas=MediaPlayer.create(SpelaTonerActivity.this, R.raw.utblas4);
      utblas.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
          @Override
          public void onCompletion(MediaPlayer mp) {
              harmonicaTecknad.setImageResource(R.drawable.harmonicatecknad1);
          }
      };
      utblas.start();
    }
} 
```

# javascript - 当服务器没有响应时如何处理ajax调用

> ID：10395060
> 
> 赞同：6
> 
> 时间：2012-05-01T07:56:41.427
> 
> 标签：javascript, jquery, html, ajax

我有一些数据的 ajax 调用（使用 jQuery）。在用户单击“提交”（并且已发送 ajax 调用）后，我将显示“请稍候...”消息，该消息会禁用所有内容，直到请求返回（因此用户不会双击或单击其他内容和混乱事情了）。

当出现任何类型的错误时，它的效果很好 - “请稍候......”消失了，我正在向用户显示出了什么问题。

**但是如果服务器因为通信错误而没有返回任何东西会发生什么？**

我找到的解决方案是**为“请稍候..”**消息设置 10 秒的超时时间，然后它会消失并显示“通信失败”的错误。我假设如果服务器在 10 秒后没有响应，那么它根本不会响应 - 但这是错误的假设。

**问题是**- 我如何确定 20 秒后服务器不会返回一些东西？可能发生的场景是用户点击提交 --> 10 秒后他收到错误消息 --> 5 秒后服务器响应并混淆用户

如何确保在隐藏“请稍候..”消息后，服务器不会弹出任何内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:00:15.500

你可以处理这样的事情

```
if ( request.readyState == 4 ){  // 4 is "complete" 
  if ( request.status == 200 ){
    // HTTP OK, carry out your normal Ajax processing
    // ... 
  }else{
    // something went wrong, report the error
    error( "HTTP "+request.status+".  An error was »
             encountered: "+ request.statusText );
  }
} 
```

（或者）

```
$.ajax({
    type: "post", 
    url: "somepage.html",
    success: function (data, text) {
        //...
    },
    error: function (request, status, error) {
        alert(request.responseText);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T09:39:46.873

当您向服务器发送请求时。除非服务器响应，否则打开连接并保持打开状态。
1.如果由于服务器端的某些错误无法响应，则通常会发回 5xx 的响应代码（503）
2.如果由于某些连接问题，连接过早终止，那么 jquery 也会将其视为错误。

1.因此，如果您想等待服务器发送请求或连接终止（之前发生过），那么您可以`completed`使用`jquery ajax`.
2.如果您处于服务器即使在 20 秒后也没有响应的情况，并且您认为它现在应该已经响应，请使用超时。
3.最后，如果您的问题是您使用的是某种定制的（手工制作的 http 服务器），即使遇到错误也不会结束请求，那么至少对其进行足够的定制，以便它发回一些响应代码（因为这个是请求和响应的 HTTP 模型）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T09:31:04.823

*   触发请求时生成唯一令牌，
*   保留有效令牌列表，
*   当请求超时/失败时删除令牌，
*   在执行成功/错误回调之前检查令牌是否仍然有效。

当您需要发送频繁的重复请求（例如自动完成/结果过滤）并且只有最新的处理程序应该触发时，可以调整相同的模式。

# javascript - 如何使缺失数据的highcharts默认为0

> ID：10395061
> 
> 赞同：49
> 
> 时间：2012-05-01T07:57:10.097
> 
> 标签：javascript, highcharts

我有一个间隔 1 分钟的时间序列。我想在缺失点为 0 的图表中显示它。

我找到了 xAxis.ordinal 并关闭了它，它显示了正确间隔的时间序列。问题是它直接在点之间画线，而对于缺失的数据没有变为 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T07:30:11.040

一种方法是预处理数据，替换`null`为`0`：

```
var withNulls = [null, 12, 23, 45, 3.44, null, 0];
var noNulls = withNulls.map(function (item) {
    return (item === null) ? 0 : item;
}); 
```

保存在 jsfiddle 上的示例：http: [//jsfiddle.net/7mhMP/](http://jsfiddle.net/7mhMP/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T09:18:42.883

我已经彻底搜索了 HighCharts 的[API 参考](http://api.highcharts.com/highcharts)，但他们不提供该选项。他们提供的是当`null`数据介于两者之间时禁用点连接的选项（仅限折线图和面积图）：

```
var chart = new Highcharts.Chart({
    plotOptions: {
        line: {
            connectNulls: false
        }
    }
}); 
```

这是根据 API 的默认设置，所以我不确定为什么您的数据确实与两者之间的`null`值连接。也许他们最近更改了默认设置？

![缺少数据的 HighChart 示例](../Images/584b73b66bc1375e3ff187895a2dfd4d.png)

我觉得这是您数据的一个很好的表示，因为默认`null`为`0`似乎具有误导性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-20T15:08:57.640

您必须将丢失的数据填充为 0。因为 highchart 不知道 xAxis 间隔。

如果你有一个间隔为 1**分钟**的时间序列，你应该将每个缺失的**分钟**数据设置为 0；如果您有一个间隔为 1**天**的时间序列，则应将每个缺失**的日期**数据设置为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-28T08:54:38.310

我有同样的问题，我的理解是你应该将数据库中的数据结构设置为 VARCHAR 并将默认值设置为 null，这样在没有数据的地方它就变为 NULL。然后它接受空值，highchart 不显示并将缺失区域与`null`值连接。
此外，您必须接收数据`NULL`并且不要将它们更改为`''`.
看到这个工作示例：

```
var chart = new Highcharts.Chart({

    chart: {
        defaultSeriesType: 'spline', // use line or spline
        renderTo: 'container1'
    },

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [9, 4,null, 2, 1, 0, 6, 5, 4, 1, 6, 4]
    }]

}); 
```

[这](http://jsfiddle.net/2rNzr/)`null`是使用和使用两个不同图表的小提琴`''`

**更新：**
如果您使用 parseINT 来推送数据，您应该记住这`parseINT(NULL)`给了您`NAN`因此对于此错误尝试手动推送 NULL，如下所示：

```
var val = parseInt(rows[i]);
if (isNaN(val))
{
  val = null;
  result.push(val);
} 
```

# usb - USB HID 设备检测

> ID：10395062
> 
> 赞同：1
> 
> 时间：2012-05-01T07:57:24.277
> 
> 标签：usb, dbus, hid, udev, hal

我正在尝试在 Ubuntu(kernel-3.0) 下访问 USB HID 设备。我想编写一个程序，它可以在 USB 设备连接到总线时通知我，即每当插入我可以监控的 USB 设备时是否会生成任何事件。我研究过 DBus 和 HAL 没有任何成功。但是我不希望linux在插入设备时加载其当前模块（USBHID和HID）。我还想问一下提到的模块是否也是用于HID设备的设备驱动程序。

我的唯一目的是在将 USB 设备插入总线时运行脚本，该脚本将间接调用上述模块。

我正在用 C 编写代码。我对 linux 很陌生。因此，如果有人能指出我正确的方向，那将是非常有帮助的。

谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T18:18:23.067

当插入 USB 驱动器时，UDisks 守护程序将发送 D-Bus 信号“DeviceAdded”，并且可能为驱动器上的每个分区发送另一个“DeviceAdded”。如果你有自动挂载，当分区被挂载时，你也会得到一个“DeviceChanged”信号。然后，您可以查询 UDisks 界面以及各个设备的属性，例如。您可以在此处找到有关 UDisks 界面的更多信息：http: [//hal.freedesktop.org/docs/udisks/UDisks.html](http://hal.freedesktop.org/docs/udisks/UDisks.html)

一种更熟悉 D-Bus 上的块设备（或其他）的方法是安装和使用 D-Feet 来检查总线。UDisk 出现在系统总线上。您可以查看其中的内容并检查各个设备的属性以及 UDisk 界面本身。

另一种方法，也可以让您查看总线上传输的信号，是从命令行运行 dbus-monitor。

# matlab - 检测图像中的数独方块

> ID：10395064
> 
> 赞同：7
> 
> 时间：2012-05-01T07:58:02.740
> 
> 标签：matlab, image-processing, opencv, computer-vision

我想问另一个与[如何消除数独方块中的凸面缺陷有关的问题？](https://stackoverflow.com/questions/10196198/how-to-remove-convexity-defects-in-sudoku-square)

我在 OpenCV-Python 中实现了一个数独求解器，它工作得很好。但是此时，我做了一个假设，这将简化我的问题。

假设是：`Sudoku boundary(square) is the biggest blob in the input image`

例如：

![在此处输入图像描述](../Images/410007db4317433badbf0e3fe61fe161.png)

红色块是检测到的方块。您可以看到它覆盖了图像的主要部分。

**问题：**

问题只是假设。`If sudoku square has another square around it, method fails. Or if the image has another bigger blob than the sudoku square, again method fails.`

例如，拍摄这张[图片](http://tur.stparchive.com/Archive/TUR/TUR02132012p18.jpg)。（我不想在这里上传原图，太大了，我也想上传结果）

我尝试了以下几种方法来在这张图片中找到数独方块：

1)`Find the biggest blob`

然后我得到了红色区域。`Method Failed`.

![在此处输入图像描述](../Images/95c38d4edba3dae7d785a9cf3c8bd5ce.png)

（图像从原始图像调整大小以减小尺寸）

2)`Find only square regions`

你可以看到很多候选人在那里，尤其`KING CROSSWORD`是与数独非常相似。`Method again fails`

`In short, this image has everything, to fail me.`

**问题：**

`How to detect a sudoku square in an image, especially in the test image i gave? Is there any better algorithm for this?`

**更新：**在阅读了一些答案和评论后，我想我应该更新一下。看下图：

![在此处输入图像描述](../Images/ba8bffcdcae9bd828609a4bb06fd3921.png)

此图像有一个问题数独和以前的数独答案。两者都是一样的。我认为搜索子块或 OCR 测试在这里不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T08:43:16.760

为什么不检查每个大方块/斑点？只有那些具有 1) 9X9 子方格 2) 某些子方格中的数字 3) 没有涂黑子方格的数独。

# tomcat7 - 添加tomcat 7时出错

> ID：10395067
> 
> 赞同：2
> 
> 时间：2012-05-01T07:58:20.297
> 
> 标签：tomcat7, sts-springsourcetoolsuite

我正在将 STS 与 tomcat 6 一起使用，但我无法添加 tomcat 7。我已尝试删除所有服务器并再次添加它们，但问题仍然存在。它说

**无法创建所选类型的服务器**

可能是什么原因？

# x86-16 - RCR 和 ROR 有什么区别？

> ID：10395071
> 
> 赞同：11
> 
> 时间：2012-05-01T07:58:53.620
> 
> 标签：x86-16, assembly

我理解`RCR`从右到左旋转钻头的术语，**从进位中取出钻头，**而`ROR`从右到左旋转钻头，从右边取出**钻头，**但这是它们之间的唯一区别吗？如果是这样，那么两条指令似乎都做了同样的工作。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-01T08:04:28.090

RCR 在轮换中包含进位标志，因此它实际上是 N+1 位轮换，而 ROR 不包含进位标志，因此它只是 N 位轮换。

[来自www.c-jump.com](http://www.c-jump.com)的一些漂亮图表：

![在此处输入图像描述](../Images/e6cfa80ce1ab8ade43feb777268dca86.png)

![在此处输入图像描述](../Images/b382442c7ffd7e9dfcd505a6e2671b79.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T08:04:35.520

两条指令都从左向右旋转位（其中左侧位是 MSB）。

RCR 将进位标志轮换到 MSB，将 LSB 轮换到进位标志。

ROR 将 LSB 循环到 MSB 而不经过进位标志。

```
+--> CF -->  MSB --> ... -> LSB --+
|                                 |      RCR
+---------------------------------+

+-> CF      +-> MSB --> ... -> LSB --+
|           |                        |      ROR
+------------------------------------+ 
```

# c# - 如何在行更新事件中访问某些行数据绑定函数

> ID：10395072
> 
> 赞同：0
> 
> 时间：2012-05-01T07:58:55.743
> 
> 标签：c#, asp.net

我在行数据绑定事件中有此代码：

```
 if (e.Row.RowType == DataControlRowType.DataRow && (e.Row.RowState & DataControlRowState.Edit) == DataControlRowState.Edit)
    {
        string CCC = (string)DataBinder.Eval(e.Row.DataItem, "COLUMN");
        DropDownList DropDownList1 = (DropDownList)e.Row.FindControl("DropDownList1");
    } 
```

如何使代码在行更新事件中工作。我想在没有 if 条件的情况下仅在 rowupdating 事件中添加此代码。

```
string CCC = (string)DataBinder.Eval(e.Row.DataItem, "COLUMN");
            DropDownList DropDownList1 = (DropDownList)e.Row.FindControl("DropDownList1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:34:15.157

Here by Iam showing the sample...for SQL Data Adapter Update...This also I learned from this StackOverFlow only.

```
private static void OnRowUpdating(object sender, SqlRowUpdatingEventArgs e)
{
string MyERowValu = e.Row["sl_no"].ToString().Trim();
if (e.Row["itm_description"].ToString().Trim().Length == 0)
{
//e.Status = UpdateStatus.SkipCurrentRow;
e.Status = UpdateStatus.SkipAllRemainingRows;
}
} 
```

The Bleow Codes I used in Data_Save Areas...

```
SQLCon.Open();

blah...blah...blah...blah...

SqlTransaction Trans1 = MyItmDatas.WMSCon.BeginTransaction();

MyDataAdapter1.UpdateCommand.Transaction = Trans1;
MyDataAdapter1.InsertCommand.Transaction = Trans1;
MyDataAdapter1.RowUpdating += new SqlRowUpdatingEventHandler(OnRowUpdating);

MyDataAdapter1.RowUpdating += new SqlRowUpdatingEventHandler(OnRowUpdating);

myDataGrid1.CurrentCell = myDataGrid1.FirstDisplayedCell;
myDataGrid1.EndEdit();

try
{
MyDataAdapter1.Update(ItemTable);
Trans1.Commit();
MessageBox.Show(" ITEMS UPDATED TO ....... ITEM MASTER ", " ITEM MASTER UPDATE ");
}
catch (Exception ex)
{
if (Trans1 != null)
{
Trans1.Rollback();
}
MessageBox.Show(ex.Message, "Item Master Save", MessageBoxButtons.OK, MessageBoxIcon.Information);
}
SQLCon.Close();
MyDataAdapter1.RowUpdating -= new SqlRowUpdatingEventHandler(OnRowUpdating);
myDataGrid1.Refresh(); 
```

# javascript - 拖放时出错

> ID：10395076
> 
> 赞同：0
> 
> 时间：2012-05-01T07:59:26.443
> 
> 标签：javascript, jquery

我的代码是`

```
<script>
 $(function(){
 var xco,yco,sen,ple,pto;
document.onmouseup=function(){document.onmousemove=null;};
$(".pcre").mousedown(function(e){sen=$(this);
ple=sen.offset().left; 
 pto=sen.offset().top; 
  xco=e.clientX;
  yco=e.clientY;

  $(document).mousemove(function(e){fle=ple+e.clientX-xco;
  fto=pto+e.clientY-yco;
  sen.css("top",fto);
  sen.css("left",fle);

  });
  });

 });</script> 
```

`当我移动 div 它移动但在 mouseup 上没有任何反应并且它继续跟随鼠标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:17:09.210

我建议您使用 jQuery UI： http: [//jqueryui.com/](http://jqueryui.com/) 它就像一个 jQuery 插件，提供动画、用户交互等工具。

可拖动 DIV 的示例：http: [//jsfiddle.net/TFjB7/](http://jsfiddle.net/TFjB7/)

你看，这真的很容易： `$('.draggable').draggable();`

[您可以在http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)上找到更多示例和文档。只需下载它并将其包含在您的文档中。

# xcode - 使用不同的苹果帐户更新 XCODE

> ID：10395077
> 
> 赞同：22
> 
> 时间：2012-05-01T07:59:31.320
> 
> 标签：xcode, macos, upgrade

我有 MAC OS 10.7.3。xcode 4.3.1 使用不同的苹果 id 安装，因为我的朋友以前使用过我的 macbook pro。现在，当我尝试将 Xcode 升级到 4.3.2 时，它会询问我朋友帐户的凭据。不幸的是，应用商店明确表示您可以使用用于安装应用程序的帐户升级应用程序。

如何使用我的凭据升级 Xcode？

提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-10-28T17:24:17.313

我相信你现在已经解决了这个问题，但只是在这里发布对我有用的解决方案..

1.  打开 Finder 并导航到应用程序，
2.  Ctrl+单击应用程序并选择“显示包内容”（本例中为 Xcode），
3.  展开 Contents 目录并单击 _MASReceipt 目录将其选中，键入 Command+Delete 以永久删除该目录 --- 您将被提示输入您的凭据，因为这是一个受保护的文件。
4.  退出并重新启动 AppStore，然后找到该应用程序。您现在可以使用新 ID 进行更新，而无需删除旧版本的应用程序

希望这对某人有所帮助，因为我花了一段时间才弄清楚！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-15T06:47:05.493

不幸的是，不得不回答我自己的问题，简单的回答：不，您不能更新从另一个帐户安装的 xcode。解决方案是删除现有安装并从新帐户重新安装。要删除现有安装，您需要将其从 Launch pad 中删除。您可以通过在启动板中找到 xcode 图标来执行此操作，长按该图标直到它开始跳舞。然后删除它并等待一段时间，直到从 /Application 中删除 xcode.app。如果您从 /Application 中手动删除 xcode.app，App Store 将继续认为它已安装，并且以后不会允许您重新安装。

上述解决方案假设您已经从 mac 应用商店安装了 xcode，通常版本高于 4.2。对于早期版本，只需删除 /Application/xcode 文件夹即可。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-16T10:42:19.197

找到解决办法：

我有这个错误，它与 Spotlight 有关。App Store 以某种方式使用了 Spotlight。我的解决方法是将整个 HD 添加到 Spotlight System 首选项窗格中的“隐私”选项卡，关闭首选项并等待 30 秒，重新打开并从“隐私”选项卡中删除您的 HD。Spolight 开始重新索引。重新打开App Store，问题已解决！在此处发布此内容以供以后可能搜索的其他人使用。还向 Apple 提交了错误报告。

来源：[https ://discussions.apple.com/thread/2806858?start=0&tstart=0](https://discussions.apple.com/thread/2806858?start=0&tstart=0)

# javascript - 无效的正则表达式标志 a

> ID：10395081
> 
> 赞同：1
> 
> 时间：2012-05-01T07:59:51.110
> 
> 标签：javascript, jquery, document-ready, silex

我使用 Silex Frame Work，我正在尝试使用以下代码删除表中列出的后端文件，但是火错误给了我一条错误消息“无效的正则表达式标志 a”，当我点击删除链接时，它会转到一个白页。代码是：

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".delete-file").live('click', function() {
            itemRow   = $(this).parent().parent().parent();
            fileId    = $(this).attr('file_id');
            deleteURL = $(this).attr('href');

            var html   = "<div> Are you sure, you want to DELETE this file? </div>";
            var dialog = $(html).dialog({
                buttons: {
                    "Ok": function() {
                        $.ajax({
                            url     : deleteURL,
                            type    : 'DELETE',
                            success : function(data) {
                                itemRow.remove();
                                dialog.dialog("close");
                            },
                            error   : function() {
                                dialog.dialog("close");
                            }
                        });
                    },
                    "Cancel": function() {
                        $(this).dialog("close");
                    }
                }
            });
            return false;
        });
    });
</script> 
```

我使用：

```
 {% for row in result %}
       <tr class="content {{ cycle(['odd', 'even'], loop.index) }}">
            <td> {{ row.name }} </td>
            <td> {{ row.user.username }} </td>
            <td class="url"> <a href="{{ path('info', {"id" : row.file_id}) }}">{{ row.path | truncate(30) }}</a> </td>
            <td> <img src="{{conf('base_url')}}/{{row.thumbnail}}"/> </td>
            <td class="url"> {{ row.size | bytes_format}} </td>
            <td> {{ row.description }} </td>
            <td>
                <span><a href="{{ path('delete', {'id' : row.file_id} ) }}" class="delete-file" file-id="{{row.file_id}}">DELETE</a></span>
            </td>
        </tr>
   {% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:55:12.997

我找到了。这只是因为给我的 .js 文件提供了错误的路径！！

# ios - 我的逻辑有缺陷吗？iOS 按钮状态

> ID：10395084
> 
> 赞同：0
> 
> 时间：2012-05-01T07:59:58.003
> 
> 标签：ios, uibutton, logic, viewdidload

我的逻辑有底线，我正在努力寻找它。我的应用程序上有三个按钮，它们有两种状态，打开和关闭。每种状态都有不同的图像，按钮和图像交换运行良好。我的问题是加载时，无论按钮保存到什么状态，我的按钮都会加载到选定状态。

在我的 viewDidLoad 中，我从内存中获取状态：

```
NSString *_greyButtonSavedState = [[NSUserDefaults standardUserDefaults] stringForKey:@"greyButton"]; 
```

然后我立即检查状态并应用正确的图像（这不起作用）：

```
if ([_greyButtonSavedState isEqualToString:@"ON"]) { [_greyButton setSelected:YES]; } else { [_greyButton setSelected:NO]; } 
```

每次按下按钮时，我都会运行以下命令：

```
- (IBAction) _greyButtonPress:(id)sender {
    if ([sender isSelected]) {
        NSLog(@"Grey map not created");
        [sender setImage:_unselectedGrey forState:UIControlStateNormal];
        [sender setSelected:NO];
        //save state to memory
        [[NSUserDefaults standardUserDefaults] setValue:@"OFF" forKey:@"greyButton"];
    }else {
        NSLog(@"Grey map created");
        [sender setImage:_selectedGrey forState:UIControlStateSelected];
        [sender setSelected:YES];
        //save state to memory
        [[NSUserDefaults standardUserDefaults] setValue:@"ON" forKey:@"greyButton"];
    }
} 
```

日志显示，在 viewDidLoad 上，正在使用的图像被“选中”，但按钮处于“未选中”模式。我试过有无：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

每次按下按钮时都会被调用，没有区别。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:04:17.403

好吧，我注意到在一种情况下您使用 UIControlStateNormal，但在另一种情况下您使用 UIControlStateSelected。我认为这是你问题的根源。

您说的是“如果已选中，请将图像设置为未选中”和“如果未选中，请将所选图像设置为选中。

# css - 用溢出将屏幕分成相等的部分

> ID：10395085
> 
> 赞同：1
> 
> 时间：2012-05-01T07:59:59.420
> 
> 标签：css

我最近做了一个网站，我需要 6 个列，并且 y 溢出可见。我无法做出一个干净的 6 个分区。宽度需要更宽以适应 6 个滚动条和一些填充。

有比我的尝试更好的方法吗？

```
<div class="col">

  <div class="section">
    Content that overflows this section. 

  </div>

</div>

    .col {

    width: 15.2%;
    padding-right: 15px;
    float: left;
}

.section {
    overflow-y: scroll;
    width: 100%;

} 
```

它非常草率，柱子没有到达最右边。

我不太了解jquery，无法尝试，但愿意接受任何建议。

****** *** *******我解决了，太傻了。您需要对包括填充在内的所有内容使用 % 。呵呵******* *** ******抱歉浪费了大家的时间！*****

 ****** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:21:34.543

我会说最好为内部 div 设置填充`.section`，这样就不需要调整`.col`宽度。

试试这个 HTML 代码：

```
<div id="grid">
    <div class="col">
      <div class="section">
        Content that overflows this section. 
      </div>
    </div>
    <div class="col">
      <div class="section">
        Content that overflows this section. 
      </div>
    </div>
    <div class="col">
      <div class="section">
        Content that overflows this section. 
      </div>
    </div>
    <div class="col">
      <div class="section">
        Content that overflows this section. 
      </div>
    </div>
    <div class="col">
      <div class="section">
        Content that overflows this section. 
      </div>
    </div>
    <div class="col">
      <div class="section">
        Content that overflows this section. 
      </div>
    </div>
</div> 
```

使用这个 CSS：

```
#grid {
    margin-left: -15px;
}

.col {
    width: 16.6%;
    float: left;
}

.section {
    overflow-y: scroll;
    margin-left: 15px;
    height: 100px;
    background: green;
}​ 
```

请注意，这`#grid { margin-left: -15px; }`将帮助您在第一列之前消除不必要的空白

看看[现场演示](http://jsfiddle.net/dsMf9/2/)*****

# entity-framework - 添加新行会引发“违反多重性约束”

> ID：10395089
> 
> 赞同：0
> 
> 时间：2012-05-01T08:00:11.153
> 
> 标签：entity-framework, entity-framework-4, ef-code-first, code-first

我有两个相关的类，例如：

```
public partial class WorkItem
{
    public WorkItem()
    {
        this.ChildWorkItems = new HashSet<WorkItem>();
        this.Attachments = new HashSet<Attachment>();
    }

    public int Id { get; set; }
    public Nullable<int> ParentId { get; set; }
    public string Title { get; set; }
    public string SenderUserName { get; set; }

    public virtual ICollection<WorkItem> ChildWorkItems { get; set; }
    public virtual WorkItem ParentWorkItem { get; set; }
    public virtual ICollection<Attachment> Attachments { get; set; }
} 
```

和 realted 1-n 附件：

```
public partial class Attachment
{
    public int Id { get; set; }
    public string Filename { get; set; }
    public Nullable<int> WorkItemId { get; set; }

    public virtual WorkItem WorkItem { get; set; }
} 
```

现在我想`workitems`在数据库中插入一些带有附件的新内容。我使用以下代码进行插入：

首先把所有工作项（不管它们的附件）

```
 var workItems = new List<WorkItem>();
     foreach (var username in AllUsers)
            {
                var workitem = new WorkItem();
                //fill the simple fields

                lst.Add(workitem);
                Context.WorkItems.Add(workitem);
            } 
```

然后设置附件：

```
 foreach (var fileName in MYFILES)
        {
            var file = new System.IO.FileInfo(fileName);

            foreach (var workItem in workItems)
            {

                var att =
                    new Attachment()
                    {
                        Filename = file.Name,
                    };

                context.Attachments.Add(att);
                att.WorkItem = workItem;

            }
        } 
```

但我得到以下异常：

**违反了多重性约束。关系“AienCRMModel.FK_WorkItemAttachments_WorkItems”的角色“WorkItem”具有多重性 1 或 0..1。**

有趣的一点是，如果我只有**一个** `workitem`，一切都很好。如果我有多个`WorkItem`没有附件，那么一切都很好。当有多个 WorkItem 和至少一个附件时，就会出现问题。

我阅读了很多其他帖子，但没有发现任何有用的信息。

注意：我使用 EF Code-First 4.3 和 T4 模板，它从 EDMX 文件生成我的类。

## 我真的很感谢您提前提供的帮助。

**编辑** 我在这里附上了提到的表格的完整 EDMX 图： ![EDMX 图](../Images/c507181ee966c3c07a8e6e0fc0fd9778.png)

**编辑 2**

在此处完成 .edmx 文件：[http://www.4shared.com/file/zQUO_qk7/CrmModel141.html？](http://www.4shared.com/file/zQUO_qk7/CrmModel141.html?)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T07:25:33.317

在您的代码中的某处，您对数据库中的不同行使用相同的对象实例，如下所示（只是一个示例）：

```
var o1 = new O1Class();
foreach (var o2 in collection)
{
    o2.O1s.Add(o1);
} 
```

但必须是：

```
foreach (var o2 in collection)
{
    o2.O1s.Add(new O1Class());
} 
```

我这个例子 O1Class 在他们的关系中只能有一个 O2Class 但是实体框架会保留对 o1 实例的引用，所以当你将它添加到多个 O2Class 实例时，EF 会认为当前的 O1Class 有多个 O2Class 实例，这是不正确的。

# javascript - 带有我的图表的 Javascript openWindow

> ID：10395095
> 
> 赞同：0
> 
> 时间：2012-05-01T08:01:29.043
> 
> 标签：javascript, charts, window.open

我正在为我的班级做一个项目，我目前在用户进行测验后，会生成数字并创建一个图表。我需要在新窗口中获取此图表。如何将整个图表移动到 window.open 选项卡。

这是我的代码： openwindow = window.open("", "Best Fits","width=600,height=700,")

```
 openwindow.document.write("Our top recommendation: "+ vare[0][0]+": " + vare[0][2] + "<br /> <br />" + "Our second recommendation:  "+ vare[1][0]+": " + vare[1][2] + "<br /> <br />" + "Our third recommendation: "+ vare[2][0] + ": " + vare[2][2]);

        //alert(Math.min(vare[0],vare[1],vare[2],vare[3],vare[4]))

        alert(vare[0][0] +": " + vare[0][1] + "   " + vare[1][0] +": " + vare[1][1] + "   " + vare[2][0] +": " + vare[2][1] + "   " + vare[3][0] +": " + vare[3][1] + "   " + vare [4][0] +": " + vare[4][1]  + "  " + results[0] + "  " + results[1] + "  " + results[2] + "  " + results[3])
        alert(vare[0][0]+": " + vare[0][1]);
        myData = new Array([vare[0][0],vare[0][1]],[vare[1][0],vare[1][1]],[vare[2][0],vare[2][1]])
        var colors = ['#FACC00', '#FB9900', '#FB6600'];
        var myChart = new JSChart('graph', 'pie');
        myChart.setDataArray(myData);
        myChart.colorizePie(colors);
        myChart.setTitle('Hotel');
        myChart.setTitleColor('#857D7D');
        myChart.setPieUnitsColor('#9B9B9B');
        myChart.setPieValuesColor('#6A0000');
        myChart.draw();

    });
}); 
```

}

我需要打开 MyChart 并在新选项卡上保存变量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:12:13.797

使用空白 URL 打开它们，然后**openwindow.document.write**将它们的内容写入其中，例如：

```
 var openwindow = window.open("", "Best Fits","width=600,height=700,")
var chrt = "";
myData = new Array([vare[0][0],vare[0][1]],[vare[1][0],vare[1][1]],[vare[2][0],vare[2][1]])
        var colors = ['#FACC00', '#FB9900', '#FB6600'];
        var myChart = new JSChart('graph', 'pie');
        chrt += myChart.setDataArray(myData);
        chrt += myChart.colorizePie(colors);
        chrt += myChart.setTitle('Hotel');
        chrt += myChart.setTitleColor('#857D7D');
        chrt += myChart.setPieUnitsColor('#9B9B9B');
        chrt += myChart.setPieValuesColor('#6A0000');
        chrt += myChart.draw();
openwindow.document.write(chrt); 
```

# gwt - GWT 工具提示 - 要求

> ID：10395101
> 
> 赞同：1
> 
> 时间：2012-05-01T08:03:00.057
> 
> 标签：gwt, gwt2

我正在寻找像这样的工具提示/小部件/弹出面板![在此处输入图像描述](../Images/490ad09f6e0bfd632537a91649532727.png)

对 GWT 中的此类工具提示有任何想法吗？我在 gwt 中尝试了气球小部件，但这对我没有帮助，我需要一个像上面那样的工具提示，它也应该是可选的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:51:20.437

[PopupPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html)无疑是​​您最好的开始。PopupPanel 将为您提供一个与您的示例类似的未装饰的方形框，并带有用户交互。

根据您的设计要求，您可以使用直接 HTML 设置内容（嵌入[HTMLPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLPanel.html)，将 HTML 作为内容，在 PopupPanel 内），或使用 GWT 布局工具进行布局。

另请查看：[DecoratedPopupPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DecoratedPopupPanel.html)，了解有关使用 css 规则装饰面板边框的一些想法。这可能有助于顶部的小三角形指针。

另一个提示：如果您需要跟踪特定 GUI 元素之外的事件，您最终可能会在 PopupPanel 中嵌入一个[FocusPanel 。](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusPanel.html)

# ios - iOS Audio Service : 读写音频文件

> ID：10395104
> 
> 赞同：1
> 
> 时间：2012-05-01T08:03:19.750
> 
> 标签：ios

伙计们。

我正在开发 iOS 上的一些音频服务。

我试图搜索有关的任何示例或教程

音频服务或流如何读取现有的音频文件而不是

处理过滤器之类的东西，而不是写另一个文件。

有没有机构可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:39:43.517

[Dirac3LE](http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html)（由 Stephan M. Bernsee 编写）是一个非常适合这项工作的库。

下载中包含示例和手册。

它特别适用于时间和音高操纵，但在您的情况下，您会对它`EAFRead`和`EAFWrite` 类感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T12:03:45.287

如果您想熟悉也可用于麦克风输入/声音输出的较低级别的库，并且您可以将原始样本输入和输出，我建议您查看[Audio Queue Services](https://developer.apple.com/library/content/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)。

我在我的业余项目中使用它从麦克风获取音频，并且我还编写了一些代码，您可能会发现它们对对输入音频进行快速矢量化、基于 FFT 的 FIR 滤波很有用。你可以在这里找到代码[https://github.com/jamescarlson/FreeAPRS](https://github.com/jamescarlson/FreeAPRS)

# python - 可以在 Django {% ifequal %} 表达式中使用带有查找的变量吗？

> ID：10395106
> 
> 赞同：1
> 
> 时间：2012-05-01T08:03:33.813
> 
> 标签：python, django, django-templates

这是我的代码：

```
[{{thing.syncedthing_set.all.0.state}}]
{% ifequal thing.syncedthing_set.all.0.state "InProgress" %}
    It worked
{% endifequal %} 
```

结果：

```
[InProgress] 
```

换句话说，变量查找有效，但没有通过“ifequal”测试。除了不支持变量查找之外，我想不出任何原因这不起作用。

2007 年有一条邮件列表消息说当时不支持它们：[https](https://groups.google.com/forum/?fromgroups#!topic/django-users/oU1im3UTcLc) ://groups.google.com/forum/?fromgroups#!topic/django-users/oU1im3UTcLc - 情况仍然如此吗？

如果是这样，有什么好的解决方法吗？在这种情况下，修改调用模板的 Python 代码并不容易。

如果他们应该工作 - 还有其他可能的原因吗？

有[这个非常相似的问题](https://stackoverflow.com/questions/7509435/issue-with-django-template-ifequal)，但答案对我不起作用。我正在使用 Django 1.3。

编辑

好的，所以“状态”具有类型类。查看定义，state 指的是最终子类 models.Field 的类：

```
class FSMField(models.Field):
    __metaclass__ = models.SubfieldBase

    states = {}
    """ Contains { 'Statename': StateClass, ... }"""

    def __init__(self, *args, **kwargs):
        kwargs.setdefault('max_length', 50)
        super(FSMField, self).__init__(*args, **kwargs)

    def to_python(self, value):
        if isinstance(value, State):
            return value
        return self.__class__.states.get(str(value))()

    def get_prep_value(self, value):
        return str(value)

    def get_internal_type(self):
        return 'CharField' 
```

鉴于此 - 我实际上不确定如何在模板系统中获取真正的字符串值。原谅我的新手。

EDIT2 实际上，相关位可能是“状态”类本身：

```
class State(object):
    """ A simple finite statement machine abstract class, with on_entry and on_exit events."""
    def __unicode__(self):
        return "%s" % (self.__class__.__name__)

    def __str__(self):
        return "%s" % (self.__class__.__name__) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:21:28.517

对象的字符串表示形式与其实际表示形式之间存在差异。您的属性似乎很可能`state`返回一个其 unicode 表示为 的对象`InProgress`，但这并不意味着它实际上等于`"InProgress"`. 例如，如果`state`是另一个模型的 ForeignKey，这将是正确的——在这种情况下，您可以在查找中添加另一个级别以获取返回该状态的实际字段。

**更新后编辑**我认为你已经把自己编码到了一个角落，不幸的是。由于没有将状态作为字符串包含的实际实例属性，因此无法通过字符串比较来获取它。

我想到了几种可能性。一种是将所有可能的`State`子类传递给模板上下文（可能通过上下文处理器），之后您就可以将您的子类`state`与实际对象进行比较。这太可怕了。

另一种方法是在`State`类上或可能在模型上添加一个函数，该函数将状态作为字符串。这可能与现有`__unicode__`方法一样简单（您实际上不能使用它，因为模板语言禁止访问以下划线开头的属性）。然后你可以做`ifequal foo.bar.0.state.as_string "InProgress"`任何事情，这将调用该`as_string()`方法，你的比较就会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:11:45.143

尝试使用 IF：

```
{% if thing.syncedthing_set.all.0.state == "InProgress" %} 
```

# matlab - 使用 Excel 用 Matlab 编写的脚本绘制圆形图。使用 COM\VBA

> ID：10395109
> 
> 赞同：3
> 
> 时间：2012-05-01T08:04:10.290
> 
> 标签：matlab, vba, com, graph

我需要在 Matlab 中编写一个脚本，该脚本将从 Excel 表中读取一些数据并在 Matlab 的图形中绘制一个圆形图。但是有人建议我使用 Excel 工具来绘制它。在 Excel 中绘制圆形图并不难，但我仍然没有找到任何方法让它在 Matlab 中工作，使用 Matlab 的图形。我已经在其他论坛上问过这个问题，但没有收到任何答案。我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:19:21.417

所以，我想出了如何在 Matlab 的图中使用 ActiveX 控件。

首先，您需要安装驱动程序 mschrt20.ocx（免费，可从 Internet 下载）。在 32 位系统中，您必须将它放在 C:/System32 中，然后通过在 cosole 中键入“regsvr32 mschrt20.ocx”来安装它（以管理员身份）。

然后创建一个 Matlab 图形并将一个 ActiveX 对象放入其中，保存。要激活它，请键入 Matlab 的解释器，如下所示：

```
 anyone = actxcontrol('MSChart20Lib.MSChart.2');
 anyone.get;
 get(anyone,'ChartData') 
```

现在您可以看到对象的所有属性。在指南中选择正确的属性 'charType' 并在需要时将字段设为 'Legend' 'Visible'。

要使用 ActiveX 对象绘制饼图，您需要设置其字段“ChartData”的含义。这是一个 2xn 的单元格。如下例所示使用它：

```
 S = cell(2, 3);
   S(1,: ) = {'first', 'second', 'third'} ; %legend
   S(2,: ) = {1, 10, 5} ; %meanings
   set(handles.activex1,'ChartData', S); 
```

这就是它的工作原理。ActiveX 控件还有一些其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:21:30.700

有很多方法可以理解您的问题：

如果你想要一个饼图，matlab 可以用 'pie' 函数做到这一点：

[http://www.mathworks.com/help/techdoc/ref/pie.html](http://www.mathworks.com/help/techdoc/ref/pie.html)

```
x = [1 3 0.5 2.5 2];
explode = [0 1 0 0 0];
pie(x,explode)
colormap jet 
```

如果您想实际绘制一个圆，那么您将使用带有“曲率”设置的“矩形”命令，如下所示：

```
rectangle('Position',[1,2,5,10],'Curvature',[1,1],...
          'FaceColor','r')
daspect([1,1,1])
xlim([0,7])
ylim([1,13]) 
```

或者您可以查看这些网站以获取绘制圆圈的替代方法：

[http://blogs.mathworks.com/pick/2008/03/21/drawing-a-circle/](http://blogs.mathworks.com/pick/2008/03/21/drawing-a-circle/) [http://www.mathworks.com/matlabcentral/fileexchange/2876](http://www.mathworks.com/matlabcentral/fileexchange/2876)

相反，如果您想要极轴：

[http://www.mathworks.com/help/techdoc/ref/polar.html](http://www.mathworks.com/help/techdoc/ref/polar.html)

```
figure
t = 0:.01:2*pi;
polar(t,sin(2*t).*cos(2*t),'--r') 
```

以下是一个圆的方程式（因此您会看到一个红色圆圈覆盖在黑色极坐标轴上：

```
polar(t,sin(t).^2+cos(t).^2,'--r') 
```

# image - 刷新时显示随机图像

> ID：10395117
> 
> 赞同：0
> 
> 时间：2012-05-01T08:04:57.330
> 
> 标签：image, random, refresh

我试图弄清楚如何使用 Nicholas Lim 在[点击随机图像](https://stackoverflow.com/questions/8913479/random-images-on-click)中发布的代码在页面刷新时显示随机帖子。

我在我的网站上使用 wordpress，url 结构不包含 .php 扩展名。所以我将无法使用它在我的 WP 帖子中显示随机图像，对吗？

如果可能的话，谁能指导我一步一步地使用代码。

我花了很多时间阅读这个，但仍然没有理解。

谢谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:11:32.693

不是 100% 确定您的要求是什么。

这是否正确： 1\. 您想在页面刷新时显示随机图像。2\. 你没有运行 php 服务器。

如果以上两个都是肯定的，那么为什么不使用您在原始问题中包含的帖子中的 JavaScript 示例？

# php - Zend Db Table 更新添加“？” 而不是更新值

> ID：10395118
> 
> 赞同：0
> 
> 时间：2012-05-01T08:05:04.473
> 
> 标签：php, zend-framework

我曾多次使用 Zend_Db_Table 更新，但这次我遇到了问题。我不知道为什么，所以请告诉我哪里做错了。

```
$where = $directory->getAdapter()->quoteInto('id = ?', $id);

$total_votes = array('total_votes' => '(total_votes + 1)');

$directory->update($total_votes, $where);

/// $directory is a db table variable. 
```

它不会更新数据库中的值。我使用 Profiler 打印查询：

```
**UPDATE dealers_directory SET `total_votes` = ? WHERE (`id` = 3)** 
```

我不明白为什么要添加“？” 而不是 (total_votes + 1)。我在同一个应用程序的几个地方使用过它，它工作正常，但我不知道这里有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:14:13.943

使用[`new Zend_Db_Expr('(total_votes + 1)')`](http://caphrim.net/tim/?p=769).

# iphone - Lua 和 os.execute 返回

> ID：10395120
> 
> 赞同：2
> 
> 时间：2012-05-01T08:05:27.717
> 
> 标签：iphone, shell, lua, root

我正在编写一个 lua 脚本，我必须执行两个 shell 命令，它们都保持回显信息，直到用 ^C 终止。

这意味着 os.execute 是无用的，因为它等待返回码，它永远不会出现，并冻结整个脚本。您对如何进行这项工作有任何想法吗？一个好的解决方案是不要求 os.execute 返回任何值，因此它将发送命令并继续，但我认为这是不可能的。另一个是多线程，我无法让它工作。

我还必须有能力通过使用 ^C 或 lua 方法以某种方式停止两个无限循环。该脚本使用 Lua 5.1.4 在 iPhone (iOS 5.0.1 / root) 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:08:15.577

```
 os.execute('yourcommand&') 
```

那应该在后台运行命令并立即返回到您的 Lua 脚本。

如果您想要更复杂的过程控制，您可能会想用本机代码编写它。

# javascript - 删除时用另一个字符替换字符

> ID：10395121
> 
> 赞同：-1
> 
> 时间：2012-05-01T08:05:28.997
> 
> 标签：javascript, jquery

例如：我输入了这个值：（099）123 45 67 我想`_`在删除时用下划线（）替换数字：（099）123 __ __

我怎样做？我有返回当前字符位置的函数。然后`charAt()`我得到这个字符，然后用`replace()`. 但是如果有多个相同的字符，它会替换第一个，而不是光标旁边的那个。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:44:24.573

不同的答案 - 有点类似于@samjudson 所说的：

您需要使用子字符串，但这有点复杂。

对于 IE 或 Opera，请使用此对象：`document.selection.createRange().text = "_";`

对于 Mozilla 浏览器，请使用：

```
inputBox.focus();
var position = inputBox.selectionStart; //selectionEnd would work as well
inputBox.value = inputBox.value.substring(0, position) + '_' +
inputBox.value.substring(position, inputBox.value.length); 
```

来自 RT 编辑的想法，例如这个 :)，以及 Wikipedia 上的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:08:24.537

我不认为标准`replace()`功能可以容纳这种类型的替换。

您必须使用`substring()`将字符串拆分为（字符之前的一个字符串和字符之后的一个字符串），然后将它们与中间的字符串连接在一起`'_'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:11:47.610

使用替换作为正则表达式函数。通过在斜杠中使用搜索表达式来做到这一点。要查找所有出现（所有数字，而不仅仅是第一个），请通过在搜索表达式后添加“g”将其与全局选项一起使用。在您的情况下，您应该使用 replace(/[0-9]/g, "_")

# java - 是否有任何基于主观逻辑的信任指标的实现？

> ID：10395124
> 
> 赞同：3
> 
> 时间：2012-05-01T08:05:46.330
> 
> 标签：java, c, algorithm, logic, probability

[主观逻辑](http://folk.uio.no/josang/sl/index.html)是我下一个项目的一部分，我只是想知道是否已经有任何实现。我已经阅读[**了一些关于运营商的东西**](http://folk.uio.no/josang/sl/Op.html)（不是很多），但我仍然不确定它是如何实现的。

最好我想要一个 C/Java/Go/Python 实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:22:15.800

谷歌搜索后，我没有看到任何主观逻辑的示例代码。这个概念更多地体现在人工智能和基于逻辑的语言中，如 Prolog 将不得不被使用。此外，如果您有一个规则评估引擎（如此处提到的 CLIPS 规则引擎[）](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.187.3108&rep=rep1&type=pdf)，那么很好。

[提出](http://folk.uio.no/josang/papers/JHP2006-ACSC.pdf)了几种利用主观逻辑的算法，可以立即用 java 或 C 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:57:09.050

[演示](http://folk.uio.no/josang/sl/Op.html)页面包含一个 Java小程序，可用于使用主观逻辑可视化信任网络。虽然无法预先获得小程序的源代码，但可以使用[JD （Java 反编译器）等程序对小程序](http://java.decompiler.free.fr/)[JAR 文件](http://folk.uio.no/josang/sl/SLWebDemo.jar)进行反编译，并从那里进行逆向工程。

该代码在某种程度上提供了一个库，并且是我见过的代码中主观逻辑的**唯一示例。**

# java - LMax Disruptor 和 Rx 框架概念之间的平行关系？

> ID：10395129
> 
> 赞同：2
> 
> 时间：2012-05-01T08:06:07.890
> 
> 标签：java, .net, architecture, concurrency, reactive-programming

正如我在这里读到的[http://mechanitis.blogspot.fr/2011/06/dissecting-disruptor-how-do-i-read-from.html](http://mechanitis.blogspot.fr/2011/06/dissecting-disruptor-how-do-i-read-from.html)

“对于每一个单独的项目，消费者只需说‘当你得到的数量超过这个数字时告诉我’，并被告知它可以获取多少条目作为回报。”

[这不与 Erik Meijer http://www.youtube.com/watch?v=8Mttjyf-8P4](http://www.youtube.com/watch?v=8Mttjyf-8P4)公开的 Rx 框架概念有关 吗？

如果是，Rx Framework 是否有助于实现类似的软件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:22:39.360

好问题，对于我目前的一个项目，我自己一直在想这个问题。

但是，我觉得没有资格给出明确的答案：

### 它们旨在抓挠不同的瘙痒。

Disruptor 显然是为性能优先而设计的，尽可能接近金属。除了它所做的事情之外，它并没有做任何花哨的事情。

Rx 更高级别，它是“Linq to events”，它允许您使用“事件”做一些普通框架事件无法做到的事情（您不能过滤标准事件，然后继续将其作为事件传播） ）。

### 语义差异

[正如 Disruptor.Net 的创始人在这里](http://groups.google.com/group/lmax-disruptor/msg/d7568dde18de9198)指出的那样：

> 接口匹配，但我认为 RX 背后的语义不匹配：
> 
> *   异常 (OnError) 会终止流，而中断器则不是这种情况
> *   当它很热时你不能订阅中断器：必须在“启动”中断器之前设置观察者，这对于像重试这样的操作员来说效果不佳，例如在出错时会重新订阅
> *   许多运营商对破坏者没有意义，或者根本无法工作

话虽如此，他（至少有一次）正在考虑[Disruptor.Net、TPL Dataflow 和 Rx 之间的集成](http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/cd11855f-9fcb-490a-8ff2-f18ba4e62d0f)。

这是另一个[页面](http://enumeratethis.com/2011/11/21/more-reactive-extensions-performance-improvements/)，有人问同样的问题，该页面的结尾是：

> 在我看来，Disruptor 实际上更像 TPL DataFlow。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:00:57.223

在不了解 Rx 框架的情况下，您可能是对的。然而，Disruptor.Net 被设计为 Java 版本的一个端口，因此它会尽可能地相似。鉴于原始版本不使用 Rx，使用不同的库会增加大量返工和可能的性能问题。

# iis - 无法在网络浏览器中访问我的网站

> ID：10395133
> 
> 赞同：0
> 
> 时间：2012-05-01T08:06:24.093
> 
> 标签：iis, asp-classic, dns, hosting

我的网站以 xx.xxx.xxx.xxx IP 地址打开，直到星期五它工作正常......之后病房无法在 webbrowser 中查看该网站......可能是什么问题？我们该如何解决？

我的这个IP的服务器正在工作，可以查看数据库中更新的数据..但无法查看或打开网站页面。在IIS配置下的网站弯腰之前，现在再次启动..仍然没有用。 .am 根本无法查看登录页面。我的应用程序是很久以前用经典的 asp 开发的。请给我任何建议...非常紧急...

我尝试在 IIS 管理器（服务器）中浏览网站。显示页面无法显示。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:31:09.050

首先，不要惊慌。保持冷静可以避免进一步的伤害。

虽然很难判断可能是什么问题，但您可以做的第一件事是从终端“ping”域。您可以远程登录吗？“wget”（在 linux 上）将从网站下载文件，并可以帮助您查看网站上的文件是否仍然可以访问。如果可能，从不同的浏览器或机器进行检查。我不是asp或IIS方面的专家，所以不会在这方面提供建议。但是一旦我的网站遇到了同样的情况。所以我只打电话给托管服务提供商，结果发现是他们的问题，他们把服务器上线了。如果从他们的角度来看没问题，您可能已经更改了服务器或应用程序中的一些配置，或者可能有一些升级更改参数，甚至是意外删除/移动/重命名文件。试着记住在服务器和应用程序出现故障之前您对服务器和应用程序所做的事情，并询问您的服务器管理员。如果不能立即解决问题，那肯定会帮助您更好地理解问题。

祝你好运。

# python - python/django list.reverse() 和 reversed(list)

> ID：10395134
> 
> 赞同：5
> 
> 时间：2012-05-01T08:06:33.783
> 
> 标签：python, django, list

我今天在我的 django 控制台中尝试了这个，我得到了两个不同的结果。我认为这`list.reverse()`颠倒了列表（即第一个对象成为最后一个对象，依此类推）[1]。然而，情况似乎并非如此。

```
>>> from django.db.models import Q
>>> q1 = Q(result=1)
>>> q2 = Q(result=-1)
>>> q3 = q1 | q2
>>> form = UserData.objects.filter(user=user).filter(coins__gt=0).filter(q3).order_by('-modified', '-placed').values_list('result', flat=True)[:10]
>>> form
Out[14]: [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1]
>>> form.reverse()
Out[15]: [1, 1, 1, 1, 1, 1, 1, -1, -1, -1]
>>> form_bw = []
>>> for f in reversed(form):
...     form_bw.append(f)
...     
>>> form_bw
Out[18]: [-1, -1, 1, -1, 1, -1, -1, -1, -1, -1] 
```

我究竟做错了什么？显然我想要的是`form_bw`

[1] [http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T08:24:02.480

当你这样做

```
querysert.order_by('-modified', '-placed').reverse() 
```

它实际上意味着

```
querysert.order_by('modified', 'placed') 
```

因此，如果结果出乎意料，只需在 Python 中反转

```
list(reversed(values_list)) 
```

或者您必须检查`reverse`带到查询集的排序逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T08:24:25.330

`form`不是一个列表。它是一个 QuerySet，它与列表有很多相似之处，但不是一个。特别是，它定义了一种[`reverse`方法](https://docs.djangoproject.com/en/1.3/ref/models/querysets/#reverse)，该方法实际上返回数据库以相反的顺序请求项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T08:13:15.953

真的`form`是清单吗？请注意，`list.reverse`它不会返回结果，因此您的提示结果看起来很可疑：

```
In [1]: lst = [1, 2, 3, 4]
In [2]: lst.reverse()    # <-- note: no result returned here (~ None)
In [3]: lst 
Out[3]: [4, 3, 2, 1]
In [4]: 
```

另外，作为旁注，更好的使用方法`reversed`是：

```
In [5]: lst = [1, 2, 3, 4]

In [6]: rev = list(reversed(lst))

In [7]: rev
Out[7]: [4, 3, 2, 1] 
```

或者，只需使用带有负步骤的切片：

```
In [8]: rev = lst[::-1]

In [9]: rev
Out[9]: [4, 3, 2, 1] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-01T08:13:30.703

我不是 Django 专家，因此不确定类型`form`是什么。但是，很明显它不是标准列表：

```
>>> form.reverse()
Out[15]: [1, 1, 1, 1, 1, 1, 1, -1, -1, -1] 
```

内置`list.reverse()`函数返回`None`，而这个`reverse()`函数似乎返回了不同的东西。这使我得出结论，这`form`不是一个列表。

尝试以下操作：

```
form = list(form)
form.reverse() 
```

另请注意：

```
>>> form_bw = []
>>> for f in reversed(form):
...     form_bw.append(f) 
```

只是很长的一段话：

```
>>> form_bw = list(reversed(form)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-01T09:52:13.927

尽管这里的其他解决方案在大多数情况下都是正确的，但是使用 Django QuerySet 的 values_list，它不起作用。

唯一的办法是：

```
season_ids = matchesByLeague.values_list('season_id', flat=True).distinct()
season_ids = list(reversed(season_ids))

#Not working
#season_ids = matchesByLeague.values_list('season_id', flat=True).distinct()
#season_ids.reverse()
#season_ids = matchesByLeague.values_list('season_id', flat=True).distinct().reverse()
#reversed(list(season_ids)) 
```

感谢@NPE 和@xpanta

# java - 使用 ffmpeg 从图像创建视频文件

> ID：10395136
> 
> 赞同：3
> 
> 时间：2012-05-01T08:06:52.757
> 
> 标签：java, android, android-ndk

我能够编译并将 ffmpeg 添加到我的项目创建的 Android.mk 文件中的 jni 文件夹现在我想使用 ffmpeg 从我存储在我的静态数组列表中的图像创建一个视频文件

我搜索了很多，但找不到任何教程，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:41:51.680

我有类似的需求并完成了同样的工作。有两种方法可以做到这一点。我想先分享一个更简单的。

*   在 Android 中创建一个临时文件夹。

*   将图像复制到新文件夹中

*   首先，重命名您的图片以遵循数字顺序。例如，img1.jpg, img2.jpg, img3.jpg,... 然后你可以运行：

*   以编程方式运行此程序`ffmpeg -f image2 -i img%d.jpg /tmp/a.mpg`

要以编程方式运行它，

使用以下代码：

```
void convertImg_to_vid()
{
    Process chperm;
    try {
        chperm=Runtime.getRuntime().exec("su");
          DataOutputStream os = 
              new DataOutputStream(chperm.getOutputStream());

              os.writeBytes("ffmpeg -f image2 -i img%d.jpg /tmp/a.mpg\n");
              os.flush();

              chperm.waitFor();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

开始吧。我会帮你的。。一切顺利

使用教程：[http](http://ffmpeg.org/faq.html) : //ffmpeg.org/faq.html 特别通读教程中的 3.2 部分。

为了能够运行上述命令，您应该在 bin 目录中有 ffmpeg 命令。ffmpeg 二进制文件应针对 Android 平台进行交叉编译...

# iphone - 如果应用程序意外关闭，如何重新启动应用程序

> ID：10395142
> 
> 赞同：17
> 
> 时间：2012-05-01T08:07:13.237
> 
> 标签：iphone, ios, sdk, background, restart

[Skype 更新文本](http://www.iclarified.com/entry/index.php?enid=21659)包含下一个：

> 如果意外关闭，应用程序会自动重启

如何通过 SDK 执行该操作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T08:30:08.933

As far as I know, some sort of apps can be run in background and can be restarted in specific case. This is from Apple docs

[https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125)

> If you start this service and your application is subsequently terminated, the system automatically relaunches the application into the background if a new event arrives. In such a case, the options dictionary passed to the application:didFinishLaunchingWithOptions: method of your application delegate contains the key UIApplicationLaunchOptionsLocationKey to indicate that your application was launched because of a location event.

My opinion is: Skype is relaunched with remote notifications mechanism.

**Update**

Well, I think I found something. @Malek_Jundi was half-right. Your app should fail with non-zero exit code, but it should be registered as VoIP application.

> Because VoIP applications need to stay running in order to receive incoming calls, the system automatically relaunches the application if it exits with a nonzero exit code. (This could happen in cases where there is memory pressure and your application is terminated as a result.) However, terminating the application also releases all of its sockets, including the one used to maintain the VoIP service connection. Therefore, when the application is launched, it always needs to create its sockets from scratch.

[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW12](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T03:33:11.083

Skype 正是这样做的：

1.  为 VoIP 注册它的 TCP 套接字。
2.  登录。
3.  在非零退出代码时，iOS 将重新启动应用程序（因为 VoIP 应用程序需要保持运行才能接收来电，如果应用程序以非零退出代码退出，系统会自动重新启动应用程序。）。
4.  然后它立即启动后台任务（重新启动的应用程序保持挂起）。
5.  接下来，它为 VoIP 注册它的登录套接字。
6.  它重新登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T08:16:34.587

据我所知，它不可能重新启动您的应用程序..您可以使用杀死您的应用程序，`exit(1);` 但这是 Apple 不允许的，将被拒绝。也许您可以通过从 mainViewController 中删除一些视图并再次添加它并重置数据和内容来做一些解决方法.. 但是我不这么认为要真正重新启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T08:20:53.950

不确定 Skype 有什么问题，但是 - 不幸的是，无法重新启动应用程序。甚至，没有办法退出/退出应用程序。（要退出，请参阅[此](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)链接部分“不要以编程方式退出”）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-24T19:38:29.010

问题是你为什么要这样做？，如果你的答案是：你想让一个应用程序在“iPad Kiosk”中运行，所以万一它崩溃了，你需要应用程序自动重启，那么，什么对你有用将 iPad 置于“ **Kiosk 模式**”，操作系统会在崩溃时自动重新启动应用程序。

看一眼：

[http://www.webascender.com/Blog/ID/447/How-to-Setup-Kiosk-Mode-Lock-Your-iPad-to-Just-One-App](http://www.webascender.com/Blog/ID/447/How-to-Setup-Kiosk-Mode-Lock-Your-iPad-to-Just-One-App)

干杯，

# html - 保护 Sub-Div 背景

> ID：10395148
> 
> 赞同：0
> 
> 时间：2012-05-01T08:07:36.667
> 
> 标签：html, css

我有一个 div（在 div 内），当我更改上部 div 的背景时，我想保持其背景不变。

有没有办法保留子 div 的背景属性？

PS：我无法手动将子 div 的背景更改为其旧值。那是因为它有

```
td.name:before {
    clip: rect(0px, 490px, 20px, 0px);
    white-space: nowrap;
    content:
    position: absolute;
    z-index: -1;
} 
```

在里面，当我改变页面的背景时，我失去了“内容”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:11:17.293

如果明确设置，您孩子的背景不会受到其父母背景的影响。在下面的示例中，您可以看到我们为两个元素显式设置了背景规则。因此，父背景不会影响子背景。

color 属性不是这种情况。因为我们为父级而不是子级设置它，所以子级从父级继承其颜色。

```
<style>
  #parent {
    background: red;
    color: white;
  }
  #child {
    background: green;
  }
</style>
<div id="parent">
  <p>I am white text</p>
  <div id="child">
    <p>I am also white text</p>
  </div>
</div> 
```

演示：http: [//jsbin.com/emajit/edit#html,live](http://jsbin.com/emajit/edit#html,live)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:14:20.687

子 div 的堆栈顺序导致了问题。更改“z-index”值并完成。

# vb6 - 退出函数前的“On Error Goto 0”

> ID：10395149
> 
> 赞同：2
> 
> 时间：2012-05-01T08:07:44.480
> 
> 标签：vb6, error-handling

MzTools 中的默认错误处理程序模板是：

```
On Error GoTo {PROCEDURE_NAME}_Error

    {PROCEDURE_BODY}

   On Error GoTo 0
   Exit {PROCEDURE_TYPE}

{PROCEDURE_NAME}_Error:

    MsgBox "Error " & Err.Number & " (" & Err.Description & ") in procedure {PROCEDURE_NAME} of {MODULE_TYPE} {MODULE_NAME}" 
```

请注意，`On Error Goto 0`它直接放在 Exit 语句之前。这样做有什么意义？似乎是多余的。当函数退出时，函数的错误处理程序无论如何都会关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:21:30.317

`on error goto 0`关闭当前范围内的错误处理并恢复为默认情况*。*

在这种情况下，过程希望错误处理程序在函数执行期间处于活动状态，但它希望在退出时将其关闭。正如您所说，在这种情况下没有必要，因为错误处理程序的范围是，`{PROCEDURE_TYPE}`所以它将在退出时恢复。

但有时，编码人员（尤其是那些生成模板的编码人员）喜欢自行清理，即使技术上没有必要，例如在退出之前释放 C 程序中分配的内存。

这就是我怀疑的情况，这实际上*只是*假设。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:14:31.983

这不是关闭当前的错误处理程序，而是清除`Err`对象。

尝试这个

```
Option Explicit

Private Sub Command1_Click()
    pvTest
    MsgBox Err.Description
End Sub

Private Sub pvTest()
    On Error Resume Next
    Debug.Print 1 / 0
'    On Error GoTo 0
End Sub 
```

然后删除注释行。

# spring - 访问 Web 应用程序包中的 Spring 配置文件

> ID：10395152
> 
> 赞同：3
> 
> 时间：2012-05-01T08:08:32.150
> 
> 标签：spring, osgi, eclipse-virgo

我很难让 Spring 项目在 Virgo 3.0.2 上运行，更准确地说是读取 applicationContext 文件，这是我的 StackTrace：

```
[2012-05-01 09:44:37.681] DEBUG Thread-130                      o.e.gemini.web.tomcat.internal.loading.BundleWebappClassLoader      Searching the application's bundle 
[2012-05-01 09:44:37.681] TRACE Thread-130                   org.springframework.osgi.util.DebugUtils                          Could not find class [org.springframework.web.context.ContextLoaderListener] required by [null(BizTouch.Web)] scanning available bundles 
[2012-05-01 09:44:37.682] DEBUG Thread-130                   o.e.gemini.web.tomcat.internal.loading.BundleWebappClassLoader    loadClass(org.eclipse.gemini.web.tomcat.internal.loading.BundleWebappClassLoader, false) 
[2012-05-01 09:44:37.682] DEBUG Thread-130                   o.e.gemini.web.tomcat.internal.loading.BundleWebappClassLoader      Searching the application's bundle 
[2012-05-01 09:44:37.683] TRACE Thread-130                   org.springframework.osgi.util.DebugUtils                          Could not find class [org.eclipse.gemini.web.tomcat.internal.loading.BundleWebappClassLoader] required by [null(BizTouch.Web)] scanning available bundles 
[2012-05-01 09:44:37.683] ERROR Thread-130                   o.a.c.core.ContainerBase.[Catalina].[localhost].[/BizTouch.Web]   Error configuring application listener of class org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.eclipse.gemini.web.tomcat.internal.loading.BundleWebappClassLoader.loadClass(BundleWebappClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
    at      org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4660)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:619) 
```

我的清单文件：

```
Manifest-Version: 2.0
Tool: Bnd-0.0.386
Meta-Persistence: META-INF/persistence.xml
Bundle-Name: com.apptivit.biztouch.web
DynamicImport-Package: *
Bundle-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-SymbolicName: com.apptivit.biztouch.web
Import-Library: org.springframework.spring;version="[3.0.5.RELEASE,3.0.5.RELEASE]"
Import-Bundle: com.springsource.com.mysql.jdbc;version="[5.1.6,5.1.6]"
Import-Package: com.apptivit.biztouch.business.timeline;com.apptivit.biztouch.dao;javax.el;javax.servlet;javax.servlet.http;javax.servlet.jsp;javax.servlet.jsp.el;javax.servlet.jsp.tagext;com.apptivit.biztouch.models;org.eclipse.virgo.web.dm
Bundle-Vendor: Apptiv-IT
Web-ContextPath: BizTouch.Web
Spring-Context: WEB-INF/spring/appServlet/appServlet-context.xml 
```

我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
    <!-- The definition of the Root Spring Container shared by all Servlets 
        and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.eclipse.virgo.web.dm.ServerOsgiBundleXmlWebApplicationContext</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/appServlet-context.xml</param-value>
        </init-param>
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.osgi.web.context.support.OsgiBundleXmlWebApplicationContext</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

如果需要，我已准备好提供完整的项目，我尝试了各种配置，但总是遇到同样的问题。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:58:05.177

问题是：

> ClassNotFoundException：org.springframework.web.context.ContextLoaderListener

您的应用程序没有导入这个包，并且类加载器找不到这个类，要解决这个问题，您需要在清单中添加 import 语句：

> 导入包：org.springframework.web.context;version="[3.0.5.RELEASE,3.0.5.RELEASE]"

并且可能是您在 web.xml 中使用的其他内容，例如：

```
org.eclipse.virgo.web.dm
org.springframework.web.servlet
org.springframework.osgi.web.context.support 
```

# java - 如何在android中找到特定的数据库和表已经存在或不存在

> ID：10395154
> 
> 赞同：1
> 
> 时间：2012-05-01T08:08:48.170
> 
> 标签：java, android, sqlite, mobile-application

我是一名新的 android 开发人员，正在开发一个具有登录屏幕的应用程序。

当应用程序启动时，它会检查数据库 (LoginDB) 是否存在。如果它不存在，那么我想创建数据库，创建表并插入 1 行。如果数据库存在，那么它将继续执行应用程序。

您如何确定特定数据库是否存在以及所需的表是否已经存在。

我使用的**是安卓 2.2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:20:15.093

SQLiteOpenHelper**类**有两个方法 onCreate 和 onUpdate 正是你需要的。如果没有数据库，那么它将调用 onCreate 方法，如果存在，它将调用 onUpdate 方法。查看[Vogellas 网站](http://www.vogella.com/articles/AndroidSQLite/article.html)以获取一个很好的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:23:50.687

查找表是否存在于特定的数据库中。

```
SQLiteDatabase db = openOrCreateDatabase("your db file name",
            SQLiteDatabase.CREATE_IF_NECESSARY, null);
Cursor cursor = db.query("sqlite_master", new String[] { "name" },
                "name=" + "'your table name'", null, null, null, null);
if (cursor.getCount() <= 0) {
   //Table is not exists
}
else 
{
   //table is exists
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:29:58.870

Using this query you can check whether table is exist in DB or not,

```
SELECT name FROM sqlite_master WHERE type='table' AND name='table_name'; 
```

otherwise,

in onCreate of database helper you have to use create query like as follow,

```
CREATE TABLE IF NOT EXISTS "+tablename+" ( "+ colums+");"); 
```

# javascript - Dojo.Query 问题：通过类名使用 `dojo.query` 获取类的元素

> ID：10395156
> 
> 赞同：0
> 
> 时间：2012-05-01T08:09:04.537
> 
> 标签：javascript, class, dojo

与我的[问题](https://stackoverflow.com/q/10382901/1134935)相关，我在获取所有元素时遇到了麻烦，我想使用`dojo.query` 我的代码获取类的所有元素，如下所示；

```
var jsonRoles = {"roles": [
                            {"roleId": "1", "roleName": "role1", "roleDesc": "This is role1"},
                            {"roleId": "2", "roleName": "role2", "roleDesc": "This is role2"},
                            {"roleId": "3", "roleName": "role3", "roleDesc": "This is role3"}
                        ]
                    };
                    var results="";
                    for(var i=0;i<jsonRoles.roles.length;i++){
                        results += '<div class="dojoDndItem ">' + '<span style="visibility: hidden">' + jsonRoles.roles[i].roleId + '</span>' + jsonRoles.roles[i].roleName  + '</div>';
                    }
                    var list = dojo.query(".dojoDndItem"); 
```

我想将具有类名的元素存储`dojoDndItem`在变量“ **list** ”中，但是当我在**firebug中检查“** **list** ”时，它给了我**“[]”（空数组）**。难道我做错了什么？

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:29:42.067

[`dojo.query`](http://dojotoolkit.org/reference-guide/1.7/dojo/query.html) returns an array of matching [DOM nodes](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247) from the page based on a CSS selector.

The variable `results` in your question is just a string with text like:

```
<div class="dojoDndItem"><span style="visibility: hidden">... 
```

It's *just a string*. It's not an array of DOM elements, nor have you added any new elements to the page DOM itself, so unless there are pre-existing elements with the `dojoDndItem` class, empty array `[]` is the correct result.****

# java - 实现具有稀疏通用功能的子类

> ID：10395158
> 
> 赞同：3
> 
> 时间：2012-05-01T08:09:25.853
> 
> 标签：java, subclassing

我正在构建一个包含大量类的系统，所有这些类都共享通用功能，但也有少量由重叠的类子集共享的功能。实现这一点的最佳方法是什么？

我将以 SVG 为例（我正在为化学实现一个子集），尽管我在其他领域（例如化学）也有示例。这个问题和相关问题在 XML 模式中有明确的、不可变的设计规范。

有一个`SVGElement`具有许多通用功能的基类。所有其他类 ( `SVGLine`, `SVGCircle`...) 都直接派生自此。然后，它们具有规范中定义的其他功能（通过 XML 属性），例如：

```
 - x
 - width
 - fill
 - opacity 
```

还有很多。请注意，设计是给定的——我们不能重新创建新的元素或属性。例如 SVG 既有`circle`and `ellipse`（经典问题），一个使用`r(adius)`，另一个使用`width`and `height`。在子类共享通用功能的地方，它们可以使用通用代码。

似乎有以下解决方案：

*   在每个子类中实现每个函数。（容易出错且乏味）
*   实现超类（SVGElement）中的所有功能并使派生方法无操作。（对于开发人员来说，臃肿、不可读和令人沮丧）
*   创建接口 ( `hasWidth`) 并为每个 ( `WidthImplementor`) 创建一个委托子类。然后每个类都有一个接口列表（每个 SVG 属性最多可能有 20 个），并且可能有 100-200 个这样的实现者。
*   从架构自动生成代码。我已经尝试过了，它运行起来很笨拙，但我没有一个漂亮的实现。它也不容易维护（注意大多数 XML-to-Java 系统不适合构建库系统，所以我必须自己做很多事情）

也许还有其他人。

我知道还有其他关于如何设计抽象的 SO 问题，但在这里基本上是固定的。我想要一个通用的解决方案，而不仅仅是一个 SVG 解决方案（用作一个可以理解的示例）。例如，化学标记语言 (CML) 也有 100-200 个子类和 100-200 个属性，分布在一个稀疏矩阵中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:06:01.260

您可能需要考虑将“通用”功能实现为“[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)”。然后，您可以在解析 SVG 元素时在运行时应用这些装饰器。

```
abstract class SVGElement {

    public void draw (void) {
        return;
    }

    public boolean hasWidth (void) {
        return false;
    }

    public boolean hasHeight (void) {
        return false;
    }

    // ..
}

// An abstract decorator
abstract class SVGElementDecorator extends SVGElement {

    protected SVGElement decoratedElement;

    public SVGElementDecorator (SVGElement decoratedElement) {
        this.decoratedElement = decoratedElement;
    }

    public void draw (void) {
        decoratedElement.draw ();
    }
}

// Decorator to add width functionality
class WidthDecorator extends SVGElementDecorator {

    private double width;

    public WidthAndHeightDecorator (SVGElement decoratedElement) {
        super(decoratedElement);
    }

    // override base class implementation
    public boolean hasWidth (void) {
        return true;
    }

    // implement a new method
    public double getWidth (void) {
        return width;
    }

    public void draw (void) {

        // do special stuff for width
        // ..

        // then draw the rest
        decoratedElement.draw ();
    }
} 
```

然后，当你看到一个椭圆时：

```
SVGElement ellipse = new SVGElement();
ellipse = new WidthDecorator (ellipse);
ellipse = new HeightDecorator (ellipse); 
```

# objective-c - 从 AppDelegate 访问其他 Class 实例

> ID：10395159
> 
> 赞同：1
> 
> 时间：2012-05-01T08:09:40.740
> 
> 标签：objective-c, ios

我有一个名为 ContentController 的类。我从 ViewController 创建它的实例。第一个家伙从我的远程服务器获取一些数据，在上面做一些事情。然后它将信息传递给 ViewController，向用户展示一些好的东西。到现在为止还挺好。

现在，问题出在使用 AppDelegate 时。当应用程序尝试进​​入后台模式时，我想访问同一个实例（ContentController）。并在设备上保存一些属性。这是行不通的。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:19:43.033

如果您真的想从 AppDelegate 访问 ContentController 实例，您可以在 AppDelegate 中创建一个属性。

```
//AppDelegate.h
@property (strong, nonatomic) ContentController *contentController; 
```

当您需要在 ViewController 中使用它时，您可以使用，

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
appDelegate.contentController = [[ContentController alloc] init]; 
```

或者您可以在我们的 ViewController 类中创建一个指向 AppDelegate 实例的属性。

```
self.contentController = appDelegate.contentController; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:01:31.087

从您的 ContentController 注册通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillResignActive:)     name:UIApplicationWillResignActiveNotification object:nil]; 
```

并在 Content 控制器中实现一个`applicationWillResignActive:`方法来做任何你想做的事情。

```
- (void)applicationWillResignActive:(NSNotification *)notification
{
   // Your server calls
} 
```

[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Notifications/Articles/Registering.html#//apple_ref/doc/uid/20000723-98481-BABHDIGJ](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Notifications/Articles/Registering.html#//apple_ref/doc/uid/20000723-98481-BABHDIGJ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:00:23.150

要在 applicationDidEnterBackground 上保存属性值：您可以在类的 viewDidLoad 方法中添加一个通知观察者，如下所示：

```
UIApplication *app = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillResignActive:) name:UIApplicationWillResignActiveNotification object:app]; 
```

在 viewDidUnload 你应该添加这个：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

还将这两种方法添加到您的类 .m 文件中（您可以在下面看到我的一个应用程序中的示例）：

```
- (void)applicationWillResignActive:(NSNotification *)notification {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        [array addObject:[NSNumber numberWithInt:self.event.eventID]];
        [array addObject:self.event.eventName];
        [array addObject:[NSNumber numberWithDouble:[self.event.ticketPrice doubleValue]]];

        [array writeToFile:[self dataFilePath] atomically:YES];
        [array release];
    } 
```

此方法将从您的文件中加载数据，在您的 viewDidLoad 中调用：

```
- (void)loadEventFromEventPlist {
    NSString *filePath = [self dataFilePath];
    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
        NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];
        self.event.eventID = [[array objectAtIndex:0] intValue]; 
        self.event.eventName = [array objectAtIndex:1];
        self.event.ticketPrice = [NSNumber numberWithDouble:[[array objectAtIndex:2] doubleValue]];
        [array release];
    }
} 
```

获取文件名需要此方法：

```
- (NSString *)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
} 
```

# javascript - 如果函数的 toString() 以“bound:”开头，这意味着什么？

> ID：10395160
> 
> 赞同：1
> 
> 时间：2012-05-01T08:09:43.710
> 
> 标签：javascript

在 chrome 开发者控制台中，输入`$x.toString()`（`$x`是开发工具控制台的内置功能之一）。输出如下所示：

```
"bound: function (xpath, context)
    {
        var doc = (context && context.ownerDocument) || inspectedWindow.document;
        var result = doc.evaluate(xpath, context || doc, null, XPathResult.ANY_TYPE, null);
        switch (result.resultType) {
        case XPathResult.NUMBER_TYPE:
            return result.numberValue;
        case XPathResult.STRING_TYPE:
            return result.stringValue;
        case XPathResult.BOOLEAN_TYPE:
            return result.booleanValue;
        default:
            var nodes = [];
            var node;
            while (node = result.iterateNext())
                nodes.push(node);
            return nodes;
        }
    }" 
```

第一行中的“绑定：”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:56:26.623

`$x`是 webkit 开发者工具控制台中的一个内置函数，如`$`，`$$`等等。（[`CommandLineAPI`](http://code.google.com/p/webkit-mirror/source/browse/Source/WebCore/inspector/InjectedScriptSource.js#546)用于控制台脚本评估）覆盖所有控制台方法的`toString`函数以包含`"bound: "`前缀：

```
function bind(thisObject, memberFunction)
{
    var func = memberFunction;
    var args = Array.prototype.slice.call(arguments, 2);
    function bound()
    {
        return func.apply(thisObject, args.concat(Array.prototype.slice.call(arguments, 0)));
    }
    bound.toString = function() {
        return "bound: " + func;
    };
    return bound;
} 
```

可以在[此处](http://code.google.com/p/webkit-mirror/source/browse/Source/WebCore/inspector/InjectedScriptSource.js#578)找到以这种方式包装的控制台功能的完整列表。

# python - 为什么 python scrapy 显示“twisted.internet.error.TimeoutError”错误

> ID：10395161
> 
> 赞同：1
> 
> 时间：2012-05-01T08:10:07.420
> 
> 标签：python, scrapy

我正在尝试使用 python scrapy 废弃页面。在一些报废操作后，scrapy 正在退出显示

```
twisted.internet.error.TimeoutError error 
```

这是我的代码：

```
#infobel_spider.py
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http.request import Request
from scrapy.http import FormRequest
from infobel.items import InfobelItem
import sys
import xlwt
import re
import codecs    

class InfobelSpider(BaseSpider):
    name = 'infobel'
    start_urls = ['http://www.infobel.com/en/italy/business/20300/accessories']

    def parse(self,response):

        hxs = HtmlXPathSelector(response)

        next_page = hxs.select("//a[@id='Pagination1_lnkNextRec']/@href").extract()
        if not not next_page:
             yield Request("http://www.infobel.com"+next_page[0],self.parse)

        qs = hxs.select("//div[@class='result-item clearfix']")
        items = []
        for q in qs:
            item = InfobelItem()
            item['name'] = q.select('div/div/h2/a/span/text()').extract()
            item['address'] = q.select('div/div/ul/li[1]/div/span/text()').extract()
            item['phone'] = q.select('div/div/ul/li[2]/div/text()').extract()
            item['email'] = q.select('div/div/ul/li[3]/div/a/text()').extract()
            item['website'] = q.select('div/div/ul/li[4]/div/a/@href').extract()
            item['category'] = q.select("div/div[@class='categories']/div/ul/li/text()").extract()
            items.append(item)
        for item in items:
            yield item

#items.py    
from scrapy.item import Item, Field

class InfobelItem(Item):
    # define the fields for your item here like:
    name = Field()
    address = Field()
    phone = Field()
    email = Field()
    category = Field()
    website = Field()

#middlewares.py    
import base64
import random
from settings import PROXIES

class ProxyMiddleware(object):
    def process_request(self, request, spider):
        proxy = random.choice(PROXIES)
        if proxy['user_pass'] is not None:
            request.meta['proxy'] = "http://%s" % proxy['ip_port']
            encoded_user_pass = base64.encodestring(proxy['user_pass'])
            request.headers['Proxy-Authorization'] = 'Basic ' + encoded_user_pass
        else:
            request.meta['proxy'] = "http://%s" % proxy['ip_port']

#pipelines.py
from scrapy.contrib.loader import ItemLoader
from scrapy.contrib.loader.processor import TakeFirst, MapCompose, Join
import re
import json
import csv

class InfobelPipeline(object):
    def __init__(self):
        self.file = csv.writer(open('items.csv','wb'))
    def process_item(self, item, spider):
        name = item['name']
        address = item['address']
        phone = item['phone']
        email = item['email']
        category = item['category']
        website = item['website']
        self.file.writerow((name,address,phone,email,category,website))
        return item

#settings.py    
BOT_NAME = 'infobel'
BOT_VERSION = '1.0'

SPIDER_MODULES = ['infobel.spiders']
NEWSPIDER_MODULE = 'infobel.spiders'
DEFAULT_ITEM_CLASS = 'infobel.items.InfobelItem'
USER_AGENT = '%s/%s' % (BOT_NAME, BOT_VERSION)
ITEM_PIPELINES = ['infobel.pipelines.InfobelPipeline']
PROXIES = [{'ip_port': '41.43.31.226:8080', 'user_pass': ''},
           {'ip_port': '64.120.226.94:8080', 'user_pass': ''},
           {'ip_port': '196.2.73.246:3128', 'user_pass': ''},]
DOWNLOADER_MIDDLEWARES = {
    'scrapy.contrib.downloadermiddleware.httpproxy.HttpProxyMiddleware': 110,
    'infobel.middlewares.ProxyMiddleware': 100,
} 
```

这是输出：

```
[infobel] INFO: Passed InfobelItem(website=[u'track.aspx?id=0&url=http://www.bbmodena.it'], category=[u'TELEVISION, VIDEO AND HI-FI EMERGENCY BREAKDOWN SERVICES, REPAIRS AND SPARE PARTS'], name=[u'B &amp; B (S.R.L.) (RIP.TVC VIDEO HI-FI)'], phone=[u'059254545'], address=[u'V. MALAVOLTI\xa047', u'41100', u'MODENA'], email=[u'info@bbmodena.it'])
[infobel] DEBUG: Scraped InfobelItem(website=[u'track.aspx?id=0&url=http://sitoinlavorazione.seat.it/boninispa'], category=[u'AUTOMOBILE AGENTS, DEALERS AND DEALERSHIPS'], name=[u'BONINI (S.P.A.) (CONCESSIONARIA RENAULT)'], phone=[u'035310333'], address=[u'V. S. BERNARDINO\xa0151', u'24126', u'BERGAMO'], email=[u'info@boniniautospa.it']) in <http://www.infobel.com/en/italy/business/20300/accessories>
[infobel] INFO: Passed InfobelItem(website=[u'track.aspx?id=0&url=http://sitoinlavorazione.seat.it/boninispa'], category=[u'AUTOMOBILE AGENTS, DEALERS AND DEALERSHIPS'], name=[u'BONINI (S.P.A.) (CONCESSIONARIA RENAULT)'], phone=[u'035310333'], address=[u'V. S. BERNARDINO\xa0151', u'24126', u'BERGAMO'], email=[u'info@boniniautospa.it'])
[infobel] DEBUG: Retrying <GET http://www.infobel.com/en/italy/business/20300/accessories/10> (failed 1 times): 200 OK
[infobel] DEBUG: Retrying <GET http://www.infobel.com/en/italy/business/20300/accessories/10> (failed 2 times): 200 OK
[infobel] DEBUG: Discarding <GET http://www.infobel.com/en/italy/business/20300/accessories/10> (failed 3 times): User timeout caused connection failure.
[infobel] ERROR: Error downloading <http://www.infobel.com/en/italy/business/20300/accessories/10>: [Failure instance: Traceback (failure with no frames): <class 'twisted.internet.error.TimeoutError'>: User timeout caused connection failure.

[infobel] INFO: Closing spider (finished)
[infobel] INFO: Spider closed (finished) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-11-26T18:29:50.083

I've found this question having the same problem. The user asking has solved his on his own, I'm posting it here so it is more visible:

Setting a delay between downloading pages from a site can help with timeout errors resulting from too frequent requests to it. This is done via the DOWNLOAD_DELAY parameter in the project's settings.py file.

[The Scrapy documentation](http://doc.scrapy.org/en/latest/topics/settings.html#std:setting-DOWNLOAD_DELAY) has this to say:

> The amount of time (in secs) that the downloader should wait before downloading consecutive pages from the same website. This can be used to throttle the crawling speed to avoid hitting servers too hard. Decimal numbers are supported. Example:
> 
> DOWNLOAD_DELAY = 0.25 # 250 ms of delay

# Update from comment

In addition to DOWNLOAD_DELAY, if the RANDOMIZE_DOWNLOAD_DELAY setting parameter is True, Scrapy will sample a delay a factor of 0.5 to 1.5 of the DOWNLOAD_DELAY. Their documentation adds

> This randomization decreases the chance of the crawler being detected (and subsequently blocked) by sites which analyze requests looking for statistically significant similarities in the time between their requests.

Note that RANDOMIZE_DOWNLOAD_DELAY is True by default.

# java - 如何获取用户输入并写入文件 - Java

> ID：10395162
> 
> 赞同：-3
> 
> 时间：2012-05-01T08:10:15.577
> 
> 标签：java, file, input

我想知道是否有办法将文本写入用户输入是或否的文本文件。我正在制作密码生成器，我想知道是否可以询问用户是否要保存密码，如果是，那么它将保存到文本文件中以供以后使用。

```
import java.util.Random;

public class pwdgencmd {
    public static void main(String args[]) {

        Random random = new Random();
        char l1 = (char)(random.nextInt(26) + 'A');
        int RI1 = new Random().nextInt(9) + 1;
        char l2 = (char)(random.nextInt(26) + 'A');
        char l5 = (char)(random.nextInt(26) + 'A');
        char l6 = (char)(random.nextInt(26) + 'A');
        char l7 = (char)(random.nextInt(26) + 'a');
        char l9 = (char)(random.nextInt(26) + 'a');
        int RI5 = new Random().nextInt(9) + 1;
        int RI6 = new Random().nextInt(9) + 1;
        int RI7 = new Random().nextInt(9) + 1;
        int RI8 = new Random().nextInt(9) + 1;
        int RI9 = new Random().nextInt(9) + 1;
        int RI10 = new Random().nextInt(9) + 1;
        char l3 = (char)(random.nextInt(26) + 'a');
        int RI3 = new Random().nextInt(9) + 1;
        char l4 = (char)(random.nextInt(26) + 'a');
        int RI4 = new Random().nextInt(9) + 1;
        double version = 1.1;
        String password1 = ("l1 + RI1 + l3 + RI5 + l5 + l7 + RI8 + RI6 + RI7 + l6 + l9 + l3");
        String password2 = ("l4 + l5 + RI6 + l3 + RI8 + RI5 + l6 + l4 + RI5 + RI9 + l7 + l1");
        String password3 = ("l3 + RI8 + RI10 + l4 + RI5 + l7 + l6 + l1 + RI7 + RI1 + l5 + l6 +");
        String Print1 = ("(1)Your password is " + password1 + ".");
        String Print2 = ("(2)Your password is " + password2 + ".");
        String Print3 = ("(3)Your password is " + password3 + ".");

        System.out.println("#Made by Jackson Harris");
        System.out.println("[Version]You are using version: " + version +  " Ranting Reindeer.");

        System.out.println(Print1);
        System.out.println(Print2);
        System.out.println(Print3);
      }
 } 
```

我正在寻找的是询问“你想保存密码吗？y/n”，如果是，它将把密码保存到saved_pa​​sswords.txt。是否也可以保存评论？例如“你想为这个保存添加评论吗？y/n”如果是，那么也许你会输入“这是我的密码.....”，它会保存到文件中为“这是我的密码.....”，并在其下方的行中输入密码。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:13:27.373

对的，这是可能的。使用 FileOutputStream/FileWriter 写入文件。检查[甲骨文链接](http://docs.oracle.com/javase/tutorial/essential/io/file.html)

# jakarta-ee - 如何在 JBoss 远程 EJB 调用中获取客户端 IP 地址？

> ID：10395165
> 
> 赞同：3
> 
> 时间：2012-05-01T08:10:38.293
> 
> 标签：jakarta-ee, networking, jboss, client-server, rmi

在经典 JNDI 查找后通过 RMI/IIOP 调用 EJB StatelessBean 方法时，如何在服务器端获取客户端 IP 地址？

使用 JBoss 6.1，我尝试了该方法`java.rmi.server.RemoteServer#getClientHost`，但它抛出了`java.rmi.server.ServerNotActiveException: not in a remote call`. 有什么方法可以获取信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T23:01:11.770

它仍然嵌入在 JBoss 6.1 的线程中吗？

```
 String currentThreadName = Thread.currentThread().getName(); 
```

然后从那里解析？

# php - PHP preg_match 边界内的单词

> ID：10395166
> 
> 赞同：0
> 
> 时间：2012-05-01T08:10:45.217
> 
> 标签：php

我有一些文件要使用 preg_match 扫描模式，例如：

**文件名：**

```
(a group: one)
one.txt 

(another group: one-aaa)
one-aaa.txt
one-aaa_1.txt
one-aaa_b.txt
one-aaa_3.txt
one-aaa_whatever.txt

(some other group: one-bbb)
one-bbb.jpg
one-bbb_1.txt
one-bbb_2.txt
one-bbb_t.txt
one-bbb_whatever.txt 
```

该组由名称定义（因此：one、one-aaa、one-bbb 是不同的组），并且仅限于文件 .txt。

请不要建议使用不同的目录。这些文件已经分散在某些目录中，我需要一种按关键字而不是目录查找匹配项的方法。

现在我可以通过指定“one”、“one-aaa”等手动定义组，但是 preg_match 有问题。我的 preg_match 将“one”和“one-aaa”作为一个组返回：

```
$keyword = 'one';
$match = '/(^)' . $keyword . '(.*\.txt$)/';

$match = '/\b(' . $keyword . ')\b(.*\.txt$)/'; 
```

**预期回报：** one.txt

**意外返回：** one.txt one-aaa.txt 等

**更新 1：** 当关键字更改为“one-aaa”时，我希望它返回：one-aaa.txt、one-aaa_1.txt 等。我分组的方式是：

```
$keyword = str_replace('_', ' ', $file->name);
returns: one, one-aaa, one-bbb, etc 
```

我想用简单的英语说：

1.  查找以“one”开头的匹配项，返回：one_1.txt, one_2.txt
2.  查找以“one-aaa”开头的匹配项，返回：one-aaa_1.txt、one-aaa_2.txt 等

任何人都可以阐明正确的正则表达式吗？

谢谢

**更新 2：** 这里有人先前提供了避免贪婪的正则表达式的建议，并使用 .*? 相反，但答案已被删除。根据他的建议，它最终以这种方式工作：

```
$match = '/^\b(' . $keyword . ')\b(.*?.txt$)/'; 
```

我现在应该给谁分配答案？任何人都可以自愿写一个像上面这样的工作答案，或者改进它吗？

**更新3：** 哎呀，我说得太早了。它没有用，但是当我更改键|值对时，键以某种方式被重置，这就是为什么我失去了双重包含的原因。对不起，上面还是不行。

**更新 4：** 我终于用附加条件简单地排除了输出，如果它们与组不匹配。额外的代码和额外的扫描，不好，但至少它现在按预期工作。仍然使用上面建议的正则表达式。仍在寻找最终的正则表达式解决方案，如果有的话。如果否，那么“否”应该是选择的答案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:15:52.727

当然-“。*”允许其他字符进入。将其更改为：

```
$keyword = 'one';
$match = '/(^)' . $keyword . '(\.txt$)/';

$match = '/\b(' . $keyword . ')\b(\.txt$)/'; 
```

".*" 表示任何字符，出现 0 次或更多...

**编辑：**

看到你的更新后，假设 one_10 或 one_100 也可以存在。

你可以试试：`$match = '/^' . $keyword . '(_[0-9]+)?\.txt$/';`

这意味着在关键字之后可能会出现一个下划线和一个数字。

# c# - 导入 C# 应用程序的 C++ DLL

> ID：10395168
> 
> 赞同：0
> 
> 时间：2012-05-01T08:11:05.963
> 
> 标签：c#, c++, visual-studio, visual-c++

我正在尝试做一个基本的 C++ DLL 以便在 C# 中使用它。使用以下类：

我的cpp文件

```
#include "stdafx.h"    
#include "MathFuncsAssembly.h"

namespace MathFuncs
{
    double MyMathFuncs::Add(double a, double b)
    {
        return a + b;
    }

    double MyMathFuncs::Subtract(double a, double b)
    {
        return a - b;
    }

    double MyMathFuncs::Multiply(double a, double b)
    {
        return a * b;
    }

    double MyMathFuncs::Divide(double a, double b)
    {
        if (b == 0)
        {
            throw gcnew DivideByZeroException("b cannot be zero!");
        }

        return a / b;
    }
} 
```

我的头文件

```
using namespace System;

namespace MathFuncs
{
    public ref class MyMathFuncs
    {
    public:
        static double Add(double a, double b);

        static double Subtract(double a, double b);

        static double Multiply(double a, double b);

        static double Divide(double a, double b);
    };
} 
```

在我调用库的 C# 应用程序中

```
[DllImport("MathFuncsAssembly.dll")]
public static extern double Add(double a, double b);

static void Main(string[] args)
{
   Console.WriteLine(Add(10.0, 11.0));
   Console.ReadLine();
} 
```

(Add(10.0,11.0)) 部分发生异常。抛出以下异常： 尝试加载格式不正确的程序。（HRESULT 例外：0x8007000B）.. 有什么想法吗？另外，我将 .dll 文件复制到 c# 应用程序的 bin 中...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:01:27.787

如果你有一个 ref 类（因此是一个 C++/CLI dll），你根本不需要 DllImport：只需在 C# 项目中添加对 dll 的引用并调用函数'C#方式'即`MathFuncs.Add()`（注意你仍然需要确保平台匹配，并且 CLI dll 依赖的所有本机 dll 都在路径中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:18:01.630

当您尝试将 x32 DLL 与 x64 程序一起使用时，通常会发生这种情况，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:19:13.293

“格式不正确”异常总是意味着您正在加载为不同平台编译的模块，即 32 位和 64 位。确保您的 DLL 和您的 C# 应用程序针对同一平台进行编译。如果 C# 设置为“任何平台”，请明确选择您的 DLL 所针对的平台。

# php - Symfony2 表单中未定义的变量

> ID：10395175
> 
> 赞同：0
> 
> 时间：2012-05-01T08:11:48.987
> 
> 标签：php, forms, symfony

我刚开始使用 Symfony2 。我决定用 php 来实现我的表单，而不是学习 twig。我按照书中的说明进行操作，如下：

在控制器中：

```
public function editAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('MyBundle:MyEntity')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find MyEntity entity.');
    }

    $editForm = $this->createForm(new MyEntityType(), $entity);
    $deleteForm = $this->createDeleteForm($id);

    return $this->render('MyBundle:MyEntity:edit.html.php' array(
        'entity'      => $entity,
        'edit_form'    => $editForm->createView(),
        'delete_form'  => $deleteForm->createView()
    ));
} 
```

在edit.html.php中：

```
<form action="<?php echo $view['router']->generate('myentity_update', array('id'=>$entity->getId()))?>" method="post" <?php echo $view['form']->enctype($editForm) ?>>

   <?php echo $view['form']->widget($editForm)?>

  <p>
    <button type="submit">Save Changes</button>
  </p>
</form>
<ul class="record_actions">
<li>
    <a href="<?php $view['router']->generate('myentity') ?>">
        Back to the list
    </a>
</li>
<li>
    <form action="<?php $view['router']->generate('myentity_delete', array('id'=>$entity->getId()) ) ?>" method="post">
        <?php echo $view['form']->widget($deleteForm)?>
        <button type="submit">Delete</button>
    </form>
</li> 
```

当我尝试显示表单时出现错误：注意：未定义的变量 editForm

据我所知，我完全按照[书中](http://symfony.com/doc/current/book/forms.html)给出的说明进行操作。我已经尝试在操作和模板中用 $form 替换 $editForm 或在模板中用 edit_form 替换 $editForm - 不用说，这些都不起作用。

我非常感谢任何关于我下一步应该尝试什么的建议（或者我可能不得不辞职学习树枝，因为至少这方面的说明似乎是正确的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:45:23.513

您将变量传递给视图`edit_form`（数组键是要在视图中使用的变量的名称）：

```
return $this->render('MyBundle:MyEntity:edit.html.php' array(
    'entity'      => $entity,
    'edit_form'    => $editForm->createView(),
    'delete_form'  => $deleteForm->createView()
)); 
```

但是您在视图中将其引用为`$editForm`：

```
<form action="<?php echo $view['router']->generate('myentity_update',
    array('id'=>$entity->getId()))?>" method="post" <?php echo $view['form']->enctype($editForm) ?>> 
```

为两者（`edit_form`vs `editForm`）决定相同的方法，你应该很好。例如，在视图中`'edit_form'`变成`$edit_form`，对于`'editForm'`成为`$editForm`。

# java - JOptionPane.YES_OPTION == 每个按钮上的 ENTER

> ID：10395181
> 
> 赞同：6
> 
> 时间：2012-05-01T08:12:37.140
> 
> 标签：java, swing, joptionpane

我有一个像这样的选项对话框：

```
String[]  options = ["Yes", "No"]; //button names

int n = JOptionPane.showOptionDialog(singleFrameService.getFrame(),
        "Some Question?",
        "",
        JOptionPane.YES_NO_OPTION,
        JOptionPane.QUESTION_MESSAGE,
        null,     //do not use a custom Icon
        options,  //the titles of buttons
        options[0]); //default button title

//if press yes
if (n == JOptionPane.YES_OPTION){
    //make some if pressed Yes
} 
```

当我使用鼠标并按是/否时 - 一切正常......但是当我开始使用键盘时，按 TAB 转到“否”按钮，然后按 ENTER - 工作“是”选项

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-04T17:29:55.970

这将使 uimanager 处理焦点按钮。这将允许您使用输入或空格来选择焦点按钮。

```
UIManager.put("Button.defaultButtonFollowsFocus", Boolean.TRUE); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-01T08:26:09.870

这完全取决于外观，AFAIK。在您的 L&F 中，“Enter”的意思是“按默认按钮”（即是）。按下焦点按钮可能是通过按下空格键来完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:39:54.773

我需要 JOptionPane 以与响应空格键相同的方式响应返回键，这就是我成功的方法：我创建了一个新的 JOPtionPane 实例并调用它的 createDialog 方法来获取它的对话框窗口。

然后我将它的对话框窗口传递给下面的 listComponents(java.awt.Container) 方法，就成功了！

```
 private static index=0;
private static void listComponents(java.awt.Container c){
        if(c==null)return;
        for(java.awt.Component cc:c.getComponents())
            listComponents((java.awt.Container)cc);
        if(c instanceof javax.swing.JButton){
            buttons[index++]=(javax.swing.JButton)c;
            javax.swing.InputMap inputMap=buttons[index-1].getInputMap(javax.swing.JComponent.WHEN_FOCUSED);
            javax.swing.Action spaceAction=buttons[index-1].getActionMap().get(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_SPACE,0));
            inputMap.put(javax.swing.KeyStroke
.getKeyStroke(java.awt.event.KeyEvent.VK_ENTER,0),spaceAction);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:44:40.353

除了 JB Nizet 的回答，我还想提一下，如果我理解得很好，java 中的输入处理就是这样：

1.  焦点窗口中的组件
2.  有焦点的组件
3.  作为焦点容器祖先的组件

所有这些都与添加它们的顺序相反（我不是 100% 对此，但这是合乎逻辑的）。**现在，可以使用**inputEvent 了。在这种情况下，*输入*被按下的 JOptionPane 寄存器，并遍历具有绑定到输入事件的操作的组件集合。该`yes`按钮作为默认按钮使用**此**事件，因此其他组件无法对其进行任何操作。

您的问题的解决方案是您将不得不创建一个自定义 JDialog。给它一个消息标签、一个图标占位符和两个按钮。现在制作与您正在使用的 JOptionPane 相同的构造函数，并根据构造函数接收的参数为每个组件提供文本/图标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T09:14:36.593

除了 JB Nizet 的回答之外，我想建议您是否不能使用`ENTER`键来访问`Yes, No`按钮，而不是尝试禁用该键。这里有一些例子：

```
public class NewClass {

public static void main(String[] args) {
    JFrame frame = new JFrame();
    String[] options = {"Yes", "No"};

    int n = JOptionPane.showOptionDialog(frame,
            "Some Question? Press space bar to continue...",
            "",
            JOptionPane.YES_NO_OPTION,
            JOptionPane.QUESTION_MESSAGE,
            null, //do not use a custom Icon
            options, //the titles of buttons
            null); // disabled the ENTER Key

    System.out.println(n);

    if (n == JOptionPane.YES_OPTION) {
        System.out.println("Yes");
    } else {
        System.out.println("No");
    }

    System.exit(1);
}
} 
```

# alfresco - 获取 alfresco 取消的工作流程

> ID：10395182
> 
> 赞同：1
> 
> 时间：2012-05-01T08:12:50.770
> 
> 标签：alfresco

取消工作流是指物理上删除数据库中的processInstance、taskInstance等工作流相关，而不是逻辑上删除。因此，是否有可能取消工作流程？如果可能的话，让我知道如何处理样品。我还想获得工作流程取消日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:29:28.547

您是否考虑过使用 Activiti 工作流，或者因为兼容性问题而不得不继续使用 JBPM？Activiti 工作流默认将其历史记录存储在 act_hi_* 数据库表中，因此获取该数据比手动尝试触发取消 JBPM 流程要容易得多。

# ruby-on-rails - Rails：为 Heroku 正确设置 DNS、Rack-rewrite 等

> ID：10395184
> 
> 赞同：2
> 
> 时间：2012-05-01T08:13:01.877
> 
> 标签：ruby-on-rails, dns, rack-rewrite

我已经查看了整个互联网，但无法获得一个最终解决方案来解决我期望的 DNS 等 100% 正确设置以在 Heroku.com 上获得以下结果：

*   使用 mydomain.com 在 myapp.herokuapp.com 上显示内容
*   将所有流量从[http://mydomain.com](http://mydomain.com)重定向到[http://www.mydomain.com](http://www.mydomain.com)（包括子文件夹）

我可以从任何地方得到一些帮助，但没有任何结论可以解决从 DNS 到机架重写的整个问题，所以这就是我在这里问的原因（我的注册商和 Heroku 的支持只能给我“他们的一部分” ）。

据我了解，需要做的是：

1.  将 mydomain.com 和 www.mydomain.com 添加到 Heroku 的自定义域

2.  在我的注册商 DNS 中将CNAME 更改为[http://myapp.herokuapp.com 。](http://myapp.herokuapp.com)**问题**：会使用 CNAME 重定向到 myapp.herokuapp.com 的“www”和“*”吗？

3.  添加“@”DNS 记录以处理裸域请求 (http://mydomain.com)。由于这不会通过 CNAME 完成，因此我使用[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)上的 IP 号码，尽管根据文章它们存在严重的正常运行时间问题。

-- 1-3 给我留下了一个网站，它将同时为[http://mydomain.com](http://mydomain.com)和[http://www.mydomain.com](http://www.mydomain.com)提供服务，内容位于[http://myapp.herokuapp.com](http://myapp.herokuapp.com)

C。现在，我想将所有内容从[http://mydomain.com](http://mydomain.com)重定向到[http://www.mydomain.com](http://www.mydomain.com)，根据 Heroku 支持，这应该通过 rack-rewrite (https://github.com/jtrupiano /机架重写）。使用那里的示例，代码应该是：

```
r301 %r{.*}, 'http://mydomain.com$&', :if => Proc.new {|rack_env|
  rack_env['SERVER_NAME'] != 'www.mydomain.com'
} 
```

然而，这为我创造了一个永恒的循环。

**所以，我现在的问题是：**为了实现这个设置，Heroku 和 DNS 设置的正确工作流程是什么？

解决这个问题非常困难，因为通过反复试验尝试不同的 DNS 设置非常困难（很难知道它们是否已经通过）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T08:58:30.083

**这是重写规则**，我认为它是在说“执行 301 重定向到‘ [http://mydomain.com](http://mydomain.com) $&’（其中 $& 表示它将保留 .com 之后的所有内容），但前提是主机在请求不是“www.mydomain.com””。

因此，您将进入重定向循环，因为对您的服务器的任何请求，其中没有 www，例如裸 mydomain.com，将重定向回 mydomain.com。

它可能需要重写为：

```
r301 %r{.*}, 'http://www.mydomain.com$&', :if => Proc.new {|rack_env|
rack_env['SERVER_NAME'] == 'mydomain.com'} 
```

因此，您正在重定向到您域的 www 版本。

其实这里有[骗子](https://stackoverflow.com/questions/8831785/heroku-rack-rewrite)

**编辑：** 这就是我要做的：

1.  删除您的重定向规则
2.  设置您的 dns，以便 www.domain.com 和 domain.com 返回 myapp.herokuapp.com
3.  验证 dns 是否正常工作，而无需担心重定向
4.  确保在 DNS 级别它没有尝试做一些有用的重定向

在这个阶段，与 DNS 没有任何关系。他们唯一要做的就是返回一个 IP 地址（A 记录）或另一个域（CNAME）。然后他们的工作就完成了。

下一个：

1.  应用机架重写规则
2.  服务器可能需要重新启动 - 以防万一
3.  [使用Sam Spade](http://www.softpedia.com/get/Network-Tools/Network-Tools-Suites/Sam-Spade.shtml)之类的东西进行测试- 标头将包含 301 重定向和新位置（如果它工作正常）

# xml-parsing - 检测 Autocad（.DXF 或 DWG）导出的 xml 文件中的每个对象点

> ID：10395196
> 
> 赞同：0
> 
> 时间：2012-05-01T08:14:16.743
> 
> 标签：xml-parsing, autocad

我有 Autocad 文件 .DXF 或 .DWG，我将它们作为 XML 文件从 Autocad 导出。例如，这些文件用于房屋计划，带有花园和游泳池...我需要能够在 Web 应用程序上上传 xml 文件，然后读取每个对象，例如仅游泳池，我如何检测点在哪里xml 文件中的池，使用 Javascript。

问题是否明确或您需要更多详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:19:14.600

-1。您使用的是哪个版本的 ACAD？民用？

我相信这是 CIVIL 的格式。但我可能错了，我只有 Autocad 2011 标准。

见：[http ://www.landxml.org/](http://www.landxml.org/)

[http://www.landxml.org/webapps/landxmlsamples.aspx](http://www.landxml.org/webapps/landxmlsamples.aspx)（样本）

有关 ACAD XML 的更多信息，请参见：http: [//images.autodesk.com/latin_am_main/files/2144863_Autodesk_WP_XML-at-Autodesk.pdf](http://images.autodesk.com/latin_am_main/files/2144863_Autodesk_WP_XML-at-Autodesk.pdf) [http://forums.autodesk.com/t5/Visual-LISP-AutoLISP-and-General/如何阅读 XML 文件/td-p/2377688](http://forums.autodesk.com/t5/Visual-LISP-AutoLISP-and-General/How-To-Read-Xml-File/td-p/2377688)

-2。基本上，一旦您了解 ACAD XML 格式，只需搜索 XML 文件（文本文件）即可

见：[http ://snippets.dzone.com/posts/show/2719](http://snippets.dzone.com/posts/show/2719)

请参阅：[使用 JavaScript 从 XML 文件中搜索和输出数据](https://stackoverflow.com/questions/6648454/search-and-output-data-from-an-xml-file-using-javascript)（高级）

-3。然后只需使用 Javascript 将其解析为 HTML 页面。网站 HTML 文件对吗？

```
 <head>    
    <script type="text/javascript" src="loadxmldoc.js"></script>    
    </head>    
    <body>    

    <script type="text/javascript">    

    xmlDoc=loadXMLDoc("books.xml");    

    x=xmlDoc.getElementsByTagName("title")[0]    
    y=x.childNodes[0];    
    document.write(y.nodeValue);    

    </script>    
    </body>    
    </html> 
```

请提供有关您的开始格式和结束格式的更多详细信息。:)

这也将有助于回答这个问题。

# php - 创建（插入）数组索引

> ID：10395200
> 
> 赞同：1
> 
> 时间：2012-05-01T08:14:24.040
> 
> 标签：php, arrays

我已经像下面这样

```
[0]
{
    [0]=>'a'
    [2]=>'b'
    [5]=>'c'
    [6]=>'d'
} 
```

不，我想要的是插入未创建的数组索引并将它们的值设置为“0”。

例如：在这种情况下，我想要下面的输出而不是上面的输出。谁能给我看一个代码示例......我尝试使用array_fill（）但没有用它只是在最后插入数组索引。

```
array_fill($b1, 1, "0"); 
```

期望的输出：

```
[0]
    {
        [0]=>'a'
        [1]=>'0'
        [2]=>'b'
        [3]=>'0'
        [4]=>'0'
        [5]=>'c'
        [6]=>'d'
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:30:06.283

循环浏览您的阵列，观察按键。每当最后一次迭代与当前键的距离大于 1 时，执行一个短暂的 while 循环以赶上数组内容。

```
$newArray = array();
$lastKey = 0;

foreach ( $array as $key => $value ) {
  while ( $lastKey++ < $key ) $newArray[] = 0;
  $newArray[$key] = $value;
} 
```

输出是：

```
Array
(
    [0] => a
    [1] => 0
    [2] => b
    [3] => 0
    [4] => 0
    [5] => c
    [6] => d
) 
```

演示：[http ://codepad.org/9EnowzqL](http://codepad.org/9EnowzqL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:33:46.393

```
function fill_missing_keys($array)
{
    $arr_keys = array_keys ($array);
    $all_keys = range(0, max($arr_keys));  
    $missing_keys = array_diff($all_keys, $arr_keys);
    $zero_array = array_fill_keys ($missing_keys, '0');
    $filled_array = $array + $zero_array; 
    ksort($filled_array);
    return $filled_array;
} 
```

运行示例可以在这里找到：http: [**//ideone.com/jDU99**](http://ideone.com/jDU99)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:21:36.913

实际上首先想到的是在插入新元素*后按键（* [`ksort`^(*Docs*)](http://php.net/ksort)）对数组进行排序：

 *```
ksort($array); 
```

这可能已经解决了你的问题。其他一切都需要更多的工作。

**编辑：**如果您需要设置所有未设置，那也很简单：

```
$array = array(/* of set elements */);
$array += array_fill($start, $end, "0"); # fill only unset, array union operator
ksort($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:24:15.253

我相信（未经测试）这将起作用：

```
 // get the first used key
  list($firstkey, $firstval)=each(asort($input_array));
  $input_array[$firstkey]=$firstval;

  // get the last used key
  list($lastkey, $lastval)=each(arsort($input_array));
  $input_array[$lastkey]=$lastval;

  $output_array=array_replace(array_fill($firstkey, $lastkey, 0), $input_array); 
```*

# javascript - 浏览器检测和重定向

> ID：10395202
> 
> 赞同：0
> 
> 时间：2012-05-01T08:14:36.973
> 
> 标签：javascript, html, browser, redirect

> **可能重复：**
> [如何检测 Safari、Chrome、IE、Firefox 和 Opera 浏览器？](https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser)

我正在寻找一个脚本来检测每个浏览器并重定向到每个浏览器的特定页面，例如 chrome 用户转到 www.website.com/chrome，用户转到另一个，mozilla 用户转到另一个。

有人知道这样的脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:24:43.083

只需通过获取 HTTP_USER_AGENT 来检测您喜欢的语言的浏览器。

以下是一些示例代理。

```
Response.Write Request.ServerVariables("HTTP_USER_AGENT")

' Desktops
' ******************************************

' Firefox 4 MAC OS
' Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1

' Safari, MAC OS
' Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7; de-de) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1

' Chrome, MAC OS
' Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_7) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30

' Chrome, Windows 2008
' Mozilla/5.0 (Windows NT 6.0) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30

' IE 9, Windows 2008
' Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Trident/5.0; SLCC1; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E; .NET CLR 3.0.30729)

' Mobile
' ******************************************

' iPhone 4
' Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; de-de) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5

' Blackberry from OS v6
' Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en-US) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.141 Mobile Safari/534.1+

' Tablets:
' ******************************************

' Samsung Galaxa Tab Android
' Mozilla/5.0 (Linux; U; Android 2.2; en-us; SCH-I800 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

' Motorola Xoom Android
' Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13

' iPad
' Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B334b Safari/531.21.10

' iPad2
' Mozilla/5.0(iPad; U; CPU OS 4_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8F191 Safari/6533.18.5 
```

您可以获取代理的一些唯一关键字并重定向。由于您没有说哪种语言只是复制字符串并修改选择案例代码块，这应该适合您。

# asp.net-mvc-2 - Asp.net mvc 2 表单未通过 Ajax 发布到控制器

> ID：10395203
> 
> 赞同：0
> 
> 时间：2012-05-01T08:14:40.567
> 
> 标签：asp.net-mvc-2, asp.net-ajax

我正在尝试通过 ajax 将表单发布到我的控制器，以便我可以呈现部分视图。

这是我的 Ajax 代码

```
 var formCollection = $('#some-form');
 $(function(){ $('#some-form').submit(function(){
      $.ajax({
           type: "POST",
           url: "/Trusk/Index",
           data: formCollection,
           dataType: "html",
           success: function (result) {
               $('#newView').html(result);
           },
           error: function (request, status, error) {
               alert('Oh no!');
           }
     });
});
}); 
```

我的表单代码，我希望部分视图在 ID = newView 处呈现，部分视图由控制器返回

```
 <% using (Html.BeginForm(new { @id = "some-form" }))
           { %>
            <div id="TestDiv">
            <div id="Title">Test</div>                 
                <div id="CheckIn">Check-in:<br />
                <%:Html.TextBox("FromDate", "", new { @id = "DateFrom", @style =  "width:190px" })%></div>
                <div id="CheckOut">Check-out:<br />
                <%:Html.TextBox("ToDate", "", new { @id = "DateTo", @style =  "width:190px" })%><br /></div>
                <div id="newView">  
                </div>
                <input type="submit" value="Search" />        
        </div>
               </div>
        <% } %> 
```

我的控制器代码

```
 public ActionResult Index(FormCollection post)
    {
        ITruckRepository hotelRep = new TruckRepository();

        IEnumerable<Truck> AvailableTrucks = hotelRep.getTrucks('2012,3,2', '2012,3,5');

       return PartialView("Search", AvailableTrucks );

    } 
```

我是否通过 Ajax 将正确的参数传递给控制器​​？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:50:12.923

您的代码有几个问题：

*   您使用了 Html.BeginForm 方法的错误重载。在您使用的重载中，`id`是路由值，而不是 HTML 属性
*   在您的 .submit 回调中，您不会通过返回 false 来取消默认操作，因此当提交表单时，在浏览器重定向离开页面之前，AJAX 调用几乎没有时间执行
*   在 AJAX 调用的 data 参数中，您传递了一个 jQuery 对象，该对象表示`formCollection`您应该序列化数据时调用的表单。
*   你已经破坏了标记 => 有一个没有相应的开始元素的结束 div。

因此，让我们首先修复标记：

```
<% using (Html.BeginForm(null, null, FormMethod.Post, new { id = "some-form" })) { %>
    <div id="TestDiv">
        <div id="Title">Test</div>                 
        <div id="CheckIn">
            Check-in:<br />
            <%= Html.TextBox("FromDate", "", new { id = "DateFrom", style = "width:190px" }) %>
        </div>
        <div id="CheckOut">
            Check-out:<br />
            <%= Html.TextBox("ToDate", "", new { id = "DateTo", style = "width:190px" }) %>
            <br />
        </div>
        <div id="newView"></div>
        <input type="submit" value="Search" />        
    </div>
<% } %> 
```

然后是 AJAXify 表单的脚本：

```
$(function () {
    $('#some-form').submit(function () {
        $.ajax({
            type: this.method,
            url: this.action,
            data: $(this).serialize(),
            success: function (result) {
                $('#newView').html(result);
            },
            error: function (request, status, error) {
                alert('Oh no!');
            }
        });
        return false;
    });
}); 
```

现在您应该确保成功调用了相应的 POST 控制器操作并且正确传递了参数。还要确保在此控制器操作内和渲染局部视图时不会发生错误。使用诸如 FireBug 之类的 javascript 调试工具来准确查看正在发送的请求/响应以及任何可能的 js 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:18:56.380

您需要调用[`.Serialize()`](http://api.jquery.com/serialize/)-`formCollection`它将表单编码为字符串以供提交。

```
var formCollection = $('#some-form'); 
$(function(){ $('#some-form').submit(function(){ 
  $.ajax({ 
       type: "POST", 
       url: "/Trusk/Index", 
       data: formCollection.serialize(), 
       dataType: "html", 
       success: function (result) { 
           $('#newView').html(result); 
       }, 
       error: function (request, status, error) { 
           alert('Oh no!'); 
       } 
 }); 
});
}); 
```

此外，虽然您`FormCollection`的控制器方法上有一个参数 - 您实际上并没有使用它？

# java - 如何在春季启动服务器时启动守护进程

> ID：10395204
> 
> 赞同：10
> 
> 时间：2012-05-01T08:14:47.383
> 
> 标签：java, spring

我想在 tomcat 服务器启动时启动一个守护邮件服务线程。所以，我用@Async 注释注释了一个方法。

我有一个实现 ApplicationListener 接口的类。当我从这个类调用我的异步方法时，它永远不会异步启动并阻塞当前线程。当我从 spring 控制器类调用我的异步方法时，它永远不会阻塞和异步启动。

为什么异步方法从一个类而不是另一个类成功执行？

我在做什么错，如何在服务器启动时执行我的异步方法？

提前致谢。

**编辑：**我尝试使用 InitializingBean 接口、@PostConstruct、init-method 方法来调用我的异步方法，但它从未执行。然后我意识到，我的默认lazy-init 是true，所以我将我的InitializingBean 的lazy-init 设置为false。现在它执行我的 asnyc 方法，但它阻塞了当前线程，现在还有一个问题，我面临的是我的服务器没有正常停止，但我必须强制停止我的服务器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-01T08:23:15.947

首先你不需要实现`ApplicationListener`接口。您正在使用 Spring - 应用程序上下文就足够了。

其次，您在谈论 Spring `@Async`，这意味着您的任务应该从 Application Context 开始，而 Controller bean 是其中的一部分。

您需要确保`<annotation-driven>`在您的 spring xml 文件中有。

您可以在 @PostConstruct 函数上开始您的任务：

```
@Component
public class SampleBeanImpl implements SampleBean {

  @Async
  void doSomething() { … }
}

@Component
public class SampleBeanInititalizer {

  @Autowired
  private final SampleBean bean;

  @PostConstruct
  public void initialize() {
    bean.doSomething();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T08:30:01.870

根据 Spring 的[参考](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html)`@Async`，在应用程序启动期间使用有限制：

> `@Async`不能与生命周期回调一起使用，例如 `@PostConstruct`. 要异步初始化 Spring bean，您当前必须使用单独的初始化 Spring bean， `@Async`然后调用目标上的注释方法。

`InitializingBean`所以，在你的情况下，用你的目标 bean 实现一个实现然后通过它启动守护进程可能会很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T08:53:07.027

您是否已将`<annotation-driven>`标签添加到您的应用程序上下文中？来自[Spring 参考文档](http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-namespace)：

> 要同时启用@Scheduled 和@Async 注释，只需在配置中包含任务命名空间中的“注释驱动”元素。

注意，您还应该考虑配置一个*执行*器实例。从[任务模式定义](http://www.springframework.org/schema/task/spring-task-3.1.xsd)：

> 定义具有可配置池大小、队列容量、保持活动和拒绝策略值的 ThreadPoolTask​​Executor 实例。有关此 XML 元素的基于代码的替代方案的信息，请参阅 org.springframework.scheduling.annotation.EnableAsync 注释的 Javadoc。

因此，要创建一个由具有 5 个线程的线程池备份的执行程序，您必须执行以下操作：

```
<task:annotation-driven executor="myExecutor"/>
<task:executor id="myExecutor" pool-size="5"/> 
```

有关更多配置选项，请参阅上述[@EnableAsync javadoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-05T03:10:56.857

我的英语是台球。您必须设置服务类@Lazy(false)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T08:21:27.377

`@asyn`是弹簧框架的一部分，你的听众是否使用弹簧上下文？如果没有，我会建议在您的异步方法中启动一个新线程。

# search - 突出显示和功能

> ID：10395205
> 
> 赞同：1
> 
> 时间：2012-05-01T08:15:30.267
> 
> 标签：search, vim, highlight

假设我在 menu.vim 中有这个功能：

```
 function! s:Test()
   let search = '\d\+'
   let @/ = search
   return "normal n" 
  endfunction 
```

为什么这不突出显示搜索匹配？
只有在我`:set hls`在命令行中执行它之后才会突出显示。当我按下键盘上
的键时，它也会突出显示。 如果我将同一行 ( ) 放在函数中，它将不起作用。 BTW 突出显示在我的 VIM 中启用。 如果我使用命令行，它会突出显示。 `n`
`:set hls`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:48:43.340

该行为实际上可能在手册中有所描述`:help functions-search-undo`，但没有提及任何解决方法。

> 最后使用的搜索模式和重做命令“。” 不会被函数改变。这也意味着 `:nohlsearch`当函数返回时 的效果被撤消。

上的文档`:nohlsearch`也提到了这一点：

> 此命令在自动命令中不起作用，因为在执行自动命令时会保存和恢复突出显示状态 `autocmd-searchpat`。**调用用户函数时也是如此。**

# c# - 在 MVC 视图中格式化数字

> ID：10395209
> 
> 赞同：2
> 
> 时间：2012-05-01T08:15:48.040
> 
> 标签：c#, asp.net-mvc

我有一个带有数字的模型，当它显示在我的视图中时，我想以特定方式对其进行格式化。

```
[DisplayFormat(DataFormatString = "{### ##}")] 
 [Display(Name = "Postnr")] 
 public string CustomerZip; 
```

在视图中：

```
@Html.DisplayFor(modelItem => item.CustomerZip) 
```

在数据库中，值存储为#####，因此在尝试这种方法时出现错误：“输入字符串的格式不正确”。我认为（或者更确切地说是希望）DataFormatString 会为我重新格式化字符串。

任何有关如何以最佳方式做到这一点的建议都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:24:55.397

一些东西：

1.  需要使用`DataFormatString`{0:...} 索引器样式格式字符串，就像您在`string.Format`. 所以你需要做类似的事情`[DisplayFormat(DataFormatString="{0:### ##}"]`。如果大括号应该是文字，那么你会使用`[DisplayFormat(DataFormatString="{{{0:### ##}}}")]`. 然而...
2.  字符串没有这样的格式字符`#`。这就是您要用于数字类型的内容。如果您将值存储为整数，那么您很幸运；只需将类型更改`CustomerZip`为int。
3.  如果您不是将值存储为整数，而是作为字符串存储（通常不会像使用邮政编码那样），那么您就会遇到更多问题。就像我说的，您没有任何带有字符串的自定义格式选项。您需要将 CustomerZip 表示为您将定义的一些自定义类型，即 IFormattable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:21:13.120

使用以下格式：

`"{0:### ##}"`

请参阅 MSDN 页面上的示例[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.dataformatstring.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.dataformatstring.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-23T20:21:47.673

像这样使用 Raw 函数：

@Html.Raw(item.Valor.ToString("##,###"))

它适用于任何类型的数据。

# jsf-2 - 特立尼达 tr:treeTable 展开/折叠命令

> ID：10395213
> 
> 赞同：1
> 
> 时间：2012-05-01T08:16:11.140
> 
> 标签：jsf-2, tree, myfaces, trinidad

我正在使用特立尼达 2.0。我的问题是 treeTable 的展开/折叠命令。我认为它们应该自动展开/折叠树节点，但是通过单击它们，什么也没有发生，我得到了异常

```
SEVERE: Error Rendering View[/MyXhtml.xhtml]
01/05/2012 15:31:08 org.apache.myfaces.trinidadinternal.renderkit.core.xhtml.PanelPartialRootRenderer encodeAll   
SEVERE: Error displaying partial page   
java.lang.NullPointerException   
    at org.apache.myfaces.trinidad.render.CoreRenderer.getFacesBean(CoreRenderer.java:739)   
    at org.apache.myfaces.trinidadinternal.renderkit.core.desktop.TreeTableRenderer.renderSpecialColumns(TreeTableRenderer.java:379)   
    at org.apache.myfaces.trinidadinternal.renderkit.core.desktop.DesktopTableRenderer.renderSingleRow(DesktopTableRenderer.java:113)   
    at org.apache.myfaces.trinidadinternal.renderkit.core.xhtml.TableRenderer.encodeAll(TableRenderer.java:388)   
    at org.apache.myfaces.trinidadinternal.renderkit.core.desktop.TreeTableRenderer.encodeAll(TreeTableRenderer.java:177) 
```

我在 FireBug 中看到了这个异常：

> ```
> _logError(varArgs="Invalid PPR response. T...ror></partial-response>") 
> ```

这是如何引起的，我该如何解决？

我们正在从 JSF 1.2 迁移到 JSF 2.0。在 JSF 1.2 中`<tr:treeTable>`工作正常，但现在在 JSF 2.0 和 trinidad 2.0 中，当我尝试展开或折叠节点时出现这些错误。顺便说一句，`<tr:tree>`来自 trinidad 2.0 的组件工作得很好，但我们需要`<tr:treeTable>`.

Web 应用程序使用的 JAR 是：

*   commons-beanutils-1.8.3.jar
*   commons-codec-1.3.jar
*   commons-collections-3.2.jar
*   commons-digester-1.8.jar
*   commons-logging-1.1.1.jar
*   myfaces-bundle-2.1.7.jar
*   myfaces-impl-2.1.7.jar
*   特立尼达-api-2.0.0.jar
*   特立尼达-impl-2.0.0.jar

我使用 MyEclipse 10 作为 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:13:11.650

根据[Trinidad 2.0.0 源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.myfaces.trinidad/trinidad-api/2.0.0/org/apache/myfaces/trinidad/render/CoreRenderer.java/#739)，这是在第 739 行发生的事情`CoreRenderer#getFacesBean()`：

```
736   protected FacesBean getFacesBean(
737     UIComponent component)
738   {
739     return ((UIXComponent) component).getFacesBean();
740   } 
```

所以，`component`是`null`。

您可能不想听到这个，但这确实是 Trinidad 中的一个错误，因为它仅被 Trinidad 内部代码使用。我会开始升级到[最新](http://myfaces.apache.org/trinidad/download.html)的Trinidad 2.x 版本（目前是 2.0.1）。它可能已经固定在那里。如果没有，则将其作为新错误[报告给特立尼达人。](https://issues.apache.org/jira/browse/TRINIDAD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:01:44.990

当我更改我的 IDE 时，我用 treeTable 的展开/折叠命令解决了这个问题。从 MyEclipse 10 到 SpringSource Tool Suite 2.9.1，在这个 IDE 中，treeTable 的所有展开/折叠命令都可以正常工作。

# css - 任何低于 IE8 的版本的 CSS 代码问题。背景图像不会加载。有任何想法吗？

> ID：10395216
> 
> 赞同：0
> 
> 时间：2012-05-01T08:16:29.113
> 
> 标签：css

背景代码：

```
* {
    margin:0;
    padding:0;
}

body {
  background:url(head1.gif) no-repeat top, url(water2.jpg) no-repeat;
  background-color:#fff;
  font-family:"lucida sans", verdana, arial, sans-serif;
  font-size:13px;
  color:#fff;
  margin:0;
  padding:0;
}

p {
  line-height:1.5;
  padding-bottom:12px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:32:28.283

Multiple backgrounds are CSS3, try 2 spans positioned over each other, with the backgrounds on each ( don't give them both a background color though )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:31:49.863

我不知道图像显示什么，但您可以尝试将一张背景图像放在 HTML 元素上，而将另一张留在正文上，确保它们共享相同的属性值 - 宽度、边距、填充等。

# c# - 枚举标志属性

> ID：10395218
> 
> 赞同：3
> 
> 时间：2012-05-01T08:17:03.563
> 
> 标签：c#, enums, bit-manipulation

我正在尝试评估应用了 FlagsAttribute 的枚举，如下所示。问题是它为确保正确的*if*语句运行而花费了大量的代码。我有四个*if*语句，只有在设置了枚举的特定组合时才应该执行，但**没有别的**：

1.  私有的，静态的
2.  私人的
3.  特权
4.  上市

检测所需标志的存在很容易，但我还必须确保**没有**设置其他标志，这是一个荒谬的代码量，看起来像是维护的噩梦。

```
[Flags]
public enum AccessModifierType : short
{
    Infer = 1,
    Public = 2,
    Privileged = 4,
    Private = 8,
    Static = 16
} 
```

**任何人都可以重写这个*if*语句以更简洁吗？**

```
if ((Model.CurrentContext.CurrentAccessModifierType & AccessModifierType.Public) == AccessModifierType.Public
        && (Model.CurrentContext.CurrentAccessModifierType & AccessModifierType.Static) != AccessModifierType.Static
        && (Model.CurrentContext.CurrentAccessModifierType & AccessModifierType.Privileged) != AccessModifierType.Privileged
        && (Model.CurrentContext.CurrentAccessModifierType & AccessModifierType.Private) != AccessModifierType.Private){
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:25:51.913

目前尚不清楚您的最终样本如何与您的原始要求相关（我觉得这`Infer`有一些特殊含义？）但如果您正在寻找*特定*的位组合而不是其他，为什么不针对确切的预期使用相等性测试枚举值（通过按位或组装）？

```
if(myUnknownFlagsEnumValue == (MyEnum.RequiredFlag1 | MyEnum.RequiredFlag2))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:23:45.123

首先，与 0 相比更容易，就像提升您重复使用的值一样：

```
var access = Model.CurrentContext.CurrentAccessModifierType;
if ((access & AccessModifierType.Public) != 0
    && (access & AccessModifierType.Static) == 0
    && (access & AccessModifierType.Privileged) == 0
    && (access & AccessModifierType.Private) == 0)
{
    ...
} 
```

如果您想测试**并且没有其他标志**，那么只需：

```
if (Model.CurrentContext.CurrentAccessModifierType == AccessModifierType.Public)
{
    ...
} 
```

如果您希望它是公开的，而不是其他三个中的任何一个？那么大概：

```
if(Model.CurrentContext.CurrentAccessModifierType & (
     AccessModifierType.Public | AccessModifierType.Static |
     AccessModifierType.Priveleged | AccessModifierType.Private
    ) ==  AccessModifierType.Public)
{
   ...
} 
```

这样做的好处是只有一个测试（我也希望编译器`|`在构建期间执行，所以这只是“ `ldc`, `and`, `brtrue`”或“ `ldc`, `and`, `brfalse`”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:42:28.390

如果你使用一些扩展方法——[这里](http://www.codeproject.com/Articles/37921/Enums-Flags-and-C-Oh-my-bad-pun)的例子那么你应该能够简化你的代码。

```
AccessModifierType modifier = Model.CurrentContext.CurrentAccessModifierType;
if (modifier.Has(AccessModifierType.Public) && 
    modifier.Has(AccessModifierType.Static) &&
    modifier.Has(AccessModifierType.Privileged) && 
    modifier.Has(AccessModifierType.Private))
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:35:47.533

当然要测试是否只设置了一个标志，您只需针对该标志进行测试：

```
if( Model.CurrentContext.CurrentAccessModifierType == AccessModifierType.Private)
... 
```

要查看它是否等于标志的精确组合，再次针对该组合进行测试：

```
if( Model.CurrentContext.CurrentAccessModifierType == (AccessModifierType.Private & AccessModifierType.Static))
... 
```

要了解这一点，请记住枚举实际上只是一个数字。因此，如果您的枚举具有 Private 值，则它只是存储为 8，因此只需测试它是否等于 8（或 Private）。如果它是私有的和静态的，那么它是 8 + 16 = 24。所以要测试它是否是这两者，那么只需测试它是否等于 24（或私有和静态）。

# javascript - underscore.js：_.throttle（功能，等待）

> ID：10395227
> 
> 赞同：13
> 
> 时间：2012-05-01T08:18:14.153
> 
> 标签：javascript, underscore.js

根据[下划线文档](http://underscorejs.org/)：

> **throttle_.throttle(function, wait)**
> 创建并返回传递函数的新的节流版本，当重复调用时，每等待毫秒最多只会实际调用一次原始函数。对于发生得比您跟得上快的限速事件很有用。

这是什么意思`Useful for rate-limiting events that occur faster than you can keep up with`。
这个函数相当于 setTimeout 带有一个调用自身的函数？
有人可以给我一些关于 jsfiddle 的例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T08:32:40.297

it's not just setTimeout() Try this

```
var a = _.throttle(function(){console.log('called')}, 1000);
while(true) {
  a();
} 
```

it will be called once every second and not once every iteration. In native JS it would look like:

```
var i = null;
function throttle(func, delay){
  if (i) {
      window.clearTimeout(i);
  }
  i = window.setTimeout(func, delay)
} 
```

not exactly the same, but just to illustrate that the function is called once

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T06:34:51.893

扩展[达哈泽的回答](https://stackoverflow.com/a/10395354/887539)

更像是，除了 _.throttle 被立即调用，然后在`delay`毫秒后再次调用

```
function throttle(func, delay) {
    var timer = 0;

    return function() {
        var context = this,
            args = [].slice.call(arguments);

        clearTimeout(timer);
        timer = setTimeout(function() {
            func.apply(context, args);
        }, delay);
    };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-08T23:02:35.023

我发现这个优秀的 jsfiddle 对我有帮助：

[jsfiddle.net/max23_/2wn5ybdg/1](http://jsfiddle.net/max23_/2wn5ybdg/1)（由@max23_更新）

在我的情况下，我需要节流，因为一个函数（这是一个服务器请求）在 1 秒内被调用了大约 500 次，并且使服务器过载。所以我改变了它，使得该函数只能每 3 秒调用*一次max 。*所以不管它被调用多少次，它最多每 3 秒只发生一次。

像这样的东西：

```
var informationFromServer;
var a = _.throttle(function(){
    informationFromServer = serverCallFunction();
}, 3000);

function getsCalledALot()
{
    a();
}

function serverCallFunction()
{
    var data = $.post....
    return data;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-04T20:08:03.013

油门和去抖动之间的区别在这里描述： [https ://css-tricks.com/the-difference-between-throttling-and-debounce/](https://css-tricks.com/the-difference-between-throttling-and-debouncing/)

```
/*
"Debouncing enforces that a function not be called again until a certain amount of time has passed without it being called. As in "execute this function only if 100 milliseconds have passed without it being called."
"Perhaps a function is called 1,000 times in a quick burst, dispersed over 3 seconds, then stops being called. If you have debounced it at 100 milliseconds, the function will only fire once, at 3.1 seconds, once the burst is over. Each time the function is called during the burst it resets the debouncing timer."
*/
_.debounce = (fn, delay) => {
  let timer
  return (...args) => {
    if (timer) clearTimeout(timer)
    timer = setTimeout(() => {
      fn.apply(null, args)
    }, delay)
  }
}
/*
"Throttling enforces a maximum number of times a function can be called over time. As in "execute this function at most once every 100 milliseconds."
 */
_.throttle = (fn, delay) => {
  let canCall = true
  return (...args) => {
    if (canCall) {
      fn.apply(null, args)
      canCall = false
      setTimeout(() => {
        canCall = true
      }, delay)
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T08:11:07.977

**_.throttle**用于防止对特定 ms.Refer 图像的方法频繁调用以了解此[RestrictfrequentCall.jpg](https://i.stack.imgur.com/NHjTQ.png)

# jquery - jQuery自动完成 - 请求没有被发送

> ID：10395228
> 
> 赞同：2
> 
> 时间：2012-05-01T08:18:21.847
> 
> 标签：jquery, jquery-ui, firebug, jquery-autocomplete

我试图让 jQuery 自动完成指向一个 PHP 文件（它从 MySQL 收集数据）。

首先，我使用来自 Javascript 数组的示例数据进行了尝试，它起作用了：

```
var tags = ["a", "ab", "abc", "abcd", "adbce"];
      $("input#name").autocomplete({
        position: {
          offset: "0 -10px",
        },
        source: tags
      }); 
```

但是当我指向一个以 JSON 格式返回数据的文件时（按照官方文档），它不起作用。我认为这是 PHP 中的问题，但是当我检查 firebug 时发现请求从未被发送过

这是我正在使用的代码：

```
$("input#name").autocomplete({
        position: {
          offset: "0 -10px",
        },
        source: "http://absolutepathtofile/autosuggest.php"
      }); 
```

以及来自 firebug 的屏幕截图（homepage.js 是包含上述自动完成代码的文件）：

![firebug Net/JS 已发送请求列表](../Images/6ef528049c2ba7ebed6c7aa609961d03.png)

我可以提供 PHP 代码，但我认为这并不重要，因为问题应该出在 Javascript 中——假设我在 autosuggest.php 中使用这个测试代码：

```
$array[0]="test";
$array[1]="test1";

echo json_encode($array); 
```

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:47:36.343

屏幕截图中的`net`选项卡指向`JS`请求，它应该指向`XHR`请求。

# c# - 分布式并行批处理

> ID：10395230
> 
> 赞同：0
> 
> 时间：2012-05-01T08:18:33.200
> 
> 标签：c#, .net, multithreading, c#-4.0, task-parallel-library

我正在尝试找出问题陈述的解决方案。为简单起见，该应用程序将成为控制台应用程序。一个数据库包含大约 10000 行。我有一个开发 ac# 应用程序，它将产生 10 个线程，每个线程将处理来自数据库的 5 条记录。现在问题是我将在另一台机器上运行相同的应用程序。因此，我们有两个应用程序实例，每个应用程序应处理 5000 行，并且它们不应在记录上重叠。我还需要一个中央控制器，它需要显示每个应用程序上运行的线程 ID。在这里解决这个问题的任何指针都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:24:56.250

我将在数据库中创建一个“处理状态”列，每个实例将通过更改记录的状态来标记它正在处理的记录。

另一种解决方案是使用队列或服务代理，每个实例都会选择一条消息来处理来自公共队列的记录。您将需要另一个进程来填充队列。

恕我直言，使用 WCF 在机器之间进行通信以同步工作太复杂且难以正确处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:12:14.387

我同意雅库布的观点。如果您希望单独的实例直接相互通信，您应该阅读有关两个将军问题 (http://en.wikipedia.org/wiki/Two_Generals%27_Problem) 并考虑如何设计非阻塞没有种族的约会。

# html - 元缓存或 Codeigniter 缓存

> ID：10395235
> 
> 赞同：0
> 
> 时间：2012-05-01T08:19:36.380
> 
> 标签：html, codeigniter, caching

我应该使用哪个缓存来减少页面的加载时间 - 元缓存或 Codeigniter 缓存。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:00:41.467

我最近使用了 Stash；[http://code.google.com/p/stash/](http://code.google.com/p/stash/)，在工作中很棒。它使用分层密钥结构，这对于缓存相关项目非常有用。

我使用这个库文件将它集成为第三方包，然后我就走了。

```
<?php

class Stash {

    private $_pool;

    public function __construct($options)
    {
        include_once APPPATH . '/third_party/Stash/autoload.php';

        if (isset($options['stash']) && isset($options['stash']['path'])) {
            if (substr($options['stash']['path'], 0, 1) != '/') {
                $options['stash']['path'] = getcwd() . '/' . $options['stash']['path'];
            }
        }

        $handler = new Stash\Handler\FileSystem(@$options['stash']);

        $this->_pool = new Stash\Pool;
        $this->_pool->setHandler($handler);
    }

    public function getCache($path)
    {
        return $this->_pool->getCache($path);
    }
}

?> 
```

只需使用这个简单的配置文件：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/*
| -------------------------------------------------------------------
| Stash Cache settings
| -------------------------------------------------------------------
|
*/

$config['stash'] = array('path' => APPPATH .'/cache'); 
```

然后你可以像这样使用它：

```
$this->load->library('Stash');
$cache = $this->stash->getCache(array('key1','subkey1','subkey2'));
$cache->set('foo', 'bar', 30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:01:54.613

取决于你的需求。

如果您不需要更具体的内容并且缓存整个页面没有问题，则应该使用[Web Page Caching](http://codeigniter.com/user_guide/general/caching.html)。这非常简单，适合您。

如果它更具体，也许您应该尝试查看[Caching Driver](http://codeigniter.com/user_guide/libraries/caching.html)，它允许您使用各种不同类型的缓存（包括 memcache）。最大的优势是您可以缓存特定的代码块（对于具有不同页面模块需求的项目非常有用）。

而且，如果你想尝试一些第三方的东西，我强烈推荐 Phil Sturgeon [CodeIgniter 缓存库](https://github.com/philsturgeon/codeigniter-cache)，它也适用于代码块，而且非常易于使用，可以快速生成基于文本的缓存。

问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:05:26.880

对我来说，我尝试了 CI Cache，效果很好……大多数人会说这是您自己的选择，您必须根据您的项目要求来决定..

但可以肯定的是，最好的答案是尝试这个并尝试那个然后为你的情况选择最好的

# php - whois 查询 IP 地址

> ID：10395236
> 
> 赞同：0
> 
> 时间：2012-05-01T08:19:53.400
> 
> 标签：php, whois

> $ host 64.34.119.12 12.119.34.64.in-addr.arpa 域名指针stackoverflow.com。

这是如何在 php 中执行的？我正计划查找搜索 Google 的 ip。我该如何实现呢？

就像上面的例子一样，它是 stalkoverflow.com

我想确定他们的网络块并在他们的网络块上为“google”执行 strstr

如果匹配，它将，`echo "Yeah , its google"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:22:23.727

您正在寻找`gethostbyaddr(string ip_address)`，请参阅： http: [//php.net/manual/en/function.gethostbyaddr.php](http://php.net/manual/en/function.gethostbyaddr.php)

例子：

```
<?php
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);

echo $hostname;
?> 
```

# javascript - 来自服务器图像文件夹的 jsp html 图像选取框

> ID：10395240
> 
> 赞同：0
> 
> 时间：2012-05-01T08:20:38.400
> 
> 标签：javascript, html, jsp, marquee

我想在我的网页上制作一个移动图像选框（或滑块），显示存储在服务器端机器的 /images 文件夹中的图像。我不知道 jQuery。我正在使用 jsp、html、javascript。我猜是 Ajax也将是必需的，但我对 Ajax 有非常基本的了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:22:46.347

JQuery 绝对是要走的路。有数百个图片库插件，其中一些应该适合您的需求。我用谷歌搜索了一些适合你描述的东西，但找到完美的解决方案需要一段时间。这是您可以自定义的示例：[http ://www.smoothdivscroll.com/clickableLogoParade.html](http://www.smoothdivscroll.com/clickableLogoParade.html)

做一点研究，你会想出正确的东西。请确保在使用任何插件之前检查许可证。其中一些是免费赠品，但它们的使用是有限的。

至于ajax...我很确定你可以不用它。只需将您需要的所有图像与整个页面一起加载，并使用 JavaScript 来调整它们的可见性。

# php - CRUD 在添加期间忽略 $display_field

> ID：10395241
> 
> 赞同：0
> 
> 时间：2012-05-01T08:20:41.770
> 
> 标签：php, frameworks, atk4

我发现 CRUD 和 hasOne() 存在问题，其中 $display_field 在“添加”表单中被忽略。如果引用的模型具有“名称”字段，则正确填充 CRUD 的“添加”表单中的下拉菜单。但是，如果 hasOne() 模型使用 $display_field 参数，我希望添加表单显示指定的字段，但事实并非如此。它只会显示引用模型的“name”字段或“id”，而不是 $display 指定的字段。但是，添加条目后，将使用正确的 $display_field 来显示条目。所以问题出在 Add 操作的某个地方。

例如：

作者

```
class Model_Author extends Model_Table {

public $table='author';

function init(){
  parent::init();
  $this->addField('long_name');
  $this->addField('DOB');

  }
} 
```

书

```
class Model_Book extends Model_Table {

public $table='book';

function init(){
  parent::init();  

 $this->addField('title');
 $this->hasOne('Author', 'author_id', 'long_name');
 } 
```

}

CRUD 页面。

```
class page_manager extends Page {

function init() {
parent::init();

$tabs=$this->add('Tabs');

$crud=$tabs->addTab('Book')->add('CRUD');
   } 
 } 
```

当您选择添加按钮时，作者字段将显示作者表中作者的 ID 号。但是，在您添加 Book 条目后，正确的字段（即 long_name）用于显示现有条目。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:46:01.340

我确实经历了同样的行为，并同意期望 hasOne() 的第三个参数是显示字段应该覆盖模型 $title_field。

我隔离了原因并找到了改进的方法。打开文件 atk4/lib/Field/Reference.php 并在函数 getModel() 中添加行来设置显示字段，如下所示：

```
 function getModel(){
        if(!$this->model)$this->model=$this->add($this->model_name);
        if($this->display_field) $this->model->title_field=$this->display_field;
        return $this->model;
    } 
```

在这里，它按您预期的方式工作，即 hasOne() 将决定在 CRUD 的 ADD 表单中显示哪个字段。但是，我无法监督任何副作用或可能在其他地方添加此 display_field。

# javascript - javascript Date().getTime() 不是函数

> ID：10395242
> 
> 赞同：46
> 
> 时间：2012-05-01T08:20:46.817
> 
> 标签：javascript, date

我正在尝试比较 javascript 中的一些日期。

出于某种原因，我收到“Tue May 01 2012 16:43:03 GMT+0900 (JST) has no method 'getTime'”

当然，[字符串没有方法](https://stackoverflow.com/questions/2627650/why-javascript-gettime-is-not-a-function)

我从回调中的这段代码开始，但它在`getTime()`创建的行上失败了`var age`：

```
for (var i = 0; i < array_of_usage_indices.length; i++) {
    store.get(array_of_usage_indices[i]['key'],function(may_need_gc) {
        if(may_need_gc) {
            var now = Date();
            var created = Date(may_need_gc['value']);
            var age = now.getTime()-created.getTime();
        }
    })
} 
```

我已经削减了它，所以我的示例页面实际上就是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>date test</title>

    </head>

<body>

<script type="text/javascript" charset="utf-8">
            var now = Date();
            alert(now.getTime());
            var t = Date().getTime();
</script>    
</body>
</html> 
```

这在 Chrome 18.0.1025.168 和 Firefox 13.0 中失败。

我尝试过的截图：

![截图没有方法'getTime'](../Images/283b6b66356bd0b5345114e0b44de981.png)

![截图没有方法'getTime'](../Images/d18fba97bc49bc9de2e2c344ff5fb113.png)

所以我的问题：

~~有什么？~~

我必须使用 ParseDate() 吗？为什么这不起作用？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-01T08:24:14.137

尝试使用`new`关键字来实例化一个新对象，而不是这个

```
var now = Date(); 
```

试试这个

```
var now = new Date(); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-01T08:22:39.797

您需要使用`new`运算符来创建一个 Date 对象。

```
(new Date()).getTime() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-03-07T16:40:06.617

这将使“现在”成为日期的变量类型：

```
var now = new Date(); 
```

这会让你从“现在”开始：

```
new Date(now).getTime(); 
```

# javascript - 获取使用 javascript 创建的下拉列表的 SelectedValue

> ID：10395245
> 
> 赞同：2
> 
> 时间：2012-05-01T08:20:54.507
> 
> 标签：javascript, asp.net

我正在用 javascript 填充下拉列表。

```
for (var i = 1; i < array.length; i++) {
                    var optn = document.createElement("OPTION");
                    optn.text = array[i];
                    optn.value = array[i];
                    document.getElementById('<%=ddlProductModel.ClientID%>').(options.addoptn);
                } 
```

但是我无法在代码隐藏（c#）中获得回发下拉列表的 selectedValue 值。请问有什么解决办法吗？谢谢。

亚辛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:28:08.840

`dropdownlist.SelectedValue`在客户端添加值时，您无法访问所选元素。尝试使用`Request.Form["dropdownlistid"]`

# javascript - Javascript 模板与服务器模板

> ID：10395249
> 
> 赞同：2
> 
> 时间：2012-05-01T08:21:14.100
> 
> 标签：javascript, ruby-on-rails, extjs, server-side, template-engine

最近我和一个朋友准备开始一个宠物项目，我们讨论了如何建立网站，是让服务器处理模板和数据操作还是使用一些 JavaScript UI 库，如 ExtJS/Jquery UI动态呈现小部件并将服务器用作允许数据流的服务。

什么是更好的？JavaScript 来处理 UI/事件和所有前端，后端只是数据服务或使用后端框架（最好是 ruby​​）的传统 MVC？

什么是用于 2 个场景的正确/（易于使用）框架。同样在哪个用例中，每个用例都优于另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:45:01.957

两者都不是更好。每个都有它自己的用途。

对于基本站点界面，您应该始终让服务器创建站点的初始结构。因此，这需要服务器端模板。这也适用于那些“如果 JS 关闭”或“不支持 JS”。至少出现了网站的基本形式。不要像以前的 Facebook 那样，关闭 JS 会留下一个空白页面，因为它过于依赖 JS。

对于通过 AJAX 获取数据的小部件、动态任务和操作，应该完成客户端模板。AJAX 是关于异步性和速度的，从服务器返回格式化的标记实在是太庞大了。这是您使用 JSON、缓存模板字符串和使用客户端模板的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:29:19.017

一个想法可能是使用 Mustache，它可以在服务器端和客户端呈现。有关如何在两者之间共享它们的信息，请参阅此博客文章：

[http://blog.railsware.com/2012/04/12/shared-mustache-templates-for-rails-3/](http://blog.railsware.com/2012/04/12/shared-mustache-templates-for-rails-3/)

# php - 在 PHP 和 JQuery 中带有条件的 XML 搜索值

> ID：10395251
> 
> 赞同：0
> 
> 时间：2012-05-01T08:21:22.713
> 
> 标签：php, jquery, xml, search

假设我有一个**place_categories.xml**文件，如下所示，这是纯 xml 文件，没有从任何数据库中检索：

```
<category>
<pcid>23533</pcid>
<name>Designer Clothing Shop</name>
<sub_category>shopping</sub_category>
</category>

<category>
<pcid>23540</pcid>
<name>Dim Sum Restaurant</name>
<sub_category>food & drink</sub_category>
</category> 
```

如何找到这样的：在**PHP 和 JQuery**中选择名称、子类别 where pcid= **23540**并产生

 ****点心餐厅
食物和饮料**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:28:59.687

jQuery 和 XPath - 但我不知道 PHP 与此有什么关系：

```
$(document).ready( function(){
    $.get( "http://localhost/~gregory/place_categories.xml", 
        function( data ) {
            var name = data.find('/category[pcid = "23540"]/name');
        } );
} ); 
```

当然 XPath 也存在于 PHP 中，如果您正在寻找类似的示例，请参阅昨天对[*Can't changed an x​​ml value with PHP 的*](https://stackoverflow.com/a/10388894/367456)[回答](https://stackoverflow.com/a/10388894/367456)*。*

 *有关的：

*   [使用 XPath-jQuery 短语手册在 XPath 和 jQuery 之间进行选择](http://www.ibm.com/developerworks/xml/library/x-xpathjquery/index.html?ca=drs-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:33:02.640

如果你想避免 XPath，你可以尝试这样的事情：

```
$.ajax({
        type: "GET",
        url: "place_categories.xml",
        dataType: "xml",
        success: function parseXml(xml)
        {
            //find every Tutorial and print the author
            $(xml).find("rootnode").each(function() {
                if($(this).find("pcid").text()==="23540") {
                    console.log($(this).find("sub_category").text());
                }
            });
        }
}); 
```***

# java - 在 ListView Row 中设置数据

> ID：10395261
> 
> 赞同：0
> 
> 时间：2012-05-01T08:22:22.913
> 
> 标签：java, android, listview, adapter

我的 listView 有问题，我有一个 listview，每行包含两个按钮和一个 textView，嗯，

我有一个包含对象的arrayList。

我如何`tv.setText(obj.getName());`在一行中显示，它给了我空值而不是 obj 的名称！

我怎样才能解决这个问题？

```
==================================== updating ========================================

in Activity (X) when the user press Sendbutton it'll add the object to :

    Send.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {

    ......                              All_Static.MyCaseList.add(case1);
    .....                               

                                }
                            }); 
```

//================================================= =========================================//适配器类

```
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.telephony.SmsManager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MyCasesListAdapter extends BaseAdapter {
    private MyPage myPage;
    static public List<MyCaseClass> listOfCases;
    Button ConfExpandRegion;
    // TODO test
    MyCaseClass entry;

    public MyCasesListAdapter(MyPage mypage, List<MyCaseClass> listOfCaseParameter) {
        this.myPage = mypage;
        this.listOfCases = listOfCaseParameter;

    }

    public int getCount() {
        return listOfCases.size();
    }

    public Object getItem(int position) {
        return listOfCases.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup viewGroup) {

         entry =  listOfCases.get(position);

         if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) myPage.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.mypage_row, null);
          }

        // this is row items..
        // Set the onClick Listener on this button
         ConfExpandRegion = (Button) convertView.findViewById(R.id.expand);
        Button Cancelb = (Button) convertView.findViewById(R.id.cancelCase);
        TextView tvCase = (TextView) convertView.findViewById(R.id.mypage_name);
        tvCase.setText(entry.getName());
        Toast.makeText(myPage, "inside getview" + entry.getAge(), 0).show(); 
        // To be a clickable button
        ConfExpandRegion.setFocusableInTouchMode(false);
        ConfExpandRegion.setFocusable(false);

        ConfExpandRegion.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                myPage.ShowingDialogExpand();
            }
        });

        // To be a clickable button
        Cancelb.setFocusableInTouchMode(false);
        Cancelb.setFocusable(false);
        Cancelb.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                //For caseID testing
                /** entry = (MyCaseClass) v.getTag();
                int caseid= entry.getID();
                myPage.ShowingDialogCancel(caseid);
                Toast.makeText(myPage, "inside calling", 0).show(); **/

                MyCaseClass entry = (MyCaseClass) v.getTag();
                myPage.ShowingDialogCancel(entry); 

                }

                // listPhonebook.remove(view.getId());

        });

        // Set the entry, so that you can capture which item was clicked and
        // then remove it
        // As an alternative, you can use the id/position of the item to capture
        // the item
        // that was clicked.
        ConfExpandRegion.setTag(entry);
        Cancelb.setTag(entry);

        // btnRemove.setId(position);

        return convertView;
    }

    public void onClick(View view) {
        MyCaseClass entry = (MyCaseClass) view.getTag();
        listOfCases.remove(entry);
        // listPhonebook.remove(view.getId());
        notifyDataSetChanged();

    }

    private void showDialog(MyCaseClass entry) {
        // Create and show your dialog
        // Depending on the Dialogs button clicks delete it or do nothing
        //For Sending SMS with cancel Request
        //For Notification -1-

    }

    public void add(MyCaseClass myCaseClass) {
        // TODO Auto-generated method stub
        listOfCases.add(myCaseClass);
    }

} 
```

//================================================= ========================================

// 显示 listView 的我的 Activity

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MyPage extends Activity {

    Button createForm;
    Button ConfExpandRegion, Cancelb;
    String ExpandMsg, CancelMsg;
    boolean b;
    MyCaseClass mycase;
    TextView tvCase;
    AlertDialog alertDialog;

    //for list
    ListView list;
    MyCasesListAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mypage);

        // Moving to another activity
        createForm = (Button) findViewById(R.id.creat_new_formbtn);
        createForm.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent j = new Intent(MyPage.this, CreateNewForm.class);
                startActivity(j);

            }
        });

        // ============================================================================================
        // for list

            list = (ListView) findViewById(R.id.mypage_list);
            list.setClickable(true);

            final List<MyCaseClass> listOfMyCases = new ArrayList<MyCaseClass>();

            adapter = new MyCasesListAdapter(this, listOfMyCases);

            for (MyCaseClass m : All_Static.getMyCaseList())
                adapter.add(new MyCaseClass(m));

            // after fill the adapter.. assign the list to the adapter
            list.setAdapter(adapter);

            list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View view, int position, long index) {

                }
            });

        // ========================================================================================

    }

    public void sendSMS(String number, String msg) throws Exception {
        if (!b) {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number, null, msg, null, null);
        }
        b = true;
    }

    // ========================================================================

    public void ShowingDialogExpand(){
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Conformation");
        alertDialog.setMessage("Are you sure you want to Expand Report Region?");
        alertDialog.setButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
                  // here you can add functions
                  // Sending a Message to server that the plaintiff wants to expand report region
                   // Getting Case_ID + putting it inside ExpandlMsg
                   ExpandMsg = "Case_ID expand";
                   if (!b) {
                        try {
                            // Should write server number here + the chatting must be pushed above 
                            sendSMS("+9000", ExpandMsg);
                            Toast.makeText(MyPage.this, "Request Sent", Toast.LENGTH_LONG)
                                    .show();
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            Toast.makeText(MyPage.this, e.getMessage(),
                                    Toast.LENGTH_LONG).show();
                        }

                    }
                   //ConfExpandRegion.setEnabled(false);
               }

            });

            alertDialog.setButton2("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
                // here you can add functions
                // Do nothing 

               }
            });

            alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog.show();
    }

    public void  ShowingDialogCancel(final MyCaseClass entry){
        final AlertDialog alertDialog2 = new AlertDialog.Builder(this).create();
        alertDialog2.setTitle("Conformation?");
        alertDialog2.setMessage("Are you sure you want to cancel x cases?");

        alertDialog2.setButton("Yes", new DialogInterface.OnClickListener() {
               public  void onClick(DialogInterface dialog, int which) {

                   // Sending a Message to server that the plaintiff found the case
                  // For Sending SMS with cancel Request
                  // Getting Case_ID + putting it inside CancelMsg
                     CancelMsg = "Case_ID cancel";
                     MyCasesListAdapter.listOfCases.remove(entry);
                     adapter.notifyDataSetChanged();
                     All_Static.MyCaseList.clear();
                     Toast.makeText(MyPage.this, "id:"+ entry.getID(), 0)
                        .show();

                if (!b) {
                        try {
                            // Should write server number here + the chatting must be pushed above 
                            sendSMS("+9000", CancelMsg);
                            Toast.makeText(MyPage.this, "Cancelation request sent", Toast.LENGTH_LONG)
                                    .show();

                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            Toast.makeText(MyPage.this, e.getMessage(),
                                    Toast.LENGTH_LONG).show();
                        }

                    }
                   }
            });

            alertDialog2.setButton2("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
                // here you can add functions
                // Do nothing 

                   Toast.makeText(MyPage.this, "inside No", 0)
                    .show();

               }
            });

            alertDialog2.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog2.show();

    }

} 
```

//================================================= =======================================

```
// All_Static Class
import java.util.ArrayList;
import java.util.List;

public class All_Static {

    public static List<MyCaseClass> MyCaseList = new ArrayList<MyCaseClass>();

    public static List<MyCaseClass> getMyCaseList() {
        return MyCaseList;
    }

    public static void setMyCaseList(List<MyCaseClass> myCaseList) {
        MyCaseList = myCaseList;
    }

    //===========================================================================
    public static List<HelpersClass> HelperList = new ArrayList<HelpersClass>();

    public static List<HelpersClass> getHelperList() {
        return HelperList;
    }

    public static void setHelperList(List<HelpersClass> helperList) {
        HelperList = helperList;
    }

} 
```

# c# - 如何在 C# 中保护 SqlDataReader 免受多次访问

> ID：10395265
> 
> 赞同：1
> 
> 时间：2012-05-01T08:22:29.560
> 
> 标签：c#, multithreading, sqldatareader

我有一个用 C# 编写的多线程 TCP 服务器软件。许多线程应该从数据库中读取，我正在使用 SqlDataReader 从数据库中读取。当一个线程想要从数据库中读取时，没有问题，但是当两个或更多线程想要从数据库中读取时，这种情况就开始出现问题了。.NET 给出了这个例外：*已经有一个打开的 DataReader 与此命令关联，必须先关闭它。*

我怎样才能防止错误？如何保护 SqlDataReader 免受多次访问？互斥锁适合这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:28:10.300

> 如何保护 SqlDataReader 免受多次访问？

甚至不共享连接。

`SqlConnection`为每个数据库操作创建一个新的（在`using`操作结束时处理它的语句中），并让连接池处理以提高效率。

如果您不共享连接，则不会出现此错误，也不会通过锁定序列化您的数据库访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T08:29:01.610

您应该向 .net 运行时询问每个线程内的新 sql 连接。就速度而言，这是最佳解决方案（这使用 .net 的 sql 连接池，因此您不会浪费时间建立连接）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T08:26:48.810

***我建议为每个请求***创建一个新连接，而不是尝试重新使用现有的活动连接。我假设您正在使用某种类成员或对连接的静态引用，而不是将其设置为方法范围：

```
private void RespondingToTcpRequest()
{
    using (var connection = new SqlConnection(""))
    using (var command = new SqlCommand("", connection))
    {
         connection.Open();

         using (var reader = command.ExecuteReader())
         {
             // No locks or sharing issues here!
         }
    }
} 
```

如果我有一些示例代码来展示您当前拥有的内容，我可以根据您的情况调整该想法。

至于锁定，如果你*真的*想走这条路（说真的，**不要**），你需要做的就是锁定（基本同步原语之一）：

```
private static readonly object ReaderLock = new object();

private void RespondingToTcpRequest()
{
    lock (ReaderLock)
    {
        // database connection, command, reader stuff here.
    }
} 
```

不一定需要互斥锁，因为问题将是进程本地的，其中 lock 关键字就足够了。再说一次，说真的，**不要**。

# jboss7.x - Jboss as 7 使用 HTTP 管理 api 部署

> ID：10395271
> 
> 赞同：2
> 
> 时间：2012-05-01T08:22:58.047
> 
> 标签：jboss7.x

如何使用 HTTP 管理 API 将存档部署到 Jboss 为 7？

我尝试使用从那些 RHQ 插件类创建的以下代码

公共类 Main2 {

```
public static final String MANAGEMENT = "/management";

public static void main(String[] args) throws ClientProtocolException, IOException {

    String runtimeName= "jboss-as-numberguess33.war";
    String filename = "/Users/mac/jboss-as-numberguess.war";
    String deploymentName="jboss-as-numberguess.war";
    File file=new File(filename);

    //STEP 1 UPLOADING
    ASUploadConnection uploadConnection=new ASUploadConnection("localhost", 9990,"username", "password");
    uploadConnection.getOutputStream(filename);
    JsonNode uploadResult = uploadConnection.finishUpload();

    if (ASUploadConnection.isErrorReply(uploadResult)) {
        System.out.println("Error reply");
    }
    else{
        JsonNode resultNode = uploadResult.get("result");
        String hash = resultNode.get("BYTES_VALUE").getTextValue();
        System.out.println(uploadResult);
        //--------------------------------------

        //STEP 2 DEPLOING
        System.out.println("Deploying [" + runtimeName + "] to server");

        Operation step1 = new Operation("add", "deployment", runtimeName);
        step1.addAdditionalProperty("hash", new PROPERTY_VALUE("BYTES_VALUE", hash));
        List<Object> content = new ArrayList<Object>(1);
        Map<String, Object> contentValues = new HashMap<String, Object>();
        contentValues.put("hash", new PROPERTY_VALUE("BYTES_VALUE", hash));
        content.add(contentValues);
        step1.addAdditionalProperty("content", content);

        step1.addAdditionalProperty("name", deploymentName);
        step1.addAdditionalProperty("runtime-name", runtimeName);
        CompositeOperation cop = new CompositeOperation();
        cop.addStep(step1);

        Operation step2 = new Operation("deploy", step1.getAddress());
        cop.addStep(step2);

        execute(cop);

    }
}

private static void execute(Operation operation) throws JsonGenerationException, JsonMappingException, IOException {
    long requestStartTime = System.currentTimeMillis();
    int timeoutSec=10;
    HttpURLConnection conn=null;
    OutputStream out;
    try {
        URL url = new URL("http", "localhost", 9990, MANAGEMENT);

        conn = (HttpURLConnection) url.openConnection();

        System.out.println(conn.getURL());
        conn.setDoOutput(true);
        conn.setRequestMethod("POST");
        conn.addRequestProperty("Content-Type", "application/json");
        conn.addRequestProperty("Accept", "application/json");
        conn.setInstanceFollowRedirects(false);

        int timeoutMillis = timeoutSec * 1000;
        conn.setConnectTimeout(timeoutMillis);
        conn.setReadTimeout(timeoutMillis);
        if (conn.getReadTimeout() != timeoutMillis) {
            System.out.println("Read timeout did not get set on HTTP connection - the JRE uses a broken timeout mechanism - nothing we can do.");
        }

        out = conn.getOutputStream();

        //------------------------------------------------------

        Authenticator passwordAuthenticator = new AS7Authenticator("username","password");
        Authenticator.setDefault(passwordAuthenticator);

        // read system property "as7plugin.verbose"
        Boolean verbose = true;

        ObjectMapper mapper = new ObjectMapper();
        mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);

        String json_to_send = mapper.writeValueAsString(operation);

        // Check for spaces in the path, which the AS7 server will reject. Log verbose error and
        // generate failure indicator.
        if ((operation != null) && (operation.getAddress() != null) && operation.getAddress().getPath() != null) {
            if (containsSpaces(operation.getAddress().getPath())) {
                Result noResult = new Result();
                String outcome = "- Path '" + operation.getAddress().getPath()
                    + "' is invalid as it contains spaces -";
                if (verbose) {
                    System.out.println(outcome);
                }
                noResult.setFailureDescription(outcome);
                noResult.setOutcome("failure");
                JsonNode invalidPathResult = mapper.valueToTree(noResult);
                System.out.println(invalidPathResult);
            }
        }

        if (verbose) {
            System.out.println("JSON to send: " + json_to_send);
            System.out.println(conn.getInputStream());
        }

        mapper.writeValue(out, operation);

        out.flush();
        out.close();

        InputStream inputStream = (conn.getInputStream() != null) ? conn.getInputStream() : conn.getErrorStream();

        if (inputStream != null) {
            // Note: slurp() will close the stream once it's done slurping it.
            byte[] responseBodyBytes = StreamUtil.slurp(inputStream);

            ByteArrayInputStream arrayInputStream=new ByteArrayInputStream(responseBodyBytes);
            BufferedReader bufferedReader=new BufferedReader(new InputStreamReader(arrayInputStream));

            String responseBody="";
            while (bufferedReader.ready()) {
                responseBody+=bufferedReader.readLine()+"\n";
            }

            String outcome;
            JsonNode operationResult=null;
            if (!responseBody.isEmpty()) {
                outcome = responseBody;
                operationResult = mapper.readTree(outcome);
                if (verbose) {
                    ObjectMapper om2 = new ObjectMapper();
                    om2.configure(SerializationConfig.Feature.INDENT_OUTPUT, true);
                    String tmp = om2.writeValueAsString(operationResult);
                    System.out.println(tmp);
                }
            } else {
                System.out.println("Null stream");
            }
            System.out.println(operationResult);

        }

    } catch (IllegalArgumentException iae) {}

}

public static boolean containsSpaces(String path) {
    boolean includesSpaces = false;
    StringTokenizer components = new StringTokenizer(path, " ");
    if (components.countTokens() > 1) {
        includesSpaces = true;
    }
    return includesSpaces;

} 
```

}

STEP 1(uloading) 我认为它工作正常，它返回成功响应，还说

```
06:18:37,551 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 6) JBAS014900: Content added at location /servers/jboss-as-7.1.2.Final/standalone/data/content/da/39a3ee5e6b4b0d3255bfef95601890afd80709/content 
```

但是这个内容文件是空的！！！

此外，当 STEP 2（部署）运行时，它会引发以下错误

服务器返回 HTTP 响应代码：500 用于 URL：[http://localhost:9990/management](http://localhost:9990/management)

在堆栈跟踪中我有

```
07:19:35,870 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.unit."jboss-as-numberguess33.war".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."jboss-as-numberguess33.war".STRUCTURE: JBAS018733: Failed to process phase STRUCTURE of deployment "jboss-as-numberguess33.war"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:123) [jboss-as-server-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_24]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_24]
at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_24]

Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018740: Failed to mount deployment content
at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:92) [jboss-as-server-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:116) [jboss-as-server-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
... 5 more
Caused by: java.util.zip.ZipException: error in opening zip file
at java.util.zip.ZipFile.open(Native Method) [classes.jar:1.6.0_24]
at java.util.zip.ZipFile.<init>(ZipFile.java:127) [classes.jar:1.6.0_24]
at java.util.zip.ZipFile.<init>(ZipFile.java:144) [classes.jar:1.6.0_24]
at org.jboss.vfs.VFSUtils.unzip(VFSUtils.java:845)
at org.jboss.vfs.VFS.mountZipExpanded(VFS.java:536)
at org.jboss.vfs.VFS.mountZipExpanded(VFS.java:567)
at org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.mountDeploymentContent(DeploymentMountProvider.java:97) [jboss-as-server-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT]
at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:88) [jboss-as-server-7.1.2.Final-SNAPSHOT.jar:7.1.2.Final-SNAPSHOT] 
```

如果您对此有任何想法，请回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:24:10.547

取决于你想要做什么，这是一个多步骤的任务

*   将位上传到[http://localhost:9990/management/add-content](http://localhost:9990/management/add-content)
*   在服务器中使用名称注册上传
*   对于域模式提升到服务器组。

作为[AS7 插件的一部分，我们在](http://git.fedorahosted.org/git/?p=rhq/rhq.git;a=tree;f=modules/plugins/jboss-as-7)[RHQ](http://rhq-project.org/)中执行此操作。 对于第一部分，您可以查看[ASUploadConnection](http://git.fedorahosted.org/git/?p=rhq/rhq.git;a=blob;f=modules/plugins/jboss-as-7/src/main/java/org/rhq/modules/plugins/jbossas7/ASUploadConnection.java;h=a7fe82dbcf410879ae6291b5759f40a3e93d53b6;hb=HEAD)。这是从[BaseComponent#deployContent](http://git.fedorahosted.org/git/?p=rhq/rhq.git;a=blob;f=modules/plugins/jboss-as-7/src/main/java/org/rhq/modules/plugins/jbossas7/BaseComponent.java;h=0b2820102c2a8b123cc5d3e2e06eb5df50c15e4a;hb=HEAD)触发的，在成功上传后还会在[#runDeploymentMagicOnServer](http://git.fedorahosted.org/git/?p=rhq/rhq.git;a=blob;f=modules/plugins/jboss-as-7/src/main/java/org/rhq/modules/plugins/jbossas7/BaseComponent.java;h=0b2820102c2a8b123cc5d3e2e06eb5df50c15e4a;hb=HEAD)中运行接下来的两个步骤。

随意复制/重用该代码

# ruby-on-rails - Rails / 令牌输入

> ID：10395273
> 
> 赞同：0
> 
> 时间：2012-05-01T08:23:03.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在令牌输入上关注了 Ryan Bate 的 Railscast，它在我的“发布”级别上完美运行，使用：

```
 <%= f.text_field :artist_tokens, "data-pre" => @release.artists.map(&:attributes).to_json, :class => "text" % 
```

在发行版中，我有“曲目”，并希望能够在曲目级别修改和更改艺术家。使用上面的方法，我可以让它“继承”发布级别的艺术家，这对于新方法和初始设置来说似乎工作正常，但是在编辑时它显然会拉回发布级别的艺术家，如果提交它命中，那么所有轨道水平艺术家被覆盖。

我正在尝试这样做：

```
<% if params[:action] == "edit" %>
<%= f.text_field :artist_tokens, "data-pre" => @track.artists.map(&:attributes).to_json, :class => "text" %>
<% else %>
<%= f.text_field :artist_tokens, "data-pre" => @release.artists.map(&:attributes).to_json, :class => "track_artist_tokens" %>
<% end %> 
```

但是我**在@track.artists.map 上得到了一个未定义的方法“艺术家”**

我的模型如下：

```
class Release < ActiveRecord::Base
  has_many :artist_releases
  has_many :artists, :through => :artist_releases

  attr_reader :artist_tokens

    def artist_tokens=(ids)
      self.artist_ids = ids.split(",")
    end

  has_many :releases_tracks, :dependent => :destroy
  has_many :tracks, :through => :releases_tracks

  accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true

  has_many :artists_tracks

end

class Artist < ActiveRecord::Base
  has_many :artist_releases
  has_many :releases, :through => :artist_releases  
  has_many :artists_tracks
  has_many :tracks, :through => :artists_tracks
end

   class Track < ActiveRecord::Base
      has_many :releases_tracks, :dependent => :destroy
      has_many :releases, :through => :releases_tracks

      has_many :artists_tracks
      has_many :artists, :through => :artists_tracks

      attr_reader :artist_tokens
      def artist_tokens=(ids)
        self.artist_ids = ids.split(",")
      end

    end

class ArtistsTrack < ActiveRecord::Base
  belongs_to :artist
  belongs_to :release
  belongs_to :track
end

class ReleasesTrack < ActiveRecord::Base
  belongs_to :release
  belongs_to :track
  acts_as_list
end 
```

任何人都可以帮忙吗？

更新：

释放控制器轨道方法：

```
def tracks
     @release = Release.find(params[:id])
     @track = @release.tracks.find(:all)
        respond_to do |format|
        format.html # tracks.html.erb
        end
  end 
```

track.html.erb 有：

```
 <%= form_for @release do |f| %>
            <%= f.fields_for :tracks do |builder| %>
            <%= render 'track_fields', :f => builder %>
            <% end %>
<% end %> 
```

_track_fields.html.erb 部分（为了清楚起见，去掉了一些 HTML）

```
<td class="label">Title:</td>
<td class="field"><%= f.text_field :name, :class => "text" %></td>

<td class="label">Artists:</td>
<td class="field">
    <% @track.each do |track| %>
    <%= f.text_field :artist_tokens, "data-pre" => track.artists.map(&:attributes).to_json, :class => "track_artist_tokens" %>
    <% end %>

<p><%= link_to 'Add new artist', new_artist_path, :remote => true %></p>

<td class="label">Version:</td>
<td class="field"><%= f.text_field :version, :class => "text" %></td>

<td class="label">ISRC:</td>
<td class="field"><%= f.text_field :isrc, :class => "text" %></td>

<td class="label">Remove:</td>
<td class="field"><%= f.check_box :_destroy %></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:49:49.940

在你的`show`行动`@track`中是一个`track`对象。在`customer`动作中，它是`track`对象的集合。所以要么你必须遍历它们：

```
<% @track.each do |track| %>
  <%= f.text_field :artist_tokens, "data-pre" => track.artists.map(&:attributes).to_json, :class => "text" %>
<% end %> 
```

或者获取`track`集合的第一个：

```
<%= f.text_field :artist_tokens, "data-pre" => @track.first.artists.map(&:attributes).to_json, :class => "text" %> 
```

# vim - 在 Vim 中重新排序数据

> ID：10395274
> 
> 赞同：2
> 
> 时间：2012-05-01T08:23:14.930
> 
> 标签：vim, macros, rows

我有一个分层列表，像这样

```
Menu1,SubMen1.1,SubMen1.2,SubMen1.3
Menu2,SubMen2.1,SubMen2.2,SubMen2.3
Menu3,SubMen3.1,SubMen3.2,SubMen3.3 
```

我想运行一个脚本或一个将信息重新排列到这个的宏

```
Menu1,SubMen1.1
Menu1,SubMen1.2
Menu1,SubMen1.3
Menu2,SubMen2.1
Menu2,SubMen2.2
Menu2,SubMen2.3
... 
```

有什么办法可以做到这一点吗？

**编辑：**

我应该说所有行都有不同的长度。有的只有一项，有的有八项。

一个文件中也有大约 4,000 个。我还有大约 20 个文件要处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:03:27.073

几天前reddit上有一个[类似的问题](http://www.reddit.com/r/vim/comments/sjnre/i_need_help_reorganising_a_csv_filecan_it_be_done/)[，sylvain_soliman在那里发布的解决方案](http://www.reddit.com/r/vim/comments/sjnre/i_need_help_reorganising_a_csv_filecan_it_be_done/c4elewo)似乎也适用于这种情况。我在这里发布它只是为了展示解决问题的不同方法。

```
:%s/\(^\([^,]*\),.\+\)\@<=,/\r\2,/g 
```

为了使其更具可读性，请使用`\v`：

```
:%s/\v(^([^,]*),.+)@<=,/\r\2,/g 
```

一点解释：

*   `:%s/`- 替换缓冲区中的所有行
*   `\v`- 使用“非常神奇”的正则表达式语法（防止转义诸如括号之类的东西）
*   `(^([^,]*),.+)`- 匹配行首的字符串，后跟逗号，后跟至少一个字符。这会将字符串从行首放置到匹配组 2 中的逗号。
*   `@<=`- 告诉 vim 以零宽度匹配前一个组，因此它不会被替换。
*   `,`- 匹配下一个逗号。
*   `/\r\2,/g`- 用换行符和匹配组 2 中的字符串替换上面的逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:32:41.907

我使用宏来做到这一点，也许不优雅，但有效。（`<CR>`是`enter`关键）

```
ggqqdw:s/,/\="\r".getreg('"').','/g<CR>jq 
```

现在您可以使用`@q`重复宏：

```
4000@q 
```

最后，删除所有临时空行

```
:g/^$/d 
```

# android - Android WebView，缩放图像以适应屏幕

> ID：10395292
> 
> 赞同：51
> 
> 时间：2012-05-01T08:24:26.423
> 
> 标签：android, android-webview

**我所拥有的：**我正在从 URL 加载图像。我只是做`(WebView).loadUrl(imageurl, extraheaders)`

**我得到了什么：**图像没有以 WebView 的全宽显示，它周围有空白区域（就像你在桌面浏览器中打开一个小 iamge 一样）

**我尝试了什么：**将 LayoutAlgorithm 设置为 SINGLE_COLUMN。工作完美，但缩放不起作用。（我在不`WebView.getSettings()`知道为什么启用它。设置`setUseWideViewPort(true);`加载图像没有任何空白，但它已完全放大。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2014-05-14T13:49:34.627

你也可以做这样的事情。

`img`在数据字符串的开头（取决于您的 Web 数据格式）添加 CSS 样式。

```
<style>img{display: inline; height: auto; max-width: 100%;}</style> 
```

为了快速处理 WebView 中的数据，我这样做了。

```
WebView content = (WebView) findViewById(R.id.webView1);
content.loadDataWithBaseURL(null, "<style>img{display: inline;height: auto;max-width: 100%;}</style>" + post.getContent(), "text/html", "UTF-8", null); 
```

这很像 bansal21ankit 所说的，但它可以在您的 HTML 中的每个图像上工作，而无需额外的工作。

* * *

编辑（对帖子内容的澄清）：

您可以使用任何`text/html`值而不是`post.getContent()`示例中的值。

此处的发布内容只是从某些数据源加载的内容示例，`text/html`然后与`style`使给定内容中的任何图像适合屏幕的部分连接。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-05-01T09:40:44.967

我遇到了同样的问题，这样做效果很好：

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();

String data = "<html><head><title>Example</title><meta name=\"viewport\"\"content=\"width="+width+", initial-scale=0.65 \" /></head>";
data = data + "<body><center><img width=\""+width+"\" src=\""+url+"\" /></center></body></html>";
webView.loadData(data, "text/html", null); 
```

* * *

编辑：由于这仍然是公认的答案，因此这是一个更好的解决方案（以下全部归功于 Tony）：

```
WebView content = (WebView) findViewById(R.id.webView1);
content.loadDataWithBaseURL(null, "<style>img{display: inline;height: auto;max-width: 100%;}</style>" + post.getContent(), "text/html", "UTF-8", null); 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-05-01T08:28:13.663

您应该缩放 webView 以适应屏幕：

```
 WebView data = (WebView) getViewById(R.id.webview1);
 data.getSettings().setLoadWithOverviewMode(true);
 data.getSettings().setUseWideViewPort(true); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-04-02T11:47:35.290

它有点晚了，但我希望这会有所帮助，你可以做的是：

```
String html = "<html><body><img src=\"" + URL + "\" width=\"100%\" height=\"100%\"\"/></body></html>";
mWebView.loadData(html, "text/html", null); 
```

这将使图像与您的 WebView 的宽度完全相似，其余的您可以调整 WebView 本身。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-02-19T17:23:37.433

对我有用的是：我读到，为了适应屏幕的宽度，您应该将其添加到字段内的 HTML 或 xml 中：

```
width="100%" 
```

所以我所做的是，我没有缩放和缩放图像，而是得到了 xml，把它放在 StringBuilder 中，找到了字段内部和之前的 src="https://blablabla.com/image.png" “src”子字符串我插入了“width="100%"”，然后用StringBuilder设置我的webView，mi代码是这样的：

```
public void setWebViewWithImageFit(String content){

        // content is the content of the HTML or XML.
        String stringToAdd = "width=\"100%\" ";

        // Create a StringBuilder to insert string in the middle of content.
        StringBuilder sb = new StringBuilder(content);

        int i = 0;
        int cont = 0;

        // Check for the "src" substring, if it exists, take the index where 
        // it appears and insert the stringToAdd there, then increment a counter
        // because the string gets altered and you should sum the length of the inserted substring
        while(i != -1){
            i = content.indexOf("src", i + 1);
            if(i != -1) sb.insert(i + (cont * stringToAdd.length()), stringToAdd );
            ++cont;
        }

        // Set the webView with the StringBuilder: sb.toString()
        WebView detailWebView = (WebView) findViewById(R.id.web_view);
        detailWebView.loadDataWithBaseURL(null, sb.toString(), "text/html", "utf-8", null);
} 
```

希望这会有所帮助，我花了几个小时才弄清楚如何解决这个问题。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-03-15T04:55:21.623

代码：

```
web = (WebView) findViewById(R.id.at_image_web);
web.getSettings().setBuiltInZoomControls(true);
web.getSettings().setUseWideViewPort(true);
web.getSettings().setJavaScriptEnabled(true);
web.getSettings().setLoadWithOverviewMode(true);
web.loadUrl(linkImage); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-16T14:13:31.460

这对我有用： `webView = (WebView) findViewById(R.id.webView); WebSettings webSettings = webView.getSettings(); webView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-01T08:30:36.707

我认为这将解决您的问题：-

```
 WebView web;

      web = (WebView) findViewById(R.id.webkit);
      web.setWebViewClient(new Callback());
      web.getSettings().setJavaScriptEnabled(true);
      web.getSettings().setLoadWithOverviewMode(true);
      web.getSettings().setUseWideViewPort(true);
      web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
      web.setScrollbarFadingEnabled(false); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-16T11:52:50.970

此代码为我工作：

```
String strData = "<head>" + "<style>" + ".smal-video-pnl,.smal-video-thumb,.detail-hldr{margin-left: 0px;margin-right:0px;}" + "</style>" +
            "</head>" + mListItem.get(position).getTitbits();
holder.webViewStatus.loadDataWithBaseURL(null, strData, "text/html", "UTF-8", null); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-18T07:59:35.013

```
@BindingAdapter("wvSetContent")
fun WebView.wvSetContent(content: String?) {
    this.isFocusable = true
    this.isFocusableInTouchMode = true
    this.settings.javaScriptEnabled = true
    this.scrollBarStyle = View.SCROLLBARS_INSIDE_OVERLAY
    this.settings.setRenderPriority(WebSettings.RenderPriority.HIGH)
    this.settings.cacheMode = WebSettings.LOAD_DEFAULT
    this.settings.mixedContentMode = WebSettings.MIXED_CONTENT_ALWAYS_ALLOW

    this.settings.domStorageEnabled = true
    this.settings.loadsImagesAutomatically = true;
    this.settings.setAppCacheEnabled(true)
    this.settings.databaseEnabled = true
    this.settings.setSupportMultipleWindows(false)
    this.loadDataWithBaseURL(null,
        "<style>img{display: inline;height: auto;max-width: 100%;}</style>$content", "text/html", "UTF-8", null)
} 
```

它对我有用

# c - 在文件系统级别创建文件

> ID：10395300
> 
> 赞同：1
> 
> 时间：2012-05-01T08:26:08.560
> 
> 标签：c, filesystems, linux-kernel, fat32, fat

我正在研究`FAT`Linux Kernel 中的文件系统代码`3.3`。对于一个项目，我需要在挂载时在挂载文件系统的根目录中创建一个文件。我已经想出了在哪里编写代码来创建它，但是有一些关于创建的问题。（函数`vfat_mount`在 中`linux/fs/fat/namei_vfat.c`）。

该`mount`函数似乎没有将挂载点作为路径，但我相信根目录的dentry存储在超级块中。我不确定如何使用这些可用数据创建文件。系统`open()`调用似乎不是一个选项，所以我应该`vfat_create`为此目的使用特定的文件系统吗？如果是这样，有人可以帮助我提供更多细节或一些例子。

此外，该文件需要跨越几个集群，我不希望文件系统搜索并为其分配空闲集群。那么有没有办法直接以这种方式创建文件，或者我应该`fat_add_cluster()`在创建文件后使用类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:13:04.243

您可以直接调用`filp_open()`在 fs/open.c 中定义和导出的函数。它实际上是由`open()`系统调用调用的，因此具有相同的参数。无需调用文件系统特定的函数。同样，一旦你完成了文件，用 关闭它`filp_close()`。

# php - 只有最后一个随机数插入数据库不是全部

> ID：10395302
> 
> 赞同：0
> 
> 时间：2012-05-01T08:26:25.290
> 
> 标签：php, cakephp

我制作了一个代码来生成 11 位随机数，我想将所有数字保存在数据库中

admin_create_epin.ctp（查看）

```
<tr>
   Add E-pin:(No of E-Pin)
   <td><?php echo $this->Form->input('e_pin',array('label'=>false));?></td> 
</tr> 
```

epins_controller.php

```
 public function admin_create_epin(){

   $limit = $this->data['Epin']['e_pin'];

   for($i=0;$i<$limit;$i++)
      {
         $random = substr(number_format(time() * rand(),0,'',''),0,11)."<br/>";
         $this->data['Epin']['e_pin'] = $random;

        //pr($this->data); it's show all random number

         $this->Epin->save($this->data);          // i have problem only here it's save only last random number
         $this->Session->setFlash("Epin has been added");
         $this->Redirect(array('action'=>'admin_create_epin')); 
    }   
} 
```

问题：代码生成所有随机数，但我的代码有问题，仅插入最后一个随机数而不是全部，我想插入所有随机数

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:35:05.510

1）您必须移出`Redirect()`循环。

2）在第一个`$this->Epin->save(...)`最后插入的id被存储之后`$this->Epin->id`，然后用于更新具有该id的记录以进行后续迭代。因此，您将只插入一条记录，并在最后一次迭代中重写。

保存前重置：

```
for($i=0;$i<$limit;$i++)
  {
     //...
     $this->Epin->id = null; // <- force insert in the next save
     $this->Epin->save($this->data);          // i have problem only here it's save only last random number
     //...
} 
```

你也可以试试`create()`方法：

```
$this->Epin->save($this->Epin->create($this->data)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:29:49.047

将以下行移出循环

```
 $this->Session->setFlash("Epin has been added");
 $this->Redirect(array('action'=>'admin_create_epin')); 
```

它会起作用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:28:34.673

试试这个：

```
public function admin_create_epin(){

   $limit = $this->data['Epin']['e_pin'];
   $this->data['Epin']['e_pin'] = array(); // assign this to be an array first.

   for($i=0;$i<$limit;$i++)
      {
         $random = substr(number_format(time() * rand(),0,'',''),0,11)."<br/>";
         $this->data['Epin']['e_pin'][] = $random; // this pushes the value onto the end of the array 'e_pin'

        //pr($this->data); it's show all random number

         $this->Epin->save($this->data);          // i have problem only here it's save only last random number
    }   

         $this->Session->setFlash("Epin has been added");
         $this->Redirect(array('action'=>'admin_create_epin')); 

} 
```

`$this->data['Epin']['e_pin']`通过数组访问您的所有号码。并且不要从循环中重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:35:53.630

换行： `$this->data['Epin']['e_pin'][$i] = $random;`代替`$this->data['Epin']['e_pin'] = $random;`

并将以下行移出循环

```
$this->Session->setFlash("Epin has been added");
 $this->Redirect(array('action'=>'admin_create_epin')); 
```

# objective-c - 除非单击，否则 UIButton 标题不会出现

> ID：10395306
> 
> 赞同：0
> 
> 时间：2012-05-01T08:26:41.203
> 
> 标签：objective-c, ios, xcode, ipad

除了问题的标题之外，我不知道如何描述问题：我有一个带有标题的按钮，在单击它时会出现，但不是处于正常状态。我四处张望无济于事。

如果您需要查看特定代码或想要其他详细信息（我相信您会这样做），请告诉我。

编辑：按钮是在笔尖中创建的，但这里是设置标题并处理按钮子视图的代码。

```
[chapterButton setTitle:[NSString stringWithFormat:@"%@: %d",newBookName,newChapter] forState:UIControlStateNormal];

UIImageView *triunghiView = (UIImageView *) [chapterButton viewWithTag:kTagTriangleView];
if(!triunghiView)
{
    triunghiView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"triunghi.png"]] autorelease];
    [triunghiView setContentMode:UIViewContentModeCenter];
    [triunghiView setTag:kTagTriangleView];
    [triunghiView sizeToFit];
    [chapterButton addSubview:triunghiView];

}

[triunghiView setCenter:CGPointMake(chapterButton.titleLabel.frame.origin.x + chapterButton.titleLabel.frame.size.width + triunghiView.frame.size.width + 5, chapterButton.frame.size.height/2)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:41:29.163

我最近遇到了这个问题，您还必须设置按钮的**标题颜色**，否则它会变成白色并看起来不可见（在圆形矩形按钮的默认设置中）。

`[btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];`

但是，这也可能是 Kjuly 的答案！没有代码很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:36:33.990

没有代码，好吧，猜你可能为你的标题设置了错误的状态。

```
[yourButton setTitle:@"Title" forState:UIControlStateNormal]; 
```

# .net - SAP .NET 连接器 3.0，将数据推送到 SAP 时出错

> ID：10395313
> 
> 赞同：0
> 
> 时间：2012-05-01T08:27:18.940
> 
> 标签：.net, sap, sap-dotnet-connector

我有一个旧程序将一些数据从 Microsoft SQL 服务器数据库推送到 SAP。它使用 Microsoft .NET Data Provider for mySAP Business Suite 连接到 SAP，并且一直运行良好。

现在，作为改进计划的一部分，我被要求从 Microsoft 驱动程序迁移到新的 SAP .Net 连接器 3.0 版。由于我对任何 Microsoft 连接器和 SAP 连接器都没有任何经验，因此我从文档开始。尽管我认为我已经完成了作业，但我遇到了一个我无法解决或找不到任何相关信息的错误。

我的主要功能：

```
 log.Debug("Get the SAP destination")
    Dim destination As RfcDestination = RfcDestinationManager.GetDestination("SAP")

    log.Debug("Fetch the function metadata")
    Dim rfcFunction As IRfcFunction = destination.Repository.CreateFunction("Z_TEC_CAT")

    log.Debug("Set the import parameters")
    Dim am As RfcStructureMetadata = destination.Repository.GetStructureMetadata("ZTEC_CAT")
    Dim exportTable As IRfcTable = rfcFunction.GetTable("ZTEC_CAT")
    FillIrfTable(exportTable, invoices)

    log.Debug("Invoking the function Z_TEC_CAT")
    rfcFunction.Invoke(destination) 
```

填充我必须发送给 SAP 的表的助手：

```
 Private Sub FillIrfTable(ByVal sapTable As IRfcTable, ByVal dt As DataTable)

    log.Debug("Started FillIrfTable")
    For Each row As DataRow In dt.Rows
        sapTable.Append()
        Dim index As Integer = 0
        Do While (index < dt.Columns.Count)
            Dim columName As String = dt.Columns.Item(index).ColumnName
            Dim columnValue = row.Item(index)
            sapTable.SetValue(columName, columnValue)
            index = (index + 1)
        Loop
    Next

    log.Debug("Completed FillIrfTable")

End Sub 
```

当可导出变量为空时，我得到一个 NO_DATA 异常并且一切都很好，但是当表有记录时，它会抛出：

```
Failed calling SAP Function Module Z_TEC_CAT
SAP.Middleware.Connector.RfcAbapException: BDC_OPEN_ERROR
   at SAP.Middleware.Connector.RfcConnection.ThrowRfcErrorMsg()
   at SAP.Middleware.Connector.RfcConnection.RfcReceive(RfcFunction function)
   at SAP.Middleware.Connector.RfcFunction.RfcDeserialize(RfcConnection conn, IRfcIOStream stream)
   at SAP.Middleware.Connector.RfcFunction.RfcCallReceive(RfcConnection conn, IRfcIOStream stream, RFCID rid)
   at SAP.Middleware.Connector.RfcFunction.RfcCallReceive(RfcConnection conn)
   at SAP.Middleware.Connector.RfcFunction.Invoke(RfcDestination destination) 
```

有谁知道会发生什么？任何建议将不胜感激。

谢谢，

简

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:45:11.917

经过一周的抗争后，我发现了发生了什么，我认为发布它可能会帮助其他人不要花很多时间在上面。

看起来 SAP 连接器在调用中插入了一个空格（Microsoft 连接器没有），因此，SAP 系统无法映射我发送给它的参数（exportTable）并且失败了。

另一端的 SAP 程序员已经修改了函数，所以现在它知道空间并且一切正常。

# javascript - 在不在页面上的标记字符串上运行 jquery 选择

> ID：10395314
> 
> 赞同：0
> 
> 时间：2012-05-01T08:27:28.323
> 
> 标签：javascript, jquery

我有从 ajax 调用返回的标记。标记尚未出现在页面上。在我把它放在页面上之前，我想在它上面运行 jquery 选择，例如知道某个 div 的 id 等。

是否可以在字符串上运行 jquery 选择？例如，我尝试执行以下操作以尝试获取具有 myClass 类的 div 的 id，但它不起作用。

```
$(response).find('.myClass').attr('id') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:29:49.237

if that string is a HTML markup string like: `'<div><div class="myClass" id="sameold"></div></div>'` then you will get sameold as a value returned

# android - Android缓存方法

> ID：10395318
> 
> 赞同：0
> 
> 时间：2012-05-01T08:27:48.927
> 
> 标签：android

在我的应用程序中，有一定数量的图像需要缓存。我需要缓存的顶部大约有 12 - 15 张图像。我所做的是将图像存储在设备目录中的文件中，就像这样。

```
 FileOutputStream o = new FileOutputStream(getFilesDir().getAbsolutePath()
                + "/background.txt");
        Bitmap b = getBitmapFromURL("http://10.84.4.2:8083/images/General/background.png");
        b.compress(Bitmap.CompressFormat.PNG, 90, o); 
```

然后像这样在需要时重新加载图像

```
BitmapDrawable bg  = new BitmapDrawable(BitmapFactory.decodeFile(c
                .getFilesDir().getAbsolutePath() + "/background.txt")); 
```

我像这样使用异步任务一次下载所有图像

```
public class DownloadImagesTask extends AsyncTask<String, String, Bitmap>
{

    Bitmap bmp;
    String name;

    @Override
    protected Bitmap doInBackground(String... urls)
    {
        name = urls[1];
        return download_Image(urls[0]);
    }

    @Override
    protected void onPostExecute(Bitmap result)
    {
        try
        {

            FileOutputStream o = new FileOutputStream(getFilesDir()
                    .getAbsolutePath() + name);
            result.compress(Bitmap.CompressFormat.PNG, 90, o);
        } catch (Exception e)
        {
            e.printStackTrace();
        }

    }

    private Bitmap download_Image(String url)
    {
        return bmp = getBitmapFromURL(url);

    }

} 
```

我的问题是，这是一种不好的做法吗？我试图找到关于在线缓存的好教程，但发现很难找到一个完整的教程来正确解释它。我使用的方法看起来很简单，但不确定是否推荐。

如果有人能告诉我这样做的优缺点是什么，我是否应该考虑改用另一种方法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:31:27.860

尝试使用来自[lazyadapter 项目的 FedorVlasov 的图像加载器](https://github.com/thest1/LazyList)

# javascript - python将str转换为javascript文字字符串

> ID：10395319
> 
> 赞同：0
> 
> 时间：2012-05-01T08:27:57.933
> 
> 标签：javascript, python

我想使用python动态生成javascript代码。

```
def convert(jsstring=''):
    return 'function dosomething () { return %s.toLowerCase(); }' % jsstring 
```

问题是`jsstring`一个python字符串。

如何将其转换回 javascript 字符串文字以`dosomething`生成有效的 javascript 函数？

例如

称呼

```
convert("javascript") 
```

现在输出

```
 function dosomething () { return javascript.toLowerCase(); } 
```

这不是一个有效的 javascript 函数

预期产出

```
 function dosomething () { return "javascript".toLowerCase(); } 
```

另一个例子，调用

```
convert("javascript\'") 
```

预期产出

```
 function dosomething () { return "javascript\'".toLowerCase(); } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:40:18.600

如何在 周围添加适当的引号`%s`，即：

```
'function dosomething () { return "%s".toLowerCase(); }' % jsstring 
```

这是一个命令行会话来澄清差异：

```
In [10]: joe = 'somestring'

In [11]: '%s.toLowerCase();' % joe
Out[11]: 'somestring.toLowerCase();'

In [12]: '"%s".toLowerCase();' % joe
Out[12]: '"somestring".toLowerCase();' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:40:35.910

单步执行您的代码：

```
def convert(jsstring=''):
    return 'function dosomething () { return %s.toLowerCase(); }' % jsstring 
```

现在，如果`jsstring`是`"Foo"`，它会产生什么？

```
function dosomething () { return Foo.toLowerCase(); } 
```

当然这会失败。`Foo`javascript 函数中没有名为 set 的变量。

十有八九，你想要一个字符串文字：

```
def convert(jsstring=''):
    return 'function dosomething () { return "%s".toLowerCase(); }' % jsstring 
```

`jsstring`当然，如果包含引号、换行符和其他敏感字符，您需要确保不会出错。我会把它留给你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T08:50:41.613

你想要[json](http://docs.python.org/library/json.html)：

```
import json

jsstring = """
    foo "bar"
"""

print 'function dosomething () { return %s.toLowerCase(); }' % json.dumps(jsstring) 
```

建议`repr`不适用于 unicode 字符串：

```
jsstring = u"\u1234"
print 'function dosomething () { return %s.toLowerCase(); }' % repr(jsstring) 
```

返回

```
function dosomething () { return u'\u1234'.toLowerCase(); } 
```

这不是有效的javascript。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T08:55:50.877

在字符串插值中使用 repr：

```
>>> 'This is a string: %r' % ('python string')
'This is a string: "python string"' 
```

因此，只需在代码中将 %s 替换为 %r 即可。`repr()`将为您完成工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T08:48:11.003

你最好适当地引用你传递给函数的字符串。这将使事情变得简单

对于提到的例子

```
>>> convert('"javascript"')
'function dosomething () { return "javascript".toLowerCase(); }' 
```

如果你想传递一个带引号的字符串，请适当地转义它

```
>>> print convert("\"javascript\"\"")
function dosomething () { return "javascript"".toLowerCase(); } 
```

请记住，如果您想要原始表示，请始终使用`repr`，您将得到您想要的

```
>>> repr(convert("\"javascript\"\""))
'\'function dosomething () { return "javascript"".toLowerCase(); }\'' 
```

或者为了保持透明，在函数中添加 repr。

```
>>> def convert(jsstring=''):
    return repr('function dosomething () { return %s.toLowerCase(); }' % jsstring)

>>> convert("\"javascript\"\"")
'\'function dosomething () { return "javascript"".toLowerCase(); }\'' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-01T08:48:48.737

使用`repr`，否则如果字符串包含 " 或 '，您的字符串将不起作用。例如：

```
... % repr(jsstring) 
```

使用失败`repr`也可能是一个安全漏洞（通过注入 " 或 ' 或其他字符）。`repr`如果您的字符串包含这些字符，使用失败也可能导致您的 javascript 失败。虽然如果安全是一个问题，您还需要通过适当的转义系统避免文本`</script>`和其他内容，或将其编码为 base64 之类的内容。

# mysql - Writing to a MySQL ENUM column by index using ODBC

> ID：10395329
> 
> 赞同：0
> 
> 时间：2012-05-01T08:29:38.747
> 
> 标签：mysql, enums, odbc

From the MySQL reference manual:

> If you store a number into an ENUM column, the number is treated as the index into the possible values, and the value stored is the enumeration member with that index.

But when I try to write an `SQL_SMALLINT` value to that ENUM column using ODBC I get the error HY000:1:1265 (Data truncated for column ...).

So how can I write a number into a MySQL ENUM column using ODBC, such that this number is interpreted as the enum index?

* * *

Edit: Some more information

The column is defined as:

```
`TrackState` ENUM('NEWE','NEWN','VALID','INVISIBLE','CLOSED','DIED') NULL 
```

and the statement used with ODBC is:

```
INSERT INTO test (TrackState) VALUES (?) 
```

and in my C code I use `SQLBindParameter` with `SQL_C_USHORT` and `SQL_SMALLINT` to bind an unsigned short variable.

When I change my TrackState column to an ordinary `INT` column, the numeric value (which I want to be interpreted as the index of an enum) is successfully written.

# apache-flex - calculate binary expression - convert string to binary data

> ID：10395331
> 
> 赞同：0
> 
> 时间：2012-05-01T08:29:43.777
> 
> 标签：apache-flex, binary

I get a string like this: "000AND111" I need to calculate this and return the result. How I do it in Flex?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:50:47.703

感谢 @powerlljf3 的 pingback 看到这篇文章

我建议采用 3 个阶段的方法。

1-编写一个小解析器，将字符串拆分为有意义的标记（数字和操作数）。由于操作数都是 litterals 并且数字是 0/1 组合，解析器非常简单（语法是 LL1），所以正则表达式可以在这里真正完成工作。

2-在建立标记的顺序和技术上称为解析的表达式树（标记和操作数的顺序）之后，只需使用特定函数实现任何操作数（指向我的博客的链接，适用于少数常见的布尔代数操作数）

3-最后从左到右开始读取标记，并在找到操作数的地方应用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:20:12.250

我会浏览这个[http://www.nicolabortignon.com/as3-bitwise-operations/](http://www.nicolabortignon.com/as3-bitwise-operations/)。它有许多可以在 AS3 中使用的二进制数学示例。

# sql-server - How to create job in SQL Server 2005

> ID：10395335
> 
> 赞同：0
> 
> 时间：2012-05-01T08:29:51.953
> 
> 标签：sql-server

I want to create job that can run my stored procedure automatically by schedule. And I have completed all the information and do everything that it require. but then I click OK to finish it. And it shown message like this:

> Unable to cast object of type 'Microsoft.SqlServer.Management.Smo.SimpleObjectKey' to type 'Microsoft.SqlServer.Management.Smo.Agent.JobObjectKey'. (Microsoft.SqlServer.Smo)

Please, help me...

Thanks you in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:15:44.190

只需将错误粘贴到谷歌搜索中即可显示这是一个已知问题，并且似乎已在 SP2 中修复。

[http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/e7c0e73e-8d4b-4624-a19e-352a69995f9e/](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/e7c0e73e-8d4b-4624-a19e-352a69995f9e/)

# jdeveloper - Validation on an Attribute Comparing another Attribute of another Iterator

> ID：10395341
> 
> 赞同：0
> 
> 时间：2012-05-01T08:30:25.443
> 
> 标签：jdeveloper, oracle-adf

JDev 11.1.1.5.0 I have two tables in the form, one read only A and one editable B. There is an attribute called terms in the table B and an attribute called limit in table A. I want to validate the key-in of terms in table B for which it should not be greater than the value of limit in table A.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:48:24.743

您可以在表 B 的 EntityObjectImpl 上创建自定义验证 在代码中执行以下步骤 1-创建表 A 的 EntityObjectImpl 的对象 2-获取表 A 中属性限制的值 3-比较两个属性的值并处理您的验证

# php - preg_replace() [function.preg-replace]：/home/ 中的未知修饰符 '/'

> ID：10395349
> 
> 赞同：0
> 
> 时间：2012-05-01T08:31:54.383
> 
> 标签：php, regex, bbcode

在我的网站中，我想用类似这样的其他链接替换链接

`www.abc.com` 或`http://abc.com`将被替换为

`http://www.XXXXXX.com/sonal?www.abc.com`

或者

`http://www.XXXXXX.com/sonal?http://abc.com`

所以我正在使用这段代码，但这段代码给出了一些错误

> `Warning: preg_replace() [function.preg-replace]: Unknown modifier '/'` `in /home/XXXXX/public_html/YYYYYYYYY/KKKKKK.php on line 495`

```
$search_array = array(
   "/\[url]www|http://.([^'\"]*)\[\/url]/iU",
   "/\[url]([^'\"]*)\[\/url]/iU",
   "/\[url=www|http://.([^'\"\s]*)](.*)\[\/url]/iU",
   "/\[url=([^'\"\s]*)](.*)\[\/url]/iU"
);
$replace_array = array(
   "<a href=\"http://XXXXXX.com/sonal?.\\1\" target=\"_blank\" rel=\"nofollow\">www.   \\1</a>",
   "<a href=\"\\1\" target=\"_blank\" rel=\"nofollow\">\\1</a>",
   "<a href=\"http://XXXXXX.com/sonal?.\\1\" target=\"_blank\" rel=\"nofollow\">\\2</a>",
   "<a href=\"\\1\" target=\"_blank\" rel=\"nofollow\">\\2</a>"
);

$msg = preg_replace($search_array, $replace_array, $msg);
return $msg; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T08:39:38.257

解决这个问题的方法很少

转义“/”

```
$search_array = array(
  "/\[url]www|http:\/\/.([^'\"]*)\[\/url]/iU",
  "/\[url]([^'\"]*)\[\/url]/iU",
  "/\[url=www|http:\/\/.([^'\"\s]*)](.*)\[\/url]/iU",
  "/\[url=([^'\"\s]*)](.*)\[\/url]/iU"
); 
```

或使用不同的正则表达式分隔符，如“#”

```
$search_array = array(
  "#\[url]www|http://.([^'\"]*)\[\/url]#iU",
  "#\[url]([^'\"]*)\[\/url]#iU",
  "#\[url=www|http://.([^'\"\s]*)](.*)\[\/url]#iU",
  "#\[url=([^'\"\s]*)](.*)\[\/url]#iU"
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T08:35:52.753

```
"/\[url]www|http://.([^'\"]*)\[\/url]/iU",
 ^               ^^                  ^ 
```

您要么需要`//`将中间的两个转义为`\/\/`，要么更好地为正则表达式使用不同的分隔符：

```
"~\[url]www|http://.([^'\"]*)\[/url]~iU", 
```

# java - 日期挑选和发现差异

> ID：10395351
> 
> 赞同：2
> 
> 时间：2012-05-01T08:32:23.850
> 
> 标签：java, netbeans, jcalendar, date-difference

我是使用 Netbeans 进行 Java 编程的新手。我已将 jCalendar 添加到我的 GUI 以选择日期。

我已经在事件 - > jCalendar 按钮的“属性更改”代码中输入了这一行，

```
Date date=jcalendar1.getDate(); 
```

这样我就可以在更改日期时立即获得日期。我对吗？

目的：我想找出从上面这个日期的下午（12:00 pm）到现在（当前日期和时间）的毫秒差。有几个程序显示日期差异，但都有硬编码的日期，作为新手，我不知道如何用选择的日期替换它。（我也对对象日期和日历感到困惑，无法理解它们之间的区别）。例如，这里的一个片段：

[http://www.java2s.com/Code/Java/Data-type/ReturnsaDatesetjusttoNoontotheclosestpossiblemillisecondoftheday.htm](http://www.java2s.com/Code/Java/Data-type/ReturnsaDatesetjusttoNoontotheclosestpossiblemillisecondoftheday.htm)

```
if (day == null) day = new Date();
  cal.setTime(day);
  cal.set(Calendar.HOUR_OF_DAY, 12);
  cal.set(Calendar.MINUTE,      cal.getMinimum(Calendar.MINUTE));
  cal.set(Calendar.SECOND,      cal.getMinimum(Calendar.SECOND));
  cal.set(Calendar.MILLISECOND, cal.getMinimum(Calendar.MILLISECOND));
  return cal.getTime(); 
```

这里 day 是一个 Date 对象。`cal`（日历对象）如何链接到它以输入时间。首先应该如何定义cal对象？我怎样才能在我的程序中使用这个或你认为的其他任何东西。一段带有详细注释的代码会更有帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:42:34.613

而不是使用：

```
Date day = new Date(); 
```

采用：

```
Calendar cal = Calendar.getInstance();
cal.set (...);
Date date = new Date(cal.getTimeInMillis()); 
```

值得将这些东西抽象到 DateUtils 类或类似的类中，如下所示：

```
public static Date create(int year, int month, int day, int hour, int minute, int second) {
    return new Date(getTimeInMillis(year, month, day, hour, minute, second));
}

public static long getTimeInMillis(int year, int month, int day, int hour, int minute, int second, int milliseconds) {
    Calendar cal = Calendar.getInstance();

    cal.clear();
    cal.set(year, month, day, hour, minute, second);
    cal.set(Calendar.MILLISECOND, milliseconds);

    return cal.getTimeInMillis();
} 
```

# gwt - 如何从 GWT 中的 jsarray 中删除值？

> ID：10395353
> 
> 赞同：2
> 
> 时间：2012-05-01T08:32:31.330
> 
> 标签：gwt

我有两个问题：1）是否可以删除 jsarray 中的任何值或仅使用 pop 方法删除最后一个值？2）如何从 jsarray 中删除或删除一个值？有人可以发布一个例子。像这样的东西

```
public JsArray<MyObject> myObjects = JavaScriptObject.createArray().cast();
myObjects.push(new MyObject("Good"));
myObjects.push(new MyObject("morning"));
myObjects.push(new MyObject("people"));
myObjects.delete(1); 
```

多谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T10:55:39.287

JavaScript 中的数组是*sparse*，因此你不能，例如，从中删除一个对象并将以下所有内容移到较低的索引（就像你在 Java 中使用的`List`例子一样）；至少不是用一些*删除*方法。

仅使用 GWT Java，您可以将特定索引处的值设置为`null`，仅此而已。

使用 JSNI，您可以删除它（几乎等同于将其设置为`undefined`: `delete myObjects[1]`），也可以将其删除：

```
public static native remove(JsArray<?> arr, int index, int count) /*-{
   arr.splice(index, count);
}-*/; 
```

# c++ - c++ 类中的运算符重载

> ID：10395359
> 
> 赞同：0
> 
> 时间：2012-05-01T08:33:11.657
> 
> 标签：c++, operator-overloading

试图在 C++ 类中重载 < 和 > 运算符

```
 template <typename T>
 bool BinaryTree<T>::operator < (BinaryTree<T> &B) {
   return (this->count < B.setCount(0));
 } 

template <typename T>
float BinaryTree<T>::setCount(float c)
{
  count += c;
  return count;
} 
```

其中 setCount(0) 返回 B obj 的计数。但是无论比较的数字如何，这总是输出真。

将我的代码更改为

```
template <typename T>
bool BinaryTree<T>::operator < (const BinaryTree<T> &B) {
  return (this->count < B.count);
}

printf("%c %lf\n", tree[0]->getData(), tree[0]->setCount(0));
printf("%c %lf\n", tree[1]->getData(), tree[1]->setCount(0));

Output >

a 0.750000
b 0.250000

if(tree[0] < tree[1])
   printf("0 < 1\n");
else printf("1 > 0\n");

Output > 

0 < 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:03:09.057

这：

```
 printf("%c %lf\n", tree[0]->getData(), tree[0]->setCount(0));
  printf("%c %lf\n", tree[1]->getData(), tree[1]->setCount(0)); 
```

向我建议`tree`持有**指向**您的`BinaryTree<T>`.

在这里，您正在比较指针，即内存地址，而不是值：

```
if(tree[0] < tree[1])
   printf("0 < 1\n");
else printf("1 > 0\n"); 
```

你可能需要

```
if(*(tree[0]) < *(tree[1]))
   printf("0 < 1\n");
else printf("1 > 0\n"); 
```

# jquery - How can I get just the first word from an address link text with jQuery?

> ID：10395360
> 
> 赞同：1
> 
> 时间：2012-05-01T08:33:12.093
> 
> 标签：jquery

I have the following:

```
<a title="Home" href="#">Home test test</a> 
```

I can use a.html() to get me "Home test test" but what I need is just the first word "Home". Is there an easy way that I can do this with jQuery?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:35:52.370

**演示** [http://jsfiddle.net/HvFMp/](http://jsfiddle.net/HvFMp/)

拆分：（如果您愿意，请进一步阅读）[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

**另一个使用匹配的演示** [http://jsfiddle.net/LAKqB/](http://jsfiddle.net/LAKqB/)（使用匹配）

**代码**

```
$.fn.ready(function(){

  alert($('a').html().split(' ')[0]);    

});
​ 
```

**使用匹配 api 的代码**

```
$.fn.ready(function(){
  var str = $("a").text().match(/\w+/);

  alert(str);     

});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:35:28.133

`split()`在javascript中使用函数。

```
var str = a.html();
alert(str.split()[0]); 
```

这将只返回“家”；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T08:35:35.320

如果它的字符串，`"Home test test"`那么您可以使用 split 并获取该数组中的第一个索引：（`a.html().split(' ')[0]`在空间上[拆分](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)，因此您将获得一个数组`["Home", "test", "test"]`：）

# c# - Why does this regular expression pattern cause the parser to hang given certain input?

> ID：10395361
> 
> 赞同：2
> 
> 时间：2012-05-01T08:33:26.557
> 
> 标签：c#, .net, regex

I have a regex which parses a TNS names file. However it hangs on certain TNSNames files. The problem has been tracked down to whether the string being matched has a space after the `HOST=` part or not. Ignoring the appropriateness of the pattern, and how to fix the issue (this has been dealt with) what I want to know is why does the change in input cause the application to hang, as the `Regex.Match(invalid)` call never returns

```
string valid = "SOMENAME = (DESCRIPTION= " + 
                "(ADDRESS= (PROTOCOL=TCP) (HOST = localhost) (PORT=1521) ) " + 
                "(CONNECT_DATA= (SERVICE_NAME=ABC)))";

string invalid = "SOMENAME = (DESCRIPTION= " + 
                "(ADDRESS= (PROTOCOL=TCP) (HOST =localhost) (PORT=1521) ) " + 
                "(CONNECT_DATA= (SERVICE_NAME=ABC)))";
Regex regex = new Regex("SOMENAME" + @"[^=]*=(\s|[^H]*)*HOST\s*=\s(?<host>[^\)]*)\s*\)", RegexOptions.Multiline | RegexOptions.IgnoreCase);
//this line is fine
Match match = regex.Match(valid);  
//this line causes visual studio to hang
match = regex.Match(invalid); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:38:36.817

这肯定是由[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)造成的，罪魁祸首是

```
(\s|[^H]*)* 
```

因为`\s`和`[^H]`可以匹配相同的内容，并且因为您嵌套了两个无限量词。

`[^H]*`单独匹配完全相同的内容并且不容易回溯，所以试试这个：

```
Regex regex = new Regex("SOMENAME" + @"[^=]*=([^H]*)HOST\s*=\s(?<host>[^\)]*)\s*\)", RegexOptions.Multiline | RegexOptions.IgnoreCase); 
```

# google-analytics - jQuery 跟踪 Google 分析事件不起作用

> ID：10395364
> 
> 赞同：3
> 
> 时间：2012-05-01T08:33:56.100
> 
> 标签：google-analytics

我正在尝试使用谷歌分析事件，但到目前为止没有任何成功..

我正在做的是使用 jQuery 加载函数加载 5 个页面，我想跟踪每次加载的“下一步按钮”。但看起来我做错了什么..

这是下一个按钮事件代码：

```
 $('.NextButton').click(function () {
                _gaq.push(['_trackEvent', 'fz_main_page', 'clicked']);
                installation.load_page({ inner_page: next_page, comid: data.comid, outerid: data.outerid, single_app: "1" });
            }); 
```

分析代码：

```
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-25162785-2']);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:03:46.943

该`installation.load_page`功能可能会阻止`trackEvent`触发。尝试将您的`load`函数包装在`setTimeout`：

```
setTimeout('installation.load_page({ inner_page: next_page, comid: data.comid, outerid: data.outerid, single_app: "1" })', 100); 
```

安装[谷歌分析调试器](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)。在控制台（control、shift、j）中查找事件跟踪处理。

![在此处输入图像描述](../Images/db5cf5abd12efdaf6e1a4f67a98753ee.png)

如果您没有在此处看到所有事件的跟踪，则说明跟踪代码出现了其他问题。

# .net - 如何使用 DotNetOpenAuth 强制 OAuth2 访问令牌过期

> ID：10395368
> 
> 赞同：9
> 
> 时间：2012-05-01T08:34:53.590
> 
> 标签：.net, oauth-2.0, dotnetopenauth

我正在实现基于 DotNetOpenAuth 的 OAuth2 授权/资源服务器。我的服务器将发出寿命很长的访问令牌。这些令牌将在 iOS 设备上使用。我看到的流程是这样的，1）要求用户在 iOS 设备上输入他们的用户名/密码 2）请求访问令牌，授予类型为资源所有者密码凭据 3）授予并存储令牌在 iOS 设备上以供将来使用。

现在有时用户会被禁用。我想同时撤销令牌。我该怎么做呢？我*怀疑*我需要为此使用`ICryptoKeyStore.RemoveKey`方法，但不确定如何找到要删除的密钥。

注 1：将来该服务器将被第三方 Web 应用程序使用。

注意 2：拥有授予类型的资源所有者密码凭据的要求源于这样一个事实，即认为在 iOS 设备上实现浏览器重定向不值得花时间。

**更新 1** 源代码中的一些挖掘表明 DotNetOpenAuth 不支持这种强制令牌过期的能力。此外，在标准实现中*甚至没有检查令牌的*生命周期。据我所见，calss 对此负责`StandardAccessTokenAnalyzer`，它忽略了`Lifetime`and`UtcCreationDate`属性。此外，标准类似乎没有`ResourceServer`任何数据库访问编码，令牌有效性仅由令牌内容检查，所以似乎如果我需要添加使令牌过期的能力，我需要`ResourseServer`自己连接到数据库。我错过了什么吗？

**更新 2** 我想我在这里找到了答案：[https](https://groups.google.com/forum/#!topic/dotnetopenid/aLabu1ujkt4) ://groups.google.com/forum/#!topic/dotnetopenid/ aLabu1ujkt4 这不是我所希望的，我仍然有一些不清楚的地方。例如，安德鲁写道：

> 然后，您的自定义类可以获取访问令牌，然后使用对授权服务器的私有 HTTP 请求来验证令牌的持续有效性。

鉴于不包括授权 ID ，尚不清楚*如何进行此验证。*`AccessToken`这会使查找目标授权记录变得困难。理论上，我们可以尝试通过结合客户、用户和发布时间来查找它，但据我所知，不能保证这些都是唯一的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T00:15:27.763

> 现在有时用户会被禁用。我想同时撤销令牌。我该怎么做呢？我怀疑我需要为此使用 ICryptoKeyStore.RemoveKey 方法，但不确定如何找到要删除的密钥。

您可以通过撤销令牌背后的授权来撤销令牌。这通常意味着您删除数据库授权表中的条目。这必须具有的效果是您的实现`IAuthorizationServerHost.IsAuthorizationValid`将为此授权返回 false。

这不会立即撤销访问令牌，但会阻止客户端刷新过期的访问令牌。因此，只要您的访问令牌的生命周期相当短（一小时或更短），那么用户的禁用帐户就意味着所有客户端访问都将在一小时内终止。

> 注意 2：拥有授予类型的资源所有者密码凭据的要求源于这样一个事实，即认为在 iOS 设备上实现浏览器重定向不值得花时间。

这是你的应用程序。但我敦促大家使用正确的浏览器重定向流程。用户可能已经在设备的浏览器上登录到您的服务器，因此他们可以完全避免通过这种方式输入他们的凭据，从而提高您的转化率。与设备应用程序相比，用户也更有可能信任要求其凭据的浏览器。至少我希望如此。

顺便说一句，非身份验证客户端 (TBD)可能*不支持资源所有者密码授予类型，而安装的设备应用程序通常会支持。*因此，您可能会被迫使用不同的授权类型。

> **更新 1**源代码中的一些挖掘表明 DotNetOpenAuth 不支持这种强制令牌过期的能力。此外，在标准实现中甚至没有检查令牌的生命周期。据我所见，calss 对此负责的是 StandardAccessTokenAnalyzer，它忽略了 Lifetime 和 UtcCreationDate 属性。

DotNetOpenAuth*会*检查并拒绝过期的访问令牌。只是不在那个班级。它在反序列化访问令牌的代码中进行了检查。

> 此外，标准 ResourceServer 类似乎没有任何数据库访问编码，令牌有效性仅由令牌内容检查，因此似乎如果我需要添加使令牌过期的能力，我需要自己将 ResourseServer 连接到数据库. 我错过了什么吗？

您是正确的，`ResourceServer`该类不需要任何数据库访问，因为假定访问令牌在其整个生命周期内都有效（默认情况下它们是不可撤销的）。这就是为什么建议使用较短的访问令牌生命周期。这并不像你想象的那么遥远。例如，您很可能已经使用的 ASP.NET 表单身份验证基于相同的模式：对用户进行一次身份验证，访问数据库进行凭据检查，然后向用户代理发出加密和签名的 HTTP cookie。从那时起，数据库不会在每个传入的 HTTP 请求上都被命中——cookie 签名被验证，然后假定它是有效的，直到 cookie 过期。同样的原理。除了在 HTTP cookie 的情况下，还有一个*滑动*超时，因此只要用户在站点上保持活动状态，他们就不必重新进行身份验证。使用 OAuth 2 访问令牌，无论使用得多活跃，它们都会过期，从而强制刷新令牌，然后可以拒绝该令牌以锁定访问。

> 鉴于 AccessToken 不包含授权 ID，尚不清楚如何进行此验证。这会使查找目标授权记录变得困难。理论上，我们可以尝试通过结合客户、用户和发布时间来查找它，但据我所知，不能保证这些都是唯一的。

确实没有包含 ID，但是 client-user-issuedate-scope 的元组应该是唯一的，因为您的授权表应该有一个唯一的约束，因为重复是没有意义的。此外，如果它们不是唯一的，那么只要存在带有该元组的任何记录就表明授权是有效的。

希望这可以帮助。

# php - MYSQL 查询不是我要找的结果

> ID：10395369
> 
> 赞同：0
> 
> 时间：2012-05-01T08:35:03.853
> 
> 标签：php, mysql

我有这个查询：

```
SELECT gamer_id,COUNT(*) AS sum, SUM(amount) as amount 
        FROM sales_list 
        WHERE rdate BETWEEN '2012-04-01' AND '2012-04-30' AND gamer_id NOT IN 
            (SELECT gamer_id FROM sales_list WHERE rdate < '2012-04-01' GROUP BY gamer_id) 
        GROUP BY gamer_id 
```

这个查询打印了“2”个结果，而我只看到了“1”。

我有 1 个玩家在 4 月份存款 2 次，我不想计算总存款只是为了计算存款的总玩家。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:43:38.363

我真的不明白，但你想要一个游戏玩家的存款数量或他存款的金额？！

这应该提供存款数量：

```
SELECT gamer_id, COUNT(gamer_id) AS sum, SUM(amount) as amount 
FROM sales_list 
WHERE rdate BETWEEN '2012-04-01' AND '2012-04-30'
GROUP BY gamer_id
HAVING COUNT(gamer_id)>0 
```

编辑：

```
SELECT DISTINCT gamer_id
FROM sales_list 
WHERE rdate BETWEEN '2012-04-01' AND '2012-04-30' 
AND gamer_id NOT IN  (SELECT gamer_id 
                      FROM sales_list 
                      WHERE rdate < '2012-04-01') 
GROUP BY gamer_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:48:44.107

尝试这个：

```
SELECT sl.gamer_id,COUNT(*) AS sum, SUM(sl.amount) as amount 
        FROM sales_list sl
        WHERE sl.rdate BETWEEN '2012-04-01' AND '2012-04-30' AND sl.gamer_id NOT IN 
            (SELECT sl1.gamer_id FROM sales_list sl1 WHERE sl1.rdate < '2012-04-01' GROUP BY sl1.gamer_id) 
        GROUP BY sl.gamer_id 
```

# perl - 通过多个键对哈希数组进行排序 Perl

> ID：10395383
> 
> 赞同：23
> 
> 时间：2012-05-01T08:36:12.583
> 
> 标签：perl

我有一个包含哈希的数组引用（即@AOH）

```
$arr_ref = [ { 'brand' => 'A',
               'supplier' => 'X',
               'PO' => '2'
              },
              { 'brand' => 'B',
                'supplier' => 'Y',
                'PO' => '1'       
              },
              { 'brand' => 'B',
                'supplier' => 'X',
                'PO' => '2'           
              },
              { 'brand' => 'A',
                'supplier' => 'X',
                'PO' => '1'
              },
              { 'brand' => 'B',
                'supplier' => 'X',
                'PO' => '1'           
              }
]; 
```

我想根据所有三个键（即品牌、供应商和采购订单）对其进行排序。排序顺序应该是先品牌，然后是供应商，最后是PO。

排序后的数组引用应该是：

```
$arr_ref = [ { 'brand' => 'A',
                'supplier' => 'X',
                'PO' => '1'
              },
              { 'brand' => 'A',
               'supplier' => 'X',
               'PO' => '2'
              },
              { 'brand' => 'B',
                'supplier' => 'X',
                'PO' => '1'           
              },
              { 'brand' => 'B',
                'supplier' => 'X',
                'PO' => '2'           
              },              
              { 'brand' => 'B',
                'supplier' => 'Y',
                'PO' => '1'       
              },
]; 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-01T08:45:10.693

由于[`<=>`and`cmp`](http://perldoc.perl.org/perlop.html#Equality-Operators)返回 0 表示相等，这是错误的，并且因为 Perl 的逻辑布尔运算符返回决定值而不是仅仅 0 或 1，所以按多个键排序就像将多个比较串在一起一样简单`or`or `||`：

```
@$arr_ref = sort { $a->{brand}    cmp $b->{brand}    or 
                   $a->{supplier} cmp $b->{supplier} or 
                   $a->{PO}       <=> $b->{PO} 
                 } @$arr_ref; 
```

我假设 PO 是一个数字字段，所以你使用`<=>`它而不是`cmp`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T08:51:43.390

以下应该对数组引用进行排序并将数组放回`$arr_ref`：

```
$arr_ref = [sort by_brand_supplier_PO @$arr_ref];

sub by_brand_supplier_PO {
    $a->{brand} cmp $b->{brand} ||
    $a->{supplier} cmp $b->{supplier} ||
    $a->{PO} <=> $b->{PO}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T12:17:24.677

您可以使用[Sort::Key::Multi](https://metacpan.org/pod/Sort::Key::Multi)，与 Sort::Key 一起分发。

在这种情况下，我们使用`ssikeysort`，它需要一个返回字符串、字符串和整数的块，并按该元组对值进行排序。（`s`in`ssi`代表字符串， in 代表`i`整数。）

```
use Sort::Key::Multi qw(ssikeysort);

@$arr_ref = ssikeysort { $_->{brand}, $_->{supplier}, $_->{PO} } @$arr_ref; 
```

* * *

您还可以使用 in-place 变体，它使用更少的内存：

```
use Sort::Key::Multi qw(ssikeysort_inplace);

ssikeysort_inplace { $_->{brand}, $_->{supplier}, $_->{PO} } @$arr_ref; 
```

# asp.net - 使用占位符动态生成控件

> ID：10395384
> 
> 赞同：0
> 
> 时间：2012-05-01T08:36:25.723
> 
> 标签：asp.net, .net

如何`divs`在 c# 中使用占位符动态创建？我已经在中继器内声明了占位符。

是否可以在占位符中动态创建控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:40:18.470

干得好：

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
     if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
     {
           PlaceHolder pl = e.Item.FindControl("PlaceHolder1") as PlaceHolder;
           if (pl != null)
           {
               HtmlGenericControl div1 = new HtmlGenericControl("div"); 
               div1.InnerHtml = "Hello"; 
               pl.Controls.Add(div1);
           }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:54:54.147

`div`要在`PlaceHolder`控件内动态添加一个`Repeater`控件，您需要`ItemDataBound`使用`Repeater`.

在方法中，`ItemDataBound`您将需要找到`PlaceHolder`控件。首先检查是否`ItemType`是`ListItemType.Item`或`ListItemType.AlternatingItem`首先。

```
PlaceHolder ph = (PlaceHolder) e.Item.FindControl("PlaceHolderControl1"); 
```

然后您可以`div`按照 MUG4N 的建议添加。

```
HtmlGenericControl div1 = new HtmlGenericControl("div");
div1.InnerHtml = "Hello";
div1.Attributes.Add("class", "classname");
div1.Attributes.Add("style", "top: 10px; left: 20px;");
ph.Controls.Add(div1); 
```

要添加另一个，只需从下`div`重复到`div1 = new HtmlGenericControl("div");``ph.Controls.Add(div1);`

或者，您可以添加一个`<asp:Panel>`控件，因为它在页面上呈现为 a`<div>`但更多的是“.net”

```
Panel panel1 = new Panel(); 
```

然后在其中添加一个`<asp:Literal>`控件。

```
Literal literal1 = new Literal() { Text = "Hello" };
panel1.Controls.Add(literal1);
ph.Controls.Add(panel1); 
```

# php - PHP - 使用 cURL 访问受 HTTPS (SSL) 保护的站点

> ID：10395385
> 
> 赞同：2
> 
> 时间：2012-05-01T08:36:27.577
> 
> 标签：php, ssl, curl, https

以下代码返回退出代码 58。

来自 cURL 文档：本地客户端证书的 CURLE_SSL_CERTPROBLEM (58) 问题。

```
// create a new CURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $URL);
curl_setopt($ch, CURLOPT_HEADER, false);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);

curl_setopt($ch, CURLOPT_SSLCERT, getcwd() . $CERT);
curl_setopt($ch, CURLOPT_SSLCERTPASSWD,"XXXXX");

curl_setopt($ch, CURLOPT_SSLVERSION, 3);

curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content Type: text/xml',
    'User-Agent: XXXXX',
    'User-Name: XXXXX'
));

$RESPONSE = curl_exec($ch);  

var_dump($RESPONSE);

// close CURL resource, and free up system resources
curl_close($ch); 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:44:45.237

确保文件`getcwd() . $CERT`存在并且是有效的 PEM 证书。如果看起来没问题，请设置以下选项以将更多 SSL 认证详细信息输出到 STDERR：

```
curl_setopt($ch, CURLOPT_CERTINFO, true); 
```

请注意，此设置仅在`CURLOPT_VERBOSE`您已经设置为 true 时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:44:41.790

> 本地客户端证书问题

嗯有点模糊。似乎意味着 Curl 不喜欢证书，而不是远程系统不喜欢它。是PEM格式吗？证书中的公钥和私钥？网络服务器 uid 可读？

# jquery - jQuery mobile：如何创建自定义页面过渡

> ID：10395391
> 
> 赞同：0
> 
> 时间：2012-05-01T08:37:12.720
> 
> 标签：jquery, html, jquery-mobile

我目前正在使用 jQuery/CSS/HTML 开发一个移动应用程序，我想在单击“返回”按钮时添加自己的页面转换。但是我在网上找不到任何关于如何做到这一点的真正好的教程。我想创建一个自定义颜色“过渡”或引人注目的东西，以便我知道过渡实际上正在工作并且没有调用默认过渡

这是我目前所拥有的，但它不起作用，即使它是我认为它也不够明显：

.js

```
function myTransitionHandler( name, reverse, $to, $from ) {

var deferred = new $.Deferred(),
reverseClass = reverse ? " reverse" : "",
viewportClass = "ui-mobile-viewport-transitioning viewport-" + name,
doneFunc = function() {

    $to.add( $from ).removeClass( "out in reverse " + name );

    if ( $from && $from[ 0 ] !== $to[ 0 ] ) {
        $from.removeClass( $.mobile.activePageClass );
    }

    $to.parent().removeClass( viewportClass );

    deferred.resolve( name, reverse, $to, $from );
};

$to.animationComplete( doneFunc );

$to.parent().addClass( viewportClass );

if ( $from ) {
$from.addClass( name + " out" + reverseClass );
}
$to.addClass( $.mobile.activePageClass + " " + name + " in" + reverseClass );

return deferred.promise();
}

// Make our transition handler public.
$.mobile.transitionHandlers["myTransition"] = myTransitionHandler; 
```

.html 用于返回按钮

```
<a href="#" data-rel="back"  data-role="button" data-inline="true" data-transition="myTransition" data-direction="reverse">Back</a> 
```

我有什么遗漏的吗？如何使过渡更加突出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:03:34.967

好吧，我知道这有点晚了，但我只是想通了这一点，并认为我可能会发布。

问题是这样的：转换的名称“myTransition”作为“name”参数传递给 myTransitionHandler 函数。

由于您在 myTransitionHandler 中实现了所有样板文件（来自 css 转换处理程序），因此“myTransition”需要作为 .myTransition.in 和 .myTransition.out 存在于您的 css 中。

因此，要解决此问题，您需要：

1.  在你的 CSS 中添加 .myTransition.in 和 .myTransition.out 规则。或者
2.  只需在 myTransitionHandler 函数的开头将“name”设置为支持的内容（如“fade”）。

我认为这是你的问题，希望这有助于...

# c++ - catch 块如何捕获对其他范围内的临时变量的引用？

> ID：10395402
> 
> 赞同：2
> 
> 时间：2012-05-01T08:38:41.433
> 
> 标签：c++

你可以试一试。下面的程序编译并运行顺利。`ex`构造函数中变量的地址`e`与 catch 块中的临时变量不同。但是您可能会注意到`ex`B 行中的值是通过`e`引用传递给的。谁能解释发生了什么？

```
#include<cstring>
#include<iostream>

using std::string;
using std::endl;
using std::cout;

class ThrowException;
ThrowException* TE_ptr;

class ThrowException{

    private:
        string msg;
        int b;
    public:
        ThrowException(string m="Unknown exception",int factor=0) throw(string,const char*);
        ~ThrowException(){        cout<<"destructor get called."<<endl;}
        friend std::ostream& operator<<(std::ostream& os,const ThrowException&TE);
};

ThrowException::ThrowException(string m, int f) throw(string,const char*):msg(m),b(f){
    cout<<"msg="<<msg<<'\n'<<"b="<<b<<endl;
    TE_ptr=this;
    if(b==1){
        string ex("b=1 not allowed.");
        cout<<"The address of e in constructor is "<<&ex<<endl;      //A
        throw ex;
    }
}

std::ostream&operator<<(std::ostream&os, const ThrowException &TE){
    os<<TE.msg<<'\n'<<TE.b<<endl;
}
int main(){

    try{
        ThrowException a("There's nothing wrong.", 1);
    }catch(string &e){             //B
        cout<<"The address of e in first catch block is "<<&e<<endl;        //C
        cout<<"The content resided in the momery block pointed to by TE_ptr is "<<*TE_ptr<<endl;
    }

} 
```

另一个我想问的问题是 ThrowException 对象的析构函数什么时候被调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T08:44:33.660

表达式在离开本地范围之前将`throw`抛出的对象复制到安全的地方。该语言并没有确切说明它的存储位置，只是它必须以某种方式工作（细节留给实现）。

# ios5 - UIMenuItem 可以显示 UIImage 吗？

> ID：10395413
> 
> 赞同：1
> 
> 时间：2012-05-01T08:40:14.210
> 
> 标签：ios5, uimenucontroller

我看到这是可能的——iBooks 应用程序做到了。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:31:43.643

我写了一个类别来支持 UIMenuItem 的图像。它基于方法调配，但在大多数情况下应该是安全的。

[https://github.com/cxa/UIMenuItem-CXAImageSupport](https://github.com/cxa/UIMenuItem-CXAImageSupport)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:46:48.393

当前的官方 API 中没有任何内容可以做到这一点。UIMenuItem 只能用 -initWithTitle:action 初始化：

我怀疑 Apple 要么使用私有 API，要么实现了自定义控件。大概是前者。

[以前在这里](https://stackoverflow.com/questions/4414183/can-i-subclass-uimenucontroller-so-that-it-can-take-icons-instead-of-just-text)问过

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-06T15:41:19.493

检查表情符号和符号，也许它适合您的目的。

转到您的 Xcode 菜单 -> 编辑 -> 表情符号和符号。

前任。：

```
let menuItemYes = UIMenuItem(title: "✅", action: "doSomething") 
```

祝你好运！

# java - 如何检查用户的 DB2 SYSADM 或 SYSCTRL 授权

> ID：10395416
> 
> 赞同：0
> 
> 时间：2012-05-01T08:40:24.693
> 
> 标签：java, db2

如何检查用户的 DB2 SYSADM 或 SYSCTRL 授权。

我需要通过 DB2 权限来验证用户/密码来创建/删除数据库。有什么具体的命令吗？

我需要使用一个命令验证用户/密码，该命令告诉用户是否有权创建和删除数据库（意味着在触发数据库创建命令之前尝试验证）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:05:45.990

```
db2 connect
db2 get authorizations 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:58:06.800

这就是我在 unix shell 中的做法，适应 java 等价物应该不难；

```
createdb=$(db2 get authorizations|egrep 'SYSADM|SYSCTRL' | grep -c ' = YES')
if [[ $createdb ]]; then
   echo 'Do it'
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:46:00.360

试试这个; 这暗示 ID 在下面查询中引用的视图上具有 SELECT ；

```
select 1 from 
sysibmadm.dbmcfg t1 join 
sysibmadm.authorizationids t2 on t1.value=t2.authid 
where t1.name='sysadm_group' fetch first row only
with ur 
```

上述查询中的 SQL0551 也表明连接的用户没有 SYSADM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-26T09:42:12.537

`"GET AUTHORIZATIONS"`命令在版本 9.7 中停止。 `"AUTH_LIST_AUTHORITIES_FOR_AUTHID"`应该使用表函数。

```
db2 connect 
db2 SELECT VARCHAR(AUTHORITY, 30) AS AUTHORITY,
   D_USER,
   D_GROUP,
   D_PUBLIC,
   ROLE_USER,
   ROLE_GROUP,
   ROLE_PUBLIC,
   D_ROLE
  FROM TABLE(SYSPROC.AUTH_LIST_AUTHORITIES_FOR_AUTHID('ALICE', 'U'))
 WHERE AUTHORITY = 'SYSADM' OR AUTHORITY = 'DBADM' 
```

链接：[GET AUTHORIZATIONS 命令已停止](https://www.ibm.com/support/knowledgecenter/en/SSEPGG_9.7.0/com.ibm.db2.luw.wn.doc/doc/i0054248.html)

# c# - 打印 RadGrid

> ID：10395420
> 
> 赞同：1
> 
> 时间：2012-05-01T08:40:47.243
> 
> 标签：c#, asp.net, pdf, printing, telerik

我有一个带有 PDF 导出功能的分页 RadGrid（默认情况下在 RadGrid 中）。现在我也想要一个打印功能。默认情况下，RadGrid 中不提供打印功能。是否可以打印分页的 RadGrid，或者立即打印生成的 pdf（我不知道如何访问生成的 pdf）。

先感谢您！

亲切的问候，韦斯利·拉利厄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:21:31.170

我附上了一个演示，展示了如何打印导出的 PDF 文件。我不喜欢这种方法，但它可能适合你:)

[http://www.2shared.com/file/y8aLzCmg/Print_Exported_Pdf_File.html](http://www.2shared.com/file/y8aLzCmg/Print_Exported_Pdf_File.html)

祝你好运，丹尼尔

# mysql - MySQL存储过程有问题

> ID：10395425
> 
> 赞同：0
> 
> 时间：2012-05-01T08:42:06.533
> 
> 标签：mysql, stored-procedures

在下面的过程中，我有两个参数 - 当我运行时应该填充两个参数。我希望这些参数是可选的，如果我填充第一个数据应该基于一个参数过滤如果我填充第二个参数并保留为空第一个数据应该基于第二个参数过滤如果我传递了两个参数它应该基于过滤如果我没有传递参数，则这两个参数都不应该被过滤。

```
DROP PROCEDURE IF EXISTS medatabase.SP_rptProvince2;
CREATE PROCEDURE medatabase.`SP_rptProvince2`(
IN e_Region VARCHAR(500),
IN e_Province VARCHAR(500)
)
BEGIN

  DECLARE strQuery VARCHAR(1024);
  DECLARE stmtp   VARCHAR(1024);

    SET @strQuery = CONCAT('SELECT * FROM alldata where 1=1 ');
   -- IF e_region IS NOT NULL THEN

    -- SET @strQuery = CONCAT(@strQuery, 'AND regionName'=e_Region);
   -- END IF;

    IF e_Region IS NOT NULL THEN
        SET @strQuery = CONCAT(@strQuery, ' AND regionName = "',e_Region,'"');

    IF e_Province IS NOT NULL THEN
        SET @strQuery = CONCAT(@strQuery, ' AND provinceName = "',e_Province,'"');

   END IF;
   END IF;

  PREPARE  stmtp FROM  @strQuery;
  EXECUTE  stmtp;
 End; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:43:17.793

MySQL 过程不支持可选参数。你必须做你目前正在做的事情（传入和测试`NULL`）。

# error-handling - 当没有行号时，Erl 会返回什么？

> ID：10395426
> 
> 赞同：2
> 
> 时间：2012-05-01T08:42:10.517
> 
> 标签：error-handling, vb6, line-numbers

如果模块没有行号，那么`Erl`当捕获到错误时，该语句将返回什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T08:54:02.587

`Erl`将在没有行号的方法中返回 0。如果某些行有数字，`Erl`则将返回最后执行的有数字的行的编号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T08:55:48.460

从内存中，`Erl`保存遇到的最后一个行号（如果没有遇到，则为零），所以这将是我的猜测。`exit something`对于某些操作，例如和 ，它也会重置为零`resume something`。

但可以肯定的是，这很容易用一段代码（未经测试）来检查：

```
42: x = 0
    on error goto err_bit
    y = 31415 / x
    exit
err_bit:
    msgbox (erl) 
```

并使用行号尝试不同的场景。

# iphone - 写入文件时出现 ImageIO 错误

> ID：10395427
> 
> 赞同：0
> 
> 时间：2012-05-01T08:42:11.940
> 
> 标签：iphone, uiimage, nsdata, javax.imageio, writetofile

我正在尝试保存 UIImage，但它给了我一个错误。UIImage 是从 UIImagePickerController 中挑选出来的，然后通过`NSData`生成它并调用`writeToFile:`这个`NSData`对象来保存。这样做时，我会得到一个错误。同样的方法可以完美地存储其他图像。我可以毫无问题地存储的图像从网站检索为字节数组，然后转换为 UIImage，然后保存。似乎该问题特定于来自`UIImagePickerController`.

谁能告诉我如何解决这个问题？

似乎`UIImagePickerController`保存的图像很好，但我仍然收到导致应用程序崩溃的错误：

> 5 月 1 日 10:38:05 Simon-BS-iPhone Diims[619]：ImageIO：JPEG Corrupt JPEG 数据：数据段过早结束

这是用于保存图像的代码：

```
+ (void)storeImage:(UIImage *)image name:(NSString *)name
{
    NSString *pathForCache = [self pathForCache];
    NSData *imageData = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0f)];
    NSString *jpegPath = [pathForCache stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.jpeg", name]];

    NSError *error;
    if ([imageData writeToFile:jpegPath options:NSDataWritingAtomic error:&error] == NO)
    {
        DLog(@"Could not save image: %@", jpegPath);
        DLog(@"%@", error);
    }
} 
```

选择图像时这样调用：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    // Close controller
    [picker dismissModalViewControllerAnimated:YES];

    // Save image
    self.selectedDevice.image = image;
    [CDeviceManager localUpdateDevice:self.selectedDevice delegate:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:35:41.987

如果可行，请尝试按如下方式更改代码：-

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
 {
       // Save image self.selectedDevice.image = image;
       [CDeviceManager localUpdateDevice:self.selectedDevice delegate:self];

       // Close controller [picker dismissModalViewControllerAnimated:YES];
       //dismiss after saving the image
  } 
```

# c - Vala 和 Genie 的生产准备好了吗？

> ID：10395430
> 
> 赞同：9
> 
> 时间：2012-05-01T08:42:58.373
> 
> 标签：c, vala, gobject, genie

我正在使用一些遗留的 C 代码，我需要对其进行重构和清理，以删除意大利面条式编程，遵守 DRY 原则等。

我正在考虑使用 C++ 重写，但我不想走那么远，并且希望尽可能地接近 C（同时使用一些 OOP 概念 [无需手动编写代码]）。

我最近遇到了 GObject、Vala 和 Genie。后两个是相当新的。有没有人知道 Vala 或 Genie 被用于生产代码？

最后但并非最不重要的一点 - 是否有两种语言之间的优缺点比较列表。我有点倾向于 Genie，因​​为我喜欢 Python 并且不太热衷于 C#，但是 Genie（显然？）坚持使用选项卡在实践中可能有点烦人 - 我会对两种语言（假设其中一种或两种都可以用于生产）。

顺便说一句，我正在 Linux 上开发，所以就我而言，任何与 Windows 相关的问题都无关紧要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T09:10:55.473

[Unity](https://launchpad.net/unity)是所有最新版本的 Ubuntu 使用的用户界面，使用 Vala。

[这是](http://live.gnome.org/Vala/Documentation#Projects_Developed_in_Vala)使用 Vala 开发的应用程序列表。其中一些是一些主要 GNU/Linux 发行版的默认 GUI 安装的一部分。

至于 Genie：它是 Vala 编译器可以理解的另一种语言（具有类似 Python 的语法）。所以这真的只是你喜欢哪种语法的问题（在我看来）。这是 Genie 语言指南的引述，似乎是在说同样的事情：

> Genie 在功能上与 Vala 非常相似，但语法不同，允许开发人员使用更简洁和更少的代码来完成相同的任务。
> 
> 和 Vala 一样，Genie 也有同样的优势：
> 
> *   用 Genie 编写的程序应该具有与直接用 Vala 和 C 编写的程序相似的性能和资源使用情况
> *   Genie 没有许多其他使用 VM 的高级语言（例如 Python、Mono、Java）所带来的臃肿和开销
> *   Genie 中的类实际上是 GObjects，因此 Genie 可用于创建平台代码，如小部件和库，其中 GObjects 需要绑定到其他语言

如果你不喜欢`TAB`字符，你可以使用空格来代替：

```
[indent=2] //two space indent instead of TAB
init
  print "Hello World" 
```

# xcode - XCode 4.3 故事板：为什么有些 UIViewController 的大小为 1024 而其他的为 320

> ID：10395435
> 
> 赞同：0
> 
> 时间：2012-05-01T08:43:52.257
> 
> 标签：xcode, uitableview, xcode-storyboard

我刚刚开始在 XCode 4.3 中使用故事板，在设计一个应用程序时，我想创建一个像故事板这样的主从控制器，我在场景中有以下对象结构......

*   UIViewController
    *   UIView（容器）
    *   UITableView（主导航菜单）
    *   UIView（搜索字段）
        *   UIImageView
        *   UITextField

现在在这个`container`UIView 缩放以填充整个 UIViewController 并具有默认的宽度/高度 1024 x 748。在画布上拖放 UITableViewController，它也具有默认的 1024 x 748 大小。但是在拖放 UISplitViewController 时，UITableViewController 的宽度为 320。那是怎么发生的？如何将我的 UIView 更改为不调整大小以填充 UIViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:08:31.383

拆分视图的主细节控制器具有固定宽度 (320)。细节视图要么是全纵向宽度，要么是横向宽度（全宽减去细节宽度）（如果是横向）。

# java - 接口由数千个类实现，所以如果接口发生变化，那么如何减少它

> ID：10395436
> 
> 赞同：3
> 
> 时间：2012-05-01T08:44:00.380
> 
> 标签：java, interface

有一个场景，我有接口 X，它已经用我的数千个类实现了。现在我想在那个接口 X 中添加新方法。那么如何以最小的方式进行更改以解决我所有类中方法被覆盖的问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T08:48:44.980

如果方法实现对所有类都是通用的，那么*也许*an`abstract class`更好`interface`。

如果不是 - 无论如何你都要编写这些方法。

* * *

(*)最初是评论，但我被要求将其作为答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:50:12.923

1.  如果您的新方法对该接口的所有实现都没有意义，请不要在其中添加它 - 创建一个扩展原始接口的新接口
2.  如果您的所有数千个类都应该有一个默认实现 - 将您的接口更改为抽象类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:02:29.780

如果您不介意在所有类中无操作实现此方法并且可以控制所有实现类，那么这是一种非常简单的方法，可以通过 IntelliJ 分 3 步执行此操作，而无需访问每个类：

1.  将您的方法添加到接口
2.  选择一个方法并调用 Refactor->Push Down... - 您的方法声明将出现在所有实现此接口的类中，但至少在我的 IntelliJ IDEA 版本（11.0.2）中它们将没有实现，例如`void doSomething();`，所以选择这个定义并做一个完整的项目查找和替换来用你的默认实现替换这个字符串，例如，

    @Override void doSomething() {}

3.  再次将您的方法添加到接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:14:42.183

除了其他建议（make it`abstract`或`extend`the `interface`）之外，还有另一种选择：

使接口的所有实现者扩展一个基类。这样，当您向 中添加方法时，`interface`您只需向基类添加默认行为并将特定于类的行为（希望）添加到少数实现者。

# c# - 通过 BackgroundWorker 组件从 Web 下载许多页面

> ID：10395437
> 
> 赞同：0
> 
> 时间：2012-05-01T08:44:00.460
> 
> 标签：c#, asynchronous, download, backgroundworker

我有很多网址（大约 800 个）要从网上下载。我有一个类：HttpDownloader.cs，它与 HttpWebRequest 类一起使用来下载和获取 html 页面。之后，我通过正则表达式对页面进行解析。

我想使用 BackgroundWorker 组件，但我不知道如何为**所有**页面执行它。通过一个循环，或类似的东西。

我的代码：

我尝试与 ThreadPool 一起使用，它确实有问题。我尝试了 4 个网址，但没有成功。

```
 foreach (string link in MyListOfUrls)
      {
 ThreadPool.QueueUserWorkItem((o) => {

           HttpDownloader httpDownload = new HttpDownloader(link);
           string htmlDoc = httpDownload.GetPage();//get the html of the page 
           HtmlDocument doc=doc.LoadHtml(htmlDoc);//load html string to doc for pharsing
           DoPharsing();//my func for pharsing
           Save();//save into dataBase
  });
      } 
```

因为我在 func 中使用与数据库和 DataTable 的连接，所以在使用 ThreadPool 时出现异常：

> “函数评估已禁用，因为之前的函数评估超时。您必须继续执行才能重新启用函数评估。”

所以，我无法从 DataTable 中获取数据。也许我需要全部下载，然后进行解析并保存？

如何通过 BackgroundWorker 组件将其更改为异步？

ps 不要建议我使用 Async Tpc，因为我没有设法下载它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:58:03.967

这取决于您要拆分的内容、整个循环，或者只是循环的下载部分。显然，如果您希望整个循环在后台运行，那么最简单的方法就是使用 ThreadPool。

请注意，您可能必须更改解析和保存函数，以便将 HTML 文档传递给每个函数。

```
ThreadPool.QueueUserWorkItem((o) => {
  foreach (string link in MyListOfUrls)
  {
    HttpDownloader httpDownload = new HttpDownloader(link);
    string htmlDoc = httpDownload.GetPage();//get the html of the page
    HtmlDocument doc=doc.LoadHtml(htmlDoc);//load html string to doc for pharsing
    var result = DoPharsing(doc);//my func for pharsing
    Save(result);//save into dataBase
 } 
}); 
```

或者

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (o, e) => { 
  foreach (string link in MyListOfUrls)
  {
    HttpDownloader httpDownload = new HttpDownloader(link);
    string htmlDoc = httpDownload.GetPage();//get the html of the page
    HtmlDocument doc=doc.LoadHtml(htmlDoc);//load html string to doc for pharsing
    var result = DoPharsing(doc);//my func for pharsing
    Save(result);//save into dataBase
 } 
};
worker.RunWorkerCompleted += (o, e) => {
   // Job completed
}
worker.RunWorkerAsync(); 
```

要同时下载多个链接，只需切换您创建线程的位置。：

```
foreach (string link in MyListOfUrls)
{
  ThreadPool.QueueUserWorkItem((o) => {
    HttpDownloader httpDownload = new HttpDownloader(link);
    string htmlDoc = httpDownload.GetPage();//get the html of the page
    HtmlDocument doc=doc.LoadHtml(htmlDoc);//load html string to doc for pharsing
    var result = DoPharsing(doc);//my func for pharsing
    Save(result);//save into dataBase
  });
 } 
```

（我认为这里的线程池比创建数百个后台工作者更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:01:10.337

我最终找到了答案
这是我的代码：

```
static BackgroundWorker[] d=new BackgroundWorker[MyListOfUrls.Length];
  string html=new string[MyListOfUrls.Length]

  static void Main(string[] args)
  {
    for (int i = 0; i < MyListOfUrls.Length; i++)
    {
         d[i]=new BackgroundWorker{WorkerReportsProgress=true};
         d[i].DoWork += new DoWorkEventHandler(worker2_DoWork);
         d[i].ProgressChanged += new ProgressChangedEventHandler(Program_ProgressChanged);
         d[i].RunWorkerAsync(i);
         d[i].RunWorkerCompleted += new RunWorkerCompletedEventHandler(RunWorkerCompleted);
         Thread.Sleep(1000);
    }
  }  

  static void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
  {
      Console.WriteLine("End");
  }

  static void Program_ProgressChanged(object sender, ProgressChangedEventArgs e)
  {
      Console.WriteLine(e.ProgressPercentage.ToString());
  }

  static void worker2_DoWork(object sender, DoWorkEventArgs e)
  {
      var worker = (BackgroundWorker)sender;
      worker.ReportProgress((int)e.Argument);

      HttpDownloader httpDownload = new HttpDownloader(link);
      html[(int)e.Argument] = httpDownload.GetPage();

      Thread.Sleep(500);
  } 
```

如果有人知道如何做得更好，我会很高兴。塔克斯，查尼

# objective-c - NSObject 子类作为属性

> ID：10395438
> 
> 赞同：0
> 
> 时间：2012-05-01T08:44:02.110
> 
> 标签：objective-c, ios

我想在我的项目中使用我的类作为属性。这个想法是我有一个包含所有列表元素的类。我在图中显示的基本思想：![在此处输入图像描述](../Images/83213a96b5b455191c2c37b04b4e5ff1.png) 所以我有一个 myContainerClass 对象，我想在其他一些类中做：@property (strong,nonatomic) MyContainerClass *obj; 在这里我有错误！我发现我只能将 Foundations 类型用作@property。但为什么？这样做（传递对象）的替代品是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:54:32.033

不，你可以使用任何你喜欢的类作为属性

```
@property (nonatomic, strong) MyContainerClass* obj; 
```

只要编译器知道这`MyContainerClass`是一个类，它是完全合法的。要在头文件中做到这一点，最好的方法是使用`@class`前向声明：

```
@class MyContainerClass;

@interface SomeOtherClass : NSObject

// method an property declarations

@property (nonatomic, strong) MyContainerClass* obj;

@end 
```

然后在实现中包含头文件：

```
#import "MyContainerClass.h"

@implementation SomeOtherClass

@synthesize obj;

// other stuff

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:52:32.917

你得到什么错误？可能是您没有将 MyContainerClass 导入到您想要使用它的位置。

```
#import "MyContainerClass.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:49:10.523

为要添加属性的对象声明一个类别：

```
@interface NSObject (MyContainerClassAdditions)

@property (nonatomic, strong) MyContainerClass *myContainerClass

@end 
```

然后使用objective c关联对象技巧实现setter和getter方法：

```
#import <objc/runtime.h>

@implementation NSObject (MyContainerClassAdditions)

- (void)setMyContainerClass:(MyContainerClass *)myContainerClass {
    objc_setAssociatedObject(self, "myContainerClass", myContainerClass, OBJC_ASSOCIATION_ASSIGN);
}

- (MyContainerClass *)myContainerClass {
    return objc_getAssociatedObject(self, "myContainerClass");
}

@end 
```

# mysql - MySQL按天计数和分组

> ID：10395444
> 
> 赞同：9
> 
> 时间：2012-05-01T08:44:52.397
> 
> 标签：mysql, sql

我有以下结构

```
ID    DATE(DATETIME)         TID
1     2012-04-01 23:23:23    8882 
```

我正在尝试计算行数并按每月匹配 TID = 8882 的每一天对它们进行分组

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T08:48:34.843

您可以使用[DAY](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_day)功能进行分组：

```
SELECT DAY(Date), COUNT(*)
FROM table
WHERE TID = 8882
GROUP BY DAY(Date) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T08:49:20.053

不确定您所说的月份中的某天是什么意思——您想将 2 月 1 日与 3 月 1 日归为一组吗？或者你只是说约会？假设后者，这个怎么样：

```
SELECT DATE(date) as d,count(ID) from TABLENAME where TID=8882 GROUP by d; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-28T11:02:00.763

试试这个查询：

```
SELECT COUNT(id), DAY(dat), MONTH(dat), YEAR(dat) 
FROM table
WHERE TID=8882
GROUP BY YEAR(dat), MONTH(dat), DAY(dat); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-01T08:49:04.967

尝试这个：

```
SELECT DAY(date) AS `DAY`,  COUNT(1) AS `COUNT` FROM
table1 
    WHERE TID = 8882
GROUP BY DAY(date) 
```

[MySQL Query GROUP BY 日/月/年](https://stackoverflow.com/questions/508791/mysql-query-group-by-day-month-year)怎么样

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-16T09:12:43.437

计算每个日期：

```
SELECT date(created_at), COUNT(*)
FROM message_requests
GROUP BY date(created_at) 
```

# android - 无法使用 Titanium android 模拟器查看我的演示应用程序

> ID：10395450
> 
> 赞同：0
> 
> 时间：2012-05-01T08:45:43.643
> 
> 标签：android, titanium, appcelerator, appcelerator-mobile

我尝试使用钛模拟器运行一个简单的演示钛应用程序（如教程中所述：[披萨应用程序](http://mobile.tutsplus.com/tutorials/appcelerator/titanium-mobile-build-a-pizza-ordering-app/)），但我能看到的只是 android 默认屏幕：

[安卓首页 http://img545.imageshack.us/img545/7084/titaniumbug.png](http://img545.imageshack.us/img545/7084/titaniumbug.png)

如何查看我的申请？

ps 我在控制台中没有看到任何“红色错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:49:15.167

Titanium Studio 安装后不会运行该应用程序。它在安装结束时说。

> [信息] 应用程序已安装。从主屏幕上的抽屉启动

如果您按桌面上的中间按钮然后查找您的应用程序并运行它，您可以看到该应用程序

# java - 用 OO 协调纪元时间 - 有可能吗？

> ID：10395451
> 
> 赞同：-1
> 
> 时间：2012-05-01T08:45:54.110
> 
> 标签：java, oop, frameworks

我刚刚阅读了[http://wiki.jvmlangsummit.com/images/a/ab/HickeyJVMSummit2009.pdf](http://wiki.jvmlangsummit.com/images/a/ab/HickeyJVMSummit2009.pdf) 协调时代与 OO 是什么意思？

更新：我不明白 pdf 的内容所以我的问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:54:45.740

他的意思是我们可以在面向对象编程中引入纪元时间（可以保证事件的顺序）吗？

我会以 Disruptor 为例来说明如何有效地做到这一点，并以 STM 为例说明如何低效地做到这一点。;)

公平地说，它大约三岁，那时我不知道该说什么。他对这个问题提出质疑并提出如何解决这个问题是正确的。我想说现在对这个问题和可能的解决方案有了更广泛的理解。

# php - 在 PayPal 对话框中，是否可以指定是否展开“拥有 PayPal 帐户”或“没有 PayPal 帐户”？

> ID：10395452
> 
> 赞同：0
> 
> 时间：2012-05-01T08:46:03.783
> 
> 标签：php, html, paypal

例如，在 PayPal 的 Web Payments Standard 中，当您单击按钮时，`Buy Now`将显示 PayPal 对话框，其中包含两个选项：

*   `Have a PayPal Account?`
*   `Don't have a PayPal Account?`

有没有办法指定默认情况下“显示”（扩展）其中一个？

**编辑：**

这是目前我的表格：

```
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="hosted_button_id" value="{SOMECODEHERE}">
        <input type="hidden" name="LANDINGPAGE" value="Billing">
        <table>
        <tr><td><input type="hidden" name="on0" value="Distance">Distance</td></tr><tr><td><select name="os0">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select> </td>
        </table>
        <input type="hidden" name="currency_code" value="PHP">
        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" name="submit">
        <img src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif">
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:52:42.443

你可以，但是我只有在使用 PayPal Express Checkout 时才会遇到这种情况。这里指的是 `LANDINGPAGE`SetExpressCheckout**方法**中的 API 参数：

> （可选）要显示的 PayPal 页面类型。它是以下值之一：
> 
> *   计费 - 非 PayPal 帐户
> *   登录 - 贝宝账户登录

[参考 API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:38:15.883

我不相信您可以为用户扩展该部分。但是，您可以在表单中添加一个电子邮件字段，将其发送到 PayPal，然后将其输入到他们的登录字段中。

```
<input type="hidden" name="email" value="user@example.com"> 
```

# git - 在提交消息中显示差异

> ID：10395457
> 
> 赞同：3
> 
> 时间：2012-05-01T08:47:11.513
> 
> 标签：git

当使用`commit -a`默认编辑器提交时，会弹出`git status`命令的内容（但所有行都以井号开头）。

是否可以`git diff`预填充编辑器的输出而不是内容`git status`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:59:27.080

是的，这可以通过使用`--verbose`旗帜来实现；您的完整命令将变为 then`git commit -a --verbose`或者更简洁的`git commit -av`.

# android - 如何从字符串中搜索字符android

> ID：10395458
> 
> 赞同：0
> 
> 时间：2012-05-01T08:47:21.030
> 
> 标签：android

我的屏幕上有 3 个小部件，文本视图、编辑文本和一个按钮。无论我在编辑文本中插入什么，当我单击按钮时，文本视图都会从编辑文本中获取字符串。现在，我想做的是，如果我已经插入了字符“\”或“，”或者我想要的任何字符，它就不会再输入了。就像，您只能将该字符放在编辑文本中一次。你们有什么想法吗？

那么我在想的是，我必须从编辑视图中搜索然后验证它。但我不知道使用什么代码。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:53:51.590

在 EditText 上使用 Android TextWatcher。

有代表返回输入的字符序列

onTextChanged

afterTextChanged

beforeTextChanged

每次将输入的字符填入set。如果大小没有增加，则意味着重复。然后避免在edittext中添加该字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:57:55.213

我认为您需要将 TextChangedListener 添加到您的editText。

```
et.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    }); 
```

# sql - 将结果与今天的日期进行比较？

> ID：10395459
> 
> 赞同：78
> 
> 时间：2012-05-01T08:47:26.387
> 
> 标签：sql, sql-server, current-time

有没有办法使用`Now()`SQL 中的函数来选择今天日期的值？

我的印象`Now()`是包含时间和日期，但是今天的日期会将时间设置为`00:00:00`，因此这永远不会匹配？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-01T08:50:42.120

好的，让我们正确地做到这一点。选择与今天匹配的日期，如果可用，使用索引，并存在所有不同的日期/时间类型。

这里的原理在每种情况下都是相同的。我们抓取日期列在最近午夜或之后的行（今天的日期时间为 00:00:00），并且在下一个午夜之前（明天的日期时间为 00:00:00，但不包括具有该确切值的任何内容）。

对于纯日期类型，我们可以和今天的日期做一个简单的比较。

为了使事情保持良好和快速，我们明确避免对存储在数据库中的日期进行任何操作（`where`以下所有示例中的子句的 LHS）。这可能会触发全表扫描，因为必须为每次比较计算日期。（此行为似乎因 DBMS、YMMV 而异）。

**MS SQL Server：（** SQL [Fiddle](http://sqlfiddle.com/#!18/6779a/1) | [db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=1063cde55e570917c4caf919c0c012b4)）

首先，使用 DATE

```
select * from dates 
where dte = CAST(CURRENT_TIMESTAMP AS DATE)
; 
```

现在有了日期时间：

```
select * from datetimes 
where dtm >= CAST(CURRENT_TIMESTAMP AS DATE)
and dtm < DATEADD(DD, 1, CAST(CURRENT_TIMESTAMP AS DATE))
; 
```

最后是 DATETIME2：

```
select * from datetimes2
where dtm2 >= CAST(CURRENT_TIMESTAMP AS DATE)
and dtm2 < DATEADD(DD, 1, CAST(CURRENT_TIMESTAMP AS DATE))
; 
```

* * *

**MySQL：（** SQL[小提琴](http://sqlfiddle.com/#!9/8ace3/1)| [db<>fiddle](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=6040507843a3cddfa7ff2b8ac609d712)）

使用日期：

```
select * from dates 
where dte = cast(now() as date)
; 
```

使用日期时间：

```
select * from datetimes 
where dtm >= cast((now()) as date)
and dtm < cast((now() + interval 1 day) as date)
; 
```

* * *

**PostgreSQL：（** SQL[小提琴](http://sqlfiddle.com/#!17/acaeb/1)| [db<>fiddle](https://dbfiddle.uk/?rdbms=postgres_10&fiddle=4ce2d4df50867d7a1b8266ea15e71f30)）

使用日期：

```
select * from dates 
where dte = current_date
; 
```

使用没有时区的 TIMESTAMP：

```
select * from timestamps
where ts >= 'today'
and ts < 'tomorrow'
; 
```

* * *

**甲骨文：**（[SQL小提琴](http://sqlfiddle.com/#!4/40d6d/4)）

使用日期：

```
select to_char(dte, 'YYYY-MM-DD HH24:MI:SS') dte
from dates 
where dte >= trunc(current_date)
and dte < trunc(current_date) + 1
; 
```

使用时间戳：

```
select to_char(ts, 'YYYY-MM-DD HH24:MI:SS') ts
from timestamps
where ts >= trunc(current_date)
and ts < trunc(current_date) + 1
; 
```

* * *

**SQLite：**（[SQL小提琴](http://sqlfiddle.com/#!5/7a2a5/6)）

使用日期字符串：

```
select * from dates 
where dte = (select date('now'))
; 
```

使用日期和时间字符串：

```
select dtm from datetimes
where dtm >= datetime(date('now'))
and dtm < datetime(date('now', '+1 day'))
; 
```

使用 unix 时间戳：

```
select datetime(dtm, 'unixepoch', 'localtime') from datetimes
where dtm >= strftime('%s', date('now'))
and dtm < strftime('%s', date('now', '+1 day'))
; 
```

* * *

*[SQL Fiddle 代码的备份](https://gist.github.com/dwurf/8929425)*

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-05-01T09:16:13.140

SQL Server 中没有本机 Now() 函数，因此您应该使用：

```
select GETDATE() --2012-05-01 10:14:13.403 
```

您可以通过以下方式分别获得日、月和年：

```
select DAY(getdate())  --1
select month(getdate())  --5
select year(getdate()) --2012 
```

如果您在 sql server 2008 上，则 DATE 日期时间只有日期部分，而不是时间：

```
select cast (GETDATE() as DATE) --2012-05-01 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-01T08:52:00.053

只需将日期的时间元素归零即可。例如

```
SELECT DATEADD(dd, DATEDIFF(dd, 0, getdate()), 0) 
```

我使用了 GetDate，因为这是一个 MSSQL 函数，正如您所标记的那样，但`Now()`可能是 MySQL 或者您正在使用 ODBC 函数调用，如果您只是将一个替换为另一个，仍然应该可以工作。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-01T08:55:59.053

不知道你在问什么！

然而

```
SELECT  GETDATE() 
```

将为您提供当前日期和时间

```
SELECT  DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

将为您提供时间设置为 00:00:00 的日期

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-01T08:51:00.450

不确定您到底要做什么，但听起来就像`GETDATE()`您所追求的。`GETDATE()`返回日期时间，但如果您对时间组件不感兴趣，则可以转换为日期。

```
SELECT  GETDATE()
SELECT  CAST(GETDATE() AS DATE) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-01T09:11:14.693

在前面的答案的基础上，请注意重要的一点，您还需要**操作表列**以确保它不包含 datetime 数据类型的时间片段。

下面是一个演示上述内容的小示例脚本：

```
select getdate()
--2012-05-01 12:06:51.413
select cast(getdate() as date)
--2012-05-01

--we're using sysobjects for the example
create table test (id int)
select * from sysobjects where cast(crdate as date) = cast(getdate() as date)
--resultset contains only objects created today
drop table test 
```

我希望这有帮助。

**编辑：**
在@dwurf 评论（感谢）关于上述示例可能对性能产生的影响之后，我想建议以下内容。我们在今天午夜（一天的开始）和一天的最后一毫秒（SQL 服务器计数高达 0.997，这就是我减少 3 毫秒的原因）之间创建一个日期范围。通过这种方式，我们避免了操纵左侧并避免了性能影响。

```
select getdate()
--2012-05-01 12:06:51.413
select dateadd(millisecond, -3, cast(cast(getdate()+1 as date) as datetime))
--2012-05-01 23:59:59.997
select cast(getdate() as date)
--2012-05-01

create table test (id int)
select * from sysobjects where crdate between cast(getdate() as date) and dateadd(millisecond, -3, cast(cast(getdate()+1 as date) as datetime))
--resultset contains only objects created today
drop table test 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-01T09:12:45.167

如果您有一张只存储日期（没有时间）的表格，并且想在“现在”之前得到这些，那么您可以这样做：

```
SELECT * FROM tbl WHERE DATEDIFF(d, yourdate, GETDATE())=0 
```

这导致日差为 0 的行（所以今天）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-22T07:34:13.950

你可以试试这个sql代码；

```
 SELECT [column_1], [column_1], ...    
    FROM (your_table)
     where date_format(record_date, '%e%c%Y') = date_format(now(), '%e%c%Y') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-10T04:51:54.657

你可以试试：

```
WHERE created_date BETWEEN CURRENT_TIMESTAMP-180 AND CURRENT_TIMESTAMP 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-21T13:16:35.587

这对我有用：

```
SELECT * FROM table where date(column_date) = curdate() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-13T13:31:38.707

对我来说，如果我想与 DrawDate 进行比较，那么正在运行的查询是：

```
CAST(DrawDate AS DATE) = CAST (GETDATE() as DATE) 
```

这是将结果与今天的日期进行比较。

或整个查询：

```
SELECT TOP (1000) *
FROM test
where DrawName != 'NULL' and CAST(DrawDate AS DATE) = CAST (GETDATE() as DATE)
order by id desc 
```

# authentication - 使用 Selenium 处理浏览器身份验证

> ID：10395462
> 
> 赞同：19
> 
> 时间：2012-05-01T08:47:42.550
> 
> 标签：authentication, selenium, browser, automation

有谁知道在自动化过程中使用 Selenium 或任何其他工具处理浏览器身份验证？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-01T11:29:40.363

## 2015年编辑：

这个答案已经过时了。WebDriver 现在支持身份验证！请参阅[如何使用 Java 使用 Selenium WebDriver 处理身份验证弹出窗口](https://stackoverflow.com/questions/24304752/how-to-handle-authentication-popup-with-selenium-webdriver)

* * *

## 原答案：

Selenium 不能很好地处理这个问题。

* * *

您可以尝试使用`http://username:password@example.com/yourpage`

而不仅仅是`http://example.com/yourpage`

但是，据我所知，Firefox 仍然会弹出一个浏览器对话框请求确认。

* * *

如果您使用 Java（或任何类似的工具，如[AutoIt](http://www.autoitscript.com/site/)），您可以尝试使用[Robot 。](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)

* * *

[`driver.manage().addCookie()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Options.html#addCookie%28org.openqa.selenium.Cookie%29)如果您使用的是 WebDriver，则可以使用。

* * *

或者已经通过一次认证的自定义[FirefoxProfile 。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/firefox/FirefoxDriver.html#FirefoxDriver%28org.openqa.selenium.firefox.FirefoxProfile%29)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-29T03:25:49.800

我花了几天的时间 - 从字面上看。试图在我的公司网络中通过浏览器级别的身份验证来访问应用程序。解决方案是在 URL 中使用 'unsername:password@' 组件，**但在登录 URL 的末尾添加正斜杠**。

所以总的登录 URL 看起来像这样（注意*yourpage*之后的“/” ）：

*[http://username:password@example.com/yourpage/](http://username:password@example.com/yourpage/)*

与 Watir、Capybara 和 Selenium Webdriver 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-18T14:46:22.780

通过 auto-it、sikuli 等进行的所有黑客攻击只是在浪费您的时间，因为您将在 CI 解决方案中运行它，使用多种浏览器类型/操作系统/版本/分辨率等。

正确执行此操作的方法是识别身份验证实际方法并使用 Rest 协议执行登录。

我用它来获取 JSESIONID cookie 并将其插入到 selenium 驱动程序中。提示：首先转到 domian 的非退出 url，然后设置 cookie，然后转到所需的 url - 您已登录。

使用：rest客户端认证获取JSESSION ID

并有了这些信息：

```
browser().navigate(foo.getUrl()+"non-exiting-url");

//the information got from the rest client login:
Cookie cookie = new Cookie(name, value, domain, path, expiry, isSecure, isHttpOnly);

try {
    driver.manage().addCookie(cookie);
} catch (Exception e) {
    System.out.println(e.toString());
}

browser().navigate(foo.getUrl()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T12:54:48.347

我在网上阅读的所有内容都对我没有帮助。所以在提出请求之前，像这样：

```
driver.get(url); 
```

你必须像这样运行一个新线程：

```
RunScript runScript = new RunScript();
runScript.start(); 
```

在这种情况下，您可以在以下课程的另一个线程上自由输入登录名和密码

```
public class RunScript extends Thread {

@Override
public void run() {
    try {
        File file = new File("D:\\jacob-1.18-x86.dll");
        System.setProperty(LibraryLoader.JACOB_DLL_PATH, file.getAbsolutePath());
        AutoItX autoIt = new AutoItX();
        Thread.sleep(2000);
        autoIt.winActivate("yourWindowName", "");
        autoIt.winWaitActive("yourWindowName");
        if (autoIt.winExists("yourWindowName")) {
            autoIt.send("username{TAB}", false);
            autoIt.send("password{Enter}", false);
            }
        }
    } catch (InterruptedException ex) {
        //
    }
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T09:58:42.723

你可以使用自动 IT 脚本来处理这个问题

```
WinWaitActive("[CLASS:Chrome_WidgetWin_1]", "", time)
Send("user")
Send("{TAB}")
Send("pass")
Send("{ENTER}") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-31T11:08:12.107

使用 Chrome 70 和其他版本：

```
http://username:password@example.com/yourpage 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-23T12:20:18.480

您可以使用 Firefox 将 Java Robot 类与 Selenium 2 /Selenium WebDriver 一起使用

```
WebDriver driver = new FirefoxDriver();
    driver.get("http://localhost:9990");

    WebElement myDynamicElement = driver.findElement(By.id("app"));

    Alert alert = driver.switchTo().alert();

    try {
        Robot robot = new Robot();
        alert.sendKeys("username");

        robot.keyPress(KeyEvent.VK_TAB);//go to password feild

        robot.keyPress(KeyEvent.VK_P);
        robot.keyPress(KeyEvent.VK_A);
        robot.keyPress(KeyEvent.VK_S);
        robot.keyPress(KeyEvent.VK_S);

        robot.keyPress(KeyEvent.VK_ENTER);

        } catch (AWTException e) {
        e.printStackTrace();
        }

    } 
```

将 Selenium 与机器人一起使用
[http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Robot.html)

# php - Symfony 2/Propel：找不到“Phing”类，自动加载？

> ID：10395464
> 
> 赞同：1
> 
> 时间：2012-05-01T08:47:58.477
> 
> 标签：php, symfony, propel, autoload, fatal-error

我有一个奇怪的推进问题。我的配置`config.yml`：

```
propel:

    dbal:
        driver:     %database_driver%
        user:       %database_user%
        password:   %database_password%
        dsn:        %database_driver%:host=%database_host%;dbname=%database_name%;charset=UTF8
        path:       %kernel.root_dir%/../vendor/propel
        phing_path: %kernel.root_dir%/../vendor/phing 
```

我用那个命令创建了我的数据库：`php app/console propel:database:create`它运行得很好，但是当我尝试创建我的第一个表时，`php app/console propel:model:build`我遇到了一个致命错误：`PHP Fatal error: Class 'Phing' not found.`

我在文件夹中验证，一切都在那里。我想这是一个自动加载问题，但我遵循了[http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html](http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html)和[http://symfony.com/doc/master/book上的文档/propel.html](http://symfony.com/doc/master/book/propel.html)

任何想法？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:32:04.927

您使用哪个依赖项管理系统？

这是一个自动加载问题，您应该添加以下定义：

```
$loader->registerPrefixes(array(
    ...

    'Phing' => __DIR__.'/../path/to/phing/classes/phing',
)); 
```

`path/to/phing`您安装**Phing**的路径在哪里。

# php - 如何将此命令行 curl 转换为 php curl？

> ID：10395466
> 
> 赞同：3
> 
> 时间：2012-05-01T08:48:12.783
> 
> 标签：php, curl, command-line, command

我有一段命令行 curl 代码，我想将其翻译成 php。我正在挣扎。

这是代码行

```
$ curl -H "Authorization: 622cee5f8c99c81e87614e9efc63eddb" https://api.service.com/member 
```

大字符串将是我要传递给它的变量。

这在 PHP 中是什么样子的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:02:22.697

您首先需要分析该行的作用：

```
$ curl -H "Authorization: 622cee5f8c99c81e87614e9efc63eddb" https://api.service.com/member 
```

这并不复杂，您可以在[curl 的手册页](http://curl.haxx.se/docs/manpage.html)上找到所有开关的说明：

> [`-H, --header <header>`](http://curl.haxx.se/docs/manpage.html#-H): (HTTP) 获取网页时使用的额外标头。您可以指定任意数量的额外标头。[...]

[`curl_setopt_array`^(*您可以通过 PHP 中的Docs*)](http://php.net/curl_setopt_array)添加标题（所有可用选项在[`curl_setopt`^(*Docs*)](http://php.net/curl_setopt)中进行了说明）：

```
$ch = curl_init('https://api.service.com/member');
// set URL and other appropriate options
$options = array(        
    CURLOPT_HEADER => false,
    CURLOPT_HTTPHEADER => array("Authorization: 622cee5f8c99c81e87614e9efc63eddb"),
);
curl_setopt_array($ch, $options);
curl_exec($ch); // grab URL and pass it to the browser
curl_close($ch); 
```

如果 curl 被阻止，您也可以使用 PHP 的 HTTP 功能来做到这一点，即使 curl 不可用（如果 curl 在内部可用，则需要 curl）：

```
$options = array('http' => array(
    'header' => array("Authorization: 622cee5f8c99c81e87614e9efc63eddb"),
));
$context = stream_context_create($options);
$result = file_get_contents('https://api.service.com/member', 0, $context); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:57:42.897

您应该查看 php.ini 中的`curl_*`函数。`curl_setopt()`您可以设置请求的标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T08:58:40.213

1）你可以使用[卷曲功能](http://php.net/manual/en/book.curl.php)

2）你可以使用[exec()](http://php.net/manual/en/function.exec.php)

```
exec('curl -H "Authorization: 622cee5f8c99c81e87614e9efc63eddb" https://api.service.com/member'); 
```

3）如果您只想将信息作为字符串，则可以使用[file_get_contents() ...](http://php.net/manual/en/function.file-get-contents.php)

```
<?php
// Create a stream
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Authorization: 622cee5f8c99c81e87614e9efc63eddb"
  )
);

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$file = file_get_contents('https://api.service.com/member', false, $context);
?> 
```

# iphone - 光标不会自动移动到下一个 TextField

> ID：10395474
> 
> 赞同：0
> 
> 时间：2012-05-01T08:48:53.113
> 
> 标签：iphone, ipad, cursor, uitextfield, move

我是游戏应用程序的新手。我正在尝试实现我们有文本字段的问答游戏。当您键入一个字母时，它会自动移动到下一个文本字段，但不会自动移动到第二个文本字段。有人可以帮我解决这个问题吗？

```
 int i=0,k=0;
        while(i<len)
        {
            int y = 15 +k*44;
            int j=0;
            for(j=0; j<15;j++)
            {
                if (i>=len) 
                    break;

                if([[CharArray objectAtIndex:i]isEqualToString:@" "])
                {
                    NSLog(@" space i value:%d",i) ;

                    NSNumber* spaceValues = [NSNumber numberWithInt:i];
                    [intArray addObject:spaceValues];
                    NSLog(@"intArray values :%@",intArray);
                }
                else
                {
                    letterField = [[UITextField alloc] init];
                    // letterField.text = [CharArray objectAtIndex:i];
                    [letterField setContentMode:UIViewContentModeCenter];
                    [letterField setFrame:CGRectMake(30*(j+1)+1*j, y, 30,30)];
                    letterField.font = [UIFont systemFontOfSize:27.0f];
 [letterField setTag:tagCount+300];
                    letterField.autocapitalizationType = UITextAutocapitalizationTypeNone;
   letterField.delegate = self;
                    [answerView addSubview:letterField];
  [letterField release];
                    tagCount ++;
                }
                i++;
            }
            k = k+1;
        }
        [viewToGuess removeFromSuperview];
        [self.view addSubview:answerView];
        [self.view bringSubviewToFront:answerView];
        answerView.frame = CGRectMake(0, 904, 768, 100); 
```

我正在使用此代码获取 TextField 并为此使用按键通知：

```
nextTag = nextTag + 1;  //increment the tag value while key press. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:56:25.423

即使您第二次使用相同的逻辑，它也不起作用，对吗？我想你忘了分配文本字段

和

```
 UITextField *textField = (UITextField *)[self.view viewWithTag:nextTag];
    [textField becomeFirstResponder]; 
```

如果你使用它，你可能会得到你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:52:23.143

无论必须突出显示哪个文本字段，都必须使其成为第一个响应者。例如：

```
if(letterField.tag == _YOUR_TAG_VALUE_)
    [letterField becomeFirstResponder]; 
```

# javafx - JavaFX 2.0 中的 ClipView

> ID：10395480
> 
> 赞同：2
> 
> 时间：2012-05-01T08:49:37.553
> 
> 标签：javafx

当我用谷歌搜索 JavaFX 和 ClipView 时，除了 JavaFX 1.2 和 1.3 的结果外，什么都没有出现。这是否意味着 1.3 版本的 ClipView 在 2.0 中停止？我想在我的项目中使用 Clipview，你知道吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:00:56.597

JavaFX 2+ 中不存在[ClipView](http://docs.oracle.com/cd/E17802_01/javafx/javafx/1.3/docs/api/javafx.scene.layout/javafx.scene.layout.ClipView.html) ，相反，您可以在节点上设置[剪辑](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#clipProperty)或使用具有适当[ScrollBarPolicy](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.ScrollBarPolicy.html#NEVER)和[可平移设置的](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#pannableProperty)[ScrollPane](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html)。

# c# - 全局变量与依赖注入

> ID：10395486
> 
> 赞同：4
> 
> 时间：2012-05-01T08:50:17.120
> 
> 标签：c#

有人说最好使用依赖注入。这是为什么？

我认为最好有几个全局的、易于访问的类，而不是庞大的构造函数。

它是否以任何方式影响应用程序速度？

这两者的混合可能是最好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T08:57:10.807

主要优点是*解耦*，这将有助于单元测试。这种类型完全取决于您如何编写这些“易于访问的类”。

这个想法是这样的。一个类通过仅依赖于*契约*( ) 来从*实现*( ) 依赖中解耦。在您的实际环境中，您可能永远不会提供新的实现类，但在您的测试环境中，您*很可能*会提供（无论是手工制作的存根，还是来自模拟框架的模拟类）。`class`*`interface`*

 **应用程序速度需要分析，但是使用 DI 框架可能会产生一些开销，而不是直接与你知道的单例对话。重要的问题：这是开销问题吗？只有性能预期和分析可以告诉您这一点。根据我的经验，好处远远超过了可忽略不计的性能损失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T08:56:48.847

您可能会使用`static`类和方法作为全局变量。它们对性能没有任何影响。但是，静态类不适合**可测试性**。

[静态方法的缺点是什么？](https://stackoverflow.com/questions/207521/what-are-the-downsides-to-static-methods)

此外，一旦您的代码与静态类（全局）紧密耦合，您将来将无法用替代实现替换它们。因此，除非在非常简单的情况下使用，否则 Globals 可能不是好的设计。

请注意，静态类和方法是编译时绑定，而**DI 是运行时绑定**。**帮助您保持类松散耦合**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T09:15:39.990

使用“全局变量”和 DI 之间存在巨大差异。首先，路径通常不是定向的，因为您可能会逐步通过[单例](http://en.wikipedia.org/wiki/Singleton_pattern)和[服务定位器](http://en.wikipedia.org/wiki/Service_locator_pattern). 今天，两者都被认为是一种反模式。原因是我们应该设计可测试的代码，这在我们需要更改代码库以进行维护或满足新需求时为我们提供了很大的优势。如果代码解耦，可测试性很容易实现。正如您猜测的那样，全局行为无助于解耦，例如，如果您有代码加入静态单例，要测试这样的代码，您需要单例本身，您不能模拟它，这很糟糕，因为您不能随心所欲地给你的系统施加压力。服务定位器乍一看似乎更好：如果您需要测试，您可以模拟服务定位器，但您必须：

*   提前知道被测系统将向定位器询问哪些服务
*   始终创建一个“递归模拟”，因为您可能也会模拟返回的服务。

构造函数上的 DI 是代码解耦的好方法，因为您非常清楚地说明了对象需要运行什么，并且您可以一眼决定要模拟什么，存根等等。请注意，只要您确保 DI 内核不会作为依赖项在您的代码中运行，DI 就会起作用并为您提供帮助：这会将 DI 转换为反模式（您将代码解耦，但将其绑定到容器），所以记得学习并真正实现[组合根模式](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)，这将真正帮助您编写更好和可测试的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T11:20:24.207

我认为关于这个主题的顶帖对 DI 以及如何正确使用它有一个很好的总结：[Dependency Inject (DI) "friendly" library](https://stackoverflow.com/questions/2045904/dependency-inject-di-friendly-library)

如果您想更深入地研究该主题，我可以推荐 Mark Seeman 的书“.NET 中的依赖注入”。**

# facebook - facebook 显示一个带有 ssl 页面的空白页面

> ID：10395487
> 
> 赞同：0
> 
> 时间：2012-05-01T08:50:16.873
> 
> 标签：facebook, ssl

我已将我的应用程序更改为安全页面并且 facebook 显示一个[空白页面](https://www.facebook.com/pages/%D7%90%D7%95%D7%A8%D7%9F-%D7%A6%D7%99%D7%95%D7%93-%D7%97%D7%99%D7%9E%D7%95%D7%9D-%D7%91%D7%A2%D7%9E/114903208585578?sk=app_114043768673499)

[这是我的安全页面的链接](https://outlet.bvd.co.il/zap-fb/file/fbpage_48411335859815.php)

我已附上应用程序打印屏幕

请帮忙。![在此处输入图像描述](../Images/02cf951e4d4818d60743cff98aa963de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:35:54.750

`Page Tab URL`和字段都`Secure Page Tab URL`应该是完全限定的 URL。

由于遗留原因，`Page Tab URL`仍将接受相对于您的 Canvas URL 的路径，但这种向后兼容性不适用于安全页面选项卡 URL

# xslt - 如何将字符串连接到 xsl:value-of select="...？

> ID：10395488
> 
> 赞同：100
> 
> 时间：2012-05-01T08:50:20.640
> 
> 标签：xslt, xpath

```
<a>
    <xsl:attribute name="href"> 
     <xsl:value-of select="/*/properties/property[@name='report']/@value" />
    </xsl:attribute>
</a> 
```

有没有办法将另一个字符串连接到

```
<xsl:value-of select="/*/properties/property[@name='report']/@value"  /> 
```

除了报告属性值之外，我还需要将一些文本传递给 href 属性

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-05-01T09:45:31.860

您可以在此处使用名为**concat的命名相当合理的 xpath 函数**

```
<a>
   <xsl:attribute name="href">
      <xsl:value-of select="concat('myText:', /*/properties/property[@name='report']/@value)" />
   </xsl:attribute>
</a> 
```

当然，这里不一定非得是文本，可以是另一个xpath表达式来选择一个元素或属性。您可以在 concat 表达式中包含任意数量的参数。

请注意，您可以在此处使用属性值模板（由大括号表示）来简化您的表达式

```
<a href="{concat('myText:', /*/properties/property[@name='report']/@value)}"></a> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-05-20T09:37:20.237

三个答案：

简单的 ：

```
<img>
    <xsl:attribute name="src">
        <xsl:value-of select="//your/xquery/path"/>
        <xsl:value-of select="'vmLogo.gif'"/>
    </xsl:attribute>
</img> 
```

使用“连接”：

```
<img>
    <xsl:attribute name="src">
        <xsl:value-of select="concat(//your/xquery/path,'vmLogo.gif')"/>                    
    </xsl:attribute>
</img> 
```

@TimC 建议的属性快捷方式

```
<img src="{concat(//your/xquery/path,'vmLogo.gif')}" /> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-01T12:28:08.213

**使用**：

```
<a href="wantedText{/*/properties/property[@name='report']/@value)}"></a> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-11T07:51:11.887

将静态文本字符串连接到选定值的最简单方法是使用**元素。**

 **```
<a>
  <xsl:attribute name="href"> 
    <xsl:value-of select="/*/properties/property[@name='report']/@value" />
    <xsl:text>staticIconExample.png</xsl:text>
  </xsl:attribute>
</a> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-18T06:09:57.517

最简单的方法是

```
 <TD>
    <xsl:value-of select="concat(//author/first-name,' ',//author/last-name)"/>
  </TD> 
```

当 XML 结构为

```
<title>The Confidence Man</title>
<author>
  <first-name>Herman</first-name>
  <last-name>Melville</last-name>
</author>
<price>11.99</price> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-20T22:36:13.097

不是最易读的解决方案，但您可以将 value-of 的结果与纯文本混合：

```
<a>
  <xsl:attribute name="href"> 
    Text<xsl:value-of select="/*/properties/property[@name='report']/@value"/>Text
  </xsl:attribute>
</a> 
```**

# java - 将 Java 1.5+ 向后移植到 1.4

> ID：10395493
> 
> 赞同：0
> 
> 时间：2012-05-01T08:50:52.113
> 
> 标签：java, parameterized, backport

如何将以下 1.5+ 构造重写为 1.4？

```
final class FooList<T> extends AbstractList<T> implements ...
{
    private T[] tab;
    ...
}

public ListIterator<T> listIterator() {...}

public int bar(int x, Collection<? extends T> c) {...}

for (Foo f : s.baz(x)) {...}

for (Map.Entry<Object, Object> e : p.entrySet()) {...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:55:12.730

您的代码中几乎没有 Java 1.4 不支持的东西

1.  从您的代码中删除。
2.  使用 Object 而不是您的 T 参考。
3.  将 for 循环更改为基于旧索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:02:03.617

```
final class FooList extends AbstractList implements ...
{
    private Object[] tab;
    ...
}

public ListIterator listIterator() {...}

public int bar(int x, Collection c) {...}

for (Iterator it = s.baz(x).iterator(); it.hasNext();) {
  final Foo f = (Foo) it.next();
  ...
}

for (Iterator it = p.entrySet().iterator(); it.hasNext();) {
  final Map.Entry e = (Map.Entry) it.next();
  ...
} 
```

当然，加上所有必要的沮丧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:58:42.727

你可以试试[Retroweaver](http://retroweaver.sourceforge.net/)，它允许在 Java 1.4 中使用 Java 5 的一些特性。

# jquery-mobile - 使用每页有多个标题的jquery mobile

> ID：10395498
> 
> 赞同：3
> 
> 时间：2012-05-01T08:51:21.750
> 
> 标签：jquery-mobile

我想在我的第 2 页标题上显示。使用以下内容是否有效：

```
<div data-role="page" class="<?php print $node_classes; ?>">
    <div data-role="header" data-theme="a" data-position="inline"> 
        <h1><?php print $site_name; ?></h1>
    </div>
    <div class="page-header ui-bar">
        <h2 class="ui-title"><?php print $title; ?></h2>
    </div>
    ....
</div> 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T23:48:47.633

这取决于您定义为“有效”的内容

它会正确渲染吗？我不这么认为，最好使用：

```
<div data-role="header" data-theme="a" data-position="inline"> 
    <h1><?php print $site_name; ?></h1>
</div>
<div data-role="header" data-theme="a" data-position="inline">
    <h2 class="ui-title"><?php print $title; ?></h2>
</div> 
```

这样做有意义吗？我也不这么认为

# asp.net - 在调用 EventLog.SourceExists 之前检测 EventLog 权限

> ID：10395503
> 
> 赞同：0
> 
> 时间：2012-05-01T08:51:51.707
> 
> 标签：asp.net, permissions, event-log

我想从 ASP .NET 应用程序登录到应用程序事件日志。我想调用 EventLog.SourceExists 来确定事件源是否首先存在，如果不存在则创建它。

如 MSDN (http://msdn.microsoft.com/en-us/library/6s7642se.aspx) 中所述：“*要在 Windows Vista 及更高版本或 Windows Server 2003 中搜索事件源，您必须具有管理权限。此要求的原因是必须搜索所有事件日志，包括安全性，以确定事件源是否唯一。从 Windows Vista 开始，用户没有访问安全性日志的权限；因此，抛出 SecurityException。* "

在我的例子中，NetworkService 用户没有管理员权限，所以 EventLog.SourceExists 会抛出 MSDN 中记录的 SecurityException。

**我的问题是：**如何围绕对 EventLog.SourceExists 的调用进行防御性编码？在调用 EventLog.SourceExists 之前，我可以先调用一些东西来检查我是否有权搜索事件源？

或者是我唯一的选择来捕获 SecurityException 并在 catch 块内采取一些其他操作，例如记录到现有事件源，例如信息

谢谢

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:41:37.387

Do you absolutely have to write to the Windows application event log? The security restrictions that are in place by default do make this difficult to do. Every time I've been developing on a new VM I have to make a registry entry to allow the NETWORK_USER account to write to the log and as soon as you roll your application onto a live server (where making wholesale registry changes probably isn't a good idea) then you are snookered.

Also, experience has taught me that the Windows event log isn't the friendliest environment for logging / debugging. For server apps that run overnight I tend to do all my event logging to an html file that I can read the next day, for web apps I use a custom database and send all my events to that instead.

# java - Java notify() 在 wait() 之前被调用

> ID：10395509
> 
> 赞同：5
> 
> 时间：2012-05-01T08:52:34.783
> 
> 标签：java, multithreading, wait, notify

在一个线程中的 wait() 之前调用另一个线程中的 notify() 是否可能？它发生在我身上。

客户端从目标请求一个值并等待结果变量 RV。如果目标是客户端本身，我会使用正确的结果更新 RV，并在另一个线程中调用 RV 上的 notify()。

```
class EMU {

  ResultVar RV;
  Address my_address;

  ResultVar findValue(String key) {
    String tgt = findTarget(key);
    sendRequest(tgt, key);
    synchronized(RV) {
      RV.wait();
    }

    return RV;
  }

  Runnable Server = new Runnable() {
    public void run() {
      //code to receive connections. Assume object of type Request is read from the stream.
      Request r = (Request) ois.readObject();
      if(r.requesterAddr.compareTo(my_address) == 0) {
        String val = findVal(key);
        RV.putVal(val);
        synchronized(RV){
          RV.notify();
        }
      }
    }
  };
} 
```

问题是，在请求者完成与自己的所有“联网”（上例中的 sendReqest）之前，结果会在结果变量中更新。当请求者线程现在调用 wait() 时，程序不会继续，因为已经调用了 notify。

我们该如何预防呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T09:08:53.057

在等待（循环）之前检查一些标志，请参阅教程：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T09:10:28.857

没有什么能阻止你调用`notify`一个未被`wait`另一个线程编辑的对象。

听起来您想要的是仅在某些条件成立时才等待。例如：

```
synchronized (results) {
    while (!results.hasResults()) {
        // no results yet; wait for them
        try {
            results.wait();
        } catch (InterruptedException ie) { /* ignore */ }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T10:49:13.483

我强烈建议不要重新发明轮子。

Java 的[Future](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)接口是为可能只在以后到达的结果而设计的，[FutureTask](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/FutureTask.html)类实现了这个接口。

让第一个线程获得对 Future 的访问权并让第二个线程运行 FutureTask，所有这些东西都会为您处理。您还可以免费获得超时支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T15:18:14.580

在进入 wait() 之前使用一些条件并确保该条件是线程安全的 :)

```
class EMU{
    ResultVar RV;
    Address my_address;
    volatile boolean condition = true;

    ResultVar findValue(String key){
        String tgt = findTarget(key);
        sendRequest(tgt, key);
        synchronized(RV){
            while(condition == true)
            {
                RV.wait();
            }
        }
        return RV;
    }

    Runnable Server = new Runnable(){
        public void run(){
            //code to receive connections. Assume object of type Request is read from the stream.
            Request r = (Request) ois.readObject();
            if(r.requesterAddr.compareTo(my_address) == 0){
                String val = findVal(key);
                RV.putVal(val);
                synchronized(RV){
                    condition = false;
                    RV.notify();
                }
            }
        }

    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-18T20:08:54.747

让我首先将代码分解为可重现的最低限度：

```
public static void main(String[] args) throws Exception {
    Object RV = new Object();
    new Thread() {
        @Override
        public void run() {
            synchronized (RV) {
                RV.notify();
            }
        }
    }.start();
    Thread.sleep(1_000);
    synchronized (RV) {
        RV.wait();
    }
} 
```

这种方法理论上永远不会结束，程序也永远不会退出。如果这是一个僵局，那将是一个争议。

我的解决方案是创建第二个锁：

```
public static void main(String[] args) throws Exception {
    Object RV = new Object();
    Object lock = new Object();
    new Thread() {
        @Override
        public void run() {
            synchronized (lock) {
                lock.wait();
            }
            synchronized (RV) {
                RV.notify();
            }
        }
    }.start();
    Thread.sleep(1_000);
    synchronized (RV) {
        synchronized (lock) {
            lock.notify();
        }
        RV.wait();
    }
} 
```

让我们检查一下主线程等待一秒钟时线程在做什么：

1.  自定义线程将首先加入`synchronized(lock)`块。
2.  然后锁会导致自定义线程等待。
3.  1 秒后，主线程正在加入 RV 同步。
4.  锁得到通知并导致自定义线程继续工作。
5.  自定义线程离开`synchronized(lock)`块。
6.  主线程将 RV-wait-lock。
7.  自定义线程通知 RV-lock 继续。

程序结束。

# java - 如何沿路径将不规则形状切成两部分？

> ID：10395512
> 
> 赞同：1
> 
> 时间：2012-05-01T08:52:54.423
> 
> 标签：java, android, geometry

我有一个相当复杂的几何问题需要解决，我想知道是否有人可以指出资源来解决它。

我有一个不规则的形状，由垂直和水平的喜欢组成。它由一系列顺时针方向的 x,y 点描述，形成一条路径。最后一点连接到第一个点以形成形状的边界。没有一条线会相互交叉。当我在屏幕上绘制形状时，我使用沿 Y 轴的经典扫描线算法将形状变成一系列我填充的矩形。

但是现在我希望用户能够通过使用水平线或垂直线再次绘制从边界上的一个点到边界上的另一个点的路径，将形状分成两部分。在图中，用户从 1 开始绘制并最终在 2 处进行切片。

所以这里有一些我必须削减的东西的例子。使用用户绘制的红色切割路径将原始形状切割成部分 A 和 B。请注意，不能保证用户将按照与我的区域相同的顺时针方向进行切割（即下面的 1 和 2 可以颠倒）所以我必须处理这个问题。

![带有路径的示例形状](../Images/0c3925479ae7d37bfb4459a6a0ff6362.png)

该线将完全包含在边界形状内，并且不会越过自身。即当我用路径切割形状时，它将产生恰好2个新形状。

大声思考我认为这个伪代码可能是这样的：

1.  将形状描述为一系列 x、y 点，编号为 0 到 N。N 连接到 0 以闭合形状。
2.  允许用户绘制在形状路径上某处开始和结束的剪切路径。UI 可防止用户越过自己的线条或在形状之外绘图。
3.  计算出切割路径开始和结束的形状中的哪些线索引。线索引由点索引 0->1, 1->2, ... N-1->N, N->0 描述
4.  为确保用户的剪切路径与形状的方向相同，如果出现以下情况，请反转其路径：a) 最终形状线索引 < 起始形状线索引 b) 或形状结束线索引 == 形状起始线索引但结束切割点更接近线索引起点
5.  构造两个点列表。a) lines >= end index and <= start index + Cut Path, 在切割点修剪开始/结束线 b) Cut path + lines >= start and <= end index, 在切割点修剪开始/结束线
6.  从点列表创建新区域。

我认为这可能会奏效，但显然如果那里有实际的代码已经这样做了，那会更容易！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:05:35.473

我不知道那里的代码已经完成了这项工作。

实际上，您需要为两个新形状之一反转切割路径，而不是为另一个反转切割路径。（如果您所说的关于顺时针遍历的所有形状是正确的。）我认为查看您想要为每个形状采用该路径的最简单方法是：（1）从 UI 交互中，您将知道在哪里切割路径的形状；(2a) 从切割路径的一端开始，顺时针绕着形状走，直到碰到另一端，然后沿着切割路径回到第一端，给你一个形状；(2b) 现在从原来的一端开始，沿着另一个方向的切割路径，绕着形状顺时针走，直到你回到原来的切割路径端点，给你另一个形状。

除此之外，您的伪代码对我来说看起来不错。

# sparql - 如何在 Sparql 中选择一个彼此相等的

> ID：10395516
> 
> 赞同：3
> 
> 时间：2012-05-01T08:53:40.683
> 
> 标签：sparql

例如，有一个简单的 select sparql 查询：

```
SELECT *  Where  
{
  CT:A skos:broader ?A.  
  CT:B skos:broader ?B.  
  FILTER(?A=?B)  
} 
```

使用`FILTER`，很容易选择彼此相等的对象。但是当有更多的三元组要匹配时，例如 from `CT:A skos:broader ?A`to `CT:Z skos:broader ?Z`，我如何过滤那些符合`?A=?B=?C=....?Z?`
Wish 的内容以使其清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:41:01.147

我认为你的查询应该写成

`select ?a where { ct:a skos:broader ?a. ct:b skos:broader ?a }`

这意味着你想找到一个和的`?a`值`skos:broader`。如果您想对所有人进行等效处理，则只需重复该模式：`ct:a``ct:b``ct:a, ct:b, ... ct:z`

`select ?a where { ct:a skos:broader ?a. ct:b skos:broader ?a. ct:c skos:broader ?a ... ct:z skos:broader ?a }`

# bash - 将前一个文件和新文件放在一起，并将 mv 转换为临时文件。

> ID：10395519
> 
> 赞同：0
> 
> 时间：2012-05-01T08:53:55.200
> 
> 标签：bash, shell

我正在尝试执行以下操作：

*   获取以前的文件名（如果存在） - 我已经完成了
*   将这两个文件转换为临时文件，即“filename.002”、“filename.003”>>临时文件
*   mv 将文件下载到某处或删除它
*   mv temp 更正文件名

我做了以下事情：

```
set -x

substring()
{
    VAR=$1
    OFFSET=$2
    LENGTH=$3
    RET_VAL=${VAR:$OFFSET:$LENGTH}
}

# $1 filename

# Change to PF Gazetteer directory
cd $CARRIER_PF_UPDATES_DIR

LOG=log.txt
DownloadedFile=$1
OldFile=
DATE=$(date +"%Y-%m-%d-%H:%M:%S")
RET=0

if [ "${2+1}" == "1" ]
then
    echo "Date: " $DATE > $LOG
    echo "filename: " $DownloadedFile >> $LOG
fi

substring ${DownloadedFile} -3 3
extension=$RET_VAL
old_ext=$((${extension}+1))
substring ${DownloadedFile} 0 9
echo $RET_VAL
oldFile="${RET_VAL}${old_ext}"
#oldFile=`printf  "%02d" ${RET_VAL}`
#printf -v oldFile %02d "$RET_VAL"
#printf -v oldFile %02d "$((10#$RET_VAL - 1))"
extension=${1##*.}
printf -v decr "%s.%0${#extension}d" "${1%.*}" "$((10#$extension - 1))" \
&& cat -- "$decr" "$1" > temp \
&& rm -- "$decr" \
&& mv -- temp "$1"
oldFile="${oldFile}${old_ext}"
echo $oldFile

# move any temporary files if they exist
mv "${DownloadedFile}~" ${DownloadedFile}

# check to see if we got a file
result=$(grep 226 run.ilog)

if [ "${2+1}" == "1" ]
then
    echo "grep found: " $result >> $LOG
fi

if [ -e "${DownloadedFile}" ]
then
   #add back onto filename
   #store back onto var = $OldFile
   #Check if OldFile exist
   #Cat files together and - Cat oldFile DownloadedFile > tempFile
echo ""
fi

if [ "$result" == "" ]
then
     # File not found
     RET=100
else
     RET=10
     # START F4202
     sorted=$(sort -t'+' -k7 ${fileName} > ${fileName}.sorted)
     if [ -e "${fileName}.sorted" ]
     then
        mv "${fileName}" "unsorted/${fileName}.unsorted"
        mv "${fileName}.sorted" ${fileName}
     fi
     # END F4202
fi

if [ "${2+1}" == "1" ]
then
    echo "script ret: " $RET >> $LOG
fi

exit $RET 
```

但是，当我运行它时，当我输入 FileName.005 [Pastie时，我会在终端中收到以下内容](http://pastie.org/3842757)

应该发生的是 1）我输入一个文件名，即 Filename.005 它检查它是否存在

2) 获取旧文件，该文件是 Filename.004 的减量文件

3）然后将内容组合在一起，使其成为一个文件。

我是否正确地做到了这一点。请原谅我的任何错误，因为我是 bash 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:01:09.840

问题是`${DownloadedFile}~`不存在，因此移动失败。在移动之前，您应该首先检查它是否存在。

```
[ -e "${DownloadedFile}~" ] && mv "${DownloadedFile}~" "${DownloadedFile}" 
```

# wordpress - Wordpress Heroku 博客上的帖子评分系统

> ID：10395522
> 
> 赞同：0
> 
> 时间：2012-05-01T08:54:24.420
> 
> 标签：wordpress, postgresql, heroku

我正在尝试在我的博客上安装一个允许帖子评分的系统，并在侧边栏中添加评分最高的前十个帖子...为此，我尝试使用很多 cummon 插件，例如：

参赛者评分、评分后、buddypress-rate-forum-posts、评分-我的随便

还有这个：

[http://wordpress.org/extend/plugins/wp-postratings/](http://wordpress.org/extend/plugins/wp-postratings/)

这看起来更好...

但是没有什么他们不能正常工作...... PostgresSQL DB似乎有问题......

你知道这个问题吗？如果是，有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:18:11.747

Wordpress 最初是为 MySQL 完成的。[有一个使用 PostgreSQL](http://wordpress.org/extend/plugins/postgresql-for-wordpress/)的扩展，它甚至可以工作（我们将它用于小型博客）。

不幸的是，许多插件旨在直接查询数据库，而不是通过 Wordpress 层。如果是这种情况，那么您必须修改此类插件，或寻找其他东西。

有一些支持更多数据库的运动，但它[正在进行中](http://codex.wordpress.org/Using_Alternative_Databases)。

# javascript - facebook 喜欢 ajax 搜索 - 如何使用键盘浏览结果

> ID：10395523
> 
> 赞同：8
> 
> 时间：2012-05-01T08:54:30.627
> 
> 标签：javascript, ajax, jquery, autocomplete

我试图实现一个类似 facebook 的搜索，它将在用户输入时返回结果（自动完成），这是我正在使用的 jquery 代码：

```
$(document).ready(function(){
    $("#searchField").keyup(function() 
    {
        var searchbox = $(this).val();
            if(searchbox=='')
            {
            $("#searchDisplay").html('').hide();
            }
            else
            {
                $.ajax({
                url: "ajax/?do=search_users&q="+ searchbox+"",
                //data: dataString,
                cache: false,
                    success: function(html)
                    {
                        $("#searchDisplay").html(html).show();
                    }
                });
            }return false;    
    });
});

$("#searchField").focusout(function(){
    $("#searchDisplay").slideUp();
});

$("#searchField").focus(function(){
    if($("#searchDisplay").html() != ''){
        $("#searchDisplay").slideDown();
    }
}); 
```

返回结果为 div 结构。我不知道该怎么做是让用户使用键盘上的 [UP] 和 [DOWN] 键浏览结果，然后按 [ENTER] 按钮选择结果。

**额外信息**

这是`display_box`：

```
<div id="searchDisplay">
                echo '<a href="'.$_config['http'].$username.'"><div class="display_box" align="left">';
                echo '<img src="'.$img.'"  style="width:25px; float:left; margin-right:6px" />';
                echo $name.'<br/>';
                echo '<span style="font-size:9px; color:#999999">'.$username.'</span></div></a>';
</div> 
```

**HTML 标记**

```
 <a href="ahoora"><div class="display_box" align="left">
    <img src="http://domain.com/upload/thumbs/ahoora_1336145552.jpg" style="width:25px; float:left; margin-right:6px">
<strong>a</strong>hour<strong>a</strong><br>
<span style="font-size:9px; color:#999999"><strong>a</strong>hoor<strong>a</strong></span>
</div></a> 
```

每个结果都有上面的 html 代码，它们都被加载到一个`<div>`带有`id=searchDisplay`.

*注意php echo部分有一个while循环，上面的代码只是html的样子（searchDisplay和结果不在同一个页面，查看jquery代码）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:16:49.893

有一个 jQuery 插件可以将动作绑定到键盘快捷键。我用它来导航使用光标键的项目列表：

[https://github.com/jeresig/jquery.hotkeys](https://github.com/jeresig/jquery.hotkeys)

用插件定义快捷键就这么简单：

```
$(document).bind('keydown', 'ctrl+a', fn); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T04:45:16.900

jQuery UI 自动完成很好地处理了这个功能，没有任何额外的代码：

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

请参阅此 url 上的演示以获取快速入门。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:10:18.610

我已经稍微改写了你的代码，应该做同样的事情，只是更容易阅读和更有效率：

```
$("#searchField").on({
    keyup : function(e) {
        var code = (e.keyCode ? e.keyCode : e.which),
            searchbox = this.value,
            Sdisplay = $("#searchDisplay");
        if(searchbox=='') {
            Sdisplay.html('').hide();
        }else{
           $.ajax({
            url: "ajax/?do=search_users&q="+ searchbox+"",
            //data: dataString,
            cache: false
           }).done(function(html) {
               Sdisplay.html(html).show();
           });
        }
    },
    focus: function() {
        $("#searchDisplay").slideDown();        
    },
    blur: function() {
        $("#searchDisplay").slideUp();
    }
}); 
```

至于搜索结果，您可以只定位每个`<a>`元素，但您的网站上可能还有其他`<a>`元素，所以我会添加一个包装器以使它们更容易定位，您可以使用 jQuery 的 wrap() 和 each( ) 函数，但如果可能的话，最简单的方法是将它添加到您的 PHP 中，如下所示：

```
<div id="searchDisplay">
    echo '<div class="wrapper">';
    echo '<a href="'.$_config['http'].$username.'">';
    echo '<div class="display_box" align="left">';
    echo '<img src="'.$img.'" style="width:25px; float:left; margin-right:6px" />';
    echo $name.'<br/>';
    echo '<span style="font-size:9px; color:#999999">'.$username.'</span></div></a>';
    echo '</div>';
</div> 
```

至于使用向上/向下箭头键切换结果并将位置更改为搜索结果，我会做类似的事情（注意使用之前添加的 .wrapper 类）：

```
if (code == 40 || code == 38 || code == 13) {//arrow keys and enter
    if ($("#searchDisplay").is(':visible')) {
        switch (code) {
            case 40: //arrow down
               act = act > $('.wrapper').length-2 ? 0 : act+1;
               $(".wrapper").removeClass('active').eq(act).addClass('active');
            break;
            case 38: //arrow up
               act = act < 1 ? $('.wrapper').length-1 : act-1;
               $(".wrapper").removeClass('active').eq(act).addClass('active');
            break;
            case 13: //enter key
               var ViElms = $('.wrapper').filter(':visible').filter('.active').length;
               if (ViElms) { //if there are any search results visible with the active class
                   var link = $('.wrapper').eq(act).find('a')[0].href;
                   window.location.href = link;
               }
           break;
     }
} 
```

现在要缓存一些选择器，并将其与`keyup`函数放在一起，请执行以下操作：

```
$(document).ready(function() {
    var act = -1;
    $("#searchField").on({
        keyup: function(e) {
            var code = (e.keyCode ? e.keyCode : e.which),
                searchbox = this.value,
                Sdisplay = $("#searchDisplay"),
                wrappers = $('.wrapper'); //there's that class again
            if (searchbox == '') {
                Sdisplay.html('').hide();
            } else {
                Sdisplay.show();
                if (code == 40 || code == 38 || code == 13) { //do not search on arrow keys and enter
                    if (Sdisplay.is(':visible')) {
                        switch (code) {
                        case 40: //arrow down
                            act = act > wrappers.length - 2 ? 0 : act + 1;
                            wrappers.removeClass('active').eq(act).addClass('active');
                            break;
                        case 38: //arrow up
                            act = act < 1 ? wrappers.length - 1 : act - 1;
                            wrappers.removeClass('active').eq(act).addClass('active');
                            break;
                        case 13: //enter
                            var ViElms = wrappers.filter(':visible').filter('.active').length;
                            if (ViElms) { //if there are any search results visible with the active class
                               var link = wrappers.eq(act).find('a')[0].href;
                               window.location.href = link;
                            }
                            break;
                        }
                    }
                } else { //do search
                    $.ajax({
                       url: "ajax/?do=search_users&q="+ searchbox+"",
                       //data: dataString,
                       cache: false
                    }).done(function(html) {
                       Sdisplay.html(html).show();
                    });
                }
            }
        },
        focus: function() {
            $("#searchDisplay").slideDown();
        },
        blur: function() {
            $("#searchDisplay").slideUp();
        }
    });
});​ 
```

这是一个[**演示**](http://jsfiddle.net/adeneo/NtnQg/3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T09:31:01.943

试试这个代码......我从我的书签集合中找到

[http://www.9lessons.info/2009/06/autosuggestion-with-jquery-ajax-and-php.html](http://www.9lessons.info/2009/06/autosuggestion-with-jquery-ajax-and-php.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T02:57:14.907

尝试这个。滚动列表并在您越过开头/结尾时返回顶部/底部。

```
<script type="text/javascript">
<!--
$(document).ready(function() {
    $("#searchbox").on("keydown",handleKeys);
});
function handleKeys(e) {

    var keyCode=e.keyCode? e.keyCode : e.charCode;
    if (keyCode==40 && $("a.activeoption").length==0) {
        $("a").eq(0).addClass("activeoption");
    } else if (keyCode==40 && $("a.activeoption").length!=0) {
        $("a.activeoption").next().addClass("activeoption");
        $("a.activeoption").eq(0).removeClass("activeoption");
        if ($("a.activeoption").length==0)
            $("a").eq(0).addClass("activeoption");
    } else if (keyCode==38 && $("a.activeoption").length==0) {
        $("a").last().addClass("activeoption");
    } else if (keyCode==38 && $("a.activeoption").length!=0) {
        var toSelect=$("a.activeoption").prev("a");
        $("a.activeoption").eq(0).removeClass("activeoption");
        toSelect.addClass("activeoption");
        if ($("a.activeoption").length==0)
            $("a").last().addClass("activeoption");
    } else if (keyCode==13) {
        window.location=$("a.activeoption")[0].href;
    }
}
//-->
</script> 
```

演示：[http ://www.dstrout.net/pub/keyscroll.htm](http://www.dstrout.net/pub/keyscroll.htm)

# javascript - 在 Javascript 中遇到闭包问题

> ID：10395524
> 
> 赞同：2
> 
> 时间：2012-05-01T08:54:30.940
> 
> 标签：javascript, google-maps-api-3, closures

我试图将一个数组传递给一个函数，然后使用该数组中的信息来初始化一个谷歌地图。但是，当我单击地图上的标记时，会产生一个错误，上面写着：

> 无法获取属性“popupHtml”的值：对象为空或未定义

创建该函数的原因是可以将 javascript 代码移动到单独的 .js 文件中，从而与 html 文件分开。无论如何，这个问题可以纠正吗？这是我的所有代码（我在其中添加了注释以标记错误发生的位置......）：

```
<!DOCTYPE html>

<html>
<head>    
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        window.onload = function ()
        {
            function loadMap(markers)
            {
                var options =
                {
                    center: new google.maps.LatLng(40.775813, -73.970786),
                    zoom: 17,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById('map'), options);

                var points = new Array();
                for (var i = 0; i < markers.length; i++)
                    points.push(new google.maps.LatLng(markers[i].lat, markers[i].lon));
                var infoWindow = new google.maps.InfoWindow();
                for (var i = 0; i < markers.length; i++)
                {
                    var googleMarker = new google.maps.Marker({ position: points[i], map: map, title: markers[i].title });
                    google.maps.event.addListener(
                        googleMarker,
                        'click',
                        function ()
                        {
                            // The following line is where the error is occuring:
                            infoWindow.setContent(markers[i].popupHtml);
                            infoWindow.open(map, googleMarker);
                        });
                }
            };

            loadMap([{
                "lat": "40.776512",
                "lon": "-73.970293",
                "popupHtml": "\u003cdiv\u003eHello world - from marker 1!\u003c/div\u003e",
                "title": "Marker 1!"
            },
            {
                "lat": "40.774659",
                "lon": "-73.971548",
                "popupHtml": "\u003cdiv\u003eHello world - from marker 2!\u003c/div\u003e",
                "title": "Marker 2!"
            }]);
        };
    </script>
</head>
<body>
    <div id="map" style="width: 680px; height: 400px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:59:20.643

问题是您传入的函数具有对变量`addListener`的持久访问权限，**而不是**创建函数时其值的副本。因此，函数的所有副本都在它们被调用时看到，这可能超过了数组的末尾。也一样；他们都会看到它在循环中的*最后一个值，而不是**当前*值。`i`**`i``googleMarker`**

 ****您可以使用生成器函数来修复它，或者（如果您可以依赖 ECMAScript5，或者如果您使用 ES5 shim，因为`bind`这是 shim 可以提供的东西）使用[`Function#bind`](http://es5.github.com/#x15.3.4.5).

使用`bind`：

```
for (var i = 0; i < markers.length; i++)
{
    var googleMarker = new google.maps.Marker({ position: points[i], map: map, title: markers[i].title });
    google.maps.event.addListener(
        googleMarker,
        'click',
        (function (index, thisMarker)
        {
            // The following line is where the error is occuring:
            infoWindow.setContent(markers[index].popupHtml);
            infoWindow.open(map, thisMarker);
        }).bind(undefined, i, googleMarker)
    );
} 
```

`bind`返回一个函数，该函数在调用时将使用给定`this`值和您提供的参数调用原始函数。所以在上面，我们调用`bind`传入 and 的值*，*它给了我们一个函数，当被调用时，它将以这些值作为参数调用我们的原始函数。然后我们使用参数 ( and ) 而不是and 。`i``googleMarker``index``thisMarker``i``googleMarker`

如果您不能在目标浏览器中依赖 ES5 功能并且不想使用 shim，则可以使用生成器函数：

```
for (var i = 0; i < markers.length; i++)
{
    var googleMarker = new google.maps.Marker({ position: points[i], map: map, title: markers[i].title });
    google.maps.event.addListener(
        googleMarker,
        'click',
        makeHandler(i, googleMarker)
    );
}

function makeHandler(index, thisMarker) {
    return function ()
    {
        // The following line is where the error is occuring:
        infoWindow.setContent(markers[index].popupHtml);
        infoWindow.open(map, thisMarker);
    };
} 
```

我们在这里调用`makeHandler`，传入 and 的值*，*并返回一个函数，该函数关闭这些参数 ( and ) 而不是and 。由于参数不会改变，我们的函数将看到正确的值。`i``googleMarker``makeHandler``index``thisMarker``i``googleMarker``makeHandler`

这一切都与闭包的工作方式有关。关于闭包的更多信息：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:02:16.033

您对 loadMap 函数的定义在 window.onload 处理程序中，因此在页面加载之前不可用，即使该函数处于不同的范围内。

我认为你的事情有点倒退 - 我将 loadMap 函数的定义与对 loadMap 的调用交换，以便调用在 onload 事件中，而定义不在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:06:51.697

正如 TJ Crowder 所指出的`i`，即使在闭包内，价值也会随着循环的进行而变化。除了他的回答之外，解决此问题的一种简单方法是在循环范围内创建一个变量。

```
for (var i = 0; i < markers.length; i++)
    {
        var marker = markers[i]; // new variable is created for each loop iteration
        var googleMarker = new google.maps.Marker({ position: points[i], map: map, title: marker.title });
        google.maps.event.addListener(
            googleMarker,
            'click',
            function ()
            {
                // The following line is where the error is occuring:
                infoWindow.setContent(marker.popupHtml);
                infoWindow.open(map, googleMarker);
            });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:21:08.540

您可以使用简单的匿名函数，因此在这里您执行一个函数，该执行的上下文将保存您的步长值。

```
for (var i = 0; i < markers.length; i++)
{
    var googleMarker = new google.maps.Marker({ position: points[i], map: map, title: marker.title });

    (function(step){google.maps.event.addListener(
        googleMarker,
        'click',
        function ()
        {
            // The following line is where the error is occuring:
            infoWindow.setContent(markers[step].popupHtml);
            infoWindow.open(map, googleMarker);
        });
    )(i);
} 
```****

# java - 这可以被认为是重复的代码吗？

> ID：10395525
> 
> 赞同：0
> 
> 时间：2012-05-01T08:54:31.247
> 
> 标签：java, inversion-of-control

这是我在这里的第一篇文章，最近我一直在使用带有 primefaces 的 JSF2.0。我们有在我们的应用程序中导出 PDF 的要求。最初我们使用 primefaces 默认的 dataexporter 标签。但格式简直太糟糕了。所以，我使用 itext 来生成 PDF。我们的应用程序中有多达 15 个数据表，所有这些都需要 PDF 导出。我创建了一个名为 generatePDF 的方法，它使用 Itext 为所有表创建 PDF。

```
 Interface PDFI {
 public void setColNames();
 public void setColValues();
 public void setContentHeader();

 }
Class DataEx  {
    public void generatePDF(ActionEvent event) {
        // generate pdf...
    }

} 
```

考虑我在该数据表后面的视图数据表 A ... bean 中有一个数据表 A..

```
Class BeanA implements PDFI {
    //implemented methods

    }

} 
Class BeanB implements PDFI {
 //implemented methods

 } 
```

在另一个数据表B后面，我做和上面一样的事情..所以，我的问题是，这被认为是重复代码吗？而且，这是做到这一点的有效方法吗？任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:11:11.767

我在重构重复代码之前使用的经验法则——当一个地方的部分代码有错误时——你是否需要将另一个更改为？因为你可能会忘记

在你的情况下，看起来你有重复的代码块。我会考虑将 require 参数添加到 generatePDF，这样它就可以在一个地方完成所有工作。

# vb.net - vb.net：关于catch webbrowser输入文件路径

> ID：10395527
> 
> 赞同：0
> 
> 时间：2012-05-01T08:54:38.660
> 
> 标签：vb.net

关于捕获 webbrowser 输入文件路径。
我的网络浏览器有一个浏览文件按钮。

```
<input name="uploadfile" type="file" id="uploadfile" size="50" /><br> 
```

浏览文件后如何将文件路径捕获到 TextBox 中？

> 例如 C:\Users\Test\Desktop\abc.jpg

# c# - 使用 MOQ 测试此代码的正确方法是什么？

> ID：10395528
> 
> 赞同：2
> 
> 时间：2012-05-01T08:54:42.823
> 
> 标签：c#, moq

我有以下方法：

```
 public void MoveChannelUp(string channelName)
    {
        var liveChannels = _repository.GetChannels<LiveChannel>();

        var channels = GetModifiedChannelsList(channelName, liveChannels);

        _repository.SaveChannels(channels);
    } 
```

我想在 SaveChannels() 调用上设置一个期望，以便传入正确的通道参数。

我试过了 ：

```
 channelsRepository.Setup(x => x.SaveChannels(reorderedChannels)); 
```

其中 reorderedChannels 是我期望 GetModifiedChannelsList() 调用将返回的，但我得到了 Mock 验证异常（可能是由于 reorderedChannels 与通道不是同一个对象？？？）

所以我真正想测试的是 GetModifiedChanneslsList() （我知道我可以使用反射来测试它）

那么如何测试传递给 SaveChannels() 的正确频道列表呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:35:57.860

你可以做这样的事情（我假设有一个类型被调用`Channel`并且 SaveChannels 的参数是`List<Channel>`; 用实际替换）：

```
var expectedChannels = new List<Channel> { new Channel() }; // set up expected channels here

var channelsRepo = new Mock<IChannelsRepository>();

// perform your unit test using channelsRepo here, for example:

channelsRepo.Object.SaveChannels(new List<Channel> { new Channel() });

channelsRepo.Verify(x => x.SaveChannels(It.Is<List<Channel>>(l => l.SequenceEqual(expectedChannels)))); // will throw an exception if call to SaveChannels wasn't made, or the List of Channels params did not match the expected. 
```

此代码所做的是验证该`SaveChannels`方法是否至少使用正确的通道列表调用了一次。如果这没有发生，`Verify`将引发异常，并且您的单元测试将按预期失败。

# android - 将枚举从 xml 放入 Spinner

> ID：10395533
> 
> 赞同：0
> 
> 时间：2012-05-01T08:54:59.267
> 
> 标签：android, xml, layout

我在 android 中的微调器有问题，我无法为其内容设置枚举值。这是微调器的代码：

```
<Spinner
    android:id="@+id/spTrainingType"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:entries="@attr/TrainingType"
    android:prompt="@string/hint_training_type" /> 
```

这是枚举：

```
<declare-styleable name="TrainingStyle">
    <attr name="RecallType">
        <enum name="Vibro" value="1" />
        <enum name="Music" value="2" />
        <enum name="Silent" value="3" />
        <enum name="Alarm" value="4" />
    </attr>
    <attr name="RepeatType">
        <enum name="Daily" value="1" />
        <enum name="Weekly" value="2" />
        <enum name="Monthly" value="3" />
    </attr>
    <attr name="TrainingType">
        <enum name="Jogging" value="1" />
        <enum name="Cross" value="2" />
        <enum name="Climbing" value="3" />
        <enum name="BikeTrip" value="4" />
    </attr>
</declare-styleable> 
```

那么有没有办法将枚举放入微调器，或者只放入数组？或者可能是我做错了。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:40:03.797

据我所知，你想要做的事情在目前的形式下是不可能的。`attr`命名空间旨在容纳`View(Group)`s/ s 等的“属性” `Widget`，而不是值 - 因此是缩写。如果您考虑一下，如果支持它，那么类中可能会有类似`getEnumeration()`方法的东西`Resources`，或者可能是一个更通用的版本，用于将值映射到......好吧，`Map`.

使键/值对与`Spinner`, 一起使用的标准方法是为 中的键和值定义单独的数组`res/values/arrays.xml`。这样一个数组中的项目按顺序加载，因此您可以使用基于索引的查找来匹配键和值（反之亦然）。

如果您稍微搜索一下，我相信您会发现另一种方法是将键和值合并到一个字符串中；例如，通过使用特殊的分隔符，但这可能意味着您需要在将其显示给用户之前对其进行预处理。这不是最灵活的解决方案，也绝对不是我想要的。

话虽如此，实现您自己的[`XmlPullParser`](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)从资源/xml 文件加载键/值对并不难。如果您点击该链接到类文档，您实际上会发现一个非常基本的免费实现。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:09:12.257

以编程方式是可能的。我认为通过 XML 中的枚举是不可能的。它不起作用，只有 XML 中的 String 数组起作用。

java代码中以编程方式的示例：

```
public Enum ValueType {
        DefaultType, NotSoDefaultType, AnotherType
}

Spinner viewTypeSpinner = (Spinner) findViewById(R.id.viewTypeSpinner);

ArrayAdapter viewarrayadapter = new ArrayAdapter<ConsignmentStatus>(this,
                android.R.layout.simple_spinner_item,
                ValueType.values());
        viewTypeSpinner.setAdapter(viewarrayadapter);

                viewarrayadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

通过 XML 中的字符串数组的示例：

布局：

```
<TextView android:text="@string/type_prompt"/>
<Spinner android:id="@+id/type" android:prompt="@string/type_prompt"/> 
```

价值观：

```
<string-array name="type_array">
    <item>Default</item>
    <item>Currency</item>
    <item>Experience</item>
</string-array> 
```

# forms - Symfony2：如何翻译表单类型中的自定义错误消息？

> ID：10395535
> 
> 赞同：19
> 
> 时间：2012-05-01T08:55:14.143
> 
> 标签：forms, internationalization, symfony

我需要从我的表单类型中翻译错误消息。这是我的表单类型代码：

```
class ReferFriendType extends AbstractType {

public function buildForm(FormBuilder $builder, array $options)
{
    $defaultSubject = "This is a default referral subject.";
    $defaultMessage = "This is a default referral message.";

    $builder->add('email1', 'email',array(
        'required' => true,
        'label' => 'Email 1* :',
        'attr' => array('class' => 'large_text'),
    ));
    $builder->add('email2', 'email',array(
        'label' => 'Email 2 :',
        'required' => false,
        'attr' => array('class' => 'large_text'),
    ));
    $builder->add('email3', 'email',array(
        'label' => 'Email 3 :',
        'required' => false,
        'attr' => array('class' => 'large_text'),
    ));
    $builder->add('email4', 'email',array(
        'label' => 'Email 4 :',
        'required' => false,
        'attr' => array('class' => 'large_text'),
    ));
    $builder->add('email5', 'email',array(
        'label' => 'Email 5 :',
        'required' => false,
        'attr' => array('class' => 'large_text'),
    ));
    $builder->add('subject', 'text', array(
        'data' => $defaultSubject,
        'required' => true,
        'label' => 'Subject* :',
        'attr' => array('class' => 'large_text'),
    ));
    $builder->add('message', 'textarea', array(
        'data' => $defaultMessage,
        'required' => true,
        'label' => 'Message* :',
        'attr' => array('rows' => '5', 'cols' => '40'),
    ));

}

public function getDefaultOptions(array $options)
{
    $collectionConstraint = new Collection( array(
        'fields' => array(
            'email1' => array(
                new Email(),
                new NotBlank(array(
                    'message' => 'You must enter atleast one email address for a valid submission',
                )),
            ),
            'subject' => new NotBlank(),
            'message' => new NotBlank(),
        ),
        'allowExtraFields' => true,
        'allowMissingFields' => true,
    ));

    return array(
        'validation_constraint' => $collectionConstraint,
        'csrf_protection' => false,
    );
}

public function getName()
{
    return 'referFriend';
} 
```

}

我想将 getDefaultOptions() 方法中的“您必须输入至少一个电子邮件地址才能有效提交”翻译成法语。我在 messages.fr.yml 中添加了翻译。但它没有被翻译。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-01T08:59:40.947

验证翻译转到`validators.LANG.yml`文件——而不是文件`messages.LANG.yml`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-03T11:43:42.790

替换不是在validation.yml 文件中设置的，而是由Validator 设置的。

验证器.en.yml

```
noFirstnameMinLimit: Please provide at least {{ limit }} characters 
```

验证.yml

```
Acm\AddressBundle\Entity\Address:
    properties:
        firstname:
            - Length:
                min: 3 
                minMessage: "noFirstnameMinLimit" 
```

这适用于 Symfony 2.4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T09:33:04.390

[文档](http://symfony.com/doc/current/book/translation.html#translating-constraint-messages)中有一个示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T08:23:04.700

这很容易，请参阅[http://symfony.com/doc/current/book/translation.html#translating-constraint-messages](http://symfony.com/doc/current/book/translation.html#translating-constraint-messages) 并在 /app/config/config.yml 中设置 default_locale 或使用 $this->get( 'request')->setLocale('ru');

# sql - 为什么在“BYStock_Date”附近出现错误语法错误？

> ID：10395536
> 
> 赞同：0
> 
> 时间：2012-05-01T08:55:22.220
> 
> 标签：sql, sql-server, sql-server-2005

我在这个查询中遇到了上述错误。

```
string query3 = "select Stock_Price,Stock_Quan_Met from Stock where Item_Id=(select ItemTileId from ItemTiles where ItemName=@itm) ORDER BY"+
            "Stock_Date ASC"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:57:43.413

您的查询导致

```
select Stock_Price,Stock_Quan_Met from Stock where Item_Id=(select ItemTileId from ItemTiles where ItemName=@itm) ORDER BYStock_Date ASC 
```

至少添加一个空格就可以了。

```
string query3 = "select Stock_Price,Stock_Quan_Met from Stock where Item_Id=(select ItemTileId from ItemTiles where ItemName=@itm) ORDER BY "+
            "Stock_Date ASC"; 
```

# asp.net-mvc-3 - 带有存储过程的 DDD 规范模式

> ID：10395537
> 
> 赞同：1
> 
> 时间：2012-05-01T08:55:25.353
> 
> 标签：asp.net-mvc-3, entity-framework, stored-procedures, domain-driven-design, specification-pattern

我将编写一个存储过程，它将根据查询拉回 X 条记录。该 SP 在进行搜索时可能需要锁定记录。我也在使用我知道不能使用悲观锁定的 EF。

我没有在查询本身中包含过滤逻辑，而是考虑使用规范模式，以便业务逻辑决定查询。如果我使用此模式并将规范传递到我的存储库中，该存储库又调用 SP，SP 如何知道如何处理规范？

规范可以由跨越多个表和在不同列上排序的标准组成。

在这种情况下使用规范模式是否有意义，或者我应该只使用其中定义的查询和过滤来创建 SP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:43:11.750

规范模式用于在您的应用程序中定义和执行查询 - Linq 是一种规范。存储过程用于直接在数据库服务器中定义和执行查询。这两个大多是相反的方法。

可以在存储过程中创建动态 SQL，但这会将您的逻辑移动到与 DDD 无关的数据库中。此外，允许这样的解决方案用于需要连接其他表的任意过滤器将非常复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T15:31:01.557

当前无法将规范从 C# lambda 表达式转换为可以传递给存储过程以查询数据库的结构。仅当您打算充分利用 ORM（而不是存储过程）时，规范模式才有用。

# c# - 圆和半径之间的碰撞

> ID：10395538
> 
> 赞同：0
> 
> 时间：2012-05-01T08:55:29.003
> 
> 标签：c#

我需要在这里实现碰撞检测。我这里的对象是一个球/圆和一个矩形。球在垂直移动，而矩形在水平移动。条件是如果球和矩形相互接触，那么应该引发一个事件。我和我的同事一直在尝试这样做，但没有成功。这是我在 C# 中的第一个程序，所以请多多包涵。这是我的代码：

```
public partial class Form1 : Form
{
    bool collided = false;

    Player player;
    List<Ball> balls;
    const int fps = 60;
    public Form1()
    {
        InitializeComponent();

        balls = new List<Ball>();
        Random r =  new Random();

        for(int i =0; i<1;i ++)
        {
            balls.Add(new Ball(Width, Height,r));
        }

        var task = new Task(Run);
        task.Start();

        player = new Player()
        {
            x = this.Width/2,
            y = (Height*9/10),

            xvel = 10,
            brush = Brushes.Black,
        };

    }

   protected void Run()
    {
        while (true)
        {
            for(int i = 0; i < balls.Count; i++)
            {
                balls[i].Move(this.Width);                    
            }
            this.Invalidate();
            Thread.Sleep(1000 / fps);

        }
    }

    private void Form1_Paint(object sender, PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        g.Clear(Color.White);
        for(int i = 0; i < balls.Count; i++)
        {               
            balls[i].Draw(g);              
        }            
       player.DrawPlayer(g);     

    }

//This is the part where i was trying to check collision between the circle and a ball 
    private void CheckCollision(PaintEventArgs e)
    {

        if (player.IntersectsWith(balls))
        {
            player.Intersect(balls);
            if (!player.IsEmpty)
            {
                collided = true;
                MessageBox.Show("collision detected");
            }
        }
    }           
}

public class Player
{        
    public float x, y, xvel;
    public Brush brush;

    public Player()
    {

    }

    public void DrawPlayer(Graphics g)
    {
        g.FillRectangle(brush, new RectangleF(x, y, 30,30));       
    }

    public void MovePlayerLeft(int gameWidth)
    {
        if (x > 0)
        {
            x -= xvel;
        }
    }
    public void MovePlayerRight(int gameWidth)
    {            
        if (x < gameWidth-47)
        {
            x += xvel;
        }
    }      
}

public class Ball
{

    public float x, y, yvel, radius;
    public Brush brush;
    public Ball(int gamewidth,int gameHeight,Random r)        

    {

        x = r.Next(gamewidth);
        y = r.Next(gameHeight);

        yvel = r.Next(2) + 5;

        radius = r.Next(10) + 5;
        brush = new SolidBrush(Color.Blue);

    }

    public void Move(int gameHeight)

    {                
        if (y + radius >= gameHeight)
        {
            y =  0;             
        }
        y += yvel;

    }

    public void Draw(Graphics g)
    {
        g.FillEllipse(brush, new RectangleF(x-radius,y - radius, radius * 2, radius * 2));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:00:27.270

如果您想确定一个矩形和一个圆是否相交，请对四个边中的每一个尝试此算法：

[圆线段碰撞检测算法？](https://stackoverflow.com/questions/1073336/circle-line-collision-detection)

您可以通过检查角是否在圆内来加快速度。

另外，请记住，完全在矩形内的圆（反之亦然）应该算作碰撞。

# javascript - 如何在将鼠标焦点保持在旧窗口上的情况下打开新窗口

> ID：10395539
> 
> 赞同：0
> 
> 时间：2012-05-01T08:55:35.757
> 
> 标签：javascript, html

我想在单击图像时打开一个新窗口，同时将鼠标光标保持在当前窗口上。
我尝试使用 target="_blank" 打开一个新窗口，但它会将我的光标带到新窗口
上 有什么方法可以实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:58:22.917

这就是您所说的[“弹出窗口”](http://www.htmlgoodies.com/beyond/javascript/article.php/3471241/So-You-Want-A-Pop-Under-Window-Huh.htm)（而不是弹出窗口）

主要思想是使用构建弹出窗口`window.open`并故意失去其焦点`blur()`

但是，您不能保证它会在浏览器下方甚至上方弹出。有些浏览器有极端的反弹出设置，有些则没有。其他人在标签而不是弹出窗口中打开。

# mysql - 尝试在存储过程中操作数据时显示空值

> ID：10395542
> 
> 赞同：2
> 
> 时间：2012-05-01T08:55:56.130
> 
> 标签：mysql, sql, stored-procedures, mysql-workbench

我正在我的 sql 工作台中创建一个存储过程。我正在修改地址的邮政编码以使用 7 个字符的邮政编码格式化“dn35 7tg”，即使用户没有插入空格。

首先，我找不到将变量打印到控制台屏幕的方法，这对我的情况没有帮助。

运行 Call 语句时

```
CALL usp_addsupplier('Bobs shopping mania', 'dn465th'); 
```

我除了找到以正确格式输入到数据库中的值外，我得到的只是在列中输入的 PK、Null 和 Null。

如果有人能指出我正确的方向，我会很高兴

谢谢你们。

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `usp_addsupplier`(IN SuppliersName VARCHAR(30), IN SuppliersPostCode VARCHAR(15))

BEGIN

-- Declare the change varables
DECLARE postcode VARCHAR(8) DEFAULT SuppliersPostCode;

SET postcode = SuppliersPostCode;

-- Postcode reformat -----------------------------------------------

-- Change postcode to uppercase

SET postCode = UPPER(postCode);

-- Grabs the first 4 letters and stores them in a new varable

SET new_postcode = LEFT (postCode,4);

-- Adds the space to the first 4 letters

SET new_postcode = new_postcode + ' ';

-- Add the last 3 letters to the new varable

SET new_postcode = new_postcode + RIGHT(postCode,3);

INSERT INTO tblsupplier (SupplierName, SupplierPostCode VALUES (new_name, new_postcode));

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:44:31.523

我在 MySQL 上不是很好，但是有几个错误让我跳出来。

首先，您`new_name`在插入之前从未设置过，所以这将始终为空。

其次，我不认为 MySQL 喜欢使用字符串连接`StringA + StringB`，你需要使用`CONCAT(StringA, StringB)`

第三，您的插入命令中存在语法错误（正如 eggyal 所指出的）。

但是，在单独的注释中，您的逻辑将无法正确格式化英国邮政编码。例如，M1 1AA 是完全有效的英国邮政编码：

```
M1 1AA -->  M1 1 1AA
M11AA  -->  M11A 1AA 
```

如您所见，“格式化”的邮政编码一团糟。[您可以使用INSERT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_insert)函数以更简单的方式实现此目的。英国邮政编码是可变数量的字符 (2-4)，后跟一个空格，后跟 3 个字符。

[第一步应该是清理输入（根据我的测试Fiddle](http://sqlfiddle.com/#!2/c79ae/10)假设为 @PostCode ）

```
REPLACE(@PostCode, ' ', ''); 
```

这将删除所有空格，因此原始输入是否有空格无关紧要。

然后，您需要在字符串末尾插入一个空格 3 个字符。要找到这个位置，您可以使用：

```
CHAR_LENGTH(@PostCode) - 2 
```

这给出了最终结果：

```
UPPER(INSERT(REPLACE(@PostCode, ' ', ''), CHAR_LENGTH(REPLACE(@PostCode, ' ', '')) - 2, 0, ' '))) 
```

所以这一切都可以在一个电话中完成：

```
SET @SupplierName = 'Test';
SET @PostCode = 'M 1 1 A A   ';

INSERT INTO tblSupplier (SupplierName, SupplierPostCode )
VALUES (@SupplierName, UPPER(INSERT(REPLACE(@PostCode, ' ', ''), CHAR_LENGTH(REPLACE(@PostCode, ' ', '')) - 2, 0, ' '))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:00:22.290

1.  您的`INSERT`命令中有语法错误：

    ```
    INSERT INTO tblsupplier (SupplierName, SupplierPostCode VALUES (new_name, new_postcode)); 
    ```

    应该改为

    ```
    INSERT INTO tblsupplier (SupplierName, SupplierPostCode) VALUES (new_name, new_postcode); 
    ```

2.  你需要`DECLARE`你的变量`new_name`和`new_postcode`.

3.  您需要为`new_name`.

# jquery - 使用 jQuery 从标签中提取部分文本

> ID：10395543
> 
> 赞同：1
> 
> 时间：2012-05-01T08:55:59.343
> 
> 标签：jquery

我有以下内容：

```
<a title="Home" href="#">Home<br>test</a>
<a title="Home" href="#">Home two<br>test</a>
<a title="Home" href="#">Home two three<br>test</a> 
```

我需要的是从地址标签中获取文本“家”、“家二”和“家二三”。我忘记了我可以在两者之间添加一个 br 标签。

我需要这样的东西：

```
var abc = a.html() 
```

但我知道这只会给我一切

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:01:43.273

您可以使用`.contents().filter(function() { return this.nodeType == 3; }).first().text()`来获取第一个文本节点值。这将丢弃之后的任何文本（如您的`br`和打开的）。这是一个例子：http: [//jsfiddle.net/cHhU5/](http://jsfiddle.net/cHhU5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:11:15.980

Hiya**简单演示**（针对您的具体情况进行了新更新）[http://jsfiddle.net/zrmGm/](http://jsfiddle.net/zrmGm/)

[http://jsfiddle.net/XswN4/](http://jsfiddle.net/XswN4/) **和**演示当你可以有 3 个单词时，它仍然会拿起 2 [http://jsfiddle.net/XswN4/1/](http://jsfiddle.net/XswN4/1/)

**根据您未提及的内容**更新演示，这将有助于**[http://jsfiddle.net/zrmGm/](http://jsfiddle.net/zrmGm/)（此示例将在`<br>`标记之前为您提供一切！**

 **使用`match`进一步阅读：[http ://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/](http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/)

**代码**

```
$.fn.ready(function() {

    $('a').each(function() {

        var str = $(this).html().match(/\w+\s\w+/);

        alert(str);
    });

});​ 
```

**更新代码**以获取`<br>`标记之前的所有内容

```
$.fn.ready(function() {

    $('a').each(function() {

        var str = $(this).html().split('<br>')[0]

        alert(str);
    });

});​ 
```**

# javascript - JQuery AJAX 响应未定义

> ID：10395550
> 
> 赞同：1
> 
> 时间：2012-05-01T08:56:48.667
> 
> 标签：javascript, jquery, method-call

我有一个奇怪的（可能不是我敢打赌的）问题，我有一个 JavaScript 方法来调用我所有的 ajax 调用，请参见下文。

```
function ajaxCall(url, params) {
if (params === null) {
    $.ajax({
        type: 'POST',
        url: url,
        contentType: 'application/json; charset=utf-8',
        dataType: 'json'
    }).success(function(response) {
        return response;
    }).error(function(response) {
        return response;
    });
} else {
    var data = JSON.stringify(params);
    $.ajax({
        type: 'POST',
        url: url,
        data: data,
        contentType: 'application/json; charset=utf-8',
        dataType: 'json'
    }).success(function(response) {
        return response;
    }).error(function(response) {
        return response;
    });
  }
} 
```

当我调用此方法时，我从 AJAX 调用中得到了适当的响应，一切看起来都很美好，直到我返回响应，调用返回未定义？

为了完整起见，我将包括我的调用代码。

```
var call = ajaxCall(someUrl, someParams); 
```

只是为了澄清并确保我的杂乱无章被理解**调用**在上面的例子中是未定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:02:25.743

ajax 调用`async`本质上是返回任何东西。所以当你做这样的事情时

```
var call = ajaxCall(someUrl, someParams); 
```

然后将请求发送到服务器并开始执行下一行。不将值放入调用变量中；

也有这样的代码

```
.success(function(response) {
        return response; 
```

当响应成功时， .success() 将执行一个函数，或者更确切地说是一个回调来执行，所以如果你在 this 中返回一些东西并将`async`标志放在`$.ajax()` `options`to中，它将什么都不做`true`。然后也`nothing/undefined`将被退回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:02:49.157

你不能这样做，因为 ajax 调用是异步的，
$.ajax 返回一个延迟对象，你可以使用它来获取你需要 [在这里阅读的内容](http://api.jquery.com/category/deferred-object/)

# android - 在 WebView 中嵌入自定义视图

> ID：10395568
> 
> 赞同：8
> 
> 时间：2012-05-01T08:58:35.860
> 
> 标签：android, android-layout

我有一个自定义视图，我想“嵌入”到 WebView 中。

嵌入我的意思是：

*   自定义视图在其区域拦截 onTouch 事件
*   自定义视图看起来像网页的一部分，因此它会随着周围的文本滚动

我编写了自定义视图，因此我可以根据需要对其进行编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:31:58.730

将 RelativeLayout 或 FrameLayout 作为父级。然后将 WebView 作为第一个子布局，然后将您的 CustomView 作为第二个子视图。

在此之后放置一些代码来显示和隐藏某些特定操作上的 CustomView。

它会对你有帮助。

享受。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:52:59.593

正如我在评论中所说。

我想不出一个正常的方式来处理你的工作。如果我是你，我会做的是将自定义视图放在两个`WebView`对象之间，如下所示：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView android:id="@+id/webView1
     ...
     />

    <include android:layout="custom_layout" />

    <WebView android:id="@+id/webView2
    ...
    />

  </ ScrollView> 
```

# php - 改变位置 使用php的元素

> ID：10395569
> 
> 赞同：-4
> 
> 时间：2012-05-01T08:58:37.940
> 
> 标签：php, mysql, html, parsing

我的网页中很少有这样的列表，例如它在 DIV 中

```
<div id="list">

<li id = 1> 1 </li>
<li id = 4> 4 </li>
<li id = 5> 5 </li>
<li id = 2> 2 </li>
<li id = 3> 3 </li> 
```

我想要做的是使用 html 解析器将顺序更改为这样

```
<div id="list">

<li id = 1> 1 </li>
<li id = 2> 2 </li>
<li id = 3> 3 </li>
<li id = 4> 4 </li>
<li id = 5> 5 </li> 
```

这甚至可能吗？

编辑：

谁能告诉我代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:07:04.797

使用[http://php.net/manual/ru/class.domdocument.php](http://php.net/manual/ru/class.domdocument.php)类来操作 XML\HTML

# java - 条件 vs 等待通知机制

> ID：10395571
> 
> 赞同：71
> 
> 时间：2012-05-01T08:58:42.540
> 
> 标签：java, multithreading, concurrency

与传统的等待通知机制相比，使用 Condition 接口/实现有什么优势？这里我引用 Doug Lea 的评论：

> Condition 将对象监视器方法（wait、notify 和 notifyAll）分解为不同的对象，通过将它们与任意 Lock 实现的使用结合起来，使每个对象具有多个等待集的效果。Lock 代替了同步方法和语句的使用，Condition 代替了 Object 监视器方法的使用。

我看到这是一种更面向对象的实现等待/通知机制的方式。但与前者相比有明显优势吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-01T09:12:02.797

最大的问题是等待/通知对于新开发人员来说很容易出错。主要问题是不知道如何正确处理它们可能导致晦涩的错误。

*   如果你在 wait() 之前调用 notify() 它就会丢失。
*   有时可能不清楚 notify() 和 wait() 是否在同一个对象上调用。
*   等待/通知中没有需要更改状态的内容，但在大多数情况下这是必需的。
*   wait() 可以虚假返回

Condition 将此功能包装到一个专用组件中，但它的行为大致相同。

有一个关于等待/nofity 的问题在此之前几分钟发布，还有很多很多[搜索 [java]+wait+notify](https://stackoverflow.com/search?q=%5Bjava%5D%20wait%20notify)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-02T04:10:21.240

当您使用时，`Condition: await()/signal()`您可以区分哪个对象或对象/线程组获得特定信号。这是一个简短的示例，其中一些线程（生产者）将获得`isEmpty`信号，而消费者将获得`isFull`信号：

```
private volatile boolean usedData = true;//mutex for data
private final Lock lock = new ReentrantLock();
private final Condition isEmpty = lock.newCondition();
private final Condition isFull = lock.newCondition();

public void setData(int data) throws InterruptedException {
    lock.lock();
    try {
        while(!usedData) {//wait for data to be used
            isEmpty.await();
        }
        this.data = data;
        isFull.signal();//broadcast that the data is now full.
        usedData = false;//tell others I created new data.          
    }finally {
        lock.unlock();//interrupt or not, release lock
    }       
}

public void getData() throws InterruptedException{
    lock.lock();
    try {
        while(usedData) {//usedData is lingo for empty
            isFull.await();
        }
        isEmpty.signal();//tell the producers to produce some more.
        usedData = true;//tell others I have used the data.
    }finally {//interrupted or not, always release lock
        lock.unlock();
    }       
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-10-03T12:19:43.020

上面提到的**条件接口**有很多**优点**，其中一些重要的如下：

 ****条件接口**带有**两个**额外的**方法**，它们是：

**1)boolean awaitUntil(Date deadline)throws InterruptedException ：** 导致当前线程等待，直到它被发出信号或中断，或指定的期限过去。

**2)awaitUninterruptibly() ：** 使当前线程等待，直到它发出信号。

如果当前线程进入该方法时设置了中断状态，或者在等待中被中断，则继续等待直到signalled。当它最终从这个方法返回时，它的中断状态仍然会被设置。

上述两种方法在对象类中的默认监视器中不存在，在某些情况下我们想设置线程等待的截止日期，然后我们可以通过 Condition 接口来做到这一点。

在某些情况下，我们不希望线程被中断并希望当前线程等待它发出信号，然后我们可以使用 Condition Interface 中存在的 awaitUninterruptibly 方法。

有关更多信息条件接口 Java 文档：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html#awaitUntil%28java.util.Date%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html#awaitUntil%28java.util.Date%29)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-21T15:27:50.633

为了具体说明为什么拥有多个等待集是一个优势：

如果线程在等待不同的东西，则使用等待/通知（常见的例子是一个固定大小的阻塞队列，一些线程将东西放入队列并在队列满时阻塞，而其他线程从队列中取出并阻塞当队列为空时）然后如果您使用通知，导致调度程序从等待集中选择一个线程来通知，您可能会遇到一些极端情况，即所选线程对特定情况的通知不感兴趣。例如，队列将通知向队列中添加某些内容，但如果所选线程是生产者并且队列已满，则它无法对该通知采取行动，您宁愿将其发送给消费者。使用内在锁定，您必须使用 notifyAll 以确保通知不会丢失。

但是 notifyAll 每次调用都会导致流失，每个线程都会唤醒并争夺锁，但只有一个线程可以取得进展。其他线程都在争先恐后地争夺锁，直到一次一个，它们可以获得锁并且很可能回到等待状态。它会产生很多争用而没有多大好处，最好能够使用通知并知道只通知一个线程，其中通知与该线程相关。

这是有单独的条件等待是一个很大的改进。队列可以在一个条件上调用信号，并且知道它只会唤醒一个线程，该线程专门等待该条件。

Condition的[API 文档](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)有一个代码示例，显示了对有界缓冲区使用多个条件，它说：

> 我们希望保持等待 put 线程并在单独的等待集中获取线程，以便我们可以使用在缓冲区中可用的项目或空间时仅通知单个线程的优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-23T19:29:17.940

除了其他广为接受的答案之外 - 由于 Condition 与 Lock 对象相关联，因此您可以在您的类中拥有任意组 Lock 对象（重写、读取、写入）并具有与之关联的特定条件。然后，您可以使用这些条件集根据您的实现语义同步类的不同部分。这提供了更多的灵活性和明确的行为，然后等待通知 imo**

# c# - 我的班级有什么方法可以支持序列化作为 XML 属性吗？

> ID：10395576
> 
> 赞同：0
> 
> 时间：2012-05-01T08:59:24.050
> 
> 标签：c#, xml-serialization, xml-attribute

我有一个自定义类，它只有一个字符串类型的属性。

尝试使用 XmlSerializer 将此类的对象序列化为属性会导致异常：

> XmlAttribute/XmlText 不能用于编码复杂类型

现在我知道我可以在包含类型中创建一个伪字符串属性并对其进行序列化，但是有什么办法可以让我的自定义类本质上支持它？

.Net 类是如何做到的（例如 DateTime）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:06:35.873

为此，您必须实现[IXmlSerializable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)并完全控制您的类型如何序列化/反序列化。不过，对于这样一项简单的任务，付出了巨大的努力。当涉及到 Nullable 类型时，人们大多会遇到这种情况。

# javascript - Javascript 中对象的默认值

> ID：10395580
> 
> 赞同：1
> 
> 时间：2012-05-01T08:59:42.600
> 
> 标签：javascript, node.js, object

Javascript代码

```
var a = {};
a.test += 1; //NaN
++a.test; //NaN 
```

反而

```
var a = {};
a.test = 0;
++a.test; //1
a.test += 1; //2 
```

我想知道是否有任何方法可以使第一个代码示例与第二个代码示例一样工作，即没有显式分配给 0。就像将对象的任何属性的默认值分配给 0 一样`undefined`。我正在尝试在 node.js 中执行此操作。所以，跨浏览器的东西和旧的 ECMA 规范没有问题。

```
var i;
for(i = 0; i<10; i++) {
   if(a.test) {
     ++a.test;
   } else {
     a.test = 0;
     ++a.test;
   }
   //a.test = a.test || 0; (1)
   //++a.test;
} 
```

如果可能，则可以消除上述代码中的内部 if/else 或赋值语句（1）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:05:49.547

默认情况下，Javascript 将所有新变量定义为未定义（如果未明确定义），这与您尝试定义的 Number 对象不同。所以你应该像这样使用smth：

```
for (i=0; i<10; i++) {
    a.test = a.test || 0;
    ++a.test
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T09:06:43.573

对于任意未定义的属性，没有办法做到这一点。

对于*已知*的属性名称，有*一种*方法，但**不要使用它！** ¹

```
Object.prototype.test = 0; 
```

这将为*每个*对象提供一个包含该值的隐式`.test`属性，并且当您第一次尝试修改它时，结果将存储在您自己的对象中：

```
> Object.prototype.test = 0
> a = {}
> a.test++
> a.test
1 
```

* * *

¹添加东西`Object.prototype`会破坏东西，包括`for (key in obj)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T09:07:26.060

这就是原型在 javascript 中派上用场的地方：

```
function Demo() {
}
Demo.prototype.x = 0; 
```

```
> a = new Demo();
> a.x += 1
> a.x
1 
```

```
> b = new Demo()
> b.x
0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:03:41.120

在第一个代码中，你不能。添加到非数字或 NaN 值的任何数字将始终导致`NaN`

```
var a = {};
a.test += 1; // undefined + 1 = NaN
++a.test;    // ++(undefined) = NaN 
```

至于内`if`

```
for(i = 0; i<10; i++) {
   a.test = a.test || 0; //use existing value, or if undefined, 0
   ++a.test;             //increment
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T09:16:41.913

我认为这样做可以：

```
var a = {"test":0};
a.test += 1; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-01T09:07:09.977

使用标准 JS 不可能做你所要求的。除非你原型我猜？但我对原型没有经验。而且我不认为原型适用于 Node.js

这样做的原因是因为js不是类型化语言（即我们只使用var来声明变量，而不是int a或string b），所以为了使用++运算符，需要通过给变量赋予类型任务。

希望有帮助

# php - 如果您接受用户提交的包含 HTML 的内容，使用有效 HTML 生成自动摘录的最安全方法是什么？

> ID：10395581
> 
> 赞同：0
> 
> 时间：2012-05-01T08:59:44.933
> 
> 标签：php

如果您接受包含 HTML 的用户提交的内容，您将如何生成自动摘录（使用 PHP）但保持 HTML 有效？

例如，如果您选择前 200 个字符，您可能会错过一个结束标签，并且计算标签并不是很简单。

我见过一些图书馆，但它们非常庞大，因为它们处理了大量的事情。我只需要它来生成自动摘录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:44:19.317

如果你想确保有效性，你将不得不计算标签，我猜。

限制 strip_tags 接受的标签将使检查变得不那么复杂。

首先，您应该检查指定位置 (200) 处的字符是否是标签的一部分。我认为，最简单的方法是检查标签打开器（<）是否出现在标签关闭器（>）之前的位置左侧。

如果您在标签内，则必须确定它是否是结束标签。如果是这样，您应该将限制扩展到“>”的下一次出现。如果没有，您将限制减少到标签开启器的最后一次出现。

现在您唯一的问题是检查字符串末尾是否缺少结束标记。计算允许的标签（开始和结束）会给你一个提示，你必须在最后添加哪些结束标签，以及它们的数量。

这给您留下了确定这些“更正”标签的顺序的问题。有了一点逻辑，您也应该能够做到这一点。

有一个不错的

斯蒂芬

# html - html 验证器与 SU:BADGE

> ID：10395588
> 
> 赞同：0
> 
> 时间：2012-05-01T09:00:58.643
> 
> 标签：html

如何解决这个问题

```
element "SU:BADGE" undefined <su:badge layout="5"></su:badge> 
```

我在我的网站上使用 HTML 4.01 Transitional ...

徽章来自 stumbleupon.com 网站

谢谢你 。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:06:55.597

由于此类标记在 HTML 4.01 中无效，因此验证器只是按照您的要求执行操作：报告任何可报告的标记错误。

此类错误消息可能令人不安的唯一实际原因是，如果它们有很多，您可能会不小心错过注意到*其他*一些错误消息，这些错误消息与您的标记*无意中*偏离 HTML 4.01 的结构有关。如果这是一个问题，请考虑编写[自定义 DTD](http://www.cs.tut.fi/~jkorpela/html/own-dtd.html)。它需要对 SGML 有一定的了解，但一般来说验证器的使用也是如此，不是吗？

另一方面，您可能决定避免使用那些无法使用有效 HTML 完成如此简单事情的人建议的标签。`meta`有许多方法可以以不影响可见外观但可以通过搜索特定结构（例如标签）的程序检索的方式将信息放在网页上。他们决定采用一种给希望使用验证器的作者带来问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:04:43.813

你没有。

验证很好（特别是作为开发时的健全性检查），但如果你不使用有效标记，那么你无能为力，如果你*需要*无效标记（例如因为你使用第三方 API），那么验证就会停止要相关。

或者，您可以将页面作为 XML 而不是 HTML 4 提供，并定义适当的`su`XML 命名空间。但由于这意味着某些浏览器不再正确显示您的页面，这更多是理论上的可能性。

# c# - TextChanged 事件不起作用。

> ID：10395594
> 
> 赞同：1
> 
> 时间：2012-05-01T09:01:47.503
> 
> 标签：c#, textbox, textchanged

我在表单中有一个文本框，我想检测文本何时更改，但我发现的代码没有给我带来任何乐趣。

我可能在比例中遗漏了一些东西，或者你之前必须定义的东西。

这是我的代码：

```
private void tbxparkingTimesS1_TextChanged(Object sender, EventArgs e)
{
     MessageBox.Show("You are in the ToolStripItem.TextChanged event.");
} 
```

感谢您对这个小问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:17:40.743

要将 TextChanged 事件连接到代码中的特定方法，请执行以下操作

*   单击表单内的文本框
*   打开属性窗口（按 F4 或菜单 View -> Property Window ）
*   选择活动页面（闪电图标）
*   双击 TextChanged 属性行
*   将您的代码插入到 Visual Studio 为您构建的模板中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:05:17.983

您是否已将事件处理程序分配给文本框？

通常这将由 Visual Studio “在幕后”完成 - 结果是 .designer 文件中的额外代码行。

就像是：

```
this.tbxparkingTimesS1.TextChanged += new System.EventHandler(tbxparkingTimesS1_TextChanged); 
```

（自从我完成网络表单以来已经有一段时间了 - 所以可能会稍微偏离）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:16:54.030

双击文本框，它将为您生成文本更改事件。

```
 private void tbxparkingTimesS1_TextChanged(object sender, EventArgs e)
    {
        // implement your code here. 
    } 
```

当您双击时，VS 将在您的 Designer.cs 文件中创建事件处理程序，如下所示

```
 this.tbxparkingTimesS1.TextChanged += new System.EventHandler(this.tbxparkingTimesS1_TextChanged); 
```

您可以通过使用属性窗口事件或在后面的代码上创建事件来执行相同的操作。

# validation - 模型生成后如何添加验证规则来推动模型？

> ID：10395595
> 
> 赞同：2
> 
> 时间：2012-05-01T09:01:48.153
> 
> 标签：validation, propel

生成模型后，如何将验证规则添加到我的列中。我知道你可以扩展 propel 的验证，但是在我从模式生成这些模型之后，我没有看到将这些验证规则应用于我的模型列的选项。

为了澄清，我知道您在实际架构中添加了这些规则，但我不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:19:14.933

在任何推进生成的主类（例如用户）中，您可以覆盖 doValidate($column=null) 方法。请参阅下面的示例...返回逻辑部分可能需要改进。

```
public function doValidate($columns = null){
    $parentErrors = parent::doValidate($columns);
    $validationErrors = array();
    if(mb_strlen($this->getFirstName()) == 0){
        $message = '...';
        $vf = new ValidationFailed(UserPeer::FIRST_NAME, $message);
        $validationErrors[] = $vf;
    }

    if(is_array($parentErrors)){
        if(!empty($validationErrors)){
            $validationErrors = array_merge($parentErrors, $validationErrors);
        }else{
            $validationErrors = $parentErrors;
        }
        return $validationErrors;
    }elseif($parentErrors === true){
        if(empty($validationErrors)){
            return true;
        }else{
            return $validationErrors;
        }
    }else{
        throw UnexpectedValueException('Unexpected validation state.');
    }
} 
```

之后你可以运行 $validationErrors = $user->validate(); 应用程序中的任何位置并检查返回值。

我希望这回答了你的问题。

# mysql - MySQL 约束使用固定的“硬编码”值——这可能吗？

> ID：10395596
> 
> 赞同：0
> 
> 时间：2012-05-01T09:01:59.077
> 
> 标签：mysql, foreign-keys, constraints, referential-integrity

我有一个表“comments”，其中包含一个基本的 auto-inc PK“id”字段，还有一个“type”字段。在另一个表中，我希望引用完整性将约束应用于 comments.id 以及“类型”，使用类型值的固定值。

示例：在表“question_comments_rate”中，我想强制“comment_id”作为“comments”表中的字段“id”存在[这是简单的部分]并且“type”列等于“question”。

这存在吗？我该如何编写这个约束声明？

它就像一个“条件约束”——不仅“comment_id”字段必须作为“comments.id”存在，而且“comments”表中的这个“id”需要是“type”等于“question”的行"（或其他指定值）...

我希望问题很清楚。通过您的帮助/反馈，我可能会更清楚。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:03:51.047

这将是一个`CHECK`约束，[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)对此进行了说明：

> 该`CHECK`子句被所有存储引擎解析但忽略。

您可以改为在插入/更新时创建触发器以强制执行完整性检查。

或者，在您的情况下，您可以设置`type`列的数据类型[`ENUM('question')`](http://dev.mysql.com/doc/refman/5.5/en/enum.html)，使其不能采用任何其他值（除了`''`，所有`ENUM`类型都可以是 - 例如，如果它们设置为无效值）。

# jakarta-ee - JBoss AS 7.1 - 使用@Schedule 注解运行计划

> ID：10395597
> 
> 赞同：6
> 
> 时间：2012-05-01T09:02:02.310
> 
> 标签：jakarta-ee, jboss, ejb, jboss7.x, scheduler

任何人都知道如何使 @Schedule 注释在 JBoss AS 7 上工作？

我知道在 Glassfish-3.1.2 上它可以开箱即用。

我试试这个：

```
@ManagedBean
@Stateless(name="ImportStatementSchedule")
public class ImportStatementSchedule implements Serializable{
private Logger _log = Logger.getLogger(this.getClass());

    @Schedule(minute="*")
    public void executeImport(){
        _log.info("Scheduled task started");
    }

} 
```

我希望每分钟都会收到日志消息，但什么也没有；）

我检查了这些论坛主题，但没有任何帮助：

[https://community.jboss.org/message/623574](https://community.jboss.org/message/623574)

[https://community.jboss.org/message/621893](https://community.jboss.org/message/621893)

[https://community.jboss.org/message/637567](https://community.jboss.org/message/637567)

A 拥有 JBoss AS 7.1.1-Final

也许我忘记了什么，请任何人指出我正确的方式？

**更新：**

我知道 JBoss 将我的 EJB 注册到 JNDI ：

```
11:07:05,548 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-6) JNDI bindings for session bean named ImportStatementSchedule in deployment unit deployment "finadv.war" are as follows:

    java:global/finadv/ImportStatementSchedule!finadv.bean.ImportStatementSchedule
    java:app/finadv/ImportStatementSchedule!finadv.bean.ImportStatementSchedule
    java:module/ImportStatementSchedule!finadv.bean.ImportStatementSchedule
    java:global/finadv/ImportStatementSchedule
    java:app/finadv/ImportStatementSchedule
    java:module/ImportStatementSchedule 
```

**更新2**

如评论中所述已解决

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T11:04:50.390

定时器服务是 EJB 服务。`ImportStatementSchedule`应该是一个`@Stateless`或`@Singleton`会话 bean。从 EJB 3.1 规范，第 18.2 节：

> 对于自动创建的定时器，timeout 方法可以是带有 Schedule 注解的方法。可以为无状态会话 bean、单例会话 bean、消息驱动 bean 和 2.1 实体 bean 创建计时器。不能为有状态会话 bean 创建计时器。

`INFO`日志语句具有误导性。JBoss 不注册 EJB。`@ManagedBean`它只是使用注释（Javadoc）定义的相同命名方案：

> [..] 托管 Bean 名称在 Java EE 模块中必须是唯一的。对于每个命名的托管 Bean，Java EE 容器必须使用与 EJB 组件相同的命名方案，在 JNDI 中提供以下条目。在应用程序命名空间中：
> 
> `java:app/<module-name>/<bean-name>`
> 
> 在包含托管 Bean 的模块的模块命名空间中：
> 
> `java:module/<bean-name>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T14:47:58.447

我可以补充一下，如果你写

`@Schedule(minute="*")`

它只会在午夜触发。因为小时参数是默认值：**0**。

尝试： 或类似的东西。就我而言，它有所帮助。 `@Schedule(minute = "*/1", hour = "*")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T17:03:41.553

您必须指定**hours**，尝试：

```
@Schedule(hour="\*", minute="\*") 
```

# assembly - 16bit/ASM：使用 int 21h 的简单函数？

> ID：10395608
> 
> 赞同：1
> 
> 时间：2012-05-01T09:02:53.740
> 
> 标签：assembly, x86, dos

为什么我的“show_msg”功能不能正常工作？

```
org 100h

push str1
call show_msg
pop ax

mov ah, 4Ch
int 21h

show_msg:
mov ah, 9
mov bx, sp ;in 16bit bx is the only register that can act as a pointer (besides di and si)
mov dx, [bx]
int 21h
ret

str1 db 'Hello world!$' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:08:47.893

很可能是因为`[sp]`在进入函数时包含返回代码的地址，在这个程序的情况下，它将是`pop ax`开头的任何地址。尝试更改`mov dx, [bx]`为`mov dx, [bx+2]`，这将导致在函数条目之前推送的参数的值被检索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:47:23.193

您的代码存在根本缺陷。

首先，bp 也可以用作指针。

您应该使用 bp 寄存器而不是 bx 寄存器来索引堆栈。[bp] 形式默认使用 SS 段，而 [bx] 形式使用 DS 作为默认段。这意味着如果 DS != SS 如果您使用 [bx] ，您将**不会**读取压入堆栈的值，而是使用其他一些未定义的值。

所以，正确的版本是：-

```
show_msg:
  mov bp,sp
  mov ah,9
  mov dx,[bp+2]
  int 21h
  ret 
```

如果您的函数需要一些本地存储，那么一般形式是：-

```
function:
  mov bp,sp
  sub sp,amount of space for local storage

  some code, parameters are [bp+offset], local data are [bp-offset]

  mov sp,bp
  ret 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-15T16:19:27.587

该程序将无法正常运行，因为 DX 没有指向“str1”的地址。

首先，将 str1 的地址压入 SP 指向的堆栈。这没问题。

但是当你调用一个函数“show_str”来打印str1之后，SP将不再指向str1，因为原来IP的值被压入了SP指向的堆栈，现在。

你没有意识到 SP 的变化，仍然试图将 SP 的值传递给 DX，DX 应该存储要打印的字符串的地址。

我的建议是你应该使用“正常”的风格来编写程序，因为除非你在探索语言本身的秘密，否则这会让我们的生活更轻松。

这是我的程序。

```
 ;file: showmsg.asm (.COM)
    ;nasm -fbin showmsg.asm -o showmsg.com 

    org 0x100
    mov ax, cs
    mov ds, ax

    mov ax, str1     ;Transmit parameter to show_msg through AX
    call show_msg

mov ax, 4c00h
int 21h

show_msg:            ;the address offset of the string is stored in ax
    mov dx, ax       ;DS:DX=string address
    mov ax, 0900h    ;AH=09 
    int 21h
    ret
str1: db "Hello, world!$" 
```

# javascript - Ben Alman 的 postMessage，浏览器窗口之间的双向通信

> ID：10395609
> 
> 赞同：2
> 
> 时间：2012-05-01T09:02:56.257
> 
> 标签：javascript, jquery, postmessage

所以我一直在研究如何在支持 IE7+、Chrome 和 Firefox 的同一域中的浏览器窗口之间进行一些双向通信。我不喜欢使用 cookie 轮询，[Ben Alman 似乎有 iframe 的答案](http://benalman.com/projects/jquery-postmessage-plugin/)，但是当我转换为 时`open.window()`，我没有运气。

这段代码可以双向工作吗（目前它只能在父母之间工作，而在 IE 中根本不起作用）？还是有其他非 cookie、IE 支持插件/代码示例？欢迎任何建议

index.html（删除逗号和下面的注释行，使其朝一个方向工作）

```
<html>
  <head>
    <!-- index.html -->
    <title>postmessage Test</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"                   type="text/javascript"></script>
    <script type="text/javascript" src="ba-postmessage.js"></script>    

    <script type="text/javascript">
    var target = window.open("http://localhost/child.html",'popupWindow','toolbar=no,directories=no,status=no,menubar=no,width=400,height=300,screenX=100,screenY=100,top=100,left=100');   

    function post(message) {
        $.postMessage(message,'http://localhost/child.html',target);
    }

    $(document).ready(function() 
    {
        $.receiveMessage(function(e)  {
            $("#msg").append('<pre> Received: '+e.data+' </pre>');
        },
        'http://localhost/child.html'  // remove this line and it works in 1 direction.
        );
    });
    </script>

  </head>
  <body>
    Parent Window<br/>
    <button class="send-button" onclick="post('parents message');">Post message</button>
    <br/>Response:<br/>
    <div id="msg"></div>

  </body>
</html> 
```

child.html

```
<html>  
  <head>
    <!-- child.html -->
    <title>postmessage Child</title> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"                   type="text/javascript"></script>
    <script type="text/javascript" src="ba-postmessage.js"></script>

    <script type="text/javascript">
    var target = window.parent;

    function post(message) {
        $.postMessage(message,'http://localhost',target);
    }

    $(document).ready(function() 
    {
        $.receiveMessage(function(e)  {
            $("#msg").append('<pre> Received: '+e.data+' </pre>');
        },
        'http://localhost'
        );
    });
    </script>

  </head>
  <body>
    Popup Window<br/>
    <button class="send-button" onclick="post('childs message');">Post message</button>
    <br/>Response:<br/>
    <div id="msg"></div>

  </body>
</html> 
```

附加：我刚刚尝试了privateland.com BNC 连接器 - 基于 tcp/cookie 的通信，在 Chrome、Firefox 和 Opera 中运行良好，但在 IE8 中非常慢 - 适合间歇性通信，不适合持续通信。

```
<html>
  <head>
    <!-- index.html -->
    <title>postmessage Test</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"       type="text/javascript"></script>
    <script type="text/javascript" src="BNCConnector-compr.js"                          type="text/javascript"></script>

    <script type="text/javascript">
    var target = window.open("http://localhost/child.html",'popupWindow','toolbar=no,directories=no,status=no,menubar=no,width=400,height=300,screenX=100,screenY=100,top=100,left=100');
    var connectorInstance;

    BNCConnectorMonitor.start();

    function post(message) {
        connectorInstance.sendData('CH',message);
    }

    connectorInstance = new BNCConnector("PA");

    connectorInstance.listen = function(who,msg){
        $("#msg").append('<span>RECEIVED: '+who+' says: '+msg+'</span><br/>');
    };
    connectorInstance.onerror = function(type,o){
        $("#msg").append('<span>ERROR: '+o[0]+' to '+o[1]+' caused by '+type+'</span><br/>');
    };
    connectorInstance.onsent = function(o){
        // $("#msg").append('<span>SUCCESS SENDING TO IP: '+o[1]+" says: "+o[0]+'</span><br/>');
    };

    </script>

  </head>
  <body>
    Parent Window<br/>
    <button class="send-button" onclick="post('parents message');">Post message</button>
    <br/>Response:<br/>
    <div id="msg"></div>

  </body>
</html> 
```

* * *

```
<html>  
  <head>
    <!-- child.html -->
    <title>postmessage Child</title> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"       type="text/javascript"></script>
    <script type="text/javascript" src="BNCConnector-compr.js"                          type="text/javascript"></script>

    <script type="text/javascript">
    var connectorInstance;

    BNCConnectorMonitor.start();

    function post(message) {
        for(var i=0;i<10;i++) {
            connectorInstance.sendData('PA',message);
        }
    }

        connectorInstance = new BNCConnector("CH");

        connectorInstance.listen = function(who,msg){
            $("#msg").append('<span>RECEIVED: '+who+' says: '+msg+'</span><br/>');
        };
        connectorInstance.onerror = function(type,o){
            $("#msg").append('<span>ERROR: '+o[0]+' to '+o[1]+' caused by '+type+'</span><br/>');
        };
        connectorInstance.onsent = function(o){
            // $("#msg").append('<span>SUCCESS SENDING TO IP: '+o[1]+" says: "+o[0]+'</span><br/>');
        };
    </script>

  </head>
  <body>
    Popup Window<br/>
    <button class="send-button" onclick="post('childs message');">Post message</button>
    <br/>Response:<br/>
    <div id="msg"></div>

  </body>
</html> 
```

# jpa - 如何从基于其他两个表JPA的表中获取记录

> ID：10395615
> 
> 赞同：0
> 
> 时间：2012-05-01T09:03:31.433
> 
> 标签：jpa, many-to-many

我正在尝试在 JPA 中做一些简单的事情。

我有一张桌子

```
 BusinessId    name
------------  ------ 
     1         Joe
     2         bob 
```

和表产品：

```
 productID     name
------------  ------ 
     1         Pen
     2         paper 
```

因为它们是一对多关联的，所以我创建了另一个表 businessHasProductID：

```
 BusinessId    productID
------------  ----------- 
      1            1
      1            2
      2            2 
```

现在我想从 businessHasProductID 中选择 BusinessId 和 productID，其中 BusinessId 的名称 = 'x'，productID 的名称 = 'y'。

我构建了表，然后创建了实体类（来自 netBeans 中的向导）。我知道如何获取 Businesses.name = 'x' 的“企业”表，并且我知道如何获取 Products.name = 'y' 的“产品”表。但我想结合这些结果并获取 ID。

我试着做：

```
Query query = getEntityManager().createQuery("
              SELECT b FROM businessesHasProductID WHERE b.BusinessId IN 
                  (SELECT t0.BusinessId FROM Businesses t0 WHERE t0.BusinessId = 'x')
                AND b.productID IN
                  (SELECT t1.productID FROM Products t1 WHERE t1.productID = 'y')
              "); 
```

那是行不通的。它抱怨 IN 包含无效数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:12:16.867

如果我理解正确，您希望获取`[bId, pId]`连接表中存在的所有元组，其中业务名称`bId`为“x”，产品名称`pId`为“y”。

如果是这样，下面的查询应该做你想做的事：

```
select business.businessId, product.productId 
from Business business
inner join business.products product
where business.name = 'x'
and product.name = 'y' 
```

# wpf - 鼠标聚焦在 wpf 中未更新的文本框上

> ID：10395625
> 
> 赞同：0
> 
> 时间：2012-05-01T09:04:48.857
> 
> 标签：wpf, data-binding, textbox

我有两个文本框。这些值是从属性绑定的：

```
<TextBlock Text="Input 1" Margin="3,3,3,3" FontWeight="Normal" Foreground="#FFF4E7CA"/>

<TextBox Text="{Binding Processing.Input1}" Margin="3,3,6,3" FontWeight="Normal"/>

<TextBlock Text="Input 2" Margin="3,3,3,3" FontWeight="Normal" Foreground="#FFF4E7CA"/>

<TextBox Text="{Binding Processing.Input2}" Margin="3,3,6,3" FontWeight="Normal"/> 
```

更改第一个文本框中的值后，我按下“保存”按钮。Textbox1 的值不会在保存的结果上更新。仅当我在编辑到文本框 2 后将鼠标焦点从文本框 1 移动时，结果才会更新。如何立即将文本框更新为属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:29:25.827

`TextBox`[默认情况下更新LostFocus](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx)上的绑定源。`TextBox`按“保存”按钮似乎不会失去焦点。

您可以在每次更改后立即更新绑定源：

```
Text="{Binding Processing.Input1, UpdateSourceTrigger=PropertyChanged}" 
```

或在“保存”按钮单击上更新绑定源：

```
// textBox1 is your Textbox1
BindingExpression be = textbox1.GetBindingExpression(TextBox.TextProperty);
be.UpdateSource(); 
```

# php - 处理空值和 JSON

> ID：10395629
> 
> 赞同：2
> 
> 时间：2012-05-01T09:05:22.760
> 
> 标签：php, mysql, json

我正在尝试使用`IFNULL()`函数来防止查询结果为空，因为当结果转换为 JSON 数组时，空值会导致错误。

```
$sql = mysql_query("select IFNULL(status,'nothing'),
    foodname from disease_food,
    food where disease_food.Disease_ID=$d1 or disease_food.Disease_ID=$d2 and    
    Food_ID=$res1 and disease_food.Food_ID=food.ID");

while($row=mysql_fetch_assoc($sql)) {
    $output[] = $row;
}

$data = json_encode($output);
print($data);
mysql_close(); 
```

错误：（当结果为空时）

`Undefined variable: output`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:24:31.807

我认为你有一个错字。在状态之前有一个 ' 缺失。

```
 IFNULL(status,'nothing') 
```

# css - 在 Rails 3.1 中调用样式表

> ID：10395636
> 
> 赞同：1
> 
> 时间：2012-05-01T09:05:50.267
> 
> 标签：css, ruby-on-rails-3

我不确定这是否是在 rails 3.1 中做事的最佳方式，但我正在尝试组织我的 CSS，使其不在一个大文件中，即 application.css，所以我正在创建页面特定视图并像这样调用

```
<%= stylesheet_link_tag    "application", "gallery", "home" %> 
```

现在我注意到的是，无论您在哪个页面上，它都会调用样式表中的所有 css？有没有办法只调用与该页面相关的 CSS，或者说只调用应用程序和画廊页面？或者我是不是走错了路，有没有更有效的方法？

所有建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:40:44.097

在 application.css 你得到

```
*= require_self
*= require_tree . 
```

删除该行`*= require_tree .`，您将不再让它自动拖入其他所有内容。

# mysql - mysql fluent nhibernate问题nvarchar

> ID：10395644
> 
> 赞同：0
> 
> 时间：2012-05-01T09:07:03.350
> 
> 标签：mysql, nhibernate, fluent-nhibernate

我已经从 sql server 2005 切换到 mysql，这并不是一个真正的问题。

我对 sql server 中存在的 (n)varchar 有一个小问题。通常我用过：

```
mapping.Map(x => x.bla).Length(10000); 
```

将 bla 设置为 nvarchar(max)。这在mysql中有效吗？我相信mysql中没有nvarchar，你必须使用这样的东西：

```
alter table sometable modify bla VARCHAR(21844) CHARACTER SET utf8 
```

将现有列更新为“nvarchar(max)”。这是正确的，因为我得到：

“行大小太大。所用表类型的最大行大小”

如果我使用：

```
alter table sometable modify bla VARCHAR(1000) CHARACTER SET utf8 
```

一切正常，但我不确定这是否在 mysql 中实现了“nvarchar(max)”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:12:48.280

如[手册中所述](http://dev.mysql.com/doc/refman/5.5/en/column-count-limit.html)：

> 每个表（无论存储引擎如何）的最大行大小为 65,535 字节。存储引擎可能会对此限制施加额外的限制，从而减少有效的最大行大小。
> 
> 最大行大小限制了列的数量（可能还有大小），因为所有列的总长度不能超过这个大小。例如，`utf8`字符每个字符最多需要三个字节，因此对于一[`CHAR(255) CHARACTER SET utf8`](http://dev.mysql.com/doc/refman/5.5/en/char.html)列，服务器必须为每个值分配 255 × 3 = 765 个字节。因此，一个表不能包含超过 65,535 / 765 = 85 个这样的列。
> 
> 可变长度列的存储包括长度字节，这些字节根据行大小进行评估。例如，一[`VARCHAR(255) CHARACTER SET utf8`](http://dev.mysql.com/doc/refman/5.5/en/char.html)列需要两个字节来存储值的长度，因此每个值最多可以占用 767 个字节。

因此，您必须考虑表中存在哪些其他列并计算可用的最大大小`VARCHAR`。

但是，如果您需要长文本值的空间，为什么不使用[`TEXT`](http://dev.mysql.com/doc/refman/5.5/en/blob.html)不受此限制约束的数据类型（它们贡献的 9 到 12 个字节除外）？

# c++ - 映射和子字符串

> ID：10395651
> 
> 赞同：1
> 
> 时间：2012-05-01T09:07:25.927
> 
> 标签：c++, stl, map

我想对字符串进行排序。最简单的方法是将所有足够的东西放入地图中。为了有效地使用内存，我将后缀传递为 (str+i)，其中 str 是 char*，i 是位置后缀开头。但是，我发现 map 不足以对这些进行排序。这是一个例子

```
typedef std::map < char*, int,Comparator> MapType;
MapType data;

// let's declare some initial values to this map
char* bob=(char* )"Bobs score";
char* marty=(char* ) "Martys score";
data.insert(pair<char*,int>(marty+1,15));
data.insert(pair<char*,int>(bob+1,10));
MapType::iterator end = data.end();
for (MapType::iterator it = data.begin(); it != end; ++it) {
    std::cout << "Who(key = first): " << it->first;
    std::cout << " Score(value = second): " << it->second << '\n';
} 
```

输出是

```
    Who(key = first): obs 得分 Score(value = second): 10
    Who(key = first): artys score(value = second): 15

```

但是，`strcmp`用于比较字符串的标准函数对于 bob+1 和 marty+1 可以正常工作。它说 marty+1 小于 bob+1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:10:40.647

将按的`map`地址排序`char*`，而不是按字典顺序排序。将键更改为 a`std::string`或定义比较器。

编辑：

看起来好像您已尝试定义 a`Comparator`但未发布它的定义。这是一个例子：

```
#include <iostream>
#include <map>
#include <string.h>

struct cstring_compare
{
    bool operator()(const char* a_1, const char* a_2) const
    {
        return strcmp(a_1, a_2) < 0;
    }
};

typedef std::map<const char*, int, cstring_compare> cstring_map;

int main()
{
    cstring_map m;

    m["bcd"] = 1;
    m["acd"] = 1;
    m["abc"] = 1;

    for (cstring_map::iterator i =  m.begin(); i != m.end(); i++)
    {
        std::cout << i->first << "\n";
    }

    return 0;
} 
```

输出：

```
美国广播公司
acd
bcd

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:30:12.983

定义一个自定义比较器，例如

```
class compare_char { 
   public:
      bool operator()(const char* lhs, const char* rhs) { return strcmp(lhs, rhs); } 
}; 
```

使用此比较器而不是您当前拥有的任何东西来定义您的地图。或者，使用具有与值一起使用的比较运算符的键类型的映射， std::string 更适合您。目前，您有一个使用 char* 作为比较 char* 类型的键的地图，即。指针的值，而不是内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:32:58.463

您应该添加您正在使用的比较器类或函数，因为这可能是您的错误的来源。
strcmp 和地图比较函数之间存在细微差别。

如果 a == b，strcmp 返回 0，如果 a < b，则返回 -1，如果 a > b 则返回 1
comp 返回 true 是 a < b，否则返回 false。

实现比较功能的正确方法如下：

```
bool operator() (char* lhs, char* rhs) const
{
        return strcmp(lhs,rhs) < 0;
} 
```

# html - 最后申请哪一个？

> ID：10395653
> 
> 赞同：0
> 
> 时间：2012-05-01T09:07:34.503
> 
> 标签：html, css, wysiwyg

最后申请哪一个？

*   来自外部文件的 CSS
*   内联 CSS

我有 CSS 风格的赛车情况。我为某些元素赋予了一些样式，但用户可以选择通过所见即所得编辑器编辑它们，并且出于持久性原因，我必须将所见即所得生成的那些内联 CSS 存储在数据库中。那么当用户在浏览器中再次渲染文件时，最后会应用哪个 CSS 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:16:46.560

假设相同的特异性并且没有规则，那么 a和元素`!important`之间没有区别。它们只是包含样式表的不同语法。`<link>``<style>`

```
<link>          <!-- applied 1st --> 
<style></style> <!-- applied 2nd -->
<link>          <!-- applied 3rd --> 
```

`style` **属性**实际上具有无限的特异性，因此最后应用（`!important`规则除外）。

另请参阅[级联](http://www.w3.org/TR/CSS21/cascade.html#cascade)

# ajax - ModX 革命中的前端 Ajax

> ID：10395660
> 
> 赞同：1
> 
> 时间：2012-05-01T09:08:38.610
> 
> 标签：ajax, modx-revolution

在 ModX Revolution 中实现前端 Ajax 功能的正确方法是什么？我喜欢连接器和处理器的想法，但由于某种原因，它们仅用于后端 -`modConnectorResponse`检查用户是否登录并返回“拒绝访问”，如果他没有。

将片段插入资源并通过资源 URL 调用它似乎是一次性解决方案，但这对我来说并不合适。

那么如何为前端获得安全的类似连接器的功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:34:53.873

因此，正如[**边界**函数所说](https://stackoverflow.com/a/10428906/553408)，这是不可能的，ModX 开发人员建议使用包含单个片段的资源。但是对于那些不顾开发者意愿寻找类似Connector的功能的人来说，可能会有一个猜猜谁做出的解决方案——ModX核心开发者在[Gallery extra中](http://modx.com/extras/package/gallery)**拆分**。在调用之前，有一个伪造授权的代码：`connector.php``handleRequest()`

```
if ($_REQUEST['action'] == 'web/phpthumb') {
    $version = $modx->getVersionData();
    if (version_compare($version['full_version'],'2.1.1-pl') >= 0) {
        if ($modx->user->hasSessionContext($modx->context->get('key'))) {
            $_SERVER['HTTP_MODAUTH'] = $_SESSION["modx.{$modx->context->get('key')}.user.token"];
        } else {
            $_SESSION["modx.{$modx->context->get('key')}.user.token"] = 0;
            $_SERVER['HTTP_MODAUTH'] = 0;
        }
    } else {
        $_SERVER['HTTP_MODAUTH'] = $modx->site_id;
    }
    $_REQUEST['HTTP_MODAUTH'] = $_SERVER['HTTP_MODAUTH'];
} 
```

为我工作。只需要用`if`我自己的行动替换第一个条件。

**更新**：我忘了提到您需要`&ctx=web`在 AJAX 请求中传递参数，因为连接器的默认上下文是“ `mgr`”，并且匿名用户不会通过策略检查（除非您`mgr`为匿名用户设置对“”上下文的访问权限）。

而且我在这里发布的来自 Gallery extra 的代码似乎检查了一些对我来说不适用于匿名前端用户的会话内容（并且仅在我登录到后端时才有效），所以我将其替换为下一个：

```
if (in_array($_REQUEST['action'], array('loadMap', 'loadMarkers'))){
    $_SESSION["modx.{$modx->context->get('key')}.user.token"] = 1;
    $_SERVER['HTTP_MODAUTH'] = $_REQUEST['HTTP_MODAUTH'] = 1;
} 
```

我不知道这段代码是否 100% 安全，但是当匿名用户调用它时，他似乎没有登录到 Manager，当管理员登录并从后端调用操作时，他不是强行注销。这对我来说似乎足够安全。

这个解决方案仍然是可移植的（即可以嵌入到可分发的Extra中），但是对于严肃的项目应该更加认真地研究安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:46:30.830

据我所知，目前这在 modX 中是不可能的。它已经[在 modx 论坛上讨论过，](http://forums.modx.com/thread/?thread=31535)并[在此处作为错误提交](http://tracker.modx.com/issues/631)，但看起来没有人在处理它。

第二个链接中还有两种可能的解决方法。就个人而言，我更倾向于将连接器功能放入资产文件夹以保持资源树的清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T21:14:48.990

这里对 Gallery 中使用的技术有更完整的解释：

[http://www.virtudraft.com/blog/ajaxs-connector-file-using-modxs-main-index.php.html](http://www.virtudraft.com/blog/ajaxs-connector-file-using-modxs-main-index.php.html)

它允许您创建连接器来运行您自己的处理器或内置 MODX 处理器，而无需创建资源。

# jquery - jQuery form.validate() 回调无法执行 ($.ajax)

> ID：10395662
> 
> 赞同：0
> 
> 时间：2012-05-01T09:08:45.647
> 
> 标签：jquery, ajax, jquery-validate

我目前遇到了 HTML 表单的问题。我正在尝试验证表单（规则在 HTML 5 代码中），然后使用 $.ajax 调用将其提交给 php 脚本进行处理。目的是确保在提交之前填写各个字段，并使用 ajax 打印任何其他错误（用户存在、电子邮件正在使用、Web 开发人员一无所知等）。否则，如果一切正常，则意味着隐藏表单并显示确认消息。

使用下面的代码，验证可以正常工作，但 $.ajax 调用不能 - 表单的默认操作会触发。但是，如果我注释掉 validate 函数及其 submitHandler（以及它们的右大括号），表单提交工作正常。几天来，我一直在为此苦苦挣扎，但没有运气。任何人都可以提供的任何帮助或见解将不胜感激。

这是我正在运行的 javascript。

```
<script type="text/javascript">
$(document).ready(function() {

    $("#Submit").click(function() {

        $("#mrf").validate({
            submitHandler: function() {
                    // Begin the submit handler function
                    var action = $("#mrf").attr('action');
                    var msg_success = '<p style="font-weight: bold;">Your registration was successful! You should receive a welcome email shortly.</p>';
                    var form_data = {
                        Surname: $("#Surname").val(),
                        First_Name: $("#FirstName").val(),
                        Other_Names: $("#OtherNames").val(),
                        Address: $("#Address").val(),
                        Suburb: $("#Suburb").val(),
                        State: $("#State").val(),
                        Postcode: $("#Postcode").val(),
                        Email: $("#Email").val(),
                        Username: $("#Username").val(),
                        INSTEP: $("#INSTEP").val(),
                        Mobile: $("#Mobile").val(),
                        Cohort: $("#Cohort").val(),
                        Academy: $("input:radio[name=Academy]:checked").val(),
                        University: $("#University").val(),
                        Program: $("#Program").val(),
                        NonUni: $("#NonUni").val(),
                        Mentoring: $("input:checkbox[name=Mentoring]:checked").val(),
                        CAS: $("input:checkbox[name=CAS]:checked").val(),
                        Motivational_Speaking: $("input:checkbox[name=MotivationalSpeaking]:checked").val(),
                        Workshops: $("input:checkbox[name=Workshops]:checked").val(),
                        Tutoring: $("input:checkbox[name=Tutoring]:checked").val(),
                        Newsletter: $("input:checkbox[name=Newsletter]:checked").val(),
                        is_ajax: 1
                    };

                    $.ajax({
                        type: "post",
                        url: action,
                        data: form_data,
                        success: function(response) {
                            if(response == 'success')   {
                                $("#mrf-form").slideUp('slow', function() {
                                    $("#ajaxResponse").html(msg_success);
                                });
                            }
                            else    {
                                $('#ajaxResponse').html("<p class='error'>" + response + "</p>");
                            }
                        }
                    });
                    // End the submit handler function      
                }
        });

        return false;
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:18:08.113

做这个

```
e.preventDEfault(); 
```

函数的第一行

```
$("#Submit").click(function(e){}); 
```

这至少不会触发默认提交事件；然后检查上述所有行中的错误，`$.ajax({`
因为如果它们有任何错误，则 javascript 将停止执行并调用默认提交函数，您可以使用开发人员工具“F12”来执行此操作，
即。检查表单数据中的所有值是否正确填写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:18:25.947

不是您问题的直接答案，但您可能更容易使用验证插件。我一直在使用它，我很高兴，它既简单又可扩展，在客户端看起来很棒，如果你需要它，它还支持 i18n：

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

话虽如此，如果您坚持使用自定义代码执行此操作，您可能希望`submitHandler`函数 return `false`。您已经在提交数据，因此您不希望触发该操作。

# javascript - 特定字段的重置按钮

> ID：10395665
> 
> 赞同：0
> 
> 时间：2012-05-01T09:08:58.180
> 
> 标签：javascript, jquery, html, forms

我有一个生成字符串的工作表单，并通过单击按钮将字符串放置在文本区域框中。

我还有一个重置按钮，假设重置所有字段，但不重置带有字符串的文本区域。

这是我的一些代码。

HTML：

```
<form>

<!--some more code and inputs-->

</tbody> </table> </p> <p> <input value="Generate URL" onclick="createURL1();" type="button">

<input name="result" size="70" class="clearit" type="text" ></input>
<input type="button" value="Add The Link" onClick="addtext();"></p>
<textarea id="t5" style="width:600px;" name="outputtext" ></textarea><br><br>

 </p>  </td> </tr> </tbody> </table>

<input  type="reset" value="Clear" id="reset" ></input> 
```

JavaScript：

```
$(document).ready(function(){
    $('#reset').on('click',function(e){
        e.preventDefault();
        $('.clearit').val("");
    });

}); 
```

我提供了我想要重置类（*clearit*）的所有输入，并且重置按钮有一个 ID：*reset*。我不想重置的唯一字段有不同的 ID。

它应该有效，但它没有..请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:15:41.160

使用这个javascript函数并排除你不想重置的id元素，你可以通过左输入空白或下拉等于-1来指定重置方式，它适用于IE和fire fox tesed

```
 function resetLabels()
    {
        //mainForm is the name of form
        var cells = document.mainForm.elements;
        for (var i= 0; i < cells.length; i++) {
             if(cells[i].name !='txtName')//for example to not reset by name 
            cells[i].value='';

   //    cells[i].className = '';
   //    cells[i].style.color = 'black';
   // or cells[i].value='-1' for drop down
   // or cells[i].name= '';  name and id to compare and exclude specific elements
   // or cells[i].id= '';    
   //and i suggest to name like txt... and ddl...to                                  
   //know the type by name and id or just check the type
   //of element by using  cells[i].type

        }

    } 
```

# image - 图片上传安全。GD够吗？我什么时候使用它？

> ID：10395667
> 
> 赞同：0
> 
> 时间：2012-05-01T09:09:13.337
> 
> 标签：image, security, codeigniter, gd, uploadify

根据[PHP 中的 Secure User Image Upload Capabilities](https://stackoverflow.com/questions/3644138/secure-user-image-upload-capabilities-in-php)，推荐的方法是管理图像上传的安全性是使用 GD/ImageMagick/... 复制传入的图像（并使用随机名称设置它）。

行。我有以下问题。

**第一个。**

在我们的页面中，我们可以裁剪图像。所以：

*   首先我们下载用户上传的图片，并以随机名称保存在 temp 中。
*   然后我们将它加载到我们的视图中，以便用户可以裁剪它。
*   裁剪后的图像是使用 GD 创建的。

在没有先用 GD 处理的情况下加载图像是否有风险？

**第二**

用GD处理图像就够了吗？我已经看到了这个答案：[Block upload of executable images (PHP)](https://stackoverflow.com/questions/2851976/block-upload-of-executable-images-php) 说不是（与我在主题上看到的第一个链接和其他答案相反）。

谢谢！

PS：使用 Codeigniter 进行编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:38:50.187

第一个：

那应该足够好了。确保图像只能临时访问，并在一切完成后立即删除（我可能还会设置一个 cron 作业来经常清理临时图像目录，但这取决于你存储它的位置）。如您发布的答案中所述，请记住清理名称并确保您已正确设置权限。还要注意空字节注入和目录遍历（再次重复您提到的答案）。然后，我会通过使用来检查图像是否有效，`getimagesize`以确保它是实际图像，仅此而已。

也有客户端 html5 解决方案，您可以完全避开这个问题，但这当然意味着它不适用于旧浏览器。当然，不要相信它所说的内容类型。

第二：是的，我会想，先试试`getimagesize`，如果你得到有效的，然后用 GD 处理。或者，如果您没有这样做，您也可以将扩展名列入白名单。

# macos - MacOsX HFS+ 通过在末尾添加哈希符号和数字来破坏长 utf-8 文件名

> ID：10395672
> 
> 赞同：1
> 
> 时间：2012-05-01T09:10:06.243
> 
> 标签：macos, file-io, utf-8, long-filenames, hfs+

我是 MacOsX 10.6 的用户。前段时间我发现[我无法获取 git changes](https://stackoverflow.com/questions/10281072/git-svn-rebase-file-name-too-long)。

我做了一些研究，我认为问题在于 UTF-8 字符。我试图创建新文件

```
$ touch "$180_utf-8_chars_file_name_with_spaces"
$ ls
132_chars_file_name_with_numbers_at_the_end 
```

文件看起来已损坏。它的末尾有一些数字。您可以复制它，例如：

```
$ touch "яяяяяяяяя яя яяяя яя яяяяяяяяяя яяяяяяяяя я яяяяяя я яяя яяяяяяяяя яяяяяяяяяяяяя яяяяяяяя я яяяяяяяяяяяяяяяяяя яяяяяя яя яяяяяя яяяяяяяяяяяяя яяяяяяяя яяяяя яяяяяя я яяя яяяяя яяя"
$ ls
яяяяяяяяя яя яяяя яя яяяяяяяяяя яяяяяяяяя я яяяяяя я яяя яяяяяяяяя яяяяяяяяяяяяя яяяяяяяя я яяяяяяяяяяяяяяяяяя яяяяяя яя яяяяяя яяяя#464CDD8 
```

当我通过 vim 编辑器成功打开“132_chars_file_name_with_numbers_at_the_end”并对其进行编辑时。但是当我输入 ":wq" 文件时消失了。

有一些解决方法吗？我该如何解决？

# javascript - jQuery if 语句 $(this) 选择器

> ID：10395673
> 
> 赞同：2
> 
> 时间：2012-05-01T09:10:18.773
> 
> 标签：javascript, jquery, jquery-selectors

如何在 jQuery 中“选择”通过 if 语句的 dom 元素？

我正在检查网址是否有哈希。哈希匹配视频容器的类。如果 url 确实有哈希，则具有匹配类的 iframe 会添加一个活动类以将其显示为块，而不是隐藏。如果没有，则显示列表中的第一个视频：

```
jQuery(document).ready(function($) {

    videoCarousel();

}); 

function videoCarousel() {

    // Set variables
    var carousel = $('#video_container');
    var videos = $('#video_container #video iframe');

    // Get url hash and remove # from begining
    var hash = window.location.hash.substring(1);

    if (videos.hasClass(hash)) {
        $(this).addClass('active');
    } else {
        videos.first().addClass('active');
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:12:32.713

我认为使用 Jquery 的正确方法是：

```
$('div.video').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T09:27:11.947

> 如果 url 确实有**hash ，则****具有匹配类**的 iframe会添加一个活动类以将其显示为块，而不是隐藏。如果没有，则显示列表中的第一个视频：

*（我的重点）*

这是关键信息，我想我们很多人都读过它。您需要更改选择器，而您根本不想要`this`：

```
function videoCarousel() {
    // Set variables
    var carousel = $('#video_container');
    var videos = $('#video_container #video iframe');

    // Get url hash and remove # from begining
    var hash = window.location.hash.substring(1);

    // Get the video with the matching class
    var targetVideo;
    if (hash) {
        targetVideo = videos.filter("." + hash);
    }
    if (!targetVideo || !targetVideo[0]) {
        // There's no hash, or no match; use the first
        targetVideo = videos.first();
    }

    // Add the class
    targetVideo.addClass("active");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T09:13:15.167

我不确定，但您是否正在寻找这个：**[DEMO](http://jsfiddle.net/neysor/JD37S/)**

```
$("div.video").each(function(){
  $(this).addClass("active");
}); 
```

**因为你的编辑**

认为您可能想要：

```
jQuery(document).ready(function($) {

    videoCarousel();

}); 

function videoCarousel() {

    // Set variables
    var carousel = $('#video_container');
    var videos = $('#video_container #video iframe');

    // Get url hash and remove # from begining
    var hash = window.location.hash.substring(1);

    var hasone = false;
    videos.each(function(){
      if($(this).hasClass(hash)) {
        $(this).addclass("active");
        hasone = true;
        return false; //breaks each();
      }
    });
    if(!hasone) {
      videos.first().addClass('active');
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:21:55.780

```
function videoCarousel() {

    // Set variables
    var carousel = $('#video_container');
    var videos = $('#video_container #video iframe');

    // Get url hash and remove # from begining
    var hash = window.location.hash.substring(1);
    //Filter out the element that match the hash or is the first video in the collection
    var activeVideo = videos.filter(function(i) {
        return hash === "" ? i === 0 : $(this).hasClass(hash);
    });

    activeVideo.addClass('active');
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-01T09:13:39.267

也许试试这样：

```
function videoCarousel() {

// Set variables
var carousel = $('#video_container');
var videos = $('#video_container #video iframe');

// Get url hash and remove # from begining
var hash = window.location.hash.substring(1);

$(".yourClass").each(function() {
    if ($(this).hasClass(hash)) {  
        $(this).addClass("active"); 
    } else {
        videos.first().addClass("active");
    });
});
} 
```

# android - 从android中的HTML标签获取子字符串

> ID：10395675
> 
> 赞同：0
> 
> 时间：2012-05-01T09:10:29.790
> 
> 标签：android

我想要一个来自 HTML 内容的字符串。我在这里展示了 HTML 字符串的一部分：

```
<div style="border: 1px solid #999999; margin: 0px 10px 5px 0px;">
<a href="http://www.youtube.com">
<img alt="" src="http://someImage.jpg">
</a>
</div> 
```

我从 SAX 解析中得到这个字符串。现在我只想要图像路径：“http://someImage.jpg”作为字符串。

请任何人帮助我。如何获得该字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:20:56.030

我认为您需要使用正则表达式。在这里我发布一些代码。请检查一下。

```
String subjectString = "<a href=\"http://www.youtube.com\"><img alt=\"\" src=\"http://someImage.jpg\"></a>"; 
```

**从图像标签获取 Href 链接的代码**

```
Pattern titleFinder = Pattern.compile("<a[^>]*?href\\s*=\\s*((\'|\")(.*?)(\'|\"))[^>]*?(?!/)>", Pattern.DOTALL | Pattern.CASE_INSENSITIVE);
Matcher regexMatcher = titleFinder.matcher(subjectString);
while (regexMatcher.find()) {
    Log.i("==== Link0",regexMatcher.group(1));
} 
```

**从图像标签获取图像路径的代码**

```
Pattern titleFinder = Pattern.compile("<img[^>]+src\\s*=\\s*['\"]([^'\"]+)['\"][^>]*>" , Pattern.DOTALL | Pattern.CASE_INSENSITIVE);
Matcher regexMatcher = titleFinder.matcher(subjectString);
while (regexMatcher.find()) 
{
    Log.i("==== Image Src",regexMatcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:28:58.950

试试[jsoup](http://jsoup.org/)解析器。

```
Document doc=Jsoup.connect("http://www.yahoo.com").get();
Elements elements=doc.select("img");

for(Element e:elements)
 {
  System.out.println(e.attr("src"));
 } 
```

或者只是使用 Jsoup.parse(html_text) 来获取 Document 的实例。

```
 Document doc=Jsoup.parse(html_string);
 ... 
```

# ruby-on-rails - 显示按语言栏 3.2 过滤的帖子

> ID：10395676
> 
> 赞同：0
> 
> 时间：2012-05-01T09:10:32.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

我的项目 rails 3.2 中有两种语言。

```
I18n.default_locale = :en
LANGUAGES = [
['English',
'en'],
["Espa&ntilde;ol".html_safe, 'es']
] 
```

注册用户可以使用这些语言创建新帖子。

**我的问题是：**

在我的帖子操作索引中，如果用户在这些时刻使用的语言是`:en`. 我如何过滤和仅显示英语的帖子，或者如果用户在这些时刻的语言是例如`:es`。如何过滤和仅显示西班牙语的帖子？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:20:56.957

我认为实现这一目标的最佳方法是在您的 Posts 表中添加一个“语言”列，并在通过测试 i18n.locale 创建帖子时设置此属性。然后你用一个简单的查询过滤帖子，比如：

```
 Post.where("language = ?", "spanish"). 
```

最好的办法是让用户在创建带有选择字段的新帖子时选择语言，并根据当前语言环境设置默认值。

因为，如果一个英语用户愿意，他应该能够写西班牙语帖子，不是吗？

# java - 模拟退火 - 可能提高性能？

> ID：10395679
> 
> 赞同：0
> 
> 时间：2012-05-01T09:10:51.743
> 
> 标签：java, simulated-annealing

我已经将模拟退火算法（Java 中）应用到我正在处理的个人项目中，但想知道如果用另一种语言（即 C++、Python 等）编写，SA 算法在相同数据集上的性能是否会稍好一些。

我创建的虚拟数据集包含五千个用户的姓名、邮政编码和出生日期。

SA 算法应用于数据集以提取许多不同的信息。

目前，我最近的测试是试图让 SA 算法检测出生日期在一周内（在任何给定年份）的所有用户。现在，SA 算法确实运行良好；但是，由于我是一个完美主义者，我想获得稍微快一点的结果，并想知道是否有人对 SA 有任何好的经验，在类似大小的数据集上产生出色的结果，但用其他语言编写？

目前，SA 算法只需不到 5 秒的时间即可执行成功搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:50:30.550

我会用Java写

```
public class UserSearchMain {
    static class Person {
        int id;
        int dateOfBirth;

        static Person[] generatePeople(int num) {
            Random rand = new Random();
            Person[] people = new Person[num];
            for (int i = 0; i < num; i++) {
                Person p = new Person();
                p.id = i;
                p.dateOfBirth = rand.nextInt(80 * 365); // any day for 80 years.
                people[i] = p;
            }
            return people;
        }
    }

    public static void main(String... args) {
        Person[] people = Person.generatePeople(5000);
        List<List<Person>> peopleByDOB = new ArrayList<List<Person>>();
        for (Person person : people) {
            int dob = person.dateOfBirth;
            while (peopleByDOB.size() <= dob) peopleByDOB.add(new ArrayList<Person>());
            peopleByDOB.get(dob).add(person);
        }

        Random rand = new Random();

        int warmup = 12 * 1000;
        int runs = 1000 * 1000;
        long start = 0;

        for (int i = -warmup; i < runs; i++) {
            if (i == 0) start = System.nanoTime();
            int dayToSearch = rand.nextInt(80 * 365);
            for (int j = Math.max(0, dayToSearch - 7); j <= dayToSearch + 7 && j < peopleByDOB.size(); j++) {
                List<Person> peopleWithCloseDOM = peopleByDOB.get(j);
            }
        }
        long time = System.nanoTime() - start;
        System.out.printf("Each search took an average of %,d ns%n", time / runs);
    }
} 
```

印刷

```
Each search took an average of 85 ns 
```

通常，您使用的算法比语言的选择更重要。

编辑：在回答你原来的问题时，你能用相同的算法在 C++ 中让它更快吗？我猜是的，但不是很多。

* * *

为了进一步加快速度，您可以使用多个线程。

```
public static void main(String... args) throws ExecutionException, InterruptedException {
    Person[] people = Person.generatePeople(5000);
    final List<List<Person>> peopleByDOB = new ArrayList<List<Person>>();
    for (Person person : people) {
        int dob = person.dateOfBirth;
        while (peopleByDOB.size() <= dob) peopleByDOB.add(new ArrayList<Person>());
        peopleByDOB.get(dob).add(person);
    }

    final int runs = 10 * 1000 * 1000;
    long start = System.nanoTime();

    int processors = Runtime.getRuntime().availableProcessors();
    ExecutorService service = Executors.newFixedThreadPool(processors);
    List<Future> futures = new ArrayList<Future>();
    for (int i = 0; i < processors; i++) {
        futures.add(service.submit(new Runnable() {
            @Override
            public void run() {
                Random rand = new Random();
                for (int i = 0; i < runs; i++) {
                    int dayToSearch = rand.nextInt(80 * 365);
                    for (int j = Math.max(0, dayToSearch - 7); j <= dayToSearch + 7 && j < peopleByDOB.size(); j++) {
                        List<Person> peopleWithCloseDOM = peopleByDOB.get(j);
                    }
                }
            }
        }));
    }
    for (Future future : futures) {
        future.get();
    }
    service.shutdown();
    double timeSec = (System.nanoTime() - start) / 1e9;
    double rate = processors * runs / timeSec / 1e6;
    System.out.printf("The search throughput was %.1f million per second%n", rate);
} 
```

印刷

```
The search throughput was 32.4 million per second 
```

这意味着每次搜索的平均时间约为 31 ns。

# excel - 计算条件单元格格式的函数

> ID：10395684
> 
> 赞同：0
> 
> 时间：2012-05-01T09:11:12.233
> 
> 标签：excel, formatting, conditional

我一直在寻找我的问题的解决方案。

我有几个具有条件格式的单元格，例如：如果 >=3 单元格变为绿色，如果 <=2，则单元格变为浅红色。单元格的值为 0，使用此值，单元格为浅红色格式。

我想在 Excel 2010 中使用函数/宏，它将计算必须 +1 多少次才能获得单元格的绿色格式。在这种情况下，我的单元格值为 0，要获得绿色，我必须 +2（0+1=1（红色格式仍然错误），1+1=2（绿色格式正常））。

问候，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:18:58.770

`=IF(A1<3,3-A1,0)`. 如果目标与 3 不同，请将目标放在一个单元格中，并`3`在我的公式中替换为对该单元格的引用，并使您的条件格式也查看该单元格。

# c# - XML 文件无法保存在 windows mobile 中

> ID：10395687
> 
> 赞同：0
> 
> 时间：2012-05-01T09:11:23.937
> 
> 标签：c#, visual-studio-2008, compact-framework, windows-mobile-6

简单来说，当我尝试此代码时，我想将一些数据保存在 XML 文件中，它运行成功，但不幸的是，**我没有将文件放在项目文件夹或计算机上的任何位置**。当我更改路径时，我也没有找到它。以下是使用的代码

```
string configFile = @"config.xml";
XmlDocument xml = new XmlDocument();
XmlElement element = xml.CreateElement("Configuration");
xml.AppendChild(element);
//---create the <LastAccess> element---
element = xml.CreateElement("LastAccess");
element.InnerText = DateTime.Now.ToString();
xml.DocumentElement.AppendChild(element);
//---create the <LastSearchString> element---
element = xml.CreateElement("LastSearchString");
element.InnerText = "sushi";
xml.DocumentElement.AppendChild(element);
xml.Save(configFile); 
```

你能帮我解决这个问题吗？

当我编写此代码并运行应用程序时，文件必须保存在任何位置

```
 XmlDocument xml = new XmlDocument();
    XmlElement element = xml.CreateElement("First");
    xml.AppendChild(element);
    element = xml.CreateElement("Second");
    element.InnerText = "LaLa";
    xml.DocumentElement.AppendChild(element);
    xml.Save(@"XML.xml"); 
```

然后我尝试使用此代码，因为文件已保存

```
 element.InnerText = "LaLa";
    xml.DocumentElement.AppendChild(element);
    xml.Save(@"XML.xml"); 
```

我得到了那个异常找不到文件'\ XML.xml'。请你帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:27:10.227

对于这个问题的所有意图和目的，模拟器是一个完全独立的设备。它不会与主机 PC “共享”其文件系统的任何部分，因此无法从 PC 的 Windows 资源管理器或标准文件系统 API “浏览”它的文件（如您创建的文件）。

如果您想从 PC 访问该文件，您需要使用以下方法之一来检索它：

1.  将模拟器配置为与 PC 共享文件夹。这不在模拟器本身的选项中，并且允许您“挂载”主机 PC 文件夹。该文件夹成为模拟器中的“\Storage Card”根文件夹，因此您必须适当地更改代码（即保存到“\storage card\config.xml”）
2.  使用远程注册表编辑器之类的工具（在 Visual Studio 22008 远程工具下的开始菜单中），连接到模拟器并下载文件。
3.  使用模拟器管理器“停靠”模拟器，使其显示在 ActiveSync/WMDC 中。发生这种情况时，shell 扩展将在 Windows 资源管理器中显示该设备 - 尽管请注意它纯粹是一个 shell 扩展。仍然没有对该系统的文件 API 访问，因此您无法编写导航到“My Device\MyFolder\MyFile.xml”的桌面应用程序。

# ios - 再次进入该页面时清除 UITextfield 数据 iphone

> ID：10395690
> 
> 赞同：0
> 
> 时间：2012-05-01T09:12:04.430
> 
> 标签：ios, uitextfield

我有一些动态分配的texfields，我在其中输入文本，

现在我在这里遇到了两个问题 1）在单击 2-3 次按钮后，我的意思是更改视图并返回到相同的视图，而不是从文本字段中删除数据，而文本字段中的先前数据正在存在。我尝试过的代码是

```
 answerTextField.text = @"";
    answerTextField.text = nil; 
```

2) 我无法删除我在其中附加来自 textfield.text 的数据的文本字段数据

```
 -(void) keyPressed: (NSNotification*) notification { 
if ([[[notification object]text] isEqualToString:@" "])
{
    UITextField *textField = (UITextField *)[self.view viewWithTag:nextTag];
    textField.text = @"";
    [textField becomeFirstResponder];
    nextTag = textField.tag;
}
else
{
    [[NSNotificationCenter defaultCenter] removeObserver: self name:UITextFieldTextDidChangeNotification object: nil];

    NSLog(@"TextField tag value :%d",tagCount);
    NSLog(@"TextField next tagg tag value :%d",nextTag);

    if (tagCount == nextTag+1) 
    {
        UITextField *textField = (UITextField *)[self.view viewWithTag:nextTag];
        [textField resignFirstResponder];
        NSLog(@"append string :%@",appendString);
    }
    else
    {
        NSLog(@"TextField nexttag value before :%d",nextTag);

        nextTag = nextTag + 1;
        NSLog(@"Letter is%@",[[notification object]text]);

        str= [[NSString alloc]initWithFormat:@"%@",[[notification object]text]];
        NSLog(@"TextField String :%@",str);

        NSLog(@"TextField nexttag value after :%d",nextTag);

        [appendString appendString:[NSString stringWithFormat:@"%@",str]];
        NSLog(@"Content in MutableString: %@",appendString);
    }

    NSLog(@"The tags in keypressed:%d",nextTag);
    UITextField *textField = (UITextField *)[self.view viewWithTag:nextTag];
    [textField becomeFirstResponder];
}
// For inserting Spaces taken from array.    
if(tagCount+300 == nextTag)
{
    for (int m=0  ; m< [intArray count]; m++) 
    {
        [appendString insertString:@" " atIndex:[[intArray objectAtIndex:m]intValue]];
        NSLog(@"FinalString : %@",appendString);
    }
} 
```

}

已编辑：我正在存储的文本字段数据被设为 nil，但在文本字段上，数据仍在保留，它没有被删除，对于文本字段我添加了背景图像，不知道它是否有任何区别，我附上它的代码：

```
 UIImageView *myView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"text_line.png"]];
                myView.center = CGPointMake(5, 27);                     
                [letterField insertSubview:myView atIndex:0];// mgViewTitleBackGround is image
                [myView release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:26:29.850

要清除文本字段，请在 viewWillAppear 中执行此代码：

```
 NSArray *arraysubViews = [self.view subViews];

  for(UIView *subView in arraysubViews){

      if([subView isKindOfClass:[UITextField class]]){
          // if(subView.tag == MY_TEXT_VIEW_TAG)
           (UITextField *)subView.text = @"";
       }
   } 
```

这将删除`text`视图中每个 UITextField 中的 。如果您只需要清除某些文本字段，请取消注释代码；这将检查`tag`价值

**编辑**

```
 NSArray *arraysubViews = [self.view subviews];

  for(UIView *subView in arraysubViews){

      if([subView isKindOfClass:[UITextField class]]){
          // if(subView.tag == MY_TEXT_VIEW_TAG)
          UITextField *textField = (UITextField *)subView;
          textField.text = @"";
       }
   } 
```

UIView 没有`subViews`方法。相反`subViews`。

# python - 子目录中无法访问numpy

> ID：10395691
> 
> 赞同：1
> 
> 时间：2012-05-01T09:12:06.053
> 
> 标签：python, numpy

我在我的程序中使用了 import numpy as np，当我尝试执行 np.zeroes 来创建一个 numpy 数组时，它无法识别程序中的模块零。当我在 python 程序所在的子目录中执行时，就会发生这种情况。如果我将它复制到根文件夹并执行，那么它会显示结果。

有人可以指导我为什么会发生这种情况，我该怎么做才能让程序在它自己的子目录中执行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:16:33.840

> 然后它不识别程序中的模块零

`numpy.py`确保您的子目录中没有调用文件。如果这样做，它会影响“真实”`numpy`模块并导致您描述的症状。

# android - 当应用程序启动 (a) 从 android 市场 (b) 然后回家时返回完整的后台堆栈

> ID：10395703
> 
> 赞同：1
> 
> 时间：2012-05-01T09:13:29.590
> 
> 标签：android, android-intent

脚步：

1.  用户从 Android Market 应用程序启动应用程序
2.  用户点击“开始孩子”

    堆栈：ActivityMain > ActivityChild

3.  用户按下主页按钮并通过“启动图标”返回应用程序

4.  Android打开“最后一个任务”+创建下一个ActivityMain

    堆栈：ActivityMain > ActivityChild > ActivityMain

我希望单击“启动图标”只会返回到上一个堆栈[实际上没有创建新活动]。
我期望堆栈：

```
ActivityMain > ActivityChild 
```

怎么实现？？？

另一方面，当用户在上述第一步中直接从“启动图标”启动应用程序时，问题就不存在了。

显现：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="ActivityMain"
        android:name=".ActivityMain" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:label="ActivityChild"
        android:name=".ActivityChild" >
    </activity>
</application> 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:35:11.883

您需要阅读以下内容的`android:launchMode`和`android:clearTaskOnLaunch`属性：http `<activity>`: [//developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:29:16.600

解决方案：

引入“启动器活动”，它负责：
- 开始新任务，
- 或恢复以前的任务。

启动器作为“singleInstance”启动。

```
public class ActLauncher extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent i = new Intent(this, ActivityChild1.class);
        startActivity(i);
        finish();
    }
} 
```

例如，假设我们有活动：

```
ActLauncher [mode=singleInstance]  
ActChild1 [mode=standard]  
ActChild2 [mode=standard] 
```

现在在某个时刻用户执行序列：

```
AndroidMarket > ActLauncher > ActChild1 > ActChild2 
```

然后 HOME
，然后通过启动器图标“ActLauncher”返回应用程序。
这会将用户带到完整的先前堆栈：

```
ActChild1 > ActChild2 
```

我在[这个应用程序](https://play.google.com/store/apps/details?id=your.life.helper)
中应用了解决方案 ：
- ActLauncher = "invisible"
- ActChild1 = 主屏幕
- ActChild2 = 游戏屏幕

最良好的祝愿！

# android - 在android中的自定义列表视图中乘以价格和数量

> ID：10395704
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:13:34.367
> 
> 标签：android, android-listview

我正在获取一个数组，该数组在自定义列表视图中显示 itemimage、itemname、price、qty。现在我要放置一个额外的字段，总计，它是通过将价格和数量相乘来计算的。

我正在使用这段代码：

```
public class CustomAdapter extends BaseAdapter
  {
    integer[] a;
public static ArrayList<String> arr1=new ArrayList<String>();
public static ArrayList<String> itemprice=new ArrayList<String>();
public static ArrayList<Bitmap> itemimage=new ArrayList<Bitmap>();
public Context Context;
private LayoutInflater inflater;
String total;
    HashMap<String, String> map = new HashMap<String, String>();
    public CustomAdapter(Context context, ArrayList<String> arr,ArrayList<String> price,ArrayList<Bitmap> image) 
    {
        Context=context;
        inflater=LayoutInflater.from(context);
        arr1=arr;
        itemprice=price;
        itemimage=image;
        System.out.println(itemprice);
        System.out.println("arr: " + arr.size());

      for(int i=0;i<price.size();i++)
      {

          String amonut=price.get(i);
          int x=Integer.parseInt(amonut);

      }

    }
    public int getCount() 
    {
        // TODO Auto-generated method stub
        return arr1.size();

    }

    public Object getItem(int position) 
    {
        // TODO Auto-generated method stub
        return arr1.get(position);
    }

    public long getItemId(int position) 
    {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
        {
        System.out.println(arr1.get(position));

          final  ViewHolder holder;

            if (convertView == null) 
            {
                convertView = inflater.inflate(R.layout.selecteditemlistview, null);
                holder = new ViewHolder();

                holder.textViewSelectedText = (TextView)convertView.findViewById(R.id.selectedtext);
                holder.price=(TextView)convertView.findViewById(R.id.selectitemprice);
                holder.image=(ImageView)convertView.findViewById(R.id.selectitemimagge);
                holder.qty=(EditText)convertView.findViewById(R.id.selectqty);
                holder.total=(TextView)convertView.findViewById(R.id.totalamount);
                convertView.setTag(holder);
            }
            else 
            {
                holder = (ViewHolder) convertView.getTag();
            }
            String amount=holder.qty.getText().toString();

            holder.textViewSelectedText.setText(arr1.get(position));
            holder.price.setText(itemprice.get(position));
            holder.image.setImageBitmap(itemimage.get(position));

            return convertView;     
        }

        class ViewHolder
        {
            TextView textViewSelectedText = null;
            TextView price=null;
            ImageView image=null;
            EditText qty=null;
            TextView total=null;
        }      
 } 
```

我想将 int x 和 String 数量相乘并将结果作为文本分配给总计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:17:32.690

```
ans = x * Integer.parseInt(amount); or

ans = x * Double.parseDouble(amount);

total = String.valueOf(ans); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:24:19.270

根据您的要求更改变量类型：-

```
 private float getTotal(String quantity, String price )
    {
    float total = 0f;

    try{
    float quant = Float.parseFloat(quantity);
    float unitCost= Float.parseFloat(price);

    total = unitCost*quant;

    }catch (Exception e) {

    }

    return total;
    } 
```

# c++ - 根据类模板参数，在类中定义或不定义函数

> ID：10395707
> 
> 赞同：9
> 
> 时间：2012-05-01T09:14:13.087
> 
> 标签：c++, function, templates, parameters

假设我们有一个类：

```
template <class Type>
class A
{
public:
    void function1(float a, Type b);
    void function1(float a, float b);
}; 
```

现在像这样实例化类：

```
A<int> a; 
```

没关系，这个类将有 2 个带有这些参数的重载函数： (float a, int b); （浮动a，浮动b）；

但是当你像这样实例化类时：

```
A<float> a; 
```

你得到编译错误：

> 成员函数重新声明。

因此，根据类型的类型，我不想（或不希望）编译器定义一个函数，如下所示：

```
template <class Type>
class A
{
public:
    void function1(float a, Type b);

    #if Type != float
    void function1(float a, float b);
    #endif
}; 
```

但是，当然，上面的语法不起作用。是否可以在 C++ 中执行这样的任务？如果可能，请提供一个例子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T09:46:00.567

你可以使用一些`C++11` `std::enable_if`：

```
template <class Type>
class A
{
public:
    template<typename t = Type, 
       typename std::enable_if<!std::is_same<t, float>::value, int>::type = 0>
    void function1(float a, Type b) {
    }

    void function1(float a, float b) {
    }
}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-01T09:22:17.337

您可以使用模板专业化：

```
template <class Type>
class A {
public:
    void function1(float a, Type b) {
    }
    void function1(float a, float b) {
    }
};

template <>
class A<float> {
public:
    void function1(float a, float b) {
    }
};

// ...

A<int> a_int;
a_int.function1(23.4f, 1);
a_int.function1(23.4f, 56.7f);

A<float> a_float;
a_float.function1(23.4f, 56.7f); 
```

### - - 编辑 - -

如果你有大量的常用函数，你可以这样做：

```
class AImp {
public:
    void function1(float a, float b) {
    }
    void function1(float a, double b) {
    }
    void function1(float a, const std::string& b) {
    }
    // Other functions...
};

template <class Type>
class A : public AImp {
public:
    void function1(float a, Type b) {
    }
    using AImp::function1;
};

template <>
class A<float> : public AImp {
};

// ...

A<int> a_int;
a_int.function1(23.4f, 1);
a_int.function1(23.4f, 56.7f);
a_int.function1(23.4f, 56.7);
a_int.function1(23.4f, "bar");

A<float> a_float;
a_float.function1(23.4f, 56.7f);
a_float.function1(23.4f, 56.7);
a_float.function1(23.4f, "bar"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T10:09:38.153

使用 SFINAE：

```
#include <iostream>
#include <type_traits>

template <typename Type>
struct Foo {
    template <typename T = Type>
    void function1(float a, float b, typename std::enable_if<!std::is_same<T, float>::value>::type *c = 0) {
        std::cout << "float\n";
    }
    void function1(float a, Type b) {
       std::cout << "type\n";
    }
};

int main() {
    Foo<float> f;
    f.function1(1, 1);
    f.function1(1.0f,1.0f);
    Foo<int> g;
    g.function1(1,1);
    g.function1(1.0f,1.0f);
    g.function1(1.0,1.0); // warning!
} 
```

输出：

```
type
type
type
float
type 
```

您需要 C++11 模式，以允许函数模板中的默认模板参数。也可以得到`enable_if`and `is_same`，尽管你可以`enable_if`从 Boost 中得到。

“警告！” 是因为你的原始代码`g.function1(1.0,1.0);`是模棱两可的。现在首选非模板重载。您可以通过这样做再次使其模棱两可

```
 template <typename T = Type>
    void function1(float a, Type b, typename std::enable_if<true>::type *c = 0) {
       std::cout << "type\n";
    } 
```

# django - Django admin：如何根据另一个选择框限制相关的选择框值

> ID：10395708
> 
> 赞同：1
> 
> 时间：2012-05-01T09:14:24.803
> 
> 标签：django, django-admin

```
class Products(models.Model):
    name = models.CharField(max_length=50)

    leve1 = models.ForeignKey( Level1 )
    leve2 = models.ForeignKey( Level2 )
    leve3 = models.ForeignKey( Level3 )
    leve4 = models.ForeignKey( Level4 )

class Level1(models.Model):
    name = models.CharField(max_length=50)

class Level2(models.Model):
    name = models.CharField(max_length=50)
    leve1 = models.ForeignKey( Level1 )

class Level3(models.Model):
    name = models.CharField(max_length=50)
    leve2 = models.ForeignKey( Level2 )

class Level4(models.Model):
    name = models.CharField(max_length=50)
    leve3 = models.ForeignKey( Level3 ) 
```

在 Django Admin 中，基于另一个选择框细化选择框值

使用 formfield_for_foreignkey？raw_id_fields？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:19:22.563

看看[Django 智能选择](https://github.com/digi604/django-smart-selects)

# jquery - Jquery在点击时从表格中获取内容到Facebook Feed对话框

> ID：10395709
> 
> 赞同：0
> 
> 时间：2012-05-01T09:14:26.527
> 
> 标签：jquery, facebook

我有一张表格，列出了辩论日历上的所有事件。每行都有基本信息，例如学校、时间和地点等。我想得到它，以便表格中的最后一列共享链接是通过 jquery 完成的，所以我不需要为每个条目都这样做。[看看我到目前为止有什么。](http://jsfiddle.net/aaronk85/PhbXQ/)

我想得到它，以便在单击共享链接时我将该行的相关信息获取到如下所示的 URL 中，该 URL 在新窗口中打开，以便用户可以发布到 facebook。在下面，我有我想出现在每个位置的类的名称，例如 .yearlevel 我想要标题字段中 yearlevel 类的内容。更复杂的事情我需要确保任何空格都被编码，例如 %20 以使 url 有效。

```
http://www.facebook.com/dialog/feed?
app_id=123050457758183&
link=http://developers.facebook.com/docs/reference/dialogs/&
picture=http://fbrell.com/f8.jpg&
name=School%20Debate&
caption=.yearlevel&
description=.homeschool%20.versus%20.awayschool%20@%20.venue%20@%20.datetime&
redirect_uri=http://www.example.com/response 
```

这可能吗？任何让我走上正轨的指针都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:51:50.580

对每个 href 标记和[encodeURIComponent](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)使用[.on()](http://jqapi.com/#p=on)

```
$('a').on('click', function (event) {
   event.preventDefault();
   var homeschool = $(this).parent().siblings('.homeschool');

   var url = 'http://www.facebook.com/dialog/feed?' + 'app_id=123050457758183&' + 'link=http://developers.facebook.com/docs/reference/dialogs/&' + 'picture=http://fbrell.com/f8.jpg&' + 'name=' + encodeURIComponent(homeschool) + 'caption=yearlevel&' + 'description=homeschool%20.versus%20.awayschool%20@%20.venue%20@%20.datetime&' + 'redirect_uri=http://www.example.com/response';

   window.open(
   url, '_blank' // <- This is what makes it open in a new window.
   );

});​ 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/69dDm/)**

希望这可以帮助

# objective-c - 获取 iPodMusicPlayer 的队列

> ID：10395711
> 
> 赞同：0
> 
> 时间：2012-05-01T09:14:35.683
> 
> 标签：objective-c, ios, mpmusicplayercontroller

我正在为我的 MPMusicController 使用 iPodMusicPlayer。我想将音乐队列作为 MPMediaItemCollection。我怎样才能做到这一点？

在我的应用程序中，您可以通过 MPMediaPickerController 选择和播放音乐库中的音乐。然后，如果您正在通过 iPod 音乐应用程序播放音乐，它就会被中断。你在我的应用程序中选择的音乐完成后，我想回到 iPod 音乐应用程序上的音乐。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:50:35.040

恐怕你不能 - 苹果保留对 ipodmusicplayer 内部运作的唯一控制权

# php - isset 在回声中？或者，还有更好的方法？

> ID：10395713
> 
> 赞同：0
> 
> 时间：2012-05-01T09:14:41.083
> 
> 标签：php, sql, echo, isset

```
$sql = "SELECT * from post where forum_id = $_GET[id]";
    $result = mysqli_query($conn, $sql) or die('Error querying database.');     
    while ($row = mysqli_fetch_array($result)) {
        echo '' . $row['fourm_id']; 
        echo '<div id="post3">
            <p class="1">
            <span class="name">'.'
            ' .$row['name']. '</span>'.
            '<span class="trip">
            ' .' !'
            . $row['title'].''.
            ' </span>'.
            ' <span class="time">
            ' .$row['time']. '' . 
            ' </span>'.
            ' </p>
            <p class="2">
            <span class="texts">
            ' .$row['texts']. '' .
            ' </span>'.
            ' </p>'.
            if (!isset($_SESSION["user_id"])) { 
            }
             else {
             '<a href="delete_post.php?fourm_id=' . $row['id']. '>Delete</a>' . }
            ' </div>';
         } 
        mysqli_close($conn);

?> 
```

代码中的错误很明显，只是显示了我正在尝试做的事情。

我在这里的这个回显显示了用户的帖子，我将如何在其中粘贴一个 isset 以便只有管理员才能看到删除链接？或者是否有另一种方法可以在回声之外而不是在用户帖子之外进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:29:56.283

```
<?
$data = array();
$sql  = "SELECT * from post where forum_id = ".intval($_GET['id']);
$res  = mysqli_query($conn, $sql) or trigger_error(mysqli_error($conn));
while ($row = mysqli_fetch_array($result)) {
  $data[] = $row;
}
?>
<?php foreach($data as $row): ?>
<?=$row['fourm_id']?>
<div id="post3">
  <p class="1">
    <span class="name"><?=$row['name']?></span>
    <span class="trip"> !<?=$row['title']?></span>
    <span class="time"><?=$row['time']?></span>
  </p>
  <p class="2">
    <span class="texts"><?=$row['texts']?></span>
  </p>
<?     if (isset($_SESSION["user_id"])): ?>
  <a href="delete_post.php?fourm_id=<?=$row['id']?>">Delete</a>
<?     endif ?>
</div>
<? endforeach ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T09:16:43.327

如果你想内联，你可以使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)或类似`sprintf`.

三元运算符（最好只有几个插入）：

```
echo "Foo ".(isset($bar) ? "bar" : ""); 
```

`(s)printf`（最好有多个插入）：

```
printf("Foo %s", isset($bar) ? "bar" : ""); 
```

然而，这并没有太大的规模，所以当你有大规模的“字符串构造”时，将输出分成多个语句会更明智：

```
echo "Foo ";
if (isset($bar)) {
    echo "bar";
} 
```

如果您有很多插入，这是最好的。

# selenium - 使用 selenium 网格执行远程代码

> ID：10395716
> 
> 赞同：0
> 
> 时间：2012-05-01T09:14:53.800
> 
> 标签：selenium, grid, jenkins

我们希望使用 Selenium 网格来并行化我们的测试，但我们的一些测试需要在测试机本地运行 java 代码。换句话说，除了自动化浏览器之外，我们还需要在测试机器上运行一些 java 代码。Selenium Grid 中是否有允许我们这样做的钩子？

PS 我们也在寻找 Jenkins 来设置我们的环境。

编辑：为了更清楚，我需要执行的 java 代码从 web 应用程序中获取，下载我们无法单独使用 selenium 的 pdf 文件。然后它会对这些 PDF 文件进行一些处理。我想处理可以在服务器集线器上完成，但下载不能。除非有人可以解释如何使用 selenium 下载 pdf 并将其保存到给定位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:47:02.050

Selenium 无法在远程控制机器中执行您的 java 代码。它只会在集线器机器中执行。但是，Grid 可以处理截图、处理弹出、上传特定路径中的文件。

# eclipse - Eclipse：如何始终在活动编辑器中打开文件？

> ID：10395717
> 
> 赞同：1
> 
> 时间：2012-05-01T09:15:09.883
> 
> 标签：eclipse, eclipse-plugin

在 Eclipse 中是否可以始终在活动编辑器中打开文件（从项目资源管理器）？*（与 Qt Creator 对views*所做的方式相同）。

当我试图打开已在非活动编辑器中打开的文件时，Eclipse 只是将编辑器更改为非活动。我想在活动视图中打开文件*的“另一个”*选项卡，而不更改编辑器。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:51:22.873

窗口>新编辑器或右键单击编辑器选项卡并选择“新编辑器”。

# java - WebLogic 和嵌套 Tiles 的呈现 - 静态内容被忽略

> ID：10395724
> 
> 赞同：0
> 
> 时间：2012-05-01T09:15:49.717
> 
> 标签：java, weblogic, tiles, weblogic11g, apache-tiles

我们有一个大型 Web 应用程序，其中一些使用[Apache Tiles](http://tiles.apache.org/)，这些应用程序在某些地方是严重嵌套的。在所有测试的 Web 应用程序容器（Tomcat、JBoss、JonAs 和我认为是 WebSphere）上都没有问题，但是在[WebLogic](http://www.oracle.com/technetwork/middleware/weblogic/overview/index.html)上我们有问题。

在 WebLogic 上，我们的嵌套图块无法正确呈现；只有动态的服务器端脚本内容被渲染，所有静态（即纯 HTML 内容）被忽略。*为什么是这样？*

**环境细节：**

*   操作系统：Windows 和 Solaris（似乎无关紧要）
*   Java 版本：6
*   网络逻辑：11gR1
*   阿帕奇瓷砖：2.2.2

该问题可能是由于不正确使用 Tiles 以及它们应该如何嵌套造成的，如果是这样，请告诉我，但理想情况下，由于这种情况，可能是不正确的使用，我们希望找到一种解决方法。

我们确实尝试更改字符编码以避免使用 WebLogic 的 JSPWriter（通过快速检查源代码，[JSPWriter](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/JspWriter.html)的选择取决于字符编码设置）。将编码更改为 UTF-8 和 UTF-16 的组合（这是错误的并且破坏了其他容器中的东西）修复了 WebLogic 问题，因为它不再使用 WebLogic 的 JSPWriter（以及它附带的所有内容）。

**示例战争：**

我制作了一个非常简单的示例来演示此问题：

*最重要的解释文件；`displayTable.jsp`*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles" %>
<div id="displayTable" class="displayTable">
    <p><%= "This gets printed" %></p>   
    <!-- But this doesn't... -->
    <table>
        <tbody>
            <tr>
                <td>This doesn't</td>
                <td>1</td>
            </tr>
            <tr>
                <td>get printed</td>
                <td>2</td>
            </tr>
            <tr>
                <td>...no it doesn't</td>
                <td>3</td>
            </tr>
        </tbody>
    </table>
</div> 
```

*导入displayTable.jsp的页面；`test.jsp`：*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<tiles:insertDefinition name="pageTemplate">
    <tiles:putAttribute name="pageContent">
        <div>
            <p>Test</p>
        </div>
        <div>
            <tiles:insertDefinition name="displayTable" />
        </div>      
    </tiles:putAttribute>
</tiles:insertDefinition> 
```

*页面模板；`pageTemplate.jsp`：*

如果`test.jsp`不使用此文件包装内容，则一切正常...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<tiles:useAttribute name="pageContent" />
<html>
    <head>
        <title>Testing WebLogic and nested tiles</title>
    </head>
    <body>
        <tiles:insertAttribute name="pageContent" />
    </body>
</html> 
```

*上面的输出源：*

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Testing WebLogic and nested tiles</title>
    </head>
    <body>  
        <div>
            <p>Test</p>
        </div>
        <div>   
            This gets printed?
        </div>
    </body>
</html> 
```

如果需要，我可以提供其余的 WAR 内容，请询问。

# apache - 限制登台服务器

> ID：10395738
> 
> 赞同：0
> 
> 时间：2012-05-01T09:17:25.880
> 
> 标签：apache, deployment, staging, vhosts

我正在考虑限制公共用户访问我们登台服务器上的站点的方法。目前我能想到的最好的方法是使用：

```
Deny from all
Allow IP Addresses 
```

如果我将它添加到虚拟主机配置中，那么它将满足我的需要。

有没有更好的方法来做到这一点？如果我将基于工作的 IP 地址添加到每个 vhost 配置中，然后由于任何原因更改了 IP 地址，那么修改每一个都非常烦人。

另外，有些网站上有测试订单信息，这是一种安全的方法吗？

提前致谢，

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:28:56.470

由于 IP 地址可以被欺骗，这不是 100% 安全的。您可能希望添加基本身份验证，您可以在其中管理用户和密码而不是 IP 地址（您可能能够利用现有的身份系统来简化此操作（例如 LDAP 等）。

除此之外，您可能希望查看 chef 或 puppet 来自动管理您的用户。

# git - 从 bash 脚本中获取 Gitolite 配置文件中的数据

> ID：10395741
> 
> 赞同：1
> 
> 时间：2012-05-01T09:17:44.147
> 
> 标签：git, gitolite

我有一个项目，管理员在 gitolite.conf 中列出。

例如：

@admins = 贝蒂娜·巴斯蒂安·安吉拉·罗伯特

现在我想在更新后挂钩中获取@admins。

有没有办法扩展这个列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:06:40.320

Gitolite（尤其是最新的[Gitolite V3 或 'g3'](http://sitaramc.github.com/gitolite/why.html)）中的钩子管理非常简单：

> ### [定制你的 Gitolite：钩子](http://sitaramc.github.com/gitolite/cust.html#hooks)
> 
> Gitolite 将`update`钩子用于所有 repos。
> 此外，它使用`post-update`钩子进行`gitolite-admin`回购。
> 
> 如果你想添加自己的钩子，只要不是' `update`'钩子就可以了。只需将其添加到`$HOME/.gitolite/hooks/common`并运行`gitolite setup`.
> 
> **剩下的就在你和' `man githooks`'**之间:-)

所以不行。没有 Gitolite 本地方式来引用 Gitolite 组，这意味着您的脚本必须以`$HOME/.gitolite/conf/gitolite.conf'][3] and get the`这种方式解析 [@admins` 用户。

# oracle - 在 oracle 10g 中取消嵌套表

> ID：10395744
> 
> 赞同：0
> 
> 时间：2012-05-01T09:17:57.667
> 
> 标签：oracle, plsql, oracle10g, nested-table

所以我刚刚为我的表创建了这个触发器：

```
CREATE OR REPLACE 
PROCEDURE POPULATE_ACTOR_QUOTES (id_actor char)
AS
   CURSOR quote_recs IS
      SELECT m.title, 
             m.year, 
             r.roleName,
             q.quotechar 
        from quote q, 
             role r, 
             rolequote rq,  
             actor a, 
             movie m
       where rq.quoteID = q.quoteID
         AND rq.roleID = r.roleID
         AND r.actorID = a.actorID
         AND r.movieID = m.movieID
         AND a.actorID = id_actor;
BEGIN
   FOR row IN quote_recs 
   LOOP
      INSERT INTO table(
      SELECT quotes
        FROM actor_quotes aq
       WHERE aq.actorId = id_actor)
      VALUES(
         ACTOR_QUOTE_TYPE(row.title, row.year, row.roleName, row.quotechar)
      );
   end loop;
END POPULATE_ACTOR_QUOTES;
/ 
```

我现在想通过使用类似的查询来取消表`QUOTES`的任何嵌套，该查询取消嵌套表并列出其中的所有四个数据项。`ACTORID``QUOTES`

这是原始表模式

```
CREATE TABLE ACTOR_QUOTES (
   ACTORID CHAR(5),
   QUOTES  AQ_NT
)  
NESTED TABLE QUOTES STORE AS ACTOR_QUOTES_NT
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:13:25.817

您可以使用 TABLE 函数执行相同的操作

```
 SELECT REC.*

  FROM ACTOR_QUOTES A,TABLE(A.QUOTES) REC 
```

供参考，请检查

[http://psoug.org/reference/nested_tab.html](http://psoug.org/reference/nested_tab.html)

# spring - 如何使用 Spring Security 在 Spring App 中测试 REST

> ID：10395745
> 
> 赞同：0
> 
> 时间：2012-05-01T09:18:05.513
> 
> 标签：spring, testing, rest, spring-security, jersey

我有带有球衣休息服务的 Spring Web 应用程序。然而，休息是通过弹簧安全保护的，登录过程很难从单元测试代码中执行。我想在禁用整个春季安全性的情况下测试休息服务。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:50:18.943

基于注释的 Web 服务的优点之一是您可以轻松地对它们进行单元测试。

```
class WebServiceEndpoint {

    @Path("/foo/{fooId}")
    @POST
    @Produces({ MediaType.APPLICATION_XML })
    public Response doFoo(@PathParam("fooId") Integer fooId) { 
        /// ... web service endpoint implementation
    }

} 
```

如果你使用 Spring 的 servlet 过滤器来保证安全，那么方法中不应该有任何与安全相关的代码`doFoo`，所以你可以创建一个新`WebServiceEndpoint`类并调用该方法。所以这是“禁用”安全性的一种方式。

当您说登录过程“困难”时，您是什么意思？如果您已成功登录一次，那么您可以在其他单元测试中（例如在`@Before`方法中）重用相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:19:18.847

你没有说什么是“难的”，所以我假设你在你的 REST 服务中有一些东西，即在你想要测试的 java 方法中，这需要身份验证结果。Spring 具有用于模拟身份验证结果的实用程序。例如，您可以在`@Before`setup 方法中执行以下操作：

```
Object principal = null; // fix this
Object credentials = null; // fix this
Authentication auth = new org.springframework.security.authentication.TestingAuthenticationToken(principal, credentials);
SecurityContextHolder.getContext().setAuthentication(auth); 
```

但是同样，您还没有说出您实际上要解决的问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:29:42.643

只需将其作为 pojo 进行测试。传入任何内容，返回任何内容，根本不加载应用程序上下文 - 这将是一个集成测试。

无需加载框架即可轻松测试功能的能力是 Spring 的主要优势之一。

# java - 在随机化的数组中使用数字随机数

> ID：10395748
> 
> 赞同：0
> 
> 时间：2012-05-01T09:18:11.217
> 
> 标签：java, arrays, 2d

我正在为一个小项目开设一个小班。这是一个基于文本的 RPG 游戏，我正在尝试为 NPC 死亡创建一个掉落类。我创建了几个 Math.random 方法（它们完全相同，只是为了方便起见而命名不同。）来删除项目 id（名称）的随机数量并获得被删除项目的稀有度。一切正常，但它只会随机化一次（在启动或运行时），之后不会随机化数量。我也在 2 个数字之间随机化它，例如 25 和 50，随机数不会低于 25 或高于 50。

我的问题是：如何在每次 NPC 死亡后随机化 2D 数组或一般数组中的整数，因此第一次获得的随机数会发生变化并且不会保持不变。因为现在，它停留在选择的数字上。如果数字是 25，那么我杀死的下一个 npc，数量仍然是 25.. 和 25.. 和 25.. 等等。我需要它来随机化或改变。

请帮忙，谢谢。

```
 public class DropConfig {

    private static final int
        ALWAYS = 0,
        VERY_COMMON = rate(1, 9),
        COMMON = rate(10, 20),
        UNCOMMON = rate(30, 40),
        RARE = rate(50, 60),
        VERY_RARE = rate(70, 80),
        SUPER_RARE = rate(90, 100);

    public static final int[][] NPC_DROPS = {

        // Normal NPC's
        {1, 526, 1, ALWAYS}, 
        {2, 526, 1, ALWAYS}, 
        {3, 526, 1, ALWAYS}, 
        {1, 995, drop(1, 50), ALWAYS}, 
        {2, 995, drop(1, 50), ALWAYS},
        {3, 995, drop(1, 50), ALWAYS},

        // Moderate NPC's
        {9, 526, 1, ALWAYS}, 
        {9, 995, drop(250, 500), UNCOMMON},
        {9, 555, drop(2, 7), VERY_COMMON},
        {9, 995, drop(5, 50), VERY_COMMON},
        {9, 1050, 1, RARE}, 
    };

    public static int rate(int min, int max) {
        return 1 + (int)(Math.random() * ((max - min) + 1));
    }

    //Same as rate, different name for looks.
    public static int drop(int min, int max) {
        return 1 + (int)(Math.random() * ((max - min) + 1));
    } 
```

这是我调用 drop 方法的地方

```
public void npcDeath() {
    int npc = 0;    
    if (npc == null)
        return;
    for(npc = 0; npc < DropConfig.NPC_DROPS.length; npc++) {
        if(npc == DropConfig.NPC_DROPS[npc][0]) {
            if(Misc.random(DropConfig.NPC_DROPS[npc][3]) == 0) { //Drops ALWAYS item
                Item(DropConfig.NPC_DROPS[npc][1], DropConfig.NPC_DROPS[npc][2]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:26:43.297

如果我理解正确，您希望在`drop()`每次使用此 NPC_DROPS 数组时，通过调用重新初始化 NPC_DROPS 数组的元素。

好吧，NPC_DROPS 是一个常数，所以它不能改变。每次访问时生成它，使用方法：

```
public static int[][] generateNpcDrops(){
    return new int[][] {

    // Normal NPC's
    {1, 526, 1, ALWAYS}, 
    {2, 526, 1, ALWAYS}, 
    {3, 526, 1, ALWAYS}, 
    {1, 995, drop(1, 50), ALWAYS}, 
    {2, 995, drop(1, 50), ALWAYS},
    {3, 995, drop(1, 50), ALWAYS},

    // Moderate NPC's
    {9, 526, 1, ALWAYS}, 
    {9, 995, drop(250, 500), UNCOMMON},
    {9, 555, drop(2, 7), VERY_COMMON},
    {9, 995, drop(5, 50), VERY_COMMON},
    {9, 1050, 1, RARE}, 
    }
}

...

public void npcDeath() {
    int npc = 0;    
    if (npc == null)
        return;
    int[][] npcDrops = DropConfig.generateNpcDrops();
    for(npc = 0; npc < npcDrops.length; npc++) {
        if(npc == npcDrops[npc][0]) {
            if(Misc.random(npcDrops[npc][3]) == 0) { //Drops ALWAYS item
                Item(c, npcDrops[npc][1], npcDrops[npc][2]);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:27:19.383

您想将函数作为常量放置。你可以用 Scala 这样的语言自然地做到这一点，但在 Java 中你必须更加努力。

在每种情况下，您都需要调用一个函数来获取实际值。

您可以使用枚举和匿名方法，但最简单的方法/hack 是对您的范围进行编码。

```
public static int rate(int min, int max) { // same for drop.
    int range = max - min;
    return (range << 16) | (min & 0xFFFF);
}

public static int eval(int minMax) {
    int min = (short) minMax;
    int range = (short) (minMax >> 16);
    if (range == 0)
       return min; // plain number.
    else
       return min + (int) (Math.random() * (range + 1));
} 
```

您需要调用 eval() 将编码范围转换为随机数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:28:14.970

创建具有相同种子的 Random 实例，您将获得相同的“随机”数。您是否考虑过使用 SecureRandom？SecureRandom 和 Random 之间的区别在于 SecureRandom 在每次调用时都会产生不确定的输出。

# python - 管理站点的过滤器，FilterSpec、RelatedFilterSpec、ChoicesFilterSpec 的工作原理，即？

> ID：10395755
> 
> 赞同：3
> 
> 时间：2012-05-01T09:18:38.597
> 
> 标签：python, django, django-admin-filters

昨天，当我尝试在 Django 中为我的管理站点编写特殊过滤器时，我遇到了这个问题。

我有 3 个模型：

```
 ```
class ShopInfo(models.Model):
    name = models.CharField(max_length=200)

class Keyword(models.Model):
    keyword1 = models.CharField(max_length=4096,  blank=True)
    product = models.ManyToManyField(Products)

class Products(models.Model):
    shop = models.ForeignKey(ShopInfo) 
``` 在管理站点的关键字编辑页面上，我想按商店为关键字创建一个过滤器。换句话说，我想在页面右侧的过滤器列表中看到完整的商店列表，当您单击时，我们将选择属于该商店的关键字。

            回答 #1

赞同：1

时间：2012-05-22T23:11:27.040

您不应该为此需要任何自定义 FilterSpecs。您可以在 ModelAdmin 的 list_filter 属性中使用 django 的连接语法。例如：

```
class KeywordAdmin(admin.ModelAdmin):
    list_filter = ['product__shop'] 
```

```

# iphone - 如何限制 NSLog 使用布尔变量打印

> ID：10395760
> 
> 赞同：0
> 
> 时间：2012-05-01T09:19:28.103
> 
> 标签：iphone, ios5

我是 iPhone 开发的新手。我的代码中有太多 NSLog 语句。当我想要的时候，只有 nslog 必须在控制台中打印。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:22:43.767

您可以在您的 pch 文件中尝试此代码，并根据它设置您的 bool 值......就像您使用的任何类中声明这个`BOOL myDebugEnabled = FALSE;`

```
extern BOOL myDebugEnabled;
#define DLog(fmt, ...) if (myDebugEnabled) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);
#define ALog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__); 
```

# haskell - 负零的绝对值 - 错误，还是浮点标准的一部分？

> ID：10395761
> 
> 赞同：21
> 
> 时间：2012-05-01T09:19:44.590
> 
> 标签：haskell, floating-point

我知道有符号零用于区分下溢与正数或负数，因此值得区分它们。直觉上我觉得 的绝对值`-0.0`应该是`0.0`。然而，这不是 Haskell 所说的：

```
Prelude> abs (-0.0)
-0.0 
```

对于它的价值，Python 2.7 不同意：

```
>>> -0.0
-0.0
>>> abs(-0.0)
0.0 
```

这是一个错误，还是标准的一部分？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T18:09:23.707

您描述的行为绝对与 IEEE 754 标准不一致，该标准在其最新版本中说：

> abs(x) 以相同的格式将浮点操作数 x 复制到目标，将符号位设置为 0（正数）。

这在 IEEE 754-2008 的第 5.5.1 节中，标题为“符号位操作”。虽然我无法提供标准本身的链接，但您可以在该标准的最后一个可用[公开草案](http://www.validlab.com/754R/drafts/archive/2006-10-04.pdf)中看到大致相同的语言，在第 7.5.1 节中。（总的来说，该标准与该草案有很大不同，但这一点几乎没有变化。）

除非 Haskell 明确声称遵循 IEEE 754 标准，否则这不会使其成为 Haskell 中的错误，并且还声称`abs`Prelude 中的实现应该映射到 IEEE 754`abs`函数。该标准仅要求`abs`必须提供操作，但没有说明它的拼写方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T09:57:02.903

这是[Haskell 报告](http://www.haskell.org/onlinereport/haskell2010/haskellch6.html#x13-1390006.4.4)中定义的行为。

> **6.4.4 大小和符号**
> 
> 一个数有*大小*和*符号*。函数`abs`和`signum`适用于任何数字并满足法律：
> 
> ```
> abs x * signum x == x 
> ```
> 
> 对于实数，这些函数定义为：
> 
> ```
> abs x    | x >= 0  = x  
>          | x <  0  = -x  
> 
> signum x | x >  0  = 1  
>          | x == 0  = 0  
>          | x <  0  = -1 
> ```

由于负零等于零，`-0.0 >= 0`为真，所以`abs (-0.0) = -0.0`. 这也与 的定义一致`signum`，因为`-0.0 * 0.0 = -0.0`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T09:46:07.810

[正如 IEEE 标准所说](http://en.wikipedia.org/wiki/Signed_zero#Properties_and_handling)，`0 == (-0)`即使它们有不同的符号。这很合理，无论你使用什么标志，什么都不是什么。这意味着

```
let nzero = (-0.0)
    a = abs nzero
in a == 0.0 && a == nzero 
```

计算结果为`True`，因为事实上，无论`abs x == 0`或是相同的`abs x == (-0)`。尽管这是一个值得商榷的选择，但在我看来，这对我来说并不是`abs (-0.0) == (-0.0)`一个错误。

**编辑**：正如评论指出的那样，`show 0.0 /= show (-0.0)`. 我不确定如何证明这一点。目前我想到的唯一一件事是，也许，`Eq`它并不代表关于引用透明度的有界契约，例如，一个类型的两个值并不真的必须以相同的方式表示才能被认为是平等的.

`Eq`一旦我能找到一些关于应该如何实例化的参考资料，我会尽快写一篇更新。

# opengl - GLSL 片段着色器 - 仅适用于 nVidia，非标准代码？

> ID：10395763
> 
> 赞同：2
> 
> 时间：2012-05-01T09:19:53.547
> 
> 标签：opengl, glsl, sfml

编辑：我很抱歉 Stack Overflow，但我智障。`frac(tex_offset)`-> ，现在指定`fract(tex_offset)`时它在 ATI 卡和 nVidia 卡上都可以正常工作。`#version`这一定是我认识的大多数程序员头发不多的原因。

-

我正在为学校项目制作游戏。它是一个垂直滚动条，因此需要的功能之一是滚动背景。我尝试了几种方法，但最终还是写了一个简单的片段着色器（这是我第一次接触着色器编程，所以不知道我在做什么）：

```
uniform sampler2D tex;
uniform float tex_offset;

void main()
{
    vec2 coords = vec2(gl_TexCoord[0].s, gl_TexCoord[0].t - frac(tex_offset));
    gl_FragColor = texture2D(tex, coords);
} 
```

我使用[SFML](http://sfml-dev.org/)，所以我不会触及幕后的很多东西，但是我使用的纹理被传递给`tex`变量，并且`tex_offset`在我的游戏循环中通过将总经过的秒数乘以一个因子来生成控制滚动速度。

这似乎做了它应该做的事情；它无限期地在一个方向滚动无缝重复纹理。它可以在我的笔记本电脑上运行，也可以在我的家用计算机上运行，​​它们都有 nVidia 卡。然而，当我们试图在一个小组成员的带有 ATI 卡的计算机上运行它时，它根本没有任何作用。我做了一些谷歌搜索，似乎 nVidia 卡也接受“非标准”GLSL 代码，这可能解释了兼容性问题。我发现很难找到关于 GLSL 的好的教程/解释，因为我挖掘的大部分内容都来自版本 1.2-1.4，而且我显然使用的是版本 3 中已弃用的语法（gl_FragColor、gl_TexCoord）。但是，当我尝试设置`#version`为 120 或 140 或其他值时，着色器也停止在我的 nVidia 计算机上工作。

因此，尝试将其表述为问题形式：此着色器代码有什么问题？有什么方法可以调试语法，如果可能的话，如何为我的 nVidia 卡打开“标准”模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:38:52.453

更改`frac(tex_offset)`为`fract(tex_offset)`, 它在 ATI 卡上运行良好，现在指定 #version 时也可以在 nVidia 卡上运行。

# css - 自定义导航栏图标卡在一个圆圈内

> ID：10395764
> 
> 赞同：1
> 
> 时间：2012-05-01T09:20:24.570
> 
> 标签：css, jquery-mobile, icons, navbar

我创建了自定义导航栏图标，它们出现了。他们被困在一个圆圈内。有没有机会从内置的查询移动设备中获得更大的图标？

请查看以下页面以了解我的意思：

[https://web.archive.org/web/20120511013421/http://evangelich.de/test/#p5](https://web.archive.org/web/20120511013421/http://evangelich.de/test/#p5)

这是我的代码：

CSS：

```
.icons .ui-btn .ui-btn-inner {
 padding-top: 40px !important;
 }
.icons .ui-btn ui-icon {
 width: 40px !important;
 height: 30px !important;
 margin-left: 0px !important;
 box-shadow: none !important; 
 -moz-box-shadow: none !important; 
 -webkit-box-shadow: none !important; 
 -webkit-border-radius: none !important; 
 border-radius: 10px !important;
 }
#msg .ui-icon {
 background: url(icons/msg.png) 50% 50% no-repeat; 
 background-size: 40px 30px;
}
#nibe .ui-icon {
 background: url(icons/nibe.png) 50% 50% no-repeat;
 background-size: 40px 30px;
}
#yougent .ui-icon {
 background: url(icons/yougent.png) 50% 50% no-repeat;
 background-size: 40px 30px;
}
 #musik .ui-icon {
 background: url(icons/musik.png) 50% 50% no-repeat;
 background-size: 40px 30px;
} 
```

HTML：

```
 <div data-role="footer" data-position="fixed" data-theme="a" class"="icons">
 <div data-role="navbar" class"="icons">
 <ul>
 <li><a href="#p2" id="msg" data-icon="custom" data-transition="fade">Msg L.</a></li>
  <li><a href="#p3" id="nibe" data-icon="custom" data-transition="fade">Ni-Be</a></li>
 <li><a href="#p4" id="yougent" data-icon="custom" data-transition="fade">YouGen&dagger;         </a></li>
  <li><a href="#p5" id="musik" data-icon="custom" data-transition="fade">Musik</a></li>
  </ul>
  </div>
 </div> 
```

怎么了？我该如何改变呢？

# css - 如何将 CSS 应用于特定的 asp.net 表？

> ID：10395765
> 
> 赞同：2
> 
> 时间：2012-05-01T09:20:30.577
> 
> 标签：css, asp.net, css-tables

我从一个包含许多表格样式的网站下载了一个 .css 样式表。我想将该 .css 样式表应用于特定的 asp.net 表。所以在aspx中我有，

```
 <asp:Table cssClass="downloadedCss">
          </asp:Table> 
```

在我下载的 css 样式表中，它有很多东西，例如 ..

```
 table {}
           caption{}
           td, th  {}
           tr {}
           thead th, tfoot th {}
           tbody td a  {}
           tbody td a:visited  {}
           tbody td a:hover {}
           tbody th a  {}
           tbody th a:hover {}
           tbody td+td+td+td a {}
           tbody td+td+td+td a:visited  {}
           tbody th, tbody td {}
           tfoot td {}
           tbody tr:hover  {} 
```

如何使所有这些 css 属性仅适用于表（下载的 Css 类）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:24:37.927

ASP.NET 表将呈现为 HTML 表。

您的示例将呈现如下：

```
<table class="downloadedCss">
</table> 
```

因此，您当前的 CSS 规则将全部适用于该表。如果您希望这些样式**仅**应用于此表，请在 CSS 规则中指定类名。

```
 table.downloadedCss {}
       table.downloadedCss caption{}
       table.downloadedCss td, table.downloadedCss th  {}
       table.downloadedCss tr {}
       table.downloadedCss thead th, table.downloadedCss tfoot th {}
       table.downloadedCss tbody td a  {}
       table.downloadedCss tbody td a:visited  {}
       table.downloadedCss tbody td a:hover {}
       table.downloadedCss tbody th a  {}
       table.downloadedCss tbody th a:hover {}
       table.downloadedCss tbody td+td+td+td a {}
       table.downloadedCss tbody td+td+td+td a:visited  {}
       table.downloadedCss tbody th, table.downloadedCss tbody td {}
       table.downloadedCss tfoot td {}
       table.downloadedCss tbody tr:hover  {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:25:42.540

如果你改变

```
table {} 
```

到

```
table.downloadedCss {} 
```

然后在所有其他样式之前添加它，那么只会将这些样式应用于该表。例如

```
table.downloadedCss caption {}
table.downloadedCss td, th {} 
```

但是，我可能会删除很多 CSS，因为我怀疑您是否需要所有这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-25T09:05:32.417

```
<table CssClass="pnlstudentDetails">
        <tr>
            <td>
            </td>
        </tr>
    </table>

To apply Css for all the td elements under the specific table or panel or div try this code .
 .pnlstudentDetails td
        {
            height: 40px;
            vertical-align: middle;
            text-align: left;
            margin-top: 10px;
        } 
```

# c# - 发送电子邮件（使用 gmail 和 C#）桌面还是基于 Web？

> ID：10395781
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:23:12.763
> 
> 标签：c#, asp.net, winforms, newsletter

朋友们，

我知道有很多类似的主题，但我创建这个主题是为了就我的非营利 NGO 网站项目获取专家建议/指导。我是国际扶轮社的志愿者，`They need a utility which can be used to send their newsletter`.

*   我不知道他们拥有什么样的电子邮件数据库，让我们假设 **.xls 文件**包含三列（to、cc、bcc），可能有 1000 条数据，
*   **他们的托管计划中没有可用的数据库**，我现在不能让他们花钱。
*   最有可能的是一个**msword (.doc) 文件**，其中包含一些重图像作为时事通讯。
*   他们有**谷歌应用程序 ID**

**所以我要寻求的是：一种正确、最短、快速、易于理解的方法。**

互联网上有很多代码可用，但正确的做事方式只有经验。所以请建议我你对此有何看法？

独立/桌面，还是基于网络？WinForm 应用程序还是 ASP.NET？

*由于 google 上的 1000 封邮件请求，*桌面应用程序可能会挂起/崩溃。**Web 应用程序*可能会强制他们在 ftp 上共享他们的电子邮件数据库，然后我需要创建另一种在线订阅和取消订阅的方式。*

 *请帮我开始...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:24:37.790

就我个人而言，我会使用（并且确实使用）一个集成的邮件系统，比如[MailChimp](http://mailchimp.com/)

为什么要重新发明轮子？此类服务允许从多种类型的存储上传数据，它们管理您的订阅并为用户提供一种简单的取消订阅方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:39:23.070

您在对 Jamie 的回答的评论中建议您担心“开发后没有人照顾它” - 但是谁来照顾您编写的任何代码？至少像 MailChimp 这样的系统有文档，并且可以被一小部分人理解：您编写的代码只会被您理解，并且不可维护或可扩展。

与任何项目一样，没有“权利”。有简单的权衡。您已经谈到了数千封电子邮件的自动化、订阅和退订以及基于 Word 文档的电子邮件。在一个简单的问答网站上寻求帮助的功能很多。

您说“桌面应用程序可能会挂起/崩溃”——但对于 Web 应用程序来说也是如此，您只是*看不到*挂起。诀窍是以一种*不会*挂起的方式对您的应用程序进行编码。*

# wpf - 从列表框中绑定文本框

> ID：10395785
> 
> 赞同：0
> 
> 时间：2012-05-01T09:23:31.147
> 
> 标签：wpf, binding, listbox

我是 wpf 的新手我正在尝试从 datagrid 绑定列表框代码是这样的

```
DataGrid dataGrid = control as DataGrid;      
Columnslst.ItemsSource = dataGrid.Columns;      
Columnslst.DisplayMemberPath = "Header"; 
```

现在我不会从 xaml 中的 Columnslst 列表框中绑定文本框

```
<TextBox Name="txtGridHeader" Margin="2" Text="{Binding ElementName=Columnslst, Path=SelectedItem.content}" ></TextBox> 
```

但它不起作用

为什么 ？？？

我能做些什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:44:41.563

根据 c# 代码，DataSource 中的每个项目 if 的`DataGridColumn`类型及其属性之一是`Header`，就像您在`DisplayMemberPath`.

在中，`SelectedItem`您应该可以直接访问其中一个对象（如果选择了其中任何一个），所以它仍然是`DataGridColumn`类型。只需尝试在 xaml 中使用这一行：

```
<TextBox Name="txtGridHeader" Margin="2" Text="{Binding ElementName=Columnslst, Path=SelectedItem.Header}" ></TextBox> 
```

让我知道它是否对您有用。

# ubuntu - 错误消息'/usr/bin/ld: 找不到 -lIL'; 如何安装该库？

> ID：10395787
> 
> 赞同：2
> 
> 时间：2012-05-01T09:23:35.527
> 
> 标签：ubuntu, cmake

我首先从*build*`cmake ..`目录内部运行，在 Ubuntu 上安装 OpenFEC (www.openfec.org) ；然后运行命令。在发生以下情况之前一切正常：*`sudo make`*

 *```
Linking C shared library ../../bin/Release/libopenfec.so
/usr/bin/ld: cannot find -lIL 
```

那是什么库，我该如何安装它？

**问题的答案：** 我在这里找到它：[链接](http://packages.ubuntu.com/search?arch=i386&searchon=contents&keywords=libIL.so.1)。

在 Ubuntu 上，它是通过运行以下命令安装的： `sudo apt-get install libdevil1c2 libdevil-dev`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:44:54.650

在 Ubuntu 上，它是通过运行以下命令安装的：

```
sudo apt-get install libdevil1c2 libdevil-dev 
```*

# php - PHP、HTML 中的社交媒体按钮：花费太多时间来加载和扭曲页面

> ID：10395790
> 
> 赞同：0
> 
> 时间：2012-05-01T09:23:45.097
> 
> 标签：php, html, button, media

我使用 PHP 和 HTML 语法在侧边栏添加了社交媒体按钮。然而，每次我刷新页面时，加载需要 4-5 秒，并且在最后一秒它会扭曲页面的所有上下文，然后它变得正常并且看起来完全符合我想要的方式。

有没有办法消除这种时间滞后和页面失真？

这是代码：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>                <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script> 
```

我已经把这部分代码放在了正文中。

```
<div> <g:plusone></g:plusone> </div></br>
    <a href="http://twitter.com/share" class="twitter-share-button" data-count="vertical" data-via="YourSite">Tweet</a>
    <div class="fb-like" data-href="http://ph.one.un.org/omt" data-send="true" data-layout="button_count" data-width="800" data-show-faces="true" data-font="arial"></div></br></br></br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:16:43.290

尝试并做到这一点，这样您就只有一个请求。我通常将[AddThis](http://www.addthis.com/)用于那种事情。这很漂亮。

# java - 服务中的方向监听器

> ID：10395792
> 
> 赞同：1
> 
> 时间：2012-05-01T09:24:11.110
> 
> 标签：java, android, orientation, listener, sleep

我正在编写一个在 BackgroundThread 中启用 OrientationEventListener 的粘性服务。目前，监听器通过 onDestroy() 和/或手动停止服务时被禁用，但在设备进入睡眠状态时它保持活动状态。我猜这会影响电池，因为 SensorManager 保持活动状态。如何在设备进入睡眠状态时停止服务（或禁用监听器）并在打开设备时再次启动服务（或启用监听器）？

这是背景线程：

```
private class BackgroundThread implements Runnable {
    public void run() {
        try {
            while (isRunning){                  
                orientListener.enable();
                Thread.sleep(10000);
            }
            orientListener.disable();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:45:32.623

[这个问题](https://stackoverflow.com/questions/5960924/how-to-detect-whether-screen-is-on-or-off-if-api-level-is-4)应该回答你的。它指向[这篇文章](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)，解释了如何知道屏幕何时打开和关闭。

# java - Java将字符串转换为字节[]

> ID：10395794
> 
> 赞同：-4
> 
> 时间：2012-05-01T09:24:18.187
> 
> 标签：java, android, json

我想知道如果要将包含字节数组的字符串（实际上是图像中的字节）转换为字节数组，应该怎么做。

我想这是一个很常见的问题，所以我想有人可以提出任何建议。

如果将 JSONArray 转换为字节数组更好，我想知道为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T09:29:13.273

> 我想知道如果要将包含字节数组的字符串（实际上是图像中的字节）转换为字节数组，应该怎么做。

这首先取决于您是如何构造字符串的。如果某处使用过的东西

```
new String(imageData) 
```

那么您可能已经丢失了信息。图像数据*不是*文本。

要在文本中传播不透明的二进制数据，您*应该*使用 base64（或可能是十六进制）。Android 已经有一个[`Base64`](http://developer.android.com/reference/android/util/Base64.html)使这变得简单的类：

```
String text = Base64.encodeToString(originalBytes, Base64.DEFAULT);

...

byte[] roundTrip = Base64.decode(text, Base64.DEFAULT); 
```

编辑：如果你不能使用那个类，[这个公共域 base64 编码器](http://iharder.net/base64)应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:29:26.743

字节 [] 到字符串

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
Your_Bitmap.compress(CompressFormat.PNG, 0 , baos); //bm is the bitmap object   
byte[] b = baos.toByteArray(); 
String bytetostring = Base64.encodeToString(b, Base64.DEFAULT);
return bytetostring ; 
```

字符串到字节[]

```
byte[] data = Base64.decode("Your string", Base64.DEFAULT);
Bitmap bitmap = BitmapFactory.decodeByteArray(data , 0, data.length); 
```

# php - 在 DOMDocument->load() 上捕获 404 错误

> ID：10395797
> 
> 赞同：4
> 
> 时间：2012-05-01T09:24:29.600
> 
> 标签：php, xml, dom, rss

我正在使用 DOM 加载一堆 rss 提要，有时一个会 404 而不是生成文件。问题是网络服务器发送了一个 html 404 页面来代替预期的 xml 文件，因此使用以下代码：

```
$rssDom = new DOMDocument();
$rssDom->load($url);
$channel = $rssDom->getElementsByTagName('channel');
$channel = $channel->item(0);
$items = $channel->getElementsByTagName('item'); 
```

我收到这个警告：

```
Warning: DOMDocument::load() [domdocument.load]: Entity 'nbsp' not defined 
```

随后出现此错误：

```
Fatal error: Call to a member function getElementsByTagName() on a non-object 
```

通常，这段代码可以正常工作，但是在我得到 404 的情况下，它什么也做不了。我在 load 语句周围尝试了一个标准的 try-catch，但它似乎没有捕捉到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T09:33:37.840

您可以使用以下方法[抑制解析错误的](http://php.net/manual/en/function.libxml-use-internal-errors.php)输出

```
libxml_use_internal_errors(true); 
```

要检查返回的响应是否为 404，您可以[`$http_response_header`](http://php.net/manual/en/reserved.variables.httpresponseheader.php)在调用后检查`DOMDocument::load()`

例子：

```
libxml_use_internal_errors(true);
$rssDom = new DOMDocument();
$rssDom->load($url);
if (strpos($http_response_header[0], '404')) {
    die('file not found. exiting.');
} 
```

另一种方法是使用`file_get_contents`然后检查响应标头，如果它不是 404，则使用`DOMDocument::loadXml`. 这将防止`DOMDocument`解析无效的 XML。

请注意，所有这些都假定服务器在响应中正确返回了 404 标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:30:24.790

`file_get_contents`使用or手动加载 HTML `curl`（这允许您进行自己的错误检查），如果一切顺利，则将结果提供给[`DOMDocument::loadHTML`](http://php.net/manual/en/domdocument.loadhtml.php).

这里有很多`curl`例子（例如看看[这个](https://stackoverflow.com/questions/6552318/php-curl-library-getting-status-of-curl-exec)，虽然它肯定不是最好的）；获取您将使用的 HTTP 状态代码[`curl_getinfo`](http://www.php.net/manual/en/function.curl-getinfo.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:02:33.863

如果有人需要解决方案，这就像魅力：

```
$objDOM = new DOMDocument();
$loaded=@$objDOM->load(url);

if (!$loaded){
    //something went terribly wrong
} else {
    //this is going ok!!
} 
```

这在我们通过“@”抑制警告时起作用，并且在发生错误时加载返回 true 或 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:33:58.643

为了避免警告，您可以使用[`LIBXML_NOWARNING`](http://www.php.net/manual/en/libxml.constants.php)（注意：通常禁止警告不是一件好事）。

这里更重要的问题是致命错误：为避免这种情况，您应该检查文档是否已正确加载。为此，只需保存[`load()`s 返回值](http://php.net/manual/en/domdocument.load.php)并使用它：

```
$loaded = $rssDom->load($url, LIBXML_NOWARNING);
if($loaded){
    $channel = $rssDom->getElementsByTagName('channel');
    $channel = $channel->item(0);
    $items = $channel->getElementsByTagName('item');
}else{
    // show error-message or something like that
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T09:36:12.620

像这样：

```
$rssDom = new DOMDocument();
if($rssDom->load($url)) {
   $channel = $rssDom->getElementsByTagName('channel');
   $channel = $channel->item(0);
   $items = $channel->getElementsByTagName('item');
} 
```

# jquery - Internet Explorer 中的跨域 POST 请求 ajax

> ID：10395803
> 
> 赞同：3
> 
> 时间：2012-05-01T09:24:45.233
> 
> 标签：jquery, ajax, internet-explorer, post, cross-domain

我正在使用 jQuery 1.7.2 并想向另一个域发出 POST 请求。它必须是一个 POST 请求。但这**在 Internet Explorer 中不起作用**（我在 IE9 上试过）；它适用于所有其他浏览器。

我有这个脚本：

```
<script>
jQuery.support.cors = true;

jQuery(function() {
    $.ajax({
        crossDomain : true,
        cache: false,
        type: 'POST',
        url: 'http://someotherdomain/test.php',
        data: {},
        success: function(da) {
            console.log(JSON.stringify(da))
        },
        error: function(jqxhr) {
            console.log('fail') 
            console.log(JSON.stringify(jqxhr))
        },
        dataType: 'json'
    });
});
</script> 
```

我得到了错误：

```
{"readyState":0,"status":0,"statusText":"Error: Access denied.\r\n"} 
```

我的 PHP 文件如下所示：

```
<?php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, DELETE, PUT, OPTIONS');
echo json_decode(array('success' => 'yes')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:27:58.983

Internet Explorer（包括 IE9）不支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。您必须代理所有跨域请求（发布到同一域上的 PHP 脚本，使用 curl 重新发布您的查询并返回响应）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:25:17.297

要在 IE < 10 中支持 CORS，您必须修改 ajax 方法以使用 XDomainRequest 对象。这个插件为你做：[https ://github.com/jaubourg/ajaxHooks](https://github.com/jaubourg/ajaxHooks)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:05:37.413

您的脚本看起来正确，但我相信您需要更改：

```
header('Access-Control-Allow-Origin: *'); 
```

至

```
header('Access-Control-Allow-Origin: x-requested-with'); 
```

或者

```
header('Access-Control-Allow-Origin: {Origin}'); 
```

其中 {Origin} 是 Origin 标头的值。我的理解是，如果已经给出了 Origin，那么仅仅输入 '*' 是行不通的。

此外，IE8 和 IE9 对此的支持有限，但如果您输入 ，它确实可以工作`jQuery.support.cors = true`，就像您所做的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T23:37:44.843

这适用于 IE9。

```
<!DOCTYPE html>
<head>
<script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript">
var url = "http://msdn.microsoft.com/en-us/library/windows/desktop/ms759148(v=vs.85).aspx";
function getRequest() {
    try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); }
    catch (e) {alert("Error while getting 6.0");}
    try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); }
    catch (e) {alert("Error while getting 3.0");}
    try { return new ActiveXObject("Microsoft.XMLHTTP"); }
    catch (e) {alert("Error while getting 2.0");}
    throw new Error("This browser does not support XMLHttpRequest.");
};
var request = getRequest();
request.open("POST", url, false);
request.send();
alert("Content from :"+url+":"+ request.responseText);
</script>
</head>
<h1>AJAX ActiveX</h1> 
```

# spring-mvc - Spring：在运行时选择自定义视图的最佳方式

> ID：10395804
> 
> 赞同：0
> 
> 时间：2012-05-01T09:24:51.437
> 
> 标签：spring-mvc, view, customization, modelandview

我希望借用某人的大脑（和经验）来找出实现以下内容的最佳方法。

我目前正在开发一个应用程序，该应用程序将被我们的许多客户使用，并且需要根据每个客户的要求进行 UI 定制。尽管底层的 java 代码和业务逻辑是相同的，但在运行时我想（通过一些属性）确定应用程序正在为哪个客户端运行，从而选择相应的视图并显示网页。

目前，我能想到的只是创建一个自定义 ViewResolver（扩展 InternalResourceViewResolver），它将读取客户端名称属性并使用它来解析视图（例如：WEB-INF/jsp//account/myAccount.jsp）或默认为如果客户端属性不存在，则为另一个视图（例如：WEB-INF/jsp/default/account/myAccount.jsp）。

我在这里看到的问题是，我可能不想为应该呈现默认视图的特定客户端覆盖我的所有 JSP。这将需要一个 I/O 调用来检查客户端文件夹中是否存在 JSP 文件，然后再恢复为默认值。为了应对 I/OI，甚至可以在应用程序启动时创建一个覆盖 JSP 的 Map，但这将需要在添加新的自定义 JSP 时重新启动应用程序，这又可以通过公开一些服务来刷新此 Map 来处理。

那你们怎么看？此外，它将如何影响重定向？如果您需要有关我们的设置或要求的更多信息，请告诉我。

问候，
苏米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:59:32.710

您可以使用图块来控制视图的渲染，它有一个与 spring 捆绑的默认视图解析器，您可以扩展它。

定义自定义布局，扩展它们并更改它以防您需要其他行为。

[http://tiles.apache.org/](http://tiles.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:08:23.823

在等待更多评论/建议后，正如 JB 建议的那样，按照问题本身的描述使用我自己的解决方案。

感谢你的帮助。

# sql - 插入带有多个选择语句的临时表

> ID：10395806
> 
> 赞同：2
> 
> 时间：2012-05-01T09:24:59.863
> 
> 标签：sql, sql-server-2008, union, sql-update

我的程序中有一个临时表；我试图从这样的选择语句中插入数据：

```
INSERT INTO #temptable
SELECT fee, expense, total FROM invoice 
UNION
SELECT vat, holdingtax, total FROM uplifts 
```

...但是在我的*temptable*中，只有第一个 select 语句被填充到表中，而下一个 select 语句不插入数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:38:07.890

语法看起来不错，

第二个表中可能存在重复。

您可以使用 Union All 而不是 Union 来测试它。

我会在没有插入的情况下运行查询，看看你是否返回了你期望的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:39:03.613

我假设 UNION 正在删除重复的数据。我刚刚用 union ALL 做了一个测试：

```
insert into #temptable

select top 1 name from sys.tables
union  all
select top 1 name from sys.tables a 
```

我得到了`(2 row(s) affected)`

尝试用 UNION ALL 替换 UNION

# http - nginx在请求后关闭上游连接

> ID：10395807
> 
> 赞同：27
> 
> 时间：2012-05-01T09:25:01.167
> 
> 标签：http, nginx

我需要保持 nginx 和上游 nodejs 之间的连接。

刚刚编译安装nginx 1.2.0

我的配置文件：

```
upstream backend {
    ip_hash;
    server dev:3001;
    server dev:3002;
    server dev:3003;
    server dev:3004;
    keepalive 128;
}

server {
    listen      9000;
    server_name dev;

    location / {
        proxy_pass http://backend;
        error_page  404 = 404.png;
    }
} 
```

我的程序（dev:3001 - 3004）检测到连接在响应后被 nginx 关闭。

[文档](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-01T11:10:07.470

该[文档](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive)指出，对于 http keepalive，您还应该设置`proxy_http_version 1.1;`和`proxy_set_header Connection "";`

# android - 有没有办法在运行时从应用程序内部查看所有 android 日志消息？

> ID：10395809
> 
> 赞同：0
> 
> 时间：2012-05-01T09:25:33.313
> 
> 标签：android, parsing, runtime, logging

我想在运行时从我的应用程序内部解析所有日志消息（也来自其他应用程序）。这有可能吗？

澄清一下，我想在不使用 eclipse、adb 或任何其他外部工具的情况下获取日志消息，但仅限于我的应用程序。

PS：我使用的是安卓2.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:29:05.387

阅读日志..我做类似的事情，

```
String readLogs()
 {
 StringBuilder log = new StringBuilder();
 try {
      Process process = Runtime.getRuntime().exec("logcat -d");
      BufferedReader bufferedReader = new BufferedReader(
      new InputStreamReader(process.getInputStream()));

      String line;
      while ((line = bufferedReader.readLine()) != null) {
        log.append(line);
      }
     } catch (IOException e) {
       return null;
    }
 return log.toString();
 } 
```

在清单文件中添加此权限..

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

# javascript - 如何使用 Google 的 Closure Compiler 将我的 javascript 拆分为模块？

> ID：10395810
> 
> 赞同：21
> 
> 时间：2012-05-01T09:25:37.260
> 
> 标签：javascript, minify, google-closure-compiler

我想在我们正在使用的 javascript 源上使用 google 闭包编译器。在开发模式下，我们倾向于将功能分解为大量文件，但生产环境希望将它们组合成模块。

调用编译器时，我可以给它一个要包含的文件列表以进行编译，但它的输出显示编译器没有保存文件列表的顺序。

我搜索了一下，发现我可以使用*goog.provide/good.require*来控制不同js文件之间的依赖关系。问题在于它向我的 js 添加了我不需要或不想要的代码，例如：

```
goog.provide("mainFile") 
```

将添加这个：

```
var mainFile = {}; 
```

到编译的js文件，我不想要的东西。我们根本没有使用谷歌闭包库，我只想使用编译器。

有没有办法告诉编译器文件的顺序，而不包括更多我不需要的“闭包库”功能？我当然可以创建自己的工具，它首先会获取所有文件，将它们组合成一个，然后作为编译器的输入，但如果它可以由编译器本身完成，我更愿意取消它。

* * *

# 编辑

目标是能够生成类似于此线程中答案的模块：[Using the --module option in Closure Compiler to create multiple output files](https://stackoverflow.com/questions/3204474/using-the-module-option-in-closure-compiler-to-create-multiple-output-files)

所以我想增加控制哪些文件进入哪个模块的能力，同时还可以控制它们的顺序。目前我不使用通配符，但我计划在未来使用通配符（如果可能的话）。

简单地说“cat file1.js file2.js > combine.js && compile...”就可以了，但在我们的例子中它有点复杂，我们必须编写一个基于某些逻辑的程序/脚本。如果我们能以某种方式提前告诉编译器文件的顺序，它可能会节省实现这样一个程序的时间。

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-01T16:41:34.053

Closure-compiler 创建多个输出文件的能力提供了一个强大的工具来将输入文件分成不同的输出块。它的设计使得可以根据所需的功能在不同的时间加载不同的块。有多个与块有关的编译器标志。

每次使用 --chunk 标志都描述了一个输出文件及其依赖项。每个块标志遵循以下语法：

```
--js inputfile.js
--chunk name:num_files:dependency 
```

生成的输出文件将为 name.js 并包含由前面的 --js 标志指定的文件。

依赖选项是您最感兴趣的。它指定父块是什么。块选项必须描述一个有效的依赖树（你必须有一个基本块）。

这是一个例子：

```
--js commonfunctions.js
--chunk common:1
--js page1functions.js
--js page1events.js
--chunk page1:2:common
--js page2function.js
--chunk page2:1:common
--js page1addons.js
--chunk page1addons:1:page1 
```

在这种情况下，您告诉编译器 page1 和 page2 块依赖于公共块，而 page1addons 块依赖于 page1 块。

请记住，如果编译器确定仅由该块使用，则编译器可以并且确实将代码从一个块移动到其他块输出文件中。

这些都不需要闭包库或使用 goog.require/provide 调用，也不会将任何代码添加到您的输出中。如果您希望编译器自动确定依赖关系或能够为您管理这些依赖关系，则需要使用模块格式，例如 CommonJS、ES2015 模块或 goog.require/provide/module 调用。

**更新说明：**在 20180610 版本之前，`chunk`标志被命名为`module`. 它们被重命名以减少与正确的 JS 模块的混淆。答案已更新以反映新名称。

**更新说明 2：**现在有一个实用程序可以为您自动计算和生成这些标志：[https ://github.com/ChadKillingsworth/closure-calculate-chunks](https://github.com/ChadKillingsworth/closure-calculate-chunks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-08T00:00:22.497

您还可以设置输出路径，例如：

--module_output_path_prefix ./public/js/

另请参阅： [使用 Closure Compiler 中的 --module 选项创建多个输出文件](https://stackoverflow.com/questions/3204474/using-the-module-option-in-closure-compiler-to-create-multiple-output-files)

# google-maps - Google Maps API v3 无法制作标记...

> ID：10395813
> 
> 赞同：2
> 
> 时间：2012-05-01T09:25:52.893
> 
> 标签：google-maps, google-maps-api-3

我刚刚建立了一个定制的瓷砖地图网站：[http](http://shuttle.wanglingjie.net/memoire/memoire.html) ://shuttle.wanglingjie.net/memoire/memoire.html 。

但是我在上面做标记时遇到了麻烦。一旦我添加了新的标记代码：

```
 var marker = new google.maps.Marker(
            {
            position: new google.maps.LatLng(0, 0),
            map: map
            }
        ); 
```

制造商没有出现，js 报告错误并显示以下消息：

未捕获的错误：属性值无效：[object HTMLDivElement]

有任何想法吗？感谢您的关注。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:21:49.453

`map`一片空白。在 firebug 中，您的网站会出现此错误：

```
map is not defined
http://shuttle.wanglingjie.net/memoire/memoire.html
Line 129 
```

你的 javascript 代码布局很糟糕，所以很难看出你做错了什么。我认为问题在于您的`window.onload`函数没有右括号：`}`。

您应该将您的 javascript 布局，以便括号中包含的所有代码具有相同的缩进量。例如，您发布的代码应如下所示：

```
var marker = new google.maps.Marker(
    {
        position: new google.maps.LatLng(0, 0),
        map: map
    }
); 
```

也可以这样写：

```
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(0, 0),
    map: map
}); 
```

这使您的代码更易于阅读，并将帮助您发现错误。

如果您需要更多帮助，请编辑您的问题以包含您的函数的全部内容，格式正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:22:30.577

从链接中给出的源代码中，我注意到创建标记的块位于创建地图的函数之外。这就是标记看不到变量的原因`map`。

# javascript - 如何创建不允许分号，冒号单引号和双引号的正则表达式

> ID：10395814
> 
> 赞同：3
> 
> 时间：2012-05-01T09:25:58.513
> 
> 标签：javascript, jquery, html, regex

我正在尝试创建一个不允许分号、冒号单引号和双引号的正则表达式

```
var address=/^[\u0022\u0027\u003A\u003B]{1,50}$/ 
```

地址.test（值）；

这是我的代码

此代码仅在文本框仅包含时运行；:'"

if ;123 此代码未运行

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:53:57.927

在左括号 ([) 后添加一个抑扬符 (^) 字符，以表示否定（“任何字符，但...”）：

```
var address=/^[^\u0022\u0027\u003A\u003B]{1,50}$/ 
```

如果没有它，表达式会测试该值是一个*仅*包含您实际希望*排除*的字符的字符串。

# blackberry - 黑莓 - 当我们点击按钮时如何制作倒数计时器并显示在屏幕上

> ID：10395815
> 
> 赞同：0
> 
> 时间：2012-05-01T09:26:02.143
> 
> 标签：blackberry, timer, blackberry-jde

当我单击屏幕上的按钮时，我想显示倒数计时器。如果我们单击按钮，请向我发送显示计时器的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:31:40.410

试试这个代码 -

```
import java.util.Timer;
import java.util.TimerTask;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.RichTextField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;

public class stopwatch extends MainScreen  
{   

    private RichTextField _chronometer;
    Timer timer;
    private int second = 0, minute = 0, hour = 0;
    private boolean _sec = false, _min = false, _hou = false;
    ButtonField record,stop;

    public stopwatch()
    {

        record=new ButtonField("Start");
        stop=new ButtonField("Stop");

        _chronometer = new RichTextField("0" + hour + ":0" + minute + ":0" + second, RichTextField.TEXT_ALIGN_HCENTER | Field.NON_FOCUSABLE);
        add(_chronometer);

        HorizontalFieldManager hfm=new HorizontalFieldManager(FIELD_HCENTER);
        record.setMargin(net.rim.device.api.system.Display.getHeight()/2,0,0,0);
        stop.setMargin(net.rim.device.api.system.Display.getHeight()/2,0,0,20);
        hfm.add(record);

        hfm.add(stop);

        add(hfm);

        FieldChangeListener listener = new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {

                if(field==record){
                     try 
                        {

                            try {
                                timer = new Timer();
                                resetChronometer();
                                timer.scheduleAtFixedRate(new Chronometer(), 1000, 1000);
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        }  
                        catch (Exception e) 
                        {
                            Dialog.alert(e.toString());
                        }
                }
                if(field==stop){

                        try 
                        {

                                timer.cancel();

                        } 
                        catch (Exception e) 
                        {
                            Dialog.alert(e.toString());
                        }

                }

            }
        };
        record.setChangeListener(listener);
        stop.setChangeListener(listener);

    }

        private class Chronometer extends TimerTask {
            public void run() {
                try {
                    second++;
                    UiApplication.getUiApplication().invokeLater(new Runnable() {
                        public void run() {

                            if (_min == true) {
                                _min = false;
                                minute = minute + 1;
                                second = 0;
                            }

                            if (_hou == true) {
                                _hou = false;
                                hour = hour + 1;
                                minute = 0;
                            }

                            if (second == 59) {
                                _min = true;
                                if (minute == 59) {
                                    _hou = true;
                                }
                            }

                            if (second <= 9 && minute <= 9 && hour <= 9) {
                                _chronometer.setText("0" + hour + ":0" + minute + ":0" + second);
                            }

                            if (second > 9 && minute <= 9 && hour <= 9) {
                                _chronometer.setText("0" + hour + ":0" + minute + ":" + second);
                            }

                            if (second <= 9 && minute > 9 && hour <= 9) {
                                _chronometer.setText("0" + hour + ":" + minute + ":0" + second);
                            }

                            if (second <= 9 && minute <= 9 && hour > 9) {
                                _chronometer.setText("" + hour + ":0" + minute + ":0" + second);
                            }

                            if (second > 9 && minute > 9 && hour > 9) {
                                _chronometer.setText(hour + ":" + minute + ":" + second);
                            }

                            if (second > 9 && minute > 9 && hour <= 9) {
                                _chronometer.setText("0" + hour + ":" + minute + ":" + second);
                            }

                            if (second > 9 && minute <= 9 && hour > 9) {
                                _chronometer.setText("" + hour + ":0" + minute + ":" + second);
                            }

                            if (second <= 9 && minute > 9 && hour > 9) {
                                _chronometer.setText("0" + hour + ":" + minute + ":" + second);
                            }

                            // rt.setText(hour+":"+minute+":"+second);
                        }
                    });

                    // timer.cancel();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

        public void resetChronometer() {
          _chronometer.setText("00:00:00");
          second = 0;
          minute = 0;
          hour = 0;
}

} 
```

# sql - SQL Server 2005：添加 SUM() 时数值表达式的比例发生变化

> ID：10395816
> 
> 赞同：4
> 
> 时间：2012-05-01T09:26:08.110
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个名为“Jrl”的表，包含三列：

```
code  AS varchar(15)
total AS numeric(13,2)
rem   AS numeric(13,4) 
```

为了论证的缘故，我们假设表中只有一行的值为“001”、400.00 和 52.1745。

考虑以下查询：

```
SELECT code, total - rem
 FROM Jrl 
```

它返回一行 '001' 和**347.8255**。这是对的。

如果我按如下方式更改查询（这实际上是我在代码中需要的查询）：

```
SELECT code, SUM(total) - SUM(rem)
 FROM Jrl
 GROUP BY code 
```

它返回一行，其中包含“001”和**347.83**（即，比例尺为 2 而不是 4）。

现在根据[http://msdn.microsoft.com/en-us/library/ms190476%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms190476%28v=sql.90%29.aspx)上的文档，数字表达式（减法）的类型应该是 numeric(16,4 )，显然不是。（我在 SQL Server 2005 和 2008 R2 上得到了相同的行为。）

有人可以告诉我那里发生了什么吗？

顺便提一句。我确实找到了解决方法，但我不喜欢它，这就是我发布这个问题的原因。解决方法是添加显式强制转换：

```
SELECT code, CAST(SUM(total) AS numeric(13,4)) - SUM(rem)
 FROM Jrl
 GROUP BY code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T10:50:43.127

1）请运行此脚本并阅读我的评论。

2）我希望这个答案会对你有所帮助。

3) SUM()-SUM() 的精度为 2，因为您选择先求和 (`SUM(total)`和`SUM(rem)`)，然后再减去 ( `SUM(total) - SUM(rem)`)。

4）我的建议是使用`SELECT t.code, SUM(t.total - t.rem) AS diff ...`（先减去然后求和）。

5) 你可以阅读我对这个问题的回答[SQL Numeric data type truncating value?](https://stackoverflow.com/questions/7913328/sql-numeric-data-type-truncating-value/7915163#7915163) ：

```
DECLARE @Test TABLE(
    code  varchar(15),
    total numeric(13,2),
    rem   numeric(13,4)
);

INSERT  @Test (code, total, rem)
VALUES  ('001', 11.78, 5.6789);

--Test [1]
SELECT  dt.*,
        SQL_VARIANT_PROPERTY(dt.diff, 'BaseType') AS diff_BaseType,
        SQL_VARIANT_PROPERTY(dt.diff, 'Precision') AS diff_Precision,
        SQL_VARIANT_PROPERTY(dt.diff, 'Scale') AS diff_Scale
FROM
(
        SELECT  t.code, t.total - t.rem AS diff
        FROM    @Test t
) dt;

/*
Operation: e1 - e2
Result precision: max(s1, s2) + max(p1-s1, p2-s2) + 1 = max(2,4) + max(13-2, 13-4) + 1 = 4 + 11 + 1 = 16
Result scale: max(s1, s2) = max(2, 4) = 4
*/

--Test [2]
SELECT  dt.*,
        SQL_VARIANT_PROPERTY(dt.diff, 'BaseType') AS diff_BaseType,
        SQL_VARIANT_PROPERTY(dt.diff, 'Precision') AS diff_Precision,
        SQL_VARIANT_PROPERTY(dt.diff, 'Scale') AS diff_Scale
FROM
(
        SELECT  t.code, SUM(t.total - t.rem) AS diff
        FROM    @Test t
        GROUP BY t.code
) dt;

/*
Operation: SUM(e1 - e2)
Result precision: 38--For SUM function, I think (it's just a hipotese), SQL Server choose the maximum precision to prevent the overflow error
                    Argument:
                    DECLARE @t TABLE (Col NUMERIC(2,1)); INSERT @t VALUES (1);
                    SELECT  SQL_VARIANT_PROPERTY(SUM(t.Col), 'Precision') FROM @t t;
                    Result: precision = 38 (maximum DECIMAL/NUMERIC precision)
Result scale: the same scale as (e1-e2)= 4 (please see Test [1])
*/

--Test [3]
SELECT  dt.*,
        SQL_VARIANT_PROPERTY(dt.SUM_total, 'BaseType')  AS SUM_total_BaseType,
        SQL_VARIANT_PROPERTY(dt.SUM_total, 'Precision') AS SUM_total_Precision,
        SQL_VARIANT_PROPERTY(dt.SUM_total, 'Scale')     AS SUM_total_Scale,

        SQL_VARIANT_PROPERTY(dt.SUM_rem, 'BaseType')    AS SUM_rem_BaseType,
        SQL_VARIANT_PROPERTY(dt.SUM_rem, 'Precision')   AS SUM_rem_Precision,
        SQL_VARIANT_PROPERTY(dt.SUM_rem, 'Scale')       AS SUM_rem_Scale,

        SQL_VARIANT_PROPERTY(dt.diff, 'BaseType')       AS diff_BaseType,
        SQL_VARIANT_PROPERTY(dt.diff, 'Precision')      AS diff_Precision,
        SQL_VARIANT_PROPERTY(dt.diff, 'Scale')          AS diff_Scale
FROM
(
        SELECT  t.code, 
                SUM(t.total) AS SUM_total, SUM(t.rem) AS SUM_rem, SUM(t.total) - SUM(t.rem) AS diff
        FROM    @Test t
        GROUP BY t.code
) dt;

/*
Operation: SUM(total) (<> e1 + e2 + ...)
Result precision: 38--I think SQL Server choose the maximum precision to prevent the overflow error
Result scale: the same precision as total= 2
*/

/*
Operation: SUM(rem) (<> e1 + e2 + ...)
Result precision: 38--I think SQL Server choose the maximum precision to prevent the overflow error
Result scale: the same precision as rem= 4
*/

/*
Operation: SUM(total) - SUM(rem) = e1 - e2
Result precision: max(s1, s2) + max(p1-s1, p2-s2) + 1 = max(2,4) + max(38-2, 38-4) + 1 = 4 + 36 + 1 = 41 
but max. precision is 38 so result precision = 38

Calculated result scale: max(s1, s2) = 4 
but because the real precision for result (41) is greater than maximum precision (38)
SQL Server choose to decrease the precision of the result to 2 (please see Test [3] - diff_Scale).
In this case (the real precision for result is greater than maximum precision) I think the 
expression for result's precision is max(s1, s2) - (real precision - maximum precision) + 1 = 4 - (41 - 38) + 1 = 4 - 3 + 1 = 2
For example you could try to modify the definition of total column to `total numeric(13,1)` 
and you will see that the precision for SUM(total) - SUM(rem) becomes 4 - 4(4+37+1=42) + 1 = 1
*/ 
```

结果：

```
--Test [1] SELECT t.code, t.total - t.rem AS diff
code diff   diff_BaseType  diff_Precision diff_Scale
---- ------ -------------- -------------- ----------
001  6.1011 numeric        16             4

--Test [2] SELECT t.code, SUM(t.total - t.rem) AS diff
code diff   diff_BaseType diff_Precision diff_Scale
---- ------ ------------- -------------- ----------
001  6.1011 numeric       38             4

--Test [3] SELECT t.code, ..., SUM(t.total) - SUM(t.rem) AS diff
code SUM_total SUM_rem diff SUM_total_BaseType SUM_total_Precision SUM_total_Scale SUM_rem_BaseType SUM_rem_Precision SUM_rem_Scale diff_BaseType diff_Precision diff_Scale
---- --------- ------- ---- ------------------ ------------------- --------------- ---------------- ------------------------------- ------------- -------------- ----------
001  11.78     5.6789  6.10 numeric            38                  2               numeric          38                4             numeric       38             2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:33:39.187

那是因为`total AS numeric(13,2)`场

由于您要减去具有不同精度的两个字段的总和，因此 sql server 会以最小的精度显示结果。

如果你这样做：

```
 create table jrl2(
code  varchar(15),
total numeric(13,4),
rem   numeric(13,4)
)
insert into jrl2 values ('001', 400.00 , 52.1745)

select * from jrl2
SELECT code, total - rem  FROM Jrl

SELECT code, SUM(total) - SUM(rem)
 FROM Jrl2
 GROUP BY code 
```

你会得到：`347.8255`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:50:54.383

安德烈亚斯，

问题是 SUM() 的返回类型使用 38 的最大精度。（请参阅联机丛书中 SUM 下的“返回类型”部分：http: [//msdn.microsoft.com/en-us/library/ms187810% 28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms187810%28v=sql.90%29.aspx)。）

您的“总计”列的类型是数字（13,2），因此 SUM（总计）的结果类型是（不幸的是）数字（38,2）。当操作数的精度为 38 时，e1 + e2 的比例（再次不幸）不是 max(s1,s2)。

这在 BOL 的脚注中提到：http: [//msdn.microsoft.com/en-us/library/ms190476.aspx](http://msdn.microsoft.com/en-us/library/ms190476.aspx)。**结果精度和小数位数的绝对最大值为 38。当结果精度大于 38 时，相应的小数位数会减小，以防止结果的整数部分被截断。*

另请参阅[http://support.microsoft.com/kb/281341](http://support.microsoft.com/kb/281341)。

# java - 使用 Jetty 运行多模块 Maven Web 应用程序，HTTP 错误：503 SERVICE_UNAVAILABLE

> ID：10395817
> 
> 赞同：0
> 
> 时间：2012-05-01T09:26:10.230
> 
> 标签：java, eclipse, maven, jetty

我有一个多模块 Maven Web 应用程序，我想用 Jetty 在 Eclipse 中运行它。我阅读了几篇教程（[这是](http://eureka.ykyuen.info/2010/03/08/maven-run-webapp-by-maven-jetty-plugin/)我尝试遵循的一篇）。

我认为需要做的就是`pom.xml`在项目的 Spring web 模块中添加插件和依赖项，然后在`mvn jetty:run`（再次，在 web Spring Maven 模块中）运行应用程序并能够看到结果在浏览器中。所以，第一个问题是：我是否必须做其他事情（例如在`web.xml`文件中）？

**编辑**：我还必须添加`<pluginGroup>org.mortbay.jetty</pluginGroup>`Maven 的 settings.xml 以启动服务器而不会出现错误。

我明白了`HTTP ERROR: 503 SERVICE_UNAVAILABLE`。可能的原因是什么？我是否需要更多依赖项或添加其他内容？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:34:51.177

首先，您还需要将插件添加到通常的构建部分，而不仅仅是 pluginManagement 块。

```
 <project ...>

    <build>
       <plugins>
          <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
          </plugin>
          ...
       </plugins>
..
    </build>
  </project> 
```

此外，我建议您更新[maven-site-plugin](http://maven.apache.org/plugins/maven-site-plugin/)，因为您使用的是非常旧的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:03:37.240

根据Jetty尝试启动时写的，我不得不添加MySql依赖。随之`HTTP ERROR: 503 SERVICE_UNAVAILABLE`消失。

这是`pom.xml`我添加到使用 Jetty 的项目的 Spring web 模块的一部分（以防万一有人需要它。也许，我可以从这`pom.xml`部分删除一些东西，我还没有检查。）：

```
 <build>

      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-site-plugin</artifactId>
          <!-- Lock down plugin version for build reproducibility -->
          <version>3.0</version>
        </plugin>  

        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.14</version>
            <configuration>
                <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>9090</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
     </plugins>

  </build>

  <properties>
      <org.springframework.version>3.1.0.RELEASE</org.springframework.version>
      <jetty.version>6.1.14</jetty.version>
  </properties>

  <dependencies>
    <!-- In my case Jetty needs this one to run -->   
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.6</version>
    </dependency>        
    <!-- Jetty dependencies -->
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
        <version>${jetty.version}</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-util</artifactId>
        <version>${jetty.version}</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-plus</artifactId>
        <version>${jetty.version}</version>
        <type>jar</type>
    </dependency>
    <!--The 2 following are the jsp support for jetty -->
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jsp-2.1</artifactId>
        <version>${jetty.version}</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jsp-api-2.1</artifactId>
        <version>${jetty.version}</version>
        <type>jar</type>
    </dependency> 
```

# asp.net-mvc - Visual Studio 2010 上的 ASP MVC RTM

> ID：10395819
> 
> 赞同：0
> 
> 时间：2012-05-01T09:26:23.477
> 
> 标签：asp.net-mvc

如果我将 ASP MVC 4 Beta 与 VS 2010 一起使用，当 RTM 出来时，我是否可以将它与 VS 2010 一起使用，即不会被迫升级到 VS 11？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:30:04.767

ASP.NET MVC 4 发布后将可用于 VS 2010。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:36:27.390

没有人确切知道，但我会说是的，但是 RTM 中可能有一些工具在 2010 版本中不可用。功能方面我看不到任何问题。

# java - 使用 html 更改 XML 值

> ID：10395822
> 
> 赞同：0
> 
> 时间：2012-05-01T09:26:33.297
> 
> 标签：java, jquery, html, xml, ajax

这个问题已经被问过不止一次，但不知何故我没有让事情发挥作用。我已经在这个问题上苦苦挣扎了几个小时了。

我有一个xml文件：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<news>
   <field id="nettooppervlakte1">

           <name>Opp. netto</name>
           <content>970</content>
           <background>1</background>

   </field>
   <field id="nettooppervlakte2">

           <name>Ras 1</name>
           <content>Euro sunny</content>
           <background>1</background>

   </field>
   <field id="nettooppervlakte3">

           <name>Plantdichtheid 1 (st/m²)</name>
           <content>45</content>
           <background>1</background>

   </field>
</news> 
```

xml 文件更大，但无需发布整个文件（获得更多字段）。

然后我在 html（脚本）中使用它来获取信息：

```
$(document).ready(function(){
        var id = 0;
    $.ajax({
    type: "GET",
    url:"http://www.officespecialisten.it/wesleyfloor/table.xml",
    dataType: "xml",
    success: function(xml) {

    $(xml).find('field').each(function(){
    var name = $(this).find('name').text();
    var content = $(this).find('content').text();
    var days = $(this).find('days').text();
    var day = $(this).find('day').text();
    var week = $(this).find('week').text();
    var year = $(this).find('year').text();

   $('<div class="items" id="link_'+"nettooppervlakte"+id+'"></div>'+id++).html(name+'</a>').appendTo('#'+id+'name');
    $('<div class="items" id="link_'+"nettooppervlakte"+id+'"></div>').html(content+'</a>').appendTo('#'+id+'content');
     $('<div class="items" id="link_'+"nettooppervlakte"+id+'"></div>').html(days+'</a>').appendTo('#'+id+'days');
      $('<div class="items" id="link_'+"nettooppervlakte"+id+'"></div>').html(day+'</a>').appendTo('#'+id+'day');
       $('<div class="items" id="link_'+"nettooppervlakte"+id+'"></div>').html(week+'</a>').appendTo('#'+id+'week');
        $('<div class="items" id="link_'+"nettooppervlakte"+id+'"></div>').html(year+'</a>').appendTo('#'+id+'year');

            });

            }
   });
}); 
```

并将其放入表格（html）中：

```
<tr>
    <td colspan="2"  bgcolor="#ade500"><div id="1name"></div></td>
    <td colspan="2" bgcolor="#ade500"><div id="1content"></td>
</tr>
<tr>
     <td colspan="2" bgcolor="#ade500"><div id="2name"></div></td>
     <td width="2" bgcolor="#ffffcc"><div id="2content"> </td>

 </tr>
 <tr>
     <td colspan="2" bgcolor="#ade500"><div id="3name"></div></td>
     <td colspan="2" bgcolor="#ffffcc" ><div id="3content"></div></td>
 </tr> 
```

现在的问题是，我希望用户可以（使用输入框或其他东西）更改（例如）“3content”的值：

```
<td colspan="2" bgcolor="#ffffcc" ><div id="3content"></div></td> 
```

这是什么 xml 行：

```
<content>45</content> 
```

这可以轻松完成吗？因为我已经看到/尝试了一些页面长的代码（没有全部尝试）来更改 1 个 XML 值，所以我认为这应该不是什么大问题。

我处于 HTML/XML 的最开始。我曾经做过 android Java、actionscript3、c++（主要是用 CML 库）。还有我制作的第一个真正的网站。

如果您需要了解更多信息或对某事的解释，请询问。

已经感谢您的耐心等待，

大流量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:32:32.500

您需要监视单击事件并放置一个带有输入的表单。与其自己编写代码，不如使用许多插件（搜索“jquery 内联编辑”）。这是一个流行的：[Jeditable](http://www.appelsiini.net/projects/jeditable)

# java - 使用从 XML 文件中提取的数据创建正则表达式

> ID：10395825
> 
> 赞同：0
> 
> 时间：2012-05-01T09:26:57.190
> 
> 标签：java, xml, parsing, dom, xml-parsing

我正在解析一个 xml 文件，该文件的节点包含如下文本：

```
 <?xml version="1.0"  encoding="iso-8859-1"?>
<country>
  <name> France </name>
  <city> Paris </city>
  <region>
    <name> Nord-Pas De Calais </name>
    <population> 3996 </population>
    <city> Lille </city>
  </region>
  <region>
    <name> Valle du Rhone </name>
    <city> Lyon </city>
    <city> Valence </city>
  </region>
</country> 
```

我想要得到的是这样的值：

```
country -> name.city.region*
region  -> name.(population|epsilon).city*
name    -> epsilon
city    -> epsilon
population -> epsilon 
```

我想不出一种方法来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:43:15.653

我添加了一个示例程序。请以同样的方式继续阅读。

```
public class TextXML {

    public static void main(String[] args) {
        try {

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.parse(new File("text.xml"));

            // list of country elements
            NodeList listOfCountry = doc.getElementsByTagName("country");
            for (int s = 0; s < listOfCountry.getLength(); s++) {

                Node countyNode = listOfCountry.item(s);

                if (countyNode.getNodeType() == Node.ELEMENT_NODE) {

                    Element countyElement = (Element) countyNode;

                    NodeList nameList = countyElement.getElementsByTagName("name");
                    // we have only one name. Element Tag
                    Element nameElement = (Element) nameList.item(0);
                    System.out.println("Name : " + nameElement.getTextContent());

                    NodeList cityList = countyElement.getElementsByTagName("city");
                    // we have only one name. Element Tag
                    Element cityElement = (Element) cityList.item(0);
                    System.out.println("City : " + cityElement.getTextContent());

                    NodeList regionList = countyElement.getElementsByTagName("region");
                    // we have only one name. Element Tag
                    Element regionElement = (Element) regionList.item(0);
                    System.out.println("Region : " + regionElement.getTextContent());

                    //continue further same way.
                }

            }

        } catch (SAXParseException err) {
            err.printStackTrace();
        } catch (SAXException e) {
            Exception x = e.getException();
            ((x == null) ? e : x).printStackTrace();

        } catch (Throwable t) {
            t.printStackTrace();
        }
    }

} 
```

# android - 在 webview 中显示预加载的位图

> ID：10395826
> 
> 赞同：2
> 
> 时间：2012-05-01T09:27:00.287
> 
> 标签：android, webview, bitmap

我有一个自定义 ListView 可以延迟加载远程图像。当您单击一个列表项时，它会启动一个新 Activity 并在 web 视图中显示图像。问题是，webview 总是加载图像，即使图像是由 listview 适配器预加载的。我希望 WebView仅在未预加载**时才加载图像！**

这是我在列表视图中预加载图像的方法：

```
public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);
    }
} 
```

延迟加载的图像存储在 FileCache 中：

```
public FileCache(Context context){
    //Find the dir to save cached images
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"LazyList");
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs();
}

public File getFile(String url){
    //I identify images by hashcode. Not a perfect solution, good for the demo.
    String filename=String.valueOf(url.hashCode());
    //Another possible solution (thanks to grantland)
    //String filename = URLEncoder.encode(url);
    File f = new File(cacheDir, filename);
    return f;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:11:55.243

处理这个问题的正确方法是安装一个[`HttpResponseCache`](http://developer.android.com/reference/android/net/http/HttpResponseCache.html)用于下载图像的客户端/连接。尽管直到 API 级别 13 才提供平台实现，但有一个适用于 Android 1.5 及更高版本的[向后移植版本。](https://github.com/candrews/HttpResponseCache)这种缓存机制只适用于`Http(s)URLConnection`；如果您使用`HttpClient`，您将需要 Apache 的[HttpClient Caching Module](http://candrews.integralblue.com/2011/09/best-way-to-use-httpclient-in-android/)。

如果您正在寻求快速解决方案，您还可以查看`WebViewClient`'s[`shouldInterceptRequest(...)`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)方法。通过覆盖该方法，如果我没记错的话，您可以拦截在即将获取资源（包括图像）时触发的请求。您可以执行一个检查，执行本地查找以查看图像是否已经下载，如果是，则将其返回包装在`WebResourceResponse`. 如果文件在本地不可用，只需不做任何事情，让客户端处理下载。这样做的缺点是 webclient 下载的任何内容都不能用于惰性图像加载器。

# c# - 如何调用动态外部 dll

> ID：10395830
> 
> 赞同：1
> 
> 时间：2012-05-01T09:27:24.110
> 
> 标签：c#, dll

在 C# 中，我想用签名调用外部 DLL 中的方法`bool IsValid(string)`，但 dll 的名称来自作为字符串的输入。

我怎样才能：

1.  调用外部方法？

2.  实现`IsValid`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:18:06.893

对于第一个问题，我找到了这个答案：

```
string path = ApplicationMapPath+ objDLLName + ".dll";
System.Reflection.Assembly a = System.Reflection.Assembly.LoadFile(path);
Type t = a.GetType("<namespace>.<Class>");
object instance = a.CreateInstance("<namespace>.<Class>");

MethodInfo m = t.GetMethod("<FuncName>");// Call the method
object res = m.Invoke(instance, new object[] { txtBox.Text }); // Get the result here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T20:11:10.317

外部 DLL 是托管的还是非托管的？

如果它是托管 DLL，[`Assembly.LoadFrom`](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)将允许您加载它并从其中的类调用函数。

对于非托管 DLL，@lcfseth 的链接是正确的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T09:39:17.363

我能想到的唯一方法是使用 Win32 库和特殊的 LoadLibrary API 函数。这是一个可以帮助您入门的链接：

[http://www.codeproject.com/Articles/27298/Dynamic-Invoke-C-DLL-function-in-C](http://www.codeproject.com/Articles/27298/Dynamic-Invoke-C-DLL-function-in-C)

# x86-16 - 是否允许添加 A,5？

> ID：10395831
> 
> 赞同：0
> 
> 时间：2012-05-01T09:27:39.337
> 
> 标签：x86-16, assembly

```
ADD A, 5 
```

现在 A 和 5 都是立即数。汇编语言允许吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:27:26.233

如果`A`真的是立即数（定义类似`A EQU 7`或类似），这在 x86 中是不允许的。通常不允许带有立即目标操作数的指令，因为结果将被丢弃。

您更有可能在您的问题中做出错误的假设“现在 A 和 5 都是即时的”，并且 sehe 的解释是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T09:31:04.840

这是英特尔语法风格吗？什么是A？

通常`A`是一个地址（实际上是一个变量）。**如果是这样，它是允许的**。查找 A 的定义（例如带有该标签的 DD 伪指令）

如果 a 是十六进制数（通常写为 0Ah，但 %0x0a）当然，它不能工作

# ios - QuickDialog - 如何选择 QSelectItemElement=

> ID：10395835
> 
> 赞同：0
> 
> 时间：2012-05-01T09:28:13.227
> 
> 标签：ios, forms, quickdialog

我在我的应用程序中使用 QuickDialog 向用户显示搜索对话框。问题：我必须在控制器中设置一些默认值，这意味着切换 QBooleanElement 或 - 在这种特殊情况下 - 选择 QSelectItemElement。

有什么方法可以做到吗？

此外：是否有 QuickDialog 的任何文档？我找不到任何:(

在此先感谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:16:46.957

简单地将 QBooleanElement 设置为 YES/NO 值

```
QBooleanElement *qboolean = [[QBooleanElement alloc] initWithTitle:@"title" BoolValue:YES];
                    qboolean.key = @"booleanElementKey";
                    [firstSection addElement:qboolean]; 
```

如果最近您需要在不与用户交互的情况下设置值，您可以通过以下方式进行：

```
QBooleanElement* thisElement = (QBooleanElement*)[self.root elementWithKey:@"booleanElementKey"];
thisElement.boolValue = NO;

...
[self.quickDialogTableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:04:25.150

要切换 QBooleanElement 中的值，您只需根据需要设置属性，然后调用 [quickdialogTableView reloadData] 来刷新表格。如果您愿意，也可以逐个单元格地刷新。

QD 的文档仍然很少，我刚刚开始研究它。如果您愿意贡献，请告诉我！:)

# opencv - OpenCV中的旋转轮廓

> ID：10395839
> 
> 赞同：0
> 
> 时间：2012-05-01T09:28:50.837
> 
> 标签：opencv

我得到了源图像的轮廓。我画了 4 条线来近似这些轮廓：

1.  从轮廓的最小宽度到最小高度。
2.  从轮廓的最小宽度到最大高度。
3.  从轮廓的最大宽度到最小高度。
4.  从轮廓的最大宽度到最大高度。

我想旋转这个矩形，使其与宽度对齐（即图像的 x 坐标）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-29T01:48:36.550

这可能会帮助你

```
rect = cv2.minAreaRect(yourcontour)
angle = rect[2]

if angle < -45:
    angle = (90 + angle)

# otherwise, just take the inverse of the angle to make
# it positive
else:
    angle = -angle  

# rotate the image to deskew it
(h, w) = img.shape[:2]
center = (w // 2, h // 2)
M = cv2.getRotationMatrix2D(center, angle, 1.0)
rotated = cv2.warpAffine(img, M, (w, h),
    flags=cv2.INTER_CUBIC, borderMode=cv2.BORDER_REPLICATE) 
```

# android - 添加安卓库

> ID：10395840
> 
> 赞同：0
> 
> 时间：2012-05-01T09:28:52.943
> 
> 标签：android, add

我不小心删除了“Android 3.2”库（实际上我想用“2.1”替换它）。现在不知道怎么加回来。

这里是删除前：

![在此处输入图像描述](../Images/c0ff9888d90d48e17b4a12e0469fbd01.png)

在这里，我有 android 平台：

![在此处输入图像描述](../Images/15d9be2ce5fa3dc960ee50f1dfa84bc5.png)

我也尝试了“添加外部 JAR”、“添加库”等，但最终结果与第一个屏幕截图不同，因此我的应用程序无法运行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:33:15.297

好的，在 Eclipse 中：Window -> Android SDK Manager

然后安装你想要的所有平台。

然后右键单击 project->properties->android 并选择您想要的平台；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:33:03.750

您需要将清单更改为`<uses-sdk android:minSdkVersion="10" />`(2.3.3) 而不是使用`<uses-sdk android:minSdkVersion="12" />`(3.1)。

更多信息：http: [//developer.android.com/guide/appendix/api-levels.html](http://developer.android.com/guide/appendix/api-levels.html)

# android - 获取 WebView 的 AlertDialog 视图

> ID：10395846
> 
> 赞同：0
> 
> 时间：2012-05-01T09:29:01.853
> 
> 标签：android, cordova, junit, webview

我正在为基于 JUnit 的 Android Cordova/PhoneGap 应用程序创建一个场景测试框架。我想测试一个场景：您单击网页中的某个按钮（显示在 Android WebView 中），它会打开一个弹出窗口（一个 AlertDialog）。我想检查此弹出窗口上的消息并单击其中一个按钮。因此我需要这个 AlertDialog 的视图对象。

我知道您可以使用 findViewById，但您必须提供一个 id 作为参数，因为对话框是使用以下代码创建的，所以我没有这个参数：

```
AlertDialog.Builder dlg = new AlertDialog.Builder(ctx.getContext());
dlg.setMessage(message);
dlg.setTitle(title);
....
dlg.create();
dlg.show(); 
```

知道如何访问正确的视图吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:48:16.497

`TextView`包含'的`AlertDialog`消息始终由 标识`android.R.id.message`。如果您捕获 的结果`dlg.create()`，您应该能够`TextView`通过调用`.findViewById(android.R.id.message)`它来获取对消息的引用，然后您可以从中获取文本。

# java - Java ArrayList 转换问题

> ID：10395852
> 
> 赞同：0
> 
> 时间：2012-05-01T09:29:24.553
> 
> 标签：java

我在 Java 中有一个 ArrayList，它充满了 int。我正在通过 get 方法访问它。现在，我需要数组列表 int 对象作为 int 来执行一些操作。所以，我正在做的是，

```
int i = Integer.parseInt(arraylist.get(position).toString()) + 100 ... 
```

有没有其他好的方法（意味着有效）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:31:49.123

是的 - 不要转换为字符串并返回！

```
int i = arrayList.get(position).intValue() + 100; 
```

或使用自动拆箱：

```
int i = arrayList.get(position) + 100; 
```

正如评论中所指出的，当表达式仅用于赋值表达式（或作为方法参数）时，我对自动拆箱感到满意 - 当它用作算术表达式的一部分时，我通常更喜欢使其明确。

（请注意，您的列表将充满`Integer`引用，而不是`int`值。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T09:32:58.483

您使用的是什么版本的 Java？从 Java 1.5 开始，“自动装箱”功能应该会为您解决这个问题。

```
int i = arrayList.get(position) + 100; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T09:33:08.123

也许：

```
List<Integer> myList = new ArrayList<Integer>();
myList.put(1);
myList.put(2);
...
int num = myList.get(index) + 100; 
```

或者做任何你喜欢的事情，collection 将只包含整数，所以你不必转换它。另外，自动装箱处理 int->Integer 和返回。

# c# - 处理来自另一个进程的鼠标事件

> ID：10395858
> 
> 赞同：0
> 
> 时间：2012-05-01T09:29:47.650
> 
> 标签：c#, process, event-handling

在我的程序中，我使用类 Process 来启动另一个应用程序。此应用程序启动全屏。我的目的是在我的程序中处理来自该应用程序的鼠标点击。我应该使用哪些 WinApi 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:38:43.867

通过“WinApi”，我假设您的意思是“Win32”。

为了处理另一个进程的消息，您需要安装一个 Win32 挂钩。有关更多详细信息，请参阅[本文](http://hyper.sunjapan.com.cn/~hz/win32/hooks32.htm)。您需要 WH_MOUSE 挂钩和 SetWindowsHookEx Win32 API。

钩子函数需要在 DLL 中，以便可以在任何进程中注入。您将需要为您启动的流程过滤收到的消息。

挂钩函数必须是全局函数，因此您必须使用 C++ 对其进行编码。如果需要，您还需要使用一些进程间通信来与您的主程序进行通信。

# spring - spring 或 springMVC 是否有可用的编码标准？

> ID：10395859
> 
> 赞同：0
> 
> 时间：2012-05-01T09:29:50.033
> 
> 标签：spring, spring-mvc

是否有任何可用于 spring 或 springMVC 的编码标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:38:52.370

据我所知，没有这样的标准。但是有几个类级别的注释用于描述特定 bean 的角色，例如

@Component、@Repository、@Service、@Controller。

# javascript - 这个滑块是如何完成的，它看起来是 js，但它会改变每张幻灯片的 url

> ID：10395860
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:29:52.570
> 
> 标签：javascript, jquery

> **可能重复：**
> [修改 URL 而不重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)

我刚看到这个网站，[http://www.so-design.co.uk/#/brand/1](http://www.so-design.co.uk/#/brand/1)，如果您使用滑块，它会像任何普通图像滑块一样更改图像，但它也会将 url 更改为 / brand/1, /brand/2 等我想这意味着所有幻灯片及其内容都被搜索引擎作为单独的页面抓取

任何想法他们是如何做到这一点的？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:35:03.333

您可能想看看如何[操作浏览器的历史记录](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)以及[`history property`](https://developer.mozilla.org/en/DOM/window.history). 此外，[使用](https://developer.mozilla.org/en/DOM/window.location#Properties)`window.location.hash`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:55:33.207

当您想尝试了解网站的开发方式时，要做的第一件事就是查看源代码。

最快的方法是右键单击页面并查找“查看页面源代码”或类似内容（取决于您的浏览器）

当然，在这种情况下，当您右键单击时，网站使用[Adob​​e Flash](http://www.adobe.com/products/flash.html)应该会很明显。因此，这不是您最初假设的典型 JavaScript 滑块。

# c - 加载共享库时出错：libcudart.so.4：无法打开共享对象文件：没有这样的文件或目录

> ID：10395866
> 
> 赞同：3
> 
> 时间：2012-05-01T09:30:21.727
> 
> 标签：c, linux, cuda, redhat

我正在尝试在集群上执行 MPI 和 CUDA 代码。该代码在单机上运行良好，但是当我尝试在集群上执行它时出现错误：

加载共享库时出错：libcudart.so.4：无法打开共享对象文件：没有这样的文件或目录

我检查了我的 PATH 和 LD_PATH ，它看起来没问题。我有一个 .bashrc 文件，其中包含以下条目 -

导出 PATH=$PATH:/usr/local/lib/:/usr/local/lib/openmpi:/usr/local/cuda/bin 导出 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib:/usr/local/lib /openmpi/:/usr/local/cuda/lib

所有机器都安装了相同的 CUDA 和 OpenMPI。

我在 /etc/ld.so.conf 中也有 /usr/local/cuda/lib

谁能帮我这个。这个问题真的很烦人。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:40:36.630

如果您要在集群上发送批处理作业，请添加类似的命令

```
echo $LD_LIBRARY_PATH 
ldd ./your_app 
```

到您的批处理脚本。这应该有助于调试问题。

还要确保在 mpirun 中导出环境变量。例如，在 OpenMPI 中，您可以使用

```
mpirun -x LD_LIBRARY_PATH ... 
```

# ios - 用 NSNumbers 保存普通的 NSArray

> ID：10395872
> 
> 赞同：0
> 
> 时间：2012-05-01T09:30:52.633
> 
> 标签：ios, nsarray, nsuserdefaults

我被难住了。我只是想将填充了 NSNumbers 或 NSStrings 的 NSArray 保存到 NSUserDefaults。奇怪的是，如果我在阅读之前保存它，它会起作用 - 但如果我不保存并阅读它（在之前的发布中保存之后）它是零。就像每次我在 XCode 中点击 Run (Command-R) 时，默认值都会被清除。

```
NSArray *arrayToSave = [NSArray arrayWithObjects: [NSNumber numberWithInt:1], [NSNumber numberWithInt:2], [NSNumber numberWithInt:3], nil];
[[NSUserDefaults standardUserDefaults] setObject:arrayToSave forKey:@"TestKey"];  //if I comment this line arrayRead will be nil even after I had saved it with this line on a prior run 
```

阅读：

```
NSArray *arrayRead = [[NSUserDefaults standardUserDefaults] objectForKey: @"TestKey"];
NSLog(@"arrayRead: %@", arrayRead); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:49:08.397

您应该[`synchronize`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html#//apple_ref/doc/uid/20000318-CIHDDEGI)在写入用户默认值后调用：

```
// Write
NSArray *arrayToSave = [NSArray arrayWithObjects: [NSNumber numberWithInt:1], [NSNumber numberWithInt:2], [NSNumber numberWithInt:3], nil];
[[NSUserDefaults standardUserDefaults] setObject:arrayToSave forKey:@"TestKey"];
[[NSUserDefaults standardUserDefaults] synchronize];

// Read
NSArray *arrayRead = [[NSUserDefaults standardUserDefaults] objectForKey:@"TestKey"]; // or arrayForKey
NSLog(@"arrayRead: %@", arrayRead); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:40:16.267

尝试以下操作：

节省：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
NSMutableArray *arr = ... ; // set value 
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:arr]; 
[defaults setObject:data forKey:@"TestKey"]; 
```

加载：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
    NSData *data = [defaults objectForKey:@"TestKey"]; 
    NSArray *arr = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

# iphone - 使用 xcode 将新推文更新到 twitter 时如何修复错误 403？

> ID：10395875
> 
> 赞同：0
> 
> 时间：2012-05-01T09:31:06.620
> 
> 标签：iphone, xcode, twitter, tweets

```
Request DBE044D8-3C3D-4122-95FF-F0E2063FB9DF failed with error: Error Domain=HTTP Code=403 "The operation couldn’t be completed. (HTTP error 403.)" 
```

当我想更新新推文时，该错误日志显示为这样，我正在使用此代码

```
- (void) requestSucceeded: (NSString *) requestIdentifier {  
    CLog(@"Request %@ succeeded", requestIdentifier);  
}  

- (void) requestFailed: (NSString *) requestIdentifier withError: (NSError *) error {  
    CLog(@"Request %@ failed with error: %@", requestIdentifier, error);  
}

-(void)twit:(NSString *)text{
    CLog(@"test to tweet");
    [_engine sendUpdate:@"hallo"];
}

- (IBAction)twitter:(id)sender {
    NSString * user=[[NSUserDefaults standardUserDefaults] objectForKey:@"username"]; 
    if(![user isNotEmpty]){
        _engine=nil;
    }

    if(!_engine){
        CLog(@"engine create");
        _engine = [[[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate:self] autorelease];
        _engine.consumerKey= kOAuthConsumerKey;  
        _engine.consumerSecret = kOAuthConsumerSecret;  
    } 

    if(![_engine isAuthorized]){  
        UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];  

        if (controller){  
            [self presentModalViewController:controller animated:YES];
            [[BNUtilitiesQuick FrontPageofBadger] presentModalViewController:controller animated:YES];
        }  
    }  
}

#pragma mark SA_OAuthTwitterEngineDelegate  
- (void) storeCachedTwitterOAuthData:(NSString *) data forUsername:(NSString *) username {  
    NSUserDefaults          *defaults = [NSUserDefaults standardUserDefaults];  

    [defaults setObject:data forKey:@"authData"];
    [defaults setObject:username forKey:@"username"];

    [defaults synchronize];
    CLog(@"username:%@", username);
}  

- (NSString *) cachedTwitterOAuthDataForUsername:(NSString *) username {
    return [[NSUserDefaults standardUserDefaults] objectForKey:@"authData"];
}

- (void) OAuthTwitterControllerFailed:(SA_OAuthTwitterController *) controller{
    CLog(@"failed");
}
- (void) OAuthTwitterControllerCanceled:(SA_OAuthTwitterController *) controller{
    CLog(@"cancel");
} 
```

有人也得到这个错误吗？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:16:27.367

我认为出现此问题是因为您的 twitter API 可能已被 twitter 弃用......使用最新的 twitter API 或在 iOS 5 或更高版本中工作的内置 Twitter 框架。它非常有用，也很容易.. :)

# ios - iOS 故事板和注入属性

> ID：10395878
> 
> 赞同：2
> 
> 时间：2012-05-01T09:31:17.230
> 
> 标签：ios, dependency-injection

我将 iOS 5 故事板用于视图控制层次结构。这样做的问题是我有一些共享控制器类来处理我需要注入到视图控制器的业务逻辑。这些控制器被初始化并保存在应用程序委托中。

例如，我有一个控制器，它封装了我在一些视图控制器中使用的 Dropbox 交互。我可以将引用传递给每个`prepareForSegue:sender:`，但这会使整个视图控制器层次结构依赖于控制器。另外，我可以使用单例模式，但我并不是它的忠实粉丝。

如果我希望控制器松散耦合，我有什么选择？我听说过异议，我会对此进行调查，但非常欢迎任何意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T00:48:07.467

我知道这有点晚了，但希望它可以帮助其他人。

我使用协议解决了这个问题，并检查要注入的对象是否响应某些选择器。

在该`prepareForSegue`方法中，我做以下两件事之一：

```
id object = segue.destinationController;
if([object conformsToProtocol:@protocol(HasApplicationManager) ]){
    [(id<HasApplicationManager>)object setApplicationManager:_applicationManager];
}
if([object respondsToSelector:@selector(setViewDelegate:)]){
    [object performSelector:@selector(setViewDelegate:)withObject:self];
} 
```

第一个位检查目标控制器是否符合指定的协议，这仍然是松散耦合的，因为您使用组合模式构建应用程序。

其次，我检查了一个选择器，这比协议更非正式，并且可能更耦合并带来更多问题。但这是一种绕过数百个“IHave...”协议的方法。

# iphone - 在 iPhone 应用程序中打开 iCloud.app

> ID：10395879
> 
> 赞同：1
> 
> 时间：2012-05-01T09:31:20.443
> 
> 标签：iphone, ios5

如何在我自己的 iPhone 应用程序中打开 iCloud.app？我唯一能通过这行代码打开 Setting.app 的信息

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但我想检查日历是否在 iPhone 上的 iCloud 中打开/关闭。因此，当我运行自己的应用程序时，我想通过我的应用程序直接在 iCloud 中移动。

如何在 iPhone 应用程序中访问 iCloud？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:45:16.100

没有像 iCloud 应用这样的应用。我想你是在谈论设置应用程序中的 iCloud 菜单，在 iOS 5.0 中有一段时间你可以使用`prefs://`URL 方案访问设置应用程序中的菜单，但是 Apple 在下一次更新中禁用了它。

希望它将来会返回，但即使返回，仍然无法以编程方式确定设置的状态（例如 icloud 日历同步）或操纵设置。

# c# - 创建层次类结构，遍历数据表，然后添加父子，返回对象

> ID：10395897
> 
> 赞同：4
> 
> 时间：2012-05-01T09:33:12.333
> 
> 标签：c#, hierarchy

我想创建一个类结构，它可以表示所有相同类型的对象的以下层次结构

```
-Parent1
- - Child1 
- - - ChildA of Child1
- - - ChildB of Child1
- - Child2 
- - - ChildA of Child2
- - - ChildB of Child2
- Parent2 
```

数据表行具有 ID、ParentID、名称和级别

级别是 O 为 Parent ， 1 为 Child 1 ， 2 为 ChildA 等等

我能够将数据从数据库返回到数据表，但在那之后我正在苦苦挣扎，对于创建类结构然后填充对象的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T10:05:35.967

这是一个关于如何使用 LINQ 执行此操作的示例。首先是一个示例数据表。我假设顶级项目的父 ID 为 0。

```
var dataTable = new DataTable();
dataTable.Columns.Add("Id", typeof(Int32));
dataTable.Columns.Add("ParentId", typeof(Int32));
dataTable.Columns.Add("Name", typeof(String));
dataTable.Rows.Add(new Object[] { 1, 0, "A" });
dataTable.Rows.Add(new Object[] { 2, 1, "B" });
dataTable.Rows.Add(new Object[] { 3, 1, "C" });
dataTable.Rows.Add(new Object[] { 4, 0, "D" });
dataTable.Rows.Add(new Object[] { 5, 4, "E" }); 
```

表示每项数据的类：

```
class Item {

  public Int32 Id { get; set; }

  public String Name { get; set; }

  public IEnumerable<Item> Children { get; set; }

} 
```

获取特定项的子项的函数：

```
IEnumerable<DataRow> GetChildren(DataTable dataTable, Int32 parentId) {
  return dataTable
    .Rows
    .Cast<DataRow>()
    .Where(row => row.Field<Int32>("ParentId") == parentId);
} 
```

创建包含子集合的项目的函数。此函数将向下递归层次结构：

```
Item CreateItem(DataTable dataTable, DataRow row) {
  var id = row.Field<Int32>("Id");
  var name = row.Field<String>("Name");
  var children = GetChildren(dataTable, id)
    .Select(r => CreateItem(dataTable, r))
    .ToList();
  return new Item { Id = id, Name = name, Children = children };
} 
```

获取顶级项目行的函数：

```
IEnumerable<DataRow> GetTopLevelRows(DataTable dataTable) {
  return dataTable
    .Rows
    .Cast<DataRow>()
    .Where(row => row.Field<Int32>("ParentId") == 0);
} 
```

把它们放在一起：

```
var items = GetTopLevelRows(dataTable)
  .Select(row => CreateItem(dataTable, row))
  .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:40:16.253

鉴于上述信息，您只需一节课就可以做到这一点。

```
public class MyItem
{
  public IList<MyItem> ChildItems{get;set;}
} 
```

在这里，您基本上得到了一个对象，该对象可以包含自己类型的集合作为子项，因此，这些子项也可以包含 MyItem 的集合作为子子项。

考虑以下：

```
var parentItem = new MyItem()
var childItem = new MyItem();
var childChildItem = new MyItem();

childItem.ChildItems.Add(childChildItem);
parentItem.ChildItems.Add(childItem); 
```

有更好的方法来编码项目的添加，但这在逻辑上足以使概念清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-16T03:36:36.227

这是我的方法。

从问题中定义的数据开始：

```
var dataTable = new DataTable();
dataTable.Columns.Add("Id", typeof(int));
dataTable.Columns.Add("ParentId", typeof(int));
dataTable.Columns.Add("Name", typeof(String));
dataTable.Rows.Add(new Object[] { 1, 0, "Parent1" });
dataTable.Rows.Add(new Object[] { 2, 1, "Child1" });
dataTable.Rows.Add(new Object[] { 3, 2, "ChildA of Child1" });
dataTable.Rows.Add(new Object[] { 4, 2, "ChildB of Child1" });
dataTable.Rows.Add(new Object[] { 5, 1, "Child2" });
dataTable.Rows.Add(new Object[] { 6, 5, "ChildA of Child2" });
dataTable.Rows.Add(new Object[] { 7, 5, "ChildB of Child2" });  
dataTable.Rows.Add(new Object[] { 8, 0, "Parent2" }); 
```

然后这样做：

```
var lookup = dataTable.Rows.Cast<DataRow>().ToLookup(x => x.Field<int>("ParentId"));

Func<int, Item[]> build = null;
build = n =>
    lookup[n]
        .Select(dr => new Item()
            {
                Id = dr.Field<int>("Id"),
                Name = dr.Field<string>("Name"),
                Children = build(dr.Field<int>("Id")),
            })
            .ToArray();

var items = build(0); 
```

这给出了：

[![项目](../Images/36b6c92f2d56b37fc0e6031779a7aff7.png)](https://i.stack.imgur.com/gh5d9.png)

# php - 如何在 RSS 网站上添加 url 图标

> ID：10395902
> 
> 赞同：1
> 
> 时间：2012-05-01T09:33:39.800
> 
> 标签：php, rss

我使用下面的代码在我的网站上有一个有效的 RSS 提要，但我想添加的是让我的个人图标显示在浏览器的 url 地址栏上。

```
<?php define ('CONFIG_SYSTEM_URL','http://www.mydomain.tk/');

require_once('feedcreator/feedcreator.class.php');

$feedformat='RSS2.0';

header('Content-type: application/xml');

$rss = new UniversalFeedCreator();
$rss->useCached();
$rss->title = "daily news feed";
$rss->cssStyleSheet='';
$rss->description = 'this feed is from me';
$rss->link = CONFIG_SYSTEM_URL;
$rss->syndicationURL = CONFIG_SYSTEM_URL.'feed.php';

$articles=new itemList();  
foreach ($articles as $i) {   
    $item = new FeedItem();
    $item->title = sprintf('%s',$i->title);
    $item->link = CONFIG_SYSTEM_URL.'item.php?id='.$i->dbId;
    $item->description = $i->Subject;   
    $item->date = $i->ModifyDate;   
    $item->source = CONFIG_SYSTEM_URL;   
    $item->author = $i->User;
    $rss->addItem($item);
}

print $rss->createFeed($feedformat);

?> 
```

如果我在该区域中添加，下面的代码可以在其他 PHP 页面上运行，但如果我将其添加到 RSS 页面，则会出现错误。如果我没记错的话，是因为 RSS 被呈现为 XML 吗？

> ```
> <head>
> <title>Other page works with icon but rss wont</title>
> <link rel="shortcut icon" href="images/myicon.ico">
> </head> 
> ```

如果在 RSS 上，任何人都可以帮助我如何更改 URL 栏上的图标？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:35:34.263

在这里，我正在解释可以插入主频道并与文本描述一起放置的标签。

```
<image> sub-element of <channel> 

<image> is an optional sub-element of <channel>, which contains three required and three optional sub-elements.

<url> is the URL of a GIF, JPEG or PNG image that represents the channel.

<title> describes the image, it's used in the ALT attribute of the HTML <img> tag when the channel is rendered in HTML.

<link> is the URL of the site, when the channel is rendered, the image is a link to the site. (Note, in practice the image <title> and <link> should have the same value as the channel's <title> and <link>.

Optional elements include <width> and <height>, numbers, indicating the width and height of the image in pixels. <description> contains text that is included in the TITLE attribute of the link formed around the image in the HTML rendering.

Maximum value for width is 144, default value is 88.

Maximum value for height is 400, default value is 31.

<image>
    <url>http://www.snook.ca/img/rss_banner.gif</url>
    <title>Snook.ca</title>
    <link>http://www.snook.ca/jonathan/</link>
    <width>111</width>
    <height>32</height>
    <description>Snook.ca features tips, tricks, and bookmarks on web development</description>
  </image> 
```

你可以用你的动态代码试试这个。

# symfony - 我怎样才能做一个确认窗口？

> ID：10395913
> 
> 赞同：0
> 
> 时间：2012-05-01T09:35:10.553
> 
> 标签：symfony, twig

我想在填写表格时创建一个确认窗口。

现在，我填写表单，如果表单有效，实体将被持久化并以我的实体作为参数返回一个视图。但这不是我想要的。

如果表格有效，我不想保留实体。如果它有效，则必须使用我的参数（实体）显示一个视图，然后如果我的用户单击按钮进行确认，则保留实体并重定向到其他视图。如果我的用户单击按钮返回，我使用 JavaScript 函数：`javascript:history.back(1)`.

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:30:53.370

一种简单的方法是将绑定的实体存储在会话中（闪存）并在确认持久性后检索它。

在您的“saveForm”操作中：

```
if ($form->isValid()) {
    $myEntity = $form->getData();
    $this->get('session')->setFlash('my_entity', $myEntity);

    return $this->render('MyBundle:Controller:confirmation.html.twig', array(
        'entity' => $myEntity
    ));
} 
```

在您的“confirmSave”操作中：

```
$myEntity = $this->get('session')->getFlash('my_entity');
$this->em->persist($myEntity);
$this->em->flush(); 
```

这只是一个基本示例，需要根据您的项目进行调整。

# oop - 为什么我需要 Sum 和 Bank 类来计算 Money？

> ID：10395916
> 
> 赞同：0
> 
> 时间：2012-05-01T09:35:19.717
> 
> 标签：oop

我正在阅读[测试驱动开发：示例](http://www.amazon.com/Test-Driven-Development-By-Example/dp/product-description/0321146530)。我在第 13 章。第 12 章和第 13 章介绍了`Plus`对`Money`对象的操作。一个`Money`对象可以被其他`Money`对象加。

作者在解决方案中添加了两个类（`Bank`和`Sum`）和一个接口（`IExpression`）。这是最终解决方案的类图。

![类图](../Images/9158c2f07c51b1935ad5e60cef500c26.png)

`Money`存储金额和货币，例如 10 美元、5 泰铢、20 瑞士法郎。该`Plus`方法返回`Sum`对象。

```
public class Money : IExpression
{
    private const string USD = "USD";
    private const string CHF = "CHF";

    public int Amount { get; protected set; }

    public string Currency { get; private set; }

    public Money(int value, string currency)
    {
        this.Amount = value;
        this.Currency = currency;
    }

    public static Money Dollar(int amount)
    {
        return new Money(amount, USD);
    }

    public static Money Franc(int amount)
    {
        return new Money(amount, CHF);
    }

    public Money Times(int times)
    {
        return new Money(this.Amount * times, this.Currency);
    }

    public IExpression Plus(Money money)
    {
        return new Sum(this, money);
    }

    public Money Reduce(string to)
    {
        return this;
    }

    public override bool Equals(object obj)
    {
        var money = obj as Money;

        if (money == null)
        {
            throw new ArgumentNullException("obj");
        }

        return this.Amount == money.Amount &&
            this.Currency == money.Currency;
    }

    public override string ToString()
    {
        return string.Format("Amount: {0} {1}", this.Amount, this.Currency);
    }
} 
```

`Sum`存储两个来自构造函数参数的 Money 对象。它有一种`Reduce`返回新`Money`对象的方法（通过添加两个对象的数量创建新对象）

```
public class Sum : IExpression
{
    public Money Augend { get; set; }

    public Money Addend { get; set; }

    public Sum(Money augend, Money addend)
    {
        this.Augend = augend;
        this.Addend = addend;
    }

    public Money Reduce(string to)
    {
        var amount = this.Augend.Amount + this.Addend.Amount;

        return new Money(amount, to);
    }
} 
```

`Bank`有一种方法 - `Reduce`。它只是调用传入`IExpression`参数的 Reduce 方法。

```
public class Bank
{
    public Money Reduce(IExpression source, string to)
    {
        return source.Reduce(to);
    }
} 
```

`IExpression``Money`是由和实现的接口`Sum`。

```
public interface IExpression
{
    Money Reduce(string to);
} 
```

这些是我的问题。

1.  `Bank`在这个阶段对解决方案没有任何好处。为什么我需要它？
2.  为什么我需要，因为我可以在类`Sum`内部创建和返回 Money 对象（就像作者所做的那样）？`Plus``Money``Times`
3.  Bank 和 Sum 的目的是什么？（现在，这对我来说没有任何意义）
4.  我认为`Reduce`方法名称对我来说听起来很奇怪。你觉得这是个好名字吗？（请建议）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:40:51.140

继续阅读。肯特贝克是一个非常聪明的人。他要么有一个很好的理由以这种方式创建示例，稍后会很清楚，要么这是一个糟糕的解决方案。

[如果map-reduce](http://www.joelonsoftware.com/items/2006/08/01.html)是最终目标，“Reduce”是一个非常好的名称。

# iphone - 为什么 NSNotification 第三个参数经常是 object:nil？

> ID：10395917
> 
> 赞同：1
> 
> 时间：2012-05-01T09:35:20.523
> 
> 标签：iphone, ios, cocoa, nsnotificationcenter

[我在苹果文档https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)中看不到对第三个参数对象的解释

在像这样的所有示例中，[如何在 Objective-C 中创建一个通过 NSNotificationCenter 发送和接收事件的类？](https://stackoverflow.com/questions/2286347/how-to-create-a-class-to-send-and-receive-events-through-nsnotificationcenter-in)它是零

没有人解释它：那么为什么 object:nil ？

什么时候不是 nil ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T09:41:19.987

当您正在观看某个对象时，它不是零。

场景：你有两个对象，每个对象都通过 NSNotificationCenter 触发事件。您只想接收 objectA 的事件。

解决方法：通过NSNotificationCenter订阅，传入objectA作为object参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T09:41:08.473

当您需要知道哪个对象发布了通知时，它不是 nil。看一眼`-(void)addObserver:(id)notificationObserver selector:(SEL)notificationSelector name:(NSString *)notificationName object:(id)notificationSender`

*通知发送者*

观察者想要接收其通知的对象；也就是说，只有这个发送者发送的通知才会传递给观察者。

如果你传递*nil*，通知中心不会使用通知的发送者来决定是否将它传递给观察者。

（来自您链接的同一个 NSNotificationCenter 参考）

# groovy - 如何将 groovy 表示转储到 YAML 并避免使用未标记的节点？

> ID：10395918
> 
> 赞同：2
> 
> 时间：2012-05-01T09:35:34.920
> 
> 标签：groovy, yaml, snakeyaml

我想将以下结构转储到 YAML 文件中：

```
public class TestSuite {
    String name
    List testCases = []
} 
```

测试用例列表是此类：

```
class TestCase {
    String name
    String id
} 
```

我希望它看起来像这样：

```
name: Carrier Handling and Traffic
testCases:
- name: Call setup by UE
  id: DCM00000001 
```

但它最终看起来像这样：

```
name: Carrier Handling and Traffic
testCases:
- !!com.package.path.TestCase
  name: Call setup by UE
  id: DCM00000001 
```

我想这与 List 不是标记数据结构这一事实有关，但我不知道如何获得测试用例的名称来表示对象。尖端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:06:10.743

是否定义`TestSuite`为：

```
public class TestSuite {
    String name
    List<TestCase> testCases = []
} 
```

让你更接近你想要的结果？虽然我自己没有使用过 SnakeYaml ......

* * *

### 编辑

有一些空闲时间，并想出了这个独立的测试脚本：

```
@Grab( 'org.yaml:snakeyaml:1.10' )
import org.yaml.snakeyaml.Yaml
import org.yaml.snakeyaml.representer.Representer
import java.beans.IntrospectionException
import org.yaml.snakeyaml.introspector.Property

public class TestSuite {
    String name
    List<TestCase> testCases = []
}

class TestCase {
    String name
    String id
}

class NonMetaClassRepresenter extends Representer {
  protected Set<Property> getProperties( Class<? extends Object> type ) throws IntrospectionException {
    super.getProperties( type ).findAll { it.name != 'metaClass' }
  }
}

TestSuite suite = new TestSuite( name:'Carrier Handling and Traffic' )
suite.testCases << new TestCase( name:'Call setup by UE', id:'DCM00000001' ) 

println new Yaml( new NonMetaClassRepresenter() ).dumpAsMap( suite ) 
```

哪个打印：

```
name: Carrier Handling and Traffic
testCases:
- id: DCM00000001
  name: Call setup by UE 
```

# oracle - 使用 Attunity Oracle 连接器到 11g 时出现 SSIS 快速加载错误

> ID：10395921
> 
> 赞同：2
> 
> 时间：2012-05-01T09:36:00.007
> 
> 标签：oracle, ssis, oracle11g

**在使用Oracle 11g**作为目标的几个类似 SSIS 包中启用Attunity Oracle 目标组件中的**快速加载时 -****一些包失败**并返回以下错误，但其余包工作正常。

 ****我得到的**错误信息是：**

> 说明：在预加载或设置阶段遇到快速加载错误。文本：ORA-39826：无法解析视图或同义词 (TABLE_NAME) 的直接路径加载。

*   如果我禁用快速加载，那些失败的当然也可以正常工作。
*   更重要的是，当使用 Oracle 10g 作为目标时，失败的包**可以很好地与快速加载一起使用**。

我不明白为什么它对那些失败的人不起作用。

我错过了什么？我应该怎么做才能使快速加载始终工作而不是有时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:06:31.010

可能是驱动问题。

'fast load' 选项在内部使用 BULK INSERT 语句将数据上传到目标表，而不是对每一行使用简单的 INSERT 语句。由于批量插入是本机 sql server 功能，您应该尝试了解它是如何为 oracle 工作的。它可能从 10g 变成了 11g

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:34:29.860

纯属偶然，我发现如果目标组件的“TableName”属性在表名之前或之后（！）包含**空格，则目标组件在 SSIS 包中失败。**一旦删除它就可以正常工作。这个错误在 10g 上没有发生。****

# apache - 在 url 中使用 {~`% 字符进行 301 重定向

> ID：10395926
> 
> 赞同：0
> 
> 时间：2012-05-01T09:36:35.550
> 
> 标签：apache, .htaccess, redirect

尝试将 301 重定向应用到此 url "/Qx%40w%2C6M42VAwp3%40Rb%7B~cC4ure%60QWI9" 但它不喜欢它，我猜是因为可怕的 url 和其中的所有奇怪字符，任何想法?

这是我目前拥有的代码：

```
redirect 302 /Qx%40w%2C6M42VAwp3%40Rb%7B~cC4ure%60QWI9 /product-tool-case.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:35:22.640

您可以使用 mod_rewrite 执行此操作，如下所示：

```
RewriteRule ^/Qx%40w%2C6M42VAwp3%40Rb%7B~cC4ure%60QWI9 /product-tool-case.php 
```

如果你想继续使用上面的 mod_alias，那么你应该确保旧的 url 是 url 解码的。所以在上面的例子中尝试：

```
redirect 302 /Qx@w,6M42VAwp3@Rb{~cC4ure`QWI9 /product-tool-case.php 
```

# php - php中不能有名为default的函数

> ID：10395930
> 
> 赞同：3
> 
> 时间：2012-05-01T09:37:27.807
> 
> 标签：php, class, function, default

好的，这是非常出乎意料的，这让我很恼火。我的所有课程中都有名为 default() 的函数。但是，由于某种原因，我不能调用它。我猜这是因为 switch 语句中的“默认：”（我根本不使用）。

我不能在 php 中命名我的函数 default() 是否真的如此，或者我做错了什么？

这是错误：

```
Parse error: syntax error, unexpected T_DEFAULT, expecting T_STRING in 
C:\Users\Jinxed\Desktop\WebTrgovina\app\c\Controller.c.php on line 8 
```

这是有问题的代码：

```
<?php
abstract class Controller {
    protected $view;
    function __construct() {
    }
    abstract function default();
    function getView(){
        return $this->view;
    }
} 
```

当我将默认值重命名为其他内容时，代码工作正常，但这很烦人，有没有解决方案可以将函数命名为 default()？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T09:39:10.290

`default`是 PHP 中的保留字。

这是列表：[http ://www.php.net/manual/en/reserved.keywords.php](http://www.php.net/manual/en/reserved.keywords.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T09:49:52.240

您不能将保留字用作类函数。但是，您可以使用[__call](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)：

```
<?php
abstract class Controller {

    public function _default($some, $args) {}

    public function __call($name, $arguments) {
        if ($name === 'default') {
            //return call_user_func_array(array($this, '_default'), $arguments); // has args
            return $this->_default(); // simpler
        }
    }
} 
```

这将允许你这样做`$foo->default()`。一个更好的主意是不要选择依赖于使用保留字作为方法名称的实现/api。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T09:39:25.807

它在[保留关键字列表中](http://www.php.net/manual/en/reserved.keywords.php)，所以没有什么意外的。如果您*真的*需要这些名称，您可以使用`__call`- 请参阅关键字页面上的评论以获取示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T09:38:44.580

是的，你不能有一个名为`default`. 烦人，但那是 PHP。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-16T02:13:53.460

我想为 AD7six 的答案做出贡献（这应该是评论，但我不能），并补充说，如果您使用支持 PHPDoc 的 IDE，您可以在类声明之前添加它以使其自动完成知道这些假方法存在.

```
/**
 * show off @method
 * @method whateverItReturns default()
 */
class foo {
... 
```

# php - 调试 heroku 上存在的 facebook 应用程序的 php 代码

> ID：10395931
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:37:37.047
> 
> 标签：php, javascript, facebook, facebook-graph-api, heroku

如果我的问题有问题，首先提前道歉，我是heroku的新手，我的基本问题是我有一些混乱的代码，我想测试我是否能够在我自己的代码中获取facebook变量并使用他们..

在我的 .php 文件中，我想为使用我的 facebook 应用程序的人输入名称，以显示数组的数组变量和数组的 url 应该获取应用程序用户图片..我想通过 index.php 文件提供这些值脸书本身。

我的 .php 文件代码是：-

```
$basic = $facebook->api('/me');

$options = array(
'displayName' => he(idx($basic, 'name')),
'image' => array(
'url' => 'https://graph.facebook.com/'.he($id).'/picture?type=square',
'height => '48',
'width => '48'
)
); 
```

但是这里出了点问题，我想不通。我尝试通过 javascript 或其他技术对其进行调试，但现在能够通过任何方式将 .php 文件连接到某个 .js 文件，以传输 .php 文件中存在的变量值并将它们打印在我的浏览器上，我用来编辑我的代码自己的系统并通过 git 推送它，由于代码是在 heroku 执行的，所以我无法弄清楚是什么错误正在出现..我现在使用的是免费帐户，所以有什么办法可以看到我在 heroku 执行的代码..或任何有助于有效调试我的代码的帮助..

Edit1：或者有什么方法可以将这些变量从我的 .PHP 文件传递​​到一个单独的 .JS 文件并在消息框或其他东西中打印变量..给出的任何示例代码都会有很大帮助..这里有很多问题关于将变量从单独的 .PHP 文件传输到单独的 .JS 文件..但我没有找到直接的答案，所有建议的解决方法，但没有直接的方法......我访问的问题是.. [传递的最佳方法是什么PHP变量到Javascript？](https://stackoverflow.com/questions/2766041/whats-the-best-way-to-pass-a-php-variable-to-javascript)

[在javascript中抓取/输入php变量？](https://stackoverflow.com/questions/1494629/grab-input-php-variable-in-javascript)

还有更多，但找不到完美的答案。

**Edit2：如果我的问题需要更多信息，请告诉我，如果第二个选项是调试我的代码的选择..那么有人可以给我一个例子，传输 testfile.php 文件中存在的变量/数组，比如 appfolder/ php/lib/testfile.php 并使用在 appfolder/lib/js/testjs.js 中的 testjs.js 文件以 HTML 格式将其输出到浏览器**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:12:21.710

PHP（或其他语言）和 JavaScript 之间的常见交换格式是 JSON。[您可以在 PHP 中使用json_encode](http://php.net/manual/en/function.json-encode.php)将数组（或 php 对象）编码为 json 。像这样 ：

```
$options_json = json_encode($options); 
```

因此，您可以在 html 结果中编写此 javascript 变量，如下所示：

```
echo '<script>var options = ', json_encode($options), ';</script>'; 
```

然后可以使用 javascript 访问您的图片：

```
console.log(options);
console.log(options.url); 
```

# c++ - 如何使 CDT/Eclipse 与 C++11 线程一起工作？

> ID：10395936
> 
> 赞同：12
> 
> 时间：2012-05-01T09:38:04.300
> 
> 标签：c++, multithreading, c++11, eclipse-cdt

我尝试在 Eclipse 中测试 C++11 线程的示例。但是我在运行程序时收到了这条消息：

> 在抛出“std::system_error”的实例后调用终止 what(): Operation not allowed'

我的系统：ubuntu + gcc 4.7

程序：

```
#include <iostream>
#include <thread>

void worker()
{
    std::cout << "hello from worker" << std::endl;
}

int main(int argc, char **argv)
{
    std::thread t(worker);
    t.join();
} 
```

...是的，我把`-std=c++11`and`-pthread`放在里面`C/C++ Build -> Settings -> Tool Settings -> Cross G++ Compiler -> Miscellaneous -> Other Flags`。

任何意见？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T07:50:17.613

Jonathan Wakely 的评论解决了这个问题。

我添加`-pthread`到`C/C++ Build -> Settings -> Tool Settings -> Cross G++ **Linker** -> Miscellaneous -> Other Flags`并且程序正常工作。

谢谢乔纳森。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T12:51:16.253

要在 Eclipse 中使用 C++11 `std::thread`，需要`-pthread`在编译时提供选项。然而**这还不够**。在我的 Ubuntu 14.04 中，使用 Eclipse Kepler 和下面的 g++4.9 使其工作：

1.  右键单击项目并选择“属性”
2.  转到“C/C++ 构建”>“设置”>（选项卡）“工具设置”
3.  首先选择'Cross G++ Compiler' > 'Miscellaneous' > 'Other flags'；
    并在 `-pthread`之后添加`-std=c++11`
4.  第二次选择“Cross G++ Linker”>“Libraries”；
    并添加`pthread`（相当于命令行`-lpthread`）

最后重新编译项目；错误应该消失。

还要记住，如果你使用，`std::thread`那么它的对象必须在`join()`某个地方。否则您可能会遇到以下运行时错误：

> 在没有活动异常的情况下调用终止

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-26T11:50:30.470

1.  转到**Project > Properties > C/C++ General > Preprocessor include paths, etc > Providers > CDT GCC Builtin Compiler Settings**并附`-std=c++11`加到编译器规范。

    您还可以对所有进入**Window > Preferences > C/C++ > Build > Settings > Discovery**的项目执行此操作，并附`-std=c++11`加到**CDT GCC 内置编译器设置**规范。

    ```
     ${COMMAND} ${FLAGS} -E -P -v -dD -std=c++11 "${INPUTS}" 
    ```

2.  **Project Properties > C/C++ Build > Settings > Tool Settings > GCC C++ Compiler > Miscellaneous > Other flags**，添加`-pthread -std=c++11 -Wl,--no-as-needed`：

    ```
     -c -fmessage-length=0 -pthread -std=c++11 -Wl,--no-as-needed 
    ```

3.  **Project Properties > C/C++ Build > Settings > Tool Settings > GCC C++ Linker > Miscellaneous > Linker flags**，添加`-pthread -std=c++11 -Wl,--no-as-needed`

    ```
     -pthread -std=c++11 -Wl,--no-as-needed 
    ```

# javascript - 使用 JSF 和 .xhtml 文件运行开放层

> ID：10395939
> 
> 赞同：0
> 
> 时间：2012-05-01T09:38:19.043
> 
> 标签：javascript, html, jsf-2, xhtml, openlayers

我制作了一个 jsf 项目，并从[http://docs.openlayers.org/library/introduction.html](http://docs.openlayers.org/library/introduction.html)获得了以下示例，但作为 xhtml 文件，它不会运行，而作为 html 文件，它会运行。如何使用 jsf 和 .xhtml 运行它。它虽然与 html 一起运行。

```
 <?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <script src="http://openlayers.org/api/OpenLayers.js"></script>

    </h:head>
    <h:body>
        <div style="width:100%; height:100%" id="map"></div>
        <script defer="defer" type="text/javascript">
        var map = new OpenLayers.Map('map');
        var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
        var dm_wms = new OpenLayers.Layer.WMS(
            "Canadian Data",
            "http://www2.dmsolutions.ca/cgi-bin/mswms_gmap",
            {
                layers: "bathymetry,land_fn,park,drain_fn,drainage," +
                        "prov_bound,fedlimit,rail,road,popplace",
                transparent: "true",
                format: "image/png"
            },
            {isBaseLayer: false}
        );
        map.addLayers([wms, dm_wms]);
        map.zoomToMaxExtent();
      </script>
    </h:body>
</html> 
```

使用 firebug 在浏览器上的结果：

```
<head>
<body>
<div style="width: 100%; height: 100%; " id="map" class="olMap">
<div id="OpenLayers.Map_2_OpenLayers_ViewPort" style="position: relative; overflow-x: hidden; overflow-y: hidden; width: 100%; height: 100%; " class="olMapViewport olControlDragPanActive olControlZoomBoxActive olControlPinchZoomActive olControlNavigationActive">
<div id="OpenLayers.Map_2_events" style="position: absolute; width: 100%; height: 100%; z-index: 999; ">
<div id="OpenLayers.Control.PanZoom_5" style="position: absolute; left: 4px; top: 4px; z-index: 1004; " class="olControlPanZoom olControlNoSelect" unselectable="on">
<div id="OpenLayers.Control.ArgParser_6" style="position: absolute; z-index: 1004; " class="olControlArgParser olControlNoSelect" unselectable="on"/>
<div id="OpenLayers.Control.Attribution_7" style="position: absolute; z-index: 1004; " class="olControlAttribution olControlNoSelect" unselectable="on"/>
</div>
</div>
<script defer="defer" type="text/javascript">

var map = new OpenLayers.Map('map');
        var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
        var dm_wms = new OpenLayers.Layer.WMS(
            "Canadian Data",
            "http://www2.dmsolutions.ca/cgi-bin/mswms_gmap",
            {
                layers: "bathymetry,land_fn,park,drain_fn,drainage," +
                        "prov_bound,fedlimit,rail,road,popplace",
                transparent: "true",
                format: "image/png"
            },
            {isBaseLayer: false}
        );
        map.addLayers([wms, dm_wms]);
        map.zoomToMaxExtent();
</script>
</body>
<script src="chrome-extension://bmagokdooijbeehmkpknfglimnifench/googleChrome.js"/>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:12:14.383

您正在内联执行 JavaScript 代码。这意味着当网络浏览器遇到特定的代码行时，JavaScript 代码会**立即**执行。那时，`<div id="map">`HTML DOM 树中还不存在 ！浏览器即从上到下解析和执行 HTML/JS 代码。

在创建并添加到 HTML DOM 树*之后*，您需要执行该 JavaScript 代码。`<div id="map">`您可以通过以下方式实现它：

1.  将`<script>`标记中的块*移动*到`<div id="map">`:

    ```
    <h:head>
        <script src="http://openlayers.org/api/OpenLayers.js"></script>
    </h:head>
    <body>
        <div style="width:100%; height:100%" id="map"></div>
        <script type="text/javascript">
            var map = new OpenLayers.Map('map');
            var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
            map.addLayer(wms);
            map.zoomToMaxExtent();
        </script>
    </body> 
    ```

2.  仅当浏览器完成创建 HTML DOM 树时才用于`window.onload`执行代码。

    ```
    <h:head>
        <script src="http://openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">
            window.onload = function() {
                var map = new OpenLayers.Map('map');
                var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
                "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
                map.addLayer(wms);
                map.zoomToMaxExtent();
            };
        </script>
    </h:head> 
    ```

此问题与 JSF 或 XHTML 无关。它只是基本的 HTML/JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:43:58.513

我遇到了同样的问题，但我的扩展名是 .jspx。我确实喜欢这个尝试一下。

```
<html 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:ui="http://java.sun.com/jsf/facelets"  
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">  

<head>
<script src="http://piturralhpxp:1983/geoserver/openlayers/OpenLayers.js" type="text/javascript"></script>
        <script type="text/javascript">
     //<![CDATA[
          var map;
           etc ....
            //]]>
        </script>
        </head>
        <f:view>        
        <body onload="init()">

        </body>
</f:view>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:35:08.403

@BalusC 是对的。似乎是 OpenLayers 中的一个错误。添加 <!DOCTYPE html> 声明时，JSF 页面崩溃。

我删除了它，无论如何它工作得很好。我知道这不是最佳做法，但这是我发现完成这项工作的唯一方法。试试看。

# java-me - 我想使用我自己的 J2ME 应用程序将图像上传到我的 facebook 帐户，无需 eSWT 和 LWUIT

> ID：10395940
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:38:24.703
> 
> 标签：java-me

我想使用我自己的 J2ME 应用程序将图像上传到我的 Facebook 帐户，无需 eSWT 和 LWUIT。为此，我从 Facebook 开发人员那里获得了应用程序 ID 和密码，但我真的无法使用它们请帮助我如何操作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:11:51.887

你读过脸书文档吗？

它说如果它不是 Web 应用程序，您应该获取会话。

[http://developers.facebook.com/docs/reference/rest/photos.upload/](http://developers.facebook.com/docs/reference/rest/photos.upload/)

# wordpress - 文章目录网站需要哪些 Wordpress 插件？

> ID：10395946
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:38:55.553
> 
> 标签：wordpress, plugins, article

谁能告诉我在使用文章目录网站时需要使用哪些必要的 wordpress 插件？

例如：如何在帖子部分使用验证码？如何在电子邮件中创建用户验证链接？如何仅创建正文中允许的 2 个链接？

这些是我心中的几个问题

感谢所有愿意回答我问题的人。

干杯开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:06:28.373

用户创建帐户后，该帐户将被锁定，直到用户单击他将在其电子邮件收件箱中收到的验证链接。

# python - 多处理输出到文件

> ID：10395950
> 
> 赞同：0
> 
> 时间：2012-05-01T09:39:15.800
> 
> 标签：python, multiprocessing, pid

有没有办法在创建类 Process 的实例时或在执行期间将流重定向到文件`Process(target=..., args=(...)).start()`

我问了典型的pythonic方式

```
Process(target=start_test, args=(timestamp,current_test_suite,user_ip)).start() 
```

如果没有pythonic方法可以做到这一点，也许linux可以将PID输出重定向到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:24:59.327

如果我们想将流程输出重定向到我们必须分配`sys.stdout`的文件，`open(filename,'w')`或者`open(filename,'a')`如果我们想附加我们的日志文件。

# iphone - 使用 UIswitch 在操作表中的表格视图中设置提醒

> ID：10395955
> 
> 赞同：0
> 
> 时间：2012-05-01T09:39:26.850
> 
> 标签：iphone, objective-c, push-notification, uiactionsheet, uilocalnotification

我有一个表格视图，它显示我们使用操作表中的日期选择器选择时间的数据。

在此表中查看每一行都有一个带有标签和 uiswitch 按钮的自定义单元格“ReminderCell”

**1.自定义单元格** ！[在此处输入图像描述][1]

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Note: I set the cell's Identifier property in Interface Builder to DemoTableViewCell.
    ReminderCell *cell = (ReminderCell *)[tableView dequeueReusableCellWithIdentifier:CellClassName];
    if (!cell)
    {
        NSArray *topLevelItems = [cellLoader instantiateWithOwner:self options:nil];
        cell = [topLevelItems objectAtIndex:0];
    }

    //set from action sheet only this row 0
    if( indexPath.row == 0 ) 
    {
        if(date == nil)
        {
            date = [NSDate date];
        }
        NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
        [timeFormatter setDateFormat:@"hh:mm a"];
        cell.label.text = [timeFormatter stringFromDate:date];
    } 
```

当用户选择一行时，带有日期选择器弹出窗口的操作表

![在此处输入图像描述][3]

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 

    if(date == nil)
    {
        date = [NSDate date];
    }
    NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
    [timeFormatter setDateFormat:@"hh:mm a"];

    //Add Action sheet
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                    delegate:self
                                           cancelButtonTitle:@"Cancel"
                                      destructiveButtonTitle:nil
                                           otherButtonTitles:@"Done",nil];

    // Add date picker to the action sheet
    datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeTime;
    [actionSheet addSubview:datePicker];
    [actionSheet showInView:self.navigationController.tabBarController.view];        
    [actionSheet setBounds:CGRectMake(0,0,320, 550)];
    [datePicker setFrame:CGRectMake(0, 138, 320, 216)];
    [datePicker release];
    [actionSheet release];
} 
```

现在***我需要通过从这个日期选择器中选择日期来设置提醒，并在打开时设置。*** 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:12:41.123

UIKit 提供了 NSLocalNotification 对象，它对你的任务来说是一个更高层次的抽象。

```
 UILocalNotification *yourNotification = [[UILocalNotification alloc] init];
    yourNotification.fireDate = [NSDate date]; // time at which the remainder has to be triggered 
    yourNotification.timeZone = [NSTimeZone defaultTimeZone];

    yourNotification.alertBody = @"Notification triggered";
    yourNotification.alertAction = @"Details";

/* if you wish to pass additional parameters and arguments, you can fill an info dictionary and set it as userInfo property */
    //NSDictionary *infoDict = //fill it with a reference to an istance of NSDictionary;
    //aNotification.userInfo = infoDict; 
```

在 appDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    UILocalNotification *aNotification = [launchOptions objectForKey: UIApplicationLaunchOptionsLocalNotificationKey]; 

    if (aNotification) {
        //if we're here, than we have a local notification. Add the code to display it to the user
    }

    [self.window makeKeyAndVisible];
    return YES;

}

    - (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

            //if we're here, than we have a local notification. Add the code to display it to the user

    } 
```

重新调整警报

重复间隔

重新安排通知的日历间隔。

@property (nonatomic) [NSCalendarUnit](http://developer.apple.com/library/IOs/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendarUnit) repeatInterval 讨论

如果您分配日历单位，例如每周 ( [NSWeekCalendarUnit](http://developer.apple.com/library/IOs/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/c/econst/NSWeekCalendarUnit) ) 或每年 ( [NSYearCalendarUnit](http://developer.apple.com/library/IOs/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/c/econst/NSYearCalendarUnit) )，系统会重新安排通知以指定时间间隔发送。默认值为 0，表示不重复。

重复日历

系统在重新安排重复通知时应参考的日历。

@property (nonatomic, copy) [NSCalendar](http://developer.apple.com/library/IOs/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendar) *repeatCalendar 讨论

默认值为 nil，表示使用当前用户日历。（当前用户日历由 NSCalendar 的[currentCalendar](http://developer.apple.com/library/IOs/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/occ/clm/NSCalendar/currentCalendar)类方法返回。）

并安排闹钟

```
 UISwitch *onoff = [[UISwitch alloc] initWithFrame: CGRectZero];
    [onoff addTarget: self action: @selector(switchAction:) forControlEvents:UIControlEventValueChanged];
    // Set the desired frame location of onoff here
    [self.view addSubview: onoff];

- (IBAction)switchAction:(id)sender {

 UISwitch *theSwitch = (UISwitch *)sender;
    UITableViewCell *cell = (UITableViewCell *)theSwitch.superview;
    UITableView *tableView = (UITableView *)cell.superview;
    NSIndexPath *indexPath = [tableView indexPathForCell:cell];
   // From which you can find the index value to get the particular time of the datePicker you set
if (onoff.on){
     NSLog(@"On");  
    //set the alarm at given time from DatePicker using UILocalNotification 
    }
    else{
      NSLog(@"Off");  
    // cancel the alarm Local Notification here
     }
} 
```

**参考**

[UILocalNotification 参考](http://developer.apple.com/library/IOs/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)

[UILocalNotification 教程](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

[UILocalNotification 编程指南](http://developer.apple.com/library/IOs/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194)

[UILocalNotification 取消 LocalNotification](http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/cancelLocalNotification%3a)

# c# - 如何设置为 COM2 到设备？

> ID：10395957
> 
> 赞同：0
> 
> 时间：2012-05-01T09:39:39.817
> 
> 标签：c#, silverlight-4.0, serial-port

我的应用程序使用两个设备：读卡器和自助存折打印机 (SSPP)，现在它们都使用串行端口 COM1，所以现在我只能使用读卡器或仅使用 SSPP 测试我的应用程序。

如何使SSPP = COM1，读卡器= COM2？所以我可以在我的应用程序中使用这两种设备。我正在使用 Csharp。

问候，伊玛目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:46:21.970

您可以使用一些虚拟串行端口驱动程序重新映射 COM 端口，例如这个。

[http://www.eltima.com/products/vspdxp/](http://www.eltima.com/products/vspdxp/)

或这个

[http://www.virtual-serial-port.com/virtual-serial-port-kit.html](http://www.virtual-serial-port.com/virtual-serial-port-kit.html)

Windows 本身还提供了一些有限的方法来更改其设备管理器中的 COM 端口号。

官方 HowTo： http: [//support.microsoft.com/kb/232673](http://support.microsoft.com/kb/232673)

# php - 如何创建请愿表格？

> ID：10395958
> 
> 赞同：-2
> 
> 时间：2012-05-01T09:39:39.940
> 
> 标签：php, javascript, html, css, database

**我需要为请愿书创建一个表格。**

该表单需要有一个**名称字段[文本输入]**、**电子邮件字段[文本输入]**和**另一个字段，它是一个由字母和数字组成的字符串。**

在用户填写文本输入字段后，我需要有一个数据库来保存表单中的数据，所以我需要一个已经签署请愿书的人员列表[也许是一个数组？][完成字段并按下提交按钮]

我从哪里开始？我用谷歌搜索什么来学习如何自己创建它[我知道如何从 HTML 添加文本输入，我可以使用 CSS 自定义它们。这很容易，但是如何让表单提交用户在某些数据库中输入的内容[姓名和电子邮件以及随机字符串]？或者保存所有数据并将其推送到数组中的东西？

我可以找到可以定制的东西吗？

我不是程序员，但我确实具有 ActionScript3、HTML/CSS 和一点点 Java Script 的编程知识。

帮助！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:44:12.923

你将不得不为此学习某种形式或编程语言——PHP、ASP 等，所以我想这取决于项目的时间尺度。为了论文的速度和准确性，我使用了在线服务，我可以构建它，但没有时间。有很多：

[http://wufoo.com/](http://wufoo.com/)
[http://www.formstack.com/](http://www.formstack.com/)

# html - 如何处理 webView 中的 html 按钮（可可）

> ID：10395962
> 
> 赞同：0
> 
> 时间：2012-05-01T09:40:06.080
> 
> 标签：html, macos, cocoa, webview

如何处理在 WebView 中按下 HTML 按钮，该按钮如下所示：

```
<input type="submit" name="mybutton" id="mybuttonid" value="test" /> 
```

WebView 是 Mac 桌面应用程序的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:37:07.703

我不太确定您所说的处理按钮是什么意思，但您的解决方案可能会涉及使用“stringByEvaluatingJavaScriptFromString”。

例如：

```
[yourWebView stringByEvaluatingJavaScriptFromString:@"document.getElementById('mybuttonid')"]; 
```

希望这可以帮助 ：）

# mysql - 艰难的 MySQL 错误：子查询返回多于一行

> ID：10395967
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:40:33.440
> 
> 标签：mysql, subquery

我完全迷失了这一点。我不断收到错误子查询返回不止一行。有任何想法吗？

```
SELECT 
    m.MealID, m.Title, m.SeoUrl, m.Likes, 
    (SELECT Photo FROM Recipe WHERE RecipeID=
        (SELECT r1.RecipeID FROM Ref_Meal r1 
         LEFT OUTER JOIN Ref_Meal r2 ON r1.MealID=r2.MealID AND r1.Sort > r2.Sort 
         WHERE r1.MealID=m.MealID AND r2.MealID IS NULL)) as Photo, 
    (SELECT MAX(rs.Skill) FROM Recipe rs JOIN Ref_Meal rms ON rms.RecipeID=rs.RecipeID WHERE rms.MealID=m.MealID) as Skill 
FROM Meal m 
JOIN MemberMealBookmark b ON b.MealID=m.MealID 
WHERE b.MemberID=4 ORDER BY Title 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:20:04.967

如果没有架构，很难调试此查询，但请在您的 WHERE 中查看此条件：

```
WHERE RecipeID=
        (SELECT r1.RecipeID FROM Ref_Meal r1 
         LEFT OUTER JOIN Ref_Meal r2 ON r1.MealID=r2.MealID AND r1.Sort > r2.Sort 
         WHERE r1.MealID=m.MealID AND r2.MealID IS NULL)) as Photo, 
```

您收到此错误是因为您使用的是`EQUAL`，但查询返回的不止一行。通常，当您遇到这种情况时，这是因为您的子查询中存在错误，您认为只会有一个结果，但实际上还有更多。复制粘贴该查询并运行它，它将返回不止一行。

修复子查询以返回单行或将`EQUAL`符号更改为`IN`，它将处理多个结果。

# python - postgresql 中“TEXT”数据类型的最大大小

> ID：10395975
> 
> 赞同：40
> 
> 时间：2012-05-01T09:40:52.947
> 
> 标签：python, postgresql

我正在使用 python。

我在 postgres 中有一个带有“文本”数据类型的字段。每当我尝试保存一个非常大的字符串时，它都会在 python 中引发内部错误，但是如果我以较小的大小保存字符串，它会正确保存它。

我不明白这个问题。输入“TEXT”数据类型的字符是否有一些最大限制？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-01T09:48:07.010

从[手册](http://www.postgresql.org/docs/current/interactive/datatype-character.html)：

> 无论如何，可以存储的最长的字符串大约是 1 GB。

# php - 通过 $_Session 使用内联 PHP

> ID：10395979
> 
> 赞同：1
> 
> 时间：2012-05-01T09:41:17.500
> 
> 标签：php, session, login

我再次对我的 PHP 进行破解，但我陷入了一些内联问题。我正在使用我在[http://www.1stoptutorials.com/Membership_Course.html](http://www.1stoptutorials.com/Membership_Course.html)学到的成员脚本。

我的表有以下字段：userid、first_name、last_name、email_address、username、password、dob、guardianid、user_level、signup_date、last_login、激活。

我想要做的是在用户登录时使用我的表中的数据，但由于某种原因，我能够访问的只是名字和姓氏字段。其他人都没有工作。

这是我当前在标题中的 PHP

```
<?php
require_once ('verify.php'); 
// Start output buffering:
ob_start();
// Initialize a session:
session_start();
// If no first_name session variable exists, redirect the user:
if (!isset($_SESSION['first_name'])) {  
$url = BASE_URL . ''; // Define the URL.
ob_end_clean(); // Delete the buffer.
header("Location: $url");
exit(); // Quit the script. 
}
?> 
```

它在底部被关闭。现在登录，他们使用他们的用户名和密码，但我想知道为什么我只能使用他们的名字和姓氏？另外我如何嵌入内联？我目前正在使用以下内容。

```
<p style="color:White;">
  Welcome 
  <strong>
    <a href="profile.php?id=<? echo $_SESSION['userid'] ?>" style="font-family:Arial, Helvetica, sans-serif;color:White;">
      <? echo $_SESSION['first_name'] ." ". $_SESSION['last_name'] ?>
    </a>
  </strong>
  &nbsp;&nbsp;-&nbsp;&nbsp;Home&nbsp;&nbsp;|&nbsp;&nbsp;
  <a href="photo.php" class="link">Photos</a>
  &nbsp;&nbsp;|&nbsp;&nbsp;
  <a href="video.php" class="link">Videos</a>
  &nbsp;&nbsp;|&nbsp;&nbsp;
  <a href="logout.php" class="link">Log Out</a>
</p> 
```

但当然只有名称出现在我的输出页面中，而不是 id 或任何其他字段。

任何人都可以帮助或我需要发布更多信息吗？

或者任何人都可以建议一个更好的登录脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:27:05.937

> 我想知道为什么我只能使用他们的名字和姓氏？

我相信，因为其中的某些代码`verify.php`不会在会话中存储任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:29:16.800

仅仅因为您从中学到的脚本告诉您只能使用`first_name`并不意味着您必须继续使用相同的东西。您可以使用在存储数据时使用的任何字段。最有效的将是存储`user_id`。

关于内联部分，这是有争议的。有些人喜欢内联 PHP，有些人喜欢内联 HTML。使用让你更舒服的东西。

# asp.net - 当说它严格理解html内容和脚本时，如何浏览器在其页面上显示asp.net控件？

> ID：10395981
> 
> 赞同：0
> 
> 时间：2012-05-01T09:41:40.320
> 
> 标签：asp.net

我正在学习 asp.net 基础知识。我正在浏览 www.dotnetspider.com 上的教程，并解释了浏览器只能严格理解 html 内容和脚本。因此，当我创建一个 web 表单并删除 asp 控件并运行时，我的浏览器如何理解该控件内容并在其页面上显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:45:26.870

您的浏览器不理解 ASP.NET 控件。ASP.NET 理解它们。每当请求 Web 表单时，ASP.NET 都会获取表单并将其转换为 HTML 表单和所需的任何脚本，然后将它们发送到浏览器。

使用 ASP.NET Web 控件使您的工作更轻松，您不必担心将一堆 HTML 表单和代码连接在一起。但正如网站所说，用户浏览器的所有内容都是 HTML。

**更新：**
当我说“ASP.NET 了解它们”时，我实际上是在谈论 ASP.NET 框架和 IIS（Microsoft 的 Web 服务器）。所以用户浏览器发出的请求到达IIS。它从 URL 知道这是对 ASP.NET 应用程序的请求。因此，它使用 ASP.NET 代码获取 .aspx 页面和 .ascx 控件并将它们转换为 HTML 响应。然后它将该 HTML 发送到用户的浏览器。因此，ASP.NET（和 IIS）位于用户计算机上的 Web 浏览器与您编写的 ASP.NET 代码和页面之间的“中间”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:44:52.343

我刚刚找到了细节，所以我想写下来可能会让它更深入。它随着浏览器向 IIS 发送请求 -> 转到 ISAPI dll（用 C++ 编写） -> 加载 CLR 进程，每个控件都有渲染方法最终发出其 html 代码 -> 哪个浏览器可以理解和显示。如果我在哪里错了，请纠正我。

# javascript - 如何在json返回结果之前阻止函数的执行？

> ID：10395985
> 
> 赞同：0
> 
> 时间：2012-05-01T09:42:13.027
> 
> 标签：javascript, jquery, json, jsonp

我正在使用带有 JS 的 Springer OpenAccess API，它们以多种方式提供数据，其中一种是 jsonp 格式。我的代码如下所示。无论我做什么，我都无法让它同步运行。回调机制是很好的解决方案，但我想学习如何同步运行此函数或如何使此函数同步运行。

任何帮助将不胜感激。

```
 SpringerAPI.prototype.getArticleInfo = function(doi){
    //create  url of article according to given doi...
    var url = this.endpoint.host+this.endpoint.method+''+'?q=doi:'+doi+'&api_key='+this.endpoint.apikey+"&callback=?";
    //get information about article...      
    //perform async request to the Springer API
    this.situation = true;
    var article;
    jQuery.ajax({
      method:'POST',
      url: url,
      dataType: 'JSON',
      cache: true,
     async: false, // to set local variable
     success: function(data)
     {
        article = FromSpringerToArticle(data,-1);
     }
    });

    return article;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:44:45.057

你不能做同步 JSONP 因为[jQuery doc 说](http://api.jquery.com/jQuery.ajax/)

> ### 异步
> 
> ...跨域请求和dataType：“jsonp”请求不支持同步操作...

您必须进行异步操作并使用回调。

# jquery - HTTP处理人员是适当的体系结构选择吗？

> ID：10395987
> 
> 赞同：2
> 
> 时间：2012-05-01T09:42:23.830
> 
> 标签：jquery, .net, web-services, architecture

目前，我们的软件由一个 winForms 应用程序组成，该应用程序调用许多 Web 服务，它们之间有数百个 Web 方法。

由于许多原因，我们正在转向纯 Web 架构（jQuery Mobile、jQuery、HTML5、LawnChair）。网页只会处理呈现，所有的业务逻辑都会发生在服务器端。所以我需要从网页调用这些网络服务。

我知道必须有很多方法可以做到这一点，例如我一直在试验 jQuery 为每个 Web 方法调用服务器端 HttpHandlers。由于 jQuery 使用 JSON，我不能直接调用 XML SOAP，因此需要在顶部添加一个新层，以便可以从 jQuery 调用。

然而，这是正确的做法吗？是否有另一种更合适的方法，即实现更少的努力，[可能使用 WCF](http://blogs.msdn.com/b/carlosfigueira/archive/2010/10/29/working-with-untyped-json-in-a-wcf-service.aspx)或其他我忽略的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:35:29.837

您可以从 jQuery 使用 XML Web Services。它可以很好地处理 XML 消息。然而，在 JavaScript 中创建和读取 SOAP 消息很糟糕。

什么是合适的取决于你。但是，使用 WCF REST 甚至更好的[ASP.NET MVC4 WebAPI](http://www.asp.net/web-api)将通过管道引导您的应用程序，并让您专注于相当快速地交付工作应用程序。但是，这将需要对您的原始服务进行一些重写（无论如何，您似乎注定要这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:39:49.297

Not sure if this can help you but we use a webservice like `ajax.asmx` and we call it using jQueries ajax

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel
Imports ClsLib
Imports Microsoft.WindowsAzure.StorageClient
Imports Microsoft.WindowsAzure

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
<System.Web.Script.Services.ScriptService()> _
<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class Ajax

<System.Web.Services.WebMethod()> _
Public Function function1(byval first as string, byval second as string) as string
    'do something here
    Return someJsonAsString
End Function

End Class 
```

Something like that could help you I suppose.

But you can make your own classes to handle the existing SOAP XML services it jsut requries more client side code

```
var productServiceUrl = 'http://localhost:57299/ProductService.asmx?op=SaveProduct'; // Preferably write this out from server side

function beginSaveProduct(productID, productName, manufactureDate)
{
var soapMessage =
'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
<soap:Body> \
<SaveProduct xmlns="http://sh.inobido.com/"> \
<productID>' + productID + '</productID> \
<productName>' + productName + '</productName> \
<manufactureDate>' + manufactureDate + '</manufactureDate> \
</SaveProduct> \
</soap:Body> \
</soap:Envelope>';

$.ajax({
url: productServiceUrl,
type: "POST",
dataType: "xml",
data: soapMessage,
complete: endSaveProduct,
contentType: "text/xml; charset=\"utf-8\""
});

return false;
}

function endSaveProduct(xmlHttpRequest, status)
{
 $(xmlHttpRequest.responseXML)
    .find('SaveProductResult')
    .each(function()
 {
   var name = $(this).find('Name').text();
 });
} 
```

And parsing SOAP responses in jQuery.. I think there are plugins for that.

# sql - INSERT from JOIN 插入空值

> ID：10395988
> 
> 赞同：1
> 
> 时间：2012-05-01T09:42:26.480
> 
> 标签：sql, sql-server, sql-server-2008, tsql

需要将 3 个表中的值插入另一个名为`myTable`. myTable 中的必填字段为：

```
[Id_student] int,
[id_subjects] int
[degrees] float
[st_Name] nvarchar(30) 
[Id_Class] int
[Id_Group] int 
[Class] nvarchar(15)
[group] nvarchar(15))` .. 
```

我在下面创建了存储过程。但是查看表格后发现只保存了传递的参数！即`@Id_student , @id_subjects , @degrees`。谁能解释这段代码有什么问题？

```
CREATE storedprocedure mySp_myTable_insert
        @Id_student  int,
        @id_subjects int,
        @degrees     int
as

DECLARE @st_Name nvarchar(30) 
SELECT @st_Name  = pst.st_Name  FROM dbo.sudents  AS pst where pst.id_student=@id_student ;

INSERT [myTable]
    (
        [Id_student],
        [id_subjects],
        [degrees],
        [st_Name],
        [Id_Class],
        [Id_Group],
        [Class],
        [group]
    )

    (select
        @Id_student,
        @id_subjects,
        @degrees,
        @st_Name
        ,tc.Id_Class
        ,tg.Id_Group
        ,tc.Class
        ,tg.group
    from dbo.subjects sbj 
    inner join tGroup tg 
    inner join tClass tc
        on tc.Id_Class=tg.Id_Class 
        on sbj.Id_Group =tg.Id_Group 
    where sbj.id_subjects=@id_subjects) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:00:21.750

我认为您应该删除语句周围的括号`SELECT`并修复`join`-`on`关键字/子句的顺序。

试试这个版本：

```
CREATE storedprocedure mySp_myTable_insert
        @Id_student  int,
        @id_subjects int,
        @degrees     int
as

DECLARE @st_Name nvarchar(30) 
SELECT @st_Name  = pst.st_Name  FROM dbo.sudents  AS pst where pst.id_student=@id_student ;

INSERT [myTable]
    (
        [Id_student],
        [id_subjects],
        [degrees],
        [st_Name],
        [Id_Class],
        [Id_Group],
        [Class],
        [group]
    )
select
    @Id_student,
    @id_subjects,
    @degrees,
    @st_Name
    ,tc.Id_Class
    ,tg.Id_Group
    ,tc.Class
    ,tg.group
from dbo.subjects sbj 
inner join tGroup tg on sbj.Id_Group =tg.Id_Group
inner join tClass tc on tc.Id_Class=tg.Id_Class 
where sbj.id_subjects=@id_subjects

GO 
```

# ruby-on-rails - ActiveRecord 中的日期比较如何工作？

> ID：10395994
> 
> 赞同：0
> 
> 时间：2012-05-01T09:43:40.687
> 
> 标签：ruby-on-rails, ruby, activerecord

我是 Rail 新手，正在尝试在 ActiveRecord 中进行查询。我正在尝试获取所有状态为“已登陆”的记录，这些记录已超过 60 天。我的查询一直到获得所有状态为“已登陆”的项目。当我添加“created_at < ?”的最后一个条件时，我总是得到一个空关系。我知道我有符合该描述的项目，所以我在查询中做错了什么并且不理解。我相信我的错误在于日期比较，但我不确定。

```
1\. Projects
    belongs_to :status
    has_many :project_status_histories
2\. Status
    has_many :projects
    has_many :project_status_histories
3\. Project_Status_Histories
    belongs_to :status
    belongs_to :project

Project.find(:all, :joins => [:project_status_histories, :status], :conditions => {:projects => {:status_id => Status.where(:name => 'Landed').first.id }, :project_status_histories => {:created_at => ["created_at < ?", (Date.today - 60.days)]}}) 
```

我尝试使用 dbconsole 逐步构建查询，但没有任何运气。感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:37:56.073

我不认为这是日期算术。一种很好的方法是使用命名范围。将以下内容添加到 project.rb：

```
scope :landed, joins(:status).where('statuses.name' => 'Landed')
scope :recent, lambda \
              { joins(:project_status_histories) \
              .where('project_status_histories.created_at < ?', Date.today - 60.days) } 
```

然后您可以使用以下方法检索相关记录/对象：

```
Project.landed.recent 
```

这在我的测试中对我有用。您还应该查看 Rails 指南，我从中窃取了大部分内容：

[http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:55:52.483

您的查询有点复杂...

我宁愿这样做：

```
Project.where("status.name = ? AND project_status_histories.created_at < ?", "Landed", Time.now.day - 60.days) 
```

我认为这应该会更好。如果没有，请告诉我，也许我写错了，不幸的是我现在无法测试它......

[编辑]

您可能还想查看生成的 SQL 是什么，为此使用“解释”方法，只需将其添加到查询的末尾并打印结果，例如使用您的查询：

```
Project.find(:all, :joins => [:project_status_histories, :status], :conditions => {:projects => {:status_id => Status.where(:name => 'Landed').first.id }, :project_status_histories => {:created_at => ["created_at < ?", (Date.today - 60.days)]}}).explain 
```

# ruby - 用于系统调用的 Ruby C 绑定与 Ruby 包装器

> ID：10395995
> 
> 赞同：2
> 
> 时间：2012-05-01T09:43:48.223
> 
> 标签：ruby, binding, ruby-c-extension, systemwrapper

Ruby C 绑定的执行与系统调用的 Ruby 包装器之间的主要区别是什么？

对于我的问题，我正在考虑将 Git 版本控制功能大量整合到 Ruby on Rails 应用程序中。在处理这项任务时，我不明白如何考虑 Ruby 程序的执行管道，该程序包含使用 Ruby C 绑定（如[yajl-ruby](https://rubygems.org/gems/yajl-ruby) ）实现的库与用于系统调用（如[git Ruby Gem](https://rubygems.org/gems/git) ）的 Ruby 包装器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:47:20.137

绑定直接与库的 API 接口，而包装器使用系统调用从命令行调用最终用户应用程序。

包装器类似于 UNIX 管道——程序不了解彼此的内部结构，而是通过文本接口进行通信。不过，松散耦合是有代价的。系统调用是昂贵的操作，会显着减慢您的应用程序。

这就是绑定很棒的原因。由于它们使用库的编程接口，因此显着减少了开销。GitHub 有自己的`git`包装器，[速度是导致他们`git`在 Ruby](https://github.com/blog/107-supercharged-ruby-git)中实现的问题。

他们自己做是因为很难为`git`. 它不是为用作图书馆而设计的。直接调用它的函数真的很尴尬，因为它`die()`几乎会调用任何错误。

对适当`git`图书馆的需求导致了[`libgit2`](http://libgit2.github.com/). 它甚至带有[Ruby 绑定](https://github.com/libgit2/rugged)！由于您想将`git`功能与您的应用程序集成，您应该检查一下。

# jquery-ui - 单独添加时的jquery ui插件/小部件加载顺序

> ID：10395996
> 
> 赞同：1
> 
> 时间：2012-05-01T09:43:59.783
> 
> 标签：jquery-ui

我正在为我的项目使用多个 jquery ui 小部件，随着项目的进展，我刚刚将我需要的内容添加到列表的底部，但现在我遇到了一些错误。在这个[问题](https://stackoverflow.com/questions/2594579)中说一些小部件从其他小部件继承属性/功能，那么安排脚本标签以使所有小部件正常工作而没有错误的最佳顺序是什么？

这是我正在使用的 jquery 文件，它们在 HTML 中的顺序是

1.  jquery.1.7.2.min.js
2.  jquery.ui.core.min.js
3.  jquery.ui.widget.min.js
4.  jquery.ui.position.min.js
5.  jquery.effects.core.min.js
6.  jquery.ui.tooltip.min.js
7.  jquery.ui.dialog.min.js
8.  jquery.ui.datepicker.min.js
9.  jquery.ui.tabs.min.js
10.  jquery.ui.selectable.min.js
11.  jquery.ui.autocomplete.min.js
12.  jquery.ui.menu.min.js
13.  jquery.ui.button.min.js
14.  jquery.ui.draggable.min.js
15.  jquery.ui.mouse.min.js
16.  jquery.ui.resizable.min.js

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:57:38.883

浏览编译后的 UI 文件看起来可能是这样的：

1.  用户界面核心
2.  小部件
3.  鼠
4.  可拖动
5.  可丢弃
6.  可调整大小
7.  可选择的
8.  可排序
9.  效果核心
10.  所有效果按字母顺序排列
11.  手风琴
12.  自动完成
13.  按钮
14.  日期选择器
15.  对话
16.  菜单
17.  菜单栏
18.  弹出
19.  位置
20.  进度条
21.  滑块
22.  微调器
23.  标签
24.  工具提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:48:27.443

请指定您尝试使用的小部件。您应该始终先导入 jquery，然后查看小部件依赖项。您也可以[在此处](http://jqueryui.com/download)“构建您自己的 jquery”，并且将自动检查任何所需的依赖项。

# android - android中的帧到毫秒转换

> ID：10395997
> 
> 赞同：13
> 
> 时间：2012-05-01T09:44:05.853
> 
> 标签：android, audiotrack

Android中[AudioTrack类的](http://developer.android.com/reference/android/media/AudioTrack.html)[getPlaybackHeadPosition](http://developer.android.com/reference/android/media/AudioTrack.html#getPlaybackHeadPosition%28%29) ()方法返回播放头的位置，以帧为单位，它的等效值是多少毫秒？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-01T10:06:38.657

我猜它会是

```
( track.getPlaybackHeadPosition( ) / track.getSampleRate( ) ) * 1000.0 
```

换句话说，播放的帧数除以每秒的帧数。然后将结果乘以 1000 得到毫秒。

一帧由每个通道一个样本组成，因此应该等于采样率。

例如，如果`getPlaybackHeadPosition( )`返回`8654`并`getSampleRate( )`返回，`8000`则自轨道开始以来的时间将为`( 8654 / 8000 ) * 1000`或`1081.75ms`。（假设浮点运算）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-20T08:32:31.193

@Nike 的回答是对的。</p>

但是有一个问题。</p>

如果我们调用该`MediaExtractor.seekTo`方法，则`AudioTrack.getPlaybackHeadPosition()`返回累积值。</p>

`MediaExtractor.getSampleTime() / 1000`是当前位置的正确毫秒。

你可以检查一下！