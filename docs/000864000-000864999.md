# StackOverflow 问答 000864000-000864999

# css - ${imagepath} 在 CSS 文件中指的是什么？

> ID：864007
> 
> 赞同：1
> 
> 时间：2009-05-14T15:23:17.993
> 
> 标签：css, perl

我正在尝试调整一个用于为公共 wifi 安装生成启动页面的 perl 脚本。我只得到了几个示例文件，没有文档。在与接入点供应商通了几个小时的电话后，我被告知我可以“编辑”示例以设计我们的自定义页面。我试图了解文件中发生了什么。

我有 .css 文件，其中包含以下内容。

```
#logo_container {
    width: 528px; height: 58px;
    background-image: url(${imagepath}body_title_line.gif);
    border: 0;
} 
```

我还有一个 .pl 文件，其中包含一个`$html_body_top`包含以下 html 片段的变量：

`<a href=\"${imagepath}WirelessAUP-ibm.htm\" target=\"_self\">Acceptable Use Policy</a>`

**${imagepath}**指的是什么？我能做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T15:27:30.060

我猜你的图片的根目录。因此，如果 body_title_line.gif 在 /images/ 下，则 imagePath 变量可能需要反映这一点。

CSS 不支持变量，所以这是您的 PL 脚本注入的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T06:57:14.270

这可能是模板工具包替换的变量，而不是您的 Perl 脚本。也有可能 Perl 脚本没有使用 strict，并且由于缺少变量声明，正在用一个空白字符串代替 ${imagepath}。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T15:25:44.243

看起来 perl 脚本需要使用 $imagepath 的某些值运行。${imagepath} 等于变量 $imagepath。大括号通常在字符串中使用变量时使用，以消除歧义

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T15:26:02.277

看起来像一个令牌，它将被某种构建脚本替换，该脚本运行在项目中的所有文件上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T15:27:15.240

我猜想 imagepath 是 perl 脚本中的一个变量，在生成时替换为实际的 URL。

# ruby-on-rails - 从别名读取输出的 Ruby 脚本

> ID：864008
> 
> 赞同：0
> 
> 时间：2009-05-14T15:23:36.433
> 
> 标签：ruby-on-rails, ruby, file

我已经设置了一个别名，`/etc/aliases`以便每次电子邮件进入特定地址时，电子邮件的文本都会发送到 Ruby 脚本。像这样：

例子：`|/etc/smrsh/my_script.rb`

我需要知道如何在我的 Ruby 脚本中读取管道数据。我编写了一个可以读取数据的简单 Perl 脚本。只是不知道如何在 Ruby 中执行此操作。

这是 Perl 脚本中的相关行：

```
my $fout = "/tmp/email.out";

open( EM, ">$fout" );

while( <> )  {
    chomp;
    print EM "$_\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T15:35:48.730

您可以使用`STDIN`读取您的 pided 数据。您的 Perl 代码的等价物类似于：

```
out = File.open("/tmp/email.out", "a+")
STDIN.each do |line|
  out.puts line
end 
```

# windows - Windows 安装中最接近 grep 的标准是什么？

> ID：864013
> 
> 赞同：11
> 
> 时间：2009-05-14T15:24:29.987
> 
> 标签：windows, shell, command-line, grep

我想在无法安装任何东西的 Windows 机器上执行类似“dsquery * | grep asdf”的操作。有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-14T15:28:18.187

[`findstr`](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/findstr)：

```
dsquery * | findstr "asdf" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-14T15:33:46.410

findstr 命令就是您要查找的内容。它与 grep 有点不同，但你可以做一些相同的事情。

```
    C:\Working>findstr /?
    在文件中搜索字符串。

    FINDSTR [/B] [/E] [/L] [/R] [/S] [/I] [/X] [/V] [/N] [/M] [/O] [/P] [ /F:文件]
            [/C:string] [/G:file] [/D:dir list] [/A:color attributes] [/OFF[LINE]]
            字符串 [[驱动器:][路径]文件名[...]]

      /B 如果在行首，则匹配模式。
      /E 在行尾匹配模式。
      /L 按字面意思使用搜索字符串。
      /R 使用搜索字符串作为正则表达式。
      /S 在当前目录和所有目录中搜索匹配的文件
                 子目录。
      /I 指定搜索不区分大小写。
      /X 打印完全匹配的行。
      /V 仅打印不包含匹配项的行。
      /N 在匹配的每一行之前打印行号。
      /M 如果文件包含匹配项，则仅打印文件名。
      /O 在每个匹配行之前打印字符偏移量。
      /P 跳过包含不可打印字符的文件。
      /OFF[LINE] 不要跳过设置了脱机属性的文件。
      /A:attr 用两个十六进制数字指定颜色属性。见“色/？”
      /F:file 从指定文件中读取文件列表（/ 代表控制台）。
      /C:string 使用指定的字符串作为文字搜索字符串。
      /G:file 从指定文件中获取搜索字符串（/ 代表控制台）。
      /D:dir 搜索以分号分隔的目录列表
      字符串 要搜索的文本。
      [驱动器：][路径]文件名
                 指定要搜索的一个或多个文件。

    除非参数有前缀，否则使用空格分隔多个搜索字符串
    与 /C。例如，'FINDSTR "hello there" xy' 搜索 "hello" 或
    "there" in file xy 'FINDSTR /C:"hello there" xy' 搜索
    文件 xy 中的“你好”

    正则表达式快速参考：
      . 通配符：任何字符
      * 重复：前一个字符或类出现零次或多次
      ^ 行位置：行首
      $ 行位置：行尾
      [class] 字符类：集合中的任意一个字符
      [^class] 逆类：任何一个不在集合中的字符
      [xy] 范围：指定范围内的任意字符
      \x 转义：元字符 x 的字面使用
      \ 词位置：词尾

    有关 FINDSTR 正则表达式的完整信息，请参阅在线命令
    参考。

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T15:27:04.833

```
dsquery * | find "asdf" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T15:33:06.770

“查找”出现在 DOS 时代。“findstr”比“find”更新且功能更丰富

# c# - 从 C# 针对 ADAM 对 ADAM 用户进行身份验证 - 无法绑定

> ID：864015
> 
> 赞同：1
> 
> 时间：2009-05-14T15:24:50.970
> 
> 标签：c#, authentication, directoryservices, adam

我已经设置了一个 ADAM 实例并添加了一些测试用户。在 c# 中，我可以使用 Windows 帐户绑定到 ADAM，但无法使用 ADAM 用户之一进行绑定。（我可以在 ldp 中成功绑定 adam 用户）并且我已通过将 msDS-UserAccountDisabled 属性设置为 false 来确保启用了用户。当我与我的 Windows 帐户绑定时，我可以成功搜索并带回 ADAM 用户的属性，但我仍在努力对他们进行身份验证，当我尝试与 ADAM 用户帐户绑定时，我收到错误：

错误：System.Runtime.InteropServices.COMException (0x8007052E)：登录失败：未知用户名或密码错误。在 System.DirectoryServices.DirectoryEntry.Bind（布尔 throwIfFail）

这是我正在使用的代码：

```
string userName = txtUserName.Text;
string password = txtPassword.Text;
string ADConnectionString = "LDAP://localhost:389/CN=sandbox,DC=ITOrg";
DirectoryEntry entry = new DirectoryEntry(ADConnectionString);

entry.Username = "myComputer\\Administrator";
entry.Password = "myPassword";
try 
{
DirectorySearcher searcher = new DirectorySearcher(entry);
searcher.Filter = "(&(objectClass=user)(CN=" + userName + "))";
SearchResultCollection result = searcher.FindAll();
if (result.Count > 0)
{
    //bind with simple bind
    using (DirectoryEntry de = new DirectoryEntry(result[0].Path, userName, password,AuthenticationTypes.None))
    {
         if (de.Guid != null) // this is the line where it dies
         {
              Label1.Text = "Successfully authenticated";
              Label2.Text = result[0].Properties["displayName"][0].ToString();
              Label3.Text = result[0].Properties["telephoneNumber"][0].ToString();
          } else 
          {
             Lable1.Text = "Unable to Authenticate";
          }
     }
}
else
{
    Lable1.Text = "UserName :" + userName + " not found"; 
}
} catch(Exception ex)
{
     Label1.Text = "Error searching: " + ex.ToString();
} 
```

在此先感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T21:52:06.563

这可能是用户名格式问题。在 SDS 中验证 ADAM 用户时，您必须使用 LDAP 简单绑定并使用 ADAM 支持的名称格式。ADAM 在技术上也允许您使用 Digest auth，但这在 SDS（仅 SDS.Protocols）中不可用，因此不适用于您的代码方法。

您正在使用简单绑定，因为您设置了 AuthenticationTypes.None 以便该部分正常。那么可能错误的部分是用户名格式。

ADAM 接受用户的完整 DN、他们的 displayName（如果设置且唯一）和/或 userPrincipalName（如果设置且唯一）作为“可绑定”用户名，因此从用户的完整 DN 开始，看看是否有效。如果是这样，您也可以尝试其他用户名值。请注意，您可以在 ADAM 中为 displayName 或 userPrincipalName 放置您想要的任何内容。没有验证。只要确保值是唯一的。

如果您真的想针对 ADAM 执行某种类型的绑定身份验证，您将通过使用 .NET 3.5 中 PrincipalContext 的 ValidateCredentials 方法获得更好的性能和扩展性。

这种东西一直在[http://www.directoryprogramming.net](http://www.directoryprogramming.net)的论坛中记录和讨论，并且是我经常光顾的地方，因为它是我的网站。:) 一位朋友向我介绍了这篇文章，否则我将永远不会看到它。

# c# - 如何在工作流进入完成状态之前从状态机工作流中获取数据？

> ID：864027
> 
> 赞同：2
> 
> 时间：2009-05-14T15:26:21.607
> 
> 标签：c#, asp.net-mvc, workflow-foundation

我正在使用状态机工作流并使用 ExternalDataExchange 服务来处理主机中的事件并通过 eventargs 将数据获取到工作流中。

但是，现在我需要从工作流程中获取数据，我遇到了困难。

输出参数仅在工作流完成事件中可用，但我的工作流不完整。主机用一些数据触发一个事件，基本上是在等待工作流完成对事件的处理（手动调度程序）。在我对工作流中事件的特定处理中，它正在进行一些验证，如果验证失败，它不会移动到下一个状态，但我需要能够将验证结果发送回主机应用程序。

我正在尝试完成的一个示例如下所示：

```
OrderWorkflow
    PendingOrderState
        ImportOrderEvent
            - If the order passes validation move to CompletedState
            - Else return the validation results to the host (how?)
    CompletedState 
```

还应该注意的是，我的主机实际上是一个 ASP.NET MVC 应用程序，所以我试图避免在我的控制器/页面上直接连接事件来处理来自工作流调用的本地服务，但我并不完全反对它如果这是它需要做的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T17:41:27.117

看起来我有一个可行的解决方案。

基本上，我的 WorkflowRuntimeManager 与 Bruce Bukovics 在他的著作 Pro WF Windows Workflow in .NET 3.5 中介绍的差不多。

我最终创建了一个新服务并将其添加到工作流运行时。该服务允许我的工作流在我的应用程序中触发一个事件，该事件允许它将任何 IDictionary 传递回我的主机应用程序。

这个事件依次由 WorkflowRuntimeManager 接收，然后它依次获取结果并将它们与适当的 WorkflowInstance 相关联，并且一旦 Workflow 方法返回，它就可供应用程序本身使用。

我已在此处为可能想要复制此功能的任何其他人附加了服务实现。或者更好的是，如果有人能找到更好的方法来做到这一点，请告诉我。

```
public interface ISendDataService
{
    event EventHandler<ReceivedDataEventArgs> ReceivedDataEvent;
    void SendData(Guid instanceId, IDictionary<string, object> data);
}

public class SendDataService : ISendDataService
{
    public event EventHandler<ReceivedDataEventArgs> ReceivedDataEvent;

    private void OnReceivedDataEvent(Guid instanceId, IDictionary<string, object> data)
    {
        if (ReceivedDataEvent != null)
            ReceivedDataEvent(null, new ReceivedDataEventArgs(instanceId, data));
    }

    public void SendData(Guid instanceId, IDictionary<string, object> data)
    {
        OnReceivedDataEvent(instanceId, data);
    }
}

public class ReceivedDataEventArgs : EventArgs
{
    public ReceivedDataEventArgs()
    {
    }

    public ReceivedDataEventArgs(Guid instanceId, IDictionary<string, object> data)
    {
        InstanceId = instanceId;
        Data = data;
    }

    public Guid InstanceId { get; set; }
    public IDictionary<string, object> Data { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-08T06:52:57.790

以上解决方案适用于 ManuakWorkflowScheduler 服务 - 同步执行？

# html - 如何在不使用太多 div 标签的情况下使用 css 创建所需的表单？

> ID：864032
> 
> 赞同：1
> 
> 时间：2009-05-14T15:27:03.850
> 
> 标签：html, forms, css

我正在创建的邮件列表表单包含以下字段：名字、姓氏、街道地址、城市、州、邮编、电子邮件和电话号码。我使用列表项和 css NOT 表创建了表单。我想要第一行的名字和姓氏标签，第二行的街道地址，第三行的城市，州和邮政编码，第四行的电子邮件和电话号码线。每条线应彼此正确对齐。

起初我已经完成了这个，但是我几乎在每个标签周围都使用了很多 div 类，我想知道这是否可能在不使用许多 div 标签的情况下实现。以下是邮件列表的代码：

```
<h1>Join our Mailing List</h1>
{exp:freeform:form form_name="cogar_form" return="thankyou" mailing_list="cogar_mail"  required="first_name|last_name|street_address|city|state|postalcode|email|phone1" notify="kneeskeh81@herkimer.edu" template="cogar_mail"}
<ul>                        
<li><label for="first_name">First Name</label>
<br /><input type="text" id="first_name" name="first_name" value="" maxlength="30" /></li>

<li><label for="last_name">Last Name</label>
<br /><input type="text" id="last_name" name="last_name" value="" maxlength="30" /></li>

<li><label for="street">Street Address</label>
<br /><input type="text" id="street" name="street_address" value="" size="40" maxlength="50"/></li>

<li><label for="city">City/Town</label>
<br /><input type="text" id="city" name="city" value="" /></li>

<li><label for="state">State</label> <br /><select id="state" name="state">
<option>&nbsp;</option>
<option value="AL">AL</option>
<option value="AK">AK</option>
<option value="AZ">AZ</option>
<option value="AR">AR</option>
<option value="CA">CA</option>
<option value="CO">CO</option>
<option value="CT">CT</option>
<option value="DE">DE</option>
<option value="FL">FL</option>
<option value="GA">GA</option>
<option value="HI">HI</option>
<option value="ID">ID</option>
<option value="IL">IL</option>
<option value="IN">IN</option>
<option value="IA">IA</option>
<option value="KS">KS</option>
<option value="KY">KY</option>
<option value="LA">LA</option>
<option value="ME">ME</option>
<option value="MD">MD</option>
<option value="MA">MA</option>
<option value="MI">MI</option>
<option value="MN">MN</option>
<option value="MS">MS</option>
<option value="MO">MO</option>
<option value="MT">MT</option>
<option value="NE">NE</option>
<option value="NV">NV</option>
<option value="NH">NH</option>
<option value="NJ">NJ</option>
<option value="NM">NM</option>
<option value="NY">NY</option>
<option value="NC">NC</option>
<option value="ND">ND</option>
<option value="OH">OH</option>
<option value="OK">OK</option>
<option value="OR">OR</option>
<option value="PA">PA</option>
<option value="RI">RI</option>
<option value="SC">SC</option>
<option value="SD">SD</option>
<option value="TN">TN</option>
<option value="TX">TX</option>
<option value="UT">UT</option>
<option value="VT">VT</option>
<option value="VA">VA</option>
<option value="WA">WA</option>
<option value="WV">WV</option>
<option value="WI">WI</option>
<option value="WY">WY</option>
</select></li>

<li><label for="postalcode">Zip</label>
<br /><input type="text" id="postalcode" name="postalcode" value="" size="11" maxlength="5" /></li>

<li><label for="email">Email</label>
<br /><input type="text" id="email" name="email" value="" maxlength="30" /></li>

<li><label for="phone">Phone Number</label>
<br /><input type="text" id="phone" name="phone1" value="" size="15" maxlength="14" /></li>
</ul>   
<p style="clear:left;"><input type="submit" name="submit" value="Submit" /></p>
{/exp:freeform:form} 
```

任何人都知道如何在不使用太多 div 标签的情况下正确设置样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T15:39:31.293

我不确定您所说的“每条线应彼此正确对齐”的确切含义。如果您的意思是，每个标签都应该正确地位于其输入元素的上方，这相对容易，但确实需要嵌套 div：

```
<div class="field">
  <div class="label"><label for="firstname">First Name</label></div>
  <div class="control"><input id="firstname" name="firstname" type="text"></div>
</div> 
```

如果您认为 div 层数太多，那么您显然从未看过博客引擎的源代码。:)

然后，您可以按照自己的意愿安排字段 div。

但是，如果您的意思是不同行上的 div 应该排成一行，那么除非您修复 div 的宽度，否则这将变得更加困难。有时这很实用，有时则不然。这只是表格比“纯” CSS 更擅长的一件事。

冒着自我推销的风险是[我对表格与纯 CSS 的看法](http://www.cforcoding.com/2009/05/everything-old-is-new-again.html)。我采取务实的观点：如果您正在做的事情在纯 CSS 中很容易做到，那么就这样做，但是由于 CSS 的限制和浏览器的差异，有些效果是您无法做到的（或做得好）不使用表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T15:57:51.797

[我建议从Wufoo](http://wufoo.com/)的一些表格中查看源代码。例如，[紧急联系人和医疗信息](http://wufoo.com/gallery/templates/forms/emergency-contact-and-medical-info/)有许多以不同方式排列的字段。像您的示例一样，为了拆分作者使用的字段组`<li>`。如果您愿意，我不明白为什么不能用`<div>`s 替换它们。

我认为那里的作者无论如何都不会使用“太多” `<div>`。

也不错：来自[The Man in Blue的](http://www.themaninblue.com/)[水平](http://www.themaninblue.com/experiment/InForm/horizontal.htm)和[边距](http://www.themaninblue.com/experiment/InForm/margin.htm)形式。创造性地使用s。`<label>`

布局表格的技巧有很多，我不认为有任何*错误*的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:15:22.393

如果您尝试在没有大量 div 的情况下执行此操作，则可以执行以下操作：

```
 <style type="text/css">
       fieldset
       {
        width: 550px;
        padding: 5px 0;

       }             
       fieldset label
       {
          float: left;
          width: 200px;
          margin-right: 15px;
       }
    </style>
    <fieldset>
    <label for="first_name">First Name</label>
    <input type="text" id="first_name" name="first_name" /> 
```

. . . 等等......上面的css将使标签与表单元素很好地对齐。注意：马克赫德在我打字时发布了他的答案 - 他的答案与我的相似

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T16:25:20.670

只需使用表格。为什么我们要让自己经历这种折磨？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T15:31:09.083

您应该能够通过使用类来实现它，并通过仔细使用诸如[显示属性](http://www.w3schools.com/css/pr_class_display.asp)之类的东西（例如，您可以通过使列表项使用来将前两个字段放在同一行`display: inline`）。

看看上面的东西，你根本不需要任何 div。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T15:32:29.440

我推荐[BluePrint](http://www.blueprintcss.org)。它是一个 CSS 框架。如果您学会正确使用它，它将大大减少您需要的 div 数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T16:13:43.350

您可以通过使用适当的表单标签（例如字段集和标签）来减少 div 标签的数量：

```
<form>
    <fieldset>
        <legend>Fieldset title</legend>
        <label for="input-id">
            <span class="label-title">Label Title <span class="required">*</span></span>
            <input id="input-id" class="text-input" type="text" name="input-name" />
        </label>
        <!-- etc -->
    </fieldset>

    <ul class="form-buttons">
        <li><input type="submit" value="Submit" /></li>
    </ul>
</form> 
```

这种方法将为您提供广泛的挂钩：表单本身、字段集、图例、标签、标签标题、所需的文本标题、某种类型的输入、表单按钮（分组和单个）等。

使用所有这些钩子，您可以非常有效地定位您的 CSS 和 JavaScript 验证。

# linq-to-sql - 如何查看 2 个对象数组之间的常见项目

> ID：864039
> 
> 赞同：0
> 
> 时间：2009-05-14T15:27:34.117
> 
> 标签：linq-to-sql, intersection

如何查看 2 个对象数组之间的常见项目。我的相交没有返回任何东西。该对象是从 Linq to SQL 类创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T15:33:16.893

在 Java atleat 中，除非您覆盖 .equals() 运算符，否则它将测试对象是否相等（主要使用 ==）。这可能就是交叉点为空的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T15:34:04.457

您是否覆盖了 Equals 方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:14:36.853

当然，您必须对它们进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:18:03.647

您将需要覆盖对象的 Equals 方法。您可以在 Microsoft 的网站上找到[一些指南。](http://msdn.microsoft.com/en-us/library/ms173147.aspx)

我在下面提供了一个示例：

```
public override bool Equals(System.Object obj)
{
    if (obj != null && obj is MyClass)
    {
        MyClass obj2 = (MyClass)obj;
        return (obj2.ID == this.ID);
    }
} 
```

如果您不覆盖此方法，任何类型的排序/相交/比较都将根据对象的引用来比较对象；因此，如果两个对象引用内存中的同一点，则它们被认为是“相等的”。

# editor - 适用于 Windows 的 XHTML/CSS 编辑器，具有“保存时上传 FTP”功能

> ID：864048
> 
> 赞同：6
> 
> 时间：2009-05-14T15:30:02.707
> 
> 标签：editor

有没有这个功能的非臃肿编辑器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-01-16T04:09:40.867

Zeus[编辑](http://www.zeusedit.com)器具有无缝的 ftp/sftp 编辑功能。

该文件在保存时不上传，而是直接从服务器加载文件，并*在保存*时将其写回服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T15:36:55.777

尝试带有[FTP_synchronize](http://sourceforge.net/project/showfiles.php?group_id=189927&package_id=245189)扩展的[Notepad++ 。](http://notepad-plus.sourceforge.net/uk/download.php)它体积小、速度快，使用起来很愉快。它既免费又免费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-05T05:06:07.130

我感觉到你的痛苦。我喜欢浏览远程 FTP 树并像在本地一样编辑文件。您按 CONTROL-S，它会上传您的临时文件。看起来很简单，而且很多应用程序都可以让您保持在 FTP 中打开的文件列表。

如果非免费是可以的，Dreamweaver 实际上是一个很棒的工具：只需关闭所有所见即所得的东西，它就是一个漂亮而精致的编辑器。

否则，有点陈旧且免费的 HTML-Kit Build 292 可以很好地完成工作。 [http://www.htmlkit.com/download/](http://www.htmlkit.com/download/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:23:02.230

来自 NuSphere 的 PhpED。

不是真正的 HTML 编辑器。真的不算小。但我**真的很**喜欢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T15:33:03.993

我记得，WeBuilder 有这样一个功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T15:33:59.497

我用于具有此功能的简单 HTML 的是[EditPlus3](http://editplus.com/)。虽然它是共享软件，但它是一款出色的软件，可用于轻松、不臃肿的编辑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T15:48:57.300

[www.blumentals.net/webuilder/][1]

[1]： http: [//www.blumentals.net/webuilder/](http://www.blumentals.net/webuilder/)正是这样做的。

# php - 如何在 PHP 中有一个 64 位整数？

> ID：864058
> 
> 赞同：61
> 
> 时间：2009-05-14T15:32:41.653
> 
> 标签：php, 64-bit, integer

如何在 PHP 中有一个 64 位整数？

似乎它不是配置文件，而是它可能是编译时选项，并且取决于平台。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-05-14T16:35:03.703

本机 64 位整数需要 64 位硬件和 64 位版本的 PHP。

在 32 位硬件上：

```
$ php -r 'echo PHP_INT_MAX;'
2147483647 
```

在 64 位硬件上：

```
$ php -r 'echo PHP_INT_MAX;'
9223372036854775807 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2010-07-13T02:55:18.897

**更新：**现在可以（在 AMD 四核、Windows 8.1 上测试）。

请注意，Windows 上的 PHP 根本不支持 64 位整数，即使硬件和 PHP 都是 64 位的。有关详细信息，请参阅[此链接](http://permalink.gmane.org/gmane.comp.php.devel/55886)：

> 在 Windows x86_64 上，PHP_INT_MAX 是 2147483647。这是因为在底层 C 代码中，long 是 32 位的。
> 
> 但是，x86_64 上的 Linux 使用 64 位长度，因此 PHP_INT_MAX 将是 9223372036854775807。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-14T15:41:29.993

也许您可以使用[GMP](http://www.php.net/manual/en/book.gmp.php)或[BCMath](http://www.php.net/manual/en/book.bc.php)扩展。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-14T15:35:53.267

PHP int 大小取决于平台。有一个名为 unpack() 的函数，它本质上允许将不同类型的数据从二进制字符串转换为 PHP 变量。存储为 64 位的唯一方法似乎是将其存储为字符串。

我在以下位置找到了以下代码： [http ://www.mysqlperformanceblog.com/2007/03/27/integers-in-php-running-with-scissors-and-portability/](http://www.mysqlperformanceblog.com/2007/03/27/integers-in-php-running-with-scissors-and-portability/)

```
/// portably build 64bit id from 32bit hi and lo parts
function _Make64 ( $hi, $lo )
{

        // on x64, we can just use int
        if ( ((int)4294967296)!=0 )
            return (((int)$hi)<<32) + ((int)$lo);

        // workaround signed/unsigned braindamage on x32
        $hi = sprintf ( "%u", $hi );
        $lo = sprintf ( "%u", $lo );

        // use GMP or bcmath if possible
        if ( function_exists("gmp_mul") )
            return gmp_strval ( gmp_add ( gmp_mul ( $hi, "4294967296" ), $lo ) );

        if ( function_exists("bcmul") )
            return bcadd ( bcmul ( $hi, "4294967296" ), $lo );

        // compute everything manually
        $a = substr ( $hi, 0, -5 );
        $b = substr ( $hi, -5 );
        $ac = $a*42949; // hope that float precision is enough
        $bd = $b*67296;
        $adbc = $a*67296+$b*42949;
        $r4 = substr ( $bd, -5 ) +  + substr ( $lo, -5 );
        $r3 = substr ( $bd, 0, -5 ) + substr ( $adbc, -5 ) + substr ( $lo, 0, -5 );
        $r2 = substr ( $adbc, 0, -5 ) + substr ( $ac, -5 );
        $r1 = substr ( $ac, 0, -5 );
        while ( $r4>100000 ) { $r4-=100000; $r3++; }
        while ( $r3>100000 ) { $r3-=100000; $r2++; }
        while ( $r2>100000 ) { $r2-=100000; $r1++; }

        $r = sprintf ( "%d%05d%05d%05d", $r1, $r2, $r3, $r4 );
        $l = strlen($r);
        $i = 0;
        while ( $r[$i]=="0" && $i<$l-1 )
            $i++;
        return substr ( $r, $i );         
    }

    list(,$a) = unpack ( "N", "\xff\xff\xff\xff" );
    list(,$b) = unpack ( "N", "\xff\xff\xff\xff" );
    $q = _Make64($a,$b);
    var_dump($q); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-16T12:16:08.997

现在您应该获得 PHP 7 - 完全一致的 64 位支持。不仅是整数，还有所有的 fstat、I/O 等。Windows 上的 PHP 7 是真正的 64 位。

# java - 在没有程序挂起的情况下用 Java 输入？

> ID：864061
> 
> 赞同：2
> 
> 时间：2009-05-14T15:33:07.223
> 
> 标签：java, input, continuous

我只是想知道如何让我的 java 程序继续运行，但始终准备好接受输入。

现在我正在使用缓冲区读取器并在一行中读取，但这会使我的程序停止并等待输入。我希望程序继续运行，但随时准备好接受输入，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T15:35:03.987

我希望您将不得不研究多线程您的应用程序，以使其按您的意愿工作。

**编辑**：当然，虽然此功能可以通过纯粹的 CLI 界面来实现，但如果您打算让完整的响应/事件驱动系统以多线程方式运行，您可能最好探索其他选项（即 GUI 选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T16:04:56.367

这是一个多线程命令行界面应用程序如何工作的快速示例。这将不需要轮询输入，也不需要 GUI 界面来在后台执行任务，同时在控制台中等待用户输入。

在此示例中，a`Thread`在后台运行，可以告诉它在指定的秒数后输出问候语。

```
public class CommandLineMultiThread
{
    public static void main(String[] args)
    {
        Scanner s = new Scanner(System.in);

        // Makes and runs the background thread.
        MyThread myThread = new MyThread();
        Thread t = new Thread(myThread);
        t.start();

        // Get the number of seconds to wait from the console.
        // Exit when "0" is entered.
        int waitDuration;
        do
        {
            waitDuration = s.nextInt();
            myThread.setGreetIn(waitDuration);

        } while (waitDuration != 0);

        myThread.quit();
    }

    static class MyThread implements Runnable
    {
        boolean running = true;                // Boolean to keep thread alive.
        long greetingTime = Long.MAX_VALUE;    // Time to greet at.

        public void setGreetIn(int i)
        {
            greetingTime = System.currentTimeMillis() + (i * 1000);
        }

        public void quit()
        {
            running = false;
        }

        public void run()
        {
            while (running)
            {
                if (System.currentTimeMillis() > greetingTime)
                {
                    System.out.println("Hello!");
                    greetingTime = Long.MAX_VALUE;
                }

                try
                {
                    Thread.sleep(100);
                }
                catch (InterruptedException e) {}
            }
        }
    }
} 
```

该类[`Scanner`](http://java.sun.com/javase/6/docs/api/java/util/Scanner.html)可用于通过路由来自[`System.in`](http://java.sun.com/javase/6/docs/api/java/lang/System.html#in)对象的输入来接受来自命令行界面的用户输入。

然后，当后台线程`myThread`运行时，主线程正在等待来自`System.in`该[`Scanner.nextInt`](http://java.sun.com/javase/6/docs/api/java/util/Scanner.html#nextInt())方法的输入。一旦接受了等待的秒数，后台线程就会被告知等待某个时间，一旦该时间到达，问候语`Hello!`就会输出到控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T15:35:18.073

我认为您的程序将不得不偶尔轮询用户输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T15:38:47.067

给它一个漂亮的多线程 GUI 而不是 CLI :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T15:46:50.887

我同意詹姆斯的观点，另一种选择是“伪造”连续程序运行。这不适用于所有场景，但您可以在显示用户输入之前设置一个计时器，然后在用户输入内容时再次计算停止和“开始”之间的时间。

使用该时间执行重复的功能一定次数。这仅在您已经在计时器本身上有一些东西时才有用，例如每隔几秒就会不断消耗整数。

一个例子：

你问用户一个问题，但只想给他们 5 秒的时间来回答。当用户回答（点击进入）时，程序将计算他们进入所花费的时间，如果太长，则抛出一条消息，如果在时间限制内抛出另一条。

我只是建议这种方法，因为线程，这是你真正想要进入的，非常先进。

# iphone - 以编程方式设置文本时停止 UITextView 跳转

> ID：864069
> 
> 赞同：19
> 
> 时间：2009-05-14T15:34:32.460
> 
> 标签：iphone, cocoa-touch, uitextview

我必须在滚动的 UITextView 中更新少量文本。我只会在光标当前所在的位置插入一个字符，并且我将通过按下导航栏上的按钮来执行此操作。

我的问题是，每当我调用文本视图的 setText 方法时，它都会跳到文本的底部。我试过使用 contentOffset 并重置 selectedRange 但它不起作用！这是我的例子：

```
// Remember offset and selection
CGPoint contentOffset = [entryTextView contentOffset];
NSRange selectedRange = [entryTextView selectedRange];
// Update text
entryTextView.text = entryTextView.text;
// Try and reset offset and selection
[entryTextView setContentOffset:contentOffset animated:NO];
[entryTextView setSelectedRange: selectedRange]; 
```

有什么方法可以更新文本而不需要任何滚动移动……就好像他们只是在键盘上输入了一些东西一样？

编辑：

我试过使用 textViewDidChange: 委托方法，但它仍然没有向上滚动到原始位置。

```
- (void)textViewDidChange:(UITextView *)textView {
    if (self.programChanged) {
        [textView setSelectedRange:self.selectedRange];
        [textView setContentOffset:self.contentOffset animated:NO];
        self.programChanged = NO;
    }
}

- (void)changeButtonPressed:(id)sender {
    // Remember position
    self.programChanged = YES;
    self.contentOffset = [entryTextView contentOffset];
    self.selectedRange = [entryTextView selectedRange];
    // Update text
    entryTextView.text = entryTextView.text;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-05-03T11:22:41.693

如果您使用 iPhone 3.0 或更高版本，则可以解决此问题：

```
textView.scrollEnabled = NO;

//You should know where the cursor will be(if you update your text by appending/inserting/deleting you can know the selected range) so keep it in a NSRange variable.

Then update text:
textView.text = yourText;

textView.scrollEnabled = YES;
textView.selectedRange = range;//you keep before 
```

它现在应该可以工作（不再跳跃）

问候 Meir Assayag

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-08-15T06:21:28.543

基于 Meir 的建议，这里的代码以编程方式删除选择（是的，我知道有一个选择菜单按钮也可以这样做，但我正在做一些时髦的事情）而不滚动文本视图。

```
NSRange selectedRange = textView.selectedRange;
textView.scrollEnabled = NO;
// I'm deleting text. Replace this line with whatever insertions/changes you want
textView.text = [textView.text
                stringByReplacingCharactersInRange:selectedRange withString:@""];
selectedRange.length = 0;
// If you're inserting text, you might want to increment selectedRange.location to be
// after the text you inserted
textView.selectedRange = selectedRange;
textView.scrollEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-29T15:27:59.070

此决定适用于 iOS 8：

```
let offset = textView.contentOffset
textView.text = newText
textView.layoutIfNeeded()
textView.setContentOffset(offset, animated: false) 
```

必须准确调用，`setContentOffset:animated:`因为只有这样才能取消动画。`textView.contentOffset = offset`不会取消动画，也无济于事。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-07T04:17:23.007

以下两种解决方案不适用于 iOS 8.0。

```
textView.scrollEnabled = NO;
[textView.setText: text];
textView.scrollEnabled = YES; 
```

和

```
CGPoint offset = textView.contentOffset;
[textView.setText: text];
[textView setContentOffset:offset]; 
```

我为 textview 设置了一个委托来监视滚动事件，并注意到在我恢复偏移量的操作后，偏移量再次重置为 0。所以我改为使用主操作队列来确保我的还原操作发生在“重置为 0”选项之后。

这是适用于 iOS 8.0 的解决方案。

```
CGPoint offset = self.textView.contentOffset;
self.textView.attributedText = replace;
[[NSOperationQueue mainQueue] addOperationWithBlock: ^{
    [self.textView setContentOffset: offset];
}]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-07-20T06:05:25.877

没有任何建议的解决方案对我有用。-setContentOffset:animated: 由 -setText: 触发 3 次，动画 YES 和结尾的 contentOffset（减去 UITextView 的默认 8pt 边距）。我将 -setText: 包裹在警卫中：

```
textView.contentOffsetAnimatedCallsDisabled = YES;
textView.text = text;
textView.contentOffsetAnimatedCallsDisabled = NO; 
```

在 -setContentOffset:animated: 中的 UITextView 子类中

```
if (contentOffsetAnimatedCallsDisabled) return; // early return 
```

在你的其他逻辑中。不要忘记超级电话。这行得通。

拉斐尔

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-08T11:11:21.250

为了编辑 UITextView 的文本，您需要更新它的 textStorage 字段：

```
[_textView.textStorage beginEditing];

NSRange replace = NSMakeRange(10, 2); //enter your editing range
[_textView.textStorage replaceCharactersInRange:replace withString:@"ha ha$ "];

//if you want to edit the attributes
NSRange attributeRange = NSMakeRange(10, 5); //enter your editing attribute range
[_textView.textStorage addAttribute:NSBackgroundColorAttributeName value:[UIColor greenColor] range:attributeRange];

[_textView.textStorage endEditing]; 
```

祝你好运

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-25T16:05:51.497

在 iOS 7 中。 sizeThatFits 存在错误并且在 UITextView 中有换行符，我发现可行的解决方案是通过禁用滚动来包装它。像这样：

```
textView.scrollEnabled = NO;
CGSize newSize = [textView sizeThatFits:CGSizeMake(fixedWidth, MAXFLOAT)];
textView.scrollEnabled = YES; 
```

并且奇怪的跳跃已得到修复。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-19T08:51:14.413

我在IOS9中遇到了一个类似的问题，如果不一样的话。将某些文本的特征更改为 BOLD 会导致视图将所选内容滚动到视线之外。我通过在 setSelectedRange 之后添加对 scrollRangeToVisible 的调用来对此进行排序：

```
 [self setSelectedRange:range];
    [self scrollRangeToVisible:range]; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-14T16:42:21.907

看看 UITextViewDelegate，我相信 textViewDidChangeSelection 方法可以让你做你需要的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-06T06:04:08.503

老问题，但我对 iOS 7 应用程序有同样的问题。需要在运行循环之后稍微更改 contentOffset。这是一个快速的想法。

```
self.clueString = [self.level clueText];
CGPoint point = self.clueText.contentOffset;
self.clueText.attributedText = self.clueString;
double delayInSeconds = 0.001; // after the run loop update
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [self.clueText setContentOffset:point animated:NO]; 
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-02T07:56:34.313

最后试试这个，在 iOS 10 上检查

```
let offset = textView.contentOffset
textView.attributedText = newValue
OperationQueue.main.addOperation {
    self.textView.setContentOffset(offset, animated: false)
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-02-03T11:28:37.040

不是那么优雅的解决方案 - 但它很有效，所以谁在乎：

```
- (IBAction)changeTextProgrammaticaly{
     myTextView.text = @"Some text";
     [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(rewindOffset) userInfo:nil repeats:NO];
}

- (void)rewindOffset{
    [myTextView setContentOffset:CGPointMake(0,0) animated: NO];
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-09-21T21:26:56.670

我找到了一个在 iOS 6 和 7（可能还有更早的版本）中可靠运行的解决方案。在 UITextView 的子类中，执行以下操作：

```
@interface MyTextView ()
@property (nonatomic) BOOL needToResetScrollPosition;
@end

@implementation MyTextView

- (void)setText:(NSString *)text
{
    [super setText:text];
    self.needToResetScrollPosition = YES;
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    if (self.needToResetScrollPosition) {
        self.contentOffset = CGPointMake(0, 0);
        self.needToResetScrollPosition = NO;
    }
} 
```

其他答案在 iOS 7 中都不起作用，因为它会在显示时调整滚动偏移量。

# php - 如何从 MultiCheckbox 禁用/只读某些复选框？

> ID：864070
> 
> 赞同：3
> 
> 时间：2009-05-14T15:34:34.910
> 
> 标签：php, zend-framework, forms, frameworks

我有一个 Zend_Form_Element_Multicheckbox，我想将它的一些元素置于只读状态，我该怎么做？

```
 $colId = new Zend_Form_Element_MultiCheckbox('colId');
    $colId->setLabel('Col ID')
        ->setMultiOptions(array_flip(array('sadda', 'asss')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T16:47:14.173

我认为以下应该有效：

```
$colId
    ->setMultiOptions(array_flip(array('sadda', 'asss'))) // three closing-brackets 
    ->setAttrib('disable', array('sadda', 'asss')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-29T14:18:11.580

有用; 请务必在您的 setAttrib 中使用“禁用”而不是“禁用”。

# crystal-reports - 更改水晶设置：代码中的“覆盖的限定表名”

> ID：864075
> 
> 赞同：0
> 
> 时间：2009-05-14T15:34:56.593
> 
> 标签：crystal-reports

除了这个，我在报告中设置几乎任何连接值都没有问题。我正在使用 XI R2，并且我尝试过 CRAXDDRT 以及 .Net SDK。

有没有人幸运地做到这一点？

顺便说一句，我想这样做的原因是因为我希望报告以系统 DSN 中指定的数据库为目标，而不是报告中的“目录”值。我可以手动设置此值，但有太多报告无法手动设置。

提前致谢

编辑：对不起，我以某种方式切断了我提到该字段名称的部分，这给我带来了麻烦:)

它是“覆盖的合格表名”字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-07-09T16:54:40.123

回顾我和一位同事在这个问题上所做的研究，我们得出的结论是 rpt 不能在代码中更改。我考虑过使用 AutoIt，但我们决定在运行时简单地设置连接，这需要构建一个水晶导出工具。

# c - 为什么 8 位字段具有字节顺序？

> ID：864077
> 
> 赞同：15
> 
> 时间：2009-05-14T15:35:05.563
> 
> 标签：c, networking, interop, system, endianness

参见 /netinet/tcp.h 中 TCP 头的定义：

```
struct tcphdr
  {
    u_int16_t th_sport;         /* source port */
    u_int16_t th_dport;         /* destination port */
    tcp_seq th_seq;             /* sequence number */
    tcp_seq th_ack;             /* acknowledgement number */
#  if __BYTE_ORDER == __LITTLE_ENDIAN
    u_int8_t th_x2:4;           /* (unused) */
    u_int8_t th_off:4;          /* data offset */
#  endif
#  if __BYTE_ORDER == __BIG_ENDIAN
    u_int8_t th_off:4;          /* data offset */
    u_int8_t th_x2:4;           /* (unused) */
#  endif
    u_int8_t th_flags;
#  define TH_FIN        0x01
#  define TH_SYN        0x02
#  define TH_RST        0x04
#  define TH_PUSH       0x08
#  define TH_ACK        0x10
#  define TH_URG        0x20
    u_int16_t th_win;           /* window */
    u_int16_t th_sum;           /* checksum */
    u_int16_t th_urp;           /* urgent pointer */
}; 
```

为什么 8 位字段在字节序中具有不同的顺序？我认为只有 16 位和 32 位字段与字节顺序有关，您可以分别使用 ntohs 和 ntohl 在字节序之间进行转换。处理 8 位事物的功能是什么？如果没有，那么在小端机器上使用此标头的 TCP 似乎不适用于大端机器上的 TCP。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-14T15:42:26.920

有两种顺序。一种是字节顺序，一种是位域顺序。C语言中的位域顺序没有标准的顺序。这取决于编译器。通常，位域的顺序在大端和小端之间颠倒。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-14T15:43:41.690

这是依赖于编译器且不可移植的。位字段的排序方式取决于实现，这里最好使用 8 位字段和移位/掩码来获得子字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T15:43:24.997

在这台机器中，字节序可能也指位顺序和字节顺序。[这篇维基百科文章](http://en.wikipedia.org/wiki/Endianness)提到有时会出现这种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T00:04:47.977

我的理解是位顺序和字节顺序通常是两个不同的东西。具有位域的结构通常不能跨编译器/架构移植。有时 ifdef 可用于支持不同的位排序。在这种情况下，字节顺序实际上是无关紧要的，它应该是关于位排序的 ifdef。在某些情况下，某些字节顺序具有特定位顺序的假设可能是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T15:41:05.987

我对评论的解读是，这两个单字节字段一起被解释为一个双字节值（或者曾经——似乎无论如何都没有使用一个字节）。它们不是声明一个两字节值，而是声明两个一字节值，但根据字节序颠倒声明顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-27T23:51:22.567

知道这是代码仅在“# ifdef __FAVOR_BSD”时运行可能会有所帮助。它来自 /usr/include/netinet/tcp.h

```
# ifdef __FAVOR_BSD
typedef u_int32_t tcp_seq;
/*
 * TCP header.
 * Per RFC 793, September, 1981.
 */
struct tcphdr 
```

# css - 为什么我的两列在 IE7 中没有正确对齐？

> ID：864081
> 
> 赞同：5
> 
> 时间：2009-05-14T15:35:34.393
> 
> 标签：css, layout, internet-explorer-7

我正在通过书籍和网站自学 CSS。我制作了一个简单的网站，其中有一个居中的框，后跟两列，它在 Firefox 3 和 Safari 3 中显示良好，但在 IE7 中显示不佳。我的右栏保持在右侧，但被向下推，使其从左栏结束的地方开始。我看过很多关于 IE hacks 的博客，但我不知道该应用哪个，或者应该在我的代码中的什么位置添加它。任何提示将非常感谢！

这是我的CSS：

```
#wrapper {
position:relative;
width:900px;
margin-right:auto;
margin-left:auto;
}

#centerbox {
background-color:#FFFFFF;
width:870px;
margin-left:auto;
margin-right:auto;
padding:10px 15px 10px 15px;
margin-bottom:30px;
text-align:left;
border:8px solid #E0BB24;
}

#leftcolumn {
float:left;
margin-left:10px;
width:410px;
padding:0px 10px 10px 10px;
color:#FFFFFF;
}

#rightcolumn {
width:395px;
margin-left:480px;
margin-right:10px;
padding:0px 15px 10px 10px;
background-color:#FFFFFF;
border:1px solid #26A9E0;
} 
```

这是我的 HTML：

```
<div id="centerbox" class="clear">
<h1>The physician's creed: &quot;First, do no harm&quot;</h1>
<h3>Politicians, policymakers, and public officials should take the same oauth</h3>
<p>Text</p>
</div>

<div id="leftcolumn">
<h2><img src="images/accept.png" alt="Putting Patients First" align="left"> </img>Putting Patients First</h2>
<p class="spaceafter"><a href="betterway.html">Read more about our idea of a better way to reform health care by putting patients first &raquo;</a></p>

<h2><img src="images/reject.png" alt="Principles for reform" align="left"></img>Principles for reform</h2>
<p class="spaceafter">Tell politicians in Washington you will follow these <a href="donoharm.html">principles</a> in judging any health reform proposal:</p>
<ul>
    <li>No new government-run health insurance plan</li>
    <li>No one-size government-dictated package of health benefits</li>
    <li>No new jobs-killing mandates on employers</li>
    <li>No requirement on individuals to buy this expensive coverage</li>
    <li>No federal institution that controls private health insurance</li>
    <li>No government intrusion into our medical privacy</li>
    <li>No federal government control over the practice of medicine through a federal health board, comparative effectiveness review, and other government intrusions into doctor-patient medical decision-making</li>
</ul>
<p><a href="donoharm.html">Read more &raquo;</a></p>
</div>

<div id="rightcolumn">
<h2><img src="images/signpetition.png" alt="Sign the petition" align="left">    </img>Sign the petition</h2>
<p>Dear Policymaker: I stand with millions of Americans who implore you to follow the Do No Harm principles &mdash; and do NOT destroy America's health care system!</p>
<iframe height="920px" width="400px" name="zoho-Do_No_Harm_Petition" frameborder="0" scrolling="auto" src="http://creator.zoho.com/galeninstitute/do-no-harm-petition/form-embed/Do_No_Harm_Petition/reAUnSRw7O3sfWaOssaxgN91NbXFRYWUEQ8AZ5v803j2bVG4OHpFAXkvuUuqDVX9zxfg5YMSfMD9TTeqds1OE1kbYQqSSmYbFh6Z/"></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T15:38:49.830

我认为你错过了#rightcolumn 上的浮动

```
#rightcolumn {
     float: right;
} 
```

您还可以从#rightcolumn 中删除这些值。

```
margin-left:480px;
margin-right:10px; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T15:43:16.340

这是我为三列 div 所做的（左、中、右都是 div）

这三个都是 310 像素，中间有 10 像素（总共 950 像素），您可以调整它以适合您的尺寸。

诀窍在于中间 div，它基本上占用了整个“行”的空间，但有足够的填充来清除“浮动”在中间 div 顶部的左右 div 的内容。

```
#left
{
    float: left;
    width: 310px;
}

#middle
{
    padding: 0px 320px 5px 320px;
}

#right
{
    float: right;
    width: 310px;
} 
```

# javascript - Internet Explorer 的“自动完成”功能不会触发 JavaScript 事件

> ID：864093
> 
> 赞同：2
> 
> 时间：2009-05-14T15:38:19.020
> 
> 标签：javascript, events, onchange

我有一个 .ASP 页面，它使用该`onChange`事件来触发数据库查找信息。（输入代码后，系统验证代码并在其旁边放置描述。IE GP1234 返回 GP1234-Rubber Duck 或 GP1234-无效代码）。我遇到的问题是我的`AutoComplete`活跃用户获得了以前使用过的代码列表。如果他们使用列表中的代码之一，则输入数据，但不会触发事件来引导页面验证数据。我试过`OnChasnge`,`OnBlur`和`onMouseOut`.
有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-17T20:39:26.143

从在 MSDN 上[的 HTML 表单中使用自动完成：](http://msdn.microsoft.com/en-us/library/ms533032(VS.85).aspx)

> 要确定用户何时从“自动完成”对话框更新字段的内容，请使用 [onpropertychange](http://msdn.microsoft.com/en-us/library/ms536956(VS.85).aspx)事件，而不是[onchange](http://msdn.microsoft.com/en-us/library/ms536912(VS.85).aspx)事件，因为 不会触发**onchange事件。**

请注意，该`onpropertychange`事件是 Internet Explorer 专有的，因此您仍需要处理其他浏览器，并且它在每次击键后触发，因此它与该`onchange`事件不直接兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-17T13:03:24.830

设置`autocomplete="off"`输入将阻止它显示以前输入的值。

如果您不想这样做，您可能要查找的事件是`onkeyup`（用于选项上的箭头/输入）和`onmouseup`（用于单击选项）事件。

# ruby - Ruby - 将字符映射到二维数组中的整数

> ID：864094
> 
> 赞同：4
> 
> 时间：2009-05-14T15:38:20.440
> 
> 标签：ruby, arrays, map

我有一个我一辈子都解决不了的问题。我正在编写一个销售音乐厅门票的 Ruby 应用程序（我已经做了 8 年的 PHP 开发人员，只是从 Ruby 开始）。每个座位都有一排 (a...z) 和一个数字 (1...x)。数据库模型对每个座位都有 row (string) 和 num (int)。

如何将数据库中的座位数组转换为二维数组？例如，座位 A1 将进入座位[1][1] = "value"; 座位 C4 将映射到座位[3][4] = 值。问题是将行字符串转换为 Ascii 并减去偏移量？或者有没有更简单的方法？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T16:09:36.183

最简单的方法可能是使用散列代替。例如：`seat['A'][1] = value`

但是如果你真的因为某种原因需要一个数组，那么你描述的方法是最简单的。假设行字符串是单个字符“A”到“Z”，您可以使用`row_string[0] - ?A`（或者`row_string[0] - ?A + 1`如果您希望索引从 1 开始，如您的示例中所示）。对于 AA 行在 Z 行之后的多字符版本，您可以在 1.8.7 和更高版本中执行此操作：

```
row_num = row_string.bytes.inject(0) {|total, x| total = total * 26 + x - ?A + 1} 
```

为了安全起见，您可能希望事先将行字符串大写。

在 1.8.6 及以下，`String`没有`bytes`方法。您可以通过执行以下操作来完成相同的操作：

```
row_num = 0
row_string.each_byte {|x| row_num = row_num * 26 + x - ?A + 1} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T17:03:35.443

好的，我想出的解决方案似乎可以解决问题：

```
seat_array = Hash.new{|h,k| h[k]=Hash.new(&h.default_proc) }
for seat in self.seats
seat_array[seat.row.downcase][seat.num] = seat
end 
return seat_array 
```

非常感谢大家提供如此快速和有用的回复。我肯定会用 PHP 帮助别人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:13:01.277

好吧，要获得一封信的索引，你可以做这样的事情

```
('A'..'Z').to_a.index('C') 
```

这将返回 2

我注意到在您给您的数组示例中，A = 1 而不是 0。

# c# - 使用动态 LINQ 展平一对多关系

> ID：864106
> 
> 赞同：2
> 
> 时间：2009-05-14T15:40:41.837
> 
> 标签：c#, asp.net, linq, linq-to-sql, gridview

是否可以使用动态 LINQ 扁平化一对多关系？

例如，我可能有一个用户列表，而用户类包含许多用户偏好的列表。UserPreference 类本质上是一个名称/值对。

用户将定义对一组用户可用的用户偏好类型。

```
public class User
{
    public string FirstName
    {
        get;
        set;
    }

    public string LastName
    {
        get;
        set;
    }

    public IList<UserPreference> UserPreferences
    {
        get;
        set;
    }
}

public class UserPreference
{
    public UserPreference(string name, object userValue)
    {
        this.Name = name;
        this.UserValue = userValue;
    }

    public string Name
    {
        get;
        set;
    }

    public object UserValue
    {
        get;
        set;
    }
} 
```

因此，可以通过以下方式定义一个用户组：

```
List<User> users = new List<User>();

User user1 = new User();
user1.FirstName = "John";
user1.LastName = "Doe";

user1.UserPreferences.Add(new UserPreference("Favorite color", "Red"));

User user2 = new User();
user2.FirstName = "Jane";
user2.LastName = "Doe";

user2.UserPreferences.Add(new UserPreference("Favorite mammal", "Dolphin"));
user2.UserPreferences.Add(new UserPreference("Favorite color", "Blue"));

users.Add(user1);
users.Add(user2);

return users; 
```

所需的输出将是：

```
First Name      Last Name       Favorite Color      Favorite Mammal
John        Doe         Red         NULL
Jane        Doe         Blue            Dolphin 
```

有没有办法创建一个匿名类型，以便将 UserPreferences 汇总到用户中？

例如，

```
var u = UserScopedSettingAttribute.Select("new (FirstName as FirstName, UserValue as FavoriteColor)", null);

string name = u.FirstName;
string color = u.FavoriteColor; 
```

最终，此用户列表将绑定到 ASP.NET GridView Web 控件。此操作将涉及大量数据，性能将至关重要。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T19:35:23.083

我知道它并不能完全回答您的问题，但是像 dlinq 那样在运行时将字符串编译到新类中总是有一种难闻的气味。考虑只使用这样的 DataTable，

```
DataTable prefs = new DataTable();
IEnumerable<DataColumn> cols = (from u in users
                                from p in u.UserPreferences
                                select p.Name)
                               .Distinct()
                               .Select(n => new DataColumn(n));

prefs.Columns.Add("FirstName");
prefs.Columns.Add("LastName");
prefs.Columns.AddRange(cols.ToArray());

foreach (User user in users)
{
    DataRow row = prefs.NewRow();
    row["FirstName"] = user.FirstName;
    row["LastName"] = user.LastName;
    foreach (UserPreference pref in user.UserPreferences)
    {
        row[pref.Name] = pref.UserValue;
    }
    prefs.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-30T06:11:33.280

这应该这样做。展平通常使用 SelectMany 扩展方法完成，但在这种情况下，我使用的是 let 表达式。删除 null 首选项的代码有点难看，可以改进，但它可以工作：

```
 var flattenedUsers = from user in GetUsers()
                let favColor = user.UserPreferences.FirstOrDefault(pref => pref.Name == "Favorite color")
                let favMammal = user.UserPreferences.FirstOrDefault(pref => pref.Name == "Favorite mammal")
                select new
                           {
                               user.FirstName,
                               user.LastName,
                               FavoriteColor = favColor == null ? "" : favColor.UserValue,
                               FavoriteMammal = favMammal == null ? "" : favMammal.UserValue,
            }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T18:23:19.590

我最好的建议是不要使用动态 LINQ，而是添加一个 flatuser 类，然后遍历用户。代码很简单，如果您能够获得具有相似结果的 linq 查询，它将生成相同的代码，尽管您无法真正说出它的优化程度，因为它可能涉及一些会导致性能的连接惩罚，而不仅仅是循环。如果您使用 LINQ to SQL 从数据库中提取它，那么您可以使用实体关系来使用 linq 而不是这个循环来获取数据。

环形：

```
List<FlatUser> flatusers = new List<FlatUser>();
foreach (User u in users)
{
    foreach (UserPreference up in u.UserPreferences)
    {
        flatusers.Add(new FlatUser
        {
            FirstName = u.FirstName,
            LastName = u.LastName,
            Name = up.Name,
            UserValue = up.UserValue
        });
    }
} 
```

平面用户类：

```
public class FlatUser
{
    public string FirstName
    {
        get;
        set;
    }

    public string LastName
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }

    public object UserValue
    {
        get;
        set;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-30T06:48:31.800

我认为这里的务实答案是说你试图强迫 C# 成为一种动态语言，任何解决方案都会真正将 C# 推向极限。听起来您试图将仅在查询时确定的列的数据库查询转换为基于这些列并在运行时确定的集合。

Linq 和 Gridview 绑定非常漂亮和简洁，但您必须开始考虑权衡让这个编译器弯曲解决方案工作的好处，这样您就不必自己动态生成 gridview 行和列。

另外，如果您担心性能，我会考虑生成原始 HTML。依靠基于集合的 WebForms 控件来有效地显示大量数据可能会很冒险。

您添加了几个 OnItemDataBound 事件，装箱和拆箱将真正搞砸工作。我假设您也想在行中添加交互式按钮和文本框，并且执行 1000 个 FindControls 从未如此快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T19:32:57.683

很遗憾

```
var u = UserScopedSettingAttribute.Select("new {FirstName as FirstName, UserValue as FavoriteColor}", null);
string name = u.FirstName;
string color = u.FavoriteColor; 
```

不会工作。当您使用 LINQ Select(string) 时，您拥有的最强编译时间类信息是 Object，因此 u.FirstName 将引发编译错误。提取运行时生成的匿名类的属性的唯一方法是使用反射。虽然，如果你可以等待，这将是可能的 C# 4.0 像这样，

```
dynamic u = UserScopedSettingAttribute.Select("new {FirstName as FirstName, UserValue as FavoriteColor}", null);
string name = u.FirstName;
string color = u.FavoriteColor; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-30T01:23:11.383

可能有更有效的方法可以做到这一点，但要真正回答您的问题，我想出了以下代码。（请注意，我以前从未使用过 DynamicLinq，因此可能有更好的方法来使用它来实现您的目标。）

我创建了一个控制台应用程序，粘贴到您帖子中的类中，然后使用以下代码。

```
static void Main(string[] args)
{
    var users = GetUserGroup();
    var rows = users.SelectMany(x => x.UserPreferences.Select(y => new { x.FirstName, x.LastName, y.Name, y.UserValue }));
    var userProperties = rows.Select(x => x.Name).Distinct();
    foreach (var property in userProperties)
    {
        Console.WriteLine(property);
    }
    Console.WriteLine();

    // The hard-coded variety.
    var results = users.Select(x => new
    {
        x.FirstName,
        x.LastName,
        FavoriteColor = x.UserPreferences.Where(y => y.Name == "Favorite color").Select(y => y.UserValue).FirstOrDefault(),
        FavoriteAnimal = x.UserPreferences.Where(y => y.Name == "Favorite mammal").Select(y => y.UserValue).FirstOrDefault(),
    });

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // The dynamic variety.
    DynamicProperty[] dynamicProperties = new DynamicProperty[2 + userProperties.Count()];
    dynamicProperties[0] = new DynamicProperty("FirstName", typeof(string));
    dynamicProperties[1] = new DynamicProperty("LastName", typeof(string));
    int propIndex = 2;
    foreach (var property in userProperties)
    {
        dynamicProperties[propIndex++] = new DynamicProperty(property, typeof(string));
    }
    Type resultType = ClassFactory.Instance.GetDynamicClass(dynamicProperties);
    ConstructorInfo constructor = resultType.GetConstructor(new Type[] {});
    object[] constructorParams = new object[] { };
    PropertyInfo[] propInfoList = resultType.GetProperties();
    PropertyInfo[] constantProps = propInfoList.Where(x => x.Name == "FirstName" || x.Name == "LastName").OrderBy(x => x.Name).ToArray();
    IEnumerable<PropertyInfo> dynamicProps = propInfoList.Where(x => !constantProps.Contains(x));
    // The actual dynamic results creation.
    var dynamicResults = users.Select(user =>
    {
        object resultObject = constructor.Invoke(constructorParams);
        constantProps[0].SetValue(resultObject, user.FirstName, null);
        constantProps[1].SetValue(resultObject, user.LastName, null);
        foreach (PropertyInfo propInfo in dynamicProps)
        {
            var val = user.UserPreferences.FirstOrDefault(x => x.Name == propInfo.Name);
            if (val != null)
            {
                propInfo.SetValue(resultObject, val.UserValue, null);
            }
        }
        return resultObject;
    });
    //////////////////////////////////////////////////////////////////////////////////////////////////////////

    // Display the results.
    var displayResults = dynamicResults;
    //var displayResults = results;

    if (displayResults.FirstOrDefault() != null)
    {
        PropertyInfo[] properties = displayResults.First().GetType().GetProperties();
        int columnWidth = Console.WindowWidth / properties.Length;

        int index = 0;
        foreach (PropertyInfo property in properties)
        {
            Console.SetCursorPosition(index++ * columnWidth, Console.CursorTop);
            Console.Write(property.Name);
        }
        Console.WriteLine();

        foreach (var result in displayResults)
        {
            index = 0;
            foreach (PropertyInfo property in properties)
            {
                Console.SetCursorPosition(index++ * columnWidth, Console.CursorTop);
                Console.Write(property.GetValue(result, null) ?? "(null)");
            }
            Console.WriteLine();
        }
    }

    Console.WriteLine("\r\nPress any key to continue...");
    Console.ReadKey();
}

static List<User> GetUserGroup()
{
    List<User> users = new List<User>();

    User user1 = new User();
    user1.FirstName = "John";
    user1.LastName = "Doe";
    user1.UserPreferences = new List<UserPreference>();

    user1.UserPreferences.Add(new UserPreference("Favorite color", "Red"));
    user1.UserPreferences.Add(new UserPreference("Birthday", "Friday"));

    User user2 = new User();
    user2.FirstName = "Jane";
    user2.LastName = "Doe";
    user2.UserPreferences = new List<UserPreference>();

    user2.UserPreferences.Add(new UserPreference("Favorite mammal", "Dolphin"));
    user2.UserPreferences.Add(new UserPreference("Favorite color", "Blue"));

    users.Add(user1);
    users.Add(user2);

    return users;
} 
```

# sql - 是否有一种简单的方法可以将自定义迁移脚本添加到 SQL 比较脚本？

> ID：864107
> 
> 赞同：3
> 
> 时间：2009-05-14T15:40:46.377
> 
> 标签：sql, migration, redgate

在我的工作中，我们目前在推动跨环境的数据库更改时遇到了一些严重的问题。当我们在现有表上创建新的不可为空的列时，问题开始出现。SQL 比较生成的脚本将该列创建为不可为空，因此它总是会失败。我希望有一些替代手动编辑脚本的方法。有没有办法解决这个问题？如果不是，你们是怎么处理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T16:27:34.987

你打算如何填充 NOT NULL 列？我看不出 SQL Compare 是如何真正提出解决方案的，因为它无法知道您将如何填充它。

您可以使用 DEFAULT 创建列，然后只需在生成的脚本末尾添加一条更新语句即可在您有一些值的来源时正确更新该列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T19:55:56.747

创建表：

```
create table #bingo ( id int ) 
```

添加一个值：

```
insert into #bingo values (1) 
```

添加一个新列：

```
alter table #bingo add userid int 
```

填充新列：

```
update #bingo set userid = 1 where id = 1 
```

将新列更改为不可为空：

```
alter table #bingo alter column userid int not null 
```

您必须手动编辑 RedGate Sql Compare 以使其像这样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T20:51:26.333

**在新的非空列上添加默认值**

创建新的非空列时，所有现有行都获得什么值？如果您不知道，请将该列设为可为空。

# svn - 我如何知道当前的 svn 存储库是哪个版本？

> ID：864113
> 
> 赞同：3
> 
> 时间：2009-05-14T15:41:37.077
> 
> 标签：svn, upgrade, svnadmin

最近，我决定将我的 svn 存储库从 v1.5 升级到 v1.6。运行升级命令后，我看到 CMD 窗口中留下的消息。

```
D:\svn>svnadmin upgrade repo
Repository lock acquired. 
Please wait; upgrading the repository may take some time...

Upgrade completed.

D:\svn>_ 
```

耶！！看起来很棒……但是……我怎么知道当前存储库是哪个版本？它是升级到 v1.6 还是仍然是 v1.5。我拥有的存储库很少。我怎样才能找到他们的版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T15:46:11.560

查看存储库路径中的文件“格式”。它应该包含您的存储库的架构。由于 Subversion 1.4 是 5，并且在 Subversion 2 之前可能不会更改。只要架构不更改，就不需要“svnadmin upgrade”。

引用[http://svn.apache.org/repos/asf/subversion/trunk/notes/repos_upgrade_HOWTO](http://svn.apache.org/repos/asf/subversion/trunk/notes/repos_upgrade_HOWTO)：

```
Anyone upgrading between versions of subversion that have different
repository schemas.  Schema versions are as follows:

    SUBVERSION VERSION NUMBER           SCHEMA VERSION
    -------------------------           --------------
    Up to and including 0.27            1
    0.28 - 0.33.1                       2
    0.34 - 1.3                          3
    (no released version used this)     4
    1.4 -                               5

If necessary you can see which schema version your repository is
currently using by looking at the format file in the repository.

It should be noted that these changes are extremely rare.  Now that
subversion has reached 1.0.0 our compatibility guarantees require
forward and backward compatible repository formats for all patch
releases and backward compatible for minor releases.  So until
2.0.0 comes out there will be no change that should require a 
dump for upgrading to newer versions.

While Subversion does create version 5 repositories by default as of
version 1.4, it still supports reading and writing version 3
repositories for backwards compatibility.  Additionally, a pre-1.3
client can communicate with a 1.4+ server accessing a version 5
repository. 
```

不要将存储库模式与工作副本之一混淆。工作副本中的格式文件包含当前版本的 subversion 的“9”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-23T15:23:47.447

除了 /format，现在还有一个文件 /db/format，例如在使用 1.6.x 创建的默认 repo 中，它具有以下内容：

4 布局分片 1000

对于升级到 1.5.5 的仓库：

3 布局线性

对于普通的香草 1.4.2 回购：

2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T15:57:38.787

查看此代码以更改颠覆工作副本的[格式](http://svn.collab.net/repos/svn/trunk/tools/client-side/change-svn-wc-format.py)

最新的格式是

```
LATEST_FORMATS = { "1.4" : 8,
                   "1.5" : 9,
                   "1.6" : 10 
```

# excel - Excel 触发宏

> ID：864115
> 
> 赞同：2
> 
> 时间：2009-05-14T15:42:28.120
> 
> 标签：excel, vba, events, triggers

我正在努力执行以下操作。任何帮助将不胜感激。

marco 仅与一个 excel 工作表有关。

我有 50 行信息，A 列的每一行有 11 列宽 (A - K)将单元格 B 中的信息复制到 K，然后将其特殊粘贴回这些单元格。

然后移动到下一行

50 行信息将在一天内填满。

A 列中的每个 ROW 条件仅执行一次，从 ROW 1 开始，一直到 ROW 50

触发事件'OK'会来，只是等待它发生而已。

正如我所说，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T16:07:26.017

使用工作表的Change事件，查看目标是否在A列。如果检查它是否等于“OK”，则在该行上执行宏。

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Cells.Count > 1 Then Exit Sub

On Error Resume Next
Dim TestRange As Range
Set TestRange = Target.Dependents

If TestRange.HasFormula And Err.Number = 0 Then
    If Left$(TestRange.Address, 2) = "$A" Then
        Application.EnableEvents = False

        If TestRange.Value = "OK" Then
            Call GreatMacro(TestRange)
        End If

        Application.EnableEvents = True
    End If
End If

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T16:08:45.357

[此页面](http://www.mrexcel.com/articles/macro-when-excel-cell-changes.php)显示如何设置宏以在单元格更改时运行。
基本上，方法是过度使用工作表更改功能，如果单元格是正确的，则让该功能运行。

尝试尽可能多地保留在 if-this-is-correct-cell 检查中，以确保每次更改工作表时都不会执行太多代码。

# linux - Linux下自动运行Excel宏

> ID：864116
> 
> 赞同：0
> 
> 时间：2009-05-14T15:42:56.340
> 
> 标签：linux, excel

我使用的部分软件使用 Excel 表来存储用户错误消息及其翻译。我们运行一个宏来生成一组国际化的文本文件和匹配的头文件，然后将它们复制到我们的版本控制系统中（电子表格也在版本控制中）并用作我们构建的一部分。

我想更好地自动化我们的构建，拉取 xls，运行宏，然后在编译源代码之前将文件复制到正确的位置。我们的构建盒都是基于 Linux 的。

我尝试在 OpenOffice.org 中加载 XLS 并运行宏，但这似乎不起作用。

是否有任何选择，或者在我们能够说服利益相关者我们需要使用 Excel 以外的格式来存储这些数据之前，我是 SOL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:10:12.343

给您带来问题的不是您用来存储**数据的格式。**它是您用来存储**逻辑**的格式。存储在 Excel 中的数据可在 Linux 上访问。Excel 宏中嵌入的逻辑不是。

这些宏有多复杂？你有没有机会以另一种形式重现它们（Perl？）。在这种情况下，您可以以编程方式从 .XLS 中提取数据，并且该逻辑可以在任何有 Perl 引擎的地方运行。

# vim - 有没有办法在 Vim 的新文件中添加版权文本？

> ID：864118
> 
> 赞同：7
> 
> 时间：2009-05-14T15:43:16.060
> 
> 标签：vim

例如，如果我在 vim 中打开一个全新的文件，它已经包含以下文本：

```
/*
  The MIT License

  Copyright (c) 2009 Apphacker apphacker@gmail.com

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/ 
```

必须为每个新文件键入/复制并粘贴它会很烦人。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-14T15:53:44.397

创建一个拥有 MIT 许可证的文本文件 ~/.vim/mit.txt 怎么样？然后 .vimrc 中的以下内容：

```
map :mit :0r ~/.vim/mit.txt 
```

...因此您只需输入 :mit 即可插入许可证。

或者，如果你真的一直想要这种行为：

```
autocmd BufNewFile *
\ 0r ~/.vim/mit.txt
augroup END 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T14:39:01.073

正如[http://www.gnu.org/copyleft/gpl.html](http://www.gnu.org/copyleft/gpl.html)所说，

> 为此，请在程序中附上以下通知。将它们附加到每个源文件的开头是最安全的，以最有效地说明保修除外；每个文件至少应该有“版权”行和一个指向完整通知所在位置的指针。

因此，能够自动插入一些文本可能很有用。snipMate插件可用于此目的[。](http://www.vim.org/scripts/script.php?script_id=2540)虽然它是为代码片段设计的，但它也可以用来自动插入一些任意文本。

安装 snipMate 后，将以下代码块附加到 ~.vim\snippets_.snippets 文件中的文件中。

```
snippet mit
    /*
      The MIT License

      Copyright (c) `strftime("%Y")` ${1:Your name here} ${2:Your email here}

      Permission is hereby granted, free of charge, to any person obtaining a copy
      of this software and associated documentation files (the "Software"), to deal
      in the Software without restriction, including without limitation the rights
      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      copies of the Software, and to permit persons to whom the Software is
      furnished to do so, subject to the following conditions:

      The above copyright notice and this permission notice shall be included in
      all copies or substantial portions of the Software.

      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
      THE SOFTWARE.
    */ 
```

现在，当你输入

```
mit 
```

并按下

```
<Tab> 
```

它将插入上面的文本。它还会调整日期，它会自动将光标移动到姓名和电子邮件部分。

因此，您可以将您的许可证（GNU、MIT、您自己命名）添加到该文件中，并在需要时使用它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T15:56:25.763

当您尝试创建一个您不想拥有此许可证的文件时，您最终可能会觉得这很烦人。

其他几个选项仍然使它更容易，但让你控制它：

1.  将许可证文本存储在某处，比如说在`~/mitlicense`. 然后当你开始一个新文件时，运行命令“ `:r ~/mitlicense`”，它将文件的内容插入到新文件中。如果您想进一步加快速度，请映射执行此操作的命令，甚至为其分配键盘快捷键。
2.  为许可证定义一个“缩写”（[此处的说明](http://vim.wikia.com/wiki/Multi-line_abbreviations)）。然后你所要做的就是输入一个简短的标识符，vim 会用许可证替换那个标识符。你不会偶然输入的东西，比如“#mit”可能会完成这项工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T15:58:19.860

或者看看几个模板系统：[http](http://www.google.hu/search?&q=vim+templating) ://www.google.hu/search?&q=vim+templating 。您可以使用自动命令为每个新文件自动执行已经推荐的 ':map' 命令。您可以将其缩小到特定的文件类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-20T01:43:32.833

我编写了一个插件，提供在缓冲区顶部插入许可证的命令。

[这里是。](http://www.vim.org/scripts/script.php?script_id=4871)

您可以使用 autocmd 自动执行此行为：

```
autocmd BufNewFile * Gpl 
```

与其他答案的替代方案相比，该插件的优势在于该插件支持多种编程语言（它将使用该`comments`选项评论许可证文本）。

它还会自动插入当前年份。

免责声明：我是这个项目的作者。

# c++ - 如何在 C++ 类中创建 const 数组和计算 const 值？

> ID：864124
> 
> 赞同：0
> 
> 时间：2009-05-14T15:44:26.320
> 
> 标签：c++, gcc, syntax

我遇到了一些我不明白的编译器错误。我很确定我在这里做错了什么，但我不知道是什么。我希望将所有世界常量定义为属于该类。

笔记：

我只使用类作为带有附加成员的结构。我不是故意遵循严格的面向对象设计。请不要评论公共变量。

我不太关心编译器内联的东西。我使用这种结构是因为它易于使用。（如果有效）

```
class Board{
public:
    enum PhysicsResult{ BOUNCE, OUT_OF_BOUNDS_TOP, OUT_OF_BOUNDS_BOTTOM, CONTINUE };
    //World constants
    const static float Height = 500;
    const static float Width = 300;
    //ERROR: 'Board::Width' cannot appear in a constant-expression.
    const static float PaddleWidth = Width/15; 
    const static float BallRadius = 5;
    const static float BounceDistance = 1.5;
    //World Objects
    Ball ball;
    Paddle paddle1;
    Paddle paddle2;
    /*
     1---2
     |   |
     0---3
     */
    //ERROR: a brace-enclosed initalizer is not allowed here before '{' token
    //ERROR: invalid in-class initalization of static data member of nonintegral type 'const Pair[4]'
    const static Pair corners[4] = {Pair(0, 0), Pair(0, Height), Pair(Width, Height), Pair(Width, 0)};

    //ERROR: a brace-enclosed initalizer is not allowed here before '{' token
    //ERROR: invalid in-class initalization of static data member of nonintegral type 'const Pair[2]'
    const static Pair left_wall[2]   = {corners[0], corners[1]};

    //ERROR: a brace-enclosed initalizer is not allowed here before '{' token
    //ERROR: invalid in-class initalization of static data member of nonintegral type 'const Pair[2]'
    const static Pair right_wall[2]  = {corners[3], corners[2]};

    //ERROR: a brace-enclosed initalizer is not allowed here before '{' token
    //ERROR: invalid in-class initalization of static data member of nonintegral type 'const Pair[2]'
    const static Pair top_wall[2]    = {corners[1], corners[2]};

    //ERROR: a brace-enclosed initalizer is not allowed here before '{' token
    //ERROR: invalid in-class initalization of static data member of nonintegral type 'const Pair[2]'
    const static Pair bottom_wall[2] = {corners[0], corners[3]}; 
```

如果可以做到这一点，这样做的正确语法是什么？如果这是不可能的，我应该使用什么替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T15:49:25.310

在类的主体之外定义静态常量可以使用 gcc 编译和执行。

```
#include <iostream>
using namespace std;

struct Pair { int a; int b; Pair(int x, int y) : a(x),b(y) {}};
struct F {
  static const float blah = 200.0;
  static const Pair corners[4];
};

// square boards are so ordinary
const Pair F::corners[4] = { Pair(0,0), Pair(0,1), Pair(2,0), Pair(2,2) };

const float F::blah ;

int main(int, char **) {
  cout << F::corners[0].a << endl ;
  cout << F::blah << endl;
  return 0;
} 
```

我不能过分强调[ebo](https://stackoverflow.com/users/104480/ebo)关于初始化顺序的评论的重要性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T15:46:44.600

您必须在构造函数初始化列表中初始化 const 成员。

```
class blah
{
    public:
            blah() : _constant( 1 ) { }

    private:
            const int _constant;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:00:05.910

C++ 对象的静态成员需要在声明之外定义。这是因为编译器不知道将成员放入哪个翻译单元（.o 文件）。

通常我会在实现的 .cpp 文件中定义它们。您通常不希望将它们放入头文件中，因为它们最终会出现在多个 .o 文件中，并且会生成编译器错误，因为多次定义了相同的东西。

# c# - 以编程方式中断活动的屏幕保护程序？

> ID：864129
> 
> 赞同：8
> 
> 时间：2009-05-14T15:45:40.420
> 
> 标签：c#, .net, windows, winforms, screensaver

原因：我正在开发一个需要在桌面上显示信息的紧急警报应用程序。当客户端收到警报时，它会弹出一个窗口。如果屏幕保护程序处于活动状态或显示器处于待机状态，则警报将不可见。我想知道是否可以通过某种程序化的鼠标移动或系统调用来唤醒计算机，以便可以看到警报。我认为鼠标移动或按键唤醒它的原因是硬件中断，所以它可能是不可能的。

目前，该项目正在用 C# 实现。我有兴趣了解适用于 Windows、MAC 和 Linux 的解决方案。

这是客户的要求。我考虑了以下几点：

*   在不活动后的大多数计算机上，用户必须登录。那些计算机不会收到警报
*   很有可能如果屏幕保护程序处于活动状态，那么无论如何都没有人在计算机旁。

我不想：

*   防止同时激活屏幕保护程序或节能模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T16:23:13.543

基于 fbonnet 所说，要使用 C# 中的[kb](http://support.microsoft.com/kb/140723)文章中显示的功能， [pinvoke.net](http://www.pinvoke.net)站点是一个很好的资源。[他们在这里](http://www.pinvoke.net/default.aspx/user32/PostMessage.html)也有一篇关于该`PostMessage`功能的文章。

因此，让您的代码工作的基本方法可能是搜索[pinvoke.net](http://www.pinvoke.net)站点 上的[kb](http://support.microsoft.com/kb/140723)文章中列出的函数。**或者你可以阅读****[这篇文章](http://www.codeproject.com/KB/cs/ScreenSaverControl.aspx)****为你做了这件事。**

# c# - C#、Windows 窗体、最适合/最小适合内容的窗口

> ID：864130
> 
> 赞同：5
> 
> 时间：2009-05-14T15:45:47.723
> 
> 标签：c#, .net, winforms

我有一个带有一些控件的表单。（实际上，这是一种持续存在的问题。）我所拥有的一些表格是可调整大小的，有些则不是。无论如何，当显示表单时，最好让它以所需的“最小”大小出现。其他窗口工具包，例如 wxWidgets (wxWindow::GetMinSize) 和 Qt (QWidget::minimumSize) 具有此功能。

如果您不熟悉此功能，它允许窗口将自身调整到最小尺寸，这通常是窗口所需的全部，并且看起来相当不错。如果我有两个静态文本，并且因此布置了两个编辑框：

```
Username:
[ Edit/text box for user's password]
Password:
[ Edit/text box for user's password]
              [  Cancel  ][   OK   ] 
```

然后我可以告诉这个表格将自己调整到它的“最小尺寸”，它看起来就像上面一样。（文本框中的最小宽度部分是主观的 - 我必须自己在一个/两个文本框中设置它，但表单会查询子控件并了解最小宽度）这通常与一些布局相结合种类。（.Net 有。）

这样做的另一个好处是，无论字体设置、区域设置、dpi、gui 皮肤等如何，表单的大小都是正确的。（如果做得对，至少。）

这在.Net中是否存在，如果存在，在哪里？如果您需要更多描述，请询问，我很乐意提供。

编辑：我正在寻找的是上面的示例，只能在 X 方向上调整大小（我愿意接受两者），但不能调整到小于某个 W/H 的大小。控件应该锚定 - 即，文本框变大，按钮保持右对齐。

编辑：我可以做图像！据说它们值一千字： [alt text http://www.freeimagehosting.net/uploads/79e9ee10e5.png](http://www.freeimagehosting.net/uploads/79e9ee10e5.png)

**编辑：**我想我要开始标记答案了。Henk 的回答让我获得了一个适合其内容的不可调整大小的对话框。下面的大多数帖子都很有价值，但没有抓住重点（除非我真的不在这里？）：我了解如何使用 Anchor/TableLayout，并让控件在那里流动——它主要是获得一个或两个维度对话框以适应对话框的内容。你基本上有三种情况：

1.  对话框不可调整大小 - 请参阅 Henk 的回答。结合 TableLayout 和 Anchors，你会得到一个不错的对话框。

2.  对话框只能在一个维度上调整大小 - 使用 1 或 3 - 您可以使用 Resize 事件来限制维度，但对话框会闪烁得可怕。（据我所知，这似乎是 Win32 中的一个缺陷 - 有一些关于覆盖背景擦除的东西，它适用于控件，但不适用于窗口，因为你会在表单的背景中得到伪影（因为你'没有删除它们）。真正的答案是这可能应该由 Win32 本身处理 - 我不应该为了获得一个像样的外观对话框而重新发明双缓冲轮......））

3.  对话框完全可调整大小。Anchors 和 TableLayout 是你的朋友。不幸的是，MinimumSize 属性似乎是伪造的（至少，我不知道它是做什么用的......） - 例如，如果您查询文本框的 MinimumSize，默认情况下高度为 4 像素。此外，MinimumSize 属性似乎没有传播 - 控件不会查询它的子项。（我可以将表单的大小调整为小于表单中的文本框，然后文本框就离开了表单。）如果您想知道我在胡说八道，请参阅 wxWidgets 以及布局和最小尺寸如何为它工作。

我还发现.Net 似乎不尊重系统字体，并且总是为 Forms 使用相同的字体，所以字体更改不会影响我的对话框（可悲），这减轻了我的大部分担忧（很高兴？）。同样，参考 wxWidgets 是如何做到的——如果系统字体是 22pt，所有 wxFrames（表单）都会尊重并适当地调整大小。.Net 应该登上这列火车......（而且我知道有人每天使用 22+pt 字体作为他们的标准 GUI 字体。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T16:30:57.707

有些事情很接近，请尝试以下操作：将您的表单设计得有点大，并避免右和下停靠控件。然后是这样的一些代码：

```
private void button1_Click(object sender, EventArgs e)
{
    this.AutoSize = true;
    this.Size = new Size(10, 10);
} 
```

AutoSize 将找到控件的扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T23:34:15.817

[我使用TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel(VS.80).aspx)处理这些事情。TableLayoutPanel 允许您在列和行中布局控件。列和行具有三种 SizeType：AutoSize、Percent 和 Absolute。AutoSize 根据最小必要值调整列或行的大小，Percent 根据未使用区域的百分比调整列或行的大小，Absolute 根据像素的绝对数量调整列或行的大小。

VisualStudio 设计器很有帮助。如果您宁愿手动编写所有代码，在设计器中使用 TableLayoutPanel 并检查生成的设计器代码以了解如何操作 TableLayoutPanel 仍然是一个好主意。

为了获得最小的必要尺寸，您应该：

*   Dock.Fill 表格中的 TableLayoutPanel。
*   Dock.Fill 单元格中的控件。
*   使用 Control.Margin 处理控件之间的间距。
*   将所有列和行的 SizeType 设为 AutoSize。

此外，您可以使用 ColumnSpan 和 RowSpan 使控件占用多个单元格。

一旦按照您希望的方式进行设置，您就可以使用 TableLayoutPanel.GetPreferredSize() 来确定 TableLayoutPanel 所需的最小区域并将该值分配给 Form.ClientSize。

如果用户能够调整表单大小，则在确定所需的最小大小后，应将要随表单增长的列和行的 SizeType 设置为 SizeType.Percent 并使用值 100，如下所示：

```
// "columnIndex" is the zero based index of the column
this.tableLayoutPanel.ColumnStyles[columnIndex] = new ColumnStyle(SizeType.Percent, 100);

// "rowIndex" is the zero based index of the row
this.tableLayoutPanel.RowStyles[rowIndex] = new RowStyle(SizeType.Percent, 100); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T17:38:34.987

以下是我通常使用锚定处理这种情况的方式： 将标签的锚点设置为 Top、Left（默认值）；上、左、右的文本框；和底部，右侧的按钮。将设计器中的表格调整为所需的最小尺寸。在设计器中，将窗体的 MinimumSize 属性设置为其当前大小。

在运行时，用户可以调整表单的大小。标签不会移动，文本框会水平拉伸，但不会垂直拉伸。按钮将随表单的右边缘和下边缘一起移动。用户将无法使表单（及其控件小于 MinimumSize）。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T07:03:51.603

使用窗体的[MaximumSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.maximumsize.aspx)和[MinimumSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.minimumsize.aspx)属性，以及控件的Anchor 属性。

```
// make the form 200 pixels high, without possibility to resize the height
// and restrict the minimum width to 200 pixels
this.MinimumSize = new Size(200, 200);
this.MaximumSize = new Size(30000, 200); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-07T17:56:47.767

在我的脑海中（阅读：我没有测试过这个），我认为你可以在表单加载时遍历所有子控件并确定它的最小尺寸。然后，您可以将表单设置为这个大小并设置它的`MinimumSize`属性，这样它就永远不会被调整为更小的任何东西。

像这样，使用一些LINQ：

```
OnLoad()
{
    int right = this.Controls.Cast<Control>().Max(c => c.Right);
    int bottom = this.Controls.Cast<Control>().Max(c => c.Bottom);

    // leave a little padding, add maybe 10px or 10%?
    int minWidth = right + 10;
    int minHeight = bottom + 10;

    this.Size = new Size(minWidth, minHeight);
    this.MinimumSize = new Size(minWidth, minHeight);
} 
```

关于 WinForms 字体，显然它是 1.0 中的一个错误，出于兼容性考虑，它已被保留。（请参阅[此处](https://stackoverflow.com/questions/297701/default-font-for-windows-forms-application)和[此处](http://weblogs.asp.net/KDente/archive/2005/03/13/394499.aspx)`this.Font = SystemFonts.DialogFont`。）您可以通过设置表单加载时间来解决它。但是，这不会出现在设计模式中。要解决此问题，请在 BaseForm 中设置字体并从中派生所有表单。

更新：我知道如果您有右或底部锚定控件，这可能是个问题。它将使用它们当前的位置和大小，而不是计算它们不会挤入其他控件或变得太小的大小的最小值。也许您可以在调整表单大小*后*以编程方式设置它们的锚点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T15:49:41.627

听起来您想要 Dock 和 Anchor 属性。

[这](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-6165908.html)是来自 Google 的第一个链接。

# asp.net - 如何让用户通过弹出窗口保持登录状态？

> ID：864133
> 
> 赞同：0
> 
> 时间：2009-05-14T15:46:17.330
> 
> 标签：asp.net, javascript, cookies, forms-authentication

我有一个应用程序要求用户在不活动的 15 到 30 分钟之间重新输入他们的密码，以允许他们继续他们正在做的事情。

我目前的想法是有一段 javascript 在 15 分钟后调用一个弹出窗口，要求用户再次登录。整个站点有 15 分钟的表单身份验证超时和 30 分钟的会话超时。

然后，如果用户在弹出窗口中成功验证了自己，我希望它允许原始页面进行回发。

目前我的弹出窗口正在工作（使用 JS 倒计时 15 分钟）并且用户能够再次登录，但是当弹出窗口关闭并且用户尝试在其原始页面上执行操作时，他们被要求登录再次进入。

我认为这是因为附加到原始页面的原始 cookie 现在已经过期，它不会检测到新的 cookie。

**如何将成功的身份验证从弹出窗口传递到原始页面？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:02:58.850

我会创建一个需要密码的面板，并通过一个按钮在方法后面提供适当的代码。

然后，您可以使用 AJAX 或 jQuery 来触发模式“弹出”框，要求他们提交详细信息。通过这样做，您可以将所有内容保存在一个页面上，而不必担心在页面/表单/选项卡/其他内容之间传递凭据。

此外，您可以有 1 个脚本方法在 x 分钟后触发以提示刷新，并有第二个 javascript 在 x + 2 分钟后触发以在用户无法响应时将用户从应用程序中注销。

您的代码隐藏方法可以正确重置所有 cookie 并重置超时，并且可以在您希望的任何页面上重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:05:38.547

如果您添加一个元标记或隐藏的 div，它在元标记的内容属性中填充身份验证令牌，并且只是在隐藏 div 的 div 主体中，您可以像这样从弹出窗口中获取它...

```
var debugWin = window.open('','aWindow','width=600,height=600,scrollbars=yes');
var somevar = debugWin.document.body.getElementById("my_hidden_div_id").innerText; 
```

然后，您可以使用 JavaScript 中的 somevar 的内容更新会话 cookie。只要您维护窗口的句柄，您就应该能够访问窗口的 DOM。

您在 dom 上的获取方式可能存在一些跨浏览器差异，我认为 IE 的方法略有不同，但它很容易测试并且结果是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T15:56:18.697

最好使用框架。使顶部框架高度为 0 并定期刷新。这样它就不会被阻塞或意外关闭。您可能还想研究用 Ajax 做同样的事情。

# css - my_css_class VS my-css-class

> ID：864138
> 
> 赞同：1
> 
> 时间：2009-05-14T15:47:58.153
> 
> 标签：css

Which one between

```
.my_css_class{} 
```

... and ...

```
.my-css-class{} 
```

is the best way to go and why? Is it just best practice or is there another reason?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T15:50:40.470

Either is OK - I would pick whichever one you (and your colleagues) find to be the most readable. You will find neither gains nor losses with either one, it is purely an aesthetic choice.

But whatever you do - once you pick a style - **stick with it**. Consistency is key for decisions like this.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T16:00:17.110

我会用连字符。因为有些[浏览器不理解类名中的下划线，](http://devedge-temp.mozilla.org/viewsource/2001/css-underscores/)因为它们在 CSS 1 中还没有被允许。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T15:52:01.450

I prefer hyphens to underscores since underscores are an extra keystroke--that's how trivial you can be since it makes no difference, and in my opinion they're both equally readable.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T15:54:48.463

I prefer underscores because in Vim - are considered word separators and it's extra work to highlight the entire name.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T15:53:26.003

The one reason to go with the underscore style is that it's consistent with the naming of variables and types in other languages (C*,Java, etc). I think that it's a bit better to go with something familiar so that it's more natural to read the source (and faster).

Otherwise, the other suggestions given sound reasonable as well. Maybe have *quick* chat with your team and go with what works best for everyone.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-14T15:58:34.400

我同意这里的每个人 - 没有一个更好，但**选择一个并坚持下去**。

就我个人而言，我使用连字符的原因与 Andrew 相同，它们更容易输入。不过，我也使用下划线来定位 jQuery 类。

所以我可以为样式设置“.modal-popup”。

然后我可以使用“._rollover”来定位特定元素并将功能应用于特定元素，而不必担心应用不需要的样式。"._rollover" 永远不会应用任何样式信息。

这是一种 hack，但却是绕过 HTML 中可选属性的限制数量的好方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T16:22:06.370

如果使用连字符，则可以使用[`|=`属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)根据类名的第一部分选择一组类：

```
/* Select open folders */
.folder-open { }
/* Select closed folders */
.folder-closed { }
/* Select both kinds */
*[class|="folder"] { } 
```

浏览器对这种选择器有[不同的支持。](http://www.webdevout.net/browser-support-css#css2selectors)

# c# - Write file from assembly resource stream to disk

> ID：864140
> 
> 赞同：44
> 
> 时间：2009-05-14T15:49:00.287
> 
> 标签：c#, .net

I can't seem to find a more efficient way to "copy" an embedded resource to disk, than the following:

```
using (BinaryReader reader = new BinaryReader(
    assembly.GetManifestResourceStream(@"Namespace.Resources.File.ext")))
{
    using (BinaryWriter writer
        = new BinaryWriter(new FileStream(path, FileMode.Create)))
    {
        long bytesLeft = reader.BaseStream.Length;
        while (bytesLeft > 0)
        {
            // 65535L is < Int32.MaxValue, so no need to test for overflow
            byte[] chunk = reader.ReadBytes((int)Math.Min(bytesLeft, 65536L));
            writer.Write(chunk);

            bytesLeft -= chunk.Length;
        }
    }
} 
```

There appears to be no more direct way to do the copy, unless I'm missing something...

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-05-14T16:12:23.897

我不确定你为什么要使用`BinaryReader`/ `BinaryWriter`。就我个人而言，我将从一个有用的实用方法开始：

```
public static void CopyStream(Stream input, Stream output)
{
    // Insert null checking here for production
    byte[] buffer = new byte[8192];

    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write(buffer, 0, bytesRead);
    }
} 
```

然后调用它：

```
using (Stream input = assembly.GetManifestResourceStream(resourceName))
using (Stream output = File.Create(path))
{
    CopyStream(input, output);
} 
```

您当然可以更改缓冲区大小，或者将其作为方法的参数 - 但要点是这是*更简单*的代码。是不是更有效率？没有。你确定你真的*需要*这段代码来提高效率吗？您实际上是否需要将数百兆字节写入磁盘？

我发现我很少需要超高效的代码，但我几乎总是需要它简单。您可能会在这种方法和“聪明”方法（如果有的话）之间看到的那种性能差异不太可能是改变复杂性的效果（例如 O(n) 到 O(log n)） -*这*就是真正值得追求的性能提升类型。

编辑：如评论中所述，.NET 4.0 具有[`Stream.CopyTo`](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)因此您无需自己编写代码。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2011-09-18T07:30:04.017

如果资源（文件）是二进制的。

```
File.WriteAllBytes("C:\ResourceName", Resources.ResourceName); 
```

如果资源（文件）是文本。

```
 File.WriteAllText("C:\ResourceName", Resources.ResourceName); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-04-14T00:05:47.417

我实际上最终使用了这一行： `Assembly.GetExecutingAssembly().GetManifestResourceStream("[Project].[File]").CopyTo(New FileStream(FileLocation, FileMode.Create))`. 当然，这是针对 .Net 4.0

更新：我发现上面的行可能会锁定文件，以便 SQLite 报告数据库是只读的。因此，我最终得到以下结果：

```
Using newFile As Stream = New FileStream(FileLocation, FileMode.Create)
    Assembly.GetExecutingAssembly().GetManifestResourceStream("[Project].[File]").CopyTo(newFile)
End Using 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T15:53:02.510

Personally I would do it this way:

```
using (BinaryReader reader = new BinaryReader(
    assembly.GetManifestResourceStream(@"Namespace.Resources.File.ext")))
{
    using (BinaryWriter writer
        = new BinaryWriter(new FileStream(path, FileMode.Create)))
    {
        byte[] buffer = new byte[64 * 1024];
        int numread = reader.Read(buffer,0,buffer.Length);

        while (numread > 0)
        {
            writer.Write(buffer,0,numread);
            numread = reader.Read(buffer,0,buffer.Length);
        }

        writer.Flush();
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T16:15:43.827

如果这是您的问题，您将不得不编写一个循环。但是你可以不用 reader 和 writer，因为基本 Stream 已经处理了 byte[] 数据。

这是我能得到的最紧凑的：

```
using (Stream inStream = File.OpenRead(inputFile))
using (Stream outStream = File.OpenWrite(outputFile))
{
    int read;
    byte[] buffer = new byte[64 * 1024];

    while ((read = inStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        outStream.Write(buffer, 0, read);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-21T14:16:45.013

这对我有用：

```
 using (MemoryStream input = new MemoryStream(Properties.Resources.*RESOURCE_NAME*))
    using (Stream output = File.Create(databasePath)){

                    input.CopyTo(output)
    } 
```

# mysql - Is using mysql ENUM a bad architectural solution?

> ID：864142
> 
> 赞同：15
> 
> 时间：2009-05-14T15:49:07.370
> 
> 标签：mysql, architecture

For me it is like using hardcoded values instead of constant variables in application code. But there are different opinions out there. So I can't really decide for sure.

P.S. For the scope of this question let us assume that performance is not an issue.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-14T15:51:53.963

It depends on what you're trying to achieve, really. If performance, as you say, is not an issue, then it's largely down to your philosophy, and the inherent changeability of the data. If you're using an ENUM to store values for days of the week, to aid human readability, and 'queryability' of the data, then it's a perfectly valid use (and far superior, in some cases, to using numbers, or other representations). If, however, you're using it to store things like the category a product is in (for which the set of available categories could easily change), then it's a very poor solution.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T15:54:56.297

ENUM 非常适合您知道将属于静态集合的数据。

如果您使用的是 Mysql 5+，如 MySQL 官方参考所示，使用 ENUM 类型存储静态数据集中的数据[***几乎总是更好。***](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html#id719550)更不用说数据是可读的，而且您还有额外的验证层。

如果您想知道使用 ENUM 是否会是一种优化，我建议您使用[PROCEDURE ANALYZE](http://dev.mysql.com/doc/refman/5.0/en/procedure-analyse.html)。这将为您的列推荐正确的数据类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T15:55:33.580

这在很大程度上取决于实际情况，但列类型首先要精确定义哪些值是允许的，哪些是不允许的。如果在您的问题域中，您正在考虑存储为 ENUM 值的属性是*固定*的，因为它不可能有其他值，那么 ENUM 是一个不错的选择。一个例子就是性别：`ENUM('male', 'female')`很好，因为添加第三个性别的机会确实非常低。

如果您存储的值更有可能发生变化，那么您可能会考虑将数据模型规范化为多对一关系。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T15:59:29.280

绝不！与数字字段相比，它们有几个优点：

*   它们更具可读性： UPDATE Person SET state=2 -- What does 2 代表什么？
*   它们的范围有限：如果一个人只有 10 个州，为什么要允许数值 11+？
*   它们可以像数字计数器一样使用：UPDATE person SET state=state + 1

实际上，使用数值而不是枚举就像将常量放入源代码一样。

# asp.net - How do I bind a repeater to a List to also update the bound items? (2-way)

> ID：864149
> 
> 赞同：15
> 
> 时间：2009-05-14T15:49:50.630
> 
> 标签：asp.net, data-binding, repeater

If I have a List < Person > where person is defined by the class

```
class Person
{
   string Forename
   {
      get;set;
   }
   string Surname
   {
      get; set;
   }
} 
```

And I bind it to an asp repeater control that looks like this:

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:Label ID="lblForename" runat="server" Text="Forname" AssociatedControlID="txtForename" />
        <asp:TextBox ID="txtForename" runat="server" Text='<%# ((Person)Container.DataItem).Forename %>' />
        <br />
        <asp:Label ID="lblSurname" runat="server" Text="Forname" AssociatedControlID="txtSurname" />
        <asp:TextBox ID="txtSurname" runat="server" Text='<%# ((Person)Container.DataItem).Surname %>' />
        <br />
    </ItemTemplate>
</asp:Repeater> 
```

What is the best way to get the data that the user types in back into the objects?

I thought that the whole point of data binding was that this was effectively handled for you, but when I inspect the Repeater1.Items collection, there are no changes made. Do I have to write code to do something along the lines of

```
//This is only intended to be pseudo code
for each item in Repeater1.Items
    ((Person)item.DataItem).Forename = item.FindControl("txtForname").Text;
end for 
```

If that is the case, why is the DataItem property always empty?

**Additional info:**

I am already calling code the the effect of

```
this.Repeater1.DataSource =  this.PersonList;
this.Repeater1.DataBind(); 
```

I've tried using `Bind("Forename")`, but this doesn't seem to bring the info from the TextBox back into the object, do I have to do this manually?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T17:10:19.967

简单的答案是Repeater 控件不支持您正在寻找的那种双向数据绑定。最重要的是，DataItem 属性仅在创建中继器项目期间使用，并且在 ItemDataBound 事件之后，它被设置为空。因此，您不能使用该属性来获取回发后创建特定转发器项目时使用的原始对象（就像您在伪代码中所做的那样）。

您将必须按照您的建议遍历中继器项目（确保在执行任何操作之前检查该项目是 ListItemType.Item 还是 AlternatingItem），然后从文本框中提取值并在更新中使用它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T16:03:35.777

如果您将中继器与您想要的人员列表绑定

```
this.Repeater1.DataSource =  GetPersons(); 
```

而 GetPersons() 是一种返回您可以使用的人员对象列表的方法

```
<asp:TextBox ID="txtForename" runat="server" Text='<%# Eval("Forename") %>' /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T15:57:01.440

除了上述之外，还需要将repeater绑定到List。现在，文本框被分配给 Forename 的值（或者如果您使用

```
<# Bind("Forename") %> 
```

标记），但中继器容器没有数据项。

# c# - C# switch variable initialization: Why does this code NOT cause a compiler error or a runtime error?

> ID：864153
> 
> 赞同：9
> 
> 时间：2009-05-14T15:51:02.903
> 
> 标签：c#, switch-statement

```
...
case 1:
   string x = "SomeString";
   ...
   break;
case 2:
   x = "SomeOtherString";
   ...
   break;
... 
```

Is there something that I am not understanding about the switch statement in C#? Why would this not be an error when case 2 is used?
Edit: This code works and doesn't throw an error.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-14T15:55:49.680

你必须小心你如何看待`switch`这里的陈述。事实上，*根本没有创建变量范围*。不要仅仅因为 case 中的代码缩进就认为它位于子范围内。

当一个 switch 块被编译时，`case`标签被简单地转换为标签，并`goto`根据 switch 表达式在 switch 语句的开头执行适当的指令。[实际上，正如MSDN 页面](http://msdn.microsoft.com/en-us/library/06tc147t(VS.71).aspx)所建议的那样，您可以手动使用`goto`语句来创建“失败”情况（C# 直接支持） 。

```
goto case 1; 
```

如果您特别想为块中的每个案例创建范围`switch`，您可以执行以下操作。

```
...
case 1:
{
   string x = "SomeString";
   ...
   break;
}
case 2:
{
   string x = "SomeOtherString";
   ...
   break;
}
... 
```

这*需要*您重新声明变量`x`（否则您将收到编译器错误）。确定每个（或至少一些）范围的方法在某些情况下可能非常有用，您肯定会不时在代码中看到它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-14T15:55:07.997

The documentation on [MSDN](http://msdn.microsoft.com/en-us/library/aa691132.aspx) says :

> The scope of a local variable declared in a switch-block of a switch statement (Section 8.7.2) is the switch-block.

Also, a similar question has been asked before: [Variable declaration in c# switch statement](https://stackoverflow.com/questions/222601/variable-declaration-in-c-switch-statement)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-14T15:56:38.787

没有编译器错误，因为 switch 语句没有为变量创建新的范围。

如果您在开关内声明变量，则该变量与开关周围的代码块在同一范围内。要更改此行为，您需要添加 {}：

```
...
case 1:
    // Start a new variable scope 
    {
        string x = "SomeString";
        ...
    }
    break;
case 2:
    {
        x = "SomeOtherString";
        ...
    }
    break;
... 
```

这将导致编译器抱怨。但是， switch 本身并不在内部执行此操作，因此您的代码中没有错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T15:59:32.370

看起来变量的范围是在 switch 中，而不是 case，可能是因为 case 可以堆叠。请注意，如果您尝试在交换机之外引用 x ，它将失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T15:56:17.430

如果在 case 中创建任何局部变量，则不能在 case 之外使用它们。

```
...
int opt ;
switch(opt)
{
case 1:
{
   string x = "SomeString";
   ...
}
   break;
case 2:
{
   string x = "SomeOtherString";
   ...
}
   break;
default:
{
//your code
}
break;
}
... 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-14T15:52:59.500

move the string declaration to before the

```
switch(value) 
```

statement. Then assign x for each case.

# flash - See trace() of Flash when running in browser

> ID：864155
> 
> 赞同：28
> 
> 时间：2009-05-14T15:51:30.627
> 
> 标签：flash, actionscript, debugging, trace, browser-plugin

What's an easy way to see the `trace()` output of Flash/Flex movies when running in any browser?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-14T16:23:58.427

下载并安装[Flash Player 的内容调试器版本](http://www.adobe.com/support/flashplayer/debug_downloads.html)。

通过添加 mm.cfg 文件启用跟踪日志记录（[官方指南）：](http://kb2.adobe.com/cps/403/kb403009.html)

```
ErrorReportingEnable=1

    TraceOutputFileEnable=1 
```

mm.cfg 的保存位置取决于操作系统：

*   Mac OS X：`/Library/Application Support/Macromedia`
*   视窗：`%HOMEDRIVE%\%HOMEPATH%`
*   Linux：`/home/user name`

日志文件 flashlog.txt 位于：

*   视窗 95/98/ME/2000/XP：`C:\Documents and Settings\username\Application Data\Macromedia\Flash Player\Logs`
*   视窗：`C:\Users\username\AppData\Roaming\Macromedia\Flash Player\Logs`
*   Mac OS X：`/Users/username/Library/Preferences/Macromedia/Flash Player/Logs/`
*   Linux：`/home/username/.macromedia/Flash_Player/Logs/`

或者，您可以安装 Firefox 插件[FBTracer ，它在](http://blog.sephiroth.it/firefox-extensions/flash-tracer-for-firebug/)[Firebug](http://getfirebug.com/)面板中显示跟踪输出。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-19T14:39:01.783

我只是使用 console.log 功能（最近的浏览器实现了它）；

```
import flash.external.ExternalInterface;

public static function log(msg:String, caller:Object = null):void{
        var str:String = "";
        if(caller){
            str = getQualifiedClassName(caller);
            str += ":: ";
        }
        str += msg;
        trace(str);
        if(ExternalInterface.available){
            ExternalInterface.call("console.log", str);
        }
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-15T03:02:50.997

查看 De Monster 的 MonsterDebugger。您可以在一个可爱的 AIR 应用程序中调试跟踪对象、轨迹和显示链。使用起来非常有趣。而且它是开源的！

[http://demonsterdebugger.com/](http://demonsterdebugger.com/)

您还可以将 Flash 和 Flex 配置为写入日志文件。在此处查看如何执行此操作：

[http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html)

我最近一直在使用 Monster，但我曾经有一个别名在 flashlog 文件上运行 unix“tail”，这将有效地为我提供一个用于“in browser”跟踪的日志窗口：

```
alias flashlog='tail -f /PATH/TO/flashlog.txt' 
```

或者，如果您有日志查看器（如 Mac OS 上的控制台），您可以在那里查看日志。我建议这些选项的唯一原因是 FlashTracer 非常“笨拙”；）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-04-15T20:42:30.357

如果您想要一个基本的日志文件查看器，Vizzy 会让生活变得更轻松。您只需安装调试播放器，然后安装 Vizzy。它是一个尾随 flashlog 文件的窗口。甜蜜的是，它为您完成了所有 mm.cfg 文件 bs。

[http://code.google.com/p/flash-tracer/](http://code.google.com/p/flash-tracer/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-15T03:18:57.947

可能不像其他人那样花哨或尖端，但我曾经在 Flash 电影中创建自己的日志函数（很有趣，称为 log），它调用 trace 并在页面上调用 js 函数（使用任何你喜欢的方法）。页面上的函数只是一个简单的带有 Firebug 的 console.log()。简单而有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-22T10:28:46.960

我是一个快乐的[Thunderbolt](http://code.google.com/p/flash-thunderbolt/)用户，也许它也值得一看（多个日志级别，开箱即用的 firebug 玩得很好）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-20T23:34:20.370

Unix's [`tail` command](http://en.wikipedia.org/wiki/Tail_%28Unix%29) works well for me:

`tail -f ~/Library/Preferences/Macromedia/Flash\ Player/Logs/flashlog.txt`

The `-f` switch keeps the log open and tails it via stdout into an open Terminal window. This is a Mac solution, I'm not sure what the Windows `tail` equivalent is.

Note that path is based on [this document](http://helpx.adobe.com/flash-player/kb/configure-debugger-version-flash-player.html), posted above by @Jarvis.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-26T05:59:44.510

由于adobe收购了macromedia，我认为它应该是'D：\Documents and Settings\user_name\Application Data\Adobe\Flash Player\Logs\flashlog.txt'。这对我来说损失了几分钟。最后我决定尝试查看 D:\Documents and Settings\user_name\Application Data\Macromedia\Flash Player\Logs\flashlog.txt 和宾果游戏，我可以看到 flash trace() 输出。

我想知道为什么 adobe 仍然将日志文件位置保留在 macromedia 文件夹中。无论是什么，我都可以看到 flash 应用程序的跟踪输出在浏览器中运行，我是一个快乐的人 :)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-07-15T08:56:01.397

在 Windows 中，如果您使用操作系统的本地化版本（即西班牙语），“应用程序数据”必须替换为本地化版本（即“Datos de programa”）

# objective-c - [[NSScreen mainScreen] visibleFrame] 在什么情况下会返回 null？

> ID：864157
> 
> 赞同：2
> 
> 时间：2009-05-14T15:51:38.690
> 
> 标签：objective-c, cocoa

我想获得主屏幕的尺寸，所以我使用这个片段：

```
NSLog(@"mainScreen frame = %@", [[NSScreen mainScreen] visibleFrame]); 
```

正在打印

```
mainScreen frame = (null) 
```

早些时候它正在打印我的主显示器的预期尺寸。

有哪些可能的原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T16:07:49.527

这里的问题是你遇到了 Objective-C Cocoa 编程中相对少数的非对象之一。

“visibleFrame”的结果是一个 NSRect*结构*，而不是一个对象。要让它在 NSLog 行中有意义地显示，您必须执行以下操作：

```
NSString* frameAsString = NSStringFromRect([[NSScreen mainScreen] visibleFrame]);
NSLog(@"mainScreen frame = %@", frameAsString); 
```

有一些辅助函数可以将这些结构对象中的许多转换为字符串并返回，例如 NSStringFromPoint、NSStringFromRange 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T16:42:13.030

这方面的文档需要仔细阅读。正如 Apple 所定义的，“主屏幕”不一定是带有菜单栏的屏幕。“主屏幕”是接收键盘事件的屏幕。如果由于某种原因操作系统认为没有屏幕具有键盘焦点，那么我可以理解为什么 mainScreen 会返回 NULL。

要获得带有菜单栏的屏幕（原点位于 (0,0)），您需要使用：

```
[[NSScreen screens] objectAtIndex:0] 
```

我从来没有见过这个返回NULL，虽然我不会说它不会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:08:18.307

-visibleFrame 返回一个 NSRect 结构，而您对对象使用字符串说明符。您需要使用 NSStringFromRect() 函数（我相信它被调用）将矩形转换为 NSLog() 的字符串对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T13:10:10.523

您正在尝试记录一个对象，但该方法没有返回一个对象，而是返回一个结构。

尽管 NSStringFromRect 将帮助您进行日志记录，但您可能会在其他地方需要实际的整数。

您可以通过以下方式完成两者：

```
NSLog(@"screen is %.2f wide and %.2f high", [[[NSScreen screens]     
objectAtIndex:0] visibleFrame].size.width,  [[[NSScreen screens] 
objectAtIndex:0] visibleFrame].size.height); 
```

# javascript - Javascript Error: missing = in destructuring declaration

> ID：864158
> 
> 赞同：1
> 
> 时间：2009-05-14T15:51:48.223
> 
> 标签：javascript, emacs, js2-mode

I am getting a javascript error

> "missing = in destructuring declaration"

What could be the problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T17:46:32.393

这不是标准的 javascript 错误。它来自您的编辑器。您的 Emacs 编辑器必须使用[js2 模式](http://code.google.com/p/js2-mode/)（Javascript 模式）。这可能是 for 循环中缺少的等号。例子：

```
for(i 0; i < arr.length;i++); /* missing = in destructuring declaration */ 
```

但是，如果不查看您的代码，我们只能猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T14:43:44.127

我得到了错误分配（Python风格）的错误： var x,y = 2,3 ; 而不是：var x = 2, y = 3;

# sql - ACCESS SQL > SELECT CASE HELP

> ID：864159
> 
> 赞同：2
> 
> 时间：2009-05-14T15:51:49.017
> 
> 标签：sql, ms-access

I have a set of tables including Reps, Teams, Errors, Error Log. Error Log lists all errors made by a rep. Each rep is in a team. Each rep has an Edge ID (user number) Each different type of error has a points value (stored in the errors table).

I have this query in Access to total the points value for each rep in a team between two dates:

```
SELECT 
    Reps.Forename
    , Reps.Surname
    , [Error Log].[Edge ID]
    , Teams.[Team Code]
    , Sum(Errors.Points) AS SumOfPoints
FROM Teams 
    INNER JOIN (
        Reps INNER JOIN (
            Errors INNER JOIN [Error Log] 
                ON Errors.[E&CD code] = [Error Log].[E&CD Code]) 
            ON Reps.[Edge ID] = [Error Log].[Edge ID]) 
        ON Teams.[Team Code] = Reps.[Team Code]
WHERE 
    ((([Error Log].[Date Logged]) Between [Error logged from: (dd/mm/yyyy)] And [Error logged to: (dd/mm/yyyy)]) 
AND 
    ((Teams.[Team Code])=[Team Code:]))
GROUP BY 
    Reps.Forename
    , Reps.Surname
    , [Error Log].[Edge ID]
    , Teams.[Team Code]
ORDER BY 
    Sum(Errors.Points) DESC; 
```

I want to give each rep a grade dependant on their number of points, where: 0-4 points = grade 3, 5-9 = 4 and 10+ = 5

How can I code this (SELECT CASE perhaps)? I've been trying for the last hour but can't get it right!

Thanks for any help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T16:02:53.047

Access 不支持选择案例结构。相反，您需要使用[Switch](http://office.microsoft.com/en-us/access/HA012289181033.aspx)功能

```
Switch(SumOfPoints >= 10, 5, SumOfPoints >=5, 4, ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T16:01:14.033

我认为您可以使用`IIF( )`MS Access SQL 中的内联语句来获得相同的结果...

你可以试试

```
SELECT 
    Reps.Forename
    ...
    , Sum(Errors.Points) AS SumOfPoints
    , IIf(Sum(Errors.Points) > 5, "Super Star", "Dummy")
    ... and so on ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T19:15:28.623

您可能希望为成绩创建一个表格，以便您只维护表格而不是代码。加入你的分数。

分数 | 0、3 1、3 ... 10、5 年级

如果不在表中，则 = 5。

此外，可能有 StartScore、EndScore 和 Grade。开始和结束之间的任何分数都会获得成绩。

# oracle - 使用数据库的程序版本？

> ID：864172
> 
> 赞同：0
> 
> 时间：2009-05-14T15:53:40.167
> 
> 标签：oracle

除了 exe 名称之外，是否可以使用 Oracle 数据库获取有关该程序的更多信息？我想要 exe 版本号和/或哈希码或其他允许我唯一区分一个 exe 文件版本与另一个的东西。

我不需要在程序代码中找到这些信息，像 Toad och Sql Developer 这样的管理工具就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:00:11.790

您是否能够更改有问题的 exe-s（即在内部应用程序中）？

如果是这样，您可以使用 DBMS_APPLICATION_INFO 包设置版本号...

[http://www.orafaq.com/wiki/DBMS_APPLICATION_INFO](http://www.orafaq.com/wiki/DBMS_APPLICATION_INFO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T09:35:20.943

我知道可靠地获取所需信息的唯一方法是找到操作系统进程 ID (v$session)，然后使用 ps 或类似 taskmanager.exe 的东西从客户端系统操作系统获取详细信息。

这听起来很麻烦，但如果您对客户端应用程序的主机拥有足够的权限，则可以编写脚本。

# asp.net - 将我的 Web.Config appsettings 存储在单独的文件中时，是否总是需要 IIsreset？

> ID：864200
> 
> 赞同：2
> 
> 时间：2009-05-14T15:58:18.377
> 
> 标签：asp.net, iis, web-config, appsettings

我有一个 ASP.Net 应用程序，其中来自 Web.Config xml 的 AppSettings 节点存储在一个单独的文件中。

所以我的 Web.Config 包含这个：

```
<appSettings file="AppSettings.config" /> 
```

每当我更改其中的设置时，我都必须执行 iisreset 以强制更改生效。换句话说，我在此文件中的更改不会像对 Web.Config 的更改一样被检测到。

有谁知道我如何使这些更改自动生效，就像使用 Web.Config 一样？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T16:13:03.490

**编辑：**回应其他答案。您可以更改 machine.config 以包含 appSettings 的 restartOnExternalChanges="true" 选项；但是，当您触摸任何外部应用程序设置文件时，这将导致您的所有 Web 应用程序重新启动。（另外，我认为这可能只在您使用 configSource="file.name" 而不是 file="file.name" 时才有效。）

这是设计使然，导致应用程序重置的唯一方法是手动或通过脚本。

您可以在这里查看一个脚本，该脚本将在不重新启动 iis 的情况下重置您的应用程序：

[http://weblogs.asp.net/jgalloway/archive/2006/06/01/Avoid-IISRESET-in-ASP.NET-applications-_2800_added-bonus_3A00_-ASPRESET_2900_.aspx](http://weblogs.asp.net/jgalloway/archive/2006/06/01/Avoid-IISRESET-in-ASP.NET-applications-_2800_added-bonus_3A00_-ASPRESET_2900_.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-01-25T17:16:05.187

我知道这是一个旧线程，但要添加一些东西。

如果您使用：

```
<appSettings file="AppSettings.config" /> 
```

然后，在对 web.config 进行更改或执行重新启动之前，对外部文件的更改将不可用。

但是，如果您将其更改为：

```
<appSettings configSource="AppSettings.config" /> 
```

对这些设置的更改可以立即在您的代码中使用，而无需重新启动或更改 web.config。

我刚刚通过可重复测试验证了这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T16:09:14.327

在记事本中打开 web.config。保存。退出记事本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T16:42:35.480

您如何在代码中访问您的应用设置？我有一个外部 appsettings 文件（尽管我使用`configSource`属性而不是），并且在使用代码获取值`file`时，我所做的任何更改都可以立即使用。`ConfigurationManager.AppSettings("settingname")`

话虽如此，如果您确实出于其他原因需要重新启动应用程序，并且您可以访问服务器上的 machine.config 文件，则在 appSettings 部分的定义中，有一个名为的属性`RestartOnExternalChanges`可以设置为 true （默认为 false），然后我相信 appSettings 部分的行为会像您希望的那样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T16:11:41.030

您可以编写一个[filewatcher](http://www.codeproject.com/KB/files/C__FileWatcher.aspx)服务来监控您的自定义配置文件。当更改的事件在服务内执行时发出 iisrest 命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-21T17:42:06.770

如果您要改用[ConfigurationRedirection](http://www.iis.net/ConfigReference/configurationRedirection)（在 IIS 7 中引入），则可以将 IIS 配置为轮询外部配置文件的更改（从 IIS 7.5 开始）。不过，这将涵盖整个 .config 文件，而不仅仅是 appSettings 部分。

这允许您将配置设置存储在 Web 场中的所有 Web 服务器计算机都可以访问的 UNC 服务器上。

# c# - 为 WCF 应用程序设置凭据？

> ID：864202
> 
> 赞同：7
> 
> 时间：2009-05-14T15:58:32.667
> 
> 标签：c#, .net, wcf

我编写了一个简单的应用程序，它利用 WCF 在客户端和服务器之间进行通信。当我在本地运行它时它工作正常，但是当我在两个不同的盒子上运行服务器和客户端时，我得到以下异常：

```
Unexpected error occured, while getting the group names from the VDN server
System.ServiceModel.Security.SecurityNegotiationException: The server has rejected the client credentials.
System.Security.Authentication.InvalidCredentialException: The server has rejected the client credentials.
System.ComponentModel.Win32Exception: The logon attempt failed 
```

什么是不被接受的凭据？我该如何设置它们？

有没有办法将服务器配置为不需要身份验证？该应用程序是一个简单的监控应用程序，安全性并不是真正的问题。

**很抱歉不是很具体：** 该应用程序使用管道代理并且没有 wcf 配置文件，因为 wcf 代码是手动编码的。

我的 WCF 代码基于本教程中的代码： [http ://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)

在我写完所有代码之前，我不知道从配置生成 wcf 类是标准过程。现在，每当我查看教程/帮助文档时，他们都会使用生成的代码，并且一切都需要更改配置。

我没有足够的带宽（我已经在处理 3 个项目）来用一个使用生成的代码来替换我的 wcf 组件，但我会确保在下次使用 wcf 时使用代码生成。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T17:06:27.480

这是我在搜索禁用 wcf 安全/身份验证时找到的解决方案。

来自[MSDN](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/0aa606b7-171e-4c00-9dd6-6c635f96d906)：

```
WSHttpBinding b = new WSHttpBinding();

b.Security.Mode = SecurityMode.None; 
```

或在配置中添加以下内容：

```
<wsHttpBinding>

    <binding name="myBinding">

        <security mode="None" />

    </binding>

</wsHttpBinding> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-15T09:47:43.597

创建这样的方法...

```
void SetImpersonation(ref IServiceClient proxy)
{
  proxy.ClientCredentials.Windows.ClientCredential.Domain = "MYDOMAIN";
  proxy.ClientCredentials.Windows.ClientCredential.UserName = "A_USER";
  proxy.ClientCredentials.Windows.ClientCredential.Password = "P4SSW0RD";
} 
```

并在您创建新的客户端类时调用它。

```
IServiceClient proxy = new IServiceClient ();
SetImpersonation(ref proxy); 
```

显然，这是将信息设置为特定用户，并且如果您的代码被反编译，则具有安全隐患，但它应该适用于您的（无配置文件场景）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-03T18:11:24.863

如果您使用具有以下安全性的 WCF 绑定配置：

```
<transport clientCredentialType="Windows" /> 
```

那么您将需要在如下代码中创建的 WCF 实例上显式设置 Windows 凭据：

```
'Create an instance of the WCF service      
Dim MyService As New MyWCFServiceClient

'Build credentials object for which this WCF call will be made
MyService.ClientCredentials.Windows.ClientCredential = New System.Net.NetworkCredential("UserName", "Password", "DomainName")

'Call a method on the service
MyService.MyMethod1() 
```

# c++ - 程序结束后未释放的内存会怎样？

> ID：864204
> 
> 赞同：13
> 
> 时间：2009-05-14T15:58:57.720
> 
> 标签：c++, c, memory, operating-system

> **重复**：[当你在 malloc 之后不释放时，真的会发生什么？](https://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc)

比方说，例如：

```
int main()
{
  char* test = new char[50000];
  return 0;
} 
```

程序完成后分配的内存会发生什么？它会立即为其他应用程序释放吗？或者也许在一段时间后？或者它可能永远丢失在系统中？或者它是否被交换到磁盘永远不会返回到 RAM？或者也许是完全不同的东西？

我想知道主要的 3 个操作系统会发生什么：Windows（XP 及更高版本，如果有任何差异）、Linux、Mac OS X。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T16:02:12.910

请参阅：[当您在 malloc 之后不释放时，真正会发生什么？](https://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T16:10:36.587

在任何带有 MMU 的 O/S（包括 Unix、Linux、OSX 和 Windows NT 系列）上，该进程都有一个数据结构，用于为 MMU 设置页面映射。当进程终止时，该映射被释放，页面被添加到操作系统的空闲池中。

在非受保护内存的 O/S 平台（如 DOS 或某些实时操作系统）上，可能需要显式释放内存，如果没有正确整理，O/S 池可能会泄漏内存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T16:36:00.910

*所有那些时刻都会随着时间流逝……
就像雨中的眼泪——* *《银翼杀手》*
中的 罗伊·巴蒂

 *这在很大程度上取决于操作系统。大多数操作系统会为您释放内存，有些则不会。如果您现在为桌面操作系统开发，那么您可以确定内存将被释放。在嵌入式系统或移动电话中情况并非如此，在这种情况下，内存实际上会在操作系统下一次重新启动之前丢失。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T16:02:08.447

它消失了，就像操作系统清理它一样。程序要求的任何内存，操作系统都知道，因此当程序关闭时，它使用的任何内存都会被释放，并可供其他程序使用。我相信它会立即可用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T16:02:44.983

一旦使用它的进程完成，操作系统应该将其回收为系统内存。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-14T16:04:24.620

在 Windows 中，当程序关闭时，操作系统会释放内存。如果内存很大，可能需要一些时间。

据我所知，当我使用各种风格的 Unix 时，所有操作系统都是一样的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T16:05:59.123

答案当然取决于操作系统，但通常操作系统会在程序终止时清理并清除任何剩余的分配/映射内存。在 Linux 的情况下，清理将在进程终止（进入 Z 状态）之前完成。

# mysql - 是否值得改造一个电子商务网站以使用 mySQL 而不是 Access？

> ID：864205
> 
> 赞同：1
> 
> 时间：2009-05-14T15:59:01.450
> 
> 标签：mysql, performance, ms-access

我正在使用 Access 作为其数据库的 asp 网站上做一些工作。

最近，该站点一直出现无法解释的停机时间，我们想知道是否制作一个全新的站点，并使用 mySQL 切换到 PHP 是否会带来很大的性能提升。

这是一个相当繁忙的站点，一次最多可连接 80 人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T16:01:27.107

不可能明确地回答“是否值得”之类的问题。

但是，对于您的情况，我想说您需要做的第一件事是将“无法解释的停机时间”转变为“无法解释的停机时间”。找出导致问题的原因。如果事实证明这是服务器上的硬件错误，您将重写整个站点，它仍然会继续下降。

然后，如果您确定是 Access db 导致了问题，接下来我要做的就是将其转换到 MySQL，但将站点保留在 ASP 中。如果您只关心数据库，为什么还要考虑 PHP 重写？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T16:03:23.030

Access is intended for small workgroups. It only supports 2GB of data per database and isn't really designed for 80 concurrent users. I would strongly recommend switching a more robust RDBMS.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T16:01:11.443

当然好！它让我害怕这样一个网站正在运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T16:02:11.303

MySQL 提供比 Access 更好的性能。MySQL 能够处理比 Access 更多的并发连接。

看到 Access 处理 80 个连接，我感到很惊讶——我通常看到它在前十几个左右后就倒下了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T16:05:48.640

Another thing to worry about with Access is that because it was not designed to handle a lot of users at once efficiently, data corruption could rear it's ugly head. MySQL or SQL Server can handle a ton of users much better. However, I agree with Chad Birch that you should keep the site in ASP to avoid the headache of transitioning to PHP.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-14T16:01:31.943

我会说是的，它会的。我不认为访问真的旨在为数据驱动的网站提供动力，而且它也没有像 MySQL 或 SQL Server 这样的数据库引擎那么强大。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-14T16:01:45.203

我绝对会远离 Microsoft Access。随着时间的推移，我了解到网络用户的独占打开和间歇性锁定会导致 Access 不可用，并且没有好的解决方案可以解决这个问题。

根据我的经验，.mdb 文件因腐败而臭名昭著。

我使用 Access 作为可视化构建查询的前端工具，但从不用于存储库，除非它非常微不足道并且永远不会用于 Web 应用程序（无论如何，再也不会。）

我不知道 PHP 会帮助你。但是更改数据库*会对*您有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T16:14:15.173

SQL Server/Express would be a large improvement or just a SQL .mdf File if your provider doesn't have SQL Server.

# delphi - Delphi将richedit另存为excel

> ID：864208
> 
> 赞同：2
> 
> 时间：2009-05-14T16:00:00.043
> 
> 标签：delphi

您将如何将 TRichedit 文本保存到 Excel 文件中？

我的数据用垂直选项卡 #9 分隔，如果我将其保存到 .xls 中，它会打开，但我想省去用户在打开它后再次将其保存为 excel 的麻烦。

谢谢，戴夫阿尔伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T18:42:00.043

有很多方法可以做到这一点。您的问题对于您正在使用的数据类型不是很准确，因此您应该注意，除非您使用文本框，否则 Excel（特别是基于 Excel 版本）可能存在显示大量 RichEdit 数据的限制。既然你说你有数据分隔，我假设这实际上是一个类似表格的结构，它不包含图片等。根据该假设，您可以使用：

*   OpenOffice 作为 skamradt 提到的解决方案。您应该知道，它不是 ActiveX，而是使用 IMO，一个记录不充分的 OLE 接口。如果你这样做，你会发现[Andrew Pitonyak 的网站](http://www.pitonyak.org/oo.php)真的很有帮助。您还需要从 SourceForge 获取 Bernard Marcelly 的[Delphi OO 示例](http://sourceforge.net/project/showfiles.php?group_id=87718&package_id=133853)作为一个不错的起点。
*   使用 Excel 作为 OLE 自动化对象。有很多关于如何做到这一点的例子。一份可能与您想要的类似的指南在[这里](http://delphi.about.com/od/database/l/aa090903a.htm)。这可能是最简单的解决方案，因为您可以通过自动化打开选项卡式数据，然后执行另存为。
*   使用 RichEdit 以外的其他东西。例如，DevExpress 有一个带有 Excel 转换器的网格产品。Excel 是某些类型组件的常见目标，尤其是在购买的软件包中，但我不确定这是否适合您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:21:30.147

我会考虑使用[office open xml 格式](http://en.wikipedia.org/wiki/Office_Open_XML)。它也很容易编程，并且可以让您最大程度地控制您的输出。[OpenXML Developer](http://openxmldeveloper.org/)网站是一个很好的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T22:08:55.227

我不会**使用**xls 文件扩展名保存制表符分隔的文本 - 那是一个混乱。

我发现以逗号分隔的格式保存表格数据效果很好，并且经常出于以下原因使用此解决方案：

*   如果安装了 Excel，通常会关联 .csv 文件扩展名，因此双击可以正常工作，而不会“伪造”文件扩展名
*   如果 Excel 未安装或未与 .csv 关联，则用户可能有另一个与 .csv 扩展名关联的程序，此解决方案仍然有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T06:39:35.640

Have a look at the XLSReadWrite component ([http://www.axolot.com/components/xlsrwii20.htm](http://www.axolot.com/components/xlsrwii20.htm)). It provides an API where you can save directly to xls files without the need for an excel installation or any external dependencies.

# javascript - Internet Explorer 的“自动完成”功能不会触发 JavaScript 事件

> ID：864212
> 
> 赞同：0
> 
> 时间：2009-05-14T16:00:39.747
> 
> 标签：javascript

我有一个 .ASP 页面，它使用“onChange”事件来触发数据库查找信息。（输入代码后，系统验证代码并在其旁边放置描述。IE GP1234 返回 GP1234-Rubber Duck 或 GP1234-无效代码）。我遇到的问题是，我的激活自动完成功能的用户会获得以前使用过的代码列表。如果他们使用列表中的代码之一，则输入数据，但不会触发事件来引导页面验证数据。我尝试过 OnChasnge、OnBlur 和 onMouseOut。
有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T16:09:27.773

这篇[文章](http://jehiah.cz/archive/onchange-and-autocomplete)可能有点用。这个[SO 线程](https://stackoverflow.com/questions/343192/why-does-the-javascript-onchange-event-not-fire-if-autocomplete-is-on)也可能有所帮助。

# jquery - jquery鼠标悬停问题

> ID：864219
> 
> 赞同：0
> 
> 时间：2009-05-14T16:01:52.520
> 
> 标签：jquery, this, mouseover

我有这个代码：

```
$("div[id^='intCell']").mouseover(function() {
    $(this).css({ "border:","1px solid #ff097c"});
}).mouseout(function() {
    $(this).css({"border:","1px solid #000"});
}) 
```

但我无法让它工作！在 html 中有一个由 php 生成的具有 intCell_1、intCell_2 等 id 的 div 列表。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:06:36.393

**更新：**

您可以使用命令“hover”代替“mouseover”和mouseout”，并在属性选择器中使用星号：

例子：

```
$("div[id*='intCell']").hover(function() {
 $(this).css({border:"1px solid #ff097c"});
},
function() {
 $(this).css({border:"1px solid #000000"});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:20:18.060

您的 CSS 对象文字语法不正确！

它应该是：

```
$("div[id^='intCell']").mouseover(function() {
        $(this).css({ "border": "1px solid #ff097c"}); // <-- This syntax was wrong
}).mouseout(function() {
        $(this).css({"border": "1px solid #000"}); // <-- This syntax was wrong
}) 
```

工作示例： http: [//jsbin.com/iyoba](http://jsbin.com/iyoba)（可通过[http://jsbin.com/iyoba/edit](http://jsbin.com/iyoba/edit)编辑）

# database-design - 项目的单个实例还是项目的多个实例？

> ID：864220
> 
> 赞同：0
> 
> 时间：2009-05-14T16:01:52.753
> 
> 标签：database-design, web-applications

我想创建一个业务目录项目。我想用这个项目做两个生意，第一个是为餐厅定制的，第二个是为玩具店定制的。在定制方面，每个业务项目都会有自己的域名、配置设置、前端模板和语言文件。

我应该将 Web 应用程序设计为使用一个数据库运行，还是每个 Web 应用程序都有自己的数据库？我需要知道什么来帮助我做出这个决定？每个决定的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T16:10:27.600

如果某些数据仅与单个站点相关，则单独的数据库将使您的查询更简单。根据您的描述，玩具店目录数据似乎与餐厅数据不同。在这种情况下，如果您使用单个数据库，您将需要使用某种站点 ID 来识别记录。然后，您必须在大多数查询中添加“where site_id=x”。

我能想到的单一数据库的唯一优点是，每当您更改架构时，升级数据库会更容易。

# eclipse - Eclipse RCP 应用程序 - 以编程方式创建窗口

> ID：864224
> 
> 赞同：3
> 
> 时间：2009-05-14T16:02:33.407
> 
> 标签：eclipse, eclipse-rcp, rcp

在 RCP 应用程序中，如何以编程方式定义和打开新窗口？我想打开几个窗口 - 每个窗口显示不同的数据。如何为每个窗口设置不同的输入？

我想模拟 Eclipse IDE 的相同功能（窗口 --> 新窗口），但我希望每个新打开的窗口都有不同的输入。我正在尝试使用： IWorkbenchPage newPage = window.openPage(inputObject); 如何以编程方式定义标识窗口中显示的数据的“inputObject”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T23:19:11.913

Eclipse 术语中的工作台窗口是一个通常包含菜单、工具栏、编辑器区域和视图的窗口。Eclipse RCP 应用程序通常包含一个窗口，但有些应用程序允许创建多个窗口。例如，在 Eclipse IDE 中，可以通过从窗口菜单中选择“新窗口”来打开另一个窗口。透视图可以独立设置到每个窗口中。

尽管多个窗口可能会令人困惑，但它们也非常有用。例如，如果用户可能在两个不同的数据源上工作，但针对每个数据源打开了多个编辑器和视图，那么打开两个窗口会很有用。通过打开 RCP 应用程序的两个实例可以实现相同的效果。但是，这需要加载多个代码副本和其他资源，需要为每个数据源对应用程序进行完全初始化，并且会使窗口之间的交叉通信更加困难。

要允许 RCP 应用程序的用户打开另一个窗口，您有两个选择。

您可以在 RCP 应用程序中包含“新窗口”菜单项。这可以通过将工作台提供的操作添加到您的 RCP 应用程序来完成。修改您的 ActionBarAdvisor 类：

添加到字段声明：

```
private IWorkbenchAction newWindowAction; 
```

添加到您进行操作的代码中（通常是一个名为 makeActions 的方法）：

```
newWindowAction = ActionFactory.OPEN_NEW_WINDOW.create(window);
register(newWindowAction); 
```

添加到创建菜单的代码中：

menu.add(newWindowAction);

其中 menu 通常是 Window 菜单。如果您的应用程序中还没有 Window 菜单并且想要创建一个，则以下行将起作用：

MenuManager menu = new MenuManager("&Window", IWorkbenchActionConstants.M_WINDOW);

这将为您提供一个菜单项，该菜单项将以与 Eclipse IDE 中的 Window->New Window 菜单项相同的方式创建一个新窗口。

但是，这无法控制输入。第二个窗口可能打开了一组不同的视图和编辑器，并且可能有不同的透视图集，但它仍然具有相同的“输入”。例如，在 Eclipse IDE 中，您可以打开第二个窗口，但如果您切换工作区，那么这将适用于所有窗口。

创建新窗口的第二种方法是通过创建页面以编程方式进行。这允许您为窗口设置“输入”。因此，在一个窗口中打开视图可能会导致显示与在另一个窗口中打开相同视图不同的数据。

从技术上讲，窗口没有输入。页面有输入。一个窗口最多可以包含一页。从某些方法名称看来，一个窗口可以有多个页面（例如 getActivePage 暗示有非活动页面）。这些方法名称是 Eclipse 2.0 支持多个页面时的保留。

以编程方式打开新页面：

```
 IWorkbenchPage newPage = window.openPage(myInput); 
```

如果窗口尚未包含页面，此方法将在给定窗口中创建一个新页面，否则将创建一个新窗口来包含该页面。

如果您支持具有不同输入的多个窗口，那么您应该在每个窗口中设置一个标题来区分每个窗口：

```
 newPage.getWorkbenchWindow().getShell().setText("My App - " + myInput.getName()); 
```

在某些情况下，您可能希望将输入更改为窗口。您无法更改页面的输入，因此您必须通过关闭现有页面并创建新页面来执行此操作。以下代码将关闭现有页面：

```
 IWorkbenchPage activePage = window.getActivePage();
        activePage.close(); 
```

请注意，Eclipse 提供的某些视图使用页面输入。例如，Common Navigator 视图将使用页面输入作为导航树的根元素。

要从您自己的视图访问页面输入，您可以调用`site.getPage().getInput()`. 如果您没有要开始的站点上下文，则调用以下命令将为您获取输入：

PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getInput();

请注意，“输入”是一个对象。它可以是您喜欢的任何类的对象。当您从 中取回它时`Page::getInput()`，将其转换回适当的类。您通常不应该创建一个新类作为输入。您几乎总是可以使用现有的类。这通常是对象模型的顶级对象。Eclipse 框架对此输入不做任何事情，除了存储它并在`Page::getInput()`调用时将其传回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T20:08:39.930

您需要了解如何在 Eclipse 插件模型中实现视图。这可以通过添加扩展点和配置属性或通过代码来实现。配置属性是首选方法。两者都在以下位置进行了解释：

[http://www.vogella.de/articles/RichClientPlatform/article.html#views](http://www.vogella.de/articles/RichClientPlatform/article.html#views)

该站点有很多关于 Eclipse 开发的好文章：

[http://www.vogella.de/eclipse.html](http://www.vogella.de/eclipse.html)

无论如何，正如 PSU_Kardi 建议的那样，通读整篇文章是个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:10:57.427

我认为您需要更好地为我或其他人定义一个“窗口”来回答这个问题。

您是否正在创建一个想要多次打开的插件，在这种情况下，您可能需要一个编辑器并且需要确保您没有使用单例模式——您可以在清单文件中指定该模式。

或者您是否正在尝试创建一个要显示数据的窗口？喜欢视图？如果您这样做，您将需要阅读有关如何创建 ViewPart 并确保正确扩展所有内容。

我可以建议去我最喜欢的两个 RCP 站点吗

[http://www.vogella.de/articles/RichClientPlatform/article.html](http://www.vogella.de/articles/RichClientPlatform/article.html)

[http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/CatalogSWT-JFace-Eclipse.htm](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/CatalogSWT-JFace-Eclipse.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T17:30:02.113

你应该确保你真的想打开一堆其他的窗口。也许您可以通过在现有窗口中打开一些新视图或编辑器来实现相同的目的？使用多个视图通常更容易让用户理解，因为它们没有呈现几个看起来几乎相同的窗口。它还使您更容易显示视图之间的关系。

话虽如此，您可以调用`IWorkbench.openWorkbenchWindow`创建一个全新的窗口。一个很好的例子是 Window --> New Window 的代码，它位于[OpenNewWindowMenu](http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.ui.workbench/Eclipse%20UI/org/eclipse/ui/actions/OpenNewWindowMenu.java?revision=1.12&view=markup)中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-24T17:56:36.290

以下处理程序 - 每次调用其 @Execute 方法时 - 创建一个新的 TrimmedWindow ，其数据内容彼此独立：

```
package com.vogella.tasks.ui.handlers;

import org.eclipse.e4.core.di.annotations.Execute;
import org.eclipse.e4.ui.model.application.MApplication;
import org.eclipse.e4.ui.model.application.ui.MUIElement;
import org.eclipse.e4.ui.model.application.ui.basic.MPart;
import org.eclipse.e4.ui.model.application.ui.basic.MWindow;
import org.eclipse.e4.ui.model.application.ui.basic.impl.TrimmedWindowImpl;
import org.eclipse.e4.ui.workbench.modeling.EModelService;
import org.eclipse.e4.ui.workbench.modeling.EPartService;
import org.eclipse.e4.ui.workbench.modeling.EPartService.PartState;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.WorkbenchException;

import com.vogella.tasks.ui.parts.DynamicPart;

public class OpenAdditionalWindowHandler {
    private static final String PART_DESCRIPTOR_ID = "com.vogella.tasks.ui.partdescriptor.static.part";
    static int posX = 20;
    static int posY = 20;
    static int counter = 0;

    /**
     * Opens a new TrimmedWindow based on the (template) definition. Each time invoked a separate window is opened with independent data content.
     */
    @Execute
    public void execute(EPartService partService, MWindow window, MApplication application, EModelService modelService) throws WorkbenchException {

        // Get the predefined TrimmedWindow and clone it
        MUIElement element = modelService.find("com.vogella.tasks.ui.trimmedwindow.zusatz", application);
        TrimmedWindowImpl clonedWindow = (TrimmedWindowImpl) modelService.cloneElement(element, application);
        application.getChildren().add(clonedWindow);
        modelService.bringToTop(clonedWindow);
        clonedWindow.setToBeRendered(true);

        // Shift the new windows a little bit each time a new one is created
        shiftWindowPositionSoTheyDontExactlyOverlay(clonedWindow);

        // Derive new Part Descriptor Id with counter & create new part
        final String dynamicallyCreatedPartId = PART_DESCRIPTOR_ID + counter++;
        MPart dynamicallyCreatedPart = partService.createPart(PART_DESCRIPTOR_ID);

        if (dynamicallyCreatedPart != null) {
            // Add the part to the newly cloned trimmed window
            clonedWindow.getChildren().add(dynamicallyCreatedPart);

            dynamicallyCreatedPart.setElementId(dynamicallyCreatedPartId);
            dynamicallyCreatedPart.setLabel("My part nbr " + counter);

            final DynamicPart staticPseudoAspect = (DynamicPart) dynamicallyCreatedPart.getObject();
            staticPseudoAspect.setContent("Dynamic part content nbr " + counter);
            clonedWindow.getChildren().get(0).setVisible(true);
            clonedWindow.getChildren().get(0).setToBeRendered(true);

        }

    }

    private void shiftWindowPositionSoTheyDontExactlyOverlay(TrimmedWindowImpl clonedWindow) {
        posX = posX + 20;
        posY = posY + 20;
        clonedWindow.setX(posX);
        clonedWindow.setY(posY);
    }

} 
```

Trimmed 窗口在应用程序模型中定义为模板。与应用模型中以 PartDescriptor 形式描述的 Part 相同。

[在此处输入图像描述](https://i.stack.imgur.com/dIEKg.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-24T18:02:21.393

这会在主应用程序窗口旁边打开一个新窗口：

```
package any.pack;

import org.eclipse.e4.ui.model.application.MApplication;
import org.eclipse.e4.ui.model.application.ui.basic.MTrimmedWindow;
import org.eclipse.e4.ui.model.application.ui.basic.MWindow;
import org.eclipse.e4.ui.model.application.ui.basic.impl.PartImpl;
import org.eclipse.e4.ui.model.application.ui.basic.MPartStack;
import org.eclipse.e4.ui.workbench.IPresentationEngine;
import org.eclipse.e4.ui.workbench.modeling.EModelService;
import org.eclipse.swt.SWT;

public class WindowOpener {

    private MWindow createWindow(EModelService modelService, MApplication application) {
        MWindow window = modelService.createModelElement(MTrimmedWindow.class);
        window.setElementId("com.ubs.cqe.ui.window.aside.1");
        window.setLabel("Second Window");
        window.getPersistedState().put(IPresentationEngine.STYLE_OVERRIDE_KEY, "" + SWT.SHELL_TRIM);
        window.setVisible(true);
        window.setX(20);
        window.setY(20);
        window.setWidget(700);
        window.setHeight(500);
        application.getChildren().add(window); // Add window to application
        return window;
    }

} 
```

# c# - C# 3.0：在域中查找 SMTP 服务器

> ID：864232
> 
> 赞同：1
> 
> 时间：2009-05-14T16:03:32.470
> 
> 标签：c#, .net, active-directory, smtp, directoryservices

我正在使用 C# 3.0 和`System.DirectoryServices`命名空间（不是`System.DirectoryServices.AccountManagement`.NET 3.5 的较新命名空间）。如何找到本地域中的所有 SMTP 服务器？这甚至可能吗？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T16:28:22.190

另一种方法是执行 DNS MX（邮件交换记录）查询以查找给定域的 SMTP 服务器：

[**代码项目示例**](http://www.codeproject.com/KB/IP/dnslookupdotnet.aspx)

[**Egghead 示例**（抱歉，找不到原帖）](http://www.eggheadcafe.com/articles/20050129.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:14:15.517

我怀疑域服务器是否*明确*发布了它们是 SMTP 服务器的事实（我可能错了），尽管解决方案应该非常简单。

*   查找活动域中的每台服务器。
*   尝试通过端口 25 (SMTP) 连接到服务器。
*   等待`220`响应，这表明服务器已准备好。（有关协议，请参阅[RFC 文档](http://www.ietf.org/rfc/rfc0821.txt)。）如果您在连接后的某个时间（例如 3 秒）内收到此命令，则可以断定当前计算机是 SMTP 服务器。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T16:09:11.037

我不认为您可以使用 DirectoryServices 做到这一点。

一种选择是尝试通过 SMTP 端口 (25) 连接到域上的每个服务器，并查看它们是否响应标准 SMTP 命令。如果您有域中的机器列表，则可以使用 TcpClient 类轻松完成此操作。

当然，这不会找到不使用标准端口的服务器（但如果服务器不使用标准端口，它可能一开始就没有兴趣找到 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:58:28.843

根据 Noldorin 的建议，这里有一些代码，注意我只是在 25 上连接，我不是在等待来自服务器的 220。这适用于我们的域。这是基于 LDAP 路径获取服务器名称的残酷正则表达式。

```
static void Main()
        {

             DirectorySearcher ds = new DirectorySearcher("");
             ds.Filter = "objectCategory=computer";
             SearchResultCollection results = ds.FindAll();
             foreach (SearchResult result in results)
             {
                 string pattern = @"(?<=LDAP://CN=)(?<serverName>\w*)(?=,*)";
                 Match m = Regex.Match(result.Path, pattern);
                 string serverName = m.Groups["serverName"].Value;

                 System.Net.Sockets.TcpClient tcp = new System.Net.Sockets.TcpClient();
                 try
                 {
                     tcp.Connect(serverName, 25);

                     if (tcp.Connected)
                     {
                         Console.WriteLine(String.Format("Connected to {0} on Port 25", serverName));
                     }
                 }

                 catch (Exception ex)
                 {
                     Console.WriteLine("Exception: " + ex.Message);
                 }

                 finally
                 {
                     tcp.Close();
                 }

             }

             Console.WriteLine("Done.");
             Console.ReadLine();
} 
```

另外，我认为 FindAll 受到通常的 AD 约束，即 1000 results ，因此如果您的域中有超过 1000 台服务器，则可能需要返工

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:38:13.287

如果您想查找某个域的邮件服务器以便将邮件发送到该域，那么使用 DNS MX 是可行的方法，正如 mjmarh 已经建议的那样。如果您想使用 AD 识别域中的所有任意 SMTP 服务，那么您可以利用大多数 SMTP 服务器将在 AD 中注册自己的事实，例如 Exchange，您可以询问 AD 服务以找出它们的位置。例如，本白皮书解释了 Outlook 客户端如何使用 Active Directory 发现他们的邮箱服务器：[http://technet.microsoft.com/en-us/library/bb332063.aspx](http://technet.microsoft.com/en-us/library/bb332063.aspx) 在某些域上，对所有机器进行端口扫描将点亮任何他们拥有像圣诞树一样的入侵检测机制，您最终可能会关闭您的应用程序网络地址。

# javascript - 检索 cookie 值并更改元素样式

> ID：864235
> 
> 赞同：1
> 
> 时间：2009-05-14T16:03:48.973
> 
> 标签：javascript, html, css, cookies

我有一个设置为 yab_uploadmode 的 cookie，它的数值范围为 1-4 和 4 个名为 btn1、btn2、btn3 和 btn4 的 div 元素，

如何在不使用任何框架的情况下检索 cookie 的值并将样式应用于该特定元素。

非常感谢你。

问候，

什尚特·托迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:09:34.810

```
function getCookie(N){
   if(N=(new RegExp(';\\s*'+N+'=([^;]*)')).exec(';'+document.cookie+';'))
      return N[1]
} 
```

我们将使用上述函数来获取 cookie 值。

```
window.onload=function(){
   var element, cookie = getCookie('yab_uploadmode');
   if(cookie && (element = document.getElementById('btn'+cookie))){
      //element.className = 'newClass'; // you can change the class...
      element.style.color='red'; // ... or a single property
   }
} 
```

如果您不喜欢使用 window.onload 属性，请改用[addEvent 函数](https://stackoverflow.com/questions/854772/onclick-without-jquery/854819#854819)。

# c# - 如何将泛型类型与其默认值进行比较？

> ID：864243
> 
> 赞同：46
> 
> 时间：2009-05-14T16:07:25.953
> 
> 标签：c#, .net, generics

```
void Get<T>(Action<T> createObject)
{
    T obj = createObject();
    if(obj == default(T))
        return obj;

    // .. do a bunch of stuff
    return obj;
} 
```

编译器错误：运算符“==”不能应用于“T”和“T”类型的操作数

我该如何正确地做到这一点？

# .net - 从 System.Text.Encoding.Unicode.GetString 获取空终止字符串

> ID：864246
> 
> 赞同：15
> 
> 时间：2009-05-14T16:07:45.827
> 
> 标签：.net, encoding, bytearray, getstring

我有一个从外部实体接收到的字节数组。它是一个固定大小。字节包含一个 unicode 字符串，用 0 值填充缓冲区的其余部分：

所以字节可能是：

```
H \0 E \0 L \0 L \0 \0 \0 \0 \0 \0 ... etc 
```

我正在获取该缓冲区并将其转换为如下字符串：

```
byte[] buffer = new byte[buffSize];
m_dataStream.Read(buffer, 0, buffSize);
String cmd = System.Text.Encoding.Unicode.GetString(buffer); 
```

我得到的是一个看起来像这样的字符串：

```
"HELLO\0\0\0\0\0\0\0\0..." 
```

如何告诉 GetString 在第一个 Unicode null 处终止字符串（即，我只返回“HELLO”）？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-14T16:11:47.160

如果你确定其余的都是 \0，这会起作用：

```
cmd = cmd.TrimEnd('\0'); 
```

否则，如果您只想在第一个 null 之前获取所有内容：

```
int index = cmd.IndexOf('\0');
if (index >= 0)
   cmd = cmd.Remove(index); 
```

请注意，这`Unicode.GetString`将处理双 \0。你应该只寻找一个\0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-23T10:07:10.643

对于 UTF8/ASCII 编码，您可以通过查找缓冲区中第一次出现的空终止符（使用`System.Array.IndexOf`）来实现此目的，而无需重新处理字符串。然后，您可以使用重载`System.Text.Encoding.Unicode.GetString`方法创建一个字符串，直到给定缓冲区大小。

下面的示例还适用于不包含空字节的缓冲区：

```
byte[] buffer = new byte[buffSize];
m_dataStream.Read(buffer, 0, buffSize);
var size = System.Array.IndexOf(buffer, (byte)0);
String cmd = System.Text.Encoding.Unicode.GetString(buffer, 0, size < 0 ? buffSize : size); 
```

对于 UTF16，您可以使用带有 for 循环的类似方法（寻找第一对空字符 ... 例如`if (buffer[i] == (byte)0 && buffer[i] == buffer[i+1])`.

如果创建临时字符串无关紧要，那么接受的答案是最好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T16:15:42.643

如前所述，最简单的方法是在转换后修剪字符串。

如果您事先知道字符数，则可以使用 GetString 重载，该重载采用起始索引和字节数，以获得正确的字符串，而无需修剪。

如果您事先不知道字符数，并且想避免事后修剪字符串，则需要先修剪字节数组，因此您只传递您感兴趣的字节。对于 Unicode，这意味着删除任何字节在并包括第一对零之后。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-05-25T12:02:28.483

您可以从 Stream.Read() 中获取长度。在这种情况下，流中的 \0 将不被计算在内，您将获得 5 的长度。然后您可以使用 Encoding.UTF8.GetString 按长度修剪字符串。

```
int length = peerStream.Read(buffer, 0, buffer.Length);
receive = Encoding.UTF8.GetString(buffer, 0, length); 
```

# c++ - 在 C++ 中将 Double 转换为字符串

> ID：864250
> 
> 赞同：10
> 
> 时间：2009-05-14T16:08:13.660
> 
> 标签：c++, string, double

我在尝试将双精度转换为 C++ 字符串时遇到一些问题。这是我的代码

```
std::string doubleToString(double val)
{
    std::ostringstream out;
    out << val;
    return out.str();
} 
```

我遇到的问题是，是否将双精度作为“10000000”传入。那么返回的字符串值为 1e+007

我怎样才能得到字符串值为“10000000”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-14T16:10:11.983

```
#include <iomanip>
using namespace std;
// ...
out << fixed << val;
// ... 
```

您也可以考虑使用`setprecision`来设置小数位数：

```
out << fixed << setprecision(2) << val; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-14T16:12:39.840

```
#include <iomanip>

std::string doubleToString(double val)
{
   std::ostringstream out;
   out << std::fixed << val;
   return out.str();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T17:58:52.753

您还可以使用 STL IO 操纵器设置最小宽度和填充字符，例如：

```
out.width(9);
out.fill('');

```

# javascript - 打印时保持DIV的滚动位置

> ID：864258
> 
> 赞同：0
> 
> 时间：2009-05-14T16:09:19.943
> 
> 标签：javascript, html, css, printing

我想将可滚动的 div 打印为所见即所得。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T16:39:33.303

不是纯CSS，我不认为。我的...对单击打印按钮时发生的情况的解释是文档重新加载了该`media="print"`样式表或其他相关样式表，然后作为新文档发送到打印预览/打印机，所有内容都在默认值/开始该样式表中定义的位置。

由于我想不出使用css来定位滚动内容的方法，我不得不说这是不可能的。Javascript 几乎可以肯定是实现这一目标的方式。

...我可以问你为什么要这样做吗？这不是批评，我只是……不明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:45:23.490

我认为即使使用 javascript 也无法做到这一点。这与网络精神背道而驰。打印的文档*应该*看起来不同。

我怀疑当您在打印页面上看到滚动条时，这是在未来版本的浏览器中修复的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T17:31:25.373

尝试将以下内容添加到 @media-print 以在打印期间保持滚动。这对我有用：

```
.className{
    overflow: scroll;
} 
```

# bash - 如何通过精确搜索而不是前缀来访问 bash 历史记录？

> ID：864267
> 
> 赞同：2
> 
> 时间：2009-05-14T16:10:55.633
> 
> 标签：bash, unix

我有两个经常执行的命令。假设第一个是“abcd”，第二个是“abc”。所以我的历史包含

```
1000 abc arg1 arg2 arg3
1001 abcd arg1 arg2 arg3 
```

现在，如果我输入`!abcd`bash，它会执行 abcd 命令。这很好。但是如果我输入`!abc`bash，它也会执行最后一个 abcd 命令（因为它与开头匹配并且是*"newer"*）

如何使用 bash 历史记录来获取最后一个 abc 命令？我已经尝试过`!'abc '`反斜杠`"!abc\ "`空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T16:19:05.223

您可以尝试反向历史搜索：Ctrl-R。在出现的提示中，输入部分命令行（增量文本搜索）。

如果要切换到上一个匹配项，请再键入一些 Ctrl-R。

在您的“两条相似线”的情况下，

```
Ctrl-R abc Ctrl-R 
```

或者

```
Ctrl-R abc<SPACE> 
```

可能会这样做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T20:42:54.200

由于 Bash 使用 readline，请尝试将其添加到`~/.inputrc`并重新启动 Bash：

```
"\e[5~": history-search-backward
"\e[6~": history-search-forward 
```

这让您只需键入

```
$ abc <PgUp> 
```

检索以 . 开头的历史记录中的最后一项`"abc "`。

有人提议`/etc/inputrc`在一些流行的 Linux 发行版中将这些绑定添加到默认值……我不记得它是什么了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T17:09:10.267

这并不能直接回答您的问题，但如果您经常执行这些命令，您可能会考虑将别名或函数定义添加到相应的登录点文件中，以便您可以使用 1 个字母的命令执行它们：

```
alias a="abc arg1 arg2 arg3"
alias b="abcd arg1 arg2 arg3" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T16:19:38.983

如果你知道历史编号，你可以

```
!1000 
```

或使用

```
!-2 
```

参考前一行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T16:20:40.867

完成您所要求的一种方法是使用 bash 中的历史搜索功能。使用 emacs 键绑定（默认），您可以按`CTRL-r`. 使用 vi 键绑定使用`ESC /`. 这也可以让您搜索命令的其他部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-14T17:01:01.380

尝试：

```
!?abc ? 
```

这是第二个问号之前的空格。请注意，这（！？）会`<space>`在命令行的任何位置找到“abc”，而不仅仅是在开头作为“！” 将。第二个问号表示字符串后面可能有其他文本（例如，您的参数）以及分隔空格字符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-14T20:54:21.757

如果你想把骗子排除在你的历史之外，把它放在你的 bash 启动中（.bash_profile 或 .bashrc）

```
export HISTCONTROL="ignoredups" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-03T13:45:53.677

您可能想尝试[https://github.com/dvorka/hstr](https://github.com/dvorka/hstr)，它允许使用（可选）基于度量的排序对 Bash 历史进行“建议框样式”过滤，即它在向前和向后方向上都更加高效和快速：

![在此处输入图像描述](https://i.stack.imgur.com/LZ9jK.png)

它可以很容易地[绑定](https://github.com/dvorka/hstr/blob/master/CONFIGURATION.md)到`Ctrl-r`和/或`Ctrl-s`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-25T12:05:54.903

这里有很多好主意。我还想再加一个。为了通过 bash 历史搜索 (Ctrl-r) 更轻松地找到常用命令，我要做的一件事是在末尾添加 #useful 之类的注释，使其变为`echo I need this command or command sequence all the time #useful`. 然后我可以使用`Ctrl-r`#use循环浏览这些命令`Ctrl-r``Ctrl-r`...

# c# - 为什么这个事件日志的 EntryWritten 事件永远不会触发？

> ID：864273
> 
> 赞同：3
> 
> 时间：2009-05-14T16:11:42.107
> 
> 标签：c#, windows-services, event-log

我在 C# 控制台应用程序和 C# Windows 服务中都有以下代码。它适用于控制台应用程序。它拾取指定的事件，并正确调用 MatchEvent()。C# windows 服务中的相同代码不会获取相同的指定事件，它永远不会看到它，但会看到其他事件。有问题的事件被写入应用程序日志，因此我不尝试读取安全日志。

我认为这是一个帐户权限问题（该服务作为 LocalSystem 运行）。我将服务更改为使用与运行控制台应用程序相同的帐户，但我仍然看到相同的行为。我确认没有使用 GP 或自定义注册表来更改权限（这是一个全新安装的操作系统），并且两个应用程序使用的帐户都是本地管理员。

有什么我想念的吗？我也研究了 EventLogPermission，但这似乎并不适用，因为我正在从 eventLog 中获取事件。

编码：

```
private void WatchLogs()
{
    try
    {
        _eventLogs = EventLog.GetEventLogs();

        foreach (EventLog eventLog in _eventLogs)
        {
            if (eventLog.LogDisplayName.Contains("Security"))
            {
                _logger.DebugFormat(string.Format("{0}: not watching", eventLog.LogDisplayName));
            }
            else
            {
                eventLog.EntryWritten += EventLogEntryWritten;
                eventLog.EnableRaisingEvents = true;

                if (_logger.IsInfoEnabled)
                {
                    _logger.InfoFormat("Monitoring: {0} | Raising Events: {1}", eventLog.LogDisplayName,
                                       eventLog.EnableRaisingEvents);
                }
            }
        }
    }
    catch (Win32Exception ee)
    {
        _logger.DebugFormat(string.Format("{0}: not watching({1})", eventLog.LogDisplayName, ee.Message));
    }
    catch (SecurityException securityException)
    {
        _logger.ErrorFormat("Error accessing eventlog: {0} : {1}", eventLog.LogDisplayName, securityException.Message);
    }
}

private void EventLogEntryWritten(object sender, EntryWrittenEventArgs currentEvent)
{
  var log = (EventLog) sender;

  if (_logger.IsDebugEnabled)
    _logger.DebugFormat(
      "Event Raised: |Log:{0}|Source:{1}|EventID:{2}|",log.LogDisplayName,
        currentEvent.Entry.Source,currentEvent.Entry.EventID);

  MatchEvent(currentEvent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T20:00:57.507

断断续续地玩弄这个。尽管我仍然不能 100% 确定，但似乎正在发生以下情况：

*   这些事件是集群事件，因此可以从任一节点写入本地系统，但 EventLog 类仅获取本地写入的事件。
*   仅当最后一次写入事件至少发生 6 秒时，系统才会响应 WriteEntry() 方法。我正在寻找的事件发生在几秒钟内，并且被其他相关但不重要的事件所淹没。

对此的任何确认都会有所帮助。在此处获得的信息：[msdn](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entrywritten.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T06:32:27.917

是的，如果事件发生在轮询间隔内，您会错过事件。您可以使用 WMI（通过 System.Management）来更改轮询间隔。 [这](http://msdn.microsoft.com/en-us/magazine/cc302051.aspx)是一篇较旧的文章，但它将为您提供执行此操作所需的信息。请参阅管理事件部分。

您还需要在单独的线程上执行 WriteEntry（如果您也正在写入事件日志），因此您不会阻止接收事件。

# iphone - 如何创建具有多个“部分”的 UIBarButtonItem？

> ID：864275
> 
> 赞同：2
> 
> 时间：2009-05-14T16:11:52.370
> 
> 标签：iphone, objective-c, cocoa-touch

我想在我的 iPhone 应用程序上创建一个 UIBarButtonItem，它有两个“部分”。基本上，我希望拥有与 YouTube iPhone 应用程序的“观看次数最多”部分中的“今天”、“本周”和“全部”按钮等效的功能。

看起来这个功能不是通过多个 UIBarButtonItems 完成的，因为一次只能选择三个“部分”中的一个。有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T16:43:59.593

你看到的是一个 UISegmentedControl。这很容易设置。YouTube 正在做的事情（可能）是这样的：

```
NSArray * items = [[NSArray alloc] initWithObjects: NSLocalizedString(@"Today", @""),
                      NSLocalizedString(@"This Week", @""),
                      NSLocalizedString(@"All", @""), nil];
UISegmentedControl * switcher = [[UISegmentedControl alloc] initWithItems: items];
[items release];

// setup the switcher: correct UI style, tint, etc.
switcher.style = UISegmentedControlStyleBar;
switcher.tint = self.navigationController.navigationBar.tintColor; // unnecessary?

// set the target function -- needs to check selectedIndex property
[switcher addTarget: self 
             action: @selector(switcherTapped:)
   forControlEvents: UIControlEventValueChanged];

// set default selection
switcher.selectedSegmentIndex = 0;

// set the switcher as a custom view to use in place of the normal title
self.navigationItem.titleView = switcher;
[switcher release]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T16:47:20.023

实际上，我认为他正在描述一个 UISegmentedControl，它可以像这样添加到当前视图的导航栏：

```
UISegmentedControl *segmentedControl = ... 
self.navigationItem.titleView = segmentedControl; 
[segmentedControl release]; 
```

您可以像这样设置 UISegmentedControl ("Today, Last Week, All") 的段（这也设置了控件值更改时的回调）：

```
NSArray *sampleArray = --makeAnArrayHere--;
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] 
    initWithItems:sampleArray];
[segmentedControl addTarget:self action:
    @selector(segmentAction:) forControlEvents:UIControlEventValueChanged]; 
```

我没有从一个工作项目中复制这个，所以可能会有一些小的语法错误，但这应该会引导你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:38:20.077

查看 YouTube 应用程序，我认为您实际上会想要使用 UISegmentedControl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:14:03.987

您正在寻找的是`UITabBar`带有`UITabBarItem`s 的控件。

# .net - Silverlight 应用程序能否与本地 LDAP/ActiveDirectory 服务器进行身份验证

> ID：864277
> 
> 赞同：3
> 
> 时间：2009-05-14T16:12:37.720
> 
> 标签：.net, asp.net, silverlight, active-directory, ldap

如果我在防火墙外有一个外部托管的应用程序 (www.outside.com)，但公司内的用户希望能够针对他们的本地（防火墙后）AD 服务器（充当 LDAP）或其他 LDAP 服务器启用 LDAP 身份验证（称之为 ldap.inside.com），这将如何完成。

从技术上讲，当用户尝试通过客户端 silverlight 界面登录到 outside.com 时，SL 应用程序可以连接到 outside.com 登录服务并被告知针对 ldap.inside.com 对该用户进行身份验证，这在技术上是可行的. SL 应用程序将调用 ldap.inside.com 来验证用户。

当然，还有一个问题是如何安全地通知服务器客户端进行了身份验证……有人这样做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-04-07T03:32:59.033

我认为你最好的选择是利用 ASP.NET 的成员机制。这可以配置为针对 Active Directory。

以下链接讨论了如何将成员资格配置为 `Active Directory：http: [//msdn.microsoft.com/en-us/library/ms998360.aspx](http://msdn.microsoft.com/en-us/library/ms998360.aspx)

以下文章讨论了 Silverlight 中 ASP.NET 的成员资格和角色服务：http: [//blogs.msdn.com/brada/archive/2008/05/03/accessing-the-asp-net-authentication-profile-and-role-服务在silverlight.aspx](http://blogs.msdn.com/brada/archive/2008/05/03/accessing-the-asp-net-authentication-profile-and-role-service-in-silverlight.aspx)

此外，您可能希望查看最新版本的 RIA 服务。他们有一个模板可以在您的 Silverlight 应用程序中使用 ASP.NET 成员资格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T17:28:50.023

一种方法可能是：1）。向您的 Silverlight 应用程序添加一个服务引用，该引用指向您的 Web 服务器，其中正在运行将运行 LDAP 身份验证的进程。2）。从服务成功或失败通知返回。3）。读取服务返回值并在您的 Silverlight 应用程序中对其进行操作。

本文讨论来自 Web 应用程序的 LDAP 查询： [链接文本](https://stackoverflow.com/questions/769268/how-to-authenticate-ldap-in-net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T21:52:46.763

嗯......如果asnwer为真，它可以在普通的ASP .net / Web应用程序上完成，那么你可以从ASP .net应用程序继承上下文，如果不是......我猜不是SL 2在谈论安全性（也许版本 3 有一些东西）。

HTH布劳里奥

# iis - 密码保护 IIS 上的文件而不使用 NTFS 文件权限

> ID：864278
> 
> 赞同：2
> 
> 时间：2009-05-14T16:12:39.263
> 
> 标签：iis, asp-classic

我们托管客户将登录并查看的在线报告。这些报告是从 SQL Server 数据库中提取必要数字的 ASP 页面。客户端的访问详细信息也由 SQL Server 中的表管理。

过去，我们有一个或多个 PDF 或其他文件，客户可能还想从在线报告中访问这些文件。这些只是简单地上传到 ASP 文件夹内的子文件夹中，并从相关的 ASP 页面链接到。

如果我想保护这些文件以确保尝试访问它们的用户已经登录 - 有没有办法做到这一点？我认为该文件必须存储在数据库中。其他人如何管理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T16:30:35.290

将 PDF 放入数据库是不必要的。相反，将 PDF 存储在 Web 文件夹之外的位置。远离公共通道。在数据库中为每个带有 ID 号的 PDF 的位置创建记录。假设您已经为用户建立了身份验证系统，请创建另一个表，将用户 ID 链接到他们有权访问的 pdf 的记录 ID。从那里创建一个页面来检查该访问表的凭据，打开 db 提供的文件位置并响应二进制写入它的内容是一件简单的事情。你可以在网上找到几个这样的例子。然而，经典的 ASP 有一个令人讨厌的习惯，即在传输文件时将整个文件存储在 ram 中，这会吃掉你不会相信的资源。如果可能的话，我建议使用 ASP.Net 脚本。

```
Server.TransferFile() 
```

# performance - Excel/VBA 检查一行是否存在

> ID：864282
> 
> 赞同：3
> 
> 时间：2009-05-14T16:12:53.180
> 
> 标签：performance, vba, excel

我有一张完整的原始数据表，大约 20,000 行和 50 列。（预计行数会增加，如果不是三倍，可能会增加一倍）

我需要一个公式来查看这些数据并确定两个指定列中的数据是否存在一行。我目前的公式如下。

```
Function CheckExists(Table As Range, SearchCol1 As Integer, SearchVal1 As Variant, SearchCol2 As Integer, SearchVal2 As Variant)

    Dim i As Long
    Dim exists As Boolean

    exists = False

    For i = 1 To Table.Rows.Count
        If Table.Cells(i, SearchCol1) = SearchVal1 Then
            If Table.Cells(i, SearchCol2) = SearchVal2 Then
                exists = True
                Exit For
            End If
        End If
    Next i

    CheckExists = exists

End Function 
```

我从另一张纸上运行这个公式，大约有 5000 行。

我的问题是，这会杀死我的电脑，计算单元需要很长时间。我希望有人可以提供一些关于如何使这个更快甚至更好的建议，一个可以做我所追求的内置公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T16:40:00.820

您可以使用简单的 if 公式在原始数据的末尾添加一列，例如

```
if(AND(A1=4, B1=6), 1, 0) 
```

其中 A1 / B1 是要检查的列，4 和 6 将替换为实际值。检查是否存在一行然后只是检查该列的总和：

```
if(sum(C:C) > 0, TRUE, FALSE) 
```

其中 C 是具有公式的列。在大型 Excel 文档中，我通常会发现像这样的复合方法最有效。如果您发布数据样本，我可能会进一步完善。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T22:05:35.383

我建议添加一列来连接感兴趣的两列中的值，然后使用 MATCH 工作表函数来搜索新列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T16:26:16.330

如果您使用 Cells.Find ，它将为您节省大量对从未包含所需值的单元格的迭代。

例如

```
Cells.Find(What:="-1", After:=ActiveCell, LookIn:=xlValues, LookAt:= _
      xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False _
      , SearchFormat:=False).Activate 
```

将激活它在其中找到值的单元格。然后您可以检查您正在比较的另一个单元格是否具有正确的值（如果已找到该单元格）。

您可能还需要检查您所在的行/列是否与您要查找的值相符，特别是如果您正在搜索类似数字 20 的内容，它会在错误的位置找到数字 20排。

玩一玩，我想你会发现它比正常迭代要快很多。

另外，可能没有根据的建议：有这么多数据，数据库会没有用吗？

**更新：**
我已经快速玩了 - 这个功能可以替换你上面使用的现有功能，如果它更快，请告诉我。

```
Function FindCheckExists(Table As Range, SearchCol1 As Integer, _
                         SearchVal1 As Variant, SearchCol2 As Integer, _
                         SearchVal2 As Variant)

    Dim i As Long
    Dim exists As Boolean
    Dim result As Range

    exists = False
    Do While (Not exists)

        Set result = Cells.Find(What:=SearchVal1, After:=Cells(1, SearchCol1), _
          LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, _
          SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

        If (result Is Nothing) Then Exit Function

        If result.Offset(0, (SearchCol2 - SearchCol1)).Value = SearchVal2 Then _
            exists = True

    Loop

    FindCheckExists = exists

End Function 
```

上面已经用_重新格式化以适应stackoverflow页面，如果没有它们，它可能在Excel中看起来更整洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-15T20:04:32.290

不必使用 VBA 来完成此操作 - 您只需使用常规前端公式即可。下面的公式（第一个只执行 1-5000 行，但第二个将执行整个列）将确定所讨论的组合是否存在：

```
=SUMPRODUCT(--(A1:A5000="SearchValue1"),--(B1:B5000="SearchValue2"))

=SUMPRODUCT(--(A:A="SearchValue1"),--(B:B="SearchValue2")) 
```

要使用它，您只需将“SearchValue1”和“SearchValue2”修复为您要查找的值，如果您不使用 A 和 B，请更改列字母。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-18T13:56:46.750

我会说很像 rwmnau，除了我通常使用：

```
=SUMPRODUCT((A1:A5000="SearchValue1")*(B1:B5000="SearchValue2")) 
```

**编辑**如果您使用 Excel 2007，您可以使用 COUNTIFS 函数（注意末尾的 S）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-10T12:18:54.480

我发现使用自动过滤器最快。根据您的条件对其进行过滤，然后删除剩余的可见行。

例如`Ws.Rows(1).Insert 'Filter does not check first row Ws.AutoFilterMode = False Ws.Cells.AutoFilter searchCol1, "=*" & searchVal1 & "*", , , False Ws.Cells.AutoFilter searchCol2, "=*" & searchVal2 & "*", , , False Ws.AutoFilter.Range.SpecialCells(xlCellTypeVisible).EntireRow.Delete ActiveSheet.AutoFilterMode = False`

希望有帮助。

# windows - 将文件包装在一个可执行包中

> ID：864289
> 
> 赞同：6
> 
> 时间：2009-05-14T16:13:36.970
> 
> 标签：windows, file, package

我想将一堆文件（一个.exe 一个.xml，一些图像）包装在一个可执行包中。当用户启动这个可执行包时，这个可执行包中包含的 .exe 应该运行。这首先在Windows平台上可能吗？

我不寻找的是自解压 zip 或安装程序，因为它们实际上都将新文件移动到硬盘上。

我为什么要这个？我希望用户只有一个文件，以便轻松分发。

提前致谢

巴特

* * *

感谢您的回答。我不得不承认我不是应用程序开发人员，所以这对我来说有点新鲜。我实际上是一名 Flash 开发人员。我想更具体一点，向你们解释我实际上想要做什么：

我开发了以下文件：

*   viewer.exe（Flash 独立查看器，通常这是一个已编译的 .swf，但这种文件类型确实需要浏览器插件播放器才能显示自己。独立版本不需要）
*   内容.xml
*   包含不同类型图像的图像文件夹

viewer.exe 加载 content.xml，使用 content.xml 中定义的内容构建演示文稿（带有指向 images 文件夹中不同图像的链接）。

我的客户不太喜欢包含所有不同文件的完整结构，因为分发这些文件并不容易。所以我试图将所有文件“包装”在一个 .exe 或其他东西中:)

我希望我更清楚一点。

如果您的解决方案之一仍然可以创建这种包，请随时纠正和教育我:)

巴特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T16:16:57.973

您是否有任何理由不能为您的 XML/图像文件使用嵌入式资源？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:16:55.713

您可以将任何您想要的内容附加到可执行文件的末尾。我以前做的是附加我的文件，然后一个 int 说明我的有效负载有多长（伪）：

```
payload.size = readInteger(exe.size - sizeof(int))
payload.offset = exe.size - sizeof(int) - payload.size 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T16:17:35.413

您可能需要三种方法：如果您只需要捆绑图像/音频和其他非可执行文件（无 DLL、无 OCX 等），那么您可以查找有关[资源文件](http://msdn.microsoft.com/en-us/library/aa380599(VS.85).aspx)的信息；您不仅限于链接的文章中列出的类型，而且对于那些有特定的帮助者。否则 - 如果您也想捆绑可执行文件或更喜欢更直接的解决方案 - 您可以考虑使用[thinstall](http://www.thinstall.com)或[molebox](http://www.molebox.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:25:12.293

这当然是可能的。Tcl 语言能够捆绑为“starpack”，它是带有嵌入式虚拟文件系统的可执行文件。在那个文件系统中，您可以嵌入 xml、图像、声音、脚本等。Tcl'ers 多年来一直在做单文件部署的事情。

# asp.net - 使用 JavaScript 更新 ASP.NET 父页面？

> ID：864296
> 
> 赞同：0
> 
> 时间：2009-05-14T16:14:29.103
> 
> 标签：asp.net, javascript

这是我的问题：我有一个 ASP.NET 应用程序。在应用程序中，有一个页面（页面 A）会显示第二个页面（页面 B）页面 b 是一个简单的表单，它填充位于页面 A 中的 dataGrid。我尝试了很多方法（IDisposable，创建方法它...）但它没有给我正确的功能。我已经研究了一段时间了，我很确定正确的方法是使用 javaScript，但我不是该技术的专家。我想知道是否有人可以向我指出一个解决方案（无论是 JavaScript 还是不是），或者向我指出一篇可以让我更好地理解这个问题的文章。

非常感谢你们的帮助！！！！！！！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:24:38.003

不是 100% 确定这是您所要求的，但您可以使用 javascript 刷新父页面，如下所示

```
window.opener.location.reload(); 
```

接着

```
window.close(); 
```

关闭你的第二个窗口

# msbuild - MSBuild：复制文件（如果已更改）然后执行操作（仅在文件已更新时）

> ID：864305
> 
> 赞同：6
> 
> 时间：2009-05-14T16:16:09.333
> 
> 标签：msbuild

在 MSBuild 中，我可以使用该`Copy`任务将文件从一个位置复制到另一个位置。

我还可以使用该`SkipUnchangedFiles`属性来指定如果文件没有更改，则不应复制它们。

在复制一个或多个文件的情况下，是否有一种标准模式来预测后续操作？

例如：

1.  复制任何更新的部署脚本
2.  **当且仅当一个或多个脚本已更改时**，以正确的顺序执行运行所有部署脚本的批处理文件

 **另一个复杂之处是我正在使用该`CreateItem`任务来动态生成输入文件列表：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="CopyAndRun">
  <Target Name="CopyAndRun">
    <CreateItem Include="In\**\*Test*.txt">
      <Output TaskParameter="Include" ItemName="SourceFiles"/>
    </CreateItem>
    <Copy SourceFiles="%(SourceFiles.Identity)" DestinationFolder="Out\%(RecursiveDir)" SkipUnchangedFiles="true" />
    <!-- Only want to execute this if updated files were copied -->
    <Message Text="Running..." />
  </Target>
</Project> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-14T18:06:33.687

您可以通过 MSBuild 开箱即用的[增量构建来实现这一点。](http://msdn.microsoft.com/en-us/library/ms171483.aspx)

赛义德·易卜拉欣·哈希米

我的书：[Microsoft Build Engine 内部：使用 MSBuild 和 Team Foundation Build](https://rads.stackoverflow.com/amzn/click/com/0735626286)

# javascript - 添加反馈按钮

> ID：864312
> 
> 赞同：0
> 
> 时间：2009-05-14T16:17:32.047
> 
> 标签：javascript, jquery

我有一个从 docbook5 源生成的静态 html 文件。现在我需要在每个部分的末尾添加反馈按钮，所以我在每个标题后附加（使用 jQuery）一个链接：

```
$(document).ready(function() {
    $("div[title]").append('<a href="mailto:me@host?subject=XXX">feedback</a>');
}) 
```

如何将 div[title] 插入主题？

**例子**

```
<div title="Foo">
...
</div>
<div title="Bar">
...
</div> 
```

我想在关闭 div 之后放置两个按钮：

```
<div title="Foo">
...
</div><a href="me@host?subject=Foo">feedback</a>
<div title="Bar">
...
</div><a href="me@host?subject=Bar">feedback</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:22:58.553

```
$(document).ready(function() {
   $("div[title]").each(function(){
     $(this).append('<a href="mailto:me@host?subject='+encodeURIComponent(this.title)+'">feedback</a>');
   });
}) 
```

顺便提一句。如果要在 DIV 之后插入反馈链接，则应使用 .after() 而不是 .append()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:24:15.553

您将需要`.each`像这样迭代：

```
$("div[title]").each(function() {
    $(this).append('<a href="mailto:me@host?subject=' + $(this).attr("title") + '">feedback</a>');
}); 
```

# java - 在 Java 中将一个列表映射到另一个列表的最优雅的方法是什么？

> ID：864315
> 
> 赞同：3
> 
> 时间：2009-05-14T16:17:57.053
> 
> 标签：java

我是Java新手，所以请耐心等待。

将列表映射（转换）为列表是很常见的。有些语言有`map`方法，有些是 (C#) `Select`。这是如何用 Java 完成的？`for`循环是唯一的选择吗？

我希望能够做这样的事情：

```
List<Customer> customers = new ArrayList<Customer>();
...
List<CustomerDto> dtos = customers.convert(new Converter(){
  public convert(c) {
    return new CustomerDto();
  }
}) 
```

我错过了什么？请给我一个起点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T16:23:31.673

在 Java 中没有内置的方法来执行此操作 - 您必须编写或使用辅助类。[谷歌收藏](http://google-collections.googlecode.com)包括

```
public static <F,T> List<T> transform(List<F> fromList,
                                  Function<? super F,? extends T> function) 
```

这很好用，但使用起来有点笨拙，因为您必须使用单方法匿名类和静态方法。这不是 Google Collections 的错，这只是在 Java 中执行此类任务的本质。

请注意，这会根据需要延迟转换源列表中的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T16:42:27.057

我即时实现了一些东西。看看这是否对您有帮助。如果没有，请按照建议使用 Google Collections。

```
public interface Func<E, T> {
    T apply(E e);
}

public class CollectionUtils {

    public static <T, E> List<T> transform(List<E> list, Func<E, T> f) {
        if (null == list)
            throw new IllegalArgumentException("null list");
        if (null == f)
            throw new IllegalArgumentException("null f");

        List<T> transformed = new ArrayList<T>();
        for (E e : list) {
            transformed.add(f.apply(e));
        }
        return transformed;
    }
}

List<CustomerDto> transformed = CollectionUtils.transform(l, new Func<Customer, CustomerDto>() {
    @Override
    public CustomerDto apply(Customer e) {
        // return whatever !!!
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T16:24:16.193

只要 customerDto 扩展客户，这将工作

```
 List<Customer> customers = new ArrayList<Customer>();

   List<CustomerDto> dtos = new ArrayList<CustomerDto>(customers); 
```

除此以外 ：

```
List<Customer> customers = new ArrayList<Customer>();

List<CustomerDto> dtos = new ArrayList<CustomerDto>();

for (Customer cust:customers) {
  dtos.add(new CustomerDto(cust));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:24:34.447

目前还没有一种方法可以将这样的映射函数应用于 Java `List`（或其他集合）。将提供此功能的闭包被认真考虑用于即将发布的 JDK 7 版本，但由于缺乏共识，它们已被推迟到以后的版本中。

使用当前的构造，您可以实现如下内容：

```
public abstract class Convertor<P, Q>
{

  protected abstract Q convert(P p);

  public static <P, Q> List<Q> convert(List<P> input, Convertor<P, Q> convertor)
  {
    ArrayList<Q> output = new ArrayList<Q>(input.size());
    for (P p : input)
      output.add(convertor.convert(p));
    return output;
  }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T21:04:45.880

就个人而言，我发现以下更短更简单，但如果您发现功能方法更简单，您可以这样做。如果其他 Java 开发人员可能需要阅读/维护代码，我建议使用他们可能会觉得更舒服的方法。

```
List<CustomerDto> dtos = new ArrayList<CustoemrDto>();
for(Customer customer: customers)
   dtos.add(new CustomerDto()); 
```

你可能会发现这个库很有趣，[函数式 Java](http://functionaljava.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-03-29T20:24:32.603

旧线程，但我想补充一点，我对 Apache Commons CollectionUtils 的收集方法有很好的经验。它与上面的 Google Collections 方法非常相似，尽管我没有比较它们的性能。

[http://commons.apache.org/collections/api/org/apache/commons/collections/CollectionUtils.html#collect%28java.util.Collection,%20org.apache.commons.collections.Transformer%29](http://commons.apache.org/collections/api/org/apache/commons/collections/CollectionUtils.html#collect%28java.util.Collection,%20org.apache.commons.collections.Transformer%29)

# unix - 如何将 find 命令返回的文件列表通过管道传输到 cat 以查看所有文件

> ID：864316
> 
> 赞同：234
> 
> 时间：2009-05-14T16:18:38.737
> 
> 标签：unix, find, pipe

我正在做一个`find`然后获取文件列表。我如何将它通过管道传输到另一个实用程序`cat`（以便 cat 显示所有这些文件的内容），并且基本上需要`grep`这些文件中的某些内容。

* * *

## 回答 #1

> 赞同：385
> 
> 时间：2009-05-14T16:30:15.900

1.  管道到另一个进程（虽然这不会完成你所说的你正在尝试做的事情）：

    ```
    command1 | command2 
    ```

    这会将 command1 的输出作为 command2 的输入发送

2.  `-exec`在 a 上`find`（这将做你想做的事——但特定于`find`）

    ```
    find . -name '*.foo' -exec cat {} \; 
    ```

    （`find`和之间的所有`-exec`内容都是您已经使用的查找谓词。 `{}`将替换您找到的特定文件到命令中（`cat {}`在这种情况下）；即`\;`结束`-exec`命令。）

3.  将一个进程的输出作为命令行参数发送到另一个进程

    ```
    command2 `command1` 
    ```

    例如：

    ```
    cat `find . -name '*.foo' -print` 
    ```

    （注意这些是 BACK-QUOTES 而不是常规引号（在我键盘上的波浪号 ~ 下）。）这会将输出作为命令行参数发送`command1`到。`command2`请注意，包含空格（换行符等）的文件名将被分解为单独的参数。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2009-05-14T16:21:57.870

### 现代版

POSIX 2008 添加了`+`标记，[`find`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html)这意味着它现在可以自动将尽可能多的文件分组到单个命令执行中，非常相似`xargs`，但具有许多优点：

1.  您不必担心文件名中的奇数字符。
2.  您不必担心使用零文件名调用的命令。

文件名问题是`xargs`没有`-0`选项的问题，“即使文件名为零也运行”问题是有或没有`-0`选项的问题——但 GNU`xargs`有`-r`or`--no-run-if-empty`选项来防止这种情况发生。此外，此符号减少了进程的数量，而不是您可能会衡量性能差异。因此，您可以明智地写：

```
find . -exec grep something {} + 
```

### 经典版

```
find . -print | xargs grep something 
```

如果您在 Linux 上或拥有 GNU`find`和`xargs`命令，则使用`-print0`with`find`和`-0`with`xargs`来处理包含空格和其他奇数字符的文件名。

```
find . -print0 | xargs -0 grep something 
```

### 调整结果`grep`

如果您不想要文件名（只是文本），那么添加一个适当的选项`grep`（通常是`-h`为了抑制“标题”）。为了绝对保证文件名被打印出来`grep`（即使只找到一个文件，或者最后一次调用`grep`只给了1个文件名），然后添加`/dev/null`到`xargs`命令行，这样总会有至少两个文件名。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2009-05-14T16:29:25.433

有几种方法可以将`find`命令返回的文件列表传递给`cat`命令，但从技术上讲，并非所有方法都使用管道，而且实际上没有一种方法直接通过管道传递到`cat`.

1.  最简单的是使用反引号 ( ```)：

    ```
    cat `find [whatever]` 
    ```

    这将获取 的输出`find`并将其有效地放置在`cat`. 如果`find`输出太多（超过命令行的容量）或输出包含特殊字符（如空格），则此方法效果不佳。

2.  在某些 shell 中，包括`bash`，可以使用`$()`而不是反引号：

    ```
    cat $(find [whatever]) 
    ```

    这不太便携，但可以嵌套。除此之外，它具有与反引号几乎相同的警告。

3.  因为对找到的内容运行其他命令是 的常见用途`find`，所以 find 有一个`-exec`动作，它为它找到的每个文件执行一个命令：

    ```
    find [whatever] -exec cat {} \; 
    ```

    `{}`是文件名的占位符，并且标记`\;`命令的结束（在 . 之后可能有其他操作`-exec`。）

    这将为`cat`每个文件运行一次，而不是运行一个`cat`传递多个文件名的实例，这可能效率低下，并且可能没有您想要的某些命令的行为（尽管它很好`cat`）。语法也很难输入——你需要转义分号，因为分号对 shell 来说是特殊的！

4.  某些版本`find`（最显着的是 GNU 版本）允许您替换`;`为`+`使用`-exec`的附加模式来运行更少的实例`cat`：

    ```
    find [whatever] -exec cat {} + 
    ```

    这会将多个文件名传递给 的每次调用`cat`，这样会更有效率。

    但是请注意，这*不能*保证使用单个调用。如果命令行太长，那么参数将分布在多次调用`cat`. 因为`cat`这可能没什么大不了的，但是对于其他一些命令，这可能会以不受欢迎的方式改变行为。在 Linux 系统上，命令行长度限制非常大，因此与其他一些操作系统相比，拆分为多个调用非常罕见。

5.  经典/便携的方法是使用`xargs`：

    ```
    find [whatever] | xargs cat 
    ```

    `xargs`运行指定的命令（`cat`在本例中为 ），并根据从标准输入中读取的内容添加参数。就像`-exec`with一样`+`，这将在必要时分解命令行。也就是说，如果`find`产生过多的输出，它将运行`cat`多次。如前所述`-exec`，在某些命令中，这种拆分可能会导致不同的行为。请注意，`xargs`像这样使用在文件名中存在空格问题，因为`xargs`仅使用空格作为分隔符。

6.  最健壮、便携和高效的方法还使用`xargs`：

    ```
    find [whatever] -print0 | xargs -0 cat 
    ```

    该`-print0`标志告诉在文件名之间`find`使用`\0`（空字符）分隔符，并且该`-0`标志告诉`xargs`期待这些`\0`分隔符。`-exec`这与...方法的行为几乎相同`+`，但更便携（但不幸的是更冗长）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-12T16:27:49.143

为了实现这一点（使用 bash），我将执行以下操作：

```
cat $(find . -name '*.foo') 
```

这被称为“命令替换”，默认情况下会去除换行符，这真的很方便！

更多信息[在这里](http://wiki.bash-hackers.org/syntax/expansion/cmdsubst)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-14T16:21:09.727

对我来说，这听起来像是一个 shell 脚本的工作：

```
for file in 'find -name *.xml'
do
   grep 'hello' file
done 
```

或类似的东西

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-18T09:48:22.597

这是我查找包含我感兴趣的一些内容的文件名的方法，只是一个很好地处理文件名中的空格的 bash 行：

```
find . -name \*.xml | while read i; do grep '<?xml' "$i" >/dev/null; [ $? == 0 ] && echo $i; done 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-30T13:53:50.770

这是我的一般用途镜头：

```
grep YOURSTRING `find .` 
```

它将打印文件名

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-30T11:29:46.650

我使用这样的东西：

```
find . -name <filename> -print0 | xargs -0 cat | grep <word2search4> 
```

`-print0`需要“find”的“ ”`-0`参数和“xargs”的“”参数来正确处理文件路径/名称中的空格。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-14T16:22:10.067

find 命令有一个 -exec 参数，您可以将其用于这样的事情，您可以直接使用它来执行 grep。

例如（[从这里，此页面上的其他好例子](http://www.athabascau.ca/html/depts/compserv/webunit/HOWTO/find.htm#EX03)）：

```
find . -exec grep "www.athabasca" '{}' \; -print 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-04-14T11:17:44.903

在 bash 中，以下是合适的：

```
find /dir -type f -print0 | xargs -0i cat {} | grep whatever 
```

这将找到目录中的所有文件，并将文件名安全`/dir`地通过管道传输到.`xargs``grep`

`xargs`如果您有数千个文件，则跳过不是一个好主意`/dir`；`cat`将由于参数列表长度过长而中断。`xargs`将为您解决所有问题。

`-print0`参数与参数相结合`find`以正确处理带有空格的文件名。参数允许您在命令行中需要的位置插入文件名。括号被从.`-0``xargs``-i``xargs``cat``cat``find`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-31T01:49:59.910

这对我有用

```
find _CACHE_* | while read line; do
    cat "$line" | grep "something"
done 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-21T04:50:23.047

使用[ggrep](http://www.unix.com/man-page/OpenSolaris/1/ggrep/)。

```
ggrep -H -R -I "mysearchstring" * 
```

在 unix 中搜索包含位于当前目录或子目录中的文本的文件

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-23T11:48:48.263

这将仅递归打印文件的名称和内容..

```
find . -type f -printf '\n\n%p:\n' -exec cat {} \; 
```

**编辑（改进版）：** 这将仅递归打印文本（ascii）文件的名称和内容。

```
find . -type f -exec grep -Iq . {} \; -print | xargs awk 'FNR==1{print FILENAME ":" $0; }' 
```

再一次尝试

```
find . -type f -exec grep -Iq . {} \; -printf "\n%p:" -exec cat {} \; 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-05-14T16:23:11.750

您是否尝试在文件中查找文本？你可以简单地使用 grep ......

```
grep searchterm * 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2010-03-21T03:51:39.490

列出并查看服务器上 /ghi 和 /jkl 目录中所有 abc.def 文件的内容

```
find /ghi /jkl -type f -name abc.def 2> /dev/null -exec ls {} \; -exec cat {} \; 
```

要列出具有注释条目的 abc.def 文件并显示，请参见目录 /ghi 和 /jkl 中的这些条目

```
find /ghi /jkl -type f -name abc.def 2> /dev/null -exec grep -H ^# {} \; 
```

# jquery - Jquery 对话框和下拉框

> ID：864319
> 
> 赞同：2
> 
> 时间：2009-05-14T16:20:07.857
> 
> 标签：jquery, asp.net-mvc

我的下拉框通过 jquery 模态弹出对话框显示，我该如何解决这个问题？我正在使用 IE6 和 Jquery 1.3.2，并且我将对话框 bgiframe 设置为 true。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T17:21:50.987

您的页面中是否包含实际的 bgiframe 插件？我很确定你仍然需要那个。

[http://plugins.jquery.com/project/bgiframe](http://plugins.jquery.com/project/bgiframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:26:44.520

您可能想尝试将模态 div 上的 z-index 属性设置为较高的值，例如 10。

```
#modalDialogID { z-index: 10; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:28:36.697

我确信无论 z-index 是什么，IE 6 下拉列表都会显示出来。一种解决方法是在您启动模式弹出窗口时隐藏涉及的下拉列表/输入。

链接概述了影响 IE6 和 7 wow 的问题。

[http://jonathanstegall.com/2009/01/15/ie-z-index-bug-with-css-dropdown-menu/](http://jonathanstegall.com/2009/01/15/ie-z-index-bug-with-css-dropdown-menu/)

# silverlight - 在 Silverlight 中绑定 ComboBox.SelectedItem（更多）

> ID：864322
> 
> 赞同：8
> 
> 时间：2009-05-14T16:20:27.310
> 
> 标签：silverlight, data-binding, combobox, selecteditem

与我之前的问题相关：[在 Silverlight 中绑定 ComboBox.SelectedItem](https://stackoverflow.com/questions/855519/binding-combobox-selecteditem-in-silverlight)

我有一个像这样绑定的 ComboBox：

```
<ComboBox x:Name="PART_CommentaryList" 
    HorizontalAlignment="Left" 
    Margin="3" 
    ItemsSource="{Binding Path=CurrentVideo.Commentaries}" 
    SelectedItem="{Binding Path=CurrentCommentary, Mode=TwoWay}"> 
```

CurrentVideo 和 CurrentCommentary 属性都会定期更改。几次后，我收到此错误：

```
Category: ManagedRuntimeError       
Message: System.ArgumentException: Value does not fall within the expected
   range.
   at MS.Internal.XcpImports.MethodEx(IntPtr ptr, String name, 
       CValue[] cvData)
   at MS.Internal.XcpImports.MethodPack(IntPtr objectPtr, String methodName, 
       Object[] rawData)
   at MS.Internal.XcpImports.UIElement_TransformToVisual(UIElement element, 
       UIElement visual)
   at System.Windows.UIElement.TransformToVisual(UIElement visual)
   at System.Windows.Controls.Primitives.Selector.IsOnCurrentPage(
       Int32 index, Rect& itemsHostRect, Rect& listBoxItemRect)
   at System.Windows.Controls.Primitives.Selector.ScrollIntoView(
       Int32 index)
   at System.Windows.Controls.Primitives.Selector.SetFocusedItem(
       Int32 index, Boolean scrollIntoView)
   at System.Windows.Controls.ComboBox.PrepareContainerForItemOverride(
       DependencyObject element, Object item)
   at System.Windows.Controls.ItemsControl.UpdateContainerForItem(
       Int32 index)
   at System.Windows.Controls.ItemsControl.RecreateVisualChildren()
   at System.Windows.Controls.ItemsControl.RecreateVisualChildren(
       IntPtr unmanagedObj) 
```

这对我来说似乎是一个 ComboBox 错误。我可以验证 CurrentVideo 在 CurrentCommentary 之前更改，因此所选项目应始终是列表中的项目。

相关，我真的不想要 Mode=TwoWay，因为当 ItemsSource 更改时，SelectedItem 暂时为空，这会在我的模型中重新设置，而我实际上并不想要。但是绑定根本不起作用（这似乎是另一个错误）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-21T18:28:47.970

这是 ComboBox 控件中的一个错误，它与 ItemsSource 绑定的更改指针有关。我找到的解决方案是：

1) 始终将 ItemsSource 绑定到可观察集合，并且从不重置 OC 的指针。

```
<ComboBox ItemsSource="{Binding MyList}" SelectedItem="{Binding MyItem}" /> 
```

坏的：

```
MyList = new ObservableCollection(); 
```

好的：

```
MyList.Clear();
MyList.AddRange(...); 
```

2) 在清除 MyList 之前设置 MyItem = null

在您的情况下，每当您更改 CurrentView 时，您都会更改列表的引用。因此，如果 SelectedItem 不为空，则会有一小段时间在重置 ItemsSource，ComboBox 的内部试图在新的 ItemsSource 中定位 SelectedItem 对象，但旧对象不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T23:05:24.107

感谢以上建议。在我的情况下，我可以选择“核选项”，即每当需要更改所需的项目时，我都会完全销毁组合，制作新的组合，并适当地设置其SelectedItem。

荒谬，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T21:48:41.173

Combobox 是一个非常有问题的 SL 控件 :-(。

就我而言，我放弃了所选项目 declarativa 绑定并使用讨厌的编码方法......丑陋但有效：

[http://blogs.msdn.com/mikehillberg/archive/2009/03/26/implementing-selectedvalue-with-the-silverlight-combobox.aspx](http://blogs.msdn.com/mikehillberg/archive/2009/03/26/implementing-selectedvalue-with-the-silverlight-combobox.aspx)

HTH布劳里奥

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T21:49:15.540

不久前我遇到了同样的问题，据我所知，这是 ComboBox 中的一个错误，当 ItemSource 发生更改时，它的布局有问题并且滚动很糟糕。

通过在设置 ItemSource 和 SelectedItem 之间调用 ComboBox.UpdateLayout 可以解决此问题。

[不久前，当在 Silverlight 中对 ComboBox 进行数据绑定时，我在 Gotcha](http://compiledexperience.com/Blog/post/Gotcha-when-databinding-a-ComboBox-in-Silverlight.aspx)上写了一篇关于这个问题的博客。

我尚未验证 Silverlight 3 Beta 中是否仍然存在问题

# javascript - Cookie 设置在本地主机上但不在实时服务器上？

> ID：864324
> 
> 赞同：1
> 
> 时间：2009-05-14T16:20:35.983
> 
> 标签：javascript, cookies

这是我第一次在 JavaScript 中处理 cookie，下面的脚本在我的本地 PC 上运行良好，但是当我在这里上传它时：[example](http://www.keithdonegan.com/jquery/stylesheet-switcher-with-cookies/)它失败了。

```
$(document).ready(function(){

              // Get Cookie 
              var getCookie = document.cookie;

              if(getCookie == "stylesheet=blue")
              {
                    $("[rel=stylesheet]").attr({href : "blue.css"});
              }
              else if(getCookie == "stylesheet=main")
              {
                    $("[rel=stylesheet]").attr({href : "main.css"});
              }

              // Set Stylsheet back to Main
              $('#reset').click(function()
              {
                    $("[rel=stylesheet]").attr({href : "main.css"});

                    var setCookie = document.cookie = "stylesheet=main";
              });   

              // Set Stylsheet Blue
              $('#blue').click(function()
              {
                   $("[rel=stylesheet]").attr({href : "blue.css"});

                   var setCookie = document.cookie = "stylesheet=blue";
              });
        }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:47:56.060

问题是，您使用的是谷歌分析，它也设置了自己的 cookie。因此，在读取 document.cookie 属性时，它永远不会有值，例如。"stylesheet=blue"，因为它将包含有关其他 cookie 的信息。称呼

```
alert(document.cookie); 
```

并检查自己的价值。

您应该使用一个函数来获取 cookie 值，例如

```
function getCookie(N){
   if(N=(new RegExp(';\\s*'+N+'=([^;]*)')).exec(';'+document.cookie+';'))
      return N[1]
} 
```

或使用[jQuery cookie 插件](http://plugins.jquery.com/project/Cookie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:50:41.327

当您取回 cookie 时，它​​不仅仅是字符串“stylesheet=blue”，还包含其他信息。

对我来说，我得到的字符串如下所示：

```
"stylesheet=blue; __utma=168444603.22445052401845424.1242318397.1242318397.1242318397.1; __utmb=168444603.5.10.1242318397; __utmc=168444603; __utmz=168444603.1242318397.1.1.utmcsr=stackoverflow.com|utmccn=(referral)|utmcmd=referral|utmcct=/questions/864324/cookie-sets-on-localhost-but-not-on-live-server" 
```

检查字符串是否包含“stylesheet=blue”而不是检查等价性。

**编辑**：看看@Rafael 说了什么。我喜欢 JQuery cookie 插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T16:27:16.390

您是否尝试过在 cookie 中添加过期日期以使其难以设置？

```
document.cookie = "stylesheet=blue; expires=Thu, 5 May 2011 20:47:11 UTC; path=/" 
```

这是一个硬编码示例，但您可以根据需要设置日期时间。

# yui - yui 和服务器端分页

> ID：864326
> 
> 赞同：0
> 
> 时间：2009-05-14T16:20:46.513
> 
> 标签：yui, pagination, server-side

我正在使用 YUI 2.7.0，并且我已经降低了客户端分页，现在正试图降低服务器端分页（查询可能会返回数千个结果）。现在，没有显示任何结果（我收到“未找到记录。”消息）。在网上似乎找不到答案。对 alert() 的调用显示了正确的数字，所以我知道服务器正在返回一些东西。我怀疑问题出在 jobsCallback 或 handleDataReturnPayload 中，但从那里卡住了。有什么提示吗？

```
 function jobStatusFormatter(elCell, oRecord, oColumn, oData)
  {
    var messages = 
    [
    <c:forEach var="x" begin="0" end="17">
      "<fmt:message key="job.status.${x}"/>",
    </c:forEach>
    ];

    elCell.innerHTML = messages[oData]; 
  }

  var jobColumns = 
  [
    {key:"lotNumber",               label:"<fmt:message key="job.lotNumber"/>",      sortable:true},
    {key:"scheduledStartDate",      label:"<fmt:message key="job.startDate"/>",      sortable:true, formatter:"date"},
    {key:"scheduledCompletionDate", label:"<fmt:message key="job.completionDate"/>", sortable:true, formatter:"date"},
    {key:"itemNumber",              label:"<fmt:message key="job.itemNumber"/>",     sortable:true},
    {key:"statusType",              label:"<fmt:message key="job.statusType"/>",     sortable:true, formatter:jobStatusFormatter},
    {key:"plannerCode",             label:"<fmt:message key="job.plannerCode"/>",    sortable:true},
    {key:"scheduledGroup",          label:"<fmt:message key="job.scheduledGroup"/>", sortable:true},
    {key:"organization",            label:"<fmt:message key="job.organization"/>",   sortable:true}
  ];

  var jobsDataSource = new YAHOO.util.DataSource("<%=request.getContextPath()%>/secure/xml/jobs.do?");
  jobsDataSource.connMethodPost = true;
  jobsDataSource.responseType = YAHOO.util.DataSource.TYPE_XML;
  jobsDataSource.responseSchema = 
  {
    resultNode: "job",
    fields: 
    [
      "id",
      "lotNumber",
      "plannerCode",
      "scheduledGroup",
      "scheduledStartDate",
      "scheduledCompletionDate", 
      "itemNumber",
      "statusType",
      "organization"
    ],
    metaNode: "jobs",
    metaFields:
    {
      totalResultsAvailable : "totalResultsAvailable", 
      totalResultsReturned : "totalResultsReturned" 
    }
  };

  var jobsConfigs = 
  {
    initialLoad: false,
    dynamicData: true,
    paginator: new YAHOO.widget.Paginator(
    { 
      rowsPerPage:15, 
      rowsPerPageOptions : [15,25,50,100]
    })
  };

  var jobsTable = new YAHOO.widget.DataTable("jobsDiv", jobColumns, jobsDataSource, jobsConfigs); 
  jobsTable.subscribe("rowMouseoverEvent", jobsTable.onEventHighlightRow); 
  jobsTable.subscribe("rowMouseoutEvent",  jobsTable.onEventUnhighlightRow); 
  jobsTable.set("selectionMode","single"); 
  jobsTable.subscribe("rowClickEvent", function(args)
  {
    var target = args.target;
    var record = this.getRecord(target);

    window.location="job.do?id="+record.getData("id");
  });            
  jobsTable.handleDataReturnPayload = function(oRequest, oResponse, oPayload) 
  {
    alert("totalResultsAvailable="+oResponse.meta.totalResultsAvailable+", totalResultsReturned="+oResponse.meta.totalResultsReturned);
    oPayload.totalRecords = oResponse.meta.totalResultsAvailable;
    return oPayload;
  };

  var jobsCallback = 
  {
    success : jobsTable.onDataReturnInitializeTable ,
    failure : jobsTable.onDataReturnInitializeTable ,
    scope : jobsTable
  };

  function getQueryParams()
  {
    var form = document.forms[0];
    var lotNumber = form.lotNumber.value;
    var itemNumber = form.itemNumber.value;
    var plannerCode = form.plannerCode.value;
    var scheduledGroup = form.scheduledGroup.value;
    var statusType = form.statusType.value;
    var organization = form.organization.value;

    return "lotNumber="+lotNumber+
           "&itemNumber="+itemNumber+
           "&statusType="+statusType+
           "&plannerCode="+plannerCode+
           "&scheduledGroup="+scheduledGroup+
           "&organization="+organization;
  }

  /* Called when submit button pressed */
  function findJobs()
  {
    // Sends a request to the DataSource for more data
    jobsTable.showTableMessage(YAHOO.widget.DataTable.MSG_LOADING);
    jobsDataSource.sendRequest(getQueryParams(), jobsCallback);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T18:58:15.870

您可能会在警报之后立即收到错误，但它被吞没了。FireBug Break on All Errors 配置可以证实这一点。oPayload 可能是未定义的。它由回调对象中的参数属性值设置。

所以你应该能够解决这个问题

```
jobsCallback = {
    success : jobsTable.onDataReturnInitializeTable,
    failure : jobsTable.onDataReturnInitializeTable,
    scope : jobsTable,
    argument : {}
}; 
```

或者

```
jobsTable.handleDataReturnPayload = function(oRequest, oResponse, oPayload) {
    oPayload = oPayload || {};
    oPayload.totalRecords = oResponse.meta.totalResultsAvailable;
    return oPayload;
}; 
```

高温高压

# iphone - 将 RSA 密钥添加到 iPhone 钥匙串

> ID：864331
> 
> 赞同：2
> 
> 时间：2009-05-14T16:22:03.267
> 
> 标签：iphone, cryptography, rsa, keychain

我正在尝试将公共和私有 RSA 密钥添加到 iPhone 的钥匙串，所以我可以使用 CommonCrypto 库，但我不完全确定如何做到这一点。MYCrypto 库目前似乎只适用于 Mac 而不是 iPhone。任何人都可以帮助并解释如何将私钥/公钥添加到钥匙串并获得 SecKeyRef 给他们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-20T04:58:54.287

所以在iOS中，钥匙串是沙盒的，AFAIK。这意味着您放入钥匙串的任何内容都只能由您的应用程序和您的应用程序访问，除非您另有说明。您必须在项目设置的**功能**下启用*钥匙串共享。*

 **现在已经不碍事了，您当然可以导入数据。由于它们是`NSString`对象，因此您首先必须将其转换为`NSData`对象才能正确导入它们。最有可能的是，它们是用 Base64 编码的，所以你必须反过来：

```
NSData *decodedData = [[NSData alloc] initWithBase64EncodedString:base64String options:0]; 
```

现在已经完成了，您可以使用此方法将您的密钥保存到钥匙串并获取 SecKeyRef：

```
/**
 * key: the data you're importing
 * keySize: the length of the key (512, 1024, 2048)
 * isPrivate: is this a private key or public key?
 */
- (SecKeyRef)saveKeyToKeychain:(NSData *)key keySize:(NSUInteger)keySize private:(BOOL)isPrivate {
    OSStatus sanityCheck = noErr;
    NSData *tag;
    id keyClass;

    if (isPrivate) {
        tag = privateTag;
        keyClass = (__bridge id) kSecAttrKeyClassPrivate;
    }
    else {
        tag = publicTag;
        keyClass = (__bridge id) kSecAttrKeyClassPublic;
    }

    NSDictionary *saveDict = @{
            (__bridge id) kSecClass : (__bridge id) kSecClassKey,
            (__bridge id) kSecAttrKeyType : (__bridge id) kSecAttrKeyTypeRSA,
            (__bridge id) kSecAttrApplicationTag : tag,
            (__bridge id) kSecAttrKeyClass : keyClass,
            (__bridge id) kSecValueData : key,
            (__bridge id) kSecAttrKeySizeInBits : [NSNumber numberWithUnsignedInteger:keySize],
            (__bridge id) kSecAttrEffectiveKeySize : [NSNumber numberWithUnsignedInteger:keySize],
            (__bridge id) kSecAttrCanDerive : (__bridge id) kCFBooleanFalse,
            (__bridge id) kSecAttrCanEncrypt : (__bridge id) kCFBooleanTrue,
            (__bridge id) kSecAttrCanDecrypt : (__bridge id) kCFBooleanFalse,
            (__bridge id) kSecAttrCanVerify : (__bridge id) kCFBooleanTrue,
            (__bridge id) kSecAttrCanSign : (__bridge id) kCFBooleanFalse,
            (__bridge id) kSecAttrCanWrap : (__bridge id) kCFBooleanTrue,
            (__bridge id) kSecAttrCanUnwrap : (__bridge id) kCFBooleanFalse
    };

    SecKeyRef savedKeyRef = NULL;
    sanityCheck = SecItemAdd((__bridge CFDictionaryRef) saveDict, (CFTypeRef *)&savedKeyRef);
    if (sanityCheck != errSecSuccess) {
        LOGGING_FACILITY1(sanityCheck != noErr, @"Problem saving the key to keychain, OSStatus == %d.", sanityCheck);
    }

    return savedKeyRef;
} 
```

稍后，如果您想从钥匙串中检索 SecKeyRef，您可以使用以下命令：

```
- (SecKeyRef)getKeyRef:(BOOL)isPrivate {
    OSStatus sanityCheck = noErr;
    NSData *tag;
    id keyClass;
    if (isPrivate) {
        if (privateKeyRef != NULL) {
            // already exists in memory, return
            return privateKeyRef;
        }
        tag = privateTag;
        keyClass = (__bridge id) kSecAttrKeyClassPrivate;
    }
    else {
        if (publicKeyRef != NULL) {
            // already exists in memory, return
            return publicKeyRef;
        }
        tag = publicTag;
        keyClass = (__bridge id) kSecAttrKeyClassPublic;
    }

    NSDictionary *queryDict = @{
            (__bridge id) kSecClass : (__bridge id) kSecClassKey,
            (__bridge id) kSecAttrKeyType : (__bridge id) kSecAttrKeyTypeRSA,
            (__bridge id) kSecAttrApplicationTag : tag,
            (__bridge id) kSecAttrKeyClass : keyClass,
            (__bridge id) kSecReturnRef : (__bridge id) kCFBooleanTrue
    };

    SecKeyRef keyReference = NULL;
    sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef) queryDict, (CFTypeRef *) &keyReference);
    if (sanityCheck != errSecSuccess) {
        NSLog(@"Error trying to retrieve key from server. isPrivate: %d. sanityCheck: %li", isPrivate, sanityCheck);
    }

    if (isPrivate) {
        privateKeyRef = keyReference;
    }
    else {
        publicKeyRef = keyReference;
    }
    return keyReference;
} 
```

## 关于 privateTag 和 publicTag

`privateTag`并`publicTag`用于标记`kSecAttrApplicationTag`定义使用此密钥的应用程序的。您希望有一个单独的`privateTag`并`publicTag`区分您的私钥和公钥。

这有点令人费解，因为我遵循了示例代码，但是我以这种方式定义了我的`privateTag`和`publicTag`：

*SecKeyWrapper.h*

```
#define kPublicKeyTag           "com.sample.app.publickey"
#define kPrivateKeyTag          "com.sample.app.privatekey" 
```

*SecKeyWrapper.m*

```
// just under @implementation or @synthesize lines
static const uint8_t publicKeyIdentifier[] = kPublicKeyTag;
static const uint8_t privateKeyIdentifier[] = kPrivateKeyTag;

- (id)init {
    if (self = [super init]) {
        // Tag data to search for keys.
        privateTag = [[NSData alloc] initWithBytes:privateKeyIdentifier length:sizeof(privateKeyIdentifier)];
        publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier length:sizeof(publicKeyIdentifier)];
    }

    return self;
} 
```

然后像我在上面提供的代码示例中那样使用`privateTag`and 。`publicTag`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-23T21:46:00.707

你是在 iPhone 上生成它们吗？如果是这样，[此消息](http://lists.apple.com/archives/apple-cdsa/2009/May/msg00051.html)以及证书、密钥和信任服务编程指南中的[示例代码应该会引导您朝着正确的方向前进。](http://developer.apple.com/documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW9)如果没有，我正在编写一些应该实现这一点的代码——它还没有完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T10:20:02.893

适用于我将公钥添加到 iOS 钥匙串中的代码如下：

```
- (NSData *)stripPublicKeyHeader:(NSData *)d_key
{
    // Skip ASN.1 public key header
    if (d_key == nil) return(nil);

    unsigned int len = [d_key length];
    if (!len) return(nil);

    unsigned char *c_key = (unsigned char *)[d_key bytes];
    unsigned int  idx    = 0;

    if (c_key[idx++] != 0x30) return(nil);

    if (c_key[idx] > 0x80) idx += c_key[idx] - 0x80 + 1;
    else idx++;

    // PKCS #1 rsaEncryption szOID_RSA_RSA
    static unsigned char seqiod[] =
    { 0x30,   0x0d, 0x06, 0x09, 0x2a, 0x86, 0x48, 0x86, 0xf7, 0x0d, 0x01, 0x01,
        0x01, 0x05, 0x00 };
    if (memcmp(&c_key[idx], seqiod, 15)) return(nil);

    idx += 15;

    if (c_key[idx++] != 0x03) return(nil);

    if (c_key[idx] > 0x80) idx += c_key[idx] - 0x80 + 1;
    else idx++;

    if (c_key[idx++] != '\0') return(nil);

    // Now make a new NSData from this buffer
    return([NSData dataWithBytes:&c_key[idx] length:len - idx]);
}

- (BOOL)addPublicKey:(NSString *)key withTag:(NSString *)tag
{    
    NSString *startPublicKey = @"-----BEGIN PUBLIC KEY-----";
    NSString *endPublicKey = @"-----END PUBLIC KEY-----";

    NSString *s_key = NULL;

    NSScanner *scanner = [NSScanner scannerWithString:key];
    [scanner scanUpToString:startPublicKey intoString:nil];
    [scanner scanString:startPublicKey intoString:nil];
    [scanner scanUpToString:endPublicKey intoString:&s_key];

    // This will be base64 encoded, decode it.
    NSData *d_key = [RSAKeyHandler base64DataFromString:s_key];
    d_key = [self stripPublicKeyHeader:d_key];
    if (d_key == nil) return(FALSE);

    NSData *d_tag = [NSData dataWithBytes:[tag UTF8String] length:[tag length]];

    // Delete any old lingering key with the same tag
    NSMutableDictionary *publicKey = [[NSMutableDictionary alloc] init];
    [publicKey setObject:(__bridge id) kSecClassKey forKey:(__bridge id)kSecClass];
    [publicKey setObject:(__bridge id) kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [publicKey setObject:d_tag forKey:(__bridge id)kSecAttrApplicationTag];
    SecItemDelete((__bridge CFDictionaryRef)publicKey);

    CFTypeRef persistKey = nil;

    // Add persistent version of the key to system keychain
    [publicKey setObject:d_key forKey:(__bridge id)kSecValueData];
    [publicKey setObject:(__bridge id) kSecAttrKeyClassPublic forKey:(__bridge id)
     kSecAttrKeyClass];
    [publicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)
     kSecReturnPersistentRef];

    OSStatus secStatus = SecItemAdd((__bridge CFDictionaryRef)publicKey, &persistKey);
    if (persistKey != nil) CFRelease(persistKey);

    if ((secStatus != noErr) && (secStatus != errSecDuplicateItem)) {
        NSLog(@"Release public key");
        return(FALSE);
    }

    // Now fetch the SecKeyRef version of the key
    SecKeyRef keyRef = nil;

    [publicKey removeObjectForKey:(__bridge id)kSecValueData];
    [publicKey removeObjectForKey:(__bridge id)kSecReturnPersistentRef];
    [publicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef
     ];
    [publicKey setObject:(__bridge id) kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    secStatus = SecItemCopyMatching((__bridge CFDictionaryRef)publicKey,
                                    (CFTypeRef *)&keyRef);

    //[publicKey release];

    if (keyRef == nil) return(FALSE);

    // Add to our pseudo keychain
    //[keyRefs addObject:[NSValue valueWithBytes:&keyRef objCType:@encode(
    //                                                                    SecKeyRef)]];

    return(TRUE);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:36:41.623

这似乎是[这个 SO question](https://stackoverflow.com/questions/792097/import-rsa-keys-to-iphone-keychain)的副本。

[MyCrypto 说它可以在 iPhone 上运行](http://mooseyard.com/projects/MYCrypto/Documentation/html/index.html)。你看到什么样的问题？

# reflection - 反射到底是什么，什么时候是一个好方法？

> ID：864332
> 
> 赞同：19
> 
> 时间：2009-05-14T16:22:03.390
> 
> 标签：reflection, metaprogramming, definition

反射究竟是什么？我阅读了有关此主题的 Wikipedia 文章，并了解它是一种元编程，程序可以在运行时自行修改，但这意味着什么？在什么样的情况下这是一个好方法，什么时候最好使用它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-14T16:26:03.273

反射是一种工具，您可以在其中查询对象在运行时的属性。例如，Python、Java 和 .Net 具有可以找到对象的实例变量或方法的工具。

反射应用的一个例子是 O/R 映射层。一些使用反射通过在运行时查询其属性并动态填充实例来构造对象。这允许您基于某种数据字典中的元数据以编程方式执行此操作，而无需重新编译应用程序。

举一个简单的例子，我将使用 Python，因为它的反射工具使用起来非常简单，并且与 java 或 .Net 相比，涉及的样板文件更少。

```
ActivePython 2.5.2.2 (ActiveState Software Inc.) based on
Python 2.5.2 (r252:60911, Mar 27 2008, 17:57:18) [MSC v.1310 32 bit (Intel)] on
win32
Type "help", "copyright", "credits" or "license" for more information.
>>> class foo:
...     def __init__(self):
...             self.x = 1
...
>>> xx = foo()      # Creates an object and runs the constructor
>>> xx.__dict__     # System metadata about the object
{'x': 1}
>>> a = xx.__dict__ # Now we manipulate the object through 
>>> a['y'] = 2      # its metadata ...
>>> print xx.y      # ... and suddenly it has a new instance variable
2                   
>>> 
```

现在，我们已经使用基本反射来检查任意对象的实例变量。Python 上的特殊变量`__dict__`是对象的系统属性，该对象具有由变量（或方法）名称作为键的成员哈希表。我们已经反射性地检查了对象并使用反射工具人为地将第二个实例变量插入其中，然后我们可以通过将其作为实例变量调用来显示它。

请注意，此特定技巧不适用于 Java 或 .Net，因为实例变量是固定的。这些语言的类型系统不允许像 python 的“鸭子”类型系统那样在运行时添加新的实例变量。但是，您可以反思地更新在类型定义中声明的实例变量的值。

您还可以使用反射来动态构造方法调用并执行各种其他巧妙的技巧，例如基于参数实例化对象。例如，如果您有某种基于插件的系统，其中某些功能是可选的，您可以使用反射来查询插件它提供的服务（可能通过查询是否实现了某些接口）而不需要显式的元数据。

许多动态语言接口（如 OLE 自动化）使用反射作为接口的一个组成部分。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-14T16:26:54.503

与其说是在执行时*修改*代码，不如说是检查对象并要求它们在不知道静态类型的情况下执行代码。

一种简单的描述方式是“一种使静态类型语言动态行为的有点痛苦的方式”。

编辑：用途：

*   配置（例如，获取一个指定类型和属性的 XML 文件，然后构造适当的对象）
*   测试（由名称或属性标识的单元测试）
*   Web 服务（至少在 .NET 中，核心 Web 服务引擎中使用了很多反射）
*   自动事件关联 - 提供具有适当名称的方法，例如`SubmitButton_Click`，ASP.NET 将附加该方法作为`SubmitButton`'s`Click`事件的处理程序（如果您打开了自动关联）

这是个好主意吗？好吧，只有当替代方案很痛苦时。我更喜欢静态类型，因为它不会妨碍它——然后你会得到很多编译时的好处，而且它也更快。但是当你*确实*需要它时，反射可以让你做很多事情，否则这些事情是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T16:26:14.037

我能想到的第一个很好的例子是当你需要在给定对象上执行一组方法而不知道在编译时将存在哪些方法时。

以单元测试框架为例。负责运行所有单元测试的测试运行器类并不提前知道您要为方法命名什么。它所知道的是它们将以“test”为前缀（或者在 Java 5 的情况下，用 注释`@Test`）。因此，当给定一个测试类时，它会反映该类，以便获取其中所有方法的列表。然后，它将这些方法名称作为字符串进行迭代，并在对象以“test”开头时调用这些方法。没有反思是不可能的。这只是一个例子。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T16:28:51.893

在我能想到的至少 1 个项目中，反射对我很有用。我们编写了一个内部“流程管理器”程序，它以特定的时间间隔执行许多关键业务流程。该项目的设置使得核心实际上只是一个带有计时器对象的 Windows 服务，这些计时器对象每 30 秒左右触发一次并检查要执行的工作。

实际工作是在一个类库（适当地称为“WorkerLib”）中完成的。我们定义具有执行某些任务（移动文件、将数据上传到远程站点等）的公共方法的类。其想法是核心服务可以调用工作库中的方法，而无需对其调用的方法一无所知。这使我们可以在数据库中为作业创建计划，甚至可以将新方法添加到类库中，而无需更改核心系统。

基本思想是我们可以在核心服务中使用反射来执行我们存储在定义调度的数据库中的方法。在实践中它非常整洁。我们的核心服务是可靠的，可以根据需要处理执行作业，而实际的工作库可以根据需要进行扩展和更改，而无需核心甚至关心。

如果您需要进一步的解释，请随时询问。这只是我能想到的最好的方式来解释一个真实世界的场景，在这个场景中，反射确实让我们的事情变得更容易。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-14T17:08:43.467

实际上，反射应该被认为是代码的放大器。它可以使好的代码更好更干净，而坏的代码更糟。它有什么作用？它确实允许您编写代码，而您在编写代码时并不完全确定它会做什么。您有一个大致的想法，但它允许您不编写程序编译时将要执行的对象、方法和属性的代码。

其他帖子说它允许程序根据配置值执行代码是正确的，但它的真正威力在于它允许您严重弯曲面向对象编程的规则。这就是它的作用。这有点像关闭安全措施。私有方法和属性可以通过反射以及其他任何东西来访问。

MS 使用反射的一个很好的例子是数据对象上的数据绑定。您为要绑定到下拉列表等的对象指定文本字段和数据字段的名称，代码会反映对象并提取适当的信息。数据绑定对象一遍又一遍地执行相同的过程，但它不知道它必须绑定什么类型的对象。反射是一种编写一点代码来处理所有可能情况的便捷方式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-14T16:31:05.490

另一个例子：我有我使用的代码，它获取数据库的输出 - 这是一组具有命名列的行 - 并将其提供给对象数组。我遍历行，如果目标对象具有相同名称和类型的属性，则设置它。这使得我的数据获取代码看起来像这样：

```
SqlDataReader sdr = Helper.GetReader("GetClientByID", ClientID);
Client c = new Client();
FillObject(sdr, c);
return c; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-14T16:26:04.567

在 Java 中，它基本上是一种在事先不知道类的情况下实例化类的方法。假设您希望用户能够通过添加他们希望您的程序使用的类来更改配置文件（假设您有一些接口的许多实现）。通过反射，您可以仅根据对象的名称、方法签名等创建对象。. 然后将其投射到您的界面。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-14T16:26:10.637

反射对于运行时配置很有用，它允许系统的某些部分通过外部配置来驱动。

例如，类工厂可以基于输入文件构造不同的具体类型，其中具体类型需要不同的配置信息来调用具体构造函数而不是使用构建器接口。（使用反射定位的对象的构造方法）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-14T16:27:16.140

我给你举个例子。

作为编程练习，我编写了一个 mp3 文件检查器。它扫描我的音乐库并在 DataGridView 中显示我感兴趣的 id1/id2 标签。我使用反射从 mp3 info 类中获取属性，而 UI 代码不必了解该类的任何信息。如果我想更改显示的信息，我可以编辑 mp3 info 类或更改其配置（取决于我编写类的方式），而不必更新 UI。

这也意味着我已经能够使用依赖注入从头到尾使用它来显示有关数码照片的信息，只需交换数据库类即可。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-14T16:39:38.513

反射（基本上）是程序查询编译器可用的类型信息的能力。因此，例如，给定一个类型的名称，您可以查询它包含的方法。然后对于每种方法，您可以查询它们采用的参数的类型等等等等。

它对于运行时配置很有用，其中您有一个指定应用程序行为的配置文件。配置可能包含您应该使用的具体类型的名称（通常是 IOC 容器的情况）。使用反射，您可以创建这种具体类型的实例（通过反射 API）并使用它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-07-21T07:20:19.703

程序集包含模块，模块包含类型，类型包含成员。反射提供了封装程序集、模块和类型的对象。您可以使用反射来动态创建类型的实例，将类型绑定到现有对象，或从现有对象中获取类型。然后，您可以调用该类型的方法或访问其字段和属性。反射的典型用途包括：

*   使用 Assembly 定义和加载程序集，加载程序集清单中列出的模块，并从该程序集中找到一个类型并创建它的实例。
*   使用 Module 来发现信息，例如包含该模块的程序集和模块中的类。您还可以获得模块上定义的所有全局方法或其他特定的非全局方法。
*   使用 ConstructorInfo 来发现构造函数的名称、参数、访问修饰符（例如公共或私有）和实现细节（例如抽象或虚拟）等信息。使用 Type 的 GetConstructors 或 GetConstructor 方法来调用特定的构造函数。
*   使用 MethodInfo 发现方法的名称、返回类型、参数、访问修饰符（如公共或私有）和实现细节（如抽象或虚拟）等信息。使用 Type 的 GetMethods 或 GetMethod 方法来调用特定方法。
*   使用 FieldInfo 发现字段的名称、访问修饰符（如公共或私有）和实现细节（如静态）等信息，并获取或设置字段值。
*   使用 EventInfo 发现事件的名称、事件处理程序数据类型、自定义属性、声明类型和反射类型等信息，并添加或删除事件处理程序。
*   使用 PropertyInfo 发现属性的名称、数据类型、声明类型、反射类型和只读或可写状态等信息，并获取或设置属性值。
*   使用 ParameterInfo 发现参数名称、数据类型、参数是输入参数还是输出参数以及参数在方法签名中的位置等信息。

# sql-server - 在有限的（1000 行）块中移动 SQL Server 数据

> ID：864341
> 
> 赞同：13
> 
> 时间：2009-05-14T16:23:21.703
> 
> 标签：sql-server, insert, rowcount

我正在编写一个基于日期时间列归档 SQL Server 表中的行的过程。我想移动日期在 X 之前的所有行，但问题是每个日期有数百万行，所以对每个日期执行 BEGIN TRANSACTION...INSERT...DELETE...COMMIT 需要太长时间，并为其他用户锁定数据库。

有没有办法可以小块做？也许使用 ROWCOUNT 或类似的东西？

我最初考虑过这样的事情：

```
SET ROWCOUNT 1000

DECLARE @RowsLeft DATETIME
DECLARE @ArchiveDate DATETIME

SET @ROWSLEFT = (SELECT TOP 1 dtcol FROM Events WHERE dtcol <= @ArchiveDate)

WHILE @ROWSLEFT IS NOT NULL
BEGIN

    INSERT INTO EventsBackups
    SELECT top 1000 * FROM Events

    DELETE Events

    SET @ROWSLEFT = (SELECT TOP 1 dtcol FROM Events WHERE dtcol <= @ArchiveDate)

END 
```

但后来我意识到我不能保证我正在删除的行是我刚刚备份的行。或者我可以……？

**更新：** 我考虑过的另一个选项是添加一个步骤：

1.  将符合我的日期条件的前 1000 行选择到临时表中
2.  开始交易
3.  从临时表插入存档表
4.  从源表中删除，跨每列加入临时表
5.  提交事务
6.  重复 1-5 直到没有满足日期条件的行

有没有人知道这个系列的费用与下面讨论的其他一些选项相比如何？

**细节：**我正在使用 SQL 2005，因为有人问过。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-14T21:18:12.650

只需插入 DELETE 的结果：

```
WHILE 1=1
BEGIN

    WITH EventsTop1000 AS (
    SELECT TOP 1000 * 
        FROM Events
      WHERE <yourconditionofchoice>)
    DELETE EventsTop1000
        OUTPUT DELETED.* 
        INTO EventsBackup;

    IF (@@ROWCOUNT = 0)
        BREAK;
END 
```

这是原子的和一致的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T18:16:26.237

**使用带有 OUTPUT INTO 子句的 INSERT 来存储插入行的 ID，然后 DELETE 加入此临时表以仅删除这些 ID**

```
DECLARE @TempTable (YourKeyValue KeyDatatype not null)

INSERT INTO EventsBackups
    (columns1,column2, column3)
    OUTPUT INSERTED.primaryKeyValue
    INTO @TempTable
    SELECT
        top 1000
        columns1,column2, column3
        FROM Events

DELETE Events
    FROM Events
        INNER JOIN @TempTable  t ON Events.PrimaryKey=t.YourKeyValue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T19:27:45.113

这就是我最终做的事情：

```
SET @CleanseFilter = @startdate
WHILE @CleanseFilter IS NOT NULL
BEGIN
    BEGIN TRANSACTION

        INSERT INTO ArchiveDatabase.dbo.MyTable
        SELECT *
          FROM dbo.MyTable
         WHERE startTime BETWEEN @startdate AND @CleanseFilter

        DELETE dbo.MyTable
         WHERE startTime BETWEEN @startdate AND @CleanseFilter

    COMMIT TRANSACTION

    SET @CleanseFilter = (SELECT MAX(starttime)
                FROM (SELECT TOP 1000
                             starttime
                    FROM dbo.MyTable
                       WHERE startTime BETWEEN @startdate AND @enddate
                    ORDER BY starttime) a)
END 
```

我没有精确地拉 1000，只是 1000ish，所以它适当地处理时间列中的重复（当我考虑使用 ROWCOUNT 时，我担心这一点）。由于时间列中经常有重复，我看到它定期移动 1002 或 1004 行/迭代，所以我知道它得到了一切。

我将此作为答案提交，以便可以根据人们提供的其他解决方案来判断它。让我知道这种方法是否有明显问题。谢谢大家的帮助，我会接受几天内得票最多的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T19:38:53.183

另一种选择是向 Events 表添加一个触发器过程，该过程只将相同的记录添加到 EventsBackup 表中。

这样，EventsBackup 始终是最新的，您所做的只是定期从您的 Events 表中清除记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T16:27:55.483

不一次做这一切怎么样？

```
INSERT INTO EventsBackups
SELECT * FROM Events WHERE date criteria 
```

然后后来，

```
DELETE FROM Events
SELECT * FROM Events INNER JOIN EventsBackup on Events.ID = EventsBackup.ID 
```

或等价物。

到目前为止，您所说的任何内容都没有表明您需要交易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T16:27:02.520

怎么样：

```
INSERT INTO EventsBackups
SELECT TOP 1000 * FROM Events ORDER BY YourKeyField

DELETE Events
WHERE YourKeyField IN (SELECT TOP 1000 YourKeyField FROM Events ORDER BY YourKeyField) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T16:59:15.923

你有日期字段的索引吗？如果您还没有 sql 可能会被迫升级到表锁，这将在您的归档语句运行时锁定您的所有用户。

我认为您将需要一个索引才能使此操作完全执行！在您的日期字段上放置一个索引并再次尝试您的操作！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T17:50:33.710

您能否制作事件的副本，将所有日期**>=** x 的行移至该位置，删除事件并重命名副本事件？还是复制，截断然后复制回来？如果您能承受一点停机时间，这可能是最快的方法。

# ruby-on-rails - 在 rails 中保存可拖动 div 的位置

> ID：864355
> 
> 赞同：2
> 
> 时间：2009-05-14T16:24:55.380
> 
> 标签：ruby-on-rails

在使 div 可拖动后，我想在 div 被放下时将 div 的位置传递给控制器​​，以便可以将其保存到数据库中。

我的第一个想法是在 div 中创建一个隐藏表单，其中包含 2 个文本字段（一个用于 X，一个用于 Y），通过 javascript 保持更新并在放置时提交。

然而，这听起来有点像 hack，并不是一个优雅的解决方案。有没有人遇到过这个？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T22:13:24.030

您可以简单地使用 AJAX 请求，在后台将 X 和 Y 值发布到 Rails 应用程序。无需将位置存储在您的 HTML 中。

如果你使用 jQuery，你可以使用这样的东西：

```
// Include this in an onDrop event handler:
element = ... // dropped div
url = "http://example.com/.../save_div_position/";
data = $(element).position();
success_callback = function(data, textStatus) {
    // alert that new position is saved
};
$.post(url, data, success_callback, "json"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T23:15:41.510

我还想说将位置存储在文本字段中是一个坏主意。jQuery UI 提供可拖动且易于使用。每当删除元素时，下面的示例将发送一个 ajax 请求。

```
$('#draggable_element').draggable({  
    stop: function(event, ui) {   
        $.post("http://example.com/some_action",
            { top: ui.position["top"], left: ui.position["left"] },
            function() {  
                // callback stuff
            }
        );
    }  
}); 
```

# eclipse - 如何打开一个eclipse java和一个c++项目指向同一个根目录

> ID：864380
> 
> 赞同：1
> 
> 时间：2009-05-14T16:28:23.173
> 
> 标签：eclipse

我有一个包含 java/c++ 代码的目录（它们位于不同的子目录中，其中有多个）。如何打开一个eclipse java和一个c++项目指向同一个根目录？日食不会让我说“在同一位置存在一个项目”

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T14:03:12.313

在 java 项目构建路径设置中，您可以指向要构建的外部文件夹。“链接附加源：如果文件系统中有应用作附加源文件夹的文件夹，请使用此选项”

因此，您可以让您的 C++ 项目指向主文件夹，然后在不同的目录中创建一个 java 项目，然后使用上述机制编译所有 java 源。不是一个很好的解决方案，因为您有两个项目和两个不同的工作目录。

我可以肯定地告诉你的是，文件系统上的每个位置只能有一个项目，因为 eclipse 创建了一大堆元数据目录等。

我唯一的另一个想法是您是否可以创建一个构建 Java 和 C++ 的项目。Eclipse 具有构建者和性质的概念。不知何故，您需要一个具有 Java 和 C++ 特性/构建器的项目......

我做了一个快速的谷歌，看起来这篇文章涵盖了这两个选项： http: [//lorinc.blogspot.com/2006/10/how-to-mix-java-and-c-code-in-singe.html](http://lorinc.blogspot.com/2006/10/how-to-mix-java-and-c-code-in-singe.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:10:42.043

我不确定我是否理解正确
你有：

“workspace\project\”同时包含两个项目？
我不认为你可以，因为 eclipse 为每个项目创建了一些文件（例如 .project）。如果两者共享同一个目录，那么 eclipse 将需要两个文件，一个名称，一个位置。

我建议将 C 项目移动到其他文件夹中。

# wpf - wpf导航表单到表单？

> ID：864383
> 
> 赞同：1
> 
> 时间：2009-05-14T16:29:05.060
> 
> 标签：wpf, navigation, window

在我的 wpf 应用程序的输入表单中，我有一个按钮列表，用户可以在其中选择他想要执行的操作，例如。输入新客户，运行报告...

用户选择后显示表单（例如输入新客户）的最佳方式是什么？我不希望表单弹出。隐藏当前工作并显示下一个表单也不起作用，因为 wpf 应用程序托管在 window32 应用程序内。

我的猜测是在用户控件中构建每个功能。在入口页面上，加载 XAML 中的所有用户控件，但隐藏它们。当用户选择它时显示相应的用户控件。

由于我是 WPF 新手，我不确定这是否是这样做的方法。加载所有控件似乎有开销。

谢谢你的帮助。

安吉拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T16:37:16.710

在窗口左侧列出所有按钮

```
Button 1 ----------------------
Button 2 |     User Control   |
         |     Container      |
etc.     |--------------------| 
```

基于左侧的选择，即 Button 1 = new customer，然后右侧的用户控件将加载用户控件新客户的实现并将其放置在容器中，类似地，当他按下另一个选项时，他将获得不同的实现放置在容器中。这样，您可以在他完成或转移到另一个选项时处理他以前的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T03:23:36.390

您的提议是一种相当普遍的方法，我可能会推荐这种方法。

如果你真的需要开始在窗口之间切换，那么你可以这样做。

```
Application.Current.MainWindow = newWindow;
        newWindow.Show();
        sourceWindow.Close(); 
```

其中 new window 是对您希望显示的窗口的引用，而 sourceWindow 是当前窗口

# linked-list - 双向链表插图

> ID：864388
> 
> 赞同：1
> 
> 时间：2009-05-14T16:30:30.593
> 
> 标签：linked-list

我试图说明一个双向链表问题。这是我最近学习的一个旧测试。

问题如下：

在此代码之后绘制最终链接的内容：

```
ListNode n1 = new ListNode();
ListNode n2 = new ListNode();
ListNode n3 = n1;
n1.next = n2;
n3.prev = n1;
n1.next.prev = n3.next; 
```

我迷路的地方是最后一行代码。

n1.next.prev = n3.next；

这是解决方案：

[http://www.imagechicken.com/viewpic.php?p=1242322384048558300&x=jpg](http://www.imagechicken.com/viewpic.php?p=1242322384048558300&x=jpg)

任何人都可以引导我完成这个或引导我朝着一个好的方向前进吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T16:48:19.087

第一步：两个节点，没有链接。`n1`也称为`n3`。

```
      +-------+下一个 +--------+下一个
      | +----> | +---->
  上一篇| n1 | 上一篇| n2 |    
 <----+ n3 | <----+ |   
      +-------+ +-------+   

```

第二步：`n1.next = n2;`

```
      +-------+下一个 +--------+下一个
      | +----------->| +---->
  上一篇| n1 | 上一篇| n2 |    
 <----+ n3 | <----+ |   
      +-------+ +-------+   

```

第三步：`n3.prev = n1;`
因为`n3`is `n1`，这会使箭头转向。

```
      +-------+下一个 +--------+下一个
      | +----------->| +---->
  上一篇| n1 | 上一篇| n2 |    
 /----+ n3 | <----+ |   
 \--->+-------+ +--------+   

```

第四步：`n1.next.prev = n3.next;`
记住`n1.next`是`n2`和`n3`是`n1`。按照箭头：

```
      +-------+下一个 +--------+下一个
      | +----------->| +---->
  上一篇| n1 | 上一篇| n2 |    
 /----+ n3 | /----+ |   
 \--->+-------+ \--->+--------+   

```

所以 和 的`prev`指针`n1`最终`n2`都指向自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T16:43:56.163

这个关键是n1和n3指向同一个ListNode。

以下是 3 次操作后的状态：

```
n1.next = n2;
// n1.prev = null;
// n1.next = n2;
// n2.prev = null;
// n2.next = null;
// n3.prev = null;
// n3.next = n2;

n3.prev = n1;
// n1.prev = n1;
// n1.next = n2;
// n2.prev = null;
// n2.next = null;
// n3.prev = n1;
// n3.next = n2;

n1.next.prev = n3.next;
// n1.prev = n1;
// n1.next = n2;
// n2.prev = n2;
// n2.next = null;
// n3.prev = n1;
// n3.next = n2; 
```

所以在最后一条语句中，`n3.next`与 相同`n1.next`，即`n2`。因此，最后一条语句等效于 settings `n2.prev = n2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T16:43:26.507

我会尝试画三个盒子。将每个框分成三份——三分之一用于标签，三分之一用于“上一个”，三分之一用于“下一个”。然后从所有“prev”和“next”绘制连接线到适当的标签，看看事情是如何联系起来的。

一张照片可以抵得上一千个字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:45:53.927

这种事情会让人感到困惑，直到你意识到 ListNode 只有两个实例；n1、n2 和 n3 都指的是这些实例。特别是n1、n2、n3的值只设置一次；由于 n3 的值设置为 n1，您可以在此代码中轻松地将 n3 替换为 n1，并且它的工作方式相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T16:47:54.203

抱歉 - 无法在图片中做出正面或反面。

n1.next = n2。因此，n1.next.prev 评估为 n2.prev

n3 = n1。因此，n3.next 的计算结果为 n1.next。

您将 n2.prev 设置为 n1.next。

# c++ - 为什么我对注册表的更改不保留在 C++ 中？

> ID：864394
> 
> 赞同：0
> 
> 时间：2009-05-14T16:31:27.473
> 
> 标签：c++, windows, registry

我正在尝试使用 C++ 编辑注册表，这是我第一次尝试这样做，但我失败了。我没有收到任何错误代码，一切都表明它已成功完成，但它实际上并没有更改注册表项。

这是我正在使用的代码：

```
HKEY hkey;
DWORD dwDisposition, dwType, dwSize;
int autorun = 0x00;
int CD_AUTORUN_DISABLED = 0x20;
long errorCode;
errorCode = RegOpenKeyEx(HKEY_CURRENT_USER, TEXT("Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer"), 0, KEY_ALL_ACCESS, &hkey);

if(errorCode == ERROR_SUCCESS) {
        dwType = REG_DWORD;
        dwSize = sizeof(dwType);
        errorCode = RegQueryValueEx(hkey, TEXT("NoDriveTypeAutoRun"), NULL, &dwType, 
(PBYTE)&autorun, &dwSize);

cout << "Autorun value: " << autorun << endl;
if((autorun & CD_AUTORUN_DISABLED) == 0x20){
        int newAutorun = (autorun - CD_AUTORUN_DISABLED);
        cout << "New value: " << newAutorun  << endl;
        errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) &autorun, dwSize);
        if(errorCode == ERROR_SUCCESS){
            errorCode = RegCloseKey(hkey);              
            if(errorCode == ERROR_SUCCESS){
                cout << "Value changed." << endl;
            }
        }else{
            cout << "Value change failed, error code: " << errorCode << endl;
        }
    }else{
        cout << "Keep current value." << endl;
    }

}else{
    if(errorCode == ERROR_ACCESS_DENIED){
        cout << "Access denied." << endl;
    }else{
        cout << "Error! " << errorCode << " : " << ERROR_SUCCESS << endl;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T16:34:49.350

您似乎将注册表项设置为您读取它的相同值。

```
int newAutorun = (autorun - CD_AUTORUN_DISABLED);
                cout << "New value: " << newAutorun  << endl;
                errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) **&autorun**, dwSize); 
```

应该

```
int newAutorun = (autorun - CD_AUTORUN_DISABLED);
                cout << "New value: " << newAutorun  << endl;
                errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) &newAutorun, dwSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:38:35.443

我认为这：

```
errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) &autorun, dwSize); 
```

应该是这样的：

```
errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) &newAutorun, dwSize); 
```

（仔细查看倒数第二个参数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T16:38:51.777

尝试改变这个：

errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) &autorun, dwSize);

对此：

errorCode = RegSetValueEx(hkey, TEXT("NoDriveTypeAutoRun"), 0, dwType, (PBYTE) &newAutorun, dwSize);

# iphone - Iphone 应用程序安装错误

> ID：864395
> 
> 赞同：0
> 
> 时间：2009-05-14T16:31:42.260
> 
> 标签：iphone

我正在尝试在我的 iphone 上安装一个应用程序进行测试。我之前在手机上安装过项目。该项目可以正常编译和链接，但是当 xCode 尝试在手机上安装我的应用程序时，出现错误：

**Xcode 遇到意外错误 (0xE800003A)**

0xE800003A，在'/SourceCache/iPhoneXcodePlugin/iPhoneXcodePlugin-132/XCRemoteIPhone_MobileDeviceIO.m:722'

观察 xCode 底部的对话框时，它显示“在您的 Iphone 上安装 test*.app”

此名称与我的包标识符末尾的名称不同。它一定是我找不到的构建设置。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T16:35:47.837

验证您的手机是否已配置为与您的应用程序一起使用，并且您的手机上安装了正确的配置文件。最后，您可以尝试重新启动手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:54:39.523

首先点击这个网站 [http://furbo.org/2008/08/06/beta-testing-on-iphone-20/](http://furbo.org/2008/08/06/beta-testing-on-iphone-20/)

如果这不能解决您的问题，请访问 Apple 网站上的 Developer Portal。

你有一些不同步的东西导致你的 iPhone 不相信，因为没有更好的术语，相信你有权在你的手机上放置一个应用程序。您必须确保正确设置了构建环境，并确保正确设置了所有代码签名凭据。上面提供的链接或 Dev Portal 将帮助您完成此操作。

# iphone - 有没有一种简单的方法可以按键值对 plist（字典数组）进行排序？

> ID：864412
> 
> 赞同：4
> 
> 时间：2009-05-14T16:37:42.637
> 
> 标签：iphone, cocoa, sorting, plist, nsdictionary

我需要按键值重新排序 plist（字典数组）。

在此示例内容中，我想按键名称 (Matt, Joe) 的值排序：

```
<dict>
    <key>Name</key>
    <string>Matt</string>
    <key>Details</key>
    <string>Me</string>
</dict>
<dict>
    <key>Name</key>
    <string>Joe</string>
    <key>Details</key>
    <string>You</string>
</dict> 
```

有没有简单的方法？我不想每次运行应用程序时都在代码中执行此操作，我只想对数据文件执行此操作。

有任何想法吗？

很高兴使用任何工具来完成这项工作：命令行上用于排序的忍者参数、plist 编辑器、文本编辑器或其他任何工具。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-14T17:19:19.307

这是另一种编码解决方案，但制作一个围绕它的基本命令行工具并不难：

```
NSArray* arrayOfDictionaries; //the array we want to sort
NSSortDescriptor* nameSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES];
NSArray* sortedArray = [arrayOfDictionaries sortedArrayUsingDescriptors:[NSArray arrayWithObject:nameSortDescriptor]];
[nameSortDescriptor release]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T16:09:39.417

我写了一个小 Python 脚本，它从标准输入读取并写入标准输出：

```
# sortplist.py
import plistlib
import sys

plist = plistlib.readPlist(sys.stdin)
plistlib.writePlist(plist, sys.stdout) 
```

所以，就做吧`python sortplist.py <original.plist >sorted.plist`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T16:51:03.760

```
// Our key array
NSMutableArray *unsortedKeys = [NSMutableArray array];
// Assume we have some array of dictionaries
for( NSDictionary *dict in dictionaryArray ) {
  NSString *key = [dict objectForKey:@"Name"];
  if( key )
    [unsortedKeys addObject:key];
}
NSArray *sortedKeys = [unsortedKeys sortedArrayUsingSelector:@selector(compare:)];

// Do things with the keys... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:51:48.657

Python 是你的朋友：[http](http://effbot.org/zone/element-sort.htm) ://effbot.org/zone/element-sort.htm :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:31:55.690

我最终编写了一个五行 PHP 脚本来重新排序它们。我想我还有很多 Cocoa 需要学习，然后才能快速、舒适地做一些事情。

感谢您的回答。

# linux - 有些分配器是懒惰的吗？

> ID：864416
> 
> 赞同：12
> 
> 时间：2009-05-14T16:38:46.580
> 
> 标签：linux, memory-management, malloc

我在 Linux 中编写了一个 malloc 内存的 C 程序，循环运行它，TOP 没有显示任何内存消耗。

然后我用那个内存做了一些事情，并且 TOP 确实显示了内存消耗。

当我 malloc 时，我是否真的“获取内存”，或者是否存在“惰性”内存管理，如果/当我使用它时，它只会给我内存？

（还有一个选项是TOP在我使用的时候才知道内存消耗，所以我不确定这个..）

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-14T16:40:36.780

在 Linux 上，malloc 使用 sbrk() 或 mmap() 请求内存 - 无论哪种方式，您的地址空间都会立即扩展，但 Linux 在第一次写入相关页面之前不会分配实际的物理内存页面。您可以在 VIRT 列中看到地址空间扩展，而在 RES 中看到实际的物理内存使用情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-14T18:46:38.020

这开始有点偏离主题（然后我会将它与您的问题联系起来），但是发生的事情类似于您在 Linux 中分叉一个进程时发生的事情。分叉时有一种称为写时复制的机制，它只在内存也被写入时为新进程复制内存空间。这样，如果分叉的进程 exec 立即成为一个新程序，那么您就节省了复制原始程序内存的开销。

回到你的问题，这个想法是相似的。正如其他人指出的那样，请求内存会立即为您提供虚拟内存空间，但实际页面仅在写入时才分配。

这样做的目的是什么？它基本上使分配内存成为或多或少的恒定时间操作 Big O(1) 而不是 Big O(n) 操作（类似于 linux 调度程序传播它的方式而不是在一个大块中执行它）。

为了证明我的意思，我做了以下实验：

```
rbarnes@rbarnes-desktop:~/test_code$ time ./bigmalloc 

real    0m0.005s
user    0m0.000s
sys 0m0.004s
rbarnes@rbarnes-desktop:~/test_code$ time ./deadbeef 

real    0m0.558s
user    0m0.000s
sys 0m0.492s
rbarnes@rbarnes-desktop:~/test_code$ time ./justwrites 

real    0m0.006s
user    0m0.000s
sys 0m0.008s 
```

bigmalloc 程序分配了 2000 万个整数，但对它们不做任何事情。deadbeef 将一个 int 写入每个页面，导致 19531 次写入，而 justwrites 分配 19531 个 int 并将它们清零。如您所见， deadbeef 的执行时间比 bigmalloc 长约 100 倍，比 justwrites 长约 50 倍。

```
#include <stdlib.h>    

int main(int argc, char **argv) {

int *big = malloc(sizeof(int)*20000000); // allocate 80 million bytes

return 0;

} 
```

.

```
#include <stdlib.h>    

int main(int argc, char **argv) {

int *big = malloc(sizeof(int)*20000000); // allocate 80 million bytes

// immediately write to each page to simulate all at once allocation

// assuming 4k page size on 32bit machine

for ( int* end = big + 20000000; big < end; big+=1024 ) *big = 0xDEADBEEF ;    

return 0;

} 
```

.

```
#include <stdlib.h>

int main(int argc, char **argv) {

int *big = calloc(sizeof(int),19531); // number of writes

return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T16:41:06.917

是的，除非您触摸它，否则内存不会映射到您的内存空间。mallocing 内存只会设置分页表，因此他们知道当您在分配的内存中遇到页面错误时，应该映射内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T16:41:19.227

你在使用编译器优化吗？也许优化器已经删除了分配，因为您没有使用分配的资源？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T21:23:16.990

该功能称为**过度**使用- 内核通过增加数据段大小来“承诺”您的内存，但不会为其分配物理内存。当您触摸该新空间中的地址时，进程页面错误会进入内核，然后内核会尝试将物理页面映射到该地址。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-14T06:50:12.150

是的，请注意[VirtualAlloc](http://msdn.microsoft.com/en-us/library/aa366887(VS.85).aspx)标志，

```
MEM_RESERVE
MEM_COMMIT 
```

.

嘿，但是对于*Linux*或任何[POSIX/BSD/SVR#](http://opengroup.org/onlinepubs/007908775/xsh/vfork.html)系统，vfork() 已经存在了很长时间并提供了类似的功能。

> vfork() 函数与 fork() 的区别仅在于子进程可以与调用进程（父进程）共享代码和数据。如果 vfork() 被滥用，这会显着加速克隆活动，但会危及父进程的完整性。
> 
> 不建议将 vfork() 用于任何目的，除非作为立即调用 exec 系列函数或 _exit() 的前奏。
> 
> vfork() 函数可用于创建新进程，而无需完全复制旧进程的地址空间。如果分叉的进程只是要调用 exec，则不会使用通过 fork() 从父进程复制到子进程的数据空间。这在分页环境中特别低效，因此 vfork() 特别有用。根据父数据空间的大小，vfork() 可以比 fork() 显着提高性能。

# asp.net - 在哪里插入脚本块

> ID：864429
> 
> 赞同：1
> 
> 时间：2009-05-14T16:41:13.157
> 
> 标签：asp.net, javascript, master-pages, unobtrusive-javascript

困境是这样的：

如果我尝试在母版页上放置所有脚本块（包括某些框架中的页面），每个页面都会获得每个脚本的副本（包括它们不需要的脚本），这些脚本会迅速加起来并增大页面大小。

如果我在需要的地方包含/插入脚本块，javascript 将遍布整个项目。

我正在努力在哪里保持正确的平衡。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T16:44:42.493

包含所有 JS 文件不是主要问题（除非它们在加载时运行缓慢的代码），并且不会使页面膨胀太多：一旦加载，浏览器无论如何都会缓存它们，因此会导致 0 负载下一页的时间。

只要不把JS文件的内容放到页面本身，当然可以！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:45:38.093

如果您的页面大小膨胀是一个问题，那么也许您应该将您的 Javascript 移出到需要它的页面引用的单独的 js 文件（甚至多个）中。这确实意味着您将对首次访问者有更多的 HTTP 请求，但它使浏览器可以缓存 Javascript，以便它不需要为您网站上的每个页面再次获取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:51:09.343

我会尽可能多地将 JavaScript 提取到外部`.js`文件中。在母版页中包含最常用的库，但如果任何单个页面需要特定于该页面的 JavaScript，我建议仅在该页面上加载它。保留哪些页面加载了哪些文件的交叉引用，`.js`如果您看到一个库被很多页面引用，请将其移至母版页。

请务必使用[YUI Compressor](http://developer.yahoo.com/yui/compressor/)之类的工具或[您使用什么来最小化和压缩 JavaScript 库？](https://stackoverflow.com/questions/599911).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:47:24.860

如果你缩小你的脚本，这不是什么大问题，像 jquery 这样大的东西在缩小后大约是 50k。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-14T11:47:41.677

我们对站点范围的 JS 进行压缩、合并和 gzip 压缩（实际上是将大约 17 个文件合并为两个文件，一个用于我们所有的代码，一个用于库代码，如 mootools 和 clientcide）。这大大减少了下载脚本所需的时间。压缩和合并已经完成，并且在服务器上运行并缓存，因此开发根本不会减慢。如上所述，一旦全部压缩，我们用于站点范围内的好东西的总 JS 约为 50K。

我们还在文件上设置了一个较长的过期时间，这些文件都有一个版本号，所以当我们进行更改时，我们会增加版本号（我们有一个全站范围的版本号以使其更容易）并且用户被迫获得一个新版本，并且一次下载它们被浏览器缓存。

除此之外，我们已经将我们的 JS 放在页面的页脚，这样可以更快地呈现所有内容，并在我们下载 JS 时为用户提供一些可以查看的内容。

一些单独的页面有他们需要的一次性脚本（搜索表单等），它们得到与上面相同的处理（即所有需要的文件都将被合并、缩小、压缩），但站点范围内的代码保持不变，因此我们可以制作缓存的使用。因此，在这种情况下，我们可以为该页面下载 3 个 JS 文件、站点范围、库和自定义代码。

# c++ - 如何在 C++ 中杀死然后重新启动一个进程？

> ID：864431
> 
> 赞同：-2
> 
> 时间：2009-05-14T16:41:55.373
> 
> 标签：c++, windows, winapi

我想从我的 C++ 应用程序中杀死并重新启动 explorer.exe，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T17:31:32.680

识别应用程序的主窗口（例如通过使用 FindWindow）并向其发送 WM_QUIT。

使用 SendMessageTimeout() 发送它；此功能允许您指定您愿意等待应用程序处理它的时间。如果 SendMessageTimeout() 因为超时而返回，请使用 TerminateProcess()。

这是 SendMessageTimeout 规范的链接：http: [//msdn.microsoft.com/en-us/library/ms644952 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms644952(VS.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T17:27:32.610

您可以使用**CreateProcess**来生成 explorer.exe 和**TerminateProcess**来杀死它。**上面回复中提到的ExitProcess**仅适用于当前进程（即您从中调用 ExitProcess 的进程）。

您还可以使用**OpenProcess**访问已通过其他方式创建的进程。

[开放式进程](http://msdn.microsoft.com/en-us/library/ms684320(VS.85).aspx)

[终止进程](http://msdn.microsoft.com/en-us/library/ms686714(VS.85).aspx)

```
BOOL WINAPI TerminateProcess
(
  __in  HANDLE hProcess,
  __in  UINT uExitCode
); 
```

CreateProcess 具有以下签名：

```
BOOL WINAPI CreateProcess(
  __in_opt     LPCTSTR lpApplicationName,
  __inout_opt  LPTSTR lpCommandLine,
  __in_opt     LPSECURITY_ATTRIBUTES lpProcessAttributes,
  __in_opt     LPSECURITY_ATTRIBUTES lpThreadAttributes,
  __in         BOOL bInheritHandles,
  __in         DWORD dwCreationFlags,
  __in_opt     LPVOID lpEnvironment,
  __in_opt     LPCTSTR lpCurrentDirectory,
  __in         LPSTARTUPINFO lpStartupInfo,
  __out        LPPROCESS_INFORMATION lpProcessInformation
); 
```

注意最后一个参数，您应该为此传递一个指向 PROCESS_INFORMATION 结构的指针。此结构包含 CreateProcess 返回时的句柄、进程 ID 等。

```
typedef struct _PROCESS_INFORMATION {
  HANDLE hProcess;
  HANDLE hThread;
  DWORD  dwProcessId;
  DWORD  dwThreadId;
}PROCESS_INFORMATION, *LPPROCESS_INFORMATION; 
```

如果您已经拥有通过其他方式创建的流程，那么您将无法获得流程句柄等信息。在这种情况下，您应该枚举进程并找到您感兴趣的进程。这在 MSDN 上进行了说明。[枚举所有进程](http://msdn.microsoft.com/en-us/library/ms682623(VS.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T20:48:32.020

```
#include <cstdio>
#include <windows.h>
#include <tlhelp32.h>

void LaunchExplorer() {
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof( si ) );

    si.cb = sizeof( si );

    CreateProcess( "explorer.exe", NULL, NULL, NULL, false, NORMAL_PRIORITY_CLASS, NULL, NULL, &si, &pi );
}

int main( int, char *[] ) {
    PROCESSENTRY32 entry;
    entry.dwFlags = sizeof( PROCESSENTRY32 );

    HANDLE snapshot = CreateToolhelp32Snapshot( TH32CS_SNAPPROCESS, NULL );

    if ( Process32First( snapshot, &entry ) == TRUE ) {
        while ( Process32Next( snapshot, &entry ) == TRUE ) {
            if ( stricmp( entry.szExeFile, "explorer.exe" ) == 0 ) {
                HANDLE hProcess = OpenProcess( PROCESS_QUERY_INFORMATION | PROCESS_VM_READ | PROCESS_TERMINATE, FALSE, entry.th32ProcessID );

                TerminateProcess( hProcess, 0 );

                CloseHandle( hProcess );

                break;
            }
        }

        LaunchExplorer();
    }

    CloseHandle( snapshot );

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:15:21.453

由于现代 Windows 系统符合 POSIX，您可以向外部进程发送 KILL 信号。但是，请注意，这将被转换为 TerminateProcess 调用，因此您不妨直接使用它。

[http://www.mkssoftware.com/docs/man1/kill.1.asp](http://www.mkssoftware.com/docs/man1/kill.1.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-19T17:59:14.130

我的回答为时已晚，但以防万一需要它的人...

```
/////////////////////////////////////////////////////////////////////////////
bool _killExplorer()
{
    CString strCmd1_KillExplorer = _T("taskkill /f /im explorer.exe");

    PROCESS_INFORMATION pi;
    STARTUPINFO si = { sizeof si };
    bool bCmd = true;
    TCHAR szCmdTmp[MAX_PATH];
    _tcscpy(szCmdTmp, (LPCTSTR)strCmd1_KillExplorer);
    if (CreateProcess(NULL, (LPTSTR)szCmdTmp, NULL, NULL, NULL, CREATE_NO_WINDOW, NULL, NULL, &si, &pi)) {
        WaitForSingleObject(pi.hProcess, INFINITE);
        DWORD dwCode = 0;
        if (!GetExitCodeProcess(pi.hProcess, &dwCode))
            bCmd = false;
        CloseHandle(pi.hThread);
        CloseHandle(pi.hProcess);
    }
    else {
        bCmd = false;
    }
    return bCmd;
}   // _killExplorer()

bool _startExplorer()
{
    CString strCmd2_StartExplorer = _T("%systemroot%\\sysnative\\cmd.exe /c start /B explorer.exe");
    TCHAR szCmdTmp[MAX_PATH];
    DWORD dwSize = MAX_PATH;
    ExpandEnvironmentStrings( (LPCTSTR)strCmd2_StartExplorer, szCmdTmp, dwSize );

    PROCESS_INFORMATION pi;
    STARTUPINFO si = { sizeof si };
    bool bCmd = true;
    if (CreateProcessW( NULL, (LPTSTR)szCmdTmp, NULL, NULL, NULL, CREATE_NO_WINDOW, NULL, NULL, &si, &pi)) {
        WaitForSingleObject(pi.hProcess, INFINITE);
        DWORD dwCode = 0;
        if (!GetExitCodeProcess(pi.hProcess, &dwCode))
            bCmd = false;
        CloseHandle(pi.hThread);
        CloseHandle(pi.hProcess);
    }
    else {
        bCmd = false;
    }
    return bCmd;
}   // _startExplorer()

void RestartExplorer()
{
    if (_killExplorer()) {
        _startExplorer();
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-18T17:15:35.927

永远不要杀死探险家：这毫无意义！
只需使用 Refreshing Win32 Shell api。

# python - 如何修改管理页面上的选择 - django

> ID：864433
> 
> 赞同：10
> 
> 时间：2009-05-14T16:42:16.370
> 
> 标签：python, django, django-models, django-admin

我有一个模型，它有一个名为“state”的字段：

```
class Foo(models.Model):
    ...
    state = models.IntegerField(choices = STATES)
    ... 
```

对于每个状态，可能的选择是所有状态的某个子集。例如：

```
if foo.state == STATES.OPEN:     #if foo is open, possible states are CLOSED, CANCELED
    ...
if foo.state == STATES.PENDING:  #if foo is pending, possible states are OPEN,CANCELED
    ... 
```

结果，当 foo.state 更改为新状态时，其可能的选择集也会更改。

如何在管理员添加/更改页面上实现此功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-03T21:09:39.513

当您为模型（例如 MyModelAdmin）创建新的管理界面时，有一些特定的方法可以覆盖字段的默认选择。对于通用[选择字段](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_choice_field)：

```
class MyModelAdmin(admin.ModelAdmin):
    def formfield_for_choice_field(self, db_field, request, **kwargs):
        if db_field.name == "status":
            kwargs['choices'] = (
                ('accepted', 'Accepted'),
                ('denied', 'Denied'),
            )
            if request.user.is_superuser:
                kwargs['choices'] += (('ready', 'Ready for deployment'),)
        return super(MyModelAdmin, self).formfield_for_choice_field(db_field, request, **kwargs) 
```

但您也可以覆盖[ForeignKey](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)和[多对多](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany)关系的选择。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-14T21:35:38.770

您需要在该模型的 ModelAdmin 类中[使用自定义 ModelForm 。](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form)在自定义 ModelForm 的 __init__ 方法中，您可以动态设置该字段的选项：

```
class FooForm(forms.ModelForm):
    class Meta:
        model = Foo

    def __init__(self, *args, **kwargs):
        super(FooForm, self).__init__(*args, **kwargs)
        current_state = self.instance.state
        ...construct available_choices based on current state...
        self.fields['state'].choices = available_choices 
```

你会这样使用它：

```
class FooAdmin(admin.ModelAdmin):
    form = FooForm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T21:40:32.423

这似乎是一些 javascript 的工作。您希望选择框中的项目列表根据其他内容（可能是复选框或单选按钮）的值进行更改。使这种情况动态发生的唯一方法——无需让用户保存表单并重新加载页面——将使用 javascript。

您可以使用 ModelAdmin 的 Media 类在模型的管理页面中加载自定义 javascript，在[此处](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-media-definitions)记录。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-14T17:32:41.397

我知道您要做什么，但是为什么不只显示所有这些，并且如果该人选择（已经设置的）当前状态，则不要更改任何内容？

您也可以使用表单构建视图以提供此功能

# c# - 为什么微软不使用 C# 开发类似 Halo 的下一代游戏？

> ID：864437
> 
> 赞同：14
> 
> 时间：2009-05-14T16:42:44.310
> 
> 标签：c#, .net

这个问题可能看起来很主观，但考虑到微软：

*   拥有 Xbox 360 平台
*   拥有Windows平台
*   拥有自己的游戏工作室（MGS）
*   拥有其他 3rd 方开发人员
*   是主要出版商

让我想知道为什么微软不推动他们的旗舰语言来证明你不仅可以减少大量的开发时间和金钱，而且还表明你可以发布一个实时交互性不受影响的下一代游戏。

如果微软这样做一次，我相信许多 AAA 开发人员也会跳上这辆马车。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-14T16:50:01.843

你需要问一个稍微不同的问题。

> 为什么微软不用完全不同的语言重写它现有的高度优化的游戏引擎。

希望这是一个更自我解释的问题。

我对游戏系统代码库几乎一无所知，但我当然不认为它很小。将除普通应用程序之外的任何内容从 C++ 转换为任何其他托管语言都是一项**艰巨**的任务。

忘记在 C# 中无法完成的所有语法差异和 C++ 功能/黑客，对于游戏应用程序，对话前面的一个问题将是完美的。C# 并不慢，但它具有截然不同的性能特征。几乎可以肯定的是，如果直接移植到 C#，经过高度调优的 C++ 游戏代码的性能几乎不会那么好。必须进行新一轮的性能调整，而且成本不菲。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-14T17:00:57.010

首先，XNA 不是一个选择。它的目的是消除 PC 和 360 之间的差异。高性能游戏无法做到这一点。它必须利用这些差异。360 在哪里发光，就必须利用性能。在糟糕的地方，必须开发变通方法。对于 PC，反之亦然。

这也是存在其他 DirectX 包装器的原因（SlimDX 被认为是更直接的 D3D 包装器）。

至于一般的托管代码，我想到了几个问题：

*   他们已经有一个庞大的代码库，他们想继续使用。减少开发时间的方法**不是**把所有东西都扔到窗外，然后用另一种语言从头开始。
*   大多数游戏工作室仍然拥有一定的自主权，即使它们归微软所有。如果他们更喜欢用 C++ 编写游戏，微软可以否决它吗？这样做是个好主意吗？这肯定会激怒开发人员，而激怒开发人员通常不是一件好事。
*   性能：是的，C# 和 .NET 在 PC 上的表现非常好，但在控制台上，情况就不同了。它使用 .NET CF，其中包括一个非常原始的垃圾收集器。坦率地说，它的 JIT 编译器很糟糕。.NETCF 的设计目的不是为了超越经过良好调整的本机代码。
*   控制：您通常编写 AAA 主机游戏的方式是利用主机所提供的一切。每个使用的 CPU 周期都应该或多或少地考虑到内存的每个字节。托管代码的可预测性更差。GC 什么时候运行？在任何给定时间使用了多少内存？我们不知道。控制台只有非常有限的内存量。（360 有 512MB iirc。这对于现代游戏来说并不多，而且只有知道谁在使用多少内存，才能制作像 Halo 3 这样的游戏*）*。
*   360 上的大多数功能根本不会暴露给 .NET。许多硬件功能需要 C++ 互操作或汇编程序才能利用。

话虽如此，使用 .NET 来制作备受瞩目的 PC 游戏会更好。完整的 .NET 框架具有更好的性能特征，而且 PC 上的可用硬件无论如何都会有所不同，因此严格控制确切的内存使用情况并不那么重要。

但最终，他们为什么要这样做？这将是一个很大的风险，它需要大量的代码重写，他们到底想证明什么？大多数工作室制作跨平台游戏，对于他们来说，.NET 不是一个选择，无论它多么棒。他们也希望能够在 PS3、Wii 或......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-14T16:50:12.683

很简单，对于第一人称射击游戏提出的类似实时的性能问题，C# 无法胜任。并不是说它不是一门好语言，我使用它并且喜欢使用它，但事实是 C# 中的垃圾收集引入的不确定性使其不适合具有高性能要求的游戏。Java 也是如此。只有当你达到一定程度的超额性能可用时，你才能真正做这样的事情；真正的问题是，其他人将获得额外的性能，而不是将其纳入 C#（或 Java，也会有类似问题）的运行时要求，他们只会制作更好看的游戏。由于消费者并不真正关心游戏是用什么技术开发的，他们'

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-14T16:51:01.543

微软有一个类似的平台，称为[XNA](http://creators.xna.com/en-US/)，他们在过去三年中一直在开发。有许多概念证明、入门工具包和其他资源可供爱好者开发人员和 AAA 工作室使用。

XNA 使各类开发人员能够使用他们现有的 C# 技能和 Xbox 360 / Windows 的强大功能为任一/两个平台构建游戏。他们自己还没有使用该平台开发商业游戏，但已经有许多非常酷的项目使用 XNA。

看看使用 XNA[创建的一些游戏。](http://catalog.xna.com/en-US/gamescatalog.aspx)

此外，对于有关 C# 性能的评论，您可能会对有关该主题的[论坛讨论感兴趣。](http://www.codeguru.com/forum/showthread.php?p=506683)对于许多游戏来说，它绝对足够快；事实上，XNA 在 Xbox 上的执行引擎在许多方面针对游戏开发场景进行了优化，并降低了垃圾收集的成本（我没有可以引用的来源，但我曾在 .NET 执行引擎上实习过的Xbox 360）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-14T16:51:18.953

实际上，如果你看看情况，微软在游戏工作室中的参与度几乎没有。Bungie 现在是一个半独立的实体，他们关闭了 Ensemble（帝国时代、光环战争），不知道是什么原因……他们关闭了 Flight Simulator 小组，他们让 Bioware 的排他性（龙腾世纪、Baldurs Gate、NWN ) 和 Bizarre (Project Gotham Racing) 去了，他们关闭了 FASA Interactive (Shadowrun)。在这一点上，他们真正拥有的是什么？我能想到的只是……稀有和狮头。

至于他们为什么不使用 C# 制作 AAA 标题。我想其中很大一部分是遗留问题。PGR、极限竞速、帝国时代、光环、模拟飞行，几乎他们制作的每款游戏都是之前系列的迭代，因此已经对现有基础设施进行了大量投资。

这留下了第 3 方。为什么第三方不使用 C#？很简单，它在 Wii 或 PS3 上不可用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-14T17:28:53.823

.NET 框架通常不是为游戏开发而设计的。.NET 的目标受众*主要是*业务应用程序（我知道它可以用于更多用途，但请稍等片刻）。

当您编写游戏时，您需要一种语言，让您尽可能地与硬件亲密接触。C++ 和汇编是经典示例，您可以在其中从处理器、GPU 和图形库中榨取最后一盎司的性能。

.NET 框架的开发并未考虑到这种控制。.NET 适合以非常富有表现力的方式快速构建应用程序 - 不一定要驱动高性能 GPU 的微小细节。

# delphi - 用 Delphi 实现 nsIProtocolHandler

> ID：864443
> 
> 赞同：4
> 
> 时间：2009-05-14T16:43:31.717
> 
> 标签：delphi, firefox, delphi-7, gecko

我正在尝试在 Delphi 中构建一个 nsIProtocolHandler 实现。（我之前成功地完成了一个 IInternetProtocol，并希望在 FireFox 中拥有我在 Internet Explorer 中所拥有的东西。）感谢[d-gecko](http://sourceforge.net/projects/d-gecko)项目，它以某种方式将 TInterfacedObject 魔法与 nsISupports 魔法联系起来，我能够制作一个在被询问时提供 nsIModule 的 DLL，在被询问时提供 nsIFactory，在被询问时提供我的 nsIProtocolHandler 之一，在被询问时提供我的 nsIChannel/nsIHttpChannel 之一。

当使用 firefox.exe 作为主机进程进行调试时，我可以看到我的库被加载，NewURI 被调用了 3 次，NewChannel 被调用，并且我传递了一个实现 nsIChannel 和[nsIHttpChannel](https://developer.mozilla.org/en/nsIHttpChannel)的对象。

这就是我困扰的地方。在我从 AsyncOpen 返回控制权之前，我不应该在我得到的 nsIStreamListener 上调用 OnStartRequest 和 OnDataAvailable，但我似乎没有在调用 AsyncOpen 的线程中重新获得控制权。

我尝试使用围绕默认http处理程序的自制包装器进行调试（使用`CreateInstanceByContractID('@mozilla.org/network/protocol;1?name=http',`...）。我也把监听器包裹过去了。奇怪的是，我看到 OnStartRequest 和 OnDataAvailable 在我的通道包装器死后在同一个线程中被*调用*。但谁在打电话？如果它是我试图包装的 http 通道，它如何生存（在同一个线程中）以及它如何控制调用侦听器？我很困惑。并且卡住了。

我曾尝试联系 d-gecko 项目的主要开发人员，但没有得到回应。

（另外，有人注意到我[在 nsIProtocolHandler 上 MDC 讨论页](https://developer.mozilla.org/Talk:En/NsIProtocolHandler)底部的简介吗？）

（哦，还有一件事，是的，我知道“生活会更简单”，如果我只是从 C++ 中的 nsBaseChannel 继承。但重点是在现有的 Delphi 项目核心中添加一个 FireFox 协议处理程序。）

**更新：**我已经阅读了更多内容，[这里](http://www.oxymoronical.com/experiments/apidocs/platform/1.9.1b3pre/interface/nsIStreamListener/usage)也提到了：“流侦听器的方法在调用 asyncOpen [...] 的线程上被调用”，但是如果不先从“托管应用程序”调用，这怎么可能？ ，我不清楚。这是XPCOM的把戏吗？我想在我得到它之前我必须阅读（很多）更多的 Firefox 源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T08:02:55.350

我对 Mozilla 编码一无所知，但它就在这里。

根据[nsIChannel::asyncOpen()](https://developer.mozilla.org/en/nsIChannel#asyncOpen%28%29)，

> 异步打开该通道。数据在可用时被馈送到指定的流侦听器。流侦听器的方法在调用 asyncOpen 的线程上被调用，直到 asyncOpen 返回后才被调用。如果 asyncOpen 成功返回，则通道承诺至少调用 onStartRequest 和 onStopRequest。

因此，作为协议处理程序，您自己实现一个通道对象或将其重定向到一个通道对象，通道的使用者使用`asyncOpen()`. 由于它是异步调用，因此想法是立即将控制权返回给使用者，并且假设在加载数据时调用回调。

我不确定我是否理解您所说的“但我似乎无法在调用 AsyncOpen 的线程中重新获得控制权”。线程由协议的使用者创建，并打开通道。

同样来自[nsIChannel::asyncOpen()](https://developer.mozilla.org/en/nsIChannel#asyncOpen%28%29)：

> 如果 asyncOpen 成功返回，则通道负责保持自身处于活动状态，直到它在 aListener 上调用 onStopRequest 或调用 onChannelRedirect。

由于 asyncOpen 会立即返回控制权，因此通道本身需要在某个地方保持活动状态。

如果您正在寻找示例代码，我发现 codease 非常有用。请参阅[nsIProtocolHandler](http://codase.com/search/call?name=nsIProtocolHandler)和 [nsIChannel](http://codase.com/search/call?name=nsIChannel)。使用它我遇到了[视图源协议](http://web.mit.edu/Source/third/mozilla/netwerk/protocol/viewsource/src/)（这个实现可能更旧，但没关系）。

[`nsViewSourceHandler`](http://web.mit.edu/Source/third/mozilla/netwerk/protocol/viewsource/src/nsViewSourceHandler.cpp)实现自定义通道。

```
nsViewSourceHandler::NewChannel(nsIURI* uri, nsIChannel* *result)
{
    nsresult rv;

    nsViewSourceChannel* channel;
    rv = nsViewSourceChannel::Create(nsnull, NS_GET_IID(nsIChannel), (void**)&channel);
    if (NS_FAILED(rv)) return rv;

    rv = channel->Init(uri);
    if (NS_FAILED(rv)) {
        NS_RELEASE(channel);
        return rv;
    }

    *result = NS_STATIC_CAST(nsIViewSourceChannel*, channel);
    return NS_OK;
} 
```

这是[`nsViewSourceChannel`](http://web.mit.edu/Source/third/mozilla/netwerk/protocol/viewsource/src/nsViewSourceChannel.cpp)AsyncOpen：

```
nsViewSourceChannel::AsyncOpen(nsIStreamListener *aListener, nsISupports *ctxt)
{
    NS_ENSURE_TRUE(mChannel, NS_ERROR_FAILURE);

    mListener = aListener;

    /*
     * We want to add ourselves to the loadgroup before opening
     * mChannel, since we want to make sure we're in the loadgroup
     * when mChannel finishes and fires OnStopRequest()
     */

    nsCOMPtr<nsILoadGroup> loadGroup;
    mChannel->GetLoadGroup(getter_AddRefs(loadGroup));
    if (loadGroup)
        loadGroup->AddRequest(NS_STATIC_CAST(nsIViewSourceChannel*,
                                             this), nsnull);

    nsresult rv = mChannel->AsyncOpen(this, ctxt);

    if (NS_FAILED(rv) && loadGroup)
        loadGroup->RemoveRequest(NS_STATIC_CAST(nsIViewSourceChannel*,
                                                this),
                                 nsnull, rv);

    if (NS_SUCCEEDED(rv)) {
        mOpened = PR_TRUE;
    }

    return rv;
} 
```

无论如何，这是一个漫长而曲折的询问方式，您是如何创建频道的？

# http - 如何使用 gzip 设置内容编码

> ID：864448
> 
> 赞同：6
> 
> 时间：2009-05-14T16:44:09.390
> 
> 标签：http, http-headers, gzip

我正在用 gzip 压缩 html 文件。
当我请求 index.html 时，浏览器（FF 3.0.10）不解压缩或显示 index.html.gz（在服务器上预压缩）

我在哪里可以确认压缩标题“内容编码”和浏览器“接受编码”？（我在 C 中使用 zlib API 进行压缩）

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-14T16:49:16.073

如果浏览器发送

```
Accept-Encoding: gzip 
```

您可以压缩 http 响应的**内容**，而不是服务器文件系统上的文件。然后在您的 HTTP 响应中，您必须设置这些标头：

```
Content-Length: totalBytes
Content-Encoding: gzip 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T17:03:31.327

（从技术上讲，您还应该在响应中设置 Vary: Accept-Encoding，以使缓存清楚地知道响应将根据此请求标头而有所不同。）

# cookies - 我似乎无法从 cookie 访问到期日期？

> ID：864471
> 
> 赞同：0
> 
> 时间：2009-05-14T16:50:38.720
> 
> 标签：cookies

我想模仿一个网站的滑动到期，但我似乎无法访问我的 cookie 上的到期时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T17:13:28.680

这实际上取决于您使用的技术堆栈以及您是否可以挂钩或覆盖 cookie 处理。但是，在大多数情况下，过期日期由服务器处理，以查看是否应忽略 cookie（在许多情况下，客户端可能会做出此决定，甚至不发送过期的 cookie）。

如果您希望您的应用程序能够可靠地访问特定于应用程序的 cookie 参数，最好将此字段添加到 cookie 值中，而不是依赖被视为 cookie 元数据一部分的过期字段。当然，它是重复的，但它会更可靠地工作。

# c# - 为什么 double 和 float 存在？

> ID：864473
> 
> 赞同：0
> 
> 时间：2009-05-14T16:50:49.967
> 
> 标签：c#, sql, double, decimal, math

### 复制

> [我什么时候应该使用双精度而不是十进制？](https://stackoverflow.com/questions/803225/when-should-i-use-double-instead-of-decimal)
> 
> > .. 还有很多...

由于它们的准确性，我们在整个应用程序中使用 C# 和 SQL Server 十进制数据类型。从来没有遇到过任何令人讨厌的问题，即总数不等于细节等。

我想知道为什么 double 和 float 存在，因为它们不准确

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T16:56:24.213

浮点运算的出现是因为它是在硬件成本合理的情况下对大量非整数进行运算的唯一方法。无限精度算术在多种语言（Python、LISP 等）和库（Java 的 BigNum、GMP 等）中实现，是需要更高准确性的人们（例如金融业）的替代方案。对于我们其他大多数人来说，他们处理中等规模的数字，`floats`或者当然`doubles`足够准确。两种不同的浮点数据类型（分别对应于 IEEE 754 单精度和双精度），因为单精度浮点单元比双精度单元具有更好的面积、功率和速度属性，因此硬件设计师和程序员应该做出适当的权衡来利用这些不同的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:53:05.580

它们比十进制*快得多*，而且您通常不需要精确的精度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:54:55.217

“十进制”是 128 位，双精度是 64 位，浮点数是 32 位。在过去，这很重要。

Decimal 主要用于货币交易（以避免四舍五入），其他对于 29 位小数的准确性没有任何现实意义的事情来说已经足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:54:54.577

十进制数据类型的缺点是性能。

这篇文章很好地涵盖了它：

[十进制与双倍速](https://stackoverflow.com/questions/329613/decimal-vs-double-speed)

# wordpress - 如何在下拉列表中显示 wordpress 作者列表，并带有指向作者模板的链接？

> ID：864479
> 
> 赞同：1
> 
> 时间：2009-05-14T16:51:26.333
> 
> 标签：wordpress, list, drop-down-menu, author

我正在寻找一种方法将 wordpress 博客的作者显示为下拉菜单，并带有一个将用户重定向到作者页面的 on change 事件，该页面列出了该用户以前写的所有帖子。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T18:25:18.150

**更新**实际上，您应该能够简单地使用 wp_list_authors() 来完成整个事情，因为它会自动生成一个作者列表，其中包含指向显示所有帖子的页面的链接。有关详细信息，请参阅[http://codex.wordpress.org/Template_Tags/wp_list_authors#Markup_and_Styling_of_Author_Lists 。](http://codex.wordpress.org/Template_Tags/wp_list_authors#Markup_and_Styling_of_Author_Lists)

我正在使用这个插件来显示作者的帖子，并且效果很好。[http://www.dagondesign.com/articles/posts-by-author-plugin-for-wordpress/](http://www.dagondesign.com/articles/posts-by-author-plugin-for-wordpress/)

我有一个 author.php 模板，它显示作者的信息（图片、简介），在它下面我使用上面的插件显示他们最近的 5 篇文章。

为了显示我正在使用这个插件的图片：[http ://wordpress.org/extend/plugins/user-photo/](http://wordpress.org/extend/plugins/user-photo/)

要获取下拉内容，您可以使用这个 wp 函数：

```
<?php wp_list_authors(); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-25T16:36:59.653

WordPress 现在添加了一个功能来做到这一点：

```
<?php wp_dropdown_users( $args ); ?> 
```

你只需要输入你的论点。如果您需要一个带有提交按钮的 HTML 表单中的示例，这里有一个[http://bit.ly/wWunIE](http://bit.ly/wWunIE)

希望有帮助。

# .net - 获取当前程序集的路径

> ID：864484
> 
> 赞同：45
> 
> 时间：2009-05-14T16:52:39.107
> 
> 标签：.net, vb.net, visual-studio

如何获取当前程序集的路径？我需要从一些相对于当前程序集 (.dll) 位置的路径获取数据。

我以为有人告诉我使用反射命名空间，但我在那里找不到任何东西。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2009-05-14T16:55:43.980

您可以使用：

```
string path = (new System.Uri(Assembly.GetExecutingAssembly().CodeBase)).AbsolutePath; 
```

评论中的一些建议是通过`System.Uri.UnescapeDataString` *（来自[vvnurmi](https://stackoverflow.com/questions/864484/getting-the-path-of-the-current-assembly#comment22517648_864497)）*以确保处理任何百分比编码，并使用`Path.GetFullpath` *（来自[TrueWill](https://stackoverflow.com/questions/864484/getting-the-path-of-the-current-assembly#comment6266279_864497)）*确保路径为标准 Windows 形式（而不是使用斜杠而不是反斜杠） . 这是您在每个阶段获得的示例：

```
string s = Assembly.GetExecutingAssembly().CodeBase;
Console.WriteLine("CodeBase: [" + s + "]");
s = (new Uri(s)).AbsolutePath;
Console.WriteLine("AbsolutePath: [" + s + "]");
s = Uri.UnescapeDataString(s);
Console.WriteLine("Unescaped: [" + s + "]");
s = Path.GetFullPath(s);
Console.WriteLine("FullPath: [" + s + "]"); 
```

如果我们正在运行，则输出`C:\Temp\Temp App\bin\Debug\TempApp.EXE`：

```
代码库：[file:///C:/Temp/Temp App/bin/Debug/TempApp.EXE]
绝对路径：[C:/Temp/Temp%20App/bin/Debug/TempApp.EXE]
未转义：[C:/Temp/Temp App/bin/Debug/TempApp.EXE]
完整路径：[C:\Temp\Temp App\bin\Debug\TempApp.EXE]

```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-05-14T16:57:12.073

`System.Reflection.`[`Assembly`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.aspx). [`GetExecutingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx).[`Location`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.location.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-14T18:41:53.133

只是为了说清楚：

```
Assembly.GetExecutingAssembly().Location 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-07T20:50:34.047

我更喜欢

```
new System.Uri(Assembly.GetExecutingAssembly().EscapedCodeBase).LocalPath; 
```

EscapedCodeBase 涵盖了本地路径中可能包含无效 URI 字符的情况（请参阅[https://stackoverflow.com/a/21056435/852208](https://stackoverflow.com/a/21056435/852208)）

LocalPath 包括本地路径和 unc 路径的完整路径，其中 AbsolutePath 修剪掉“\\server”

# sql - 如何编写条件是函数结果的 SELECT 语句

> ID：864487
> 
> 赞同：3
> 
> 时间：2009-05-14T16:52:47.997
> 
> 标签：sql, postgresql

我想写一个SELECT语句如下：

```
SELECT field_a 
FROM my_table
WHERE field_b IN (my_function(field_c)). 
```

那可能吗？

`my_function`将不得不返回一个数组？

我正在使用 PostgreSQL 8.2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T17:02:37.320

```
SELECT  *
FROM    (
        SELECT  field_a, field_b, my_function(field_c) fc
        FROM    mytable
        ) q
WHERE   field_b = fc 
```

您的函数的返回类型应该是`SETOF`（例如`SETOF INT`，`SETOF VARCHAR`等）

请注意，您可以使用如下`IN`样式表达式：

```
SELECT  field_a, field_b
FROM    mytable
WHERE   field_b IN (SELECT my_function(field_c)) 
```

，但如果您的函数返回复杂类型，则首选前一种样式，因为您可以比较复杂类型的一个字段并在一个查询中返回另一个字段，如下所示：

```
FUNCTION my_function RETURNS SETOF anothertable

/* This will return a set of records of same layout as in table "anothertable" */

SELECT  field_a, field_b, fc.column1, fc.column2
FROM    (
        SELECT  field_a, field_b, my_function(field_c) fc
        FROM    mytable
        ) q
WHERE   field_b = fc.column1 
```

我们在`column1`这里比较并返回`column1`和`column2`。

这对于相关子查询是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:01:21.753

只要 my_function 的返回类型只是与 field_b 具有相同类型的结果集（如 Varchar(20) 或 int），那么您应该没问题。

# php - 在网页中包含 Javascript

> ID：864489
> 
> 赞同：0
> 
> 时间：2009-05-14T16:53:42.567
> 
> 标签：php, javascript, jquery

谁能推荐在（基于PHP的）网页上包含多个Javascript文件的最佳和最简单的方法？

我有一个使用 jQuery 的网站，以及任何一个特定页面上最多大约 10 个插件。我不完全确定包含所有这些文件的最佳方式，以使我作为开发人员的生活变得简单，并确保为用户提供最好的服务。

理想情况下，我认为自己最简单的方法是构建一个 PHP 处理程序文件，我可以使用它来调用每个页面所需的插件，然后让它输出使用 document.write() 来“包含”每个插件 JS 文件的 javascript在页面上，像这样：

```
<script src="handler.php?jquery,plugin1,plugin2,plugin3,plugin4"></script> 
```

然后可能会向每个单独的插件输出带有多个 document.write() 的 Javascript。

然而，我相信这可能会导致浏览器缓存出现问题，因为一些浏览器会忽略缓存带有查询字符串的项目。

这样做可以吗，还是有一个我可能缺少的更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T16:56:33.027

您可能对[Google AJAX API](http://code.google.com/apis/ajaxlibs/documentation/)感兴趣，即：

```
google.load("jquery", "1.3.2");
google.load("jqueryui", "1.7.1");
google.load("prototype", "1.6.0.3"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:57:58.423

为什么不将每个文件单独包含在它们自己的`<script>`标签中呢？然后一切都被单独缓存，一切都很好。在第一页加载时只会有很多 HTTP 请求。每次动态构建一个“包含文件”可能不会更好地提高性能。

脚本的组合是否有很大差异？如果你真的想减少 HTTP 请求并且总是包含相同的 10 个文件，只需将它们全部放在一个长文件中即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:59:08.933

乔莉，

浏览器缓存带有问号的 url 没有问题。最好不要包含一个 js 文件，而后者又包含另一个 js 文件。如果您已经在编写一个脚本来管理所有应该包含的 js 文件，为什么不直接输出所有这些脚本标签呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:00:25.780

如果您真的不喜欢单独包含文件，您可能会编写一个 php 函数来生成给定插件名称列表的脚本标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:36:58.453

```
function loadScripts(funcs){
    //funcs being an array list of paths to the scripts.
    var temp;

    //lets get a reference to the head tag
    var h = document.getElementsByTagName('head')[0];
    for(var i=0; i < funcs.length; i++){
        temp = document.createElement('script');
        temp.setAttribute('src', funcs[i]);
        temp.setAttribute('type', 'text/javascript');
        h.appendChild(temp);
    }
} 
```

# ruby-on-rails - Rails 路由和不同的 XML 模板

> ID：864490
> 
> 赞同：0
> 
> 时间：2009-05-14T16:53:45.467
> 
> 标签：ruby-on-rails

我的应用程序需要以 XML 格式向 2 个具有特定格式请求的不同提供者提供相同的数据。

设置路线的最佳方法是什么，以便我可以拥有以下内容：

```
http://www.site.com/posts/provider1.xml
http://www.site.com/posts/provider2.xml 
```

（其中提供者 1 和 2 是单独的模板）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:13:53.267

在您的 routes.rb 文件中，尝试

```
map.xml_posts 'posts/:provider.xml', :controller => 'posts', :action => 'xml_data' 
```

然后，您可以访问`params[:provider]`控制器的 xml_data 方法来决定格式。

# .htaccess - .htaccess URL 重写到子目录

> ID：864507
> 
> 赞同：13
> 
> 时间：2009-05-14T16:57:13.290
> 
> 标签：.htaccess, mod-rewrite, rewrite

将“/some/subdir”下面的任何内容重写为“/some/subdir/projects”的最佳方法是什么，如下所示：

```
http://www.mydomain.com/some/subidr/test/ 
```

...对此：

```
http://www.mydomain.com/some/subdir/projects/test/ 
```

我发现发布了一个[类似的问题](https://stackoverflow.com/questions/521019/htaccess-redirect-to-script-in-subdirectory)，但该解决方案似乎不适用于我的情况。到目前为止，我目前的尝试（似乎不起作用）：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_URI} !^/projects/.*$
RewriteRule ^(.*)$ /projects/$1 [L] 
```

**编辑：**我忘了提到 .htaccess 文件必须位于 /some/subdir 中，因为我没有对服务器的 Web 根目录的写入权限。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-14T17:40:28.773

这是我终于开始工作的解决方案：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !^/some/subdir/projects/.*$
RewriteRule ^(.*)$ /some/subdir/projects/$1 [L] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T17:05:00.637

在服务器文档根目录中的 .htaccess 配置文件中尝试此规则：

```
RewriteEngine on
RewriteRule !^some/subdir/projects(/|$) some/subdir/projects%{REQUEST_URI} [L] 
```

* * *

由于您想在`/some/subdir/`目录中使用此规则，请按如下方式更改规则：

```
RewriteRule !^projects(/|$) projects%{REQUEST_URI} [L] 
```

如果您想重定向 to 的任何请求，请`/some/subdir/projects/`*`foobar`*将此`/some/subdir/`*`foobar`*规则放在前面提到的之上：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /some/subdir/projects[/?\s]
RewriteRule ^some/subdir/projects/?([^/].+)?$ /some/subdir/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:16:28.660

我会用这个：

```
RewriteEngine On
RewriteRule ^(/some/subdir)/(.*)$ $1/projects/$2 
```

这将重定向`/some/subdir/<anything>`到`/some/subdir/projects/<anything>`.

请注意，`/`实际上需要前导来匹配 URL 的开头，*除非*您在`RewriteBase /`某处进行了设置。

# asp.net - 每次页面回发时，如何重新初始化 Superfish？

> ID：864514
> 
> 赞同：1
> 
> 时间：2009-05-14T16:58:32.850
> 
> 标签：asp.net, jquery-plugins, superfish

我刚刚发现了有关 superfish 的信息，并且目前在 asp.net 上使用它。问题是每次页面回发 superfish 插件消失。该站点需要在 IE6 上运行，因此 javascript 部分非常重要我正在考虑创建一个包含插件初始化的 javascript 函数，并在代码隐藏的页面页面加载事件中调用它。

可以做到这一点还是有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T17:06:41.957

我在我的网站上使用 superfish 的菜单。我有一个自定义 Web 控件，它为我发出我的标记。

然后我使用 $(document).ready() 来初始化 superfish。每次页面加载时都会调用它，即使在回发时也是如此。

我假设当您说菜单消失时，菜单仍然存在，只是被呈现为普通列表？

# javascript - 什么是 JavaScript 垃圾回收？

> ID：864516
> 
> 赞同：304
> 
> 时间：2009-05-14T16:58:43.943
> 
> 标签：javascript, garbage-collection

什么是 JavaScript 垃圾回收？对于 Web 程序员来说，为了编写更好的代码，了解 JavaScript 垃圾收集有什么重要的？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2009-05-14T17:05:05.533

Eric Lippert 不久前写了一篇关于这个主题的[**详细博客文章**](https://blogs.msdn.microsoft.com/ericlippert/2003/09/17/how-do-the-script-garbage-collectors-work/)（另外将它与*VBScript*进行了比较）。更准确地说，他写了关于[*JScript*](https://en.wikipedia.org/wiki/Jscript)的文章，它是 Microsoft 自己的 ECMAScript 实现，尽管与 JavaScript 非常相似。我想您可以假设 Internet Explorer 的 JavaScript 引擎的绝大多数行为都是相同的。当然，实现会因浏览器而异，但我怀疑您可以采用一些通用原则并将它们应用于其他浏览器。

从该页面引用：

> JScript 使用非分代标记和清除垃圾收集器。它是这样工作的：
> 
> *   每个“范围内”的变量都称为“清道夫”。scavenger 可以指一个数字、一个对象、一个字符串等等。我们维护一个清道夫列表——当变量进入作用域时，它们被移到 scav 列表中，当它们超出作用域时，它们被移出 scav 列表。
>     
>     
> *   垃圾收集器时不时地运行。首先，它在每个对象、变量、字符串等上放置一个“标记”——GC 跟踪的所有内存。（JScript 在内部使用 VARIANT 数据结构，并且该结构中有大量额外未使用的位，因此我们只设置其中之一。）
>     
>     
> *   其次，它清除了 scavengers 上的标记和 scavenger 引用的传递闭包。因此，如果 scavenger 对象引用了 nonscavenger 对象，那么我们会清除 nonscavenger 上的位，以及它所引用的所有内容。（我使用的“关闭”这个词的含义与我之前的帖子不同。）
>     
>     
> *   在这一点上，我们知道所有仍然标记的内存都是分配的内存，任何范围内变量的任何路径都无法到达。所有这些对象都被指示自行拆除，这会破坏任何循环引用。

垃圾收集的主要目的是让程序员*不必*担心他们创建和使用的对象的内存管理，当然有时也无法避免 - 至少对垃圾收集的工作原理有一个粗略的了解总是有益的.

**历史注释：**答案的早期版本对`delete`操作员的引用不正确。在 JavaScript[中，`delete`运算符从对象中删除属性，这](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete)`delete`与C/C++ 中的完全不同。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-05-14T17:05:54.673

当涉及 DOM 对象时，请注意循环引用：

[JavaScript 中的内存泄漏模式](http://www.ibm.com/developerworks/web/library/wa-memleak/)

请记住，只有在没有对对象的活动引用时才能回收内存。这是闭包和事件处理程序的常见缺陷，因为一些 JS 引擎不会检查内部函数中实际引用了哪些变量，而只会保留封闭函数的所有局部变量。

这是一个简单的例子：

```
function init() {
    var bigString = new Array(1000).join('xxx');
    var foo = document.getElementById('foo');
    foo.onclick = function() {
        // this might create a closure over `bigString`,
        // even if `bigString` isn't referenced anywhere!
    };
} 
```

`bigString`只要事件处理程序在附近，天真的 JS 实现就无法收集。有几种方法可以解决这个问题，例如在(`bigString = null`的末尾设置不适用于局部变量和函数参数：从对象中删除属性，并且变量对象不可访问 -如果您尝试，ES5 在严格模式下甚至会抛出 a删除局部变量！）。`init()``delete``delete``ReferenceError`

如果您关心内存消耗，我建议尽可能避免不必要的关闭。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-05-14T17:06:14.423

来自博客的好报价

DOM 组件是“垃圾收集”的，JScript 组件也是如此，这意味着如果您在任一组件中创建一个对象，然后失去对该对象的跟踪，它最终会被清理掉。

例如：

```
function makeABigObject() {
var bigArray = new Array(20000);
} 
```

当您调用该函数时，JScript 组件会创建一个可在该函数内访问的对象（名为 bigArray）。但是，一旦函数返回，您就“失去了对 bigArray 的跟踪”，因为无法再引用它。好吧，JScript 组件意识到您已经忘记了它，所以 bigArray 被清理了——它的内存被回收了。同样的事情也适用于 DOM 组件。如果你说`document.createElement('div')`，或者类似的东西，那么 DOM 组件会为你创建一个对象。一旦你不知何故忘记了那个对象，DOM 组件就会清理相关的。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-14T17:08:15.963

据我所知，当没有对对象的引用时，JavaScript 的对象会定期被垃圾收集。这是自动发生的事情，但如果你想了解更多关于它是如何工作的，在 C++ 级别，看看[WebKit](http://webkit.org/building/checkout.html)或[V8 源代码是有意义的](http://code.google.com/p/v8/)

但是，通常您不需要考虑它，但在较旧的浏览器中，如 IE 5.5 和 IE 6 的早期版本，也许还有当前版本，闭包会创建循环引用，如果未选中，最终会耗尽内存。在我所说的关于闭包的特殊情况下，它是当你添加一个对 dom 对象的 JavaScript 引用，以及一个指向 JavaScript 对象的 DOM 对象的引用时。基本上它永远不会被收集，并最终导致操作系统在循环创建崩溃的测试应用程序中变得不稳定。实际上，这些泄漏通常很小，但为了保持代码干净，您应该删除对 DOM 对象的 JavaScript 引用。

通常最好使用 delete 关键字来立即取消引用您收到的 JSON 数据等大对象，并使用它完成任何您需要做的事情，尤其是在移动 Web 开发中。这会导致 GC 的下一次扫描删除该对象并释放其内存。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-04-05T13:54:12.707

垃圾回收 (GC) 是一种自动内存管理形式，通过删除不再需要的对象。

任何处理内存的进程都遵循以下步骤：

1 - 分配你需要的内存空间

2 - 做一些处理

3 - 释放这个内存空间

有两种主要算法用于检测不再需要的对象。

**引用计数垃圾回收**：该算法将“不再需要一个对象”的定义简化为“一个对象没有其他对象引用它”，如果没有引用指向它，则该对象将被删除

**标记和扫描算法**：将每个对象连接到根源。任何对象都不会连接到根或其他对象。此对象将被删除。

目前大多数现代浏览器使用第二种算法。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-14T17:08:37.600

> “在计算机科学中，垃圾收集 (GC) 是一种自动内存管理形式。垃圾收集器，或者只是收集器，试图回收垃圾，或者应用程序永远不会再次访问或改变的对象使用的内存。”

所有 JavaScript 引擎都有自己的垃圾收集器，它们可能会有所不同。大多数时候你不必与他们打交道，因为他们只是做他们应该做的事。

编写更好的代码主要取决于您对编程原理、语言和特定实现的了解程度。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-09T11:27:46.067

**引用类型**不会将对象直接存储到分配给它的变量中，因此下面示例中的对象变量实际上并不包含对象实例。相反，它持有指向内存中对象所在位置的指针（或引用）。

```
var object = new Object(); 
```

如果将一个引用类型变量分配给另一个，则每个变量都会获得指针的副本，并且两者仍然引用内存中的同一对象。

```
var object1 = new Object();
var object2 = object1; 
```

[![两个变量指向一个对象](https://i.stack.imgur.com/CTFQt.png)](https://i.stack.imgur.com/CTFQt.png)

> JavaScript 是一种**垃圾收集**语言，所以当你使用引用类型时，你真的不需要担心内存分配。但是，最好*取消引用*不再需要的对象，以便垃圾收集器可以释放该内存。最好的方法是将对象变量设置为空。

```
var object1 = new Object();
// do something
object1 = null; // dereference 
```

> **在使用数百万个对象的大型应用程序中，**取消引用对象尤其重要。****

 **来自面向对象 JavaScript 的原则 - NICHOLAS C. ZAKAS

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-14T17:01:26.527

> 什么是 JavaScript 垃圾回收？

检查[这个](http://www.memorymanagement.org/articles/recycle.html)

> 对于 Web 程序员来说，为了编写更好的代码，了解 JavaScript 垃圾收集有什么重要的？

在 Javascript 中，您不关心内存分配和释放。整个问题都需要 Javascript 解释器。Javascript 中仍然可能存在泄漏，但它们是解释器的错误。如果您对此主题感兴趣，可以在 [www.memorymanagement.org阅读更多内容](http://www.memorymanagement.org)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-02-05T23:01:41.903

在 Windows 上，您可以使用[Drip.exe](http://home.orange.nl/jsrosman/)查找内存泄漏或检查您的免费内存例程是否有效。

真的很简单，只要输入一个网站网址，你就会看到集成的IE渲染器的内存消耗。然后点击刷新，如果内存增加，你在网页的某个地方发现了内存泄漏。但这对于查看释放内存的例程是否适用于 IE 也非常有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-20T06:13:39.207

在 javascript 中，垃圾收集是不确定的，何时清除对象，或者是否会清除。这适用于强引用的对象。强引用对象受到垃圾收集的保护。

在 ES12 之后，可以执行以下实现来检查对象何时被垃圾回收。

要了解更多关于 javascript 垃圾收集的信息，您可以使用 ES12 之后可用的 Finalisers。

```
let a = new Array(200).fill(true); 
```

构造finaliaser

```
const cleanup = new FinalizationRegistry(key => {
  // your code here
});

cleanup.register(a, 'wewew'); 
```

对象“a”现在不可访问，垃圾回收后将发生终结器回调

# asp.net - 动态 GridView 在 RowCommand 上有 0 行

> ID：864537
> 
> 赞同：1
> 
> 时间：2009-05-14T17:03:15.867
> 
> 标签：asp.net, vb.net, gridview

我有一个动态创建的 GridView，我使用 AddHandler 命令将处理程序附加到它。

问题是当我尝试在该函数中引用 sender.rows 时，它不会做任何事情，因为它说 sender.rows.count = 0。

我已经完成了足够多的动态表单创建，我很确定我正在创建控件、绑定它们，并在页面 init/load/load_complete 期间在适当的点添加处理程序。

此外，我在另一种非动态表单上具有几乎完全相同的代码隐藏，并且它能够访问行中的值。

考虑到 RowCommand 事件正在触发，很明显我正在单击一行。由于某种原因，它不在处理程序事件的范围内。

有没有人对如何解决这个问题有任何想法？

背景：我真正想做的是访问数据绑定到行的值。我正在创建一个 SQLCommand 并将其绑定到动态网格，我更愿意与网格的数据源交谈，但这似乎是不可能的。也许我遗漏了一些东西，但目前看来，从 GridView 读取值（我讨厌这样做）是唯一有效的方法。

谢谢，肖恩

更新（代码）：

创建动态视图（在 Load 事件上执行）

```
sbFormHTML.AppendLine(String.Format("<tr><td colspan=""2""><asp:GridView ID=""{0}"" runat=""server"" DataKeyNames=""primary_key""><Columns>", dataElement.Attributes.GetNamedItem("name").Value))

sbFormHTML.AppendLine("<asp:BoundField DataField=""primary_key"" Visible=""False"" SortExpression=""primary_key"" />")
sbFormHTML.AppendLine("<asp:CommandField SelectText=""Edit"" ShowSelectButton=""True"" />")
sbFormHTML.AppendLine("<asp:CommandField ShowDeleteButton=""True"" />")

For Each data_item As XmlNode In dataElement.SelectSingleNode("data_items").ChildNodes

    Dim header As String = fnGetAttributeValue(data_item, "label")
    If header = "" Then header = data_item.Attributes.GetNamedItem("dbfield").Value

    sbFormHTML.AppendLine(String.Format("<asp:BoundField DataField=""{0}"" HeaderText=""{1}"" SortExpression=""{0}"">", data_item.Attributes.GetNamedItem("dbfield").Value, header))
    sbFormHTML.AppendLine("</asp:BoundField>")

Next
sbFormHTML.AppendLine("</Columns></asp:GridView>")
sbFormHTML.AppendLine(String.Format("</td></tr>")) 
```

添加处理程序：

```
'bind grid RowCommand function to all dynamic grids
Dim dynamicGrids = findWebControlsRecursive(Page, "^gvDyn")
For Each dynamicGrid As GridView In dynamicGrids
    AddHandler dynamicGrid.RowCommand, AddressOf subHandleRowCommand
    Response.Write(String.Format("{0} has {1} rows<br/>", dynamicGrid.ID, dynamicGrid.Rows.Count))
Next 
```

尝试用它做点什么：

```
Protected Sub subHandleRowCommand(ByVal sender As GridView, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs)
    'skm
    If e.CommandName = "Select" Then

        Try
            Response.Write(String.Format("{0} has {1} rows<br/>", sender.ID, sender.Rows.Count))

    'Remainder of the code snipped for brevity.

End Sub 
```

数据绑定网格：

```
Protected Sub sbLoadGrid(ByVal gridNode As XmlNode)

    ' Databind a GridView object to its SQL query

    Dim conn As SqlConnection = New SqlConnection('connection string here')
    conn.Open()
    Dim cmd As SqlCommand = New SqlCommand("", conn)
    Dim dbTable As String = gridNode.Attributes.GetNamedItem("dbtable").Value

    cmd.CommandText = String.Format("SELECT {0}ID AS primary_key,", dbTable)
    For Each data_item As XmlNode In gridNode.SelectSingleNode("data_items").ChildNodes
        cmd.CommandText &= String.Format(" {0},", data_item.Attributes.GetNamedItem("dbfield").Value)
    Next

    cmd.CommandText = Regex.Replace(cmd.CommandText, ",$", String.Format(" FROM {0}", dbTable))

    Dim dsGrid As SqlDataReader = cmd.ExecuteReader

    Dim tempGrid As GridView = getControlReference(gridNode.Attributes.GetNamedItem("name").Value)
    tempGrid.DataSource = dsGrid
    tempGrid.AutoGenerateColumns = False

    tempGrid.DataBind()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T19:01:28.453

由于您正在动态创建 gridview 控件，因此 ViewState 没有得到持久化，这可以解释为什么 rows.count 在 EventHandler 中返回为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T23:53:09.063

我没有看到 sbloadgrid 函数在任何地方被调用，但我强烈建议您尝试将代码重构为更传统的 GridView 创建，设置它的属性，如果需要，将其添加到页面上的占位符中是动态的。

对于查询，我建议您在命令文本中使用参数并将它们添加到 sql 命令中。它仍然可以动态完成，从长远来看，您可以减少很多问题，然后使用正则表达式来构建您的查询。

这可能不是您想要的答案，但除非您有非常充分的理由将代码保持原样，否则我建议您重写它。如果您事先知道查询中的列数，我什至建议在您的 asp 页面中设置它而不是动态设置。

如果您可以显示几种不同的格式，您可以在页面上设置它们中的每一种，并且只更改仅更新数据源并在运行时动态启用其中一种，默认情况下将它们禁用和隐藏。

所有这些都可能更容易维护。

# c++ - 按姓氏和名字对结构进行排序

> ID：864554
> 
> 赞同：1
> 
> 时间：2009-05-14T17:07:08.027
> 
> 标签：c++, sorting, struct

我有按姓氏排序的算法，但我无法弄清楚如何按姓氏排序，那么如果两个人的姓氏相同，则按他们的名字排序。

```
void sortLastName(FRIEND friends[ARRAY_MAX], int& count) {

    FRIEND temp;

    for(int i = 0; i < count - 1; i++) {
        for (int j = i + 1; j < count; j++) {
            if (stricmp(friends[i].lastName, friends[j].lastName) > 0)  {
                temp = friends[i];    //swapping entire struct
                friends[i] = friends[j];
                friends[j] = temp;
            }
        }
    }
} 
```

=== 编辑 =====================

我不想用`STD sort()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T17:18:41.757

你为什么不使用`std::sort`？这就是它的用途：

```
struct NameComparer {
  bool operator()(const FRIEND& lhs, const FRIEND& rhs){
    int compareResult = stricmp(lhs.lastName, rhs.lastName);
    if(compareResult == 0){
      compareResult = stricmp(lhs.firstName, rhs.firstName);
    }
    return compareResult < 0;
  }
};

std::sort(friends, friends + ARRAY_MAX, NameComparer()); 
```

当然，您也应该使用 C++`std::string`类。这就是它的用途。然后你就不必纠结于容易出错的 C 字符串操作函数，比如`stricmp`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T17:10:19.907

首先，比较姓氏。如果它们相等，则比较名字：

```
int compareResult = stricmp(friends[i].lastName, friends[j].lastName);
if(compareResult == 0)
    compareResult = stricmp(friends[i].firstName, friends[j].firstName);
if(compareResult < 0)
    // swap friends[i] and friends[j] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-14T17:11:08.483

首先，使用`qsort`或适当的 C++ 等效项，它采用比较两个对象的函数。

比较应该是微不足道的：

```
int compare_by_name(const FRIEND& f1, const FRIEND& f2)
{
    int last_name_matches = strcmpi(f1.lastName, f2.lastName);
    return (last_name_matches != 0) ? last_name_matches :
            strcmpi(f1.firstName, f2.firstName) ;
} 
```

注意：一个真正的 C++ 实现可能会使用比较器函数的模板。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T17:12:48.450

你必须改变你的比较。基本算法是如果朋友[i] > 朋友[j] 则交换它们。因此，更改您对“>”的定义以包含名字比较。

应该执行以下操作：

```
if (stricmp(friends[i].lastName, friends[j].lastName) > 0 ||
    (stricmp(friends[i].lastName, friends[j].lastName) == 0 && 
    stricmp(friends[i].firstName, friends[j].firstName) > 0)) 
```

您可能只想进行一次姓氏比较（将其存储在临时变量中而不是比较两次），但想法是相同的。

请注意，执行此操作的“最佳”方法可能是在 FRIEND 类中提供比较函数。然后你可以`if(friends[i].CompareTo(friends[j]) > 0)`改用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T17:19:41.397

除了选择构建使用两个名称的比较函数之外，您还可以对第一个名称*进行*排序，然后对最后一个名称进行排序，但是您必须注意第二遍使用[**稳定**的排序](https://stackoverflow.com/questions/808617/what-is-the-benefit-for-a-sort-algorithm-to-be-stable)。也不妨先用它。

好消息：`std::stable_sort`可用并保证稳定（感谢 Adam 和 libt 的更正）。不保证plain`std::sort`和 c 标准库`qsort`是稳定的，尽管某些实现可能是稳定的。正如马克在评论中指出的那样，您展示的冒泡排序已经稳定。

* * *

这比使用自定义比较函数的单排序选择效率低，但它使您可以轻松地让用户在运行时选择多个排序（因为您不必定义每个可能的比较函数，或迷你语言）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-14T17:29:27.613

如果您不介意使用[boost.tuple](http://www.boost.org/doc/libs/1_39_0/libs/tuple/doc/tuple_users_guide.html)（并替换或至少修改您现有的 Friend 实现），则包含一个比较函数。

```
#include <boost/tuple/tuple.hpp>
#include <boost/tuple/tuple_comparison.hpp>

typedef boost::tuple<std::string, std::string> Friend;

Friend f1, f2;
bool compareFriends = f1 < f2; 
```

以上所有应该工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-14T17:17:50.310

请不要自己实现排序 - std::sort (in `<algorithm>`) 做得更好，效率更高。（除了你只是想看看你的算法是如何用于实验目的的）

无论如何，您都必须指定一个比较函数或更好的仿函数。

```
struct FriendComparer {
  bool operator () (const FRIEND& a, const FRIEND& b) {
      // Comparison code here (see previous posts)
  }
}; 
```

你可以像这样调用它：

```
std::sort(friendArray, friendArray + count, FriendComparer()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T17:21:40.423

定义一个比较函数（或 jalf 建议的类）并使用 STL 的 std::sort()：

```
bool compareFriends(FRIEND const & lhs, FRIEND const & rhs)
{
    int const resultLast = stricmp(lhs.lastName, rhs.lastName);

    if(resultLast == 0)
    {
        return stricmp(lhs.firstName, rhs.firstName) < 0;
    }
    else
    {
        return resultLast < 0
    }
}

void sortLastName(FRIEND friends[ARRAY_MAX], int& count)
{
    std::sort(friends, friends + count, &compareFriends);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-14T17:11:43.507

添加以下内容：

```
else if (stricmp(friends[i].lastName, friends[j].lastName) == 0 &&
         stricmp(friends[i].firstName, friends[j].firstName) > 0) {
    temp = friends[i];    //swapping entire struct
    friends[i] = friends[j];
    friends[j] = temp;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-14T18:06:05.437

您可以使用左对齐姓氏和名字的串联作为排序键

这是您正在寻找的另一个观点，我认为:)

```
string key(const FRIEND& aFriend)
{
    const int INITIALS_MAX_LENGTH = 200; // assume the worst

    string firstNameKeyPart = string(INITIALS_MAX_LENGTH, ' ');
    string lastNameKeyPart = string(INITIALS_MAX_LENGTH, ' ');

    firstNameKeyPart.replace(0, 0, aFriend.firstName);
    lastNameKeyPart.replace(0, 0, aFriend.lastName);

    return  lastNameKeyPart + firstNameKeyPart;
}

//...

if ( key(friends[i]) > key(friends[j]) )
{
  //swap
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-16T16:18:13.700

您可以按姓氏排序，如果姓氏相同，则按名字排序。像这样的东西（使用冒泡排序）：

```
for (int i = 1; i < dictionary.size(); ++i)
    for (int j = 0; j < dictionary.size()-1; ++j) {
        if (dictionary[i].Last < dictionary[j].Last)
            swap(dictionary[i], dictionary[j]);
    }

for (int i = 1; i < dictionary.size(); ++i)
    for (int j = 0; j < dictionary.size() - 1; ++j) {
        if (dictionary[i].Last == dictionary[j].Last && dictionary[i].First < dictionary[j].First)
            swap(dictionary[i], dictionary[j]);
    } 
```

# java - 在扩展接口中覆盖返回类型 - 坏主意？

> ID：864557
> 
> 赞同：15
> 
> 时间：2009-05-14T17:07:57.010
> 
> 标签：java, oop

在 Java 中，您可以执行以下操作：

```
public interface IEngine{}
public interface ICoolEngine extends IEngine{}

public interface Car
{
   IEngine getEngine();
}
public interface ICoolCar extends ICar
{
    @Override
    ICoolEngine getEngine();
} 
```

虽然这很好地解决了我一直在努力解决的问题，但它的某些东西“感觉”是错误的。

我在这里犯了一些令人讨厌的设计失礼吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-14T17:12:00.713

不，你在做正确的事。协变返回只是指定类及其下的类必须返回父类返回的原始通用类参数的特定子类。这也意味着您的子类仍然与要求它返回 Engine 的原始接口兼容，但是如果您*知道*它是 ICoolCar，它具有 ICoolEngine - 因为更具体的接口知道更具体的功能。这适用于接口和类——这是正确的、适当的和有用的引导。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T17:11:24.817

不，没关系。由于`ICoolEngine`extends `IEngine`，任何实现`ICoolEngine`的对象都可以被视为一个`IEngine`（当然没有所有`ICoolEngine`- 特定的方法）。您只需要了解类型差异，具体取决于您在每种情况下使用的接口，并确保不要使用`ICoolEngine`未定义的方法`IEngine`（假设在您的实际代码中，还有其他方法列在等价于`ICoolEngine`) 中。

这样做不是一个坏习惯。你只是在使用多态性的力量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T17:14:16.277

协变返回类型是在 1.5 中添加的经过深思熟虑的特性（主要用于支持泛型）。

@Override 可能不适用于使用某些编译器覆盖抽象方法（javac 在 1.6 中更新，但遗漏了 JLS 修正）。

与往常一样，向接口添加方法会带来兼容性问题。完全按照超类型重新声明方法会很好，但是更改返回类型会导致实现类中的桥接方法。这就是为什么`Iterable.iterator`不返回接口的只读版本`Iterator`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:21:06.293

你在做什么完全没问题。

我更愿意这样说：

```
public interface IEngine { }
public interface ICoolEngine extends IEngine { }

public interface ICar<T extends IEngine> {
   T getEngine();
}

public interface ICoolCar extends ICar<ICoolEngine> { } 
```

我使用泛型是因为当您使用注释时，我猜您正在使用 Java 5+

# sql-server - 将 Unix 文件导入 SQL Server 的最有效和最可靠的方法

> ID：864561
> 
> 赞同：2
> 
> 时间：2009-05-14T17:08:30.223
> 
> 标签：sql-server, unix, batch-file, cross-platform

我在 AIX 上有三个文件需要导入到 SQL Server 2005 数据库中。这些文件是由我可以控制的 AIX 脚本创建的。我知道有几种选择会起作用，但我想了解其他人以前做过什么以及最有效的方法。

这是我正在查看的选项。

1.  让 AIX 脚本 sftp 将文件发送到 Windows，然后让 Windows 批处理作业将它们 bcp 到 SQL Server。
2.  除了让 Windows 批处理作业 GET 文件而不是让 AIX 脚本 PUT 之外，同样的事情。
3.  与 #1 相同，除了使用 scp 而不是 sftp （优点和缺点是什么？）
4.  在 AIX 上设置 samba 共享并让 Windows 批处理作业从那里将文件 bcp 到 SQL Server
5.  与 #4 相同，除了使用 SSIS 将它们作为平面文件从 samba 共享导入（不确定这将如何处理行尾）。

还有其他我忽略的好选择吗？出于某种客观原因，这些中的任何一个是否表现得更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T17:16:22.997

我的建议是 SSIS，它可以让您在插入之前更好地控制控件的解析和读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T17:22:26.943

我推荐SSIS。它允许您设计整个数据流，包括 FTP 获取操作、转换应用和文件到表的映射。

然后，如果需要，您甚至可以使用 SQL Server 代理按计划运行 SSIS 包。

**编辑：**您可以在 SSIS 包中**[定义变量](http://www.simple-talk.com/sql/sql-tools/passing-variables-to-and-from-an-ssis-task/)**，然后您可以通过代理作业传递这些变量。这可以包括您的 FTP 路径和凭据。

[替代文字 http://www.webholstad.com/clarity/blogpics/ssissetvar.jpg](http://www.webholstad.com/clarity/blogpics/ssissetvar.jpg)

# php - 使用 PHP 进行非常大的上传

> ID：864570
> 
> 赞同：37
> 
> 时间：2009-05-14T17:09:59.517
> 
> 标签：php, upload, large-files

我想允许将非常大的文件上传到我们的 PHP 应用程序中（数百兆 - 8 演出）。然而，这有几个问题。

浏览器：

*   HTML 上传有糟糕的反馈，我们需要轮询进度（这有点傻）或者根本不显示任何反馈
*   Flash 上传器在开始上传之前将整个文件放入内存

服务器：

*   PHP 强制我们设置 post_max_size，这可能导致容易被利用的 DOS 攻击。我不想全局设置此设置。
*   服务器还需要一些其他变量存在于 POST 变量中，例如密钥。我们希望能够立即拒绝该请求，而不是在整个文件上传之后。

要求：

*   HTTP 是必须的。
*   我对客户端技术很灵活，只要它在浏览器中工作。
*   PHP 不是必需的，如果有一些其他技术可以在 linux 环境中很好地工作，那就太酷了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-14T18:44:36.980

upload_max_filesize 可以[在每个目录的基础上](http://us2.php.net/manual/en/ini.core.php#ini.sect.file-uploads)设置；post_max_size 也是如此

例如：

```
<Directory /uploadpath/>
  php_value upload_max_filesize 10G
  php_value post_max_size 10G
</IfModule> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T18:17:13.380

**Python处理程序？**

使用 Python POST 处理程序而不是 PHP。从您的 PHP 应用程序生成一个唯一标识符，客户端可以将其放入 HTTP 标头中。在整个 POST 正文传输之前，使用 mod_python 拒绝或接受大型上传。

我认为 [http://www.modpython.org/live/current/doc-html/dir-handlers-hph.html](http://www.modpython.org/live/current/doc-html/dir-handlers-hph.html)

允许您检查标题并拒绝其余的 POST 输入。我还没有尝试过，但可能是正确的路径？

查看 mod_python 的源代码，通过 read() 缓冲输入似乎允许对 HTTP 输入进行逐位评估。标题是第一位的。

[https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk/src/filterobject.c](https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk/src/filterobject.c)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-08T21:37:02.243

我知道它很旧，但也许现在有人也有这个问题。现在你可以只用 Javascript 和 PHP 来做到这一点。客户端不需要 Flash 或 Java。

演示：[http ://dnduploader.filkor.org/](http://dnduploader.filkor.org/)

这个想法是使用 Javascript 的 Blob slice() 方法对文件进行切片...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T17:13:59.243

Java小程序怎么样？这就是我们在我以前工作过的公司中必须这样做的方式。我知道小程序很糟糕，尤其是在这个时代，我们有所有可用的选项，但它们确实是解决 Web 开发中遇到的桌面类问题的最通用的解决方案。只是需要考虑的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T17:26:19.587

您可以为 1 个目录中的脚本设置 post_max_size。将您的上传脚本放在那里，并只允许该脚本处理大尺寸。该脚本仍有可能受到大/无用文件的攻击，但它避免了全局设置。

将它与 APC 一起使用，您可能会得到一些好的结果： [IBM Developer works article on APC](http://www.ibm.com/developerworks/library/os-php-v525/index.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-02T03:43:44.393

尝试了所有这些......这是迄今为止我用过的最好的......

[http://www.uploadify.com/](http://www.uploadify.com/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-07-22T23:25:44.583

看看[jumploader.com](http://www.jumploader.com)

一个很好的上传java小程序。

我用它来上传图片，效果很好。没有尝试过大于 10MB 的文件，但我也应该处理非常大的文件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-14T17:19:06.530

您是否考虑过使用 APC 检查进度和总文件大小。这是一篇关于它的[好博客文章](http://www.haughin.com/2007/10/23/php-upload-progress-with-php-52-apc/)。它可能会有所帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-14T17:19:54.407

也许你可以在浏览器中使用 Webdav 和 Javascript

**AJAX 大文件上传，有进度，到 WebDAV**

[http://www.webdavsystem.com/ajax/programming/upload_progress](http://www.webdavsystem.com/ajax/programming/upload_progress)

**一个简单的图书馆**

[http://debris.demon.nl/projects/davclient.js/doc/README.html](http://debris.demon.nl/projects/davclient.js/doc/README.html)

然后，您可以让 JS 将用户重定向到成功页面。在移交 JS 客户端->WebDAV 之前，可以在 PHP 前奏中处理密钥和不可处理的东西

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-14T17:31:33.317

我会研究[FTP、SSH 或 SCP，](http://us.php.net/ssh2)这允许您上传一个大文件，并且仍然可以对文件进行访问控制。这可能需要更长的时间来实现，但它可能是我能想到的最安全的方式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-14T17:38:15.517

我知道添加另一个依赖项很糟糕，但根据我的经验，大多数做这样的事情的网站都在客户端使用闪存，并将大文件作为块上传

adobe 作为[flash 文件上传的指南](http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001054.html)

我还在 codeproject 上找到了本教程：

[使用 Flash 和 ASP.NET 使用进度条上传多个文件](http://www.codeproject.com/KB/aspnet/FlashUpload.aspx)

PS - 我知道你使用的是 PHP 而不是 .net，我认为重要的部分是 flash ;)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-14T23:11:17.043

我已经成功使用[uploadify](http://www.uploadify.com/)，我会推荐它。这是一个处理大型上传的 jQuery/Flash 脚本，您可以向它传递额外的参数（如密钥）。要解决服务器端问题，只需使用以下代码。更改仅对调用它们的脚本生效：

```
//Check to see if the key is there
if(!isset($_POST['secret_key']) || !isValid($_POST['secret_key']))
{
    exit("Invalid request");
}
function isValid($key)
{
    //Put your validation code here.
}

//This line changes the timeout.
//Give it a value in seconds (3600 = 1 hour)
set_time_limit(3600);

//Set these amounts to whatever you need.
ini_set("post_max_size","8192M");
ini_set("upload_max_filesize","8192M");

//Generally speaking, the memory_limit should be higher
//than your post size.  So make sure that's right too.
ini_set("memory_limit","8200M"); 
```

**编辑**回应您的评论：

鉴于您所说，恐怕您可能无法通过http满足您的要求。现有的所有解决方案都包含向 http 添加功能的代码，而这些功能从未为它设计过。

就像你自己说的，这是一个简单的协议。除了编写您自己的在浏览器之外运行的客户端软件、Java 小程序或使用不同的协议（如为此设计的 FTP）之外，您可能无法得到您想要的。

在给定的限制范围内，我已尽我所能。对不起，我不能做得更好。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-06-26T19:21:35.463

试试这个：[http](http://www.simple2ftp.com) ://www.simple2ftp.com在一个聪明的 PHP 应用程序包装器中使用基于 Java 的 FTP 小程序。

# java - 如何以编程方式使用 Netbeans Profiler？

> ID：864574
> 
> 赞同：4
> 
> 时间：2009-05-14T17:10:23.137
> 
> 标签：java, api, netbeans, profiler

我希望能够使用 Netbeans Profiler API 对某些应用程序进行一些分析。我对使用 Visual VM 不感兴趣，而是对以编程方式从应用程序中收集数据[比如说 CPU 使用率和方法执行时间]。例如，使用 CPU 使用率和热方法。例如，如何获取该数据并将其打印在控制台上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T17:27:58.147

这是来自 Jiri Sedlacek - VisualVM 开发人员之一：

> 没有像“Netbeans Profiler API”这样的东西，分析器没有任何可供公共使用的 API。VisualVM 和 NetBeans Profiler 都不会帮助您解决这个问题

就是这样，伙计们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T21:14:30.997

JRockit Mission Control 根据[新的和值得注意](http://www.oracle.com/technology/products/jrockit/missioncontrol/new_and_noteworthy/3.1.0/index.html)的 3.1 版本发布了一个公共 API，用于订阅 JMX 数据并建立与本地/远程服务器的连接。见页面底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-12T17:36:22.870

为了提供更新信息：Netbeans 的代码在[https://github.com/apache/incubator-netbeans下是公开的](https://github.com/apache/incubator-netbeans)

在模块分析器下，代码可用于以编程方式获取所需信息。

# php - MYSQL 最大/计数/日期/日期

> ID：864582
> 
> 赞同：2
> 
> 时间：2009-05-14T17:12:22.100
> 
> 标签：php, sql, mysql

希望你能给点建议。我在一个查询中拉出我的头发，希望你能提供建议。

我有一张表，我想从带有 IN 的日期之间的内部计数中选择 MAX。

[查看表](http://www.screencast.com/users/openeye/folders/Jing/media/0b162b34-4f06-463d-a270-533a85858d28)

这是我尝试过的，但完全没有运气。

```
SELECT MAX(no_hits) from (SELECT count(hits) AS 'no_hits' ) FROM stats WHERE 'date' >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH AND zones_code IN('011242077793513596890', '011242077783866125432')) 
```

所以基本上我只希望为表现最好的区域返回一个 no_hits。

希望你能告诉我哪里出错了。

谢谢你，如果你凸轮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:15:41.813

```
SELECT `zones_code`, SUM(`hits`) AS `no_hits`
FROM `stats`
WHERE `date` >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)
GROUP BY `zones_code`
ORDER BY `no_hits` DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T18:17:33.973

您的查询是这样的：

```
SELECT MAX(no_hits) 
FROM (SELECT count(hits) AS 'no_hits' ) FROM stats 
  WHERE 'date' >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH 
    AND zones_code IN('011242077793513596890', '011242077783866125432')
); 
```

以下是您的查询有一些问题：

*   您在 之后关闭了子查询括号`'no_hits'`。
*   您没有为子查询提供表别名。每个派生表都必须有一个表别名。
*   您没有关闭该`DATE_SUB()`函数的括号。
*   如果您想要每个区域的点击总数，您使用`COUNT()`了我认为应该使用的地方。`SUM()`
*   您没有将点击小计与每个区域相关联；您的小计是针对整个表格的。
*   您使用字符串定界符 ( `''`)`'date'`代替标识符定界符（即反引号）。`'date'`当您将列与日期值进行比较时，您将文字字符串与日期值进行比较`date`。

@chaos's answer中的查询很接近，但我认为您应该使用`SUM()`：

```
SELECT `zones_code`, SUM(`hits`) AS `no_hits`
FROM `stats`
WHERE `date` >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)
GROUP BY `zones_code`
ORDER BY `no_hits` DESC
LIMIT 1; 
```

结果是 zone_code 011242077793513596890，总共有 255 个命中。

* * *

PS：在线提问时，请*以文本格式*提供足够的代码和数据，以便人们轻松测试。您提供了一些示例数据的屏幕截图，但没有显示表创建代码。这不像您提供了一个有效的`CREATE TABLE`语句和一个示例`INSERT`语句来填充它那样有用。

```
CREATE TABLE IF NOT EXISTS `stats` (
  `id` int(11) NOT NULL,
  `zones_code` char(21) default NULL,
  `date` date default NULL,
  `hits` int(11) default NULL,
  PRIMARY KEY  (`id`)
);

INSERT INTO stats VALUES
(10, '011242077793513596890', '2009-05-11', 13),
(12, '011242077793513596890', '2009-05-12',235),
(24, '011242077793513596890', '2009-05-13',  2),
(32, '011242077793513596890', '2009-05-14',  5),
(17, '011242077783866125432', '2009-05-12',165),
(22, '011242077783866125432', '2009-05-13',  2),
(30, '011242077783866125432', '2009-05-14',  5),
(19, '011242077743853330663', '2009-05-12', 61),
(20, '011242077737314753388', '2009-05-12', 54),
(28, '011242077737314753388', '2009-05-13',  7),
(36, '011242077737314753388', '2009-05-14', 31),
(14, '011242077730456603312', '2009-05-12',240),
(26, '011242077730456603312', '2009-05-13',  2),
(34, '011242077730456603312', '2009-05-14',  5); 
```

以上是我必须根据您的屏幕截图输入的内容！

*帮自己一个忙，让人们更容易帮助你。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:16:42.510

我会使用带有 a 的`ORDER BY DESC`排序子句`LIMIT 1`来仅获取最大值。

# c# - .NET Framework 类的 Unity 最佳实践

> ID：864592
> 
> 赞同：2
> 
> 时间：2009-05-14T17:14:42.593
> 
> 标签：c#, .net, dependency-injection, inversion-of-control

我刚刚开始使用任何 DI/IoC 工具集并且有一个非常基本的问题。我正在使用 Unity，因为我们还将在整个应用程序中使用许多企业库块。

我的问题是围绕.NET 框架类的依赖关系。例如，在我目前正在研究的一个类中，我需要创建 DirectoryInfo 类。据我了解，DI 中的最佳实践之一是永远不要使用“new”关键字——因为这会引入硬依赖。那么我应该如何获得一个新的 DirectoryInfo 呢？将它作为一个项目添加到容器中并使容器成为类的依赖项？这似乎在现实生活中使用是不切实际的，因为我最终会将容器配置为数以千计的框架类。我认为这是维护的噩梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T17:26:57.447

我会说这有点过度工程。我认为应该传入要创建的 DirectoryInfo 的路径，或者传入某种配置存储库（或服务）类来保存（或为您提供获取）该数据的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:43:52.727

我不会在容器中注册像 DirectoryInfo 这样的低级类——在应用程序的某些地方使用 new 并不是真正的问题，只要这个要求不会“泄露”到更高级别的类中。所以在这个例子中，直接在一个类中创建和使用 DirectoryInfo 可能是有意义的，但是让该类的实例被容器注入到它们的依赖项中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:54:52.497

首先，您可以将其视为[SystemWrapper](http://systemwrapper.codeplex.com/)库。它包装了 DirectoryInfo 对象，因此您可以模拟它。

接下来，您可以查看[使用 Rhino Mocks 和 SystemWrapper 的 TDD 教程](http://vkreynin.wordpress.com/2008/12/04/tutorial-to-tdd-using-rhino-mocks-and-systemwrapper/)。你可以看到 DI 的用法；但是，那里的示例没有使用任何 IoC。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T18:06:37.523

在我看来，BCL（基类库）中的大多数类都是实用程序类，除了直接调用图之外，通常没有大量其他依赖项。

DI 旨在展平调用图并防止类之间的大量串扰。因此，事实上你对 BCL 的喋喋不休无能为力，你不妨接受它们的本来面目并继续使用新的......

您不想这样做的唯一原因是出于测试目的。您通常不会测试 BCL 类，但您可能想用模拟版本替换 BCL 类，这样它实际上不会做该类所做的任何事情，只是假装这样做..您可以使用类似的东西如有必要，SystemWrapper 会这样做。

# python - Python While 循环条件评估

> ID：864603
> 
> 赞同：2
> 
> 时间：2009-05-14T17:17:07.283
> 
> 标签：python, while-loop

假设我有以下循环：

```
i = 0
l = [0, 1, 2, 3]
while i < len(l):
    if something_happens:
         l.append(something)
    i += 1 
```

当附加某些内容时，while 循环中正在评估的`len(i)`条件是否会更新`l`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-14T17:19:32.987

是的，它会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T17:40:31.957

您的代码可以工作，但使用循环计数器通常不被认为是非常“pythonic”。使用`for`同样有效并消除了计数器：

```
>>> foo = [0, 1, 2]
>>> for bar in foo:
        if bar % 2: # append to foo for every odd number
            foo.append(len(foo))
        print bar

0
1
2
3
4 
```

如果您需要知道您在列表中的“距离”，您可以使用`enumerate`：

```
>>> foo = ["wibble", "wobble", "wubble"]
>>> for i, bar in enumerate(foo):
        if i % 2: # append to foo for every odd number
            foo.append("appended")
        print bar

wibble
wobble
wubble
appended
appended 
```

# java - java.util.Map 的通用测试工具？

> ID：864624
> 
> 赞同：14
> 
> 时间：2009-05-14T17:22:05.137
> 
> 标签：java, unit-testing, collections, guava

我有一个 Map 接口的自定义实现，它做了一些花哨的事情，比如对函数的惰性求值。从外部构造后，实现应该看起来不可变（例如，不支持 put() 和 putAll() 方法）

我看起来它在最基本的条件下工作。由于它非常复杂，我相信一定有大量潜伏在线程安全、不规则操作顺序等方面的错误。

由于 Map 接口的契约是明确定义的，我确信必须存在一个通用测试集合来检查极端情况、线程安全等。

我听说 Google Collections 为他们的库运行了大约 25000 个单元测试。是否可以在某处下载它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T17:34:33.670

[Google Collections](http://code.google.com/p/google-collections/) zip 包含他们的测试。里面应该有一个 google-collect-testfw jar。

[具体来说，对 Map 的总合约有一个抽象测试。](http://code.google.com/p/google-collections/source/browse/trunk/testfw/com/google/common/collect/testing/MapInterfaceTest.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T18:17:34.813

您可能想看看[Google Collections](http://code.google.com/p/google-collections/)是否有满足您需求的东西，这样您就不必支持自己的地图。例如，参见[MapMaker](http://code.google.com/p/google-collections/source/browse/trunk/src/com/google/common/collect/MapMaker.java)

```
private Map<Key, Graph> createMap() {
  ConcurrentMap<Key, Graph> graphs = new MapMaker()
     .concurrencyLevel(32)
     .softKeys()
     .weakValues()
     .expiration(30, TimeUnit.MINUTES)
     .makeComputingMap(
        new Function<Key, Graph>() {
          public Graph apply(Key key) {
            return createExpensiveGraph(key);
          }
        });
  return Collections.unmodifiableMap(graphs);
} 
```

请注意，地图在构建后不会显得完全不可变，因为`map.get(key)`使用以前看不见的键执行 a 会改变所看到的内容`Map.entrySet()`

如果您需要编写自定义 Map 实现并希望从一个好地方开始您的测试，Adam 建议使用 Google Collections 的[MapInterfaceTest](http://code.google.com/p/google-collections/source/browse/trunk/testfw/com/google/common/collect/testing/MapInterfaceTest.java)是一个很好的建议。

# sql - 您将如何自动查找 proc 调用的所有 proc 及其文本？

> ID：864626
> 
> 赞同：0
> 
> 时间：2009-05-14T17:22:54.057
> 
> 标签：sql, sql-server

假设我有一个存储过程，ProcA。它有时会调用 ProcB，一直调用 ProcC，如果遇到错误则调用 ProcD。ProcB 每次都调用 ProcE。如果遇到错误，ProcC 会调用 ProcF。

我怎样才能自动获取 ProcA 的文本以及它调用的所有 proc 的文本，并一直沿着树（A 向下到 F）回归？这将有助于在复杂的 sql 过程中发现错误。

我在这里的第一个想法是获取 ProcA 的文本，通过它进行正则表达式并找到对其他 proc 的任何调用，清洗冲洗重复，最后吐出一个如下所示的文本（文件或 UI）：

```
ProcA definition
... 
ProcB definition
...
... 
ProcF definition 
```

但我愿意接受建议，也许有更简单的方法。如果有一个工具可以做到这一点已经让我知道了。我不知道该在谷歌上放什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:48:41.653

在 SQL Server 中，您拥有[`sys.sysdepends`](http://msdn.microsoft.com/en-us/library/ms190325.aspx)和[`sys.syscomments`](http://msdn.microsoft.com/en-us/library/ms190325.aspx).

`INFORMATION_SCHEMA.ROUTINES`在一般的 SQL 情况下可能很有用，但它对 SQL Server 上返回的文本大小有限制，所以我避免使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:49:04.367

这是高度依赖数据库的，因为最好的方法（如果可能的话）是查询数据库的内部表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:54:04.637

如果您在 SQL 2000 Enterprise Manager 中使用 MS SQL，请右键单击您的存储过程 > 所有任务 > 显示依赖项。在 SQL 2005 Management Studio 中，右键单击您的存储过程 > 查看依赖项。

It won't show you any code for the other objects that this proc id dependent on, but it will list the objects which you can then "wash, rinse, repeat"

# java - 我可以使用 JAVAC 编译具有多个文件和目录的项目吗？

> ID：864630
> 
> 赞同：8
> 
> 时间：2009-05-14T17:23:49.467
> 
> 标签：java, eclipse, ide, javac

我正在处理一个非常大的项目，该项目在多个目录中具有关联的类文件，所有这些文件都源自根目录 \src。

我正在尝试在 src\solution\（称为 Console.java）中编译一个文件，该文件使用来自 src 中其他目录的导入，这些目录仍未编译。

因此，如果我想在 IDE 之外编译 Console.java，我该怎么做呢？哦，是的，我还有一些需要包含在构建中的外部 JAR。

谢谢！我很感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T17:32:15.827

我会考虑使用[Ant](http://ant.apache.org/)创建构建脚本。现在需要做一些工作，但它会在项目的整个生命周期中得到回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T18:09:33.507

javac 有两个选项，可能会对你有所帮助：

```
-c 路径/到/一个/jar；路径/到/另一个/jar
```

对于图书馆和

```
-s path/to/src/solution/java;path/to/src/test/java
```

对于源文件。这值得一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:26:32.817

我对您的具体要求有点不清楚，但您的要求几乎肯定是可能的。你可能想看看 javac 选项，看看你能找到什么对你有帮助。

[http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javac.html#options](http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javac.html#options)

例如，对于您需要的外部 .jar，需要使用 -classpath 选项将它们包含在您的类路径中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T18:04:28.090

你肯定想要一个构建工具。你可能想看看这些问题：

*   [https://stackoverflow.com/questions/80622/maven-or-ant](https://stackoverflow.com/questions/80622/maven-or-ant)
*   [您在复杂的构建过程中使用什么？](https://stackoverflow.com/questions/521117/what-do-you-use-for-a-complex-build-process)
*   [有哪些好的 java make 实用程序？](https://stackoverflow.com/questions/169293/what-are-some-good-java-make-utilities)

# sql - SQL if(exists()) 查询重复

> ID：864631
> 
> 赞同：3
> 
> 时间：2009-05-14T17:24:01.370
> 
> 标签：sql

我需要编写一个从表中获取一组信息的查询，但如果没有该特定客户端的信息，则使用默认集。我想知道是否有办法避免 if(exists()) 语句中的查询重复。

例如：

```
IF( EXISTS( SELECT * FROM UserTable WHERE Name = @UserName))
BEGIN
    SELECT * FROM UserTable WHERE Name = @UserName))
END
ELSE
BEGIN
    SELECT * FROM UserTable WHERE Name = 'Jon Skeet'))
END 
```

前两个选择（存在和 if 的真实部分）完全相同。如果语句为真，我想避免两次运行相同的查询。我知道一旦满足第一个真实条件，存在就会停止，但这仍然是 O(n) 最坏的情况。

我知道的另一个选项是将信息放在临时表中并检查信息是否存在，如果没有则返回默认信息。

两种方法都可以，但是最好的方法是什么？还有其他方法可以做到这一点吗？有没有办法在 WHERE 子句中做到这一点，因为这是唯一不同的地方？

编辑：修复了返回一行而不仅仅是单个项目的示例。因此，将选择转储到单个变量的答案将等于我假设的临时表。此外，为了不激怒 Jon Skeet，他的名字拼写正确

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T17:35:03.090

你可以这样做：

```
SELECT TOP 1
     UserID
FROM
     UserTable
WHERE
     Name IN (@UserName, 'John Skeet')
ORDER BY
     CASE WHEN Name = 'John Skeet' THEN 2 ELSE 1 END 
```

（或使用 LIMIT 或任何适用于您的 RDBMS 的方法）

或者你可以这样做：

```
DECLARE @UserID INT

SELECT
     @UserID = UserID
FROM
     UserTable
WHERE
     Name = @UserName

IF (@UserID IS NULL)
     SELECT
          @UserID = UserID
     FROM
          UserTable
     WHERE
          Name = 'John Skeet'

SELECT @UserID AS UserID 
```

或这个：

```
SELECT
     COALESCE(T2.UserID, T1.UserID)
FROM
     UserTable T1
LEFT OUTER JOIN UserTable T2 ON
     T2.Name = @UserName
WHERE
     T1.Name = 'John Skeet' 
```

或这个：

```
SELECT
     UserID
FROM
     UserTable
WHERE
     Name = @UserName

IF (@@ROWCOUNT = 0)  -- MS SQL Server specific, your RDBMS method will vary
     SELECT
          UserID
     FROM
          UserTable
     WHERE
          Name = 'John Skeet' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T17:30:54.007

怎么样：

```
DECLARE @UserID int;
SELECT @UserID = UserID FROM UserTable WHERE Name = @UserName

IF(@UserID IS NULL)
BEGIN
    SELECT @UserID=UserID FROM UserTable WHERE Name = 'Jon Skeet'))
END

SELECT @UserID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:30:50.417

您可以选择变量检查变量是否返回 null 运行获取默认查询

像这样的东西：

```
Declare @uID int;

SELECT @uID = UserID FROM UserTable WHERE Name = @UserName

IF (@uID is null)
begin 
'Select default here'
End

select @uID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T17:36:29.780

如果您担心性能，我认为您可能不需要 - 大多数 DBMS 应该优化重复。如果您仍然担心性能，请以两种方式运行它以查看您的 DBMS 是否有任何问题。

如果您担心代码 - 重复代码部分的可维护性、可读性等，请记住这一点来研究上述答案。您可能会发现复制是您最不糟糕的选择。遗憾的是 SQL 没有更具延展性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:31:06.847

您没有说您使用的是什么 DBMS，但它显然不是 Oracle（这是我所知道的）。但是，我希望您的 DBMS 允许您执行类似以下伪代码的操作：

```
SELECT UserID FROM UserTable WHERE Name = @UserName
IF <no data returned by that> 
BEGIN
    SELECT UserID FROM UserTable WHERE Name = 'John Skeet'
END 
```

在 Oracle 中，这将是：

```
BEGIN
    SELECT UserID INTO v_UserID FROM UserTable WHERE Name = :UserName;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
    SELECT UserID INTO v_UserID FROM UserTable WHERE Name = 'John Skeet';
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T17:35:48.720

除非您要为要返回的每个字段定义一组变量（而且它只有一条记录），否则我认为最有效的方法是调用两次。临时表可能会花费更多。

# java - 为什么我的方法会抛出 NoSuchMethodError？

> ID：864632
> 
> 赞同：2
> 
> 时间：2009-05-14T17:24:03.290
> 
> 标签：java, equals, nosuchmethoderror

我已经成功实现了reflectionEquals 方法，其中包含一个排除字段的列表。

```
return  EqualsBuilder.reflectionEquals(this, obj, new String[] {"files", "notes", "status"}); 
```

但是，我最近在 Java 1.5 上编译了我的程序，现在当程序遇到上述行时出现以下错误：

> java.lang.NoSuchMethodError: org.apache.commons.lang.builder.EqualsBuilder.= reflectEquals(Ljava/lang/Object;Ljava/lang/Object;[Ljava/lang/String;)Z

如果有人了解为什么该方法在运行时不存在，我将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T18:53:33.450

我曾经遇到的每个 NoSuchMethodError （最终）都被发现是编译时类路径上的外部库版本与运行时类路径上的库版本之间的不匹配（即 - 在这种情况下，编译应用程序时，您的类路径上的 apache commons 版本将与运行时不同。）

当您的代码被编译时，该方法肯定存在 - 否则会引发编译器错误。

检查你的类路径上的 commons-lang.jar 的版本——我打赌你会发现不匹配的。

值得注意的是，这不是**MISSING** **jar**文件——它会抛出 ClassNotFoundException（可能最终会出现 NoClassDefFoundError。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:07:44.650

这可能是一个 var args 问题。确保在 java 1.5 中重新编译所有内容，并确保在 java 1.5 上运行它，并确保在编译时引用与运行时相同的 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:30:45.880

您的运行时类路径中可能有旧版本。

获取最新版本的[Apache Commons Lang](http://commons.apache.org/downloads/download_lang.cgi)

# javascript - 在不破坏历史记录的情况下分配给 document.location.href

> ID：864633
> 
> 赞同：13
> 
> 时间：2009-05-14T17:24:26.813
> 
> 标签：javascript

在测试 document.location.href 时，我观察到当用户启动一个导致分配给 document.location.href 的 javascript 的操作时，新的 URL 会添加到历史记录中。

但是，如果调用是由 javascript 发起的，例如 XMLHTTPRequest 的状态更改，则历史记录中当前页面的条目将被覆盖。我是否正确地描述了这一点？在后一种情况下，有没有办法让页面更改反映在历史记录中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-09-17T15:50:36.977

我遇到了同样的问题，发现这个解决方法对我有用

代替

```
function onAjaxCallback(evt){
    location.href=newLocation;
} 
```

我将 location.href 调用包裹在 setTimeout 周围。似乎可以解决问题。我的历史现在表现良好。希望有帮助

```
function onAjaxCallback(evt){
    setTimeout(function(){
        location.href=newLocation;
    },0)
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T17:41:37.897

您可以在不让浏览器显示返回按钮的情况下更改位置，如下所示：

```
window.location.replace(new_url); 
```

但是，原始地址仍保留在浏览器的历史记录中，可以使用`CTRL`+之类的方式访问`H`

参考：

*   [https://developer.mozilla.org/en/DOM/window.location#replace](https://developer.mozilla.org/en/DOM/window.location#replace)
*   [https://developer.mozilla.org/En/DOM/Window.history#Notes](https://developer.mozilla.org/En/DOM/Window.history#Notes)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-31T15:36:08.610

研究：`window.location.replace()`和`window.location.assign()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-25T11:04:24.403

在重定向用户之前，可以手动将 URL 添加到历史记录中。

```
if (window.history) {
    history.pushState({}, window.location.href);
}
window.location.replace("/login/?next=" + window.location.pathname); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-30T20:42:03.787

更仔细地阅读原始问题。问题不在于 XHR 加载的内容，而在于 XHR*加载的脚本*加载的内容。我遇到了同样的问题，setTimeout 方法似乎运行良好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-14T20:47:40.430

唉，你的问题无法回答，AJAX请求与浏览器历史无关，如果你用它们加载了一些动态内容，那么用户点击浏览器后退按钮，*上一页*被加载（这个加载了一个普通的 GET 或 POST 请求），这会破坏您显示内容的顺序。

Dmitri 的回答意味着您将使用 url 的片段部分（在 # 符号之后）维护自己的动态内容历史记录，也许您会提供自己的后退和前进按钮，但您仍然没有受到保护浏览器后退和前进按钮的效果。

如果他们提供了某种事件来处理用户对这些按钮的点击并能够取消。

# windows - 获取正确的 shell 动词文本以进行操作

> ID：864634
> 
> 赞同：1
> 
> 时间：2009-05-14T17:25:14.580
> 
> 标签：windows, shell, windows-vista, windows-xp, internationalization

我一直在查看以下 VB 代码：

[http://www.codeproject.com/KB/vb/toggleNetworkConn.aspx](http://www.codeproject.com/KB/vb/toggleNetworkConn.aspx)

如果您在“方法”下查看，您会看到他进行了测试以查看 shell 项目动词是“En&able”还是“Disa&ble” - 很明显这些是相同的文本字符串列在网络连接的右键单击上下文菜单中。这种方法的明显问题（正如 CodeProject 的评论中有人指出的那样）是这是特定于英语的；根据操作系统运行的语言，它会使用不同的词。程序员的反应是可能使用动词的索引，但这可以说比原始解决方案更糟糕，因为如果它不是正确的命令，您将执行一些任意操作（而且我不相信它可以保证在动词列表中按特定顺序排列）。

所以我的问题是，是否可以从系统（通过一些调用或注册表）获取启用和禁用的操作系统语言特定文本？我在注册表中搜索了这两个字符串都没有成功，但我认为具有更多多语言经验的人可能会有答案。另外，我没有使用 VB（我将使用 C++），所以不用担心用任何特定的语言来做——API 调用或伪代码都可以。我还需要该解决方案同时适用于 XP 和 Vista（希望也适用于 Windows 7）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T07:10:10.803

看起来动词的文本可以通过[Registry String Redirection](http://msdn.microsoft.com/en-us/library/dd374120(VS.85).aspx)处理。您需要确定连接组件的 CLSID。我四处寻找，但没有找到为我遇到的网络连接 CLSID 注册的任何动词......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T17:07:10.347

我发现的最接近的东西是 IShellFolder 的一部分，特别是 GetCommandString()，它返回一个描述操作的通用字符串——在这种情况下，它实际上返回“启用”或“禁用”。这个特定 API 的问题在于它在工作时，实际上并没有在 XP 上返回任何东西——显然，虽然它在旧操作系统上可用，但它实际上只在 Vista 或更高版本上有用。

# java - 一个完整的新手学习 Java 需要多长时间？

> ID：864640
> 
> 赞同：26
> 
> 时间：2009-05-14T17:26:34.140
> 
> 标签：java, java-me

我完全没有编程经验，但需要学习 Java - 足以参加 J2ME 快速课程。我只有10周。我可以这样做吗？您对我可以使用的最佳资源有何建议？（目前使用 Sun 的 Java 教程）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-14T17:50:32.867

10周？显然你可以在 24 小时内完成！

[http://www.amazon.com/Sams-Teach-Yourself-Programming-Hours/dp/0672328445](https://rads.stackoverflow.com/amzn/click/com/0672328445)

编辑：

好的，所以只有 1 人觉得我的回答很有趣，但还不够有趣，无法投票。真正的问题是，你需要在 10 周内做到多好？

如果你给自己买了一本好书（上面链接的那本书在亚马逊上有一些好评），那么在 10 周内你可能已经足够精通在 Java 中做一些有用的事情，但要成为专家则需要数年时间。任何花费 10 周到几年的时间都会让你从初学者变成专家。

哦，请阅读[《十年内自学编程》](http://norvig.com/21-days.html)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-05-14T18:37:19.073

好的，根据之前的一些答案，我预计会因此而被否决，但是，我认为您认为您可以在没有编程背景的情况下在 10 周内自行学习如何使用 Java 编程是一种妄想。除了某种神童之外，没有任何编程经验的人会在 10 周内学会用 Java 或几乎任何语言**编程**。

为清楚起见，从书中复制和运行**hello world**并不会使您成为程序员。地狱，很可能需要几天时间才能在某些 IDE 中工作。

现在，你可以学习并有可能通过一些测试吗？也许吧，但这取决于测试的深度和格式。

如果我问我是否可以在 10 周内成为一名医生，我会因为问而被嘲笑，所以我对表明这有点可能的答案感到有些惊讶。我现在可以在我女儿身上贴创可贴，但这很难让我成为一名医学专家，这只是意味着我管理了他们版本的**hello world**。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-05-14T17:31:39.713

主要问题是你过去是否做过任何编程，因为这可能是主要的努力。我怀疑如果你没有，你可以过得去，但不一定做得很好。您表示您没有任何编程经验，因此这是您遇到最多问题并花费大部分时间的地方。Java 不一定比其他类似语言学得更快或更慢。

Sun 的 Java 教程很棒，但不幸的是，编程是必须练习的事情之一，这取决于您的空闲时间。也需要经常停下来练习，而不是读了半本书。如果你投入了 10 周的全职时间 - 是的，这*对某些人*来说是完全可行的。毕竟，大学生在一学年就成为合格的开发人员，他们学习其他不相关的课程。

我将专注于首先完全弄清楚 Java，而不尝试 J2ME。然后你就可以进行切换了。

另外，要意识到语言和标准库之间有很大的不同。重要的是学习语言。每个人都使用某些标准库调用并且对学习至关重要，但它们不是语言的一部分。但是，您永远不会真正了解整个库（尽管您会从经验中学习）。更重要的是学习*如何找到您正在寻找的功能，*然后确切地知道它是什么或在哪里找到它。重要的是避免重新发明轮子。

另外，请意识到您最终可能只是一个合格的开发人员。经验需要时间，而且往往不能一蹴而就。

此外，即使您学习编程，您也会错过一些关键的通用 CS 知识，例如数据结构和算法。编程书籍很少教这些，您必须自己学习（例如，参见 TopCoder 教程）。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-14T18:17:37.827

好的，这里有很多人说，“是的”和“是的，但这会很难”，所以我会有所不同。

不。

问题不是在 10 周内“学习 Java”，因为我认为到 10 周结束时，您将能够编写一些东西并知道如何解决一些简单的问题。

但这不会让您为 J2ME 快速课程做好准备。快速通道课程往往适用于在先决条件方面具有强大背景的人。您可能可以在进行过程中*做*很多事情，但是如果没有背景知识来理解您正在做的事情的*原因*，这似乎是很多半随机的事情需要死记硬背，并且很可能迅速消失。

基本上，我认为这只是需要时间：时间让课程深入人心，时间去尝试和失败几次，然后为什么突然跳出来在你身上......

最终，我怀疑你可以通过它，但你最终不会非常精通。（Uri 帖子的最后两段说明了一切。）

我不想成为一个彻底的沮丧者，我绝对*希望*你做得好并取得成功……但我不想赌钱。

（明白，我不认识你亚当......所以我根据我对我的经历以及与我共事过的人的经验发表声明......所以这对你并不轻视...只是观察一下，这是您要坐下来吃的一顿非常大的饭。）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-14T18:00:00.987

第一次学习编程有点像学习一门外语。您将能够轻松地重新创建您所教的短语，但是您将缺乏对为什么这样做的上下文的理解，因此将无法有效地解决新问题。这只是需要时间。

如果你是初学者，我真的不推荐 Java。Python 会好很多（免责声明：Python 粉丝，但有充分的理由）。

但是，我认为初学者不会比[Head First Java做得更好](https://rads.stackoverflow.com/amzn/click/com/0596009208)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-07-30T18:14:04.593

我在一所高中教 Java 编程，我们的课程为期 14 周。这段时间足以让学生在面向对象编程方面打下坚实的基础，但学生的经验不足以开发大型项目或任何过于复杂的东西。

许多学校使用 Lambert & Osbborne 的教科书：

Lambert, K. & Osborne, M. Java 基础知识：AP 考试的 AP 计算机科学基础知识。第三版。2006\. 汤姆森课程技术。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-14T17:38:50.167

您遇到的主要问题是您是第一次使用 Java 学习编程，我认为 Java 不是最好的开始语言。

我想你正在处理一个工作项目，是这样吗？这种压力可能会使事情变得更糟。根据项目的复杂程度，您可能会成功，但在没有背景知识的情况下在 10 周内学习 Java 是另一个问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-14T19:15:45.953

我是计算机科学专业的学生，​​刚刚完成了我的第一门 Java 课程。如果你努力学习 Java，我想说 10 周就可以学习 Java。但你只会得到一个介绍！编程不仅仅是了解语言（API、语法等）。

有史以来最好的 Java 书籍：[http ://www.amazon.com/Introduction-Java-Programming-Comprehensive-Version/dp/0136012671/ref=sr_1_1?ie=UTF8&s=books&qid=1242328533&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/0136012671)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-07-30T18:07:12.797

关于您需要多少时间成为编程专家，有不同的思想流派。我不打算添加它。我建议如果您完全没有编程经验，请先学习 C。然后转移到Java。以下站点非常适合学习java。 [http://www.javapassion.com](http://www.javapassion.com)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-16T16:16:26.150

我不得不说，您在短短 10 周内完成了很多工作，我刚刚在 Indiana University Southeast 完成了一个学期的 Java 编程，我认为我还没有开始接触表面。Java 是一种非常严格的语言，如果您根本没有编程经验，它的语法很难掌握。我将提供这些建议到 www.bluej.org 并在那里下载，Java 编译器据说是最容易使用的，大多数大学都在使用它。这也是，我们所学到的以及我现在所知道的，我可以说，他们是对的。Java 是一种面向对象的语言，而 Bluej 让您对对象有很好的理解。他们还向您展示了如何设计、类、方法、数组、数组列表、哈希映射，所有这些都在这个站点上并且它是免费的。我希望这对您的挑战有所帮助并祝您好运。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-15T01:53:36.980

我对初学者的Java编程经验并不难学；但是，这实际上取决于您的面向对象编程技能如何。由于你说你没有编程经验，我想我推荐一个网站，[http://www.exampledepot.com/](http://www.exampledepot.com/)，并输入任何 java 关键字，如 Swing、FileInputStream，它提供了很多实用的例子，你可以申请到项目中。

请买一本java书（Sams'java 6 in 24 hours）作为参考。它将在短时间内为您提供真正的 Java 基本技能。而且我相信您将有足够的时间在 10 周内了解 Java 和 J2ME。祝你好运。

老虎

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-05-14T17:32:08.153

这取决于你想多努力工作，但这是可能的。您将遇到的问题是您必须在学习 Java 的同时学习编程。这是两个非常不同的东西。编程就是知道如何读写逻辑，而 Java 是你编写它的语言。如果你有数学或物理背景，这会容易得多，因为你已经接触过这种方式的思考。

如果你没有关于 Java 入门的书籍，我会去买一本。

我还会拿起书[代码](https://rads.stackoverflow.com/amzn/click/com/0735611319)（如果可能的话，我会尝试在几天内完成这本书，如果不是在周末的话）。实际上，我会在 10 周内先完成这项工作，因为这将成为您编写 Java 所需知识的基础。

有 10 周的时间，你将不得不每天晚上进行大量学习，以便在你去上课时掌握它的窍门。我最好的建议是，当你上课时，做很多笔记，不要指望什么都能理解。大部分扔给你的东西一开始可能会超出你的想象，你会忘记。没关系。课后如果结束，回去复习笔记等，直到它开始有意义。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-20T19:27:31.850

我不会说我“没有编程经验”，但在学习 J2ME 之前，我所做的大部分工作都是 10 多年前的汇编程序。

我跳过了学习“JAVA”并学习了 J2ME，这似乎是 java 的一个小子集。它足够小（如果你忽略扩展），它非常易于消化，并且在一本中等大小的书中很容易解释。从这个角度来看，它有点像汇编程序（知道的东西数量有限），尽管我确实需要学习 OOP。

我买了几本 J2ME 书籍，但我发现最有帮助的一本是：Riggs 等人的“使用 Java 2 平台编程无线设备”。

我不记得确切花了我多长时间，但我很确定我在 12 周左右的时间里编写了可部署的代码（它是一个移动时间表应用程序）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-01-10T07:44:16.697

我没有编程背景，想学习 PHP。我花了大约 6 个月的时间在我的正常工作之外练习，以培养我的技能，足以为网站编写一些简单的应用程序。Java有点复杂...

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-14T21:20:29.743

对于 java，您还需要学习如何使用 IDE 并设置您的环境，这样才能使 java 工作......

那么对于 J2ME，您需要了解有关嵌入式/移动系统的知识......

10 周的教程就可以了，但这也取决于你在 j2me 课程中要做什么......

我会先学习 j2me 教程（假设您至少了解变量函数和 OO）...

祝你好运...

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-05-14T18:16:05.007

我可以同情...曾经处于类似的困境中，尽管我至少有一些背景。我同意@ShawnMilo 关于[Head Fist Java](https://rads.stackoverflow.com/amzn/click/com/0596009208)的看法。还推荐 Sams[在 21 天内自学 Java](http://www.amazon.co.uk/Sams-Teach-Yourself-Java-Days/dp/0672329433)，鉴于你说你没有编程背景，我强烈建议你看看Matt Weisfeld 的[The Oject Oriented Thought Process](http://www.amazon.co.uk/Object-Oriented-Thought-Process-Developers-Library/dp/0672330164/ref=sr_1_1?ie=UTF8&s=books&qid=1242324544&sr=1-1)。我也同意这个线程上所有的人的观点，他们说编程不仅仅是“简单地”学习一种语言（尤其是如果它是 Java）。话虽如此，祝你好运，神速。

PS我会为幽默感+1 @Patrick McDonald，但我没有足够的代表！

PPS 和@Robin 的另一个虚拟 +1。我想知道四个约克郡人什么时候会加入这个话题......

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-03-31T18:45:46.493

10周？你疯了吗？Java API 非常庞大，更何况 Java EE 怎么可能在 10 周内完成呢？您可能会在几个月内完成其中的 5%。我会说至少需要一年的时间来为新手学习 Java 基础知识。我的意思是你不能只阅读一个主题的章节然后认为你理解了它。您必须花费大量时间使用该概念或部分 API 以至少将其提交到记忆中，不要介意真正掌握它。

实际上，我会说至少需要 2 年或 3 年的编程才能达到行业入门级标准。那就是如果你真的应用自己。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-05-14T17:36:15.773

可行，是的。但是你会错过很多编程背后的理论，所以即使你可能对这门语言足够了解，可以用它编写代码，你也不知道如何很好地编程。我建议您在阅读时选择一些有关面向对象设计的初学者书籍。最好的（至少对我来说）一门新语言的教学和帮助工具是这样的教程和论坛（不要忘记先用谷歌搜索，有很多初学者的问题可以通过简单的搜索得到解答）。

祝你好运！

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-05-14T17:40:05.920

你绝对可以在 10 周内对 Java 有一个很好的理解，但如前所述，熟能生巧（或至少更好......）。几个起点：

Java API 将成为您的朋友：http: [//java.sun.com/j2se/1.5.0/docs/api/](http://java.sun.com/j2se/1.5.0/docs/api/)

Java 有很多内置功能，所以尽量不要复制它（字符串函数等等）。

此外，IDE 可能会使一些事情变得更复杂，但它也会帮助您找到解决 API 的方法。Eclipse 是一个很好的起点（而且它是免费的） [http://www.eclipse.org/](http://www.eclipse.org/)

希望有点帮助。。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-05-14T17:41:30.703

你能在十周内学会绘画、雕刻或绘画吗？任何人都可以学习敲击编程的按键，就像任何人都可以拿起画笔一样，但需要时间和天赋来培养艺术性来*发展*。帮自己一个忙，把时间和精力花在*学习*上，而不是*死记硬背*。通过齐心协力了解如何*发展*所学到的经验教训将比为满足某个任意日期而拼命学习要好得多。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-05-14T21:34:35.153

学习编程的最佳建议基本上是：编写大量程序。

Project Euler 包含许多非常适合此目的的问题，因为生成的程序在大小上是可管理的，同时实际上允许您解决明确的问题。

[http://projecteuler.net/index.php](http://projecteuler.net/index.php)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-05-14T21:53:14.500

我与一些自学成才的程序员一起工作，他们阅读了诸如“在 0.01 天内学习 javascript”之类的内容。每天都值得[thedailywtf.com](http://thedailywtf.com/)的份额。

此外，在一次工作面试中，你会被问到“你有多少 javascript 经验？”，你的回答是“0.01 天”。

祝你好运，但我希望我们的道路不会再过几年

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-05-15T01:59:17.513

正如其他人所提到的，如果你有计算机编程背景，10 周应该就足够了。

如果您是 Jeff Atwood，则接近 6-8 周。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-05-14T17:31:47.780

我不明白你为什么不能这样做。我是一个爱读书的人，所以选择一本书并浏览它。设置一些小项目并完成它们。10 周比我通常学习一门新语言的时间要长。

玩得开心，希望你能学到很多。

我会发布我学习Java的书籍，但它们在家里，而我不在。

# wpf - 从 WPF Checked ComboBox 获取事件

> ID：864641
> 
> 赞同：0
> 
> 时间：2009-05-14T17:26:43.487
> 
> 标签：wpf, events, combobox

几乎全部 WPF 菜鸟。因此，我使用以下项目模板连接了一个组合框以具有复选框：

```
<ComboBox.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <CheckBox Checked="{Binding IsSelected}"
                   Width="20" Name="chkDayName" Click="chkDayName_Click"/>
            <TextBlock Text="{Binding DayOfWeek}"
                   Width="100"  Name="txtDayName" />
        </StackPanel>
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

在一个人单击复选框的实际事件中，我在 chkDayName_Click 方法中捕获了该事件。我有以下问题：

如何在项目模板中找出相应 TextBlock 的值？如何找出被点击项目的索引？
有没有办法联系到父母？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T20:04:44.637

如果我明白了，您想知道检查了哪些组合框项目？您可以为此使用 chkDayName_Click 并将日期名称添加为 CheckBox 的标记。这感觉很Winforms。在 WPF 中，您通常让您的数据绑定处理这样的功能。下面是一些代码，将在文本框中显示选定的项目和已检查的工作日列表。

XAML：

```
<Window x:Class="DayComboBoxDemo.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">

    <Window.Resources>

        <CollectionViewSource x:Key="checkedWeekdays" Source="{Binding Path=WeekDays}" Filter="IsCheckedFilter" />

    </Window.Resources>

    <StackPanel>
        <ComboBox
            ItemsSource="{Binding Path=WeekDays}"
            SelectedItem="{Binding Path=SelectedWeekDay}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox 
                            IsChecked="{Binding Path=IsChecked}"
                            Width="20" Click="chkDayName_Click"/>
                        <TextBlock 
                            Text="{Binding DayOfWeek}" Width="100" />
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
        <TextBlock Text="{Binding Path=SelectedWeekDay.DayOfWeek}" />
        <ListBox
            DisplayMemberPath="DayOfWeek"
            ItemsSource="{Binding Source={StaticResource checkedWeekdays}}" />
    </StackPanel>
</Window> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Data;

namespace DayComboBoxDemo
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();

            List<WeekDay> weekDays = new List<WeekDay>();
            foreach (DayOfWeek dayOfWeek in System.Enum.GetValues(typeof(DayOfWeek)))
            {
                weekDays.Add(new WeekDay() { DayOfWeek = dayOfWeek });
            }

            WeekDays = weekDays;

            _checkedWeekdays = FindResource("checkedWeekdays") as CollectionViewSource;

            DataContext = this;
        }

        public IEnumerable<WeekDay> WeekDays { get; set; }

        public WeekDay SelectedWeekDay
        {
            get { return (WeekDay)GetValue(SelectedWeekDayProperty); }
            set { SetValue(SelectedWeekDayProperty, value); }
        }

        public static readonly DependencyProperty SelectedWeekDayProperty =
            DependencyProperty.Register("SelectedWeekDay", 
                                        typeof(WeekDay), 
                                        typeof(Window1), 
                                        new UIPropertyMetadata(null));

        private void chkDayName_Click(object sender, RoutedEventArgs e)
        {
            _checkedWeekdays.View.Refresh();
        }

        private void IsCheckedFilter(object sender, FilterEventArgs e)
        {
            WeekDay weekDay = e.Item as WeekDay;
            e.Accepted = weekDay.IsChecked;
        }

        private CollectionViewSource _checkedWeekdays;
    }

    public class WeekDay
    {
        public DayOfWeek DayOfWeek { get; set; }
        public bool IsChecked { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T20:14:44.737

你可以试试 ComboBox 的 SelectedIndex 或 SelectedValue 来告诉 SelectedItem。在 MVVM 方式中，您可以在 SelectedIndex 和其中一个 ViewModel 属性之间进行双向绑定。

# php - HTML Purifier 选择性地吃掉特殊字符

> ID：864644
> 
> 赞同：2
> 
> 时间：2009-05-14T17:26:48.540
> 
> 标签：php, javascript, htmlpurifier

针对 UTF-8 兼容的数据库使用 PHP。这是输入的方式。

1.  用户在 textarea 中输入输入
2.  用 javascript escape() 编码的文本区域
3.  通过 HTTP post 传递
4.  用 PHP rawurldecode() 解码
5.  使用默认设置通过 HTMLPurifier
6.  为 MySQL 转义并存储在数据库中

它以通常的方式出现，我在页面加载时运行 unescape() 。这是为了让人们可以直接从 Word 文档中复制和粘贴，并显示智能引号。

但是 HTMLPurifier 似乎正在破坏非 UTF-8 特殊字符，那些转义（）到一个简单的 % 表达式的字符，比如 Ö，它转义到 %D6，而 smartquotes 转义到 %u2024 或其他东西并以这种方式进入数据库。它取出特殊字符和紧随其后的字符。

我需要在这个过程中改变一些东西。也许我需要改变很多事情。

我该怎么做才能不破坏特殊字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T17:53:26.370

> 2.  用 javascript escape() 编码的文本区域

[`escape`对于非ascii来说是不安全的。采用`escapeURIComponent`](https://developer.mozilla.org/En/Core_JavaScript_1.5_Guide/Predefined_Functions/Escape_and_unescape_Functions)

> 3.  通过 HTTP post 传递

我假设您使用`XmlHttpRequest`? 如果不是，请确保包含表单的页面以 utf-8 格式提供。

> 4.  用 PHP rawurldecode() 解码

如果您通过 访问该值`$_POST`，则不应对其进行解码，因为这已经完成。这样做会弄乱数据。

> 6.  为 MySQL 转义并存储在数据库中

确保您没有[`magic quotes`](http://www.php.net/magic_quotes)打开。确保数据库将表存储为 utf-8（编码*和*排序规则必须都是 utf-8）。确保 php 和 MySql 之间的连接是 utf-8 （使用`set names utf8`，如果你不使用 PDO）。

最后，确保再次输出字符串时页面以 utf-8 格式提供。

# wpf - WPF 包加载失败？

> ID：864658
> 
> 赞同：1
> 
> 时间：2009-05-14T17:29:42.573
> 
> 标签：wpf, visual-studio, visual-studio-2008

包裹加载失败

包“Microsoft.VisualStudio.Xaml”未能正确加载。. . 雅达，雅达，雅达。

那么现在怎么办？这个包有点重要，因为我希望今天下午做一些 WPF 的东西。尝试在没有它的情况下运行，我的 XAML 设计视图消失了。

我已经在命令提示符下尝试过“devenv /resetsettings”。

谢谢，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:33:50.723

尝试修复安装。

*   控制面板
*   添加删除程序
*   选择 Visual Studio 2008 并选择“修复”

您最近是否安装了 Visual Studio 或任何加载项的任何更新？如果可以，请您列出它们吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-30T17:45:46.547

安装 SP1：[http ://www.microsoft.com/downloads/details.aspx?FamilyId=FBEE1648-7106-44A7-9649-6D9F6D58056E&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=FBEE1648-7106-44A7-9649-6D9F6D58056E&displaylang=en)

我在全新安装 VS2008 Team System 后遇到了这个问题。尝试加载更新，运行设置，重新安装。没运气。

安装了 SP1 和宾果游戏！没有更多的包加载失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-27T02:36:03.180

在尝试了我能想到的一切以使其在选择工具|导入和导出设置时不会崩溃后，我终于看到了此错误进入工具|选项|环境字体和颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-27T02:39:21.880

我在安装 Visual Studio Professional 时遇到了这个问题。

我的理论是这是因为我已经安装了 Visual C# 2008 Express Edition。

一旦我卸载了两者，然后重新安装了 Visual Studio Professional，它就可以工作了。

这与 OP 的解决方案一致，即卸载任何其他实现 XAML 功能的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-13T21:46:34.090

就我而言，只是重新安装 SP1 没有用

然后我看到我在 IDE 中混合了两种语言。所以我检查了安装的程序，发现：

*   Microsoft Visual Studio 应用程序工具 2.0 英文版
*   Microsoft Visual Studio Tools For Applications 2.0 语言包 - ESN

当我卸载附加包时，设计视图再次开始工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-14T00:57:23.727

在我的例子中，由于最近的安装，machine.config 文件得到了一些错误的 XML。有两个结束标签。在我们纠正了错误的 XML 之后，.NET 就可以正常工作了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-04T01:57:13.063

谢谢亚伯拉罕的提示。我的 .NET 2.0 x86 machine.config 中缺少结束标记。

但是，我已经花费了数小时来修复、卸载、安装和安装服务包。

如果 VISUAL STUDIO 2008 出现“MACHINE.CONFIG”损坏错误，那就太好了！

# wcf - 是什么导致此错误消息？远程服务器返回错误：(422) Unprocessable Entity

> ID：864661
> 
> 赞同：1
> 
> 时间：2009-05-14T17:30:26.800
> 
> 标签：wcf, rest, xml-serialization

我尝试使用 WCF 向 REST API 提交请求；这是我所做的：

```
namespace Sample
{
    [ServiceContract]
    [XmlSerializerFormat]
    public interface ISampleApi
    {
        [OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "users.xml", ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml)]
        User CreateUser(User user);
    }
} 
```

这是我的`User`课：

```
namespace Sample.Entity
{
    [XmlRoot("user")]
    public class User
    {
        [XmlElement("company")]
        public string Company { get; set; }

        [XmlElement("country-code")]
        public string ContryCode { get; set; }

        [XmlElement("created-at")]
        public DateTime CreatedAt { get; set; }

        [XmlElement("email")]
        public string Email { get; set; }

        [XmlElement("external-identifier")]
        public string ExternalIdentifier { get; set; }

        [XmlElement("id")]
        public int Id { get; set; }

        [XmlElement("measurement-system")]
        public string MeasurmentSystem { get; set; }

        [XmlElement("profile")]
        public string Profile { get; set; }

        [XmlElement("url")]
        public string Url { get; set; }

        [XmlElement("username")]
        public string Username { get; set; }

        [XmlElement("account-type")]
        public string AccountType { get; set; }
    }
} 
```

但是当我调用 CreateUser 方法并将 User 对象传递给它时，我会收到以下错误消息：

**远程服务器返回错误：(422) Unprocessable Entity。**

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-10-01T11:19:52.003

该异常意味着 Web 服务器以错误代码响应，即 422。您需要与远程站点的管理员联系，了解原因。（或者查看响应的主体，如果有任何返回，它可能包含一些提示）。

以下是错误代码 422 的解释：[https ://www.rfc-editor.org/rfc/rfc4918#section-11.2](https://www.rfc-editor.org/rfc/rfc4918#section-11.2)

您发送到服务器的请求很可能以某种方式无效。如果不知道您针对哪个系统发送哪个请求，就不可能知道确切的错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T21:22:08.647

如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能发生此错误情况

重新检查 users.xml 以获取说明
国家代码是字符串还是整数值？

# .net - ADO.Net Excel，检查表是否存在？

> ID：864674
> 
> 赞同：1
> 
> 时间：2009-05-14T17:32:16.873
> 
> 标签：.net, asp.net, vb.net, excel, ado.net

我正在使用 ADO.Net 处理 Excel 文档。本质上，我在一个名为“source”的表中查找值并创建一个名为“result”的新表，该表将填充我的查询结果。

我有一些问题..

*   A）如何检查表是否存在，如果不存在则创建一个新表？
*   B) 表格是否与 Excel 中的工作表相同？

我正在从这个例子中工作.. [http://support.microsoft.com/kb/316934#10](http://support.microsoft.com/kb/316934#10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:10:42.210

这是我目前最好的解决方案..

```
dt = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, New Object() {Nothing, Nothing, Nothing, "TABLE"})

If dt.Rows.Count > 0 Then
    For Each row As DataRow In dt.Rows
        For Each column As DataColumn In dt.Columns
            If row(column).ToString() = "result" Then
                blnResultTableExists = True
            End If
        Next
    Next
End If 
```

# performance - ASP.NET 成员资格提供程序、用户 ID GUID 和磁盘空间

> ID：864677
> 
> 赞同：1
> 
> 时间：2009-05-14T17:33:22.377
> 
> 标签：performance, asp.net-membership, guid

我目前正在为 ASP.NET 使用 SQL Membership 提供程序，它使用 GUID 作为用户 ID。我的应用程序有几个自定义表，这些表与 User 表有外键关系，我担心标准提供程序将 GUID 用于用户 ID 对磁盘空间和性能的影响。

有没有人遇到过与此相关的空间/性能问题，如果有，是否有人们实施的自定义方法来解决这个问题？

任何见解或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T17:41:07.070

例如，我怀疑使用 GUID 而不是 INT 类型会导致任何空间问题。我要警告您的一件事是，您可能很想在数据库中的 GUID 列上创建聚集索引。不要这样做。默认情况下，GUID 是随机的，将随机数据插入具有聚集索引的列会导致一些问题。如您所知，集群意味着物理存储序列中。因此，当您插入一个新的随机值 (GUID) 时，该行通常必须插入到表的中间。这可能导致大量碎片化的索引。

我的建议是创建一个表，将 GUID 链接到 INT 值（如果您期望有很多用户，则为 BIGINT），然后在其他任何地方使用 INT。就像费尔明刚才所说的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T17:37:51.477

您是否可以没有将 GUID 映射到整数值的自定义表，然后您可以在自定义表中使用该整数？

```
UserId guid
FriendlyUserId int //use this as FK in other tables? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T18:00:06.587

如果您使用的是 SQL Server 2005，您可能需要查看该`NewSequentialId()`方法。Eric Swann[很好地概述](http://www.ericswann.org/blog/archive/2008/03/15/asp.net-sql-server-2005-membership-provider-and-newsequentialid.aspx)了它与 Membership 提供程序的使用。还有一篇[很好的文章](http://www.fotia.co.uk/fotia/DY.19.NewSequentialId.aspx)，介绍了使用顺序 GUID 而非默认随机 GUID 的好处。这是文章的性能比较摘录...

```
 [Reads] [Writes]  [Leaf Pages] [Avg Page Used] [Avg Fragmentation] [Record Count]
  IDENTITY(,)     0        1,683      1,667     98.9%            0.7%               50,000
  NEWID()           0      5,386      2,486     69.3%           99.2%               50,000
  NEWSEQUENTIALID() 0      1,746      1,725     99.9%            1.0%               50,000 
```

# c# - XML 序列化，在本例中为 IXmlSerializable 或 Attributes

> ID：864682
> 
> 赞同：1
> 
> 时间：2009-05-14T17:34:42.173
> 
> 标签：c#, .net, xml, ixmlserializable

我之前做过一些 XML 序列化，但我使用了属性，我不确定这对我的下一个任务是否可行，这里是 XML 操作要求的简要列表。

*   通用 XML 操作，绑定到树视图，无模式。
*   加载/保存 XML。
*   加载/保存属性和值（我相信这个词是元素文本？），并注意节点的名称。
*   可以像文档信息标记一样安全地忽略注释（即 UTF-8 和模式标记）

关于如何最好地处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T18:06:12.017

我可能不会为对象模型而烦恼，而且`IXmlSerializable`-听起来您也可以用`XmlElement`/来说话-即将`XmlDocument`数据作为xml块传递。由于您没有架构，因此将其撕碎是没有意义的；您不妨通过 xml DOM 来完成。

当你说treeview - 这是winforms，asp.net，wpf吗？我相信 asp.net 树视图可以采用 xml 源，但对于 winforms，您必须自己迭代节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-31T20:14:45.983

不知道“之前但我使用过属性”到底是什么意思，但我也推荐 XmlSerializer：

*   对于“简单”类，它通常开箱即用。
*   集合可能需要更多的工作，但这取决于您的要求和对象结构。
*   XML 序列化程序中还有其他构建，例如 XAML 或 WCF DataContractSerializer。都有优点和缺点。但是如果你想微调你的 XML 格式，XMLSerializer 是最灵活的一种。
*   您可以逐步处理您的格式：如果默认设置看起来不错，那么您就完成了。如果不是，在大多数情况下，您只需添加一些属性。
*   如果您想要完全控制，您仍然可以实现 IXmlSerialize 来微调您的格式。
*   一切都适用于每个类：在适当的地方使用默认值，在需要的地方添加一些属性并根据需要实现 IXmlSerializable。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-07-30T18:45:05.590

我建议您使用 .NET 框架支持的简单 XML 序列化。

浏览这些 MSDN 文档

[如何序列化对象](http://msdn.microsoft.com/en-us/library/szzyf24s(VS.80).aspx)

[如何反序列化对象](http://msdn.microsoft.com/en-us/library/fa420a9y(VS.80).aspx)

# sql - 使用 smalldatetime 或 int 在数据库中存储一个月

> ID：864683
> 
> 赞同：0
> 
> 时间：2009-05-14T17:34:45.697
> 
> 标签：sql, database, database-design

我目前正在为我们的组织开发一个月度清单系统。用户可以登录，选择一个月，然后提交与该月相关的是/否问题列表，以供我们组织使用。有些问题在超过 1 个月的清单中使用，所以我正在创建一个交集表来促进这种一对多的关系。这些字段是 ChecklistMonth 和 ChecklistQuestionID。

但是，我不确定如何存储 ChecklistMonth 字段。如果我使用 smalldatetime，这似乎有点矫枉过正，因为我只对月份感兴趣。它在未来几年也会显得有些过时。另一方面，创建一个包含 MonthID 和 Month 字段的表以仅标识月份似乎有点浪费。

大家对此有何看法？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T17:40:32.547

如果是一个月而不考虑年份，我会使用 TINYINT。我认为您不需要单独的查找表，因为月份的数字非常不同且通用（无需进入中国或犹太日历等......）。

如果您使用任何类型的日期时间，那么您总是需要记住它的确切规则。您是否将其存储为每月的第一天？月中的一天？哪年？另外，在数据库中使用了额外的、不必要的空间。

编辑：我以为我已经将此添加到我的回复中，但显然没有......记得在列中添加检查约束：

```
CHECK (month BETWEEN 1 AND 12) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T17:41:50.970

咬紧牙关，使用 MonthID。从长远来看，这是更好的决定，因为它更清晰，而且为 Month 建立枚举表所涉及的浪费是微不足道的。

（顺便说一句，我认为使用枚举表作为月份的决定是正确的，虽然有些人可能认为没有必要。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:42:41.280

我会将其存储为 int。我同意你的观点，smalldatetime 太过分了，将来可能会令人困惑。更不用说您仍然需要提取月份以检查它是否是您查询的月份。

您需要交叉引用表吗？您的 MonthId 应该是 1=Jan，2=Feb 到 12。我认为拥有一个包含月份编号的字段是非常自我记录的，并且不需要额外的查找表。当然，假设您在这里只处理单个压光机。

# .net-2.0 - Best .NET Framework 2.0 book for C#, Libraries?

> ID：864685
> 
> 赞同：1
> 
> 时间：2009-05-14T17:35:04.293
> 
> 标签：.net-2.0, c#-2.0

I am an senior-slash-"advanced" C#/.NET developer, currently using 3.5 Framework with WPF/WCF and Silverlight (WPF/E). I have come up right through 1.0 and 2.0 and so am well versed with the evolution of .NET. My next project could be "back" into 2.0 Framework, but with enough complexity (and time pressure) so as to call on "expert" skills, not just "advanced" ones.

Thus I am looking for a book with comprehensive coverage of the 2.0 Framework, primarily the organization and use of the libraries (by which, yes, I really just mean "the Framework"...) available in that rev. I want to have a complete, organized reference on hand for what tools are available in the box, so to speak, to choose the right ones at each step and not re-invent any wheels.

I own and love "CLR via C#", but this isn't a question about the CLR, it's about libraries (Framwork) primarily, and also interfacing techniques to .NET-supported related products.

If I "subtract out" my existing 3.0/3.5 knowledge/experience, I might say that I've only ever thoroughly investigated and used some 50-75% of the 2.0 Framework - so what I'd like to see is an authoritative guide to the full 100%. Doesn't need rigorous details or comprehensive examples, but rather a full assessment of scale and scope to be able to design and implement effective solutions in .net 2.0 "the right way".

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:08:34.633

[C# 3.0 in a Nutshell](https://rads.stackoverflow.com/amzn/click/com/0596527578) covers parts of the framework in sufficient detail. I find it to be a very useful book to have around.

[Programming Microsoft Visual C# 2005: The Base Class Library](https://rads.stackoverflow.com/amzn/click/com/0735623082) specifically covers the framework, but in my opinion the Nutshell book is better and you can always find additional information on MSDN.

[Windows Forms Programming in C#](https://rads.stackoverflow.com/amzn/click/com/0321116208) covers WinForms in detail, or you may want to look at Chris Sells' book on WPF instead. I'm not familiar with the latter, but the first is okay.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:47:52.593

It sounds like you have a good grasp on C# itself, so you probably want to know what was in 2.0 that isn't in 3.0 or 3.5\. For this reason, you might be interested in some of the following resources, namely the C# 2.0 standard:

*   [ECMA C# 2.0 Standard](http://www.ecma-international.org/publications/standards/Ecma-334.htm)
*   [C# 2.0 - The Complete Reference](https://rads.stackoverflow.com/amzn/click/com/0072262095)
*   Any of the C# books by [Apress](http://www.apress.com/)

I particularly like the C# 2.0 Complete Reference book, and keep a copy on my desk at home, but the C# 2.0 standard is incomparably good as well; it's just a question of whether you can stay awake long enough to get through any of it. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:53:52.220

For WinForms programming, the book that has proved itself most useful to me is [Windows Forms 2.0 Programming](https://rads.stackoverflow.com/amzn/click/com/0321267966). If there isn't a single book that has everything you're looking for, I think this book would be part of the collection comprising the next best thing.

# gcc - GCC 没有将库链接到非默认路径

> ID：864686
> 
> 赞同：2
> 
> 时间：2009-05-14T17:35:29.580
> 
> 标签：gcc, boost, linker, g++

我已经在我的 Fedora10 机器上安装了 boost C++ 库，但我想使用一个更新的版本，我保存在我的主文件夹中的某个位置。我希望 g++ 使用我的主文件夹位置中的包含和库文件，而不是默认 ( `/usr/include and /usr/lib64`)。

就此而言，我还在我的文件中声明`CPLUS\_INCLUDE\_PATH and LIBRARY\_PATH`了环境变量，如此[处](http://www.network-theory.co.uk/docs/gccintro/gccintro_23.html)所述。`~/.bashrc`

现在当我跑步时，

```
g++ -o hello.so -fPIC hello.cpp -shared -lboost_python 
```

预处理器使用我的主文件夹位置中的包含文件，覆盖默认位置（因为它应该，因为`CPLUS\_INCLUDE\_PATH`在搜索路径中具有更高的优先级）。但是链接器似乎没有遵循相同的优先规则。它总是从默认位置使用 libboost_python.so`/usr/lib64`而不是首先搜索`LIBRARY\_PATH`。只有当我使用switch`libboost\_python.so`明确指定时，它才会链接到我的主文件夹中的库。`-L`这真的很不方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:52:24.360

`-L`开关是告诉编译器在哪里找到库的标准方式。编写一个构建您的编译器/链接器开关的生成文件 - 您会发现投入时间是值得的。您可以执行以下操作：

```
MY_LIBPATH += -L$(BOOST_LIB_PATH)
MY_INCPATH += -I$(BOOST_INC_PATH)
你好.so：你好.cpp
    g++ -o $@ -fPIC $(MY_INCPATH) $(MY_LIBPATH) hello.cpp -shared -lboost_python

```

然后你可以通过环境来控制它（当然，如何构建makefile可能会有很多变化。）

# java - 在哪里可以找到 Java 的语法高亮库？

> ID：864688
> 
> 赞同：27
> 
> 时间：2009-05-14T17:36:00.937
> 
> 标签：java, editor, syntax-highlighting

我正在用 Java 编写一个源代码编辑器（用于 Java 源代码），我想添加简单的语法突出显示（关键字的独特颜色就足够了）。有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-14T17:39:41.753

类似的东西[`JSyntaxPane`](http://code.google.com/p/jsyntaxpane/)，也许？

> 一个非常易于使用和扩展的 JEditorKit，支持几种语言。主要目标是让外观漂亮的 Java Swing 编辑器变得容易，并支持语法突出显示。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-14T17:47:42.827

[RSyntaxTextArea](https://github.com/bobbylight/RSyntaxTextArea)呢？它使用[修改后的 BSD 许可证](https://github.com/bobbylight/RSyntaxTextArea/blob/master/src/main/dist/RSyntaxTextArea.License.txt)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T17:56:12.197

您首先应该考虑使用通用解析器从源代码创建 AST（抽象语法树）。周围有一些工具，首先我发现在互联网上搜索是[javaparser](http://code.google.com/p/javaparser/)。看起来这个解析器还记录了行号和列，所以来自 javaparser 的 AST 可以成为编辑器的一个很好的模型。

只需处理树，为 AST 节点类型定义颜色并打印它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T17:44:30.853

可能想查看现有的编辑器（例如 Notepad++ - [http://notepad-plus.sourceforge.net/uk/site.htm](http://notepad-plus.sourceforge.net/uk/site.htm)）并查看用户定义的语法突出显示是如何完成的（要检查的插件之一 - Gmod 10 Lua 语法荧光笔）。我敢打赌，Java（和其他语言）也是类似的......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T17:48:27.757

您应该检查 Google 的[prettify.js](http://code.google.com/p/google-code-prettify/)。那里有一些非常巧妙的技巧，您可能会对语法高亮有更强大的感觉。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2009-08-07T10:42:03.050

[http://www.neathighlighter.com/](http://www.neathighlighter.com/)是一个很好的 JavaScript 荧光笔

# oracle - 如何将 Oracle 存储过程包装在由标准 SELECT 查询执行的函数中？

> ID：864695
> 
> 赞同：1
> 
> 时间：2009-05-14T17:37:11.900
> 
> 标签：oracle, stored-procedures, function

我正在执行这些步骤，但我继续收到错误并且没有看到问题：

1) 创建一个自定义 Oracle 数据类型，代表您要检索的数据库列：

```
CREATE TYPE my_object AS OBJECT
     (COL1       VARCHAR2(50),
      COL2       VARCHAR2(50),
      COL3       VARCHAR2(50)); 
```

2) 创建另一个数据类型，即您刚刚创建的对象的表：

```
 TYPE MY_OBJ_TABLE AS TABLE OF my_object; 
```

3) 创建一个返回该表的函数。还可以使用管道子句，以便将结果通过管道传输回调用 SQL，例如：

```
 CREATE OR REPLACE
    FUNCTION MY_FUNC (PXOBJCLASS varchar2)
    RETURN MY_OBJ_TABLE pipelined IS
    TYPE ref1 IS REF CURSOR
    Cur1 ref1,
    out_rec_my_object := my_object(null,null,null);
    myObjClass VARCHAR2(50);
    BEGIN
    myObjClass := PXOBJCLASS
    OPEN Cur1 For ‘select PYID, PXINSNAME, PZINSKEY from PC_WORK where PXOBJCLass = ;1’USING myObjClass,
    LOOP
        FETCH cur1 INTO out_rec.COL1, out_rec.COL2, out_rec.COL3;
        EXIT WHEN Cur1%NOTFOUND;
        PIPE ROW (out_rec);
    END LOOP;
    CLOSE Cur1;
    RETURN;
    END MY_FUNC; 
```

注意：在上面的示例中，您可以轻松地将 select 语句替换为调用另一个返回游标变量的存储过程。

4) 在您的应用程序中，使用以下 SQL 语句将此函数作为表函数调用：

```
select COL1, COL2, COL3 from TABLE(MY_FUNC('SomeSampletask'));
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:09:10.030

不需要使用动态sql（动态sql总是慢一点），声明的变量太多。for循环也容易得多。我将函数的参数从 pxobjclass 重命名为 p_pxobjclass。

试试这个：

```
create or replace function my_func (p_pxobjclass in varchar2)
return my_obj_table pipelined
is 
begin
  for r_curl in (select pyid,pxinsname,pzinskey 
                 from   pc_work
                 where  pxobjclass = p_pxobjclass) loop
    pipe row (my_object(r_curl.pyid,r_curl.pxinsname,r_curl.pzinskey));          
  end loop;
  return; 
end; 
```

**编辑1：**

顺便说一下，返回 ref 游标而不是返回嵌套表的流水线函数更快：

```
create or replace function my_func2 (p_pxobjclass in varchar2)
return sys_refcursor
is 
  l_sys_refcursor sys_refcursor; 
begin
  open l_sys_refcursor for 
    select pyid,pxinsname,pzinskey 
    from   pc_work
    where  pxobjclass = p_pxobjclass;
  return l_sys_refcursor;  
end; 
```

这更快，因为创建对象 (my_object) 需要一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:46:07.853

我看到两个问题：

1.  动态查询不起作用，试试这个：

    '从 PC_WORK 中选择 PYID、PXINSNAME、PZINSKEY，其中 PXOBJCLass ='''||PXOBJCLASS||''''

您不需要 myObjClass，而且您的所有引用似乎都是错误的。

2.  引用“SomeSampletask”...

    从 TABLE(MY_FUNC('SomeSampletask')) 中选择 COL1、COL2、COL3；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:49:43.027

也许我在这里误解了一些东西，但看起来你想使用一个视图。

# jquery - 想用 jquery 向 td 添加填充

> ID：864705
> 
> 赞同：0
> 
> 时间：2009-05-14T17:39:20.197
> 
> 标签：jquery, css, html-table, cell, padding

我需要在一个 div 中找到 td 并向该 div 中的所有 td 添加一个类，我该如何使用 jquery 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T17:42:39.610

```
$("#myDiv td").addClass("myClass"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T18:26:28.817

jQuery 选择器基于 CSS 选择器。选择器之间的“”（空格）查找父节点的所有子节点（递归）。

所以：

```
$('#myDiv td') 
```

首先找到#mydiv，然后获取所有后代（递归地找到孩子），然后检查它们是否为'td'，过滤掉其余的。

如果您只想将该类应用于“#mydiv”的直接子级：

```
$('#myDiv > td') 
```

# c# - C# 控制台应用程序会话/存储

> ID：864706
> 
> 赞同：1
> 
> 时间：2009-05-14T17:39:22.240
> 
> 标签：c#, oop, console

在控制台应用程序中实现伪会话/本地存储类的最佳方法是什么？基本上，当应用程序启动时，我会接受一些我想在应用程序运行时提供给每个班级的参数。我在想我可以创建一个静态类并在应用程序启动时初始化值，但是有没有更优雅的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T17:47:08.710

我通常创建一个名为“ConfigurationCache”（或类似的东西）的静态类，可用于提供应用程序范围的配置设置。

请记住，您不想对全局变量太着迷。我强烈建议您查看您的设计并通过方法参数传递您需要的内容。您的设计应该使每个方法都接收所需的参数（请参阅 Code Complete 2 - Steve McConnell）。

这并不是说静态类是错误的，而是问自己为什么需要将参数传递给各种类和方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T17:43:13.853

如果您想获取命令行参数（或其他一些超级骗子设置）并将它们放在整个应用程序可以看到的地方，我不知道为什么您会认为将它们放在静态类中“不优雅”应用程序启动。这听起来与您想要做的完全一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:48:03.513

如果您需要一个可以在代码中传递的对象，则可以使用单例设计模式，但 imo 静态类也可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T17:49:58.767

坦率地说，我认为最优雅的方法是重新考虑您的设计以避免“全局”变量。应该创建类或接收它们需要构造的数据；方法应该对这些数据进行操作。您通过创建一个或多个类完成其工作所需的全局变量来违反封装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:52:17.667

我建议可能实现一个单例类来管理您的伪会话数据。您将能够全局访问数据，同时确保仅存在一个类实例并在对象之间共享时保持一致。

[单例类的 MSDN 实现](http://msdn.microsoft.com/en-us/library/ms998558.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T18:04:21.210

将您的数据视为所有类所需的配置文件。每个类都可以访问该文件 - 因此通过静态类公开数据并没有什么问题。

但是每个类都必须知道配置文件的路径，并且路径的更改会影响许多类。（当然，路径最好只在一个类中为常量，所有类都需要该路径。）因此，更好的解决方案是创建一个封装对配置文件的访问的类。现在每个类都可以创建此类的实例并访问文件的配置数据。因为您的数据没有文件支持，所以您必须构建类似单态的东西。

现在你可以开始考虑类耦合了。这对你有关系吗？您是否打算编写单元测试并且必须模拟配置数据？是的？在这种情况下，您应该开始考虑使用依赖注入并仅通过接口访问数据。

所以我建议使用接口使用依赖注入，我会用单态模式实现接口。

# java - 在 TableCellRenderer 中使用自定义 Swing JComponent

> ID：864707
> 
> 赞同：0
> 
> 时间：2009-05-14T17:39:24.813
> 
> 标签：java, swing, jcomponent, tablecellrenderer

好的，我知道如何制作一个简单的自定义 JComponent。我知道如何覆盖 TableCellRenderer。我似乎无法将两者结合起来。

`JComponent`这是我创建的示例：

```
public static class BarRenderer extends JComponent
{
    final private double xmin;
    final private double xmax;
    private double xval;
    public BarRenderer(double xmin, double xmax)
    {
        this.xmin=xmin;
        this.xmax=xmax;
    }

    @Override protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Rectangle r = g.getClipBounds();
        g.drawRect(r.x, r.y,
                (int)(r.width * ((xval-xmin)/(xmax-xmin))), r.height);
    }

    public void setXval(double x) { 
        this.xval = x;
        repaint();
    }
    public double getXval() { return xval; }
} 
```

它可以作为独立的 JComponent 正常工作。我打电话`setXval(something)`，它更新就好了。（编辑：我有一个摆动计时器，它会定期更新数据）

但是如果这个组件是我在 TableCellRenderer.getTableCellRendererComponent() 中返回的东西，那么它只会在我单击相关单元格时重新绘制。是什么赋予了？我一定遗漏了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T10:37:26.207

出于性能原因，JTable 重用渲染器组件来绘制多个单元格 - 因此，当您在 JTable 中看到组件时，它实际上并不存在于传统意义上的容器中的组件存在于某个位置。这意味着在渲染器组件上调用 repaint() 什么都不做。

最有效的选择是将条形的整数值存储在 TableModel 中。然后，您的 TableCellRenderer 将如下所示：

```
public class BarTableCellRenderer implements TableCellRenderer {
    private final BarRenderer rendererComponent = new BarRenderer(0, 10);

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        rendererComponent.setXval((Integer)value);
        return rendererComponent;
    }
} 
```

然后您可以更改 TableModel 中的 Integer ，它会触发条的重绘（您可能需要一个 TableModel.fireTableCellUpdated 取决于您正在使用的 TableModel 实现）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T14:20:42.850

你们两个（Russ Hayward 和 Andrew）都提供了帮助，关键是要做到以下几点：

*   将要显示的状态存储在 TableModel 本身中，而不是在渲染器中
*   确保当 TableModel 的状态发生变化时，`fireTableCellUpdated()`调用
*   我的自定义列只有*一个*TableCellRenderer 对象和*一个*JComponent（不是每个单元格一个）
    *   内部`TableCellRenderer.getTableCellRendererComponent()`存储单元格的状态，以便在不久之后呈现（长期存储在 TableModel 中）
    *   将该状态提供给 JComponent
    *   返回 JComponent
    *   覆盖`JComponent.PaintComponent()`
*   一种方便的可能性是自定义渲染器扩展 JComponent 并实现 TableCellRenderer，然后在`TableCellRenderer.getTableCellRendererComponent()`您存储单元格的状态和`return this;`

这是我现在可以使用的代码的相关摘录：

```
class TraceControlTableModel extends AbstractTableModel {
    /* handle table state here */

    // convenience method for setting bar value (table model's column 2)
    public void setBarValue(int row, double x)
    {
        setValueAt(x, row, 2);
    }
}

// one instance of BarRenderer will be set as the
// TableCellRenderer for table column 2
public static class BarRenderer extends JComponent 
    implements TableCellRenderer 
{
    final private double xmin;
    final private double xmax;
    private double xval;
    public BarRenderer(double xmin, double xmax)
    {
        super();
        this.xmin=xmin;
        this.xmax=xmax;
    }

    @Override protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Rectangle r = g.getClipBounds();
        g.drawRect(r.x, r.y,
                (int)(r.width * ((xval-xmin)/(xmax-xmin))), r.height);
    }

    @Override
    public Component getTableCellRendererComponent(JTable arg0,
            Object value, 
            boolean isSelected, boolean hasFocus,
            int row, int col)
    {
        // save state here prior to returning this object as a component
        // to be painted
        this.xval = (Double)value;
        return this;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T23:06:11.407

如果您制作一个包含 3 行的表格，每行都有不同的 Xval，那么它最初是否正确渲染，这意味着每个单元格都有不同的外观栏？

当您说除非您单击它才重新绘制它，那么您的基础数据是否发生了本应导致数据的视觉显示（渲染栏）发生变化的情况？

如果数据发生了变化，但表格没有立即重新渲染，那么我会说您的 TableModel 工作不正常。

底层数据更改 -> TableModel 更改 -> 触发 TableModelEvent -> JTable 重新渲染

查看 TableModel 教程：http: [//java.sun.com/docs/books/tutorial/uiswing/components/table.html#data](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html#data)

确保你做的一切都是正确的。

# sql-server - 如何找到视图的下游依赖项？

> ID：864708
> 
> 赞同：1
> 
> 时间：2009-05-14T17:39:25.233
> 
> 标签：sql-server, sql-server-2005

在 SQL Server 2005 上，您应该能够通过右键单击对象并选择“查看依赖关系”来在 Manglement Studio 中找到依赖关系。该对话框让您可以选择“依赖于此的对象”（我称之为下游）或“依赖于此的对象”（上游）。

两个方向似乎都适用于 Table 对象，而 View 对象似乎在上游方向报告了良好的信息。然而，视图的下游列表似乎只包含视图本身——即使我*知道*还有其他依赖项（在这种情况下是另一个视图）。

有没有办法可以找到这些信息？如果我有关于目标的线索，我很乐意针对系统表编写查询......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T17:55:07.240

尝试：

```
sp_depends YourViewName 
```

如果您没有得到任何结果，请删除并重新创建您的视图，然后重试。删除和重新创建可能适用于 GUI，但我没有在那里尝试

这有点慢（而且不是最好的查询），但试一试：

```
DECLARE @Search  varchar(300)
SET @Search='yourViewName'
SELECT DISTINCT
    LEFT(so.name, 120) AS Object_Name,
    "object_type"=left(
          case so.type
        when 'U' then 'Table - User'
        when 'S' then 'Table - System'
        when 'V' then 'Table - View'
        when 'TR' then 'Trigger'
        when 'P' then 'Stored Procedure'
        when 'C' then 'Constraint - Check'
        when 'D' then 'Default'
        when 'K' then 'Key - Primary'
        when 'F' then 'Key - Foreign'
        when 'L' then 'Log'
        when 'R' then 'Rule'
        when 'RF' then 'Replication Filter stp'
        else '<<UNKNOWN '''+so.type+'''>>'
    end  -- case so.type
        ,50)
    FROM syscomments sc 
        INNER JOIN sysobjects so 
            ON so.id = sc.id
    WHERE
        text Like '%'+@Search+'%'
    ORDER BY 
        2,1 
```

# c# - WindowsMo bile - 如何检查是否有 WIFI 连接？

> ID：864709
> 
> 赞同：2
> 
> 时间：2009-05-14T17:39:28.870
> 
> 标签：c#, windows-mobile

如何检查我的 Windows 移动程序中是否有 WIFI 连接？

（我不想使用 try & catch 进行任何操作）

我使用 Windows mobile 2005、FW 3.5、WS2008

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T18:02:37.720

Microsoft.WindowsMo​​bile.Status 命名空间具有大量信息项。现在没有直接提及 WiFi（蓝牙和蜂窝网络），但您可以使用 SystemState.ConnectionsCount 和 SystemState.ConnectionsDescriptions 检查“任何”网络连接。

如需更精确，请检查 OpenNetCF 库（像往常一样）。

# java - 是否可以使用 JSTL 在客户端的时区显示日期？

> ID：864713
> 
> 赞同：3
> 
> 时间：2009-05-14T17:40:04.453
> 
> 标签：java, javascript, date, jstl

在 Javascript 中，我有这个函数可以在我们的页眉上显示当前日期：

```
<SCRIPT language="Javascript">
    var today = new Date();
    document.write(today.toLocaleDateString());
</SCRIPT> 
```

我想通过 JSTL 做到这一点，但我不确定这是否可能。到目前为止，我有这段代码：

```
<jsp:useBean id="date" class="java.util.Date" />
<fmt:formatDate value="${date}" type="date" pattern="EEEE, MMMM dd, yyyy"/> 
```

因为现在正在服务器上创建日期，所以它可能不代表客户端的日期。我相信我可以设置formatDate函数的timeZone属性，但是我不确定如何抓取客户端的时区。有人可以提供建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:49:24.663

服务器拥有的所有信息都在 HTTP 请求中，其中不包含任何有关时间或时区的信息。

所以你有两个选择：

*   使用 cookie，您可以存储时区，然后在服务器端检索它。这里的问题是您必须等待第二个请求才能使用时区值。

*   使用 AJAX，通过 javascript 和 XMLHttpRequest 对象，您可以将“new Date().getTimezoneOffset()”值推送到服务器，将其存储在会话变量中

如果您只想显示时区，可能任何选项都太多了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:38:55.997

在不询问用户某些信息的情况下，我可以看到这样做的唯一方法是使用 javascript 格式化日期。不完全是最漂亮的解决方案，我可能会补充

```
<script ...>document.write(<javascript to format the date>)</script> 
```

或者，您可以考虑以格式化日期显示时区。这样，用户至少知道您使用的是哪个时区。

# oracle - 连接到 Oracle 和 JNI 的基于 Java Web 的表单的最佳解决方案？

> ID：864715
> 
> 赞同：0
> 
> 时间：2009-05-14T17:40:13.360
> 
> 标签：oracle, forms, jsf

我的公司目前正在努力从 Informix 迁移到 Oracle 10g。我们不想使用任何形式的 oracle 表单，而是想创建与 Oracle db 交互的基于 Java Web 的表单（这些将取代我们的 Informix 表单）。有些表单还需要对我们的底层C代码库实现一些JNI。

解决这个问题的最佳方法是什么——即使用 JSF？

欢迎发表意见！凯伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T02:05:04.363

真的没有“最佳方式”.. 看看可用的工具并自己评估。

在不知道你的项目范围的情况下，我个人会看像[Grails这样的东西](http://www.grails.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-14T14:21:10.837

@KNewton 现在，我的公司正在进行一个类似的项目。您使用哪个 java 框架来重写您的 oracle 表单应用程序？

# windows - 如何在批处理文件中附加日期

> ID：864718
> 
> 赞同：49
> 
> 时间：2009-05-14T17:40:32.470
> 
> 标签：windows, batch-file

我在批处理文件中有以下行（在旧的[Windows 2000](http://en.wikipedia.org/wiki/Windows_2000)机器上运行）：

```
7z a QuickBackup.zip *.backup 
```

如何将日期附加到`QuickBackup.zip`文件中。因此，如果我今天运行批处理文件，理想情况下，该文件将是`QuickBackup20090514.zip`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-05-14T20:29:56.527

[Bernhard 的回答](https://stackoverflow.com/a/864743/144669)需要对我进行一些调整，因为 %DATE% 环境变量的格式不同（如其他地方所述）。此外，还缺少一个波浪号 (~)。

代替：

> `set backupFilename=%DATE:~6,4%%DATE:~3,2%%DATE:0,2%`

我不得不使用：

> `set backupFilename=%DATE:~10,4%%DATE:~4,2%%DATE:~7,2%`

对于日期格式：

c:\Scripts>echo %DATE%

2009 年 5 月 14 日星期四

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-14T17:45:17.093

这适用于非美国日期格式 ( `dd/MM/yyyy`)：

```
set backupFilename=%DATE:~6,4%%DATE:~3,2%%DATE:~0,2%
7z a QuickBackup%backupFilename%.zip *.backup 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-27T13:32:03.190

如果您知道您的区域设置不会改变，您可以按以下方式进行：

*   如果您的短日期格式是 dd/MM/yyyy：

    设置 MYDATE=%DATE:~3,2%%DATE:~0,2%%DATE:~8,4%

*   如果您的短日期格式是 MM/dd/yyyy：

    设置 MYDATE=%DATE:~0,2%%DATE:~3,2%%DATE:~8,4%

但是没有独立于您的区域设置的通用方法。

**我不建议将要在生产环境中使用的任何东西都依赖于区域设置。** 相反，您应该考虑使用另一种脚本语言 - PowerShell、VBScript、...

例如，如果您在与批处理文件相同的目录中创建具有以下内容的 VBS 文件**yyyymmdd.vbs ：**

```
' yyyymmdd.vbs - outputs the current date in the format yyyymmdd
Function Pad(Value, PadCharacter, Length)
    Pad = Right(String(Length,PadCharacter) & Value, Length)
End Function

Dim Today
Today = Date
WScript.Echo Pad(Year(Today), "0", 4) & Pad(Month(Today), "0", 2) & Pad(Day(Today), "0", 2) 
```

那么您将能够从您的批处理文件中调用它：

```
FOR /F %%i IN ('cscript "%~dp0yyyymmdd.vbs" //Nologo') do SET MYDATE=%%i
echo %MYDATE% 
```

当然，最终会出现一种情况，即用更强大的脚本语言重写批处理文件比以这种方式将它与 VBScript 混合更有意义。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-05-20T08:08:32.577

```
@SETLOCAL ENABLEDELAYEDEXPANSION

@REM Use WMIC to retrieve date and time
@echo off
FOR /F "skip=1 tokens=1-6" %%A IN ('WMIC Path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') DO (
    IF NOT "%%~F"=="" (
        SET /A SortDate = 10000 * %%F + 100 * %%D + %%A
        set YEAR=!SortDate:~0,4!
        set MON=!SortDate:~4,2!
        set DAY=!SortDate:~6,2!
        @REM Add 1000000 so as to force a prepended 0 if hours less than 10
        SET /A SortTime = 1000000 + 10000 * %%B + 100 * %%C + %%E
        set HOUR=!SortTime:~1,2!
        set MIN=!SortTime:~3,2!
        set SEC=!SortTime:~5,2!
    )
)
@echo on
@echo DATE=%DATE%, TIME=%TIME%
@echo HOUR=!HOUR! MIN=!MIN! SEC=!SEC!
@echo YR=!YEAR! MON=!MON! DAY=!DAY! 
@echo DATECODE= '!YEAR!!MON!!DAY!!HOUR!!MIN!' 
```

输出：

```
DATE=2015-05-20, TIME= 1:30:38.59
HOUR=01 MIN=30 SEC=38
YR=2015 MON=05 DAY=20
DATECODE= '201505200130' 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-27T13:33:27.057

您还可以通过变量访问日期`%DATE%`

测试我的系统时`%DATE%`产生 ddd dd/mm/yyyy

您可以使用子字符串运算符来生成您想要的格式

IE。使用美国区域设置在 2018 年 11 月 12 日星期一运行以下内容

```
%DATE:~3,3% %DATE:~0,3% %DATE:~7,2% 
```

将产生一个输出：

```
11 Mon 12 
```

子字符串参数是
`%*variable*:~*startpos*,*numberofchars*%`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-01-17T10:53:58.327

这一切都很尴尬，而且与本地设置无关。像这样做：

```
%CYGWIN_DIR%\bin\date +%%Y%%m%%d_%%H%%M% > date.txt
for /f "delims=" %%a in ('type "date.txt" 2^>NUL') do set datetime=%%a
echo %datetime%
del date.txt 
```

是的，使用[Cygwin](http://en.wikipedia.org/wiki/Cygwin)日期，所有问题都消失了！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-14T17:43:36.800

当然。

```
FOR %%A IN (%Date:/=%) DO SET Today=%%A
7z a QuickBackup%TODAY%.zip *.backup 
```

即 DDMMYYYY 格式。

这是 YYYYDDMM：

```
FOR %%A IN (%Date%) DO (
    FOR /F "tokens=1-3 delims=/-" %%B in ("%%~A") DO (
        SET Today=%%D%%B%%C
    )
)
7z a QuickBackup%TODAY%.zip *.backup 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-27T13:29:41.760

[这里](http://www.tech-recipes.com/rx/956/windows-batch-file-bat-to-get-current-date-in-mmddyyyy-format/)有一个可用的技术配方，展示了如何将其格式化为 MMDDYYYY，您应该能够根据需要对其进行调整。

```
echo on
@REM Seamonkey’s quick date batch (MMDDYYYY format)
@REM Setups %date variable
@REM First parses month, day, and year into mm , dd, yyyy formats and then combines to be MMDDYYYY
FOR /F "TOKENS=1* DELIMS= " %%A IN ('DATE/T') DO SET CDATE=%%B
FOR /F "TOKENS=1,2 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET mm=%%B
FOR /F "TOKENS=1,2 DELIMS=/ eol=/" %%A IN ('echo %CDATE%') DO SET dd=%%B
FOR /F "TOKENS=2,3 DELIMS=/ " %%A IN ('echo %CDATE%') DO SET yyyy=%%B
SET date=%mm%%dd%%yyyy%

echo %date% 
```

编辑：之前不起作用的原因是因为原文中的“smartquotes”。我修复了它们，如果从该页面剪切和粘贴，批处理文件将起作用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-14T17:43:46.720

我使用了这里介绍的环境变量技术：[http ://cwashington.netreach.net/depo/view.asp?Index=19](http://cwashington.netreach.net/depo/view.asp?Index=19)

[http://cwashington.netreach.net/depo/default.asp?topic=repository&move=last&ScriptType=command&SubType=Misc](http://cwashington.netreach.net/depo/default.asp?topic=repository&move=last&ScriptType=command&SubType=Misc)

这是该站点的代码：

```
::~~Author~~.          Brett Middleton
::~~Email_Address~~. brettm@arches.uga.edu
::~~Script_Type~~.   nt command line batch
::~~Sub_Type~~. Misc
::~~Keywords~~. environment variables

::~~Comment~~.
::Sets or clears a group of environment variables containing components of the current date extracted from the string returned by the DATE /T command.  These variables can be used to name files, control the flow of execution, etc.

::~~Script~~.

@echo off

::-----------------------------------------------------------------------------
::  SetEnvDate1.CMD                                                     6/30/98
::-----------------------------------------------------------------------------
::  Description  :  Sets or clears a group of environment variables containing
::               :  components of the current date extracted from the string
::               :  returned by the DATE /T command.  These variables can be
::               :  used to name files, control the flow of execution, etc.
::               :
::  Requires     :  Windows NT with command extensions enabled
::               :
::  Tested       :  Yes, as demonstration
::               :
::  Contact      :  Brett Middleton <brettm@arches.uga.edu>
::               :  Animal and Dairy Science Department
::               :  University of Georgia, Athens
::-----------------------------------------------------------------------------
::  USAGE
::
::  SetEnvDate1 can be used as a model for coding date/time routines in
::  other scripts, or can be used by itself as a utility that is called
::  from other scripts.
::  
::  Run or call SetEnvDate1 without arguments to set the date variables.
::  Variables are set for the day abbreviation (DT_DAY), month number (DT_MM),
::  day number (DT_DD) and four-digit year (DT_YYYY).
::
::  When the variables are no longer needed, clean up the environment by
::  calling the script again with the CLEAR argument.  E.g.,
::
::       call SetEnvDate1 clear
::-----------------------------------------------------------------------------
::  NOTES
::
::  A time variable could be added by parsing the string returned by the
::  built-in TIME /T command.  This is left as an exercise for the reader. B-)
::
::  This script illustrates the following NT command extensions:
::
::  1\.  Use of the extended IF command to do case-insensitive comparisons.
::
::  2\.  Use of the extended DATE command.
::
::  3\.  Use of the extended FOR command to parse a string returned by a
::      command or program.
::
::  4\.  Use of the "()" conditional processing symbols to group commands
::      for conditional execution.  All commands between the parens will
::      be executed if the preceeding IF or FOR statement is TRUE.
::-----------------------------------------------------------------------------

if not "%1" == "?" goto chkarg
echo.
echo Sets or clears date/time variables in the command environment.
echo.
echo    SetEnvDate1 [clear]
echo.
echo When called without arguments, the variables are created or updated.
echo When called with the CLEAR argument, the variables are deleted.
echo.
goto endit

::-----------------------------------------------------------------------------
::  Check arguments and select SET or CLEAR routine.  Unrecognized arguments
::  are ignored and SET is assumed.
::-----------------------------------------------------------------------------

:chkarg

if /I "%1" == "CLEAR" goto clrvar
goto setvar

::-----------------------------------------------------------------------------
::  Set variables for the day abbreviation (DAY), month number (MM), 
::  day number (DD) and 4-digit year (YYYY). 
::-----------------------------------------------------------------------------

:setvar

for /F "tokens=1-4 delims=/ " %%i IN ('date /t') DO (
set DT_DAY=%%i
set DT_MM=%%j
set DT_DD=%%k
set DT_YYYY=%%l)

goto endit

::-----------------------------------------------------------------------------
::  Clear all variables from the environment.
::-----------------------------------------------------------------------------

:clrvar
for %%v in (DT_DAY DT_MM DT_DD DT_YYYY) do set %%v=
goto endit

:endit 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-02-16T21:32:48.463

如前所述，仅当您知道当前用户正在使用的格式（例如，MM/dd/yy 或 dd-MM-yyyy 仅命名为 2）时，解析日期和时间才有用。这是可以确定的，但是当你进行所有的强调和解析时，你仍然会遇到一些使用了意想不到的格式的情况，并且需要进行更多的调整。

您还可以使用一些外部程序，它会以您的首选格式返回日期块，但这具有需要将实用程序与您的脚本/批处理一起分发的缺点。

还有一些以非常原始的方式使用 CMOS 时钟的批处理技巧，但对于大多数人来说，这太接近裸线了，而且并不总是检索日期/时间的首选位置。

以下是避免上述问题的解决方案。是的，它引入了一些其他问题，但出于我的目的，我发现这是在现代 Windows 系统的 .bat 文件中创建日期戳的最简单、最清晰、最便携的解决方案。这只是一个示例，但我想您会看到如何修改其他日期和/或时间格式等。

```
reg copy "HKCU\Control Panel\International" "HKCU\Control Panel\International-Temp" /f
reg add "HKCU\Control Panel\International" /v sShortDate /d "yyMMdd" /f
@REM the following may be needed to be sure cache is clear before using the new setting
reg query "HKCU\Control Panel\International" /v sShortDate
set LogDate=%date%
reg copy "HKCU\Control Panel\International-Temp" "HKCU\Control Panel\International" /f 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-18T03:30:37.250

基于 Joe 的想法，这里有一个版本，它将构建自己的 ( `.js`) 助手和支持时间：

```
@echo off

set _TMP=%TEMP%\_datetime.tmp

echo var date = new Date(), string, tmp;> "%_TMP%"
echo tmp = ^"000^" + date.getFullYear(); string = tmp.substr(tmp.length - 4);>> "%_TMP%"
echo tmp = ^"0^" + (date.getMonth() + 1); string += tmp.substr(tmp.length - 2);>> "%_TMP%"
echo tmp = ^"0^" + date.getDate(); string += tmp.substr(tmp.length - 2);>> "%_TMP%"
echo tmp = ^"0^" + date.getHours(); string += tmp.substr(tmp.length - 2);>> "%_TMP%"
echo tmp = ^"0^" + date.getMinutes(); string += tmp.substr(tmp.length - 2);>> "%_TMP%"
echo tmp = ^"0^" + date.getSeconds(); string += tmp.substr(tmp.length - 2);>> "%_TMP%"
echo WScript.Echo(string);>> "%_TMP%"

for /f %%i in ('cscript //nologo /e:jscript "%_TMP%"') do set _DATETIME=%%i

del "%_TMP%"

echo YYYYMMDDhhmmss: %_DATETIME%
echo YYYY: %_DATETIME:~0,4%
echo YYYYMM: %_DATETIME:~0,6%
echo YYYYMMDD: %_DATETIME:~0,8%
echo hhmm: %_DATETIME:~8,4%
echo hhmmss: %_DATETIME:~8,6% 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-01-31T10:05:34.480

Sairam 使用上面给出的示例，我已经尝试并提出了我想要的脚本。其他例子中提到的位置参数给出了不同的结果。我想创建一个批处理文件来每天进行 Oracle 数据备份（导出数据），保留不同的 DMP 文件，其中日期和时间作为文件名的一部分。这是运行良好的脚本：

```
cls
set dt=%date:~0,2%%date:~3,2%%date:~6,4%-%time:~0,2%%time:~3,2%
set fn=backup-%dt%.DMP
echo %fn%
pause A
exp user/password file=D:\DATA_DMP\%fn% 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-26T17:11:27.947

如果您启用了[WSL](https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux)（仅限 Windows 10），您可以使用 bash 以一种区域设置中立的方式进行操作。

```
set dateFile=%TEMP%\currentDate.txt
bash -c "date +%Y%m%d" > %dateFile%
set /p today=<%dateFile% 
```

随意将文件重定向替换为此处其他答案中建议的“for”循环可憎，以及[Windows 将程序的输出批量分配给变量](https://stackoverflow.com/questions/2323292/windows-batch-assign-output-of-a-program-to-a-variable)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-27T17:12:27.940

无论日期设置如何，我都找到了两种可行的方法。

在我的电脑上，日期/吨返回 2009-05-27

您可以访问注册表并读取区域设置 (HKEY_CURRENT_USER\Control Panel\International)

或者使用 vbscript。这是我前段时间创建的丑陋的批处理文件/vbscript 混合......

```
@Echo Off
set rnd=%Random%
set randfilename=x%rnd%.vbs

::create temp vbscript file
Echo Dim DayofWeek(7) >  %temp%\%randfilename%
Echo DayofWeek(1)="Sun" >> %temp%\%randfilename%
Echo DayofWeek(2)="Mon" >> %temp%\%randfilename%
Echo DayofWeek(3)="Tue" >> %temp%\%randfilename%
Echo DayofWeek(4)="Wed" >> %temp%\%randfilename%
Echo DayofWeek(5)="Thu" >> %temp%\%randfilename%
Echo DayofWeek(6)="Fri" >> %temp%\%randfilename%
Echo DayofWeek(7)="Sat" >> %temp%\%randfilename%
Echo DayofWeek(0)=DayofWeek(Weekday(now)) >> %temp%\%randfilename%
Echo Mon=Left(MonthName(Month(now),1),3) >> %temp%\%randfilename%
Echo MonNumeric=right ( "00" ^& Month(now) , 2) >> %temp%\%randfilename%
Echo wscript.echo ( Year(Now) ^& " " ^& MonNumeric ^& " " ^& Mon ^& " "  _ >> %temp%\%randfilename%
Echo ^& right("00" ^& Day(now),2) ^& " "^& dayofweek(0) ^& " "^& _ >> %temp%\%randfilename%
Echo right("00" ^& Hour(now),2)) _ >> %temp%\%randfilename%
Echo ^&":"^& Right("00" ^& Minute(now),2) ^&":"^& Right("00" ^& Second(Now),2)  >> %temp%\%randfilename%

::set the output into vars
if "%1" == "" FOR /f "usebackq tokens=1,2,3,4,5,6" %%A in (`start /wait /b cscript //nologo %temp%\%randfilename%`) do Set Y2KYear=%%A& Set MonthNumeric=%%B& Set Month=%%C& Set Day=%%D& Set DayofWeek=%%E& Set Time=%%F
set year=%y2kyear:~2,2%

::cleanup
del %temp%\%randfilename% 
```

它不漂亮，但它有效。

# .net - 在客户端单击时在 javascript 中获取 .net 下拉列表的 ID

> ID：864724
> 
> 赞同：1
> 
> 时间：2009-05-14T17:41:35.977
> 
> 标签：.net, asp.net, javascript, vb.net, drop-down-menu

我需要获取下拉列表（ASP.Net 控件）的 ID，以便我可以判断是否已选择项目。

现在我正在尝试将下拉列表的计数写入警报框，如下所示：

```
OnClientClick="alert(document.getElementID('<%=ListBox1.ClientID %>').options.length) 
```

我得到的错误是“需要文件”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:49:08.020

`getElementID`首先让我们将代码中的更正为`getElementById`：

```
OnClientClick="alert(document.getElementById('<%=ListBox1.ClientID %>').options.length);" 
```

如果您想知道选择了哪个项目，请使用以下`selectedIndex`属性：

```
OnClientClick="alert(document.getElementById('<%=ListBox1.ClientID %>').selectedIndex);" 
```

如果您想要选项的值而不是索引，请使用带有索引的选项集合：

```
OnClientClick="var s=document.getElementById('<%=ListBox1.ClientID %>');alert(s.options[s.selectedIndex].value);" 
```

编辑：
如果您尝试使用它的控件不是服务器控件，这将起作用，例如：

```
<input type="button" onclick="alert(document.getElementById('<%=ListBox1.ClientID %>').options.length);" /> 
```

由于您有服务器控件，因此不能在控件内使用脚本标记 (<%= %>)。您必须从后面的代码中设置属性：

```
TheButton.OnClientClick = "alert(document.getElementById('" + ListBox1.ClientID + "').options.length);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T23:12:29.380

我的 javascript 有点生疏，但你不能使用“this”关键字吗？就像是：

```
OnClientClick="alert(this.options.length);" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T17:46:24.127

请使用 document.getElementById 而不是 document.getElementId

# asp.net - 从用户控件引用 appSettings

> ID：864726
> 
> 赞同：1
> 
> 时间：2009-05-14T17:41:39.783
> 
> 标签：asp.net, user-controls, web-config, appsettings

在我的 .ascx 用户控件中，我尝试使用存储在 web.config 中的值动态生成链接。

```
<a href="<%$appSettings.MYPATH%>/file.aspx">link</a> 
```

当我尝试运行时，出现解析器错误

```
Literal expressions like '<%$appSettings.MYPATH %>' are not allowed. Use <asp:Literal runat="server" Text="<%$appSettings.MYPATH%>" /> instead. 
```

我知道我可能遗漏了一些相对较小的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T17:50:13.413

```
<%= ConfigurationManager.AppSettings["myKey"] %> 
```

编辑：不要忘记***=***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T17:50:29.093

```
    <a href="<%= System.Configuration.ConfigurationManager.appSettings("MYPATH") %>">链接</a>

```

应该可以工作（至少在我使用的 IIS 服务器上可以）。（不幸的是它更冗长）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:49:57.377

试试这个

.ascx

```
<asp:Literal ID="Literal1" runat="server"></asp:Literal> 
```

在后面的代码中

```
Literal1.Text = "<a href='" + appSettings.MYPATH + "'/file.aspx">link</a>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:37:47.047

接下来会给出更准确的答案：

```
<a href="<%= System.Configuration.ConfigurationManager.AppSettings["param_name"] %>">Link</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T22:17:28.160

使用冒号而不是点并添加`runat="server"`：

```
<a href="<%$ AppSettings: MYPATH %>/file.aspx">link</a> 
```

[文档](http://msdn.microsoft.com/en-us/library/d5bd1tad%28VS.100%29.aspx#sectionToggle3)在这一点上不是很清楚，但 ASP.Net 表达式用于在服务器标记中使用。因此，如果您想在纯 html 标记中使用一个，则必须添加`runat="server"`以便在将评估表达式的服务器上处理该标记。

# cocoa - 如何使用 gdb（通过 Xcode）打印和使用常量？

> ID：864729
> 
> 赞同：6
> 
> 时间：2009-05-14T17:42:00.407
> 
> 标签：cocoa, xcode, debugging, gdb

我正在使用 xcode-gdb 调试 Cocoa 应用程序。我正处于一个断点，我想查看一些 Cocoa 常量（即 NSControlKeyMask）的值，并对当前堆栈帧中的值进行一些测试。具体来说，我在

```
- (void) keyDown:(NSEvent *) e
```

，我已经完成了

```
设置 $mf = (int)[e modifierFlags]
```

在 gdb 提示符下。现在我想做

```
p $mf & NSControlKeyMask
```

并且 gdb 告诉我“在当前上下文中没有符号“NSControlKeyMask”。

更新：
Xcode 具有“[修复并继续文本](http://developer.apple.com/documentation/developertools/Conceptual/XcodeDebugging/700-Modifying_Running_Code/modifying_running_code.html#//apple_ref/doc/uid/TP40007057-CH10-SW5)”功能。因此，我使用了具有此功能的 Dan M. 和 n8gray 解决方案，因此我不必为每个常数制作代理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-24T19:02:40.583

如果实际上没有使用给定类型实例化变量，则相应符号的调试信息不​​会最终由 gcc 生成。然后，如果您向 gdb 询问此类类型，它不知道您在说什么，因为没有该类型的调试信息，它会给您“当前上下文中没有符号”错误。

解决此问题的方法通常是在代码中的某处显式添加相关类型的虚拟变量。这是一个简单的示例，您可以对其进行测试以了解我在说什么：

```
enum an_enum_type {
  foo,
  bar,
  baz
};

int main (int argc, char *argv [])
{
  return baz;
} 
```

将该程序保存到名为 test.cpp 的文件中，并使用以下命令对其进行编译：

```
g++ -o test -g -O0 test.cpp 
```

然后在 gdb 下运行它并输入“p /x baz”。您将收到“当前上下文中没有符号 baz”错误。

现在尝试使用添加了枚举类型的虚拟变量的修改版本：

```
enum an_enum_type {
  foo,
  bar,
  baz
};

an_enum_type dummy;

int main (int argc, char *argv [])
{
  return baz;
} 
```

使用与之前相同的命令编译并在 gdb 下运行。这一次，当您键入“p /x baz”时，您将得到“0x2”作为答案，我认为这就是您在问题中所追求的。

我已经调查过了，问题是 NSEvent.h 头文件没有给包含的枚举命名`NSControlKeyMask`——它是一个匿名枚举。所以没有办法创建该类型的变量（虚拟或其他）。因此，我看不到任何让编译器生成该类型的调试信息的方法。我认为您将不得不依赖`NSControlKeyMask`头文件中的定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T18:21:42.370

如果您使用 gcc 编译，您可以使用`-g3`开关来获取最高级别​​的调试信息。引用[gcc 手册中的](http://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Debugging-Options.html#Debugging-Options "Options for Debugging Your Program or GCC")[部分`-g`](http://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Debugging-Options.html#Debugging-Options "调试程序或 GCC 的选项")：

```
-g级
    请求调试信息并使用 level 指定多少信息。默认级别为 2。

    0 级根本不产生调试信息。因此，-g0 否定 -g。

    级别 1 产生最少的信息，足以在部分中进行回溯
            您不打算调试的程序。这包括说明
            函数和外部变量，但没有关于本地的信息
            变量，没有行号。

    第 3 级包括额外信息，例如存在的所有宏定义
            在节目中。某些调试器在您使用时支持宏扩展
            -g3。

```

因此，如果您使用编译器进行编译，`-g3`您*应该*能够在 gdb 中扩展常量和宏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-24T22:32:42.700

正如 Dan M. 发现的那样，您可能无法以直接的方式使其工作。相反，你可以做的是在你的一个文件中放这样的东西：

```
int myNSControlKeyMask = NSControlKeyMask;
int myNSOptionKeyMask = NSOptionKeyMask;
... 
```

那么至少你可以在 gdb 中使用符号名，而不必在 .h 文件中查找相应的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T18:09:23.977

NSControlKeyMask 很可能是一个宏，对调试器不可见。您需要查看相应的 .h 文件。将光标放在编辑器中的文本 NSControlKeyMask 上，然后尝试命令+双击以跳转到其定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-03T01:25:01.030

我似乎在 iPhone 应用程序中从 Obj-C 调用的一堆 C++ 代码中遇到了同样的问题。在当前上下文中，它给了我
No 符号“a”。
错误，其中 a 是一个 int。我尝试了 -g3 编译器标志但没有成功。我很难相信 gdb 不知道 int 的类型。SDK 3.0，但话又说回来，当 gdb 可以在程序中找到变量时，它会打印完全错误的值。

# sockets - 如果带有 MSG_PEEK 的非阻塞接收成功，那么后续没有 MSG_PEEK 的接收也会成功吗？

> ID：864731
> 
> 赞同：14
> 
> 时间：2009-05-14T17:42:11.437
> 
> 标签：sockets, nonblocking, recv

这是我正在处理的一些代码的简化版本：

```
void
stuff(int fd)
{
    int ret1, ret2;
    char buffer[32];

    ret1 = recv(fd, buffer, 32, MSG_PEEK | MSG_DONTWAIT);

    /* Error handling -- and EAGAIN handling -- would go here.  Bail if
       necessary.  Otherwise, keep going.  */

    /* Can this call to recv fail, setting errno to EAGAIN?  */
    ret2 = recv(fd, buffer, ret1, 0);
} 
```

如果我们假设第一次调用 recv 成功，返回一个 1 到 32 之间的值，那么假设第二次调用也会成功是否安全？ret2 可以小于 ret1 吗？在哪些情况下？

（为了清楚起见，假设在第二次调用 recv 期间没有其他错误条件：没有传递信号，它不会设置 ENOMEM 等。还假设没有其他线程会查看 fd。

我在 Linux 上，但我相信 MSG_DONTWAIT 是这里唯一特定于 Linux 的东西。假设之前在其他平台上设置了正确的 fnctl。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-15T00:03:08.057

POSIX 标准规定了关于`MSG_PEEK`：

> 数据被视为未读，下一个 recv() 或类似函数仍将返回此数据

这似乎意味着除非`ret2`是`-1`，否则它将与 相同`ret1`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-15T00:18:09.363

您还必须考虑可能在 ret1 和 ret2 之间调用不同线程上的不同 recv 调用的可能性。另一个调用将获取您的数据，使 ret2 最终没有数据，或者数据意外减少。

如果您的应用程序不是多线程的，或者设计为 fd 仅由这两个调用使用，那么您可以忽略它。但是如果这是一个风险，那么你应该把这两个调用放在一个锁定机制中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T18:12:50.427

我不确定 EAGAIN，但认为 EBADF 或 ECONNRESET 是可能的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-12-22T13:46:46.583

您对没有 MSG_PEEK 的 recv() 的第二次调用可能会因 EINTR 失败或返回不完整的数据，因为它已被信号中断。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-08T08:44:53.010

对于您的简单情况，后续的[recv](http://linux.die.net/man/2/recv)将返回 ret1 字节数（如果 ret1 不是错误）。然而，对于多线程设计，它可能并不总是正确的。

# asp.net-mvc - 什么是使用实体框架的扩展 ASP.NET MVC 示例应用程序？

> ID：864736
> 
> 赞同：2
> 
> 时间：2009-05-14T17:43:12.043
> 
> 标签：asp.net-mvc

任何人都可以建议使用 ADO.NET 实体框架针对多关系 sql 服务器数据库的 ASP.NET MVC 示例应用程序吗？

我见过的大多数示例应用程序都适用于只有 2 或 3 个表的非常简单的数据库。我想查看一个应用程序背后的代码，它不仅仅显示一个表的 CRUD 代码

感谢您的任何建议！

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T17:51:28.620

您可能想考虑[一个使用 ASP.NET MVC 和使用 Northwind 数据库的实体框架构建的示例](http://blogs.msdn.com/brada/archive/2008/01/29/asp-net-mvc-example-application-over-northwind-with-the-entity-framework.aspx)，它很好地表示了典型的业务类型数据库。

此外，如果您还不熟悉该网站，[ASP.NET](http://asp.net)有一些很棒的[ASP.NET MVC](http://www.asp.net/mvc/)资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:53:08.413

Rob Conery StoreFont 是一个很好的起点，但它是用 L2S 完成的（反正差别不大）

源代码在这里：[http ://www.codeplex.com/mvcsamples/Release/ProjectReleases.aspx?ReleaseId=18861](http://www.codeplex.com/mvcsamples/Release/ProjectReleases.aspx?ReleaseId=18861)

# linux - 找出进程在 Linux 上等待 I/O 的阻塞时间

> ID：864739
> 
> 赞同：10
> 
> 时间：2009-05-14T17:43:40.060
> 
> 标签：linux, performance

是否有一个对每个进程有效的[vmstat](http://en.wikipedia.org/wiki/Vmstat)类型命令，可以让您查看一个进程在等待[I/O](http://en.wikipedia.org/wiki/Input/output)时被阻塞了多少时间、内核和用户代码中的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T06:20:56.340

[blktrace](http://git.kernel.org/?p=linux/kernel/git/axboe/blktrace.git;a=blob;f=README)是你要找的，block layer 信息，wait/blocking/busy 等等...，非常深入，有很多包是从它派生的，seekwatcher，...

其他一些工具，类似于 sigjuice 所说的 iotop，也很方便，但对认真分析的信息量较少。此外，我相信 btrace/blktrace 比 oprofile 更适合 I/O 跟踪，oprofile 更通用并且相比之下会增加负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T07:23:21.540

[strace](http://linux.die.net/man/1/strace)将显示系统调用花费了多少时间，但它不会告诉您这些时间中有多少花费在等待与实际花费在 I/O 上的时间。您可以选择要跟踪的系统调用，或者是哪种类型，非常强大

[latencytop](http://www.latencytop.org/)将是另一个很好的工具，因为您的进程可能由于其他进程或某些日志守护程序而等待 I/O。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T18:00:40.550

还看`pidstat -d`。它可以让您查看每个进程的读写量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-14T17:57:42.693

[top (1)](http://linux.die.net/man/1/top)将显示此信息。您可以指定一个单独的 pid`-p`

# apache-flex - 在 Flex mxmlc 编译器中使用“include-libraries”时可以使用相对路径吗？

> ID：864744
> 
> 赞同：3
> 
> 时间：2009-05-14T17:45:23.830
> 
> 标签：apache-flex, mxmlc

我试图强制将 .swc 中的所有类链接到我的 Flex 项目生成的 SWF 文件中。从文档：

[http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_03.html](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_03.html)

> 包含库库 [...]
> 
> 将 SWC 文件中的所有类链接到生成的应用程序 SWF 文件，无论它们是否被使用。将此选项与仅包含那些在编译时引用的类的 library-path 选项进行对比。要链接一个或多个类，无论它们是否被使用，而不是整个 SWC 文件，请使用包含选项。此选项通常用于指定资源包。

不幸的是，当我将 .swc 的绝对路径指定为参数时，这似乎只适用于我的 Flex Builder 项目。我的 .swc 位于“lib”目录中，该目录作为“SWC 文件夹”添加到我的 Flex 项目配置中。有谁知道相对引用它的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T15:36:36.320

我总是使用：

mxmlc [...] -library-path+=lib/whatever/default/ [...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T20:13:56.283

如果您只讨论编译时，则该信息位于项目目录中的 .actionScriptProperties 文件中。

条目如下所示：

```
<libraryPath defaultLinkType="1">
  <libraryPathEntry kind="3" linkType="1" path="/OtherProjectInTheSameWorkspace/bin/LibName.swc" useDefaultLinkType="false"/>
  <libraryPathEntry kind="1" linkType="1" path="lib"/>
</libraryPath> 
```

请注意，第二个 libraryPathEntry 是当前项目中 lib/ 目录的相对路径。

如果 SWC 在其自己的项目中，则路径将相对于工作空间的根目录开始。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-21T15:47:51.407

在 src 目录中使用 flex config.xml 文件。

如果您的 mxml 文件名为 **project.mxml** ，则配置文件应为**project-config.xml**

这是 FlexBuilder 内置编译器和 mxmlc 命令行编译器都将尝试加载的默认名称。

这是一个示例配置文件，其中仅包含您要询问的特定条目。但是，您可以添加到命令行的任何内容都可以在 config.xml 文件中指定。

```
<?xml version="1.0" encoding="UTF-8"?>
<flex-config>
<compiler append="true">
        <include-libraries append="true">
            <library>libs/myLibrary.swc</library>
        </include-libraries>    
</compiler>
</flex-config> 
```

# django - 如何使用 Eclipse 和 Pydev 正确调试？

> ID：864750
> 
> 赞同：13
> 
> 时间：2009-05-14T17:47:03.140
> 
> 标签：django, eclipse, debugging, pydev

我已经正确配置了 Pydev，因此它可以运行我的应用程序，但是当我想通过设置断点来检查/跟踪我的代码时，调试器不会启动（无法跟踪）。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-11-26T13:44:48.947

`--noreload`选项至关重要，否则服务器将分叉并且您的断点不会触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T22:19:24.063

通常，您不必选择 manage.py 并点击调试。从您的描述看来，您可能没有在运行/调试设置面板中设置 Django 启动参数。

以下是一些分步说明：

[http://pydev.blogspot.com/2006/09/configuring-pydev-to-work-with-django.html](http://pydev.blogspot.com/2006/09/configuring-pydev-to-work-with-django.html)

和

[http://developeradventures.blogspot.com/2008/03/eclipse-django-debugging.html](http://developeradventures.blogspot.com/2008/03/eclipse-django-debugging.html)

重要的部分是将条目添加到运行/调试设置。当需要调试时，设置断点，在 Eclipse 工具栏上单击 Debug 按钮的下拉箭头并选择您定义的 Django 项目。然后从浏览器窗口转到您的 Django 服务器的 URL。Eclipse 应该在断点处停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T20:44:43.307

好的，我想我找到了我的问题所在。我必须在 views.py 中的 def 语句上设置断点，而不是在它之后的语句上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-31T22:20:35.780

如果您正在调试 Django `runserver`，请确保您指定了`--noreload`命令行参数。否则调试器最终会查看错误的 python 实例并且永远不会触发任何断点。

# profiling - FreeBSD 有什么基于样本的分析工具？

> ID：864751
> 
> 赞同：8
> 
> 时间：2009-05-14T17:47:04.827
> 
> 标签：profiling, freebsd

我想在 FreeBSD 上找到像 vtune 或 oprofile 这样的分析器。你知道有类似的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-09-28T03:15:02.350

FreeBSD 上的 oprofile 等价物是 hwpmc。它可以进行系统和进程分析；从 FreeBSD 7.2 开始，它具有调用链捕获功能。[在http://wiki.freebsd.org/PmcTools](http://wiki.freebsd.org/PmcTools)有很多关于它的信息，pmcstat 手册页也包含分析应用程序的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T21:44:06.347

好吧，如果您要查找性能问题，它不会使用分析器，但这是可行[的](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)。

# asp.net - 从经典 asp 到 .net 的迁移灾难

> ID：864761
> 
> 赞同：1
> 
> 时间：2009-05-14T17:49:12.073
> 
> 标签：asp.net, asp-classic, migration

有没有人经历过从经典的 Asp 迁移到 .Net 的公司？

在这家公司中，代表解决方案的“文件夹”图标和代表项目的“文件夹”图标以及代表文件目录的“文件夹”图标都是同一个东西。

.Net IDE 只是一个更好的记事本。

整个公司都在一个庞大的解决方案中。应该是许多完全独立的项目的代码都混合在“主解决方案”中的一组“文件夹”中并散布在其中。这些文件夹中的每一个都包含该地方曾经在 .Net 中创建的所有应用程序的各种信息。

我的问题是这样的公司会发生什么？他们会倒闭吗？他们是否会无限期地坚持下去，坚持同样的、劳动密集型的“代码库”维护噩梦，没有真正的 .Net 程序员可以忍受？他们见过光明吗？如果是这样，怎么做？

我必须知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T17:59:43.063

有可能，他们不会迁移。代码仍然有效，只是旧了。最有可能发生的情况是该项目将一次被替换一小部分，而不是整体战略。这将是缓慢而乏味的。将会有关于重写应用程序的讨论，但它永远不会真正发生。很多地方都有这种心态，没坏就不修。如果它完成了他们需要它做的事情，它将存在很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:46:22.560

我为拥有 30,000 页 Intranet 的公司工作。用经典的 asp 编写。更不用说 200 多个互联网应用程序罪 ASP 和 VB 组件。;-)

我们仍然在网上获得良好的业务（近 60%）。不能很快迁移。我们慢慢做。最好在 .net 中做新项目。我同意凯文，如果它有效，为什么会破坏它。

大多数时候，如果业务正常运行，该业务没有任何充分的理由进行迁移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T19:03:59.477

但它仍然有效吗？如果是这样，那为什么，尤其是在这种经济环境下，您会升级吗？只是为了它？需要有一个更好的理由。

每次 Glidden 推出一种应该持续更长时间的新/更好的配方时，你是否会刮掉你房子上的所有油漆并重新粉刷它？可能不是。当它需要重新粉刷时，你重新粉刷它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T19:05:45.183

[这篇优秀的文章](http://www.oreillynet.com/ruby/blog/2007/09/7_reasons_i_switched_back_to_p_1.html)很老，但绝对总结了“新与旧”技术辩论，以及它对业务的实际意义。

如果旧技术是经过验证的、稳定的赚钱工具，那么用更新的语言重写它只会增加风险。

# vb.net - 如果选中复选框，请运行“某事”

> ID：864767
> 
> 赞同：2
> 
> 时间：2009-05-14T17:50:04.523
> 
> 标签：vb.net

我有一个简单的 Visual Basic 2008 Express Edition 表单，如下所示：[link Screenshot of simple form][1]

我需要一些关于骨架脚本的帮助，它会检查每个复选框是否被选中。我有一组包含宏的 Word 模板。*如果*模板存在，我想运行每个模板的宏。

所以基本上类似于以下内容（可能包括大量错误）：

```
 Dim strFile1
    Dim strFile2
    Dim strFile3
    Dim strFile4
    Dim strFile5
    Dim strFile6

if checkbox1.Checked Then
try to run command (Winword.exe c:\temp\document.doc /mNameOfMacro)
On error MsgBox ("could not find file from checkbox1")

    if checkbox2.Checked Then
try to run command (Winword.exe c:\temp\document2.doc /mNameOfMacro)
On error MsgBox ("could not find file from checkbox2")

    if checkbox3.Checked Then
try to run command (Winword.exe c:\temp\document3.doc /mNameOfMacro)
On error MsgBox ("could not find file from checkbox3")

    if checkbox4.Checked Then
try to run command (Winword.exe c:\temp\document4.doc /mNameOfMacro)
On error MsgBox ("could not find file from checkbox4")

    if checkbox5.Checked Then
try to run command (Winword.exe c:\temp\document5.doc /mNameOfMacro)
On error MsgBox ("could not find file from checkbox5")

    if checkbox5.Checked Then
try to run command (Winword.exe c:\temp\document5.doc /mNameOfMacro)
On error MsgBox ("could not find file from checkbox5") 
```

我知道这个伪代码根本不正确，因为我是一个初学者，是程序员的设计师。但我刚刚开始学习，我知道这是非常基础的。它只是对编程中的逻辑进行概述。而且我认为学习如何做到这一点也将帮助我处理其他事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T19:53:44.957

好的，刚刚通过这样做找到了答案：

```
 Dim strFile1 = ("c:\temp\file3.txt")
 Dim strFile2 = ("c:\temp\file4.txt")

    If chkbxRapport.Checked Then
        If My.Computer.FileSystem.FileExists(strFile1) Then
            System.Diagnostics.Process.Start(strFile1)
        Else : MsgBox("Can't find the file" & " " & strFile1)
        End If
    End If

    If chkbxRapport_EN.Checked Then
        If My.Computer.FileSystem.FileExists(strFile2) Then
            System.Diagnostics.Process.Start(strFile2)
        Else : MsgBox("Can't find the file" & " " & strFile2)
        End If
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:52:21.897

这篇博客文章应该充分解释它。 [在VB中运行一个进程](http://blogs.msdn.com/vbfaq/archive/2004/05/30/144573.aspx)

您最感兴趣的System.Diagnostics.Process [。](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

# python - 如何获取 django 模型的子类对象

> ID：864769
> 
> 赞同：2
> 
> 时间：2009-05-14T17:50:21.620
> 
> 标签：python, django, inheritance, model

当我有一个像这样的给定 django 模型类时：

```
class BaseClass(models.Model):
     some_field = models.CharField(max_length = 80)
     ... 
```

以及它的一些子类，例如

```
class SomeClass(BaseClass):
     other_field =  models.CharField(max_length = 80) 
```

然后我知道我可以通过调用来获取派生对象

```
base  = BaseClass.objects.get(pk=3)
my_obj= base.someclass 
```

现在问题出现了，我有多个子类，而我只有一个基类的实例。在不事先知道它的类的情况下，我怎样才能到达子类对象？

* * *

这个想法是加载一个相应的视图并让它来做这些事情。我的项目功能对于这些模型只有一组有限的默认操作，例如查看、编辑、删除等。我不想要的是通过 URL 公开给定对象的类型，因此“正常方式”不可用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T18:22:47.453

没有内置的方法。

也许最好的办法是`derived_type`在基类上定义一个字段，该字段在保存派生类时自动设置。然后，您可以`get_derived`在基础上有一个方法来检查`derived_type`并返回实际派生对象的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T17:57:12.493

> 在不事先知道它的类的情况下，我怎样才能到达子类对象？

为什么这会有用？如果你不知道你想要什么类，你也不知道要调用哪些方法或可以检查哪些属性。

* * *

> 这个想法是加载一个相应的视图并让它来做这些事情。我的项目功能对于这些模型只有一组有限的默认操作，例如查看、编辑、删除等。我不想要的是通过 URL 公开给定对象的类型，因此“正常方式”不可用

如果您提前知道模型子类的集合，或者愿意将它们注​​册到中央视图列表，您可以执行以下操作：

```
VIEWS = [('subclass_a', a_views), ('subclass_b', b_views)]

def edit(request):
    base = (get base somehow)

    for attrname, views in VIEWS:
        if getattr(base, attrname) is not None:
            return views['edit'] 
```

根据您拥有多少种不同的视图，您可能会将搜索抽象为一个单独的函数，因此最终视图类似于：

```
def edit(request):
    return generic_base_view(request, 'edit') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-03-22T10:05:57.787

对于在发布问题并给出接受的答案后稍晚才查看此答案的人，在较新版本的 django 中，这可能更直接，请参阅： [关于多表继承的 django 文档](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)

看看地方和餐馆的例子。基础对象是一个地方，子类是一家餐馆。您可以通过 place.restaurant 获取子类，如果该地点不是餐厅，则可以捕获异常。我添加这个是因为接受的答案可能有点过时并导致我走错了路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T14:23:03.433

如果您使用 django-model-utils 中的 InheritanceManager，那么您可以在查询时选择子类，而无需提前知道它们是什么。

[https://django-model-utils.readthedocs.org/en/latest/managers.html#inheritancemanager](https://django-model-utils.readthedocs.org/en/latest/managers.html#inheritancemanager)

# java - 学习 Java 泛型的资源？

> ID：864773
> 
> 赞同：14
> 
> 时间：2009-05-14T17:51:11.633
> 
> 标签：java, generics

我显然需要提高我在这个 Java 领域的知识，或者我注定要产生“看起来相同但不完全”的代码。
我已经有了基础......但我正在寻找仅针对此的培训/教程。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-14T17:53:03.907

*   [Angelika Langer 的 Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)。
*   [Oracle 的 Java 泛型教程](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)
*   Joshua Bloch 的[有效 Java](http://www.infoq.com/articles/bloch-effective-java-2e)，[第 5 章 - 泛型](http://www.infoq.com/resource/articles/bloch-effective-java-2e/en/resources/Bloch_Ch05.pdf)[pdf]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-14T18:01:36.757

本书由 Java 泛型的设计者之一 Philip Wadler[撰写](http://books.google.fi/books?id=3keGb40PWJsC&dq=java+generics+wadler&printsec=frontcover&source=bn&hl=fi&ei=PlwMSpj4IITL-Abh8uyiBg&sa=X&oi=book_result&ct=result&resnum=4#PPP1,M1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T10:53:36.357

对于一个简短的介绍，我推荐[Gilad Bracha](http://bracha.org/)[的 Java 编程语言中](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)的PDF 泛型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:53:52.953

听起来您可能错过了一些设计模式和重构技术。实际上没有任何方法可以在一夜之间学习这一点，但是如果您阅读了一些现有的设计模式，它可能会让您思考如何编写更通用和可重用的代码。

*   [Java的设计模式](http://www.javacamp.org/designPattern/)
*   [头部优先设计模式](http://oreilly.com/catalog/9780596007126/)
*   [Java 编程语言中的泛型](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)(PDF)
*   [编写可重用代码的 10 个技巧](http://hoskinator.blogspot.com/2006/06/10-tips-on-writing-reusable-code.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:54:53.200

我建议购买 Cay Horstmann 的书《Big Java》。这是我在所有 3 门大学 Java 课程中都使用过的书。

[http://www.amazon.com/Big-Java-Cay-S-Horstmann/dp/0470105542/ref=pd_sim_b_1](https://rads.stackoverflow.com/amzn/click/com/0470105542)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T19:13:47.067

你寻找一个叫[Skeet](http://www.skeetoverflow.com/search/?q=generics)的。

阅读他对标有泛型的问题的回答，我对泛型的了解比任何书都多。

# java - Spring 框架在 RuntimeExceptions 中包装检查的异常

> ID：864780
> 
> 赞同：4
> 
> 时间：2009-05-14T17:52:39.243
> 
> 标签：java, spring, exception, runtime

有这个方法调用：

```
 ->
    simpleJdbcTemplate.queryForInt(SQL,null);
   -> 
```

`queryForInt()`springs 中的方法`SimpleJdbcTemplate`抛出了`DataAccessException`一个运行时异常。我想将异常传播到应用程序的视图层，因为 Spring 框架工作在`RuntimeExceptions`我卡在这里的内部包装了检查的异常。

我该怎么做呢？

解释一：

Spring Framework 的 JDBC 抽象框架提供的增值——他们说 Spring Framework 负责除 3 和 6 之外的所有内容。3 和 6 需要由应用程序开发人员编写

1.  定义连接参数

2.  打开连接

3.  指定语句

4.  准备并执行语句

5.  设置循环以遍历结果（如果有）

6.  完成每次迭代的工作

7.  处理任何异常

8.  处理交易

9.  关闭连接

但是，如果我遇到程序启动一段时间后与数据库的连接丢失的情况。然后在调用上述方法时将引发运行时异常。由于我不处理异常，我无法通知用户界面（视图）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T18:45:20.940

仅仅因为 Spring 抛出运行时异常并不意味着您无法捕获它。如果你想为 DataAccessExceptions 做一些特别的事情，你当然可以这样做：

```
try {
    // query logic
} catch (DataAccessException ex) {
    // handle the exception
} 
```

如果您使用的是 Spring 的 MVC 框架，则可能值得研究 ExceptionResolver 接口。它是一种决定如何处理应用程序低层抛出的所有未捕获异常的机制。它使您有最后一次机会根据抛出的异常显示不同的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T17:58:06.797

这取决于您的视图层是否捕获已检查的异常（任何不作为 RuntimeException 或 Error 子类的 throwable 子类，或者不是 RuntimeException 或 Error 的直接实例）或未检查的异常（RuntimeException 或 Errors 或这些 Throwable 子类的子类）。

一般来说，你要么有这样的东西：

```
try {
//... processing
} catch(Exception/RuntimeException e) {
// propagate the exception to the view in a meaningful manner
} 
```

如果是这种情况，对于运行时异常，您无需执行任何操作 - 该块将捕获运行时异常。

如果要将其转换为已检查，假设您使用的是支持包装异常的 Java 版本，您所要做的就是：

```
try {
//...spring code
} catch(DataAccessException e) {
throw new Exception(e);
} 
```

然后，您在此处理之上的层会将其作为已检查异常捕获。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T17:58:49.540

您只是希望能够在您的视图中访问原始异常信息吗？如果是这样，您应该能够在 RuntimeException 上调用 getCause() 以获取导致它的底层已检查异常。否则，您需要向使用 SimpleJdbcTemplate 的方法添加“抛出”声明，捕获 DataAccessException 并重新抛出已包装的已检查异常。

# svn - 拒绝访问 Tortoise SVN 64 位

> ID：864790
> 
> 赞同：5
> 
> 时间：2009-05-14T17:54:16.510
> 
> 标签：svn, tortoisesvn

我在 XP 中使用乌龟 svn 32 位没有问题。

现在，我安装了 Windows Vista 64 位和 Tortoise SVN 64 位。

当我尝试做一个`SVN Update`时，我得到了错误

> 无法打开文件 C:....svn\lock: 访问被拒绝。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-14T19:20:02.387

由于您已重新安装 Windows，可能是您的文件夹的访问权限配置错误，因此未知 SID 是所有者或具有读/写权限但不是您的用户帐户。

也许检查您本地 SVN 文件的文件权限，并确保您当前的用户/您的 TortoiseSVN 进程具有更改这些文件的必要访问权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T10:11:50.537

在我的情况下，有问题的文件被 Visual Studio 锁定，因此我无法更新或清理工作副本。关闭 VS 解决了这个问题。您可以使用[Unlocker](http://www.softpedia.com/get/System/System-Miscellaneous/Unlocker.shtml)或类似工具来查看是否有任何东西在锁定您的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T00:22:37.727

您可以查看这篇文章以下载旧版本的 tortoise svn 64 位，看看您是否有类似的问题 [http://svn.haxx.se/tsvnusers/archive-2011-09/0244.shtml](http://svn.haxx.se/tsvnusers/archive-2011-09/0244.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-15T12:31:18.217

从 1.8.8 升级到 1.9.2 我也遇到了这个问题。这是因为 TSVNCache.exe 正在运行。

感谢 Dan Dar3 的博客： [http ://dandar3.blogspot.co.uk/2012/04/tortoisesvn-installation-insufficient.html](http://dandar3.blogspot.co.uk/2012/04/tortoisesvn-installation-insufficient.html)

# c# - C# 和 Objective c 中的字符串加密

> ID：864791
> 
> 赞同：6
> 
> 时间：2009-05-14T17:54:29.317
> 
> 标签：c#, objective-c, string, cryptography

我正在构建一个使用 c# web 服务的 iPhone 应用程序。我的 c# Web 服务获取用户详细信息并针对我的数据库进行验证并返回 xml 文件。

所以现在的问题是如何在目标 c 中加密用户详细信息（用户名和密码各 10 个字符）并在 C# 中解密。

我对密码学很陌生，哪种方法最好。是否可以在 Objective c 中加密并在 C# 中解密。

谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T18:22:29.297

感谢您的快速回复。我感谢您的帮助。我找到了一个解释我的问题的博客。这是它的链接。

[http://dotmac.rationalmind.net/2009/02/aes-interoperability-between-net-and-iphone/](http://dotmac.rationalmind.net/2009/02/aes-interoperability-between-net-and-iphone/)

我现在正在实施。我会尽快让你知道状态。

非常感谢..
快乐编码..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T18:00:10.487

假设您正在加密此信息以通过网络保护它，最好的解决方案是通过 SSL 连接。这将解决问题，而不会在代码中产生新的复杂性。SSL 处理通常在 .NET 和 Cocoa 中都可用。

您尝试加密此数据是否还有其他原因？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T18:00:55.870

以下内容来自[The CSharp Cookbook](http://csharp.codefetch.com/example/cg/CSharpCookbook/CSharpRecipes/14_Security.cs?qy=network)。它几乎是现有的一个简单的例子。您当然必须将加密部分移植到 Objective C，但只要您使用相同的密钥，它应该会生成相同的结果。

您需要使用[在 ObjC 兼容代码中可用的 Rijndael 密码](http://www.koders.com/c/fid07B37DFB0C57B6D2B0A2F4D4173827E06EA5264C.aspx)

```
 public static void EncDecString()
        {
            string encryptedString = CryptoString.Encrypt("MyPassword");
            Console.WriteLine("encryptedString: " + encryptedString);
            // get the key and IV used so you can decrypt it later
            byte [] key = CryptoString.Key;
            byte [] IV = CryptoString.IV;

            CryptoString.Key = key;
            CryptoString.IV = IV;
            string decryptedString = CryptoString.Decrypt(encryptedString);
            Console.WriteLine("decryptedString: " + decryptedString);

        }

        public sealed class CryptoString
        {
            private CryptoString() {}

            private static byte[] savedKey = null;
            private static byte[] savedIV = null;

            public static byte[] Key
            {
                get { return savedKey; }
                set { savedKey = value; }
            }

            public static byte[] IV
            {
                get { return savedIV; }
                set { savedIV = value; }
            }

            private static void RdGenerateSecretKey(RijndaelManaged rdProvider)
            {
                if (savedKey == null)
                {
                    rdProvider.KeySize = 256;
                    rdProvider.GenerateKey();
                    savedKey = rdProvider.Key;
                }
            }

            private static void RdGenerateSecretInitVector(RijndaelManaged rdProvider)
            {
                if (savedIV == null)
                {
                    rdProvider.GenerateIV();
                    savedIV = rdProvider.IV;
                }
            }

            public static string Encrypt(string originalStr)
            {
                // Encode data string to be stored in memory
                byte[] originalStrAsBytes = Encoding.ASCII.GetBytes(originalStr);
                byte[] originalBytes = {};

                // Create MemoryStream to contain output
                MemoryStream memStream = new MemoryStream(originalStrAsBytes.Length);

                RijndaelManaged rijndael = new RijndaelManaged();

                // Generate and save secret key and init vector
                RdGenerateSecretKey(rijndael);
                RdGenerateSecretInitVector(rijndael);

                if (savedKey == null || savedIV == null)
                {
                    throw (new NullReferenceException(
                        "savedKey and savedIV must be non-null."));
                }

                // Create encryptor, and stream objects
                ICryptoTransform rdTransform = 
                    rijndael.CreateEncryptor((byte[])savedKey.Clone(),
                                            (byte[])savedIV.Clone());
                CryptoStream cryptoStream = new CryptoStream(memStream, rdTransform, 
                    CryptoStreamMode.Write);

                // Write encrypted data to the MemoryStream
                cryptoStream.Write(originalStrAsBytes, 0, originalStrAsBytes.Length);
                cryptoStream.FlushFinalBlock();
                originalBytes = memStream.ToArray();

                // Release all resources
                memStream.Close();
                cryptoStream.Close();
                rdTransform.Dispose();
                rijndael.Clear();

                // Convert encrypted string
                string encryptedStr = Convert.ToBase64String(originalBytes);
                return (encryptedStr);
            }

            public static string Decrypt(string encryptedStr)
            {
                // Unconvert encrypted string
                byte[] encryptedStrAsBytes = Convert.FromBase64String(encryptedStr);
                byte[] initialText = new Byte[encryptedStrAsBytes.Length];

                RijndaelManaged rijndael = new RijndaelManaged();
                MemoryStream memStream = new MemoryStream(encryptedStrAsBytes);

                if (savedKey == null || savedIV == null)
                {
                    throw (new NullReferenceException(
                        "savedKey and savedIV must be non-null."));
                }

                // Create decryptor, and stream objects
                ICryptoTransform rdTransform = 
                    rijndael.CreateDecryptor((byte[])savedKey.Clone(), 
                                            (byte[])savedIV.Clone());
                CryptoStream cryptoStream = new CryptoStream(memStream, rdTransform, 
                    CryptoStreamMode.Read);

                // Read in decrypted string as a byte[]
                cryptoStream.Read(initialText, 0, initialText.Length);

                // Release all resources
                memStream.Close();
                cryptoStream.Close();
                rdTransform.Dispose();
                rijndael.Clear();

                // Convert byte[] to string
                string decryptedStr = Encoding.ASCII.GetString(initialText);
                return (decryptedStr);
            }
        } 
```

我不能谈论 Rijndael 密码的 Objective C 实现，但我已经使用这个（C#）代码作为一些生产工作的基础，并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T17:59:33.237

你的问题很模糊，但简而言之；是的，有可能。你需要弄清楚你的密码学的期望是什么（高安全性还是高速？），然后权衡各种算法的好处以及它们在 Objective-C 和 C# 中的实现困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T18:02:14.273

我不知道 Objective C，但对于 C# 解密，请查看 System.Security.Cryptography 中的各种 CryptoServiceProviders。

这是我使用 TripleDES 编写的一个示例：

```
public class TripleDES
{
    private byte[] mbKey;
    private byte[] mbIV;
    private TripleDESCryptoServiceProvider tdProvider = new TripleDESCryptoServiceProvider();
    private UTF8Encoding UTEncode = new UTF8Encoding();

    // Key:  **YOUR KEY**
    // Project IV:  **YOUR IV**
    public TripleDES(string strKey, string strIV)
    {
        mbKey = UTEncode.GetBytes(strKey);
        mbIV = UTEncode.GetBytes(strIV);        
    }

    public TripleDES()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    public string EncryptToString(string strInput)
    {           
        return Convert.ToBase64String(this.EncryptToBytes(strInput));           
    }

    public byte[] EncryptToBytes(string strInput)
    {
        byte[] bInput = UTEncode.GetBytes(strInput);
        byte[] bOutput = ProcessInput(bInput, tdProvider.CreateEncryptor(mbKey, mbIV));
        return bOutput;
    }

    public string DecryptToString(string strInput)
    {
        return UTEncode.GetString(DecryptToBytes(strInput));
    }

    public byte[] DecryptToBytes(string strInput)
    {
        byte[] bInput = Convert.FromBase64String(strInput);
        byte[] bOutput = ProcessInput(bInput, tdProvider.CreateDecryptor(mbKey, mbIV));
        return bOutput;
    }

    private byte[] ProcessInput(byte[] input, ICryptoTransform ctProcessor)
    {
        MemoryStream memStream = new MemoryStream();
        CryptoStream crpStream = new CryptoStream(memStream, ctProcessor, CryptoStreamMode.Write);

        crpStream.Write(input, 0, input.Length);
        crpStream.FlushFinalBlock();

        memStream.Position = 0;

        byte[] output;
        output = new byte[memStream.Length];

        memStream.Read(output, 0, output.Length);

        memStream.Close();
        crpStream.Close();

        return output;
    }
} 
```

}

# asp.net-mvc - 如何更改 MVC 动态呈现操作链接的方式？

> ID：864794
> 
> 赞同：1
> 
> 时间：2009-05-14T17:54:53.777
> 
> 标签：asp.net-mvc, facebook, routing, fbml, actionlink

我需要根据配置设置更改 MVC 呈现操作链接（以及表单和 url 等）的方式。我正在使用 MS MVC 编写一个 facebook 应用程序，我的操作链接需要呈现链接，所以：

```
<a href="/MyFBApplication/Home/Index/">home</a> 
```

单击上面的链接将浏览到：
*[http ://apps.facebook.com/MyFBApplication/Home/Index/](http://apps.facebook.com/MyFBApplication/Home/Index/)*

“MyFBApplication”是 facebook 应用程序的名称。要建立我通过调用开始的链接

```
Html.ActionLink("Home", "Index", "Home") 
```

当用户点击链接时，facebook 会在后台向该链接发出请求：

*[http://www.myapplicationserver.com/facebook/123456/Home/Index/](http://www.myapplicationserver.com/facebook/123456/Home/Index/)*
*（123456 是客户端 ID，需要）*

然后来自此处的响应由 facebook 处理并显示给用户：
*[http ://apps.facebook.com/MyFBApplication/Home/Index/](http://apps.facebook.com/MyFBApplication/Home/Index/)*

如上所述，facebook 从后台请求页面数据。
*[http://www.myapplicationserver.com/facebook/123456/Home/Index/](http://www.myapplicationserver.com/facebook/123456/Home/Index/)*

问题是调用

```
Html.ActionLink("Home", "Index", "Home") 
```

将呈现一个指向
*[http://apps.facebook.com/facebook/123456/Home/Index/的链接](http://apps.facebook.com/facebook/123456/Home/Index/)*

我需要它来引导：
*[http ://apps.facebook.com/MyFBApplication/Home/Index/](http://apps.facebook.com/MyFBApplication/Home/Index/)*

我确实让它正常工作，购买了一套新的扩展方法。

```
 Html.FacebookActionLink("Home", "Index", "Home")
 Html.FacebookBeginForm("Index", "Home")
 Html.Facebook(etc) 
```

但这有一种“气味”。我想找到一个可以拦截 Html.ActionLink() 的管道并更改输出的地方。然后我可以使用所有标准调用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:31:06.730

为什么会有“气味”？Microsoft 将 ActionLink 方法构建为扩展方法。如果这些不能满足您的目的，您可以像以前一样编写自己的。

如果您真的想要，我想您可以创建自己的 ActionLink 方法版本作为重载（只要方法签名不模棱两可）。

如果您需要了解 MS 如何实现 ActionLink 扩展方法，请查看 LinkExtensions 类下的源代码。你可以[在这里下载](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)。

# ruby-on-rails - Rails CRUD 参数问题

> ID：864798
> 
> 赞同：0
> 
> 时间：2009-05-14T17:56:01.747
> 
> 标签：ruby-on-rails, parameters, routes, models, crud

所以我的背景是 Java Web 服务，但我正在尝试转向 ROR。

我正在使用 FlexImage 来处理图像上传和缩略图生成。我按照指南进行操作，CRUD 行为一度运行良好。但是，在某些时候，我的一个模型（图像）的 CRUD 行为被破坏了。

我得到的错误代码如下：`ActiveRecord::RecordNotFound in ImagesController#show -- Couldn't find Image with ID=#<Image:0x4e2bd74>.`换句话说，当我告诉 Rails 创建/更新/销毁时，它会将对象与 id 混淆。这似乎表明可能存在路由问题。我认为为图像添加部分可能是个麻烦，但回滚更改并没有解决它。

以下是图像模型控制器的新、显示和更新方法：

```
 # images_controller.rb

        # ...

      def new
        @image = Image.new

        respond_to do |format|
          format.html # new.html.erb
          format.xml  { render :xml => @image }
        end
      end

    # ...
  def show
    @image = Image.find(params[:id])

    respond_to do |format|
      format.jpg  # show.jpg.erb 
      format.html # show.html.erb
      format.xml  { render :xml => @image }
    end
  end

    # ...

      def create
        @image = Image.new(params[:image])

        if @image.save 
        redirect_to image_url(@image)
        else
        flash[:notice] = 'Your image did not pass validation.'
        render :action => 'new'
        end
      end 
     # ... 
```

请注意，show() 当然需要一个适当的 id。这是用于上传新图像的 new.html.erb：

```
# new.html.erb [upload image]
<h1>New image</h1>

<% form_for @image, :html => { :multipart => true } do |f| %>
  <%= f.error_messages %>
  <table><tr><td width="50%">
  <p>
    <%= f.label :filename %><br />
    <%= f.text_field :filename %></p>
  </td>
  <td><p><b>Upload Image</b><br />
    <%= f.file_field :image_file %><br />
    or URL: <%= f.text_field :image_file_url %>
    <%= f.hidden_field :image_file_temp %>
  </td>
  <td>
    <b>Uploaded Image:</b><br />
    <%= embedded_image_tag(@image.operate { |img| img.resize 100 }) if @image.has_image? %>
  </td>
  </tr>

  </table>
  <p>
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </p>
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', images_path %> 
```

routes.rb 的相关部分如下：

```
# routes.rb [excerpt]

  map.resources :images
  map.image 'images/:action/:id.:format', :controller => 'images' 
```

另请注意，**实际上确实上传**了一个新图像，并且在重定向到显示时抛出了错误（它期望 params[:id] 中的有效 ID，而不是由于某种原因正在处理的对象。）

提前感谢您的帮助，如果有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T18:25:18.603

通过查看代码，在我看来，问题可能是由`image_url(@image)`与非 RE​​STful`image`路由结合使用引起的。

您可能想要删除该行

```
map.image 'images/:action/:id.:format', :controller => 'images' 
```

从你的`routes.rb`.

线

```
map.resources :images 
```

实际上应该足以在您的`ImagesController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:14:14.527

我的建议是使用 ruby​​-debug 并在 Image.find 调用之前设置一个断点。检查 params[:id] 并查看它实际上是什么。

一个更贫民区的方法，把它放在 Image.find 调用之前

```
logger.info params[:id].class 
```

并查看该变量中的内容。是否有可能有某种前置过滤器在操纵它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T18:33:38.770

尝试

```
  redirect_to :action => "show", :id => @image
```

我认为这是编码重定向的一种更惯用的方式。并对 molf 关于 RESTful 路由的建议 +1。

# java - WCF 故障异常 支持与 Java Web 服务的互操作

> ID：864800
> 
> 赞同：2
> 
> 时间：2009-05-14T17:56:35.987
> 
> 标签：java, .net, wcf, interop, axis2

我编写了一个 java axis2 1.4.1 Web 服务和 .net 3.5 WCF 客户端，我试图捕捉抛出的 wsdl 错误。

与 .net 2.0 不同，.net 3.5 声称支持`wsdl:fault`并且服务引用向导确实在客户端代理中生成所有正确的故障类。但是当我尝试捕捉错误时，它似乎没有正确序列化，所以我只能`catch (FaultException ex)`而不是我实际使用的类型`FaultException<T>`

我查看了我的reference.cs，我可以看到向导已将正确添加`FaultContract`到我的操作中。

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.ServiceContractAttribute(Namespace="http://www.mycomp.com/wsdl/Foo", ConfigurationName="FooServiceProxy.Foo")]
public interface Foo {

        [System.ServiceModel.OperationContractAttribute(Action="http://www.mycomp.com/Foo/list", ReplyAction="*")]
 [System.ServiceModel.FaultContractAttribute(typeof(TestWsdlFaultsApp.FooServiceProxy.SimpleFault), Action="http://www.mycomp.com/Foo/list", Name="simpleFault")]
        [System.ServiceModel.XmlSerializerFormatAttribute()]
        TestWsdlFaultsApp.FooServiceProxy.listResponse list(TestWsdlFaultsApp.FooServiceProxy.listRequest request);
    } 
```

我还需要在 .net 中做些什么才能使其正常工作吗？还是 WCF 仅支持来自 .net Web 服务的自定义 wsdl 错误？

这是我的wsdl

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="wsdl-viewer.xsl"?>
<wsdl:definitions name="FooImplDefinitions"
      targetNamespace="http://www.mycomp.com/wsdl/Foo"
      xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
      xmlns:tns="http://www.mycomp.com/wsdl/Foo"
      xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
      xmlns:xs="http://www.w3.org/2001/XMLSchema">

      <!-- TYPES -->
      <wsdl:types>
            <xs:schema targetNamespace="http://www.mycomp.com/wsdl/Foo"
                  elementFormDefault="qualified" attributeFormDefault="unqualified"
                  xmlns:security="http://www.mycomp.com/xsd/types/Security">

                  <!-- IMPORTS -->
                  <xs:import namespace="http://www.mycomp.com/xsd/types/Foo"
                        schemaLocation="Foo.xsd" />
                   <xs:import namespace="http://www.mycomp.com/xsd/types/Security"
                        schemaLocation="Security.xsd" />

                  <!-- HEADER ELEMENTS -->
                  <xs:element name="identity" type="security:TrustedIdentity" />

                  <!-- REQUEST/RESPONSE ELEMENTS -->
                  <xs:element name="listRequest">
                        <xs:complexType>
                              <xs:sequence>
                                    <xs:element name="action" type="xs:string" />
                              </xs:sequence>
                        </xs:complexType>
                  </xs:element>
                  <xs:element name="listResponse">
                        <xs:complexType>
                              <xs:sequence>
                                    <xs:element name="stuff" type="xs:string" />
                              </xs:sequence>
                        </xs:complexType>
                  </xs:element>

                  <!-- FAULT TYPES  -->
                  <xs:complexType name="SimpleFault">
                        <xs:sequence>
                              <xs:element name="reason" type="xs:string"/>
                        </xs:sequence>
                  </xs:complexType>

                  <!-- FAULT ELEMENTS -->
                  <xs:element name="simpleFault" type="tns:SimpleFault"/>
            </xs:schema>
      </wsdl:types>

      <!-- MESSAGES -->
      <wsdl:message name="listRequest">
            <wsdl:part element="tns:listRequest" name="parameters" />
            <wsdl:part element="tns:identity" name="header" />
      </wsdl:message>
      <wsdl:message name="listResponse">
            <wsdl:part element="tns:listResponse" name="return" />
      </wsdl:message>
      <wsdl:message name="simpleException">
            <wsdl:part element="tns:simpleFault" name="fault"/>
      </wsdl:message>

      <!-- PORT TYPES -->
      <wsdl:portType name="Foo">
            <wsdl:operation name="list">
                  <wsdl:input message="tns:listRequest" />
                  <wsdl:output message="tns:listResponse" />
                  <wsdl:fault name="simpleFault" message="tns:simpleException" />
            </wsdl:operation>
      </wsdl:portType>

      <!-- BINDINGS -->
      <wsdl:binding name="FooBinding" type="tns:Foo">
            <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
            <wsdl:operation name="list">
                  <soap:operation soapAction="http://www.mycomp.com/Foo/list" />
                  <wsdl:input>
                        <soap:header message="tns:listRequest" part="header" use="literal" />
                        <soap:body parts="parameters" use="literal" />
                  </wsdl:input>
                  <wsdl:output>
                        <soap:body use="literal" />
                  </wsdl:output>
                  <wsdl:fault name="simpleFault">
                        <soap:fault name="simpleFault" use="literal" />
                  </wsdl:fault>
            </wsdl:operation>
      </wsdl:binding>

      <!-- SERVICES -->
      <wsdl:service name="FooServiceImpl">
            <wsdl:port name="FooPort" binding="tns:FooBinding">
                  <soap:address
                        location="http://localhost:9001/Foo/FooServiceImpl" />
            </wsdl:port>
      </wsdl:service>

</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T10:33:35.110

WCF should work with axis2 exceptions. I had it working, but I don't remember all the details.

When you use SOAP monitor or something like that, what do you see in the fault message body?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T10:39:41.710

If you're not catching the `FaultException<T>`, that means you're likely not sending it. Be careful of the XML namespace being used. Take a look at what you're sending, using Fiddler or something like it.

`FaultException<T>` works fine with Java, or even with WCF.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:10:40.687

Thanks john you set me on the right path, Problem was obvious: I was not setting the detail when I threw the fault in java (axis2).

DODGY CODE:

```
throw new SimpleException("SimpleFault thrown"); 
```

WORKING CODE:

```
 SimpleFault fault = new SimpleFault();
 fault.setReason("SimpleFault reason");

 SimpleFaultE faultMessage = new SimpleFaultE();
 faultMessage.setSimpleFault(fault);

 SimpleException ex = new SimpleException("SimpleFault thrown");
 ex.setFaultMessage(faultMessage);

 throw ex; 
```

So AXIS2 -> WCF wsdl:fault interop works just fine...

# asp.net - ASP.NET MVC、MonoDevelop 和 Windows

> ID：864804
> 
> 赞同：5
> 
> 时间：2009-05-14T17:57:47.483
> 
> 标签：asp.net, asp.net-mvc, open-source, monodevelop, vwdexpress

根据*Miguel de Icaza*的帖子（[此处](http://tirania.org/blog/archive/2009/May-05-1.html)和[此处](http://tirania.org/blog/archive/2009/May-06.html)）和*Lluis Sanchez Gual*的帖子（[此处](http://foodformonkeys.blogspot.com/2009/05/monodevelop-on-windows.html)和[此处](http://twitter.com/slluis)），适用于 Windows 的 MonoDevelop 将很快准备就绪。我个人对在 Windows 下使用 MonoDevelop 为 ASP.NET MVC 开发开源项目非常感兴趣。是的，在 Linux 下在 MonoDevelop 中工作会更好，但由于许多原因，我不能简单地停止使用 Windows（IIS7 是这些原因之一——今天它对于 ASP.NET 比 XSP 好得多）。

**问题 N1：**当 MonoDevelop 发布时，有人会尝试在 Windows 上使用 ASP.NET MVC 开发一些东西吗？

**问题 N2：**与 Visual Web Developer Express 2008 相比，在 Windows 上使用 MonoDevelop 有什么优势吗？

**问题 N3：** IDE（MonoDevelop 和 VWD Express）都是免费的，但实际上哪个更适合/更好地用于开源开发，为什么（这对我来说**很**有趣）？

**编辑：**

是的，我使用的是完整的 Visual Studio 2008 Pro，它是一个很棒的 IDE。但它不能用于开源开发——我认为这是无稽之谈。我实际上已经为此付费了——但我不能指望我图书馆的用户会这样做。所以我只能选择 Mono Develop 或 VWD Express？（见**问题 N3**）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T18:08:03.683

N1：我相信会有很多人会尝试使用 MonoDevelop for ASP.NET MVC。

N2：如果您更关注应用程序的跨平台体验，我会说 MonoDeveop 是可行的方法，因为您用 MonoDevelop 编写的应用程序肯定可以在 Mono 上运行。如果您使用 Visual Web Developer Express，您仍然需要运行 MOMA 或其他一些兼容性检查应用程序，以确保有任何 Mono 不兼容的库/方法注入到架构中。

N3：这是一个很难做出的决定。我还没有尝试过 MonoDevelop，所以我认为这将取决于每个 IDE 之间的开发人员经验，看看哪个更重：兼容性容易（参见 N2），或者开发容易，并且只是处理兼容性测试/移植。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T21:51:45.907

N1：我在 Linux 的 mono-develop 上尝试了 MVC，并且成功了。

N2：有利也有弊。我使用 Visual Studio Pro，但我并不完全知道 Mono-develop 有什么不同。我知道 mono-develop 中有一些功能在 Visual Studio 中只提供插件，而不是在 Express 版本中。

N3：我认为个人喜好会决定什么对你更好。我认为最简单的方法是下载[Mono Vmware 映像](http://www.mono-project.com/VMWare_Image)并尝试一下。您可能必须更新 mono-develop 软件包才能使用 mono-develop 的 MVC 功能。您可以将 vmware 映像与免费版本的 vmware 一起使用。我个人更喜欢 Visual Studio pro，因为我已经习惯了，而且我沉迷于 resharper。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T12:05:16.980

VisStud 在所有 auto-* 方面都比 MonoDevelop 好得多。但是不了解螺柱会产生什么是危险的。我的选择是使用 VisStud 定期开发和移植到 Mono。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-23T14:04:36.523

N1：我还没有使用过 MVC，所以我什么都做不了。
N2：MonoDevelop 就像 VS 的专业版，但它没有好的设计师。但是缺少一些重要的功能，例如报告。
N3：对于网络，我更喜欢 VWD，但对于其他东西，我更喜欢 MonoDevelop 和 SharpDevelop

# javascript - 如果西班牙语站点图像不存在，如何加载英文站点图像

> ID：864819
> 
> 赞同：2
> 
> 时间：2009-05-14T18:01:26.147
> 
> 标签：javascript, html, ajax, image, web

我有一个多语言网站。使用 html、javascript，如果图像在西班牙文文件夹中不存在，则可能是 ajax，它应该从英文文件夹中加载图像。

路径示例英文网站：images/home.jpg 西班牙网站：es/images/home.jpg

今天我有 message.properties ... 用于进行文本转换的东西 message.properties message_es.properties

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T18:26:27.883

您可以对图像使用 onerror

```
<img src="es/images/home.jpg" onerror="this.src='images/home.jpg'"> 
```

但是，恕我直言，最好在服务器端完成这项工作

# python - Python os.forkpty 为什么我不能让它工作

> ID：864826
> 
> 赞同：2
> 
> 时间：2009-05-14T18:03:16.270
> 
> 标签：python, pty

```
import pty
import os
import sys
import time

pid, fd = os.forkpty()

if pid == 0:
    # Slave
    os.execlp("su","su","MYUSERNAME","-c","id")

# Master
print os.read(fd, 1000)
os.write(fd,"MYPASSWORD\n")
time.sleep(1)
print os.read(fd, 1000)
os.waitpid(pid,0)
print "Why have I not seen any output from id?" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T19:41:02.023

你睡得太久了。最好的办法是一次一个字节地开始阅读。

```
#!/usr/bin/env python

import os
import sys

pid, fd = os.forkpty()

if pid == 0:
    # child
    os.execlp("ssh","ssh","hostname","uname")
else:
    # parent
    print os.read(fd, 1000)
    os.write(fd,"password\n")

    c = os.read(fd, 1)
    while c:
        c = os.read(fd, 1)
        sys.stdout.write(c) 
```

# .net - ASP.NET MVC 中的 RouteLink 和 ActionLink 有什么区别？

> ID：864827
> 
> 赞同：121
> 
> 时间：2009-05-14T18:03:54.737
> 
> 标签：.net, asp.net-mvc, html-helper, actionlink, routelink

我认为标题几乎概括了它：

`RouteLink()`和`ActionLink()`ASP.NET MVC有什么区别？

即你什么时候使用`Html.RouteLink()`，什么时候`Html.ActionLink()`在你的视图中使用？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-05-14T18:11:24.050

Action 和 Routes 不必是 1:1 的关系。

ActionLink 将生成 URL 以使用操作名称的第一个匹配路由到达操作。

RouteLink 将生成一个指向由名称或路由值确定的特定路由的 URL。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2009-05-14T18:37:12.270

实际上，这两种方法的输出是相同的，但生成方式略有不同：

[`Html.ActionLink()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)可以轻松快速地生成 ActionLink，并且可以让您对渲染的内容进行基本控制。如果您没有太多路线，或者不需要提供太多或太具体的信息，这将很好地完成工作。

该[`Html.RouteLink()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.routelink.aspx)方法采用略有不同的参数，因此可以让您更详细地控制事情的处理方式。当我的场景稍微复杂一点，或者当我有更详细的路线结构时，我倾向于使用这种方法。
一个例子是最近的一个项目，我（为了灵活性）宁愿有几条不同的路线，它们都很简单，而不是一条允许大量信息的复杂路线。因此，我最终为同一个控制器创建了四到五个路由，所有路由都指定了默认操作。我主要使用`RouteLink`版本，因为当我指定路由名称时，会自动输入默认参数。

随心所欲地使用它们，并且它们对您的项目有意义。它们中的任何一个都没有任何优点/缺点（其他一些不匹配......）。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-05-14T18:45:02.923

除了此处给出的其他答案之外，RouteLink 更快一些，并且永远无法匹配错误的路由，因为您更改了路由表。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-05-14T18:10:44.737

RouteLink 采用路线的名称，因此如果您的路线名称可靠且相当独特，那么即使要使用的操作名称发生更改，这也是相同的。ActionLink 链接到特定控制器的特定操作。我在我的观点中同时使用这两种方法，具体取决于我所追求的链接类型！

# java - 在 java 中保存大型静态类型安全字典的优雅方式 - 或避免代码太大

> ID：864833
> 
> 赞同：0
> 
> 时间：2009-05-14T18:05:33.627
> 
> 标签：java, c, compiler-construction, abstraction

基本上我想要一些字典，它是对遗留`#define`指令的抽象。

我有一个包含 6000 多个定义的旧头文件，这些定义用作标志参数组函数，这些定义表示一种类型的 entity `parameter`。

在 C 我有

```
 GetParameter(... , T_CTITLE, ...); 
```

在Java中我想打电话

```
 Connector.getParameter(Parameter.CTITLE, ...); 
```

并且 Parameter 将封装与从库中获取参数相关的所有逻辑。

参数实例会自动从标头中提取并转换为 java 代码，但问题是 Parameter 类变得太大 - 即我得到`code too large`编译错误（让我下划线：有超过 6000 个参数）。

而且我会很高兴以一种使 IDE 能够使用自动完成的方式进行这种抽象，并且非常不喜欢将 Parameter 对象存储在 say 中的想法`HashMap`。

编辑：参数类以下列方式定义：

```
public Parameter{
    /** logic **/
    public static final Parameter<T> parameter1 = new Parameter<T>("NAME", "T", 0xAAB);
    ...
    public static final Parameter<T> parameter6000 = new Parameter<T>("FOO", "T", 0xZZZ);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T18:13:06.527

一个明显的技巧是要么分割成一个大的继承链，要么更好地分割成接口（不需要`public static final`噪音）和一个接口来继承它们。

您可以通过使创建代码更小来节省空间。代替：

```
new Parameter<T>("NAME", "T", 0xAAB) 
```

一个极简主义的方法是：

```
parameter("NAME T AAB") 
```

有关限制的详细信息，请参阅JVM Spec (2nd Ed) 的[第 4.10 节。](http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#88659)要查看编​​译后的代码是什么样的，请使用.[`javap`](http://java.sun.com/javase/6/docs/technotes/tools/solaris/javap.html) `-c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:30:15.067

也许我不明白你想正确做什么，但这对我来说似乎是 Enum 的完美用途。由于您可以向 Enums 添加函数，因此只要您的 Java 版本足够新（1.5+），它们应该能够做您想做的事情。他们也连载！

是的，它适用于自动完成，尽管 6000 的列表很大。

我不知道枚举的大小是否有限制，但你可以找出来。

前任：

```
public enum Parameter {
    NAME("Pending", "T", 0xAAB), FOO("Foo", "T", 0x1FC);

    private final String displayValue;
    private final char myChar;
    private final int someNum;

    private Parameter(String display, char c, int num) {
        this.displayValue = display;
        this.myChar = c;
        this.someNum = num;
    }

    public String getDisplayValue() {
        return displayValue;
    }

    public char getMyChar() {
        return myChar;
    }

    public int getSomeNum() {
        return someNum;
    }
} 
```

现在这可以让你做你想做的事情。前任：

```
System.out.println("Hi, the value is " + Parameter.NAME.getSomeNum()); 
```

由于它们在运行时不会更改（毕竟，#DEFINE 不能），因此 ENUM 应该符合要求。

至于纯粹的大小，您可能应该尝试对它们进行轻微分类，并将它们放在几个 Enum 组中。

这使您能够关联元数据（数字）、自动完成、== 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T20:47:30.493

基本上，我认为多接口方法是要走的路。以下是我将如何构建该解决方案；我不知道 Parameter 构造函数的第二个参数是什么意思，所以我忽略了它。

在 .../com/yourcompany/legacydefines/Parameter.java 中：

```
package com.yourcompany.legacydefines;

public class Parameter<T> {
  private final String name;
  private final T val;

  private Parameter(String name, T val) {
    this.val = val;
    this.name = name;
  }

  public static <T> Parameter<T> newParameter(String name, T val) {
    return new Parameter<T>(name, val);
  }

  // then, standard getters for "name" and "val"
} 
```

在 .../com/yourcompany/legacydefines/Parameters1.java 中：

```
package com.yourcompany.legacydefines;

import static com.yourcompany.legacydefines.Parameter.newParameter;

interface Parameters1 {
  public static Parameter<String> Parameter0001 = newParameter("ABC", "ABCVAL");
  // ...
  public static Parameter<Integer> Parameter0999 = newParameter("FOO", 0xABCD);
} 
```

在 .../com/yourcompany/legacydefines/Parameters2.java 中：

```
package com.yourcompany.legacydefines;

import static com.yourcompany.legacydefines.Parameter.newParameter;

interface Parameters2 {
  public static Parameter<String> Parameter1001 = newParameter("DEF", "DEFVAL");
  // ...
  public static Parameter<Integer> Parameter1999 = newParameter("BAR", 0x1002);
} 
```

（等等）

在 .../com/yourcompany/legacydefines/Parameters.java 中：

```
package com.yourcompany.legacydefines;

interface Parameters extends Parameters1, Parameters2, Parameters3, Parameters4,
                             Parameters5, Parameters6, Parameters7 {} 
```

然后，在您的其他代码中只需使用 Parameters.Parameter4562

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T18:19:46.137

扩展 Tom Hawtin 的帖子，考虑使用 JSON 编码结构。

或者更好的是，与其在 Java 代码中对参数进行硬编码，不如将它们放入 XML 或 JSON 文件（或属性文件）中，这些文件会被吸入您最终生成的任何 JAR 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T18:54:38.347

我想这就是你想要的。我猜，'T' 是类型，你想使用泛型，这样用户就不必强制转换 #define 值：

```
public class Parameter<T> {

    public final static Parameter<String> NAME = new Parameter<String>("hello");
    // .. 5998 more declarations
    public final static Parameter<Integer> FOO = new Parameter<Integer>(0xff0b);

    private T value;
    private Parameter(T value) {
        this.value = value;
    }
    public T getValue() {
        return value;
    }   
} 
```

要访问参数，只需调用：

```
String value = Parameter.NAME.getValue(); 
```

java 常量等于#defines 名称，泛型反映了类型，所以我们只需要将值传递给构造函数。代码完成工作正常:)

# windows - 如何使用消息调度处理第二个事件循环？

> ID：864835
> 
> 赞同：1
> 
> 时间：2009-05-14T18:05:57.573
> 
> 标签：windows, event-handling, directshow

我正在开发一个本质上是单线程的程序，它唯一的线程是主事件循环线程。因此，它的所有数据结构基本上都不受临界区之类的保护。

在它最近集成了一些基于 DirectShow API 的新功能之前，一切都很好。一些 DirectShow API 打开第二个事件循环，并在第二个循环内调度消息（即，不可预测地调用其他事件处理回调）。因此，当调用第二个事件处理函数时，它可能会损坏调用 DirectShow API 的函数正在访问的数据结构。

我在内核编程方面有一些经验。我想到的是，对于一个单线程程序，它应该如何处理它的数据结构就像内核应该如何处理 per-CPU 数据结构一样。在内核中，当一个函数访问每个 CPU 的数据时，它必须禁用中断（非常类似于第二个事件循环中的消息调度）。但是，我发现没有简单的方法可以避免调用 DirectShow API 或防止在其中创建第二个事件循环，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:16:21.637

互斥体。信号量。锁定。无论你想叫它什么名字，这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T20:13:05.560

有几种可能的解决方案浮现在脑海中，具体取决于问题所在和您的代码：

1.  在调用任何运行模态循环的 API 之前，请确保您的数据结构处于一致状态。
2.  如果这不可能，您可以使用一个简单的布尔变量来保护结构。如果已设置，则只需中止任何更新尝试或将更新排队以备后用。另一种选择是中止先前的操作。
3.  如果问题是用户生成的事件，则在操作进行时禁用有问题的菜单或按钮。或者，您可以显示一个模式对话框。

# windows - 监视由 Windows 中的进程完成的某些系统调用

> ID：864839
> 
> 赞同：45
> 
> 时间：2009-05-14T18:06:13.453
> 
> 标签：windows, process, cross-platform

我希望能够监视进程进行的某些系统调用，主要是文件 I/O 调用。在 Linux 上，我可能可以使用带有合适参数的[strace](https://en.wikipedia.org/wiki/Strace)，但我如何在 Windows 上做到这一点？

我主要对运行一个进程并找出它已读取和写入的文件感兴趣。

我想从另一个进程以编程方式执行此操作。我知道[Process Monitor](http://en.wikipedia.org/wiki/Process_Monitor)，但我想以可以导入另一个程序进行进一步分析的形式接收数据。

如果我进一步缩小我的要求，那么能够监控对 CreateFile() 的调用可能就足够了。我真的只对打开哪些文件感兴趣，以及它们是打开读/写还是只是读。我没有真正说明的另一个要求是*速度*相当重要。我计划这样做是为了编译一个 C++ 文件，并拉起一个生成 20 MB 日志文件的完整 GUI，这将产生令人望而却步的开销。

如果它不需要管理权限也很好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-14T18:09:56.580

Windows 上有几个选项。

[Windows Performance Toolkit](https://docs.microsoft.com/en-us/windows-hardware/test/wpt/)可用于启用各种系统事件的跟踪，包括文件 I/O，并包括用于处理和查看这些事件的工具。您可以使用 xperf 开始跟踪各种类别的事件并将其保存到 ETL 文件中，以后可以使用相同的工具进行处理或查看。

[Sysinternals的](https://en.wikipedia.org/wiki/Sysinternals)[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)是另一个非常易于使用的选项，它使您能够快速查看系统上任何进程正在执行的所有文件和注册表访问。您还可以[以自动方式运行 Process Monitor](https://www.cloudnotes.io/how-to-automate-process-monitor/)。

如果您想完全以编程方式执行此操作，您可以使用 ETW 函数（StartTrace、EnableTrace 等）捕捉文件 I/O 事件并保存到 ETL 文件。示例代码[在这里](http://msdn.microsoft.com/en-us/library/aa363691(VS.85).aspx)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-14T18:14:51.450

在 Windows 上，您可以使用[Process Monitor](http://en.wikipedia.org/wiki/Process_Monitor)来监视进程活动（I/O 和注册表）。如果您真的不想知道系统调用，我想这符合您的需要。

您可以使用[winapioverride32](http://jacquelin.potier.free.fr/winapioverride32/)来监控 API 调用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-03T15:01:04.700

[Rohitab Batra 的API Monitor](http://www.rohitab.com/apimonitor)非常适合系统调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T18:16:51.027

使用[FileMon](http://en.wikipedia.org/wiki/Process_Monitor#FileMon)（现在集成到[Process Monitor](http://en.wikipedia.org/wiki/Process_Monitor)中）。

还有[NtTrace](http://www.howzatt.demon.co.uk/NtTrace)，类似于[strace](https://en.wikipedia.org/wiki/Strace)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-14T18:21:05.540

另一个 Windows API 跟踪工具：[`logexts.dll`](http://msdn.microsoft.com/en-us/library/cc266315.aspx)（[Windows 调试工具的](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)一部分），可以从[WinDbg](http://en.wikipedia.org/wiki/WinDbg) /ntsd/cdb 内部或通过独立`logger.exe`程序运行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-25T20:16:59.330

另一种方法是使用[Deviare API Hook](http://www.nektra.com/products/deviare-api-hook-windows/)并拦截您想要的所有用户模式系统调用。使用此框架，您可以为所有调用编写通用处理程序，因为可以使用 COM 接口读取参数（例如，每个参数都是一个 INktParam，您可以使用 INktParam.Value 获取值）。

另一种选择，但会花费一些钱，是使用同一家公司的[SpyStudio](http://www.nektra.com/products/spystudio-api-monitor/)。该产品有一个命令行选项，可用于在没有 GUI 的情况下收集日志。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2010-09-14T03:52:32.277

使用[`strace`](http://en.wikipedia.org/wiki/Strace). 示例输出：

```
打开（“。”，O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY|O_CLOEXEC）= 3
fstat64(3, {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
fcntl64(3, F_GETFD) = 0x1（标志 FD_CLOEXEC）
getdents64(3, /* 18 个条目 */, 4096) = 496
getdents64(3, /* 0 个条目 */, 4096) = 0
关闭（3）= 0
fstat64(1, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7f2c000
写（1，“autofs\nbackups\ncache\nflexlm\ngames”...，86autofsA
```

# c# - 嵌入 MS Word 作为编辑器（如在 Outlook 中）

> ID：864845
> 
> 赞同：2
> 
> 时间：2009-05-14T18:08:00.907
> 
> 标签：c#, ms-word

在 Outlook 中，您可以使用 Word 作为电子邮件的编辑器（不确定 Office 2007 中的情况，但您可以在 2003 中使用）

我可以在我自己的应用程序中复制它吗？我看过一篇文章提到使用 Web 浏览器组件，打开一个 .doc 文件并打开正确的工具栏，但我不确定这是否是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T18:18:26.387

您将需要一个 ActiveX 控件来在您的应用程序中托管 Word。[这篇文章 [msdn]](http://support.microsoft.com/kb/311765)可以帮助您入门，即使它是为经典 C++ 而不是 C# 编写的。[此页面 [msdn]](http://msdn.microsoft.com/en-us/library/ms973200.aspx)包含有关 ActiveX/Windows 窗体互操作性的一些详细信息。

# javascript - 如何在 URL 中执行 JavaScript

> ID：864852
> 
> 赞同：0
> 
> 时间：2009-05-14T18:09:47.593
> 
> 标签：javascript

访问自定义 URL 时，我需要执行某个 JavaScript。

此时触发我需要运行的 JavaScript 的按钮后面的代码是这样的：

```
 <a class="button" href="#" 

  onclick="new Request.HTML({
  method: 'post',
  url: '/ro/somefolder/anotherfolder',
  data: {'user_id': 777, 'score': 1, 'redirect': '1'},
  update: $('vote_user_777'),
  evalScripts: true
}).send();return false;">

<img src="/images/game/thumbsup.gif" alt="vote">
</a>

</span>
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T18:25:46.947

你没有说你遇到了什么问题，但语法看起来像 MooTools 库。

所以我整理了一些应该可以工作的 JavaScript，并且更符合 MooTools 的风格。

```
 window.addEvent('domready',function() {
    var request = new Request.HTML({
        method: 'post',
        url: '/ro/somefolder/anotherfolder',
        data: {'user_id': 777, 'score': 1, 'redirect': '1'},
        update: $('vote_user_777'),
        evalScripts: true
    });
    $$('a.button').addEvent('click',function(e) {
        e.stop();
        request.send();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T18:13:27.773

如果您指的是在 URL 中嵌入 JavaScript，而不是将其作为事件处理程序附加，您可以执行以下操作：

```
<a href="javascript:void(new Request.HTML({...}).send())"> 
```

使用该`void()`函数可确保不返回任何内容，以使浏览器不会离开当前页面。

# oracle - 在表单上填充文本框 - oracle

> ID：864855
> 
> 赞同：0
> 
> 时间：2009-05-14T18:10:31.477
> 
> 标签：oracle, builder

我在 oracle 中使用应用程序生成器 - 我有一个为电影院的开放时间创建新的记录表。

基本上现在我有它，所以你可以从电影院桌子上放一个电影院 ID，但问题是你需要知道这个 ID - 所以它不是很用户友好。我希望通过从下拉列表中选择电影院名称以某种方式动态地将这个 id 放入表单中（我已设法包括电影院下拉列表）

我如何根据应用程序构建器中选择框的选择使用相应的 id 填充表单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T20:37:32.107

您是指 Oracle Application Express，它有一个称为应用程序构建器的组件吗？

一个典型的选择列表查询是：

```
select cinema_name, cinema_id
from cinemas
order by cinema_name; 
```

这将向用户显示一个电影院名称列表，并在选择时使用电影院 ID 填充项目值。在 HTML 术语中，它构造一个 SELECT 标记，如下所示：

```
<select id="P1_CINEMAS">
  <option value="11">Ashtead</option>
  <option value="23">Birmingham</option>
  <option value="72">Croydon</option>
</select> 
```

如果用户从上面的列表中选择“Croydon”，则值“72”将被发布到数据库中。

# c++ - 托管 C++ - 根据配置文件导入不同的 DLL

> ID：864858
> 
> 赞同：1
> 
> 时间：2009-05-14T18:11:19.790
> 
> 标签：c++, visual-c++, dll, dllimport

我目前正在编写一个应用程序，该应用程序将为多个客户端提供类似的目的，但需要对其处理提供的数据的方式进行调整。从本质上讲，它将服务于相同的目的，但分发数据的方式完全不同。

所以我决定这样做： - 制作通用引擎库，它将包含所有方式的通用功能并提供默认界面，以确保不同的引擎将以相同的方式响应。- 为每一种运行方式编写一个特定的引擎……每一个都编译成它自己的.dll。

所以我的项目最终会得到一堆库，其中一些看起来像这样： project_engine_base.dll project_engine_way1.dll project_engine_way2.dll

现在在我们用于用户首选项的配置文件中会有一个引擎部分，以便我们可以决定使用哪个引擎：

```
[ENGINE]
Way1 
```

所以在代码的某个地方我们想要做：

```
If (this->M_ENGINE == "Way1")
  //load dll for way1
Else If (this->M_ENGINE == "Way2")
  //load dll for way2
Else
  //no engines selected...tell user to modify settings and restart application 
```

问题是......我将如何以这种方式导入我的 dll？甚至可能吗？如果没有，我能否就如何实现类似的运作方式获得一些建议？

我知道我可以一开始就导入所有的 dll，然后选择使用哪个引擎，但我的想法是我不想一劳永逸地导入太多引擎并浪费资源，我们也不想必须将所有这些 dll 发送给我们的客户。一位客户将使用一种引擎，另一位客户将使用不同的引擎。我们的一些客户可能会使用不止一个，因此我想将其外部化并允许我们的用户使用配置文件进行引擎切换。

有任何想法吗？

编辑：刚刚意识到，即使我的每个引擎在运行时动态加载并且不是全部在项目中引用时都会呈现相同的界面，我的项目也不会编译。所以我别无选择，只能将它们全部包含在我的项目中，不是吗？

这也意味着它们都必须运送给我的客户。配置中的设置仅使用我用来初始化我的引擎成员的类来决定。

或者

我可以将这些引擎中的每一个都编译为相同的名称。在我的主项目中只导入一个 dll，并且将一直使用该特定引擎。这将使我的客户无法将我们的应用程序用于他们自己的多个客户。除非他们愿意手动切换 dll。*呸*

有什么建议么？

编辑#2：此时看到我的选项，我还可以制作一个包含基本引擎以及所有子引擎和我的配置的大 dll，让用户选择。而不是引用多个 dll 并将它们全部发送。只需拥有一个巨大的并仅运送/参考那个。我也不太喜欢这个，因为这意味着将一个大 dll 发送给我所有的客户，而不仅仅是一两个满足客户需求的小 dll。不过，这仍然是我想出的最佳解决方案。

我仍在寻找更好的建议或答案来解决我原来的问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T19:10:05.187

为每个引擎使用单独的 DLL，并在主项目中使用[LoadLibrary](http://msdn.microsoft.com/en-us/library/ms684175(VS.85).aspx)根据配置加载特定引擎。

将您的引擎接口放在一些通用头文件中，所有引擎都将从该头文件中派生该接口，并且该接口也将在您的主项目中使用。

它可能看起来像这样：

```
// this should be an abstract class
class engine {
public:
     virtual void func1() = 0;
     virtual void func2() = 0;
...
}; 
```

在每个不同的引擎实现中，从 DLL 中导出一个函数，如下所示：

```
// might aswell use auto_ptr here
engine* getEngine() { return new EngineImplementationNumberOne(); } 
```

现在在您的主项目中只需使用 LoadLibrary 加载您感兴趣的 DLL，然后使用 getEngine 函数 GetProcAddress。

```
string dllname;

if (this->M_ENGINE == "Way1")
     dllname = "dllname1.dll";         
else if (this->M_ENGINE == "Way2")
     dllname = "dllname2.dll";
else
     throw configuration_error();

HMODULE h = LoadLibraryA(dllname.c_str());
typedef engine* (*TCreateEngine)();

TCreateEngine func = (TCreateEngine)GetProcAddress(h, "getEngine");
engine* e = func(); 
```

导出函数的名称可能会被破坏，因此您可以在 DLL 中使用 DEF 文件或 extern "C"，也不要忘记检查错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T19:59:10.043

我得出的解决方案如下：

```
Engine_Base^  engine_for_app;
Assembly^ SampleAssembly;
Type^  engineType;

if (this->M_ENGINE == "A")
{
    SampleAssembly = Assembly::LoadFrom("path\\Engine_A.dll");

    engineType = SampleAssembly->GetType("Engine_A");
    engine_for_app = static_cast<Engine_Base^>(Activator::CreateInstance(engineType, param1, param2));
}
else
{
    SampleAssembly = Assembly::LoadFrom("path\\Engine_B.dll");

    engineType = SampleAssembly->GetType("Engine_B");
    engine_for_app = static_cast<Engine_Base^>(Activator::CreateInstance(engineType, param1, param2, param3, param4));
} 
```

我使用了丹尼尔的答案以及对他的答案的评论。经过一些额外的研究，我遇到了 LoadFrom 方法。

# c++ - 使用 CArray 时出错

> ID：864864
> 
> 赞同：4
> 
> 时间：2009-05-14T18:12:13.737
> 
> 标签：c++, mfc

所以，我试图这样使用`CArray`：

```
 CArray<CPerson,CPerson&> allPersons;
   int i=0;
   for(int i=0;i<10;i++)
   {
      allPersons.SetAtGrow(i,CPerson(i));
      i++;
   } 
```

但是在编译我的程序时，我得到了这个错误：

> “错误 C2248：‘CObject::CObject’：无法访问在类‘CObject’c:\program files\microsoft visual studio 9.0\vc\atlmfc\include\afxtempl.h 中声明的私有成员”

我什至不明白这是从哪里来的。

帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T18:17:30.463

您得到的错误是因为您试图使用 a`CArray`作为我可以收集的返回值。如果您将其从返回 a 更改`CArray`为采用引用参数，则将编译。

试试这个：

```
class CPerson
{
public:
    CPerson();
    CPerson(int i);
    void operator=(const CPerson& p) {}
private:
    char* m_strName;
};

CPerson::CPerson()
{}

CPerson::CPerson(int i)
{
    sprintf(m_strName,"%d",i);
}

void aFunction(CArray<CPerson,CPerson&> &allPersons)
{
    for(int i=0;i<10;i++)
    {
        allPersons.SetAtGrow(i,CPerson(i));
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T18:55:33.053

您是否使用 CObject 的任何 Copy 构造函数或赋值运算符？（CArray 派生自 CObject）

例如：

```
 CArray<CPerson,CPerson&> allPersons;  

//do something

// This gives the error C2248, cannot access Copy constructor of CObject.
CArray<CPerson,CPerson&> aTemp = allPersons; 
```

或者

你在做这个吗？

```
CArray<CPerson,CPerson&> allPersons; 
...
CArray<CPerson,CPerson&> aTemp;

//Error, as Assignment operator is private
aTemp = allPersons; 
```

**编辑**：如果要复制 CArray 中的元素，请编写辅助方法 CopyArray() 并手动复制元素。

```
CopyArray(sourceArray, DestArray&)
{
 for each element in SourceArray
 add the element to DestArray.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T18:17:11.663

你的意思是说`CArray<CPerson> allPersons;`？我不知道省略包含的类型会如何导致报告的错误，但是......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T18:31:30.960

是`CPerson`从`CObject`? 它有`private`构造函数吗？否则，您对我的使用`SetAtGrow()`似乎是正确的。

如果这不起作用，您可以尝试回退到使用该`Add()`函数，因为您的循环似乎不需要`SetAtGrow()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-17T15:05:11.587

我不完全确定你的问题是什么，但也看看这个：[Microsoft CObject derived class specification](https://msdn.microsoft.com/en-us/library/ccb3dh5c.aspx)。

您可能需要添加以下代码：

```
class Person
{
    // ...
    Person( const Person& src );
}

Person::Person( const Person& src ){ Person();*this = src; } 
```

希望对未来有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T13:51:27.250

如果`CPerson`是一个复杂的对象，也许你应该考虑使用[指针](https://www.tutorialspoint.com/cplusplus/cpp_pointers.htm)

```
 CArray<CPerson*,CPerson*> allPersons;
   int i=0;
   for(int i=0;i<10;i++)
      allPersons.SetAtGrow(i,new CPerson(i)); 
```

不要忘记删除不再需要的数组内容

```
 for(int i=0;i<allPersons.GetSize();i++)
      delete allPersons.GetAt(i); 
```

# jquery - jQuery Slideup/Down 追加问题

> ID：864865
> 
> 赞同：11
> 
> 时间：2009-05-14T18:12:36.323
> 
> 标签：jquery

```
$(".item").hover(
  function () {
    $(this).slideDown().append(
            $("<div class=\"attending\">Yes/No</div>")
        );
  }, 
  function () {
    $(this).find("div:last").slideUp().remove();
  }
); 
```

我正在使用上面的代码在翻转时将 div 附加到元素的底部。我有许多 .item div，每个 div 都会在翻转时附加到它们，但由于某种原因，我无法使向下/向上滑动工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-14T18:43:54.550

```
$(".item").hover(
    function () {
        var answer = $("<div class=\"attending\">Yes/No</div>").hide();
        answer.appendTo($(this)).slideDown();
    }, 
    function () {
        $(this).find("div:last").slideUp("normal", function() {
            $(this).remove();
        });
    }
); 
```

## 它不会滑下来！

您将错误的子元素附加到错误的元素，并且您忘记了先隐藏该元素。

## 它不会滑上去！

这条线开始向上滑动，但不等待动画完成并移除元素。

```
$(this).find("div:last").slideUp().remove() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:20:40.987

直觉上，我想说你在错误的元素上声明了幻灯片效果。它被调用`.list`而不是`div.attending`，这是我认为您想要出现的框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T18:23:35.283

尝试

```
$(".item").hover(
  function () {
    $(this).append(
        $("<div class=\"attending\">Yes/No</div>").hide();
    ).find("div:last").slideDown();
  }, 
  function () {
    $(this).find("div:last").slideUp("normal", function() {
      $(this).remove();
    });
  }
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-26T01:48:14.490

我遇到了类似的问题。正在使用**.append()**；尝试使用回调函数-但根本不起作用。所以，做了一个伎俩并成功了。**简单**看一下。这是步骤-

*   在附加内容时；每当调用附加功能块时，获取一个变量并保持其值递增。
    为该元素设置一个带有该变量的 id 并保持隐藏。

`function add_more_charge()
{
var i = $("#store_id_value").val();
var id = 'some_id_'+i;
var str= '<div style="display:none" id="'+id+'">...............</div>';
$("#store_id_value").val(++i);
$("#additional_charges").append(str);
$("#"+id).slideDown();
}`

在这里，在 this-`<input type="hidden" id="store_id_value" value="2" />` 中存储一个值，并在每次调用时递增。

我们可以生成随机数。使用全局变量也是一个不错的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-01T13:40:49.803

```
$(".item").hover(
  function () {
    var content = $(this).append($("<div class=\"attending\">Yes/No</div>")).hide();
    $('.attending').last().slideDown();
  }, 
  function () {
    $(this).find(".attending").last().slideUp("normal", function() {
      $(this).remvove();
    });
  }
); 
```

试试这个，它有点骇人听闻，但确实有效。

# sql - 您如何选择每列 1 和每列 2 的最新条目？

> ID：864870
> 
> 赞同：2
> 
> 时间：2009-05-14T18:13:50.173
> 
> 标签：sql, mysql

我对mysql相当陌生，需要一个我无法弄清楚的查询。给定这样的表：

```
emp  cat  date        amt   cum
44   e1   2009-01-01  1     1
44   e2   2009-01-02  2     2
44   e1   2009-01-03  3     4
44   e1   2009-01-07  5     9
44   e7   2009-01-04  5     5
44   e2   2009-01-04  3     5
44   e7   2009-01-05  1     6
55   e7   2009-01-02  2     2
55   e1   2009-01-05  4     4
55   e7   2009-01-03  4     6 
```

我需要为每个“emp”和“cat”选择最新的交易日期。上表将产生如下内容：

```
emp  cat  date        amt   cum
44   e1   2009-01-07  5     9
44   e2   2009-01-04  3     5
44   e7   2009-01-05  1     6
55   e1   2009-01-05  4     4
55   e7   2009-01-03  4     6 
```

我试过类似的东西：

```
select * from orders where emp=44 and category='e1' order by date desc limit 1;
select * from orders where emp=44 and category='e2' order by date desc limit 1; 
```

……

但这感觉不对。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T18:22:26.130

这*应该*可以，但我还没有测试过。

```
SELECT orders.* FROM orders
INNER JOIN (
  SELECT emp, cat, MAX(date) date
    FROM orders
    GROUP BY emp, cat
  ) criteria USING (emp, cat, date) 
```

基本上，这使用子查询来获取每个 emp 和 cat 的最新条目，然后将其与原始表连接以获取该订单的所有数据（因为您不能 GROUP BY amt 和 cum）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T18:29:59.637

@R.Bemrose 给出的答案应该有效，这是另一个比较技巧：

```
SELECT o1.*
FROM orders o1
LEFT OUTER JOIN orders o2
 ON (o1.emp = o2.emp AND o1.cat = o2.cat AND o1.date < o2.date)
WHERE o2.emp IS NULL; 
```

这假设列（emp、cat、date）包含一个候选键。即，一对给定的emp & cat 只能有一个日期。

# html - 我需要做什么才能让新的 HTML 编辑器 ajax 控件作为共享点内容编辑器 Web 部件工作？

> ID：864874
> 
> 赞同：0
> 
> 时间：2009-05-14T18:14:50.110
> 
> 标签：html, sharepoint, editor, cross-platform

Microsoft 刚刚发布了一些新的 ajax 控件，包括一个 ajaxed 的 HTML 编辑器控件。

[http://www.asp.net/learn/Ajax-Control-Toolkit/tutorial-50-cs.aspx](http://www.asp.net/learn/Ajax-Control-Toolkit/tutorial-50-cs.aspx)

我想在 Sharepoint 中尝试一下（因为内置的 Sharepoint 很糟糕（根本没有跨浏览器，而且在 IE 上不稳定）我尝试了 Telerik 免费的，但它不是很稳定。

我想在页面上进行控制不会太难，但我如何确保生成的 HTML 以 Sharepoint 方式（tm）存储？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T03:40:10.313

实际上，您无需为 SharePoint 设置 HTML 格式。如果您正在使用字段控件，您可以预期 SharePoint 会从您的控件中删除大量 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T04:05:41.470

如果您打算替换标准的 SharePoint 富文本编辑器，您可能会发现使用 jQuery 比使用 ajax 控件工具包要容易得多。MS ajax 控件有一个服务器组件——你可以将它变成一个自定义的列类型，但是如果你只是用更好的客户端替换文本框，它会容易得多。

标准控件以类似的方式工作 - 在服务器上创建一个包含 html 的标准文本框，然后使用 javascript 隐藏它并将其连接到富文本编辑器。

# python - 如何将列表的浮动列表写入 Python 中的文件

> ID：864883
> 
> 赞同：10
> 
> 时间：2009-05-14T18:16:54.987
> 
> 标签：python, file-io

我需要将一系列矩阵从 python 写入纯文本文件。我所有的矩阵都是浮点格式，所以简单的 file.write() 和 file.writelines()

不工作。有没有一种我可以使用的转换方法，它不会让我遍历所有列表（在我的情况下，矩阵 = 列表列表）转换单个值？

我想我应该澄清一下，它不需要看起来像一个矩阵，只是一个易于解析的列表中的关联值，我稍后会读到。所有在一条线上实际上可能会使这更容易！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-14T18:23:25.877

```
m = [[1.1, 2.1, 3.1], [4.1, 5.1, 6.1], [7.1, 8.1, 9.1]]
file.write(str(m)) 
```

如果您想更好地控制每个值的格式：

```
def format(value):
    return "%.3f" % value

formatted = [[format(v) for v in r] for r in m]
file.write(str(formatted)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-14T18:22:43.210

以下对我有用：

```
with open(fname, 'w') as f:
    f.writelines(','.join(str(j) for j in i) + '\n' for i in matrix) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-14T19:27:48.640

为什么不用[泡菜](http://docs.python.org/library/pickle.html)？

```
import cPickle as pickle
pckl_file = file("test.pckl", "w")
pickle.dump([1,2,3], pckl_file)
pckl_file.close() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-18T19:52:40.903

```
import pickle

# write object to file
a = ['hello', 'world']
pickle.dump(a, open('delme.txt', 'wb'))

# read object from file
b = pickle.load(open('delme.txt', 'rb'))
print b        # ['hello', 'world'] 
```

此时你可以用vi查看文件'delme.txt'

```
vi delme.txt
  1 (lp0
  2 S'hello'
  3 p1
  4 aS'world'
  5 p2
  6 a. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-03T21:21:50.143

对于矩阵中的行：file.write(" ".join(map(str,row))+"\n")

这对我有用......并以矩阵格式写入输出

# python - 使用 Python 开始 Windows Mobile 6.1 开发

> ID：864887
> 
> 赞同：0
> 
> 时间：2009-05-14T18:17:27.873
> 
> 标签：python, windows-mobile, mobile-phones

我想进入 Python 开发已经有一段时间了，我的大部分编程经验都是在 .NET 中进行的，没有移动开发。我最近想到了一个有用的应用程序来为我的 Windows 手机制作，并认为这可能是一个很棒的第一个 Python 项目。

我在网上做了一些研究，发现了 PyCe，我认为这是我开始使用该应用程序所需要的？在这方面有一些经验的人能指出我正确的方向吗？下载什么开始，我可以使用什么轻量级数据库等？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:36:53.753

对 Python\CE 帮不上什么忙，但如果您想要一个适用于移动设备的出色数据库，SQLLite 将为您完成这项工作。如果你快速谷歌一下，你会发现也有一些库可以用 Python 连接到 SQLLite。

# emacs - 如何找到已加载的 .emacs 文件？

> ID：864892
> 
> 赞同：32
> 
> 时间：2009-05-14T18:17:50.773
> 
> 标签：emacs, dot-emacs

如何让 emacs 告诉我它已加载的 .emacs 文件的位置？

我的情况很简单，当我这样做时`sudo emacs`，它会加载一个与我的主目录中的文件截然不同的 .emacs 文件。我可以通过`M-x eval-buffer`处理自己的 .emacs 文件来解决问题，但这是很多额外的步骤，而且它似乎无法清除正在加载的任何 .emacs 文件中的愚蠢绑定。如果有的话，我只想找到 .emacs 文件并删除一些陌生人绑定（cn、cp、ca 都反弹到奇怪的东西）

我的主要问题仍然是，如何让 emacs 告诉我它已加载的 .emacs 文件的位置？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-05-14T18:30:15.220

使用的初始化文件存储在变量“user-init-file”中。要查看此使用 'describe-variable' (Ch v)，请输入 'user-init-file'，它将显示使用的文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-14T18:29:57.267

您可以尝试查看通过以下方式找到的文件：

```
C-x C-f ~/.emacs RET 
```

`~`被转换为`HOME`环境变量的值。Emacs 查找`.emacs`, then `.emacs.elc`（字节编译版本）、 then `.emacs.el`、 then`~/.emacs.d/init.elc`和`~/.emacs.d/init.el`. 本[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Find-Init.html#Find-Init)显示了替代方案。它还取决于环境变量`LOGNAME`和`USER`.

您还可以检查`*Messages*`缓冲区的内容 - 尽管您应该设置`(setq message-log-max t)`（如果可以）以确保保留所有消息。在该缓冲区内，有几行如下所示：

> 正在加载 /home/tjackson/.emacs.tjackson.el（来源）...

这将显示加载了哪些文件。

您还应该查看[Find-Init](http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html)文档，该文档显示了更多可以加载的文件，例如`site-start.el`, 和终端特定的初始化（对我来说是新的）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-14T18:27:12.357

如果你在 Linux 上，你可以试试这个来查看 emacs 启动时打开了哪些文件。

```
sudo strace -o /tmp/emacs.txt -e open emacs 
```

# sql - 数据如何存储在 SQL Server 中？

> ID：864899
> 
> 赞同：29
> 
> 时间：2009-05-14T18:20:33.917
> 
> 标签：sql, sql-server-2008

数据如何存储在 SQL Server 中？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-14T18:23:21.837

这篇维基百科[文章](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)很好地描述了它。

这是它的一个子集，与数据存储有关：

> 数据存储 数据存储的主要单元是数据库，它是具有类型列的表的集合。SQL Server 支持不同的数据类型，包括主要类型，例如 Integer、Float、Decimal、Char（包括字符串）、Varchar（可变长度字符串）、binary（用于非结构化数据块）、Text（用于文本数据）等. 它还允许定义和使用用户定义的复合类型 (UDT)。SQL Server 还使服务器统计信息可用作虚拟表和视图（称为动态管理视图或 DMV）。除了表之外，数据库还可以包含其他对象，包括视图、存储过程、索引和约束，以及事务日志。一个 SQL Server 数据库最多可以包含 231 个对象，并且可以跨越多个操作系统级别的文件，最大文件大小为 220 TB。数据库中的数据存储在扩展名为 .mdf 的原始数据文件中。以 .ndf 扩展名标识的辅助数据文件用于存储可选元数据。日志文件以 .ldf 扩展名标识。
> 
> 分配给数据库的存储空间被划分为按顺序编号的页面，每个页面大小为 8 KB。页面是 SQL Server 操作的基本 I/O 单元。页面标有 96 字节的标头，其中存储有关页面的元数据，包括页码、页面类型、页面上的可用空间以及拥有它的对象的 ID。页面类型定义了页面中包含的数据 - 存储在数据库中的数据、索引、包含有关如何将页面分配给表和索引的信息的分配映射、包含有关自上次备份或日志记录以来对其他页面所做更改的信息的更改映射，或包含大数据类型，例如图像或文本。虽然页是 I/O 操作的基本单位，但空间实际上是按照由 8 个页组成的范围来管理的。一个数据库对象可以跨越一个范围内的所有 8 个页面（“统一范围”），也可以与最多 7 个对象共享一个范围（“混合范围”）。数据库表中的一行不能超过一页，因此大小限制为 8 KB。但是，如果数据超过 8 KB 并且该行包含 Varchar 或 Varbinary 数据，则这些列中的数据将移动到新页面（或可能是页面序列，称为分配单元）并替换为指向数据的指针。
> 
> 对于表的物理存储，它的行被划分为一系列分区（编号为 1 到 n）。分区大小由用户定义；默认情况下，所有行都在一个分区中。一个表被分成多个分区，以便将数据库分布在一个集群上。每个分区中的行存储在 B 树或堆结构中。如果表具有关联索引以允许快速检索行，则行将根据其索引值按顺序存储，并使用 B 树提供索引。数据在叶子的叶子节点中，其他节点存储从各个节点可到达的叶子数据的索引值。如果索引是非聚集索引，则不会根据索引键对行进行排序。索引视图与索引表具有相同的存储结构。没有索引的表存储在无序堆结构中。堆和 B 树都可以跨越多个分配单元。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-14T18:31:16.483

SQL Server 数据存储在默认情况下具有 .MDF 扩展名的数据文件中。日志 (.LDF) 文件是 SQL Server 用来记录针对 SQL Server 实例执行的事务的顺序文件（稍后将详细介绍实例）。日志文件（.LDF 文件）在使用 SIMPLE 恢复模式时会自动截断，但在使用 BULK LOGGED 或 FULL 恢复时不会。

实例允许在一台计算机上安装多个 SQL Server。如果实例是无名的，则它是默认实例。命名实例也是可能的。例如：

MACHINENAME <-- 默认实例只是机器名称 MACHINENAME\Test <-- 这是这台机器上的“测试”实例

您可以使用 SQL Server Management Studio（自 SQL Server 2005 起）或 Enterprise Manager（SQL Server 2000 及更早版本）等工具与实例和实例下的数据库进行交互。

所有实例（自 SQL Server 2005 起）都将有一个隐藏的资源数据库，以及一个 master、model、msdb 和 temp 数据库。这些数据库是“系统”数据库。

不确定您还在寻找什么。希望有帮助。

编辑：哦，是的，物理上，“数据文件”（.MDF 文件，默认情况下）中的数据在 SQL Server 中被称为“页面”。日志文件（.LDF 文件）中的数据按顺序存储。在企业中，数据和日志文件有时会被拆分到不同的物理硬盘驱动器上，以获得更好的磁盘 I/O。或者硬件 RAID 用于此目的。

EDIT2：忘了提到文件组。使用文件组，您可以设计逻辑数据库架构，使该架构的元素在物理上分离，通常用于跨不同硬盘驱动器分配物理数据库。例如，您可以有一个数据文件组、一个索引文件组和一个图像文件组（用于二进制图像）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-15T08:36:59.290

我推荐“Microsoft SQL Server 2008 Internals”一书——事实上，IMO，Kalen Delaney 关于内部的任何内容都很好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T18:23:25.190

SQL Server 是一个[关系数据库管理系统](http://en.wikipedia.org/wiki/RDMS)：

> 关系数据库管理系统 (RDBMS) 是基于 EF Codd 引入的关系模型的数据库管理系统 (DBMS)。当前使用的大多数流行的商业和开源数据库都是基于关系模型的。
> 
> RDBMS 的简短定义可以是数据以表的形式存储并且数据之间的关系也以表的形式存储的 DBMS。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T18:24:01.413

您可以尽可能深入地了解这一点，但是对于 SQL Server 2008[文件和文件组体系结构 - MSDN](http://msdn.microsoft.com/en-us/library/ms179316.aspx)是基本数据库体系结构的一个很好的概述。

如果您需要有关 SQL Server 2008 如何存储数据的更详细的详细信息，MSDN 站点将是一个宝贵的资源。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-05-14T18:22:57.733

什么是关系数据库管理系统？

RDBMS 代表关系数据库管理系统。RDBMS 数据在数据库表、字段和记录中结构化。每个 RDBMS 表由数据库表行组成。每个数据库表行由一个或多个数据库表字段组成。

RDBMS 将数据存储到表集合中，这些表可能通过公共字段（数据库表列）相关联。RDBMS 还提供关系运算符来操作存储到数据库表中的数据。大多数 RDBMS 使用 SQL 作为数据库查询语言。

Edgar Codd 介绍了关系数据库模型。许多现代 DBMS 不符合 Codd 对 RDBMS 的定义，但它们仍然被认为是 RDBMS。

最流行的 RDBMS 是 MS SQL Server、DB2、Oracle 和 MySQL。 [资源](http://www.databasedir.com/what-is-rdbms/)

# c# - 创建一个虚拟小键盘：阻止表单被激活/聚焦

> ID：864904
> 
> 赞同：0
> 
> 时间：2009-05-14T18:21:45.147
> 
> 标签：c#, winforms

我想创建一个虚拟小键盘，类似于屏幕键盘。如何防止表单被激活/聚焦，以便当我按下它上的按钮时，SendKeys.Send 调用会转到正确的表单？我确定我必须为此使用非托管 API，但除此之外我什至不知道从哪里开始。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T20:19:22.417

您可以通过覆盖受保护的 CreateParams 属性来控制表单的创建方式：

```
protected override CreateParams CreateParams {
  get {
    var cp = base.CreateParams;
    // Configure the CreateParams structure here
    return cp;
  }
} 
```

我建议尝试以下风格：

```
int WS_EX_NOACTIVATE = 0x08000000;
cp.ExStyle = cp.ExStyle | WS_EX_NOACTIVATE; 
```

该`WS_EX_NOACTIVATE`样式防止鼠标输入提供窗口焦点（例如，您可以使用它来创建类似工具提示的窗口。）

您可以将其与其他样式（如`WS_EX_TOPMOST`）结合使用，以获得您所追求的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T18:36:07.080

没有焦点的表单通常不会接收键盘输入。所以我不确定你将如何让它发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T18:43:52.693

如果小键盘只需要在您编写的应用程序中工作，您可以只跟踪具有焦点的最后一个有效输入控件。这样，您就不必担心某些事情会转移注意力。我最近做了类似的事情，将一堆 TextBoxes 的 Enter 事件订阅到同一个事件处理程序，将我的焦点控制句柄设置为 sender 参数。这种确切的方法可能不适合您，但该方法可能会使它更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T18:47:23.963

对于您编写的应用程序，请考虑观察者模式。

在一般情况下，您可以向接受委托的键盘添加订阅方法（也允许取消订阅）。对于您的按键事件处理，循环遍历所有订阅的代表，向其发送字符代码。

代码（主要来自内存，片段可能无法编译，但应该让你继续）

```
delegate void KeyPadSubscription (char keyPressed);
List<KeyPadSubscription> subscriptions;

void KeyPress (object sender, KeyPressArgs e)
{
   foreach (KeyPadSubscription sub in subscriptions)
        sub (e.CharCode)
}

void Subscribe(KeyPadSubscription s)
{
    subscriptions.Add(s);
}

void Unsubscribe(KeyPadSubscription s)
{
    subscriptions.Remove(s);
} 
```

在您的情况下，您可能不需要代表列表，并且一个属性就足够了。然后，当您的表单更改焦点时，活动表单会将其方法设置为您的键盘的委托。

```
void MyForm_Activated(...)
{
    //assumes keypad is global or static
    KeyPad.Subsribe (this.HandleKeyPadPress)
} 
```

# asp.net-mvc - 将 MVCContrib 的 WindsorControllerFactory 与新的 Windsor Castle 2.0 一起使用

> ID：864908
> 
> 赞同：2
> 
> 时间：2009-05-14T18:22:27.533
> 
> 标签：asp.net-mvc, castle-windsor, mvccontrib

我正在尝试将`WindsorControllerFactory`（最新的 1.0.0.916 版本）与新的 Windsor Castle 2.0（再次，最新版本）一起使用。但我得到了

> 无法加载文件或程序集'Castle.Windsor，版本 = 1.0.3.0...

启动 Web 应用程序时出错。无论如何，在写这个问题的过程中，我设法通过将此块添加到 Web.config 文件中来说服 Web 应用程序绑定到新 Castle 的 dll：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Castle.Windsor" culture="neutral" publicKeyToken="407dd0808d44fbdc"/>
        <bindingRedirect oldVersion="1.0.3.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Castle.Core" culture="neutral" publicKeyToken="407dd0808d44fbdc"/>
        <bindingRedirect oldVersion="1.0.3.0" newVersion="1.1.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Castle.MicroKernel" culture="neutral" publicKeyToken="407dd0808d44fbdc"/>
        <bindingRedirect oldVersion="1.0.3.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

所以我想我回答了我自己的问题，但我想与任何有同样问题的人分享。还是有更好的方法（除了自己编译 MVCContrib 源）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-22T02:36:15.343

我也想自己构建 MvcContrib，并将其源代码与我们的项目代码放在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-11-30T11:39:42.867

我们使用相同的方法。最后一个可用的 MvcContrib (v.2.0.96.0) 存在一个问题。它使用与最新版本的 Castel.Windsor (2.5.1.0) 不兼容的 Castel.Windsor v.2.1.0.0：AddComponentLifeStyle 已过时。因此，您将不得不更改相关的 MvcContrib 代码。

顺便说一句，您可以在不重建 MvcContrib dll 的情况下对其进行签名，例如使用此工具：[http ://signer.codeplex.com/](http://signer.codeplex.com/)

# c# - 使用 net tcp 的 WCF 双工服务：“需要流安全性...”

> ID：864917
> 
> 赞同：5
> 
> 时间：2009-05-14T18:23:33.537
> 
> 标签：c#, wcf, web-services, duplex

我正在编写一项服务，允许用户注册并在事件发生时接收通知。我正在尝试使用 netTcpBinding 执行此操作，但即使在我的本地计算机上运行时也会不断出现错误。

当我尝试发送通知时，我超时，收到此错误：

> [http://www.w3.org/2005/08/addressing/anonymous](http://www.w3.org/2005/08/addressing/anonymous)需要流安全，但没有协商安全上下文。这可能是由于远程端点在其绑定中缺少 StreamSecurityBindingElement 造成的。

为了进行测试，我将服务托管在控制台中，它正在为我打开，我可以看到 WSDL 并在其上运行 svcutil。但是，当我运行客户端并尝试发送通知时，就会出现上述错误。

主机 App.config：

```
<system.serviceModel>
<services>
  <service name="CompanyName.WebServices.InterventionService.RegistrationService"
           behaviorConfiguration="RegistrationServiceBehavior">
    <endpoint address="http://localhost:8000/CompanyName/Registration"
              binding="wsDualHttpBinding"
              contract="CompanyName.WebServices.InterventionService.Interfaces.IRegistrationService"/>
    <endpoint address="net.tcp://localhost:8001/CompanyName/Registration"
              binding="netTcpBinding"
              contract="CompanyName.WebServices.InterventionService.Interfaces.IRegistrationService"/>
  </service>
  <service name="CompanyName.WebServices.InterventionService.NotificationService"
           behaviorConfiguration="NotificationServiceBehavior">
    <endpoint address="http://localhost:8010/CompanyName/Notification"
              binding="wsDualHttpBinding"
              contract="CompanyName.WebServices.InterventionService.Interfaces.INotificationService"/>
    <endpoint address="net.tcp://localhost:8011/CompanyName/Notification"
              binding="netTcpBinding"
              contract="CompanyName.WebServices.InterventionService.Interfaces.INotificationService"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="RegistrationServiceBehavior">
      <serviceMetadata httpGetEnabled="true"
                       httpGetUrl="http://localhost:8000/CompanyName/Registration"/>
    </behavior>
    <behavior name="NotificationServiceBehavior">
      <serviceMetadata httpGetEnabled="true"
                       httpGetUrl="http://localhost:8010/CompanyName/Notification"/>
    </behavior>
    <behavior name="netTcpRegistrationServiceBehavior">
      <serviceMetadata httpGetEnabled="true"
                       httpGetUrl="net.tcp://localhost:8001/CompanyName/Registration"/>
    </behavior>
    <behavior name="netTcpNotificationServiceBehavior">
      <serviceMetadata httpGetEnabled="true"
                       httpGetUrl="net.tcp://localhost:8011/CompanyName/Notification"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

这是客户端 App.config：

```
<system.serviceModel>
<bindings>
  <netTcpBinding>
    <binding name="NetTcpBinding_IRegistrationService">
      <security mode="None">
        <message clientCredentialType="None"/>
        <transport clientCredentialType="None"/>
      </security>
    </binding>
    <binding name="NetTcpBinding_INotificationService">
      <security mode="None">
        <message clientCredentialType="None"/>
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </netTcpBinding>
  <wsDualHttpBinding>
    <binding name="WSDualHttpBinding_IRegistrationService">
      <reliableSession ordered="true"/>
      <security mode="None">
        <message clientCredentialType="None" negotiateServiceCredential="false"/>
      </security>
    </binding>
    <binding name="WSDualHttpBinding_INotificationService">
      <reliableSession ordered="true"/>
      <security mode="None">
        <message clientCredentialType="None" negotiateServiceCredential="false"/>
      </security>
    </binding>
  </wsDualHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:8000/GPS/Registration"
            binding="wsDualHttpBinding"
            bindingConfiguration="WSDualHttpBinding_IRegistrationService"
            contract="IRegistrationService"
            name="WSDualHttpBinding_IRegistrationService">
  </endpoint>
  <endpoint address="net.tcp://localhost:8001/GPS/Registration"
            binding="netTcpBinding"
            bindingConfiguration="NetTcpBinding_IRegistrationService"
            contract="IRegistrationService"
            name="NetTcpBinding_IRegistrationService">
  </endpoint>
  <endpoint address="http://localhost:8010/GPS/Notification"
            binding="wsDualHttpBinding"
            bindingConfiguration="WSDualHttpBinding_INotificationService"
            contract="INotificationService"
            name="WSDualHttpBinding_INotificationService">
  </endpoint>
  <endpoint address="net.tcp://localhost:8011/GPS/Notification"
            binding="netTcpBinding"
            bindingConfiguration="NetTcpBinding_INotificationService"
            contract="INotificationService"
            name="NetTcpBinding_INotificationService">
  </endpoint>
</client> 
```

我省略了很多注册码，因为我现在只是想让通知正常工作。

计划是在不属于客户域（他们的设置）的 2003 Server 中的 Windows 服务中托管它，并且客户端计算机将在客户的域中。

编辑：

我已将绑定添加到主机的 App.config：

```
<bindings>
  <netTcpBinding>
    <binding name="NetTcpBinding_IRegistrationService">
      <security mode="None">
        <message clientCredentialType="None"/>
        <transport clientCredentialType="None"/>
      </security>
    </binding>
    <binding name="NetTcpBinding_INotificationService">
      <security mode="None">
        <message clientCredentialType="None"/>
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </netTcpBinding>
  <wsDualHttpBinding>
    <binding name="WSDualHttpBinding_IRegistrationService">
      <reliableSession ordered="true"/>
      <security mode="None">
        <message clientCredentialType="None" negotiateServiceCredential="false"/>
      </security>
    </binding>
    <binding name="WSDualHttpBinding_INotificationService">
      <reliableSession ordered="true"/>
      <security mode="None">
        <message clientCredentialType="None" negotiateServiceCredential="false"/>
      </security>
    </binding>
  </wsDualHttpBinding>
</bindings> 
```

这仍然错误，与相同的 Steam Security is required 错误消息。在新解决方案中尝试此应用程序的一小部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-14T19:24:30.443

好吧，您的问题似乎是这样的：

*   在服务器端，您使用不带参数的默认 netTCP 绑定 - 您无需更改任何内容。netTCP 默认使用 Windows 凭据的传输级安全性

*   但是，在您的客户端上，您明确关闭了 netTCP 绑定上的任何安全性

所以两者不匹配，也不同意做什么。

您需要关闭两端的所有安全性 - 服务器和客户端 - 或者您只需要使用安全默认值（使用 Windows 凭据）。

马克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T16:06:21.943

我认为这是导致您进入许多不同方向的那些可怕的错误消息之一。对于这种情况，上述答案是正确的。我的情况不同 - 我的安全设置在客户端和服务上是相同的。

就我而言，此链接指出了我的特殊缺陷： http: [//www.netframeworkdevs.com/windows-communication-foundation-wcf/error-invoking-service-with-a-net-tcp-binding-123918.shtml](http://www.netframeworkdevs.com/windows-communication-foundation-wcf/error-invoking-service-with-a-net-tcp-binding-123918.shtml)。

我的端点服务端 app.config 具有`bindingName`命名绑定配置的属性...而不是`bindingConfiguration`. 我**认为**在`endpoint`.

所以......我的收获是，这个错误意味着“有一个 WCF 配置错误”可能会缩小到服务端配置。啊。

# ios - 在模拟器中运行而不是在设备上运行时进行条件编译

> ID：864920
> 
> 赞同：31
> 
> 时间：2009-05-14T18:23:51.383
> 
> 标签：ios, objective-c, iphone, ios-simulator, compiler-directives

当针对模拟器而不是我的设备时，是否有一个编译器指令可以用来编译不同的代码行。就像是：

```
# IF SIMULATOR
[self.imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
# ELSE
[self.imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
# END 
```

*编辑*

[直接链接到文档。](http://developer.apple.com/iPhone/library/documentation/Xcode/Conceptual/iphone_development/115-Configuring_Applications/configuring_applications.html#//apple_ref/doc/uid/TP40007959-CH19-SW3)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-05-14T19:57:05.170

```
#if TARGET_IPHONE_SIMULATOR
[self.imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
#else
[self.imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
#endif 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-14T21:03:41.530

**更新：（已弃用/过时）这只工作了几年，不再工作了。（10 多年后）**

作为记录，这是 Apple 在其一些官方示例代码中使用的另一种方法：

```
#if TARGET_CPU_ARM
  // Only executes on an iPhone or iPod touch device
  [self.imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
#else
  // Only executes on the Simulator
  [self.imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
#endif 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-31T20:16:35.863

对于那些寻找现代 Swift 解决方案的人来说，（新的）平台条件`targetEnvironment`在这里提供了明确的答案。例如：

```
#if targetEnvironment(simulator)
self.imagePicker.sourceType = .photoLibrary
#else
self.imagePicker.sourceType = .camera
#endif 
```

*目标环境平台条件*功能由[SE-0190](https://github.com/apple/swift-evolution/blob/master/proposals/0190-target-environment-platform-condition.md)引入，自**Swift 4.1**起可用。

# asp.net - HTML 输入标记什么时候回传？

> ID：864924
> 
> 赞同：4
> 
> 时间：2009-05-14T18:24:15.827
> 
> 标签：asp.net, html

我有几个带有 TextBox 控件的 asp.net 页面。其中一些在输入时回发（在 TextBox 控件内），而另一些则不回发。对于我的生活，我无法弄清楚为什么或为什么不......

我认为这与asp.net 没有任何关系。不使用 ajax 等。尝试玩一个非常简单的 html 页面，但仍然无法弄清楚。

也许在或不在 <form> 标签内？但是我所有的 asp:textbox 控件都在标准表单标签内，有些可以，有些不可以。据我所见，与自动回发无关。

编辑：

导致回发的示例标记：

```
<html>
<body>

<form>
<input type=text />
</form>

</body>
</html> 
```

我有 asp.net 页面，肯定不会回发。代码很广泛，我不知道为什么不。

编辑2：

如何防止回发？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T20:27:02.320

如果您只有一个文本框并且不希望出现这种行为，您总是可以在表单上放置一个隐藏的输入。

```
<html>
    <body>
        <form>
            <input type="text" ></input>
            <input type="text" style="visibility:hidden"></input>
        </form>
    </body>
</html> 
```

我已经在 IE7 和 FF3 中尝试过，它可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T18:38:44.983

通常大多数 Web 浏览器会检测表单何时只有一个文本框，并在按下 Enter 时自动提交表单。

如果您有多个文本框或多个表单按钮，则行为会有所不同。ASP.Net 具有按钮的“defaultButton”机制，这意味着您可以指定在按下回车键的情况下哪个按钮是给定面板的提交按钮。您可以查看[这篇文章](https://stackoverflow.com/questions/270494/enter-button-does-not-submit-form-ie-only-asp-net)以获取有关设置表单以正确回发的更多信息。

正如 Boo 所提到的，这不会由多行文本框触发。

如果您的表单在浏览器之间的行为真的很糟糕，您可能需要查看一个 javascript 解决方案来捕获按下的 enter 键，并通过 javascript“手动”提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T18:32:23.267

如果文本框控件设置为自动回发，它将在每次按键时回发（从而允许触发 TextChanged 事件）。

接下来，将 Multiline 属性设置为 false 的文本框将在 Enter 上显示为回发。实际发生的是由浏览器中的行为定义的表单提交。

将 Multiline 设置为 true 的框不会导致在 Enter 时提交表单。

# xcode - 在 XCode 中取消隐藏文档集

> ID：864931
> 
> 赞同：1
> 
> 时间：2009-05-14T18:25:48.913
> 
> 标签：xcode, macos

我以两种方式对我的 XCode Doc Set 进行了丰富的处理：

输入了错误的密码/名称，并且没有提示输入新密码（我会在稍后解决这个问题）

当我右键单击它时不小心点击了“隐藏文档集”，试图弄清楚如何重置名称/密码以尝试订阅。

去哪儿了？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T18:35:05.910

文档集列表的左下角是一个按钮，它会显示一个带有您正在寻找的选项的菜单。

# mesh - 三角网状拓扑

> ID：864933
> 
> 赞同：4
> 
> 时间：2009-05-14T18:26:01.783
> 
> 标签：mesh, connectivity, topology

我有一个三角形网格类，其中包含一个节点列表（在我的例子中是 2d，但这不重要）和一个面列表。每个面都是一个三角形，它只包含节点数组的索引。网格来自 Delaunay 算法，因此非常干净。

对于网格中的每个节点，我需要找到哪些节点通过一条边连接到它。构建和搜索此拓扑数据库的快速方法是什么？

非常感谢，大卫·鲁滕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-17T18:45:46.903

有两个有点标准的数据结构有助于网格拓扑查询。一种是[Winged Edges](http://en.wikipedia.org/wiki/Winged_edge)（通常也称为[half-edge](http://www.flipcode.com/archives/The_Half-Edge_Data_Structure.shtml)），另一种是[Directed Edges](http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=706ED2D461127D8DA3D567EB104EDC72?doi=10.1.1.31.4491&rep=rep1&type=pdf)。到处谷歌，你会得到无数的细节，以及每一个细节的不同层次的介绍。

对您的方案了解不足，无法推荐其中之一。例如，有向边是存储优化的，最适合非常大的网格。带翼的边缘被认为是“经典”，是更高级口味的良好起点。

实际上，如果您确定这是您需要的唯一查询，那么两者都是矫枉过正的，您只需使用一个哈希就可以了。但是，如果您发现自己需要对以下查询的有效答案 -

*   哪些面使用这个顶点？
*   哪些边使用这个顶点？
*   哪些面与此边缘接壤？
*   哪些边与这张脸接壤？
*   哪些面与这张脸相邻？

您应该考虑深入其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T18:40:53.947

我想我对哈希表、字典和排序列表视而不见……以下可能是最简单和最快的：

```
Public Sub SolveConnectivity(ByVal nodes As Node2List, ByVal faces As List(Of Face))
  m_map = New List(Of List(Of Int32))(nodes.Count)

  'Create blank lists
  For i As Int32 = 0 To nodes.Count - 1
    m_map.Add(New List(Of Int32)(6))
  Next

  'Populate connectivity diagram
  For i As Int32 = 0 To faces.Count - 1
    Dim F As Face = faces(i)
    m_map(F.A).Add(F.B)
    m_map(F.A).Add(F.C)

    m_map(F.B).Add(F.A)
    m_map(F.B).Add(F.C)

    m_map(F.C).Add(F.A)
    m_map(F.C).Add(F.B)
  Next
End Sub 
```

# ajax - 在 javascript 中，如何从另一个基于 cookied 的 sessionId 唯一地识别一个浏览器窗口

> ID：864942
> 
> 赞同：32
> 
> 时间：2009-05-14T18:27:56.567
> 
> 标签：ajax, persistence, state

我的 Web 应用程序的用户可能打开了多个浏览器窗口并指向同一页面。我希望在回发中保留页面中某些事物的状态（通过 ajax 加载）。我既可以存储在 cookie 中，也可以存储在我的服务器上。无论哪种方式，我都想不出如何区分每个窗口。

例如，假设用户 Bob 有两个浏览器窗口打开到 ListOfSomething 页面。每个列表都有一个我需要保留的*LoadedPageNumber属性。*否则，用户在刷新时总是在第 1 页结束。Bob 可能已加载浏览器窗口 1 并将其指向第 5 页，然后加载浏览器窗口 2 并将其指向第 14 页。如果我仅根据会话 id 存储属性，则 Bob 将在窗口 1 中刷新第 14 页。

请注意，我的状态变量实际上比这个简单的示例要复杂得多，我无法持久化它们可能会导致大问题（我的应用程序中的弱点）。

我需要某种浏览器窗口 ID 或其他东西。当然需要是跨浏览器的解决方案（IE6+, Wekbit?+, FF2+）

有任何想法吗？

关于相关性的注意事项：请记住，这对于您将基于旧表单的页面与启用了 AJAX 的新项目混合的情况也很有用。有时您需要回发表单并且您不想丢失一些客户端状态值。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-14T18:34:50.653

您可以设置自己的窗口名称，确切的语法现在让我无法理解，但是您可以使用当前时间和会话 id 在窗口加载时创建一个唯一的 id，然后使用该 id

这将与您在 javascript window.open() 函数中设置名称的方式相同，（但您可以对自己执行此操作，而不是新窗口）

谷歌搜索显示：

self.window.name = myclass.getUniqueWindowId(thisSession);

### 更新

关于您需要将其从刷新保存到刷新，我做了一些测试，它看起来将其从刷新保存到刷新。使用 Firefox 3，在初始加载时，窗口名称为空白，并反复按 CTRL+R，然后填充窗口名称。然后我注释掉了设置名称代码并重新加载，它仍然保留了名称。

```
<script type="text/javascript">

    alert( self.window.name );

    self.window.name = "blah";

</script> 
```

### 更新

我必须注意到下面关于 jQuery 的 'jquery-session' 插件的评论，它确实有效并且提供的方式比这里讨论的要多。

**虽然**，还应该明确表示它依赖于 HTML5 的 Web 存储，旧 IE版本**不支持。**

企业仍然严重依赖 IE 7（在巴西这里是“及以下”）。

基于`self.window.name`，所有不符合 HTML5 的解决方案，我提供以下代码片段作为跨浏览器解决方案：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script language="javascript" type="text/jscript">
    //----------------------------------------------------------------------
    //-- guarantees that window.name is a GUID, and that it would
    //-- be preserved whilst this window's life cicle
    //----------------------------------------------------------------------
    //-- window.name will be set to "GUID-<SOME_RANDOM_GUID>"
    //----------------------------------------------------------------------

    $(window).load(
        function () {
            //----------------------
            var GUID = function () {
                //------------------
                var S4 = function () {
                    return(
                            Math.floor(
                                    Math.random() * 0x10000 /* 65536 */
                                ).toString(16)
                        );
                };
                //------------------

                return (
                        S4() + S4() + "-" +
                        S4() + "-" +
                        S4() + "-" +
                        S4() + "-" +
                        S4() + S4() + S4()
                    );
            };
            //----------------------

            if (!window.name.match(/^GUID-/)) {
                window.name = "GUID-" + GUID();
            }
        }
    ) //--------------------------------------------------------------------
</script> 
```

[我在这里](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)找到了 GUID 函数（为此我提出了一些代码清理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-16T13:53:02.847

您可以使用 HTML5 会话存储，只需生成一个唯一的 id 并将其设置在会话存储上！每个窗口或选项卡都有自己的会话存储，这很酷。例如 ：

如果我们在 3 个窗口上运行以下命令：

窗口 1： `sessionStorage.setItem('key' , 'window1');`

窗口 2： `sessionStorage.setItem('key' , 'window2');`

窗口 3： `sessionStorage.setItem('key' , 'window3');`

`sessionStorage.getItem('key' );`<<< 这将在窗口上返回相应的值！

窗口 1： `sessionStorage.getItem('key' );`返回窗口 1

窗口 2： `sessionStorage.getItem('key' );`返回窗口 2

窗口 3： `sessionStorage.getItem('key');`返回窗口 3

我相信您正在尝试保存一个变量（分别在每个选项卡/窗口上）。

sessionStorage 很有魅力。

您可能面临的唯一问题是浏览器应该支持 HTML 5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T18:36:14.457

让您的服务器随机生成一个 ID 并在提供该 ID 时将其存储在页面（一些 javascript 变量）中怎么样？然后只需在 ajax 请求中包含该 ID。它不会帮助刷新浏览器，但只要用户将该页面留在原处（并且只是让 ajax 的东西做它的事情）它应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-29T14:00:09.953

很久以前了，但是今天Roy Rico的回答对我有帮助，所以我想分享一下我的经验。为了处理页面刷新和页面后退按钮的使用，我这样做：

*   您的服务器检查浏览器是否将 GUID 与他的请求一起发送（仅适用于 ajax 或表单提交）
*   如果它不存在（浏览器刷新、后退按钮），它只会发回一个带有小 JavaScript 脚本的页面。此脚本创建 GUID 并将其放入 window.name 存储中，如上所述。之后，脚本创建一个带有 GUID 作为隐藏字段的表单并将其提交给服务器。action 属性使用与之前相同的 URL (window.location.href)

--> 现在服务器识别 GUID 并可以根据需要传递内容。

这是我的代码（出于安全原因，我在服务器上创建的 GUID，语法“${gUid} 来自 freemarker，只是从服务器插入 Guid）：

```
<script>
    $(window).load(
        function () {
            if (!window.name.match(/^GUID-/)) {
                window.name = "GUID-" + "${gUid}";
            }
            $('<form action='+window.location.href+' method="POST"><input type="hidden" name="X-GUID" id="X-GUID" value='+window.name+'></form>').appendTo('body').submit();
        }
    );  
</script> 
```

希望对某人有所帮助

顺便说一句，这种技术应该只用于“非 SEO 页面”，因为需要 JavaScript 来获取内容。但一般来说，SEO 页面不需要识别标签会话。

当然现在你可以使用 HTML5 会话存储，但我不想依赖它，因为我还需要旧版浏览器才能正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-13T09:34:59.427

window.name 可以被自定义 javascript 库、日期时间选择器等覆盖。

而不是 window.name 我建议您使用 DOM 头元标记来存储您的 id

```
<html><head><meta id="windowID" content="{YOUR ID}"> 
```

页面加载后，您必须在该窗口中通过 ajax 加载所有内容，然后您可以将此 ID 作为标头（或数据）值附加到每个请求。例如在 JQuery 中使用以下代码：

```
$(document)
    .ajaxSend(function(event, jqXHR, ajaxOptions) {
        jqXHR.setRequestHeader('windowID',
            document.getElementById('windowID').content);
}) 
```

要使用此解决方案，您必须有权访问服务器端的自定义标头值。例如在 Java servlet 中：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String windowName = request.getHeader("windowID"); 
```

如果您将分页、排序、过滤等信息存储在服务器端作为会话属性，您应该将它们单独存储到单独的窗口 ID-s。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-04T16:23:03.913

事实上，使用新的[Web Locks API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Locks_API)，您可以获得实际的内部窗口 ID（又名`clientId`）。`LockManager.query()`可以提供有关持有锁的信息，包括所有者的 ID。由于安全限制，可能无法在某些 iframe 上下文中工作，但在顶部窗口中通常应该是好的。

```
function getCurrentWindowId() {
    return new Promise((resolve) => {
        let lockName;
        tryGetLock(); // one attempt should almost always be enough

        function tryGetLock() {
            // generate some random lock name
            lockName = 'get-self-id-' + (Math.random() * 0xffffffff >>> 0);
            navigator.locks.request(lockName, { mode: 'exclusive', ifAvailable: true }, withLock);
        }

        function withLock(lock) {
            // unsing setTimeout(0) here to execute client's code after releasing the lock
            if (lock)
                return navigator.locks.query()
                    .then(({ held }) => held.find(lock => lock.name === lockName).clientId)
                    .then(clientId => setTimeout(resolve, 0, clientId));
            else {
                // unlucky - just try another lock
                setTimeout(tryGetLock, 0);
                return Promise.resolve();
            }
        }
    });
}

//usage

getCurrentWindowId().then(clientId => {
   // do something with id
}); 
```

*可在 Firefox 96 和 Chrome 97 中运行。为了获得应该*随时可用的信息而做出如此笨拙的结构感觉很丢脸。

# c# - 更新标签 C#

> ID：864949
> 
> 赞同：1
> 
> 时间：2009-05-14T18:29:22.417
> 
> 标签：c#, asp.net

当页面第一次加载时，我有一个 0 或 1 的标签。查看代码，您将了解我想要做什么。但它不起作用，因为页面已经加载。

```
protected void rptBugStatus_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Label lblName = e.Item.FindControl("lblBugStatus") as Label;
            if (lblName.Text == "1")
            {
                lblName.Text = lblName.Text + "Under arbete";
            }
            else if (lblName.Text == "0")
            {
                lblName.Text = "Fixad";
            }
            else { }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:35:31.793

如果可能的话，你真的想避免这种类型的编码。这将迅速成长为一个不可维护的网站。

查询底层数据而不是 GUI 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-14T15:30:26.990

好的，我假设您已将此标签（假设在中继器中，来自您的代码）设置为具有值 - 我已尝试使用以下代码将数据绑定到完全相同的东西。

```
protected override void OnPreRender(EventArgs e)
{
    base.OnLoad(e);
    List<string> strList = new List<string>();
    strList.Add("1");
    rptBugStatus.DataSource = strList;
    rptBugStatus.DataBind();
}

protected void rptBugStatus_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Label lblBugStatus = e.Item.FindControl("lblBugStatus") as Label;
        // have added this just so we are actually setting the text property on the bug status
        // - i have assumed you do this.
        lblBugStatus.Text = e.Item.DataItem.ToString();

        if (lblBugStatus.Text.Equals("1"))
        {
            lblBugStatus.Text = lblBugStatus.Text + "Under arbete";
        }
        else if (lblBugStatus.Text.Equals("0"))
        {
            lblBugStatus.Text = "Fixad";
        }
    }
} 
```

随着 aspx 是

```
 <asp:Repeater runat="server" ID="rptBugStatus" OnItemDataBound="rptBugStatus_ItemDataBound">

    <ItemTemplate>
        <asp:Label ID="lblBugStatus" runat="server"></asp:Label>
    </ItemTemplate>
    </asp:Repeater> 
```

我没有问题。

*   我在页面上得到以下内容。

1下

如果您对我们隐藏了任何代码，我认为您将需要发布更多代码:)

蒂姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T22:50:48.487

您现在可能已经解决了这个问题，但我认为您发布的代码的问题是：

```
Label lblName = e.Item.FindControl("lblBugStatus") as Label; 
```

因为您正在引用转发器中的控件，所以每个转发器项内的控件都根据它们的上下文动态命名。控件的名称很可能类似于：

“rptBugStatus$repeaterItem0$lblBugStatus”

要找出确切的名称，硬编码一个值，在浏览器中运行页面，然后查看 HTML 输出（通过浏览器菜单中的“查看源代码”）。您应该能够向下滚动并查看您的转发器（它将呈现为一个`<table>`标签）、它的项目以及位于每个项目内的控件。ID/名称将被设置，您可以将它们复制/粘贴到您的 FindControl 方法中。

希望这可以帮助，

内特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T18:43:32.443

精细控制就可以了。但我想出了另一种方法来获取我想要的数据。我要做的是更好地修复 xml 结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T18:31:40.523

你把你的代码放在哪里？并且要小心`e.Item.FindControl("lblBugStatus") as Label;`可能会返回 null

# python - 在 virtualenv 中使用鼻子的问题

> ID：864956
> 
> 赞同：47
> 
> 时间：2009-05-14T18:30:15.657
> 
> 标签：python, virtualenv, nose, nosetests

我无法在 virtualenv 项目中使用鼻子（nosetests） - 它似乎无法找到安装在 virtualenv 环境中的包。

奇怪的是我可以设置

```
test_suite = 'nose.collector' 
```

在 setup.py 并运行测试就好了

```
python setup.py test 
```

但是当直接运行nosetests时，会出现各种导入错误。

我已经尝试过在系统范围内安装鼻子和 virtualenv 鼻子包，但没有运气。

有什么想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2011-05-07T02:35:46.013

您需要在虚拟环境中安装鼻子的副本。为了强制将nose安装到virtualenv中，即使它已经安装在全局站点包中，也可以`pip install`使用以下`-I`标志运行：

```
(env1)$ pip install nose -I 
```

从那时起，您可以`nosetests`像往常一样运行。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-05-14T18:32:54.263

你能跑`myenv/bin/python /usr/bin/nosetests`吗？那应该使用虚拟环境的库集运行 Nose。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-17T21:54:09.570

在同样的情况下，我需要重新加载`virtualenv`路径才能正确更新：

```
deactivate
env/bin/activate 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2011-03-23T18:35:21.053

我遇到了类似的问题。以下解决方法有帮助：

```
python `which nosetests` 
```

（而不仅仅是`nosestests`）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-14T20:59:22.493

这对我有用：

```
$ virtualenv --no-site-packages env1
$ cd env1
$ source bin/activate            # makes "env1" environment active,
                                 # you will notice that the command prompt
                                 # now has the environment name in it.

(env1)$ easy_install nose        # install nose package into "env1" 
```

我创建了一个非常基本的包`slither`，它的属性与您上面提到的`setup.py`相同。`test_suite`然后我将包源放在`env1/src`.

如果你往里面看`env1/src`，你会看到：

```
slither/setup.py
slither/slither/__init__.py
slither/slither/impl.py          # has some very silly code to be tested
slither/slither/tests.py         # has test-cases 
```

我可以使用`test`子命令运行测试：

```
(env1)$ pushd src/slither
(env1)$ python setup.py test
# ... output elided ...
test_ctor (slither.tests.SnakeTests) ... ok
test_division_by_zero (slither.tests.SnakeTests) ... ok
Ran 2 tests in 0.009s
OK
(env1)$ popd 
```

或者，我可以使用以下命令运行相同的测试`nosetests`：

```
(env1)$ pushd src
(env1)$ nosetests slither/
..
Ran 2 tests in 0.007s
OK
(env1)$ popd 
```

另请注意，`nosetests`对可执行文件可能很挑剔。`--exe`如果您希望它发现可执行的 python 模块中的测试，您可以通过。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-24T00:51:41.037

如果一切都失败了，请尝试在您的 venv 中安装鼻子，和/或运行`nosetests-2.7`. 如果您的 venv python 为 2.7，我相信@andrea-zonca 的答案具有相同的效果

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-09-07T01:55:32.053

也许这是最近的变化，但对我来说，当我通过 pip 安装 nosetests 时，安装了一个 nosetests 可执行文件`.virtualenvs/<env>/bin`，它（不出所料）与 virtualenv 一起正常运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-06T17:18:33.527

你可能有一个`nosetests`安装在你的其他地方，`PATH`其优先级高于安装在你的 virtualenv 中的那个。将安装在当前 virtualenv 中的`nose`模块和相关脚本置于最高优先级的一种快速方法是编辑您的：`nosetests``PATH`

```
export PATH=/path/to/current/virtualenv/bin:$PATH 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-16T18:21:15.403

晚会迟到了。

*无论如何，如果您在 2021 年看到这一点……* 对我来说，这些问题是通过将我的 Virtual Envs 更新到至少 Python 3.8.2 来解决的。

# c# - 列出处理指定文件类型的所有应用程序

> ID：864966
> 
> 赞同：0
> 
> 时间：2009-05-14T18:32:44.810
> 
> 标签：c#, windows, associations, file-type

是否可以仅使用文件扩展名列出机器上可以打开特定文件类型的所有应用程序？例如，如果我有一个文本文件 (.txt)，我想要一个可以打开 .txt 文件的所有应用程序的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T18:37:48.713

查看`HKEY_CLASSES_ROOT`注册表中的配置单元。都在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T18:35:51.043

我知道，没有可以打开特定文件的每个应用程序的主列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T18:38:39.337

我假设您在谈论Windows机器...

您只能列出已注册的应用程序必须能够处理特定文件扩展名（当您右键单击并选择“打开方式”时显示的相同应用程序）。这是 Windows 注册表中的某个位置。

我建议您查看 microsoft 文档，或打开您的注册表并开始搜索已知的扩展。

# .net - .NET 的 OSGi 实现

> ID：864974
> 
> 赞同：5
> 
> 时间：2009-05-14T18:34:57.550
> 
> 标签：.net, plugins, osgi

是否有实现 .NET 版本的 OSGi 插件架构（或类似的东西）的工作？我只找到[了这篇](http://www-adele.imag.fr/Les.Publications/intConferences/CCNC2006Esc.pdf)论文，但没有找到真正的图书馆。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T22:18:45.187

我对 OSGi 了解不多，但您应该看看[Managed Extensibility Framework](http://www.codeplex.com/MEF)项目。我相信它提供了 OSGi 的一些功能子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:15:09.557

是的，有一个名为[UIOSP（XAUI Open Service Platform）](http://uishell.com/ProductShow.asp?ID=94)的商业产品，它是中国一家初创软件公司西安UI基于OSGi规范R4实现的.NET。嗯，现在只有中文版了。您可以尝试通过电子邮件（uishell@uishell.com）联系。

# java - 在 Web 应用程序中部署模块

> ID：864981
> 
> 赞同：0
> 
> 时间：2009-05-14T18:36:04.317
> 
> 标签：java, deployment, web-applications, tomcat, war

我有一个 Web 应用程序 - 部署在 Tomcat 上。

它有两个模块模块 A 和模块 B

两者都有 java 代码以及 UI 组件（struts\JSP 等）

在功能上，模块 A 是独立的，不依赖于模块 B 对于模块 A：我们为模块 A 创建一个战争并将其部署为 ModuleA.war

现在模块 B 依赖于模块 A 我们将两个模块“合并”到 ModuleB.war 这涉及将 Web 内容目录合并为一个

我们对整个合并过程感到不舒服，想知道是否有一种聪明的方法可以做到这一点？我们也在考虑将所有 Web 内容放在其中一个模块中 - 比如说模块 A，然后将 java 代码保留在模块 B 中

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-20T13:25:07.983

这是java问题之一。假设您的应用 A 是公共网站，假设您的应用 B 是您的管理员，但使用相同的数据库、相同的 bizlogic 类等。我一直发现这个问题。我的方法可能会对你有所帮助。

模块 A 将具有仅与项目 A 相关的类 模块 B 将具有仅与项目 B 相关的类 mod A 和 B 将共享一个包含所有相关类的 .jar 文件，您可以将其部署在 TOMCAT/lib 中，或者如果您想维护它单独部署在每个应用程序 MYAPP/WEB-INF/lib

# javascript - 如何滚动显示网页的一部分

> ID：864984
> 
> 赞同：1
> 
> 时间：2009-05-14T18:36:14.083
> 
> 标签：javascript, dynamic, scroll, browser

除了锚点之外，您可以使用*JavaScript*在 Web 浏览器中控制/读取滚动条的不同方式是什么？-- 除非您可以动态创建锚点并告诉浏览器向下滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:43:03.210

[这是一个](http://www.sitepoint.com/article/preserve-page-scroll-position/)如何在没有锚点的情况下控制 X/Y 滚动的示例。（滚动X/滚动Y）

我想的关键部分如下

```
function saveScrollCoordinates() { 
  document.Form1.scrollx.value = (document.all)?document.body.scrollLeft:window.pageXOffset; 
  document.Form1.scrolly.value = (document.all)?document.body.scrollTop:window.pageYOffset; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T18:43:34.487

要滚动任意数量：

```
//Parameters being the amount by which to scroll in pixels (horizontal and vertical)
window.scrollBy(50, 50); 
```

滚动到某个点：

```
 window.scrollTo(0, 30); 
```

读取当前位置：

```
 document.body.scrollLeft
 document.body.scrollTop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T18:45:19.507

使用该**`scrollTop`**属性（所有元素的固有属性），您可以滚动到特定的像素高度。因此，滚动到特定锚点的高度将涉及查询该锚点的偏移量并进行**`scrollTop`**相应设置。只是为了说明；这是使用 jQuery 滚动到指定元素的方式：

```
var top = $('div#something').offset().top;
$(document).scrollTop(top); 
```

**注意**：jQuery 的实现可能会产生误导；它接受但实际上具有该属性**`document`**的最顶层元素是（通常指）。**`scrollTop`****`document.documentElement`****`<HTML>`**

还有一个**`scrollLeft`**用于水平滚动的属性。

当然，您可以阅读以下属性：

```
var currentScrollTop = document.documentElement.scrollTop; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T18:46:26.180

Prototype[实现](http://www.prototypejs.org/api/element/scrollto)了一个`scrollTo()`函数，可以很容易地滚动到特定元素：

```
$("#elementID").scrollTo(); 
```

该实现在内部调用`window.scrollTo`以进行实际滚动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-13T00:24:57.110

```
var coord = {top:null,left:null,width:null,height:null};
        if (typeof window.pageYOffset == 'number') {
            coord.top = window.pageYOffset; coord.left = window.pageXOffset;            
        } else if (document.body && (document.body.scrollLeft || document.body.scrollTop)) {
            coord.top = document.body.scrollTop; coord.left = document.body.scrollLeft;
        } else if (document.documentElement && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {
            coord.top = document.documentElement.scrollTop; coord.left = document.documentElement.scrollLeft;
        }

        if (typeof window.innerWidth == 'number') {
            coord.width = window.innerWidth; coord.height = window.innerHeight;
        } else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
            coord.width = document.documentElement.clientWidth; coord.height = document.documentElement.clienthHeight; 
        } else if(document.body && (document.body.clientWidth || document.body.clientHeight)) {
            coord.width = document.body.clientWidth;
            coord.height = document.body.clientHeight;
        } 
```

# plsql - 使用 PL/SQL，将大量数据发送到客户端代码有哪些好的选择？

> ID：864999
> 
> 赞同：0
> 
> 时间：2009-05-14T18:38:46.497
> 
> 标签：plsql, large-data-volumes

使用 PL/SQL，将大量数据发送到客户端代码有哪些好的选择？

详细地说，服务器端 PL/SQL 对请求进行操作并生成包含大量数据的响应，这些数据必须发送到客户端代码。发送大量数据是否有“好的选择”？这里需要考虑哪些类型的 Oracle 优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T19:10:02.100

当您想要返回大量数据时，您遇到的两个问题是：

*   带宽问题
*   内存问题（在服务器和客户端）

如果可能，您应该尝试流式传输数据，而不是一次全部返回。您将占用相同的带宽，但峰值使用量较少，并且可以防止内存问题（至少在服务器上，这取决于您的客户端实现如何使用那里的内存）。

Oracle 通过[流水线函数](http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14289/dcitblfns.htm)提供流式支持。[您可以在此处](http://www.codeguru.com/cpp/data/mfc_database/oracle/article.php/c4285)和[此处](http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28425/pipelined_example.htm)找到示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T18:44:34.610

没有好的选择，总是尽量向客户端发送最少量的数据。您的数据库和网络将感谢您！

如果您可以随时间发送小块，那将比一次倾倒所有内容更好。*******