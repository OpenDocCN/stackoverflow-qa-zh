# StackOverflow 问答 000107000-000107999

# database - 预测下一个自动插入的行 ID (SQLite)

> ID：107005
> 
> 赞同：20
> 
> 时间：2008-09-20T03:45:26.007
> 
> 标签：database, sqlite

我正在尝试查找是否有可靠的方法（使用[SQLite ）在插入](http://en.wikipedia.org/wiki/SQLite)*之前*找到要插入的下一行的 ID 。我需要将 id 用于另一个插入语句，但没有立即插入和获取下一行的选项。

预测下一个 id 是否像获取最后一个 id 并添加一个一样简单？那是保证吗？

编辑：多一点推理......我不能立即插入，因为插入可能最终被用户取消。用户将进行一些更改，将存储 SQL 语句，然后用户可以从那里保存（一次插入所有行）或取消（不更改任何内容）。在程序崩溃的情况下，所需的功能是没有任何改变。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2011-03-14T17:10:27.640

试试`SELECT * FROM SQLITE_SEQUENCE WHERE name='TABLE';`。这将包含一个名为`seq`该字段的字段，该字段是所选表的最大数字。将此值加 1 以获得下一个 ID。

另请参阅[SQLite Autoincrement 文章](http://www.sqlite.org/autoinc.html)，这是上述信息的来源。

干杯!

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-20T04:32:51.757

一次性取消或提交一系列数据库操作正是事务的用途。`BEGIN;`在用户开始摆弄之前和`COMMIT;`他/她完成后查询。您可以保证所有更改都已应用（如果您提交）或所有内容都已报废（如果您查询`ROLLBACK;`，如果程序崩溃，断电等）。从数据库中读取数据后，您还可以保证数据在事务结束之前是良好的，因此您可以抓取`MAX(id)`或获取任何您想要的内容，而不必担心竞争条件。

[http://www.sqlite.org/lang_transaction.html](http://www.sqlite.org/lang_transaction.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-20T04:03:16.867

[在某些条件下，您可能可以在sqlite3_last_insert_rowid](http://sqlite.org/c3ref/last_insert_rowid.html)返回的值上加 1 ，例如，使用相同的数据库连接并且没有其他并发写入者。当然，您可以参考 sqlite 源代码来支持这些假设。

但是，您也可以认真考虑使用不需要预测下一个 ID 的不同方法。即使您使用的 sqlite 版本正确，将来也可能会发生变化，并且肯定会使迁移到不同的数据库变得更加困难。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-20T04:04:29.173

插入带有某种 INVALID 标志的行，获取 ID，根据需要对其进行编辑，如有必要，删除或标记为有效。那并且不用担心序列中的间隙

顺便说一句，你需要弄清楚如何自己做无效的部分。根据具体情况，将某些内容标记为 NULL 可能会起作用。

*编辑：*如果可以，请使用 Eevee 的使用正确交易的建议。工作量少了很多。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-03T21:02:33.827

我意识到您使用 SQLite 的应用程序很小，而且 SQLite 有自己的语义。此处发布的其他解决方案很可能会在此特定设置中产生您想要的效果，但在我看来，到目前为止我读过的每一个解决方案基本上都是不正确的，应该避免。

在正常环境中，应不惜一切代价避免为用户输入进行交易。如果您需要存储中间数据，处理此问题的方法是为此目的将信息写入临时表，然后尝试将所有信息写入原子事务中。在多用户环境中，持有事务会导致死锁和并发噩梦。

在大多数环境中，您不能假设在事务中通过 SELECT 检索的数据是可重复的。例如

```
SELECT Balance FROM Bank ...
UPDATE Bank SET Balance = valuefromselect + 1.00 WHERE ... 
```

在 UPDATE 之后，余额的值很可能会发生变化。有时您可以通过在事务中首先更新您对 Bank 感兴趣的行来解决此问题，因为这可以保证锁定该行，防止进一步更新更改其值，直到您的事务完成。

但是，有时在这种情况下确保一致性的更好方法是检查您对更新的 WHERE 子句中数据内容的假设并检查应用程序中的行数。在上面的示例中，当您“更新银行”时，WHERE 子句应提供余额的预期当前值：

```
WHERE Balance = valuefromselect 
```

如果预期余额不再匹配 WHERE 条件 - UPDATE 不执行任何操作，并且 rowcount 返回 0。这告诉您存在并发问题，并且您需要再次重新运行操作，而其他东西没有尝试更改您的数据同时。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-11-23T00:22:41.283

```
select max(id) from particular_table is unreliable for the reason below.. 
```

[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)

“只要您从不使用最大 ROWID 值并且您从不删除表中具有最大 ROWID 的条目，上述常规 ROWID 选择算法将生成单调递增的唯一 ROWID。如果您曾经删除行或曾经创建行使用最大可能的 ROWID，则在创建新行时可能会重用以前删除的行中的 ROWID，并且新创建的 ROWID 可能不会严格按升序排列。”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T03:50:23.247

我认为这无法完成，因为无法确保在您询问和插入之间不会插入任何内容。（您可能可以将表格锁定为插入，但 Yuck）

顺便说一句，我只使用了 MySQL，但我认为这不会有任何区别）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-20T03:50:26.803

您很可能应该能够 +1 最近的 id。我会查看有序表中现有 ID 的所有（回溯一段时间）。它们是否一致，每一行的 ID 是否比最后一个多一个？如果是这样，你可能会没事的。但是，我会在代码中留下注释来解释该假设。执行锁定将有助于确保您在执行此操作时不会获得额外的行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-20T03:50:43.247

选择 last_insert_rowid() 值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-20T04:55:11.487

本主题中需要说明的大部分内容都已经包含......**但是，在执行此操作时要非常小心竞争条件**。如果两个人都打开了您的应用程序/网页/任何内容，其中一个人添加了一行，另一个用户将尝试插入具有相同 ID 的行，您将遇到很多问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-03-08T13:03:43.990

```
select max(id) from particular_table; 
```

下一个 id 将是最大 id 的 +1。

# rootkit - 检测并删除 Rootkit

> ID：107017
> 
> 赞同：2
> 
> 时间：2008-09-20T03:51:09.393
> 
> 标签：rootkit

什么是最好的（希望是免费的或便宜的）检测方法，然后，如有必要，删除您机器上发现的 rootkit？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T04:31:43.693

SysInternals 几年前停止更新 RootKit Revealer。

检测 rootkit 的唯一可靠方法是从已知文件及其参数的受信任列表中对已安装文件和文件系统元数据进行离线比较。显然，您需要信任运行比较的机器。

在大多数情况下，对大多数人来说，使用引导 cdrom 运行病毒扫描程序就可以解决问题。

否则，您可以从全新安装开始，从 cdrom 启动，连接外部驱动器，运行 perl 脚本以查找和收集参数（大小、md5、sha1），然后存储参数。

要检查，请运行 perl 脚本来查找和收集参数，然后将它们与存储的参数进行比较。

此外，您需要一个 perl 脚本来在系统更新后更新您存储的参数。

--编辑--更新它以反映可用的技术。如果您获得带有程序“chntpasswd”的最新副本的任何可引导救援 CD（例如 trinity 或救援 CD）的副本，您将能够离线浏览和编辑 Windows 注册表。

再加上来自 castlecops.com 的启动列表副本，您应该能够找到最常见的 rootkit 的最常见的运行点。并始终跟踪您的驱动程序文件以及好的版本。

有了这种级别的控制，您最大的问题将是在您删除 rootkit 和木马后，您的注册表会变得一团糟。通常。

-- 编辑 -- 还有 windows 工具。但我描述了我熟悉的工具，这些工具是免费的，并且有更好的文档记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T03:54:40.757

来自 SysInternals 的[Rootkit揭示器](http://live.sysinternals.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T08:38:37.377

请记住，您**永远不能信任**受感染的机器。您可能认为您找到了 rootkit 的所有迹象，但攻击者可能在其他地方创建了后门。您使用的工具无法检测到的非标准后门。通常，您应该**从头开始重新安装受感染的机器。**

# sharepoint - 是否有 SharePoint XSLT 扩展功能的参考？

> ID：107018
> 
> 赞同：9
> 
> 时间：2008-09-20T03:51:43.587
> 
> 标签：sharepoint, xslt, rss, web-parts, dataview

我看到在开箱即用的 SharePoint Web 部件（RSS 查看器和数据视图 Web 部件）中使用了几个不同的 .NET XSLT 函数。

```
<xsl:stylesheet
    xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime"  
    xmlns:rssaggwrt="http://schemas.microsoft.com/WebParts/v3/rssagg/runtime"
    ...>
    ...
    <xsl:value-of select="rssaggwrt:MakeSafe($Html)"/>  
    <a href="{ddwrt:EnsureAllowedProtocol(string(link))}">More...</a>
    ...
</xsl:stylesheet> 
```

在哪里可以找到描述 SharePoint 提供的所有扩展功能的参考资料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T17:56:52.230

我也一直想要更多关于 ddwrt 的信息。我能找到的最多信息来自 Serge van den Oever，后来变成了上一个答案中引用的 MSDN 文章。

[http://weblogs.asp.net/soever/archive/2005/01/03/345535.aspx](http://weblogs.asp.net/soever/archive/2005/01/03/345535.aspx)

正如他在他的博客文章中所指出的，这篇文章包含一些在 MSDN 文章中被审查的信息。

除了这篇文章，关于这个话题的文章很少。不幸的是，搜索现有的生成代码（例如 DataForm Web 部件中的 xsl）似乎是目前了解更多信息的最佳技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T03:53:00.433

这是我发现的一些描述 ddwrt ( [http://schemas.microsoft.com/WebParts/v2/DataView/runtime](http://schemas.microsoft.com/WebParts/v2/DataView/runtime) ) 命名空间的文档。

[http://msdn.microsoft.com/en-us/library/aa505323.aspx](http://msdn.microsoft.com/en-us/library/aa505323.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-10T18:24:30.003

好问题+1

也可以看看

[ddwrt 命名空间中的 SharePoint 数据视图 Web 部件扩展功能 作者](http://msdn.microsoft.com/en-us/library/dd583143%28office.11%29.aspx) ：Serge van den Oever

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-06T15:31:10.783

Serge 的文章指向 Microsoft.SharePoint，您可以在其中找到 Microsoft.SharePoint.WebPartPages 命名空间。在那里，您可以找到 DdwRuntime 和 BaseDdwRuntime。在那里，您可以找到所有 ddwrt 函数。我使用反编译器来查找它。

# iphone - 如何让一个简单的网站在多个移动浏览器上正确呈现？

> ID：107049
> 
> 赞同：4
> 
> 时间：2008-09-20T04:04:34.337
> 
> 标签：iphone, blackberry, mobile, ie-mobile

我们有一个相当简单的网站（最小的 JS），带有纯 html 和 CSS。它是我们主要应用程序的简单移动界面。

我们遇到了麻烦，因为我们有不止一列，而且几个浏览器似乎强制使用单列。

通过一些搜索，我遇到了 2 个元标记。

```
<meta name="MobileOptimized" content="220" />
<meta name="viewport" content="width=320" /> 
```

有了这些，我们对 IE Mobile 和 iPhone 有了一个很好的“缩放”视图。我们还没有遇到 palm 的 Blazer 的任何问题。但黑莓是另一回事。

黑莓是否也有一种简单的方法来控制浏览器的视图？简单地说，我的意思是不为该设备制作特殊页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-20T06:20:28.567

我的建议是创建两个或三个版本的网站：

*   现代桌面浏览器的完整站点（如果它是一个非常繁重的应用程序）
*   具有极少 JS 和 CSS 的网站，适用于优秀的移动浏览器和桌面浏览器（想到 iPhone 和 SkyFire）
*   没有 JS 的网站，单列，大部分只是纯文本。

原因是为 3-4 个桌面浏览器编写代码已经够难了。不要在另外一百台设备上为自己编写代码并创建一个仅显示信息的简单页面。

记住 Web 开发的基本设计原则：用户不在乎。他们想要信息或功能。如果你有一个针对糟糕的移动浏览器（IE 或黑莓）的简单、清晰的布局，然后尝试破解一些最终成为可维护性噩梦的东西，并且如果有人使用另一个移动设备可能会让你看起来很糟糕，它看起来会好很多浏览器，您还没有编写特定于手机的网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T08:48:55.730

我不会费心为 iPhone 等制作“中等”版本，iPhone 用户可以轻松查看您的真实网页。拥有完整版和单栏版，您将以最少的工作接触到最多的受众。

不过，要回答您的问题，除了 1 列视图之外，没有其他好方法可以让 Blackberry 执行任何操作。你可以让它看起来相当专业，因为 CSS 和简单的 javascript 仍然适用，但你将不得不失去很多横向空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-09T18:12:09.770

BlackBerry（来自 OS 4.6 及更高版本）支持 meta-viewport 标签和 meta-HandheldFriendly 标签。[有关详细信息，请参阅http://na.blackberry.com/eng/support/docs/subcategories/?userType=21&category=BlackBerry+Browser](http://na.blackberry.com/eng/support/docs/subcategories/?userType=21&category=BlackBerry+Browser)上的“内容设计指南”文档。

# css - 与 CSS 一致的首字母缩进？

> ID：107054
> 
> 赞同：1
> 
> 时间：2008-09-20T04:09:30.767
> 
> 标签：css, firefox, safari, typography

我正在尝试实现正文第一段的第一个字母的缩进。我被困的地方是在第一个字母和段落的其余部分之间保持一致的间距。

例如，“W”和“I”之间的间距存在巨大差异

!['我' 突出](https://i.stack.imgur.com/2TsvYm.png)
!['W' 突出](https://i.stack.imgur.com/DnZVSm.png)

有人对如何减轻差异有任何想法吗？我更喜欢纯 CSS 解决方案，但如果需要，我会求助于 JavaScript。

**PS**：我不一定需要在 IE 或 Opera 中兼容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-20T04:53:06.093

将此应用于`p.outdent:first-letter`：

```
margin-left: -800px;
padding-right: 460px;
float: right; 
```

这会将第一个字母定位在段落的右边缘，然后将其或多或少地向左推段落的宽度，然后将字母和所有填充都移动到浮动的大负边距中，以便段落适合边距并且不尝试环绕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T04:30:45.037

我尝试使用像“courier new”这样的固定宽度字体，由于字符的宽度或多或少相同，所以它不太明显。

编辑 - 这个字体不错，但可能只适用于 Windows

```
p.outdent:first-letter {
    font-family: ms mincho;
    font-size: 8em;
    line-height: 1;
    font-weight: normal;
    float: left;
    margin: -0.1em 0 0 -.55em;
    letter-spacing: 0.05em;
} 
```

# grid-computing - 网格计算的商业用途？

> ID：107062
> 
> 赞同：4
> 
> 时间：2008-09-20T04:12:20.090
> 
> 标签：grid-computing

我不断从同事那里听到关于网格计算的消息，据我所知，网格计算是高度分布的东西，类似于 SETI@Home。

有没有人在开发这类用于商业用途的系统？我的兴趣是弄清楚在这个领域开始软件开发是否有商业原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T07:07:06.783

*   渲染农场，如皮克斯
*   模型评估，例如天气、金融、军事
*   建筑工程，例如地震。

列举几个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T04:13:58.557

只有当你有很多工作需要完成时才需要网格计算，比如折叠蛋白质，否则一个简单的服务器场可能就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T07:21:26.063

显然谷歌是网格计算的主要用户。他们所有的搜索服务都依赖它，还有许多其他服务。

BigTable 等引擎基于使用大量节点进行存储和计算。这些在商业上非常有用，因为它们是少量大型服务器的良好替代品，提供更好的冗余和成本效益的扩展。

缺点是该软件非常难以编写，但谷歌似乎可以管理好:)

所以任何需要大存储和/或大量计算的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T14:11:57.793

我曾经为[这些家伙](http://www.platform.com)工作。网格计算被广泛使用。任何制造计算机芯片的人都会在切割物理硅之前使用它们来测试设计。金融网站使用网格来计算您是否有资格获得该贷款。如今，它们开始在很多地方更换大铁，因为它们的长期维护成本往往更低。

# algorithm - 从单个图像生成游戏地图的算法

> ID：107073
> 
> 赞同：3
> 
> 时间：2008-09-20T04:15:30.410
> 
> 标签：algorithm

我正在设计一个要在浏览器中玩的游戏。

游戏是一个空间主题，我需要生成一张“银河”的地图。

地图的基本思想在这里：

[游戏地图 http://www.oglehq.com/map.png](http://www.oglehq.com/map.png)

该地图是一个网格，每个网格扇区可以包含一个行星/系统，并且每个网格都与多个相邻网格的链接。

为了生成地图，我认为我将拥有一组表示网格元素的图像。因此，在上面的示例中，每个正方形都是一个单独的图形。

要创建新地图，我会将图像“编织”在一起。地图元素图像上已经有行星及其链接，因此，我需要将地图拼接在一起，使每个图像都与其适当的对应物定位 => 所以底角的图像必须具有左侧和对角线左侧的图像正确连接。

您将如何创建代码以知道将图像放置在哪里？有没有比使用图像更好的方法？

目前不应该考虑性能和/或负载（如果我需要生成预先配置的地图而不是实时执行，我不介意）。

如果它有所作为，我将使用 HTML、CSS 和 JavaScript，并由 Ruby on Rails 应用程序支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-20T04:43:17.490

有两个非常不错的基于浏览器的矢量/javascript 可操作图形包，它们加在一起几乎是通用的：SVG 和 VML。它们通常以低带宽生成高质量的基于矢量的图像。

[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)由 firefox、opera、safari 和 chrome 支持 - 从技术上讲，仅支持规范的一部分，但出于实际目的，您应该能够做您需要的事情。w3schools[对学习/使用 svg 有很好的参考](http://www.w3schools.com/svg/svg_examples.asp)。

[VML](http://en.wikipedia.org/wiki/Vector_Markup_Language)是微软对 SVG 的回应，并且（惊喜）IE 原生支持，尽管 SVG 不支持。[Msdn 有vml](http://msdn.microsoft.com/en-us/library/bb263898(VS.85).aspx)的最佳参考。

尽管工作量更大，但您可以为这两种技术编写两个相似/有些集成的代码库。真正的好处是用户无需安装任何东西即可在线玩您的游戏——它会为 99.9% 的所有用户工作。

顺便说一句，您说您要求一种算法，而我正在提供技术（如果这是 SVG/VML 的正确术语）。如果您可以澄清输入/输出规范以及可能是哪一部分提出了挑战（例如，哪个幼稚的实现不起作用，以及为什么），那将澄清问题并可能提供更有针对性的答案。

**附录** [canvas 标签](http://en.wikipedia.org/wiki/Canvas_%28HTML_element%29)正得到更广泛的支持，但 IE 除外。这可能是在 html 中嵌入图形元素的一种更简洁的方式。

有用的画布材料：[Opera 的画布教程](http://dev.opera.com/articles/view/html-5-canvas-the-basics/)| [Mozilla 的画布教程](https://developer.mozilla.org/en/Canvas_tutorial)| [canvas-in-IE 部分实现](http://me.eae.net/archive/2005/12/29/canvas-in-ie/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T05:04:29.217

唔。如果每个盒子只能链接到它的 8 个邻居，那么你只有 2^8 = 256 种瓷砖类型。如果您限制来自任何一个磁贴的可能链接的数量，则更少。

您可以使用 8 字符文件名对图像中存在哪些链接进行编码：

```
11000010.jpeg 
```

或者保存一些字节并将其转换为十进制或十六进制

```
196.jpg 
```

然后是代码。您可以选择多种方式在内部表示地图。一种方法是为每个行星设置一个对象。行星对象知道自己在网格中的位置，以及其链接行星的位置。因此它有足够的信息来选择合适的文件。

或者有一个二维数组。要确定为每个数组项显示哪个图像，请查看 8 个相邻的数组项。如果这样做，您可以通过使数组在两个轴上都变大并在边缘周围留一个空的“边界”来避免对边界进行编码。这可以让您检查相邻的数组项是否在数组之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T05:16:57.830

有两种方法可以表示您的地图。

一种方法是将它表示为一个正方形网格，其中每个正方形可以有或没有行星/系统。然后，您可以指定如果在八个方向（NW、N、NE、W、E、SW、S、SE）中的任何一个方格外有一个邻居，那么就存在与该邻居的连接。但是请注意，在您的示例地图中，中心系统未连接到它的北/东系统，因此这可能不是您想要的表示。但它可以用来构建其他表示

第二种方法是将每个方格表示为具有 8 位，定义沿相同的八个方向中的每一个方向是否存在与邻居的连接。大概如果只有一个连接，那么正方形里面就有一个系统，否则如果没有连接，它就是空白的。

因此，在您的示例 3x3 网格中，数据将是：

```
 Tile   Connections
        nw  n ne  w  e sw  s se
 nw      0  0  0  0  0  0  0  0 
 n       0  0  0  0  1  0  1  0
 ne      0  0  0  1  0  0  0  0
 w       0  0  0  0  0  0  0  0
 center  0  1  0  0  0  0  1  1
 e       0  0  0  0  0  0  0  0
 se      0  0  0  0  0  0  0  0
 s       0  1  0  0  1  0  0  0
 sw      1  0  0  1  0  0  0  0 
```

您可以将这些连接表示为一个由八个布尔值组成的数组，或者更紧凑地表示为一个八位整数。

然后很容易使用八个布尔值（或八位整数）来形成要为该网格正方形加载的位图的文件名。例如，使用此方案的中心图块可以称为“Bitmap01000011.png”（仅使用布尔值），或者称为“Bitmap43.png”（使用表示该二进制模式的八位整数的十六进制值以获得较短的文件名)。

由于您有 256 种可能的组合，因此您将需要 256 个位图。

您还可以将数据减少到每个图块四个布尔值/位，因为例如“北”连接意味着北的图块具有“南”连接，但这使得选择位图有点困难，但你可以工作如果你愿意的话。

或者，您可以在每个正方形中将零（空）和九（完全连接+系统圆）位图分层。您只需要使用透明的 .png，以便将它们组合在一起。缺点是浏览器绘制每个正方形的速度可能很慢（尤其是完全连接的正方形）。优点是您要创建的数据更少，从您的网站加载的数据也更少。

您可以将地图本身表示为表格，并根据需要将位图作为图像链接添加到每个单元格。

映射的伪代码是：

```
draw_map(connection_map):
    For each grid_square in connection_map
        connection_data = connection_map[grid_square]
        filenames = bitmap_filenames_from(connection_data)
        insert_image_references_into_table(grid_square,filenames)

# For each square having one of 256 bitmaps:
bitmap_filenames_from(connection_data):
    filename="Bitmap"
    for each bit in connection_data:
      filename += bit ? "1" : 0
    return [filename,]

# For each square having zero through nine bitmaps:
bitmap_filename_from(connection_data):
    # Special case - square is empty
    if 1 not in connection_data:
        return []
    filenames=[]
    for i in 0..7:
        if connection_data[i]:
            filenames.append("Bitmap"+i)
    filenames.append("BitmapSystem");
    return filenames 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T04:30:23.260

我建议使用图形库来绘制地图。如果这样做，您将不会遇到上述问题，并且最终会得到更清洁/更简单的代码。一些选项是 SVG、Canvas 和 flash/flex。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-20T04:41:22.347

就我个人而言，我只会在游戏中渲染链接，并让单元格图形只提供背景。这为您提供了更大的灵活性，使您可以更轻松地增加单元格相互链接的方式数量，并且通常更具可扩展性。

否则，您将需要考虑可能链接单元的所有可能方式，即使您考虑到旋转对称和镜像对称，这也是相当多的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T04:45:33.600

哦，你也可以只拥有少量具有透明度的平铺 png 文件，并使用 css 定位的 div 重叠这些文件以形成类似于你的示例的图片，如果这足够的话。

上次我检查时，旧版本的 IE 对图像文件的透明度没有很好的支持。任何人都可以编辑它以提供有关透明度支持的更好信息吗？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-20T04:57:20.590

只要链接的最大长度不太长，那么每个单元格就不会有太多不同的可能图像。您需要对图像单元的种类进行排序。例如，一个整数，其中每个位表示图像组件的存在或不存在。

```
Bit 0 : Has planet
Bit 1 : Has line from planet going north
Bit 2 : Has line from planet going northwest
...
Bit 8 : Has line from planet going northeast 
```

好的，现在创建 512 个图像。许多语言都有库，可让您编辑图像并将其写入磁盘。如果你喜欢 Ruby，试试这个：[http ://raa.ruby-lang.org/project/ruby-gd](http://raa.ruby-lang.org/project/ruby-gd)

我不知道您打算如何存储描述行星和链接图的数据结构。邻接[矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)可能使生成地图变得容易，尽管它不是迄今为止最小的表示。然后吐出 html 就很简单了（对于 2x2 网格）：

```
<table border="0" cellspace="0" cellpadding="0">
<tr>
<td><img src="cell_X.gif"></td>
<td><img src="cell_X.gif"></td>
</tr>
<tr>
<td><img src="cell_X.gif"></td>
<td><img src="cell_X.gif"></td>
</tr>
</table> 
```

当然，将每个 X 替换为与描述单元外观的位组合相对应的适当数字。如果您使用的是邻接矩阵，那么将这些位放在一起非常简单——只需查看“当前”单元格周围的单元格即可。

# c# - WCF 是否与 Java 配合得很好？

> ID：107076
> 
> 赞同：9
> 
> 时间：2008-09-20T04:16:21.390
> 
> 标签：c#, java, wcf

哪些 WCF 服务协议适用于 Java？

TCP 服务绑定是否适用于 java 远程处理（Corba、EJB、JMS 等）？

作为服务端点公开的 WebServices 呢？这些是否针对通用 Java WebServices 堆栈进行了互操作性测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T14:01:38.020

您将需要使用其中一种 HTTP 绑定。TCP 绑定要求 WCF 在两侧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T16:37:50.407

在使用 WS-Security 规范处理基于 Java 的 Web 服务时，我有过一些不好的经历。在那种情况下，供应商提供的文档非常少，而且大多是相互矛盾的，而且根本没有技术支持。我们花了相当多的时间让它工作，但使用 WS-Security 示例作为基础，我们最终让一切正常工作。

主要问题是针对启用了安全性的不良文档黑匣子系统工作，这使得无论是否使用 WCF，都很难找出哪里出错了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T04:22:06.447

WCF 已经与 Sun 的 Java WEBservices 堆栈和 Apache 的 Axis 进行了互操作性测试。

所以，我会说它非常好。

您能否详细说明“或者 TCP 是否也能正常工作”？

谢谢你，

# wcf - WCF 是否支持 WS-Eventing？

> ID：107079
> 
> 赞同：3
> 
> 时间：2008-09-20T04:17:31.450
> 
> 标签：wcf, ws-eventing

我知道 WCF 支持许多 WS-* 协议，但似乎列出了 WS-Eventing。

我知道 WCF 有一个发布/订阅模型，但它是否符合 WS-Eventing 标准？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-20T04:27:11.910

我似乎记得不久前在 CodeProject 上读到过这个。

抱歉，我帮不上忙，但这[是 Roman Kiss 的文章](http://www.codeproject.com/KB/WCF/WSEventing.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-15T14:24:33.187

至少使用 WCF4，您可以通过导入 WS-Eventing WSDL（使用soap 绑定）来简单地创建一个 wsdl 客户端。它需要双工绑定，因此 http-duplex 或简单的 tcp 应该可以工作。问题是添加正确的回调。对我们来说，这成功了

```
 Subscribe s = new Subscribe();
                        (s.Delivery = new DeliveryType()).Mode = "http://schemas.xmlsoap.org/ws/2004/08/eventing/DeliveryModes/Push";

                        XmlDocument doc = new XmlDocument();
                        using (XmlWriter writer = doc.CreateNavigator().AppendChild())
                        {
                            EndpointReferenceType notifyTo = new EndpointReferenceType();

                            (notifyTo.Address = new AttributedURI()).Value = callbackEndpoint.Uri.AbsoluteUri;

                            XmlRootAttribute notifyToElem = new XmlRootAttribute("NotifyTo");
                            notifyToElem.Namespace = "http://schemas.xmlsoap.org/ws/2004/08/eventing";

                            XmlDocument doc2 = new XmlDocument();                                    
                            using (XmlWriter writer2 = doc2.CreateNavigator().AppendChild())
                            {
                                XmlRootAttribute ReferenceElement = new XmlRootAttribute("ReferenceElement");
                                foreach(AddressHeader h in callbackEndpoint.Headers)
                                {
                                    h.WriteAddressHeader(writer2);  
                                }

                                writer2.Close();
                                notifyTo.ReferenceParameters = new ReferenceParametersType();
                                notifyTo.ReferenceParameters.Any = notifyTo.ReferenceParameters.Any = doc2.ChildNodes.Cast<XmlElement>().ToArray<XmlElement>();               
                            }

                            new XmlSerializer(notifyTo.GetType(), notifyToElem).Serialize(writer, notifyTo);
                        }

                        (s.Delivery.Any = new XmlElement[1])[0] = doc.DocumentElement;
                        (s.Filter = new FilterType()).Dialect = "http://schemas.xmlsoap.org/ws/2006/02/devprof/Action";
                        (s.Filter.Any = new System.Xml.XmlNode[1])[0] = new System.Xml.XmlDocument().CreateTextNode("http://www.teco.edu/SensorValues/SensorValuesEventOut");

                        SubscribeResponse subscription;
                        try
                        {
                            Console.WriteLine("Subscribing to the event...");
                            //Console.ReadLine();
                            subscription = eventSource.SubscribeOp(s);
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-03T12:14:06.270

WCF 3.0 中没有本机发布/订阅模型，但是有一些选项。
- 发现的罗马之吻文章 Ash。
- 您可以实现许多其他模式（在[MSDN Mag](http://msdn.microsoft.com/msdnmag/issues/06/10/WCFEssentials/)中介绍）
- Juval Lowy 有两个框架实现，您可以在他的[IDesign](http://www.idesign.net/)
网站上下载 - 最后，我目前使用的以很少开销来模拟这一点的是 MSMQ。

# .net - 为什么 .NET 中没有通用同步队列？

> ID：107117
> 
> 赞同：35
> 
> 时间：2008-09-20T04:34:48.553
> 
> 标签：.net, generics, synchronization, queue

我注意到您可以调用 Queue.Synchronize 来获取线程安全的队列对象，但同样的方法在 Queue<T> 上不可用。有谁知道为什么？似乎有点奇怪。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-09-20T10:02:01.280

**更新**- 在 .NET 4 中，现在有`ConcurrentQueue<T>`System.Collections.Concurrent，如此处[所述 http://msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)。有趣的是，它的 IsSynchronized 方法（正确地）返回 false。

`ConcurrentQueue<T>`是一个彻底的重写，创建要枚举的队列副本，并使用先进的无锁技术，如`Interlocked.CompareExchange()`和`Thread.SpinWait()`.

这个答案的其余部分仍然是相关的，因为它与旧的 Synchronize() 和 SyncRoot 成员的消亡有关，以及为什么从 API 的角度来看它们不能很好地工作。

* * *

根据 Zooba 的评论，BCL 团队认为太多的开发人员误解了 Synchronize 的目的（在较小程度上，SyncRoot）

几年前，Brian Grunkemeyer 在 BCL 团队博客上描述了这一点：http: [//blogs.msdn.com/bclteam/archive/2005/03/15/396399.aspx](http://blogs.msdn.com/bclteam/archive/2005/03/15/396399.aspx)

关键问题是获得正确的锁定粒度，一些开发人员会天真地在“同步”集合上使用多个属性或方法，并认为他们的代码是线程安全的。Brian 以 Queue 为例，

```
if (queue.Count > 0) {
    object obj = null;
    try {
        obj = queue.Dequeue(); 
```

开发人员不会意识到在调用 Dequeue 之前 Count 可能被另一个线程更改。

强制开发人员在整个操作周围使用显式锁定语句意味着防止这种错误的安全感。

正如 Brian 所提到的，SyncRoot 的删除部分是因为它主要是为了支持 Synchronized 而引入的，但也因为在许多情况下有更好的锁定对象选择——大多数时候，要么是 Queue 实例本身，要么是

```
private static object lockObjForQueueOperations = new object(); 
```

在拥有队列实例的类上......

后一种方法通常是最安全的，因为它避免了一些其他常见的陷阱：

*   [从不锁定（这个）](https://haacked.com/archive/2006/08/08/threadingneverlockthisredux.aspx/)
*   [不要锁定（字符串）或锁定（typeof（A））](http://blogs.msdn.com/ricom/archive/2003/12/06/41779.aspx)

正如他们所说，[线程很难](http://blogs.msdn.com/jmstall/archive/2008/01/30/why-threading-is-hard.aspx)，让它看起来很容易可能很危险。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-20T05:06:48.947

您可能会发现 Parallel CTP 值得一试；这是将它放在一起的人的博客条目，非常热门：

[枚举并发集合](http://blogs.msdn.com/pfxteam/archive/2008/08/12/8852005.aspx)

这不是一回事，但它可能会解决你更大的问题。（他们甚至使用`Queue<T>`vs`ConcurrentQueue<T>`作为他们的例子。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-03-28T17:55:09.603

现在有一个，在 .Net 4.0 中：

```
ConcurrentQueue<T> 
```

在 System.Collections.Concurrent

[http://msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T04:43:33.090

（我假设您的意思是 Queue<T> 用于第二个。）

我无法具体回答这个问题，除了 IsSynchronized 和 SyncRoot 属性（但不是 Synchronise() 显式）是从 ICollection 接口继承的。没有一个通用集合使用它，并且 ICollection<T> 接口不包括 SyncRoot。

至于为什么不包括在内，我只能推测它们没有按照图书馆设计者的预期方式使用，或者只是没有被充分利用以证明将它们保留在较新的馆藏中是合理的。

# delphi - 如何在 Vista 上安装 Delphi 7

> ID：107123
> 
> 赞同：8
> 
> 时间：2008-09-20T04:39:48.963
> 
> 标签：delphi, windows-vista

我曾多次尝试在 Vista 上安装 Delphi 7，但 Vista 告诉我此应用程序 (Delphi 7) 存在已知问题，从而阻止了我这样做。我公司的其他几个人在 Vista 上安装 D7 时遇到了问题。

这导致我们的 D7 应用程序存在风险的结论，因为公司可以在应用程序的生命周期内切换到 Vista 或 Windows 7，并且较新的 Delphi 版本不在公司的政策范围内。因此管理层决定用 C# 重写应用程序。

我的问题：

1.  如何在 Vista 上安装 D7
2.  这种安装的经验
3.  有关 IDE 和已开发程序稳定性的风险评估
4.  Windows 7 下的可执行性风险评估

不使用任何第三方组件或数据库 - 在 Vista 下运行开发的应用程序应该没有问题。如果不能在 Vista 下进行开发和调试（此时它将是唯一的客户平台，是的，内部编程）将导致一种跨平台开发 - 如果我们被允许保留 XP 作为开发平台。

重写不是开发人员的决定，公司在过去 3 年中一直这样做：如果您必须对在 Delphi 开发的应用程序进行重大修改，或者如果它有一定的风险无法在计划的生命周期中生存/寿命，必须改写。由于取消了另一个项目，生命周期刚刚扩展到 2015 年。

所以这里的主要问题真的是：我想对风险进行有根据的争论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-20T11:55:04.207

如果可以关闭 UAC，在 Vista 下运行 Delphi 7 是没有问题的。启用 UAC 后，您在启动 D7 时会收到一条错误消息，但它仍然有效，只需单击确定并继续。

用 D7 编译的程序在 Vista 上没有问题。但是只有 Delphi 2007/2009 支持 Vista 的新功能。

我们在 XP 和 Vista 上使用 D7，构建和维护从 D2 到 D4、D5 到 D7 的商业应用程序。除了 BDE 的问题，这使我们切换到 DBX (Corelabs)，没有任何问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T12:26:13.240

只需按照这些说明进行操作，您就会没事的。没有理由关闭 UAC！我已经在 Vista 上运行 Delphi 7 大约一年了，完全没有任何问题。调试也完全没问题。

[http://www.drbob42.com/examines/examin84.htm](http://www.drbob42.com/examines/examin84.htm)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-20T05:17:27.890

要在 Vista 中安装 Delphi 7，您可以尝试 Microsoft 提供的此补丁。

[http://support.microsoft.com/default.aspx/kb/932246](http://support.microsoft.com/default.aspx/kb/932246)

至于其他人，我怀疑会有更多的知识。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-21T09:45:38.360

我的 Vista 开发盒上的 Delphi 7 运行良好。是的，在安装过程中出现了一些问题，但与其他应用程序一样，这些问题已在 Delphi 的后续版本中得到解决。

这些都不会导致 D7 为 Vista 开发的应用程序出现问题。我们使用 Delphi 作为我们所有应用程序的主要开发工具，它们与 Vista 配合得很好。

听起来这是公司中某人摆脱 Delphi 并转向 C# 的借口。典型的 FUD 战术。您的公司离开 Delphi 可能有真正的原因，但 Vista 兼容性不应该是其中之一。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-02T13:23:08.060

此外，如果您想要 Delphi 7 应用程序中的所有支持 Vista 的功能，请在此处查看这篇文章：[使用 Delphi 创建支持 Windows Vista 的应用程序](http://www.installationexcellence.com/articles/VistaWithDelphi/Original/Index.html)

这将使您的应用程序在执行 Flip3D 时或在将鼠标悬停在任务栏中的应用程序上时显示预览缩略图时正确显示。从本质上讲，这将为您提供 Delphi 2007 的“Vista-readiness”，来自旧版本的 Delphi（我在 Delphi 2006 中使用过它，它工作得很好）。

您还将获得新的 Vista 任务对话框和新的通用对话框以及链接网站上列出的修改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T11:35:54.563

我认为从在 Vista 中安装 D7 时遇到问题（D7 毕竟包含调试器的低级零碎并且不知道将东西放在 Vista 下的“正确”位置）有很大的飞跃，假设您自己的应用程序会遇到 Vista 问题...

你有源代码，你可以测试你在 Vista 下运行的程序，你可以对你的代码进行任何必要的（通常是微小的）调整......我真的很惊讶你决定用另一种语言重写应用程序因为您无法在 Vista 下安装（旧）开发工具。

我们需要更多地了解您的应用程序的功能以及您使用的组件，以便能够对您的第 3 和第 4 个问题做出任何猜测。他们太笼统了。

例如，我在市场上有几个 D7 应用程序，其中一个使用带有 Delphi 的开源 Interbase 6，并且在 Vista Home 上安装/工作可能是一个问题（这个过程在 Vista Business 上似乎不那么痛苦）。我们的另一个应用程序使用 SQL Express 2005，并且在 Vista 上运行得非常愉快。我们最新的应用程序，用 D2007 编写，在 Vista 上运行良好。在两个 Delphi 平台上，我们的两个主要“第三方”工具是 DevExpress 控件和 ReportBuilder。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T12:18:10.387

一年来我一直在使用 D4 和 Vista，因为我们的主要产品之一使用它，它的好版本仍然存在，并且有一些变通方法可以使它使用新的 Vista 功能。您可以调用任何 win32 API（新功能），因此没有必要更新到 D7。

我手动将 D4 安装/移动到我的新机器上：1\. 通过导出注册表配置单元 2\. 注册一些组件 3\. 复制文件

就是这样..无需运行缓慢的安装程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-28T15:09:23.380

正如其他人所指出的，在 Vista 下运行 Delphi 7 应用程序没有问题：我们通过使用大量第三方控件（Developer Express 网格、TSILang 翻译组件等）的数十万行 Delphi 7 应用程序来做到这一点。

我们使用 Vista 作为我们的主要操作系统，但我们在 Windows XP 虚拟机中运行 Delphi 7 开发环境。它运行良好，并且没有安装问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-03T18:51:44.877

真的很简单.. 您所要做的就是： 搜索 UAC（用户帐户控制）关闭然后安装 delphi7 但是，您的计算机上必须没有其他版本的 delphi。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-05-17T16:36:16.830

[1,2 在 Vista 中）如果您安装http://support.microsoft.com/kb/947562](http://support.microsoft.com/kb/947562)并配置 UAC没有问题；

3）我这里的任何朋友都不知道稳定性问题......

4) Not using Windows 7 with Delphi 7... But heard of many problems with both...

# .net - 您可以使用 Reflector 获取应用程序的源代码，然后使用该源代码进行调试吗？

> ID：107129
> 
> 赞同：10
> 
> 时间：2008-09-20T04:42:27.647
> 
> 标签：.net, debugging, reflector

似乎您可以使用 Relector 和 Debugger 的混搭来调试任何 .NET 应用程序，而根本不需要源代码。这可能吗？有没有人见过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-20T07:18:32.887

Reflector的[Deblector](http://www.codeplex.com/deblector)插件允许您直接从 Reflector 进行调试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-20T04:55:51.920

我很久以前尝试过这个，但没有成功。从那时起，Reflector 有了很大的改进，所以我想今天它可能是可能的。

如果你仔细想想，它实际上有点可怕。有人可以反编译您的应用程序并获得完整代码，然后对其进行修改并分发他们自己的版本。所有这些都不是开源的。但话又说回来，这就是“他们”创建混淆器的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-20T05:05:32.473

我找不到链接，但有人确实使用反射器源来编译可以逐步通过的 1.1 框架的调试版本。我尝试了 2.0 框架，发现错误太多，值得我花时间。

如果您想尝试这个，请从[FileDisassembler 之](http://www.denisbauer.com/NETTools/FileDisassembler.aspx "文件反汇编器")类的插件开始。在我对此的简短经验中，我发现有一些错误需要修复，但还不错。

对于中小型库，这种方法应该是非常可行的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-04-14T08:49:01.090

Reflector Pro 可以让您做到这一点！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T05:22:11.357

不，您需要属于您尝试调试的应用程序的符号文件 (.PDB) 文件。

Reflector 允许您从 IL 转换为可读的 .NET 代码，但它仅保持含义，而不是开发人员编写的确切代码。因此，即使您拥有 PDB 和 Reflector 的源代码，它也无法匹配调试。

我想您可以使用反射器的源输出来创建一个 .NET 项目并生成您自己想要调试的程序集版本。虽然这通常是一个真正的痛苦，但对于 .NET 框架，Microsoft 会发布调试信息以供任何感兴趣的人使用。

我记得有一次在 Reflector 中有一个用于调试的插件，但我永远无法让它工作。

[配置 Visual Studio 以调试 .NET Framework 源代码](http://blogs.msdn.com/sburke/archive/2008/01/16/configuring-visual-studio-to-debug-net-framework-source-code.aspx)
[MSDN：PDB 文件](http://msdn.microsoft.com/en-us/library/ms241903.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T06:38:57.693

我以前看过并做过。我用它来向我的老板展示我们的应用程序没有像他想象的那样受到保护。拿了一个 DLL，得到了源代码，然后砰——他几乎心脏病发作了。

在某些情况下 .Net Reflector 会发生故障，但很难做到——我知道，因为我已经积极尝试过。好的混淆器会使代码变得如此难以管理/不可读（比如重载“a”函数以根据参数执行大量不同的操作）以至于查看源代码对你没有好处，但你仍然可以调试——祝你好运出了什么事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T05:08:59.703

在更大更复杂的应用程序中这是可能的，但实际上并不实用，特别是当使用了许多更新的结构（如 lambda 和初始化程序）时（你会得到一大堆包含美元符号的变量名，例如必须手动修复的 CS$4$0000） . 即使是简单的 switch 语句也会在 Reflector 中导致一些非常丑陋的意大利面条代码，其中充满了 goto 语句。

我有更多的运气去编译到 MSIL 并在调试模式下重新编译。然后，您可以在 IL 文件中放置断点并使用 VS 中所有常用的调试器功能。MSIL 一开始看起来有点吓人，但你很快就掌握了窍门。

这篇优秀的文章解释了如何做到这一点：http: [//www.codeproject.com/KB/dotnet/Debug_Framework_Classes.aspx](http://www.codeproject.com/KB/dotnet/Debug_Framework_Classes.aspx)

# sql-server - 哪些列通常可以制作好的索引？

> ID：107132
> 
> 赞同：116
> 
> 时间：2008-09-20T04:43:32.683
> 
> 标签：sql-server, database, optimization, database-design, indexing

[作为“什么是索引以及如何使用它们来优化我的数据库中的查询？](https://stackoverflow.com/questions/105400/what-are-indexes-and-how-can-i-use-them-to-optimize-queries-in-my-database) ”的后续行动，我正在尝试了解索引，哪些列是好的索引候选？专门针对 MS SQL 数据库？

经过一番谷歌搜索后，我读到的所有内容都表明，通常会增加且唯一的列是一个很好的索引（比如 MySQL 的 auto_increment 之类的东西），我理解这一点，但我使用的是 MS SQL，并且我使用的是 GUID 作为主键，所以看起来索引不会使 GUID 列受益...

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-01-20T07:03:40.093

索引可以在查询优化和从表中快速搜索结果中发挥重要作用。所以选择要索引的列是最重要的一步。有两个主要的地方我们可以考虑索引：WHERE 子句中引用的列和 JOIN 子句中使用的列。简而言之，应该为这些列建立索引，您需要根据这些列搜索特定记录。假设我们有一个名为 Buyer 的表，其中 SELECT 查询使用如下索引：

```
SELECT
 buyer_id /* no need to index */
FROM buyers
WHERE first_name='Tariq' /* consider to use index */
AND last_name='Iqbal'   /* consider to use index */ 
```

由于 SELECT 部分引用了“buyer_id”，MySQL 不会使用它来限制所选行。因此，没有必要对其进行索引。下面是另一个与上面略有不同的示例：

```
SELECT
 buyers.buyer_id, /* no need to index */
 country.name    /* no need to index */
FROM buyers LEFT JOIN country
ON buyers.country_id=country.country_id /* consider to use index */
WHERE
 first_name='Tariq' /* consider to use index */
AND
 last_name='Iqbal' /* consider to use index */ 
```

根据上面的查询 first_name，last_name 列可以被索引，因为它们位于 WHERE 子句中。还可以考虑将来自国家/地区表的附加字段 country_id 用于索引，因为它位于 JOIN 子句中。因此可以考虑对 WHERE 子句或 JOIN 子句中的每个字段进行索引。

以下列表还提供了一些提示，当您打算在表中创建索引时应始终牢记这些提示：

*   仅索引 WHERE 和 ORDER BY 子句中需要的那些列。大量索引列会导致一些缺点。
*   尝试利用 MySQL 的“索引前缀”或“多列索引”功能。如果您创建索引，例如 INDEX(first_name, last_name)，请不要创建 INDEX(first_name)。但是，并非所有搜索情况都建议使用“索引前缀”或“多列索引”。
*   对您考虑索引的列使用 NOT NULL 属性，以便永远不会存储 NULL 值。
*   使用 --log-long-format 选项记录不使用索引的查询。通过这种方式，您可以检查此日志文件并相应地调整您的查询。
*   EXPLAIN 语句帮助您揭示 MySQL 将如何执行查询。它显示了表的连接方式和顺序。这对于确定如何编写优化查询以及是否需要对列进行索引非常有用。

**更新（2015 年 2 月 23 日）：**

任何索引（好/坏）都会增加插入和更新时间。

根据您的索引（索引数量和类型），搜索结果。如果您的搜索时间会因为索引而增加，那么这就是糟糕的索引。

很可能在任何一本书中，“索引页”都可能有章节起始页、主题页码起始页以及子主题页起始页。索引页面中的一些说明会有所帮助，但更详细的索引可能会使您感到困惑或吓到您。索引也有记忆。

索引选择应该是明智的。请记住，并非所有列都需要索引。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-09-20T04:55:00.270

有些人在这里回答了类似的问题：[你怎么知道什么是好的索引？](https://stackoverflow.com/questions/79241/how-do-you-know-what-a-good-index-is)

基本上，这实际上取决于您将如何查询数据。您需要一个能够快速识别与查询相关的一小部分数据集的索引。如果您从不按日期戳查询，则不需要索引，即使它大多是唯一的。如果您所做的只是获取某个日期范围内发生的事件，那么您肯定想要一个。在大多数情况下，关于性别的索引是没有意义的——但如果你所做的只是获取所有男性的统计数据，并且单独获取所有女性的统计数据，那么创建一个索引可能是值得的。弄清楚您的查询模式将是什么，并访问哪个参数最能缩小搜索空间，这就是您的最佳索引。

还要考虑你创建的索引类型——B-trees 适用于大多数事情并允许范围查询，但哈希索引让你直截了当（但不允许范围）。其他类型的索引也有其他优点和缺点。

祝你好运！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-20T05:01:03.530

这完全取决于您希望对表提出什么查询。如果您要求 X 列具有特定值的所有行，则如果无法使用索引，则必须进行全表扫描。

在以下情况下，索引将很有用：

*   列或列具有高度的唯一性
*   您经常需要为列查找某个值或值范围。

如果出现以下情况，它们将无用：

*   您正在选择表中较大的 % (>10-20%) 行
*   额外的空间使用是一个问题
*   您希望最大限度地提高插入性能。表上的每个索引都会降低插入和更新性能，因为每次数据更改时都必须更新它们。

主键列通常非常适合索引，因为它们是唯一的并且通常用于查找行。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-20T05:03:17.957

任何将经常用于从表中提取数据的列都应该被索引。

这包括：外键 -

```
select * from tblOrder where status_id=:v_outstanding 
```

描述性字段 -

```
select * from tblCust where Surname like "O'Brian%" 
```

列不需要是唯一的。事实上，在搜索异常时，您可以从二进制索引中获得非常好的性能。

```
select * from tblOrder where paidYN='N' 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-20T04:49:50.467

一般来说（我不使用 mssql，所以不能具体评论），主键是很好的索引。它们是唯一的，并且必须具有指定的值。（此外，主键生成的索引非常好，以至于它们通常会自动创建一个索引。）

索引实际上是已排序以允许二进制搜索（比线性搜索快得多）的列的副本。数据库系统可能会使用各种技巧来进一步加快搜索速度，尤其是在数据比简单数字更复杂的情况下。

我的建议是最初不要使用任何索引并分析您的查询。如果某个特定查询（例如按姓氏搜索人员）运行频率很高，请尝试再次在相关属性和配置文件上创建索引。如果查询的速度明显加快，而插入和更新的速度可以忽略不计，请保留索引。

（抱歉，如果我重复您在另一个问题中提到的内容，我之前没有遇到过。）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-20T04:50:21.327

GUID 列不是索引的最佳候选者。索引最适合数据类型的列，该数据类型可以给出一些有意义的顺序，即排序（整数、日期等）。

列中的数据是否普遍增加并不重要。如果您在列上创建索引，该索引将创建它自己的数据结构，该结构将简单地引用表中的实际项目，而不考虑存储顺序（非聚集索引）。然后，例如可以对您的索引数据结构执行二进制搜索以提供快速检索。

还可以创建一个“聚集索引”，对您的数据进行物理重新排序。但是，每个表只能有一个，而可以有多个非聚集索引。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-20T04:50:39.267

这实际上取决于您的查询。例如，如果您几乎只写入表，那么最好不要有任何索引，它们只会减慢写入速度并且永远不会被使用。您用于与另一个表连接的任何列都是索引的良好候选者。

此外，请阅读有关缺失索引功能的信息。它监视对您的数据库使用的实际查询，并可以告诉您哪些索引可以提高性能。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-20T05:00:34.593

您的主键应始终是索引。（事实上​​，如果它没有被 MS SQL 自动索引，我会感到惊讶。）您还应该经常索引`SELECT`列`ORDER`；它们的目的是快速查找单个值和更快的排序。

索引`too`许多列的唯一真正危险是减慢对大表中行的更改，因为索引也都需要更新。如果您真的不确定要索引什么，只需为最慢的查询计时，查看最常使用的列，然后为它们编制索引。然后看看他们的速度有多快。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-20T05:18:08.137

出于多种原因，按升序或降序排序的数字数据类型是很好的索引。首先，数字通常比字符串（varchar、char、nvarchar 等）计算速度更快。其次，如果您的值没有排序，则可能需要对行和/或页面进行洗牌以更新您的索引。这是额外的开销。

如果您使用 SQL Server 2005 并设置使用 uniqueidentifiers (guids)，并且不需要它们是随机的，请查看顺序 uniqueidentifier 类型。

最后，如果您谈论的是聚集索引，那么您谈论的是物理数据的种类。如果你有一个字符串作为你的聚集索引，那可能会变得很难看。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-20T04:56:15.243

经验法则是在 WHERE、ORDER BY 和 GROUP BY 子句中经常使用的列，或者在连接中经常使用的任何列。请记住，我指的是索引，而不是主键

不要给出一个“香草味”的答案，但这真的取决于你如何访问数据

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-20T04:50:24.633

如果您使用 GUID，它应该会更快。假设你有记录

1.  100
2.  200
3.  3000
4.  ……

如果你有索引（二分查找，你可以在 O(lg n) 时间内找到你要查找的记录的物理位置，而不是按顺序查找 O(n) 时间。这是因为你不知道你有哪些记录在你的桌子上。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-20T04:59:13.130

最佳索引取决于表的内容以及您要完成的任务。

举个例子 一个成员数据库，其主键是成员社会保障号。我们选择 SS 是因为应用程序主要以这种方式引用个人，但您还想创建一个搜索功能，该功能将利用成员的名字和姓氏。然后我建议在这两个字段上创建一个索引。

您应该首先找出要查询的数据，然后确定需要索引的数据。

# asp.net - ASP.NET TreeView 和选择选定的节点

> ID：107150
> 
> 赞同：13
> 
> 时间：2008-09-20T04:54:00.443
> 
> 标签：asp.net, treeview

如何捕获单击 TreeView 的选定节点的事件？它不会触发**SelectedNodeChanged**，因为选择显然没有改变，但是我可以捕捉到什么事件，所以我知道选择的节点被点击了？

**更新**：当我有时间时，我将不得不深入研究 TreeView 控件的内部，并找出它处理单击事件的内容和位置，并将 TreeView 子类化以公开一个新事件 OnSelectedNodeClicked。

我可能会在圣诞节假期这样做，然后我会报告结果。

**更新**：我在下面提出了一个解决方案，它对 TreeView 控件进行了子类化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T05:47:50.953

最简单的方法 - 如果它不干扰您的其余代码 - 只需将节点设置为未在 SelectedNodeChanged 方法中选择。

```
protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e){
  // Do whatever you're doing
  TreeView1.SelectedNode.Selected = false;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-21T06:03:14.050

经过一段漫长的时间后，我终于有时间研究如何对 TreeView 进行子类化以处理被单击的选定节点。

这是我的解决方案，它公开了一个新事件**SelectedNodeClicked**，您可以从页面或任何地方处理该事件。（*如果需要，重构为 C# 是一项简单的任务*）

```
Imports System.Web.UI
Imports System.Web

Public Class MyTreeView
  Inherits System.Web.UI.WebControls.TreeView

  Public Event SelectedNodeClicked As EventHandler

  Private Shared ReadOnly SelectedNodeClickEvent As Object

  Private Const CurrentValuePathState As String = "CurrentValuePath"

  Protected Property CurrentValuePath() As String
    Get
      Return Me.ViewState(CurrentValuePathState)
    End Get
    Set(ByVal value As String)
      Me.ViewState(CurrentValuePathState) = value
    End Set
  End Property

  Friend Sub RaiseSelectedNodeClicked()

    Me.OnSelectedNodeClicked(EventArgs.Empty)

  End Sub

  Protected Overridable Sub OnSelectedNodeClicked(ByVal e As EventArgs)

    RaiseEvent SelectedNodeClicked(Me, e)

  End Sub

  Protected Overrides Sub OnSelectedNodeChanged(ByVal e As System.EventArgs)

    MyBase.OnSelectedNodeChanged(e)

    ' Whenever the Selected Node changed, remember its ValuePath for future reference
    Me.CurrentValuePath = Me.SelectedNode.ValuePath

  End Sub

  Protected Overrides Sub RaisePostBackEvent(ByVal eventArgument As String)

    ' Check if the node that caused the event is the same as the previously selected node
    If Me.SelectedNode IsNot Nothing AndAlso Me.SelectedNode.ValuePath.Equals(Me.CurrentValuePath) Then
      Me.RaiseSelectedNodeClicked()
    End If

    MyBase.RaisePostBackEvent(eventArgument)

  End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T07:26:06.740

存储所选内容并使用 Page_Load 事件处理程序中的代码将所选内容与您存储的内容进行比较。与 SelectedNodeChanged 不同，即使所选值没有改变，每次回发都会调用 Page_Load。

例子

[替代文字 http://smithmier.com/TreeViewExample.png](http://smithmier.com/TreeViewExample.png "示例的屏幕截图")

html

```
<form id="form1" runat="server">
<div>
    <asp:TreeView ID="TreeView1" runat="server" OnSelectedNodeChanged="TreeView1_SelectedNodeChanged"
        ShowLines="True">
        <Nodes>
            <asp:TreeNode Text="Root" Value="Root">
                <asp:TreeNode Text="RootSub1" Value="RootSub1"></asp:TreeNode>
                <asp:TreeNode Text="RootSub2" Value="RootSub2"></asp:TreeNode>
            </asp:TreeNode>
            <asp:TreeNode Text="Root2" Value="Root2">
                <asp:TreeNode Text="Root2Sub1" Value="Root2Sub1">
                    <asp:TreeNode Text="Root2Sub1Sub1" Value="Root2Sub1Sub1"></asp:TreeNode>
                </asp:TreeNode>
                <asp:TreeNode Text="Root2Sub2" Value="Root2Sub2"></asp:TreeNode>
            </asp:TreeNode>
        </Nodes>
    </asp:TreeView>
    <asp:Label ID="Label1" runat="server" Text="Selected"></asp:Label>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label></div>
</form> 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
{
    if(TreeView1.SelectedNode!=null && this.TextBox1.Text == TreeView1.SelectedNode.Value.ToString())
    {
        Label2.Text = (int.Parse(Label2.Text) + 1).ToString();
    }
    else
    {
        Label2.Text = "0";
    }
}
protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
{
    this.TextBox1.Text = TreeView1.SelectedNode.Value.ToString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-10T19:20:50.470

When you're adding nodes to the tree in the _TreeNodePopulate() event, set the .SelectionAction property on the node.

```
TreeNode newCNode;
newCNode = new TreeNode("New Node");

newCNode.SelectAction = TreeNodeSelectAction.Select;

//now you can set the .NavigateUrl property to call the same page with some query string parameter to catch in the page_load()

newCNode.NavigateUrl = "~/ThisPage.aspx?args=" + someNodeAction

RootNode.ChildNodes.Add(newCNode); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T07:38:24.963

C＃：

```
TreeNode node = TreeTypes.FindNode(obj.CustomerTypeId.ToString());

TreeTypes.Nodes[TreeTypes.Nodes.IndexOf(node)].Select(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-12-01T13:35:17.110

```
protected void Page_Load(object sender, EventArgs e) 
    {
        if (!IsPostBack)
        {
            TreeView1.SelectedNode.Selected = false;
        }
    } 
```

为我工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T07:06:53.603

您始终可以使用 MouseDown 或 MouseUp 事件并检查它是否是选定的节点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-28T06:57:33.370

我使用该`ShowCheckBox`属性和 Checked 属性来“突出显示”所选项目。当`SelectedNodeChanged`事件发生时：

1.  我将旧选择的`ShowCheckBox`属性和属性设置为 false，并将新选择的属性和属性设置为 true。`Checked``ShowCheckBox``Checked`
2.  我将所选节点用于任何操作
3.  最后，我取消选择所选项目： `myTreeView.SelecteNode.Selected = false`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-01-12T12:26:56.307

我有一个问题，但我解决了！

在服务器端代码中：

```
 protected void MainTreeView_SelectedNodeChanged(object sender, EventArgs e)
    {
        ClearTreeView();
        MainTreeView.SelectedNode.Text = "<span class='SelectedTreeNodeStyle'>" + MainTreeView.SelectedNode.Text + "</span>";
        MainTreeView.SelectedNode.Selected = false;

    }

    public void ClearTreeView()
    {
         for (int i = 0; i < MainTreeView.Nodes.Count; i++)
        {
            for(int j=0;j< MainTreeView.Nodes[i].ChildNodes.Count;j++)
            {
                ClearNodeText(MainTreeView.Nodes[i].ChildNodes[j]);
            }
            ClearNodeText(MainTreeView.Nodes[i]);
        }
    }

    public void ClearNodeText(TreeNode tn)
    {
        tn.Text = tn.Text.Replace("<span class='SelectedTreeNodeStyle'>", "").Replace("</span>", "");
    } 
```

在客户端代码中：

```
 <style type="text/css">
     .SelectedTreeNodeStyle { font-weight: bold;}
 </style> 
```

# .net - 控制台应用程序可以在完成工作之前一直保持活力吗？

> ID：107154
> 
> 赞同：2
> 
> 时间：2008-09-20T04:55:00.830
> 
> 标签：.net, multithreading

我刚刚阅读`Thread.IsBackground`，如果我理解正确，当它设置为`false`Thread 时，它是一个前台线程，这意味着它应该保持活动状态，直到它完成工作，即使应用程序已经退出。现在我用一个 winform 应用程序对此进行了测试，它按预期工作，但是当与控制台应用程序一起使用时，该进程不会保持活动状态，而是立即退出。控制台应用程序与 winform 应用程序的行为是否`Thread.IsBackground`不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T05:51:41.177

该`Thread.IsBackground`属性仅标记线程是否应阻止进程退出。在某种显式退出之前，它不会执行任何魔法来保持线程处于活动状态。

引用[Thread.IsBackground 属性 MSDN](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx "MSDN - Thread.IsBackground 属性（System.Threading）")（强调我的）：

> 线程要么是后台线程，要么是前台线程。后台线程与前台线程相同，只是后台线程不会阻止进程终止。**一旦属于一个进程的所有前台线程都已终止，公共语言运行时就会结束该进程。**任何剩余的后台线程都将停止并且不会完成。

为了让你的控制台应用程序保持活力，你需要有某种循环，它会旋转直到你通过标志或类似的方式要求它停止。Windows 窗体应用程序由于它们的消息泵（我相信）而内置了此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T04:58:57.467

我相信使用基于 winforms 的应用程序，您将获得一个单独的线程来处理消息传递，因此如果“主”线程退出，您仍然有一个线程来保持进程的活动。对于控制台应用程序，一旦 main 退出，除非您启动了前台线程，否则该进程也会终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T05:44:36.343

恕我直言，您真的应该更加明确地了解应用程序的预期语义，并故意<thread>.Join。

# unit-testing - 如何在 KDevelop 中为基于 automake 的项目添加自定义构建步骤？

> ID：107160
> 
> 赞同：2
> 
> 时间：2008-09-20T04:57:02.213
> 
> 标签：unit-testing, automake, kdevelop

我最近开始使用 C++ 和 KDevelop 进行个人编码项目。虽然我一开始只是四处乱窜，但我认为从长远来看，如果我在走得更远之前设置一个适当的单元测试套件会更好。我已经创建了一个单独的测试运行程序可执行文件作为子项目，并且我添加到其中的测试似乎运行正常。至此，成功。

但是，我真的很想让我的单元测试在每次构建时都运行，而不仅仅是在我显式运行它们时。当我将我造成的混乱分解为便利库时尤其如此，每个便利库都可能有自己的测试可执行文件。与其手动运行它们，我想让它们作为构建过程的最后一步运行。我已经查看了项目菜单和 automake 管理器中的所有选项，但我不知道如何设置它。

我想这可能可以通过手动编辑makefile来完成。不幸的是，我的 makefile-fu 有点弱，而且我还担心下次我通过 IDE 更改某些内容时，KDevelop 可能会覆盖我手动所做的任何更改。因此，如果可以选择如何通过 KDevelop 本身执行此操作，我更愿意采用这种方式。

有谁知道我如何让 KDevelop 在构建过程中运行我的测试可执行文件？谢谢！

（我不是 100% 依赖 KDevelop。如果 KDevelop 不能做到这一点，或者如果有一个 IDE 可以让这变得更容易，我可能会被说服切换。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-20T13:00:57.777

尽管您*可以*操纵默认的 `make` 目标来运行测试，但通常不建议这样做，因为每次调用

```
制作
```

将运行所有测试。您应该改用“检查”目标，这是软件包中公认的准标准。通过这样做，测试仅在您运行时开始

```
检查
```

然后，您可以轻松地将 KDevelop 配置为运行“make check”而不仅仅是“make”。

由于您使用的是 automake（通过 KDevelop），因此您不需要自己编写“检查”目标。相反，只需编辑您的“Makefile.am”并设置一些变量：

```
测试 = ...

```

请查看 [automake 文档“支持测试套件”](http://www.gnu.org/software/automake/manual/html_node/Tests.html#Tests) 以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-12-22T18:49:33.850

我是这样工作的：

```
$ cat src/base64.c
//code to be tested
int encode64(...) { ... }

#ifdef UNITTEST
#include <assert.h>
int main(int argc, char* argv[])
{
  assert( encode64(...) == 0 );
  return 0;
}
#endif //UNITTEST
/* end file.c */

$ cat src/Makefile.am
...
check_PROGRAMS = base64-test
base64_test_SOURCES = base64.c
base64_test_CPPFLAGS = -I../include -DUNITTEST
TESTS = base64-test 
```

*make 检查*将构建 src/base64-test 并运行它：

```
$ make check
...
PASS: base64-test
==================
All 1 tests passed
==================
... 
```

现在我试图将它全部封装为一个 m4 宏，以便像这样使用：

```
MAKE_UNITTEST(base64.c) 
```

这应该会产生类似于上述解决方案的东西。

希望这可以帮助。

# algorithm - 八岁的Big-O？

> ID：107165
> 
> 赞同：315
> 
> 时间：2008-09-20T04:59:59.413
> 
> 标签：algorithm, theory, big-o, metrics

我正在询问更多关于这对我的代码意味着什么。我从数学上理解这些概念，我只是很难理解它们在概念上的含义。例如，如果要对数据结构执行 O(1) 操作，我知道它必须执行的操作数量不会增加，因为有更多项目。O(n) 操作意味着您将对每个元素执行一组操作。有人可以在这里填空吗？

*   就像 O(n^2) 操作到底会做什么？
*   如果一个操作是 O(n log(n))，这到底意味着什么？
*   是否有人必须抽大麻才能写出 O(x!)？

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2008-09-20T05:08:03.000

一种思考方式是：

O(N^2) 意味着对于每个元素，您都在对每个其他元素做一些事情，例如比较它们。冒泡排序就是一个例子。

O(N log N) 意味着对于每个元素，您正在做的事情只需要查看元素的 log N。这通常是因为您对可以做出有效选择的元素有所了解。最有效的排序就是一个例子，例如归并排序。

O(N!) 意味着对 N 个元素的所有可能排列做一些事情。旅行推销员就是一个例子，其中有 N! 访问节点的方法，蛮力解决方案是查看每个可能排列的总成本以找到最佳排列。

* * *

## 回答 #2

> 赞同：274
> 
> 时间：2008-09-20T05:23:31.247

Big-O 表示法对您的代码的重要意义在于，当您将其操作的“事物”数量增加一倍时，它将如何扩展。这是一个具体的例子：

```
大O | 10 件事的计算| 计算 100 件事情
-------------------------------------------------- --------------------
O(1) | 1 | 1
O(log(n)) | 3 | 7
O(n) | 10 | 100
O(n log(n)) | 30 | 700
O(n^2) | 100 | 10000

```

因此，采用 O(n log(n)) 的快速排序与 O(n^2) 的冒泡排序。对 10 个事物进行排序时，快速排序比冒泡排序快 3 倍。但是当对 100 件东西进行排序时，它的速度要快 14 倍！显然，选择最快的算法很重要。当您访问具有数百万行的数据库时，这可能意味着您的查询在 0.2 秒内执行与花费数小时之间的差异。

要考虑的另一件事是，糟糕的算法是摩尔定律无法解决的问题。例如，如果您有一些 O(n^3) 的科学计算，并且它每天可以计算 100 件事情，那么将处理器速度加倍只会让您每天处理 125 件事情。但是，将该计算降低到 O(n^2) 并且您每天要做 1000 件事情。

*澄清：* 实际上，Big-O 并没有说不同算法在相同特定大小点上的比较性能，而是关于相同算法在不同大小点上的比较性能：

```
                 计算 计算 计算
大O | 10 件事 | 100 件事情 | 1000 件东西
-------------------------------------------------- --------------------
O(1) | 1 | 1 | 1
O(log(n)) | 1 | 3 | 7
O(n) | 1 | 10 | 100
O(n log(n)) | 1 | 33 | 664
O(n^2) | 1 | 100 | 10000

```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2008-09-20T05:09:53.087

您可能会发现将其可视化很有用：

![大 O 分析](https://i.stack.imgur.com/WcBRI.png)

此外，在 **LogY/LogX**尺度上，函数*n ^(1/2)、n、n ²* 看起来都像[直线](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)，而在**LogY/X**尺度上*2 ^n、 en 、10 ^n*是直线和*^n* *!* 是线性的（看起来像*n log n*）。

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2008-09-20T05:34:54.837

这可能太数学了，但这是我的尝试。（我*是*一名数学家。）

如果某个东西是 O( *f* ( *n* ))，那么它在*n 个*元素上的运行时间将等于*A* *f* ( *n* ) + *B* （例如，以时钟周期或 CPU 操作来衡量）。理解你也有这些常量*A*和*B*的关键是，它们来自特定的实现。*B*本质上表示您的操作的“恒定开销”，例如您执行的一些预处理不依赖于集合的大小。*A*代表您的实际项目处理算法的速度。

不过，关键是您使用大 O 表示法来计算**某些东西的缩放程度**。所以这些常数并不重要：如果你想弄清楚如何从 10 项扩展到 10000 个项目，谁在乎恒定的开销*B*？同样，其他问题（见下文）肯定会超过乘法常数*A*的权重。

所以真正的交易是*f* ( *n* )。如果*f与**n*完全不增长，例如*f* ( *n* ) = 1，那么您将获得惊人的扩展——您的运行时间将始终为*A* + *B*。如果*f随**n*线性增长，即*f* ( *n* ) = *n*，您的运行时间将与预期的一样好——如果您的用户等待 10 ns 10 个元素，他们将等待 10000 ns 10000元素（忽略附加常数）。但如果它增长得更快，比如*n* ²，那么你就有麻烦了；当您获得更大的收藏时，事情将开始放缓太多。*f* ( *n* ) = *n* log( *n* ) 通常是一个很好的折衷方案：您的操作不能简单到提供线性缩放，但是您已经设法减少了一些东西，使其缩放比*f*好得多( *n* ) = *n* ²。

实际上，这里有一些很好的例子：

*   O(1)：从数组中检索元素。我们确切地知道它在内存中的位置，所以我们就去获取它。集合有 10 个项目或 10000 个都没有关系；它仍然在索引（比如说）3，所以我们只是跳转到内存中的位置 3。
*   O( *n* )：从链表中检索元素。在这里，*A* = 0.5，因为平均而言，您必须经过 1/2 的链表才能找到您要查找的元素。
*   O( *n* ² )：各种“哑”排序算法。因为通常他们的策略涉及，对于每个元素 ( *n* )，您查看所有其他元素（因此，另一个*n*，给出*n* ²），然后将自己定位在正确的位置。
*   O( *n* log( *n* ))：各种“智能”排序算法。事实证明，您只需要查看 10 个^(10元素集合中的 10 个元素，就可以相对于集合中的其他)*所有人*对自己进行智能排序。因为其他人*也*将查看 10 个元素，并且紧急行为被恰到好处地编排，因此这足以产生一个排序列表。
*   O( *n* !)：一种“尝试一切”的算法，因为有（与）*n*！*可能解决给定问题的n 个*元素的可能组合。所以它只是遍历所有这些组合，尝试它们，然后在成功时停止。

* * *

## 回答 #5

> 赞同：61
> 
> 时间：2009-01-26T23:52:54.860

don.neufeld 的回答非常好，但我可能会分两部分来解释它：首先，大多数算法都属于 O() 的粗略层次结构。然后，您可以查看其中的每一个，以得出具有该时间复杂度的**典型**算法的作用的草图。

出于实际目的，似乎唯一重要的 O() 是：

*   O(1) “恒定时间” - 所需时间与输入的大小无关。作为一个粗略的类别，我会在这里包括诸如哈希查找和联合查找之类的算法，即使它们实际上都不是 O(1)。
*   O(log(n)) “对数” - 当你获得更大的输入时它会变慢，但是一旦你的输入变得相当大，它就不会发生足够的变化来担心。如果您的运行时可以使用合理大小的数据，您可以使用尽可能多的额外数据淹没它，它仍然可以。
*   O(n) “线性” - 输入越多，花费的时间越长，在一个平衡的权衡中。输入大小的三倍将花费大约三倍的时间。
*   O(n log(n)) “优于二次” - 增加输入大小会造成伤害，但仍然可以管理。该算法可能是不错的，只是潜在问题比那些可以在线性时间内解决的问题更困难（决策相对于输入数据的本地化程度较低）。如果您的输入大小达到那里，不要假设您必须处理两倍的大小而不改变您的架构（例如，通过将事情转移到夜间批处理计算，或者不做每帧的事情）。不过，如果输入大小增加一点也没关系；请注意倍数。
*   O(n^2) “二次” - 它实际上只能达到你输入的一定大小，所以要注意它可以有多大。此外，您的算法可能很糟糕——仔细想想是否有一个 O(n log(n)) 算法可以满足您的需求。一旦您来到这里，就非常感谢我们所拥有的令人惊叹的硬件。不久前，你试图做的事情对于所有实际目的来说都是不可能的。
*   O（n ^ 3）“立方” - 在质量上与O（n ^ 2）并没有什么不同。同样的评论也适用，只是更是如此。一个更聪明的算法很有可能将这个时间缩短到更小的时间，例如 O(n^2 log(n)) 或 O(n^2.8...)，但话又说回来，它很有可能不值得麻烦。（您的实际输入大小已经受到限制，因此更聪明的算法可能需要的常数因素可能会淹没它们在实际案例中的优势。此外，思考很慢；让计算机咀嚼它可能会节省您的时间总体。）
*   O（2 ^ n）“指数” - 问题要么从根本上计算困难，要么你是个白痴。这些问题对他们来说具有可识别的味道。您的输入大小有一个相当具体的硬限制。你会很快知道你是否符合这个限制。

就是这样。还有许多其他可能性适合这些（或大于 O(2^n)），但它们在实践中并不经常发生，并且它们在质量上与其中一种没有太大区别。三次算法已经有点牵强了。我只包括它们是因为我经常遇到它们值得一提（例如矩阵乘法）。

这些类型的算法实际上发生了什么？好吧，我认为你有一个好的开始，尽管有很多例子不符合这些特征。但对于上述情况，我想说它通常是这样的：

*   O(1) - 您最多只能查看固定大小的输入数据块，并且可能没有。示例：排序列表的最大值。
    *   或者您的输入大小是有界的。示例：两个数字相加。（请注意，N 个数字相加是线性时间。）
*   O(log n) - 输入的每个元素都告诉您足以忽略输入其余部分的很大一部分。示例：当您在二进制搜索中查看数组元素时，它的值告诉您可以忽略数组的“一半”而不查看其中任何一个。或者类似地，您查看的元素为您提供了您不需要查看的剩余输入的一小部分的足够摘要。
    *   不过，对半没有什么特别之处——如果你在每一步只能忽略 10% 的输入，它仍然是对数的。
*   O(n) - 你为每个输入元素做一些固定的工作。（但见下文。）
*   O(n log(n)) - 有几个变体。
    *   您可以将输入分成两堆（不超过线性时间），在每一堆上独立解决问题，然后将两堆组合形成最终解决方案。两桩的独立性是关键。示例：经典递归归并排序。
    *   数据上的每一次线性时间传递都会使您获得解决方案的一半。示例：快速排序，如果您考虑每个分区步骤中每个元素到其最终排序位置的最大距离（是的，我知道它实际上是 O(n^2)，因为退化的枢轴选择。但实际上，它属于我的 O(n log(n)) 类别。）
*   O(n^2) - 你必须查看每一对输入元素。
    *   或者你没有，但你认为你有，而且你使用了错误的算法。
*   O(n^3) - 嗯......我对这些没有一个活泼的特征。它可能是其中之一：
    *   你正在乘以矩阵
    *   您正在查看每一对输入，但您所做的操作需要再次查看所有输入
    *   您输入的整个图形结构是相关的
*   O(2^n) - 您需要考虑输入的每个可能子集。

这些都不严谨。特别是非线性时间算法（O（n））：我可以提出一些示例，您必须查看所有输入，然后是其中的一半，然后是其中的一半，等等。或者反过来 - - 您将输入对折叠在一起，然后在输出上递归。这些不符合上面的描述，因为您没有查看每个输入一次，但它仍然以线性时间出现。尽管如此，在 99.2% 的情况下，线性时间意味着查看每个输入一次。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2008-09-20T05:04:27.157

其中很多很容易用非编程的东西来演示，比如洗牌。

通过遍历整副牌找到黑桃 A，然后遍历整副牌找到黑桃 2 对一副纸牌进行排序，如果这副牌已经倒序排列，则以此类推将是最坏的情况 n^2。你看了所有 52 张牌 52 次。

一般来说，真正糟糕的算法不一定是故意的，它们通常是对其他东西的滥用，比如在其他方法中调用一个线性方法，该方法在同一集合上线性重复。

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2010-08-11T19:00:05.340

我尝试通过在 C# 中给出简单的代码示例来进行解释。

为了`List<int> numbers = new List<int> {1,2,3,4,5,6,7,12,543,7};`

O(1) 看起来像

```
return numbers.First(); 
```

O(n) 看起来像

```
int result = 0;
foreach (int num in numbers)
{
    result += num;
}
return result; 
```

O(n log(n)) 看起来像

```
int result = 0;
foreach (int num in numbers)
{
    int index = numbers.length - 1;
    while (index > 1)
    {
        // yeah, stupid, but couldn't come up with something more useful :-(
        result += numbers[index];
        index /= 2;
    }
}
return result; 
```

O(n ² ) 看起来像

```
int result = 0;
foreach (int outerNum in numbers)
{
    foreach (int innerNum in numbers)
    {
        result += outerNum * innerNum;
    }
}
return result; 
```

O(n!) 看起来，嗯，想出任何简单的东西都累了。
但我希望你明白一般的意思吗？

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2008-09-20T10:58:20.583

好的 - 这里有一些非常好的答案，但几乎所有答案似乎都犯了同样的错误，而且这是一个普遍使用的错误。

非正式地，我们写 f(n) = O( g(n) ) 如果直到一个比例因子并且对于所有大于某个 n0 的 n，g(n)**大于**f(n)。也就是说，f(n) 的**增长速度不快**于 g(n)，或者**由**g(n) 限制。这并没有告诉我们 f(n) 增长的速度有多快，除非它保证不会比 g(n) 差。

一个具体的例子：n = O( 2^n )。我们都知道 n 的增长速度比 2^n 慢得多，因此我们有权说它是由上述指数函数限制的。n 和 2^n 之间有很大的空间，所以它不是一个非常*严格*的界限，但它仍然是一个合法的界限。

为什么我们（计算机科学家）使用界限而不是精确？因为 a) 边界通常更容易证明，并且 b) 它为我们提供了表达算法属性的简写。如果我说我的新算法是 O(n.log n)，这意味着在最坏的情况下，它的运行时间将由 n.log n 在 n 输入上从上方限定，对于足够大的 n（尽管请参阅下面的评论关于什么时候我可能不是指最坏的情况）。

相反，如果我们想说一个函数的增长速度与其他函数一样快，我们使用*theta*来说明这一点（我会写 T( f(n) ）来表示 \Theta of f(n) in markdown） . **T( g(n) ) 是从上到下**由 g(n)界定的简写，同样，直到一个比例因子并且渐近。

即 f(n) = T( g(n) ) <=> f(n) = O(g(n)) 和 g(n) = O(f(n))。在我们的示例中，我们可以看到 n != T( 2^n ) 因为 2^n != O(n)。

为什么要关心这个？因为在您的问题中，您会写“有人必须抽大麻才能写出 O(x!) 吗？” 答案是否定的——因为基本​​上你写的所有东西都会受到阶乘函数的限制。快速排序的运行时间是 O(n!) - 这不是一个严格的界限。

这里还有另一个微妙的维度。通常，当我们使用 O( g(n) ) 表示法时，我们谈论的是**最坏情况输入**，因此我们正在做一个复合语句：在最坏情况下，运行时间不会比采用 g(n) 的算法差) 步骤，再次模缩放和足够大的 n。但有时我们想谈谈*平均*甚至*最佳*情况的运行时间。

与以往一样，香草快速排序是一个很好的例子。在最坏的情况下是 T(n^2)（实际上至少需要 n^2 步，但不会显着更多），但在平均情况下是 T(n.log n)，也就是说预期的步数与 n.log n 成正比。在最好的情况下，它也是 T(n.log n) - 但你可以改进它，例如，检查数组是否已经排序，在这种情况下，最好的情况下运行时间是 T(n)。

这与您关于这些界限的实际实现的问题有何关系？好吧，不幸的是，O() 表示法隐藏了现实世界的实现必须处理的常量。因此，尽管我们可以说，例如，对于 T(n^2) 操作，我们必须访问每对可能的元素，但我们不知道必须访问它们多少次（除了它不是n)。所以我们可能不得不访问每一对 10 次，或者 10^10 次，而 T(n^2) 语句没有区别。低阶函数也被隐藏了——我们可能不得不访问每对元素一次，每个元素访问 100 次，因为 n^2 + 100n = T(n^2)。O(·) 符号背后的想法是，对于足够大的 n，这根本不重要，因为 n^2 比 100n 大得多，以至于我们没有 甚至注意到 100n 对运行时间的影响。但是，我们经常处理“足够小”的 n，以便常数因素等产生真正的、显着的差异。

例如，快速排序（平均成本 T(n.log n)）和堆排序（平均成本 T(n.log n)）都是具有相同平均成本的排序算法——但快速排序通常比堆排序快得多。这是因为堆排序比快速排序对每个元素进行更多的比较。

这并不是说 O(·) 表示法没有用，只是不精确。对于小 n 来说，这是一个相当生硬的工具。

（作为这篇论文的最后一点，请记住 O( ) 表示法只是描述了任何函数的增长——它不一定是时间，它可以是内存、分布式系统中交换的消息或所需的 CPU 数量并行算法。）

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2009-06-09T22:02:24.680

我向我的非技术朋友描述它的方式是这样的：

考虑多位数加法。很好的老式铅笔和纸添加。你7-8岁时学的那种。给定两个三或四位数字，您可以很容易地找出它们相加的内容。

如果我给你两个 100 位的数字，然后问你它们加起来是什么，即使你必须使用铅笔和纸，也很容易弄清楚。一个聪明的孩子可以在几分钟内完成这样的加法。这只需要大约 100 次操作。

现在，考虑多位乘法。您可能在大约 8 或 9 岁时就知道了这一点。你（希望）做了很多重复的练习来学习它背后的机制。

现在，想象一下我给了你同样的两个 100 位数字并告诉你将它们相乘。这将是一项艰巨**得多的**任务，需要你几个小时才能完成——而且你不可能不犯错误。原因是（这个版本的）乘法是 O(n^2); 底部数字中的每个数字都必须乘以顶部数字中的每个数字，总共留下大约 n^2 次操作。对于 100 位数字，即 10,000 次乘法。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-09-20T05:06:59.040

不，O(n) 算法并不意味着它将对每个元素执行操作。Big-O 表示法为您提供了一种独立于您的实际机器来谈论算法的“速度”的方法。

O(n) 意味着你的算法所花费的时间随着你的输入增加而线性增长。O(n^2) 意味着您的算法所花费的时间随着输入的平方而增长。等等。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2009-01-27T00:17:12.800

我的想法是，你的任务是清理由选择 N 的邪恶恶棍 V 引起的问题，并且你必须估计当他增加 N 时需要多长时间才能完成你的问题。

O(1) -> 增加 N 真的没有任何区别

O(log(N)) -> 每次 V 加倍 N，你必须花费额外的时间 T 来完成任务。V 再次将 N 翻倍，而您花费相同的金额。

O(N) -> 每当 V 翻倍 N 时，您花费的时间就会翻倍。

O(N^2) -> 每次 V 加倍 N 时，您花费的时间是原来的 4 倍。（这不公平！！！）

O(N log(N)) -> 每次 V 翻倍 N，你花费的时间是原来的两倍，再加上一点。

这些是算法的界限；计算机科学家想要描述大 N 值需要多长时间。（当您对密码学中使用的数字进行因式分解时，这一点变得很重要——如果计算机加速了 10 倍，那么还有多少位呢？您必须使用以确保他们仍然需要 100 年才能破解您的加密，而不仅仅是 1 年？）

如果对相关人员产生影响，某些界限可能会有奇怪的表达。对于某些算法，我在 Knuth 的计算机编程艺术中的某处看到了 O(N log(N) log(log(N))) 之类的东西。（不记得我的头顶上哪一个）

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-01-27T00:47:52.100

由于某种原因尚未触及的一件事：

当您看到具有 O(2^n) 或 O(n^3) 之类的算法或其他讨厌的值时，这通常意味着您必须接受对问题的不完美答案才能获得可接受的性能。

在处理优化问题时，像这样爆炸的正确解决方案很常见。在合理的时间范围内提供的几乎正确的答案要好于在机器腐烂很久之后才提供的正确答案。

考虑国际象棋：我不确切知道正确的解决方案是什么，但它可能类似于 O(n^50) 甚至更糟。理论上任何计算机都不可能真正计算出正确的答案——即使你使用宇宙中的每一个粒子作为计算元素，在宇宙的生命周期内尽可能短的时间内执行一个运算，你仍然有很多零. （量子计算机能不能解决是另一回事。）

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2009-05-03T15:14:17.450

*   是否有人必须抽大麻才能写出 O(x!)？

不，只需使用 Prolog。如果您在 Prolog 中编写排序算法，仅描述每个元素应该比前一个元素大，然后让回溯为您进行排序，那将是 O(x!)。也称为“排列排序”。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2009-06-03T04:36:03.153

**Big-O背后的“直觉”**

想象一下两个函数在 x 上的“竞争”，因为 x 接近无穷大：f(x) 和 g(x)。

现在，如果从某个点（某个 x）开始，一个函数总是比另一个函数具有更高的值，那么让我们称这个函数比另一个函数“更快”。

因此，例如，如果对于每个 x > 100，您看到 f(x) > g(x)，那么 f(x) 比 g(x)“快”。

在这种情况下，我们会说 g(x) = O(f(x))。f(x) 对 g(x) 构成了某种“速度限制”，因为最终它会通过它并永远离开它。

这不完全是[big-O notation](http://en.wikipedia.org/wiki/Big_O_notation)的定义，它还指出 f(x) 对于某个常数 C 只需大于 C*g(x) （这只是另一种说法，你不能通过将 g(x) 乘以一个常数因子来帮助 g(x) 赢得比赛 - f(x) 最终总是会获胜）。正式定义也使用绝对值。但我希望我设法让它变得直观。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-09-20T06:09:50.637

我喜欢唐纽菲尔德的回答，但我想我可以添加一些关于 O(n log n) 的内容。

使用简单的分而治之策略的算法可能是 O(log n)。最简单的示例是在排序列表中查找某物。您不会从头开始扫描它。你走到中间，然后决定是向后还是向前，跳到最后一个地方，然后重复这个过程，直到找到你要找的项目。

如果您查看快速排序或合并排序算法，您会发现它们都采用将要排序的列表分成两半、对每一半进行排序（使用相同的算法，递归地）然后重新组合这两半的方法。这种*递归*分治策略将是 O(n log n)。

如果你仔细考虑一下，你会发现快速排序对整个 n 个项目执行 O(n) 分区算法，然后对 n/2 个项目执行 O(n) 分区两次，然后对 n/4 个项目执行 4 次，等等......直到你在 1 个项目上得到一个 n 分区（这是退化的）。将 n 分成两半得到 1 的次数大约是 log n，每一步都是 O(n)，所以递归分治是 O(n log n)。Mergesort 以另一种方式构建，从 1 项的 n 次重组开始，以 n 项的 1 次重组结束，其中两个排序列表的重组为 O(n)。

至于吸烟破解写一个 O(n!) 算法，除非你别无选择，否则你就是。上面给出的旅行商问题被认为是这样一个问题。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-01-27T00:55:17.810

把它想象成垂直堆叠乐高积木 (n) 并跳过它们。

O(1) 意味着在每一步，你什么都不做。高度保持不变。

O(n) 意味着在每一步，你堆叠 c 个块，其中 c1 是一个常数。

O(n^2) 意味着在每一步，你堆叠 c2 xn 个块，其中 c2 是一个常数，n 是堆叠块的数量。

O(nlogn) 意味着在每一步，你堆叠 c3 xnx log n 个块，其中 c3 是一个常数，n 是堆叠块的数量。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-20T06:35:35.923

大多数 Jon Bentley 的书籍（例如*Programming Pearls*）都以非常实用的方式涵盖了这些内容。[他的这次演讲](http://video.google.com/videoplay?docid=-1031789501179533828)包括对快速排序的一个这样的分析。

虽然与这个问题并不完全相关，但 Knuth 提出了一个[有趣的想法](http://micromath.wordpress.com/2008/04/14/donald-knuth-calculus-via-o-notation/)：在高中微积分课上教授 Big-O 符号，尽管我觉得这个想法很古怪。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-20T05:20:59.020

要理解 O(n log n)，请记住 log n 表示 n 的 log-base-2。然后看每个部分：

当您对集合中的每个项目进行操作时，O(n) 或多或少是。

O(log n) 是当操作数与您提高 2 的指数相同时，以获得项目数。例如，二进制搜索必须将集合切成一半 log n 次。

O(n log n) 是一个组合——你正在对集合中的每个项目进行二进制搜索。有效的排序通常通过对每个项目执行一个循环来操作，并且在每个循环中进行良好的搜索以找到合适的位置来放置有问题的项目或组。因此 n * log n。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-20T16:55:50.490

只是为了回应我上面帖子中的几条评论：

**Domenic** - 我在这个网站上，我在乎。不是为了学究气，而是因为我们——作为程序员——通常关心精度。以某些人在这里所做的风格错误地使用 O( ) 表示法会使其毫无意义；在此处使用的约定下，我们也可以说某事需要 n^2 单位时间作为 O( n^2 )。使用 O( ) 不会增加任何东西。我所说的不仅仅是常用用法和数学精度之间的微小差异，而是有意义和没有意义之间的差异。

我认识很多很多优秀的程序员，他们准确地使用了这些术语。说“哦，我们是程序员，所以我们不在乎”会降低整个企业的成本。

**onebyone** - 好吧，虽然我同意你的观点，但不是真的。对于任意大的 n，它不是 O(1)，这是 O(·) 的一种定义。它只是表明 O(·) 对于有界 n 的适用性有限，我们宁愿实际谈论所采取的步骤数，而不是该数字的界限。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-04-20T02:13:36.247

告诉你 8 岁的 log(n) 意味着你必须将长度为 n 的 log 砍成两半才能缩小到 n=1 的次数：p

O(n log n) 通常是排序 O(n^2) 通常是比较所有元素对

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-06-09T21:49:10.773

假设您有一台可以解决一定规模问题的计算机。现在想象一下，我们可以将性能提高几倍。每次翻倍可以解决多大的问题？

如果我们能解决两倍大小的问题，那就是 O(n)。

如果我们有一些不是一个的乘数，那就是某种多项式复杂度。例如，如果每次加倍允许我们将问题大小增加约 40%，则为 O(n^2)，约 30% 为 O(n^3)。

如果我们只是增加问题的大小，它是指数级的或更糟。例如，如果每次加倍意味着我们可以解决一个更大的问题，那就是 O(2^n)。（这就是为什么使用合理大小的密钥来暴力破解密码密钥实际上变得不可能：128 位密钥需要大约 16 万亿倍的处理量是 64 位的。）

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-10-22T19:47:10.940

还记得乌龟和兔子（乌龟和兔子）的寓言吗？

从长远来看，乌龟赢了，但从短期来看，兔子赢了。

这就像 O(logN)（乌龟）与 O(N)（野兔）。

如果两种方法的 big-O 不同，则存在一个 N 水平，其中一个会获胜，但 big-O 没有说明 N 有多大。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2014-12-22T18:22:15.520

为了对提出的问题保持真诚，我会像回答一个 8 岁的孩子一样回答这个问题

假设一个冰淇淋卖家准备了许多不同形状的冰淇淋（比如 N 个），它们以有序的方式排列。你想吃中间的冰淇淋

案例1：-只有吃完所有比它小的冰淇淋才能吃冰淇淋你必须吃掉所有准备好的冰淇淋的一半（输入）。答案直接取决于输入的大小解决方案将是o(N) 阶

案例2：- 可以直接吃中间的冰淇淋

解决方案将是 O(1)

案例3：只有当你吃完所有比它小的冰淇淋时，你才能吃冰淇淋，并且每次吃冰淇淋都让另一个孩子（每次都是新孩子）吃掉他所有的冰淇淋总时间为N + N + N.......(N/2) 次解将是 O(N2)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-20T05:12:23.457

log(n) 表示对数增长。一个例子是分而治之的算法。如果您在数组中有 1000 个已排序的数字（例如 3、10、34、244、1203 ...）并且想要在列表中搜索一个数字（找到它的位置），您可以从检查索引 500 处的数字。如果它低于您所寻求的值，则跳至 750。如果它高于您所寻求的值，则跳至 250。然后重复该过程，直到找到您的值（和键）。每次我们跳过一半的搜索空间，我们可以剔除测试许多其他值，因为我们知道数字 3004 不能高于数字 5000（请记住，它是一个排序列表）。

n log(n) 则表示 n * log(n)。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-05-21T11:08:33.853

除了技术术语和数学概念之外，我将尝试为一个真正的八岁男孩写一个解释。

> 就像手术到底会`O(n^2)`做什么？

如果您参加聚会，并且聚会中`n`有人，包括您。考虑到人们可能会忘记他们在某个时候与谁握手，需要多少次握手才能使每个人都与其他人握手。

注意：这近似于一个`n(n-1)`足够接近的单纯形屈服`n^2`。

> 如果手术是什么意思`O(n log(n))`？

你最喜欢的球队赢了，他们排着队，队里有`n`球员。考虑到您将与每个玩家握手多次，玩家人数中有多少个数字，您与每个玩家握手需要多少次握手`n`。

注意：这将产生`n * log n to the base 10`.

> 有没有人必须抽crack才能写`O(x!)`？

你是个有钱的孩子，你的衣柜里有很多衣服，`x`每种衣服都有抽屉，抽屉是相邻的，第一个抽屉有一件物品，每个抽屉里的衣服和抽屉里的衣服一样多它的左边还有一个，所以你有`1`帽子，`2`假发，..`(x-1)`裤子，然后是`x`衬衫。现在，您可以通过多少种方式使用每个抽屉中的单个物品来装扮。

注意：这个例子表示决策树中有多少叶子在哪里`number of children = depth`，这是通过`1 * 2 * 3 * .. * x`

# ruby-on-rails - 在 Windows XP 上构建 Ruby

> ID：107173
> 
> 赞同：4
> 
> 时间：2008-09-20T05:03:45.553
> 
> 标签：ruby-on-rails, ruby, development-environment

有没有人有一套很好的说明来从 windows XP 的源代码构建/编译 Ruby？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-01T15:02:03.843

[Luis Lavena](http://blog.mmediasys.com/)维护 Ruby One-Click 安装程序二进制文件。他在 Ruby 论坛上的博客和帖子绝对是开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T05:24:03.227

[http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/184380](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/184380)

我通常会为 Windows 安装一个二进制文件。如果你只需要安装 Ruby，速度会更快。但是您可能正在修改 ruby​​ 源..无论如何..

**更新：**我今天最终从源代码编译 Ruby ......这对我 [有用 http://madcoderspeak.blogspot.com/2009/06/how-to-compile-ruby-from-source-on.html](http://madcoderspeak.blogspot.com/2009/06/how-to-compile-ruby-from-source-on.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-01T13:55:29.993

我同意二进制分发是您在 Windows 上使用 Ruby 的最佳选择，但是，就像 Gishu 提到的，您可能会对其进行一些修改。如果是这种情况，我会使用[Cygwin](http://www.cygwin.com/)从源代码构建它。这将为您提供熟悉的工具集，用于从源代码构建软件。

然而[，Ruby 论坛上的以下线程](http://www.ruby-forum.com/topic/58141)似乎对使用 Microsoft 的 Visual C++ 工具包和其他一些 .NET 添加在 Windows 中构建 Ruby 进行了非常积极的讨论。

祝你好运！

# .net - 您可以仅使用一个文件的源代码来调试 .NET 应用程序吗？

> ID：107179
> 
> 赞同：1
> 
> 时间：2008-09-20T05:06:11.507
> 
> 标签：.net, visual-studio, debugging, symbols

我想在 Visual Studio 中调试应用程序，但我只有 1 个类的源代码。我只需要单步执行该文件中的一个函数，但我不明白我需要做什么。我认为这些步骤通常是这样的：

1.  在 VS 中打开文件
2.  加载“符号”（.PDB 文件）
3.  附加到正在运行的进程

我知道如何做#1 和#3，但没有.PDB 文件我不知道如何做#2。是否可以为此生成 .PDB 文件以使其工作？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-20T05:09:09.487

您需要 *.pdb 文件（您的帖子中的第 2 步）这些文件包含源代码和已编译程序集之间的映射。所以你的步骤是正确的。如果您的源文件与原始文件有差异，请在 BP 的属性对话框中勾选“允许源代码与原始版本不同”。

[Visual Studio 中的断点和跟踪点](http://www.blackwasp.co.uk/VSBreakpoints.aspx)

如果您没有 PDB 文件，您可以尝试使用[Reflector.FileDisassembler](http://www.denisbauer.com/NETTools/FileDisassembler.aspx)或[FileGenerator For Reflector](http://www.codeplex.com/FileGenReflector)反编译您的项目。他们可以重新编译这些文件以获取 PDB

还可以看看[Deblector](http://www.codeplex.com/deblector) - Reflector 的调试插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T05:08:57.660

您需要属于您尝试调试的应用程序的符号文件 (.PDB) 文件。

[MSDN：PDB 文件](http://msdn.microsoft.com/en-us/library/ms241903.aspx)

> Visual Studio 调试器使用 EXE 或 DLL 文件中 PDB 的路径来查找 project.pdb 文件。如果调试器在该位置找不到 PDB 文件，或者路径无效，例如，如果项目已移动到另一台计算机，则调试器将搜索包含 EXE 的路径，后跟“选项”对话框中指定的符号路径. 该路径一般是 Symbols 节点中的 Debugging 文件夹。调试器不会加载与正在调试的二进制文件不匹配的 PDB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T05:09:30.407

符号文件是 .pdb 文件。如果将其放在可执行文件旁边，则会加载符号并指向源文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T05:25:09.823

在您的情况下，“符号”表示您要调试的程序集的 pdb 文件。调试器不需要您拥有所有源代码，只需要您拥有匹配的 pdb。pdb 是在程序集的构建过程中生成的，不幸的是，您不能事后创建一个。如果您没有 pdb，则需要在低于源代码的级别进行调试。

如果您在机器上构建了组件，那么在您附加时会找到这些符号。在这种情况下，只需在源代码上设置一个断点并执行使该代码运行所需的任何操作，您就会遇到断点。

如果您没有构建它，则需要找到程序集的 pdb。Debug/Windows/Modules 下的模块窗口通常可以帮助您告诉您在进程中加载​​的程序集以及版本信息和时间戳。

如果程序集可能有多个版本（例如保留许多夜间构建，或者来自持续集成构建的最后 20 个左右的版本），您将需要这些信息。

希望有帮助。

# synchronization - 如果没有特殊的硬件指令，一个代码将如何测试和设置行为？

> ID：107184
> 
> 赞同：-1
> 
> 时间：2008-09-20T05:06:59.600
> 
> 标签：synchronization, primitive, test-and-set

我发现的大多数实现都需要硬件指令来执行此操作。但是我强烈怀疑这是必需的（如果是，我不知道为什么......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-20T05:26:45.730

如果这就是您所要求的，您不需要测试和设置指令来获得互斥锁定。Dijkstra 在 1965 年描述了我所知道的第一个互斥算法。论文的标题是“Solution of a problem in concurrent programming control”，在 Google 上搜索附近的副本。原始算法根本不需要硬件的特殊支持，但在 CPU 中提供原子指令可显着提高性能。

测试和设置、原子交换和加载链接 + 条件存储都是 CPU 提供的常见原语。所有都可以用来实现互斥，然后可以用来实现你想要的任何锁定语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T06:27:49.437

如果你想要一种跨架构的方式，并且正在使用 gcc，那么你可以使用 gcc 的 atomic builtins：

[http://gcc.gnu.org/onlinedocs/gcc/Atomic-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc/Atomic-Builtins.html)

调用这些将导致当前构建架构的硬件特定机器指令。在那些不支持它们的情况下，编译将失败。（我认为...）

# c# - 为什么在干净构建后会生成不同的 dll，而没有代码更改？

> ID：107196
> 
> 赞同：16
> 
> 时间：2008-09-20T05:09:49.220
> 
> 标签：c#, .net, visual-studio, build-process

当我干净地构建我的 C# 项目时，生成的 dll 与之前构建的（我单独保存的）不同。没有进行代码更改，只是清理并重建。

Diff 显示 DLL 中的一些字节发生了变化——在开头附近很少，在结尾附近也很少，但我无法弄清楚这些代表什么。有没有人知道为什么会发生这种情况以及如何防止它？

这是使用 Visual Studio 2005 / WinForms。

**更新：**不使用自动版本递增，或签署程序集。如果它是某种时间戳，我如何防止 VS 写入它？

**更新：**查看 Ildasm/diff 后，似乎以下项目有所不同：

*   文件开头的 PE 头中的两个字节。
*   <PrivateImplementationDetails>{ *guid* } 部分
*   字符串表末尾附近的神秘部分（想知道为什么，我没有更改字符串）
*   文件末尾的部分装配信息。

不知道如何消除这些，如果可能的话......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-20T06:52:17.913

我最好的猜测是您看到的更改字节是在构建时自动生成的内部使用的元数据列。

一些 Ecma-335 Partition II（CLI 规范元数据定义）列可以在每次构建时更改，即使源代码根本没有更改：

*   Module.Mvid：构建时生成的 GUID。总是在变化，每次构建。
*   AssemblyRef.HashValue：如果您引用自旧版本以来也已重建的另一个程序集，则可能会更改。

如果这真的非常困扰你，我最好的找出究竟发生了什么变化的建议是区分实际的元数据表。获得这些的方法是使用 ildasm MetaInfo 窗口：

```
View > MetaInfo > Raw:Header,Schema,Rows // important, otherwise you get very basic info from the next step

View > MetaInfo > Show! 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-20T06:48:13.977

我认为这将是[PE32 规范](http://msdn.microsoft.com/en-us/library/ms809762.aspx)的 IMAGE_FILE_HEADER 标头中的 TimeDateStamp 字段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-20T05:12:30.243

可能是版本号或修订号已更改。

# c# - 如何加载特定版本的程序集

> ID：107216
> 
> 赞同：4
> 
> 时间：2008-09-20T05:19:01.177
> 
> 标签：c#, .net, assemblies, 64-bit

为了完成一些测试，即使我运行的是 32 位版本的 Windows，我也需要加载 64 位版本的程序集。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T05:31:30.180

我不确定你为什么要这样做，但我想你可以。如果您不做任何事情来告诉它，CLR 将加载特定于您正在使用的 CPU 的程序集版本。这通常是你想要的。但是我有一次需要加载程序集的中性 IL 版本。我使用[Load 方法](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.load(VS.71).aspx)来指定版本。我没有尝试过（这里的其他人建议它不适用于可执行程序集），但我想您可以执行相同的操作来指定要加载 64 位版本。（您必须指定是否需要 AMD64 或 IA64 版本。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T05:24:30.527

来自 CLR 通过 C# (Jeff Richter)：

“如果您的程序集文件仅包含类型安全的托管代码，那么您正在编写的代码应该可以在 32 位和 64 位版本的 Windows 上运行。您的代码无需更改源代码即可在任一版本的 Windows 上运行。

事实上，编译器生成的 EXE/DLL 文件将在 32 位 Windows 以及 64 位 Windows 的 x64 和 IA64 版本上运行！换句话说，一个文件将在任何安装了 .NET Framework 版本的机器上运行。”

" C# 编译器提供了 /platform 命令行开关。此开关允许您指定生成的程序集是否可以在仅运行 32 位 Windows 版本的 x86 机器、仅运行 64 位 Windows 的 x64 机器或运行 Intel Itanium 机器上运行仅限 64 位 Windows。如果不指定平台，则默认为 anycpu，表示生成的程序集可以在任何版本的 Windows 上运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-20T05:21:23.090

32 位 Windows 无法在没有 VM/emutalor 的情况下运行 64 位可执行文件

32 位 Windows 可以编译以在 64 位 Windows 上执行

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-20T05:24:22.337

不，您不能在运行 32 位版本的 Windows 的系统上运行为 64 位编译的程序集。

# programming-languages - 测量单位是 F# 独有的吗？

> ID：107243
> 
> 赞同：20
> 
> 时间：2008-09-20T05:31:24.143
> 
> 标签：programming-languages, f#, functional-programming

[我正在阅读 Andrew Kennedy 的关于F# 中的度量单位的](http://blogs.msdn.com/andrewkennedy/archive/2008/08/29/units-of-measure-in-f-part-one-introducing-units.aspx)系列博文，在很多情况下这很有意义。有没有其他语言有这样的系统？

编辑：更清楚地说，我的意思是灵活的测量单位系统，您可以在其中任意定义自己的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-20T05:45:34.203

TI-89 BASIC 算不算？输入`54_kg * (_c^2)`，它会给你一个焦耳的答案。

除此之外，我不记得有任何语言内置了它，但是任何具有体面的 OO 的语言都应该让你自己的语言变得简单。这意味着其他人可能已经这样做了。

谷歌确认。例如，[这是 Python 中的一个](http://groups.google.com/group/comp.lang.python/browse_frm/thread/8ed89844218b92c7/0f05aea353c1563d)。 `__repr__`可以很容易地修改以选择最合适的派生单位等。

CPAN 有几个用于 Perl 的模块：[Physics::Unit](http://search.cpan.org/~klortho/Physics-Unit-0.04/lib/Physics/Unit.pm)、[Data::Dimensions](http://search.cpan.org/~ajgough/Data-Dimensions-0.04/lib/Data/Dimensions.pm)、[Class::Measure](http://search.cpan.org/~bluefeet/Class-Measure-0.03/lib/Class/Measure.pm)、[Math::Units::PhysicalValue](http://search.cpan.org/~jettero/Math-Units-PhysicalValue-0.71/PhysicalValue.pm)以及其他一些可以转换但不会真正将值与单位结合起来的模块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-17T00:17:21.283

Nemerle 在 2006 年进行了编译器检查的计量单位。

[http://nemerle.org](http://nemerle.org)

[http://nemerle.org/forum.old/viewtopic.php?t=265&view=previous&sid=00f48f33fafd3d49cc6a92350b77d554](http://nemerle.org/forum.old/viewtopic.php?t=265&view=previous&sid=00f48f33fafd3d49cc6a92350b77d554)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-17T01:13:25.820

C++ 有它，形式为[boost::units](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_units.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-20T05:34:07.320

我不确定这是否真的很重要，但`RPL`我的 HP-48 计算器上的系统确实具有类似的功能。我能写出`40_gal 5_l +`156.416 升的正确答案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-20T05:35:57.613

我相信我看到[堡垒](http://projectfortress.sun.com/Projects/Community)支持这个，我看看能不能找到链接。

我找不到特定的链接，但语言规范在几个地方提到了它。1.0 语言规范还说，尺寸和单位暂时从规范中删除（以及一大堆其他特性）以匹配当前的实现。这是一项正在进行的工作，所以我想事情在不断变化。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-19T02:29:01.140

F# 是第一个支持此功能的主流语言。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-17T00:13:56.707

[在http://jcp.org/en/jsr/detail?id=275](http://jcp.org/en/jsr/detail?id=275)上还有一个单位的 Java 规范，您已经可以从这里使用它[http://jscience.org/](http://jscience.org/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-03-08T09:09:15.020

Nemerle 有比 F# 更好的东西！

你应该检查这个：[http](http://rsdn.ru/forum/src/1823225.flat.aspx#1823225) ://rsdn.ru/forum/src/1823225.flat.aspx#1823225 。

这真的很棒。你可以在这里下载： [http ://rsdn.ru/File/27948/Oyster.Units.0.06.zip](http://rsdn.ru/File/27948/Oyster.Units.0.06.zip)

一些例子：

```
def m3 = 1 g;
def m4 = Si.Mass(m1);

WriteLine($"Mass in SI: $m4, in CGS: $m3");

def x1 = Si.Area(1 cm * 10 m);

WriteLine($"Area of 1 cm * 10 m = $x1 m"); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-20T05:36:09.703

我很确定艾达有它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-14T23:02:27.850

好吧，我专门为 C# 中的单元制作了 QuantitySystem 库，但是它不是编译时检查

但我试图让它按照我的意愿运行

它还支持扩展，因此您可以定义您的独特单位

[http://QuantitySystem.CodePlex.com](http://QuantitySystem.CodePlex.com)

它也可以区分扭矩和工作:) [这对我很重要]

图书馆的方法是从维度到单位，到目前为止我所看到的都是单位方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-17T00:27:02.590

我相信您可以通过***仔细地***猴子修补一些基类来使用大多数动态语言（javascript、python、ruby）来做到这一点。但是，在使用英制测量时，您可能会遇到问题。

# vba - 如何重新绘制 Word 2003 菜单栏

> ID：107254
> 
> 赞同：1
> 
> 时间：2008-09-20T05:35:23.650
> 
> 标签：vba, ms-word

我有一个 Word 2003 .dot 模板，它根据活动文档的条件更改其菜单。触发设置 CommandBarButton 控件的和属性的
、`DocumentChange`和`DocumentOpen`事件`NewDocument`。`Word.Application``.Visible``.Enabled`

在切换活动文档时，通过更改`Visible`属性显示的控件正确显示，但已启用/禁用的文本按钮不会更改外观。您可以通过将鼠标悬停在它们上来显示启用的控件，但是在您将窗口放在前面之前，禁用的控件不会重新绘制。

有没有一种简单的方法可以向菜单栏发送重绘消息，以模拟隐藏和暴露？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T16:24:58.557

您正在使用控件的可见和启用属性。但是您是否尝试隐藏/取消隐藏整个命令栏以刷新它？

```
application.CommandBars.ActiveMenuBar.visible = false
application.CommandBars.ActiveMenuBar.visible = true 
```

# version-control - 多久提交一次对源代码控制的更改？

> ID：107264
> 
> 赞同：221
> 
> 时间：2008-09-20T05:37:10.777
> 
> 标签：version-control

我应该多久提交一次对源代码控制的更改？在每个小功能之后，还是只针对大功能？

我正在做一个项目，并且有一个长期的功能要实施。目前，我在完成每一块工作之后，即实现每个子功能并修复错误。在发现错误后，我什至在为某些功能添加了新的测试块之后提交。

但是，我担心这种模式。在富有成效的一天工作中，我可能会做出 10 次提交。鉴于我使用的是 Subversion，这些提交会影响整个存储库，所以我想知道制作这么多确实是一个好习惯吗？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2008-09-20T05:43:06.347

每当我完成对可编译和运行的代码的“完整思考”时，我都会签到。这通常最终在 15-60 分钟之间。有时它可能会更长，但我总是尝试检查是否有很多我不想在失败的情况下重写的代码更改。我通常还确保我的代码能够编译，并在我下班回家前签到。

我不会担心做出“太多”的提交/签入。当您必须重写某些东西时，它真的很糟糕，并且能够以小增量回滚以防万一。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2008-09-20T08:33:52.333

当您说您担心您的“提交会影响整个存储库”时——您指的是整个存储库的修订号增加的事实吗？我不知道 Subversion 使用多少位来存储它，但我很确定你不会用完修订号！ **许多提交不是问题。** 你的承诺是隔壁人的十倍，而且你根本不会增加你的碳足迹。

单个函数或方法应该以它的作用命名，如果名称太长，它就做的太多了。我尝试对签入应用相同的规则：**签入注释应该准确描述更改完成的内容，如果注释太长，我可能一次更改太多。**

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2008-09-20T05:47:03.950

我喜欢 Jeff Atwood 的这篇小文章：早点[入住，经常入住](http://blog.codinghorror.com/check-in-early-check-in-often/)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2008-09-20T05:39:53.610

我个人提交所有已完成/稳定/编译的逻辑代码组，并尽量不要在没有提交我那天所做的事情的情况下离开这一天。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2008-09-20T05:41:07.023

如果您正在进行重大更改并且担心影响其他使用代码的人，您可以创建一个新分支，然后在更改完成后合并回主干。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2011-01-08T10:28:27.757

如果您的版本控制注释超过一两句话，那么您可能提交的频率不够高。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2008-09-20T05:47:46.727

我遵循开源的口头禅（释义）——尽早提交，经常提交。

基本上每当我认为我添加了有用的功能（无论多么小）时，都不会给其他团队成员带来问题。

这种经常提交的策略在持续集成环境中特别有用，因为它允许针对其他开发工作进行集成测试，从而及早发现问题。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2008-09-20T05:45:55.327

每当我完成一项任务时，我都会承诺。这通常需要 30 分钟到 1 小时。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2008-09-20T05:42:55.333

不要提交实际上不起作用的代码。不要将您的存储库用作备份解决方案。

相反，以自动方式在本地备份您的不完整代码。Time Machine 照顾我，还有很多适用于其他平台的免费程序。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2008-09-20T07:50:03.093

我使用的经验法则是，当被签入的文件组可以被单个签入注释覆盖时签入。

这通常是为了确保签入是原子的，并且评论可以很容易地被其他开发人员消化。

当您的更改影响具有应用程序范围的配置文件（例如 spring 上下文文件或 struts 配置文件）时尤其如此。如果您在签入之前进行了多个“组”更改，它们的影响会在配置文件中重叠，从而导致 2 个组相互合并。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2008-09-20T14:20:14.823

我不认为你应该担心多久。这里重要的是什么，何时以及为什么。说你必须每 3 小时或每 24 小时提交一次确实没有意义。当你有事情要提交的时候就提交，如果你没有就不要提交。

[以下是我推荐的版本控制最佳实践](http://blog.looplabel.net/2008/07/28/best-practices-for-version-control/)的摘录：

> *[...] 如果您同时对一个项目进行许多更改，请将它们分成逻辑部分并在多个会话中提交。这使得跟踪单个更改的历史变得更加容易，这将为您在以后尝试查找和修复错误时节省大量时间。例如，如果您正在实现功能 A、B 和 C 并修复错误 1、2 和 3，那么这应该会导致总共至少六次提交，每个功能一个，每个错误一个。如果您正在开发一个大功能或进行大量重构，请考虑将您的工作分成更小的部分，并在每个部分完成后进行提交。此外，在对多个逻辑模块实施独立更改时，请分别提交对每个模块的更改，即使它们是更大更改的一部分。
> 
> 理想情况下，您永远不应该带着未提交的硬​​盘更改离开办公室。如果您正在处理更改会影响其他人的项目，请考虑使用分支来实现您的更改，并在完成后将它们合并回主干。在提交对其他项目（以及其他人）所依赖的库或项目的更改时，请确保您不会通过提交无法编译的代码来破坏他们的构建。但是，拥有无法编译的代码并不是避免提交的借口。改用分支。[...]*

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-09-20T05:41:26.677

您当前的模式是有道理的。记住你是如何*使用*这个源代码控制的：如果你必须回滚，或者你想做一个差异，该怎么办？在这些情况下，您描述的块似乎完全是正确的差异：差异将准确地向您展示在实现错误 #（在签入日志中指定）时发生了哪些变化，或者准确地显示了用于实现某个功能的新代码。同样，回滚一次只会触及一件事。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2008-09-20T05:50:37.310

我也喜欢在完成一大块工作后做出承诺，这通常是一天几次。我认为小提交比大提交更容易看到发生了什么。如果您担心提交过多，您可以考虑创建一个分支并在整个功能完成后将其合并回主干。

这是一篇相关的博客文章：[编码恐怖：提前签到，经常签到](http://www.codinghorror.com/blog/archives/001165.html)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2010-11-27T14:23:47.593

正如其他人所说，尝试提交一个足够“完整”的逻辑块，它不会妨碍其他开发人员的方式（例如，它构建并通过自动化测试）。

每个开发团队/公司必须为每个分支定义什么是“足够完整”。例如，您可能有只需要代码才能构建的功能分支、还需要代码才能通过自动化测试的 Trunk 以及指示某些内容已通过 QA 测试的标签……或类似的东西。

我并不是说这是一个很好的模式。我只是指出“完成”的方式取决于您的团队/公司的政策。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2010-10-22T09:16:49.370

我也喜欢定期检查。那是我每一次朝着目标迈出的一步。

这**通常是每隔几个小时**。

我的困难是找到愿意并且能够**执行这么多代码审查**的人。

我们公司的政策是，我们需要在签入任何内容之前进行代码审查，这是有道理的，但部门中并不总是有人有时间立即执行代码审查。可能的解决方案：

1.  每次签到的工作量更大；更少的签到==更少的评论。
2.  更改公司签到政策。如果我刚刚做了一些重构并且单元测试都运行绿色，也许我可以放宽规则？
3.  搁置更改，直到有人可以执行审查并继续工作。如果审阅者不喜欢您的代码并且您必须重新设计，这可能会出现问题。通过“搁置”更改来处理任务的不同阶段可能会变得混乱。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2008-09-20T05:40:23.810

在你想到它的那一刻。

（只要您签到的东西是安全的）

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2008-09-20T05:41:08.317

取决于你的源代码系统和你还有什么。如果您使用的是 Git，请在完成一个步骤时提交。我使用 SVN，我喜欢在完成一个完整的功能时提交，所以，每隔一到五个小时。如果我使用 CVS，我也会这样做。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2008-09-20T07:31:23.187

我同意其中的几个回答：不要签入无法编译的代码；如果您担心对代码或其更改进行“备份”，请使用个人分支或存储库；当逻辑单元完成时签入。

我要补充的另一件事是，根据您的环境，入住率可能会随时间而变化。例如，在项目的早期，在组件的每个功能块完成后进行检查对于安全和具有修订历史都是有意义的（我正在考虑早期位在开发后期位时被重构的情况）。另一方面，在项目后期，完全完整的功能变得更加重要，尤其是在集成开发/测试期间。半集成或半修复对任何人都没有帮助。

至于在每个错误修复后检查：除非修复是微不足道的，绝对！没有什么比发现一个签入包含三个修复程序并且其中一个需要回滚更痛苦的了。在这种情况下，似乎开发人员在一个区域修复了三个错误并展开哪个更改到哪个错误修复是一场噩梦。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-20T05:37:58.480

我喜欢每 30-60 分钟提交一次更改，只要它编译干净并且在单元测试中没有回归。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-09-20T05:43:06.363

好吧，您可以拥有自己的分支，您可以随时向其提交，当您完成您的功能时，您可以将其合并到主干。

关于 Commits 的频率，我是这么想的，如果我的硬盘坏了，我没有提交什么东西，对我来说会有多大的痛苦——这个东西的量对我来说大约是 2 个小时的工作。

当然，我从不提交不能编译的东西。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2008-09-20T05:45:54.513

每天至少一次。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2008-09-20T05:53:10.380

我没有每次提交的具体时间限制，一旦测试通过，我倾向于提交并且我对代码感到满意。我不会提交无法编译的代码，或者在失败的情况下我不会感觉恢复的状态

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2008-09-20T06:39:43.170

您必须一方面在安全性和可恢复性之间取得平衡，另一方面又要在整个项目的变更管理上取得平衡。

我用过的最好的方案对这个问题有两个答案。

我们使用了 2 个完全独立的存储库：一个是项目范围的存储库，另一个是我们自己的个人存储库（当时我们使用的是 rcs）。

我们会非常定期地检查我们的个人存储库，几乎每次您保存打开的文件时。因此，个人存储库基本上是一个大而长的撤消缓冲区。

一旦我们有一大块代码可以编译，测试正常并被接受为准备好进行一般使用，它就会被签入项目存储库。

不幸的是，该系统依赖于使用不同的 VCS 技术才能工作。在使用两个相同类型的 VCS（例如，两个颠覆存储库）时，我没有找到任何令人满意的方法来实现相同的结果

但是，通过在 subversion 存储库中创建“个人”开发分支，我得到了可以接受的结果——定期检查分支，然后在完成后合并到主干中。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2008-09-20T07:40:25.923

如果您正在处理不会发布的分支，则提交始终是安全的。

但是，如果您与其他开发人员共享它，提交非工作代码可能会有点烦人（特别是如果它位于重要的地方）。通常我只提交有效“工作”的代码——不是说它已经过全面测试，而是我已经确定它确实可以编译并且不会立即失败。

如果您使用的是集成的错误跟踪器，如果您修复了两个错误，则进行单独的提交可能会有所帮助，以便提交日志可以针对正确的错误。但是话又说回来，有时一个代码更改会修复两个错误，因此您只需选择要针对哪个错误（除非您的系统允许一个提交与多个错误相关联）

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2008-09-20T08:38:29.950

我仍然相信“经常提交，尽早提交”这句话。[我更喜欢像Mercurial](http://www.selenic.com/mercurial/wiki/)这样的去中心化 VCS ，提交几件事并稍后将其推送到上游是没有问题的。

这确实是一个常见的问题，但真正的问题是：你能提交未完成的代码吗？

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2008-09-22T17:05:54.690

每当您完成一些有效的代码时，如果他们在更新中获得它就不会搞砸其他任何人。

请确保您正确评论。

# macos - 快银死了吗？

> ID：107288
> 
> 赞同：11
> 
> 时间：2008-09-20T05:45:54.187
> 
> 标签：macos, quicksilver, app-launcher

在阅读了 BlackTree 不再支持 QuickSilver 并且已经开源之后，我注意到越来越多的人切换到/建议其他应用程序启动器，即 Buttler 和 LaunchBar。

QuickSilver 是否仍然相关？自从开源以来，有没有人经历过任何不稳定？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-20T12:16:22.797

快银还活着，而且很好。至少有一些努力可以让它继续运行，更新并重组和清理代码库。从 Google 代码中查看[代码。](http://code.google.com/p/blacktree-alchemy/)

至于启动应用程序，甚至 Spotlight 都比不上它在 Quicksilver 中的速度。

当然，Quicksilver 真正的乐趣不仅仅是启动应用程序和使用触发器、脚本和许多插件。Quicksilver 让我的工作流程更上一层楼。没有它我会迷路的。

**更新：**自从发布此消息后，我切换并使用了 LaunchBar 一段时间。那是在 QuickSilver 似乎濒临死亡的时期。喜欢 LaunchBar，不需要切换回 QuickSilver。不过最近，我离开了 LaunchBar，一直在使用 Alfred。我会极力推荐它。对我来说，LaunchBar 和 Alfred 非常接近。但是，在美学和操作上，Alfred 比 LaunchBar 更适合我的口味。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-20T06:03:56.810

它对我来说仍然运行稳定。没有它我会很痛苦。

是的，如果您只将它用于“应用程序启动器”，我建议您切换，但启动应用程序就像白带 Quicksilver。我不知道有任何程序可以让您以如此简单的方式简单地告诉您的计算机该做什么。甚至 Spotlight 也不会记住您通常键入的用于识别对象或动作的键。

Firefox 的 Ubiquity 相当不错，但它被锁定在浏览器中......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T06:04:48.620

我有一段时间没有使用 OS X，但我得到的印象是 Spotlight 在很大程度上否定了首先使用启动器的原因。Quicksilver 有一些很酷的东西，比如内置的直接对象，但总的来说，它主要用于启动应用程序，而 Spotlight 现在可以以同样快的速度做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-20T06:51:51.017

当 Leopard 出来时，我也放弃了 QuickSilver 一段时间。我试过聚光灯。我放弃了，然后回来了。QuickSilver 速度更快，而且我错过的功能更多。

我没有注意到运行 B54 (3815) 的任何不稳定性 (Leopard) - 不过看起来开源版本是 B56A3。

当与 Parallels/VMWare Fusion 集成以启动 Windows 应用程序时，QuickSilver 非常棒。您不会像各种 OSX 插件那样获得深度集成，但它肯定有助于双操作系统的可用性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-04-21T16:05:14.060

我喜欢 QS 并同意它的生产力如此之高，以至于我愿意忍受它的缺陷。不过，在它启动并运行之前，我通常必须启动它几次。为了解决这个问题，我创建了一个小[快银启动器应用程序](http://techblog.willshouse.com/2011/04/21/quicksilver-fix-crashing-on-launch/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T06:31:54.217

我整天都在使用 quicksilver（在最新版本的 OSX 上）；并且没有聚光灯不会否定它...... quicksilver 启动应用程序的速度仍然*快得多*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T12:46:16.453

在 Quicksilver 停止更新一段时间后，我迁移到[LaunchBar](http://www.obdev.at/products/launchbar/)。Quicksilver 偶尔会发生崩溃，并且可能会占用大量资源。LaunchBar 的功能基本相同，但没有这些问题。虽然它不是免费的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T13:06:48.993

我不知道 Quicksilver 没有得到积极的支持。它完成了我目前需要做的所有事情。

刚刚安装了 LaunchBar，但我无法将其设置为`Option`+`Space`以“启动”，不使用它我无法处理它，我太习惯于 Spotlight on `Command`+`Space`并且`Ctrl`+`Space`用于 VS 2008：P

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T22:09:41.513

我确实想念的一件事是使用 QS 通过电子邮件快速将附件发送给我通讯录中的人。突出显示文件，激活 QS，当前选择选项卡邮件到.. 选项卡人的名字真是太棒了。

在 10.5.5 更新后，我发现 Spotlight 可以解决我最初使用 Quicksilver 解决的 99% 的问题，而且速度现在几乎相同。Spotlight 对于查找您可能不记得上次看到它的地点或时间的信息非常宝贵。除非 QS 的重大改写让我重新评估它，否则我怀疑 Spotlight 将是我需要和使用的全部。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-26T18:35:53.667

那里有几个活跃的分支机构，我想我目前正在运行 B56 并喜欢它。我每天依赖的脚本、触发器、对象太多了……没有它我会迷失方向的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-09-10T08:28:49.793

现在是 201，它仍然运行强劲！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-03-07T17:14:01.140

QuickSilver 还活着，而且很好。

[您可以在http://qsapp.com/](http://qsapp.com/)找到所有活动的中心网站
GitHub（用于源代码和问题跟踪）在[https://github.com/quicksilver/Quicksilver](https://github.com/quicksilver/Quicksilver)

最新版本 B58 (3841) 在 Snow Leopard (10.6.6) 上相当稳定。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-11-16T22:54:47.440

不[，它回来了，宝贝。](http://qsapp.com/)

# .net - 在 SVN 中组织共享 .net 程序集的最佳方式是什么？

> ID：107292
> 
> 赞同：4
> 
> 时间：2008-09-20T05:46:24.297
> 
> 标签：.net, svn, version-control

我们正在启动一个新的 SOA 项目，其中包含许多共享的 .net 程序集。这些程序集的代码将存储在 SVN 中。

在开发阶段，我们希望能够将这些程序集编码为一个完整的解决方案，并尽可能减少 SVN 的“摩擦”。

当项目进入更多的维护模式时，组件将在单个级别上进行维护。

在不让分支、标记和自动构建成为维护噩梦的情况下，在 SVN 中组织这些库的最佳方式是什么，并且也适用于 VS 2008 IDE？

您是否在每个库级别设置主干/分支/标签，并尝试在编译时以某种方式将它们全部放在一起，或者为了简单起见，最好将它们作为一个大项目保留在各处复制代码？有没有使用externs的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-20T07:34:18.733

我们在公司所做的是建立一个**工具**库，然后是一个**项目**库。**工具**仓库是一个 Subversion 仓库，组织结构如下：

```
/svn/tools/
   vendor1/
     too11/
       1.0/
       1.1/
       latest = a copy of vendor1/tool1/1.1
     tool2/
       1.0/
       1.5/
       latest = a copy of vendor1/tool2/1.5
   vendor2/
     foo/
       1.0.0/
       1.1.0/
       1.2.0/
       latest = a copy of vendor2/foo/1.2.0 
```

每次我们从供应商处获得工具的新版本时，都会在其供应商、名称和版本号下添加该工具，并更新“最新”标签。

**[澄清：** 这不是典型的源存储库——它旨在存储特定版本的“已安装”图像。因此 /svn/tools/nunit/nunit2/2.4 将是目录树的顶部，其中包含将 NUnit 2.4 安装到目录并将其导入工具库的结果。可能存在源代码和示例，但主要关注的是使用该工具所需的可执行文件和库。如果我们需要修改供应商工具，我们会在单独的存储库中进行，并将结果发布到该存储库。**]**

其中一个供应商是我的公司，并且对于每个工具、组件以及我们内部发布的任何内容都有一个单独的部分。

* * *

项目**存储**库是一个标准的 Subversion 存储库，具有您通常期望的主干、标签和分支。任何给定的项目将如下所示：

```
/svn/
  branches/
  tags/
  trunk/
    foo/
      source/
      tools/
      publish/
      foo-build.xml (for NAnt)
      foo.build (for MSBuild) 
```

工具目录有一个 Subversion **svn:externals**属性集，它链接到该项目所需的每个工具或程序集的适当版本（特定版本或“最新”）。当 CruiseControl.NET 构建 'foo' 项目时，发布任务将填充 'publish' 目录，因为打算部署 'foo' 程序集，然后执行以下颠覆命令：

```
svn import publish /svn/tools/vendor2/foo/1.2.3
svn delete /svn/tools/vendor2/foo/latest
svn copy /svn/tools/vendor2/foo/1.2.3 /svn/tools/vendor2/foo/latest 
```

开发人员照常处理他们的项目，并让构建自动化处理细节。正常的颠覆更新将拉取最新版本的外部工具以及项目更新。

如果您有很多工具相互依赖，您可以（手动）配置 CruiseControl.NET 以在它们的依赖关系发生变化时触发下属项目的构建，但我们还不需要走那么远。

> 注意：为清楚起见，所有 Subversion 存储库路径都已缩短。我们实际上使用 Apache+SVN 和两个独立的服务器，但您应该根据自己的需要进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T05:52:27.307

我们在开发阶段（在一个有这些负载的项目中）对共享程序集所做的是，我们将它们放在一个网络共享（N Drive）类型的地方，每个开发人员都从那里引用它们。

我们的构建过程将始终使用最新版本更新此共享。这样，实际程序集就不必保存在源代码管理中。只有代码。

# c++ - 更改指向数组的指针以获取特定的数组元素

> ID：107294
> 
> 赞同：6
> 
> 时间：2008-09-20T05:46:34.543
> 
> 标签：c++, pointers

我理解指针和引用的整体含义（或者至少我认为我理解），我也理解当我使用**new**时，我正在动态分配内存。

我的问题如下：

如果我要使用`cout << &p`，它将显示`p`. 有没有办法可以操纵这个“虚拟内存位置”？

例如，以下代码显示了一个`int`s 数组。

如果我想显示 的值`p[1]`并且我知道 的“虚拟内存位置” `p`，我能否以某种方式执行“ `&p + 1`”并获得`p[1]`with的值`cout << *p`，它现在将指向数组中的第二个元素？

```
int *p;
p = new int[3];

p[0] = 13;
p[1] = 54;
p[2] = 42; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T05:49:02.930

当然，您可以操作指针来访问数组中的不同元素，但是您需要操作指针的内容（即 p 指向的地址），而不是指针本身的地址。

```
int *p = new int[3];
p[0] = 13;
p[1] = 54;
p[2] = 42;

cout << *p << ' ' << *(p+1) << ' ' << *(p+2); 
```

每个加法（或减法）表示数组中的后续（先前）元素。如果 p 指向地址为 12345 的 4 字节变量（例如典型的 32 位 PC 上的*int*），则 p+1 将指向 12349，而不是 12346。请注意，您希望在取消引用之前更改 p 包含的值访问它指向的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T05:53:44.777

不完全的。*是指针*`&p`的地址。将指的是一个更远的地址。你想做的是*`p`*`&p+1``int*`

```
p=p+1; /* or ++p or p++ */ 
```

现在当你做

```
cout << *p; 
```

您将得到 54。不同之处在于，`p`包含*ints 数组的起始*地址，而*p*`&p`的地址。要移动一个项目，您需要指向*int 数组*的更远，而不是沿着堆栈的更远，这是存在的地方。**`p`**

 **如果您只有，`&p`那么您需要执行以下操作：

```
int **q = &p; /* q now points to p */
*q = *q+1;
cout << *p; 
```

如果我没记错的话，那也会输出 54 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T05:54:25.587

自从我使用指针以来已经有一段时间（很多年）了，但我知道如果 p 指向数组的开头（即 p[0]）并且你递增它（即 p++）那么 p 现在将指向 p [1]。

我认为您必须取消引用 p 才能获得该值。您可以通过将 * 放在指针前面来取消引用指针。

所以 *p = 33 将 p[0] 更改为 33。

我猜要获得第二个元素，你会使用 *(p+1) 所以你需要的语法是：

```
cout << *(p+1) 
```

或者

```
cout << *(++p) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-20T06:11:23.517

我喜欢这样做：

```
&p[1] 
```

在我看来，它看起来更整洁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T07:02:01.993

将 C 和 C++ 中的“指针类型”视为在 CPU 内存空间中的字节上叠加一长串逻辑**单元**，从字节 0 开始。每个单元的宽度（以字节为单位）取决于指针的“类型”。每种指针类型都放置具有不同单元格宽度的行。`"int *"`指针放置一行 4 字节的单元，因为 int 的存储宽度是 4 字节。A`"double *"`为每个单元格设置一个 8 字节的行；一个`"struct foo *"`指针放置一行，每个单元格的宽度为单个`"struct foo"`，无论是什么。任何“事物”的“地址”是保存“事物”的行中单元格的字节偏移量，从 0 开始。

**指针算法基于行中的单元格，而不是字节。**"`*(p+10)`" 是对“p”之后的第 10 个单元格的引用，其中单元格大小由 p 的类型决定。如果“p”的类型是“int”，则“p+10”的地址是 p 之后的 40 个字节; 如果 p 是指向 1000 字节长的结构的指针，“p+10”是 p 之后的 10,000 字节。（请注意，编译器可以为结构选择最佳大小，该大小可能比您想象的要大；这个是由于“填充”和“对齐”。例如，讨论的 1000 字节结构实际上可能每个单元占用 1024 个字节，因此“p+10”实际上是 p 之后的 10,240 个字节。）

# unit-testing - 在浏览器中测试 extjs 代码有什么建议，最好是使用 selenium？

> ID：107314
> 
> 赞同：92
> 
> 时间：2008-09-20T05:53:50.377
> 
> 标签：unit-testing, extjs, selenium, web-testing

我们一直在使用 selenium 成功地处理高级网站测试（除了模块级别的大量 python 文档测试）。然而，现在我们在很多页面上都使用 extjs，事实证明很难将 Selenium 测试合并到像网格这样的复杂组件中。

有没有人成功地为基于 extjs 的网页编写自动化测试？许多谷歌搜索发现有类似问题的人，但答案很少。谢谢！

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2008-10-20T19:01:39.017

用 Selenium 测试 ExtJS 的最大障碍是 ExtJS 不呈现标准的 HTML 元素，而且 Selenium IDE 会天真地（并且正确地）生成针对仅作为装饰的元素的命令 - 帮助 ExtJS 处理整个桌面的多余元素 -外观和感觉。以下是我在针对 ExtJS 应用程序编写自动化 Selenium 测试时收集的一些提示和技巧。

# 一般提示

## 定位元素

通过在 Firefox 上使用 Selenium IDE 记录用户操作来生成 Selenium 测试用例时，Selenium 将根据 HTML 元素的 id 记录操作。然而，对于大多数可点击元素，ExtJS 使用生成的 id，例如“ext-gen-345”，即使没有对代码进行任何更改，它们也可能在随后访问同一页面时发生变化。在为测试记录用户操作后，需要手动完成所有依赖于生成的 id 的操作并替换它们。可以进行两种类型的替换：

## 用 CSS 或 XPath 定位器替换 Id 定位器

CSS 定位器以“css=”开头，XPath 定位器以“//”开头（“xpath=”前缀是可选的）。CSS 定位器不那么冗长，更易于阅读，应该优于 XPath 定位器。但是，在某些情况下需要使用 XPath 定位器，因为 CSS 定位器根本无法解决它。

## 执行 JavaScript

由于 ExtJS 执行的复杂渲染，一些元素需要的不仅仅是简单的鼠标/键盘交互。例如，Ext.form.CombBox 并不是一个真正的`<select>`元素，而是一个带有分离下拉列表的文本输入，它位于文档树的底部。为了正确模拟 ComboBox 选择，可以先模拟单击下拉箭头，然后单击出现的列表。但是，通过 CSS 或 XPath 定位器定位这些元素可能很麻烦。另一种方法是定位 ComoBox 组件本身并调用其上的方法来模拟选择：

```
var combo = Ext.getCmp('genderComboBox'); // returns the ComboBox components
combo.setValue('female'); // set the value
combo.fireEvent('select'); // because setValue() doesn't trigger the event 
```

在 Selenium 中，该`runScript`命令可用于以更简洁的形式执行上述操作：

```
with (Ext.getCmp('genderComboBox')) { setValue('female'); fireEvent('select'); } 
```

## 应对 AJAX 和慢速渲染

当用户操作导致页面转换或重新加载时，Selenium 对所有等待页面加载的命令都有“*AndWait”风格。但是，由于 AJAX 提取不涉及实际的页面加载，因此这些命令不能用于同步。解决方案是利用视觉线索，例如 AJAX 进度指示器的存在/不存在或网格中行的外观、附加组件、链接等。例如：

```
Command: waitForElementNotPresent
Target: css=div:contains('Loading...') 
```

有时一个元素只会在一定时间后出现，这取决于用户操作导致视图更改后 ExtJS 渲染组件的速度。与其在`pause`命令中使用任意延迟，理想的方法是等到感兴趣的元素进入我们的掌握范围内。例如，在等待某个项目出现后单击它：

```
Command: waitForElementPresent
Target: css=span:contains('Do the funky thing')
Command: click
Target: css=span:contains('Do the funky thing') 
```

依赖任意暂停并不是一个好主意，因为在不同浏览器或不同机器上运行测试导致的时间差异会使测试用例变得不稳定。

## 不可点击的项目

`click`该命令无法触发某些元素。这是因为事件侦听器实际上在容器上，在其子元素上监视鼠标事件，最终会冒泡到父元素。选项卡控件就是一个示例。要单击选项卡，您必须`mouseDown`在选项卡标签处模拟一个事件：

```
Command: mouseDownAt
Target: css=.x-tab-strip-text:contains('Options')
Value: 0,0 
```

## 字段验证

表单字段（Ext.form.* 组件）关联了正则表达式或vtypes进行验证`validationDelay`，会在用户输入文本后或字段丢失时立即触发验证，并有一定的延迟（参见默认设置为250ms的属性）焦点——或模糊（见`validateOnDelay`属性）。为了在发出 type Selenium 命令以在字段中输入一些文本后触发字段验证，您必须执行以下任一操作：

*   **触发延迟验证**

    当字段接收到 keyup 事件时，ExtJS 会触发验证延迟计时器。要触发这个计时器，只需发出一个虚拟的 keyup 事件（不管你使用哪个键，因为 ExtJS 会忽略它），然后是一个比validationDelay 更长的短暂暂停：

    ```
    Command: keyUp
    Target: someTextArea
    Value: x
    Command: pause
    Target: 500 
    ```

*   **触发立即验证**

    您可以在字段中注入模糊事件以触发立即验证：

    ```
    Command: runScript
    Target: someComponent.nameTextField.fireEvent("blur") 
    ```

## 检查验证结果

验证后，您可以检查是否存在错误字段：

```
Command: verifyElementNotPresent   
Target: //*[@id="nameTextField"]/../*[@class="x-form-invalid-msg" and not(contains(@style, "display: none"))]

Command: verifyElementPresent   
Target: //*[@id="nameTextField"]/../*[@class="x-form-invalid-msg" and not(contains(@style, "display: none"))] 
```

请注意，“显示：无”检查是必要的，因为一旦显示错误字段然后需要隐藏它，ExtJS 将简单地隐藏错误字段而不是将其从 DOM 树中完全删除。

# 特定于元素的提示

## 单击 Ext.form.Button

*   **选项1**

    命令：点击目标：css=button:contains('Save')

    按标题选择按钮

*   **选项 2**

    命令：单击目标：css=#save-options 按钮

    按 id 选择按钮

## 从 Ext.form.ComboBox 中选择一个值

```
Command: runScript
Target: with (Ext.getCmp('genderComboBox')) { setValue('female'); fireEvent('select'); } 
```

首先设置值，然后在有观察者的情况下显式触发 select 事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-31T09:30:58.340

这个[博客](http://developertips.blogspot.co.uk/search/label/WebDriver)对我帮助很大。他写了很多关于这个话题的文章，而且看起来它仍然很活跃。这家伙似乎也很欣赏好的设计。

他基本上谈到了使用发送 javascript 进行查询并使用 Ext.ComponentQuery.query 方法以与您在 ext 应用程序内部相同的方式检索内容。这样您就可以使用 xtypes 和 itemIds 而不必担心尝试解析任何疯狂的自动生成的东西。

我发现[这篇文章](http://developertips.blogspot.co.uk/2013/09/locate-extjs-component-selenium-web.html)特别有帮助。

可能很快就会在这里发布一些更详细的内容 - 仍然试图让我的头脑了解如何正确地做到这一点

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-08T23:38:55.543

我一直在用 selenium 测试我的 ExtJs Web 应用程序。最大的问题之一是在网格中选择一个项目以便对其进行处理。

为此，我编写了辅助方法（在 SeleniumExtJsUtils 类中，它是一组有用的方法，可以更轻松地与 ExtJs 交互）：

```
/**
 * Javascript needed to execute in order to select row in the grid
 * 
 * @param gridId Grid id
 * @param rowIndex Index of the row to select
 * @return Javascript to select row
 */
public static String selectGridRow(String gridId, int rowIndex) {
    return "Ext.getCmp('" + gridId + "').getSelectionModel().selectRow(" + rowIndex + ", true)";
} 
```

当我需要选择一行时，我只需调用：

```
selenium.runScript( SeleniumExtJsUtils.selectGridRow("<myGridId>", 5) ); 
```

为此，我需要在网格上设置我的 id，而不是让 ExtJs 生成它自己的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-09-24T11:35:51.597

要检测该元素是否可见，请使用以下子句： `not(contains(@style, "display: none")`

最好使用这个：

```
visible_clause = "not(ancestor::*[contains(@style,'display: none')" +
    " or contains(@style, 'visibility: hidden') " + 
    " or contains(@class,'x-hide-display')])"

hidden_clause = "parent::*[contains(@style,'display: none')" + 
    " or contains(@style, 'visibility: hidden')" + 
    " or contains(@class,'x-hide-display')]" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-20T06:21:25.927

您能否更深入地了解您在 extjs 测试中遇到的问题类型？

我觉得有用的一个 Selenium 扩展是[waitForCondition](http://wiki.openqa.org/display/SEL/waitForCondition)。如果您的问题似乎与 Ajax 事件有关，您可以使用 waitForCondition 等待事件发生。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-06T01:24:36.750

Ext JS 网页可能很难测试，因为它们最终生成的 HTML 很复杂，就像使用 Ext JS 网格一样。

[HTML5 Robot](http://html5robot.com)通过使用一系列最佳实践来处理这个问题，这些最佳实践如何基于非动态的属性和条件可靠地查找组件并与之交互。然后，它提供了使用您需要与之交互的所有 HTML、Ext JS 和 Sencha Touch 组件执行此操作的快捷方式。它有 2 种口味：

1.  **Java** - 熟悉的基于 Selenium 和 JUnit 的 API，它内置了对所有现代浏览器的 Web 驱动程序支持。
2.  **Gwen** - 一种人性化的语言，用于快速轻松地创建和维护浏览器测试，带有自己的集成开发环境。所有这些都基于 Java API。

例如，如果您想查找包含文本“Foo”的 Ext JS 网格行，您可以在 Java 中执行以下操作：

```
findExtJsGridRow("Foo"); 
```

...您可以在 Gwen 中执行以下操作：

```
extjsgridrow by text "Foo" 
```

关于如何使用 Ext JS 特定组件，有很多关于[Java和 Gwen 的文档。](http://html5robot.com/java-api/locating-components/)该文档还详细介绍了所有这些 Ext JS 组件的生成 HTML，您也可能会发现这些组件很有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-14T02:43:38.680

通过页面上的网格 ID 获取网格的有用提示：我认为您可以从此 API 扩展更多有用的功能。

```
 sub get_grid_row {
        my ($browser, $grid, $row)  = @_;

        my $script = "var doc = this.browserbot.getCurrentWindow().document;\n" .
            "var grid = doc.getElementById('$grid');\n" .
            "var table = grid.getElementsByTagName('table');\n" .
            "var result = '';\n" .
            "var row = 0;\n" . 
            "for (var i = 0; i < table.length; i++) {\n" .
            "   if (table[i].className == 'x-grid3-row-table') {\n".
            "       row++;\n" . 
            "       if (row == $row) {\n" .
            "           var cols_len = table[i].rows[0].cells.length;\n" .
            "           for (var j = 0; j < cols_len; j++) {\n" .
            "               var cell = table[i].rows[0].cells[j];\n" .
            "               if (result.length == 0) {\n" .
            "                   result = getText(cell);\n" .
            "               } else { \n" .
            "                   result += '|' + getText(cell);\n" .
            "               }\n" .
            "           }\n" .
            "       }\n" .
            "   }\n" .
            "}\n" .
            "result;\n";

        my $result = $browser->get_eval($script);
        my @res = split('\|', $result);
        return @res;
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-25T12:58:19.937

## 通过自定义 HTML 数据属性更轻松地进行测试

从[Sencha 文档](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.AbstractComponent-cfg-itemId)：

> 当没有可用的对象引用时，itemId 可用作获取对组件的引用的替代方法。不要使用带有 Ext.getCmp 的 id，而是使用带有 Ext.container.Container.getComponent 的 itemId，它将检索 itemId 或 id。由于 itemId 是容器内部 MixedCollection 的索引，因此 itemId 的范围仅限于容器本地——避免与需要唯一 id 的 Ext.ComponentManager 的潜在冲突。

覆盖`Ext.AbstractComponent`'s`onBoxReady`方法，如果存在，我将自定义数据属性（其名称来自`testIdAttr`每个组件的自定义属性）设置为组件的`itemId`值。将`Testing.overrides.AbstractComponent`类添加到`application.js`文件的`requires`数组中。

```
/**
 * Overrides the Ext.AbstracComponent's onBoxReady
 * method to add custom data attributes to the
 * component's dom structure.
 *
 * @author Brian Wendt
 */
Ext.define('Testing.overrides.AbstractComponent', {
  override: 'Ext.AbstractComponent',

  onBoxReady: function () {
    var me = this,
      el = me.getEl();

    if (el && el.dom && me.itemId) {
      el.dom.setAttribute(me.testIdAttr || 'data-selenium-id', me.itemId);
    }

    me.callOverridden(arguments);
  }
}); 
```

此方法为开发人员提供了一种在其代码中重用描述性标识符并在每次呈现页面时都可以使用这些标识符的方法。不再搜索非描述性的、动态生成的 ID。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-10T23:34:49.470

我们正在开发一个使用 selenium 的测试框架，并遇到了 extjs 的问题（因为它是客户端渲染）。我发现在 DOM 准备好后查找元素很有用。

```
public static boolean waitUntilDOMIsReady(WebDriver driver) {
    def maxSeconds = DEFAULT_WAIT_SECONDS * 10
    for (count in 1..maxSeconds) {
        Thread.sleep(100)
        def ready = isDOMReady(driver);
        if (ready) {
            break;
        }
    }
}

public static boolean isDOMReady(WebDriver driver){
    return driver.executeScript("return document.readyState");
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-03-30T05:13:25.987

对于不是正式 HTML 的复杂 UI，xPath 始终是您可以信赖的东西，但在使用 ExtJs 实现不同的 UI 时会有点复杂。

您可以使用 Firebug 和 Firexpath 作为 firefox 扩展来测试某个元素的 xpath，并将完整的 xpath 作为参数简单地传递给 selenium。

例如在java代码中：

```
String fullXpath = "xpath=//div[@id='mainDiv']//div[contains(@class,'x-grid-row')]//table/tbody/tr[1]/td[1]//button"

selenium.click(fullXpath); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-10T06:57:13.210

当我使用 WebDriver 测试 ExtJS 应用程序时，我使用了下一种方法：我通过标签的文本查找字段并`@for`从标签中获取属性。例如，我们有一个标签

```
<label id="dynamic_id_label" class="TextboxLabel" for="textField_which_I_am_lloking_for">
Name Of Needed Label
<label/> 
```

我们需要给 WebDriver 一些输入：`//input[@id=(//label[contains(text(),'Name Of Needed Label')]/@for)]`.

因此，它将从`@for`属性中选择 id 并进一步使用它。这可能是最简单的情况，但它为您提供了定位元素的方法。当你没有标签时会更难，但是你需要找到一些元素并编写你的 xpath 来寻找兄弟姐妹，下降/上升元素。

# javascript - 如何从 C 中获取 JSObject 属性的值？

> ID：107317
> 
> 赞同：0
> 
> 时间：2008-09-20T05:54:29.080
> 
> 标签：javascript, spidermonkey, accessor

在 SpiderMonkey 中，如何从我的 C 代码中获取 JSObject 的属性值？

```
static JSBool
JSD_getter(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
{
    jsval js_id;
    JS_GetProperty(cx, obj, "id", &js_id); // js_id has JavaScript type
    int c_id;
    JS_ValueToInt32(cx, js_id, &c_id); // Now, c_id contains the actual value
}                                      // of obj.id, as a C native type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T06:07:17.583

JS_GetProperty()

# controller - 使用 USB 控制器作为 Visual Studio 的辅助键盘

> ID：107321
> 
> 赞同：1
> 
> 时间：2008-09-20T05:56:50.527
> 
> 标签：controller, usb

我们的家庭不再使用我们的[Mixman DM2](http://www.mixman.com/products/dm2.html) USB 控制器来制作音乐。这让我可以将其用作带有 31 个“键”（和一些“滑块”）的辅助键盘。我有一个疯狂的想法，即使用这些按钮将键盘快捷键发送到 Visual Studio。按一个键似乎比一些手指弯曲的 ctrl 双键组合更容易。

我尝试了一些实用程序，例如 JoyToKey 和 XPadder，但它们只能识别游戏控制器，而 DM2 属于更通用的“USB 控制器”类别。

你听说过这样的废话吗？

**澄清问题：**您是否知道从通用 USB 控制器读取输入并将其映射到键盘按键的实用程序？-或者- 您是否知道将从通用 USB 控制器读取的 Visual Studio 加载项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T06:02:26.690

以前没听说过，但我迫不及待地想看看你是否可以使它有用！

您可以将 Visual Studio 功能分配给组合键的“和弦”，对吧？所以也许你可以玩刮胡子和理发来开始构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T06:01:39.140

是的，我正在考虑自己做一些类似的事情。我很确定您必须为此编写自己的驱动程序。

# c# - 我需要用伪相关数据填充转发器

> ID：107329
> 
> 赞同：1
> 
> 时间：2008-09-20T05:59:52.657
> 
> 标签：c#, asp.net, .net-3.5, controls, repeater

在我这样做之前，我想我会问这是否是最好的方法。每个“供应商”对象都有一个“桶”对象。在我的转发器中，我需要显示一些来自供应商的属性和一些来自 Bucket 的属性，还有一些由 FileSystem 填充的与供应商链接的图像。我认为最好的方法是将转发器与供应商对象绑定，然后在 ItemDataBound 上，我将根据绑定到特定 Items[e.Item.ItemIndex] 的供应商填充图像和存储桶。

这是解决这个问题的最好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T06:05:22.970

这就是我通常的做法，绑定主对象并处理 ItemDataBound 中的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T06:12:02.143

如果 Vendor 对象只能容纳单个 Bucket 对象，则可能适合将其全部绑定到单个顶级转发器中。您可以在顶层通过简单的数据绑定访问 Bucket，而无需覆盖 ItemDataBound。

因为您最有可能绑定“供应商”，所以如果您想这样做，您可以在数据绑定中访问它的成员：

```
<%# DataBinder.Eval (Container.DataItem, "Bucket.Property" ) %> 
```

如果您必须在每次绑定迭代期间“处理某些内容”并且需要对每个 Vendor 对象进行详细访问以进行决策，则您希望执行 ItemDataBound。

如果 Vendor 对象可以容纳多个 Bucket，那么访问它的最佳方法是通过 ItemDataBound。在供应商的每次迭代中，您可以绑定一个新的嵌套转发器以显示存储桶数据，或执行您可能需要的任何重复/聚合功能。

根据您希望它在客户端上的行为方式，您可以只呈现供应商。当用户单击供应商（或其他）时，您可以对服务器执行 AJAX 调用，该调用将检索存储桶数据并将其动态呈现到您的页面中。如果有大量供应商以及他们的桶被渲染，您可能想尝试这种方法。与在 ASPX 服务器端构建它相比，这将有助于提高数据库性能和页面呈现时间。（但这需要大量数据，在尝试获得性能提升之前，您应该出于可用性/客户原因这样做。）

# c# - 匹配失败的匹配字符串中的正则表达式索引

> ID：107382
> 
> 赞同：7
> 
> 时间：2008-09-20T06:30:04.580
> 
> 标签：c#, regex

我想知道是否可以在尝试匹配时提取正则表达式失败的给定字符串中的索引位置？

例如，如果我的正则表达式是“abc”并且我尝试将其与“abd”匹配，则匹配将在索引 2 处失败。

编辑澄清。我需要这个的原因是允许我简化我的应用程序的解析组件。该应用程序是一个汇编语言教学工具，允许学生编写、编译和执行汇编类程序。

目前我有一个标记器类，它使用正则表达式将输入字符串转换为标记。这很好用。例如：

给定以下输入 = "INP :x:" ，标记器将生成以下标记
：

```
Token.OPCODE, Token.WHITESPACE, Token.LABEL, Token.EOL 
```

然后分析这些标记以确保它们符合给定语句的语法。目前这是使用 IF 语句完成的，并且被证明很麻烦。这种方法的好处是我可以提供详细的错误消息。IE

```
if(token[2] != Token.LABEL) { throw new SyntaxError("Expected label");} 
```

我想使用正则表达式来定义语法而不是烦人的 IF 语句。但是这样做我失去了返回详细错误报告的能力。因此，我至少想通知用户错误发生的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T07:44:04.760

我同意 Colin Younger 的观点，我认为现有的 Regex 类是不可能的。不过，如果你愿意出一点汗，我认为这是可行的：

1.  获取 Regex 类源代码（例如 [http://www.codeplex.com/NetMassDownloader](http://www.codeplex.com/NetMassDownloader) 以下载 .Net 源代码）。
2.  将代码更改为具有故障索引的只读属性。
3.  确保您的代码使用该 Regex 而不是 Microsoft 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T06:39:04.700

我想这样的索引只有在一些简单的情况下才有意义，比如你的例子。

如果您要使用像“ab*c*z”这样的正则表达式（其中 * 我的意思是任何字符）和字符串“abbbcbbcdd”，那么索引应该是什么？这将取决于用于数学运算的算法...可能在“abbbc ...”或“abbbcbbc ...”上失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T07:36:31.690

我不相信这是可能的，但我很好奇你为什么想要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T16:51:40.280

为此，您需要嵌入在正则表达式中的回调（AFAIK C# 不支持），或者最好挂钩到正则表达式引擎。即使这样，如果涉及回溯，也不清楚您想要什么结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T21:45:41.697

无法判断正则表达式在哪里失败。因此，您需要采取不同的方法。您需要比较字符串。使用正则表达式删除所有可能变化的内容，并将其与您知道它不会更改的字符串进行比较。

我遇到了同样的问题，想出了你的答案，不得不自己想办法。这里是：

[https://stackoverflow.com/a/11730035/637142](https://stackoverflow.com/a/11730035/637142)

希望能帮助到你

# http - POST 和 PUT HTTP 请求有什么区别？

> ID：107390
> 
> 赞同：1002
> 
> 时间：2008-09-20T06:34:41.417
> 
> 标签：http, post, put

它们似乎都在向体内的服务器发送数据，那么它们有何不同呢？

* * *

## 回答 #1

> 赞同：983
> 
> 时间：2008-09-20T06:54:01.293

**HTTP 放置：**

PUT 将文件或资源放在特定的 URI 上，并且准确地放在该 URI 上。如果该 URI 中已有文件或资源，则 PUT 会替换该文件或资源。如果那里没有文件或资源，则 PUT 创建一个。PUT 是[幂等](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.2)的，但矛盾的是 PUT 响应是不可缓存的。

[PUT 的 HTTP 1.1 RFC 位置](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)

**HTTP 发布：**

POST 将数据发送到特定的 URI，并期望该 URI 上的资源来处理请求。此时的 Web 服务器可以确定如何处理指定资源上下文中的数据。POST 方法不是[幂等](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.2)的，但是只要服务器设置适当的 Cache-Control 和 Expires 标头，POST 响应*是可缓存的。*

官方 HTTP RFC 指定 POST 为：

*   现有资源的注释；
*   将消息发布到公告板、新闻组、邮件列表或类似的文章组；
*   向数据处理过程提供数据块，例如提交表单的结果；
*   通过追加操作扩展数据库。

[POST 的 HTTP 1.1 RFC 位置](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5)

**POST 和 PUT 的区别：**

RFC 本身解释了核心区别：

> POST 和 PUT 请求的根本区别体现在 Request-URI 的不同含义上。POST 请求中的 URI 标识将处理封闭实体的资源。该资源可能是一个数据接受进程，一个通往其他协议的网关，或者一个接受注释的单独实体。相比之下，PUT 请求中的 URI 标识了请求中包含的实体——用户代理知道 URI 的意图，服务器不得尝试将请求应用于其他资源。如果服务器希望将请求应用于不同的 URI，它必须发送 301（永久移动）响应；然后用户代理可以自己决定是否重定向请求。

此外，更简洁一点的是，[RFC 7231 第 4.3.4 节 PUT](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4)状态（强调添加），

> **4.3.4\. 放**
> 
> PUT 方法请求目标资源的状态是 `created`或`replaced`具有由请求消息有效负载中包含的表示定义的状态。

**使用正确的方法，不相关的：**

[REST ROA](http://en.wikipedia.org/wiki/Resource_oriented_architecture)与 SOAP 相比的一个好处是，在使用 HTTP REST ROA 时，它鼓励正确使用 HTTP 动词/方法。因此，例如，当您想在该确切位置创建资源时，您只会使用 PUT。而且您永远不会使用 GET 来创建或修改资源。

* * *

## 回答 #2

> 赞同：237
> 
> 时间：2008-09-20T06:41:21.090

只有语义。

HTTP`PUT`应该接受请求的主体，然后将其存储在 URI 标识的资源中。

HTTP`POST`更通用。它应该在服务器上启动一个动作。该操作可能是将请求正文存储在由 URI 标识的资源中，也可能是不同的 URI，也可能是不同的操作。

PUT**就像**文件上传。对 URI 的放置完全影响该 URI。对 URI 的 POST 可能会产生任何影响。

* * *

## 回答 #3

> 赞同：150
> 
> 时间：2008-09-20T07:44:23.577

举个 REST 风格资源的例子：

`POST /books`带有一堆书籍信息可能会创建一本新书，并以标识该书的新 URL 进行响应：`/books/5`.

`PUT /books/5`将不得不创建一本 id 为 5 的新书，或者用 ID 5 替换现有的书。

在非资源风格中，`POST`几乎可以用于任何有副作用的事情。另一个区别是它`PUT`应该是幂等的 -`PUTs`同一 URL 的多个相同数据应该没问题，而多个`POSTs`可能会创建多个对象或您的`POST`操作所做的任何事情。

* * *

## 回答 #4

> 赞同：112
> 
> 时间：2018-03-08T20:01:06.333

1.  **GET**：从服务器检索数据。应该没有其他影响。
2.  **PUT**：用请求有效负载替换目标资源。可用于更新或创建新资源。
3.  **PATCH**：类似于 PUT，但仅用于更新现有资源中的某些字段。
4.  **POST**：对有效负载执行特定于资源的处理。可用于不同的操作，包括创建新资源、上传文件或提交 Web 表单。
5.  **DELETE**：从服务器中删除数据。
6.  **TRACE**：提供一种测试服务器接收内容的方法。它只是返回发送的内容。
7.  **OPTIONS**：允许客户端获取有关服务支持的请求方法的信息。相关的响应标头是 Allow with supported methods。也在 CORS 中用作预检请求，以通知服务器实际请求方法并询问自定义标头。
8.  **HEAD**：仅返回响应标头。
9.  **CONNECT**：当浏览器知道它与代理通信并且最终的 URI 以 https:// 开头时，它会使用它。CONNECT 的目的是允许端到端加密的 TLS 会话，因此代理无法读取数据。

* * *

## 回答 #5

> 赞同：71
> 
> 时间：2008-09-20T06:36:24.440

PUT 是一种将内容“上传”到特定 URI 或覆盖该 URI 中已有内容的方法。

另一方面，POST 是一种提交与给定 URI 相关的数据的方式。

请参阅[HTTP RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)

* * *

## 回答 #6

> 赞同：47
> 
> 时间：2013-02-15T07:02:06.183

据我所知，PUT 主要用于更新记录。

1.  POST - 创建文档或任何其他资源

2.  PUT - 更新创建的文档或任何其他资源。

但要明确的是，PUT 通常会“替换”现有记录（如果存在），如果不存在则创建..

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2008-09-20T08:15:04.937

其他人已经发布了很好的答案，我只是想补充一点，对于大多数语言、框架和用例，您`POST`将比`PUT`. `PUT, DELETE,`到了等等基本上都是琐事问题的地步。

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2014-04-05T10:17:14.287

请参阅：http: [//zacharyvoase.com/2009/07/03/http-post-put-diff/](http://zacharyvoase.com/2009/07/03/http-post-put-diff/)

我最近对 ​​Web 开发人员的一种流行误解感到非常恼火，即 POST 用于创建资源，而 PUT 用于更新/更改资源。

如果您查看 RFC 2616（“超文本传输​​协议 – HTTP/1.1”）[第 9.6 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)（“PUT”）的第 55 页，您会看到 PUT 的实际用途：

> PUT 方法请求将封闭的实体存储在提供的 Request-URI 下。

还有一个方便的段落来解释 POST 和 PUT 之间的区别：

> POST 和 PUT 请求的根本区别体现在 Request-URI 的不同含义上。POST 请求中的 URI 标识将处理封闭实体的资源。该资源可能是一个数据接受进程，一个通往其他协议的网关，或者一个接受注释的单独实体。相反，PUT 请求中的 URI 标识了请求中包含的实体——用户代理知道 URI 的意图，服务器不得尝试将请求应用于其他资源。

它没有提到更新/创建之间的区别，因为那不是它的意义所在。这是关于这之间的区别：

```
obj.set_attribute(value) # A POST request. 
```

还有这个：

```
obj.attribute = value # A PUT request. 
```

所以，请停止传播这种流行的误解。阅读您的 RFC。

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2017-04-06T10:38:26.577

**[根据 HTTP 方法定义操作](https://docs.microsoft.com/en-us/azure/architecture/best-practices/api-design#define-operations-in-terms-of-http-methods)**

HTTP 协议定义了许多为请求分配语义含义的方法。大多数 RESTful Web API 使用的常见 HTTP 方法是：

**GET**检索指定 URI 处的资源表示。响应消息的正文包含所请求资源的详细信息。

**POST**在指定的 URI 处创建一个新资源。请求消息的正文提供了新资源的详细信息。请注意，POST 也可用于触发实际上不创建资源的操作。

**PUT**创建或替换指定 URI 处的资源。请求消息的正文指定要创建或更新的资源。

**PATCH**执行资源的部分更新。请求正文指定要应用于资源的更改集。

**DELETE**删除指定 URI 处的资源。

特定请求的效果应取决于资源是集合还是单个项目。下表使用电子商务示例总结了大多数 RESTful 实现所采用的常见约定。并非所有这些请求都可以实现——这取决于具体的场景。

| 资源 | 邮政 | 得到 | 放 | 删除 |
| --- | --- | --- | --- | --- |
| /顾客 | 创建新客户 | 检索所有客户 | 批量更新客户 | 删除所有客户 |
| /客户/1 | 错误 | 检索客户 1 的详细信息 | 更新客户 1 的详细信息（如果存在） | 删除客户 1 |
| /客户/1/订单 | 为客户 1 创建新订单 | 检索客户 1 的所有订单 | 批量更新客户 1 的订单 | 删除客户 1 的所有订单 |

**POST、PUT 和 PATCH 之间的区别可能令人困惑。**

**POST**请求创建一个资源。服务器为新资源分配一个 URI 并将该 URI 返回给客户端。在 中`REST model`，您经常将`POST`请求应用于集合。新资源将添加到集合中。`POST`请求也可用于向现有资源提交数据以进行处理，而无需创建任何新资源。

PUT**请求**创建资源或更新现有资源。客户端指定资源的 URI。请求正文包含资源的完整表示。如果具有此 URI 的资源已存在，则将其替换。否则，如果服务器支持这样做，则会创建一个新资源。`PUT`请求最常应用于作为单个项目的资源，例如特定客户，而不是集合。服务器可能支持更新，但不支持通过`PUT`. 是否支持创建 via`PUT`取决于客户端是否可以在资源存在之前有意义地将 URI 分配给资源。如果没有，则用于`POST`创建资源和`PUT or PATCH`更新。

**PATCH**请求对现有资源执行部分更新。客户端指定资源的 URI。请求正文指定要应用于资源的一组更改。这可能比 using 更有效`PUT`，因为客户端只发送更改，而不是资源的整个表示。如果服务器支持，从技术上讲`PATCH`也可以创建一个新资源（通过指定一组对“空”资源的更新）。

`PUT`请求必须是幂等的。`PUT`如果一个客户端多次提交相同的请求，结果应该总是相同的（相同的资源将被修改为相同的值）。`POST and PATCH`请求不保证是幂等的。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2008-09-20T06:45:27.570

POST 被认为是一种工厂类型的方法。您在其中包含数据以创建您想要的内容，而另一端的任何内容都知道如何处理它。PUT 用于更新给定 URL 处的现有数据，或者在您知道 URI 将是什么但它不存在时创建新的东西（与将创建一些东西并返回一个 URL 的 POST 相对如有必要）。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2020-02-18T11:21:37.840

何时使用其中一个应该非常简单，但复杂的措辞是我们许多人混淆的根源。

## 何时使用它们：

*   `PUT`当您想要修改已经是资源集合一部分的单一资源时使用。`PUT`完全替换资源。例子：`PUT /resources/:resourceId`

    **旁注：**`PATCH`如果要更新资源的一部分，请使用。

* * *

*   `POST`当您想在资源集合下添加子资源时使用。
    例子：`POST => /resources`

* * *

## 一般来说：

*   通常，在实践中，始终**`PUT`**用于*UPDATE*操作。
*   始终**`POST`**用于*CREATE*操作。

* * *

## 例子：

**`GET`** /company/reports **=>** *获取所有报告*
**`GET`** /company/reports/{id} **=>** *获取由“id”标识的报告信息*
**`POST`** /company/reports **=>** *创建一个新报告*
**`PUT`** /company/reports/{id} **=>** *更新“id”标识的报告信息*
**`PATCH`** /company/reports/{id} **=>** *更新“id”标识的部分报表信息*
**`DELETE`** /company/reports/{id} **=>** *删除“id”标识的报表信息*

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-10-22T19:24:12.153

POST 和 PUT 的区别在于 PUT 是幂等的，也就是说，多次调用同一个 PUT 请求总是会产生相同的结果（即没有副作用），而另一方面，重复调用一个 POST 请求可能有（附加）多次创建相同资源的副作用。

`GET`：使用 GET 的请求只检索数据，即它请求指定资源的表示

`POST`：它将数据发送到服务器以创建资源。请求正文的类型由 Content-Type 标头指示。它通常会导致服务器的状态变化或副作用

`PUT`：创建新资源或用请求有效负载替换目标资源的表示

`PATCH`：用于对资源应用部分修改

`DELETE`: 删除指定资源

`TRACE`：它沿着到目标资源的路径执行消息环回测试，提供有用的调试机制

`OPTIONS`: 用于描述目标资源的通信选项，客户端可以为 OPTIONS 方法指定一个 URL，或者用星号 (*) 表示整个服务器。

`HEAD`：它要求与 GET 请求相同的响应，但没有响应正文

`CONNECT`：建立到目标资源标识的服务器的隧道，可用于访问使用 SSL (HTTPS) 的网站

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-03-27T16:55:57.160

值得一提的`POST`是，它会受到一些常见**的跨站点请求伪造 (CSRF) 攻击**，而`PUT`并非如此。

当受害者访问时，下面的 CSRF 是**不可能`PUT`**`attackersite.com`的。

**攻击**的效果是**受害者无意中删除了一个用户**，只是因为它（受害者）在访问之前以`admin`on登录：`target.site.com``attackersite.com`

**恶意代码`attackersite.com`：**

**案例1：**正常请求。保存`target.site.com`的 cookie 将由浏览器自动发送：（注意：`PUT`仅在端点支持更安全，因为它不是受支持的`<form>`属性值）

```
<!--deletes user with id 5-->
<form id="myform" method="post" action="http://target.site.com/deleteUser" >
    <input type="hidden" name="userId" value="5">
</form>
<script>document.createElement('form').submit.call(document.getElementById('myform'));</script> 
```

**案例 2：** XHR 请求。保存`target.site.com`的 cookie 将由浏览器自动发送：（注意：`PUT`仅在端点支持更安全，因为尝试发送`PUT`会触发预检请求，其响应会阻止浏览器请求`deleteUser`页面）

```
//deletes user with id 5
var xhr = new XMLHttpRequest();
xhr.open("POST", "http://target.site.com/deleteUser");
xhr.withCredentials=true;
xhr.send(["userId=5"]); 
```

> [MDN Ref](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Preflighted_requests) : [..]与“简单请求”（上面讨论过）不同，--[[ 表示：POST/GET/HEAD ]]--，对于“预检”请求，浏览器首先使用 OPTIONS 方法发送 HTTP 请求[ ..]

> [cors in action](https://livebook.manning.com/book/cors-in-action/chapter-4/) : [..]某些类型的请求，例如 DELETE 或 PUT，需要更进一步，在发出实际请求之前请求服务器的许可[..]所谓的预检请求 [..]

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-04-18T10:54:44.577

用简单的话你可以说：

1.HTTP Get：用于获取一项或多项

2.HTTP Post：用于创建项目

3.HTTP Put：用于更新一个item

4.HTTP Patch：用于部分更新一个item

5.HTTP Delete：用于删除一个item

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-06-10T11:42:30.580

**REST-ful 用法**

`POST`用于创建新资源，然后返回该资源`URI`

```
EX 
      REQUEST : POST ..../books
        {
        "book":"booName",
        "author":"authorName"
        } 
```

此调用可能会创建一本新书并返回该书`URI`

```
Response ...THE-NEW-RESOURCE-URI/books/5 
```

`PUT`用于替换资源，如果该资源存在则只需更新它，但如果该资源不存在则创建它，

```
REQUEST : PUT ..../books/5
{
"book":"booName",
"author":"authorName"
} 
```

`PUT`我们知道资源标识符，但会`POST`返回新的资源标识符

**非 REST-ful 用法**

`POST`用于在服务器端启动一个动作，这个动作可能会也可能不会创建一个资源，但是这个动作总是会产生副作用它会改变服务器上的某些东西

`PUT`用于放置或替换特定 URL 处的文字内容

**REST-ful 和非 REST-ful 风格的另一个区别**

`POST`is Non-Idempotent Operation：同一个请求多次执行会导致一些变化。

`PUT`是幂等操作：同一个请求多次执行不会有副作用。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-12-08T17:36:41.537

其实除了头衔之外没有什么区别。GET 和其他方法之间实际上有一个基本的区别。使用“GET”-Request 方法，您在 url-address-line 中发送数据，这些数据首先用问号分隔，然后用 & 符号分隔。

但是使用“POST”请求方法，您不能通过 url 传递数据，但您必须将数据作为所谓的请求“正文”中的对象传递。在服务器端，您必须读出接收到的内容的主体，以获取发送的数据。但是另一方面，当您发送“GET”请求时，不可能在正文中发送内容。

声称“GET”仅用于获取数据而“POST”用于发布数据的说法是绝对错误的。根据“GET”请求或“POST”请求发送的数据，没有人可以阻止您创建新内容、删除现有内容、编辑现有内容或在后端执行任何操作。没有人可以阻止您以某种方式对后端进行编码，即通过“POST”请求，客户端要求一些数据。

有了一个请求，无论你使用哪种方法，你调用一个 URL 并发送或不发送一些数据来指定，你想将哪些信息传递给服务器来处理你的请求，然后客户端从那里得到答案服务器。数据可以包含您想要发送的任何内容，允许后端对数据执行任何操作，并且响应可以包含您想要放入其中的任何信息。

只有这两种基本方法。获取和发布。但正是它们的结构使它们与众不同，而不是您在后端编写的代码。在后端，您可以使用接收到的数据编写任何您想要的代码。但是对于“POST”请求，您必须在正文中而不是在 url-addressline 中发送/检索数据，对于“GET”请求，您必须在 url-addressline 中发送/检索数据而不是在身体。就这样。

所有其他方法，如“PUT”、“DELETE”等，它们的结构与“POST”相同。

主要使用 POST 方法，如果你想隐藏一些内容，因为无论你在 url-addressline 中写入什么，它都会保存在缓存中，并且 GET-Method 与将数据写入 url-addressline 相同。因此，如果您想发送敏感数据，不一定是用户名和密码，而是例如一些您不希望在 url-address-line 中显示的 id 或哈希，那么您应该使用 POST 方法.

此外，URL-Addressline 的长度限制为 1024 个符号，而“POST”方法不受限制。因此，如果您有大量数据，您可能无法使用 GET-Request 发送它，但您需要使用 POST-Request。所以这也是 POST 请求的另一个优点。

但是，当您没有要发送的复杂文本时，处理 GET 请求要容易得多。否则，这是 POST 方法的另一个优点，即使用 GET 方法您需要对文本进行 url 编码，以便能够在文本甚至空格中发送一些符号。但是使用 POST 方法，您没有任何限制，并且您的内容不需要以任何方式更改或操作。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-12-04T13:55:22.980

## 概括

*   用于使用请求中包含的表示定义`PUT`的状态来创建或替换*目标*资源的状态。这种*标准化*的预期效果是*幂等*的，因此它通知中介他们可以在通信失败的情况下重复请求。
*   以其他方式使用`POST`（包括创建或替换目标资源以外的资源的状态）。它的预期效果*没有标准化*，因此中介不能依赖任何普遍的财产。

## 参考

[RFC 7231](https://datatracker.ietf.org/doc/html/rfc7231) (Roy Fielding, Julian Reschke, 2014)中给出了关于 the`POST`和`PUT`request 方法之间语义差异的最新权威描述：

> `POST`和方法之间的根本区别在于`PUT`封闭表示的不同意图。请求中的目标资源`POST`旨在根据资源自身的语义处理封闭的表示，而`PUT`请求中的封闭表示被定义为替换目标资源的状态。因此，intent 的意图`PUT`是幂等的并且对中介可见，即使确切的效果只有源服务器知道。

换句话说，预期效果`PUT`是*标准化*的（使用请求中包含的表示定义的状态创建或替换*目标*资源的状态），因此对所有目标资源都是通用的，而预期效果`POST`不是*标准化*的，并且所以特定于每个目标资源。因此`POST`可以用于任何事情，包括实现`PUT`和其他请求方法（`GET`、`HEAD`、`DELETE`、`CONNECT`、`OPTIONS`和`TRACE`）的预期效果。

但建议始终使用更专业的请求方法，而不是`POST`在适用的情况下，因为它为中介提供更多信息以自动检索信息（因为`GET`、`HEAD`、`OPTIONS`和`TRACE`被定义为*安全*的）、处理通信故障（因为`GET`、`HEAD`、`PUT`、`DELETE`、`OPTIONS`和`TRACE`被定义为*idempotent*），并优化缓存性能（因为`GET`和`HEAD`被定义为*cacheable*），如[*使用 POST 可以*](https://roy.gbiv.com/untangled/2009/it-is-okay-to-use-post)（Roy Fielding，2009）中所述：

> `POST`只有在其他方法非常适合的情况下使用它才会成为问题：例如，检索应该是某种资源的表示的信息 ( `GET`)、完全替换表示 ( `PUT`) 或任何其他标准化告诉中间人一些比“这可能会改变一些事情”更有价值的方法。其他方法对中介更有价值，因为它们说明了如何自动处理故障以及中间缓存如何优化它们的行为。`POST`没有这些特征，但这并不意味着我们可以没有它。`POST`在 HTTP 中有许多有用的用途，包括“此操作不值得标准化”的一般用途。</p>

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-12-14T11:23:45.553

PUT 和 POST 都是 Rest Methods 。

PUT - 如果我们使用 PUT 两次使用相同的参数发出相同的请求，第二个请求将没有任何效果。这就是为什么 PUT 通常用于 Update 场景的原因，使用相同的参数多次调用 Update 不会比初始调用做更多的事情，因此 PUT 是幂等的。

POST 不是幂等的，例如 Create 将在目标中创建两个单独的条目，因此它不是幂等的，因此 CREATE 在 POST 中被广泛使用。

每次使用相同参数的 POST 进行相同的调用会导致两种不同的事情发生，因此为什么 POST 通常用于 Create 场景

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-06-16T12:21:52.537

Post 和 Put 主要用于发布数据和其他更新数据。但是您只能对发布请求执行相同的操作。

# sql - 使用复合/复合主键的缺点是什么？

> ID：107404
> 
> 赞同：14
> 
> 时间：2008-09-20T06:38:01.830
> 
> 标签：sql, database

使用复合/复合主键的缺点是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-20T06:54:37.313

1.  可能会导致更多的规范化问题（[2NF](http://en.wikipedia.org/wiki/2NF)，“*请注意，当 1NF 表没有复合候选键（候选键包含多个属性）时，该表将自动处于 2NF* ”）
2.  更多不必要的数据重复。如果您的复合键包含 3 列，则需要在每个表中创建相同的 3 列，用作外键。
3.  通常可以在代理键的帮助下避免（[阅读它们的优缺点](http://en.wikipedia.org/wiki/Surrogate_key)）
4.  我可以想象一个复合键的好场景——在一个表示 N:N 关系的表中，比如学生 - 班级，中间表中的键将是 (StudentID, ClassID)。但是，如果您需要存储有关每对的更多信息（例如班级中学生所有分数的历史记录），那么您可能会引入代理键。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-20T07:45:28.580

There's nothing wrong with having a compound key per se, but a primary key should ideally be as small as possible (in terms of number of bytes required). If the primary key is long then this will cause non-clustered indexes to be bloated.

Bear in mind that the order of the columns in the primary key is important. The first column should be as selective as possible i.e. as 'unique' as possible. Searches on the first column will be able to seek, but searches just on the second column will have to scan, unless there is also a non-clustered index on the second column.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T08:20:43.533

I think this is a specialisation of the synthetic key debate (whether to use meaningful keys or an arbitrary synthetic primary key). I come down almost completely on the synthetic key side of this debate for a number of reasons. These are a few of the more pertinent ones:

*   You have to keep dependent child tables on the end of a foriegn key up to date. If you change the the value of one of the primary key fields (which can happen - see below) you have to somehow change all of the dependent tables where their PK value includes these fields. This is a bit tricky because changing key values will invalidate FK relationships with child tables so you may (depending on the constraint validation options available on your platform) have to resort to tricks like copying the record to a new one and deleting the old records.

*   On a deep schema the keys can get quite wide - I've seen 8 columns once.

*   Changes in primary key values can be troublesome to identify in ETL processes loading off the system. The example I once had occasion to see was an MIS application extracting from an insurance underwriting system. On some occasions a policy entry would be re-used by the customer, changing the policy identifier. This was a part of the primary key of the table. When this happens the warehouse load is not aware of what the old value was so it cannot match the new data to it. The developer had to go searching through audit logs to identify the changed value.

Most of the issues with non-synthetic primary keys revolve around issues when PK values of records change. The most useful applications of non-synthetic values are where a database schema is intended to be used, such as an M.I.S. application where report writers are using the tables directly. In this case short values with fixed domains such as currency codes or dates might reasonably be placed directly on the table for convenience.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T06:42:01.587

在那些对自然复合键具有唯一非空约束的情况下，我会推荐生成的主键。

如果您使用自然键作为主键，那么您很可能必须在外键引用中引用这两个值，以确保您识别的是正确的记录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T12:45:29.577

以具有两个候选键的表为例：一个简单（单列）和一个复合（多列）。在这种情况下，您的问题似乎是，“如果我选择将一个键提升为'主'并选择复合键，我可能会遭受什么不利影响？”

首先，考虑一下你是否真的需要提升一个键：“ `PRIMARY KEY`SQL 中的存在本身似乎是某种历史上的偶然。根据作者 Chris Date 的说法，SQL 的最早版本没有任何键约束，并且`PRIMARY KEY`只是后来才添加到 SQL 标准中。标准的设计者显然是从发明它的 EFCodd 那里取来的，尽管当时 Codd 的原始概念已经被抛弃了！（Codd 最初提出外键只能引用一个键 -主键——但这个想法被遗忘和忽视了，因为它被广泛认为是一个毫无意义的限制）。” [来源：[David Portas 的博客：使用主键？](http://blogs.conchango.com/davidportas/archive/2006/09/14/Down-with-Primary-Keys_3F00_.aspx)

其次，你会应用什么标准来选择表中的哪个键应该是“主要的”？在 SQL 中，键的选择`PRIMARY KEY`是任意的并且是特定于产品的。在 ACE/Jet（又名 MS Access）中，两个主要且经常相互竞争的因素是您是否要使用`PRIMARY KEY`以支持磁盘上的集群，或者您是否希望包含键的列在 MS Access 的“关系”图片中显示为粗体用户界面; 我认为索引策略胜过漂亮的图片是少数 :) 在 SQL Server 中，您可以独立指定聚集索引，`PRIMARY KEY`并且似乎没有提供特定于产品的优势。唯一剩下的优势似乎是您可以省略`PRIMARY KEY`在 SQL DDL 中创建外键时，作为 SQL-92 标准行为，无论如何对我来说似乎没什么大不了的（也许是他们添加到标准中的另一件事，因为它是 SQL 产品中已经广泛使用的功能?) 所以，这不是寻找缺点的情况，相反，你应该看看你的 SQL 产品有什么*优点*`PRIMARY KEY`（如果有的话） 。换句话说，选择错误键的唯一缺点是您可能会错过给定的优势。

第三，您是否暗示使用人工/合成/代理键在您的物理模型中实现逻辑模型中的候选键，因为您担心如果在外键和表连接中使用自然键会降低性能？这是一个完全不同的问题，很大程度上取决于您对 SQL 中自然键问题的“宗教”立场。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T14:39:26.870

使用复合主键的主要缺点是你会混淆典型的 ORM 代码生成器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T06:41:42.540

需要更多的特异性。

走得太远，它可能会使插入（每个键都必须存在）和文档过于复杂，如果不完整，您的连接读取可能会受到怀疑。

有时它可以指示有缺陷的数据模型（复合键真的是数据所描述的吗？）

我不相信有性能成本......它很容易出错。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-20T07:15:32.507

1.  当您将其放在图表上时，可读性较差
2.  当您在查询连接上使用它时，可读性较差
3.  当您在外键上使用它时，您必须添加一个关于所有属性必须为空或不为空的检查约束（如果只有一个为空，则不检查键）
4.  将其用作外键时通常需要更多存储空间
5.  某些工具不管理复合键

# python - 如何在 Python 2 中发送 HEAD HTTP 请求？

> ID：107405
> 
> 赞同：116
> 
> 时间：2008-09-20T06:38:38.710
> 
> 标签：python, python-2.7, http, http-headers, content-type

我在这里要做的是获取给定 URL 的标头，以便确定 MIME 类型。例如，我希望能够查看是否`http://somedomain/foo/`会返回 HTML 文档或 JPEG 图像。因此，我需要弄清楚如何发送 HEAD 请求，以便无需下载内容即可读取 MIME 类型。有谁知道这样做的简单方法？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2010-01-15T10:50:52.677

[urllib2](https://docs.python.org/2/library/urllib2.html)可用于执行 HEAD 请求。这比使用 httplib 好一点，因为 urllib2 会为您解析 URL，而不是要求您将 URL 拆分为主机名和路径。

```
>>> import urllib2
>>> class HeadRequest(urllib2.Request):
...     def get_method(self):
...         return "HEAD"
... 
>>> response = urllib2.urlopen(HeadRequest("http://google.com/index.html")) 
```

像以前一样，可以通过 response.info() 获得标头。有趣的是，您可以找到被重定向到的 URL：

```
>>> print response.geturl()
http://www.google.com.au/index.html 
```

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2008-09-20T06:45:45.010

**编辑**：这个答案有效，但现在你应该只使用下面其他答案提到的[请求库。](http://docs.python-requests.org/en/latest/index.html)

* * *

使用[httplib](https://docs.python.org/2/library/httplib.html)。

```
>>> import httplib
>>> conn = httplib.HTTPConnection("www.google.com")
>>> conn.request("HEAD", "/index.html")
>>> res = conn.getresponse()
>>> print res.status, res.reason
200 OK
>>> print res.getheaders()
[('content-length', '0'), ('expires', '-1'), ('server', 'gws'), ('cache-control', 'private, max-age=0'), ('date', 'Sat, 20 Sep 2008 06:43:36 GMT'), ('content-type', 'text/html; charset=ISO-8859-1')] 
```

还有一个`getheader(name)`获取特定标题的方法。

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2012-10-21T11:00:49.547

强制[`Requests`](http://docs.python-requests.org/en/latest/)方式：

```
import requests

resp = requests.head("http://www.google.com")
print resp.status_code, resp.text, resp.headers 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2011-09-12T12:02:47.290

我相信[Requests](http://docs.python-requests.org/en/latest/index.html)库也应该被提及。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2010-12-12T12:45:54.757

只是：

```
import urllib2
request = urllib2.Request('http://localhost:8080')
request.get_method = lambda : 'HEAD'

response = urllib2.urlopen(request)
response.info().gettype() 
```

编辑：我刚刚意识到有 httplib2 ：D

```
import httplib2
h = httplib2.Http()
resp = h.request("http://www.google.com", 'HEAD')
assert resp[0]['status'] == 200
assert resp[0]['content-type'] == 'text/html'
... 
```

[链接文本](http://httplib2.googlecode.com/hg/doc/html/libhttplib2.html)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-03-14T21:38:44.830

*为了获得与使用httplib*接受的答案等效的 Python3 答案的完整性。

它基本上是相同的代码，只是该库不再称为*httplib*而是*http.client*

```
from http.client import HTTPConnection

conn = HTTPConnection('www.google.com')
conn.request('HEAD', '/index.html')
res = conn.getresponse()

print(res.status, res.reason) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-02-10T12:39:59.143

```
import httplib
import urlparse

def unshorten_url(url):
    parsed = urlparse.urlparse(url)
    h = httplib.HTTPConnection(parsed.netloc)
    h.request('HEAD', parsed.path)
    response = h.getresponse()
    if response.status/100 == 3 and response.getheader('Location'):
        return response.getheader('Location')
    else:
        return url 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-23T01:39:05.743

顺便说一句，在使用 httplib 时（至少在 2.5.2 上），尝试读取 HEAD 请求的响应将阻塞（在 readline 上）并随后失败。如果您没有发出 read 响应，则无法在连接上发送另一个请求，您将需要打开一个新请求。或者接受请求之间的长时间延迟。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-04-13T15:10:00.393

我发现 httplib 比 urllib2 稍微快一点。我为两个程序计时——一个使用 httplib，另一个使用 urllib2——向 10,000 个 URL 发送 HEAD 请求。httplib 的速度快了几分钟。 **httplib**的总统计数据为：real 6m21.334s user 0m2.124s sys 0m16.372s

而**urllib2**的总统计数据是：real 9m1.380s user 0m16.666s sys 0m28.565s

还有其他人对此有意见吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-06-06T10:55:31.970

还有另一种方法（类似于 Pawel 的回答）：

```
import urllib2
import types

request = urllib2.Request('http://localhost:8080')
request.get_method = types.MethodType(lambda self: 'HEAD', request, request.__class__) 
```

只是为了避免在实例级别有无限的方法。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2008-12-11T00:11:48.057

可能更简单：使用 urllib 或 urllib2。

```
>>> import urllib
>>> f = urllib.urlopen('http://google.com')
>>> f.info().gettype()
'text/html' 
```

f.info() 是一个类字典对象，所以你可以做 f.info()['content-type'] 等。

[http://docs.python.org/library/urllib.html](http://docs.python.org/library/urllib.html)
[http://docs.python.org/library/urllib2.html](http://docs.python.org/library/urllib2.html)
[http://docs.python.org/library/httplib.html](http://docs.python.org/library/httplib.html)

文档指出 httplib 通常不直接使用。

# 3d - 将鼠标拖动运动转换为对象的 3d 旋转的最佳方法

> ID：107413
> 
> 赞同：18
> 
> 时间：2008-09-20T06:40:45.740
> 
> 标签：3d

我有一个 3d 对象，我希望能够在 3d 中旋转。最简单的方法是直接将 X 和 Y 鼠标运动转换为围绕 Y 和 X 轴的旋转，但是如果沿两个轴都有一些旋转，则模型旋转的方式变得非常违反直觉（即，如果您将对象翻转 180 度轴，您沿另一个轴的运动是相反的）。

我可以简单地执行上述方法，但不是存储围绕两个轴旋转的量，我可以存储完整的旋转矩阵，并为每次鼠标拖动沿着相同的轴进一步旋转它，但我担心这会很快就有精度问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-20T07:26:40.887

围绕垂直于当前拖动方向的轴旋转对象可能是最直观的，或者随着每次鼠标移动递增，或者相对于拖动开始位置。这两个选项提供了略微不同的用户交互，每个都有其优点和缺点。

有一种[相对简单](http://en.wikipedia.org/wiki/Rotation_matrix#Axis_and_angle)的方法可以将表示旋转的轴的角度和 3d 矢量转换为旋转矩阵。

你是对的，通过增量旋转更新原始旋转矩阵将导致矩阵不再是纯旋转矩阵。这是因为 3x3 旋转矩阵的数据量是表示旋转所需数据量的三倍。

表示旋转的更紧凑的方法是使用[欧拉角](http://en.wikipedia.org/wiki/Euler_angles)，具有最小的 3 值向量。您可以将当前旋转作为欧拉角向量，将其转换为矩阵，应用旋转（增量或其他方式），然后将矩阵转换回欧拉角向量。最后一步自然会消除矩阵中的任何非旋转分量，以便您再次获得下一个状态的纯旋转矩阵。

欧拉角在概念上很好，但是来回转换需要做很多工作。

一个更实际的选择是[四元数](http://en.wikipedia.org/wiki/Rotation_matrix#Quaternion)（[也](http://www.genesis3d.com/~kdtop/Quaternions-UsingToRepresentRotation.htm)），它是四个元素向量。这四个元素指定了旋转和统一的比例，如果你进入并将向量归一化为单位长度，你会得到一个 1.0 的比例因子。事实证明，角度轴值也可以很容易地转换为四元数值

```
q.x = sin(0.5*angle) * axis.x;
q.y = sin(0.5*angle) * axis.y;
q.z = sin(0.5*angle) * axis.z;
q.w = cos(0.5*angle); 
```

然后，您可以获取当前旋转四元数和增量旋转四元数的四元数乘积（仅使用简单的乘法和加法），以获得一个新的四元数，它表示执行两个旋转。此时，您可以标准化长度以确保纯旋转，但否则继续迭代组合旋转。

当您想使用传统图形 API 以旋转状态显示模型时，将四元数转换为旋转矩阵非常简单（仅使用乘法和加法）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-20T08:37:17.550

在我的计算机图形学课程中，我们获得了以下代码，这使我们不必重新发明轮子。

[轨迹球.h](http://fossies.org/linux/privat/gfsview-snapshot-121130.tar.gz:a/gfsview-snapshot-121130/gl/trackball.h)

[轨迹球.c](http://fossies.org/linux/privat/gfsview-snapshot-121130.tar.gz:a/gfsview-snapshot-121130/gl/trackball.c)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T06:48:11.697

创建一个累加器矩阵并使用标识对其进行初始化。

每一帧，在绘制对象之前将其应用于您的模型视图/世界矩阵状态。

在鼠标移动时，构造一个关于 X 轴的旋转矩阵，带有一些灵敏度常数 * delta_x。为另一个组件构造另一个绕 Y 轴的旋转矩阵。将一个相乘，然后将另一个相乘到累加器上。

移动鼠标时，累加器会发生变化。绘制时，它将按照您的预期定位对象。

另外，谈论四元数的人是对的。这仅适用于小的增量更改。如果您在对角线上快速拖动它，它不会像您期望的那样旋转。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-20T06:50:36.090

您可以通过重新归一化旋转矩阵来处理精度损失，以便 3 行中的每一行再次垂直。或者，您可以根据有关对象的现有信息重新生成您将要修改的旋转矩阵，这样就不需要重新规范化了。

或者，您可以使用[quaternions](http://en.wikipedia.org/wiki/Quaternions)，这是处理旋转的欧拉角的替代方法。

我在早期从[这个 faq中学到了很多东西，它在](http://www.sjbaker.org/steve/omniv/)[Euler's are Evil](http://www.sjbaker.org/steve/omniv/eulers_are_evil.html)中处理了这个问题（尽管对于另一个应用程序）。

# sas - 在 BASE SAS 中打破不平衡报价条件的最佳技巧是什么？

> ID：107414
> 
> 赞同：11
> 
> 时间：2008-09-20T06:41:08.297
> 
> 标签：sas, base, quotes

作为基础 SAS 程序员，您知道以下练习：

您提交了包含不平衡引用的 SAS 代码，所以现在您不仅有未闭合的引用，还有未闭合的注释、宏函数定义和缺少的运行；或退出；陈述。

不让那些不平衡的报价打扰您的最佳技巧是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T06:50:58.540

至于我自己，我通常用[谷歌搜索“SAS unbalanced quote”](http://www.google.dk/search?q=sas+unbalanced+quote&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)，最后提交如下[内容](http://support.sas.com/publishing/pubcat/chaps/55513.pdf)：

```
*); */; /*’*/ /*”*/; %mend; 
```

...打破未封闭的评论、引号和宏功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-11T13:40:05.120

这是我使用的那个。

```
 ;*';*";*/;quit;run;
 ODS _ALL_ CLOSE;
 QUIT; RUN; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-21T17:21:35.067

企业指南 3 曾经在其自动生成的代码顶部放置以下行：

```
*';*";*/;run; 
```

然而，真正从各种不平衡问题中“重置”的唯一方法是退出 sas 会话，并在重新提交代码之前平衡任何不平衡的东西。使用这种快速（便宜？）的黑客并不能解决根本原因。

顺便说一句，`ods _all_ close;`关闭*所有*ods 目的地，包括默认的 results 目的地。在交互式会话中，您应该使用`ods results;`或`ods results on;`至少根据文档再次打开它。但是当我在我的 9.2 上测试它时，它不起作用，如下所示：

```
%put sysvlong=&sysvlong sysscpl=&sysscpl;
/* sysvlong=9.02.01M0P020508 sysscpl=X64_VSPRO */

ods _all_ close;
proc print data=sashelp.class;
run;
/* on log
WARNING: No output destinations active.
*/

ods results on;
proc print data=sashelp.class;
run;
/* on log
WARNING: No output destinations active.
*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-07T08:00:42.607

我遇到了宏中引号不平衡的情况，唯一的解决方案是关闭 SAS 实例并重新开始。

我觉得这是 SAS 的一个不可接受的缺陷。

但是，我使用了 #2 和 #5 的方法并且它有效。首先是#2，然后是#1。我把它们放在所有代码之上，包括我的代码头，解释这个程序在做什么。

像魅力一样工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-07T22:25:35.500

我编写了一个 perl 程序，它可以读取任何给定的 SAS 程序并跟踪应该成对出现的东西。使用可以嵌入的括号之类的东西，它会在每行的开头打印嵌套级别。它需要能够区分属于宏函数的括号和属于数据步进函数的括号，包括驻留在宏环境中但调用数据步进函数的 %sysfunc 调用（也必须对 %syscall 宏执行类似操作函数调用），但这可以通过正则表达式实现。如果嵌套级别变为负数，则表明问题可能就在附近。

它还从程序开始计算单引号和双引号，并识别它遇到的每个此类符号的计数是奇数还是偶数。与括号一样，它需要能够区分宏代码中的引号和数据步骤代码中的引号以及文字字符串中的引号，例如 O'Riley 和 %nrstr(%'%")不计算它们，但模式匹配也可以处理。

如果项目不匹配的问题源于宏代码在运行时生成的代码，因此在源程序中不存在，那么我打开选项 mfile 将生成的数据步骤代码写入文件，然后运行 ​​perl 脚本反对该代码。

我选择 perl 是因为它强大的模式匹配功能，但任何其他模式匹配语言都应该可以正常工作。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-13T00:17:18.210

这对我来说几乎每次都有效：

```
; *'; *"; */;
ODS _ALL_ CLOSE;
quit; run; %MEND;
data _NULL_; putlog "DONE"; run; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-06T20:24:46.443

您总是可以发出终止提交的语句命令并重新提交您尝试运行的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-17T16:35:30.280

只是想重申 AFHood 使用该`ODS _ALL_ CLOSE;`声明的建议。这是要包括的关键之一。并且确保每次完成 ODS 时都使用它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-26T07:56:57.010

关闭 SAS 会话对我来说是有效的。我认为您可以先尝试一次，然后再尝试此处提到的其他方法。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-21T04:48:32.523

是的，我相信官方 SAS 文档会推荐您为自己提出的解决方案。

# iphone - 为 iPhone 制作地图应用程序的最佳方式是什么

> ID：107456
> 
> 赞同：6
> 
> 时间：2008-09-20T06:57:27.213
> 
> 标签：iphone, cocoa-touch, maps

所以我正在考虑编写一个在地图上显示事物的 iPhone 应用程序。有哪些框架/方法可以做到这一点？

在谷歌上搜索，我只能找到这个： [http ://code.google.com/p/iphone-google-maps-component/](http://code.google.com/p/iphone-google-maps-component/)

根据问题列表，这很慢，并且会在一段时间后停止工作。有没有人知道更好的东西，或者对上面的图书馆有任何经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T08:48:17.167

我很确定你现在唯一的选择是：

1.  调用 openURL: 切换到地图应用
2.  使用您链接到的 Google 地图组件
3.  滚动你自己的东西
4.  等待苹果公开一个“MapKit”框架

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T02:43:59.990

警告：在应用程序中嵌入谷歌地图*可能会*违反谷歌地图的服务条款。

我*已经*在 iPhone 上编写了一个完整的映射 UIView（该应用程序在 AppStore 上），这*并不*容易（这将是选项 #3 “滚动你自己的东西”）。获得好的表现真的很难。我想开源我的地图组件，但现在 F-NDA 正在阻止它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-06T06:29:01.740

我已经追了一段时间了，这是我在那里找到的最好的解决方案：

[http://code.google.com/p/touchcode/](http://code.google.com/p/touchcode/)

里面有一个名为 TouchMap 的组件，它带有一个演示它的演示。它的图块直接从 Microsoft Virtual Earth 加载。

编辑：@schwa，我只是查看了您的个人资料以找到您的电子邮件地址，然后意识到您实际上发布了这个软件。干得好

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-26T09:23:12.227

我刚刚发现[route-me](http://code.google.com/p/route-me/)，它看起来像是一个大型（30 多岁）活跃的 ppl 社区，正在为 iPhone 开发一个开源地图应用程序。它可以从 OpenStreetMap、Virtual Earth(Bing) 或 Cloudmade 获取图块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-21T11:37:03.853

只需使用 mapkit 框架。真的很好

或者：`[[uiapplication sharedapplication]openurl:@"www.maps.google.com];`
这将打开谷歌地图，但这样做的一个问题是它会将您导航到 safari 并且您的应用程序将退出，如果您想从该网页移回您的应用程序，那么它将不可能.您再次需要运行该应用程序。

# javascript - JavaScript 是面向对象的吗？

> ID：107464
> 
> 赞同：55
> 
> 时间：2008-09-20T07:03:04.533
> 
> 标签：javascript, oop

关于 JavaScript 是否是一种面向对象的语言一直存在一些问题。即使是这样的声明，“仅仅因为一种语言有对象并不能使它成为 OO。”

JavaScript 是面向对象的语言吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-09-20T17:14:04.563

IMO（这只是一种观点）面向对象语言**的**关键特征是它支持[*多态性*](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。几乎所有动态语言都这样做。

下一个特点是[*封装*](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)，这在 Javascript 中也很容易做到。

然而，在许多人的心目中，[*继承*](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)（特别是实现继承）将平衡一种语言是否有资格被称为面向对象。

Javascript 确实提供了一种通过原型设计继承实现的相当简单的方法，但这是以封装为代价的。

因此，如果您的面向对象标准是多态性、封装和继承的经典三人组，那么 Javascript 不会通过。

**编辑**：提出了补充问题“原型继承如何牺牲封装？” 考虑这个非原型方法的例子：-

```
function MyClass() {
    var _value = 1;
    this.getValue = function() { return _value; }
} 
```

_value 属性是封装的，不能被外部代码直接修改。我们可能会在类中添加一个 mutator，以完全由类中的代码控制的方式对其进行修改。现在考虑对同一类的原型方法：-

```
function MyClass() {
  var _value = 1;
}
MyClass.prototype.getValue = function() { return _value; } 
```

好吧，这坏了。由于分配给 getValue 的函数不再在 _value 的范围内，因此无法访问它。我们需要将 _value 提升为的属性，`this`但这会使其在为类编写的代码的控制之外可访问，因此封装被破坏。

尽管如此，我仍然认为 Javascript 是面向对象的。为什么？因为给定[OOD](http://en.wikipedia.org/wiki/Object-oriented_design)，我可以用 Javascript 实现它。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-09-20T07:08:28.437

简短的回答是肯定的。了解更多信息：

来自[维基百科](http://en.wikipedia.org/wiki/Javascript)：

> JavaScript 很大程度上是基于对象的。对象是关联数组，增加了原型（见下文）。对象属性名称是关联数组键：obj.x = 10 和 obj["x"] = 10 是等价的，点符号只是语法糖。可以在运行时添加、更改或删除属性及其值。对象的属性也可以通过 for...in 循环枚举。

另外，请参阅有关使用 Javascript 的 OOP 的[本系列文章。](http://www.sitepoint.com/article/oriented-programming-1/)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2008-09-20T07:08:49.167

Javascript 是一种多范式语言，支持过程式、面向对象（基于原型）和函数式编程风格。

这是[一篇](http://mckoss.com/jscript/object.htm)讨论如何在 Javascript 中执行 OO 的文章。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2008-09-20T07:14:07.970

语言不需要完全像 Java 那样是面向对象的。Javascript 中的一切都是对象；与 C++ 或更早的 Java 相比，后者在某种程度上被广泛认为是面向对象的，但仍然基于原语。多态在 Javascript 中不是问题，因为它根本不关心类型。语法不直接支持的唯一核心 OO 特性是继承，但可以很容易地实现，但程序员希望使用原型：[这](http://www.crockford.com/javascript/inheritance.html)是一个这样的例子。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-09-22T17:41:37.850

JavaScript 是面向对象的，但不是基于*类的*面向对象语言，如 Java、C++、C# 等。基于类的 OOP 语言是更大的 OOP 语言家族的子集，其中还包括基于原型的语言，如 JavaScript和自我。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-09-22T17:55:58.127

是和不是。

正如 Douglas Crockford 所说，JavaScript 是“[世界上最容易被误解的编程语言](http://javascript.crockford.com/javascript.html)”。他有一些[关于 JavaScript 的精彩文章](http://www.crockford.com/javascript/)，我强烈建议您阅读 JavaScript 到底是什么。它与 C++ 的 LISP 有更多共同点。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-09-30T10:05:52.517

JavaScript 是一种基于原型的编程语言（可能基于原型的脚本语言是更正确的定义）。它采用克隆而不是继承。基于原型的编程语言是一种没有类的面向对象编程风格。虽然面向对象的编程语言鼓励开发关注分类和关系，但基于原型的编程语言鼓励先关注行为，然后再进行分类。

“面向对象”一词由 Alan Kay 在 1967 年创造，他在 2003 年将其解释为

> *只有消息传递，本地保留和保护和隐藏状态过程，以及所有事物的极端后期绑定。* ^([（来源）](http://userpage.fu-berlin.de/~ram/pub/pub_jf47ht81Ht/doc_kay_oop_en))

在面向对象编程中，每个对象都能够接收消息、处理数据以及向其他对象发送消息。

面向对象的语言可能包括封装、模块化、多态性和继承等特性，但这不是必需的。使用类的面向对象编程语言通常被称为基于类的编程语言，但使用类并不是必须的面向对象的编程语言。

JavaScript 使用原型来定义对象属性，包括方法和继承。

结论：JavaScript 是面向对象的。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-20T07:55:14.907

与大多数面向对象的语言不同，JavaScript（无论如何，在 ECMA 262 第 4 版之前）没有类的概念，而是原型。因此，是否称其为面向对象确实有点主观。

@eliben：维基百科说*基于*对象。这与面向对象不同。事实上，[他们关于基于对象的文章](http://en.wikipedia.org/wiki/Object-based)区分了面向对象的语言和基于原型的语言，明确称 JavaScript*不是*面向对象的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-20T07:11:24.997

JavaScript 是一种非常好的语言，可以用来编写面向对象的 Web 应用程序。它可以支持 OOP，因为通过原型设计也支持属性和方法的继承。您可以拥有多态性、封装性和许多子类范式。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-20T07:48:09.183

这当然是主观和学术问题。有些人争论 OO 语言是否必须实现类和继承，有些人编写的程序会改变你的生活。;-)

（但实际上，为什么 OO 语言必须实现类？我认为*对象*是关键组件。如何创建和使用它们是另一回事。）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-30T18:47:28.427

这*是*一个很好的线程。这里有一些我喜欢的资源。大多数人从原型、jquery 或前 6 个库之一（mootools、ExtJS、YUI）开始，它们具有不同的对象模型。Prototype 试图复制大多数人认为的经典 OO

[http://jquery.com/blog/2006/08/20/why-jquerys-philosophy-is-better/](http://jquery.com/blog/2006/08/20/why-jquerys-philosophy-is-better/)

这是我经常参考的原型和功能的图片

[http://www.mollypages.org/misc/js.mp](http://www.mollypages.org/misc/js.mp)？

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-10-30T18:43:21.233

我正在从另一个角度回答这个问题。

这是一个永恒的话题，我们可以在很多论坛上掀起一场火焰大战。

当人们断言 JavaScript 是一种 OO 编程语言因为他们可以使用 OOD 时，我会问：为什么 C 不是一种 OO 编程语言？重复一遍，您可以将 OOD 与 C 一起使用，如果您说 C 是一种 OO 编程语言，那么每个人都会说您疯了。

我们可以在非常古老的书籍和论坛中放很多关于这个话题的参考资料，因为这个话题比互联网更古老:)

JavaScript 多年来一直没有改变，但新程序员希望表明 JavaScript 是一种 OO 编程语言。为什么？JavaScript 是一种强大的语言，但不是一种面向对象的编程语言。

OO 编程语言必须具有对象、方法、属性、类、封装、聚合、继承和多态性。你可以实现所有这些点，但 JavaScript 没有。

一个非常说明的例子：在“面向对象的 JavaScript”的第 6 章中描述**了实现“继承”的 10 种方式。**Java中有多少种礼仪？一，在 C++ 中？一，在德尔福（对象帕斯卡）？一，在Objective-C中？一。

为什么这不一样？因为 Java、C++、Delphi 和 Objective-C 在设计时考虑了 OOP，而不是 JavaScript。

当我还是学生时（1993 年），在大学里，有一个典型的家庭作业：用非 OO 语言实现一个使用 OOD（面向对象设计）设计的程序。在那个时候，选择的语言是 C（不是 C++）。这种做法的目的是明确 OOD 和 OOP 之间的区别，并且可以区分 OOP 和非 OOP 语言。

无论如何，有证据表明并非所有人都对这个话题有一些看法:)

**无论如何，在我看来，JavaScript 是一种强大的语言，也是客户端层的未来！**

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-20T09:59:00.350

Hanselminutes[第 146 集](http://www.hanselminutes.com/default.aspx?showID=146)着眼于 OO Ajax。这是一个很好的节目，绝对是一个有助于形成意见的好节目。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-01-29T17:43:04.890

Misko Hevery 做了一个很棒的介绍性 Google 技术讲座，他在其中谈到了 Javascript 中的对象。我发现对于那些质疑 Javascript 中对象的使用或想要开始使用它们的人来说，这是一个很好的起点：

*   [JavaScript 和浏览器 DOM 简介](http://goo.gl/FJiqM)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-20T07:15:11.943

[Microsoft Ajax 客户端库](http://www.asp.net/ajax/downloads/)使在javascript 中实现 OO 变得简单。它支持inharitence和接口实现。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-20T07:31:33.763

我认为很多人回答这个问题“不”，因为 JavaScript 没有实现传统的 OO 意义上的类。不幸的是（恕我直言），这将在 ECMAScript 4 中出现。在那之前，原型万岁！:-)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-20T07:58:35.820

我认为，当您可以遵循与 Java/C# 等真正的 OO 语言相同或相似的设计模式时，您几乎可以将其称为 OO 语言。有些方面明显不同，但您仍然可以使用非常成熟的 OO 设计模式。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-20T08:41:56.260

JavaScript 是基于对象的，而不是面向对象的。不同之处在于基于对象的语言不支持正确的继承，而面向对象的语言则支持。

有一种方法可以在 JavaScript 中实现“正常”继承（[参考这里](http://www.crockford.com/javascript/inheritance.html)），但基本模型是基于原型设计的。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-20T09:54:51.577

javascript 中的一切都是对象——类是对象，函数是对象，数字是对象，对象是对象。它不像其他语言那样对打字严格，但绝对可以编写 OOP JS。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-20T14:10:41.913

是的。然而，它并不支持缺乏继承和多态性的面向对象编程语言所期望的所有特性。然而，这并不意味着您不能通过该语言可用的原型系统来模拟这些功能。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-21T23:31:53.883

Javascript 不是通常认为的面向对象的语言，主要是由于缺乏真正的继承，DUCK 类型允许继承/多态的半真实形式以及允许复杂函数共享的 Object.prototype。然而，在其核心，缺乏继承会导致发生弱多态性，因为 DUCK 类型会坚持某些具有相同属性名称的对象是它们不打算用作对象的实例。因此，将属性添加到随机对象会以某种方式转换其类型的基础。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-22T17:48:52.717

从技术上讲，它是一种原型语言，但很容易在其中实现 OO。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-22T17:50:45.707

它是面向对象的，但不是基于类，而是基于原型。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-11-26T20:46:14.390

JavaScript 中的对象直接继承自对象。什么可以更面向对象？

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2012-05-11T14:42:25.933

对我个人而言，OOP 编程的主要吸引力在于能够拥有具有未公开（私有）内部工作的自包含类。

在 Javascript 中让我无所适从的是，您甚至不能使用函数名称，因为您冒着在您正在使用的任何外部库中的其他地方使用相同函数名称的风险。

尽管一些非常聪明的人已经找到了解决方法，但最纯粹的 Javascript 要求您创建高度不可读的代码，这不是很奇怪吗？

OOP 的美妙之处在于您可以花时间思考应用程序的逻辑，而不必担心语法。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2012-05-14T11:51:30.970

> JavaScript 是面向对象的吗？
> 
> 答案：是的

它具有可以包含数据的对象和作用于该数据的方法。对象可以包含其他对象。

*   它没有类，但它有构造函数来做类所做的事情，包括充当类变量和方法的容器。
*   它没有面向类的继承，但有面向原型的继承。

构建对象系统的两种主要方式是继承（is-a）和聚合（has-a）。JavaScript 两者兼而有之，但其动态特性使其在聚合方面表现出色。

一些人认为 JavaScript 并不是真正的面向对象，因为它不提供信息隐藏。也就是说，对象不能有私有变量和私有方法：所有成员都是公共的。

但事实证明，**[JavaScript 对象可以有私有变量](http://www.crockford.com/javascript/private.html)**和私有方法。（现在单击此处了解如何操作。）当然，很少有人理解这一点，因为 JavaScript 是世界上最容易被误解的编程语言。

有些人认为 JavaScript 并不是真正的面向对象，因为它不提供继承。但事实证明，**[JavaScript 不仅支持经典继承，还支持其他代码重用模式。](http://javascript.crockford.com/inheritance.html)**

资料来源：http: [//javascript.crockford.com/javascript.html](http://javascript.crockford.com/javascript.html)

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2008-09-20T07:41:50.477

我会说它具有看起来 OO 的能力。特别是如果您利用它在现有对象上创建方法的能力（某些语言中的匿名方法）。jquery (jquery.com) 或原型 (prototypejs.org) 等客户端脚本库是利用这一点的库的很好示例，使 javascript 的行为非常类似于 OO。

# language-agnostic - 没有前端的CMS？

> ID：107494
> 
> 赞同：12
> 
> 时间：2008-09-20T07:15:55.360
> 
> 标签：language-agnostic, content-management-system, scalability, publishing

在我们正在开发的许多项目中，我们需要在站点的后端具有 CMS 功能。另一方面，我们不想或不能承诺一个完整的前端解决方案。为了更好地解释这一点：

*   [Joomla](http://www.joomla.org/)或[DotNetNuke](http://www.dotnetnuke.com/)等CMS是完整的网站解决方案，它们允许您存储和发布数据。如果您只需要存储数据并以自定义方式检索数据，它们根本不友好。它们不是我们正在寻找的——我认为它们根本不应该被称为 CMS，因为它们更多！

*   像[Umbraco](http://www.umbraco.org/)这样的 CMS看起来不错，但同样，如果您想以自定义方式使用数据，它们根本就不是很通用。Umbraco 为您提供了在运行时访问数据的 API，而我也对具有可扩展性问题的静态发布功能感兴趣。

提供更多指示：

*   如果它有一个插件系统，它可能不是我要找的......
*   如果它不能静态和动态发布（想想 XML 文件或 HTML 文件和 API），它可能不是我想要的......
*   跨数据库会很棒，但不是绝对必要的

CMS 不需要是免费的，但我们必须能够拥有完整的源代码。至于平台，我们主要需要.NET和LAMP的解决方案。

我已经知道[CMS Matrix](http://www.cmsmatrix.org/)站点，但是它对 CMS 的定义包括太多的网站解决方案，所以我没有足够的信噪比来找到我需要的东西。

**编辑：**要明确：我不想使用某种框架编写 CMS。我想要一个可以存储具有典型 CMS 功能（所见即所得编辑器、版本控制、工作流等）的异构数据并提供发布此数据的功能的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-10T13:41:03.473

对于 Java 解决方案，[Apache Jackrabbit](http://jackrabbit.apache.org/)可能对您有用。从链接：

> Apache Jackrabbit 是完全符合[Java 技术 API](http://www.jcp.org/en/jsr/detail?id=170) (JCR) 内容存储库的实现。内容存储库是一种分层内容存储，支持结构化和非结构化内容、全文搜索、版本控制、事务、观察等。使用内容存储库的典型应用程序包括内容管理、文档管理和记录管理系统

在我看来，它一直是一个组件库，用于构建类似 CMS 的系统的后端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-20T13:05:17.047

我已经将[N2](http://n2cms.com)用于几个站点。它是完全开源的，我认为它可能符合您的数据要求。您基本上创建 C# 类来对您的数据进行建模，然后构建您自己的前端模板以在站点中显示数据。

在后端，您创建的数据类型可以通过所见即所得的管理区域完全编辑。

不确定它是否符合您的发布要求，它是基于数据库的，我不需要尝试通过管理界面以外的任何方式更新它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-21T19:14:31.797

你看过[Alfresco](http://www.alfresco.com/)吗？它直接针对企业市场（并且是用 Java 编写的），但在内容部署方面似乎提供了一些灵活性。从网站上的营销副本：

> 网站发布支持多层部署架构。内容可以事务性地部署到静态内容服务器或 Alfresco 运行时存储库，为您的网络农场提供完整的架构灵活性。

此外，内容存储在[JSR-170](http://www.alfresco.com/products/solutions/ecm/repository/)兼容的存储库中，就像上面[jamesh](https://stackoverflow.com/questions/107494/cms-without-front-end#191326)提到的那样。这将允许您以编程方式访问存储库中的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-11T15:10:59.010

您可以使用 Microsoft Office SharePoint Server 2007 (MOSS)。您可以优化 SharePoint 系统以创建内容，然后使用对象模型或 Web 服务来提取内容并在任何平台上以任何语言编写您的网站。SharePoint 具有丰富的内容编辑、列表、工作流等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-06T21:34:28.443

[Tridion](http://www.sdltridion.com)非常符合您的描述，但您不会获得他们的源代码。如果这对您来说是一个交易破坏者，请随时忽略此答案。（OTOH - 这会引发一个问题“为什么它会破坏交易？”大概你不希望来源来装饰你的墙壁。你会用它做什么？）

Tridion 的内容管理子系统在 Windows Server 上运行。内容交付子系统在 Java 和 .NET 上运行（加上普通的旧 ASP，如果有区别的话）。

您期望 CMS 拥有的所有东西都是开箱即用的，（所见即所得的编辑器、版本控制、工作流程等...... + 发布）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-26T08:52:41.387

来不及回答？:-)

为了跟进 Dominic 的回答（免责声明：我的公司使用 Tridion），Tridion 将内容作为 XML 存储在其数据库中，并且可以发布为各种格式，包括 XML、HTML、其他基于文本的文件、前面的“代理”数据库通过 API 访问的 end。.NET 代码可以实例化代理对象并根据与其关联的元数据查询内容。最新版本（2009 年和现在的 2011 年）可以更好地访问元数据和类别（又名“分类法”）。

内容与模板分离，这意味着您可以将相同的内容呈现为静态页面、RSS 提要或通过 API 提供，跨不同站点甚至本地化为一种语言（我的团队没有使用该功能作为很多）。

封闭源代码，但我们可以访问文档，有一个活跃的论坛，任何人都可以为代码库贡献“扩展”，以添加生成的 PDF、链接到 Google 地图等功能。我们选择它的原因相同——很多 CMS 都是“盒子中的网站”。我们只是想要开发人员可以从中提取或替换某些 HTML 页面或 XML 的东西，而不是想要接管我们网站的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T09:23:14.210

所以基本上你对CMS商店前面的东西不感兴趣，可以这么说。好的，走进后面的房间……当我旋转这面可移动的墙时……我会告诉你一些不同的东西：

> [http://www.radicore.org/](http://www.radicore.org/)

说真的，我在 2 或 3 年前对这个框架进行了修改。我不能保证它，因为我从来没有在任何项目中使用过它，但它很有趣。

*PS* - 正是 radicore 网站上的这一点在我的脑海中建立了联系，也许这是至少要检查的东西：“ *View 组件由可重用 XSL 样式表的预构建集合管理，这些样式表生成所有 HTML输出。* ”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-04T14:21:25.890

[Fedora](http://www.fedora-commons.org/)可能适合后端的需求，但它可能对您的需求来说太重了。它没有前端，只有一些管理界面，使用它的组织倾向于将其与现有系统集成，或者使用第三方前端，其中有几个，或者只是自己编写。

有一篇白皮书[Sun Microsystems: A New Approach to Creating and Management Large-Scale Digital Archives](http://www.fedora.info/pdfs/Fedora_Commons_Sun_Solution_Brief.pdf)，应该可以帮助您排除这种可能性。

有多少 FT 员工被分配到该项目及其持续维护中？

# javascript - 基于 XML 的网站 - 如何创建？

> ID：107531
> 
> 赞同：6
> 
> 时间：2008-09-20T07:38:32.917
> 
> 标签：javascript, xml, asp-classic

我想创建一个基于 XML 的网站。我想使用 XML 文件作为数据源，因为它是一种在线目录站点。有人可以给我一个起点吗？有什么好的在线资源可以参考吗？我对 ASP 和 JavaScript 非常满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-20T18:33:11.410

如果您不能或不希望以 XHTML 格式存储数据，那么 XSLT 绝对是您想要的方式。根据其定义，它是一种转换语言，旨在将数据从一种格式转换为另一种格式。因为这是它的重点，所以它提供了许多其他解决方案所没有的功能、速度和灵活性。它还将确保您输出符合标准的 (X)HTML，因为这是不可能的（好吧，不是故意不去破坏它）。

MSXML 允许您进行 XSL 转换以在经典 ASP 中使用 - 请参阅[此页面](http://www.inov8design.com.au/articles/xml_xslt_asp.asp)以获取示例。

[ZVON.org](http://www.zvon.org/xxl/XSLTreference/Output/index.html)也是一个很好的 XSLT 参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T08:01:37.200

嘿，这里有个想法——xhtml毕竟是xml，所以如果你可以定义xml文件的格式，只需创建浏览器友好的xhtml就可以了。

否则，我确信有用于 ASP 的 XML 解析库，您可以查看 XSLT（学习起来很酷，但更具挑战性）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-20T08:23:07.100

w3schools 有[关于 XSLT 的非常好的信息](https://www.w3schools.com/xml/xsl_intro.asp)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-01T19:14:49.820

我使用过基于 XML/XSLT 的模板系统，并且认识其他人，我的建议是**不要这样做**。您将倾向于将 XSLT 用作表示逻辑的编程语言，并且开发和维护它是一件令人头疼的事情。

您可以使用 XML 作为数据源，但使用反序列化或 XQuery/XPath 来提取数据并在更易于使用的模板系统中使用它——即使是 ASP 页面也可以。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T07:50:42.140

我会使用带有内置 SimpleXML 功能的 PHP，尽管我确信 ASP 也有类似的功能。

或者，您可以使用 XSLT 将 XML 转换为显示 - 取决于 XML 是什么以及您是在创建它还是只是在使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T09:56:32.743

jQuery、AJAX 和 PHP 是您的朋友 - 对于静态内容，PHP 中的一些嵌套循环可以轻松地将 XML 转换为 XHTML（感谢指出格式良好的 xhtml 是 xml 的人），并且使用 jQuery，您可以在根据需要附加内容。

另外 - 我有没有提到它们都是免费的？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T18:23:02.103

（我真的建议使用传统数据库。）

在 ASP 中，您可以使用 MSXML 组件来解析和更改 XML 文件。可以在[MSDN](http://msdn.microsoft.com/en-us/library/ms760399.aspx)上找到有关 MSXML 组件的更多信息。

基本上你想做的是读取一个 XML 文件并在服务器端进行一些过滤，然后输出到客户端。

也许这样的事情会让你开始：XML：

```
<data>
  <item visible="no">
    <title>Invisible item 1</title>
  </item>
  <item visible="yes">
    <title>Visible item 1</title>
  </item>
  <item visible="yes">
    <title>Visible item 2</title>
  </item>
</data> 
```

还有一些 ASP：

```
Dim oXMLDoc
Dim oNode
Set oXMLDoc = CreateObject("MSXML.DOMDocument")
oXMLDoc.Load Server.MapPath("../_private/data.xml")
Set oNode = oXMLDoc.SelectSingleNode("data/item")
Do Until oNode Is Nothing
  If oNode.GetNamedAttribute("visible") = "yes" Then
    Response.Write "Title: " & oNode.SelectSingleNode("title").Text & "<br />" & vbCrLf
  End If
  Set oNode = oNode.nextSibling
Loop 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T19:09:41.680

看看 tox，[http](http://tox.sourceforge.net/) ://tox.sourceforge.net/ 。它适用于 Oracle，但您可以使用包含功能来检索 XML 文件。与大多数其他答案一样，使用 tox 时，您需要通过 XSLT 将视图应用于 XML。tox 下载中包含几个非常简单的示例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-03-22T08:15:50.820

使用 XML 使 Web 内容管理变得简单。

[SoftXMLCMS](http://www.softxml.com/SoftXMLCMS.asp)是一个独特的内容管理系统，用于管理 XML 格式的数据。简单的图形界面使您能够控制分析数据以创建分层结构。

SoftXMLCMS 是用于创建不同语言的复杂多页网站的理想网络工具。SoftXMLCMS 的主要优点是不需要数据库来显着降低创建专业网站的成本。

安装应用程序的过程非常简单，不需要特殊的技术技能。

与市场上最重要的浏览器兼容：IE 5.5+、Firefox 1.0+、Mozilla 1.3+、Netscape 7+、Chrome，并且只需要 ASP JPEG 组件即可工作。

SoftXMLCMS 包括一个强大的文本编辑器，用于在 CMS 中编辑丰富的 HTML 文档和图像。编辑器的类 Word 界面使对 HTML 一无所知并希望保持这种方式的业务用户可以轻松创建内容。

SoftXMLCMS 包括一个现成的网站模板，用于显示 CMS 内容。所有这一切都将为您提供一套工具，用于在最短的时间内以具有成本效益的方式创建专业网站。

SoftXMLCMS 需要 IIS 并支持 Microsoft ASP 技术和 ASP JPEG 组件。

# prototyping - How do you prototype?

> ID：107534
> 
> 赞同：7
> 
> 时间：2008-09-20T07:41:22.537
> 
> 标签：prototyping

We prototype a design, GUI, just to analyze a particular problem, proof of concept, etc. Sometimes we throw away the prototype, and sometimes it ends up in the production code. We use different languages, technologies, strategies, and styles to prototype.

What are the different situations you prototype usually and how do you prototype? Any good resource out there to master the craft?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-20T20:14:33.163

一个热门标题是*[针对软件制造商的有效原型设计](https://rads.stackoverflow.com/amzn/click/com/0120885689)*。问题是有几种思想流派。

*   快速原型制作。使用花哨的工具；尽快完成某事。

*   进化原型。从原型发展到生产。

其中一些是遗留思维，基于一个工具原始且项目必须从一开始就精心计划的时代。当我开始从事这个行业时，“绿屏”角色模式应用程序在火箭科学和模拟中非常痛苦。工具和正式技术对于管理成本和风险至关重要。

这种想法被一些最近的想法所取代。

1.  强大的工具消除了对复杂原型的需求。HTML 模型可以快速拼接在一起。当您几乎不需要预算或计划时，它仍然是原型吗？[您可以在 MS-Word 中模拟它并将其保存为 HTML。业务分析师做这件事比指定它并让程序员做要快。]

2.  此外，强大的工具可以降低错误成本。如果只需要一周的时间就可以完成生产准备工作，那么正式的原型工作有什么意义呢？

3.  敏捷技术减少了进行如此详细的前期计划的需要。当您将某些东西快速交到用户手中时，您就不需要在开始之前确保每一个细微差别都是*正确*的。它必须足够好才能考虑它的进步。

可能发生的情况如下。[隐藏的问题是：这仍然是“原型设计”——还是只是一种具有强大工具的敏捷方法？]

使用 Django 之类的工具，您可以将基本的核心数据结构放在一起并几乎立即进行练习。使用默认的 Django 管理页面，一旦你能清楚地表达数据结构和编写加载实用程序，你就应该启动并运行。

然后，添加围绕真实工作数据的演示页面。确保你做对了。由于您只构建了数据模型和模板驱动的 HTML 页面，因此您的投资很少。探索。

迭代直到人们开始要求比默认管理页面中提供的更智能的交易。在这一点上，你正在从“发现”和“精心设计”转向“建设”。你做过原型设计吗？我想您丢弃的每个 HTML 模板都是一种原型。就此而言，您保留的那些在哪里。

在整个过程中，您可以与或多或少的现场生产用户一起工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T20:22:17.187

就个人而言，我认为一个真正的原型不应该比在纸上绘制的图表来展示你想要实现的任何东西的流程。然后，您可以使用这些记录在案的流程来运行多个场景，以查看它是否适用于请求该功能的任何人。

一旦纸质原型被修改到可以工作的程度，然后将其用作开始正确编码的基础。

这个过程的好处是你不能最终在生产中实际使用原型代码，因为没有任何原型代码。此外，与业务专家一起测试它要容易得多，因为他们没有任何代码可以理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T07:43:46.853

Right now I just draw pictures. I would like to do more, but to get something to a point where the users would understand any better than a picture would cost to much time.

I am interested in seeing some of these responses :)

I should mention where I work is just me and one other guy to play the roles of project manager (collect data, design spec & app), dbas, coders, tool researcher/developer, et al that comes with the job of making an app for a small company.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T09:00:44.110

For webapps, start with an pure (x)HTML + CSS mock-up, and then use a framework that makes it easy to implement the functionality.

Template-based frameworks are very good for this, but we've had some good experiences with JSF + Facelets + Seam, too.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-10T22:06:11.260

做原型的主要原因是降低风险。因此，我们做 UI 原型，除非它们真的做了一些用户可以玩的东西，否则它们真的不是很有帮助。同样重要的是，我们还制作原型来证明某事可以工作或弄清楚某事是如何工作的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T07:44:50.687

I start off making a prototype that makes the most interesting part work, then I throw it away and move on to a new, more interesting project...

*kills self*

# javascript - 你将如何在 JavaScript/HTML 中实现自动大写

> ID：107546
> 
> 赞同：2
> 
> 时间：2008-09-20T07:45:15.680
> 
> 标签：javascript, formatting, text-editor

作为用户类型，我需要在 ASPX 页面上的 Telerik RadEditor 控件内实现自动大写。

这可以是 IE 特定的解决方案 (IE6+)。

我目前在用户键入时捕获每个击键（向下/向上）以支持称为“宏”的单独功能，该功能本质上是扩展为格式化文本的短关键字。即宏“so”可以在点击空格键时自动扩展为“stackoverflow”。

也就是说，我可以访问 keyCode 信息，并且我正在使用 TextRange 方法来选择一个单词（“so”）并将其扩展为“stackoverflow”。因此，我有一些上下文。

但是，我需要检查此上下文以了解是否应该自动大写。无论是否涉及宏，这也需要工作。

由于我正在监视宏的击键，我应该只监视标点符号（不仅仅是表示大写字母的句点）并自动限制输入的下一个字母，还是应该使用 TextRange 并分析上下文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T08:33:13.207

您是否尝试将[text-transform](http://www.w3.org/TR/CSS2/text.html#caps-prop) CSS 样式应用于您的控件？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-20T08:48:33.250

我不确定这是否是你想要做的，但这里有一个函数（[参考](http://individed.com/code/to-title-case/js/to-title-case.js)）将给定的字符串转换为标题大小写：

```
function toTitleCase(str) {
    return str.replace(/([\w&`'â€˜â€™"â€œ.@:\/\{\(\[<>_]+-? *)/g, function(match, p1, index, title){ // ' fix syntax highlighting
        if (index > 0 && title.charAt(index - 2) != ":" && 
            match.search(/^(a(nd?|s|t)?|b(ut|y)|en|for|i[fn]|o[fnr]|t(he|o)|vs?\.?|via)[ -]/i) > -1)
            return match.toLowerCase();
        if (title.substring(index - 1, index + 1).search(/['"_{([]/) > -1)
            return match.charAt(0) + match.charAt(1).toUpperCase() + match.substr(2);
        if (match.substr(1).search(/[A-Z]+|&|[\w]+[._][\w]+/) > -1 ||
            title.substring(index - 1, index + 1).search(/[\])}]/) > -1)
            return match;
        return match.charAt(0).toUpperCase() + match.substr(1);
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-02-13T09:42:34.110

有时，不这样做是编码问题的正确答案。

我真的不会这样做，除非你觉得你可以编写一个脚本来正确设置以下句子中的大小写，如果你首先将其转换为小写并将其传递给脚本。

Jean-Luc “The King” O'Brien MacHenry van d'Graaf IIV (PhD, OBE) 与他的朋友 MacIntosh 和 MacDonald 一起将他的 Macintosh 留在了 Macdonald's。耶稣在圣乔治街的 AT&T 的“艾滋病防治”演出中给了他的 Atari ST，范海伦在范亨利的面包车里表演暴风雨。

通过尝试创建自然语言解析器，您已经为自己做好了准备。您永远无法像用户那样做到这一点。充其量，您可以进行近似，并让用户能够在您出错时进行编辑和强制更正。但通常在这种情况下，编辑工作比一开始就手动完成要多。

也就是说，如果您有足够的空间和能力来存储和搜索一个包含适当大写单词的大型 n-gram 语料库，那么您至少能够在最可能需要的情况下进行疯狂的尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T09:04:13.290

你提出了一个有趣的问题。对每次按键进行操作可能会受到更多限制，因为您将不知道在给定键码之后会立即发生什么（撤消结果不正确的反应的复杂性可能意味着无论如何都必须转到基于 TextRange 的例程）。诚然，迄今为止我还没有与这个问题的代码搏斗，所以这是我脑海中的一个假设。

无论如何，这里有一个 Title Casing 函数（受 John Gruber 博客自动化启发的 java 实现）在处理实际的套管代码时可能会激发一些想法：

> [http://individed.com/code/to-title-case/](http://individed.com/code/to-title-case/)

# c++ - GCC 使用 __stdcall 编译 dll

> ID：107549
> 
> 赞同：8
> 
> 时间：2008-09-20T07:46:05.490
> 
> 标签：c++, gcc, name-decoration

当我们在 Visual Studio 2008 中使用 __stdcall 编译 dll 时，dll 中的编译函数名称是。

函数名

虽然当我们使用 GCC 使用 wx-dev-cpp 编译相同的 dll 时，GCC 会附加函数具有的参数数量，所以使用 Dependency walker 的函数的名称看起来像。

FunctionName@numberOfParameters 或 == FunctionName@8

你如何告诉 GCC 编译器从 dll 中的导出符号中删除 @nn？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-20T07:53:07.750

__stdcall 通过在开头添加下划线和在末尾添加参数的字节数（以@分隔）来装饰函数名称。

所以，一个函数：

```
void __stdcall Foo(int a, int b); 
```

...会变成 _Foo@8。

如果您在 .DEF 文件的 EXPORTS 部分中列出函数名称（未修饰），则将其导出为未修饰。

也许这就是区别？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-31T20:08:53.700

只需`-Wl,--kill-at`在 gcc 命令行上使用，它将传递`--kill-at`给链接器。

参考：

*   [http://sourceware.org/binutils/docs/ld/Options.html#Options](http://sourceware.org/binutils/docs/ld/Options.html#Options)
*   [http://www.geocities.com/yongweiwu/stdcall.htm](http://www.geocities.com/yongweiwu/stdcall.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T09:14:43.363

您还可以使用`-Wl,--add-stdcall-alias`GCC 中的链接器选项。这将确保两个函数名称（装饰和未装饰）都存在并且可以用作别名。

# vmware - 开始使用服务器虚拟化的最佳方式是什么？

> ID：107552
> 
> 赞同：2
> 
> 时间：2008-09-20T07:46:55.037
> 
> 标签：vmware, virtualization, virtualbox, virtual-pc

我们最近为其购买了一个新的机架和一组服务器，我们希望能够将这些盒子重新部署为构建服务器、QA 回归测试服务器、实验室重新相关服务器、模拟服务器等。

我们已经使用 VMWare、VirtualPC、VirtualBox 等创建了一个虚拟构建服务器，但是当我们尝试复制它以供其他人使用时遇到了很多问题，必须重新配置 VM 的每个新副本。

我们使用的是 Windows XP x86/x64 和 Windows Vista x86/x64，所以我必须为每个新副本重命名机器、加入域等。

理想情况下，我们只希望能够添加一个新机器，部署一个精简的引导操作系统（Linux 在这里很好）来让 VM 运行，然后使用它。

另一件事是我们没有预算限制，所以免费是最好的。

我想了解其他人做同样事情的经历。

仅供参考，我不是系统 IT 部门，我们是一群试图设置它的软件工程师。

任何指向好的教程的链接都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-20T08:47:54.687

您遇到的问题是机器 SID 对于域中的每台机器必须是唯一的。当然，通过复制图像，您现在可以打破这种独特的约束。

我建议您阅读reskit 和[Vista 系统映像管理器中的](http://technet.microsoft.com/en-us/library/cc721929.aspx)[Sysprep](http://technet.microsoft.com/en-us/library/bb457073.aspx)文档- 分别是 XP/Win2k3 和 Vista/Win2k8 的朋友。

这些工具可以“重新密封”您配置的操作系统实例，以便下次启动时 - 它可以提示输入网络配置、机器名称、管理员用户 ID、运行脚本等信息。

另请注意，Windows 桌面客户端的许可限制通常针对每个映像，而不是针对每个服务器。

将这些工具与 HyperV 一起使用，我们创建了完整的 Win2k3 和 Win2k8 预配置实例，这些实例可以启动以完成 Sharepoint 的安装——更进一步，我们使用差异磁盘覆盖 Visual Studio，以便我们的开发人员可以将生产映像用于他们的工作。它从根本上改变了我们的开发过程。

此时，我们的整个公共网站都在 HyperV 上运行，其中 5 个盒子运行 15 个图像，以实现软冗余和硬冗余的混合——它们每周需要数亿次页面浏览量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-24T07:54:22.270

处理 SID 问题的另一个选项是[NewSID](http://technet.microsoft.com/en-us/sysinternals/bb897418.aspx "新SID")。这是一个比 sysprep 更简单的工具，它所做的只是重命名机器并重新分配 SID；如果您不需要 sysprep 的所有其他功能，这是一个更容易使用的工具。

# linux - Trying to run faac's bootstrap script but running into errors

> ID：107562
> 
> 赞同：2
> 
> 时间：2008-09-20T07:52:30.687
> 
> 标签：linux, build, autotools, bootstrapping

I'm trying to install faac and am running into errors. Here are the errors I get when trying to build it:

* * *

```
[root@test faac]# ./bootstrap  
configure.in:11: warning: underquoted definition of MY_DEFINE
run info '(automake)Extending aclocal'  
or see http://sources.redhat.com/automake/automake.html#Extending-aclocal  
aclocal:configure.in:17: warning: macro `AM_PROG_LIBTOOL' not found in library  
common/mp4v2/Makefile.am:5: Libtool library used but `LIBTOOL' is undefined  
common/mp4v2/Makefile.am:5:   
common/mp4v2/Makefile.am:5: The usual way to define `LIBTOOL' is to add `AC_PROG_LIBTOOL'  
common/mp4v2/Makefile.am:5: to `configure.in' and run `aclocal' and `autoconf' again.  
libfaac/Makefile.am:1: Libtool library used but `LIBTOOL' is undefined  
libfaac/Makefile.am:1:   
libfaac/Makefile.am:1: The usual way to define `LIBTOOL' is to add `AC_PROG_LIBTOOL'  
libfaac/Makefile.am:1: to `configure.in' and run `aclocal' and `autoconf' again.  
configure.in:17: error: possibly undefined macro: AM_PROG_LIBTOOL  
If this token and others are legitimate, please use m4_pattern_allow.  
See the Autoconf documentation. 
```

* * *

Does anyone know what this means? I was unable to find anything about this so I figured I'd ask you guys. Thank you for your help.

EDIT: Here's my versions of linux, libtool, automake and autoconf:

```
[root@test faac]# libtool --version
ltmain.sh (GNU libtool) 2.2
Written by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996

Copyright (C) 2008 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
[root@test faac]# autoconf --version
autoconf (GNU Autoconf) 2.59
Written by David J. MacKenzie and Akim Demaille.

Copyright (C) 2003 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
[root@test faac]# automake --version
automake (GNU automake) 1.9.2
Written by Tom Tromey <tromey@redhat.com>.

Copyright 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
[root@test faac]# cat /etc/redhat-release 
Red Hat Enterprise Linux WS release 4 (Nahant) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T08:07:48.200

I think the first thing to check is that you have libtool installed.

Edit:

This is what I get on Ubuntu 8.04:

```
$ ./bootstrap 
configure.in:11: warning: underquoted definition of MY_DEFINE
configure.in:11:   run info '(automake)Extending aclocal'
configure.in:11:   or see http://sources.redhat.com/automake/automake.html#Extending-aclocal
configure.in:4: installing `./install-sh'
configure.in:4: installing `./missing'
common/mp4v2/Makefile.am: installing `./depcomp'

$ libtool --version
ltmain.sh (GNU libtool) 1.5.26 Debian 1.5.26-1ubuntu1 (1.1220.2.493 2008/02/01 16:58:18)

Copyright (C) 2008  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ autoconf --version
autoconf (GNU Autoconf) 2.61
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software.  You may redistribute copies of it under the terms of
the GNU General Public License <http://www.gnu.org/licenses/gpl.html>.
There is NO WARRANTY, to the extent permitted by law.

Written by David J. MacKenzie and Akim Demaille.

$ automake --version
automake (GNU automake) 1.10.1
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-26T10:34:23.240

So your problem is that automake/conf don't know about libtool.

You need to reinstall all of them. Either from all from source, or all from binary packages. If installing from source, ensure they are all installed to the same location.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T08:23:47.660

Maybe your automake doesn't know about your libtool for some reason. It looks like you've got two copies of libtool installed, which might be confusing it.

Maybe you should remove both copies, plus all automake, autoconf installs, and reinstall them (possibly from source?).

I guess the first step is to find out the locations of the active copies of the tools:

```
which libtool
which automake
which autoconf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-09T19:11:39.887

听起来 autoconf/automake 找不到`libtool.m4`，因此无法解析宏`AM_PROG_LIBTOOL`。在您的 libtool 安装下查找此文件并将其复制/链接到`/usr/share/aclocal/`.

# performance - 您应该在哪里启用 SSL？

> ID：107566
> 
> 赞同：19
> 
> 时间：2008-09-20T07:53:19.217
> 
> 标签：performance, security, ssl, https

我最近的几个项目涉及销售产品/服务并需要“结帐”过程的网站，用户在该过程中输入他们的信用卡信息等。显然，我们获得了 SSL 证书，以确保它的安全性，并让客户放心。然而，我对它的微妙之处有点不知所措，最重要的是网站的哪些部分应该“使用”证书。

例如，我去过一些网站，当你点击主页时，你就会被放入 https - 主要是银行网站 - 然后有些网站只有在你最终结账时才会被放入 https。如果它不处理银行级别的事情，那么让整个网站通过 https 运行是不是有点矫枉过正？我应该只将结帐页面设为 https 吗？全力以赴会有什么表现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-20T11:25:14.997

我个人选择“SSL from go to woe”。

如果您的用户从不输入信用卡号，当然，没有 SSL。

但是 cookie 重放可能存在固有的安全漏洞。

1.  用户访问网站并获得一个 cookie。
2.  用户浏览网站并将数据添加到购物车（使用 cookie）
3.  用户使用 cookie 进入支付页面。

这里有一个问题，特别是如果您必须自己处理付款协商。

您必须将信息从非安全域传输到安全域，然后再传输回来，没有任何保护保证。

如果您做一些愚蠢的事情，例如与 unsecure 共享同一个 cookie 与使用 secure 一样，您可能会发现某些浏览器（正确）为了安全起见会完全*删除*cookie（Safari），因为如果有人在开放时嗅探该 cookie ，他们可以伪造它并在安全模式下使用它，将您出色的 SSL 安全性降级为 0，如果卡详细信息甚至临时存储在会话中，您就有危险的泄漏等待发生。

如果您不能确定您的软件不容易出现这些弱点，我会建议从一开始就使用 SSL，因此它们的初始 cookie 会以安全的方式传输。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-20T07:56:57.350

如果该站点是供公众使用的，您可能应该将公共部分放在 HTTP 上。这使得蜘蛛和临时用户的事情变得更容易和更有效。HTTP 请求的发起速度比 HTTPS 快得多，这一点非常明显，尤其是在具有大量图像的站点上。

浏览器有时也有与 HTTP 不同的 HTTPS 缓存策略。

但是可以在他们登录时或之前将它们放入 HTTPS。在站点变得个性化和非匿名时，它可以从那里开始是 HT​​TPS。

对登录页面本身以及任何其他表单使用 HTTPS 是一个更好的主意，因为它在他们输入信息之前为他们提供了使用挂锁，这让他们感觉更好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-21T18:02:44.953

我一直在整个网站上这样做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-20T12:03:21.020

我也会一直使用 HTTPS。这不会对性能产生很大影响（因为浏览器会在第一次连接后缓存协商的对称密钥）并防止嗅探。

嗅探曾经因为完全切换的有线网络而消失，在那里你必须更加努力地捕捉其他人的流量（而不是使用集线器的网络），但由于无线网络，它正在回归，这创建了一个广播媒体再次使会话劫持变得容易，除非流量被加密。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-20T07:56:52.563

我认为一个好的经验法则是在可能传输敏感信息的任何地方强制使用 SSL。例如：我是 Wescom Credit Union 的成员。首页上有一个部分可以让我登录我的网上银行账户。因此，根页面强制使用 SSL。

可以这样想：敏感的私人信息会被传输吗？如果是，请启用 SSL。否则你应该没问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-20T08:04:20.190

在我们的组织中，我们有三类应用程序 -

*   低业务影响 - 无 PII、明文存储、明文传输、无访问限制。
*   中等业务影响 - 非交易性 PII，例如电子邮件地址。明文存储，从数据中心到客户端的 SSL，数据中心中的明文，有限的存储访问。
*   高业务影响 - 交易数据，例如 SSN、信用卡等。数据中心内外的 SSL。加密和审计存储。已审核的应用程序。

我们使用这些标准来确定数据的分区，以及网站的哪些方面需要 SSL。SSL 的计算要么在服务器上完成，要么通过 Netscaler 等加速器完成。随着 PII 级别的增加，审计和威胁建模的复杂性也会增加。

正如你可以想象的那样，我们更喜欢做 LBI 应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-20T07:59:45.830

通常，在您传输敏感或个人数据的任何时候，您都应该使用 SSL——例如，将商品添加到购物篮可能不需要 SSL，使用您的用户名/密码登录，或者输入您的 CC 详细信息都应该加密。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-20T07:56:53.687

我只在需要用户输入敏感信息时才将我的网站重定向到 SSL。有了购物车，一旦他们必须用他们的个人信息或信用卡详细信息填写页面，我就会将他们重定向到 SSL 页面。对于网站的其余部分，它可能不需要 - 如果他们只是在您的商业网站上查看信息/产品。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-20T07:58:13.120

SSL 的计算量非常大，如果可能，不应使用它来传输大量数据。因此，最好在用户传输敏感信息的结帐阶段启用它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-09-19T08:19:23.747

一个完整的站点有一个主要缺点，`https`不是速度（没关系）。

**如果没有不安全的警告，将很难运行 Youtube、“Like”框等。**

我们现在正在运行一个全面安全的网站和商店两年，这是最大的缺点。我们现在设法让 Youtube 工作，但“添加这个”仍然是一个很大的挑战。如果他们对协议进行任何更改，那么我们所有的 Youtube 电影都可能是空白的……

# sql-server - 通过经典 ASP 从另一个存储过程调用存储过程的问题

> ID：107585
> 
> 赞同：3
> 
> 时间：2008-09-20T08:03:38.130
> 
> 标签：sql-server, stored-procedures, asp-classic, vbscript, cross-server

我们有一个简单的经典 ASP 应用程序，我们一直不愿意修改代码，以免引起一些早已死去的希腊诸神的愤怒。

我们最近需要向应用程序添加功能。功能实现实际上只是一个数据库操作，需要对 UI 进行最小的更改。

我更改了 UI 并进行了小修改，以向 sproc 调用 (sproc1) 提交一个新的数据值。

在直接从 ASP 调用的 sproc1 中，我们添加了对恰好位于另一台服务器 sproc2 上的另一个 sproc 的新调用。

不知何故，这不能通过我们的 ASP 应用程序工作，但可以在 SQL Management Studio 中工作。

以下是技术细节：

1.  两个数据库服务器上的 SQL 2005。
2.  Sql Login 正在从 ASP 应用程序向 SQL 2005 Server 1 进行身份验证。
3.  从服务器 1 到服务器 2 的链接服务器正在工作。
4.  从 SQL Management Studio 执行 sproc1 时 - 工作正常。即使被认证为我们的代码使用的同一用户（应用程序 sql 登录）。
5.  sproc2 在独立于 SQL Management Studio 中的 sproc1 调用时工作。
6.  VBScript (ASP) 捕获在 XML 中发送回客户端的错误。错误编号为 0，错误描述为空白。来自 ADODB.Connection 对象和来自 ASP 端在 VBScript 中产生的任何 Err.Number/Err.Description。

所以没有任何错误，也没有任何可重复性（即通过 SQL Mgmt Studio） - 有人知道这个问题吗？

我们目前的计划是分解并深入研究 ASP 端的代码，并直接从 ASP 对 Server 2.sproc2 进行完全独立的调用，而不是尝试通过 sproc1 捎带。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-20T10:55:50.247

您在两个存储过程中都设置了**set nocount吗？**我曾经遇到过类似的问题，虽然我现在不记得我是如何解决的，但我知道这与它有关！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T08:16:32.547

你可能会遇到[双跳问题](http://blogs.msdn.com/knowledgecast/archive/2007/01/31/the-double-hop-problem.aspx)

双跃点问题是当 ASP/X 页面尝试使用位于不同于 IIS 服务器的服务器上的资源时。

Windows NT Challenge/Response[不支持](http://support.microsoft.com/kb/264921)双跳模拟（因为一旦传递到 IIS 服务器，相同的凭据就不能传递到后端服务器进行身份验证）。

您应该使用 SQL Profiler 验证尝试的第二个连接。

请注意，通过手动测试，您不是通过 IIS 进行身份验证。只有当您通过 ASP/X 页面启动 sql 时才会出现此问题。

更多资源：

*   [http://support.microsoft.com/kb/910449](http://support.microsoft.com/kb/910449)
*   [http://support.microsoft.com/kb/891031](http://support.microsoft.com/kb/891031)
*   [http://support.microsoft.com/kb/810572](http://support.microsoft.com/kb/810572)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-22T08:40:25.697

I had a similar problem and I solved it by setting nocount on and removing print commands.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T08:24:13.153

示例代码可能会有所帮助:) 您是否尝试从存储过程中返回两个表？我不认为 ADO 2.6 可以处理返回的多个表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-20T08:26:00.480

我确实考虑过（双跳），但是像我所指的 sproc-in-a-sproc 调用与通过 INNER JOIN 进行的典型跨服务器连接有什么区别？两者都将在 Server1 上执行，使用 Linked Server 凭据，并向 Server 2 进行身份验证。

任何人都可以确认调用 sproc 跨服务器与在数据表上进行连接不同吗？为什么？

如果链接服务器配置是 sql 帐户 - 是否被视为双跳（因为您指的是 NTLM 双跳？）

至于是否有多个结果集回来 - 没有。Server1.Sproc1 和 Server2.Sproc2 在 .net 世界中都是“ExecuteNonQuery()”并且什么都不返回（没有结果集也没有返回值）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T10:44:39.007

尝试检查连接字符串中指定的用户对数据库的权限。使用sql mgmt studio时，在连接字符串中使用相同的用户名登录数据库。

创建一些临时表来写入中间值和异常，因为它可以是调试应用程序的有效方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T12:44:43.073

我可以检查一下：您添加了 sproc2 吗？在此之前，它可以正常工作多年。

你不能改变你从哪里调用 sproc2 吗？与其从 sproc1 内部调用它，不如从 ASP 调用它？这样您就可以在代码中控制对 SQL 的身份验证，而不必依赖在服务器上设置任何信任或共享远程身份验证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-20T14:04:56.920

您的链接服务器是如何设置的？对于如何向远程服务器进行身份验证，您通常有一些选项，其中包括以当前登录用户身份登录或指定始终使用的 SQL 登录名。您是否尝试将其设置为始终使用特定帐户？这应该消除调用远程过程中任何可能的权限问题......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-20T22:14:21.440

我的第一反应是，这可能不是调用跨服务器的问题，而是从第一个调用第二个 proc 的问题，*这*可能是在两个不同环境中表现不同的原因。

我的第一个问题是：如果从等式中删除跨服务器方面会发生什么？如果您可以设置一个测试系统，其中您的第一个 proc 调用您的第二个 proc，但第二个 proc 位于同一服务器和/或同一数据库中，您还会遇到同样的问题吗？

沿着同样的思路：根据我的经验，当应用程序和 SSMS 得到不同的结果时，通常是存储过程设置的问题。正如卢克所说，它可能是NOCOUNT。尽管我似乎记得 PRINTed 值成为错误描述的一部分（非常违反直觉），但我已经从代码中无关的 PRINT 语句中发生了这种事情。

如果在 SSMS 中运行此消息时在消息窗口中返回*任何内容*，请找出它的来源并使其停止。我必须查找技术术语，但我记得不同的查询环境对“错误”的敏感性不同，并且通过 SSSM 的默认连接不会在某些时候抛出错误，而来自脚本语言的 ADO 连接将.

最后一个想法：如果它是环境问题，请尝试在 ASP 页面的连接字符串上设置不同的设置。例如，如果您有 OLEDB 连接，请尝试 ODBC。尝试本机和非本机 SQL Server 驱动程序。查看您的提供商支持哪些连接字符串选项，并尝试其中任何一个似乎值得尝试的选项。

# c++ - 单元测试 MFC UI 应用程序？

> ID：107591
> 
> 赞同：23
> 
> 时间：2008-09-20T08:06:54.660
> 
> 标签：c++, unit-testing, user-interface, mfc, tdd

如何对大型 MFC UI 应用程序进行单元测试？

我们有一些已经开发多年的大型 MFC 应用程序，我们使用一些标准的自动化 QA 工具来运行基本脚本来检查基础、文件打开等。这些由 QA 组在每日构建后运行。

但是我们想介绍一些程序，以便各个开发人员在将代码提交到日常构建之前，可以针对应用程序的对话框、菜单和其他可视元素构建和运行测试。

我听说过诸如仅在调试版本中出现的对话框上的隐藏测试按钮之类的技术，是否有任何标准工具包。

环境是 C++/C/FORTRAN、MSVC 2005、Intel FORTRAN 9.1、Windows XP/Vista x86 & x64。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-20T10:40:33.993

这取决于应用程序的结构。如果逻辑和 GUI 代码是分开的 (MVC)，那么测试逻辑很容易。看看 Michael Feathers [“Humble Dialog Box”](https://web.archive.org/web/20080509080327/http://www.objectmentor.com/resources/articles/TheHumbleDialogBox.pdf "谦虚对话框") (PDF)。

编辑：如果您考虑一下：如果应用程序的结构不是这样，您应该非常仔细地重构。没有其他技术可以测试逻辑。模拟点击的脚本只是表面上的。

其实很简单：

假设当用户单击按钮时您的控件/窗口/任何更改列表框的内容，并且您希望确保列表框在单击后包含正确的内容。

1.  重构，以便有一个单独的列表，其中包含要显示的列表框的项目。这些项目存储在列表中，并且不会从您的数据来源中提取。使列表框列表事物的代码只知道新列表。
2.  然后创建一个包含逻辑代码的新控制器对象。处理按钮点击的方法只调用mycontroller->ButtonWasClicked()。它不知道列表框或其他任何东西。
3.  MyController::ButtonWasClicked() 为预期的逻辑做了需要做的事情，准备项目列表并告诉控件更新。为此，您需要通过为控件创建接口（纯虚拟类）来解耦控制器和控件。控制器只知道该类型的对象，而不知道控件。

就是这样。控制器包含逻辑代码并且仅通过接口知道控制。现在您可以通过模拟控件为 MyController::ButtonWasClicked() 编写常规单元测试。如果您不知道我在说什么，请阅读 Michaels 的文章。两次。在那之后又一次。
（自我提醒：必须学会不要说那么多）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-20T13:00:19.883

既然您提到了 MFC，我假设您有一个应用程序很难在自动化测试工具下获得。当您在编写代码时构建测试时，您将观察到单元测试框架的最佳优势。但是，尝试以测试驱动的方式将新功能添加到并非设计为可测试的应用程序中......可能会很辛苦而且很令人沮丧。

现在我要提议的绝对是**努力工作**.. 但只要有一些纪律和毅力，你很快就会看到好处。

*   首先，您需要一些管理支持，以便新修复需要更长的时间。确保每个人都明白为什么。
*   接下来买一本[WELC 书](https://rads.stackoverflow.com/amzn/click/com/0131177052)。如果您有时间，或者如果您压力很大，请从头到尾阅读它，请扫描索引以查找您的应用程序所表现出的症状。这本书包含了很多很好的建议，这正是你试图让现有代码可测试时所需要的。 [![替代文字](https://i.stack.imgur.com/cyn4R.jpg)](https://i.stack.imgur.com/cyn4R.jpg)
*   然后对于每一个新的修复/更改，花一些时间并了解您将要处理的领域。在您选择的 xUnit 变体（免费提供）中编写一些测试来练习当前行为。
*   确保所有测试都通过。编写一个新的测试来练习需要的行为或错误。
*   编写代码以使最后一个测试通过。
*   在测试区域内无情地重构以改进设计。
*   从这里开始，对您必须对系统进行的每项新更改重复此操作。这条规则没有例外。
*   现在*应许之地*：很快，不断增长的经过良好测试的代码孤岛将开始浮出水面。越来越多的代码将属于自动化测试套件，并且更改将变得越来越容易。那是因为底层设计缓慢而可靠地变得更加可测试。

简单的出路是我之前的答案。这是艰难但正确的出路。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-29T23:50:28.640

我意识到这是一个过时的问题，但对于我们这些仍在使用 MFC 的人来说，VS2012 中的 Microsoft C++ 单元测试框架运行良好。

**一般程序：**

1.  将 MFC 项目编译为静态库
2.  将新的本机单元测试项目添加到您的解决方案中。
3.  在测试项目中，添加您的 MFC 项目作为参考。
4.  在测试项目的配置属性中，为您的头文件添加包含目录。
5.  在链接器中，输入选项添加您的 MFC.lib;nafxcwd.lib;libcmtd.lib;
6.  在“忽略特定默认库”下添加 nafxcwd.lib;libcmtd.lib;
7.  在 General 下添加 MFC 导出的 lib 文件的位置。

[https://stackoverflow.com/questions/1146338/error-lnk2005-new-and-delete-already-defined-in-libcmtd-libnew-obj](https://stackoverflow.com/questions/1146338/error-lnk2005-new-and-delete-already-defined-in-libcmtd-libnew-obj)很好地描述了为什么需要 nafxcwd.lib 和 libcmtd.lib .

在遗留项目中检查的另一件重要事情。在常规配置属性中，确保两个项目都使用相同的“字符集”。如果您的 MFC 使用多字节字符集，您也需要 MS 测试来执行此操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-20T15:09:49.307

虽然不完美，但我为此找到的最好的是 AutoIt [http://www.autoitscript.com/autoit3](http://www.autoitscript.com/autoit3)

“AutoIt v3 是一种类似 BASIC 的免费软件脚本语言，旨在自动化 Windows GUI 和一般脚本。它结合了模拟击键、鼠标移动和窗口/控件操作，以一种不可能或可靠的方式自动化任务与其他“

当您可以访问被驱动的应用程序的源代码时，这很有效，因为您可以使用要驱动的控件的资源 ID 号。通过这种方式，您不必担心模拟鼠标单击特定像素。不幸的是，在遗留应用程序中，您可能会发现资源 ID 不是唯一的，这可能会导致问题。然而。将 ID 更改为唯一并重新构建非常简单。

另一个问题是你会遇到时间问题。对于这些，我没有经过验证的真正解决方案。我使用的是反复试验，但这显然是不可扩展的。问题是 AutoIT 脚本必须等待测试应用程序响应命令，然后脚本才能发出下一个命令或检查正确的响应。有时很难找到一个方便的事件来等待和观察。

我的感觉是，在开发一个新的应用程序时，我会坚持以一致的方式发出“READY”的信号。这对人类用户和测试脚本都有帮助！这对于遗留应用程序可能是一个挑战，但也许您可以在有问题的地方引入它，并随着维护的继续慢慢将其传播到整个应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-20T17:19:03.617

虽然它不能处理 UI 端，但我使用 Boost Test 库对 MFC 代码进行单元测试。有一篇关于入门的代码项目文章：

[使用 Boost 设计稳健的对象](http://www.codeproject.com/KB/architecture/Designing_Robust_Objects.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T10:10:57.840

好吧，我们在工作场所拥有这些巨大的 MFC 应用程序之一。维持或扩展它是一个巨大的痛苦......它现在是一个巨大的泥球，但它在moolah中耙。无论如何

*   我们使用[**Rational Robot**](http://www-01.ibm.com/software/awdtools/tester/robot/)进行冒烟测试等。
*   另一种取得一些成功的方法是创建一个小的产品特定语言和**脚本测试**，使用 VBScript 和一些 Control 处理间谍魔法。将常用操作转化为命令。例如，OpenDatabase 将是一个命令，该命令反过来将注入所需的脚本块以单击主菜单 > 文件 > “打开...”。然后，您可以创建一系列此类命令的 excel 工作表。这些命令也可以带参数。像 FIT 测试之类的东西.. 但更多的工作。一旦您确定了大多数常用命令并准备好脚本。它是挑选和组装脚本（由 CommandIDs 标记）来编写新测试。测试运行程序解析这些 Excel 表格，将所有小脚本块组合成一个测试脚本并运行它。

    1.  打开数据库“C:\tests\MyDB”
    2.  OpenDialog“添加模型”
    3.  AddModel "M0001", "MyModel", 2.5, 100
    4.  按确定
    5.  保存数据库

高温高压

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-20T12:24:12.857

实际上，我们一直在使用 Rational Team Test，然后是 Robot，但在最近与 Rational 的讨论中，我们发现他们没有计划支持更多专注于 .NET 的 Native x64 应用程序，因此我们决定切换自动化 QA 工具。这很好，但许可成本不允许我们为所有开发人员启用它。

我们所有的应用程序都支持用于编写脚本的 COM API，我们通过 VB 对其进行回归测试，但这会测试 API 而不是应用程序本身。

理想情况下，我会对人们如何在开发人员级别将 cppunit 和类似的单元测试框架集成到应用程序中感兴趣。

# math - 点序列插值

> ID：107598
> 
> 赞同：10
> 
> 时间：2008-09-20T08:13:44.253
> 
> 标签：math, graphics, vector-graphics, bezier, splines

给定空间中的任意点序列，如何在它们之间产生平滑的连续插值？

欢迎使用 2D 和 3D 解决方案。以任意粒度生成点列表的解决方案以及为贝塞尔曲线生成控制点的解决方案也受到赞赏。

此外，看到一个迭代解决方案可以在接收点时近似曲线的早期部分，这将是很酷的，因此您可以使用它进行绘制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-25T16:00:42.637

[Catmull-Rom 样条](http://en.wikipedia.org/wiki/Catmull-Rom_spline#Catmull.E2.80.93Rom_spline)保证通过所有控制点。我发现这比尝试为其他类型的样条调整中间控制点更方便。

[Christopher Twigg](http://www.cs.cmu.edu/~fp/courses/graphics/asst5/catmullRom.pdf)的这个PDF对样条的数学进行了很好的简要介绍。最好的总结句是：

> Catmull-Rom 样条具有 C1 连续性、局部控制和插值，但不位于其控制点的凸包内。

换句话说，如果这些点指示向右急弯，则样条曲线将在向右转之前向左倾斜（该文档中有一个示例图片）。这些转弯的松紧度是可控的，在这种情况下，使用示例矩阵中的 tau 参数。

这是[另一个](http://www.mvps.org/directx/articles/catmull/)带有一些可下载 DirectX 代码的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T08:50:07.753

一种方法是[拉格朗日多项式](http://en.wikipedia.org/wiki/Lagrange_polynomial)，这是一种生成多项式的方法，该多项式将遍历所有给定的数据点。

在我大学的第一年，我写了一个小工具来做这个 2D，你可以[在这个页面上找到它](http://shuningbian.net/2004/07/downloads.php)，它被称为拉格朗日求解器。维基百科的页面也有一个示例实现。

它的工作原理是这样的：你有一个 n 阶多项式`p(x)`，其中 n 是你拥有的点数。它的形式是`a_n x^n + a_(n-1) x^(n-1) + ...+ a_0`，其中`_`是下标，`^`是幂。然后你把它变成一组联立方程：

```
p(x_1) = y_1
p(x_2) = y_2
...
p(x_n) = y_n 
```

您将上述转换为增广矩阵，并求解系数`a_0 ... a_n`。然后你有一个通过所有点的多项式，你现在可以在点之间进行插值。

但是请注意，这可能不适合您的目的，因为它无法调整曲率等 - 您只能使用无法更改的单一解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-25T16:06:34.730

你应该看看[B-splines](http://en.wikipedia.org/wiki/B-spline)。它们相对于贝塞尔曲线的优势在于每个部分仅依赖于局部点。所以移动一个点对远处的曲线部分没有影响，其中“远处”是由样条的参数确定的。

朗朗日多项式的问题在于，添加一个点会对曲线的看似任意部分产生极端影响。没有如上所述的“本地性”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T08:34:02.193

你看过 Unix **spline**命令吗？可以强迫它做你想做的事吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T11:03:41.490

不幸的是，拉格朗日或其他形式的多项式插值不适用于任意一组点。它们只适用于一个维度的集合，例如 x

x [i] < x [i+1]

对于任意一组点，例如飞机飞行路径，其中每个点都是（经度，纬度）对，您最好简单地使用当前经度和纬度以及速度对飞机的旅程进行建模。通过根据飞机与下一个航路点的距离来调整飞机可以转弯的速度（角速度），您可以获得平滑的曲线。

生成的曲线在数学上不重要，也不会给你贝塞尔控制点。然而，无论航路点的数量如何，该算法在计算上都将是简单的，并且可以生成任意粒度的点的插值列表。它也不需要您预先提供完整的点集，您可以根据需要简单地将航点添加到集合的末尾。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T12:57:18.813

有几种算法可以在任意（但最终的）点集之间进行插值（和推断）。您应该查看[数值配方](http://sdu.ictp.it/nr/index.html)，它们还包括这些算法的 C++ 实现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-02-02T22:40:06.403

我想出了同样的问题，并在前几天和一些朋友一起实现了它。我喜欢在 github 上分享示例项目。

![路径插值截图](https://i.stack.imgur.com/RL8WO.png)

[https://github.com/johnjohndoe/PathInterpolation](https://github.com/johnjohndoe/PathInterpolation)
随意分叉。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T16:44:15.180

谷歌“正交回归”。

最小二乘技术试图最小化拟合线和每个 f(x) 之间的垂直距离，而正交回归则最小化垂直距离。

**附录**

在存在噪声数据的情况下，古老的[RANSAC](http://en.wikipedia.org/wiki/RANSAC)算法也值得一试。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-24T02:15:13.053

在 3D 图形世界中，NURBS 很受欢迎。更多信息很容易用谷歌搜索。

# awk - 还有理由学习AWK吗？

> ID：107603
> 
> 赞同：116
> 
> 时间：2008-09-20T08:20:18.200
> 
> 标签：awk, text-processing

我不断学习新工具，甚至是老式工具，因为我喜欢使用正确的解决方案来解决问题。

尽管如此，我想知道是否还有任何理由学习其中的一些。`awk`例如对我来说很有趣，但是对于简单的文本处理，我可以使用`grep`, `cut`,`sed`等，而对于复杂的，我会使用 Python。

现在我并不是说它不是一个强大而方便的工具。但是既然学习一个新工具需要时间和精力，**值得**吗？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2009-03-31T21:38:15.710

如果你快速学习了 awk 的基础知识，你确实可以在命令行上做出惊人的事情。

但学习 awk 的*真正*原因是有理由阅读其作者 Aho、Kernighan 和 Weinberger 撰写的**精彩**书籍*The AWK Programming Language 。*你会认为，从名字上看，它只是教你 awk。其实，这只是开始。一旦使用简洁的脚本语言，可以轻松解决字符串操作的大量问题（而 awk 是第一个），它会继续教读者如何实现数据库、解析器、解释器，以及（如果我没记错的话）一个小型项目特定计算机语言的编译器！如果他们还使用 awk 编写了一个示例操作系统，那么这本书将是一本相当完整的计算机科学概论！

以简洁明了着称，就像最初的 C 语言书籍一样，它也是正确完成友好技术写作的一个很好的例子。就连索引也是一件手艺。

啊？如果你知道它，你会偶尔在命令行中使用它，但对于任何更大的东西，你会感到被困住，无法访问你的系统和互联网的更广泛的功能，而 Python 提供了访问。但是书呢？你会一直很高兴你读到它！

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2008-09-20T08:31:51.387

我认为这取决于您所处的环境。如果您是 *nix 人，那么知道`awk`是一件好事。几乎每个 *nix 上都可以找到的唯一其他脚本环境是`sh`. 因此，虽然`grep`, `sed,`etc 肯定可以取代`awk`现代主流`linux`发行版，但当您转向更奇特的系统时，了解一点`awk`将是真正的方便。

`awk`也可以用于不仅仅是文本处理。例如，我的一位主管在其中编写天文学代码`awk`- 这就是他的*老派*和*令人敬畏*的程度。回到他的时代，它是完成这项工作的最佳工具......现在，即使他的学生像我这样使用 python 之类的，他仍然坚持他所知道的并且工作得很好。

最后，世界上有很多旧代码在踢，知道一点`awk`不会有坏处。它也会让你变得更好 *nix 人 :-)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2008-09-20T08:28:14.173

我使用的唯一原因`awk`是自动拆分：

```
awk '{print $3}' < file.in 
```

这将打印`file.in`. 这比：

```
tr -s ' ' < file.in | cut -d' ' -f3 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2008-09-20T08:44:03.917

**如果您的文件包含columns/fields** ，我认为 awk 很棒。我在处理/分析多列文件中的特定列时使用它。或者，如果我想添加/删除特定列。

例如

```
awk -F \t '{ if ($2 > $3) print; }' <filename> 
```

仅当制表符分隔文件中的第 2 列值大于第 3 列值时才会打印。

当然，我可以使用 Perl 或 Python，但是 awk 使用简洁的单行命令使它变得如此简单。

学习 awk 的成本也很低。您可以在不到一个小时的时间内学习 awk 基础知识，因此它不像学习任何其他编程/脚本语言那样费力。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-11-08T22:03:12.797

我偶尔使用 AWK 来处理 HTML。例如，此代码将表转换为 csv 文件：

```
BEGIN {s=""; FS="n"}
/<td/ { gsub(/<[^>]*>/, ""); s=(s ", " $1);}
/<tr|<TR/ { print s; s="" } 
```

如果您要进行屏幕抓取，那就太好了。实际上，我可能喜欢 AWK，因为它允许我如此快速地构建错误的问题解决方案 :)[更多示例](http://euri.ca/blog/category/awk/)。[Jon Bentley 可爱的Programming Pearls](http://slashdot.org/books/99/11/29/1059254.shtml)中也提到了这一点。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-12-20T08:03:08.423

问了这个问题 6 年后，我现在可以肯定地回答：不，学习 awk 不值得。

基本任务由基本的 bash 命令甚至 GUI 工具轻松处理。使用 Python（我的最爱）或 Ruby 等现代动态语言可以轻松处理更复杂的任务。

您绝对应该学习一门现代脚本动态语言，因为它将帮助您完成许多任务（网络、管理、数据处理、自动化等）。而且这样做，学习一个像awk这样的工具是完全没用的，它每个月最多可以为你节省几秒钟。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-20T08:26:41.257

我确实经常使用 awk。它适用于在管道中间进行非常简单的文本改组；它填补了根本不需要它和需要淘汰 Perl/Python/其他东西之间的一个非常狭窄的位置。

我不建议您在上面花费大量时间，但了解语法的基础知识可能会派上用场——至少足以让您在想要使用它时快速查阅手册。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-11-14T10:33:14.523

在我的上一份合同中，学习 AWK 对我来说是非常宝贵的，因为我在一个既没有安装 Perl 也没有安装大多数其他脚本语言的嵌入式 Linux 系统上工作。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-20T08:32:24.020

如果您已经了解并使用过 sed，那么您不妨至少学习一点 awk。可以将它们组合在一起以获得一些非常强大的技巧。总是给观众留下深刻印象。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-20T09:09:27.833

大多数 awk one liners 可以使用 Perl one liners 来实现——如果你选择进入 Perl one liner 的心态。或者，只需使用 Perl 三个衬里 :)

如果您正在维护由喜欢 awk 的人编写的 shell 脚本，那么显然，您将需要学习 awk。

即使没有实际需要，如果您已经了解 regex，也不会花很长时间学习基础知识，而且看看当时的东西是如何设计的很有趣。它相当优雅。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-26T11:14:31.773

Computerworld 最近就AWK[采访](http://www.techworld.com.au/article/216844/-z_programming_languages_awk)了 Alfred V. Aho（AWK 的三位创建者之一）。这是一本非常有趣的读物。所以也许你会在其中找到一些提示，为什么学习 AWK 是个好主意。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-12-16T16:02:11.037

awk 具有非常好的比率实用程序/难度，并且“简单 awk”适用于每个 Unix/Linux/MacOS（它也可以安装在其他系统中）。

它是在人们讨厌打字的黄金时代设计的，因此脚本可以非常非常短且快速编写。我将尝试安装 mawk，一个快速版本，据称它可以将计算加速大约 9 倍，awk/gawk 相当慢，所以如果你想使用它而不是 R 等，你可能需要 mawk。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-20T08:32:58.187

如果您在编写 shell 脚本时必须偶尔解析日志文件以获取数据或程序的输出，这将非常有用，因为在 awk 中很容易实现，这将需要您在 python 中多写几行代码。

它当然比这更强大，但这似乎是大多数人使用它的任务。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-26T10:40:53.040

当然：我正在一个环境中工作，其中唯一可用的语言是：（一些生成 COBOL、OMG、OMG 的糟糕语言）、bash（旧版本）、perl（我还没有掌握）、sed、awk ，以及其他一些命令行实用程序。知道`awk`为我节省了几个小时（并且从我的同事那里产生了几个文本处理任务——他们每天至少来我这里三次）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-20T08:28:16.700

我会说这可能不值得了。我不时将它用作比 sed 更通用的流编辑器，包括搜索功能，但是如果您精通 python，我不知道您可以更快地完成一项任务以弥补所需的时间学习awk。

以下命令可能是我在过去两年中使用 awk 的唯一命令（它从我的 Debian/Ubuntu 系统中清除了一半删除的软件包）：

```
$ dpkg -l|awk '/^rc/ {print $2}'|xargs sudo dpkg -P 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-20T08:31:50.293

没有。

尽管它可能很有趣，但您可以使用其他更强大的工具（例如 Perl）完成 awk 可以做的所有事情。

花时间学习那些更强大的工具 - 并且只是在此过程中偶然捡到一些 awk。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-11-12T16:49:14.787

我会说有。对于简单的东西，对于没有经验的系统管理员/开发人员来说，AWK 比 Python 容易得多。你可以学习一点 AWK 并做很多事情，学习 Python 意味着学习一门全新的语言（是的，我知道 AWK 是一种语言也是一种感觉）。

Perl 可能可以做很多 AWK 可以做的事情，但是在这个时代提供了选择，我会在这里选择 Python。所以是的，你应该学习 AWK。但也要学习 Python :-)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-08-20T21:13:58.297

我最近试图可视化记录超过 20Gbs 的 DOS 攻击的网络 pcap 文件。我需要时间戳和 IP 地址。在我的场景中，*AWK* one-liner 的运行速度也非常快。我专门使用*AWK*清理提取的文件，在分组的时间范围内从这些 IP 地址获取 IP 地址和数据包总数。我完全同意上面其他人写的。这取决于您的需求。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-08-03T23:31:57.930

`awk``awk`是一种 powertool 语言，因此如果您是任何类型的 IT 专业人员，您很可能会在某个地方找到使用它。如果您可以处理的语法和正则表达式，`grep`那么`sed`您应该没有问题，`awk`并且可能值得。

我发现`awk`真正闪耀的地方在于简化处理多行记录和同时修改/内插多个文件之类的事情。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-07-17T06:45:46.513

不学习 awk 的一个原因是它在正则表达式中没有非贪婪匹配。

我有一个 awk 代码，现在我必须重写它只是因为我突然调试到 awk/gawk 中没有非贪婪匹配之类的东西，因此它无法正确执行一些正则表达式。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-04-14T04:52:11.677

这取决于你的队友和你的领导者以及你正在从事的任务。

```
if( team mates and leader ask to write awk ){
  if( you can reject that){
    if( awk code is very small){
      learn little just like learn Regex
    }else{
      use python or even java
    }
  }else{
    do as they ask
  }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-26T11:24:57.097

既然 PERL 已被移植到几乎所有重要的平台上，我会说这不值得。它比 sed 和 awk 更通用。至于自动拆分，您可以在 perl 中这样做：

```
perl -F':' -ane 'print $F[3],"\n";' /etc/passwd 
```

编辑：您可能仍想对awk*有所*了解，因为其他一些工具基于其基于模式的操作理念（例如 Solaris 上的 DTrace）。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-04-26T02:59:15.267

我在区域工作，文件是列格式。所以 awk 对我来说是非常宝贵的，可以重新格式化文件，以便不同的软件可以一起工作。对于非 IT 职业来说，使用 awk 就足够了，而且很完美。现在一天，计算机速度不再是问题，所以我可以结合 awk 和 unix 将许多 1 行命令传递到“脚本”中。使用 awk 按字段和记录搜索，我用它来非常快速地检查文件数据，而不是“vi”来打开文件。不得不说，awk 能力特别给我的工作带来了乐趣，我能够帮助同事使用 awk 快速解决问题。对我来说很棒的代码。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-01-03T08:30:14.987

目前我一直在用python进行一些编码。但我仍然不太了解它以轻松用于简单的一次性文件转换。

使用 awk，我可以在 unix 命令行上快速开发一行代码，可以进行一些漂亮的转换。每次我使用 awk 时，我写的这段代码都是一次性的，不会超过几行。也许在一行的此处或此处有“if”语句和“printf”语句。

我从来没有用 awk 写过超过 10 行的代码。几年前我看过一些这样的脚本。

但是任何需要多行代码的东西，我都会求助于 python。

我爱awk。它与 sed 结合使用是一个非常强大的工具。

# delphi - 如何临时加载字体？

> ID：107611
> 
> 赞同：10
> 
> 时间：2008-09-20T08:25:43.273
> 
> 标签：delphi, winapi

我需要在我的程序中临时加载一些字体。最好来自 dll 资源文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-21T10:14:19.557

这里有一个 Delphi 版本：

```
procedure LoadFontFromDll(const DllName, FontName: PWideChar);
var
  DllHandle: HMODULE;
  ResHandle: HRSRC;
  ResSize, NbFontAdded: Cardinal;
  ResAddr: HGLOBAL;
begin
  DllHandle := LoadLibrary(DllName);
  if DllHandle = 0 then
    RaiseLastOSError;
  ResHandle := FindResource(DllHandle, FontName, RT_FONT);
  if ResHandle = 0 then
    RaiseLastOSError;
  ResAddr := LoadResource(DllHandle, ResHandle);
  if ResAddr = 0 then
    RaiseLastOSError;
  ResSize := SizeOfResource(DllHandle, ResHandle);
  if ResSize = 0 then
    RaiseLastOSError;
  if 0 = AddFontMemResourceEx(Pointer(ResAddr), ResSize, nil, @NbFontAdded) then
    RaiseLastOSError;
end; 
```

像这样使用：

```
var
  FontName: PChar;
  FontHandle: THandle;
...
  FontName := 'DEJAVUSANS';
  LoadFontFromDll('Project1.dll' , FontName);
  FontHandle := CreateFont(0, 0, 0, 0, FW_NORMAL, 0, 0, 0, DEFAULT_CHARSET,
    OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH,
    FontName);
  if FontHandle = 0 then
    RaiseLastOSError; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T09:16:07.723

我用谷歌找到[了这个](http://www.eggheadcafe.com/software/aspnet/30018713/load-font-from-resource.aspx)。我已经剪切并粘贴了下面的相关代码。

您需要将字体添加到资源文件中：

```
 34 FONT "myfont.ttf" 
```

下面的 C 代码将从 DLL 资源加载字体，并在您使用完毕后从内存中释放它。

```
双字计数；
HMODULE 模块 = LoadLibrary("mylib.dll");
HRSRC 资源 = FindResource(Module,MAKEINTRESOURCE(34),RT_FONT);
DWORD 长度 = SizeofResource（模块，资源）；
HGLOBAL 地址 = LoadResource(Module,Resource);
HANDLE 句柄 = AddFontMemResourceEx(Address,Length,0,&Count);

/* 在这里使用字体... */

RemoveFontMemResourceEx（句柄）；
免费图书馆（模块）；

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T11:18:16.213

这里有一些代码可以从可执行文件中加载/使字体可用（即，字体作为资源嵌入，而不是您通常必须安装到 Windows 中的东西）。

请注意，在您的程序摆脱它之前，*任何应用程序都可以使用该字体。*我不知道你会发现它有多大用处，但我已经用过几次了。我从未将字体放入 dll 中（我更喜欢这种“嵌入到 exe 中”的方法），但不要想象它会改变太多。

```
过程 TForm1.FormCreate(Sender: TObject);
变量
    资源流：TResourceStream；
    sFileName：字符串；
开始
    sFileName:=ExtractFilePath(Application.ExeName)+'SWISFONT.TTF';

    ResStream：=无；
    尝试
        ResStream:=TResourceStream.Create(hInstance, 'Swisfont', RT_RCDATA);
        尝试
            ResStream.SaveToFile(sFileName);
        除了
            在 E:EFCreateError 上做 ShowMessage(E.Message);
        结尾;
    最后
        ResStream.免费；
    结尾;

    AddFontResource(PChar(sFileName));
    SendMessage(HWND_BROADCAST, WM_FONTCHANGE, 0, 0);
结尾;

过程 TForm1.FormDestroy(Sender: TObject);
变量
    s文件：字符串；
开始
    sFile:=ExtractFilePath(Application.ExeName)+'SWISFONT.TTF';
    如果 FileExists(sFile) 然后
    开始
        RemoveFontResource(PChar(sFile));
        SendMessage(HWND_BROADCAST, WM_FONTCHANGE, 0, 0);
        删除文件（sFile）；
    结尾;
结尾;

```

# c++ - XML-RPC：处理 64 位值的最佳方式？

> ID：107616
> 
> 赞同：4
> 
> 时间：2008-09-20T08:27:11.413
> 
> 标签：c++, python, 64-bit, xml-rpc

所以官方的 XML-RPC 标准不支持 64 位值。但在现代，64 位值越来越普遍。

你如何处理这些？最常见的 XML-RPC 扩展是什么？有哪些语言绑定？我对 Python 和 C++ 特别感兴趣，但所有信息都值得赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-20T12:29:16.743

有些库确实支持 64 位扩展，但似乎没有标准。[例如xmlrpc-c](http://xmlrpc-c.sourceforge.net/)有一个所谓的 i8 但它不适用于 python（至少默认情况下不是）。

我建议：

*   手动将整数转换为字符串并按原样发送。XMLRPC 无论如何都会将其转换为字符串，所以我会说这是合理的。
*   将其分解为两个 32 位整数并按原样发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T06:42:22.740

使用“i8”作为数据类型变得越来越普遍。我最近将它添加到我的 Perl XML-RPC 模块 ( [http://metacpan.org/pod/RPC::XML](http://metacpan.org/pod/RPC::XML) ) 以响应来自需要它以便与用 Java 编写的服务器一起工作的大型团体的请求。我不知道服务器使用了什么工具包，但它已经接受了 i8 作为一种类型。

我觉得仍然需要解决的一件事是，“i4”的“int”别名是否也应该接受 i8，就像它目前接受 i4 的方式一样。或者，就此而言，如果类型为 i8 的参数应该安静地接受类型为 i4 的输入。当您不需要 SOAP 的所有覆盖范围时，XML-RPC 作为一种轻量级、低开销的协议具有很大的潜力，但它在 REST 和 SOAP 之间的宗教战争中经常被忽视。

XML-RPC 需要一些更新和修改，如果我们可以让原作者允许的话......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T08:35:45.433

我不知道如何扩展 XMLRPC，但我确实找到了有关该主题的[邮件：](http://mail.python.org/pipermail/python-list/2006-May/381032.html)

> 在 XML-RPC 中，所有内容都作为字符串传输，所以我不认为这个选择真的那么糟糕——当然除了调用显式转换函数的额外笨拙之外。
> 
> 但是不，XML-RPC 没有可以表示大于 2**32 的整数的数据类型。如果您可以接受丢失精度，则可以使用双精度数（但您仍然必须在发件人上显式转换）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-27T07:20:40.947

[XML-RPC.NET](http://www.xml-rpc.net/)自 2.5.0 版（2010 年 9 月 5 日）起支持 <i8>。

# algorithm - 如何计算有向无环图的关键路径？

> ID：107660
> 
> 赞同：5
> 
> 时间：2008-09-20T08:48:05.497
> 
> 标签：algorithm, graph-theory

当图的节点具有权重时，计算有向无环图的关键路径的最佳（关于性能）方法是什么？

例如，如果我有以下结构：

```
 Node A (weight 3)
               /            \
     Node B (weight 4)      Node D (weight 7)
     /               \
Node E (weight 2)   Node F (weight 3) 
```

关键路径应该是A->B->F（总权重：10）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-20T09:09:45.803

我会用动态编程来解决这个问题。要找到从 S 到 T 的最大成本：

*   将图的节点拓扑排序为 S = x_0, x_1, ..., x_n = T。（忽略可以到达 S 或从 T 到达的任何节点。）
*   从 S 到 S 的最大成本是 S 的权重。
*   假设您已经计算了所有 i < k 的从 S 到 x_i 的最大成本，从 S 到 x_k 的最大成本是 x_k 的成本加上任何具有 x_k 边的节点的最大成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T09:02:10.923

我对“关键路径”一无所知，但我假设你的意思是[这个](http://en.wikipedia.org/wiki/Critical_path_method)。

只有遍历整棵树然后比较长度，才能在具有权重的非循环图中找到最长的路径，因为您永远不知道树的其余部分是如何加权的。[您可以在Wikipedia](https://secure.wikimedia.org/wikipedia/en/wiki/Tree_traversal)上找到有关树遍历的更多信息。我建议您使用预购遍历，因为它易于实施。

如果您要经常查询，您可能还希望使用有关插入时子树权重的信息来增加节点之间的边。这是相对便宜的，而重复遍历可能非常昂贵。

但是如果你不这样做，没有什么可以真正让你免于完全遍历。顺序并不重要，只要您进行*遍历*并且永远不会两次走同一条路径即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T01:47:27.763

有一篇论文声称对此有一个算法：“具有时间限制的活动网络中的关键路径”。可悲的是，我找不到免费副本的链接。除此之外，我只能支持修改[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)或[http://en.wikipedia.org/wiki/A](http://en.wikipedia.org/wiki/A) *的想法

更新：我为糟糕的格式道歉——服务器端的降价引擎显然坏了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-16T12:57:49.030

我的第一个答案，请原谅stackoverflow文化的任何非标准事物。

我认为解决方案很简单。只需否定权重并运行 DAG 的经典最短路径（当然针对顶点权重进行了修改）。它应该运行得相当快。（时间复杂度可能为 O(V+E)）

我认为它应该起作用，因为当你否定权重时，最大的将成为最小的，第二大的将成为第二小的，依此类推，就好像`a > b`then一样`-a < -b`。然后运行 ​​DAG 就足够了，因为它会找到否定路径的最小路径的解决方案，从而找到原始路径的最长路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-20T09:14:33.233

尝试 A* 方法。

[A* 搜索算法](http://en.wikipedia.org/wiki/A*_search_algorithm)

最后，对付树叶，只要把它们都引到一个终点，设定为目标。

# sockets - 当您需要可靠的 UDP 时，您使用什么？

> ID：107668
> 
> 赞同：102
> 
> 时间：2008-09-20T08:52:41.087
> 
> 标签：sockets, tcp, network-programming, udp

如果您遇到 TCP 连接可能太慢而 UDP“连接”可能太不可靠的情况，您会使用什么？有各种标准可靠的 UDP 协议，您对它们有什么经验？

请在每个回复中讨论一种协议，如果其他人已经提到了您使用的协议，那么请考虑对他们进行投票并在需要时使用评论进行详细说明。

**我对这里的各种选项感兴趣，其中 TCP 处于规模的一端，而 UDP 处于另一端。有各种可靠的 UDP 选项可用，每个选项都为 UDP 带来了一些 TCP 元素。**

我知道 TCP 通常是正确的选择，但列出替代方案通常有助于帮助人们得出这个结论。像 Enet、RUDP 等基于 UDP 构建的东西各有优劣，你用过吗，你的经验是什么？

为免生疑问，没有更多信息，这是一个假设性问题，我希望能引出一份答复清单，详细说明需要做出决定的人可以使用的各种选项和替代方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-20T09:59:39.367

[SCTP](http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)怎么样。它是 IETF (RFC 4960) 的标准协议

它具有分块功能，有助于提高速度。

更新：[TCP 和 SCTP 之间的比较](http://www.openss7.org/sctp_perf.html)表明，除非可以使用两个接口，否则性能是相当的。

更新：一篇[不错的介绍性文章](http://www.ibm.com/developerworks/linux/library/l-sctp/?ca=dgr-lnxw07SCTP)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-20T09:18:19.123

如果没有关于问题领域的一些额外信息，很难回答这个问题。例如，您使用的数据量是多少？多常？数据的性质是什么？（例如，它是唯一的、一次性数据吗？还是样本数据流？等等）您正在为什么平台开发？（例如桌面/服务器/嵌入式）要确定您所说的“太慢”是什么意思，您使用的是什么网络介质？

但是在（非常！）一般意义上，我认为您将不得不非常努力地击败 tcp 以提高速度，除非您可以对您尝试发送的数据做出一些艰难的假设。

例如，如果您尝试发送的数据是这样的，您可以容忍单个数据包的丢失（例如，定期采样的数据，其中采样率比信号带宽高很多倍），那么您可能可以通过确保您可以检测数据损坏（例如，通过使用良好的 crc）来牺牲一些传输可靠性

但是，如果您不能容忍单个数据包的丢失，那么您将不得不开始引入 tcp 已经具备的可靠性技术类型。而且，在没有投入大量工作的情况下，您可能会发现您开始将这些元素构建到用户空间解决方案中，并伴随着所有固有的速度问题。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2008-09-20T09:03:39.780

网络 -[http://enet.bespin.org/](http://enet.bespin.org/)

我使用 ENET 作为可靠的 UDP 协议，并为我的一个在他们的服务器中使用它的客户编写了一个异步套接字友好版本。它工作得很好，但我不喜欢点对点 ping 增加其他空闲连接的开销；当您有很多连接时，定期对所有连接进行 ping 操作是一项很忙的工作。

ENET 让您可以选择发送多个“通道”数据，并且发送的数据是不可靠、可靠或有序的。它还包括前面提到的点对点 ping，它充当保持活动状态。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-30T22:10:14.040

我们有一些国防工业客户使用 UDT（基于 UDP 的数据传输）（参见[http://udt.sourceforge.net/](http://udt.sourceforge.net/)）并且对此非常满意。我看到它也有一个友好的 BSD 许可证。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-08-01T08:50:57.113

任何认为上面的列表还不够，并且想要开发自己的 OWN 可靠 UDP 的人绝对应该看看 Google QUIC 规范，因为它涵盖了许多复杂的极端情况和潜在的拒绝服务攻击。我还没有尝试过它的实现，你可能不想要或不需要它提供的所有东西，但在着手新的“可靠”UDP 设计之前，该文档非常值得阅读。

QUIC 的一个很好的起点在[这里](http://blog.chromium.org/2013/06/experimenting-with-quic.html)，在 Chromium 博客上。

当前的 QUIC 设计文档可以在[这里](https://docs.google.com/document/d/1RNHkx_VvKWyWg6Lr8SZ-saqsQx7rFV-ev2jRFUoVD34/edit)找到。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-09-25T14:41:14.403

RUDP -[可靠的用户数据报协议](http://en.wikipedia.org/wiki/Reliable_User_Datagram_Protocol)

这提供了：

*   确认收到的数据包
*   窗口化和拥塞控制
*   重传丢失的数据包
*   过度缓冲（比实时流更快）

在保持活动方面，它似乎比 ENet 更具可配置性，但它并没有给你太多的选择（即所有数据都是可靠的，并且不仅仅是你决定应该是的位）。它看起来相当直接实施。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-09-20T15:17:20.460

正如其他人指出的那样，您的问题非常笼统，并且是否比 TCP“更快”取决于应用程序的类型。

对于从一台主机到另一台主机的可靠数据流，TCP 通常尽可能快。但是，如果您的应用程序执行大量小流量突发并等待响应，则 UDP 可能更适合最小化延迟。

有一个简单的中间立场。[Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)是 TCP 的一部分，有助于确保发送方不会压倒大量数据流的接收方，从而导致拥塞和数据包丢失。

如果您需要 TCP 的可靠、有序的传递，以及 UDP 的快速响应，并且不需要担心发送大数据流造成的拥塞，您可以禁用 Nagle 算法：

```
int opt = -1;
if (setsockopt(sock_fd, IPPROTO_TCP, TCP_NODELAY, (char *)&opt, sizeof(opt)))
  printf("Error disabling Nagle's algorithm.\n"); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-20T12:27:26.313

> 如果您遇到 TCP 连接可能太慢而 UDP“连接”可能太不可靠的情况，您会使用什么？有各种标准可靠的 UDP 协议，您对它们有什么经验？

你句子中的关键词是“潜在地”。我认为您确实需要向自己证明，如果您需要协议的可靠性，TCP 实际上对于您的需求来说太慢了。

如果您想从 UDP 中获得可靠性，那么您基本上将在 UDP 之上重新实现 TCP 的一些功能，这可能会使事情变得比最初使用 TCP 更慢。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-06-15T14:34:59.867

协议 DCCP，在[RFC 4340](http://www.ietf.org/rfc/rfc4340.txt)中标准化，“数据报拥塞控制协议”可能是您正在寻找的。

它似乎[在 Linux 中实现](http://www.linuxfoundation.org/en/Net:DCCP)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-06-15T14:32:19.390

可能是[RFC 5405](http://www.ietf.org/rfc/rfc5405.txt)，“应用程序设计者的单播 UDP 使用指南”将对您有用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-20T15:03:47.433

您是否考虑过压缩数据？

如上所述，我们缺乏有关您问题的确切性质的信息，但压缩数据以传输它们可能会有所帮助。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-12-09T12:44:00.237

[鲁德普](http://en.wikipedia.org/wiki/Reliable_User_Datagram_Protocol)。许多用于游戏的套接字服务器都实现了类似的东西。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-02T16:36:08.983

很难对这个问题给出一个普遍的答案，但最好的方法可能不是留在“TCP 和 UDP 之间”的线上，而是横着走:)。

更详细的解释：

如果应用程序需要为它传输的每条数据获得确认响应，那么 TCP 的速度几乎与它获得的一样快（特别是如果您的消息远小于您的连接的最佳 MTU）并且如果您需要发送周期性数据发送出去的那一刻就过期了，那么原始 UDP 是最好的选择，原因有很多，但也不是特别考虑速度。

可靠性是一个更复杂的问题，在这两种情况下都有一定程度的相关性，并且始终取决于特定的应用程序。举个简单的例子，如果你从路由器上拔下网线，那么祝你好运，用 TCP 可靠地传送任何东西。更糟糕的是，如果您在代码中不做任何事情，那么您的操作系统很可能会在指示错误之前阻止您的应用程序几分钟，并且在许多情况下，这种延迟也是不可接受的。

因此，传统网络协议的问题通常不是关于速度或可靠性，而是关于便利性。它是关于获得 TCP 的一些特性（自动拥塞控制、自动传输单元大小调整、自动重传、基本连接管理……），同时还至少获得它错过的一些重要和有用的特性（消息边界 - 最重要的一个，连接质量监控，连接中的多个流等），而不必自己实现。

从我的角度来看，SCTP 现在看起来是最好的通用选择，但它不是很流行，并且在当今互联网上可靠地传递它的唯一现实方法仍然是将它包装在 UDP 中（可能使用**sctplib**）。它仍然是一个相对基本和紧凑的解决方案，对于某些应用程序，它本身可能仍然不够。

至于更高级的选项，在一些项目中我们使用了**ZeroMQ**，它工作得很好。这是一个更完整的解决方案，而不仅仅是一个网络协议（在底层它支持 TCP、UDP、几个更高级别的协议和一些本地 IPC 机制来实际传递消息）。自从发布了几个版本以来，它的初始开发人员将注意力转移到了他的新**NanoMSG**和目前最新的**NNG**库上。它没有经过彻底的开发和测试，也不是很受欢迎，但有一天它可能会改变。如果您不介意 CPU 开销和一些网络带宽损失，那么某些库可能适合您。还有一些其他面向网络的消息交换库可用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-06-25T15:41:45.137

您应该检查[MoldUDP](http://www.google.com/search?q=MoldUDP)，它已经存在了几十年，并且被纳斯达克的 ITCH 市场数据馈送使用。我们的消息系统[CoralSequencer](http://www.coralblocks.com/index.php/category/coralsequencer/)使用它来实现来自中央进程的可靠多播事件流。

**免责声明：**我是 CoralSequencer 的开发者之一

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-04-26T10:59:04.130

使用 UDP 实现可靠性的最佳方式是在应用程序本身中构建可靠性（例如，通过添加确认和重传机制）

# ruby-on-rails - Ruby on Rails 中的后端管理

> ID：107674
> 
> 赞同：28
> 
> 时间：2008-09-20T08:56:39.953
> 
> 标签：ruby-on-rails, admin, generator, scaffolding, backend

我想为我在最后一刻附加到的 Ruby on Rails 应用程序构建一个真正快速而肮脏的管理后端。我查看了 activescaffold 和 streamlined 并认为它们都非常有吸引力并且它们应该很容易运行，但我不太明白如何将其中任何一个设置为后端管理页面。它们似乎被设计为像标准的 Ruby on Rails 生成器/脚手架一样工作，用于创建具有模型-视图-控制器-表名称对应的可见前端。

当播放器已经在使用中并且您希望尽可能避免影响其任何相关文件时，如何创建 admin_players 界面？

管理员无法使用原始资源的显示、编辑和索引。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-09-20T09:34:11.580

我认为命名空间是您在这里遇到的问题的解决方案：

```
map.namespace :admin do |admin|
    admin.resources :customers
end 
```

这将创建路线`admin_customers`，`new_admin_customers`等。

然后在`app/controller`目录里面你可以有一个`admin`目录。在您的管理目录中，创建一个管理控制器：

```
./script/generate rspec_controller admin/admin

class Admin::AdminController < ApplicationController

  layout "admin"
  before_filter :login_required
end 
```

然后创建一个管理客户控制器：

```
./script/generate rspec_controller admin/customers 
```

并将其从您的 ApplicationController 中继承：

```
class Admin::CustomersController < Admin::AdminController 
```

这将在 中查找视图`app/views/admin/customers` 并期望在`app/views/layouts/admin.html.erb`.

然后，您可以使用您喜欢的任何插件或代码来实际进行管理、简化、ActiveScaffold，无论我个人喜欢使用什么，因为如果您使用[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)风格的架构，`resourcecs_controller`它可以为您节省大量时间，并且强迫自己走这条路可以在其他地方节省大量时间。尽管如果您继承了该应用程序，那现在还没有定论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-05-23T13:59:04.467

[请在https://github.com/gregbell/active_admin](https://github.com/gregbell/active_admin)查看 active_admin 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-20T09:23:22.557

我已经非常广泛地使用了 Streamlined。

要让 Streamline 正常工作，您需要创建自己的控制器 - 这样您就可以完全独立于应用程序的其余部分运行它，甚至可以在单独的“管理”文件夹和命名空间中运行它*.*

 *这是最近应用程序中的客户控制器：

```
class CustomersController < ApplicationController
  layout 'streamlined'
  acts_as_streamlined       

  Streamlined.ui_for(Customer) do
    exporters :csv   
    new_submit_button :ajax => false 
    default_order_options :order => "created_at desc"   
    list_columns :name, :email, :mobile, :comments, :action_required_yes_no  
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-09T04:10:14.710

使用[https://github.com/sferik/rails_admin](https://github.com/sferik/rails_admin)。

# python - How can I unit test responses from the webapp WSGI application in Google App Engine?

> ID：107675
> 
> 赞同：14
> 
> 时间：2008-09-20T08:56:59.203
> 
> 标签：python, unit-testing, google-app-engine

I'd like to unit test responses from the Google App Engine webapp.WSGIApplication, for example request the url '/' and test that the responses status code is 200, using [GAEUnit](http://code.google.com/p/gaeunit). How can I do this?

I'd like to use the webapp framework and GAEUnit, which runs within the App Engine sandbox (unfortunately [WebTest](http://pythonpaste.org/webtest/) does not work within the sandbox).

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-22T12:02:08.027

I have added a [sample application](http://code.google.com/p/gaeunit/source/browse/#svn/trunk/sample_app) to the GAEUnit project which demonstrates how to write and execute a web test using GAEUnit. The sample includes a slightly modified version of the '[webtest](http://pythonpaste.org/webtest/index.html)' module ('import webbrowser' is commented out, as recommended by David Coffin).

Here's the 'web_tests.py' file from the sample application 'test' directory:

```
import unittest
from webtest import TestApp
from google.appengine.ext import webapp
import index

class IndexTest(unittest.TestCase):

  def setUp(self):
    self.application = webapp.WSGIApplication([('/', index.IndexHandler)], debug=True)

  def test_default_page(self):
    app = TestApp(self.application)
    response = app.get('/')
    self.assertEqual('200 OK', response.status)
    self.assertTrue('Hello, World!' in response)

  def test_page_with_param(self):
    app = TestApp(self.application)
    response = app.get('/?name=Bob')
    self.assertEqual('200 OK', response.status)
    self.assertTrue('Hello, Bob!' in response) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T09:44:18.780

Actually WebTest does work within the sandbox, as long as you comment out

```
import webbrowser 
```

in webtest/__init__.py

# php - 何时以及为什么应该使用 $_REQUEST 而不是 $_GET / $_POST / $_COOKIE？

> ID：107683
> 
> 赞同：22
> 
> 时间：2008-09-20T09:02:24.340
> 
> 标签：php

标题中的问题。

当所有 3 个`$_GET[foo]`，`$_POST[foo]`以及`$_COOKIE[foo] exist?`其中的哪一个被包含到时会发生什么`$_REQUEST?`

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-09-20T09:34:24.637

我会说永远不会。

如果我想通过各种方法设置某些内容，我会为每个方法编写代码以提醒自己我已经这样做了 - 否则您最终可能会在不知不觉中被覆盖。

它不应该像这样工作吗：

$_GET = 非破坏性操作（排序、记录操作、查询）

$_POST = 破坏性操作（删除、更新）

$_COOKIE = 琐碎设置（样式表首选项等）

$_SESSION = 重要设置（用户名、登录？、访问级别）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-20T09:08:31.250

有时您可能希望以几种不同的方式调用相同的脚本。我想到了表单提交和 AJAX 调用。然而，在大多数情况下，最好是明确的。

此外，请参阅[http://docs.php.net/manual/en/ini.core.php#ini.request-order](http://docs.php.net/manual/en/ini.core.php#ini.request-order)了解不同来源的变量如何在名称冲突时相互覆盖。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T09:29:40.670

`$_REQUEST`如果数据可以来自其中任何一个，这只是阻止您测试帖子、获取和烹饪的捷径。

有一些陷阱：

*   数据取自 GET、POST 和最后的 COOKIE。最后一个覆盖第一个，所以要小心。
*   *REST 架构*`$_REQUEST`需要分离 POST 和 GET 语义，在这种情况下你不能依赖。

不过，如果您知道自己在做什么，那么这只是另一个方便的**PHP**技巧。

如果我想快速更新可能来自多个来源的 var，我会使用它。例如：

*   在您的控制器中，无需检查请求是来自表单操作还是超文本链接来决定要服务的页面。
*   无论会话 id 的传输方式如何，都检查会话是否仍然处于活动状态。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-21T02:30:58.530

要回答“当所有 3 个都存在时会发生什么”的问题，答案是“视情况而定”。

PHP 根据 PHP.INI 中的 request_order 指令（或 variables_order 如果 request_order 不存在）自动填充 $_REQUEST。默认值通常是“GPC”，这意味着首先加载 GET，然后加载 POST（如果有冲突，则覆盖 GET），然后加载 cookie（如果有冲突，则覆盖 get/post）。但是，您可以在 PHP.INI 文件中更改此指令。例如，将其更改为“CPG”会首先加载 cookie，然后发布，然后获取。

至于什么时候用？我会回应“从不”的观点。你已经不信任用户了，为什么还要给用户更多的工具呢？作为开发人员，您应该知道您期望数据来自哪里。这一切都是为了减少您的攻击面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-20T09:05:16.970

当您不确定值的填充位置或当您同时使用它们并希望通过 POST 和 GET 方法遍历所有值时。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T15:50:23.890

当我不希望人们轻松访问正在传递的内容时，我使用 POST；当我不介意他们看到 url 中的值时，我使用 GET。我通常不会使用 cookie，因为我发现 SESSION 可以很好地保存值（尽管拥有适当的注册表是使用它的最佳方式）。

# php - php中的全局变量没有按预期工作

> ID：107693
> 
> 赞同：27
> 
> 时间：2008-09-20T09:10:57.877
> 
> 标签：php, global

我在使用 php 中的全局变量时遇到问题。我`$screen`在一个文件中设置了一个 var，它需要另一个文件调用另一个文件中`initSession()`定义的 var。`initSession()`声明然后`global $screen`使用第一个脚本中设置的值进一步向下处理 $screen。

这怎么可能？

更令人困惑的是，如果您尝试再次设置 $screen 然后调用`initSession()`，它会再次使用第一次使用的值。以下代码将描述该过程。有人可以解释一下吗？

```
$screen = "list1.inc";            // From model.php
require "controller.php";         // From model.php
initSession();                    // From controller.php
global $screen;                   // From Include.Session.inc  
echo $screen; // prints "list1.inc" // From anywhere
$screen = "delete1.inc";          // From model2.php
require "controller2.php"         
initSession();
global $screen;
echo $screen; // prints "list1.inc" 
```

更新：
如果我`$screen`在需要第二个模型之前再次声明全局，则 $screen 会为该`initSession()`方法正确更新。奇怪的。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-09-20T09:48:01.907

`Global`不会使变量成为全局变量。我知道这很棘手:-)

`Global`表示将使用局部变量，就*好像它是具有更高范围的变量一样*。

例如：

```
<?php

$var = "test"; // this is accessible in all the rest of the code, even an included one

function foo2()
{
    global $var;
    echo $var; // this print "test"
    $var = 'test2';
}

global $var; // this is totally useless, unless this file is included inside a class or function

function foo()
{
    echo $var; // this print nothing, you are using a local var
    $var = 'test3';
}

foo();
foo2();
echo $var;  // this will print 'test2'
?> 
```

请注意，全局变量很少是一个好主意。如果没有模糊范围，您可以在 99.99999% 的时间内编写代码，并且您的代码更容易维护。`global`如果可以，请避免。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-20T09:48:58.410

`global $foo`并不意味着“使这个变量全局化，以便每个人都可以使用它”。`global $foo`意思是“*在这个函数的范围内*，使用全局变量`$foo`”。

我从您的示例中假设每次您都在函数中引用 $screen 。如果是这样，您将需要`global $screen`在每个函数中使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-20T09:15:00.440

您需要将“global $screen”放在引用它的每个函数中，而不仅仅是在每个文件的顶部。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-20T10:17:31.600

如果您在使用许多函数的任务期间要访问很多变量，请考虑制作一个“上下文”对象来保存这些内容：

```
//We're doing "foo", and we need importantString and relevantObject to do it
$fooContext = new StdClass(); //StdClass is an empty class
$fooContext->importantString = "a very important string";
$fooContext->relevantObject = new RelevantObject();

doFoo($fooContext); 
```

现在只需将此对象作为参数传递给所有函数。您不需要全局变量，并且您的函数签名保持干净。稍后也很容易将空的 StdClass 替换为其中实际上具有相关方法的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T09:23:11.607

全局范围跨越包含和必需的文件，除非在函数中使用变量，否则不需要使用 global 关键字。您可以尝试改用 $GLOBALS 数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-01T18:19:58.113

在为它定义值之前，您必须将变量声明为全局变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-29T06:05:27.377

It is useless till it is in the function or a class. Global means that you can use a variable in any part of program. So if the global is not contained in the function or a class there is no use of using Global

# macos - 如何从 Git 存储库中删除 .DS_Store 文件？

> ID：107701
> 
> 赞同：1505
> 
> 时间：2008-09-20T09:15:50.033
> 
> 标签：macos, git, gitignore

如何`.DS_Store`从 Git 存储库中删除那些烦人的 Mac OS X 文件？

* * *

## 回答 #1

> 赞同：2946
> 
> 时间：2008-09-20T11:18:06.417

从存储库中删除现有文件：

```
find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch 
```

添加这一行：

```
.DS_Store 
```

到文件`.gitignore`，它可以在你的存储库的顶层找到（或者如果它还没有，则创建文件）。您可以使用顶级目录中的以下命令轻松完成此操作：

```
echo .DS_Store >> .gitignore 
```

然后将文件提交到 repo：

```
git add .gitignore
git commit -m '.DS_Store banished!' 
```

* * *

## 回答 #2

> 赞同：260
> 
> 时间：2011-07-14T23:42:43.960

结合 benzado 和 webmat 的答案，使用 更新`git rm`，而不是发现不在 repo 中的文件失败，并使其对任何用户都可以粘贴：

```
# remove any existing files from the repo, skipping over ones not in repo
find . -name .DS_Store -print0 | xargs -0 git rm --ignore-unmatch
# specify a global exclusion list
git config --global core.excludesfile ~/.gitignore
# adding .DS_Store to that list
echo .DS_Store >> ~/.gitignore 
```

* * *

## 回答 #3

> 赞同：187
> 
> 时间：2013-07-13T08:03:41.670

解决此问题的最佳解决方案是全局忽略系统上所有 git 存储库中的这些文件。这可以通过创建一个全局 gitignore 文件来完成，例如：

```
vi ~/.gitignore_global 
```

添加忽略文件的规则，例如：

```
# Compiled source #
###################
*.com
*.class
*.dll
*.exe
*.o
*.so

# Packages #
############
# it's better to unpack these files and commit the raw source
# git has its own built in compression methods
*.7z
*.dmg
*.gz
*.iso
*.jar
*.rar
*.tar
*.zip

# Logs and databases #
######################
*.log
*.sql
*.sqlite

# OS generated files #
######################
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db 
```

现在，将此文件添加到您的全局 git 配置中：

```
git config --global core.excludesfile ~/.gitignore_global 
```

编辑：

删除了图标，因为它们可能需要作为应用程序资产提交。

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2008-09-20T13:08:57.303

在某些情况下，您可能还希望全局忽略某些文件。对我来说，.DS_Store 就是其中之一。就是这样：

```
git config --global core.excludesfile /Users/mat/.gitignore 
```

（或您选择的任何文件）

然后像 repo 的 .gitignore 一样编辑文件。请注意，我认为您必须使用绝对路径。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2014-05-12T00:21:24.763

如果由于文件已分阶段更改而无法删除文件，请使用：

```
git rm --cached -f *.DS_Store 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2017-10-31T06:41:27.220

票数最高的答案很棒，但是帮助像我这样的新手，这里是如何创建 .gitignore 文件，编辑它，保存它，删除你可能已经添加到 git 的文件，然后将文件推送到 Github。

**创建 .gitignore 文件**

要创建 .gitignore 文件，您可以只`touch`创建具有指定名称的空白文件的文件。我们要创建名为 .gitignore 的文件，以便我们可以使用以下命令：

`touch .gitignore`

**忽略文件**

现在您必须将告诉 git 忽略 DS Store 文件的行添加到您的 .gitignore 中。您可以使用 nano 编辑器来执行此操作。

`nano .gitignore`

Nano 很好，因为它包含有关如何摆脱它的说明。（`Ctrl`-`O`保存，`Ctrl`-`X`退出）

复制并粘贴此[Github gist](https://gist.github.com/octocat/9257657)中的一些想法，其中列出了一些要忽略的常见文件。要回答这个问题，最重要的是：

```
# OS generated files #
######################
.DS_Store
.DS_Store? 
```

# 是注释，将帮助您在文件增长时组织文件。

这篇[Github 文章](https://help.github.com/articles/ignoring-files/)也有一些一般性的想法和指南。

**删除已添加到 git 的文件**

最后，您需要从您的目录中实际删除那些 DS 存储文件。

从最高投票的答案中使用这个很棒的命令。这将遍历您目录中的所有文件夹，并从 git 中删除这些文件。

`find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch`

**将 .gitignore 推送到 Github**

最后一步，您需要实际提交您的 .gitignore 文件。

`git status`

`git add .gitignore`

`git commit -m '.DS_Store banished!'`

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2016-11-24T09:30:06.593

打开终端并输入“cd < ProjectPath >”

1.  删除现有文件： `find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch`

2.  `nano .gitignore`

3.  添加这个`.DS_Store`

4.  输入“ctrl + x”

5.  输入“y”

6.  输入保存文件

7.  `git add .gitignore`

8.  `git commit -m '.DS_Store removed.'`

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2010-07-20T14:05:48.417

我必须在上面将 git-rm 更改为 git rm 才能使其工作：

```
find . -depth -name '.DS_Store' -exec git rm --cached '{}' \; -print 
```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2021-03-26T23:18:04.763

有时 .DS_Store 文件位于远程存储库中，但在本地项目文件夹中不可见。要解决此问题，我们需要删除所有缓存文件并再次添加。

**第 1 步：**将其添加到 .gitignore 文件中。

```
# Ignore Mac DS_Store files
.DS_Store
**/.DS_Store 
```

**第 2 步：**删除缓存文件并使用这些命令再次添加。

```
git rm -r --cached .
git add .
git commit -am "Removed git ignored files"
git push -f origin master 
```

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2016-12-07T07:44:58.550

使用此命令删除现有文件：

```
find . -name '*.DS_Store' -type f -delete 
```

然后添加`.DS_Store`到`.gitignore`

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2020-04-14T12:39:01.487

**永远摆脱这个文件并且再也不用担心它的最好方法是**

制作一个全局 .gitignore 文件：

回声 .DS_Store >> ~/.gitignore_global

并让 git 知道您想将此文件用于所有存储库：

git config --global core.excludesfile ~/.gitignore_global 就是这样！.DS_Store 不适合您。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2018-04-22T21:09:59.037

如果您想将 DS_Store 文件删除到每个文件夹和子文件夹：

* * *

如果已经提交 DS_Store：

```
find . -name .DS_Store -print0 | xargs -0 git rm --ignore-unmatch 
```

通过以下方式忽略它们：

```
echo ".DS_Store" >> ~/.gitignore_global
echo "._.DS_Store" >> ~/.gitignore_global
echo "**/.DS_Store" >> ~/.gitignore_global
echo "**/._.DS_Store" >> ~/.gitignore_global
git config --global core.excludesfile ~/.gitignore_global 
```

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2008-09-20T09:20:24.360

使用 删除它们`git-rm`，然后添加 .DS_Store`.gitignore`以阻止它们再次被添加。您还可以使用[blueharvest](http://www.zeroonetwenty.com/blueharvest/)来阻止它们一起创建

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2011-09-28T00:52:59.520

以下对我来说效果最好。处理不匹配的文件，以及具有本地修改的文件。作为参考，这是在运行 git 1.7.4.4 的 Mac 10.7 系统上。

查找并删除：

```
find . -name .DS_Store -print0 | xargs -0 git rm --ignore-unmatch -f 
```

我还通过设置全局 core.excludesfile 全局忽略所有存储库中的 .DS_Store。

首先，创建文件（如果尚不存在）：

```
touch ~/.gitignore 
```

然后添加以下行并保存：

```
.DS_Store 
```

现在配置 git 以全局尊重该文件：

```
git config --global core.excludesfile ~/.gitignore 
```

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2009-07-21T19:17:07.827

我发现[snipplr](http://snipplr.com/view/5206/removing-dsstore-files-from-a-git-checkout/)中的以下行最适合擦除 all `.DS_Store`，包括具有本地修改的行。

```
find . -depth -name '.DS_Store' -exec git-rm --cached '{}' \; -print 
```

`--cached`选项，保留您的本地，`.DS_Store`因为无论如何它都会被复制。

就像上面提到的那样，添加`.DS_Store`到项目根目录下的 .gitignore 文件中。然后它将不再出现在您的视线中（repos）。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2017-12-25T06:00:53.920

我参加聚会有点晚了，但我有一个很好的答案。要删除 .DS_Store 文件，请在终端窗口中使用以下命令，但使用“查找”删除文件时要非常小心。使用带有 -name 选项的特定名称是更安全的使用方法之一：

```
cd directory/above/affected/workareas
find . -name .DS_Store -delete 
```

如果您想简单地在之前和之后列出它们，您可以省略“-delete”。这会让你放心，他们已经走了。

关于 ~/.gitignore_global 建议：在这里要小心。你想把那个漂亮的文件放到每个工作区顶层的 .gitignore 中并提交它，这样任何克隆你的 repo 的人都会从它的使用中受益。

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2020-11-15T23:48:53.897

### 第1步

这将删除`.DS_Store`目录中的每个文件（包括子目录）

```
find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch 
```

### 第2步

添加这个以`.gitignore`防止**根目录*和*每个子目录**中的任何 DS_Store 文件进入 git！

```
**/.DS_Store 
```

从[git 文档](https://git-scm.com/docs/gitignore)：

> *   前导“**”后跟斜杠表示在所有目录中都匹配。例如，“**/foo”匹配任何地方的文件或目录“foo”，与模式“foo”相同。"**/foo/bar" 匹配文件或目录 "bar" 直接位于目录 "foo" 下的任何位置。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2013-04-10T09:06:36.550

出于某种原因，上述方法都不适用于我的 Mac。

我的解决方案来自终端运行：

```
rm .DS_Store 
```

然后运行以下命令：

```
git pull origin master 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2008-09-20T09:16:14.103

这将起作用：

```
find . -name "*.DS_Store" -type f -exec git-rm {} \; 
```

它会删除名称以 结尾的所有文件`.DS_Store`，包括`._.DS_Store`.

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2014-04-30T15:08:49.670

初始化存储库时，跳过包含

```
-u 
```

这不应该是一个问题。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2015-07-28T16:16:38.200

这对我有用，结合了上面的两个答案：

*   $ git rm --cached -f *.DS_Store
*   $ git commit -m "filter-branch --index-filter 'git rm --cached --ignore-unmatch .DS_Store"
*   $ git push origin master --force

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2018-03-02T10:10:31.513

删除忽略的文件：

(.DS_Store)

```
$ find . -name .DS_Store -print0 | xargs -0 git rm --ignore-unmatch 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2011-10-19T01:01:44.683

```
$ git commit -m "filter-branch --index-filter 'git rm --cached --ignore-unmatch .DS_Store"
$ git push origin master --force 
```

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2016-05-17T17:16:39.907

将此添加到您的文件 .gitignore

```
#Ignore folder mac
.DS_Store 
```

保存并提交

```
git add -A
git commit -m "ignore .DS_Store" 
```

现在你忽略了所有提交

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2019-10-07T03:31:14.840

`.gitignore`使用命令创建文件`touch .gitignore`

并在其中添加以下行

```
.DS_Store 
```

保存`.gitignore`文件，然后将其推送到您的 git 存储库中。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2012-08-01T09:54:05.510

有几个解决方案可以解决这个问题。为避免创建 .DS_Store 文件，请勿使用 OS X Finder 查看文件夹。查看文件夹的另一种方法是使用 UNIX 命令行。要删除 .DS_Store 文件，可以使用名为 DS_Store Terminator 的第三方产品。要从整个系统中删除 .DS_Store 文件，可以使用 UNIX shell 命令。从 Applications:Utilities 启动终端 在 UNIX shell 提示符下输入以下 UNIX 命令： sudo find / -name ".DS_Store" -depth -exec rm {} \; 当提示输入密码时，输入 Mac OS X 管理员密码。

该命令用于查找并删除从文件系统的根 (/) 开始贯穿整个机器的所有 .DS_Store。要将此命令配置为作为计划任务运行，请执行以下步骤： 从 Applications:Utilities 启动终端 在 UNIX shell 提示符处输入以下 UNIX 命令：

sudo crontab -e 当提示输入密码时，输入 Mac OS X 管理员密码。在 vi 编辑器中按一下键盘上的字母 I 并输入以下内容：

15 1 * * * 根查找 / -name ".DS_Store" -depth -exec rm {} \;

这称为 crontab 条目，其格式如下：

分钟 小时 DayOfMonth 月 DayOfWeek 用户命令。

crontab 条目表示该命令将由系统在每天凌晨 1:15 由名为 root 的帐户自动执行。

该命令从 find 一直到 . 如果系统未运行，则不会执行此命令。

要保存条目，请按一次 Esc 键，然后同时按 Shift + z+ z。

注意：步骤 4 中的信息仅适用于 vi 编辑器。

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-06-18T14:03:22.907

无需`.DS_STORE`本地删除

只需将其添加到`.gitignore`文件中

> .gitignore 文件只是一个文本文件，它告诉 Git 在项目中忽略哪些文件或文件夹。

命令

*   `nano .gitignore`
*   写`.DS_Store`然后点击`CTRL+X > y > Hit Return`
*   `git status`最后看看您的更改
*   `git add .gitignore`
*   `git commit -m 'YOUR COMMIT MESSAGE'`
*   `git push origin master`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-11-09T08:13:51.113

我做了：

```
git checkout -- ../.DS_Store 
```

（＃丢弃本地更改（永久）到文件）它工作正常！

# python - 禁用输出缓冲

> ID：107705
> 
> 赞同：609
> 
> 时间：2008-09-20T09:17:20.480
> 
> 标签：python, stdout, buffered

Python 的解释器中是否默认启用输出缓冲`sys.stdout`？

如果答案是肯定的，那么禁用它的所有方法是什么？

到目前为止的建议：

1.  使用`-u`命令行开关
2.  包裹`sys.stdout`在每次写入后刷新的对象中
3.  设置`PYTHONUNBUFFERED`环境变量
4.  `sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)`

有没有其他方法可以在执行期间以编程方式在`sys`/中设置一些全局标志`sys.stdout`？

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2008-09-20T09:24:31.307

来自[Magnus Lycka 在邮件列表中的回答](http://mail.python.org/pipermail/tutor/2003-November/026645.html)：

> 您可以使用“python -u”（或#!/usr/bin/env python -u 等）或通过设置环境变量 PYTHONUNBUFFERED 来跳过整个 python 进程的缓冲。
> 
> 您还可以将 sys.stdout 替换为其他一些流，例如在每次调用后执行刷新的包装器。
> 
> ```
> class Unbuffered(object):
>    def __init__(self, stream):
>        self.stream = stream
>    def write(self, data):
>        self.stream.write(data)
>        self.stream.flush()
>    def writelines(self, datas):
>        self.stream.writelines(datas)
>        self.stream.flush()
>    def __getattr__(self, attr):
>        return getattr(self.stream, attr)
> 
> import sys
> sys.stdout = Unbuffered(sys.stdout)
> print 'Hello' 
> ```

* * *

## 回答 #2

> 赞同：179
> 
> 时间：2013-02-06T13:05:23.863

我宁愿把我的答案放在[如何刷新打印功能的输出？](https://stackoverflow.com/questions/230751/how-to-flush-output-of-python-print)或者在[Python 的 print 函数中，当它被调用时会刷新缓冲区？](https://stackoverflow.com/questions/3895481/pythons-print-function-that-flushes-the-buffer-when-its-called)，但由于它们被标记为与这个重复（我不同意），我会在这里回答。

从 Python 3.3 开始， print() 支持关键字参数“flush”（[参见文档](http://docs.python.org/3/library/functions.html?highlight=print#print)）：

```
print('Hello World!', flush=True) 
```

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2008-10-08T07:23:10.007

```
# reopen stdout file descriptor with write mode
# and 0 as the buffer size (unbuffered)
import io, os, sys
try:
    # Python 3, open as binary, then wrap in a TextIOWrapper with write-through.
    sys.stdout = io.TextIOWrapper(open(sys.stdout.fileno(), 'wb', 0), write_through=True)
    # If flushing on newlines is sufficient, as of 3.7 you can instead just call:
    # sys.stdout.reconfigure(line_buffering=True)
except TypeError:
    # Python 2
    sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0) 
```

致谢：“Sebastian”，位于 Python 邮件列表中的某个位置。

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2008-09-20T09:25:36.763

是的。

您可以使用“-u”开关在命令行上禁用它。

或者，您可以在每次写入时在 sys.stdout 上调用 .flush() （或用自动执行此操作的对象包装它）

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2016-10-20T18:30:43.340

这与 Cristóvão D. Sousa 的回答有关，但我还不能发表评论。

使用*Python 3*`flush`的关键字参数以**始终**具有无缓冲输出的直接方法是：

 ***```
import functools
print = functools.partial(print, flush=True) 
```

之后， print 将始终直接刷新输出（`flush=False`给出的除外）。

请注意，（a）这仅部分回答了问题，因为它不会重定向所有输出。但我想这是在 python 中创建输出到/`print`的最常见方式，所以这两行可能涵盖了大多数用例。`stdout``stderr`

注意 (b) 它仅适用于您定义它的模块/脚本。这在编写模块时会很好，因为它不会与`sys.stdout`.

*Python 2*不提供`flush`参数，但您可以模拟 Python 3 类型的`print`函数，如此处所述[https://stackoverflow.com/a/27991478/3734258](https://stackoverflow.com/a/27991478/3734258)。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2010-09-09T15:37:53.240

```
def disable_stdout_buffering():
    # Appending to gc.garbage is a way to stop an object from being
    # destroyed.  If the old sys.stdout is ever collected, it will
    # close() stdout, which is not good.
    gc.garbage.append(sys.stdout)
    sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)

# Then this will give output in the correct order:
disable_stdout_buffering()
print "hello"
subprocess.call(["echo", "bye"]) 
```

如果不保存旧的 sys.stdout，则 disable_stdout_buffering() 不是幂等的，多次调用会导致如下错误：

```
Traceback (most recent call last):
  File "test/buffering.py", line 17, in <module>
    print "hello"
IOError: [Errno 9] Bad file descriptor
close failed: [Errno 9] Bad file descriptor 
```

另一种可能是：

```
def disable_stdout_buffering():
    fileno = sys.stdout.fileno()
    temp_fd = os.dup(fileno)
    sys.stdout.close()
    os.dup2(temp_fd, fileno)
    os.close(temp_fd)
    sys.stdout = os.fdopen(fileno, "w", 0) 
```

（附加到 gc.garbage 并不是一个好主意，因为它是放置不可释放循环的地方，您可能需要检查这些。）

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2014-04-12T18:43:28.173

以下适用于 Python 2.6、2.7 和 3.2：

```
import os
import sys
buf_arg = 0
if sys.version_info[0] == 3:
    os.environ['PYTHONUNBUFFERED'] = '1'
    buf_arg = 1
sys.stdout = os.fdopen(sys.stdout.fileno(), 'a+', buf_arg)
sys.stderr = os.fdopen(sys.stderr.fileno(), 'a+', buf_arg) 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2008-09-20T09:26:19.353

是的，它默认启用。您可以在调用 python 时使用命令行上的 -u 选项禁用它。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2018-11-26T20:07:16.463

在 Python 3 中，您可以对 print 函数进行猴子修补，以始终发送 flush=True：

```
_orig_print = print

def print(*args, **kwargs):
    _orig_print(*args, flush=True, **kwargs) 
```

正如评论中所指出的，您可以通过将 flush 参数绑定到一个值来简化这一点，方法是`functools.partial`：

```
print = functools.partial(print, flush=True) 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-07-01T20:09:53.547

您还可以使用[stdbuf](https://www.gnu.org/software/coreutils/manual/html_node/stdbuf-invocation.html "标准缓冲区")实用程序运行 Python：

`stdbuf -oL python <script>`

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2009-11-15T00:01:01.810

您还可以使用 fcntl 即时更改文件标志。

```
fl = fcntl.fcntl(fd.fileno(), fcntl.F_GETFL)
fl |= os.O_SYNC # or os.O_DSYNC (if you don't care the file timestamp updates)
fcntl.fcntl(fd.fileno(), fcntl.F_SETFL, fl) 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-02-25T21:00:30.460

可以*只* 用调用`write`的方法覆盖. 建议的方法实现如下。`sys.stdout``flush`

```
def write_flush(args, w=stdout.write):
    w(args)
    stdout.flush() 
```

参数的默认值`w`将保留原始`write`方法引用。定义*后* ，原始的可能会被覆盖。`write_flush``write`

```
stdout.write = write_flush 
```

代码假定以`stdout`这种方式导入`from sys import stdout`。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-20T09:40:13.047

获得无缓冲输出的一种方法是使用`sys.stderr`而不是`sys.stdout`或简单地调用`sys.stdout.flush()`以显式强制写入发生。

您可以通过执行以下操作轻松重定向打印的所有内容：

```
import sys; sys.stdout = sys.stderr
print "Hello World!" 
```

或仅针对特定`print`语句重定向：

```
print >>sys.stderr, "Hello World!" 
```

要重置标准输出，您可以这样做：

```
sys.stdout = sys.__stdout__ 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-20T10:39:09.753

您可以创建一个无缓冲文件并将此文件分配给 sys.stdout。

```
import sys 
myFile= open( "a.log", "w", 0 ) 
sys.stdout= myFile 
```

你不能神奇地改变系统提供的标准输出；因为它是由操作系统提供给你的 python 程序的。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-06-30T19:20:08.913

可以在不崩溃的情况下工作的变体（至少在 win32；python 2.7，ipython 0.12 上）然后随后调用（多次）：

```
def DisOutBuffering():
    if sys.stdout.name == '<stdout>':
        sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)

    if sys.stderr.name == '<stderr>':
        sys.stderr = os.fdopen(sys.stderr.fileno(), 'w', 0) 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-06-11T14:47:38.087

（我发表了评论，但不知何故丢失了。所以，再次：）

1.  正如我所注意到的，CPython（至少在 Linux 上）的行为取决于输出的位置。如果它进入一个 tty，那么输出会在每个 '`\n'`
    如果它进入一个管道/进程之后被刷新，那么它会被缓冲，你可以使用`flush()`基于解决方案或上面推荐的**-u**选项。

2.  与输出缓冲稍微相关：
    如果您使用

    `for line in sys.stdin:`
    ...

然后**CPython中的****for**实现将收集输入一段时间，然后为一堆输入行执行循环体。如果您的脚本要为每个输入行写入输出，这可能看起来像输出缓冲，但实际上是批处理，因此，没有任何, etc. 技术对此有帮助。**有趣的是，您在pypy**中没有这种行为。为避免这种情况，您可以使用**`flush()`**

 ****`while True: line=sys.stdin.readline()`
...

# .net - .NET 中的 StackOverflowException

> ID：107735
> 
> 赞同：13
> 
> 时间：2008-09-20T09:33:00.553
> 
> 标签：.net, exception

在 .NET 中遇到一些 StackOverflowExceptions 后，我注意到它们完全绕过了 .NET 提供的未处理异常处理程序（Application.ThreadException / AppDomain.UnhandledException）。这非常令人不安，因为我们在这些异常处理程序中有关键的清理代码。

有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-20T12:33:05.673

存在三种所谓的“异步异常”。那是 ThreadAbortException、OutOfMemoryException 和提到的 StackOverflowException。这些异常允许发生在代码中的任何指令中。

而且，还有一种方法可以克服它们：

最简单的是 ThreadAbortException。当前代码在 finally 块中执行时。ThreadAbortExceptions 有点“移动”到 finally 块的末尾。因此，finally 块中的所有内容都不能被 ThreadAbortException 中止。

要避免 OutOfMemoryException，您只有一种可能性：不要在堆上分配任何东西。这意味着您不能创建任何新的引用类型。

要克服 StackOverflowException，您需要框架的一些帮助。这种帮助体现在受约束的执行区域中。**在执行实际代码之前**分配所需的堆栈，另外还确保代码已经 JIT 编译，因此可以执行。

在受约束的执行区域中执行代码有三种形式（复制自[BCL 团队博客](http://blogs.msdn.com/bclteam/archive/2005/06/14/429181.aspx)）：

*   ExecuteCodeWithGuaranteedCleanup，try/finally 的堆栈溢出安全形式。
*   紧接在调用 RuntimeHelpers.PrepareConstrainedRegions 之前的 try/finally 块。try 块不受约束，但该 try 的所有 catch、finally 和 fault 块都是。
*   作为关键终结器 - CriticalFinalizerObject 的任何子类都有一个终结器，该终结器在分配对象实例之前就已准备好。
    *   一个特例是 SafeHandle 的 ReleaseHandle 方法，它是一个在分配子类之前热切准备的虚拟方法，并从 SafeHandle 的关键终结器调用。

您可以在这些博客文章中找到更多信息：

[BCL 团队博客中的受限执行区域和其他勘误表 [Brian Grunkemeyer]](http://blogs.msdn.com/bclteam/archive/2005/06/14/429181.aspx)。

Joe Duffy 的关于[原子性和异步异常失败](http://www.bluebytesoftware.com/blog/PermaLink.aspx?guid=c1898a31-a0aa-40af-871c-7847d98f1641)的博客，其中他很好地概述了 .net 框架中的异步异常和健壮性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-20T09:37:58.590

并不真地; 堆栈溢出或 CLR 本身发生内存不足异常意味着出现严重错误（当我一直是个笨蛋并创建递归属性时，我通常会得到它）。

当此状态发生时，CLR 无法分配新的函数调用或内存以使其能够调用异常处理程序；**这是一个“我们现在**必须停止”的场景。

但是，如果您自己抛出异常，您的异常处理程序将被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T09:41:02.407

堆栈溢出不是您可以从中恢复的东西，因为它甚至无法分配更多堆栈内存来调用您的异常处理程序。

你唯一能做的就是找出原因并防止它发生（例如，小心递归，不要在堆栈上分配大对象）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-01T19:07:41.150

吹镖把它钉在上面。Dumbass 递归属性，他喜欢这样称呼它。真的只是输入代码太快的问题。

```
private Thing _myThing = null;

Public Thing MyThing
{
   get{
        return this.MyThing;}
   set{
        this.MyThing = value;}
} 
```

# c# - 用于国际化的 C# 库？

> ID：107755
> 
> 赞同：23
> 
> 时间：2008-09-20T09:46:05.263
> 
> 标签：c#, internationalization

**有哪些库可以编写 C# 国际化应用程序？**

库中应包含的典型功能：

*   验证特定国家/地区的数据（例如增值税号、电话号码、地址……）
*   验证银行和财务坐标（例如信用卡号、IBAN、...）
*   特定于语言的功能（例如数字到单词到数字，总结，...）
*   特定语言的内容过滤（例如脏话过滤...）

Perl 中此类库的一个示例是 CPAN 的[Internationalization/Locale 部分](http://search.cpan.org/modlist/Internationalization_Locale)。

有哪些可用的 C# 解决方案？

* * *

注意：我不是在寻找 System.Globalization 命名空间的介绍 :)

* * *

注 2：我应该假设没有可用的选项吗？有人有兴趣联合起来创建一个吗？

* * *

注意3：编辑以使问题出现在首页以希望获得更多答案。这不是一个很难的问题，Stackers 怎么可能不做 i18n？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-08-16T08:10:31.187

一个致力于全球化、国际化和本地化知识数据库的项目是[Unicode Common Locale Data Repository](http://cldr.unicode.org/)，它基于 IBM 的旧 ICU 项目。

由于它是一个 XML 数据数据库，它不包含任何特定于 .NET 的代码，但作为一个知识体系，它非常好。

.NET 框架中只有一小部分。Microsoft 没有接近任何补充内容，例如邮政编码格式、数字拼写（用于支票/支票金额）等。标准时区名称（来自[Olson/tz](ftp://elsie.nci.nih.gov/pub/)发行版）等也包括在内，并映射到Windows 特定的名称。一些分层的特定于语言环境的行为也有更好的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T18:47:29.927

找到的第一个库：[NUtility](http://www.blinksoftware.co.uk/nutility/)（MIT 许可证）

> > > NUtility 目前有提供数据库抽象层、命令行处理以及验证和转换功能的类，其中包括：命令行处理；信用卡验证；电子邮件地址验证；IP地址验证；英国邮政编码验证；Soundex、扩展 Soundex 和变音编码；ROT13编码；语音字母编码；和公制 - 英制转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-14T13:44:57.313

我不会说没有人做 i18n，但我不知道有任何通用工具可以用于每个项目。维护包含您正在寻找的所有信息的数据库将是一个史诗般的项目。听起来您要查找的不是特定的 C# 库，而是您可以从中获取的在线信息集合。如果您能够找到各种语言的脏话库（例如），那么在 C# 中使用它对您来说是微不足道的。我认为要找到一个解决方案，将您的所有需求打包成一个易于使用的程序集，这将是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T11:37:19.287

看看 [http://www.microsoft.com/globaldev/getwr/dotneti18n.mspx](http://www.microsoft.com/globaldev/getwr/dotneti18n.mspx)
和 [http://www.dotneti18n.com/](http://www.dotneti18n.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T12:07:27.127

字符串到数字，反之亦然，可以按以下方式完成：

```
 culture = new CultureInfo(locale);
   int number = Convert.ToInt32(myString, culture.NumberFormat);
   string str= Convert.ToString(myNumber, culture.NumberFormat); 
```

至于检查VATS和地址，我对此也很感兴趣，到目前为止还没有发现任何有用的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-19T18:16:55.643

本身并不完全是一个“图书馆”，但我实际上遇到了一家名为[E4X](http://www.fiftyone.com/)（我的前客户）的公司提供的优质服务（付费）。
他们提供的是您电子商务网站的完整本地化，包括语言翻译、货币兑换、本地计费和金融交易处理，包括特定地区的税收等。他们甚至处理物理运输的物流......

对于电子商务业务，值得研究。让他们知道我派你来... ;-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-01-19T01:02:18.160

这是一项巨大的努力。让我们从一个简单的问题开始：电话号码。Libphonenumber 位于[http://code.google.com/p/libphonenumber/的 Google 库在](http://code.google.com/p/libphonenumber/)[https://bitbucket.org/pmezard/libphonenumber-csharp](https://bitbucket.org/pmezard/libphonenumber-csharp)有一个 C# 端口，在[http://blog.thekieners.com/2011](http://blog.thekieners.com/2011/06/06/using-googles-libphonenumber-in-microsoft-net-with-c/)有注释[/06/06/using-googles-libphonenumber-in-microsoft-net-with-c/](http://blog.thekieners.com/2011/06/06/using-googles-libphonenumber-in-microsoft-net-with-c/)。似乎是处理美国和国际号码的好图书馆。

# multithreading - 研究 XMPP 应用程序的线程实现的好资源是什么？

> ID：107772
> 
> 赞同：2
> 
> 时间：2008-09-20T09:53:48.477
> 
> 标签：multithreading, networking, xmpp

据我了解，XMPP 协议基于始终在线的连接，您无法立即指示 XML 消息何时结束。

这意味着您必须在流来时对其进行评估。这也意味着，您可能必须处理异步连接，因为套接字可能会阻塞在 XML 消息的中间，原因可能是消息长度或连接速度慢。

我会很感激每个答案的一个来源，这样我们就可以修改它们，看看最喜欢的是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T04:01:26.503

您想一次处理多个连接吗？在这种情况下，良好的异步套接字处理是必须的，以避免每个连接一个线程。

否则，您只需要一个可以一次处理一大块字节的 XML 解析器。 [Expat](http://expat.sourceforge.net/)是典型的例子；如果您使用 Java，请尝试[XP](http://www.jclark.com/xml/xp/)。这些类型的 XML 解析器将尽可能触发事件，并缓冲部分节，直到其余节到达。

*现在，为了解决您关于节*结束时没有通知的断言，这不是真的。重要的是不要将 XML 流当作文档序列来处理。使用以下伪代码：

```
stanza = null
while parser has more:
  switch on token type:
     START_TAG:
       elem =  create element from parser state
       if stanza is not null:
         add elem as child of stanza
       stanza = elem
     END_TAG:
       parent = parent of stanza
       if parent is not null:
         fire OnStanza event
       stanza = parent 
```

这种方法应该适用于基于事件的解析器或拉式解析器。它只需要保持一个指针的状态。显然，您还需要处理属性、字符数据、实体引用（如 & 等）和特殊用途的 stream:stream 标记，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T10:17:29.573

Igniterealtime.org 提供了一个用 java 编写的开源 XMPP 服务器和客户端

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T14:30:12.757

[ejabberd](http://www.ejabberd.im/)是用 Erlang 编写的。我不知道 ejabberd 实现的细节，但使用 Erlang 的一个优点是线程非常便宜。我推测他们会为每个 XMPP 连接启动一个线程。在 Erlang 术语中，这些被称为进程，但它们不是受保护的内存地址空间，它们是轻量级的用户空间线程。

# svn - 从 SVN 导入/导出历史到 TFS

> ID：107794
> 
> 赞同：5
> 
> 时间：2008-09-20T10:05:18.260
> 
> 标签：svn, version-control, tfs, import, export

是否有任何导入和导出工具可以让我们将项目移入和移出**具有完整历史和日志**的团队系统？我们目前的单片机是SVN。

PS - 对不起，我知道这是一个转贴，但我之前没有得到答案...... :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-04T01:12:32.137

我不知道你是否仍然感兴趣，但我刚刚和我现在的雇主一起经历了这个（我的项目使用的是 SVN，他们想将它迁移到另一个站点的 TFS 中）。

这些是我使用的以下步骤：

1.  在您当前的 repo 上运行 svndump，并将文件带到预期的目标
2.  使用 svn 服务器（例如本地存储库）导入文件 - 为此我使用了[VisualSVN Server](http://www.visualsvn.com/server/download/)。
3.  将 SVN 存储库签出到本地目录（例如`svn co <url> Proj_SVN`）
4.  在同一台机器上运行[SvnBridge （来自 CodePlex）](http://svnbridge.codeplex.com/)
5.  将 TFS 存储库签出到本地目录（例如`svn co http:// localhost:8080/<tfs_server>/<project_repo_path> Proj_TFS`）
6.  使用[Svn2Svn](http://svn2svn.codeplex.com/)（来自 codeplex）我运行以下命令：`svn2svn /s:c:\temp\src\Proj_SVN /d:c:\temp\src\Proj_TFS /r:<start_rev>:<end_rev>`

根据修订的数量、您拥有的数据量和网络速度（例如，在 TFS 服务器上运行可能更快），完成每个修订可能需要 10 分钟。

无论如何，这是我使用的，它对我有用（虽然过程很痛苦......） - 你的手段可能会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T09:44:57.870

[http://www.timelymigration.com/](http://www.timelymigration.com/)是另一种选择，进行了似乎有效的测试运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T11:23:05.890

不幸的是，您可能没有得到答案，因为没有提供好的答案...

我之前已经研究过几次，最初是针对第一个 TFS Beta。（当时我们急于在等待 TFS 准备好时离开 VSS……我们最终达成的妥协是在此期间使用 SVN，但使用了一个提交后挂钩来保持 VSS 存储库同步允许到 TFS 的迁移路径。）

[这些人（ComponentSource）](http://www.componentsoftware.com/Products/converter/svn2tfs.htm)当时使用 VSS 到 TFS 转换器，并在 TFS 中添加了一个 SVN，但似乎已经停止了该产品。

[这些人（Kyrosoft）](http://web.archive.org/web/20150915032305/http://www.kyrosoft.com:80/products/index2.html)可能有一些承诺，但我担心他们不会发布价格，并且会发布（两个）客户列表。如果有人对产品有经验，请让我们都知道。

最近，TFS 迁移和同步工具包已经在 CodePlex 上发布，但迄今为止没有人为它发布 SVN 插件（该[请求](http://www.codeplex.com/MigrationSyncToolkit/WorkItem/View.aspx?WorkItemId=78)有 66 票）

因此，您可以考虑为工具包滚动您自己的插件，但即便如此，您也不会获得提交的原始日期，据我所知，TFS 团队不允许进口商设置这个机制，所以所有迁移修订将具有迁移日期。

（据称上面已停产的第一个工具用于允许这样做，但他们如何绕过限制（秘密 API？调整系统时间？数据库操作？）我不知道。）

最后，我怀疑大多数团队最终决定只在适当的时间切换系统（例如新版本或项目），并手动处理 6-12 个月的分叉历史查找，这仍然特别成问题......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T11:48:28.310

只是在这里大声思考，但 SVN 是否支持“回放”其历史的方式？如果有一种方法可以从现有存储库生成一组完整的 SVN 命令，那么您可以将这些命令提供给[SvnBridge](http://www.codeplex.com/SvnBridge)，这实际上将写入 TFS。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-26T00:06:56.620

使用 KryoSoft。ComponentSource 基本上是倒闭了。

# flash - Flash 可以在没有服务器端帮助的情况下保存内容吗？

> ID：107800
> 
> 赞同：3
> 
> 时间：2008-09-20T10:06:59.160
> 
> 标签：flash, actionscript-3

据我所知，Flash 必须将信息传递给另一个外部进程才能保存文件 - 发布到 PHP 或与可执行文件对话，对吗？但是每隔一段时间我就会听到传言说 Flash 能够打开一个文件，进行更改，然后保存/写入这些更改，这一切都靠自己 - 有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-20T18:44:54.517

这将在 Flash Player 10 中可用：

在 Flash Player 10 中读取和写入本地文件

[http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/](http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/)

否则，您需要使用 Adob​​e AIR，或者将其从服务器退回。

迈克室

网格@adobe.com

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T10:27:44.463

播放器的下一个版本，[Flash 10](http://labs.adobe.com/technologies/flashplayer10/)可以做到这一点。它还支持其他一些漂亮的东西，比如简单的 3D 和类型化数组。在 AIR 中运行的 flash 播放器也可以做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T13:54:09.100

您刚才描述的行为存在很多安全问题，因此 Adob​​e 对文件修改行为设置了许多沙盒限制。即使使用 Flash Player 10，文件操作也需要执行代码以响应鼠标事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T10:28:34.490

有一种称为本地共享对象的东西，也称为“Flash Cookie”，它允许您在用户计算机上本地存储有限数量的数据。

一点谷歌搜索出现了一些链接：

*   [SharedObject 类的文档](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/SharedObject.html)
*   [一个教程](http://www.aboutflex.net/flex/local-sharedobject/)

我敢肯定，一点创意谷歌搜索会出现更多

# java - 当我在 Thread 对象上调用 run() 时，为什么我的 Java 程序会泄漏内存？

> ID：107823
> 
> 赞同：28
> 
> 时间：2008-09-20T10:19:21.987
> 
> 标签：java, multithreading, memory-leaks

（危险风格的问题，我希望当我遇到这个问题时答案已经在线）

使用 Java 1.4，我有一个方法我想在某些时候作为线程运行，但在其他时候不想。所以我将它声明为 Thread 的子类，然后根据我的需要调用 start() 或 run()。

但是我发现我的程序会随着时间的推移而泄漏内存。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-09-20T10:25:06.870

这是 Java 1.4 中的一个已知错误： http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=5869e03fee226ffffffffc40d4fa881a86e3:WuuT?bug_id= [4533087](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=5869e03fee226ffffffffc40d4fa881a86e3:WuuT?bug_id=4533087)

它已在 Java 1.5 中修复，但 Sun 不打算在 1.4 中修复它。

问题是，在构造时，a`Thread`被添加到内螺纹表中的引用列表中。在它的 start() 方法完成之前，它不会从该列表中删除。只要该引用存在，它就不会被垃圾收集。

所以，除非你确定要调用它的`start()`方法，否则永远不要创建一个线程。不应直接调用`Thread`对象的方法。`run()`

更好的编码方式是实现`Runnable`接口而不是子类`Thread`。当你不需要线程时，调用

```
myRunnable.run(); 
```

当您确实需要线程时：

```
Thread myThread = new Thread(myRunnable);
myThread.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T11:26:57.223

我怀疑构造 Thread 的实例或其子类会泄漏内存。首先，Javadocs 或 Java 语言规范中没有提到任何类型的东西。其次，我进行了一个简单的测试，它还显示没有内存泄漏（至少在 32 位 x86 Linux 2.6 上的 Sun 的 JDK 1.5.0_05 上没有）：

```
public final class Test {
  public static final void main(String[] params) throws Exception {
    final Runtime rt = Runtime.getRuntime();
    long i = 0;
    while(true) {
      new MyThread().run();
      i++;
      if ((i % 100) == 0) {
        System.out.println((i / 100) + ": " + (rt.freeMemory() / 1024 / 1024) + " " + (rt.totalMemory() / 1024 / 1024));
      }
    }
  }

  static class MyThread extends Thread {
    private final byte[] tmp = new byte[10 * 1024 * 1024];

    public void run() {
      System.out.print(".");
    }
  }
} 
```

编辑：只是总结一下上面测试的想法。Thread 的 MyThread 子类的每个实例都引用它自己的 10 MB 数组。如果 MyThread 的实例没有被垃圾回收，JVM 会很快耗尽内存。但是，运行测试代码表明 JVM 使用的内存量很小，与目前构建的 MyThreads 数量无关。我声称这是因为 MyThread 的实例是垃圾收集的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T10:26:17.507

让我们看看我们是否可以更接近问题的核心：

如果您使用 start() 启动程序（假设）1000 x，然后在线程中使用 run() 启动 1000 x，是否都会释放内存？如果是这样，那么您的算法应该被检查（即外部对象，如您的 Runnable 中使用的向量）。

如果没有如上所述的内存泄漏，那么您应该调查有关 JVM 的启动参数和线程的内存使用情况。

# php - 如何仅在子文件夹上打开 PHP 错误显示

> ID：107828
> 
> 赞同：16
> 
> 时间：2008-09-20T10:21:56.287
> 
> 标签：php

我不希望`PHP`错误显示 /html，但我希望它们显示在`/html/beta/usercomponent`. 一切都已设置好，因此根本不会显示错误。我怎样才能让错误只显示在那个文件夹（及其子文件夹）中？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-09-20T10:30:01.930

在`.htaccess`：

```
php_value error_reporting 2147483647 
```

根据文档，此数字应启用“所有”错误，无论版本如何，如果您想要更精细的设置，手动或将值组合在一起，或运行

```
php -r 'echo E_ALL | E_STRICT ;' 
```

让 php 为您计算值。

你需要

```
AllowOverride All 
```

在 apache 的主配置中启用 .htaccess 文件。

更多阅读可以在这里找到：

*   [PHP/错误报告标志](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)
*   [PHP/错误报告值](http://php.net/manual/en/errorfunc.constants.php)
*   [PHP/不同的调整设置方式](http://php.net/manual/en/configuration.changes.php)

* * *

**注意**如果您使用 Php-CGI 而不是 mod_php，这可能无法像宣传的那样工作，您将得到的只是内部服务器错误，除了在每个站点范围内启用它之外，您将别无选择。脚本基础与

```
error_reporting( E_ALL | E_STRICT ); 
```

或错误发生之前的类似构造。

我的建议是**禁用**向用户显示错误，并大量使用 php 的 error_log 功能。

```
display_errors = 0
error_logging = E_ALL | E_STRICT 
error_log = /var/log/php 
```

如果你有这个太吵的问题，这不是你需要有选择地关闭错误报告的迹象，这是一个人应该修复代码的迹象。

* * *

@罗杰

是的，您也可以在 apaches 配置中的构造中使用它，但是，在这种情况下 .htaccess 是等效的，并且使其更具可移植性，特别是如果您有相同代码库的多个工作签出副本并且您希望将此更改分发给他们都是。`<`Directory>``

 `如果您有多个虚拟主机，则需要在各自的虚拟主机定义中使用该构造，否则，是的

```
 <Directory /path/to/wherever/on/filesystem> 
      <IfModule mod_php5.c>
         php_value error_reporting 214748364
      </IfModule>
  </Directory> 
```

附加的“ifmodule”命令只是一个安全网，因此如果您没有 mod_php，上述 apache 死机问题将不会发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-20T10:33:08.177

最简单的方法是控制来自 .htaccess 文件的错误报告。但这是假设您使用的是 Apache，并且 /html/beta/usercomponent 中的脚本是从该目录调用的，而不是从其他地方包含的。

.htacess

```
php_value error_reporting [int] 
```

您必须按照[error_reporting](http://nl3.php.net/manual/en/function.error-reporting.php)文档中的说明从列表中自己组合整数值，因为在 Apache 解释 .htaccess 时没有定义像 E_ERROR 这样的常量。

这是一个简单的按位标志，例如，值 12 将是 E_WARNING + E_PARSE + E_NOTICE。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T18:49:10.170

you could do this by using an Environment variable. this way you can have more choices than just turning Error reporting on/off for a special directory. in your code where ever you wanted to change any behaviour for a specific set of directoris, or running modes, check if a environment variable is set or not. like this:

```
if ($_ENV['MY_PHP_APP_MODE'] == 'devel') {
  // show errors and debugging info
} elseif ($_ENV['MY_PHP_APP_MODE'] == 'production') {
 // show some cool message to the user so he won't freak out
 // log the errors and send email to the admin
} 
```

and when you are running your application in your development environment, you can set an env variable in your .htaccess file like this:

```
 setenv MY_PHP_APP_MODE devel 
```

or when you are in production evn:

```
 setenv MY_PHP_APP_MODE production 
```

the same technique applies to your situation. in directories where you want to do something special (turn on error reporting) set some env variable and in your code, check for that.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T10:29:17.593

~~我不相信有一个简单的答案~~，但我当然希望被证明是错误的。

编辑：原来这可以从 .htaccess 文件中控制。感谢人们！:)

不过，您可以使用 error_reporting() [http://docs.php.net/manual/en/function.error-reporting.php](http://docs.php.net/manual/en/function.error-reporting.php)逐个脚本切换设置。如果您碰巧有一个脚本，每次都包含在 /html/beta/usercomponent 中，那么这可以解决问题。

# svn - 如何在文件中显示最新版本？

> ID：107840
> 
> 赞同：5
> 
> 时间：2008-09-20T10:29:02.323
> 
> 标签：svn, versioning

我想知道在推送应用程序的实时新版本时如何处理显示版本号？

您可以`$Rev$`在文件中使用以获取最新版本，但只能在更新文件之后使用。

如果每次更改存储库/目录中的任何文件时都想更新一个文件中的字符串怎么办？

有办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T10:49:43.037

最好的方法是为版本创建一个构建脚本，该脚本将使用`svnversion`or确定修订号`svn info`并将其插入文件中。拥有一个脚本总是有帮助的：

1.  将源代码的干净副本检出到空目录中
2.  使用`svnversion`或类似的东西来计算内部版本号
3.  将源码编译成产品
4.  创建产品的存档（zip 或 tarball 或其他）
5.  清理：删除除存档之外的所有内容

然后，您可以通过一个步骤创建具有易于识别的版本的版本。它还可以帮助您避免从您自己的工作副本中向他人提供构建，其中可能包含从未签入源代码控制的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T13:58:22.130

TortoiseSVN 中有一个名为**SubWCRev.exe**的简单工具。它从*路径*中进行修订并从您自己的模板创建文件。您可以将其用作预构建命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T10:32:34.187

你试过用钩子吗？它们仅在服务器端工作，但可能会奏效。否则，如果关键字不适合您，我只会调用脚本更新修订。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-20T10:37:51.957

作为构建/部署版本的一部分自动更新文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T10:38:04.220

在我有理由这样做的一个项目中，我作弊了：它`svnversion`在启动时会调用自己。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T10:56:32.397

正如[亚历山大](https://stackoverflow.com/users/16724/alexander)所说，一种方法是将修订作为构建过程的一部分进行更新。

[执行此操作的一种方法是使用buildbot](http://buildbot.net/)等工具从版本控制签入触发的自动构建过程中获取发布构建。

一个场景可能是使用 subversion 存储库上的 post-hook 脚本触发自动构建。这会导致您的 buildbot 更新到最近签入的修订版。您的构建脚本（例如 Makefile）将使用“svnversion”（或“svn info”和 grep）来读取存储库修订版并将其写入头文件，然后再进行构建。

成功构建后，自动将此文件检入到存储库中，并带有有关发布版本的适当注释。

# asp.net - 使用 aspnet_regiis.exe 加密后的连接字符串错误

> ID：107846
> 
> 赞同：0
> 
> 时间：2008-09-20T10:31:53.517
> 
> 标签：asp.net, connection-string, rsa, aspnet-regiis.exe

我已使用以下链接中的步骤加密了 web.config 文件中的连接字符串：http: [//www.codeproject.com/KB/database/WebFarmConnStringsNet20.aspx](http://www.codeproject.com/KB/database/WebFarmConnStringsNet20.aspx)

但是，每当我调用我的应用程序时，它都会给出以下错误：

> 无法使用提供程序“CustomProvider”解密。来自提供程序的错误消息：无法打开 RSA 密钥容器。

我执行加密的服务器是 64 位 Windows Server 2003 R2 SP2。因此，我将 ACL 分配给`NT Authority\Network Service`. 然而它仍然不起作用。

希望有人有一些想法，我还需要检查什么才能使其正常工作。

PS。如果我使用默认的 rsa 密钥`NetFrameworkConfigurationKey`进行加密，那么连接字符串不会有访问问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T09:16:59.820

好吧，我找到了问题的根源，男孩很尴尬。在属性 keyContainerName 中，我拼错了名称。

那它。这就是导致问题的原因。

显然，即使您提供了不正确的 keyContainerName，加密也会起作用，我错误地认为它会失败。因此，一旦我解密连接字符串并使用正确的 keyContainerName 重新加密，它就可以正常工作。

顺便说一句，请确保在更正 keyContainerName 之前解密现有的连接字符串。aspnet_regiis.exe 会抱怨数据不正确，因为提供程序现在不同了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T10:59:05.150

你记得添加

```
<configProtectedData> 
```

到你的 web.config？

# java - Java 类中允许的最大代码行数？

> ID：107855
> 
> 赞同：27
> 
> 时间：2008-09-20T10:39:33.247
> 
> 标签：java

一个文件可以包含多少行代码`.java`？它是否取决于所使用的 JVM？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-09-20T11:09:23.537

为了扩展[Jonas 的响应](https://stackoverflow.com/questions/107855/is-there-any-no-of-lines-code-limit-for-a-java-class#107870 "乔纳斯的回应")，Java 虚拟机规范的[第 4.8 节 Java 虚拟机代码约束](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#40222 "第 4.8 节 Java 虚拟机代码的约束")说：

> 方法、实例初始化方法（第 3.9 节）或类或接口初始化方法（第 3.9 节）的 Java 虚拟机代码存储在类文件的 method_info 结构的 Code 属性的代码数组中。本节描述与 Code_attribute 结构的内容相关的约束。

继续第 4.8.1 节，静态约束

> 类文件上的静态约束是那些定义文件格式良好的约束。除了对类文件的Java虚拟机代码的静态约束外，这些约束在上一节中已经给出。类文件中对 Java 虚拟机代码的静态约束指定 Java 虚拟机指令必须如何在代码数组中布局以及各个指令的操作数必须是什么。
> 
> 代码数组中指令的静态约束如下：
> 
> ...
> 
> *   code_length 项的值必须小于 65536。
> 
> ...

所以一个方法确实有每个方法的 65535 字节字节码的限制。（见下面的注释）

有关 JVM 的更多限制，请参阅[第 4.10 节 Java 虚拟机的限制](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#88659 "4.10 Java 虚拟机的局限性")。

注意：虽然 JVM 的设计显然存在问题，如果 65535 字节的指令是 1 字节长的指令，它不受异常处理程序的保护——这在第 4.10 节的脚注 4 中列出。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-20T10:49:49.027

我相信每种方法的字节码大小有 64kb 的限制。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-20T15:48:31.413

“代码行”没有限制，但总大小有限制。每种方法都有 64kb 的限制。

我只用代码生成工具遇到过这个问题。

如果您接近极限，请小心。许多分析和监控工具都使用字节码插入。如果您离得太近，他们可以将您推到顶部。更糟糕的是，他们经常在编译后更改您的类文件。一切都在您的开发环境中编译和运行，但是当您在测试或 QA 中打开监控工具时，它会崩溃。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-02-07T16:55:12.650

如上所述，Java 中每个类的“代码行数”没有限制，我们大概可以使用 200 行作为一个很好的指导方针，每个类不超过 500 行。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-20T13:32:26.500

我记得曾经在 Tomcat 4 的复杂 JSP 页面中遇到过这个限制（过去人们仍在使用 JSP）。从 JSP 生成的 java 文件有一个方法太大而无法编译，我想我必须拆分文件或做一些其他的噱头，这在可读性方面当然是个好主意。

Sun 的错误跟踪器告诉我有些人[仍然有同样的问题](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4262078)。

# sharepoint - 如何将 Laconica 更新流集成到 SharePoint？

> ID：107872
> 
> 赞同：4
> 
> 时间：2008-09-20T10:51:20.413
> 
> 标签：sharepoint, rss, moss, twitter, laconica

我在本地 Intranet 上配置了[Laconica](http://laconi.ca/trac/)（自托管[twitter](http://twitter.com/home)），并希望通过 Web 部件将公共流集成到 SharePoint 站点中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T10:54:10.733

您可以将 RSS 查看器 Web 部件指向 laconi.ca 公共流 RSS 提要，并使用此 XSLT 来确保有吸引力的输出。

**结果截图：**

[![SharePoint 团队网站中 Laconica 更新流的屏幕截图](https://i.stack.imgur.com/dMlja.jpg)](https://i.stack.imgur.com/dMlja.jpg)

**XSL 转换：**

```
<xsl:stylesheet xmlns:x="http://www.w3.org/2001/XMLSchema" version="1.0" exclude-result-prefixes="xsl ddwrt msxsl rssaggwrt"
               xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime"
               xmlns:rssaggwrt="http://schemas.microsoft.com/WebParts/v3/rssagg/runtime"
               xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
               xmlns:msxsl="urn:schemas-microsoft-com:xslt"
               xmlns:rssFeed="urn:schemas-microsoft-com:sharepoint:RSSAggregatorWebPart"
               xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
               xmlns:dc="http://purl.org/dc/elements/1.1/"
               xmlns:rss="http://purl.org/rss/1.0/"
               xmlns:atom="http://www.w3.org/2005/Atom"
               xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd"
               xmlns:atom2="http://purl.org/atom/ns#"
               xmlns:ddwrt2="urn:frontpage:internal"
               xmlns:laconica="http://laconi.ca/ont/">
  <xsl:param name="rss_FeedLimit">5</xsl:param>
  <xsl:param name="rss_ExpandFeed">false</xsl:param>
  <xsl:param name="rss_LCID">1033</xsl:param>
  <xsl:param name="rss_WebPartID">RSS_Viewer_WebPart</xsl:param>
  <xsl:param name="rss_alignValue">left</xsl:param>
  <xsl:param name="rss_IsDesignMode">True</xsl:param>
  <xsl:template match="rdf:RDF">
    <xsl:call-template name="RDFMainTemplate"/>
  </xsl:template>
  <xsl:template name="RDFMainTemplate" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:variable name="Rows" select="rss:item"/>
    <xsl:variable name="RowCount" select="count($Rows)"/>
    <div class="slm-layout-main" >
      <xsl:call-template name="RDFMainTemplate.body">
        <xsl:with-param name="Rows" select="$Rows"/>
        <xsl:with-param name="RowCount" select="count($Rows)"/>
      </xsl:call-template>
    </div>
  </xsl:template>
  <xsl:template name="RDFMainTemplate.body" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:param name="Rows"/>
    <xsl:param name="RowCount"/>
    <xsl:for-each select="$Rows">
      <xsl:variable name="CurPosition" select="position()" />
      <xsl:variable name="RssFeedLink" select="$rss_WebPartID" />
      <xsl:variable name="CurrentElement" select="concat($RssFeedLink,$CurPosition)" />
      <xsl:if test="($CurPosition &lt;= $rss_FeedLimit)">
        <xsl:element name="div">
          <xsl:if test="($CurPosition mod 2 = 1)">
            <xsl:attribute name="style"><![CDATA[background-color:#F9F9F9;]]></xsl:attribute>
          </xsl:if>
          <xsl:element name="table">
            <xsl:attribute name="cellpadding">0</xsl:attribute>
            <xsl:attribute name="border">0</xsl:attribute>
            <xsl:attribute name="style"><![CDATA[margin:0px;padding:0px;border-spacing:0px;background-color:transparent;]]></xsl:attribute>
            <xsl:element name="tr">
              <xsl:element name="td">
                <xsl:attribute name="style"><![CDATA[vertical-align:top;padding:0px;background-color:transparent;]]></xsl:attribute>
                <xsl:attribute name="rowspan">2</xsl:attribute>
                <xsl:element name="img">
                  <xsl:attribute name="src"><xsl:value-of select="laconica:postIcon/@rdf:resource"/></xsl:attribute>
                  <xsl:attribute name="style"><![CDATA[margin:3px;height:48px;width:48px;]]></xsl:attribute>
                </xsl:element>
              </xsl:element>
              <xsl:element name="td">
                <xsl:attribute name="style"><![CDATA[vertical-align:top;padding:0px;background-color:transparent;]]></xsl:attribute>
                <div>
                  <strong><xsl:value-of select="substring-before(rss:title, ':')"/></strong>
                </div>
                <div style="width:300px;overflow-x:hidden;">
                  <div>
                    <xsl:value-of select="substring-after(rss:title, ':')"/>
                  </div>
                </div>
              </xsl:element>
            </xsl:element>
            <xsl:element name="tr">
              <xsl:element name="td">
                <xsl:attribute name="style"><![CDATA[padding:0px;background-color:transparent;]]></xsl:attribute>
                <xsl:element name="a">
                  <xsl:attribute name="href"><xsl:value-of select="rss:link"/></xsl:attribute>
                  <xsl:value-of select="ddwrt:FormatDate(dc:date,number($rss_LCID),15)"/>
                </xsl:element>
              </xsl:element>
            </xsl:element>
          </xsl:element>
        </xsl:element>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T14:48:12.000

我喜欢 RSS 的想法。另一种选择是创建一个 Laconica 插件并挂钩 EndNoticeSave 事件以将通知推送到 SharePoint。

# debugging - ColdFusion MX 2004 最好的源代码级调试器是什么？

> ID：107878
> 
> 赞同：0
> 
> 时间：2008-09-20T10:55:48.857
> 
> 标签：debugging, coldfusion

我在 ColdFusion MX 2004 中有一个旧网站。我正在用 .Net 重新编写它，所以我不想为升级到最新版本的 ColdFusion 支付 600 美元以上，我也不想通过（非常大）站点修复版本不兼容。

我经常需要追踪和修复网站中的错误。

一个源代码级调试器可以让我逐行执行代码并检查变量，这将节省大量时间。

有没有人有使用任何第三方 ColdFusion 源代码级调试器的经验？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-20T14:58:33.873

没有 ColdFusion MX 2004 这样的东西，既没有名称也没有发布年份（CFMX 6.1 发布于 2003 年，CFMX 7 发布于 2005 年）。

**[FusionDebug](http://www.fusion-reactor.com/fd/)**支持 CFMX 6.1 及以后的所有版本。

您可能想研究**[BlueDragon.NET](http://www.newatlanta.com/bluedragon)**，它允许您在 .NET 平台上运行 CFML 代码，并且可能使您更容易过渡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T15:02:39.077

ColdFusion的[开发人员版本](http://www.adobe.com/support/coldfusion/downloads.html#proddownloads)是免费的，因此您可以安装最新版本，将[调试工具](http://www.adobe.com/support/coldfusion/downloads.html#cfdevtools)安装到 eclipse 中并免费运行调试。

如果您更喜欢在 CF 的目标版本上进行调试，另一个选项是支持 CF 6.1 及更高版本的[FusionDebug 。](http://www.fusion-reactor.com/fd/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T11:43:27.453

Charlie Arehart 的网站上列出了某些调试器。 [http://www.carehart.org/cf411/#debug](http://www.carehart.org/cf411/#debug) 这个 CF411 网站有很多关于各种主题的重要信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T19:51:53.027

您似乎没有将此问题标记为已回答。其他人提供了答案，但要清楚：

如果您运行的是 CF 8 之前的 CF 版本，则可以使用可用的商业第三方工具 FusionDebug (www.fusiondebug.com) 进行线路调试。

如果您运行的是 CF 8，它包括免费的线路调试。

这两种方法都利用了 Eclipse IDE 的内置调试功能，将其连接到 CF。

关于每一个的更多信息，我写了几篇文章：

[ColdFusion 8 调试器解释：CF 8 的交互式步骤调试](http://www.carehart.org/articles/#2008_4)

[使用 CF8 调试器](http://www.carehart.org/articles/#2008_2)

[FusionDebug解释：CFML的交互式步骤调试](http://www.carehart.org/articles/#2006_5)

[FusionDebug 提示和技巧](http://www.carehart.org/articles/#2006_3)

希望那些帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T11:25:44.463

BlueDragon.Net 很有意思，但是我安装了它，发现它并没有做源码级的调试。

# .net - 识别 2 个 HTML 页面是否相似

> ID：107884
> 
> 赞同：3
> 
> 时间：2008-09-20T10:58:21.503
> 
> 标签：.net, diff, similarity, fuzzy

我正在尝试确定基本案例和提供的案例之间的差异。寻找一个图书馆来告诉我百分比或类似的相似性。

例如：

我有 10 个不同的 HTML 页面。* 都是 404 响应，只有一个 2 行随机代码（例如时间或当天的报价）。

现在，当我提供一个新的 404 页面时，我希望返回类似“%80”的结果，但是如果我提供另一个完全不同或相同网站但内容完全不同的页面，我应该得到一些“%20 相似”的结果。

基本上我想要做的是，当我得到一个新的回复时，我想确定新的回复是否与我之前提供的这 10 页相似。

我正在尝试在 .NET 中解决这个问题，库或算法推荐会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T11:37:01.677

您可以使用复制/粘贴检测器 (cpd)，而不是使用差异工具。然后，您可以配置您希望文件有多相似的阈值。

顺便说一句，我过去曾用这些来追踪学校里的作弊者。

山姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T15:32:17.857

如果您想使用基于字符串的解决方案，您可以使用 k-gram 进行尝试（您计算两个文件的所有长度为 k 的连续字符的字符串，然后对结果集执行 Jaccard 距离）。这是在数据库世界中执行近似查询的标准方法。

如果您对嵌入到 html 文件中的分层信息更感兴趣（例如，您正在谈论一个不可变的部分），您可以将其转换为 xhtml（对于 java，您有[http://htmlcleaner.sourceforge.net/](http://htmlcleaner.sourceforge.net/)，我不是进入.net，但我认为该环境也有几种选择），看到生成为有序标记树的文件，您可以使用 pq-grams（[http://www.inf.unibz.it/~augsten/publ/tods10 /](http://www.inf.unibz.it/~augsten/publ/tods10/)用于纸和 java 代码）来评估结构相似性（pq-grams 是字符串 k-grams 的树泛化）。

此时，如果您愿意，您可以对包含文本的叶子执行基于哈希的比较，或者对这个叶子使用 k-gram，对其余部分使用基于结构 pq-gram 的相似性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T11:00:58.470

一种快速而肮脏的方法是计算标记的 Levenshtein 距离。

[http://en.wikipedia.org/wiki/Levenstein_distance](http://en.wikipedia.org/wiki/Levenstein_distance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T11:05:22.250

对于您的任务，运行命令行 diff 实用程序并分析结果就足够了。

或者，您需要实现[LCS](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)算法，但对我来说这将是一个矫枉过正。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-20T11:13:10.203

> 对于您的任务，运行命令行 diff 实用程序并分析结果就足够了。

这真的不是一次性的工作，我需要一个集成到应用程序中的解决方案。

diff 在这里有它自己的问题，因为我不能告诉 diff 处理 5 个页面并忽略那些不断变化的位。

这些部分可以很大，可以2kb的标准文本不断变化。而且我认为从差异的角度来看，这是一个很大的变化，但是从我的角度来看，这只是一个部分的更改（已知在所有其他 9 个文件中都会更改，因此应该完全忽略）。

也许差异库可以做到这一点，但我不知道这样的库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T11:53:49.980

我会使用的基本算法：

解析新旧两边页面的文本内容。当您解析时，请跟踪已处理的字节数，以便稍后使用以确定有多少 % 已更改。现在你在每一边都有完整的故事，建立相同的锚点。对于你所拥有的每一个相同的锚点，尝试向前和向后扩展它。将您的相同锚点之间的任何差距确定为差异。遍历您确定的每个差异差距并总结它们的字节数。通过使用总数量差异字节数和故事的总字节（您之前计算的那个）来计算您的差异百分比。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-15T17:33:51.080

您可以使用 jqgram，一种 PQ-Gram 树编辑距离近似的实现来专门解决此问题，但如果您不想移植到 C#，则需要运行 Node.js。不过，端口应该很容易......算法并不是那么复杂。简约中的美。

[https://github.com/hoonto/jqgram](https://github.com/hoonto/jqgram)

在这个例子中是一个 DOM 与 Cheerio 的例子，它展示了如何处理子元素和标签以生成近似的树编辑距离。结果，它为您提供了一个介于 0 和 1 之间的数字，这就是您的百分比相等。但请注意，零值不一定表示相同的树，它仅表示它们非常相似。您也可以轻松地进行 DOM 与 DOM 比较或 Cheerio 与 Cheerio - 或使用 Cheerio 使用的 HTML 解析，而不用担心使用整个库（开箱即用的 Cheerio 是一个相当快的服务器端 jQuery 和类似 DOM执行）。

所以显然这个解决方案是特定于 Node.js 和浏览器 javascript 的，但我认为这些挑战可能比移植到 C#/.NET 更容易。

```
// This could probably be optimized significantly, but is a real-world
// example of how to use tree edit distance in the browser.

// For cheerio, you'll have to browserify, 
// which requires some fiddling around
// due to cheerio's dynamically generated 
// require's (good grief) that browserify 
// does not see due to the static nature 
// of its code analysis (dynamic off-line
// analysis is hard, but doable).
//
// Ultimately, the goal is to end up with 
// something like this in the browser:

var cheerio = require('./lib/cheerio'); 

// The easy part, jqgram:
var jq = require("../jqgram").jqgram;

// Make a cheerio DOM:
var html = '<body><div id="a"><div class="c d"><span>Irrelevent text</span></div></div></body>';

var cheeriodom = cheerio.load(html, {
    ignoreWhitespace: false,
    lowerCaseTags: true
});

// For ease, lets assume you have jQuery laoded:
var realdom = $('body');

// The lfn and cfn functions allow you to specify
// how labels and children should be defined:
jq.distance({
    root: cheeriodom,
    lfn: function(node){ 
        // We don't have to lowercase this because we already
        // asked cheerio to do that for us above (lowerCaseTags).
        return node.name; 
    },
    cfn: function(node){ 
        // Cheerio maintains attributes in the attribs array:
        // We're going to put id's and classes in as children 
        // of nodes in our cheerio tree
        var retarr = []; 
        if(!! node.attribs && !! node.attribs.class){
            retarr = retarr.concat(node.attribs.class.split(' '));
        }
        if(!! node.attribs && !! node.attribs.id){
            retarr.push(node.attribs.id);
        }
        retarr = retarr.concat(node.children);
        return  retarr;
    }
},{
    root: realdom,
    lfn: function(node){ 
        return node.nodeName.toLowerCase(); 
    },
    cfn: function(node){ 
        var retarr = [];
        if(!! node.attributes && !! node.attributes.class && !! node.attributes.class.nodeValue){
            retarr = retarr.concat(node.attributes.class.nodeValue.split(' '));
        }
        if(!! node.attributes && !! node.attributes.id && !! node.attributes.id.nodeValue) {
            retarr.push(node.attributes.id.nodeValue);
        }
        for(var i=0; i<node.children.length; ++i){
            retarr.push(node.children[i]);
        }
        return retarr;
    }
},{ p:2, q:3, depth:10 },
function(result) {
    console.log(result.distance);
}); 
```

# windows - 是否有与 -rpath 链接器标志等效的 Windows/MSVC？

> ID：107888
> 
> 赞同：49
> 
> 时间：2008-09-20T10:58:54.387
> 
> 标签：windows, dll, shared, rpath

在 Linux/GCC 上，我可以使用 -rpath 标志来更改共享库的可执行文件搜索路径，而无需调整环境变量。

这也可以在 Windows 上完成吗？据我所知，总是在可执行文件的目录和 PATH 中搜索 dll。

我的场景：我想根据共享库的属性（32/64 位/调试/发布）将共享库放入位置，而不考虑唯一名称。在 Linux 上，这很容易通过 rpath 完成，但我还没有找到在 Windows 上执行此操作的任何方法。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-10-23T16:31:56.757

遗憾的是，没有与 RPATH 直接类似的东西。有许多替代的可能性，每一种都可能以自己的特殊方式对你不利。

鉴于无论如何您都需要为每种构建风格使用不同的 exe 以避免运行时库冲突，您可能猜到最简单的做法是将每个 exe 与每组 DLL 放在同一文件夹中。

正如您还提到的，最通用的方法是通过使用批处理文件来引导 exe 来更改 PATH 变量。

您可以改为在将程序运行到所需的 DLL 文件夹之前更改当前工作目录。

您可以在 exe 中使用函数[SetDllDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx)或[AddDllDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/hh310513%28v=vs.85%29.aspx)。这可能是最接近 RPATH 的，但仅适用于 WinXP SP1 或更高版本。

如果您愿意更改每个 exe 风格的文件名，可以使用“App Paths”注册表项。每个 exe 都需要一个唯一的文件名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-20T11:03:01.990

Windows 中 DLL 的搜索顺序在 MSDN上的[此页面上进行了描述。](http://msdn.microsoft.com/en-us/library/ms682586%28VS.85%29.aspx)如果您使用[运行时动态链接](http://msdn.microsoft.com/en-us/library/ms686944%28VS.85%29.aspx)，您可以在调用时指定文件夹`LoadLibrary`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-20T14:34:35.307

[“隔离应用程序”](http://msdn.microsoft.com/en-us/library/aa375190(VS.85).aspx)是一种嵌入描述 DLL 依赖关系的 XML 清单的机制。

# macos - 如何创建与 Finder 的“压缩”菜单项格式相同的 zip 文件？

> ID：107903
> 
> 赞同：34
> 
> 时间：2008-09-20T11:04:29.833
> 
> 标签：macos, shell, automation, zip

在 Mac OS X 上，您可以通过选择一些文件并从上下文菜单或文件菜单中选择“压缩”，从 Finder 创建一个 zip 存档。不幸的是，生成的文件与命令创建的存档不同`zip`（使用默认选项）。

这种区别对 Apple 运营的至少一项服务很重要，该服务无法接受使用该`zip`命令创建的档案。必须手动创建档案使我无法完全自动化我的发布构建过程。

如何在 shell 脚本中创建正确格式的 zip 存档？

编辑：自从很久以前写这个问题以来，我发现它们之间的关键区别在于`ditto`它们`zip`如何处理符号链接：因为应用程序包中的代码签名包含符号链接，所以它需要作为链接保存而不是存储作为常规文件。`ditto`默认情况下执行此操作，但`zip`不执行此操作（`-y`需要选项）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2010-03-18T20:38:44.433

我有一个 ruby​​ 脚本，可以为我构建 iPhone App Store，但它生成的 zip 不会被 iTunes Connect 接受。如果我使用 Finder 的“压缩”功能，它们就会被接受。

millenomi 的答案对我来说很接近，但这个命令最终起作用了。iTunes Connect 接受了我的构建，并且该应用程序获得了批准并且可以毫无问题地下载，所以它已经过测试。

```
ditto -c -k --sequesterRsrc --keepParent AppName.app AppName.zip 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-20T11:27:28.717

使用同上命令行工具，如下所示：

```
ditto -ck --rsrc --sequesterRsrc folder file.zip 
```

有关更多信息，请参见[同上手册页](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/ditto.1.html)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-11-20T03:03:12.657

人同上说：

> ```
>  The command:
>        ditto -c -k --sequesterRsrc --keepParent src_directory archive.zip
>  will create a PKZip archive similarly to the Finder's Compress functionality. 
> ```

注意--keepParent

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T11:17:45.340

线索在标签“自动化”中。

在 Automator.app 中创建一个使用“创建存档”操作的操作，从命令行调用它（参见“自动机”）。

# unit-testing - 在成熟的项目中引入测试驱动开发（TDD）是否可行？

> ID：107919
> 
> 赞同：37
> 
> 时间：2008-09-20T11:14:48.903
> 
> 标签：unit-testing, mocking, tdd

*   假设我们意识到 TDD 的价值为时已晚。项目已经成熟，很多客户开始使用它。
*   假设使用的自动化测试主要是功能/系统测试，并且有大量的自动化 GUI 测试。
*   假设我们有新的功能请求和新的错误报告（！）。如此大的发展仍在继续。
*   请注意，已经有很多业务对象没有或很少进行单元测试。
*   它们之间有太多的协作/关系，这又只能通过更高级别的功能/系统测试来测试。本身没有集成测试。
*   具有大量表、视图等的大型数据库。仅仅为了实例化单个业务对象，就已经进行了大量的数据库往返。

我们如何在这个阶段引入 TDD？

嘲笑似乎是要走的路。但是我们在这里需要做的嘲笑似乎太多了。听起来需要为适用于现有东西（BO、数据库等）的模拟系统开发复杂的基础设施。

这是否意味着只有从头开始时 TDD 才是合适的方法？我很想知道在已经成熟的产品中引入 TDD 的可行策略。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-20T11:21:51.120

创建一个复杂的模拟基础设施可能只会隐藏代码中的问题。我建议您从集成测试开始，使用测试数据库，围绕您计划更改的代码库区域。一旦您有足够的测试以确保您在进行更改时不会破坏任何东西，您就可以开始重构代码以使其更具可测试性。

Se 也是 Michael Feathers 的优秀著作[《有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)》，对于任何想将 TDD 引入遗留代码库的人来说，这是一本必读的书。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-20T11:22:45.483

我认为将 TDD 引入现有应用程序是完全可行的，事实上我最近自己做了。

以 TDD 方式编写新功能并重组现有代码以适应这种情况是最容易的。这样，您从测试代码的一小部分开始，但效果开始蔓延到整个代码库。

如果您有错误，请编写一个单元测试来重现它，并根据需要重构代码（除非付出的努力真的不值得）。

就个人而言，我认为没有必要发疯并尝试将测试改型到现有系统中，因为这可能非常乏味而没有很多好处。

总之，从小处着手，您的项目将变得越来越受测试感染。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-20T11:23:42.270

是的你可以。根据您的描述，该项目处于良好状态 - 大量的功能测试自动化是一种方法！在某些方面，它甚至比单元测试更有用。请记住，TDD ！= 单元测试，这都是关于短迭代和可靠的验收标准。

请记住，拥有一个现有且被接受的项目实际上使测试更容易 - 工作应用程序是最好的需求规范。因此，与只有一张纸可以合作的人相比，您处于更好的位置。

只需开始使用 TDD 处理您的新需求/错误修复。请记住，切换方法会产生相关开销（确保您的客户意识到这一点！）并且可能期望习惯于“好的旧方法”的团队成员非常不情愿。

除非需要，否则不要碰旧的东西。如果您有一个会影响现有内容的增强请求，那么请考虑额外的时间来进行额外的设置。

就我个人而言，我认为为模型引入复杂的基础设施没有太大价值——当然有一种方法可以在轻量级模式下实现相同的结果，但这显然取决于你的情况

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-22T01:32:42.283

一种可以帮助您测试遗留代码的工具（假设您没有时间重构它，Typemock Isolator：Typemock.com 它允许将依赖项注入现有代码而无需提取接口等，因为它确实不使用标准反射技术（动态代理等），而是使用分析器 API。它已被用于测试依赖于共享点、HTTPContext 和其他问题区域的应用程序。我建议你看看。（我在该公司，但它是唯一不强迫您重构现有遗留代码的工具，从而节省您的时间和金钱）我还强烈建议“有效地使用遗留代码”以获得更多技术。

罗伊

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-20T11:19:33.510

是的你可以。不要一下子全部做完，而是在你接触到模块时只介绍你需要什么来测试它。

您还可以从更高级别的验收测试开始，然后从那里开始（查看[Fitnesse](http://fitnesse.org/)的相关内容）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-20T13:13:39.447

我将从一些基本的集成测试开始。这将得到其他员工的支持。然后开始分离代码中具有依赖关系的部分。努力使用依赖注入，因为它会让你的代码更容易测试。将错误视为编写可测试代码的机会。

# html - 如何向网站添加一些非标准字体？

> ID：107936
> 
> 赞同：554
> 
> 时间：2008-09-20T11:26:52.153
> 
> 标签：html, css, fonts, font-face

有没有办法在不使用图像、[Flash](http://en.wikipedia.org/wiki/Adobe_Flash)或其他图形的情况下在网站上添加一些自定义字体？

例如，我在一个婚礼网站上工作，我为这个主题找到了很多不错的字体。但我找不到在服务器上添加该字体的正确方法。以及如何将带有 CSS 的字体包含到 HTML 中？这可以在没有图形的情况下完成吗？

* * *

## 回答 #1

> 赞同：531
> 
> 时间：2008-09-20T11:35:52.630

这可以通过 CSS 完成：

```
<style type="text/css">
@font-face {
    font-family: "My Custom Font";
    src: url(http://www.example.org/mycustomfont.ttf) format("truetype");
}
p.customfont { 
    font-family: "My Custom Font", Verdana, Tahoma;
}
</style>
<p class="customfont">Hello world!</p> 
```

如果您使用 TrueType-Fonts (TTF)、Web Open Font Format (WOFF) 或 Embedded Opentype (EOT)，[则所有常规浏览器都支持](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)它。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2010-06-28T07:08:22.847

您可以通过[Google Web Fonts](http://www.google.com/fonts/)添加一些字体。

从技术上讲，这些字体由 Google 托管，您可以在 HTML 标头中链接它们。然后，你可以在 CSS 中自由地使用它们[`@font-face`](http://www.w3.org/TR/css3-fonts/#font-face-rule)（[阅读它](http://www.css3.info/preview/web-fonts-with-font-face/)）。

例如：

在该`<head>`部分：

```
 <link href=' http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'> 
```

然后在 CSS 中：

```
h1 { font-family: 'Droid Sans', arial, serif; } 
```

* * *

该解决方案似乎相当可靠（甚至[Smashing Magazine 也使用它作为文章标题。](http://www.smashingmagazine.com/)）。但是，到目前为止，[Google 字体目录](http://www.google.com/fonts/)中可用的字体并不多。

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2014-03-30T01:00:32.680

可行的方法是使用@font-face CSS 声明，它允许作者指定在线字体以在其网页上显示文本。通过允许作者提供自己的字体，@font-face 消除了依赖用户在其计算机上安装的有限数量的字体的需要。

看看下表：

![在此处输入图像描述](https://i.stack.imgur.com/fFhYS.png)

如您所见，主要由于跨浏览器兼容性，您需要了解几种格式。移动设备中的情况并没有太大的不同。

## 解决方案：

**1 - 完全浏览器兼容性**

这是目前支持最深的方法：

```
@font-face {
  font-family: 'MyWebFont';
  src: url('webfont.eot'); /* IE9 Compat Modes */
  src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('webfont.woff') format('woff'), /* Modern Browsers */
       url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
       url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

**2 - 大多数浏览器**

不过，事情正在[严重转向 WOFF](http://caniuse.com/#feat=woff)，因此您可能会逃脱：

```
@font-face {
  font-family: 'MyWebFont';
  src: url('myfont.woff') format('woff'), /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
       url('myfont.ttf') format('truetype'); /* Chrome 4+, Firefox 3.5, Opera 10+, Safari 3—5 */
} 
```

**3 - 只有最新的浏览器**

甚至只是 WOFF。
然后你像这样使用它：

```
body {
  font-family: 'MyWebFont', Fallback, sans-serif;
} 
```

## 参考资料和延伸阅读：

这主要是您在实现此功能时需要了解的内容。如果您想对该主题进行更多研究，我鼓励您查看以下资源。我放在这里的大部分内容都是从以下内容中提取的

*   [使用字体](http://css-tricks.com/snippets/css/using-font-face/)（非常推荐）
*   [Bulletproof @font-face 语法](http://www.paulirish.com/2009/bulletproof-font-face-implementation-syntax/)
*   [我可以使用@font-face 网络字体吗？](http://caniuse.com/fontface)
*   [如何归档跨浏览器@font-face 支持](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)
*   [@font-face 在 CSS Mozilla 开发者网络](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-09-12T15:30:55.233

如果使用非标准字体，您的意思是标准格式的自定义字体，我就是这样做的，它适用于我迄今为止检查过的所有浏览器：

```
@font-face {
    font-family: TempestaSevenCondensed;
    src: url("../fonts/pf_tempesta_seven_condensed.eot") /* EOT file for IE */
}
@font-face {
    font-family: TempestaSevenCondensed;
    src: url("../fonts/pf_tempesta_seven_condensed.ttf") /* TTF file for CSS3 browsers */
} 
```

所以你只需要 ttf 和 eot 字体。一些在线可用的工具可以进行转换。

但是如果你想附加非标准格式的字体（位图等），我帮不了你。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-09-20T11:35:01.243

我发现在网站上使用非标准字体的最简单方法是使用**[sIFR](http://en.wikipedia.org/wiki/Scalable_Inman_Flash_Replacement)**

它确实涉及使用包含字体的 Flash 对象，但如果未安装 Flash，它会很好地降级为标准文本/字体。

样式在您的 CSS 中设置，JavaScript 为您的文本设置 Flash 替换。

**编辑：（我仍然建议将图像用于非标准字体，因为 sIFR 会增加项目时间并且可能需要维护）。**

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-02-25T22:56:00.223

IE中的*[Font-face：使 Web 字体工作一](http://jontangerine.com/log/2008/10/font-face-in-ie-making-web-fonts-work)*文说它适用于所有三种主要浏览器。

这是我工作的示例：http: [//brendanjerwin.com/test_font.html](http://brendanjerwin.com/test_font.html)

更多讨论在*[Embedding Fonts](http://brendanjerwin.com/development/web/2009/03/03/embedding-fonts.html)*中。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-05-11T16:59:25.663

[Typeface.js](http://typeface.neocracy.org/)和[Cufon](http://wiki.github.com/sorccu/cufon)是另外两个有趣的选项。它们是 JavaScript 组件，通过除 Internet Explorer 之外的所有较新浏览器中的新 <canvas> 元素和通过Internet Explorer 中的[VML以 JSON 格式（您可以从其网站上的](http://en.wikipedia.org/wiki/Vector_Markup_Language)[TrueType](http://en.wikipedia.org/wiki/TrueType)或[OpenType](http://en.wikipedia.org/wiki/OpenType)格式转换）呈现特殊字体数据。

两者的主要问题（截至目前）是选择文本不起作用或至少只能非常笨拙地起作用。

尽管如此，它仍然非常适合头条新闻。正文...我不知道。

而且速度出奇的快。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-09-20T11:33:07.177

或者你可以试试[sIFR](http://en.wikipedia.org/wiki/Scalable_Inman_Flash_Replacement)。我知道它使用 Flash，但前提是可用。如果 Flash 不可用，它会以其原始 (CSS) 字体显示原始文本。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-20T11:39:19.423

W3C 推荐的用于执行此操作的技术称为“嵌入”，这里的三篇文章对此进行了很好的描述：[嵌入字体](http://www.allgraphicdesign.com/downloadfonts/fontsarticles/embeddingfonts/csswebsitespages.html)。在我有限的实验中，我发现这个过程容易出错，并且在使其在多浏览器环境中运行方面取得的成功有限。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-20T11:43:39.770

Safari 和 Internet Explorer 都支持 CSS @font-face 规则，但是它们支持两种不同的嵌入字体类型。Firefox 计划在不久的将来支持与 Apple 相同的类型。SVG 可以嵌入字体，但还没有得到广泛支持（没有插件）。

我认为我见过的最便携的解决方案是使用 JavaScript 函数用您选择的字体生成并缓存在服务器上的图像替换标题等 - 这样您只需更新文本而不必Photoshop中的东西。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-20T11:47:23.943

如果您使用 ASP.NET，生成基于图像的字体非常容易，而无需在服务器上实际安装（如添加到已安装的字体库）字体，方法是使用：

```
PrivateFontCollection pfont = new PrivateFontCollection();
pfont.AddFontFile(filename);
FontFamily ff = pfont.Families[0]; 
```

然后用该字体在`Graphics`.

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-20T11:39:12.170

看起来它只适用于 Internet Explorer，但谷歌快速搜索“html embed fonts”会产生[http://www.spoono.com/html/tutorials/tutorial.php?id=19](http://www.spoono.com/html/tutorials/tutorial.php?id=19)

如果你想保持平台无关（你应该！），你将不得不使用图像，或者只使用标准字体。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-20T11:52:07.223

我做了一些研究并挖掘了*[动态文本替换](http://www.alistapart.com/articles/dynatext/)*（2004-06-15 发布）。

这种技术使用图像，但它似乎是“免提”的。您编写文本，并让一些自动化脚本在页面上为您自动查找和替换。

它有一些限制，但它可能是比我见过的所有其他选择更容易的选择之一（并且与浏览器更兼容）。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-02-22T19:18:24.733

也可以使用 WOFF 字体 - 例如[这里](https://encrypted.pcode.nl/blog/wp-content/themes/simplest-pcode/style.css)

```
@font-face {
font-family: 'Plakat Fraktur';
src: url('/resources/fonts/plakat-fraktur-black-modified.woff') format('woff');
font-weight: bold;
font-style: normal;
 } 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-11-11T16:11:09.610

只需简单地提供这样的实际字体的链接，你就可以开始了

```
<!DOCTYPE html>
<html>
<head>
<link href='https://fonts.googleapis.com/css?family=Montserrat'   rel='stylesheet'>
<style>
body {
font-family: 'Montserrat';font-size: 22px;
}
</style>
</head>
<body>

<h1>Montserrat</h1>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>

</body>
</html> 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2010-04-06T05:06:59.530

有关替代方法，请参阅文章*[50 Useful Design Tools For Beautiful Web Typography 。](http://www.smashingmagazine.com/2009/01/27/css-typographic-tools-and-techniques/)*

我只用过[Cufon](http://wiki.github.com/sorccu/cufon/)。我发现它可靠且易于使用，因此我坚持使用它。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2010-05-31T03:35:45.137

**Typeface.js JavaScript 方式：**

> 使用 typeface.js，您可以在网页中嵌入自定义字体，这样您就不必将文本渲染到图像中
> 
> 您可以使用 typeface.js 并以纯 HTML 和 CSS 编写，而不是创建图像或使用 flash 来以您想要的字体显示您的站点的图形文本，就像您的访问者在本地安装了字体一样。

[http://typeface.neocracy.org/](http://typeface.neocracy.org/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-02-11T05:37:36.453

如果您有字体文件，那么您将需要为其他浏览器添加更多格式的该字体。

为此，我使用像[Fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator)这样的字体生成器，它提供了所有字体格式及其@font-face CSS，您只需将其拖放到您的 CSS 文件中即可。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-09-29T23:57:15.940

```
@font-face {
font-family: "CustomFont";
src: url("CustomFont.eot");
src: url("CustomFont.woff") format("woff"),
url("CustomFont.otf") format("opentype"),
url("CustomFont.svg#filename") format("svg");
} 
```

# css - CSS 列表样式：无；仍然显示子弹

> ID：107964
> 
> 赞同：3
> 
> 时间：2008-09-20T11:44:41.563
> 
> 标签：css

我正在使用 YUI 重置/基础，重置后它将`ul`和`li`标签设置为 list-style: disc outside;

我的标记如下所示：

```
<div id="nav">
     <ul class="links">
         <li><a href="">Testing</a></li>
     </ul>

</div> 
```

我的 CSS 是：

```
#nav {}
#nav ul li {
    list-style: none;
 } 
```

现在这使得每一里旁边的小圆盘消失了。

为什么这不起作用？

```
 #nav {}
 #nav ul.links 
 {
      list-style: none;
 } 
```

如果我删除指向 base.css 文件的链接，它会起作用，为什么？

更新：`sidenav`->`nav`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-21T05:21:51.960

我认为 Dan 的回答很接近，但这不是具体问题。 **您可以在列表（UL）上设置列表样式，但您也可以为单个列表项（LI）覆盖该列表样式。**

您告诉浏览器不要在列表中使用项目符号，但 YUI 告诉浏览器在单个列表项上使用它们（YUI 获胜）：

```
ul li{ list-style: disc outside; } /* in YUI base.css */

#nav ul.links {
    list-style: none; /* doesn't override styles for LIs, just the UL */
} 
```

你想要的是告诉浏览器不要在列表项上使用它们：

```
ul li{ list-style: disc outside; } /* in YUI base.css */

#nav ul.links li {
    list-style: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T11:56:13.470

在第一个片段中，您将列表样式应用于 li 元素，在第二个片段中应用于 ul 元素。

尝试

```
#nav ul.links li
{
  list-style: none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T12:06:50.137

[由于CSS 的特殊性](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)，后一个示例可能不起作用。（更严肃的解释可以在[这里](http://www.htmldog.com/guides/cssadvanced/specificity/)找到。）也就是说，YUI的base.css规则是：

```
ul li{ list-style: disc outside; } 
```

这比您的更“具体”，因此正在使用 YUI 规则。正如多次提到的，您可以通过定位`li`标签来使您的规则更加具体：

```
#nav ul li{ list-style: none; } 
```

如果不查看您的代码，很难确定，但如果您不了解具体性，那么它当然值得一读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T11:46:04.727

不应该是：

```
#nav ul.links 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-20T11:48:25.110

也许样式是 base.css 用“！important”覆盖了您的样式？您是否尝试为这个特定的 li 添加一个类并为其创建自己的样式？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-20T12:14:12.460

使用这个：

```
.nav ul li {
    list-style: none;
} 
```

或者

```
.links li {
    list-style: none;
} 
```

它应该工作......

# javascript - 一个 Firefox javascript 书签问题

> ID：107971
> 
> 赞同：7
> 
> 时间：2008-09-20T11:48:34.363
> 
> 标签：javascript, firefox, bookmarks

我正在使用以下 JavaScript 代码：

```
<script language="JavaScript1.2" type="text/javascript">
 function CreateBookmarkLink(title, url) {
    if (window.sidebar) {
        window.sidebar.addPanel(title, url,"");
    } else if( window.external ) {
        window.external.AddFavorite( url, title); }
    else if(window.opera && window.print) {
        return true; }
 }
</script> 
```

这将为 Firefox 和 IE 创建一个书签。但是 Firefox 的链接将显示在浏览器的侧面板中，而不是显示在主屏幕中。我个人觉得这很烦人，正在寻找更好的解决方案。当然可以手动编辑书签以使其*不*显示在侧面板中，但这需要额外的步骤。我只想让人们以简单的方式为页面添加书签（在用于构建特定方案的 URL 中有很多 GET 信息）。

恐怕根本不可能让 Firefox 在主屏幕中显示页面（因为谷歌搜索这个主题几乎没有任何值得使用的东西），但我可能错过了一些东西。如果有人知道这是否可行，或者是否有解决方法，我很想听听。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-01-31T13:32:24.330

对于 Firefox，不需要通过脚本为页面设置任何 JavaScript 书签，只有带有**title**和**rel="sidebar"**的锚标记可以执行此功能

```
<a href="http://www.google.com" title="Google" rel="sidebar">Bookmark This Page</a> 
```

我已经在 FF9 上对其进行了测试，并且工作正常。

当您单击该链接时，Firefox 将打开一个对话框**新建书签**，如果您不希望在侧边栏中加载此书签，请取消选中从对话框中 **在侧边栏中加载此书签。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-20T12:05:33.713

我认为这是 Firefox 的唯一解决方案......我对该操作有更好的功能，它甚至适用于 Opera，并为其他“不受支持”的浏览器显示消息。

```
<script type="text/javascript">
function addBookmark(url,name){
    if(window.sidebar && window.sidebar.addPanel) {
        window.sidebar.addPanel(name,url,''); //obsolete from FF 23.
} else if(window.opera && window.print) { 
        var e=document.createElement('a');
        e.setAttribute('href',url);
        e.setAttribute('title',name);
        e.setAttribute('rel','sidebar');
        e.click();
} else if(window.external) {
        try {
            window.external.AddFavorite(url,name);
        }
        catch(e){}
}
else
        alert("To add our website to your bookmarks use CTRL+D on Windows and Linux and Command+D on the Mac.");
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T11:56:43.203

你有一个特殊情况

```
if (window.sidebar) 
```

然后是“else”的分支-firefox不会在第一个分支中着陆，因此只添加面板？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T12:15:43.610

北条，

这似乎是为 Firefox 添加书签的唯一方法。所以 FF 需要登陆第一个分支才能发生任何事情。我用谷歌搜索了更多，但我真的明白这在 FF 中是不可能正确解决的......

# c# - 从所属类外部调用 C# 事件？

> ID：107972
> 
> 赞同：19
> 
> 时间：2008-09-20T11:49:11.053
> 
> 标签：c#, events, inheritance

是否有可能在任何情况下都能够做到这一点？

我现在的情况是这样的：

```
public class CustomForm : Form
{
    public class CustomGUIElement
    {
    ...
        public event MouseEventHandler Click;
        // etc, and so forth.
    ...
    }

    private List<CustomGUIElement> _elements;

    ...

    public void CustomForm_Click(object sender, MouseEventArgs e)
    {
        // we might want to call one of the _elements[n].Click in here
        // but we can't because we aren't in the same class.
    }
} 
```

我的第一个想法是有一个类似的功能：

```
internal enum GUIElementHandlers { Click, ... }
internal void CustomGUIElement::CallHandler(GUIElementHandler h, object[] args) {
    switch (h) {
        case Click:
            this.Click(this, (EventArgs)args[0]);
            break;
        ... // etc and so forth
    }
} 
```

这是一个非常丑陋的组合，但它应该可以工作......但必须有一个更优雅的解决方案？.NET 库一直使用消息处理程序和控件中的调用事件来执行此操作。还有其他人有任何其他/更好的想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-20T11:52:34.383

您只需要添加一个公共方法来调用该事件。Microsoft 已经为某些事件执行此操作，例如针对公开*Click*事件的控件的*PerformClick 。*

 *```
public class CustomGUIElement    
{
    public void PerformClick()
    {
        OnClick(EventArgs.Empty);
    }

    protected virtual void OnClick(EventArgs e)
    {
        if (Click != null)
            Click(this, e);
    }
} 
```

然后，您将在示例事件处理程序中执行以下操作...

```
public void CustomForm_Click(object sender, MouseEventArgs e)        
{
    _elements[0].PerformClick();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-21T20:56:26.657

c# 中的 event 关键字修改了委托的声明。它防止直接分配给委托（您只能在事件上使用 += 和 -=），并防止从类外部调用委托。

因此，您可以将代码更改为如下所示：

```
public class CustomGUIElement
{
...
    public MouseEventHandler Click;
    // etc, and so forth.
...
} 
```

然后你可以像这样从类外部调用事件。

```
myCustomGUIElement.Click(sender,args); 
```

缺点是使用该类的代码可以很容易地使用如下代码覆盖任何已注册的处理程序：

```
myCustomGUIElement.Click = null; 
```

如果 Click 委托被声明为事件，则不允许这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-12T12:33:56.763

您可以使用 .NET 框架的现代语法功能大大缩短已接受答案中建议的代码：

```
public event Action<int> RecipeSelected;
public void RaiseRecpeSelected(int recipe) => RecipeSelected?.Invoke(recipe); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T11:52:23.963

您确实应该将希望能够从外部执行的代码包装在一个方法中。然后，该方法可以执行您的事件将执行的任何操作 - 而该事件也将调用该方法。

# unicode - Toad unicode 输入问题

> ID：107984
> 
> 赞同：1
> 
> 时间：2008-09-20T11:56:38.663
> 
> 标签：unicode, toad

在 toad 中，我可以看到来自 oracle db 的 unicode 字符。但是当我单击数据网格中的某个字段进入编辑模式时，unicode 字符会转换为无意义的符号，但这不是大问题。

编辑此字段时，Unicode 字符会在我键入时正确显示。但是一旦我按下进入和退出编辑模式，它们就会被转换为最接近（最相似）的非 Unicode 字符。所以我不能在数据网格上输入 unicode 字符。复制和粘贴其中一个 unicode 字符也不起作用。

我该如何解决这个问题？

编辑：我使用的是蟾蜍 9.0.0.160。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-27T22:01:24.570

Quest 官方声明，他们目前不完全支持 Unicode，但他们承诺在 2009 年提供完整的 Unicode 版本的 Toad：[http ://www.quest.com/public-sector/UTF8-for-Toad-for-Oracle.aspx](http://www.quest.com/public-sector/UTF8-for-Toad-for-Oracle.aspx)

Toad 9.6 已知问题的摘录：

> Toad 的数据层不支持 UTF8/Unicode 数据。大多数非 ASCII 字符将在数据网格中显示为问号，并且不应产生任何转换错误，但在 Toad 报告中除外。Toad Reports 将产生错误并且不会在 UTF8 / Unicode 数据库上运行。因此，不建议在 Toad 的数据网格中编辑非 ASCII Unicode 数据。此外，一些用户仍然收到“ORA-01026：绑定列表中大小 > 4000 的多个缓冲区”消息，这似乎也与 Unicode 数据有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-20T14:59:52.077

我们从未找到解决蟾蜍同样问题的方法。最后，大多数人使用 Enterprise Manager 来解决这些问题。抱歉，我无法提供更多帮助。

# unix - 如何从 Unix 命令行递归解压缩目录及其子目录中的档案？

> ID：107995
> 
> 赞同：85
> 
> 时间：2008-09-20T12:06:29.903
> 
> 标签：unix, recursion, spaces, unzip

该`unzip`命令没有递归解压缩档案的选项。

如果我有以下目录结构和档案：

```
/母亲/爱.zip
/坏血病/Sea Dogs.zip
/坏血病/治愈/酸橙.zip

```

我想将所有档案解压缩到与每个档案同名的目录中：

```
/母亲/爱/1.txt
/母亲/爱.zip
/坏血病/海狗/2.txt
/坏血病/Sea Dogs.zip
/坏血病/治愈/酸橙/3.txt
/坏血病/治愈/酸橙.zip

```

我会发出什么命令或命令？

重要的是，这不会阻塞包含空格的文件名。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2010-02-23T12:50:56.547

如果您想将文件提取到相应的文件夹中，您可以试试这个

```
find . -name "*.zip" | while read filename; do unzip -o -d "`dirname "$filename"`" "$filename"; done; 
```

可以处理高 I/O 的系统的多处理版本：

```
find . -name "*.zip" | xargs -P 5 -I fileName sh -c 'unzip -o -d "$(dirname "fileName")/$(basename -s .zip "fileName")" "fileName"' 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2008-09-20T12:08:31.507

这是一种将所有 zip 文件提取到*工作目录*并涉及 find 命令和 while 循环的解决方案：

```
find . -name "*.zip" | while read filename; do unzip -o -d "`basename -s .zip "$filename"`" "$filename"; done; 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-03-13T16:02:40.187

正确处理所有文件名（包括换行符）并提取到与文件位于同一位置的目录中的解决方案，只是删除了扩展名：

```
find . -iname '*.zip' -exec sh -c 'unzip -o -d "${0%.*}" "$0"' '{}' ';' 
```

`.jar`请注意，您可以通过使用添加它们轻松地使其处理更多文件类型（例如） `-o`，例如：

```
find . '(' -iname '*.zip' -o -iname '*.jar' ')' -exec ... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-20T12:20:06.690

您可以在单个命令行中使用 find 和 -exec 标志来完成这项工作

```
find . -name "*.zip" -exec unzip {} \; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-29T10:47:18.297

这可以按照我们的意愿完美运行：

解压文件：

```
find . -name "*.zip" | xargs -P 5 -I FILENAME sh -c 'unzip -o -d "$(dirname "FILENAME")" "FILENAME"' 
```

上面的命令不会创建重复的目录。

删除所有 zip 文件：

```
find . -depth -name '*.zip' -exec rm {} \; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-20T12:11:06.070

使用 -r 标志的类似 gunzip 的东西？...

递归遍历目录结构。如果命令行上指定的任何文件名是目录，gzip 将进入该目录并压缩它在其中找到的所有文件（或者在 gunzip 的情况下解压缩它们）。

[http://www.computerhope.com/unix/gzip.htm](http://www.computerhope.com/unix/gzip.htm)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-10T23:41:38.497

如果您使用的是 cygwin，则 basename 命令的语法略有不同。

```
find . -name "*.zip" | while read filename; do unzip -o -d "`basename "$filename" .zip`" "$filename"; done; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-14T10:06:13.603

我意识到这已经很老了，但是当我在寻找类似问题的解决方案时，它是谷歌的第一批热门产品之一，所以我会在这里发布我所做的。我的场景略有不同，因为我基本上只是想完全炸开一个罐子，以及其中包含的所有罐子，所以我编写了以下 bash 函数：

```
function explode {
    local target="$1"
    echo "Exploding $target."
    if [ -f "$target" ] ; then
        explodeFile "$target"
    elif [ -d "$target" ] ; then
        while [ "$(find "$target" -type f -regextype posix-egrep -iregex ".*\.(zip|jar|ear|war|sar)")" != "" ] ; do
            find "$target" -type f -regextype posix-egrep -iregex ".*\.(zip|jar|ear|war|sar)" -exec bash -c 'source "<file-where-this-function-is-stored>" ; explode "{}"' \;
        done
    else
        echo "Could not find $target."
    fi
}

function explodeFile {
    local target="$1"
    echo "Exploding file $target."
    mv "$target" "$target.tmp"
    unzip -q "$target.tmp" -d "$target"
    rm "$target.tmp"
} 
```

请注意，`<file-where-this-function-is-stored>`如果您将其存储在一个文件中，而不是像我碰巧那样为非交互式外壳读取的文件中，则需要哪个。如果您将函数存储在加载在非交互式外壳上的文件中（例如，`.bashrc`我相信），您可以删除整个`source`语句。希望这会对某人有所帮助。

一点警告 -`explodeFile`也会删除压缩文件，您当然可以通过注释掉最后一行来更改它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-28T19:22:04.390

另一个有趣的解决方案是：

```
DESTINY=[Give the output that you intend]

# Don't forget to change from .ZIP to .zip.
# In my case the files were in .ZIP.
# The echo were for debug purpose.

find . -name "*.ZIP" | while read filename; do
ADDRESS=$filename
#echo "Address: $ADDRESS"
BASENAME=`basename $filename .ZIP`
#echo "Basename: $BASENAME"
unzip -d "$DESTINY$BASENAME" "$ADDRESS";
done; 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-06-26T00:59:52.967

这对我有用

```
def unzip(zip_file, path_to_extract):
    """
    Decompress zip archives recursively
    Args:
        zip_file: name of zip archive
        path_to_extract: folder where the files will be extracted
    """
    try:
        if is_zipfile(zip_file):
            parent_file = ZipFile(zip_file)
            parent_file.extractall(path_to_extract)
            for file_inside in parent_file.namelist():
                if is_zipfile(os.path.join(os.getcwd(),file_inside)):
                    unzip(file_inside,path_to_extract)
            os.remove(f"{zip_file}")
    except Exception as e:
        print(e) 
```*`**********