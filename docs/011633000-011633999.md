# StackOverflow 问答 11633000-11633999

# c# - 使用 FakeItEasy 进行伪造的方法调用引发事件？

> ID：11633000
> 
> 赞同：4
> 
> 时间：2012-07-24T14:25:59.663
> 
> 标签：c#, mocking, fakeiteasy

我正在尝试按照以下方式做一些事情：

```
A.CallTo(() => fakeTimer.Start()).Invokes(() => 
    fakeTimer.Elapsed += Raise.With<ElapsedEventArgs>(ElapsedEventArgs.Empty).Now); 
```

这`fakeTimer`是一个假的`ITimer`，每个[这个答案](https://stackoverflow.com/a/9088455/8205)的包装接口。

~~显然这是行不通的，因为我不能在Expersion Tree 中进行分配。~~

我实际上想要实现的是`Start`在调用该方法时模拟引发计时器事件。这样我就可以断言`Start`确实发生了调用。

~~任何（替代）想法？~~

**编辑**我是个白痴，错在我自己！我不小心添加了一个额外的`A.CallTo`，我不应该添加的。我不会删除这个问题，而是保留它以授予[Patrik Hägne](https://stackoverflow.com/users/46187/patrik-hagne)应有的声誉 :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T09:30:41.577

我不太确定你想做什么，是这样吗？？？

```
A.CallTo(() => fakeTimer.Start()).Invokes(() => 
    fakeTimer.Elapsed += Raise.With<ElapsedEventArgs>(ElapsedEventArgs.Empty).Now); 
```

# sql - 过程中的 Oracle 合并语句无法识别 using 子句中的变量

> ID：11633005
> 
> 赞同：0
> 
> 时间：2012-07-24T14:26:20.167
> 
> 标签：sql, oracle, dynamic, plsql, upsert

> **可能重复：**
> [UPSERT 到具有动态表名的表中](https://stackoverflow.com/questions/6762376/upsert-into-table-with-dynamic-table-name)

以下过程被声明为：

```
CREATE OR REPLACE  
PROCEDURE STUFF(tableToQuery VARCHAR2) AS  
BEGIN  
    MERGE INTO myTable m  
    USING (select * from tableToQuery)  t  
    ON (m.id = t.id)  
...  --other stuff
END STUFF; 
```

我收到一个 ORA-00903 错误，指出表名无效。我的问题是如何获取驻留在其中的值`tableToQuery`以等同于 select 语句中的有效表名？假设我提前不知道表名。

**更新**

该函数现在可以编译，但是我目前在函数末尾收到未知关键字错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:35:04.327

您需要使用动态 SQL：即在字符串中构造您的 SQL 语句，然后将该字符串传递给 Oracle 以使用该`execute immediate`语句执行。

就像是

```
CREATE OR REPLACE  
PROCEDURE STUFF(tableToQuery IN VARCHAR2) AS
  s varchar2(100);
BEGIN
  s := 'MERGE INTO myTable m'
    || ' USING (select * from ' || tableToQuery || ')  t'
    || ' ON (m.id = t.id)';
  EXECUTE IMMEDIATE s;
  --other stuff
END STUFF; 
```

应该为您解决问题。

注意不要在参数`tableToQuery`中传递来自最终用户（尤其是 Web 上的用户）的未经验证的数据，否则您将遇到 SQL 注入漏洞！

# firebase - Firebase child_removed 未被调用

> ID：11633008
> 
> 赞同：0
> 
> 时间：2012-07-24T14:26:28.447
> 
> 标签：firebase

这是我的代码的基本思想。我从我的实际代码中删除了很多额外的东西，但它主要是 css - 它都不应该对此产生任何影响......

```
listRef.on('child_removed', function(childSnapshot, prevChildName) {
    alert('child removed!');
});

listRef.on('child_added', function(childSnapshot, prevChildName) {
    itemRef = childSnapshot.ref();

    alert('child added!);

    itemRef.on('value', function(snapshot){
        alert('item value changed!');

        var name = snapshot.val().name;  // if I remove this line, child_removed is called
        $("#name").html(name);
    });
});

$("#button").click(function() {
    itemRef.remove();
}); 
```

问题是，`$("#button")`点击时，itemRef 会从 Firebase 中的 listRef 中删除，但该`'child_removed'`事件永远不会触发......如果我取出

```
driveRef = undefined; 
```

然后`child_removed`被称为...

其他一切正常 -`$("#name")`已更新，`alert()`我用来测试它的所有对话框都工作正常 - 唯一的问题是`child_removed`没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:38:14.743

我认为加藤的评论是正确的。如果您查看浏览器开发工具 javascript 控制台，或者最好将其设置为在所有异常情况下中断（例如[Chrome 的说明](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#js_exceptions)），我敢打赌您会发现您的“值”回调正在使用 snapshot.val() == 调用null 当孩子被移除时，因此您的代码会引发异常，这会阻止 Firebase 引发更多事件（即您的 child_removed 事件）。

我们计划进行一些功能性工作，以使 Firebase 对引发异常的事件回调更加宽容，但目前的修复是在您的“值”回调中检查 snapshot.val() == null。

# mongodb - 社交游戏地图瓷砖存储

> ID：11633012
> 
> 赞同：2
> 
> 时间：2012-07-24T14:26:46.100
> 
> 标签：mongodb, game-engine

我正在为社交游戏开发原型，我使用 mongodb 作为存储引擎。我想知道在 mongo 集合中存储带有关联图块（状态/类型等）的地图图块是否是一种好方法。

地图：{0：{类型：草，状态：收获，last_action_date：2012-01-12}1：{...} ....44：{...}}

也许平面文件应该更好？我不知道将瓦片地图存储在像 mongo 这样的数据库中的最佳做法。

这样我就可以通过一个请求获取所有地图图块以及与图块关联的所有状态......（每个图块都用一个数字索引，允许确定图块的 X/Y 坐标）

有人在mongodb中使用这种系统吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T17:57:59.417

Mongo 中的数据结构应由您需要如何写入、访问和/或修改该数据来确定。也许将整个地图作为子文档的双数组放在单个文档中是有意义的（仅适用于小地图）。也许将地图的每个图块存储为单个文档更有意义（这似乎更有可能）。

如果您将图块存储为单独的文档，则为它们提供一个通用键，例如“map：'map1'”，以便您可以一次提取整个地图。同时，将图块存储为单独的文档的强大之处在于您无需一次加载整个地图。而是给每个图块一个公共键，例如“map1”（这样您就可以在同一个集合中存储多个地图），包括一个 x 和 y 坐标（假设 2d 空间），并在这三个字段上创建一个唯一索引。有了这个，您可以快速有效地只提取您随时需要使用的图块，并从内存中删除当前计算或演示不需要的图块。

# c# - 如何使用 Entity Framework 对具有不同名称的属性执行常见的 LINQ 查询？

> ID：11633016
> 
> 赞同：0
> 
> 时间：2012-07-24T14:26:54.547
> 
> 标签：c#, linq, entity-framework-4

使用 Entity Framework 4.0，我用生成的代码定义了两个简单的实体，如下所示：

```
public partial class Person : EntityObject
{
   public string Name { ... generated code ... }
   public DateTime Birthday { ... generated code ... }
}

public partial class Sale : EntityObject
{
   public int ProductId { ... generated code ... }
   public DateTime DateSold { ... generated code ... }
} 
```

这个特殊的例子是人为的，但代表了我面临的一个真正的问题。通常在我的代码中，我想将实体限制为出现在特定日期范围内的实体。所以我有很多实例：

```
entities.Sales.Where(sale => sale.DateSold > startDate && sale.DateSold < endDate);

entities.People.Where(person => person.Birthday > startDate && person.Birthday < endDate); 
```

**是否可以设置一个可以处理此问题的通用方法？** 就像是

`entities.Sales.WithinRange(startDate, endDate);`将是完美的，我意识到我可以为 each 设置一个扩展方法`IQueryable<T>`，但我希望能够灵活地在公共代码中使用 WithinRange() 方法。例如：

```
public static IQueryable<T> GetSortedNonNullObjectsInRange<T>(this IQueryable<T> data, DateTime startDate, DateTime endDate) where T : IHasDateDefined
{
   return data.Where(entity => entity != null).WhereInRange(startDate, endDate).OrderBy(entity => entity.Date);
} 
```

当我尝试使用通用接口（如 IHasDateDefined）时，接口上的 Date 属性会根据需要返回生日或 DateSold，但随后实体框架会抛出无法构建表达式的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:55:14.233

我认为您可以通过以下方式实现您想要的：

*   在您的实体对象上添加一个具有以下签名的静态方法： Expression> CheckWithinRange (DateTime startDate, DateTime endDate) （是的，在 Person 中，T 实际上应该替换为“Person”）

*   使用 .tt 脚本扩展您的上下文，以便为每个表（例如 Person 和 Sale）添加一个方法，该方法使用静态添加的方法将实体对象的表达式添加到请求 IQueryable。您确实也可以为特定的 IQueryable<...> 类型创建扩展方法。

例子。

添加到 Person 类的方法：

```
Expression<Func<Person, bool>> CheckWithinRange (DateTime startDate, DateTime endDate) {
    return p => startDate <= p.Birthday && p.Birthday <= endDate;
} 
```

添加到 IQueryable 的扩展方法

```
public IQueryable<Person> WithinRange(this IQueryable<Person> data, DateTime startDate, DateTime endDate) {
    return data.Where(Person.CheckWithinRange(startDate, endDate));
} 
```

因此，不要向每个返回要检查的属性的类添加属性，而是将检查的逻辑添加到每个类。

# ruby-on-rails - 如何在单个 Rails 应用程序中为相同的错误代码（例如 404）呈现两个不同的错误页面？

> ID：11633017
> 
> 赞同：1
> 
> 时间：2012-07-24T14:26:55.950
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，其中有两个部分，因此我想为错误页面使用两种不同的布局。

例如，如果错误来自第 1 节，则 layout1 / 不同页面应用于错误 (404, 500)。

如果错误来自第 2 部分，则应将 layout2 / 不同页面用于错误（404、500）。

我编写了代码来定义错误页面，启用了 erb 和 ruby​​ 代码。

在应用程序.rb

```
config.exceptions_app = self.routes 
```

在路线.rb

```
match "/404", :to => "errors#error_404"
match "/500", :to => "errors#error_500" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:31:54.690

**更新**

稍微想了想。如果您只有几种类型的错误，那么这样做怎么样？

在你`routes.rb`的**最后一行**，添加一个

`match '/my_segment/*path', :to => 'errors#not_found'`

这应该匹配任何未定义的路径（通常会抛出`ActionController::RoutingError`）并将其推送到您的全局错误页面。

您可以使用上面的段通配符玩游戏以获得正确的路径。这不应该影响您的预定义路径，例如`mydomain.com/controller1`.

下面是一种更细粒度的控制方法。

这将帮助您匹配来自`mydomain.com/some_controller/bad_params`

```
def firstController < ApplicationController 
  def method_in_first_controller
    # Do something here
    rescue
      @error = # Error object here
      render :template=>"some_error_template", :status => :not_found # In specific action
  end
end

def secondController < ApplicationController 
  rescue_from ActiveRecord::RecordNotFound, :with => :rescue_not_found # In secondController

  def method_in_second_controller 
    # Do something  
  end

  protected
  def rescue_not_found
    @error = # Error object here
    render :template => 'some_error_template', :status => :not_found
  end

end

def ApplicationController 
  rescue_from ActiveRecord::RecordNotFound, :with => :rescue_not_found # Globally

  protected
  def rescue_not_found
    @error = # Error object here
    render :template => 'application/not_found', :status => :not_found
  end
end 
```

使用推荐人似乎无济于事，对于昨天的错误答案感到抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:45:55.620

在您的错误控制器中，您可以检查谁是引荐来源并基于此进行条件布局

# matlab - 在matlab中用函数查找和替换零

> ID：11633020
> 
> 赞同：0
> 
> 时间：2012-07-24T14:27:05.960
> 
> 标签：matlab, replace, find, sum

再一次，对不起，如果之前有人问过这个问题，如果它太具体了，但我很困惑，找不到解决方案。

我有一个名为 2、4 和 16 的结构的 3 个成员的矩阵（在第 1 列中），它们的值沿着它们的相对距离，例如成员 2 在开始处有值，0m，然后在 0.5m，然后在其长度结束处1.5m，其中成员 4 从 0m 等开始。所以我的矩阵如下所示：

```
2   0     125
2   0.5   25
2   1.5   365
4   0     25
4   0.6   57
16  0     354
16  0.2   95
16  0.8   2 
```

我想创建一个矩阵，该矩阵具有所有成员 2、4 和 16 的总距离：

```
2   0     125
2   0.5   25
2   1.5   365
4   1.5   25
4   2.1   57
16  2.1   354
16  2.3   95
16  3.1   2 
```

有什么办法可以在matlab中做到这一点？就像可能找到第一个零并将其上方的值添加到下面的所有其余值然后找到下一个零值等等？

如果不清楚，请告诉我，我意识到这有点令人困惑，但不太确定如何更好地解释它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:00:22.883

我想出了以下内容：

```
idx = find(diff(M(:,1)));
v = zeros(size(M,1),1);
v(idx+1) = M(idx,2);
M(:,2) = M(:,2) + cumsum(v); 
```

结果：

```
M =
            2            0          125
            2          0.5           25
            2          1.5          365
            4          1.5           25
            4          2.1           57
           16          2.1          354
           16          2.3           95
           16          2.9            2 
```

请注意，第二列中的最后一个值与您所描述的（`2.9`vs `3.1`）不一致。要么你有错字，要么我还没明白...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:57:22.263

```
data = [2   0     125;
        2   0.5   25;
        2   1.5   365;
        4   0     25;
        4   0.6   57;
        16  0     354;
        16  0.2   95;
        16  0.8   2];

idx0 = find(data(:,2)==0);
idx0 = idx0(2:end); %ignore first zero of first member, doesn't need an offset

offset = data(idx0-1,2);
N = size(data,1);
for ii=1:numel(idx0)
    idxs = 1:N>=idx0(ii);
    data(idxs,2) = data(idxs,2) + offset(ii);
end 
```

# automapper - Automapper 表达式必须解析为顶级成员

> ID：11633021
> 
> 赞同：28
> 
> 时间：2012-07-24T14:27:06.263
> 
> 标签：automapper, .net, automapper-2

我正在使用自动映射器来映射源对象和目标对象。当我映射它们时，我得到以下错误。

> 表达式必须解析为顶级成员。参数名称：lambdaExpression

我无法解决问题。

我的源和目标对象是：

```
public partial class Source
{
        private Car[] cars;

        public Car[] Cars
        {
            get { return this.cars; }
            set { this.cars = value; }
        }
}

public partial class Destination
{
        private OutputData output;

        public OutputData Output
        {            
            get {  return this.output; }
            set {  this.output= value; }
        }
}

public class OutputData
{
        private List<Cars> cars;

        public Car[] Cars
        {
            get { return this.cars; }
            set { this.cars = value; }
        }
} 
```

我必须`Source.Cars`用`Destination.OutputData.Cars`对象映射。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-17T17:25:03.700

您正在使用 ：

```
 Mapper.CreateMap<Source, Destination>()
 .ForMember( dest => dest.OutputData.Cars, 
             input => input.MapFrom(i => i.Cars)); 
```

这不起作用，因为您在 dest lambda 中使用了 2 级。

使用 Automapper，您只能映射到 1 个级别。要解决问题，您需要使用单个级别：

```
 Mapper.CreateMap<Source, Destination>()
 .ForMember( dest => dest.OutputData, 
             input => input.MapFrom(i => new OutputData{Cars=i.Cars})); 
```

这样，您可以将汽车设置到目的地。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-25T10:31:49.073

1.  定义 和 之间`Source`的映射`OutputData`。

    ```
    Mapper.CreateMap<Source, OutputData>(); 
    ```

2.  更新您的配置以`Destination.Output`使用`OutputData`.

    ```
    Mapper.CreateMap<Source, Destination>().ForMember( dest => dest.Output, input => 
        input.MapFrom(s=>Mapper.Map<Source, OutputData>(s))); 
    ```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-30T11:16:28.420

你可以这样做：

```
// First: create mapping for the subtypes
Mapper.CreateMap<Source, OutputData>();

// Then: create the main mapping
Mapper.CreateMap<Source, Destination>().
    // chose the destination-property and map the source itself
    ForMember(dest => dest.Output, x => x.MapFrom(src => src)); 
```

这就是我这样做的方式;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-14T20:35:42.213

这对我有用：

```
Mapper.CreateMap<Destination, Source>()
    .ForMember(x => x.Cars, x => x.MapFrom(y => y.OutputData.Cars))
    .ReverseMap(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-05T12:55:43.287

allrameest 在这个问题上给出的正确答案应该会有所帮助：[AutoMapper - Deep level mapping](https://stackoverflow.com/questions/15554788/automapper-deep-level-mapping)

这就是你需要的：

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(dest => dest.OutputData, opt => opt.MapFrom(i => i));
Mapper.CreateMap<Source, OutputData>()
    .ForMember(dest => dest.Cars, opt => opt.MapFrom(i => i.Cars)); 
```

使用映射器时，请使用：

```
var destinationObj = Mapper.Map<Source, Destination>(sourceObj) 
```

其中destinationObj 是Destination 的一个实例，sourceObj 是Source 的一个实例。

注意：此时您应该尝试停止使用 Mapper.CreateMap，它已过时并且很快将不受支持。

# google-chrome - 为什么我展开浏览器窗口时chrome有时无法重绘页面？

> ID：11633023
> 
> 赞同：28
> 
> 时间：2012-07-24T14:27:08.190
> 
> 标签：google-chrome, css, twitter-bootstrap, responsive-design

我目前正在开发响应式设计网站原型。到目前为止一切都很好，但是对于一件我似乎只能在 Chrome 中重现的非常奇怪的事情。扩展窗口时，有时浏览器似乎被困在状态之间，显示重复的元素和两个滚动条 - 也就是说，直到我单击浏览器窗口*之外*的某个位置，然后一切都被重绘并且看起来很好。截屏：

![在此处输入图像描述](../Images/1925ba28dd07f3a8107b16ca25abdd3c.png)

我尝试了很多“技巧”来让 chrome 以编程方式“重新调整”界面，例如更改 body 元素的填充、修改 scrollY 位置以及大约 10 个左右，但似乎什么也没做诀窍。有人对这个有经验么？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-27T08:59:56.390

这看起来像 Chrome 中的一个错误。

我搜索了 Chromium 的 bug，发现了一些类似的：

*   [问题 516127：在浏览器上方移动时在 osx 上渲染工件（停靠栏、其他窗口等）](https://code.google.com/p/chromium/issues/detail?id=516127)
*   [问题 473933：视觉渲染问题](https://code.google.com/p/chromium/issues/detail?id=473933)
*   [问题 476909：页面未正确重绘](https://code.google.com/p/chromium/issues/detail?id=476909)
*   [问题 245946：调整窗口大小时内容布局不正确](https://code.google.com/p/chromium/issues/detail?id=245946)

但实际上他们似乎都没有准确地描述你的问题。如果你也这么认为，你可以[在这里报告你的错误](https://code.google.com/p/chromium/issues/list?can=2&q=rerender+os%3DMac&sort=-modified)。

请注意，这也可能与您的旧 Mac OS 版本甚至显卡有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T16:59:11.303

我在使用 cordova（混合 html5/css3 移动平台）时遇到了同样的问题，当旋转设备时，内部浏览器没有正确刷新。我有一个包含固定位置的所有内容的 div。经过一些尝试，我使用了样式宽度/高度：100%，并且在旋转浏览器时正确刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T11:12:11.980

我猜你有一个视网膜显示器 Mac 和另一个连接的外部显示器？我有时会在我的设置中看到这一点，并暂时将其缩小到这种情况。仅使用本机屏幕时，我从来没有看到它，也没有在所有屏幕配置中看到它。

尝试仅使用内置屏幕时是否会发生这种情况。如果可行，请尝试切换哪个屏幕是主屏幕或完全切换到另一个外部屏幕。

抱歉没有修复，但也许它至少会让您更接近设置中的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T14:18:57.200

我支持检查已安装插件的建议，以防发生冲突。在谷歌的论坛上，这个问题已经出现过，并计划进行错误修复。在那里阅读时注意到，他们还删除了对通过 javascript 调整浏览器窗口大小的支持：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-07T10:17:25.650

`<head>`尝试在标签之后添加这个

```
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> 
```

# jquery - jQuery 切换显示/隐藏跨度动作

> ID：11633024
> 
> 赞同：0
> 
> 时间：2012-07-24T14:27:08.773
> 
> 标签：jquery

我有以下列表：

```
 <div id="topicListContainter">
            <ul id="sList" class="sList">
                    <li id="itemList_11">
                        0\. updated  <span class="closeBox" id="11" ><img  src="images/close.png"></span>                                   
                        <div id="comment_actions" class="comment_actions" style="display: none; margin: 5px"><textarea style="width: 100%"></textarea>
                            <br>
                            <input type="text" id="date" class="date" /> <input style="margin: 5px" type="button" class="button blue" value="Save" />
                        </div>
                    </li>
                    <li id="itemList_27">
                        1\. Sta ima  <span class="closeBox" id="27" ><img  src="images/close.png"></span>                                   
                        <div id="comment_actions" class="comment_actions" style="display: none; margin: 5px"><textarea style="width: 100%"></textarea>
                            <br>
                            <input type="text" id="date" class="date" /> <input style="margin: 5px" type="button" class="button blue" value="Save" />
                        </div>
                    </li>
                    <li id="itemList_26">
                        2\. Update 22  <span class="closeBox" id="26" ><img  src="images/close.png"></span>                                   
                        <div id="comment_actions" class="comment_actions" style="display: none; margin: 5px"><textarea style="width: 100%"></textarea>
                            <br>
                            <input type="text" id="date" class="date" /> <input style="margin: 5px" type="button" class="button blue" value="Save" />
                        </div>
                    </li>
                        ..... 
```

如何`<div>` `comment_actions`在单击操作时切换和显示/隐藏`closeBox`

注意：每个`<li>`都有自己的`comment_actions`div

到目前为止，我已经尝试过类似的东西：

```
jQuery('.closeBox').live('click', function() {   
        jQuery(this).next('div').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:38:46.117

**首先，[小提琴](http://jsfiddle.net/Ec6dc/3/)。**

我会`data`在您的评论块中添加一个与被点击`div`的 id 相匹配的属性。`span`然后，您可以使用数据选择器选择方法以使用匹配属性`.toggle()`显示隐藏任意数量的其他块。`div``data`

我还`display:none;`从`closebox`跨度中删除了它，因此它实际上可以被点击。

```
0\. updated  
<!-- Note the data-comments property added here -->
<span class="closeBox" id="11" data-comments="11" >
    <img  src="images/close.png">
</span>                                   

<!-- Note the data-comments property added here -->
<div id="comment_actions" data-comments="11" class="comment_actions" style="display: none; margin: 5px">
    <textarea style="width: 100%"></textarea>
    <br>
    <input type="text" id="date" class="date" /> 
    <input style="margin: 5px" type="button" class="button blue" value="Save" />
</div>​

$(document).ready(function(e) {
    $('.closeBox').on('click', function(e) {
        e.preventDefault();
        var $target = $(e.target).parent();
        $('div[data-comments="' + $target.data('comments') + '"]').toggle();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:33:06.363

你的代码很接近。

`display: none`从中删除`span.closedBox`并尝试以下操作：

```
jQuery('.closeBox').live('click', function() {   
        jQuery(this).next('div.comment_actions').toggle();
}); 
```

此外，避免`id`在多个元素中使用属性值。（没有重复的`id`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:34:43.133

```
$('.closeBox').bind('click', function() {
  $('.comment_actions').toggle();
}); 
```

如果您想要更多功能，请查看：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# iphone - EXC_BAD_ACCESS -iPhone 目标 c

> ID：11633026
> 
> 赞同：2
> 
> 时间：2012-07-24T14:27:20.873
> 
> 标签：iphone, objective-c, ios, twitter, exc-bad-access

我一直在尝试这个 Twitter api 的东西，它真的很混乱......

我不断使用以下代码获得 EXC_BAD_ACCESS 错误访问...这里有什么问题？

```
NSURL *followingURL = [NSURL URLWithString:@"https://api.twitter.com/1/users/lookup.json"];
// Pass in the parameters (basically '.ids.json?screen_name=[screen_name]')
id fromIntToNum = [NSNumber numberWithInteger: friID];
NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:@"159462573", @"user_id", nil];
// Setup the request
twitterRequest = [[TWRequest alloc] initWithURL:followingURL
                                                parameters:parameters
                                             requestMethod:TWRequestMethodGET];
// This is important! Set the account for the request so we can do an authenticated request. Without this you cannot get the followers for private accounts and Twitter may also return an error if you're doing too many requests
[twitterRequest setAccount:theAccount];
// Perform the request for Twitter friends
[twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if (error) {
        /*
        // deal with any errors - keep in mind, though you may receive a valid response that contains an error, so you may want to look at the response and ensure no 'error:' key is present in the dictionary
        NSLog(@"%@",error);*/
    } else {
        /*NSError *jsonError = nil;
        // Convert the response into a dictionary
        NSDictionary *twitterGrabbedUserInfo = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONWritingPrettyPrinted error:&jsonError];
        // Grab the Ids that Twitter returned and add them to the dictionary we created earlier
        NSLog(@"%@", [twitterGrabbedUserInfo objectForKey:@"screen_name"]);*/
    }

}]; 
```

我分隔了我的代码失败的行...

什么可能导致这个 Twitter API 问题？

以下行导致崩溃:::

```
[twitterRequest performRequestWithHandler:^(NSData *responseData,
                NSHTTPURLResponse *urlResponse, NSError *error) { 
```

我有时也会收到此错误：

```
[__NSCFNumber credentialForAccount:]: unrecognized 
```

**更新：我注释掉了处理程序，我做了 TwitterRequest 和 ivar，但它仍然崩溃......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:50:18.693

在您的块中，您会查找错误，但如果遇到错误，则将其记录并继续。您应该输入“else”语句，并且只有在没有错误的情况下才继续。

为什么不尝试注释掉处理程序中的所有代码 - 不要做任何事情 - 看看你是否遇到了崩溃。然后尝试仅使用错误代码。然后尝试使用 JSON 序列化，最后是最后一行。如果你能找到导致问题的部分，那将有所帮助。

另外，我怀疑 performRequestWithHandler: 不会阻塞，但希望您在请求已完成的块内通知您的班级。如果是这样，则意味着“TWRequest *twitterRequest”应该是一个 ivar 或属性，并且您需要允许在处理程序完成时调用某些方法。您的崩溃可能是由于 ARC 在对象运行时重新分配了您的对象。

编辑：请注意，TWRequest 类描述说：“使用 initWithURL:parameters:requestMethod: 方法初始化一个新创建的传递所需属性值的 TWRequest 对象。”它说 PLURAL 属性，意思不止 1。可能是它还需要“credentialForAccount”属性吗？您必须阅读 twitter 文档才能找到所有必需的属性。

EDIT2：好吧，我们甚至不知道你是否能达到你的处理程序。把一个 NSLog 放在那里，但我怀疑它永远不会走那么远。如果为真，则留下三种可能性：

a) 它不喜欢这个 URL（虽然这看起来不错）

b）您缺少一些它期望的参数

c) id 不喜欢“theAccount”对象——它是一个有效的 ACAccount 对象吗？尝试 NSLogging 它。

它必须是这三件事之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:00:24.943

我在 iOS5 和 TWRequest 中遇到了类似的问题，问题原来是在调用请求处理程序块之前释放了 ACAccountStore。以下代码为我解决了这个问题：

```
__weak ACAccountStore *wAccountStore = accountStore;
[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    __strong ACAccountStore *sAccountStore = wAccountStore;

    // handle the finished request here

    // to silence Xcode warning 'unused variable'
    // not necessary for releasing sAccountStore, 
    // it will go out of scope anyway when the block ends
    sAccountStore = nil;
}]; 
```

这样，accountStore 将被保留，直到块完成。

# sql - SQL计数聚合查询

> ID：11633028
> 
> 赞同：0
> 
> 时间：2012-07-24T14:27:31.053
> 
> 标签：sql, aggregate, counting

我有以下查询：

```
select prop_id
    , sum(amount)bnp_spent
    , (select count(*) from cost where cost_type = 'Direct Cost')direct
    , (select count(*) from cost where cost_type = 'Burden Cost')burden
from cost                                     
group by prop_id 
```

子查询不是我想要的。通过从成本表中选择，我得到所有道具的直接或负担成本总数

我想要的是每个 prop_id 的直接成本和负担成本的计数

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:30:12.673

试试这个：

```
select prop_id, sum(amount) as bnp_spent,
       sum(case when cost_type = 'Direct Cost' then 1 else 0 end) as direct,
       sum(case when cost_type = 'Burden Cost' then 1 else 0 end) as burden
from cost
group by prop_id 
```

# google-visualization - Google chart api折线图：单位不匹配点

> ID：11633035
> 
> 赞同：1
> 
> 时间：2012-07-24T14:27:47.683
> 
> 标签：google-visualization, linechart

![单位与点不匹配的折线图](../Images/962ef5b1450c80a1e9f616e40b3d3ebd.png)

我有一个谷歌图表 api 折线图，其中水平轴单位与图表上的对应点不匹配。看图片。

我使用了那些确保 h 轴不使用十进制数字的选项：

```
hAxis: { title: 'some title', format: '#' } 
```

我没有使用其他相关选项，也没有在文档中找到任何似乎可以解决问题的选项..

**更新：** 生成图表的代码：

```
var options = { title: '<%# Strings.GameStatisticsView_GameProgressChart %>', hAxis: { title: '<%# Strings.ScoreBoard_RoundNr %>', format: '#' }, vAxis: { title: '<%# Strings.Common_Points %>' }, backgroundColor: { fill: 'transparent' }, elementId: 'GameProgressChart', column1: 'Round Nr' };
drawLineChart(response.d.Data, options);

...

drawLineChart: function (data, options) {
    var dataTable = new google.visualization.DataTable();
    dataTable.addColumn('number', options.column1);
    for (var j = 0; j < data.key.length; j++) {
        dataTable.addColumn('number', data.key[j]);
    }
    dataTable.addRows(data.value.length);
    for (var i = 0; i < data.value.length; i++) {
        dataTable.setValue(i, 0, data.value[i].key);
        for (var k = 0; k < data.key.length; k++) {
            dataTable.setValue(i, k+1, data.value[i].value[k]);
        }
    }

    var chart = new google.visualization.LineChart(document.getElementById(options.elementId));        
    chart.draw(dataTable, options);   
}, 
```

**评论中的解决方案**：您的 x 轴中的步骤不能硬编码，但您可以硬编码有多少网格线，请参阅[链接](https://stackoverflow.com/questions/9104925/how-to-set-axis-step-in-google-chart)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:08:25.300

我怀疑你仍然需要这个答案，但如果有人处于同样的情况..

`format: '#'`将值格式强制为 1 位，因此示例中的 3 很可能在 3.3 左右，但由于应用了格式，您只能看到整数部分。

# objective-c - Objective C +如何创建一个新线程并向其发布消息

> ID：11633038
> 
> 赞同：2
> 
> 时间：2012-07-24T14:27:56.993
> 
> 标签：objective-c, multithreading

我在 Objective C 中创建新线程时遇到问题

```
- (void) create
{
     NSLog( @"Hello World from create \n" );
     NSThread* evtThread = [ [NSThread alloc] initWithTarget:self
                            selector:@selector( saySomething )
                          object:nil ];

    [ evtThread start ];
}

 - (void) saySomething
 {
    //NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    printf( "Hello world from new thread \n");
    NSLog( @"Hello World from new thread \n" );
    //[pool release]; 
 } 
```

但看起来方法 saySomething 没有被调用。控制台中没有打印任何内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T14:38:19.950

您确定要显式线程控制吗？很可能你没有。GCD怎么样？

```
- (void) create
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self saySomething];
    });
} 
```

至于您的问题，如果您使用 ARC，则线程可能会在您 return from 后立即被释放`create`，因此它没有机会执行选择器。您必须将线程存储到`strong`实例变量或类似的东西中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T14:33:10.840

尝试以这种方式启动线程：

```
[self performSelectorInBackground:@selector(saySomething) withObject:nil] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T14:32:31.163

```
- (void) create
{
     NSLog( @"Hello World from create \n" );
    [self performSelectorInBackground:@selector(saySomething) withObject:nil];
}

- (void) saySomething
 {
    //NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    printf( "Hello world from new thread \n");
    NSLog( @"Hello World from new thread \n" );
    //[pool release]; 
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T16:45:29.810

谢谢你的回复。这可能是一场虚惊。除了代码中的所有错误之外，我认为示例本身是不正确的。在“创建方法”之后，应用程序立即退出，因此它没有时间从新线程中打印出东西。

这就是我所做的。我从这个链接复制了代码

[http://softpixel.com/~cwright/programming/threads/threads.cocoa.php](http://softpixel.com/~cwright/programming/threads/threads.cocoa.php)

它工作得很好。一旦我删除了“for循环”并只放入了打印语句，新线程就没有输出。所以我在睡眠中添加了，现在我看到了来自新线程的消息。这是新代码。

```
- (void) create
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    [NSThread detachNewThreadSelector:@selector(aMethod:) toTarget:[Activ class]     
    withObject:nil];
    NSLog( @"Hello from create. \n" ); 
    sleep(1);
    [pool release]; 
}

+(void)aMethod:(id)param
{
    NSLog( @"Hello from new thread. \n" );
} 
```

这给了我以下输出。

```
Running…
2012-07-24 11:21:32.769 [2065:20f] Hello from new thread. 
2012-07-24 11:21:32.769 [2065:a0f] Hello from create. 

Debugger stopped.
Program exited with status value:0. 
```

如果我注释掉睡眠，那么我会得到以下输出。

```
Running…
2012-07-24 11:21:23.080 [2038:a0f] Hello from create. 

Debugger stopped.
Program exited with status value:0. 
```

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T15:24:54.590

我同意使用 dispatch_async() 或 performSelectorInBackground 可能是您想要的。但是，就为什么您的代码不产生任何输出而言，方法签名应该只有一个参数。将方法更改为

```
-(void) saySomething:(id)foo; 
```

并将选择器更改为

```
selector:@selector(saySomething:) 
```

“要发送到目标的消息的选择器。此选择器只能接受一个参数，并且不能有返回值。” - [NSThread 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsthread_Class/Reference/Reference.html#//apple_ref/occ/instm/NSThread/initWithTarget%3aselector%3aobject%3a)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-26T06:04:37.087

请按以下方式尝试。

```
- (void) create
{
     NSLog( @"Hello World from create \n" );

[NSThread detachNewThreadSelector:@selector(saySomething) toTarget:self withObject:nil];

}

 - (void) saySomething
 {

    printf( "Hello world from new thread \n");
    NSLog( @"Hello World from new thread \n" );

 } 
```

# java - 我怎么知道 javax.jnlp.PrintService 何时完成打印我的 Printable 对象

> ID：11633039
> 
> 赞同：1
> 
> 时间：2012-07-24T14:28:00.543
> 
> 标签：java, printing, jnlp

我正在使用 JNLP 在小程序中打印一些图像。我将一个`Printable`对象传递给一个`javax.jnlp.PrintService`实例并调用`PrintService.print()`. 有什么方法可以知道此操作何时完成？

查看[PrintService 源代码](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/jnlp/PrintServiceImpl.java.html)的第 116 行，它似乎启动了一个打印线程，并且没有附加任何东西来跟踪它。

在 Java 的其他部分似乎有[跟踪打印操作](http://examples.javacodegeeks.com/desktop-java/print/determine-that-print-job-has-finished)的机制，但我在浏览器小程序的上下文中使用其他打印机制没有成功。（用户经常对安全性唠叨不休）

是否可以在已签名的 Java 小程序中打印某些内容，而不让用户担心安全性，并且知道打印操作何时完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:55:14.597

我设法通过从 using 切换到 using 来解决这个`javax.jnlp.PrintService`问题`javax.print.PrintService`。使用后者允许您附加一个 PrintJobAdapter 来监视打印作业的状态。请参阅[此](https://stackoverflow.com/questions/3687184/java-check-if-file-is-in-print-queue-in-use)堆栈溢出问题。

所有这些在 JNLP 部署的小程序中都是完全可以接受的，只要小程序是签名的。

# ruby-on-rails - 为“actionmailer”获取未定义的方法“名称”：安装 Webistrano 时的字符串

> ID：11633041
> 
> 赞同：3
> 
> 时间：2012-07-24T14:28:04.197
> 
> 标签：ruby-on-rails, webistrano

当我尝试在 Webistrano 上运行 RAKE 时，出现以下错误：

```
undefined method `name' for "actionmailer":String` 
```

我不精通 Ruby 和 RoR，但我之前已经安装并玩过很多应用程序，但我找不到问题所在。

我正在运行的命令是：

```
RAILS_ENV=production rake db:migrate --trace 
```

产生以下内容：

我真的很想知道将来诊断和解决此问题以及类似问题的最佳方法。

```
(in /srv/www/webistrano)
WARNING: 'require 'rake/rdoctask'' is deprecated.  Please use 'require 'rdoc/task' (in RDoc 2.4.2+)' instead.
at /usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/rdoctask.rb
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
undefined method `name' for "actionmailer":String
/srv/www/webistrano/vendor/rails/railties/lib/rails/gem_dependency.rb:268:in `=='
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:217:in `==='
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:217:in `block in matching_specs'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:411:in `block in each'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:410:in `each'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:410:in `each'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:216:in `find_all'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:216:in `matching_specs'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:238:in `to_specs'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
/srv/www/webistrano/vendor/rails/railties/lib/rails/gem_dependency.rb:73:in `add_load_paths'
/srv/www/webistrano/vendor/rails/railties/lib/initializer.rb:301:in `block in add_gem_load_paths'
/srv/www/webistrano/vendor/rails/railties/lib/initializer.rb:301:in `each'
/srv/www/webistrano/vendor/rails/railties/lib/initializer.rb:301:in `add_gem_load_paths'
/srv/www/webistrano/vendor/rails/railties/lib/initializer.rb:132:in `process'
/srv/www/webistrano/vendor/rails/railties/lib/initializer.rb:113:in `run'
/srv/www/webistrano/config/environment.rb:16:in `<top (required)>'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/srv/www/webistrano/vendor/rails/activesupport/lib/active_support/dependencies.rb:156:in `block in require'
/srv/www/webistrano/vendor/rails/activesupport/lib/active_support/dependencies.rb:521:in `new_constants_in'
/srv/www/webistrano/vendor/rails/activesupport/lib/active_support/dependencies.rb:156:in `require'
/srv/www/webistrano/vendor/rails/railties/lib/tasks/misc.rake:4:in `block in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:190:in `mon_synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:190:in `mon_synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in     `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>'
Tasks: TOP => db:migrate => environment 
```

当我运行 ruby​​ -v 时，我得到以下信息：

```
ruby 1.9.1p376 (2009-12-07 revision 26041) [i686-linux] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:15:55.270

我有这个问题。解决方案是将 ruby​​gems 降级到您支持的版本。

我需要 1.3.5 版（用于 rails 2.3.5）

所以你需要这样做：

> 宝石安装 ruby​​gems-update -v 1.3.5
> 
> update_rubygems --version=1.3.5

现在 rake 应该可以工作了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T17:50:21.020

这对我有用。

```
rvm rubygems 1.6.2 
```

# c# - 如何使用 Moq 模拟 Microsoft.Office.Interop.Excel.Range？

> ID：11633042
> 
> 赞同：6
> 
> 时间：2012-07-24T14:28:03.843
> 
> 标签：c#, .net, unit-testing, mocking, moq

我想模拟 Microsoft.Office.Interop.Excel.Range（和其他 Microsoft.Office.Interop.Excel 接口）来对我的应用程序进行单元测试。我在 C# 中使用 Moq 4.0.10827 和 .NET 4。

在我的单元测试中，我尝试按如下方式设置模拟的行为：

```
 var range = new Mock<Microsoft.Office.Interop.Excel.Range>();
        range.Setup(r => r.get_Value(1)).Returns("Something");

        var classBeingTested = new MyClass(range.Object); 
```

在进行单元测试的代码中，我使用 Range 如下：

```
 public MyClass(Range range)
    {
        var value = range[1].ToString();
    } 
```

当测试运行时，它会产生以下异常：

```
 Error: Missing method 'instance object [My.Example.Implementation.MyClass] Microsoft.Office.Interop.Excel.Range::get__Default(object,object)' from class 'Castle.Proxies.RangeProxy'. 
```

我怎样才能成功地实现这个模拟？我意识到使用[https://stackoverflow.com/a/9486226/1548950](https://stackoverflow.com/a/9486226/1548950)等模式隔离 Excel 互操作功能是一种潜在的解决方案；但是，如果能够从 Microsoft.Office.Interop.Excel 界面创建模拟，我会更高兴。

**编辑：有关此问题的更多详细信息**

好吧，这很奇怪。我创建了一个项目来测试 jimmy_keen 的建议。有用。但是，当我使用相同的建议来测试我遇到问题的项目时，它会引发以下异常：

```
Error: Missing method 'instance object [My.Example.Implementation.MyClass] Microsoft.Office.Interop.Excel.Range::get__Default(object,object)' from class 'Castle.Proxies.RangeProxy'. 
```

由于 jimmy_keen 的建议在其他项目上运行良好，我开始怀疑我正在测试代码的项目有问题。因此，我创建了一个测试解决方案来详细演示该问题：[http ://www7.zippyshare.com/v/70834394/file.html](http://www7.zippyshare.com/v/70834394/file.html)

问题的根源似乎是该项目包含另一个类（未进行单元测试），其基本上具有以下代码：

```
using Microsoft.Office.Interop.Excel;
namespace Project
{
    public class UnTestedClass
    {
        public UnTestedClass(Worksheet sheet)
        {
            var foo = sheet.Range["Description"].Column;
        }
    }
} 
```

我不明白为什么这会导致问题，因为我根本没有在单元测试中使用 UnTestedClass。我是否在如何使用 Moq 方面遗漏了什么，或者我是否偶然发现了一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T14:54:02.313

您的代码访问索引器，这就是您需要模拟的内容：

```
var range = new Mock<Microsoft.Office.Interop.Excel.Range>();
range.Setup(r => r[1, It.IsAny<object>()]).Returns("something"); 
```

请注意，`Range`索引器实际上有两个参数——因此是`It.IsAny<object>()`调用中的约束。

# android - Mono for Android是需要安装在android设备上的框架还是编译成java字节码的编译器？

> ID：11633046
> 
> 赞同：2
> 
> 时间：2012-07-24T14:28:07.980
> 
> 标签：android, mono, xamarin.android

我正在尝试了解 mono for android 的工作原理，但在官方网站上没有找到这个解释。

考虑到android读取java字节码，Mono for Android是需要安装在android设备上的框架还是编译成java字节码的编译器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T15:12:28.980

[Xamarin 网站上的这篇文章](http://docs.xamarin.com/guides/android/under_the_hood/architecture/)描述了架构是如何组合在一起的。

长话短说，没有什么可以将 C# 编译成 Java 字节码。Mono for Android 应用程序中嵌入了 Mono 运行时，它与 Dalvik（Android 的 Java 虚拟机）并行运行。Mono 运行时使用可调用包装器以便在需要时与 Dalvik 来回通信，但 .NET 对象直接与 Mono 运行时通信，而不是 Dalvik。

为了加快开发速度，调试模式下的应用程序设置为使用共享运行时以减少部署时间，并允许多个应用程序共享同一个运行时。但是，在发布模式下编译的应用程序不支持此功能，因此您发布和分发的任何应用程序都将包含其自己的嵌入式 Mono 运行时，并且不会依赖于其他任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:33:25.003

从这篇文章

[http://visualstudiomagazine.com/articles/2011/02/01/introducing-monodroid-intro.aspx/](http://visualstudiomagazine.com/articles/2011/02/01/introducing-monodroid-intro.aspx/)

> MonoTouch 创建一个本机应用程序，其中包含嵌入在应用程序中的 Mono 运行时。MonoDroid 可以创建两种类型的应用程序。第一个是单个独立应用程序，类似于 MonoTouch 应用程序，应用程序和 Mono 运行时绑定在一起。应用程序所需的一切都嵌入在应用程序中。第二种类型是使用安装在设备上的共享运行时的应用程序。这类似于 .NET 应用程序在 Windows 上的运行方式。使用这种类型的应用程序，该应用程序以及使用 MonoDroid 编写的其他应用程序可以使用共享运行时。

# java - 用 SMS 打开我的移动 Java 程序，收件箱中没有 SMS

> ID：11633049
> 
> 赞同：4
> 
> 时间：2012-07-24T14:28:13.167
> 
> 标签：java, mobile, sms

是否可以通过 SMS 打开我的移动 Java 程序？

而且我不希望这条短信存储在收件箱中。我正在寻找银行用于其移动应用程序的那种“控制短信”。我想在我的应用程序中进行相同的操作：向手机发送短信，移动设备会在屏幕上显示一条消息，该消息将由程序打开，并且此短信不应保存在收件箱中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T01:49:57.677

您确定您没有将推送通知/云设备消息误认为是 SMS 吗？

Push/C2D 消息类似于 SMS，因为中央服务器将消息发送到设备，然后许多应用程序会根据该消息显示一个弹出窗口，但实现方式完全不同。如果您没有弄错这两者，您是否有理由更喜欢使用处理方式与大多数不同的 SMS 而不是推送/C2D 消息？

这是[Apple 推送通知服务的文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。这是用于相同目的
的 Android 的[Cloud to Device Messaging 文档。](https://developers.google.com/android/c2dm/)
看看这是否能满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:23:21.387

如果您正在为功能手机寻找完全基于客户端 J2ME 的解决方案 - 然后尝试推送注册表。它在 MIDP2 以上可用。我不知道确切的细节，但您可以定义事件和触发器，它们将由手机操作系统存储并在发生特定类型的事件时自动调用。SMS 发送是单独的问题，但肯定有可用的工具。

# actionscript-3 - Flash 中 1080p 视频的最佳性能（独立投影仪）

> ID：11633052
> 
> 赞同：0
> 
> 时间：2012-07-24T14:28:16.467
> 
> 标签：actionscript-3, projector

我需要将一个可以播放全屏视频的小 Flash 站点转换为独立投影仪，该投影仪将在 Windows 7 或 xp 中运行，并且必须以 1080p 播放视频

这里有没有人有经验如何从中获得最佳性能？现在硬件加速似乎是可能的？

最好的问候和感谢所有输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:43:44.613

`flash.media.StageVideo`是硬件加速播放减少CPU负载：

[http://www.adobe.com/devnet/flashplayer/articles/stage_video.html](http://www.adobe.com/devnet/flashplayer/articles/stage_video.html)

> H.264 编解码器是舞台视频最好的朋友；使用这将确保您获得从视频解码到渲染的完整 GPU 加速。使用这种方法，不再需要回读（将数据从 GPU 发送到 CPU）来合成显示列表中的视频帧。YUV 4:2:0 格式的视频帧通过 GPU 着色器（DirectX9 或 OpenGL）转换为 RGB 并在屏幕上显示。因此，您将看到更高的像素保真度以及 CPU 和内存使用量的一些减少。

从上面的链接中，Thibault Imbert 有一个舞台视频的示例实现：

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.DisplayObject;
    import flash.display.Loader;
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageDisplayState;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.FullScreenEvent;
    import flash.events.KeyboardEvent;
    import flash.events.MouseEvent;
    import flash.events.NetStatusEvent;
    import flash.events.StageVideoAvailabilityEvent;
    import flash.events.StageVideoEvent;
    import flash.events.TimerEvent;
    import flash.events.VideoEvent;
    import flash.geom.Rectangle;
    import flash.media.SoundTransform;
    import flash.media.StageVideo;
    import flash.media.StageVideoAvailability;
    import flash.media.Video;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.system.LoaderContext;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;
    import flash.text.TextFormat;
    import flash.ui.Keyboard;

    /**
     * 
     * @author Thibault Imbert
     * 
     */ 
    [SWF(frameRate="1", backgroundColor="#000000")]
    public class SimpleStageVideo extends Sprite
    {
        private static const FILE_NAME:String = "video-file.mov";
        private static const INTERVAL:Number = 500;
        private static const BORDER:Number = 20;

        private var legend:TextField = new TextField();
        private var sv:StageVideo;
        private var nc:NetConnection;
        private var ns:NetStream;
        private var rc:Rectangle;
        private var video:Video;
        private var thumb:Shape;
        private var interactiveThumb:Sprite;
        private var totalTime:Number;

        private var videoWidth:int;
        private var videoHeight:int;
        private var outputBuffer:String = new String();
        private var rect:Rectangle = new Rectangle(0, 0, 0, BORDER);
        private var videoRect:Rectangle = new Rectangle(0, 0, 0, 0);
        private var gotStage:Boolean;
        private var stageVideoInUse:Boolean;
        private var classicVideoInUse:Boolean;
        private var accelerationType:String;
        private var infos:String = new String();
        private var available:Boolean;
        private var inited:Boolean;
        private var played:Boolean;
        private var container:Sprite;

        /**
         * 
         * 
         */     
        public function SimpleStageVideo()
        {
            // Make sure the app is visible and stage available
            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }

        /**
         * 
         * @param event
         * 
         */     
        private function onAddedToStage(event:Event):void
        {
            // Scaling
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;
            legend.autoSize = TextFieldAutoSize.LEFT;

            // Debug infos
            legend.multiline = true;
            legend.background = true;
            legend.backgroundColor = 0xFFFFFFFF;
            addChild(legend);

            // Thumb seek Bar
            thumb = new Shape();

            interactiveThumb = new Sprite();
            interactiveThumb.addChild(thumb);
            addChild(interactiveThumb);

            // Connections
            nc = new NetConnection();
            nc.connect(null);
            ns = new NetStream(nc);
            ns.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
            ns.client = this;

            // Screen
            video = new Video();
            video.smoothing = true;

            // Video Events
            // the StageVideoEvent.STAGE_VIDEO_STATE informs you if StageVideo is available or not
            stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, onStageVideoState);
            // in case of fallback to Video, we listen to the VideoEvent.RENDER_STATE event to handle resize properly and know about the acceleration mode running
            video.addEventListener(VideoEvent.RENDER_STATE, videoStateChange);

            // Input Events
            stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
            stage.addEventListener(Event.RESIZE,  onResize);
            stage.addEventListener(MouseEvent.CLICK, onClick);
        }

        /**
         * 
         * @param event
         * 
         */     
        private function onNetStatus(event:NetStatusEvent):void
        {
            if ( event.info == "NetStream.Play.StreamNotFound" )
                legend.text = "Video file passed, not available!";
        }

        /**
         * 
         * @param event
         * 
         */     
        private function onFrame(event:Event):void 
        {
            var ratio:Number = (ns.time / totalTime) * (stage.stageWidth - (BORDER << 1));
            rect.width = ratio;
            thumb.graphics.clear();
            thumb.graphics.beginFill(0xFFFFFF);
            thumb.graphics.drawRect(rect.x, rect.y, rect.width, rect.height);   
        }

        /**
         * 
         * @param event
         * 
         */     
        private function onClick(event:MouseEvent):void
        {
            if ( event.stageY >= interactiveThumb.y - BORDER && event.stageX <= stage.stageWidth - BORDER )
            {
                var seekTime:Number = (stage.mouseX - BORDER) * ( totalTime / (stage.stageWidth - (BORDER << 1) ) );
                ns.seek( seekTime );    
            }
        }

        /**
         * 
         * @param event
         * 
         */     
        private function onKeyDown(event:KeyboardEvent):void
        {   
            if ( event.keyCode == Keyboard.O )
            {
                if ( available )
                    // We toggle the StageVideo on and off (fallback to Video and back to StageVideo)
                    toggleStageVideo(inited=!inited);

            } else if ( event.keyCode == Keyboard.F )
            {
                stage.displayState = StageDisplayState.FULL_SCREEN;
            } else if ( event.keyCode == Keyboard.SPACE )
            {
                ns.togglePause();
            }
        }

        /**
         * 
         * @param width
         * @param height
         * @return 
         * 
         */     
        private function getVideoRect(width:uint, height:uint):Rectangle
        {   
            var videoWidth:uint = width;
            var videoHeight:uint = height;
            var scaling:Number = Math.min ( stage.stageWidth / videoWidth, stage.stageHeight / videoHeight );

            videoWidth *= scaling, videoHeight *= scaling;

            var posX:uint = stage.stageWidth - videoWidth >> 1;
            var posY:uint = stage.stageHeight - videoHeight >> 1;

            videoRect.x = posX;
            videoRect.y = posY;
            videoRect.width = videoWidth;
            videoRect.height = videoHeight;

            return videoRect;
        }

        /**
         * 
         * 
         */     
        private function resize ():void
        {   
            if ( stageVideoInUse )
            {
                // Get the Viewport viewable rectangle
                rc = getVideoRect(sv.videoWidth, sv.videoHeight);
                // set the StageVideo size using the viewPort property
                sv.viewPort = rc;
            } else 
            {
                // Get the Viewport viewable rectangle
                rc = getVideoRect(video.videoWidth, video.videoHeight);
                // Set the Video object size
                video.width = rc.width;
                video.height = rc.height;
                video.x = rc.x, video.y = rc.y;
            }

            interactiveThumb.x = BORDER, interactiveThumb.y = stage.stageHeight - (BORDER << 1);
            legend.text = infos;
        }

        /**
         * 
         * @param evt
         * 
         */     
        public function onMetaData ( evt:Object ):void
        {
            totalTime = evt.duration;
            stage.addEventListener(Event.ENTER_FRAME, onFrame);
        }

        /**
         * 
         * @param event
         * 
         */     
        private function onStageVideoState(event:StageVideoAvailabilityEvent):void
        {   
            // Detect if StageVideo is available and decide what to do in toggleStageVideo
            toggleStageVideo(available = inited = (event.availability == StageVideoAvailability.AVAILABLE));
        }

        /**
         * 
         * @param on
         * 
         */     
        private function toggleStageVideo(on:Boolean):void
        {   
            infos = "StageVideo Running (Direct path) : " + on + "\n";

            // If we choose StageVideo we attach the NetStream to StageVideo
            if (on) 
            {
                stageVideoInUse = true;
                if ( sv == null )
                {
                    sv = stage.stageVideos[0];
                    sv.addEventListener(StageVideoEvent.RENDER_STATE, stageVideoStateChange);
                }
                sv.attachNetStream(ns);
                if (classicVideoInUse)
                {
                    // If we use StageVideo, we just remove from the display list the Video object to avoid covering the StageVideo object (always in the background)
                    stage.removeChild ( video );
                    classicVideoInUse = false;
                }
            } else 
            {
                // Otherwise we attach it to a Video object
                if (stageVideoInUse)
                    stageVideoInUse = false;
                classicVideoInUse = true;
                video.attachNetStream(ns);
                stage.addChildAt(video, 0);
            }

            if ( !played ) 
            {
                played = true;
                ns.play(FILE_NAME);
            }
        } 

        /**
         * 
         * @param event
         * 
         */     
        private function onResize(event:Event):void
        {
            resize();       
        }

        /**
         * 
         * @param event
         * 
         */     
        private function stageVideoStateChange(event:StageVideoEvent):void
        {   
            infos += "StageVideoEvent received\n";
            infos += "Render State : " + event.status + "\n";
            resize();
        }

        /**
         * 
         * @param event
         * 
         */     
        private function videoStateChange(event:VideoEvent):void
        {   
            infos += "VideoEvent received\n";
            infos += "Render State : " + event.status + "\n";
            resize();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:44:11.400

要获得最佳视频，您需要使用新的[StageVideo](http://www.adobe.com/devnet/flashplayer/articles/stage_video.html)以使用硬件加速。该站点需要为 as3 并且 StageVideo 在正常的 flash 阶段下运行，因此您需要在视频播放时隐藏除控件之外的任何 flash 元素。此外，我会考虑使用 AIR 而不是投影仪方法将文件打包到一个独立的应用程序中。

# c# - 在 Monodroid 中使用片段

> ID：11633054
> 
> 赞同：0
> 
> 时间：2012-07-24T14:28:18.807
> 
> 标签：c#, android-fragments, xamarin.android

我（尽管我刚刚开始）对 Fragments 的理解是它们有点类似于*WPF*中的用户控件——而且由于我打算重用某些*GUI*元素，将它们放入活动中似乎会导致大量重复代码。

因此，基于文档中的片段示例，我尝试自己制作。

```
public class MyFragment: Fragment
{

    public override void OnCreate(Bundle savedInstanceState)
    {
        base.OnCreate(savedInstanceState);
    }

    public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        if (container == null)
        {
            Log.Debug("SmartApp", "Dialer Fragment is in a view without container");
            return null;
        }

        input = container.FindViewById<EditText>(Resource.Id.editText1);
//do some stuff like assigning event handlers, etc.

        return base.OnCreateView(inflater, container, savedInstanceState);
    }
} 
```

以及应该托管此片段的活动：

```
[Activity(Label = "My Activity")]
public class TestActivity: Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.my_layout);
    }
} 
```

最后是这个活动的布局定义

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<fragment class="MonoDevelopTest.MyFragment"
        android:id="@+id/titles_fragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</LinearLayout> 
```

当我调试这个时，我得到了一个`InflateException`（`MyActivity.OnCreate`在线`SetContentView`）。所以，我做的不对 - 为活动加载所需的布局并将我的片段托管在其中的正确方法是什么？

@edit：啊——因为它经常发生，写下问题会给你一些新的想法。我不是很远 - 我的错误是。我所要做的就是将其添加为第一行`MyFragment.OnCreateView:`

```
View fragment = inflater.Inflate(Resource.Layout.dialer, null); 
```

然后我不得不在片段上搜索我的控件，而不是容器（它仍然为空）。

我唯一不太明白的是为什么他们在*Xamarin*`container == null`样本中检查`DetailsFragment.OnCreateView`（这就是我最初走错路的原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:01:00.513

我所要做的就是将其添加为 MyFragment.OnCreateView 中的第一行：

```
View fragment = inflater.Inflate(Resource.Layout.dialer, null); 
```

然后我不得不在片段上搜索我的控件，而不是容器。我仍然不太明白为什么在官方示例中他们在 OnCreateView 中检查容器是否为空 - 但现在我只涉足手机，而不是表格，所以我只有一种布局。

# c++ - 使用布尔运算符比较对象==

> ID：11633059
> 
> 赞同：11
> 
> 时间：2012-07-24T14:28:28.243
> 
> 标签：c++, inheritance, operator-overloading

所以，在阅读了一些 SO 问题和答案之后，我仍然不明白为什么要使用

```
friend bool operator==( BaseClass const &left, BaseClass const &right ) 
```

代替

```
bool operator==( BaseClass const &right ) 
```

现在我有这样的东西[http://pastebin.com/pKsTabC0](http://pastebin.com/pKsTabC0) **（固定）** - 它似乎工作正常。但也许我错过了什么？有什么建议么？

**更新 1**

好的，我更改了源以使其正常工作[http://ideone.com/fIAmB](http://ideone.com/fIAmB)。删除了不必要的 virtual 并添加了 const。我还是不明白为什么要使用朋友...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T14:34:30.060

您的派生函数与父运算符没有相同的签名，因此它*隐藏*了父比较而不是覆盖它。这意味着您无论如何都不能使用虚拟性，因为左侧参数的静态类型决定了被调用的函数。

这就是为什么虚拟比较的常规方法是分配给基类中的虚拟比较函数的非成员相等运算符。

请考虑您对虚拟比较的特定需求，因为它可能是一种设计气味，您可以使用替代设计。

另请注意，成员比较（在这种情况下为相等）运算符通常应该是`const`.

编辑：您似乎只关心基于左侧参数的静态类型的比较，这应该是一个更容易的问题。在这种情况下，您的代码处理所有情况，除了左侧参数是隐式转换为 a`Base`或`Derived`通过继承以外的某种机制（转换运算符或转换构造函数）的类型。如果您不关心这些情况，那么成员平等就可以了。

最后一点，如果可以完全通过公共接口进行比较，我们（几乎）总是更喜欢非成员、非朋友函数，无论它是否是运算符。

EDIT2（非会员、非朋友的快速概览）：

例如，假设您的类有一个公共`key`方法，并且如果两个实例的键相等，您希望调用对象相等。然后，不使用朋友或成员相等运算符，您可以独立编写您的相等：

```
bool operator==(const MyType& left, const MyType& right)
{
    return left.key() == right.key();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T14:31:39.903

*成员函数本身*没有问题，但自由函数更通用。成员函数被迫让左侧操作数为类型`BaseClass`或子类型，而自由函数接受任何可隐式转换为 的`BaseClass`类型，而不仅仅是继承树中的类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T14:36:35.653

我看到的最大问题`virtual bool operator==( BaseClass const &right )`是，如果没有多个动态调度*，以下断言将失败。

```
class Derived1 : public BaseClass {
    bool operator==( BaseClass const &right ) override {
        return true;
    }
}

class Derived2 : public BaseClass {
    bool operator==( BaseClass const &right ) override {
        return false;
    }
}

Derived1 d1;
Derived2 d2;
assert((d1 == d2) == (d2 == d1)); 
```

可以让朋友函数来处理这个问题，但老实说，在没有多次调度的情况下正确处理这样的事情会很麻烦。即使有多次分派，这种多态相等运算符的正确语义也可能不容易想出。

* * *

[* 多重动态调度是对多个参数进行动态调度的能力，而不仅仅是 on `this`。]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T14:39:38.967

您正在尝试提出两个独立的观点。首先，将运算符实现为*成员*函数而不是独立函数。其次，将其实现为*虚拟*功能（您甚至可以在标题中添加）。

你想通过“虚拟”部分说什么不清楚。在您的代码示例中，派生类运算符不会覆盖基类运算符，因为它们的签名不匹配。您的示例中没有多态性。所以，我不明白你所说的“工作正常”是什么意思。它根本不起作用（作为“虚拟”运算符），因为在您的代码中实际上没有任何东西可以“起作用”。目前您的代码只是编译，但它没有做任何事情。提供试图演示多态行为的代码——然后我们将看看它是否“工作”。

至于将二元运算符实现为成员函数……这个问题已经被多次讨论过了。作为成员函数实现的二元运算符在隐式参数转换方面表现“不对称”。这就是为什么将对称二元运算符实现为独立函数通常是一个更好的主意。

# mysql - MySQL GROUP_CONCAT 作为多个字段和自定义顺序

> ID：11633061
> 
> 赞同：2
> 
> 时间：2012-07-24T14:28:39.503
> 
> 标签：mysql, sql, group-concat

这是我的表的结构： ![表结构](../Images/7c29af0f3d92ad1efdf1de97936c8a58.png)

这是我想要的查询结果（考虑到用户为我提供了`2|4|1`模式）： ![查询结果](../Images/e15bfb8644718cb8afa2469d2c11f515.png)

这是我尝试过的：

```
SELECT parcel.TrackCode, parcelType.Name, GROUP_CONCAT(track.DateTime SEPARATOR '|') AS dt
FROM track
JOIN parcel ON track.ParcelID = parcel.ID
JOIN parcelType ON parcel.ParcelTypeID = parcelType.ID
JOIN event ON track.EventID = event.ID
GROUP BY parcel.ID; 
```

结果是：

![结果](../Images/9f996dcc011a64e1c390a47b12ab3bc2.png)

所以问题是我需要 GROUP_CONCAT() 将数据划分为几个字段（`date where track.eventID = 3`, `date where track.eventID = 1`, `date where track.eventID = 5`, `date where track.eventID = 7`# 考虑到模式是`3|1|5|7`）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:15:47.363

我建议运行两个查询。首先这个，获取相关事件：

```
SELECT ParcelID, EventID, DateTime
FROM track
WHERE EventID IN(1, 2, 4) 
```

将此查询的结果存储在宗地 ID 到事件数组的映射中，其中键是宗地 ID，值是另一个数组。在该内部数组中，键是事件 ID，值是事件日期。

```
array(1 => array(
        2 => '2012-05-15 15:33:00', 
        4 => '2012-05-22 11:35:41', 
        1 => '2012-05-04 18:58:30'
    ),
    2 => array(
        2 => '2012-07-01 09:05:56', 
        4 => '2012-07-14 13:32:00', 
        1 => '2012-06-27 12:44:32'
    )
); 
```

然后，使用像下一个这样的查询来获取包裹列表，对于每个包裹，您可以轻松地在内存中查看前一个查询的结果，以找出每个事件的日期，对于任何给定的包裹 ID .

```
SELECT parcel.ID, parcel.TrackCode, parceltype.Name
FROM parcel
JOIN parceltype ON parceltype.ID = parcel.ParcelTypeID 
```

*注意：此答案是[在 MySQL 聊天室中进行的对话的精简版](https://chat.stackoverflow.com/transcript/message/4655577#4655577)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:20:54.500

如果您还想要 ID，则应该`GROUP_CONCAT`从 track 中获取 ID，它们也将以相同的顺序给出。

或者在查询结束时设置一个 ORDER BY，它也会处理该数据。

# asp.net - 无法在 Windows 7 下的旧版 Visual Studio (2003) 上启动调试器

> ID：11633065
> 
> 赞同：1
> 
> 时间：2012-07-24T14:28:58.243
> 
> 标签：asp.net, .net

对于这个项目，我需要在我的服务器上使用带有 Framework 1.1 的 IIS 6.0 在 Windows 7 上安装和运行 VS 2003，因为远程服务器上有旧的 VS2003 C# 代码需要更新并且没有安装 VS 2003 仅 DLL、PDB、 aspx 和 aspx.cs 文件。在移植代码并在我的本地服务器上进行所需的更改后，我发现虽然我可以浏览页面，但我无法使用调试器运行页面并收到此错误：“...无法在 Web 服务器上开始调试. 进程中没有运行托管代码。为了使用 .NET 调试器附加到进程，托管代码必须在附加之前在进程中运行。" 然后我在没有调试器的情况下启动了应用程序并选择了 w3wp。

以下是在 IIS6 中完成的：

```
Application created.
DefaultAppPool (.NET framework 1.1 Integrated)(ApplicationPoolIdentity) is used
Browsing the web page works OK. 
Authentication has Integrated Windows and ASP.NET Impersonation enabled.
I have runned aspnet_regiis from all the .net version in order
Set debug="true" in the web.config. 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:30:37.113

解析度：

1.  右键单击 ASP.Net 项目 > 属性
2.  选择配置属性 > 调试
3.  在“调试器”框架中启用下面提到的条目。
    *   ASP.Net 调试
    *   非托管代码调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T03:17:12.847

我有同样的问题。

我修好了它。

1.  删除 IIS 中的虚拟目录
2.  使用与旧目录不同的名称创建新的虚拟目录，并在您的 Visual Studio 解决方案中配置新的虚拟目录名称。

# mysql - 将 phpMyAdmin 数据库加载到 UITableView

> ID：11633068
> 
> 赞同：1
> 
> 时间：2012-07-24T14:29:10.053
> 
> 标签：mysql, database, uitableview, phpmyadmin, xcode4.3

我在 xcode 4.2 中开发了一个应用程序，它从数据库中读取数据`phpMyAdmin`并将其加载到表视图中。现在，如果我在 中做同样的事情`xcode 4.3`，它就不再起作用了。从现在开始，我一直在寻找解决方案，但找不到任何解决方案，而且我不知道为什么它不起作用（我的数据库和 php 脚本工作正常）。

FirstViewController.h：

```
NSMutableArray *myArray;

FirstViewController.m:
- (void)viewDidLoad {
    [super viewDidLoad]; 
    NSURL *url = [NSURL URLWithString:kGETUrl];    
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSError *error;    
    myArray = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions     
        error:&error];    
    [self.tableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{  
    return [myArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    NSDictionary *info = [myArray objectAtIndex:indexPath.row];

    cell.textLabel.text = [info objectForKey:@"name"];
    cell.detailTextLabel.text = [info objectForKey:@"Message"];    

    return cell;
} 
```

# actionscript-3 - Flex Mobile - 制作可滚动的视图

> ID：11633072
> 
> 赞同：0
> 
> 时间：2012-07-24T14:29:16.780
> 
> 标签：actionscript-3, apache-flex, flex-mobile

在 Flex Mobile 应用程序中，我有一个视图，其中包含一个“标题”，它是一个图像轮播和一个 2 列列表（附加图像上的第 1 点）。该列表是可滚动的并且效果很好，但滚动标题时保持固定。滚动整个视图的最佳方法是什么。我希望标题移动，列表全屏显示新元素。

这是一张可能有帮助的图片：

![例子](../Images/8acb0dda045e1d71c9bd6492f776d343.png)

按照你的回答，我最终得到了这段代码

```
<s:Scroller id="scroler" left="0" right="0" top="0" >
<s:Group id="container" left="0" right="0" top="0">                                             
<components:restaurantHeader id="header" />
<s:DataGroup dataProvider="{DataModel.instance.listaCategoriiRestaurante}" 
top="260" left="0" right="0"  width="100%" 
itemRenderer="itemRenderers.categoriiRestaurantRender">
<s:layout>
    <s:TileLayout columnWidth="200" rowAlign="justifyUsingHeight" orientation="rows" clipAndEnableScrolling="false" columnAlign="justifyUsingGap" >     
    </s:TileLayout>
</s:layout>     
</s:DataGroup>  
</s:Group>  
</s:Scroller> 
```

但现在看来我无法将数据组列表设为 2 列。数据组列表在水平方向而不是垂直方向扩展，我最终得到 3-4 列而不是额外的行。

你能告诉我如何使数据组列表保持在 2 列上并垂直扩展添加额外的行而不是列。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:38:46.863

用滚动条包裹你的标题和列表。不过，这会使列表滚动变得过时，因此您可以将列表组件替换为 DataGroup。

# php - PHP 删除 DOMText 周围的引号

> ID：11633074
> 
> 赞同：0
> 
> 时间：2012-07-24T14:29:21.557
> 
> 标签：php, html

我正在尝试使用 PHP 将一些 HTML 附加到正文的末尾。我正在使用 DOMText 对象并像这样附加它：

```
$js = new DOMText("<script type='text/javascript'>\njson='".$response."';alert(json);</script>");
$bodyTags = $indexDOM->getElementsByTagName('body');
$bodyTags->item(0)->appendChild($js); 
```

问题是我附加的 HTML 被引号包围。有什么方法可以删除这些引号或不使用引号包围文本的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:36:46.483

我想你应该使用

`DOMNode` [http://www.php.net/manual/en/class.domnode.php](http://www.php.net/manual/en/class.domnode.php)或

`DOMElement` [http://www.php.net/manual/en/class.domelement.php](http://www.php.net/manual/en/class.domelement.php)

完成工作。

**编辑**

例子：

```
$bodyTags = $doc->getElementsByTagName('body');

$newEl = $doc->createElement('script');
$newEl->setAttribute('type', 'text/javascript');

$response = "{'fname':'stackoverflow'}";
$js = new DOMText("json=\"".$response."\";alert(json);");
$newEl->appendChild($js);
$bodyTags->item(0)->appendChild($newEl); 
```

有几种方法可以实现这一点。这只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:35:53.127

我会尝试使用 javascript textNode 对象。这是我通常使用的，它似乎工作正常。

# javascript - 从全局函数调用内部函数以在 javascript 中显示警报

> ID：11633077
> 
> 赞同：-2
> 
> 时间：2012-07-24T14:29:33.650
> 
> 标签：javascript

我有一个 javascript 代码，现在想扩展这个代码。如何在全局范围内编写 makeAMessenger 函数，以便在用户单击文档并在消息下方发出警报时触发

```
THIS. IS. SPART. 
```

目前我有以下代码。

[代码在这里](http://jsfiddle.net/heBCH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:35:25.630

你是***[这个](http://jsfiddle.net/heBCH/3/)***意思吗？

```
function makeAMessenger(madness, sparta) {
   return madness.bind(sparta);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:49:45.297

[这里](http://jsfiddle.net/uJsZC/)有一个解决方案，你不需要传递变量，它可以在函数中访问。

```
 function makeAMessenger(madness) {
        return madness;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:34:41.803

您可以使用`Function#apply()`或`Function#call()`来绑定`this`.
[http://jsfiddle.net/QfNbp/](http://jsfiddle.net/QfNbp/)

# iphone - 创建 NSPredicate 的正确方法

> ID：11633078
> 
> 赞同：-1
> 
> 时间：2012-07-24T14:29:38.003
> 
> 标签：iphone, ios, core-data, nspredicate

我发现了 2 种不同的方法来创建 NSPredicate。

方式一：

```
NSExpression *exprName = [NSExpression expressionForKeyPath:@"name"];
NSExpression *exprFilter = [NSExpression expressionForConstantValue: name ]; 
NSPredicate *predicate = [NSComparisonPredicate predicateWithLeftExpression: exprName 
                                                              rightExpression: exprFilter 
                                                                     modifier: NSDirectPredicateModifier  
                                                                         type: NSContainsPredicateOperatorType 
                                                                      options: NSCaseInsensitivePredicateOption]; 
```

方式二：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name CONTAINS[c] %@", name]; 
```

创建 NSPredicate 并防止 SQLInjection 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T14:34:38.533

如果您以编程方式设置复杂的谓词，第一种方法很有用。除此之外，第二种方法很好。您不必担心使用 Core Data 进行 SQL 注入。

[相关的](https://stackoverflow.com/questions/9821570/how-to-escape-a-nsstring-to-prevent-sqlinjection-with-core-data)

[也相关](https://stackoverflow.com/questions/3076894/how-to-prevent-sql-injection-in-core-data)

# javascript - 查找和循环遍历（这个）JQuery 内部的跨度元素？

> ID：11633080
> 
> 赞同：0
> 
> 时间：2012-07-24T14:29:38.977
> 
> 标签：javascript, jquery

我试图找到`<span class ="anime_yellow">..`另一个里面的每一个`<span class="toggle">`，这是代码：

HTML：

```
 <span class="title_white">Menu 1</span>
      <span class="toggle">
     this is menu 1 i want to animate
          <span id="position" class="anime_yellow">Position</span>
        and
          <span id ="market" class="anime_yellow">market</span>.
      </span>
    <br><br>

    <span class="title_white">Menu 2</span>
      <span class="toggle">
     this is menu 2 i want to animate
          <span id="simple" class="anime_yellow">Simple</span>
        and
          <span id ="kool" class="anime_yellow">Kool</span>.
      </span> 
```

Javascript：

```
$(".toggle").hide();
$(".title_white").click(function() {
        $(".toggle").hide();
        $(this).next(".toggle").toggle("slow");
        // i want to find every span.anime_yellow inside the
        // THIS TOGGLE class and get its element ID
        // and then run function on the ID
        // animate(position) or animate(simple).

      }); 
```

我试图使用 jquery 函数 .find()，但不知道从哪里开始，这是这里的 jsfiddle：http: [//jsfiddle.net/wJJBa/2/](http://jsfiddle.net/wJJBa/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:36:02.080

你的意思是你想这样做：http: [//jsfiddle.net/sZUAE/1/](http://jsfiddle.net/sZUAE/1/)

```
function animate(divID) {
    alert(divID);
}

$(".toggle").hide();
$(".title_white").click(function() {
    $(".toggle").hide();
    var $toggle = $(this).next(".toggle");
    $toggle.toggle("slow");
    $toggle.find(".anime_yellow").each(function(i, e) {
        animate(e.id);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:35:23.613

使用您的代码示例编辑：

```
$(".toggle").hide();
$(".title_white").click(function() {
  $(".toggle").hide();
  var $toggle = $(this).next(".toggle");
  $toggle.toggle("slow");
  $toggle.find(".anime_yellow").each(function (i, e) {
    animate($(this).attr("id")); //Your ID is HERE
  });
});
function animate(divID){    
  alert(divID);
} 
```

# ios - NSNotificationCenter AppDelegate 发布通知问题

> ID：11633091
> 
> 赞同：0
> 
> 时间：2012-07-24T14:30:04.610
> 
> 标签：ios, uiactivityindicatorview, nsnotificationcenter, nsnotifications, nsnotification

我的应用程序每天执行一次或在收到本地通知时执行一系列处理方法以执行一系列任务并按预期工作。

我尝试将 ActivityIndi​​cator 添加到视图中，当收到从 AppDelegate 发送来执行任务的通知时，该视图开始动画。然而，所发生的只是屏幕变暗，没有任何处理完成，活动指示器也没有出现。使屏幕变暗的指示器和子视图在应用程序的其他地方使用，并且肯定可以正常工作。我认为这一定与导致应用程序挂起并且没有继续调用任何其他方法的通知有关，因此它永远不会完成。

这是应用程序委托中的通知，在调用日常处理方法以启动视图控制器中的活动指示器之前调用，第二个通知视图控制器删除子视图。

该方法在 AppDelegate 中；

```
- (void)GoForRankingAndSMProcessing{

    [[NSNotificationCenter defaultCenter] postNotificationName:@"ranking" object:self];

    RankingAndSMProcess *process = [RankingAndSMProcess alloc];

    [process DoRankingAndSocialMediaProcessing];

    [process release];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"rankingDone" object:self];

} 
```

这是在另一个视图中拾取的，通知设置在`viewDidLoad`.

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(workingWhileRanking:) name:@"ranking" object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(workingFinishedRanking:) name:@"rankingDone" object:nil]; 
```

那些在那个视图中调用这些方法。

```
-(void)workingWhileRanking:(NSNotification *) notification{

    loading = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)]; 

    loading.opaque = NO;
    loading.backgroundColor = [UIColor colorWithWhite:0.0f alpha:0.6f];

    indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [indicator setHidesWhenStopped:YES];
    indicator.center = self.view.center;

    [indicator startAnimating];
    [self.view addSubview:loading];
    [self.view addSubview:indicator];

}

-(void)workingFinishedRanking:(NSNotification *) notification{

    [indicator stopAnimating];
    [indicator removeFromSuperview];
    [indicator release];
    [loading removeFromSuperview];
    [loading release];

} 
```

通知必须在半透明子视图出现时发送，但是似乎没有调用任何处理方法，因此视图被永久锁定，直到我强制关闭应用程序。

发送通知是否会更改应用程序启动序列的当前流程，从而停止继续执行类中的代码？或者我是否尝试添加一个活动指示器以在某些幕后处理完全错误的方式期间显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:12:40.827

如果我没有正确解释您的代码：

```
- (void)GoForRankingAndSMProcessing{

  [[NSNotificationCenter defaultCenter] postNotificationName:@"ranking" object:self];
  RankingAndSMProcess *process = [RankingAndSMProcess alloc];
  [process DoRankingAndSocialMediaProcessing];
  [process release];
  [[NSNotificationCenter defaultCenter] postNotificationName:@"rankingDone" object:self];
} 
```

your`DoRankingAndSocialMediaProcessing`是您在活动指示器显示时要执行的任务。

我假设所有处理都发生在同一个线程（UI 线程）上，这意味着当您`DoRankingAndSocialMediaProcessing`基本上执行运行循环（因此，UI）阻塞并且它不再更新时。这应该可以解释您的问题。

您有几个选项可以更改此行为，具体取决于您在`DoRankingAndSocialMediaProcessing`.

如果你不做任何与 UI 相关的事情，那么通过将直接调用替换为`DoRankingAndSocialMediaProcessing`：

```
[process performSelectorInBackground:@selector(DoRankingAndSocialMediaProcessing) withObject:nil]; 
```

当然，然后您会`rankingDone`从内部发送通知`DoRankingAndSocialMediaProcessing`以使事情正常工作。

如果您负担得起后台线程（即，您不从内部更新 UI `DoRankingAndSocialMediaProcessing`），这是最好的选择，因为它根本不会阻塞 UI。

# java - Java 中的 WMA 支持

> ID：11633093
> 
> 赞同：1
> 
> 时间：2012-07-24T14:30:05.657
> 
> 标签：java, wma

实际上，我们需要将 WMA 音频文件转换为 FLAC。但是缺乏将 WMA 转换为更方便的格式的方法。你能给我们推荐一个可以帮助我们的图书馆，或者类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:33:08.687

你需要的是[JAVE](http://www.sauronsoftware.it/projects/jave/)：

> JAVE（Java 音频视频编码器）库是 ffmpeg 项目的 Java 包装器。开发人员可以利用 JAVE 将音频和视频文件从一种格式转码为另一种格式。例如，您可以将 AVI 文件转码为 MPEG 文件，可以将 DivX 视频流更改为（类似 YouTube 的）Flash FLV 文件，可以将 WAV 音频文件转换为 MP3 或 Ogg Vorbis 文件，您可以分离和转码音频和视频轨道，您可以调整视频大小，更改其大小和比例等。JAVE 支持许多其他格式、容器和操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T16:11:13.457

[MFSampledSP](http://www.tagtraum.com/mfsampledsp/index.html)支持 WMA。它适用于 Windows 7 或更高版本。

# c# - 是否有任何理由对 POST 正文执行完整的 URL 编码

> ID：11633094
> 
> 赞同：0
> 
> 时间：2012-07-24T14:30:10.663
> 
> 标签：c#, windows, http

我目前正在开发一个 C# WinForms 应用程序，该应用程序调用几个远程 Web 服务。在调查与包含 & 号的字符串相关的错误时，我遇到了以下方法，它为*其他*Web 服务“编码”POST 主体（诚然，它没有 & 号问题。）

```
object o = row.Values[i]; //some object
Type valueType = o.GetType();
if (valueType.Name.Equals("String", StringComparison.InvariantCultureIgnoreCase))
{
    o = o.ToString().Replace("&", "%26");
} 
```

我对此做了一些 WTF，但后来想，是否有在 POST 正文上执行完整 URL 编码的实际原因？当然，唯一的两个风险点是和号和问号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:43:33.907

这个问题有点片面。对 POST 数据进行编码的唯一原因是对方是否期望它被编码。例如，如果帖子数据的内容类型是“x-www-form-urlencoded”，那么，是的，您需要对数据进行 url 编码。如果对方*不*希望它被 urlencoded 那么不要......

通常，您不需要对发送到 Web 服务的数据进行 urlencode，因为您拥有灵活的端点。如果您有一个期望直接从网页调用的 Web 服务（例如，通过表单发布），那么 urlencoding 可能由浏览器直接完成——在这种情况下，Web 服务需要接受 url 编码（因此任何*其他*想要与之通信的东西）。

# terminal - aqua终端中的gnuplot虚线

> ID：11633104
> 
> 赞同：2
> 
> 时间：2012-07-24T14:30:32.393
> 
> 标签：terminal, gnuplot

![在此处输入图像描述](../Images/665bd0ed043448345688d5d63159d749.png)我在 Mac OS X v10.6.8 上使用 gnuplot 4.4 patchlevel 4。我正在运行一个 gnuplot 脚本，它的简化版本是这样的：（在运行脚本之前，在终端中指定了 file1、file2、...等）

```
reset
set term aqua enhanced font "Times-Roman, 18"
set term aqua dashed
plot file1 u 3:10 w lines lt 1 linecolor rgb "#FF0000",\
     file2 u 3:10 w lines lt 1 linecolor rgb "#00FF00",\
     file3 u 3:10 w lines lt 1 linecolor rgb "#0000FF",\
     file4 u 3:10 w lines lt 1 linecolor rgb "#FF00FF",\
     file5 u 3:10 w lines lt 1 linecolor rgb "#00FFFF",\
     file6 u 3:10 w lines lt 2 linecolor rgb "#FF0000",\
     file7 u 3:10 w lines lt 2 linecolor rgb "#00FF00",\
     file8 u 3:10 w lines lt 2 linecolor rgb "#0000FF",\
     file9 u 3:10 w lines lt 2 linecolor rgb "#FF00FF",\
     file10 u 3:10 w lines lt 2 linecolor rgb "#00FFFF" 
```

文件 1-5 是一个数据集，文件 6-10 是另一个数据集。我希望文件 1 到 5 用实线绘制，文件 6 到 10 用虚线绘制。有没有办法在水上码头做到这一点？根据内置帮助，“可以绘制实线或虚线”。我查看了多个常见问题解答和文档，但共识似乎是真的很难或不可能做到？此外，有没有人知道关于 aqua 终端或 gnuplot 命令的任何综合文档？

**编辑：**要绘制文件 6-10，我一直在使用 lw 6 将它们与 1-5 区分开来，因为我无法使用虚线。上面的脚本会正确执行此操作吗？换句话说，脚本是否在做我认为它正在做的事情？（绘制 1-5 条实线和 6-8 条粗线？）我问是因为为了制作虚线，我将“lw 6”替换为“lt 2”。然而，这会导致 file5 用虚线绘制，这很奇怪。

**编辑2：**我附上了我的终端测试图，似乎没有提到虚线？

**编辑 3：**更新脚本以反映所做的更改。

**编辑 4：**图形现在是固定术语 aqua 增强字体“Times-Roman, 18”，虚线；测试

![在此处输入图像描述](../Images/665bd0ed043448345688d5d63159d749.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:53:54.557

实际上并不算太糟糕（至少对我来说，在 OS-X 10.5.8 和 gnuplot 4.2 上。我停止在新版本的 gnuplot 中构建 aquaterm，因为我不喜欢那个终端）在 aqua 终端中，线型 1 是实线和线型 2 是虚线。

```
set term aqua enhanced font "Times-Roman, 18" dashed
plot sin(x) w lines lt 1 lc rgb "blue", cos(x) w lines lt 2 lc rgb "purple" 
```

要查看您的 gnuplot 版本将用于特定终端的线型，您可以`test`在设置终端后使用该命令（并在终端需要时输出）。

关于代码外观的建议：

```
reset
set term aqua enhanced font "Times-Roman, 18" dashed
plot file1 u 3:10 w lines lt 1 linecolor rgb "#FF0000",\
     file2 u 3:10 w lines lt 1 linecolor rgb "#00FF00",\
     file3 u 3:10 w lines lt 1 linecolor rgb "#0000FF",\
     file4 u 3:10 w lines lt 1 linecolor rgb "#FF00FF",\
     file5 u 3:10 w lines lt 1 linecolor rgb "#00FFFF",\
     file6 u 3:10 w lines lt 2 linecolor rgb "#FF0000",\
     file7 u 3:10 w lines lt 2 linecolor rgb "#00FF00",\
     file8 u 3:10 w lines lt 2 linecolor rgb "#0000FF",\
     file9 u 3:10 w lines lt 2 linecolor rgb "#FF00FF",\
     file10 u 3:10 w lines lt 2 linecolor rgb "#00FFFF" 
```

**编辑**

我刚看了一个朋友的电脑。对她来说（gnuplot 4.4.4，os-X 10.6？）线型 8 是第一个虚线线型（突出了`test`命令的有用性）。

# facebook - Cakephp 2.1 Facebook 连接和验证

> ID：11633105
> 
> 赞同：1
> 
> 时间：2012-07-24T14:30:35.853
> 
> 标签：facebook, authentication, cakephp-2.1

我在我的应用程序中使用以下插件来让 facebook connect 与 auth 一起工作。

[https://github.com/webtechnick/CakePHP-Facebook-Plugin](https://github.com/webtechnick/CakePHP-Facebook-Plugin)

问题是我想手动将用户数据保存到用户表中。

所以我正在尝试这样

```
public function beforeFacebookSave(){
//$this->Auth->autoRedirect = false;
debug($this->Connect->user('email'));
$this->Connect->authUser['User']['email'] = $this->Connect->user('email');
$this->Connect->authUser['User']['username'] = $this->Connect->user('username');
//Must return true or will not save.
$this->redirect(array('controller' => 'users', 'action' => 'beforefbsave', '?' => array('param1' => $this->Connect->user('email')))); 
//return true; 
```

}

重定向进入循环并出现错误

`The page isn't redirecting properly`

这是正确的方法还是遵循其他方法来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T22:25:24.990

页面上有一个文档： [https ://github.com/webtechnick/CakePHP-Facebook-Plugin](https://github.com/webtechnick/CakePHP-Facebook-Plugin)

beforeFacebookSave 处理将用户保存到用户表中。如果返回 false，则创建被拖拽。

```
//Add an email field to be saved along with creation.
function beforeFacebookSave(){
    $this->Connect->authUser['User']['email'] = $this->Connect->user('email');
    return true; //Must return true or will not save.
} 
```

所以如果我是你，我会看下一部分：

beforeFacebookLogin 在用户登录到 Auth 之前处理用户。

```
function beforeFacebookLogin($user){
    //Logic to happen before a facebook login
} 
```

而不是重定向使用模型中的直接函数。

# alignment - div中的内容与底部对齐

> ID：11633107
> 
> 赞同：0
> 
> 时间：2012-07-24T14:30:50.630
> 
> 标签：alignment

我有一个标题 div，里面是一些内容。整个 div 是 text-align:right。我希望内容位于右侧，但更重要的是位于 div 的底部，而不是顶部。

```
#header {

height:79px;
background:url(images/jtl-logo.png) no-repeat left top;
text-align:right;
padding:0px 9px; } 
```

当然，在 CSS 中必须有一种方法可以使内容始终与其容器的底部对齐，这似乎是非常必要的？

我能想到的唯一另一种方法是对标题应用填充以将其向下推，但是当这是一件如此简单的事情时，这似乎有点荒谬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:32:39.843

您可以将文本包裹在另一个 DIV 或 SPAN 元素中，然后应用 CSS 定位将其移动到底部。

# c# - 无法访问 Web 服务中的类中的方法

> ID：11633110
> 
> 赞同：0
> 
> 时间：2012-07-24T14:30:56.310
> 
> 标签：c#, asp.net, web-services

我有一个 asp Web 服务，其中包含一个内部有一个函数的类，但是当我在我的 winforms 项目中引用它时，我似乎无法访问该函数。我的网络服务的所有其他方面都在工作，并且一切都会根据我的更改进行更新。这是我的 Web 服务中的代码，它说明了我遇到的问题。在示例中，如果我要从引用此 Web 服务的 winform 项目创建 ItemOrder 的实例，我将无法调用 AddItem(...)。

```
[WebService(Namespace = "http://myurl.com/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
public class MyWebService : System.Web.Services.WebService
{

    [System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://myurl.com/")]
    public class ItemOrder
    {
        public string OrderNumber = "";
        public DateTime OrderDate = DateTime.Now;
        public decimal TotalCost = 0M;

        internal List<Item> items = new List<Item>();

        [WebMethod]
        public void AddItem(string reference)
        {
            Item item = new Item();
            item.ItemReference = reference;
            items.Add(item);
        }
    }

    [System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://myurl.com/")]
    public class Item
    {
        public decimal Cost = 0M;
        public decimal Price = 0M;
        public string ItemReference = "";
    }
} 
```

上面的代码是一个简化的例子，不是我的全部情况。我的问题是我无法为 Web 服务类中定义的类调用任何方法。我可以调用根 Web 服务类 (MyWebService) 中定义的方法没有问题。如果有人有任何想法为什么会这样，或者如果你能指出我正确的方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:38:03.973

Web 服务无法序列化代码，因此您的类中的方法对客户端代理不可用（并且如果您在私有方法中有代码，它将不会执行）。通过这种方法序列化的对象只是数据传输对象——哑属性。

# java - JAXB 和 XSLT 处理器

> ID：11633111
> 
> 赞同：0
> 
> 时间：2012-07-24T14:30:59.763
> 
> 标签：java, xml, xslt, jaxb

我正在使用 JAXB 和 maven-jaxb2-plugin，我现在能够成功地将我的模式绑定到 Java 代码。
我还有一个 .xsl 文件“annotate_schemas.xsl”，它修改了一个特定的模式，添加了一些额外的信息。
最后，在我想要转换的架构上，我添加了标题：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="annotate_schemas.xsl"?>
... 
```

问题是，虽然 .xsl 是正确的（如果我在浏览器中打开我的模式文件，转换会完美地完成），但 JAXB 会忽略它并绑定我的模式的未修改版本。

我的问题是：JAXB（和/或其插件）是否有 XSLT 处理器？有没有办法告诉 JAXB 绑定 XSLT 转换的结果而不是原始结果？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:35:31.610

JAXB 与绝大多数使用 XML 的应用程序一样，不注意`<?xml-stylesheet?>`处理指令。如果要在将文档传递给 JAXB 之前对其进行转换，则需要显式地对其进行转换，例如使用 JAXP 转换 API。（JAXP 中有一个选项可以根据 xml-stylesheet PI 的值请求转换，如果您想控制它：TransformerFactory.useAssociatedStylesheet()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:40:53.847

你可以尝试这样的事情：

```
TransformerFactory transFact = TransformerFactory.newInstance();
Templates displayTemplate = transFact.newTemplates(new StreamSource(new File("your_xsl_file")));

TransformerHandler handler = 
  ((SAXTransformerFactory) transFact).newTransformerHandler(displayTemplate); 
```

# java - Servlet 中的 HSQL DB：锁定文件未释放

> ID：11633112
> 
> 赞同：5
> 
> 时间：2012-07-24T14:31:01.247
> 
> 标签：java, jakarta-ee, jpa, hsqldb

我在 Servlet 中运行 HSQLDB。当我将应用程序重新部署到 Web 服务器时，.lck 文件未正确释放，HSQL 服务器无法加载该文件。

Web 服务器是 NetBeans 附带的 Tomcat 7.0.22...

任何想法为什么会发生这种情况？

这是初始化代码：

```
@Override public void init() throws ServletException {
        HsqlProperties p = new HsqlProperties();
        p.setProperty("server.database.0", dbPath);
        p.setProperty("server.dbname.0", Environment.PERSISTENCE_HSQL_DB_NAME);
        p.setProperty("server.port", Environment.PERSISTENCE_HSQL_PORT);
        server = new Server();
        server.setProperties(p);
        server.setSilent(false);
        server.setTrace(true);
        server.setLogWriter(new PrintWriter(System.out));
        server.setErrWriter(null);
        server.start();

        server.checkRunning(true);

        /* Exception handling */
    } 
```

这是我的关闭/销毁方法：

```
@Override
public void destroy() {
    super.destroy();
    server.setNoSystemExit(true);
    server.stop();
    server.shutdown();
    controller.shutdown();
} 
```

我正在使用 JPA。如果数据库加载（首次启动），则应用程序运行正常。这是我的persistence.xml：

```
<persistence-unit name="embedded_hsql" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <!-- Entities -->
    <properties>
        <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
        <property name="hibernate.connection.url" value="jdbc:hsqldb:hsql://localhost:9001/fst_db;hsqldb.lock_file=false"/>
        <property name="hibernate.connection.username" value="SA"/>
        <property name="hibernate.connection.password" value=""/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
        <property name="hibernate.show_sql" value="false"/>
        <property name="hibernate.connection.SetBigStringTryClob" value="true"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
        <property name="current_session_context_class" value="thread" />
        <property name="cache.provider_class" value="org.hibernate.cache.NoCacheProvider" />
    </properties>
</persistence-unit> 
```

我添加了“hsqldb.lock_file=false”用于测试目的，这根本没有效果。一般来说，我不想禁用文件锁定......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:56:13.213

如果您需要从同一个 Web 应用程序中访问该数据库，那么最好：

1.  [以“进程内”](http://www.hsqldb.org/doc/guide/running-chapt.html#rgc_inprocess)模式运行 HSQLDB 。
2.  将数据库定义为 Tomcat 的[资源](http://tomcat.apache.org/tomcat-4.1-doc/config/context.html#Resource%20Definitions)并使用 JNDI 访问它。

这将有助于完全摆脱 hsqldb 启动/停止的负担。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:26:24.883

嗨以这种方式解决了问题：

```
@Override
public void destroy() {
    controller.shutdown();
    PersistenceUtility.getInstance().closeAllEntityManagers();

    try {
        EntityManager em = PersistenceUtility.getInstance().createEntityManager();
        em.getTransaction().begin();
        Query shutdownQuery = em.createNativeQuery("SHUTDOWN");
        shutdownQuery.executeUpdate();
        em.getTransaction().commit();
    } catch (Throwable t) {
        Environment.LOGGER.debug("Database connection closed");
    }

    server.signalCloseAllServerConnections();
    server.shutdown();
    super.destroy();
} 
```

我剩下的唯一问题是本机查询可以解决问题，`SHUTDOWN`但也会触发相应的`EntityManager`. 我的理论是，在 EntityManager 关闭其连接之前，数据库已关闭并停止...

如果我打印被捕获的堆栈跟踪，`Throwable t`我会得到：

```
javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: could not execute native bulk manipulation query
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:637)
    at org.hibernate.ejb.QueryImpl.executeUpdate(QueryImpl.java:58)
    at com.convista.fst.manager.ConfigurationServlet.destroy(ConfigurationServlet.java:115)
    at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1417)
    at org.apache.catalina.core.StandardWrapper.stopInternal(StandardWrapper.java:1764)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:230)
    at org.apache.catalina.core.StandardContext$4.run(StandardContext.java:5449)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.exception.JDBCConnectionException: could not execute native bulk manipulation query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.engine.query.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:174)
    at org.hibernate.impl.SessionImpl.executeNativeUpdate(SessionImpl.java:1163)
    at org.hibernate.impl.SQLQueryImpl.executeUpdate(SQLQueryImpl.java:334)
    at org.hibernate.ejb.QueryImpl.executeUpdate(QueryImpl.java:49)
    ... 6 more
Caused by: java.sql.SQLTransientConnectionException: connection exception: connection failure: java.net.SocketException: Software caused connection abort: socket write error
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.close(Unknown Source)
    at org.hibernate.jdbc.AbstractBatcher.closePreparedStatement(AbstractBatcher.java:534)
    at org.hibernate.jdbc.AbstractBatcher.closeStatement(AbstractBatcher.java:269)
    at org.hibernate.engine.query.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:169)
    ... 9 more
Caused by: org.hsqldb.HsqlException: connection exception: connection failure: java.net.SocketException: Software caused connection abort: socket write error
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.ClientConnection.execute(Unknown Source)
    ... 13 more 
```

你知道是什么导致了这个异常吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-02T17:04:38.687

从 HSQLDB 2.4.1 开始，关闭 HSQL 服务器的正确方法似乎是通过 org.hsqldb.server.Server 类的 shutdownCatalogs 或 shutdownWithCatalogs 方法。

在您的情况下，这将是：

```
server.shutdownCatalogs(org.hsqldb.Database.CLOSEMODE_NORMAL); 
```

一个明显的问题是 stop() 最终在最后一个数据库关闭时被调用，然后 shutdown() 也被调用，这导致一些冗余的内部调用，但它似乎没有害处。

# javascript - javascript 事件管理，处理全局 vs 大量监听器

> ID：11633114
> 
> 赞同：1
> 
> 时间：2012-07-24T14:31:04.577
> 
> 标签：javascript, javascript-events

我一直在为基于 MVC 风格方法的 webapps 开发一个框架。

对于你们当中的 JS 专家来说，这更像是一个普遍的问题：如果您有很多视图，每个视图都有不同的事件侦听器，这是否会减慢整体响应速度？我正在玩弄创建一个全局事件管理器的想法，该管理器根据鼠标位置和焦点深入到活动视图/对象，然后调用方法，而不是为每个视图在各处创建大量侦听器。

这会提高应用程序的整体响应能力还是在很大程度上毫无意义？

很难创建单元测试来检查，我希望从其他人那里得到一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:55:05.977

您仍然需要将这些方法挂在事件上，不是吗？实际上，我认为并希望事件驱动范式被设计和实现为最佳解决方案......我不知道浏览器中的事件究竟是如何实现的，但我也希望有某种全局层可以捕获所有事件，然后它可以适当地执行搜索是否为它注册了任何侦听器，然后它可能会通过 DOM 并检查选择器。当一切都合适时，它会调用提供的方法..

# jakarta-ee - 教程中的 java.lang.reflect.InvocationTargetException 错误

> ID：11633116
> 
> 赞同：0
> 
> 时间：2012-07-24T14:31:09.467
> 
> 标签：jakarta-ee, glassfish, ejb

[我正在按照这个优秀的教程](http://programming.manessinger.com/tutorials/an-eclipse-glassfish-java-ee-6-tutorial/)学习 Java EE、Glassfish 和 EJB 。

我被困在第 9.i 节。我得到了作者提到的 java.lang.reflect.InvocationTargetException 错误，并做了与他相同的修复。但是，我仍然遇到同样的错误，并且我一直在寻找答案已经有一段时间了。这是我尝试过的。

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="cookbookEJB">
        <jta-data-source>jdbc/cookbook</jta-data-source>
        <class>com.davidlacerte.cookbook.entity.City</class>
        <class>com.davidlacerte.cookbook.entity.Country</class>
        <properties>
            <property name="eclipselink.logging.level" value="FINE"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我的 Glassfish 安装确实有一个 jdbc/cookbook JDBC 资源。现在，我添加了以下代码，因为 Glassfish 堆栈跟踪没有帮助：

```
@Override
public long countryCount() {
    try
    {
    return eao.countCountries();
    }
    catch(Exception e)
    {
        Throwable t = e.getCause();

        while(t != null)
        {
            System.out.println(t.getMessage());
            t = t.getCause();
        }
    }

    return -1;
} 
```

这是输出：

```
INFO: Exception thrown from bean: java.lang.VerifyError: Expecting a stackmap frame at branch target 16 in method com.davidlacerte.cookbook.entity.City._persistence_checkFetched(Ljava/lang/String;)V at offset 5
INFO: Expecting a stackmap frame at branch target 16 in method com.davidlacerte.cookbook.entity.City._persistence_checkFetched(Ljava/lang/String;)V at offset 5 
```

我用谷歌搜索了“除了堆栈图框架...”错误，许多博客建议`-XX:-UseSplitVerifier`在我的 VM 参数中添加一个参数：我做到了，没有运气。

所以，这就是我所知道的以及我目前所尝试的全部。正如我所说，我对 EJB 和 Glassfish 了解不多，所以如果您需要更多信息，请询问。我有点生气，在这里。

**编辑**：只需重新阅读服务器日志并发现：

```
WARNING: Container org.glassfish.webservices.JAXWSContainer@3dbfc326 doesn't support class com.sun.xml.ws.api.server.Module 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:52:26.450

好的，我讨厌这个，但我降级到 1.6 JDK 并且它运行良好。由于缺乏更好的解决方案（我更喜欢运行最新最好的），请使用 1.6 版本。

# html - 相同内容的 mod_rewrite 重写规则

> ID：11633118
> 
> 赞同：1
> 
> 时间：2012-07-24T14:31:20.780
> 
> 标签：html, apache, url, mod-rewrite

你好我有以下关于mod_rewrite的问题：

我已经建立了一个名为`example.php`

现在我仍在寻找以下问题的重写：

由于不同的语言但页面的内容相同，`example.php`我希望在用户输入时进行重写`site.com/beispiel.php`

`example`德语中的同一个词是什么。所以只有一页。但虚构的网址 `site.com/beispiel.php`将是相同的内容。

所以如果有人知道如何解决这个问题，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:05:23.840

重定向和内部重定向是两个不同的东西。

带有代码 302 或 301 的 HTTP 重定向意味着多个 HTTP 请求，用户将在最后看到他已被重定向到 /example.php。内部重定向意味着在服务器上为请求的文件 A 提供一个文件 B，而用户不知道它。

内部重定向不需要 mod-rewrite 的规则。[Alias](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias)和[AliasMatch](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#aliasmatch)指令可用于将一些请求的文件映射到真实文件。

```
Alias /beispiel.php /path/to/my/docroot/example.php 
```

通过使用 Redirect 和 RedirectMatch 指令，也可以在没有 mod_rewrite 的情况下执行外部重定向。

现在您还可以使用 mod_rewrite 来执行这两种类型的重定向（内部和外部）。

```
# internal alias
RewriteRule ^beispiel.php$ /path/to/my/docroot/example.php [L]
# Or external redirection, with a R tag
RewriteRule ^beispiel.php$ example.php [L, NC, R=302] 
```

使用外部重定向 qlways 首先尝试一些处理 302 重定向的 rewriteRiles。当它工作时，您可以使用 301 重定向作为浏览器存储 301 结果，并且在重新启动之前不再询问。

如果你有大量的重定向要执行并且你没有被 .htaccess 文件卡住（即你可以编辑真正的 apache 配置文件），你可以看看[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)来加速你的 rewriteRules。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:45:27.370

我在想：

如果您使用谷歌翻译器，如 [使用谷歌翻译器 API 翻译 PHP $string中所示](https://stackoverflow.com/questions/4640378/translate-a-php-string-using-google-translator-api)

然后从 PHP 重定向到

```
www.yoursite.com/translate.php?translated_language=keyword_from_script 
```

然后使用带有该参数的最后一个答案中的 mod_rewrite ，它应该可以工作吗？

# facebook - Scringo 帮助（冻结/Sigbart）

> ID：11633122
> 
> 赞同：0
> 
> 时间：2012-07-24T14:31:52.460
> 
> 标签：facebook, freeze, scringo

我在我的应用程序中设置了 Scringo。但是，在用户登录 facebook 并返回应用程序后，应用程序冻结，我的日志显示此错误。

```
2012-07-24 10:25:56.724 BlackOps2[3558:907] -[__NSDictionaryM stringByAddingPercentEscapesUsingEncoding:]: unrecognized selector sent to instance 0x1cd510
2012-07-24 10:25:56.728 BlackOps2[3558:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryM stringByAddingPercentEscapesUsingEncoding:]: unrecognized selector sent to instance 0x1cd510'
*** First throw call stack:
(0x3544356b 0x3572397f 0x354474fb 0x35445c0d 0x35397e68 0x2ba0b 0x24ead 0x30b49 0x42fc7 0x2242f 0x1c4f1 0x1c8c3 0x35fec5b5 0x35f3d991 0x35f3d8ad 0x318a6acf 0x318a61bb 0x318ce323 0x3538a2e1 0x318ce783 0x31832c65 0x35414143 0x354139a9 0x354126ef 0x35390c1d 0x35390aa9 0x3825433b 0x364fa535 0x2731 0x26f0)
libc++abi.dylib: terminate called throwing an exception
(gdb) 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:58:33.217

我认为问题在于您的 FB 应用程序包含一些高级设置，告诉 Facebook 使用默认情况下应仅在 2012 年 10 月激活的响应格式，而您的 Scringo 版本仍然不支持它。

要使其正常工作，您应该：1) 更新到最新的 Scringo 版本或 2) 转到您的 FB 应用程序设置（您注册 FB 应用程序的位置），然后选择高级设置。在那里，您会看到一个迁移部分。确保以下字段已禁用：2012 年 10 月的重大更改（这将持续到 2012 年 10 月 3 日）

# asp.net-mvc - 从一页到另一页时如何保留路由值？

> ID：11633124
> 
> 赞同：0
> 
> 时间：2012-07-24T14:31:53.940
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routes

我有一个网址是：`http://localhost:3018/TestEdit/Index/5/100100/44`。但是当我点击另一个页面的链接时，我得到了这个：`http://localhost:3018/AnotherPage`. 我希望它自动成为：`http://localhost:3018/AnotherPage/Index/5/100100/44`. 路由系统是否有办法处理这个问题？还是我必须通过 ActionLink 显式传递路由值？（这就是我现在的做法。）

简而言之，请提供最佳实践示例（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:47:13.877

考虑创建您自己的 ActionLink 扩展方法来执行此操作 - 只需从上下文中获取当前路由数据并使用它调用默认 ActionLink。3 行代码，并在视图中为您节省许多脏东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:41:43.333

不，没有办法。您必须手动传递它们。

# python - 如何使用 cxOracle 在 Python 中返回 SQLPLUS 变量

> ID：11633125
> 
> 赞同：2
> 
> 时间：2012-07-24T14:31:57.547
> 
> 标签：python, oracle, sqlplus

我有以下 SQLPlus 语法。现在我需要使用 cxOracle 在 Python 中运行它。我怎么做？

```
variable my_cnt number;
begin
   :my_cnt := 10;
    commit;
end;
.
/
select :my_cnt from dual; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:19:52.410

干得好。

```
import cx_Oracle
connstr = 'scott/tiger@127.0.0.1:1521/xe'
orcl = cx_Oracle.connect(connstr)

curs = orcl.cursor()
number_var = curs.var(cx_Oracle.NUMBER)
curs.execute(r"""BEGIN :my_cnt := 10; END;""", {'my_cnt':number_var})

print number_var.getvalue()

curs.close()
orcl.close() 
```

# iphone - 在ARC下的头文件中声明IBOutlets的正确方法？

> ID：11633126
> 
> 赞同：0
> 
> 时间：2012-07-24T14:32:02.117
> 
> 标签：iphone, objective-c, automatic-ref-counting, iboutlet

在 ARC 之前，我会`IBOulets`在标题中声明如下：

```
- (IBOutlet) UIButton * aButton

@property (nonatomic, retain) IBOutlet UIButton * aButton; 
```

然后在 .m 文件中

```
@synthesize aButton; 
```

在 arc 下执行上述操作的等效正确方法是什么？我可以声明：

```
@property (weak)IBOutlet UIButton * aButton ? 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:35:00.670

```
@property (strong)IBOutlet UIButton *aButton 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:38:52.103

在某些情况下，您可能希望改变强/弱属性。看看：[在 ARC 下，IBOutlets 应该强还是弱？](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc)

![在此处输入图像描述](../Images/8288cc026e61d7ff03da79b7077742e0.png)

# web-services - jsonpCallback 出错。内部服务器错误

> ID：11633127
> 
> 赞同：0
> 
> 时间：2012-07-24T14:32:02.650
> 
> 标签：web-services, jquery-mobile, cordova, jsonp, asmx

我正在尝试将 ajax（jquery-mobile 和 PhoneGap）访问到 Web 服务（asmx），但是有什么问题，什么不是。这是js代码：

```
$.ajax({
    type        : "POST",
    url         : webMethod,
    data        : param,
    dataType    : 'jsonp',
    jsonp       : 'callback',
    jsonpCallback   : 'jsonpCallback',
    success     : function(data) {  
                   alert(data.nombre);  
                  },
    error       : function(x,y,z) {
                   alert("-- " + x+'\n'+y+'\n'+z + " --");
              }
    });

    function jsonpCallback(){
        alert("OK");
    } 
```

和网络服务（asmx）

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public void WebServiceTest()
{
  HttpContext.Current.Response.ContentType = "application/json";
  string qs = HttpContext.Current.Request.QueryString["jsonpCallback"];
  HttpContext.Current.Response.Write(qs + "( [{ \"name\": \"John\", \"message\": \"Ok\"}] )");
} 
```

当我运行调试给我一个错误-->

callback=jsonpCallback&_=1343139529496 500（内部服务器错误）

我已经尝试了一千件事（或者至少这是我的感觉......）

我将非常感谢您的建议。

PS 原谅我糟糕的英语

# c# - 自动 sql 表备份

> ID：11633128
> 
> 赞同：1
> 
> 时间：2012-07-24T14:32:07.293
> 
> 标签：c#, sql, sql-server-2008, bcp

有没有办法可以编写 C# 代码来将 SQL 表的结构及其数据内容写入文本文件？到目前为止，我想出了如何使用 BCP 复制数据，但我不确定如何使用 C# 复制表创建脚本。

我走的是正确的道路还是有更好的方法来做到这一点？我基本上想自动化可以在 SQL Server 中创建的表备份脚本。理想的输出是两个 sql 文件。一种用于创建表，另一种用于填充数据。BCP 数据不是 SQL 格式，因此您不能只在 SQL 服务器中执行它（这是我想要的，这只会使其对我工作的人更加用户友好）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T14:33:25.893

您可以使用[SQL 数据库管理对象](http://msdn.microsoft.com/en-us/library/ms131540%28v=sql.105%29.aspx)(SQL-DMO) 执行此操作。

脚本对象的示例在这里：http: [//msdn.microsoft.com/en-us/library/ms162153](http://msdn.microsoft.com/en-us/library/ms162153)

# nullpointerexception - MyBatis Nullpointer 与 @Autowired 相关

> ID：11633130
> 
> 赞同：0
> 
> 时间：2012-07-24T14:32:14.630
> 
> 标签：nullpointerexception, mybatis, autowired

我正在尝试编写一个程序，该程序将使用 myBatis 写入 mySql 数据库。我需要创建一个包含 id 和值的表。目前我有一个标签类，它包含这些值、一个标签 dao 接口、一个标签 xml 实现和一个 main 方法。我收到一个我认为与@Autowired 语句有关的空指针异常。如果我在初始化接口时使用@Autowired 语句，在编写接口时使用@Param 语句，我的程序在代码中的哪里知道在哪里可以找到包含信息的bean 以找到xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:31:38.600

这取决于您如何配置 Spring DI。我建议使用 Java 配置而不是 XML 来配置您的应用程序，但这是个人偏好。[在此处](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)查看 Java 配置的 Spring 文档。

# jmeter - JMeter：如何使用父级的时间戳

> ID：11633132
> 
> 赞同：0
> 
> 时间：2012-07-24T14:32:18.370
> 
> 标签：jmeter

我正在测试一组 url 以进行性能测试。我们有一个 SLA 规定，一组 URLS 在特定时间范围内必须有平均 80% 的成功率。SLA 的逻辑在单独的应用程序中完成。数据从 JMeter 输出馈送到数据库。

我需要一种方法来识别这些 url 的 5 个测试，以便应用程序知道它们属于同一个测试。我使用事务控制器对所有 URL 测试进行分组，但我仍然看不到如何将标识符放入生成的输出文件中（由 View Results Tree Listener 完成）。如果我可以重用父级的时间戳，即单个 HTTP 请求的事务控制器，那将是我的一天。我尝试在事务控制器下添加用户定义的变量，但我看不到如何将变量的值输出到输出文件中。

有没有类似的可能？

最好的问候， 维姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:11:44.367

使用 Beanshell 采样器将值存储在 jmeter 上下文中，然后在 jeter.properties 中取消注释 sample_variables 并添加存储值的名称：

# JMeter 变量名称的可选列表，其值将保存在结果数据文件中。

# 使用逗号分隔名称。例如：

# sample_variables=SESSION_ID,REFERENCE

问候

菲利普·M。

# xslt - 如何使用 XSLT 处理远程 XML 文件

> ID：11633134
> 
> 赞同：2
> 
> 时间：2012-07-24T14:32:23.207
> 
> 标签：xslt

我正在处理远程 XML（仅通过向 XSLT 处理器提供 URL），我不能让它“获取”额外的 XML 资源。我在这里阅读了类似的问题，但它们似乎都不适用。

以下是正在处理的远程 XML 的摘录：

```
...
<item>
    <position>1</position>
    <rec id="05a59ca2"/>
</item>
<item>
    <position>2</position>
    <rec id="48e7c3f1"/>
</item>
... 
```

现在，这些`id`属性可用于引用远程 XML 源 (http://some-server/id)，其中存储了有关每条记录的其他详细信息，并且我希望能够使用相同的 XSLT 处理它们，而无需使用其他工具，例如方便和简单。

那么，我可以使用 XSLT 处理远程 XML 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:57:32.143

您当然可以使用文档功能来做到这一点

**例子：**

```
<xsl:variable name="url" select="concat('http://mysite.com/',$id)" />
<xsl:variable name="IDmeta" select="document($url)"/> 
```

测试你可以做

```
<xsl:copy-of select="$IDmeta"/> 
```

看看格式是什么

**参考**

[http://www.w3schools.com/xsl/func_document.asp](http://www.w3schools.com/xsl/func_document.asp)

# php - mysql WP自定义查询

> ID：11633142
> 
> 赞同：-1
> 
> 时间：2012-07-24T14:32:35.640
> 
> 标签：php, mysql, wordpress

此代码旨在在 wordpress 查询中选择具有选定元值的帖子

```
<?php $values = $wpdb->get_results("SELECT DISTINCT meta_value FROM $wpdb->postmeta WHERE meta_key  = 'wpcf-scr'",ARRAY_A);?>
<select name="wpcf-scr">
<option value="">default</option>
<?php foreach ($values as $value):?>
<?php if($value['meta_value']):?>
    <option value="<?php echo $value['meta_value']?>"><?php echo $value['meta_value']?></option>
<?php endif;?>
<?php endforeach;?>
</select> 
```

我需要重新使用代码，但选择带有标签（手动分配）而不是元值的帖子......

下面这样的东西只是为了解释（这是错误的）

```
<?php $values = $wpdb->get_results("SELECT DISTINCT post_tags FROM $wpdb->tags ",ARRAY_A);?>
<select name="tags">
<option value="">default</option>
<option value="tag1">tag1</option>
<option value="tag1">tag2</option>
<option value="tag1">tag3</option>
<option value="tag1">tag4</option>
</select> 
```

如何正确制作第二个示例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:51:51.857

尝试使用 wp 函数获取标签.. get_tags() 然后迭代循环..

# ruby - 我可以“追溯地”从模块中添加类方法（在它已经被包含之后）吗？

> ID：11633145
> 
> 赞同：2
> 
> 时间：2012-07-24T14:32:41.403
> 
> 标签：ruby, module, metaprogramming, class-method

在 Ruby 中，我可以这样做：

```
module Foo
end

class Bar
  include Foo
end

module Foo
  def do_something_instancey
    puts "I'm an instance!"
  end
end 
```

然后，如果我实例化一个`Bar`对象，我可以调用`do_something_instancey`它：

```
b = Bar.new
b.do_something_instancey 
```

但是，如果我这样做...

```
module Foo
  def self.included(base)
    def base.do_something_classy do
      puts "I'm a class!"
    end
  end
end 
```

我的理解是，因为我`Foo`在定义该类方法`Bar` *之前*包含在内，所以我无法调用`Bar.do_something_classy`，因为它从未“附加”到`Bar`.

我意识到这可能有点不准确/不是真正正确的术语。无论如何，在上面的例子中，有没有办法在模块已经包含之后`Bar`附加一个类方法？`Foo`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:58:20.927

这是类和实例方法的示例：

```
module Foo
  def self.included(base)
    base.extend(ClassMethods)
  end

   module ClassMethods
   end
end

class Bar
  include Foo
end

module Foo
  def do_something_instancey
    puts "I'm an instance!"
  end

  module ClassMethods
    def do_something_classy
      puts "I'm a class!"
    end
  end
end

b = Bar.new
b.do_something_instancey
# => I'm an instance!
Bar.do_something_classy
# => I'm a class! 
```

* * *

要将类方法添加到（已经）包含特定模块的每个类中，您可以遍历 Ruby 的[`ObjectSpace`](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html)：

```
ObjectSpace.each_object(Class) do |klass|
  if klass.include? Foo
    klass.define_singleton_method(:do_something_classy) do
      puts "I'm a class!"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T21:23:24.457

[retroactive_module_inclusion](http://rubygems.org/gems/retroactive_module_inclusion) gem的描述：

> 这个 gem 规避了“动态模块包含”（又名“双重包含”）问题，即 M.module_eval { include N } 不会使模块 N 的方法可用于预先包含模块 M 的模块和类，仅适用于其后包含它的人。这种行为损害了最不意外的原则，特别是因为如果 K 是一个类，那么 K.class_eval { include M }*确实*使 M 的所有方法对之前继承它的所有类都可用。

# javascript - jquery函数中var的范围？

> ID：11633147
> 
> 赞同：0
> 
> 时间：2012-07-24T14:32:57.917
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [Ajax 中的异步是什么意思？](https://stackoverflow.com/questions/3393751/what-does-asynchronous-means-in-ajax)

为什么我的 var "temp" 在 ajax 之后是 0？

```
function calc7() {
            var temp = 0;
            $.ajax({
                type: "POST",
                url: 'Helpers/CalcResult7.ashx',
                data: { GU_ID: '<%=Request.QueryString["GUID"] %>' },
                success: function (data) {
                    list1 = eval(data);
                    temp = parseFloat(myJSONObject.bindings[0].value);
                    $("#<%=ProResult7.GetSpanId %>").text(addCommas(temp));
                }
            });
            return temp;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:40:28.497

Ajax 调用是异步的，但您可以使用[CommonJS Promises/A 模式](http://wiki.commonjs.org/wiki/Promises/A)来实现您想要的。jQuery 提供了它自己的实现：[`jQuery.Deferred()`](http://api.jquery.com/category/deferred-object/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:46:32.003

正如其他人在这里提到的那样，因为 ajax 是异步的，所以不能保证在 return 语句之前获得更新的 temp 变量。最好在您的成功职能范围内工作。但是，如果您绝对必须等待该调用完成并返回 temp 变量，您可以通过添加使其成为非异步`async: false`

```
function calc7() {
        var temp = 0;
        $.ajax({
            type: "POST",
            url: 'Helpers/CalcResult7.ashx',
            data: { GU_ID: '<%=Request.QueryString["GUID"] %>' },
            async: false,
            success: function (data) {
                list1 = eval(data);
                temp = parseFloat(myJSONObject.bindings[0].value);
                $("#<%=ProResult7.GetSpanId %>").text(addCommas(temp));
            }
        });
        return temp;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:33:55.660

因为ajax调用是异步的，所以在更新之前就返回了temp...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:33:57.323

因为在服务器返回 HTTP 响应之前，成功函数不会运行。

Ajax 是异步的。

对成功函数（或从中调用的函数）中的数据执行您想要执行的操作。

不要试图等待响应然后将数据返回给调用函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T14:59:35.587

S.ajax/$.post/$.get 等等，所有这些都是异步过程（这意味着，你会在 $.ajax 完成之前退出循环，即使它出来后会进入服务器端循环）

```
function calc7() {
            var temp = 0;
            $.ajax({
                type: "POST",
                .............
                  ..............
                }
            });
            return temp;
        } 
```

因此，如果您在循环之后进行检查，则以下语句可能尚未执行（取决于数据集）。temp = parseFloat(myJSONObject.bindings[0].value);

因此，要检查临时变量中的数据，您应该在 $.ajax 中放置一个调试器/警报。例子 ：

```
function calc7() {
            var temp = 0;
            $.ajax({
                type: "POST",
                url: 'Helpers/CalcResult7.ashx',
                data: { GU_ID: '<%=Request.QueryString["GUID"] %>' },
                success: function (data) {
                    list1 = eval(data);
                    temp = parseFloat(myJSONObject.bindings[0].value);
alert(temp);
                    $("#<%=ProResult7.GetSpanId %>").text(addCommas(temp));
                }
            });
            return temp;
        } 
```

现在您将获得 temp 的值

# c - 套接字读/写错误

> ID：11633150
> 
> 赞同：0
> 
> 时间：2012-07-24T14:33:06.120
> 
> 标签：c, sockets, stream, segmentation-fault

会安装 valgrind 来告诉我问题出在哪里，但不幸的是这台计算机上不能有任何新程序......谁能告诉我这个“回声”程序是否存在明显问题？为朋友这样做，所以不确定客户端的布局是什么，但我知道读取和写入都是有效的套接字描述符，并且我已经测试了 n = write(writes,"I got your消息\n",20); 和 n = write(reads,"I got your message \n",20); 两者都有效，因此可以确认这不是无效 fd 的情况。谢谢！

```
int
main( int argc, char** argv ) {

 int reads = atoi(argv[1]) ; 
 int writes = atoi(argv[3]) ; 
 int n ; 

  char buffer[MAX_LINE];
  memset(buffer, 0, sizeof(buffer));

  int i = 0 ; 
  while (1) {
    read(reads, buffer, sizeof(buffer));
    n = write(writes,buffer,sizeof(buffer));
    if (n < 0)  perror("ERROR reading from socket"); 

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:00:10.693

到目前为止还没有说明的一点：尽管您知道文件描述符是有效的，但您应该对命令行进行一些完整性检查。

```
if (argc < 3) {
       printf("usage: foo: input output\n");
       exit(0);
} 
```

即使在命令行上进行这种健全的检查传递参数也是很危险的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:09:36.230

这两行看起来很可疑：

```
int reads = atoi(argv[1]) ; 
int writes = atoi(argv[3]) ; 
```

您真的在命令行上获得文件/套接字描述符编号吗？从哪里？

检查 and 的返回值[`read(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)，[`write(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)然后检查[`errno(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)- 他们可能会告诉您文件描述符无效（`EBADF`）的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:00:15.230

有一些问题，其中最紧迫的是您可能会在写入时使用 sizeof(buffer) 将垃圾数据向下推到写入套接字。假设您从读取套接字读取数据并且它小于 MAX_LINES。当您去写入该数据时，您将写入您读取的任何内容以及缓冲区末尾的垃圾（即使您在一开始就 memset，连续使用相同的缓冲区而不对不同的读取大小做出反应可能会产生一些垃圾。

尝试从读取中获取返回值并在您的写入中使用它。如果读取返回指示错误，请清理并退出或重试，具体取决于您希望程序的行为方式。

```
int n, size;
while (1) {
   size = read(reads, buffer, sizeof(buffer));

   if (size > 0) {
       n = write(writes, buffer, size);

       if (n != size) {
           // write error, do something
       }  
   } else {
       // Read error, do something
   }
} 
```

当然，这假设您的写入和读取是有效的文件描述符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:39:21.680

1.  `memset()`不需要，只要您更改以下内容（尽管如此，您应该这样做）。
2.  `read()`有一个结果，告诉你它实际读了多少。你应该这样做`write()`，以便只写你实际拥有的东西，消除归零的需要。
3.  `MAX_LINE`至少应该是 512，如果不是更多的话。

可能还有更多问题，但我认为我有最重要的问题。

# ipad - iPad上的单元格中的按钮没有响应

> ID：11633153
> 
> 赞同：0
> 
> 时间：2012-07-24T14:33:22.203
> 
> 标签：ipad, button, cell

我对放置在 iPad 上的表格视图单元格中的按钮有一个奇怪的问题。

这里有两张截图便于理解（按钮在右侧，背景为白色）：

[苹果手机](http://imageshack.us/photo/my-images/822/bildschirmfoto20120724u.png)

[iPad](http://imageshack.us/photo/my-images/856/bildschirmfoto20120724u.png)

iPhone 没有问题，但在 iPad 上这个按钮没有响应。定位似乎是正确的，因为它是正确绘制的。

这是我的自定义 UITableViewCell 中的代码：

```
rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
[rightButton setContentMode:UIViewContentModeCenter];
[rightButton setBackgroundColor:[UIColor whiteColor]];
int xPos = buttonWidth-rightButton.frame.size.width;
[rightButton setFrame:CGRectMake(xPos, 0, buttonHeight, buttonHeight)];
[self.contentView addSubview:rightButton];

//buttonWidth = 310, buttonHeight = 60 
```

图像和目标由另一个类设置：

```
[cell.rightButton setImage:[UIImage imageNamed:@"options.png"] forState:UIControlStateNormal];
[cell.rightButton addTarget:self action:@selector(showOptions:) forControlEvents:UIControlEventTouchUpInside]; 
```

在将所有元素放入单元格后，我也尝试过

```
 [self.contentView bringSubviewToFront: rightButton]; 
```

以确保按钮位于最上面。

没用。

对此有什么想法吗？

* * *

我仍然找不到解决方案。

在此期间我做了什么：

*   可视化放置在单元格中的所有对象（以显示不需要的重叠）
*   在所有其他单元格对象上禁用用户交互

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:56:54.960

好的，我发现了一些东西：

对于 iPad，该按钮仅在水平放置在前 320 个像素之间时才会响应。

这是调试器在触摸按钮时所说的内容（位于右侧较远的位置）：

```
(lldb) po touches
(NSSet *) $1 = 0x08249cd0 {(
<UITouch: 0x82c63d0> phase: Began tap count: 1 window: <UIWindow: 0x8266ca0;
frame = (0 0; 768 1024); opaque = NO; autoresize = RM+BM; 
layer = <UIWindowLayer: 0x8266d60>> view: <SBMultiCell: 0x82cb8a0; baseClass = UITableViewCell; 
frame = (0 0; 744 93); autoresize = W; layer = <CALayer: 0x82cb830>> 
location in window: {713, 123} previous location in window: {713, 123} 
location in view: {701, 44} previous location in view: {701, 44}
)}

(lldb) po rightButton
(UIButton *) $2 = 0x082cd500 <UIButton: 0x82cd500; 
frame = (658 0; 86 86); opaque = NO; layer = <CALayer: 0x82cd5e0>> 
```

触摸位置恰好在按钮尺寸之间，并且所有内容都正确绘制。正如我之前写的，没有重叠的元素或类似的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:47:03.277

首先试试这个：

```
rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
[rightButton setContentMode:UIViewContentModeCenter];
[rightButton setBackgroundColor:[UIColor whiteColor]];
int xPos = buttonWidth-rightButton.frame.size.width;
[rightButton setFrame:CGRectMake(xPos, 0, buttonHeight, buttonHeight)];
[self.contentView addSubview:rightButton];
[self.contentView bringSubviewToFront: rightButton]
[self.contentView bringSubviewToFront: rightButton];
rightButton.userInteractionEnabled = YES;

[cell.rightButton setImage:[UIImage imageNamed:@"options.png"] forState:UIControlStateNormal];
[cell.rightButton addTarget:self action:@selector(showOptions:) forControlEvents:UIControlEventTouchUpInside];
[cell.rightButton setUserInteractionEnabled:YES]; 
```

或者你也可以在你的按钮上添加一个**点击手势**，它会解决这个问题：而不是这条线，

```
[cell.rightButton addTarget:self action:@selector(showOptions:) forControlEvents:UIControlEventTouchUpInside]; 
```

写这个，

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showOptions:)];
cell.rightButton addGestureRecognizer:tap];
[cell.rightButton setUserInteractionEnabled:YES]; 
```

# mvvm - 如何使用 MVVM 使用 WPF 应用程序实现 Specflow

> ID：11633154
> 
> 赞同：2
> 
> 时间：2012-07-24T14:33:22.973
> 
> 标签：mvvm, viewmodel, specflow, coded-ui-tests

我们有一个使用 MVVM 模式在 wpf + DevExpress 中开发的应用程序。我们需要在视图模型级别上使用 MStest 实现 Specflow。

有没有人试过这个？任何指针？codedUI 在视图模型级别上有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:51:13.247

当我读到这个问题时，我有两个想法。

首先 - 想想你是否真的需要通过 UI 自动化所有的事情。使用像 MVVM 这样的架构，你有很好的机会在 UI 下点击应用程序，并且仍然可以从你的测试自动化中获得很多。例如，针对 ViewModel 编写您的步骤定义。针对 UI 进行测试很容易冒创建脆弱测试的风险。UI 是大多数应用程序中变化非常频繁的部分。命中 UI 的测试需要以某种方式处理这个问题（稍后会详细介绍）。

其次，对于您需要针对 UI 自动化的事情，请考虑使用[White](http://white.codeplex.com/)，它是 UI 自动化库之上的一个很好的面向对象抽象。我已经广泛使用它并且喜欢它。

对于任何自动化，请务必在实际自动化之上创建一个抽象，例如使用驱动程序模式。一种简单的方法是创建一个屏幕/页面对象，该对象具有与相关屏幕/页面交互的属性和方法。然后，您的步骤定义将使用这些包装器对象。

保持你的步骤定义很薄，你的包装对象很胖。有点像 MVC 模式中的控制器。更多关于[这里](http://www.marcusoft.net/2011/04/clean-up-your-stepsuse-page-objects-in.html)

我希望这可以帮到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:22:28.123

好吧，我还没有尝试过，但我看不出有什么问题。通过使用specflow，您可以创建方法来做一件事，说“用户按下了关于按钮”，您的代码将是这样的

```
[Given(@"The user presses the about button")]
public void TheUserPressesTheAboutButton()
{ 
    this.UIMap.PressAboutButton();
} 
```

您可能不得不摆弄来创建所有方法，但这没什么大不了的。[这里](http://ixkormachev-sf-and-cui.blogspot.com/)有一个简单的指南。控件的命名和标识可能是一个小故障，以便 CUIT 构建器能够找到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:05:42.087

是的。它工作得很好。最大的挑战是真正定义你的句子结构和 Given/When/Then 语句，以便它们保持一致和可重用。否则，您最终会得到一个方法的标签和 5-10 个给定。不是真正可维护的。

我们使用 Specflow 对 MVVM 以及其他业务组件进行单元测试。Given 语句基本上会设置模拟数据，然后执行测试：

```
Given I have created a database context
And it contains the following Books
|ISBN   | Author  | Title  |
... 
```

我还使用 specflow 进行功能测试（端到端），通过 TFS 进行自动化测试。部署数据库和服务器（使用真实数据或测试数据），然后针对该服务器/数据库执行功能测试套件（创建数据、修改数据等）。

# c# - WCF 如何同时与 Web 应用程序和 Sharepoint Web 服务通信？

> ID：11633156
> 
> 赞同：1
> 
> 时间：2012-07-24T14:33:24.653
> 
> 标签：c#, wcf, web-services, sharepoint, authentication

**Web 应用程序 -> WCF 服务 -> Sharepoint 用户配置文件 Web 服务**

我有一个 Web 应用程序、一个 WCF 服务和 Sharepoint 2010 Web 服务。

Sharepoint 2010 默认使用安全模式 =“TransportCredential only”进行身份验证，Web 应用程序使用“Windows”作为安全模式。

sharepoint 2010 服务使用 Ntlm 作为客户端凭据类型，而 Web 应用程序使用“Windows”作为客户端凭据类型。

如何将 WCF 服务配置为能够同时与 Sharepoint 服务和 Web 应用程序进行通信。

**Web应用程序**

```
<security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="">
              <extendedProtectionPolicy policyEnforcement="Never"/>
            </transport>
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" establishSecurityContext="true"/>
          </security> 
```

**WCF 服务**

```
<security mode="TransportCredentialOnly">
      <transport clientCredentialType="Ntlm" proxyCredentialType="None"
       realm="" />
      <message clientCredentialType="UserName" algorithmSuite="Default" />
     </security> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:50:15.510

**蒂姆帮我得到了答案**

您是否考虑过公开单独的端点？一个用于 Sharepoint，一个用于 Web 应用程序？这将允许您单独为每个端点配置安全性。**-蒂姆**

# iphone - 垂直或水平翻转图像后，图像向相反方向旋转

> ID：11633160
> 
> 赞同：1
> 
> 时间：2012-07-24T14:33:27.540
> 
> 标签：iphone, objective-c, ios4, uigesturerecognizer, image-rotation

将图像翻转为垂直或水平后旋转图像的问题。我只是在垂直和水平翻转按钮单击时更改图像的比例。

**对于垂直翻转图像 m 使用代码：-**

```
imageView_Tattoo.transform = CGAffineTransformMakeScale(1, -1);//flips image to up
imageView_Tattoo.transform = CGAffineTransformMakeScale(1, 1);//flips image to down 
```

**对于水平翻转图像： -**

```
imageView_Tattoo.transform = CGAffineTransformMake( -1, 0, 0, 1, 0,1);//flips image to left
imageView_Tattoo.transform = CGAffineTransformMake( 1, 0, 0, 1, 1,0);//flips image to left 
```

**在 self.view 中旋转：-**

```
//Rotates img speedily
     CGFloat mTotalRotation = 0.0;
    if ([rotationRecognizer state] == UIGestureRecognizerStateRecognized) 
    {
        mTotalRotation += rotationRecognizer.rotation;
        return;
    }

    imageView_Tattoo.transform = CGAffineTransformRotate(imageView_Tattoo.transform, rotationRecognizer.rotation); 
```

在上面的旋转代码中，每当我尝试旋转图像时，它都会快速旋转。

＆如果我使用任何其他代码来旋转我的图像，例如： -

```
CGFloat angle = rotationRecognizer.rotation;
imageView_Tattoo.transform = CGAffineTransformRotate(imageView_Tattoo.transform, angle);
rotationRecognizer.rotation = 0.0; 
```

图像完美旋转，但翻转图像后，图像以相反方向旋转。

任何类型的帮助表示赞赏.......谢谢你

# linux - 目录名的选项无效

> ID：11633161
> 
> 赞同：1
> 
> 时间：2012-07-24T14:33:47.813
> 
> 标签：linux, bash

我有一个名为 abc.sh 的简单脚本，如下所示，它设置环境变量

```
#!/bin/bash
sourcePath () {
filename=`basename $0`

current_dir="./"$filename
if [ "$current_dir" = "$0" ]; then        SRC_DIR=$(pwd) 
         SRC_DIR=$(cd "$SRC_DIR/.."; pwd)
else        SRC_DIR=$(cd "$(dirname "$0")/.."; pwd)
fi
}

sourcePath
echo $SRC_DIR
export SRC_DIR 
```

我希望这个脚本在我当前的 shell 环境中设置变量 SRC_DIR。因此，当我执行 source abc.sh 时，我收到一条错误消息，指出 dirname 的选项无效。但是如果我用 ./abc.sh 运行这个文件，我不会得到任何错误，但是它不会导出变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:45:45.310

部分问题是当您获取脚本时 $0 具有不同的值，因为获取与直接向 shell 键入命令相同。所以当你运行脚本时，$0 是 abc.sh，但是当你获取它时，$0 是 /bin/bash。您可以通过设置 -x 标志看到这一点：

```
set -x
source abc.sh 
```

但我不能确定这是唯一的问题，因为当我获取脚本时，我没有从 dirname 得到错误，并且脚本打印“/”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:42:44.327

如果您这样做`source`，则`$0`不会更改（不会是您的可执行文件的名称，例如：）`./abc.sh`。

# php - 未在 html 文档中声明的字符编码

> ID：11633162
> 
> 赞同：16
> 
> 时间：2012-07-24T14:33:48.633
> 
> 标签：php, encoding

我有一个文件，我收到一个非常奇怪的错误。错误是：

```
The character encoding of the HTML document was not declared. 
The document will render with garbled text in some browser configurations if 
the document contains characters from outside the US-ASCII range. 
The character encoding of the page must to be declared in the document or 
in the transfer protocol. 
```

来自的文件是（indexmws.php）：

```
session_start();
if(!isset($_SESSION['validUser']) || $_SESSION['validUser'] !== true){
header('Location: loginmws.php');
}

include_once('db.php');
include_once('amazonmws.php');
include_once('decidemws.php');
include_once('author.php');
include_once('amazonPricingMWS.php');

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Decision Maker</title> 
```

这是不引发错误的文件 (index.php) 的完全副本，除了添加 amazonPricingMWS.php 并重定向到标题中带有 mws.php 的页面：

```
session_start();
if(!isset($_SESSION['validUser']) || $_SESSION['validUser'] !== true){
header('Location: login.php');
}

include_once('db.php');
include_once('amazon.php');
include_once('decide.php');
include_once('author.php');

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Decision Maker</title> 
```

谁能向我解释为什么我在 indexmws.php 中出现此错误？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-24T15:25:10.443

出现错误是因为浏览器期望文件的前 1024 个字节中的编码格式。在第一种情况下，可能是包含文件输出了一些内容。

浏览器现在缓冲文件的前 1024 个字节以检查字符编码。如果在前 1024 个字节中没有遇到编码描述，则会显示此警告。

在您的情况下，您可以在包含其他文件之前使用 php 标头来指定内容类型：

```
header('Content-type: text/html; charset=utf-8'); 
```

有关更多信息，请阅读： http: [//gtmetrix.com/specify-a-character-set-early.html](http://gtmetrix.com/specify-a-character-set-early.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T13:02:20.713

我有类似的问题但这背后的确切原因是我错过了以下添加

```
<meta content="utf-8" http-equiv="encoding"> 
```

在头标签之后

```
<meta content="text/html;charset=utf-8" http-equiv="Content-Type"> 
```

# jquery - jQuery倒计时完成后删除

> ID：11633163
> 
> 赞同：0
> 
> 时间：2012-07-24T14:33:48.997
> 
> 标签：jquery

下午，

我正在为我正在编写的测验应用程序使用以下倒计时。

```
 var count = 60;
    countdown = setInterval(function(){
    $("p.countdown").html(count + " seconds remaining!");
    if (count == 0) {
        $('#QuizQuestions').hide();
        $('#QuizFail').show();
        $('.anscountFail').html("Sorry, you ran out of time!");
    }
    count--;
    }, 1000); 
```

一旦所有的问题都得到了回答，我就会这样做

```
 $('p.countdown').remove(); 
```

删除 p.countdown。我的问题是，即使删除了这个页面，为什么页面仍然会进入失败页面？如果所有问题都已回答，我该如何停止倒计时？

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:35:03.940

您还应该清除间隔：

```
clearInterval(countdown); 
```

# html - 为悬停标题文本提供背景

> ID：11633166
> 
> 赞同：0
> 
> 时间：2012-07-24T14:34:00.170
> 
> 标签：html, css, background

可能很简单，但我没有找到解决方案

我写了以下代码。

```
<html>
<head>
<style>
span.dropt {
   border-bottom: thin dotted;
   background:white;
}
</style>
</head>
<body>
   <span class="dropt" title="Title for the pop-up">Hot Zone Text
   </span>
</body>
</html> 
```

在这里，我想要的是，我想`background color/image`在鼠标悬停时给出“弹出窗口的标题”。我试过但我没有得到解决方案。任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:38:49.863

Jquery“工具提示”是它的正确解决方案。这里有一些资源给你：

*   [http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)
*   [http://codecanyon.net/item/the-tooltip/150532?ref=1stwebdesigner](http://codecanyon.net/item/the-tooltip/150532?ref=1stwebdesigner)

但如果你想自己做一个。使用时，jquery 尝试附加获取元素的标题属性，然后在事件悬停时将其附加到跨度。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('.dropt').hover(function(){
        var title = $(this).attr('title');
        $(this).append('<span class="tooltip">'+title+'</span>');
    },function(){
        $('.tooltip',this).fadeOut('slow').remove();
    });
});
</script>
<style>
    .tooltip { 
        display:block; 
        padding:5px;
        background:black; 
        color:white;
        min-width:200px;
        font-size:11px;
        line-height:25px;
        text-align:center;
        position:absolute;
        top:-50px;
        border:none;
        border-radius:5px;
        -moz-border-radius:5px;
        -webkit-border-radius:5px;
    }
    .dropt { 
        position:relative; 
        display:block;
        cursor:pointer;
    }
</style>
</head>
<body>
<br><br/>
<span class="dropt" title="Title for the pop-up">Hot Zone Text</span>
</body>
</html> 
```

# php - 设置日期标题以降低 SpamAssassin 分数

> ID：11633170
> 
> 赞同：6
> 
> 时间：2012-07-24T14:34:11.697
> 
> 标签：php, email, date, header, spamassassin

我使用了测试服务 (verifier.port25.com) 来检查从我的 PHP 脚本发送电子邮件时发生的情况。出于某种原因，即使启用了 SPF 和 DKIM，它们也会出现在我的 GMail 垃圾邮件文件夹中。

事实证明，SpamAssassin 得分为 5.3，因此高于 5.0 基准。您可以在下面看到原因。最大的问题是我有一个包含 12 个字母的域（对我来说，我应该为此受到惩罚似乎很疯狂，但显然 12 个字母的域在垃圾邮件发送者中很受欢迎）。由于我不想更改我的域，看起来下一个最佳选择是为日期设置标题，但我不确定如何执行此操作。有人可以帮忙吗？

> 1.0 MISSING_HEADERS 缺少到：标题
> 
> 0.0 HTML_MESSAGE BODY：消息中包含的 HTML
> 
> -0.5 BAYES_05 BODY：贝叶斯垃圾邮件概率为 1 到 5% [分数：0.0345]
> 
> -0.1 DKIM_VALID_AU 消息具有来自作者域的有效 DKIM 或 DK 签名
> 
> 0.1 DKIM_SIGNED 消息有DKIM或DK签名，不一定有效
> 
> -0.1 DKIM_VALID 消息至少有一个有效的 DKIM 或 DK 签名
> 
> 1.4 MISSING_DATE 缺失日期：标题
> 
> 3.5 FROM_12LTRDOM 来自 12 个字母的域

**现有阵列**

```
 $headers = array(
                    'From'          => $from,
                    'Return-Path'   => $sender,
                    'Subject'       => $subject
                    ); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T14:42:29.583

尝试将此添加到您的标题中。

```
"Date: ".date("r")."\r\n" 
```

对于数组：

```
$headers = array(
                'From'          => $from,
                'Return-Path'   => $sender,
                'Subject'       => $subject,
                'Date'  => date("r")
                ); 
```

# php - Php 数组总和分组依据

> ID：11633176
> 
> 赞同：2
> 
> 时间：2012-07-24T14:34:35.500
> 
> 标签：php, arrays, multidimensional-array, group-by, sum

> **可能重复：**
> [使用多维数组按 SUM 分组的 php](https://stackoverflow.com/questions/5269188/php-group-by-sum-using-multi-dimensional-array)

我正在为一家批发公司创建购物车。我稍后也会创建发票。是一样的逻辑。

首先，我将**paket（包装）* paket adeti（包装数量）* fiyatı（价格）**相乘并将其写在列表的末尾。现在我必须计算增值税。主要问题是我们以前不知道增值税率。

可能存在 3 种不同的增值税比率。（这取决于客户选择的产品）可能是一种。

我做了一系列大桶

```
$vats[] = array($row['vat'], $row['wholesaleprice'] - $wholesaleprice); 
```

结果是这样的

```
Array ( 
[0] => Array ( [0] => 18 [1] => 1,07 ) 
[1] => Array ( [0] =>  8 [1] => 0,44 ) 
[2] => Array ( [0] =>  8 [1] => 0,67 ) 
[3] => Array ( [0] => 18 [1] => 0,55 ) 
[4] => Array ( [0] => 18 [1] => 0,19 ) 
[5] => Array ( [0] =>  8 [1] => 0,48 ) 
[6] => Array ( [0] => 18 [1] => 2,59 ) 
[7] => Array ( [0] =>  8 [1] => 0,15 ) 
[8] => Array ( [0] => 18 [1] => 12,97 ) 
) 
```

我必须按比例对增值税组求和...

我想显示像

增值税 (%18) 136,26 里拉 增值税 (%8) 16,90 里拉 增值税 (%1) 9,28 里拉

我怎么能在快捷方式中做到这一点。我检查了数组函数。但我找不到任何有用的东西。

购物车：http: [//i.stack.imgur.com/DDsCq.png](https://i.stack.imgur.com/DDsCq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:49:30.043

尝试这样的事情：

```
<?php

$data = Array ( 
    Array ( 0 => '18', 1 => '1,07' ),
    Array ( 0 => '8', 1 => '0,44' ),
    Array ( 0 => '8', 1 => '0,67' ),
    Array ( 0 => '18', 1 => '0,55' ), 
    Array ( 0 => '18', 1 => '0,19' ),
    Array ( 0 => '8', 1 => '0,48' ),
    Array ( 0 => '18', 1 => '2,59' ),
    Array ( 0 => '8', 1 => '0,15' ),
    Array ( 0 => '18', 1 => '12,97' ) 
);

// predefine array
$data_summ = array();
foreach ( $data as $value ) {
    $data_summ[ $value[0] ] = 0;
}

foreach ( $data as $list ) {
    $number = str_replace( ",", ".", $list[1] ) * 1;
    $data_summ[ $list[0] ] += (float)$number;
}

?> 
```

输出`$data_summ`：

```
Array
(
    [8] => 1.74
    [18] => 17.37
) 
```

如果我理解正确的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:56:36.277

```
<?php

function multiplyArray($array) {
    $result = array();

    foreach ($array as $value) {
        $result[] = array_product(array_map('floatval', str_replace(',', '.', $value)));
    }

    return $result;
}

$array = array(
    0 => array(0 => '18', 1 => '1,07'),
    1 => array(0 => '8', 1 => '0,44'),
    2 => array(0 => '8', 1 => '0,67'),
    3 => array(0 => '18', 1 => '0,55'),
    4 => array(0 => '18', 1 => '0,19'),
    5 => array(0 => '8', 1 => '0,48'),
    6 => array(0 => '18', 1 => '2,59'),
    7 => array(0 => '8', 1 => '0,15'),
    7 => array(0 => '18', 1 => '12,97'),
);

// Outputs
var_dump($array);
var_dump(multiplyArray($array));
var_dump(array_sum(multiplyArray($array))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:35:02.073

当心！上次我处理增值税时，规则非常严格地计算发票中每个行项目的增值税，然后将总增值税相加。

Her Majesties Customs and Excise 不接受合计行项目，然后计算总计的增值税。有两个原因：-

*   简单的贪婪——大多数舍入错误将有利于消费税。
*   实用性——通常单行项目会从装运中丢失、被拒绝或退回——如果首先计算每个发票行的增值税，则更容易计算出要贷记的增值税。

# swi-prolog - SWI Prolog 更改工作目录/获取当前工作目录？

> ID：11633181
> 
> 赞同：13
> 
> 时间：2012-07-24T14:34:42.493
> 
> 标签：swi-prolog

在 SWI Prolog 终端中，如何查看当前工作目录并更改当前工作目录？

我发现：

工作目录（CWD，CWD）

但我不认为这是我需要的

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T17:45:12.040

要获取当前工作目录，请使用`working_directory(CWD, CWD)`.

要更改当前工作目录，请使用`working_directory(_, NewCWD)`.

[在此处](http://www.swi-prolog.org/pldoc/man?predicate=working_directory/2)查看此谓词的手动条目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-26T11:48:35.993

非常简单，只需在终端上打开 prolog 并写入`working_directory(CWD,'NewPath')`。

例如：`working_directory(CWD,'/home/user/prologExerc')`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-26T09:01:07.080

要查看当前目录，请使用：`pwd`。

并改变它使用 : `working_directory(CWD,'path_or_location')`。

示例：`working_directory(CWD,'C:/Users/Student/Destop')`。

请记住更改路径名中斜杠的方向。

# java - 在 java Scanner.next() 中

> ID：11633185
> 
> 赞同：0
> 
> 时间：2012-07-24T14:34:54.413
> 
> 标签：java, java.util.scanner

```
public class Calculator
{

    public static void main(String[] args)
    {
        boolean isValid = false;
        Scanner myScanner = new Scanner(System.in);
        String customerType = null;
        System.out.print("Customer Type? (C/R) ");
        customerType = myScanner.next();
        while (isValid == false)
        {
            System.out.print("Enter Subtotal: ");

            if (myScanner.hasNextDouble())
            {
                double sobTotal = myScanner.nextDouble();
                isValid = true;
            }
            else
            {
                System.out
                        .println("Hay! Entry error please enter a valid number");
            }
            myScanner.nextLine();
        }
    }
} 
```

嗨，我是 java 新手，我像往常一样在 Scanner 类中尝试了一些东西。

有没有办法查看扫描仪的输入？因为你会看到我上面的代码有问题。这是我输入错误数据后控制台窗口的输出。我输入的是 KKK 而不是数字，所以有人可以解释一下为什么我两次收到此错误消息吗？

```
"this is the console" 
Customer Type? (C/R) R
Enter Subtotal: KKK
Hay! Entry error please enter a valid number
Enter Subtotal: Hay! Entry error please enter a valid number
Enter Subtotal: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:52:29.943

如下更改您的代码。

```
boolean isValid = false;
Scanner myScanner = new Scanner(System.in);
String customerType = null;
System.out.print("Customer Type? (C/R) ");
customerType = myScanner.next();

while (!isValid)
{
    System.out.print("Enter Subtotal: ");

    if (myScanner.hasNext())
    {
        try
        {
            double sobTotal =Double.parseDouble(myScanner.next());
            isValid = true;
        }
        catch(Exception e)
        {
            System.out.println("Hay! Entry error please enter a valid number");
        }
    }
} 
```

当您使用`Scanner.nextDouble()`时，它不会使用新行（或其他分隔符）本身，因此返回的下一个标记通常是一个空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:09:15.470

我认为真正的问题是你的循环结构中有一些混淆，这使得在循环的每次迭代中很难理解扫描仪的输入和输出条件。

这是真正发生的事情。我们在 Scanner 中使用一个令牌进入循环，该令牌不是双重的。我们询问扫描仪中是否有一个 double next with `hasNextDouble()`，因为无法将一个标记转换为 double，所以返回 false。我们报告错误并`isValid`保持错误。在分支之后，我们调用`scanner.next()`并消费我们的非双重令牌。我们租用循环，因为 isValid 仍然为假。我们再次询问扫描仪中是否有双下一个。现在扫描器是空的，因为我们消耗了令牌，并且这个调用返回`false`，所以我们报告另一个错误。现在我们打电话`scanner.next()`再次。由于扫描器现在是空的，并且scanner.next() 实现了同步消息传递（I/O），我们现在阻塞直到扫描器接收到一个新的令牌，所以你的程序将停止直到你输入一个新的令牌。尝试在您的控制台中添加更多内容。您可能会重复循环并看到另一个错误。

您想要完成的是在每个循环中，使用一个令牌。如果该标记是双精度，则接受输入并继续，如果不是则报告错误并重复。尝试这样的事情，它应该更清楚地显示扫描仪在每个循环中所做的事情。

```
public class Calculator
{

    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);

        String customerType = null;

        System.out.print("Customer Type? (C/R) ");
        customerType = scan.next();

        Double test = null;
        do{
            try{
                test = scan.nextDouble();       
            }catch (InputMismatchException ime){ //will be thrown if the token we input is not a double
                System.err.println("Error Message");
            }
        }while(test == null);
    }
} 
```

请注意，我使用包装类`Double`而不是原始类`double`。这样我就可以将双精度设置为空，因为`Double`它是一个`Object`而不是原语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:09:36.963

问题是您正在调用scanner.nextdouble()，如果输入中有双精度，它将正常工作。当输入中没有双精度时，对 nextDouble() 的调用将忽​​略您的输入“KKK”，并显示您的错误消息，然后当您调用 nextLine() 时，相同的输入“KKK”仍在等待 wo 时您循环返回，而“KKK”然后被传递回您的程序，并且由于它仍然不是双精度，您会收到重复的错误消息。

试试这个：

```
 boolean isValid = false;
    Scanner myScanner = new Scanner(System.in).useDelimiter("\\n");
    String customerType = null;
    System.out.print("Customer Type? (C/R) ");
    customerType = myScanner.next();
    while (!isValid)
    {
        System.out.print("Enter Subtotal: ");

        if (myScanner.hasNextDouble())
        {
            double sobTotal = myScanner.nextDouble();
            isValid = true;
        }
        else
        {
            System.out.println("Hay! Entry error please enter a valid number");

            if(myScanner.hasNext()){
              myScanner.next();
            }
        }
    } 
```

这将消耗“KKK”的无效输入并让程序正常继续。

# python - 了解 Python 中的配置文件夹路径

> ID：11633190
> 
> 赞同：0
> 
> 时间：2012-07-24T14:35:11.193
> 
> 标签：python, linux, shared-libraries

我正在用 Python 创建一个需要读取配置文件的小应用程序。

我打算将此文件保存`/etc`在 Linux 上的文件夹中，但我希望我的应用程序可以在其他操作系统上运行。

问题是：是否有某种常量、变量、包等可以告诉我操作系统上最合理的设置文件夹的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:03:03.043

也许最好将您的配置文件放在与您的实际模块/应用程序相关的文件夹中？确定模块的位置可能不是直截了当的，但[这个线程](https://stackoverflow.com/questions/2632199/how-do-i-get-the-path-of-the-current-executed-file-in-python)应该会有所帮助。

一个可能有用的工具 configparser 有一个函数可以在一些标准位置查找配置文件：[RawConfigParser.read(filenames)](http://docs.python.org/library/configparser.html#ConfigParser.RawConfigParser.read)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:49:50.927

据我所知，没有内置常量，但手动操作似乎相当容易。
您可以使用[`sys.platform`](http://docs.python.org/library/sys.html#sys.platform) 或[`os.name`](http://docs.python.org/library/os.html#os.name)获取操作系统，然后根据此设置配置文件夹。

```
os_name = sys.platform
cfg_folder = {'linux2': '/etc', 'win32': 'folder', ...}[os_name] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T14:41:04.933

您可能需要检查[http://docs.python.org/library/os.html#os-file-dir](http://docs.python.org/library/os.html#os-file-dir)。获取根路径后，您可以根据工作操作系统选择特定路径。

# c# - 具有特殊（丹麦）字符的 Oracle 表列名。无法执行sql查询

> ID：11633191
> 
> 赞同：4
> 
> 时间：2012-07-24T14:35:13.807
> 
> 标签：c#, .net, oracle, character

我正在使用 DbDataReader 执行查询。请在下面找到代码

查询是：

```
select BRANCH_NAME, AMOUNT, ACCOUØNT_ID from ACCOUNT 
```

错误是：

> ORA-00904: "ACCOU?NT_ID": 无效的标识符。

我正在尝试连接 oracle 数据库并执行 oracle 查询。

请帮助执行 oracle 查询哪些列具有特殊字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:40:09.973

很有可能

```
 select "BRANCH_NAME", "AMOUNT", "ACCOUØNT_ID" from "ACCOUNT"; 
```

将工作。

有关数据库对象命名规则的更多信息，请参见[http://docs.oracle.com/cd/E11882_01/server.112/e10592/sql_elements008.htm](http://docs.oracle.com/cd/E11882_01/server.112/e10592/sql_elements008.htm)。

# javascript - jquery UI按钮太宽虽然填充= 0

> ID：11633192
> 
> 赞同：0
> 
> 时间：2012-07-24T14:35:13.780
> 
> 标签：javascript, jquery, css, jquery-ui, button

我尝试减小一些 jQuery 按钮的宽度。我使用以下代码删除填充，但我的按钮中的文本左右仍然至少有 5 个像素。

```
.button().css({ 'padding-left':'0px', 'padding-right':'0px' }); 
```

例如，当我将“0px”更改为“200px”时，我最终会得到一个真正宽度的按钮，因此代码通常应该是正确的并针对正确的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:39:54.770

这可能是因为按钮内部的元素有它自己的填充。这是从 jQuery UI 的按钮生成的 CSS：

```
.ui-button-text-only .ui-button-text {
    padding: .4em 1em;
} 
```

刚刚尝试删除 1em Left & Right 填充，它起作用了。希望有帮助！

# jquery - 加载后使用单个图像而不拉伸它

> ID：11633199
> 
> 赞同：0
> 
> 时间：2012-07-24T14:35:33.907
> 
> 标签：jquery, fancybox

我不知道如何解释这个，让我先放代码：

```
<div class="image">

    <a title="Some Title" rel="gallery" href="path/to/image.png">

        <img src="path/to/image.png" />
    </a>

</div> 
```

我想为缩略图 (img) 和框内容 (a) 使用相同的图像。但是使用最基本的 FancyBox 代码：

```
$( '.image a' ).fancybox(); 
```

单击时，会拉伸微小的图像。我希望它们保持原来的尺寸。

如果我将代码更改为

```
$( '.image img' ).fancybox(); 
```

它可以工作，但在打开 FancyBox 后，覆盖层后面的缩略图消失了。关闭后，它不会回来。

我想要这种行为，因为我正在使用的图像不需要放大，但它们需要有一些“焦点”，没有什么比花式框（灯箱，彩盒......）更好地将用户注意力引导到某些图像上的了

我尝试设置几个选项，一次一次，但没有一个有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:25:28.893

如果您的图像非常小，那么您可能需要更改 minWidth/minHeight - [http://jsfiddle.net/EPGT9/](http://jsfiddle.net/EPGT9/)

顺便说一句，在您的第二次尝试中，您将 fancyBox 附加到将 self 作为内联内容打开并在关闭后隐藏 self 的图像。

# android - android在多个屏幕尺寸上使用边距

> ID：11633200
> 
> 赞同：3
> 
> 时间：2012-07-24T14:35:37.410
> 
> 标签：android, screen

嗨，我创建了一个应用程序，我想在多个屏幕上运行我在 HDPi 上构建了整个东西。当我在具有更大屏幕的较新的 android 手机上运行它时，东西的对齐方式就出来了。我知道这是因为我设置了边距来使用 DP 定位东西。

我的问题是在多个屏幕尺寸上使用边距的最佳实践是什么和/或是否有一些我可以设置的代码可以根据屏幕尺寸划分/乘以 DP？

我想让应用程序在尽可能多的设备上运行。但这是我的第一个应用程序，所以不完全确定如何执行此操作。因此，任何帮助将不胜感激。

这是我的布局示例

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="20dip"
    android:background="@drawable/bg_tablecell"
    android:orientation="horizontal"
    android:weightSum="1"
     >

       <TextView
        android:id="@+id/position"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_centerVertical="true"
        android:paddingLeft="4dip"
        android:text="@string/POS"
        android:textSize="15dip"
        android:textColor="@color/blue"
         />

    <TextView
        android:id="@+id/TeamName"
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="23dip"
        android:ellipsize="end"
        android:gravity="left"
        android:lines="1"
        android:text="@string/Team"
        android:textColor="@color/blue"
        android:textSize="15dip"
        android:textStyle="bold" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/played"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TeamName"
        android:layout_alignBottom="@+id/TeamName"
        android:layout_marginLeft="35dip"
        android:layout_toRightOf="@+id/TeamName"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/won"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/played"
        android:layout_alignBottom="@+id/played"
        android:layout_marginLeft="17dip"
        android:layout_toRightOf="@+id/played"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/drawn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/won"
        android:layout_alignBottom="@+id/won"
        android:layout_marginLeft="16dip"
        android:layout_toRightOf="@+id/won"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/lost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/drawn"
        android:layout_alignBottom="@+id/drawn"
        android:layout_marginLeft="16dip"
        android:layout_toRightOf="@+id/drawn"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/goalsFor"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/lost"
        android:layout_alignBottom="@+id/lost"
        android:layout_marginLeft="16dip"
        android:layout_toRightOf="@+id/lost"
        android:gravity="center"
       android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/goalsAgainst"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/goalsFor"
        android:layout_alignBottom="@+id/goalsFor"
        android:layout_marginLeft="17dip"
        android:layout_toRightOf="@+id/goalsFor"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/Difference"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/goalsAgainst"
        android:layout_alignBottom="@+id/goalsAgainst"
        android:layout_marginLeft="15dip"
        android:layout_toRightOf="@+id/goalsAgainst"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/>

    <TextView
        android:id="@+id/points"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Difference"
        android:layout_alignBottom="@+id/Difference"
        android:layout_marginLeft="18dip"
        android:layout_toRightOf="@+id/Difference"
        android:gravity="center"
        android:text="@string/Zero"
        android:textColor="@color/blue"
        android:textSize="10dip" 
        android:layout_centerVertical="true"/> 
```

屏幕 hdpi

![hdpi](../Images/13d51120ff2ab41bfcb91b1172dd4fba.png)

屏幕 xhdpi

![xhdpi](../Images/1f18a1f8ee0d3f8e5e4bd3fa6521e39e.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T14:43:53.117

好吧，使用 DP 的全部意义在于让您不必担心这一点。跨设备的边距大致相同，但是如果您依赖于在一个特定的设备分辨率/密度组合上进行排列，那么当您在其他设备上进行测试时，您肯定会感到惊讶。

也就是说，如果您确实需要为不同的屏幕尺寸指定不同的边距，只需在其中添加一个 XML 文件`res/values`——例如`dimens.xml`：

```
<resources
    xmlns:android="http://schemas.android.com/apk/res/android"
    >
    <dimen name="my_view_margin">10dip</dimen>
</resources> 
```

然后为您需要的每个特定设备限定符添加这些 XML 之一（例如`values-large`、`values-sw600dp`、`values-xlarge`等），并根据您认为合适的方式修改值。当您想在布局中使用这些尺寸时，只需使用：

```
android:layout_margin="@dimen/my_view_margin" 
```

Android 将为它运行的任何设备选择正确的值。

# c# - C#如何使用按钮从数据集中复制和粘贴文件？

> ID：11633204
> 
> 赞同：1
> 
> 时间：2012-07-24T14:35:45.720
> 
> 标签：c#, visual-studio-2010

我有一个按钮，该按钮保存 XML 文件，这些 XML 文件由来自某个数据集的文件组成，我如何使用同一个按钮复制列出的文件，并将它们粘贴到不同的目录中。

我的按钮代码：

```
private void buttonSaveXML_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFile = new SaveFileDialog();
        saveFile.Filter = "XML Files|*.xml";
        saveFile.Title = "Save a Xml File";
        saveFile.InitialDirectory = @"C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\fxo\NewVersion";
        saveFile.ShowDialog();
        if (saveFile.FileName != "")
        {
            FileStream fs = (FileStream)saveFile.OpenFile();
            dsVersions.WriteXml(fs);
        } 
```

***编辑***：我需要用这个按钮合并一个代码，它将复制和粘贴数据网格中的所有文件，并能够在这样做时保存一个 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:41:37.867

您可以使用[FileSystem.CopyFile](http://msdn.microsoft.com/en-us/library/ms127964.aspx)方法来完成这项工作。

# opengl - 两个主机线程，两个具有共享显示列表（纹理）的 OpenGL 上下文和 cudaGLSetGLDevice 的使用

> ID：11633205
> 
> 赞同：0
> 
> 时间：2012-07-24T14:35:48.423
> 
> 标签：opengl, cuda

我正在运行两个主机线程，它们都使用在它们引用的 OpenGL 上下文之间共享的相同纹理。我认为这些线程中的每一个都必须在第一步运行 cudaGLSetGLDevice 以：

1.  将设备绑定到当前线程
2.  将设备绑定到当前制作的 OpenGL 上下文

请注意，当线程 2 调用 cudaGLSetGLDevice 时，线程 1 仍在工作。这将包括既没有从线程 1 调用 cudaDeviceReset 也没有将其 OpenGL 上下文设置为之后完成。

我得到的错误输出是：

“在此过程中设备处于活动状态时无法设置”

我能做什么或我做错了什么？

我的系统由一个 NVIDIA GTX 550Ti 组成，我正在使用 boost::thread。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:42:12.797

解决方案是从运行时切换到不隐藏上下文管理的驱动程序 api。然后我们可以为每个主机线程创建一个 CUDA 上下文，一切都很好，即使是 OpenGL 互操作性:)

# svn - SVN 存储库子文件夹从不同的存储库中签出

> ID：11633206
> 
> 赞同：1
> 
> 时间：2012-07-24T14:35:48.573
> 
> 标签：svn, tortoisesvn

我设置了一个新的 svn 存储库并将所有用户重新定位到它。
但即使在重新定位后，一些用户的子文件夹也已从不同的 repo 中签出。
那么有没有办法检查这个并将所有文件夹重新定位到同一个存储库。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:11:36.897

I believe the repository has externals enabled in it.

Do the following in the root of your working copy to list all the externals in your repository:

```
svn propget svn:externals -R 
```

You may have to manually changes those links to the desired location with the following syntax

```
svn propset svn:externals PROPNAME PROPVAL PATH 
```

# exchangewebservices - 需要在应用程序启动时为所有用户获取用户可用性并从 MS EWS 更改通知

> ID：11633212
> 
> 赞同：1
> 
> 时间：2012-07-24T14:36:03.207
> 
> 标签：exchangewebservices, exchange-server

我的要求是：

要求 1\. 当我的应用程序启动时，它应该获得许多用户 (>1000) 的用户可用性（例如忙碌、会议等）。

Req 2\. 我的应用程序应该收到用户可用性更改的通知。

我看到了很多关于在交换服务器（2010）中状态更改时获取用户可用性的推送通知的讨论。但是我没有任何方法可以在应用程序启动时使用“推送通知”来获取所有用户的用户可用性。

# mysql - vb.net 保存在 phpmyadmin 中返回空值

> ID：11633216
> 
> 赞同：-1
> 
> 时间：2012-07-24T14:36:11.060
> 
> 标签：mysql, vb.net, phpmyadmin

我是 vb.net、sql 的新手，甚至在 phpmyadmin 中记录数据。当我使用我的界面添加记录时，我检查了我的 phpmyadmin，它表明表中有一个条目，这意味着我的 vb.net 和 phpmyadmin 已连接，但值返回 NULL。我怎样才能使它不为NULL？相反，记录所需的数据？

这是我的代码：

```
Dim ServerString As String = "Server=localhost; database=patientinfo;user id=root;password=" 
Dim SQLConnection As New MySqlConnection()

Public Sub SaveInfos(ByRef SQLStatement As String)
    Dim cmd As MySqlCommand = New MySqlCommand

    With cmd
        .CommandText = SQLStatement
        .CommandType = CommandType.Text
        .Connection = SQLConnection
        .ExecuteNonQuery()

    End With
    SQLConnection.Close()

    'MsgBox("Successfully Added!")
    MsgBox("Successfully Saved")
    Me.Visible = False
    Mainform.Show()

    SQLConnection.Dispose()
End Sub

 Private Sub cmdSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdSave.Click
    Try
        '===========================Add New Patient========================================
        bednumber = txtbednum.Text
        patient_name = txtName.Text
        patient_age = Convert.ToInt32(txtAge.Text)
        date_of_confinement = Date.Parse(dtpDate.Value)
        type_of_sickness = txtSickness.Text
        type_of_IV_fluid = txtFluid.Text
        number_of_bottles = Convert.ToInt32(txtBottle.Text)
        drop_rate = Convert.ToInt32(txtDrop.Text)

        'To check if all values have been filled up
        If patient_name = "" Or patient_age = "" Or date_of_confinement = "" _
        Or type_of_sickness = "" Or type_of_IV_fluid = "" Or number_of_bottles = "" Or drop_rate = "" _
        Then

            MsgBox("Please Complete All the Required Fields")

        Else

            Dim SQLStatement As String = "INSERT INTO patient(bednumber, name, age, date_of_confinement,type_of_sickness, type_of_IV_fluid, number_of_bottles, drop_rate) VALUES(@bednumber, @name, @age, @date_of_confinement, @type_of_sickness, @type_of_IV_fluid, @number_of_bottles, @drop_rate)"
            SaveInfos(SQLStatement) 
```

这是我的表在 phpmyadmin 中的样子：

[http://i1182.photobucket.com/albums/x454/catherinefbalauro/Untitled.png](http://i1182.photobucket.com/albums/x454/catherinefbalauro/Untitled.png)

任何帮助，将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:56:47.337

做这样的事情：

```
' Assuming that your SQLStatement is as follow
' INSERT INTO MyTableName 
' VALUES (  @bednumber, @name, @age, 
'           @date_of_confinement,@type_of_sickness,
'           @type_of_IV_fluid, @number_Of_Bottles,
'           @drop_rate
'        )
With cmd
    .CommandText = SQLStatement
    .CommandType = CommandType.Text
    .Connection = SQLConnection

    .Parameters.AddWithValue("@bednumber", txtbednum.Text)
    .Parameters.AddWithValue("@name", txtName.Text)
    .Parameters.AddWithValue("@age", txtAge.Text)
    ' dothe same until
    ' you have added allthe parameter
    ' with values

    SQLConnection.Open()
    .ExecuteNonQuery()
End With 
```

# java - JSF 支持 bean 和 Hibernate 映射

> ID：11633220
> 
> 赞同：0
> 
> 时间：2012-07-24T14:36:21.833
> 
> 标签：java, jsf, hibernate-mapping

我认为我遇到了一个非常直接的问题，但我无法为 Hibernate 的类提供一个好的结构或找到最佳实践的示例。

我有一个带有映射类测试的表测试。在一个由 bean 控制的页面上，我在一个列表中列出了所有项目以进行管理编辑（AdminTest），在另一个页面中列出了相同的项目，但对于普通用户来说，它们可以通过单选按钮来影响它们（ShowTest）而无需更改数据库。

由于 Hibernate 似乎坚持在您使用 addEntity 函数检索项目时指定一个直接映射的类（在我的以 Manager 结尾的类中），感觉就像我被迫做这样的事情：

```
class Test { ... }

class AdminTest extends Test { ... }

@ManagedBean
class AdminTestManager {

    List<AdminTest> items;

}

class ShowTest extends Test { ... }

@ManagedBean
class ShowTestManager {

    List<ShowTest> items;

} 
```

然后将 AdminTest 和 ShowTest 分别映射到具有相同字段的同一个表。这真的很糟糕，因为每当我将字段添加到表测试时，我都需要更新这两个映射。

感觉就像我在这里遗漏了一些东西，你真的应该只需要一个 Test 映射到表 test 然后有一些漂亮的继承映射，但那些需要一些标识符，如列或一对一映射表。

编辑：

我尝试过的另一个解决方案是为 Test 提供一个映射，仍然让 AdminTest 和 ShowTest 扩展该类，但我正在将带有反射的 getter 复制到扩展类。

编辑2：

我将在这里提供一个“真实世界”的场景，以更好地解释我在问什么。假设我想制作一个测验引擎，其中有一页您可以通过输入字段填写问题，而另一页则通过每个项目的单选按钮列出这些问题，只有“是”或“否”。

数据库表将像这样创建：

```
CREATE TABLE question (id INT AUTO_iNCREMENT, text VARCHAR, correct_answer INT, primary key(id)); 
```

我认为我需要的课程是：

```
class Question {

    private int id;
    private String text;
    private int correctAnswer;

    // Getters and setters.

}

class EditQuestion extends Question {

    void updateItem() { ... }
    void removeItem() { ... }

}

@ManagedBean(name = "edit_quiz")
@ViewScoped
class EditQuestionManager {

        List<EditQuestion> items;
        void addItem() { ... }
        void init() {

            items = (ArrayList<EditQuestion>) HibernateUtil.getSessionFactory().getCurrentSession().createSQLQuery("SELECT * FROM question").addEntity(EditQuestion.class)
    .list();

        }
}

class AnswerQuestion extends Question {

    int radioButtonValue;

    // Getters and setters.

}

@ManagedBean(name = "take_quiz")
@ViewScoped
class AnswerQuestionManager {

        List<AnswerQuestion> items;
        void calculateResults() { ... }
        void init() {

            items = (ArrayList<AnswerQuestion>) HibernateUtil.getSessionFactory().getCurrentSession().createSQLQuery("SELECT * FROM question").addEntity(AnswerQuestion.class).list();

        }
} 
```

例如，显示测验的 JSF 页面可能是这样的：

```
<ui:repeat value="#{take_quiz.items}" var="question">
    <div>#{question.text}</div>
    <h:selectOneRadio value="#{question.radioButtonValue}" onchange="submit()">
        <f:selectItem itemValue="1" itemLabel="Yes" />
        <f:selectItem itemValue="0" itemLabel="No" />
    </h:selectOneRadio>
</ui:repeat>
<h:commandLink action="#{take_quiz.calculateResults()}">Done</h:commandLink> 
```

现在的问题，至少在我看来，是要为管理视图和用户视图制作这种列表，我需要输入条目以将表“问题”映射到 AnswerQuestion 和 EditQuestion hbm.xml 文件。至少不使用反射（将所有 getter 值从 Question 复制到 AnswerQuestion/EditQuestion 的新实例），这对我来说有点像 hack？我的意思是这似乎不太复杂？

解决方案：我没有让这些类扩展映射的 Hibernate 表类，而是简单地添加了它们类型的私有属性。同样在管理器类中，我在检索到数据库项目后循环访问它们并设置如下列表：

```
ArrayList<Question> tempItems = (ArrayList<Question>)  HibernateUtil.getSessionFactory().getCurrentSession().createSQLQuery("SELECT * FROM question").addEntity(Question.class).list();
ArrayList<EditQuestion> items = ArrayList<EditQuestion>();
for(int i = 0; tempItems.size(); i++) {
    EditQuestion item = new EditQuestion();
    item.setQuestion(tempItems.get(i));
    items.add(item);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:38:16.863

我很难理解你的问题。您在为实体表达类继承时遇到问题吗？

您是否考虑过在您的 Test 类之上使用 import javax.persistence.Inheritance 注释？

例子：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Test {
}

@Entity
public class AdminTest extends Test {
} 
```

更多[在这里](http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/jpa_overview_mapping_inher.html)。

# android - 可以使用 ObjectAnimator 进行动画处理的 Android 属性

> ID：11633221
> 
> 赞同：58
> 
> 时间：2012-07-24T14:36:25.147
> 
> 标签：android, animation, android-animation, objectanimator

我开始在视图动画上使用属性动画，因为我有一个视图需要缩放并将其他视图推开。我看过一些例子，但我只是想知道是否有任何地方提供可以使用这些类更改的属性列表。例如，我看到一个教程使用以下方法进行了快速旋转：

```
ObjectAnimator.ofFloat(aniView, "rotation", 360) 
```

这很酷，但如果不是那个确切的教程，我不会知道旋转属性，有没有可以做的综合列表？如果有人对此有任何具体建议，我想要制作动画的特定属性是 LinearLayout 中视图的权重。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-08T23:29:11.010

迟到总比没有好，所以这里是可以使用 ObjectAnimator 进行动画处理的属性的完整列表。

[http://developer.android.com/guide/topics/graphics/prop-animation.html#views](http://developer.android.com/guide/topics/graphics/prop-animation.html#views)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-06-29T06:05:50.153

[文档](http://developer.android.com/guide/topics/graphics/prop-animation.html#object-animator)`ObjectAnimator`暗示只要您遵循命名约定，就可以使用任何值：

> 1.  您正在制作动画的对象属性必须具有形式为`set<propertyName>()`. 因为 ObjectAnimator 在动画过程中会自动更新属性，所以它必须能够使用这个 setter 方法来访问属性。例如，如果属性名称是`foo`，则需要有一个 `setFoo()`方法。如果此 setter 方法不存在，您有三个选项：
>     *   如果您有权这样做，请将 setter 方法添加到类中。
>     *   使用您有权更改的包装器类，并让该包装器使用有效的 setter 方法接收值并将其转发给原始对象。
>     *   请改用 ValueAnimator。
> 2.  [...]

* * *

关于你的问题，[`View`](http://developer.android.com/reference/android/view/View.html#attr_android:rotation)有方法`setRotation(float)`- 给你一个可以使用的提示。特别是这里是你将如何使用特定的[`TimeInterpolator`](http://developer.android.com/reference/android/animation/TimeInterpolator.html)：

```
ObjectAnimator anim = ObjectAnimator.ofFloat(myView, "rotation", 0f, 90f);
anim.setDuration(2000);                  // Duration in milliseconds
anim.setInterpolator(timeInterpolator);  // E.g. Linear, Accelerate, Decelerate
anim.start()                             // Begin the animation 
```

您可以阅读文档以了解有关`ObjectAnimator`.

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-09-10T17:18:30.250

以下是您正在寻找的属性名称的完整列表：

*   回转
*   旋转X
*   旋转Y
*   翻译X
*   翻译Y
*   比例尺X
*   规模Y
*   枢轴X
*   枢轴Y
*   α
*   X
*   是的

来源：[文档](https://developer.android.com/guide/topics/graphics/prop-animation.html#views)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-22T16:50:39.053

使用“ **translateX** ”或“ **transalteY** ”移动一个`<group>` 看看[vectorDrawable](https://developer.android.com/reference/android/graphics/drawable/VectorDrawable.html)

# android - 在多个项目之间共享资产

> ID：11633228
> 
> 赞同：4
> 
> 时间：2012-07-24T14:36:53.127
> 
> 标签：android, eclipse, android-assets, eclipse-adt

众所周知，Android 的 Eclipse+ADT IDE 框架[不支持（重新）使用库项目中的资产](https://stackoverflow.com/a/7150767/562776)。

相反，应用程序使用的任何资产资源都必须存储在**应用程序**项目**本身**的 assets/ 目录中。

我的问题是我有 8 个（八个！）应用程序使用使用资产的同一个库项目，并且由于上述限制，我必须将每个资产文件复制/复制并同步到所有 8 个（八个！）应用程序。

这是维护的噩梦，也容易出错。

知道如何通过在多个应用程序项目之间共享每个资产的单个副本来解决此问题吗？

**注意：**我想避免依赖操作系统或文件系统的解决方案，如硬链接或软链接。我更喜欢[context.getAssets()](https://stackoverflow.com/a/8896517/562776)之类的解决方案，如果它确实有效的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T01:38:28.570

自从您发布问题以来，也许事情已经发生了变化，但是我能够在我的 Android 项目中重用另一个项目的资产文件。我将项目的资产文件夹创建为[链接文件夹](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-45.htm)。我发布了一个[示例项目](https://github.com/donkirkby/webandnative/blob/assets/android/.project#L33)来展示它是如何工作的。

# php - PHP中的单例模式......如何在请求之间保存状态

> ID：11633229
> 
> 赞同：5
> 
> 时间：2012-07-24T14:36:52.707
> 
> 标签：php, design-patterns, singleton

通过使用静态变量和单例模式，我认为创建一个简单的购物车会很容易，当加载另一个页面时，它会记住购物车中的哪些物品。

刷新页面时，我遇到了购物车不记得里面已经有什么的问题。

下面的代码是否有问题，或者我应该只使用全局变量还是 mysql 数据库。

存储状态的最佳方法是什么..

```
<?php
//create a singleton class
class shoppingCart {

    private static $_shoppingCartItems = array();
    private static $_instance = null;

    private function __construct(){

    }

    public static function getInstance(){
        if(self::$_instance == null)
            self::$_instance = new shoppingCart();
        return self::$_instance;            
    }

    public function add(ShoppingItem $item){
        $this->_shoppingCartItems[] = $item;
    }

    public function cartCount(){                 
        return count($this->_shoppingCartItems);
    }  
}
?> 
```

### 执行

```
$item = new shoppingItem();

$shoppingCart = shoppingCart::getInstance();
$shoppingCart->add($item);
$shoppingCart->add($item);

//should increment by 2 on each page load but it doesn't
echo $shoppingCart->cartCount(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T14:42:02.843

静态类成员（或任何其他变量）不会在不同的请求中保留。绝不。

## 救援会议

唯一的例外是`$_SESSION`；这是一种特殊的机制来实现这一点。

[`session_start()`](http://www.php.net/manual/en/function.session-start.php)在脚本顶部为会话加注星标。

您现在可以`$_SESSION`像使用常规数组一样存储和检索信息。会话属于单个用户，它不是在所有用户之间共享数据的一种方式。

看看[这里](http://www.php.net/manual/en/session.examples.basic.php)的介绍。

## 安静

`session_start()`在被调用之前你不能输出任何东西。也就是说，`<?php`必须是希望使用会话的 PHP 脚本中的确切第一件事。`<?php`此外，和之间不得有回声语句或任何其他输出生成函数`session_start()`。

## 输出缓冲

如果您确实必须在开始会话之前生成输出，则可以使用[输出缓冲](http://php.net/manual/en/function.ob-start.php)。

## 笔记

*   `$_SESSION`健忘。在用户方[一段时间](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)不活动后，数据将被删除。
*   如果您收到以下错误消息，则表明您违反了上述准则。另一种可能性是您的脚本具有 BOM（Unicode 字节顺序标记）。如果是这样，请将其删除。

> 警告：session_start()：无法发送会话 cookie - 标头已由（输出开始于

发生这种情况的原因是由于 PHP 处理输出的方式：它试图尽快将输出提供给用户。但是，HTTP 协议会在响应的所有输出（“正文”）之前传输某些控制数据（cookie、哪个会话属于您等），称为“标头”。只要您输出任何内容，就需要发送标头 - 除非您使用输出缓冲。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T14:49:47.323

我想我可以在那里看到你的思维模式，但你试图做的事情在很多方面都是错误的。

### 1\. Singleton 不是一种模式，它是一种反模式

Singleton 是一种反模式，应该不惜一切代价避免使用。请参阅Gordon 的[这个很好的答案](https://stackoverflow.com/questions/4595964/who-needs-singletons/4596323#4596323)，了解原因。

### 2\. HTTP 是一种无状态协议。

仅在 PHP 中所做的任何事情都无法帮助您跨两个请求保留状态。您`$shoppingCart`是从头开始为每个请求创建的，实际上，您的整个应用程序都是。您不应该尝试将数据保存在对象中，而是应该在每次请求后通过从其他地方获取相应的数据来重新创建状态。在您的示例中，可能来自某种数据库 nosql 或 sql。

### 3\. 会议

您可以在 superglobal 中保留用户特定的数据`$_SESSION`，但在大多数情况下，我建议不要这样做。您的用户会话应该保存身份验证和用户数据，但您应该避免在其中存储与您的业务逻辑相关的各种数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T14:41:15.313

PHP 不是应用服务器。它不会在请求之间自动保留您的“应用程序”状态。您必须自己通过 $_SESSION、cookie 和/或您自己的私有方法来执行此操作。

除非您采取措施保存数据，否则当调用脚本的 HTTP 请求结束时，应用程序的状态将被擦除。

# javascript - 提交前的图像预览在 IE 9 和 Safari 5.x 中不起作用

> ID：11633231
> 
> 赞同：1
> 
> 时间：2012-07-24T14:36:59.517
> 
> 标签：javascript, jquery, internet-explorer, file-upload, safari

我目前正在尝试在用户单击提交按钮之前在所选图像的客户端进行图像预览。

我在论坛中找到了这种方法：

```
function selectedPhotoText(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#imagePreview')
                        .attr('src', e.target.result)
                        .width(240)
                        .height(149);
        };

        reader.readAsDataURL(input.files[0]);
    }
    else {
        $('#imagePreview').attr('src', "../../Images/blqblq.jpg");
    }
}

<img id="imagePreview" class="img-border" src="../../Images/blqblq.jpg" alt="Selected Image"/> 
```

和文件上传控制：

```
<asp:FileUpload ID="uploadPhotoDialog" onchange="selectedPhotoText(this)" runat="server"/> 
```

这种方法在 Chrome、Firefox 和 Opera 中运行良好。IE和Safari有什么解决方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:51:32.050

Safari 到 5.XX 和 IE 到 9.xx 不支持 FileReader。看看这个。 [http://caniuse.com/filereader](http://caniuse.com/filereader)

# php - 未定义的偏移量 PHP

> ID：11633232
> 
> 赞同：0
> 
> 时间：2012-07-24T14:37:02.490
> 
> 标签：php, arrays

当我尝试执行我的代码时收到以下错误。

```
Notice (8): Undefined offset:  18 [APP/libs/excel_adapters/coverage.php, line 12]
Notice (8): Undefined offset:  23 [APP/libs/excel_adapters/coverage.php, line 13]
Notice (8): Undefined offset:  24 [APP/libs/excel_adapters/coverage.php, line 14]
Notice (8): Undefined offset:  25 [APP/libs/excel_adapters/coverage.php, line 15]
Notice (8): Undefined offset:  26 [APP/libs/excel_adapters/coverage.php, line 16]
Notice (8): Undefined offset:  14 [APP/libs/excel_adapters/coverage.php, line 17]
Notice (8): Undefined offset:  14 [APP/libs/excel_adapters/coverage.php, line 18] 
```

话虽如此，此代码用于将电子表格上传到数据库。我认为我的问题在于 $s 变量。如果有人愿意看看我的代码并告诉我我的问题是什么。我认为一双新的眼睛会对我有很大帮助。

```
 <?php 
      class CoverageExcelAdapter {

    public function extract($s, $args = array()) { 
    App::import('component', 'CakeSession');        
    $userId = CakeSession::read('Auth.User.id');        
    $ret = array();

    $ret['Coverage'] = array(
        'name' => $s[0][12][3], 
        'effective_date' => $this->Date->formatDate($s[0][18][3]),
        'expiration_date' => $this->Date->formatDate($s[0][18][6]),
        'broker_first_name' => ucwords($s[0][23][3]),
        'broker_middle_initial' => strtoupper(substr($s[0][24][3], 0, 1)),
        'broker_last_name' => ucwords($s[0][25][3]),
        'broker_suffix' => ucwords($s[0][26][3]),
        'producing_id' => $this->State->stateStrToId($s[0][14][3]), 
        'filing_id' => $this->State->stateStrToId($s[0][14][6]), 
```

这是我的 var 转储....

```
array(1) {
    [0]=> array(1) {
        [0]=> array(41) {
            [0]=> string(13) "ProcessorName"
            [1]=> string(10) "BranchCode"
            [2]=> string(9) "FileTaxID"
            [3]=> string(9) "FileState"
            [4]=> string(11) "FileLicense" [5]=> string(5) "First" [6]=> string(6) "Middle" [7]=> string(12) "Company_Last" [8]=> string(11) "InsuredName" [9]=> string(12) "RiskLocation" [10]=> string(14) "UnderwritingCo" [11]=> string(10) "Home State" [12]=> string(8) "PolicyNo" [13]=> string(10) "PolicyType" [14]=> string(10) "MultiState" [15]=> string(14) "LineOfBusiness" [16]=> string(13) "EffectiveDate" [17]=> string(24) "EndorsementEffectiveDate" [18]=> string(7) "EndDate" [19]=> string(7) "Premium" [20]=> string(13) "InsuredAmount" [21]=> string(9) "PolicyFee" [22]=> string(13) "InspectionFee" [23]=> string(6) "CatFee" [24]=> string(7) "SLTaxes" [25]=> string(17) "Fire Marshall Tax" [26]=> string(9) "Surcharge" [27]=> string(21) "Additional Assessment" [28]=> string(11) "StampingFee" [29]=> string(9) "InvoiceNo" [30]=> string(11) "InvoiceDate" [31]=> string(4) "AC1 " [32]=> string(8) "AC1 Date" [33]=> string(12) "AC1_Comments" [34]=> string(3) "AC2" [35]=> string(8) "AC2 Date" [36]=> string(12) "AC2_Comments" [37]=> string(3) "AC3" [38]=> string(8) "AC3 Date" [39]=> string(12) "AC3_Comments" [40]=> string(8) "Comments"
        }
    }
} 
```

这是我运行 print_r 时得到的

打印_r

```
Array (
    [0] => Array (
        [0] => Array (
            [0] => ProcessorName
            [1] => BranchCode
            [2] => FileTaxID
            [3] => FileState
            [4] => FileLicense [5] => First [6] => Middle [7] => Company_Last [8] => InsuredName [9] => RiskLocation [10] => UnderwritingCo [11] => Home State [12] => PolicyNo [13] => PolicyType [14] => MultiState [15] => LineOfBusiness [16] => EffectiveDate [17] => EndorsementEffectiveDate [18] => EndDate [19] => Premium [20] => InsuredAmount [21] => PolicyFee [22] => InspectionFee [23] => CatFee [24] => SLTaxes [25] => Fire Marshall Tax [26] => Surcharge [27] => Additional Assessment [28] => StampingFee [29] => InvoiceNo [30] => InvoiceDate [31] => AC1 [32] => AC1 Date [33] => AC1_Comments [34] => AC2 [35] => AC2 Date [36] => AC2_Comments [37] => AC3 [38] => AC3 Date [39] => AC3_Comments [40] => Comments
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:39:18.887

做一个`var_dump($s)`里面那个方法。您正在访问不存在的数组键。

* * *

编辑

鉴于您上面的转储，您应该使用：

```
$s[0][0][whatever] 
```

反而。你有嵌套 3 层深的数组，但外两层是单元素数组，例如

```
$s = array(array(array("Processor Name", etc...))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:43:38.640

按照其他答案和评论的建议转储 var 以查看它实际具有哪些键，并为这些偏移量定义具有好名称的常量 - 它们是什么意思它们如何改变？这段代码对任何程序员（你在几天或几周内包括在内）都没有任何意义。

# java - XHTML到PDF使用飞碟如何缓存css

> ID：11633236
> 
> 赞同：8
> 
> 时间：2012-07-24T14:37:11.597
> 
> 标签：java, xhtml, pdf-generation, itext, flying-saucer

在我的生产管道中，我需要从 HTML 生成数百个 PDF。对于这种情况，我首先将 HTML 转换为 XHTML。比我将“清理”的 XHTML 和 uri 传递给渲染器。

由于 *.css 和 imageFiles 对于所有 XHTML 文件都是相等的，因此我不需要在处理文件时一直解析它们。我成功使用以下代码缓存图像。我怎样才能缓存 .css 文件呢？我想避免将所有文件放入我的类路径中。

```
ITextRenderer renderer = new ITextRenderer();

ResourceLoaderUserAgent callback = new ResourceLoaderUserAgent(renderer.getOutputDevice());
callback.setSharedContext(renderer.getSharedContext());

for (MyObject myObject : myObjectList) {

    OutputStream os = new FileOutputStream(tempFile);

    final DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
    documentBuilderFactory.setValidating(false);
    DocumentBuilder builder = documentBuilderFactory.newDocumentBuilder();
    org.w3c.dom.Document document = builder.parse(myObject.getLocalPath); // full path to .xhtml

    renderer.getSharedContext().setUserAgentCallback(callback);

    renderer.setDocument(document, myObject.getUri());
    renderer.layout();
    renderer.createPDF(os);

    os.flush();
    os.close();
}
    ...

private static class ResourceLoaderUserAgent extends ITextUserAgent
{
    public ResourceLoaderUserAgent(ITextOutputDevice outputDevice) {
        super(outputDevice);
    }

    protected InputStream resolveAndOpenStream(String uri) {
        InputStream is = super.resolveAndOpenStream(uri);
        System.out.println("IN resolveAndOpenStream() " + uri);

        return is;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:04:38.310

万一有人在这里遇到同样的问题，我就是这样解决的。由于我无法在我的 CustomUserAgent 中缓存 *.css 文件，我不得不找到另一种方法。我的解决方案使用[Squid](http://www.squid-cache.org/)作为 http-proxy 来缓存所有经常使用的资源。

在我的 CustomUserAgent 中，我只需要通过传递代理对象来访问这个代理。

```
public class ResourceLoaderUserAgent extends ITextUserAgent {

public ResourceLoaderUserAgent(ITextOutputDevice outputDevice) {
    super(outputDevice);
}

protected InputStream resolveAndOpenStream(String uri) {    

    HttpURLConnection connection = null;
    URL proxyUrl = null;
    try {
        Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("localhost", 3128));
        proxyUrl = new URL(uri);
        connection = (HttpURLConnection) proxyUrl.openConnection(proxy);
        connection.connect();

    } catch (Exception e) {
        throw new RuntimeException(e);
    }

    java.io.InputStream is = null;
    try {
        is = connection.getInputStream();
    } catch (java.net.MalformedURLException e) {
        XRLog.exception("bad URL given: " + uri, e);
    } catch (java.io.FileNotFoundException e) {
        XRLog.exception("item at URI " + uri + " not found");
    } catch (java.io.IOException e) {
        XRLog.exception("IO problem for " + uri, e);
    }

    return is;
}
} 
```

缓存：

```
resolving css took 74 ms
resolving images took 225 ms 
```

未缓存：

```
resolving css took 15466 ms
resolving images took 11236 ms 
```

如您所见，缓存资源和未缓存资源之间的差异很大

# php - Facebook Like Button 的 AJAX 侦听器

> ID：11633237
> 
> 赞同：1
> 
> 时间：2012-07-24T14:37:14.180
> 
> 标签：php, javascript, ajax, facebook, facebook-like

我的页面上有几个点赞按钮，当有人“喜欢”或“不喜欢”时，我想触发一个 PHP 脚本（通过 AJAX）。

我看到当有人“喜欢”时，会触发 POST 和 GET。当有人说“不喜欢”时，就会触发一个帖子。这可能是区分这两种行为的一种方式。

我怎么能拦截这些触发的动作？

有没有办法获取帖子的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:43:40.793

查看 Facebook Javascript SDK 中的[`FB.Event`API](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)，该`subscribe`功能应该让你做你想做的事。

从文档中，这是您的用例的示例：

```
// new like
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
);

// removed like
FB.Event.subscribe('edge.remove',
    function(response) {
        alert('You unliked the URL: ' + response);
    }
); 
```

# c# - 管理内存流的内存

> ID：11633238
> 
> 赞同：0
> 
> 时间：2012-07-24T14:37:16.313
> 
> 标签：c#, memory, memorystream

哪个更适合内存？哪个内存消耗低？

```
byte[] Pic = (byte[])re.GetValue(4);
MemoryStream MS = new MemoryStream();
MS.Write(Pic, 0, Pic.Length);
pictureBox1.BackgroundImage = Image.FromStream(MS); 
```

或者

```
pictureBox1.BackgroundImage = Image.FromStream(new MemoryStream((byte[])re.GetValue(4), true)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:44:14.193

第二个会工作得更快，它会使用更少的内存。当您`MemoryStream`从构造函数初始化时，字节只是分配给内部缓冲区（流将不可调整大小）：

```
public MemoryStream(byte[] buffer, bool writable)
{    
    _buffer = buffer;    
    _writable = writable;
    _exposable = false;
} 
```

如果您使用无参数构造函数，则流将以初始容量调整大小`0`。在写入过程中，将创建新的字节数组并将值复制到内部缓冲区：

```
public MemoryStream()
{    
    _buffer = new byte[0];   
    _writable = true;
    _exposable = true;
}

public override void Write(byte[] buffer, int offset, int count)
{
    // EnsureCapacity
    byte[] dst = new byte[_position + count];
    Buffer.InternalBlockCopy(_buffer, 0, dst, 0, _length);
    _buffer = dst;
    // Copy
    Buffer.InternalBlockCopy(buffer, offset, _buffer, _position, count);
} 
```

# php - PHP - 超链接没有得到完整的字符串

> ID：11633239
> 
> 赞同：1
> 
> 时间：2012-07-24T14:37:16.387
> 
> 标签：php

我有以下代码，但无法在返回时获得完整的变量值。

```
<?php
$no7="Girls pink";
$no8="All Categories";
$aw="2";

echo'<table width="auto" border="0">
  <tr>
        <td width="auto" class="s">'; echo "<a href=search.php?search_name=".$no7."&mydropdown=".$no8."&pno=".$aw.">".$aw."</a>"; echo'</td>
  </tr>
</table>';
?> 
```

感谢您的帮助问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:41:00.827

在值上添加引号`href`：

```
echo "<a href='search.php?search_name=".$no7."&mydropdown=".$no8."&pno=".$aw."'>".$aw."</a>";
//            ^--------------------------- quotes ----------------------------^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:39:46.230

使用[urlencode](http://php.net/urlencode)和[htmlspecialchars](http://php.net/htmlspecialchars)：

```
echo "<a href='search.php?search_name=" . urlencode($no7) . "&amp;mydropdown=" . urlencode($no8) . "&amp;pno=" . urlencode($aw) . "'>" . htmlspecialchars($aw) . "</a>"; 
```

另外：在 URL 周围添加引号，并替换为`&`以`&amp;`获得更好的 HTML 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:45:20.350

清理可怕的格式/布局并使用[HEREDOC](http://php.net/heredoc)：

```
echo <<<EOL
<table width="auto" border="0">
<tr>
    <td width="auto" class="s"><a href="search.php?search_name={$no7}&mydropdown={$no8}&pno={$aw}">{$aw}</a></td>
</tr>
</table>
EOL; 
```

请注意，HEREDOC 如何消除对所有这些单独的回显的需求，允许将变量插值到字符串中（不再“断开字符串以连接”），并允许正确格式化/缩进 HTML 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:46:36.457

问题是变量中的空格。浏览器将空格作为 href 标记的结尾更多的是一个问题。如前所述，使用`urlencode`或将变量中的空格转换为`+`

# asp.net - 使用 HttpModule Asp.net 重定向 URL

> ID：11633241
> 
> 赞同：5
> 
> 时间：2012-07-24T14:37:28.180
> 
> 标签：asp.net, url, redirect

我创建了一个 HttpModule，这样每当我在浏览器中输入“localhost/blabla.html”时，它就会将我重定向到 www.google.com（这只是一个示例，它实际上是重定向来自手机的请求）

我的问题是：

1) 如何告诉 IIS(7.0) 将每个请求重定向到“HttpModule”，使其独立于网站。我可以更改 web.config，仅此而已。

2) 我需要将 .dll 添加到 GAC 吗？如果是这样，我该怎么做？

3) HttpModule 代码使用 'log4net' 。我还需要将“log4net”添加到 GAC 吗？

谢谢

PS该网站使用.net 2.0。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T14:43:59.560

您可以在 BeginRequest 事件中使用请求对象

```
public class MyHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
          context.BeginRequest += new EventHandler(this.context_BeginRequest);
    }

    private void context_BeginRequest(object sender, EventArgs e)
    {
          HttpApplication application = (HttpApplication)sender;
          HttpContext context = application.Context;

          //check here context.Request for using request object 
          if(context.Request.FilePath.Contains("blahblah.html"))
          {
               context.Response.Redirect("http://www.google.com");
          }
    }

} 
```

# c# - 按钮的 CountClick 方法不起作用

> ID：11633242
> 
> 赞同：3
> 
> 时间：2012-07-24T14:37:31.510
> 
> 标签：c#, asp.net

我的网页中有几个按钮，并试图通过使用 countClick 方法来检查用户按下的点击次数来限制按钮点击。在我下面的代码中，当用户单击第一个按钮时，将自动为他们单击第二个按钮。如果他们选择了第二个按钮，第三个按钮也会被自动点击，其余的按钮依此类推。但是在我的情况下，他们只能点击一次，因为一键点击了 2 个按钮。所以，当他们点击一次时，我不能让他们第二次点击。

我的问题是我的 countClick 方法不起作用。当我运行我的页面时，可以选择我的所有按钮，并且它不会将用户限制为仅单击 1 个按钮。

这是我的 .cs 代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Button1.Text = "Booked";
    Button1.BackColor = System.Drawing.Color.Blue;
    Button2.Text = "Booked";
    Button2.BackColor = System.Drawing.Color.Blue;
    countButtonClick();
}
protected void Button2_Click(object sender, EventArgs e)
{
    Button2.Text = "Booked";
    Button2.BackColor = System.Drawing.Color.Blue;
    Button3.Text = "Booked";
    Button3.BackColor = System.Drawing.Color.Blue;
    countButtonClick();
}
protected void Button3_Click(object sender, EventArgs e)
{
    Button3.Text = "Booked";
    Button3.BackColor = System.Drawing.Color.Blue;
    Button4.Text = "Booked";
    Button4.BackColor = System.Drawing.Color.Blue;
    countButtonClick();
}
protected void Button4_Click(object sender, EventArgs e)
{
    Button4.Text = "Booked";
    Button4.BackColor = System.Drawing.Color.Blue;
    countButtonClick();
} 
```

这是我在 .cs 中的 countClick 方法：

```
private void countButtonClick()
{
    int counter = 0;
    counter++;
    if (counter >= 1)
    {
        Response.Write("You can only select 2 slots! " + DateTime.Now.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T14:41:13.280

存储`counter`为会话变量。

因为您在函数中声明它，所以对于该函数调用的特定实例来说，它是唯一的。因此，它每次都重置为 0。

```
private void countButtonClick()
{    
    int counter = 0;
    if (!(Session["counter"])){
       counter = (int)Session["counter"];
    }
    counter++;
    Session["counter"] = counter;

    if (counter >= 1)
    {
        Response.Write("You can only select 2 slots! " + DateTime.Now.ToString());
    }
} 
```

然后，我还将通过将以下内容添加到您的页面加载方法来确保在进行刷新时会话值丢失：

```
if (!(Page.IsPostBack)){
   Session["counter"] = null;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T14:49:24.273

我在这里看到两个问题：

首先，`counter`需要是一个会话变量，其次，您可能应该在修改页面上的任何内容之前调用 countClick() 并使其返回`bool`，以便您判断它是否成功。

```
private bool countClick()
{
    if (Session["clicks"] == null)
    {
        Session["clicks"] = 1;
        return true;
    }
    if (++((int)Session["clicks"]) > 1)
    {
         Response.Write("...");
         return false;
    }
    return true;
}

protected void Button1_Click(object sender, EventArgs e)
{
    if (countClick())
    {
        Button1.Text = "Booked";
        Button1.BackColor = System.Drawing.Color.Blue;
        Button2.Text = "Booked";
        Button2.BackColor = System.Drawing.Color.Blue;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T14:42:40.393

通过在方法中声明它，您的`countButtonClick`方法`counter`用作局部范围的变量。这意味着每次调用该方法时，都会创建计数器并将其初始化为 0。此外，不会在回发中保留点击次数。即使您将计数器声明移到 之外，由于[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)`countButtonClick`的工作方式，每次单击按钮时，计数器变量都会重置为 0 。解决这个问题的方法是以某种方式存储计数器，例如会话或视图状态。

```
private int counter = 0;
protected void Page_Load()
{
   if(!Page.IsPostback)
   {
      ViewState["MyClickCounter"] = 0;
   }
   else
   {
      counter = (int)ViewState["MyClickCounter"];
   }
}
private void countButtonClick()
{
   counter++;
   ViewState["MyClickCounter"] = counter;
   if (counter >= 1)
   {
      Response.Write("You can only select 2 slots! " + DateTime.Now.ToString());
   }
} 
```

您可能还需要添加重置方法，具体取决于您的页面需要执行的操作。

# ios - iOS：将 MKCoordinateSpan 对象化以放入数组中

> ID：11633243
> 
> 赞同：1
> 
> 时间：2012-07-24T14:37:33.120
> 
> 标签：ios, nsarray, mapkit, mkcoordinatespan

我试图找到一种直接的方法将 MKCoordinateSpan 放入数组中，而不会将其分解为 lat 和 long 并将其存储在 NSArray 中。不知道有没有这样的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:45:27.480

```
MKCoordinateSpan span = MKCoordinateSpanMake(1.0, 1.0);
NSData *data = [NSData dataWithBytes:&span length:sizeof(span)];

MKCoordinateSpan back;
[data getBytes:&back length:sizeof(back)];

NSLog(@"%f",back.latitudeDelta); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:42:08.580

试试这个：

```
MKCoordinateSpan currentSpan;
currentSpan = ...; // Set the span to somethinf
NSValue *spanVal = [NSValue valueWithBytes:&currentSpan objCType:@encode(MKCoordinateSpan)];
...
MKCoordinateSpan currentSpanBack;
[spanVal getValue:&currentSpanBack]; 
```

# xpath - 带有通配符的 SoapUI XPath 断言

> ID：11633244
> 
> 赞同：2
> 
> 时间：2012-07-24T14:37:37.393
> 
> 标签：xpath, wildcard, soapui

有没有办法在使用 SoapUI 的 XPath 测试中的断言中使用通配符？

我看了一下 SoapUI 的文档，他们说你可以做这样的事情

```
<path1>
  <path2>*</path2>
</path1> 
```

我选中了“允许通配符”复选框。

我的问题是：我想断言我的日期从 2012-08-22 开始，但我不在乎分钟和秒。我想我的表达应该类似于 2012-08-22* 但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:56:59.403

您正在做的事情听起来应该可行。[这是我使用来自http://www.geonames.org/export/web-services.html#timezone](http://www.geonames.org/export/web-services.html#timezone)的休息服务制作的一个简单示例。我正在使用他们提供的演示

[http://api.geonames.org/timezone?lat=47.01&lng=10.2&username=demo](http://api.geonames.org/timezone?lat=47.01&lng=10.2&username=demo) 输出是

```
<geonames>
   <timezone tzversion="tzdata2012c">
      <countryCode>AT</countryCode>
      <countryName>Austria</countryName>
      <lat>47.01</lat>
      <lng>10.2</lng>
      <timezoneId>Europe/Vienna</timezoneId>
      <dstOffset>2.0</dstOffset>
      <gmtOffset>1.0</gmtOffset>
      <rawOffset>1.0</rawOffset>
      <time>2012-07-25 04:39</time>
      <sunrise>2012-07-25 05:50</sunrise>
      <sunset>2012-07-25 21:00</sunset>
   </timezone>
</geonames> 
```

如果您对结果进行 xpath 匹配并使用从当前按钮中选择，您将获得

//地名/时区/时间

2012-07-25 04:39

如果您将其更新为

//地名/时区/时间

2012-07-25*

这将正常工作，并且当使用新的 lat 和 lng 更新其余请求时，断言仍然会通过，因为它没有检查时间。如果这没有帮助，请提供您的完整断言，也许我可以提供更多帮助。

*注意：对于soap请求，请确保声明命名空间，然后使用正确的格式

```
//ns1:message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T23:09:27.097

这会有点痛苦，但这是你可以做的：

1) 使用断言选项卡找出一个 Xpath 'base'（听起来你已经在这里了）。我使用这个公共站点进行测试： http: [//graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl](http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl)

我使用 CornerPoints 方法，将 'hawaii' 作为单个参数。

我创建了这个“基础”xpath：

```
declare namespace ns1='http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl';
declare namespace SOAP-ENC='http://schemas.xmlsoap.org/soap/encoding/';
declare namespace SOAP-ENV='http://schemas.xmlsoap.org/soap/envelope/';

/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:CornerPointsResponse/listLatLonOut

(it will write the declare statements for you if you click declare)
(which you can test out in the assertions window) 
```

2) 创建属性步骤

3) 创建属性转移步骤

4) 创建一个 groovy 脚本

5）添加一个属性...我叫我的杂项

6）添加转移步骤

```
* transfer from the CornerPoints - Request 1 --- Response

* paste the Xpath stuff in the box under the 'transfer from'

* Transfer to your property 

(You can test with the little play button) 
```

7）将这样的内容添加到您的 groovy 脚本中：

```
def x = context.expand( '${Properties#misc}' )
def parts = x.tokenize(',')
for (def part in parts)
{
    log.info(part)
    if (part.startsWith("-153"))
        log.info("good")
} 
```

在常规步骤中，您可以做任何需要获取（部分）数据的事情。我添加的示例代码从包含在 CDATA 中的长行中获取纬度/经度，然后仅检查某些数据的起始部分.. 只是一个示例。

请记住，您可以使用 groovy 和 java 字符串方法：

[http://groovy.codehaus.org/groovy-jdk/java/lang/String.html](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html)

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

更多常规技巧： http: [//www.soapui.org/Scripting-Properties/tips-a-tricks.html](http://www.soapui.org/Scripting-Properties/tips-a-tricks.html)

# mercurial - 如何告诉 mercurial 1\. 丢弃本地文件 2\. 使用远程文件

> ID：11633249
> 
> 赞同：2
> 
> 时间：2012-07-24T14:37:51.977
> 
> 标签：mercurial, conflict

有时我似乎无法跟踪合并冲突。我需要一个命令，允许我丢弃一个未提交的文件，然后使用远程副本对其进行更新。

我尝试了 hg revert myfile ，然后是 hg pull ， hg commit 但它仍然不允许我合并或提交。

它一直告诉我先解决未解决的冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:51:00.677

您可能需要让 Mercurial 知道您已经解决了冲突，使用`hg resolve`. 从手册页：

```
hg resolve [OPTION]... [FILE]...

redo merges or set/view the merge status of files

  Merges with unresolved conflicts are often the result of non-interactive
  merging using the "internal:merge" configuration setting, or a command-
  line merge tool like "diff3". The resolve command is used to manage the
  files involved in a merge, after "hg merge" has been run, and before "hg
  commit" is run (i.e. the working directory must have two parents). See "hg
  help merge-tools" for information on configuring merge tools.

  The resolve command can be used in the following ways:

  - "hg resolve [--tool TOOL] FILE...": attempt to re-merge the specified
    files, discarding any previous merge attempts. Re-merging is not
    performed for files already marked as resolved. Use "--all/-a" to select
    all unresolved files. "--tool" can be used to specify the merge tool
    used for the given files. It overrides the HGMERGE environment variable
    and your configuration files.  Previous file contents are saved with a
    ".orig" suffix.
  - "hg resolve -m [FILE]": mark a file as having been resolved (e.g. after
  having manually fixed-up the files). The default is to mark all
  unresolved files.
  - "hg resolve -u [FILE]...": mark a file as unresolved. The default is to
    mark all resolved files.
  - "hg resolve -l": list files which had or still have conflicts. In the
    printed list, "U" = unresolved and "R" = resolved.

  Note that Mercurial will not let you commit files with unresolved merge
  conflicts. You must use "hg resolve -m ..." before you can commit after a
  conflicting merge. 
```

以下是您从服务器获取文件版本的方法。当您“hg pull”时，来自服务器的所有更改都会进入您的存储库副本。您可以使用以下方法获取任何修订版中文件的内容：

```
hg cat -r <rev> <file> 
```

使用它来覆盖本地文件并提交。

# socks - 袜子 5 - 失败行为？

> ID：11633252
> 
> 赞同：1
> 
> 时间：2012-07-24T14:37:54.643
> 
> 标签：socks

我已多次阅读[RFC1928](http://www.ietf.org/rfc/rfc1928.txt)，但仍然无法理解兼容的 SOCKS 5 服务器在发生故障时应该回复什么。这种怀疑来自这样一个事实，即 SOCKS 回复中的 ATYP、BND.ADDR 和 BND.PORT 字段根本没有意义，例如，如果收到带有无效命令的请求。服务器必须不发送这些字段还是只发送空白？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:16:09.420

我只是红色腻子源代码，发现当回复有错误时（REP！= 0）ATYP是IPv4（1）BND.ADDR和BND.PORT都是NULL字节。

我猜这种行为有助于开发人员解析请求？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:11:56.737

在失败回复中，只有`VER`and`REP`字段是有意义的。其他字段可能存在但未使用。`REP`除非为零，否则您甚至不需要查看这些字节。

# iphone - When dragging an image, dont allow the image off screen

> ID：11633254
> 
> 赞同：1
> 
> 时间：2012-07-24T14:38:06.907
> 
> 标签：iphone, objective-c, ios, xcode, uigesturerecognizer

I currently have an imageView which I can drag around the screen using a panGestureRecognizer and the following method:

```
- (void)panDetected:(UIPanGestureRecognizer *)panRecognizer {
  CGPoint translation = [panRecognizer translationInView:self.view];
  CGPoint imageViewPosition = self.imageView.center;
  imageViewPosition.x += translation.x;
  imageViewPosition.y += translation.y;

  self.imageView.center = imageViewPosition;
  [panRecognizer setTranslation:CGPointZero inView:self.view];
} 
```

Currently the image can be dragged off the screen so that it is only partially visible, I would like to know if there is a way to stop the image at the edge of the screen? I know it should be possible, I am just struggling with the logic.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:00:20.813

Have you tried using `CGRectContainsRect`?

You could use this as a check inside of your `panDetected:` and only allow translation if it returns `YES`.

```
- (void)panDetected:(UIPanGestureRecognizer *)panRecognizer {
    CGPoint translation = [panRecognizer translationInView:self.view];
    CGPoint imageViewPosition = self.imageView.center;
    imageViewPosition.x += translation.x;
    imageViewPosition.y += translation.y;

    CGFloat checkOriginX = self.imageView.frame.origin.x + translation.x; // imageView's origin's x position after translation, if translation is applied
    CGFloat checkOriginY = self.imageView.frame.origin.y + translation.y; // imageView's origin's y position after translation, if translation is applied

    CGRect rectToCheckBounds = CGRectMake(checkOriginX, checkOriginY, self.imageView.frame.size.width, self.imageView.frame.size.height); // frame of imageView if translation is applied

    if (CGRectContainsRect(self.view.frame, rectToCheckBounds)){
        self.imageView.center = imageViewPosition;
        [panRecognizer setTranslation:CGPointZero inView:self.view];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:45:27.747

You should check if the imageview's frame is still in the current view's frame (or the screen bounds).

```
 if ( CGRectContains(self.view.frame, self.imageView.frame) ) 
    // is inside
    else 
    //is outside or intersecting 
```

# javascript - Javascript与谷歌jsapi静默崩溃

> ID：11633267
> 
> 赞同：1
> 
> 时间：2012-07-24T14:39:01.903
> 
> 标签：javascript, html, google-visualization, jsapi

我只是试图让[这个示例代码](https://google-developers.appspot.com/chart/interactive/docs/basic_preparing_data)在我的站点中运行。我把所有的 JS 放在它自己的函数中。当我不调用该函数时，页面加载正常，但当然它不显示饼图。当我将加载饼图的函数放入`$(function(){...});`页面加载时，什么都没有。没有 JS 错误或任何东西，只是一个空白页。我不知道如何调试这个？有没有人有任何想法？

问题发生在这个 JS 小提琴中：http: [//jsfiddle.net/hC498/](http://jsfiddle.net/hC498/)

但是这个问题并没有发生，您只需将 JS 与其余部分一起复制并粘贴到 HTML 窗口中：http: [//jsfiddle.net/hC498/1/](http://jsfiddle.net/hC498/1/)

我无法在我的应用程序中执行此操作，因为我想等到其他页面内容加载后再加载饼图。为什么将JS移动到自己的功能时它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:53:13.937

发生这种情况是因为您之前正在调用使用 jsapi 的脚本

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

按以下顺序执行时，它可以完美运行。

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="script.js"></script> <!-- the separate js file--> 
```

JSFiddle，将您的 JS 插入到 head 元素的开头，甚至在您要求 jsapi 加载的语句之前。

查看更新[**的 JSFiddle**](http://jsfiddle.net/hC498/2/)

# jquery - 带有 Ajax onkeypress 的输入字段导致输入被删除

> ID：11633269
> 
> 赞同：0
> 
> 时间：2012-07-24T14:39:06.240
> 
> 标签：jquery, ajax, string, forms, input

我正在使用链接到它的 jquery ajax 脚本制作的网站上有一个输入字段。每次按下某个键时，ajax 脚本都会搜索与输入字段的值匹配的字符串，如果找到该字符串，脚本会更新页面上的一个 div 并将输入字段的值设置回 null，以便用户有一个新的空间来输入一个新的字符串。但是，如果用户键入第一个字符串并且脚本使用响应数据更新 div 并清除输入字段值，则用户无需等待一两分钟即可再次开始键入，他们在字段中键入的任何文本（在接下来的两秒钟左右）在他们输入后被删除。我只是想阻止他们的文本被删除，如果他们要在第一个字符串被验证后不久输入一个新字符串

这是更新 div 的 jquery 脚本，它由输入（带有 id：searchbar）的 onkeypress 事件触发：

```
function search(status){
  if($("#searchbar").val().length > 1){
    $.get("http://www.website.com/subfolders/some_php_script.php",
      {l: status, q:$("#searchbar").val()},
      function(data){
        $("#div-to-update").html(data);
      }
    );
  }
} 
```

编辑：#searchbar 不在更新的 div 内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:21:13.617

我找到了答案，我几乎可以肯定这与我的 Ajax 可能触发太多次有关{有人可以确认这是否是一个真正的问题吗？}

我已经设置了一个布尔变量作为控制是否已经找到字符串，如果是这样，那么什么都不会更新，这里是固定代码：

```
var found = false; //initialized

function search(status){
  if($("#searchbar").val().length > 1){
    $.get("http://www.website.com/subfolders/some_php_script.php",
      {l: status, q:$("#searchbar").val()},
      function(data){
        if(!found){
          $("#div-to-update").html(data);
          found = true;
        }
      }
    );
  }
} 
```

# android - Android 开发：构建我的应用程序以适应不同类型的智能手机

> ID：11633270
> 
> 赞同：0
> 
> 时间：2012-07-24T14:39:09.543
> 
> 标签：android, xml

我的应用程序包含屏幕上带有一些文本的关闭按钮。它真的很简单，这就是它所需要的。

但是当我在不同的虚拟手机上测试我的应用程序时，它看起来会有所不同。现在，由于我不使用图像，因此我假设只要我的图像位于 drawable 文件夹中，并且并非所有图像都位于不同的 drawable- *** * 文件夹中，它们就不会成为问题。

但是我如何编码 XML 以适应所有智能手机屏幕。

XML:

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:padding="@dimen/padding_medium"
        android:text="@string/welsh_libs"
        android:textColor="#FF0066"
        android:textSize="30dip"
        android:textStyle="bold"
        tools:context=".WelshLibraries" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#6088A1"
        android:textColor="#FFFFFF"
        android:text="@string/news" />

    <Button
        android:id="@+id/button3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#50C0E9"
        android:textColor="#000000"
        android:text="@string/find_lib" />

    <Button
        android:id="@+id/button4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#6088A1"
        android:textColor="#FFFFFF"
        android:text="@string/free_res" />

    <Button
        android:id="@+id/button5"
        android:layout_width="285dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#50C0E9"
        android:text="@string/ask_lib"
        android:textColor="#000000" />

    <Button
        android:id="@+id/button6"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#6088A1"
        android:text="@string/find_book"
        android:textColor="#FFFFFF" />

    <Button
        android:id="@+id/button7"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#50C0E9"
        android:text="@string/register"
        android:textColor="#000000" />

    <Button
        android:id="@+id/button8"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="18dp"
        android:background="#6088A1"
        android:text="@string/login"
        android:textColor="#FFFFFF" />

</LinearLayout>

<ImageView
    android:id="@+id/image1"
    android:layout_width="190dp"
    android:layout_height="0dip"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="70dp"
    android:layout_weight="1"
    android:contentDescription="@string/desc"
    android:src="@drawable/waglogo"
    android:visibility="visible" /> 
```

我使用 dp 作为测量单位，但我知道它是唯一可以使用的单位，所以我知道它不像设计一个可以使用 pxs、ems 和 %s 的网站。

人们可以提供的任何帮助或链接将不胜感激。谢谢，丹

PS 如果我想在应用程序加载时在 8 个下方添加更多按钮，我也在寻找一种向下滚动的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:44:07.110

如果您还没有这样做，请参阅官方 Android 开发者网站。它有一篇关于支持不同屏幕的文章：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

如果要滚动按钮，还可以用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)包围包含按钮的 LinearLayout。像这样的东西：

```
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:padding="@dimen/padding_medium"
    android:text="@string/welsh_libs"
    android:textColor="#FF0066"
    android:textSize="30dip"
    android:textStyle="bold"
    tools:context=".WelshLibraries" />

   </LinearLayout>

<ScrollView
   android:layout_width="wrap_content"
   android:layout_height="wrap_content">

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#6088A1"
    android:textColor="#FFFFFF"
    android:text="@string/news" />

<Button
    android:id="@+id/button3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#50C0E9"
    android:textColor="#000000"
    android:text="@string/find_lib" />

<Button
    android:id="@+id/button4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#6088A1"
    android:textColor="#FFFFFF"
    android:text="@string/free_res" />

<Button
    android:id="@+id/button5"
    android:layout_width="285dp"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#50C0E9"
    android:text="@string/ask_lib"
    android:textColor="#000000" />

<Button
    android:id="@+id/button6"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#6088A1"
    android:text="@string/find_book"
    android:textColor="#FFFFFF" />

<Button
    android:id="@+id/button7"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#50C0E9"
    android:text="@string/register"
    android:textColor="#000000" />

<Button
    android:id="@+id/button8"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="18dp"
    android:background="#6088A1"
    android:text="@string/login"
    android:textColor="#FFFFFF" />

 </LinearLayout>

 </ScrollView>

<ImageView
android:id="@+id/image1"
android:layout_width="190dp"
android:layout_height="0dip"
android:layout_marginBottom="5dp"
android:layout_marginLeft="70dp"
android:layout_weight="1"
android:contentDescription="@string/desc"
android:src="@drawable/waglogo"
android:visibility="visible" /> 
```

# cordova - Google Play 中的应用程序图标

> ID：11633274
> 
> 赞同：0
> 
> 时间：2012-07-24T14:39:28.107
> 
> 标签：cordova, google-play

我最近使用 PhoneGapBuild 构建了一个应用程序。当我将我的应用程序上传到 Google Play 时，列表中的应用程序图标是默认的 phonegap 之一：

![在此处输入图像描述](../Images/3517a3a716ad2839e96dd43963d6d873.png)

我的 config.xml 文件中列出了这些图标资源：

```
<icon src="assets/icons/android/icon36.png" gap:platform="android" gap:density="ldpi" />
<icon src="assets/icons/android/icon48.png" gap:platform="android" gap:density="mdpi" />
<icon src="assets/icons/android/icon72.png" gap:platform="android" gap:density="hdpi" />
<icon src="assets/icons/android/icon96.png" gap:platform="android" gap:density="xhdpi" /> 
```

但它似乎无法正常工作。

我需要向 config.xml 添加一个新条目还是其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:03:21.407

我自己没有使用过PhoneGap，所以我不知道是否有特定的方法来检查它。但是，有一个通用的方法。您可以使用**[apktool](http://code.google.com/p/android-apktool/)**显示您的 apk 中的资源，更改它们，然后重新编译。

[**在这里**](https://stackoverflow.com/a/11418998/759019)查看我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:14:02.513

在 PhoneGap 中添加图标时，或者在使用一般路径时，请在发布到 StackOverflow 之前检查路径名称是否正确并自欺欺人！

傻我！

# java - 客户端 Java Web 技术

> ID：11633281
> 
> 赞同：-1
> 
> 时间：2012-07-24T14:40:03.603
> 
> 标签：java, web, webclient

我在每台客户端机器上都有一堆 shell 脚本。我需要一个 Web 界面来为这些脚本提供设置，它应该调用这些脚本。

如果我从服务器运行 Web 应用程序来运行脚本，它将由于多个客户端请求而使服务器过载，因此首选客户端 Web 应用程序。

小程序可以解决这个问题。但是，它已经过时了，我不喜欢它。

有没有其他新的/好的技术来做这样的客户端计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:45:20.287

您是在谈论 Web 应用程序还是桌面应用程序？
如果这是一个网络应用程序，据我所知 - 不。您必须使用网页中嵌入的小程序来运行脚本。
如果是桌面应用程序 - 它可以使用[API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html)在 Java 中执行进程。

另一种选择可能是下载一些用于调用脚本的小型服务器代码，并让您的 Web 应用程序与其通信，以便调用进程。
这样做的缺点是这不是您的 Web 应用程序的“直截了​​当”的用法。

# solr - 使用 solr 和集成 nutch 和 solr 时出错（HTTP ERROR 500）

> ID：11633285
> 
> 赞同：0
> 
> 时间：2012-07-24T14:40:15.503
> 
> 标签：solr, integration, web-crawler, nutch

我安装了 Linux Ubuntu 12.04，我正在尝试安装 nutch 1.5.1 和 solr 3.6.1 并将主题集成在一起以抓取种子网址。
我正在使用[本](http://wiki.apache.org/nutch/NutchTutorial)教程来完成这项工作。
我按照 3.2 之前的步骤，跳到[第 4 步](http://wiki.apache.org/nutch/NutchTutorial#A4._Setup_Solr_for_search)，我可以访问
localhost:8983/solr/admin/

没有错误。
但是当转到第 6 步并将 schema.xml 从 nutch 的 conf 文件夹复制到 solr solr/admin 页面的 example/solr/conf 文件夹时，会出现 java 错误，如下所示：

![页面的第一部分](../Images/1865992eff75e7ad98e1d00b41219c04.png) ![第二部分](../Images/d107e5c056114ff6f1710998ada9c72b.png)

我该如何处理？

还有一件事要问......我有另一个看起来不错的[教程](http://www.scribd.com/doc/61813114/Running-Nutch-Solr)，但在第一步中它提到在 /conf/ 和 /runtime/local/conf/ 文件夹中的 nutch-site.xml 文件中添加一些代码

但在 nutch 文件夹中没有运行时文件夹。在第 4 步中也提到了这个文件夹。有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:38:07.143

这只是一点红鲱鱼。指定版本号的行类似于：

```
<schema name="nutch" version="1.5.1"> 
```

导致它是因为版本的值被解析为浮点数。删除多余的点。将其更改为 1.5 或 1.51 以使其有效浮动并重新启动您的 solr 实例。异常应该消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:54:32.933

请检查 Nutch 1.5.1 和 Solr 3.6.1 是否兼容（它们是否具有相同版本的 lucene-core 和 solr-solrj jars）。我遇到了一些不兼容版本的问题，但不是 1.5/3.6 。

# iphone - 如何关闭 iPhone 中的无堆栈跟踪崩溃？

> ID：11633291
> 
> 赞同：1
> 
> 时间：2012-07-24T14:40:41.160
> 
> 标签：iphone, debugging, crash

我们用 10 个类和 100 个方法构建了一个巨大的应用程序。

在一些压力测试中 - 应用程序崩溃（测试在标签和视图之间快速移动，就像疯了一样）

该应用程序刚刚退出，没有堆栈跟踪，没有来自 NSZombie 的数据，根本没有数据。没有 sigabrt，没有 bad_access .... 什么都没有！！

你如何接近这种崩溃？

谢谢

# multithreading - 什么时候调用 TIdTCPConnection.Disconnect 是安全的？

> ID：11633292
> 
> 赞同：0
> 
> 时间：2012-07-24T14:40:42.530
> 
> 标签：multithreading, delphi, indy

我`h: TIdHTTP`在辅助线程中有一个组件，它正在从 URL 中检索标头。同时用户单击取消，主线程尝试实际断开`Indy`组件。`thrd.h.Disconnect` 从主线程调用是否安全？（虽然`h:TIdHTTP`被声明为公共，因此可以在主线程中访问）

如果在任何时候都安全的话，我`Cancel`可以在线程中写一个可以被主线程直接调用的函数吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:13:24.753

取决于您所说的“安全”的含义:) 当从其下方撕下其套接字时，TidHTTP 将在辅助线程中引发异常。如果你抓住它并处理它，（记录它，显示它或忽略它），那么你应该没问题。

线程/套接字/任何对象的“取消”方法也应该没问题 - 然后您可以将 TidHTTP 组件保留为私有字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:07:25.323

是的，当工作线程忙于通过同一个套接字读取/写入数据时，主线程可以调用`Disconnect()`套接字。读/写操作将引发线程可以根据需要捕获或忽略的异常。

如果线程被终止，您还可以为事件分配一个事件处理程序`TIdHTTP.OnWork`并让它引发异常，例如 with 。`SysUtils.Abort()`

# java - Facebook 在 LoginDialogListener IllegalStateException 上获取授权错误：无法执行活动的方法

> ID：11633295
> 
> 赞同：0
> 
> 时间：2012-07-24T14:40:45.040
> 
> 标签：java, android, facebook

我正在使用此代码将墙消息放在 Facebook 中，但是...没有找到 DialogListeners：

这是活动的代码。

我正在使用教程： http: [//www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/](http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/)

```
public class FacebookPostMessageActivity extends Activity {
  public class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
      saveCredentials(facebook);
      if (messageToPost != null) {
        postToWall(messageToPost);
      }
    }

    public void onFacebookError(FacebookError error) {
      showToast("Authentication with Facebook failed!");
      finish();
    }

    public void onError(DialogError error) {
      showToast("Authentication with Facebook failed!");
      finish();
    }

    public void onCancel() {
      showToast("Authentication with Facebook cancelled!");
      finish();
    }
  }

  private static final String APP_ID = "xxxxxxxxxxxxxxxxx";
  private static final String[] PERMISSIONS = new String[] { "publish_stream" };
  private static final String TOKEN = "access_token";
  private static final String EXPIRES = "expires_in";
  private static final String KEY = "facebook-credentials";
  private Facebook facebook;
  private String messageToPost;

  public boolean saveCredentials(Facebook facebook) {
    Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
    editor.putString(TOKEN, facebook.getAccessToken());
    editor.putLong(EXPIRES, facebook.getAccessExpires());
    return editor.commit();
  }

  public boolean restoreCredentials(Facebook facebook) {
    SharedPreferences sharedPreferences = getApplicationContext()
        .getSharedPreferences(KEY, Context.MODE_PRIVATE);
    facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
    facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
    return facebook.isSessionValid();
  }

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    facebook = new Facebook(APP_ID);
    restoreCredentials(facebook);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    if (facebookMessage == null) {
      facebookMessage = "Test wall post";
    }
    messageToPost = facebookMessage;
  }

  public void doNotShare(View button) {
    finish();
  }

  public void share(View button) {
    if (!facebook.isSessionValid()) {
      loginAndPostToWall();
    } else {
      postToWall(messageToPost);
    }
  }

  public void postToWall(String message) {
    FacebookPoster fp = new FacebookPoster();
    fp.execute(message, null, null);
  }

  private class FacebookPoster extends AsyncTask {
    protected void onPostExecute(String result) {
      showToast(result);
      finish();
    }

    @Override
    protected Object doInBackground(Object... params) {
      Bundle parameters = new Bundle();
      parameters.putString("message", messageToPost);
      parameters.putString("description", "topic share");
      try {
        facebook.request("me");
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") || response.equals("false")) {
          return "Blank response.";
        } else {
            return "Message posted to your facebook wall!";
        }
      } catch (Exception e) {
        Log.d("ShareOnFacebook", e.getMessage());
        return "Failed to post to wall!";
      }
    }
  }

  public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
  }

  private void showToast(String message) {
    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
  }
} 
```

这是日志，我没有看到验证我的帐户的对话框...直接我看到“强制关闭”：

```
07-24 15:47:19.252: E/AndroidRuntime(4937): FATAL EXCEPTION: main
07-24 15:47:19.252: E/AndroidRuntime(4937): java.lang.IllegalStateException: Could not execute method of the activity
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.view.View$1.onClick(View.java:2168)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.view.View.performClick(View.java:2552)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.view.View$PerformClick.run(View.java:9229)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.os.Handler.handleCallback(Handler.java:587)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.os.Looper.loop(Looper.java:130)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.app.ActivityThread.main(ActivityThread.java:3701)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at java.lang.reflect.Method.invokeNative(Native Method)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at java.lang.reflect.Method.invoke(Method.java:507)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at dalvik.system.NativeStart.main(Native Method)
07-24 15:47:19.252: E/AndroidRuntime(4937): Caused by: java.lang.reflect.InvocationTargetException
07-24 15:47:19.252: E/AndroidRuntime(4937):     at java.lang.reflect.Method.invokeNative(Native Method)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at java.lang.reflect.Method.invoke(Method.java:507)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.view.View$1.onClick(View.java:2163)
07-24 15:47:19.252: E/AndroidRuntime(4937):     ... 11 more
07-24 15:47:19.252: E/AndroidRuntime(4937): Caused by: java.lang.NoClassDefFoundError: com.facebook.android.R$drawable
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.facebook.android.FbDialog.createCrossImage(FbDialog.java:106)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.facebook.android.FbDialog.onCreate(FbDialog.java:81)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at android.app.Dialog.show(Dialog.java:225)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.facebook.android.Facebook.dialog(Facebook.java:814)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.facebook.android.Facebook.startDialogAuth(Facebook.java:343)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at com.facebook.android.Facebook.authorize(Facebook.java:206)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at abm.face.post.FacebookPostMessageActivity.loginAndPostToWall(FacebookPostMessageActivity.java:144)
07-24 15:47:19.252: E/AndroidRuntime(4937):     at abm.face.post.FacebookPostMessageActivity.share(FacebookPostMessageActivity.java:98)
07-24 15:47:19.252: E/AndroidRuntime(4937):     ... 14 more 
```

我的清单，具有互联网权限：

```
<?xml version="1.0" encoding="utf-8"?>
  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="abm.face.post" android:versionCode="1" android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
      <activity android:name=".FacebookPostMessageActivity" android:label="@string/app_name">
        <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
      </activity>
    </application>
  </manifest> 
```

请问有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:10:03.420

看起来你的崩溃是由于`FbDialog`试图膨胀你用来关闭它的交叉图像引起的。

需要仔细检查的事情：

*   图像资源存在。
*   它引用的 R.java 文件是否存在（com.facebook.android.R$drawable）取决于教程项目的实现方式，您可能需要使用项目的 R 文件。

希望这可以帮助。

# javascript - 如何使用 D3.js 方法重绘路径？

> ID：11633300
> 
> 赞同：2
> 
> 时间：2012-07-24T14:40:59.050
> 
> 标签：javascript, svg, d3.js

我似乎无法让 .enter() 和 .exit 路径正常工作。对于下面的代码，每次我尝试重绘路径时，它都会保留旧路径。

我冒昧地猜测问题出在 .attr("d",stepline(csProg)) 上。我在想它应该更像 .attr("d",function(d) { stepline(d); }) 或类似的东西，但我无法让它工作。有什么建议么？

```
function drawCloseChart(mysvg,mydata,cx1,cx2,cy1,cy2,oq)
{

var x = d3.scale.linear().domain([360*60, 390*60]).range([cx1, cx2]), 
    y = d3.scale.linear().domain([0,oq]).range([cy1,cy2]),
    z = d3.scale.category10();

var targetg = mysvg.append("svg:g");

    //code to draw x-axis
    //code to draw y-axis

var stepline = d3.svg.line()
    .x(function(d) { return x(d.time); })
    .y(function(d) { return y(d.val); })
    .interpolate("step-after");

var chartData = [];
chartData.redraw = function()
{

    var cpg = cprog.selectAll("path").data(csProg);
    cpg.enter()
        .append("path")
        .attr("d",stepline(csProg))
        .attr("fill","none")
        .attr("stroke-width","2")
        .attr("stroke","black");

    cpg.exit().remove();        

}
chartData.redraw();
return chartData;
} 
```

稍后在我会调用的代码中（或类似的东西）：

setInterval(function() { updateDate(); chartData.redraw(); },1000)

但是，旧路径不会被删除。

编辑：这是一个 JSFiddle 与我看到的问题。[http://jsfiddle.net/namit101/k8kUZ/26/](http://jsfiddle.net/namit101/k8kUZ/26/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T14:45:54.563

`enter`并且`exit`仅对新添加的数据或刚刚删除的数据分别调用。因此，除非你的数据发生变化，否则每次调用都不会执行，`enter`然后，只会对新添加的数据或刚刚删除的数据调用。`exit``redraw`

对于您的示例，您需要为数据创建一个唯一标识符，以便`D3`知道要删除哪些路径以及添加哪些路径。`data`除了`mydata`变量之外，这可以通过将函数传递给方法来完成。

```
var cpg = cprog.selectAll("path").data(mydata, function(d) {
    return d.time + "-" + d.value; 
}); 
```

这是一个更新的[JSFiddle](http://jsfiddle.net/brantolsen/k8kUZ/31/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T16:15:07.643

如果您在理解何时使用和时遇到困难，您应该阅读[Thinking with Joins](http://bost.ocks.org/mike/join/)。还有一个关于[路径转换](http://bost.ocks.org/mike/path/)的很好的教程，它也可以帮助你。如果不发布您的完整代码，很难推荐更多内容。`enter()``exit()`

# uitableview - 在自定义单元格中更改 EditingAccessoryView 的位置

> ID：11633303
> 
> 赞同：2
> 
> 时间：2012-07-24T14:41:04.270
> 
> 标签：uitableview, xamarin.ios

我想在我的单元格中移动 EditingAccessoryView 的位置。我尝试了以下但没有成功：

```
UIActivityIndicatorView activityIndicator = new UIActivityIndicatorView(UIActivityIndicatorViewStyle.Gray);
activityIndicator.Frame.X = 227f;
cell.EditingAccessoryView = activityIndicator; 
```

我在 GetCell 方法中这样做。

任何想法将不胜感激。

谢谢，瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:35:00.150

关于什么 ？

```
cell.editingAccessoryView.frame = CGRectMake(0, 0, 40, 40); 
```

在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

解释：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"cellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil) {
        cell =  [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdentifier];
        cell.editingAccessoryView.frame = CGRectMake(0, 0, 40, 40);
     }
return cell;
} 
```

# jquery - 从 jQuery 调用 JavaScriptResult 操作方法

> ID：11633304
> 
> 赞同：0
> 
> 时间：2012-07-24T14:41:03.787
> 
> 标签：jquery, asp.net-mvc

我想执行从 MVC 操作方法生成的 Java 脚本，我读到 JavaScriptResult 类型可用于该 porpouse，但我的问题是它是否可以从 jQuery 调用。

控制器：

```
public JavaScriptResult myActionMethods() {

     return JavaScript("alert('" + DateTime.Now.ToString() + "');");
} 
```

JavaScript 文件：

```
function CallActionMethodScript() {
     //I want to execute the resulting script using jQuery...
 } 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:44:08.790

调用`$.getScript(someUrl)`以添加`<script>`调用您的操作的标签。

# java - java 1.7中的xmltask？

> ID：11633308
> 
> 赞同：1
> 
> 时间：2012-07-24T14:41:14.193
> 
> 标签：java, ant, xmltask

现在我正在使用 java 1.6 处理 XMLTask。它在 1.6 上运行良好，但是当我从 1.6 更改为 1.7 时，它会引发以下错误：

```
NoClassDefFoundError: org/apache/xpath/XPathAPI 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:53:35.720

有同样的问题。我通过在定义taskdef时将xalan（特别是xalan-2.7.1.jar - 可能有更新的版本，但这是我手头的）添加到类路径来解决它：

```
<taskdef name="xmltask" classname="com.oopsconsultancy.xmltask.ant.XmlTask">
    <classpath>
        <pathelement path="${basedir}/lib/xmltask-v1.13.jar"/>
        <pathelement path="${basedir}/lib/xalan-2.7.1.jar"/>
    </classpath>
</taskdef> 
```

这似乎使事情对我来说很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T21:05:32.513

用 1.16 版本替换旧版本的 XMLTask 为我解决了这个问题。

使用 1.16 版，无需将任何 Xalan Jar 文件添加到类路径。

# jquery - 无法在多列可排序列表中拖放项目

> ID：11633310
> 
> 赞同：0
> 
> 时间：2012-07-24T14:41:17.763
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我的问题很简单。

我希望能够在使用 jQuery 可排序之间对三列进行排序，但由于某种原因，这些项目不会开始拖动。我已经在 stackoverflow 上搜索了答案，但我认为我做的一切都是正确的。

*   我在列上设置最小高度
*   我在可排序的项目上设置了填充/边距
*   我为可排序的 UI 命令使用了正确的选项

我能够使用 jsbin 重现该问题

有人可以快速看看并告诉我我做错了什么吗？

[jsbin 示例](http://jsbin.com/avikos/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:03:39.730

你只需要把你的 init 函数包装在里面

```
$(document).ready(function(){
  $('.column').sortable({
    connectWith: '.column'
  });
}); 
```

或快捷版本

```
$(function(){
  $('.column').sortable({
    connectWith: '.column'
  });
}); 
```

...然后它对我来说很好（[http://jsbin.com/avikos/6/edit](http://jsbin.com/avikos/6/edit)）。

否则，在引用的 DOM 元素被渲染之前执行，因此不被绑定。

# objective-c - 将 svg 或图像加载到 UIWebview 但不将 UIWebView 显示到 MainView

> ID：11633313
> 
> 赞同：0
> 
> 时间：2012-07-24T14:41:33.170
> 
> 标签：objective-c

我很好奇在未显示 webview 时将图像或 svg 代码加载到 webview 是否会出现问题？因为我打算让 webview 成为 svg 的持有者，然后将 webview 转换为 UIImage。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:26:59.080

您应该对图像没问题，UIWebView 的工作方式与 Safari 非常相似，原始 HTML 图像应该显示而无需代码渲染页面。SVG 也应该可以工作，但是如果 SVG 没有固定大小，它们可能会爆炸。

要尝试的一件事是使用 iOS 模拟器并将资产拖放到模拟器中，默认情况下它应该启动移动 safari 并在 UIWebView 中显示您需要测试的内容，这对于在 iOS 中测试 HTML 内容之外的资产非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T10:04:58.200

```
NSURL *fileURL =[[NSURL alloc] initFileURLWithPath:SVGpath];
NSURLRequest*req =[NSURLRequest requestWithURL:fileURL];
[webView setScalesPageToFit:YES];
[webView loadRequest:req];

//uncheck opaque property of UIWebView. 
```

# python - 谷歌联系人。获取照片

> ID：11633314
> 
> 赞同：0
> 
> 时间：2012-07-24T14:41:36.330
> 
> 标签：python, google-api, gdata

我们想从谷歌 API 导入联系人照片。

以下代码对我有用。

```
for email, name, entry in feed:
    photo = client.GetPhoto(entry)
    if photo:
        fname = str(uuid.uuid4()) + '.jpg'
        image_file = open(dname + '/' + fname, 'wb')
        image_file.write(photo)
        image_file.close()
        result[email] = '/media/import/%s/%s' % (dir, fname) 
```

现在，由于某些原因，我们获得了文件 atom 提要副本。所以方法`GetPhoto`不起作用。

有什么想法，为什么会发生，目前检索联系人照片的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:13:05.557

这是解决 google API 更改的方法。现在我们使用对 API 的直接请求。

```
for email, name, entry in feed:
    photo_link = e.GetPhotoLink()
    if photo_link:
        request = http.request(
            'GET',
            photo_link.href,
            headers={
                'Authorization':'OAuth %s' % client.current_token.access_token
            }
        )

        if request.status == 200:
            photo = str(request.read())
            fname = str(uuid.uuid4()) + '.jpg'
            image_file = open(dname + '/' + fname, 'wb')
            image_file.write(photo)
            image_file.close()
            result[email] = '/media/import/%s/%s' % (tid, fname) #str(photo.href) # 
```

# entity-framework-4 - 如何在 DBContext 中将对象 A 属性交换为对象 B 属性？

> ID：11633315
> 
> 赞同：0
> 
> 时间：2012-07-24T14:41:36.457
> 
> 标签：entity-framework-4, dbcontext

我有两个相同类型的对象，我想将 A 换成 B。而不是使用这个：

```
var tmp = A.prop1; 
A.prop1 = B.prop1; 
B.prop1 = tmp; .... 
ctx.SaveChanges(); 
```

有没有更快的方法？

# c# - 向 LINQ LET 查询添加条件？

> ID：11633318
> 
> 赞同：-1
> 
> 时间：2012-07-24T14:41:39.567
> 
> 标签：c#, linq

我希望能够将 if 语句添加到 linq 查询中以添加第二个 LET。有谁知道这是否可能？谢谢

```
var query = from d in myList
group d by d.Date
into v
let dataSum = nv.Sum(x => x.Data)
select new MyObject(){ Date = nv.Key.Date, Data = dataSum}

//Invalid I know... but something like this is what I'm looking for
var query = from d in myList
group d by d.Date
into v
let dataSum = nv.Sum(x => x.Data)
if(secondaryData){ let dataSum2 = nv.Sum(x.Data2)}
select new MyObject(){ Date = nv.Key.Date, Data = dataSum} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T14:46:10.323

您可以使用 if 速记：

```
let dataSum2 = secondaryData ? nv.Sum(x.Data2) : 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:17:22.210

尝试这个。

```
List<Product1> prods = new List<Product1>();
        prods.Add(new Product1() { ProductPrice = 1, ValidFrom = DateTime.Today });
        prods.Add(new Product1() { ProductPrice = 3, ValidFrom = DateTime.Today });
        prods.Add(new Product1() { ProductPrice = 2, ValidFrom = DateTime.Today.AddDays(-1) });
        prods.Add(new Product1() { ProductPrice = 5, ValidFrom = DateTime.Today.AddDays(-2) });
    // Put any logic you want in sumFunc. For any field you want like ProductPrice 
    Func<Product1, decimal> sumFunc = (p) => p.ProductPrice;

    var result = from c in prods
                 group c by c.ValidFrom into gd
                 let sum = gd.Sum(sumFunc)
                 select sum; 
```

# wpf - WPF/Prism：嵌套视图和工具栏

> ID：11633321
> 
> 赞同：0
> 
> 时间：2012-07-24T14:41:54.283
> 
> 标签：wpf, prism

我有一个类似于下面显示的模型的 WPF/prism 应用程序：

![布局](../Images/55198cdf58b2b8e64a43cd3d4f9ce3ff.png)

两个 TabControl 都包含一个单独的 Prism 区域，第二个区域嵌套在第一个区域中。现在工具栏应该根据当前处于活动状态的视图来激活/停用项目。

工具栏当前在 shell 中定义。

我尝试使用某种注册表，每个 ViewModel 都可以注册它支持的工具栏命令。但是，我随后意识到工具栏无法知道哪个视图（因此哪个视图模型）处于活动状态。

问题出在嵌套中，否则我可能通过将 TabControl.SelectedItem 属性绑定到工具栏并从上面使用我的注册表来实现我想要的。

也许有更好的方法来做到这一点？或者让工具栏找出哪个视图处于活动状态的方法？

**编辑：**我现在尝试使用本文中描述的 ActiveAware ViewModel：http: [//www.codeproject.com/Articles/56826/ViewModel-Active-Awareness-in-a-Prism-Based-Applic](http://www.codeproject.com/Articles/56826/ViewModel-Active-Awareness-in-a-Prism-Based-Applic)，但是我现在有了当我从选项卡“一”切换到选项卡“二”并返回时，不会触发嵌套选项卡的“第一个选项卡”GotFocus 事件，这意味着工具栏将代表错误的视图。

也许这是要走的路？

**编辑 2：**问题似乎是第二个 tabcontrol 不在它自己的作用域内。我正在使用 ViewDiscovery 方法向我的区域添加视图，因此我没有明确地在范围内创建 regionmanager。SyncActiveState 似乎仅适用于范围区域，因为第一个 tabcontrol 视图模型在切换视图时正确更新。

有没有办法使用 XAML 创建一个作用域区域而不是普通区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:56:58.080

这里的问题是工具栏对活动区域一无所知；它们是故意分离的。

我会（个人）使用[事件聚合器](https://stackoverflow.com/questions/5820126/eventaggregator-helloworld-prism)从活动的 ViewModel 发布消息以说“我当前处于活动状态”，并让工具栏订阅这些消息并根据需要更新按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:34:02.620

如果我试图这样做，我可能会创建一个 IToolbarManager，它为每个可用的工具栏操作具有 bool 属性，并为操作本身创建一个 ICommand。

然后，在具体类型中实现此接口，其中 bool 属性会更改命令的 CanExecute 值，并调用 CommandManager.InvalidRequerySuggested。将此类型注册为容器中的单例，然后使用 DI 将其注入每个视图和 shell。然后，Shell 可以将工具栏按钮数据绑定到 IToolbarManager 中的命令，然后视图可以设置在初始化时是否启用这些操作。

我没有代码示例，因为我只是在思考如何解决这个问题，但希望你能按照我的建议进行操作，并且它证明是有帮助的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:10:31.853

我现在最终创建了一个扩展的 TabControl，它使用 SelectionChanged 事件在所有实现特定接口的项目上设置 IsActive。它还沿着 VisualTree 查找任何扩展的 TabControl，并对这些项目执行相同的操作，依此类推。

在这里工作得很好，到目前为止我们只使用 TabControls，所以这个解决方案对我有用。

# c# - 通过 DataContract 序列化 Singleton

> ID：11633326
> 
> 赞同：1
> 
> 时间：2012-07-24T14:42:08.847
> 
> 标签：c#, singleton, datacontract, internal, serialization

我在通过 DataContract 序列化和反序列化单例时遇到问题。

首先是一些事实：

```
1.) Singleton is "internal"
2.) Singleton contains Dictionaries 
```

我的序列化和反序列化工作正常，但这不是单例的正确方法。如果我反序列化 xml，我总是会生成我的单例的新实例并覆盖单例对象的当前引用 - 但在此之后它不再是单例。

有人知道吗？- 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:52:55.420

从 msdn检查此[链接](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)，有一个关于序列化单例的示例。反序列化后，您应该返回引用而不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:54:17.800

（.net 4.0 的代码）

我有同样的问题：反序列化需要创建单例类的新实例，它可以（！）这样做，因为它在成员函数中：构造函数对成员可见，但该实例不能替换单例实例从外部可见（“this”）。

因此，您必须将反序列化实例中的属性复制到“this”实例中。

手动复制会很快变老，所以这是我使用反射复制未标记的公共可写成员的解决方案 [xmlignore]：

```
 public static class SerializationHelpers
    {

      /// <summary>
      /// Copy all public props and fields that are not xmlignore
      /// </summary>
      /// <typeparam name="T"></typeparam>
      /// <param name="target"></param>
      /// <param name="other"></param>
      public static void CopyTypeFields<T>(T target, T other)
      {

        // get all public static properties of MyClass type
        PropertyInfo[] propertyInfos = other.GetType().GetProperties(BindingFlags.Public  

        | BindingFlags.Instance);
        FieldInfo[] fis = other.GetType().GetFields(BindingFlags.Public | 
        BindingFlags.Instance);

        foreach (FieldInfo fi in fis)
        {
          if ((fi.Attributes & FieldAttributes.FieldAccessMask) != 
              FieldAttributes.Literal &&
              (fi.Attributes & FieldAttributes.FieldAccessMask) != 
              FieldAttributes.Static)
          {
            if (IsXmlIgnored(fi)) { continue; }
            var myval = fi.GetValue(other);
            fi.SetValue(target, myval);
          }
        }

        foreach (PropertyInfo pi in propertyInfos)
        {
          if (!pi.CanWrite || !pi.CanRead) { continue; }
          if (IsXmlIgnored(pi)) { continue; }

          var myval = pi.GetValue(other, null);
          pi.SetValue(target, myval, null);
        }
      }

      private static bool IsXmlIgnored(MemberInfo pi)
      {
        object[] fiGetCustomAttributes = pi.GetCustomAttributes(false);
        foreach (object ob in fiGetCustomAttributes)
        {
          if (ob.GetType().
              Equals(typeof(System.Xml.Serialization.XmlIgnoreAttribute)))
          {
            return true;
          }
        }
        return false;
      }

    }

    // to use it ...
    // the deserialization method of the singleton mySingleton

    public bool loadSingleton()
    {
      bool ret= false;

      try
      {
        Type myType = GetType();
        XmlSerializer reader = new XmlSerializer(myType);
        try
        {
          using (StreamReader file = new StreamReader(filename))
          {
            try
            {
              mySingleton t1 = (mySingleton)reader.Deserialize(file);
              CopySerializationFields(t1);
              ret= true;
            }

            catch
            {
              ...
            }
          }
        }
        catch
        {
          ...
        }
      }
      catch (Exception ex)
      {
        ...
      }
      return ret;
    }

    private void CopySerializationFields(ProcessingSettings other)
    {
      SerializationHelpers.CopyTypeFields(this, other);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:46:49.180

尝试使用 NetDataContractSerializer-

> NetDataContractSerializer 在一个重要方面与 DataContractSerializer 不同：NetDataContractSerializer 在序列化的 XML 中包含 CLR 类型信息，而 DataContractSerializer 不包含。因此，只有在序列化和反序列化端共享相同的 CLR 类型时，才能使用 NetDataContractSerializer。
> 
> 序列化程序可以序列化已应用 DataContractAttribute 或 SerializableAttribute 属性的类型。它还序列化实现 ISerializable 的类型。

代码示例：

```
[DataContract(Name = "Customer", Namespace = "http://www.contoso.com")]
class Person : IExtensibleDataObject
{
    [DataMember()]
    public string FirstName;
    [DataMember]
    public string LastName;
    [DataMember()]
    public int ID;

    public Person(string newfName, string newLName, int newID)
    {
        FirstName = newfName;
        LastName = newLName;
        ID = newID;
    }

    private ExtensionDataObject extensionData_Value;    
    public ExtensionDataObject ExtensionData
    {
        get { return extensionData_Value; }
        set { extensionData_Value = value; }
    }
} 
```

序列化：

```
Person p1 = new Person("Zighetti", "Barbara", 101);
FileStream fs = new FileStream(fileName, FileMode.Create);
XmlDictionaryWriter writer = XmlDictionaryWriter.CreateTextWriter(fs);
NetDataContractSerializer ser = new NetDataContractSerializer();
ser.WriteObject(writer, p1); 
```

[msdn链接在这里](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.netdatacontractserializer.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T15:13:35.137

我刚刚为原子类搜索了很长时间的类似解决方案，并找到了[Marc Gravell](https://stackoverflow.com/users/23354/marc-gravell)[的类似问题](https://stackoverflow.com/a/1990054/1706067)的答案。这也适用于单身人士。

在您的单例类中，您实现由接口 System.Runtime.Serialization.IObjectReference 定义的 GetRealObject 方法。如果需要，您还可以在此处将先前序列化的数据添加到单例中，并将静态引用作为反序列化后使用的引用返回。

这是我的例子：

```
[System.Runtime.Serialization.DataContract]
public class MySingletonClass : System.Runtime.Serialization.IObjectReference
{
    private MySingletonClass()
    {
    }

    private static MySingletonClass _Instance;
    public static MySingletonClass Instance
    {
        get
        {
            if (_Instance == null)
                _Instance = new MySingletonClass();
            return _Instance;
        }
    }

    object System.Runtime.Serialization.IObjectReference.GetRealObject(System.Runtime.Serialization.StreamingContext context)
    {
        MySingletonClass realObject = Instance;
        realObject.Merge(this);
        return realObject;
    }

    private void Merge(MySingletonClass otherInstance)
    {
        // do your merging here
    }
} 
```

您也可以将其用于原子类。您只需将Instance 属性更改为GetInstance 方法，并在GetRealObject 方法中使用适当的属性（即ID）调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-17T10:49:42.023

```
[DataContract]
public sealed class SerializableSingletonPattern
{
    public static SerializableSingletonPattern Instance { get; private set; } = new SerializableSingletonPattern();
    [DataMember] public bool YourData { get; private set; }

    // explicit static constructor so C# compiler will not mark type as beforefieldinit
    static SerializableSingletonPattern() { }

    SerializableSingletonPattern() // your constructor
    {
    }

    [OnDeserialized]
    void OnDeserialized(StreamingContext context)
    {
        Instance = this;
    }
} 
```

# android - 如何将本机 C 库开发/移植到 android？

> ID：11633328
> 
> 赞同：10
> 
> 时间：2012-07-24T14:42:21.737
> 
> 标签：android, android-ndk

所以，我有一个小的 C 库。我想让这个库可供在 android 中开发本机 C 代码的其他开发人员使用（其他库、本机应用程序等）。

最好的方法是什么？我还没有太多线索，试图弄清楚这一切。

我读过 NDK 有两条路径：使用 Android.mk 和使用 create-standalone-toolchain ——这是正确的吗？这些中的每一个是如何工作的？是否有没有 NDK 的第三种方式，既然 NDK 可用，是否应该使用这种方式？

** 这可能以前被问过，但我知道自从 NDK 发布以来情况发生了变化，因为我发现很多帖子似乎已经过时了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T19:31:42.570

这个问题可以有一个巨大的答案，我会尽量简短。

1.  使用 Android NDK，创建一个新的 android 项目，创建一个 JNI 文件夹，并创建一个 Android.mk 文件，在其中创建两个库，一个是您的库，导出为共享库，另一个是用于测试的 jniwrapper它。[这](http://beyoundtestdrive.blogspot.fr/2009/05/how-to-build-and-use-shared-libraries.html)是一个人如何为自己的 lib 完成的示例。

2.  您可以通过使用独立工具链编译来制作共享库，[这](http://honeypod.blogspot.fr/2007/12/shared-library-hello-world-for-android.html)是一篇关于该主题的文章，还可以查看[curl 自述文件 for android](http://curl.haxx.se/docs/install.html)，它解释了如何使用独立工具链为 Android 编译 curl，我相信它更好这样做的方法，并且对您来说也更容易，因为您将在常规方式中使用交叉编译器......

# java - 有没有办法在 Java 泛型中模仿 OR

> ID：11633332
> 
> 赞同：17
> 
> 时间：2012-07-24T14:42:28.733
> 
> 标签：java, generics, inheritance

编辑：我改变了一些例子来获得这个想法：

喜欢

```
 <Integer or Float> 
```

...无需创建通用接口并为 Integer 和 Float 创建子类来实现它

如果没有，这样的事情可能会更有意义并且有用

```
 <E extends Number> <E = (Integer|Float)> 
```

如果 ？是通配符为什么我们不应该允许限制某些类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T14:44:50.910

这是不可能的，我几乎看不到它有任何价值。您使用泛型来限制类型，例如在集合中。在这种情况下，使用`or`运算符，您对类型的了解与对它们最具体的超类型的了解一样多。`Object`那么为什么不直接使用`Object`呢？

假想：

```
List<E extends String or Number> list = //... 
```

是什么类型的`list.get(0)`？是`String` *还是* `Number`？但是你不能有这种类型的变量。不可能`String`，不可能`Number`——只能`Object`……

更新：由于您将相关示例更改为：

```
<Integer or Float> 
```

你为什么不直接说：

```
<Number> 
```

? 请注意，[`Number`](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html)有一些方法可以让您轻松提取`floatValue()`和`intValue()`. 你真的需要确切的类型吗？

* * *

请注意，您**可以**使用`and`运算符：

```
<E extends Serializable & Closeable> 
```

这很有意义 - 您可以在需要或需要的`E`地方使用类型变量。换句话说，必须同时扩展和。另请参阅：[Java 泛型通配符与多个类](https://stackoverflow.com/questions/745756)。`Serializable``Closeable``E``Serializable``Closeable`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T14:48:10.467

在非常极端的情况下（Java 7 之前没有[`AutoCloseable`](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)），我也希望能够做到这一点。例如

```
<E extends Connection or Statement or ResultSet> 
```

`E.close()`无论实际类型是什么，这都可以让我打电话。换句话说，`E`将包含所有提供类型的“API 交集”。在这种情况下，它将包含, 以及来自和`close()`的所有方法。[`java.sql.Wrapper`](http://docs.oracle.com/javase/7/docs/api/java/sql/Wrapper.html)[`java.lang.Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)

但不幸的是，你不能这样做。相反，使用方法重载，例如

```
void close(Connection c);
void close(Statement s);
void close(ResultSet r); 
```

或者普通的旧`instanceof`

```
if (obj instanceof Connection) {
    ((Connection) obj).close();
}
else if (obj instanceof Statement) { //... 
```

或者修复您的设计，因为您可能无论如何都不应该与任意类型的 API 相交

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T14:46:53.397

我看不到它的真正用途......但无论如何，我相信你最接近它的是为可能的实现扩展通用接口。

# haskell - haskell - 合格导入后的“模棱两可的类型变量”

> ID：11633334
> 
> 赞同：1
> 
> 时间：2012-07-24T14:42:29.587
> 
> 标签：haskell, import, functional-programming, qualified

我在理解 haskell 中的错误消息时遇到了一点问题。

例如：

```
import qualified Data.Map as M

test = M.empty 
```

此代码按应有的方式运行，而不会收到任何错误消息。

输出如下所示：

```
*Main> test

fromList [] 
```

但如果我尝试这样的事情

```
import qualified Data.Map as M

test = do print M.empty 
```

我收到这样的错误消息

```
Ambiguous type variable `k0' in the constraint:
      (Show k0) arising from a use of `print'
    Probable fix: add a type signature that fixes these type variable(s)
    In a stmt of a 'do' block: print M.empty
    In the expression: do { print M.empty }
    In an equation for `test': test = do { print M.empty } 
```

所以我认为这与打印语句有关。

但是如果我在控制台中尝试（ghci）

```
Prelude Data.Map> print empty
fromList [] 
```

一切正常。

所以我希望有人能解释一下问题出在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T14:57:01.843

> 此代码按应有的方式运行，而不会收到任何错误消息。

在源文件中，它不应该。

```
import qualified Data.Map as M

test = M.empty 
```

的推断类型`test`is `Ord k => Map k a`，具有约束类型变量的多态类型。由于`test`不是函数并且没有类型签名，因此通过[单态限制](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-930004.5.5)，必须通过将受约束的类型变量解析为默认类型来使其类型成为单态。由于这里唯一的约束是`Ord`，因此[默认规则](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)禁止该类型变量被默认（必须至少有一个数字约束才能允许默认）。

因此，语言标准要求编译失败。

然而，在 ghci 中，有扩展的默认规则允许默认类型。如果要打印，则对两个类型变量都引入`test`了进一步的约束，并且 ghci在被要求打印时默认为to的类型。`Show``test``Map () ()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:56:44.090

这是因为`Data.Map.empty`有类型`Map k a`。`k`类型键到值的映射，类型`a`。

`print`另一方面，有 type `print :: Show a => a -> IO ()`，这意味着它只能显示属于 的实例的类型`Show`，而`M.empty`有 type `Map k a`，则没有这样的约束。它可以是任何类型`k`，或者`a`- 不需要能够显示它们。

所以，基本上，`print`不知道它被要求显示什么类型。

至于为什么它在 ghci 中起作用；我不完全确定。也许其中一位常驻 Haskell 巫师可以对此有所了解。

# c++ - 是否可以将 OpenCV 的 K-Means 实现与任意对象一起使用？

> ID：11633336
> 
> 赞同：2
> 
> 时间：2012-07-24T14:42:31.337
> 
> 标签：c++, opencv, cluster-analysis, k-means

我有一组不直观地适合 a 的对象，`cv::Mat`我想对它们进行聚类。我在任意两个对象之间定义了一个距离函数，并且我已经将 OpenCV 包含在我的项目中，因此使用它的实现似乎很方便。

所以，我的问题是，给定一个定义的距离函数，当对象不直观`cv::Mat`兼容时，我可以使用 OpenCV 的 k-means 聚类实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:47:56.907

不幸的是，OpenCV 的[KMeans](http://docs.opencv.org/modules/core/doc/clustering.html?highlight=kmeans#double%20kmeans%28InputArray%20data,%20int%20K,%20InputOutputArray%20bestLabels,%20TermCriteria%20criteria,%20int%20attempts,%20int%20flags,%20OutputArray%20centers%29)被硬编码为仅处理浮点、单精度值。如果可能，必须转换任何其他内容以在 KMeans 中使用。

将距离函数发送到通用 KMeans 算法应该不是不可能的事情，但是当前的实现不允许这样做。它所能处理的只是多维浮点特征空间，存储在`cv::Mat`

# linux - 使用 du 获取特定子目录的大小

> ID：11633339
> 
> 赞同：0
> 
> 时间：2012-07-24T14:42:38.570
> 
> 标签：linux, bash, du

我正在尝试编写一个脚本来总结一堆文件夹。所以我有以下结构：

```
monitor/abc_123 1G
monitor/abc_213 1G 
monitor/abc_111 2G
monitor/bbc_123 2.5G 
```

我需要的是发出一个命令（使用 du 我假设）来总结前缀为“abc_”的目录

我尝试了以下方法：

```
du -sh abc* 
```

...但这只是给了我每个文件夹的摘要。在这个例子中，我需要脚本来生成所有三个目录的总大小。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:48:23.710

怎么样

```
du -ch abc_* | tail -n 1 
```

这应该产生一个总计。

# vba - 如何在粘贴数组之前插入一行

> ID：11633340
> 
> 赞同：0
> 
> 时间：2012-07-24T14:42:39.137
> 
> 标签：vba, excel

我目前有一个数组，我使用宏填充并粘贴到名为“T1”的工作表中。我当前的宏使用该`rowcount`函数来确定使用的行并从下一个可用行粘贴数组。

我遇到的问题是，当我多次粘贴此数组时，数组需要间隔一行，以便我可以区分不同的提交。这是我到目前为止所拥有的，我希望有人可以帮助我：

```
Sub CopyData()

     Dim Truearray() As String
     Dim cell As Excel.Range
     Dim RowCount1 As Integer
     Dim i As Integer
     Dim ii As Integer
     Dim col As Range
     Dim col2 As Range
     i = 0
     ii = 2

     RowCount1 = DHRSheet.UsedRange.Rows.Count
     Set col = DHRSheet.Range("I1:I" & RowCount1)

     For Each cell In col

         If cell.Value = "True" Then

             Dim ValueCell As Range
             Set ValueCell = Cells(cell.Row, 3)
             ReDim Preserve Truearray(i)
             Truearray(i) = ValueCell.Value

             Dim siblingCell As Range
             Set siblingCell = Cells(cell.Row, 2)
             Dim Siblingarray() As String

             ReDim Preserve Siblingarray(i)
             Siblingarray(i) = DHRSheet.Name & "$" & siblingCell.Value

             i = i + 1

         End If

     Next

     Dim RowCount2 As Integer

     RowCount2 = DataSheet.UsedRange.Rows.Count + 1

     For ii = 2 To UBound(Truearray)
         DataSheet.Cells(RowCount2 + ii, 2).Value = Truearray(ii)
     Next

     For ii = 2 To UBound(Siblingarray)
         DataSheet.Cells(RowCount2 + ii, 1).Value = Siblingarray(ii)
     Next

     DataSheet.Columns("A:B").AutoFit

     MsgBox ("Data entered has been successfully validated & logged")

 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:42:30.683

如果您从底部单元格偏移两行，您将留下一个空白行分隔。您还应该考虑将整个数组填充为基数 1 并一次性将其写入 DataSheet。

```
Sub CopyData2()

    Dim rCell As Range
    Dim aTrues() As Variant
    Dim rRng As Range
    Dim lCnt As Long

    'Define the range to search
    With DHRSheet
        Set rRng = .Range(.Cells(1, 9), .Cells(.Rows.Count, 9).End(xlUp))
    End With

    'resize array to hold all the 'trues'
    ReDim aTrues(1 To Application.WorksheetFunction.CountIf(rRng, "True"), 1 To 2)

    For Each rCell In rRng.Cells
        If rCell.Value = "True" Then
            lCnt = lCnt + 1
            'store the string from column 2
            aTrues(lCnt, 1) = DHRSheet.Name & "$" & rCell.Offset(0, -7).Value
            'store the value from column 3
            aTrues(lCnt, 2) = rCell.Offset(0, -6).Value
        End If
    Next rCell

    'offset 2 from the bottom row to leave a row of separation
    With DataSheet.Cells(DataSheet.Rows.Count, 1).End(xlUp).Offset(2, 0)
        'write the stored information at one time
        .Resize(UBound(aTrues, 1), UBound(aTrues, 2)).Value = aTrues
    End With

End Sub 
```

# javascript - 比较两个变量sting数组以查看是否有任何值匹配 - javascript jquery

> ID：11633345
> 
> 赞同：1
> 
> 时间：2012-07-24T14:42:46.433
> 
> 标签：javascript, jquery, arrays, string, user-input

您好我正在尝试将两个数组相互比较，然后在任何值匹配时隐藏一个列表元素。

一个数组是附加到列表项的标签，另一个是用户输入。

我遇到了麻烦，因为我似乎能够交叉引用一个用户输入工作并且无法针对多个标签获取多个单词。

用户输入词的数量可能会改变，标签的数量可能会改变。我试过`inArray`但没有运气。任何帮助将非常感激。请参见下面的代码：

```
function query_searchvar() {
   var searchquery=document.navsform.query.value.toLowerCase();
   if (searchquery == '') {
      alert("No Text Entered");
   }
   var snospace = searchquery.replace(/\s+/g, ',');
   event.preventDefault();
   var snospacearray = snospace.split(',');

   $('li').each(function() {
      var searchtags = $(this).attr('data-searchtags');
      //alert(searchtags);
      var searcharray = searchtags.split(',');
      //alert(searcharray);
      var searchtrue=-1;

      for(var i = 0, len = searcharray.length; i < len; i++){
          if(searcharray[i] == searchquery){
              searchtrue = 0;
              break;
          }
      }
      if (searchtrue == 0) {
         $(this).show("normal");
      }
      else {
         $(this).hide("normal");
      }
   });
} 
```

好的，所以我尝试实现下面的代码，但没有运气。它似乎没有检查两个数组。

```
function query_searchvar()
{
var searchquery=document.navsform.query.value.toLowerCase();
if(searchquery == '')
{alert("No Text Entered");
}
var snospace = searchquery.replace(/\s+/g, ' ');
event.preventDefault();
var snospacearray = snospace.split(' ');
alert(snospacearray[1]);

$('li').each(function() {
  var searchtags = $(this).attr('data-searchtags');
  alert(searchtags);
  var searcharray = searchtags.split(' ');
    alert(searcharray[0]);

jQuery.each(snospacearray, function(key1,val1){
    jQuery.each(searcharray,function(key2,val2){
        if(val1 !== val2) {$(this).hide('slow');}
    });
});
});
} 
```

工作代码：

```
function query_searchvar()
{
var searchquery=document.navsform.query.value.toLowerCase();
if(searchquery == '')
{alert("No Text Entered");
}
var queryarray = searchquery.split(/,|\s+/);

event.preventDefault();

$('li').each(function() {
  var searchtags = $(this).attr('data-searchtags');
  //alert(searchtags);
  var searcharray = searchtags.split(',');
//alert(searcharray);
var found = false;
for (var i=0; i<searcharray.length; i++)
    if ($.inArray(searcharray[i], queryarray)>-1) {
        found = true;
        break;
    }

if (found == true )
  {

 $(this).show("normal");
  }
else {
$(this).hide("normal");
}
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:45:01.420

```
var snospace = searchquery.replace(/\s+/g, ',');
var snospacearray = snospace.split(','); 
```

请注意，您可以拆分正则表达式，因此上述内容等于：

```
var queryarray = searchquery.split(/,|\s+/); 
```

* * *

要查找两个数组中是否包含一个项目，请使用以下代码：

```
var found = searcharray.some(function(tag) {
    return queryarray.indexOf(tag) > -1;
}); 
```

虽然这仅适用于符合 ES5 的浏览器 :-) 要支持其他浏览器，请使用

```
var found = false;
for (var i=0; i<searcharray.length; i++)
    if ($.inArray(searcharray[i], queryarray)>-1) {
        found = true;
        break;
    } 
```

在普通的 js 中，没有[`jQuery.inArray`](http://api.jquery.com/jQuery.inArray/)：

```
var found = false;
outerloop: for (var i=0; i<searcharray.length; i++)
    for (var j=0; j<queryarray.length; j++)
        if (searcharray[i] == queryarray[j]) {
            found = true;
            break outerloop;
        } 
```

稍微快一点的算法（仅对非常大的数组需要）是在线性遍历它们之前对两个数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:46:18.533

这是应该解决您的问题的伪代码。

```
get both arrays
for each item in array 1
    for each element in array 2
        check if its equal to current element in array 1
           if its equal to then hide what you want 
```

这种聪明的例子是

```
jQuery.each(array1, function(key1,val1){
    jQuery.each(array2,function(key2,val2){
        if(val1 == val2) {$(your element to hide).hide();}
    });
}); 
```

有什么不明白的请追问：）

# java - Tika - 是否可以获得 div 标签的 id 属性？

> ID：11633348
> 
> 赞同：2
> 
> 时间：2012-07-24T14:42:56.783
> 
> 标签：java, html, html-parsing, apache-tika

是否可以通过 html 中 div 标签的 id 属性过滤 tika 解析的内容？

我正在尝试过滤掉 id 为“header”的 div，因为我正在解析的所有页面都有相同的 header，我只需要唯一的数据。

我已经为 div 标签触发了 ContentHandler.StartElement：

```
class MyHtmlMapper extends DefaultHtmlMapper {
    public String mapSafeElement(String name) {
        if ("DIV".equals(name)) {
            return "div";
        }
        return super.mapSafeElement(name);
    }
} 
```

我使用以下内容创建解析器：

```
InputStream urlInput = new URL(url).openStream();
Parser parser = new AutoDetectParser();
Metadata metadata = new Metadata();
ContentHandler handler = new BodyContentHandler();
ParseContext context = new ParseContext();
context.set(HtmlMapper.class, new MyHtmlMapper()); 
```

所以我假设我必须覆盖数据处理程序中的 BodyContentHandler.startElement() 和 BodyContentHandler.endElement() 方法（如下所示）：

```
class MyContnentHandler extends BodyContentHandler{
    public void startElement(String uri, String name, String element, Attributes atri) {
        ... 
        super.startElement(...)
    }
    public void endElement(...)
        ... //Similar to above
    }
} 
```

我已经为此工作了一段时间，但我对 tika 并不是很熟悉。如果有人有任何建议或解决方案，他们将不胜感激！

后来我了解到，我可以通过覆盖 MyHtmlMapper 类中的 mapSafeAttribute 方法来使属性（即 id 和类）显示在 startElement 中，如下所示：

```
class MyHtmlMapper extends DefaultHtmlMapper {
    public String mapSafeElement(String name) {
        if ("DIV".equals(name)) {
            return "div";
        }
        return super.mapSafeElement(name);
    }

    public String mapSafeAttribute(String eleName, String attrName) {
        HashSet<String> safeAttrs = new HashSet<String>();
        safeAttrs.add("id");
        safeAttrs.add("class");
        if (safeAttrs.contains(attrName) && eleName.equals("div")) {
            return attrName;
        } else {
            return super.mapSafeAttribute(eleName, attrName);
        }
    }
} 
```

但是我仍然无法弄清楚如何阻止解析器解析具有给定属性属性的开始和结束标记之间的内容。

如果我遗漏了任何有用的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:33:30.903

```
class MyHtmlMapper extends DefaultHtmlMapper {

    public public boolean isDiscardElement(String name) {
        //put here not wanted attributes
        HashSet<String> discardAttrs = new HashSet<String>();

        if (discardAttrs.contains(name) && eleName.equals("div")) {
            return true;
        } 
        return false;  
    }
) 
```

[http://tika.apache.org/1.2/api/index.html?org/apache/tika/parser/html/HtmlParser.html](http://tika.apache.org/1.2/api/index.html?org/apache/tika/parser/html/HtmlParser.html)

# session - Sitecore 分析机器人排除

> ID：11633349
> 
> 赞同：1
> 
> 时间：2012-07-24T14:43:02.757
> 
> 标签：session, analytics, sitecore, sitecore6, sitecore-dms

我们正在使用 Sitecore CMS 6.5.0 和 DMS 2.0.1 rev.120427。我们在我们的应用程序中使用 CoveoEnterpriseSearch。问题是每当访问页面时，分析数据库中都会插入 3 个不必要的行（带有 url '/Coveo/Anonymous/' 的页面表）。

`Sitecore.Analytics`.Config中与机器人相关的设置是，

```
 <setting name="Analytics.AutoDetectBots" value="true" />
 <setting name="Analytics.Robots.IgnoreRobots" value="true" />
 <setting name="Analytics.Robots.IgnoreAutoRobots" value="true" /> 
```

我怎样才能停止插入这些记录？我们尝试将用户代理“Coveo Sitecore Crawler”置于 Sitecore.Analytics.ExcludeRobots.Config 的`<excludedUserAgents>`标签下。我们在根目录中创建了一个“robots.txt”文件，其中包含 Coveo 用户代理和禁止选项，但没有任何用处。

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T13:01:26.617

这已在 Sitecore CMS 6.5.0 rev 中修复。121009（6.5.0 Update-6）和 DMS 2.0.1 rev。121009 于 2012 年 10 月 18 日发布

> 参与分析
> 
> 系统没有根据“/App_Config/Include/Sitecore.Analytics.ExcludeRobots.config”文件中的信息丢弃来自机器人的请求。(355803)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:45:47.330

`/Coveo/Anonymous/`您可以通过添加到中的`IgnoreUrlPrefixes`设置来限制对 Coveo URL 的跟踪`web.config`。

# java - 声纳 PicoLifecycleException

> ID：11633350
> 
> 赞同：5
> 
> 时间：2012-07-24T14:43:02.517
> 
> 标签：java, maven, sonarqube

在使用声纳运行分析源代码时，我得到 PicoLifecycleException 以下是堆栈跟踪，

```
org.picocontainer.PicoLifecycleException: PicoLifecycleException: method 'public void org.sonar.batch.components.EmbedderPhases.start()', instance 'org.sonar.batch.components.EmbedderPhases@1f4e9be, java.lang.RuntimeException: wrapper
    at org.picocontainer.monitors.NullComponentMonitor.lifecycleInvocationFailed(NullComponentMonitor.java:77)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.monitorAndThrowReflectionLifecycleException(ReflectionLifecycleStrategy.java:132)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:115)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89)
    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84)
    at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169)
    at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132)
    at org.picocontainer.behaviors.Stored.start(Stored.java:110)
    at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:996)
    at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:989)
    at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:746)
    at org.sonar.batch.Module.start(Module.java:88)
    at org.sonar.batch.SonarEclipseRuntime.analyse(SonarEclipseRuntime.java:44)
    at org.sonar.ide.eclipse.core.jobs.AnalyseProjectJob.run(AnalyseProjectJob.java:107)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: java.lang.RuntimeException: wrapper
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.monitorAndThrowReflectionLifecycleException(ReflectionLifecycleStrategy.java:130)
    ... 13 more
Caused by: org.sonar.api.utils.SonarException: Can not execute Checkstyle
    at org.sonar.plugins.checkstyle.CheckstyleExecutor.execute(CheckstyleExecutor.java:87)
    at org.sonar.plugins.checkstyle.CheckstyleSensor.analyse(CheckstyleSensor.java:43)
    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:58)
    at org.sonar.batch.components.EmbedderPhases.start(EmbedderPhases.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
    ... 12 more
Caused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: cannot initialize module Header - property 'headerFile' is missing or invalid in module Header
    at com.puppycrawl.tools.checkstyle.Checker.setupChild(Checker.java:177)
    at com.puppycrawl.tools.checkstyle.api.AutomaticBean.configure(AutomaticBean.java:207)
    at org.sonar.plugins.checkstyle.CheckstyleExecutor.execute(CheckstyleExecutor.java:81)
    ... 20 more
Caused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: property 'headerFile' is missing or invalid in module Header
    at com.puppycrawl.tools.checkstyle.checks.header.AbstractHeaderCheck.finishLocalSetup(AbstractHeaderCheck.java:192)
    at com.puppycrawl.tools.checkstyle.api.AutomaticBean.configure(AutomaticBean.java:203)
    at com.puppycrawl.tools.checkstyle.Checker.setupChild(Checker.java:156)
    ... 22 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T07:45:16.357

根据您的堆栈跟踪 - 底层错误来自 Checkstyle “模块 Header 中的属性 'headerFile' 丢失或无效”。这意味着您在没有指定此规则参数的情况下激活了 Checkstyle 规则“标题”。

# virtualenv - 无法在 pip 冻结列表中导入模块

> ID：11633366
> 
> 赞同：2
> 
> 时间：2012-07-24T14:43:53.097
> 
> 标签：virtualenv, pip

我无法导入在 pip 冻结列表中看到的模块（在我的情况下是 django-olwidget，但我认为这与该模块无关）。

激活虚拟环境后，我：

*   卸载了旧版本的模块（0.47）
*   确认已从冻结列表中消失
*   pip 再次安装了模块
*   检查模块现在是否在冻结列表中（django-olwidget==0.50）

环境处于活动状态，但现在我无法导入模块。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T14:28:33.063

我不知道这个问题是否仍然相关，但我有一个类似的问题，我只是在意识到错误之前问了一个问题。见[这里](https://stackoverflow.com/questions/31028990/pip-freeze-gives-different-modules-from-helpmodules)。TL;DNR 需要指定 pip 版本才能正确安装包。

对于 python 2.7：

```
pip2.7 
```

# java - Glassfish Bean 参考查找失败

> ID：11633367
> 
> 赞同：1
> 
> 时间：2012-07-24T14:43:59.227
> 
> 标签：java, glassfish-3

奇怪的问题在这里。我有一个声明了远程接口的 bean 和一个定义为无状态 bean 的实现。由于我希望能够根据实现要求将 bean 替换为不同的 bean，因此我`ejb-reference`在`glassfish-web.xml`.

如果我使用名称语法来引用引用名称（如 `@EJB(name = "BeanReference")`. 我也可以查一下：`new InitialContext().lookup("java:comp/env/BeanReference")`.

当我根本没有任何注射（没有`@EJB`）时，会发生奇怪的事情。然后查找失败并显示“ `javax.naming.NameNotFoundException: No object bound to name java:comp/env/BeanReference`”。如果我在“”中列出这些对，`java:comp/env`则它确认引用不存在，除非`@EJB`在应用程序中的某处发生注入。我检查了 jndi-name 条目并确认它与初始化期间 Glassfish 的输出相匹配。

我也尝试使用`@Local`代替`@Remote`并获得相同的结果。我更喜欢，`@Remote`因为在实际部署中，`MyBean`实现可能会驻留在远程 glassfish 实例上。它是本地的，仅用于开发和测试。

使用 Glassfish 3.1.1 和 NetBeans 7.1.2。下面的代码片段...为清楚起见省略了异常处理。

```
@Remote
public interface MyBean {
    public String doSomething();
}

@Stateless
public class MyBeanImpl implements MyBean {
    @Override
    public String doSomething() {
        return "something";
    }
}

@Stateless
@LocalBean
public class MyOtherBean {
    public MyOtherBean() {
        Context ctx = new InitialContext();
        MyBean myBean = (MyBean)ctx.lookup("java:comp/env/BeanReference");
        String rc = myBean.doSomething();
        System.out.println("rc = " + rc);
    }
}

<ejb-ref>
    <ejb-ref-name>BeanReference</ejb-ref-name>
    <jndi-name>java:global/appName/MyBeanImpl!com.test.bean.MyBean</jndi-name>
</ejb-ref> 
```

# android - 在静态函数中执行 AsyncTask 的问题

> ID：11633369
> 
> 赞同：0
> 
> 时间：2012-07-24T14:44:00.853
> 
> 标签：android, function, static, android-asynctask

我正在尝试从静态函数执行 doInBackground AsycTask，但是当我尝试输入 Void 的参数时，我收到一个 Java 错误，说“Void”不适用于任务“String、Void、Boolean”

无论如何，这是我的代码：

```
public class RequestHandler extends AsyncTask<URL, Void, Boolean> {

    //atributes for Async
    private static Context context;
    private RequestHandler origin;

 // Constructor
    public RequestHandler(Context c) {

        origin = this;
        context = c;

    }

   public static boolean doLogin(String username, String password) {
       String URL = "http://127.0.0.1:1337";
new RequestHandler(context).execute(URL, Void, false); // what do I put here?  
   }

    @Override
    protected Boolean doInBackground(URL... params) {
        // TODO Auto-generated method stub
        URL url = null;
        try {
           HttpURLConnection urlConnection = null;
        try {
            urlConnection = (HttpURLConnection) url.openConnection();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
           try {
             InputStream in = null;
            try {
                in = new BufferedInputStream(urlConnection.getInputStream());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
             readStream(in);
           } finally {

           }
        return false;

           }
            private String readStream(InputStream is) {
                try {
                  ByteArrayOutputStream bo = new ByteArrayOutputStream();
                  int i = is.read();
                  while(i != -1) {
                    bo.write(i);
                    i = is.read();
                  }
                  return bo.toString();
                } catch (IOException e) {
                  return "";
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:46:57.547

1.  将 'doLogin 方法放在 AsyncTask 类之外
2.  `new RequestHandler(context).execute(URL);`
3.  `protected Boolean doInBackground(String... params) {`....}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:55:06.810

在 doLogin 方法中调用 RequestHandler 的地方，您正在尝试使用 Void 作为对象，但它是一种类型，请尝试将该行更改为：

```
new RequestHandler(context).execute(URL, null, false); 
```

并让您的 AsyncTask 改为返回 null 。

# javascript - Jquery 选项卡实现 - SharePoint 2010

> ID：11633375
> 
> 赞同：0
> 
> 时间：2012-07-24T14:44:08.690
> 
> 标签：javascript, jquery, sharepoint-2010

我们正面临 Jquery 选项卡实现的问题。

如果我们在一个简单的新项目表单中使用下面的代码，它工作正常。

但是如果我们在一个新的项目表单中使用它（其中使用了 Jquery 选项卡），它根本不起作用。

```
$(document).ready(function () {
    $("input[title='FromDate']").change(function () {
        alert('From date');
    });
}); 
```

要创建 Jquery 选项卡，我们在下面引用了 url。

[http://amitphule.blogspot.hk/2011/08/change-look-and-feel-of-sharepoint-page.html](http://amitphule.blogspot.hk/2011/08/change-look-and-feel-of-sharepoint-page.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:51:33.063

尝试在选择器中使用 tabid。

```
$(document).ready(function () {

$("#tabID input[title='FromDate']").change(function () {

    alert('From date');
});

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:02:57.940

如果 tab-2 在 jquery 运行后被 ajaxed 或创建，那么 .change 将不起作用，除非您使用[**.live**](http://api.jquery.com/live/)来维护添加到文档中的新元素的启动。

尝试使用 .live 看看它是否有如下不同：

```
$("input[title='FromDate']").live("change", function () { 
    alert('From date'); 
}); 
```

# magento - 如何删除 Magento 中下拉属性的初始空值？

> ID：11633378
> 
> 赞同：6
> 
> 时间：2012-07-24T14:44:13.890
> 
> 标签：magento, drop-down-menu, attributes, default, option

我正在使用 Magento 版本 1.5.1.0。我添加了一个属性，在“属性”选项卡中选择了以下选项：

```
Catalog input type for store owner: dropdown
Unique value: no
Values required: no 
```

然后我转到管理标签/选项选项卡并添加了 3 个不同的选项，选择第一个选项作为默认选项。我将它添加到一个属性集中，当我进入一个产品时，我看到了下拉列表，但前面有一个空选项值：

```
<select>
<option selected="selected"></option>
<option>Option 1</option>
<option>Option 2</option>
<option>Option 3</option>
</select> 
```

当我保存产品时，空选项仍然处于选中状态。如何在不使用 JS 或编辑任何文件的情况下删除该空选项并使选项 1 成为我所有现有产品的默认选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-21T09:50:04.153

我认为这会有所帮助。

当您调用 getAllOptions 时，您需要传递 false。

->getAllOptions(假)

[具有第一个空值的 Magento 属性下拉列表](https://stackoverflow.com/questions/31534910/magento-attribute-dropdown-with-first-empty-value/31535139#31535139)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:33:18.730

```
<select name="history[status]" class="select" id="history_status">
     <option value="pending" selected="selected">Pending</option>
     <option value="canceled">Canceled</option>
     <option value="processing">Processing</option>
</select> 
```

尝试对此块使用 SELECT 标记而不是选项。上面我有一个来自 Magento 商店的例子。您的：

```
<option selected="selected></option> 
```

正是这样。一个选项，而不是定义一个选择框。

# git - 将代码推送到 Heroku 公钥错误

> ID：11633379
> 
> 赞同：0
> 
> 时间：2012-07-24T14:44:20.130
> 
> 标签：git, heroku

我在将本教程中的代码推送到 heroku 时遇到问题：[http](http://newsinternational.github.com/iot-assistant/) : //newsinternational.github.com/iot-assistant/。我在第五步。当我发出 git push heroku master 命令时，我收到错误 Permission denied (publickey)。致命：远端意外挂断。我已经尝试过：[部署heroku代码时权限被拒绝（公钥）。致命：远程端意外挂断](https://stackoverflow.com/questions/4269922/permission-denied-publickey-when-deploying-heroku-code-fatal-the-remote-end)并且[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:28:14.153

检查您的 .ssh 配置以获取 heroku。转到 .ssh 文件夹并打开配置文件

```
cd ~/.ssh
subl config 
```

'subl' 用于 Sublime Text，但你可以使用任何你想要的编辑器。查找“IdentityFile”行并确保它列出了非公钥：

```
IdentityFile "/Users/ircmullaney/.ssh/id_rsa" 
```

不是

```
IdentityFile "/Users/ircmullaney/.ssh/id_rsa.pub" 
```

那是为我做的。

# tfs - XML 文件转换使用一键发布，而不是 Web 部署

> ID：11633382
> 
> 赞同：0
> 
> 时间：2012-07-24T14:44:31.377
> 
> 标签：tfs, tfsbuild, webdeploy, slowcheetah, oneclick

我有两种不同的方式来部署我的 Web 应用程序 - 一种通过*IIS Web Deploy*，通过自定义构建模板中的*MSBuild*参数连接，以及使用内置于*Visual Studio的**One-click* publish 。我还安装了*Slow Cheetah*转换，并且可以成功文件。**`transform Web.config`**

 **但是，我被困在`Nlog.config`文件上。如果我使用*一键*发布，则 webapp 使用更新的配置文件部署得很好。但是，使用实际的构建过程，没有任何东西被转换。源`Nlog.config`文件被复制到远程服务器上的放置位置、部署包和输出文件夹。

该`.csproj`文件已`Nlog`设置为相同的方式`web.config`，即

```
<Content Include="NLog.config">
  <TransformOnBuild>true</TransformOnBuild>
    <Content Include="Web.config">
  <SubType>Designer</SubType>
  <TransformOnBuild>true</TransformOnBuild>
<Content Include="NLog.Debug.config">
  <DependentUpon>NLog.config</DependentUpon>
  <IsTransformFile>True</IsTransformFile> 
```

`SlowCheetah`预览功能也让我知道我的转换文件格式正确。不知道我可能会错过什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:31:30.230

嗯，我真的很喜欢那个。经过一番摸索，我发现我需要包括以下内容 -

```
 <Import Project="TransformsFiles.targets" />
   <PropertyGroup>
     <TransformOnBuild>true</TransformOnBuild>
   </PropertyGroup> 
```

[正如 Sayed在这里](http://sedodream.com/2010/11/18/XDTWebconfigTransformsInNonwebProjects.aspx)提到的，就在最终项目标签的正上方。这实际上会转换文件，但它们仍然不会成功部署。我将不得不添加一些构建后的事件或其他东西来解决这个问题。不是最好的解决方案，但至少它是有效的。

更新：为了理解，为了部署文件，我必须编辑 .csproj 文件以包含一个新目标并将它们手动转储到远程服务器，但只有在转换完成之后。查看您的日志文件以了解发生了什么，然后只需拿起转换后的文件并将其移动到远程服务器。那部分代码看起来像这样 -

```
<Target Name="PostTransformNLogConfig" AfterTargets="TransformAllFiles">
  <Copy Condition="Exists('d:\Builds\Binaries\NLog.config' )"
        SourceFiles="d:\Builds\NLog.config"
        DestinationFiles="\\remoteserver\NLog.config" />
</Target> 
```**

# dependency-injection - 如何在 Guice 中绑定这种类型？

> ID：11633384
> 
> 赞同：0
> 
> 时间：2012-07-24T14:44:57.087
> 
> 标签：dependency-injection, guice

我有这个领域：

```
@Inject(optional=true)
@Named(NAMED_ERROR_HANDLER)
private PolymorphicDispatcher.ErrorHandler<IScope> errorHandler = new PolymorphicDispatcher.NullErrorHandler<IScope>(); 
```

我需要覆盖默认绑定（`NullErrorHandler`）。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:09:56.600

我没有`PolymorphicDispatcher.ErrorHandler`和儿子，但是这个绑定应该可以完成工作：

```
bind(new TypeLiteral<PolymorphicDispatcher.ErrorHandler<IScope>>(){})
    .annotatedWith(Names.named(NAMED_ERROR_HANDLER))
    .to(MyImpl.class); 
```

`MyImpl`就像这样：

```
public class MyImpl implements PolymorphicDispatcher.ErrorHandler<IScope> {
    // methods from interface
} 
```

基本原理在你搜索的时候解释[到这里](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Binder.html)`TypeLiteral`。（抱歉，该部分附近没有 HTML-ID 或锚点）。

# javascript - 了解模块化 javascript 模式

> ID：11633388
> 
> 赞同：4
> 
> 时间：2012-07-24T14:45:14.083
> 
> 标签：javascript, jquery, design-patterns, modular

我正在尝试编写“更好的”javascript。

以下是我发现并尝试采用的一种模式。但是，我对它的使用有点困惑。

比如说，我有一个名为“工作”的页面。该页面上的任何 JS 功能都将封装在以下内容中：

```
window.jobs = (function(jobs, $, undefined){
    return {
        addNew: function(){
            // job-adding code
        }
    }
})(window.jobs|| {}, jQuery);

$(function(){
    $('.add_job').on('click', function(event){
        event.preventDefault();
        window.jobs.addNew();
    });
}); 
```

正如您可能推断的那样，我所做的只是用调用我的全局作业对象中的函数替换了所有可能位于匿名事件处理函数中的代码。我不知道为什么这是一件好事，除了它减少了可变碰撞的可能性并使整个事情变得更整洁，但这对我来说已经足够了。

可能相当明显的问题是：我所有的事件绑定初始化类型的东西仍然坐在我闪亮的新工作对象之外：它应该在哪里？在工作对象内部？在作业对象内的返回对象内？在 init() 函数内部？

我只是想了解一个稳定的、基本的框架来放置简单的功能。我不是在构建 JS 应用程序，我只是想编写比现在更健壮和可维护的代码。热烈欢迎任何和所有建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:02:28.783

您也可以将您的应用程序分解为任意数量的`modules`/`objects`您喜欢的。

例如，您可以拥有另一个对象/模块来缓存和定义您的所有 DOM 节点和另一个只处理任何事件的对象/模块。例如：

```
(function ( win, doc, $, undef ) {
    win.myApp = win.myApp || { };

    var eventHandler = {
        onJobClick: function( event ) {
            event.preventDefault();
            myApp.addNew();
        }
    };

    var nodes = (function() {
        var rootNode = $( '.myRootNode' ),
            addJob = rootNode.find( '.add_job' );

        return {
            rootNode: rootNode,
            addJob: addJob
        };
    }());

    $(function() {
        myApp.nodes.addJob.on( 'click', myApp.handler.onJobClick );
    });

    myApp.nodes = nodes;
    myApp.handler = eventHandler;
}( this, this.document, jQuery )); 
```

*在这个（模块）模式中如何*创建单例并不重要，无论是作为文字、构造函数`Object.create()`还是诸如此类的东西。它需要符合您的要求。

但是您应该尝试创建尽可能多的特定模块/对象。当然，如果将这些单例/模块/对象分成多个 javascript 文件并按需加载它们更有意义，那么在你说刀之前，你就处于模块化编程模式的世界，处理`requireJS`AMD 或 CommonJS 模块.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:00:28.563

封装方面，你很好：你甚至可以`addNew`在 jQuery 闭包中声明，你仍然可以避免全局范围。我认为你得到的更多的是实现接近 MVC 架构的东西。

我喜欢做的事情是创建一个您使用 DOM 元素实例化的对象，该对象负责处理其自己的绑定/提供访问其控件等的方法。

例子：

```
 // (pretend we're inside a closure already)
   var myObj = function(args){
       this.el = args.el; // just a selector, e.g. #myId
       this.html = args.html;
       this.bindings = args.bindings || {};
   }

   myObj.prototype.appendTo = function(elem){
       elem.innerHTML += this.html;
       this.bindControls();
   };

   myObj.prototype.remove = function(){
       $(this.el).remove(); // using jQuery
   };

   myObj.prototype.bindControls = function(){
       for(var i in this.bindings){ // event#selector : function
           var boundFunc = function(e){ return this.bindings[i].call(this,e); };
           $(this.el).on(i,boundFunc);
       }
   }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:02:21.890

你现在做的方式也正是我做的方式，我通常在匿名函数本身内创建窗口对象，然后在其中声明（在本例中：jClass = window.jClass）。

```
(function (jClass, $, undefined) { 

    /// <param name="$" type="jQuery" />

    var VERSION      = '1.31';
    UPDATED_DATE = '7/20/2012';

    // Private Namespace Variables
    var _self         = jClass; // internal self-reference
    jClass        = window.jClass; // (fix for intellisense)
    $             = jQuery; // save rights to jQuery (also fixes vsdoc Intellisense)

    // I init my namespace from inside itself
    $(function () {
        jClass.init('branchName');
    });

    jClass.init = function(branch) {
      this._branch = branch;
      this._globalFunctionality({ globalDatePicker: true });
      this._jQueryValidateAdditions();

      //put GLOBAL IMAGES to preload in the array
      this._preloadImages( [''] );

      this._log('*******************************************************');
      this._log('jClass Loaded Successfully :: v' + VERSION + ' :: Last Updated: ' + UPDATED_DATE);
      this._log('*******************************************************\n');
};

    jClass._log = function() {
    //NOTE: Global Log (cross browser Console.log - for Testing purposes)
    //ENDNOTE 

    try { console.log.apply(console, arguments); }  
    catch (e) {
        try { opera.postError.apply(opera, arguments); }
        catch (e) { /* IE Currently shut OFF : alert(Array.prototype.join.call(arguments, ' '));*/ }
    }   
};

}(window.jClass= window.jClass|| {}, jQuery)); 
```

我让他们像这样完全匿名的原因是，假设在另一个文件中我想为这个 jClass 添加更多功能。我只是创建另一个：

```
(function jClass, $, undefined) {

jClass.newFunction = function (params) {
    // new stuff here
};

}(window.jClass = window.jClass || {}, jQuery)) 
```

如您所见，我更喜欢 object.object 表示法，但您可以使用对象文字 object : object，这取决于您！

无论哪种方式，通过将所有这些分开，并在没有实际页面逻辑的情况下进行封装，可以更轻松地将其包含在 globalJS 文件中，并且您网站上的每个页面都可以使用它。比如下面的例子。

```
jClass._log('log this text for me'); 
```

您不想将模型逻辑与您的业务逻辑交织在一起，因此您在正确的道路上将两者分开，并允许您的全局命名空间/类/等更加灵活！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-05T11:48:09.667

你可以在这里找到关于模块模式的全面研究：http: [//www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)它涵盖了块范围模块方法的所有方面。然而在实践中，你会有相当多的文件来封装你的代码，所以问题是如何组合它们的属性。AMD ...每个模块加载产生的多个 HTTP 请求会损害您的页面响应时间。因此，您可以将 CommonJS 编译为适合在浏览器中使用的单个 JavaScript 文件。看看它有多容易[http://dsheiko.github.io/cjsc/](http://dsheiko.github.io/cjsc/)

# r - 如何在 R 中的 glm 模型中自动包含所有双向交互

> ID：11633403
> 
> 赞同：67
> 
> 时间：2012-07-24T14:46:00.137
> 
> 标签：r

假设您正在使用`R`并将数据存储在数据框中，`M`. 然后我知道

```
g <- glm(Y ~ ., data=M) 
```

将自动拟合一个模型，其中`Y`因变量是因变量，所有其他列`M`都是预测变量。是否有一种类似的简单方法来额外包含每两种方式的交互？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-07-24T14:51:30.783

`.*.`您可以简单地使用任意*n*向交互编写来进行双向交互`.^n`。`formula(g)`将在每种情况下告诉您公式的扩展版本。

# objective-c - 找不到头文件

> ID：11633404
> 
> 赞同：4
> 
> 时间：2012-07-24T14:46:06.490
> 
> 标签：objective-c, ios, xcode4

我有一个项目，它有一个静态库，其中引用了这样的头文件：

```
#import <libetpan/libetpan.h> 
```

我无法更改此导入行。我应该怎么做才能让 Xcode 找到那些头文件？我有一个包含头文件的文件夹，我可以将其导入项目。谢谢。

目前错误如下：

```
'libetpan/libetpan.h' file not found 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T14:49:01.090

您可能已将 libetpan 文件夹添加到您的项目中（如果没有，请这样做）

右键单击该文件夹并查看路径（右键单击后获取信息）

如果它不是文件夹结构中项目文件的兄弟（签入查找器），那就是它出错的地方

或者，您可以添加标题搜索路径：[XCode 4 中的标题搜索路径](https://stackoverflow.com/questions/5269029/header-search-path-in-xcode-4)

# ios - UIImageView 设置为 ASpectFill 时的内容模式问题

> ID：11633405
> 
> 赞同：0
> 
> 时间：2012-07-24T14:46:09.420
> 
> 标签：ios, xcode, uitableview, uiimageview, uiimage

我需要在一个单元格中加载一个图像，我的图像上有一个白色边框。我从链接调用图像，它看起来像这样。

![在此处输入图像描述](../Images/0dcc33aa7eb47891d38ee15afcf6ca1b.png)

但我的形象看起来像

![在此处输入图像描述](../Images/95ec2e6b071009b7cc88c12aaa7c223c.png)

我的图像左侧和右侧出现白色边框。这是我的图像代码

```
 UIImageView *item=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 115, 130)];

    NSString *imgstring=[NSString stringWithFormat: @"%@",[[mutarray objectAtIndex:indexPath.row ] valueForKey:@"imgurl"]];

    NSURL *imgurl=[NSURL URLWithString:imgstring];

    UIImage *image=[UIImage imageWithData:[NSData dataWithContentsOfURL:imgurl]];

    [item setBackgroundColor:[UIColor clearColor]];
    item.contentMode=UIViewContentModeScaleToFill;
    [item setImage:image];
    [cell.contentView addSubview:item]; 
```

请指导...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:14:04.013

那些白色的边边框在您在问题中发布的图像中……这就是它们也出现在 iOS 中的原因。在照片编辑器中打开该图片，您将看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:36:14.040

您可以通过编辑 webimage 来解决它，因为它具有白色背景，您可以添加以下代码来区分图像

```
item.backgroundcolor=[UIColor blackcolor]; 
```

希望能帮助到你..

# iphone - 是否可以通过 nsnotification 将数组作为 obj 传递

> ID：11633415
> 
> 赞同：10
> 
> 时间：2012-07-24T14:46:35.187
> 
> 标签：iphone, ios, nsnotifications

我可以通过使用协议和委托来做到这一点，但我想尝试使用 NSNotification

我的任务是将`NSMutableArray`通过通知从一个视图发送到另一个视图。有没有可能做

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadData" object:myArray]; 
```

然后，在接收器中，我怎样才能得到传递的 myArray. 我正在阅读并且对通知对象的和感到`userInfo`困惑`object`。

请就这个问题给我建议。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-24T15:00:34.870

An`NSNotification`有一个名为`userInfo`that is an的属性`NSDictionary`。`object`就是`NSObject`发布`NSNotification`. _ 所以通常我在设置时使用`self`，因为发送. 如果您希望通过using an我会执行以下操作：`object``NSNotification``self``NSObject``NSNotification``NSArray``NSNotification`

```
NSArray *myArray = ....;
NSDictionary *theInfo =
  [NSDictionary dictionaryWithObjectsAndKeys:myArray,@"myArray", nil];
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadData"
                                                    object:self
                                                  userInfo:theInfo]; 
```

然后使用以下命令捕获它：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(doTheReload:)
                                             name:@"reloadData"
                                           object:sendingObject]; 
```

`sendingObject`发送`NSNotification`. _

最后，`doTheReload:`使用以下方法解码数组：

```
NSArray  *theArray = [[notification userInfo] objectForKey:@"myArray"]; 
```

这总是对我有用。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:53:08.850

你应该使用`userInfo`. 它用于您要与通知一起发送的杂项数据。`object`参数用于触发事件的对象。例如，如果您想监视某个 MPMoviePlayerController（而不是其他），那么您将只注册它的通知（通过`object`参数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T14:52:59.000

这是非常一致的，因为当您使用该方法发布任何通知时，**对象**是`object`并且**userInfo**是。`userInfo``-postNotificationName:object:userInfo:`

是的，您**可以**通过.`NSObject``NSNotificationCenter`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T06:05:36.923

**斯威夫特 4，斯威夫特 5**

```
NotificationCenter.default.post(name: Notification.Name("favoriteIsDeleted"), object: [message, self.viewModel.deleteSuccessIcon])

@objc func favoriteIsDeleted(notification: Notification) {
    guard let object = notification.object as? [String?], let message = object[0], let deleteSuccessIcon = object[1] else { return }
    // Code here ...
} 
```

# redirect - Spring-MVC：当原始以斜杠结尾时重定向未正确更改 URL

> ID：11633417
> 
> 赞同：2
> 
> 时间：2012-07-24T14:46:37.167
> 
> 标签：redirect, spring-mvc

我正在使用 Spring 3.1 来翻新一个非常古老的基于 Servlet 的站点。一些 URL 已过时。我的老板不相信网络的可靠性来维护重定向，所以她要求我将我自己的重定向从过时的 URL 放到 webapp 中。

我制作了一个名为**LegacyServletController**的控制器来处理过时的 URL。除非有人在 URL 上键入斜杠，否则它会很好用。Controller 方法仍然会选择它，但它不会重定向到新的 URL。它只是将新 URL 添加到地址栏中已有的 URL。

**例如，这是一个过时的 URL：**

[http://blah.blah.blah/acme/moreinfo/](http://blah.blah.blah/acme/moreinfo/)

**我希望它重定向到**

[http://blah.blah.blah/acme/home](http://blah.blah.blah/acme/home)

**但是，当过时的 URL 具有上述斜杠时，重定向会产生以下内容：**

[http://blah.blah.blah/acme/moreinfo/home](http://blah.blah.blah/acme/moreinfo/home)

我猜我的 *-servlet.xml 中需要另一个 URL 处理程序，但我还是 Spring 新手，不知道如何设置，所以我的控制器函数可以正确处理带有和不带斜杠的过时 URL。

这是我用来处理旧 URL 的控制器类

```
import org.springframework.stereotype.Controller;
import org.springframework.validation.*;
import org.springframework.ui.ModelMap;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.SessionAttributes;

import org.apache.log4j.Logger;

@Controller
public class LegacyServletController {

    private static final Logger logger = Logger.getLogger(LegacyServletController.class);

    // Redirect these legacy screns "home", the login screen via the logout process
    @RequestMapping({"moreinfo","other_dead_screen"})
    public String home() {
        logger.debug("started...");
        return "redirect:home";

    }// end home()  

}// end class LegacyServletController 
```

**这是我的 acme-servlet.xml：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:mvc="http://www.springframework.org/schema/mvc"
  xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <context:component-scan base-package="com.acme.controller" />

  <mvc:resources mapping = "/**" location = "/,file:/apps1/bea/user_projects/domains/acme/common/,file:/c:/ftp/acme/"/>
  <mvc:annotation-driven/>

  <bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name = "prefix" value = "/jsp/"/>
    <property name = "suffix" value = ".jsp"/>
  </bean>

  <bean name="af" class="com.acme.controller.security.CustomAuthenticationFilter"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T17:47:33.820

返回语句应为：`return "redirect:/home"`. 控制器应该返回视图解析器的绝对路径。

这个问题的答案也很有帮助：[redirect in Spring MVC](https://stackoverflow.com/questions/4584410/redirect-in-spring-mvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:11:24.293

最好为重定向提供完整路径，理想情况下您可以 return `redirect:/home`，这将重定向到相对于您的 Web 应用程序根目录的路径 -`http://blah.blah.blah/acme/home`

# grails - Grails Quartz 插件在第 8 次执行时冻结

> ID：11633418
> 
> 赞同：2
> 
> 时间：2012-07-24T14:46:37.900
> 
> 标签：grails, quartz-scheduler

环境：Grails 2.0.3，Quartz 插件 1.0-RC2

我有一个简单的石英作业，可以从数据库中读取一个值。在第 8 次执行时，作业在从数据库读取时冻结。还有一个从数据库中检索值的网页。一旦 Job 进入等待状态，尝试通过网页读取值也会冻结。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:22:41.403

环境：Grails 2.2.0，Quartz 插件 1.0-RC5

我使用quartz-1.0-RC5 遇到了同样的问题。

作为一种解决方法，我用`SessionBinderJobListener`来自quartz-0.4.2 的类替换了该类（仅将包更改为新包），并且该作业再次运行而没有任何问题。所以看起来`persistenceInterceptor`bean 没有关闭连接或将它们返回到池中。`org.codehaus.groovy.grails.orm.hibernate.support.HibernatePersistenceContextInterceptor`冲洗和销毁可能存在问题。

如果`org.quartz.threadPool.threadCount`在属性中远小于 maxActive `dataSource`，则不会出现问题（可能每个作业线程都已经获得了连接）或者它只会花费更长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:05:32.843

数据源连接池的默认大小是 8，因此您可能没有正确关闭连接以将它们返回到池中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T18:44:50.137

我在 Quartz 插件版本 1.0.1 中看到了同样的情况。在第 8 次执行时，Job 和 Tomcat 工作人员都冻结了。在工作块中使用 `withSession`和调用 Hibernate 。那成功了。`session.disconnect()``finally {}`

```
def execute() {
   def hsession
   try {
     DomainObject.withSession { ses ->
       hsession = ses

       ....
     }
   } catch(Exception e) {
      //log it etc.
   } finally {
      hsession?.disconnect()
   }
} 
```

# objective-c - 以编程方式在 iOS 设备上向 PDF 添加注释并查看

> ID：11633419
> 
> 赞同：0
> 
> 时间：2012-07-24T14:46:43.180
> 
> 标签：objective-c, ios, ipad, pdf, annotations

在过去的几周里，我做了很多搜索以满足我客户的要求，对 PDF 进行注释。很多指针，但没有一个按我们想要的方式工作。所以这个问题。

要求：我想在 PDF 上添加注释，这些注释应该作为注释/注释嵌入到 PDF 中，应该可以在桌面和 iPad 上查看。

我们正在开发一个应用程序，这是我们目前面临的最大障碍之一。有人可以帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:52:31.377

您必须将 pdf 转换为可以绘制的某种格式，例如图像文件。可能有用于此的库，如果没有，那么您也可以进行屏幕绘制捕获。然后使用文本框或`CGContext`. 完成后，定义`CGRect`包含最终图像的 a 。然后打电话

```
CGContextRef ctx = CGPDFContextCreateWithURL((__bridge CFURLRef)[NSURL fileURLWithPath:tmpFile], &mediaBox, NULL); 
```

包含您的图像`mediaBox`的位置在哪里。`CGRect`

正如您所知，**SO 不是您发布需求并且人们会为您编写代码的地方**。你需要展示你所做的事情并提出一个具体的问题。我希望我能够为您指明一个有用的方向。

# c# - 在 Visual Studio 2010 中创建 Web 解决方案设置

> ID：11633420
> 
> 赞同：0
> 
> 时间：2012-07-24T14:46:45.123
> 
> 标签：c#, .net, asp.net-mvc, visual-studio-2010, c#-4.0

我在 Visual Studio 2010 中创建了一个 Web 解决方案，我还在同一个解决方案中创建了一个安装项目，我通过将项目输出添加为内容文件来链接这两个解决方案。想象我的解决方案名称是 example.sln 并且我的设置名称为 setup10

我需要通过命令提示符构建它。我在网上发现我需要检查我这样做的解决方案的配置管理器中的构建选项。然后我使用了这个命令 msbuild example.sln 它开始创建 setp10.vdproj 然后它没有告诉 setup10.vdproj 不存在。

我无法从一天开始解决这个问题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:09:11.957

msbuild 不直接支持 vdproj 文件 您必须通过调用 devenv.exe 来构建

您可以向 msbuild 添加构建步骤，以使用 devenv 构建 vdproj。有关更多详细信息，请参阅[http://thepursuitofalife.com/how-to-build-vdproj-files-in-msbuild/](http://thepursuitofalife.com/how-to-build-vdproj-files-in-msbuild/)。

# python - Python：语法错误：关键字不能是表达式

> ID：11633421
> 
> 赞同：44
> 
> 时间：2012-07-24T14:46:50.480
> 
> 标签：python, syntax, syntax-error, keyword

在 Python 脚本中，我从 调用函数`rpy2`，但出现此错误：

```
#using an R module 
res = DirichletReg.ddirichlet(np.asarray(my_values),alphas,
                              log=False, sum.up=False) 
SyntaxError: keyword can't be an expression 
```

这里到底出了什么问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-24T14:48:17.033

`sum.up`不是有效的关键字参数名称。关键字参数必须是有效的标识符。您应该查看您正在使用的库的文档，该参数*实际上*是如何调用的——也许`sum_up`？

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-08-20T12:54:45.773

我猜我们很多来到这个页面的人都对**Scikit Learn 有疑问，**解决它的一种方法是创建一个带参数的字典并将其传递给模型：

```
params = {'C': 1e9, 'gamma': 1e-07}
cls = SVC(**params) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-24T14:49:48.453

这是 python 源解析器在`sum.up=False`命名参数上失败，因为 sum.up 不是有效的参数名称（您不能使用点——参数名称中只能使用字母数字和下划线）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-06T19:58:16.980

使用 Elastic search DSL API，您可能会遇到相同的错误

```
s = Search(using=client, index="my-index") \
    .query("match", category.keyword="Musician") 
```

您可以通过以下方式解决它：

```
s = Search(using=client, index="my-index") \
    .query({"match": {"category.keyword":"Musician/Band"}}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-24T10:34:27.323

从`%`格式化转换为`.format()`.

以前的代码：

```
"SET !TIMEOUT_STEP %{USER_TIMEOUT_STEP}d" % {'USER_TIMEOUT_STEP' = 3} 
```

有问题的语法：

```
"SET !TIMEOUT_STEP {USER_TIMEOUT_STEP}".format('USER_TIMEOUT_STEP' = 3) 
```

问题是这`format`是一个需要参数的函数。它们不能是字符串。这是我见过的最糟糕的 python 错误消息之一。

更正的代码：

```
"SET !TIMEOUT_STEP {USER_TIMEOUT_STEP}".format(USER_TIMEOUT_STEP = 3) 
```

# objective-c - 使用 Cocoa 获取可卸载驱动器的列表

> ID：11633425
> 
> 赞同：5
> 
> 时间：2012-07-24T14:47:09.887
> 
> 标签：objective-c, macos, cocoa, osx-lion

我想获取在 OS X 下使用 Cocoa/Objective-C 无法安装/可弹出的驱动器列表。

我希望 NSWorkspace getFileSystemInfoForPath::::: 能帮助我：

```
NSArray* listOfMedia = [[NSWorkspace sharedWorkspace] mountedLocalVolumePaths];
NSLog(@"%@", listOfMedia);

for (NSString* volumePath in listOfMedia)
{
    BOOL isRemovable = NO;
    BOOL isWritable  = NO;
    BOOL isUnmountable = NO;
    NSString* description = [NSString string];
    NSString* type = [NSString string];

    BOOL result = [[NSWorkspace sharedWorkspace] getFileSystemInfoForPath:volumePath 
                                                             isRemovable:&isRemovable 
                                                              isWritable:&isWritable 
                                                              isUnmountable:&isUnmountable 
                                                                description:&description
                                                                       type:&type];
    NSLog(@"Result:%i Volume: %@, Removable:%i, W:%i, Unmountable:%i, Desc:%@, type:%@", result, volumePath, isRemovable, isWritable, isUnmountable, description, type);
} 
```

输出：

```
...
Result:1 Volume: /Volumes/LR Photos, Removable:0, W:1, Unmountable:0, Desc:hfs, type:hfs
... 
```

“LR Photos”是一个外部驱动器（通过 Thunderbolt 连接），应该是可移动和/或不可安装的（或者，至少我认为它应该是）。:)

我应该以不同的方式解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-23T10:05:42.027

您可以使用`diskArbitration` [框架](https://developer.apple.com/library/mac/documentation/DiskArbitration/Reference/DADisk_header_reference/Reference/reference.html#//apple_ref/doc/uid/TP40011609-CHDADiskhDataTypes-DontLinkElementID_2)。

```
#import <DiskArbitration/DiskArbitration.h>
   +(NSMutableArray *)getListOfEjectableMedia
{
    NSArray *mountedRemovableMedia = [[NSFileManager defaultManager] mountedVolumeURLsIncludingResourceValuesForKeys:nil options:NSVolumeEnumerationSkipHiddenVolumes];
    NSMutableArray *result = [NSMutableArray array];
    for(NSURL *volURL in mountedRemovableMedia)
    {
        int                 err = 0;
        DADiskRef           disk;
        DASessionRef        session;
        CFDictionaryRef     descDict;
        session = DASessionCreate(NULL);
        if (session == NULL) {
            err = EINVAL;
        }
        if (err == 0) {
            disk = DADiskCreateFromVolumePath(NULL,session,(CFURLRef)volURL);
            if (session == NULL) {
                err = EINVAL;
            }
        }
        if (err == 0) {
            descDict = DADiskCopyDescription(disk);
            if (descDict == NULL) {
                err = EINVAL;
            }
        }
        if (err == 0) {
            CFTypeRef mediaEjectableKey = CFDictionaryGetValue(descDict,kDADiskDescriptionMediaEjectableKey);
            CFTypeRef deviceProtocolName = CFDictionaryGetValue(descDict,kDADiskDescriptionDeviceProtocolKey);
            if (mediaEjectableKey != NULL)
            {
                BOOL op = CFEqual(mediaEjectableKey, CFSTR("0")) || CFEqual(deviceProtocolName, CFSTR("USB"));
                if (op) {
                    [result addObject:volURL];
                }
            }
        }
        if (descDict != NULL) {
            CFRelease(descDict);
        }
        if (disk != NULL) {
            CFRelease(disk);
        }
        if (session != NULL) {
            CFRelease(session);
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T22:48:37.800

不幸`getFileSystemInfoForPath:`的是，这并不是真正的正确方法。可移动意味着该卷位于 CD 或 DVD 等可移动媒体上。在实践中，unmountable 似乎给出了与可移除相同的结果。例如，请参阅这篇关于[使用 getFileSystemInfoForPath 的结果的帖子](http://lists.apple.com/archives/cocoa-dev/2005/May/msg02607.html)。因此，除非您只想知道某个卷是否位于可移动媒体上，否则您需要使用另一种技术。

您真正要检查的是卷的连接总线类型。Firewire、USB、Thunderbolt 等在您的意思上是不可安装的。如果您选择卷并按下“连接总线”下的“信息”按钮，您可以在“磁盘工具”中看到此信息。以编程方式获取这些信息要困难得多，据我所知，只有使用 IOKit 才有可能。详细信息在 Apple 关于[从应用程序访问硬件](https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/AccessingHardware/AH_Intro/AH_Intro.html)的文档中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:14:16.750

您可以使用“diskutil”的命令行版本的磁盘工具应用程序，使用参数“list”和管道输出运行它并将其放入您的程序中（不需要使用 cocoa）。

# javascript - 显示块链接问题内的链接，两个链接都激活

> ID：11633426
> 
> 赞同：1
> 
> 时间：2012-07-24T14:47:10.067
> 
> 标签：javascript, html, hyperlink, rollover

我有一个翻转块列表。块本身是一个页面的链接。块内还有另外两个链接，文本，指向不同的页面。当您单击其中一个链接时，该链接和块链接都会执行，从而加载两个窗口。当单击文本块链接不执行时，我怎样才能做到这一点？

谢谢！

```
echo "<div class='feedcontent'
           onclick='show_thumbnail($pageid,$revid, this)'
           id='newsitem-$pageid-$revid'>";

echo " <a href='javascript:void;'
             onclick='load_wikitrust(\"$wktrust_url\");'>edited</a><br>";
$aname=substr($wkarticle, 0, 27);
echo " <a href='javascript:void;'
             onclick='window.open(\"$wkarticle_url\")'>$aname</a>";
echo " on <span class='timeline_timestamp'>$timestamp</span>";
echo "</div> 
```

因此，例如，当您单击文章名称 ($aname) 时，显示缩略图的 onclick 链接以及打开文章加载窗口的 onclick 链接。这只是由类 feedcontent 定义的块内的代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:56:02.920

你可以使用`event.stopPropagation();`：

[http://jsfiddle.net/jPYka/](http://jsfiddle.net/jPYka/)

```
<div class="outer" onclick="alert('outer container clicked'); return false">
    <div class="inner" onclick="alert('inner 1 clicked'); event.stopPropagation();">inner 
        1
    </div>
    <div class="inner" onclick="alert('inner 2 clicked');">inner 
        2
    </div>
</div>​ 
```

请注意单击第一个容器时如何防止外部 div 的 onclick 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:01:22.340

即使它可能有效，
**您也不能嵌套 href**，

> A 元素定义的链接和锚点不得嵌套；A 元素不得包含任何其他 A 元素。

**w3.org** - [在他们的页面上查看完整的详细信息](http://www.w3.org/TR/html4/struct/links.html#h-12.2.2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:57:38.767

根据 HTML 规范，您不能将`a`标签放在另一个标签中。

> [**`a`元素_**](http://dev.w3.org/html5/html-author/#the-a-element)
> 
> > **类别：**互动内容、流动内容。
> > **内容模型：**透明，但不能有交互式内容后代。

修复您的 HTML 以获得正确的行为！

# html - li 元素之间的边界线

> ID：11633428
> 
> 赞同：1
> 
> 时间：2012-07-24T14:47:28.267
> 
> 标签：html, css

我的导航栏中的块 li 元素之间出现了奇怪的双边框线。即有一个块 li 元素，然后在另一个开始之前有一个小间隙，这会产生这种双线效果。我怎样才能得到单行？这是我的代码：

```
<div id="container">
    <div id="header">
        <h1>
            <!--<a href="#"><img src="tracylogo7.jpg" alt="Millington and Hope" /></a> -->
            <a href="#"><img src="tracylogo5_header.jpg" alt="Millington and Hope" /></a>
        </h1>
        <h2>
            <!--<a href="#"><img src="tracylogo5_header.jpg" alt="Millington and Hope" /></a> -->
        </h2>   
    </div>
    <ul id="nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="stock.html">Stock</a></li>
        <li><a href="events.html">Events</a></li>
        <li><a href="contact.html">Contact</a></li>
    </ul>
    <div id="box">
            <a href="#"><img src="home4.jpg" alt="Slideshow Image 1" /></a>

            <a href="#"><img src="home4.jpg" alt="Slideshow Image 2" /></a>

            <a href="#"><img src="home4.jpg" alt="Slideshow Image 3" /></a>
    </div>
    <div id="footer">
        <p class="client">Tel: 07448740&nbsp;&nbsp;&nbsp;&nbsp;E-mail: tjdelane@hotmail.co.uk</p>

    </div>
</div> 
```

```
html,body
{
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

body
{
    background:rgb(171,163,144);
    text-align: center;
    min-width: 600px;
}

#container
{
    margin:0 auto;
    background:rgb(171, 163, 144);
    width:80%;
}   

#nav
{
  border:1px solid #ccc;
  border-width:1px 0;
  list-style:none;
  margin:0;
  padding:0;
  text-align:center; 
  /*background:rgb(161,153,134) /* for non-css3 browsers */
   background: -webkit-radial-gradient(circle, rgb(151,143,124),rgb(171, 163, 144));
   background: -moz-radial-gradient(circle, rgb(151,143,124),rgb(171, 163, 144));

}

#nav li
{
    display:inline;
}       

#nav a
{
    display:inline-block;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
    padding:10px 20px 10px 20px;
    text-decoration:none;
    color:white;
}

#nav a:hover
{
    background:rgb(171, 163, 144);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T14:55:00.380

如果您从 css 中删除以下行（在 #nav a 中）

```
border-right: 1px solid #ccc; 
```

并将其放在一个新的声明中：

```
#nav li:last-child a { 
   border-right: 1px solid #ccc;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:56:15.917

这些空格是由`<li>`在新行中分隔标签引起的。添加评论。

# jquery - 值字段以外的搜索字段

> ID：11633430
> 
> 赞同：0
> 
> 时间：2012-07-24T14:47:31.957
> 
> 标签：jquery, autocomplete

我有一个 jquery 自动完成小部件，它显示带有自定义数据的项目。

他们都有一个`value`, 和`description`。
当前，`value`当单击项目时将 插入到文本框中，并且`value`项目的 是搜索的内容

我想做的是让过滤器同时使用`value`和`description`过滤要显示的项目，但只保留`value`正在插入的项目。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:52:58.350

`value`如果你给自动完成器一个带有and `label`（而不是）属性的对象数组`description`，它会为你做过滤，但只在`label`（不是`value`）。

[`source`如果您为option](http://jqueryui.com/demos/autocomplete/#option-source)指定函数，则需要自己进行过滤。你会收到一个`request`参数（一个带有`term`属性的对象）和一个`response`参数（一个用结果回调的函数）。然后您自己返回相关结果，使用您喜欢的任何类型的搜索（例如，您可以同时搜索`value`和`description`在您的代码中搜索）。

例如，松散地：

```
$("some selector").autocomplete({
    // ...other options...
    source: function(request, response) {
        var matches = [];
        /* ...search for matches in your data using `request.term`,
           add them to `matches`...
        */
        response(matches);
    }
}); 
```

您返回的数组可以只是字符串，也可以是具有`value`和`label`属性的对象。将`label`显示，`value`选择时将使用 。

例如，这里有一个使用（短）机场列表，当您键入它时，会同时检查`value`（机场代码）和`description`（机场名称）：[Live copy](http://jsbin.com/iwahoc) | [来源](http://jsbin.com/iwahoc/edit)

```
jQuery(function($) {
  var data = [
    {value: "ORD", description: "Chicago O'Hare"},
    {value: "LHR", description: "London Heathrow"},
    {value: "SFO", description: "San Francisco International"}
  ];

  $("#theInput").autocomplete({
    source: function(request, response) {
      var capterm = request.term.toUpperCase();
      var matches = $.map(data, function(entry) {
        if (entry.value.toUpperCase().indexOf(capterm) !== -1 ||
            entry.description.toUpperCase().indexOf(capterm) !== -1) {
          return {
            value: entry.value,
            label: entry.value + " - " + entry.description
          };
        }
      });
      response(matches);
    }
  });
}); 
```

因此，键入“or”或“chic”将显示“ORD - Chicago O'Hare”，选择它会将“ORD”放在该字段中。键入“san”或“sfo”将显示“SFO - San Francisco International”，选择它会将“SFO”放在该字段中。

# html - 以正确的方式将 Google 日历嵌入网站（即 HTML5）

> ID：11633432
> 
> 赞同：0
> 
> 时间：2012-07-24T14:47:35.130
> 
> 标签：html, google-calendar-api

我粘贴了指向 Google 日历的链接，它按预期工作，**但**VS 很伤心，因为格式不符合 HTML5 标准。确实不行，自己看吧。

[过去的暴行、内联属性和其他陈旧的展览](https://www.google.com/calendar/embed?showTitle=0&showDate=0&showCalendars=0&showTz=0&mode=WEEK&height=400&wkst=2&bgcolor=%23ffffff&src=konrad.viltersten %40gmail.com&color=%23182C57&src=etscb3ui6hjumgqu43ho71m7v8%40group.calendar.google.com&color=%23125A12&ctz=Europe%2FStockholm" style="border-width:0" width="600" height="400" frameborder="0" 滚动="否")

有什么可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:06:15.760

显然这不是什么大问题。无论如何，我找到了与 Google Calender 集成并提供更多设置选项的其他服务。它甚至包括一种（有限的）可能性，可以将自己的 CSS 样式添加到嵌入式日历中。它是免费的。

名称是“You can book me”，可以在[这里](http://b.youcanbook.me/)找到。

# c# - 在 MVC3 中使用 MEF 进行依赖注入似乎异常缓慢

> ID：11633434
> 
> 赞同：0
> 
> 时间：2012-07-24T14:47:36.063
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, mef, performance

我有一个 MVC3 Web 应用程序，其中控制器使用服务来执行某些任务。我用来分别实例化每个操作中所需的服务，例如：

```
 public ActionResult Index()
    {
        ICustomService customService = new CustomService();
        var list = customService.ReturnSomething();
        .....
        return View(list)
    } 
```

这工作正常。然后我决定使用 MEF 进行依赖注入，以遵循更好的设计原则。所以现在我正在做这样的事情：

```
 public class MyController : Controller
   {
    [Import]
    private ICustomService _customService;

    public MyController()
    {
        MEFManager.Compose(this);
    }

    public ActionResult Index()
    {
      var list = _customService.ReturnSomething();
      return View(list);
    } 
```

组合由 MEFManage.Compose(this) 完成，它是以下函数：

```
 public static void Compose(object o)
    {
        var container = new CompositionContainer(
                                                new DirectoryCatalog(Path.Combine(
                                                                       AppDomain.CurrentDomain.BaseDirectory, "bin"))
                                                                    );
        var batch = new CompositionBatch();
        batch.AddPart(o);
        container.Compose(batch);
    } 
```

这实际上是可行的，但它比我不使用 MEF 时慢 6 到 7 倍。有谁知道为什么这么慢？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:51:26.597

我怀疑这是因为每个控制器实例都在重建一个 CompositionContainer，它看起来像是在进行一些磁盘访问。

您可以将 CompositionContainer 初始化移动到 Application_Start 中吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:55:16.213

我并没有真正使用 MEF，但我认为您的解决方案会扫描 bin 文件夹中的每个程序集以搜索导入/导出属性并编写应用程序。

我认为这不是使用 MEF 的正确方法，控制器不应调用任何与 MEF 相关的方法。

如果您为每个请求配置一个 DI 容器，这似乎是相似的。

这篇文章似乎不错：[Using MEF 2 with ASP.NET MVC 3](http://blogs.msdn.com/b/bclteam/archive/2011/11/11/using-mef-2-with-asp-net-mvc-3.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:05:42.310

启动 a`CompositionContainer`不是一项资源密集型任务，**但是**，创建 a `DirectoryCatalog`is，它必须扫描所有可用的组件以识别零件并分析导出的组成元素。您可以通过多种方式对此进行改进：

1.  您可以拥有所有容器在构建时使用的单数`DirectoryCatalog`（或者最好是 a `ComposablePartCatalog`），这意味着目录创建只完成一次。
2.  您可以完全避免在构造函数中创建容器，并使用 MVC3 的内置服务定位机制实现`IControllerFactory`启动控制器实例或处理依赖关系解析。`IDependencyResolver`如果你搜索 MEF + MVC，网上有很多例子。

# c++ - 强制在 myString[1] 而不是 myString[0] 上返回字符串的第一个字符？

> ID：11633435
> 
> 赞同：-2
> 
> 时间：2012-07-24T14:47:40.667
> 
> 标签：c++, string

我希望我的代码中的字符串表示以索引 1（而不是 0）开始。我正在从索引 1 开始工作的论文；我想与原始描述保持一致。

目前我只是用一个额外的空格字符初始化字符串：

```
the_string = ' ' + string; 
```

但是，这意味着`the_string.length()`与字符串的“真实”长度不一致。

哪种替代解决方法（编写我自己的字符串索引函数，创建一个 mystring 类并重载 [] 运算符等）生成最少的代码，它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:31:44.333

一个简短而糟糕的解决方案是使用宏扩展来 -1 索引。

```
#define I(x) ((x) - 1)

the_string[I(1)] // This will access the first character of the string. 
```

如果您想在纸上和代码上对齐您的解决方案，这很好 - 但永远不要让该代码进入任何生产系统。

# java - 在多个表中创建多个元组

> ID：11633443
> 
> 赞同：0
> 
> 时间：2012-07-24T14:48:11.347
> 
> 标签：java, mysql, jdbc, foreign-keys, tuples

我有一个关于使用 Java 在多个表中创建多个元组的问题。

这是我的桌子。

```
create table department(

dept_name       varchar(20) primary key, 
building        varchar(15), 
budget      numeric(12,2)
);

create table student
(ID             int, 
 name           varchar(20) not null, 
 dept_name      varchar(20), 
 tot_cred       numeric(10,0),
 primary key (ID),
 foreign key (dept_name) references department(dept_name)
); 
```

我想要完成的是java程序会提示用户

“你想在部门表中有多少个元组？” 用户：1000。“在 Department 表中创建了 1000 个元组。”

“你想在学生表中有多少个元组？” 用户：500。“在学生表中创建了 500 个元组。”

现在我可以在部门中插入一个元组，所以说

```
"Insert into department ('CSI', 'TownHall', '120000')"; 
```

然后从这里我做一个

```
 Insert into student (id, name, dept_name,tot_cred)
             select '"+counts+"', 'Student"+counts+"', dept_name, '10' 
             from department      
             where    dept_name='CSI'. 
```

Counts++ 在 while 循环中，所以没有重复的 PK。

所以我可以在学生表中创建 10000 个元组，但我不能在部门表中创建超过 1 个元组，因为不能复制 CSI。

但是，如果我没有在部门表中插入至少一个元组，那么我将失去外键约束。

有什么想法吗？

PS。我不是在这里让你们只是做代码只需要一个想法

布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:03:15.177

不要将 dept_name 作为 a `primary key`，而是创建另一列`DEPT_ID`并将其设置为主键。你可以用同样的方式增加它。

此外，考虑使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)进行 SQL 更新

通常，您的 FK 将指向另一张桌子的 PK。因此，当您创建 DEPT_ID 作为主键时，您还需要修改学生模式以反映此更改

**编辑：**根据你的要求，你可以做这样的事情（虽然我不知道你的确切要求）&假设上述变化，你可以做这样的事情

创建一个`PreparedStatement`这样的：

```
PreparedStatement pstmt = con.prepareStatement(INSERT INTO student(id, name, dept_id,tot_cred) values(?,?,?,?)"); 
```

由于您知道您拥有的部门数量，您现在可以创建一个循环将元组插入到您的部门表中，然后使用此信息插入到您的学生表中，对吗？（*这听起来更像是一个家庭作业，所以我会让你考虑如何做这部分*）

# css - Creating seamless rotated background image

> ID：11633444
> 
> 赞同：5
> 
> 时间：2012-07-24T14:48:12.877
> 
> 标签：css, photoshop

I want to repeat a background image that is rotated. Trying to make it seamless is destroying my soul.

Starting with something simple, consider each image is laid out like bricks. Creating a seamless repeating background image is pretty simple:

![enter image description here](../Images/935256faa42524580c84b3f5390e8b91.png)

(the red area is the crop). You can see this working as expected at [http://jsfiddle.net/mPqfB](http://jsfiddle.net/mPqfB).

Now let's say I want to rotate the image by 45 degrees:

![enter image description here](../Images/ae921b7359221c6f142e3118c5b37113.png)

Unfortunately, the same crop no longer works, as you can see on [http://jsfiddle.net/mPqfB/1](http://jsfiddle.net/mPqfB/1).

I'm trying to figure out how to crop the image correctly so that we have a seamless repeat. There's probably some fairly trivial maths involved to do this but I can't for the life of me figure it out.

### [Update]

I'm attempting to follow @oezi's calculations so to make things easier have created an image of dimensions: 100px x 50px.

Therefore:

Least Common Multiple = 100
Hypotenuse = 100² + 100² = 20000

Now I'm assuming this means we don't have to create an image of 20000px x 20000px. Am hoping that @oezi can clarify how he performs his resizing??

If this is a² + b² = c² is equal to c = square root of (a² + b²)

Then we can concur that our crop should be 141px?

Finally, this doesn't actually explain where we take the crop from?

### [Update 2]

It does look like this is how the resize should be created. Taking a 141px x 141px crop of the image yielded the correct results - [http://jsfiddle.net/EfuV2/](http://jsfiddle.net/EfuV2/)

As far as where to crop from, it doesn't actually matter!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:09:28.040

is the rotation is exactly 45 degrees, you'll have to find out the [least common multiple](http://en.wikipedia.org/wiki/Least_common_multiple) of the width and height of your unrotated pattern.

*   in your case, that's **15100** (width 100 and height 151)
*   it would be much better to scale your pattern to width 100 and height 150, so the least common multiple is only **300**

Take that number and some math ([pythagorean theorem](http://en.wikipedia.org/wiki/Pythagorean_theorem)). Assume your number is the length of the two short arms and calculate the length of [the hypotenuse](http://en.wikipedia.org/wiki/Hypotenuse) - that's our result (make a square image of that size to get your pattern).

*   in your case, that's **21355**
*   with resizing, it's ~ **424**

Note that this is just typed straight from my head because i can't try it out practically at the moment - but i'm really sure it's correct.

**edit:** a fast (and messy) test got me to this:

*   [http://i.imgur.com/rZuu9.jpg](http://i.imgur.com/rZuu9.jpg)
*   [http://jsfiddle.net/mPqfB/2/](http://jsfiddle.net/mPqfB/2/) (click the image-link first, otherwise jsfiddle doesn't show the image)

accidentally i made the pattern only be 423 in height and the rotation isn't perfect (don't have photoshop here), but it's good enough to prove that my math is correct.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:50:48.993

The trick is to crop the pattern at points where the section being cut off matches the section remaining on the opposite side of the crop area (see example cuts in blue). It'll probably take some trial and error to get it right but you should be able to do it easily enough.

![Repeating Pattern Example](../Images/8445e721d2f7fe48cc79e386179587fe.png)

# ruby-on-rails - Rails 中的 Postgres 查询：哪里没有

> ID：11633446
> 
> 赞同：1
> 
> 时间：2012-07-24T14:48:15.687
> 
> 标签：ruby-on-rails, postgresql, where

我将 Rails 与 PostgreSQL 一起使用，它非常适合这样的查询：

```
# Does hstore_column contain key?

scoped_users = User.where('hstore_column ? :key', key: 'name_of_key') 
```

现在我的问题：我怎样才能反转这个查询/我怎样才能找到所有**没有**指定特定键的用户？

```
# I tried this query amongst others, but it does not work:

scoped_users = User.where('hstore_column ? :key = FALSE', key: 'name_of_key') 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:54:08.223

尝试：

```
where('NOT ( hstore_column ? :key )', key: 'name_of_key') 
```

# firefox - selenium 和 web 自动化测试：如何运行大容量压力测试

> ID：11633450
> 
> 赞同：4
> 
> 时间：2012-07-24T14:48:22.977
> 
> 标签：firefox, selenium, automation, automated-tests

我正在使用 selenium 和 firefox webdriver 来测试我的网站，它运行良好。唯一的问题是计算资源的限制，我只能在一台物理机上同时运行 10 个浏览器，这对于我们的测试套件来说是不够的。

最大的资源瓶颈在firefox端，它在运行时会消耗大量的RAM和CPU。我想知道是否有任何技术可以减少 RAM 和 CPU 使用率，以便在一台机器上我可以同时运行 100 个 firefox 浏览器。这将大大提高我的效率。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:50:58.163

假设您要测试服务器负载并且不依赖 AJAX，您可以使用[Apache Jmeter](http://jmeter.apache.org/)根据您指定的参数用随机请求轰炸服务器。

因为它是一个无头浏览器，只请求一些 HTTP 内容然后将其丢弃，它可以轻松地在标准桌面上扩展到 100 个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T15:59:07.227

Selenium 根本不是为性能测试而设计的**。**

[http://selenium-grid.seleniumhq.org/faq.html#would_you_recommend_using_selenium_grid_for_performanceload_testing](http://selenium-grid.seleniumhq.org/faq.html#would_you_recommend_using_selenium_grid_for_performanceload_testing)

Selenium Grid 可以通过确保并行完成测试来帮助您，但这不是创建 Selenium 的目的，浏览器性能和 RAM 使用的瓶颈将是 Selenium 的问题。

更好的解决方案是使用专门用于性能测试的应用程序。我使用了 Redgate 的解决方案以及集成到 Visual Studio 2010 中的性能测试解决方案：

[http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

# ssas - 将 3D 立方体转换为表格（行 x 列）

> ID：11633451
> 
> 赞同：1
> 
> 时间：2012-07-24T14:48:26.010
> 
> 标签：ssas, mdx, olap, olap-cube, tabular

我只是想知道是否有可能的方法以表格格式显示来自 3d 立方体的数据，而无需通过 MDX 查询进行切片-

假设，我有一个具有 3 个维度的多维数据集 - Class(A,B,C,D..), Vendor(V1,V2,V3), Period(2010,2011) 并且度量值是**SaleValue** ..

现在，我想查看这样的记录..

```
**类| 供应商|期间|销售价值**

一个 | V1 | 2010 | 987
一个 | V2 | 2011 | 654
一个 | V3 | 2010 | 214
一个 | V1 | 2011 | 5643
一个 | V2 | 2010 | 698
一个 | V3 | 2011 | 212

乙| V1 | 2010 | 224
乙| V2 | 2011 | 668
乙| V3 | 2010 | 741
乙| V1 | 2011 | 3216
乙| V2 | 2010 | 953
乙| V3 | 2011 | 2114

C | V1 | 2010 | 159
C | V2 | 2011 | 852
C | V3 | 2010 | 369
C | V1 | 2011 | 147
C | V2 | 2010 | 123
C | V3 | 2011 | 654

```

这可以使用 MDX 查询来实现吗？如果是这样，请告诉我任何示例查询..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:16:06.327

您可以编写一个 Mdx 查询，该查询将提供非常接近表格格式的内容。例如：

```
SELECT {[Measures].[SaleValue]} ON COLUMNS,
NON EMPTY [Class].Members * [Vendor].Members * [Period].Members ON ROWS
FROM cube 
```

结果将如下所示：

```
 |  SaleValue
(A, V1, 2010)  |  987
(A, V2, 2011)  |  654
(A, V3, 2010)  |  214
... 
```

如果您不想有小计，您可以替换`[Class].Members`为`lowest_level_of_Class.Members`或使用[叶子](http://msdn.microsoft.com/en-us/library/ms144804.aspx)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:16:42.327

这应该会有所帮助：http: [//blogs.msdn.com/b/jamiemac/archive/2008/03/10/unwinding-mdx-flattening-semantics-with-dmx.aspx](http://blogs.msdn.com/b/jamiemac/archive/2008/03/10/unwinding-mdx-flattening-semantics-with-dmx.aspx)

# android - Android如何跟踪用户的动作

> ID：11633452
> 
> 赞同：2
> 
> 时间：2012-07-24T14:48:27.237
> 
> 标签：android, serialization, tracking

我有更多关于用于实现以下要求的策略的问题。

我需要开发一种功能，用户可以在应用程序中执行一些操作，例如发布照片、评论照片等。每个操作都应该在某处留下日志，在我的应用程序中输入一个屏幕后，所有日志都应该是按时间顺序可见（最新的在前）。我使用了按项目日期排序的 TreeSet，它工作得很好。问题是持久保存这些数据，以便有一个永无止境的日志历史记录。除非有必要，否则我不愿意将我的代码迁移到 SQLite。我非常喜欢我的 TreeSet 结构，这要归功于我设法保持逻辑简单的方法。当我要在我的应用程序的不同启动中保存此对象时，问题就开始了......有没有人知道如何解决它？也许 TreeSet 是一个错误的决定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:52:04.533

将日志放在 SQLite 中并不是一个坏主意。您的其他选择是将它们放在一个文件中，然后继续写入。然后，您可以编写一个类来处理它的排序，这应该不会太糟糕。使用 SQLite 的额外好处是按日期排序会轻而易举。但是随后导出它需要额外的工作，而将其保存在文件中会很容易。所以它真的只是一个偏好。

# asp.net - 有没有办法在不访问服务器本身的情况下检查服务器的会话超时？

> ID：11633454
> 
> 赞同：0
> 
> 时间：2012-07-24T14:48:30.363
> 
> 标签：asp.net, .net, iis-6, session-timeout

基本上我正在与一个`.NET`Web 应用程序交互，我想知道该服务器的会话超时是多少。

我知道`IIS 6`默认情况下通常在 8-20 分钟之间，但我想要特定的超时时间，而无需推测或保留计时器等。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-29T15:39:31.260

我认为这是不可能的，除非服务器明确规定允许（将其公开）到查询服务器服务的前端......

# css - 快速 UL / LI 默认子问题

> ID：11633461
> 
> 赞同：1
> 
> 时间：2012-07-24T14:48:41.837
> 
> 标签：css

[http://jsfiddle.net/b4fwQ/](http://jsfiddle.net/b4fwQ/)

大家好。上面的链接指向一个 jsFiddle 示例，该示例说明了我到目前为止所到之处。我想要完成的是，它`<li>`上面有选定的类将显示它的孩子。现在它可以像上面那样工作了，但是一旦你开始在“选定”边框周围移动鼠标，你现在正在查看不同的页面时需要变成白色。

如何更改css？

谢谢。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:57:28.600

使用当前的 HTML 标记，我不确定纯 CSS 是否可行。但是一点 jQuery 就可以得到想要的效果：

```
​$(function(){
    var selectedLi = $("#navigation ul#home-nav li.grey");
    $("#navigation ul#home-nav").hover(function(){
       selectedLi.removeClass("selected");
    }, function(){
       selectedLi.addClass("selected");   
    });
});​ 
```

见演示：http: [//jsfiddle.net/b4fwQ/1/](http://jsfiddle.net/b4fwQ/1/)

# jquery - 将箭头添加到 twitter bootstrap 的下拉药丸？

> ID：11633463
> 
> 赞同：14
> 
> 时间：2012-07-24T14:48:58.890
> 
> 标签：jquery, css, twitter-bootstrap

我让 twitter 引导下拉按钮成功工作，但我有一个小问题。这里的黑色导航栏：

[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

当下拉菜单打开时，它有一个整洁的小箭头，对吧？好吧，我正在使用下面的药丸，他们没有那个箭头。似乎只有在使用我不需要的导航栏时才包含箭头。

有没有人想出一种在药丸中添加箭头的方法？:(

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-24T14:56:34.917

假设您指的是单击菜单项时指向上方的白色箭头，则您要查找的样式位于 bootstrap.css 的第 3907 行：

```
.navbar .dropdown-menu::after {
  position: absolute;
  top: -6px;
  left: 10px;
  display: inline-block;
  border-right: 6px solid transparent;
  border-bottom: 6px solid white;
  border-left: 6px solid transparent;
  content: '';
} 
```

您可以尝试复制此样式并删除`.navbar`样式声明的部分并对其进行修改以适合您的代码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-21T11:56:34.107

这是对 Jason Towne 答案的改进。

如果菜单被拉到右边，这将正常工作。

```
.dropdown-menu-arrow::before {
    border-bottom: 7px solid rgba(0, 0, 0, 0.2);
    border-left: 7px solid transparent;
    border-right: 7px solid transparent;
    content: "";
    display: inline-block;
    left: 9px;
    position: absolute;
    top: -7px;
}

.dropdown-menu-arrow::after {
    border-bottom: 6px solid #FFFFFF;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    content: "";
    display: inline-block;
    left: 10px;
    position: absolute;
    top: -6px;
}

.btn-group.pull-right > .dropdown-menu-arrow::before {
    left: inherit;
    right: 9px;
}

.btn-group.pull-right > .dropdown-menu-arrow::after {
    left: inherit;
    right: 10px;
} 
```

这是一个使用示例。

```
<div class="btn-group pull-right">
    <a href="#" data-toggle="dropdown" class="btn dropdown-toggle">
    Actions
    <span class="caret"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-arrow">
        <li>...</li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T14:53:25.787

不确定药丸是什么，但如果您有引导程序，只需将其放在代码中的任何位置即可添加箭头。

```
<b class="caret"></b> 
```

这是你的意思吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T16:58:23.650

这对我来说是工作

* * *

```
 //css
        .arrow-right > .dropdown-menu:after {
        content: '';
        display: inline-block;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #ffffff;
        position: absolute;
        top: -6px;
        right: 10px;
        }

        .arrow-left > .dropdown-menu:after {
        content: '';
        display: inline-block;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #ffffff;
        position: absolute;
        top: -6px;
        left: 10px;
        }

    // html

//for left side dropdown menu

    <div class="dropdown arrow-left">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    ...
    </ul>
    </div>

//for right side dropdown menu

    <div class="dropdown pull-right arrow-right">
    <a class="dropdown-toggle" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
    Dropdown
    <b class="caret"></b>
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    ...
    </ul>
    </div> 
```

# android - android:google-code droidreader forceclose 错误

> ID：11633467
> 
> 赞同：0
> 
> 时间：2012-07-24T14:49:06.323
> 
> 标签：android, forceclose, pdf-reader, google-code

m 使用 DroidReader 项目来显示 PdfFiles。当我执行我的项目时，我遇到这样的强制关闭错误

```
07-24 20:13:26.694: E/AndroidRuntime(286): FATAL EXCEPTION: main
07-24 20:13:26.694: E/AndroidRuntime(286): java.lang.ExceptionInInitializerError
07-24 20:13:26.694: E/AndroidRuntime(286):  at de.hilses.droidreader.DroidReaderActivity.onCreate(DroidReaderActivity.java:108)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.os.Looper.loop(Looper.java:123)
07-24 20:13:26.694: E/AndroidRuntime(286):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-24 20:13:26.694: E/AndroidRuntime(286):  at java.lang.reflect.Method.invokeNative(Native Method)
07-24 20:13:26.694: E/AndroidRuntime(286):  at java.lang.reflect.Method.invoke(Method.java:521)
07-24 20:13:26.694: E/AndroidRuntime(286):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-24 20:13:26.694: E/AndroidRuntime(286):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-24 20:13:26.694: E/AndroidRuntime(286):  at dalvik.system.NativeStart.main(Native Method)
07-24 20:13:26.694: E/AndroidRuntime(286): Caused by: java.lang.UnsatisfiedLinkError: Library pdfrender not found
07-24 20:13:26.694: E/AndroidRuntime(286):  at java.lang.Runtime.loadLibrary(Runtime.java:461)
07-24 20:13:26.694: E/AndroidRuntime(286):  at java.lang.System.loadLibrary(System.java:557)
07-24 20:13:26.694: E/AndroidRuntime(286):  at de.hilses.droidreader.PdfRender.<clinit>(PdfRender.java:111)
07-24 20:13:26.694: E/AndroidRuntime(286):  ... 14 more 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:03:56.587

我猜你没有添加`.so`带有 name 的文件`pdfrender`。

[您可以在此](http://code.google.com/p/droidreader/downloads/detail?name=droidreader-0.5.apk&can=2&q=)apk 文件中找到 .so文件。

使用 zip 工具打开 .apk 文件。并将`lib`文件夹的内容复制到您的`libs`.

# profiling - GO 中的分析 - 无符号

> ID：11633468
> 
> 赞同：1
> 
> 时间：2012-07-24T14:49:12.540
> 
> 标签：profiling, go

我正在尝试使用此处描述的过程来分析 GO 程序：

[http://blog.golang.org/2011/06/profiling-go-programs.html](http://blog.golang.org/2011/06/profiling-go-programs.html) 。

但是`pprof`在输出中显示地址而不是函数名称：

```
(pprof) top10
Total: 2113 samples
     298  14.1%  14.1%      298  14.1% 0000000000464d34
     179   8.5%  22.6%      179   8.5% 0000000000418e83
     157   7.4%  30.0%      157   7.4% 0000000000418e60
     112   5.3%  35.3%      112   5.3% 0000000000403293
     101   4.8%  40.1%      101   4.8% 0000000000464d4f
      83   3.9%  44.0%       83   3.9% 000000000040329c
      77   3.6%  47.7%       77   3.6% 0000000000418e7a
      62   2.9%  50.6%       62   2.9% 0000000000456a38
      37   1.8%  52.3%       37   1.8% 0000000000418e41
      37   1.8%  54.1%       37   1.8% 0000000000435f57 
```

有没有人经历过并找到解决方法？

[这里](https://stackoverflow.com/questions/6240484/profiling-in-go)提到了`6prof`用于替代上述过程的工具。有谁知道它是否仍在维护以及在哪里可以找到它？

我在 Win7 64 上使用 go1.0.2。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:48:43.723

我修复了 perl 脚本以在 Windows 下工作。

详情在这里：[http ://exneehilo.blogspot.com.au/2012/07/profiling-go-with-pprof-under-windows.html](http://exneehilo.blogspot.com.au/2012/07/profiling-go-with-pprof-under-windows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:03:08.543

我有类似的问题。

解决方案是在实际的建筑应用中。因此，当我使用“ **go build test_app.go** ”构建并运行“ **./test_app** ”之后，我得到了正确的分析文件，其中包含函数名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T23:30:31.160

我自己没有检查过，但据我记得，pprof 脚本的问题在于它使用*标准*（mingw）版本的 nm，而不是 Go 特定的 nm。Go 发行版有自己的 nm 程序：

C:>go tool nm usage: nm [-aghnsTu] file ... go tool nm: exit status 1

C:>

它可以理解所有 Go 二进制格式，而 mingw 附带的 nm 程序则不能。查看 pprof perl 脚本中的 nm_commands 变量。它列出了几个可能的候选人，但没有一个是你想要的。如果您将其更改为指向 Go nm，它应该可以工作。

随时在[http://code.google.com/p/go/issues](http://code.google.com/p/go/issues)报告错误。我认为它曾经可以工作，因为 nm_commands 中列出了 6nm，但 Go nm 已重命名为 nm 并移出用户 PATH。

亚历克斯

# database-design - 多个多对多关系是否是糟糕设计的证据？

> ID：11633469
> 
> 赞同：3
> 
> 时间：2012-07-24T14:49:18.290
> 
> 标签：database-design

大家好，

我一直在学习数据库和数据库设计，但我发现我仍然遇到了一个我自己无法回答的问题。所以我向社区提出这个问题，希望有比我更多知识/经验的人来回答。

我的任务是开发一个数据库，该数据库跟踪整个船队的库存水平。

当前的设计为每艘船提供了一个表格，其中列出了所有可能的部件（机械类型、部件号、品牌、序列号等）。

这意味着一件机器或零件的细节可以重复多次（实际上有多少艘船）。

我一直在尝试根据自己学到的知识进行重新设计，我会提出以下设计方案：

```
[SHIP]
ID, Name, Class, Tonnage, Fleet, Superintendent etc.

[Machinery]
ID, Type, Make, Model etc. (Can have separate table for manufacturers and types if required)

[Part]
ID, Part number, Description, etc. 
```

以上将是三个主要的表，现在开始变得困难。

每艘船可以有多个机械项目，每个机械项目可以出现在多艘船上（需要一个连接表）

每个机械项目可以有多个零件，每个零件可以属于多个机械项目（另一个连接表）

可能有成百上千个部件使连接表变得巨大。

此外，一旦您想跟踪库存，您正在查看另一个连接表

```
[Stock Level]
ShipID, PartID, Stock Level 
```

此外，如果您想要最低库存（可以与库存水平相结合吗？）

```
[Min Stock]
ShipID, PartID, Min Stock 
```

最后，如果您希望拥有标准化数据库（即没有 Part No.1、Part No.2 或 Serial No.1、Serial No.2）

你需要有几张额外的桌子

```
[Serial Numbers]
ShipID, MachineryID, Serial No

[Part Numbers]
PartID, Part Number 
```

序列号可能是相当标准的，没有问题，但是 [零件号] 将需要至少与 [零件] 表中的记录一样多的记录。

地图（尽我所能在没有图片的情况下表示，为简单起见省略了连接点）

```
 <>V represent many 
  -| represent one

   -----< Serial Numbers
  |             V
  |             |
Ship >---< Machinery >---< Parts ---< Part Numbers
  V                          V
  |                          |
   ------ Stock Level ------- 
```

现在真正的问题是我是否在基本设计原则中遗漏了一些可以消除如此巨大的联结表的东西，或者这种数据库是否可以预期。

此外，在零件编号等情况下，规范化需要一个至少具有相同数量记录的附加表，而不是原始表中的额外列，这是您稍后会去规范化以提高查询速度的事情吗？

任何指向外部资源（包括其他论坛、教程、书籍）的提示、技巧或指针将不胜感激。

欢迎所有答案，提前感谢您提供的任何帮助。

戴夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T14:55:05.030

首先，**不**：多对多关系不是糟糕设计的指标。

其次，连接表*总是*比它们连接的表大。如果您有两个表，每个表有 100 条记录，则连接表最多可以有 10000 条记录。

但是连接表只是整数对，当你索引它们时，它们可以非常快。

**编辑添加：**

你评论说：

> 我有点认为索引是由 DBMS 完成的

您可以告诉 DBMS 索引什么。之后，自动更新索引。

一些 DBMS 有一些工具可以监控你的系统，并就哪些索引是有益的提供建议。

你的设计过程很好，所以你可能走在正确的轨道上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:49:14.920

除了[egrunin 所说](https://stackoverflow.com/a/11633570/533120)的，如果您的 DBMS 支持，联结表通常是[集群的良好候选者（也称为索引组织表） 。](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)

例如，聚类...

```
[Stock Level]
ShipID, PartID, Stock Level 
```

...将具有相同`ShipID`物理位置的行存储在一起，从而非常有效地获取与给定船相关联的所有行。

另一方面，聚类...

```
[Stock Level]
PartID, ShipID, Stock Level 
```

...会将相同的行存储`PartID`在一起，从而有效地获取与给定部分关联的行。

如果您需要在这两个方向上查询，则需要 2 个索引 (`{ShipID, PartID}`和`{PartID, ShipID}`)。通常，聚簇表中的二级索引必须包含[整个 PK 的副本，需要额外的存储空间并导致双重查找](https://stackoverflow.com/a/10720128/533120)，从而使具有多个索引的表聚簇起来成本很高。然而，在这种情况下，我们无论如何都会覆盖相同的字段（只是以不同的顺序），因此二级索引中没有开销。您甚至可以考虑使用二级索引进行[覆盖](http://use-the-index-luke.com/sql/clustering/index-only-scan-covering-index) `Stock Level`以避免双重查找（集群索引已经自然地覆盖了它）。

如果您的 DBMS 不支持集群，请考虑索引`{ShipID, PartID, Stock Level}`（`{PartID, ShipID, Stock Level}`或两者）。这样，您的查询被索引覆盖，无需访问表堆。本质上，您实现了集群的效果，除了在（冗余）表堆上浪费了额外的空间。

* * *

除此之外，一些DBMS还支持前沿的[索引压缩](http://docs.oracle.com/cd/B19306_01/server.102/b14231/indexes.htm#i1106790)，大大减少了联表索引中重复值的存储空间。压缩一个聚集表（它本身就是一个索引）以获得最大效果。

# rhino - 如何使用 Rhino 在函数内部定义变量值？

> ID：11633470
> 
> 赞同：0
> 
> 时间：2012-07-24T14:49:22.023
> 
> 标签：rhino

当我运行此 java 代码时，我能够获取函数外部定义的变量值，但无法获取函数内部定义的变量值。如何访问这些变量值？

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Function;
import org.mozilla.javascript.Scriptable;

public class JSFunctionTest {

public static void main(String args[]) {

    String code = "var name='nc',global_a = 'jill'; " + "\n"+
            "function myfunc(b) { " + "\n"+
            "var local_a = 1;" + "\n"+
            "global_a = 'jack';" + "\n"+
            " return b;" + "\n"+
            "}"; 

    Context context = Context.enter();
    context.setGeneratingDebug(true);
    context.setOptimizationLevel(-1);

    Scriptable scope = context.initStandardObjects(); 

    context.evaluateString(scope, code, "code", 1, null);
    //getting values of varables
    System.out.println("var name:"+scope.get("name", scope));
    System.out.println("var global_a:"+scope.get("global_a", scope));
    System.out.println("var local_a:"+scope.get("local_a", scope));//not found becase function wasnt run

    //calling the function.
    Object fObj = scope.get("myfunc", scope);
    if (!(fObj instanceof Function)) {
        System.out.println("myfunc is undefined or not a function.");
    } else {
        Object functionArgs[] = { "nc" };
        Function f = (Function)fObj;
        Object r = f.call(context, scope, scope, functionArgs);
        String report = "myfunc('nc') = " + Context.toString(r);

        //trying to access global and local a after calling function
        System.out.println("var global_a:"+scope.get("global_a", scope));//values is changed, because this is defined out side the function.
        System.out.println("var local_a:"+scope.get("local_a", scope));// still not found,after running the function.

        System.out.println(report);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:29:44.253

通过在 Rhino 中使用调试 API 实现调试器，我能够解决这个问题。

1.  实现您自己的调试器和调试框架类。
2.  使用 setDebugger() 方法将它们连接到您的上下文
3.  在 DebugFrame 类中，我已经实现了。在 onEnter 方法中缓存范围对象。
4.  在 onLineChange 方法中，您可以使用 ScriptableObject.getProperty() 传递缓存范围对象并给出名称来获取局部变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:19:54.527

在 ECMAScript 中，函数创建自己的作用域。在全局范围之外，这是创建新的唯一方法。请参阅[Rhino Scopes and Contexts](https://developer.mozilla.org/En/Rhino_documentation/Scopes_and_Contexts#Name_Lookup "犀牛瞄准镜")以获取与您类似的示例。

问题是 ECMAScript 是一种动态语言（尤其是当优化级别设置为解释模式时）。这意味着口译员事先并不知道会遇到什么。仅在实际执行代码时才创建/评估函数的范围。因此，您无法评估一段代码并查询未执行范围内的变量。

问题是你为什么要在实践中这样做？对于调试，您可以进入代码并检查范围，您应该能够看到它。

# xml - 使用 TreeView 掌握详细信息

> ID：11633472
> 
> 赞同：3
> 
> 时间：2012-07-24T14:49:26.060
> 
> 标签：xml, treeview, javafx-2, master-detail, treeviewitem

我正在开发一个简单的应用程序来生成 .nfo 文件，这些文件是简单的 XML 文件。所以我有一个看起来像这样的应用程序

![NFO 制造商应用程序](../Images/7ce6f70bbfd8883274684c99f686d381.png)

由于 TreeView 需要一个类型参数，我为树创建了一个简单的模型。这个模型封装了 XML 模型，因为它们只是叶子而不是节点。

**我的问题**

在图片中，您可以在左侧看到树，在右侧看到要在 xml（树叶）中编辑的属性。我绑定了这些属性（目前只有titleProperty），一切正常。但是，当我在文本字段中更改某些内容时，TreeView 不会更新。我必须双击 TreeItem。

如何更新 TreeView 以反映编辑器面板中的更改？

代码在[GitHub 上](https://github.com/muuki88/nfo-maker)

*   [处理 TreeView 的类](https://github.com/muuki88/nfo-maker/blob/master/src/de/mukis/nfo/maker/TVShowsController.java)
*   [树视图内容模型](https://github.com/muuki88/nfo-maker/blob/master/src/de/mukis/nfo/maker/ui/ITVShowItem.java)
*   [XML 模型](https://github.com/muuki88/nfo-maker/blob/master/src/de/mukis/nfo/maker/model/Episodedetails.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:09:38.150

我认为这是因为 updateItem 方法仅在 TreeCell 的项目被替换而不是修改时才被调用。您需要一种方法来通知 TreeCell 实例其项目的属性已更改。

例如，不要使用 setText 方法来修改 treecell 的文本，而是尝试将 textProperty 绑定到模型对象的所需属性。当然，您需要更新模型以使用 JavaFX 属性和绑定 另一种解决方案可能是使用旧样式的 PropertyChangeListener。

如果您想要示例，我可以尝试提供一个。

编辑：一个小例子。我修改了情节叶子的文本。当然，您需要将 EpsiodeDetails 类的情节和标题属性移动到 javafx 样式的属性中。

```
@Override
protected void updateItem(ITVShowItem item, boolean empty) {
    super.updateItem(item, empty);
    if (item != null) {
        if (item instanceof Show) {
            //nothing
        } else if (item instanceof Season) {
            Season season = (Season) item;
            setText("Season " + season.getSeason());
        } else if (item instanceof Episode) {
            Episode episode = (Episode) item;
            this.textProperty().bind(Bindings.concat(episode.getDetails().episodeProperty(), " - ", episode.getDetails().titleProperty()));
            //setText(episode.getDetails().getEpisode() + " - " + episode.getDetails().getTitle());
        }
    }
} 
```

# java - 使用 eclipse 资源过滤器

> ID：11633474
> 
> 赞同：4
> 
> 时间：2012-07-24T14:49:28.543
> 
> 标签：java, eclipse

我正在使用 Eclipse 来管理一个大型项目中的几个 Java 文件。我想过滤所有不必要的文件（项目文件夹 -> 属性 -> 资源 -> 资源过滤器）以优化我的设置（Eclipse 经常挂起）。

我只需要项目根目录下的两个文件夹（和子文件夹）：

*   `src/java`
*   `test/java`

我尝试使用*Include Only*和*Name* , *Location* , *Project Relative Path*应该匹配 eg `src/java/*`，但是没有办法只将这两个文件夹作为资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:29:36.733

资源过滤器将在构建期间过滤工件。但是，如果您只**需要属于您的项目的**特定文件或文件夹，那么您需要创建一个**工作集**。更方便的是，您甚至可以选择仅构建这些文件集而不是整个项目，从而通过仅重新编译修改后的文件来减少构建时间。

请参阅[Eclipse Working Sets Explained](http://eclipse.dzone.com/articles/eclipse-working-sets-explained)，了解如何创建和构建工作集。

注意：您可以在选择类型时使用**资源。**

更新：

**创建工作集：**

*   单击位于右上角的向下箭头
*   单击*选择工作集*
*   单击*新建*以创建您的工作集

**管理/编辑工作集：** 使用 Edit.. 按钮而不是上面提到的*New按钮*

**选择/构建工作集：使用***项目*菜单 中的相应选项

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-21T05:15:52.983

尝试仅包含所需的目录似乎不适用于嵌套级别。有效的是排除所需目录以外的所有其他内容。

所以在编辑资源过滤器对话框中选择

*   排除所有
*   然后应用于 - 文件夹
*   然后检查 - 所有孩子（递归）
*   然后在FilterDetails下选择“Project Rleate Path”和“matches”并检查“Regular Expression”
*   现在对于您只想在 src 下包含目录 java 的情况，您应该使用以下表达式： `src/(?!java).*`

所以现在除了 src 下的 java 目录之外的所有东西都应该消失了。

如果您在 src 下需要多个目录，则可以尝试使用 '|' 在表达式字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:56:38.397

转到项目资源管理器视图 > 单击视图菜单（将在顶部 - 类似于向下箭头）> 自定义视图。它将显示过滤器，因为您选择隐藏所有非 java 元素等。

# objective-c - 在 Objective-C 中对 Collection 对象进行深度复制的合适方法是什么？

> ID：11633484
> 
> 赞同：0
> 
> 时间：2012-07-24T14:50:01.660
> 
> 标签：objective-c, collections, deep-copy

copy 方法只做一个浅拷贝，即集合本身的一个新拷贝，而不是里面存储的所有对象。我现在正在学习的书建议使用归档来创建深拷贝，即使用 NSKeyedArchiver 将集合对象保存到 NSData 对象，然后使用 NSKeyedUnarchiver 将其加载回另一个集合对象。这种方法有效，但我不确定它处理大型集合对象的效率如何。有没有其他可能效果更好的深度复制方法？

好吧，这就是我想知道的：

1.  任何涉及较少编码的方法？
2.  任何一种 CPU 效率更高的方法？
3.  有什么方法可以同时实现？:P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:05:10.920

@dasblinkenlight 说了什么……

`NSKeyedArchiver`专*为*大型对象图设计。如果您对对象图有高度专业化的知识，当然可以构建更高效的东西，但除非您遇到非常特殊的问题，否则这几乎总是错误的。

你的书是对的。使用归档器创建深层副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:18:26.943

我不确定这些数字，但这`NSKeyedArchiver`条路线的计算成本不会很高。它看起来很长，但实际上并不比定制的东西效率低很多（就像@Rob Napier 说的那样）。*但是，它的可重用*性要高得多。

当仍有疑问时，一个有趣的实验可能是一个大而简单的数据集的深层副本，并针对定制的东西进行计时。

# ssl - Maven Tomcat 插件上的 SSL 配置

> ID：11633486
> 
> 赞同：15
> 
> 时间：2012-07-24T14:50:11.150
> 
> 标签：ssl, tomcat7, maven-tomcat-plugin

我正在尝试开发 Wicket 应用程序。它的登录页面必须使用 SSL 打开。所以我做了一些编码。但我找不到为 SSL 配置 maven tomcat 7 插件。我正确创建了密钥库文件。使用`keytool -genkey -alias tomcat -keyalg RSA`命令它在Windows的用户目录中。它的密码是密码。

这就是我在 pom.xml 中定义 tomcat 的方式：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0-beta-1</version>
    <executions>
        <execution>
            <id>tomcat-run</id>
            <goals>
                <goal>exec-war-only</goal>
            </goals>
            <phase>package</phase>
            <configuration>
                <path>foo</path>
                <!-- optional only if you want to use a preconfigured server.xml file -->
                <serverXml>src/main/tomcatconf/server.xml</serverXml>
                <!-- optional values which can be configurable -->
                <attachArtifactClassifier>
                                    default value is exec-war but you can   customize
                                </attachArtifactClassifier>
                <attachArtifactClassifierType>
                                      default value is jar
                                </attachArtifactClassifierType>
                <httpsPort>8443</httpsPort>
                <keystoreFile>${user.home}/.keystore</keystoreFile>
                <keystorePass>password</keystorePass>
                <protocol>org.apache.coyote.http11.Http11AprProtocol</protocol>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-11T17:33:18.053

在我的 pom.xml 中使用此配置，我可以正常工作：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <path>/${project.build.finalName}</path>
        <contextFile>${basedir}/context.xml</contextFile>
        <httpsPort>8443</httpsPort>
        <keystoreFile>${basedir}/certificates/keystore.jks</keystoreFile>
        <keystorePass>password</keystorePass>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T12:57:10.417

我能够让它工作：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <path>/mycontext</path>
        <port>9090</port>
        <httpsPort>8443</httpsPort>
        <keystorePass>changeit</keystorePass>
    </configuration>
</plugin> 
```

确保从文档中创建密钥库：http: [//tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)（看起来你有那部分），最终对我有用的是创建密钥库（在默认目录中），两个密码都为“changeit”......不知道为什么，但对我来说，在这种情况下这是可以的，因为这仅用于本地开发。

我在 Windows 7、Maven 3 上运行。

希望这可以帮助。

# javascript - Javascript datestring 构造函数更改时区

> ID：11633489
> 
> 赞同：4
> 
> 时间：2012-07-24T14:50:26.410
> 
> 标签：javascript

我有一个这种格式的字符串日期：

> “2012-07-22T08:00:00Z”

但是当我尝试从该字符串创建日期时：

```
new Date("2012-07-22T08:00:00Z"); 
```

我得到：

> 日期 {2012 年 7 月 22 日星期日 01:00:00 GMT-0700}

看起来它正在将日期的时区更改为本地时区。因为它减少了 7 小时的时间 ( **GMT-0700** )

如何在正确的时间（**08:00:00**）使用 UTC 保存日期对象？

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:59:11.297

它只显示这样的日期，因为 Date 的 toString() 方法返回为当前时区格式化的日期。内部表示仍然是时区中立的。试试`new Date("2012-07-22T08:00:00Z").toUTCString()`。

Javascript Dates 有很多方法可以使用当前时区或 UTC 获取和设置值，因此如果您需要使用 UTC 计算或打印，可以使用这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:54:47.333

我看起来像 UTC 和 GMT 是同一个时区：

[http://geography.about.com/od/timeandtimezones/a/gmtutc.htm](http://geography.about.com/od/timeandtimezones/a/gmtutc.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:02:26.553

在我的头顶上：

```
function dateToUTC( date ) { 
    return new Date( 
            date.getUTCFullYear(),
            date.getUTCMonth(),
            date.getUTCDate(),
            date.getUTCHours(),
            date.getUTCMinutes(), 
            date.getUTCSeconds()
    ) 
}; 
```

虽然看起来效率很低...

# ruby-on-rails - CSV 以竖线分隔

> ID：11633492
> 
> 赞同：0
> 
> 时间：2012-07-24T14:50:33.080
> 
> 标签：ruby-on-rails, csv, erb

我创建了一个 Rails 文件，输出用逗号分隔的值，称为 posts.csv.erb。

当我单击该链接时，它会以 CSV 文件的形式下载，但逗号现在是管道。此外，Vim 出于某种原因尝试将逗号自动更正为管道（但我解决了这个问题，所以它们实际上是逗号）。如果我调用文件 posts.txt.erb 它工作正常 - 我看到实际的逗号。但不知何故，Rails 或 ERB 似乎想要为 CSV 文件输出管道？

# qooxdoo - 选择项目后保持菜单打开

> ID：11633495
> 
> 赞同：0
> 
> 时间：2012-07-24T14:50:49.703
> 
> 标签：qooxdoo

从菜单中选择一个项目后，我需要我的菜单（由菜单按钮打开）保持打开状态。这样您就可以在关闭之前选择一个以上的项目（通过单击列表外部）

我在api中找不到任何东西，所以我希望你们知道诀窍

另一种解决方案是，如果您将鼠标悬停在按钮上，则菜单会打开。当您用鼠标离开菜单时，菜单将关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:32:54.483

来自邮件列表的交叉帖子：http: //qooxdoo.678.n2.nabble.com/Keeping-a-menu-open-after-selecting-an-option-td7580767.html;cid= [1345706918184-716](http://qooxdoo.678.n2.nabble.com/Keeping-a-menu-open-after-selecting-an-option-td7580767.html;cid=1345706918184-716)

列表中的答案：

为了在单击后保持菜单打开，您需要提供自己的 menu.Button 实现。您可以子类化 qx.ui.menu.Button，然后需要覆盖 _onClick 方法，使其不会调用 qx.ui.menu.Manager.hideAll（查看 qx.ui.menu.Button 源代码）。

然后，整个菜单的onMouseout，调用qx.ui.menu.Manager.getInstance().hideAll()。

# python - Django：视图如何从 url 获取多个值？

> ID：11633500
> 
> 赞同：8
> 
> 时间：2012-07-24T14:51:04.430
> 
> 标签：python, django

这是关于从 URL 传递值以在 django 中查看。

像这样的网址：http:///boards/? **板**=图片&**板**=女孩

我想获得都属于**board**的值“图片”和“女孩” 。将这些值存储到列表或其他东西中。

显然，request.GET.get('board') 不能得到两个值。

有人有解决方法吗？先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T14:57:06.863

`It's request.GET.getlist('board')`- 在[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict的 Django 文档中有说明](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict)

# java - 滚动窗格到图

> ID：11633509
> 
> 赞同：1
> 
> 时间：2012-07-24T14:51:40.200
> 
> 标签：java, swt, draw2d

我想在 RoundedRectangle 中添加一个滚动条。我在根图中有 3 个圆角矩形。现在我想为每个圆角矩形添加滚动条。是否可以将滚动条添加到圆角矩形或矩形图形？我使用了以下方式。但它没有向我显示任何数字。如何让它发挥作用？在下面的示例中，我只添加了一个矩形。

```
import org.eclipse.draw2d.ColorConstants;
import org.eclipse.draw2d.Figure;
import org.eclipse.draw2d.FigureCanvas;
import org.eclipse.draw2d.LightweightSystem;
import org.eclipse.draw2d.RoundedRectangle;
import org.eclipse.draw2d.ScrollPane;
import org.eclipse.draw2d.XYLayout;
import org.eclipse.draw2d.geometry.Rectangle;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class RoundedRectangleTest {

    public static void main(String args[]) {

        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setText("Scrollpane Example");

        // Create a root figure and simple layout to contain all other figures
        Figure root = new Figure();
        root.setFont(shell.getFont());
        root.setLayoutManager(new XYLayout());

        ScrollPane scrollPane = new ScrollPane();

        RoundedRectangle r = new RoundedRectangle();
        r.setBackgroundColor(ColorConstants.yellow);
        Rectangle rect = new Rectangle(10, 10, 50, 50);
        r.setBounds(rect);

        scrollPane.setContents(r);

        root.add(scrollPane);

        FigureCanvas canvas = new FigureCanvas(shell, SWT.DOUBLE_BUFFERED);
        canvas.setBackground(ColorConstants.white);
        //canvas.setContents(scrollPane);
        LightweightSystem lws = new LightweightSystem(canvas);
        lws.setContents(root);

        shell.setSize(400, 350);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:23:59.980

我没有设法得到圆角矩形，但以下至少适用于常规矩形：

```
public class RoundedRectangleTest {
    public static void main(String args[]) {
        Display d = Display.getDefault();
        final Shell shell = new Shell(d);

        LightweightSystem lws = new LightweightSystem(shell);
        final Figure contents = new Figure();
        lws.setContents(contents);
        contents.setLayoutManager(new GridLayout());

        IFigure rectangleFigure = createFigure();
        ScrollPane pane = new ScrollPane();

        /* delete following two lines if scrollbars not always visible */
        pane.setHorizontalScrollBarVisibility(ScrollPane.ALWAYS);
        pane.setVerticalScrollBarVisibility(ScrollPane.ALWAYS);
        pane.setContents(rectangleFigure);
        contents.add(pane);

        shell.open();
        shell.setText("Scrollpane Example");
        while (!shell.isDisposed()) {
            if (!d.readAndDispatch())
                d.sleep();
        }
    }

    private static IFigure createFigure() {
        RectangleFigure rectangleFigure = new RectangleFigure();
        rectangleFigure.setBackgroundColor(ColorConstants.yellow);
        rectangleFigure.setSize(100, 100);
        return rectangleFigure;
    }
} 
```

也许您可以以此为起点，创建一个`Figure`类似`RectangleFigure`但带有圆角的对象。

# cognos - 我在 cgi-bin 文件夹中找不到 web.config？

> ID：11633510
> 
> 赞同：1
> 
> 时间：2012-07-24T14:51:41.610
> 
> 标签：cognos, cognos-bi, cognos-tm1

我在 cognos 10 中的 iis 中进行配置。但我在 cgi-bin 文件夹中找不到 web 配置文件。我怎样才能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:10:04.803

这篇 Microsoft 知识库文章擅长帮助识别 IIS 配置文件可能存在的各个位置： [http ://technet.microsoft.com/en-us/library/cc754617%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc754617%28WS.10%29.aspx)

根据我的经验，web.config 被放置在您的应用程序（不是虚拟目录）配置的位置，但并非总是如此。

# ajax - 你能在 ajax 响应事件上做一个 jquery 移动弹出窗口吗？

> ID：11633514
> 
> 赞同：3
> 
> 时间：2012-07-24T14:51:57.417
> 
> 标签：ajax, forms, jquery-mobile, popup

希望使用弹出窗口，我很确定我试图错误地使用它。关于这应该如何工作的任何想法？你能以这种方式使用弹出窗口吗？

```
<script>

function onSuccess(data, status)
{
    data = $.trim(data);
    $("#notification").text(data);
}

function onError(data, status)
{
    data = $.trim(data);
    //$("#notification").text(data);
    $("#notification").popup(data);        }        

$(document).ready(function() {
    $("#submit").click(function(){

        var formData = $("#callAjaxForm").serialize();

        $.ajax({
            type: "POST",
            url: "sendmsg.php",
            cache: false,
            data: formData,
            success: onSuccess,
            error: onError
        });

        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:51:56.817

我假设您正在尝试使用 JQM[弹出窗口小部件](http://jquerymobile.com/test/docs/pages/popup/index.html)`}`，首先您错过了`onError function`. 其次要使用弹出小部件可以先设置数据

`$("#myPopupContent").text(data)`

然后显示你使用[open](http://jquerymobile.com/test/docs/pages/popup/methods.html)方法

`$("#myPopup").popup("open")`

# asp.net-mvc - 泛型集合 MVC

> ID：11633515
> 
> 赞同：0
> 
> 时间：2012-07-24T14:52:03.430
> 
> 标签：asp.net-mvc, asp.net-mvc-3

大家好我试图使用这个[http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic8.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic8.aspx)，但我有一些问题

1）我在 Create t.Albums 下的收藏始终是空的，但是我的 t.Genre 正在工作我不知道如何解决我已将其包含在我的 Create.aspx 中的问题

```
Inherits="System.Web.Mvc.ViewPage<SomeStore.Controllers.ViewModels.StoreBrowseViewModel>" 
```

-------------------------------- `StoreBrowseViewModel`_

```
public class StoreBrowseViewModel
{
    public StoreBrowseViewModel{}

    public StoreBrowseViewModel(List<Album> _Albums, Genre _Genre)
    {
        this.Genre=_Genre;
        this.Albums = _Albums;
    }
    public Genre Genre { get; set; }
    public List<Album> Albums { get; set; }
} 
```

-------------------------------- `StoreBrowseController`_

```
public ActionResult Create([Bind(Include = "Genre,Albums")]StoreBrowseViewModel t)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:58:08.207

集合不受 ModelBinder 的约束。你需要那个干什么？

# codeigniter - 在 codeigniter 中特定类型的 404 路由没有自动加载数据库

> ID：11633519
> 
> 赞同：4
> 
> 时间：2012-07-24T14:52:15.763
> 
> 标签：codeigniter, routes, http-status-code-404, autoload

我有一个名为的控制器`Hello.php`，它只有一个名为`world`. 控制器在`construct`时间启动事务，`world`函数回`hello world`显并提交事务。

```
class Hello extends CI_Controller {

    public function __construct() {
        parent::__construct();
        $this->db->trans_begin;
    }

    public function world(){
        echo "hello world";
        $this->db->trans_commit;
    }
} 
```

请注意：我的数据库已从 config/autoload.php 自动加载`$autoload['libraries'] = array('database');`

* * *

从`config/routes.php`我已经将我的 404 错误路由到一个名为 bad_parameters.php 的控制器`$route['404_override'] = 'bad_parameters'`；

* * *

```
class Bad_parameters extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function index(){
        echo "before rollback - ";
        $this->db->trans_rollback();
        echo "after rollback";
    }
} 
```

* * *

现在我要做3件事：

1.  打电话给`hello/world`- 期待`Hello World`然后提交
2.  呼叫`hello/fake`- 期待 404 路由，然后`before rollback - after rollback`
3.  呼叫`fake/fake`- 期待 404 路由，然后`before rollback - after rollback`

**相反**，这就是发生的事情

1.  呼叫-按预期`hello/world`获得然后 COMMIT`Hello World`
2.  打电话给`hello/fake`-得到`before rollback`<-**我的问题是关于这个**
3.  呼叫`fake/fake`-`before rollback - after rollback` 达到预期

我在第 1 点收到的错误消息。2是：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：Bad_parameters::$db
> 
> 文件名：控制器/bad_parameters.php

这是说 $db 未定义，而我确实从`config/autoload.php`.

现在，如果我包含`$this->load->database();`在 CONSTRUCTOR 中`bad_parameters.php`，则第 2 点按预期显示“回滚前 - 回滚后”，没有任何错误。

即使 2 号和 3 号都是 404 路由，3 号示例工作正常，但 2 号示例存在此问题。为什么会发生这种情况？我已经在自动加载我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:32:25.470

您使用的是哪个 CI 版本？尝试更新您的 CI 版本。

在 CI 2.1.0 修复了一个错误（Reactor #19），其中 1）404_override 路由在某些情况下被忽略，2）当控制器存在但请求的方法确实时，自动加载的库对 404_override 控制器不可用不是。

[ci 更新日志](http://codeigniter.com/user_guide/changelog.html)

[ci升级](http://codeigniter.com/user_guide/installation/upgrading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:03:42.810

在这里，我找到了解决此问题的方法：

[https://bitbucket.org/ellislab/codeigniter-reactor/changeset/2fa0e75a2101](https://bitbucket.org/ellislab/codeigniter-reactor/changeset/2fa0e75a2101)

为了保留这个答案：

替换 (system/core/CodeIgniter.php) 第 292 行：

```
show_404("{$class}/{$method}"); 
```

使用 (system/core/CodeIgniter.php) 第 292 行：

```
// Check and see if we are using a 404 override and use it.
if ( ! empty($RTR->routes['404_override']))
{
    $x = explode('/', $RTR->routes['404_override']);
    $class = $x[0];
    $method = (isset($x[1]) ? $x[1] : 'index');
}
else
{
    show_404("{$class}/{$method}");
} 
```

并替换 (system/core/Router.php) 第 273 行：

```
if (!empty($this->routes['404_override'])) 
```

使用 (system/core/Router.php) 第 273 行：

```
if ( ! empty($this->routes['404_override'])) 
```

# android - 具有 TableLayout 的底部边框，用作 ListView 中的行

> ID：11633522
> 
> 赞同：6
> 
> 时间：2012-07-24T14:52:17.967
> 
> 标签：android

根据[Open-sided Android 笔画？](https://stackoverflow.com/questions/2422120/open-sided-android-stroke)，基本上有2种方式来实现TableLayout的边框。

**使用描边**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#00ffffff"/>
    <stroke android:width="1dp" android:color="#ffffff"/>
</shape> 
```

![在此处输入图像描述](../Images/93d41f94bcf8eea53253758f631ed282.png)

但是，这不是我想要的，因为我只想要底部边框。因此，我尝试另一种选择。

**使用 2 层**

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<!-- This is the line -->
<item>
      <shape>
            <solid android:color="#ffffff" />
      </shape>
</item>
<!-- This is the main color -->
<item android:bottom="1dp">
     <shape>
           <solid android:color="#000000" />
     </shape>
</item>
</layer-list> 
```

![在此处输入图像描述](../Images/19fc7beb6c1167bb79344347938145d6.png)

但是，在列表视图选择期间，`TableRow`将不会用`ListView`选择颜色突出显示，因为它的背景已经被**“#000000”**层取代。

有没有更好的方法我可以只有底部边框，但它会服从`ListView`选择突出显示颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:34:48.823

在您的形状文件中`<solid android:color="@android:color/transparent"/>`使用`<solid android:color="#00ffffff"/>`

# python - 如何在 django 中扩展用户配置文件？

> ID：11633523
> 
> 赞同：1
> 
> 时间：2012-07-24T14:52:19.770
> 
> 标签：python, django, django-models, django-admin

我正在尝试使用此处找到的其他一些问题/答案和网络上的教程来扩展用户配置文件。我正在尝试将 UserProfile 模型包含在管理员中，以便我可以更改配置文件的详细信息（暂时暂时），但即使我在 admin.py 中包含 UserProfile 后它也没有显示，这让我相信我是在这里做错了。

# 模型.py

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    quote = models.CharField('Favorite quote', max_length =  200)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)
post_save.connect(create_user_profile, sender=User) 
```

# 网址配置

```
(r'^accounts/register/$', 'register'), 
```

# 在注册用户的 view.py 中查看

```
def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            return HttpResponseRedirect('reserve/templates/index.html')
    else:
        form = UserCreationForm()
    c = {'form': form}
    return render_to_response("registration/register.html", c, context_instance=RequestContext(request)) 
```

# 管理员.py

```
from reserve.models import UserProfile
from django.contrib import admin
admin.site.register(UserProfile) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:27:32.863

常见的方法是内联编辑页面，在`UserProfile`你的应用程序中，在之后：`User``admin.py``'django.contrib.auth'``INSTALLED_APPS`

```
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User
from reserve.models import UserProfile

class UserProfileInline(admin.TabularInline):
    model = UserProfile

class UserWithProfileAdmin(UserAdmin):
    inlines = [UserProfileInline]

admin.site.unregister(User)
admin.site.register(User, UserWithProfileAdmin) 
```

此外，您可以将其`ForeignKey`本身用作`primary_key`：

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)
    quote = models.CharField('Favorite quote', max_length =  200) 
```

这样，您可以节省代理 id 的成本，并保持用户配置文件的 id 与用户相同。这启用`UserProfile.objects.get(pk=user_id)`（`user.get_profile()`当然仍然可用）

# asp.net - 在 ASP.NET 中切换母版页按钮默认按钮属性

> ID：11633527
> 
> 赞同：2
> 
> 时间：2012-07-24T14:52:44.717
> 
> 标签：asp.net, defaultbutton

我正在开发一个 ASP.NET Web 应用程序（C#，VS2010），我有一个母版页，它有一个按钮（搜索按钮）和一个文本框，当我按下回车键时，这个搜索按钮会执行，但我不想要这个当我在我的登录页面时，母版页搜索按钮可以工作。在我的登录页面中，我有两个文本框和另一个按钮（登录按钮），当我在登录页面时，我希望这个登录按钮作为默认按钮（使用 enter 键执行）。当然，我根本没有使用任何 javascript 或 DefaultButton 属性

如何在我的登录页面中禁用母版页按钮输入键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:57:12.487

您需要在[`DefaultButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)您想要默认按钮的每个区域周围定义一个，然后它将使用具有焦点的表单部分：

```
<asp:Panel id="SearchPanel" runat="server" DefaultButton="Search" >
      <asp:Button id="Search" runat="server" Text="Search" />
<asp:Panel>
<asp:Panel id="LoginPanel" runat="server" DefaultButton="Login" >
      <asp:Button id="Login" runat="server" Text="Login" />
<asp:Panel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:56:18.790

在您的登录页面中获取对母版页按钮控件的引用，然后将其禁用。

```
 Button b = Master.FindControl("ButtonID");
 b.Enable= false; 
```

要更改母版页的默认按钮，请更改母版页代码隐藏中的默认按钮

```
form1.DefaultButton = "New button ID";

oR  from login page codebehind

Form.DefaultButton = "New button ID"; 
```

# eclipse - 使用命令行将插件安装到eclipse中

> ID：11633529
> 
> 赞同：11
> 
> 时间：2012-07-24T14:52:45.880
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我有一个更新站点，并获得了包含功能和插件的目录

如何使用命令行在 Eclipse 应用程序中安装插件？我想自动化这个过程

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T15:19:14.853

您可以使用以下方式调用[p2 导向器应用程序](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)：

```
eclipsec.exe
   -application org.eclipse.equinox.p2.director
   -repository http://download.eclipse.org/releases/galileo/
   -installIU org.eclipse.cdt.feature.group
   -destination d:/eclipse/
   -profile SDKProfile 
```

这里也是[p2 wiki](http://wiki.eclipse.org/Equinox_p2_director_application)的链接。

# javascript - 浏览器之间的 Javascript 日期问题

> ID：11633531
> 
> 赞同：1
> 
> 时间：2012-07-24T14:52:47.107
> 
> 标签：javascript, validation, google-chrome, date, blackberry-webworks

函数接收两个日期的格式为：YYYY/MM/DDTHH:MM

年/月/日时：分

包住它不清楚的地方

```
function compareDates(start, end) {
    console.log("Start: " + start);
    console.log("END : " + end);

    var start1 = start.replace(/\T/g,' ')
    var start2 = new Date(start1);

    var end1 = end.replace(/\T/g,' ')
    var end2 = new Date(end1);

    console.log("Str 1: " + start1);
    console.log("Str 2: " + start2);    
    console.log("END 1: " + end1);
    console.log("END 2: " + end2);

    console.log((end - start));
    console.log((end - start) < 0);

    if ((end - start) < 0 || (end - start) == 0) {return false;}else{return true}
} 
```

调试前的原始代码

```
function compareDates(start, end) {
    start = new Date(start.replace(/\T/g,' '));
    end = new Date(end.replace(/\T/g,' '));
    if ((end - start) < 0 || (end - start) == 0) {return false;}else{return true}
} 
```

控制台用于我的错误日志记录，在 chrome 中它可以正常工作，没有错误，如果结束日期等于或早于我的开始日期，则返回 false。

如果我在 web-works 中运行，我会得到以下输出问题 Str 2: Invalid Date END 2: Invalid Date

我不明白的是为什么这在黑莓网络工程中不起作用但在 chrome 中起作用，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:57:12.190

在您的正则表达式中，您是否尝试过在“T”之前删除“\”？

如果后面的字符对正则表达式引擎具有特殊含义（大写 T 没有），则只需要以这种方式使用前导斜杠。看起来 Chrome 很宽容并忽略了斜线，而其他浏览器则没有。

# c - 我可以使用线程来更改 GTK 图像吗？

> ID：11633532
> 
> 赞同：0
> 
> 时间：2012-07-24T14:52:49.597
> 
> 标签：c, multithreading, image, gtk

我有一个 GTK 窗口，里面有一个图像。我想改变这个形象。假设我有两个图像，“sun.png”和“moon.png”。每秒一次，我想接收“date -f%l”的输出以获取当前时间。如果时间在 7 点到 19 点之间（早上 7 点到晚上 7 点），我想显示 sun.png。否则，我想显示moon.png。

是否可以有一个带有while循环的单独线程，在程序运行时更改图像？我该怎么做呢？

顺便说一句，我正在用 C 语言编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:11:07.297

这不会是一个完整的答案，但是评论太长而且很重要。

您绝对不会通过一次进入一个休眠一秒钟的循环并调用外部`date`命令并解析其输出以确定下一步做什么来实现这样的事情。这不仅比必要的工作多得多；更重要的是，它会在晚餐时吃掉用户的电池。

相反，您调用`gettimeofday`or`clock_gettime`来确定当前时间，然后计算未来下一次需要更改太阳/月亮图像的时间。然后，您在整个时间间隔内都睡到那个时间，即单次睡眠最多 12 小时。如果您的线程提早醒来（可能是从信号等），那么您只需在`gettimeofday`再次调用时确定它还不是改变的时间，并计算一个新的持续时间以重新进入睡眠状态。这样，CPU 保持完全空闲（并且可以进入省电模式），除非有实际工作要做。

至于您是否可以在 GTK+ 中使用线程执行此操作，我很确定您可以，但我不熟悉 GTK+ API。

# css - 将四个 div 放在一个包装器中，只有 1 个显示自己

> ID：11633539
> 
> 赞同：0
> 
> 时间：2012-07-24T14:53:07.673
> 
> 标签：css, html

我正在尝试创建一个包装器，其中包含 4 个彼此相邻的 div（两个彼此相邻，其余两个在它们下方）。然而问题是，只有第四个出现了。我尝试使用显示属性设置溢出：隐藏，玩具，还尝试使用浮动：左和浮动：右。然而到目前为止还没有运气。

这是我正在使用的 CSS：

```
html, body{
width: 100%;
height: 100%;
}

#wrapper{
width: 60%;
height: 60%;
top: 20%;
left: 20%;
position: relative;
overflow: hidden;
border: 1px solid #000;
}

#one{
background-color: red;
width: 50%;
position: absolute;
height: 50%;
}

#two{
background-color: green;
width: 50%;
position: absolute;
height: 50%;
}

#three{
background-color:blue;
width: 50%;
position: absolute;
height: 50%;
}

#four{
background-color: yellow;
width: 50%;
position: absolute;
height: 50%;
} 
```

这是随之而来的 html 代码：

```
<html><head>
<link rel="stylesheet" type="text/css" href="style.css"/>
</head><body>
<div id="wrapper">
    <div id="one">a</div>
    <div id="two">b</div>
    <div id="three">c</div>
    <div id="four">d</div>
</div>
</body></html> 
```

谁能弄清楚为什么黄色（四个）div 是唯一显示自己的，即使我让它向右浮动而其他人向左浮动？（此外，我还想知道为什么会出现滚动条，因为宽度：100% 和高度：html,body 部分中的高度：100%。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:56:58.757

浮动你的内在元素。看这里：

[http://jsfiddle.net/dkGBA/1/](http://jsfiddle.net/dkGBA/1/)

主要变化：

```
.child
{
    width: 50%;
    height: 50%;
    float: left;
}

<div id="one" class="child">a</div>
<div id="two" class="child">b</div>
<div id="three" class="child">c</div>
<div id="four" class="child">d</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:56:57.460

那是因为您在所有四个 div 上都将位置设置为绝对位置。然后，您必须使用顶部、底部、右侧或左侧来定位它们。当您绝对定位一个元素时，它会从文档流中取出。

**[jsFiddle 示例](http://jsfiddle.net/j08691/5wsbA/)**

**CSS**

```
#one{
background-color: red;
width: 50%;
position: absolute;
height: 50%;
}

#two{
background-color: green;
width: 50%;
position: absolute;
height: 50%;
right:0;
top:0;
}

#three{
background-color:blue;
width: 50%;
position: absolute;
height: 50%;
left:0;
bottom:0;
}

#four{
background-color: yellow;
width: 50%;
bottom:0;
right:0%;
position: absolute;
height: 50%;
} 
```

第二种选择是删除绝对定位，并将它们全部浮动。

**[jsFiddle 示例](http://jsfiddle.net/j08691/5wsbA/1/)**

CSS：

```
#one,#two,#three,#four {
float:left;
}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:00:16.037

不要为此使用位置，而是使用浮动。

例子：

[http://jsbin.com/ucofed/edit](http://jsbin.com/ucofed/edit)

# java - 如何使用 javax.mail 解析电子邮件内容？

> ID：11633541
> 
> 赞同：1
> 
> 时间：2012-07-24T14:53:08.520
> 
> 标签：java, email, message, attachment

我正在尝试使用 javax.mail 解析电子邮件。我想同时获取文本内容和所有附件（最好是内联图片/附件）。

我有以下代码，但它似乎与具有多个嵌套多部分的更复杂的邮件中断。

我已经阅读了常见问题解答并在谷歌上搜索了一整天，但没有找到解决方案。

请帮忙。

```
public static String fetchEmailcontent(Part message, String messageid) throws IOException, MessagingException {

        StringWriter sw = new StringWriter(1024);

        if (message != null && message.getContent() != null) {
            if (message.getContent() instanceof Multipart) {
                Multipart parts = (Multipart) message.getContent();
                BodyPart p;
                boolean alternative = parts.getContentType().trim().toLowerCase().startsWith("multipart/alternative") ? true : false;

                InputStreamReader isr;
                int retrieved;
                char[] buffer = new char[512];
                for (int i = 0; i < parts.getCount(); i++) {
                    p = parts.getBodyPart(i);

                    if (p.getContentType().toLowerCase().startsWith("multipart")) {
                        sw.write(fetchEmailcontent(p, messageid));
                        break;
                    } else if ((Part.INLINE.equalsIgnoreCase(p.getDisposition()) || p.getDisposition() == null) && p.getContentType().toLowerCase().startsWith("text") && p.getFileName() == null) {

                        if (InputStream.class.isInstance(p.getContent())) {
                            InputStream ip = p.getInputStream();

                            StringWriter subwriter = new StringWriter(ip.available());
                            isr = new InputStreamReader(ip);
                            while (isr.ready()) {
                                retrieved = isr.read(buffer, 0, 512);
                                subwriter.write(buffer, 0, retrieved);
                            }
                            sw.write(subwriter.toString());
                        } else {
                            Object content = p.getContent();
                            if (java.io.ByteArrayInputStream.class.isInstance(content)) {
                                int bcount = ((java.io.ByteArrayInputStream) content).available();
                                byte[] c = new byte[bcount];
                                ((java.io.ByteArrayInputStream) content).read(c, 0, bcount);
                                sw.write(new String(c));
                            } else {
                                sw.write(content.toString());
                            }
                        }
                        if (alternative && !"".equals(sw.toString().trim())) {
                            break;
                        }
                        sw.write("\r\n");
                    } else if (p.getDisposition() != null && (p.getDisposition().equalsIgnoreCase(Part.ATTACHMENT) || p.getDisposition().equalsIgnoreCase(Part.INLINE))) {
                        saveFile(MimeUtility.decodeText(p.getFileName()), p.getInputStream(), messageid);
                    }
                }
            } else if (message.getContentType().toLowerCase().startsWith("text")) {
                sw.write(message.getContent().toString());
            }
        }
        return sw.toString();
    } 
```

这是无法从中获取附件的邮件示例：（我已删除标题和附件的 BASE64 代码以节省空间.. 否则它们很好）

```
Content-Type: multipart/mixed; boundary=f46d04016b4779522904c58fb5b4

--f46d04016b4779522904c58fb5b4
Content-Type: multipart/alternative; boundary=f46d04016b4779522104c58fb5b2

--f46d04016b4779522104c58fb5b2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

test

sdljpjdpjsd

=E5=E4=F6

--f46d04016b4779522104c58fb5b2
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div>test </div><div>=A0</div><div>=A0</div><div>sdljpjdpjsd</div><div>=A0<=
/div><div>=A0</div><div>=E5=E4=F6</div>

--f46d04016b4779522104c58fb5b2--
--f46d04016b4779522904c58fb5b4
Content-Type: image/jpeg; name="blah.jpg"
Content-Disposition: attachment; filename="blah.jpg"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_h50rhk180

BUNCH OF BASE64
--f46d04016b4779522904c58fb5b4
Content-Type: application/pdf; name="blah2.pdf"
Content-Disposition: attachment; filename="blah2.pdf"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_h50ria042

BUNCH OF BASE64
--f46d04016b4779522904c58fb5b4-- 
```

预期的输出是消息正文中的文本以及保存到磁盘的所有附件。函数 saveFile() 可以做到这一点，但它太初级了，我决定不包括它。我确定这不是罪魁祸首。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:59:39.613

在您的代码中...

`if (InputStream.class.isInstance(p.getContent()))`可以是假的，但是， `InputStream ip = p.getInputStream();`仍然可以成功！

希望这可以帮助。

# node.js - 应该如何在backbone.js中初始化一个页面，以最小化HTTP请求和延迟

> ID：11633542
> 
> 赞同：1
> 
> 时间：2012-07-24T14:53:08.600
> 
> 标签：node.js, backbone.js, express

我正在学习骨干，从示例和教程中我得到了这样的印象：

*   初始`GET /`返回带有主干和视图模板的骨架页面。
*   Backbone`REST API`通过`GET`ting 所需的数据并将其添加到 DOM 中来充实页面。

这可行，但是从最终用户的角度来看，这似乎在额外的 HTTP 请求和延迟方面是浪费的（在页面可见之前最少两次往返。在我的情况下实际上是三个，因为 API 必须首先询问哪些小部件是可用，然后获取任何可用小部件的详细信息....）。

是否有一种既定的标准方法来解决这个问题？我目前的候选人是：

1.  忽略问题。
2.  通过内联 javascript 将初始化数据直接嵌入到原始页面中。
3.  渲染页面，就好像主干不存在一样。当主干完成初始化时，它将（希望）与用户看到的页面同步。如果事情在几秒钟内发生变化，它可以纠正它需要做的任何事情，但至少不会让用户悬而未决。
4.  另一个我没有想到的解决方案？

有没有既定的方法来做到这一点？是针对具体情况的吗？我正在使用节点/JS/Express。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:31:11.737

**更新：我想我在**[Backbone 的文档](http://backbonejs.org/#Collection-reset)中找到了一个解决方案，可能是“已接受”的解决方案：

> 这是一个在 Rails 应用程序中使用 reset 在初始页面加载期间引导集合的示例。
> 
> ```
> <script>
>   var Accounts = new Backbone.Collection;
>   Accounts.reset(<%= @accounts.to_json %>);
> </script> 
> ```
> 
> 在不传递任何模型作为参数的情况下调用`collection.reset()`将清空整个集合。

# android - 在通知栏上开始下载点击android

> ID：11633545
> 
> 赞同：1
> 
> 时间：2012-07-24T14:53:19.690
> 
> 标签：android, notifications

我的代码显示通知栏，当我点击它时它开始下载。唯一的问题是它进入浏览器并从那里开始。我希望下载开始，但它不会进入浏览器。我的代码是：

```
Intent NotifyIntent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse(ApkFileLocation));

                PendingIntent  intent = PendingIntent.getActivity(EnquireActivity.this, 0, NotifyIntent, 0);
                NotificationDetails.setLatestEventInfo(context, ContentTitle, ContentText, intent);

                mNotificationManager.notify(SIMPLE_NOTFICATION_ID, NotificationDetails); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:00:19.770

通过使用 URL 设置`NotifyIntent`为`android.content.Intent.ACTION_VIEW`，您是在告诉系统，“我不在乎它是如何打开的，所以使用默认行为。”

如果您希望在后台进行下载，您应该实现`Service`并编写代码以在那里下载文件。然后`NotifyIntent`指向`BroadcastReceiver`将启动`Service`. 该服务应该能够在通知栏中将下载状态显示为“正在进行的”活动（无法关闭）。

**编辑：**看起来您可以通过这种方式直接使用 Intent 启动服务：

```
Intent NotifyIntent = new Intent(context, MyService.class);
PendingIntent intent = PendingIntent.getService(context, 0, NotifyIntent, 0); 
```

# c++ - 建议网站练习 C/C++ 算法/谜题

> ID：11633548
> 
> 赞同：24
> 
> 时间：2012-07-24T14:53:46.480
> 
> 标签：c++, c, algorithm

我想练习用 C/C++ 解决问题。但我想避免从头开始编写整个程序。是否有任何网站给我提供谜题和代码框架，并期望我只填写一两个函数来解决手头的问题？这将节省大量时间，我可以只专注于解决问题的部分。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T14:55:38.723

[Advent of Code](https://adventofcode.com/)从 12 月 1 日开始每年都会发布新问题。这些问题有一个以圣诞节为主题的故事，涉及圣诞老人和他的精灵。有排行榜，所以你可以和你的朋友竞争。您还可以重新审视前几年的问题并解决它们。

[Project Euler](http://www.projecteuler.net)有近 400 个编程难题。没有框架，但前几个难题很简单，这应该不是问题。

[TopCoder](http://www.topcoder.com)是一个在线编码竞赛网站。您可以在他们的比赛竞技场小程序中打开过去的问题进行练习。您需要做的就是编写问题中描述的一个函数。然而，这些问题具有广泛的难度。在 Project Euler 中，即使是最简单的也比刚开始的难度更大。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T14:58:19.847

有这么多。其中很少有：

[http://www.leetcode.com/](http://www.leetcode.com/)

[http://cpp-wiki.wikidot.com/](http://cpp-wiki.wikidot.com/)

[http://www.parashift.com/c++-faq-lite/](http://www.parashift.com/c++-faq-lite/)

[http://www.coderholic.com/10-more-puzzle-websites-to-sharpen-your-programming-skills/](http://www.coderholic.com/10-more-puzzle-websites-to-sharpen-your-programming-skills/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-24T14:59:27.867

我不知道有任何网站可以按照您所说的方式工作，但其中大部分只是简单的。您只需从标准输入读取并打印到标准输出。

*   [http://www.spoj.pl/](http://www.spoj.pl/)
*   [http://www.topcoder.com/](http://www.topcoder.com/)
*   [http://code.google.com/codejam/](http://code.google.com/codejam/)

此外，同一个站点的大多数问题都会以相同的方式工作，所以一旦你解决了第一个问题，你只需要使用它的框架来解决其他问题。

# visual-studio-2008 - CMake Fortran 和 Visual Studio

> ID：11633549
> 
> 赞同：3
> 
> 时间：2012-07-24T14:53:55.573
> 
> 标签：visual-studio-2008, cmake, fortran

我有一个带有 CMake 构建系统的项目。项目类型为 Fortran

```
project(ProjectName Fortran) 
```

并且 Fortran 编译器和源代码一样被识别。

尝试创建 Visual Studio 9 2008 时

```
$ cmake . -G "Visual Studio 9 2008" 
```

我得到了一个 C++ 项目的 Visual Studio 项目文件。这显然是错误的。我对项目中的 C/C++ 没有任何提示。我需要指定另一个命令行选项还是需要 CMakeLists.txt 中的其他信息？

**[更新]**

我在 CMake 的 /build 目录中找到了一些 .vfproj 文件（在相应的 .vcproj 文件旁边），其中包含 Visual Studio 也可以读取的 Fortran 项目文件。包含二进制目标和模块的目录中的文件。但在父目录中没有。

那么，为整个项目获取一个中央 Fortran Visual Studion 项目文件的诀窍是什么？我仍然很困惑......这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:45:56.797

您只显示 CMakeLists 文件中的一行代码：

```
project(ProjectName Fortran) 
```

你如何去添加对你的 fortran 源文件的引用？它应该是这样的：

```
add_library(MyFLib1 MyFLib1.f) 
```

或这个：

```
add_executable(MyFExe MyFExe.f) 
```

如果您添加仅基于 fortran 源文件的库和可执行文件，则 CMake 应为每个文件生成一个 *.vfproj 文件。

如果没有，那就是bug...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-18T10:58:17.850

如前所述`project (ProjectName Fortran)`应该工作。

另一种选择是`enable_language (Fortran)`。

# ruby-on-rails - Ruby on Rails：日期搜索

> ID：11633552
> 
> 赞同：0
> 
> 时间：2012-07-24T14:54:03.437
> 
> 标签：ruby-on-rails, ruby, search, date

快速提问。我正在尝试设置一个使用开始日期、结束日期和关键字搜索数据库的页面。如果我要搜索 19-07-2012，路径看起来像

search?utf8=%E2%9C%93&project%5Bstart_date%5D=19-07-2012&project%5Bend_date%5D=&%5Bstatus%5D=&keywords=

所有的结果都会显示出来。但是，当我搜索关键字时，搜索工作。我看不出我哪里错了。

```
<h1>Search</h1>

<%= form_tag search_path, method: :get do %>
Start Date :

<%#= text_field_tag :start_date, params[:start_date] %></br>

<div class="field">

<%= datepicker_input "project","start_date" %></br>
</div>

End Date :

<%#= text_field_tag :end_date, params[:end_date] %></br>
<%= datepicker_input "project","end_date" %></br>

Status :

<%= select(@projects, :status, Project.all.map {|p| [p.status]}.uniq, :prompt => "-Any-", :selected => params[:status]) %></br>

Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>

<%= submit_tag "Search", name: nil %>

<% end %> 
```

控制器：

```
def search

@project_search = Project.search(params[:start_date], params[:end_date], params[:keywords]).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

   @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

编辑：

当我使用字符“q”作为关键字进行搜索时，开始日期为 25-07-2012，sql 看起来像这样

```
Parameters: {"utf8"=>"✓", "project"=>{"start_date"=>"25-07-2012", "end_date"=>""}, "status"=>"", "keywords"=>"q"}
  Project Load (0.4ms)  SELECT "projects".* FROM "projects" 
   (0.2ms)  SELECT COUNT(*) FROM "projects" WHERE (client LIKE '%%' AND industry LIKE '%%' AND role LIKE '%%' AND tech LIKE '%%' AND business_div LIKE '%%' AND project_owner LIKE '%%' AND exception_pm LIKE '%%' AND status LIKE '%%' AND start_date LIKE '%%' AND end_date LIKE '%%' AND keywords LIKE '%q%') 
```

这似乎只搜索关键字“q”。当我删除关键字并保留日期时，sql 看起来像：

```
Parameters: {"utf8"=>"✓", "project"=>{"start_date"=>"25-07-2012", "end_date"=>""}, "status"=>"", "keywords"=>""}
  Project Load (0.3ms)  SELECT "projects".* FROM "projects" 
```

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:20:36.800

我已经解决了我自己的问题。我更改了 application.js 文件和搜索视图。

应用程序.js：

```
jQuery(function(){
    jQuery('#start_date').val("");
    jQuery('#start_date').datepicker({dateFormat: 'dd-mm-yy'});
});

jQuery(function(){
    jQuery('#end_date').val("");
    jQuery('#end_date').datepicker({dateFormat: 'dd-mm-yy'});
}); 
```

搜索视图：

```
Start Date :
<%= text_field_tag("start_date") %></br>

End Date :
<%= text_field_tag("end_date") %></br> 
```

我的应用程序现在搜索开始日期和结束日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:38:27.427

如果您的代码是正确的，您希望调用

```
Project.search(start_date, end_date, keywords) 
```

在您的示例中，参数进入

```
project: {
  start_date: "25-07-2012",
  end_date: ""
},
keywords: "q" 
```

但是你打电话

```
 Project.search(params[:start_date], params[:end_date], params[:keywords]) 
```

如果你的日志是正确的，你应该打电话

```
 Project.search(params[:project][:start_date], params[:project][:end_date], params[:keywords]) 
```

# graph - 找到覆盖图中所有链接所需的最小生成树数的上限

> ID：11633554
> 
> 赞同：1
> 
> 时间：2012-07-24T14:54:14.560
> 
> 标签：graph, graph-algorithm, spanning-tree

我的问题：

令 G(V,E) 为全连接图，其中 V 是节点集，E 是链接集。如果生成树按字典顺序排序，则覆盖图中所有链接所需的最小生成树数量的上限（最坏情况）是多少？

例如，对于 |V|=4，因此 |E|=6，G(V,E) 包含以下 16 个生成树（按字典顺序）；请注意，以不同方式标记链接可能会产生不同顺序的生成树。

1 2 3

1 2 4

1 2 6

1 3 4

1 3 5

1 3 6

1 4 5

1 5 6

2 3 4

2 3 5

2 4 5

2 4 6

2 5 6

3 4 6

3 5 6

4 5 6

在这种情况下，覆盖图中所有链接所需的最小生成树数将是 5 棵生成树（{1 2 3}、{1 2 4 }、{1 2 6}、{1 3 4}、{ 1 3 5}）。所以所有的链接都包含在这 5 棵生成树中。

计算小图的生成树的数量很容易，但我对较大的图有问题，例如|V|>4。

是否有任何公式可以计算生成树的上限以覆盖图中的所有链接？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:56:33.737

任何 MST 中都有 V-1 条边，总共有 (V)(V-1)/2 条边。所以下限是上限（V/2）。

我认为这也是一个确切的界限。

您应该能够找到在最后一步之前不重用其他边缘的 MST 组合。考虑找到一个 MST，删除那些边，并仍然保持简化图连接，以便可以嵌入新的 MST，而不会破坏连接性。

# web-applications - 仅查看了 1 个 div 的 WebApp

> ID：11633556
> 
> 赞同：0
> 
> 时间：2012-07-24T14:54:24.090
> 
> 标签：web-applications, html

我正在尝试创建一个 web 应用程序并四处搜索以查找教程...我找到了“jquery”并在查看代码时注意到，没有单个网站，只有一些创建单个网站的 div...这是怎么做的？当我创建一个带有 div 的网站时，它们位于一个网站上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:47:48.173

您需要做的是确定 url 中哈希标记之后的文本，并相应地显示/隐藏某些 div。

您可以使用 jQuery 轻松完成此操作。下面是我写的一个非常粗略的例子，但应该让你知道我在说什么。

**index.html#home**将显示“第 1 页的内容”

**index.html#about**将显示“来自第 2 页的内容”

```
<!DOCTYPE HTML>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
</head>
<body>

    <div id="home_content_div" class="content_divs">
        Content from page 1
    </div>
    <div id="about_content_div" class="content_divs">
        Content from page 2
    </div>

    <script>
         var identifier = window.location.hash;

         $(".content_divs").hide();
         if (identifier === "#home") {
             $("#home_content_div").show();
         }
         else if (identifier === "#about") {
             $("#about_content_div").show();
         }
    </script>

</body>
</html> 
```

# ios - iPhone 屏幕尺寸注意事项

> ID：11633561
> 
> 赞同：0
> 
> 时间：2012-07-24T14:54:36.557
> 
> 标签：ios

对不起，我觉得这将是非常基本的答案。

据我了解，iphone 屏幕是 320 x 480 点。

状态栏高 20 点。

这不是说你的工作空间应该是 460 点高吗？

只是当我拖出一个imageview时，即使状态栏可见，右边的面板说它是480点高。

另外，如何最好地允许顶部的额外栏（例如连接的个人热点），我相信他们会向下推屏幕？是否应该将所有图像设置为宽高比合适或其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:00:14.620

1）您可以在属性检查器中手动更改imageView的大小

2）当您将 imageView 拖到您的 xib 上时，即使有顶部导航栏，它也会自动填满整个屏幕 您可以手动更改大小 3）是的，所有对象都会自动设置为宽高比，因为 imageView 会自动调整大小

# python - 使用 Python 进行 USB 文件传输

> ID：11633562
> 
> 赞同：2
> 
> 时间：2012-07-24T14:54:39.333
> 
> 标签：python, usb

我需要读取存储在 USB 记忆棒上的文本文件。PyUSB 是我搜索 USB 设备所需要的，但我不明白如何在安装设备后访问该文件（在 Linux 和 Windows 上）。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:57:27.740

只需使用文件的绝对路径（例如`C:\text.txt`）。

要遍历文本文件的行，请使用

```
for line in open("C:\text.txt", "rU"):
    #do stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:46:16.393

在 Ubuntu 中，pendrive 在 /media 下，所以我使用了：

```
import os
from os.path import join, getsize
for root, dirs, files in os.walk('/media'):
    print root, "consumes",
    print sum(getsize(join(root, name)) for name in files),
    print "bytes in", len(files), "non-directory files" 
```

来自[http://docs.python.org/library/os.html#os.walk](http://docs.python.org/library/os.html#os.walk)

在 Windows 中，您可能必须尝试使用​​不同的驱动器号？

不需要 PyUSB。

# android - 应该为每个平台创建phonegap？

> ID：11633564
> 
> 赞同：0
> 
> 时间：2012-07-24T14:54:47.417
> 
> 标签：android, ios, mobile, cordova

phonegap 是用于移动开发的跨平台解决方案。我的问题是对于每个平台，我应该使用 phonegap 创建新项目并导入我的 html/js/css？还是有生成其他平台代码的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:03:00.763

据我所知，没有工具可以做到这一点。

您必须为要支持的所有设备使用项目模板，并为所有项目共享“www”文件夹。

这种方法的主要问题是您必须在每个设备的本机代码中实现所有更改……例如，我们必须更改项目中的起始页。

**编辑**

谢谢你的提示@PeterMmm，不知道这个=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:23:44.020

正如@PeterMmm 所提到的，PhoneGap 构建服务允许您在“云中”为所有受支持的平台进行构建。目前它不支持自定义插件，尽管我知道这是一个计划中的功能。因此，只要您只使用普通的 PhoneGap API 调用，您就可以使用构建服务。

# android - 如何在 android 的 eclipse 中创建 plist 文件？

> ID：11633569
> 
> 赞同：0
> 
> 时间：2012-07-24T14:55:00.893
> 
> 标签：android, plist

我是 Android 应用程序的新手，我想在资源文件夹中创建一个 plist 文件，我尝试创建 plist 文件，我花了 2 个小时，但我无法创建它，请帮助我。

谢谢

我试过了：

从资源中将新文件夹创建为“raw”，然后在 raw 中创建 xml 文件，但出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:01:34.183

Android 不使用 plist 文件，它们是 iOS/MacOS/OsX 的一个特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:39:13.837

Android 项目架构不使用 plist，您有 AndroidManifest.xml 来自定义您的应用程序，或者如果您想要资源只需在 yourProject/res 上创建一个文件并使用它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-27T18:35:19.137

我使用以下示例......来自来源：http: [//solutionforandroid.blogspot.com.br/2013/05/how-to-parse-plist-in-android-and-how.html](http://solutionforandroid.blogspot.com.br/2013/05/how-to-parse-plist-in-android-and-how.html)

```
public class ProductsPlistParsing {   
Context context;

   // constructor for  to get the context object from where you are using this plist parsing
    public ProductsPlistParsing(Context ctx) {

        context = ctx;
    }

    public List<HashMap<String, String>> getProductsPlistValues() {

       // specifying the  your plist file.And Xml ResourceParser is an event type parser for more details Read android source
        XmlResourceParser parser = context.getResources()
                .getXml(R.xml.products);

          // flag points to find key and value tags .
        boolean keytag = false;
        boolean valuetag = false;
        String keyStaring = null;
        String stringvalue = null;

        HashMap<String, String> hashmap = new HashMap<String, String>();
        List<HashMap<String, String>> listResult = new ArrayList<HashMap<String, String>>();
        int event;
        try {
            event = parser.getEventType();

             // repeting the loop at the end of the doccument 

                 while (event != parser.END_DOCUMENT) {

               switch (event) {
                       //use switch case than the if ,else statements  
                case 0:
                        // start doccumnt nothing to do
                       // System.out.println("\n" + parser.START_DOCUMENT
                       // + "strat doccument");
                      // System.out.println(parser.getName());
                    break;
                case 1:
                    // end doccument
                    // System.out
                    // .println("\n" + parser.END_DOCUMENT + "end doccument");
                    // System.out.println(parser.getName());
                    break;
                case 2:

                    if (parser.getName().equals("key")) {
                        keytag = true;
                        valuetag = false;
                    }
                    if (parser.getName().equals("string")) {
                        valuetag = true;
                    }

                    break;
                case 3:
                    if (parser.getName().equals("dict")) {
                        System.out.println("end tag");
                        listResult.add(hashmap);
                        System.out.println(listResult.size() + "size");
                        hashmap = null;
                        hashmap = new HashMap<String, String>();
                    }
                    break;
                case 4:
                    if (keytag) {
                        if (valuetag == false) {
                            // hashmap.put("value", parser.getText());
                            // System.out.println(parser.getText());
                            // starttag = false;
                            keyStaring = parser.getText();
                        }
                    }
                    if (valuetag && keytag) {
                        stringvalue = parser.getText();

                        hashmap.put(keyStaring, stringvalue);
                        // System.out.println(keyStaring);
                        // System.out.println(stringvalue);
                        valuetag = false;
                        keytag = false;
                        // System.out.println("this is hash map"
                        // + hashmap.get(keyStaring));
                        // Toast.makeText(getApplication(), keyStaring,
                        // Toast.LENGTH_SHORT).show();

                    }
                    break;
                default:
                    break;
                }
                event = parser.next();
            }
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
 //here you get the plistValues.
        return listResult;
    }
} 
```

# jdeveloper - 无法部署到独立 oc4j

> ID：11633573
> 
> 赞同：0
> 
> 时间：2012-07-24T14:55:09.130
> 
> 标签：jdeveloper, oc4j

我正在尝试将耳朵部署到 oc4j 独立服务器。我认为我已经成功部署它，因为操作成功完成而没有任何警告。现在要测试我想我必须将此网络应用程序绑定到某个网站。当我尝试绑定时，出现以下错误：

```
C:\oracle\JDEV2\j2ee\home>java -jar admin.jar ormi://127.0.0.1:22667 oc4jadmin w
elcome -bindWebApp appr_ear appr default-web-site appr
Jul 24, 2012 10:45:31 AM oracle.j2ee.rmi.RMIMessages EXCEPTION_ORIGINATES_FROM_T
HE_REMOTE_SERVER
WARNING: Exception returned by remote server: {0}
java.lang.ExceptionInInitializerError
        at org.apache.tiles.factory.TilesContainerFactory.createTilesContainer(T
ilesContainerFactory.java:197)
        at org.apache.tiles.factory.TilesContainerFactory.createContainer(TilesC
ontainerFactory.java:163)
        at org.apache.tiles.web.startup.TilesListener.createContainer(TilesListe
ner.java:90)
        at org.apache.struts2.tiles.StrutsTilesListener.createContainer(StrutsTi
lesListener.java:66)
        at org.apache.tiles.web.startup.TilesListener.contextInitialized(TilesLi
stener.java:57)
        at com.evermind.server.http.HttpApplication.initDynamic(HttpApplication.
java:1140)
        at com.evermind.server.http.HttpApplication.<init>(HttpApplication.java:
741)
        at com.evermind.server.ApplicationStateRunning.getHttpApplication(Applic
ationStateRunning.java:431)
        at com.evermind.server.Application.getHttpApplication(Application.java:5
86)
        at com.evermind.server.http.HttpSite$HttpApplicationRunTimeReference.cre
ateHttpApplicationFromReference(HttpSite.java:1987)
        at com.evermind.server.http.HttpSite$HttpApplicationRunTimeReference.<in
it>(HttpSite.java:1906)
        at com.evermind.server.http.HttpSite.addHttpApplication(HttpSite.java:16
03)
        at oracle.oc4j.admin.internal.WebApplicationBinder.bindWebApp(WebApplica
tionBinder.java:302)
        at com.evermind.server.administration.DefaultApplicationServerAdministra
tor.bindWebApp(DefaultApplicationServerAdministrator.java:424)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at com.evermind.server.rmi.RmiMethodCall.run(RmiMethodCall.java:53)
        at com.evermind.util.ReleasableResourcePooledExecutor$MyWorker.run(Relea
sableResourcePooledExecutor.java:303)
        at java.lang.Thread.run(Thread.java:595)
Caused by: org.apache.commons.logging.LogConfigurationException: org.apache.comm
ons.logging.LogConfigurationException: No suitable Log constructor [Ljava.lang.C
lass;@72e694 for org.apache.commons.logging.impl.Log4JLogger (Caused by java.lan
g.NoClassDefFoundError: org/apache/log4j/Category) (Caused by org.apache.commons
.logging.LogConfigurationException: No suitable Log constructor [Ljava.lang.Clas
s;@72e694 for org.apache.commons.logging.impl.Log4JLogger (Caused by java.lang.N
oClassDefFoundError: org/apache/log4j/Category))
        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactory
Impl.java:543)
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactory
Impl.java:235)
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactory
Impl.java:209)
        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
        at org.apache.tiles.impl.BasicTilesContainer.<clinit>(BasicTilesContaine
r.java:78)
        ... 21 more
Caused by: org.apache.commons.logging.LogConfigurationException: No suitable Log
 constructor [Ljava.lang.Class;@72e694 for org.apache.commons.logging.impl.Log4J
Logger (Caused by java.lang.NoClassDefFoundError: org/apache/log4j/Category)
        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor(LogF
actoryImpl.java:413)
        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactory
Impl.java:529)
        ... 25 more
Caused by: java.lang.NoClassDefFoundError: org/apache/log4j/Category
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2328)
        at java.lang.Class.getConstructor0(Class.java:2640)
        at java.lang.Class.getConstructor(Class.java:1629)
        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor(LogF
actoryImpl.java:410)
        ... 26 more
Error: null 
```

在执行此命令之前，我尝试如下部署： C:\oracle\JDEV2\j2ee\home>java -jar admin.jar ormi://127.0.0.1:22667 oc4jadmin w elcome -deploy -file C:\RTTTLea\ dist\appr.ear -deploymentName appr_ear

看起来部署是成功的。

```
[ 2012-07-24 10:49:40.170 EDT ] Application Deployer for appr_ear STARTS.
[ 2012-07-24 10:49:40.170 EDT ] Stopping application : appr_ear
[ 2012-07-24 10:49:40.201 EDT ] Stopped application : appr_ear
[ 2012-07-24 10:49:40.201 EDT ] Undeploy previous deployment
[ 2012-07-24 10:49:40.935 EDT ] Initialize C:\oracle\JDEV2\jdev\extensions\oracl
e.adfp.seededoc4j.10.1.3\j2ee\home\applications\appr_ear.ear begins...
[ 2012-07-24 10:49:44.326 EDT ] Initialize C:\oracle\JDEV2\jdev\extensions\oracl
e.adfp.seededoc4j.10.1.3\j2ee\home\applications\appr_ear.ear ends...
[ 2012-07-24 10:49:44.326 EDT ] Starting application : appr_ear
[ 2012-07-24 10:49:44.326 EDT ] Initializing ClassLoader(s)
[ 2012-07-24 10:49:44.326 EDT ] Initializing EJB container
[ 2012-07-24 10:49:44.326 EDT ] Loading connector(s)
[ 2012-07-24 10:49:44.342 EDT ] Starting up resource adapters
[ 2012-07-24 10:49:44.342 EDT ] Initializing EJB sessions
[ 2012-07-24 10:49:44.342 EDT ] Committing ClassLoader(s)
[ 2012-07-24 10:49:44.342 EDT ] Initialize appr begins...
[ 2012-07-24 10:49:44.357 EDT ] Initialize appr ends...
[ 2012-07-24 10:49:44.357 EDT ] Started application : appr_ear
[ 2012-07-24 10:49:44.357 EDT ] Application Deployer for appr_ear COMPLETES. Ope
ration time: 4187 msecs 
```

同样在部署之后，我可以在 View -> Connections -> Application Server 的应用程序列表中看到我的应用程序，这意味着部署成功。现在我想打开主页进行验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:34:44.550

java.lang.NoClassDefFoundError: org/apache/log4j/Category 似乎表明您的 EAR 文件缺少 log4j 的 jar 文件，或者您的服务器中的 log4j 版本错误。

# iphone - iPhone - 敲定苹果模糊的“VerificationController.m”

> ID：11633577
> 
> 赞同：6
> 
> 时间：2012-07-24T14:55:17.180
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试实现 Apple 发布的新[VerificationController.m](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html)类，以解决应用内购买欺诈问题。

作为 Apple 发布的所有内容，这是一份更加模糊、不完整和糟糕的解释文档，其中包含许多无法被所有人规避/理解的空白和未知数。

我正在尝试实现它，但在代码末尾我们看到这四种方法：

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
#warning Replace this method.
    return nil;
}

- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length
{
#warning Replace this method.
    return nil;
}

#warning Implement this function.
char* base64_encode(const void* buf, size_t size)
{ return NULL; }

#warning Implement this function.
void * base64_decode(const char* s, size_t * data_len)
{ return NULL; } 
```

您可以看到 Apple 在代码末尾懒于实现 C 函数。由于我的 C/C++ 能力很差，我看到我需要在 C/C++ 中实现这两个函数，并且它们必须返回 char 和 void (???)。其他人已经在 SO 上发布了执行此操作的例程，但他们要么在 Objective-C 中，要么不返回 chars 和 void (??)。

**注意：这是我遇到的另一个问题：如果 Apple 以这种形式使用方法，它如何返回 void？**

```
uint8_t *purchase_info_bytes = base64_decode([purchase_info_string cStringUsingEncoding:NSASCIIStringEncoding],                                                 &purchase_info_length); 
```

它不应该返回 uint8_t 吗？

**注意 2：我遇到的另一个问题是苹果说 base64_encode 是必需的，但它没有用于他们提供的代码。我认为他们在吸毒，或者我的 C/C++ 知识真的很臭。**

所以，回到我的第一个问题。有人可以发布/指向一个可以完成符合声明的方法 base64_encode 和 base64_decode 要求的工作的方法吗？请不要发布与 Apple 提出的这些要求不兼容的 Objective-c 方法。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T04:32:38.957

该***解决方案***应该非常简单，其中包括填充缺失信息的所有方法。在沙盒中经过测试和功能。

```
//  single base64 character conversion
static int POS(char c)
{
    if (c>='A' && c<='Z') return c - 'A';
    if (c>='a' && c<='z') return c - 'a' + 26;
    if (c>='0' && c<='9') return c - '0' + 52;
    if (c == '+') return 62;
    if (c == '/') return 63;
    if (c == '=') return -1;

    [NSException raise:@"invalid BASE64 encoding" format:@"Invalid BASE64 encoding"];
    return 0;
}

- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
    return [NSString stringWithUTF8String:base64_encode(input, (size_t)length)];
}

- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length
{
    size_t retLen;
    uint8_t *retStr = base64_decode([input UTF8String], &retLen);
    if (length)
        *length = (NSInteger)retLen;
    NSString *st = [[[NSString alloc] initWithBytes:retStr
                                             length:retLen
                                           encoding:NSUTF8StringEncoding] autorelease];
    free(retStr);    // If base64_decode returns dynamically allocated memory
    return st;
}

char* base64_encode(const void* buf, size_t size)
{
    static const char base64[] =  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    char* str = (char*) malloc((size+3)*4/3 + 1);

    char* p = str;
    unsigned char* q = (unsigned char*) buf;
    size_t i = 0;

    while(i < size) {
        int c = q[i++];
        c *= 256;
        if (i < size) c += q[i];
        i++;

        c *= 256;
        if (i < size) c += q[i];
        i++;

        *p++ = base64[(c & 0x00fc0000) >> 18];
        *p++ = base64[(c & 0x0003f000) >> 12];

        if (i > size + 1)
            *p++ = '=';
        else
            *p++ = base64[(c & 0x00000fc0) >> 6];

        if (i > size)
            *p++ = '=';
        else
            *p++ = base64[c & 0x0000003f];
    }

    *p = 0;

    return str;
}

void* base64_decode(const char* s, size_t* data_len_ptr)
{
    size_t len = strlen(s);

    if (len % 4)
        [NSException raise:@"Invalid input in base64_decode" format:@"%d is an invalid length for an input string for BASE64 decoding", len];

    unsigned char* data = (unsigned char*) malloc(len/4*3);

    int n[4];
    unsigned char* q = (unsigned char*) data;

    for(const char*p=s; *p; )
    {
        n[0] = POS(*p++);
        n[1] = POS(*p++);
        n[2] = POS(*p++);
        n[3] = POS(*p++);

        if (n[0]==-1 || n[1]==-1)
            [NSException raise:@"Invalid input in base64_decode" format:@"Invalid BASE64 encoding"];

        if (n[2]==-1 && n[3]!=-1)
            [NSException raise:@"Invalid input in base64_decode" format:@"Invalid BASE64 encoding"];

        q[0] = (n[0] << 2) + (n[1] >> 4);
        if (n[2] != -1) q[1] = ((n[1] & 15) << 4) + (n[2] >> 2);
        if (n[3] != -1) q[2] = ((n[2] & 3) << 6) + n[3];
        q += 3;
    }

    // make sure that data_len_ptr is not null
    if (!data_len_ptr)
        [NSException raise:@"Invalid input in base64_decode" format:@"Invalid destination for output string length"];

    *data_len_ptr = q-data - (n[2]==-1) - (n[3]==-1);

    return data;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:12:57.503

`NSString`这是to的 base 64 编码函数`NSString`：

```
+(NSString *) encodeString:(NSString *)inString
{
    NSData *data = [inString dataUsingEncoding:NSUTF8StringEncoding];
    //Point to start of the data and set buffer sizes
    int inLength = [data length];
    int outLength = ((((inLength * 4)/3)/4)*4) + (((inLength * 4)/3)%4 ? 4 : 0);
    const char *inputBuffer = [data bytes];
    char *outputBuffer = malloc(outLength);
    outputBuffer[outLength] = 0;

    //64 digit code
    static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    //start the count
    int cycle = 0;
    int inpos = 0;
    int outpos = 0;
    char temp;

    outputBuffer[outLength-1] = '=';
    outputBuffer[outLength-2] = '=';

    while (inpos < inLength){
        switch (cycle) {
            case 0:
                outputBuffer[outpos++] = Encode[(inputBuffer[inpos]&0xFC)>>2];
                cycle = 1;
                break;
            case 1:
                temp = (inputBuffer[inpos++]&0x03)<<4;
                outputBuffer[outpos] = Encode[temp];
                cycle = 2;
                break;
            case 2:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xF0)>> 4];
                temp = (inputBuffer[inpos++]&0x0F)<<2;
                outputBuffer[outpos] = Encode[temp];
                cycle = 3;                  
                break;
            case 3:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xC0)>>6];
                cycle = 4;
                break;
            case 4:
                outputBuffer[outpos++] = Encode[inputBuffer[inpos++]&0x3f];
                cycle = 0;
                break;                          
            default:
                cycle = 0;
                break;
        }
    }

    NSString *pictemp = [NSString stringWithUTF8String:outputBuffer];
    free(outputBuffer); 

    return pictemp;
} 
```

`NSString`这是to的 base 64 解码函数`NSString`：

```
+(NSString *) decodeString:(NSString *)inString
{
    const char* string = [inString cStringUsingEncoding:NSASCIIStringEncoding];

    NSInteger inputLength = inString.length;

    static char decodingTable[128];

    static char encodingTable[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    for (NSInteger i = 0; i < 128; i++) {
        decodingTable[encodingTable[i]] = i;
    }

    if ((string == NULL) || (inputLength % 4 != 0)) {
        return nil;
    }

    while (inputLength > 0 && string[inputLength - 1] == '=') {
        inputLength--;
    }

    NSInteger outputLength = inputLength * 3 / 4;
    NSMutableData* data = [NSMutableData dataWithLength:outputLength];
    uint8_t* output = data.mutableBytes;

    NSInteger inputPoint = 0;
    NSInteger outputPoint = 0;
    while (inputPoint < inputLength) {
        char i0 = string[inputPoint++];
        char i1 = string[inputPoint++];
        char i2 = inputPoint < inputLength ? string[inputPoint++] : 'A'; /* 'A' will decode to \0 */
        char i3 = inputPoint < inputLength ? string[inputPoint++] : 'A';

        output[outputPoint++] = (decodingTable[i0] << 2) | (decodingTable[i1] >> 4);
        if (outputPoint < outputLength) {
            output[outputPoint++] = ((decodingTable[i1] & 0xf) << 4) | (decodingTable[i2] >> 2);
        }
        if (outputPoint < outputLength) {
            output[outputPoint++] = ((decodingTable[i2] & 0x3) << 6) | decodingTable[i3];
        }
    }

    NSLog(@"%@",data);

    NSString *finalString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];

    return finalString;
} 
```

这些是我前一段时间在互联网上搜索它们时在互联网上各个地方找到的示例拼凑而成的。它们可能对您来说更容易实施。我刚刚创建了一个`Base64`类并将这些方法放入其中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T17:25:07.950

以下是贾斯汀答案的 C 包装器：

```
char* base64_encode(const void* buf, size_t size)
{ 
    NSData* data = [NSData dataWithBytesNoCopy:(void*)buf length:size];
    NSString* string = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    return [[_Class_ encode:string] UTF8String];
}

void* base64_Decode (const char* s, size_t* data_len)
{
    NSString* result = [_Class_ decode:[NSString stringWithCString:s encoding:NSASCIIStringEncoding]];
    *data_len = result.length;
    return [result UTF8String];
} 
```

其中*Class*是包含 Justin 函数的类。

# ssas - 在 SSMS“浏览模式”中展开和折叠后，子菜单仍然可见。

> ID：11633579
> 
> 赞同：0
> 
> 时间：2012-07-24T14:55:21.550
> 
> 标签：ssas, ssms, cube

我在 SSAS 中部署了一个多维数据集并在 SSMS 中浏览它。我有几个层次结构，我展开这些，例如：产品类型 - 产品子类型 - 产品。

当我完成查看这些子层次结构时，我在顶部层次结构上按“减号”，所有较低的细节都消失（应该如此），但不是标题，例如产品子类型。当我制作立方体时，我在哪里可以改变这个？或者它是 SSMS 中的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:35:09.573

似乎我必须将其拖放到外面才能摆脱它。

# android - 尝试重新打开一个已经关闭的对象：java.lang.IllegalStateException:?

> ID：11633581
> 
> 赞同：15
> 
> 时间：2012-07-24T14:55:25.980
> 
> 标签：android, android-activity, illegalstateexception, android-cursor

我知道这个问题在 SO 中已经问了很多次，但我无法弄清楚我的确切问题。

我正在使用以下代码从数据库（表 1）中获取数据并根据检索值更新另一个表 2。它在某些 android 版本中运行良好，但是当我使用 Android 4.0.3 进行测试时。我得到这个`java.lang.IllegalStateException:?.attempt to re-open an already-closed object`。`sum_cursor.moveToNext();`

**我在 AsyncTask 中使用此代码。**

```
 /** Sum of total matched values*/
            Cursor sum_cursor = db.gettotalMatchvalue(this);
             if(sum_cursor!=null)
             {
                 sum_cursor.moveToFirst();
                 for(int j=0; j<sum_cursor.getCount();j++)
                 {    
                     float totalmatchedscore = sum_cursor.getInt(0);
                     float totalingredients = Float.parseFloat(sum_cursor.getString(sum_cursor.getColumnIndex(APPDatabase.CK_TOTALINCREDIENTS)));
                     /**average = totalscore/totalingredients*/
                     double average = totalmatchedscore/totalingredients;
                     int id = Integer.parseInt(sum_cursor.getString(sum_cursor.getColumnIndex(APPDatabase.CK_ID))); 

                 db.updateAverage(id, average); 
                 sum_cursor.moveToNext(); //Here is the problem
                 }  
             }   
             db.close(); 
```

我的更新方法编码

```
/** Update average */
public void updateAverage(int id,double average)
{
    SQLiteDatabase db = getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(CK_FINALVALUE,average);
    db.update(TABLE, values,CK_ID+" = "+id , null);   
} 
```

我在这里做错了什么？

我知道你们很多人都遇到过这种情况。你们能帮帮我吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T08:45:04.123

迭代查询结果时不能更新表。这有充分的理由；如果您添加的数据会导致您正在迭代的数据发生变化怎么办？您的光标不会返回有效数据。

试图将数据存储回表中`updateAverage()`会导致问题。您应该只记住循环期间的平均值，然后在完成对光标的循环后在最后更新一次。

为了进一步解释您得到的确切错误：作为安全措施，插入新数据的行为导致数据库关闭所有当前打开的游标。所以当你`sum_cursor.moveToNext()`在更新平均值后调用时，游标有点惊讶地发现它已经被关闭了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:04:44.583

如果你注释掉`db.updateAverage(id, average)`怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T11:04:40.160

您可以使用纯 SQL 实现您的目标，从架构的角度来看，它更快更好，因为所有逻辑都在一个 SQL 事务中

```
REPLACE INTO table_where_to_put  SELECT *, (totalmatchedscore/totalingredients) as average  FROM table_with_input_data 
```

使用[替换](http://www.sqlite.org/lang_insert.html)或[更新](http://www.sqlite.org/lang_update.html)

# c# - 通过 ADO.net 安全地插入 MS Access DB

> ID：11633586
> 
> 赞同：0
> 
> 时间：2012-07-24T14:55:41.563
> 
> 标签：c#, ms-access, ado.net

我对 DB 编程真的很陌生，我正在整理一个使用 ado.net 与 MS Access 数据库交互的小测试项目。我在网上四处寻找“最佳实践”的方法，但找不到我信任的最新答案。

我只想要通过 ado.net 插入访问数据库的“现代”方式，同时防止 SQL 注入攻击。如果还有什么我应该记住的，也请告诉我。

哦，顺便说一句，我知道有比 MS Access 更好的选择。但是，我在午休时间和其他东西的工作中这样做，我的雇主希望我不要用像这样的愚蠢的 DB 把 SQL 服务器空间弄得乱七八糟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:02:14.787

你可以试试[Dapper](http://code.google.com/p/dapper-dot-net/)。这是一种针对任何实现[IDbConnection](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.aspx)的东西执行任意 SQL 的方法，这种方式可以避免 SQL 注入攻击，并具有漂亮、干净、现代的界面。

如果做不到这一点，只需使用[`OleDbCommand.Parameters.AddWithValue("fieldname", yourobj);`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparametercollection.addwithvalue.aspx)(或 OdbcCommand 等效项。您的查询需要包含问号作为参数占位符。对于 Access，您需要按照字段在 SQL 查询中出现的顺序将参数添加到参数集合中，例如这：

**选择**

```
string sql = "select * from mytable where MyField LIKE ? and MyOtherField = ?";

// Dapper

using (OleDbConnection dbConn = new OleDbConnection("your connection string))
{
    dbConn.Open();
    var result = dbConn.Query(sql, new { MyField = "some value", MyOtherField = 3 });

    foreach (dynamic myrow in result)
    {
        // you can get at your table rows using myrow.MyField, myrow.SomeOtherField etc
        // To avoid myrow being dynamic, call dbConn.Query<T> where T is some type you 
        // define that matches your table definition
    }
}

// The "old-fashioned" way

using (OleDbConnection dbConn = new OleDbConnection("your connection string))
using (OleDbCommand dbCmd = dbConn.CreateCommand())
{
    dbConn.Open();
    dbCmd.CommandText = sql;
    dbCmd.Parameters.AddWithValue("MyField", "some value"));
    dbCmd.Parameters.AddWithValue("MyOtherField", 3));

    OleDbDataReader reader = dbCmd.ExecuteReader();
    while (reader.Read())
    {
        string myfield = reader["myfield"] == DBNull.Value ? null : (string)reader["myfield"];

        int SomeOtherField = reader["someotherfield"] == DBNull.Value ? 0 : (int)reader["someotherfield"];
    }
} 
```

**插入**

```
string sql = "insert into mytable (MyField, MyOtherField) values (?, ?)";

// Dapper

using (OleDbConnection dbConn = new OleDbConnection("your connection string))
{
    dbConn.Open();
    dbConn.Execute(sql, new { MyField = "some value", MyOtherField = 3 });
}

// The "old-fashioned" way

using (OleDbConnection dbConn = new OleDbConnection("your connection string))
using (OleDbCommand dbCmd = dbConn.CreateCommand())
{
    dbConn.Open();
    dbCmd.CommandText = sql;
    dbCmd.Parameters.AddWithValue("MyField", "some value"));
    dbCmd.Parameters.AddWithValue("MyOtherField", 3));

    dbCmd.ExecuteNonQuery(sql);
} 
```

如果我没记错的话，在编写将数据从对象移入和移出数据库的代码时，Access 对数字类型也非常挑剔。您需要确保您正在转换为完全正确的类型。

# image - 使用 nginx 代理外部图像

> ID：11633587
> 
> 赞同：3
> 
> 时间：2012-07-24T14:55:45.590
> 
> 标签：image, proxy, nginx

有没有办法用 nginx 代理外部图像而无需在本地下载和存储它们？即`URI`像这样将图像传递给我的代理服务器：

```
`http://myproxydomain.com/http://example.com/image.jpg` 
```

并将其包含在我网站上图像`URI`的`src`属性中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:52:02.407

是的——这是可能的：

```
 merge_slashes off;

    location ~ /(?<r>http://.*) {
        resolver 127.0.0.1;
        proxy_pass $r;
    } 
```

你是否应该这样做是另一回事。拥有`merge_slashes off`可能不是一个好主意。

# php - 从 iPhone 应用程序上传图像到服务器 PHP 脚本

> ID：11633589
> 
> 赞同：0
> 
> 时间：2012-07-24T14:55:49.397
> 
> 标签：php, iphone, objective-c, ios, xcode

我正在尝试使用以下代码将两个图像上传到服务器

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    question = [defaults objectForKey:@"question"];
    userID = [defaults objectForKey:@"userID"];
    userName = [defaults objectForKey:@"firstName"];
    lastName = [defaults objectForKey:@"lastname"];

    NSData *thisImage = [defaults dataForKey:@"thisImage"];
    NSData *thatImage = [defaults dataForKey:@"thatImage"];

    NSString *numbVotes = [defaults objectForKey:@"votes"];

    NSURL *aUrl = [NSURL URLWithString:@"http://myurl/url.php"];

    NSMutableURLRequest *urlrequest = [NSMutableURLRequest requestWithURL:aUrl
                                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                          timeoutInterval:60.0];

    [urlrequest setHTTPMethod:@"POST"];

    NSString *postString = [NSString stringWithFormat: @"user_id=%@&user=%@&question=%@&required_votes=%@", userID, userName, question, numbVotes];

    connection = [[NSURLConnection alloc] initWithRequest:urlrequest delegate:self startImmediately:NO];

    [connection scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    [connection start];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [urlrequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

    // now lets create the body of the post

    NSMutableData *image1 = [NSMutableData dataWithData:thisImage];

    [image1 appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

  //  [image1 appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"ipodfile.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [image1 appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [image1 appendData:[NSData dataWithData:thisImage]];

    [image1 appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    NSMutableData *image2 = [NSMutableData dataWithData:thatImage];

    [image2 appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

   // [image2 appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"ipodfile.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [image2 appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [image2 appendData:[NSData dataWithData:thisImage]];

    [image2 appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // setting the body of the post to the reqeust

    [urlrequest setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

    [urlrequest setHTTPBody:image1];

    [urlrequest setHTTPBody:image2];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:urlrequest returningResponse:nil error:nil];

    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",returnString);

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:urlrequest queue:queue 
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

                               if ([data length] >0 &&

                                   error == nil){

                                   html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

                                   dataRec = [[NSMutableData alloc] initWithData:data];

                                   NSString *string = [[NSString alloc] initWithData:dataRec encoding:NSUTF8StringEncoding];

                                   NSLog(@"HTML = %@", string);
                               }
                               else if ([data length] == 0 && error == nil){

                                   NSLog(@"Nothing was downloaded here.");
                               }
                               else if (error != nil){

                                   NSLog(@"Error happened here = %@", error);
                               }
                           }]; 
```

但是我总是上传失败。

这是服务器上使用的 php 脚本。

```
<?php
include_once('clsData.php');

$oData = new clsData();
$dbconn = $oData->dbconn;

$user_id= trim($_POST["user_id"]);
$user_names = trim($_POST['user']);
$question= trim($_POST["question"]);
$required_votes= trim($_POST["required_votes"]);

$success=0;
$error=0;
$ctime= $user_id . "_" . (microtime(true)*10000);
/////////////// for this image

$target_dir = "uploads/";

 $target_path_this = $target_dir . $ctime."_this.jpg"; 

if(move_uploaded_file($_FILES['image_this']['tmp_name'], $target_path_this)) {
   $success++;
} else{

    echo json_encode(array ('value'=>"error",'label'=>"Failed to upload This file!"));
    return;
}

/////////////////////////////for that image

$target_path = "uploads/";
  $target_path = $target_path . $ctime."_that.jpg"; //basename( $_FILES['image_that']['name']); 

if(move_uploaded_file($_FILES['image_that']['tmp_name'], $target_path)) {
      $success++;
} else{
    echo json_encode(array ('value'=>"error",'label'=>"Failed to upload That file!"));
   return;
}

$sql = "
    INSERT INTO `thisthat_questions` (
        user_id,
        user,
        required_votes,
        question,
        image_this,
        image_that
    ) VALUES (
        " . $user_id . ",
        '" . $user_names . "',
        " . $required_votes . ",
        '" . $question . "',
        '" . $ctime."_this.jpg" . "',
        '" . $ctime."_that.jpg" . "'
    )"; 

if($result = mysql_query($sql,$dbconn))
{
     $success++;
} 
else 
{
    echo json_encode(array ('value'=>"error",'label'=>"Database inser failed!"));
   return;
} 

 echo json_encode(array ('value'=>"success",'label'=>"Asked Question!"));

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:22:15.287

您调用`[urlrequest setHTTPBody:...]`3 次，每次调用都使前一次无效。也许尝试连接你的数据，`setHTTPBody`只调用一次......

此外，您正在进行同步调用`+[NSUrlConnection sendSynchronousRequest:returningResponse:error:]`（没有`NSURLResponse **`参数 - 这可能会让您对发生的事情有所了解），然后是异步调用 ( `sendAsynchronousRequest:queue:completionHandler:`)

# wordpress - 在 Wordpress 中设置多级菜单样式

> ID：11633590
> 
> 赞同：1
> 
> 时间：2012-07-24T14:55:50.830
> 
> 标签：wordpress

我有一个从这个*PHP*函数返回的*多级*菜单（带有嵌套*的 Sub-Menu ）：*

 *> wp_nav_menu(array('menu' => 'Category'));

我想为每个第一级添加一个*“第一级”*类，为每个第二级添加一个*“第二级”* ......等等......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:28:03.870

您不需要添加自己的类，因为 wp_nav_menu 生成的 HTML 结构允许您将 CSS 应用到每个级别，而无需额外的类。

这是一个演示链接；

[http://www.wpbeginner.com/wp-themes/how-to-style-wordpress-navigation-menus/](http://www.wpbeginner.com/wp-themes/how-to-style-wordpress-navigation-menus/)

它在 css 中有注释，解释了选择器用于样式的级别；*

# python - 如何在 Python 中应用修改器，创建新网格？

> ID：11633595
> 
> 赞同：3
> 
> 时间：2012-07-24T14:55:57.023
> 
> 标签：python, blender

假设我有一个 bpy.types.Object 包含一个 bpy.types.Mesh 数据字段；如何应用与对象关联的修改器之一，以获得可能包含在新 bpy.types.Object 中的新 bpy.types.Mesh，从而使原始场景保持不变？

我有兴趣在将顶点数据导出为我的自定义格式之前应用 EdgeSplit 修改器；我想这样做的原因是让 Blender 自动透明地复制两个方向非常不同的面共享的顶点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T15:48:06.487

还有另一种方法，似乎更适合自定义导出器：调用`to_mesh`要导出的对象的方法。它为您提供了应用了所有修改器的对象网格的副本。像这样使用它：

```
mesh = your_object.to_mesh(scene = bpy.context.scene, apply_modifiers = True, settings = 'PREVIEW') 
```

然后使用返回的网格将您需要的任何数据写入自定义格式。原始对象（包括其数据）将保持不变，导出完成后可以丢弃返回的网格。

查看[Blender Python API 文档](http://www.blender.org/documentation/blender_python_api_2_63_14/bpy.types.Object.html?highlight=object#bpy.types.Object.to_mesh)以获取更多信息。

这种方法可能存在一个问题。如果您定义了多个，我不确定您是否可以使用它仅应用一个特定的修饰符。它似乎适用于所有这些，因此在您的情况下可能没有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-26T19:39:53.447

我想你正在使用 2.6 API。

```
bpy.ops.object.modifier_apply (modifier='EdgeSplit') 
```

...将其边缘分割修改器应用于当前活动的对象。请注意，它是**对象**.modifier_apply (...)

您可以使用

```
bpy.context.scene.objects.active = my_object 
```

设置活动对象。请注意，它是**对象**.active。

另外，检查[modifier_apply 文档](http://www.blender.org/documentation/blender_python_api_2_63_14/bpy.ops.object.html#bpy.ops.object.modifier_apply)。很多事情你只能用 bpy.ops.* 来做。

**编辑：**刚刚看到您需要一个新的（可能是临时的）网格对象。做就是了

```
bpy.ops.object.duplicate() 
```

在您设置活动对象之后，新的活动对象将成为副本（它保留任何添加的修改器；如果它是一个名为“Cube”的对象，它会复制它，使其处于活动状态并将其命名为“Cube.001”）然后您可以应用修改器。希望这足够清楚:)

**编辑：**请注意，[bpy.ops.object.duplicate()](http://www.blender.org/documentation/blender_python_api_2_57_release/bpy.ops.object.html#bpy.ops.object.duplicate)使用的不是**活动**对象，而是**selected**。为确保选择并复制正确的对象，请执行此操作

```
bpy.ops.object.select_all(action = 'DESELECT')
object.select = True 
```

# jquery - 点击时如何重新绑定jcarouselite？

> ID：11633603
> 
> 赞同：0
> 
> 时间：2012-07-24T14:56:21.660
> 
> 标签：jquery

这是我第一次发帖，希望大家多多谅解！！

当我动态绑定它时，我遇到了 jcarousellite 的问题。

我的标记如下所示：

```
 <div class=outside1>
<ul>
<li>something here</li>
<li>something here</li>
<li>something here</li>
<li>something here</li>
</ul>
</div>
 <div class=outside2>
<ul>
<li>something here</li>
<li>something here</li>
<li>something here</li>
<li>something here</li>
</ul>
</div>
 <div class=outside3>
<ul>
<li>something here</li>
<li>something here</li>
<li>something here</li>
<li>something here</li>
</ul>
</div>

<div class="nav">
<a class="page1"></a>
<a class="page2"></a>
<a class="page3"></a>
</div>

<script type="text/javascript">  
    jQuery(window).load(function () {        
                jQuery(function () {
                    jQuery("div.outside1").jCarouselLite({                                 
                        mouseWheel: true,
                        //auto: 800,
                        speed: 1000,
                        easing: "easeOutBounce",
                        visible: 7
                    });
           });
jQuery('.page1').click(function () {
        setTimeout(function () {
                jQuery("div.outside1").jCarouselLite({                                    
                        mouseWheel: true,
                        //auto: 800,
                        speed: 1000,
                        easing: "easeOutBounce",
                        visible: 7
                    });                              
            }, 5000);
  });
jQuery('.page2').click(function () {
        setTimeout(function () {
                jQuery("div.outside1").jCarouselLite({                                    
                        mouseWheel: true,
                        //auto: 800,
                        speed: 1000,
                        easing: "easeOutBounce",
                        visible: 7
                    });                              
            }, 5000);
  });
jQuery('.page3').click(function () {
        setTimeout(function () {
                jQuery("div.outside1").jCarouselLite({                                    
                        mouseWheel: true,
                        //auto: 800,
                        speed: 1000,
                        easing: "easeOutBounce",
                        visible: 7
                    });                              
            }, 5000);
  });
    });
    </script> 
```

我的问题是当我单击 page1 ,page2,page3 来更改哪个 div 元素将绑定到 jcarouselite 但它不起作用。我希望你能帮助我。谢谢！！

我忘了说这是我使用的插件：[http ://www.gmarwaha.com/jquery/jcarousellite/](http://www.gmarwaha.com/jquery/jcarousellite/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:25:53.047

该插件不是为一页多实例制作的。但是您可以尝试像这样隐藏其他的：http: [//jsfiddle.net/kannix/B2PfG/1/](http://jsfiddle.net/kannix/B2PfG/1/)

# javascript - 如何使用 jquery 从父元素中删除文本（不删除内部元素）

> ID：11633610
> 
> 赞同：21
> 
> 时间：2012-07-24T14:56:47.367
> 
> 标签：javascript, jquery

想象一下，我有类似以下的内容（修改自[http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)）

```
<div id="foo">
    first
    <div id="bar1">
        jumps over a lazy dog!
    </div>
    second
    <div id="bar2">
        another jumps over a lazy dog!
    </div>
    third
</div> 
```

如何在不影响任何子元素的情况下从 DOM 中仅删除（仅文本）“第一”、“第二”和“第三”。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-24T15:01:35.270

如果要删除所有可以使用的子文本节点[`.contents()`](http://api.jquery.com/contents/)，然后[`.filter()`](http://api.jquery.com/filter/)将匹配集减少为仅文本节点：

```
$("#foo").contents().filter(function () {
     return this.nodeType === 3; 
}).remove();​​​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/UK9xU/)。

**注意**：这将保留子元素上的任何现有事件处理程序，使用`.html()`不会做回答（因为元素已从 DOM 中删除并重新添加）。

**注意 2**：一些链接问题中的答案与我在此处的答案中显示的代码相似，但它们使用`nodeType`常量（例如`return this.nodeType === Node.TEXT_NODE`）。这是不好的做法，因为低于版本 9 的 IE 没有实现该`Node`属性。使用整数更安全（可以在[DOM level 2 spec](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247)中找到）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-24T15:34:50.463

这是一个非 jQuery 版本，它适用于所有主要浏览器，回到 IE 5，只是为了展示没有 jQuery 的生活是多么可怕。

演示：http: [//jsfiddle.net/timdown/aHW9J/](http://jsfiddle.net/timdown/aHW9J/)

代码：

```
var el = document.getElementById("foo"), child = el.firstChild, nextChild;

while (child) {
    nextChild = child.nextSibling;
    if (child.nodeType == 3) {
        el.removeChild(child);
    }
    child = nextChild;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-24T15:00:55.757

试试这个 ：

```
$("#foo").html($("#foo").find("div"));​ 
```

演示：http: [//jsfiddle.net/PXxC4/](http://jsfiddle.net/PXxC4/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T15:03:10.027

你可以用这个。

```
$("#foo").html($("#foo").children());​ 
```

# asp.net - IIS 7.5 – 应用 Windows Server 2008 R2 SP1 后无扩展 URI 处理的重大变化？

> ID：11633611
> 
> 赞同：2
> 
> 时间：2012-07-24T14:56:50.127
> 
> 标签：asp.net, configuration, error-handling, url-rewriting, iis-7.5

我们最近从 IIS 6 .net 2.0 迁移到 IIS 7.5 .net 4.0（ASP.Net Web 窗体）的应用程序遇到问题

代码在 global.asax Application_BeginRequest 事件中执行自定义重写，并使用 HttpContext.Current.RewritePath() 方法进行重写。

当带有扩展名的错误请求（不存在的页面）出现时，例如 /kentest/test.blah 事情得到了正确处理 - IIS 正确传递了我们重定向到的自定义错误页面。

当一个错误的请求没有像 /kentest/test 这样的文件扩展名时，IIS 不会正确传递自定义错误页面。我们陷入循环重写相同的 /kentest/test 一遍又一遍，直到 IIS 抛出递归 500 异常。

任何想法如何解决这个问题并在没有扩展工作的情况下获得请求？

其他人似乎也遇到了这个问题，正如这篇[博文](http://netpl.blogspot.com/2011/09/iis-75-breaking-change-in-extensionless.html)提到的，但没有提供解决方案。

**更新我们解决了这个问题**

我们需要在 handlers 部分的 web.config 中添加以下内容：

```
<remove name="ExtensionlessUrlHandler-Integrated-4.0" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:07:00.280

我们需要在 handlers 部分的 web.config 中添加以下内容：

```
<remove name="ExtensionlessUrlHandler-Integrated-4.0" /> 
```

# matlab - 识别矩阵中相同数字的序列

> ID：11633617
> 
> 赞同：4
> 
> 时间：2012-07-24T14:57:06.137
> 
> 标签：matlab, matrix

我有矩阵 A

```
A= [0 0 2 2 2 2 0 0 1 1 1 0 3 3;
    2 2 2 2 0 0 1 1 1 0 0 3 3 0; 
```

如您所见，其中有连续的数字；注意例如`2 2 2 2`在第一行和第二行。

对于此矩阵中出现的每个数字（或至少对于矩阵中从 1 到最大数字的每个数字），我希望有一个输出矩阵来指示此数字的序列，并且仅在原始矩阵中显示此数字。

例如，对于`1`：第一行有三个连续的数字，第二行有三个：我想在第一个输出矩阵中表示如下：

```
Matrix 1 = [ 0 0 0 0 0 0 0 0 1 2 3 0 0 0;
             0 0 0 0 0 0 0 1 2 3 0 0 0 0] 
```

数字相同`2`：

```
Matrix 2 = [ 0 0 1 2 3 4 0 0 0 0 0 0 0 0;
             1 2 3 4 0 0 0 0 0 0 0 0 0 0] 
```

和`3`：

```
Matrix 3 = [ 0 0 0 0 0 0 0 0 0 0 0 0 1 2;
             0 0 0 0 0 0 0 0 0 0 0 1 2 0] 
```

如您所见，每个输出矩阵显示一个数字连续出现的正向计数。

所以在这种情况下，我有 3 个输出矩阵，因为矩阵 A 的最大值为 3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T15:27:44.643

你可以试试这个：

```
A= [0 0 2 2 2 2 0 0 1 1 1 0 3 3;
    2 2 2 2 0 0 1 1 1 0 0 3 3 0];

result = arrayfun(@(b) (A == b).*cumsum((A == b),2),nonzeros(unique(A)), 'UniformOutput', false); 
```

对于此示例，变量结果中将有 3 个子矩阵。

```
result = 

    [2x14 double]
    [2x14 double]
    [2x14 double] 
```

要访问它们，请使用以下语法：

```
result{1}
result{2}
result{3} 
```

然后你得到：

```
ans =

     0     0     0     0     0     0     0     0     1     2     3     0     0     0
     0     0     0     0     0     0     1     2     3     0     0     0     0     0

ans =

     0     0     1     2     3     4     0     0     0     0     0     0     0     0
     1     2     3     4     0     0     0     0     0     0     0     0     0     0

ans =

     0     0     0     0     0     0     0     0     0     0     0     0     1     2
     0     0     0     0     0     0     0     0     0     0     0     1     2     0 
```

**~edit~**
如果按照评论中的要求，A 是一个 3D 矩阵，则此代码的工作原理相同，但结果的结构有点不同：

```
result = 
    [2x14x2 double]
    [2x14x2 double]
    [2x14x2 double] 
```

要访问这些矩阵，例如使用

```
result{1}(:,:,1) % for the results of comparing A(:,:,1) with value 1
result{1}(:,:,2) % for the results of comparing A(:,:,2) with value 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T15:17:15.450

**编辑因为问题改变了**

这远非最佳，但会做你想做的事

```
 V = 1;
 C = A' == V;
 D = cumsum(C).*C
 E = D' 
```

现在`E`将`Matrix1`在您的示例中。更改`V`为 2 和 3 以获得`Matrix2`和`Matrix3`。如果你有类似的东西

```
 A = [2 2 2 0 0 0 0 0 2 2 2] 
```

那么你会得到

```
 [1 2 3 0 0 0 0 0 4 5 6] 
```

所以它可能不是你想要的。从您的问题中不清楚是否是这种情况，但如果不是，请告诉我，我将删除答案

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T15:19:13.803

这是一个基于循环的解决方案，可帮助您入门：

```
A = [
  0 0 2 2 2 2 0 0 1 1 1 0 3 3;
  2 2 2 2 0 0 1 1 1 0 0 3 3 0
];

mx = max(A(:));
AA = cell(mx,1);
for num=1:mx
    AA{num} = zeros(size(A));
    for r=1:size(A,1)
        idx = ( A(r,:) == num );
        AA{num}(r,idx) = sum(idx):-1:1;
    end
end 
```

结果：

```
>> AA{1}
ans =
     0     0     0     0     0     0     0     0     3     2     1     0     0     0
     0     0     0     0     0     0     3     2     1     0     0     0     0     0
>> AA{2}
ans =
     0     0     4     3     2     1     0     0     0     0     0     0     0     0
     4     3     2     1     0     0     0     0     0     0     0     0     0     0
>> AA{3}
ans =
     0     0     0     0     0     0     0     0     0     0     0     0     2     1
     0     0     0     0     0     0     0     0     0     0     0     2     1     0 
```

* * *

## 编辑：

更新代码以处理具有三个维度的矩阵：

```
A = zeros(2,7,2);
A(:,:,1) = [2 2 2 0 0 1 1 ; 0 0 2 2 2 1 1];
A(:,:,2) = [1 1 2 2 2 0 0 ; 0 1 1 0 2 2 2];

mx = max(A(:));
AA = cell(mx,1);
for num=1:mx
    AA{num} = zeros(size(A));
    for p=1:size(A,3)
        for r=1:size(A,1)
            idx = ( A(r,:,p) == num );
            AA{num}(r,idx,p) = 1:sum(idx);
        end
    end
end 
```

结果：

```
%# contains consecutive numbers corresponding to number 1 in all slices
>> AA{1}
ans(:,:,1) =
     0     0     0     0     0     1     2
     0     0     0     0     0     1     2
ans(:,:,2) =
     1     2     0     0     0     0     0
     0     1     2     0     0     0     0

%# contains consecutive numbers corresponding to number 2 in all slices
>> AA{2}
ans(:,:,1) =
     1     2     3     0     0     0     0
     0     0     1     2     3     0     0
ans(:,:,2) =
     0     0     1     2     3     0     0
     0     0     0     0     1     2     3 
```

# xml - 如何在vb.net中检查xml文件中是否存在值

> ID：11633618
> 
> 赞同：0
> 
> 时间：2012-07-24T14:57:07.227
> 
> 标签：xml, vb.net, .net-2.0

我正在尝试检查 xml 文件中是否存在字符串。如果它不存在，我必须将该字符串添加到 xml 文件中。

我的 xml 文件如下所示：

```
 <Employee>
      <Emp>
        <Name id="1">   A     </Name>
        <Name id="2">   C     </Name>
        <Name id="3">   D     </Name>
       </Emp>
  </Employee> 
```

我想实现：

```
dim str as string = "b" 
if str exists in "xmlfile"
    'do something
else
    'add string to file
end if 
```

我根本不是很熟悉 LINQ，但我知道我想做的事情可以使用 LINQ。我尝试了以下方法：

```
Dim employee = XElement.Load(someStream)
Dim emp = employee.Element("Emp")
If emp IsNot Nothing Then
    else
        'add string to xml file
End If 
```

当我尝试这个时，我收到了错误：`XElement`未声明。

任何人都可以建议一种在没有 LINQ 的情况下在 VB.NET 中做我想做的事情的方法吗？或者如果我必须使用 LINQ，可以提供一个例子吗？

我正在使用 .net 2.0 (VB.NET)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:10:09.473

您需要遍历 Emp 的孩子。现在，您的代码只是检查`<Emp>`元素是否存在。我想你真正想要做的是检查每个`<Name>`元素，看看它的内部文本是否包含你想要的字符串。

您也可以尝试使用 XmlDocument 和 XmlNode，如果 XElement 给您带来麻烦，它们应该在 .NET 2.0 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:36:23.730

我认为你想要的是更像这样的东西：

```
Dim employeeData As XDocument
Dim employeeElements as List(Of XElement)
Dim numberOfNames as Integer = 0

employeeData = XDocument.Load(someStream)

employeeElements = (From elements In employeeData.Decendants()
                    Where (elements.Name.LocalName.ToString() = "Emp")
                    Select elements).ToList()

For Each employee In employeeElements
    If (employee.<Name>.Value = "B") Then
        numberOfNames = numberOfNames + 1
    End If
Next

If numberOfNames > 0 Then
    'Insert "B" into xml
End If 
```

因此，这是一个使用 XDocument 并进行交互的示例，尽管 user1512185 建议使用示例 LINQ 表达式来获取要迭代的 XElement 列表。

这是对我在我的一个应用程序中所做的事情的修改。但是我没有插入到 xml 中，所以我不确定我可以在那里帮助你。

# c# - 视图中的 MVVM WPF 值为空

> ID：11633625
> 
> 赞同：1
> 
> 时间：2012-07-24T14:57:22.280
> 
> 标签：c#, wpf, mvvm

我对 WPF 还是很陌生，并试图掌握 MVVM 模式。我有包含 2 个日期选择器的 mainWindow.xaml 文件

```
 <DatePicker Padding="5,5,5,5"
                    Text="{Binding Path=dateOptObj.openDate, Mode=TwoWay}"/>
        <TextBlock  Padding="5,5,5,5" Text=" to "/>
        <DatePicker Padding="5,5,5,5" 
                    Text="{Binding Path=dateOptObj.closeDate, Mode=TwoWay}"/> 
```

当程序加载我的日期 obj 具有基于这些日期选择器的有效数据并加载与这两个日期匹配的网格时：

```
dateOptObj = new mdDateOptions(); 
```

现在这是加载该对象的实际类。

```
private ICollectionView _datOpts;
    public ObservableCollection<string> dates { get; private set; }
    public ICollectionView datesView
    {
        get
        {
            return _datOpts;
        }
    }
    public mdDateOptions()
    { 

        dates = new ObservableCollection<string>();
        dates.Add("Rolling Year");
        dates.Add("Year to Date");
        dates.Add("Last Year");

        _datOpts = CollectionViewSource.GetDefaultView(dates);
        _datOpts.CurrentChanged += new EventHandler(OnCurrentChanged);
    }

    public void OnCurrentChanged(object sender, EventArgs e)
    {
        string currSel = (string)_datOpts.CurrentItem;
        DateTime p_date = new DateTime();
        p_date = DateTime.Today;

        switch (currSel)
        {
            case "Rolling Year":
                openDate = DateTime.Today.AddYears(-1);
                closeDate = DateTime.Today;

                openDatePrevious = DateTime.Today.AddYears(-2);
                closeDatePrevious = DateTime.Today.AddYears(-1);

                break;
            case "Year to Date":
                openDate = new DateTime(DateTime.Today.Year, 1, 1);
                closeDate = DateTime.Today;

                openDatePrevious = new DateTime(DateTime.Today.AddYears(-1).Year, 1, 1);
                closeDatePrevious = DateTime.Today.AddYears(-1);
                break;
            case "Last Year":
                openDate = new DateTime(DateTime.Today.AddYears(-1).Year, 1, 1);
                closeDate = new DateTime(DateTime.Today.AddYears(-1).Year, 12, 31);

                openDatePrevious = new DateTime(DateTime.Today.AddYears(-2).Year, 1, 1);
                closeDatePrevious = new DateTime(DateTime.Today.AddYears(-2).Year, 12, 31);
                break;
            default:
                MessageBox.Show("Unknown Date Option");
                break;
        }
    } 
```

我的问题是我的 mainWindow.xaml 上有一个 userControl，它有一个按钮列表，可以在 mainWindow.xaml 上加载一个网格。当您点击 userControl 中的按钮时，我希望它根据日期选择器过滤掉网格中的某些数据，但是当我的中继命令在视图模型中触发时，上面的 dateOptObj 为空。谁能指出我正确的方向？下面是我如何加载 UserControl。

```
<vm:StatPanel DockPanel.Dock="Right" Loaded="StatPanel_Loaded" /> 
```

下面是我的 UserControl 面板，其中包含我想在 MainWindow.xaml 中的主网格上过滤的按钮网格。

```
<DataGridTemplateColumn Header="Security">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Name="Security" Content="{Binding Path=totalSecurities}" Command="{Binding Source={StaticResource viewModel}, Path=filterGridCommand}">
                                    <Button.CommandParameter>
                                        <MultiBinding Converter="{StaticResource PassThroughConverter}">
                                            <Binding Path="sector"/>
                                            <Binding ElementName="Security" Path="Name"/>
                                        </MultiBinding>
                                    </Button.CommandParameter>

                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn> 
```

这是我的 filterGridCommand

```
public RelayCommand filterGridCommand
    {
        get
        {
            if (_filterGridCommand == null)
            {
                _filterGridCommand = new RelayCommand(filterGrid);
            }

            return _filterGridCommand;
        }
    }
    private void filterGrid(object param)
    {
        var values = (object[])param;
        string sector = (string)values[0];
        string type = (string)values[1];

        EmployeeObj empObj = (EmployeeObj)_repsView.CurrentItem;
        dash.reFillLogNewAccounts(dateOptObj.openDate, dateOptObj.closeDate, empObj.RRNumber,sector,type);
    } 
```

# rally - 更新集会的任务修订

> ID：11633635
> 
> 赞同：2
> 
> 时间：2012-07-24T14:58:02.963
> 
> 标签：rally

有人可以给我一个关于如何使用 javascript 更新任务修订的例子吗？

我刚刚创建了一个任务

```
rallyDataSource.create("task", {"Name": "DEV: Do Work", "WorkProduct": thisDefect}, onCreateComplete,onCreateError); 
```

现在我想将任务的第一个版本的描述从“原始版本”更新为“自动创建的任务”。我试图获取第一个版本的 _ref，但不知道如何。使用

```
function onCreateComplete(object, warnings) {
    var createdObject = object;
    rallyDataSource.update({"_ref": createdObject.RevisionHistory.Revisions[0]._ref, "Description": "Auto-created task"}, onComplete,onError);
} 
```

不工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:13:16.643

修订是一个只读集合 - 旨在提供对工件的更改的可靠记录，因此您将无法使用 AppSDK 或 Webservices API 更新修订。

我建议您通过任务名称或其描述文本中的命名约定来完成您的最终目标（即提供指示任务是自动创建的描述符）。

# blackberry - 为什么黑莓如此难以预测？

> ID：11633636
> 
> 赞同：1
> 
> 时间：2012-07-24T14:58:06.307
> 
> 标签：blackberry

我目前正在开发一个黑莓 java 应用程序。在应用程序中，我在两个屏幕之间切换（我们称它们为 A 和 B）。现在在我的模拟器（很多，OS 5/6/7）上，应用程序运行良好。在我测试过的一些真实设备上，该应用程序运行良好。然而，在朋友的 9360 OS 7.1.0.336 上，应用程序在从屏幕 A 转换到屏幕 B 时崩溃。我无法在我拥有的设备或我的模拟器上复制错误。在许多模拟器上下载/安装/测试后，我下载了一个模拟器 9800 OS 6.0.0.313 并且看哪，当我从屏幕 A 转换到屏幕 B 时应用程序崩溃。现在我使用带有黑莓插件的 eclipse，每当我尝试将调试器附加到这个特定的模拟器时，我都会收到附加调试器失败消息，或者更糟糕的是模拟器只是“死”了，所以现在我可以了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:55:55.607

尝试找出异常情况： 1\. 转到 BB 主屏幕 2\. 按住 ALT（PC 上的模拟器 CTRL 是模拟器的 ALT）键 3\. 按住键盘上的 ALT 键类型 LGLG

您将在设备事件日志中看到未处理的异常。

回到主要问题。有时候真的很矛盾。不同的操作系统版本有不同的问题，有时行为略有不同。但我们不能用它做任何事情。

# javascript - jQuery Plugin 2 Instances 不运行？

> ID：11633638
> 
> 赞同：1
> 
> 时间：2012-07-24T14:58:10.623
> 
> 标签：javascript, jquery, jquery-plugins, namespaces, timeout

我已经构建了一个 jQuery 插件，它使用`setTimeout`并保存了选择器的年龄限制，`.data()`但由于某种原因，超时似乎是独立运行的，因为两个超时都影响同一个元素，有人可能会发现我做错了什么，我很抱歉这个大小jsFiddle 非常庞大，因为插件支持很多，

模式 - 水平/垂直方向 - 锁定，因此如果在水平上仅向左或向右，垂直向上和向下相同

这是一次加载2的代码， [http://jsfiddle.net/barkermn01/NRPMk/7/](http://jsfiddle.net/barkermn01/NRPMk/7/)

这是一次加载 1 的代码， [http://jsfiddle.net/barkermn01/NRPMk/8/](http://jsfiddle.net/barkermn01/NRPMk/8/)

有人可以解释这是怎么发生的，我能做些什么来解决它？

**更新：** 抱歉，不止一个的 setTimeout 只会触发一次

**更新：再次** 修复了`setTimeout`不触发第二次忘记告诉插件它正在运行的问题

只是关于评论的注释这个问题没有修复我唯一修复的是第一次更新我没有修复 2 实例问题超时仅适用于插件的最后一个实例

# php - 运费总额和即时更新 API 的 PayPal 错误

> ID：11633641
> 
> 赞同：1
> 
> 时间：2012-07-24T14:58:22.730
> 
> 标签：php, html, api, paypal, express-checkout

我正在尝试调用 ExpressCheckout 并执行即时更新 API，但无论我做什么，它似乎都会返回一个无效的运输总错误。我知道在实时运行时需要使用 SSL，但是我正在尝试针对沙箱进行测试，但仍然遇到这些错误。

我的简单 HTML 测试页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Express Checkout with Callback API - PayPal</title>
</head>
<body>
<h1 align="center"> Express Checkout with Callback API </h1>
<h3 align="center"> PayPal </h3>
     <form method=post action=https://api-3t.sandbox.paypal.com/nvp> 
        <input type=hidden name=USER value=xxxxxxxxxxx> 
        <input type=hidden name=PWD value=xxxxxxxx> 
        <input type=hidden name=SIGNATURE value=xxxxxxxxxxxxxxxxxxxxxxx> 
        <input type=hidden name=VERSION value=63.0> 
        <input type=hidden name=PAYMENTREQUEST_0_PAYMENTACTION value=Sale> 
        <input name=PAYMENTREQUEST_0_AMT value=19.95> 
        <input type=hidden name=RETURNURL value=https://www.YourReturnURL.com> 
        <input type=hidden name=CANCELURL value=https://www.YourCancelURL.com>
        <input type=hidden name=MAXAMT value=100.00>
        <input type=hidden name=callback value=....../callback.php>
        <input type=hidden name= callbacktimeout value=5>
        <input type=hidden name= l_shippingoptionisdefault0 value=true> 
        <input type=hidden name= l_shippingoptionname0 value=Ground>
        <input type=hidden name= l_shippingoptionlabel0 value=5 Days>
        <input type=hidden name= l_shippingoptionamount0 value=10.00>
        <input type=hidden name= shippingamt value=10.00>
        <input type=submit name=METHOD value=SetExpressCheckout> 
    </form>
</body>
</html> 
```

我的 callback.php 脚本托管在我的服务器上：

```
<?php
foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req = "&$key=$value";
}

//Build string
$method = $_POST['METHOD'];
$version = $_POST['CALLBACKVERSION'];
$token = $_POST['TOKEN'];
$currencycode = $_POST['CURRENCYCODE'];
$localecode = $_POST['LOCALECODE'];
$street = $_POST['SHIPTOSTREET'];
$street2 = $_POST['SHIPTOSTREET2'];
$city = $_POST['SHIPTOCITY'];
$state = $_POST['SHIPTOSTATE'];
$country = $_POST['SHIPTOCOUNTRY'];
$zip = $_POST['SHIPTOZIP'];

//If PayPal acocunt has US address
if ($country=="US") {
    echo "METHOD=CallbackResponse&L_SHIPPINGOPTIONNAME0=Ground&L_SHIPPINGOPTIONLABEL0=5 to 7 Days&L_SHIPPINGOPTIONAMOUNT0=10.00&L_SHIPPINGOPTIONISDEFAULT0=true";
    }   

//If PayPal account has a non-US address    
else {
    echo "METHOD=CallbackResponse&L_SHIPPINGOPTIONNAME0=Next Day Air&L_SHIPPINGOPTIONLABEL0=7 to 14 Days&L_SHIPPINGOPTIONAMOUNT0=20.00&L_SHIPPINGOPTIONISDEFAULT0=true";
    }
?> 
```

我已从代码中删除了一些敏感信息，并将所有运费值更改了 100 次，如果有一些愚蠢的错误，请见谅。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:58:51.973

根据[Paypal 的开发人员指南](https://merchant.paypal.com/cms_content/US/en_US/files/developer/PP_NVPAPI_DeveloperGuide.pdf)（第 58 页）要求，这`CURRENCYCODE`是必需的。尽管在我的测试中似乎并非如此。但值得一试。

url编码你的值也可能这样做......所以把你的空格变成+s。

我已将此用作工作测试响应： `L_INSURANCEAMOUNT1=1.35&L_SHIPPINGOPTIONISDEFAULT2=false&L_SHIPPINGOPTIONNAME0=1%3A+&L_SHIPPINGOPTIONNAME1=2%3A+&L_SHIPPINGOPTIONLABEL0=asdf&L_SHIPPINGOPTIONLABEL1=UPS+Express+2+Days&OFFERINSURANCEOPTION=true&CURRENCYCODE=USD&L_INSURANCEAMOUNT2=1.28&L_TAXAMT0=2.20&L_SHIPPINGOPTIONAMOUNT1=10.00&L_SHIPPINGOPTIONAMOUNT0=20.00&L_SHIPPINGOPTIONAMOUNT2=9.99&L_SHIPPINGOPTIONISDEFAULT1=true&L_SHIPPINGOPTIONISDEFAULT0=false&L_SHIPPINGOPTIONNAME2=3%3A+&L_SHIPPINGOPTIONLABEL2=UPS+Ground+2+to+7+Days&L_TAXAMT1=2.00&METHOD=CallbackResponse&L_INSURANCEAMOUNT0=1.35&L_TAXAMT2=1.99`

# c# - 使用 c# 在 Active Directory 中移动对象

> ID：11633642
> 
> 赞同：4
> 
> 时间：2012-07-24T14:58:22.933
> 
> 标签：c#, active-directory

所以下面的代码应该在活动目录中移动一个对象。我看到这里发生了什么，但我不太明白。我所看到的只是旧位置和新位置。我没有看到我实际上是如何抓住物体的。我在这两个位置都有几个对象，这段代码在哪里说明要移动哪个特定对象？我看不到 LDAP + objectLocation 字符串中存在对象的位置。

```
DirectoryEntry eLocation = new DirectoryEntry("LDAP://" + objectLocation);
DirectoryEntry nLocation = new DirectoryEntry("LDAP://" + newLocation);
string newName = eLocation.Name;
eLocation.MoveTo(nLocation, newName);
nLocation.Close();
eLocation.Close(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T15:14:21.143

也许这个例子会更清楚：

```
DirectoryEntry theObjectToMove = new DirectoryEntry("LDAP://CN=jdoe,CN=Users,DC=acme,DC=com");
DirectoryEntry theNewParent = new DirectoryEntry("LDAP://OU=Something,DC=acme,DC=com");
theObjectToMove.MoveTo(theNewParent); 
```

带有两个参数的重载`MoveTo`还为对象指定了一个新名称，我认为在您的示例中它是多余的。

# java - 没有 System.setProperty（路径证书）的客户端 WebService 身份验证

> ID：11633644
> 
> 赞同：1
> 
> 时间：2012-07-24T14:58:30.067
> 
> 标签：java, certificate, webservice-client

我有一个桌面应用程序，它通过相互身份验证访问 web 服务。身份验证使用 System.setProperty 并且可以正常工作。

但是我必须从我的证书创建物理文件，有时用户会更改程序文件夹中的权限，而且创建物理文件也不安全。我正在使用 A1 证书。

有没有办法访问将证书放在内存中的网络服务或类似的东西？

# sql - 通过查询和加入访问（sql）组

> ID：11633645
> 
> 赞同：0
> 
> 时间：2012-07-24T14:58:35.277
> 
> 标签：sql, ms-access

我有两张数据表，

```
 Project (ID, NAME, price),
 Expenses (ID, NAME, price, PROJECT_ID,) 
```

我想找到所有项目费用汇总的项目我试过这个查询，但我无法获得所有项目，只有他有费用

```
SELECT PROJECT.p_id, SUM(EXDE.EXD_AMOUNT) AS T
FROM  PROJECT 
INNER JOIN EXDE
    ON PROJECT.p_id = EXDE.P_NO
GROUP BY  PROJECT.p_id 
```

我将非常感谢任何答案将帮助我找到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:01:25.130

内连接只选择两个表中的匹配项。你需要左连接。

```
SELECT PROJECT.p_id, SUM(EXDE.EXD_AMOUNT) AS T
FROM  PROJECT 
LEFT JOIN EXDE
    ON PROJECT.p_id = EXDE.P_NO
GROUP BY  PROJECT.p_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:02:24.353

改为使用`LEFT JOIN`。

```
SELECT   PROJECT.p_id, SUM(EXDE.EXD_AMOUNT) AS T
  FROM   PROJECT 
             LEFT JOIN EXDE
               ON PROJECT.p_id = EXDE.P_NO
GROUP BY  PROJECT.p_id 
```

# jquery - nth-child 选择了错误的元素

> ID：11633646
> 
> 赞同：1
> 
> 时间：2012-07-24T14:58:42.263
> 
> 标签：jquery, css, jquery-selectors, css-selectors

对于这个特定站点，当我通过 CSS 或 jQuery 使用 nth-child 时，“nth-child”选择器捕获了错误的元素。我在调用的选择器之前得到了一个孩子：

```
.home article:nth-child(3) {} //captures 2nd child 
```

这似乎是在捕获第二个孩子。如果我尝试：

```
.home article:nth-child(1) {} //captures nothing 
```

这不捕获任何元素。在 jQuery 中，它显示为一个空数组。这是我正在开发的开发网站。谢谢你。

[http://heilbrice.designliftoff.com/](http://heilbrice.designliftoff.com/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T15:03:16.647

在您的站点中，您有一个 clearfix `div`，它是容器中其父元素的第一个子元素，因此您的第一个`article`实际上是*第二*个子元素，而不是第一个：

```
<div class="row-main clearfix">
    <div class="clearfix"></div>  <!-- .row-main.clearfix > :nth-child(1) -->

    <article id="post-" class=""> <!-- .row-main.clearfix > :nth-child(2) --> 
```

在 CSS 中，您可以`:nth-of-type()`改为使用第三个`article`元素：

```
/* Select the 3rd article in its parent within .home */
.home article:nth-of-type(3) {} 
```

奇怪的是，[jQuery 不支持`:nth-of-type()`](https://stackoverflow.com/questions/2093355/nth-of-type-in-jquery-sizzle)，因此对于跨浏览器解决方案，您必须选择[`:eq()`](http://api.jquery.com/eq-selector)从零开始的索引：

```
// Select the 3rd article within .home
$('.home article:eq(2)') 
```

# jquery - Windows 桌面小工具使用 jQuery 从网站调用 JSON

> ID：11633650
> 
> 赞同：0
> 
> 时间：2012-07-24T14:59:02.327
> 
> 标签：jquery, windows, windows-desktop-gadgets

在有人这么说之前，是的，我确实通读了 SO 中引用的各种示例，但它们都没有做我想做的事情。:)

我可以让我的小工具出现在小工具列表中，我可以将它添加到桌面。我正在寻找一个由 ajax 调用更新的简单下拉列表。The drop down list contains "To Do" categories and when a category is selected/changed, the "To Do" items will be displayed in the gadget (in the file, I wanted the results to appear in the `<div id='results'></div>`so that the drop down list在用户需要更改待办事项类别时仍然可见。

我可以让下拉容器出现，但是当它尝试进行 ajax 调用时，没有返回数据。

我知道我需要投入，`$.support.cors = true;`但我不知道应该去哪里。我发现大量的帖子表明它需要从 jQuery 1.5 开始添加，但没有一个指定它需要去哪里。

我拆开了 StackOverflow Flaid 小部件，这是最大的帮助，但即使在那里，我也找不到任何参考`$.support.cors = true;`

我很沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:53:46.420

[Ben Nadel](http://www.bennadel.com/blog/2327-Cross-Origin-Resource-Sharing-CORS-AJAX-Requests-Between-jQuery-And-Node-js.htm)博客文章消除了我与 CORS 的“差距”。事实证明，我的问题不在于小工具（不是我真正认为的），而是我需要添加到小工具中的更多 javascript。

# ios - NSZombieEnabled 没有调试器

> ID：11633654
> 
> 赞同：1
> 
> 时间：2012-07-24T14:59:10.487
> 
> 标签：ios, exc-bad-access, nszombie, nszombieenabled

我们`EXC_BAD_ACCESS`的 iOS 应用程序发生了崩溃，但仅在连接了某些外部附件时才会发生。不幸的是，此附件不允许调试（无直通连接）。是否可以永久启用`NSZombieEnabled`应用程序，以便即使直接在设备上启动应用程序也可以激活它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-05T03:50:05.770

`NSZombieEnabled`环境变量用于设置相应的全局`NSZombieEnabled`变量，在`Foundation/NSDebug.h`.

环境变量很早就被读取， before `main()`，但您可以在调用（或）之前在函数中将`NSZombieEnabled`全局设置为。`YES``main()``UIApplicationMain()``NSApplicationMain()`

# javascript - Backbone Marionette - Access to Router history

> ID：11633657
> 
> 赞同：1
> 
> 时间：2012-07-24T14:59:13.307
> 
> 标签：javascript, model-view-controller, backbone.js, router

I'd like to add a back button in my navbar in order to be able to return to the previous page (I want the same behaviour when I click on this button and when I click on my browser's back button).

I wonder what is the best way to do it ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:18:50.607

All you need to do is add an event listener on your back button and call this code in the handler `window.history.back();`

# objective-c - 为什么一个窗口有两个 NSWindowController 实例？

> ID：11633663
> 
> 赞同：0
> 
> 时间：2012-07-24T14:59:43.260
> 
> 标签：objective-c, macos, cocoa, interface-builder

我以编程方式加载一个窗口，如下所示：

```
OddsWindowController *const controller = [[OddsWindowController alloc] initWithWindowNibName:@"OddsWindow"]; 
```

在 OddsWindowController（NSWindowController 的子类）中，我正在记录自我：

```
- (IBAction)showOdds:(id)sender {
    NSLog(@"self = %@", self);
}

- (void)windowDidLoad {
    NSLog(@"self = %@", self);
} 
```

两个不同的日志语句为 self 返回不同的值，这意味着我有两个 NSWindowController 实例。这可能是什么原因造成的？我怎样才能阻止这个？

# jquery - jquery 文件树 - 默认打开所有文件夹？

> ID：11633665
> 
> 赞同：1
> 
> 时间：2012-07-24T14:59:49.517
> 
> 标签：jquery

我使用了 jquery 文件树脚本（位于[http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)）和 php 连接器版本，并且有一个漂亮的 2 列扩展菜单结果。

客户端现在还想要一个相同版本的页面，但所有文件夹在页面加载时默认展开。我不知道如何做到这一点。我看过一篇解释如何默认扩展特定文件夹的帖子，但我需要默认扩展所有文件夹，因为这是一个递归文件树，客户端将向其中添加文件夹，我不需要也不应该更新 javascript每次他们添加一个文件夹。

任何建议将不胜感激！我的 jQuery 知识很基础。我刚从 ActionScript3 中等复杂度的 bkgnd 进入 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:35:21.247

该插件似乎没有提供执行此操作的配置。*但是，您可以在插件完成渲染树后*尝试打开所有文件夹：

```
$(".directory a").click(); 
```

这可能有点棘手，因为它也没有`complete`回调。

**更新**

如果文件夹包含子文件夹，您也需要打开新文件夹。所以你可以使用这样的函数：

```
function openThem() {
  var closedFolders = $(".directory:not(.expanded) a");
  if(closedFolders.length > 0) {
    window.setTimeout(openThem, 1000);
    closedFolders.click();
  }
}
openThem(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:29:13.230

我需要类似的东西，但具有搜索功能 - 搜索存储在数据库中的文件和文件夹名称。更复杂的是，还有不同级别的安全性。最后，对于 jqueryFileTree 来说，这只是太复杂了。

但是，玩弄 Matija 的响应： [jquery 文件树 - 默认情况下打开文件夹？](https://stackoverflow.com/questions/3098843/jquery-file-tree-folder-open-by-default)

```
if (o.expanded != null) {
    $(c).find('.directory.collapsed').each(function (i, f) {
         /*if ((o.expanded).match($(f).children().attr('rel'))) {*/
            showTree($(f), escape($(f).children().attr('rel').match(/.*\//)));
            $(f).removeClass('collapsed').addClass('expanded');
        //};
    });
} 
```

我注释掉了 if 语句，我设法扩展了所有内容。我也不得不改变

```
if(o.expanded == undefined) o.expanded = ''; 
if(o.expanded == undefined) o.expanded = null; 
```

否则即使我不想触发它也会触发。我想在搜索中扩展所有内容。

Majid 不幸的是，您的代码对我不起作用。closedFolders.length 始终为 0

# jquery - 将鼠标悬停在可放置对象上时，如何有条件地取消放置？

> ID：11633669
> 
> 赞同：3
> 
> 时间：2012-07-24T15:00:03.950
> 
> 标签：jquery, jquery-ui

我有一个设置，我想有条件地还原正在删除的元素

（我尝试使用该`accept`事件，但事实证明，出于实际目的，它运行得太频繁了。-不仅如此，它的使用还取消了其他事件。）

**编辑：实际上并不是它运行得太频繁，而是......当它触发时，`$(this).attr('id')`在重新访问悬停在元素上时变得不正确。[http://jsfiddle.net/UvByv/1/](http://jsfiddle.net/UvByv/1/)**

例如上面：

1.  抓住一块并将鼠标悬停在各个方块上。
2.  注意它悬停的平方数。它并不总是按应有的方式更新。

您将看到方形元素已编号。当一个广场被重新访问时，`$(this).attr('id')`显然不再及时更新

**我要做的是有条件地“切换可放置性”，在将鼠标悬停在元素上时读取 DOM。出于我的目的，它似乎`accept`与 DOM 的其余部分不完全同步。**

原因是，正如您将在我的示例中看到的那样，作为棋子的正方形，取决于棋子在特定时间点结束的正方形。我可能不想让下落。其他时候，我想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:11:37.033

如果我理解正确，您不仅要根据空间当前是否被占用，还要根据当前移动是否是有效的国际象棋移动来切换可放置性（毕竟，一些有效的国际象棋移动涉及一块代替其他）。这是真的？如果是这样，我认为使用复杂的`accept`函数实际上是正确的策略。

这个函数接收两条关键信息：被拖动的部分（唯一的“el”参数）和可能被拖动到的空间（这是函数的`this`变量）。您注意到该`accept`函数被多次调用，这是设计使然：正如您在 jQuery UI[源代码](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.droppable.js#L204)中所见，当拖动可拖动对象时，`accept`将为板上的每个可放置空间评估该函数。这意味着当您开始移动一块时，每个可放置空间都会计算它是否可以接受该块。

我知道您想在一块经过另一个方块时“即时”评估这个，但是提前计算它的开销是否会导致明显的性能问题？如果没有，我会去`accept`。

**编辑：**我创建了一个 jsFiddle，演示如何使用 .append 将块从一个正方形移动到另一个正方形：http: [//jsfiddle.net/58t7L/3/](http://jsfiddle.net/58t7L/3/)

**凯文编辑：** 接受，因为在聊天中，马特帮助对问题进行了分层，以表明我在接受中使用 $(this) 的方法并不完全适合接受的使用方式。.over: 将用于我描述和使用的过程，而“接受”确实需要一个不同的过程，因为它会同时评估所有可放置对象。聊天链接在下面的评论中

# php - html 和 body 标签在我告诉 PHP 之前关闭

> ID：11633670
> 
> 赞同：1
> 
> 时间：2012-07-24T15:00:07.520
> 
> 标签：php, html, tags

因此，我正在重新设计一些工作中的工具，以提供有凝聚力的用户体验，并且我有 2 个文件将包含在所有其余文件中。它们是页眉和页脚。它们独立工作，但是当我尝试将它们包含在同一个文件中时，页脚不会显示（我什至尝试将它们放在一个包含文件中）。

这是标题：

```
<?php

function pageHeader($title){
    $html = "<!DOCTYPE html>
    <html>
    <head>
        <link href='../../bootstrap/css/bootstrap.css' rel='stylesheet'>
        <title>$title</title>
    </head>
    <body>
        <div class='navbar navbar-fixed-top'>
            <div class='navbar-inner'>
                <div class='container-fluid'>
                    <a class='brand' href='/platform'>Platform Tools</a>
                    <div class='btn-group pull-right'>
                        <a class='btn dropdown-toggle' data-toggle='dropdown' href='#'>
                            <i class='icon-user'></i>
                            Username
                            <span class='caret'/>
                        </a>
                        <ul class='dropdown-menu'>
                            <li>
                                <a href='#'>Profile</a>
                            </li>
                            <li class='divider'/>
                            <li>
                                <a href='#'>Sign Out</a>
                            </li>
                        </ul>
                    </div>
                    <div class='nav-collapse'>
                        <ul class='nav'>
                            <li class='active'>
                                <a href='#'>
                                    <i class='icon-home icon-white'></i>
                                    APEX Home
                                </a>
                            </li>
                            <li>
                                <a href='/platform/cms'>
                                    <i class='icon-home icon-white'></i>
                                    CMS Home
                                </a>
                            </li>
                            <li>
                                <a href='/platform/outbound'>
                                    <i class='icon-home icon-white'></i>
                                    Outbound Home
                                </a>
                            </li>
                            <li>
                                <a href='/platform/urs'>
                                    <i class='icon-home icon-white'></i>
                                    URS Home
                                </a>
                            </li>
                            <li>
                                <a href='#bug'>
                                    <i class='con-fire icon-white'></i>
                                    Report a problem
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <script src='/bootstrap/js/jquery.js'/>
        <script src='/bootstrap/js/bootstrap-transition.js'/>
        <script src='/bootstrap/js/bootstrap-alert.js'/>
        <script src='/bootstrap/js/bootstrap-modal.js'/>
        <script src='/bootstrap/js/bootstrap-dropdown.js'/>
        <script src='/bootstrap/js/bootstrap-scrollspy.js'/>
        <script src='/bootstrap/js/bootstrap-tab.js'/>
        <script src='/bootstrap/js/bootstrap-tooltip.js'/>
        <script src='/bootstrap/js/bootstrap-popover.js'/>
        <script src='/bootstrap/js/bootstrap-button.js'/>
        <script src='/bootstrap/js/bootstrap-collapse.js'/>
        <script src='/bootstrap/js/bootstrap-carousel.js'/>
        <script src='/bootstrap/js/bootstrap-typeahead.js'/>  ";

        return $html;
        }
?> 
```

这是页脚：

```
<?php
function pageFooter(){
    $html ="
    <nav class='footer'>
        <a href='#'>Apex</a>
        <a href='#'>Contest</a>
        <a href='#'>Outbound</a>
        <a href='#'>URS</a>
        <a href='#'>Third Party Tools</a>
        <a href='#'>Report a Problem</a>
        <a href='#'>Our SLA</a>
        <a href='#'>Contact</a>
    </nav>
    </body>
    </html> ";

    return $html;
    }
?> 
```

当我将它们包含在我的 FrontDoor.php 文件中时，它看起来像这样（将更改为相对路径）：

```
<?php include('C:\xampp\htdocs\webapps\Redesign\Oreo\src\Header.php'); ?>
<?php include('C:\xampp\htdocs\webapps\Redesign\Oreo\src\Footer.php'); ?>

<?php echo pageHeader('Platform Tools'); ?>
<?php echo pageFooter(); ?> 
```

当我尝试运行它时，它会运行页眉，然后关闭正文和 html 标签，并且不运行页脚。

有什么建议和感谢吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:05:15.800

您可以尝试将脚本标签从更改`<script src='/bootstrap/js/bootstrap-typeahead.js'/>`为`<script src='/bootstrap/js/bootstrap-typeahead.js'></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:17:32.707

好吧，我一直这样做，

基本上我做的是这个

```
<?php include_once('Header.php'); ?>
Any Page content
<?php include_once('Footer.php'); ?> 
```

标头包括

```
<html><head></head><body><div class="some-div"> 
```

页脚包括

```
</div></body></html> 
```

这样你就可以获得恒定的页眉和页脚，你不需要单独创建一个函数来关闭 php 文档，它是非生产性的。

**编辑：**
如果你有 index.php ，例如，它包含文件 header.php 和 footer.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:10:33.023

我检查了代码，它呈现完美。~~不是强迫，但~~ 您应该遵循@Toby 要求关闭`script`标签的方式。

我确信这是您放置脚本标签的方式的问题。请纠正他们，一切都会好起来的。

**编辑**

当您在浏览器中查看源代码时，页脚会按预期在 HTML 源代码中看到。仅在渲染页脚时不显示，但是一旦您更正了添加脚本标签的方式，即放置正确的端`</script>`浏览器将正确渲染它

# image - 聚类 K-Means 聚类的最佳色彩空间

> ID：11633680
> 
> 赞同：4
> 
> 时间：2012-07-24T15:00:23.217
> 
> 标签：image, colors, processing, cluster-analysis, k-means

什么是最佳色彩空间（如 RGB、HSV、YIQ、XYZ、Lab），用于使用 K-Means 聚类方法将图像聚类到具有白色背景和多个对象的图像，该对象是除白色背景之外的其他颜色就像一些水果在光线充足的白布上的图像。附加信息：簇被确定为固定为两个簇，分割的结果是两个簇，第一个是背景的簇（布的白色），第二个是对象或一些对象的簇。之前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:39:40.077

我会选择 Lab，因为它可以将亮度与色度信息去关联，并且您对色度信息最感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T18:31:22.140

都有其优点和缺点。

例如，有人可能会争辩说，R 中 0.1 的差异和 B 中 0.1 的差异是相同的，因此 RGB 和欧几里得距离是合适的。而在 HSB 中，色调的范围是 0 到 360，而 S 和 V 的范围是 0 到 1（将色调重新缩放到 0-1 也不能真正解决这个问题！），因此整个欧几里德距离由色调控制。另外，355.5 和 0.5 的色调几乎相同，但欧几里得距离不知道这种环绕。即不要使用带有欧几里德距离的 HSV（因此，不要使用 k-means！）

我对所有颜色空间都不够熟悉，无法告诉你哪些是欧几里得空间，因此欧几里得距离和 k 均值在哪里是合适的。RGB 可能是，而 HSV（因为它在 H 中是循环的）绝对不是。我读到的实验室是非线性的？但是你需要一个用于 k-means 的线性空间！

对于 HSB 等，即使您有一个处理循环空间和非线性的距离函数，也不能使用 k-means，除非您还修复了*均值*函数。例如，色调 0.5 和 355.5（都非常接近红色）的平均值为 179，大约为青色。=> k-means 结果将是无稽之谈。

# asp.net - Asp.net MVC/WebAPI 中的异步

> ID：11633681
> 
> 赞同：1
> 
> 时间：2012-07-24T15:00:26.727
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

在最近与 MS 的 conf 中鼓励使用 Async 和 Await 关键字，如果我使用 Await 关键字可以跨越一个新线程，代码将在其中执行在这种情况下，Asp.net Worker 线程会发生什么。它会等待请求完成还是会继续为其他请求提供服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:30:31.267

`await`不会产生新线程。请参阅我的[`async`/ `await`intro 帖子](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)或[`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)。

但是，如果您愿意，*可以*通过显式调用来生成新任务。`Task.Run`

当您调用 时`await`，如果您正在等待的对象尚未完成，`await`则将安排您的方法的其余部分`async`稍后运行，并将当前线程返回到线程池。`async`异步操作正在进行或`await`正在进行异步操作时不使用任何线程。当异步操作完成时，该`async`方法的其余部分在线程池线程上运行（该线程可能与它启动的线程相同，也可能不同）。这通常不是问题，因为在常见情况 (1) 中，该`async`方法在正确的请求上下文中恢复。

(1) 常见的情况是直接`await`等待a`Task`或`Task<TResult>`。

# ruby - Cucumber/Capybara - 使用带有“页面对象”模式的 RSpec 匹配器

> ID：11633693
> 
> 赞同：1
> 
> 时间：2012-07-24T15:01:09.097
> 
> 标签：ruby, rspec, capybara

我目前正在重构整个黄瓜测试负载以使用“页面对象”模式，但是使用 RSpec 匹配器时我遇到了很多问题。

我现有的步骤如下：

```
Then /^I should (not )?see the following alerts:$/ do |negate, alerts|
  expectation = negate ? :should_not : :should

  within(ALERT_TABLE_ID) do
    alerts.hashes.each do |alert|
      page.send(expectation, have_content(alert["Original ID"]))
    end
  end
end 
```

我重构的步骤是：

```
Then /^I should (not )?see the following alerts:$/ do |negate, alerts|
  expectation = negate ? :should_not : :should

  @alert_reporting_panel = AlertReportingPanel.new(Capybara.current_session)
  @alert_reporting_panel.verify_contents expectation, alerts
end 
```

我的面板对象是：

```
class AlertReportingPanel
  def initialize(session)
    @session = session
  end

  def verify_contents(expectation, alerts)
    @session.within(ALERT_TABLE_ID) do
      alerts.hashes.each do |alert|
        @session.send(expectation, have_content(alert["Original ID"]))
      end
    end
  end
end 
```

不幸的是，我得到`undefined method 'have_contents' for #<AlertReportingPanel:0x3f0faf8> (NoMethodError)`.
我尝试添加`require 'rspec'`到类的顶部，并尝试完全限定该`have-content`方法： `Capybara::RSpecMatchers::HaveMatcher.have_content`，但我只是得到`uninitialized constant Capybara::RSpecMatchers (NameError)`.

我对 Ruby 还是很陌生，我确信这很容易解决……但我似乎无法为自己解决这个问题。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:12:05.647

这是很久以前的事了，所以我猜你现在可能已经有了答案，但是这里有。

您需要包含必要的模块才能引入并访问 *have_content* 之类的内容。所以你的面板对象看起来像：

```
class AlertReportingPanel
    include Capybara::DSL
    include Capybara::Node::Matchers
    include RSpec::Matchers

    def initialize... etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:45:51.027

[您可以尝试使用SitePrism](https://github.com/natritmeyer/site_prism "SitePrism")，而不是编写自己的页面对象系统

我有点偏见（我写了那个宝石），但它可能会让你的生活更轻松。

# webdriver - 保存截图文件

> ID：11633694
> 
> 赞同：3
> 
> 时间：2012-07-24T15:01:09.767
> 
> 标签：webdriver, selenium-webdriver

我保存截图文件的代码是：

```
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(scrFile, new File("c:\\screenshots\\"+Filename+".jpg")); 
```

**错误是：**

> 对于 FileUtil 类型，方法 copyFile (File, File) 未定义

我使用一个`EventFiringWebDriver`. 对此有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:50:05.053

有两种可能的解释。

1.  您提供的错误消息提到 FileUtil 类而不是 FileUtil **s** 您可能错误地使用了错误的类。
2.  假设您使用的是正确的 FileUtil**类**，您可能导入了错误的包。确保您已导入 org.apache.commons.io.FileUtils

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T06:50:30.753

公共类测试截图{

```
public static void main(String[] args) throws IOException {
    System.out.println("Images saved ..");
         WebDriver driver = new FirefoxDriver();
        driver.get("https://google");
        File scrFile;
        scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);

     org.apache.commons.io.FileUtils.copyFile(scrFile, new File("C:\\Users\\R&D\\Desktop\\Tulas\\Javafiles\\testimages.png"));

        driver.quit();
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:13:17.137

```
import java.io.File;
import org.apache.commons.io.FileUtils;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot; 
```

我猜你错过了这些导入中的一个或多个。上面给出的代码对我来说很好，这些包含。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T06:11:00.267

请放异常，然后它会正常工作。

EG: public static void main(String[] args) 抛出 IOException

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-16T12:16:33.037

使用`import org.apache.commons.io.FileUtils`. 这将导入`FileUtils`您需要的类。

# iphone - 客观c如何改变图像质量？

> ID：11633698
> 
> 赞同：1
> 
> 时间：2012-07-24T15:01:20.547
> 
> 标签：iphone, objective-c, image

我在谷歌上搜索了很多关于这个问题的信息，但找不到任何有趣的东西。

问：是否有任何类或方法可以改变图像质量（不是大小或比例，而是保持相同大小和比例的质量）。

据我了解，没有本机（默认）类或方法可以做到这一点，对吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:23:45.967

如果您有图像作为`UIImage`，您可以使用`UIImageJPEGRepresentation`指定压缩质量的函数来创建`NSData`对象。然后可以使用此数据对象创建一个新的`UIImage`.

[请参阅 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:28:32.873

此功能已在 iOS SDK 本身中提供，用于设置图像质量。在[UIImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)类中，有一种方法[UIImageJPEGRepresentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation)。

在此函数中传递您的图像和图像压缩质量。它不会改变图像的尺寸，但会改变图像的倾角以保持质量。这也将有助于保持内存的大小。

```
NSData * UIImageJPEGRepresentation (
   UIImage *image,
   CGFloat compressionQuality
);

Parameters:

 - image : The original image data.
 - compressionQuality: The quality of the resulting JPEG image, expressed as a value from 0.0 to 1.0\. The value 0.0 represents the maximum compression (or lowest quality) while the value 1.0 represents the least compression (or best quality). 
```

希望这是您所需要的。

享受编码:)

# asp.net-mvc - 跨多个模块的 MVC 工作单元

> ID：11633700
> 
> 赞同：0
> 
> 时间：2012-07-24T15:01:22.683
> 
> 标签：asp.net-mvc, entity-framework, repository, unit-of-work

我有一个关于使用存储库的工作单元来处理跨多个模块的事务的问题。

我有两个模块，称为客户和仓库，它们都有自己的数据库。

目前我使用工作单元来独立更新每个模块。我现在想要的是同时更新两个模块，如果其中一个模块无效，那么两个模块都不会被提交。

这可能与工作单元模式有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:40:50.387

我认为在这种情况下不可能出现真正的工作单元模式。我正在寻找一个使用两个存储库的服务类。

编辑-好吧，这可能是可能的-这个人指的是一个看起来合理的解决方案：

[具有多个数据源的工作单元？](https://stackoverflow.com/questions/3629500/unit-of-work-with-multiple-data-sources)

我仍然会考虑将现有存储库包装在服务/管理器类中并保持简单。

# regex - 匹配指定列范围包含点字符的行，如果找到该模式 8 次或更多次，则不打印该行

> ID：11633707
> 
> 赞同：0
> 
> 时间：2012-07-24T15:01:50.827
> 
> 标签：regex, linux, awk

我有一个制表符分隔的文件，其中从第 10-25 列开始，一些值包含“。” 特点。我想过滤掉与“。”匹配的行。字符，在此列的列范围内，因此如果在第 10-25 列中找到的次数少于 8 次（即出现次数少于 50%），则不会打印。

我曾尝试查看类似的帖子，最接近的是用户： lodge（[在同一行中匹配具有模式 n 次的行](https://stackoverflow.com/questions/6005794/match-lines-with-pattern-n-times-in-the-same-line)）但是，当我尝试某些命令时，它的行为方式与我不同需要。

例如，下面的代码用点替换了所有内容......虽然我知道这是因为它是全局替换，但它似乎适用于 lodge。

```
 awk '{ if (gsub(/./, ".") >= 8) print }' merged.vcf > test.vcf 
```

这是我的文件的一个例子（在这个例子中我只包括第 11 列）：

```
 #CHROM  POS  ID  REF ALT QUAL    FILTER  INFO    FORMAT  AD0062-C AD0065-C
      2L     560 .   T   C   30.65   PASS    AC=3    GT:GQ:PL    .       .
      2L     595 .   G   T   61.75   PASS    AC=11   GT:GQ:PL    .   0/1:13:132,0,10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:29:19.557

如果您想检查第 10 - 25 列是否完全正确`.`，请执行以下操作：

```
awk '{c=0; for( i = 10; i <= 25; i++ ) c += $i ~ /^\.$/;
    if( c >= 8 ) print }' input 
```

如果您只关心这些列是否包含 a `.`，请忽略`^`and `$`。

# c# - 使用 StreamReader 捕获 Web 流的 IP 地址返回太多数据

> ID：11633709
> 
> 赞同：-1
> 
> 时间：2012-07-24T15:01:55.400
> 
> 标签：c#, asp.net

我有这段代码：

```
WebClient web = new WebClient();
System.IO.Stream stream = web.OpenRead("http://url/getAddress.html");
string text = "";
using (System.IO.StreamReader reader = new System.IO.StreamReader(stream))
{
     text = reader.ReadToEnd();
     reader.Close();
} 
```

HTML 中的结果是 IP 地址，但是当我尝试将此结果保存到数据库中时，返回的结果是 Web 请求的整个 html 页面。我究竟做错了什么？

例子：

**文本**有结果

如果我这样做，`Response.Write(text);`它会返回：**111.222.33.3**

如果我尝试保存返回值的变量**文本**，这将保存 Web 请求页面中的整个 html 内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:04:43.947

您是否意识到，如果您写入`Response`对象，就会在网页上格式化 HTML？这只是格式化您从网页收到的 HTML。您需要解析获得的 HTML 以获取您正在寻找的实际数据，采用您想要的格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T15:35:17.630

```
public static String GetIP()
{
    String ip = 
        HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

    if (string.IsNullOrEmpty(ip))
    {
        ip = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
    }

    return ip;
} 
```

我找到了这个解决方案，非常适合我想要的

# java - 在 Java 中删除反斜杠和换行符（一起出现）

> ID：11633710
> 
> 赞同：1
> 
> 时间：2012-07-24T15:01:59.267
> 
> 标签：java, regex

我有来自不同提要的数据流，我需要清理这些数据流。

数据采用特定格式，如果某些句子跨越多行，则使用“\”（反斜杠）分隔，我想删除它。\ 也出现在文本的其他部分，用于转义引号等，我不想删除这些反斜杠。所以最终我想删除“\\n”。

我尝试按照正则表达式删除 \ 和 \n 但它不起作用：

`singleLine.replaceAll("(\\\\n|\\\\r)", "");`

我不确定在这种情况下什么正则表达式会起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:06:50.683

正则表达式对此并不真正必要。如果我是你，我会用...

```
singleLine=singleLine.replace("\\\\n", ""); 
```

很多人认为replace方法只替换一个，但实际上唯一的区别是replaceAll使用的是正则表达式，而replace只是替换String的完全匹配。

但是，如果您确实想使用正则表达式，我相信您必须这样做 \\\\\\\\ （您必须在Java和正则表达式中“取消”转义字符，所以x4，而不仅仅是x2）

再解释一下

唯一的另一个问题是在您的示例中，您从未将 singLine 设置为等于任何值；我不确定你是隐藏了还是错过了。

编辑：进一步解释 \\\\\\\\ 的原因，Java 要求您使用 "\\" 来表示一个 \。正则表达式还可以使用 \ 字符，并要求您再次为它做同样的事情。如果您只是在 Java 中使用“\\”，则正则表达式解析器本质上会接收“\”，它是某些事物的转义字符。您需要给正则表达式解析器其中两个以进行转义，因此在 Java 中，您需要执行 "\\\\" 来表示单个 "\" 的匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:06:30.320

该正则表达式中的每个模式都需要**5 个**反斜杠字符。

采用：

```
singleLine.replaceAll("(\\\\\n|\\\\\r)", ""); 
```

反斜杠字符既是字符串**中**的转义序列，也是正则表达式中的转义序列。因此，要在正则表达式中表示文字`\`，您需要使用**4 个** `\`字符 - 您的正则表达式需要`\\`得到一个转义的反斜杠，并且**每个**都需要在 java 中转义`String`- 然后另一个来表示`\n`or `\r`。

```
String str = "string with \\\n newline and \\\n newline ...";
String repl = str.replaceAll("(\\\\\n|\\\\\r)", "");
System.out.println("str: " + str);
System.out.println("repl: " + repl); 
```

输出：

```
STR: string with \
 newline and \
 newline ...
REPL: string with  newline and  newline ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:06:49.457

由于 String 的不可变性，您需要将返回值分配给另一个 String 对象或同一个对象。

```
singleLine = singleLine.replaceAll("(\\\\n|\\\\r)", ""); 
```

更多信息在[这里](https://stackoverflow.com/questions/11615305/cannot-to-replace-a-string-to-another-boolean-value-java/11615391#11615391)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T15:07:12.577

请记住，字符串是不可变的。这意味着 replaceAll() 不会*更改*singleLine 中的字符串。您必须使用返回值来获取修改后的字符串。例如，你可以做

```
singleLine = singleLine.replaceAll("(\\\\n|\\\\r)", ""); 
```

# javascript - 通过@Anywhere JavaScript API 获取推文

> ID：11633712
> 
> 赞同：0
> 
> 时间：2012-07-24T15:02:05.073
> 
> 标签：javascript, twitter, twitter-oauth, twitter-anywhere

我让用户有机会通过 OAuth 和 Twitter JavaScript api 登录，我想显示所有用户的推文。我在@Anywhere 的文档中找不到与 Facebook 的 FB.api('/me/feed') 等效的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:55:43.710

[@Anywhere](https://dev.twitter.com/docs/anywhere/welcome)传播登录的用户对象。

> 当用户连接时，currentUser 属性可用于检索有关登录用户的信息。用户对象有一个数据方法，该方法可以传递一个表示要检索的属性的字符串。

您可以在此处查询可以传递给 REST API 的 ID

```
<span id="twitter-connect-placeholder"></span>
<script type="text/javascript">

  twttr.anywhere(function (T) {

    var currentUser,
        screenName;

    if (T.isConnected()) {
      currentUser = T.currentUser;
      screenName = currentUser.data('screen_name');
      $.getJSON('http://api.twitter.com/1/users/show.json?callback=?',
      {
      screen_name: screenName //pass @Anywhere screenname here
  },
 function (data) {
      console.log(data.status); //get last tweet from the user
  });    
    }

  });

</script> 
```

# java - 如何更有效地从互联网获取数据？

> ID：11633714
> 
> 赞同：2
> 
> 时间：2012-07-24T15:02:17.317
> 
> 标签：java, android

在我的应用程序中，我从公共 URL 发出请求，然后打开网页的源代码，最后从源代码中提取我想要的信息。我对整个过程没有任何问题。但是，加载我想要的信息需要很长时间。我还有其他有效的方法吗？

```
public class GetMethodEx {

    public String getInternetData(String currentUrl) throws Exception{
        BufferedReader in = null;
        String data = null;
        try{
            HttpClient client = new DefaultHttpClient();
            URI website = new URI(currentUrl);
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while((l = in.readLine()) !=null){
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;
        }finally{
            if (in != null){
                try{
                    in.close();
                    return data;
                }catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:25:27.617

使用 StringBuffer 下载大文本确实效率不高，因为 html 文件就是其中之一。由于您正在阅读行 java 必须为您正在阅读的每一行分配内存，只是为了将内存中复制的所有内容复制到 StringBuffer 中，这会导致密集的 GC 工作。然后 StringBuffer 具有固定大小，因此您的程序可能会达到超出 StringBuffers 大小的点，这会导致调整 StringBuffer 的大小，从而导致将 Buffer 中的所有内容复制到新的中。因此，您宁愿尝试获取您请求的 html 文档的大小，并将所有内容读入 char 数组。这可能行不通，因为 http 允许以可变大小的块传输数据。如果是这种情况，这是您可以做什么的想法：

```
String html = "";
CharBuffer buff = CharBuffer.allocate(16384);

int read = in.read(buff);
while(read > -1) {
    while(read > -1 && buff.remaining > 0) {
        read = in.read(buff);
    }
    html += new String(buff.array());
    buff.clear();
} 
```

# php - Google Drive SDK：在 PHP 中插入文件导致无标题

> ID：11633722
> 
> 赞同：0
> 
> 时间：2012-07-24T15:02:44.477
> 
> 标签：php, google-drive-api

我确实知道前两个帖子：

*   [PHP Google Drive API - 文件上传仅作为“无标题” - 文件或只是没有内容](https://stackoverflow.com/questions/11576700/php-google-drive-api-file-upload-only-as-untitled-file-or-just-without-conte)
*   [Google Drive PHP SDK 保存一个未命名的文件](https://stackoverflow.com/questions/11284700/google-drive-php-sdk-saves-an-untitled-file)

但是除了回答“你确定你使用的是最新版本吗”之外，没有一个提问者回来说是或否，或者他们是否设法找到了答案。

因为我和他们做同样的事情，**所以我使用的是最新的 apiDriveService.php**，最后一次修订是 2012 年 6 月。

正确找到了数据，但是当您到达插入行时，显然会发生错误。

而且我不明白为什么对于 SDK php 示例，它似乎是正确的。

这是 Google Api 控制台中的问题吗？还是我需要将数据编码为特殊的东西？

编辑：在 apiDriveService 文件中，我可以看到这一行：

```
$this->files = new FilesServiceResource($this, $this->serviceName, 'files', json_decode('{"methods": {
"insert": {"scopes": ["https://www.googleapis.com/auth/drive", "https://www.googleapis.com/auth/drive.file"],
"parameters": {"convert": {"default": "false", "type": "boolean", "location": "query"}, "targetLanguage": {"type": "string", "location": "query"}, "sourceLanguage": {"type": "string", "location": "query"}, "ocrLanguage": {"type": "string", "location": "query"}, "pinned": {"default": "false", "type": "boolean", "location": "query"}, "ocr": {"default": "false", "type": "boolean", "location": "query"}, "timedTextTrackName": {"type": "string", "location": "query"}, "timedTextLanguage": {"type": "string", "location": "query"}}, "supportsMediaUpload": true, "request": {"$ref": "File"}, "mediaUpload": {"maxSize": "10GB", "accept": ["*/*"], "protocols": {"simple": {"path": "/upload/drive/v2/files", "multipart": true}, "resumable": {"path": "/resumable/upload/drive/v2/files", "multipart": true}}}, "id": "drive.files.insert", "httpMethod": "POST", "path": "files", "response": {"$ref": "File"}}, ...); 
```

在我发送的参数中，有**data 和 mimetype**：

```
$created = $apiService->files->insert($driveFile, array('data' => $data,'mimeType' => $mimeType)); 
```

在插入函数中，有一个带有数据和 mimetype 的 array_merge：

```
public function insert(DriveFile $postBody, $optParams = array()) {
  $params = array('postBody' => $postBody);
  $params = array_merge($params, $optParams);
  $data = $this->__call('insert', array($params));
  if ($this->useObjects()) {
    return new DriveFile($data);
  } else {
    return $data;
  }
} 
```

我在上面提到的行的插入部分没有找到它们。它与此有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:34:17.457

只需查看来自 Google SVN 的当前 API 客户端。 [http://code.google.com/p/google-api-php-client/source/checkout](http://code.google.com/p/google-api-php-client/source/checkout) 我们遇到了同样的问题，但是在进行 svn 结帐后，它神奇地起作用了，感谢 Alain 和 Claudio 对此的迅速反应.

# javascript - 带有 jQ uery 和 Masked Input 插件的电话掩码

> ID：11633726
> 
> 赞同：29
> 
> 时间：2012-07-24T15:02:50.283
> 
> 标签：javascript, jquery, input, mask, maskedinput

我在使用 jQuery 和[Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)屏蔽电话输入时遇到问题。

有两种可能的格式：

1.  `(XX)XXXX-XXXX`
2.  `(XX)XXXXX-XXXX`

有没有办法掩盖它接受这两种情况？

编辑：

我试过：

```
$("#phone").mask("(99) 9999-9999"); 
$("#telf1").mask("(99) 9999*-9999");    
$("#telf1").mask("(99) 9999?-9999"); 
```

但它不像我想要的那样工作。

最接近的是 (xx)xxxx-xxxxx。

当我输入第 10 个数字时，我想得到 (xx)xxxx-xxxx，当我输入第 11 个数字时，我想得到 (xx)xxxxxx-xxxx。有可能吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-24T15:26:31.177

试试这个 - [http://jsfiddle.net/dKRGE/3/](http://jsfiddle.net/dKRGE/3/)

```
$("#phone").mask("(99) 9999?9-9999");

$("#phone").on("blur", function() {
    var last = $(this).val().substr( $(this).val().indexOf("-") + 1 );

    if( last.length == 3 ) {
        var move = $(this).val().substr( $(this).val().indexOf("-") - 1, 1 );
        var lastfour = move + last;
        var first = $(this).val().substr( 0, 9 );

        $(this).val( first + '-' + lastfour );
    }
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-09T18:29:33.237

这是一个 jQuery 电话号码掩码。无需插件。格式可以根据您的需要进行调整。

[更新了 JSFiddle](http://jsfiddle.net/VpNMA/2560/)。

HTML

```
<form id="example-form" name="my-form">
    <input id="phone-number" name="phone-number" type="text" placeholder="(XXX) XXX-XXXX">
</form> 
```

JavaScript

```
$('#phone-number', '#example-form')

.keydown(function (e) {
    var key = e.which || e.charCode || e.keyCode || 0;
    $phone = $(this);

    // Don't let them remove the starting '('
    if ($phone.val().length === 1 && (key === 8 || key === 46)) {
        $phone.val('('); 
        return false;
    } 
    // Reset if they highlight and type over first char.
    else if ($phone.val().charAt(0) !== '(') {
        $phone.val('('+$phone.val()); 
    }

    // Auto-format- do not expose the mask as the user begins to type
    if (key !== 8 && key !== 9) {
        if ($phone.val().length === 4) {
            $phone.val($phone.val() + ')');
        }
        if ($phone.val().length === 5) {
            $phone.val($phone.val() + ' ');
        }           
        if ($phone.val().length === 9) {
            $phone.val($phone.val() + '-');
        }
    }

    // Allow numeric (and tab, backspace, delete) keys only
    return (key == 8 || 
            key == 9 ||
            key == 46 ||
            (key >= 48 && key <= 57) ||
            (key >= 96 && key <= 105)); 
})

.bind('focus click', function () {
    $phone = $(this);

    if ($phone.val().length === 0) {
        $phone.val('(');
    }
    else {
        var val = $phone.val();
        $phone.val('').val(val); // Ensure cursor remains at the end
    }
})

.blur(function () {
    $phone = $(this);

    if ($phone.val() === '(') {
        $phone.val('');
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-06T15:57:50.070

**您还需要一个 jQuery 插件才能使面具工作。**

-- HTML --

```
<input type="text" id="phone" placeholder="(99) 9999-9999">
<input type="text" id="telf1" placeholder="(99) 9999*-9999">
<input type="text" id="telf2" placeholder="(99) 9999?-9999"> 
```

-- JAVASCRIPT --

```
<script src="https://raw.githubusercontent.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js"></script>
<script>
$(document).ready(function($){
    $("#phone").mask("(99) 9999-9999"); 
    $("#telf1").mask("(99) 9999*-9999");    
    $("#telf2").mask("(99) 9999?-9999"); 
});
</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-10T02:29:06.373

实际上正确的答案在[http://jsfiddle.net/HDakN/](http://jsfiddle.net/HDakN/)

Zoltan 回答将允许用户输入“(99) 9999”，然后使该字段不完整

```
$("#phone").mask("(99) 9999-9999?9");

$("#phone").on("blur", function() {
    var last = $(this).val().substr( $(this).val().indexOf("-") + 1 );

    if( last.length == 5 ) {
        var move = $(this).val().substr( $(this).val().indexOf("-") + 1, 1 );

        var lastfour = last.substr(1,4);

        var first = $(this).val().substr( 0, 9 );

        $(this).val( first + move + '-' + lastfour );
    }
});​ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-23T15:14:18.040

您可以将电话别名与 Inputmask v3 一起使用

```
$('#phone').inputmask({ alias: "phone", "clearIncomplete": true }); 
```

```
$(function() {
  $('input[type="tel"]').inputmask({ alias: "phone", "clearIncomplete": true });
});
```

```
<label for="phone">Phone</label>
    <input name="phone" type="tel">

<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/inputmask.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/inputmask.extensions.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/inputmask.numeric.extensions.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/inputmask.date.extensions.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/inputmask.phone.extensions.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/jquery.inputmask.js"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/Inputmask@3.3.7/dist/inputmask/phone-codes/phone.js"></script>
```

[https://github.com/RobinHerbots/Inputmask#aliases](https://github.com/RobinHerbots/Inputmask#aliases)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-06T22:15:19.377

使用 jQuery Mask Plugin 有两种可能的方式来实现它：

1- 遵循 Anatel 的建议： [https ://gist.github.com/3724610/5003f97804ea1e62a3182e21c3b0d3ae3b657dd9](https://gist.github.com/3724610/5003f97804ea1e62a3182e21c3b0d3ae3b657dd9)

2-或不遵循 Anatel 的建议： [https ://gist.github.com/igorescobar/5327820](https://gist.github.com/igorescobar/5327820)

上面的所有示例都是使用 jQuery Mask 插件编写的，可以在以下位置下载：http: [//igorescobar.github.io/jQuery-Mask-Plugin/](http://igorescobar.github.io/jQuery-Mask-Plugin/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-29T21:51:24.773

```
var $phone = $("#input_id");
var maskOptions = {onKeyPress: function(phone) {
    var masks = ['(00) 0000-0000', '(00) 00000-0000'];
    mask = phone.match(/^\([0-9]{2}\) 9/g)
        ? masks[1]
        : masks[0];
    $phone.mask(mask, this);
}};
$phone.mask('(00) 0000-0000', maskOptions); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-13T15:56:36.137

**使用 jquery.mask.js**

[http://jsfiddle.net/brynner/f9kd0aes/](http://jsfiddle.net/brynner/f9kd0aes/)

HTML

```
<input type="text" class="phone" maxlength="15" value="85999998888">
<input type="text" class="phone" maxlength="15" value="8533334444"> 
```

JS

```
// Function
function phoneMask(e){
    var s=e.val();
    var s=s.replace(/[_\W]+/g,'');
    var n=s.length;
    if(n<11){var m='(00) 0000-00000';}else{var m='(00) 00000-00000';}
    $(e).mask(m);
}

// Type
$('body').on('keyup','.phone',function(){   
    phoneMask($(this));
});

// On load
$('.phone').keyup(); 
```

**只有 jQuery**

[http://jsfiddle.net/brynner/6vbrqe6z/](http://jsfiddle.net/brynner/6vbrqe6z/)

HTML

```
<p class="phone">85999998888</p>
<p class="phone">8599998888</p> 
```

jQuery

```
$('.phone').text(function(i, text) {
    var n = (text.length)-6;
    if(n==4){var p=n;}else{var p=5;}
    var regex = new RegExp('(\\d{2})(\\d{'+p+'})(\\d{4})');
    var text = text.replace(regex, "($1) $2-$3");
    return text;
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-03T13:18:05.080

最好的方法是使用如下的*更改*事件：

```
$("#phone")
.mask("(99) 9999?9-9999")
.on("change", function() {

    var last = $(this).val().substr( $(this).val().indexOf("-") + 1 );

    if( last.length == 3 ) {
        var move = $(this).val().substr( $(this).val().indexOf("-") - 1, 1 );
        var lastfour = move + last;
        var first = $(this).val().substr( 0, 9 ); // Change 9 to 8 if you prefer mask without space: (99)9999?9-9999

        $(this).val( first + '-' + lastfour );
    }
})
.change(); // Trigger the event change to adjust the mask when the value comes setted. Useful on edit forms. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-17T14:35:15.133

在模糊上做到这一点的最佳方法是：

```
 function formatPhone(obj) {
                        if (obj.value != "")
                        { 
                            var numbers = obj.value.replace(/\D/g, ''),
                            char = {0:'(',3:') ',6:' - '};
                            obj.value = '';
                            upto = numbers.length; 

                            if(numbers.length < 10) 
                            { 
                                upto = numbers.length; 
                            }
                            else
                            { 
                                upto = 10; 
                            }
                            for (var i = 0; i < upto; i++) {
                                obj.value += (char[i]||'') + numbers[i];
                            }
                        } 
                    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-16T05:29:13.827

[作为替代](http://jsbin.com/defijo/5/edit?html,js,output)

```
 function FormatPhone(tt,e){
  //console.log(e.which);
  var t = $(tt);
  var v1 = t.val();
  var k = e.which;
  if(k!=8 && v1.length===18){
    e.preventDefault();
  }
  var q = String.fromCharCode((96 <= k && k <= 105)? k-48 : k);
  if (((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) && e.keyCode!=46 && e.keyCode!=37 && e.keyCode!=8 && e.keyCode!=39) {
 e.preventDefault();
  }
  else{
    setTimeout(function(){
      var v = t.val();
      var l = v.length;
      //console.log(l);
      if(k!=8){
        if(l<4){
          t.val('+7 ');
        }
        else if(l===4){
          if(isNaN(q)){
            t.val('+7 (');
          }
          else{
            t.val('+7 ('+q);
          }
        }
        else if(l===7){
          t.val(v+')');
        }
        else if(l===9){
          t.val(v1+' '+q);
        }
        else if(l===13||l===16){
          t.val(v1+'-'+q);
        }
        else if(l>18){
          v=v.substr(0,18);
          t.val(v);
        }
        }
        else{
          if(l<4){
            t.val('+7 ');
          }
        }
    },100);
  }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-22T13:53:27.257

我在输入字段上开发了简单易用的掩码到美国电话格式[**jquery-input-mask-phone-number**](https://www.npmjs.com/package/jquery-input-mask-phone-number)

将[**jquery-input-mask-phone-number**](https://www.npmjs.com/package/jquery-input-mask-phone-number)插件添加到您的 HTML 文件中并调用 usPhoneFormat 方法。

```
$(document).ready(function () {
    $('#yourphone').usPhoneFormat({
        format: '(xxx) xxx-xxxx',
    });   
}); 
```

工作 JSFiddle 链接[https://jsfiddle.net/1kbat1nb/](https://jsfiddle.net/1kbat1nb/)

NPM 参考网址[https://www.npmjs.com/package/jquery-input-mask-phone-number](https://www.npmjs.com/package/jquery-input-mask-phone-number)

GitHub 参考网址[https://github.com/rajaramtt/jquery-input-mask-phone-number](https://github.com/rajaramtt/jquery-input-mask-phone-number)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-24T19:45:31.720

如果您不想将掩码显示为占位符，则应使用[jQuery Mask Plugin](http://igorescobar.github.io/jQuery-Mask-Plugin/)。

最干净的方法：

```
var options =  {
    onKeyPress: function(phone, e, field, options) {
        var masks = ['(00) 0000-00000', '(00) 00000-0000'];
        var mask = (phone.length>14) ? masks[1] : masks[0];
        $('.phone-input').mask(mask, options);
    }
};

$('.phone-input').mask('(00) 0000-00000', options); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-23T17:59:41.803

是的，使用这个

```
$("#phone").inputmask({"mask": "(99) 9999 - 9999"}); 
```

[链接在这里](https://codepen.io/anon/pen/exNJwj)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-29T17:38:28.963

```
$('.phone').focus(function(e) {
    // add mask
    $('.phone')
        .mask("(99) 99999999?9")
        .focusin(function(event)
        {
            $(this).unmask();
            $(this).mask("(99) 99999999?9");
        })
        .focusout(function(event)
        {
            var phone, element;
            element = $(this);
            phone = element.val().replace(/\D/g, '');
            element.unmask();

            if (phone.length > 10) {
                element.mask("(99) 99999-999?9");
            } else {
                element.mask("(99) 9999-9999?9");
            }
        }
    );
}); 
```

# xaml - fsharp 类字段的初始化

> ID：11633730
> 
> 赞同：1
> 
> 时间：2012-07-24T15:02:59.513
> 
> 标签：xaml, f#, initialization

我有一个绑定到 XAML 文件的类。
在第一次调用它时，字段 selectedudl 为 = null。

你知道为什么会这样吗？
我本来希望它是 = "" ..

```
type QuotesViewModel() =
    inherit ViewModelBase()
    let mutable histo = Array.empty
    let mutable selectedudl = ""

    member x.GetUnderlyings = seq { yield "one"; yield "two"}

    member x.SelectedUdl 
      with get() = selectedudl
      and set value = 
               selectedudl  <- value
               x.OnPropertyChanged <@ x.SelectedUdl @>
               x.OnPropertyChanged <@ x.SelectedGraph @>

    member x.SelectedGraph 
      with get() = 
               let graph  = asyncquotes.visualizehistoForUdl  selectedudl
               let host =  new System.Windows.Forms.Integration.WindowsFormsHost()
               host.Child <- new ChartControl(graph, Dock = DockStyle.Fill)
               host 
```

# html - 由于 zIndex，超链接无法正常工作

> ID：11633733
> 
> 赞同：1
> 
> 时间：2012-07-24T15:03:04.353
> 
> 标签：html, css, z-index

我有一个生成旋转滑块的代码，显示的图像应该是可点击的，这是其中的代码片段，

```
 <a href="http://interface.eyecon.ro/demos/images/imagebox/bw1.jpg"
     title="Moon eclipse"
     rel="imagebox" 
     style="top: 20.759592462354455px; left: 222.80008662503428px; width: 52px; height: 26px; z-index: 3; ">
     <img src="./Website_files/th_bw1.jpg" width="100%">
 </a> 
```

滑块上显示的链接不起作用。如您所见，该链接使用 zIndex，我确信这会导致链接无法正常工作，但我无法决定应该采取什么措施来解决此问题。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:35:57.737

检查是否`DOM element`是绝对的`parent`，我有同样的问题。

这是一个[例子](http://jsfiddle.net/k8Cgm/29/)。

**编辑：** 您应该添加一个类，女巫会告诉该元素它对父元素是绝对的，所有其他元素应该是绝对的，`z-index < 3`然后链接应该是可点击的。

**编辑[2]：** 您能否给出一些使用代码的 jsfiddle 示例，以便我可以对其进行更改以使其正常工作！

**编辑[3]：**基本上即使它把一个对象放入某个东西，你应该能够将它分配给`element <a>`父`position: absolute`级，然后该`z-index`属性将起作用。

# php - Pingdom 监控工具检测 HTTP 302 发现间歇性响应

> ID：11633735
> 
> 赞同：0
> 
> 时间：2012-07-24T15:03:09.890
> 
> 标签：php, http, redirect, monitoring, pingdom

[在使用Pingdom](http://www.pingdom.com/)监控工具检查我的网站状态时，我遇到了间歇性问题。

每隔 10 到 15 分钟，我就会收到一条警报，提示已找到 302。我无法理解的是 - 我没有做任何 302 临时重定向。但是，我正在执行 301 重定向（在某些情况下）。

这可能是 Pingdom 的误报吗？

此外，我在执行此操作的代码中有一个重定向。在这里不指定 HTTP 响应代码会导致问题吗？

```
header('Location: http://www.ayrshireminis.com');
exit(); 
```

Pingdom 数据：

```
Request 1
GET / HTTP/1.0
User-Agent: Pingdom.com_bot_version_1.4_(http://www.pingdom.com/)
Host: www.ayrshireminis.com

Received header
302 Found
Date: Tue, 24 Jul 2012 13:13:25 GMT
Server: Apache
Set-Cookie: prev_session_id=2a7001f5caa79bd36995953bf4853675; expires=Thu, 23-Aug-2012 13:13:25 GMT; path=/; domain=ayrshireminis.com
Location: http://www.ayrshireminis.com/
Vary: Accept-Encoding
Connection: close
Content-Type: text/html; charset=ISO-8859-1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:09:53.973

在我看来，响应中设置了 cookie，然后将您重定向到同一页面。因为 Pingdom 使用了许多不同的监控源，这种 cookie 重定向行为会导致很多问题。再说一次，您可能需要它来供实际的网站访问者使用。

我建议不要为 Pingdom 创建一个单独的 /status 页面，而不是监视网页的根：

1.  不设置或使用 cookie
2.  对应用程序和支持服务执行廉价的端到端健康检查
3.  仅当一切检查正常时才返回 200 响应代码

# php - Wordpress - 使用 jQuery ajax POST 请求获取用户信息

> ID：11633739
> 
> 赞同：2
> 
> 时间：2012-07-24T15:03:14.897
> 
> 标签：php, jquery, wordpress

我在 Wordpress 中工作，尝试使用 ajax 请求通过传递用户 ID 来获取用户数据。

我可以看到用户 ID 通过 AJAX POST 正确发送，但我收到一条内部错误消息，我不知道为什么。

起初我认为这是因为我试图获取一些已添加到用户配置文件中的自定义字段，但即使我简化了脚本，我仍然会收到错误消息。

任何帮助深表感谢！

**前端**

```
$('.author').click(function() {

    var id   = $(this).attr('id');
    var temp = id.split('-');
    id = temp[1];

    $.ajax({
            type: 'POST',
            url: 'wp-content/themes/twentyeleven/author_info.php',
            data: {id: id},
            dataType: 'html',
            success: function(data) {
                $('#author-bio').html(data);        
            }
        });     

    return false;
}); 
```

**作者信息.php**

```
$user_id = $_POST['id'];
$forename = get_the_author_meta('user_firstname', $user_id);
$output = $user_id;
echo $output; 
```

**错误信息**

`500 (Internal Server Error) jquery.min.js:4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:31:58.723

Mathieu 添加了一种可破解的方法来拦截请求并重定向它，这很好。我更喜欢构建返回`json_encoded`数组的 AJAX 响应。

```
$('.author').click(function() {

  var id   = $(this).attr('id');
  var temp = id.split('-');
  id = temp[1];

  $.ajax({
    url: 'http://absolute.path/wp-admin/admin-ajax.php',
    data: {'action' : 'ajax_request', 'fn': 'getAuthorMeta', 'id': id},
    dataType: 'json',
    success: function(data) {
      //We expect a JSON encoded array here, not an HTML template.       
    }
  });     
  return false;
}); 
```

现在我们构建函数来处理我们的 ajax 请求。

首先，我们需要定义我们的 ajax add_action 方法 ->

```
add_action('wp_ajax_nopriv_ajax_request', 'ajax_handle_request');
add_action('wp_ajax_ajax_request', 'ajax_handle_request'); 
```

我们需要在`add_action`这里使用两条线。我不会解释为什么。你会注意到`_ajax_request`这里。这是我们在 AJAX 函数中发送的“动作” `data: {'action' : 'ajax_request'}`。我们使用这个钩子来验证我们的 AJAX 请求，它可以是任何你想要的。

接下来，我们需要构建 out 或 function `ajax_handle_request`。

```
function ajax_handle_request(){
  switch($_REQUEST['fn']){
    case 'getAuthorMeta':
      $output = ajax_get_author_meta($_REQUEST['id']);
      break;
    default:
      $output = 'That is not a valid FN parameter. Please check your string and try again';
      break;
  }
  $output = json_encode($output);
  if(is_array($output)){
    return $output;
  }else{
    echo $output;
  }
} 
```

现在让我们构建我们的函数来实际获取作者元数据。

```
function ajax_get_author_meta($id){
  $theMeta = get_the_author_meta([meta_option], $id);
  return $theMeta;
} 
```

其中 [meta_option] 是[WP 原生 get_the_author_meta 函数提供的字段](http://codex.wordpress.org/Function_Reference/get_the_author_meta)。

在这一点上，我们现在将回到我们的`success:function(data)`and (data) 是对`json_encoded`我们返回的数组的引用。我们现在可以遍历对象以获取我们的字段并根据需要将它们输出到页面中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:19:36.310

您当时不在 POST 中，因为您正在调用模板的特定页面，该页面可能与您博客中的任何文章都不对应。

相反，请创建一个插件来执行此操作：

```
add_action('template_redirect', 'my_author_meta_intercept');
function my_author_meta_intercept(){
    if(isset($_POST['getAuthorMeta'])){
        echo get_the_author_meta('user_firstname', $_POST['getAuthorMeta']);
        exit();
    }
} 
```

当您使用以下命令调用它时，这会将请求短路到与以前相同的页面：

```
http://mysite/mycurrenturl?getAuthorMeta=testMetaKey 
```

因此，正常调用该帖子将照常返回文章，但如果您传入 ?getAuthorMeta，它将停止选择模板并简单地返回您希望它返回的确切内容。

在您的页面中，您只需将 javascript 更改为：

```
$('.author').click(function() {

    var id   = $(this).attr('id');
    var temp = id.split('-');
    id = temp[1];

    $.ajax({
            type: 'POST',
            url: window.location.href,
            data: {getAuthorMeta: id},
            success: function(data) {
                $('#author-bio').html(data);        
            }
        });     

    return false;
}); 
```

只要确保您根据需要调整概念即可！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T15:33:20.853

我宁愿推荐你使用[WP AJAX 操作方法](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_ajax_%28action%29)。

与您的情况一样，将以下内容添加到您的 functions.php 文件中。

```
 add_action('wp_ajax_get_user_info', 'ajax_get_user_info');
 add_action('wp_ajax_nopriv_get_user_info', 'ajax_get_user_info');

 function ajax_get_user_info() {
    //Handle request then generate response using WP_Ajax_Response or your html.
 } 
```

然后在javascript标签中。

```
$('.author').click(function() {

    var id   = $(this).attr('id');
    var temp = id.split('-');
    id = temp[1];

jQuery.post(
   ajaxurl,  /* if you get error of undefined ajaxurl. set it to "http://example.com/wordpress/wp-admin/admin-ajax.php"*/
   {
      'action':'get_user_info',
      'user_id':id
   }, 
   function(response){
      alert('The server responded: ' + response);
   }
);
}); 
```

我建议您阅读[在 WordPress 中使用 AJAX 的 5 个技巧](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress)。

ps; 以上代码未经测试，可能有错误。但你明白了。

# php - 使用两个表 JOIN 显示关系，还是使用 PHP 函数？

> ID：11633743
> 
> 赞同：0
> 
> 时间：2012-07-24T15:03:31.840
> 
> 标签：php, mysql, database

我正在做一个微博网站。用户可以互相关注。我必须根据当前用户关注的用户（如 Twitter）为当前用户（ $userid ）制作帖子流（活动流）。我知道实现这一点的两种方法。哪一个更好？

表：

表：帖子
列：PostID、AuthorID、TimeStamp、Content

表：关注
列：海报、关注者

第**一种方式**，通过加入这两个表：

```
select `posts`.* from `posts`,`follow` where `follow`.`follower`='$userid' and 
`posts`.`AuthorID`=`follow`.`poster` order by `posts`.`postid` desc 
```

第二种**方法**是通过创建一个用户数组 $userid 正在关注（海报），然后在这个数组上执行 php 内爆，然后在其中执行：

我想在这里告诉你的一件事是我正在存储数字用户在 `user` 表的 `following` 记录中关注的用户数，所以在这里我将使用这个数字作为提取海报列表时的限制 - 'followingList'：

```
function followingList($userid){
    $listArray=array();
    $limit="select `following` from `users` where `userid`='$userid' limit 1";
    $limit=mysql_query($limit);
    $limit=mysql_fetch_row($limit);
    $limit= (int) $limit[0];
    $sql="select `poster` from `follow` where `follower`='$userid' limit $limit";
    $result=mysql_query($sql);
    while($data = mysql_fetch_row($result)){
        $listArray[] = $data[0];
    }
    $posters=implode("','",$listArray);
    return $posters;
} 
```

现在，我有一个逗号分隔的用户 ID 列表，当前 $userid 正在遵循该列表。

现在选择帖子以制作活动流：

```
$posters=followingList($userid);
$sql = "select * from `posts` where (`AuthorID` in ('$posters')) 
order by `postid` desc"; 
```

* * *

这两种方法哪个更好？并且可以知道关注的总数（当前用户关注的用户数量），在第一种方法中使事情变得更快，就像在第二种方法中一样？
还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:11:21.137

您应该一直使用第一个选项。始终尽可能多地尝试在 mysql 服务器上而不是在您的 PHP 代码中处理数据。PHP 不会隐式缓存操作的结果，而 MySQL 会这样做。

最重要的是确保正确索引数据。尝试使用“EXPLAIN”语句以确保您已尽可能优化数据库并使用#1 将您的数据链接在一起。

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

这也将允许您稍后计算统计信息，而第二种方法需要您处理部分统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:39:07.223

第一个重要的一点是，PHP 擅长构建页面，但非常糟糕的是管理数据，PHP 操作的所有内容都会填满内存，并且 PHP 中不能应用任何特殊行为来防止使用过多内存，除了**崩溃**。

另一方面，datatase 的工作是分析表之间的关系，查询使用的实数（实际上是索引的基数和行上的静态以及索引的使用情况），并且引擎可以选择很多不同的机制，具体取决于数据的大小（合并连接、临时表等）。这意味着您可以拥有 256.278.242 个帖子和 145.268 个用户，平均拥有 5.684 个关注者，数据库的工作就是找到给您答案的最快方法。好吧，当您遇到非常大的数字时，您会发现所有数据库都不相同，但这是另一个问题。

在 PHP 方面，从第一个查询库中检索用户列表变得非常长（有大量关注的用户，比如说 15.000。简单地在内部构建带有 15000 个标识符的查询字符串将占用大量内存。Trasnferring这个对 SQL 服务器的新查询也会很慢。这绝对是错误的方式。

现在请注意构建 SQL 请求的方式。请求是您应该能够从头到尾阅读的内容，它解释了您真正想要的内容。这将有助于 SQL（良好）引擎选择正确的解决方案。

```
select `posts`.* 
from `posts`
  INNER JOIN `follow` ON posts`.`AuthorID`=`follow`.`poster`
where `follow`.`follower`='@userid' 
order by `posts`.`postid` desc
LIMIT 15 
```

几点说明：

*   我使用了 INNER JOIN。我想要一个 INNER JOIN，让我们来写吧，以后我会更容易阅读，查询分析器也应该是一样的。
*   如果 @userid 是 int，则不要使用引号。请使用整数作为标识符（这确实比字符串快）。并且在 PHP 端转换 int`"SELECT ..." . (int) $user_id ." ORDER ...`或使用带参数的查询（这是为了安全）。
*   我使用了 LIMIT 15，如果您想在帖子周围显示一些分页控制，也许也可以使用偏移量。假设此查询将从我的 5.642 个关注用户中检索 15.263 个文档，您不希望并且用户不希望在网页上显示这些 15.263 个文档。知道`$limit`这个数字是 15.263 是一件好事，但肯定不是请求限制。你知道这个数字，但如果数据库有一个好的查询分析器和一些好的内部统计数据，它也可能知道它。

请求限制有几个目标 1\. 限制从数据库传输到 PHP 脚本的数据大小 2\. 限制 PHP 脚本的内存使用量（一个包含 15.263 个文档的数组，其中包含一些 HTMl 内容……哎哟） 3\. 限制最终用户输出的大小（并获得更快的响应）

# asp.net - 数据库查询不运行，但也不抛出 SQL 异常

> ID：11633746
> 
> 赞同：0
> 
> 时间：2012-07-24T15:03:50.110
> 
> 标签：asp.net, visual-studio, sql-server-2008

我正在运行 C# .NET 代码，我需要测试已在网页表单中输入然后传递到服务器的某些值。然后，服务器在查询字符串中使用这些值来返回一个值。我将这些查询指令封装在一个 try-catch 块中，以便跟踪任何 Sql 异常。
问题是这样的：一旦应用程序启动，连接字符串被设置，查询运行，我没有从 catch 块的 SQL 异常中得到堆栈跟踪，而是在方法中得到一个空白/空值运行查询。该方法将返回一个布尔变量以指示是否从查询中读取了任何值，如果是，则返回 true 但是它总是返回 false 这不应该发生，因为我已经检查了它通过将其粘贴到 MS SQL 2008 中构建的查询字符串查询控制台并运行它。运行粘贴的 SQL 指令测试的结果确实会从查询中生成非空数据。非常感谢您的帮助。

我正在使用 IIS 6.0 运行 VS2003 并使用 MS SQL 2008 Enterprise Studio

# 这是 web.config 和 C# 代码的代码段。非常感谢您的帮助。：

```
<system.web>

    <!--  DYNAMIC DEBUG COMPILATION
          Set compilation debug="true" to enable ASPX debugging.  Otherwise, setting this value to
          false will improve runtime performance of this application. 
          Set compilation debug="true" to insert debugging symbols (.pdb information)
          into the compiled page. Because this creates a larger file that executes
          more slowly, you should set this value to true only when debugging and to
          false at all other times. For more information, refer to the documentation about
          debugging ASP.NET files.
    -->
    <compilation defaultLanguage="c#" debug="true" /> 
```

=====================

```
//This method takes one string and returns either country name or Canadian state as a string, according to query.
    private string candStateCountryCheck(string strQuery)
    {
        string strStateCountry = "";
        SqlConnection con = null;
        SqlCommand cmd = null;
        SqlDataReader sdr = null;

        try
        {   
            string strConnection = ConfigurationSettings.AppSettings["OLEDBConnectionString"];
            con = new SqlConnection(strConnection);
            con.Open();
            cmd = new SqlCommand(strQuery, con);
            sdr = cmd.ExecuteReader();

            if(sdr.Read())
            {
                strStateCountry = sdr.GetString(0);
            }
        }
        catch (Exception exc)
        {
            ErrorLabel.Text = "ERROR:" + exc.Message;
        }
        finally 
        {
            if (sdr != null)
                sdr.Close();
            if (cmd != null)
                cmd.Dispose();
            if (con != null)
                con.Close();
        }
        return strStateCountry;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:10:53.283

这应该可行，但我认为您应该`ExecuteScaler`用于单一结果查询。我还鼓励您使用参数化查询：

```
 while (sdr.Read())
 {
     strStateCountry = sdr.GetString(0);
 } 
```

[`ExucuteScaler`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)例子：

```
 try
    {
        string strConnection = ConfigurationSettings.AppSettings["OLEDBConnectionString"];
        using(SqlConnection con = new SqlConnection(strConnection))
        {
             con.Open();
             using(SqlCommand cmd = new SqlCommand(strQuery, con))
             {
                 strStateCountry = (String)cmd.ExecuteScalar();
             }
        }

    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:20:46.607

我会尽量避免任何不适用于 VS2003 的东西，但这会很难...... VS2003 现在已经很老了，你知道 VS2010 的快速版是免费的，对吧？

此外，如果它使用的是虚构的数据库，这是对您的代码的重新编写，以展示它*应该如何看待的更好示例。*您没有共享任何数据库结构、任何示例数据或查询的外观，所以这是我们目前能做的最好的事情：

```
private string candStateCountryCheck(string toTest)
{
    string sql = "SELECT countryStateName FROM SomeTable WHERE ItemKey LIKE @Query + '%';";

    try
    {   
        string strConnection = ConfigurationSettings.AppSettings["OLEDBConnectionString"];

        con = new SqlConnection(strConnection);
        cmd = new SqlCommand(sql, con);

        cmd.Parameters.Add("@Query", SqlDbType.VarChar, 50).Value = toTest;

        con.Open();
        return cmd.ExecuteScalar().ToString();
    }
    catch (Exception exc)
    {
        ErrorLabel.Text = "ERROR:" + exc.Message;
    }
    finally 
    {
        cmd.Dispose();
        con.Dispose();
    }
} 
```

您**永远**不想编写期望完整的 sql 代码作为参数的方法。

# drupal - Drupal 7 在用户个人资料页面上缺少编辑按钮

> ID：11633747
> 
> 赞同：0
> 
> 时间：2012-07-24T15:03:50.470
> 
> 标签：drupal, drupal-7, drupal-theming

我已经为 Drupal 7 完全定制了主题。在用户个人资料页面上没有编辑按钮。“历史”字段是唯一显示的东西。我知道我在主题化方面做错了。我需要做什么才能拥有这个按钮： ![缺少按钮](../Images/b4ebd8a9899d9a5643bb4b9fbbc19ca6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:27:33.290

[正如Boriana](https://stackoverflow.com/users/1342049/boriana)所指出的，这主要是一个许可问题。如果您的自定义主题中根本看不到任何选项卡，那么您很可能忘记打印呈现的选项卡或任务。在默认的 Drupal 主题中，选项卡使用`print render($tabs);`page.tpl.php 文件中的代码呈现；

如果您的主题基于不同的主题，那么您可能有不同的变量名。例如，当我使用自适应主题时，我有以下打印任务或选项卡的块。

```
 <?php if ($primary_local_tasks || $secondary_local_tasks || $action_links): ?>
                <div id="tasks" class="clearfix" role="navigation">
                  <?php if ($primary_local_tasks): ?>
                    <ul class="tabs primary clearfix"><?php print render($primary_local_tasks); ?></ul>
                  <?php endif; ?>
                  <?php if ($secondary_local_tasks): ?>
                    <ul class="tabs secondary clearfix"><?php print render($secondary_local_tasks); ?></ul>
                  <?php endif; ?>
                  <?php if ($action_links = render($action_links)): ?>
                    <ul class="action-links clearfix"><?php print $action_links; ?></ul>
                  <?php endif; ?>
                </div>
              <?php endif; ?> 
```

# c++ - “第一次机会例外......”消息中的十六进制数字是什么意思？

> ID：11633748
> 
> 赞同：7
> 
> 时间：2012-07-24T15:03:55.463
> 
> 标签：c++, exception-handling, first-chance-exception

例如，在消息中：

> foo.exe 中 0x757bd36f 处的第一次机会异常：Microsoft C++ 异常：_ASExceptionInfo 位于内存位置 0x001278cc..

0x757bd36f 和 0x001278cc 是什么意思？我认为 0x757bd36f 表示抛出异常时的 EIP，但是第二个数字呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:06:44.677

正如您所推测的，第一个是异常发生时的 EIP（或 RIP，对于 64-it 代码）。

做一些测试，第二个数字是被捕获的异常对象的地址。但是请记住，这*与*抛出的异常对象的地址不同。例如，我写了以下一段测试代码：

```
#include <iostream>
#include <conio.h>

class XXX { } xxx;

void thrower() { 
    throw xxx;
}

int main() {
    try {
        std::cout << "Address of xxx: " << (void *)&xxx << "\n";
        thrower();
    }
    catch(XXX const &x) {
        std::cout << "Address of x: " << (void *)&x << "\n";
    }
    getch();
    return 0;
} 
```

至少在我的测试中，VS 在其“第一次机会异常”消息中显示的第二个地址与我`x`在上面的代码中获得的地址匹配。

# javascript - 检查表格中的正确电子邮件

> ID：11633752
> 
> 赞同：2
> 
> 时间：2012-07-24T15:04:14.683
> 
> 标签：javascript, forms

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

我正在尝试使用此 javascript 来检查有效的电子邮件，但我不需要它做的是检查表单中的字段是否为空白，以防有人没有电子邮件地址（不要问）。

```
function validate_email(field,alerttxt)
{
with (field)
{
apos=value.indexOf("@");
dotpos=value.lastIndexOf(".");
if (apos<1||dotpos-apos<2) 
  {alert(alerttxt);return false;}
else {return true;}
}
}

function validate_form(thisform)
{
with (thisform)
{
  if (validate_email(email,"Not a valid e-mail address.")==false)
  {email.focus();return false;}
}
} 
```

我试图将 apos<1 调整为小于 1 或根本没有调整，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:10:50.090

只需检查它是否为空，否则在其上应用您的[电子邮件正则表达式](http://www.regular-expressions.info/email.html)/验证功能。

此外，您应该 a) 不使用`with`和 b) 不从测试功能发出警报。

```
function test_email(address) {
    var atpos = address.indexOf("@"),
        dotpos = address.lastIndexOf(".");
    if (atpos < 1) // "@" at position 0 or not found (-1)
        return false;
    if (dotpos-atpos < 2) // last "." before position 2 or not found (-1)
        return false;
    if (atpos > dotpos) // last "." before the "@"
        return false;
    return true;
}

function validate_form(thisform) {
    var input = thisform.email;
    if (input.value) // != ""
        if (!test_email(input.value)) {
            alert("Not a valid e-mail address.");
            email.focus();
            return false;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:26:24.467

正则表达式可能是最好的方法，前面的问题有一个很好的正则表达式可供使用，尽管有更复杂和完整的可用。[在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

采用该正则表达式并适合您的代码，您将拥有一个看起来像这样的函数

```
function validate_email(field,alerttxt) {
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    if (re.test(field)) {
        return true;
    } else {
        alert(alerttxt);
        return false;
    }
} 
```

# r - 使用markdown中的knitr后图表的细微变化

> ID：11633756
> 
> 赞同：8
> 
> 时间：2012-07-24T15:04:35.073
> 
> 标签：r, ggplot2, markdown, knitr

使用`knitr`和`markdown`包将 Rmd 文件编织到降价，然后 html 以 ggplot2 图形出现在最终 html 文件中的方式产生一些意外行为。

例如，使用下面的 Rmd 文件 diamond.Rmd

```
# ggplot2 graph shows up fainter, and text smaller

```{r echo=FALSE, message=FALSE, warning=FALSE}   
opts_chunk$set(fig.width=18, fig.height=10)
require(ggplot2)
```

***

# Simple Plot
```{r echo=FALSE, message=FALSE, warning=FALSE}   
data(diamonds)
g <- ggplot(diamonds, aes(carat, depth, colour=color)) + geom_point() + facet_wrap(~cut)
g 
``` 
```

用这个文件 knit.R

```
require(markdown)
require(knitr)
knit('diamonds.Rmd')
markdownToHTML('diamonds.md', 'diamonds.html', options=c('base64_images'))
browseURL(paste('file://', file.path(getwd(), 'diamonds.html'), sep='')) 
```

我在 html 文件中截取了该图的屏幕截图并将其包含在下面（有没有更好的方法来显示这个？）：

![从 html 文件绘制](../Images/7d84d0558baa28e4225d950cf93c8cc1.png)

html 文件内的绘图较浅，即颜色较暗。此外，图上的文本，包括轴标签和刻度线标签更小更轻，使得它们很难阅读。

如果您查看直接从 R 创建的绘图，您会发现它没有这些问题。

![直接从 R 绘图](../Images/3c15c76b0c014b9b4b46a9cca73fd110.png)

我猜这是我的图形设备或 knitr 正在使用的图形设备的一些问题。

有没有办法强制最终出现在 html 文件中的绘图保持原始绘图外观，即保持更暗并具有更大的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T13:28:56.037

正如@Ramnath 所建议的：

如果要保留相同的图形大小但具有更高的像素大小，请使用：

`fig.width = 9, fig.height = 5, dpi = 144`

默认 dpi 为 72，这将为您提供相同大小但具有更大像素和文本的绘图。

# ruby - Ruby optparse - 如何在脚本中使用它？

> ID：11633757
> 
> 赞同：0
> 
> 时间：2012-07-24T15:04:37.287
> 
> 标签：ruby

我是 Ruby 新手，我正在编写一个执行以下操作的脚本：

1.  接受命令行参数
2.  根据指定的参数删除一些目录。

我想要它做什么：

```
./admin_bin -c
Removing files in /opt/sysnovo/tmp and /opt/sysnovo/data 
```

我有这个工作！但是......它不是以*红宝石*的方式。

这是我的代码：

```
#!/usr/bin/env ruby
require 'rubygems'
require 'fileutils'
require 'optparse'

OptionParser.new do |o|
    o.on('-c') { |b| $clear = b }
    o.on('-h') { puts o; exit }
    o.parse!
end

# Two directories we want to specify.
tmp_dir = "/opt/sysnovo/tmp"
data_dir = "/opt/sysnovo/data"

# push this value to a variable so we can evaluate it.
test = $clear

if "#{test}" == "true"
    puts "Removing files in #{tmp_dir} and #{data_dir}"
    FileUtils.rm_rf("#{tmp_dir}/.", secure: true)
    FileUtils.rm_rf("#{data_dir}/.", secure: true)
else
    puts "Not removing files."
end 
```

如您所见，我将 $clear 设置为 #{test} 并基于此进行评估。我知道这是不正确的。这样做的正确方法是什么？稍后我将在此脚本中添加更多参数和功能。

PS我来自bash背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:14:13.177

Option Parser 使用 True/False 类来设置标志。你的测试应该是这样的：

如果你这样做`$clear.class`=> TrueClass。这是一个布尔值。

```
#!/usr/bin/env ruby
require 'fileutils'
require 'optparse'

OptionParser.new do |o|
    o.on('-c') { |b| $clear = b }
    o.on('-h') { puts o; exit }
    o.parse!
end

# Two directories we want to specify.
tmp_dir = "/opt/sysnovo/tmp"
data_dir = "/opt/sysnovo/data"

# push this value to a variable so we can evaluate it.

if $clear
    puts "Removing files in #{tmp_dir} and #{data_dir}"
    FileUtils.rm_rf("#{tmp_dir}/.", secure: true)
    FileUtils.rm_rf("#{data_dir}/.", secure: true)
else
    puts "Not removing files."
end 
```

`require 'rubygems'`如果您使用的是 ruby​​ <1.9，您也只需要这样做。

# java - 为什么 java 设计者强制要求如果 obj1.equals(obj2) 那么 obj1.hashCode() 必须是 == obj2.hashCode()

> ID：11633758
> 
> 赞同：3
> 
> 时间：2012-07-24T15:04:40.920
> 
> 标签：java, equals, hashcode

为什么 java 设计者强制要求如果 obj1.equals(obj2) 那么 obj1.hashCode() 必须是 == obj2.hashCode()

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T15:09:08.367

因为 HashMap 使用以下算法快速找到键：

*   获取`hashCode()`参数中的关键
*   从此哈希码推导出桶
*   将桶中的每个键与参数中的键（使用`equals()`）进行比较以找到正确的键

如果两个相等的对象没有相同的哈希码，那么算法的前两个步骤将不起作用。正是前两个步骤使 HashMap 变得非常快（O(1)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T15:06:39.793

没有授权。这是一个很好的做法，因为如果您的对象打算用于基于哈希的数据结构（如 HashMap/HashSet 等），这是一个必需条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:06:55.287

因为哈希码用于快速确定两个对象是否不相等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T15:09:59.183

据我所知，这并没有融入语言 - 从技术上讲，您可以拥有其 equals() 方法不检查哈希码的对象，但您会得到非常奇特的结果。

特别是，如果您将一堆这些对象放入 HashMap 或 HashSet 中，则映射/集合将使用 hashCode() 方法来确定对象是否可能是重复的 - 因此您可能会遇到一个集合将存储 2 个对象的情况已经定义为等于（这永远不会发生），因为它们每个都返回不同的哈希码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T15:07:22.363

它有两个步骤匹配以提高性能。

第一步：计算hashcode()

第二步：计算equals()

这是因为如果你把你的对象作为像 hashmap 这样的集合中的键，你的键将首先在 hashcode() 方法上进行比较，如果它找到匹配的 hashcode，然后继续计算 equals()。

**它类似于索引以获得更好的搜索性能**

# eclipse - 如何获取为 Eclipse 中的插件安装的文件列表？

> ID：11633760
> 
> 赞同：0
> 
> 时间：2012-07-24T15:04:43.103
> 
> 标签：eclipse

如果你下载一个 eclipse 插件包的存档（ZIP 文件）（同一个存档中的不同版本），内容通常如下：

*   特征
*   插件
*   工件.xml
*   内容.xml

如果插件 A 版本 X 的安装导致某些 jars 复制到 `eclipse folder\features`文件`eclipse folder\plugins`夹，有什么办法可以列出这些 jars，以便我可以将它们分开以用于本地备份的特定版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:01:33.817

深入查看 zip 文件。“功能”和“插件”是文件夹。

# c - 将 CFLAG（例如 -std=gnu99）添加到 (Eclipse CDT) autotools 项目的位置

> ID：11633763
> 
> 赞同：10
> 
> 时间：2012-07-24T15:04:54.433
> 
> 标签：c, eclipse, eclipse-cdt, autotools

我有一个简单的 Autotools C 项目（不是 C++），它的骨架是由 Eclipse CDT (Juno) 为我创建的。

CFLAG（通过检查）似乎是`-g -O2`.

我希望所有生成的 make 文件也`-std=gnu99`附加到 CFLAG，因为我使用`for (int i = 0; i < MAX; i++)`和类似的。

我显然可以破解 Makefile，但这会在`./configure`.

添加（或更改）代码所需的 CFLAG（而不是用户可能想要更改的那些 CFLAG）的正确位置在哪里？

PS 我想通过编辑文本文件（例如`Makefile.am`或`configure.ac`）来做到这一点，而不是在 Eclipse 中单击一个框，如果可能的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:12:55.000

只是遇到同样的问题。

这是解决方案，只需在配置选项的末尾添加 CFLAGS ：

![在此处输入图像描述](../Images/2b2c118b3290628bd25f94854e73bef0.png)

如果你想通过编辑来做到这一点`configure.ac`，只需添加`CFLAGS="$CFLAGS something"`到`configure.ac`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:12:05.227

如果您的意思是编译器的参数，请参见附件。(c++ 构建/设置/杂项![在此处输入图像描述](../Images/8d883dc5344e6b35f212e3e4912aa8fa.png))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T12:52:12.423

在 Eclipse Neon CDT 中，您还有一个“方言”设置，如下所示：

[![在此处输入图像描述](../Images/2b22987c5804f8f0b20300537942f88f.png)](https://i.stack.imgur.com/Zej8I.png)

# jquery - 即时创建标签并显示错误消息

> ID：11633764
> 
> 赞同：0
> 
> 时间：2012-07-24T15:05:00.253
> 
> 标签：jquery

如何使用 jquery 即时创建标签并为该标签分配一些错误消息。我想在顶部显示此消息。如何使用 jquery 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:08:35.377

```
$('<span></span>')
    .text('error message goes here')
    .appendTo('parent selector goes here'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:22:26.920

好吧，如果你想要它像 jQuery validate 一样动态运行，它最初会在 blur() 上启动它，如下所示：

```
$('.required').on('blur', function () {
   $(this).after('<span class="error">Required!</span>');
});​ 
```

其他逻辑，至于答案应该是什么，您必须添加它，但基础知识就在那里。

[jsFiddle 链接](http://jsfiddle.net/SqEaW/)

# c++ - Pugixml - 将 xml 元素内容转换为 C++ 数组

> ID：11633770
> 
> 赞同：0
> 
> 时间：2012-07-24T15:05:16.567
> 
> 标签：c++, xml, xsd, tinyxml, pugixml

在我的 xml 文件中，我有如下编写的整数数组：“1 10 -5 150 35”，我正在使用 pugixml 来解析它。

我知道 pugixml 提供了诸如 as_bool 或 as_int 之类的方法，但它是否提供了一种将 int 数组的字符串表示形式转换为 c++ 对象的简单方法，还是我必须自己解析和分离字符串？如果是这样，关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:12:58.647

一种可能性是使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream). 例子：

```
#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include <algorithm>
#include <iterator>

int main()
{
    {
        std::istringstream in(std::string("1 10 -5 150 35"));
        std::vector<int> my_ints;

        std::copy(std::istream_iterator<int>(in),
                  std::istream_iterator<int>(),
                  std::back_inserter(my_ints));
    }

    // Or:
    {
        int i;
        std::istringstream in(std::string("1 10 -5 150 35"));
        std::vector<int> my_ints;
        while (in >> i) my_ints.push_back(i);
    }
    return 0;
} 
```

# java - 如何使用 Mahout 修复在 SetFetchSize() 上失败的建议

> ID：11633771
> 
> 赞同：1
> 
> 时间：2012-07-24T15:05:18.563
> 
> 标签：java, sql, jdbc, mahout

我有一个功能强大的推荐器，我想让它变得更快，所以我决定将它直接连接到我的数据库。但是，每次我尝试向人们推荐东西时，我都会收到一个错误，即`setFetchSize() is not >=0`. 这是我的代码：

```
MySQLJDBCDataModel dataModel = null;
try {
  Class.forName("net.sourceforge.jtds.jdbc.Driver");
  net.sourceforge.jtds.jdbcx.JtdsDataSource ds = new net.sourceforge.jtds.jdbcx.JtdsDataSource();
  ds.setServerName("xxxxx");
  ds.setDatabaseName("xxxxx");
  ds.setUser("xxxxx");
  ds.setPassword(xxxxx);
  ds.setDomain("xxxxx");
  //net.sourceforge.jtds.jdbc.JtdsStatement.setFetchSize(10);
  dataModel = new MySQLJDBCDataModel(ds, "test_tbl", "user_id", "item_id", "preference", null);
} catch (Exception e) {
  System.out.println("can't connect");
}
ArrayList<String> itemList=new ArrayList<String>();
ItemSimilarity similarity = new FileItemSimilarity(new File("output/part-r-00000"));
ItemBasedRecommender recommender = new GenericItemBasedRecommender(dataModel, similarity);
//List<RecommendedItem> recommendedItems=recommender.recommend(userid,10);
Recommender cachingRecommender = new CachingRecommender(recommender);
List<userRecData> allUserRecs = new ArrayList<userRecData>();
List<RecommendedItem> uRec=cachingRecommender.recommend(userobjectid,10); 
```

***我得到了错误：***

```
java.sql.SQLException: The setFetchSize method requires a parameter value >= 0.
at net.sourceforge.jtds.jdbc.JtdsStatement.setFetchSize(JtdsStatement.java:998)
at org.apache.mahout.cf.taste.impl.model.jdbc.AbstractJDBCDataModel.getNumThings(AbstractJDBCDataModel.java:584)
at org.apache.mahout.cf.taste.impl.model.jdbc.AbstractJDBCDataModel.getNumUsers(AbstractJDBCDataModel.java:560)
at org.apache.mahout.cf.taste.impl.recommender.CachingRecommender.<init>(CachingRecommender.java:63)
at mia.recommender.RecommenderIntro.getRecommendations(RecommenderIntro.java:79)
at mia.recommender.RecommenderIntro.main(RecommenderIntro.java:43) 
```

它在 上失败`cachingRecommender`，或者如果我把它拿出来，`recommnder.recommend` 我认为 Mahout 自动将获取大小设置为`1000`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:37:24.850

您正在使用`MySQLJDBCDataModel`，但您的数据库是 SQL Server。MySQL 实现使用负值禁用获取大小，因为它的驱动程序需要它。您需要自定义 AbstractJDBCDataModel 以与 SQL Server 一起使用——`getFetchSize()`例如，通过不覆盖。

# php - 未找到 Silex 路由

> ID：11633777
> 
> 赞同：7
> 
> 时间：2012-07-24T15:05:42.203
> 
> 标签：php, url-routing, silex

我是第一次使用 Silex。在本地开发时一切正常。将所有内容上传到生产服务器后，参数化路线将不再起作用。

你有什么主意吗？
我是否在某处缺少生产配置？
我在某处缺少文件权限吗？

我得到了这两个例外：

```
NotFoundHttpException: No route found for "GET /prevendita/hello/sadfasdf"
in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/EventListener/RouterListener.php line 92
  at RouterListener->onKernelRequest(object(GetResponseEvent))
  at call_user_func(array(object(RouterListener), 'onKernelRequest'), object(GetResponseEvent)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/event-dispatcher/Symfony/Component/EventDispatcher/EventDispatcher.php line 164
  at EventDispatcher->doDispatch(array(array(object(Application), 'onEarlyKernelRequest'), array(object(SessionServiceProvider), 'onEarlyKernelRequest'), array(object(RouterListener), 'onKernelRequest'), array(object(LocaleListener), 'onKernelRequest'), array(object(Application), 'onKernelRequest')), 'kernel.request', object(GetResponseEvent)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/event-dispatcher/Symfony/Component/EventDispatcher/EventDispatcher.php line 53
  at EventDispatcher->dispatch('kernel.request', object(GetResponseEvent)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php line 110
  at HttpKernel->handleRaw(object(Request), '1') in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php line 73
  at HttpKernel->handle(object(Request), '1', true) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/silex/silex/src/Silex/Application.php line 509
  at Application->handle(object(Request)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/silex/silex/src/Silex/Application.php line 484
  at Application->run() in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/web/index.php line 49 
```

和：

```
ResourceNotFoundException:
in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/routing/Symfony/Component/Routing/Matcher/UrlMatcher.php line 81
  at UrlMatcher->match('/prevendita/hello/sadfasdf') in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/routing/Symfony/Component/Routing/Matcher/RedirectableUrlMatcher.php line 30
  at RedirectableUrlMatcher->match('/prevendita/hello/sadfasdf') in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/silex/silex/src/Silex/LazyUrlMatcher.php line 51
  at LazyUrlMatcher->match('/prevendita/hello/sadfasdf') in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/EventListener/RouterListener.php line 78
  at RouterListener->onKernelRequest(object(GetResponseEvent))
  at call_user_func(array(object(RouterListener), 'onKernelRequest'), object(GetResponseEvent)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/event-dispatcher/Symfony/Component/EventDispatcher/EventDispatcher.php line 164
  at EventDispatcher->doDispatch(array(array(object(Application), 'onEarlyKernelRequest'), array(object(SessionServiceProvider), 'onEarlyKernelRequest'), array(object(RouterListener), 'onKernelRequest'), array(object(LocaleListener), 'onKernelRequest'), array(object(Application), 'onKernelRequest')), 'kernel.request', object(GetResponseEvent)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/event-dispatcher/Symfony/Component/EventDispatcher/EventDispatcher.php line 53
  at EventDispatcher->dispatch('kernel.request', object(GetResponseEvent)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php line 110
  at HttpKernel->handleRaw(object(Request), '1') in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php line 73
  at HttpKernel->handle(object(Request), '1', true) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/silex/silex/src/Silex/Application.php line 509
  at Application->handle(object(Request)) in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/vendor/silex/silex/src/Silex/Application.php line 484
  at Application->run() in /var/www/vhosts/teatrodellamemoria.it/httpdocs/assets/modules/prevendita/web/index.php line 49 
```

这是代码：

```
<?php
require_once __DIR__.'/../vendor/autoload.php';

use Teatro\Models\Reservation;
use Teatro\Models\ReservationsSeat;
use Symfony\Component\Validator\Constraints;
use Symfony\Component\Form\FormError;

$app = new Silex\Application();
$app['debug'] = true;

$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => __DIR__.'/../views',
));
$app->register(
    new Silex\Provider\UrlGeneratorServiceProvider()
);
$app->register(
    new Silex\Provider\SessionServiceProvider(), array(
//        'session.storage.options' => array('name' => 'test')
    )
);
$app->register(
    new Silex\Provider\FormServiceProvider()
);
$app->register(
    new Silex\Provider\ValidatorServiceProvider()
);
$app->register(new Silex\Provider\TranslationServiceProvider(), array(
    'translator.messages' => array(),
));
$app->register(
    new Silex\Provider\SwiftmailerServiceProvider()
);

$app->get('/prevendita/hello/{name}/', function ($name) use ($app) {
    return "Hello $name!";
})->bind('hello_name');

$app->get('/prevendita/hello', function () use ($app) {
    return "Hello!";
})->bind('hello');

$app->run(); 
```

开发服务器是 PHP 5.4 内置 webserver 生产服务器是 PHP 5.3 CentOS

.htaccess 文件基本相同。在生产环境中，silex 应用程序位于文档根目录的子文件夹中，比如说 /prevendita，所以我添加了

```
RewriteRule ^prevendita /prevendita/web/index.php [L] 
```

将任何以 /prevendita 开头的请求重定向到我的 silex 应用程序

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T15:59:53.607

你写了：

```
/prevendita/hello/{name}/ 
```

但要求：

```
/prevendita/hello/sadfasdf 
```

你忘记了尾部的斜线。
我认为这就是问题所在。

**编辑：**根据 Fabien Potencier（Silex 的作者）：

*   每个资源都必须有一个唯一的 URL（因此`/foo/`不同于`/foo`）。
*   为了方便最终用户（而不是开发人员），当 URL 必须以 a 结尾`/`并且如果他忘记键入它时，Silex 会将他重定向到正确的 URL（带有 a `/`）而不是返回 a `404`。
*   当 Silex 生成 URL 时，它们总是使用规范 URL，因此仅当用户手动输入 URL 并忘记添加结尾时才会进行重定向`/`，但框架本身从不使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-25T02:03:52.063

最好的选择是将您的域指向`/prevendita/web/`而不使用重写引擎来处理子目录。我想你在域下还有一些其他的东西，所以也许你不能将它指向你的 Silex 应用程序，但是你可以使用子域而不是请求`yourdomain.com/prevendita/web/index.php`你可以请求`prevendita.yourdomain.com/index.php`（域指向`web`）。

# c# - wkhtmltopdf pdf，一种在过程完成时收听的方法？

> ID：11633778
> 
> 赞同：0
> 
> 时间：2012-07-24T15:05:47.190
> 
> 标签：c#, wkhtmltopdf

我正在使用 wkhtmltopdf 从 asp.net mvc 站点生成一些 pdf。我在[这里](https://stackoverflow.com/questions/1331926/calling-wkhtmltopdf-to-generate-pdf-from-html/1698839#1698839)使用在另一个 SO 问题上找到的代码。这段代码存在一个问题，即有一个硬编码的 60 秒等待该过程完成。我认为如果我们可以简单地有一个触发器或信号来观察然后退出并读取输出，那将会大大改善。那么有没有人知道一种方法来监听来自 wkhtmltopdf 进程的响应？

```
 // read the output here...
string output = p.StandardOutput.ReadToEnd(); 

// ...then wait n milliseconds for exit (as after exit, it can't read the output)
p.WaitForExit(60000); 

// read the exit code, close process
int returnCode = p.ExitCode;
p.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:12:28.770

我不确定这是否符合您的想法。完成后将立即退出。60 秒是它完成的最大等待时间。

如[MSDN中所述](http://msdn.microsoft.com/en-us/library/ty0d8k56)

> WaitForExit(Int32) 重载用于使当前线程等待，直到关联进程终止。**此重载指示 Process 组件等待有限的时间以使进程退出。**如果关联进程由于终止请求被拒绝而在间隔结束时没有退出，则将 false 返回到调用过程。**您可以为毫秒指定一个负数（无限），并且 Process.WaitForExit(Int32) 的行为与 WaitForExit 重载相同。**如果将 0（零）传递给该方法，则仅当进程已经退出时它才返回 true；否则，它立即返回 false。

（强调我的）

# sql - 随机加入oracle

> ID：11633781
> 
> 赞同：1
> 
> 时间：2012-07-24T15:06:09.723
> 
> 标签：sql, oracle, join, random

我有三个查询，我希望由这些查询的条目组成的结果行随机连接在一起。

我不想合并结果，而是以或多或少随机的方式加入它们（可以保留原始分布，或者可以在所有人之间统一）。

我尝试了以下方法：

```
select * 
from 
(
    SELECT street, number 
    FROM Addresses 
    WHERE valid = '1' 
    order by Dbms_Random.Value
) q1 ,
(
    select prename 
    from person 
    order by Dbms_Random.Value
) q2 , 
(
    select surname 
    from person 
    order by Dbms_Random.Value
) q3 
```

然而，我的结果集看起来一点也不随机：

```
Main street, 1, Andre, Smith
Main street, 1, Andre, Warnes
Main street, 1, Andre, Jackson
Main street, 1, Andre, Macallister 
```

从查询中删除`ORDER BY`并将其应用于笛卡尔积的结果是非常低效的，因为表很大，尤其是它们的笛卡尔积。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T16:37:01.310

Colin 't Hart 诊断出问题，并建议使用rownum 来解决问题。但是解决方案稍微复杂一点，因为如果 ROWNUM 都出现在同一个 SELECT 中，那么它们会在 ORDER BY 之前分配。解决方案是添加一个额外的子查询级别。

```
with randomAddress as(
  select rownum id, street, num from (
    select * from addresses where valid=1 order by dbms_random.random
  )
),
randomPrename as(
  select rownum id, prename from(
    select * from person order by dbms_random.random
  )
),
randomSurname as(
  select rownum id, surname from(
    select * from person order by dbms_random.random
  )
)
select street, num, prename, surname
  from randomAddress
  join randomPrename using(id)
  join randomSurname using(id)
; 
```

此解决方案将始终返回与最小表中的行数相等的随机行数。任何行都不会被使用超过一次。这是[SQL 小提琴](http://www.sqlfiddle.com/#!4/51f69/2)。

GWu 解决方案返回的行数将根据分配相同随机数的行数而有所不同。有些行可能会被多次使用，而其他行则根本不用。您还应该知道要使用该解决方案的表中有多少行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:15:36.767

您可以将 Dbms_Random.Value 移动到子查询中的列并通过它加入。
这将随机化结果并摆脱`order by`：

```
select * 
  from 
        (
            SELECT street, snumber, ROUND(Dbms_Random.Value(1,10)) n
              FROM Addresses 
             WHERE valid = '1' 
        ) q1 ,
        (
            select prename, ROUND(Dbms_Random.Value(1,10)) n 
              from person 
        ) q2 , 
        (
            select surname, ROUND(Dbms_Random.Value(1,10)) n
              from person 
        ) q3
where q1.n = q2.n
  and q2.n = q3.n
; 
```

（另见[http://www.sqlfiddle.com/#!4/a26d0/9](http://www.sqlfiddle.com/#!4/a26d0/9)）

`10`中的值`ROUND(Dbms_Random.Value(1,10))`只是一个假设，将其更改为您的预期或可用记录数。

请注意，此解决方案会重用每个子查询的结果，因此例如 prename 可能会多次使用或根本不使用，但在原始笛卡尔连接中也是如此。
[如果您需要， Colin 的方法](https://stackoverflow.com/questions/11633781/random-join-in-oracle#11634000)可确保唯一性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T15:17:42.937

您遇到的问题是，虽然每个表都是随机排序的，但您仍然有一个笛卡尔积，因此顶部行的前两列将具有相同的值，只有最后一列不同。

如果您选择伪列 ROWNUM（您需要将其别名为例如 row_number），然后在 row_number 上加入 3 个表，您应该从 3 个表中获得数据的随机组合。

但是您将被限制为等于最小表中的行数的总行数。

# c# - 在单点触控中将 24 位图像转换为 8 位？

> ID：11633784
> 
> 赞同：0
> 
> 时间：2012-07-24T15:06:15.853
> 
> 标签：c#, ios, xamarin.ios, imaging, bit-depth

我们有一个图像处理 Windows 应用程序，我们使用主要工具将图像从 24/48 位图像转换为 8 位图像。

作为一个实验，我正在使用 MonoTouch 和 C# 将应用程序移植到 iPad，现在 LeadTools 组件与 Monotouch 不兼容。有什么我可以使用的替代品吗？如果不是，我如何将 24/48 位图像转换为 8 位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:56:19.320

要使用 Apple 的成像工具，我将从这里开始：

1.  将原始字节转换为平台支持的像素格式。请参阅有关[支持的像素格式](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-BCIBHHBB)的 Quartz 2D 文档。
    请注意，iOS 目前没有 24 或 48 位格式。但是，如果您的 24 位格式是每通道 8 位 (RGB)，您可以添加 8 位忽略的 alpha。（Alpha 选项在 MonoTouch.CoreGraphics.CGImageAlphaInfo 中）

2.  将原始字节转换为 CGImage。这是一个如何做到这一点的例子

    ```
     var provider = new CGDataProvider(bytes, 0, bytes.Length);
        int bitsPerComponent = 8;
        int components = 4;
        int height = bytes.Length / components / width;
        int bitsPerPixel = components * bitsPerComponent;
        int bytesPerRow = components * width;   // Tip:  When you create a bitmap graphics context, you’ll get the best performance if you make sure the data and bytesPerRow are 16-byte aligned.
        bool shouldInterpolate = false;
        var colorSpace = CGColorSpace.CreateDeviceRGB();
        var cgImage = new CGImage(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, 
                                  colorSpace, CGImageAlphaInfo.Last, provider,
                                  null, shouldInterpolate, CGColorRenderingIntent.Default); 
    ```

3.  使用[核心图像过滤器](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CoreImag%E2%80%A6)转换为单色

    ```
     var mono = new CIColorMonochrome
        {
            Color = CIColor.FromRgb(1, 1, 1),
            Intensity = 1.0f,
            Image = CIImage.FromCGImage(image)
        };
        CIImage output = mono.OutputImage;
        var context = CIContext.FromOptions(null);
        var renderedImage = context.CreateCGImage(output, output.Extent); 
    ```

4.  最后，您可以通过绘制到根据您所需的参数构造的 CGBitmapContext 来检索该图像的原始字节。

我怀疑这个管道可以优化，但它是一个开始的地方。我很想听听你最终的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:25:59.947

我认为您最好的选择是对 LeadTools 库进行本机调用 - 我能想到的 C# 中的任何图像操作都将依赖于 GDI+ 和 Monotouch 不支持的 System.Drawing 命名空间等组件。

您可以通过创建 Binding 项目 - [http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types从 monotouch 项目中调用本机 Objective-C 代码](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)

这应该允许您以一种能够产生完全相同的图像/质量/格式的方式移植您的代码，而无需重新编写当前的转换代码。

# java - 用 Java 下载 Pandora 源代码？

> ID：11633787
> 
> 赞同：3
> 
> 时间：2012-07-24T15:06:25.987
> 
> 标签：java, download

我正在尝试`www.pandora.com/profile/stations/olin_d_kirkland`使用 Java 下载 HTML，以匹配我从 Chrome 网页的上下文菜单中选择“查看页面源代码”时得到的内容。

现在，我知道如何用 Java 下载网页 HTML 源代码了。我已经使用 downloads.nl 完成了它并在其他站点上对其进行了测试。然而，潘多拉是一个谜。我的最终目标是从 Pandora 帐户中解析“站”。

具体来说，我想从诸如`www.pandora.com/profile/stations/olin_d_kirkland`

我曾尝试在 Java 中使用 selenium 库和内置的 URL getter，但是当我应该得到 5300 行时，我只得到了大约 4700 行代码。更不用说代码中没有个性化数据，这就是我的米找。

我想这是因为我没有抓住 JavaScript 或让 JavaScript 先执行，但即使我等待它加载到我的代码中，我也只会得到相同的结果。

如果可能的话，我应该有一个名为“grabPageSource()”的方法，它返回一个字符串。它应该在调用时返回源代码。

* * *

```
public class PandoraStationFinder {
    public static void main(String[] args) throws IOException, InterruptedException {
        String s = grabPageSource();
        String[] lines = s.split("\n\r");
        String t;
        ArrayList stations = new ArrayList();
        for (int i = 0; i < lines.length; i++) {
            t = lines[i].trim();
            Pattern p = Pattern.compile("<a href=\"/station/\\d+\">[\\w\\s]+</a>");
            Matcher m = p.matcher(t);
            if (m.matches() ? true : false) {
                Station someStation = new Station(t);
                stations.add(someStation);
                // System.out.println("I found a match on line " + i + ".");
                // System.out.println(t);
            }
        }
    }

    public static String grabPageSource() throws IOException {
        String fullTxt = "";
        // Get HTML from www.pandora.com/profile/stations/olin_d_kirkland
        return fullTxt;
    }
} 
```

它是如何完成的无关紧要，但我想在最终产品中获取一个完整的列表，其中包含 Pandora 上用户喜欢的所有歌曲。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:48:57.840

Pandora 页面大量使用 ajax 构建，因此许多爬虫都在挣扎。在上面显示的情况下，查看站点列表，该页面实际上将辅助请求发送到：

[http://www.pandora.com/content/stations?startIndex=0&webname=olin_d_kirkland](http://www.pandora.com/content/stations?startIndex=0&webname=olin_d_kirkland)

如果您运行您的请求，但将其指向该 URL 而不是主站点，我认为您在抓取时会有更多的运气。

同样，要访问“喜欢”，您需要以下 URL： [http ://www.pandora.com/content/tracklikes?likeStartIndex=0&thumbStartIndex=0&webname=olin_d_kirkland](http://www.pandora.com/content/tracklikes?likeStartIndex=0&thumbStartIndex=0&webname=olin_d_kirkland)

这将以 5 个为一组拉回喜欢的曲目，但您可以通过增加“thumbStartIndex”参数来翻阅结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T02:42:04.873

不是一个确切的答案，但希望这会让你朝着正确的方向前进：

每当我遇到这类事情时，我总是求助于 HTTP 监控工具。我使用 firefox，我非常喜欢[Live HTTP Headers](https://addons.mozilla.org/en-us/firefox/addon/live-http-headers/)扩展。检查来回的标头是什么，然后相应地调整您的 http 请求。作为绝对最低级别的测试，从成功的请求中获取标头，然后使用 telnet 将其发送到端口 80 并查看返回的内容。

# android - 对话框关闭后隐藏软键盘

> ID：11633792
> 
> 赞同：48
> 
> 时间：2012-07-24T15:06:34.117
> 
> 标签：android, keyboard, hide, android-softkeyboard, soft-keyboard

我想在 AlertDialog 关闭后隐藏软键盘，但它仍然可见。这是我的代码：

```
alert = new AlertDialog.Builder(MyActivity.this);
imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);

alert.setOnDismissListener(new DialogInterface.OnDismissListener() {

    @Override
    public void onDismiss(DialogInterface dialog) {
        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
    }
}); 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-12-14T11:40:00.910

在**清单 xml**

```
android:windowSoftInputMode="stateAlwaysHidden" 
```

> 它会在 Dismiss of 时自动隐藏软键盘`Dialog`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T13:06:13.850

我遇到了同样的问题。通过这样做解决了它。它不需要任何参考：

```
imm.hideSoftInputFromWindow(getWindow().getDecorView()
                .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-30T07:26:03.887

关闭警报对话框时我遇到了类似的问题。这似乎对我有用。

在你的 DialogFragment 里面

```
public static void closeKB(final View view) 
{
    caller.postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager) view.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
        }
    }, 1);
}

@Override
public void onDismiss(DialogInterface dialog)
{
    super.onDismiss(dialog);
            View view = getActivity().getCurrentFocus();
    if (view != null)
    {
        closeKB(view);
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-25T09:22:01.497

我使用这种方法：

```
IBinder token = searchTextEntry.getWindowToken();
( ( InputMethodManager ) getSystemService( Context.INPUT_METHOD_SERVICE ) ).hideSoftInputFromWindow( token, 0 ); 
```

我的参考`searchTextEntry`名称在哪里。`EditText`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-22T12:35:36.930

这行得通！这将在对话框关闭后关闭键盘

```
InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-14T02:13:28.730

```
protected void hideKeyboard() {
    final Activity activity = getActivity();
    final View view = activity != null ? activity.getCurrentFocus() : null;
    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            if (view != null) {
                InputMethodManager imm = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);
                if (imm != null)
                    imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
            }
        }
    }, 1);
}

@Override
public void onDismiss(DialogInterface dialog) {
    super.onDismiss(dialog);
    hideKeyboard();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-14T02:33:22.587

所有这些使用建议`InputMethodManager`都有些模糊 - 确切地在哪里调用它，
它们至少对我不起作用。
是的，键盘消失了，但应用程序崩溃了！？
主要问题是在对话框消失的同时隐藏键盘。

为避免它`dialog.dismiss()`应该在`view.postDelayed()`之后调用，`imm.hideSoftInputFromWindow()`在我的情况下，我将延迟设置为 150。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-05T22:13:17.620

如果有人在 kotlin 中寻找这个，它会是：

```
private fun hideDeviceKeyboard() {
    val imm = context!!.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0)
} 
```

# linux - 如何在源代码后捕获命令行参数

> ID：11633799
> 
> 赞同：1
> 
> 时间：2012-07-24T15:06:48.620
> 
> 标签：linux, bash

我正在运行 linux 2.6。在 bash shell 上，我想获取一个文件。如果我在当前目录中作为源文件，那么我可以这样做

```
source abc.sh 
```

但如果我在其他文件夹中，我会这样做

```
source /path-to/abc.sh 
```

我想在我的脚本中捕获在命令行上的命令源之后键入的任何内容，因此，例如，我想访问“abc.sh”，在后一种情况下，我想访问“/path-to/ abc.sh" 在 abc.sh 中

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:10:12.273

您正在寻找`$BASH_SOURCE`包含当前处理的脚本的变量。

例如，如果`/tmp/a.sh`是：

```
echo $BASH_SOURCE 
```

然后：

```
$ cd /tmp
$ . a.sh
a.sh
$ . /tmp/a.sh
/tmp/a.sh
$ . ../tmp/a.sh
../tmp/a.sh 
```

您可以在[info bash](http://info2html.sourceforge.net/cgi-bin/info2html-demo/info2html?%28bash.info.gz%29Bash%2520Variables)中找到更多信息。

# objective-c - 如何在 MKMapView 中的 MKOverlay 上方显示 MKAnnotation

> ID：11633805
> 
> 赞同：1
> 
> 时间：2012-07-24T15:07:05.440
> 
> 标签：objective-c, ios, mkmapview, mkannotation, mkoverlay

我有一个同时具有 MKAnnotations 和 MKOverlay 的 MKMapView。我有一个画得很好的自定义 MKAnnotationView，以及 MKOverlay。问题是覆盖在注释之上。（我知道，我知道，它被称为“覆盖”是有原因的！）

我想在叠加层的顶部显示注释。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:30:13.060

只要您调用 addOverlays: 和 addAnnotations: 注释就应该显示在覆盖层之上。查看 KMLViewer 示例应用程序，该应用程序加载到 KML 文件中并使用多个多边形叠加层和图钉注释填充地图。我什至修改了它以匹配您的场景并用自定义注释图像替换了引脚，它仍然可以正常工作。

# android - 如何正确运行 ActionBarSherlock？

> ID：11633806
> 
> 赞同：-2
> 
> 时间：2012-07-24T15:07:10.410
> 
> 标签：android

我已经制作了 asherlock 操作栏。当我在模拟器上运行它时它运行良好，但是当我尝试在我的 android 手机上运行它时，它显示运行时异常，请在应用程序的清单文件中添加 sherlockk 主题。即使我已经添加了它，但问题依旧。这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="naseeb.bar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" />

    <application
         >
       android:theme="@style/Theme.Sherlock.Light"
        <activity
            android:name=".NaseebactionbarActivity"
             >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".DashboardLayout"
            /> 
             <activity
            android:name=".ActionBarActivity"
            /> 
            <activity
            android:name=".controltransfer"
            /> 

    </application>

</manifest> 
```

这是一个例外：

```
07-24 20:29:57.605: E/AndroidRuntime(12921): FATAL EXCEPTION: main
07-24 20:29:57.605: E/AndroidRuntime(12921): java.lang.RuntimeException: Unable to start activity ComponentInfo{naseeb.bar/naseeb.bar.NaseebactionbarActivity}: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1746)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1765)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.ActivityThread.access$1500(ActivityThread.java:158)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:996)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.os.Handler.dispatchMessage(Handler.java:130)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.os.Looper.loop(SourceFile:351)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.ActivityThread.main(ActivityThread.java:3850)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at java.lang.reflect.Method.invokeNative(Native Method)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at java.lang.reflect.Method.invoke(Method.java:538)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at dalvik.system.NativeStart.main(Native Method)
07-24 20:29:57.605: E/AndroidRuntime(12921): Caused by: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
07-24 20:29:57.605: E/AndroidRuntime(12921):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1007)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:919)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:218)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at naseeb.bar.NaseebactionbarActivity.onCreate(NaseebactionbarActivity.java:20)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1082)
07-24 20:29:57.605: E/AndroidRuntime(12921):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1710)
07-24 20:29:57.605: E/AndroidRuntime(12921):    ... 11 more
07-24 20:34:57.633: I/Process(12921): Sending signal. PID: 12921 SIG: 9 
```

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:11:33.483

```
 <application
         >
       android:theme="@style/Theme.Sherlock.Light" 
```

是错的。您正在关闭应用程序标签，在您的主题之前。

利用

```
 <application
       android:theme="@style/Theme.Sherlock.Light"> 
```

# php - 如果 XML 文件为空，则捕获 PHP 错误

> ID：11633810
> 
> 赞同：3
> 
> 时间：2012-07-24T15:07:19.067
> 
> 标签：php, xml, error-handling

所以我从 XML 文件中获取一些信息，如下所示：

```
$url = "http://myurl.blah";
$xml = simplexml_load_file($url); 
```

除了有时 XML 文件是空的，我需要代码优雅地失败，但我似乎无法弄清楚如何捕获 PHP 错误。我试过这个：

```
if(isset(simplexml_load_file($url)));
{
    $xml = simplexml_load_file($url);
    /*rest of code using $xml*/
}
else {
    echo "No info avilable.";
} 
```

但它不起作用。我猜你不能那样使用 ISSET 。任何人都知道如何捕捉错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T15:12:03.287

```
$xml = file_get_contents("http://myurl.blah");
if (trim($xml) == '') {
    die('No content');
}

$xml = simplexml_load_string($xml); 
```

或者，可能效率更高一些，但不一定推荐，因为它可以消除错误：

```
$xml = @simplexml_load_file($url);
if (!$xml) {
    die('error');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:11:16.090

不要`isset`在这里使用。

```
// Shutdown errors (I know it's bad)
$xml = @simplexml_load_file($url);

// Check you have fetch a response
if (false !== $xml); {
    //rest of code using $xml
} else {
    echo "No info avilable.";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:12:19.917

```
if (($xml = simplexml_load_file($url)) !== false) {
  // Everything is OK. Use $xml object.
} else {
  // Something has gone wrong!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:20:39.633

来自 PHP 手册，错误处理（[点击这里](http://www.php.net/manual/en/function.libxml-use-internal-errors.php)）：

```
var_dump(libxml_use_internal_errors(true));

// load the document
$doc = new DOMDocument;

if (!$doc->load('file.xml')) {
    foreach (libxml_get_errors() as $error) {
        // handle errors here
    }

    libxml_clear_errors();
} 
```

# android - Android点击去错误的活动

> ID：11633812
> 
> 赞同：0
> 
> 时间：2012-07-24T15:07:23.420
> 
> 标签：android, onclick

我有一个具有多个可点击视图的活动。当您单击其中一个时 - 使用新参数调用同一活动类的新实例。

```
Intent i = new Intent(this, SameActivity.class);
// put extras
startActivity(i); 
```

这是在 onClick 方法中完成的。问题是，当您快速双击任何视图时，您会看到新活动已打开，然后它就像我再次单击其中一个视图（在新创建的活动中）一样。然后它再次重新导航。

日志看起来像：

```
onCreate()
onStart()
onResume()
onClick()
onPause()
onCreate()
onStart()
onResume()
onClick()
onCreate()
onStart()
onResume()
onStop()
onStop() 
```

为什么以及如何避免它？

**编辑：** 尝试使用 setEnabled(false) 但没有效果。

更重要的是，我进一步的测试表明，onClick 实际上是由新创建的视图触发的。会不会是设备的问题？反应太慢还是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:12:20.923

首先，我真的希望你有充分的理由这样做......因为`Activity`在我看来，在另一个之上开始同样的事情听起来毫无意义。

其次，也许您可​​以尝试调用`myButton.setEnabled(false)`in`onPause`和`myButton.setEnabled(true)`in `onResume`，同时确保在 XML 中禁用该按钮以启动。

# java - 异常处理中的 PrintStackTrace()

> ID：11633814
> 
> 赞同：0
> 
> 时间：2012-07-24T15:07:37.313
> 
> 标签：java, android

这个方法有什么作用？我在互联网上找到了一个关于异常处理的 Android 代码，其中那个人在`catch{}`他没有正确解释为什么使用这个函数/方法时使用了这个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:13:15.937

检查这个[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Throwable.html#printStackTrace%28%29)。Stacktrace 用于调试模式。每个方法都从大多数生成器显示到引发异常的特定方法。

将其视为一个堆栈，其中每个方法调用都涉及该异常的原因。

此外，使用`printStackTrace()`方法被认为是不好的做法，因为`System.err`使用了文件并且该方法不是线程安全的。最好使用记录器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:09:22.920

它打印发生异常的堆栈。如果有调试信息，那么它将显示每次调用所在的代码行，以帮助您找到问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:10:19.103

此方法打印在引发异常之前调用的方法的整个堆栈跟踪。这在调试时非常有用，因为您将知道执行路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:11:29.310

它[打印`Exception`to`System.err`](http://java.sun.com/javase/6/docs/api/java/lang/Throwable.html#printStackTrace())的堆栈跟踪。

这是一个非常简单但非常有用的异常诊断工具。它告诉您发生了什么以及发生在代码中的什么位置。

来源：[Java 中 printStackTrace() 方法的用途是什么？](https://stackoverflow.com/questions/2560368/what-is-the-use-of-printstacktrace-method-in-java)

# ruby-on-rails-3 - capybara webkit-driver重置？

> ID：11633815
> 
> 赞同：2
> 
> 时间：2012-07-24T15:07:38.387
> 
> 标签：ruby-on-rails-3, capybara, capybara-webkit

对一些 capybara webkit-driver ( `:js => true`) 测试有点奇怪。

测试在自己运行时运行良好，但不知何故按顺序失败。

例如，我有一个看起来像的请求测试

```
describe "A", :js => true do
  # tests here run fine
end

describe "B", :js => true do
  # tests here fail
end 
```

当我将`describe B`部分拆分为自己的文件并使用它运行`bundle exec rspec spec/requests/b_spec.rb`时 - 测试运行良好并通过。

对此进行调试，看起来当两个部分都在同一个文件中时，webkit 驱动程序以某种方式加载了一个“脏”浏览器会话。尝试`page.driver.reset!`或`Capybara.reset_sessions!`或`Capybara.reset!`似乎没有任何效果......

使用 spectator/spork 时这不是问题，因为我可以将测试拆分为不同的文件并独立运行它们，但是当使用 - 这些测试运行全套测试时`bundle exec rspec`...

**如何在测试之间正确重置 webkit 驱动程序/会话？**还是我在追逐错误的问题？

ps 这些测试没有以任何特定方式访问数据库或改变状态，所以我很确定这是一些与驱动程序相关的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:47:08.143

有时它有助于编写问题以弹出解决方案。

对我来说关键是：

> 这些测试没有以任何特定方式访问数据库或改变状态，所以我很确定这是一些与驱动程序相关的问题。

原来有*一个*状态变化。在我的特殊情况下，设置`OmniAuth`为`test_mode`，这需要在上一个测试运行后将其设置回`false`......

# java - 使用处理语言直观地表示 XML。如何在数据结束/中断的每个点绘制一个椭圆？

> ID：11633820
> 
> 赞同：0
> 
> 时间：2012-07-24T15:07:53.560
> 
> 标签：java, xml, processing

我参与了一个研究项目，分析建筑如何（如果有的话）影响人们在各地移动时的路径。到目前为止，我们已经使用 OpenCV Blob-tracker 成功地生成了在 Blob 移动时映射 Blob 的 XML 文件数据。我现在想做的是在数据开始和结束的每个点上画一个椭圆（代表每个人的起点和终点）。任何有助于得出这一结论的帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:20:18.257

我也不太了解您提供的数据的结构。但是在处理中，如果你想表示 xml 数据（特别是屏幕上的坐标和颜色的时间），你首先需要解析你的 xml 文件，然后适当地映射值。看一眼

[http://processing.org/reference/XMLElement.html](http://processing.org/reference/XMLElement.html)

[http://processing.org/reference/map_.html](http://processing.org/reference/map_.html)

[http://processing.org/reference/fill_.html](http://processing.org/reference/fill_.html)

这些应该有你需要的一切。

您可以执行类似的操作将 xml 表示为椭圆和颜色。说这是你的 xml，（我只是编造这个）

```
 <?xml version="1.0"?>
 <people>
   <person time="45.6" x="6.5" y="10.3"></person>
   ...
 </people>

XMLElement xml;

void setup() {
  size(200, 200);
  int size = 10; //just a default size for the ellipse, maybe you want to pull this value from your data as well though

  xml = new XMLElement(this, "people.xml");
  int numPeople = xml.getChildCount();
  for (int i = 0; i < numPeople; i++) {
    XMLElement person = xml.getChild(i);
    float time = person.getFloat("time"); 
    float xPos = person.getFloat("x"); 
    float yPos = person.getFloat("y"); 
    int personColor = map(time, 0, 100, 0, 255); //you will need some way of mapping your time values (i have no idea what the scale is, to a range of 0-255
    fill(personColor);
    ellipse(xPos, yPos, size, size);

  }
} 
```

根据您提供的一系列数字，我猜您的 xml 结构比我在此示例中提供的要复杂得多，如果您需要帮助解析您的特定数据，请发布更完整的示例和 xml 描述。

# django - Django：从模型实例创建绑定表单

> ID：11633822
> 
> 赞同：3
> 
> 时间：2012-07-24T15:07:55.317
> 
> 标签：django, unit-testing, django-forms

我正在尝试在 Django 中编写我的第一个单元测试。这是一个员工登记表。表单的 Staff 模型与 UserProfile (AUTH_PROFILE_MODULE) 具有 OneToOne 关系。UserProfile 与 django.contrib.auth.models.User 具有 OneToOne 关系。

我正在使用[https://github.com/dnerdy/factory_boy](https://github.com/dnerdy/factory_boy)为人员模型创建一个测试模型实例。这个想法是使用 StaffFactory，这样我就可以轻松地创建测试模型实例。要创建绑定表单，我需要将数据字典传递给它。我认为在测试表单时只使用**django.forms.models.model_to_dict**将我的模型实例转换为数据字典会很方便。

现在，我的问题是：model_to_dict 没有遍历我的 Staff 模型（Staff->UserProfile->User）的外键。这意味着表单保持无效，因为表单数据中仍然缺少用户电子邮件等必填字段。

目前我的 StaffRegistrationFormTest 看起来像：

```
class StaffRegistrationFormTest(unittest.TestCase):
  def test_success(self):
    staff1 = StaffFactory()

    form = StaffRegistrationForm(model_to_dict(staff1))
    # print jsonpickle.encode(model_to_dict(staff1))
    self.assertTrue(form.is_valid(), form.errors) 
```

有没有办法传入一个字典，通过重用模型实例来序列化外键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:18:31.177

所以似乎解决这个问题的一种方法是为 Staff 模型的 OneToOne 字段创建额外的字典并合并它们。

这使测试通过：

```
 data = dict(model_to_dict(staff1).items() + 
        model_to_dict(staff1.profile).items() +
        model_to_dict(staff1.profile.user).items())
    form = StaffRegistrationForm(data=data)
    self.assertTrue(form.is_valid(), form.errors) 
```

我不确定这是否是最佳实践的方式。如果这完全违背粮食，请随时发表评论。

# java - Tomcat 6 下的 JSF 2.0 应用程序：“未配置工厂。”

> ID：11633823
> 
> 赞同：0
> 
> 时间：2012-07-24T15:07:56.907
> 
> 标签：java, tomcat, maven, jsf-2, maven-tomcat-plugin

我正在尝试在 Tomcat 6 网络服务器上使用 Apache MyFaces 2.1.7 运行 JSF 2.0 网络应用程序。该应用程序使用 Tomahawk 1.1.11 和表达式语言 2.2 (el-impl-2.2.jar)。为此，我将 myfaces-api 和 myfaces-impl 放入 Tomcats lib 文件夹，并将 Tomcats el-api.jar 交换为 2.2 变体。

当我调用应用程序的第一页时，我总是收到错误消息：

```
java.lang.IllegalStateException: No Factories configured for this Application. This 
happens if the faces-initialization does not work at all - make sure that you properly 
include all configuration settings necessary for a basic faces application and that all 
the necessary libs are included. Also check the logging output of your web application 
and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use 
some special web-containers which do not support registering context-listeners via TLD 
files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
 <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

javax.faces.FactoryFinder._getFactory(FactoryFinder.java:286)
javax.faces.FactoryFinder.getFactory(FactoryFinder.java:206)
javax.faces.webapp.FacesServlet.init(FacesServlet.java:116)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:679) 
```

我肯定有我的 .xml 文件中提到的 xml 片段`web.xml`。我试图调试代码，发现`registeredFactoryNames`第 267 行`javax.faces.FactoryFinder`是空的，这会导致错误。然而，我不明白为什么会这样。那里应该有什么，我如何得到它？

有趣的是，webapp 使用嵌入式 jetty 8 完美运行。所以它一定是一些依赖问题。

希望对所有这些有更深入了解的人可以在这里帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:15:33.600

好的

我发现了问题。该错误是由于在您的类路径中有两次 myfaces-api.jar 造成的。所以对我来说，问题是我将 myfaces-api.jar 放在了 tomcat lib 文件夹和 webapp 的 WEB-INF/lib 文件夹中。

在使用带有 maven 的嵌入式 tomcat 时，我在整个应用程序的依赖项和 tomcat6-maven-plugin 的依赖项中都有 myfaces-api.jar，范围编译两者。我将范围从 compile 更改为在 global dependencies 部分中提供，并且它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:34:08.050

我认为只需在 /WEB-INF/ 文件夹下添加一个空 faces-config.xml 文件即可解决，以指示应用程序使用 JSF 并且 MyFaces 继续初始化步骤。有关详细信息，请参阅类 org.apache.myfaces.ee6.MyFacesContainerInitializer。

# android - Google Play APK 扩展下载器库坏了？

> ID：11633826
> 
> 赞同：4
> 
> 时间：2012-07-24T15:08:04.927
> 
> 标签：android, apk, expansion

我正在尝试使用 Google Play APK 扩展下载器库，但新安装的库似乎已损坏：我看到“src/src/com...”和“res/res/...”文件夹。

还有人看到这个吗？将所有内容移到一个文件夹似乎可以解决问题，但谷歌为什么要分发一些损坏的东西呢？难道我做错了什么？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:30:19.627

剪切它们并粘贴（覆盖）到根库目录（downloader_library/）。

我认为谷歌犯了一个错误：p

# .net - 不调用 NetworkStream dispose 的症状

> ID：11633828
> 
> 赞同：0
> 
> 时间：2012-07-24T15:08:16.893
> 
> 标签：.net

让我以我知道这不是我应该做的事情作为这个问题的开头，但我仍然很好奇。

`TcpClien`如果我关闭t 套接字但不调用`Dispose`相应的套接字，我应该看到什么样的错误`NetworkStream`？

当我重新打开仍然没有处理`TcpClient`的情况时，我是否应该期望看到任何错误？`NetworkStream`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:15:17.017

当您关闭 a`TcpClient`时，它会处理流。

# mysql - 为 qt-Windows 构建 QMYSQL 插件时出错

> ID：11633829
> 
> 赞同：0
> 
> 时间：2012-07-24T15:08:17.480
> 
> 标签：mysql, windows, qt, window

我正在为 qt 构建 Qmysql 插件，当我运行 qmake 命令时出现错误。当我运行此命令时`qmake -o Makefile "INCLUDEPATH+=C:/Progra~1/MySQL/MySQLS~1.0/include" "LIBS+=C:/Progra~1/MySQL/MySQLS~1.0/lib/opt/liblibmysql.a" mysql.pro`，我收到一条错误消息`Cannot find file: mysql.pro`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:55:01.920

检查您的源代码树，确保`mysql.pro`在 dir 中有`%QTDIR%/src/plugins/sqldrivers/mysql`。

cd 到`%QTDIR%/src/plugins/sqldrivers/mysql`，然后重试。

# python - 如何在嵌入式 Pig 脚本中获取命令行参数？

> ID：11633831
> 
> 赞同：1
> 
> 时间：2012-07-24T15:08:25.250
> 
> 标签：python, arguments, apache-pig

我正在用 python 编写一个嵌入式猪脚本，我想传递这样的参数：

```
$ pig myscript.py arg1 arg2 
```

我希望`sys.argv`是`['myscript.py', 'arg1', 'arg2']`，但它是空的。

知道如何将命令行参数传递给嵌入式猪脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T00:08:19.610

Reopening this thread... Basically, I've created an environmental variable that I use in my script:

```
$ export file_in=filename; pig -useHCatalog ./POC_Python_Wrapper.py 
```

and in the script:

```
import os
file_in = os.getenv('file_in', 'Unknown') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:14:43.433

`sys.argv`应该包括可执行文件的名称，所以它可能是`['myscript.py', 'arg1', 'arg2']`，但看起来这是一个已在最新版本的 Pig 中修复的未解决问题：[https ://issues.apache.org/jira/browse/PIG- 2548](https://issues.apache.org/jira/browse/PIG-2548) .

也许检查您使用的是否比 0.10.0 更新。

# java - 获取第一个标签 Sax 解析器

> ID：11633835
> 
> 赞同：0
> 
> 时间：2012-07-24T15:08:48.467
> 
> 标签：java, xml, xml-parsing, sax, saxparser

有没有办法使用 sax 解析器获取 xml 文件中的第一个标记并确保它具有相应的结束标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:14:37.867

这听起来更像是您想使用 DOM 解析。

如果您使用 sax 解析，您实际上是在说您不想一次处理（加载到内存中）整个文档。如果您搜索第一个标签 end（根标签），您将一次扫描整个文档，并失去 SAX 的优势。

当您加载文档并且它的格式不正确时，DOM 解析也会抛出。因此无需手动检查根标签是否关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:10:41.813

只需处理 endDocument，如果调用它，那么它的格式是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:11:40.803

您可以处理`startElement()`,`endElement()`和`endDocument()`，或者只处理`endDocument()`. `endDocument()`如果文档格式不正确，应该抛出异常。但是，为了学习，我将展示一些示例：

```
public class MyParser extends DefaultHandler {

    private String firstElement;
    private String lastElement;

    public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException {
        if(firstElement == null) {
            firstElement = name;
        } 
    }
    public void endElement(String uri, String localName, String name) throws SAXException {
        lastElement = name;
    }
    public void endDocument() {
        if(lastElement.equals(firstElement)) {
            // Well formed input
        }
    }
} 
```

您还可以确保所有元素都使用堆栈关闭：

```
public class MyParser extends DefaultHandler {
    Stack<String> stk;

    //...

    public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException {
       stk.push(name);
    }  

     public void endElement(String uri, String localName, String name) throws SAXException  {
         if(stk.pop().equals(name)) {
            // Input is well formed for each tag
         }
         else {
            // Not well-formed
         }
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:33:04.403

如果任何标签未打开或关闭，SAX 解析器实际上会引发异常，因此不需要对其进行处理....因此，如果 XML 文件错误/损坏，SAX 解析器将抛出异常

# sql - 如何将 SUMIFS 语句从 Excel 转换为 Access？

> ID：11633837
> 
> 赞同：3
> 
> 时间：2012-07-24T15:08:52.233
> 
> 标签：sql, excel, ms-access

我目前在 Excel 中有这个 SUMIFS 语句：

```
=SUMIFS( ORDERS!$I:$I,ORDERS!$D:$D, C4,  ORDERS!$G:$G, "Change", ORDERS!$L:$L, "") 
```

第一个标准是将单元格 C4 中的标识符与位于“订单”中的标识符相匹配。第二个标准是确保类型是“更改”。第三个标准是确保我没有将订单标记为排他性。

我有两张表是订单数据表和客户表。

我的最终目标是根据上述第一和第三个标准，对多种订单类型的第一列中的内容进行汇总。目前在 Excel 中，我根据我总结的订单类型切换第二个标准。

我已将数据从 Excel 传输到 Access（有一百万行，即使我粘贴了值，Excel 也崩溃了）。

如何构建查询以完成 SUMIFS 语句完成的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-03T17:02:49.473

sumifs 从 excel 到 Access 的另一种可能转换！

```
select sum(Iif(colA="someValue"  and colB=5 and colC is null,valueColumn,0)) 
from mytable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:15:24.097

```
Select sum(valueColumn) as theTotal 
from tableName 
where colA="someValue" 
and colB=5 
and colC is null 
```

# reporting-services - SSRS 显示来自其他几个表的支持数据

> ID：11633841
> 
> 赞同：0
> 
> 时间：2012-07-24T15:09:05.483
> 
> 标签：reporting-services, ssrs-2008, multiple-databases

我正在寻找解决此类问题的最佳方法，同时使用 SSRS 进行报告

我的大部分数据都在 MainTable 中，但我还有另外两个可能有数据的表，LocationList 和 ExtraDetails。在 SQL 中，这些是通过 Id 连接的，并且可能有零到多条记录。

我对 MainTable 数据没有问题，但有时我在 LocationList 中有额外的数据，需要在 MainTable 的行下列出。ExtraDetails 数据也是如此。

我无法弄清楚如何连接到额外的表并显示该数据

我要提交这样的报告：

```
Id1   Name1    Address1 
Id2   Name2    Address2
       LocationList-1 for Id2
       ExtraDetails-1 for Id2
       ExtraDetails-2 for Id2 
Id3   Name3    Address3
       ExtraDetails-1 for Id3 
Id4   Name4    Address4 
```

作为 C# 编码器，我要做的是获取 ID 的 LocationList 计数，如果 count > 1 则显示每个 LocationList 条目。但我怀疑这是 SSRS 报告的错误方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:08:53.457

答案是使用 SubReports。在这种情况下，我将为 LocationList 和 ExtraDetails 创建一个新报告，两者都使用参数输入，如下所示`select comment from LocationList where Id = @MainTableId.`：我在主报表中添加了一行，并为SubReport配置了一个单元格（右键插入一个SubReport，右键配置SubReport使用LocationList或ExtraDetails报表，并添加解析参数输入的引用。）

这对我来说很难找到，因为我还不知道要查看 SubReports 以寻求解决方案。

# wcf - Silverlight 客户端和业务逻辑之间的 WCF Ria 服务？

> ID：11633844
> 
> 赞同：0
> 
> 时间：2012-07-24T15:09:13.990
> 
> 标签：wcf, silverlight, wcf-ria-services, silverlight-5.0

[我有一个与此](https://stackoverflow.com/questions/4644311/silverlight-use-of-a-local-wcf-service-for-business-logic-intermediate-wcf-ser)非常相似的问题。

有一个现有的软件（数据和业务层）在服务器上运行，我想向它添加一个 Silverlight GUI 客户端。目前通过 WCF 服务进行通信，但我想改用 WCF RIA 服务。

我的架构如下所示：

`Database - DAL - BL - WCF Services - Silverlight client`

所有业务逻辑都在服务器上，Silverlight 客户端主要是一个数据查看器。

问题：

1）用 WCF RIA 服务替换 WCF 服务（用于客户端和服务器之间的通信）是否有意义？

2) 是否可以让 WCF 服务与 WCF RIA 服务对话？像这样：

`Database - DAL - BL - WCF Services - WCF RIA Service - Silverlight client`

或者

`Database - DAL - BL - WCF Services - Translator - WCF RIA Service - Silverlight client`

或者

`Database - DAL - BL - WCF RIA Service - Silverlight client`

RIA 服务的所有示例和教程似乎都使用它们直接访问数据库，但如果我想访问业务层怎么办？我将如何表示业务层上的“数据对象”？我将如何使用 RIA 服务从客户端调用服务器上的函数，例如计算某些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:58:00.863

1) 我会非常倾向于使用 WCF RIA 来获得通过使您的 Silverlight 代码保持最新的工具所获得的所有好处。使用服务引用会增加 WCF 服务和 Silverlight 实现不同步的几率。

2) 我将使用 WCF RIA 服务包装 WCF 服务，如示例 #1 所示：

```
Database - DAL - BL - WCF Services - WCF RIA Service - Silverlight client 
```

您的 WCF RIA DomainService 应该采用 WCF 服务的一个实例并仅包装它。

```
[EnableClientAccess]
public class FooDomainService : DomainService
{
    FooWcfService _fooWcfService;

    public FooDomainService(FooWcfService fooWcfService)
    {
        _fooWcfService = fooWcfService;
    }

    public IQueryable<Bar> GetBars()
    {
        return _fooWcfService.GetBars().AsQueryable();
    }
} 
```

# spring-mvc - 在 Liferay Portlet 中流式传输文件

> ID：11633849
> 
> 赞同：0
> 
> 时间：2012-07-24T15:09:24.023
> 
> 标签：spring-mvc, streaming, liferay, portlet

我以简单的方式编写了下载文件：

```
@ResourceMapping(value = "content")
public void download(ResourceRequest request, ResourceResponse response) {
//...
SerializableInputStream serializableInputStream = someService.getSerializableInputStream(id_of_some_file);

response.addProperty(HttpHeaders.CACHE_CONTROL, "max-age=3600, must-revalidate");
response.setContentType(contentType);
response.addProperty(HttpHeaders.CONTENT_TYPE, contentType);
response.addProperty(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename*=UTF-8''"
    + URLEncoder.encode(fileName, "UTF-8"));

OutputStream outputStream = response.getPortletOutputStream();
byte[] parcel = new byte[4096];

while (serializableInputStream.read(parcel) > 0)
    outputStream.write(parcel);

outputStream.flush();
serializableInputStream.close();
outputStream.close();
//...
} 
```

`SerializableInputStream`此处描述了[- JavaDocs](http://openhms.sourceforge.net/rmiio/apidocs/com/healthmarketscience/rmiio/SerializableInputStream.html)。它允许对 InputStream 进行序列化，例如，通过远程处理传递。

我从输入读取并将其写入输出，而不是一次写入所有字节。但不幸的是，portlet 并没有“流式传输”内容——文件（例如图像）只有在读取整个输入流之后才会发送到浏览器——这就是它的样子。我看到从数据库（从实时日志）中读取的文件，但我没有在屏幕上看到任何“增长”的图像。

我究竟做错了什么？是否可以在 Liferay 6.0.6 和 Spring Portlet MVC 中真正流式传输文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:52:23.360

你在哪里做这个？我担心你这样做而不是渲染你的 portlet 的 HTML（例如渲染阶段）。通常，portlet 内容嵌入在 HTML 页面中，因此您需要资源阶段，它（大致）表现得像一个 servlet。

此外，您提供的代码与您提出的实际问题不匹配：您使用评论`//read from input stream (file), write file to os`并询问如何做不同的事情，以便在内存中没有完整的内容。

由于评论在内存中没有任何内容，您可以在写入输出流时循环读取输入文件：潜在的问题是什么？您是否在门户环境中实现下载流式传输时遇到问题，或者在写入流时从文件中读取数据有困难（即使用太多内存）？

**编辑**：感谢您的澄清。您是否尝试过更早地刷新流？您可以随时执行此操作 - 例如每个循环（尽管这可能有点过多）。另外，请记住，浏览器以及文件本身必须以您期望的方式处理它：如果图像没有“增量”编码，浏览器可能不会以这种方式显示它。

您是否也尝试过处理大文件？可能是因为您的文件太小而无法触发自动刷新...

另外，我认为这`filename*=UTF-8''`看起来很奇怪。可能是有效的编码，但我从未见过这个

# styles - PHPExcel 读取 xls 文件，获取单元格样式（字体粗细、颜色等）

> ID：11633851
> 
> 赞同：0
> 
> 时间：2012-07-24T15:09:33.197
> 
> 标签：styles, phpexcel

我正在尝试读取一个 excel 文件并将其呈现为 html 表。我想将已在 excel 中应用的样式应用于单元格并在 html 中呈现它。例如，某些单元格可能有粗体文本，我如何获取该信息并以最有效的方式使用它？

这是我到目前为止的代码（我是第一次尝试 PHPExcel，所以我很想听听我可以对此做出的任何评论或改进）：

```
if ($_GET["xls"]) {

require_once("classes/PHPExcel.php");

$objPHPExcel = PHPExcel_IOFactory::load( dirname(__FILE__) . "/demo.xls" );
$sheetData = $objPHPExcel->getSheetByName('Sheet1')->toArray(null,true,true,true);
?>
    <?php if ( count($sheetData) < 0) : ?>
        <table class="table striped">
            <?php foreach( $sheetData as $y => $row ) : ?>
                <tr>
                    <?php foreach ( $row as $x => $cell) : ?>
                        <?php if ( $x === "A" ) : ?>
                            <th><?php echo $cell; ?></th>
                        <?php else : ?>
                            <td><?php echo $cell; ?></td>
                        <?php endif; ?>
                    <?php endforeach; ?> 
                </tr>
            <?php endforeach; ?>
        </table>
    <?php endif; ?>
<?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:54:12.033

似乎以下代码有效：

```
$objPHPExcel->getSheetByName('Sheet1')->getStyle("B13")->getFont()->getBold() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:43:43.163

为什么不看看 PHPExcel 现有的 HTML Writer：它已经处理了合并的单元格、单元格格式（包括边框）、字体样式等。

# parsing - 递归下降解析器 - 避免左递归

> ID：11633855
> 
> 赞同：-2
> 
> 时间：2012-07-24T15:09:38.497
> 
> 标签：parsing, recursive-descent, left-recursion

我有以下作品

```
A -> Aa
A -> b 
```

所以很明显有左递归

```
parseA() {
   parseA();//recursion
   parsea();
} 
```

据说使用以下规则可以避免左递归

```
A -> bA'
A' -> aA'|null 
```

这里如何避免左递归？函数A'中仍然存在递归。任何人都可以解释一下。我是这个主题的初学者吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:12:16.730

> 这里如何避免左递归？函数A'中仍然存在递归。

再读一遍。避免了左递归。非左递归不是。

# mysql - 具有列计数的 MySQL 查询

> ID：11633856
> 
> 赞同：1
> 
> 时间：2012-07-24T15:09:47.813
> 
> 标签：mysql, count

我有两个表`l & C`，它们由两个字段链接，`l.mID`c`c.mID`表包含三种类型的记录`cs, ls, & vs`，我的查询需要从 l 中选择所有记录，作为查询的一部分，有三列显示总计`cs, ls & vs`；

到目前为止，我正在使用外部联接：

```
SELECT l.*, COUNT(*) FROM l LEFT OUTER JOIN c ON c.mID = l.mID WHERE l.mID = 2 
```

但这只是在一列中附加了一个完整的总数，任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:13:17.070

您可以在计数中使用`CASE`语句：

```
select
  l.*
  ,COUNT(CASE WHEN c.type = 'cs' then 1 END) as cscount
  ,COUNT(CASE WHEN c.type = 'ls' then 1 END) as lscount
  ,COUNT(CASE WHEN c.type = 'vs' then 1 END) as vscount
from l
left outer join c on c.mID = l.mID
where l.mID = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:16:56.807

```
select
  l.*
  ,sum(c.type = 'cs') as cscount
  ,sum(c.type = 'ls') as lscount
  ,sum(c.type = 'vs') as vscount
from l
left outer join c on c.mID = l.mID
where l.mID = 2 
```

# backbone.js - 如何取消绑定默认视图事件绑定？

> ID：11633865
> 
> 赞同：0
> 
> 时间：2012-07-24T15:10:05.947
> 
> 标签：backbone.js, backbone-events, marionette, backbone-views

我有一个由 Backbone Marionette 项目视图呈现的集合。每当重置集合时，都会重新呈现视图。据我所知，这是默认的[Backbone.Marionette](http://bit.ly/KtT8qk)行为。有没有办法可以禁用它？

```
 var ActiveWordView = M.ItemView.extend({
    template: '#active-word-template',
    tagName: 'form',

    onRender: function() {
      // This is being triggered when the collection resets, even
      // though I didn't specify that behaviour in an initializer.
      console.log("Active word re-rendered");
    }
  });

  var activeWordView = new ActiveWordView({
    collection: this.model.get('words'),
  });
  this.activeWordRegion.show(activeWordView); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:13:32.923

覆盖`initialEvents`方法。

```
var ActiveWordView = M.ItemView.extend({
  template: '#active-word-template',
  tagName: 'form',

  initialEvents: function() {},
}); 
```

# asp.net-mvc - DRY - 停止 MVC 操作中的重复获取、编辑和删除

> ID：11633868
> 
> 赞同：0
> 
> 时间：2012-07-24T15:10:12.453
> 
> 标签：asp.net-mvc, dry

假设我有一个 CategoriesController 来管理某种类别列表。它有以下动作方法：

```
public ActionResult Get(Int32 categoryId);

public ActionResult Edit(Int32 categoryId);

[HttpPost]
public ActionResult Edit(Int32 categoryId, CategoryModel model);

public ActionResult Delete(Int32 categoryId);

[HttpPost]
public ActionResult Delete(Int32 categoryId, DeleteModel model); 
```

所有这些方法都运行相同的代码来验证`categoryId`类别是否有效并且存在，它从数据库中检索它，并执行访问级别验证。部分验证码直接返回ActionResult，其他不返回（例如categoryId不存在，则立即返回Http404动作结果，但如果一切正常则归结为特定动作代码。

减少代码重复的最好方法是做这样的事情吗？

```
private ActionResult EnsureCategory(Int32 categoryId, out DBCategory dbCategory);

public ActionResult Edit(Int32 categoryId) {
    DBCategory dbCategory;
    ActionResult error = EnsureCategory(categoryId, out dbCategory);
    if( error != null ) return error;

    // this now means that only 3 lines of code will be shared between the Action methods, but it still seems too much.
} 
```

很遗憾 C# 不支持预处理器宏或类似的东西，因为这是使用它们的好地方。除非有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:22:58.900

使用[动作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)，在方法内部进行验证`OnActionExecuting`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:08:44.653

我最终继续使用我在最初的问题中向自己建议的方法。我确实考虑过使用@SteveB 的 T4 模板建议，但我发现 T4 模板有点难以使用。

# python - Numpy：使用无限范围的垃圾箱

> ID：11633874
> 
> 赞同：8
> 
> 时间：2012-07-24T15:10:26.010
> 
> 标签：python, numpy, range, infinite, bin

在我的 Python 脚本中，我有要装箱的浮点数。现在我正在做：

```
min_val = 0.0
max_val = 1.0
num_bins = 20
my_bins = numpy.linspace(min_val, max_val, num_bins)
hist,my_bins = numpy.histogram(myValues, bins=my_bins) 
```

但是现在我想再添加两个 bin 来说明 < 0.0 的值和 > 1.0 的值。因此，一个 bin 应包含 (-inf, 0) 中的所有值，另一个 bin 应包含 [1, inf) 中的所有值

`histogram`在仍然使用 numpy 的功能的同时，有什么直接的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T15:16:06.197

该函数`numpy.histogram()`愉快地接受`bins`参数中的无限值：

```
numpy.histogram(my_values, bins=numpy.r_[-numpy.inf, my_bins, numpy.inf]) 
```

或者，您可以使用 and 的组合`numpy.searchsorted()`，`numpy.bincount()`尽管我认为这种方法没有多大优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T15:14:11.383

您可以指定bin`numpy.inf`上限和`-numpy.inf`bin 下限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-20T08:53:15.583

使用 Numpy 1.16 版，您拥有`histogram_bin_edges`. 有了这个，今天的解决方案调用`histogram_bin_edges`获取垃圾箱，`concatenate`-inf 和 +inf 并将其作为垃圾箱传递给`histogram`：

```
a=[1,2,3,4,2,3,4,7,4,6,7,5,4,3,2,3]
np.histogram(a, bins=np.concatenate(([np.NINF], np.histogram_bin_edges(a), [np.PINF]))) 
```

结果是：

```
(array([0, 1, 3, 0, 4, 0, 4, 1, 0, 1, 0, 2]),
array([-inf,  1\. ,  1.6,  2.2,  2.8,  3.4,  4\. ,  4.6,  5.2,  5.8,  6.4, 7\. ,  inf])) 
```

如果您希望最后一个 bin 为空（就像我一样），您可以使用该`range`参数并添加一个小数字`max`：

```
a=[1,2,3,4,2,3,4,7,4,6,7,5,4,3,2,3]
np.histogram(a, bins=np.concatenate(([np.NINF], np.histogram_bin_edges(a, range=(np.min(a), np.max(a)+.1)), [np.PINF]))) 
```

结果是：

```
(array([0, 1, 3, 0, 4, 4, 0, 1, 0, 1, 2, 0]),
array([-inf, 1\.  , 1.61, 2.22, 2.83, 3.44, 4.05, 4.66, 5.27, 5.88, 6.49, 7.1 ,  inf])) 
```

# iphone - 在不中断音频的情况下播放视频 - 目标 c

> ID：11633877
> 
> 赞同：2
> 
> 时间：2012-07-24T15:10:43.843
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, avaudiosession

我的应用程序播放没有声音的视频文件。它会中断背景中的任何播放音乐（例如 iPod 应用程序）。如果可能的话，如何不中断其他应用程序的音频会话。我的视频文件没有声音。要播放我使用的视频`MPMoviePlayerController`。

**编辑**：这是我的视频播放器代码：

```
_player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:path]];
[self installMovieNotificationObservers:nil];
[_player setShouldAutoplay:YES];
[_player setUseApplicationAudioSession:NO];
[_player.view setFrame:self.navController.view.frame];
[_player setMovieSourceType:MPMovieSourceTypeFile];
[_player setRepeatMode:MPMovieRepeatModeNone];
[_player setFullscreen:YES animated:YES];
[_player setControlStyle:MPMovieControlStyleNone];
[_navController.view addSubview:_player.view];
[_player play]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:01:19.380

直接来自 Apple 的文档：http: [//developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/occ/instp/MPMoviePlayerController/useApplicationAudioSession](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/occ/instp/MPMoviePlayerController/useApplicationAudioSession)

> useApplicationAudioSession 一个布尔值，指示电影播放器​​是否应使用应用程序的音频会话。
> 
> @property (nonatomic) BOOL useApplicationAudioSession 讨论 此属性的默认值为 YES。将此属性设置为 NO 会导致电影播放器​​使用系统提供的具有不可混合播放类别的音频会话。
> 
> 重要在 iOS 3.1 和更早版本中，电影播放器​​总是使用系统提供的音频会话。要在 iOS 3.2 和更新版本中获得相同的行为，您必须将此属性的值设置为 NO。当此属性为 YES 时，电影播放器​​共享应用程序的音频会话。这使您可以控制电影播放器​​内容如何与您的音频以及来自其他应用程序（如 iPod）的音频进行交互。有关使用此功能的重要指导，请参阅音频会话编程指南中的“使用电影和 iPod 音乐”。
> 
> 更改此属性的值不会影响当前播放的电影。要使新设置生效，您必须停止播放然后重新开始。
> 
> 可用性 适用于 iOS 3.2 及更高版本。在 MPMoviePlayerController.h 中声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-17T04:57:40.577

**斯威夫特 5 答案**

```
 do {
        if #available(iOS 10.0, *) {
            try AVAudioSession.sharedInstance().setCategory(AVAudioSession.Category.playback, mode: AVAudioSession.Mode.default, options: .mixWithOthers)
        } else {
            try AVAudioSession.sharedInstance().setCategory(AVAudioSession.Category.playback, options: .mixWithOthers)
        }
        try AVAudioSession.sharedInstance().setActive(true)
  } catch {
        print(error)
  } 
```

# merge - Gerrit 总是在提交补丁集之前 rebase 以避免合并提交

> ID：11633878
> 
> 赞同：14
> 
> 时间：2012-07-24T15:10:49.383
> 
> 标签：merge, submit, gerrit, rebase

我发现当在**Gerrit** Web 界面中单击“提交补丁集”时，它要么只是向该分支添加一个提交，要么在之前提交另一个提交时创建一个合并提交。

创建 2 次提交的示例：实际提交和合并提交：

1.  用户根据提交 O 提交补丁集 A
2.  用户根据提交 O 提交补丁集 B
3.  提交补丁集 A
4.  提交补丁集 B --> 在 O -> A 和 O -> B 之间创建合并提交

有一个“Rebase Change”按钮很棒，但这意味着提交补丁集每个人都应该这样做：

1.  单击**变基更改**
2.  单击**提交更改集**

我认为合并提交有用的唯一原因是保留提交的日期（但我确实理解为什么在没有变基的情况下需要它）。

是否没有**自动变基**或至少检查以避免生成不希望的合并提交？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T15:12:44.663

是的。将项目的提交操作更改为 Cherry Pick。这与按下提交按钮时的 rebase 大致相同。提交更改时，它将保留您正在寻找的干净历史记录，而无需合并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T19:38:27.640

您可以通过访问项目设置页面并选择“必要时变基”而不是“必要时合并”来更改项目的默认提交类型。

有关提交类型的完整文档，请参阅：[https ://gerrit-review.googlesource.com/Documentation/config-project-config.html#submit-type](https://gerrit-review.googlesource.com/Documentation/config-project-config.html#submit-type)

> 任何项目所有者都可以通过项目控制台（Projects > List > my/project）修改 Gerrit 用来提交项目更改的方法。通常，仅当所有依赖项也都提交时才合并提交的更改，下面记录了例外情况。支持以下提交类型：
> 
> 1.  **继承**
>     
>     
>     
>     这是新项目的默认设置，除非被全局 defaultSubmitType 选项覆盖。
>     
>     
>     
>     从父项目继承提交类型。在 All-Projects 中，这相当于 Merge If Necessary。
>     
>     
> 2.  **仅快进**
>     
>     
>     
>     使用这种方法，Gerrit 不会在提交更改时创建合并提交。仍然可以提交合并提交，但必须在上传到 Gerrit 进行审查之前在客户端上创建它们。
>     
>     
>     
>     要提交更改，更改必须是目标分支的严格超集。也就是说，更改必须在提交时已经包含目标分支的尖端。
>     
>     
> 3.  **必要时合并**
>     
>     
>     
>     如果提交的更改是目标分支的严格超集，则该分支将快速转发到更改。如果没有，则自动创建合并提交。这与经典的 git merge 行为或 git merge --ff 相同。
>     
>     
> 4.  **始终合并**
>     
>     
>     
>     始终生成合并提交，即使更改是目标分支的严格超集。这与 git merge --no-ff 的行为相同，如果项目需要使用 git log --first-parent 跟随提交，这可能会很有用。
>     
>     
> 5.  **樱桃采摘**
>     
>     
>     
>     总是选择补丁集，忽略父血统，而是在当前分支头上创建一个全新的提交。
>     
>     
>     
>     当挑选更改时，Gerrit 会自动在提交消息的末尾附加更改批准的简短摘要，以及返回 Web 上更改的 URL 链接。提交者头也设置为提交者，而作者头保留原始补丁集作者。
>     
>     
>     
>     请注意，Gerrit 在使用此提交类型时会忽略更改之间的依赖关系，除非启用了 change.submitWholeTopic 并且依赖的更改共享相同的主题。所以一般提交者在使用这种提交类型时必须记住以正确的顺序提交更改。如果您想要的只是提交消息中的额外信息，请考虑使用 Rebase Always submit 策略。
>     
>     
> 6.  **必要时变基**
>     
>     
>     
>     如果提交的更改是目标分支的严格超集，则该分支将快速转发到更改。如果不是，则更改会自动重新定位，然后分支会快速转发到更改。
>     
>     
>     
>     当 Gerrit 尝试进行合并时，默认情况下只有在没有路径冲突的情况下合并才会成功。当同一文件在合并的另一侧也已更改时，会发生路径冲突。
>     
>     
> 7.  **总是变基**
>     
>     
>     
>     基本上，与 Rebase If Necessary 相同，但即使可以快进，它也会创建一个新的补丁集，并且像 Cherry Pick 一样，它确保诸如 Change-Id、Reviewed-On 等页脚存在于合并的结果提交中。
>     
>     
>     
>     因此，Rebase Always 可以被认为类似于 Cherry Pick，但重要的区别是 Rebase Always 不会忽略依赖项。

# android - Android：设置编辑文本字段物理长度的方法

> ID：11633885
> 
> 赞同：1
> 
> 时间：2012-07-24T15:11:06.377
> 
> 标签：android, user-interface, android-edittext

有没有办法使用某种物理参数（即英寸、像素等）来限制 Android 编辑文本字段的输入长度。我不想通过字符数来限制字段。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:17:15.107

您可以使用`android:maxWidth="100dp"`，但这将设置视图本身的最大宽度，并且不会影响允许输入多少个字符。

我不相信有一种简单的方法可以完成你想要的。我唯一能想到的是使用 TextWatcher 并动态确定有多少字符适合您想要的大小（对于不同的设备会有所不同）。这仍然基本上是“按字符数限制字段”，尽管您声明您不想这样做。

你能详细说明你为什么要这样做吗？也许有更好的方法来解决您面临的整体挑战。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:18:37.227

您想添加一个文本更改侦听器 ( [TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html) )。在您的听众中，您需要测量字体的大小、屏幕的像素密度以及字符数。将所有这些相乘，您应该知道文本的物理长度（有一些警告）。

话虽如此，这似乎是一个奇怪的限制，我不确定你为什么想要这个。每台设备都会有不同的屏幕尺寸，因此以英寸为单位测量界面通常是个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:32:27.157

您可以找到打印表单中适合多少 M，然后使用[EditText.SetMaxEms](http://developer.android.com/reference/android/widget/TextView.html#setMaxEms%28int%29)确保输入可在表单上打印。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T15:16:34.293

在你的 EditText 上试试这个

```
android:maxLength="10" 
```

# java - 是否可以在基于 Spring 的控制台应用程序中使用 @Valid 注释？

> ID：11633891
> 
> 赞同：0
> 
> 时间：2012-07-24T15:11:19.197
> 
> 标签：java, spring, validation

我`AnnotationConfigApplicationContext`创建了带`@Configuration`注释的类作为参数：

```
@Configuration
class Config {

    @Bean
    public LocalValidatorFactoryBean localValidatorFactoryBean() {
        return new LocalValidatorFactoryBean();
    }

    @Bean
    public A aBean() {
        return new A();
    }

    @Bean
    public B aBean() {
        return new B();
    }
} 
```

地点`A`和地点`B`：

```
class A {

    @Min(1)
    public int myInt;
}

class B {

    @Autowire(required = true)
    @Valid
    public A aBean;
} 
```

**Q：**这种情况下是否可以让Spring来处理`@Valid`注解？

**PS：**目前我有以下工作实施`B`：

```
class B {

    public A aBean;

    public void setABean(A aBean, Validator validator) {
        if (validator.validate(aBean).size() > 0) {
            throw new ValidationException();
        }
        this.aBean = aBean;
    }
} 
```

这个 impl 对我来说似乎有点笨拙，我想替换它。请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:30:00.973

看起来您想在注入过程中验证您的 bean。你可以 [在这里阅读。](http://blog.orange11.nl/2009/08/04/bean-validation-integrating-jsr-303-with-spring/)

这是一个例子：

```
public class BeanValidator implements org.springframework.validation.Validator, InitializingBean {

private Validator validator;

public void afterPropertiesSet() throws Exception {
    ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();
    validator = validatorFactory.usingContext().getValidator();
}

public boolean supports(Class clazz) {
    return true;
}

public void validate(Object target, Errors errors) {
    Set<ConstraintViolation<Object>> constraintViolations = validator.validate(target);
    for (ConstraintViolation<Object> constraintViolation : constraintViolations) {
        String propertyPath = constraintViolation.getPropertyPath().toString();
        String message = constraintViolation.getMessage();
        errors.rejectValue(propertyPath, "", message);
    }
} 
```

}

您将需要实现 InitializingBean，以便能够在设置 bean 后对其进行验证。

# sharepoint - 我可以通过更新元数据来合并具有唯一值冲突的 Sharepoint 列表吗？

> ID：11633900
> 
> 赞同：0
> 
> 时间：2012-07-24T15:11:43.763
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我正在尝试将 Excel 电子表格或其他共享点列表中的数据合并或复制到主列表中。主“项目编号”列将强制执行唯一值，但每个项目将使用元数据分配给多个“项目编号”。

当重复项目添加到列表中时，是否可以告诉 sharepoint 自动更新元数据？如果它会显示旧条目进行修改，我什至可以手动编辑元数据，但我看到的唯一选项是修改或删除新项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:11:25.687

在我看来（根据您给出的描述），您正在尝试将多个列表整理成一个，并且每个列表中的任何数据都需要合并。这个对吗？

如果是这样，您可能需要做一些自定义代码。这里有一点贯穿。

获取包含您的项目的列表的列表对象或从 excel 中获取您的项目。

遍历列表（或 excel）中的每个项目，将项目导入主列表。

在上述步骤之前，您需要检查唯一标识符是否已存在于主列表中。如果它确实抓住了该项目并更新它，如果它没有继续正常添加该项目。

与往常一样，我建议您自己尝试一下。如果您可以阅读其他人的代码，那么您自己做某事并诚实地执行上述操作会更有价值，那么从网络上复制（我的意思是重用：P）其他人的代码需要很长时间才能获得预期的结果。

我不知道您可以通过哪种方式开箱即用或通过 SharePoint 设计器执行此操作。

希望这可以帮助

特鲁兹

# c++ - 用同名的 typedef 替换预处理器宏

> ID：11633913
> 
> 赞同：4
> 
> 时间：2012-07-24T15:12:36.790
> 
> 标签：c++, macros, c-preprocessor

我想用具有相同名称的正确 typedef 替换宏。我有

```
#define FooType char* 
```

在第三方库中，这破坏了我的一些代码（更准确地说：我被迫使用的一些代码，我自己无法更改）。我想用同名的 typedef 替换它，然后`#undef`用宏替换它。我尝试过这样的事情：

```
#define TMP_MACRO FooType
#undef FooType
typedef TMP_MACRO FooType;
#undef TMP_MACRO 
```

但是预处理器将其扩展为：

```
typedef FooType FooType; 
```

（至少那是`g++ -E`告诉我的）。所以宏`TMP_MACRO`不会立即展开。由于 'FooType' 不存在，因此无法编译。

如何`FooType`用适当的类型替换宏并在之后取消定义宏？或者这是不可能的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T15:41:51.697

声明通常`typedef`在一行上，但行号对编译器没有任何意义。

```
typedef FooType
#undef FooType
FooType; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:15:47.537

为什么不简单

```
#undef FooType
typedef char* FooType 
```

您得到的输出是正确的，因为您指示预处理器替换`TMP_MACRO`为`FooType`（事实上，您`undef`FooType 之后对此毫无意义）。

# eclipse-juno - 带有箭头的已打开选项卡的 Eclipse Juno 导航

> ID：11633917
> 
> 赞同：1
> 
> 时间：2012-07-24T15:12:49.510
> 
> 标签：eclipse-juno

我最近从 Indigo 升级到 Juno。一切都好，但我找不到如何使用箭头（示例图片[http://imageshack.us/photo/my-images/542/img2ri.jpg/](http://imageshack.us/photo/my-images/542/img2ri.jpg/)）而不是列表（示例图片[http: //imageshack.us/photo/my-images/155/img1nh.jpg/](http://imageshack.us/photo/my-images/155/img1nh.jpg/)）。

任何人都知道如何恢复此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:42:47.830

这实际上是一个错误，在选项卡之间导航的箭头由插件 Extended VS Presentation 提供，遗憾的是 Eclipse Juno 中不提供该插件。我试过安装它，但是修改没有生效，因为新的Eclipse使用了不同的渲染引擎。:(

# php - 在PHP中按ID组合两个数组

> ID：11633918
> 
> 赞同：0
> 
> 时间：2012-07-24T15:12:50.457
> 
> 标签：php, arrays, multidimensional-array

我需要在 PHP 中比较两个二维数组。数组如下所示：

```
Array one
ID Name
11 Aa 
11 Ab
12 Bb
13 Cc
14 Dd
15 Ee

Array two
ID Content
11 Cat
13 Dog
14 Donkey 
```

现在我需要将这两个组合成一个数组，如下所示：

```
ID Name Conent
11 Aa Cat
11 Ab Cat
12 Bb
13 Cc Dog
14 Dd Donkey
15 Ee 
```

我怎样才能做到这一点？我对 array_merge() 或 $array3 = $array1 + $array2; 没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:15:51.703

一种快速的方法是遍历第一个数组并附加第二个数组的值：

```
$array1 = array('11' => 'Aa', '12' => 'Bb', '13' => 'Cc', '14' => 'Dd', '15' => 'Ee');
$array2 = array('11' => 'Cat', '13' => 'Dog', '14' => 'Donkey');

$combined = array();
foreach ($array1 as $key => $val) {
    $combined[$key] = $val . (isset($array2[$key]) ? ' '.$array2[$key] : '');
} 
```

这将遍历每个键/值`$array1`并将其添加到`$combined`数组中。如果`$array2`存在具有相同索引的值，它会将其附加到来自 的该值`$array1`，并用空格分隔。

**更新：**我（再次）误读了数组的格式。我假设`ID`是数组中的实际索引，但由于示例数组输出同时具有`Name`和`Content`，我假设`ID`是实际索引字符串值，而不是数组本身的索引。要坚持循环场景，您可以遍历第一个数组并让嵌套循环遍历第二个数组：

```
$array1 = array(
        array('ID' => '11', 'Name' => 'Aa'),
        array('ID' => '12', 'Name' => 'Bb'),
        array('ID' => '13', 'Name' => 'Cc'),
        array('ID' => '14', 'Name' => 'Dd'),
        array('ID' => '15', 'Name' => 'Ee'),
    );
$array2 = array(
        array('ID' => '11', 'Content' => 'Cat'),
        array('ID' => '13', 'Content' => 'Dog'),
        array('ID' => '14', 'Content' => 'Donkey')
    );

$combined = array();
foreach ($array1 as $arr) {
        $comb = array('ID' => $arr['ID'], 'Name' => $arr['Name'], 'Content' => '');
        foreach ($array2 as $arr2) {
            if ($arr2['ID'] == $arr['ID']) {
                $comb['Content'] = $arr2['Content'];
                break;
            }
        }
    $combined[] = $comb;
} 
```

这会将每个值添加`$array1`到组合数组中，并且当且仅当其中的值`$array2`包含相同`ID`的字段时，它也会将其`Content`字段添加到数组中。这也可以扩展为处理任意数量的字段，无论是通过名称，还是通过将内部 if 块更改为 have `$comb += $arr2;`（它应该合并所有不存在的索引）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:15:32.393

您将不得不制作自己的功能：

```
function putThemTogether($array1, $array2) {
    $output = array();
    foreach($array1 as $key => $value) {
        if (!isset($output[$key]))
            $output[$key] = array();
        $output[$key][] = $value;
    }
    foreach($array2 as $key => $value) {
        if (!isset($output[$key]))
            $output[$key] = array();
        $output[$key][] = $value;
    }
    return $output;
} 
```

为了使它更好，你可以让它接受任意数量的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:15:57.263

```
$result = array_map (
  function ($item) { return is_array($item) ? implode(' ', $item) : $item; },
  array_merge_recursive($array1, $array2);
); 
```

请注意，两个数组都需要字符串键

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-28T09:12:18.720

另一个解决方案是使用`array_search`and `array_column`（从 PHP 5.5.0 开始）。

```
foreach ($array1 as $key => $val) {
    $found_key = array_search($val['ID'], array_column($array2, 'ID'));
    if ($found_key !== false) { $array1[$key]['Content'] = $array2[$found_key]['Content']; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-11T13:36:33.447

**试试这个我希望它会工作**

```
function merge_two_arrays($array1,$array2) {
    $data = array();
    $arrayAB = array_merge($array1,$array2);
    foreach ($arrayAB as $value) {
        // This assumes there is a field called "id"
        $id = $value['id'];
        if (!isset($data[$id])) {
            $data[$id] = array();
        }
        $data[$id] = array_merge($data[$id],$value);
    }
    return $data;
}

$master_array = merge_two_arrays($array1,$array2); 
```

# c# - 使用 opcv 从 wpf windows 打开 Windows 窗体

> ID：11633919
> 
> 赞同：0
> 
> 时间：2012-07-24T15:12:50.860
> 
> 标签：c#, wpf, winforms, opencv

**注意**我是 Wpf 中的新手> 我有一个项目可以使用 opencv 库 throw web cam 解码 qr 代码> 并且它运行成功

现在我想在新的 Wpf 项目中使用这个项目 > 添加新的 wpf 项目并参考 winFrom 应用程序 >

这是我打开winfrom的简单代码>

```
public void runnow(){
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new CameraCapture.cameraCapture()); } 
```

通过破坏给我这个例外>

'Emgu.CV.CvInvoke' 的类型初始化程序引发了异常。>

我能做些什么来解决这个问题

C# 代码

```
 public partial class CameraCapture : Form
 {

Capture capture;
    bool Capturing;
    Bitmap bimap;
    private Reader reader;
    private Hashtable hint;
    libAES libEncryption = new libAES();
    string Mykey = "";
   public static String dataDecrypted="";

    public CameraCapture()
    {
        InitializeComponent();
    }

    private void Mains(object sender, EventArgs arg) // Start function main to encode Qr code
    {
        Image<Bgr, Byte> image = capture.QueryFrame();
        if (image != null)
        {
            bimap = image.ToBitmap();
            pictureBox1.Image = bimap;
            reader = new QRCodeReader();
            hint = new Hashtable();   //  Add some elements to the hash table. There are no  duplicate keys, but some of the values are duplicates.
            hint.Add(DecodeHintType.POSSIBLE_FORMATS, BarcodeFormat.QR_CODE);
            RGBLuminanceSource source = new RGBLuminanceSource(bimap, bimap.Width, bimap.Height);  //This class is used to help decode images from files which arrive as RGB data from* Android bitmaps. It does not support cropping or rotation.
            BinaryBitmap img = new BinaryBitmap(new GlobalHistogramBinarizer(source));
            Result result = null;
            try
            {
                result = reader.decode(img, hint);
                dataDecrypted = libEncryption.Decrypt(result.Text, Mykey);

            }
            catch
            {
                dataDecrypted = "";
            }
            if (result == null)
            {
                label1.Text = " no decode";

            }
            else
            {

                label4.Text = result.Text;
                label1.Text = dataDecrypted;

                capture.Dispose();

            }
        }

    } // end function Main

    private void btnStart_Click(object sender, EventArgs e)
    {
        if (capture == null)
        {
            try
            {
                capture = new Capture(); // **the exption thown here**
            }
            catch (NullReferenceException exception)
            {
                MessageBox.Show(exception.Message);
            }
        }
        if (capture != null)
        {
            if (Capturing)
            {
                btnStart.Text = "Start Capture";
                Application.Idle -= Mains;
            }
            else
            {
                btnStart.Text = "Stop Capture";
                Application.Idle += Mains;
            }
            Capturing = !Capturing;
        }
    }
    private void Release()
    {
        if (capture != null)
            capture.Dispose();
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:19:42.707

如果要在 WPF 中托管 WinForm，则需要使用宿主控件 System.Windows.Forms.Integration.WindowsFormsHost

> WPF 提供了许多具有丰富功能集的控件。但是，有时您可能希望在 WPF 页面上使用 Windows 窗体控件。例如，您可能对现有的 Windows 窗体控件进行了大量投资，或者您可能拥有一个提供独特功能的 Windows 窗体控件。

示例代码

```
private void Window_Loaded(object sender, RoutedEventArgs e) 
{
// Create the interop host control.
System.Windows.Forms.Integration.WindowsFormsHost host =
    new System.Windows.Forms.Integration.WindowsFormsHost();

// Create the MaskedTextBox control.
MaskedTextBox mtbDate = new MaskedTextBox("00/00/0000");

// Assign the MaskedTextBox control as the host control's child.
host.Child = mtbDate;

// Add the interop host control to the Grid
// control's collection of child controls.
this.grid1.Children.Add(host);
} 
```

检查 => [http://msdn.microsoft.com/en-us/library/ms751761.aspx](http://msdn.microsoft.com/en-us/library/ms751761.aspx)

# javascript - 网站如何立即检测到 javascript 已被禁用？

> ID：11633920
> 
> 赞同：46
> 
> 时间：2012-07-24T15:12:51.173
> 
> 标签：javascript, html, css, noscript

通常，当一个页面被加载，并且浏览器禁用了 Javascript 时，我们使用`<noscript>`标签来写一些类似警告的东西，并告诉客户端启用 Javascript。但是，Facebook，即使**您**在启用 JS 的情况下加载页面后，当它被禁用时，您也会收到通知。我怎么能做这样的事情？

更新：此机制在 Facebook 中不再可用，但以前，我问这个问题为时已晚，但如果找到任何答案，我将不胜感激。

## **我试过的**

我想在我的页面中有一个片段，它会不断检查是否禁用了 Javascript，如果是，则显示`<noscript>`.

为了实现这一点，我创建了一个页面**CheckJS.html**。

```
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="refresh" content="0">
</head>
<body>
    <noscript>
       JS is disabled!
    </noscript>
</body>
</html> 
```

这个页面会不断**刷新**，当JS被禁用时，**JS被禁用！**会出现。

将此页面添加到我的原始页面中。我尝试了以下方法：

**1- .load()**

我使用**JQuery**在. 但是，似乎只加载**CheckJS.html**的内容。表示元素及其内部的内容不会加载到.`.load('CheckJS.html')``div``.load()``<body>`**`<head>``div`**

 ****2- iframe**

经过一番搜索，我发现加载**完整**html 页面**的`<head>`**唯一可能方法是使用`<iframe>`.

```
<iframe src="CheckJS.html"></iframe> 
```

但是，`<meta http-equiv="refresh" content="0">`CheckJS.html**的**影响父页面，原来的页面本身开始刷新。

如果我们能够在`<iframe>`不强制刷新原始页面的情况下使用它，那么这可能是一个解决方案，但即使找到了这个解决方案，我觉得它更像是一个**技巧**而不是**真正的**解决方案。

* * *

**更新**

[**安东尼**的回答](https://stackoverflow.com/questions/11633920/how-can-a-site-instantly-detect-that-javascript-has-been-disabled/14764039#14764039)证明我错了`iframe`刷新原始页面，浏览器显示刷新但实际上不是，如果是这样，那么可以避免使用Javascript`CheckJS.html`，我提供的可以完成这项工作，甚至更好,`<noscript>`重新启用 JS 时将隐藏。整个 iframe 方法仍然不是那么用户友好（可能会冻结浏览器），除非每 10 秒左右刷新一次，这不是**即时检测**。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T00:59:13.027

### CSS 解决方案

见**[演示](http://jsfiddle.net/s48wS/3/)**。也可用作[JS 库](http://laucheukhim.github.com/instano)。

通过不断用 JavaScript 替换元素来停止 CSS 动画。一旦 JavaScript 被禁用，CSS 动画就会启动并显示一条消息。

^(`@keyframes` [浏览器兼容性](https://developer.mozilla.org/en-US/docs/CSS/@keyframes#Browser_Compatibility)：Chrome、Firefox 5.0+、IE 10+、Opera 12+、Safari 4.0+)

```
<style>
.nojs_init { 
position: relative;
animation:nojs-animation 0.2s step-end;
-moz-animation:nojs-animation 0.2s step-end; /* Firefox */
-webkit-animation:nojs-animation 0.2s step-end; /* Safari and Chrome */
-o-animation:nojs-animation 0.2s step-end; /* Opera */
}

@keyframes nojs-animation
{
from {visibility:hidden;opacity:0;}
to {visibility:visible;opacity:1;}
}

@-moz-keyframes nojs-animation /* Firefox */
{
from {visibility:hidden;opacity:0;}
to {visibility:visible;opacity:1;}
}

@-webkit-keyframes nojs-animation /* Safari and Chrome */
{
from {visibility:hidden;opacity:0;}
to {visibility:visible;opacity:1;}
}

@-o-keyframes nojs-animation /* Opera */
{
from {visibility:hidden;opacity:0;}
to {visibility:visible;opacity:1;}
}
</style> 
```

```
<body>
<div id="content"></div>
<div id="nojs" class="nojs_init"><noscript>JavaScript is <span style="font-weight:bold;">disabled</span>.</noscript></div>
</body>
<script>
document.getElementById("content").innerHTML = 'JavaScript is <span style="font-weight:bold;">enabled</span>. Try disabling JavaScript now.';

var elm = document.getElementById("nojs"),
    animation = false,
    animationstring = 'animation',
    keyframeprefix = '',
    domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),
    pfx  = '';

if( elm.style.animationName ) { animation = true; }    

if( animation === false ) {
  for( var i = 0; i < domPrefixes.length; i++ ) {
    if( elm.style[ domPrefixes[i] + 'AnimationName' ] !== undefined ) {
      pfx = domPrefixes[ i ];
      animationstring = pfx + 'Animation';
      keyframeprefix = '-' + pfx.toLowerCase() + '-';
      animation = true;
      break;
    }
  }
}

// Continuously replace element
function jsdetect() {
    var elm = document.getElementById("nojs");
    var newone = elm.cloneNode(true);
    elm.parentNode.replaceChild(newone, elm);
}

// Only apply to browsers that support animation
if (animation) {
    elm.innerHTML = 'JavaScript is <span style="font-weight:bold;">disabled</span>.';
    setInterval(jsdetect, 0);
}
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T15:26:10.160

嗯，我认为这取决于浏览器。HTML5 支持`<noscript>`HEAD 元素，因此您可以尝试以下操作：

```
<style>
    .noscriptMessage {
         display: none;
     }
</style>
<noscript>
    <style>
        .noscriptMessage {
             display: block
        }
    </style>
</noscript>

<body>
    <div class=".noscriptMessage">Foo bar baz</div>
    ...
</body> 
```

规格：[http ://dev.w3.org/html5/markup/noscript.html](http://dev.w3.org/html5/markup/noscript.html)

从规范：

> 允许的内容：零个或多个：一个链接元素，或一个元 http-equiv=default-style 元素，或一个元 http-equiv=refresh 元素，或**一个样式元素**

编辑：嘿，偷看，所以也一样！现在尝试关闭 JS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T16:19:51.480

持续推迟 http-equiv=refresh 的 javascript 代码（每次替换元元素？）一旦关闭 javascript，元元素就不再被替换，刷新最终会发生。这只是一个想法，我不知道是否可以插入元元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T18:22:49.093

我建议研究一下 HTML5 Boilerplate 和 Modernizr 是如何做到的。

如果你查看 HTML5 Boilerplate 的 HTML，在[第 7 行](https://github.com/h5bp/html5-boilerplate/blob/master/index.html#L7)你会看到`<html>`标签被赋予了一个`no-js`. 然后，当 Modernizr 的 JavaScript 运行时，它做的第一件事就是删除`no-js`该类。

`no-js`完成后，您可以应用仅在类存在时才显示内容的 CSS 规则：

```
#no-script-message {
    display: none;
}
.no-js #no-script-message {
    display: block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T20:07:31.997

扩展@Jos​​hMock 的答案，这是一个简单的方法（通过[Paul Irish](http://paulirish.com/2009/avoiding-the-fouc-v3/)）来检测客户端是否启用了 JS：

**HTML**

```
<html class="no-js">
<head>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script> 
```

这应该与所有浏览器兼容并且速度非常快。然后，您可以使用`.js`和`.no-js`类隐藏/显示 CSS 中的元素。

如果您正在进行任何其他功能检测，我建议您使用带有标记的[Modernizr](http://modernizr.com/)`html class="no-js"`（modernizr 会自动为您添加 js 类以及 css3 检测）。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-07T16:42:19.083

实际上，检测浏览器是否支持 java-script 比检测反之更容易。

当然，这是在“站点立即检测到 javascript”的情况下。Witch 是浏览器对服务器的第一个 http-request <--> 响应。你只是'不能'。在确定浏览器功能后，您必须向服务器发送另一个请求。

现在，**无法检查是否在第一个请求时从服务器端启用了 JavaScript**。因此，如果 JavaScript 被禁用，您必须使用其他一些建议进行回发或重定向到非 JavaScript 页面（女巫无效，但似乎有效）：

```
<head>
    <noscript><meta http-equiv="refresh" content="0; url=whatyouwant.html"></noscript>
...
</head> 
```

有一些“浏览器功能”和浏览器“插件”可以通过 http 请求获得，因此您需要一个好的“服务器端”脚本来实现您的目标。

有关用于检测浏览器的 javascript 的一些信息，请参阅[browserhawk](http://www.cyscape.com/showbrow.aspx?bhcp=1)或[quirksmode](http://www.quirksmode.org/js/detect.html)。

此外，还有一个关于[如何检测是否 javascript-is-disabled的“受保护”问题](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled)**

# android - 进度对话框和线程

> ID：11633923
> 
> 赞同：0
> 
> 时间：2012-07-24T15:13:02.867
> 
> 标签：android, multithreading

我的目标是 Android 4.0，并且正在使用 TCP/IP 与遥测设备进行通信。Android 4.0 强制所有网络在单独的线程中完成。首先我打开一个套接字，然后我联系设备并从一个单独的线程下载一些信息。此时我想显示一个进度对话框，以显示下载更详细信息的进度。我的问题是除了主 UI 之外，我无法从任何地方显示进度对话框。但是，我不知道我何时到达了另一个线程中准备显示进度对话框的位置。有什么方法可以在不占用系统的情况下从主 UI 进行检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:28:28.450

像这样使用处理程序：

```
final int PROGRESS_BY = 1;

    final Handler handler = new Handler()
    {
        public void handleMessage(android.os.Message msg) 
        {
            switch (msg.what)
            {
                case PROGRESS_BY :
                    progressBar.setProgress((Integer) msg.obj);
                    break;
            }
        }
    };

    Thread thread = new Thread()
    {
        @Override
        public void run() 
        {
            super.run();
            // do something
            Message msg = new Message();
            msg.what = PROGRESS_BY;
            msg.obj = new Integer(10);
            handler.sendMessage(msg);
            // do something
            [...]
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:32:06.557

`AsyncTask`是框架提供的实用程序，适用于您描述的情况。从另一个线程，即正在执行异步任务的线程，您可以使用`publishProgress`AsyncTask 的 () 方法发布进度。它是异步的并在不同的线程上运行，但具有在主线程上运行的事件回调。`OnProgressUpdate`() 是您可以使用进度对话框的方法。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:24:08.180

要在主 ui 上触发对话框，您需要使用“context.runOnUiThread()”，其中 context 是对显示活动的引用。使用 AsyncTask 也值得研究。

这是一篇 android 博客文章，详细解释了所有内容：[http ://android-developers.blogspot.ca/2009/05/painless-threading.html](http://android-developers.blogspot.ca/2009/05/painless-threading.html)

顺便说一句，您也可以从一开始就开始显示一个不确定的进度对话框，因此用户永远不会在没有视觉反馈的情况下等待，然后在您知道下载详细信息时切换到确定的进度。

# ios - ios Safari 上 HTML5 视频元素的 readyState 问题

> ID：11633929
> 
> 赞同：4
> 
> 时间：2012-07-24T15:13:20.377
> 
> 标签：ios, html, safari

似乎在 iPad (iOS v. 5.1.1) 上，Safari 并未`readyState`根据规范保留视频元素的值。即使从视频源加载也`readyState`等于零。

我做了一个[演示 jsfiddle，它不断检查视频的`readyState`](http://jsfiddle.net/XEmPZ/5/). 一个有趣的观察：`readyState`只有在点击播放按钮后才会发生变化。

实际上，我希望`readyState`在加载过程中切换到更高的数字（因为我测试过的桌面上的所有浏览器都是这种情况——包括 Safari。）有解决方法吗？我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T11:02:13.070

来自[Apple 开发者文档](http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html#//apple_ref/doc/uid/TP40009523-CH2-SW9)：

> 注意： Safari 5.0 及更高版本支持 preload 属性。iOS 上的 Safari 从不预加载。

根据 Apple 的说法，移动设备上的期望行为是仅在您主动请求资源后才开始加载，以免浪费带宽或电池。

关于您的问题，这意味着 Apple 遵守规范。由于没有发生预加载，并且仅在您单击播放按钮后才开始加载，`readyState`因此在该时间点之前为零。

但是，`video`标签有特殊事件，应该提供比`readyState`.

*   `onCanplay`
*   `onCanplaythrough`
*   `onProgress`

再次引用[苹果开发者库（Using DOM Events to monitor load progress）](http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html#//apple_ref/doc/uid/TP40009523-CH3-SW4)

> 注意：在 iPad 上，Safari 在用户单击海报或占位符之前不会开始下载。目前，以这种方式开始的下载不会发出进度事件。

# objective-c - Objective-C 传递数据

> ID：11633936
> 
> 赞同：0
> 
> 时间：2012-07-24T15:13:35.277
> 
> 标签：objective-c, xcode4.3

我已经完成了一个具有 NewClass.h/.m ViewController.h/.m 的单视图项目：

新类.h：

```
#import <Foundation/Foundation.h>

@interface NewClass : NSObject
-(void)String2;
@end 
```

* * *

新类.m

```
#import "NewClass.h"
@implementation NewClass
-(void)String2
{
NSLog(@"it works");
}
@end 
```

* * *

视图控制器.h：

```
enter code here

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end 
```

* * *

视图控制器.m：

```
enter code here

#import "ViewController.h"
#import "NewClass.h"

@interface ViewController ()
@property (strong) NewClass *obj;
@end

@implementation ViewController
@synthesize obj = _obj;

- (void)viewDidLoad
{
[super viewDidLoad];
[self.obj String2];
 }

 - (void)viewDidUnload
{
[super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}
@end 
```

问题是该程序不起作用。我没有看到“它有效”。ViewController 看到了一个 obj 的方法，但是 NewClass 没有传递任何东西。请问有人能帮帮我吗？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:17:46.137

是的，因为缺少某些东西。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _obj = [[NewClass alloc] init]; // create an instance of your class
    NSLog (@"my class is at : %p", _obj); // just for your sake, we are checking the pointer of the instance

    [self.obj String2];
} 
```

瞧*……*！

* * *

如果您不`release`使用.`self.obj``ARC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:08:12.230

我上传了一个示例，其中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    [EAGLContext setCurrentContext:self.context];

    self.effect = [[GLKBaseEffect alloc] init];

    GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(0, 480, 0, 320, -1024, 1024);
    self.effect.transform.projectionMatrix = projectionMatrix;

    self.player = [[SGGSprite alloc] initWithFile:@"Player.png" effect:self.effect];    
    self.player.position = GLKVector2Make(self.player.contentSize.width/2, 160);
    [self.player String2];
    self.children = [NSMutableArray array];
    [self.children addObject:self.player];    

} 
```

而且没有“self.player = [[NewClass alloc] init]”这样的语句可以配置吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:18:47.630

您不创建对象。尝试这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.obj = [[NewClass alloc] init];
    [self.obj String2];
} 
```

# iis - DNN：使用 HTTPS (SSL) 的整个站点

> ID：11633937
> 
> 赞同：0
> 
> 时间：2012-07-24T15:13:41.660
> 
> 标签：iis, ssl, https, dotnetnuke

我已经找到了一些很好的来源，其中包含有关使用 SSL 运行 DNN 的提示和技巧，例如[http://blog.laksha.net/2008/03/enabling-ssl-in-dotnetnuke-and.html 。](http://blog.laksha.net/2008/03/enabling-ssl-in-dotnetnuke-and.html)

我的问题是：如果我想将整个站点（不仅是单个页面）更改为 SSL，我是否需要在 DNN 中配置任何内容？还是安装证书就足够了（并且可能配置了 IIS）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-06T23:22:30.963

要仅影响门户，您可以为门户设置 SSL 启用，然后更新每个页面上的安全标志。要做到这一点，在备份后快速运行以下 sql 脚本：

```
update tabs
set IsSecure = 1
where portalid =<portal id number> 
```

重新启动站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:19:53.533

只需在 IIS 中安装证书就足够了。然后你需要让 IIS 重定向到那个协议。只需谷歌“IIS 重定向到 https”，它就会告诉你你需要的一切。

# javascript - 谷歌地图数据类型抛出类型错误：无法将未定义转换为对象

> ID：11633938
> 
> 赞同：0
> 
> 时间：2012-07-24T15:13:42.077
> 
> 标签：javascript, asp.net, google-maps, umbraco, webresource.axd

在我们所有的 Umbraco 网站中，Google 地图数据类型不再有效。这在昨天之前一直很完美，但今天只有输入字段和位置字段，而不是谷歌地图......

Firebug 报告以下错误

错误：类型错误：无法将undefined转换对象源文件：[http://mydomain.com/WebResource.axd?d=tKK1ZgJBCMotVXJtV8pR9xzMqTmklCMezxGDl1po1iuUqd9OAFswOEzHFzCaf_jVz-AUweHtY9QXIBqtRjeITKZJW8DsgNEfWr5d43rOLcGkPLOTDqcjla1Kf5Atxrk4V0fVru8i1i6pj_kgbZvebWAyHrkbCDipPWDziYWT-lCHW-WaHOcz5hS1DefZvkJSICxqjpdChghoCUZhju3cHg2&t=634759042640000000&cdv=1](http://mydomain.com/WebResource.axd?d=tKK1ZgJBCMotVXJtV8pR9xzMqTmklCMezxGDl1po1iuUqd9OAFswOEzHFzCaf_jVz-AUweHtY9QXIBqtRjeITKZJW8DsgNEfWr5d43rOLcGkPLOTDqcjla1Kf5Atxrk4V0fVru8i1i6pj_kgbZvebWAyHrkbCDipPWDziYWT-lCHW-WaHOcz5hS1DefZvkJSICxqjpdChghoCUZhju3cHg2&t=634759042640000000&cdv=1) 线：212

它在行中

```
context._maps[id] = new UmbracoGoogleMap.map(id, this); 
```

在以下函数中

```
guiMap: function () {
    var context = this;
    this._apiLoaded = true;
    jQuery('div.gmapContainer').each(function () {
        var id = jQuery('div.map', this).attr('id');
        context._maps[id] = new UmbracoGoogleMap.map(id, this);
        context._maps[id].render();
    });
}, 
```

有很多其他人也报告了同样的问题，但还没有找到解决方案！ [http://our.umbraco.org/projects/backoffice-extensions/google-maps-datatype/bug-reports/33390-No-map-in-Backend](http://our.umbraco.org/projects/backoffice-extensions/google-maps-datatype/bug-reports/33390-No-map-in-Backend)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:14:55.547

看起来问题与上下文有关。它被设置为窗口而不是 UmbracoGoogleMapMapDataType 作为“this”指向错误的地方。所以我尝试了：

```
var context = UmbracoGoogleMapMapDataType;
this._apiLoaded = true;
jQuery('div.gmapContainer').each(function () {
    var id = jQuery('div.map', this).attr('id');
    context._maps[id] = new UmbracoGoogleMap.map(id, this);
    context._maps[id].render();
}); 
```

现在这似乎可以作为一个临时补丁。如果您愿意，可以从[https://www.dropbox.com/s/3aj91cuzxn3rcbu/Our.Umbraco.GoogleMaps.zip下载 dll](https://www.dropbox.com/s/3aj91cuzxn3rcbu/Our.Umbraco.GoogleMaps.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:53:16.253

我们对错误发生的原因进行了一些挖掘，显然这是由于[Google Maps Javascript API](http://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog)的更新。我们发现永久修复是通过向`v: "3.8"`ajax 请求添加 a 来请求特定版本的 API：

```
UmbracoGoogleMap.loadMapsApi = function (cb) {
    jQuery.ajax({
        type: "get",
        dataType: "script",
        url: 'http://maps.google.com/maps/api/js',
        data: {
            v: "3.8",
            sensor: false,
            callback: cb
    },
    error: function () { alert('Could not load Google Maps API'); }
}); 
```

根据[文档](https://developers.google.com/maps/documentation/javascript/basics#Versioning)，如果未指定版本，则 Google 会返回最新的夜间版本。事实上，他们特别指出：

> 生产应用程序应始终指定次要版本（例如 3.7、3.8 等）。

正如我们所见，最新版本的 3.9 破坏了与 Google Maps 数据类型的兼容性，因此出现了错误。

**更新：**[Google Maps DataType](http://our.umbraco.org/projects/backoffice-extensions/google-maps-datatype) 2.0.5 版现已推出，其中包含上述修复。感谢李凯莱赫！

# java - Neo4J TraversalDescription 定义

> ID：11633940
> 
> 赞同：1
> 
> 时间：2012-07-24T15:13:45.923
> 
> 标签：java, neo4j, graph-traversal

我正在尝试创建一个将执行以下搜索的**TraversalDescription ；**

*   仅返回具有特定属性的节点（“type”==“PERSON”）
*   返回一定数量的结果（整个图很大，我们只对局部图感兴趣）
*   可以使用任何关系类型

我还没有走得很远，我似乎无法弄清楚如何为节点属性创建评估器；

```
TraversalDescription td = Traversal.description().bredthFirst().evaluator(?...); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T12:51:10.737

我通过简单地实现 Evaluator 接口并覆盖**Evaluator.evaluate(Path p)**方法来解决此问题；

```
public final class MyEvaluator implements Evaluator {

    private int peopleCount;
    private int maxPeople;

    public MyEvaluator(int max) {
        maxPeople = max;
        peopleCount = 0;
    }

    public Evaluation evaluate(Path p) {

        //prune if we have found the required number already
        if(peopleCount >= maxPeople) return Evaluation.EXCLUDE_AND_PRUNE;

        //grab the node of interest
        Node n = p.endNode();

        //include if it is a person
        if(n.hasProperty("type") && (n.getProperty("type").equals(NodeTypes.PERSON.name()))) {
            peopleCount++;
            return Evaluation.INCLUDE_AND_CONTINUE;
        }

        // otherwise just carry on as normal
        return Evaluation.EXCLUDE_AND_CONTINUE;
    }
} 
```

然后我的**TraversalDescription**定义最终看起来像：

```
TraversalDescription td = Traversal.description().breadthFirst().evaluator(new MyEvaluator(peopleRequired)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:04:37.230

即使在使用 Java 编码时，我也建议从 Cypher 遍历查询开始，如果您真的想调整性能或进行一些有趣的操作，则仅下拉到 TraversalDescriptions 中。

根据您的描述并假设您具有起始节点的 id，Cypher 查询可能是：

```
start n=node(1) match (n)-[*1..2]-(m) where m.type="Person" return distinct(m) limit 2 
```

这将找到距离起始节点 1 到 2 跳之间的所有节点，遵循任何关系类型，但节点的类型属性设置为“Person”，最终只返回 2 个不同的结果。您可以尝试使用[控制台上的示例](http://console.neo4j.org/r/roc3op)（我已添加“类型”属性）。

要在 Java 中执行该操作，您需要创建一个 ExecutionEngine，提供查询，然后按照[Neo4j 手册](http://docs.neo4j.org/chunked/1.8.M06/tutorials-cypher-java.html)中的描述迭代结果。

# ios - UIPopoverController 无法处理 ui 元素

> ID：11633945
> 
> 赞同：0
> 
> 时间：2012-07-24T15:14:18.060
> 
> 标签：ios, uipopovercontroller

这就是我展示我的popover的方式

```
- (IBAction)openImage:(id)sender {

        OptionViewController *option = [[OptionViewController alloc] init];
        option.delegate = self;

        if (!popoverController) {
            popoverController = [[UIPopoverController alloc] initWithContentViewController:option];
        }
        popoverController.delegate = self;
        [popoverController setPopoverContentSize:CGSizeMake(320, 88)];
        [popoverController presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

有选项视图控制器

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    }

    NSInteger section = [indexPath row];

    switch (section) {
        case 0: // First cell in section 0
            cell.textLabel.text = @"From library";
            break;
        case 1: // Second cell in section 1
            cell.textLabel.text = @"Make a photo";
            break;
        default:
            // Do something else here if a cell other than 1,2,3 or 4 is requested
            break;
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// I set breakpoints there. For now it doesn't work.
} 
```

OptionViewController 是一个 UITableViewController （继承），它包含 UITableView 与委托和 datasource = self （对于 OptionViewController 实例）

我也使用XIB。在 XIB UITableView 中为每一侧（左、上、右、下）自动调整大小的掩码设置

在其他方法中，我不会调用任何可以锁定我的视图或其他我的操作的其他方法。

有一个带有彩色屏幕外渲染选项的屏幕截图

![在此处输入图像描述](../Images/ff02f48f76aeae0f94f0abf1874fa65c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:03:45.027

我认为您错误地设置了 OptionViewController 的委托。如果委托方法的实现在 OptionViewController 中，那么您应该删除设置 option.delegate 或将其设置为自身：`option.delegate = option;`。

您的数据源委托 (option.dataSource) 看起来正在工作，但委托 (option.delegate) 没有。

# .net - 如何查询联结表

> ID：11633947
> 
> 赞同：7
> 
> 时间：2012-07-24T15:14:30.573
> 
> 标签：.net, linq, entity-framework, junction-table

使用实体框架/LINQ，我需要以下帮助。

该数据库有一个 People 表，其身份列是 PersonId。还有一个具有 SkillId 标识列的 Skills 表。这两个通过第三个表 PeopleSkills 连接，该表具有自己的标识列 PeopleSkillsId、引用 PersonId 的外部列和引用 SkillId 的外部列。

我正在尝试编写的方法传递了一个 List 类型的参数，其中包含我们正在寻找的任意数量的技能。该方法应返回一个与输入参数列表中的所有技能链接的列表。如何建立一个列表，排除没有技能列表中所有技能的任何人？

我遇到的问题是我的 SQL 经验很少。我确实有很多其他的编程经验，但是 SQL 对我来说总是有点粗糙。我考虑过使用联接，但这行不通。即，如果我的人具有技能 A 和 B，并且搜索列表包含 B 和 C 的元素，则连接将在 B 上匹配它们并返回该人。我需要排除这个人，因为他没有 B 和 C。

我还考虑过遍历技能列表并构建一个过滤器，但这看起来很难看。这似乎是构建 LINQ 来处理的问题，使用 List 来查询另一个 List，并且应该有一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:34:31.293

我用的是LinqPad，它使用的是Linq-to-SQL而不是Linq to Entities，但是概念应该是一样的。

首先是我用来测试的数据。

```
create table People (PersonID int, Name varchar(100))
create table Skills (SkillID int, Skill varchar(100))
create table PeopleSkills (PeopleSkillsID int, PersonID int, SkillID int)

insert People values (1,'Bert'),(2,'Bob'),(3,'Phil'),(4,'Janet')
insert Skills values (1,'C#'),(2,'Linq'),(3,'SQL')
insert PeopleSkills values (1,1,1),(2,1,2),(3,1,3),(4,2,1),(5,2,3),(6,3,2),(7,3,3),(8,4,1),(9,4,2),(10,4,3) 
```

和解决方案。

```
//I don't know how you are specifying your list of skills; for explanatory purposes
//I just generate a list.  So, our test skill set is C#, Linq, and SQL.
//int? is used because of LinqToSQL complains about converting int? to int
var skills = new List<int?>(){1,2,3}; 
//This initial query is also a small bow to LinqToSQL; Really I just wanted a plain
//List so that the Except and Any clauses can be used in the final query.
//LinqToSQL can apparently only use Contains; that may or may not be an issue with
//LinqToEntities.  Also, its not a bad idea to filter the people we need to look at
//in case there are a large number anyway.
var peopleOfInterest = PeopleSkills.Where( p => skills.Contains(p.SkillID)).ToList();   

//Final query is relatively simple, using the !x.Except(y).Any() method to 
//determine if one list is a subset of another or not.
var peopleWithAllSkills = 
    //Get a distinct list of people
    from person in peopleOfInterest.Select( p=>p.PersonID).Distinct()
    //determine what skills they have
    let personSkills = peopleOfInterest.Where(x=>x.PersonID == person).Select(x=>x.SkillID)
    //check to see if any of the skills we are looking for are not skills they have
    where !skills.Except(personSkills).Any()
    select person; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:55:06.497

这可以工作：

```
public List<Person> GetPeopleWithAllSkills(List<Skill> skills)
{
    var skillIds = skills.Select(s => s.SkillId);

    return context.People.Where(
        p => skillIds.All(id => p.PeopleSkills.Any(ps => ps.SkillId == id)))
        .ToList();
} 
```

给我在这些人的技能列表中满足*所有*给定技能存在（`Any`）条件的人。（他们可能拥有比给定技能更多的技能，但不会更少。）

# opengl - OpenGL 混合模式与着色器混合

> ID：11633950
> 
> 赞同：12
> 
> 时间：2012-07-24T15:14:47.093
> 
> 标签：opengl, shader, fragment-shader

我目前正在对 OpenGL 和着色器进行一些研究，但我似乎无法弄清楚`glBlendMode`在着色器中使用混合模式或编写自己的混合模式之间是否存在任何根本区别。

选择前者还是后者的理由是什么？通过选择一个而不是另一个是否存在任何性能瓶颈？或者这只是个人喜好问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T15:49:27.387

使用 glBlendFunc 的传统混合无法在着色器中复制。混合需要在修改目标帧缓冲区之前对其进行采样，这在当前硬件上是无法做到的。

目前，您只能传递一种颜色，并选择有限的混合模式（glBlendFunc/glBlendEquation）之一，GPU 的光栅化器将在写入帧缓冲区之前应用这些混合模式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-16T01:20:06.060

当着色器在同时渲染到同一纹理时从纹理读取，结果是未定义的。这就是为什么“传统”或固定功能与 glBlendFunc 和 glBlendEquation 混合是有用的。

要使用传统混合来混合两个图像，您需要渲染第一个图像，设置混合模式、函数和方程，然后渲染第二个图像。这可以保证给出正确的结果，并且通常是实现透明度等效果的最快方法。

要使用着色器实现相同的效果，您需要将第一个图像渲染到辅助纹理，更改着色器，然后将第二个图像渲染到实际的帧缓冲区，将混合作为片段着色器的最后一步。由于纹理读取的额外开销，这通常会更慢，并且肯定会为辅助纹理使用更多的 GPU 内存。

在现代硬件上，这两种技术之间的差异往往很小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T16:37:14.520

在我知道的三种情况下，可以从着色器中模拟 OpenGL 混合：

1.  您拥有 Direct3D11 或 OpenGL 等效项，并将渲染目标绑定为像素着色器中的读写纹理。这可以实现任意复杂的混合操作，但在进行简单混合时不会有高性能，因为您正在绕过 GPU 的特殊硬件进行简单混合。

2.  你有一个奇特的“基于图块”的 GPU，即使是简单的混合也是由“alpha 着色器”完成的。在这种情况下，OpenGL 中的简单混合与等效着色器代码之间没有性能差异。但是您不太可能拥有这样的 GPU，而且 OpenGL 无论如何也不会公开此功能。

3.  您回避了整个固定功能的硬件光栅化管道，并将自己的代码编写为“计算着色器”的复合体。如果你能做到这一点，像“alpha 着色器”之类的东西将成为你基于图块的管道的一部分，但要达到这一点需要大量的工作，所以 alpha 混合将是你最不关心的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-27T13:19:47.530

这实际上可以通过使用纹理屏障功能的 gl 3.0 扩展来完成：

[http://www.opengl.org/registry/specs/NV/texture_barrier.txt](http://www.opengl.org/registry/specs/NV/texture_barrier.txt)

基本上，在你写完背景之后，你可以使用 TextureBarrierNV() 函数来确保 texel 被刷新，然后你可以在单个着色器阶段执行读/写操作（一定要避免多重采样缓冲区，因为实际上只有一个写操作允许）..

# javascript - 获取元素内的段落文本

> ID：11633951
> 
> 赞同：41
> 
> 时间：2012-07-24T15:14:48.840
> 
> 标签：javascript, html, paragraph

我想从 元素`<p>`内部 获取文本值。`<li>`

*html*：

```
<ul>
  <li onclick="myfunction()">
    <span></span>
    <p>This Text</p>
  </li>
</ul> 
```

*javascript*：

```
function myfunction() {
  var TextInsideLi = [the result of this has to be the text inside the paragraph"];
} 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-24T15:27:47.897

或者，您也可以将 li 元素本身传递给 myfunction 函数，如下所示：

```
function myfunction(ctrl) {
  var TextInsideLi = ctrl.getElementsByTagName('p')[0].innerHTML;
} 
```

在您的 HTML 中，`<li onclick="myfunction(this)">`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-24T15:17:18.870

你使用 jQuery 吗？一个不错的选择是

```
text = $('p').text(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-05-12T12:37:02.277

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Where to JavaScript</title>
    <!-- JavaScript in head tag-->
    <script>
        function changeHtmlContent() {
            var content = document.getElementById('content').textContent;
            alert(content);
        }
    </script>
</head>
<body>
    <h4 id="content">Welcome to JavaScript!</h4>
    <button onclick="changeHtmlContent()">Change the content</button>
</body> 
```

在这里，我们可以通过使用获取文本内容`h4`：

```
document.getElementById('content').textContent 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-24T15:18:30.200

试试这个：

```
<li onclick="myfunction(this)">

function myfunction(li) {
    var TextInsideLi = li.getElementsByTagName('p')[0].innerHTML;
} 
```

[现场演示](http://jsfiddle.net/WFZ7C/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-24T15:21:25.460

将您的 html 更改为以下内容：

```
<ul>
    <li onclick="myfunction()">
        <span></span>
        <p id="myParagraph">This Text</p>
    </li>
</ul> 
```

那么您可以使用以下功能获取段落的内容：

```
function getContent() {
    return document.getElementById("myParagraph").innerHTML;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T15:17:23.640

使用 jQuery：

```
$("li").find("p").html() 
```

应该管用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T15:24:51.827

**HTML**：

```
<ul>
  <li onclick="myfunction(this)">
    <span></span>
    <p>This Text</p>
  </li>
</ul>​ 
```

**JavaScript**：

```
function myfunction(foo) {
    var elem = foo.getElementsByTagName('p');
    var TextInsideLi = elem[0].innerHTML;
}​ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-29T19:28:05.387

如果你使用例如。“id”你可以这样做：

```
 (function() {
    let x = document.getElementById("idName");
    let y = document.getElementById("liName");

    y.addEventListener('click', function(e) {
        y.appendChild(x);
    });

})();
```

```
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <p id="idName">TEXT</p>
    <ul>
        <li id="liName">

        </li>
    </ul>
</body>
<script src="js/scripts/script.js"></script>

</html>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-02T14:45:49.340

将`Id`属性添加到`P`标签中，其值类似于文本或其他内容：

```
function gettext() {
    var amount = document.getElementById('text').value;
} 
```

# x++ - 在 Dynamics 4.0 中通过 update_recordset 调用确定受影响的行数？

> ID：11633952
> 
> 赞同：1
> 
> 时间：2012-07-24T15:14:49.307
> 
> 标签：x++, axapta, ax

我的代码中有一个`update_recordset`调用，我想回显受此更新影响的行数。在 2009 和 2012 版本中，`RowCount()`我可以调用一个函数。

我如何在 Dynamics 4.0 中实现这一点？

`select forupdate`由于性能下降，我不想将其更改为通话。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:10:33.477

似乎在 4.0 中没有其他解决方案，除了`select count(RecId)...`在更新之前和在同一个事务中做一个。

RowCount() 功能是在更高版本上实现的，并且无法恢复启动到 SQL Server 的相应命令的信息。

最好的祝福

# c# - 用于创建页面链接的 HTML Helper - 试图理解

> ID：11633953
> 
> 赞同：2
> 
> 时间：2012-07-24T15:14:58.133
> 
> 标签：c#, asp.net-mvc-3, html-helper

下面是我的 HTML 帮助文件 (PageHelper.cs) 的完整源代码，它运行良好。我正在学习 ASP.NET MVC 3 并使用 aPress 的“Pro ASP.NET MVC 3 Framework”一书。我喜欢这本书的流程，并且学到了很多东西，但是它时不时地提供工作代码，但没有真正解释它为什么工作，这就是这些例子之一。我在 Google 和 Stack 上花费了相当多的时间。现在要进入正题...

我希望有人可以解释“公共静态 MvcHtmlString PageLinks”中发生的事情的流程。我正在尝试学习这一点，而不是简单地按照书中的内容进行学习（注意：代码中的过多注释是我自己的 - 旨在加强学习）。

我的看法是**MvcHtmlString**用于告诉浏览器不要重新编码 HTML，因为生成的 HTML 已经是。 **这**用于捕获用户当前所在的页面。 **html**是**HtmlHelper**类的实例化吗？（虽然**html**再也没有被提及 - 为什么会这样？）。 **pagingInfo**是我的**PagingInfo**类的实例化，它包含在返回的 HTML 创建中使用的属性。这是我完全无法理解的部分...... **Func**部分。这本书解释了**Func**参数提供了传递将用于生成链接以查看其他页面的委托的能力 - 不确定这意味着什么以及为什么需要函数路由。

我可以跟随其余的代码。很抱歉这篇冗长的帖子，但我正在寻求澄清。如果我的任何代码注释或解释不正确，请纠正我。提前致谢！

```
using System;
using System.Text;
using System.Web.Mvc;
using SportsStore.WebUI.Models;

//You use HTML helpers in a view to render HTML content. An HTML helper, in most 
//cases, is just a method that returns a string.  You can build an entire ASP.NET
//MVC application without using a single HTML helper. However, HTML helpers make 
//your life as a developer easier. By taking advantage of helpers, you can build
//your views with far less work.  Write once, reuse often.  

//We use 'MvcHtmlString' so that the result doesn't get re-encoded in the view. 
//It is part of the MVC framework and when you create your own HTML helper
//methods like this one, always use it.

namespace SportsStore.WebUI.HtmlHelpers
{
    //This is public so it can be accessed in other areas, however the 'static'
    //means it can't be instantiated.
    public static class PagingHelpers
    {
        //This is an HTML Helper method that we call 'PageLinks', which generates
        //HTML for a set of page links using the info provided in a PagingInfo
        //object.  Remember that extension methods are only available for use
        //when the namespace that contains it is in scope.  In a code file, this
        //is done with a 'using' statement, but for a Razor view, we must add a 
        //configuration entry to the View-specific Web.config file OR add a
        //'@using' statement to the view itself.  For this project we chose to 
        //use the Web.config file to keep the View less cluttered.

        public static MvcHtmlString PageLinks(this HtmlHelper html,
                                              PagingInfo pagingInfo,
                                              Func<int, string> pageUrl)
        {
            StringBuilder result = new StringBuilder();
            for (int i = 1; i <= pagingInfo.TotalPages; i++)
            {
                TagBuilder tag = new TagBuilder("a"); //Construct an <a> tag
                tag.MergeAttribute("href", pageUrl(i));
                tag.InnerHtml = i.ToString();
                if (i == pagingInfo.CurrentPage)
                    tag.AddCssClass("selected");
                result.Append(tag.ToString());
            }**

            return MvcHtmlString.Create(result.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T20:13:52.687

有内置的 HTML 助手，在本章中，作者`PageLinks()`为分页创建了一个自定义的 HTML 助手。如您所见，帮助类返回一个用于构建 HTML`<a>`标记链接的字符串。这个静态助手类由`PagingInfo`模型使用。

每次用户单击页码时，它都会`PagingInfo`作为`currentPage`参数值传递给。然后，每当视图（例如）基于此视图模型建模时，作者都会在 中实例化一个`PagingInfo`对象。`view model class ProductListViewModel``List.cshtml`

在视图上，调用`@Html.PageLinks`以显示由辅助方法`<a>`构建的标记链接。`PageLinks`

我希望这有帮助。如果您想了解更多关于 HTML 助手扩展方法的信息，请阅读

> 第 2 章“创建简单的数据输入应用程序”

和

> 第 19 章“自定义 HTML 助手”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:09:30.973

我只是在学习 MVC 3 时从同一本书中编写这段代码，所以我在网上偶然发现了你的问题。

您需要了解什么是[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)：

这就是你需要“ **this** ”的原因，这是一条规则，当你使用新方法扩展一个类时，第一个参数始终是你想要扩展的类**的类类型**，前面是“this”。

所以，在我们伟大的书中，我们有**这个 HtmlHelper html**（这个 - 类类型 - 类参考）

希望我能帮助你，如果不问你没有得到什么。

# css - 如何增加内部具有绝对定位元素的元素的高度

> ID：11633954
> 
> 赞同：3
> 
> 时间：2012-07-24T15:14:57.960
> 
> 标签：css

我有一个 ul，它与绝对定位的 lis 相对定位。如何根据内容增加 ul 的高度。

向 ul 添加类 clearfix 不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:21:02.697

当您使用绝对定位元素时，它们实际上是从放置它们的元素的布局中删除的，因此您不能随着绝对定位元素的大小更改而自动增长包含元素。您可以利用 javascript 技术来计算绝对定位的 LI 的大小，然后相应地设置包含 UL 的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:25:52.957

您可以使用 JQuery

```
var totalHeight = 0;
$('ul>li').each(function(i,el){

    totalHeight += $(el).height();

});

$('ul').height(totalHeight); 
```

您可能需要对顶部位置或边距求和以获得正确的高度。

# java - 在哪里可以找到有关 Oracle 的 Java 文档中使用的约定的信息？

> ID：11633955
> 
> 赞同：0
> 
> 时间：2012-07-24T15:15:01.283
> 
> 标签：java, documentation, conventions

我对 Java 比较陌生，并且在阅读 Java 文档时仍然会遇到以前从未见过的方法。我有时对使用这些方法的正确方式感到困惑，因为我不知道 Oracle 使用的约定。

[考虑String 类页面](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)中的这个例子：

```
contains(CharSequence s) 
Returns true if and only if this string contains the specified sequence of char values. 
```

我想知道：

是`CharSequence`字面值吗？它是否表示变量`s`必须是 a `CharSequence`？使用此方法的正确语法是什么？

虽然在进一步挖掘后得到澄清，但我觉得如果我知道某种元文档，我可以大大缩小我的搜索范围。如果某处有一个文档说“我们总是在我们的示例中使用代表性数据”，或者“文字总是粗体”或“你假定已经定义的变量总是斜体”，那就太好了。

例如，在上面的示例中，为了清楚起见，*我会这样介绍它：*

```
contains(s) 
where s is a user-defined variable of type CharSequence 
Returns true if and only if this string contains the specified sequence of char values. 
```

我一直未能找到任何记录文档的内容，并且我的大部分搜索都返回有关 JavaDoc 的结果。如果有人知道，我会喜欢一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:19:20.037

“字面价值”是什么意思？It( `CharSequence`) 是名为 的参数的类型`s`。

语法是调用`contains`字符串实例。您传入 a `CharSequence`（例如， a `String`）并返回一个布尔值，指示您调用它的实例是否包含传入的值：

```
String s = "foobar";
System.out.println(s.contains("ooba")); // true
System.out.println(s.contains("ohai")); // false 
```

这与不了解 Javadocs 无关，这不是了解 Java。

但是，在这种情况下，我不确定混淆在哪里。假设您知道 Java 是一种 OOPL，并且除了原语之外，您在实例上调用方法（暂时忽略静态方法），有什么问题？`String`API 显示字符串 is-a `CharSequence`，此方法采用的类型。措辞描述了该方法的作用。测试代码似乎是不言而喻的——但我是一个有偏见的样本；）

由于从文档的角度来看它相当清楚，我不得不假设这是一个理解 Java 基本性质的问题。而且你*总是*会遇到以前从未见过的方法。和课。和包裹。和图书馆。仅在 JDK 中就有数千种方法，更不用说 Java EE，更不用说在任何规模的 Java 应用程序中使用的数百个其他库了。

简单的例子；一个非常小的工作项目有 120 多个依赖项。在这 120 多个依赖项中，有 2500 多个类。在这 2500 多个类中，有大约 16k 个公共属性（字段、方法、静态值）。这不包括 Java SE 和 Java EE API。

我猜我可能已经看到或使用过千分之一的项目特定 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:24:35.827

CharSequence 是 java 中的一个接口。通常，在查看 javadocs 中的方法时，如果您看到不理解的内容，请尝试将鼠标移到上面。它将有一个帮助文本来帮助你。例如，在您提供的链接中，如果您将光标移动到 CharSequence 上，它将告诉您它是 java 中的一个接口。

你对文档的理解会随着你对 java 的理解而增加。

# java - 如何使用 MediaPlayer 调用 /data/data 中的文件

> ID：11633956
> 
> 赞同：0
> 
> 时间：2012-07-24T15:15:03.140
> 
> 标签：java, android, media-player, midi

我希望 Android 在 /data/data/com.example.myapp/ 中播放一首名为 test3.mid 的歌曲

我需要把它放在子目录中吗？还是我以错误的方式调用 setDataSource？该应用程序崩溃并给我一个 NullPointerException。

```
try {
        mediaPlayer.setDataSource("file://data/data/com.example.optimuse/test3");
        } catch (Exception e1) {
            e1.printStackTrace();
        }
try {
            mediaPlayer.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:26:17.613

我得到了它。我把它放在缓存文件夹中，它现在可以工作了。另外，我愚蠢地忘记了新命令（因为 create() 似乎不需要它）。

我的工作代码：

我将文件存储在缓存目录中，这有效！

```
File output = new File(getCacheDir() + "/exampleout.mid"); 
```

然后调用文件：

```
 String filePath = null;
    File file = null;
    FileInputStream inputStream = null;
try {
           filePath = getCacheDir() + "/exampleout.mid";
           file = new File(filePath);

           inputStream = new FileInputStream(file);
           if(inputStream.getFD().valid())
           {
               System.out.println("Valid!");
           }
        } catch (Exception e1) {
            e1.printStackTrace();
            System.exit(-1);
        }

       try {
         mediaPlayer = new MediaPlayer();
        mediaPlayer.setDataSource(inputStream.getFD());
        inputStream.close();
    } catch (Exception e1) {
        e1.printStackTrace();
        System.exit(-1);
    }

    try {
        mediaPlayer.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T17:56:36.390

**1.**如果您已经将文件直接放到了您的 sd-card 上，那么您可以通过这种方式访问​​它...

```
"/sdcard/test3.mp3" 
```

**2.**但是**上面提到的方法不是正确的方法**......**请参阅下面的适当方法。**

```
String baseDirectory = Environment.getExternalStorageDirectory().getAbsolutePath();
String fileName = "test3.mp3";
File f = new File(baseDirectory + File.separator + fileName); 
```

# html - 向下移动一个容器时，两者都移动

> ID：11633958
> 
> 赞同：0
> 
> 时间：2012-07-24T15:15:17.560
> 
> 标签：html, css

所以我在一个名为 main 的容器中有一个名为 banner 的容器，如下所示：

```
<div id="main"> <!-- BEGIN MAIN -->
<div id="banner"> <!-- BEGIN BANNER -->
</div> <!-- END BANNER -->
</div> <!-- END MAIN --> 
```

Main 是一个渐变，banner 是我想要在渐变中间的横幅。左右自动效果很好。但是当我尝试在横幅顶部放置 10px 的边距时，主横幅和横幅都会向下移动。我如何使它只有横幅向下移动？非常感谢！

```
#main {

width: 1200px;
height: 440px;
background-image: url(../website/images/background_bg.png);

}

#banner {

width: 966px;
height: 367px;
margin-left: auto;
margin-right: auto;
margin-top: 10px;
background-image: url(../website/images/banner.png);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:17:07.217

在你的#main 中添加 10px 的 padding-top 就可以解决问题了。

所以你会有： `#main { padding-top: 10px; ... }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:21:23.807

而不是使用`margin-top`你应该使用：

```
vertical-align: middle; 
```

像这样，`#banner`将始终位于另一个容器的中间，而无需指定 a`margin-top`和`margin-bottom`。

# c# - 路由到虚拟物品

> ID：11633959
> 
> 赞同：5
> 
> 时间：2012-07-24T15:15:17.397
> 
> 标签：c#, asp.net, .net, asp.net-routing

我正在尝试使用 system.web.routing （不幸的是我不能使用 iis 重写/路由）。我尝试了以下方法，但结果为 404。如果我要指向另一个物理文件（用于测试目的），路由工作正常。

```
void RegisterRoutes(RouteCollection routes)
{
    routes.RouteExistingFiles = true;
    routes.MapPageRoute("about", "about/us", "~/about/company", false);
} 
```

那么，是否可以指向这样的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:16:47.530

希望这会对您有所帮助，此特定示例适用于 Sitecore，但该项目是开源的，我想重新利用您的解决方案所需的部件不会太困难。

这个项目的要点是允许您将 MVC 路由引擎与 webforms 解决方案一起使用。我将补充一点，您需要深入研究代码，但希望能让您走上正确的轨道。

[https://github.com/Sitecore/Sitecore-Mvc-Routing](https://github.com/Sitecore/Sitecore-Mvc-Routing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T17:45:19.090

您将无法使用 MapPageRoute 实现您想要的目标。MapPageRoute 通过使用 PageRouteHandler 创建一个新路由来工作。[PageRouteHandler 类](http://msdn.microsoft.com/en-us/library/system.web.routing.pageroutehandler)的文档特别指出：

> 您将 PageRouteHandler 的实例传递给 Route 构造函数，以便映射物理文件的 URL。PageRouteHandler 对象指定物理文件的虚拟路径，并确定是否检查物理 URL 的授权规则。

如果这是一个 MVC 应用程序，则[RouteCollectionExtensions 类](http://msdn.microsoft.com/en-us/library/system.web.mvc.routecollectionextensions)中有路由扩展。您应该能够使用该`MapRoute`方法并为其提供必要的默认参数，以使用 MvcRouteHandler 创建新的 Route，如下所示：

```
routes.MapRoute("about", "about/us", new { controller = "about", action="company", id="" }); 
```

您需要输入适当的值，因为我不知道您的控制器设计。此外，请查看[创建自定义路由 (C#)](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)，这可能有助于理解 MVC 如何处理路由。

如果这不是 MVC 应用程序，则必须实现从[UrlRoutingHandler 类](http://msdn.microsoft.com/en-us/library/system.web.routing.urlroutinghandler)派生的自定义路由处理程序，并将新路由添加到 RouteCollection。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T04:29:44.160

为了像`/content/something`您一样路由到无扩展目标，需要在 IIS 应用程序池中使用集成模式。如果您无法更改此设置，那么除了设置自定义 404 处理程序并从那里手动处理 URL 之外，没有简单的方法可以做您想做的事情。这可能是您的 404 错误的原因。

另外，`RouteExistingFiles`应该是假的。您正在尝试路由不作为文件存在的东西。如果您设置`RouteExistingFiles = true`，那么当路由匹配时，将不会使用对现有文件的默认处理。您要做的就是处理不存在但代表数据库内容的路径，对吗？所以留下这个错误。

最后，您的`MapPageRoute`陈述似乎不正确。例如，在 Microsoft 的演练中，它可能看起来像：http: [//msdn.microsoft.com/en-us/library/dd329551.aspx](http://msdn.microsoft.com/en-us/library/dd329551.aspx)

```
routes.MapPageRoute("SalesRoute",
    "SalesReport/{locale}/{year}",
    "~/sales.aspx"); 
```

这将导致调用匹配`sales.aspx`的路由作为响应。在您的示例中，目标`~/about/company`看起来像一条路线，而不是实际目标 - 您处理 CMS 请求的实际目标应该具有`aspx`扩展名。

# android - 在 Android 中混合使用 OpenGL 和 Canvas 绘图

> ID：11633963
> 
> 赞同：3
> 
> 时间：2012-07-24T15:15:29.083
> 
> 标签：android, opengl-es, android-canvas

我们有使用硬件加速绘制一些标准项目和小部件的 Android 应用程序。而且我还喜欢使用 OpenGL 进行原生绘图。问题是，我可以将它与画布绘图混合，例如在 onDraw 方法中吗？画布是否保留状态或假设没有这样的代码？

我为什么要它。我想要一个用于绘图的渲染上下文，因为两个会使 FPS 下降到不超过 30。

# android - 光标返回 null

> ID：11633964
> 
> 赞同：2
> 
> 时间：2012-07-24T15:15:30.007
> 
> 标签：android, sqlite, cursor

```
public String getContact(String searchName) {
    SQLiteDatabase db = this.getReadableDatabase();

    String[] args = { searchName };

    Cursor cursor = db.rawQuery("SELECT * FROM " + TABLE_MOVIES
            + " WHERE name =? ", args);

    String iName = null, iDiretor = null, iGenre = null;

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        iName = cursor.getString(cursor.getColumnIndex(KEY_NAME));
        iDiretor = cursor.getString(cursor.getColumnIndex(KEY_DIRECTOR));
        iGenre = cursor.getString(cursor.getColumnIndex(KEY_GENRE));
        cursor.moveToNext();
    }

    cursor.close(); 
```

iName 变量工作正常，但其他两个返回 null。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:19:48.380

使用`SQLiteDatabase`查询方法而不是`rawQuery`获得最佳结果。

```
db.query(TABLE_MOVIES, null, "name = ?", args, null); 
```

这是首选，因为`rawQuery`它很容易搞砸并且不能防止 SQL 注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:19:00.023

试试这个方法：

```
Cursor cursor = db.rawQuery("SELECT * FROM " + TABLE_MOVIES + " WHERE name LIKE ? ", args); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T15:19:30.930

```
 Cursor cursor = db.rawQuery("SELECT * FROM " + TABLE_MOVIES
            + " WHERE name LIKE "+searchName, null); // Put Like When your are comparing String 
```

# dojo - Dojo - 跨域加载小部件的问题

> ID：11633973
> 
> 赞同：0
> 
> 时间：2012-07-24T15:15:57.310
> 
> 标签：dojo, cross-domain

我正在处理一个项目，该项目需要从另一台服务器加载一些自定义 Dojo 小部件（即，我们自己编写的小部件）。尽管我在几天内尽了最大努力，但我似乎无法让 Dojo 加载小部件。

Dojo 从 Google CDN 加载，小部件从 www.example.com 加载，网站位于 www.foo.com。

我无法发布实际的项目文件（这是一个公司的项目），但我已经用较小的测试文件重现了该错误。

Test.html（在 www.foo.com 上）：

```
<html>

<div id="content"></div>

<script>
    var djConfig = {
        isDebug: true,
        modulePaths: {
            'com.example': 'http://example.com/some/path/com.example'
        }
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/dojo/1.4.3/dojo/dojo.xd.js.uncompressed.js"></script>

<script type="text/javascript">
    dojo.require("dijit._Widget");
    dojo.require("dijit._Templated");

    dojo.addOnLoad(function() {
        dojo.require("com.example.widget.Test", false);

        dojo.addOnLoad(function() {
            new com.example.widget.Test().placeAt(dojo.byId('content'));
        });
    });
</script>

</html> 
```

Test.xd.js（位于 www.example.com/some/path/com.example/widget/Test.xd.js）：

```
dojo.provide("com.example.widget.Test");

dojo.require("dijit._Widget");
dojo.require("dijit._Templated");

dojo.declare("com.example.widget.Test", [dijit._Widget, dijit._Templated], {
    templateString: "<div dojoAttachPoint=\"div\">This is a test</div>",

    postCreate: function() {
        console.log("In postCreate");
        console.log(this.div);
        this.div.innerHTML += '!!!';
    }
}); 
```

在 Firebug 中，我在延迟几秒钟后看到一个错误，提示无法加载跨域资源 com.example.widget.Test。但是，在“网络”选项卡中，我可以看到 Test.xd.js 已成功下载，并且可以设置断点并看到 dojo.declare 执行并完成而没有错误。

我很感激任何帮助。如果我可以提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:10:51.113

在 XD-loader 中处理模块声明有不同的方法。这是由于加载程序如何处理“模块就绪”事件。您很可能会体验到 dojo.addOnLoad 永远不会运行，因为它肯定“知道” - 一些必需的模块没有声明。

即便如此，它们也很可能被宣布——dojotoolkit 1.7+ 版本的变化似乎承认了这一事实。我相信这样做的原因是“模块就绪”的机制在您的 myModule.xd.js 模块中没有正确实现。

它基本上是声明的“标题”或“关闭”，涉及几个步骤 - 将所有内容包装在基本模块`dojo.provide`中`eof`

### 标准示例锅炉模块文件“{{modulePath}}/my/Tree.js”

```
dojo.provide("my.Tree");

dojo.require("dijit.Tree");

dojo.declare("my.Tree", dijit.Tree, {
    // class definition
}); 
```

## X-Domain 示例锅炉模块文件 '{{modulePath}}/my/Tree.xd.js

```
dojo._xdResourceLoaded(function(){ 
  return {
    depends: [
        ["provide", "my.Tree"],
        ["require", "dijit.Tree"]
    ],
    defineResource: function(dojo) {
      ///////////////////////////////
      /// Begin standard declaration
         dojo.provide("my.Tree");

         dojo.require("dijit.Tree");

         dojo.declare("my.Tree", dijit.Tree, {
            // class definition
         });
      /// End standard declaration
      ///////////////////////////////
    }
  }
})(); 
```

# git - 如何gitignore除了隐藏的子目录之外的所有东西？

> ID：11633974
> 
> 赞同：0
> 
> 时间：2012-07-24T15:15:57.013
> 
> 标签：git, gitignore

我正在使用这个`.gitignore`文件来排除当前目录和子目录中的所有内容，除了`!`前缀条目：

```
*
!.profile
!.vim/snippets
!.vimrc 
```

`.profile`和文件在目录`.vimrc`中显示为未跟踪，`git status`但不在`.vim/snippets`目录中。知道如何包含此目录吗？我已经尝试过`!.vim/snippets/`，但它也不起作用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:47:31.617

我找到了一个可以正常工作的解决方案。可以明确说明路径中应包含哪些目录和文件：

```
*
!.vim
!.vim/snippets
!.vim/snippets/*
!.profile
!.vimrc 
```

所以这将包括`.vim`目录和`snippets`目录，但只包括目录中的文件（`/*`）`snippets`。

# android - 如何将 adwhirl 代码集成到 android 应用程序中

> ID：11633976
> 
> 赞同：0
> 
> 时间：2012-07-24T15:16:00.767
> 
> 标签：android, admob, adwhirl

我想在我的测试应用程序中集成 admob 代码，这是我遵循的步骤。

布局文件看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="bottom"
        android:id="@+id/layout_ad">

</LinearLayout> 
```

清单文件看起来像这样

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Dummyads2Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

最后是代码的外观

```
public class Dummyads2Activity extends Activity {//implements AdWhirlInterface{
/** Called when the activity is first created. */

private AdWhirlLayout adWhirlLayout;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   try{
        AdManager.setTestDevices( new String[] { AdManager.TEST_EMULATOR } );
        LinearLayout layout = (LinearLayout)findViewById(R.id.layout_ad);
        AdWhirlLayout adWhirlLayout = new AdWhirlLayout(this, "my adwhirl id");
        Display d = this.getWindowManager().getDefaultDisplay();
        RelativeLayout.LayoutParams adWhirlLayoutParams = new RelativeLayout.LayoutParams(d.getWidth(), 72);
        layout.addView(adWhirlLayout, adWhirlLayoutParams);
    }catch(Exception e){
        //Log.e(TAG, "Unable to create AdWhirlLayout", e);
    }

} 
```

如果我这样做，我的应用程序会崩溃，并且不会出现广告。请帮助我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:30:11.483

这实际上取决于您使用的 AdMob 和 AdWhirl 版本。我将讨论 AdMob SDK v6.1.0 和 AdWhirl v3.2.0，它们是目前最新的版本。

你可能因为这条线而崩溃：

```
AdManager.setTestDevices( new String[] { AdManager.TEST_EMULATOR } ); 
```

这看起来像旧版 AdMob AdManager；AdWhirl 使用 Google AdMob SDK。无论如何，如果您想使用 AdWhirl 测试广告，您需要通过 AdWhirl 设置测试，而不是通过广告网络。所以删除上面的行并像这样设置测试模式：

```
AdWhirlTargeting.setTestMode(true); 
```

此外，您的清单将需要具有您正在调解的网络的所有权限和活动定义的超集。对于 AdMob，您需要添加：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
...
<activity android:name="com.google.ads.AdActivity"
              android:configChanges="orientation|keyboard|keyboardHidden|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

如果您仍然遇到错误，发布一些日志输出会很有用。如果您使用的是 Eclipse，您可以从 Window -> Show View -> Other... -> Android -> LogCat 找到 logcat。`adb logcat`或者，您可以使用Android 的 adb 工具从命令行获取 logcat 输出。

# objective-c - iPhone如何有效地获取具有NSDate属性的第一个和最后一个Core Data实体？

> ID：11633991
> 
> 赞同：0
> 
> 时间：2012-07-24T15:17:15.670
> 
> 标签：objective-c, ios, core-data, nsdate, nspredicate

我有一组相当大的带有日期属性的核心数据实体。我正在从实体创建报告，需要找到报告日期范围。报告中有大约 1000 条记录。

我正在考虑从我的 NSFetchedResultsController 获取获取的对象数组并使用日期排序描述符对数组进行排序。然后获取该数组的第一个和最后一个对象以确定日期范围。我似乎记得日期操作很昂贵，并且不确定是否以这种方式对数组进行排序，返回一个 1000 个元素的数组是个好主意。

**是否有其他一些核心数据或谓词技巧可用于查询我的核心数据堆栈以查找具有最小或最大日期的对象？**

这是我目前正在使用的代码，但如果有更快更高效的代码，我会徘徊：

```
 NSSortDescriptor* sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
    NSArray* sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    NSArray* sortedDateArray = [NSMutableArray arrayWithArray:[fetchedResultsController.fetchedObjects sortedArrayUsingDescriptors:sortDescriptors]] ;       

    NSManagedObject* firstDateObject = [sortedDateArray objectAtIndex:0];  
    NSManagedObject* lastDateObject = [sortedDateArray lastObject]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:36:50.480

无需使用 FetchedResultsController。只需使用一个简单的 FetchRequest，并利用聚合功能。

下面的文档实际上有一个基于实体的最小日期属性获取的示例。

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW6](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW6)

# jsf - JSF 解析 EL 表达式像参数一样传递（Facelets）

> ID：11633995
> 
> 赞同：0
> 
> 时间：2012-07-24T15:17:27.577
> 
> 标签：jsf, primefaces, javabeans, facelets, param

首先，我的代码：

**报告布局.xhtml：**

```
<ui:define name="content">
    <h:panelGroup id="reporte-viewer" layout="block" >
        <p:media value="#{reportBean.file}" player="pdf" width="500px" height="400px">
            NO SUPP!!!
        </p:media>
    </h:panelGroup>
</ui:define> 
```

**索引.xhtml：**

```
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
             ..............
             template="/WEB-INF/template/layouts/report-layout.xhtml">

    <ui:param name="reportBean" value="#{myBean}" />

</ui:composition> 
```

我用 ViewScoped 和 SessionScoped 测试了 MyBean，当我使用 getValue 时，下一个代码返回 null：

**PrimeResourceHandler.java：**

```
String dynamicContentEL = (String) session.get(dynamicContentId); //read: "#{reportBean.file}" replacing with "#{myBean.file}" works.
ELContext eLContext = context.getELContext(); //OK
ValueExpression ve = context.getApplication().getExpressionFactory().createValueExpression(eLContext, dynamicContentEL, StreamedContent.class); //Apparently OK
streamedContent = (StreamedContent) ve.getValue(eLContext); //return null 
```

为什么当我像 param getValue return null 这样传递 MyBean 时，JSF 解析“#{reportBean.file}”没有问题，但之前的代码不起作用。

# unix - sed 使用通配符替换

> ID：11633997
> 
> 赞同：0
> 
> 时间：2012-07-24T15:17:34.687
> 
> 标签：unix, sed

如何用 sed 进行下面的替换？

输入

```
group_0 group_10 n_name_0 n_name_10 n_name_20 n_name_5 n_name_40 team_20 team_1 
```

所需输出

```
group_0 group_10 n_name n_name n_name n_name n_name n_name team_20 team_1 
```

我尝试使用 sed -i 's/n_name*/n_name/g' 但它会删除 n_name 之后的所有内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:20:11.740

```
sed -i 's:\(n_name\)_[[:digit:]]*:\1:g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:02:30.567

解决方案非常简单。[在http://www.unix.com/shell-programming-scripting/31583-wildcards-sed.html](http://www.unix.com/shell-programming-scripting/31583-wildcards-sed.html)上找到了这个

```
$commandSed ="sed -r 's/n_name_[0-9]*/un_cell/g' test.txt>out.txt";
system($commandSed); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:47:25.173

根据您的输入数据工作：

```
sed -r 's/_[0-9]+//g' 
```

请参阅下面的行：

```
kent$   echo "group0 group1 n_name_0 n_name_10 n_name_20 n_name_5 n_name_40 team0 team1"|sed -r 's/_[0-9]+//g'
group0 group1 n_name n_name n_name n_name n_name team0 team1 
```

**更新**

为您的新输入更新

```
sed -r 's/(n_name)_[0-9]+/\1/g' 
```

测试：

```
kent$ echo "group_0 group_10 n_name_0 n_name_10 n_name_20 n_name_5 n_name_40 team_20 team_1"|sed -r 's/(n_name)_[0-9]+/\1/g' 
group_0 group_10 n_name n_name n_name n_name n_name team_20 team_1 
```

**更新**

我假设您想在您的 shell 脚本中使用该行。所以看下面的测试：

```
kent$  ls
test.txt

kent$  cat test.txt 
group_0 group_10 n_name_0 n_name_10 n_name_20 n_name_5 n_name_40 team_20 team_1

kent$  commandSed=$(sed -r 's/(n_name)_[0-9]+/\1/g' test.txt > out.txt)

kent$  ls
out.txt  test.txt

kent$  cat out.txt
group_0 group_10 n_name n_name n_name n_name n_name team_20 team_1 
```

实际上 commandSed var 在这里没有任何意义。

如果你这样做：

```
kent$  commandSed=$(sed -r 's/(n_name)_[0-9]+/\1/g' test.txt) 
```

（不重定向到新文件）

```
kent$  echo $commandSed 
group_0 group_10 n_name n_name n_name n_name n_name team_20 team_1 
```

如果你想在新文件和 commandSed 变量中都有输出， tee 是你的朋友**：**

```
kent$  commandSed=$(sed -r 's/(n_name)_[0-9]+/\1/g' test.txt|tee out.txt)  

kent$  echo $commandSed                                                  
group_0 group_10 n_name n_name n_name n_name n_name team_20 team_1

kent$  cat out.txt 
group_0 group_10 n_name n_name n_name n_name n_name team_20 team_1 
```

# c# - 创建自定义 WPF 控件并将 DataTemplate 设置为依赖属性

> ID：11633999
> 
> 赞同：2
> 
> 时间：2012-07-24T15:17:42.347
> 
> 标签：c#, wpf, xaml, styles, dependency-properties

我正在为我的 WPF 应用程序创建一个新控件。在其中，我添加了两个依赖属性。这些是给样式一个带有子弹装饰器的列表框。

这是我所拥有的：

```
public class QuestionControl : Control
{
    static QuestionControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(QuestionControl), new FrameworkPropertyMetadata(typeof(QuestionControl)));
    }

    // Another dependency properties...

    // PossibleAnswers : IEnumerable
    public IEnumerable PossibleAnswers
    {
        get { return (IEnumerable)base.GetValue(PossibleAnswersProperty); }
        set { base.SetValue(PossibleAnswersProperty, value); }
    }

    public static readonly DependencyProperty PossibleAnswersProperty =
      DependencyProperty.Register("PossibleAnswers", typeof(IEnumerable), typeof(QuestionControl));

    // PossibleAnswers : DataTemplate
    public DataTemplate PossibleAnswersTemplate
    {
        get { return (DataTemplate)base.GetValue(PossibleAnswersTemplateProperty); }
        set { base.SetValue(PossibleAnswersTemplateProperty, value); }
    }

    public static readonly DependencyProperty PossibleAnswersTemplateProperty =
      DependencyProperty.Register("PossibleAnswersTemplate", typeof(DataTemplate), typeof(QuestionControl));
} 
```

然后我在这里得到了通用样式。请注意我将 PossibleAnswers 设置为列表框的最后一种样式，并且绑定没问题。但是在传递数据模板的那一刻（这个设置为名为的内容控件`ContentText`）并观看我已经设置了名为 PossibleAnswersTemplate 的模板，这部分是错误的。

```
<ContentControl x:Name="ContentText" Margin="2 0 0 0" Content="{Binding}" ContentTemplate="{TemplateBinding PossibleAnswersTemplate}" /> 
```

不编译。应该是什么错误？

```
<Style TargetType="ListBox" x:Key="KinectRadioList">
    <Style.Setters>
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Style.Setters>
                        <Setter Property="OverridesDefaultStyle" Value="True"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                    <ControlTemplate.Resources>
                                        <Style TargetType="{x:Type Ellipse}">
                                            <Style.Setters>
                                                <Setter Property="Fill" Value="Black"/>
                                                <Setter Property="Stroke" Value="Black"/>
                                            </Style.Setters>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding RelativeSource={x:Static RelativeSource.TemplatedParent}, Path=IsEnabled}" Value="False">
                                                    <Setter Property="Fill" Value="Black"/>
                                                    <Setter Property="Stroke" Value="Black"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ControlTemplate.Resources>
                                    <BulletDecorator Background="Transparent" >
                                        <BulletDecorator.Bullet>
                                            <Canvas Width="15" Height="15">
                                                <Ellipse Width="13" Height="13" Canvas.Left="1" Canvas.Top="1" StrokeThickness="1" Fill="{x:Null}"/>
                                                <Ellipse Width="8" Height="8" Canvas.Left="3.5" Canvas.Top="3.5" Stroke="{x:Null}" Visibility="{Binding RelativeSource={x:Static RelativeSource.TemplatedParent}, Path=IsSelected, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                            </Canvas>
                                        </BulletDecorator.Bullet>
                                        <ContentControl x:Name="ContentText" Margin="2 0 0 0" Content="{Binding}" ContentTemplate="{TemplateBinding PossibleAnswersTemplate}" />
                                    </BulletDecorator>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style.Setters>
                </Style>
            </Setter.Value>
        </Setter>
    </Style.Setters>
</Style>

<Style TargetType="{x:Type local:QuestionControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:QuestionControl}">
                    <StackPanel>
                        <ContentControl Content="{TemplateBinding QuestionText}"
                                        ContentTemplate="{TemplateBinding QuestionTextTemplate}" />
                        <ListBox ItemsSource="{TemplateBinding PossibleAnswers}" SelectionMode="Multiple"
                                 Style="{StaticResource KinectRadioList}"/>
                    </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:44:14.520

```
 <ListBox ItemsSource="{TemplateBinding PossibleAnswers}" Tag="{TemplateBinding PossibleAnswersTemplate}" SelectionMode="Multiple"
                             Style="{StaticResource KinectRadioList}"/>

    <ContentControl ContentTemplate="{TemplateBinding Tag}"/> 
```

您的模板属于 ListBox 并且 TemplateBinding 正在尝试在 ListBox 中查找 PossibleAnswersTemplate，因此它无法正常工作。我希望这将有所帮助。

编辑：这是另一个解决方案

```
<ContentControl Margin="2 0 0 0" Content="{Binding}" ContentTemplate="{Binding PossibleAnswersTemplate, RelativeSource={RelativeSource AncestorType={x:Type local:QuestionControl}}}" /> 
```