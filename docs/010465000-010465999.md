# StackOverflow 问答 10465000-10465999

# c# - File.ReadAllBytes() 内存不足异常

> ID：10465001
> 
> 赞同：1
> 
> 时间：2012-05-05T18:55:34.270
> 
> 标签：c#

我有一个小应用程序，它可以读取任何文件（即 .exe、.jpg、.img 和所有其他文件），将其传输到`bytes[]`trough `File.ReadAllBytes()`，使用 3DES 加密并使用`File.WriteAllBytes()`. 比有做同样反向的解密方法。我的问题是，在 300MB 的原始文件中一切正常，而不是内存不足异常。任何建议如何解决这个问题？如何处理大于 1GB 的文件？它可以帮助使用streamreader或cryptostream reader和writer吗？

读取和加密文件：

```
 try
 {
     saveFileDialog1.FileName = "";
     DialogResult result = openFileDialog1.ShowDialog();
     if (result == DialogResult.OK) 
     {
         byte[] Results;
         System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
         fileToEncrypt = File.ReadAllBytes(openFileDialog1.FileName);
         MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
         byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(textBox1.Text));
         TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
         TDESAlgorithm.Key = TDESKey;
         TDESAlgorithm.Mode = CipherMode.ECB;
         TDESAlgorithm.Padding = PaddingMode.PKCS7;
         ICryptoTransform Encryptor = TDESAlgorithm.CreateEncryptor();
         Results = Encryptor.TransformFinalBlock(fileToEncrypt, 0, fileToEncrypt.Length);
         saveFileDialog1.FileName = openFileDialog1.SafeFileName;
         saveFileDialog1.ShowDialog();
         if (saveFileDialog1.FileName != "")
         {
             File.WriteAllBytes(saveFileDialog1.FileName, Results);
         }
         TDESAlgorithm.Clear();
         HashProvider.Clear();
     }
 }
 catch
 {
     MessageBox.Show("Your system has not enough memory.", "", MessageBoxButtons.OK, MessageBoxIcon.Error);
 } 
```

解密和保存：

```
 try
 {
     openFileDialog1.FileName = "";
     DialogResult result = openFileDialog1.ShowDialog();
     if (result == DialogResult.OK) // Test result.
     {
         byte[] Results;
         System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
         fileToDecrypt = File.ReadAllBytes(openFileDialog1.FileName);
         MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
         byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(textBox1.Text));
         TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
         TDESAlgorithm.Key = TDESKey;
         TDESAlgorithm.Mode = CipherMode.ECB;
         TDESAlgorithm.Padding = PaddingMode.PKCS7;
         ICryptoTransform Decryptor = TDESAlgorithm.CreateDecryptor();
         Results = Decryptor.TransformFinalBlock(fileToDecrypt, 0, fileToDecrypt.Length);
         saveFileDialog1.FileName = Path.GetFileName(openFileDialog1.FileName);
         saveFileDialog1.ShowDialog();
         if (saveFileDialog1.FileName != "")
         {
             File.WriteAllBytes(saveFileDialog1.FileName, Results);
         }
         TDESAlgorithm.Clear();
         HashProvider.Clear();
     }
 }
 catch 
 {
     MessageBox.Show("Master password is wrong", "", MessageBoxButtons.OK, MessageBoxIcon.Error);
 } 
```

我只是业余爱好编码器，所以我祈祷我的代码有一些仁慈:)

`textbox1.Text`是主密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:26:40.070

最后我有一些使用cryptostream的东西-在我的笔记本上8分钟加密2,7GB文件。感谢马格努斯的努力，我也会试试你的代码

加密方法

```
DialogResult result = openFileDialog1.ShowDialog();
        if (result == DialogResult.OK) 
        {
            saveFileDialog1.FileName = openFileDialog1.SafeFileName;
            saveFileDialog1.ShowDialog();
            FileStream readFile = new FileStream(openFileDialog1.FileName, FileMode.Open, FileAccess.Read);
            FileStream writeFile = new FileStream(saveFileDialog1.FileName, FileMode.OpenOrCreate, FileAccess.Write);
            writeFile.SetLength(0);

            byte[] storage = new byte[100];
            long fileWritten = 0;
            long totlen = readFile.Length;
            int bytesToWrite;

            System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
            MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
            byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(textBox1.Text));
            TripleDESCryptoServiceProvider TDES = new TripleDESCryptoServiceProvider();
            TDES.Key = TDESKey;
            TDES.Mode = CipherMode.ECB;
            TDES.Padding = PaddingMode.PKCS7;
            CryptoStream cryptStream = new CryptoStream(writeFile, TDES.CreateEncryptor(), CryptoStreamMode.Write);
            while (fileWritten < totlen)
            {
                bytesToWrite = readFile.Read(storage, 0, 100);
                cryptStream.Write(storage, 0, bytesToWrite);
                fileWritten = fileWritten + bytesToWrite;

            }

            cryptStream.Close();
            TDES.Clear();
            HashProvider.Clear();
        } 
```

解密方法与使用 `TDES.CreateDecryptor()`相反 `TDES.CreateEncryptor()`。我必须说`File.ReadAllBytes()`，`File.WriteAllBytes()`文件 300MB 大小比流快得多。

# image-processing - 图像处理 - PSNR 和 SSIM 指标是否显示平滑（降噪）质量？

> ID：10465003
> 
> 赞同：6
> 
> 时间：2012-05-05T18:55:46.327
> 
> 标签：image-processing, ssim

对于我的图像处理类项目，我正在使用各种过滤器算法（双边过滤器、NL-Means 等）过滤图像，并尝试将结果与不断变化的参数进行比较。我遇到了 PSNR 和 SSIM 指标来衡量过滤器质量，但无法完全理解这些值的含义。任何人都可以帮助我：

*   更高的 PSNR 值是否意味着更高质量的平滑（消除噪声）？
*   为了获得高质量的平滑，SSIM 值是否应该接近 1？
*   是否有任何其他指标或方法来衡量平滑质量？

我真的很困惑。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T21:54:38.787

对于理想的结果图像，PSNR 计算去噪后的均方重构误差。更高的 PSNR 意味着去除更多的噪声。然而，作为最小二乘结果，它略微偏向于过度平滑（=模糊）的结果，即不仅去除噪声而且去除部分纹理的算法将获得良好的分数。

SSIm 已被开发为具有质量重建度量，该度量还考虑了去噪图像和理想图像之间边缘（高频内容）的相似性。为了获得良好的 SSIM 度量，算法需要在去除噪声的同时保留对象的边缘。

因此，SSIM 看起来像是“更好的质量度量”，但计算起来更复杂（确切的公式涉及每个像素一个数字，而 PSNR 为您提供整个图像的平均值）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T05:01:58.257

扩展@sansuiso的答案

在您的案例中，您可以使用许多其他图像质量度量来评估各种过滤器的去噪能力 NL 均值、双边过滤器等

这是一张图表，展示了可以使用的各种参数

![在此处输入图像描述](../Images/dab4293644c25fd8df7a0b10c9fd6762.png)

是的，而且 PSNR 更好的是去噪能力

[这](http://www.ijcst.com/vol23/1/sasivarnan.pdf)是一篇论文，您可以在其中找到有关这些参数的详细信息，并且可以在[此处找到 MATLAB 代码](http://www.mathworks.com/matlabcentral/fileexchange/25005-image-quality-measures)

**PSNR**是重建图像质量的评价标准，是重要的特征

**NAE**值大表示图像质量差

**SC**值大意味着图像质量差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T19:57:28.253

关于这篇文章： http:
[//icpr2010.org/pdfs/icpr2010_WeAT8.44.pdf](http://icpr2010.org/pdfs/icpr2010_WeAT8.44.pdf)
我发现PSNR可以通过SSIM获得，反之亦然。并且 PSNR 对噪声比 SSIM 更敏感。另一方面，其他参数的灵敏度几乎相同：高斯模糊和辨别质量。

# android - 在 Android 模拟器上重绘OpenGLDisplay

> ID：10465014
> 
> 赞同：0
> 
> 时间：2012-05-05T18:57:32.840
> 
> 标签：android, opengl-es, android-emulator

我写信是为了获得以下错误的帮助，每次我将 Gpu 支持添加到我的模拟器时都会得到帮助（API 版本> = 7，我没有检查较低的版本，目前使用的是 4.0.3）：

`[2012-05-05 20:44:02 - Emulator] repaintOpenGLDisplay not implemented for separate renderer process !!!`

我试图搜索 SO，但只找到了以下主题：[如何解决 android](https://stackoverflow.com/questions/9328379/how-to-solve-the-following-error-in-android)中的 Logcat 错误，这对我没有多大帮助。

我的操作系统是 Windows7 32 位，不知道我该如何修复：[http](http://code.google.com/p/android/issues/detail?id=28565) ://code.google.com/p/android/issues/detail?id=28565 - 事件我不确定这是否有效。

我已经尝试过几次重新安装 eclipse ver 3.7、ADTr18 和 Android SDK，但问题仍然存在。

任何线索如何解决这个问题？我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:22:46.033

有同样的错误，关闭 AVD 配置文件/Aindroid 虚拟设备中的 GPU 仿真

# schema.org - 如何使用 Schema.org 在 Google 丰富网页摘要中显示单个产品评级

> ID：10465015
> 
> 赞同：0
> 
> 时间：2012-05-05T18:57:36.040
> 
> 标签：schema.org, rich-snippets

**大多数示例显示多个评级**

我想在 Google 中显示评分，但我发现的所有评分示例都显示多人投票。

**我想显示一个作者评分**

我想要的是只显示网站背后的团队所做的一个评级，就像这个 URL 上的屏幕截图：[http ://wordpress.org/extend/plugins/author-hreview/](http://wordpress.org/extend/plugins/author-hreview/)

**至今...**

这不是我想要的，但也许是一个开始。

```
<div itemscope itemtype="http://schema.org/Product">
  <span itemprop="name">Test</span>
  <div itemprop="aggregateRating"
    itemscope itemtype="http://schema.org/AggregateRating">
   Rated <span itemprop="ratingValue">3.5</span>/5
   based on <span itemprop="reviewCount">11</span> customer reviews
  </div>
</div> 
```

**接受的答案**

*   给我看一些丰富的代码片段或一个很好的链接到一个很好的例子。
*   它应该适用于 [http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:21:00.480

我找到了！

```
<div itemtype="http://schema.org/Review" itemscope="">
    <meta content="admin" itemprop="author" />
    <div itemtype="http://schema.org/Rating" itemscope="" itemprop="reviewRating">
        <meta content="1" itemprop="worstRating" />
        <meta content="3.5" itemprop="ratingValue" />
        <meta content="5" itemprop="bestRating" />
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T09:31:10.217

格式不断变化。最重要的是，搜索引擎已经开始验证评论。我会改用 microformats.org hproduct，因为目前（2013 年）schema.org 不允许对产品进行非汇总评论

```
<div id="review">
<div class="hproduct">
<div><a class="url" href="product.html"><span class="fn">Test</span></a></div>
<div class="description pro contra">A short description</div>
<div class="review hreview">
<abbr class="dtreviewed" title="2015-01-01"></abbr>
<abbr class="best" title="5"></abbr>
<abbr class="rating" title="3.5"></abbr>
<abbr class="worst" title="1"></abbr>
<div style="display:inline-block">
<input type="radio" name="total" title="Horrible!" class="star" disabled="disabled" />
<input type="radio" name="total" title="Very Bad!" class="star" disabled="disabled" />
<input type="radio" name="total" title="Not Good" class="star" disabled="disabled" />
<input type="radio" name="total" title="OK" class="star" disabled="disabled" />
<input type="radio" name="total" title="Not Bad" class="star" disabled="disabled" />
<input type="radio" name="total" title="Good" class="star" disabled="disabled" />
<input type="radio" name="total" title="Pretty Good" class="star" disabled="disabled" checked="checked" />
<input type="radio" name="total" title="Very Good" class="star" disabled="disabled" />
<input type="radio" name="total" title="Excellent!" class="star" disabled="disabled" />
<input type="radio" name="total" title="Perfect!" class="star" disabled="disabled" />
</div>
<div style="display:inline-block" class="reviewer vcard">
<span class="fn" itemprop="name">Anonymous</span>
</div>
</div>
</div> 
```

# jquery - 类似reddit的网站的优化

> ID：10465018
> 
> 赞同：0
> 
> 时间：2012-05-05T18:57:42.093
> 
> 标签：jquery, mysql, optimization, reddit

我正在考虑优化我的类似 reddit 的网站。如果您需要描绘它，只需考虑[Reddit](http://www.reddit.com/)。

至于现在我有 3 个表：USER、POST 和 USER_CHAN

因此，对于每个用户，您在 USER_CHAN 中都有他订阅的 chan（像 irc 一样思考）

```
USER_CHAN
user_id  chan_id 
```

所以我在这样的请求中做了一个联合：

```
SELECT post.* FROM post JOIN user_chan ON user_chan.user_id = {$session[id]} AND post.chan_id = user_chan.chan_id 
```

然后我将结果缓存到一个像这样命名的文件中：

```
sort-list_of_chans-page.html 
```

例如，它看起来像这样：

```
hot-1,2,5,6-1.html 
```

（按热排序，用户订阅了chan 1,2,5和6，结果的第1页）

或者

```
last-1,5,7,8-4.html 
```

然后，`jquery`在加载缓存后，查询每个结果 ($('box').each) 以显示应用了哪种投票（默认情况下不应用投票）

我希望每个人都一直关注我直到这里！

（当它超过第 20 页时，我也不缓存任何内容，我认为很少有用户会访问这些页面）

* * *

问题是，我不知道这个优化是否真的“好”，而且我还有这个新想法：

如果我将这种结果缓存为`JSON`或表格 格式，比如说 20 页。

然后我用 加载这个缓存的东西`PHP`，检查`PHP`每个结果以应用投票（然后我可以做一个大请求和多个请求），然后显示结果。

不使用`jquery`，缓存文件会更小，我可以使用reddit的“隐藏”功能......你怎么看？我应该使用`JSON`还是其他东西来实现这个？

# iphone - 用于绘制精灵的单独类，类不起作用

> ID：10465025
> 
> 赞同：0
> 
> 时间：2012-05-05T18:58:22.383
> 
> 标签：iphone, objective-c, ios, sprite

我正在使用 cocos2d 开发一些示例游戏以进行更多练习，但我的课程有问题。这是我的例子：

一些形状.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface palleteOfShapes : CCLayer 
{
    NSMutableArray *shapesArray;
}
@property (nonatomic,retain) NSMutableArray *shapesArray;
-(void)drawPallete;
@end 
```

一些形状.m

```
#import "palleteOfShapes.h"

@implementation palleteOfShapes
@synthesize shapesArray;
-(void)drawPallete

{
    shapesArray = [NSMutableArray arrayWithObjects:@"Icon.png",@"A.png",@"questionMark.png",nil];
    for (int i=0; i<shapesArray.count; i++) {
        NSString *imagestring = [shapesArray objectAtIndex:i];
        CCSprite *sprite = [CCSprite spriteWithFile:imagestring];
         NSLog(@"i value: %i",i);
        sprite.position=ccp(100*i,350);
         NSLog(@"image added:%@",imagestring);
        [self addChild:sprite];
         NSLog(@"count: %d",[shapesArray count]);
    }        
    NSLog(@"pallete was completed");
    [shapesArray removeLastObject];
    NSLog(@"count:%d",[shapesArray count]);

}
@end 
```

在我做的主层：

```
palleteOfShapes *newPallete = [[palleteOfShapes alloc]init];
[newPallete drawPallete]; 
```

我希望这些精灵会出现在我的主图层上，但它们没有。NSLog 显示所有消息，但不显示精灵。

所以如果可以的话，请告诉我有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:18:19.627

实现`-(id) init`方法并在那里尝试一些初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:30:33.637

您将精灵添加到“palleteOfShapes”层，但您从未将它们或“palleteOfShapes”添加到主层。

# .net - 在 .NET 4 中按请求（webclient）和全局检索和设置代理设置的官方方法

> ID：10465026
> 
> 赞同：1
> 
> 时间：2012-05-05T18:58:37.900
> 
> 标签：.net, .net-4.0, proxy, webclient

那里有很多问题，但大多数答案都是旧的并且使用过时的方法。

我想知道以下内容：

*   如何获取/设置在 IE 中配置的代理设置？我认为这就是所谓的系统范围。
*   如何使用 WebClient 而不是 WebRequest/WebResponse 对象为特定请求设置代理设置？

我只是在寻找一个完全托管的解决方案，除非它不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:56:55.027

使用 WebRequest 或 HttpWebRequest 类中的 Proxy 属性。

[http://msdn.microsoft.com/en-us/library/system.net.webrequest.proxy.aspx](http://msdn.microsoft.com/en-us/library/system.net.webrequest.proxy.aspx)

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)

通过最后一个链接，引用：

> ...如果指定了 Proxy 属性，则 Proxy 属性中的代理设置会覆盖本地计算机或应用程序配置文件，并且 HttpWebRequest 实例将使用指定的代理设置。如果在配置文件中未指定代理并且未指定 Proxy 属性，则 HttpWebRequest 类使用从本地计算机上的 Internet Explorer 继承的代理设置。如果 Internet Explorer 中没有代理设置，则请求将直接发送到服务器...

# php - 动态改变表单的目标

> ID：10465030
> 
> 赞同：1
> 
> 时间：2012-05-05T18:59:10.257
> 
> 标签：php, javascript, jquery, iframe, target

我正在尝试在 iframe 中显示我的登录信息，该 iframe 加载在带有灰色背景的起始页面中间，但是我在处理 iframe 的目标时遇到问题，事情应该如下工作：1-如果用户成功登录到家页面应在父窗口中加载 2- 如果出错，错误消息应显示在 iframe 本身中。

我的代码：

```
<div id="cover5" onclick="javascript:cover5();">
        <iframe name="warning" src="SignIn.php" id="warning" onclick="javascript:cover5();">
        </iframe>
    </div> 
```

登录.php

```
<html>
    <head>
        <script type='text/javascript'>
  function valid(){
   if(document.getElementById('username').value.toString().length>=1 || document.getElementById('password').value.toString().length>=1){
    return true;
   }
   else{
    alert("The Combination of username and password are Incorrect !");
    return false;
   }
  }
 </script>
 <script type='text/javascript'>
 function ChangeTarget() {
     document.getElementById("login").prop("target", "_parent")
 }
 </script>
<script type='text/javascript'>
function ChangeText(text) {
                document.getElementById("label1").innerHTML= text;

            }
        </script>
        <title></title>
    </head>
    <body>
<form name="login" id='login' target='_self' method='post' accept-charset='UTF-8'>
<fieldset>
<legend>SignIn</legend>
<input type='hidden' name='submitted' id='submitted' value='1'/>
<label for='username' >Email:</label>
<input type='text' name='email' id='username'  maxlength="50" /> <br />
<label for='password' >Password:</label>
<input type='password' name='password' id='password' maxlength="50" /> <br />
 <br /> <label id="label1" style="color: red"></label> <br />
<input type='submit' name='Submit' value='Login'/> <br />
<a href='resetPassword1.php'> Forgot/Reset Password? Click Here</a>
</fieldset>
</form> 
```

但是，目标不会被称为 inisde php 代码的 ChangeTarget() 方法更改，所以现在的问题是所有内容都加载到 iframe 内或父窗口内的所有内容。有谁知道如何解决这个问题？

服务器端脚本：

```
mysql_select_db("mydb",$check);
$email = $_POST['email'];  //username that will be submit from a form
$password = $_POST['password'];  //password that will be submit from a form

    // if(mysql_num_rows($temp_privileges_id)== 1) //if the id found that means that the user is already assigned to a conference
   //  {
          echo '<script type="text/javascript">',
             'ChangeTarget();',
             '</script>';
          header('Location: main.php'); // transefer to home page with variable username
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:11:49.527

没有办法`prop`。要么`target`直接设置属性的值

```
document.getElementById("login").target = "_parent"; 
```

或使用`setAttribute`

```
document.getElementById("login").setAttribute("target", "_parent"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:16:59.757

`.prop()`是一个 jQuery 函数。如果您打算在 jQuery 中执行此操作，请执行以下操作：

```
$("#login").prop("target", "_parent"); 
```

如果您不打算在 jQuery 中执行此操作，请直接在 JavaScript 中执行此操作：

```
document.getElementById("login").target = "_parent"; 
```

# python - 空集表示

> ID：10465035
> 
> 赞同：0
> 
> 时间：2012-05-05T18:59:32.880
> 
> 标签：python

有人可以解释以下内容吗？

```
>>> a = {1}
>>> b = {2}
>>> a & b == set()
True
>>> a & b == {}
False 
```

为什么会做出这个选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:01:20.560

您的代码`a & b == {}`将 a ANDed 与 b 与`{}`空字典进行比较。因此，and 和空字典的结果不同，结果为假。

# php - PHP 相对时间

> ID：10465036
> 
> 赞同：-2
> 
> 时间：2012-05-05T18:59:33.870
> 
> 标签：php, time, web

您好，我对 PHP 中的相对时间格式有疑问。我正在寻找“本月至今”的时间。例如，今天是 5 月 5 日，我想获取从 5 月 1 日到 5 月 5 日的时间跨度。我尝试使用“本月”格式，但没有成功。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:05:18.923

会`strtotime()`为你工作吗？它需要一个字符串`next month`，然后创建它的时间戳。

如果没有，请查看[此 Stack Overflow 问题](https://stackoverflow.com/questions/1342247/best-way-to-work-with-timespans "这个")。

另一种选择是使用`DateTime`PHP 内置的。

# javascript - 什么时候调用/执行对javascript函数的objective-c调用，什么时候不调用？

> ID：10465037
> 
> 赞同：0
> 
> 时间：2012-05-05T18:59:42.903
> 
> 标签：javascript, objective-c, ios, google-maps-api-3

如果 javascript 被调用或执行，依赖于什么？准确地说，我有两个以相同方式调用的函数：

```
[self.mapView stringByEvaluatingJavaScriptFromString:
              [NSString stringWithFormat:@"setMarkerAtPosition(%f,%f)",
                                           latlong.latitude, latlong.longitude]]; 
```

和

```
[self.mapView stringByEvaluatingJavaScriptFromString:@"test()"]; 
```

但`calculateRoute()`被执行而不被执行`test()`。怎么来的？

```
function setMarkerAtPosition(lat, long){
    var position = new google.maps.LatLng(lat, long);
    var marker = new google.maps.Marker({position: position, 
                                              map: map, 
                                            title:"Hello World!", 
                                         animation: google.maps.Animation.DROP});
    var content = "Ich bin eine normale Infobox";
    google.maps.event.addListener(marker, 'click', function() {
                              infowindow.setContent(content);
                              infowindow.open(map,marker); 
                              reportClickedMarker();
                              }); 
```

}

```
function test(){
    alert(currentPosition.latitude + ', ' + currentPosition.longitude);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:25:55.757

你没有`calculateRoute()`在任何地方打电话。**`test()`**被调用是因为您使用以下方法调用它：

```
[self.mapView stringByEvaluatingJavaScriptFromString:@"test()"]; 
```

# jquery - 用于自定义日期格式的 Tablesorter 插件的自定义解析器

> ID：10465038
> 
> 赞同：5
> 
> 时间：2012-05-05T18:59:53.247
> 
> 标签：jquery, parsing, tablesorter, date-format

我需要调整 jQuery Tablesorter 插件以非常简单的格式对日期进行排序，该格式由三个字母的月份和 4 位数字组成（例如 2010 年 5 月、2011 年 1 月、2012 年 3 月等）。

我一直无法解决如何做到这一点。我尝试调整在这里找到的解析器：http: [//beausmith.com/blog/custom-date-sorting-for-jquery-tablesorter-plugin/](http://beausmith.com/blog/custom-date-sorting-for-jquery-tablesorter-plugin/)。但是我迷失了reg ex。为了方便起见，我将在下面发布他的代码。

```
// TableSort parser for date format: Jan 6, 1978
$.tablesorter.addParser({
id: 'monthDayYear',
is: function(s) {
  return false;
},
format: function(s) {
  var date = s.match(/^(\w{3})[ ](\d{1,2}),[ ](\d{4})$/);
  var m = monthNames[date[1]];
  var d = String(date[2]);
  if (d.length == 1) {d = "0" + d;}
  var y = date[3];
  return '' + y + m + d;
 },
type: 'numeric'
});
var monthNames = {};
monthNames["Jan"] = "01";
monthNames["Feb"] = "02";
monthNames["Mar"] = "03";
monthNames["Apr"] = "04";
monthNames["May"] = "05";
monthNames["Jun"] = "06";
monthNames["Jul"] = "07";
monthNames["Aug"] = "08";
monthNames["Sep"] = "09";
monthNames["Oct"] = "10";
monthNames["Nov"] = "11";
monthNames["Dec"] = "12"; 
```

关于如何将其格式化为月份名称和年份的任何想法？谢谢！

更新：我尝试在下面实现一些来自 Sam 和 Fudgey 的代码（感谢您到目前为止提供的帮助！）。我不能让它工作。我尝试使用 fugey 的代码示例，因为我看到它在小提琴演示中完全按照需要工作。下面是我的 HTML 标记：

```
<table id="myTable" class="stripeMe sample" width="100%" cellpadding="0"    cellspacing="0">
<thead>
<th width="30%" align="left">COMPANY</th><th width="35%">DESCRIPTION</th><th width="17%"   align="left">INDUSTRY</th><th width="18%" align="left">EXIT DATE</th></tr></thead>
<tbody>
<tr><td width="30%">   <a href="http://www.cartera.com/vesdia.html "> Cartera Commerce,  Inc.</a>  </td>
<td width="35%">Provides technology-enabled marketing and loyalty solutions 
</td><td width="17%">   Financials  </td><td width="18%">Feb 2010</td></tr><tr><td  width="30%">   <a href="http://www.criticalinfonet.com/ "> Critical Information Network,   LLC</a>  </td>
<td width="35%">Operates library of industrial professional training and certification   materials 
</td><td width="17%">   Education  </td><td width="18%">Apr 2011</td></tr><tr><td     width="30%">   <a href="http://www.cynergydata.com/ "> Cynergydata</a>  </td>
<td width="35%">Provides merchant payment processing services and related software products 
</td><td width="17%">   Merchant Processing  </td><td width="18%">May 2011</td></tr><tr>  <td width="30%">   <a href=" "> EVCI Career Colleges Holding Corp</a>  </td>
<td width="35%">Operates post-secondary schools  
</td><td width="17%">   Education  </td><td width="18%">Jul 2012</td></tr><tr><td  width="30%">   <a href="http://www.groundlink.com/ "> Groundlink, Inc.</a>  </td>
<td width="35%">Provides ground transportation services domestically and internationally 
</td><td width="17%">   Transportation  </td><td width="18%">Feb 2012</td></tr><tr><td  width="30%">   <a href="http://www.haggen.com/ "> Haggen, Inc.</a>  </td>
<td width="35%">Operates chain of high-end grocery stores in the Pacific Northwest 
</td><td width="17%">   Grocery  </td><td width="18%">Aug 2011 </td></tr>

</tbody>
</table> 
```

然后是我正在使用的脚本，它是 fudgey 的，但我将列标题编号更改为 3（这是我表中的第 4 列），并且我更改了对 tablesorter 的调用以使用表的 id，在这种情况下是有史以来最原始的#myTable。我还将它包装在 jQuery 的 $(document).ready 中：

```
$(document).ready(function() { 
$.tablesorter.addParser({
id: 'monthYear',
is: function(s) {
return false;
},
format: function(s) {
var date = s.match(/^(\w{3})[ ](\d{4})$/);
var m = date ? date[1] + ' 1 ' || '' : '';
var y = date && date[2] ? date[2] || '' : '';
return new Date(m + y).getTime() || '';
},
type: 'Numeric'
});

$('#myTable').tablesorter({
headers: {
    3: {
        sorter: 'monthYear'
    }
}
});
}); 
```

而且它仍然没有按日期对该列进行排序，我不确定它是如何排序的 - 我按这个顺序排序，这看起来几乎是正确的，但看看 2010 年 2 月的位置，就在 2011 年的中间日期- 奇怪：2011 年 8 月 2010 年 2 月 2011 年 4 月 2011 年 5 月 2011 年 2 月 2012 年 2012 年 7 月

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:02:33.293

有了格式良好的日期，这应该是您的答案：

```
$.tablesorter.addParser({
    id: 'monthYear',
    is: function(s) {
        return false;
    },
    format: function(s) {
        var date = s.match(/^(\w{3})[ ](\d{4})$/);
        var m = date[1];
        var y = date[2];
        return new Date(m + ' ' + 1 + ' ' + y);
    },
    type: 'date'
});

$(document).ready(function() {
    $('.tablesorter').tablesorter({
      headers: {
         1: {
            sorter: 'monthYear'
         }
      }
   });
}); 
```

它使用正则表达式提取月份缩写和年份，然后将它们转换为日期进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:07:55.123

我修改了@SamTyson 的回答：

改变了三件事：

1.  格式函数需要能够处理空表格单元格。
2.  格式函数必须返回一个字符串或数字
3.  解析器类型只能是“数字”或“文本”。

所以，我最终得到了这个解析器代码和[这个演示](http://jsfiddle.net/Mottie/vCTHw/106/)。

```
$.tablesorter.addParser({
    id: 'monthYear',
    is: function(s) {
        return false;
    },
    format: function(s) {
        // remove extra spacing
        s = $.trim(s.replace(/\s+/g, ' '));
        // process date
        var date = s.match(/^(\w{3})[ ](\d{4})$/),
            m = date ? date[1] + ' 1 ' || '' : '',
            y = date && date[2] ? date[2] || '' : '';
        return new Date(m + y).getTime() || '';
    },
    type: 'Numeric'
});

$('table').tablesorter({
    headers: {
        0: {
            sorter: 'monthYear'
        }
    }
}); 
```

更新：添加了一条线来修剪多余的空格。

# .net - 将表单 ComboBox 绑定到 DataTable DataContext

> ID：10465039
> 
> 赞同：1
> 
> 时间：2012-05-05T18:59:56.757
> 
> 标签：.net, wpf, data-binding, binding, clr

我通常可以通过大约五分钟的搜索来解决我的问题，但这个问题花了几天时间没有结果，所以我会尝试提出这个问题。

我有一个表单，其 DataContext 设置为数据表（更喜欢 LINQ 到 SQL，但我被 Sybase 卡住了，它缺乏对现代实体框架的良好支持。）我有一个来自另一个数据表的组合框，它应该更新上的列形成数据表，但我似乎无法让 SelectedValue 的绑定正常工作。

我在输出窗口中收到绑定错误，我不确定如何解决，但它指出了问题的原因：

System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“DataTable”（HashCode=1796783）上找不到“颜色”属性。绑定表达式：路径=颜色；DataItem='DataTable' (HashCode=1796783); 目标元素是'ComboBox'（名称='cboColor'）；目标属性是“SelectedValue”（类型“对象”）

我创建了一个示例应用程序来重新创建问题并在此处提供 Xaml 和代码

在此先感谢您的帮助

```
<Window x:Class="WPFTestBed.ComboTest"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ComboTest" Height="300" Width="300"
    Loaded="OnLoad">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="126*" />
        <ColumnDefinition Width="152*" />
    </Grid.ColumnDefinitions>
    <DataGrid AutoGenerateColumns="False" Height="243" Margin="8,6,0,0" Name="dgList" VerticalAlignment="Top" CanUserAddRows="False" ItemsSource="{Binding}" SelectionChanged="dgList_SelectionChanged"> 
        <DataGrid.Columns>
            <DataGridTextColumn Header="Name" IsReadOnly="True" Binding="{Binding Path=name}" Width="*"/>
            <DataGridTextColumn Header="Color" IsReadOnly="True" Binding="{Binding Path=color}" Width="Auto"/>
        </DataGrid.Columns>
    </DataGrid>
    <Grid Grid.Column="1" Height="207" HorizontalAlignment="Left" Margin="6,6,0,0" Name="grdSelection" VerticalAlignment="Top" Width="140" DataContext="{Binding}">
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="6,6,0,0" Name="textBlock1" Text="{Binding Path=name}" VerticalAlignment="Top" />
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="6,27,0,0" Name="textBlock2" Text="{Binding Path=color}" VerticalAlignment="Top" />
        <ComboBox Height="23" HorizontalAlignment="Left" Margin="6,56,0,0" Name="cboColor" VerticalAlignment="Top" Width="120" 
                  ItemsSource="{Binding}" DisplayMemberPath="colorName" SelectedValuePath="colorName" SelectedValue="{Binding Path=color}" />
    </Grid>
    <Button Content="_Save" Grid.Column="1" Height="23" HorizontalAlignment="Right" Margin="0,0,6,12" Name="btnSave" VerticalAlignment="Bottom" Width="75" Click="btnSave_Click" />
</Grid> 
```

**背后的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Data;

namespace WPFTestBed
{
    /// <summary>
    /// Interaction logic for ComboTest.xaml
    /// </summary>
    public partial class ComboTest : Window
    {
        public ComboTest()
        {
            InitializeComponent();
        }

        private DataTable getList()
        {
            DataTable dt = new DataTable();
            DataRow row;

            dt.Columns.Add(new DataColumn("name"));
            dt.Columns.Add(new DataColumn("color"));

            row = dt.NewRow(); row["name"] = "abe";  row["color"] = "Red"; dt.Rows.Add(row);
            row = dt.NewRow(); row["name"] = "bob"; row["color"] = "Yellow"; dt.Rows.Add(row);
            row = dt.NewRow(); row["name"] = "chuck"; row["color"] = "Blue"; dt.Rows.Add(row);
            row = dt.NewRow(); row["name"] = "doug"; row["color"] = "Red"; dt.Rows.Add(row);
            row = dt.NewRow(); row["name"] = "eddie"; row["color"] = "Yellow"; dt.Rows.Add(row);
            row = dt.NewRow(); row["name"] = "fred"; row["color"] = "Blue"; dt.Rows.Add(row);
            return dt;
        }

        private DataTable getColors()
        {
            DataTable dt = new DataTable();
            DataRow row;
            dt.Columns.Add(new DataColumn("colorName"));
            row = dt.NewRow(); row["colorName"] = "Red"; dt.Rows.Add(row);
            row = dt.NewRow(); row["colorName"] = "Yellow"; dt.Rows.Add(row);
            row = dt.NewRow(); row["colorName"] = "Blue"; dt.Rows.Add(row);
            return dt;
        }

        private void OnLoad(object sender, RoutedEventArgs e)
        {
            dgList.DataContext = getList();
            cboColor.DataContext = getColors();
        }

        private void dgList_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            // Get the selected Item
            DataRowView selectedRow = (DataRowView)dgList.SelectedCells[0].Item;

            //For Illustrative purposes - in "real life" the data table used for the DataContext would come from the database
            DataTable dt = new DataTable();
            dt.Columns.Add(new DataColumn("name"));
            dt.Columns.Add(new DataColumn("color"));
            DataRow row = dt.NewRow(); row["name"] = selectedRow["name"].ToString();  row["color"] = selectedRow["color"]; dt.Rows.Add(row);

            // Set the data context for the form
            grdSelection.DataContext = dt;
        }

        private void btnSave_Click(object sender, RoutedEventArgs e)
        {
            DataTable dt = (DataTable)grdSelection.DataContext;
            // dt is not updated by combobox binding as expected
        }            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:58:39.200

您的 ComboBox SelectedValue 绑定应绑定到 colorName。

XAML：

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="6,56,0,0" Name="cboColor" 
        VerticalAlignment="Top" Width="120" ItemsSource="{Binding}" 
        DisplayMemberPath="colorName" SelectedValuePath="colorName" 
        SelectedValue="{Binding Path=colorName}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:08:27.753

问题是，当您将列表绑定到颜色时，数据上下文会搞砸：

```
 cboColor.DataContext = getColors(); 
```

需要保持 ComboBox 的数据上下文绑定到 DataTable。在示例应用程序中，您可以直接设置项目源并单独保留其数据上下文：

```
cboColor.ItemsSource = getColors().AsDataView(); 
```

# c# - 从 C# 访问 iPad 图片

> ID：10465045
> 
> 赞同：4
> 
> 时间：2012-05-05T19:00:31.877
> 
> 标签：c#, ipad, path

我可以通过“Computer\Apple iPad\Internal Storage\DCIM\860OKMZO”访问 iPad 上的图片，但如果我想启动 FileSystemWatcher，这不是 C# 识别的路径。

访问这些文件的方法是什么？我假设如果 Explorer 理解路径，C# 也会。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:09:22.183

有几个问题需要克服。

要访问设备，您可能需要名称（众所周知的[NT 命名空间](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#namespaces)设备名称）。

例如，在我的电脑上，我可以在 \.\IPOD0\ 找到我的 iPhone。

但是，当您浏览 iPhone/Pad/Pod 时，它并未使用标准文件系统。它使用 DCF（如果您使用 Windows 资源管理器查看“内部存储属性”，您会看到）。那将是[Camera File System 的设计规则](http://en.wikipedia.org/wiki/Design_rule_for_Camera_File_system)。

[在 Windows 上，由于这些设备报告为 DCF 文件系统，因此您可能会研究 WIA 和类似的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms629850%28v=vs.85%29.aspx)示例（在 C++ 中）。

唉，虽然那不是 FileSystemWatcher。不幸的是，FileSystemWatcher（和其他本机 Windows 文件操作）不适用于作为 DCF 文件系统响应的设备。

# java - sqlite 表创建

> ID：10465047
> 
> 赞同：1
> 
> 时间：2012-05-05T19:01:12.200
> 
> 标签：java, android, sqlite

我不确定我的问题。查询第二个表时我没有得到这样的表..这些都在 onCreate 方法中

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_CBID
                   + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME
                   + " TEXT NOT NULL, " + KEY_RACE + " TEXT NOT NULL,"
                   + KEY_CLASS + " TEXT NOT NULL," + KEY_DEITY
                   + " TEXT NOT NULL," + KEY_GENDER + " TEXT NOT NULL,"
                   + KEY_HEIGHT + " TEXT NOT NULL," + KEY_WEIGHT
                   + " TEXT NOT NULL);");

        db.execSQL("CREATE TABLE " + DATABASE_TABLE2 + " (" + KEY_CSID
                   + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_SKILL
                   + " TEXT NOT NULL, " + KEY_CBID + " INTEGER PRIMARY KEY FOREIGN KEY);"
                   ); 
```

编辑：显示 cvs

```
String skill = "blah test";
    Cursor c = ourDatabase.rawQuery("SELECT " + KEY_CBID + " FROM " + DATABASE_TABLE + " order by " + KEY_CBID + " DESC limit 1", null);
    if (c != null)
    {
        c.moveToFirst();
        cbid = c.getInt(0);
    }

    ContentValues cv = new ContentValues();
    cv.put(KEY_SKILL, skill);
    cv.put(KEY_CBID, cbid);
    return ourDatabase.insert(DATABASE_TABLE2, null, cv); 
```

我的选择语句是：

```
Cursor c = ourDatabase.rawQuery("SELECT " + KEY_SKILL + ", " + KEY_NAME + ", " + KEY_CBID + " FROM " + DATABASE_TABLE + ", " + DATABASE_TABLE2 + " WHERE " + DATABASE_TABLE +"."+KEY_CBID+" = " +DATABASE_TABLE2+"."+KEY_CBID+" && " +DATABASE_TABLE+"."+KEY_NAME+" = '"+item+"'", null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:23:43.017

我不相信正在创建您的第二个表，这是使用外键声明表的方法：

```
CREATE TABLE artist(
  artistid    INTEGER PRIMARY KEY, 
  artistname  TEXT
);

CREATE TABLE track(
  trackid     INTEGER, 
  trackname   TEXT, 
  trackartist INTEGER,
  FOREIGN KEY(trackartist) REFERENCES artist(artistid)
); 
```

我从[SQLite.org](http://sqlite.org/foreignkeys.html)拿了这些。

SQLite 中默认禁用外键，供 Android 使用：

```
db.execSQL("PRAGMA FOREIGN_KEYS=ON;"); 
```

在插入数据之前，如果你还没有；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:11:24.660

1.  检查您的日志 cat 以查看在创建第二个表时是否有错误。如果 sqllite 出现错误，会在 logcat 中记录

2.  将新表添加到数据库时，如果您正在调用 db.open ，请确保从您的代码升级数据库，如果数据库已经创建，它将打开。所以在这种情况下，创建新表的代码不会被命中。因此，您必须确保升级数据库，您可以在其中删除所有现有表并重新创建

    @Override public void onCreate(SQLiteDatabase db) {

    ```
     createAllTables(db);
        Log.v(DBTAG, "DATABASE CREATED");
        // Toast.makeText(mCtx, "created", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(DBTAG, "Upgrading database from version " + oldVersion
                + " to " + newVersion + ", which will destroy all old data");
        dropExistingTables(db);
        onCreate(db);
    }

    private void dropExistingTables(SQLiteDatabase db) {

        for (int i = 0; i < Utils.getDropTableQueries().size(); i++) {
            db.execSQL(Utils.getDropTableQueries().get(i));
        }
    } 
    ```

因此得出结论，请确保您正在创建表，并且在创建时没有错误。

# objective-c - addSubview 图像时没有任何反应

> ID：10465053
> 
> 赞同：0
> 
> 时间：2012-05-05T19:01:35.267
> 
> 标签：objective-c

这是代码：

```
CGRect myImageRect = CGRectMake(0, 0, 100, 100);
UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
[myImage setImage:[UIImage imageNamed:@"Angry0.png"]];
[mainView addSubview:myImage]; 
```

`Angry0.png`在我的资源文件夹中。模拟器上不显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:29:25.190

对...您需要初始化所有视图...

如果我是对的，您的视图层次结构是这样的：

```
-mainView
     -contentView
         -scrollView
              -imageView 
```

因此，当您加载 mainView 时，您还需要初始化所有子视图...

例如：

```
...
//put this where you call mainView = [[UIView alloc] init...

contentView = [[UIView alloc] init...
//config the contentView

scrollView = [[UIScrollView alloc] init...
//config the scrollView

.... 
```

现在，只要您正确设置视图框架并初始化它们，它们不应该为空......

您可以拨打以下电话进行检查：

```
if (!scrollView) {
    NSLog(@"scrollView is null :(");
} 
```

然后你应该能够调用你现有的代码，一切都应该很好

# c - 如何解决这个特殊的嵌套 for 循环练习？

> ID：10465054
> 
> 赞同：-1
> 
> 时间：2012-05-05T19:02:05.413
> 
> 标签：c, recursion, for-loop, procedural-programming, repeat

我学习 C 编程已经有一段时间了，我偶然发现了这个我似乎无法解决的练习：

*   编写导致显示以下输出的循环嵌套：

    ```
    0
    01
    012
    0123
    01234
    012345
    01234
    0123
    012
    01
    0 
    ```

到目前为止，我已经成功到了第六排，但我无法完成练习。这是我为获得该问题的一半解决方案而编写的代码：

```
#include <stdio.h>

int
main(void)
{

int i, j;

for(i = 1; i <= 6; ++i) {
for(j = 0; j < i; ++j)

    printf("%d", j);
    printf("\n");

 }

return(0);

} 
```

答案有一些研究工作，很清楚；可能对学习同一学科的人有用，因此无缘无故地被否决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:04:50.860

问题中有一条线索：“编写循环**嵌套**”。数一数，然后倒数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:05:07.303

由于这是一个练习，我只会提示一个解决方案，因为要学习你真的应该自己做。

1.  `for`循环可以反向进行。
2.  您可以有多个嵌套循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:10:21.073

您实际上可以使用单个嵌套循环来执行此操作：

```
#include <stdio.h>

int getLength(int i) {
    /* Since this is homework, I'll leave this for you to complete. */
    if (i < ?) return ?;
    else return ?;
}

int main(void) {
    for(int i = 0; i < 11; ++i) {
        int length = getLength(i);
        for(int j = 0; j < length; ++j) {
             printf("%d", j);
        }
        printf("\n");
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T14:32:14.807

```
for(int i=0;i<=10;i++)
{
    if(i<=5)
    {
        for(int k=0;k<=i;k++)

        printf("%d",k);
    }
    else if(i>5)
    {
        for(int j=0;j<=(10-i);j++)
            printf("%d",j);
    }
    printf("\n");
} 
```

我希望这会有所帮助

这是默认答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T04:53:30.493

我认为用户应该告诉直到打印哪个号码。所以我的代码有点复杂。

# 包括

# 包括

int main (void) {

```
 int rows;
   int counter;
   int backward;
   int forward;

printf("Till which number you want to print??");
scanf("%d",&rows);
for(counter=0;counter<=rows;counter++)
    {for(forward=0;forward<=counter;forward++)
        printf("%d",forward);
            printf("\n");
        }

for(counter=rows;counter>=0;counter--)
            {for(backward=0;backward<=counter;backward++)
        printf("%d",backward);
                printf("\n");    
        }

getch();
return 0; 
```

}

感谢你 ！

# iphone - 如何将 UIView（例如 UIImageView）拖放到 iPhone/iPad 表格中的单元格

> ID：10465059
> 
> 赞同：2
> 
> 时间：2012-05-05T19:03:38.870
> 
> 标签：iphone, objective-c, uiview, drag-and-drop

我已经将 UIImageView 拖放到另一个 UIImageView 但现在我需要能够在表视图中拖放一个 UIImageView（位于表视图旁边）。所以基本上我需要确定我在表格视图上“丢弃”我的图像的位置，并确定它被丢弃的单元格或行并对此做些什么？非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:25:22.483

您可以使用`- (NSIndexPath *)indexPathForRowAtPoint:(CGPoint)point`（[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)）

# php - 如何同时运行两个“foreach”代码以获得一个输出？

> ID：10465061
> 
> 赞同：1
> 
> 时间：2012-05-05T19:03:45.953
> 
> 标签：php

我有两个`foreach`循环。一个给`image href="URL"s`，另一个给`image src="URL"s`。

如何将这两个循环组合在一起并显示图像？

我的代码给出了图像 HREF：

```
foreach($doc->getElementsByTagName('a') as $a){
    foreach($a->getElementsByTagName('img') as $img){
        echo $a->getAttribute('href');
    }
} 
```

我的代码提供图像 SRC：

```
foreach($html->find('img') as $e)
    echo $e->src . '<br>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:07:59.343

尝试跟随。

```
foreach($doc->getElementsByTagName('a') as $a){
    echo $a->getAttribute('href');
    foreach($a->getElementsByTagName('img') as $img){
        echo $img->src . '<br>';
    }
} 
```

您的代码正在回显`a->href`每张图像。如果这就是您想要做的，请尝试以下操作。

```
foreach($doc->getElementsByTagName('a') as $a){
    foreach($a->getElementsByTagName('img') as $img){
        echo $a->getAttribute('href');
        echo $img->src . '<br>';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:08:49.570

我会考虑如何在一个循环中完成所有操作，但在那之前，这里是如何将它们全部放入一个数组中：

```
$image_links = array();

foreach($doc->getElementsByTagName('a') as $a){
    foreach($a->getElementsByTagName('img') as $img){
        $image_links[] = $a->getAttribute('href');
    }
}

foreach($html->find('img') as $e)
    $image_links[] = $e->src;
 } 
```

# python - R中的数据重排

> ID：10465062
> 
> 赞同：3
> 
> 时间：2012-05-05T19:03:54.357
> 
> 标签：python, r, dataframe, data.table

我有几个这样的 CSV 文件：

```
site,run,id,payload,dir
1,1,1,528,1
1,1,1,540,2
1,1,3,532,1
# ... thousands more rows ... 
```

（在我使用的实际情况下，共有三个文件，总共 1,408,378 行。）对于绘图，我想将它们重新调整为这种格式：

```
label,stream,dir,i,payload
A,1,1,1,586
A,1,1,2,586
A,1,1,3,586
# etc 
```

其中“标签”源自 CSV 文件的名称；“stream”是一个序列号，分配给一个文件中“site”、“run”和“id”的每个组合（因此，仅在“label”中是唯一的）；'i' 是每个 'stream' 中的行号；'dir' 和 'payload' 直接取自原始文件。我还想丢弃每个流的前 20 行以外的所有行。我事先知道 CSV 文件中的每个单元格（标题除外）都是一个正整数，并且“dir”只取值 1 和 2。

我用 终止了我最初的尝试`plyr`，因为经过一个多小时的计算，它已经运行了高达 6GB 工作集的 R 进程，而且看不到尽头。`foreach`最新的对并行性的闪亮新支持`plyr`并没有帮助：八个进程每个运行 10 分钟的 CPU 时间，然后它又回到一个进程，又持续了一个小时，是的，再次炸毁了我的 RAM。

于是我用 Python 给自己写了一个帮助脚本，用它我更流利：

```
import sys
def processOne(fname):
    clusters = {}
    nextCluster = 1
    with open(fname + ".csv", "r") as f:
        for line in f:
            line = line.strip()
            if line == "site,run,id,payload,dir": continue
            (site, run, id, payload, dir) = line.split(',')
            clind = ",".join((site,run,id))

            clust = clusters.setdefault(clind,
                                        { "i":nextCluster, "1":0, "2":0 })
            if clust["i"] == nextCluster:
                nextCluster += 1

            clust[dir] += 1
            if clust[dir] > 20: continue

            sys.stdout.write("{label},{i},{dir},{j},{payload}\n"
                             .format(label=fname,
                                     i=clust["i"],
                                     dir=dir,
                                     j=clust[dir],
                                     payload=payload))

sys.stdout.write("label,stream,dir,i,payload\n")
for fn in sys.argv[1:]: processOne(fn) 
```

并从 R 脚本中调用它：

```
all <- read.csv(pipe("python preprocess.py A B C", open="r")) 
```

五秒钟内完成。

所以问题是：在 R 中执行此操作的*正确方法是什么？*不是这个特定的任务，而是这类问题。在分析数据之前，我几乎总是需要对一堆数据进行洗牌，而且在其他语言中它几乎总是更容易——无论是我编写代码还是计算机执行它。这让我觉得我只是将 R 用作一个接口，如果我改为`ggplot2`学习的话，从长远来看，也许我会节省自己的时间。`matplotlib`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T19:37:29.593

完成所需步骤的 R 代码：

--"其中'label'来自CSV文件的名称；"

```
filvec <- list.files(<path>)
for (fil in filvec) {  #all the statements will be in the loop body
  dat <- read.csv(fil)
  dat$label <- fil   # recycling will make all the elements the same character value 
```

--" 'stream' 是分配给一个文件中 'site'、'run' 和 'id' 的每个组合的序列号（因此，仅在 'label' 中是唯一的）；"

```
 dat$stream <- as.numeric( with(dat, interaction(site, run, id) ) ) 
```

--" 'i' 是每个 'stream' 中的行号；"

```
dat$i <- ave(dat$site,     # could be any column since we are not using its values
             dat$stream,   # 'ave' passes grouped vectors, returns same length vector
             FUN= function(x) 1:length(x) ) 
```

--" 和 'dir' 和 'payload' 直接取自原始文件。"

```
 # you can refer to them by name or column number 
```

--“我还想丢弃每个流的前 20 行以外的所有行。”

```
 out <- dat[dat$i <= 20,     # logical test for the "first 20"
             c('label','stream','dir','i','payload') ]  # chooses columns desired
     }  # end of loop 
```

实际上目前这将覆盖三个“dat”文件。（因此主要用于进行速度检查的一次性测试运行。）您可以进行最后一次调用，例如：

```
 assign(paste(fil, "out", sep="_"), dat[dat$i <= 20,
                                          c('label','stream','dir','i','payload') ] ) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T22:23:47.013

该`data.table`软件包通常会加快大型到大型 data.frames 上的操作。

例如，下面的代码将三个 500,000 行的 data.frames 作为输入，并在我不太强大的笔记本电脑上在大约 2 秒内执行您描述的所有转换。

```
library(data.table)

## Create a list of three 500000 row data.frames
df <- expand.grid(site=1:2, run=1:2, id=1:2)
df <- data.frame(df, payload=1:1000, dir=rep(1, 5e5))
dfList <- list(df, df, df)
dfNames <- c("firstCSV", "secondCSV", "thirdCSV")

## Manipulate the data with data.table, and time the calculations
system.time({
outputList <-
    lapply(1:3, FUN = function(ii) {
        label <- dfNames[ii]
        df <- dfList[[ii]]
        dt <- data.table(df, key=c("site", "run", "id"))
        groups <- unique(dt[,key(dt), with=FALSE])
        groups[, stream := seq_len(nrow(groups))]
        dt <- dt[groups]
        # Note: The following line only keeps the first 3 (rather than 20) rows
        dt <- dt[, head(cbind(.SD, i=seq_len(.N)), 3), by=stream]
        dt <- cbind(label, dt[,c("stream", "dir", "i", "payload")])
        df <- as.data.frame(dt)
        return(df)
    })
output <- do.call(rbind, outputList)
})
##    user  system elapsed 
##    1.25    0.18    1.44 

## Have a look at the output
rbind(head(output,4), tail(output,4)) 
```

* * *

**编辑**：在 2012 年 5 月 8 日，我通过替换这一行将上述运行时间缩短了约 25%：

```
dt <- dt[, head(cbind(.SD, i=seq_len(.N)), 3), by=stream] 
```

对于这两个：

```
dt <- cbind(dt, i = dt[, list(i=seq_len(.N)), by=stream][[2]])
dt <- dt[i<=3,]  # Note: This only keeps the 1st 3 (rather than 20) rows 
```

# php - 变量和 mktime() 不起作用

> ID：10465066
> 
> 赞同：0
> 
> 时间：2012-05-05T19:04:49.577
> 
> 标签：php, variables, mktime

我有以下代码：

```
$search = '3,39,49,5,5,2012';
$search = mktime($search);
echo $search; 
```

这只是输出当前时间戳，而不是指定日期的时间戳。但是，如果我执行以下操作：

```
$search = mktime(3,39,49,5,5,2012);
echo $search; 
```

它输出正确的时间戳，1336203589。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:13:26.490

尝试这个：

```
$search = '3,39,49,5,5,2012';
$search = call_user_func_array('mktime',explode(',', $search));
echo $search; 
```

演示：[http ://codepad.viper-7.com/lxTJbO](http://codepad.viper-7.com/lxTJbO)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:09:09.543

mktime 需要一个时间值数组，因此您只需使用`explode`oder拆分数组`preg_split`

```
$search = '3,39,49,5,5,2012';
$t = explode(',', $search);
$search = mktime($t[0], $t[1], $t[2], $t[3], $t[4], $t[5]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:09:21.633

那是因为您需要指定一个整数列表到`mktime`. 您将 a 传递`string`给它（您的理解是一个列表，但对于 php 解释器而言并非如此）。您需要将其转换为这样的列表：

```
$search = '3,39,49,5,5,2012';
$search = mktime(explode(',', $search));
echo $search; 
```

# c++ - 将解析树转换为 AST（抽象语法树）C++

> ID：10465071
> 
> 赞同：2
> 
> 时间：2012-05-05T19:05:12.383
> 
> 标签：c++, parsing, abstract-syntax-tree, parse-tree

我有一个解析树，它解析出一堆 char `(stack<stack<char>>)`。这会将字符放入解析树中。我的问题是如何将此解析树转换为 AST 以对其进行评估？

我有评估器为 AST 工作，我只需要将树转换为语法即可对其进行评估。

任何帮助，将不胜感激。

[这是我要完成的工作的图片](http://dfwebdesign.net/example.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:09:32.840

我能够使用[树遍历算法转换它们](http://en.wikipedia.org/wiki/Tree_traversal)

使用前序遍历

```
preorder(node)
  if node == null then return
  print node.value
  preorder(node.left) 
  preorder(node.right) 
```

使用堆栈来存储叶节点，我将值添加到它们上，并且能够横穿堆栈并更改为 lea 节点。

10 + 4 的示例

使用 preorder 的解析树叶会给我一堆 [+ 10 4]

使用辅助函数，我可以将其转换为

Make_Plus(Make_Int(10), Make_Int(4)) 使用递归

# css - 让我的表格标题 1 个字符宽 >> 旋转文本（或其他内容？）

> ID：10465073
> 
> 赞同：0
> 
> 时间：2012-05-05T19:05:31.427
> 
> 标签：css

我想让我的标题文本垂直而不是水平，以保持我的列只有 1 个字符宽。可能的？

![在此处输入图像描述](../Images/1b930f64b1f82208f8074e6e6e894a0e.png)

我所说的“垂直”是指：

小号

一个

米

磷

大号

乙

或将文本旋转 90°

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:09:13.087

css 中有一个标准机制来旋转文本：

```
.rotate {

/* Safari */
-webkit-transform: rotate(-90deg);

/* Firefox */
-moz-transform: rotate(-90deg);

/* IE */
-ms-transform: rotate(-90deg);

/* Opera */
-o-transform: rotate(-90deg);

/* Internet Explorer */
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);

} 
```

但这在所有浏览器上都不是那么好用：有时宽度是在旋转之前计算的，这会导致奇怪的效果。你必须测试看看它是否对你的问题有好处。

编辑：新的、更完整的解决方案从[http://css-tricks.com/snippets/css/text-rotation/](http://css-tricks.com/snippets/css/text-rotation/)被盗（之前 IE 丢失，正如 JonathanSampson 指出的那样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:11:14.800

有两种方法可以做到这一点 -

*   干净的方法：`<br>`在每个字符后添加（换行符）

*   CSS方式：`width: 1em`用来表示你想要`m`字体中字符的宽度。对于固定宽度的字体，这将按您的预期工作。但它可能并不总是适用于可变宽度字体（这是您可能会使用的字体）

覆盖样式表、缩放、重新排序内容等用户操作可能会影响您的样式。第一种方法可以避免这些问题

# php - 主动刷新和需要重新加载之间的实时馈送差异

> ID：10465075
> 
> 赞同：1
> 
> 时间：2012-05-05T19:05:41.543
> 
> 标签：php, user-interface, real-time, tornado

在 Facebook 上，News Feed 上的刷新是实时发生的。在 LinkedIn 或 Twitter 等其他网站上，它要求用户单击“显示 3 个新更新”之类的内容。

我想知道从后端的角度来看，这两种方法是否真的存在重大差异，或者这主要是 UI 考虑？

如果是后端的区别，有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:23:12.080

可能只是 UI 方面的考虑，如果 Twitter 可以获取更新的数量，它可能也可以获取这些更新的内容。

# ruby-on-rails - 创建新的 Rails 应用程序时加载错误

> ID：10465078
> 
> 赞同：0
> 
> 时间：2012-05-05T19:06:24.193
> 
> 标签：ruby-on-rails, linux

创建新的 Rails 应用程序时出现此错误

```
<internal:lib/rubygems/custom_require>:29:in `require': libcrypto.so.0.9.8: cannot open shared object file: No such file or directory - /share/Ruby/192p290/lib/ruby/1.9.1/armv5tel-linux-eabi/digest/md5.so (LoadError)
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from /share/Ruby/192p290/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/generators/rails/app/app_generator.rb:1:in `<top (required)>'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from /share/Ruby/192p290/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/commands/application.rb:16:in `<top (required)>'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from /share/Ruby/192p290/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/cli.rb:14:in `<top (required)>'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from <internal:lib/rubygems/custom_require>:29:in `require'
  from /share/Ruby/192p290/lib/ruby/gems/1.9.1/gems/rails-3.0.9/bin/rails:8:in `rescue in <top (required)>'
  from /share/Ruby/192p290/lib/ruby/gems/1.9.1/gems/rails-3.0.9/bin/rails:3:in `<top (required)>'
  from /share/Ruby/192p290/bin/rails:19:in `load'
  from /share/Ruby/192p290/bin/rails:19:in `<main>' 
```

错误提示“没有这样的文件或目录”，但文件存在。

```
[~] # cd /share/Ruby/192p290/lib/ruby/1.9.1/armv5tel-linux-eabi/digest && ls 
bubblebabble.so* rmd160.so*       sha2.so*
md5.so*          sha1.so* 
```

版本：
ruby 1.9.2p290（2011-07-09 修订版 32553）[armv5tel-linux-eabi]
Rails 3.0.9
gem 1.3.7

Ruby 从自定义目录中的源代码安装并添加到 $PATH。

编辑：忘了提到我正在尝试将它安装在 QNAP TS-412 上。它在arm linux上运行。

编辑：
管理安装 RVM。安装了 ruby​​ 1.9.2 p320 仍然出现错误。

```
/opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': libcrypto.so.0.9.8: cannot open shared object file: No such file or directory - /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/armv5tel-linux-eabi/digest/md5.so (LoadError)
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/generators/app_base.rb:1:in `<top (required)>'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/generators/rails/app/app_generator.rb:1:in `<top (required)>'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/commands/application.rb:24:in `<top (required)>'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/cli.rb:15:in `<top (required)>'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /opt/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/bin/rails:7:in `<top (required)>'
    from /opt/rvm/gems/ruby-1.9.2-p320/bin/rails:23:in `load'
    from /opt/rvm/gems/ruby-1.9.2-p320/bin/rails:23:in `<main>' 
```

编辑：
卸载 RVM 并从源代码再次安装 ruby​​。仍然出现错误。

文件`md5.so`确实存在

```
[/share/Web] # cd /opt/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest/
[/opt/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest] # ls -l
-rwxr-xr-x    1 admin    administ    12338 May 10 19:56 bubblebabble.so*
-rwxr-xr-x    1 admin    administ    17847 May 10 19:56 md5.so*
-rwxr-xr-x    1 admin    administ    27764 May 10 19:56 rmd160.so*
-rwxr-xr-x    1 admin    administ    23159 May 10 19:56 sha1.so*
-rwxr-xr-x    1 admin    administ    39475 May 10 19:56 sha2.so* 
```

编辑：
Ruby 不知何故未正确链接到加密库。

```
ruby -e 'require "digest/md5"' 
```

这会引发相同的错误。

知道如何建立链接吗？

**编辑：**

试图使用

```
export LD_LIBRARY_PATH=/share/MD0_DATA/.qpkg/Optware/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest:$LD_LIBRARY_PATH
export RUBYLIB=/share/MD0_DATA/.qpkg/Optware/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest:$RUBYLIB 
```

但我不知道我是否做得对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:33:53.533

我建议使用 RVM 安装 Ruby。您拥有的自定义安装的 Ruby 可能没有正确链接到加密库。

这是 rvm 网站的链接：[https ://rvm.io/](https://rvm.io/)

安装说明在这里：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

此外，我发现使用 brew 安装支持库通常可以提供更好的结果。

下面是由 Thoughtbot（领先的 Rails 咨询小组）维护的一组脚本的指针，用于设置运行 Rails 所需的一切新 Mac。

[https://github.com/thoughtbot/laptop/blob/master/mac](https://github.com/thoughtbot/laptop/blob/master/mac)

按照那里的步骤（至少是那些适用的），你应该有好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:31:19.207

终于解决了。

```
ln -s /share/MD0_DATA/.qpkg/Optware/lib/libcrypto.so.0.9.8 /lib/libcrypto.so.0.9.8 
```

成功了。

# algorithm - 为期权定价实施快速傅里叶变换

> ID：10465079
> 
> 赞同：1
> 
> 时间：2012-05-05T19:06:29.153
> 
> 标签：algorithm, fft, implementation, finance

我需要一些关于我正在做的小项目的提示。我的目标是实现快速傅里叶变换算法 (FFT)，该算法可应用于期权定价。

**第一个问题：哪个 FFT？**

有很多不同的 FFT 算法，最著名的一种是 Cooley-Tukey。我对此的想法：我更喜欢最简单的，因为这不是论文或大项目，只是一门算法课程。但它必须与期权定价兼容（与我们一般文献中最常见的图像/声音处理应用程序相比）。所以这取决于所提供的输入形式（我需要一些建议）。我熟悉几个改进，如分数 FFT、混合基数 FFT 等。但这些似乎非常复杂且由优化/性能驱动，这与我的项目无关。

**第二个关注点：哪种定价模式？**

我猜布莱克-斯科尔斯 (BS) 有点太“扁平化”了，我知道在 BS 之后出现的几种模型。因此，出于与上述相同的目标，我最初更喜欢 Heston 模型。

有很多考虑，而事实是，我就是只见树木不见森林。

**一些背景资料**：

我的背景是数学（理论）学士学位，所以我对傅里叶变换有一些了解。

目标是计算期权定价的有效 FFT 实现。它不必是最快的（没有极端优化）。目标是试图了解所选的 FFT 并拥有一个真实的工作应用程序。

那么你能就选择提供一些建议吗？

我已经阅读了很多关于 FFT + 期权定价的论文，比如说谷歌前几页上的所有不错的点击。但这些研究是出于“更高”的原因而编写的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T21:26:21.270

如果您的目标是使用 FFT，那么您的选择很糟糕：只有仿射模型才能为您提供足够的信息来获得点密度的傅里叶变换。在实践中，这意味着布莱克-斯科尔斯或赫斯顿。也许还有更多，但没有一个“有用”的模型。

Heston 的模型具有特殊的特征（与其隐含的 vol 动力学有关），这使得它作为随机 vol 模型毫无用处。我想它之所以受欢迎，正是因为您可以通过傅里叶变换以半封闭形式为普通期权定价。有了现代技术，这不再是真正的资产。

如果您对期权定价感兴趣，因此我建议您不要太努力地使用 FFT，而转向 PDE 或 Monte-Carlo 方法：您可以使用的模型范围更有趣（也更有价值）在就业市场上，如果你有兴趣）。

对于您问题的 FFT 部分，从头开始实施 Cooley-Tukey 并不难，您可以从那里开始。当然，在生产代码中，您最好使用罐装包（如 FFTW）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T09:20:02.127

几周以来，我一直在研究这个主题——FFT 应用于期权定价。事实证明，在这个主题上有大量的工作，所以正如亚历山大所暗示的那样，这几乎不是徒劳的。

我发现的最易读的基础论文来自 Carr 和 Madan - www.math.nyu.edu/research/carrp/papers/pdf/jcfpub.pdf - 但还有许多其他详细程度不同的论文，谷歌会找到通过“期权定价傅里叶”搜索。

在不久的将来，我可能会在 R 中对此进行编码；我正在尝试找到一个不错的期权价格数据来源进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:01:42.043

[FFT](http://en.wikipedia.org/wiki/Fft)只是[DFT](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)的优化实现。我建议要么使用现有的 FFT 库，例如[KissFFT](http://sourceforge.net/projects/kissfft/)，或者如果你真的想从头开始实现它，那么只需实现 DFT 而不是 FFT，因为它更简单，除非你有很高的性能，否则性能应该不是问题数据速率或大量数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T08:03:18.863

我在下面提供了Matlab 中*radix-2 Decimation In Time* Cooley-Tukey 方案的实现。代码是迭代的，考虑下图中的方案：

[![在此处输入图像描述](../Images/c340e79e966acfe2ddefaa7879763048.png)](https://i.stack.imgur.com/9oKjr.jpg)

递归方法也是可能的。

正如您将看到的，该实现还计算了执行的乘法和加法的数量，并将其与[FFT 的多少 FLOPS 中报告的理论计算进行比较？](https://stackoverflow.com/questions/40036629/how-many-flops-for-fft/42261160#42261160).

该代码显然比 Matlab 使用的高度优化的 FFTW 慢得多。

另请注意，旋转因子`omegaa^(interButterflyIndex * 2^(numStages - p))`可以离线计算，然后从查找表中恢复，但在下面的代码中跳过了这一点。

```
% --- Radix-2 Decimation In Time - Iterative approach

clear all
close all
clc

N = 32;

x = randn(1, N);
xoriginal = x;
x = bitrevorder(x);
xhat = zeros(1, N);

numStages = log2(N);

omegaa = exp(-1i * 2 * pi / N);

mulCount = 0;
sumCount = 0;
tic
for p = 1 : numStages
    alpha = 2^(p - 1);
    butterflyStart = 1;
    while (butterflyStart <= (N - alpha))
        for interButterflyIndex = 0 : alpha - 1
            xhat(butterflyStart)          = x(butterflyStart) + x(butterflyStart + alpha) * omegaa^(interButterflyIndex * 2^(numStages - p)); 
            xhat(butterflyStart + alpha)  = x(butterflyStart) - x(butterflyStart + alpha) * omegaa^(interButterflyIndex * 2^(numStages - p));
            mulCount = mulCount + 4;
            sumCount = sumCount + 6;
            butterflyStart = butterflyStart + 1;
            if (interButterflyIndex == (alpha - 1))
                butterflyStart=butterflyStart + alpha;
            end;
        end;
    end;
    x = xhat;
end;
timeCooleyTukey = toc;

tic
xhatcheck = fft(xoriginal, N);
timeFFTW = toc;

rms = 100 * sqrt(sum(sum(abs(xhat - xhatcheck).^2)) / sum(sum(abs(xhat).^2)));

fprintf('Time Cooley-Tukey = %f; \t Time FFTW = %f\n\n', timeCooleyTukey, timeFFTW);
fprintf('Theoretical multiplications count \t = %i; \t Actual multiplications count \t = %i\n', ...
         2 * N * log2(N), mulCount);
fprintf('Theoretical additions count \t\t = %i; \t Actual additions count \t\t = %i\n\n', ...
         3 * N * log2(N), sumCount);
fprintf('Root mean square with FFTW implementation = %.10e\n', rms); 
```

# jquery - 许多表排序与第一个 td

> ID：10465080
> 
> 赞同：1
> 
> 时间：2012-05-05T19:06:32.997
> 
> 标签：jquery, sorting, html-table

我有很多表：

```
<table id="342">
  <tr>
     <td>342</td>
     <td>test</td>
  </tr>
</table>
<table id="533">
  <tr>
     <td>533</td>
     <td>test</td>
  </tr>
</table>
<table id="156">
  <tr>
     <td>156</td>
     <td>test</td>
  </tr>
</table> 
```

我可以使用第一个 td jquery 从 1 到 ... 对这些表进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:15:16.047

尝试这个：

**HTML：**

```
<div id="test">
<table id="342">
  <tr>
     <td>342</td>
     <td>test</td>
  </tr>
</table>
<table id="533">
  <tr>
     <td>533</td>
     <td>test</td>
  </tr>
</table>
<table id="156">
  <tr>
     <td>156</td>
     <td>test</td>
  </tr>
</table>
</div> 
```

**jQuery：**

```
var tables = $('table');

tables.sort(function(a, b) {
    return parseInt($('tr td:first', a).html()) > parseInt($('tr td:first', b).html())
});
$('div#test').empty().append(tables); 
```

**[演示](http://jsfiddle.net/pp9JB/1/)**

# javascript - 单击以“加载”后更改按钮图像，然后在 10 秒后更改为另一个图像

> ID：10465082
> 
> 赞同：0
> 
> 时间：2012-05-05T19:06:43.460
> 
> 标签：javascript, html

整天都在为此苦苦挣扎，我已经到了我的代码根本无法工作的地步！我想做的是：

当用户单击`ImageButton1`时，该图像被另一个图像替换`LoadingImg`，然后在 10 秒后，该图像被另一个图像/按钮替换`ImageButton2`

这是我的非功能代码：

```
<img src="images/xboxsite_14.gif" id="ImageButton1" onClick="showLoad()">
<img src="images/getld.png" id="ImageButton2" alt="Get Last Digits" style="display:none;">
<img src="images/Loader.gif" id="LoadingImg" style="display:none;">

<script type="text/javascript" language="javascript">  

function showLoad() {
    document.getElementById('ImageButton1').src=document.getElementById('LoadingImg').src;
    document.getElementById('LoadingImg').style.display='block';
    setTimeout(swapImageSrc, 1000);
}​

function swapImageSrc() {
    document.getElementById('LoadingImg').src = document.getElementById('ImageButton2').src;
    document.getElementById('LoadingImg').style.display='none';
    document.getElementById('ImageButton2').style.display='block';
    document.getElementById('Code1String').style.display='block';
}

</script> 
```

我唯一能想到的是我将字符集从“charset=iso-8859-1”更改为“charset=UTF-8”，因为我随机收到了“不支持的字符”错误（没有）。

如果有人能解决这个问题，我将非常感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:46:27.903

我当然可能是错的，但是这可能是您所追求的吗，更干净的代码可能会帮助您调试问题：

```
<img src="images/xboxsite_14.gif" id="ImageButton1" onClick="action();">

<script type="text/javascript" language="javascript">  

function action()
{
swapImage('images/getld.png') ;
window.setTimeout(function ()
{
swapImage('images/Loader.gif') 
}, 1000)
};

var swapImage = function(src)
{
    document.getElementById("ImageButton1").src = src;
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:41:28.483

我清理了你的逻辑.. [http://jsfiddle.net/3ySkE/](http://jsfiddle.net/3ySkE/)

```
function showLoad() {
    document.getElementById('ImageButton1').src = document.getElementById('LoadingImg').src;

    setTimeout(swapImageSrc, 1000);
}

function swapImageSrc() {
    document.getElementById('ImageButton1').src = document.getElementById('ImageButton2').src;

}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:44:51.863

这有效...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org      /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>

<script  language="javascript">  

function showLoad() {   

 document.getElementById('ImageButton1').src = '';
 document.getElementById('LoadingImg').src = 'images/Loader.gif';
 setTimeout(swapImageSrc, 10000);
}

function swapImageSrc() {
 document.getElementById('LoadingImg').src = '';    
 document.getElementById('ImageButton2').src = 'images/getld.png';
 document.getElementById('Code1String').style.display='block';
}

</script>
</head>

<body>

<img src="images/xboxsite_14.gif" id="ImageButton1" onclick="showLoad()">
<img src="" id="ImageButton2">
<img src="" id="LoadingImg">

</body>
</html> 
```

# android - Android sqlite - 选择字段为空或为空的记录

> ID：10465083
> 
> 赞同：30
> 
> 时间：2012-05-05T19:06:44.660
> 
> 标签：android, sqlite

我的应用程序有一个 sqlite DB，其中一些字段为空或空（这意味着我从未在该字段中插入任​​何内容）。

我希望选择字段为空或为空的所有记录。

这是我尝试过的：

```
cursor = db.query(DBHelper.TABLE_NAME, COLUMNS, "folder_name = ? ", new String[] {"null"}, null, null, DBHelper.TIMESTAMP_COL + " DESC"); 
```

但这不起作用，我没有得到任何记录。我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-05T19:10:28.720

尝试

```
cursor = db.query(DBHelper.TABLE_NAME, COLUMNS, "folder_name is null or folder_name = ?", new String[] {""}, null, null, DBHelper.TIMESTAMP_COL + " DESC"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-05T19:35:10.320

```
db.rawQuery("SELECT * FROM myTable WHERE myColumn IS NULL", null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T19:09:25.253

只需使用“文件夹名称为空”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-08T09:17:06.840

我正在使用 android studio 3.4，房间 2.1.0-alpha07

**这是我尝试使用的 Kotlin 代码**
，但没有按预期工作

```
`@Query("SELECT *FROM notifications WHERE status=:status OR status = null")` 
```

这个工作正常

```
@Query("SELECT *FROM notifications WHERE status=:status OR status is null") 
```

# python - django 1.3 用于在开发环境中进行调试的日志记录

> ID：10465084
> 
> 赞同：2
> 
> 时间：2012-05-05T19:06:48.843
> 
> 标签：python, django, logging, django-settings

我正在使用 django 1.3 中的日志记录框架，如此处所述 [https://docs.djangoproject.com/en/1.3/topics/logging/](https://docs.djangoproject.com/en/1.3/topics/logging/)

在我的 DEV 环境的 settings.py 文件中，我基本上定义了自定义格式化程序、记录器和处理程序，以便我可以将调试输出记录到文件中。

所以现在在我的代码中，我到处都有 logger.debug() 语句。

我的问题是：

1.  当我在生产中部署时，logger.debug 语句对性能有任何（显着）影响吗？（即我需要把它们都拿出来吗？）
2.  更改 settings.py 文件以使其不再捕获到文件的最佳方法是什么？目前我只是将处理程序更改为*django.utils.log.NullHandler*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:08:38.803

1.  所有这些调试语句对整体性能的影响非常小——如果您在负载较重时尝试将所有这些日志消息写入某个文件，则会出现性能问题。将大量内容写入文件可能会占用大量 CPU 和 IO。如果您将日志级别设置为低（警告），这不会成为一个大问题，因为这不会导致记录大量消息。当您想要调试/增强该代码时，将调试语句保留在那里将很有帮助。
2.  如果您没有将消息记录到文件或标准输出，则使用 null 处理程序。或者，您可以将日志记录级别降低到 WARNING 以便只有重要消息通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:28:26.183

您仍然应该在您的生产配置中记录相当多的日志，因为这将是最难找出问题所在的地方，因此请确保您不要剥离太多。

在生产/开发设置方面，我总是在我的 settings.py 底部有这个：

```
try:
    from local_settings import *
except ImportError:
    pass 
```

然后我有一个 local_settings.py，我没有添加到源代码管理中，并且可以覆盖其中的设置。这样你就可以很容易地拥有单独的生产/开发设置。

我从[这个博客](http://lethain.com/development-to-deployment-in-django/)中获得了这个想法，现在已经在很多项目中使用它——非常方便。该博客扩展了链接，并展示了如何将开发和生产设置添加到源代码控制，然后使用 local_settings 来包含其中一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:35:58.057

对于生产，您应该始终启用调试 - 正如其他人所提到的，这是您最需要它的地方。

在生产中，我们[`sentry`](https://github.com/dcramer/sentry)用于应用程序级别的日志记录并[`splunk`](http://www.splunk.com/)收集系统日志以便于搜索。

您从正确的调试语句中获得的总体价值否定了它们对性能可能产生的任何影响。换一种方式想一想——如果你没有调试，如果你的系统表现不佳，你将无法知道它在哪里窒息。

调试语句是我希望提高性能的*最后一个地方。*如果你实现了 memcache 或 redis，你会得到更多的回报；或者只是优化您的查询（因为这是大多数性能问题的开始）。

# objective-c - 禁用用户交互以在 uitextview 上单击

> ID：10465088
> 
> 赞同：0
> 
> 时间：2012-05-05T19:07:29.513
> 
> 标签：objective-c, uitextview, user-interaction

我在 tableViewCell 中有一个 UITextView

问题是，当我单击 textView 时，它不会执行 didSelectRowAtIndexPath。

但我无法设置 userInteraction = NO 因为我希望能够在长按事件中选择文本

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:45:17.103

我不认为你可以，但是如果你想要的是一种复制单元格内容（文本）的方法，那么如何使用 UITableViewDelegate 来使用官方控件......（比如在你持有单元格的联系人应用程序中） ...

您可以通过实现以下方法来实现它：

```
- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 1) { //eg, we want to copy or paste row 1 on each section
        return YES;
    }
    return NO; //for anything else return no
}

- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {

    if (action == @selector(copy:)) { //we want to be able to copy

        if... //check for the right indexPath
            return YES;

    }

    return NO; //return no for everything else

}

- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {

    if (action == @selector(copy:)) {

         //run the code to copy what you want here for indexPath

    }

} 
```

只是从内存中写的，所以 @selector(copy:) 可能是 @selector(copy) （否 :) 但试试看......你也可以添加额外的任务，比如粘贴等，但我会让你弄清楚。

祝你好运

# c - 二叉搜索树的递归

> ID：10465090
> 
> 赞同：0
> 
> 时间：2012-05-05T19:07:52.757
> 
> 标签：c, data-structures, binary-search-tree

我对递归算法有很好的掌握，但是在为二叉搜索树设计递归算法时我通常会绊倒。如果有人能指出他们认为有用的教程，特别是关于二叉搜索树递归算法的设计，将不胜感激。注意：我已经从包括 CLRS 在内的知名书籍中研究过这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:46:51.977

您需要有关二叉搜索树递归算法设计的教程吗？他们来了：

*   [二叉搜索树 - Wiki](http://en.wikipedia.org/wiki/Binary_search_tree)
*   [EB树](http://1wt.eu/articles/ebtree/)
*   [Nick Parlante的二叉树 - 斯坦福](http://cslibrary.stanford.edu/110/BinaryTrees.html)
*   [二叉搜索树 - 普林斯顿](http://algs4.cs.princeton.edu/32bst/)
*   [二叉搜索树 C++ 实现](http://igushev.com/implementations/binary-search-tree-cpp/)
*   [二叉树遍历](http://nova.umuc.edu/~jarc/idsv/lesson1.html)
*   [数组上的平衡二叉搜索树](http://piergiu.wordpress.com/2010/02/21/balanced-binary-search-tree-on-array/)
*   [用于关联搜索的多维二叉搜索树 - Bentley](http://cgi.di.uoa.gr/~ad/MDE515/p509-bentley.pdf)
*   [优先搜索树 - E. McCreight - 普林斯顿](http://www.cs.princeton.edu/courses/archive/spring04/cos423/handouts/priority%20search%20trees.pdf)

无论如何，[谷歌](https://www.google.com/)一直是这类问题的好朋友。

# cython - 从 numpy 数组组装一个 cython memoryview

> ID：10465091
> 
> 赞同：4
> 
> 时间：2012-05-05T19:07:52.773
> 
> 标签：cython

我有一堆numpy数组作为python对象数组的属性，在cython中，为准备prange处理（需要nogil），我想创建一个在第一维中“间接”的内存视图，其进一步维度引用了 numpy 数组中的数据。所以假设，`objects`是一个具有`vector`属性的对象列表。

我想做类似的事情：

```
cdef double[ ::cython.view.indirect, ::1 ] vectors
for object in objects:
    vectors[ i ] = object.vector 
```

但是我应该如何初始化“向量”以使其成为可能？如果有可能吗？或者也许内存视图只允许成为一个对象的内存视图......在这种情况下还有另一个问题 - 如何动态创建一个内存视图数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T18:41:15.480

使用以下代码，您将使用此分配：

```
cimport stackoverflow_contrib

cdef double[::cython.view.indirect, ::1] vectors =
    stackoverflow_contrib.OnceIndirect([object.vector for object in objects]) 
```

其中`stackoverflow_contrib.pyx`如下：

```
from libc.stdlib cimport malloc, free
from libc.string cimport strcmp

from cython.view cimport memoryview
from cpython cimport buffer

cdef class OnceIndirect:
    cdef object _objects
    cdef void** buf
    cdef int ndim
    cdef int n_rows
    cdef int buf_len
    cdef Py_ssize_t* shape
    cdef Py_ssize_t* strides
    cdef Py_ssize_t* suboffsets
    cdef Py_ssize_t itemsize
    cdef bytes format
    cdef int is_readonly

    def __cinit__(self, object rows, want_writable=True, want_format=True, allow_indirect=False):
        """
        Set want_writable to False if you don't want writable data. (This may
        prevent copies.)
        Set want_format to False if your input doesn't support PyBUF_FORMAT (unlikely)
        Set allow_indirect to True if you are ok with the memoryview being indirect
        in dimensions other than the first. (This may prevent copies.)
        """
        demand = buffer.PyBUF_INDIRECT if allow_indirect else buffer.PyBUF_STRIDES
        if want_writable:
            demand |= buffer.PyBUF_WRITABLE
        if want_format:
            demand |= buffer.PyBUF_FORMAT
        self._objects = [memoryview(row, demand) for row in rows]
        self.n_rows = len(self._objects)
        self.buf_len = sizeof(void*) * self.n_rows
        self.buf = <void**>malloc(self.buf_len)
        self.ndim = 1 + self._objects[0].ndim
        self.shape = <Py_ssize_t*>malloc(sizeof(Py_ssize_t) * self.ndim)
        self.strides = <Py_ssize_t*>malloc(sizeof(Py_ssize_t) * self.ndim)
        self.suboffsets = <Py_ssize_t*>malloc(sizeof(Py_ssize_t) * self.ndim)

        cdef memoryview example_obj = self._objects[0]
        self.itemsize = example_obj.itemsize

        if want_format:
            self.format = example_obj.view.format
        else:
            self.format = None
        self.is_readonly |= example_obj.view.readonly

        for dim in range(self.ndim):
            if dim == 0:
                self.shape[dim] = self.n_rows
                self.strides[dim] = sizeof(void*)
                self.suboffsets[dim] = 0
            else:
                self.shape[dim] = example_obj.view.shape[dim - 1]
                self.strides[dim] = example_obj.view.strides[dim - 1]
                if example_obj.view.suboffsets == NULL:
                    self.suboffsets[dim] = -1
                else:
                    self.suboffsets[dim] = example_obj.suboffsets[dim - 1]

        cdef memoryview obj
        cdef int i = 0
        for obj in self._objects:
            assert_similar(example_obj, obj)
            self.buf[i] = obj.view.buf
            i += 1

    def __getbuffer__(self, Py_buffer* buff, int flags):
        if (flags & buffer.PyBUF_INDIRECT) != buffer.PyBUF_INDIRECT:
            raise Exception("don't want to copy data")
        if flags & buffer.PyBUF_WRITABLE and self.is_readonly:
            raise Exception("couldn't provide writable, you should have demanded it earlier")
        if flags & buffer.PyBUF_FORMAT:
            if self.format is None:
                raise Exception("couldn't provide format, you should have demanded it earlier")
            buff.format = self.format
        else:
            buff.format = NULL

        buff.buf = <void*>self.buf
        buff.obj = self
        buff.len = self.buf_len
        buff.readonly = self.is_readonly
        buff.ndim = self.ndim
        buff.shape = self.shape
        buff.strides = self.strides
        buff.suboffsets = self.suboffsets
        buff.itemsize = self.itemsize
        buff.internal = NULL

    def __dealloc__(self):
        free(self.buf)
        free(self.shape)
        free(self.strides)
        free(self.suboffsets)

cdef int assert_similar(memoryview left_, memoryview right_) except -1:
    cdef Py_buffer left = left_.view
    cdef Py_buffer right = right_.view
    assert left.ndim == right.ndim
    cdef int i
    for i in range(left.ndim):
        assert left.shape[i] == right.shape[i], (left_.shape, right_.shape)
        assert left.strides[i] == right.strides[i], (left_.strides, right_.strides)

    if left.suboffsets == NULL:
        assert right.suboffsets == NULL, (left_.suboffsets, right_.suboffsets)
    else:
        for i in range(left.ndim):
            assert left.suboffsets[i] == right.suboffsets[i], (left_.suboffsets, right_.suboffsets)

    if left.format == NULL:
        assert right.format == NULL, (bytes(left.format), bytes(right.format))
    else:
        #alternatively, compare as Python strings:
        #assert bytes(left.format) == bytes(right.format)
        assert strcmp(left.format, right.format) == 0, (bytes(left.format), bytes(right.format))
    return 0

from cython cimport view

cimport numpy as np
import numpy as np

def show_memoryview(object x):
    print dict(shape=x.shape, strides=x.strides, suboffsets=x.suboffsets, itemsize=x.itemsize)

def go():
    row0 = np.array(range(20), dtype=np.float64).reshape(2, 10)
    row1 = np.array(range(20, 40), dtype=np.float64).reshape(2, 10)
    row2 = np.array(range(40, 60), dtype=np.float64).reshape(2, 10)
    small_view = memoryview(row0, buffer.PyBUF_STRIDES)
    show_memoryview(small_view)
    rows = [row0, row1, row2]
        big_view = OnceIndirect(rows)
    cdef double[::view.indirect, :, :] big_view2 = big_view
    cdef int i, j, k
    show_memoryview(big_view2)
    print row1
    big_view2[1, 0, 1] += 200
    print row1
    cdef double[:, :] row1_view = big_view2[1]
    assert row1_view[0, 1] >= 200
    cdef double[::view.indirect, :, :] big_view3 = OnceIndirect([row0, row1, row0])
    cdef double[::view.indirect, ::view.indirect, :, :] dub = OnceIndirect([big_view2, big_view3], allow_indirect=True)
    show_memoryview(dub)
        # big_view2 can be indexed and sliced in Cython and Python code
        # note big_view2 is a cython memoryview object not a OnceIndirect object because it was implicitly cast to one
        # rows, big_view, big_view2 all refer to the same data!
    return (rows, big_view, big_view2) 
```

# lisp - Lisp中的Flatten Nests Function - 需要帮助理解

> ID：10465096
> 
> 赞同：2
> 
> 时间：2012-05-05T19:08:21.143
> 
> 标签：lisp, common-lisp

我一直在尝试找到一种方法将嵌套列表压缩成可以返回原始列表的数字，但我遇到了一些麻烦。

我一直在看这里给出的 flatten 函数（它是如此广泛可用）：

```
(defun flatten (l)
  (cond
    ((null l) nil)
    ((atom l) (list l))
    (t (loop for a in l appending (flatten a))))) 
```

我知道这个例子是递归的，但它是如何工作的？它检查元素是 null 还是原子，但是如果元素落入这些条件，它会做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:55:27.950

在我的日子里，而不是`(loop for a in l appending (g a))`我们写的`(mapcan #'g l)`。`(apply #'append (mapcar #'g l))`这或多或少等同于：

```
(defun flatten (l) 
    (if l 
        (if (atom l) 
            (list l) 
            (mapcan #'flatten l)))) 
```

那么在这种情况下是什么意思呢？想象一下，您调用`(flatten (list 1 2 3 4 5))`，即参数列表中只有*原子*。*该列表中的每个*原子都包含在一个列表中 - 成为一个*单例* *列表*，`(1) (2)`等等。然后它们都附加在一起，给我们返回......原始列表：

```
(  1   2   3   4   5  )

( (1) (2) (3) (4) (5) )

(  1   2   3   4   5  ) 
```

因此，展平原子列表是一种恒等运算（在 Common LISP 中，即`#'identity`）。现在想象展平一个包含一些*原子*的列表以及一个*原子**列表*。同样，列表的每个元素都被转换，然后它们都被附加在一起。正如我们刚刚看到的，原子列表保持原样*。**每个原子*都包含在一个列表中。因此，追加将返回嵌套列表中*两个级别上的所有原子，现在已展平：**`flatten`*

 ***```
(  11   12  (1 2 3 4)  13  )

( (11) (12) (1 2 3 4) (13) )

(  11   12   1 2 3 4   13  ) 
```

依此类推，还有更多级别的嵌套。

`NIL`s 作为列表中的元素会带来问题。`NIL`是一个空列表，空列表不包含任何内容，因此不应贡献任何内容。但`NIL`也是一个原子。所以我们为它做了一个特殊的例子，*不要*把它包含在一个单例列表中——让它保持原样，所以当它被附加时，它就会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T21:24:45.700

```
(defun flatten (l) 
```

上面定义了一个`FLATTEN`带有一个参数的函数，称为`L`.

```
 (cond 
```

如果

```
 ((null l) nil) 
```

参数的`L`值为空列表，返回空列表。

```
 ((atom l) (list l)) 
```

或者如果参数`L`是一个原子（即不是一个列表），则返回一个以原子作为其唯一项的列表。

```
 (t 
```

否则我们有一个非空列表

```
 (loop for a in l 
```

然后遍历列表中的所有项目，这是`L`

```
 appending (flatten a) 
```

并附加展平每个列表项的结果。

```
)))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T20:35:56.813

1.  如果您正在查看的元素是`nil`- 它是列表的末尾，则返回 nil。

2.  如果您正在查看的元素不是列表，则返回包含该元素的列表（我实际上不确定这是正确的做法，因为给定一个不是列表的原子，它将返回一个列表，其中包含原子，而不是原子本身）。

3.  否则（如果它是一个列表），遍历它的所有元素并附加所有展平的子树（您通过调用展平`flatten`），然后返回它们。

这很短，但不是最有效的算法，因为 append 需要一直到列表的末尾才能将一个部分放在另一部分的尾部。下面稍微复杂一些，但看起来更高效：

```
(defun flatten (x &optional y)
  (cond
    ((null x)
     (cond
       ((null y) nil)
       ((listp (car y))
        (flatten (car y) (cdr y)))
       (t (cons (car y) (flatten (cdr y))))))
    ((listp (car x))
     (flatten (car x) (if y (list (cdr x) y) (cdr x))))
    (t (cons (car x) (flatten (cdr x) y))))) 
```

此函数背后的算法执行以下操作：

1.  如果我们既没有第一个元素，也没有其他元素 - 我们做了所有事情，所以只需返回`nil`（列表末尾）。

2.  如果没有第一个元素 - 将第二个元素拆分为第一个元素和其余元素并重复。

3.  如果有第一个元素，则将其放入列表中，如果有第二个元素 - 保留它，否则，选择下一个元素并重复。

**编辑：**我改变了#3，因为解释真的很模糊/可能是错误的。***

# c# - 创建一个填充了一系列值 x 到 y 的数组

> ID：10465099
> 
> 赞同：12
> 
> 时间：2012-05-05T19:08:37.017
> 
> 标签：c#, .net, arrays

假设我有整数变量 x 和 y，并且我想要一个填充有 x 到 y 值的数组。有没有一种很好的方法可以使用 C# 内联？

我知道我可以使用扩展方法来实现这一点：

```
public static int[] ExpandToArray(this int x, int y)
{
    var arr = int[y - x + 1];
    for (int i = x; i <= y; i++) 
    {
        arr[i-x] = i;
    }
    return arr;
} 
```

然后用它来写：

```
x.ExpandToArray(y); 
```

.NET 中是否有内置方式（不创建扩展方法）来编写类似的东西`x.ExpandToArray(y)`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-05T19:09:38.127

```
int[] numbers = Enumerable.Range(x, y - x + 1).ToArray(); 
```

参数#1 是起始值。参数#2 是计数。

# c++ - C++：在非虚函数中使用纯虚函数

> ID：10465107
> 
> 赞同：1
> 
> 时间：2012-05-05T19:09:07.197
> 
> 标签：c++, inheritance, pure-virtual

我正在尝试创建一个为所有派生类定义接口的基类。

我想要一个函数，允许读取该类的配置文件，使用`boost::property_tree`. 让我们调用这个函数`readConfig`。这必须在每个派生类中定义，所以我将其设为纯虚拟。

我想重载基类中的`readConfig`函数，基类中的每个重载函数最终都会调用纯虚形式，例如：

```
class Base
{
    // ...
    void readConfig(string, string);                                 // read config from file
    virtual void readConfig(boost::property_tree::ptree, string) =0; // read config from ptree
}

void Base::readConfig(string filename, string entry)
{
     boost::property_tree::ptree pt;
     read_xml(filename, pt);
     readConfig(pt, entry);       // <= Calling pure virtual function!
} 
```

基本上，字符串版本只是纯虚拟形式的快速包装器。当我编译这个时，我得到一个错误：

```
no known conversion for argument 1 from std::string to boost::property_tree::ptree` 
```

看来，非虚拟函数（from `Base`）不被认为是可用的。我检查了我的派生类定义是否正常：

```
class Deriv : public Base
{
    // ...
    void readConfig(boost::property_tree::ptree, string); // implement virtual, error is on this line
}

void Deriv::readConfig( boost::property_tree::ptree pt, string entry)
{
    //...
} 
```

请注意，我省略了很多`const`-correctnes、按引用传递等，以使代码更具可读性。

我能做些什么来解决这个问题？在非虚函数中使用纯虚成员函数是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:30:30.297

请参阅标题为“警告是什么意思：Derived::f(char) 隐藏 Base::f(double)？”的常见问题解答项目。可在常见问题解答的众多镜像中找到，包括常见问题解答的原始[英文版](http://www.parashift.com/c++-faq-lite/new/hiding-rule.html)。

在发布之前检查常见问题解答通常是一个好主意。

很有可能您还会发现标题为“好的，但是有没有办法模拟这种行为，就像动态绑定在我的基类的构造函数中对 this 对象起作用一样？”的常见问题解答项目很有帮助（尽管不是直接的问题）。 ，另外，如果这变得相关，那么您可能也有兴趣阅读[我关于 DBDI 问题的博客文章](http://alfps.wordpress.com/2010/05/12/how-to-avoid-post-construction-by-using-parts-factories/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T19:12:25.533

明显的错字很明显：

```
virtual void readConfug 
```

代替

```
virtual void readConfig 
```

此外，您正在实施的称为**模板方法模式**，仅供参考。

# c# - 解析字符串并确保它包含一个 9 位数字

> ID：10465109
> 
> 赞同：0
> 
> 时间：2012-05-05T19:09:10.903
> 
> 标签：c#, regex, string

我有一个字符串

```
//webcache.googleusercontent.com/search?hl=en&amp;lr=&amp;rlz=1G1GGLQ_IWIL297&amp;q=cache:UadRLVLrpCQJ:http://www.buy.com/prod/pny-geforce-9800-gx2-1gb-512-bit-ddr3-600mhz-pci-e-2-0-dual-dvi-hdmi/207534756.html%2BVCG98GX2XPB%2Bsite%253Abuy.com&amp;ct=clnk 
```

如何检查它是否包含 9 位数字序列？在这个例子中，它有`207534756`

我试过这个：

```
String resultString = Regex.Match(i.ToString(), @"\d+").Value;
if (resultString.Length == 9){} 
```

但它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:12:03.817

尝试使用`@"[0-9]{9}"`. 它将连续匹配 9 个数字。

编辑：更正确的是还要确保周围没有其他数字：`@"(^|[^0-9])[0-9]{9}([^0-9]|$)"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T19:10:59.980

只需使用[`Regex.IsMatch`](http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx)和带有重复长度说明符的正则表达式：

```
if(Regex.IsMatch(i.ToString(), @"\d{9}")) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:12:01.680

更改正则表达式以匹配 9 位数字的字符串：

```
@"\d{9}" 
```

此外，您当前的代码不起作用，因为您使用`Regex.Match`的是仅返回第*一个*匹配项。

您应该使用`Regex.Matches`并循环结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T19:12:28.473

'\d{9}'

请参阅[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)这只是一个很好的参考...还有 RegexBuddy...只是 Google Regex Reference

# apache-flex - Flash Builder - 水平排列 RadioButtonGroup - 可能吗？

> ID：10465111
> 
> 赞同：0
> 
> 时间：2012-05-05T19:09:11.353
> 
> 标签：apache-flex, radio-button, flash-builder

通常， RadioButtonGroup 像这样垂直对齐：

```
O option 1
O option 2
O option 3 
```

但我想要这个：

```
O option 1   O option 2   O option 3 
```

我应该在 Flash Builder 中寻找哪个属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:21:19.440

您可以在组内使用水平布局：

```
<s:Group>
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>
    <s:RadioButton groupName="a"
                   label="one" />
    <s:RadioButton groupName="a"
                   label="two" />
    <s:RadioButton groupName="a"
                   label="three" />
</s:Group> 
```

生产：

![水平单选按钮](../Images/98464cea39bd7513e7c5571fd02aee54.png)

# xaml - 我如何从列表中绘制画布

> ID：10465113
> 
> 赞同：-1
> 
> 时间：2012-05-05T19:09:12.860
> 
> 标签：xaml, wpf-controls, windows-8

所以我有一个包含项目和坐标的列表。我想按照他们的坐标来画它们。

我知道有一个用于定位的 Canvas 控件，但是当我这样做时：

```
<Canvas>
    <ListView ItemsSource="Images" ItemTemplate="ImagesWithCoordinateTemplate"/>
</Canvas> 
```

那么我应该如何制作 ImagesWithCoordinateTemplate 以便我可以将坐标绑定到模型中的坐标？我可以在数据模板中使用 Canvas.Top 和 Canvas.Left 属性吗？我猜列表视图在画布中是一个绝对错误的想法，我只是想让自己清楚。

谢谢，托米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:14:10.813

您可以使用 Canvas.Add(UIElement) 将您的项目直接添加到画布......这不是更合适吗？

# wpf - 来自 WPF 桌面应用程序的 OAuth 2.0 (Google API) 身份验证

> ID：10465118
> 
> 赞同：7
> 
> 时间：2012-05-05T19:09:41.680
> 
> 标签：wpf, google-api, oauth-2.0, google-latitude

我想在我正在开发的 WPF 应用程序中使用 OAuth 2.0，但我被卡住了。OAuth 2.0 似乎通过将您转发到网站并让您确认详细信息来工作。

当然这是一个 WPF 应用程序，我想知道是否有任何解决方法。

具体来说，我正在尝试使用 OAuth 2.0 进行身份验证，以便与位于此处的谷歌纬度 API 一起使用

```
https://developers.google.com/latitude/v1/using#auth 
```

是否有如何从 WPF 桌面应用程序对 OAuth 2.0 进行身份验证的示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T20:29:36.393

在项目存储库中有一个使用 google-api-dotnet-client 库的示例 WPF 应用程序：

[https://github.com/googleapis/google-api-dotnet-client](https://github.com/googleapis/google-api-dotnet-client)

此示例应用程序使用 Tasks API，但它应该很容易改用 Latitude API。

# php - 使用 NetBeans 和 XDebug 进行调试时没有输出

> ID：10465125
> 
> 赞同：0
> 
> 时间：2012-05-05T19:10:55.193
> 
> 标签：php, netbeans, ide, xdebug

我遇到了一些奇怪的问题，在将我的 PHP 升级到 5.4 后，我在 NetBeans 7.0.1 中调试时遇到了问题。当调试会话处于活动状态时，浏览器不会显示任何输出，但调试器会正常运行。我可以在我的应用程序中设置断点，它们可以正常工作，但服务器不会将任何内容返回给浏览器。发送会话结束请求输出后正常工作。

这是我在 php.ini 中的设置

```
zend_extension = c:\php\ext\php_xdebug-2.2.0RC1-5.4-vc9.dll
xdebug.remote_enable=on
xdebug.remote_host=localhost
xdebug.remote_handler=dbgp
xdebug.remote_port=9000
xdebug.remote_log="c:\php\xdebug.log" 
```

根据 xdebug 日志，xdebug 连接到 IDE，IDE 没有任何抱怨。

任何线索都会非常受欢迎。这是我的 php.ini 文件： http: [//pastebin.com/z8LBsmmw](http://pastebin.com/z8LBsmmw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:13:28.267

也许你启用了`output_buffering`？此外，启用 output_handler（如压缩处理程序，例如 gzip）可以缓冲，至少直到达到某个块大小。

浏览器有时也会缓冲。输出一堆空白可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T01:41:04.093

我遇到了同样的问题；有人可能会发现我的解决方案很有用。

除了关闭`output_buffering`和任何输出处理程序，正如@goat 已经提到的，你必须打开`implicit_flush`.

正如[PHP 手册](http://php.net/manual/en/outcontrol.configuration.php)所述：

> 将此更改为**TRUE**告诉 PHP 告诉输出层在每个输出块之后自动刷新自身。这相当于在每次调用 print 或 echo 以及每个*HTML*块之后调用 PHP 函数[flush() 。](http://php.net/manual/en/function.flush.php)
> 
>  *在 Web 环境中使用 PHP 时，打开此选项会严重影响性能，通常建议仅用于调试目的。*

# java - 格式化int方法java

> ID：10465128
> 
> 赞同：2
> 
> 时间：2012-05-05T19:11:04.777
> 
> 标签：java, format, int

是否有任何“格式化”`int`这种方式的方法：假设我有一个值为 1000000 的 int。我想`int`在 textview 中设置它，但我希望它显示为 1 000 000 或 1.000.000。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:17:08.590

请参阅[本教程](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)。我认为它应该教你如何格式化你的数字，包括整数和实数。

至于您的具体问题，请参见此处：

```
DecimalFormatSymbols unusualSymbols = new DecimalFormatSymbols();
unusualSymbols.setDecimalSeparator(',');
unusualSymbols.setGroupingSeparator('.');
String pattern = "#,###,###";
int value = 1000000;
DecimalFormat myFormatter = new DecimalFormat(pattern, unusualSymbols);
String output = myFormatter.format(value);
System.out.println(value + " " + pattern + " " + output); 
```

这打印出来：

```
1000000 #,###,### 1.000.000 
```

这是同一站点中示例的修改代码。我演示了您想要的格式。

# c - 数组名称和指向c中第一个元素的指针之间的区别

> ID：10465143
> 
> 赞同：0
> 
> 时间：2012-05-05T19:13:17.157
> 
> 标签：c

据我所知，数组名称就像指向第一个元素的指针。但是：

```
int c[]={0,1,2};
printf("%d \t %d",c,&c[0]); //Different values,Why? 
```

还有为什么`*c=0`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T19:17:28.197

只是一个猜测：您在一个具有 64 位指针和 32 位`int`. 您的代码将两个指针值传递给`printf`，然后将它们解释为`int`值；这可能会将 64 位指针的两半打印为两个单独的整数。

在将指针转换为 之后，您应该使用`%p`而不是打印指针。`%d``void*`

# javascript - iMacros：使用带有 EVAL 的 Javascript 替换变量中的文本

> ID：10465153
> 
> 赞同：0
> 
> 时间：2012-05-05T19:14:21.340
> 
> 标签：javascript, regex, replace, escaping, imacros

我在 Firefox 上使用 iMacros 自动下载我的 Wells Fargo PDF 银行对账单，并为文件提供链接的名称，例如“ **Statement 04/22/12 (597K)** ”

但是，我不能在文件名中使用斜杠（Windows 限制...）。所以我试图用dash**替换****正斜杠**。

 **下面是我的 iMacro。我在以下行收到错误代码：

```
SET !VAR1 EVAL("var s=\"{{!EXTRACT}}\"; s.replace(/\//g, "-");") 
```

我的 javascript 或我的 Regex 不起作用，我不知道为什么。我在这两种语言上都不强 - 我试图尽可能地从其他示例中复制，但没有成功。如果你能帮忙，那就太好了。谢谢。

```
VERSION BUILD=5010424 RECORDER=CR
' SET !ERRORIGNORE YES

TAB OPEN
TAB T=2
URL GOTO=https://online.wellsfargo.com/login
TAG POS=1 TYPE=INPUT:TEXT FORM=ID:Signon ATTR=ID:username CONTENT=XXX
SET !ENCRYPTION TMPKEY
TAG POS=1 TYPE=INPUT:PASSWORD FORM=ID:Signon ATTR=ID:password CONTENT=XXX
TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:Signon ATTR=NAME:continue&&VALUE:Sign<SP>On
TAG POS=1 TYPE=A ATTR=TXT:View<SP>online<SP>statements

SET !EXTRACT_TEST_POPUP NO

TAG POS=1 TYPE=A ATTR=TXT:Statement<SP>* EXTRACT=TXT
SET !VAR1 EVAL("var s=\"{{!EXTRACT}}\"; s.replace(/\//g, "-");")    <---- THIS IS THE PROBLEMATIC LINE!!!!!!!!!!!!!!
ONDOWNLOAD FOLDER=D:\Wells<SP>Fargo\CREDIT<SP>CARD\ FILE={{!VAR1}}.pdf
TAG POS=1 TYPE=A ATTR=TXT:Statement<SP>* CONTENT=EVENT:SAVETARGETAS

TAB CLOSE 
```

另外，如果您知道如何在 javascript 中使用 Regex 删除“ **(597K)** ”，那将是锦上添花。（显然，这个文本字符串的值对于每个不同的文件都会不同，所以它必须是动态的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:25:26.033

您错过了转义 中的引号`"-"`，因此结束了 iMacros 字符串而不是开始 JavaScript 字符串。

您还可能在正则`/\//`表达式中遇到问题，因为我怀疑 iMacros 会吃掉`\/`并将其变成`/`，从而使 JS 留下无效的文字`///`。它必须是`/\\//`。

此外，如果`!EXTRACT`变量包含引号、反斜杠或换行符，它将直接将它们注入 JavaScript 代码，破坏 JS 字符串文字并可能执行任意脚本。

这些是嵌套转义上下文的许多问题的示例。`split`您可以通过使用备用非冲突引号来避免前两个，并通过使用简单的字符串替换/`join`成语来摆脱正则表达式文字：

```
SET !VAR1 EVAL("'{{!EXTRACT}}'.split('/').join('-').split(' (')[0]") 
```

但这仍然留下了 JS 注入问题。快速浏览一下手册，似乎 iMacros 没有任何可用的字符串处理功能，因此您将无法手动执行 JS-string-literal-replace，或者实际上只是从内部执行`/`-to`-`替换宏。那将是明智的做法。从字符串创建可执行代码几乎总是一件需要努力避免的灾难性错误。

[一边吐槽：从手册上看，iMacros 的存在让我真的很不开心。它为您提供了一种完全任意但无能的自制脚本语言，而不仅仅是使用已经可用的 JavaScript，然后让您无论如何都去 JS 做任何超出可笑琐碎的事情......并且没有给您提供在两者之间安全地传输值的工具. 这个软件还有什么意义？自从 4GL 的黑暗日子以来，我没有因为试图解决错误的语言设计而感到沮丧。这太可怕了。人们用这个？]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:14:00.177

您的任务，就像大多数重要的抓取问题一样，可以使用 javascript 来组织您的 imacros 代码更容易地解决

看看这个例子。我不使用富国银行所以我无法测试实际下载但基本骨架在那里

```
run()
function run() {
  // loginResult is null on success
  var loginError = performLogin()
  if (loginError) {
    alert(JSON.stringify(loginError, null, ' '))
    throw new Error(JSON.stringify(loginError))
  }
  // loginResult is null on success
  var extractError = extractStatement()
  if (extractError) {
    alert(JSON.stringify(extractError, null, ' '))
    throw new Error(JSON.stringify(extractError))
  }
  iimDisplay('Download completed successfully')
}

/**
 * @return null on success, error object on failure
 */
function extractStatement() {
  var error,
      code,
      extract
  code = iimPlay('CODE: TAG POS=1 TYPE=A ATTR=TXT:View<SP>online<SP>statements\n'
                 + 'TAG POS=1 TYPE=A ATTR=TXT:Statement<SP>* EXTRACT=TXT')
  if (code !== 1) {
    error = {
      message: 'error extracting statement',
      error: iimGetLastError(),
      errorCode: code
    }
  }
  extract = iimGetLastExtract()

  // #EANF# means Extract Anchor Not Found (ie extract failed)
  if (extract === '#EANF#') {
    error = {
      message: 'error extracting statement',
      error: 'extract not found'
    }
  }

  // the magic line to replace all slashes
  var filename = extract.replace(/\//g, '-')
  // add the .pdf extension
  filename = filename + '.pdf'

  // download with the new filename, the double slashes are needed because
  // javascrtip otherwise views a backslash as an escape character
  var folderPath = 'D:\\Wells<SP>Fargo\\CREDIT<SP>CARD\\'
  var downloadCode = iimPlay('CODE: ONDOWNLOAD FOLDER=' +folderPath + '  FILE=' + filename + '\n'
                             + 'TAG POS=1 TYPE=A ATTR=TXT:Statement<SP>* CONTENT=EVENT:SAVETARGETAS\n'
                            + 'TAB CLOSE')

  if (downloadCode !== 1) {
    error = {
      message: 'failed to download statement',
      error: iimGetLastError(),
      errorCode: downloadCode
    }
    return error
  }

  // download completed correctly
  return null
}

/**
 * @return null on success, error object on failure
 */
function performLogin() {
  var code = iimPlay('CODE: TAB OPEN\n'
                     + 'TAB T=2\n'
                     + 'URL GOTO=https://online.wellsfargo.com/login\n'
                     + 'TAG POS=1 TYPE=INPUT:TEXT FORM=ID:Signon ATTR=ID:username CONTENT=XXX\n'
                     + 'SET !ENCRYPTION TMPKEY\n'
                     + 'TAG POS=1 TYPE=INPUT:PASSWORD FORM=ID:Signon ATTR=ID:password CONTENT=XXX\n'
                     + 'TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:Signon ATTR=NAME:continue&&VALUE:Sign<SP>On\n')

  // code will be 1 on success
  if (code === 1) {
    return null
  }
  var error = {
    message: 'error performing login',
    error: iimGetLastError(),
    errorCode: code
  }
} 
```**

# facebook - 如何将照片从粉丝专页导入 Facebook 个人资料？

> ID：10465156
> 
> 赞同：0
> 
> 时间：2012-05-05T19:15:12.140
> 
> 标签：facebook, post, import, comments, photos

我的 Facebook 页面上有一些带有一些评论的照片。

我想在我的个人资料中导入这些照片。

请问有导入的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:22:28.337

我知道仅将您的个人资料图片与您的朋友评论一起发布是不可能的。如果您想更改您的个人资料，请转到您的时间线。然后你会发现你的空白头像存在左上方。将鼠标重叠到您的空白个人资料图片中。然后您会发现弹出了“编辑配置文件”。单击并选择照片:)

# asp.net - 从 IIS 上托管的 ASP.NET 代码接收 POST 数据

> ID：10465159
> 
> 赞同：1
> 
> 时间：2012-05-05T19:15:16.110
> 
> 标签：asp.net, http-post, http-get

有谁知道正确的 ASP.NET 代码来接收从 Objective-C 发布的图像文件？此文件（例如 image1.png）将保存到 IIS 服务器文件夹中。请注意，iOS 设备上“不允许”“文件控制”。假设使用以下objective-c代码：

```
request = NSMutableUOLRequest requestwithURL:url;
assert[request != nil];
request setHTTPMethod:@"POST"];
request setHTTPBodyStream:self.consumerStream];

................ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:22:43.483

看起来您只是将图像作为请求流发送。在这种情况下，您可以获取[Request.InputStream](http://msdn.microsoft.com/en-us/library/system.web.httprequest.inputstream.aspx)并将其写入文件：

```
ImagePOSTHandler : IHttpHandler {
    void ProcessRequest(HttpContext context) {
        using (var fs = new FileStream(context.Server.MapPath("~/App_Data/file.jpg"))) {
           context.Request.InputStream.CopyTo(fs);
        }
    }
} 
```

如果您不使用 .NET 4，则需要手动复制流而不是使用 CopyTo。

# ios - Ad Hoc 分发失败

> ID：10465160
> 
> 赞同：1
> 
> 时间：2012-05-05T19:15:48.667
> 
> 标签：ios, itunes, distribution

iTunes 安装失败后，我在 iOS 设备记录器上得到了这个。我会很高兴得到一些帮助。

```
May  5 22:09:05 unknown installd[849] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
May  5 22:09:05 unknown installd[849] <Error>: 00381000 verify_signer_identity: Could not copy validate signature: -402620394
May  5 22:09:05 unknown installd[849] <Error>: 00381000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.ZPtjaK/foo_extracted/Payload/BaBus.app
May  5 22:09:05 unknown installd[849] <Error>: 00381000 install_application: Could not preflight application install
May  5 22:09:05 unknown SpringBoard[52] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=1
May  5 22:09:05 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 0
May  5 22:09:05 unknown SpringBoard[52] <Notice>: MultitouchHID: detection mode: 255->0 (deferring until bootloaded)
May  5 22:09:05 unknown SpringBoard[52] <Notice>: MultitouchHID: device bootloaded
May  5 22:09:05 unknown SpringBoard[52] <Notice>: MultitouchHID: detection mode: 0->0
May  5 22:09:06 unknown installd[849] <Error>: 00381000 handle_install: API failed
May  5 22:09:06 unknown installd[849] <Error>: 00381000 send_message: failed to send mach message of 71 bytes: 10000003
May  5 22:09:06 unknown installd[849] <Error>: 00381000 send_error: Could not send error response to client 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:39:07.510

我猜这个项目或配置文件有一些早于 Xcode4 的部分。

在某处您将`get-task-allow`权利设置为 true，并且需要将其设置为 false。根据[其他答案](https://stackoverflow.com/a/1026124)，这是允许其他进程（如调试器）附加所必需的；但不允许临时分发。

但在 XCode 4 中，您根本不需要设置权利。来自[发行说明](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TROUBLESHOOTING_GUIDE-CODE_SIGNING_ENTITLEMENTS)（强调我的）

> **我在 Xcode 中定义了一个自定义代码签名权利文件，但我需要它吗？**
> 
> 如果您在 Target > Build Settings 中定义自定义代码签名权利文件，您可以尝试完全删除该配置并重新构建/重新提交。通常情况下，代码签名权利的定义是不必要的。如果您的应用程序使用自定义钥匙串访问共享或 iCloud，您只需指定自定义代码签名权利文件。否则，请从 Xcode 项目的 Target > Build Settings 上的所有构建配置中删除 Code Signing Entitlements 配置，重新构建并重新尝试提交/验证。
> 
> ...
> 
> *如果您不确定是否需要定义代码签名权利文件，最安全的做法是从 Target > Build Settings 中删除配置，直到您确定需要为止*。

# php - MySQL 查询将查找对多个用户名使用相同 IP 地址的用户

> ID：10465167
> 
> 赞同：1
> 
> 时间：2012-05-05T19:16:54.143
> 
> 标签：php, mysql, ip-address, unique

我已经在这个问题上做了一些功课，我很确定它会涉及到自己加入一张桌子，但我还没有完全做到。

我有一个带有“帖子”表的论坛。它存储论坛上每个帖子的 ipaddress、userid、userid 和 postid。

我正在尝试获取一个我可以每周运行的查询，以便向我输出在此期间已被多个用户 ID 使用的 IP 地址列表 - 以及多个用户 ID 使用相同 IP 地址的所涉及的 postid。

到目前为止，我已经从其他人的类似问题中得到了这个：

```
SELECT t1.userid,t2.userid, t1.username, t2.username, t1.ipaddress, t2.ipaddress, t1.postid, t2.postid
FROM qvb_post t1
INNER JOIN qvb_post t2 ON t1.ipaddress=t2.ipaddress AND t1.userid!=t2.userid
WHERE 
t1.dateline > 1335897698 AND t2.dateline > 1335897698 
```

但它返回了许多不必要的行 IMO，例如它以两种方式返回每个重复项 - 既好像 userid 1 使用了 userid 2 的 ipaddress，又好像 userid2 使用了 userid1 的地址。

日期线是几天前的。

理想情况下，我只想按顺序查看 IP 地址列表以及重复的用户名并为每个帖子重复，这样我就可以使用 PHP 并制作一份报告，输出 IP 地址、使用它的用户名（用户 ID） ，以及他们创建的 postid。

我知道两个人拥有相同的 IP 地址有很多正当理由，请放心，不会仅仅因为出现在此报告中而对任何人采取严厉的行动。

提前感谢您提供的任何帮助。

为了清楚起见，我对 PHP 很好，这只是我需要帮助的查询。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T19:22:43.543

这应该给你一个开始：

```
SELECT ipaddress, GROUP_CONCAT(DISTINCT username)
FROM qvb_post
GROUP BY ipaddress
HAVING COUNT(DISTINCT username) > 1
ORDER BY COUNT(DISTINCT username) DESC 
```

它向您显示多个不同用户名使用的 IP 地址，并为您提供每个 IP 地址的这些用户名的逗号分隔列表。如果您愿意，您可以将其扩展为还包括帖子 ID。

# css - 如何用不同颜色制作两个不同的单词，在一个 div 中更改为相同的颜色？

> ID：10465175
> 
> 赞同：0
> 
> 时间：2012-05-05T19:17:44.557
> 
> 标签：css

谁能帮我这个？我有一个 div，在 div 里面有一个图像和两个不同的文本。整个 div 是一个链接，但是当我越过 div 并且两个文本都变为白色时，我想让这两个单词具有不同的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:29:36.137

你没有给出任何`HTML`代码，所以只是一个想法（使用 jquery）

**HTML**

```
<div id="myDiv">
    <img src="http://gpsarakis.com/images/icon_jquery.png" />
    Hello World
</div>​ 
```

**JS**

```
$(function(){
    var myDiv=$('#myDiv');
    var txt=myDiv.text().split(' ');
    var theWord=txt[txt.length-1];
    myDiv.html(myDiv.html().replace(theWord, '<span class="red">'+theWord+'</span>'));

    myDiv.hover(function(e){
        $(this).css('color','white').find('span.red').toggleClass('white');
    },
    function(e){
        $(this).css('color','black').find('span.white').toggleClass('white');
    });
});​ 
```

[**演示。**](http://jsfiddle.net/heera/BZJDK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:34:24.860

如果您不想为此使用 JS，那么您可以执行以下操作：例如您的 HTML：

```
<div>
    <img src='...' alt=''/>
    <span class='first'>Your text</span>
    <span class='second'>Your second text</span>
</div> 
```

和风格：

```
div:hover {
    color: white;
}

div:hover .first {
      background: red;
}
div:hover .second {
      background: yellow;
} 
```

这样做的好处是您可以在跨度中包含多个单词。@Sheikh 在评论您的问题时向您提出了类似的建议。

# php - 仅抓取页面标题

> ID：10465177
> 
> 赞同：3
> 
> 时间：2012-05-05T19:18:16.840
> 
> 标签：php, web-crawler

我一直在寻找互联网，希望这是可能的，我基本上只需要获取网页的标题而无需其他任何东西。

网络爬虫可能需要很长时间才能执行任务，因为他们必须在检查页面之前加载页面，这对于我想要实现的目标来说效率很低......这是我到目前为止所拥有的

**php代码**

```
$url = 'http://www.ebay.com/itm/300702997750#ht_500wt_1156';
$str = file_get_contents($url);
$title = ''; 

if(strlen($str)>0){
   preg_match("/\<title\>(.*)\<\/title\>/",$str,$titleArr);
   $title = $titleArr[1];
} 
```

我想知道是否可以只抓取页面的一部分（例如页面的前 2000 个字符）。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:20:10.373

您可以使用 substr 来获取前 1000 个字符，或者，您可以使用

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/');
curl_setopt($ch, CURLOPT_RANGE, '0-500');
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);
echo $result; 
```

那只会下载前 500 个字节。你可以通过运行类似这样极其丑陋的垃圾代码来解决这个问题：

```
$url = 'http://www.example.com/';
$range = array();
$repeats = 10;

function average($a){
  return array_sum($a)/count($a) ;
}

for ($i=0;$i<$repeats;$i++) {
    $time_start = microtime(true);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RANGE, '0-500');
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($ch);

    $time_end = microtime(true);
    $time = $time_end - $time_start;
    curl_close($ch);
    $range[] = $time;
}
echo "With range: average = ".round(average($range),2)." seconds (Min: ".round(min($range),2).", Max: ".round(max($range),2).")\n";

$range = array();

for ($i=0;$i<$repeats;$i++) {
    $time_start = microtime(true);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($ch);

    $time_end = microtime(true);
    $time = $time_end - $time_start;
    curl_close($ch);
    $range[] = $time;
}
echo "Without range: average = ".round(average($range),2)." seconds (Min: ".round(min($range),2).", Max: ".round(max($range),2).")\n"; 
```

如果我在我的网站（[http://www.focalstrategy.com/](http://www.focalstrategy.com/)）上运行它，我会得到：

```
With range: average = 0.38 seconds (Min: 0.35, Max: 0.41)
Without range: average = 0.56 seconds (Min: 0.53, Max: 0.7) 
```

针对[http://en.wikipedia.org/wiki/PHP](http://en.wikipedia.org/wiki/PHP)，我得到：

```
With range: average = 0.11 seconds (Min: 0.05, Max: 0.5)
Without range: average = 0.48 seconds (Min: 0.34, Max: 0.78) 
```

针对[堆栈溢出](https://stackoverflow.com/)，我得到：

```
With range: average = 1.31 seconds (Min: 1.1, Max: 1.46)
Without range: average = 1.37 seconds (Min: 1.18, Max: 1.7) 
```

在[eBay 上](http://www.ebay.com/)，我得到：

```
With range: average = 1.75 seconds (Min: 1.56, Max: 1.99)
Without range: average = 1.74 seconds (Min: 1.51, Max: 2.14) 
```

通过测试可以看到 SO 和 eBay 不支持范围请求。

总而言之，支持这一点的网站会得到加速，那些不支持的网站不会，你只会得到整个代码。

# playframework - 玩2.0，获取活跃路由/url/Call？

> ID：10465182
> 
> 赞同：5
> 
> 时间：2012-05-05T19:19:07.863
> 
> 标签：playframework, playframework-2.0

我正在为我的应用程序创建一个分页器。

我不知道如何获取当前路线/判断页面/“呼叫”是否处于活动状态。

index.scala.html 中的代码

```
@if(page.getTotalPageCount() > 0){
<div class="pagination">
    <ul>
    @for(i <- 0 to page.getTotalPageCount()-1){
        <li@if(@routes.NewsHandler.index(i) == ?){ class="active"}><a href="@routes.NewsHandler.index(i)">@(i+1)</a></li>
    }
    </ul>
</div>
} 
```

所以基本上。

```
if(@routes.NewsHandler.index(i) == ?){ class="active"} 
```

有任何想法吗？

编辑，我找到了一个可行的解决方案：

```
@if(request().path().toString().equals(routes.NewsHandler.index(i).toString())){ class="active"} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-05T20:55:47.037

目前没有标准的方法来了解`Handler`请求的电流。

# ruby-on-rails - 如何在 Rails 控制台中重新加载模型？

> ID：10465183
> 
> 赞同：9
> 
> 时间：2012-05-05T19:19:36.093
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
> rvm list
rvm rubies

=* ruby-1.9.2-p290 [ i686 ]
   ruby-1.9.3-p194 [ i686 ]

> rails -v
Rails 3.1.1 
```

相关，但没有回答：[是否有 Rails 控制台命令（Rails 3+）来重新加载更改的代码？](https://stackoverflow.com/questions/6602897/is-there-a-rails-console-command-rails-3-to-reload-changed-code)

我正在使用 Rails 控制台尝试找出为什么我的模型中的方法没有被调用。该模型位于 ./app/models/product.rb 中。我正在将一种方法从被调用更改`self.trim_history`为`trim_history`. 我还在纠结何时调用方法 as`self.do_stuff`或 just `do_stuff`。

好吧，在解决这个问题的过程中，我遇到了`reload!`. 我的理解是这`reload!`将再次加载所有模型和控制器，但这似乎不起作用。当我调试我的代码时，我更改为的行`do_stuff`仍然显示`self.do_stuff`在调试器中。

我试图用 解决这个`reload!`问题，没有修复。重新加载后我已经从数据库中重新加载了对象，没有修复。我已经直接用 加载了模型`load './app/models/product.rb'`，然后从 db 加载了对象，没有修复。我已验证该对象正在更改为`tail`.

在 Rails 控制台中重新加载模型的最佳方法是什么？每次我的模型代码更改时，我是否必须重新启动控制台？有没有办法在不重新加载控制台的情况下转储所有现有模型及其代码？

**编辑**：这变得陌生。我现在怀疑我的代码正在重新加载，但调试器没有反映新代码。当我单步执行代码时，旧代码在那里，但正在执行新代码。我通过添加一个`raise`--`raise`在调试器中从不显示但它被提出来测试了这一点。笏？

我需要对调试器做些什么来让它看到重新加载的代码吗？这看起来像一个错误...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-05T19:43:42.523

`reload!`不会重新初始化现有对象，它只是重新加载代码。如果您创建该类的新实例，它应该反映更改。

# c# - 如何从内存映射文件中获取 int

> ID：10465184
> 
> 赞同：2
> 
> 时间：2012-05-05T19:19:41.450
> 
> 标签：c#, memory-mapped-files, memory-mapping

我有一个带有空格分隔数字的文件。它的大小约为 1Gb，我想从中获取数字。我决定使用内存映射文件来快速阅读，但我不明白该怎么做。我试着下一步做：

```
var mmf = MemoryMappedFile.CreateFromFile("test", FileMode.Open, "myFile");
var mmfa = mmf.CreateViewAccessor(0, 0, MemoryMappedFileAccess.Read);
var nums = new int[6];
var a = mmfa.ReadArray<int>(0, nums, 0, 6); 
```

但如果“test”在 num[0] 中只包含“01”，我得到 12337。12337 = 48*256+49。我在互联网上搜索过，但没有找到关于我的问题的任何信息。仅关于字节数组或进程间通信。你能告诉我如何在 num[0] 中得到 1 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:56:59.957

以下示例将以可能的最快方式从内存映射文件中读取 ASCII 整数，而无需创建任何字符串。MiMo 提供的解决方案要慢得多。它确实以 5 MB/s 的速度运行，这对您没有多大帮助。MiMo 解决方案的最大问题是它确实为每个字符调用了一个方法（读取），这会花费高达 15 倍的性能。如果您最初的问题是您遇到性能问题，我想知道您为什么接受他的解决方案。您可以使用哑字符串阅读器获得 20 MB/s 并将字符串解析为整数。通过方法调用获取每个字节确实会破坏您可能的读取性能。

下面的代码确实将文件映射为 200 MB 块，以防止填满 32 位地址空间。然后它会使用非常快的字节指针扫描缓冲区。如果不考虑本地化，整数解析很容易。有趣的是，如果我确实创建了映射视图，那么获取指向视图缓冲区的指针的唯一方法不允许我从映射区域开始。

我认为这是 .NET 框架中的一个[错误，](http://connect.microsoft.com/VisualStudio/feedback/details/537635/no-way-to-determine-internal-offset-used-by-memorymappedviewaccessor-makes-safememorymappedviewhandle-property-unusable)在 .NET 4.5 中仍未修复。SafeMemoryMappedViewHandle 缓冲区按照操作系统的分配粒度进行分配。如果你前进到某个偏移量，你会得到一个返回的指针，它仍然指向缓冲区的开始。这真的很不幸，因为这在解析性能上造成了 5MB/s 和 77MB/s 之间的差异。

```
Did read 258.888.890 bytes with 77 MB/s

using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.IO.MemoryMappedFiles;
using System.Runtime.InteropServices;

unsafe class Program
{
    static void Main(string[] args)
    {
        new Program().Start();
    }

    private void Start()
    {
        var sw = Stopwatch.StartNew();
        string fileName = @"C:\Source\BigFile.txt";//@"C:\Source\Numbers.txt";
        var file = MemoryMappedFile.CreateFromFile(fileName);
        var fileSize = new FileInfo(fileName).Length;
        int viewSize = 200 * 100 * 1000;
        long offset = 0;
        for (; offset < fileSize-viewSize; offset +=viewSize ) // create 200 MB views
        {
            using (var accessor = file.CreateViewAccessor(offset, viewSize))
            {
                int unReadBytes = ReadData(accessor, offset);
                offset -= unReadBytes;
            }
        }

        using (var rest = file.CreateViewAccessor(offset, fileSize - offset))
        {
            ReadData(rest, offset);
        }
        sw.Stop();
        Console.WriteLine("Did read {0:N0} bytes with {1:F0} MB/s", fileSize, (fileSize / (1024 * 1024)) / sw.Elapsed.TotalSeconds);
    }

    List<int> Data = new List<int>();

    private int ReadData(MemoryMappedViewAccessor accessor, long offset)
    {
        using(var safeViewHandle = accessor.SafeMemoryMappedViewHandle)
        {
            byte* pStart = null;
            safeViewHandle.AcquirePointer(ref pStart);
            ulong correction = 0;
            // needed to correct offset because the view handle does not start at the offset specified in the CreateAccessor call
            // This makes AquirePointer nearly useless.
            // http://connect.microsoft.com/VisualStudio/feedback/details/537635/no-way-to-determine-internal-offset-used-by-memorymappedviewaccessor-makes-safememorymappedviewhandle-property-unusable
            pStart = Helper.Pointer(pStart, offset, out correction);
            var len = safeViewHandle.ByteLength - correction;
            bool digitFound = false;
            int curInt = 0;
            byte current =0;
            for (ulong i = 0; i < len; i++)
            {
                current = *(pStart + i);
                if (current == (byte)' ' && digitFound)
                {
                    Data.Add(curInt);
                  //  Console.WriteLine("Add {0}", curInt);
                    digitFound = false;
                    curInt = 0;
                }
                else
                {
                    curInt = curInt * 10 + (current - '0');
                    digitFound = true;
                }
            }

            // scan backwards to find partial read number
            int unread = 0;
            if (curInt != 0 && digitFound)
            {
                byte* pEnd = pStart + len;
                while (true)
                {
                    pEnd--;
                    if (*pEnd == (byte)' ' || pEnd == pStart)
                    {
                        break;
                    }
                    unread++;

                }
            }

            safeViewHandle.ReleasePointer();
            return unread;
        }
    }

    public unsafe static class Helper
    {
        static SYSTEM_INFO info;

        static Helper()
        {
            GetSystemInfo(ref info);
        }

        public static byte* Pointer(byte *pByte, long offset, out ulong diff)
        {
            var num = offset % info.dwAllocationGranularity;
            diff = (ulong)num; // return difference

            byte* tmp_ptr = pByte;

            tmp_ptr += num;

            return tmp_ptr;
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        internal static extern void GetSystemInfo(ref SYSTEM_INFO lpSystemInfo);

        internal struct SYSTEM_INFO
        {
            internal int dwOemId;
            internal int dwPageSize;
            internal IntPtr lpMinimumApplicationAddress;
            internal IntPtr lpMaximumApplicationAddress;
            internal IntPtr dwActiveProcessorMask;
            internal int dwNumberOfProcessors;
            internal int dwProcessorType;
            internal int dwAllocationGranularity;
            internal short wProcessorLevel;
            internal short wProcessorRevision;
        }
    }

    void GenerateNumbers()
    {
        using (var file = File.CreateText(@"C:\Source\BigFile.txt"))
        {
            for (int i = 0; i < 30 * 1000 * 1000; i++)
            {
                file.Write(i.ToString() + " ");
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:46:29.440

您需要解析文件内容，将字符转换为数字 - 如下所示：

```
List<int> nums = new List<int>();
long curPos = 0;
int curV = 0;
bool hasCurV = false;
while (curPos < mmfa.Capacity) {
  byte c;
  mmfa.Read(curPos++, out c);
  if (c == 0) {
    break;
  }
  if (c == 32) {
    if (hasCurV) {
      nums.Add(curV);
      curV = 0;
    }
    hasCurV = false;
  } else {
    curV = checked(curV*10 + (int)(c-48));
    hasCurV = true;
  }
}
if (hasCurV) {
  nums.Add(curV);
} 
```

假设这`mmfa.Capacity`是要读取的字符总数，并且文件仅包含由空格分隔的数字（即没有结束行或其他空格）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:21:35.977

48 = 0x30 = '0'，49 = 0x31 = '1'

所以你得到了真正的字符，它们只是 ASCII 编码的。

字符串 "01" 需要 2 个字节，它们可以放在一个`int`中，因此您可以将它们都放在一个中`int`。如果要单独获取它们，则需要请求`byte`s 数组。

* * *

编辑：如果需要将“01”解析为常量`1`，即从ASCII表示形式转换为二进制，则需要采用其他方式。我会建议

1.  不要使用内存映射文件，
2.  使用 StreamReader 逐行读取文件（请参见[此处](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)的示例）
3.  使用 string.Split 将每一行拆分为块
4.  使用 string.Parse 将每个块解析为数字

# asp.net - @Html.HiddenFor 的时间戳引发错误输入不是有效的 Base-64 字符串

> ID：10465188
> 
> 赞同：1
> 
> 时间：2012-05-05T19:19:55.530
> 
> 标签：asp.net, asp.net-mvc-3, hidden-field

我`@Html.HiddenFor(model => model.timestamp)`在我的 asp.net mvc 视图中添加了一个。但提交视图后，我收到以下错误

```
The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.FormatException: The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. 

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

那么可能是什么问题，请记住，我采用了相同的方法来添加`@Html.HiddenFor(model => model.timestamp)`代表其他模型的其他视图，并且它们运行良好。导致错误的整个视图如下所示：-

```
@model Medical.Models.Patient

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>
@section scripts{
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>}

    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Patient</legend>

            @Html.HiddenFor(model => model.PatientID)
           @Html.HiddenFor(model => model.timestamp)

            <div class="editor-label">
                @Html.LabelFor(model => model.FirstName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.FirstName)
                @Html.ValidationMessageFor(model => model.FirstName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.FatherName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.FatherName)
                @Html.ValidationMessageFor(model => model.FatherName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.ThirdName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.ThirdName)
                @Html.ValidationMessageFor(model => model.ThirdName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.FamilyName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.FamilyName)
                @Html.ValidationMessageFor(model => model.FamilyName)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.DateOfBirth)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.DateOfBirth)
                @Html.ValidationMessageFor(model => model.DateOfBirth)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.NationalityID, "Country")
            </div>
            <div class="editor-field">
                @Html.DropDownList("NationalityID", String.Empty)
                @Html.ValidationMessageFor(model => model.NationalityID)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.GenderID, "Gender")
            </div>
            <div class="editor-field">
                @Html.DropDownList("GenderID", String.Empty)
                @Html.ValidationMessageFor(model => model.GenderID)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Weight)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Weight)
                @Html.ValidationMessageFor(model => model.Weight)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Height)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Height)
                @Html.ValidationMessageFor(model => model.Height)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.RegisterDate)
            </div>
            <div class="editor-field">

                 @Html.TextBoxFor(model => model.RegisterDate , new { value = "FL", disabled = "disabled" })
                @Html.ValidationMessageFor(model => model.RegisterDate)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Telephone)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Telephone)
                @Html.ValidationMessageFor(model => model.Telephone)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Email)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Email)
                @Html.ValidationMessageFor(model => model.Email)
            </div>
            @Html.HiddenFor(model => model.timestamp)
            <p>
              @Html.HiddenFor(model => model.PatientID)
              @Html.HiddenFor(model => model.RegisterDate)
                <input type="submit" value="Save" />
            </p>
        </fieldset>
    }

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div> 
```

**：：： - 更新 - ：：：**

这是模型部分类：-

```
namespace Medical.Models
{
    [MetadataType(typeof(Patient_Validation))]
    [Bind(Exclude = "Country,Gender,Visits")]
    public partial class Patient
    {}} 
```

和模型验证：-

```
public class Patient_Validation
    {
       [DisplayFormat(DataFormatString = "{0:f}", ApplyFormatInEditMode = true)]
       [Display(Name = "Register Date")]
       public double RegisterDate { get; set; }

       [Timestamp]
       public Byte[] timestamp { get; set; }

       //[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        [DisplayFormat(DataFormatString = "{0:f}", ApplyFormatInEditMode = true)]
       [Display(Name = "Date Of Birth")]
       public double DateOfBirth { get; set; }

       [StringLength(50,MinimumLength=2)]
       [Display(Name = "First Name")]
       [MaxWords(10)]
       public string FirstName { get; set; }

         [StringLength(50, MinimumLength = 2)]
         [Display(Name = "Father Name")]
         [MaxWords(10)]
       public string FatherName { get; set;} 

          [StringLength(50,MinimumLength=2)]
          [Display(Name = "Third Name")]
          [MaxWords(10)]
       public string ThirdName { get; set; }

         [StringLength(50,MinimumLength=2)]
         [Display(Name = "Family Name")]
         [MaxWords(10)]
       public string FamilyName { get; set; 
 [Required(ErrorMessage= "Gender is Required")]
        [Display(Name = "Gender")]
        public int GenderID { get; set; }

        [RegularExpression(@"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}",ErrorMessage="Please Insert Valid Email Address")]

        public string Email { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:33:20.020

您可以将 @Html.Serialize 用于字节数组。

在 HTML.Serialize 帮助器上查看此链接：

[http://weblogs.asp.net/imranbaloch/archive/2011/07/26/using-the-features-of-asp-net-mvc-3-futures.aspx](http://weblogs.asp.net/imranbaloch/archive/2011/07/26/using-the-features-of-asp-net-mvc-3-futures.aspx)

# android - 我可以在画布上使用抗锯齿进行绘制吗？

> ID：10465191
> 
> 赞同：57
> 
> 时间：2012-05-05T19:20:46.380
> 
> 标签：android, graphics, android-canvas, antialiasing

我可以在画布上使用抗锯齿进行绘制吗？

我需要我的圆圈和线条有光滑的边缘。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-05T20:41:51.467

绘图操作想要`Paint`。在这个`Paint`你设置`Paint.setFlags(Paint.ANTI_ALIAS_FLAG)`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-05T19:25:38.190

看一下这个。它相当使用平滑的边缘.. [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)

获得抗锯齿所需的油漆属性是：

```
 mPaint = new Paint();
     mPaint.setAntiAlias(true); 
```

绘图用途：

```
 mPath = new Path();
     mPath.reset();
     mPath.moveTo(x, y);//can be used where to trigger the path 
```

onDraw 方法应包含：

```
 canvas.drawPath(mPath, mPaint); 
```

将 mPath 和 mPaint 声明为全局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-22T08:24:16.500

您可以`ANTI_ALIAS_FLAG`在 Paint 构造函数中提供`Paint(int)` 。该`ANTI_ALIAS_FLAG`标志在绘制时启用抗锯齿。启用此标志将导致所有支持抗锯齿的绘制操作都使用它。

或者您可以稍后使用**`setFlags(int)`**方法设置此标志

**在 Kotlin 中的示例实现：**

```
 //Paint
private var indicatorPaint: Paint = Paint(Paint.ANTI_ALIAS_FLAG).apply {
    isAntiAlias = true
    color = fillColor
    strokeWidth = lineThickness.toFloat()
    style = Paint.Style.STROKE
} 
```

# android - 从 MySql 获取 JSON 数据

> ID：10465197
> 
> 赞同：0
> 
> 时间：2012-05-05T19:22:25.480
> 
> 标签：android, mysql, xml, database, json

我使用 JSON 创建了一个数据库和 php 文件：

```
= Connection Established - Database selected 
[{"latitude":"43222121","longitude":"2112212","description":"O masina rosie cu farurile stinse."},{"latitude":"33211322","longitude":"3211313","description":null}] 
```

我正在使用一个只有一个的 XML `TextView`。这是课程：

```
public class ConnectMySql extends Activity {

 TextView httpStuff;
 HttpClient client;
 JSONObject json;
 final static String URL = "http://79.114.48.119/RadarsMySql.php";

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    httpStuff = (TextView) findViewById(R.id.tvHttp);
    client = new DefaultHttpClient();
    new Read().execute("latitude");
}

public JSONObject lastTweet(String username) throws ClientProtocolException, IOException,JSONException{
    StringBuilder url = new StringBuilder(URL);
    url.append(username);

    HttpGet get = new HttpGet(url.toString());
    HttpResponse r = client.execute(get);
    int status = r.getStatusLine().getStatusCode();
    //if(status == 200){
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONArray timeline = new JSONArray(data);
        JSONObject last = timeline.getJSONObject(0);
        return last;

    //}else{ 
        //Toast.makeText(ConnectMySql.this, "error", Toast.LENGTH_LONG);
        //return null;

    //}
}

public class Read extends AsyncTask<String, Integer, String>{

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        try {
            json = lastTweet("");
            return json.getString(params[0]);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        httpStuff.setText(result);
    }

}

} 
```

我遵循了一个从 Tweeter 获取数据的教程，它可以工作，但在我的网站上却没有。

任何人都可以通过提供有用的建议来帮助我，或者更好地告诉我我做错了什么吗？

这是我放入 Log.i- 之后的 logcat：

```
05-05 19:44:07.109: W/System.err(717): org.json.JSONException: Expected literal value at character 0 of =

05-05 19:44:07.109: W/System.err(717):      

05-05 19:44:07.109: W/System.err(717):    Connection Established - Database selected[{"latitude":"43222121","longitude":"2112212","description":"O masina rosie cu farurile stinse."},{"latitude":"33211322","longitude":"3211313","description":null}]
05-05 19:44:07.109: W/System.err(717):  at org.json.JSONTokener.syntaxError(JSONTokener.java:446)
05-05 19:44:07.109: W/System.err(717):  at org.json.JSONTokener.readLiteral(JSONTokener.java:281)
05-05 19:44:07.109: W/System.err(717):  at org.json.JSONTokener.nextValue(JSONTokener.java:107)
05-05 19:44:07.109: W/System.err(717):  at org.json.JSONArray.<init>(JSONArray.java:87)
05-05 19:44:07.109: W/System.err(717):  at org.json.JSONArray.<init>(JSONArray.java:103)
05-05 19:44:07.109: W/System.err(717):  at com.project.radars.ConnectMySql.lastTweet(ConnectMySql.java:53)
05-05 19:44:07.119: W/System.err(717):  at com.project.radars.ConnectMySql$Read.doInBackground(ConnectMySql.java:71)
05-05 19:44:07.130: W/System.err(717):  at com.project.radars.ConnectMySql$Read.doInBackground(ConnectMySql.java:1)
05-05 19:44:07.130: W/System.err(717):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-05 19:44:07.130: W/System.err(717):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-05 19:44:07.130: W/System.err(717):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-05 19:44:07.130: W/System.err(717):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
05-05 19:44:07.130: W/System.err(717):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
05-05 19:44:07.130: W/System.err(717):  at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:52:45.920

你的问题来了：我已经连接到你的网站并收到了这个字符串：

```
= Connection Established - Database selected[{"latitude":"43222121","longitude":"2112212","description":"O masina rosie cu farurile stinse."},{"latitude":"33211322","longitude":"3211313","description":null}] 
```

但是，您尝试将其加载到 中`JSONArray`，这当然会失败，因为`= Connection Established - Database selected`前缀不是任何合法 json 数组的一部分。

您需要先截断此前缀，然后才能解析数组。最好的选择是从 php 代码中删除前缀（我很确定您手动添加以记录）。但是，如果这对您来说很困难，您可以在 java 端进行。在解析 json 数组之前添加以下行：

```
String data = EntityUtils.toString(e);
data = data.substring(data.indexOf("[")); 
```

# jquery - 使用 jQuery 移动锚的 href

> ID：10465199
> 
> 赞同：1
> 
> 时间：2012-05-05T19:22:35.887
> 
> 标签：jquery

我想使用 jQuery 将 href 的值从一个链接移动到另一个链接。我已经选择了它，但是我无法将它注入到新的 ancor 标签中。有一个更好的方法吗？

HTML：

```
<ul class="menu">
    <li><a href="1">1</a></li>
    <li><a href="2">2</a></li>
    <li><a href="3">3</a></li>
    <li><a href="4">4</a></li>
    <li class="active"><a href="5">5</a></li>
    <li><a href="6">6</a></li>
    <li><a href="7">7</a></li>
    <li><a href="8">8</a></li>
</ul>
<a class="GO!" href="">go!</a> 
```

问：

```
var goLink = $('li.active > a').attr("href");
$(.go).attr("href", 'golink'); 
```

[http://jsfiddle.net/nEePk/3/](http://jsfiddle.net/nEePk/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:25:04.447

你不能有一个类`GO!`，所以把它改成：

```
<a class="go" href="">go!</a> 
```

jQuery：

```
var goLink = $('li.active > a').attr("href");
$('.go').attr("href", golink);   // remove "''" from golink 
```

**[演示 JSFIDDLE](http://jsfiddle.net/roXon/nEePk/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:25:14.123

您的代码存在一些问题，但您的总体想法非常正确。

```
$(".go").attr("href", function(){
  return $("li.active > a").attr("href");
}); 
```

请务必从元素的类名中删除任何无效字符。“去！” 是无效的，我想我怀疑你知道这一点，因为你的选择器只是`.go`.

```
<a href="#" class="go">Go!</a> 
```

# c++ - 初始化 SDL_Mixer 给出错误“没有可用的音频设备”

> ID：10465202
> 
> 赞同：9
> 
> 时间：2012-05-05T19:22:49.430
> 
> 标签：c++, ubuntu, sdl

我正在开发一个使用 SDL/SDL_Mixer 播放 wav 文件的 C++ 应用程序。我一直在 Mac 上开发应用程序，没有太多问题。但是，我确实需要此应用程序才能在 Linux 上运行，因此我将 VirtualBox 放在装有 Ubuntu 12.04 LTS 的 Windows 7 机器上。编译工作正常，直到我真正尝试初始化系统。然后，SDL_Mixer 给出错误“没有可用的音频设备”。

这是引发错误的代码：

```
using namespace std;

void simple_sound_init() {
    if (SDL_Init(SDL_INIT_AUDIO) == -1) {
        fprintf(stderr, "init SDL error: %s\n", SDL_GetError());
        SDL_Quit();
        exit(1);
    }

    if (Mix_OpenAudio(SOUNDSAMPLERATE, MIX_DEFAULT_FORMAT, 1, 1024) != 0) {
        fprintf(stderr, "initialize audio error: %s\n", Mix_GetError());
        Mix_CloseAudio();
        SDL_Quit();
        exit(1);
    }

    Mix_ChannelFinished(simple_sound_channel_finised);
} 
```

我得到的确切错误是：

```
initialize audio error: No available audio device 
```

P/S：我在网上广泛搜索了解决方案，并尝试检查库安装等。但是，由于我可能遗漏了什么，欢迎任何基本的库建议，我会确认我设置它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-12T14:26:48.373

在相同的情况下，我遇到了完全相同的问题，但使用的是 ubuntu 14.04LTS（虚拟机，W7 作为主机）。但问题不在于 VM 配置（声音适用于其他 ubuntu 应用程序）。

我在那里找到了答案： http://forums.libsdl.org/viewtopic.php?t=7609& [sid=40fdb9756b8e22e1b8253cda3338845f](http://forums.libsdl.org/viewtopic.php?t=7609&sid=40fdb9756b8e22e1b8253cda3338845f)

感谢 Ryan C. Gordon，他写道：

*“如果您构建自己的 SDL，您可能没有 PulseAudio（或 ALSA）的开发头文件，因此它正在尝试使用 /dev/dsp，这在许多现代 Linux 系统上并不存在（因此，SDL_Init(SDL_INIT_AUDIO) “*

我已经从源代码有效地构建了 SDL 和 SDL-mixer，但没有任何来自 pulseAudio 或 ALSA 的标头。安装提到的库并重新编译 SDL 和 SDL_mixer (v1.2) 后，声音工作正常。

如果问题仍然存在，他还谈到了另一种解决方案：

*“如果您没有构建自己的 SDL，也许您可​​以强制它使用不同的音频路径：SDL_AUDIODRIVER=pulse ./mytestprogram 或 SDL_AUDIODRIVER=alsa ./mytestprogram”*

我没有尝试过，因为第一个解决方案对我来说是一个很好的解决方案。

# java - 透明 Java 窗口上的不透明组件

> ID：10465203
> 
> 赞同：1
> 
> 时间：2012-05-05T19:23:08.050
> 
> 标签：java, swing, transparency

我已经成功地使 java 窗口透明，但是在这些窗口上叠加不透明组件时遇到了麻烦。JFrame.setOpacity(0) 和 AWTUtilities setWindowOpacity 都将透明度传递给组成组件。此外， JFrame.setBackground(0,0,0,0) 以某种方式使所述组件失去透明度。

我怎样才能解决这个问题？

测试类：分别为透明背景、setOpacity 和 AWTUtility

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import java.awt.Color;

public class test {
public static void main(String[] args){
JFrame frame = new JFrame("test");
JLabel label = new JLabel("Label text");
frame.setUndecorated(true);
frame.setBackground(new Color(0,0,0,128));
frame.add(label);
frame.pack();
frame.setVisible(true);
}
}

public class test2 {

public static void main(String[] args){
JFrame frame = new JFrame("test");
JLabel label = new JLabel("Label text");
frame.setUndecorated(true);
frame.setOpacity(.50f);
frame.add(label);
frame.pack();
frame.setVisible(true);
}
}

import com.sun.awt.AWTUtilities;
import java.lang.reflect.Method;
import java.awt.Window;

public class test3 {
public static void main(String[] args){
JFrame frame = new JFrame("test");
JLabel label = new JLabel("Label text");
frame.setUndecorated(true);

try {
Class<?> awtUtilitiesClass = Class.forName("com.sun.awt.AWTUtilities");
Method mSetWindowOpacity = awtUtilitiesClass.getMethod("setWindowOpacity", Window.class, float.class);
mSetWindowOpacity.invoke(null, frame, Float.valueOf(0.50f));
} catch (Exception x){}     

frame.add(label);
frame.pack();
frame.setVisible(true);
}
} 
```

编辑：我在 Windows 上尝试过 setBackground(0,0,0,0) ，它可以工作，但在 Linux (xfce) 上不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:31:56.293

使用 AWTUtilties.setOpaque(Window, boolean)，你可以得到你想要的。这是一个半透明标签的示例（带有红色背景）：

```
import java.awt.Color;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

import com.sun.awt.AWTUtilities;

public class Test3 {

    protected static void initUI() {
        JFrame frame = new JFrame("test");
        JLabel label = new JLabel("Label text");
        label.setOpaque(true);
        label.setBackground(new Color(255, 0, 0, 128));
        frame.setUndecorated(true);

        AWTUtilities.setWindowOpaque(frame, false);
        frame.add(label);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

以下是 alpha chanel 的一些不同值的屏幕截图（在白色背景上制作）：

Alpha 设置为 128（半透明）：

![半透明标签](../Images/abd488aa5354eceacd0967ffb5b92c30.png)

Alpha 设置为 0（完全透明）：

![完全透明的标签](../Images/1f20a6fcaf599cfb6aabaf705c740fcb.png)

Alpha 设置为 255（完全不透明）：

![完全不透明](../Images/47e8dacf9f60e8ec882996947e20e10f.png)

# c - 从文件中读取字符串后打印未知字符

> ID：10465206
> 
> 赞同：0
> 
> 时间：2012-05-05T19:23:21.880
> 
> 标签：c

我有一个从文件中读取的函数：

```
void input(char* buffer, FILE* fp)
{
    char temp[100];
    fgets(temp,100,fp);
    strcpy(buffer,temp);
    buffer [strlen(buffer)-1]=0;
} 
```

我提出：

```
1
2
3
4
5 
```

最后一行以换行符结束。
我尝试以这种方式读取文件：

```
FILE* fp=fopen("myfile.txt","r");
while(!feof(fp))
{
    char buffer[100];
    input(buffer,fp);
    puts(buffer);
} 
```

它成功读取了所有五个字符串："1","2","3","4","5" 并打印它们，但是在打印第 5 个字符串后，出现分段错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:30:06.703

这是 C（和其他语言，真的）中常见的反模式，用于设置像你这样的循环来检查`!feof(fp)`. 问题是这个函数只有在由于 EOF 导致读取失败*后才返回 true。*问题是您在检查读取是否成功之前使用了读取的结果。

我建议你检查 的返回值，如果有 EOF`fgets()`就会返回。`NULL`将该值传播回来并从您的`input()`函数中返回。然后在你的循环条件中使用它。

补充一点，段错误本身很可能在您调用`strcpy()`. 失败时`fgets()`，您尝试复制未初始化数据的缓冲区，该缓冲区可能包含任何内容，并且`strcpy()`可能会找到比缓冲区长得多的“字符串”。即使它碰巧找到更短的东西，你的结果仍然是垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:30:55.783

好像

```
buffer [strlen(buffer)-1]=0; 
```

在最后一个空白行，strlen 为 0，并且缓冲区被设置在其范围之外。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-05T19:26:37.353

表示字符串结尾的字符不是 '0' 而是 '\0' 所以替换这一行：

```
 buffer [strlen(buffer)-1]=0; 
```

经过

```
 buffer [strlen(buffer)-1]='\0'; 
```

应该没问题:)

# c++ - 如何使用 libjpeg-turbo 编译 OpenCV？

> ID：10465209
> 
> 赞同：13
> 
> 时间：2012-05-05T19:23:46.993
> 
> 标签：c++, opencv, libjpeg-turbo

我在我的一个 C++ 项目中在 OS X Lion 上使用 OpenCV 2.3.1。虽然我的项目按原样运行良好，但它在很大程度上依赖于 JPEG 解码和编码。我想通过使用 libjpeg-turbo 来获得加速，但我找不到与 libjpeg-turbo 链接的正确方法。根据我的骇客尝试和我编辑的文件，我最终会出现编译错误或无用的 OpenCV 库（一切都正确编译，但我无法打开或写入 JPEG 文件，尽管 C++ 项目中没有出现错误）。

谁能解释如何使用 libjpeg-turbo 编译 OpenCV 以实现更快的 JPEG 解码/编码？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-05T20:29:52.660

要构建 OpenCV 2.4.0，`libjpeg-turbo`您需要：

1.  构建`libjpeg-turbo`为静态库
2.  使用以下命令配置 OpenCV：

`cmake -DWITH_JPEG=ON -DBUILD_JPEG=OFF -DJPEG_INCLUDE_DIR=/path/to/libjepeg-turbo/include/ -DJPEG_LIBRARY=/path/to/libjpeg-turbo/lib/libjpeg.a /path/to/OpenCV`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-06-29T08:48:55.947

OpenCV 现在已经完全用 libjpeg-turbo 取代了 libjpeg： [https ://github.com/opencv/opencv/pull/11497](https://github.com/opencv/opencv/pull/11497)

它在当前的 master 中，将在即将到来的 3.4.2 中可用

# python - Python - 如何规范化视频文件中的音频？

> ID：10465212
> 
> 赞同：0
> 
> 时间：2012-05-05T19:23:59.880
> 
> 标签：python, audio, video

通过“标准化”，我的意思是“增加/减少整体音量，使最大值达到最大动态余量”。

我是学校新闻组的一员，老师们会发送广告，但它们通常太大声或太小声。我想创建一个程序来规范化音频（无压缩或限制）。它通常必须与 .mov 和 .wmv 文件一起使用。谁能指导我一些好的教程、库等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:11:44.680

从 AV 容器中解复用音频流并解压缩：您需要 ffmpeg 库的包装器。例如尝试 pyffmpeg、AVbin、pymedia。

归一化：使用每个样本整数的 Numpy 数组，找到最大值，然后将数组相乘以放大/衰减音量。考虑使用 ReplayGain。

重新压缩音频并与原始视频流重新复用到一个新容器中：与上述相同的库，但更可能导致困难，特别是对于专有容器和编解码器。（例如，我相信 ffmpeg 只能产生一个非常旧的 WMA 版本。）

与使用现成的应用程序相比，这并不简单，我不确定它是否一定值得。例如 ffmpeg 本身有一个命令行，你可以批处理脚本，例如 avidemux 有命令行和 GUI 界面。

另外，我怀疑您会发现简单的峰值归一化不会使您在使有效音量水平相似方面走得太远；通常你也需要使用一些动态范围压缩。

# java - Android - Spinner 异步下载无法正常运行

> ID：10465218
> 
> 赞同：0
> 
> 时间：2012-05-05T19:24:35.917
> 
> 标签：java, android, download, spinner

激活微调器中的任何按钮后，都会出现进度对话框，但没有任何反应。我用按钮完美地工作，但在过渡到微调器时不明白这里有什么问题。有人发现下载无法正确启动的原因吗？

```
public class SpinnerActivity extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private ProgressDialog mProgressDialog;

Spinner spDownloadFrom;
private ArrayAdapter<CharSequence> spinnerArrayAdapter;
String url[] = {"http://www.becker.cl/bases.pdf",
        "http://www.pitt.edu/documents/campusmap0607.pdf", "http://www.aara.ca/reg3317/web_page_doc.pdf",
        "www.dataprotection.ie/documents/guidance/GuidanceFinance.pdf", "http://www.fmbb2012.com/JumpingQualifica1.pdf",
        "http://www.consulatdumaroc.ca/coloniefh22012.pdf", "http://www.rgrdlaw.com/media/cases/140_Complaint.pdf" };
String name[] = { "bases.pdf", "campusmap0607.pdf", "web_page_doc.pdf", "GuidanceFinance.pdf",
        "JumpingQualifica1.pdf", "coloniefh22012.pdf", "140_Complaint.pdf", };

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mProgressDialog = new ProgressDialog(SpinnerActivity.this);
    mProgressDialog.setMessage("Please be patient, file downloading...");
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    spDownloadFrom = (Spinner) findViewById(R.id.Spinner01);

    spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item, name);
    spinnerArrayAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spDownloadFrom.setAdapter(spinnerArrayAdapter);

    spDownloadFrom.setOnItemSelectedListener(new SpinnerListener(
            spDownloadFrom));
}

public class SpinnerListener implements OnItemSelectedListener {
    Spinner sp;

    public SpinnerListener(View v) {
        sp = (Spinner) findViewById(v.getId());
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View v, int arg2,
            long arg3) {
        // Call to download class
        startDownload(arg2);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}

private void startDownload(Integer... url) {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile.execute();

}

class DownloadFile extends AsyncTask<String, Integer, String> { // put your
                                                                // download
                                                                // code

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected String doInBackground(String... aurl) {
        try {

            URL url = new URL(aurl[0]);
            URLConnection connection = url.openConnection();

            connection.connect();
            int fileLength = connection.getContentLength();
            int tickSize = 2 * fileLength / 100;
            int nextProgress = tickSize;

            Log.d(

            "ANDRO_ASYNC", "Lenght of file: " + fileLength);

            InputStream input = new BufferedInputStream(url.openStream());

            String path = Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files/" + name;
            File file = new File(path);
            file.mkdirs();
            File outputFile = file;

            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024 * 1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                if (total >= nextProgress) {
                    nextProgress = (int) ((total / tickSize + 1) * tickSize);
                    this.publishProgress((int) (total * 100 / fileLength));
                }
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            mProgressDialog.dismiss();

        } catch (Exception e) {
        }
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        Log.d("Downloading", progress[0]);

    }

    @Override
    protected void onPostExecute(String unused) {

        File file = new File(Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName()
                + "/files/" + name);
        Intent testIntent = new Intent(Intent.ACTION_VIEW);
        testIntent.setType("application/pdf");
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(file);
        intent.setDataAndType(uri, "application/pdf");
        try {
            startActivity(intent);
        } catch (ActivityNotFoundException e) {
            Toast.makeText(SpinnerActivity.this,
                    "No Application Available to View PDF",
                    Toast.LENGTH_LONG).show();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:31:51.360

在您的`startDownload`方法中，您传入的`url`是一个`String`类型数组。在`doInBackground`你的`AsyncTask`中，你只使用`url`你设置为的第一个索引`""`，所以你传入一个空的`String`。

要传入您期望的 URL，请将`startDownload`方法更改为接受一个`int`值。然后在`onItemSelected`方法中，传入您命名为的位置`arg2`（参数名称应该是父、视图、位置和id，按此顺序。更容易理解它们的含义）。然后，当您打电话时`downloadFile.execute`，请通过`url[position]`。

**编辑**

将您的下载方法更改为如下所示：

```
private void startDownload(int position) {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile.execute(url[position]);
} 
```

假设您使用的 URL 有效，这应该会给您预期的结果。此外，您的对话不会因为您忘记调用而`mProgressDialog.dismiss()`消失`onPostExecute`。

# c# - 90度图像旋转和重置EXIF旋转

> ID：10465219
> 
> 赞同：3
> 
> 时间：2012-05-05T19:24:50.877
> 
> 标签：c#, image-processing, exif

我有批量调整数码照片大小的代码。

有些照片是纵向拍摄的。

对于纵向的照片，我必须旋转它们。

我正在使用以下 C# 代码来旋转照片：

```
bmpOrig.RotateFlip(System.Drawing.RotateFlipType.Rotate90FlipNone);
bmpOrig.Save(filename, ImageFormat.Jpeg); 
```

它工作正常（在网络浏览器中显示我想要的方式）。

但是，如果我在 Photoshop（和 HP 照片查看器）中查看新图像，它会显示旋转。

我做了很多研究，我相信有标记图像旋转的 EXIF 数据。

**我的问题是：如何重置此 EXIF 数据以指示图像不需要旋转？**

我正在开发 VS 2010。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:44:54.817

查看`Save`命令是否真的在写入更改？

`Write`也许通过将命令封闭在一个`try/catch`块中来确保？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:46:25.503

据我了解，EXIF 信息存储在 Image 类的属性中，因此请查看它们并删除有问题的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T13:39:48.940

Exif 方向标签 ID 为`0x0112`.

您可以使用`img.GetPropertyItem(0x0112)`它来检索它，然后`img.RemovePropertyItem(0x0112)`将其删除（如果您物理旋转图像以补偿该值）。

有关执行此操作的小型帮助程序类，请参[见此答案（包括完整的源代码）。](https://stackoverflow.com/a/38459903/1233379)

# python - 列表理解中python中的递归函数调用给出的结果与首先将调用结果分配给变量不同

> ID：10465232
> 
> 赞同：2
> 
> 时间：2012-05-05T19:25:56.367
> 
> 标签：python

为什么不这样：

```
def subsets(x):
    if not x:
        return [[]]
    else:
        return [x + y for x in [[], [x[0]]] for y in subsets(x[1:])]

print subsets(['a', 'b']) 
```

产生与此相同的输出：

```
def subsets(x):
    if not x:
        return [[]]
    else:
        z = subsets(x[1:])
        return [x + y for x in [[], [x[0]]] for y in z]

print subsets(['a', 'b']) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T19:28:38.693

问题是您将名称`x`用于两种不同的事物。当您`x`在列表推导中作为变量引入时，它会隐藏`x`函数中定义的变量。结果，`x`您的列表理解中的 final 并不是 `x`您所希望的。

将其中一个重命名`x`为其他名称可以解决问题：

```
def subsets(original_x):
    if not original_x:
        return [[]]
    else:
        return [x + y for x in [[], [original_x[0]]]
                      for y in subsets(original_x[1:])] 
```

我还建议您尝试为变量找到更具描述性的名称。这将减少意外重用名称的可能性。

# php - 使用 jQuery 从数据库中循环 JSON

> ID：10465233
> 
> 赞同：1
> 
> 时间：2012-05-05T19:26:03.793
> 
> 标签：php, javascript, jquery, ajax, json

我使用 AJAX 调用了我的数据库

```
$.post('getdata.php', {passLong: passLong, passLat: passLat},
      function(output){ 
```

输出保存在 getdata.php 中编码的 JSON。我正在尝试循环浏览 JSON

```
 $.each(output, function(){
        console.log(this.CarParkName);
      }); 
```

在控制台中，我只是得到“未定义”。jQuery 每个方法都应该循环遍历 JSON 并在地图上绘制标记，当我将 PHP 放在同一个文件中时，代码可以工作，但是由于使用 AJAX 从数据库中获取数据，所以它不起作用。

我用循环尝试了一些不同的东西，但无法找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:28:53.547

我通常这样做：

```
for(var i in output) {
    console.log(output[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:59:34.770

“我的 JSON 与后者类似，即 [{"Address":"St Nicholas Avenue York Yorkshire","CarParkName":"McArthur Glen Designer Outlet","CarParkRef":"26"}]"

根据评论讨论和您对其他答案的回复，我认为问题在于您处理的是字符串，而不是 javascript 对象。您只需要将字符串解析为对象。（我曾假设您已经在处理解析为 javascript 对象的数据）。

如果字符串看起来完全一样：

```
[{"Address":"St Nicholas Avenue York Yorkshire",
"CarParkName":"McArthur Glen Designer Outlet","CarParkRef":"26"}] 
```

然后这样做：

```
// wrap as an object first, a plain array is not valid json 
var js = $.parseJSON('{"data":' + output + '}');

$.each(js.data, function() {
    console.log(this.CarParkName);
}); 
```

你应该很好。

# c++ - recvfrom 仅捕获发送到 255.255.255.255 的数据包

> ID：10465240
> 
> 赞同：0
> 
> 时间：2012-05-05T19:27:15.370
> 
> 标签：c++, network-programming, udp, recv

我正在解决这个奇怪的问题，recvfrom 仅在捕获目标地址为 255.255.255.255 的广播数据包时才返回。直接发往客户端（即使用客户端 IP）的数据包将被忽略。

现在一些背景知识（你可以跳过它，这只是为了澄清我想要做什么）——我正在尝试实现一个简单的 BOOTP 客户端。我能够创建一个 BOOTREQUEST，并且服务器使用正确的 BOOTREPLY 回复它（使用 wireshark 和我使用 libpcap 编写的简单分析器进行检查）。但是，即使我在wireshark 中看到回复，我也无法在客户端中接收到它，因为它使用客户端的IP 地址作为目的地。

我正在一个网络上尝试这个，我也可以从其他计算机捕获 BOOTP 数据包。我发现 recvfrom 可以接收带有广播地址的 BOOTREPLY 数据包。不好的是这些不是我的，因为我允许服务器使用单播进行回复。

我使用的代码：

```
sockfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
if (sockfd < 0) {
    std::cerr << "Cannot create socket" << std::endl;
    return;
}

int broadcastON = 1;
setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, &broadcastON, sizeof(broadcastON));

sockaddr_in recv_address;
memset((char *) &recv_address, 0, sizeof(recv_address));
recv_address.sin_family = AF_INET;
recv_address.sin_port = htons(68);
recv_address.sin_addr.s_addr = htonl(INADDR_ANY);
int recv_sockfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
if (recv_sockfd < 0)
{
    std::cerr << "Cannot create socket" << std::endl;
    return;
}
if (bind(recv_sockfd, (sockaddr *) &recv_address, sizeof(recv_address)) < 0)
{
    std::cerr << "Cannot bind socket" << std::endl;
    perror("bind");
    return;
}

sniff_bootp packet = createBootpPacket(mac);
sockaddr_in server_address;
memset((char *) &server_address, 0, sizeof(server_address));
server_address.sin_family = AF_INET;
server_address.sin_port = htons(67);
server_address.sin_addr.s_addr = htonl(INADDR_BROADCAST);
if (sendto(sockfd, &packet, sizeof(packet),0,(sockaddr *) &server_address, sizeof(server_address)) < 0)
{
    perror("sendto");
    return;
}
char msg[512];
while(1)
{
    sockaddr_in source_address;
    unsigned int cli_addr_len = sizeof(source_address);
    // HERE IS THE PROBLEM
    // returns only if the destination is broadcast
    int msg_length = recvfrom(recv_sockfd, msg, 512, 0, (sockaddr *) &source_address, &cli_addr_len);
    if (msg_length < 0) {
        perror("rcvfrom");
        continue;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:43:36.593

好的，我花了几天时间才弄明白，但我终于修好了。

问题实际上是我试图从中接收的数据包不是给我的。让我详细说明。在 bootp 协议中，您向您发送 MAC 地址，服务器使用广播或与 MAC 地址连接的 IP 发送回复。问题是我使用了另一台计算机的 MAC 地址，所以回复是发给那台计算机而不是我的。

就是这样——如果您没有收到任何东西，请确保您是目的地。

# jquery - 为什么 next() 在 jquery 中不起作用

> ID：10465241
> 
> 赞同：1
> 
> 时间：2012-05-05T19:27:38.733
> 
> 标签：jquery, next

我无法弄清楚为什么我不能在 jquery 中选择下一个列表项。但是，我可以在 p 标签之后拿起 span 标签。为什么是这样？请不要只引用我的 jquery 手册，因为我显然不理解它。提前致谢。

```
<ul>
    <li id="one" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">1<li>
    <li id="two" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">2<li>
    <li id="three" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">3<li>
    <li id="four" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">4<li>
    <li id="five" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">5<li>
</ul>

<div class="div">
    <p>Hello</p>
    <span>Bye</span>
</div> 
```

我的jQuery：

```
$(function(){
    $('#two').next().css('color','red');
    $('.div p').css('color','red');
}); 
```

**编辑：我的 li 标签没有关闭。这导致了问题**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:35:43.820

你没有关闭`li`标签（我已经修复）

```
<ul>
    <li id="one" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">1</li>
    <li id="two" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">2</li>
    <li id="three" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">3</li>
    <li id="four" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">4</li>
    <li id="five" style="display:block; width: 20px; height: 20px; background: lightgrey; margin:4px;">5</li>
</ul>

<div class="div">
    <p>Hello</p>
    <span>Bye</span>
</div>​ 
```

**JS**

```
$(function(){
    $('#two').next().css('color','red');
    $('.div p').css('color','red');
}); 
```

[**演示。**](http://jsfiddle.net/heera/DF4C7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T19:35:09.377

您不是关闭`li`标签，而是打开新标签。因此，`li`您选择的下一个是空的，而不是可见的，因此您看不到任何结果

所以你正在做`<li>...<li>`的是（在浏览器解析你的 HTML 之后）：

```
<li id="one">1</li>
<li></li>
<li id="two">2</li>
<li></li>                 <-- this one is selected
<li id="three">3/<li> 
```

解决方法是正确关闭标签`<li>...</li>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T19:31:30.177

您的`li`元素末尾缺少“/”：`</li>`<--正确

# asp.net - ASP.Net/Ruby/PHP MVC 网站、jQuery Mobile 和 Phonegap

> ID：10465242
> 
> 赞同：3
> 
> 时间：2012-05-05T19:28:06.633
> 
> 标签：asp.net, ruby-on-rails, asp.net-mvc-3, jquery-mobile, cordova

我有一个 ASP.Net MVC3 应用程序（不管它是 ASP.NET MVC、PHP 还是 RAILS，因为它最终提供的是纯 HTML），它使用 jquery mobile 并且在所有移动浏览器中运行良好。对我来说，下一步是使用 Phonegap 创建一个原生 ios 应用程序。

我的猜测是我所要做的就是在我放入 Phonegap 的 html 页面中，我将连接到页面加载事件并从远程服务器动态加载我的 MVC 视图的内容。

但是，如果其他人做过类似的事情，我正在寻找一些例子。

-提前谢谢尼克

**更新：**我能够通过编写以下 index.html 页面来完成此操作。希望它可以帮助别人。

**仍然存在问题**：但是这样做了...您可能会注意到我正在通过[http://IP:8081](http://IP:8081) URL 请求我的 ASP.NET MVC 页面。这工作正常，它也加载了我的页面......但它不是 jquery 移动格式。所以，如果有人可以在这里帮助我，那就太好了。

**解释：**因为，`ajax.responseText`包含从`<!DOCTYPE html>`标签开始的整个 HTML...我认为很明显，我最终在`<div data-role="page" id="home">` 标签内插入了整个 HTML 页面，这显然是错误的，但我还没有解决方案： (

```
<!DOCTYPE html>
<html>
<head>
    <title>PhoneGap Ajax Sample</title>
    <meta name="viewport" content="width=device-width,initial-scale=1, target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script type="text/javascript"  src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript"  src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript">
        function onDeviceReady() {
            var ajax = new XMLHttpRequest();
            ajax.open("GET", "http://192.168.2.30:8081/", true);
            ajax.send();

            ajax.onreadystatechange = function () {
                alert(ajax.status);
                if (ajax.readyState == 4 && (ajax.status == 200 || ajax.status == 0)) {
                    document.getElementById('home').innerHTML = ajax.responseText;
                }
            }
        }

        $(document).bind("mobileinit", function () {
            alert('mobileinit');
            // Make your jQuery Mobile framework configuration changes here!
            $.support.cors = true;
            $.mobile.allowCrossDomainPages = true;
        });

        document.addEventListener("deviceready", onDeviceReady, false);
    </script>
</head>
<body>
     <div data-role="page" id="home"> 
     </div>
     <div data-role="page" id="search"> 
     </div>
     <div data-role="page" id="recent"> 
     </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T23:37:09.263

为什么不使用 jQuery 助手从远程服务器加载页面。

```
$(document).bind("mobileinit", function () {
     alert('mobileinit');
     // Make your jQuery Mobile framework configuration changes here!
     $.support.cors = true;
     $.mobile.allowCrossDomainPages = true;
     $("#home").load('http://192.168.2.30:8081/ #targetContent');
}); 
```

[load](http://api.jquery.com/load/)方法可以发出请求并将选择器的内容替换为 ajax 请求的结果。它还允许您在 URL 之后提供一个选择器，该选择器将针对您要加载到原始匹配选择器中的远程服务器的特定内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:39:09.920

据我了解，从广义上讲，PhoneGap 有两种选择（我自己没有尝试过。现在我正在学习它们）：

1.  您在 iOS 开发环境中安装 PhoneGap，它允许您直接从 IDE 生成本机 iOS 应用程序
2.  在 PhoneGap 网站上，您上传您的 Web 应用程序，它们会生成您的 iOS（或 Android）应用程序二进制文件。

# winapi - 在 MASM 程序集中打印数组的值

> ID：10465243
> 
> 赞同：0
> 
> 时间：2012-05-05T19:28:12.250
> 
> 标签：winapi, assembly, x86, masm

我是编写汇编代码的新手，我无法使用循环打印出我的数组的值。我的代码打印出计数器的值而不是数组中的值，有人可以解释我做错了什么，还有我如何指向数组的顶部？我尝试过使用不同的寄存器，但似乎没有任何效果。我的教授要求我这样做（如果它看起来效率低下）：

```
 .386
           .model flat
ExitProcess PROTO NEAR32 stdcall, dwExitCode:dword
Include io.h
cr         equ 0DH
Lf         equ 0AH
           .stack 4096
           .data
newline    byte CR, LF, 0
whitespace byte 32,32,0     
arr        dword 10 dup(?)
n          dword 2
string     byte  40 dup(?)
prompt     byte "Please enter a value: ", 0
origArr    byte "Original Array", 0
           .code
_start:
           mov    ecx,n         ; number of values in the array
           lea    ebx,arr       ; address of the array
           sub    edi, edi
top:       cmp    ecx, 0
           je     done
           output prompt
           input  string, 40
           atod   string
           mov    [arr+edi], ecx
           add    edi, 4
           loop   top
done:      output origArr
           mov    ecx, n
           call   myproc

         INVOKE ExitProcess, 0

PUBLIC  _start
myproc proc near32
       .data
val_str byte 11 dup(?), 0
       .code
        push eax
        push edi 
        push ecx
        sub edi,edi              ; index register
top2:   mov eax, [ebx+edi]
        dtoa val_str, eax
        output val_str
        add edi,4                ; modify esi rather than ebx
        loop top2
        pop ecx 
        pop edi
        pop eax
        ret
myproc endp

         END 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:39:09.110

```
mov    [arr+edi], ecx 
```

您正在存储循环计数器，而不是`atod`.

# c# - 更新数据表中的值

> ID：10465245
> 
> 赞同：0
> 
> 时间：2012-05-05T19:28:29.660
> 
> 标签：c#, asp.net, datatable

当相同的书名插入购物车时，我试图更新我的数据表。

```
public bool checkBook(DataTable dt, String title)
{
    bool returnval = false;
    try
    {

        foreach (DataRow dr in dt.Rows)
        {
            String checktitle = dr["Title"].ToString();
            if (title == checktitle)
            {
                int a = Convert.ToInt32(dr["quantity"].ToString());
                dr["quantity"] = a + 1;
                returnval = true;
            }

        }
    }
    catch (Exception ex)
    {
        //do something
    }
    return returnval;
} 
```

数量的初始值为1，但是在提交按钮的时候，数量还是1，但是第三次​​进入的时候，数量才开始增加1。我不明白错误在哪里？

编辑::

```
protected void ListView1_SelectedIndexChanged(object sender, EventArgs e)
{
    String title = ((Label)(ListView1.Items[ListView1.SelectedIndex].FindControl("Title"))).Text; ;
    decimal price = decimal.Parse(((Label)(ListView1.Items[ListView1.SelectedIndex].FindControl("Price"))).Text);

    cart cart = new cart(title, price);

    if (HttpContext.Current.Session["Cart"] != null)
    {
        DataTable shoppingcart = (DataTable)HttpContext.Current.Session["Cart"];
        bool check = checkBook(shoppingcart, title);
        if (check != true)
        {
            ShoppingCart.DataSource = cart.cartrow(shoppingcart);
            ShoppingCart.DataBind();
        }
        else
        {
            // if is true, it suppose to increase the quantity here 

            }

        }
    }

    else
    {

        HttpContext.Current.Session["Cart"] = cart.shoppingCart();
        ShoppingCart.DataSource = cart.shoppingCart();
        ShoppingCart.DataBind();
    }

} 
```

班级：：

```
String title { get; set; }
decimal price { get; set; }
int quantity = 1;
DataTable CartTable;
DataRow tableRow;
public cart(String _title, decimal _price)
{
title = _title;
price = _price;
}
public DataTable shoppingCart()
{
CartTable = new DataTable("cart");

CartTable.Columns.Add("ID", typeof(Int32));
CartTable.Columns["ID"].AutoIncrement = true;
CartTable.Columns["ID"].AutoIncrementSeed = 1;

CartTable.Columns.Add("Title");
CartTable.Columns.Add("Price");
CartTable.Columns.Add("quantity");
CartTable.Columns["quantity"].DataType = typeof(Int32);

tableRow = CartTable.NewRow();
tableRow["Title"] = title;
tableRow["Price"] = price;
tableRow["quantity"] = quantity;
CartTable.Rows.Add(tableRow);
return CartTable;
}

public DataTable cartrow(DataTable _cart)
{

tableRow = _cart.NewRow();
tableRow["Title"] = title;
tableRow["Price"] = price;
tableRow["quantity"] = quantity;
_cart.Rows.Add(tableRow);
return _cart;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:06:34.090

您需要显示更多代码以确定问题所在。您是否绑定到数据表？单击按钮后是否要重新创建它？

无论如何，以下是一些代码，以显示更新按您的预期工作。请注意使用 System.Data.DataSetExtensions 中的通用字段扩展方法。

```
namespace StackOverflowTestCode
{
    using System.Data;
    using Microsoft.VisualStudio.TestTools.UnitTesting;

    [TestClass]
    public class RandomTests
    {
        [TestMethod]
        public void DataTableUpdate_Test()
        {
            DataTable dataTable = new DataTable();
            dataTable.Columns.Add( "Title", typeof( string ) );
            dataTable.Columns.Add( "Quantity", typeof( int ) );

            dataTable.Rows.Add( "TitleOne", 0 );
            dataTable.Rows.Add( "TitleTwo", 0 );
            dataTable.Rows.Add( "TitleThree", 0 );

            DataRow[] rowsToUpdate = 
                dataTable.Select( "Title = 'TitleTwo'" );

            if( rowsToUpdate != null && rowsToUpdate.Length == 1 )
            {
                rowsToUpdate[ 0 ][ "Quantity" ] = 
                    rowsToUpdate[ 0 ].Field<int>( "Quantity" ) + 1;
            }

            // The right row was updated.
            Assert.AreEqual( 1, dataTable.Rows[ 1 ][ "Quantity" ] );

            // The other rows were not updated.
            Assert.AreEqual( 0, dataTable.Rows[ 0 ][ "Quantity" ] );
            Assert.AreEqual( 0, dataTable.Rows[ 2 ][ "Quantity" ] );
        }
    }
} 
```

**编辑**

更新后，唯一立即让我感到奇怪且可能是错误来源的事情如下：

```
HttpContext.Current.Session["Cart"] = cart.shoppingCart(); 
ShoppingCart.DataSource = cart.shoppingCart(); 
```

你为什么要调用该方法两次？

# c# - 如何从用逗号分隔的 DB 中选择不同的值？

> ID：10465248
> 
> 赞同：-2
> 
> 时间：2012-05-05T19:28:46.850
> 
> 标签：c#, asp.net, sql, linq

我有一个前端，包括 2 列，数据库中的关键字 1 和关键字 2，它们位于一个称为关键字的字段中（由 , 分隔）。现在我有一个搜索屏幕，其中有一个关键字作为自动完成文本框，现在为了填充它我需要从数据库中获取单个值，所以我有类似的东西，

```
Keywords
A
A
A,B
B,C
C,E
D,K 
```

现在为了将它们填充为单个 listItem 我需要类似的东西。

```
Keywords
A
B
C
D
k 
```

所以前端不包含和复制它。我不是 SQL 方面的专家，我知道的一种方法是使用 like 从 DB 中获取不同的值，`%entered keywords%`并使用 LINQ 用逗号分隔它们，然后获取不同的值。但这将是一条漫长的道路。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:22:47.230

也许有点晚了，但是一个以不同关键字结尾的替代答案：

```
List<string> yourKeywords= new List<string>(new string[] { "A,B,C", "C","B","B,C" });

var splitted = yourKeywords
    .SelectMany(item => item.Split(','))
    .Distinct(); 
```

不过，这不会直接对数据库起作用。在执行 SelectMany 之前，您必须将 DB 内容读入内存，因为 Split 在 SQL 中没有等效项。然后看起来像

```
var splitted = db.Keywords
   .AsEnumerable()
   .SelectMany(item => item.Split(','))
   .Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:50:27.280

通过使用 string split 和 Linq group by 获取它们

```
 List<string> yourKeywords= new List<string>(new string[] { "A,B,C", "C","B","B,C" });
        List<string> splitted = new List<string>();
        yourKeywords.ForEach(x => splitted.AddRange(x.Split(',')));
     var t =   splitted.GroupBy(x => x); 
```

# html - CSS，粘性页脚

> ID：10465250
> 
> 赞同：-1
> 
> 时间：2012-05-05T19:29:06.953
> 
> 标签：html, css, sticky-footer

我知道，我知道，我以前问过这个问题。不幸的是，我失去了工作。我重新开始，我回到了我的旧帖子（[min-height:100% 在我的容器上不起作用？](https://stackoverflow.com/questions/9860888/min-height100-doesnt-work-on-my-container#comment12571607_9860888)）并且不记得实际的技巧是什么。

所以我会在这里发布我的“实验”的链接，我希望你们（或女孩）可以帮助我，问题是：我希望页脚位于最底部，内容和两个侧边栏连接到页脚的顶部。（另外，滚动条必须消失，哈哈）

[http://www.jbehrens.nl/test/index.html](http://www.jbehrens.nl/test/index.html)

如果有人能够帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:33:15.710

将页脚设置为

```
position: fixed
bottom: 0 
```

然后为您的侧边栏和内容窗格设置一个高度，您可能想要设置

> 溢出：滚动

用于侧边栏和内容窗格。

# ruby-on-rails-3 - 我可以让 Ruby on Rails 控制台更好地记住我的命令历史记录吗？

> ID：10465251
> 
> 赞同：71
> 
> 时间：2012-05-05T19:29:07.460
> 
> 标签：ruby-on-rails-3, rails-console

我在 Ruby on Rails 3.1.1 中使用控制台，我发现它的命令历史记录（向上箭头）非常不稳定。我今天已经在多个控制台会话中运行了`p = Product.by_name 'Acme'`几次`p.add_search_term('Snipe')`命令。

然而，当我重新加载 Ruby on Rails 控制台时，我的命令历史记录中只显示第一个，而不是第二个。有时在我重新加载控制台后它们都在历史记录中。最重要的是，我在历史记录中看到了几天前在按几次向上箭头后的命令。是否有某种我需要更改的配置，或者这是一个错误？

*   Ruby on Rails 3.1.1`
*   红宝石 1.9.2p290`
*   Ubuntu 11.10`

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-05-06T02:17:43.087

从*[如何 - 退出后保留 Rails 或 IRB 控制台命令历史记录](http://www.wetware.co.nz/2010/09/how-to-persist-rails-or-irb-console-command-history-after-exit/)*。

创建或编辑您的`~/.irbrc`文件以包括：

```
require 'irb/ext/save-history'
IRB.conf[:SAVE_HISTORY] = 200
IRB.conf[:HISTORY_FILE] = "#{ENV['HOME']}/.irb-history" 
```

# java - 按类型或类名比较两个类

> ID：10465253
> 
> 赞同：35
> 
> 时间：2012-05-05T19:29:18.623
> 
> 标签：java, oop

需要根据它们实现的类来比较两个对象吗？何时比较使用`getClass()`和何时`getClass().getName()`？这种比较两个 Objects 类类型（名称）的方法有什么区别吗？

```
public abstract class Monster { ... }
public class MonsterTypeOne extends Monster { ... }
public class MonsterTypeTwo extends  Monster { ... }

    Monster monster = MonsterTypeOne();
    Monster nextMonster = MonsterTypeTwo();

if(nextMonster.getClass().getName().equals(monster.getClass().getName()) )// #1

if(nextMonster.getClass().equals(monster.getClass()) )// #2 
```

编辑 1

* * *

关于什么： ？

```
nextMonster.getClass().equals(MonsterTypeOne.class) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-05T19:33:54.690

使用`class.equals()`：

```
if (nextMonster.getClass().equals(monster.getClass())) 
```

或者，因为每个类都像一个单例 - 每个类加载器只有一个实例，并且大多数 JVM 只有一个类加载器 - 你甚至可以使用身份比较：

```
if (nextMonster.getClass() == monster.getClass()) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-05T19:33:43.627

> 这种比较两个 Objects 类类型（名称）的方法有什么区别吗？

是的。如果两个类由不同的 s 加载，则它们可能具有相同的名称`ClassLoader`。

[“Java 类加载器的基础知识”](http://www.javaworld.com/javaworld/jw-10-1996/jw-10-indepth.html)说

> 在最简单的情况下，类加载器创建一个由字符串名称引用的类主体的平面名称空间。

[“Eclipse - 两个虚拟机（和许多类加载器）的故事”](http://www.eclipsezone.com/articles/eclipse-vms/)说

> 这意味着可以一次将两个同名的类加载到 VM 中，前提是它们有两个单独的 ClassLoader

* * *

> 何时比较使用`getClass()`和何时`getClass().getName()`？

如果您想知道两个对象是否属于同一类型，您应该使用`equals`比较两个类的方法——第一个选项。

我无法想象您为什么要这样做，但是如果您想知道具有不同具体类型的两个对象是否具有具有相同完全限定名称的类型，那么您可以使用第二个。如果您不了解 Java 上下文中的“具体类型”和“完全限定名称”，那么您不是在为 Java 编写类型分析代码，所以您不想这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-07T17:51:00.557

我在使用 .equals 比较两个类时遇到了问题。上面提供的解决方案并不完全准确。类不实现 Comparable。

类引用在 JVM 中不一定是真正的单例，因为您可以有多个 ClassLoader。

我正在编写一个 Maven 插件，它在编译后从 bean 中挖掘注释。该插件有一个类加载器，我有自己的类加载器。当比较来自不同加载器的两个同名类时，比较会失败。

Object.equals 的实现如下所示：

```
public boolean More ...equals(Object obj) {
       return (this == obj);
} 
```

因此，您将比较参考。

如果您正在比较类并且您确定只涉及一个类加载器，您可以安全地使用 .equals 或 c1 == c2 但如果您不确定是否应该按名称进行比较：

```
if(c1.getName().equals(c2.getName()) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-13T13:33:31.100

事实上，按名称比较受信任的类是一个弱点。参考[https://cwe.mitre.org/data/definitions/486.html](https://cwe.mitre.org/data/definitions/486.html)

```
if (nextMonster.getClass() == monster.getClass()) 
```

是比较类的正确方法

```
if (nextMonster.getClass().equals(monster.getClass())) 
```

由于@Bohemian提到的同样原因应该仍然有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T11:15:56.620

另一种实现相同目的的方法是覆盖子类中的哈希码。

```
public interface Parent {
}

public static class Child1 implements Parent{
    private String anyfield="child1";

    @Override
    public int hashCode() {
        //Code based on "anyfield"
    }

    @Override
    public boolean equals(Object obj) {
        //equals based on "anyfield"
    }
}

public static class Child2 implements Parent{
    private String anyfield="child2";

    @Override
    public int hashCode() {
        //Code based on "anyfield"
    }

    @Override
    public boolean equals(Object obj) {
        //equals based on "anyfield"
    }
} 
```

现在，如果实现/子类具有相同的具体类型，equals 将返回。

```
public static void main(String args[]){
    Parent p1=new Child1();
    Parent p2=new Child1();
    Parent p3=new Child2();
    System.out.println("p1 and p2 are same : "+p1.equals(p2));
    System.out.println("p2 and p3 are same : "+p2.equals(p3));
} 
```

输出-

```
p1 and p2 are same : true
p2 and p3 are same : false 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-17T11:22:32.570

您可以使用 Class 的内置方法：

```
if(nextMonster.getClass().isAssignableFrom(monster.getClass())) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-11-05T07:19:56.577

如果您有一个数组用于`getClass().getComponentType()`比较其内容类型

```
jshell> var array1 = new int[15]
array1 ==> int[15] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }

jshell> var array2 = new int[10]
array2 ==> int[10] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }

jshell> array1.getClass() == array2.getClass()
$7 ==> true

jshell> array1.getClass().getComponentType()
$8 ==> int

jshell> array1.getClass().getComponentType() == int.class
$12 ==> true 
```

# python - Python fmin_l_bfgs_b 不断地评估函数

> ID：10465255
> 
> 赞同：1
> 
> 时间：2012-05-05T19:29:42.187
> 
> 标签：python, optimization, scipy

我试图在 python 中使用 L-BFGS-B 方法来优化一个函数，在某些情况下它工作正常并且很快找到最小值，但在某些情况下它正在做一些我不完全理解的事情。

特别是，它只会在一次迭代中一遍又一遍地评估我的函数。我通过简单地在我的函数中添加“打印结果”行来验证这种情况正在发生。因此，每次它评估我的函数时，它都会打印函数的值。当我遇到一个糟糕的案例时，我会得到这样的结果：

```
>>> a,b,c=opt.fmin_l_bfgs_b(lambda pars: coalHMM.coalHMMgf(chmm,pars[0],.6,pars[1],.000001,.000001,50000,10000,pars[2],10000,5,10,0,p=1),[.1,.2,10000],bounds=[(.000001,.999999),(.000001,.599999),(4000,100000)],approx_grad=1,iprint=5,epsilon=1e-5,factr=1e5)
RUNNING THE L-BFGS-B CODE

           * * *

Machine precision = 2.220D-16
 N =            3     M =           10

At X0         0 variables are exactly at the bounds
216599.857913
216599.857913
216599.787373
216606.008249
216599.857968

At iterate    0    f=  2.16600D+05    |proj g|=  5.51559D+00
92823.559439
92823.559439
92823.5563853
92829.0821432
92823.559463
92823.5584543
92823.5584543
92823.5554005
92829.0811585
92823.5584784
92823.5545111
92823.5545111
92823.5514573
92829.0772149
92823.554535
92823.5387401
92823.5387401
92823.5356864
92829.061443
92823.5387644
92823.475657
92823.475657
92823.4726033
92828.9983542
92823.475681
92823.2233259
92823.2233259
92823.2202723
92828.7460035
92823.2233502
92822.2139978
92822.2139978
92822.2109435
92827.7365952
92822.2140218
92818.1766824
92818.1766824
92818.1736284
92823.6989603
92818.1767058
92802.0273601
92802.0273601
92802.0243085
92807.5483614 
```

正如你所看到的，它只是不断地评估，评估，评估......问题是每次评估大约需要一分钟，所以这是相当长的等待的结果......

我的直觉是，这是行搜索的问题，但我对细节的了解还不够，无法真正弄清楚发生了什么……

# animation - css3 动画（逐帧）

> ID：10465256
> 
> 赞同：0
> 
> 时间：2012-05-05T19:29:43.077
> 
> 标签：animation, css, png, sprite

我的动画坏了，我不知道如何修复它-这是在浏览器中：http: [//morxmedia.com/animation-test.html](http://morxmedia.com/animation-test.html)

我需要它顺利通过精灵表中的每个 150px X 150px 块

这是代码：

```
<style>
#loading {
    background: transparent url(http://www.morxmedia.com/wp-content/themes/default/library/images/loading-animation.png) no-repeat 0px 0px;
    background-size: 1px 9px;
    width: 1px;
    height: 1px;
    -webkit-animation-name: loading;
    -webkit-animation-duration: 1.3s;
    -webkit-animation-iteration-count: infinite;
    -webkit-transform: scaleX(150) scaleY(150);
    -webkit-transform-origin: top left;
}
    @-webkit-keyframes loading
    {
        0.000%
        {
            background-position: 0 -0px;
        }
        12.000%
        {
            background-position: 0 -1px;
        }
        24.000%
        {
            background-position: 0 -2px;
        }
        36.000%
        {
            background-position: 0 -3px;
        }
        48.000%
        {
            background-position: 0 -4px;
        }
        60.000%
        {
            background-position: 0 -5px;
        }
        72.000%
        {
            background-position: 0 -6px;
        }
        84.000%
        {
            background-position: 0 -7px;
        }
        96.000%
        {
            background-position: 0 -8px;
        }
        100.000%
        {
            background-position: 0 -9px;
        }
    }
</style>

<div id="loading"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:03:46.020

您对像素和缩放使用的技巧让我头疼。这是我将如何处理它：

```
<style>
#loading {
    background: transparent url(http://www.morxmedia.com/wp-content/themes/default/library/images/loading-animation.png) no-repeat 0px 0px;
    width: 150px;
    height: 150px;
    -webkit-animation-name: loading;
    -webkit-animation-duration: 0.5s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
}
    @-webkit-keyframes loading
    {
        0.000%
        {
            background-position: 0 -0px;
        }
        10.999%
        {
            background-position: 0 -0px;
        }
        11.000%
        {
            background-position: 0 -150px;
        }
        21.999%
        {
            background-position: 0 -150px;
        }
        22.000%
        {
            background-position: 0 -300px;
        }
        32.999%
        {
            background-position: 0 -300px;
        }
        33.000%
        {
            background-position: 0 -450px;
        }
        43.999%
        {
            background-position: 0 -450px;
        }
        44.000%
        {
            background-position: 0 -600px;
        }
        54.999%
        {
            background-position: 0 -600px;
        }
        55.000%
        {
            background-position: 0 -750px;
        }
        65.999%
        {
            background-position: 0 -750px;
        }
        66.000%
        {
            background-position: 0 -900px;
        }
        76.999%
        {
            background-position: 0 -900px;
        }
        77.000%
        {
            background-position: 0 -1050px;
        }
        87.999%
        {
            background-position: 0 -1050px;
        }
        88.000%
        {
            background-position: 0 -1200px;
        }
        100.000%
        {
            background-position: 0 -1200px;
        }
    }
</style>

<div id="loading"></div> 
```

如果您将持续时间更改为慢一点，您会发现抖动是由于您正在使用的动画精灵表中的一些缺陷造成的。

# php - 返回字符串中每个句子的第一个字母

> ID：10465259
> 
> 赞同：0
> 
> 时间：2012-05-05T19:30:05.737
> 
> 标签：php

我不确定从哪里开始，但我希望有人可以提供帮助。

当用户提交消息时，我想检查字符串并返回每个句子的第一个字母并将其放入数组中。基本上我想要字符串中的第一个字母和句号（如果有的话）之后的每个字母都放在一个数组中。

过去有没有人这样做过？甚至可能吗？

希望你能帮忙

Cj

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:33:47.693

将字符串拆分为句子 - 使用`explode()`或`preg_split()`与标点符号一起使用。`mb_substr($sentence, 0, 1);`然后循环所有句子并使用不要忘记在句子开头或结尾从空格中修剪所有句子来获取第一个字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:35:51.090

您可以使用如下正则表达式：

```
preg_match_all("/\b\w/", $yourString, $matches); 
```

然后 $matches 将包含一个数组，其中包含您要查找的每个字符的条目。

# vb.net - 将 Winforms 应用程序部署到客户端计算机应用程序启动失败

> ID：10465262
> 
> 赞同：1
> 
> 时间：2012-05-05T19:30:25.923
> 
> 标签：vb.net, winforms, deployment

这是从 OP 编辑​​的。这是一个 VB .NET 4.0 WinForms 应用程序。这个项目涉及一个 mysql 数据源。目标 CPU 设置为任意。问题：在任何安装了 VS 2010 和 mysql 连接器的计算机上运行此应用程序时，它运行完美。在原始系统上安装（即未安装开发人员环境）但该机器确实安装了 .net framework 4.0 并且没有安装连接器的 mysql 服务器时，应用程序立即下降。所以为了解决这个问题，我安装了 mysql 连接器 MSI。这会立即解决客户端系统上的问题并运行。问题是，正如您从我的安装程序设置中看到的那样，MYSQL 所需的 2 个 DLL 文件实际上包含在安装包中，因此不需要单独安装。那么为什么我需要使用图像中的安装程序来安装 mysql 连接器？有任何想法吗？下面是程序使用的引用的屏幕截图，据我认为，除了 2 个 MYSQL DLL 文件之外，我不需要使用我的应用程序部署任何这些 DLL 文件。那么为什么会失败呢？？下面是显示项目参考​​以及正在安装在应用程序文件夹中的安装程序文件的图像。如图所示，2 个 mysql dll 文件将放在应用程序文件夹中。还有一个屏幕截图显示了应用程序文件夹中每个 dll 的属性。

![参考](../Images/498ee6889127a54cd18d31a84d381a73.png) ![应用程序安装文件](../Images/f8e008d2b7302d22e65f5b463147ff5c.png) ![MySQL.Data.DLL 设置](../Images/2c2bec7ed5db53319cfb004a92ab296c.png) ![MySQL.Data.Entity.DLL 设置](../Images/32cc96f232917eda17f2a1274ad2aa83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:23:34.953

你是在自问自答。

> 但是那台机器确实安装了.net framework 4.0，并且**没有安装连接器**的mysql服务器应用程序立即下降。

您不需要安装连接器 msi 包，但您需要在应用程序目录中包含两个 DLL 文件。每当您有一些依赖项时，您都需要将其与您的应用程序一起部署。

**编辑**从我的评论中引用的解决方案：

> 从您的更新看来，您的程序集版本不匹配，并且引用设置为特定版本 = True。在输出目录中检查开发人员机器上程序集的版本号，并检查您在客户端系统上安装的版本。（您可以将鼠标悬停在 DLL 上以阅读工具提示上的版本）。您可以尝试通过右键单击参考并选择属性将特定版本设置为 false，或者只是确保部署相同版本的程序集。您的程序正在寻找其编译的版本

# sql - ScalaQuery 多对多

> ID：10465263
> 
> 赞同：3
> 
> 时间：2012-05-05T19:30:26.570
> 
> 标签：sql, scala, scalaquery

有人知道如何在 Scala Query 中归档多对多吗？

我想将博客文章连接到一系列标签。
这是我的数据库设计： ![在此处输入图像描述](../Images/a7bc61cd70a02ba1af634ee8d5059914.png)

我的自定义代码已经成功，但是在检查 Scala 查询生成的 SQL 时，我对我的解决方案不满意。
我使用了一种函数式方法，它生成了许多 SQL 查询，从而导致了很多往返。
我可以弄清楚如何将查询数量减少大约一半。

一个手工制作的查询，它可以在一个查询中获取我所有格式良好的数据，

```
select 
    p.id, p.content, p.posted_date, GROUP_CONCAT(t.name)
from
    post p,
    tag t,
    tag_post tp
where
    tp.post_id = p.id and tp.tag_id = t.id
group by
    p.id 
```

Scala Query 生成的查询提供相同的数据。

```
SELECT `t1`.`id`,`t1`.`content`,`t1`.`posted_date` FROM `post` `t1`
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=3)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=4)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=5)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=6)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=7)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=8)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=9)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=10)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=11)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=12)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=13)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=14)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=15)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=16)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=17)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=2)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=18)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=19)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=1)
SELECT `t1`.`id`,`t1`.`name` FROM `tag` `t1` WHERE (`t1`.`id`=3)
SELECT `t1`.`tag_id` FROM `tag_post` `t1` WHERE (`t1`.`post_id`=20) 
```

我担心所有这些往返旅行可能会带来太多开销。

有没有人成功地制作了一个不错的 Scala Query 多对多实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:03:04.510

**编辑**
您可以像这样模拟 group_concat ：

```
val groupConcat = SimpleFunction[String]("GROUP_CONCAT") 
```

如果您在查询范围内创建此方法，它应该很简单：

```
yield (alias.a, alias.b, groupConcat(alias.c)) 
```

由于我将这些辅助函数存储在抽象数据库包装器中并在特定的 DBMS（如 MySQL）中实现，因此它变得有点复杂，因为 SimpleFunction 类型签名需要这个抽象方法定义：

```
val groupConcat: ( Seq[Column[_]] => OperatorColumn[String] ) 
```

这意味着实现需要传入一个 Seq(alias.c)，这有点违反直觉，我们只是传入一个列。无论如何，很高兴它可以工作， GROUP_CONCAT 在 MySQL 中非常方便

**原始**
上帝知道没有发布您的代码有什么问题，但试试这个：

```
val q = (for {
  tp <- TagPost
  p  <- Post if tp.post_id is p.id
  t  <- Tag  if tp.tag_id is t.id
  _  <- Query groupBy p.id
} yield (p.id, p.content, p.posted_date, group_concat(t.name)))
println(q.selectStatement) 
```

您将需要创建一个函数来复制 MySQL 的 GROUP_CONCAT。请参阅[SimpleFunction 源代码](https://github.com/szeiger/scala-query/blob/master/src/main/scala/scala/slick/ql/SimpleFunction.scala)；此对象的一元方法允许您将命名列传递给底层 DBMS 函数。

```
val group_concat =
  SimpleFunction.unary[NamedColumn[String], String]("GROUP_CONCAT") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:36:12.037

我终于完成了这个方法。
不幸的是，它是特定于供应商的。

```
def allPosts = database.withSession { implicit db: Session =>
    val group_concat_string_tmp = SimpleFunction[String]("GROUP_CONCAT")
    def group_concat_string(c: Column[String]) = group_concat_string_tmp(Seq(c))
    def group_concat_long(c: Column[Long]) = group_concat_string_tmp(Seq(c))
    val query = for{
       tp <- TagPostTable 
       tag <- TagTable if tp.tag_id is tag.id
       post <- PostTable if tp.post_id is post.id
       _ <- Query groupBy post.id 
     } yield post.id ~ post.content ~ post.postedDate ~ group_concat_long(tag.id) ~ group_concat_string(tag.name)
     println(query.selectStatement)
     def parseToTagList(ids: String, names: String) : List[Tag] = {
       (ids.split(',') map (_.toLong) , names.split(',')).zipped map (Tag(_,_)) toList
     }
     query.list map (queryResult => Post(queryResult._1, queryResult._2, queryResult._3, Option(parseToTagList(queryResult._4, queryResult._5) )))
  } 
```

生成的 SQL 查询是单数的 :) 是的！

```
SELECT `t1`.`id`,`t1`.`content`,`t1`.`posted_date`,GROUP_CONCAT(`t2`.`id`),GROUP_CONCAT(`t2`.`name`) 
FROM `tag_post` `t3`,`post` `t1`,`tag` `t2` 
WHERE (`t3`.`tag_id`=`t2`.`id`) AND (`t3`.`post_id`=`t1`.`id`) 
GROUP BY `t1`.`id` 
```

# c# - 如何将 C# 函数转换为数学方程以进行论文写作

> ID：10465267
> 
> 赞同：0
> 
> 时间：2012-05-05T19:30:47.360
> 
> 标签：c#, function, mathematical-expressions, mathematical-notation

我现在正在写我的论文，我想知道是否可以将函数作为输入并获得该函数的数学方程以放入论文中。

例如这是一个函数

```
 public static bool CompareThresholdPassWithList(int irThreshold, List<string> srlstWord1, List<string> srlstWord2)
    {
        int irSameCount = 0;
        int irMinOne = srlstWord1.Count;

        if ((srlstWord2.Count) < irMinOne)
            irMinOne = srlstWord2.Count;

        foreach (string srVariable1 in srlstWord1)
        {
            if (srVariable1.Length > 0)
            {
                foreach (string srVariable2 in srlstWord2)
                {
                    if (srVariable2.Length > 0 && srVariable1 == srVariable2)
                    {
                        irSameCount++;
                    }
                }
            }
        }

        if (((irSameCount * 100) / irMinOne) >= irThreshold)
            return true;
        else
            return false;

    } 
```

实际上生成一些我可以在我的论文中使用的输出就足够了。也许是伪代码或流程图？否则可以工作。

C＃

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:40:56.847

根据您的描述，听起来您可能最好使用功能语言，例如 Haskell，而不是 C#，这本质上是命令式的。

对于要转换为数学公式的函数，它需要具有[引用透明性](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)，这意味着它在执行过程中不会产生任何[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:18:16.300

我不知道你可能想要的论文术语，但我可以解释这段代码在做什么，我认为如果你理解你会处于更好的位置。

您有两组单词（Set 1 和 Set 2），此代码确定这两组的交集，然后确定由交集定义的集合的大小是否大于较小集合大小的定义百分比。如果任一集合中有重复项，则这些将被多次计算，并且空字符串将从交集定义的集合中排除。

我不确定为什么要这样编写代码，它似乎效率很低，我无法想象这种行为的用例，我怀疑它有问题。

这是对代码的快速阅读，如果这是我的论文，我会使用[Snippet Compiler](http://www.sliver.com/dotnet/SnippetCompiler/)之类的东西来运行带有示例输入的代码来测试输出。

# iphone - 如何在 iOS 中使用 TrueType 付费字体

> ID：10465276
> 
> 赞同：3
> 
> 时间：2012-05-05T19:31:44.510
> 
> 标签：iphone, ios, ipad, fonts, truetype

我想在我的 iOS 应用程序中使用 GOTHAM 字体。我知道如何从 3.2 开始拖动和使用字体，但如何获得许可？

[http://richardwarrender.com/2010/08/custom-fonts-on-ipad-and-iphone/](http://richardwarrender.com/2010/08/custom-fonts-on-ipad-and-iphone/)

如何为 iOS 许可证付费？我可以通过这里购买 1 个 CPU 的许可证：[http ://www.typography.com/fonts/font_overview.php?productLineID=100008](http://www.typography.com/fonts/font_overview.php?productLineID=100008)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:21:41.323

我最近与 H&FJ 进行了确切的讨论。他们每年为每个应用程序授权整个家庭（如 Gotham）。它是桌面许可证的附加组件，因此您也需要一个合法的许可证。

我可能不适合在这里说他们引用的内容，但这要么是完全合理的，要么是完全疯狂的，这取决于您认为字体应该花费多少。假设定价反映了企业品牌市场经济，而不是小型应用程序开发者经济。

在发送至 oem@typography.com 的电子邮件中向他们解释您的用例。

另外，我会指出您应该查看[iosfonts.com](http://iosfonts.com)。内置字体列表令人印象深刻。特别是，Helvetica Neue 有大量不同的权重可供选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:41:46.113

您需要获得该字体的商业许可证，如果网站上没有容易看到的链接，您应该联系作者并直接向他/她询问该特定字体的商业许可证的价格和可用性。

商业许可证赋予您在您自己的商业项目中使用该产品的权利，并在您的项目中重新分发该产品。

# clojure - clojure：使用循环正确地将事物传递给向量？

> ID：10465278
> 
> 赞同：4
> 
> 时间：2012-05-05T19:31:56.553
> 
> 标签：clojure

我无法弄清楚如何将一些简单的代码抽象为循环/映射/for结构。我有以下代码有效，因为它给了我想要的输出：

```
(let    
    [recipe [1 1 2] 
    voicing [0 2 4]
    counts (range (count voicing))
    scale C]
    (map vector
        (make-scale recipe voicing scale 0)
        (make-scale recipe voicing scale 1)
        (make-scale recipe voicing scale 2)
    ) 
```

输出是：

```
 ([:C :E :G] [:D :F :B] [:E :A :C] [:G :B :D] [:A :C :F] [:B :E :G] [:D :F :A]) 
```

我基本上使用“（map vector arg1 arg2 ...）”调用来交错3个seq。

显然，我需要做最后一步，删除重复的 make-scale 调用。问题是，我需要：

```
 (map vector arg1 arg2 arg2) 
```

以及我知道如何使用循环的所有方式都给了我在 seq 中循环的结果：

```
 (map vector (arg1 arg2 arg3)) 
```

重构初始代码的最佳方法是什么，以便我只有一个函数调用来进行缩放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:15:41.610

我认为您正在寻找：

```
(apply map vector (map (partial make-scale recipe voicing scale) [0 1 2])) 
```

通常，`apply`只要您有一个序列并希望将其元素用作函数的连续参数，它就会有所帮助。您还可以将一些参数添加到列表中（在这种情况下，`vector`参数作为第一个参数添加到`map`.）

在 Clojure 中，许多 stdlib 函数需要一个扩展列表（`vector`几乎所有其他集合构造函数，`str`。）我认为这是设计使然 - 您应该`apply`与它们一起使用。

所讨论的序列甚至可以是无限的（即惰性无限），当然，如果正在应用的函数处理惰性无限参数列表。这工作正常，即使`concat`被应用于列表的无限列表：

```
(take 7 (apply concat (cycle [[1 2 3]])))
>>> (1 2 3 1 2 3 1) 
```

# javascript - jquery mobile获取href var值

> ID：10465279
> 
> 赞同：1
> 
> 时间：2012-05-05T19:31:57.037
> 
> 标签：javascript, html, jquery-mobile

在 jquery 移动文件的文档就绪字段上，我正在等待链接单击。然后执行以下函数，

```
 $(document).ready(function() {

   $("a").click(function ()
   {  
     var t = $(this).attr('href');
     alert(t);
   });
}); 
```

在本机 webview iOS 设备上无法正常工作，而在普通浏览器上则可以！在浏览器上，alert 正确返回 href，但在本机上只返回一个 #。奇怪...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:30:14.907

在运行我正在构建的 HTML5 主屏幕应用程序的 iOS6 iPad2 上也遇到了这个问题。简而言之，iOS 或 JQuery/JQueryMobile（我目前使用的）中似乎存在一个错误。经过一个小时的故障排除后，我发现：

1.  event.target [在您的示例中为 $(this)] 在 Safari 或全屏主页应用程序中返回的 href 有时会返回 #，有时会返回正确的 href。

2.  它返回我期望的href的时间很少而且相距甚远，但是模式似乎是，如果您在a标签文本附近的图像底部进行清理（假设您将图像中的文本放在a标签中。然后它有时会返回href。

所以我尝试了很多东西，无论我尝试什么，在带有 JQM 的 iPad 上获得的 href 值都是不一致的。所以我所做的（至少现在）是在 a 标签中添加了**data-href**标记。因此，例如，我有以下标记（带有一些伪标记）

```
<div>
<a href="./home.hmtl" data-href="./home.html" data-ajax=false data-transistion=none"><img {YOUR IMAGE INFO HERE!} /></a><br/> Label-Text-Under-Image
</div> 
```

然后在 JavaScript 中，我可以简单地执行以下任一操作： **$(this).attr('data-href')** 就像在你的例子中一样，虽然我没有用你的例子测试它，或者我所做的是以下内容以影响所有我页面中的标签（这是我想做的）

```
$(document).on(
        "click",
            "a",
            function (event) {
                if (event.target instanceof HTMLImageElement) {                    
                    var aUrl = $(event.target).parent().attr("data-href");
                    if (typeof aUrl != 'undefined') {
                        event.preventDefault();
                        alert(aUrl);
                        window.location = aUrl;
                    }               
                }                            
            }
        ); 
```

就我而言，真正的魔力是： **$(event.target).parent().attr("data-href");** 我在哪里得到了在桌面和 iPad 上始终正确返回的 data-href。当然，在我的最终版本中，我删除了警报呼叫，但这就是让我在带有 JQM 的 iPad 上工作的原因，并允许我阻止我的主屏幕应用程序启动 Safari。顺便说一句，我正在使用 JQM 1.1.0，因为我没有机会获得最新的……不确定他们是否在较新的版本中对其进行了修复。

# ruby-on-rails - ckeditor_rails 在生产中不起作用

> ID：10465282
> 
> 赞同：0
> 
> 时间：2012-05-05T19:32:18.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ckeditor

我正在使用`ckeditor_rails`（[在这里](https://github.com/tsechingho/ckeditor-rails)）但是当我将我的应用程序上传到 heroku 时，我的所有编辑器都没有被 'ck'ed（大声笑）
所以我启动了我的应用程序（unicorn_rails -E 生产）并得到了相同的结果：即使在本地，编辑没有显示。如果我开始开发，它们工作得很好......
这是我的 Gemfile（部分）

```
gem 'mongoid_slug'

# gem 'will_paginate'
gem 'will_paginate_mongoid'
gem 'bootstrap-will_paginate'

gem 'ckeditor_rails', :require => 'ckeditor-rails' 
```

我尝试`rake tmp:clear`并`rake assets:precompiled`尝试删除了`manifest.yml`。这些命令都不起作用。
我错过了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:05:56.650

您是否包含 ckeditor-jquery 确保您的 javascript 和 css 文件已包含并预编译

# iphone - 如何从 iPhone 中的 facebook API 获取所有朋友的姓名、ID、生日、位置等？

> ID：10465287
> 
> 赞同：2
> 
> 时间：2012-05-05T19:32:55.493
> 
> 标签：iphone, facebook-graph-api, date

我想在 iPhone 应用程序中显示包含来自 Facebook 的姓名、身份证、生日、位置等信息的列表。

```
FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me/friends" withGetVars:[NSDictionary dictionaryWithObjectsAndKeys:@"picture,birthday,id,name,link,gender,last_name,first_name",@"fields",nil]]; 
```

但我没有使用这个来过生日。请给我一些指导来完成这项任务。

# mysql - 使用正则表达式更新mysql

> ID：10465288
> 
> 赞同：11
> 
> 时间：2012-05-05T19:32:56.850
> 
> 标签：mysql, regex

我想从我的桌子上删除一些东西`1)` `32)` `121)` `1000)`...格式是`number`+`)`

我试过这段代码。

```
UPDATE articles SET 
title= REPLACE(title,'\d)', '' ) 
WHERE title regexp "\d)*" 
```

什么都没发生`phpmyadmin`，怎么写正确？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T19:37:22.067

你不能：Mysql 不支持基于正则表达式的替换。

请参阅[此 SO question](https://stackoverflow.com/questions/986826)以了解解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:07:04.897

最后，我使用了一些php，以一种快速的方法解决了这个问题。

```
for ($i=1; $i<=9999; $i++){
 $my_regex = $i.')';
 mysql_query("UPDATE articles SET title = REPLACE(title,'".$i."', '' ) where title like '%".$i."%'");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:40:26.607

作为替代方案，根据表格的大小，您可以使用`substring`函数来解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-30T07:21:28.290

我有一个独特的要求，我需要替换非活动的所有者用户名。其中用户名包含*INACITVE*，后跟村庄 ID。所以我在 replace() 函数中使用了 concat() 函数来动态替换。

```
 update Owner set username = replace(username, concat('_INACTIVE_',village_id) ,'') 
where village_id = 3363010; 
```

# c# - 从包含它们的字符串中获取链接的最佳方法

> ID：10465300
> 
> 赞同：0
> 
> 时间：2012-05-05T19:34:08.057
> 
> 标签：c#, regex, string, hyperlink, substring

我有一个链接列表，但我需要从字符串中过滤和提取正确的链接。

提取应以 mywebsite.com 开头，以 9-digitnumber.html 结尾链接是字符串，提取为字符串

例子

```
http://blah.com?f=www.mywebsite.com/sdfsf/sdfsdf/sdfsdfsdf/123456789.html&sdfsdf/sf/sdfsd8sdfsdfsdf 
```

等等...

由此，正则表达式必须提取

```
mywebsite.com/sdfsf/sdfsdf/sdfsdfsdf/123456789.html 
```

这应该与末尾的数字 '@"[0-9]{9}" 匹配。但我对正则表达式很陌生，并试图学习如何正确使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:52:39.693

使用正则表达式解析 HTML 通常是个坏主意。对于您的特定示例，您可以使用：

```
(mywebsite.com/(.+?)\d{9}) 
```

但正如安德鲁所说，使用正则表达式来做你想做的事并不是真正必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:54:37.587

```
/mywebsite\.com\/[a-zA-Z0-9\/]*[0-9]{9}\.html/ 
```

# java - Tomcat WAR - 配置 Logback 以在路径中使用应用程序名称

> ID：10465301
> 
> 赞同：17
> 
> 时间：2012-05-05T19:34:23.730
> 
> 标签：java, tomcat, slf4j, logback

我在我的战争文件 lib 文件夹中部署了 logback，并且在 classes 文件夹中有以下 logback.xml。

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
  <property name="destination" value="${catalina.base:-./temp}/logs/${appName:-myapp}" />

  <appender name="ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${destination}.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!-- rollover daily -->
      <fileNamePattern>${destination}-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
      <!-- Keep logs for 7 days -->
      <maxHistory>7</maxHistory>

      <timeBasedFileNamingAndTriggeringPolicy
            class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <!-- or whenever the file size reaches 100MB -->
        <maxFileSize>100MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
    </rollingPolicy>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <root level="error">
    <appender-ref ref="ROLLING" />
  </root>
</configuration> 
```

在第 3 行，我有一些变量替换为我的日志文件创建路径。

```
 <property name="destination" value="${catalina.base:-./temp}/logs/${appName:-myapp}" /> 
```

我想让它`${appName}`评估为部署的war文件的当前名称。

所以如果我的网络应用程序文件夹看起来像这样

```
webapps
 - myapp.war
 - myapp-dev.war 
```

myapp.war的`${destination}`属性将评估为`.../logs/myapp`并且 myapp-dev.war 将评估为`.../logs/myapp-dev`。是否有 JNDI 属性或我可以访问以访问 appName 的东西？

我想避免手动重新配置记录器。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T21:44:25.590

**编辑 2013-06**：我已`Listener`在 Maven Central 上将其作为 OSS 提供。查看[项目主页](http://mo-tomcat-ext.sourceforge.net/user-guide.html#LogbackContextNameListener)。

是的，这是可行的。首先，你可以一直依赖，`catalina.base`因为没有它Tomcat就无法运行。为了将上下文名称作为属性注入。编写一个上下文[监听](http://tomcat.apache.org/tomcat-6.0-doc/config/listeners.html)器，它将上下文名称放入 JNDI 上下文并在关闭时删除。完成后，您可以使用 JNDI 直接使用 logback 检索值。对此有直接的支持。把它写在 contextName 元素中，你就完成了。

我已经自己实现了这个，它适用于我的所有项目。如果您或其他人有兴趣，我可以在星期一分享整个代码。

编辑，这里是代码：

```
import org.apache.catalina.Context;
import org.apache.catalina.Lifecycle;
import org.apache.catalina.LifecycleEvent;
import org.apache.catalina.LifecycleListener;
import org.apache.catalina.deploy.ContextEnvironment;
import org.apache.commons.lang.StringUtils;
import org.apache.juli.logging.Log;
import org.apache.juli.logging.LogFactory;

public class LogbackContextNameListener implements LifecycleListener {

    private static final Log logger = LogFactory
            .getLog(LogbackContextNameListener.class);
    private Context context;

    private String name = "logback/contextName";

    @Override
    public void lifecycleEvent(LifecycleEvent le) {

        if (le.getLifecycle() instanceof Context)
            context = (Context) le.getLifecycle();
        else
            return;

        if (le.getType().equals(Lifecycle.START_EVENT)) {
            ContextEnvironment ce = new ContextEnvironment();
            ce.setName(getName());
            ce.setOverride(false);
            ce.setType("java.lang.String");
            String value = StringUtils.remove(context.getServletContext()
                    .getContextPath(), '/');
            ce.setValue(value);
            logger.debug(String.format("Adding env entry '%s' with value '%s'",
                    getName(), value));
            context.getNamingResources().addEnvironment(ce);
        }

        if (le.getType().equals(Lifecycle.STOP_EVENT)) {
            logger.debug(String.format("Removing env entry '%s'", getName()));
            context.getNamingResources().removeEnvironment(name);
        }

    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        if (StringUtils.isEmpty(name))
            throw new IllegalArgumentException(
                    "Parameter 'name' cannot be empty");

        this.name = name;
    }

} 
```

一个合适的配置如下所示：

```
<configuration scan="true" scanPeriod="30 minutes">

    <insertFromJNDI env-entry-name="java:comp/env/logback/contextName" as="contextName" />
    <contextName>${contextName}</contextName>

    <appender name="FILE"
        class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${catalina.base}/logs/${CONTEXT_NAME}.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- daily rollover -->
            <fileNamePattern>${catalina.base}/logs/${CONTEXT_NAME}.log.%d.gz</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%-27(%d{HH:mm:ss.SSS} [%.-12thread]) %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="INFO"><!-- WARN -->
        <appender-ref ref="FILE" />
    </root>

</configuration> 
```

这在 Tomcat 6 中完美运行。我想，它将在 Tomcat 7 上运行而无需更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T13:49:08.813

这建立在迈克尔-奥的回答之上。考虑到`catalina.base`在 Tomcat 下运行时它始终是一个已定义的系统属性，我们只需要担心定义`appName`. Logback 支持[从 JNDI 检索变量](http://logback.qos.ch/manual/configuration.html#insertFromJNDI)。如果在 JNDI 中定义了 appName，那么您的配置文件将变为：

```
<configuration>
  <!-- retrieve appName from JNDI to set the variable appName -->
  <insertFromJNDI env-entry-name="java:comp/env/appName" as="appName" />
  <!-- let the context name be the applicaiton name -->
  <contextName>${appName}</contextName>

  <property name="destination" 
            value="${catalina.base:-./temp}/logs/${CONTEXT_NAME:-myapp}" />

  <appender name="ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${destination}.log</file>
    ... remainder of config file omitted for brevity  
  </appender>
</configuration> 
```

我想提一下，您也可以直接在 logback.xml 中而不是在 JNDI 中定义 appName。（毕竟，logback.xml 文件随您的网络应用程序一起提供，其名称已经建立。但是，您的问题明确排除了这个假设。）因此，您的 logback.xml 文件可以简化为：

```
<configuration>
  <contextName>the_name_of_your_webapp</contextName>
  <property name="destination" 
            value="${catalina.base:-./temp}/logs/${CONTEXT_NAME:-myapp}" />
   ... the rest omitted for brevity
</configuration? 
```

顺便说一句，一旦找到满意的解决方案，请不要犹豫，通过在 logback-user 列表上发布来分享它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-20T16:08:48.657

这不是 ContextSelector 的用途吗？你可以看看 ContextJNDISelector 和这里[http://logback.qos.ch/manual/contextSelector.html](http://logback.qos.ch/manual/contextSelector.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:18:26.693

maxHistory 并不意味着日志文件的数量。是月数的意思。

# iphone - 检测应用程序打开？

> ID：10465302
> 
> 赞同：2
> 
> 时间：2012-05-05T19:34:25.070
> 
> 标签：iphone, objective-c, ios, xcode

我有一个带有 3 个视图控制器的标签栏应用程序，我使用“viewWillAppear”来检测打开了哪个视图。

当我关闭应用程序时，它仍然“在后台”工作，当我再次打开应用程序时，“viewWillAppear”没有检测到这个打开。

有没有其他选项可以检测到这个开口？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T19:41:24.733

您可以在您的应用委托中观察`UIApplicationWillEnterForegroundNotification`或实施。`applicationWillEnterForeground:`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T19:56:53.057

首先，您应该在`UIApplicationDelegate`

*   当您关闭当前打开的应用程序时，它将调用此方法：

    `- (void)applicationDidEnterBackground:(UIApplication *)application`

*   在应用程序关闭但仍处于停靠栏后，您再次打开它们。在进入应用程序之前的过渡状态，它会调用这个方法：

    `- (void)applicationWillEnterForeground:(UIApplication *)application`

*   当应用程序完全呈现在您关闭它们之前的先前状态时。它最终调用了这个方法：

    `- (void)applicationDidBecomeActive:(UIApplication *)application`

如果你想做一些事情，`viewWillAppear`你应该实现`applicationDidBecomeActive`向你当前的视图发送一些消息，或者在应用程序激活后做你想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:36:28.260

当您的应用程序从后台恢复时，它将接收该`applicationWillEnterForground:`方法。它也会在`applicationDidEnterBackground:`暂停时得到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T12:58:17.550

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
NSLog(@"app will enter foreground");
[viewController refresh:NULL];
} 
```

我认为这会奏效。在你的应用委托中写下这个

# python - 从 PyGTK 中的 gtk.Entry 获取值

> ID：10465303
> 
> 赞同：2
> 
> 时间：2012-05-05T19:34:31.687
> 
> 标签：python, user-interface, pygtk

我正在开发一个 PyGTK GUI 项目，我想知道，有没有办法从 gtk.Entry 获取变量值？

```
 text=gtk.Entry(0)
    text.set_activates_default(True)
    port = text.get_text() 
```

这不起作用，文本框默认为空，get_text() 返回空字符串，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:49:14.877

> 这不起作用，文本框默认为空，get_text() 返回空字符串，有什么想法吗？

听起来您正在寻找一些用户输入后获取文本。为了做到这一点，gtk 使用信号，允许您将用户操作连接到将做某事的某些功能。在您的情况下，您希望此函数从输入中获取文本。因为您没有描述用户交互，所以我将举一个最简单的例子。如果您的 GUI 中有一个按钮，当单击该按钮时，该按钮会抓取当时在条目中输入的任何内容，您可以这样做：

```
button = gtk.Button( 'Click Me')
button.connect( 'clicked', on_button_click ) 
```

然后，定义`on_button_click`函数：

```
def on_button_click(self, widget, data=None):
    port = text.get_text()
    print 'Port: %s' % port 
```

因此，使用上面的示例代码，您将拥有一个按钮，当您单击该按钮时，它会从您的 gtk.Entry 中获取文本。

查看此[链接](http://en.wikibooks.org/wiki/PyGTK_For_GUI_Programming/Signals)以获取有关如何在 pygtk 中使用信号的简单示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:35:57.833

由于您的文本字段默认为空，因此 get_text() 将返回空字符串。添加按钮回调函数或其他一些函数。因此，每当调用该函数时，您都将使用从 Entry 中获取字符串

```
text.gtk_text() 
```

您可能想在这里使用 self 。因为您将访问其他函数而不是主线程中的条目，请使用

```
self.text=gtk.Entry()
self.text.set_activates_default(True)

def foo(self,widget,event): # some callback function
    port = self.text.get_text()
    print port 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:24:33.003

The retrieving method is the correct one, but right after the creation, the user can't yet have typed anyting into the field.

You would have to wait for the user to actually type something into the field, and afterwards calling `get_text()`.

# android - 如何使用默认值重新创建数据库？

> ID：10465304
> 
> 赞同：0
> 
> 时间：2012-05-05T19:34:36.717
> 
> 标签：android

在我的应用程序中，我想删除现有数据库并使用默认值创建一个新数据库。默认值可以从 XML 插入到数据库中。

有谁知道如何重用数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:15:40.743

假设您使用的是 SQLite 数据库，要从数据库中的所有表中删除所有行，您可以使用 db.execSQL() 并听取此问题[Drop all tables command](https://stackoverflow.com/questions/525512/)的建议：

> 您可以使用以下**危险**命令执行此操作：
> 
> ```
>  PRAGMA writable_schema = 1;
>  delete from sqlite_master where type = 'table';
>  PRAGMA writable_schema = 0; 
> ```
> 
> 然后你想恢复删除的空间
> 
> ```
>  VACUUM 
> ```
> 
> 并进行良好的测试以确保一切正常
> 
> ```
>  PRAGMA INTEGRITY_CHECK; 
> ```

如果您还没有编写读取 XML 数据的方法，那么这是很好的阅读材料：[Store parsed xml data to sqlite ? 安卓](https://stackoverflow.com/questions/5702729/store-parsed-xml-data-to-sqlite-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:43:39.693

好吧，基本上这不是 Android 特定的问题。

首先，您何时想使用默认值重新创建数据库以及如何触发它。

*   在按钮单击等 UI 事件中？
*   或者当您开始/停止或破坏您的活动时？

在任何情况下，您都需要删除数据库并重新创建整个结构（表、关系等）。

# java - 为什么我们使用静止的原子？

> ID：10465305
> 
> 赞同：6
> 
> 时间：2012-05-05T19:34:38.553
> 
> 标签：java, rest, model-view-controller, atom-feed

我在rest web services中看到过很多次xml，格式如下：

```
<author>
   <atom:link rel="author" type="application/xml" href="http://www.../author/1"/>
</author> 
```

并且 url (http://www.../author/1) 将包含如下内容：

```
<author xmlns="http://www.../ckp" xmlns:atom="http://www.w3.org/2005/atom">
  <name>S. Crocker</name>
  <address>None</address>
  <affiliation></affiliation>
  <email>None</email>
</author> 
```

1.  我想知道为什么要使用第一种形式的 xml？
2.  这些如何在 java 模型类上建模（使用 mvc 模式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:38:53.850

您的第一个问题的答案很简单：ATOM 是一个可靠的[标准](https://www.rfc-editor.org/rfc/rfc4287)，涵盖了您想要为发布、更新和以其他方式管理信息执行的[一系列](https://www.rfc-editor.org/rfc/rfc5023)[标准操作。](https://www.rfc-editor.org/rfc/rfc4946)

因此，人们使用 ATOM 的原因与使用 HTTP 的原因相同——他们可以投资一些独特的东西，但该标准为他们提供了更好的工具。

其次，[存在各种 Java 库](https://stackoverflow.com/questions/1257201/how-to-get-started-with-atom-and-java)，但没有明确的方法可以做到这一点。从“编写您自己的模型对象并手动解析 XML”到问题链接到的那种“为您做”的库，一切都可以正常工作。

# jquery - 点击时显示 2 by 2 个元素

> ID：10465306
> 
> 赞同：-2
> 
> 时间：2012-05-05T19:34:48.933
> 
> 标签：jquery

我有以下容器：

```
 <div id="container">
        <div id="1">1</div>
        <div id="2">2</div>
        <div id="3" style="display:none">3</div>
        <div id="4" style="display:none">4</div>
        <div id="5" style="display:none">5</div>
        <div id="6" style="display:none">6</div>
    </div>

    <div id="more_results">Show 2 more results</div> 
```

如何：当我单击显示更多 div 以显示下一个 2 个隐藏的 div（3 和 4）时。然后如果他们再次点击显示 div（5 和 6）

[演示 jsFiddle。](http://jsfiddle.net/ymorin007/wpbBJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:43:47.993

```
$('#more_results').click(function(){
    $('#container div:visible:last').nextAll('div').slice(0,2).show();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:42:38.903

```
$('#more_results').on('click',function (e) {
    if (e.preventDefault)
        e.preventDefault();
    else
        e.stop();

    var num = 0;
    $("#container").children().each(function () {
        if ($(this).is(':hidden')) {
        if (num <= 2) {
            $(this).show();
            num++;
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:45:48.587

首先，您不需要所有这些`ID`，而是​​使用单个`CLASS`！

***[演示 JSFIDDLE](http://jsfiddle.net/roXon/GxZFS/1)***

```
var visible = 2;      // setup here initial number of visible elements

$('.element').slice(visible).hide();   // DOM READY // apply setup

$('#more_results').click(function(){
    $('.element').slice(0,visible+=2).show();  // (for the first click: get Index 0 - to 4 (excluding 4) ) and so on... we increase by 2
}); 
```

# c++ - 未记录的 WinAPI：LoadLibrary16 和 GetProcAddress16

> ID：10465307
> 
> 赞同：0
> 
> 时间：2012-05-05T19:35:07.200
> 
> 标签：c++, winapi

```
typedef void (WINAPI *voidfunc)(void);
typedef HMODULE (WINAPI *strfunc1)(char*);
typedef HMODULE (WINAPI *strfunc2)(void*,char*);
int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);
    HMODULE kernel=GetModuleHandleA("kernel32.dll");
    if(!kernel)return 1;
    strfunc1 LoadLibrary16=(strfunc1)GetProcAddress(kernel,"LoadLibrary16");
    if(!LoadLibrary16){ 
        MessageBoxA(0,"LoadLibrary16 is not imported","err",0);
        return 1;
    }
    HMODULE user=LoadLibrary16("user.exe");
    if(!user){  
        MessageBoxA(0,"user.exe is not loaded","err",0);
        return 1;
    }
    strfunc2 GetProcAddress16=(strfunc2)GetProcAddress(kernel,"GetProcAddress16");
    if(!GetProcAddress16){  
        MessageBoxA(0,"GetProcAddress16 is not imported","err",0);
        return 1;
    }
    voidfunc enable=(voidfunc)GetProcAddress16(user,"EnableOemLayer");
    voidfunc disable=(voidfunc)GetProcAddress16(user,"DisableOemLayer");
    if(!(enable&&disable))return 1;
    disable();
    Sleep(5000);
    enable();

    return 0;
} 
```

不工作。

PS我的操作系统是Win 7。

PPS 首先我简单地尝试了 LoadLibraryA，得到了错误，读了一点，明白我需要 16 位未记录的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:11:47.183

恐怕 kernel32.dll 中没有 16 位函数。可以找到的功能是

```
LoadLibraryA
LoadLibraryExA
LoadLibraryExW
LoadLibraryW 
```

一个有用的工具是依赖，你可以从 [http://www.dependencywalker.com/找到它](http://www.dependencywalker.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:53:51.377

LoadLibrary16 和 GetProcAddress16 在 kernel32.dll 中不存在

看![快照](../Images/d83777dd12a171b1c2ba9ea9421bf7bb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T16:11:10.553

只有 Windows 95/98/ME 上的 kernel32.dll 具有 LoadLibrary16 和 GetProcAddress16 并且它们不按名称导出。

# c# - 水平滚动与c#

> ID：10465311
> 
> 赞同：2
> 
> 时间：2012-05-05T19:35:25.013
> 
> 标签：c#, mousemove, user32

[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx)包含有关如何使用位于 user32.dll 中的 mouse_event 函数的有用信息

基于该链接，我知道我可以通过执行以下操作来滚动：

```
 [DllImport("user32.dll")]
        public static extern void mouse_event(int dwFlags, int dx, int dy, int dwData, int dwExtraInfo);

        public void Scroll(){
              // this will cause a vertical scroll
              mouse_event(0x0800, 0, 0, 500, 0);
        }

        public void Click(){
              // this will cause a left mouse click
              mouse_event(0x0002, 0, 0, 0, 0);
              Thread.Sleep(1);
              mouse_event(0x0004, 0, 0, 0, 0);
        }

        // etc... 
```

无论如何，如果您查看该链接，它不包含 MOUSEEVENTF_HWHEEL 的 int 值。我希望能够使用水平滚动。如何使用 move_event 创建水平轮运动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:45:11.220

如果您查看您提供的相同链接，您会看到：

> 注意 此功能已被取代。请改用[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)。

如果查看 SendInput 的文档，您会发现可以发送[INPUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646270%28v=vs.85%29.aspx)结构数组。如果查看 INPUT 的文档，您会发现可以发送键盘 (KEYBDINPUT) 或鼠标输入 (MOUSEINPUT)。

最后，[MOUSEINPUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646273%28v=vs.85%29.aspx)的文档说您可以使用**MOUSEEVENTF_HWHEEL**。

> Windows Vista：如果 dwFlags 包含 MOUSEEVENTF_HWHEEL，则 dwData 指定车轮移动量。正值表示轮子向右旋转；负值表示轮子向左旋转。

所以，你应该使用`SendInput`. 它有点复杂，但您可以使用它来水平滚动。您可以查看[SendInput 的 PInvoke 页面](http://pinvoke.net/default.aspx/user32/sendinput.html)以获取示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:46:03.787

的值为`MOUSEEVENTF_HWHEEL`0x1000。例如：

```
// this will cause a horizontal scroll to the right
mouse_event(0x1000, 0, 0, 200, 0); 
```

# java - Java RMI 中的代码库到底有什么意义？

> ID：10465314
> 
> 赞同：5
> 
> 时间：2012-05-05T19:35:56.490
> 
> 标签：java, rmi, codebase

我目前正在学习 RMI。

我不太了解代码库的概念。我阅读的每篇论文都表明，调用远程对象的客户端可以从代码库中加载方法定义。现在的问题是：我不需要类路径中的描述/接口吗？如果我只在运行时知道它们，我如何调用远程对象上的方法？这甚至不会编译。

我完全错过了这里的重点吗？那么代码库到底有什么意义呢？提供代码库似乎需要做很多额外的工作和要求

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:36:16.680

好吧，假设您只向客户端提供接口，并且实现将位于给定的代码库中。然后客户端请求服务器发送一个给定的对象，客户端期望接收一个实现给定接口的对象，但是实际的实现对于客户端来说是未知的，当它反序列化发送的对象时它必须去代码base 并为正在传递的实际对象下载相应的实现类。

这将使客户端非常瘦，并且您将非常轻松地更新代码库中的类，而不必诉诸于更新每个客户端。

**编辑**

假设您有一个具有以下界面的 RMI 服务器

```
public interface MiddleEarth {
     public List<Creature> getAllCreatures();
} 
```

客户端将只有 和 的接口`MiddleEarth`，`Creature`但在类路径中没有任何实现。

其中 的实现是 、 和 类型的可序列化`Creature`对象。这些实现位于您的代码库中，但不在您客户端的类路径中。`Elf``Man``Dwarf``Hobbit`

当您要求您的 RMI 服务器向您发送中土世界中所有生物的列表时，它会发送实现 的对象`Creature`，即上面列出的任何类。

当客户端接收到序列化的对象时，它必须查找类文件才能对它们进行反序列化，但这些文件并不位于本地类路径中。此流中的每个对象都带有给定的代码库标记，可用于查找缺失的类。因此，客户端求助于代码库来查找这些类。在那里它将找到正在使用的实际生物类。

代码库双向工作，因此这意味着如果您向服务器发送 a `Creature`（即 an `Ent`），它也会在代码库中查找它。

这意味着当客户端和服务器都需要发布新类型的生物时，他们所要做的就是更新`creaturesImpl.jar`代码库中的内容，而不是服务器或客户端应用程序本身。

# python - 墙纸更换器无法正常工作

> ID：10465317
> 
> 赞同：2
> 
> 时间：2012-05-05T19:36:44.990
> 
> 标签：python, windows, urllib2, ctypes, wallpaper

我是 Python 新手，在编写程序时遇到了一个问题，该程序会将我的背景更改为“今日国家地理图片”。它可以很好地获取 jpeg 的路径，但是当我使用命令更改桌面背景（对于 Windows）时，它只会将背景更改为纯黑色。代码本身不会引发任何错误，它只是无法按照我想要的方式工作。这是代码。

```
import urllib2
import ctypes

SPI_SETDESKWALLPAPER = 20
url = urllib2.urlopen("http://photography.nationalgeographic.com/photography/photo-of-the-day/")
code = url.readlines()
pos = code[1303].split("\"",2)
imgurl = pos[1]
print imgurl
ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, imgurl , 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:09:01.683

您似乎将 URL 传递给 set wallpaper 命令，而不是图像的路径。首先获取图像。试试这样吧。

```
import urllib2
import ctypes

SPI_SETDESKWALLPAPER = 20
url = urllib2.urlopen("http://photography.nationalgeographic.com/photography/photo-of-the-day/")
code = url.readlines()
pos = code[1303].split("\"",2)
imgurl = pos[1]

print imgurl
# Changes after here
url2 = urllib2.urlopen(imgurl)
out = open("wallpaper.jpg", "wb")
out.write(url2.read())
out.close()
ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, "wallpaper.jpg" , 0) 
```

我实际上没有尝试过（不在Windows上运行）所以也许它会解决问题，也许不会！

PS，这是用于解析 url 的非常脆弱的代码，但是让它工作的荣誉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:29:26.770

The code you use to parse the url is indeed very fragile. You would be better of using a regex. This regex searches for the unique div containing the image and then removes everything but the url.
Also, using `with` to open a file is better, because it automatically closes the file.
The improved code would then be:

```
import urllib2
import ctypes
import re

SPI_SETDESKWALLPAPER = 20
url = urllib2.urlopen("http://photography.nationalgeographic.com/photography/photo-of-the-day/")
code = url.read()
imgurl = re.sub(r'(.|\n)+?<div class="primary_photo">(.|\n)+?<img src="(.+?)"(.|\n)+', r'\3', code)

print imgurl
url2 = urllib2.urlopen(imgurl)
with open("wallpaper.jpg", "wb") as f:
    f.write(url2.read())
ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, "wallpaper.jpg" , 0) 
```

# android - 广播接收器不影响 Android 4.0（可能是 3.1+）中的共享首选项

> ID：10465318
> 
> 赞同：2
> 
> 时间：2012-05-05T19:36:46.573
> 
> 标签：android, broadcastreceiver, sharedpreferences

因此，我确实已经彻底寻找了我的问题的答案；通常我可以很容易地找到几乎任何事情的答案。

无论如何，基本上我设置了一个警报管理器，它最终设置了一个广播接收器。在接收器内部，它决定接收到哪个意图，删除共享首选项，然后设置启动活动的通知。问题是，在我的 4.0 手机上，共享首选项没有成功删除，但在我尝试过的任何以前的手机（2.2、2.3）上，它都能正常工作。

我最终确实找到了 Android 3.1 和 FLAG_INCLUDE_STOPPED_PACKAGES 实现的文档。我试着把它扔到意图上，以防万一，但它仍然不起作用。无论哪种方式，问题都不是活动的启动，而是共享偏好的简单删除。

我希望这足够清楚！我将在下面输入一些代码。

这是意图开始的地方：

```
Calendar cal = Calendar.getInstance();
int seconds = 5 * 60; // 1 * 24 * 60 * 60;
cal.add(Calendar.SECOND, seconds);

Intent intent = new Intent(SetAlertActivity.this, ReminderReceiver.class);
intent.putExtra("id", "FAlert");
//intent.addFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), FRAUD_ALERT_CODE, intent, 0);

AlarmManager alertManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alertManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);

settingsEditor = alertSettings.edit();
settingsEditor.putLong("AlertTime1", cal.getTimeInMillis());
settingsEditor.commit(); 
```

然后广播接收器 onReceive()：

```
 nContext = context;
    alertSettings = nContext.getSharedPreferences(MainActivity.PREFERENCE_FILENAME, 0);
    if (intent.getStringExtra("id").equals("FAlert"))
    {

        settingsEditor = alertSettings.edit();
        settingsEditor.remove("AlertTime1");
        settingsEditor.commit();

        String ns = Context.NOTIFICATION_SERVICE;
        int icon = R.drawable.ar_icon;
        CharSequence tickerText = nContext.getString(R.string.notification_ticker);
        CharSequence contentTitle = nContext.getString(R.string.notification_title);
        CharSequence contentText = nContext.getString(R.string.notification_text);
        long when = System.currentTimeMillis();

        NotificationManager mNotificationManager = (NotificationManager) nContext.getSystemService(ns);
        Notification notification = new Notification(icon, tickerText, when);

        Intent notificationIntent = new Intent(nContext, SetAlertActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(nContext, 135, notificationIntent, 0);

        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.defaults |= Notification.DEFAULT_LIGHTS;
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.setLatestEventInfo(nContext, contentTitle, contentText, contentIntent);
        mNotificationManager.notify(NOTIFICATION_ID, notification);
    } 
```

所以，正如我之前提到的，在我的 4.0 设备上（我没有任何 3.X 设备）

```
settingsEditor = alertSettings.edit();
settingsEditor.remove("AlertTime1");
settingsEditor.commit(); 
```

部分不工作。该活动将正确打开，但“AlertTime1”仍然存在。在 2.2 和 2.3 设备上，“AlertTime1”已成功删除。

*叹息*:D

谢谢你的帮助！！

哦，如果需要，这是我的接收器清单：

```
<receiver
    android:name="ReminderReceiver"
    android:process=":remote" >
</receiver> 
```

这就是差异显示的地方：

```
 alertSettings = getSharedPreferences(AlertRenewActivity.PREFERENCE_FILENAME, 0);
    settingsEditor = alertSettings.edit();
    if (alertSettings.contains("AlertTime1"))
    {
        alertTime = alertSettings.getLong("AlertTime1", 0);
        timeLeft = (int) ((alertTime - System.currentTimeMillis()) / (1000L));
        daysLeft = timeLeft / (60 * 60 * 24);
        daysLeftView.setText(Integer.toString(daysLeft));
        setAlert.setEnabled(false);
        setAlert.setTextColor(R.color.dark_text);
    }
    else
    {
        daysLeftView.setText(R.string.no_alert_set);
    } 
```

在我的旧手机上，它正确重置为“未设置警报”，但在 4.0 手机上，它仍然显示“0”天（这是它所说的，因为我只将警报设置为 5 分钟左右进行测试） . 基本上，用户无法设置新警报，因为它没有正确重置，而且仅在我正在尝试的 4.0 手机上：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:44:55.630

What I ended up doing was just having a check in the activity itself that says "if the alarm time is less than 0, delete the alarm time." It was a work around; I didn't receive any other answer that worked unfortunately.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:20:31.900

用作getSharedPreferences `Context.MODE_MULTI_PROCESS`() 的第二个参数。问题是您的广播接收器在与您的活动不同的进程中运行，并且从 Android 3.0 开始，多进程访问共享首选项的默认行为发生了变化。这应该可以为您解决 4.x 设备上的问题。

但是，Android 2.3 中存在一个错误，该错误会导致从多个进程同时访问共享首选项在某些情况下无法可靠地工作。我们遇到了这个并且对此感到非常沮丧，因为它很难重现和解释（可能是某种时间问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T00:31:39.823

您应该在清单中的接收器中删除 android:process=":remote" 属性。SharedPreferences 不适用于新进程，并且 :remote 声明“无论进程 id 是什么”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-28T18:04:49.517

我知道这是一个老问题，但也许我的回答会对当今面临这个问题的其他人有所帮助。**我刚刚找到了一个解决方案，它对我有用**。

创建一个服务并实现你想要的工作，然后从你的广播接收器调用服务，这意味着你的接收器唯一的工作就是调用服务来处理你想做的工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-05T19:43:47.493

简单的答案是：不要费心在接收器中做太多事情。相反，对同一包层次结构中的另一个 Activity 发起意图调用，您将能够同样轻松地完成它。

# iphone - xcode mfmailcomposeviewcontroller lock setToRecipients

> ID：10465330
> 
> 赞同：0
> 
> 时间：2012-05-05T19:38:11.143
> 
> 标签：iphone, xcode, viewcontroller

我有用户联系我的应用程序

问题是用户可以输入任何电子邮件地址，但我想锁定或做一些事情，`setToRecipients`以便用户无法在此字段中进行任何更改。

这是我的代码

```
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
[composer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]) {
    [composer setToRecipients:[NSArray arrayWithObjects:@"123@abc.com", nil]];
    [composer setSubject:@"subject here"];
    [composer setMessageBody:@"message here" isHTML:NO];
    [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentModalViewController:composer animated:YES];
    [composer release];
} 
```

任何帮助或指导！

谢谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:34:25.517

您不能不`MFMailComposeViewController`提供该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:43:41.217

从外观上看，你不能。原因是苹果有安全保护来确保你的应用程序不会自动发送垃圾邮件，在他们看来，用户应该总是可以灵活地选择邮件的去向。

# java - ArrayList 的问题 >

> ID：10465338
> 
> 赞同：-1
> 
> 时间：2012-05-05T19:39:11.323
> 
> 标签：java, arraylist

此代码是根据真实性的建议编辑的。

我很难为这个标题想出一个好的标题——如果你有更好的主意，请随时更改它。

我正在创建一个二维 ArrayList。为此，我填写了一个`ArrayList<String>`，然后将其添加到`ArrayList<ArrayList<String>>`. 我在一个循环中这样做，我希望`ArrayList<String>`每次都能获得新鲜感。这不会发生，所以`ArrayList<ArrayList<String>>`会被**堆积**填满，`ArrayList<String>`因为每次我填满`ArrayList<String>`它只是添加它已经拥有的东西。

```
ArrayList<String> oneD = new ArrayList<String>(); 
ArrayList<ArrayList<String>> twoD= new ArrayList<ArrayList<String>>();

Cursor tSCursor = retrieveTS(tId);  
tSCursor.moveToFirst();

for (int i = 0; i < tSCursor.getCount(); i++) 
    {
        stockId = tSCursor.getString(tSCursor.getColumnIndex("_id"));

        oneD.add(sId);

        oneD.addAll(retrieveSFinParams(sId));

        twoD.add(sFinParams);           

        tSCursor.moveToNext();
    } 
```

我尝试了 sFinParams.clear()，但作为容器中的 Java 用户引用，当我使用 clear() 时，我也丢失了 2D ArrayList 中的值。

如何每次都获得一个新的 ArrayList，这样当我填满 2D ArrayList 时，我就不会复制 1D ArrayList 的内容？

我感谢任何帮助，D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:01:21.920

您必须在循环的每次迭代中创建一个新的 ArrayList 实例。否则，您将继续向同一个内部列表添加元素，并将这个唯一的内部列表多次添加到外部列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T22:00:24.517

我会想象你的代码实际上是

```
ArrayList<String> oneD = new ArrayList<String>(); 
ArrayList<ArrayList<String>> twoD= new ArrayList<ArrayList<String>>();

Cursor tSCursor = retrieveTS(tId);  
tSCursor.moveToFirst();

for (int i = 0; i < tSCursor.getCount(); i++) 
{
    stockId = tSCursor.getString(tSCursor.getColumnIndex("_id"));

    oneD.add(sId);

    oneD.addAll(retrieveSFinParams(sId));

    twoD.add(oneD);          

    tSCursor.moveToNext();
} 
```

问题是您重复添加相同的对象 ( `oneD`) `twoD`，而不是`oneD` `ArrayList`为`twoD`. 解决方法很简单：在循环`oneD` *内*创建，以便每次迭代都使用不同的`oneD`：

```
ArrayList<ArrayList<String>> twoD= new ArrayList<ArrayList<String>>();

Cursor tSCursor = retrieveTS(tId);  
tSCursor.moveToFirst();

for (int i = 0; i < tSCursor.getCount(); i++) 
{
    stockId = tSCursor.getString(tSCursor.getColumnIndex("_id"));

    ArrayList<String> oneD = new ArrayList<String>(); 

    oneD.add(sId);

    oneD.addAll(retrieveSFinParams(sId));

    twoD.add(oneD);          

    tSCursor.moveToNext();
} 
```

# struts2 - Struts 2 将表单提交给一个对象

> ID：10465339
> 
> 赞同：0
> 
> 时间：2012-05-05T19:39:15.037
> 
> 标签：struts2, struts2-spring-plugin

我有类似的东西：

```
 class Model {
    private String field1;
    private String field2;

    //setters
 }

class Action extends ActionSupport {
    private Model model;
    public String execute() {
        //breakpoint
    }
    public void setModel(Model model){
        this.model=model;
    }
} 
```

在 jsp 上：

```
<s:form id="addCommentForm" method="POST" namespace="%{namespace}" action="addComment">
    <input type="text" name="model.field1"/>
    <input type="text" name="model.field2"/>
</s:form> 
```

不幸的是，当我提交此表单时，仅设置了 Model 类中的 1 个字段。我调试代码并发现实际上为两个字段（field1 和 field2）调用了 setter，但是为 Model 类的不同实例调用了 setter。

所以看起来，它在提交表单时执行后续步骤：

1.  创建Model类的新实例（instance1），在Action类中设置这个实例
2.  将 field1 设置为 instance1
3.  创建Model类的新实例（instance2），在Action类中设置这个实例
4.  将 field2 设置为 instance2

因此，正如我所见，instance2 替换了 instance1。我需要在 Model 类的一个实例中使用 field1 和 field2。需要修改什么？

依赖列表：

```
 <dependency>
            <groupId>com.vercer.engine.persist</groupId>
            <artifactId>twig-persist</artifactId>
            <version>1.0.4</version>
        </dependency>
        <dependency>
            <groupId>com.opensymphony</groupId>
            <artifactId>xwork</artifactId>
            <version>2.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts.xwork</groupId>
            <artifactId>xwork-core</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.freemarker</groupId>
            <artifactId>freemarker</artifactId>
            <version>2.3.19</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>opensymphony</groupId>
            <artifactId>sitemesh</artifactId>
            <version>2.4.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.1.6</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>jetty</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1-6.0.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.1.6</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>2.1.8</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:02:15.473

对于复杂类型，你需要一个 getter 和一个 setter，这样 Struts2 才能正确操作对象，否则它将无法获取现有实例并被迫创建一个新的模型实例 (new Model().setWhatever())而不是看到模型已经存在并正在执行 (getModel().setWhatever())。

# asp.net-mvc-3 - Castle Windsor LifestylePerWebRequest - 似乎只在 ISession 的第一个 Web 请求上解决

> ID：10465340
> 
> 赞同：0
> 
> 时间：2012-05-05T19:39:28.517
> 
> 标签：asp.net-mvc-3, fluent-nhibernate, castle-windsor

我正在设置我的 MVC 项目，以便我`ISession`在 PerWebRequest 的基础上解决我的问题。

这是我到目前为止所拥有的：

在我的 Castle Windsor 设置中，我`ISession`使用工厂方法注册了我的：

`Component.For<ISession>().UsingFactoryMethod(ctx => MsSql2008SessionFactory.OpenSession()).LifestylePerWebRequest()`

在我的每次请求开始时，我都将`Global.asax` `Application_Start()`我的绑定`ISession`到 NHibernate ：`CurrentSessionContext`

```
BeginRequest += delegate{
            CurrentSessionContext.Bind(
                     MsSql2008SessionFactory.OpenSession());
                       };

EndRequest += delegate{
             var session = MsSql2008SessionFactory
                             .SessionFactory
                               .GetCurrentSession();
              if (session != null)
              {
                session.Dispose();
              }
             CurrentSessionContext
                     .Unbind(MsSql2008SessionFactory
                         .SessionFactory);
        }; 
```

我第一次向页面发出请求时一切正常。第二次向页面发出请求时，我得到一个异常说明：

> 会话关闭！对象名称：'ISession'。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:35:26.850

答案很简单。

我注入的存储库`ISession`有一种`Singleton`生活方式。

这意味着`ISession`在第一个请求中注入的 也被用于后续请求（因为我的存储库类仅在应用程序启动时创建），因此已经被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T03:13:44.837

这就是我做事的方式可能对你有用。我使用 Fluent Nhibernate 以防某些配置无法运行。

```
public interface INHibernateSessionFactoryHelper
{
    ISessionFactory CreateSessionFactory();
}

public class NhibernateSessionFactoryHelper
{
    private static readonly string ConnectionString =
        ConfigurationManager.ConnectionStrings["SqlConnectionString"].ToString();

    public static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
            .ProxyFactoryFactory("NHibernate.Bytecode.DefaultProxyFactoryFactory, NHibernate")
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<EntityMap>())
            .Database(
                MsSqlConfiguration.MsSql2008.ConnectionString(ConnectionString).AdoNetBatchSize(1000))
            .Cache(
                c =>
                c.ProviderClass<SysCacheProvider>().UseSecondLevelCache().UseQueryCache().UseMinimalPuts())
            .ExposeConfiguration(c => c.SetProperty(Environment.GenerateStatistics, "true")
                                          .SetProperty(Environment.SessionFactoryName, "My Session Factory")
                                          .SetProperty(Environment.CurrentSessionContextClass, "web"))
            .Diagnostics(d => d.Enable().OutputToFile(@"c:\temp\diags.txt"))
            .BuildSessionFactory();
    }
} 
```

然后我的 Windsor 安装程序看起来像这样

```
public class NHibernateInstaller:IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(
            Component.For<ISessionFactory>().Instance(NhibernateSessionFactoryHelper.CreateSessionFactory()));
        container.Register(Component.For<ISessionManager>().ImplementedBy<SessionManager>().LifestylePerWebRequest());
    }
} 
```

我省略了我使用的 SessionManager 的代码。让我知道你是否愿意

UPDTAE：这是我用于管理会话和事务的代码（我发现这些代码分散在 Internet 上，但没有太多修改就可以很好地工作。ISessionManager 按照我之前的示例连接起来并注入到我的服务的构造函数中.

```
public interface ISessionManager : IDisposable
{
    ISession Session { get; set; }
    ISession GetSession();
}

public class SessionManager : ISessionManager
{
    private readonly ISessionFactory _sessionFactory;
    private TransactionScope _scope;
    public SessionManager(ISessionFactory sessionFactory)
    {
        _sessionFactory = sessionFactory;
    }

    #region ISessionManager Members

    public ISession Session { get; set; }

    public ISession GetSession()
    {
        if (Session == null)
        {
            Session = _sessionFactory.OpenSession();
            if (!CurrentSessionContext.HasBind(_sessionFactory))
            {
                _scope = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions {IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted});
                Session.BeginTransaction(IsolationLevel.ReadCommitted);
                CurrentSessionContext.Bind(Session);
            }
        }

        Session = _sessionFactory.GetCurrentSession();
        Session.FlushMode = FlushMode.Never;
        return Session;
    }

    public void Dispose()
    {
        if (CurrentSessionContext.HasBind(_sessionFactory))
        {
            CurrentSessionContext.Unbind(_sessionFactory);
        }
        try
        {
            Session.Transaction.Commit();
            _scope.Complete();
            _scope.Dispose();
            Session.Flush();
        }
        catch (Exception)
        {
            if (Session.Transaction != null && Session.Transaction.IsActive)
            {
                Session.Transaction.Rollback();
            }
            throw;
        }
        finally
        {
            Session.Close();
            Session.Dispose();
        }
    }

    #endregion
} 
```

示例构造函数：

```
private readonly ISessionManager _sessionManager;
private readonly ISession _session;
 public UserService(ISessionManager sessionManager)
    {

        _sessionManager = sessionManager;
        _session = sessionManager.GetSession();

     } 
```

# objective-c - 改变数组中的对象数量

> ID：10465341
> 
> 赞同：-4
> 
> 时间：2012-05-05T19:39:30.513
> 
> 标签：objective-c, xcode

在我的应用程序中，用户可以创建无限的 UITextFields。然后我得到所有这些信息并上传到一个 json 文件中：

```
NSString *object;   
NSString *object2;
 NSString *object3;
NSString *object4;
NSString *object5;
NSString *size;

for (UITextField *text in array2) {

int touchedtag = text.tag;

NSUInteger tagCount = touchedtag;
switch (tagCount) {
    case 1: 

        object = [NSString stringWithFormat:@"%@ %@ %@", text.text, NSStringFromCGRect(text.frame), text.font];

        break;
    case 2: 
        object2 = [NSString stringWithFormat:@"%@ %@ %@", text.text, NSStringFromCGRect(text.frame), text.font];

        break;
    case 3: 

        object3 = [NSString stringWithFormat:@"%@ %@ %@", text.text, NSStringFromCGRect(text.frame), text.font];

        break;
    case 4: 

       object4 = [NSString stringWithFormat:@"%@ %@ %@", text.text, NSStringFromCGRect(text.frame), text.font];

        break;

    case 5: 

        object5 = [NSString stringWithFormat:@"%@ %@ %@", text.text, NSStringFromCGRect(text.frame), text.font];

        break;

    default :

        break;

}
}
    NSArray *keys = [NSArray arrayWithObjects:@"text", @"text2", @"text3", @"text4", @"text5", nil];
    NSArray *objects = [NSArray arrayWithObjects:object,object2,object3, object4, object5, nil];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSString* jsonString = [jsonDictionary JSONRepresentation];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];

[jsonData writeToFile:path atomically:YES];

NSString *destDir = @"/sandbox/";
[[self restClient] uploadFile:filename toPath:destDir
                withParentRev:nil fromPath:path];

[[self restClient] loadMetadata:@"/sandbox/"];

} 
```

问题是对象的数量不是独立的（object，object2 ...）。因此，如果用户创建的文本字段少于 5 个，则应用程序崩溃，而如果超过 5 个则没有任何反应，但标签 6 及以上的信息不会被记录。如何根据创建的字段数量改变对象数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:45:18.227

了解如何使用 NSMutableArray：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

它允许您“即时”添加和删除对象，就像`Vector`在许多其他语言中使用 a 一样。（Java、ActionScript、C++...）

**示例：** （someValue 是先前声明的变量）

```
stuff = [[NSMutableArray alloc] initWithCapacity: someValue];
[stuff insertObject:object1 atIndex:0];
[stuff insertObject:object2 atIndex:1];
[stuff insertObject:object2 atIndex:2]; 
```

...

这段代码是用特定数量的对象来初始化它，这似乎是你要找的。NSMutableArray 还允许您在以后调整数组中的对象数量。

# php - 如何忽略第一个循环并从 foreach 中的第二个循环继续？

> ID：10465344
> 
> 赞同：5
> 
> 时间：2012-05-05T19:39:50.163
> 
> 标签：php

我使用 foreach 循环，但它总是在第一个循环中给出一个奇怪的结果，但其他的都很好，所以我想删除第一个循环并从第二个循环继续......

我的代码是

```
foreach($doc->getElementsByTagName('a') as $a){
foreach($a->getElementsByTagName('img') as $img){
   echo $a->getAttribute('href');
   echo $img->src . '<br>';
}
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T19:42:43.010

```
$counter = 0;

foreach($doc->getElementsByTagName('a') as $a){
foreach($a->getElementsByTagName('img') as $img){

   if ($counter++ == 0) continue;

   echo $a->getAttribute('href');
   echo $img->src . '<br>';
}
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-05T19:44:44.333

为了跳过第一个循环，我能想到的最简单的方法是使用标志

前任：

```
 $b = false;
 foreach( ...) {
    if(!$b) {       //edited for accuracy
       $b = true;
       continue;
    }
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T19:44:22.830

尝试这样的事情

```
foreach($doc->getElementsByTagName('a') as $a)
{
    $count = 0;
    foreach($a->getElementsByTagName('img') as $img)
    {
        if(count == 0)
        {
            $count++;
            continue;
        }
        echo $a->getAttribute('href');
        echo $img->src . '<br>';
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T19:43:36.243

```
$nm = 0;
foreach($doc->getElementsByTagName('a') as $a){
  if($nm == 1){
    foreach($a->getElementsByTagName('img') as $img){
       echo $a->getAttribute('href');
       echo $img->src . '<br>';
    }
  }
  $nm=1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-11T19:16:02.633

如果您不想定义额外的计数器：

```
 foreach($doc->getElementsByTagName('a') as $a){
    foreach($a->getElementsByTagName('img') as $img){

        if ( $a === reset( $doc->getElementsByTagName('a') ) && $img === reset( $a->getElementsByTagName('img') ) ) continue;

       echo $a->getAttribute('href');
       echo $img->src . '<br>';
    }
} 
```

我不知道哪个会更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-23T06:15:25.873

你也可以在 PHP 中尝试数组切片：

```
foreach(array_slice($doc->getElementsByTagName('a'),1) as $a){
   foreach(array_slice($a->getElementsByTagName('img'),1) as $img){
      echo $a->getAttribute('href');
      echo $img->src . '<br>';
   }
} 
```

# ruby - Ruby：用 MiniTest 模拟类方法？

> ID：10465350
> 
> 赞同：20
> 
> 时间：2012-05-05T19:40:59.783
> 
> 标签：ruby, mocking, minitest

我正在使用[MiniTest 2.12.1](https://github.com/seattlerb/minitest)（Ruby >= 1.9 附带的最新版本的股票测试框架），我不知道如何用它模拟**类方法，就像**[Mocha](http://gofreerange.com/mocha/docs/file.misc.html)之类的方法一样， 例如：

```
product = Product.new
Product.expects(:find).with(1).returns(product)
assert_equal product, Product.find(1) 
```

我已经涉足互联网好几天了，我仍然要找到一个合理的答案。请帮忙？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T21:17:39.480

如果您坚持使用 2.12.1，这可能对您没有帮助，但看起来他们在 HEAD 中的 minitest/mock 中添加了方法[存根](https://github.com/seattlerb/minitest/commit/37e1a04573f1047a1772a21cbfe48823d2c27d7e#lib/minitest/mock.rb)。

所以，如果你更新到 minitest HEAD，我认为你可以这样做：

```
product = Product.new
Product.stub(:find, product) do
  assert_equal product, Product.find(1)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-08T11:46:30.243

我所做的是简单地存根类方法并将其替换为我自己的 lambda 函数，这证明调用了原始函数。您还可以测试使用了哪些参数。

例子：

```
 test "unsubscribe user" do
    user = create(:user, password: "Secret1", email: "john@doe.com", confirmation_token: "token", newsletter_check: false)

    newsletter = create(:newsletter, name: "Learnlife News")
    unsubscribe_function = -> (email:) { @unsubscribed_email = email }

    Hubspot::Subscription.stub :unsubscribe_all, unsubscribe_function do
      get user_confirmation_en_path(confirmation_token: "token")
    end

    assert_equal @unsubscribed_email, "john@doe.com"
  end 
```

# android - PendingIntent 什么时候开始活动

> ID：10465351
> 
> 赞同：0
> 
> 时间：2012-05-05T19:41:06.230
> 
> 标签：android, android-pendingintent

`PendingIntent`绑定到通知管理器的活动何时开始？它是在用户点击通知还是通知管理器创建通知时开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:45:47.373

当用户点击通知时。

# javascript - JQuery 事件在动态内容中重复

> ID：10465356
> 
> 赞同：1
> 
> 时间：2012-05-05T19:41:35.303
> 
> 标签：javascript, jquery

在我正在制作的网站页面中，按下按钮会导入另一个 php 页面的内容并将其附加到页面上。但是，该其他页面包含 JQuery，并且每次我导入内容时，单击事件($(".ExpandRoleButton").click) 都会在以前的元素上重复。因此，如果我添加 3 个元素；

元素1：重复点击事件3次

元素 2：重复点击事件 2 次

元素 3：运行一次点击事件

```
$("#AjouterPiece").click(function() 
{
    $.blockUI({ message: '<img src="images/ChargementGeant.gif"/><br/><h1>Un moment svp.</h1>' });
    $.post("wizardincl/piste.php", {newPiste: newPiste}, function(data)
    {
        $("#wizardPistes").append(data);
        $.unblockUI();
        $(".divNewPiste").fadeTo(300, 1);
        $("#nbExemplaires").attr("max", newPiste);
        newPiste++

        $( ".ExpandRoleButton").click(function()
        {
            if ($(this).hasClass('RetractRoleButton'))
            {
                $(this).find('img').attr('src', 'images/ExpandPetitNoir.png');
                var that = $(this);
                $(this).parent().parent().parent().parent().next().slideUp(500, function() {
                    that.parent().parent().parent().parent().css('border-bottom', '1px solid #FF790B');
                });
                $(this).removeClass('RetractRoleButton');
            }
            else
            {
                $(this).parent().parent().parent().parent().css('border-bottom', 'none');
                $(this).find('img').attr('src', 'images/ExpandPetitNoirRetour.png');
                $(this).parent().parent().parent().parent().next().slideDown(500);
                $(this).addClass('RetractRoleButton');
            }
        });

    });
}); 
```

目前，部分 JQuery 网站似乎已关闭，经过一番搜索，我找不到任何解决问题的方法。有什么办法可以防止代码像这样重复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:46:18.193

您可以传入事件，`.click(function(e) {...})`然后调用`e.stopImmediatePropagation()`以仅触发当前处理程序，但这只能解决症状，而不是真正的问题。

编辑：确保您只通过向选择器添加上下文来绑定按钮的新实例，例如`$('.ExpandRoleButton', data)`. 由于您在一个类上进行匹配，因此该选择器将抓取页面上的所有按钮；上下文允许您仅选择结果中的一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T19:49:15.017

这是因为您将事件绑定到多个事件处理程序。第一次`#AjouterPiece`单击时，所有`.ExpandRoleButton`按钮都绑定到 onclick 处理程序。

下次`#AjouterPiece`单击时，它会再次绑定。

为防止这种情况，您必须`unbind`在绑定之前使用以下代码单击处理程序

```
$( ".ExpandRoleButton").unbind('click') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T16:19:02.123

一个好的做法（只是为了防止发生此类问题，添加了意外的多次点击处理程序）是......

```
$(".selector").off('click').on('click', function... 
```

或者

```
$(".selector").unbind('click')...
$(".selector").bind('click')... 
```

# jquery - jquery crossfade - 努力让 jquery crossfade 效果起作用

> ID：10465363
> 
> 赞同：1
> 
> 时间：2012-05-05T19:42:56.720
> 
> 标签：jquery, jquery-plugins

这是我处理背景图像的 css - 我在样式表的另一部分设置了宽度和高度，所以这不是问题：

```
#mainphoto.bg1 { background-image:url(../images/site/homepg_img_1.jpg); background-repeat:no-repeat;}
#mainphoto.bg2 { background-image:url(../images/site/homepg_img_2.jpg); background-repeat:no-repeat;}
#mainphoto.bg3 { background-image:url(../images/site/homepg_img_3.jpg); background-repeat:no-repeat;}
#mainphoto.bg4 { background-image:url(../images/site/homepg_img_4.jpg); background-repeat:no-repeat;}
#mainphoto.bg5 { background-image:url(../images/site/homepg_img_5.jpg); background-repeat:no-repeat;}
#mainphoto.bg6 { background-image:url(../images/site/homepg_img_6.jpg); background-repeat:no-repeat;} 
```

我的 HTML 非常基本：

```
 <div id="mainphoto">
       <div id="img-controls"></div>
 </div> 
```

最后是jquery：

```
// create slidearray
 var slideArray = ["bg1", "bg2", "bg3", "bg4", "bg5", "bg6"];

        // add first image to the mainphoto panel 
        $('#mainphoto').addClass(slideArray[0]);

        // add the image navigation
        $('#img-controls').append('<ul id="mybg"></ul>');

        // get the slidelength
        var slideLength = slideArray.length;

        // create the loop and stuff
        for(i=0; i < slideLength; i++) {
            var slideText = i + 1;
            $('#mybg').append('<li class="bg'+slideText+'"><a href="#" rel="bg'+slideText+'"><img src="images/site/img-bullets.png" border="0" ></a></li>');
        }

        $('#mybg li a').bind('click', function(){
            var numSlide = $(this).attr('rel');
            var img2rem = $('#mainphoto').attr('class');

            $('#mainphoto').fadeOut('normal', function(){
                $('#mainphoto').addClass(numSlide).fadeIn('slow', function() {
                    $('#mainphoto').removeClass(img2rem);                           
                });
            });

            $('#mybg li a').removeClass('active');
            $(this).addClass('active');

            console.log("numslide: " +numSlide);
            console.log("img2rem: " +img2rem);

        }); 
```

所以我想要它做的是我制作的 css 类之间的交叉淡入淡出效果。但基本上它所做的是初始图像淡出，然后新图像淡入。但我希望这些动画同时发生，创建交叉淡入淡出效果。

我想做的下一件事是让它们自动播放，这样用户就不必单击项目符号来加载下一个图像。我不太确定该怎么做。

我见过的大多数 jquery 滑块都使用图像标签，但我必须将图像用作背景图像，因为我有导航和页面中正在进行的其他事情，这会使使用标签变得复杂。我现在只是有点困惑如何使这种交叉淡入淡出效果发生。非常感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:39:45.150

您可以使用 Nivoslider [http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)。这是一个免费使用的 jQuery 插件，它有很多很酷的过渡，甚至还有自动播放功能。它还可以节省您的编码时间..

# javascript - 将 index.html#divID 设置为我的主页？

> ID：10465364
> 
> 赞同：1
> 
> 时间：2012-05-05T19:43:09.423
> 
> 标签：javascript, html

**嗨，我的问题是，是否可以将 index.html#box02 设置为我的主页而不是 index.html？**

我正在建立一个带有平移 div 的网站。

就像[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

由于平移效果，我将整个网站设计在一个 html 文件 - index.html 上。我想这不是最好的方法，但我不想破坏动画效果。或者还有其他更好的方法吗？

所以我所做的是创建 index.html 并创建许多 div，例如：

```
example.com/index.html (Gallery)
example.com/index.html#box01 (About Us)
example.com/index.html#box02 (Homepage)
example.com/index.html#box03 (Contact Us) 
```

我尝试使用以下方式重定向：

1.  .htaccess（尝试在 .htaccess 中输入“DirectoryIndex index.html#box02”但无法正常工作）
2.  尝试在 index.html 中使用 javascript 进行重定向：

    ```
    <script type ="text/javascript">
    function init(){
    location.href = "index.html#box02";
    }
    </script>

    <body onLoad="init()"> 
    ```

（但有一个滞后时间，因为它先加载 index.html，然后加载 index.html#02）

**是否可以直接加载 index.html#box02 而不是 index.html？**)

想在这里获得更有经验的网页设计师的帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:56:21.193

之后的所有`#`内容都是由浏览器（而不是服务器）处理的，因此服务器上的更改不会真正产生影响。您的 javascript 解决方案是解决此问题的好方法。

您可以解决此问题的另一种方法是通过可能在加载时呈现它来使内容本身`example.com/index.html#box02`可用。`index.html`

尽管如此，只要 javascript 呈现平移效果（我相信是这种情况），您提到的 javascript 解决方案的延迟时间就会出现。我认为您的 javascript 解决方案不会在这里增加明显的延迟

# security - 跟踪我的服务器上的特定端口

> ID：10465370
> 
> 赞同：0
> 
> 时间：2012-05-05T19:43:44.723
> 
> 标签：security, nmap

在我的 apache 服务器上，想通过我家中的本地 pc 跟踪特定端口，那么 nmap 怎么可能，假设端口号是 3080。任何命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:55:50.653

看一下`tcpdump`命令：

```
$ sudo tcpdump -n -i eth2 dst port 3080
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth2, link-type EN10MB (Ethernet), capture size 65535 bytes 
```

这在`eth2`接口（我的无线连接）上侦听到端口 3080 的传出连接。

在另一个外壳中：

```
$ telnet google.com 3080 
```

要查看连接尝试：

```
16:52:38.073965 IP 192.168.1.10.51290 > 74.125.227.70.3080: Flags [S], seq 4004145863, win 14600, options [mss 1460,sackOK,TS val 38502 ecr 0,nop,wscale 4], length 0
16:52:39.071494 IP 192.168.1.10.51290 > 74.125.227.70.3080: Flags [S], seq 4004145863, win 14600, options [mss 1460,sackOK,TS val 38752 ecr 0,nop,wscale 4], length 0
16:52:41.075491 IP 192.168.1.10.51290 > 74.125.227.70.3080: Flags [S], seq 4004145863, win 14600, options [mss 1460,sackOK,TS val 39253 ecr 0,nop,wscale 4], length 0
^C
3 packets captured
3 packets received by filter
0 packets dropped by kernel 
```

另请[参阅](http://www.wireshark.org/)

# php - 变量在 PHP 中不起作用

> ID：10465375
> 
> 赞同：-1
> 
> 时间：2012-05-05T19:44:24.460
> 
> 标签：php, ajax, database, image, include

我正在使用 AJAX 和 PHP 从数据库中检索数据。在数据库中，其中一列包含图像文件夹的路径。我将路径的值保存在名为 $folder 的 PHP 变量中。这可以在 getuser.php 代码中看到。
我希望此变量在 one.php 中可见/可用，以便可以填充使用此变量的图像。我该怎么做。我也尝试过包含php，但没有用。

**获取用户.php**

```
 <?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'san', '123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("holidayNet", $con);

$sql="SELECT * FROM image WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Picture</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
    $folder = $row['FirstName'];
  echo "<tr>";
 echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";

  /*echo "<td>" . $row['Job'] . "</td>";*/
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);

?> 
```

**一个.php**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Sn Qb</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br />
<div id="txtHint"><b>Person info will be listed here.</b></div><br />

<img src="<?php echo $folder;?>/pic1.jpg" />
<img src="<?php echo $folder;?>/pic2.jpg" />
<img src="<?php echo $folder;?>/pic3.jpg" />
<img src="<?php echo $folder;?>/pic4.jpg" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:02:28.280

嘿，您正在 AJAX 调用的 PHP 文件 (getuser.php) 中创建变量名称 $folder。但它在文件名 one.php 中不可用。

只有您从 getuser.php 回显的内容才会在 JS 变量中可用`xmlhttp.responseText`

因此，您将获得 getuser.php 中回显的所有人员信息，但不会获得 $folder 变量。

由于您已经专门硬编码了 4 张图像。我建议您在 getuser.php 中也回显 img 标签以及所选人员数据库中的其他信息。

```
while($row = mysql_fetch_array($result))
{
    $folder = $row['FirstName'];
    echo "<tr>";
    echo "<td>" . $row['FirstName'] . "</td>";
    echo "<td>" . $row['LastName'] . "</td>";
    echo "<td>" . $row['Age'] . "</td>";
    echo "<td>" . $row['Hometown'] . "</td>";

    /*echo "<td>" . $row['Job'] . "</td>";*/
    echo "</tr>";
}
echo "</table>";

for($i = 0; $i < 4; $i++)
{
    echo '<img src="'.$folder.'/pic'.($i+1).'.jpg" />';
} 
```

并从 one.php 页面中删除这些图像标签

另一个解决方案：我可以给出的建议是添加一些分隔符来区分这两件事。一个是您要打印的表格和 $folder 变量值。例如：考虑分隔符####

第 1 步：所以现在您的 getuser.php 代码将是

```
while($row = mysql_fetch_array($result))
{
    $folder = $row['FirstName'];
    echo "<tr>";
    echo "<td>" . $row['FirstName'] . "</td>";
    echo "<td>" . $row['LastName'] . "</td>";
    echo "<td>" . $row['Age'] . "</td>";
    echo "<td>" . $row['Hometown'] . "</td>";

    /*echo "<td>" . $row['Job'] . "</td>";*/
    echo "</tr>";
}
echo "</table>####".$folder; 
```

第 2 步：更改 one.php 以分隔 2 个值

```
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
// split is the function which breaks the string with the value provided and then creates an array of the parts.
        var arrResponse = (xmlhttp.responseText).split("####");
        // added || below to validate the index 1 of arrResponse. if xmlhttp.responseText does not have #### it wont break the string and hence wont have the folderName part, in such cases javascript will give undefined value, by adding || we tell if value is present take the present value otherwise take it as an empty string ''
    var folderName = arrResponse[1] || ''
        document.getElementById("txtHint").innerHTML=arrResponse[0];

        // we will fetch all the image tags from your html page
        var arrImgs = document.getElementsByTagName('img');
        var imgCount = arrImgs.length;
        for(i = 0; i < imgCount; i++)
        {
            arrImgs[i].setAttribute('src', folderName+'/pic'+(i+1)+'.jpg');
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:56:44.327

你做错的是你把东西混合在一起，特别是 PHP 和 HTML，如果你愿意，我可以更好地解释，但目前我只会尝试解释你的问题的解决方案，我希望这对你。

1/ $folder 将无法从 one.php 访问

2/ 要从 $folder 中获取信息，您最好在 Ajax Query 中获取它，然后您可以使用 Javascript 函数更改属性

3/ 另一个解决方案是，由于您正在为 getuser.php 中的表生成 html 代码，您还可以生成更多包含图像标签的行

我解释得好吗？请如果没有，我准备再试一次:)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:21:16.950

根据您的要求，我会告诉您一个可能的解决方案，使用与您之前相同的方式

首先，你需要改变你的两个文件

1/ 转到 getuser.php 并删除所有回显，将字符串存储在变量中

2/比，在循环之后用你的两个变量（$folder和包含html字符串的新变量）创建一个索引数组

3/ 之后，您可以使用“json_encode”函数将数组编码为 json 格式（自 PHP5 起可用）

4/ 你还需要做的就是在 one.php 页面中，当你得到结果时你需要用“eval”函数（一个原生 Javascript 函数）解码你得到的字符串，这个函数将返回一个索引数组（具有相同的索引）并将html字符串放在“txtHint” div中，使用图像标签中其他变量的内容（使用javascript函数）

这足够清楚吗？（对不起，我的英语不是那么好:(）

# java - MalformedURLException 错误

> ID：10465376
> 
> 赞同：1
> 
> 时间：2012-05-05T19:44:35.863
> 
> 标签：java, malformedurlexception

我的朋友让我在这里发布他的问题，它是：

我有一个问题......我的代码运行得很好，突然出现了一个错误。我不知道它有什么问题，也许你们可以告诉我一些我正在犯的明显错误。

那是错误通信：

```
> Exception in thread "main" java.net.MalformedURLException: no
> protocol: 
>         at java.net.URL.<init>(URL.java:583) 
>         at java.net.URL.<init>(URL.java:480) 
>         at java.net.URL.<init>(URL.java:429) 
>         at pogoda.Okienko.getJPanel(Okienko.java:120) 
>         at pogoda.Okienko.getJContentPane(Okienko.java:101) 
>         at pogoda.Okienko.initialize(Okienko.java:59) 
>         at pogoda.Okienko.<init>(Okienko.java:49) 
>         at pogoda.Pogoda.main(Pogoda.java:119) 
```

这是我的代码：

```
package pogoda;

import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JLabel;
import java.awt.Rectangle;
import java.awt.GridBagLayout;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public final class Okienko extends JFrame
{

        public static final long serialVersionUID = 1L;
        public JPanel jContentPane = null;
        public JLabel jLabel = null;
        public JLabel jLabel1 = null;
        public JLabel LabelTemp = null;
        public JLabel LabelOdczuwalna = null;
        public JPanel jPanel = null;

        public Okienko(double temperatura, double odczuwalna, String adres) throws MalformedURLException
        {
                super();
                initialize(temperatura, odczuwalna, adres);
        }

public void initialize(double temperatura, double odczuwalna, String adres) throws MalformedURLException
        {
                this.setLocation(350, 250);
                this.setSize(350, 350);
                this.setContentPane(getJContentPane(temperatura, odczuwalna,adres));
                this.setTitle("Pogoda");
                this.setResizable(false); // jesli damy na true bedziemy mogli zmienic rozmiar naszego okienka
                this.setDefaultCloseOperation(EXIT_ON_CLOSE);

        }

public JPanel getJContentPane(double temperatura, double odczuwalna, String adres) throws MalformedURLException
        {
                if (jContentPane == null)
                {
                        LabelOdczuwalna = new JLabel();
                        LabelOdczuwalna.setBounds(new Rectangle(200, 50, 100, 20));
                        odczuwalna *=100;
                        int pomoc=(int) odczuwalna;
                        odczuwalna = ((double)pomoc)/100;
                        LabelOdczuwalna.setText("" + odczuwalna + " °C");
                        LabelTemp = new JLabel();
                        LabelTemp.setBounds(new Rectangle(200, 10, 100, 20));
                        temperatura *=100;
                        pomoc = (int)temperatura;
                        temperatura = ((double)pomoc)/100;
                        LabelTemp.setText("" + temperatura + " °C");
                        jLabel1 = new JLabel();
                        jLabel1.setBounds(new Rectangle(5, 50, 300, 20));
                        jLabel1.setText("Temperatura odczuwalna");
                        jLabel = new JLabel();
                        jLabel.setBounds(new Rectangle(5, 10, 300, 20));

                        jLabel.setText(" Aktualna temperatura ");
                        jContentPane = new JPanel();
                        jContentPane.setLayout(null);
                        jContentPane.add(jLabel, null);
                        jContentPane.add(jLabel1, null);
                        jContentPane.add(LabelTemp, null);
                        jContentPane.add(LabelOdczuwalna, null);
                        jContentPane.add(getJPanel(adres), null);
                }
                return jContentPane;
        }

 public JPanel getJPanel(String adres) throws MalformedURLException
 {
     if (jPanel == null)
     {
         jPanel = new JPanel();
         jPanel.setLayout(new GridBagLayout());
         jPanel.setBounds(new Rectangle(75, 100, 150, 150));
     }

     java.net.URL where = new URL(adres);
     ImageIcon icon = new ImageIcon(where);
     JLabel pomocnik = new JLabel();
     pomocnik.setIcon(icon);
     jPanel.add(pomocnik);
     return jPanel;
 } 
```

}

```
package pogoda;

/**
 *
 * @author mateusz
 */

import com.sun.corba.se.impl.logging.OMGSystemException;
import java.io.*;
import java.net.MalformedURLException;
import java.net.URISyntaxException;
import java.net.URL;
import java.net.URLConnection;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.imageio.ImageIO;
import javax.swing.JFrame;

import java.net.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.io.*;

public class Pogoda
{

        public int counter = 1;
        public static String linia1 =
                "<span class=\"twc-forecast-when twc-none\">Right Now</span>";
        public static String linia11 =
                "<img src=\""+
                ".+"+
                "\" alt=";

        public static String linia2 =
                "<td class=\"twc-col-1 twc-forecast-temperature\"><strong>"+
                "\\d+"+
                "&deg;F</strong></td>";
        public static String linia3 =
                "<td class=\"twc-col-1 twc-forecast-temperature-info\">Feels Like: <strong>"+
                "\\d+"+
                "&deg;</strong>";

        public static void main(String args[]) throws IOException
        {

                int temperatura =0;
                int odczuwalna =0;
                String adresObrazka="";
                String help = "";
                String linia = "";
                URL strona = new URL("http://www.weather.com/weather/today/Wroclaw+Poland+PLXX0029");
                URLConnection con = (URLConnection) strona.openConnection();

                con.connect();
                BufferedReader in = new BufferedReader(new InputStreamReader(strona.openStream()));
                while((linia = in.readLine()) != null)
                {
                                Pattern p = Pattern.compile(linia2);
                                Matcher m = p.matcher(linia);
                                if(m.find())
                                {

                                        help = m.group().substring(55,m.group().length()-20);
                                        temperatura = Integer.parseInt(help);
                                        System.out.println(temperatura);

                                }
                                p = Pattern.compile(linia3);
                                m = p.matcher(linia);
                                if(m.find())
                                {
                                        System.out.println("znaleziono odczuwalna");
                                        help = m.group().substring(72,m.group().length()-14);
                                        System.out.println(help);
                                        odczuwalna=Integer.parseInt(help);
                                }
                                p = Pattern.compile(linia1);
                                m = p.matcher(linia);
                                if(m.find())
                                {
                                        linia = in.readLine();
                                        p = Pattern.compile(linia11);
                                        m = p.matcher(linia);
                                        if(m.find())
                                        {
                                                System.out.println("Pobrałem adres obrazka");
                                                System.out.println(m.group().substring(10,m.group().length()-6));
                                                adresObrazka = m.group().substring(10,m.group().length()-6);
                                        }
                                }

                }

                double temperatura1 = temperatura;
                double odczuwalna1 = odczuwalna;
                odczuwalna1 = ((odczuwalna1-32)*5)/9;
                temperatura1 = ((temperatura1-32)*5)/9;
                System.out.println("Dane pobrane");
                System.out.println("Temperatura " + temperatura1 + "\n Odczuwalna " + odczuwalna1 + "\n Adres obrazka " + adresObrazka);
                Okienko o = new Okienko(temperatura1,odczuwalna1,adresObrazka);
                o.setVisible(true);
                o.jContentPane.setVisible(true);
        }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:59:50.410

从外观上看，该应用程序执行以下操作：

*   检索特定网页的内容
*   使用正则表达式从上述网页中检索特定数据
*   提取的项目之一是图像的 URL
*   **该 URL 永远不会被验证为有效**
*   有时 URL 无效并抛出 MalformedURLException

由于抓取的网页在应用程序外部，因此无法保证提取的 URL 存在、有效或与上周相同（无论正则表达式编写得如何）。只有一个解决方案，那就是优雅地失败（可能在这些情况下显示另一张图像）并可选地通知应用程序维护人员更新用于提取信息的正则表达式和/或网页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:17:42.040

我同意@erikxiv (+1) 但想补充一点。首先，图像 URL 不一定是绝对的，即看起来像一个完整的 URL，例如`http://host/path/img.jpg`. 它可以是相对于页面底部定义的相对引用，例如`images/theimage.jpg`. 您必须检测这种情况（例如使用正则表达式）并在调用构造函数之前将完整的 URL 规范创建为字符串`URL`。

请不要将其视为个人信息，但您的代码包含许多用于字符串解析的硬编码常量。即使它现在对您有用，它也非常脆弱，并且每次都可能被破坏和失败`weather.com`，即使在他们的网站上进行很小的更改。我建议您使用正则表达式，或者更好地使用用 java 实现的广泛可用的 HTML 解析器。

最后的评论。您在代码中使用波兰语名称。我相信这会让不懂波兰语的人很难理解你的代码。就我所知的俄语而言，这并没有让我太困扰，但这里的大多数人都没有这个特权。

无论如何，祝你发展和学习好运。

# ruby - 在倾斜模板中屈服时出现 LocalJumpError

> ID：10465379
> 
> 赞同：0
> 
> 时间：2012-05-05T19:44:47.967
> 
> 标签：ruby, tilt

我正在尝试使用[Brochure](https://github.com/sstephenson/brochure)并使用 Slim 来呈现模板。一切都很好，除了我似乎无法让布局正常工作，`yield`模板中的 a 会引发 LocalJumpError。关于如何进行的任何想法？

```
----/templates/index.html.slim-----
==render "shared/layout"

----/shared/_layout.html.slim-----
#pg
  ==yield #--->fails with a LocalJumpError here 
```

我用 Slim 和 ERB 都试过了，我得到了同样的错误。

# mysql - 删除MySQL中两个单词之间的空格

> ID：10465380
> 
> 赞同：2
> 
> 时间：2012-05-05T19:44:47.930
> 
> 标签：mysql, sql

考虑我的数据库中的以下示例消息：

```
I dont agree with you
That is something I dont do
This is another string with dont
String without d o n t 
```

每当一条消息中包含字符串“dont”时，我想删除它后面的空格，以便它成为一个带有以下单词的词：

```
I dontagree with you
That is something I dontdo
This is another string with dont
String without d o n t 
```

我的数据库中有数千条此类消息。我可以在 PHP 中查询数据库，然后执行

```
$message = str_replace(' dont ', ' dont', $message) 
```

但这可能会比在 SQL 中花费更多的时间。是否可以在 SQL 中进行相同的操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:50:37.897

使用 SQL replace() 函数：

```
update mytable set
mycol = replace(mycol, ' dont ', ' dont') 
```

你是对的 -在 SQL 中会快*很多*

# php - PHP Header Redirect 无法在现场工作，已研究，仍需要帮助

> ID：10465383
> 
> 赞同：-1
> 
> 时间：2012-05-05T19:45:01.977
> 
> 标签：php, redirect, header, warnings

```
if(isset($_POST['submit2']))
{
if($_POST['linklabel'] == '')
{
    header('Location: index.php?VIEW=BLAH&message=failure');
}
else
{ 
```

这是我的代码，它给了我典型的重定向错误：警告：无法修改标头信息-标头已由（输出开始于/home/content/74/8256574/blah/blah/index.php:24）在/home/content/74/8256574/blah/blah/blah/blah.php 在第 14 行。

上面的标头重定向是第 14 行的内容。在 index.php 页面的第 24 行，有一个 css 文件（不要认为这会导致问题..）。

我正在提交一个表单，并检查表单是否有空值。如果它找到一个空值，使用 &message=failure 重定向到上面的 URL

我知道这里有很多问题都在问同样的问题，但我仍然无法解决我的问题。拜托，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:46:44.317

如果数据已经发送到浏览器，则不能修改标头信息。简单的解决方法是缓冲输出。

```
ob_start(); // Put at the top of your script.
header('Location: index.php?VIEW=BLAH&message=failure');
ob_end_flush(); 
```

# python - 替换特定集合元素的pythonic方法是什么？

> ID：10465390
> 
> 赞同：12
> 
> 时间：2012-05-05T19:45:56.013
> 
> 标签：python

我有一个 python 集合 set([1, 2, 3]) 并且总是想用另一个值替换集合的第三个元素。

它可以像下面这样完成：

```
def change_last_elemnent(data):
    result = []
    for i,j in enumerate(list(data)):
        if i == 2:
            j = 'C'
        result.append(j)
    return set(result) 
```

但是有没有其他的pythonic方法可以做到这一点，更聪明，更易读？

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-05T19:47:22.217

集合是无序的，因此“第三个”元素实际上没有任何意义。这将删除任意元素。

如果这是您想要做的，您可以简单地执行以下操作：

```
data.pop()
data.add(new_value) 
```

如果您希望按值从集合中删除一个项目并替换它，您可以执行以下操作：

```
data.remove(value) #data.discard(value) if you don't care if the item exists.
data.add(new_value) 
```

如果要保留有序数据，请使用列表并执行以下操作：

```
data[index] = new_value 
```

要显示集合没有排序：

```
>>> list({"dog", "cat", "elephant"})
['elephant', 'dog', 'cat']
>>> list({1, 2, 3})
[1, 2, 3] 
```

您可以看到，'3' 是由 set 组成的列表的第三个元素，这只是 CPython 实现的巧合`{1, 2, 3}`。

您的示例代码在其他方面也存在严重缺陷。`new_list`不存在。任何时候都不会从列表中删除旧元素，循环遍历列表的行为完全没有意义。显然，这些都不重要，因为整个概念都是有缺陷的。

# android - 使用 Thread.sleep() 暂停和恢复应用程序

> ID：10465391
> 
> 赞同：0
> 
> 时间：2012-05-05T19:46:00.167
> 
> 标签：android, android-lifecycle

嗨，
在我的应用程序中，我试图使用 Thread.sleep(100) 来暂停我的线程，而它的背景是为了使用更少的 CPU，但是当我打开它时它会冻结。
我意识到`onResume`当我重新打开应用程序时没有调用它。

任何想法为什么？

```
public void onPause() {
        pause = true;
        Log.d("mSTATE","THREADPAUSE");
    }

public void onResume() {
    pause = false;
        running = true;
       Log.d("mSTATE","THREADRESUME");
    }
public void run() {

    while(running){
         while(pause && running){
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
         }

         while (!pause && running) {
             Canvas c = null;
             try {
                 c = sHolder.lockCanvas(null);
                 synchronized (sHolder) {
                     doDraw(c);
                     powerUps();
                 }
             } finally {
                 if (c != null) {
                     sHolder.unlockCanvasAndPost(c);
                 }
             }
         }
    }
         Log.d("mState","EndofRun");              
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:50:02.107

当你让你的线程进入睡眠状态时，你也会阻塞 UI 线程，从而导致你的应用程序冻结。

您需要以 Android 方式检查线程以获得最佳性能。

[http://developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

# python - 用于 postgresql 的驱动程序 python

> ID：10465393
> 
> 赞同：7
> 
> 时间：2012-05-05T19:46:06.313
> 
> 标签：python, postgresql, driver

哪个是python中连接postgresql的最佳驱动程序？

有几种可能性，[http://wiki.postgresql.org/wiki/Python](http://wiki.postgresql.org/wiki/Python)但我不知道哪个是最佳选择

任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T19:49:03.333

psycopg2 是每个人都与 CPython 一起使用的。不过，对于 PyPy，你会想看看纯 Python 的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-05T20:20:30.510

I would recommend [sqlalchemy](http://www.sqlalchemy.org/) - it offers great flexibility and has a sophisticated inteface.

Futhermore it's not bound to postgresql alone.

Shameless c&p from the [tutorial](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html):

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

# an Engine, which the Session will use for connection
# resources
some_engine = create_engine('postgresql://scott:tiger@localhost/')

# create a configured "Session" class
Session = sessionmaker(bind=some_engine)

# create a Session
session = Session()

# work with sess
myobject = MyObject('foo', 'bar')
session.add(myobject)
session.commit() 
```

* * *

Clarifications due to comments (update):

[sqlalchemy](http://www.sqlalchemy.org/) itself is not a driver, but a so called *Object Relational Mapper*. It does provide and include it's own drivers, which in the postgresql-case is [libpq](http://www.postgresql.org/docs/current/static/libpq.html), which itself is wrapped in [psycopg2](http://initd.org/psycopg/docs/).

Because the OP emphasized he wanted the "best driver" to "**connect** to postgresql" i pointed sqlalchemy out, even if it might be a false answer terminology-wise, but intention-wise i felt it to be the more useful one.

And even if i do not like the "hair-splitting" dance, i still ended up doing it nonetheless, due to the pressure felt coming from the comments to my answer.

I apologize for any irritations caused by my slander.

# c - C中的POSIX线程本地数据

> ID：10465405
> 
> 赞同：3
> 
> 时间：2012-05-05T19:48:33.363
> 
> 标签：c, linux, multithreading, pthreads

我试图给每个线程一些线程特定的数据；这可以使用线程参数来完成吗？

那么在创建线程时，我传递了一个变量，在线程函数中，我改变了它的值并将其用作每个线程的特定数据？

```
int main(void){
    ...
    int Tparam = 0;
    ...
    rc = pthread_create(&threads[c1], NULL, Thread_Pool, (void *)Tparam);
    ...
} 
```

然后在 Thread_Pool 函数中我像这样使用它

```
void *Thread_Pool(void *param){
    int id;
    id = (int) param;
    id = value; // can this value be a specific value for this thread?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:14:44.257

如果您展示了如何`Tparam`声明它可能会有所帮助。

但是，如果您希望每个线程都有自己的空间来存储一些数据，那么您可以安排将该空间作为函数的参数传递给线程。例如：

```
enum { NTHREADS = 10 };

struct TLS_Data
{
    int   id;
    char  buffer[2048];
    size_t index;
} data[NTHREADS];

for (int c1 = 0; c < NTHREADS; c1++)
{
    data[c1].index = c1;
    data[c1].id = 0;
    data[c1].buffer[0] = '\0';
    int rc = pthread_create(&threads[c1], NULL, Thread_Pool, &data[c1]);
    ...handle errors, etc...
} 
```

注意 ; 的最后一个参数没有强制转换`pthread_create()`。`void *`当范围内有原型时，没有必要将指针转换为。

在您的`Thread_Pool`中，您似乎想将参数视为整数；这也可以做到。传递一个指向整数的指针是最干净的；如果你真的坚持，你可以直接传递整数值：

```
uintptr_t value = c1 + 10;

rc = pthread_create(&threads[c1], NULL, Thread_Pool, (void *)value); 
```

因为`value`is的类型`uintptr_t`，你知道它能够保存一个 void 指针，所以它为你提供了最大的工作机会。但是您正在与类型系统作斗争，这使得编写干净的代码变得更加困难。

`Thread_Pool()`要注意的一件事是，如果应该看到不同的值，您需要确保传递给线程函数（在您的示例中）的数据不会在线程之间共享。无法保证线程执行的顺序，所以如果你犯了如下错误：

```
uintptr_t value = c1 + 10;

rc = pthread_create(&threads[c1], NULL, Thread_Pool, &value); 
```

（并且该代码处于循环中），则无法保证每个线程函数会看到什么。要小心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:12:20.897

> 这个值可以是这个线程的特定值吗？

嗯，首先，你可能想要这个：

```
int id = *((int*) param); 
```

即你需要在给它一个类型的指针*后取消引用参数指针。*您不能取消引用 void 指针，因为 void*没有 type*。

现在 - 这里发生了什么？好吧，首先我们需要了解一下线程。

首先 - Linux 内核中的线程和进程没有[区别](https://stackoverflow.com/a/809049/257111)。绝对没有。它们都是执行或任务的上下文。但是，一个主要区别是线程任务共享数据——线程堆栈除外。阅读该答案，您可以看到线程与其创建者共享几乎所有其他内容。

但是，堆栈不能共享。堆栈跟踪许多事情，例如程序在执行方面的位置、某些系统上的返回值和函数参数。在函数内声明的自动存储持续时间变量（没有任何其他修饰符的变量）也存储在堆栈中。

这意味着 - 在线程函数中声明的变量对于该线程是唯一的。因此，鉴于您的功能：

```
void threadfunc(void* param)
{
    int id = /* ??? */
} 
```

*每个线程*都有自己的`int id`本地存储副本，该副本将在线程期间持续存在。您可以通过值或指向它的指针将其传递给后续函数。

因此，调用是完全有效的：

```
int tParam[] = {1,2,3};

rc = pthread_create(&threads[1], NULL, Thread_Pool, (void *)&(tParam[1]));
rc = pthread_create(&threads[2], NULL, Thread_Pool, (void *)&(tParam[2]));
rc = pthread_create(&threads[3], NULL, Thread_Pool, (void *)&(tParam[3])); 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:09:39.947

您可以调用 pthread_self()。它返回一个唯一的线程 ID。请参阅 juampa 推荐的 LLNL URL 上的 API 参考。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-05T20:03:52.123

我不懂你的问题; 我仍然无法弄清楚你真正想做什么。

无论如何，我强烈建议您检查以下网站：

*   [https://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)
*   [http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)

它们很短，但仍然包含您可能需要开始使用的大部分内容。

# forms - 带有点的Spring表单字段ID不适用于jquery

> ID：10465406
> 
> 赞同：1
> 
> 时间：2012-05-05T19:48:58.933
> 
> 标签：forms, jsp, spring-mvc

当我构建一个表单时，我需要在`path`变量中使用一个点。生成 html 时，输入的 id 中有点。第三方 jquery 插件（如验证器）存在问题。它们不适用于点。有没有办法将所有点更改为例如。“_”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:02:39.933

一种解决方案是不使用自动表单绑定，因此`<spring:form/>`您可能仍然使用纯 HTML 标记`<form>`并以常规方式处理它，而不是使用。这完全取决于您是否想从 Spring 的机制（如自动表单字段绑定和错误处理）中受益。但是，如果您正在使用 JavaScript 处理表单验证，并且您计划在整个项目中执行此操作，那么您可能需要付出努力。我通常做的是使用 JavaScript（普通和 AJAX）处理客户端和服务器端验证，所以我根本不使用`<spring:form/>`。

# javascript - 暂时禁用鼠标滚轮，直到动画结束

> ID：10465410
> 
> 赞同：0
> 
> 时间：2012-05-05T19:49:34.533
> 
> 标签：javascript, jquery, scroll, mousewheel

我正在一个有启动页面的网站上工作，我希望它能够工作，这样当您向下滚动启动页面时`div.splash`，将向上滚动并让网站滚动进来。我大部分时间都在工作，有一个小烦恼。根据您滚动鼠标的速度，它将滚动到主站点一定距离。

我希望它能够工作，以便一旦它检测到鼠标滚轮上的一次单击，它就会执行以下所有操作，但鼠标滚轮中的任何其他移动都将被禁用，直到`slideUp()`/`animate()`功能完成。这样，当他们滚动时，动画会发生，但人仍然会从页面的最顶部开始。

```
$(window).bind('mousewheel', function(e, delta) {
if(delta == -1){    
    disable_scroll();       
    $('.alpha.wrapper').show();
    $('.titles .beta').hide();
    $('.splash').slideUp(800);
    $('.titles').animate({
        top: '495px'
    },800,enable_scroll());
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:58:30.940

通过将`disable_scroll();`调用移至准备好的文档，您将能够在页面加载后立即禁止用户滚动。

然后，将上面的内容更改为：

```
$(window).bind('mousewheel', function(e, delta) {
if(delta == -1){    
    $('.alpha.wrapper').show();
    $('.titles .beta').hide();
    $('.splash').slideUp(800);
    $('.titles').animate({
        top: '495px'
    },800,function(){enable_scroll();}); 
```

# objective-c - CABasicAnimation 不会在 viewWillAppear 中触发

> ID：10465411
> 
> 赞同：0
> 
> 时间：2012-05-05T19:49:56.467
> 
> 标签：objective-c, ios, viewwillappear, cabasicanimation

我在“viewA”的 viewWillAppear 方法中有一个 CABasicAnimation。当我按下 viewA 中的按钮转到 viewB 然后返回 viewA 时， viewWillAppear （viewA）中的 CABasicAnimation 可以正常工作。

但是，当我从 viewA 转到 viewB 时，在 viewB 中我通过按下主页按钮退出应用程序并返回应用程序，在我按下 viewB 中的后退按钮后，viewA 的 viewWillAppear 中的 CABasicAnimation 不会触发。

有趣的是，我在 viewWillAppear 中也有一个动画块，并且在这种情况下触发没有任何问题。因此触发了viewWillAppear方法，只是CABasicAnimation在辞职并进入应用程序后第一次不起作用。

```
- (void) viewWillAppear:(BOOL)animated {

CAMediaTimingFunction *customTimingFunction;
    customTimingFunction=[CAMediaTimingFunction functionWithControlPoints: 0.5f :0.01f :0.1f : 1.f];

    CABasicAnimation *buttonAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation"];

    buttonAnimation.fromValue=[NSValue valueWithCGPoint:CGPointMake(0,-600)];
    buttonAnimation.toValue=[NSValue valueWithCGPoint:CGPointMake(0,0)];
    buttonAnimation.duration = 1;
    buttonAnimation.removedOnCompletion = NO;
    buttonAnimation.fillMode = kCAFillModeForwards;
    buttonAnimation.timingFunction = customTimingFunction;
    [button.layer addAnimation:buttonAnimation forKey:@"transform.translation"];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:09:43.397

我找到了解决方案。如果我每次都会触发它`change buttonAnimation.removedOnCompletion = NO;`。`change buttonAnimation.removedOnCompletion = YES;`即使在辞职并进入应用程序之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T19:57:25.620

我遇到了同样的情况，动画没有开始。使用此处的代码： [https](https://github.com/akaabe/HamburgerButton/blob/master/HamburBtn.m) ://github.com/akaabe/HamburgerButton/blob/master/HamburBtn.m 并调用 viewDidAppear toggleAnimation。唯一对我有用的情况是延迟使用 performSelector。

# html - IE 7 中的 CSS z-index 错误

> ID：10465413
> 
> 赞同：2
> 
> 时间：2012-05-05T19:50:13.830
> 
> 标签：html, css, menu, z-index

我在 IE 7 中遇到 z-index 问题。问题是菜单项在 2 行中。如果任何第一行项目有子菜单，IE7 不会让你悬停它。该问题仅由 IE7 引起。

这是我的代码：

```
<div id="wrapper">

    <div id="main-nav">
        <ul class="main-menu" id="menu-header-menu">
            <li class="menu-item"><a href="#">item 1</a>
                <ul class="sub-menu">
                    <li class="menu-item"><a href="#"> sub item</a>
                        <ul class="sub-menu">
                            <li class="menu-item"><a href="#">sub sub item</a></li>
                            <li class="menu-item"><a href="#">sub sub item</a></li>
                        </ul>
                    </li>
                </ul>
            </li>

            <li class="menu-item"><a href="#">item 2</a></li>
            <li class="menu-item"><a href="#">item 3</a></li>
            <li class="menu-item"><a href="#"> test item</a>
                    <ul class="sub-menu">
                        <li class="menu-item"><a href="#">sub sub item</a></li>
                        <li class="menu-item"><a href="#">sub sub item</a></li>
                    </ul>
            </li>
        </ul>
    </div>  
</div> 
```

**CSS：**

```
#wrapper {
    width:250px;
    margin:0 auto;

}
#main-nav { 
    background-color:orange;
    padding: 0 10px;    
    clear: both;
    display: block;
    float: left;
    width: 100%;    
}

#main-nav ul {  
    list-style: none;
    margin: 0 0 0 -0.8125em;
    padding-left: 0;
}
#main-nav li {
    float: left;
    position: relative; 
}

#main-nav a {
    color:#737373;
    display: block;
    line-height: 2.333em;
    padding: 0 1.2125em;
    text-decoration: none;
}
#main-nav ul ul {   
    display: none;
    float: left;
    margin: 0;
    position: absolute;
    top: 2.333em;
    left: 0;
    width: 188px;
    z-index: 999;
}
#main-nav ul ul ul {
    left: 100%;
    top: 0;
}
#main-nav ul ul a {
    background: yellow;

    height: auto;
    line-height: 1.4em;
    padding: 10px 10px;
    width: 168px;
}

#main-nav li:hover > a,
#main-nav a:focus {
    color: #373737;
}

#main-nav ul li:hover > ul {
    display: block;
} 
```

在这里你可以看到问题。当您将鼠标悬停在项目 1 上时，它不允许我悬停其具有黄色背景的子项目。

![在此处输入图像描述](../Images/e426688a1945d34d0a2749a28ae8bbe6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:29:32.920

轻松修复。将此添加到 CSS 代码的底部：

```
#main-nav ul li:hover {z-index:9999;} 
```

问题是您的元素在悬停时需要更高的 z-index，而不是之前。

这是我上传的演示的实时链接。适用于 ie7 和 ff/chr/saf：

[http://sotkra.com/stackoverflow/ie7zindex/index.html](http://sotkra.com/stackoverflow/ie7zindex/index.html)

尽管如此，我还是建议您简化代码，它太笨重了。有一个小错误，一旦您将鼠标悬停在第 3 层菜单，退出然后重新进入，黄色背景就会出现。应该通过适当清理您的 html/css 来修复

干杯
_

# objective-c - 在似乎没有错误的地方崩溃

> ID：10465419
> 
> 赞同：1
> 
> 时间：2012-05-05T19:50:52.317
> 
> 标签：objective-c, struct, objective-c++

我刚刚减少了很多错误，现在我的代码编译得很好，但是它总是在我创建的 createEntity 方法中崩溃。它似乎没有任何问题，但无论如何有人可以帮助我吗？有什么建议吗？

```
 -(void)createEntityWithX:(int)newEntityX andY:(int)newEntityY withType:(int)newEntityType withWidth:(int)newEntityWidth andLength:(int)newEntityLength atSpeed:(int)newEntitySpeed
{
  Entity tmpEntity;
  tmpEntity.entityX = newEntityX;
  tmpEntity.entityY = newEntityY;
  tmpEntity.entityLength = newEntityLength;
  tmpEntity.entityWidth = newEntityWidth;
  tmpEntity.entityType = newEntityType;
  tmpEntity.entitySpeed = newEntitySpeed;

  int arrayAmount = [entityArray count];
  NSValue *tmp = [NSValue valueWithBytes:&tmpEntity objCType:@encode(struct Entity)];

  [entityArray insertObject:tmp atIndex:arrayAmount];

  [tmp release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:07:02.417

这里有两件事之一或两者都是错误的。可能`entityArray`不是`NSMutableArray`，而是`NSArray`，在这种情况下，您会收到“无法识别的选择器”错误。

修复后，您需要修复索引。您不能*将*对象插入`NSMutableArray`到与其对应的索引处`count`，因为插入的最后一个有效索引是`count-1`。您应该使用`addObject:`在数组末尾放置一些东西：

```
NSValue *tmp = [NSValue valueWithBytes:&tmpEntity objCType:@encode(struct Entity)];

[entityArray addObject:tmp]; 
```

# javascript - 如何列出节点 js 脚本中的所有函数？

> ID：10465423
> 
> 赞同：6
> 
> 时间：2012-05-05T19:52:01.227
> 
> 标签：javascript, node.js, reflection

我试过看`global`，但它只包含变量，不包含函数。如何列出脚本中创建的所有函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T20:03:32.257

使用您要查看的文件从命令行运行节点调试。然后你可以使用列表（这里有一些大数字）

```
node debug mini_file_server.js 
< debugger listening on port 5858
connecting... ok
debug> scripts
  26: mini_file_server.js
debug> list(1000)
  1 var http = require('http'),
  2     util = require('util'),
  3     fs   = require('fs');
  4 
  5 server = http.createServer(function(req, res){  
  6     var stream  = fs.createReadStream('one.html'),
  7         stream2 = fs.createReadStream('two.html');
  8     console.log(stream);
  9     console.log(stream2);
 10     stream.on('end', function(){
 11         stream2.pipe(res, { end:false});
 12     });
 13 
 14     stream2.on('end', function(){
 15         res.end("Thats all!");
 16     });
 17 
 18     res.writeHead(200, {'Content-Type' : 'text/plain'});
 19     stream.pipe(res, { end:false});
 20     stream2.pipe(res, { end:true});
 21 
 22 }).listen(8001);
 23 });
debug> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:38:04.400

*如果没有更高级的反射工具（如调试器*），这在节点中是不可能的。

这样做的唯一方法是使用[`__parent__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/Parent)由于安全问题和其他原因而被删除的内容。正如 Mark Bessey 所说，当您运行脚本时，这些变量将成为模块闭包变量。如果不明确导出它们，您将无法在其他地方访问它们。

这不是错误，这是设计使然。这就是节点的工作方式。但是，如果您只是要求您的用户编写函数表达式分配，那么一切都可以正常工作：

```
module.exports = {
    a:function(){
        //same logic you had in the function declaration
    }
} 
```

然后，您可以轻松地反思和枚举 module.exports 并获取所有函数名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T01:41:03.960

如果函数有名称，它将很好地显示在全局中：

```
mb-work-laptop:~ markbessey$ node
> for (var k in global) { console.log(k); }
global
process
GLOBAL
root
Buffer
setTimeout
setInterval
clearTimeout
clearInterval
console
module
require
k
> function z(a) { return a*10; }
> for (var k in global) { console.log(k); }
global
process
GLOBAL
root
Buffer
setTimeout
setInterval
clearTimeout
clearInterval
console
module
require
k
z
> 
> global.z
[Function: z] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:12:11.677

如果你想做一些 AOP，路线是 AST。

您可以使用以下内容构建您自己的 AOP 框架：http: [//esprima.org](http://esprima.org)。

或者您可以尝试[node-burrito](https://github.com/substack/node-burrito)，非常适合不那么复杂的方面：

```
var burrito = require('burrito');

var src = burrito('someCall()', function (node) {
    if (node.name === 'call') node.wrap('qqq(%s)');
}); 
```

会产生

```
qqq(somecall()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T19:55:44.500

cli：[http ://nodejs.org/docs/v0.3.7/api/debugger.html](http://nodejs.org/docs/v0.3.7/api/debugger.html)

gui: [https://github.com/dannycoates/node-inspector](https://github.com/dannycoates/node-inspector)

还有[https://github.com/c4milo/node-webkit-agent](https://github.com/c4milo/node-webkit-agent)正在开发中，这将是一个更强大的 node-inspector 版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-05T20:37:15.660

想要你正在寻找的确切的东西。找不到任何其他解决方案（大多数假设使用“window”或“this”或“global”，在 Node 中这些都不适用于我们）。

借助几个库：fs、esprima 和 escodegen，我们可以用大约 25 行代码完成。

```
const fs = require('fs');
const esprima = require("esprima");
const escodegen = require("escodegen"); 
```

逻辑是这样的：

1.  让我们获取这个函数所在的文件，首先将它作为文本读取，就像我们将读取为纯文本的任何其他文件一样
2.  我们将使用 esprima 将该文本解析为一个有效的树，其中一部分将包含我们的函数
3.  我们将过滤掉该树以仅包含函数（除了我们用来执行此操作的此函数！我们不在之后）
4.  为此，我们需要获取简单的函数声明
5.  但理想情况下，我们也可以使用箭头表达式获取任何声明为变量的函数，这需要更多的工作，但非常可行。
6.  接下来，我们希望将这些对象从树中重建回代码中实际可用的函数，因此对于我们所有的函数：
7.  使用 escodegen 将该对象重建为一个字符串，该字符串看起来就像为该函数编写的代码
8.  再次将该字符串转换为脚本本身内的可用函数

最终结果将返回一个带有键：值对的对象，其中键是函数名称的字符串，值是函数本身。

```
function getAllFunctionsInThisFileExceptThisFunction() {
    const thisFunctionName = arguments.callee.name;
    const rawTextFromThisFile = fs.readFileSync(__filename, "utf8");
    const parsed = esprima.parseScript(rawTextFromThisFile);
    const allDeclaredVariables = parsed.body.filter(e=>e.type === "VariableDeclaration");
    const allDeclaredFunctions = parsed.body.filter(e=>e.type === "FunctionDeclaration");

    let allFunctions = []
    for (declaredVariable of allDeclaredVariables){ 
        const declarations = declaredVariable.declarations[0];
        if (declarations.init.type === "ArrowFunctionExpression"){ 
            const anonymousFunction = declarations.init;
            let reconstructedFunction = anonymousFunction;
            reconstructedFunction.id = declarations.id;
            allFunctions.push(reconstructedFunction);
        }
    }
    allFunctions.push(...allDeclaredFunctions)

    const allFunctionsExceptThisOne = allFunctions.filter(e => e.id.name !== thisFunctionName);
    let functionsDict = {};
    for (parsedFunction of allFunctionsExceptThisOne) {
        const functionString = escodegen.generate(parsedFunction);
        const newFunction = eval(`(${functionString})`)
        functionsDict[parsedFunction.id.name] = newFunction;
    }
    return functionsDict;
} 
```

从那里你可以像任何其他对象/字典一样玩弄它。

```
const allFunctionsDict = getAllFunctionsInThisFileExceptThisFunction();
console.log( allFunctionsDict["sum"](10,30) ) //prints 40
console.log( allFunctionsDict["difference"](350,250) ) //prints 100
console.log( allFunctionsDict["product"](6,4) ) // prints 24
console.log( Object.keys(allFunctionsDict) ) //prints [ 'product', 'sum', 'difference' ]

function sum(a, b) {
    return a + b;
}

function difference(a, b) {
    return a - b;
}

const product = (a,b) => { 
    return a * b;
} 
```

# php - 如何使用 PHP 的 mail() 函数发送电子邮件

> ID：10465426
> 
> 赞同：0
> 
> 时间：2012-05-05T19:52:36.413
> 
> 标签：php, mysql, arrays, email, function

我制作了一个不发送任何电子邮件的小代码。它给了我一个空白页。有什么建议么？

```
<?php 
$result_array1 = array();
$result_array2 = array();
$result_array3 = array();
$result_array4 = array();
$sql1 = "SELECT * FROM  `test_thing`";
$result1 = mysql_query("$sql1") or die($sql1.mysql_error());
while($row1 = mysql_fetch_array($result1))
{
   $result_array1[] = $row1['email'];
   $result_array2[] = $subject;
   $result_array3[] = $message;
   $result_array4[] = $header;
}
$sentmail = mail($result_array1,$result_array2,$result_array3,$result_array4);
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T19:54:04.967

```
It gives me a blank page. 
```

其实应该的。您没有在显示的代码中使用输出函数。如果您预期错误消息，请确保您已[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)启用[`error_reporting`](http://php.net/manual/en/function.error-reporting.php)并`E_ALL`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T19:54:22.703

Mail 将字符串作为参数，而不是数组。您需要执行一个 for 循环并在每个数组上调用 mail 以获取其索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:54:39.490

```
while($row1 = mysql_fetch_array($result1))
{
   $result_array1[] = $row1['email'];
   $result_array2[] = $subject;
   $result_array3[] = $message;
   $result_array4[] = $header;
} 
```

我希望你的意思是：

```
while($row1 = mysql_fetch_array($result1))
{
   $result_array1 = $row1['email'];
   $result_array2 = $subject;
   $result_array3 = $message;
   $result_array4 = $header;
} 
```

`mail()`需要字符串。除非您打算循环并发送多封邮件，否则您需要重新设计代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T19:55:09.973

如果这是您的完整代码，则说明您的数据库未正确初始化。阅读有关[mysql_connect()](http://php.net/manual/en/function.mysql-connect.php)的文档以获取更多信息和示例。

此外，尝试回显一些调试数据，以查看您实际上是从数据库中获取一些数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T19:56:17.447

为什么不做

```
<?php 
  $result_array1 = array();
  $result_array2 = array();
  $result_array3 = array();
  $result_array4 = array();
  $sql1 = "SELECT * FROM  `test_thing`";
  $result1 = mysql_query("$sql1") or die($sql1.mysql_error());
  while($row1 = mysql_fetch_array($result1))
  {
    $sentmail = mail($row1['email'],$subject,$message,$header);
  }
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T21:05:23.623

我认为你的问题不止一个。首先，您必须连接到数据库。如答案 1，阅读 mysql 接口的 php 手册，特别是函数 mysql_connect。其次，while 实际上是错误的。而 (x = any_function) 不会将 any_function 结果归因于变量“x”。'x = any_function' 返回一个布尔值，仅此而已。你应该写这样的东西：while ((x = any_function())) 或者在你的情况下：while(($row1 = mysql_fetch_array($result1))) where '$row1 = mysql_fetch_array($result1)' attributes to $rows1 values由 mysql_fecth_array 返回，并且 '($row1 = mysql_fetch_array($result1))' 返回一个布尔值来控制 while 构造。我希望我对你有所帮助。

# php - 用 preg_replace 和正则表达式替换 img 标签

> ID：10465433
> 
> 赞同：-2
> 
> 时间：2012-05-05T19:53:40.277
> 
> 标签：php, regex, preg-replace, preg-match

我不懂正则表达式。我需要更改以这种方式格式化的 img 标签：`<img class="special-class" (then custom srcs and whatever) />`. 我认为 preg_replace 会完成这项工作还是会有更有效的方法？

我只需要正则表达式的方式来搜索带有第一类的完整 img 标记，这样我就可以用另一个保存为 $buzz 的字符串替换它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:02:03.040

要**匹配**一个完整的 img 标签（使用有效的 html 并且其中没有未引用`>`）：

```
preg_match('#<img([^>]+)>#i', $html, $match); 
```

不知道你还想要什么...

`$match`将包含完整的 in`[0]`和 in 的属性（作为字符串）`[1]`。

如果要匹配类属性：

```
preg_match('#class="([^"])"#i', $html, $match); 
```

**编辑**
嗯，这可能有效：

```
preg_replace('#<img[^>]+class="[^"]*replace[^"]*"[^>]*>#', '', $html); 
```

如果我输入：

```
<img src="oele" class="boele" />
<img src="boele" />
<img src class="replace boele"> 
```

it only replaces the last img and leaves the rest untouched.

Regex rules!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:01:10.313

我会选择 Javascript 解决方案（想想 jQuery）。如果您愿意，我可以提供帮助

# iphone - 有没有办法杀死挂起的线程？

> ID：10465440
> 
> 赞同：1
> 
> 时间：2012-05-05T19:54:31.973
> 
> 标签：iphone, objective-c

我正在使用第三方框架，如果互联网连接丢失，在极少数情况下它不再响应。我的测试表明，当我通过家庭网络上的 WiFi 连接并开始使用该应用程序时，当网络从 WiFi 更改为运营商网络时，如果当时正在交换数据，线程不会响应。当然，我联系了框架的供应商来解决这个问题，但是，这需要一些时间，直到我得到补丁。与此同时，我想实施一种变通方法，因此用户不必处理无响应的应用程序，特别是因为这对于应用程序的批准来说是不行的。我的问题：有没有办法可以监控这样的线程并在超时后终止它？

或者有人会为这个问题提供另一种解决方案吗？我知道 Apple 的可达性框架，但据我了解，它只是一个检测工具，在我的情况下不能解决我的问题，对吧？

谢谢，勒内

# asp.net-mvc-3 - MVC 3 Publish 不从引用的项目发布 dll

> ID：10465446
> 
> 赞同：2
> 
> 时间：2012-05-05T19:55:20.987
> 
> 标签：asp.net-mvc-3, deployment, reference, publish

我有一个项目`Foo.BackOffice`。它有一个参考`Foo.Repository`，我有 NHibernate dll。

当我发布`Foo.BackOffice`到 IIS 时。它不会发布 Foo.Repository、NHibernate DLL 中的 dll。但它确实发布了`Foo.Repository.dll`.

如何发布 Foo.Repository 作为参考的 dll。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:22:20.563

从[这个连接](http://connect.microsoft.com/VisualStudio/feedback/details/690515/vs-2010-publish-web-deployment-not-copying-child-dependency-project-assemblies)问题：

> 您看到的行为目前是设计使然。编译器只复制可以找到编译时依赖项的间接引用。在这种情况下，它确定您的 Web 项目对项目 B 没有编译时依赖项。将始终复制直接依赖项。

`Foo.Repository`你只对 Nhibernate 没有直接依赖。

因此，只需在您的 Web 项目中引用 NHibernate dll，它们就会在发布期间被复制。

# tfs - 在 TFS 2010 构建摘要中，如何显示来自自定义 MSBuild 任务的日志链接？

> ID：10465447
> 
> 赞同：3
> 
> 时间：2012-05-05T19:55:24.263
> 
> 标签：tfs, msbuild

在我的 TFS 2010 构建定义中，我在自己的自定义 my.targets MSBuild 项目中调用 MSBuild。它完成了我需要的所有编译、测试等。它的日志文件被指定，作为一个日志放置位置，并且日志正确显示在该位置。但是我在 TFS 构建摘要报告中看不到它。“查看日志文件”链接显示为灰色。当我正在构建的项目是“.sln”文件时，它似乎可以工作。常见的 MSBuild 文件的核心是什么神奇的巫术，使这个日志链接正常工作，我怎样才能重现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:43:46.513

您可以在 Jason Prickett 的这些帖子中找到答案：

1.  [TFS2010 – 改变构建信息的显示方式](http://blogs.msdn.com/b/jpricket/archive/2009/12/22/tfs2010-changing-the-way-build-information-is-displayed.aspx)
2.  [TFS2010 – 自定义构建详细信息视图 – 摘要视图](http://blogs.msdn.com/b/jpricket/archive/2010/08/09/tfs2010-customizing-the-build-details-view-summary-view.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T15:16:45.993

需要注意的重要一点是，只有在构建定义中启用将输出复制到放置文件夹时，MSBuild 日志文件才会出现。如果禁用该选项，该链接将不会出现在构建日志视图中。

# vim - Vim 在命令窗口中以乱码开头

> ID：10465451
> 
> 赞同：5
> 
> 时间：2012-05-05T19:56:20.823
> 
> 标签：vim

启动 Vim 在命令窗口中产生一些奇怪的字符。这是给我的：

:.2501;0c

我在两台机器上使用相同的 .vimrc，一台 Ubuntu，一台 Scientific Linux，只有一台在 Scientific Linux 上以这种方式运行。

有人知道这是什么一回事吗？在开始工作之前必须删除这些字符是很烦人的。

# python - 使用 QRect 实例调用 QWidget::update 时出现分段错误

> ID：10465454
> 
> 赞同：0
> 
> 时间：2012-05-05T19:56:25.823
> 
> 标签：python, qt, user-interface, pyqt, qpainter

当我在 QWidget 子类中调用 self.update() 时，它什么也不做，这是预期的行为（我还没有实现paintEvent）。但是，如果我使用 QtCore.QRect 实例调用它，则会出现分段错误、内存损坏或 X 服务器错误等错误。

知道如何解决这个问题吗？

编辑：

我有时会得到这个：

```
X Error: BadMatch (invalid parameter attributes) 8
  Major opcode: 59 (X_SetClipRectangles)
  Resource id:  0x5e00044
    *** glibc detected *** /usr/bin/python3: double free or corruption (out): 0x00007fd5cc001280 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x75ab6)[0x7fd5e293fab6]
/lib/x86_64-linux-gnu/libc.so.6(+0x7b3b3)[0x7fd5e29453b3]
/lib/x86_64-linux-gnu/libc.so.6(realloc+0xf0)[0x7fd5e29459a0]
/usr/lib/libQtGui.so.4(+0x2268e9)[0x7fd5e10d08e9]
/usr/lib/libQtGui.so.4(_ZN7QRegionpLERK5QRect+0x593)[0x7fd5e1209413]
/usr/lib/libQtGui.so.4(+0x3d9ef2)[0x7fd5e1283ef2]
/usr/lib/libQtGui.so.4(_ZN7QWidget6updateERK5QRect+0x92)[0x7fd5e10bcbf2]
/usr/lib/python3/dist-packages/PyQt4/QtGui.so(+0x53ce26)[0x7fd5e20b5e26]
/usr/bin/python3(PyEval_EvalFrameEx+0x681)[0x45ba51]
/usr/bin/python3(PyEval_EvalFrameEx+0x4198)[0x45f568]
======= Memory map: ========
00400000-0066d000 r-xp 00000000 08:05 3540240                            /usr/bin/python3.2mu
0086c000-0086d000 r--p 0026c000 08:05 3540240                            /usr/bin/python3.2mu
0086d000-008e8000 rw-p 0026d000 08:05 3540240                            /usr/bin/python3.2mu
008e8000-00906000 rw-p 00000000 00:00 0 
01e91000-027de000 rw-p 00000000 00:00 0                                  [heap]
7fd5cc000000-7fd5cc2d7000 rw-p 00000000 00:00 0 
7fd5cc2d7000-7fd5d0000000 ---p 00000000 00:00 0 
7fd5d2f81000-7fd5d2f82000 ---p 00000000 00:00 0 
7fd5d2f82000-7fd5d3782000 rw-p 00000000 00:00 0 
7fd5d3782000-7fd5d378d000 r-xp 00000000 08:05 3410670                    /lib/x86_64-linux-gnu/libnss_files-2.13.so
7fd5d378d000-7fd5d398c000 ---p 0000b000 08:05 3410670                    /lib/x86_64-linux-gnu/libnss_files-2.13.so
7fd5d398c000-7fd5d398d000 r--p 0000a000 08:05 3410670                    /lib/x86_64-linux-gnu/libnss_files-2.13.so
7fd5d398d000-7fd5d398e000 rw-p 0000b000 08:05 3410670                    /lib/x86_64-linux-gnu/libnss_files-2.13.so
7fd5d398e000-7fd5d3998000 r-xp 00000000 08:05 3408032                    /lib/x86_64-linux-gnu/libnss_nis-2.13.so
7fd5d3998000-7fd5d3b97000 ---p 0000a000 08:05 3408032                    /lib/x86_64-linux-gnu/libnss_nis-2.13.so
7fd5d3b97000-7fd5d3b98000 r--p 00009000 08:05 3408032                    /lib/x86_64-linux-gnu/libnss_nis-2.13.so
7fd5d3b98000-7fd5d3b99000 rw-p 0000a000 08:05 3408032                    /lib/x86_64-linux-gnu/libnss_nis-2.13.so
7fd5d3b99000-7fd5d3bae000 r-xp 00000000 08:05 3408175                    /lib/x86_64-linux-gnu/libnsl-2.13.so
7fd5d3bae000-7fd5d3dad000 ---p 00015000 08:05 3408175                    /lib/x86_64-linux-gnu/libnsl-2.13.so
7fd5d3dad000-7fd5d3dae000 r--p 00014000 08:05 3408175                    /lib/x86_64-linux-gnu/libnsl-2.13.so
7fd5d3dae000-7fd5d3daf000 rw-p 00015000 08:05 3408175                    /lib/x86_64-linux-gnu/libnsl-2.13.so
7fd5d3daf000-7fd5d3db1000 rw-p 00000000 00:00 0 
7fd5d3db1000-7fd5d3db8000 r-xp 00000000 08:05 3408286                    /lib/x86_64-linux-gnu/libnss_compat-2.13.so
7fd5d3db8000-7fd5d3fb7000 ---p 00007000 08:05 3408286                    /lib/x86_64-linux-gnu/libnss_compat-2.13.so
7fd5d3fb7000-7fd5d3fb8000 r--p 00006000 08:05 3408286                    /lib/x86_64-linux-gnu/libnss_compat-2.13.so
7fd5d3fb8000-7fd5d3fb9000 rw-p 00007000 08:05 3408286                    /lib/x86_64-linux-gnu/libnss_compat-2.13.so
7fd5d3fb9000-7fd5d3fbd000 r-xp 00000000 08:05 3542269                    /usr/lib/kde4/plugins/imageformats/kimg_xview.so
7fd5d3fbd000-7fd5d41bd000 ---p 00004000 08:05 3542269                    /usr/lib/kde4/plugins/imageformats/kimg_xview.so
7fd5d41bd000-7fd5d41be000 r--p 00004000 08:05 3542269                    /usr/lib/kde4/plugins/imageformats/kimg_xview.so
7fd5d41be000-7fd5d41bf000 rw-p 00005000 08:05 3542269                    /usr/lib/kde4/plugins/imageformats/kimg_xview.so
7fd5d41bf000-7fd5d41ce000 r-xp 00000000 08:05 3542266                    /usr/lib/kde4/plugins/imageformats/kimg_xcf.so
7fd5d41ce000-7fd5d43ce000 ---p 0000f000 08:05 3542266                    /usr/lib/kde4/plugins/imageformats/kimg_xcf.so
7fd5d43ce000-7fd5d43cf000 r--p 0000f000 08:05 3542266                    /usr/lib/kde4/plugins/imageformats/kimg_xcf.so
7fd5d43cf000-7fd5d43d0000 rw-p 00010000 08:05 3542266                    /usr/lib/kde4/plugins/imageformats/kimg_xcf.so
7fd5d43d0000-7fd5d43d4000 rw-p 00000000 00:00 0 
7fd5d43d4000-7fd5d43d9000 r-xp 00000000 08:05 3542277                    /usr/lib/kde4/plugins/imageformats/kimg_tga.so
7fd5d43d9000-7fd5d45d9000 ---p 00005000 08:05 3542277                    /usr/lib/kde4/plugins/imageformats/kimg_tga.so
7fd5d45d9000-7fd5d45da000 r--p 00005000 08:05 3542277                    /usr/lib/kde4/plugins/imageformats/kimg_tga.so
7fd5d45da000-7fd5d45db000 rw-p 00006000 08:05 3542277                    /usr/lib/kde4/plugins/imageformats/kimg_tga.so
7fd5d45db000-7fd5d45e5000 r-xp 00000000 08:05 3542272                    /usr/lib/kde4/plugins/imageformats/kimg_rgb.so
7fd5d45e5000-7fd5d47e4000 ---p 0000a000 08:05 3542272                    /usr/lib/kde4/plugins/imageformats/kimg_rgb.so
7fd5d47e4000-7fd5d47e5000 r--p 00009000 08:05 3542272                    /usr/lib/kde4/plugins/imageformats/kimg_rgb.so
7fd5d47e5000-7fd5d47e6000 rw-p 0000a000 08:05 3542272                    /usr/lib/kde4/plugins/imageformats/kimg_rgb.so
7fd5d47e6000-7fd5d47eb000 r-xp 00000000 08:05 3542268                    /usr/lib/kde4/plugins/imageformats/kimg_ras.so
7fd5d47eb000-7fd5d49eb000 ---p 00005000 08:05 3542268                    /usr/lib/kde4/plugins/imageformats/kimg_ras.so
7fd5d49eb000-7fd5d49ec000 r--p 00005000 08:05 3542268                    /usr/lib/kde4/plugins/imageformats/kimg_ras.so
7fd5d49ec000-7fd5d49ed000 rw-p 00006000 08:05 3542268                    /usr/lib/kde4/plugins/imageformats/kimg_ras.so
7fd5d49ed000-7fd5d49f2000 r-xp 00000000 08:05 3542271                    /usr/lib/kde4/plugins/imageformats/kimg_psd.so
7fd5d49f2000-7fd5d4bf1000 ---p 00005000 08:05 3542271                    /usr/lib/kde4/plugins/imageformats/kimg_psd.so
7fd5d4bf1000-7fd5d4bf2000 r--p 00004000 08:05 3542271                    /usr/lib/kde4/plugins/imageformats/kimg_psd.so
7fd5d4bf2000-7fd5d4bf3000 rw-p 00005000 08:05 3542271                    /usr/lib/kde4/plugins/imageformats/kimg_psd.so
7fd5d4bf3000-7fd5d4bf8000 r-xp 00000000 08:05 3542276                    /usr/lib/kde4/plugins/imageformats/kimg_pic.so
7fd5d4bf8000-7fd5d4df7000 ---p 00005000 08:05 3542276                    /usr/lib/kde4/plugins/imageformats/kimg_pic.so
7fd5d4df7000-7fd5d4df8000 r--p 00004000 08:05 3542276                    /usr/lib/kde4/plugins/imageformats/kimg_pic.so
7fd5d4df8000-7fd5d4df9000 rw-p 00005000 08:05 3542276                    /usr/lib/kde4/plugins/imageformats/kimg_pic.so
7fd5d4df9000-7fd5d4e01000 r-xp 00000000 08:05 3542274                    /usr/lib/kde4/plugins/imageformats/kimg_pcx.so
7fd5d4e01000-7fd5d5000000 ---p 00008000 08:05 3542274                    /usr/lib/kde4/plugins/imageformats/kimg_pcx.so
7fd5d5000000-7fd5d5001000 r--p 00007000 08:05 3542274                    /usr/lib/kde4/plugins/imageformats/kimg_pcx.so
7fd5d5001000-7fd5d5002000 rw-p 00008000 08:05 3542274                    /usr/lib/kde4/plugins/imageformats/kimg_pcx.so
7fd5d5002000-7fd5d5051000 r-xp 00000000 08:05 3544480                    /usr/lib/x86_64-linux-gnu/libjasper.so.1.0.0
7fd5d5051000-7fd5d5251000 ---p 0004f000 08:05 3544480                    /usr/lib/x86_64-linux-gnu/libjasper.so.1.0.0
7fd5d5251000-7fd5d5252000 r--p 0004f000 08:05 3544480                    /usr/lib/x86_64-linux-gnu/libjasper.so.1.0.0
7fd5d5252000-7fd5d5256000 rw-p 00050000 08:05 3544480                    /usr/lib/x86_64-linux-gnu/libjasper.so.1.0.0
7fd5d5256000-7fd5d525d000 rw-p 00000000 00:00 0 
7fd5d525d000-7fd5d5262000 r-xp 00000000 08:05 3542280                    /usr/lib/kde4/plugins/imageformats/kimg_jp2.so
7fd5d5262000-7fd5d5461000 ---p 00005000 08:05 3542280                    /usr/lib/kde4/plugins/imageformats/kimg_jp2.so
7fd5d5461000-7fd5d5462000 r--p 00004000 08:05 3542280                    /usr/lib/kde4/plugins/imageformats/kimg_jp2.so
7fd5d5462000-7fd5d5463000 rw-p 00005000 08:05 3542280                    /usr/lib/kde4/plugins/imageformats/kimg_jp2.so
7fd5d5463000-7fd5d5469000 r-xp 00000000 08:05 3551477                    /usr/lib/libIlmThread.so.6.0.0
7fd5d5469000-7fd5d5668000 ---p 00006000 08:05 3551477                    /usr/lib/libIlmThread.so.6.0.0
7fd5d5668000-7fd5d5669000 r--p 00005000 08:05 3551477                    /usr/lib/libIlmThread.so.6.0.0
7fd5d5669000-7fd5d566a000 rw-p 00006000 08:05 3551477                    /usr/lib/libIlmThread.so.6.0.0
7fd5d566a000-7fd5d566f000 r-xp 00000000 08:05 3551476                    /usr/lib/libImath.so.6.0.0
7fd5d566f000-7fd5d586e000 ---p 00005000 08:05 3551476                    /usr/lib/libImath.so.6.0.0
7fd5d586e000-7fd5d586f000 r--p 00004000 08:05 3551476                    /usr/lib/libImath.so.6.0.0
7fd5d586f000-7fd5d5870000 rw-p 00005000 08:05 3551476                    /usr/lib/libImath.so.6.0.0
7fd5d5870000-7fd5d58b2000 r-xp 00000000 08:05 3551475                    /usr/lib/libHalf.so.6.0.0
7fd5d58b2000-7fd5d5ab1000 ---p 00042000 08:05 3551475                    /usr/lib/libHalf.so.6.0.0
7fd5d5ab1000-7fd5d5ab2000 r--p 00041000 08:05 3551475                    /usr/lib/libHalf.so.6.0.0
7fd5d5ab2000-7fd5d5ab3000 rw-p 00042000 08:05 3551475                    /usr/lib/libHalf.so.6.0.0
7fd5d5ab3000-7fd5d5acf000 r-xp 00000000 08:05 3551474                    /usr/lib/libIex.so.6.0.0
7fd5d5acf000-7fd5d5cce000 ---p 0001c000 08:05 3551474                    /usr/lib/libIex.so.6.0.0
7fd5d5cce000-7fd5d5cd2000 r--p 0001b000 08:05 3551474                    /usr/lib/libIex.so.6.0.0
7fd5d5cd2000-7fd5d5cd3000 rw-p 0001f000 08:05 3551474                    /usr/lib/libIex.so.6.0.0
7fd5d5cd3000-7fd5d5d88000 r-xp 00000000 08:05 3546179                    /usr/lib/libIlmImf.so.6.0.0
7fd5d5d88000-7fd5d5f87000 ---p 000b5000 08:05 3546179                    /usr/lib/libIlmImf.so.6.0.0
7fd5d5f87000-7fd5d5f8a000 r--p 000b4000 08:05 3546179                    /usr/lib/libIlmImf.so.6.0.0
7fd5d5f8a000-7fd5d5f8c000 rw-p 000b7000 08:05 3546179                    /usr/lib/libIlmImf.so.6.0.0
7fd5d5f8c000-7fd5d5f91000 r-xp 00000000 08:05 3542278                    /usr/lib/kde4/plugins/imageformats/kimg_exr.so
7fd5d5f91000-7fd5d6191000 ---p 00005000 08:05 3542278                    /usr/lib/kde4/plugins/imageformats/kimg_exr.so
7fd5d6191000-7fd5d6192000 r--p 00005000 08:05 3542278                    /usr/lib/kde4/plugins/imageformats/kimg_exr.so
7fd5d6192000-7fd5d6193000 rw-p 00006000 08:05 3542278                    /usr/lib/kde4/plugins/imageformats/kimg_exr.so
7fd5d6193000-7fd5d619b000 r-xp 00000000 08:05 3542275                    /usr/lib/kde4/plugins/imageformats/kimg_eps.so
7fd5d619b000-7fd5d639a000 ---p 00008000 08:05 3542275                    /usr/lib/kde4/plugins/imageformats/kimg_eps.so
7fd5d639a000-7fd5d639b000 r--p 00007000 08:05 3542275                    /usr/lib/kde4/plugins/imageformats/kimg_eps.so
7fd5d639b000-7fd5d639c000 rw-p 00008000 08:05 3542275                    /usr/lib/kde4/plugins/imageformats/kimg_eps.so
7fd5d639c000-7fd5d63a3000 r-xp 00000000 08:05 3542279                    /usr/lib/kde4/plugins/imageformats/kimg_dds.so
7fd5d63a3000-7fd5d65a2000 ---p 00007000 08:05 3542279                    /usr/lib/kde4/plugins/imageformats/kimg_dds.so
7fd5d65a2000-7fd5d65a3000 r--p 00006000 08:05 3542279                    /usr/lib/kde4/plugins/imageformats/kimg_dds.so
7fd5d65a3000-7fd5d65a4000 rw-p 00007000 08:05 3542279                    /usr/lib/kde4/plugins/imageformats/kimg_dds.so
7fd5d65a4000-7fd5d65af000 r-xp 00000000 08:05 3548326                    /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fd5d65af000-7fd5d67af000 ---p 0000b000 08:05 3548326                    /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fd5d67af000-7fd5d67b2000 rw-p 0000b000 08:05 3548326                    /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fd5d67b2000-7fd5d6815000 r-xp 00000000 08:05 3564130                    /usr/lib/x86_64-linux-gnu/libtiff.so.4.3.6
7fd5d6815000-7fd5d6a14000 ---p 00063000 08:05 3564130                    /usr/lib/x86_64-linux-gnu/libtiff.so.4.3.6
7fd5d6a14000-7fd5d6a17000 r--p 00062000 08:05 3564130                    /usr/lib/x86_64-linux-gnu/libtiff.so.4.3.6
7fd5d6a17000-7fd5d6a18000 rw-p 00065000 08:05 3564130                    /usr/lib/x86_64-linux-gnu/libtiff.so.4.3.6
7fd5d6a18000-7fd5d6a1f000 r-xp 00000000 08:05 3675220                    /usr/lib/qt4/plugins/imageformats/libqtiff.so
7fd5d6a1f000-7fd5d6c1e000 ---p 00007000 08:05 3675220                    /usr/lib/qt4/plugins/imageformats/libqtiff.so
7fd5d6c1e000-7fd5d6c1f000 r--p 00006000 08:05 3675220                    /usr/lib/qt4/plugins/imageformats/libqtiff.so
7fd5d6c1f000-7fd5d6c20000 rw-p 00007000 08:05 3675220                    /usr/lib/qt4/plugins/imageformats/libqtiff.so
7fd5d6c20000-7fd5d6c25000 r-xp 00000000 08:05 3675099                    /usr/lib/qt4/plugins/imageformats/libqsvg.so
7fd5d6c25000-7fd5d6e24000 ---p 00005000 08:05 3675099                    /usr/lib/qt4/plugins/imageformats/libqsvg.so
7fd5d6e24000-7fd5d6e25000 r--p 00004000 08:05 3675099                    /usr/lib/qt4/plugins/imageformats/libqsvg.so
7fd5d6e25000-7fd5d6e26000 rw-p 00005000 08:05 3675099                    /usr/lib/qt4/plugins/imageformats/libqsvg.so
7fd5d6e26000-7fd5d6e5b000 r-xp 00000000 08:05 3557513                    /usr/lib/liblcms.so.1.0.19
7fd5d6e5b000-7fd5d705b000 ---p 00035000 08:05 3557513                    /usr/lib/liblcms.so.1.0.19
7fd5d705b000-7fd5d705c000 rw-p 00035000 08:05 3557513                    /usr/lib/liblcms.so.1.0.19
7fd5d705c000-7fd5d705f000 rw-p 00000000 00:00 0 
7fd5d705f000-7fd5d70e5000 r-xp 00000000 08:05 3542961                    /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fd5d70e5000-7fd5d72e4000 ---p 00086000 08:05 3542961                    /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fd5d72e4000-7fd5d72e9000 rw-p 00085000 08:05 3542961                    /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fd5d72e9000-7fd5d72ef000 r-xp 00000000 08:05 3675225                    /usr/lib/qt4/plugins/imageformats/libqmng.so
7fd5d72ef000-7fd5d74ee000 ---p 00006000 08:05 3675225                    /usr/lib/qt4/plugins/imageformats/libqmng.so
7fd5d74ee000-7fd5d74ef000 r--p 00005000 08:05 3675225                    /usr/lib/qt4/plugins/imageformats/libqmng.so
7fd5d74ef000-7fd5d74f0000 rw-p 00006000 08:05 3675225                    /usr/lib/qt4/plugins/imageformats/libqmng.so
7fd5d74f0000-7fd5d752a000 r-xp 00000000 08:05 3540817                    /usr/lib/x86_64-linux-gnu/libjpeg.so.8.4.0
7fd5d752a000-7fd5d7729000 ---p 0003a000 08:05 3540817                    /usr/lib/x86_64-linux-gnu/libjpeg.so.8.4.0
7fd5d7729000-7fd5d772a000 rw-p 00039000 08:05 3540817                    /usr/lib/x86_64-linux-gnu/libjpeg.so.8.4.0
7fd5d772a000-7fd5d7731000 r-xp 00000000 08:05 3675227                    /usr/lib/qt4/plugins/imageformats/libqjpeg.so
7fd5d7731000-7fd5d7931000 ---p 00007000 08:05 3675227                    /usr/lib/qt4/plugins/imageformats/libqjpeg.so
7fd5d7931000-7fd5d7932000 r--p 00007000 08:05 3675227                    /usr/lib/qt4/plugins/imageformats/libqjpeg.so
7fd5d7932000-7fd5d7933000 rw-p 00008000 08:05 3675227                    /usr/lib/qt4/plugins/imageformats/libqjpeg.so
7fd5d7933000-7fd5d793a000 r-xp 00000000 08:05 3675221                    /usr/lib/qt4/plugins/imageformats/libqico.so
7fd5d793a000-7fd5d7b39000 ---p 00007000 08:05 3675221                    /usr/lib/qt4/plugins/imageformats/libqico.so
7fd5d7b39000-7fd5d7b3a000 r--p 00006000 08:05 3675221                    /usr/lib/qt4/plugins/imageformats/libqico.so
7fd5d7b3a000-7fd5d7b3b000 rw-p 00007000 08:05 3675221                    /usr/lib/qt4/plugins/imageformats/libqico.so
7fd5d7b3b000-7fd5d7b42000 r-xp 00000000 08:05 3675223                    /usr/lib/qt4/plugins/imageformats/libqgif.so
7fd5d7b42000-7fd5d7d41000 ---p 00007000 08:05 3675223                    /usr/lib/qt4/plugins/imageformats/libqgif.so
7fd5d7d41000-7fd5d7d42000 r--p 00006000 08:05 3675223                    /usr/lib/qt4/plugins/imageformats/libqgif.so
7fd5d7d42000-7fd5d7d43000 rw-p 00007000 08:05 3675223                    /usr/lib/qt4/plugins/imageformats/libqgif.so
7fd5d7d43000-7fd5d7e0a000 r-xp 00000000 08:05 3673331                    /usr/lib/kde4/plugins/styles/qtcurve.so
7fd5d7e0a000-7fd5d8009000 ---p 000c7000 08:05 3673331                    /usr/lib/kde4/plugins/styles/qtcurve.so
7fd5d8009000-7fd5d800d000 rw-p 000c6000 08:05 3673331                    /usr/lib/kde4/plugins/styles/qtcurve.so
7fd5d800d000-7fd5d8051000 r-xp 00000000 08:05 3408274                    /lib/x86_64-linux-gnu/libdbus-1.so.3.7.0
7fd5d8051000-7fd5d8251000 ---p 00044000 08:05 3408274                    /lib/x86_64-linux-gnu/libdbus-1.so.3.7.0
7fd5d8251000-7fd5d8252000 r--p 00044000 08:05 3408274                    /lib/x86_64-linux-gnu/libdbus-1.so.3.7.0
7fd5d8252000-7fd5d8253000 rw-p 00045000 08:05 3408274                    /lib/x86_64-linux-gnu/libdbus-1.so.3.7.0Abandon 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:08:42.757

这是非常少的信息。

我会建议调查问题，找出*究竟*是什么导致了故障。一方面，Gdb 是一个能够做到这一点的优秀调试器。代码分析工具可能会为您指明正确的方向。

-

具有这种行为的错误的一个非常常见的原因是未初始化的指针。

例子：

```
MyClass * x; // not initialised
... code
x->foo(); // 
```

该指针在创建时可能指向进程内存中的任何位置，因此大多数时候取消引用它会导致不存在的内存段（即分段错误）。那么，你是幸运的。

然而，有时它可能指向实际存在的东西。那些时候，任何事情都可能发生：使用指针的函数可能会将一些数据写入它认为是有效的缓冲区，从而对稍后访问的对象造成严重破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:23:40.817

我不再需要使用paintEvent，因为我现在在QPixmap 上绘图（以便在两个绘图会话之间保持绘图）。

# javascript - 在javascript中定义类的最佳方法是什么

> ID：10465455
> 
> 赞同：1
> 
> 时间：2012-05-05T19:56:26.910
> 
> 标签：javascript

我已经搜索了一种在 javascript 中定义类的方法，比如在 java 或 php 中，但我没有找到！

我想要类似的东西

```
class javascriptClass {

       function someFunction(){}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:59:17.517

您可以使用原型类，如下所示：

```
function MyClass() {

}

MyClass.prototype.method1 = function() {
    // do stuff
};

MyClass.prototype.method2 = function(p) {
    // do stuff
};

var myClass = new MyClass(); 
```

现在，在从原型 MyClass 实例化对象 myClass 之后，您可以访问对象 myClass 的方法：

```
myClass.method1(); 
```

如果您需要实例化多个类的对象/实例，上述方法非常有用。

如果您只希望有一个对象，那么您可以使用的另一种方法只是充当命名空间来保护您的函数免受与其他对象的冲突：

```
var myObject = {

    method1: function() {
        // do stuff
    },

    method2: function(p) {
        // do stuff
    }
};

myObject.method1(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T19:59:55.777

在 JavaScript 中，您没有这样的类。您可以使用 定义用于创建对象的函数`new`，并且可以通过在构造函数的主体中创建它们或通过对象的*原型*添加它们来为它们提供方法。例如：

```
function JavaScriptClass() {
    // I am a JavaScript constructor! Any initialization can be done here.
}

// This is the prototype! You can put instance methods and variables (to an extent) here.
JavaScriptClass.prototype.someFunction = function() {
    alert('someFunction was called!');
};

// Now, let's create an instance!
var obj = new JavaScriptClass();
obj.someFunction(); // someFunction was called! 
```

`this`您可以在构造函数和绑定到对象的任何方法中使用 , 访问当前对象。请注意，`this`它也可以绑定到 JavaScript 中的任何内容。这是一种不同类型的 OOP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T20:02:16.597

与基于类的语言不同，JavaScript 是函数式语言或原型语言，您不能使用`class`关键字或您在 JavaScript 中发布的那种签名。在 JavaScript 中，通常你会这样做：

```
function Person(){
  // public members
  this.foo = 'foo';
  this.walk = function(){ ......... }

  // private members
  var bar = 'bar';
  var baz = function(){.........}
}

var person = new Person(); 
```

# windows - 多个 Windows OpenGL/Glut

> ID：10465462
> 
> 赞同：4
> 
> 时间：2012-05-05T19:57:06.800
> 
> 标签：windows, opengl, glut

我想知道如何打开多个 OpenGL/Glut 窗口。我的意思是多个窗口同时不是子窗口，也不是更新同一个窗口

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-25T03:15:49.777

虽然我相信上面的答案是准确的，但它比需要的要复杂一些，并且在以后必须处理在窗口之间移动时（例如，在绘制窗口时）可能会很困难。这是我们刚刚在课堂上所做的：

```
GLint WindowID1, WindowID2;                  // window ID numbers

glutInitWindowSize(250.0, 250.0);           // set a window size
glutInitWindowPosition(50,50);              // set a window position
WindowID1 = glutCreateWindow("Window One"); // Create window 1

glutInitWindowSize(500.0, 250.0);           // set a window size
glutInitWindowPosition(500,50);             // set a window position
WindowID2 = glutCreateWindow("Window Two"); // Create window 2 
```

您会注意到我使用了相同的创建窗口函数，但将其加载到 GLint 中。那是因为当我们以这种方式创建窗口时，该函数实际上返回了一个唯一的 GLint，供 glut 用来标识窗口。

我们必须获取和设置窗口以在它们之间移动并执行适当的绘图功能。[你可以在这里找到电话](https://www.opengl.org/documentation/specs/glut/spec3/node18.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:21:16.280

与创建一个窗口的方式相同，但您应该多次执行：

```
#include <cstdlib>
#include <GL/glut.h>

// Display callback ------------------------------------------------------------

float clr = 0.2;

void display()
{
    // clear the draw buffer .
    glClear(GL_COLOR_BUFFER_BIT);   // Erase everything

    // set the color to use in draw
    clr += 0.1;
    if ( clr>1.0)
    {
        clr=0;
    }
    // create a polygon ( define the vertexs)
    glBegin(GL_POLYGON); {
        glColor3f(clr, clr, clr);
        glVertex2f(-0.5, -0.5);
        glVertex2f(-0.5,  0.5);
        glVertex2f( 0.5,  0.5);
        glVertex2f( 0.5, -0.5);
    } glEnd();

    glFlush();
}

// Main execution  function
int main(int argc, char *argv[])
{
    glutInit(&argc, argv);      // Initialize GLUT
    glutCreateWindow("win1");   // Create a window 1
    glutDisplayFunc(display);   // Register display callback
    glutCreateWindow("win2");   // Create a window 2
    glutDisplayFunc(display);   // Register display callback

    glutMainLoop();             // Enter main event loop
} 
```

此示例显示如何设置相同的回调以在两个窗口中呈现。但是您可以为 windows 使用不同的功能。

# javascript - 在 css/js/jquery/html 中应用玫瑰色或更改整个文档的亮度？

> ID：10465464
> 
> 赞同：2
> 
> 时间：2012-05-05T19:57:16.290
> 
> 标签：javascript, jquery, html, css

有没有更好的做法来实现这一目标？目前我正在使用宽度/高度为 100%、更高的 z-index 和 pointer-events: none 的不透明红色 div，它允许下面的一切工作。

另外，我希望能够使整个文档变暗，是否可以应用任何类型的亮度属性，或者在所有内容上放置一个不透明的黑色层会更好吗？

只是想知道我是否以错误的方式解决这个问题。如果 js/jquery 解决方案更高效，我也会对它们感兴趣，我也不担心与旧浏览器的兼容性。

** 如果有人能告诉我制作黑白照片的最简单方法，我也会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:09:51.530

仅 WebKit 的功能：

```
-webkit-filter: grayscale; /* Turn everything black and white */
-webkit-filter: brightness(20%); /* Make stuff brighter */ 
```

您可以使用`hue-rotate`来更改色调，具体取决于您的一般配色方案。如果一切都不同，您将需要一个自定义过滤器，这更困难，我现在正在这样做。

[这里有更多信息。](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:20:11.897

It looks like you want the entire page (including "underlying" DOM elements) to be a particular hue, which is not possible by just changing the body color or opacity. What you want is something like the [BlockUI](http://jquery.malsup.com/block/) plugin for jQuery. If I'm not mistaken there is an option to still allow the user to interact with page elements when the UI is "blocked".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:16:03.780

> ...是否有任何类型的亮度属性我可以应用，或者我再次在所有东西上放置一个不透明的黑色层会更好吗？

最简单的方法是：`$('body').css('opacity', '0.3');`. 如果要更改背景颜色，可以将其应用于 html 节点：`$('html').css('background', '#000');`

> ** 如果有人能告诉我制作黑白照片的最简单方法，我也会非常感激。

在 Internet Explorer 中，您可以使用[windows 过滤器](http://msdn.microsoft.com/en-us/library/ms533003%28v=vs.85%29.aspx)。用于`-webkit-filter: grayscale;`Chrome/Safari。在 Mozilla 和 Opera 中也可以实现，但我不确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T20:15:03.230

您可以使用

```
body {
 opacity: 0.8; // Any value between 0 & 1 where is 0 in invisible & 1 is 100% opaque
 } 
```

但由于那将是白色背景，我不确定它会给你想要的输出。如果您想为整个屏幕添加滤色器，则必须添加叠加层，就像您说的那样，下面的所有东西都不起作用。

-webkit- CSS 属性仅适用于 Chrome 和 safari。

# android - fetchUuidsWithSdp() 为每个设备返回 SDP 两次

> ID：10465465
> 
> 赞同：7
> 
> 时间：2012-05-05T19:57:40.067
> 
> 标签：android, bluetooth

我正在编写一个 Android 应用程序（ICS 4.0.3）来发现设备并列出它们的 UUID。

该应用程序会进行蓝牙设备发现，并在找到设备时将其保存。一旦设备发现完成，它会返回它保存的所有设备并执行 fetchUUidsWithSdp() ，然后在广播接收器中打印出它找到的 UUID。

当应用程序运行时，我得到每两组响应，每组包含它发现的所有设备上的所有 UUID。

这是它应该工作的方式吗？

我在文档中看到：

*如果在获取 SDP 记录时出错或该过程需要很长时间，则 ACTION_UUID 意图将与缓存中当前存在的 UUID 一起发送。*

两组响应都很快，但我猜第一组可能来自缓存，第二组来自远程设备。

该代码可以在[http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-discover-and.html](http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-discover-and.html)找到。

# asp.net-mvc - 创建用于显示垂直字符的助手

> ID：10465467
> 
> 赞同：1
> 
> 时间：2012-05-05T19:57:53.507
> 
> 标签：asp.net-mvc

我想创建一个助手来返回一个字符低于另一个字符的文本。像这样的东西：

小号

一种

米

磷

大号

乙

这个助手的目的是有一个标题只有 1 个字符宽的表格。如下图所示，这很丑：

![在此处输入图像描述](../Images/53d7723d5b126b64eaa890ba3ff25b0e.png)

下面的示例看起来不错：

![在此处输入图像描述](../Images/77e7b4bc498b49914283ba8c79e1a724.png)

我想要类似的东西：

```
@Html.DisplayVerticalFor(x => x.MyText) 
```

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:16:41.360

您可以创建 HTML 帮助程序 DisplayVertical。（我没有添加如何创建 html 助手的步骤）。DisplayVertical 将首先将您的文本拆分为字符数组并将每个字符包装在 div 或任何其他块级元素中，可以将其插入所需的位置。 DisplayVerticalFor 的实现可以是这样的：

```
public static MvcHtmlString DisplayVertical (this HtmlHelper helper, string text)
{
     string OutputString = "";
     string assembleString = "<div>{0}</div>";
     char[] textarr = text.ToCharArray();

     foreach( char a in textarr )
     {
         OutputString += String.Format(assembleString, a);
     }

     return new MvcHtmlString(OutputString);
}

and in razor it will placed like this :
<div class="style-to-adjust-width-n-height"> @Html.DisplayVertical ("Sample") </div> 
```

如果您想像 @Html.DisplayVerticalFor(x => x.MyText) 一样将 lambda 表达式传递给这个 html 帮助器，那么您需要添加 lambda 表达式解析代码来查找文本。最后，这是一个非常粗略的代码，但是您可以添加“TagBuilder”等以使其更加整洁。

# python - 从 itertools 随机化链

> ID：10465468
> 
> 赞同：5
> 
> 时间：2012-05-05T19:58:00.373
> 
> 标签：python, random

我正在从[python docs](http://docs.python.org/library/itertools.html)复制一个示例。

```
def powerset(iterable):
    "powerset([1,2,3]) --> () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"
    s = list(iterable)
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1)) 
```

我们如何随机化我们得到的值的顺序，同时`powerset`保持惰性评估的结果？

编辑：我想要它的原因是我想计算派生集的总和，并在找到两个具有相同总和的集合时立即停止。如果我没记错[的话，问题是 NP-complete](http://en.wikipedia.org/wiki/Subset_sum_problem)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:56:43.230

这是另一个想法：存储组合生成器并随机生成，直到你消耗所有。这也使集合大小的顺序随机化。

**编辑**：我假设您不关心单个集合中元素的顺序，因为您将对它们求和。如果你这样做了，你可以`random.shuffle(next_value)`在 yield 之前放一个。

```
import itertools
import random

def random_powerset(l):
    combs = [itertools.combinations(l,i) for i in range(len(l)+1)]
    while combs:
        comb_index = random.choice(range(len(combs)))
        try:
            next_value = next(combs[comb_index])
            yield next_value
        except StopIteration:
            combs.pop(comb_index) 
```

输出：

```
In : list(random_powerset(range(3)))
Out: [(0, 1), (0, 2), (0, 1, 2), (1, 2), (), (0,), (1,), (2,)]

In : list(random_powerset(range(3)))
Out: [(0, 1, 2), (0,), (), (0, 1), (1,), (0, 2), (1, 2), (2,)]

In : list(random_powerset(range(3)))
Out: [(0, 1), (0, 1, 2), (0, 2), (), (0,), (1,), (1, 2), (2,)]

In : list(random_powerset(range(3)))
Out: [(), (0,), (0, 1), (0, 1, 2), (1,), (0, 2), (2,), (1, 2)]

In : list(random_powerset(range(3)))
Out: [(), (0, 1), (0,), (0, 1, 2), (1,), (0, 2), (2,), (1, 2)]

In : list(random_powerset(range(3)))
Out: [(0, 1), (0,), (0, 2), (1, 2), (), (1,), (2,), (0, 1, 2)]

In : list(random_powerset(range(3)))
Out: [(), (0, 1, 2), (0,), (1,), (2,), (0, 1), (0, 2), (1, 2)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:12:17.493

[`itertools.combinations()`](http://docs.python.org/library/itertools.html#itertools.combinations)以输入的顺序为我们提供结果。鉴于此，我们可以打乱我们的输入列表以产生随机顺序的元素（显然，结果的可能顺序会少得多）。

```
def random_powerset(iterable):
     s = list(iterable)
     lengths = list(range(len(s)+1))
     shuffle(lengths)
     return chain.from_iterable(combinations(s, r) for r in lengths if not shuffle(s)) 
```

（这有点丑陋 - 我们知道`shuffle(s)`将永远返回`False`，所以我们可以将它添加为一个条件，以确保它在每次调用时运行`combinations()`。）

我们预先生成了长度列表，以便我们也可以对其进行洗牌。

它不是完全随机的（仍然会有一个顺序 - 例如，所有长度为 n 的元素将聚集在一起，并且这些元素的顺序取决于输入的随机顺序），但会有相当数量随机性，如果这对你来说足够了。

示例输出：

```
>>> list(random_powerset(range(3)))
[(), (2,), (0,), (1,), (2, 1), (2, 0), (1, 0), (1, 2, 0)]
>>> list(random_powerset(range(3)))
[(), (0, 1), (0, 2), (1, 2), (0, 1, 2), (2,), (0,), (1,)]
>>> list(random_powerset(range(3)))
[(0, 1, 2), (2,), (1,), (0,), (0, 2), (0, 1), (2, 1), ()]
>>> list(random_powerset(range(3)))
[(1, 2, 0), (0,), (2,), (1,), (), (0, 1), (0, 2), (1, 2)]
>>> list(random_powerset(range(3)))
[(), (2, 1), (2, 0), (1, 0), (0,), (2,), (1,), (2, 1, 0)]
>>> list(random_powerset(range(3)))
[(1, 0), (1, 2), (0, 2), (0, 2, 1), (), (1,), (0,), (2,)] 
```

我认为这是你能做的最好的事情，而不是让它变得不懒惰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T11:46:07.760

这是一个懒惰且随机的解决方案：

```
import random

def powerset(seq):
    n = 2**len(seq)
    used = set([])
    while len(used) < n:
        choice = random.randint(0, n - 1)
        if not (choice in used):
            used.add(choice)
            binary = bin(choice)[2:].zfill(len(seq))
            yield [i[1] for i in zip(binary, seq) if i[0] == '1']
            #or following line if > python 2.7:
            #yield itertools.compress(seq, binary)

print list(powerset([1,2,3]))
print list(powerset([1,2,3]))
#output:
[[3], [1], [2, 3], [], [1, 2], [2], [1, 3], [1, 2, 3]]
[[2, 3], [1, 3], [1], [1, 2, 3], [1, 2], [2], [3], []] 
```

如果你考虑`[1, 2, 3]`二进制的组合：

```
n  123 

0  000
1  001
2  010
3  011
4  100
5  101
6  110
7  111 
```

每个组合都可以用唯一的二进制标识符进行标记。而且总是有`2**len(seq)`组合....所以：

1.  随机选择一个介于 、`0`和之间的整数`2**len(seq) - 1`。
2.  检查我们以前没有使用过它（如果有，请再次绘制）。
3.  将其转换为二进制。
4.  用 .zip 压缩它`seq`。
5.  如果压缩的二进制数字是`'0'`我们将其从输出中排除。

这是懒惰的，适用于大型`seq`.

小警告：

可能有问题，但对您来说可能无关紧要。在序列快结束时，您可能会遇到重复重绘的麻烦（这可能会花费一些时间）。由于抽到已抽到的号码的概率为`number of successful draws / 2**len(seq)`，因此在给定抽签中，`g`，找到未使用的新号码的预期抽签次数为：

```
n / (n - g)
#where n = 2**len(seq) 
```

这很好，前提是：`n`很小，或者很大`n`：（`g << n`这两种情况中的一种或两种都很可能，所以两者都不是什么大问题）。事实上，使用 large时，`n`您可以完全省去`used`重复检查，因为在第一次重复之前的预期迭代次数接近`n**0.5`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T21:02:28.443

如果您超出以下范围，则可以在某种程度上改进 Lattyware 的解决方案`itertools.chain`：

```
def chain_random(iterables):
    iterables = list(iterables)
    icount = len(iterables)
    if icount == 0: return 
    while icount > 1:
        shuffle(iterables)
        try:
            yield iterables[-1].next()
        except StopIteration:
            iterables.pop()
            icount -= 1
    for element in iterables[0]:
        yield element

def random_powerset(iterable):
    s = list(iterable)
    lengths = list(range(len(s)+1))
    shuffle(lengths)
    return chain_random(combinations(s, r) for r in lengths if not shuffle(s)) 
```

示例输出：

```
>>> list(random_powerset(range(3)))
[(), (2, 1, 0), (1, 0), (1, 2), (2,), (0, 2), (1,), (0,)]
>>> list(random_powerset(range(3)))
[(1, 0), (1, 2), (0, 2, 1), (2,), (), (0, 2), (0,), (1,)]
>>> list(random_powerset(range(3)))
[(0, 1), (), (0, 2), (0,), (1, 2), (2, 0, 1), (1,), (2,)]
>>> list(random_powerset(range(3)))
[(), (1, 2), (2,), (1, 0), (0,), (2, 0), (1,), (1, 0, 2)]
>>> list(random_powerset(range(3)))
[(0, 1), (), (2,), (0, 2), (1, 2), (1,), (1, 2, 0), (0,)]
>>> list(random_powerset(range(3)))
[(0, 2, 1), (0,), (), (2, 0), (1,), (2, 1), (2,), (0, 1)] 
```

`itertools`是用 C 编写的，所以`chain_random`会比`itertools.chain`. 但是这样你会得到更多的随机化。

# windows-phone-7 - WP7 工具包包装板虚拟化

> ID：10465469
> 
> 赞同：1
> 
> 时间：2012-05-05T19:58:03.693
> 
> 标签：windows-phone-7, silverlight-toolkit, wrappanel

> **可能重复：**
> [WP7 虚拟化 WrapPanel](https://stackoverflow.com/questions/5046810/wp7-virtualizing-wrappanel)

我在[Silverlight Toolkit for Windows Phone](http://silverlight.codeplex.com/releases/view/55034)中使用 wrappanel 控件来显示 100 多个图像。但 wrappanel 不支持 UI 虚拟化（我的应用程序加载所有图像非常缓慢）。

谁能告诉我如何为 WrapPanel 实现 UI 虚拟化？

# php - Symfony2 & Doctrine2：removeElement 不起作用

> ID：10465474
> 
> 赞同：2
> 
> 时间：2012-05-05T19:58:30.177
> 
> 标签：php, symfony, doctrine-orm

我在 Symfony2 和学说中有一个小项目，我正在尝试更新 2 个相关实体：

**会员和汽车**

```
$carMembers = $car->getMembers();
echo count($carMembers); // --> show 2
echo get_class(carMembers[0]); // --> show MyCars\WSBundle\Entity\Member
$car->removeMember($member);
$em->persist($car);
$em->flush();

$carMembers= $car->getMembers();
echo count($carMembers); // --> show 1
echo get_class(carMembers[0]); // --> show MyCars\WSBundle\CarsController !!! 
```

有我的实体：

**车**

```
/**
 * @ORM\ManyToMany(targetEntity="Member", mappedBy="cars")
 */
private $members;

/**
 * Remove Member
 *
 * @param MyCars\WSBundle\Entity\Member $member
 */
public function removeMember(\MyCars\WSBundle\Entity\Member $member)
{
    $this->members->removeElement($member);
    $member->removeCar($this);
} 
```

**成员**

```
/**
 * @ORM\ManyToMany(targetEntity="Car", cascade={"persist"})
 * @ORM\JoinTable(name="cars_membres",
 * joinColumns={@ORM\JoinColumn(name="member_id", referencedColumnName="member_id")},
 * inverseJoinColumns={@ORM\JoinColumn(name="car_id", referencedColumnName="car_id")}
 * )
 */
private $cars; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T16:51:36.457

我认为您正在寻找的是`orphanRemoval`关系选项。

```
@ORM\ManyToMany(targetEntity="Car", cascade={"persist"}, orphanRemoval=true) 
```

因此，当您从集合中删除项目并刷新实体管理器时，它将从数据库中删除关系记录...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T06:39:39.890

如果要使用函数**add**、**contains**或**removeElement ，请确保在类构造函数中初始化 ArrayCollection**

```
<?php

// ...

use Doctrine\Common\Collections\ArrayCollection;

class Car
{
    /**
     * @MongoDB\Id
     */
    protected $members;

    /**
     * General constructor
     */
    public function __construct()
    {
        $this->members = new ArrayCollection();
    }

    /**
     * @param Member $member
     * @return $this
     */
    public function addMember(Member $member)
    {
        if (!$this->hasMember($member)) {
            $this->members->add($member);
        }

        return $this;
    }

    /**
     * @param Member $member
     * @return $this
     */
    public function removeMember(Member $member)
    {
        if ($this->hasMember($member)) {
            $this->members->removeElement($member);
        }

        return $this;
    }

    /**
     * @return mixed
     */
    public function getMembers()
    {
        return $this->tags;
    }

    /**
     * @param Member $member
     * @return mixed
     */
    public function hasTag(Member $member)
    {
        return $this->members->contains($member);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T11:20:23.747

您使用哪个系列？你使用\Doctrine\ArrayCollecion 吗？您确定要删除相同的成员对象实例吗？removeElement() 方法仅当它是同一个实例时才从集合中删除一个对象。

这是方法（注意array_search方法中的最后一个参数（true）：

```
public function removeElement($element)
{
  $key = array_search($element, $this->_elements, true);

  if ($key !== false) {
    unset($this->_elements[$key]);
    return true;
  }

  return false;
} 
```

# css - 将我的网站放大 10%

> ID：10465476
> 
> 赞同：0
> 
> 时间：2012-05-05T19:58:34.117
> 
> 标签：css, zooming

在为客户完成网站设计后，我意识到一切都很小。在尝试了浏览器缩放后，我发现放大 10% 可以解决很多问题！问题是，我不知道如何将所有内容（div 大小、图像大小、文本大小等）调整为 110%。

任何想法表示赞赏。我宁愿在 CSS 中完成这一切。

# 编辑 -

哈哈，好吧，伙计们，我想我会进去，实际上花一些时间改变尺寸。这不是我想做的，但我想这是我唯一真正的选择。多谢你们 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:13:45.707

正确的方法是重新设计您的网站。如果你的设计正确，这应该*很*容易。一些忠告：

*   页面宽度：增加最外层容器的宽度，子元素宽度*应*扩大以填充空间，除非您设置了硬编码的绝对宽度。在这些情况下，请调整`px`以适应。

*   字体大小：如果你使用了`em`or`%`值，就增加`font-size`of `body`（其他元素会继承这个基本字体大小）。如果您使用`px`了字体大小，则必须增加它们。

我认为您深知通过 javascript 或 IE`zoom`属性“缩放”页面不是正确的方法，您正在避免重新设计。甚至像这样的东西`body{ transform:scale(1.1); }`也会让你的图像在缩放/拉伸时看起来很糟糕，并且由于它是 CSS3，因此将缺乏支持，并且[在测试了这个想法之后](http://jsfiddle.net/qddpX/)，它似乎能够将内容缩放到视口/可见区域之外。

如果您希望这是永久更改，那么正确的方法是重写您的 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:02:53.077

我建议您以其他方式解决问题（将字体大小设置为 10px 等）

但是，如果您真的想这样做，我建议您参考我最近对类似问题的回答。小心因为FF不支持这个，因为FF不允许通过js缩放！

[用 JavaScript 模拟浏览器缩放](https://stackoverflow.com/questions/10464038/imitate-browser-zoom-with-javascript/10464073#10464073)

> [你去：][1]
> 
> 利用：
> 
> ```
> document.body.style.zoom=1.0;this.blur(); 
> ```
> 
> 1.0 表示 100%
> 
> 150% 将是 1.5 1000% 将是 10.0
> 
> this.blur() 意味着光标，也许你选择了一个输入字段，失去了每个选择项的焦点。
> 
> 或者：
> 
> 您可以使用 css3 元素 [zoom][2] ([Source][3])
> 
> [Firefox 不允许][4] 使用浏览器进行缩放，因为您无法通过 javascript 或 sth 访问用户属性。
> 
> 因此，您可以只使用一些允许缩放（CSS3：缩放，如上所述）或增加文本大小的 CSS 样式！例如，您可以通过包含不同的 CSS 文件来做到这一点。但是在这里你有“跳跃”的问题，因为样式化的 css 元素（浮动等）必须“交互”，实际上它们的属性不同。
> 
> 我在上面发布的缩放在 Chrome 和 IE8+ 中运行良好（如上所述不支持 FF）
> 
> [1]： [http](http://www.perlunity.de/javascript/scripts/javascript_0314_main.shtml) ://www.perlunity.de/javascript/scripts/javascript_0314_main.shtml [2]：[http](http://www.css3.com/css-zoom/) ://www.css3.com/css-zoom/ [3]： [我可以放大网页吗像 IE 或 Firefox 一样，使用编程？](https://stackoverflow.com/questions/1647237/can-i-zoom-into-a-web-page-like-ie-or-firefox-do-using-programming) [4]： [http ://www.mozilla.org/projects/security/components/signed-scripts.html](http://www.mozilla.org/projects/security/components/signed-scripts.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:46:55.280

在所有有价值的浏览器中，这会将屏幕上的所有内容调整为 200% 的比例：

```
body {
    -moz-transform: scale(2);
    -webkit-transform: scale(2);
    -o-transform: scale(2);
    -ms-transform: scale(2);
    transform: scale(2);
} 
```

# xml - XML 元素的名称空间是否扩展到其属性？

> ID：10465478
> 
> 赞同：2
> 
> 时间：2012-05-05T19:58:50.130
> 
> 标签：xml, namespaces

[重复问题：请参阅[此处](https://stackoverflow.com/a/46865/989516)获取答案（“不，不限定属性”）]

这是我第一次使用 XML 命名空间，我想确保我做对了。奇怪的是，对于这么简单的事情，我在 SO 上找不到任何可以解决这个问题的东西：

我有一个带有一些属性的命名空间限定的 XML 元素。属性是否也需要限定，或者范围是否扩展到它们？

```
<foo:tag value="bar" /> 
```

或者

```
<foo:tag foo:value="bar" /> 
```

# iphone - 在一个 MPMoviePlayerViewController 中播放后续电影

> ID：10465481
> 
> 赞同：0
> 
> 时间：2012-05-05T19:59:04.317
> 
> 标签：iphone, cocoa-touch, mpmovieplayercontroller, mpmovieplayer

我在使用 MPMoviePlayViewController 时遇到问题。我使控制器贪得无厌，分配网址并使用以下方法向播放器显示：

```
[self presentMoviePlayerViewControllerAnimated:[appDelegate movieController]]; 
```

然后当电影结束时，我将其关闭：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:nil];    
[self dismissMoviePlayerViewControllerAnimated]; 
```

电影播放器​​在我的 AppDelegate 中分配。MPMoviePlayerPlaybackDidFinishNotification 上还有其他一些侦听器。这是针对可能只有音频并且在表格单元格中显示播放/暂停按钮和计数器的情况。

问题是，当我在同一个 MPMovieViewController 中加载第二部电影时，它看起来很好，但控件无法正常工作。只要它们可见，它们就可以工作，但是一旦它们消失，就不可能将它们取回并因此关闭电影播放器​​。有时关闭和打开应用程序可以工作，但有时不能，我需要“杀死”应用程序以便能够重新开始。

有没有办法在控件仍然有效的情况下在 MoviePlayer 中播放后续视频？有什么建议可以“重置”播放器，以防止其他听众在收听动作时给出 DEALLOC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:50:00.860

你不需要解雇你只需要设置新网址的播放器......或者我可能误解了你的问题......

尝试将此添加到您的设置电影播放器​​控制器

```
moviePlayerController.view.userInteractionEnabled = YES; 
```

# git - 如何在 git 中创建备份

> ID：10465484
> 
> 赞同：1
> 
> 时间：2012-05-05T19:59:40.533
> 
> 标签：git, backup

我是 git 新手。我阅读了一些关于如何创建 git repo 并在那里维护备份的链接，但无法获得任何具体材料。我要做的是我有一个用 php 编写的服务器，它存储用户上传的文件。我想在 git 上创建文件的每小时备份。谁能告诉我该怎么做？我的服务器在 php 上，我的客户端在 android 上。我正在使用窗户。我还被告知使用 linux 会更好.. 请给我更多的输入。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:04:54.307

因为存储库的每个克隆也是完全限定的存储库，所以存储库的每个克隆也是完整备份。这意味着，如果您想创建专用备份，只需将其克隆到另一台机器上的某个位置即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T00:04:41.970

您还可以通过创建[Git repo 包来](https://stackoverflow.com/questions/2129214/backup-a-local-git-repository/2129286#2129286)保留备份。
我喜欢这种方法，因为一个包只有**一个文件**，即：

*   更容易复制（尤其是在[Dropbox 远程磁盘上](https://stackoverflow.com/questions/3632723/git-with-dropbox/3633346#3633346)）
*   不太容易出现数据损坏或复制错误（当您克隆或复制 Git 存储库及其众多文件时可能会发生这种情况）

# mysql - 添加自定义 INSERT 供 MySqlCommandBuilder 使用

> ID：10465485
> 
> 赞同：0
> 
> 时间：2012-05-05T19:59:46.400
> 
> 标签：mysql, vb.net, winforms

我正在连接和查询数据库，并且从两个表中获取数据，如下所示：

```
SELECT * FROM tblOne, tblTwo 
```

我将一些文本框绑定到数据库中的字段，并添加了一个`BindingNavigator`便于分页和插入数据的文本框。因此我打算使用`MySqlCommandBuilder`自动构建`INSERT`命令。

但是，当然`MySqlCommandBuilder`不能`INSERT`基于带有两个表的查询生成命令。

有没有简单的方法来解决这个问题？喜欢添加自定义`INSERT`命令？

# java - 在java中获取下周和前一周的开始和结束日期

> ID：10465487
> 
> 赞同：3
> 
> 时间：2012-05-05T19:59:50.370
> 
> 标签：java, date, calendar, dayofweek

例如，我想获取一周的开始日期和结束日期

2012-05-06 至 2012-05-12
2012-05-13 至 2012-05-19

我写的代码是

```
currWeekCalender.add(Calendar.WEEK_OF_YEAR, 1);

    String dateStart =  currWeekCalender.get(Calendar.YEAR) + "-" + addZero((currWeekCalender.get(Calendar.MONTH) + 1)) + "-" + addZero(currWeekCalender.getFirstDayOfWeek());
    currWeekCalender.add(Calendar.DAY_OF_MONTH,7);
    String dateEnd =  currWeekCalender.get(Calendar.YEAR) + "-" + addZero((currWeekCalender.get(Calendar.MONTH) + 1)) + "-" + addZero(currWeekCalender.get(Calendar.DAY_OF_MONTH)); 
```

但结果不正确，我也想要前几周的日期。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-24T08:08:07.717

您好所有编码员:)

我在小应用程序上工作以从数据库中挖掘一些数据。要计算前几周的开始和结束日期，我使用以下代码：

```
// Calendar object
Calendar cal = Calendar.getInstance();

// "move" cal to monday this week (i understand it this way)
cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);

// calculate monday week ago (moves cal 7 days back)
cal.add(Calendar.DATE, -7);
Date firstDateOfPreviousWeek = cal.getTime();

// calculate sunday last week (moves cal 6 days fwd)
cal.add(Calendar.DATE, 6);
Date lastDateOfPreviousWeek = cal.getTime(); 
```

希望，这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:11:30.053

您的问题是`getFirstDayOfWeek()`返回一周的第一天；例如，美国的星期天，法国的星期一。它不会返回一个月中的某一天。请参阅[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html#getFirstDayOfWeek())。

一个月的第一天是一周的开始（伪代码）

```
((7 + (firstDayOfWeek - dayOfWeek(firstOfMonth))) % 7) + 1 
```

如果您愿意，您可以将其转换为`java.util.Calendar`代码，但我建议您改用 Joda time。

* * *

> 我也想要前几周的日期。

只需减去 7 天，也许可以使用[`add`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add%28int,%20int%29)

```
currCalendar.add(Calendar.DAY_OF_MONTH, -7) 
```

这可能涉及下溢，但会`add`处理。

> ### `add(f, delta)`
> 
> 将 delta 添加到字段 f。这相当于调用`set(f, get(f) + delta)`了两个调整：
> 
> **添加规则 1。**调用后字段 f 的值减去调用前字段 f 的值是 delta，以字段 f 中发生的任何溢出为模。当字段值超出其范围时会发生溢出，因此，*下一个较大的字段会递增或递减，并且字段值会调整回其范围内。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T15:26:31.043

# Java 8 版本

这将打印前 10 周

```
final ZonedDateTime input = ZonedDateTime.now();

for(int i = 1; i < 10; i++) {
    final ZonedDateTime startOfLastWeek = input.minusWeeks(i).with(DayOfWeek.MONDAY);
    System.out.print(startOfLastWeek.format(DateTimeFormatter.ISO_LOCAL_DATE));
    final ZonedDateTime endOfLastWeek = startOfLastWeek.plusDays(6);
    System.out.println(" - " + endOfLastWeek.format(DateTimeFormatter.ISO_LOCAL_DATE));
} 
```

# javascript - 如何阻止此事件侦听器自动触发

> ID：10465489
> 
> 赞同：0
> 
> 时间：2012-05-05T20:00:03.713
> 
> 标签：javascript, addeventlistener

我有这个自执行功能，它将事件侦听器添加到一系列链接中。但是当页面加载时，事件监听器会自动触发，而不是 onmouseover/out。我的语法错了吗？如何阻止它们自动射击？

```
;(function(){
    var menuLink = $('.navItem');
    var menuItem = $('.menuLinks');
    for (a = 0; a <= 5; ++a) {
        menuLink[a].addEventListener('onmouseover', linkChanger(), true);
        menuLink[a].addEventListener('onmouseout', linkChanger(), true);
    }   

    function linkChanger(event){
        if (menuItem[a].style.color == "white") {
            console.log("This is white")
            menuItem[a].style.color = "black";
        }
        else {
            console.log("This is black");
            menuItem[a].style.color = "white";
        }
    }
})() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:01:56.033

```
menuLink[a].addEventListener('onmouseover', linkChanger, true);
menuLink[a].addEventListener('onmouseout', linkChanger, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:04:03.473

当您编写 linkChanger() 时，它正在执行该函数并将结果提供给 Listener。用 包裹`function() { linkChanger(); }`或替换`linkChanger`. 第一个选项允许您传递参数并运行其他函数。

# c++ - 指向 void 的指针变成智能指针

> ID：10465490
> 
> 赞同：3
> 
> 时间：2012-05-05T20:00:16.917
> 
> 标签：c++, qt, memory-management

我正在尝试使用自定义删除器创建一个 void 的 QScopedPointer，以正确管理来自 C 库的资源（它只向其内部数据结构提供 void*）。但是，当我尝试实例化 void 的 QScopedPointer 时，我收到此错误：

```
/Library/Frameworks/QtCore.framework/Headers/qscopedpointer.h:104:14:
error: cannot form a reference to 'void'
    inline T &operator*() const
(from Clang) 
```

或这个：

```
/Library/Frameworks/QtCore.framework/Headers/qscopedpointer.h:104:
error: forming reference to void
(from GCC) 
```

我想专门化 QScopedPointer 或使用自定义删除器编写一个基本的作用域指针，但在这两种情况下，我最终都复制了与 QScopedPointer 中完全相同的代码。

有什么办法可以摆脱（或专门化）该特定功能，以便编译器不再抱怨？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:00:14.510

不。没有办法编写该函数，这样它就不会让编译器大吃一惊。你应该问问自己无论如何它会有什么意义。一个指向 void 的智能指针怎么能做一些 void* 本身不可能做的事情？

```
void * vptr; *vptr = ??;  ?? = *vptr;  f(*vptr); 
```

这些陈述都没有任何意义。

void* 类型是一种非常特殊的类型，旨在提供 C 中的不透明类型。您可以在 C++ 中使用它，但通常您不想这样做。我有一种感觉，无论你想做什么，都有更好的方法。

如果您真的需要一个智能的不透明指针类型，则必须实现它，并且必须省略取消引用功能。

令我惊讶的是，C++ 编译器被要求不编译不使用的模板的成员函数。这将向我表明您实际上是在尝试取消引用 void 指针。你不能那样做。如果您希望指针脱离智能指针，请使用 get()。我确定 QScopedPointer 或任何具有类似功能的东西。

# url - piwik 对其跟踪的 url 有长度限制吗？

> ID：10465493
> 
> 赞同：1
> 
> 时间：2012-05-05T20:00:52.890
> 
> 标签：url, analytics, matomo

我已经成功使用了 piwik，我想知道 piwik 当前跟踪的 url 是否有长度限制。我问这个是因为我有一些需要跟踪的下载链接，它们可以达到相当长的长度。他们似乎没有被 piwik 跟踪。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:47:41.287

取决于浏览器，有一些[url 长度限制](http://www.boutell.com/newfaq/misc/urllength.html)- 另外，请检查可以存储在 DB 中的 URL 的最大长度是多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-10T15:05:33.430

长 URL 仍应被跟踪，但默认情况下会在 1024 个字符后被截断。这可以自定义：[https](https://matomo.org/faq/troubleshooting/faq_21239/) ://matomo.org/faq/troubleshooting/faq_21239/ 但即使 URL 超过长度，它们仍然应该被跟踪（截断）。

# iphone - 在不请求新广告的情况下更改 GADBannerView 大小

> ID：10465494
> 
> 赞同：1
> 
> 时间：2012-05-05T20:01:05.947
> 
> 标签：iphone, ios, admob

我想在 iPhone 应用程序中以两种屏幕方向显示 AdMob 广告。广告尺寸在纵向模式下应为 320x50，在横向模式下应为 480x32。

我尝试更改bannerView 框架和adSize 属性，它们都运行良好，并且横幅尺寸会根据需要更改，但问题是每次旋转时都会调用adViewDidReceiveAd 方法并请求新广告。所以我想知道是否有办法避免在屏幕旋转和广告尺寸改变时重新加载广告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:34:19.803

如果我正确理解这一点，您是否希望发出一个广告请求，其中包含 320x50 广告素材和 480x32 广告素材？您需要两个不同的广告素材，因为在两个方向重复使用相同的广告可能会使广告看起来被拉伸。

不幸的是，不要认为这是您现在可以使用 AdMob SDK 完成的事情。不要认为您可以在此处使用解决方法，因为这需要更改服务器端。

# sql - 带有动态 SQL 的 SQL Server XML 输出

> ID：10465497
> 
> 赞同：3
> 
> 时间：2012-05-05T20:01:35.987
> 
> 标签：sql, xml, sql-server-2008

我面临一个关于 xml 输出的小问题。

[我需要得到这样的xml结构：](http://i50.tinypic.com/10ydimq.png)

这是我的程序，它将根据输入列出所有员工及其一些个人信息。

```
CREATE PROC getDeptEmployees(@deptList varchar(500))
AS
BEGIN
SET NOCOUNT ON 

DECLARE @Query varchar(600)

SET @Query = '
SELECT department.DEPARTMENT_ID [f_Department_ID], department.DEPARTMENT_NAME  [f_Department_name],
dp.Employee_id [f_Employee_ID], dp.First_name [f_First_Name], 
dp.Last_Name [f_Last_name], dp.Email [f_email], dp.Salary [f_salary]
FROM dbo.Employees dp 
JOIN DEPARTMENTS department 
ON dp.DEPARTMENT_ID = department.DEPARTMENT_ID
WHERE dp.Department_id IN (' + @deptList + ') 
for XML AUTO, ROOT(''table'')'

EXEC(@Query)    
END
GO 
```

我得到的是[这里，](http://i47.tinypic.com/ncjl28.png) 但我仍然不知道如何添加 DPR 节点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:36:15.400

您需要使用`FOR XML PATH`SQL Server 2005 中的功能和相关子查询 - 类似于以下内容：

```
SELECT 
    d.Department_ID AS '@f_Department_ID',
    d.Department_Name AS '@f_Department_name',
    (SELECT 
        e.BusinessEntityID AS '@f_Employee_ID',
        e.FirstName AS '@f_First_Name',
        e.LastName AS '@f_Last_name',
            e.Email AS '@f_email',
        e.Salary AS '@f_salary'
     FROM
        dbo.Employee e
     WHERE
        e.Department_ID = d.Department_ID
     FOR XML PATH('dp'), TYPE
    ) AS 'dpr' 
FROM 
    dbo.Department d 
WHERE 
    d.DepartmentID IN (.......) 
ORDER BY 
    d.DepartmentID
FOR XML PATH('department'), ROOT('table') 
```

基本上，最里面的查询为单个员工创建 XML 元素

```
<dp f_Employee_ID="6" f_First_Name="Jossef" f_Last_name="Goldberg" f_salary="998320692" /> 
```

将其用作具有别名的相关子查询`AS 'dpr'`then 将给定部门的员工列表包装到`<dpr>`标签中：

```
<dpr>
  <dp f_Employee_ID="4" f_First_Name="Rob" f_Last_name="Walters" f_salary="112457891" />
  <dp f_Employee_ID="11" f_First_Name="Ovidiu" f_Last_name="Cracium" f_salary="974026903" />
  <dp f_Employee_ID="12" f_First_Name="Thierry" f_Last_name="D'Hers" f_salary="480168528" />
  <dp f_Employee_ID="13" f_First_Name="Janice" f_Last_name="Galvin" f_salary="486228782" />
</dpr> 
```

`SELECT`然后将此 XML 片段添加到创建节点的最外层`<department>`，您应该会获得所需的输出。

有关更多信息，`FOR XML PATH`请参阅：

*   [SQL Server 联机丛书中的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms189885.aspx)
*   [FOR XML PATH - SQL Server 2005 中的 FOR XML 新模式](http://geekswithblogs.net/chavansachinr/archive/2007/04/30/112132.aspx)
*   [SQL SERVER – 使用 T-SQL 创建 XML 文件的简单示例](http://blog.sqlauthority.com/2009/02/12/sql-server-simple-example-of-creating-xml-file-using-t-sql/)

# android - 在android中查看图像集合

> ID：10465502
> 
> 赞同：1
> 
> 时间：2012-05-05T20:02:04.837
> 
> 标签：android, android-layout

我是android开发的新手，我试图找到一个单帧视图，它有一个左箭头和一个右箭头，可以让你循环浏览一组图片。另外，如果我有一组位图对象，我可以用它来初始化这个查看器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:29:18.290

你应该看看画廊视图。它允许您左右滑动以转到下一个元素。您还可以以编程方式触发转换。

请参阅本教程：http: [//developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

或者，您可以使用兼容性包中的 ViewPager 来创建更好的滑动体验。

# codeigniter - codeigniter 会话数据丢失

> ID：10465503
> 
> 赞同：0
> 
> 时间：2012-05-05T20:02:08.847
> 
> 标签：codeigniter, session, controller, localhost

我已经发布了这个问题，但仍然无法解决这个问题。
似乎每个人都对 codeigniter 有这个问题。
当我在控制器中设置会话时，它可以完美运行并且我可以显示它。当我移动到另一个控制器时，（自定义）会话数据完全丢失。我尝试在 config.php 中更改我的 cookie_domain。因为我在本地主机上，所以我尝试了`localhost`没有`/`并且一切都没有工作。顺便说一句，我迷路了，我在某处读到，当 2 个 ajax 请求同时发生时会发生这种情况。这可能是问题吗？或者如果您遇到同样的问题，请告诉我您是如何解决问题的`localhost/codeigniter``sodeigniter`

搞砸了，我正在切换到 php 本机会话。如果有人想这样做，
[http://codeigniter.com/wiki/PHPSession](http://codeigniter.com/wiki/PHPSession)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:10:19.107

检查并仔细检查您的代码或您用于杂散 sess_destroy() 的任何外部库。我遇到了类似的问题，我在会话中存储了一个 id 以供参考，但是如果用户随后登录我用于登录的 SimpleLogin 库，只会破坏整个会话，包括我不想丢失的数据。

这就是我没有编写自己的代码所得到的。

# c++ - 如何在不导入任何库的情况下删除矢量

> ID：10465509
> 
> 赞同：1
> 
> 时间：2012-05-05T20:03:12.093
> 
> 标签：c++, string, pointers, vector

```
vector<char*> x; 
```

我的代码中有很多向量。但是，我需要删除它们以最大程度地减少内存使用。我知道有一个解决方案，比如使用“shared_array”，但我不允许导入任何其他库。使用向量后有什么好的解决方案可以防止内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:07:38.090

在您的代码片段中，您使用的是 char 指针向量。我假设这些指针是通过 new 分配的，它们需要通过 delete 释放。如果向量超出范围，它将被释放，但所有这些 char 数组都不会被释放。您需要手动释放它们。

另一种方法是使用[`std::string`](http://cplusplus.com/reference/string/string/)，特别是`vector<std::string>`. 这样，当向量超出范围时，所有的字符串都会被自动删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:04:59.810

C++11 支持智能指针对象，例如`shared_ptr`，因此您不必使用 Boost（或其他任何东西）。

正如 johnathon 所说，你可以`char *`用一个智能指针来包装，等等，你不必再担心它了。

```
std::vector<std::unique_ptr<char*>> x; 
```

或者

```
std::vector<std::shared_ptr<char*>> x; 
```

`.delete()`当元素以任何一种方式（ , , ...）从向量中删除时`.erase()`，或者只是在向量被销毁时，您的缓冲区将被释放。

如果你的 STL 实现或编译器还不支持这个 C++11 特性，你也可以滚动你自己的智能指针类型，应该不会太难。例如，请参阅[本教程](http://www.codeproject.com/Articles/15351/Implementing-a-simple-smart-pointer-in-c)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:11:12.777

您可以使用

```
//Create
vector<char*>* _vec = new vector<char*>(5);
//Fill with something
for(unsigned int i=0; i<_vec->size(); ++i)
    (*_vec)[i] = new char[100];
....

//Delete
for(unsigned int i=0; i<_vec->size(); ++i)
    delete[] (*_vec)[i]; //Deleting array of char
delete _vec; //but not delete[] as we deleting only one instance of vector 
```

# javascript - 扫描条码时的 JQuery 警报

> ID：10465519
> 
> 赞同：-3
> 
> 时间：2012-05-05T20:04:19.003
> 
> 标签：javascript, jquery, vb.net

我想要一个在条形码扫描完成时弹出 JavaScript 警报的网页。我不想将事件绑定到任何可见控件（例如文本框），因此，我不会专注于任何控件来捕获扫描输入。这可以用 JQuery 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:24:53.343

可以捕获整个页面上的键输入。例如：

```
$(document.body).on('keypress',function(e){
    console.log(e.keyCode);
}); 
```

我不知道来自扫描仪的字符输入是否会在 DOM 中创建与实际按键相同的按键事件，但我猜它可能会。我的扫描仪死了，但我很想知道这种技术是否可行。

请记住：如果没有文本输入，您将不得不编写自己的代码来确定哪些输入构成了“扫描代码”与其他键输入、先前的键输入等。这应该不是很困难，因为条形码扫描仪通常输入速度非常快，最后还会输出回车。

# c# - 我如何将其翻译成 c#

> ID：10465523
> 
> 赞同：0
> 
> 时间：2012-05-05T20:04:59.970
> 
> 标签：c#, asp.net, vb.net, visual-studio-2010, xtrareport

我在我的一份报告中找到了问题的解决方案，但它在 VB.NET 中，我不确定如何将其转换为 C#，我尝试使用其中一种工具在线完成，但无法确定使用的事件或类似的东西。如果有人精通这两种语言，也许你可以帮我弄清楚它的翻译？这是VB代码

```
Private Sub XrLabel1_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)
Handles XrLabel1.BeforePrint

    CType(sender, XRLabel).Tag = GetCurrentColumnValue("ID")

End Sub

Private Sub XrLabel1_HtmlItemCreated(ByVal sender As Object, ByVal e As
DevExpress.XtraReports.UI.HtmlEventArgs) Handles XrLabel1.HtmlItemCreated

    e.ContentCell.InnerHtml =
String.Format("<a href=http://www.testarea.com/property.aspx?id={1}>{0}</a>", e.ContentCell.InnerText,
e.Data.Tag) 
```

PS：我试图在这个网站上转换它[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

原始代码在这里[http://www.devexpress.com/Support/Center/KB/p/A1107.aspx](http://www.devexpress.com/Support/Center/KB/p/A1107.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:11:37.027

```
private void XrLabel1_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e)
{
    ((XRLabel)sender).Tag = GetCurrentColumnValue("ID");
}

private void XrLabel1_HtmlItemCreated(object sender, DevExpress.XtraReports.UI.HtmlEventArgs e)
{
    e.ContentCell.InnerHtml = String.Format("<a href=http://www.testarea.com/property.aspx?id={1}>{0}</a>", e.ContentCell.InnerText, e.Data.Tag);
} 
```

但这里的诀窍是你必须在某个地方订阅事件，所以你在初始化时需要这个：

```
XrLabel1.BeforePrint += XrLabel1_BeforePrint;
XrLabel1.HtmlItemCreate += XrLabel1_HtmlItemCreated; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:39:19.447

试试这个： http:
[//www.carlosag.net/tools/codetranslator/](http://www.carlosag.net/tools/codetranslator/)

# html - 在标签中使用带有 CLASS 的 ID

> ID：10465524
> 
> 赞同：0
> 
> 时间：2012-05-05T20:05:07.100
> 
> 标签：html, css, stylesheet

我想在 HTML 中用 id 标记一个标签，如下所示：

```
<span id="id_errortag" 
    style="font-family:Helvetica;Font-size:14px;" class="red"></span> 
```

我想知道 HTML 标准是否可以将 id 与类结合使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:07:59.180

在 HTML 元素上同时使用 id 和 class 是完全可以接受的，只要您记住 id 在页面上必须是唯一的。类可用于对元素进行分组，但 id 必须是唯一的。

除了类之外，您还可以使用其他属性选择器来识别元素。您不仅限于班级和身份。例如，您可以使用 CSS 选择器来更改具有特定值的输入的颜色。

请记住，类/id 选择器的用途之一是帮助您将内容、表示和行为彼此分开，这将使 Web 设计人员更容易与您合作。使用 CSS 选择器，您的 JavaScript 可以完全保存在外部 JavaScript 文件中，您的 CSS 可以全部保存在外部 CSS 文件中，您的内容可以保存在 HTML 中。

如果有人需要更改表示或行为，他们可以这样做而无需修改 HTML，如果有人需要更改样式，则无需修改 HTML。这不仅有助于减少错误，而且使代码更易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:07:35.520

100% 没问题，但编写内联样式不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:07:57.997

是的，这是完全有效的。id 必须是唯一的，但类不是。一个类的全部原因是对需要不同 id 的几个东西进行样式设置，同时允许您使用 id 来区分函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T20:08:14.740

是的。但 ID 必须只有一个，因为它是唯一的。类可以有很多，并且可以用逗号分隔。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T20:09:36.380

ID 和类用于不同的用途。元素只有一个 ID，并且在内容中应该是唯一的。元素可以有多个类（空格分隔），并且可以将相同的类应用于多个元素。可以同时使用它们，但根据上下文，在决定使用哪个之前，通常最好退后一步，看看你的意图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T20:07:29.047

是的，绝对是。您可以指定任意数量的类并用空格分隔它们，但只能使用一个 id。即使它们具有相同的名称，它们也不会相互冲突，因此您不需要使用该`id_`前缀来命名它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-05T20:07:55.243

对 HTML 元素同时使用 ID 和类并没有错。事实上，这很常见。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-05T20:10:54.360

当然，请参阅[HTML 4.01 的规范](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)和[HTML5 规范的草案](http://dev.w3.org/html5/spec/global-attributes.html#classes)。另请参阅[这篇文章](http://css-tricks.com/the-difference-between-id-and-class/)`id`，了解和之间的区别`class`。

# c# - 打破 foreach 循环（WCF 服务器/客户端）

> ID：10465527
> 
> 赞同：0
> 
> 时间：2012-05-05T20:05:39.853
> 
> 标签：c#, asp.net, wcf, foreach, client-server

我有一个简单的代码，它从服务器发送到客户端的值来计数。此循环计数为 9 个值，从 1 到 9。对于 1,3 或 9 个客户端，一切正常。但是对于其他数量的客户端，当`i_wiersz`值为 9 并且 foreach 循环想要发送一些东西到另一个客户端服务器时发生故障。何使，与任何一位客户合作？

我尝试放入 foreach 循环：

```
if(i_wiersz == 9)
   break; 
```

但得到一个错误：错误

> 控件不能离开匿名方法或 lambda 表达式的主体

我的代码：

```
bool spr_wiersz(int wiersz, int kolumna) //chck_roow(int roow, int column)
{
   wys_tab();
   int i_wiersz = 0;
   bool[] result = new bool[9];

   while (i_wiersz < 9)
   {
      subscribers.ForEach(delegate(ImessageCallback callback)
      {
          if (((ICommunicationObject)callback).State == CommunicationState.Opened)
          {
              result[i_wiersz] = callback.spr_wiersz(wiersz, kolumna, i_wiersz);
              i_wiersz++;
          }
      });

      for (int j = 0; j < i_wiersz; j++)
      {
          if (result[j] == false)
          {
             return false;
          }
      }
   }

   return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:24:05.070

你不能简单地把它转换成传统的`foreach`吗？

```
 foreach (IMessageCallback callback in subscribers)
  {
      if (((ICommunicationObject)callback).State == CommunicationState.Opened)
      {
          result[i_wiersz] = callback.spr_wiersz(wiersz, kolumna, i_wiersz);
          i_wiersz++;

          if (i_wiersz == 9)
              break;
      }
  } 
```

# ruby-on-rails-3 - Rspec Request Spec，表单提交失败

> ID：10465528
> 
> 赞同：1
> 
> 时间：2012-05-05T20:05:48.763
> 
> 标签：ruby-on-rails-3, jquery-ui, capybara, rspec2

我有一个简单的调度应用程序。我已经设置了一个请求规范，以运行将新锻炼添加到日程表的流程，并且表单似乎在提交时挂起，并且脚本在几秒钟后退出。手动运行它可以正常工作，我的控制器和模型规格都通过了，没有任何抱怨。

唯一有趣的是我正在使用 execute_script 与 jquery datepicker 进行交互，这似乎工作正常。观察执行表明没有发生错误，它只是挂起等待 127.0.0.1 响应，这似乎没有发生。

```
describe "Workouts" do
  describe 'Create Workouts', js: true do
    it 'Creates a new workout and displays the workout\'s page'  do
      visit workouts_path
      expect {
        click_link "New Workout"
        fill_in 'workout_name', with: 'Workout!'
        fill_in '', with: '05/01/2012'
        page.execute_script %Q{ $('#workout_show_date').trigger("focus") } 
        page.execute_script %Q{ $("a.ui-state-default:contains('15')").trigger("click") }
        select('6', from: 'workout_time_4i')
        select('15', from: 'workout_time_5i')
        click_button 'Create Workout'
      }.to change(Workout,:count).by(1)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:08:31.340

因此，在规范中休眠后，错误开始返回数据库已锁定，谷歌透露这是与打开事务装置有关的问题。把它关了，现在我所有的规格都通过了

# java - 泛型和向下转换 (java)

> ID：10465529
> 
> 赞同：1
> 
> 时间：2012-05-05T20:05:56.437
> 
> 标签：java, generics, classcastexception

在过去的 3 个小时里一直试图找到一个直接的答案/解决方案，但没有运气，希望你们能提供帮助：

我有以下类使用二叉搜索树实现间隔树：

```
public class Node<T extends Comparable<T>> implements Comparable<Node<T>> {...}

public class BinarySearchTree<T extends Comparable<T>> {
protected Node<T> root;
...}

public class IntervalNode extends Node<Interval> {...}

public class IntervalTree extends BinarySearchTree<Interval> {...} 
```

当我尝试对 IntervalTree 实例的根成员进行以下强制转换时，我得到一个 ClassCastException：

```
IntervalNode CurrentNode = (IntervalNode)root; //root being of type Node<Interval>
which IntervalNode extends. 
```

我对 java 还很陌生，但从我读过和搜索过的内容来看，这种向下转换应该是可能的，所以我对这个异常的原因有点迷茫。到目前为止，我最好的猜测是这是由类型擦除引起的，但我无法找到关于此事的直接答案。关于此异常的原因或更好的解决方法的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:13:06.097

你不是在这里向上转型，而是向下转型。IntervalNode 是 a `Node<Interval>`（因为它扩展了它），但 a`Node<Interval>`不一定是 IntervalNode。

就像香蕉是水果一样，因为它扩展了它，但水果并不总是香蕉。如果你有一个水果并将其投射到香蕉上，那么只有当水果实际上是香蕉时它才会起作用。如果它是一个苹果，它就会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:32:50.520

如果你需要一个`IntervalNode`在你的`IntervalTree`，那么怎么样：

```
public class BinarySearchTree<T extends Node<?>> {
    protected T root;
}

public class IntervalTree extends BinarySearchTree<IntervalNode> {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:49:47.893

如果您创建`Node`一个接口（并可能将通用实现放在基类中），您几乎可以完全按照您最初想要做的事情：

```
public interface Node<T extends Comparable<T>> extends Comparable<Node<T>> {...}
public class BaseNode<T extends Comparable<T>> implements Node<T> {...}

public class IntervalNode extends BaseNode<Interval> implements Node<Interval> {...} 
```

只要您使所有`Node`s`IntervalTree`使用`IntervalNode`.

无论哪种方式（有或没有接口），您都需要确保覆盖`BinarySearchTree`创建`Node`s 中的任何内容`IntervalTree`以创建`IntervalNode`s。

# eclipse-plugin - 在 eclipse indigo 上安装 freemarker 插件

> ID：10465530
> 
> 赞同：1
> 
> 时间：2012-05-05T20:05:59.670
> 
> 标签：eclipse-plugin, freemarker

我试图在运行 Ubuntu 11 的机器上安装适用于 eclipse Indigo 的 freemarker 插件。我尝试添加[http://www.freemarker.org/eclipse/update](http://www.freemarker.org/eclipse/update)名称为 FreeMarker 以安装新软件选项。但是，它抱怨没有存储库。然后，IO 手动尝试从[http://sourceforge.net/projects/freemarker](http://sourceforge.net/projects/freemarker)下载插件文件 (freemarker-2.3.19.tar.gz)并尝试将内容复制到 /usr/share/eclipse/plugins 文件夹。但是，它拒绝了它抱怨文件内容的格式不兼容。谁能帮我解决这个问题。提前致谢。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:01:09.287

[正如http://freemarker.org/editors.html](http://freemarker.org/editors.html)所说，您应该在 JBoss 工具项目中使用 FreeMarker 插件。你从哪里得到旧插件的链接？（另外，freemarker-2.3.19.tar.gz 是 FreeMarker 发行版，与 Eclipse 无关。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T17:14:10.287

最后，我从 Eclipse 官网下载了 Eclipse Indigo for Java EE。它有我可以轻松安装 JBoss 插件的市场。我所要做的就是从 Eclipse 中安装它，然后就可以在 freemarker 上工作了。

# php - 是否值得花时间跟随趋势并使用 Knockout.js 或 Backbone.js？

> ID：10465532
> 
> 赞同：3
> 
> 时间：2012-05-05T20:06:31.933
> 
> 标签：php, backbone.js, knockout.js

我和我的团队将很快开始开发新的网络 (vtv) 服务。

大部分内容将通过 json api 进行处理和处理，但我们需要一个体面的控制面板供想要在 gui 环境中访问其数据的用户使用。

我们正在讨论是否值得花时间使用诸如淘汰赛或骨干网之类的框架来开发控制面板，或者我们是否应该坚持使用我们的经典堆栈。

作为一个忠实的 Javascript 粉丝和开发人员，我在业余时间使用了 Knout 和 Backbone 来开发一些小型应用程序，我已经可以看到在实际生产中将所有这些和平放在一起是多么困难。

花额外的钱跟随趋势并为用户提供更快的 gui 真的值得吗？

我的公司似乎只对快钱感兴趣，所以请告诉我要使用的论据！

谢谢 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:09:11.747

我无法对 Knockout 发表评论，但 Backbone 绝对出色。这是一个需要学习的小框架，一旦你掌握了它，你会发现它做了每个同类框架都*应该*做的事情：实现你本来应该实现的部分，并考虑与之相关的问题你会意识到一点点。

它提供了一个合理的事件和对象模型系统来处理使服务器端对象和客户端对象保持同步的业务，并具有一个合理的视图模型，其中事件绑定将两者联系起来。

因此，要解决您的问题，这实际上取决于您在做什么。如果您正在编写一种使用模型并从 API 获取数据的异步应用程序，那么您很可能希望使用与 Backbone 相同的架构。如果你不是，你要么设计了一些非常不同的东西而且它没有用（所以你可以说'它只是不适合'）或者你在设计中犯了一个错误，你很快就会需要重新写！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:12:57.877

Knockout 或 Backbone 不会帮助您为用户提供“更快的 gui”

但是，它将使开发更容易。这些框架对您的代码强加了一种结构——这意味着它更易于维护，您团队中的其他人可以更轻松地阅读代码并理解流程。这意味着您可以更快地响应用户反馈并为您的用户提供积极的体验

对于 UI 本身的速度，您应该从调查 UI 缓慢的原因开始使用速度优化技术

一般来说，我建议您继续使用您选择的框架。只有好的才能从中产生

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:14:42.227

通常，您应该选择一个框架/库，因为它可以为您提供附加值或缩短开发时间。

如果您有时间/金钱，并且想在编写软件的同时学习实施新技术，那就太好了，去吧！

如果您需要快速完成工作，请使用正确的工具来完成这项工作。

# c++ - 预期的构造函数、析构函数或类型转换

> ID：10465533
> 
> 赞同：1
> 
> 时间：2012-05-05T20:06:44.710
> 
> 标签：c++, templates

我正在用迭代器编写我自己的模板列表类，并且有这个错误（（（编译器：来自 MinGW 的 GCC（我使用 Eclipse IDE）我的代码：cpp：

```
#include <iostream>
#include "tlist.h"
using namespace std;
int main(){
  return 0;
} 
```

标题

```
template<typename T>
class element{
private:
    element<T>* pre;
    element<T>* next;
    T data;
public:
    element(){};
    ~element(){};
    element(T d){
        pre=NULL;
        next=NULL;
        data=d;
    }
    void SetPre(element<T>* a){
        pre=a;
    };
    void SetNext(element<T>* a){
        next=a;
    };
    void SetData(T d){
        data=d;
    }
    element<T>* GetPre(){
        return pre;
    }
    element<T>* GetNext(){
        return next;
    }
    T GetData(){
        return data;
    }
};
template<typename T>
class Tlist{
private:
    element<T>* first;
    element<T>* last;
    int size;
public:
        int GetSize(){
        return size;
    }
        Tlist(){
        first=NULL;
        last=NULL;
        size=0;
    }
        ~Tlist(){};
        Tlist(T d){
        element<T>* tmp;
        tmp->SetPre(NULL);
        tmp->SetNext(NULL);
        tmp->SetData(d);
        this->size=1;
        this->first=tmp;
        this->last=tmp;
                }
    class Iterator{
    private:
        element<T>* pointing;
    public:
        Iterator(){
            pointing=NULL;
        };
        ~Iterator(){};
        Tlist<T>::Iterator& operator++(int i);
        element<T>* operator*();
        Iterator(element<T>* b){
            pointing=b;
        }
    };
    bool empty();
    void clear();
    void swap(Tlist<T>& lst);
    Tlist<T>::Iterator begin();
    Tlist<T>::Iterator end();
    T front();
    T back();
    void push_back(T t);
    void push_front(T t);
    void pop_front();
    void pop_back();
    Tlist<T>::Iterator insert(Tlist<T>::Iterator pos,T data);
    Tlist<T>::Iterator erase(Tlist<T>::Iterator pos);
    void splice(Tlist<T>::Iterator pos,Tlist<T>* in);
    Tlist<T> operator=(Tlist<T> const &other){
    this->size=other.size;
    this->first=other.first;
    this->last=other.last;
    return *this;
};
};
template<typename T>
Tlist<T>::Iterator& Tlist<T>::Iterator::operator++(int i){
    element<T>* temp=*this;
    if(temp->GetNext()!=NULL) this->pointing=temp->GetNext();
    return *this;
}
template<typename T>
element<T>* Tlist<T>::Iterator::operator*(){
    return pointing;
}
template<typename T>
bool Tlist<T>::empty(){
            if(this->size==0) return true;
            else return false;
};
template<typename T>
void Tlist<T>::clear(){
            element<T>* son;
            element<T>* temp;
            son=this->first;
            while(son!=NULL){
                temp=son->next;
                delete son;
                son=temp;
            }
            this->size=0;
};
template<typename T>
void Tlist<T>::swap(Tlist<T>& lst){
            int temp=this->size;
            this->size=lst->size;
            lst->size=temp;
            Tlist<T>* tmp;
            *tmp=*this;
            *this=lst;
            lst=*tmp;
}
template<typename T>
Tlist<T>::Iterator Tlist<T>::begin(){
                Tlist<T>::Iterator res(this->first);
                return res;
};
 template<typename T>
Tlist<T>::Iterator Tlist<T>::end(){
                Tlist<T>::Iterator res(this->last);
                return res;
}
template<typename T>
T Tlist<T>::front(){
return this->first->GetData();
}
template<typename T>
T Tlist<T>::back(){
    return this->last->GetData();
};
template<typename T>
void Tlist<T>::push_front(T d){
    element<T>* temp(d);
    this->size++;
    this->first->SetPre(temp);
    temp->SetNext(this->first);
    this->first=temp;
}
template<typename T>
void Tlist<T>::push_back(T d){
    element<T>* temp(d);
    this->last->SetNext(temp);
    this->size++;
    temp->SetPre(this->last);
    this->last=temp;
}
template<typename T>
void Tlist<T>::pop_front(){
    element<T>* temp=this->first->GetNext;
    delete this->first;
    this->first=temp;
    this->size--;
}
template<typename T>
void Tlist<T>::pop_back(){
    element<T>* temp=this->last;
    delete this->last;
    this->last=temp;
    this->size--;
}
template<typename T>
Tlist<T>::Iterator Tlist<T>::insert(Tlist<T>::Iterator pos,T d){
    element<T>* temp(d);
    element<T>* p=*pos;
    element<T>* n=p->GetNext();
    p->SetNext(temp);
    temp->SetPre(p);
    if(n!=NULL){
        n->SetPre(temp);
        temp->SetNext(n);
    }
    this->size++;
    return pos++;
}
template<typename T>
Tlist<T>::Iterator Tlist<T>::erase(Tlist<T>::Iterator pos){
    if(pos==this->end()){
                    this->pop_back();
                    return this->end();
                }
    if(pos==this->begin()){
        this->pop_front();
        return this->begin();
    }
    else{
        element<T>* del=*pos;
        element<T>* p=del->GetPre();
        element<T>* n=del->GetNext();
        pos++;
        p->SetNext(n);
        n->SetPre(p);
        delete del;
        this->size--;
        return pos;
    }
 };
 template<typename T>
void Tlist<T>::splice(Tlist<T>::Iterator pos,Tlist<T>* a){
    this->size+=a->GetSize();
    element<T>* p=*pos;
    element<T>* n=p->GetNext();
    p->SetNext(a->first);
    a->first->SetPre(p);
    n->SetPre(a->last);
    a->last->SetNext(n);
    a->size=0;
    a->first=NULL;
    a->last=NULL;
} 
```

错误是：

```
..\tlist.h:99: error: expected constructor, destructor, or type conversion before '&' token
..\tlist.h:136: error: expected constructor, destructor, or type conversion before 'Tlist'
..\tlist.h:141: error: expected constructor, destructor, or type conversion before 'Tlist'
..\tlist.h:184: error: expected constructor, destructor, or type conversion before 'Tlist'
..\tlist.h:198: error: expected constructor, destructor, or type conversion before 'Tlist' 
```

帮帮我，如果可以的话，请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:17:29.207

当你说

```
Tlist<T>::anything 
```

编译器首先认为您可能是指`Tlist<T>`名为`anything`. 为了告诉它你指明了一个*类型*，你应该在构造前加上`typename`：

```
template<typename T>
typename Tlist<T>::Iterator& TList<T>::Iterator::operator++(int){
... 
```

（编辑：刚刚碰到[一篇文章](http://pages.cs.wisc.edu/~driscoll/typename.html)）`typename`

# html - fb-登录按钮和定位

> ID：10465535
> 
> 赞同：2
> 
> 时间：2012-05-05T20:06:55.673
> 
> 标签：html, facebook, fbml

我试图避免为我的网站拥有自己的自定义登录系统的现代陈词滥调，而是尝试使用 Facebook 和 Twitter 作为用户可以登录我的网站的选项。经过几个小时的浏览，我发现将 Facebook 加入我的网站就像只用牙齿系鞋带一样简单。

我设法让按钮显示在正确的 div 中；但是，我无法让按钮将自己定位在它所在的标签的中心。

在这次旅程中，我的第一个问题（可能是很多问题）是如何使按钮居中？我尝试向 div 添加样式标签，这当然没有用，因为 Facebook 实际上替换了我的 div。感谢您提供任何帮助。

编辑：添加相关代码。

```
 Index.php:
    <!--User System Start -->
    <script>
      window.fbAsyncInit = function() {
        FB.init({
        appId      : '[MASKED]', // App ID
        channelUrl : '[MASKED]', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

    // Additional initialization code here
      };

   // Load the SDK Asynchronously
      (function(d){
          var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
          if (d.getElementById(id)) { return; }
          js = d.createElement('script'); js.id = id; js.async = true;
          js.src = "//connect.facebook.net/en_US/all.js";
          ref.parentNode.insertBefore(js, ref);
       }(document));
    </script>
    <div id="loginWrapper">
        <div id="loginBar">
        <section id="loginBarLeft">
        <h1>Step One: Login</h1>
        <div id="fb-root"></div>
        <div class="centered"><fb:login-button>Login With Facebook</fb:login-button></div>
    </section>
    <section id="loginBarCenter">Login Bar Center</section>
    <section id="loginBarRight">Login Bar Right</section>
</div>
<div id="showHide"><a href="#" id="showHideButton">Login or Register</a></div>
    </div>
    <!--User System End -->

    userSystem.css
    @charset "utf-8";
    /* CSS Document */
    body {
        margin-top: 0;
        padding-top: 0;
    }
    div#loginWrapper {
        width: 1024px;
        height: auto;
        margin: 0 auto;
        position: fixed;
        z-index: 2;
        left: 50%;
        left: 120px;
        top: 0
    }
    div#loginBar {
        width: 1024px;
        height: 300px;
        background: url(images/loginBar_background.png) repeat-x;
        color: #006;
        border-bottom-left-radius: 25px;
        box-shadow: 5px 5px 5px #000;
     }
     div#loginBar section#loginBarLeft {
        float: left;
        width: 33%;
        height: 300px;
     }
     div#loginBar section#loginBarLeft h1 {
        text-align: center;
        margin-top: 5px;
     }

      div#loginBar section#loginBarLeft .centered {
        height: 100px;
        width: 341px;
        margin: 0 auto;
      }
      div#loginBar section#loginBarCenter {
        float: left;
        width: 33%;
        height: 300px;
        border-right: 1px solid #FFF;
        border-left: 1px solid #FFF;
     }
      div#loginBar section#loginBarRight {
        float: left;
        width: 33%;
        height: 300px;
     }
     div#showHide {
        width: 200px;
        height: 25px;
        position: relative;
        left: 824px;
        background: #333;
        color: #FFF;
        text-align: center;
        border-bottom-left-radius: 15px;
        border-bottom-right-radius: 15px;
        box-shadow: 5px 5px 5px #000;
        z-index: 2;
     }
     div#showHide a {
        color: #CCC;
        text-decoration: none;
        font-weight: bold;
     }
    div#showHide a:hover {
        color: #FFF;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:18:45.430

我之前设法定位了类似 fb 的按钮：如果您的登录按钮设置类似，例如使用 XFBML，它不应该替换您的 div。

**HTML**

```
<p>Click on <span class="fb-like"><fb:like href="http://www.facebook.com/somepage" send="false" width="49" show_faces="false" font="arial"></fb:like></span> to become fan and enter lalalalala some form.</p> 
```

**CSS**

```
.fb-like { display: inline-block; height: 28px; overflow: hidden; position: relative; top: 6px; width: 48px; } 
```

对于您的具体问题，您可能想尝试这样的事情：

**HTML**

```
<div class="table">
    <div class="centered"><fb:login-button show-faces="false" width="200" max-rows="1"></fb:login-button></div>
</div> 
```

**CSS**

```
.centered { display: table-cell; vertical-align: middle; }
.table { display: table; height: 400px; } 
```

# javascript - 来自Javascript数组的innerHTML

> ID：10465546
> 
> 赞同：1
> 
> 时间：2012-05-05T20:08:04.363
> 
> 标签：javascript, html, arrays

我正在尝试从数组中保留 Javascript 上下文。有什么办法可以使这项工作？还是更优雅的方式？

例子：

```
<html>
<script type="text/javascript">

var rand = Math.floor(Math.random() * 6) + 1;

var i = Math.floor(Math.random() * 6) + 1;

var arr = ["'There are ' + i + ' dogs in the yard.'","'The other day I saw ' + i + ' pigs that one lake.'","'I can't believe there were ' + i + ' birds in your yard the other day.'","'Why were there ' + i + ' cats in my front yard?'","'There are ' + i + ' rabbits in the yard.'","'There are ' + i + ' snakes in the yard.'"];

document.getElementById('fudge').innerHTML = arr[rand];
</script>
<body>
<div id='fudge'></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:11:19.937

摆脱外部双引号。

```
var arr = [
    'There are ' + i + ' dogs in the yard.',
    'There are ' + i + ' pigs in the yard.',
    'There are ' + i + ' birds in the yard.',
    'There are ' + i + ' cats in the yard.',
    'There are ' + i + ' rabbits in the yard.',
    'There are ' + i + ' snakes in the yard.'
]; 
```

***更新：**另外，将您`<script>`放在元素**下方**的某个位置。`fudge`当前脚本在`fudge`存在之前正在运行。*

* * *

如果您希望字符串随着变量的未来更新而更新，那将不起作用。您需要生成一个新字符串。

你可以做一个函数。

```
var animals = ['dogs','pigs','birds','cats','rabbits','snakes'];

function makeString() {
    var animal = animals[Math.floor(Math.random() * animals.length)],
        qty = Math.floor(Math.random() * 6) + 1;

    return "There are " + qty + " " + animal + " in the yard.";
}

makeString(); // "There are 3 dogs in the yard." 
```

* * *

`qty`当is时，您还可以处理单数/复数语法值`1`。

```
var animals = ['dog','pig','bird','cat','rabbit','snake'];

function makeString() {
    var animal = animals[Math.floor(Math.random() * animals.length)],
        verb = 'is',
        qty = Math.floor(Math.random() * 6) + 1;

    if (qty !== 1) {
        animal += 's';
        verb = 'are';
    }

    return "There " + verb + " " + qty + " " + animal + " in the yard.";
}

makeString(); // "There is 1 dog in the yard." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:12:44.740

我假设您想使用变量`i`来创建字符串，而不仅仅是字母`i`。当您在字符串周围使用引号时，变量不是字符串的一部分。

代替：

```
"'There are ' + i + ' dogs in the yard.'" 
```

只需使用：

```
'There are ' + i + ' dogs in the yard.' 
```

或者：

```
"There are " + i + " dogs in the yard." 
```

# soap - 经典 Asp Soap 客户端 IXMLDOMSelection

> ID：10465548
> 
> 赞同：0
> 
> 时间：2012-05-05T20:08:21.047
> 
> 标签：soap, asp-classic, client

Soapclient 的经典 asp 代码

```
dim soapClient ,XMLReader, xmlDoc

Set soapClient = Server.CreateObject("MSSOAP.SoapClient30")
    soapClient.ClientProperty("ServerHTTPRequest") = True
Call soapClient.MSSoapInit("http://www.jiemai.com/services/JieMaiSlService?wsdl")

    soapClient.ConnectorProperty("Timeout") = 90000 '90 seconds
    soapClient.ConnectorProperty("ConnectTimeout") = 90000 '90 seconds

Set result = soapClient.getAllCategories("1056aed3-eee8-409a-8be0-6dc65962686e", "1.0")

'REsponse.write Result(0)

Response.Write( TypeName( Result ) & "<br/>" & vbCrLf ) 
```

我正在使用上面的代码，但我得到的只是“IXMLDOMSelection”，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:10:43.427

如您所见，您有一个**[IXMLDOMSelection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757852%28v=vs.85%29.aspx)**对象。它是一个可迭代的集合，所以`Response.Write(result.context.xml)`如果你只想要选择上下文，你可以迭代或使用，这将返回树的 xml。

# java - 无法使用 JarSplice 创建可运行的 LWJGL jar

> ID：10465550
> 
> 赞同：0
> 
> 时间：2012-05-05T20:08:39.330
> 
> 标签：java, jar, lwjgl, slick2d

我用 Eclipse 为一个小型 SLick2D 游戏创建了一个可运行的 JAR。无论我尝试什么设置，我总是收到某种错误，无论是 UnsatisfiedLinkError，还是找不到某些类。

我尝试了 JARSplice，但也没有用。

谁能给我从 Eclipse 项目中创建可运行 jar 的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:53:10.263

如果您使用命令提示符在 jar 拼接之后尝试运行您的 .jar，或者使用清单方法或其他方式，您将转到 .jar 所在的目录并键入

java -jar YourGameNameHere.jar

这将为您提供有关它无法运行的原因的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:36:23.333

您需要做的第一件事是以某种方式包含本机库。您可以在从 lwjgl 站点下载的 .zip 文件中找到它们。

我可以推荐使用 JarSplice 来打包它们。确保在指定应该运行的类时*不要*使用默认包（无论如何这是不好的做法）。指定*整个*包路径（例如 package1.package2.Main），它应该运行。

使用 eclipse 生成的打包 JAR 作为 jarSplice 的“输入”jar。

# hibernate - 多对多关系未在关联表中更新/插入

> ID：10465553
> 
> 赞同：1
> 
> 时间：2012-05-05T20:09:06.950
> 
> 标签：hibernate, gwt, jpa, many-to-many

我有 2 个 Hibernate 对象 Group 和 User，它们与 ManyToMany 关系相关。

我使用以下映射

组.java

```
private Set<User> users = new HashSet<User>(0);

...

@ManyToMany(cascade = CascadeType.ALL)  
@JoinTable(name = "user_group",
joinColumns = { @JoinColumn(name = "GROUP_ID") },
inverseJoinColumns = { @JoinColumn(name = "USER_ID") })
public Set<User> getUsers() {
    return this.users;
}
... 
```

用户.java

```
private Set<Group> groups = new HashSet<User>(0);

...

@ManyToMany(mappedBy = "users") 
public Set<Group> getGroups() {
    return this.groups;
}

... 
```

DAO.java

```
public User addUserToGroup (Integer groupId , Integer  userId){
    Group group = (Group) getBeanById(groupId, Group.class); //Here I get the right group
    User user = (User) getBeanById(userId, User.class);//Here I get the right user
    group.getUsers().add(user);
    user.getGroups().add(group);
    save(group);        
    return user;
} 
```

保存方法

```
public EntityBase save(EntityBase transientInstance) {
    Session session = HibernateUtil.getCurrentSession();
    log.debug("persisting  instance");
    try {
        session.saveOrUpdate(transientInstance);
        log.debug("persist successful");
        return transientInstance;
    } catch (RuntimeException re) {
        log.error("save failed", re);
        throw re;
    }
} 
```

我的问题是当我将用户添加到组时，关联表中没有添加任何记录`user_group`。

注意：开始和提交语句在过滤器 Servlet 中调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:32:19.523

上面的代码做了它应该做的事情。我的问题是在显示用户列表时，Hibernate 检测到脏用户集合并将其删除。我最终做的是将关系的所有权更改为组而不是用户，并且一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:57:44.453

你必须这样打电话

```
save(group); 
user.getGroups().add(group);
save(user); 
```

您不需要更新实体的另一侧，因为它将由休眠更新。

# javascript - 具有最少代码占用的 JS 加载器

> ID：10465555
> 
> 赞同：0
> 
> 时间：2012-05-05T20:09:12.057
> 
> 标签：javascript, loader, amd

几天前我遇到了一个问题，这意味着我需要 JS 加载器。

我有以下文件：

```
#c.js
var c = {//something};

#b.js
var b = Object.create(c);

#main.js
var a = Object.create(b);
a.foo = 'bar'; 
```

我需要从“c.js”开始按顺序加载这些文件。

我对 js 加载器进行了一些快速研究，发现它们中的许多不能工作（或者工作但以丑陋的方式）具有像我的示例这样的深层依赖关系，并且只要它们加载给定依赖关系就启动一个回调函数，而不必担心给定依赖项中的依赖项（如果您现在是我的意思）。

尽管像 requireJs 这样的一些严肃的加载器可以做到这一点，但我发现它们在这种情况下有点烦人：

```
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'views/projects/list',
  'views/users/list'
], function($, _, Backbone, Session, projectListView, userListView){ 
```

...太多的代码，只有很少的依赖。

我也不喜欢我应该修改一些脚本，所以当它应该返回 $ 时，它们会返回类似于 jQuery 的东西。

太节省我的时间并避免尝试所有加载程序，我创建了这个问题。

**所以，最大的问题是，哪个 JS 加载器可以执行以下操作：**

1.  加载“深度”依赖项，就像我的示例一样，只有在加载所有依赖项和依赖项的所有依赖项（...等）时才会启动 callback() 。
2.  占用空间小，就像拥有一个 reuqire 函数，带有依赖列表和回调，并且不需要“回调”来返回和传递一些东西（因为通常我有自己的命名空间，比如 ga、gb、gc）。

我希望看到的一些例子：

```
#c.js
require([], function(){
var c = {//something};
});

#b.js
require(['c.js'], function(){
var b = Object.create(c);
});

#main.js
require(['b.js'], function(){
var a = Object.create(b);
a.foo = 'bar';
}); 
```

*对不起我的英语不好。

Ps - 实际上我写了我自己的加载器，它确实给出了一些东西，并且比 $script.js 更小（580 字节），虽然，当需要一些东西时，应该传递当前脚本的文件名，就像这样`require('main.js', ['b.js'], function(){});`- 但我没有想靠我的悟性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:18:20.670

这是如何通过以下方式实现您的要求的一种方法`require.js`：

```
// c.js
define(
    {/*something*/}
);

// b.js
define(['c.js'], function(c) {
    return Object.create(c);
});

// main.js
require(['b.js'], function(b) {
    var a = Object.create(b);
    a.foo = 'bar';
}); 
```

对我来说，这似乎非常接近你想要看到的，不是吗？

如果您有多个依赖项，例如 jQuery、Backbone 等，并且想要解耦所有内容，您最终会得到第二个清单。但是，另一种方法可能是全局加载“全局”库（如 jQuery），而不使用加载器，`require.js`只处理您自己的类和代码部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T13:18:01.010

已经有一段时间了，因为我已经问过这个问题了。问题的解决方案只是使用 requireJs，但以另一种方式定义模块：

```
define(require){
  var dep1 = require("dep1"),
  dep2 = require("dep2");

  var MyModule = {//define something};

  return MyModule;
}; 
```

# c# - 每次按下按钮时，将文本框文本添加到列表中的新字符串

> ID：10465557
> 
> 赞同：-1
> 
> 时间：2012-05-05T20:09:36.177
> 
> 标签：c#, string, list, text

这是代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        List<string> user = new List<string>();

        user.Add(usertextBox.Text); 
```

我希望每次按下按钮时，usertextBox 中的任何内容都作为新项目添加到列表“用户”中，因此我可以稍后使用 [1]、[2]、[3 ] 等。我也想要它，以便用户可以关闭应用程序并且所有用户仍将被保存。我不知道 C# 是否会自动执行此操作

即使你只能回答我的一个问题也没关系。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:11:37.987

在您的代码中，您`List`对 Button 进行本地化，这意味着每次单击按钮时`List`都会创建新对象，您应该在侧按钮单击方法中创建它。试试这个。

```
List<string> user = new List<string>();
private void button1_Click(object sender, EventArgs e)
    {
        user.Add(usertextBox.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:20:49.340

您必须定义`List`方法的外部。C# 不保留列表的内容。

```
 private List<string> user = new List<string>();
    private void button1_Click(object sender, EventArgs e)
        {
            user.Add(usertextBox.Text);
    } 
```

要保存内容，您可以使用数据库 ( [http://msdn.microsoft.com/en-us/library/bb655884%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb655884%28v=vs.90%29.aspx) ) 或 xml 文件 ( [http://www.codeproject .com/Articles/7718/Using-XML-in-C-in-the-simplest-way](http://www.codeproject.com/Articles/7718/Using-XML-in-C-in-the-simplest-way)）。

要保存列表的内容，您可以创建一个包含这两种方法的新类，而不是列表

```
public List<string> getListContent()
      {
          //read xml-file
      }
      public void Add(string t)
      {
          //write to xml file
      } 
```

这将在单线程应用程序中正常工作。

# java - JSF 验证器中的作用域

> ID：10465560
> 
> 赞同：5
> 
> 时间：2012-05-05T20:09:49.577
> 
> 标签：java, jsf, jsf-2

我想实现输入字段验证。这是托管 bean 的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Demo Insert Form"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_databasez.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">
                    <h:form>
                        <div id="settingsdiv" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                            <h:panelGrid columns="2">
                                <h:panelGroup>Session ID</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="sessionid" value="#{DatabaseController.formMap['sessionid']}" >
                                        <f:validateLength minimum="0" maximum="15"/>
                                        <f:validator binding="#{ValidatorController.validateMessage}" >
                                            <f:attribute name="type" value="sessionid" />
                                        </f:validator>
                                        <f:ajax event="blur" render="sessionidvalidate" />                                          
                                    </h:inputText>
                                    <h:message id="sessionidMessage" for="sessionid" />
                                </h:panelGroup>

                                <h:panelGroup>User ID</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="userid" value="#{DatabaseController.formMap['userid']}" >
                                        <f:validateLength minimum="0" maximum="15"/>
                                    </h:inputText>
                                </h:panelGroup>

                                <h:panelGroup>Login Time</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="logintime" value="#{DatabaseController.formMap['logintime']}" >
                                        <f:validateLength minimum="0" maximum="35"/>
                                    </h:inputText>
                                </h:panelGroup>

                                <h:panelGroup>Last Refresh Time</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="lastrefreshtime" value="#{DatabaseController.formMap['lastrefreshtime']}" >
                                        <f:validateLength minimum="0" maximum="35"/>
                                    </h:inputText>
                                </h:panelGroup>

                                <h:panelGroup>User IP</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="userip" value="#{DatabaseController.formMap['userip']}" >
                                        <f:validateLength minimum="0" maximum="15"/>
                                    </h:inputText>
                                </h:panelGroup>

                            </h:panelGrid>          

                        </div>   

                        <div id="settingstwodiv" style="width:150px; height:60px; position:absolute;  background-color:transparent; top:380px; left:800px">

                            <h:commandButton value="Create User" action="#{DatabaseController.saveData}"/>

                        </div> 
                    </h:form> 

                </div>   

            </div>  
        </div>

    </h:body>
</html> 
```

这是我添加到 faces-config.xml 中的代码

```
<validator>
    <validator-id>ValidatorController</validator-id>
    <validator-class>com.DX_57.HM_57.FormValidator</validator-class>
</validator> 
```

这是我尝试测试的验证器的代码：

```
import javax.enterprise.context.SessionScoped;
import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.validator.Validator;
import javax.faces.validator.ValidatorException;
import javax.inject.Named;

@Named("ValidatorController")
@SessionScoped
public class FormValidator implements Validator {

    public FormValidator() {
    }

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public void validateMessage(FacesContext context, UIComponent component, Object value) throws ValidatorException {

        if (value.equals("test")) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "Session ID is already in use, please choose another.", null));
        }
    }
} 
```

问题是我在尝试运行示例时遇到的这个错误：

```
[#|2012-05-05T22:39:00.096+0300|INFO|glassfish3.1.2|org.glassfish.osgiweb|_ThreadID=58;_ThreadName=Thread-2;|Removed bundle 710 against context path /test |#]

[#|2012-05-05T22:39:00.097+0300|WARNING|glassfish3.1.2|org.glassfish.osgijavaeebase|_ThreadID=58;_ThreadName=Thread-2;|Failed to deploy bundle com.DX_57.History-Module-57 [710]
org.glassfish.osgijavaeebase.DeploymentException: Deployment of com.DX_57.History-Module-57 [710] failed because of following reason: Failed while deploying bundle com.DX_57.History-Module-57 [710] : java.lang.RuntimeException: Failed to deploy bundle [ com.DX_57.History-Module-57 [710] ], root cause: Exception while loading the app
    at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:125)
    at org.glassfish.osgijavaeebase.OSGiContainer.deploy(OSGiContainer.java:154)
    at org.glassfish.osgijavaeebase.JavaEEExtender.deploy(JavaEEExtender.java:107)
    at org.glassfish.osgijavaeebase.JavaEEExtender.access$200(JavaEEExtender.java:61)
    at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:151)
    at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:148)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Failed to deploy bundle [ com.DX_57.History-Module-57 [710] ], root cause: Exception while loading the app
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:196)
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.execute(OSGiDeploymentRequest.java:118)
    at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:121)
    ... 10 more
Caused by: org.glassfish.deployment.common.DeploymentException: WELD-000072 Managed bean declaring a passivating scope must be passivation capable.  Bean:  Managed Bean [class com.DX_57.HM_57.FormValidator] with qualifiers [@Any @Default @Named]
    at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:181)
    at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:128)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:277)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:183)
    ... 12 more
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-000072 Managed bean declaring a passivating scope must be passivation capable.  Bean:  Managed Bean [class com.DX_57.HM_57.FormValidator] with qualifiers [@Any @Default @Named]
    at org.jboss.weld.bean.ManagedBean.checkType(ManagedBean.java:405)
    at org.jboss.weld.bean.AbstractBean.initializeAfterBeanDiscovery(AbstractBean.java:149)
    at org.jboss.weld.bean.AbstractClassBean.initializeAfterBeanDiscovery(AbstractClassBean.java:308)
    at org.jboss.weld.bean.ManagedBean.initializeAfterBeanDiscovery(ManagedBean.java:361)
    at org.jboss.weld.bootstrap.BeanDeployment.doAfterBeanDiscovery(BeanDeployment.java:216)
    at org.jboss.weld.bootstrap.BeanDeployment.afterBeanDiscovery(BeanDeployment.java:208)
    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:352)
    at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:179)
    ... 17 more
|#] 
```

看来 Validator 类不在正确的范围内。我必须使用什么范围？

最良好的祝愿

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T20:17:38.000

从焊接文档：

> 具有@SessionScoped 或@ConversationScoped 范围的托管bean 必须是可序列化的，因为容器会不时钝化HTTP 会话。

可能还有其他原因，但您的 CDI 会话范围 bean 至少应该实现`Serializable`接口：

```
@Named("ValidatorController")
@SessionScoped
public class FormValidator implements Validator, Serializable {
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:41:03.587

测试这段代码：

```
<h:panelGroup>Session ID</h:panelGroup>
<h:panelGroup>
    <h:inputText id="sessionid" value="#{DatabaseController.formMap['sessionid']}" 
                    validator="#{ValidatorController.validatebean}">                                        
        <f:ajax event="blur" render="sessionidMessage" />                                          
    </h:inputText>
    <h:message id="sessionidMessage" for="sessionid" />
</h:panelGroup> 
```

这是豆子：

```
@Named("ValidatorController")
@ViewScoped
public class FormValidator implements Validator {

    public FormValidator() {
    }

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (value.equals("test")) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "  Session ID is already in use, please choose another.", null));
        }
    }

    public void validatebean(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (value.equals("test")) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "  Session ID is already in use, please choose another.", null));
        }
    }

} 
```

# php - 301 重定向和 wordpress 漂亮的永久链接

> ID：10465563
> 
> 赞同：0
> 
> 时间：2012-05-05T20:10:21.497
> 
> 标签：php, wordpress, .htaccess, mod-rewrite, redirect

我正在从一个旧的基于 php 的站点转移到一个基于 wordpress 的新站点。在此过程中，我们删除了很多不必要的页面。

但是，有些页面显示在 google 上，我想通过使用 301 重定向到现在在新站点上包含相同信息的页面来避免 403 或 404 错误。

我当前的 .htaccess 显示：

```
# Switch rewrite engine off in case this was installed under HostPay.
RewriteEngine Off

SetEnv DEFAULT_PHP_VERSION 53

DirectoryIndex index.cgi index.php

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我想知道做 301 重定向的最佳方法是什么？将它们放在代码之前或之后只会给出 404 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:43:59.253

这应该有效；

重定向 301 /old/old.htm [http://www.website.com/new.htm](http://www.website.com/new.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:11:37.660

在 index.php 重写规则之前放置一个类似的规则应该可以工作：

```
RewriteRule ^(.*)$ http://newwebsite.com/$1 [R=301,L] 
```

您可以在它之前放置一堆 RewriteCond，以仅捕获那些有问题的页面。

对于您在评论中发布的特定案例，此规则适用：

```
RewriteRule ^why-choose-us.* about-us [R=301,L] 
```

# php - php 在登录时遇到 reCAPTCHA 问题

> ID：10465568
> 
> 赞同：0
> 
> 时间：2012-05-05T20:10:57.427
> 
> 标签：php, forms, login, admin, recaptcha

我在登录系统中插入 reCAPTCHA 时遇到问题，似乎用户可以输入正确的用户名和密码，甚至无需在 reCAPTCHA 中插入任何内容。一个示例登录用户是 - 用户名 = steven 密码 = steven

下面是网站的链接和登录页面的代码，然后是员工区域页面代码。

[http://newmedia.leeds.ac.uk/ug10/cs10dw/workspace1/login.php](http://newmedia.leeds.ac.uk/ug10/cs10dw/workspace1/login.php)

任何帮助将不胜感激。

```
<?php require_once("includes/connection.php"); ?>
<?php require_once("includes/functions.php"); ?>
<?php

    include_once("includes/form_functions.php");

    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();

        // perform validations on the form data
        $required_fields = array('username', 'password');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

        $fields_with_lengths = array('username' => 30, 'password' => 30);
        $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

        $username = trim(mysql_prep($_POST['username']));
        $password = trim(mysql_prep($_POST['password']));
        $hashed_password = sha1($password);

        if ($_POST) { 
        require_once($_SERVER['DOCUMENT_ROOT'] . '/recaptcha/recaptchalib.php');
        $privatekey ="6LcHbc0SAAAAAOs2d7VnzV7RtedMkLs306ekQPUP";
        $resp = recaptcha_check_answer ($privatekey,
                            $_SERVER['REMOTE_ADDR'],
                            $_POST['recaptcha_challenge_field'],
                            $_POST['recaptcha_response_field']);
        $str_result = "";
        if (!$resp->is_valid) {
             // What happens when the CAPTCHA was entered incorrectly
            $message = "The reCAPTCHA wasn't entered correctly. Go back and try it again. (reCAPTCHA   said: " . $resp->error . ")";
            // Add a redirect to an error page or just put an exit(); here

        } 

    }

        if ( empty($errors) ) {
            // Check database to see if username and the hashed password exist there.
            $query = "SELECT * ";
            $query .= "FROM users ";
            $query .= "WHERE username = '{$username}' ";
            $query .= "AND hashed_password = '{$hashed_password}' ";

            $result_set = mysql_query($query);
            confirm_query($result_set);
            if (mysql_num_rows($result_set) == 1) {
                // username/password authenticated
                // and only 1 match
                $found_user = mysql_fetch_array($result_set);
                redirect_to("staff.php");
            } else {
                // username/password combo was not found in the database
                $message = "<h1> Username or password is incorrect. </h1><br />
            ";
            }
        }
    }
?>
<?php include("includes/header.php"); ?>
<table id="structure">
    <tr>
        <td id="navigation">
            <a href="index.php">Return to public site</a>
        </td>
        <td id="page">
            <h2>Staff Login</h2>
            <?php if (!empty($message)) {echo "<p class=\"message\">" . $message . "</p>";} ?>
            <?php if (!empty($errors)) { display_errors($errors); } ?>
            <form action="login.php" method="post">
            <table>
                <tr>
                    <td>Username:</td>
                    <td><input type="text" name="username" maxlength="30" value="<?php echo htmlentities($username); ?>" /></td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td><input type="password" name="password" maxlength="30" value="<?php echo htmlentities($password); ?>" /></td>
                </tr>
                <tr>

  <?php
    require_once($_SERVER['DOCUMENT_ROOT'] . '/recaptcha/recaptchalib.php');
    $publickey = "6LcHbc0SAAAAABQAnCHSHGhSuSXkZ2d1MoBa4xw2";
    echo recaptcha_get_html($publickey);
?>

                    <td colspan="2"><input type="submit" name="submit" value="Login" /></td>
                </tr>
            </table>

            </form>
        </td>
    </tr>
</table>
<?php include("includes/footer.php"); ?> 
```

*****员工页面*******

 **```
<?php require_once("includes/functions.php"); ?>

<?php include("includes/header.php"); ?>
<table id="structure">
    <tr>
        <td id="navigation">&nbsp;

        </td>
        <td id="page">
            <h2>Staff Menu</h2>

            <ul>
                <li><a href="content.php">Manage Website Content</a></li>
                <li><a href="new_user.php">Add Staff User</a></li>
                <li><a href="logout.php">Logout</a></li>
            </ul>
        </td>
    </tr>
</table>
<?php include("includes/footer.php"); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:21:00.570

The captcha check should be performed before redirecting to the staff page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:28:01.100

尝试这个：

```
 // if ($_POST) {    // Don't need this

        require_once($_SERVER['DOCUMENT_ROOT'] . '/recaptcha/recaptchalib.php');
        $privatekey ="6LcHbc0SAAAAAOs2d7VnzV7RtedMkLs306ekQPUP";
        $resp = recaptcha_check_answer ($privatekey,
                            $_SERVER['REMOTE_ADDR'],
                            $_POST['recaptcha_challenge_field'],
                            $_POST['recaptcha_response_field']);
        $str_result = "";
        if (!$resp->is_valid) {
             // What happens when the CAPTCHA was entered incorrectly
            $message = "The reCAPTCHA wasn't entered correctly. Go back and try it again. (reCAPTCHA   said: " . $resp->error . ")";
            echo $message;
            exit();

        } 

    //} 
```**

# html - 带 Flash 对象的 Div 背景

> ID：10465571
> 
> 赞同：1
> 
> 时间：2012-05-05T20:11:05.203
> 
> 标签：html, css, background, flash

[http://www.unshoolme.org/gamesi/games/kingdom-rush.html](http://www.unshoolme.org/gamesi/games/kingdom-rush.html)

嘿伙计们，所以我发现我的内容 div 的背景（带有 flash 文件的中间部分）并没有完全涵盖我想要的所有内容，所以它使 flash 文件突出并且......你知道..尴尬的。我在我的css中尝试了很多东西，就在这里......

[http://www.unschoolme.org/gamesi/games/css/style.css](http://www.unschoolme.org/gamesi/games/css/style.css)

同时，我也有页眉和页脚。

unschoolme.org/games/header.shtml

和

unschoolme.org/games/footer.shtml

非常感谢任何帮助和建议，我不介意是否必须更改所有内容的安排。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:19:11.407

改变

```
#contents ul.images {
display: inline-block;
list-style-type: none;
margin: 0 auto 15px;
width: 632px;
} 
```

到

```
#contents ul.images {
display: inline-block;
list-style-type: none;
margin: 0 auto 15px -42px;
width: 632px;
} 
```

这将解决您的问题

# xcode - xcode 多维数组

> ID：10465574
> 
> 赞同：0
> 
> 时间：2012-05-05T20:11:29.267
> 
> 标签：xcode

我需要一些关于我正在处理的数组的帮助。

我从 JSON 查询中取回一些数据并将其写入一个数组，然后在第二个循环中我将该数组写入另一个数组，但我不知道如何将数据读回？这是代码： -

```
for (NSDictionary *weather in weatherarray)
{
    int j = 1;
    NSArray *hourlyArray = [weather objectForKey:@"hourly"];
    for (NSDictionary *hourD in hourlyArray)
    {

        [multi addObject:Date];
        [multi addObject:[hourD objectForKey:@"time"]];
        [multi addObject:[hourD objectForKey:@"weatherCode"]];            
        [multi addObject:[hourD objectForKey:@"tempC"]]; 
        [multi addObject:[hourD objectForKey:@"FeelsLikeC"]];            
        [multi addObject:[hourD objectForKey:@"chanceofrain"]];            
        [multi addObject:[hourD objectForKey:@"cloudcover"]]; 
        [multi addObject:[hourD objectForKey:@"WindGustMiles"]]; 
        [multi addObject:[hourD objectForKey:@"humidity"]];             
        [multi addObject:[hourD objectForKey:@"pressure"]]; 
        j = j + 1;
    }     

    [[multi1 objectAtIndex:j] addObject:multi]; 
    i = i + 1;
} 
NSLog(@"%@", [[[multi1 objectAtIndex:1] objectAtIndex:0] objectAtIndex:1]); 
```

}

如您所见，我试图在 NSLog 的末尾读取数据，但我正在为此苦苦挣扎。有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:54:48.467

您需要`multi`在`for`循环内定义和分配。所以，把线

```
NSMutableArray *multi = nil; 
```

在线上方`[multi addObject:Date]`并移动您的线

```
[[multi1 objectAtIndex:j] addObject:multi]; 
```

线上`j = j + 1;`。你不需要`i = i + 1;`这里，除非你正在用它做一些事情，这超出了这个代码片段的范围。

除非我错过了什么，否则它应该是这样工作的。

# xhtml - 扩展 xhtml 模式以支持自定义标签和属性

> ID：10465580
> 
> 赞同：2
> 
> 时间：2012-05-05T20:11:40.507
> 
> 标签：xhtml, xsd, dtd, expando

我想为扩展 xhtml 的自定义标签和属性提供 xml 架构，这样我就可以在 IDE（我正在使用 WebStorm）中为标准 html 标签和属性以及我的自定义提供自动建议。不应使用命名空间，因此在下面的示例中，元素的名称是`my-custom-element`，而不是`my:custom-element`。

我已经通过 DTD 实现了这一点：

```
<!ENTITY % XHTML1-strict PUBLIC "-//W3C//XHTML 1.0 Strict//EN"        
"http://www.w3.org/TR/html4/strict.dtd" >
%XHTML1-strict;

<!ELEMENT my-custom-element ANY> 
```

是否可以使用 xsd 做同样的事情？

**更新：** 上面的例子不正确，因为新的自定义元素仅在 html 标记之外自动完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:12:42.033

使用来自 Komodo 的[HTML5 DTD](https://github.com/Komodo/KomodoEdit/tree/master/contrib/catalogs/html5)，它是 XHTML DTD 的扩展，作为添加新元素的指南。有几种工具可以转换 DTD2XSD 和 XSD2DTD，例如：

*   [dtd2xsd.xsl](http://people.apache.org/~andyc/neko/doc/dtd/conversions.html)
*   [dtd2xsd.pl](http://www.w3.org/2000/04/schema_hack/)
*   [xsd2dtd.xsl](http://crism.maden.org/consulting/pub/xsl/xsd2dtd.xsl)
*   [自定义 DTD](http://www.alistapart.com/articles/customdtd/)

# php - PHP：在 href 路径中摆脱 localhost 和域名

> ID：10465581
> 
> 赞同：1
> 
> 时间：2012-05-05T20:11:42.800
> 
> 标签：php, web-hosting

我正在家里托管一个网站。我的系统有两层：一个 Web 服务器（运行 Ubuntu 11.04），它通过端口 80 转发，并且在 var/www 上只有 index.php 和一个应用程序服务器（运行 Ubuntu 11.10），它拥有其他所有内容，并且设置为与 web 层服务器对话。

index.php 具有以下代码行。

```
 <li><a href="192.168.1.4/about.php">About</a></li> 
```

这是一个应该调用 about.php 的菜单项，它位于本地 IP 地址为 192.168.1.4 的应用程序服务器上的 var/www 中。但是，当我单击与此菜单项关联的按钮时，它会尝试访问[http://localhost/192.168.1.4/about.php](http://localhost/192.168.1.4/about.php)并给出错误消息

```
 The requested URL /192.168.1.4/about.php was not found on this server. 
```

如果我转到地址框并手动删除[http://localhost/](http://localhost/)部分，那么地址框只会显示 192.168.1.4/about.php 然后应用服务器上的 about.php 页面会显示。随后，当我单击与 index.php 关联的菜单按钮时，一切正常。似乎它首先将[http://localhost/](http://localhost/)添加到指定的地址，直到我手动删除它，然后默认将其保留。

当我尝试从另一台计算机访问我的站点时，真正的问题出现了。我输入我的域名，说whatever.com，然后index.php 页面出现。但是，当我单击菜单按钮时，它会尝试访问[http://whatever.com/192.168.8.1.4/about.php](http://whatever.com/192.168.8.1.4/about.php)并给出错误消息。当我转到 URL 框并手动删除[http://whatever.com/](http://whatever.com/)时，一切正常。但是我不希望用户必须这样做。另外，我是在家庭网络上的另一台计算机上执行此操作的，所以我不确定远程计算机会发生什么。

让 index.php 文件简单地使用 192.168.1.4/about.php 而不是 localhost/192.168.1.4/about.php、whatever.com/192.168.1.4/about.php 等的最佳方法是什么？

提前谢谢了，

彼得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:13:20.933

您忘记在 URL 中添加方案。采用：

```
<li><a href="http://192.168.1.4/about.php">About</a></li> 
```

或者：

```
<li><a href="//192.168.1.4/about.php">About</a></li> 
```

# android - 停止应用程序，包括所有活动和服务 - android生命周期

> ID：10465585
> 
> 赞同：2
> 
> 时间：2012-05-05T20:11:55.973
> 
> 标签：android, lifecycle

我想简单地停止该应用程序及其所有活动和服务。目前，从我的主要活动（已经开始其他活动）中，我调用了finish()，并且应用程序似乎停止了，因为它进入了我设备的主屏幕。但是，当我检查设备上正在运行的应用程序时，仍然会列出该应用程序。它说“一个过程，一个服务”。有没有办法杀死一切？或者，如果我必须单独执行此操作，我将如何找到正在运行的内容，以及如何停止它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:20:24.143

您是否有某些特定原因要确保该进程被终止？

Android 智能地管理流程。它保留您的流程，如果用户再次启动您的应用程序，它可以使用现有流程，而不是启动新流程。如果您的设备开始内存不足，Android 将开始杀死这些不活动的进程以释放资源。

简而言之， Android 保留您的流程是*一件好事*。你不应该让它不必要地被杀死。

尽管听起来您可能不会停止应用程序的服务。如果您使用 bindService 从您的 Activity 启动服务，则该服务将在 Activity 停止时自动停止（假设没有其他任何东西绑定到该服务）。或者，如果您使用 startService 启动服务，则需要调用 stopService 来停止它。

# c - 我的 C 程序有什么问题

> ID：10465586
> 
> 赞同：1
> 
> 时间：2012-05-05T20:11:57.940
> 
> 标签：c, multithreading, memory, pthreads

我正在尝试使用线程实现内存和不同的分页算法。现在当我运行我的代码时，只有前两个线程运行，而不是第三个。这是它打印的内容：

```
Thread one: Task 1, Sequence 1
Thread two: Task 1, Sequence 2 
```

如果有人能告诉我为什么我的第三个线程没有运行，那将非常有帮助。

```
#include<stdio.h>
#include<stdlib.h>
#include<pthread.h>

pthread_mutex_t MemoryLock;
int k = 10;
int m = 10;
int n = 1000;
int seq = 0;
int start = 0; //for thread 2
int end = 10; //end is equal to value of k for thread 2

int disk[1000];

int MemoryLookupTable[10]; //Stores which variable is present in memory
int PhysicalMemory[10]; //Stores the value of the variables
int MetaTable[10]; //Meta level information

void least_recent(int i){
    int t, position, smallest, disk_num;

    t = 1;
    smallest = MetaTable[0];
    position = 0;

    while(t < m){
        if(smallest > MetaTable[t]){
            smallest = MetaTable[t];
            position = t;
        }
        t++;
    }

    disk_num = MemoryLookupTable[position];
    disk[disk_num] = PhysicalMemory[position];

    PhysicalMemory[position] = disk[i];
    MemoryLookupTable[position] = i;
    MetaTable[position] = seq;
}

void most_recent(int i){
    int t, position, largest, disk_num;

    t = 1;
    largest = MetaTable[0];
    position = 0;

    while(t < m){
        if(largest < MetaTable[t]){
            largest = MetaTable[t];
            position = t;
        }
        t++;
    }

    disk_num = MemoryLookupTable[position];
    disk[disk_num] = PhysicalMemory[position];

    PhysicalMemory[position] = disk[i];
    MemoryLookupTable[position] = i;
    MetaTable[position] = seq;
}

void random_order(int i){
    int r, disk_num;
    r = m * (rand() / (RAND_MAX + 1.0));

    disk_num = MemoryLookupTable[r];
    disk[disk_num] = PhysicalMemory[r];

    PhysicalMemory[r] = disk[i];
    MemoryLookupTable[r] = i;
}

int fetch(int i){
    int x = 0;
    int x_i;

    x_i = disk[i];
    while(x < m){
        if(x_i == PhysicalMemory[x])
            return x_i;
        x++;
    }

    return -1;
}

void PageIn(int i){
    int x = 0;
    int present;

    present = fetch(i);
    if(present == -1)
        return; //Do not need to page in, since variable is already there.

    least_recent(i);
    //most_recent(i); I am testing each algorithm at a time, so these are commented out.
    //random_order(i);
}

void *t1(){
    int sum, task, r, i, fetched;
    sum, task = 0;
    r = rand() % (n - k) + k;

    for(i = 0; i < k - 1; i++){
        pthread_mutex_lock(&MemoryLock);
        seq++;
        fetched = fetch(i);
        if(fetched == -1){
            PageIn(i);
            pthread_mutex_unlock(&MemoryLock);
            if(i = (k - 2))
           break;
        }
        sum = sum + disk[i];
        pthread_mutex_unlock(&MemoryLock);
   }

   sum = sum + disk[r];
   task++;
   printf("\nThread one: Task %d, Sequence %d", task, seq);

   return NULL;
}

void *t2(){
    int sum, task, i, fetched;
    sum, task = 0;

    for(i = start; i < end; i++){
        pthread_mutex_lock(&MemoryLock);
        seq++;
        fetched = fetch(i);
        if(fetched == -1){
            PageIn(i);
            pthread_mutex_unlock(&MemoryLock);
            if(i = (end - 1)){
          sum = sum + disk[i];
          break;
            }
        }
        sum = sum + disk[i];
        pthread_mutex_unlock(&MemoryLock);
    }

    sum = sum + disk[i];
    task++;
    start++;
    if(end == n){
        start = 0;
        end = k;
    }
    else
        end++;
    printf("\nThread two: Task %d, Sequence %d", task, seq);

    return NULL;
}

void *t3(){
    int sum, task, r, i, fetched;

    for(i = 0; i < k; i++){
        pthread_mutex_lock(&MemoryLock);
        seq++;
        r =  n * (rand() / (RAND_MAX + 1.0));
        fetched = fetch(r);
        if(fetched == -1){
            PageIn(r);
            pthread_mutex_unlock(&MemoryLock);
            if(i = (k - 1)){
          sum = sum + disk[r];
          break;
            }
        }
        sum = sum + disk[r];
        pthread_mutex_unlock(&MemoryLock);
   }

   sum = sum + disk[r];
   task++;
   printf("\nThread three: Task %d, Sequence %d", task, seq);

   return NULL;
}

main(){
    int pt1, pt2, pt3, i, j, randNum;
    pthread_t thread1, thread2, thread3;

    for(i = 0; i < n; i++){
        randNum = 200 * (rand() / (RAND_MAX + 1.0));
        disk[i] = randNum;
    }

    for(j = 0; j < m; j++) //initializing array to empty
        MemoryLookupTable[j] = -1;

    if((pt1 = pthread_create(&thread1, NULL, t1, NULL)))
         printf("Thread creation failed: %d\n", pt1);

    if((pt2 = pthread_create(&thread2, NULL, t2, NULL)))
         printf("Thread creation failed: %d\n", pt2);

    if((pt3 = pthread_create(&thread3, NULL, t3, NULL)))
         printf("Thread creation failed: %d\n", pt3);

    pthread_join(thread1, NULL);
    pthread_join(thread2, NULL); 
    pthread_join(thread3, NULL);  

    pthread_exit(0); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:20:42.070

I run your program, the third thread executes successfully. Try to add `"\n"` to the end of `t3()`'s output:

```
printf("\nThread three: Task %d, Sequence %d\n", task, seq); 
```

If there is no line break in the end of line, your terminal may not display it.

# php - Android 将字符串从 PHP 拆分到 AlertDialog 的数组中

> ID：10465601
> 
> 赞同：1
> 
> 时间：2012-05-05T20:13:36.877
> 
> 标签：php, android, string, android-alertdialog

我正在做的是构建一个Android应用程序，它使用我可以做的php脚本接收字符串，但我不能做的是使用“\ n”将该字符串拆分，然后使用它来创建一个AlertDialog .

我正在收到这个字符串；

```
 String list = "test 1\ntest 2\ntest 3"; 
```

然后，我尝试使用下面的方法将其通过管道传输到数组中。我知道我在几英里之外，但似乎找不到任何关于它的东西，有人能指出我正确的方向吗？

```
 String[] tokens = test.split("\n"); 

    final CharSequence[] items = {tokens};

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Pick a color");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
        }
    });
    AlertDialog alert = builder.create();

    alert.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:28:45.760

为什么要为 CharSequence 创建一个新数组？您可以将令牌数组设置为项目：

```
final String[] tokens = test.split("\n"); 
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Pick a color");
    builder.setItems(tokens, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            Toast.makeText(getApplicationContext(), tokens[item], Toast.LENGTH_SHORT).show();
        }
    });
    AlertDialog alert = builder.create(); 
```

# sqlite - 黑莓网格布局自定义

> ID：10465604
> 
> 赞同：1
> 
> 时间：2012-05-05T20:14:06.580
> 
> 标签：sqlite, blackberry, gridview, user-interface, blackberry-jde

如何在黑莓的网格管理器布局中为网格元素添加边距。我希望它看起来与在 sqlite 表上的外观完全相同，行和列具有整齐的边距。我还想为网格的每一行添加颜色。网格中的元素是从 sqlite 表中逐个字符串获取的。

我有以下代码：

```
GridFieldManager grid = new GridFieldManager(10,5,0); 

grid.add(new LabelField("Date"));
grid.add(new LabelField("Bill"));
grid.add(new LabelField("Receipt"));
grid.add(new LabelField("Narration"));
grid.add(new LabelField("ID"));

grid.setColumnPadding(15);
grid.setRowPadding(20);

for (int i = 1; i < grid.getRowCount(); i++) {
  System.out.println("Inside for first loops");
  for (int j = 0; j < grid.getColumnCount() ; j++) {
    System.out.println("Inside for second loops");

    while(c.next()) {                                          
      System.out.println("Inside while"); 
      Row r;
      r = c.getRow();

      for (int k = 4; k >=0; k--) {           
        System.out.println("Inside for loops");

        if(k==0 || k==3) {
          System.out.println("Retrieving date or narration");
          grid.insert(new LabelField(r.getString(k)) {
            public void paint(Graphics graphics) {
              graphics.setColor(Color.BROWN);
              super.paint(graphics);
            }
          },i,j);
        } else {
          System.out.println("Retrieving other values"); 
          String p = "" + r.getInteger(k);
          grid.insert(new LabelField(p) {
            public void paint(Graphics graphics) {
              graphics.setColor(Color.BROWN);
              super.paint(graphics);
            }
          },i,j);
        }   
        grid.setBackground(
          BackgroundFactory.createLinearGradientBackground(
            Color.GOLD,Color.CHOCOLATE,Color.GOLDENROD,Color.CORAL));
      } 
      System.out.println("Exiting while");                        
    }

    System.out.println("Exiting sec for");
    break;
  }
  System.out.println("Exiting first for");
  break;
} 
```

使用上面的代码，我将线性渐变背景颜色应用于整个屏幕。除了标题之外的网格元素也是棕色的。

我现在想要实现的是每行单独的颜色。任何知道此解决方案的人请分享。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:25:20.243

您可以通过两种方式实现颜色部分：

1.  覆盖网格管理器`paint`方法（困难）
2.  为每个单元格添加一个`VerticalFieldManager`只包含一个标签字段的自定义，而不是直接添加标签字段。这是最简单的方法恕我直言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:42:33.423

要为获取的行添加颜色，您可以使用以下代码：

```
 for (int k = 4; k >=0; k--)
                                        {

                                            System.out.println("Inside for loops");
                                            //Check for whether column retrieved is date or naraation
                                            if(k==0 || k==3)
                                            {
                                                System.out.println("Retrieving date or narration");
                                                grid.insert(new LabelField(r.getString(k))
                                                {
                                                    public void paint(Graphics graphics)
                                                    {
                                                    graphics.setColor(Color.GOLD);
                                                    super.paint(graphics);
                                                    }
                                                 },i,j);

                                            }  
                                            else
                                            {   
                                                //Check for whether column retrieved is bills,rec or id
                                                System.out.println("Retrieving other values"); 
                                                String p = "" + r.getObject(k);

                                                //if(r.getString(k) != null)
                                                //{ 
                                                grid.insert(new LabelField(p)
                                                {
                                                    public void paint(Graphics graphics)
                                                    {
                                                    graphics.setColor(Color.GOLD);
                                                    super.paint(graphics);
                                                    }
                                                 },i,j); 
                                               //  } 

                                            } 
```

以 if else 方式使用它可能有助于您的解决方案。

# php - PHP：如何测试数据库链接是否仍然有效？

> ID：10465605
> 
> 赞同：1
> 
> 时间：2012-05-05T20:14:09.690
> 
> 标签：php, database-connection

[当使用mysql_connect()](http://php.net/manual/en/function.mysql-connect.php)检索数据库 $link 时，如何检查该链接在一段时间后是否仍然有效？（我不是问退货是否有效，我是说稍后）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:15:40.153

您可以为此使用[`mysql_ping()`](http://php.net/mysql_ping)或。[`mysqli_ping()`](http://php.net/mysqli_ping)但是，在常规的 Web 应用程序中，您应该只执行查询并在查询失败时中止（或重试一次）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:15:57.670

没有理由去测试。

只需执行查询，您将看到...

# c++ - 多线程编写器：使用 cpp 的并发问题

> ID：10465611
> 
> 赞同：0
> 
> 时间：2012-05-05T20:15:24.147
> 
> 标签：c++, concurrency

我正在尝试构建一个可以写入单个文件的库，并且能够在多线程环境中工作。要求是：

1.  写入文件时不会出现并发问题。
2.  处理线程的顺序并不重要。
3.  库应该是非阻塞的，即写入和刷新函数将在给定缓冲区被写入之前返回。

这是我到目前为止所拥有的：

```
int write2device(char *buffer, int length) {
    Task * task = new Task(id++,buffer,length);
    pthread_t * thread = new pthread_t;
    Argument * arg = new Argument; //A sturct with pthread_t and task fields
    arg->task = task;
    arg->thread = thread;
    pthread_create(thread,NULL,deamonWrite,arg);
    return 0;
}

void wait(Argument * arg) {
    //manager is a singleton class that handles the threads database and related
    //issues
    manager->pushDeamon(arg->thread);
    manager->lock(arg->task->getId()); //mutex - only one thread can write
}

void * deamonWrite(void * arg) {
    Argument * temp = (Argument *) arg;
    wait(temp);
    //critical section
    //will add signal() later
    return NULL;
} 
```

这个想法是，对于每个调用 write2device 的线程，我都会打开一个运行 deamonWrite() 的线程。这个函数的结构是wait() ->critical section -> signal()。在等待中，如果其他人正在写作，我将（尚未完成）暂停线程，以便用户不会等到它完成写作。

我有两个问题：

1.  How do I implement the mutex (lock function)? I understand that This must be an atomic function, sense several threads trying to acquire a lock might result in chaos.
2.  Is my general structure in the right way?

I am new to concurrency and would appreciate any thoughts on this matter - thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:05:27.307

Push the `Task` structures to a queue/vector and process them sequentially from a single thread instead of multiple threads for each task individually. The only place where you'll need a mutex is when pushing to and pulling from the queue. As Ben correctly noted in the comments, you should leave the implementation of thread synchronization primitives (mutex, critical section) to the OS and/or whatever system API you're allowed to use.

# objective-c - 如果我不使用 Core Data，如何使用 iCloud 同步？

> ID：10465612
> 
> 赞同：2
> 
> 时间：2012-05-05T20:15:29.370
> 
> 标签：objective-c, ios, sync, icloud

我已经看到了一些展示如何将 iCloud 与 Core Data 集成的示例，但我的应用程序使用了一个手写的 SQLite 持久层。

我只是运气不好，还是有直接的方法可以通过 iCloud 与非核心数据数据库进行同步和冲突解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:24:35.377

"Straightforward" might not be the first word that comes to mind, but you can definitely use iCloud storage in non-Core Data apps. You'll need to manage your storage engine, conflict resolutions, and data presentation yourself, however; you don't get the "easy" merging and resolution that Core Data gets you.

Read up on the [iCloud Storage](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html) guide for detailed info. There's a good checklist a little way down that guides you through setting up document-based storage in your app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:26:58.897

you should check out this stack overflow answer link it iCloud synk but for OSX application basically the same thing. just use .plist files. hope it helps. It helped me on my mac app [OSX app iClound synk](https://stackoverflow.com/questions/8630361/syncing-a-plist-file-with-icloud)

[iCloud tutorial part 1](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)

[iCloud tutorial part 2](http://www.raywenderlich.com/6031/beginning-icloud-in-ios-5-tutorial-part-2)

# php - 将数据发布到 php 文件

> ID：10465616
> 
> 赞同：0
> 
> 时间：2012-05-05T20:15:51.080
> 
> 标签：php, ajax, jquery

我在 Javascript 中有以下变量。我想知道如何将这些数据传递给 PHP，以便我可以在重定向后显示数据的内容。

```
 postData = {
        'dates_ranges': datesAndRanges,
        'action':'build',
        'output_type': output_type,
        'form_html': formHtml,
        'width': formBuilder.width(),
        'rules':validationRules,
        'theme': theme,
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:25:34.843

使用 JQuery [post 方法](http://api.jquery.com/jQuery.post/)将数据传递到 PHP 文件：

```
$.post("/path/to/script.php", postData, function(result) {
    // work with result
}); 
```

在 PHP 中使用 $_POST 全局变量来获取变量：

```
print $_POST['dates_ranges'];
print $_POST['action'];
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:20:40.413

使用 jquery 它变得容易和干净，如下所示：

```
$.post('script.php', postData, function(response){ 
    // process/display the server response 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T03:51:32.143

您可以使用：

```
$.post("YOUR_URL", postData, function(response) {
    // handle with response
}); 
```

**或者：**

```
$.ajax({
  url: YOUR_URL,
  data: postData,
  type: 'post',
  success: function(response) {
    // handle with response
  }
}); 
```

在你的 PHP 文件中：

```
if(isset($_POST) && !empty($_POST)) {
   $d = $_POST;
   echo $d['date_range']; // and so more
} 
```

# java - Java2D 游戏：如何正确处理键盘？

> ID：10465620
> 
> 赞同：2
> 
> 时间：2012-05-05T20:16:18.677
> 
> 标签：java, keyboard, java-2d

我找到了一个关于如何使用 Java2D 创建游戏的[非常好的教程。](http://zetcode.com/tutorials/javagamestutorial/)在本教程中有一个名为“移动精灵”的部分，它展示了如何在屏幕上移动一个小航天器图像。我正在玩这个工艺，并意识到它有时会在屏幕上“阻塞”。经过一些测试和思考问题后，我发现阻塞问题正在发生，因为当你使用键盘的箭头时，有时你会同时按下左键和右键，这会阻塞移动。

所以我的问题是：我该如何处理这种键盘事件——当你按下左键时，一直按下它，然后按下右键——这样角色的移动就不会被阻止？

我认为这种情况很常见，因为当你演奏时，你会从左向右切换，但有那么一瞬间你同时按下了左键和右键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:27:28.923

您可以通过多种方式执行此操作。一种方法是在程序中使用布尔值。

您可以在按下某个键时将布尔值设置为 true，在释放它们时将其设置为 false。IE：

```
int x,xSpeed;

boolean movingLeft  = false;
boolean movingRight = false;

public void keyPressed(KeyEvent e) {
    int key = e.getKeyCode();
    if(key == KeyEvent.VK_LEFT){
        movingLeft = true;
    }
    if(key == KeyEvent.VK_RIGHT){
        movingRight = true;
    } 
}

public void keyReleased(KeyEvent e) {
    int key = e.getKeyCode();
    if(key == KeyEvent.VK_LEFT){
        movingLeft = false;
    }
    if(key == KeyEvent.VK_RIGHT){
        movingRight = false;
    } 
}

public void moving(){
    if(movingLeft){
        x -= xSpeed;
    }
    if(movingRight){
        x += xSpeed;
    }
} 
```

好的，让我们看看这段代码。因为我们使用的是“else if”，您要么向右移动，要么向左移动。我还没有测试这段代码，所以不太确定这是否可行:)

让我知道你的想法，祝你好运！

# javascript - JavaScript 帮助：调用 setTimeout 时，简单脚本不起作用

> ID：10465621
> 
> 赞同：2
> 
> 时间：2012-05-05T20:16:24.567
> 
> 标签：javascript

我想每 2 秒更改一次 span 元素中的存在，但它只显示 case 0: 'asd' 中的内容。

谁能告诉我为什么这不起作用？

```
var n = 0;

function hideVideoSpan(type){
    switch(type)
    {
        case 0:
        {
            $("#hideVideoSpan").html('asd');
            n = 1;
            break;
        }

        case 1:
        {
            $("#hideVideoSpan").html('lol');
            n = 0;
            break;
        }

        default:break;
    }

    setTimeout(hideVideoSpan(n), 2000);
}

hideVideoSpan(n); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:18:03.137

您正在调用该函数，而不是进行引用

```
setTimeout(hideVideoSpan(n), 2000); 
```

需要关闭

```
setTimeout( function(){ hideVideoSpan(n); }, 2000); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T20:18:00.813

```
setTimeout(hideVideoSpan(n), 2000); 
```

应该

```
setTimeout(function() {
    hideVideoSpan(n);
}, 2000); 
```

# mysql - 将本地 SQL Express 2005 数据库链接到在线 MySQL 数据库？

> ID：10465623
> 
> 赞同：0
> 
> 时间：2012-05-05T20:16:57.993
> 
> 标签：mysql, sql, database, sql-server-express

我有一个软件每天一次将值转储到本地 SQL Express 数据库。我真正需要的是在线 MySQL 数据库中的这些数据。该软件无法重新配置以保存到不同的数据库设置。

有没有办法将两者联系起来，并将本地数据库的任何更新发送到 MySQL 数据库？

谢谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:30:34.873

您是否有权访问该软件所在的服务器？我会在服务器上创建一个脚本和一个计划任务，然后从一个中拉出并推送到另一个。这将允许您编写和配置某种故障安全机制，以防其中一个出现故障。否则，另一种选择是为 SQL 服务器添加触发器以进行插入/更新，并配置 MySQL DSN：

[http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/](http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/)

# networking - computer networking: ARP - point of the ICMP echo packets

> ID：10465630
> 
> 赞同：0
> 
> 时间：2012-05-05T20:17:58.833
> 
> 标签：networking, ip, communication, arp

I'm studying Address Resolution Protocol and in all my books and slides the diagrams showing an ARP take place (i.e. Host1 sends ARP request, Router checks it, redirects it, eventually gets to Host2 and then Host2 sends back an ARP Reply).

What I'm wondering is why the examples include ICMP echo replies and requests, do they serve any purpose within ARP?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:12:28.810

我猜它是启动ARP。机器不会无缘无故地发送 ARP。只有当它需要向 IP 地址发送一些东西（并且还不知道目标 MAC 地址）时，它才会发送一个 ARP。也许 ICMP 回显请求是作者在他们的示例中用来使源机器发送 ARP 的“东西”。

简短回答：ICMP 和 ARP 之间没有特殊关系；这正是你的书的作者决定使用的例子。

# django - 我如何检查用户是否上传任何图片

> ID：10465633
> 
> 赞同：0
> 
> 时间：2012-05-05T20:18:19.020
> 
> 标签：django, django-forms

我正在使用表单集并允许用户上传多个图像。有效。但问题是如果用户没有选择任何图片进行上传，那么下面的代码正在保存`submitter`。如果用户没有上传任何图像，那么我不想保存`submitter`. 这可能吗？

```
if form.is_valid() and formset.is_valid():
    for image_form in formset:
        pics = image_form.save(commit=False)
        pics_image.submitter = request.user
        pics_image.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:21:29.460

`formset.save()`比简单地迭代表单以保存它们做更多的处理。

因此，您需要`form.has_changed()`手动检查。

或者依赖[`formset.save(commit=False)`](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#saving-objects-in-the-formset)哪些返回实例来保存

```
if form.is_valid() and formset.is_valid():
    for img in formset.save(commit=False):
        img.submitter = request.user
        img.save()
    # formset.save_m2m() # if there is any m2m to save 
```

# javascript - Double axes in flot

> ID：10465636
> 
> 赞同：1
> 
> 时间：2012-05-05T20:18:31.290
> 
> 标签：javascript, jquery, flot

I want to create a graph with four quadrants using flot. I need to have labels on both the left and right-hand sides of the graph - with the same ticks. Here is my code:

```
$.plot($("#placeholder"), [ [<%=points%>] ], { series: {lines: { show: false },
  points: { show: true }}, 
  yaxes: [{ ticks:[[0,"Left"]],max: 100, min:-100 },
          { position: "Right",ticks:[[0,"Right"]], max:100, min: -100 }],
  xaxis: { ticks:[[0,"Bottom"]], max: 100, min:-100 } }); 
```

I get the "Left" and "Bottom" labels but nothing on the right-hand side. Thanks in advance for any help you can provide.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:00:39.397

我有同样的问题。为了使辅助 y 轴出现在绘图的右侧，您需要连接一个系列，但这超出了您显示的数据范围：

```
{label:"dummy data",data:[[-1000,-100],[-1000,100]], yaxis:2} //yaxis array is indexed from 1 
```

由于您的范围似乎是固定的，因此匹配刻度非常简单。我的范围和刻度是高度动态的，因此我通过包含与辅助 y 轴挂钩的主要数据的完整重复系列来匹配刻度。我只是将它移到 xaxis 上以完全超出显示范围。

是的，这很浪费，因为它涉及提供额外的数据。但是直到 Flot 支持在没有序列连接的情况下显示 yaxes，这将完成它。

# php - 通过访问 phpMyAdmin 手动更改 moodle 管理员密码或创建另一个管理员帐户？

> ID：10465637
> 
> 赞同：7
> 
> 时间：2012-05-05T20:18:31.617
> 
> 标签：php, mysql, phpmyadmin, admin, moodle

在 Moodle 平台中的管理员登录密码丢失。

我可以访问 phpMyAdmin。

我去了 mdl_user 表，在那里我可以看到或编辑这个表。

我应该如何进行？我可以将管理员加密的密码和密钥更改为已知密码，还是只添加一个管理员用户更简单？

那会怎么样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-04-29T09:50:39.410

*仅在 Moodle 2 上测试*

您可以从命令行重置任何用户密码。在您的 Moodle 根目录中：

> php 管理员/cli/reset_password.php

对于 dev prod 环境，您可能还想禁用密码策略检查（这样您就可以输入一个小而快速的密码）。编辑 reset_password.php 并评论：

> // if (!check_password_policy($password, $errmsg)) {
> // cli_error($errmsg);
> 
> // }

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T09:04:25.713

打开 Moodle 的 config.php 文件，找到定义 $CFG->passwordsaltmain 的行，并复制它的值（它是一长串随机字符）。

在 PHPMyAdmin 中，运行以下查询，并根据需要替换值：

```
UPDATE mdl_user SET password = MD5(CONCAT('<new password>', '<password salt copied from config>')) WHERE id = <id of admin user> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-21T18:56:34.727

生成新 MD5 哈希密码的另一种更快捷、更简单的方法：

1.  转到[http://www.miraclesalad.com/webtools/md5.php](http://www.miraclesalad.com/webtools/md5.php)并创建一个新密码，例如... wintersnow123~（它看起来像这样：“003df036e1a99aad3eaba7c3ca46723d”，不带引号）。
2.  复制从您提交的单词生成的 md5 哈希密码（很容易）并准备粘贴它。
3.  使用 phpMyAdmin，登录到您的 MySQL 数据库。
4.  导航到用户表（对于 Moodle，它称为“mdl_user”）并浏览数据。
5.  找到“admin”用户帐户后，单击编辑，然后粘贴您在第 2 步中复制的新密码（“003df036e1a99aad3eaba7c3ca46723d”）。（进入密码字段。）这将替换您之前的内容。
6.  尝试使用您的管理员用户帐户和新密码（密码：wintersnow123~）登录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T23:01:35.807

您可以检查源代码并查看哈希是如何计算的。然后你可以用你的新密码和他们的散列函数来做一个新的散列。

我检查了[源代码](https://github.com/moodle/moodle/blob/a4d25731df2155e72abd2ea01136d69195e27724/auth/db/auth.php)，根据配置，它使用 md5 或 sha1 散列。因此，请检查您的配置并制作您自己的哈希值。

```
// From the sourcecode:
if ($this->config->passtype === 'md5') {   // Re-format password accordingly
      $extpassword = md5($extpassword);
} else if ($this->config->passtype === 'sha1') {
      $extpassword = sha1($extpassword);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T07:37:24.510

如何使用 MD5 哈希更改密码：

1.  登录到 phpMyAdmin。cPanel 主机将在 cpanel 中有一个名为 PhpMyAdmin 的数据库实用程序。如果 Moodle 安装在非 cPanel 主机上，请联系托管公司以获取有关如何在服务器上编辑数据库的信息。有关登录 PhpMyAdmin 的更多信息，请参阅“如何在我的控制面板 (cpanel) 中的 PHPMyAdmin 中管理 MySQL 数据库？”一文。

2.  在 PhpMyAdmin 中，找到名为 mdl_user 的表并选择它。由于 Moodle 有很多表，mdl_user 表可能在第二页。选择第二页。单击 mdl_user 表。

3.  选择表格后，找到正在编辑的用户的表格行。单击带有铅笔图标的编辑链接。

4.  密码字段中会有一系列字符和数字。这是一个加密密码，因此无法在数据库中查看。用新的登录密码替换加密文本。

5.  接下来，在左侧的下拉菜单中，选择 MD5，然后单击 Go。

这也可以用于电子邮件地址和用户名。电子邮件和用户名不需要 MD5 哈希。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T22:19:31.200

显然 Moodle 1.9.9 版只用 md5 对密码进行一次哈希处理（根本没有盐！！）。

所以唯一要做的就是用你想要的任何密码替换管理员行中的密码，并应用 md5。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T22:47:26.733

目前 Moodle 在密码中引入了一种盐，以在每个安装中唯一地加密密码。

如果您没有删除或更改访客帐户密码，您可以将其值复制到管理员用户密码以便能够登录。

稍后您可以将其更改为您喜欢的任何内容。

用户帐户存储在 mdl_user 表中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-26T12:01:53.207

**对于 Moodle 3.10。**

**步骤 1** 在 Moodle 根目录中创建一个临时 PHP 文件以生成密码。

```
<?php
include('config.php');
echo password_hash('new_password', PASSWORD_BCRYPT); 
```

现在运行这个 php 脚本来获取 Moodle 框架生成的新密码。

**第 2 步：** 打开 PHPMyAdmin 并选择 Moodle 数据库。运行此查询。

```
update mdl_user set password="new_password_hash" where username="admin"; 
```

**第 3 步：** 从 Moodle 根目录中删除临时 php 脚本文件。

# android - 在 Android 中选择 random 或 urandom 作为 SecureRandom 的源

> ID：10465638
> 
> 赞同：5
> 
> 时间：2012-05-05T20:18:47.503
> 
> 标签：android, random

如何选择 random 或 urandom 作为 Android 中 SecureRandom 类的随机源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:22:28.370

别担心。

> 默认情况下，[ `SecureRandom`] 的实例将使用内部熵源生成初始种子，例如`/dev/urandom`.

[http://developer.android.com/reference/java/security/SecureRandom.html](http://developer.android.com/reference/java/security/SecureRandom.html)

# objective-c - Unknown recieiver 'indexPath'l did you mean NSIndexPath?

> ID：10465639
> 
> 赞同：-2
> 
> 时间：2012-05-05T20:18:58.987
> 
> 标签：objective-c, xcode, json, ios5

I'm parsing something right now and i want to display it in a cell i', using this code for my tableview but i also want it without Tablview

```
 NSString *const JsonDataUrl = [NSString stringWithFormat: @"%@", appdownloadurl];
    NSString *jsonString = [NSString 
                            stringWithContentsOfURL:[NSURL URLWithString:JsonDataUrl] 
                            encoding:NSUTF8StringEncoding
                            error:nil];

    SBJSON *parser = [[SBJSON alloc] init];

    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    parser = nil;

    [self setTableData:[results objectForKey:@"resultCount"]]; 
```

This works great but when i place this line in viewdidload

```
NSDictionary *item = [tableData objectAtIndex:[indexPath row]];

NSLog(@"Apple: %@", [item objectForKey:@"price"]); 
```

And error shows up on this line;

```
NSDictionary *item = [tableData objectAtIndex:[indexPath row]]; 
```

//Unknown recieiver 'indexPath'l did you mean NSIndexPath?

does anyone know how to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:21:16.363

Do you declare any variable called `indexPath` in your `viewDidLoad` method? You can't just use the `indexPath` from your table view methods in `viewDidLoad` arbitrarily.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:21:20.233

`NSDictionary *item = [tableData objectAtIndex:[indexPath row]];` suggests you are trying to load from an `NSArray`, you probably want to try something like:

```
NSDictionary *item = [tableData objectForKey:@"Some Key"]; 
```

# android - AdMob and "older" devices

> ID：10465643
> 
> 赞同：1
> 
> 时间：2012-05-05T20:19:39.277
> 
> 标签：android, admob

Right, when using the admob sdk, I am aware that I need to link against android-13 or higher, but this is a little annoying to me.

If I'm developing a app for 2.2+ I don't really want eclipse to show me unsupported features of classes in its code completion suggestions.

Currently, as a work around, I'll develop linking against the actual target sdk, and then before a deploy change to a never version to allow AdMobile to run. So basically, my main branch is setup for 4.0.3, and my development branch is setup for 2.2\. When I am ready to deploy, I merge my development branch into the main branch.

It works.. but...Is anybody aware of a less clumsy/annoying way of doing this?

# c++ - 增强与向量成员函数的绑定

> ID：10465645
> 
> 赞同：2
> 
> 时间：2012-05-05T20:19:52.590
> 
> 标签：c++, boost, lambda

请帮助我使用以下代码。我需要将字符串长度添加到向量中。我不知道如何通过提升来实现它。到目前为止，我最好的想法是：

```
boost::bind(add2Vect, boost::ref(lengths), L::_1) 
```

其中 add2Vect 是一个简单的函数，它接受一个向量、一个字符串并将字符串的长度添加到向量中。L 只是 boost::lambda 的简写

但是这个解决方案很糟糕，因为我必须创建一个离散函数。这不是 lambdas 应该做的。

编码：

```
vector<string> strings;
strings.push_back("Boost");
strings.push_back("C++");
strings.push_back("Libraries");

vector<int> lengths;

for_each(strings.begin(), strings.end(),    
    // add lengths of strings to the vector 'lengths'

);

for_each(lengths.begin(), lengths.end(), 
    cout << L::_1 << " "
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:48:49.033

Boost.Bind 和 Boost.Lambda 不是一回事。除非使用 boost::lambda::bind，否则不能在 bind 中使用 lambda 占位符。

以下是你如何做你想做的事：

```
std::transform(strings.begin(), strings.end(), std::back_inserter(lengths), 
               boost::bind(&std::string::size, _1)); 
```

如果你真的必须使用 for_each：

```
std::for_each(strings.begin(), strings.end(), 
             boost::bind(&std::vector<int>::push_back,
               &lengths, boost::bind(&std::string::size, _1))); 
```

但是你应该使用 size_t 而不是 int。

# java - 无法从不同 jar 中的同一包访问超类的受保护成员

> ID：10465646
> 
> 赞同：13
> 
> 时间：2012-05-05T20:20:02.223
> 
> 标签：java, inheritance, jar

我有一个奇怪的问题，我无法弄清楚在尝试插件化我的程序时弹出的问题。另一个问题是我无法创建一个简单的测试用例，因为每次我尝试它都有效。一定有一些我错过的并发症。但我会尽量清楚地描述这种情况，以防任何人听起来很熟悉。

我有一个名为 Seed 的基类，它是主应用程序的一部分，由系统类加载器加载。我有一个插件，其中包含一个类 Road，它是 Seed 的子类。它在运行时从一个单独的 jar 文件中加载。Road类引用了Seed.garden字段，定义为：

受保护的最终花园花园；

请注意，我没有收到编译错误。当插件 jar 包含在系统类路径中时，我也不会收到运行时错误。只有当我的主应用程序使用新的类加载器（将系统类加载器作为其父级）加载插件时，我才会收到错误消息。错误是：

java.lang.IllegalAccessError：试图从类 package.Road$4 访问字段 package.Seed.garden

这一定与子类已由与超类不同的类加载器加载这一事实有关，但我找不到任何官方原因说明这不起作用。另外，就像我说的，当我尝试用一​​个简单的测试用例（包括单独的 jar、用不同的类加载器加载子类等）来重现问题时，我没有得到错误。

我似乎也不太可能违反访问规则，因为当类由同一个类加载器加载时它可以工作，并且我没有得到编译错误。

我没主意了！有没有人认识到这个问题，或者有一些指示给我看的方向？帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T11:45:58.907

好的，所以在 axtavt 和其他受访者的帮助下，我弄清楚了问题所在。其他答案有所帮助，但他们并没有完全正确，这就是我回答自己问题的原因。问题原来是“运行时包”的概念，在[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ConstantPool.doc.html)中定义如下：

**5.3 创建和加载**

...在运行时，一个类或接口不仅仅由它的名称决定，而是由一对：它的完全限定名称和它的定义类加载器。每个这样的类或接口都属于一个运行时包。类或接口的运行时包由包名和定义类或接口的类加载器决定。...

**5.4.4 访问控制**

...当且仅当以下任何条件为真时，类或接口 D 才能访问字段或方法 R：...

*   R 是受保护的并在类 C 中声明，而 D 是 C 的子类或 C 本身。
*   R 要么是受保护的，要么是包私有的（即既不是公共的，也不是受保护的，也不是私有的），并且由与 D 相同的运行时包中的类声明。

第一个子句解释了为什么允许 Road 访问 Seed.garden，因为 Road 是 Seed 的子类，第二个子句解释了为什么 Road$4 不允许访问它，尽管它与 Road 在同一个包中，因为它不是在同一个*运行时*包中，已由不同的类加载器加载。该限制实际上不是 Java 语言限制，而是 Java VM 限制。

因此，我的情况的结论是，由于 Java VM 的合法限制而发生异常，我将不得不解决它，可能通过将字段公开，在这种情况下这不是问题，因为它们是最终的，不是秘密的，或者可能是通过确实可以访问的 Road 将 Seed.garden 导出到 Road$4。

谢谢大家的建议和回答！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T20:48:33.600

听起来你有一个类身份危机，有两个不同的类加载器在类层次结构中加载同一个类或类似的类。阅读一些关于 java 类加载器的内容。这是一个很好的介绍，“类身份危机”见图2：[http ://www.ibm.com/developerworks/java/library/j-dyn0429/](http://www.ibm.com/developerworks/java/library/j-dyn0429/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:48:15.240

> 我应该补充一点，Road$4 是 Road 的匿名内部类...

其他人认为这也是 1998 年的错误：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4116802](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4116802)

> 除了在封闭类、封闭类或同级类中*声明*的成员之外，内部类对另一个类的成员的访问权限不比顶级类更大。内部类可以不受限制地访问其封闭类的继承成员，这是一种常见的误解。这不是真的。

我可能会更多地研究这个事实，因为这最初是针对 Java 1.2 报告的，但我似乎从我的阅读中记得今天也是如此。

**编辑：**

我确认这是真的：

[http://docs.oracle.com/javase/tutorial/java/javaOO/summarynested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/summarynested.html)

匿名内部类的范围只是它被定义的地方。因此，即使外部类可以访问继承的成员，它也无法访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T21:33:36.993

这是权限错误，因此它取决于您用于运行运行时的框架。只是为了澄清这确实是这样，将父成员公开，然后尝试运行。如果一切正常，然后恢复你的代码，根据你使用的运行时我们需要配置正确的安全访问。

# ruby - 如何在同一端口上提供 Cramp::Websocket 和普通 Rack 应用程序？

> ID：10465659
> 
> 赞同：3
> 
> 时间：2012-05-05T20:21:28.880
> 
> 标签：ruby, websocket, rack, thin, cramp

我正在尝试使用相同的端口来提供正常的 HTTP 流量以及通过[Cramp](http://cramp.in/documentation#websockets)（构建在 EventMachine 之上）的 HTML5 websocket，使用 Ruby 1.9.3 和[Thin](http://code.macournoyer.com/thin/) 1.3.1。这是一个最小的、独立的示例：

```
require 'thin'
require 'cramp'
require 'http_router'

Cramp::Websocket.backend = :thin

class SocketApp < Cramp::Action
  self.transport = :websocket

  on_start = :connected
  on_finish = :disconnected
  on_data = :message

  def connected
    puts 'Client connected'
  end
  def disconnected
    puts 'Client disconnected'
  end
  def message(msg)
    puts "Got message: #{msg}"
    render 'Here is your reply'
  end
end

class WebApp
  def call(env)
    [ 200, { 'Content-Type' => 'text/html' }, <<EOF
<html><head>
<script>
  function init() {
    function log(msg) { document.getElementById('log').innerHTML += msg + '<br>'; }
    var socketUri = 'ws://' + document.location.host + '/socket';
    log('Socket URI: ' + socketUri);
    var socket = new WebSocket(socketUri);
    socket.onopen = function(e) {
      log('onopen');
      socket.send('Is there anybody out there?');
      log('sent message');
    };
    socket.onclose = function(e) {
      log('onclose; code = ' + e.code + ', reason = ' + e.reason);
    };
    socket.onerror = function(e) {
      log('onerror');
    };
    socket.onmessage = function(e) {
      log('onmessage; data = ' + e.data);
    };
  }
</script>
</head><body onload='init();'>
  <h1>Serving Cramp::Websocket and normal Rack app on the same port</h1>
  <p id='log'></p>
</body></html>
EOF
    ]
  end
end

app = HttpRouter.new do
  add('/socket').to SocketApp
  add('/').to WebApp.new
end

run app 
```

如果您想亲自尝试，请将此代码粘贴到名为`config.ru`并运行的文件中`thin start`。您需要 gems `thin`，`cramp`并`http_router`安装。

这个想法是 JavaScript 代码与 建立一个 WebSocket 连接`ws://localhost:3000/socket`，它会回显发送给它的消息，但这并不像预期的那样工作。事件`open`触发，发送消息时没有错误，但我们从未得到响应。

从服务器的角度来看，没有建立连接，因为`Client connected`没有打印消息。

使用`thin start -D`，我可以看到 HTTP 101 正在发生，并且正在交换一些二进制数据。

我究竟做错了什么？

**更新**：如果我将文件分成两部分，撕掉`HttpRouter`，并在不同的端口上运行两个`thin`实例，它仍然不起作用。所以问题出在套接字代码中，而不是在`HttpRouter`或`WebApp`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:32:48.713

好吧，这是作弊，但我最终通过切换到另一个库来解决它：[websocket-rack](https://github.com/imanel/websocket-rack)。出于好奇，更正后的代码如下：

```
require 'thin'
require 'http_router'
require 'rack/websocket'

class SocketApp < Rack::WebSocket::Application
  def on_open(env)
    puts 'Client connected'
  end
  def on_close(env)
    puts 'Client disconnected'
  end
  def on_message(env, message)
    puts "Got message: #{message}"
    send_data 'Here is your reply'
  end
end

class WebApp
  def call(env)
    [200, { 'Content-Type' => 'text/html' }, <<EOF
<html><head>
<script>
  function init() {
    function log(msg) { document.getElementById('log').innerHTML += msg + '<br>'; }
    var socketUri = 'ws://' + document.location.host + '/socket';
    log('Socket URI: ' + socketUri);
    var socket = new WebSocket(socketUri);
    socket.onopen = function(e) {
      log('onopen');
      socket.send('Is there anybody out there?');
      log('sent message');
    };
    socket.onclose = function(e) {
      log('onclose; code = ' + e.code + ', reason = ' + e.reason);
    };
    socket.onerror = function(e) {
      log('onerror');
    };
    socket.onmessage = function(e) {
      log('onmessage; data = ' + e.data);
    };
  }
</script>
</head><body onload='init();'>
  <h1>Serving WebSocket and normal Rack app on the same port</h1>
  <p id='log'></p>
</body></html>
EOF
    ]
  end
end

app = HttpRouter.new do
  add('/socket').to(SocketApp.new)
  add('/').to(WebApp.new)
end

run app 
```

# c# - 意外的泛型行为

> ID：10465665
> 
> 赞同：0
> 
> 时间：2012-05-05T20:22:26.483
> 
> 标签：c#, generics

我正在与聊天中的某人讨论相关问题，我想出了这段代码，它的行为与我的预期不同。

```
class Program
{
    static void Main(string[] args)
    {
        new Test<SomeObject>();
        Console.ReadKey();
    }
}

class SomeObject
{
    public SomeObject() { }

    public new string ToString()
    {
        return "Hello world.";
    }
}

class Test<T> where T : new()
{
    public Test()
    {
        T t = new T();
        object t1 = t;
        Console.WriteLine(t.ToString());
        Console.WriteLine(t1.ToString());
    }
} 
```

输出是：

```
<ProjectName>.SomeObject
<ProjectName>.SomeObject 
```

因为第一行是从泛型类型编写的，所以我希望它使用在 SomeObject 中定义的 ToString() 方法，因为这就是该类型在运行时会变成的样子，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:30:59.203

我相信 Ben Voigt 在他的评论中已经给了你答案。

`new`您可以通过指定将 hidden ( ) 方法实现声明为通用约束的类型来实现您期望的结果：

```
class Test<T> where T : SomeObject, new()
{
    public Test()
    {
        T t = new T();
        object t1 = t;
        Console.WriteLine(t.ToString());
        Console.WriteLine(t1.ToString());
    }
} 
```

这输出：

```
Hello world.
Program.SomeObject 
```

**编辑**：编译器根据泛型约束解析对泛型类型的任何成员调用。这在 MSDN C# Programming Guide on [Constraints on Type Parameters](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)中有所暗示：

> 通过约束类型参数，可以将允许的操作和方法调用的数量增加到约束类型及其继承层次结构中的所有类型所支持的数量。因此，当您设计泛型类或方法时，如果您要对泛型成员执行简单赋值以外的任何操作或调用 System.Object 不支持的任何方法，则必须对类型参数应用约束。

为了帮助澄清问题：假设您在`Foo`类中定义了一个新方法 ， ：

```
class SomeObject
{
    public SomeObject() { }

    public void Foo() { }
} 
```

尝试调用`Foo`会导致编译时错误。编译器唯一知道泛型类型`T`的是它有一个无参数的构造函数——它不知道它可能定义的任何方法。

```
class Test<T> where T : new()
{
    public Test()
    {
        T t = new T();
        t.Foo();   // Error: 'T' does not contain a definition for 'Foo' 
                   //        and no extension method 'Foo' accepting a
                   //        first argument of type 'T' could be found
    }
} 
```

但是，如果您限制`T`为 type `SomeObject`，那么编译器将知道`Foo`在`SomeObject`类中查找 的定义：

```
class Test<T> where T : SomeObject, new()
{
    public Test()
    {
        T t = new T();
        t.Foo();   // SomeObject.Foo gets called
    }
} 
```

隐藏成员的推理非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:39:02.787

在`Test<T>`中，编译器不知道`T`实际上会是`SomeObject`，因为对 没有约束`T`。所以它只能假设那`t`是一个`object`，并且调用`t.ToString()`导致调用虚`Object.ToString`方法，*而不是* `SomeObject.ToString()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:33:58.410

这与泛型完全无关，与您声明了一个名为 的*新*方法`ToString`而不是*覆盖*现有方法这一事实有关。

如果您改写了该方法，它将被使用，这与早期绑定与后期绑定无关（如此处的其他答案所示。）

`ToString`调用引用与`T`引用没有区别的原因`object`是编译器无法验证这里可以使用的*所有' 都定义* *了那个*新方法，因此它必须回退到从 object 继承的那个在*所有*情况下。`T`*`ToString`*

 **请注意，编译器将生成一个方法，该方法将被 的*所有*变体使用`T`，因此它必须使用它所拥有的关于 T 的知识，并且您没有声明您从接口或类继承（尽管在这种情况下我怀疑它会有所作为）所以编译器无法知道`ToString`在这种情况下已被覆盖。

另一方面，如果您声明有*问题*`T`的 是 的后代`SomeObject`，编译器会知道它有一个*新* 方法可以使用，但是编译器无法单独`ToString`使用该知识。`T`**

# javascript - 使用 $(this) jquery 更改另一个元素

> ID：10465667
> 
> 赞同：0
> 
> 时间：2012-05-05T20:22:30.137
> 
> 标签：javascript, jquery, this

所以，我知道如何更改您悬停在同一元素上的属性...

```
$(".click2play").mouseover(function()
            {
              $(this).css({'visibility' : 'hidden'});
             }); 
```

**问题**我可以做同样的事情，但只影响悬停在同一个“click2play”div 内的另一个元素吗？也许喜欢？

```
 $(".click2play").mouseover(function()
            {
              $(this).(#someotherdiv).css({'visibility' : 'hidden'});
             }); 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:26:50.910

此代码以当前 .click2play 元素内的 div 为目标。我相信这就是你所要求的:)

```
$(".click2play").mouseover(function() {
    $('div.class_name', this).css({'visibility' : 'hidden'});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:40:10.313

从问题中不太清楚你想做什么，所以我可以猜到的所有选项
1.如果你想隐藏类的所有元素，`.click2Play`然后使用

```
$('.click2Play').hover(function(){$('.click2play').hide()}); 
```

2.如果您只想隐藏具有此类使用的所有元素的当前元素

```
$('.click2Play').hover(function(){$(this).hide()}); 
```

3.如果你想概括它，那么你可以使用 jquery 对象的.selector 属性，这样你就可以像使用它一样使用它

```
$('.click2Play').hover(function(){$($(this).selector).hide()}); 
```

所以现在如果你将类名从 .click2Play 更改为其他类，它会很好地工作，并且会隐藏该类的所有元素。
4.如果你想在当前元素的内部隐藏一些元素，那么

```
$('.click2Play').hover(function(){$(this).children('selector_of_child').hide()}); 
```

5.如果这个类的所有元素里面都有一个元素有一些其他的类，你想把它们都隐藏起来，然后像这样简单地使用每个

```
$('.click2Play').hover(function(){$('.click2play').each(function(){$(this).children("selector_Of_Child").hide()})}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:24:12.840

我会这样做：

```
$(".click2play").mouseover(function(){
    $(this).hide();
}); 
```

但也许这不是你想做的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T20:25:12.620

我想这个:)：

```
$(".click2play").mouseover(function(){
  $(this).css({'visibility' : 'hidden'});
}); 
```

或更好

```
$(".click2play").mouseover(function(){
      $(this).hide();
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T20:25:39.307

你想改变一些其他的div？为什么需要`$(this)`？

```
$(".click2play").mouseover(function(){
    $("#someotherdiv").hide();
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T20:26:39.990

要更改单个 css 属性，您可以执行以下操作：

```
$(".click2play").mouseover(function(){
    $(this).css('visibility', 'hidden');
}); 
```

我希望它有所帮助（考虑查看此链接： http: [//marakana.com/bookshelf/jquery_tutorial/css_styling.html](http://marakana.com/bookshelf/jquery_tutorial/css_styling.html)）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-05T20:39:22.713

我相信大多数答案都没有关注这个问题，即关于删除课程的问题。以下是这两个问题的答案：

```
$('.click2play').bind('mouseenter mouseleave', function () {
  $(this).removeClass('click2play'); // This line removes the current object's class click2play
  $('jQUerySelector').removeClass('click2play'); // This will remove another element's class click2play
}); 
```

# sql - SQL query Convert column to row

> ID：10465668
> 
> 赞同：2
> 
> 时间：2012-05-05T20:22:30.190
> 
> 标签：sql

My table has the following columns:

```
roll no | subject1 | subject2 | subject3 | subject4 | subject5 | subject6
   1    |    10    |    12    |    13    |    9     |    15    |    16
   2    |    12    |    14    |    10    |    16    |    19    |    13
   3    |    10    |    12    |    13    |    18    |    12    |    15
   4    |    14    |    12    |    13    |    7     |    11    |    17 
```

Now i need data in this format:

```
Roll no | SubjectName | Marks
    1   |  subject1   |  10     
    1   |  subject2   |  12     
    1   |  subject3   |  13     
    1   |  subject4   |  9     
    1   |  subject5   |  15     
    1   |  subject6   |  16     
    2   |  subject1   |  12     
    2   |  subject2   |  14     
    2   |  subject3   |  10     
    2   |  subject4   |  16     
    2   |  subject5   |  19     
    2   |  subject6   |  13   
    3   |  subject1   |  10     
    3   |  subject2   |  12     
    3   |  subject3   |  13     
    3   |  subject4   |  18     
    3   |  subject5   |  12     
    3   |  subject6   |  15  
    4   |  subject1   |  14     
    4   |  subject2   |  12     
    4   |  subject3   |  13     
    4   |  subject4   |  7     
    4   |  subject5   |  11     
    4   |  subject6   |  17 
```

As you can see i want to display the columns as rows

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T20:25:33.437

如果您的数据库支持[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410.aspx)，您可以使用它。

如果没有，您可以使用`UNION ALL`：

```
SELECT roll_no, 'subject1' AS SubjectName, subject1 AS Marks FROM yourtable
UNION ALL
SELECT roll_no, 'subject2', subject2 FROM yourtable
UNION ALL
SELECT roll_no, 'subject3', subject3 FROM yourtable
UNION ALL
SELECT roll_no, 'subject4', subject4 FROM yourtable
UNION ALL
SELECT roll_no, 'subject5', subject5 FROM yourtable
UNION ALL
SELECT roll_no, 'subject6', subject6 FROM yourtable
UNION ALL
SELECT roll_no, 'subject7', subject7 FROM yourtable 
```

# ios - ios - 你能在不使用 Core Data 的情况下检测 TableView 的内容吗？

> ID：10465669
> 
> 赞同：0
> 
> 时间：2012-05-05T20:22:42.810
> 
> 标签：ios, core-data, uitableview

我有一个 ViewController 和一个单独的 UITableViewController。现在在应用程序 appDelegate 文件中加载了一个数组，但我不想自动加载它。现在我有这段代码，当我学习核心数据（仍然是一个进步）时，它检测数据库是否为空，如果是，那么它将通过调用这个方法插入一个默认数组。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self setupFetchedResultsController];

if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    NSLog(@"!!!!! ~~> There's nothing in the database so defaults will be inserted");
    [self importCoreDataDefaultRoles];
}
else {
    NSLog(@"There's stuff in the database so skipping the import of default data");
} 
```

现在您可以看到 if 语句检查返回的计数是否大于 0。

我的问题是**你能在不使用核心数据的情况下检查这个吗？**与任何 tableView 一样。

我的目标是让最终用户能够使用普通的 NSMutabelArray 将数据加载到 TableView 中，但是通过 IBAction 按钮执行此操作，而不是在 viewDidLoad 中自动加载 - 只是给自己设置一个练习:-)

干杯杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:30:11.503

您可以在开始时使用空数组在表中显示默认数据，当用户单击按钮时，您可以在源数组中插入数据并使用刷新表

```
 [tableView reloadData]; 
```

# python - How come Python thinks my dictionary is a list? I get a TypeError when trying to change a value

> ID：10465670
> 
> 赞同：1
> 
> 时间：2012-05-05T20:22:50.820
> 
> 标签：python, dictionary, typeerror

So I've got this little script that adds songs to an Rdio playlist. It mostly works just fine. First it reads a CSV and creates a list of dictionaries, with each dictionary containing attributes for the track. Here's the code that does that:

```
csv_tracks = []
f = open('./testing_tracks.csv', 'rb')
reader = csv.reader(f)
for row in reader:
    csv_tracks.append({'artist':row[1], 'title':row[0], 'status':row[2]})
f.close 
```

The 'status' value is a string of either 0 or 1, just to signal whether the track has already been added to the playlist (so I don't keep re-adding the same track over and over).

The problem appears later in the script, where I run a loop to search for each track on Rdio, and add it to a playlist if found. Here's the code:

```
for track in csv_tracks:
    if track['status'] == '0':
        if find_track(track) != None:
            key = find_track(track)
            add_to_playlist(key)
            track['status'] = '1'
            print 'Adding %s by %s to the playlist' % (track['title'],track['artist']) 
```

I get a TypeError. Here's the message:

```
Traceback (most recent call last):
  File "testing.py", line 76, in <module>
    if track['status'] == '0':
TypeError: list indices must be integers, not str 
```

The truly odd thing is that the script seems to work mostly fine. For tracks with status == '0', it searches for them and adds them to the playlist and then logs a message as per above ('Adding...to the playlist'). The only thing that doesn't work is track['status'] is not changed to '1' when a track is added. And I get the error.

I don't really understand why Python seems to think that my dictionary is a list and can only accept integer indices. Any help?

DISCLAIMER: I am a beginner. Be gentle if I'm doing something terribly stupid :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:42:13.020

您想使用`csv.DictReader`它允许您按名称访问元素。默认`csv.reader`将每条记录作为列表返回。

# javascript - How can I style text input as I type?

> ID：10465671
> 
> 赞同：7
> 
> 时间：2012-05-05T20:23:05.847
> 
> 标签：javascript, html, css

Every time I type a character in an input field, I parse the expression so that I get:

1.  An array of tokens, i.e., tokenArray=[2, *, COS, (, 4, )]
2.  A corresponding array of token types, i.e., tokenType=[NUMBER, OPERATOR, FUNCTION, (, NUMBER, )]

I need to style each token (for instance assigning a different color to each token) based on its respective token type.

I have been able to easily style a dynamic copy of the input text in a different `<div>` (not the input text itself, which is what I am asking for help) as follows:

JavaScript:

```
function processExpression() {
    var userInput = document.getElementById('inputText').value;

        var resultOutput =  parse(userInput); //this generates the two arrays described above

        for (i in tokenArray) 
          newHTML += "<span style='color: " + colorMap[ tokenType[i] ] + " '>" +  tokenArray[i] + "</span>";

          document.getElementById('styledExpression').innerHTML = newHTML; 
} 
```

HTML:

```
<input type="text" id="inputText" value="" placeholder="Type expression" size="40"
        onKeyDown="processExpression();" 
        onKeyUp="processExpression();"/>

<div id="styledExpression" value=""></div> 
```

How can I style the input text directly in the input field where I type? Any JavaScript solution?

UPDATE

Tim's answer to the question [replace innerHTML in contenteditable div](https://stackoverflow.com/questions/5595956/replace-innerhtml-in-contenteditable-div/10493141#10493141) provides some good help.

How would you modify [http://jsfiddle.net/2rTA5/2/](http://jsfiddle.net/2rTA5/2/) to solve for when at every keydown, one reparses the entire editable? For example, imagine you type "=if(AND(3=2,A1:A4,OR(0,1)),5,6)" and, at every keydown the editable gets programmatically re-written (see token description above) and I lose the cursor.

How can this solution ignore the type of token or character or node and simply save and restore the absolute cursor (from the beginning of the ) position that was before the keydown?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T20:25:29.587

文本输入不支持样式化内容。故事结局。

一个常见的解决方案是[`contenteditable`](http://www.w3.org/TR/html5/editing.html#contenteditable)改用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T20:32:25.150

正如马特所说，`<input>`s 不支持样式内容。但是，一种可能的解决方案是使用`<span>`包含输入值的第二个，并在此处显示样式化的内容。如果这是不可接受的，那么`contenteditable`按照马特的建议使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T20:53:48.810

如果它只是为了不重要的美学，你可以在它后面进行一些hack样式。

*   使背景和文字`<input>`透明
*   `<span>`后面还有一个
*   当的内容发生变化时更新`<span>`（使用适当的样式）的内容`<input>`

[这是一个快速演示。](http://jsfiddle.net/minitech/Ku3yc/)

# meteor - 如何在 Meteor 中使用时间戳并保留插入顺序？

> ID：10465673
> 
> 赞同：4
> 
> 时间：2012-05-05T20:23:20.563
> 
> 标签：meteor

考虑到如果没有指定排序，MongoDB 不保证按插入顺序返回项目，文档的 _id 是随机生成的，并且在插入时手动设置时间戳取决于客户的时钟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T21:29:02.550

我建议一个方法。

```
Meteor.methods({
  addItem: function (doc) {
    doc.when = new Date;
    return Items.insert(doc);
  }
}); 
```

虽然客户端将在本地运行并设置`when`为自己的当前时间，但服务器的时间戳优先并传播到所有订阅的客户端，包括原始客户端。你可以排序`doc.when`。

作为文档验证和权限的一部分，我们可能会添加自动设置时间戳的钩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:58:42.087

如果您愿意使用这些收集钩子（[https://gist.github.com/matb33/5258260](https://gist.github.com/matb33/5258260)）之类的东西，以及这个奇特的`Date.unow`功能（即使插入了许多具有相同时间戳的文档，您也可以安全地对其进行排序):

```
if (!Date.unow) {
    (function () {
        var uniq = 0;
        Date.unow = function () {
            uniq++;
            return Date.now() + (uniq % 5000);
        };
    })();
}

if (Meteor.isServer) {
    // NOTE: this isn't vanilla Meteor, and sometime in the future there may be
    // a better way of doing this, but at the time of writing this is it:
    Items.before("insert", function (userId, doc) {
        doc.created = Date.unow();
    });
} 
```

# database - 与 EF 配合良好且易于部署的独立数据库选项？

> ID：10465674
> 
> 赞同：1
> 
> 时间：2012-05-05T20:23:52.650
> 
> 标签：database, vb.net

我最近启动了一个使用 mysql 数据库存储信息的 Winforms VB.NET 应用程序。问题是这是一个独立系统，不需要对数据库进行网络访问。而安装mysql服务器，连同连接器也成了很大的负担。是否有可行的替代数据库引擎将是非事务性的，并且 EF 仍然可以使用。这个数据库只需要跟上客户详细信息、付款历史和相关项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:27:01.313

SQL Server Compact 可能适合您，具体取决于它的[限制](http://technet.microsoft.com/en-us/library/cc835494.aspx)。如果没有，SQL Server Express 可以正常工作

# html - 在 td 中使用 pre 标签

> ID：10465681
> 
> 赞同：15
> 
> 时间：2012-05-05T20:24:40.023
> 
> 标签：html, css

我在`<pre>`里面使用标签时遇到问题`<td>`。我有 JSF 数据表和它的三列。我需要所有三列都包含预格式化的文本。

如果我使用`<pre>`标签，则显示的文本会根据需要预先格式化，但列的宽度会比文本大得多。

我可以通过指定`white-space: pre-line;`in`<pre>`标记的样式在 css 中解决这个问题。但它只适用于firefox和IE，chrome忽略了这种风格。

所以我的问题是：有没有一种可能的方法来解决`<td>`其中包含`<pre>`标签的宽度？

编辑：

我的CSS类：

```
.dt_row {
    height: 8px;
    margin: 3px 3px 3px 3px;
    color: #000000;
    white-space: pre-line;
} 
```

还有我的数据表：

```
 <h:dataTable value="#{searchBean.searchResult.concordances}"
                 var="concordance">

        <h:column>
            <pre class="dt_row">
                #{concordance.left}
            </pre>
        </h:column>

        <h:column>
            <pre class="dt_row" style="color: blue;">
                #{concordance.middle}
            </pre>
        </h:column>

        <h:column>
            <pre class="dt_row">
                #{concordance.right}
            </pre>
        </h:column>

    </h:dataTable> 
```

编辑：

我找到了解决方案。`<pre>`我使用了标签而不是标签，`<code>`现在所有数据都完美显示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T20:54:12.537

元素默认占据 100%的`pre`宽度，即整个可用宽度。然而，在表格单元格中，这与单元格宽度有关，默认情况下，单元格的宽度与`pre`最长行所需的宽度一样。如果不是这种情况，您需要识别导致偏离默认值的代码，并对其进行修改。

例如，如果您`width`在元素上设置了属性或属性`table`，只需删除该设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T20:30:22.423

拥有一个`div`包含标签的元素`pre`并在 中使用`overflow`属性`div`怎么样？

浏览器会放一个滚动条，但我相信你没问题;-)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-05T20:28:17.243

在表格中显示文本的截断版本，然后当您将鼠标悬停在单元格上时，显示整个部分有点像工具提示。显然，这可能不适用于您的上下文。

# browser - Web 浏览器如何确定如何处理资源？

> ID：10465684
> 
> 赞同：1
> 
> 时间：2012-05-05T20:24:55.013
> 
> 标签：browser, resources

在浏览器的地址栏中，我可以使用任何扩展名或不指定资源，例如[http://www.something.com/someResource.someExtension](http://www.something.com/someResource.someExtension)。浏览器如何确定如何处理该资源？例如，浏览器应该将其解析为 HTML 文档，还是将其视为某个脚本？有资源类型的概念吗？谢谢你。

PS我简直不敢相信我在想什么！:(（请参阅我对 Luka 回答的评论中的缺陷）。浏览器如何在本地查看资源！浏览器是客户端，资源驻留在服务器端。Duh！（我发现自己在这个“精神”药物偶尔）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:38:45.477

服务器返回的 HTTP 响应通常包含“Content-type: text/html”或类似的行（application/octet-stream 等）。

这是一个示例（查看类似结果的最简单方法是打开 firebug 的 Net 选项卡）：

```
Cache-Control   public, max-age=60
Content-Encoding    gzip
Content-Length  9334
Content-Type    text/html; charset=utf-8<----------------here's it
Date    Sat, 05 May 2012 20:34:36 GMT
Expires Sat, 05 May 2012 20:35:36 GMT
Last-Modified   Sat, 05 May 2012 20:34:36 GMT
Vary    * 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:28:12.860

它查看文档的 Mime 类型。

HTML 页面有 mime 类型`text/html`，JPEG 图像有`image/jpeg`

更多信息：[http ://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:27:48.353

它确实使用 MIME 类型[http://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)。

# c++ - 使用int数组作为键的二叉树（欧几里得距离）？

> ID：10465686
> 
> 赞同：3
> 
> 时间：2012-05-05T20:25:08.920
> 
> 标签：c++, binary-tree, euclidean-distance

编写了一个存储船舶数据的二叉搜索树，搜索的关键是它们的声学特征。

在搜索树时，我想返回具有正确签名的船或与搜索到的签名最匹配的船。（通过查看哪艘船的欧几里得距离最近）。

我遇到的问题是如何比较签名而不是它们的实际数值。那么这意味着执行的任何搜索都是顺序的而不是二进制的？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:48:01.087

您正在做的事情归结为多维度的[最近邻搜索](http://en.wikipedia.org/wiki/Nearest_neighbor_search)。你不能只用二叉树有效地解决这个问题；你需要一些空间分区结构。

如果您的数组长度 N 很小（个位数），您可以使用 2^N-ary 树（四叉树、八叉树、...）作为二叉树的推广。

一个流行的选择也适用于更高的维度是[Kd-tree](http://en.wikipedia.org/wiki/K-d_tree)。

# objective-c - 在可变数组中添加或替换的对象是否会自动持久化？

> ID：10465688
> 
> 赞同：0
> 
> 时间：2012-05-05T20:25:20.687
> 
> 标签：objective-c, ios

我正在构建一个非常简单的应用程序来存储姓名、年龄等人的数据。我让用户可以选择更改数据，例如一个人的生日。我想不出存储数据的最佳方式。

我已经搜索了很长时间，但找不到我正在寻找的简单答案。如果我更改可变数组中的数据，该数据是否会永久更改？我的意思是这会覆盖现有代码并更改数据，以便在应用程序关闭并再次重新加载时它仍然存在吗？

到目前为止，我无法做到这一点。我在 MySql 和 Sql server 方面有经验，所以如果可能的话，我倾向于朝那个方向发展，但如果可能的话，我真的很想使用可变数组或可变字典。这可能是一个如此基本的问题，但我无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:39:22.280

看看核心数据。这是在 iOS 上管理此类数据存储需求的最简单方法。

看看我的书，它得到了很好的评价，非常适合你想做的事情：[http ://www.amazon.com/Pro-Core-Data-iOS-Professionals/dp/1430233559](https://rads.stackoverflow.com/amzn/click/com/1430233559)

如果您想要一种简单的入门方法，也有大量的在线教程。例如，雷写了一些好东西：

[http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:54:05.990

你有一些误解。

您创建的对象在内存中。他们没有什么是永恒的。您必须以某种方式保存它们，否则当您退出应用程序并返回时它们就消失了。

如果你想保存一个数组，你有很多选择。

如果数组只包含 NSString、NSData、NSDate、NSNumber、NSArray 或 NSDictionary 类型的对象，则可以使用系统类 NSUserDefaults 保存数组。

NSArray 还有一个方法 writeToFile:atomically: 可以将数据数组保存到文件中。

但是，如果您的数组包含我上面列出的类型以外的任何对象，那么这些方法（NSUserDefaults 或 writeToFile:atomically）都不起作用。

另一种选择是使用 NSKeyedArchiver 将数组的内容转换为数据，然后将该数据写入文件。为了使该方法起作用，数组中的每个对象以及这些对象中的所有对象都需要支持 NSCoding 协议。

正如其他人指出的那样，您还可以使用 Core Data 或 mySQL 来保存数据，但这对于仅保存数组似乎有点过分了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:26:33.800

**可变**意味着您可以随时更改数据，所以不，它不是永久性的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T20:33:52.827

*是的，就您所要求的而言，它将是永久性的。尽管由于数组是可变的，这意味着您可以随时更改数据，但初始数据将被这些新数据覆盖。*

**编辑：**不，关闭应用程序后信息不会保留。您将需要以编程方式保存它。我会使用[核心数据](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T02:51:45.480

CoreData 是数据在 Cocoa 和 Cocoa-Touch 中通常持久化的方式。它还为您提供了一些不错的附加功能，例如撤消支持。但它有一个*很大*的学习曲线。

如果您正在做的事情非常简单，请查看`NSUserDefaults`. 如果您需要更多的灵活性，您总是可以使用`NSArray`'s `-writeToFile:atomically:`and `-initWithContentsOfFile:`（这两种方法的版本也都采用 URL 而不是文件路径）。

任何比这更复杂的事情，学习 CoreData 可能是值得的。

# emacs - 如何让emacs在字体锁定模式下将单引号识别为不是字符串开始/结束标记

> ID：10465695
> 
> 赞同：6
> 
> 时间：2012-05-05T20:25:46.060
> 
> 标签：emacs, elisp

我有一个预处理器（xhp），它允许我在 php 代码中编写不带引号的文本，例如：

```
<foo>
    my enemies' base
</foo> 
```

可能出现在 .php 文件中，但只要 emacs 看到该单引号，它就会将文件的整个其余部分视为字符串。

*   我无法弄清楚“font-lock-syntactic-keywords”在（c-mode）中的设置位置，但它有一个与之关联的语法表，似乎导致了这种情况
*   (c-in-literal) 也返回 'string，所以也许我需要在代码中比在字体锁定级别更深入地解决这个问题，如果有人对此有任何提示，将不胜感激

我很满意的最简单的解决方案就是假设字符串只有一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:01:58.790

我不知道您使用的是什么主要模式，但总的来说，诀窍是用类似`(modify-syntax-entry ?\' "." <syntaxtable>)`. 当然，如果 ' 字符有时可以分隔字符串，有时不能，那么它就更棘手了，您需要提出一个`font-lock-syntactic-keywords`（或`syntax-propertize-function`）规则来判断在任何给定点使用哪个。

例如，假设 PHP 从不将 ' 视为字符串分隔符，类似以下内容可能会解决您的问题：

```
(add-hook 'php-mode-hook
          (lambda () (modify-syntax-table ?\' "."))) 
```

# python - Python：如何合并显示为句子并显示行号

> ID：10465696
> 
> 赞同：2
> 
> 时间：2012-05-05T20:25:45.997
> 
> 标签：python

```
import re
line = "the heart was made to be broken"
line_split2 = re.split(r'[ \t\n\r, ]+',line)

def chunks(line_split2, n):
    for i in xrange(0, len(line_split2), n):
        yield line_split2[i:i+n]

separate_word = list(chunks(line_split2, 3))

import pprint
pprint.pprint(separate_word)

count = 0
for lines in separate_word:
    count = count + 1
    print count 
```

我正在尝试合并列表以显示为句子并在它们前面显示行号。

```
1 the heart was
2 made to be
3 broken 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:28:08.307

你可以使用`enumerate()`：

```
s = ['the heart was', 'made to be', 'broken']

for i, line in enumerate(s, 1):
    print '%d %s' %(i, line)

1 the heart was
2 made to be
3 broken 
```

有关枚举的更多信息，请参阅[http://docs.python.org/library/functions.html#enumerate](http://docs.python.org/library/functions.html#enumerate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:28:20.630

用于`enumerate()`跟踪您所在的行：

```
for i, word in enumerate(separate_word, 1):
    print i, ' '.join(word)

> 1 the heart was
> 2 made to be
> 3 broken 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:28:53.670

无需编写自己的`chunks`函数。使用[itertools 文档](http://docs.python.org/library/itertools.html)`grouper`中的配方，然后使用它的结果：[`enumerate`](http://docs.python.org/library/functions.html#enumerate)

```
enumerate(grouper(3, line_split2), start = 1) 
```

这是代码`grouper`：

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T20:38:16.320

只需在你的 for 循环中使用 join

```
import re
line = "the heart was made to be broken"
line_split2 = re.split(r'[ \t\n\r, ]+',line)

def chunks(line_split2, n):
 for i in xrange(0, len(line_split2), n):
    yield line_split2[i:i+n]

separate_word = chunks(line_split2, 3)

count = 0
for lines in separate_word:
    count = count + 1
    print count, " ".join(map(str,lines))

1 the heart was
2 made to be
3 broken 
```

# python - 使用 python 控制应用程序

> ID：10465697
> 
> 赞同：2
> 
> 时间：2012-05-05T20:25:49.447
> 
> 标签：python, ubuntu, scripting

最近我一直在尝试找到一种方法来使用 python 控制我的 ubuntu 上的应用程序。我想要实现的就像我们可以在 mac 中使用 applescript 做的事情......控制 chrome 向它发送查询等。

有人可以指出我如何使用python控制应用程序的正确方向，尤其是在Ubuntu上……或者代码片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:31:33.093

了解 D-Bus： [http ://en.wikipedia.org/wiki/D-Bus](http://en.wikipedia.org/wiki/D-Bus)

Python dbus： [http ://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html](http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html)

为了控制一个进程，它必须首先使用 dbus 连接并导出服务。这与 AppleScript 的想法相同。在 Mac 上，应用程序必须导出可以通过 applescript 控制的服务。

PyQt/PySide 也有一个 DBus 模块： [http ://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtdbus.html](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtdbus.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:28:17.307

你看过[Sikuli项目](http://sikuli.org/)吗？

# java - 用于查看算法花费多长时间的计时器是说我的二进制搜索比线性搜索花费更长的时间

> ID：10465704
> 
> 赞同：3
> 
> 时间：2012-05-05T20:26:56.573
> 
> 标签：java

这是关于 gist 的课程 [https://gist.github.com/2605302](https://gist.github.com/2605302)

我已经用不同的文件对其进行了多次测试，即使对二进制搜索进行的比较较少，所花费的时间也总是更多。怎么了？

```
public static int linerSearch ( String array [], String word, long resultsArray [])
{
    int comparisons = 0;
    int pos = -1;
    //i have started the timer where the search actualy starts
    long start = System.nanoTime ();
    for (int i = 0; i < array.length; i++){
        comparisons = comparisons + 1;
        if (array [i].equals (word)){
            pos = i;
            break;
        }
    }
    long stop = System.nanoTime ();
    long total = stop - start;
    resultsArray [0] = total;
    resultsArray [1] = (long) (long) array.length;
    resultsArray [2]= (long) (long) comparisons;
    return pos;
} 
```

这是下一个 binarySearch 类

```
public  static int binarySearch (String [] array, String word, resultsArray []) {
    int start = 0;
    int end = array.length - 1;;
    int midPt;
    int pos = -1;
    int comparisons2 = 0;
    long start2 = System.nanoTime ();
    Arrays.sort (array);
    while (start <= end) {
        midPt = (start + end) / 2;
        comparisons2 = comparisons2 + 1;
        if (array [midPt].equalsIgnoreCase (word)) {
            pos = midPt;
            break;
        }
        else if (array [midPt].compareToIgnoreCase (word) < 0) {
            start = midPt + 1;
            comparisons2 = comparisons2 + 1;
            //camparisons2 addition was added inside this elseif and other elseif as a work around for not breaking the elseif statement tree, if it has made it two the last elseif then two camparisons after the first one will have been done
        } else if (array [midPt].compareToIgnoreCase (word) > 0)  {
            comparisons2 = comparisons2 + 2;
            end = midPt - 1;
        }
    }
    long stop2 = System.nanoTime ();
    long total2 = stop2 - start2;
    resultsArray [0] = total2;
    resultsArray [1] = (long) (long) array.length;
    resultsArray [2]= (long) (long) comparisons2;
    return pos;
} 
```

编辑：我还应该补充一点，我在没有那行代码的情况下在一个已经排序的数组上尝试过它，但它不应该的时间仍然更长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:36:44.477

您的基准测试的问题是 Arrays.sort(array) 花费的时间最多，并且您不计算它的比较。线性搜索需要 N 次比较。当您对数组进行排序时，您会花费超过 N 次比较。

要查看二进制搜索更快，您应该进行这样的测试：

1) 使用线性搜索搜索不同的元素 1000 次

2) 对数组进行一次排序并使用二分法搜索不同的元素 1000 次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:35:39.097

您的基准测试存在缺陷，原因有很多：

*   我们不知道文件的内容。如果搜索到的词在开头，那么线性搜索会比二分搜索快
*   线性搜索与equals比较，而二分查找与equalsIgnoreCase比较
*   您执行代码的次数不足以让 JIT 编译代码

我还没有验证你的二分搜索算法是否正确，但你为什么不使用与 JDK 捆绑的算法（在 java.util.Arrays 类中）。

无论如何，你不必测量任何东西。平均而言，二分搜索比线性搜索快。无需再次证明这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:31:24.610

好的，我已经为你一劳永逸地解决了这个问题。首先，这是我使用的二进制搜索方法：

```
public static int binarySearch(String[] array, String word, long resultsArray[]) {
    int start = 0;
    int end = array.length - 1;
    int midPt;
    int pos = -1;
    int comparisons2 = 0;

    //Arrays.sort(array);

    long start2 = System.nanoTime();
    while (start <= end) {
        midPt = (start + end) / 2;
        int comparisonResult = array[midPt].compareToIgnoreCase(word);
        comparisons2++;
        if (comparisonResult == 0) {
            pos = midPt;
            break;
        } else if (comparisonResult < 0) {
            start = midPt + 1;
        } else { // comparisonResult > 0
            end = midPt - 1;
        }
    }
    long stop2 = System.nanoTime();
    long total2 = stop2 - start2;

    resultsArray[0] = total2;
    resultsArray[1] = (long) array.length;
    resultsArray[2] = (long) comparisons2;
    return pos;
} 
```

您会注意到我通过保存比较结果并使用它来减少比较次数。

接下来，我下载[了这个 235882 个单词的列表](http://www.freebsd.org/cgi/cvsweb.cgi/src/share/dict/web2?rev=1.12;content-type=text/plain)。它已经排序，忽略大小写。然后，我构建了一个测试方法，将该文件的内容加载到一个数组中，然后使用这两种搜索方法来查找该列表中的每个单词。然后，它分别对每种方法的比较次数和次数进行平均。

我发现你在选择使用哪种比较方法时必须小心：**如果你`Arrays.sort(...)`是一个列表并且你`compareToIgnoreCase`在二分搜索中使用它，它会失败！**通过失败我的意思是它无法从给定的列表中找到这个词，即使这个词确实存在在那里。这是因为`Arrays.sort(...)`它是一个区分大小写的字符串排序器。如果你使用它，你必须使用`compareTo(...)`它的方法。

所以，我们有两种情况

1.  不区分大小写的排序列表和使用`compareToIgnoreCase`
2.  区分大小写的排序列表和使用`compareTo`

除了二进制搜索中的这些选项之外，您还可以在线性搜索中选择：是否使用`equals`或`equalsIgnoreCase`. 我对所有这些案例进行了测试并进行了比较。平均结果：

*   线性搜索`equals`：时间：725536 ns；比较：117941；时间/比较：6.15 ns
*   线性搜索`equalsIgnoreCase`：时间：1064334 ns；比较：117940；时间/比较：9.02 ns
*   二进制搜索`compareToIgnoreCase`：时间：1619 ns；比较：16；时间/比较：101.19 ns
*   二进制搜索`compareTo`：时间：763 ns；比较：16；时间/比较：47.69 ns

所以，现在我们可以清楚地看到您的问题：**该`compareToIgnoreCase`方法花费的时间大约是该方法的 16 倍`equals`！**因为，平均而言，二进制搜索需要 16 次比较才能找到给定的单词，所以您可以在这段时间内执行 124 次线性比较。因此，如果您使用比这更短的单词列表进行测试，由于它们使用的方法不同，线性搜索确实总是比二分搜索快。

实际上，我还计算了线性搜索能够比二进制搜索更快地找到的单词数：使用该方法时为 164，使用该`compareTo`方法时为 614 `compareToIgnoreCase`。在 235882 个单词的列表中，这大约是 0.3%。所以总而言之，我认为仍然可以肯定地说二进制搜索比线性搜索快。:)

在你问之前的最后一点：我从`binarySearch`方法中删除了排序代码，因为这实际上是完全不同的事情。由于您正在比较两种*搜索*算法，因此如果您将*排序算法*的成本添加到其数字中，这对另一个是不公平的。我已经在另一个答案中发布了以下内容作为评论，但为了完整起见，我将在此处复制：

二分查找增加了排序的开销。所以如果你只需要从数组中找到一个元素，线性搜索总是更快，因为排序至少需要 O(n log n) 时间，然后二进制搜索需要 O(log n) 时间，主要由 O(n登录 n) 操作。线性搜索在 O(n) 时间内执行，优于 O(n log n)。但是一旦你对数组进行了排序，O(log n) 就比 O(n) 好得多。

如果您坚持在`binarySearch`方法中使用排序命令，您应该知道，在我的设置中，从最初的随机顺序排序长长的单词列表平均需要超过 140000000 ns 或 0.14 秒。`equals`在那个时候，您可以使用该方法执行大约 23000000 次比较，因此如果 a）您的数组是随机顺序的，并且 b）如果您只需要从那里找到一个或几个元素，那么您*真的**不*应该使用二进制搜索.

还有一件事情。在此示例中，您正在搜索字符串数组中的单词，访问数组中的项目的成本可以忽略不计，因为该数组保存在计算机的快速主存储器中。但是，如果你有一大堆有序的文件，并且你试图从中找到一些东西*，*那么访问单个文件的成本将使其他计算的成本可以忽略不计。因此，在那种情况下，二分搜索也会完全摇摆不定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T20:35:57.710

您的代码不测量二进制搜索，但也在进行搜索之前对数组进行排序。这总是比简单的线性搜索要长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T00:30:37.907

```
} else if (array [midPt].compareToIgnoreCase (word) > 0)  { 
```

你根本不需要这个测试。此时代码中没有其他可能性。它不相等，而且不少于：您已经测试过这些；所以它必须大于。

因此，您可以减少 33% 的比较。

# php - 从远程站点加载内容不起作用，但为什么呢？

> ID：10465707
> 
> 赞同：0
> 
> 时间：2012-05-05T20:27:01.470
> 
> 标签：php, json, parsing, dom

我仍在为客户端开发此目录，它通过 PHP 和 Simple DOM Parser 从远程站点加载图像。

```
// Code excerpt from http://internetvolk.de/fileadmin/template/res/scrape.php, this is just one case of a select

$subcat = $_GET['subcat'];
$url = "http://pinesite.com/meubelen/index.php?".$subcat."&lang=de";
$html = file_get_html(html_entity_decode($url));
$iframe = $html->find('iframe',0);
$url2 = $iframe->src;
$html->clear(); 
unset($html);
$fullurl = "http://pinesite.com/meubelen/".$url2;
$html2 = file_get_html(html_entity_decode($fullurl));
$pagecount = 1;
$titles = $html2->find('.tekst');
$images = $html2->find('.plaatje');
$output='';
$i=0;
foreach ($images as $image) {
$item['title'] = $titles[$i]->find('p',0)->plaintext;
$imagePath = $image->find('img',0)->src;
$item['thumb'] = resize("http://pinesite.com".str_replace('thumb_','',$imagePath),array("w"=>225, "h"=>162));
$item['image'] = 'http://pinesite.com'.str_replace('thumb_','',$imagePath);
$fullurl2 = "http://pinesite.com/meubelen/prog/showpic.php?src=".str_replace('thumb_','',$imagePath)."&taal=de";
$html3 = file_get_html($fullurl2);
$item['size'] = str_replace(' &nbsp;','',$html3->find('td',1)->plaintext);
unset($html3);
$output[] = $item;
$i++;
}
if (count($html2->find('center')) > 1) {
// ok, multi-page here, let's find out how many there are
$pagecount = count($html2->find('center',0)->find('a'))-1;
for ($i=1;$i<$pagecount; $i++) {
$startID = $i*20;
$newurl = html_entity_decode($fullurl."&beginrec=".$startID);
$html3 = file_get_html($newurl);
$titles = $html3->find('.tekst');
$images = $html3->find('.plaatje');
$a=0;
foreach ($images as $image) {
$item['title'] = $titles[$a]->find('p',0)->plaintext;
$item['image'] = 'http://pinesite.com'.str_replace('thumb_','',$image->find('img',0)->src);
$item['thumb'] = resize($item['image'],array("w"=>225, "h"=>150));
$output[] = $item;
$a++;
}
$html3->clear();
unset ($html3);
}
}
echo json_encode($output); 
```

那么它应该做什么（并且对某些类别做）：从这个页面输出图像、标题和缩略图：http: [//pinesite.com](http://pinesite.com)

例如，如果您将其传递给“?function=images&subcat=antiek”，则此方法有效，但如果您将其传递给“?function=images&subcat=stoelen”，则无效。我什至不认为这是远程页面的问题，所以我的代码中一定有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:52:26.590

事实证明，我的代码完全没问题，它是远程站点的 HTML 中缺少的空间，导致 Simple PHP DOM Parser 无法识别我正在寻找的 iframe。我通过首先在代码上运行 str_replace 以替换错误代码来修复它。

我知道这是一个肮脏的解决方案，但它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:34:35.370

嗯..试图说明明显的可能但“偷窃”？

# xml - xml文件导入失败

> ID：10465708
> 
> 赞同：-1
> 
> 时间：2012-05-05T20:27:02.393
> 
> 标签：xml, excel, import

我正在尝试从 drugbank 下载转换 xml 文件。每当我尝试在 excel 2007 中导入它时，它都会说无法导入。也许是因为尺寸。谁能建议我是否可以通过其他任何方式打开此文件，以便将其保存为制表符分隔符？它的第一个文件（所有药物，包括目标、转运、载体和酶信息）在这里，[http://www.drugbank.ca/downloads](http://www.drugbank.ca/downloads) xml 格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:54:30.603

这是对我原始答案的完全重写。

对于我最初的答案，我对 drugbank.xml 进行了有限的分析。我有点犹豫，但表示结构太复杂，无法转换为任何标准的制表符分隔文件。我的意思是一个可以由任何标准程序处理的制表符分隔文件。我支持该声明，但可以创建一个可能有用的非标准分隔文件。

下表显示了 drugbank.xml 的结构。

这些列是索引、级别、名称、父级和重复。对于元素 drug 和 partner，Repeats 是实际的重复数。对于其他元素，它是其父元素出现中的最大重复次数。

```
Inx Lvl Name------------------------------------ Pnt Repeats
  1   1   drugs                                    0       1
  2   2     drug                                   1    6711
  3   3       drugbank-id                          2       1
  4   3       name                                 2       1
  5   3       description                          2       1
  6   3       cas-number                           2       1
  7   3       general-references                   2       1
  8   3       synthesis-reference                  2       1
  9   3       indication                           2       1
 10   3       pharmacology                         2       1
 11   3       mechanism-of-action                  2       1
 12   3       toxicity                             2       1
 13   3       biotransformation                    2       1
 14   3       absorption                           2       1
 15   3       half-life                            2       1
 16   3       protein-binding                      2       1
 17   3       route-of-elimination                 2       1
 18   3       volume-of-distribution               2       1
 19   3       clearance                            2       1
 20   3       secondary-accession-numbers          2       1
 21   4         secondary-accession-number        20       5
 22   3       groups                               2       1
 23   4         group                             22       3
 24   3       taxonomy                             2       1
 25   4         kingdom                           24       1
 26   4         substructures                     24       1
 27   5           substructure                    26      35
 28   3       synonyms                             2       1
 29   4         synonym                           28      82
 30   3       salts                                2       1
 31   4         salt                              30      17
 32   3       brands                               2       1
 33   4         brand                             32     230
 34   3       mixtures                             2       1
 35   4         mixture                           34     340
 36   5           name                            35       1
 37   5           ingredients                     35       1
 38   3       packagers                            2       1
 39   4         packager                          38     173
 40   5           name                            39       1
 41   5           url                             39       1
 42   3       manufacturers                        2       1
 43   4         manufacturer                      42      91
 44   3       prices                               2       1
 45   4         price                             44     172
 46   5           description                     45       1
 47   5           cost                            45       1
 48   5           unit                            45       1
 49   3       categories                           2       1
 50   4         category                          49      11
 51   3       affected-organisms                   2       1
 52   4         affected-organism                 51       3
 53   3       dosages                              2       1
 54   4         dosage                            53      22
 55   5           form                            54       1
 56   5           route                           54       1
 57   5           strength                        54       1
 58   3       atc-codes                            2       1
 59   4         atc-code                          58      36
 60   3       ahfs-codes                           2       1
 61   4         ahfs-code                         60      11
 62   3       patents                              2       1
 63   4         patent                            62       5
 64   5           number                          63       1
 65   5           country                         63       1
 66   5           approved                        63       1
 67   5           expires                         63       1
 68   3       food-interactions                    2       1
 69   4         food-interaction                  68       6
 70   3       drug-interactions                    2       1
 71   4         drug-interaction                  70     246
 72   5           drug                            71       1
 73   5           name                            71       1
 74   5           description                     71       1
 75   3       protein-sequences                    2       1
 76   4         protein-sequence                  75      10
 77   5           header                          76       1
 78   5           chain                           76       1
 79   3       calculated-properties                2       1
 80   4         property                          79      18
 81   5           kind                            80       1
 82   5           value                           80       1
 83   5           source                          80       1
 84   3       experimental-properties              2       1
 85   4         property                          84       4
 86   5           kind                            85       1
 87   5           value                           85       1
 88   5           source                          85       1
 89   3       external-identifiers                 2       1
 90   4         external-identifier               89      13
 91   5           resource                        90       1
 92   5           identifier                      90       1
 93   3       external-links                       2       1
 94   4         external-link                     93       4
 95   5           resource                        94       1
 96   5           url                             94       1
 97   3       targets                              2       1
 98   4         target                            97     144
 99   5           actions                         98       1
100   6             action                        99       2
101   5           references                      98       1
102   5           known-action                    98       1
103   3       enzymes                              2       1
104   4         enzyme                           103      19
105   5           actions                        104       1
106   6             action                       105       3
107   5           references                     104       1
108   3       transporters                         2       1
109   4         transporter                      108      24
110   5           actions                        109       1
111   6             action                       110       3
112   5           references                     109       1
113   3       carriers                             2       1
114   4         carrier                          113       6
115   5           actions                        114       1
116   6             action                       115       1
117   5           references                     114       1
118   2     partners                               1       1
119   3       partner                            118    4227
120   4         name                             119       1
121   4         general-function                 119       1
122   4         specific-function                119       1
123   4         gene-name                        119       1
124   4         locus                            119       1
125   4         reaction                         119       1
126   4         signals                          119       1
127   4         cellular-location                119       1
128   4         transmembrane-regions            119       1
129   4         theoretical-pi                   119       1
130   4         molecular-weight                 119       1
131   4         chromosome                       119       1
132   4         species                          119       1
133   5           category                       132       1
134   5           name                           132       1
135   5           uniprot-name                   132       1
136   5           uniprot-taxon-id               132       1
137   4         essentiality                     119       1
138   4         references                       119       1
139   4         external-identifiers             119       1
140   5           external-identifier            139       9
141   6             resource                     140       1
142   6             identifier                   140       1
143   4         synonyms                         119       1
144   5           synonym                        143      38
145   4         protein-sequence                 119       1
146   5           header                         145       1
147   5           chain                          145       1
148   4         gene-sequence                    119       1
149   5           header                         148       1
150   5           chain                          148       1
151   4         pfams                            119       1
152   5           pfam                           151      15
153   6             identifier                   152       1
154   6             name                         152       1
155   4         go-classifiers                   119       1
156   5           go-classifier                  155      49
157   6             category                     156       1
158   6             description                  156       1 
```

我有一个实用程序，它是为无法处理发送的大量 XML 文档的客户开发的。我将选定的信息提取到一个分隔文件中。尽管这些 XML 文档非常庞大，但结构很简单，在 2 级元素中没有重复。我想知道是否可以增强实用程序以接受重复并将数据输出到分隔文件，尽管是非标准分隔文件。我现在知道我可以，虽然我不确定分隔文件有多大用处。

我的输出有 97 列，每个叶子元素一列。有六个标题行，每个级别一个。其中列出了叶元素及其父元素。当一个元素重复时，该值将放置在下一个可用行上。我希望前三个药物文件的行中的几列可以说明这一点。请注意，此显示的第 61 列已被截断。

```
|Column 1   |Column 2    |Column 18                  |Column 25  |Column 56                   |Column 60 |Column 61                     |Column 62   |
|drugs      |drugs       |drugs                      |drugs      |drugs                       |drugs     |drugs                         |drugs       |
|drug       |drug        |drug                       |drug       |drug                        |drug      |drug                          |drug        |
|drugbank-id|name        |secondary-accession-numbers|mixtures   |external-identifiers        |targets   |targets                       |targets     |
|           |            |secondary-accession-number |mixture    |external-identifier         |target    |target                        |target      |
|           |            |                           |name       |resource                    |actions   |references                    |known-action|
|           |            |                           |           |                            |action    |                              |            |
|DB00001    |Lepirudin   |BIOD00024                  |           |Drugs Product Database (DPD)|inhibitor |# Turpie AG: Anticoagulants in|yes         |
|           |            |BTD00024                   |           |National Drug Code Directory|          |                              |            |
|           |            |                           |           |PharmGKB                    |          |                              |            |
|           |            |                           |           |UniProtKB                   |          |                              |            |
|DB00002    |Cetuximab   |BIOD00071                  |           |National Drug Code Directory|antagonist|# Hosokawa N, Yamamoto S, Ueha|yes         |
|           |            |BTD00071                   |           |GenBank                     |          |# Snyder LC, Astsaturov I, Wei|unknown     |
|           |            |                           |           |PharmGKB                    |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Negri DR, Tosi E, Valota O, |unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|           |            |                           |           |                            |          |# Overington JP, Al-Lazikani B|unknown     |
|DB00003    |Dornase Alfa|BIOD00001                  |Cauterex   |Drugs Product Database (DPD)|          |# Cramer GW, Bosso JA: The rol|yes         |
|           |            |BTD00001                   |Clorfibrase|GenBank                     |          |                              |            |
|           |            |                           |Elase      |PharmGKB                    |          |                              |            |
|           |            |                           |Fibrabene  |UniProtKB                   |          |                              |            |
|           |            |                           |Fibrase SA |                            |          |                              |            |
|           |            |                           |Fibrolan   |                            |          |                              |            |
|           |            |                           |Parkelase  |                            |          |                              |            |
|           |            |                           |Ridasa     |                            |          |                              |            |
|           |            |                           |           |                            |          |                              |            | 
```

结果文件有 135,713 行，长度为 52,171,387 字节。这或一些简单的变化会有用吗？

# android - oncreateoptionsmenu 的操作

> ID：10465713
> 
> 赞同：0
> 
> 时间：2012-05-05T20:27:21.763
> 
> 标签：android

使用以下我得到菜单。但是如何在选择菜单时采取任何行动，任何人都可以帮助我。提前致谢。

```
 public boolean OnCreateOptionsMenu(Menu menu){
    menu.add(1, 200, 0, "snapshot");
            menu.add("more");
            menu.add("exit");
    return super.onCreateOptionsMenu(menu);
    } 
```

是否可以使用以下方法进行操作。但是使用以下内容时布局不会加载

```
public boolean OnOptionsItemsSelected(MenuItem item){
    switch(item.getItemId()){
    case 200: setContentView(R.layout.main2);
    return true;
    }
    return super.onOptionsItemSelected(item);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:33:30.600

第 1 步：重命名`OnCreateOptionsMenu()`为`onCreateOptionsMenu()`，因为 Java 区分大小写。

步骤 #2：重命名`OnOptionsItemsSelected()`为`onOptionsItemSelected()`，因为 Java 区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:40:00.530

是的你可以！我相信您只是输入错误的函数名称。这段代码对我来说很好：

```
public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(1, 200, 0, "snapshot");
        menu.add("more");
        menu.add("exit");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case 200:
                 setContentView(R.layout.main2);
                 return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

# javascript - 这是什么编码？

> ID：10465714
> 
> 赞同：0
> 
> 时间：2012-05-05T20:27:28.303
> 
> 标签：javascript, xml, jena, dbpedia

我使用 jena 从 dbpedia 获得了一些数据，并且由于 jena 的输出基于 xml，因此在某些情况下需要对 xml 字符进行不同的处理，如下所示：

```
Guns n &amp;#039; Roses 
```

我只是想知道这是什么类型的econding？我想在javascript的帮助下根据上面的encode（r）对我的输入进行解码/编码并将其发送回servlet。

（编辑后的帖子，如果您删除 & 和 amp 之间的空格，您将获得正确的字符，因为在 stackoverflow 中我找不到这样做的方法，我决定这样做！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:29:34.140

似乎是 XML 实体编码，以及*数字字符引用*（十进制）。

> 数字字符引用通过其[通用字符集](http://en.wikipedia.org/wiki/Universal_Character_Set)/ [Unicode](http://en.wikipedia.org/wiki/Unicode)代码点引用字符，并使用格式

您可以在此处获取一些信息：[Wikipedia 上的 XML 和 HTML 字符实体引用列表](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)。

你的字符是数字 39，是撇号：`'`，也可以用*字符实体引用*:来引用`&apos;`。

要使用 Javascript 对此进行解码，您可以使用 example [`php.js`](http://phpjs.org/)，它具有一个[`html_entity_decode()`](http://phpjs.org/functions/html_entity_decode:424)函数（请注意，它取决于[get_html_translation_table()](http://phpjs.org/functions/get_html_translation_table:416)）。

* * *

**更新**：回复您的编辑：基本上是一样的，唯一的区别是它被*编码了两次*（可能是错误的）。`&amp;`是和号：`&`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:29:27.743

这是一个 SGML/HTML/XML 数字[字符实体参考](http://en.wikipedia.org/wiki/Character_entity_reference)。

在这种情况下为撇号`'`。

# c++ - 2-组合C++

> ID：10465716
> 
> 赞同：-1
> 
> 时间：2012-05-05T20:27:29.660
> 
> 标签：c++, combinations

我有一个包含 n 个元素的数组，我需要将它们的所有 2-组合放入长度为 2 的数组中。例如：

假设 comb 是一个二维数组。

```
n = 1,2,3 
```

我需要像这样将所有 2-组合放入 comb[i][j] 中：

```
comb[0][0] = {1}
comb[0][1] = {2}

comb[1][0] = {1}
comb[1][1] = {3}

comb[2][0] = {2}
comb[2][1] = {3} 
```

我不知道怎么写代码！谢谢

我的答案：

O(n!) 答案：n = 总数 m= 可能的答案总数

```
int m = 0;
for (int i = 0; i < n - 1; i++){
    int first = a[i];
    for(int j = i+1 ; j < n ; j++){
        int second = a[j];
        comb[m][0] = first;
        comb[m][1] = second;
        ++m;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:02:14.377

可以想到以下N^2的做法：

```
// Resulting combinations
vector<pair<int,int> > comb;
// Copy n into a double-ended queue - best would be for n to already be a deque
deque<int> Q(a.size());
copy(a.begin(), a.end(), Q.begin());
sort(Q.begin(), Q.end());

while(!Q.empty())
{
   // Get first element, remove it and equivalent elements
   int a = Q.front();
   while(Q.front() == a)
       Q.pop_front();

   // Find all unique combinations with first element
   int last=a;
   for(deque<int>::iterator it = Q.begin(); it != Q.end(); ++it)
   {
       if(*it != last)
           comb.push_back(pair<int,int>(a,*it));
        last = *it;
   }
} 
```

可能很容易进一步优化这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:37:19.993

对于`n`索引 ith 中的每个元素，将`n`除第 i 个索引 jth 之外的所有元素放入 cell 中`comb[length(n) - i][j]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:39:59.390

一种简单的方法是使用`next_permutation`STL 库中提供的函数来生成数字的所有可能排列，然后选择每个排列的前两个元素。请注意，必须首先对序列进行排序，好像不会跳过先前的排列。

```
int nums[] = {1, 2, 3, 4};
while (next_permutation(nums, nums + 4)) {
    cout << nums[0] << ", " << nums[1] << endl;
} 
```

请记住，您必须`#include <algorithm>`使用此功能。

# java - 将元数据添加到使用 jgraph 创建的 xml

> ID：10465726
> 
> 赞同：-4
> 
> 时间：2012-05-05T20:28:59.180
> 
> 标签：java

我使用`JGraph`Java 创建 Petri 网的图形表示，然后将其导出为 XML。有什么方法可以将我自己的文本添加到 xml 中吗？我需要在那里创建诸如元数据之类的东西，特别是，谁创建了网络，何时创建等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:48:04.050

我刚刚尝试了以下方法，它可以工作。

*   创建图表
*   将其保存为 XML
*   使用记事本打开 XML 并更改一些文本值
*   在 JGraph 中，导入更新的文件
*   图纸应显示更新的文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:47:44.270

您可以在父节点中存储一些数据（请注意，这是未经测试的）：

```
((mxCell) ((mxGraphModel)graph.getModel()).getCell("0") ).setAttribute("tagname", "your"); 
```

如果存储一个字符串对您来说就足够了，那么这绝对有效：

```
((mxCell) ((mxGraphModel)graph.getModel()).getCell("0") ).setValue("your text");
String text = (String) ((mxCell) ((mxGraphModel)graph.getModel()).getCell("0") ).getValue(); 
```

# smpp - jSMPP 中的“deliver_sm_resp”命令

> ID：10465728
> 
> 赞同：1
> 
> 时间：2012-05-05T20:29:21.097
> 
> 标签：smpp, jsmpp

我想使用[jSMPP](https://jsmpp.org/)来实现[SMSC](https://en.wikipedia.org/wiki/Short_Message_service_center)的 Receiver Listener 。所以我想实现`MessageRecieverListener`and 方法`onAcceptDeliverSm`，但是根据 SMPP[规范](http://opensmpp.org/specifications.html)，应用程序应该作为对命令`deliver_sm_resp`的响应发送。`deliver_sm`

这将如何通过 jSMPP 完成，这是由 jSMPP 库在幕后执行的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:58:24.773

我在生产中使用 jSMPP。这个库最好的一点是，许多低级的事情发生在幕后，`deliver_sm_resp`而且:-)

和命令`enquery_link`也`enquery_link_resp`发生在幕后，您还可以在创建这样的命令时配置此命令的超时`SMPPSession`：

```
SMPPSession tmpSession = new SMPPSession();
tmpSession.setTransactionTimer(transactionTimer);
tmpSession.setEnquireLinkTimer(enquireLinkTimer);
tmpSession.addSessionStateListener(new SessionStateListenerImpl());

MessageReceiverListenerImpl mrl = new MessageReceiverListenerImpl();
tmpSession.setMessageReceiverListener(mrl);

tmpSession.connectAndBind(remoteIpAddress, remotePort, bindParam); 
```

`transactionTimer`和的值`enquireLinkTimer`存储在属性文件中。

jSMPP 是非常酷的库，我喜欢它 :-)

# c# - 在没有 IDynamicMetaObject 的 c# 中动态？

> ID：10465729
> 
> 赞同：2
> 
> 时间：2012-05-05T20:29:21.520
> 
> 标签：c#, .net, dynamic, clr

> 一个对象可以通过实现 IDynamicMetaObject Provider 来提供它的绑定语义，或者更容易地通过继承 DynamicObject 来提供这个接口的默认实现。

[来源](http://my.safaribooksonline.com/book/-/9781449334192/chapter-20dot-dynamic-programming/implementing_dynamic_objects)

我从来没有实现过这个接口和类，并且总是能够动态地执行事情：

```
public class aa
    {
        public void bbb()
        {  }
    }

dynamic a = new aa().bbb(); 
```

那么这句话是什么意思呢？

*我试图了解何时需要使用 IDynamicMetaObject 或 DynamicObject 继承*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:32:59.583

该`dynamic`关键字导致对对象的引用是后期绑定的，并且仅在运行时解析。通常，这样做的原因是因为您使用的是`IDynamicMetaObjectProvider`实现程序，它允许您的代码决定如何处理运行时属性解析。也就是说，您可能希望在运行时添加和删除属性（通常实现为字典，如`ExpandoObject`）。

您的示例代码所做的只是防止编译类型类型检查。事实上，这比什么都不做更糟糕，因为如果您编写的代码访问了类的不存在的属性或方法，它仍然可以编译，但在运行时当然会崩溃。我想不出很多很好的理由来引用具体的类`dynamic`（期待 squishy 类型转换或鸭子类型，但我们通常在 C# 中使用接口来处理类似的东西！）

`DynamicObject`从我自己的项目之一继承的动态对象的示例实现：

[https://github.com/jamietre/IQObjectMapper/blob/master/source/IQObjectMapper/IQDynamicObject.cs](https://github.com/jamietre/IQObjectMapper/blob/master/source/IQObjectMapper/IQDynamicObject.cs)

（它调用了一个工厂方法，该方法返回一个带有选项的新字典，您需要做的就是使这个非依赖项改变构造函数：

```
InnerDict = ObjectMapper.MapperCache.GetDictionary<object>(Options); 
```

到：

```
InnerDict = new Dictionary<string,object>(); 
```

并摆脱一些检查选项的条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:58:10.863

我讨厌这样给出“精辟”的答案，因为它的信息量不是很大，但这确实是“如果你需要它，你就会知道”的情况。

很少需要在应用程序甚至大多数库代码中*实现动态对象。*该接口适用于实现*只能*用作动态对象的类的人；例如，如果你想在你的对象上实现类似 Javascript 的行为。您可以在此类对象上调用您想要的任何属性或方法，它会编译。由您在运行时的实现来确定给定的调用是否有效。

一个完全没有意义但具有描述性的示例是一个根据星期几决定哪些属性有效的类：

```
public class WeekendObject : DynamicObject
{
  Dictionary<string, object> propertybag = new Dictionary<string, object>();      

  public override bool TryGetMember(GetMemberBinder binder, out object result)
  {
    if (DateTime.Now.DayOfWeek == DayOfWeek.Sunday)
    {
      if (name.StartsWith("Sunday"))
      {
        return propertybag.TryGetValue(name, out result);
      }
    }
    else
    {
      if (!name.StartsWith("Sunday"))
      {
        return propertybag.TryGetValue(name, out result);
      }
    }
  }

  public override bool TrySetMember(SetMemberBinder binder, object value)
  {
    if (DateTime.Now.DayOfWeek == DayOfWeek.Sunday)
    {
      if (name.StartsWith("Sunday"))
      {
        propertybag[binder.Name.ToLower()] = value;
        return true;
      }
    }
    else
    {
      if (!name.StartsWith("Sunday"))
      {
        propertybag[binder.Name.ToLower()] = value;
        return true;
      }
    }

    return false;
  }
} 
```

# asp.net-mvc - 如何将带有 devexpress 元素的部分视图正确加载到 extjs 面板中

> ID：10465734
> 
> 赞同：0
> 
> 时间：2012-05-05T20:29:52.003
> 
> 标签：asp.net-mvc, extjs4, devexpress

我想知道是否可以使用 devexpress 元素制作局部视图以在 Extjs 面板中正常工作。到目前为止，我设法将partialview加载到Extjs面板中。所有devexpress控件都以正确的方式呈现，但是似乎devexpress的整个客户端功能都消失了-悬停，单击等没有反应。这是我的代码

```
 //loading partialView
     Ext.getCmp('centerPanel').body.load({ url: 'Home/TempView',scripts:true})

//controller
 public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            return View();
        }

        public PartialViewResult TempView()
        {
            return PartialView();
        }    

    }

//TempView
<div>
    @Html.Partial("ToolBarView");
</div>

//ToolBarView
@using DevExpress.Web.Mvc.UI

 @Html.DevExpress().ReportToolbar(settings => {
    // The following settings are necessary for a Report Toolbar. 
    settings.Name = "ReportToolbar";
    settings.ReportViewerName = "reportViewer1";
    }).GetHtml() 
```

有什么办法让它工作吗？这是我的应用程序 [http://www.sendspace.pl/file/591cd7a07e43f15a22759b2](http://www.sendspace.pl/file/591cd7a07e43f15a22759b2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:57:33.950

使用 ExtJS`contentEl`属性，您可以在面板中包含任何内容。

```
//index.cshtml
<div id="dxGrid">
    @Html.Partial("GridViewPartialView")
</div>

//GridViewPartialView.cshtml
@Html.DevExpress().GridView(settings =>
{
    settings.Name = "DevExGrid";
    settings.CallbackRouteValues = new { Controller = "Home", Action = "GridViewPartialView" };
    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.ClientSideEvents.EndCallback = "function(s, e) { endSizeGrid(s); }";
}).Bind(Model).GetHtml()

//ExtJS code
Ext.create('Ext.panel.Panel', {
    contentEl: 'dxGrid',
    id: 'gridContainer',
    title: 'Devexpress inside ExtJS'
}); 
```

请记住，如果您调整面板大小，您需要手动调整 DevEx 网格的大小。您可以通过在面板上设置一个带有 DevEx 控件的侦听器来实现此目的。

```
listeners: {
    resize: function () {
        adjustGridSize(this, DevExGrid);
    }
} 
```

当您与 DevEx 控件交互时，它也会调整大小，这就是为什么您需要指定一个名为`EndCallBack`.

调整大小函数的实现如下所示：

```
function endSizeGrid(sender) {
        var el = Ext.get("gridContainer");
        adjustGridSize(el, sender);
};
function adjustGridSize(aGridPnl, aGridView) {
    aGridView.SetHeight(aGridPnl.getHeight());
    aGridView.SetWidth(aGridPnl.getWidth());
}; 
```

我希望这会对某人有所帮助。

# java - 在 JPopupmenu 中对齐图标和 JCheckbox

> ID：10465736
> 
> 赞同：4
> 
> 时间：2012-05-05T20:30:05.590
> 
> 标签：java, swing, jcheckbox, imageicon, jmenuitem

我有一些图标和复选框的问题`JPopupMenu`。复选框和图标未对齐

项目的创建方式如下：

```
JMenuItem deleteAttributeMenuItem = new JMenuItem(locale.getString("TREE_AttrDelete"), iconDelete);

JMenuItem primaryKeyAttributeMenuItem = new JCheckBoxMenuItem(locale.getString("TREE_AttrChkBoxPK")); 
```

请看一下图片：

![在此处输入图像描述](../Images/aa2934e14c224a540c98f58cf3afb462.png)

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:54:19.693

现在我找不到正确的方法来重新布局 JCheckBoxMenuItem，

但是您是否同意 Swing 使用（默认）Metal Look and Feel 的这个标准输出？？？，只是为了避免使用其他 Look and Feel(s) 来避免任何误解，因为 Swing 的 Standard Look 之间的 API 存在一些差异和感觉太

![在此处输入图像描述](../Images/80422db96a6c20dc96d8a4aa09b13ab3.png)

从教程代码（修改和删除镇流器和噪音）

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MenuLookDemo {

    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon warnIcon = UIManager.getIcon("OptionPane.warningIcon");
    private JTextArea output;
    private JScrollPane scrollPane;
    private JMenuBar menuBar;
    private JMenu menu;
    private JMenuItem menuItem;
    private JRadioButtonMenuItem rbMenuItem;
    private JCheckBoxMenuItem cbMenuItem;

    public JMenuBar createMenuBar() {
        menuBar = new JMenuBar();
        menu = new JMenu("A Menu");
        menu.getAccessibleContext().setAccessibleDescription("The only menu in this program that has menu items");
        menuBar.add(menu);
        menuItem = new JMenuItem("A text-only menu item", KeyEvent.VK_T);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_1, ActionEvent.ALT_MASK));
        menuItem.getAccessibleContext().setAccessibleDescription("This doesn't really do anything");
        menu.add(menuItem);
        menuItem = new JMenuItem("Both text and icon", errorIcon);
        menu.add(menuItem);
        menu.addSeparator();
        ButtonGroup group = new ButtonGroup();
        rbMenuItem = new JRadioButtonMenuItem("A radio button menu item");
        rbMenuItem.setSelected(true);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);
        rbMenuItem = new JRadioButtonMenuItem("Another one", infoIcon);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);
        menu.addSeparator();
        cbMenuItem = new JCheckBoxMenuItem("A check box menu item", warnIcon);
        menu.add(cbMenuItem);
        cbMenuItem = new JCheckBoxMenuItem("Another one");
        menu.add(cbMenuItem);
        menu.addSeparator();
        return menuBar;
    }

    public Container createContentPane() {
        JPanel contentPane = new JPanel(new BorderLayout());
        contentPane.setOpaque(true);
        output = new JTextArea(5, 30);
        output.setEditable(false);
        scrollPane = new JScrollPane(output);
        contentPane.add(scrollPane, BorderLayout.CENTER);
        return contentPane;
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("MenuLookDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        MenuLookDemo demo = new MenuLookDemo();
        frame.setJMenuBar(demo.createMenuBar());
        frame.setContentPane(demo.createContentPane());
        frame.setSize(450, 260);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

这些方法以像素为单位讨论位置

![在此处输入图像描述](../Images/b1f8bc9afe0f2b29ae42a8067170e5c2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T16:21:38.683

看看这个，为了达到你想要的，我做了这个，

```
JCheckBoxMenuItem cbmi = new JCheckBoxMenuItem("Check Me", null, true);
cbmi.setMargin(new java.awt.Insets(5, 25, 5, 5));
cbmi.setIconTextGap(15);
cbmi.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
helpMenu.add(cbmi); 
```

这是所说的东西的输出：

![在此处输入图像描述](../Images/d32a83746a540c190892845ca57bdab9.png)

# javascript - ABCpdf 可以从使用 Javascript 创建的页面创建 PDF 吗？

> ID：10465742
> 
> 赞同：1
> 
> 时间：2012-05-05T20:30:40.160
> 
> 标签：javascript, html, pdf, abcpdf

我网站的访问者可以单击“打印预览”按钮。Javascript 代码打开一个窗口并使用 document.writelin() 将创建一个显示动态内容的 html 页面（基本上，用户正在查看报告。这是向您展示我的意思的代码片段：

```
printerWindow = window.open("");  
printerWindow.document.writeln("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0   Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");  
printerWindow.document.writeln("<html>");  
printerWindow.document.writeln("<head>");  
printerWindow.document.writeln("<title>Report Title</title>");  
printerWindow.document.writeln("<link href='./css/schedule_print_preview.css'  type='text/css' rel='stylesheet'>");  
printerWindow.document.writeln("<link href='./css/schedule_printer.css' rel='stylesheet' type='text/css' media='print'>");  
printerWindow.document.writeln("<script type='text/javascript'>");  
printerWindow.document.writeln("function printcalc() {");  
printerWindow.document.writeln("window.print();");  
printerWindow.document.writeln("};");  
printerWindow.document.writeln("<\/script>");  
printerWindow.document.writeln("</head>");  
printerWindow.document.writeln("<body>");  
printerWindow.document.writeln("<div class='btns'>"); 
```

{...}

我想在此页面上包含一个“下载 PDF”链接，以便访问者可以将报告保存为 PDF。

ABCpdf 8.1可以做到这一点吗？（我正在评估它。）我遇到的问题是找出最接近我需要做的例子。有什么建议么？TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:49:04.377

我想你应该可以。c# 中有一些设置会有所帮助。

您需要设置

```
doc.HtmlOptions.UseScript = true; 
```

这将使 javascript 能够运行。

可能值得设置超时以使其有更多时间完成加载

```
doc.HtmlOptions.Timeout = 10000; 
```

并且我总是使用壁虎渲染引擎获得更好的结果

```
doc.HtmlOptions.Engine = EngineType.Gecko; 
```

# iphone - “ExtAudioFileWriteAsync -50”表示什么错误？

> ID：10465743
> 
> 赞同：0
> 
> 时间：2012-05-05T20:30:51.543
> 
> 标签：iphone, objective-c, ios, c, core-audio

我正在尝试从 AUGraph 的输出流中写入 AAC 文件，并且在播放时我的文件只播放嗡嗡声，并且出现错误`ExtAudioFileWriteAsync -50`。

我想知道这意味着什么，以便我可以搜索并解决问题。

感谢任何可以勾搭兄弟的 Core Audio 忍者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:48:38.030

万一其他人有这个问题，这`-50 error`是一个`kAudio_ParamError error`，在 CoreAudioTypes.h 中定义。

因此，传递给的参数之一`ExtAudioFileWriteAsync`必须是错误的。

# python - 如何在 Python 中创建白色图像？

> ID：10465747
> 
> 赞同：33
> 
> 时间：2012-05-05T20:31:34.687
> 
> 标签：python, numpy, scipy

在做作业时，我偶然发现了一个关于 Python 和图像处理的问题。我必须说，使用 Image lib 不是一种选择。所以这里

```
from scipy.misc import imread,imsave
from numpy import zeros

imga = zeros([100,100,3])
h = len(imga)
w = len(imga[0])

for y in range(h):
    for x in range(w):
        imga[y,x] = [255,255,255]

imsave("Result.jpg",imga) 
```

我会假设它使我的图片变白，但它变成黑色，我不知道为什么这与代码无关（而且我知道它看起来非常难看）。它只是关于事实，它是一个黑色图像。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-06T12:28:46.603

图像中的每种颜色都由一个字节表示。所以要创建一个图像数组，你应该将它的 dtype 设置为 uint8。

而且，您不需要 for-loop 将每个元素设置为 255，您可以使用 fill() 方法或切片索引：

```
import numpy as np
img = np.zeros([100,100,3],dtype=np.uint8)
img.fill(255) # or img[:] = 255 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-29T09:16:32.183

简单的！检查以下代码：

```
whiteFrame = 255 * np.ones((1000,1000,3), np.uint8) 
```

`255`是填充字节的颜色。

`1000`,`1000`是图像的大小。

`3`是图像的颜色通道。

并且`unit8`是类型

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:41:53.893

创建imga时，需要设置单位类型。具体来说，更改以下代码行：

```
imga = zeros([100,100,3], dtype=np.uint8) 
```

并且，将以下内容添加到您的导入中：

```
import numpy as np 
```

这在我的机器上给出了一个白色的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-09T21:46:01.170

就这个问题的标题而言，我确实需要一个白色图像以及一个枕头输入。这里提出的解决方案对我不起作用。

因此，这里有一种不同的方式来生成用于其他目的的白色图像：

```
from PIL import Image
img = Image.new('RGB', (200, 50), color = (255,255,255)) 
```

大小和颜色可以在 Image.new() 函数的第二个和第三个参数中更改。

如果你想在这张图片上写一些东西或保存它，这将是示例代码。

```
from PIL import ImageFont, ImageDraw
fnt = ImageFont.truetype("Pillow/Tests/fonts/FreeMono.ttf", 30)
ImageDraw.Draw(img).text((0,0), "hello world", font=fnt, fill=(0,0,0))
img.save('test.jpg') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T18:04:57.423

标题太宽泛，首先出现在 Google 上。我需要一张白色图像并使用 PIL 和 numpy。PILlow 实际上适用于 numpy

```
import numpy as np
from PIL import Image
img = np.zeros([100,100,3],dtype=np.uint8)
img.fill(255) # numpy array!
im = Image.fromarray(img) #convert numpy array to image
im.save('whh.jpg') 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-07-19T10:45:35.357

```
# Create an array with a required colours
# The colours are given in BGR [B, G, R]
# The array is created with values of ones, the size is (H, W, Channels)
# The format of the array is uint8
# This array needs to be converted to an image of type uint8

selectedColor = [75, 19, 77] * np.ones((640, 480, 3), np.uint8)
imgSelectedColor = np.uint8(np.absolute(selectedColor)) 
```

# php - Linux 上的意外 T_STRING

> ID：10465750
> 
> 赞同：0
> 
> 时间：2012-05-05T20:31:55.043
> 
> 标签：php, linux, zend-framework, doctrine

我刚刚将我的 Zend 项目上传到我的 CentOS 服务器。我正在使用 Doctrine ORM，因此这需要我说明我正在使用的命名空间。

我的项目在我的 Windows 机器上运行良好，但是当我尝试在服务器上运行它时，我得到了

```
Parse error: syntax error, unexpected T_STRING, expecting T_CONSTANT_ENCAPSED_STRING or '(' in ************/Bootstrap.php on line 2 
```

错误。第 2 行是

```
use Doctrine\ORM\EntityManager,
Doctrine\ORM\Configuration; 
```

我对 Linux 还很陌生，也许我认为是 Linux 有问题是错误的，那么我该如何解决这个错误呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T20:34:55.353

更新 PHP。PHP >= 5.3 支持命名空间，您的服务器上可能安装了低于此的版本。

# javafx-2 - 如何为 JavaFX 2.0 中的按钮和其他元素创建外观（fxml）？

> ID：10465752
> 
> 赞同：1
> 
> 时间：2012-05-05T20:32:09.957
> 
> 标签：javafx-2, skinning, fxml, skins

我想知道是否有人拥有或知道一个链接，我可以从中学习或查看如何使用 JavaFX 2.0 中的 fxml 文件为按钮、单选按钮、滚动条等创建皮肤。

我有这个学校作业，我希望它做得很好，所以我试着做一个像公司应用程序一样的东西，用按钮和其他元素的皮肤。

我真的很感激任何帮助。

[编辑] 大家好，已经有一段时间了，我现在对 JavaFX 有了更多的了解，现在当我回首往事时，我发现它听起来多么愚蠢，请原谅我的不尊重和糟糕的详细问题。无论如何，stackoverflow 确保我永远不会再问任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:12:53.683

您应该在询问之前先搜索一下网络。以下是我的一些结果，我花了一些功夫才发现：

*   首先，介绍[JavaFX 中的 Skinning Architecture](http://fxexperience.com/2009/06/skinning-architecture-in-javafx/)以了解发生了什么。
*   另一个关于[JavaFX 2.0 Layout: A Class Tour 的](http://amyfowlersblog.wordpress.com/2011/06/02/javafx2-0-layout-a-class-tour/)介绍，以了解 Group、Region 和 Control 之间的区别。由于 Control 实现了 Skinnable，您可能希望将此介绍添加到您的学士工作中。
*   这里首先尝试[JavaFX 2.0 Custom Control](http://www.drdobbs.com/blogs/jvm/229400781)。
*   最后，挖掘开源项目[JFXtras](http://jfxtras.org/)的代码。你会发现有一堆自定义控件作为参考。

# mysql - 使用 Mysql 的子查询（对 AGAINST 的参数不正确）

> ID：10465758
> 
> 赞同：4
> 
> 时间：2012-05-05T20:32:53.823
> 
> 标签：mysql, subquery, full-text-search, match-against

当我 使用 MySql使用 **MATCH AGAINST执行此****查询时（***请参阅查询 1st*），此查询中的问题会产生这样的错误（*请参阅错误*），或者当我使用**=** 他们正常执行相同的**查询时（***请参阅查询 2nd*）。

 *********我的问题是我对反对声明做错了什么？

> 查询第一个

```
SELECT (SELECT COUNT(up.`user_id`) 
FROM `users_post` up WHERE MATCH (up.`user_id`) AGAINST (uf.`user_id`)) 
AS user_count 
FROM `users` uf 
```

> 错误

```
enter code hereError Code : 1210
Incorrect arguments to AGAINST
(0 ms taken) 
```

**更新**

> 查询第二个

```
SELECT 
(SELECT COUNT(up.`user_id`) 
FROM `users_post` up WHERE up.`user_id` = uf.`user_id`) 
AS user_count 
FROM `users` uf 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T20:35:41.303

问题是 for 的参数`AGAINST`必须是文字字符串，例如`'Fred'`. 不允许使用类似的列名`uf.user_id`。

```
MATCH (up.`user_id`) AGAINST (uf.`user_id`)
--                            ^^^^^^^^^^^^ not allowed! 
```

从[文档](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html#function_match)中：

> 搜索字符串必须是文字字符串，而不是变量或列名。

您可能需要使用`LIKE`而不是`MATCH`，但您应该注意它会慢得多。*********

# php - 支持 Gmail IMAP 的 Webmail 客户端？

> ID：10465759
> 
> 赞同：0
> 
> 时间：2012-05-05T20:32:58.770
> 
> 标签：php, email, gmail, imap, gmail-imap

客户正在请求一个 Web 界面，他可以在其中接受或拒绝通过电子邮件提交给他的表单。我通常只会使用 Gmail，但我不需要该功能的一半。

我找到了 Roundcube，并进行了设置，但我无法让它从 Gmail 的服务器中获取 IMAP 设置。我还设置了我自己的，通过在 Hostgator 托管的服务器上使用 CPanel，但不行。

SMTP 设置工作正常：

```
Server: ssl://smtp.gmail.com
Port: 465
User: ****
Password: **** 
```

正在尝试发送电子邮件... SMTP 发送：好的

但是当我尝试使用 Gmail 的 IMAP 设置时，我收到以下错误：

```
Connecting to ssl://imap.gmail.com...
IMAP connect:  NOT OK(Login failed for **** from 74.110.63.15\. Could not connect to ssl://imap.gmail.com:993: Connection timed out) 
```

我尝试了多种方法，包括联系我的服务器以查看端口是否被阻止（不是），但没有任何效果。

我认为这可能只会发生在 Gmail 的 IMAP 服务器上，但是不，当我使用这些设置时，它也会给我这个错误。

我应该寻求以不同的方式做到这一点吗？

**编辑1：**从我的笔记本电脑 输出`telnet imap.gmail.com 993`终端

```
telnet imap.gmail.com 993
Trying 173.194.76.108...
Connected to gmail-imap.l.google.com.
Escape character is '^]'.
'^]'.
Connection closed by foreign host.
new-host-10:~ charlescarver$ 
```

**编辑2：** 确认服务器没有阻塞端口：

```
openssh
s_client -connect imap.gmail.com:993 
CONNECTED(00000003) 
... 
```

**编辑 3：**配置文件：

```
<?php

$rcmail_config = array();

$rcmail_config['debug_level'] = 1;

$rcmail_config['log_driver'] = 'file';

$rcmail_config['log_date_format'] = 'd-M-Y H:i:s O';

$rcmail_config['syslog_id'] = 'roundcube';

$rcmail_config['syslog_facility'] = LOG_USER;

$rcmail_config['smtp_log'] = true;

$rcmail_config['log_logins'] = true;

$rcmail_config['log_session'] = true;

$rcmail_config['sql_debug'] = true;

$rcmail_config['imap_debug'] = true;

$rcmail_config['ldap_debug'] = true;

$rcmail_config['smtp_debug'] = true;

$rcmail_config['default_host'] = 'ssl://imap.gmail.com';

$rcmail_config['default_port'] = 993;

$rcmail_config['imap_auth_type'] = 'PLAIN';

$rcmail_config['imap_delimiter'] = null;

$rcmail_config['imap_ns_personal'] = null;

$rcmail_config['imap_ns_other']    = null;

$rcmail_config['imap_ns_shared']   = null;

$rcmail_config['imap_force_caps'] = false;

$rcmail_config['imap_force_lsub'] = false;

$rcmail_config['imap_timeout'] = 0;

$rcmail_config['imap_auth_cid'] = null;

$rcmail_config['imap_auth_pw'] = null;

$rcmail_config['imap_cache'] = null;

$rcmail_config['messages_cache'] = false;

$rcmail_config['smtp_server'] = 'ssl://smtp.gmail.com';

$rcmail_config['smtp_port'] = 465;

$rcmail_config['smtp_user'] = 'email';

$rcmail_config['smtp_pass'] = 'pass';

$rcmail_config['smtp_auth_type'] = '';

$rcmail_config['smtp_auth_cid'] = null;

$rcmail_config['smtp_auth_pw'] = null;

$rcmail_config['smtp_helo_host'] = '';

$rcmail_config['smtp_timeout'] = 0;

$rcmail_config['enable_installer'] = true;

$rcmail_config['log_dir'] = 'logs/';

$rcmail_config['temp_dir'] = 'temp/';

$rcmail_config['message_cache_lifetime'] = '10d';

$rcmail_config['force_https'] = false;

$rcmail_config['use_https'] = false;

$rcmail_config['login_autocomplete'] = 0;

$rcmail_config['login_lc'] = false;

$rcmail_config['auto_create_user'] = true;

$rcmail_config['skin_logo'] = null;

$rcmail_config['skin_include_php'] = false;

$rcmail_config['session_lifetime'] = 10;

$rcmail_config['session_domain'] = '';

$rcmail_config['session_name'] = null;

$rcmail_config['session_storage'] = 'db';

$rcmail_config['memcache_hosts'] = null; 

$rcmail_config['ip_check'] = false;

$rcmail_config['referer_check'] = false;

$rcmail_config['x_frame_options'] = 'sameorigin';

$rcmail_config['des_key'] = '*fq85DV6dJy4ZDf0y_oj$Mw7';

$rcmail_config['username_domain'] = 'email';

$rcmail_config['mail_domain'] = '';

$rcmail_config['password_charset'] = 'ISO-8859-1';

$rcmail_config['sendmail_delay'] = 0;

$rcmail_config['max_recipients'] = 0; 

$rcmail_config['max_group_members'] = 0; 

$rcmail_config['useragent'] = 'Roundcube Webmail/'.RCMAIL_VERSION;

$rcmail_config['product_name'] = 'Requests';

$rcmail_config['include_host_config'] = false;

$rcmail_config['generic_message_footer'] = '';

$rcmail_config['generic_message_footer_html'] = '';

$rcmail_config['http_received_header'] = false;

$rcmail_config['http_received_header_encrypt'] = false;

$rcmail_config['mail_header_delimiter'] = NULL;

$rcmail_config['line_length'] = 72;

$rcmail_config['send_format_flowed'] = true;

$rcmail_config['dont_override'] = array();

$rcmail_config['identities_level'] = 0;

$rcmail_config['client_mimetypes'] = null;  

$rcmail_config['mime_magic'] = '/usr/share/misc/magic';

$rcmail_config['im_identify_path'] = null;

$rcmail_config['im_convert_path'] = null;

$rcmail_config['contact_photo_size'] = 160;

$rcmail_config['email_dns_check'] = false;

$rcmail_config['plugins'] = array();

$rcmail_config['message_sort_col'] = '';

$rcmail_config['message_sort_order'] = 'DESC';

$rcmail_config['list_cols'] = array('subject', 'status', 'from', 'date', 'size', 'flag', 'attachment');

$rcmail_config['language'] = null;

$rcmail_config['date_format'] = 'Y-m-d';

$rcmail_config['date_formats'] = array('Y-m-d', 'd-m-Y', 'Y/m/d', 'm/d/Y', 'd/m/Y', 'd.m.Y', 'j.n.Y');

$rcmail_config['time_format'] = 'H:i';

$rcmail_config['time_formats'] = array('G:i', 'H:i', 'g:i a', 'h:i A');

$rcmail_config['date_short'] = 'D H:i';

$rcmail_config['date_long'] = 'Y-m-d H:i';

$rcmail_config['drafts_mbox'] = 'Drafts';

$rcmail_config['junk_mbox'] = 'Junk';

$rcmail_config['sent_mbox'] = 'Sent';

$rcmail_config['trash_mbox'] = 'Trash';

$rcmail_config['default_imap_folders'] = array('INBOX', 'Drafts', 'Sent', 'Junk', 'Trash');

$rcmail_config['create_default_folders'] = false;

$rcmail_config['protect_default_folders'] = true;

$rcmail_config['quota_zero_as_unlimited'] = false;

$rcmail_config['enable_spellcheck'] = true;

$rcmail_config['spellcheck_dictionary'] = false;

$rcmail_config['spellcheck_engine'] = 'pspell';

$rcmail_config['spellcheck_uri'] = '';

$rcmail_config['spellcheck_languages'] = NULL;

$rcmail_config['spellcheck_ignore_caps'] = false;

$rcmail_config['spellcheck_ignore_nums'] = false;

$rcmail_config['spellcheck_ignore_syms'] = false;

$rcmail_config['recipients_separator'] = ',';

$rcmail_config['max_pagesize'] = 200;

$rcmail_config['min_keep_alive'] = 60;

$rcmail_config['upload_progress'] = false;

$rcmail_config['undo_timeout'] = 0;

$rcmail_config['address_book_type'] = 'sql';

$rcmail_config['ldap_public'] = array();

$rcmail_config['autocomplete_addressbooks'] = array('sql');

$rcmail_config['autocomplete_min_length'] = 1;

$rcmail_config['autocomplete_threads'] = 0;

$rcmail_config['autocomplete_max'] = 15;

$rcmail_config['address_template'] = '{street}<br/>{locality} {zipcode}<br/>{country} {region}';

$rcmail_config['addressbook_search_mode'] = 0;

$rcmail_config['default_charset'] = 'ISO-8859-1';

$rcmail_config['skin'] = 'default';

$rcmail_config['pagesize'] = 40;

$rcmail_config['addressbook_sort_col'] = 'surname';

$rcmail_config['addressbook_name_listing'] = 0;

$rcmail_config['timezone'] = 'auto';

$rcmail_config['dst_active'] = null;

$rcmail_config['prefer_html'] = true;

$rcmail_config['show_images'] = 0;

$rcmail_config['htmleditor'] = 0;

$rcmail_config['prettydate'] = true;

$rcmail_config['draft_autosave'] = 300;

$rcmail_config['preview_pane'] = false;

$rcmail_config['preview_pane_mark_read'] = 0;

$rcmail_config['logout_purge'] = false;

$rcmail_config['logout_expunge'] = false;

$rcmail_config['inline_images'] = true;

$rcmail_config['mime_param_folding'] = 0;

$rcmail_config['skip_deleted'] = false;

$rcmail_config['read_when_deleted'] = true;

$rcmail_config['flag_for_deletion'] = false;

$rcmail_config['keep_alive'] = 60;

$rcmail_config['check_all_folders'] = false;

$rcmail_config['display_next'] = false;

$rcmail_config['autoexpand_threads'] = 0;

$rcmail_config['top_posting'] = false;

$rcmail_config['strip_existing_sig'] = true;

$rcmail_config['show_sig'] = 1;

$rcmail_config['sig_above'] = false;

$rcmail_config['force_7bit'] = false;

$rcmail_config['search_mods'] = null;  

$rcmail_config['addressbook_search_mods'] = null; 

$rcmail_config['delete_always'] = false;

$rcmail_config['mdn_requests'] = 0;

$rcmail_config['mdn_default'] = 0;

$rcmail_config['dsn_default'] = 0;

$rcmail_config['reply_same_folder'] = false;

$rcmail_config['forward_attachment'] = false;

$rcmail_config['default_addressbook'] = null;

$rcmail_config['spellcheck_before_send'] = false;

$rcmail_config['autocomplete_single'] = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:59:22.897

我也有同样的问题，尝试了 PLAIN 和 NULL，都不起作用。还有其他建议吗？

谢谢。

编辑：联系了检查的主机，因为我没有 SSH - 我认为他们修改了防火墙，现在一切都在使用 NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:23:18.517

您使用的是什么 imap_auth_type？

在配置文件中尝试将 imap_auth_type 设置为“plain”。

```
// IMAP AUTH type (DIGEST-MD5, CRAM-MD5, LOGIN, PLAIN or empty to use
// best server supported one)
$rcmail_config['imap_auth_type'] = 'PLAIN'; 
```

我可以通过以下配置使其与最新版本的 Roundcube (v0.7.2) 一起工作：

```
$rcmail_config['default_host'] = 'ssl://imap.gmail.com';
$rcmail_config['default_port'] = 993;
$rcmail_config['imap_auth_type'] = null;
$rcmail_config['username_domain'] = 'gmail.com'; 
```

然后我可以使用我的 gmail 用户名（没有@gmail.com）和 gmail 密码登录。

其余配置保留在默认设置中。

# php - 在 IP 地址上安装 webapp

> ID：10465761
> 
> 赞同：2
> 
> 时间：2012-05-05T20:33:05.810
> 
> 标签：php, yii, ip, web-hosting

您好，我像这样在临时 IP 地址中创建 yii 应用程序

```
http://74.220.215.220/~cineklik/ 
```

但是我的项目中的链接不起作用我该如何解决？

我想我需要在 Yii 中修改 WebRoot .. 但我不知道怎么做？

**提示：** producted/comfig/main.php

```
return array(
    'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:42:16.530

在这一点上，我认为有很多事情尚不清楚。正如@Tibor 所说，我不知道你是什么意思。如果您的主页或索引页面正在打开，但内页没有打开，您可能已经修改了 UrlManager，或者您必须修改它。你能在 config/main.php 中粘贴代码吗（UrlManager 代码）

以下是默认情况下

```
'urlManager'=>array(
            'urlFormat'=>'path',
            'rules'=>array(
                '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
            ),
        ), 
```

如果上面没有评论，请尝试评论它以查看页面是否显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:58:06.613

您可以创建一个重写规则，例如

```
~cineklik/(.*)    $1 
```

或一个[输出处理器](http://www.yiiframework.com/doc/api/1.1/COutputProcessor)，它在内容呈现后处理您的所有链接 URL。

最好使用`Yii::app()->baseUrl`和`$controller->createUrl()`。

# haskell - emacs haskell模式下的默认lambda符号？

> ID：10465767
> 
> 赞同：9
> 
> 时间：2012-05-05T20:34:03.393
> 
> 标签：haskell, emacs

有谁知道我如何在emacs中使用haskell打印λ而不是\。我知道可以使用haskell-font-lock-symbols，但我发现其余的很难阅读——箭头太小了！

有没有一种简单的方法可以覆盖其余的键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:34:33.700

您还可以使用类似的方法解决问题

```
(eval-after-load 'haskell-font-lock
 '(setq haskell-font-lock-symbols-alist
        (delq nil
              (mapcar (lambda (rewrite)
                        (if (member (car rewrite) '("->" "<-"))
                            nil rewrite))
                      haskell-font-lock-symbols-alist)))) 
```

它应该保留所有映射，除了将“->”更改为“→”和“<-”更改为“←”的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:54:06.290

你可以这样做：

```
(defun pretty-lambdas-haskell ()
  (font-lock-add-keywords
   nil `((,(concat "\\(" (regexp-quote "\\") "\\)")
          (0 (progn (compose-region (match-beginning 1) (match-end 1)
                                    ,(make-char 'greek-iso8859-7 107))
                    nil))))))

(add-hook 'haskell-mode-hook 'pretty-lambdas-haskell) 
```

这会将 lambda 添加为关键字，这意味着它不会出现在例如字符串的转义序列中（TODO：更改事物后不会出现这种情况）。`,(make-char 'greek-iso8859-7 107)`当然 等同于，但在这种`?λ`情况下，您必须确保您的 Emacs 初始化文件被编码为 un​​icode。

您还可以启用完整的符号字体锁定并使用更好的（阅读：使用更宽的箭头）字体，例如[Pragmata Pro](http://www.fsd.it/fonts/pragmatapro.htm)、[Inconsolata](http://levien.com/type/myfonts/inconsolata.html)或[Ubuntu Monospace](http://font.ubuntu.com/)。我使用以下代码来选择一个好的字体：

```
(defun font-existsp (font)
  "Check to see if the named FONT is available."
  (if (null (x-list-fonts font))
      nil t))

(require 'cl)
(defun font-avail (fonts)
  "Finds the available fonts."
  (remove-if-not 'font-existsp fonts))

(defvar font-preferences
      '("PragmataPro"
        "Inconsolata"
        "DejaVu Sans Mono"
        "Bitstream Vera Sans Mono"
        "Anonymous Pro"
        "Menlo"
        "Consolas"))

(unless (eq window-system nil)
  (let ((fonts (font-avail font-preferences)))
    (unless (null fonts)
      (set-face-attribute
       'default nil :font
       (car fonts))))) 
```

# preferences - Aptana Studio 3 - 使用 Ctrl + - 最小化文本字体大小

> ID：10465772
> 
> 赞同：11
> 
> 时间：2012-05-05T20:34:39.323
> 
> 标签：preferences, aptana3

您好，我最近再次安装了 aptana studio 3，当我执行命令 ( `Ctrl`+ `-`) 时，我的文本字体大小最小化。我说的是 and 下的`General->Appearance->Colors`字体`Fonts->Basic->Text Font`。此命令的工作方式类似于在尺寸最小化的 Photoshop/Illustrator 中。但是我不想要这个命令，因为我通常不小心按下它。我查看了键，但找不到此命令，因此我可以更改它。它不会那么糟糕，但是命令`Ctrl`+`+`不会像在其他应用程序中通常那样放大字体。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T16:10:59.693

尝试按住 shift 键：`CTRL`+ `SHIFT`+`+`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-01T18:22:37.100

Aptana Studio 3 存在快捷方式问题。
我不小心缩小了我的代码，因为我使用的是葡萄牙语键盘，`Ctrl` `Shift` `+`所以无法恢复到默认缩放值。

此问题的解决方案*（可能许多其他键盘组都存在此问题）*是将您的**语言首选项**（`Win Key` `space`或在其中找到`Control Panel`）更改为英文键盘。

然后借助[**这张图片**](http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/ISO_keyboard_%28105%29_QWERTY_UK.svg/750px-ISO_keyboard_%28105%29_QWERTY_UK.svg.png)，我发现`+`是左边的第一个键`backspace`。

这样，您可以通过点击返回到 100% 缩放，`Ctrl` `Shift`（第一个键到左侧`backspace`）

很奇怪的情况……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T12:50:52.073

选择您正在编写代码的整个页面。单击鼠标右键。单击首选项。在窗口上方，有一个名为“颜色和字体”的链接，单击此处。单击编辑。

# python - 依赖于该模型类中的可选字段的 ForeignKey 中的 limit_choices_to

> ID：10465774
> 
> 赞同：0
> 
> 时间：2012-05-05T20:34:55.260
> 
> 标签：python, django, django-models

我想要`limit_choices_to`一个`ForeignKey(User)`名为 的模型`Order`，其中`User`受限于`User`谁必须是`Place.owner`(M2M) 的一部分，它`Place`来自哪里`Order.place`。

抱歉，这可能真的很混乱，所以我会向您展示一些模型。

首先`Order`：

```
class Order(models.Model):
    creator     = models.ForeignKey(User, related_name='order_creator')
    place       = models.ForeignKey(Place, related_name='order_place')
    quote       = models.DecimalField(max_digits=8, decimal_places=2, null=True, blank=True)
    quote_owner = models.ForeignKey(User, related_name='order_quote_owner', limit_choices_to=Q(userprofile__user_types__name='po'), null=True, blank=True) 
```

目前，如您所见，我必须`limit_choices_to`简单地输入`po`（`UserProfile.user_types.name`该用户是财产所有者）。但这只是一个临时解决方案。这`quote_owner`是一个指定哪些`User`可以批准报价的字段。

换言之，***业主必须能够批准业主拥有的订单的报价。***

这是我的疯狂（不正确）猜测：

```
quote_owner = models.ForeignKey(User, related_name='order_quote_owner', limit_choices_to=Q(place_set=self.place), null=True, blank=True) 
```

使它有点复杂的是它`Order.quote_owner`是可选的，因此也是`Place.owners`。`limit_choices_to`如果没有为某个地方指定所有者，是否可以足够聪明地默默地失败（而不给出任何选择）？

无论如何，这里是`Place`：

```
class Place(models.Model):
    name     = models.CharField(max_length=135)
    owners   = models.ManyToManyField(User, related_name='place_owners'  , limit_choices_to={'userprofile__user_types': 'po'}, null=True, blank=True) 
```

这里是`UserProfile`：

```
class UserProfile(models.Model):
    user           = models.OneToOneField(User)
    user_types     = models.ManyToManyField(UserType, related_name='userprofile_user_types', null=True, blank=True)
    place          = models.ForeignKey(Place, related_name='userprofile_place', null=True, blank=True) 
```

最后是`UserType`：

```
class UserType(models.Model):
    TYPE_CHOICES = (
        ('ad', 'administrator'   ), # 1
        ('mo', 'moderator'       ), # 2
        ('vi', 'viewer'          ), # 3
        ('pm', 'property manager'), # 4
        ('po', 'property owner'  ), # 5
        ('vm', 'vendor manager'  ), # 6
        ('ve', 'vendor'          ), # 7
        ('te', 'tenant'          ), # 8
   )

    name = models.CharField(max_length=2, choices=TYPE_CHOICES) 
```

我将其保留`UserType`为单独的表，因为我想要之间的 M2M 关系，`User`并且`UserType`仍然以`choices`.

我欢迎并感谢任何建议或提示。**提前致谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:58:08.313

据我所知，limit_choices_to 不能在这里使用。您需要限制字段查询集。

我之前在使用通用视图时已经这样做了，所以这里是代码：

```
 # This class extends a generic view, but this can be any view.
class RelationCreateView(CreateView):

    def get_form(self, form_class):
        # Find all entities a user can promote within, and limit to those.
        form.fields['entity'].queryset = <SOME QUERYSET>
        return form 
```

在一个更简单的视图示例中：

```
def view_method():
    ...
    form.fields['field_name'].queryset = <SOME QUERYSET> 
```

# git - 需要有关 Git 存储库中良好文件命名约定的建议

> ID：10465776
> 
> 赞同：-2
> 
> 时间：2012-05-05T20:35:09.277
> 
> 标签：git, version-control, encoding, naming-conventions

我正在寻找有关 Git 存储库中文件命名约定的建议。

*   将存储库签出到具有不同操作系统和区域设置的客户端计算机并从其提交，这些计算机可能不具有完全一致的字母大小写敏感性和字符编码，以及对某些特殊字符的行为；

*   出于商业原因，存储库的文件名必须包含多个完整的英文单词，例如，某些文件名必须包含`home_value`, or `home-value`, or`HomeValue`而不是完整英文单词无法识别的缩写形式，例如`h_v`or `h-v`or `HV`。

所以我想知道应该为团队制定哪些约定规则，以减少潜在问题。更改约定或稍后强制文件命名样式可能会带来痛苦并适得其反。所以我想从一开始就制定尽可能详细的约定。然后我可以制作 Stewart 脚本来自动验证代码库。

一些初步的想法：

*   我能想到的一些可能的格式约定

    foo_bar # 使用 _ 作为单词分隔符 foo-bar # 使用 - 作为单词分隔符 FooBar # 使用 CamelCase

*   其中一些文件是 HTML 文件，将在 Web 服务器上提供。

*   始终使用 ASCII 字符

*   非 ASCII 字符应转换为 Unicode 代码，例如`U+12345`

*   始终使用小写，例如`foo_bar`但不使用`Foo_Bar`or ，以避免名为and`FooBar`的两个文件之间发生冲突。可能的问题是我上面提到的一些完整的英语单词是专有名词，需要首字母大写。如果信息在文件名中丢失，则需要以其他方式存储。`foo_bar``Foo_Bar`

*   如果始终使用小写字母，则不能使用 CamelCase

*   里面可以有一些完整`-`的英文单词，比如一些英文名字，所以看起来`foo-bar`风格不是一个选项。唯一剩下的可能性是`foo_bar`？

*   如果我然后允许大写字母来容纳专有名词，那么一般来说，文件名是

    foo_Bar_FooBar

但这是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:46:32.910

唯一真正的技术挑战是对 Unicode 文件名的支持很差。它们通常是非便携式的，可能会导致一些奇怪的问题。另一个问题是 Windows 不区分大小写，而基于 Unix 的操作系统则不区分大小写。这意味着您可以在 Mac 或 Linux 计算机上创建命名`HomeValue`并`homevalue`相邻的文件，当您迁移到 Windows 时会出现问题。

我的建议是使用 ASCII 字母，并且除了大小写之外不要有两个相同的名称。至于分词，空格应该可以正常工作。没有理由使用`_`或`-`除非您想通过 HTTP 服务它们。

# java - switch 语句的替代方案

> ID：10465780
> 
> 赞同：1
> 
> 时间：2012-05-05T20:35:50.500
> 
> 标签：java, design-patterns, switch-statement

我正在开发一个 Wicket 应用程序。但我的问题与 Wicket 无关。在那个应用程序中，我有一个水平菜单。此菜单由几个链接创建。单击链接后，您将被导航到某个页面。现在根据您当前正在查看的页面，菜单链接的 css 类属性将更改为“已选择”。这是问题的描述。

现在我通过使用整数值来解决这个问题。该值保存在会话中，并在单击任何一个链接时更新。根据保存的值，将在运行时确定“选择”哪个链接。

我正在通过以下方式实现这一点：

```
//On link click I set a number in session

public void onClick() {
    session.setValue(1);// or 2 or 3
} 
```

创建菜单时，我在值之间切换并修改 css 类，如下所示：

```
switch(session.getValue){
    case 1: add css to home;
    case 2: add css to profile;
    // and so on.
} 
```

我想知道这是唯一正确的方法吗？还是存在一些其他更好的技术或设计模式可以帮助我以更好的方式实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:40:35.397

将菜单项存储在数组（或 ArrayList）中：

```
items[0] = home
items[1] = profile 
```

并使用数组的索引作为菜单标识符。当您收到选定的菜单标识符时，检索相应的项目

```
items[selectedItem] 
```

如果标识符不是数字，或者不是从 0 到 N，您也可以使用 Map。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:38:46.817

首先，使用 an`enum`或 static 常量而不是幻数 (1, 2, 3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:40:49.623

访问者模式通常用于避免这种切换。您可能不想在您的案例中实现完整的模式，但值得了解。JB Nizet 的回答在您的情况下可能更实用。

见[https://en.wikipedia.org/wiki/Visitor_pattern](https://en.wikipedia.org/wiki/Visitor_pattern)

这些 SO 问题也可能会给您一些想法

[Java 访问者模式而不是 instanceof 开关](https://stackoverflow.com/questions/8571490/java-visitor-pattern-instead-of-instanceof-switch)

[Java Enums - Switch 语句与 Enums 上的访问者模式 - 性能优势？](https://stackoverflow.com/questions/2164124/java-enums-switch-statements-vs-visitor-pattern-on-enums-performance-benefit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T22:05:31.330

我已经使用 EnumMap 和一个 Enum 类型作为它的键来实现它。我定义了一个枚举：

```
public enum NavigationStatus {
    HOME,
    PROFILE;
} 
```

在会话中，我将当前导航的值设置为：

```
private NavigationStatus activeUserNavigationStatus;

public NavigationStatus getActiveUserNavigationStatus() {
    return activeUserNavigationStatus;
}

public void setActiveUserNavigationStatus(NavigationStatus activeUserNavigationStatus) {
    this.activeUserNavigationStatus = activeUserNavigationStatus;
} 
```

我主要将其设置为：`setActiveUserNavigationStatus(NavigationStatus.HOME);`

现在菜单正在构建的地方我创建了一个 EnumMap：

```
EnumMap<NavigationStatus, Component[]> menuMap = new EnumMap<NavigationStatus, Component[]>(NavigationStatus.class); 
```

并向其中添加了元素，例如：

```
menuMap.put(NavigationStatus.HOME, new Component[] { homeContainer, home }); 
```

在链接的点击方法上，我设置了状态值：

```
public void onClick() {
    session.setActiveUserNavigationStatus(NavigationStatus.PROFILE);
} 
```

最后，我检查了会话中的当前值并相应地设置了 css 类：

```
Component[] menuComponents = menuMap.get(getSession().getActiveUserNavigationStatus());
menuComponents[0].add(new AttributeAppender("class", new Model<Serializable>(" active")));
menuComponents[1].add(new AttributeAppender("class", new Model<Serializable>(" active"))); 
```

这没有 switch 语句，并结合了[JB Nizet 的](https://stackoverflow.com/a/10465823/576758)ArrayList 索引和[Oli Charlesworth 的](https://stackoverflow.com/a/10465807/576758)Enum 的想法。

谢谢你。

# php - php：使用 google csv，删除列中填充的重复值

> ID：10465787
> 
> 赞同：0
> 
> 时间：2012-05-05T20:36:20.663
> 
> 标签：php, csv, array-unique

我是 php 的新手，一直在不知疲倦地寻找这个问题的解决方案（我敢打赌它也是一个超级简单的解决方案 *sigh）。

我正在从谷歌文档导入 .csv 提要。它拉入两列，一列用于“名称”，另一列用于“位置”。我想删除重复的“位置”。因为我使用的是 fgetcsv，所以我的理解是它已经将数据排序到一个数组中。理想情况下，它将省略“位置”重复项，以便“名称”看起来好像它们列在它们对应的“位置”下。

**这是我所拥有的：**

```
 $url = "https://docs.google.com/spreadsheet/pub?key=0AsMT_AMlRR9TdE44QmlGd1FwTmhRRkFHMzFTeTZhS3c&output=csv";
    $handle = fopen($url, "r");
    while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    echo "<li>\n";
    echo $data[1];
    echo "<br/>\n";
    echo $data[2];
    echo "</li>\n";
    }
    fclose($handle); 
```

**理想情况下，我可以使用这样的东西：**

```
 $url = "https://docs.google.com/spreadsheet/pub?key=0AsMT_AMlRR9TdE44QmlGd1FwTmhRRkFHMzFTeTZhS3c&output=csv";
    $handle = fopen($url, "r");
    while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    echo "<li>\n";
    echo array_unique($data[1]);
    echo "<br/>\n";
    echo $data[2];
    echo "</li>\n";
    }
    fclose($handle); 
```

非常感谢您的帮助！:o)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:15:23.377

```
<? //PHP 5.4+
$url = 'url to your csv feed';

//Group people by same location first,
//not assuming csv is already sorted.
$namesByLocations = [];
//Because we're using \SplFileObject, when the reference goes out
//of scope at the end of the loop, the file pointer is never
//left open. This is true even if an exception is thrown
//in the middle of looping.
foreach(
    \call_user_function(static function() use ($url){
        $file = new \SplFileObject($url);
        $file->setFlags(\SplFileObject::READ_CSV);
        return $file;
    })
    as $array
){
    //$array[1] is assumed to be location string
    //$array[2] is assumed to be a name that is there.
    $namesByLocations[$array[1]][] = $array[2];
}

foreach($namesByLocations as $location => $names){
    //Protect against injection flaws,
    //escape to destination's context. (html this time)
    echo '<strong>' . \htmlspecialchars($location) . '</strong>';
    echo '<ul>';
    foreach($names as $name){
        echo '<li>' . \htmlspecialchars($name) . '</li>';
    }
    echo '</ul>';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:45:42.850

假设数组中的项目按位置分组，这可能会起作用。它存储最后一个数据项（位置）并比较每个项目是否具有该位置。如果是，它会打印它，否则它会使用新位置创建一个新列表项，然后在下面打印名称（虽然我还没有测试过）：

```
$url = "the-url-to-my-csv-feed";
$handle = fopen($url, "r");
$lastdata = '';
while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    if ($lastdata == '') {
        echo "<li><strong>" . $data[1] . "</strong>\n";
        echo "<br/>\n";
        $lastdata = $data[1];
    }

    if ($lastdata != $data[1]) {
        echo "</li>\n";
        echo "<li><strong>" . $data[1] . "</strong>\n";
        echo "<br/>\n";
        $lastdata == $data[1];
    }
    echo $data[2] . "<br/>\n";
}
fclose($handle); 
```

# asp-classic - 连接超时不起作用

> ID：10465788
> 
> 赞同：4
> 
> 时间：2012-05-05T20:36:29.287
> 
> 标签：asp-classic, sqlconnection

我尝试构建数据库故障转移（ASP 经典），但设置有问题：ConnectionTimeout。我将其设置为 1 秒，但服务器仍然尝试连接到第一个连接超过 20 秒。我喜欢连接将在 1 秒后丢失，因此我可以将用户转移到第二个连接。

谢谢，

```
<%
DSN             = "Provider=SQLOLEDB; Data Source=62.62.62.62; Initial Catalog=150109;User Id=noa; Password=tfdh545h54h;"
DSN1                = "Provider=SQLOLEDB; Data Source=127.0.0.1; Initial Catalog=150109;User Id=noa; Password=tfdh545h54h;"

Set conn            = Server.CreateObject("ADODB.Connection")
conn.ConnectionTimeout = 1
conn.CommandTimeout = 1
Set rs              = Server.CreateObject("ADODB.RecordSet")
On Error Resume Next
    conn.Open DSN
    If Err.Number <> 0 Then
        conn.Open DSN1
    End If
On Error Goto 0
'--

sql ="SELECT TOP 10 *"
sql = sql & " FROM allDB"
rs.Open sql, conn
if (not rs.eof) and (not rs.bof) then
    groupARRAY = rs.GetRows
end if
rs.Close

'--
conn.Close
Set rs          = Nothing
Set conn        = Nothing
%> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:57:11.357

[我在这里找到了一个与您的链接](http://www.dbforums.com/asp/990496-cannot-set-connection-timeout-asp.html)最相似的问题。请阅读。它的一个片段在这里。

> 13 秒的“最小”延迟来自较低的 TCP/IP 层，它们至少重试任何连接 3 次。这个只能在注册表中修改（TCP/IP协议参数）

# android - Android：我可以在服务中使用 Google Analytics 吗？

> ID：10465793
> 
> 赞同：10
> 
> 时间：2012-05-05T20:37:18.033
> 
> 标签：android, service, google-analytics

我有一个应用程序，大部分时间都在后台运行，作为服务。网上有很多关于如何使用带有 EasyTracker 库的 Google Analytics API 来跟踪多个活动的示例和教程，但没有一个解释如何在服务中使用 Google Analytics API。甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:36:33.223

好消息！你可以。这很容易。

您将需要应用程序上下文让我们将其称为 mCtx 当您拥有它时，您需要一个 GoogleAnalytics 实例，您可以通过调用

```
GoogleAnalytics mGaInstance = GoogleAnalytics.getInstance(mCtx); 
```

现在您需要设置您想要的任何参数（在使用 EasyTracker 时，您通常会将其放入 analytics.xml）。

现在你需要一个 Tracker 实例：

```
Tracker mTracker = mGaInstance.getTracker("UA-XXXX-Y"); // your ID here 
```

基本上就是这样......现在你可以使用这个跟踪器发送事件

```
mTracker.sendEvent(....); 
```

ETC..

希望这可以帮助。这是非常基础的，但 GoogleAnalytics 和 Tracker 取代了 EasyTracker。

您可以在此处阅读更多相关信息： [高级配置 - Android SDK](https://developers.google.com/analytics/devguides/collection/android/v2/advanced)

请注意，在您在 GA 网站上看到报告之前，最多可能需要 24 小时。所以请耐心等待 :) 或使用 mGaInstance.setDebug(true) 在 logcat 中查看它已发送

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T17:07:10.830

我建议不要这样做，除非你非常确定你在做什么。

我在我的服务中实现了 GA 事件，但它破坏了我的很多 GA 统计信息，例如**会话持续时间**、**每日新会话百分比**、**每日会话**等。GA 认为事件是在屏幕视图之后引起的，因此它使用 GA 事件推送屏幕名称“ **（未设置）** ”。由于服务在后台运行了很多次，它最终破坏了各种统计数据。活跃用户的实时显示也出错了。

# c++ - 我的数组中的编码有什么问题？

> ID：10465796
> 
> 赞同：-4
> 
> 时间：2012-05-05T20:37:30.360
> 
> 标签：c++, arrays

这是我为一个有 14 个插槽的数组编写的代码，每个插槽都应该有 4 个，除了第 6 和第 13 个插槽，它们恢复为 0。但是，它不能编译。有谁知道我在这里做错了什么？

```
using namespace std;
#include <iostream>

const int MAX = 14;

int main ()
{
    void printArray ();

    system ("pause");
    return 0;
}

void startArray (int beadArray[MAX])
{
    for(int i=0; i<MAX; i++)
    {
        beadArray[i]=4;
    }
    beadArray[6]=0;
    beadArray[13]=0;
}

//**********************************************//

void printArray ()
{
    startArray (int beadArray[MAX]);
    for(int i=0; i<MAX; i++)
    {
        cout<<i;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:40:16.310

```
startArray (int beadArray[MAX]); 
```

您正在尝试`beadArray`一步声明和使用它。您应该在使用它之前声明它：

```
int beadArray[MAX];
startArray (beadArray); 
```

您还有许多其他问题：

*   `using namespace std;`没有效果，因为`<iostream>`还没有被`#include`d。您也不应该使用全局`using namespace std;`变量。

*   `system ("PAUSE");`应该更换。我个人使用：

    cin.sync(); cin.get();

*   编译器在`main()`. 之前`main()`，您应该放置原型：

    无效打印数组（）；无效 startArray (int []);

*   在`main()`你说`void printArray();`。调用函数时，只需使用函数名和参数：

    打印数组（）；

*   在 中`printArray()`，您正在输出`i`而不是`beadArray [i]`. 也没有间距。

*   全局常量不好用。

我的固定代码如下所示：

```
#include <iostream>

const int MAX = 14;

void startArray (int (&beadArray)[MAX]);
void printArray();

int main ()
{
    printArray ();

    std::cout << "\n\nPress enter to continue...";
    std::cin.sync();
    std::cin.get();
    return 0;
}

void startArray (int (&beadArray)[MAX])
{
    for(int i=0; i<MAX; ++i)
        beadArray[i]=4;

    beadArray[6]=0;
    beadArray[13]=0;
}

void printArray ()
{
    int beadArray[MAX];
    startArray (beadArray);

    for(int i=0; i<MAX; i++)
        std::cout << beadArray[i] << ' ';
} 
```

我确实保留了常量，但是您可以做很多事情来替换它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T20:44:14.990

一些更正的错误：

*   如果您想在外部使用它，请在 startArray() 函数调用之外声明您的数组。
*   如果要修改它，请将数组作为参考传递
*   cout << beadArray[i] 而不是 cout << i

.

```
using namespace std;    
#include <iostream>

const int MAX = 14;

int main ()    
{
    void printArray ();
    system ("pause");
    return 0;
}

void startArray (int &beadArray[MAX])
{
    for(int i=0; i<MAX; i++)
        beadArray[i]=4;
    beadArray[6]=0;
    beadArray[13]=0;
}

//**********************************************//

void printArray ()
{
    int beadArray[MAX];
    startArray (beadArray);

    for(int i=0; i<MAX; i++)
        cout<<beadArray[i];
} 
```

# oracle - 嵌套 if 语句返回语句句柄未执行错误

> ID：10465798
> 
> 赞同：0
> 
> 时间：2012-05-05T20:37:34.167
> 
> 标签：oracle, stored-procedures, if-statement, plsql

我有一个带有两个输入、两个输出参数和 5 个 sys_refcursors 的存储过程。我有一个成功的 IF/ELSE，我通过调用不同的存储过程打开了这些游​​标，但现在需要第三个选项，即另一个存储过程调用。第三个选项与第二个选项几乎相同，但有一个区别。

我很确定我得到了正确的嵌套 if 语句，但是当它尝试从这个新调用中获取游标时，我不断得到 ora-24338 语句句柄未执行。

问题存储过程调用是中间问题。

```
create or replace Procedure  procedure_name (
    OutVar out varachar2,
    Outvar2  out number,
    inParam1 date,
    REf-Cur1 in out sys_refcursor,
    REf-Cur2 in out sys_refcursor,
    REf-Cur3 in out sys_refcursor,
    REf-Cur4 in out sys_refcursor,
    REf-Cur5 in out sys_refcursor
) 
is
  tIsBindVar1 varchar2(100);
  tIsBindVar2 varchar2(100);
  tOutVar1    varchar2(100);
  TOutVar2    varchar2(100);
Begin
  Select Max(T.Var1) 
    into tIsBindVar1
    From table1 
   where T.aField = inParam1;

Select Function_Name (inParam1) 
  into tIsBindVar2 
  from Dual;

IF tIsBindVar1 is NOT NULL 
THEN
  Select P.Field_A P.Field_B 
    INTO tOutVar1, tOutVar2
    FROM table1 
  WHERE P.Field_A = inParam1;

  Stored_Proc_One (tInParam => tOutVar1, 
                   inParam1 => inParam1, 
                   5 cursors => 5 cursors);
ELSE 
  IF tIsBindVar2 = 'Y' 
  THEN
    Stored_Proc_Two (inParam1 => inParam1, 
                     5 cursors => 5 cursors);
  ELSE 
    Stored_Proc_Three ();
    Stored_Proc_Two ( inParam1 => inParam1, 5 cursors => 5 cursors);
  END IF;
END IF;

SELECT tOutVar1, tOutVar2 
  INTO OutVar1, OutVar2 
  FROM DUAL; 
```

一些快速的额外说明。

存储过程 1 和 2 是直接获取数据，没什么特别的，存储过程 3 根据一些输入参数（未列出）生成一些数据，并调用存储过程 2 进行收集。

我可以更改这些存储的 proc 调用，但我总是会从中间的错误中得到相同的错误。这包括以任何顺序更改条件。

我试图简化代码，因为我不是在寻找任何人为我做这项工作，而是试图了解问题所在。

希望我没有遗漏任何重要的东西，但我认为问题在于我如何执行嵌套 if。我当然不认为问题出在存储过程本身，因为我说当我更改订单时它们会起作用。

因此，如果冗长且很难阅读代码。去尝试找到他们保存编辑信息的地方并清理它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:52:52.373

`tIsBindVar1`和的值是`tIsBindVar2`多少？

您真的希望`IF`语句按照我格式化的方式构建吗？还是你真的想要

```
IF  tIsBindVar1 is NOT NULL 
THEN
  <<do something>>
ELSIF tIsBindVar2 = 'Y' 
THEN
  <<do something else>>
ELSE 
  <<do one more thing>>
END IF; 
```

如果您想确保在所有情况下都至少遵循一条路径，您需要一个`IF ELSIF ELSE`.

顺便说一句，不需要所有这些`SELECT FROM dual`陈述。您可以简单地在 PL/SQL 中分配变量

```
tIsBindVar2 := Function_Name (inParam1); 
```

和

```
tOutVar1 := OutVar1;
tOutVar2 := OutVar2; 
```

更传统。

# python - 如何创建一个新列表，其中每个元素是 python 中另一个列表的每个元素的正则表达式？

> ID：10465804
> 
> 赞同：0
> 
> 时间：2012-05-05T20:38:28.517
> 
> 标签：python, list, python-3.x, list-comprehension

我一直在玩一些不同的语法，但似乎没有任何效果，我遇到了语法错误“TypeError：'str' object does not support item assignment”和其他一些

```
for url in urls:
  for i in range(len(urls)):    
    filename[i] = [re.search(r'/([.]+)(.pdf)') for url[i] in urls] 
```

我也试过：

```
for url in urls:
    filename[i] = [re.search(r'/([.]+)(.pdf)') for url[i] in urls for i in range(len(urls))] 
```

还有一些其他的排列。我一直认为列表理解是执行此操作的最佳方法，但我不确定我需要使用的语法。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:40:05.673

您在列表理解方面走在了正确的轨道上，但是您使它变得比现在更复杂：

```
[re.search(r'/([.]+)(.pdf)', url) for url in urls] 
```

请注意，这将是一个匹配列表，例如，如果你想要它找到的组，忽略它不匹配的任何 url，你可以这样做：

```
[match.groups() for match in (re.search(r'/([.]+)(.pdf)', url) for url in urls) if match] 
```

它使用嵌套的生成器表达式来检查是否匹配，如果匹配则从中提取组：

```
>>> urls = ["http://wwww.example.com/test.html", "http://www.example.com/test.pdf"]
>>> [match.groups() for match in (re.search(r'/([^/]+)(.pdf)', url) for url in urls) if match]
[('test', '.pdf')] 
```

在这里，我对您的正则表达式进行了轻微编辑，以使其适用于我的示例，这仅适用于示例。

当然，你可以在这里对[匹配对象](http://docs.python.org/library/re.html#match-objects)做任何你想做的事情，而不仅仅是获取`match.groups()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:43:54.657

使用列表理解，我创建了一个 url 列表，并且 url 正则表达式结果只有在匹配模式时才会插入到新列表中

```
file_regex = re.compile(r'/([a-zA-Z0-9]+)(.pdf)')

filenames = [file_regex.search(url) for url in urls if file_regex.match(url)]

print filenames 
```

# c++ - 如何在不跳过 eol 的情况下使用船长 ascii::space？

> ID：10465805
> 
> 赞同：9
> 
> 时间：2012-05-05T20:38:33.400
> 
> 标签：c++, parsing, boost, boost-spirit, boost-spirit-qi

我必须使用 boost::spirit 进行解析，并且我想使用 phrase_parse 函数：

```
qi::phrase_parse(str.begin(), str.end(), grammar, ascii::space - qi::eol); 
```

但是我的编译器不允许第四项（ascii::space - qi::eol）。如何在不跳过 eol 的情况下使用船长 ascii::space ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T10:10:25.643

最简单的答案是

```
qi::phrase_parse(str.begin(), str.end(), grammar, ascii::blank); 
```

当然，这也取决于你的语法：如果它需要一个特定的船长类，你可能需要改变它。**请参阅下面的*通用*方法来处理它**（尽管您可以只指定`qi::blank_type`应该只接受的语法`qi::blank`）。

该示例也处理任意船长。

### 其他提示

Spirit 有几个影响船长使用的指令：

*   [`qi::lexeme`](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/directive/lexeme.html)

    将解析子表达式而不管船长（例如，语法中的字符串文字很有用）

*   [`qi::raw`](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/directive/raw.html)

    将返回原始源迭代器范围，这意味着跳过的输入将包含在结果中

*   [`qi::no_skip`](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/directive/no_skip.html),[`qi::skip`](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/directive/skip.html)

    可用于显式更改用于子表达式的船长类型

### 推荐阅读

Boost Spirit 网站上有一篇关于此类事情的好文章

*   [解析船长和跳过解析器](http://boost-spirit.com/home/2010/02/24/parsing-skippers-and-skipping-parsers/)

### 通用示例

```
#include <boost/spirit/include/qi.hpp>

namespace qi = boost::spirit::qi;

template <typename It, typename Skipper>
    struct parser : qi::grammar<It, Skipper>
{
    parser() : parser::base_type(start)
    {
        start = *qi::int_;
    }

  private:
    qi::rule<It, Skipper> start;
};

template <typename C, typename Skipper>
    void doParse(const C& input, const Skipper& skipper)
{
    auto f(std::begin(input)), l(std::end(input));

    parser<decltype(f), Skipper> p;
    bool ok = qi::phrase_parse(f,l,p,skipper);

    if (ok)   
        std::cout << "parse success\n";
}

int main()
{
    const std::string input = "1 2 3 4";
    doParse(input, qi::blank);
    doParse(input, qi::space);
    doParse(input, ~qi::char_("0-9"));
} 
```

# ajax - 将超链接查询字符串发送到服务器并使用 jquery ajax 获取结果

> ID：10465814
> 
> 赞同：0
> 
> 时间：2012-05-05T20:39:46.240
> 
> 标签：ajax, jquery

我正在用 php 制作一个简单的网站。我有一个产品页面，产品页面上有一个链接，上面写着添加到愿望清单，因此当用户单击该链接时，产品会发布到服务器，并且页面会从后端重定向。但我想使用 jquery ajax 来做到这一点，这样我的页面就不会重新加载。有人可以提供一段关于如何做到这一点的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:42:29.797

```
$('#anchorId').click(function(){

    $.ajax({
        url:"foo",
        data : "the query string",
        ...
        ...
        success: function(result){
                // success code.
            }
        });

    return false; // prevents the default behavior of anchor click.
}); 
```

学习 jQuery 的最佳方式是访问[**API 站点**](http://api.jquery.com/)。
（目前似乎已关闭）[ajax 类别](http://docs.jquery.com/Ajax)

* * *

**更新：**

```
$('body').on('click', 'a.foo', function(){
    // What you want here.
    return false;
} 
```

无论何时创建（“运行时”或页面加载），这都将捕捉到对`foo`类下的锚点的任何点击。`<body>`

# ruby-on-rails - formtastic 方法 has_and_belongs_to_many 用于大表

> ID：10465815
> 
> 赞同：1
> 
> 时间：2012-05-05T20:39:50.593
> 
> 标签：ruby-on-rails, activeadmin, formtastic, has-and-belongs-to-many

什么是最好的为什么要在表格中实现 has_and_belongs_to_many ，因为表格是如此之大。

详细信息：我有 2 张大桌子
1 人，其中有 100 行 2 家庭

我正在为具有家庭成员字段的新家庭创建表格。为这么多的人设置复选框是没有意义的。

你有什么建议吗？（准备使用的解决方案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:14:33.217

如果依赖 javascript 不会打扰您，我建议使用 multiple_select 输入和“选择”库进行设置： [https](https://github.com/harvesthq/chosen) ://github.com/harvesthq/chosen （谈论准备使用:)）祝你好运。另一种方法是创建自己的“自动建议”功能并自己进行接线（ajax 调用；json 渲染；等等。

# objective-c - 从 NSValue 检索时结构数据被打乱

> ID：10465826
> 
> 赞同：1
> 
> 时间：2012-05-05T20:41:18.753
> 
> 标签：objective-c, struct, objective-c++

我在这里将值放入结构中：

```
[self createEntityWithX:20 andY:20 withType:0 withWidth:20 andLength:20 atSpeed:5];
...
...
-(void)createEntityWithX:(int)newEntityX andY:(int)newEntityY withType:(int)newEntityType withWidth:(int)newEntityWidth andLength:(int)newEntityLength atSpeed:(int)newEntitySpeed
{
  Entity tmpEntity;
  tmpEntity.entityX = newEntityX;
  tmpEntity.entityY = newEntityY;
  tmpEntity.entityLength = newEntityLength;
  tmpEntity.entityWidth = newEntityWidth;
  tmpEntity.entityType = newEntityType;
  tmpEntity.entitySpeed = newEntitySpeed;

  NSValue *tmp = [NSValue valueWithBytes:&tmpEntity objCType:@encode(struct Entity)];

  [entityArray addObject:tmp];
}

-(Entity)retreiveEntityFromValue:(NSValue *)value
{
  Entity entity1;
  [value getValue:&entity1];
  return entity1;
} 
```

当我取回数据时，数据正在被加扰？我创建了实体：X:20 Y:20 Width:20 并返回 x:1712736 Y:0 Width:0? X 是完全随机的，但其余的保持为 0

我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:23:01.103

尝试使用浮点数（1）而不是使用整数，或者您可以将数据作为点（2）传递。

1)http://www.techotopia.com/index.php/Objective-C_2.0_Data_Types#float_Data_Type 2)http://mobiledevelopertips.com/c/cgrect-cgsize-and-cgpoint.html

# php - 为什么 ZendFramework $this->getFrontController()->getBaseUrl() 在控制器内返回空字符串？

> ID：10465831
> 
> 赞同：0
> 
> 时间：2012-05-05T20:42:02.790
> 
> 标签：php, zend-framework, url, controller

我在我的应用程序中使用 ZendFramework 1.11.11，我需要知道在我的控制器中启动我的控制器的 URL（更具体地说是路径）。

当我尝试

```
$this->getFrontController()->getBaseUrl(); 
```

返回一个空字符串。我使用 ZendStudio 创建的默认应用程序测试该代码，然后键入[http://test.com/default/index/index](http://test.com/default/index/index)来访问它，什么也没有。

知道如何获取在控制器内启动控制器的 URL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:47:22.677

基本 url 是您在配置中设置的原始斜线的偏移量。您没有基本 url，默认是模块的名称，index 是控制器，index 是操作。

要启动另一个控制器，请查看此链接[http://framework.zend.com/manual/en/zend.controller.action.html#zend.controller.action.utilmethods](http://framework.zend.com/manual/en/zend.controller.action.html#zend.controller.action.utilmethods)

要从控制器以 Zend 方式获取当前路径，请执行以下操作。

```
$this->getRequest()->getPathInfo(); 
```

# mysql - MySQL 使用 IN 和 LIKE 通配符查找数据

> ID：10465832
> 
> 赞同：0
> 
> 时间：2012-05-05T20:42:05.380
> 
> 标签：mysql, wildcard, sql-like

我将如何去做类似的事情：

```
SELECT * FROM mytable
WHERE people IN ('Jack', '%Bob%') 
```

查找所有等于“Jack”或包含“Bob”的字段？我不认为我的示例是正确的语法，因为它没有提取任何记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:44:43.427

简单地 ：

```
SELECT * FROM mytable WHERE people='Jack' OR PEOPLE LIKE '%Bob%' 
```

# android - 如何在 Android 中获取电话号码？

> ID：10465835
> 
> 赞同：6
> 
> 时间：2012-05-05T20:42:31.613
> 
> 标签：android

[这是对这里](https://stackoverflow.com/questions/6329216/how-to-obtain-mobile-number-of-own-device-in-android)问题的扩展。现在我引用[CommonsWare](https://stackoverflow.com/users/115145/commonsware)

> **没有可靠的方法来以编程方式检索设备的手机号码。**我能想到的唯一选择是让用户输入电话号码。

我的问题是如何检查用户输入的电话号码是否正确，以及我现在想不出的更多可能性：

1.  用户输入的号码与下载应用程序的设备相同。
2.  用户在输入号码时没有出现任何印刷错误
3.  用户未输入任何本地呼叫代码，例如前导 0

我已经在 StackOverflow 和 web 上花费了足够的时间，这不是一个重复的问题。

我将不胜感激任何帮助、线索或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:46:50.420

如果您愿意花一些用户钱，您可以向自己发送一条短信（用户输入的号码）并检查它是否到达。

如果是，则数字是正确的。如果不是...要么您没有网络，要么号码不正确。

根据我对移动运营商的经验，我什至不认为手机具有号码可见性，只有在他们身边，他们才有这种可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:40:05.457

> 1.用户输入的号码与下载该应用程序的设备相同。

这又是一种无法测试的东西，否则@neteinstein 提到的 Tricky 方式

* * *

> 2.用户在输入号码时没有任何印刷错误
> 
> 3.用户没有输入任何像前导0这样的本地调用代码

我想你仍然不知道谷歌的这个**[库](http://code.google.com/p/libphonenumber/)**，用于*解析/格式化/验证世界所有国家/地区的电话号码。*

使用它，您可以实现其他 2 个解决方案。我认为。

* * *

链接：[http ://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:23:26.177

虽然我不知道 nr1，但我认为您可以通过分析字符串中的数字来很容易地解决问题 nr 2 和 3。这样您就可以轻松检查它包含哪些字符以及这些字符的位置。我希望这有帮助。

问候，沃塔

# text - Imagemagick 和网络字体

> ID：10465836
> 
> 赞同：4
> 
> 时间：2012-05-05T20:42:42.697
> 
> 标签：text, fonts, imagemagick

有谁知道 ImageMagick 是否可以由网络字体驱动？（或者也许通过 STD IN 输入？）我尝试了下面的行但没有运气：

```
convert -fill black -font http://fonts.googleapis.com/css?family=Diplomata+SC -pointsize 72 label:'Acme Dynamite Company, LLC' logo.png 
```

我的目标是让用户选择一种 Google Web 字体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T00:54:26.580

如果你 wget GWF API，它会返回一个 TTF url：

$ wget -qO- "http://fonts.googleapis.com/css?family=Diplomata+SC" | urlext2

[http://themes.googleusercontent.com/static/fonts/diplomatasc/v1/JdVwAwfE1a_pahXjk5qpNonF5uFdDttMLvmWuJdhhgs.ttf](http://themes.googleusercontent.com/static/fonts/diplomatasc/v1/JdVwAwfE1a_pahXjk5qpNonF5uFdDttMLvmWuJdhhgs.ttf)

$

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T21:19:13.287

最后更新：用户barethon写了一个python woff to ttf转换器，效果很好。（[https://github.com/hanikesn/woff2otf/blob/master/woff2otf.py](https://github.com/hanikesn/woff2otf/blob/master/woff2otf.py)）我现在可以从 Google 撕下我想要的字体，将其转换为 ttf 并将其与 imagemagick 一起使用。比我想要的稍微复杂一点，但没什么大不了的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-14T22:48:34.803

我知道这在这一点上已经很老了，但是为了节省别人的时间，这里有一些基本的 PHP 来做你想做的事。它可以优化为使用 curl 等，但这应该足以让人们继续前进。看起来，当从浏览器访问时，它返回一个 woff 和 woff2 url，但是当从其他任何地方访问时，它返回一个 tff。

```
 $fontUrl = 'http://fonts.googleapis.com/css?family=Anton';
    $fontDescription = file_get_contents($fontUrl);

    $startStr = 'url(';
    $startStrLen = strlen($startStr);
    $start = strpos($fontDescription, $startStr) + $startStrLen;
    $end = strpos($fontDescription, ')', $start);
    $tffUrl = substr($fontDescription, $start, $end - $start);

    $tffFile = '/tmp/anton.ttf';
    file_put_contents($tffFile, file_get_contents($tffUrl));

    $im = new Imagick();
    $im->setFont($tffFile);
    $im->newPseudoImage(100, 100, "caption:Hello");
    $im->setImageFormat('png');
    $im->setImageBackgroundColor(new ImagickPixel('transparent'));
    header('Content-Type: image/png');
    echo $im->__toString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-21T04:11:23.990

感谢 Floss 解决这个问题的方法。我以类似的方式解决了它。

我使用随机数而不是静态文件名的原因`font.ttf`是如果其他用户同时调用该函数，它可能会产生问题。

1.  查询谷歌字体列表

    ```
    $url = 'https://www.googleapis.com/webfonts/v1/webfonts?key=YOUR KEY HERE';

    $responseString = file_get_contents($url);
    $fontJSON = json_decode($responseString); 
    ```

2.  像这样访问字体的 url：

    ```
    <select name="font">
      <?php foreach ($fontJSON->items as $font): ?>
        <option value="<?= $font->files->regular ?>"><?= $font->family ?></option>
      <?php endforeach; ?>
    </select> 
    ```

    *   请注意，您必须做一些其他的技巧来选择变体（如粗体或斜体），但这超出了这篇文章的范围。
3.  将表单数据传给服务器后，按如下方式使用。

    ```
    //create a random number for a unique filename
    $random_number = intval( "0" . rand(1,9) . rand(0,9) . rand(0,9) . rand(0,9) . rand(0,9) );

    //download the TTF from Google's server
    $font_contents = file_get_contents($font);

    //Make a local file of a unique name
    $font_file = fopen("/tmp/$random_number.ttf", "w"); 

    //Write data from the Google Font file into your local file
    fwrite($font_file, $font_contents); 

    //Close the file
    fclose($font_file);

    //Set iMagick to use this temporary file
    $draw->setFont("/tmp/$random_number.ttf");

    //DO YOUR iMagick STUFF HERE 
    ```

4.  删除临时字体文件

    ```
    unlink("tmp/$random_number.ttf"); //remove tmp font 
    ```

# c - GDB 不会在断点处停止

> ID：10465837
> 
> 赞同：0
> 
> 时间：2012-05-05T20:42:56.817
> 
> 标签：c

我已经编译了

```
gcc -Wall -gdwarf-2 -g3 -g ws.c socklib.c web-time.c varlib.c -o ws 
```

和

```
gcc -Wall -gdwarf-2 -g3 ws.c socklib.c web-time.c varlib.c -o ws 
```

并且程序不会在我设置的断点处停止。

```
./ws

gdb>b splitline
gdb>b 1019
gdb>b 1020 
```

断点安装成功。第 1019 行是 while 语句。下面的打印消息会执行。

```
char ** splitline(char *line, int*has_query)

{
//char *newstr();
logg("In splitline\n");
char **args;
int spots = 0; /* spots in table    */
int bufspace = 0; /* bytes in table */
int argnum = 0; /* slots used       */
char *cp = line; /* pos in string   */
char *start;
int len;

if (line == NULL) /* handle special case    */
    return NULL;

args = emalloc(BUFSIZ); /* initialize array */
bufspace = BUFSIZ;
spots = BUFSIZ / sizeof(char *);

int query_reached = 0; //Flag to specify that the first '?' was reached
while (*cp != '\0') {
    logg("*cp=");
    fprintf(stderr,"%c",*cp);

... 
```

# keyboard - 键绑定。按键时如何在崇高文本2中运行外部脚本（外部命令/程序）？

> ID：10465839
> 
> 赞同：8
> 
> 时间：2012-05-05T20:43:38.033
> 
> 标签：keyboard, exec, shortcut, sublimetext2

当我在 Sublime Text 2 上按下一个键时，我想运行一个外部 python 脚本（或外部命令/程序）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T22:39:36.997

这是一个[解决方案](http://sapiensgarou.blogspot.com.br/2012/06/1-preferences-bindings-user-2-override.html)：

**Preferences->Key Bindings - User**并将其放入文件中（覆盖`[`,`]`内部）：

```
[
    { "keys": ["<your shortucut>"], "command": "exec", "args": { "cmd": ["<path to your script>"]} }
] 
```

`<your shortcut>`顾名思义，其中是快捷方式（例如： `F1`、`ctrl`**++**等），`shift`**是**命令的位置（例如：、、、等）`F1``<path to your command>``echo``/home/user/scripts/my_script.py``ls`

# silverlight - 列表框内的 Silverlight 文本块导致它展开而不是环绕文本

> ID：10465845
> 
> 赞同：1
> 
> 时间：2012-05-05T20:44:27.533
> 
> 标签：silverlight, listbox, grid, word-wrap, textblock

我有这样的事情：

```
<ListBox ItemsSource="{Binding List}">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Property}" TextWrapping="Wrap" Grid.Column="0"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我遇到的问题是当文本太长时，TextBlock 会扩展 Grid 列（和 Listbox），而不是按预期包装它。也许我不完全理解网格的星大小概念，但我看到它的方式，因为列宽设置为“1*”，这意味着“剩余可用空间”，文本块不应该尝试扩展超出这个宽度，应该换行。

那么我该如何解决这个问题呢？顺便说一句，我需要 Grid（或其他容器），因为除了 Textblock 之外还有其他组件。ItemContainerStyle 部分也在那里，因此 Listbox 元素占据了整个空间。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:26:19.613

尝试添加`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`到您的 ListBox。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T13:01:57.443

如果它只是一个，则不需要列定义，请尝试以下操作：

```
<ListBox ItemsSource="{Binding List}"> 
    <ListBox.ItemContainerStyle> 
        <Style TargetType="ListBoxItem"> 
            <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter> 
        </Style> 
    </ListBox.ItemContainerStyle> 
    <ListBox.ItemTemplate> 
        <DataTemplate> 
            <Grid> 
                <TextBlock Text="{Binding Property}" TextWrapping="Wrap" HorizontalAlignment="Stretch"/> 
            </Grid> 
        </DataTemplate> 
    </ListBox.ItemTemplate> 
</ListBox> 
```

# ruby - 如何仅使用 Ruby 建立 has_many 关系，即不使用 Rails？

> ID：10465848
> 
> 赞同：1
> 
> 时间：2012-05-05T20:45:18.340
> 
> 标签：ruby

我不是说如何包含 ActiveRecord，但让我解释一下。

我想要一个`Game`带有一个`difficultyLevelID`和一个`DifficultyLevel`对象。

在 Rails 和 ActiveRecord（这是我熟悉的）中，这些将是表格，我将拥有`has_many`and`belongs_to`方法，然后我可以使用`difficultyLevelID`来获取东西，所以难度级别可能是`Game.difficulty_level.name`

如果我只是在做一个没有数据库的 Ruby 程序并且我想使用这种关系，即我想要`Game`一个`ID`难度级别和级别`name`本身在一个`difficulties`类中，我该怎么做（创建、维护和查询关系）只是用 Ruby，所以我可以说得到游戏难度级别的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:25:05.047

**20 小时内没有答案，所以我发布了自己的答案。**

```
class Soduko
  attr_accessor :name, :rows, :columns, :difficulty_level
  def initialize // will probably move to parameters as defaults.
    @rows= 9
    @columns= 9
    @name= 'My Soduko'
    @difficulty_level= 'Medium'
  end

  def initial_number_count
    DifficultyLevel.start_with_numbers('Medium')
  end

end

class DifficultyLevel

  def self.start_with_numbers(difficulty_level)
    case difficulty_level
      when 'Easy'
      then 30
      when 'Medium'
      then 20
      when 'Hard'
      then 10
      else 20
    end

  end

end 
```

**当然还有测试：**

```
require './soduko'

describe Soduko, '.new' do

  before { @soduko_board  = Soduko.new }

  it "Should allow for a new Board with 9 rows (default) to be created" do
    @soduko_board.rows.should == 9
  end 

  it "Should allow for a new Board with 9 columns (default) to be created" do
    @soduko_board.columns.should == 9
  end 

  it "should have a default difficulty level of 'Medium'" do
    @soduko_board.difficulty_level.should == 'Medium'
  end 

  it "should have 10 initial numbers" do
    @soduko_board.initial_number_count.should == 20
  end 

end

describe DifficultyLevel, '.new' do

  it "should exist" do
    @difficulty_level = DifficultyLevel.new
  end

  # More to be added...

end 
```

# mongodb - 更新MongoDB中数组内的嵌入对象

> ID：10465849
> 
> 赞同：9
> 
> 时间：2012-05-05T20:45:20.603
> 
> 标签：mongodb, mongodb-query

我有像这样的文件

```
{
    id : 100,
    heros:[
        {
           nickname : "test",
           spells : [
             {spell_id : 61, level : 1},
             {spell_id : 1, level : 2}
           ]
        }
    ]
} 
```

我不能用昵称“test”在里面拼写。我试过这个`$set`查询：`level : 3``spell_id : 1``spells``heros`

```
db.test.update({"heros.nickname":"test", "heros.spells.spell_id":1}, 
{$set:{"heros.spells.$.level":3}}); 
```

我看到的错误是

> 无法使用字符串字段名称附加到数组 [spells] 感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T16:08:08.540

您只能将`$`位置运算符用于单级数组。在您的情况下，您有一个嵌套数组（`heros`是一个数组，其中每个英雄都有一个`spells`数组）。

如果您知道数组的索引，则可以在更新时使用显式索引，例如：

```
> db.test.update({"heros.nickname":"test", "heros.spells.spell_id":1}, {$set:{"heros.0.spells.1.level":3}}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T20:58:52.433

尝试这样的事情：

```
db.test.find({"heros.nickname":"test"}).forEach(function(x) {  
    bool match = false;
    for (i=0 ; i< x.heros[0].spells.length ; i++) {
        if (x.heros[0].spells[i].spell_id == 1) 
        {
            x.heros[0].spells[i].level = 3;
            match = true;
        }
    }
    if (match === true) db.test.update( { id: x.id }, x );
}); 
```

显然有人打开了一张票以添加将功能放入更新子句的能力，但尚未解决： [https ://jira.mongodb.org/browse/SERVER-458](https://jira.mongodb.org/browse/SERVER-458)

# php - 如何在页面列表中找到单词和标题

> ID：10465852
> 
> 赞同：1
> 
> 时间：2012-05-05T20:45:42.947
> 
> 标签：php, search, find, file-get-contents

我试图查找页面上是否存在一个单词以及多个页面中的页面标题我的代码是

```
<form method="post">
<label for="adres">Adres</label><br /><textarea id="adres" name="adres"></textarea><br />
<input type="submit" value="Generate" />
</form>

<?php
if ($_POST){
$adres = $_POST['adres'];

function getTitle($Url){
    $str = file_get_contents($Url);
    if(strlen($str)>0){
        preg_match("/\<title\>(.*)\<\/title\>/",$str,$title);
        return $title[1];
    }
}

$name = getTitle("$adres");

function check_url($url) {
    $page = file_get_contents($url);
    $code = 'alt="mh"';
    if (strpos($page, $code) == TRUE) {
    $soft = '[img]http://www.ufs.pl/forum/images/icons/icon3.png[/img]';
    echo "$soft";
    }
}
$icon = check_url("$adres");
echo "$icon [url=$adres] $name [/url]";
}
?> 
```

如果我将单个链接放入文本区域，它就可以工作。但是，如果我输入多个链接，我希望它能够工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:53:00.253

把它放在你的文本区域`http://www.test.com,http://www.test2.com`

然后：

```
if (isset($_POST['adres'])){
    $adres = explode(",", $_POST['adres']);

    foreach($adres as $link){
       $name = getTitle($link);
       echo "Title:".$name;
       $icon = check_url($link);
       echo "$icon [url=$link] $name [/url]";

    }
}

function getTitle($Url){
    $str = file_get_contents($Url);
    if(strlen($str)>0){
        preg_match("/\<title\>(.*)\<\/title\>/",$str,$title);
        return $title[1];
    }
}
function check_url($url) {
    $page = file_get_contents($url);
    $code = 'alt="mh"';
    if (strpos($page, $code) == TRUE) {
    $soft = '[img]http://www.ufs.pl/forum/images/icons/icon3.png[/img]';
    echo "$soft";
    } 
```

# php - 从 Google Maps API 查询为 PHP 数组分配 JSON 值

> ID：10465853
> 
> 赞同：3
> 
> 时间：2012-05-05T20:45:57.217
> 
> 标签：php, json, google-maps

我试图找到一种方法来分配 JSON 值 Google Map 的 API 在传递地址时返回。我会搜索谷歌，但我只深入 PHP 几个月，真的不知道使用什么关键字。我真的不知道 JSON 是什么？

无论如何，我发现这篇文章解释了如何使用地址查询谷歌地图并让它返回一个 GPS 位置。当我在浏览器中测试它时，会出现文本。我只是不知道用什么来获取浏览器显示的内容并将其分配给 PHP 页面中的对象。

这是谷歌地图查询：

```
http://maps.google.com/maps/geo?q="ADDRESS"&output=csv&oe=utf8 
```

这是我要使用的功能：

```
//Queries Google Map's API with an address and assigns the returned GPS Location 
//to this Object
public function build_me($this_address)
{
    //Builds the query from the address array to send to the Goole Maps API
    $query = $this_address["Line1"].",".$this_address["Line2"].",".
             $this_address["City"].",".$this_address["State"].",".$this_address["Zip"];

    //Location_Array = http://maps.google.com/maps/geo?q=$query&output=csv&oe=utf8
    $this->latitude  = //Location_Array['Something'];
    $this->longitude = //Location_Array['Something'];
} 
```

这是我所指的文章： [http ://martinsikora.com/how-to-get-gps-coordinates-from-an-address](http://martinsikora.com/how-to-get-gps-coordinates-from-an-address)

我的问题是，我该怎么做呢？有没有这方面的好教程？提前感谢任何人指出我正确的方向！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:53:29.200

实际上，您显示的 URL 将产生[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)输出（这就是它具有`output=csv`参数的原因）。如果您只需[将其插入浏览器（唐宁街 10 号），](http://maps.google.com/maps/geo?q=Downing+Street+10&output=csv&oe=utf8)您就可以看到它：

> 200,8,45.9797693,-66.5854067

以下是完成工作的一些有用资源：

*   [cURL](http://php.net/manual/en/book.curl.php)调用 Google API
*   [卷曲教程](http://net.tutsplus.com/tutorials/php/techniques-and-resources-for-mastering-curl/)
*   [`str_getcsv()`](http://www.php.net/manual/en/function.str-getcsv.php)将 CSV 字符串解析为 PHP 数组
*   （[`json_decode()`](http://php.net/manual/en/function.json-decode.php)将 JSON 转换为 PHP 数组/对象 - 以防您以后需要它）

# assembly - MIPS（汇编） - 如何舍入浮点数？

> ID：10465855
> 
> 赞同：1
> 
> 时间：2012-05-05T20:46:17.917
> 
> 标签：assembly, floating-point, mips, rounding

假设我在 $f0 寄存器中有一个浮点数 123.4567...。

如何将其舍入到 123,46 并将其存储到 $f1 寄存器？

我需要一个也适用于负数的解决方案：

-123.4567... --> -123.46

编辑。还有整数：

-4.0 --> -4.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:53:41.610

伪代码：

```
Multiply by 100.0
If sign is positive
  Add 0.5
Else
  Subtract 0.5
Convert to integer
Convert back to float
Divide by 100.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:56:01.247

根据@PaulR 的建议，您可以分别添加`+0.5`，或者`-0.5`如果它是积极的或消极的。

这可以通过一个分支来完成（为了清楚起见）：

```
Multiply by 100.0
if num >= 0
    Add 0.5
else
    Add -0.5
Convert to integer
Convert back to float
Divide by 100.0 
```

或者，如果性能很重要，通过屏蔽符号位来获得 0.5，这取决于输入的符号是正数还是负数：

```
Multiply by 100.0
$f2 = $f0 & (0x80000000 | 0.5))
$f0 += $f2
Convert to integer
Convert back to float
Divide by 100.0 
```

# c - 在不知道长度的情况下释放指针

> ID：10465857
> 
> 赞同：4
> 
> 时间：2012-05-05T20:46:39.040
> 
> 标签：c, pointers, free

我有一个关于释放指针的理论问题。

我认为有些人（程序本身或操作系统）必须跟踪指针和它们的长度。为什么？

```
float* pointer1 = malloc( 100 * sizeof(float) ); 
```

例如：我这里有一个浮点指针。有人能告诉我*pointer1*数组的长度是多少吗？没有办法通过在运行时调用函数/方法来获取该指针的长度，对吗？那么程序（或操作系统）如何在不知道运行时实际长度的情况下释放指针的内存部分：

```
free(pointer1); 
```

如果程序知道指向 free 的指针的长度，为什么我们无法获取该信息并使用其他一些方法来跟踪长度。例如：

```
struct floatArray
{
    float* pointer;
    int length;
} 
```

所以，我真的很好奇这个问题。我真的很想了解操作系统如何处理指针长度。

谢谢，

坐下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:48:43.957

内存管理器确实维护有关每个已分配内存块的元数据。除了块的大小之外，这可能还包含信息。

实现这一点的一种常见方法是将元数据存储在内存中，就在用户程序用来引用块的内存地址下方。因此，如果对 malloc 的调用返回 address `p`，并且元数据包含`n`字节，则元数据将存储在 address `p-n`to 中`p-1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:48:06.433

它通常不直接是操作系统，而是`malloc()`实现——内存管理器，它从操作系统获取更大的内存块。通常，这些信息将存储在一些链表中，但我建议您查看您的 libc`malloc()`以了解这些信息是如何存储的。

正如所指出的，没有标准的方法来做到这一点，因为不同的编译器/标准 C 库之间的实现有所不同-

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:50:19.630

操作系统不一定会跟踪您请求的确切长度。通常，由于各种内部原因，长度会更改（增加），或者以访问缓慢的方式存储。它可能包含编码在其中的附加信息（通常大小与 2 的幂的某个倍数对齐，并且低位用作标志）。一些 malloc 实现（尤其是嵌入式的）根本没有实现`free()`，也不需要存储这些信息。

C 语言设计者希望允许 C 库实现具有这种自由度，因此他们不允许程序检索 malloc 缓冲区的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T21:01:36.747

使用 MSVC 或 MinGW，您可以使用（非标准！）函数 _msize

```
float* pointer1 = malloc( 100 * sizeof(float) );
printf("%lu bytes with %lu elements", (unsigned long)_msize(pointer1),(unsigned long)_msize(pointer1)/sizeof*pointer1); 
```

# java - 捕获Java中每个动作的信息的最佳方法是什么？

> ID：10465858
> 
> 赞同：1
> 
> 时间：2012-05-05T20:46:42.103
> 
> 标签：java, logging

假设您想在每个操作上捕获 Web 应用程序的页面源，例如

```
public void click() {
    getPageSource();
}

public void type() {
    getPageSource();
}

public void select() {
    getPageSource();
} 
```

我必须在每个函数中调用 getPageSource()，但是有没有更简洁的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:00:16.630

如果您在 Java Web 应用程序中工作，您应该创建一个[过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)来拦截应用程序中发出的每个请求。这是一个示例：

Java 类

```
package edu.home;

import javax.servlet.*;

public class MyFilter implements Filter {

    public void init(FilterConfig filterConfig) throws ServletException {
    }

    public void destroy() {
    }

    public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain filterChain) throws IOException, ServletException {
        System.out.println("New request in the application!");
        //here you can add getPageSource() and send request/response
    }
} 
```

在 web.xml 中配置过滤器

```
<!--declare the filter -->
<filter>
    <filter-name>MyFilter</filter-name>
    <filter-class>edu.home.FISesionExpirada</filter-class>
</filter>
<!-- declare where the filter should be used -->
<filter-mapping>
    <filter-name>MyFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:50:39.693

像这样的事情通常被称为[横切关注点](https://en.wikipedia.org/wiki/Cross-cutting_concern)，它们不太适合面向对象的框架。简单的答案是，在普通的旧 Java 中，确实没有更好的方法来做到这一点。

有一些解决方案，但根据我的经验，它们并没有被广泛使用，请参见 [http://www.eclipse.org/aspectj/](http://www.eclipse.org/aspectj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:52:36.437

查看您的 Web 应用程序框架是否支持过滤器、侦听器、观察器、拦截器或某种面向方面的编程。您描述的那种问题已经解决了很多次，肯定在您的特定开发环境中您会找到解决方案。

# security - 与cordova / phone相关的潜在安全漏洞有哪些

> ID：10465861
> 
> 赞同：1
> 
> 时间：2012-05-05T20:47:06.143
> 
> 标签：security, cordova

有人可以向我解释与 * 为 Cordova/PhoneGap url 白名单（即允许所有 url）相关的潜在安全漏洞吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T08:11:18.107

我刚读了一篇文章，我想你会对它感兴趣。只需检查一下：

[http://www.nerdybeardo.com/2013/11/phonegap-xss-vulnerabilities-visited/](http://www.nerdybeardo.com/2013/11/phonegap-xss-vulnerabilities-visited/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:47:49.853

我为一个需要安全移动应用程序的组织工作，出于安全考虑，我们已经排除了 Phonegap / Cordova。Cordova 提供了一个 javascript API，允许您控制手机的大部分硬件和主要操作系统组件。Web 视图允许您从可以调用这些 API 的任何地方加载脚本。这是一个简单的例子：-

1.  我的 HTML5 Phonegap 应用程序从我的论坛站点嵌入了一个网页，以提供一些社交内容，
2.  我的论坛站点对跨站点脚本的控制很差，
3.  一个坏人发布了一个论坛帖子，其中嵌入了一些调用 Cordova API 以获取 AddressBook 联系人的 javascript，
4.  您在我的应用程序上查看帖子，现在坏人拥有您的所有联系人。

应用程序本身或其使用的任何内容都可能存在 XSS 漏洞，从而使手机完全打开。

手机本身还可以进行其他几种攻击，特别是在手机越狱并且可以修改应用程序的 JS 内容的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:06:15.403

这只是意味着您的应用程序将信任所有外部主机并能够与它们通信。您只需要确保您的应用程序不会让用户轻松跟踪可能危险的链接或输入数据。

如果您可以避免使用 * 那将是最好的，但如果您正在做类似 RSS 阅读器的事情，那么我看不到任何其他方式。

# ruby - 允许在 Enumerable 的 each 中进行块链接吗？

> ID：10465862
> 
> 赞同：4
> 
> 时间：2012-05-05T20:47:06.577
> 
> 标签：ruby, each, enumerable

在互联网上的许多情况下，我看到`each`了 Enumerable 方法的示例：

```
def each(&block)
  @items.each do |item|
    block.call(item)
  end
end 
```

为什么人们不使用这个：

```
def each(&block)
  @items.each(&block)
end 
```

有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:05:24.810

其实我觉得下面这个版本更常见：

```
def each
  @items.each { |i| yield i }
end 
```

这相当于您的第一个代码示例。但是，此版本与您的第二个版本之间存在细微差别：

```
class Test
  def initialize(items)
    @items = items
  end

  def each1
    @items.each { |i| yield i }
  end

  def each2(&block)
    @items.each(&block)
  end
end 
```

观察：

```
irb(main):053:0> Test.new([1,2,3]).each2
=> #<Enumerator: [1, 2, 3]:each>
irb(main):054:0> Test.new([1,2,3]).each1
LocalJumpError: no block given (yield)
    from (irb):43:in `block in each1'
    from (irb):43:in `each'
    from (irb):43:in `each1'
    from (irb):54
    from /usr/bin/irb:12:in `<main>' 
```

如果没有给出块，将块委托给底层迭代的版本实际上返回一个枚举器，这非常好。它允许我们写这样的东西：

```
irb(main):055:0> Test.new([1,2,3]).each2.map { |x| x + 1 }
=> [2, 3, 4] 
```

为了在我们的显式版本中实现同样的效果，我们必须像这样调整它：

```
def each1
  return enum_for(:each1) unless block_given?
  @items.each { |i| yield i }
end 
```

这更冗长。底线：尽可能将块委派给底层可枚举，以避免代码重复和此类微妙的陷阱。

顺便说一句，既然您已经意识到您的方法的双重性质`each`，那么以不同的方式命名它是有意义的。例如，您可以按照`String#chars`or之类的方法的示例`IO#lines`调用您的方法`items`：

```
def items(&block)
  @items.each(&block)
end 
```

# ruby-on-rails - 使用 token_authenticateable 时，使用多个范围登录的用户进行设计

> ID：10465864
> 
> 赞同：3
> 
> 时间：2012-05-05T20:47:13.873
> 
> 标签：ruby-on-rails, ruby, devise, warden

我正在使用具有多个范围（在本例中为用户范围和管理员范围）的 Devise，并且管理员能够使用[Devise wiki 上的方法](https://github.com/plataformatec/devise/wiki/How-To%3a-Sign-in-as-another-user-if-you-are-an-admin)“成为”用户。这很好用，除了我有一个特定页面需要使用身份验证令牌，这会导致在用户和管理员范围内登录的会话出现问题。该页面向控制器生成 POST，该控制器要求用户使用用户身份验证令牌登录。POST 成功，但之后，管理员范围已注销。（意味着 admin_signed_in? 返回 false。）其他页面执行 POST 到同一控制器而不需要 auth 令牌按预期工作，而无需注销 admin 范围。

我怀疑 token_authenticable 发生了一些事情，其中​​除与该特定令牌关联的范围之外的任何范围的身份验证都被注销。我在设计 gem 源中搜索了对设计 sign_out 和warden logout 方法的引用，这些方法可以作为 token_authenticable 功能的一部分调用，但找不到任何东西。

Devise 1.3.4 正在发生这种情况。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:12:30.487

如果其他人正在寻找解决方案，我发现我在对我的问题的评论中描述的 before_filter/after_filter 方法似乎工作正常。我认为更好、更通用的解决方案是对设计 gem 和对warden 的底层调用进行更改，但还没有时间针对这个特定问题进行这些更改。

# c - GNU ld 是否有完全省略 -dynamic-linker (PT_INTERP) 的选项？

> ID：10465875
> 
> 赞同：20
> 
> 时间：2012-05-05T20:48:38.107
> 
> 标签：c, static-linking, dynamic-linking, binutils, pie-chart

我正在 Linux 上尝试纯静态链接的 PIE 可执行文件的概念，但遇到了 GNU binutils 链接器坚持在使用时将 PT_INTERP 标头添加到输出二进制文件的问题`-pie`，即使也给出了`-static`. 有没有办法抑制这种行为？也就是说，有没有办法专门告诉 GNU ld 不要将某些标头写入输出文件？也许使用链接器脚本？

（请不要回答声称它不起作用；我很清楚该程序仍然需要重定位处理 - 加载地址相对重定位只是因为我使用了`-Bsymbolic`- 而且我有特殊的启动代码代替处理这个问题的标准`Scrt1.o`。但是如果没有动态链接器已经启动并完成工作，我无法调用它，除非从二进制文件中对`PT_INTERP`标头进行十六进制编辑。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T03:46:22.237

也许我太天真了，但是......搜索默认链接器脚本、编辑它并删除该`.interp`部分中链接的行还不够吗？

例如，在我的机器中，脚本在其中，`/usr/lib/ldscripts`而有问题的行在`interp : { *(.interp) }`该`SECTIONS`部分中。

您可以转储运行以下命令使用的默认脚本：

```
$ ld --verbose ${YOUR_LD_FLAGS} | \
    gawk 'BEGIN { s = 0 } { if ($0 ~ /^=/) s = !s; else if (s == 1) print; }' 
```

您可以稍微修改`gawk`脚本以删除该`interp`行（或仅使用`grep -v`并使用该脚本来链接您的程序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-27T23:25:12.183

我想我可能已经找到了一个解决方案：简单地使用`-shared`而不是`-pie`制作 pie 二进制文件。您需要一些额外的链接器选项来修补行为，但它似乎避免了对自定义链接器脚本的需要。或者换句话说，`-shared`链接器脚本对于链接静态 pie 二进制文件已经基本正确。

如果我得到它，我将使用我正在使用的确切命令行更新答案。

**更新：**有效！这是命令行：

```
gcc -shared -static-libgcc -Wl,-static -Wl,-Bsymbolic \
    -nostartfiles -fPIE Zcrt1.s Zcrt2.c /usr/lib/crti.o hello.c /usr/lib/crtn.o 
```

其中 Zcrt1.s 是 Scrt1.s 的修改版本，它在正常工作之前调用 Zcrt2.c 中的函数，并且 Zcrt2.c 中的代码处理刚刚经过 argv 和环境数组的辅助向量以找到 DYNAMIC 部分，然后循环重定位表并应用所有相对类型的重定位（唯一应该存在的重定位）。

现在所有这些都可以（通过一些工作）被包装到一个脚本或 gcc 规范文件中......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T03:31:05.763

扩展我之前的笔记，因为这不适合那个小盒子（这只是一个想法或讨论，请不要觉得有义务接受或奖励赏金），也许最简单和最干净的方法是突出添加一个构建后步骤以`PT_INTERP`从生成的二进制文件中删除标头？

甚至比手动编辑标题更容易，并且可能不得不改变所有内容，只需替换`PT_INTERP`为`PT_NULL`. 我不知道您是否可以找到一种通过现有工具（某种可编写脚本的十六进制查找和替换）简单地修补文件的方法，或者您是否必须编写一个小程序来做到这一点。我确实知道 libbfd（GNU 二进制文件描述符库）在后一种情况下可能是您的朋友，因为它会使整个业务变得更加容易。

我想我只是不明白为什么通过`ld`选项执行此操作很重要。如果有的话，我可以理解为什么它会更好；但正如一些（诚然很轻）谷歌搜索表明没有这样的功能，单独和事后进行可能不会那么麻烦。（也许添加标志`ld`比编写替换的脚本更容易`PT_INTERP`with `PT_NULL`，但说服开发人员将其拉到上游是另一回事。）

* * *

显然（如果这是您已经看到的，请纠正我）您可以使用命令覆盖链接描述文件中任何 ELF 标头的行为[，](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_ld_the_GNU_Linker/phdrs.html)[并](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_ld_the_GNU_Linker/phdrs.html)`ld`使用指定特定的标头类型不应该是包含在任何段中。我不确定语法，但我认为它看起来像这样：[`PHDRS`](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_ld_the_GNU_Linker/phdrs.html)`:none`

```
PHDRS
{
  headers PT_PHDR PHDRS ;
  interp PT_INTERP ;
  text PT_LOAD FILEHDR PHDRS ;
  data PT_LOAD ;
  dynamic PT_DYNAMIC ;
}

SECTIONS
{
  . = SIZEOF_HEADERS;
  .interp : { } :none
  ...
} 
```

从[ld 文档](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html)中，您可以使用以下命令覆盖链接器脚本`--library-path`：

```
--library-path=searchdir 
```

> 将路径 searchdir 添加到 ld 将搜索归档库和 ld 控制脚本的路径列表中。您可以多次使用此选项。目录按照在命令行中指定的顺序进行搜索。在默认目录之前搜索命令行上指定的目录。所有 -L 选项都适用于所有 -l 选项，无论选项出现的顺序如何。搜索的默认路径集（没有用 `-L' 指定）取决于 ld 使用的仿真模式，在某些情况下还取决于它的配置方式。请参阅环境变量部分。也可以使用 SEARCH_DIR 命令在链接脚本中指定路径。以这种方式指定的目录将在链接描述文件出现在命令行中的位置进行搜索。

此外，来自[有关隐式链接器脚本的部分](http://sourceware.org/binutils/docs-2.19/ld/Implicit-Linker-Scripts.html#Implicit-Linker-Scripts)：

> 如果您指定了链接器无法识别为目标文件或存档文件的链接器输入文件，它将尝试将该文件作为链接描述文件读取。如果文件不能被解析为链接脚本，链接器会报错。

与隐式定义的链接器脚本相比，这似乎意味着用户定义的链接器脚本中的值*将*替换默认脚本中的值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T21:31:14.813

我不是 GNU ld 方面的专家，但我在[文档](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_18.html#SEC18)中找到了以下信息：

> 特殊的 secname `/DISCARD/' 可用于丢弃输入部分。分配给名为“/DISCARD/”的输出部分的任何部分都不包含在最终链接输出中。

我希望这能帮到您。

更新：

（这是解决方案的第一个版本，它不起作用，因为 INTERP 部分与标题 PT_INTERP 一起被删除。）

主.c：

```
int main(int argc, char **argv)                                                                                                                               
{                                                                                                                                                             
    return 0;                                                                                                                                                 
} 
```

主要的.x：

```
SECTIONS {                                                                                                                                                    
    /DISCARD/ : { *(.interp) }                                                                                                                                
} 
```

构建命令：

```
$ gcc -nostdlib -pie -static -Wl,-T,main.x main.c
$ readelf -S a.out | grep .interp 
```

不带选项 -Wl,-T,main.x 的构建命令：

```
$ gcc -nostdlib -pie -static main.c 
/usr/bin/ld: warning: cannot find entry symbol _start; defaulting to 0000000000000218
$ readelf -S a.out | grep .interp
  [ 1] .interp           PROGBITS        00000134 000134 000013 00   A  0   0  1 
```

更新 2：

此解决方案的想法是将原始部分“INTERP”（链接描述文件中的.interp）重命名为.interp1。换句话说，该节的全部内容都放在 .interp1 节中。因此，我们可以安全地删除 INTERP 部分（现在为空），而不必担心丢失默认的链接描述文件设置，因此标题 INTERP_PT 也将被删除。

```
SECTIONS {
    .interp1 : { *(.interp); } : NONE
    /DISCARD/ : { *(.interp) }
} 
```

为了显示 INTERP 部分的内容存在于文件中（如 .interp1），但已删除 INTERP_PT 标头，我使用了 readelf + grep 的组合。

```
$ gcc -nostdlib -pie -Wl,-T,main.x main.c
$ readelf -l a.out | grep interp
   00     .note.gnu.build-id .text .interp1 .dynstr .hash .gnu.hash .dynamic .got.plt 
$ readelf -S a.out | grep interp
  [ 3] .interp1          PROGBITS        0000002e 00102e 000013 00   A  0   0  1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-07T18:17:04.130

`-Wl,--no-dynamic-linker worked`为了我。

# ios - NSPersistentStoreCoordinator - 如何处理模式不兼容错误？

> ID：10465879
> 
> 赞同：0
> 
> 时间：2012-05-05T20:48:46.783
> 
> 标签：ios, core-data, core-data-migration

每次我为我的应用程序更改 Core Data 模型时，它都会在下次启动时生成一个不可恢复的错误：“用于打开商店的模型与用于创建商店的模型不兼容”。

我发现避免这种情况的唯一可靠方法是手动删除应用程序并让 Xcode 重新安装它，或者使用其他技术手动删除 Core Data 存储 .sqlite 存储文件。这显然不适合运送给用户。

Apple 用于初始化 NSPersistentStoreCoordinator 的默认 App Delegate 模板包括以下注释：

```
 __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
    /*
     TODO: Replace this implementation with code to handle the error appropriately.

     ...

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
     [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

     */ 
```

不过，我还没有找到任何关于如何“正确处理错误”的示例或说明。

在这种情况下，我很乐意简单地删除数据库并让应用程序从在线数据中重新生成它。这就是我手动删除数据库时所做的事情。但是我怎样才能自动响应这个错误情况呢？

是否有任何解释最佳实践的好示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:28:00.053

最好的方法是使用轻量级迁移。请参阅 Apple 文档：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)。

当您需要在新的应用程序版本中更改模型时，您会创建新模型。您在 Xcode 中执行此操作 - 只需选择您当前的模型并从菜单编辑器/添加模型版本中选择...没有这个，自动迁移将无法工作。

# java - Hibernate 身份主键生成器和外键

> ID：10465880
> 
> 赞同：3
> 
> 时间：2012-05-05T20:48:51.900
> 
> 标签：java, hibernate, primary-key, identity

查看了很多地方，发现带有 postgresql 的休眠可以使用一个 IDENTITY 主键生成器，该生成器映射到串行/大串行表列。假设我有关注实体：

```
@Entity
class A {

    long id;

    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    public long getId() { return id; }

} 
```

效果很好，ddl 看起来像：

```
create table A (id bigserial) 
```

不幸的是，任何通过@ManyToOne 引用“a”的尝试都会产生同样是大序列的外键列。

```
@Entity
class B {

    // id ommitted ...

    A a;

    @ManyToOne
    public A getA() {
      return a;
    }

} 
```

生成如下 ddl：

```
create table B (..., a_id bigserial) 
```

在大多数情况下，这可以正常工作。但从逻辑上讲，它是完全错误的。a_id 也与 bigserial“数据类型”无关。

有什么方法可以告诉休眠对表 B 中的 a_id 列使用 bigint 吗？

试图用@JoinColumn 或@Column 注释中的columnDefinition 覆盖一个没有运气的getter。Hibernate 完全忽略了这些注解属性。

# android - 如何防止我的程序排队按钮按下

> ID：10465881
> 
> 赞同：0
> 
> 时间：2012-05-05T20:49:06.687
> 
> 标签：android, audio, nested-loops, thread-sleep, vibration

大家好这是我的第一篇文章，所以请温柔。即使我的 android final 已经完成，我仍然觉得很难不继续调整我的程序并添加到它只是为了它的乐趣。它是一个简单的程序，当您触摸屏幕时，屏幕上的角色会以两种方式中的一种笑，并带有匹配的振动。它工作得很好，但是当我的老师（当时心情不好）去测试它时，他几乎把按钮捣碎了，这使它每次按下按钮都排成一列，我们不得不像 15 次笑声一样坐下来，然后我们才能用手机做更多事情。我想要做的只是有一个触摸事件计数，直到第一个事件完成。它是一个简单的触摸事件，带有几个嵌套的 if 语句。

```
public boolean onTouch(final View v, MotionEvent m) 
    {
        v.setBackgroundResource(R.drawable.laughing);//changes the image to the laughing monkey
            if (m.getAction() == MotionEvent.ACTION_DOWN)
            {
                if (timesTouched != I) //checks to see if the touch amount is not equal to the random number
                {
                    if(laughter != 0) 
                    {       
                        sp.play(laughter, 1, 1, 1, 0, 1);//plays the loaded sound when the screen is pressed
                        //vib.vibrate(900);
                    }
                    Time = 900;
                    timesTouched++;
                    intDelay = 1;
                    if(vibon == 1)
                    {
                        vib.vibrate(Time);
                    }
                }

                else if (timesTouched == I)//checks to see if the touch amount is the same as the random number
                {
                    if(laughter != 0)
                    {
                        sp.play(laughFit, 1, 1, 1, 0, 1);//plays the loaded sound when the screen is pressed
                    }
                    Time = 6000;
                    timesTouched = 0;
                    intDelay = 1;
                    if(vibon == 1)
                    {
                        vib.vibrate(laugh, -1);
                    }
                }

            }

            else if((m.getAction() == MotionEvent.ACTION_UP) && (intDelay == 1))
            {
                try {
                    Thread.sleep(Time);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                v.setBackgroundResource(R.drawable.normal) ;//returns the image to the normal looking monkey
                intDelay = 0;
            }
        return true;
    }
} 
```

睡眠定时器可以防止背景图像在笑声结束之前恢复到默认值。我确实试图让我的老师帮忙，但他只是一个快速的替代品，在今年年初开始教书之前，他甚至从未接触过安卓设备。请您提供的任何帮助将不胜感激，因为到目前为止，我不得不在 Google 搜索的帮助下自学这些东西。

谢谢一堆！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:58:31.437

如果这是我，我可能会将声音播放移动到单独的线程，然后使用消息通知该线程何时开始和停止声音。这样，按钮可以立即发送消息，而不会被任何后续操作阻止。副作用应该是每次按下按钮都会停止前一个笑声并开始一个新的笑声（或者只是在前一个声音字节上排队另一个声音字节，有效地组合声音）。相反，您可以在声音结束之前禁用按钮，但我认为这不会是一个好的用户体验 - 他们希望能够捣碎和捣碎他们的心！

查看[http://developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)以获取有关如何处理此类问题的更多指导。

# c# - 如何在回发时获得下拉值

> ID：10465882
> 
> 赞同：0
> 
> 时间：2012-05-05T20:49:09.557
> 
> 标签：c#, asp.net-mvc-3, drop-down-menu, http-post, viewmodel

我有一个下拉视图，它与视图模型相关联......

视图模型的属性之一：

```
public int selectDTypeID { get; set; } 
```

视图有一个下拉菜单：

```
 Html.DropDownListFor(
       model => model.selectDTypeID , 
       new SelectList(
              new List<Object>{ 
                   new { value = 1 , text = "Test1"  },
                   new { value = 2 , text = "Test2" },
                   new { value = 3 , text = "Test3"}
                },
              "value",
              "text"
       )
    ) 
```

如何在不使用额外参数的情况下获得回发下拉列表的值...我只想能够做到这一点...

```
[HttpPost]
public ActionResult ContinueDonation(AddDonationViewModel model)
{
 var id = model.selectDTypeID;

} 
```

我可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:03:02.013

如果您的视图是这样的强类型视图，

```
@model AddDonationViewModel
@using (Html.BeginForm())
{
   @Html.DropDownListFor(
       model => model.selectDTypeID , 
       new SelectList(
              new List<Object>{ 
                   new { value = 1 , text = "Test1"  },
                   new { value = 2 , text = "Test2" },
                   new { value = 3 , text = "Test3"}
                },
              "value",  "text"))    

    <input type="submit" value="go" />
} 
```

当您单击提交时，所选值将在您的 HttpPost Action 方法的 SelectdTYpeID 属性中可用

```
[HttpPost]
public ActionResult ContinueDonation(AddDonationViewModel model)
{
  var id = model.selectDTypeID;  // You have your selected ID here
} 
```

# jquery - jQuery 在 Chrome 18.0.1025.168 中返回错误的宽度和高度

> ID：10465886
> 
> 赞同：3
> 
> 时间：2012-05-05T20:50:16.353
> 
> 标签：jquery

以下代码未返回文档的正确大小。

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="./scripts/jquery-1.7.2.js"></script>
        <script>
            alert($(document).width());
        </script>
    </head>
    <body style="width:100%">
        <div style="width:100%" id="myappClientContainer">DEFAULT HTML</div>
    </body>
</html> 
```

当我将窗口内容的宽度设置为 320 时，警报显示为 426。

例如，在使用 Internet Explorer 9.0.8112.16421 时，相同的代码会正确报告。

这是 Chrome 的错误吗？还是用 jQuery？还是别的什么？

我在尝试设置`div`文档内部以填充文档的整个大小时偶然发现了这一点，所以这可能不是获取整个文档尺寸的正确方法吗？

我该如何解决这个问题？

* * *

更新 1：

按照下面的一些建议，我已经尝试了这两个：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="./scripts/jquery-1.7.2.js"></script>
        <script>
            function sizeme() {
                alert($(document).width());
            }
        </script>
    </head>
    <body style="width:100%" onload="sizeme()">
        <div style="width:100%" id="myappClientContainer">DEFAULT HTML</div>
    </body>
</html> 
```

和这个：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function sizeme() {
                alert($(document).width());
            }
        </script>
    </head>
    <body style="width:100%" onload="sizeme()">
        <div style="width:100%" id="myappClientContainer">DEFAULT HTML</div>

        <!-- YOUR jQuery SCRIPTS here before the '</body>' tag + load from Google (it's faster). -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script>
            (function($){ // remap '$' to jQuery
                 alert($(document).width());
            })(jQuery);
        </script>
    </body>
</html> 
```

但是我仍然得到了错误的尺寸（**在 Chrome 18.0.1025.168 中**）。

我正在使用 jQuery 1.7.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-15T17:17:29.060

我在 Windows 8 上的 Chrome 版本 33.0.1750.154 m 上遇到了同样的问题

我的笔记本电脑显示器具有水平分辨率：1366 px

然而，Chrome 返回的水平分辨率（宽度）高于我笔记本电脑的硬件能力。

**使用jQuery：**

`$( window ).width()`返回 1483 像素

**使用纯 Javascript：**

`window.innerWidth` 返回 1483 像素

`document.body.clientWidth`返回 1484 像素

（这也行不通）

**结论：** 由于纯 javascript 返回与 jquery 相同的错误值，因此这一定不是 Jquery 中的错误，而是 Chrome 中的错误。

**在我的情况下， Edit** Chrome处于缩小状态。尽管我的测试选项卡上显示了100％放大倍率，当我打开另一个选项卡时，内容显示为小（CTRL +，ctr-在Windows上）时，它已被缩放。将新标签重置为 100%（ctrl 0 0n windows）后，问题消失了。

Firefox 在缩小时的行为与我相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:57:32.603

您在整个文档完成加载之前运行它。尝试这个：

```
$(function(){
    alert($(document).width());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:31:29.213

我建议你这样做：

```
<!DOCTYPE html>
<html>
<head>

<!-- OTHER JS LIBRARY/SCRIPTS -->
</head>     
<body style="width:100%">

<div style="width:100%" id="myappClientContainer">DEFAULT HTML</div>

<!-- YOUR jQuery SCRIPTS here before the '</body>' tag + load from google (it's faster) -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
    (function($){ // remap '$' to jQuery
         alert($(document).width());
    })(jQuery);
</script>

</body>
</html> 
```

保存并在 Chrome 中打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T20:57:24.390

“Div”元素本身填充了所有可用的水平空间，因此无需定义它的宽度。也`$(document).width();`只是获取文档宽度的正确方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T08:47:13.657

尝试`document.body.clientWidth`

这个对我有用

# ios - UIImage 与 NSData - 图像压缩依赖

> ID：10465893
> 
> 赞同：0
> 
> 时间：2012-05-05T20:51:02.273
> 
> 标签：ios, cocoa-touch, uiimage, nsdata

我了解在连接到 3G 网络时下载图像时需要进行图像压缩，但是我的图像看起来非常糟糕……我正在缓存下载的图像，我意识到图像的质量取决于活动连接。我的代码：

```
 KTMember *member = [[DataManager sharedManager] getMemberWithId:memberId];
    if (member) {
        NSLog(@"caching member %d locally",member.memberId);
        memberImg = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:member.imageUrl]]];
        [[DataManager sharedManager] saveImageToDocuments:memberImg withId:memberId];
        return memberImg;
    } else {
        return nil;
    } 
```

所以问题是 - 即使活动网络是 3G，是否有任何方法可以覆盖图像压缩？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:58:51.340

没有全局机制可以自适应地增加慢速连接的图像压缩。您所描述的内容需要服务器上的自定义代码，并且会因服务器而异。

提供这些图像的服务是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:20:49.817

**编辑：**感谢您修复我的答案，Verizon 网络优化有一些图像压缩机制。

我认为，就字节流而言，图像的质量取决于服务器是否提供压缩。

但是有一些解决方案。您还可以`NSURLConnectionDataDelegate`使用线程编程实现处理来自 URL 请求的数据。有一个有趣的方法：

```
/** connection:didReceiveResponse: is called when
 *               enough data has been read to construct an
 *               NSURLResponse object. In the event of a protocol
 *               which may return multiple responses (such as HTTP
 *               multipart/x-mixed-replace) the delegate should be
 *               prepared to inspect the new response and make
 *               itself ready for data callbacks as appropriate.
 **/

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;

/** connection:didReceiveData: is called with a single
  *              immutable NSData object to the delegate,
  *              representing the next portion of the data loaded
  *              from the connection.  This is the only guaranteed
  *              for the delegate to receive the data from the
  *              resource load
  **/

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data;

/** connection:willCacheResponse: gives the delegate
  *              an opportunity to inspect and modify the
  *              NSCachedURLResponse which will be cached by the
  *              loader if caching is enabled for the original
  *              NSURLRequest.  Returning nil from this delegate
  *              will prevent the resource from being cached.  Note
  *              that the -data method of the cached response may
  *              return an autoreleased in-memory copy of the true
  *              data, and should not be used as an alternative to
  *              receiving and accumulating the data through
  *              connection:didReceiveData
  **/

- (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse;

/** connectionDidFinishLoading: is called when all
  *              connection processing has completed successfully,
  *              before the delegate is released by the
  *              connection
  **/

- (void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

您还可以管理您的数据，`didReceiveData`以累积每个传入的数据，并在完成下载时`connectionDidFinishLoading`，您可以处理`NSData`您收到的所有图像。

希望它可以帮助你。

# java - 无法在子项中初始化父项中定义的字段

> ID：10465899
> 
> 赞同：2
> 
> 时间：2012-05-05T20:52:30.953
> 
> 标签：java, oop

如何在父类中定义字段并将子类中的值分配给该字段以便类型可以访问`Room`？我认为这`int bound = 3;`将隐藏父变量...

```
public abstract class Room {public int bound; }

public class DarkRoom extends Room {

     bound = 3;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:55:37.030

在构造函数中分配字段，而不是在类声明中：

```
public class DarkRoom extends Room {
    public DarkRoom() {
        bound = 3;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:53:20.523

您可以使用类初始化块：

```
public class DarkRoom extends Room {
   {
     bound = 3; // error VariableDeclaratorId expected after this token
         // int bound = 3; // hiding?
    }
} 
```

或在类的方法或构造函数中执行初始化`DarkRoom`。

# python - 响应前的 Python urllib2 请求

> ID：10465901
> 
> 赞同：0
> 
> 时间：2012-05-05T20:52:40.480
> 
> 标签：python

我正在尝试用 python 编写一个快速爬虫，但我不想用线程来做。我读了一些文章，说 Scrapy 是单线程的，可以在响应返回之前发出请求。我想知道是否有任何示例代码可以对 urllib 或 urllib2 执行相同操作并在响应返回之前发出新请求。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:03:33.497

Scrapy 很好，但如果您正在寻找替代品，请查看[Eventlet](http://eventlet.net/)。它基于`greenthreads`（又名协程）。他们甚至有一个简单的网络爬虫示例 - [http://eventlet.net/#web-crawler-example](http://eventlet.net/#web-crawler-example)

# mongodb - 如何在mongoDB中查询多个结果

> ID：10465905
> 
> 赞同：0
> 
> 时间：2012-05-05T20:53:02.530
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

如果我想查找多个查询参数的文档（抱歉，如果没有使用正确的措辞），我该怎么做？我正在使用 c# 驱动程序。

示例我想查找 provider1 和 provider2 的文档，我可以为一个，即 `collection.Find(Query.EQ("ProviderId", providerId))`

在 TSQL 中：

```
Select * From ProviderTable
Where ProviderId In (1,2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:55:47.187

如果我理解正确，您正在寻找这个：

```
var ids = new List<int> {1, 2};

var results = collection.Find(Query.In("ProviderId", new BsonArray(ids))); 
```

# google-bigquery - 始终收到“意外”错误

> ID：10465906
> 
> 赞同：0
> 
> 时间：2012-05-05T20:53:12.770
> 
> 标签：google-bigquery

我一直从 BigQuery 得到这个结果：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "internalError",
    "message": "Unexpected. Please try again."
   }
  ],
  "code": 503,
  "message": "Unexpected. Please try again."
 }
} 
```

导致它的查询具有以下形式：

```
SELECT y.f1, y.f2, y.f3, y.f4, y.f5, y.f6, y.f7,  
       t.f1, t.f2, t.f3, t.f4, t.f5, t.f6, t.f7
FROM
  (
    SELECT 
      f1, f2, f3, f4, f5, f6, f7 
    FROM
      ds.data_20120503 
    WHERE 
      kind='A'
  )
  AS y
  JOIN 
  (
    SELECT 
      f1, f2, f3, f4, f5, f6, f7 
    FROM
      ds.data_20120504 
    WHERE 
      kind='A'
  )
  AS t
  ON y.f7 = t.f7 
```

如果我只运行子选择，它们工作正常，所以我想它与“加入”有关。我应该从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:06:29.433

我怀疑您看到的是（1）返回的数据过多，以至于（2）我们返回了一个可怕的错误消息。您是否知道每个子选择中对于固定值的大致有多少行`f7`？

要检查，您可以尝试向`LIMIT 10`每个子选择添加 a 并再次运行查询。如果可行，我们需要想出一种方法来编写查询以找出您想知道的内容。如果仍然失败，请发送一个`job_id`以便我们进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:19:51.327

看起来您在 bigquery 中遇到了一个错误——当两个连接键的名称相同并且都在结果中返回时，我们会得到一个无效的模式并导致查询失败。我已经在内部将此作为错误提交，希望很快会有修复。

作为一种解决方法，如果您从所选结果中删除 y.f7 或 t.f7 （因为您要加入它们的相等性，包括两者，因为结果是多余的）。或者，您可以在其中一个选择中使用 as 子句将其命名为其他名称 - 如`f7 as joinedF7`.

# php - Fast YUI Editor

> ID：10465907
> 
> 赞同：-2
> 
> 时间：2012-05-05T20:53:13.240
> 
> 标签：php, windows, ide, yui, sublimetext2

I am used to metapad (basically a more fault tolerant notepad), dreamweaver (memory hog with neat syntax highlighting, and basic error detection), and hotdog (antique, dont use this anymore!).

What I want to do is migrate to a better editor that isn't a memory hog like dreamweaver, but also is closer to the edge of production programming. I use SFTP alot with my internals, FTP basic with my external projects, and I also want to use SVN. <- Most of these protocols dont need to be built into the editor, but it would be nice.

My question is this;

I have looked at Sublime Text 2, the responsiveness is amazing, but it's broken. Alot. And every time someone mentions this. They suggest that it will be that way cause it's a "beta" release.

Is there something else that I should use that is similar or uses the same plugins? How do I make sublime more stable short of de-compiling the thing, and trying to hack it to behave with Windows? (or perhaps, Simple Text 2 is purely for Mac users?) Let me know!

My Target Market; Speed, Lightweight (Aptana & Dreamweaver use around ~150MB memory), Keyboard intensive preferred (or at least shortcut friendly), works in portable mode (install not required)

Platforms required; Windows 7/XP, Linux CentOS 6.x (with PuTTY please?)

Platforms wanted; Android OS / Apple iOS - friendly with bluetooth support (?)

Syntax highlighting/coding specific for/with; *Important PHP 5.x, MySQL, YUI

Syntax highlighting supported for; *Not so important HTML, XML, and maybe.. YAML/MongoDB (?)

Works with or does something similar to; (Zen Coding - fast way to write repetitive tasks) [http://code.google.com/p/zen-coding/](http://code.google.com/p/zen-coding/)

I DO NOT care for; Debuggers.. why? Because I can write debugger stuff in my own code, and often.. even inside of dreamweaver I never use their test browser cause I always end up wanting to use a full-fledged browser with extensions like firebug/ySlow inside of IE9, Firefox 12, Chrome, etc.

** Updated with more specific requirements.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:50:05.747

It sounds like you value stability and robustness. My long-time text editor on Windows was [UltraEdit](http://www.ultraedit.com/). It's not one of the "hip" new editors, but it's solid and has support for a lot of things, though it does take some configuration to get going. It isn't free, however. All the open source or free text editors I've found for Windows (esp. Notepad++, which is often recommended) are even more "broken" than Sublime Text 2 (which I find to be pretty good, actually).

On Mac, I use [TextWrangler](http://www.barebones.com/products/textwrangler/) which is free, stable, and great. I have no idea how you intend to find a text editor that'll actually on Mac, Windows *and* Android (the first two I understand... the latter, however, will naturally be a completely different product).

Both UltraEdit and TextWrangler have been around for a long time and have had most of their kinks and quirks worked out. They're reliable products and can be trusted to simply handle whatever you throw at them, in my experience.

# mvvm-light - 在 MVVM Light 和 SimpleIOC 中使用设计时存储库

> ID：10465915
> 
> 赞同：3
> 
> 时间：2012-05-05T20:54:28.787
> 
> 标签：mvvm-light

我已经开始使用最新的 MVVM Light 工具包 v4 (NuGet preview v4.1.21, DLL v: 4.0.21.25725)，它实现了 SimpleIOC 模式。

在我的 ViewModelLocator.cs 中，我有以下内容来处理设计和运行时存储库：

```
public ViewModelLocator()
{
  ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);
  if (ViewModelBase.IsInDesignModeStatic)
  {
    SimpleIoc.Default.Register<IWebRepository, DesignWebRepository>();
  }
  else
  {
    SimpleIoc.Default.Register<IWebRepository, WebRepository>();
  }

  SimpleIoc.Default.Register<MainViewModel>();
}

public MainViewModel Main
{
  get
  {
    return ServiceLocator.Current.GetInstance<MainViewModel>();
  }
} 
```

但这给了我*在设计*器中的以下异常（所以没有编译错误，也没有运行时错误，但我失去了我的 Blendability）视图：（
`Class Repository.IWebRepository is already registered`
在第一个 .Register() 调用中）

IWeb存储库：

```
public interface IWebRepository
{
  string Test(string data);
} 
```

设计网络存储库：

```
public class DesignWebRepository : IWebRepository
{
  public string Test(string data)
  {
    return "design result: " + data;
  }
} 
```

网络存储库：

```
public class WebRepository : IWebRepository
{
  public string Test(string data)
  {
    return "result: " + data;
  }
} 
```

主视图模型：

```
public class MainViewModel : ViewModelBase
{
  IWebRepository webRepository;

  public MainViewModel(IWebRepository webRepository)
  {
    this.webRepository = webRepository;
    if (IsInDesignMode)
    {
      // Code runs in Blend --> create design time data.
    }
    else
    {
      // Code runs "for real"
    }
  }
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:30:05.130

```
 if (ViewModelBase.IsInDesignModeStatic)
        {
            if (!SimpleIoc.Default.IsRegistered<IRepository>())
            {
                SimpleIoc.Default.Register<IRepository, DesignWebRepository>();
            }
        }
        else
        {
            SimpleIoc.Default.Register<IRepository, WebRepository>();
        } 
```

请注意检查存储库是否已注册以防止重复注册。希望这可以解决您的问题

# facebook - 上传第一次更改后 Heroku 服务器关闭

> ID：10465916
> 
> 赞同：1
> 
> 时间：2012-05-05T20:54:33.770
> 
> 标签：facebook, git, heroku

我刚刚在 Heroku 上设置了一个 Facebook 应用程序，经过一番麻烦，我终于通过“git push heroku master”成功上传了它。之后，该网站将无法加载。试试自己，在：[https ://electric-galaxy-6836.herokuapp.com/](https://electric-galaxy-6836.herokuapp.com/)

# php - 如果启用了 register_global 会怎样

> ID：10465921
> 
> 赞同：3
> 
> 时间：2012-05-05T20:55:28.183
> 
> 标签：php, register-globals

我有一个简单的验证码，当 register_global 被禁用时可以完美运行，根据 PHP Manual [Using Register Globals这是正确的](http://php.net/manual/en/security.globals.php)

但有时我会搬到许多主机上，他们默认启用全局注册，所以我的验证码停止工作，即使输入正确，也总是给出错误的验证码。

**我的问题**

如果启用了 register_global 以及禁用了，为什么它不起作用？

**编码**

验证码.php

```
<?PHP
session_start();
$digits_num=5;
$x_pos=25;
$y_pos=6;
$font_size=5;
function random_num($n){
$start_num = "1".str_repeat("0", $n-1);;
$end_num   = str_repeat("9", $n);
return rand($start_num, $end_num);
}
$text = random_num($digits_num);
$_SESSION["captcha_num"] = md5($text);
$captcha = imagecreatefrompng("./images/captcha.png");
$font_color['black']=imagecolorallocate($captcha, 0, 0, 0);
$font_color['white']=imagecolorallocate($captcha, 80, 73, 20);
imagestring($captcha, $font_size, $x_pos, $y_pos, $text, $font_color['white']);
header("Content-type: image/png");
imagepng($captcha);
?> 
```

表格

```
<form name="frm" method="post" action="add.php">
<img src="captcha.php">
<input type="text" name="captcha_num" id="captcha_num" >
<input type="submit" name="submit" id="submit" value="submit">
</form> 
```

添加.php

```
<?PHP
session_start();
if(md5($_POST['captcha_num']) != $_SESSION['captcha_num']){
echo "Wrong captcha";
}else{
echo "Good Pass it";
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T21:15:07.893

从您参考的手册页中：

> 自 PHP 5.3.0 起，此功能已弃用，自 PHP 5.4.0 起已移除
> （...）
> 也许 PHP 中最具争议的变化是 PHP 指令 register_globals 的默认值在 PHP » 4.2 中从 ON 变为 OFF .0.

换句话说：**关掉它**。

## 我怎样才能关闭它？

### 选项 1：使用[`ini_set`](http://php.net/ini-set)

将此代码放在您的代码之上（或在引导文件中，如果有的话）

```
ini_set('register_globals', 'Off') 
```

### 选项 2：使用 htaccess

在您网站的根目录中创建一个`.htaccess`文件并将此代码添加到其中：

```
php_flag register_globals Off 
```

* * *

如果你使用了不好的技术，不要问自己为什么脚本是错误的，问问自己如何关闭/避免使用不好的技术。

# opengl - 设置opengl透视投影

> ID：10465926
> 
> 赞同：1
> 
> 时间：2012-05-05T20:56:34.710
> 
> 标签：opengl, glulookat

我在设置观看投影时遇到问题。我正在绘制一个顶点为 (0, 0, 0) (0, 0, 1) (0, 1, 1) (0, 1, 0) (1, 0, 0) (1, 1, 0) 的立方体(1, 1, 1) 和 (1, 0, 1)。这就是我初始化视图的方式：

```
void initGL(int x,int y, int w, int h)
{
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH );
    glutInitWindowPosition( x, y );
    glutInitWindowSize( w, h );
    glutCreateWindow( "CSE328 Project 1" );

    glutDisplayFunc(draw);
    glFrontFace(GL_FRONT_AND_BACK);
    glMatrixMode(GL_PROJECTION);
    glFrustum(-10.0, 10.0, -10.0, 10.0, 2.0, 40.0);
    glMatrixMode(GL_MODELVIEW);
    gluLookAt(10, 10, 10, 0.5, 0.5, 0, 0, 1.0, 0);
    glutMainLoop();
} 
```

出于某种原因，立方体填满了整个屏幕。我尝试更改截锥体和lookAt 方法的值，并且立方体根本不可见，或者它填充了整个视口。在 glLookAt 中，我假设“眼睛”位于 (10, 10, 10) 并注视着立方体表面上的点 (0.5, 0.5, 0)。我认为这将提供足够的距离，以便整个立方体可见。我是否以错误的方式思考这个问题？我还尝试在 z 方向上移动立方体，使其位于 z = 10 到 z = 11 之间，在剪切平面中也是如此，但它给出了类似的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T00:31:38.283

Moving the eye position further from the cube by changing the first 3 parameters of `gluLookAt()` should make it smaller.

You could also replace your call to `glFrustum()` with a call to `gluPerspective()` which would make it easier to configure the perspective projection to your liking.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:13:38.200

立方体的长度为 1，查看体积在 x 和 y 维度上跨越 20 个单位。即使是正交投影，立方体也会在中间占据一些像素；*除非*在绘图期间应用了其他一些变换。

我建议缩小截头锥体（例如`+/- 2.0f`）并将相机移近一些；`(4.0f, 4.0f, 4.0f)`.

# php - Google MAPS API V3 --> 如何显示存储在我的 MYSQL 表中的所有多边形？

> ID：10465927
> 
> 赞同：4
> 
> 时间：2012-05-05T20:56:37.330
> 
> 标签：php, javascript, mysql, google-maps-api-3

我是 google MAPS API V3 的新手，我想获得一些帮助。我在我的网站上绘制多边形，效果很好。我将多边形的坐标保存在 MYSQL 数据库中，这是表的结构：

```
CREATE TABLE IF NOT EXISTS `localite` (
  `id_localite` int(11) NOT NULL AUTO_INCREMENT,
  `libele_localite` varchar(255) NOT NULL,
  `lat_localite` text NOT NULL,
  `long_localite` text NOT NULL,
  PRIMARY KEY (`id_localite`)
) 
```

如您所见，我已将 lats 和 longs 划分为单独的列，并使用 PHP 获取坐标。

lat_localite 列仅包含纬度坐标，而 long_localite 列仅包含经度坐标，我通过使用 Javascript 并在 2 个单独的文本区域中编写内容来获取此坐标。这是代码：

```
google.maps.event.addListener(drawingManager, 'polygoncomplete', function(polygon) {
  var patths = polygon.getPath();
  var stuh = patths.getLength();
    var lat_localite='';
    var long_localite='';
        for (var i=0; i<(stuh) ;i++)
        {
        lat_localite  += (patths.getAt(i).lat()+'\n');
        long_localite += (patths.getAt(i).lng()+'\n');

        document.forms['formId'].elements['Textarea1ID'].value=lat_localite;
        document.forms['formId'].elements['Textarea2ID'].value=long_localite;

        }   
}); 
```

所以现在我想显示存储在我的表格中的所有多边形，我不知道该怎么做你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:54:52.473

使用 V3，这很容易。

```
var polygons = []; 
```

然后只需使用以下代码遍历数据库中的所有多边形。

```
 //Add all your coordinates in with new google.maps.LatLng(lat, lng),
  var coords = [
    new google.maps.LatLng(12.5, -8.2),
    new google.maps.LatLng(12.52, -8.21),
    etc....
  ];

  // Construct the polygon
  polygons.push(new google.maps.Polygon({
    paths: coords,
    other_options: etc....
  }));

  polygons[polygons.length-1].setMap(map); //Your map object 
```

其次（出于兴趣），MySql 可以使用空间数据类型存储多边形（查看[多边形数据类型](http://dev.mysql.com/doc/refman/5.0/en/mysql-spatial-datatypes.html)）

如果您需要查询数据，这会有所帮助。您被限制为最小边界矩形，但我认为这种数据类型更适合 .

要从 MySql 中提取多边形作为 lat/lng 坐标，请查看 mysql 的 AsText() 函数。

例如：

```
select AsText(my_polygon_column) as blob; 
```

然后通过这个 php 函数传递它：

```
function sql_to_coordinates($blob)
    {
        $blob = str_replace("))", "", str_replace("POLYGON((", "", $blob));
        $coords = explode(",", $blob);
        $coordinates = array();
        foreach($coords as $coord)
        {
            $coord_split = explode(" ", $coord);
            $coordinates[]=array("lat"=>$coord_split[0], "lng"=>$coord_split[1]);
        }
        return $coordinates;
    } 
```

# php - mysql 转义 getsqlvaluestring AccID

> ID：10465929
> 
> 赞同：1
> 
> 时间：2012-05-05T20:56:44.130
> 
> 标签：php, mysql, session, escaping

在各种mysql查询中，查询字符串的结尾部分是：

```
" WHERE UserID = " . $AccID 
```

在哪里

```
$AccID = $_SESSION['UID']; 
```

并且 UserID 是数据库特定表中尊重的 bigint 列。

所以我的问题是：为了安全起见，我是否需要`$AccID`像这样逃避`GetSQLValueString($AccID, "text")`，还是没有必要，因为它不是从用户输入中获取的？

ps`$_SESSION['UID']`在登录过程中设置，在成功验证后

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:08:40.317

是的，你应该逃避它。当您将其放入时`$_SESSION`（您可能希望将其用于其他目的），但在插入查询之前，您不应该对它进行数据库转义。

您最好的选择是使用参数化 SQL，而不是总是通过字符串连接转义和构建查询。熟悉[PDO](http://www.php.net/manual/en/book.pdo.php)。[为了更美好的世界](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

# python - Python：拆分时如何获得正确的列表？

> ID：10465930
> 
> 赞同：2
> 
> 时间：2012-05-05T20:56:45.950
> 
> 标签：python

在 test.txt 中，我有 2 行句子。

```
The heart was made to be broken.
There is no surprise more magical than the surprise of being loved. 
```

编码：

```
import re
file = open('/test.txt','r')#specify file to open
data = file.readlines()
file.close()
for line in data:
    line_split = re.split(r'[ \t\n\r, ]+',line)
    print line_split 
```

代码的结果：

```
['The', 'heart', 'was', 'made', 'to', 'be', 'broken.', '']
['There', 'is', 'no', 'surprise', 'more', 'magical', 'than', 'the', 'surprise', 'of', 'being', 'loved.'] 
```

如何只打印单词？（见第一句）期望结果：

```
['The', 'heart', 'was', 'made', 'to', 'be', 'broken.']
['There', 'is', 'no', 'surprise', 'more', 'magical', 'than', 'the', 'surprise', 'of', 'being', 'loved.'] 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T20:58:01.167

`split`您可以使用`findall`否定的正则表达式来匹配要保留的部分，而不是使用来匹配分隔符：

```
line_split = re.findall(r'[^ \t\n\r., ]+',line) 
```

在线查看它：[ideone](http://ideone.com/OV2dq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:59:38.300

要修复，并进行一些其他更改，请进一步解释：

```
import re

with open("test.txt", "r") as file:
    for line in file:
        line_split = filter(bool, re.split(r'[ \t\n\r, ]+', line))
        print(line_split) 
```

在这里，我们使用 a[`filter()`](http://docs.python.org/library/functions.html#filter)从结果中删除任何空字符串。

请注意我使用[该`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)打开文件。这更具可读性，并为您处理关闭文件，即使在异常情况下也是如此。

我们还直接遍历文件 - 这是一个更好的主意，因为它不会一次将整个文件加载到内存中，这不是必需的，并且可能会导致大文件出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:38:31.890

```
words = re.compile(r"[\w']+").findall(yourString) 
```

演示

```
>>> yourString = "Mary's lamb was white as snow."
["Mary's", 'lamb', 'was', 'white', 'as', 'snow'] 
```

如果你真的想要月经，你可以将它们添加为`[\w'\.]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T04:50:43.370

```
In [2]: with open('test.txt','r') as f:
   ...:     lines = f.readlines()
   ...:

In [3]: words = [l.split() for l in lines]

In [4]: words
Out[4]:
[['The', 'heart', 'was', 'made', 'to', 'be', 'broken.'],
 ['There',
  'is',
  'no',
  'surprise',
  'more',
  'magical',
  'than',
  'the',
  'surprise',
  'of',
  'being',
  'loved.']] 
```

# javascript - 更改元素的可见性时不调用事件

> ID：10465931
> 
> 赞同：3
> 
> 时间：2012-05-05T20:57:07.050
> 
> 标签：javascript, events, dom

我有一个页面需要定期切换 div 的可见性。问题是与父元素之一相关的点击事件通常不会被调用。如果我停止可见性切换或减慢它的速度（例如 300 毫秒而不是 100 毫秒），则单击事件将正常触发。

我创建了一个简短的例子来说明这个问题。你可以在这里测试它：http: [//threeds.me/0xC0DE/](http://threeds.me/0xC0DE/)

点击蓝色/红色方块理论上应该触发点击事件。当没有动画（此处为默认行为）时，单击蓝色方块将始终触发 onclick 事件。如果您单击“播放/暂停”，红色方块的可见性将开始每 100 毫秒切换一次。播放动画时，每次单击正方形时都不会调用单击事件。

我怀疑更改可见性会以某种方式弄乱 DOM，从而导致事件停止几毫秒。我还尝试切换 css 可见性属性以最小化对页面的影响，但结果相同。

但这不仅仅是事件。如果我将整个容器封装在一个标签中，则浏览器不会始终考虑单击该元素。所以就像改变子元素的可见性会使父母（相当）一段时间失明，我觉得这很奇怪。

这个问题与 Firefox、Chrome 和 Opera 一致（都在 mac 上，无法测试 ie）所以这意味着我没有得到一些东西。因此，即使我没有得到解决方案，我也想了解问题所在。

这里是供您立即参考的来源

```
<!DOCTYPE html>
<html>
<head><title>Wiggle problem</title>
<style>
#dback {
    width: 200px;
    height: 200px;
    background-color: red;
}
#dfront {
    width: 200px;
    height: 200px;
    background-color: blue;
}
</style>

<script type="text/javascript">
var run = false;
function playpause() {
    if ( run ) {
        run = false;
    } else {
        run = true;
        update();
    }
}

function update() {
    if ( run==false ) {
        return;
    }

    var el = document.getElementById('dfront');
    if ( el.style.display != 'none' ) {
        el.style.display = 'none';
    }
    else {
        el.style.display = '';
    }

    setTimeout("update();", 100);
}
</script>

</head>

<body>
<a href="#" onclick="playpause();">play/pause</a>
<div id="container" onclick="d=new Date();t=d.getTime();document.getElementById('info').innerText='click '+t;">
    <div id="dback">
        <div id="dfront"></div>
    </div>
</div>
<span id="info"></span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:53:31.710

这真的很奇怪！但是，我做了一些[测试](http://jsfiddle.net/svB3m/)并稍微修改[了您的代码](http://jsfiddle.net/HqCnz/5/)，现在我认为它与冒泡无关（您可以在我的测试中看到点击带有`visibility: hidden`气泡的元素就好了）。

这是我*认为*可能发生的事情：由于您的计时器间隔非常短，因此没有足够的时间来注册实际的点击——点击是一个`mousedown`事件，然后是一个`mouseup`事件，在同一个元素上。在您的情况下发生的情况是，`mouseup`它经常在另一个元素上被触发，而不是与触发相同的元素，`mousedown`因此没有`click`事件。请参阅上面的第二个链接，我将间隔减少到 1 秒，并尝试单击蓝色方块，然后在红色方块上释放鼠标按钮（反之亦然）。没发生什么事。我可能完全错了，但这看起来很合理。

我知道这不是解决方案，但您说：

> 因此，即使我没有得到解决方案，我也想了解问题所在。

我希望这可以帮助你找到一个！

最后但并非最不重要的一点是，关于您的代码的一些附注：

1.  `setTimeout`不推荐您调用的方式（传递字符串），因为它会强制在[`eval`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval)内部使用，[`eval`应尽可能避免](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)。无需将字符串与函数调用代码一起传递，只需传递函数本身：

    ```
    setTimeout(update, 100); 
    ```

2.  如今，使用[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)（或[`attachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx) 对于 IE）将事件绑定到元素被认为是一种最佳实践，而不是使用像`onclick="..."`. 这有几个优点，比如帮助分离行为、结构和布局，并使事件对象自动可供事件处理程序使用（作为处理程序函数的第一个参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:21:23.693

实际上，当“dfront”可见时，它会悬停在“容器”上，当您单击时，事件会转到“dfront”。但是对于“dfront”元素，没有 onclick 事件。“容器”的 Onclick 事件不会在子元素上传播 - 这是正常的，您可以使用 jquery 解决它，它具有事件的“事件传播”选项。或者只是为“dfront”设置 onclick 事件。

您也可以在“容器”和“dfront”上创建透明层并将事件绑定到它。或者，在窗口对象上创建 onmouseclick 事件，这将通过检查它们的坐标来确定鼠标位置是否超过“dfront”，如果为 true，则将触发事件处理程序。

# c - gtk+/gtksourceview 如何插入行注释或块注释

> ID：10465933
> 
> 赞同：2
> 
> 时间：2012-05-05T20:57:19.867
> 
> 标签：c, gtk, gtksourceview

我正在使用 gtk+-2.0 gtksourceview-2.0 在 C 中创建一个文本编辑器。我无法找到有关如何评论一行或一个块的任何信息。我找到了大量关于如何突出显示这些注释行的信息，但没有关于实际创建这些注释的信息。我搜索了 google、devhelp 以及遇到困难时使用的 gedit 和 anjuta 资源。没有喜悦。

我是否需要从头开始编写此功能，或者 gtksourceview 中是否有任何预先存在的功能可以启用此功能？我不介意从头开始编写它，它看起来就是这样的基本功能，我不想浪费时间重新发明轮子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:36:11.773

该功能不存在。如果您不想重新发明轮子，请参阅[此代码以获取示例；](https://github.com/ptomato/gnome-inform7/blob/master/src/actions.c)看看函数`action_comment_out_selection()`和`action_uncomment_selection()`。

# php - Zend_Db: fetchAll() 或 query()/fetch() 获取大量记录

> ID：10465944
> 
> 赞同：10
> 
> 时间：2012-05-05T20:59:17.447
> 
> 标签：php, zend-framework, zend-db

假设我有

```
$db is an instance of Zend_Db_Adapter_Abstract and
$sql = 'SELECT blah blah FROM table' will return a huge number of records. 
```

有两个代码片段来处理返回的数据，如下所示。

```
// Code fragment 1 (let's call it C1).
$results = $db->fetchAll($sql);
foreach ($results as $row) {
    // Process $row
}

// Code fragment 2 (let's call it C2).
$stmt = $db->query($sql);
while ($row = $stmt->fetch()) {
    // Process $row
} 
```

我的理解是 C1 会将所有返回的数据加载到 $results 中。因此，大量数据被加载到 PHP 内存中。以下是我的问题。

1.  C2 是将所有数据加载到 PHP 内存还是像准备/执行一样一一处理？
2.  假设没有其他选择，C1 或 C2 是更好的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-05T21:16:32.900

你的预感是正确的。至少如果您使用 PDO 驱动程序，->fetch() 会读取未缓冲的结果，而 ->fetchAll() 会返回大数组中的所有数据。

请注意，如果您使用 ->fetch()，则必须小心在循环中尝试执行的操作。当您仍然有一个无缓冲的结果集时，您不能在同一连接上运行其他查询。

因此，如果您的计划是在循环中更新这些相同的行，您将需要找到一种方法来延迟执行更新（通过排队然后以某种方式），直到您退出循环。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-05T21:57:21.023

> 要从**结果集中**检索一行，请使用语句对象的 fetch() 方法。[**参考**](http://framework.zend.com/manual/en/zend.db.statement.html)

```
$sql = 'SELECT blah blah FROM table';
$stmt = $db->query($sql);
while ($row = $stmt->fetch()) {
    // Process $row
} 
```

在上面的示例中，`$stmt = $db->query($sql);`检索了`resultset`内存中的 并`fetch`用于从 中获取循环中的当前行`resultset`，这会将光标移动到下一行，直到到达 中的最后一行`resultset`。

> 要在一个步骤中检索结果集的所有行，请使用 fetchAll() 方法。这相当于在循环中调用 fetch() 方法并返回数组中的所有行。

```
$sql = 'SELECT blah blah FROM table';
$stmt = $db->query($sql);
$rows = $stmt->fetchAll();
echo $rows[0]['col1']; // The first field/column from the first row 
```

或者，您可以使用

```
....
$table = new Mytable();
// Find a single row Returns a Rowset
$rows = $table->find(1234);

// Find multiple rows Also returns a Rowset
$rows = $table->find(array(1234, 5678)); 
```

**参考：** [**Zend_Db_Table。**](http://framework.zend.com/manual/en/zend.db.table.html).

**更多信息：** [**获取一行。**](http://framework.zend.com/manual/en/zend.db.table.row.html).

我认为`fetchAll()`更快，因为它一步检索所有数据并返回一个数组但消耗更多内存但`fetch()`消耗更少内存但逐个检索数据。

> 获取操作的 API 已被取代，以允许 Zend_Db_Table_Select 对象修改查询。但是，不推荐使用的 fetchRow() 和 fetchAll() 方法将继续工作而无需修改。

**更多参考：** [**这里。**](http://framework.zend.com/manual/en/zend.db.table.html)

# sql-server - 关于在 SQL Server 上为各种查询创建单列索引

> ID：10465946
> 
> 赞同：4
> 
> 时间：2012-05-05T21:00:02.183
> 
> 标签：sql-server, indexing

让我们假设这样的表

```
[KEY] [int] NOT NULL,
[INT1] [int] NULL,
[INT2] [int] NULL,
[INT3] [int] NULL,
[STR1] [varchar](20) NULL,
[STR2] [varchar](20) NULL,
[STR3] [varchar](20) NULL, 
```

查询非常灵活，但总是喜欢这种格式： `SELECT KEY FROM [TABLE] WHERE...`

搜索条件很少在单列上，大部分时间在几列上，对于`[int]`类型，查询为`BETWEEN`or `>=`，`<=`对于`varchar`，总是查询为`=`or `IN []`。所有条件都与`AND`

由于查询并不总是固定在同一列上，所以我想知道，如果我`INDEX`在每一列上创建，它会提高性能，还是完全浪费。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T21:25:31.570

不要只在每一列上创建索引——这完全是浪费时间和资源！

基本上，我的方法总是：

1.  在任何“普通”表上定义一个**好的**主键和集群键（例如临时表等除外）——这已经是一大步了

2.  将非聚集索引放在任何外键列上——这些确实有很大帮助，尤其是 JOIN 的

就是这样！

**然后：**

*   观察你的系统 - 看看事情何时变慢
*   测量系统性能
*   捕获服务器端跟踪以获取有代表性的工作负载
*   分析该工作量，并查看哪些附加索引可能会有所帮助
*   做调整 - 一次一个
*   一次又一次地测量，看看您是否提高了系统性能（或没有）

您需要一个完整的、有代表性的工作负载来查看哪些查询是真正常见的并且被大量使用 - 并查看哪些索引可能对那些频繁的查询有益。否则，您可能会为所有错误的查询提供索引帮助，并且实际上可能会减慢速度……

您会惊讶于非聚集索引真正有帮助的少之又少！

不要**过度索引**- 这和根本没有索引一样糟糕 - 如果不是更糟的话！可能会更糟，因为您拥有的每个索引也需要在其生命周期内进行**维护**......而且没有免费的午餐 - 即使在这里......

请参阅 Kimberly Tripp 的优秀博客文章[索引：仅仅因为你可以并不意味着你应该！](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Indexes_JustBecauseUCan_NO.aspx)关于这个话题 - 非常有帮助，有很多见解。或者基本上，[只需阅读 Kim 在索引上发表的所有博客](http://www.sqlskills.com/blogs/kimberly/category/indexes.aspx)- 她是*索引女王，*她在博客上发布的任何内容通常都非常有帮助和有益！

此外，根据 SQL Server 的查询优化器的意见，SQL Server 2005 和更新版本提供 DMV（动态管理视图），允许您找出哪些索引没有被使用（可以删除）或丢失哪些索引。有关详细信息，请参阅[SQL Server - 查找丢失和未使用的索引](http://weblogs.sqlteam.com/mladenp/archive/2009/04/08/SQL-Server---Find-missing-and-unused-indexes.aspx)。但请注意：这些是**动态**视图——它们在每次系统启动时都会重置，可能并不完全准确——不要只做他们告诉你的所有事情——对所有事情都持保留态度，仔细考虑你所做的事情——记录下来，以便您可以撤消它，如果事情变得更糟而不是更好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:28:17.760

[如通用索引设计指南](http://msdn.microsoft.com/en-us/library/ms191195%28v=sql.105%29.aspx)中所述，在每一列上创建索引可能会影响性能：

> 表上的大量索引会影响 INSERT、UPDATE、DELETE 和 MERGE 语句的性能，因为所有索引都必须随着表中数据的变化而适当调整。

此外，如果您希望始终`KEY`在查询中检索该列，请考虑将其添加为索引中的*包含列*，以便仅访问索引即可检索它，避免访问表。但请记住，创建包含列的索引自 SQL Server 2005 及更高版本以来可用。

您可以检查最常见的过滤器组合，并且只添加一些*多*列索引，请记住：

> 如果索引将包含多个列，请考虑列的顺序。应将在等于 (=)、大于 (>)、小于 (<) 或 BETWEEN 搜索条件中的 WHERE 子句中使用的列或参与连接的列放在首位。附加列应根据其独特性级别进行排序，即从最独特到最不独特。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:25:05.250

如果直接导致正确的结果，放入索引将部分帮助查询，但如果它提高引用的局部性并减少读取的内存量，也会带来很大的好处。

对于所提出的问题，答案是“视情况而定”。这取决于您的查询。如果查询了一个主要列，它总是出现在搜索中，例如`INT1`，在以下位置创建索引：

```
 unique (INT1, INT2, INT3, REF) 
```

然后任何引用 INT1 的查询和其他字段的任何组合都会很快。

此外，任何引用 INT2 但不是 INt1 的查询也将受益，因为不需要读取整个表 - 只需读取索引。即使 INT2 不在索引的头部，查询仍然有好处：DB 将跳过 INT1 并只查看 INT2，但它可以获得表 INT2 值的视图，而无需读取整个表。

所以你真的需要更好地理解将要完成的查询。如果总是出现一列，请将其放在索引的开头。如果出现另一列 OFTEN，那应该是第 2 列。

如果有两列都经常出现，你可以这样做：

```
unique (INT1, INT2, INT3, REF),
unique (INT2, INT1, INT3, REF) 
```

那么我们希望如果没有指定 INT1，但指定了 INT2，则使用第二个索引。

但是不要使用太多索引，它们会占用大量磁盘空间。

**底线：**测试有和没有索引的查询。您需要至少收集 10-20 个样本查询，并测试它们的 IO 和时钟时间。只有这样才能得到真正的答案。

# css - 如何将箭头重叠到下面的 div 上？

> ID：10465949
> 
> 赞同：1
> 
> 时间：2012-05-05T21:00:16.767
> 
> 标签：css

我试图让一个箭头重叠到它下面的 div 上（灰色箭头重叠到[http://tinyletter.com](http://tinyletter.com)上的红色上的方式）。

这是我目前正在使用的代码：

```
#box_1 {
height: 550px;
width: 100%;
font-size: 4.5em;
font-weight: 600;
float: center;
text-align: center;
background-color: #ededed;
padding: 55px 0 0 0;
}

.arrow-down {
width: 0;
height: 0;
border-left: 50px solid transparent;
border-right: 50px solid transparent;
border-top: 50px solid #ededed;
margin-left:auto;
margin-right:auto;
}

#box_2 {
height: 600px;
width: 100%;
font-size: 7em;
float: center;
text-align: center;
background-color: #ed2227;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:35:45.397

如果您能够依赖使用`::after`(or `::before`) 伪元素，那么只需使用`border`s 就相对容易：

```
#top {
    position: relative;
    background-color: #ccc;
}

#top::after {
    position: absolute;
    content: '';
    top: 100%;
    left: 50%;
    margin: 0 0 0 -1em;
    border: 1em solid transparent;
    border-top: 1em solid #ccc;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FVJcG/)。

# python - 串口连接（RS-232）的Python聊天程序

> ID：10465952
> 
> 赞同：0
> 
> 时间：2012-05-05T21:00:36.177
> 
> 标签：python, serial-port, chat

我发现这段代码用于使用串行端口进行通信的简单聊天，我想看看它是否有效。我用谷歌搜索了一段时间，发现 com0com 可以模拟 RS-232 连接，因为我没有电缆，但现在我很困惑，不知道如何实际完成这项工作

代码（在python中）：

```
from serial import * 
from threading import Thread 

class Receiver(Thread): 
    def __init__(self, serialPort): 
        Thread.__init__(self) 
        self.serialPort = serialPort 
    def run(self): 
        text = "" 
        while (text != "exit\n"): 
            text = serialPort.readline() 
            print ("\n machine1: " + text) 
        self.serialPort.close() 

class Sender(Thread): 
    def __init__(self, serialPort): 
        Thread.__init__(self) 
        self.serialPort = serialPort 
    def run(self): 
        text = "" 
        while(text != "exit\n"): 
            text = raw_input("Type your message>>") + "\n" 
            self.serialPort.write(text) 
        self.serialPort.close() 

serialPort = Serial("\\\\.\\CNCA0")

send = Sender(serialPort) 
receive = Receiver(serialPort) 
send.start() 
receive.start() 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:09:39.113

您首先需要使用 com0com 创建一个带环回的串行端口，即端口的输出连接回输入。这样，您从串行端口发送的所有内容都会收到。

代码片段使用 Sender 类来读取命令提示符输入。你写的任何东西都是通过串口发送的。Receiver 类产生一个线程并等待从串行端口接收到一些东西。收到整行后，将在命令提示符下键入。

注意事项：

*   确保您的串口实际命名为 CNCA0
*   按 Enter 显示一条消息
*   键入“exit”并 Enter 以停止程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-10T21:05:55.897

我也对类似的代码感兴趣。不幸的是，直到明天我将无法在 2 台计算机上测试它。

仅在 Tx 上工作，在 Rx 上还没有工作。

```
import serial
from threading import Thread 

serialPort = serial.Serial(port='/dev/ttyUSB0', baudrate=9600)

class Receiver(Thread):
    def __init__(self, serialPort): 
        Thread.__init__(self)
        self.serialPort = serialPort 

    def run(self):
        text = ""
        while (text != "exit\n"):
            text = serialPort.readline()
            print ("\n machine1: " + text)

class Sender(Thread):
    def __init__(self, serialPort):
        Thread.__init__(self)
        self.serialPort = serialPort 

    def run(self):
        text = ""
        while(text != "exit\n"):
            text = raw_input("$:")
            self.serialPort.write(' ' + text + '\n')

send = Sender(serialPort) 
receive = Receiver(serialPort) 
send.start() 
receive.start() 
```

# iphone - NSNumber 存储零值而不是正确的数值

> ID：10465953
> 
> 赞同：0
> 
> 时间：2012-05-05T21:00:38.977
> 
> 标签：iphone, objective-c, ios

我开发了一个简单的计算器 iPhone 应用程序。只是为了练习目的。我有一个 IBAction 方法来存储用户输入的数字。整个概念是计算器应用程序堆积待处理的操作，因此用户可以执行多个操作，屏幕显示结果如下：1 + 2 - 4 + 10 = X。所以我有两个 NSMutableArray 存储 NSNumber 数字和操作员动作。当用户单击操作员按钮时，会为新数字创建一个新的数组元素。当用户输入数字时，最后一个数组元素会自行更新，直到按下操作员按钮。

问题是每个数组元素都是零。当我设置它时，它在方法内部存储了正确的值，但是当该方法被执行并再次调用时，它只包含零而不是输入的数字。存在 NSNumber 对象，数组包含每个数字，但每个数字都是 0。

这是方法：

```
// Processing digit buttons 
- (IBAction)clickDigit: (UIButton *) sender {

    double currentNumber = [[numbers lastObject] doubleValue];

    // Get the digit
    double digit = sender.tag;

    // Do nothing when the currentNumber and the digit both zero
    if(currentNumber == 0 && digit == 0) {
        return;
    }

    // When currentNumber is zero, override the value
    if(currentNumber == 0) {

        currentNumber = digit;

        [numbers removeLastObject];
        [numbers addObject: [NSNumber numberWithDouble: currentNumber ]];

    // Else, add the digit to currentNumber
    } else {

        currentNumber = currentNumber * 10 + digit;

        [numbers removeLastObject];
        [numbers addObject: [NSNumber numberWithDouble: currentNumber ]];
    }

    // Update the screen
    [self updateDisplay];
} 
```

我不知道出了什么问题。有什么建议么？提前致谢

**更新**：事实证明，每次按下按钮后都会自动调用 clickClear 方法。它将值设置为零。我在评论部分链接了这篇文章下面的完整源代码。唯一的问题是：为什么调用这个方法？什么叫这种方法？

**UPDATE2**：在萨德的帮助下，我设法解决了这个问题。谢谢大家！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:47:08.160

遇到此问题的唯一可能方法是始终如此`sender.tag == 0`。所以你一定要检查一下。我的观点是，没有其他可能的情况会产生这些症状，所以它必须是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:43:39.933

好的，我知道了，

这里的一件事是首先检查您的发件人的标签，无论是通过braekpoint还是通过点击Digit方法中的NSLog，我猜标签永远不会超过零，因此数组中的最后一个对象将始终为零，进一步，放置nslog或断点您将对象添加到数组的所有地方。

在界面中。

```
@property(nonatomic, retain) NSMutableArray* numberArray; 
```

在实施中，

```
@synthesize numberArray = _numberArray; 
```

在交易中

```
[_numberArray release]; 
```

好的，现在接下来要做的是在 init 中创建一个数组，即

```
NSMutableArray* arr = [NSMutableArray alloc] init];
self.numberArray = arr;
[arr release];

[self.numberArray addObject:[NSNumber numberWithDouble:0]]; 
```

# android - android 1.6 代码在 2.3.3 上给出了 nullpointer

> ID：10465955
> 
> 赞同：-1
> 
> 时间：2012-05-05T21:00:54.937
> 
> 标签：android

嗨，我正在编写一个 android 应用程序。我找到了一个用于 xml 解析的代码片段。我在另一个项目上对其进行了测试，一切正常。所以我想让我们在我的主项目上测试它，但它给了我一个空指针：S。

这是我的 ParseXMLDemo 类：

```
public class ParseXMLDemo extends ListActivity {

@SuppressWarnings("rawtypes")
private ArrayList vraag;
@SuppressWarnings("rawtypes")
private ArrayList a1;
private ArrayList p1;
private ArrayList a2;
private ArrayList p2;
private ArrayList a3;
private ArrayList p3;

@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    String xml = ParseXMLMethods.getXML();
    Document doc = ParseXMLMethods.XMLfromString(xml);

    int numResults = ParseXMLMethods.numResults(doc);

    if((numResults <= 0)){
        Toast.makeText(ParseXMLDemo.this, "Er is een fout opgetreden bij het updaten van de vragen. Probeert u het later opnieuw.", Toast.LENGTH_LONG).show();  
        finish();
    }

    NodeList children = doc.getElementsByTagName("os");

    for (int i = 0; i < children.getLength(); i++) {

        HashMap<String, String> map = new HashMap<String, String>();    
        Element e = (Element)children.item(i);
        vraag.add(ParseXMLMethods.getValue(e, "vraag"));
        a1.add(ParseXMLMethods.getValue(e, "a1"));
        p1.add(ParseXMLMethods.getValue(e, "p1"));
        a2.add(ParseXMLMethods.getValue(e, "a2"));
        p2.add(ParseXMLMethods.getValue(e, "p2"));
        a3.add(ParseXMLMethods.getValue(e, "a3"));
        p3.add(ParseXMLMethods.getValue(e, "p3"));
        Toast.makeText(ParseXMLDemo.this, (CharSequence) vraag.get(i)+" "+a1.get(i)+" "+p1.get(i)+" "+a2.get(i)+" "+p2.get(i)+" "+a3.get(i)+" "+p3.get(i), Toast.LENGTH_LONG).show();

        map.put("id", ParseXMLMethods.getValue(e, "id"));
        map.put("vraag", ParseXMLMethods.getValue(e, "vraag"));
        map.put("a1", ParseXMLMethods.getValue(e, "a1"));
        map.put("p1", ParseXMLMethods.getValue(e, "p2"));
        map.put("a2", ParseXMLMethods.getValue(e, "a2"));
        map.put("p2", ParseXMLMethods.getValue(e, "p2"));
        map.put("a3", ParseXMLMethods.getValue(e, "a3"));
        map.put("p3", ParseXMLMethods.getValue(e, "p3"));

        mylist.add(map);            
    }       

    Toast.makeText(ParseXMLDemo.this, "testje"+mylist.get(1), Toast.LENGTH_LONG).show();

   ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.list_layout, 
                  new String[] { "vraag", "a1", "p1", "a2", "p2", "a3", "p3" }, 
                    new int[] { R.id.title, R.id.subtitle, R.id.sub1, R.id.sub11, R.id.sub2, R.id.sub22, R.id.sub3});

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Toast.makeText(ParseXMLDemo.this,o.get("vraag"), Toast.LENGTH_LONG).show(); 
        }
    });
}} 
```

这是我的 ParseXMLMethods 类：

```
public class ParseXMLMethods {

public final static Document XMLfromString(String xml){

    Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is); 

    } catch (ParserConfigurationException e) {
        System.out.println("XML parse error: " + e.getMessage());
        return null;
    } catch (SAXException e) {
        System.out.println("Wrong XML file structure: " + e.getMessage());
        return null;
    } catch (IOException e) {
        System.out.println("I/O exeption: " + e.getMessage());
        return null;
    }
    return doc;
}

 public final static String getElementValue( Node elem ) {
     Node kid;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling() ){
                 if( kid.getNodeType() == Node.TEXT_NODE  ){
                     return kid.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 public static String getXML(){  
        String line = null;

        try {

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://www.oudersvragen.nl/test.xml");

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

        } catch (Exception e) {
            line = "Internet Connection Error >> " + e.getMessage();
        } 
        return line;
}

public static int numResults(Document doc){     
    Node results = doc.getDocumentElement();
    int res = -1;
    try{
        res = Integer.valueOf(results.getAttributes().getNamedItem("count").getNodeValue());
    }catch(Exception e ){
        res = -1;
    }
    return res;
}

public static String getValue(Element item, String str) {       
    NodeList n = item.getElementsByTagName(str);        
    return ParseXMLMethods.getElementValue(n.item(0));
} 
```

}

有人可以告诉我为什么它在 android 2.3.3 项目中给了我一个空指针异常，以及为什么一切都按照它在 android 1.6 项目中的预期方式工作？（仅供参考。我在同一个 android 4.0 vm 上运行该项目）

日志输出：

```
05-05 20:50:33.561: E/AndroidRuntime(3705): FATAL EXCEPTION: main 
05-05 20:50:33.561: E/AndroidRuntime(3705): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.hgs.database/com.hgs.database.ParseXMLDemo}:     java.lang.NullPointerException
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.os.Looper.loop(Looper.java:137)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at    android.app.ActivityThread.main(ActivityThread.java:4424) 
05-05 20:50:33.561: E/AndroidRuntime(3705):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at java.lang.reflect.Method.invoke(Method.java:511)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at dalvik.system.NativeStart.main(Native Method)
05-05 20:50:33.561: E/AndroidRuntime(3705): Caused by: java.lang.NullPointerException
05-05 20:50:33.561: E/AndroidRuntime(3705):     at com.hgs.database.ParseXMLDemo.onCreate(ParseXMLDemo.java:57)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.Activity.performCreate(Activity.java:4465)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-05 20:50:33.561: E/AndroidRuntime(3705):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:24:56.157

我刚刚意识到你提供了一个完整的程序（不包括布局），所以我运行了它。这是我发现的：

当我忘记包含互联网权限时，我发现调用`finish()`不会退出 onCreate()。所以我添加了一个返回命令：

```
if(numResults <= 0){
    Toast.makeText(Example.this, "Er is een fout opgetreden bij het updaten van de vragen. Probeert u het later opnieuw.", Toast.LENGTH_LONG).show();  
    finish();
    return;
} 
```

包括互联网权限后，我注意到你没有初始化你的数组，所以：

```
@SuppressWarnings("rawtypes")
private ArrayList vraag = new ArrayList();
@SuppressWarnings("rawtypes")
private ArrayList a1 = new ArrayList();
private ArrayList p1 = new ArrayList();
private ArrayList a2 = new ArrayList();
private ArrayList p2 = new ArrayList();
private ArrayList a3 = new ArrayList();
private ArrayList p3 = new ArrayList(); 
```

它现在在我的 2.3.3 模拟器上运行。

# javascript - 传递给运行 linq to sql 问题的 web 服务的 Javascript 日期

> ID：10465958
> 
> 赞同：1
> 
> 时间：2012-05-05T21:01:24.343
> 
> 标签：javascript, asp.net, linq-to-sql, datetime

在将具有 00:00 时间的 javascript 中的日期传递给使用 linq to sql 访问数据库的 web 服务时，在某些客户端浏览器上，保存后，传递给数据库中 datetime 列的日期现在的时间不再是 00:00，在某些情况下是午夜前几个小时，因此日期会移到前几天的日期，其他时候是几个小时前。

我们如何始终保存日期而不是数据库的时间？

这是使用 asp.net webforms 和 c# 和 asmx webservices 并且大多数查询都已编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:49:51.697

这取决于日期如何编码的细节。但是，在高层次上，您必须：

1.  确保时区在从客户端发送到服务器时不会被清除。这意味着，将其作为仅日期字符串或保留时区的日期发送；不是 UTC 日期。
2.  在服务器上使用**DateTimeKind**（UTC 或本地）和/或**DateTimeOffset**以确保在您向客户端/数据库发送/接收时正确表示它。

另请参见此处： [Linq to SQL DateTime values are local (Kind=Unspecified) - How do I make it UTC?](https://stackoverflow.com/questions/823313/linq-to-sql-datetime-values-are-local-kind-unspecified-how-do-i-make-it-utc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:16:59.727

我猜客户端上的日期和时间很重要。在这种情况下，如何在将日期时间信息发送到服务器之前将其转换为 iso 格式，并同时发送客户端的时区偏移量。

```
var d = new Date
d.toISOString() // 2012-05-05T22:14:35.506Z
// or maybe jus
d.getTime() // milliseconds since jan 1st 1970 or thereabouts
d.getTimezoneOffset() // Timezone offset in minutes from UTC 
```

通过这种方式，您可以获得 UTC 日期和时间以及时区偏移量，即 UCT 时间与本地时间相差多少分钟。例如，挪威将有一个负偏移（UTC-挪威时间 = 负）。

# c# - C# 中静态构造函数的潜在缺陷

> ID：10465961
> 
> 赞同：18
> 
> 时间：2012-05-05T21:01:51.133
> 
> 标签：c#, .net, static, clr

我的问题是在重构一个只包含要声明为`static`类的静态方法的类之后出现的，并且在启动应用程序时遇到了奇怪的问题。

我没有进行任何彻底的调查，但似乎从静态构造函数中进行的某些调用由于某种原因没有完成。

那么，我想知道在 C# 中使用静态构造函数时有哪些陷阱？更具体地说，是否有任何事情应该不惜一切代价避免并且不能在静态构造函数中使用？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-05T21:25:02.110

静态构造函数有几个陷阱。例如，如果静态构造函数[抛出异常](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)`TypeInitializationException`，则无论何时访问它的任何成员，您都将继续获得 a 。

> 如果静态构造函数抛出异常，运行时将不会再次调用它，并且该类型将在程序运行的应用程序域的生命周期内保持未初始化状态。

一般来说，静态类应该只用在不需要任何初始化的无状态场景中。如果你的类需要初始化，你最好使用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)，它可以在首次访问时[延迟初始化：](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/05/19/c-system.lazylttgt-and-the-singleton-design-pattern.aspx)

```
public class MyClass
{
    private static readonly Lazy<MyClass> current = 
        new Lazy<MyClass>(() => new MyClass());

    public static MyClass Current
    {
        get { return current.Value; }
    }

    private MyClass()
    {
        // Initialization goes here.
    }

    public void Foo()
    {
        // ...
    }

    public void Bar()
    {
        // ...
    }
}

static void Main(string[] args)
{
    MyClass.Current.Foo();   // Initialization only performed here.
    MyClass.Current.Bar();
    MyClass.Current.Foo();
} 
```

**编辑**：我对此事做了一些进一步的阅读，如果您在其中执行阻塞操作（例如异步回调或线程同步），静态构造函数似乎*确实会导致死锁。*

CLR 在内部使用锁定来防止类型初始值设定项（静态构造函数）同时执行多次。因此，如果您的静态构造函数试图从另一个线程访问其声明类型的另一个成员，它将不可避免地死锁。由于“另一个成员”可能是声明为 PLINQ 或 TPL 操作的一部分的匿名函数，因此这些错误可能很微妙且难以识别。

[Igor Ostrovsky (MSFT) 在他的静态构造函数死锁](http://blogs.msdn.com/b/pfxteam/archive/2011/05/03/10159682.aspx)文章中解释了这一点，并提供了以下死锁示例：

```
using System.Threading;

class MyClass
{
    static void Main() { /* Won’t run... the static constructor deadlocks */  }

    static MyClass()
    {
        Thread thread = new Thread(arg => { });
        thread.Start();
        thread.Join();
    }
} 
```

在上面的例子中，新线程需要访问空的匿名函数`{ }`，定义为它的回调。但是，由于匿名函数被编译为`MyClass`幕后的另一个私有方法，因此新线程在`MyClass`类型初始化之前无法访问它。而且，由于`MyClass`静态构造函数需要首先等待新线程完成（因为`thread.Join()`），因此会出现死锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T21:04:01.010

是的，有一些陷阱，主要与类的初始化时间有关。基本上，具有静态构造函数的类不会被标记`beforefieldinit`，这允许运行时在稍后对其进行初始化。

看看[这篇文章](http://csharpindepth.com/Articles/General/BeforeFieldInit.aspx)了解更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:28:35.530

这不是问题的答案，但是评论太长了，所以我在这里提供...

由于我不知道`static class`构造，我使用以下方案（简化）为我提供单例：

```
public class SomeSingleton {
    static _instance;
    static public SomeSingleton Instance {
        get {
            if (_instance==null) {
                _instance=new SomeSingleton();
            }
            return _instance;
        }
    }
} 
```

稍后，您使用

```
SomeSingleton.Instance.MyProp = 3; 
```

并且第一次使用该`Instance`成员将构建您的单例。

我想这是可以的，因为如果有很多这样的类，单例的实例化是按正确的顺序完成的。

# php - 在 Visual Studio 中为 MongoDB 编译 PHP 驱动程序

> ID：10465962
> 
> 赞同：1
> 
> 时间：2012-05-05T21:01:52.067
> 
> 标签：php, c, visual-studio-2008, mongodb, compiler-errors

我目前正在尝试使用 Visual Studio 2008[为 MongoDB 编译 PHP 驱动程序，](https://github.com/mongodb/mongo-php-driver)但在编译过程中遇到了一些问题。

每次我尝试构建项目时，编译器都会不断向我抛出如下错误：

```
...\mongo_php_driver\bson.h(50) : error C2143: syntax error : missing ')' before '*'
...\mongo_php_driver\bson.h(50) : error C2143: syntax error : missing '{' before '*'
...\mongo_php_driver\bson.h(50) : error C2059: syntax error : 'type'
...\mongo_php_driver\bson.h(50) : error C2059: syntax error : ')'
...\mongo_php_driver\bson.h(53) : error C2143: syntax error : missing ')' before '*'
...\mongo_php_driver\bson.h(53) : error C2143: syntax error : missing '{' before '*'
...\mongo_php_driver\bson.h(53) : error C2059: syntax error : ','
...\mongo_php_driver\bson.h(53) : error C2059: syntax error : ')'
...\mongo_php_driver\bson.h(56) : error C2143: syntax error : missing ')' before '*'
...\mongo_php_driver\bson.h(56) : error C2143: syntax error : missing '{' before '*'
...\mongo_php_driver\bson.h(56) : error C2059: syntax error : ','
...\mongo_php_driver\bson.h(56) : error C2059: syntax error : ')' 
```

其中大约有 740 个，所有这些错误都在头文件中。从它所说的，我可以理解有很多语法错误，但我不明白的是，语法对我来说看起来很好。我不是`C`很清楚，所以我可能错了。

我认为 Visual Studio 编译器只是在运行并向我抛出虚假错误，但我在 Google 上找不到任何关于此类问题的信息。事实上，我也尝试用 Code::Blocks 编译它，只是为了找到相同的结果。所以一定有一些我忘记的非常愚蠢的东西导致了这些错误。

这是`bson.h`作为参考的内容（我已经标记了错误开始的行）：

```
/**
 *  Copyright 2009-2011 10gen, Inc.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
#ifndef PHP_BSON_H
#define PHP_BSON_H 1

#define OID_SIZE 12

#define BSON_DOUBLE 1
#define BSON_STRING 2
#define BSON_OBJECT 3
#define BSON_ARRAY 4
#define BSON_BINARY 5
#define BSON_UNDEF 6
#define BSON_OID 7
#define BSON_BOOL 8
#define BSON_DATE 9
#define BSON_NULL 10
#define BSON_REGEX 11
#define BSON_DBREF 12
#define BSON_CODE__D 13
#define BSON_SYMBOL 14
#define BSON_CODE 15
#define BSON_INT 16
#define BSON_TIMESTAMP 17
#define BSON_LONG 18
#define BSON_MINKEY -1
#define BSON_MAXKEY 127

#define GROW_SLOWLY 1048576
#define INVALID_STRING_LEN(len) (len < 0 || len > (64*1024*1024))

#define CREATE_BUF_STATIC(n) char b[n];         \
  buf.start = buf.pos = b;                      \
  buf.end = b+n;

/*** Line 50 starts from here ***/
int php_mongo_serialize_size(char *start, buffer *buf TSRMLS_DC);

/* driver */
int php_mongo_serialize_element(char*, zval**, buffer*, int TSRMLS_DC);

/* objects */
void php_mongo_serialize_date(buffer*, zval* TSRMLS_DC);
void php_mongo_serialize_regex(buffer*, zval* TSRMLS_DC);
void php_mongo_serialize_code(buffer*, zval* TSRMLS_DC);
void php_mongo_serialize_ts(buffer*, zval* TSRMLS_DC);
void php_mongo_serialize_bin_data(buffer*, zval* TSRMLS_DC);
void php_mongo_serialize_int32(buffer*, zval* TSRMLS_DC);
void php_mongo_serialize_int64(buffer*, zval* TSRMLS_DC);

/* simple types */
void php_mongo_serialize_double(buffer*, double);
void php_mongo_serialize_string(buffer*, char*, int);
void php_mongo_serialize_long(buffer*, int64_t);
void php_mongo_serialize_int(buffer*, int);
void php_mongo_serialize_byte(buffer*, char);
void php_mongo_serialize_bytes(buffer*, char*, int);
void php_mongo_serialize_key(buffer*, char*, int, int TSRMLS_DC);
void php_mongo_serialize_ns(buffer*, char* TSRMLS_DC);

int php_mongo_write_insert(buffer*, char*, zval*, int max TSRMLS_DC);
int php_mongo_write_batch_insert(buffer*, char*, int flags, zval*, int max TSRMLS_DC);
int php_mongo_write_query(buffer*, mongo_cursor* TSRMLS_DC);
int php_mongo_write_get_more(buffer*, mongo_cursor* TSRMLS_DC);
int php_mongo_write_delete(buffer*, char*, int, zval* TSRMLS_DC);
int php_mongo_write_update(buffer*, char*, int, zval*, zval* TSRMLS_DC);
int php_mongo_write_kill_cursors(buffer*, int64_t TSRMLS_DC);

#define php_mongo_set_type(buf, type) php_mongo_serialize_byte(buf, (char)type)
#define php_mongo_serialize_null(buf) php_mongo_serialize_byte(buf, (char)0)
#define php_mongo_serialize_bool(buf, b) php_mongo_serialize_byte(buf, (char)b)

int resize_buf(buffer*, int);

int zval_to_bson(buffer*, HashTable*, int TSRMLS_DC);
char* bson_to_zval(char*, HashTable* TSRMLS_DC);

/**
 * Initialize buffer to contain "\0", so mongo_buf_append will start appending
 * at the beginning.
 */
void mongo_buf_init(char *dest);

/**
 * Takes a buffer and a string to add to the buffer.  The buffer must be large
 * enough to append the string and the string must be null-terminated. This will
 * not work for strings containing null characters (e.g., BSON).
 */
void mongo_buf_append(char *dest, char *piece);

#if PHP_C_BIGENDIAN
// reverse the bytes in an int
// wheeee stupid byte tricks
#define BYTE1_32(b) ((b & 0xff000000) >> 24)
#define BYTE2_32(b) ((b & 0x00ff0000) >> 8)
#define BYTE3_32(b) ((b & 0x0000ff00) << 8)
#define BYTE4_32(b) ((b & 0x000000ff) << 24)
#define MONGO_32(b) (BYTE4_32(b) | BYTE3_32(b) | BYTE2_32(b) | BYTE1_32(b))

#define BYTE1_64(b) ((b & 0xff00000000000000ll) >> 56)
#define BYTE2_64(b) ((b & 0x00ff000000000000ll) >> 40)
#define BYTE3_64(b) ((b & 0x0000ff0000000000ll) >> 24)
#define BYTE4_64(b) ((b & 0x000000ff00000000ll) >> 8)
#define BYTE5_64(b) ((b & 0x00000000ff000000ll) << 8)
#define BYTE6_64(b) ((b & 0x0000000000ff0000ll) << 24)
#define BYTE7_64(b) ((b & 0x000000000000ff00ll) << 40)
#define BYTE8_64(b) ((b & 0x00000000000000ffll) << 56)
#define MONGO_64(b) (BYTE8_64(b) | BYTE7_64(b) | BYTE6_64(b) | BYTE5_64(b) | BYTE4_64(b) | BYTE3_64(b) | BYTE2_64(b) | BYTE1_64(b))

#else
#define MONGO_32(b) (b)
#define MONGO_64(b) (b)
#endif

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:25:55.250

您的错误出现是因为编译器不知道“缓冲区”是什么意思。它定义在`php_mongo.h`. 这意味着您错误地设置了项目并尝试`bson.h`独立编译。

PHP 扩展不是使用 Visual Studio 项目构建的，而是通过专门编写的构建系统构建的。您需要按照[https://wiki.php.net/internals/windows/stepbystepbuild上的说明进行操作](https://wiki.php.net/internals/windows/stepbystepbuild)

# ruby-on-rails - 除非手动调用，否则清扫器无法工作，这是怎么回事？

> ID：10465964
> 
> 赞同：2
> 
> 时间：2012-05-05T21:02:01.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下设置：一个名为类别的模型。这些类别使用​​ ActiveAdmin 进行管理。我想使用页面缓存来缓存类别。

这就是我设置 app/admin/categories.rb 的方式

```
ActiveAdmin.register Category do
    controller do 
        cache_sweeper :category_sweeper
    end
end 
```

这是我的扫地机：

```
class CategorySweeper < ActionController::Caching::Sweeper
  observe Category

  def after_save(category)
    expire_cache(category)
  end

  def after_destroy(category)
    expire_cache(category)
  end

  def expire_cache(category)
    expire_page :controller => 'categories', :action => 'index', :format => 'json'
  end
end 
```

这是我的控制器：

```
class CategoriesController < ApplicationController
    caches_page :index
  cache_sweeper :category_sweeper

    respond_to :json

    def index
      @categories = Category.all 
      respond_with(@categories)
    end

    def show
      CategorySweeper.instance.expire_cache(@category)
      respond_with('manually sweeped!')
    end
end 
```

所以这个想法是当活动管理员发生变化时，应该调用清扫器。我设置了 debug.log 并证明它正在工作。但由于某种原因，缓存不会过期！

但是，如果我执行显示操作（即转到 /categories/1.json，那么我的手动清扫器就会启动并且它工作正常）。那么为什么清扫器只在我调用它时才起作用，而不是在管理员发生变化时起作用呢？

在此先感谢，-大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:25:57.420

您的`ActiveAdmin`控制器位于不同的命名空间中，请参阅[此](https://stackoverflow.com/questions/5082181/rails-caching-expire-action-in-another-namespace)SO 问题。

不久：

在缓存过期 url 代码中添加斜杠：

```
def expire_cache(category)
  expire_page :controller => '/categories', :action => 'index', :format => 'json'
end 
```

# java - html中的Java小程序没有地址栏

> ID：10465970
> 
> 赞同：0
> 
> 时间：2012-05-05T21:03:10.473
> 
> 标签：java, html

我只是想问，我们怎样才能像打开程序一样打开Java Applet，而不是集成在网页中的应用程序。

您在网页中按下一个按钮，Java 程序将启动，但不是集成在网页中的 Java 小程序。

或者像一个网页但没有地址栏:)

这是可能的，对吧？

感谢您的时间和您的回答！

**更新**

这就像一个解决方案：http: [//orangoo.com/labs/greybox/normal_usage.html](http://orangoo.com/labs/greybox/normal_usage.html)

灰盒！

一切都很好，除了你不能在任何地方拖动/移动那个弹出窗口。也许有人对 Greybox 很熟悉，可以建议这怎么可能？（移动弹出窗口）

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:05:03.640

改用**Java Web Start**技术怎么样？

[http://docs.oracle.com/javase/tutorial/deployment/webstart/](http://docs.oracle.com/javase/tutorial/deployment/webstart/)

> Java Web Start 软件提供了通过单击启动全功能应用程序的能力。用户可以下载和启动应用程序，例如完整的电子表格程序或 Internet 聊天客户端，而无需经历冗长的安装过程。
> 
> 使用 Java Web Start 软件，用户可以通过单击网页中的链接来启动 Java 应用程序。该链接指向 Java 网络启动协议 (JNLP) 文件，该文件指示 Java Web Start 软件下载、缓存和运行应用程序。

# html - 正确使用标签，或如何标记“不太重要”的文本

> ID：10465973
> 
> 赞同：25
> 
> 时间：2012-05-05T21:03:37.943
> 
> 标签：html, semantic-markup

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T21:54:18.460

您正在查看的规范是旧的，您应该查看 HTML5 规范：

[https://html.spec.whatwg.org/multipage/](https://html.spec.whatwg.org/multipage/)

我建议`<em>`在这里而不是小：

```
<p>Laurence Tureaud also called <em>Mr. T</em> is famous for his role
in the tv series A-TEAM.</p> 
```

`<small>`在文章句中不常用，但像这样：

```
<footer>
    <p>
    Search articles about <a href="#">Laurence Tureaud</a>,
    <small>or try <a href="#">articles about A-TEAM</a>.</small>
    </p>
</footer>

<footer>
    <p>
    Call the Laurence Tureaud's "life trainer chat line" at
    555-1122334455 <small>($1.99 for 1 minute)</small>
    </p>
</footer> 
```

文章句子：

```
<p>
    My job is very interesting and I love it: I work in an office
    <small>(123 St. Rome, Italy)</small> with a lot of funny guys that share
    my exact interests.
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:38:54.613

我个人认为`<small>`这不是正确的标签，因为它表明文本在物理上会更小，而您的示例似乎并非如此。我认为使用 a`<span>`会更合适或更可能是 HTML `<aside>`。[http://dev.w3.org/html5//spec-author-view/the-aside-element.html](http://dev.w3.org/html5//spec-author-view/the-aside-element.html)

* * *

## 回答 #3

> 赞同：-11
> 
> 时间：2012-05-06T11:32:29.337

您应该问问自己，当不应用样式表时，您希望如何显示文档。根据这个选择标记，而不是关于“语义标记”的学术或学术理论（参见我[的 HTML 实用指南](http://www.cs.tut.fi/~jkorpela/pragmatic-html.html8)）。

如果您想要更小的尺寸，请使用`<small>`or `<font size=2>`。前者更简洁，更容易设置样式，并且更“耐看”（在某些浏览器上，告诉浏览器忽略网页上指定的字体大小的设置不会消除 的效果`small`）。所以这是一个相当简单的选择。

另一方面，一行文本内的字体大小变化在印刷上是有问题的。在印刷品中，这通常是偶然的、错误的，而不是故意的。将某些东西放在括号中通常足以表明在某种程度上是次要的

# ruby - Ruby MLT 实现/示例？

> ID：10465976
> 
> 赞同：0
> 
> 时间：2012-05-05T21:04:14.577
> 
> 标签：ruby

在项目网页上：

[http://www.mltframework.org/bin/view/MLT/Features](http://www.mltframework.org/bin/view/MLT/Features)

MLT 说它有 ruby​​ 的语言绑定，我正在寻找一些代码示例，或者使用 ruby​​ 中的 MLT 库的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T09:34:06.440

[这里](https://github.com/mltframework/mlt/tree/master/src/swig/ruby)有一堆示例 ruby​​ 脚本。它们相当基本，但应该提供一个起点。

# android - Sony Ericsson SDK on Eclipse?

> ID：10465979
> 
> 赞同：0
> 
> 时间：2012-05-05T21:04:31.190
> 
> 标签：android, eclipse, sdk, sony

I need to get the Sony ericsson sdk from their website on my eclipse so I can continue with my app to control the LEDs for the Xperia S device.

I downloaded the SDK and have installed it successfully , but I still cant import anything on my Eclipse project that i need from the Sony SDK.

Can someone enlighten me here?

Sony dev page where i got my SDK from: [http://developer.sonymobile.com/cws/devworld/search-downloads/docstools/sdk](http://developer.sonymobile.com/cws/devworld/search-downloads/docstools/sdk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:28:03.763

I am not sure what is the purpose for you to download the SDK you mentioned above.

In order to control LED (I assume flash used with the camera is what you mean by LED), you don't need any of these SDK's. Check this out: [Android Camera Flash Control](https://stackoverflow.com/questions/4294621/android-camera-flash-control) and also this [How to turn on camera flash light programmatically in Android?](https://stackoverflow.com/questions/6068803/how-turn-on-only-camera-flash-light-programmatically-in-android)

You can control that LED by simple Android API's. With respect to your comment about Live Ware Manager above, it is an application, not an SDK. Although there is another SDK used to create applications for Live View but it doesn't seem like you have anything to do with Live View.

If you need to know more about Smart SDk or EDK sdk, please visit these links: [http://developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk](http://developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk)

[http://developer.sonymobile.com/wportal/devworld/technology/android/edk/overview](http://developer.sonymobile.com/wportal/devworld/technology/android/edk/overview)

Let me know if I didn't answer your question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:18:39.857

Install the Android SDK and ADT in Eclipse, per usual. In Eclipse, select Window > Android SDK Manager. Let it search for updates, etc. When it finally populates the list, under Android 2.3.3 (API Level 10), you should see an entry for Sony Xperia Extensions EDK 2.0\. Check the box to the right of that and then click "Install packages..." ![enter image description here](../Images/fb4240f0098534b05f08a5ffafbeb083.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-11T09:24:11.477

please instal google usb driver and download sdk instal pc suite sony instal mobile to pc and automoatic download driver

[http://developer.sonymobile.com/downloads/sdks/sony-add-on-sdk-manual-installation-kit/](http://developer.sonymobile.com/downloads/sdks/sony-add-on-sdk-manual-installation-kit/) Sony Add-on SDK (manual installation kit) Sony Add-on SDK to be used for manual installation. You should also get the documentation kit. Download Sony Add-on SDK (manual installation kit) (159 MB)

# c# - 在检查多个类似条件时，有没有办法使 if 语句更短、更好看？（C＃）

> ID：10465982
> 
> 赞同：1
> 
> 时间：2012-05-05T21:04:47.383
> 
> 标签：c#, if-statement

（不确定标题是否充分说明了这个问题）

我有这段代码：

```
string input = "5";
   if (input == ""  ||
       input == "1" ||
       input == "2" ||
       input == "3" ||
       input == "4" ||
       input == "_" ||
       input == "6" ||
       input == "7" ||
       input == "8")
     {/* ... */}
   else
     {/* ... */} 
```

我怎样才能让它看起来更好？有什么方法可以删除重复`input`的 s 吗？

**upd** : switch 可能会使情况变得更糟，因为在我的情况下，我将检查许多条件，其中大多数将运行非常有限数量的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T21:07:08.810

是的，您可以编写一个像这样的扩展方法：

```
 public static bool In<T>(this T value, params T[] list)
    {
        return list.Contains(value);
    } 
```

并按如下方式使用它：

```
if (input.In("", "1", "2", ...))
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T21:06:44.527

好吧，您可以`switch`在一般情况下使用 a （尽管这种体验在 VB.NET 中要好得多），但如果它们都是一个字符或更少，您可以使用字符串：

```
if("1234_678".Contains(input)) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:11:37.943

将条件表达式包装在函数中，代码变得更易于阅读。实际的表达式并不简单，但代码更容易阅读。

```
if (IsSomething(input))
{
 /* do stuff */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T21:12:46.567

也许您可以尝试使用开关。它可能更像样。如果这是您想要的，这将更适合个人测试。

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)

```
 switch(input){
      case "1":
      // Do something
      break;
      case "2":
      // Do something else
      break;
      case "_":
      // Do something else
      break;
      default:
      // Otherwise do this
      break;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T21:15:51.730

或者你可以这样做：

```
List<string> list = new List<string>{"","1","2","3","4","5","6","7","8"};

            if (list.Contains(input))
            {
                Console.WriteLine("found");
            } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-05T21:17:11.043

这将是解决此问题的一个选项：

```
 string input = "5";
  List<string> Values = new List<string>{ "1", "2","3","4", "5" };
  if(Values .Contains(input))
    {
         //Your Action
    } 
```

# java - 计算平均值或将 ArrayList 作为函数的参数

> ID：10465989
> 
> 赞同：2
> 
> 时间：2012-05-05T21:06:15.370
> 
> 标签：java, function, arraylist, average

是否有内置方法来计算整数 ArrayList 的平均值？

如果没有，我可以通过获取 ArrayList 的名称并返回其平均值来创建一个函数吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T21:09:58.147

这真的很简单：

```
// Better use a `List`. It is more generic and it also receives an `ArrayList`.
public static double average(List<Integer> list) {
    // 'average' is undefined if there are no elements in the list.
    if (list == null || list.isEmpty())
        return 0.0;
    // Calculate the summation of the elements in the list
    long sum = 0;
    int n = list.size();
    // Iterating manually is faster than using an enhanced for loop.
    for (int i = 0; i < n; i++)
        sum += list.get(i);
    // We don't want to perform an integer division, so the cast is mandatory.
    return ((double) sum) / n;
} 
```

为了获得更好的性能，请使用`int[]`而不是`ArrayList<Integer>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:15:15.333

如果你想比平均水平多一台计算机，我建议在 CERN 开发的[Colt库支持许多统计功能。](http://acs.lbl.gov/software/colt/)请参阅[BinFunctions1D](http://acs.lbl.gov/software/colt/api/hep/aida/bin/BinFunctions1D.html)和[DoubleMatrix1D](http://acs.lbl.gov/software/colt/api/cern/colt/matrix/DoubleMatrix1D.html)。另一种选择（具有最近的代码基础）可能是[commons-math](http://commons.apache.org/math/)：

```
DescriptiveStatistics stats = new DescriptiveStatistics();
for( int i = 0; i < inputArray.length; i++)
{
    stats.addValue(inputArray[i]);
}
double mean = stats.getMean(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T22:05:03.687

即将推出，在[JDK 8](http://jdk8.java.net/lambda/)中使用 lambda 表达式和方法引用：

```
DoubleOperator summation = (a, b) -> a + b;
double average = data.mapReduce(Double::valueOf, 0.0,  summation) / data.size();
System.out.println("Avergage : " + average); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T21:09:30.377

不，没有。您可以简单地遍历完整列表以添加所有数字，然后简单地将总和除以数组列表的长度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T21:15:57.253

您可以使用[Apache Commons](http://en.wikipedia.org/wiki/Apache_Commons)库中的[“平均” 。](http://commons.apache.org/math/apidocs/org/apache/commons/math/stat/StatUtils.html#mean%28double%5B%5D%29)

# c# - .NET 中的命令模式与事件语法

> ID：10465990
> 
> 赞同：2
> 
> 时间：2012-05-05T21:06:33.547
> 
> 标签：c#, .net, design-patterns, command

我最近阅读了有关[命令模式的信息](http://en.wikipedia.org/wiki/Command_pattern)

此模式用于**“表示和封装以后调用方法所需的所有信息”。**

从 C# 委托“创建封装方法调用 + 目标对象详细信息的对象”有什么区别？这些不是都提供相同（或非常相似）的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:08:23.657

它非常相似，但我认为它是相反的。

命令是其他东西调用目标委托或对象的地方。*事件是对n 个*订阅者的广播。

另一个区别是事件的所有者不必知道所有不同的订阅者。

WPF 都有命令和事件。假设你有一个按钮。您可以订阅该`Click`事件，或者您可以`Command`在您的视图模型中有一个在单击按钮时会被调用的事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T11:36:04.383

C# 中的事件实际上是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern "观察者模式")的实现。

观察者和指挥者之间的区别主要在于他们试图解决的问题。在命令模式中，目的是将执行动作的决定与执行动作分开。观察者模式的要点是通知感兴趣的各方发生了一些事情，而不必知道观察者的类型和数量，或者甚至可能根本不知道它们是否存在。

也就是说，放置在事件处理程序上的代表是命令。但是，这是一个实现细节，而不是事件的重点。如果您阅读观察者的文章，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:09:28.967

实际上，最接近这种模式的 C# 特性是**委托**，而不是事件......

是的，它非常相似，但是命令模式支持更复杂的场景（例如撤消/重做的实现）

# mp3 - 需要指导的Java初学者（我需要用Java构建一个MP3播放器）

> ID：10465995
> 
> 赞同：1
> 
> 时间：2012-05-05T21:07:11.323
> 
> 标签：mp3, actionlistener

我正在上 Java 101 课程，老师尽她所能在这么短的时间内教给我们所有的材料。最终项目到期了，我一直在和我的合作伙伴一起开发 Java MP3 播放器。当我说 Java MP3 播放器时，想象一下您的计算机显示器上有一个专有的触摸屏 MP3 播放器。这就是我试图创造的。只是一组基本的按钮（艺术家、流派、歌曲等）。配有音量控制按钮和暂停歌曲的功能。（想象一下，我必须以某种方式集成 Windows Media Player）。

伙计，伙计，我是不是被卡住了。我想出了如何在 Java 中实际播放歌曲，但不像我最终需要的那样使用 WMP。我还在 Photoshop 中制作了一个 jpg 并将其作为我的播放器背景，并在屏幕上扔了 5 个 JButton。

我花了很长时间弄清楚如何使交互式菜单工作。我在 HTML、CSS 和 JASS（魔兽争霸 3 专有语言）方面拥有丰富的编程经验，因此在物流方面我不是新手。到目前为止，我已经做到了，当您按下按钮时按钮上的文本会发生变化（模拟菜单更改），但我无法更改其他按钮文本（因为它们在不同的类中，并且无法解决）。我在这台电脑上没有我的代码，所以我不能告诉你我卡在哪里了..

基本上，我需要知道处理这个项目的最佳方法。我对 5 个按钮和使用 ActionListeners 手动创建交互式菜单有什么误解吗？（如果按钮上的文字 =“艺术家”，则将按钮 1、2、3、4、5 更改为*5 位不同的艺术家*）。这是一个不好的方法吗？我似乎找不到任何关于此的教程。我感谢任何和所有的帮助！

如果它超出我的范围，我会很乐意选择另一个项目。多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:21:15.160

您想更新按钮和内容上的文本的方式是使用称为观察者模式的东西。

基本上你有某种模型，它包含正在播放的歌曲的所有数据，它是哪个艺术家等等。当数据发生变化时（例如：正在播放的歌曲），数据会告诉所有观察者（你的 GUI）有些东西是更新，然后您可以简单地将所有带有 getter 的数据从模型中提取到 GUI。示例伪代码：

```
// this is our model
public class Mp3Player extends Observable {
    private MP3 songBeingPlayed;
    ...

    public setMp3(MP3 song){
        songBeingPlayed = song;
        setChanged();
        notifyObservers();
    }

    public void nextSong(){
        // Todo: Change song
        ...

        setChanged();
        notifyObservers();  // Notify GUI that something changed
    }
}

// this is our gui
public class GUI implements Observer {
    private Mp3Player player;
    private JLabel artistName;

    public GUI(){
         player = new Mp3Player();
         player.addObserver(this);
    }

    public void update(Observable o, Object o1){
         // This method gets called when the model calls notifyObservers()
         artistName.setText(player.getArtistName());
         ...
    }

}

// Button implementation
public class NextSongButton extends JButton implements ActionListener {

    private Mp3Player player;

    public NextSongButton(Mp3Player player){
        this.player = player;
        ...

        addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae){
        player.nextSong();
    }

} 
```

这只是一个简短的示例，说明如何在模型更改时保持 GUI 更新。而不是在按钮侦听器中拥有所有逻辑。

# r - R中时间序列数据的滑动时间间隔

> ID：10465998
> 
> 赞同：15
> 
> 时间：2012-05-05T21:08:07.250
> 
> 标签：r, time-series, data-manipulation

我正在尝试为不规则的时间序列数据集提取有趣的统计数据，但未能找到适合该工作的工具。很容易找到用于处理任何时间定期采样的时间序列或基于索引的序列的工具，尽管我对我试图解决的问题不太幸运。

首先，一个可重现的数据集：

```
library(zoo)
set.seed(0)
nSamples    <- 5000
vecDT       <- rexp(nSamples, 3)
vecTimes    <- cumsum(c(0,vecDT))
vecDrift    <- c(0, rnorm(nSamples, mean = 1/nSamples, sd = 0.01))
vecVals     <- cumsum(vecDrift)
vecZ        <- zoo(vecVals, order.by = vecTimes)
rm(vecDT, vecDrift) 
```

假设时间以秒为单位。该系列有近 1700 秒（仅 30 分钟），在此`vecZ`期间有 5001 个条目。（注意：我会尝试使用`xts`，但`xts`似乎需要日期信息，并且我宁愿在不相关时不使用特定日期。）

我的目标如下：

*   确定每个点之前 3 分钟和之后 3 分钟的值的索引。由于时间是连续的，我怀疑任何两点之间恰好相隔 3 分钟。我想找到的是给定点之前最多 3 分钟和至少 3 分钟之后的点，即类似于以下内容（在伪代码中）：

    `backIX(t, vecZ, tDelta) = min{ix in length(vecZ) : t - time(ix) < tDelta}` `forwardIX(t, vecZ, tDelta) = min{ix in length(vecZ) : time(ix) - t > tDelta}`

    所以，3 分钟，`tDelta = 180`. 如果`t=2500`，则结果为`forwardIX()`3012（即 time(vecZ)[2500] 为 860.1462，而 time(vecZ)[3012] 为 1040.403，或刚刚超过 180 秒后），输出为`backwardIX()`2020（对应于时间 680.7162 秒）。

    理想情况下，我想使用不需要的函数`t`，因为这将需要`length(vecZ)`调用该函数，这忽略了可以更有效地计算滑动时间窗口的事实。

*   将函数应用于滚动时间窗口中的所有值。我见过`rollapply`，它采用固定的窗口大小（即固定数量的索引，但不是固定的时间窗口）。我可以用一个简单的方法来解决这个问题，使用`foreach`按索引计算的循环（或;-)）`t`，但我想知道是否已经实现了一些简单的函数，例如计算给定时间范围内所有值的平均值的函数. 由于这可以通过在窗口上滑动的简单汇总统计信息有效地完成，因此它的计算成本应该低于多次访问所有数据以计算每个统计信息的函数。一些相当自然的函数：均值、最小值、最大值和中值。

    即使窗口不随时间变化，改变窗口大小的能力也足够了，我可以使用上述问题的结果找到窗口大小。但是，这似乎仍然需要额外的计算，因此能够指定基于时间的间隔似乎更有效。

R 中是否有有助于在时间窗口中对数据进行此类操作的包，还是我不走运，我应该编写自己的函数？

* * *

注意 1：[这个问题](https://stackoverflow.com/questions/7571788/regular-analysis-over-irregular-time-series)试图做类似的事情，除了不相交的时间间隔，而不是滚动的时间窗口，例如，我可以调整这个来对每个连续的 3 分钟块进行分析，但我看不到调整这个的方法滚动 3 分钟间隔。

注意 2：我发现从`zoo`对象切换到数字向量（对于时代而言）显着加快了第一个目标的范围查找/窗口端点识别问题。这仍然是一种幼稚的算法，但值得一提的是，使用`zoo`对象可能不是幼稚方法的最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:43:43.210

Here's what I was suggeting, but I'm not sure it exactly answers your question

```
#Picking up where your code left off
library(xts)
library(TTR)
x <- .xts(vecZ, vecTimes)
xx <- na.locf(cbind(xts(, seq.POSIXt(from=start(x), to=end(x), by='sec')), x))
x$means <- runMean(xx, n=180)
out <- x[!is.na(x[, 1]), ]
tail(out)

                                  x     means
1969-12-31 18:28:17.376141 0.2053531 0.1325938
1969-12-31 18:28:17.379140 0.2101565 0.1329065
1969-12-31 18:28:17.619840 0.2139770 0.1332403
1969-12-31 18:28:17.762765 0.2072574 0.1335843
1969-12-31 18:28:17.866473 0.2065790 0.1339608
1969-12-31 18:28:17.924270 0.2114755 0.1344264 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-28T09:05:50.603

从 v1.9.8 版本开始（CRAN 2016 年 11 月 25 日），[data.table已获得](/questions/tagged/data.table "显示标记为“data.table”的问题")*在非等值连接中聚合*的能力，可用于在不规则时间序列的滑动时间窗口上应用滚动函数。

为了演示和验证，使用了较小的数据集。

```
library(data.table)   # development version 1.11.9 used

# create small dataset
set.seed(0)
nSamples    <- 10
vecDT       <- rexp(nSamples, 3)
vecTimes    <- cumsum(c(0,vecDT))
vecVals     <- 0:nSamples
vec         <- data.table(vecTimes, vecVals)
vec 
```

> ```
>  vecTimes vecVals
>  1: 0.00000000       0
>  2: 0.06134553       1
>  3: 0.10991444       2
>  4: 0.15651286       3
>  5: 0.30186907       4
>  6: 1.26685858       5
>  7: 1.67671260       6
>  8: 1.85660688       7
>  9: 2.17546271       8
> 10: 2.22447804       9
> 11: 2.68805641      10 
> ```

```
# define window size in seconds 
win_sec = 0.3

# aggregate in sliding window by a non-equi join
vec[.(t = vecTimes, upper = vecTimes + win_sec, lower = vecTimes - win_sec), 
    on = .(vecTimes < upper, vecTimes > lower), 
    .(t, .N, sliding_mean = mean(vecVals)), by = .EACHI] 
```

> ```
>  vecTimes     vecTimes          t N sliding_mean
>  1: 0.3000000 -0.300000000 0.00000000 4          1.5
>  2: 0.3613455 -0.238654473 0.06134553 5          2.0
>  3: 0.4099144 -0.190085564 0.10991444 5          2.0
>  4: 0.4565129 -0.143487143 0.15651286 5          2.0
>  5: 0.6018691  0.001869065 0.30186907 4          2.5
>  6: 1.5668586  0.966858578 1.26685858 1          5.0
>  7: 1.9767126  1.376712596 1.67671260 2          6.5
>  8: 2.1566069  1.556606875 1.85660688 2          6.5
>  9: 2.4754627  1.875462707 2.17546271 2          8.5
> 10: 2.5244780  1.924478037 2.22447804 2          8.5
> 11: 2.9880564  2.388056413 2.68805641 1         10.0 
> ```

前两列分别显示了时间间隔的上限和下限，分别`t`是原始`vecTimes`，并`N`表示计算滑动平均值时包含的数据点的数量。

# php - 如何在父页面上将php信息回显到表单中

> ID：10465999
> 
> 赞同：0
> 
> 时间：2012-05-05T21:08:17.833
> 
> 标签：php

我的订单底部有一个指向客户查询表的链接。一旦客户单击此链接，它就会打开查询表。我希望订单表格中的产品编号自动填写到查询表格并提交给我。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:25:49.400

例子

```
<?php

    $customer_id = $_GET['c_id'];

    $sql = "SELECT * FROM customers WHERE customer_id = $customer_id";
    $result = mysql_query($sql);
    $row = mysql_fetch_assoc($result);

?> 
```

然后以你的形式回应

```
<form action="" method="post">
    <input type="text" name="customer_name" value="<?= $row['customer_name'] ?>" />
    <input type="text" name="customer_email" value="<?= $row['customer_email'] ?>" />
    <input type="submit" name="submit" value="Okay" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:48:06.240

3 可能的选择。

*   DB：如果DB上有订单信息，您可以将订单ID（订单表的主键）附加到链接并在加载查询表单页面时获取它。

*   会话：类似于 DB。

*   AJAX/JQuery：如果它们都不可用，您可以使用 ajax 将当前值作为 $_GET 值发送并填写查询表单。(http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)