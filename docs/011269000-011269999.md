# StackOverflow 问答 11269000-11269999

# jquery - 如何使用 Knockout 实现模糊时间日期替换器？

> ID：11269000
> 
> 赞同：12
> 
> 时间：2012-06-29T21:09:58.547
> 
> 标签：jquery, knockout.js, knockout-2.0

我想使用 jQuery 来实现这个插件的功能： [https ://github.com/rmm5t/jquery-timeago](https://github.com/rmm5t/jquery-timeago)

该插件的简短描述：

这将在标题中使用 timeago 类和 ISO 8601 时间戳的所有 abbr 元素（符合 datetime 设计模式微格式）：

```
<abbr class="timeago" title="2011-12-17T09:24:17Z">December 17, 2011</abbr> 
```

变成这样：

```
<abbr class="timeago" title="December 17, 2011">about 1 day ago</abbr> 
```

除了使用淘汰赛我的标记看起来像这样：

```
<abbr data-bind="attr: { title: Posted }" class="timeago"></abbr> 
```

我认为有些东西没有同步，因为即使我在视图模型本身中调用 timeago 也没有发生任何事情。我猜我需要一个附加到可观察的“已发布”的订阅者，但我不确定如何设置它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-30T00:32:11.733

您的方法不起作用，因为 timeago 通过 jQuery 的 data() 函数创建了一个缓存。因此，仅仅更新标题是不够的。

我认为自定义绑定是最好和最干净的方法：

```
ko.bindingHandlers.timeago = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var $this = $(element);

        // Set the title attribute to the new value = timestamp
        $this.attr('title', value);

        // If timeago has already been applied to this node, don't reapply it -
        // since timeago isn't really flexible (it doesn't provide a public
        // remove() or refresh() method) we need to do everything by ourselves.
        if ($this.data('timeago')) {
            var datetime = $.timeago.datetime($this);
            var distance = (new Date().getTime() - datetime.getTime());
            var inWords = $.timeago.inWords(distance);

            // Update cache and displayed text..
            $this.data('timeago', { 'datetime': datetime });
            $this.text(inWords);
        } else {
            // timeago hasn't been applied to this node -> we do that now!
            $this.timeago();
        }
    }
}; 
```

用法很简单：

```
<abbr data-bind="timeago: Posted"></abbr> 
```

演示：http: [//jsfiddle.net/APRGc/1/](http://jsfiddle.net/APRGc/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:02:02.560

这是一个替代方案，它可能根本没有比 Niko 的答案有任何优势，除了可能更简单:) -

```
usf.ko.bindings['timeago'] = {
  update: function(element, valueAccessor) {
    var $element, date;
    date = ko.utils.unwrapObservable(valueAccessor());
    $element = $(element);
    if (date) {
      $element.attr('title', date.toISOString());
      $element.data('tiemago', false);
      return $element.timeago();
    }
  }
}; 
```

# javascript - 如何将服务器端类型传递给 asp.net webform 以供 javascript 使用

> ID：11269007
> 
> 赞同：1
> 
> 时间：2012-06-29T21:10:10.600
> 
> 标签：javascript, asp.net

我目前正在尝试将已知类型（列表）传递给需要由页面加载上的 javascript 拾取的 asp.net 网络表单。

我正在创建的模拟数据如下所示：

```
 protected List<MapCoords> createCoordinateList()
    {
       List<MapCoords> latlng = new List<MapCoords>();
       MapCoords m = new MapCoords();
       m.xCoord = 34.241182;
       m.yCoord = -77.946839;
       latlng.Add(m);
       m.xCoord = 34.242176;
       m.yCoord = -77.94538;
       latlng.Add(m);
       return latlng
     } 
```

我被卡住的地方（可能只是在当天晚些时候）是过去我进行了 ajax 调用并将结果成功返回到页面的对象。然而，在这种情况下，此模拟数据是由服务器端事件生成的，因此不使用 ajax 来调用或调用该方法。由于对象具有多个属性（x，y），我不能只将值设置为隐藏字段，这就是为什么我认为需要将其作为对象传递。如果迫不得已，我可以使用 ajax 来调用该方法，但这几乎是对我正在尝试做的事情的双重调用，所以我想避免这种情况是可能的

所以问题是如何获取包含坐标的列表并使其可供客户端中的 javascript 访问？这种类型可能会变得更健壮（即更多的属性，所以我需要确保属性保留它们的关联 x 到 y ）

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:32:46.167

您可以在 aspx 页面或 .asmx webservice 中使用 web 方法传递类数组。ScriptService 属性会将您的类数组转换为 json 对象。这个简单的例子来理解你如何做到这一点，[jQuery Ajax with asp.net](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

```
[ScriptService]
public class YourClass : Page
{
    [WebMethod]   
    public static []MapCoords createCoordinateList()
    {
        //Your code
        return arrOfMapCoords;   
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:44:50.693

为您创建了一个小例子：

服务器代码：

```
public class MapCoords
{
    public double x { get; set; }
    public double y { get; set; }
}
public partial class _Default : System.Web.UI.Page
{
    [WebMethod]
    public static List<MapCoords> createCoordinateList()
    {
        List<MapCoords> latlng = new List<MapCoords>();
        MapCoords m = new MapCoords();
        m.x = 2.00;
        m.y = 3.1512;
        latlng.Add(m);

        m = new MapCoords();
        m.x = 3.00;
        m.y = 4.1512;
        latlng.Add(m);
        return latlng;
    }
} 
```

客户代码：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "Default.aspx/createCoordinateList",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg != null) {
                    for (i = 0; i <= msg.d.length; i++) {
                        alert(msg.d[i].x + " " + msg.d[i].y);   
                    }
                }
            }
        });
    });
</script> 
```

这使用 jQuery 和 json。不要忘记包含[jQuery](http://jquery.com/)库。祝你好运！

# assembly - x86 asm 将 16 位值转换为 8 位？

> ID：11269008
> 
> 赞同：2
> 
> 时间：2012-06-29T21:10:16.897
> 
> 标签：assembly, x86

一些背景信息：我目前正在学习 intel x86 汇编时在保护模式下编写引导加载程序。最终结果将是一个“BootLoader ASCII 蛇”游戏。

我想要做的是将堆栈中的一个值弹出到 AL 寄存器中。这给了我一个错误，因此我假设我必须将一个值弹出到一个 16 位寄存器中。这让我需要将 16 位寄存器中的前 8 位复制到我的 8 位寄存器？

这是我正在使用的指令参考：http: [//www.mathemainzel.info/files/x86asmref.html](http://www.mathemainzel.info/files/x86asmref.html)

例如，从链接的参考资料中，我看到了将字节转换为字的说明。所有的转换指令似乎都从一个较低的寄存器转到一个更大的寄存器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T21:14:54.767

实际上`AX`register 表示`AH`和`AL`register 以便`AL`表示位 0-7 和`AH`位 8-15。如果你把即。0xef80 到`AX`那时`AH`将是 0xef 并且`AL`将是 0x80。

# ios - 绘制为 GL_POINTS（仅指定 2 个坐标）时，是否可以在顶点处旋转纹理？

> ID：11269011
> 
> 赞同：2
> 
> 时间：2012-06-29T21:10:37.530
> 
> 标签：ios, opengl-es

我正在为 iOS 创建一个 ios 绘画应用程序，并且最难在特定点旋转绘画纹理以使其面向笔画方向。

我在用户的每次触摸之间绘制了几个像素的纹理。顶点被表示为具有 x 和 y 坐标的 2d 点到顶点缓冲区中，然后将其渲染到屏幕上。这是我用来绘制的代码：

```
 count = MAX(ceilf(sqrtf((end.x - start.x) * (end.x - start.x) + (end.y - start.y) * (end.y - start.y)) / kBrushPixelStep), 1);
 GLfloat *vBuffer = malloc(2 * sizeof(GLfloat));
 for(i = 0; i < count; i++) {

    vBuffer[0] = start.x + (end.x - start.x) * ((GLfloat)i / (GLfloat)count);
    vBuffer[1] = start.y + (end.y - start.y) * ((GLfloat)i / (GLfloat)count);
    CGFloat degrees = atan2(end.y - start.y, end.x - start.x) * 180 / M_PI;

    glMatrixMode(GL_TEXTURE);
    glPushMatrix();
    glVertexPointer(2, GL_FLOAT, 0, vBuffer);
    glDrawArrays(GL_POINTS, 0, count);
    glRotatef(degrees, 0, 0, 1);
    glPopMatrix();
 }

 // render to screen
 glBindRenderbufferOES(GL_RENDERBUFFER_OES, renderbuffer);
 [context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

这并没有给我想要的效果，即纹理在每个顶点处的旋转角度表示两点之间的偏差。

我的问题是：

*   如何在每个点仅旋转纹理？
*   仅用 x,y 坐标表示每个顶点是否足够，还是必须为 3 个点或更多？
*   我需要启用纹理映射吗？那是什么阻止我在每个顶点独立旋转纹理？如果是这样，我如何表示上面表示的顶点数组的纹理坐标数组？我一直无法弄清楚那部分。

非常感谢您提前提供的帮助！

更新：

我能够弄清楚这一点并在此处发布我的答案：[https ://stackoverflow.com/a/11298219/111856](https://stackoverflow.com/a/11298219/111856)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-25T07:43:47.070

如果您是通过 google 搜索到达此页面（几乎每个人都会这样做），您可能想知道如何旋转使用 gl_PointCoord 渲染的精灵。SteveL 接受的答案错误地表示这是不可能的，但 Joel Murphy 指出了如何做到这一点。

如果您使用 Joel 的建议，以下是一些可能与您相关的附加信息。（在我的书中，贡献信息与实际答案一样接近，没有区别！）

1.  图像需要是原始大小的 2 倍，即 1.414 x，而不是 15%
2.  在顶点着色器中进行三角函数工作的效率要高得多。所以我有：

    ```
    precision mediump float;

    attribute vec3 vertex;
    attribute vec3 normal;

    uniform mat4 modelviewmatrix[2];
    uniform vec3 unib[4];

    varying float dist;
    varying mat2 rotn;

    void main(void) {
      gl_Position = modelviewmatrix[1] * vec4(vertex,1.0);
      dist = vertex[2];
      rotn = mat2(cos(normal[0]), sin(normal[0]),
                 -sin(normal[0]), cos(normal[0])); 
      gl_PointSize = unib[2][2] / dist;
    } 
    ```

    片段着色器：

    ```
    precision mediump float;

    uniform sampler2D tex0;
    uniform vec3 unib[4];

    varying float dist;
    varying mat2 rotn;

    void main(void) {
      vec2 centre = vec2(0.5, 0.5);
      vec2 rot_coord = rotn * (gl_PointCoord - centre) + centre;
      vec4 texc = texture2D(tex0, rot_coord);
      if (dist < 1.0 || texc.a < unib[0][2]) discard;
      gl_FragColor = texc;
    } 
    ```

PS 我不再使用 highp 变量，因为 beaglebone 和 cubitruck 等 soc 板上使用的一些电话 gpus 不支持它。

PPS 作为对这种方法的扩展，我在 pi3d 中添加了这个着色器的一个版本，它也使用偏移量来使用 texture2D() 作为精灵图集。[顶点](https://github.com/pi3d/pi3d_demos/blob/develop/shaders/uv_spritemult.vs) [片段](https://github.com/pi3d/pi3d_demos/blob/develop/shaders/uv_spritemult.fs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T20:03:38.990

通过从顶点着色器传递旋转值，我已经能够在片段着色器中旋转纹理。给定具有以下内容的顶点着色器：

```
attribute float aRotation;
varying float vRotation; 
```

属性从您的应用程序传递，而变化将信息传递给片段着色器。不需要计算任何内容，因此您可以通过将其放在顶点着色器的 main() 函数中直接复制该值：

```
vRotation = aRotation; 
```

在片段着色器中，您需要有另一个不同的语句：

```
varying highp float vRotation; 
```

值 gl_PointCoord 是一个 vec2，其值介于 0.0 和 1.0 之间，(0.0, 0.0) 是左下角，(1.0, 1.0) 是右上角，因此只需进行很少的转换即可完成这项工作。在片段着色器的主目录中，添加：

```
// Set a center position.
highp vec2 center = vec2(0.5, 0.5);

// Translate the center of the point the origin.
highp vec2 centeredPoint = gl_PointCoord - center;

// Create a rotation matrix using the provided angle
highp mat2 rotation = mat2(cos(vRotation), sin(vRotation),
                          -sin(vRotation), cos(vRotation)); 

// Perform the rotation.
centeredPoint = rotation * centeredPoint;

// Translate the point back to its original position and use that point 
// to get your texture color.
gl_FragColor = texture2D(uTexture, centeredPoint + center); 
```

**注意**：实际的点精灵仍然是引擎绘制的同一个正方形。如果使用这种方法，你需要确保你的纹理每边有大约 15% 的填充（例如，如果你的图像是 128x128，你需要用 56 像素的边距填充图像）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:47:49.213

绘制为 GL_POINTS 时无法旋转点，您需要使用其他方式，例如将纹理绘制为 GL_TRIANGLES

# python - 使用 Python 的分数模块查找具有特定分母的最接近小数的分数

> ID：11269014
> 
> 赞同：3
> 
> 时间：2012-06-29T21:10:48.737
> 
> 标签：python, fractions

使用 Python 的`fractions`模块，我可以执行以下操作：

```
>>> from fractions import Fraction
>>> import math
>>> target_number = str( 10 / math.pi )
>>> Fraction( target_number )
Fraction(39788735773, 12500000000) 
```

但是，如果我想要十六分之一的分数，我该怎么办？即，`Fraction(51, 16)`。使用`limit_denominator(16)`only 使最大分母为 16：

```
>>> Fraction( target_number ).limit_denominator(16)
Fraction(35, 11) 
```

有没有一种简单的方法可以用模块做到这一点`fractions`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:21:01.817

在没有模块的情况下计算你需要的分子很简单`fractions`——它只是最接近的整数`16*target_number`——如果你想要一个，`Fraction`那么你可以（并且应该）说（当然，不用字符串化你的目标数字）：

```
Fraction(int(round(16*target_number)),16) 
```

（根据经验，它看起来好像省略了`int()`并不会停止它的工作，但根据文档，你应该传入有理数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:20:35.450

```
>>> target = 10 / math.pi
>>> denominator = 16
>>> fractions.Fraction(int(round(target*denominator)), denominator)
Fraction(51, 16) 
```

# apache - htaccess 将第一个目录重写为文件名

> ID：11269015
> 
> 赞同：1
> 
> 时间：2012-06-29T21:10:57.317
> 
> 标签：apache, .htaccess

我想知道如何执行 htaccess 重写，如下所述。

domain.com/filename/testing123 --> domain.com/filename.php?/testing123

其中“文件名”是 php 文件的名称。这个“文件名”可以更改，“文件名”之后的任何内容都添加到“？”之后。

另一个例子是：

domain.com/abc/other/information/etc --> domain.com/abc.php?/other/information/etc

谢谢，

康纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:37:42.403

用于`^([^/]+)`匹配第一个之前的所有内容，将被附加`/`到其中`.php`，并`(.*)`匹配将在`?`via之后附加的所有其他内容`$2`。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !\.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)(.*)$ $1.php?$2 [L] 
```

# makefile - MacPorts：在 destroot 阶段违反了端口文件系统层次结构

> ID：11269019
> 
> 赞同：0
> 
> 时间：2012-06-29T21:11:33.303
> 
> 标签：makefile, installation, macports

我正在为我的应用程序开发 Portfile，并且在 destroot 阶段遇到了问题。根据[MacPorts 指南](http://guide.macports.org/#reference.phases)，destroot 阶段执行以下命令：

```
make install DESTDIR=${destroot} 
```

我想我可能会误解这应该如何在 Makefile 中工作。我的应用程序很简单，安装规则只需要复制几个目录到，`DESTDIR`所以指定如下：

```
install:
    cp -R bin $(DESTDIR)/bin
    cp -R lib $(DESTDIR)/lib
    cp -R cfg $(DESTDIR)/cfg 
```

但是，当我尝试对我的应用程序进行 MacPort 安装时，我收到以下警告：

```
--->  Staging test into destroot
Warning: violation by /bin
Warning: violation by /lib
Warning: violation by /cfg
Warning: test violates the layout of the ports-filesystems! 
```

我该如何解决？我是否误解了`DESTDIR`变量在安装规则中的使用方式或完全遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:21:14.343

目录需要放在**DESTDIR**下，就好像您从 开始一样`/.`，例如，`$(DESTDIR)/bin`您应该使用`$(DESTDIR)/$(PREFIX)/bin`- where `$(PREFIX)`is`/opt/local`或其他，而不是使用。

# javascript - 如何在滚动时为页面上的多个缩略图集实现 jQuery 图像循环循环？

> ID：11269022
> 
> 赞同：0
> 
> 时间：2012-06-29T21:11:44.113
> 
> 标签：javascript, jquery, html, django-templates

这是我目前拥有的 Javascript

```
<script type="text/javascript">
$(function() {
    $('.slideshow').hover(
        function() { $('.slides').cycle('resume'); },
        function() { $('.slides').cycle('pause'); }
    );

    $('.slides').cycle({
        fx:     'fade',
        speed:   .3,
        timeout: 280,
        next:   '#next',
        prev:   '#prev'
    }).cycle("pause");
});
</script> 
```

有用; 但问题是它适用于页面上的所有缩略图集，每当我将鼠标悬停在一组图像上时，其他所有图像集也会循环。

我确实看到这是因为我以类为目标，但我的 jQuery 经验非常有限，所以我不知道如何只针对每个类的单个实例而不影响其他类，而且我无法进入硬编码 id因为我的缩略图和每个页面上的视频数量是通过这个 Django 模板动态确定的。

[http://pastebin.com/nf42bSAx](http://pastebin.com/nf42bSAx)

我将不胜感激任何帮助，因为这对我的项目（开源媒体平台）至关重要。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:21:09.473

您应该只在当前幻灯片中的幻灯片上调用循环，所以调用类似：

```
$(".slideshow").each(function() {
    $(this).find(".slides").cycle({
        fx:     'fade',
        speed:   .3,
        timeout: 280,
        next:   '#next',
        prev:   '#prev'
    }).cycle("pause").end().hover(
        function() { $(this).find('.slides').cycle('resume'); },
        function() { $(this).find('.slides').cycle('pause'); }
    );
}); 
```

请注意，我在今天之前没有使用（甚至听说过）这个功能，但从逻辑上讲，这应该可以满足您的需求。

# visual-studio - 如何在 Visual Studio 中将特定参数传递给 mstest

> ID：11269027
> 
> 赞同：0
> 
> 时间：2012-06-29T21:12:20.430
> 
> 标签：visual-studio, unit-testing

我正在尝试修改我的测试项目以允许远程调用我们正在构建的 api。现在测试被硬编码为在本地运行（针对本地主机），但我希望能够将测试指向任何端点（甚至是生产中的远程端点）。

理想情况下，在 .testsettings 中会有一个用于存储配置值的位置。可悲的是，情况并非如此。

或者，能够将测试将读取的参数传递给 MSTest...？

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:42:59.757

您可以添加一个设置文件，就像 Tony 已经指出的那样，但您也可以考虑使用 Visual Studio 支持的数据驱动测试的概念。

我希望这种技术可以让您在配置测试场景时更加灵活。

这是一篇关于它的 MSDN 文章：[How to: Create a Data-Driven Unit Test](http://msdn.microsoft.com/en-us/library/ms182527.aspx)

当然，这个想法并不是直接用于连接配置，但无论如何您应该能够毫不费力地重新使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:26:41.113

I just created my own settings file, added it to the project with always copy, and knocked up a little class to read it in, and expose the required settings.

It's a bit naff, but it works.

# android - ImageSpan 中的可绘制选择器不起作用？

> ID：11269029
> 
> 赞同：5
> 
> 时间：2012-06-29T21:12:30.540
> 
> 标签：android

是否可以使用`selector`drawable in `ImageSpan`？

我有`TextView`选择器文本颜色，并使用选择器资源添加 ImageSpan。文本颜色更改工作正常，图像不会更改。这是一个错误还是有办法使选择器跨度？

我的`TextView`：

```
<TextView
    android:id="@+id/text"
    android:ellipsize="end"
    android:layout_height="fill_parent"
    android:duplicateParentState="true" // parent of this text view can be selected
    android:gravity="center_vertical"
    android:lines="1"
    android:textColor="@color/message_content_simple_text" // here is selector - it works fine
    android:textSize="15dp" /> 
```

选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/ic_active" android:state_focused="true"/>
    <item android:drawable="@drawable/ic_active" android:state_selected="true"/>
    <item android:drawable="@drawable/ic_active" android:state_pressed="true"/>
    <item android:drawable="@drawable/ic_passive"/>
</selector> 
```

以及添加跨度的代码：

```
SpannableString text = new SpannableString("  some text");
ImageSpan span = new ImageSpan(context, R.drawable.icon, ImageSpan.ALIGN_BASELINE);
text.setSpan(span, 0, 1, SpannableString.SPAN_INCLUSIVE_INCLUSIVE);
textView.setText(text); 
```

当我选择此文本视图时，“某些文本”会根据需要更改其颜色，但图像不会更改。

**编辑**

如果有一些android bug，你能提供任何方法来达到同样的结果吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T00:56:09.123

这并不是 Android 中的真正错误，而是使用 spans 的更多限制。Spans 用于一些基本的文本样式，而不是用于可能涉及或可能不涉及状态等的（复杂）用户交互。基本上，您应该认为跨度内的任何内容都是静态的。选择器对 a 中的所有文本都起作用的事实`TextView`是由于它`TextView`本身，与底层跨度无关。

an 上的选择器`ImageSpan`不工作的原因仅仅是因为 an`ImageSpan`不知道状态，并且没有任何东西可以通知它任何状态更改。这也许是您认为 a 的责任`TextView`，但另一方面，问自己以下问题：您是否真的希望 a`TextView`遍历其所有不同跨度以通知它们状态更新？

话虽如此，绝对有可能同时修改（可能）`ImageSpan`并`TextView`在底层跨度上启用状态感知，但这需要一些工作。接下来最好的事情是使用 的复合可绘制特性`TextView`，它允许您在 a 内的左侧、顶部、右侧或底部放置最多四个可绘制对象`TextView`（但不是内联）。快速浏览一下源代码表明复合可绘制对象是状态感知的。

完全不同的是：我曾经[回答过一个](https://stackoverflow.com/a/8632889/1029225)与您有关的问题。它处理在`ImageSpan`. 它绝对不漂亮，但它可能会帮助你理解关于不了解状态的一点。此外，如果您决定就自己的问题继续实施，也许它可以给您一些指示/想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:43:09.793

我还没有测试，但它应该可以工作......

实现`onTouch`和`TextView`处理`ACTION_UP`它`ACTION_DOWN`......简单易行。

# internet-explorer - 无法获取属性“keyCode”的值：对象为空或未定义：Internet Explorer

> ID：11269030
> 
> 赞同：0
> 
> 时间：2012-06-29T21:12:34.253
> 
> 标签：internet-explorer

其中一位客户在登录我们的网站时遇到困难，每当用户在登录页面的用户名文本框中键入第一个字符时，他就会收到以下 JavaScript 错误消息。

无法获取属性“keyCode”的值：对象为空或未定义

我们确实检查了 event.keyCode 以验证 userName 文本框，因此一旦用户键入第一个字符，我们就会发送 event.keyCode 以进行验证，但验证失败。

浏览器是 Internet Explorer 9，我们无法在具有 I9 的工作站中重现该问题

# c++ - R6025 纯虚函数调用：什么是以及如何解决

> ID：11269035
> 
> 赞同：1
> 
> 时间：2012-06-29T21:13:08.290
> 
> 标签：c++, visual-c++, pure-virtual

**答案可以在这里找到：**

> [《Effective C++》第三版摘录，作者：Scott Meyers](http://www.artima.com/cppsource/nevercall.html)

*网址发布者*：[hmjd](https://stackoverflow.com/users/1033896/hmjd)

请阅读该页面，以便您了解它发生的原因。你也知道为什么要替换

```
 virtual void     OnRelease() = 0; 
```

经过：

```
 virtual void     OnRelease(){}; 
```

会起作用，但不是解决问题的正确方法。

* * *

**原始问题**

R6025：纯虚函数调用

```
#include <Windows.h>

// static lib
    //file.h
    class cBaseApplication
    {
    public:
        virtual          ~cBaseApplication(){ Release(); }
        virtual void     Release()
                         {

                             OnRelease();

                         };
        virtual void     OnRelease() = 0;
    }; // class cBaseApplication

    //file1.h
    class cApplication : public cBaseApplication
    {
    public:
        virtual void     OnRelease()
                         {

                             /* what the heck do something here */

                         };
    }; // class cApplication

// executable
    // file3.h
    int WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow )
    {

        cApplication* pApplication = new cApplication();

        /*...what the heck, do stuff...*/

        pApplication->Release();
        delete pApplication;      // R6025: pure virtual function call
        pApplication = NULL;

        return 0;

    } 
```

在线上

```
delete pApplication; 
```

R6025 发生，删除时，一切正常，但发生内存泄漏。当 cApplication 应用程序将被破坏时，删除 R6025 的指针引用也会在“程序退出”时发生。

由于哔哔声，R6025 吓到我了：s

看来我必须在两者之间做出选择，但我只是不想，这里发生了什么？

问候，约翰

编辑：添加了一些代码，似乎 Eran 是对的，因为我在那里调用虚函数

编辑：添加到示例中，[ virtual void OnLostDevice() = 0; ]。从abstract 到ascoop 的改变给出了一个直接的解决方案。开始在下面的评论中阅读该页面，因为我觉得我还没有到那里。

编辑：得到答案后，我明白了自己的问题。所以我重写了这个问题，所以答案适合这个问题。

谢谢，约翰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T21:22:45.277

不能在构造函数**和**析构函数中调用虚函数。我在这里看不到纯虚函数，但如果`cBaseApplication::Release`碰巧调用了一个，那么每次你破坏一个`cBaseApplication`. 我不确定这是问题所在，因为我没有所有代码，但是您的代码需要此类问题。

# google-fusion-tables - 从谷歌表单中的1个数据输入操作在融合表中插入多行

> ID：11269040
> 
> 赞同：0
> 
> 时间：2012-06-29T21:13:30.227
> 
> 标签：google-fusion-tables

我已经按照这些说明将谷歌表单连接到融合表 [https://kh-samples.googlecode.com/svn/trunk/code/instructions.html](https://kh-samples.googlecode.com/svn/trunk/code/instructions.html)

当用户填写表格时，将插入融合表中的新行。

但是，我向用户提出了一个带有复选框的问题 - 如果选择了多个复选框，对于每个选项，我想插入一个单独的行。

例子：

*   姓名（文字）
*   兴趣领域（复选框）：IT、艺术、历史等

在融合表中，我得到

*   我的名字 - IT，历史

我想得到：

*   我的名字 - IT
*   我的名字——历史

这主要是由于需要在网络中表示内容。

我真的真的非常感谢反馈/帮助

最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:28:14.837

您应该能够通过修改您正在使用的脚本来实现这一点。如果您查看该`onFormSubmit`函数，这就是从提交的数据中创建一行的原因。您可以根据列表中有多少逗号分隔的项目来修改脚本以生成多行。

一个简单的示例模型：（我假设列名为“interest”）

```
function onFormSubmit(e) {
  ...
  // The values entered into the form, mapped by question.
  var interests = e.nameValues['interest'].split(',');
  for (i in interests)
  {
    var formValues = e.namedValues;
    formValues['interest'] = interests[i];

    // Insert the data into the Fusion Table.
    var rowId = createRecord(formValues);
    if (!rowId) {
      rowId = -1;
    }
    insertRowId(rowId, row);
  }
} 
```

# css - 带有悬停的导航菜单生涩

> ID：11269045
> 
> 赞同：0
> 
> 时间：2012-06-29T21:13:48.840
> 
> 标签：css, html, nav

我怎样才能停止悬停时的[抖动](http://jsfiddle.net/ZhM3T/)，它似乎移动了几个像素：

**CSS：**

```
header nav ul li{
    list-style:none;
    display:inline-block;
}
header nav li a {
    color:#8f3479;
    text-align:center;
    width:30px;
    padding:15px;
}
header nav li a:hover, .current{
    padding:15px;
    font-weight:bold;
    background-color:#8f3479;
    border-radius:5px;
    color:#fff;
} 
```

**HTML：**

```
<header>
        <div class="branding"></div>
            <nav>
                <ul>
                    <li><a class="current" href="#">Home</a></li>
                    <li><a href="#">Portfolio</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            <nav>   
  </header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:18:30.957

这是因为对悬停状态的大胆处理。如果您也将粗体添加到常规链接，则两种状态都将保持不变。例如看这个小提琴 - [http://jsfiddle.net/ZhM3T/1/](http://jsfiddle.net/ZhM3T/1/)

# ruby - 通过图像转换分发 ruby 脚本

> ID：11269046
> 
> 赞同：0
> 
> 时间：2012-06-29T21:13:50.337
> 
> 标签：ruby, image-processing, imagemagick, executable, freeimage

我想分发一个用于 Mac/Windows 的 Ruby 脚本的可执行文件，该脚本（除了其他东西）将执行从/到常见图像格式到 .xpm / X PixMap（[维基百科](http://en.wikipedia.org/wiki/X_PixMap)）的转换

我知道以下作为预安装库（主要是 ImageMagick）的包装器的 gem：RMagick、Mini magick、Image science、Magickly、Devil、Im magick、Free-image 等。

据我了解，问题归结为以下几点： Imagemagick 和 Freeimage 需要安装在系统上，而不仅仅是在脚本中以相对方式指出。并且 Ruby2Exe、Ocra、Crate 没有将库和我的脚本作为可执行文件分发的功能。

我还没有发现一个 gem 可以在不使用外部库的情况下执行此操作，是否有技术原因？我的问题有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:21:49.363

一种可能的解决方案：

查找可以执行所需转换的免费命令行实用程序。最好的是不需要任何特殊安装（只需将 EXE 文件放到硬盘驱动器上并运行它）。

在您的 Ruby 程序中，使用反引号调用命令行实用程序。如果它不在系统路径上，您可能必须调用它`utility.exe`而不是`utility`. 因此，无论当前工作目录如何，您都可以正确调用它，您可能必须使用绝对路径，使用`File.dirname(__FILE__)`and生成`File.expand_path`。或者在尝试调用该实用程序之前更改工作目录。

最后，您只需将该实用程序与您的 Ocra 生成的 Ruby EXE 打包在一起。

我建议所有这些，因为我知道尝试在 Windows 系统上安装 RMagick 可能会非常痛苦。

# c++ - 旋转 4x4 矩阵会导致随时间缩放

> ID：11269050
> 
> 赞同：1
> 
> 时间：2012-06-29T21:14:02.053
> 
> 标签：c++, opengl, matrix, rotation, scenegraph

我正在使用`glm::rotate`旋转场景中立方体的变换矩阵。

`"cube->t = glm::rotate(cube->t, stepTime * 50.f, glm::vec3(0.f, 1.f, 0.f));"`每帧调用一次，`cube->t`所讨论的矩阵在哪里。

奇怪的是，在 20 分钟的过程中（或者如果我旋转`stepTime * 5000.f`而不是2 分钟`stepTime * 50.f`），立方体在 X 和 Z 轴上明显缩放，这两个轴上的缩放在任何时候都是相同的（高度立方体的大小从不改变，但宽度和深度的变化量完全相同）。在 的情况下`5000.f`, 变小, 和正常的`50.f`or `100.f`, 变大。

我认为这可能是舍入错误的问题，但除此之外我不知道是什么原因造成的。这是舍入错误吗？我可以通过定期标准化矩阵来解决它吗？glm 是否具有标准化矩阵的功能，还是我必须自己编写一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T21:21:15.977

如果它是增量的、累积的、精度损失：不要就地更新立方体，而是保留原始未旋转的立方体并跟踪总旋转角度。然后在每一步从原始未旋转的立方体创建一个立方体，由总累积的旋转角度转换。这样，您的多维数据集就不会遇到累积舍入问题。

**编辑：针对与 Miles 的讨论，更合适的答案是：**

如果您可以分离变换矩阵的旋转分量和平移分量，并且问题主要在于旋转的累积引入了剪切或缩放，则可以通过从旋转分量中提取角度并重新创建旋转矩阵来纠正问题那个角度但是单位长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:20:58.210

是的，这是一个舍入误差。一个合理的解决方案是将方向存储为单个数字，并在每一帧中从头开始构建矩阵。

# c# - 使用 LINQ 从 CSV 文件中获取最常见的数据

> ID：11269052
> 
> 赞同：0
> 
> 时间：2012-06-29T21:14:26.310
> 
> 标签：c#, linq, distinct

我正在为我的工作制作一个项目，但有一个大问题......我正在制作一个从 CSV（逗号分隔值）文件中获取用户信息的软件。每个用户都有自己的电话号码和他被呼叫的号码。当从文件中收集信息时，我想获取一个数字的所有电话号码并将它们升序排序。我不想成为所有电话号码的出现，只是这个有很大的持续时间。这意味着：

1-345345-9375683027
2-345345-3070982743
3-345345-9375683027
4-345345-3070982743
5-345345-9375683027
6-345345-23894459734
8-7529344

数字 1、3 和 5 是相等的。数字 2 和 4 相等。我想像这样对数字进行排序：

1-345345-9375683027
2-345345-3070982743
3-345345-2389479734
4-345345-2349875993

现在 1 我们是最常见的，2 是第一个不太常见，所以一个......我尝试了任何事情但没有问题。像这个：

```
var result = user.transactions.where(x=>x.phone == user.phone); 
```

如果你想看看我在这里做的项目是解决方案文件： http: [//mtelanalyzer.codeplex.com/](http://mtelanalyzer.codeplex.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:20:53.903

假设电话号码是`List<String>`：

```
var result = phoneNumbers.GroupBy(pn => pn)
             .Select(grp => new { Number = grp.Key, Count = grp.Count() })
             .OrderByDescending(x => x.Count)
             .Select(x => x.Number); 
```

1.  按电话号码分组
2.  选择一个匿名类型，以便能够按计数排序
3.  按降序（最高出现优先）~~，然后按数字排序~~
4.  选择数字，结果是`IEnumerable<String>`（或任何类型）

~~**编辑**：我刚刚看到您不是按数字而是按索引排序的。这使得它有点复杂：~~

 ~~```
var result = phoneNumbers.Select((pn, i) => new { Number = pn, Index = i })
             .GroupBy(x => x.Number)
             .Select(grp => new { 
                 Number = grp.Key, 
                 Count  = grp.Count(), 
                 Index  = grp.First().Index 
             })
             .OrderByDescending(x => x.Count)
             .ThenBy(x => x.Index)
             .Select(x => x.Number); 
```~~

# c# - 如何防止工厂方法模式在构造函数中引起有关虚拟成员调用的警告？

> ID：11269054
> 
> 赞同：8
> 
> 时间：2012-06-29T21:14:41.757
> 
> 标签：c#, design-patterns, factory-method

在[www.dofactory.com 上](http://www.dofactory.com/Patterns/PatternFactory.aspx)，我找到了工厂模式的真实示例。但是代码会在 ReSharper 中生成关于构造函数中的虚拟成员调用的警告。

导致警告的代码如下：

```
abstract class Document
{
    private List<Page> _pages = new List<Page>();

    // Constructor calls abstract Factory method
    public Document()
    {
        this.CreatePages(); // <= this line is causing the warning
    }

    public List<Page> Pages
    {
        get { return _pages; }
    }

    // Factory Method
    public abstract void CreatePages();
}

class Resume : Document
{
    // Factory Method implementation
    public override void CreatePages()
    {
        Pages.Add(new SkillsPage());
        Pages.Add(new EducationPage());
        Pages.Add(new ExperiencePage());
    }
} 
```

在消费代码中，您可以简单地使用：

```
Document document = new Resume(); 
```

我确实理解为什么在构造函数中调用虚拟成员是一个坏主意（如此[处](https://stackoverflow.com/questions/119506/virtual-member-call-in-a-constructor)所述）。

我的问题是如何重构它以便仍然使用工厂模式，但在构造函数中没有虚拟成员调用。

如果我只是`CreatePages`从构造函数中删除调用，消费者将不得不显式调用该`CreatePages`方法：

```
Document document = new Resume();
document.CreatePages(); 
```

我更喜欢`Resume`实际创建包含页面的简历所需的全部内容的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:21:21.687

重构它的一种方法是预先传递页面，并将它们传递给受保护的构造函数：

```
public abstract class Document {
    protected Document(IEnumerable<Page> pages) {
        // If it's OK to add to _pages, do not use AsReadOnly
        _pages = pages.ToList().AsReadOnly();
    }
    // ...
}

public class Resume : Document {
    public Resume() : base(CreatePages()) {
    }
    private static IEnumerable<Page> CreatePages() {
        return new Page[] {
            new SkillsPage(),
            new EducationPage(),
            new ExperiencePage()
        };
    }
} 
```

PS我不确定这与工厂方法有什么关系。您的帖子说明了[*模板方法模式*](http://en.wikipedia.org/wiki/Template_method_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:24:28.493

那这个呢？它使用延迟初始化，仅在需要时创建页面（而不是在构造函数中创建它们）

另外，请注意工厂方法的可见性已更改为`protected`将其隐藏以不被公众使用。

```
abstract class Document{
    protected List<Page> _pages = new List<Page>();

    // Constructor calls abstract Factory method
    public Document(){}

    public List<Page> Pages
    {
        get { CreatePages(); return _pages; }
    }

    // Factory Method
    protected abstract void CreatePages();
}

class Resume : Document{
    // Factory Method implementation
    protected override void CreatePages(){
       if(pages.Count == 0 ){
        _pages .Add(new SkillsPage());
        _pages .Add(new EducationPage());
        _pages .Add(new ExperiencePage());
       }
    }
} 
```

**编辑**建议：我个人不喜欢这个全局`_pages`变量，因为如果在许多方法和线程之间共享它可能会给你带来麻烦。我宁愿选择 GoF 书中描述的工厂方法模式。这是我的建议：

```
abstract class Document{
    public IEnumerable<Page> Pages{
        get { return CreatePages();}
    }

    // Factory Method
    protected abstract IEnumerable<Page> CreatePages();
}

class Resume : Document{
    // Factory Method implementation
    protected override IEnumerable<Page> CreatePages(){
         List<Page> _pages = new List<Page>();
        _pages .Add(new SkillsPage());
        _pages .Add(new EducationPage());
        _pages .Add(new ExperiencePage());
        return _pages;
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T20:15:26.990

> 我的问题是如何重构它以便仍然使用工厂模式，但在构造函数中没有虚拟成员调用。

根据定义

> 在基于类的编程中，工厂方法模式是一种创建模式，它使用工厂方法来处理创建对象的问题，而无需指定将要创建的对象的确切类。

工厂方法不打算从构造函数中使用，因为将创建的对象的确切类在构造时是已知的。例如，

1.  如果`Document`必须`Pages`在构建时全部创建，那么它可以在没有工厂方法的情况下完成，因为它完全知道要创建的所有页面

2.  但是如果`Document`必须`Pages`在构建后稍后创建并且可能多次创建，那么工厂方法很有用

> 我更喜欢创建一个新的简历是实际创建包含页面的简历所需的全部情况。

因此，如果`Pages`要在构建时创建所有内容，则可以在不使用工厂方法模式的情况下重写这个具体示例：

```
public class Document
    private readonly PageList as IList(of IPage)

    public readonly property Pages as IEnumerable(of IPage)
        get
            return PageList
        end get
    end property

    public sub new()
        Me.PageList = new List(of IPage)
    end sub

    protected sub Add(paramarray Pages() as IPage)
        Me.Pages.AddRange(Pages)
    end sub
end public

public class Resume
    inherits Document

    public sub new()
        mybase.add(new SkillsPage, new EducationPage, new ExperiencePage)
    end sub
end class 
```

1.  `Add`允许从构造函数中使用方法`Resume`，因为`Document`对象已完全构造并可以使用。

2.  方法`Add`是受保护的，因此页面只能从`Document`类或派生类中添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T21:20:57.087

你可以在财产本身做。

在这种情况下，`Pages`可以将属性标记为`virtual`基类。

的假设代码`Resume`可能如下所示：

```
 private List<Page> _pages  = null;
    public override List<Page> Pages
    {
          get 
          {  
                if(pages == null) 
                {
                  _pages = new List<Page>();
                  _pages .Add(new SkillsPage());
                  _pages .Add(new EducationPage());
                  _pages .Add(new ExperiencePage());
                }

                return _pages; 
           }

        }
    } 
```

在这种情况下，页面将在首次访问`Pages`属性时创建，而*不是*在`ctor`执行时创建。

# jquery - 如何在 AJAX 调用中更新我的 AJAX 设置？

> ID：11269061
> 
> 赞同：1
> 
> 时间：2012-06-29T21:15:14.893
> 
> 标签：jquery

我正在编写一个聊天应用程序，并希望在第一个聊天调用中获取所有后续 AJAX 调用的设置。

我设置了默认的 jQuery AJAX 设置：

```
jQ.ajaxSetup({
  url : 'chat.php',
  contentType: 'application/json'
  dataType : 'json',
  type : 'post'
}); 
```

然后我通过操作返回一个 JSON 对象，其中包含连接到特定聊天的数据。

```
jQ.ajax({
  data: {
    'action' : 'connect'
  },
  success: function (data) {
    if (data.success) {
    // set user ID and chat ID for all subsequent ajax calls
      if (data.partner) {
      // start fetching data to listen for messages
      } else {
      // keep checking for partner
      }
    } else {
    //  chat connect failed
    }
  }
}); 
```

如果创建了聊天并且用户连接到聊天伙伴，每 0.2 秒我从服务器获取数据，如下所示：

```
setTimeout(fetchData, 200);
function fetchData(){
  jQ.ajax({
    data: {
      'action' : 'fetch'
    },
    success: function (data) {
      if (data.success) {
        // update messages
      }
      setTimeout(fetchData, 200);
  });
} 
```

我也有 AJAX 功能来发布数据和断开聊天，基本上它们都需要具有与初始“连接”操作设置的相同的聊天凭据。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:40:30.963

在全局范围内创建一个包含凭据的对象，然后根据需要使用操作对其进行扩展。

```
var credentials = {}; 
```

使用第一个 ajax 请求更新该对象，然后后续的将简单地添加到该对象：

```
credentials.action = "fetch";

...
data: credentials,
... 
```

除非您添加的不仅仅是操作，否则您实际上不需要扩展它。否则，将其扩展为：

```
data: $.extend({},credentials,{ action: "fetch", foo: "bar" }), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:26:50.020

请记住，您正在向`ajax`函数提供 JSON 对象。

您可以将设置存储在变量中，如下所示：

```
var ajax_settings = {
    data: { ... },
    success: function(data) { ... },
}; 
```

并在 ajax 调用中使用它：

```
$.ajax(ajax_settings); 
```

`ajax_settings`连接后或根据需要更改变量。

# linux - 在 vimrc 中切换匹配

> ID：11269066
> 
> 赞同：4
> 
> 时间：2012-06-29T21:15:35.077
> 
> 标签：linux, vim, vi

我的 vimrc 文件中有以下几行：

```
hi ExtraWhitespace cterm=NONE ctermbg=green ctermfg=green guibg=green guifg=green
match ExtraWhitespace /\s\+$\|\t/ 
```

这些行将突出显示除空格之外没有字符的所有行以及任何制表符。我想添加一个函数来切换突出显示空白。

```
map <F8> :call ToggleWhitespaceMatching()<cr> 
```

我曾尝试编写自己的，但无法使其正常工作。有人可以建议一个功能来实现这一点。另外，我希望默认情况下启用匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T21:36:05.860

与 kev 类似的想法，但切换了高亮而不是匹配

```
let s:hilightws = 1

hi ExtraWhitespace cterm=NONE ctermbg=green ctermfg=green guibg=green guifg=green
hi link MaybeExtraWhitespace ExtraWhitespace
match MaybeExtraWhitespace /\s\+$/    

fun ToggleWhitespaceMatching()
  if s:hilightws
    hi link MaybeExtraWhitespace NONE
    let s:hilightws = 0
  else
    hi link MaybeExtraWhitespace ExtraWhitespace
    let s:hilightws = 1
  endif
endfun

map <F8> :call ToggleWhitespaceMatching()<CR> 
```

# d3.js - d3 js节点作为图像

> ID：11269067
> 
> 赞同：11
> 
> 时间：2012-06-29T21:15:47.930
> 
> 标签：d3.js

使用这个[http://bl.ocks.org/950642](http://bl.ocks.org/950642)我们可以看到如何将图像添加到节点，现在的问题是如何根据 json 数据在节点上添加不同的图像，例如，如果它具有值 group:0在该节点上有一个图像，其中 group:1 节点将有另一个图像。正如我所看到的，节点的创建是通过 json 进行的，它将相同的类添加到所有节点，因此可以根据 json 数据将其更改为具有不同图像的方式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T21:20:40.973

将“xlink:href”[属性](https://github.com/mbostock/d3/wiki/Selections#wiki-attr)定义为数据的**函数**而不是常量。例如：

```
// A map from group ID to image URL.
var imageByGroup = {
  "0": "red.png",
  "1": "green.png"
};

// Set the xlink:href attribute dynamically by looking up the URL.
image.attr("xlink:href", function(d) {
  return imageByGroup[d.group];
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-23T20:13:36.647

这是一个老问题，但您可以添加 JSON 本身定义的不同图像：

```
//Include info in JSON
"nodes":[
    {"name":"Zapata","group":1,"imagen":"changa.png"},
    {"name":"Villa","group":1,"imagen":"poeta.png"},
    [...]

//Add some function like this
function imagen(d) { return d.imagen; }

//Or add it to node image attribute
image.attr("xlink:href", function(d) { return d.imagen }); 
```

# macos - SVG 镶边

> ID：11269074
> 
> 赞同：6
> 
> 时间：2012-06-29T21:16:13.333
> 
> 标签：macos, firefox, google-chrome, svg, image-rendering

当我注意到 Google Chrome (20) 中存在一些严重的条带问题时，我正在使用 svg 文件来生成平滑渐变。更奇怪的是，当我将 chrome 移到我的电影显示器上时，条纹明显减少，这使得这更加奇怪。下面是当网站跨越我的mbp的本机屏幕（左）和电影院显示（右）时拍摄的单个屏幕截图（根本没有photoshop）。 ![macbook pro原生显示左，电影显示右](../Images/b67b31bbe931e715487746c215bbc1fa.png) 如您所见，左侧的条带更加严重。更奇怪的是，在 safari FF 或 ie9 中仍然存在接近于零的条带。下面是同样的情况，但在 FF

![现在从FF](../Images/c117403b4935edada0b5da9f979da037.png)

我有一种感觉，这可能是驱动程序问题或类似问题。但我真的很想知道。这到底是怎么回事？为什么它会在屏幕之间显示如此不同？跨两个显示器的单个屏幕抓取怎么可能产生这样的变化？

我也刚刚注意到 FF 窗口的 POSITION 改变了渲染。当超过一半的窗口在本机显示器上时，电影院一侧会出现条带，但本机一侧没有。当窗口移动到一半以上在电影院显示时，条带显示在电影院一侧消失并出现在原始一侧。safari 也是如此，但是 chrome 没有这种行为，条带在原生端总是更明显，而在影院端则不太明显。

这真的让我很奇怪。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T13:57:47.597

您正在`rgb(85,85,85)`渐变的中心和`rgb(28,28,28)`角落之间转换。一个 24 位 RGB 色彩空间（8 位 RGB 空间）只有 58 种独特的灰度颜色可在该区域显示。

在顶部图像上，从渐变角到中心的距离约为 520 像素。如果间隔均匀，这意味着相同的颜色必须连续显示至少 9 个像素。大多数人可以很容易地感知到各个 8 位灰度之间的差异，尤其是在颜色范围的中间。

正如@Duopixel 正确指出的那样，您的渐变之一是抖动的，有助于软化这些颜色之间的过渡。有趣的是，在您的双显示器测试中，有些频段是抖动的，有些则不是。这可能是因为硬件加速仅应用于一台显示器而不是另一台显示器。

像[10 位或 12 位灰度监视器](http://www.nvidia.com/docs/IO/40049/Grayscale10bit_v03.pdf)这样的故障是您将获得的最佳结果。使用您的显示器和这种设计，在技术上不可能获得更好的结果。

如果您想让当前的 24 位彩色显示器不那么明显，您可以：

*   更改您的设计以在渐变中引入微妙的颜色变化（例如从深蓝色到灰绿色）。这导致不同的 RGB 通道位可以在不同的时间转换，将您的波段分解成更小的差异化颜色。

*   更改您的设计以增加您的动态范围（例如从纯白色到纯黑色），以便您可以使用更多的彩条。

*   更改您的设计以减少渐变发生的总距离，从而减少带的宽度。

…或以上的某种组合。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T06:53:23.830

我不确定切换显示器时发生了什么。

在 Firefox 中减少条带的原因是因为[dithering](http://en.wikipedia.org/wiki/Dither)，像素溢出到下一个颜色，随机化。有点像在带状渐变上添加模糊。

也许这种放大会让它更清楚： ![在此处输入图像描述](../Images/3ea756ebd8566bf39b2c398a5ce4c77f.png)

左边是 Firefox，右边是 Webkit。似乎 Firefox 支持抖动渐变，而 Webkit 不支持。恐怕您对此无能为力。

# iphone - iphone safari 中的背景图像未正确显示

> ID：11269075
> 
> 赞同：0
> 
> 时间：2012-06-29T21:16:13.140
> 
> 标签：iphone, css, safari

我有一个无法在 iPhone 上正常查看的网站。有问题的网站是[这样](http://www.capital-restaurants.com)的，这就是它在 iPhone 上的显示方式：

![在此处输入图像描述](../Images/c303774109883e214b0118bf9885ca00.png)

您可以通过缩小浏览器的左侧或右侧来复制相同的行为。一旦你有最小的水平滚动，你会看到黑色背景缩小。

问题是`main`属性：

```
.main {
    background: url("images/bg1-1.png") repeat-y scroll center top transparent;
    margin: 0 auto;
    width: 100%;
} 
```

更准确地说是`bg1-1.png`1043x14 像素的图像，它没有按应有的方式重复，我不明白为什么。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:37:40.020

您的问题是它设置为`width: 100%`使`div.main`比例小于站点的其余部分。您需要将其设置为固定宽度，以便它不会像那样收缩。

# c# - 将 ASN.1 数据转换为公钥需要什么？例如，我如何确定 OID？

> ID：11269079
> 
> 赞同：4
> 
> 时间：2012-06-29T21:16:38.980
> 
> 标签：c#, cryptography, x509certificate, asn.1, dkim

此代码与反垃圾邮件工作中使用的[DKIM 签名验证有关。](http://www.ietf.org/rfc/rfc6376.txt)

我有一个`byte[]`是`s1024._domainkey.yahoo.com`ASN.1 编码的，但我不知道它是否包含足够的信息来实现公钥。

基于[此类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.publickey.publickey)，看来我可以将 ASN.1 密钥转换为 X509Certificate 公钥，但我需要提供 OID 和一些 ASN.1 编码的参数。

在此示例中，我有 ASN1 密钥为的元数据：

1.  RSA 编码密钥（ASN.1 DER 编码 [ITU-X660-1997] RSAPublicKey 每 RFC3447）
2.  与任一 sha1 sha256 哈希算法一起使用
3.  使用 RFC3447 的 A.2 节中与下表相关的 OID（尽管我不知道如何将此信息转换为完整的 OID）

```
/*
 * 1.2.840.113549.1
 * 
    MD2 md2WithRSAEncryption    ::= {pkcs-1 2}
    MD5 md5WithRSAEncryption    ::= {pkcs-1 4}
    SHA-1 sha1WithRSAEncryption   ::= {pkcs-1 5}
    SHA-256 sha256WithRSAEncryption ::= {pkcs-1 11}
    SHA-384 sha384WithRSAEncryption ::= {pkcs-1 12}
    SHA-512 sha512WithRSAEncryption ::= {pkcs-1 13}
 */ 
```

**代码示例**

```
string pubkey = "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDrEee0Ri4Juz+QfiWYui/E9UGSXau/2P8LjnTD8V4Unn+2FAZVGE3kL23bzeoULYv4PeleB3gfmJiDJOKU3Ns5L4KJAUUHjFwDebt0NP+sBK0VKeTATL2Yr/S3bT/xhy+1xtj4RkdV7fVxTn56Lb4udUnwuxK4V5b5PdOKj/+XcwIDAQAB";
byte[] pubkeyByteArray = Convert.FromBase64String(pubkey);
AsnEncodedData aData = new AsnEncodedData(pubkeyByteArray);

// OID must not be null, but it is here.  What is it?
System.Security.Cryptography.X509Certificates.PublicKey pubKeyRdr = new System.Security.Cryptography.X509Certificates.PublicKey(aData.Oid, null, aData); 
```

**问题**

*   我应该使用什么 OID？
*   ASN.1 参数的示例有哪些？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T23:43:41.243

**更新**

这是您在使用@erickson 提供的[链接解析时提供的数据：](http://lapo.it/asn1js/)

```
SEQUENCE (2 elem)
    SEQUENCE (2 elem)
        OBJECT IDENTIFIER 1.2.840.113549.1.1.1
        NULL
    BIT STRING (1 elem)
        SEQUENCE (2 elem)
            INTEGER(1024 bit)
            INTEGER 65537 
```

前面代码抛出`ASN1 bad tag value met.`异常的原因是因为`aData`包含了不正确的数据（包含了上面所有的数据）。从我所见，这 3 个论点是如何`System.Security.Cryptography.X509Certificates.PublicKey`分解的。

1.  第一个参数是OID，也就是上面的*OBJECT IDENTIFIER*。
2.  第二个参数是公钥参数。在上面的解析中，你可以看到它是 NULL。
3.  第三个参数是实际的公钥值。这由上面的第三个序列组成。该序列有 2 个整数，一个 1024 位模数，后跟公共指数。

我使用下面的代码对其进行了测试。如果不编写 DER 解析器，我找不到解析数据的内置方法。

```
Oid oid = new Oid("1.2.840.113549.1.1.1");
AsnEncodedData keyValue = new AsnEncodedData(getBytes("30818902818100EB11E7B4462E09BB3F907E2598BA2FC4F541925DABBFD8FF0B8E74C3F15E149E7FB6140655184DE42F6DDBCDEA142D8BF83DE95E07781F98988324E294DCDB392F82890145078C5C0379BB7434FFAC04AD1529E4C04CBD98AFF4B76D3FF1872FB5C6D8F8464755EDF5714E7E7A2DBE2E7549F0BB12B85796F93DD38A8FFF97730203010001"));
AsnEncodedData keyParam = new AsnEncodedData(new byte[] {05, 00});
PublicKey pubKeyRdr = new System.Security.Cryptography.X509Certificates.PublicKey(oid, keyParam, keyValue);
System.Diagnostics.Debug.WriteLine(pubKeyRdr.Key.KeyExchangeAlgorithm);
System.Diagnostics.Debug.WriteLine(pubKeyRdr.Key.KeySize); 
```

它输出`RSA-PKCS1-KeyEx`和`1024`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:58:49.330

您拥有的是一个 SubjectPublicKeyInfo 结构。它看起来像这样：

```
Sequence {
  Sequence {
    Oid: 1.2.840.113549.1.1.1
    Parameters: null
  }
  KeyValue: blah blah
} 
```

RSA 密钥的 oid 是 1.2.840.113549.1.1.1。

对于 RSA 密钥，没有参数，因此为空。

但是，我没有看到任何 API`AsnEncodedData`可以解析元素并获得您需要的内容。

# android - 有没有办法处理片段中的按键？

> ID：11269080
> 
> 赞同：0
> 
> 时间：2012-06-29T21:16:40.820
> 
> 标签：android

我有片段`GridView`以及`TextView`我想要处理搜索按钮按下的位置。我怎样才能做到这一点？如果我绑定`onKeyListener`到片段的布局，它永远不会调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:37:34.323

我的建议是在 Activity 端处理它，然后委托给片段。您需要覆盖`onSearchRequested`（[检查文档](http://developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29)）并调用片段上的方法来告诉它已请求搜索。之后，片段可以相应地更新自己。

# python - 在每个视图中呈现动态菜单

> ID：11269081
> 
> 赞同：1
> 
> 时间：2012-06-29T21:16:42.640
> 
> 标签：python, django

我有几个视图，每个人都必须像这样渲染动态菜单：

```
def view1(request):
   return render_to_response('view1.html', 
                             RequestContext(request, {'menu': menu, 'a': a, ...}))

def view2(request):
   return render_to_response('view2.html', 
                             RequestContext(request, {'menu': menu, 'b': b, ...}))

def view3(request):
   return render_to_response('view3.html', 
                             RequestContext(request, {'menu': menu, 'c': c, ...}))

def viewN(request):
   return render_to_response('view4.html',
                             RequestContext(request, {'menu': menu, 'd': d, ...})) 
```

但这很不舒服，因为我必须为每个视图添加菜单属性。我可以通过哪种方式进行优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:32:46.333

这就是[上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)的用途。您已经在使用 RequestContext，因此您只需要定义一个返回菜单的函数并将其添加到`TEMPLATE_CONTEXT_PROCESSORS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:25:33.857

根据您使用的 django 版本，您可能需要查看[基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)，甚至是基于类的[通用视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/)。

否则，您还可以执行以下操作：

```
def menu_view(request, template='menu.html', **kwargs)
    return render_to_response(template, kwargs, 
           context_instance = RequestContext(request)) 
```

我认为 kwargs 应该像那样工作。没有测试过。如果没有，请用它制作字典。

# php - PHP/cURL curl_exec() 错误？

> ID：11269088
> 
> 赞同：1
> 
> 时间：2012-06-29T21:17:56.013
> 
> 标签：php, curl

这是我第一次使用 cURL，所以这对我来说可能是一个愚蠢的错误，但是下面的代码：

```
 $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);
    echo $output; 
```

打印“1”。我的理解是 CURLOPT_RETURNTRANSFER 应该确保 curl_exec 返回 0 或内容，但在这里它的行为好像 CURLOPT_RETURNTRANSFER 没有设置为 true。我错过了一些明显的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:01:09.487

代码似乎是正确的，试试 curl_getinfo()

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
$outputInfo = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
curl_close($ch);
echo $output . PHP_EOL;
echo $outputInfo; 
```

资源可能实际上是返回带有“1”的主体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T22:20:23.950

我有一个类似的问题，我通过使用解决了

```
curl_setopt($ch, CURLOPT_FAILONERROR, TRUE); 
```

问题是服务器返回了一个自定义错误页面，cURL 将其解释为成功。通过使用此选项，正确检测到 404 的自定义错误页面标题代码并检测到 URL 故障。

OP 指的是使用 facebook 作为他们的目标，所以我怀疑目标 url 也使用了自定义错误消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T21:38:41.847

I'd use [Guzzle](http://guzzlephp.org/), which is an OOP wrapper around cURL. (Though since you're just using a GET request, `file_get_contents($url);` would work fine). There's no real issue with your code, though. Are you sure the URL is valid?

Also, check to make sure that `curl_setopt` is returning true for each call to it, and try setting the CURLOPT_URL using that function.

# c# - 使用 Json.NET 将 DataTable 转换为 JSON 而不添加额外的反斜杠

> ID：11269090
> 
> 赞同：2
> 
> 时间：2012-06-29T21:18:00.587
> 
> 标签：c#, serialization, json.net

我正在使用 Json.Net 将 DataTable 转换为 JSON，如下所述，但我的 JSON 字符串`\`在引号之前包含反斜杠字符。如何删除这些字符？

**将 DataTable 转换为 JSON 字符串的 C# 代码：**

```
string json = JsonConvert.SerializeObject(objAcctDTable, Formatting.None); 
```

**Json 输出字符串：**

```
"[{\"AcctID\":5822,\"AcctName\":\"1 EDI SOURCE INC (Vendor)\"},{\"AcctID\":4350,\"AcctName\":\"21C OATS, INC. (Rail Customer)\"},{\"AcctID\":5729,\"AcctName\":\"24 Waterway LLC (Leasing Company Account)\"},{\"AcctID\":3799,\"AcctName\":\"3D CORPORATE SOLUTIONS LLC (Rail Customer)\"},{\"AcctID\":4596,\"AcctName\":\"3FNP (HINES 70 WEST MADISON LP) (Vendor)\"},{\"AcctID\":6035,\"AcctName\":\"3FNP LLC (Oracle Vendor)\"},{\"AcctID\":4622,\"AcctName\":\"3M CO (Vendor)\"},{\"AcctID\":4532,\"AcctName\":\"3M COMPANY (Oracle Customer)\"},{\"AcctID\":5912,\"AcctName\":\"5th3rd, BCC (Leasing Company Account)\"},{\"AcctID\":5913,\"AcctName\":\"5th3rd, UBOC, FNBC (Leasing Company Account)\"},{\"AcctID\":5730,\"AcctName\":\"8121 Broadway Interests, LLC (Leasing Company Account)\"},{\"AcctID\":3324,\"AcctName\":\"A E STALEY MFG. (Mileage Tax Customer)\"}]" 
```

# escaping - 哪个更好——十六进制转义还是八进制转义？

> ID：11269095
> 
> 赞同：-1
> 
> 时间：2012-06-29T21:18:15.433
> 
> 标签：escaping, standards

我正在编写一个在 UTF-8 流中输出任意二进制文件的程序。为了避免使用无效的 UTF-8，我正在转义无效字符。我应该使用十六进制还是八进制转义？

也就是说，应该像这样转义十六进制 FFFF：

```
\xff\xff 
```

或这个：

```
\377\377 
```

第一个是 Python 所做的，第二个是 C 所做的。我无法决定。

[编辑] 我需要能够处理可能很长的字符串，如下所示：

```
SOMETHING SOMETHING\377\377\377\377\377\377\377\377SOMETHING SOMETHING 
```

对比

```
SOMETHING SOMETHING\xff\xff\xff\xff\xff\xff\xff\xffSOMETHING SOMETHING 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:44:31.720

在生活中很多时候，当在平等之间进行选择时，超越选择比选择本身固有的价值更有益。

或者，正如我的前任老板所说，“这不是问题。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:21:27.680

通常人们为此使用十六进制。如果您使用八进制，则必须将字节拆分为多个字符，所以我会坚持使用十六进制。

# php - OpenTBS 和特殊字符 (PHP)

> ID：11269099
> 
> 赞同：1
> 
> 时间：2012-06-29T21:18:29.057
> 
> 标签：php, ms-word, tinybutstrong, opentbs

我正在使用 OpenTBS 从 PHP 修改单词模板。基本上，我需要从 MySQL 数据库中的值更新 word 文档中的字符串。它运行良好，但是当我有 é、à、ô 等特殊字符时，它会输出一系列奇怪的字符。

例如，é 给了我 é。

有人知道如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T23:42:28.283

默认情况下，OpenTBS 假定要合并的数据是 Ascii 编码的。如果数据是 UTF-8 编码的，那么您必须在加载模板时指定它。

例子：

```
$TBS->LoadTemplate('document.docx', OPENTBS_ALREADY_UTF8); 
```

您还必须检查您的 PHP 脚本是 UTF-8 编码的。

更多细节[在手册](http://www.tinybutstrong.com/plugins/opentbs/tbs_plugin_opentbs.html#loadtemplate)中给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:30:23.067

它是一个字符编码问题。将您的页面更改为 utf-8

```
See http://php.net/manual/en/function.header.php
Content-Type: text/plain; charset=utf-8 
```

# python - 用 django 遍历字典

> ID：11269104
> 
> 赞同：0
> 
> 时间：2012-06-29T21:18:43.783
> 
> 标签：python, django, dictionary, django-templates

在 Django 中，我有一个字典，其中包含字典，例如：

```
d['dict1'] = [('1', 'some information'), ('2', 'some information')]
d['dict2'] = [('1', 'some more information'), ('2', 'some more information')] 
```

我需要循环遍历它，但是每次循环遍历它只获取与loop.counter对应的dict1和dict2的值，所以例如

```
first time through it would output
1 3
and then
2 4
and so on and so forth 
```

我试着做：

```
{% for item1, item2 in d.items %}
{{ item1.forloop.counter.value1 }}
{{ item2.forloop.counter.value1 }}
{% endfor %} 
```

它什么也没有产生。

编辑：我更新了字典的实际样子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:26:34.740

你应该把这个：

```
d['dict1'] = [('value1', '1'), ('value2', '2')]
d['dict2'] = [('value1', '3'), ('value2', '4')] 
```

进入这个：

```
result = [('value1', '1', '3'), ('value2', '2', '4')] 
```

您可以在您的视图中执行此操作。您基本上是在准备要在模板中显示的数据。

然后，您可以轻松地迭代这些值：

```
{% for name, v1, v2 in result %}
{{ v1 }}
{{ v2 }}
{% endfor %} 
```

# php - 在 Windows 7（64 位）上的 Apache 和 Microsoft SQL 服务器上运行 php 脚本

> ID：11269107
> 
> 赞同：0
> 
> 时间：2012-06-29T21:19:00.740
> 
> 标签：php, sql-server, apache

我可以访问网络服务器。我需要在我的 64 位 Windows 7 OS 桌面上安装什么才能运行 php 脚本？我已经安装了 MS SQL Server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:21:21.813

你为什么不直接使用`xampp`，否则`wamp`它会帮助你设置`php`，在 Windows 上，`apache`然后`mysql`如果你不想`mysql`连接到你的`mysql`via`php`脚本。

# mysql - 如何拥有一个持久存在于另一个模式中的字段成员？

> ID：11269112
> 
> 赞同：1
> 
> 时间：2012-06-29T21:19:47.387
> 
> 标签：mysql, mapping, jdo, datanucleus

假设以下（我正在使用 MySQL）

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class TclRequest2 {
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private long id;

    @Persistent(column = "userid")
    @Column(jdbcType = "INTEGER", length = 11, allowsNull = "false", defaultValue = "1")
    private Member member; // This object table is in another schema
    // Getters and setters
} 
```

该字段`member`保留在另一个模式中。`Member`我可以通过在类的注释中指定“目录”属性来解决这个问题，`@PersitentCapable`但这会破坏在我正在使用的属性文件中指定模式名称的灵活性，因为我在属性文件中配置 jdo。

谢谢你。

# objective-c - 为什么我不需要在这段代码中 CFRetain() ABAddressBookGetPersonWithRecordID() 的结果

> ID：11269115
> 
> 赞同：3
> 
> 时间：2012-06-29T21:20:10.757
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting

我正在尝试使用地址簿，但我对内存管理的理解充其量只是马马虎虎。

我的项目正在使用自动引用计数 (ARC)，但据我所知，ARC 仅在 Objective-C 领域管理保留/释放。

我知道我的第一个函数调用：`ABAddressBookCreate()`返回一个我“拥有”的 ABAddressBookRef，因为我是从`Create`名称中的方法中获取它的。当我`CFRelease`完成它时，我会它。

**我不明白**的是 ABRecordRef 在此方法的过程中如何保持活动状态。我不应该这样`CFRetain`做`CFRelease`吗？如果我不保留/释放`ABAddressBookRef`.

```
 ABAddressBookRef iPhoneAddressBook = ABAddressBookCreate();    
    ABRecordRef record = ABAddressBookGetPersonWithRecordID(iPhoneAddressBook, self.addressBookRecordID);

    NSString *firstName = (__bridge_transfer NSString*)ABRecordCopyValue(record, kABPersonFirstNameProperty);
    NSString *lastName = (__bridge_transfer NSString*)ABRecordCopyValue(record, kABPersonLastNameProperty);
    NSString *fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

    ABMultiValueRef phoneRef = ABRecordCopyValue(record, kABPersonPhoneProperty);

    // Set up an NSArray and copy the values in.
    NSArray *phoneNumberArray = (__bridge_transfer id)ABMultiValueCopyArrayOfAllValues(phoneRef);

    CFRelease(iPhoneAddressBook);

    // Finally, do stuff with contact information in Obj-C land.. 
```

**退出问题**：我是否通过在最后一行不`CFRelease`使用 my调用而造成泄漏？`ABMultiValueRef phoneRef`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T22:06:33.177

在处理 Core Foundation 内存管理时，您需要参考[这些所有权策略](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)。

您问题的关键在于“获取规则”，它指出您从中获得的任何 CF* 对象和包含“获取”一词的核心基础函数，您不拥有它，也不能保证它的使用寿命。重要的区别是“不能保证有效性”和“无效”。您可能会引用一个您不拥有但其生命周期由其他来源支持的对象。在这种情况下，您仍然可以使用它而不会崩溃。

从技术上讲，这就是您的`ABRecordRef`. 您没有拥有它，但`ABAddressBookRef`您从中获取记录的*人*极有可能拥有它，因此保持它的活力。只要那`ABAddressBookRef`是有效的，它的记录也将是有效的。如果你跟`CFRelease(iPhoneAddressBook);`注然后尝试使用记录，我打赌它会爆炸。

最后，对于您的退出问题 - 是的，您正在泄漏`ABMultiValueRef`每个“创建”规则，该规则表明您拥有通过包含“创建”或“复制”的函数接收的对象。

# google-maps - Google 地图和 KML 能否支持大于 32x32 的图标？

> ID：11269116
> 
> 赞同：3
> 
> 时间：2012-06-29T21:20:18.427
> 
> 标签：google-maps, kml

我有一个要使用 Google Maps API（版本 2）显示的 kml 文件。

我想使用大于 32x32 的图标。但是当我尝试这个时，看起来 API 正在将图标调整为该大小。这可以使用kml来完成吗？

如果无法使用 kml - 那么最好的方法是什么？

我的 KML 要点：

```
<Style id="stylemcneil">
<IconStyle>
<Icon>
<href>http://www.energyjustice.net/map/images/smokestack2-small.gif</href>
</Icon>
</IconStyle>
</Style>

<Placemark>
<name>McNeil Biomass Incinerator</name>
<description></description>
<styleUrl>#stylemcneil</styleUrl>
<Point>
<coordinates>-73.208326,44.493526,0.000000</coordinates>
</Point>
</Placemark> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:23:50.213

geoxml3 的“kmz”版本使用图标的原始大小（我相信您也可以从那里缩放）。

[例子](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linkto.html?lat=44.493526&lng=-73.208326&zoom=18&type=m&filename=http://www.geocodezip.com/geoxml3_test/mcneil_incinerator_kml.xml)

使用本机 google maps API v3 对象渲染 kml，因此不会获得基于 tile 渲染的性能改进（因此，如果您有很多点要显示，则不是一个好的解决方案）。

# php - 我如何使用 PHP PDO 实现“插入”

> ID：11269120
> 
> 赞同：-4
> 
> 时间：2012-06-29T21:20:38.587
> 
> 标签：php, mysql, pdo

使用 PHP 的 PDO 和准备好的语句，我如何实现以下内容？

```
$sql = 'insert into $tablename ($var1, $var2, $var3, ...) VALUES (:placeholder1, :placeholder2, ...)'; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:27:35.523

这是一种方法：

```
$sth = $dbh->prepare('INSERT INTO '.$tablename.' ('.implode(',', array_keys($inserting)).') VALUES ('.str_pad('', count($inserting)*2-1, '?,').')');
$sth->execute(array_values($inserting)); 
```

where`$tablename`是表的名称，并且`$inserting`是一个关联数组，其中键是列的名称，数组的值是要插入的值。

# ios - iOS - 简单的 Facebook 身份验证

> ID：11269122
> 
> 赞同：0
> 
> 时间：2012-06-29T21:20:46.727
> 
> 标签：ios, facebook, oauth, facebook-ios-sdk

我正在尝试以简单的方式使用我的应用程序在 FB 上验证我的用户，iOS SDK 有这个 SSO 解释，仅此而已，这似乎有点极端，因为我几乎必须在 FB 中包装我的整个应用程序天哪，至少那是他们引导你完成的。

是否有一种简单的方法（使用 SDK 或其他方式）来引导用户完成 OAuth 流程并检索访问令牌和用户数据，如姓名、电子邮件和生日？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:25:17.020

这里的一个快捷方式是使用[Parse](https://parse.com/)之类的东西为您处理它。它们实际上还包括一个制作精良的登录视图控制器，它完全符合您的要求。你可以[在这里](http://blog.parse.com/2012/04/23/a-beautiful-log-in-screen-for-your-mobile-app/)看到它。

# ruby-on-rails - Rails：成功 AJAX POST 后，返回 ID

> ID：11269126
> 
> 赞同：0
> 
> 时间：2012-06-29T21:20:57.977
> 
> 标签：ruby-on-rails, ajax

我正在使用以下代码创建 Impressions 模型的新实例：

```
var id;
$.ajax({
  type: 'POST',
  url: '/impressions',
  data: {'impression[content]':tags[i].book.impression, 'impression[user_id]':current_user},
  success: function(){id="<%= @impression.id %>";},
  dataType: 'html',
});
alert(id); 
```

成功后，我希望它返回新实例的 id 号，但是当前函数会导致运行时错误，指出 @impression.id 为 nil——经过反思，它在运行时当然为 nil。不过，我还能如何从数据库中提取 id 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:35:24.223

一种方法是让您的控制器代码呈现 json。例如，如果您的创建代码只是做了

```
render :json => @impression 
```

（可能在一个`responds_to`块内）然后该数据将传递给您的成功函数。如果您声明为

```
function(data){
    ...
} 
```

并将 dataType 设置为 json，然后`data`将是您呈现的 json 对象，您将能够获得所有展示的属性，包括其 id。当然你可以渲染任何你想要的 json - 你不必把整个对象变成 json。

# ios - 解析时注册到纯通道时出现 NSInternalInconsistencyException

> ID：11269129
> 
> 赞同：0
> 
> 时间：2012-06-29T21:21:06.417
> 
> 标签：ios, parse-framework

我很有趣 Parse 并打电话给：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)newDeviceToken
{
    [PFPush storeDeviceToken:newDeviceToken];
    [PFPush subscribeToChannelInBackground:@"" target:self selector:@selector(subscribeFinished:error:)];
} 
```

然后在午餐应用程序时，我收到此错误：

> 2012-06-30 00:13:23.380 JerusalemBiblicalZoo [607:707] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“当前安装对象脏时无法订阅频道。”

我已禁用此行：

```
 [PFPush subscribeToChannelInBackground:@"" target:self selector:@selector(subscribeFinished:error:)]; 
```

而且效果很好。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:05:23.687

我刚刚回滚到早期版本，一切都很好。我只在最新版本中收到该错误。

# php - PHP 联系表格不起作用 - 代码有什么问题？

> ID：11269131
> 
> 赞同：0
> 
> 时间：2012-06-29T21:21:14.467
> 
> 标签：php, forms

> **可能重复：**
> [无法在“localhost”端口 25 连接到邮件服务器](https://stackoverflow.com/questions/4532486/failed-to-connect-to-mailserver-at-localhost-port-25)

我不知道我的代码有什么问题，我认为它应该可以工作，但由于某种原因，当我在 chrome 上查看 php 文件并按下“提交”时 - 它显示“警告：mail() [function.mail ]：无法在“localhost”端口 25 连接到邮件服务器，验证 php.ini 中的“SMTP”和“smtp_port”设置或在第 27 行的 C:\xampp\htdocs\BumblebeeNursery\send_contact.php 中使用 ini_set() 'send_contact.php:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="../../../Users/Ali/Documents/Dreamweaver/individual/style.css"   rel="stylesheet" type="text/css" />
</head>

<body>
<?php $name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$body = <<<EOD
<br><hr><br>
Email: $email <br>
Name: $name <br>
Message: $message <br> 
EOD;

$headers = "From: $email\r\n";
$headers .= "Content-type: text/html\r\n";

$formcontent="From: $name \n Message: $message";
$recipient = "alisarraff5@hotmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader);
echo "Thank You!";
?>

?>
</body>
</html> 
```

和联系方式：

```
<form action="send_contact.php" method="POST"> 
<table width="400" border="0" cellspacing="2" cellpadding="0"> 
<tr> 
<td width="29%" class="bodytext">Your name:</td> 
<td width="71%"><input name="name" type="text" id="name" size="32"></td> 
</tr> 
<tr> 
<td class="bodytext">Email address:</td> 
<td><input name="email" type="text" id="email" size="32"></td> 
</tr> 
<tr> 
<td class="bodytext">Comments:</td> 
<td><textarea name="message" cols="45" rows="6" id="comment" class="bodytext">  </textarea></td> 
</tr> 
<tr> 
<td class="bodytext"> </td> 
<td align="left" valign="top"><input type="submit" name="Submit" value="Send"></td> 
</tr> 
</table> 
</form> 
```

有人可以帮帮我吗，我正要扯掉我的头发。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:12:54.227

您不能从本地主机发送电子邮件，而应该通过域服务器上的真实网站发送电子邮件。

# c# - 任务并行库和 IIS 工作线程？

> ID：11269138
> 
> 赞同：2
> 
> 时间：2012-06-29T21:21:38.743
> 
> 标签：c#, iis, task-parallel-library

我想将任务并行库用于一些计算密集型任务，但一位同事告诉我，IIS 创建工作线程的开销很大。

当您调用 Task.Factory.StartNew()... 说 100 次时，我不太确定会发生什么。IIS 如何处理这个问题？是一个巨大的风险，还是有办法让这对应用程序非常有益？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:47:39.907

第一个任务！=线程。您可能有许多任务由少数线程（已经被池化）提供服务。

作为一般规则，我反对在 Web 服务器上运行长时间运行的进程。保持长时间运行的作业存在大量问题，并且您往往会降低 Web 服务器的可伸缩性，尤其是在并行处理长时间运行的 CPU 密集型作业时。不要忘记在机器上运行的最佳线程数等于“逻辑”内核的数量。您希望避免创建过多的线程（每个托管线程都会消耗类似兆的开销）。运行 cpu 密集型作业会占用 cpu 时间来处理请求。

在我看来，在 Web 服务器上使用 tpl 的最佳方式是使用它的目的是让请求尽可能无阻塞，这样可以用最少的请求来处理最多的请求。线程。请记住，许多人认为通过高度异步处理请求获得的额外规模不值得额外的复杂性。取决于你的具体情况。

简而言之，在 Web 服务器上运行许多长时间运行的 cpu 绑定任务会危及您的可扩展性。如果您使用任务、线程、后台工作者或线程池，这并不重要。它归结为同一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:36:56.537

抽象的一大`Task`优点是它抽象了创建线程。这意味着 TPL（实际上是`ThreadPool`）可以决定实际线程的最佳数量是多少。因此，创建 100`Task`秒很可能不会创建 100`Thread`秒。因此，您不必担心创建`Thread`s 的开销。

但这也取决于`Task`它们是什么样的。如果您有 100`Task`秒执行一些长的 IO 绑定操作，因此它们大部分时间都阻塞，那么这不是 TPL 的好用处，您的代码将非常低效（实际上您可能最终得到 100`Thread`秒）。

另一方面，如果你有 100 个 CPU-bound，相对较短`Task`的 s，那是 TPL 的最佳点，你会得到很好的效率。

如果您真的关心效率，您还应该知道`Task`s 确实有一些开销。`Task`因此，在某些情况下，将多个s 合并为一个较大的 s 以减少开销可能是有意义的。或者您可以使用已经这样做的东西：`Parallel.ForEach`或者`Parallel.For`，如果它们适合您的用例。作为另一个优点，使用它们的代码将比`Task`手动使用 s 更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:35:23.100

仅仅创建一个服务来处理这项工作怎么样？你会在扩展方面做得更好，并且可以很好地隔离那个工作单元......即使工作是计算绑定的。

在我看来 - 不要`Thread Pool/BackgroundWorker/Thread`在 ASP.NET 中使用。在您的情况下，`TPL`简单地包装线程池。它通常比它的价值更麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T21:42:20.843

任何主机的线程开销都是相同的。与 IIS 无关，至少在性能方面。

还有其他担忧。例如，在应用程序关闭时，用户线程被粗暴地中止。

# html - Html5 缓存清单和 Post 表单

> ID：11269143
> 
> 赞同：1
> 
> 时间：2012-06-29T21:22:05.027
> 
> 标签：html, caching, manifest

我正在使用缓存清单，并且我是本主题的新手，但我对静态页面进行了一些测试，但现在我想尝试使用带有表单的页面，该表单将数据发送到使用 post 变量的另一个页面，我添加了页面在缓存清单中，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:54:23.667

什么不起作用？页面没有被缓存？

还是新页面没有解决变量？在这种情况下，这是正常的，因为 POST 变量只能由服务器解析。使用 GET 将所有 URL 都放入清单中是一件很麻烦的事情。如果这是您的问题：请改用本地存储将变量从一页传输到另一页： [HTML5 本地存储 – 完整指南](http://php-html.net/tutorials/html5-local-storage-guide/)

# css - Dojo DataGrid autoHeight 在 IE9 中不起作用

> ID：11269144
> 
> 赞同：0
> 
> 时间：2012-06-29T21:22:07.027
> 
> 标签：css, datagrid, dojo

我正在使用带有 IE9 浏览器的 Dojo 1.7。我正在尝试动态生成多个 DataGrid 并将它们附加到 div 内的内容中。我正在使用`autoHeight`网格的属性。

这在 Chrome 或 Firefox 中运行良好。但是，在我将高度设置为固定值之前，IE 上不会显示网格。

如何使 autoHeight 在 IE 中工作？我怀疑它与 IE9 如何处理高度语义有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:38:50.557

直到几分钟前，我一直在处理同样的问题：我正在创建动态网格，具体取决于列表中有多少项目，并且每个网格都显示为 autoHeight。问题与网格或其高度无关。

我不确定，但 IE 以与其他浏览器不同的方式解释图层，因此您必须以具体方式添加它们。尝试首先将网格添加到您的 DOM 节点（我的意思是您还可以动态创建的一个节点，您将在该节点上添加网格），然后将此网格容器最后添加到您的 HTML 中。它对我来说工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:28:11.283

我也面临同样的问题。我试图找到一个替代品。

我遵循这种方式及其工作。

将以下属性添加到

```
dojox.grid.datagrid
onShow: function(){if(grid)grid.setStore(store);} 
```

并打电话`grid.onShow();`

```
 var grid= new dojox.grid.DataGrid({
    store : store,
    query : {
      sno : "*"
    },
    autoHeight:true,
    structure : columns,
    selectionMode : "Multiple",
    onShow: function(){if(grid)grid.setStore(store);}
  });

// This will fire the onShow event on grid.
grid.onShow(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:31:57.547

在 IE 上，我必须确保在动态添加的网格上调用了启动。例如，如果您在 postCreate 中添加网格，请尝试以下操作：

```
startup: function() {
    this.inherited(arguments);
    if (this.grid) this.grid.startup();
} 
```

网格可能很挑剔。即使这样做，我仍然在带有 autoHeight 的 IE (IE9) 上遇到高度问题。如果我在事后设置更新的商店，高度将变为 0。

# python - 使用 Python 的“tarfile”，我怎样才能获得 tar 档案中最顶层的目录？

> ID：11269145
> 
> 赞同：6
> 
> 时间：2012-06-29T21:22:08.290
> 
> 标签：python, tar

我想将主题存档上传到 django web 模块，并希望提取存档中最顶层目录的名称以用作主题的名称。存档将始终为 tar-gzip 格式，并且在顶层始终只有一个文件夹（尽管其他文件可能与其并行存在），其中包含模板、css、图像等的各种子目录，以任何适合的顺序排列主题最好。

目前，基于 MegaMark16 中非常有用的代码，我的工具使用以下方法：

```
f = tarfile.open(fileobj=self.theme_file, mode='r:gz')
self.name = f.getnames()[0] 
```

其中 self.theme_file 是上传文件的完整路径。只要 tarball 中条目的顺序恰好是正确的，这就可以正常工作，但在许多情况下并非如此。我当然可以遍历整个档案并手动检查正确的“名称”特征，但我怀疑有一种更优雅和快速的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T21:30:49.513

您将需要使用一种名为[commonprefix](http://docs.python.org/library/os.path.html)的方法。

示例代码将具有以下效果：

```
archive = tarfile.open(filepath, mode='r')
print os.path.commonprefix(archive.getnames()) 
```

打印的值将是“存档中的最顶层目录”——或者，您的主题名称。

编辑：但是，在进一步阅读您的规范后，如果您有与“最顶层目录”**同级**的文件，这种方法*可能不会产生您想要的结果*，因为公共前缀将是; 这仅在所有文件确实具有您的主题名称的公共前缀时才有效。**`.`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-13T12:21:16.290

所有子目录都有一个'/'所以你可以做这样的事情

`self.name = [name for name in f.getnames() if '/' not in name][0]`并使用其他技巧进行优化。**

# javascript - 如何根据浏览器缩放自动调整数据表

> ID：11269146
> 
> 赞同：4
> 
> 时间：2012-06-29T21:22:09.893
> 
> 标签：javascript, jquery, datatables

我想知道是否有一种简单的方法可以让 JQuery 数据表在用户使用浏览器放大、缩小功能时自行调整大小。目前，当我放大和缩小我的数据表时，数据要么会缩小，要么会变得太大。而且我还注意到，在我缩小或缩小后，我可以刷新页面并且数据表会自行调整大小以使其看起来应有的样子。任何见解或可能重定向到已回答（找不到）的问题将不胜感激。谢谢。

### 这是我的 JavaScript 表属性：

```
 "bJQueryUI": true,
    "bStateSave": true,
    "iDisplayLength": 50,
    "aaSorting": [[4, "desc"], [5, "asc"]],
    "aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
    "sPaginationType": "full_numbers",
    "sScrollY": "35em",
    "sScrollX": "100%",
    "bScrollCollapse": true 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T21:41:46.233

您可以将 datables 重绘事件绑定到窗口重新调整大小函数：

```
$(window).resize(function() {
    oTable.fnDraw(false)        
}); 
```

这假设您使用变量 oTable 初始化表，如下所示：

```
var oTable = $("#tableName").dataTable({
"bJQueryUI": true,
"bStateSave": true,
"iDisplayLength": 50,
"aaSorting": [[4, "desc"], [5, "asc"]],
"aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
"sPaginationType": "full_numbers",
"sScrollY": "35em",
"sScrollX": "100%",
"bScrollCollapse": true
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T14:04:47.707

您还可以将有问题的表设置为具有`style="width:100%;"`，然后使用`"bAutoWidth":false`DataTables 的选项。然后它会保持你的宽度，你实际上不需要重绘。特别是对于做复杂的服务器端处理表的表，这要轻得多。对于 HTML，只需更改样式

```
<table id="tableName" style="width:100%;">...</table> 
```

然后您的 DataTables 添加选项：

```
var oTable = $("#tableName").dataTable({
    // Your other options here...
    "bAutoWidth":false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T14:29:15.457

窗口调整大小时需要重新绘制表格：

```
$(document).ready(function() {
   //Load datatable here

   $(window).bind('resize', function () {
      table.draw();
   });
}); 
```

# wcf - WCF 流模式似乎没有流式传输

> ID：11269147
> 
> 赞同：4
> 
> 时间：2012-06-29T21:22:10.300
> 
> 标签：wcf, stream

我一直在尝试构建一个 WCF 流式传输示例，仅用于测试目的，但我不能确定它实际上是流式传输的。

该示例非常基本：

1.  服务器返回大型二进制内容（本例中为 PDF 文件）
2.  客户端将大型二进制内容写入文件。

但是，问题似乎是即使我相信我已经正确配置了服务器和客户端以进行流传输：

1.  它似乎实际上不是流传输，因为我遇到`IOException`了消息`The maximum message size quota for incoming messages (65536) has been exceeded`
2.  读取以 1536 字节为增量，即使我将流缓冲区设置为 8192（或任何其他大小）

完整的主机代码在这里：

```
using System;
using System.IO;
using System.ServiceModel;
using System.ServiceModel.Description;

namespace WcfStreamingHost
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            BasicHttpBinding binding = new BasicHttpBinding();
            binding.TransferMode = TransferMode.Streamed;
            binding.MaxBufferSize = 65536;
            binding.MaxReceivedMessageSize = 65536;
            binding.ReaderQuotas.MaxBytesPerRead = 65536;
            binding.SendTimeout = TimeSpan.FromMinutes(10);

            ServiceHost host = new ServiceHost(typeof (ContentProvider), new Uri("http://charles-m4600:1234/contentprovider"));

            host.Description.Behaviors.Add(new ServiceMetadataBehavior());
            host.Description.Behaviors.Find<ServiceDebugBehavior>().IncludeExceptionDetailInFaults = true;
            host.AddServiceEndpoint(typeof (IMetadataExchange), MetadataExchangeBindings.CreateMexHttpBinding(), "mex");
            host.AddServiceEndpoint(typeof (IContentProvider), binding, "streamed");

            host.Open();

            Console.ReadKey();
        }
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Single)]
    public class ContentProvider : IContentProvider
    {
        #region IContentProvider Members

        [OperationBehavior(AutoDisposeParameters = true)]
        public Stream GetFile()
        {
            Stream stream = File.OpenRead("large_file.pdf");

            return stream;
        }

        #endregion
    }

    [ServiceContract]
    public interface IContentProvider
    {
        [OperationContract]
        Stream GetFile();
    }
} 
```

完整的客户端代码在这里：

```
using System;
using System.IO;
using System.ServiceModel;
using WcfStreamingClient.LocalSvc;

namespace WcfStreamingClient
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            BasicHttpBinding binding = new BasicHttpBinding();
            binding.TransferMode = TransferMode.Streamed;
            binding.MaxBufferSize = 65536;
            binding.MaxReceivedMessageSize = 65536;
            binding.ReaderQuotas.MaxBytesPerRead = 65536;
            binding.ReceiveTimeout = TimeSpan.FromMinutes(10);

            EndpointAddress address = new EndpointAddress("http://charles-m4600:1234/contentprovider/streamed");

            using (ContentProviderClient client = new ContentProviderClient(binding, address))
            {
                using (Stream stream = client.GetFile())
                {
                    FileInfo file = new FileInfo("output.pdf");

                    if (file.Exists)
                    {
                        file.Delete();
                    }

                    using (FileStream fileStream = file.Create())
                    {
                        const int bufferLen = 8192;
                        byte[] buffer = new byte[bufferLen];
                        int count = 0;
                        int total = 0;
                        while ((count = stream.Read(buffer, 0, bufferLen)) > 0)
                        {
                            fileStream.Write(buffer, 0, count);
                            total += count;
                            Console.Out.WriteLine("Read {0} bytes", total);
                        }
                    }
                }
            }
        }
    }
} 
```

我已经阅读了有关此问题的各种其他帖子，但似乎找不到任何线索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-05T16:38:36.933

尽管您的帖子是很久以前的，但我偶然发现了它，并认为我会分享我的发现。

**始终考虑最大邮件大小配额**。无论您是否有流式传输。MSDN对此非常清楚。可以另外指定最大缓冲区大小。

[http://msdn.microsoft.com/en-us/library/ms731078%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms731078%28v=vs.100%29.aspx)

**MaxReceivedMessageSize**：在传输引发异常之前接收到的消息（包括标头）的最大大小（以字节为单位）。

**MaxBufferSize**：用于流式传输数据的缓冲区的最大大小（以字节为单位）。如果未设置此传输配额，或者传输未使用流式传输，则配额值与 MaxReceivedMessageSize 配额值和 MaxValue 中的较小者相同。

为什么你总是有**1536 字节**的块，我不完全确定。但我认为这是因为**以太网帧**的最大大小（巨型帧除外）：

[http://en.wikipedia.org/wiki/Ethernet_frame](http://en.wikipedia.org/wiki/Ethernet_frame)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:54:52.917

MaxReceivedMessageSize 用于防止对传入通道的 DOS 攻击，MaxBufferSize 控制通道上的消息缓冲区大小。当通道配置为流式传输时，仅缓冲soap标头并流式传输主体，流块大小由服务实现控制（在您的情况下为 8Kb），并且maxrecievedmessagesize 限制文件+标题的大小。maxrecieved 消息大小必须等于缓冲模式下文件 MaxBufferSize 的大小。但是在流式传输中 MaxBufferSize 必须很小，并且 MaxRecievedMessafeSize 是预期的文件大小。在流式传输模式下，可以使用 MaxBufferSize 来防止 DOS 攻击。

# iphone - 强制 UITableView 滚动到顶部？

> ID：11269148
> 
> 赞同：3
> 
> 时间：2012-06-29T21:22:18.993
> 
> 标签：iphone, objective-c, ios, uitableview

如果 tableview 包含少于 10 个左右的单元格，你将如何强制 UITableViewCell 滚动到顶部？当 tableview 处于编辑模式时，我支持在 tableView 单元格中编辑托管对象上下文。不用说，如果一个单元格位于 tableview 的底部，当用户去编辑事件的标题或位置时，它会被键盘阻止。我尝试了一个解决方案，例如：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    if(_selectedIndex == indexPath.row){
        _selectedIndex = -1;
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        return;
    }

    if(_selectedIndex >= 0){
        NSIndexPath *previous = [NSIndexPath indexPathForRow:_selectedIndex inSection:0];
        _selectedIndex = indexPath.row;
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:previous]
                         withRowAnimation:UITableViewRowAnimationFade];
    }

    _selectedIndex = indexPath.row;
    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];

    [tableView setContentOffset:CGPointMake(0, [tableView rowHeight]*indexPath.row) animated:YES];
} 
```

但这不会将 tableview 保持在 contentOffset。它会弹到顶部然后弹回

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-17T07:19:36.867

我喜欢以下解决方案，因为如果您有标题视图，它还会滚动到标题视图的顶部。

```
[self.tableView setContentOffset:CGPointZero animated:YES]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T22:04:50.093

你可能应该在 UITableView 上使用这个方法：

```
-(void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated 
```

本质上，您所做的是，当 UITableViewDelegate 的 [tableView:didSelectRowAtIndexPath:] 方法被调用时，您将该选择的索引传递给上述方法并设置 scrollposition = UITableViewScrollPositionTop。

这会将选定的单元格滚动到屏幕顶部并避开键盘。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T21:28:59.310

您是否考虑将整个 tableview 向上滑动？

**编辑：**我确实找到了一些看起来像你正在寻找的东西： [代码在这里](http://atastypixel.com/blog/a-drop-in-universal-solution-for-moving-text-fields-out-of-the-way-of-the-keyboard/)。

此代码从底部缩小表格视图的插图，然后允许它显示其中一个较低的单元格而无需向下折回。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-24T10:48:20.037

UITableView 是 UIScrollView 的子类，所以你也可以使用：

```
[mainTableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-16T18:34:35.350

你试过这个吗？：

```
- (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated; 
```

样本是：

```
[tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:0 animated:YES]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-07T16:03:27.780

这在我的情况下有效，它也会滚动到headear的顶部如果你有：

```
 **myTablView.scrollRectToVisible((myTablView.rectForHeader(inSection: 0), to: myTablView.superview).0, animated: true)** 
```

[https://developer.apple.com/documentation/uikit/uitableview/1614872-rectforheader](https://developer.apple.com/documentation/uikit/uitableview/1614872-rectforheader)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-27T10:49:54.007

更具体的回答您的问题：

```
extension UITableView {

    func scrollToBottom(){

        DispatchQueue.main.async {
            let indexPath = IndexPath(
                row: self.numberOfRows(inSection:  self.numberOfSections -1) - 1, 
                section: self.numberOfSections - 1)
            self.scrollToRow(at: indexPath, at: .bottom, animated: true)
        }
    }

    func scrollToTop() {

        DispatchQueue.main.async {
            let indexPath = IndexPath(row: 0, section: 0)
            self.scrollToRow(at: indexPath, at: .top, animated: false)
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-27T10:19:28.273

滚动到顶部会很有帮助`tableView`

```
tableView.setContentOffset(CGPoint(x: 0, y: -tableView.contentInset.top), animated: true). 
```

# c# - I/O 操作眼中的多线程？

> ID：11269149
> 
> 赞同：1
> 
> 时间：2012-06-29T21:22:26.200
> 
> 标签：c#, .net, multithreading

我刚在想...

在 I/O 操作中使用 c# 的多线程（假设将许多文件从 c 复制`:\1\`到`c:\2\`）会产生性能差异而不是执行操作顺序吗？

我与自己斗争的原因是最终的 IO 操作 - 是一项必须工作的项目。所以即使我并行工作 - 他仍然会按顺序执行这些复制订单......

或者我的假设是错误的？

在这种情况下，使用多线程复制有什么好处：

*   复制许多小文件（总和 4GB）
*   复制 4 个大文件（总和 4 gb，每个 1000 mb）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:30:45.290

正如其他人所说，它必须根据具体的应用程序上下文来衡量。

但只是想提请注意这一点。每次复制文件时，都会检查对目标位置的写入访问权限，这很慢。

我们所有人都遇到过这样一种情况，您必须复制/粘贴一系列已经压缩的文件，如果您将它们再次压缩成一个大的*ZIP*文件，那么总压缩大小不会明显小于所有内容的总和，IO操作将执行得**更快**。（试试吧，如果你以前没有这样做，你会看到很大的不同）。

所以我会**假设**（再次必须在具体系统上进行测量，我的只是猜测）在单个磁盘上写入一个大文件，大量小文件会更快。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T21:40:35.150

文件多线程与 CPU 无关，而与 IO 无关。这意味着适用完全不同的规则。不同的设备有不同的特点：

1.  类似顺序 IO 的磁盘
2.  SSD 像顺序或并行随机 IO（我的有 4 个硬件“线程”）
3.  网络喜欢许多并行操作来分摊延迟

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T21:29:44.573

我不是硬盘相关问题的专家，但也许这会给你一些启示：

Windows 使用的是 NTFS 文件系统。该系统不“喜欢”太多的小文件，例如 1kb 以下的文件。它将“神奇地”使 100 个 1kb 的文件重 400kb 而不是 100kb。处理大量“小”文件时也很慢。因此，复制一个大文件而不是复制许多相同权重的小文件会快得多。

另外，根据我个人的经验和知识，多线程不会加快复制许多文件的速度，因为实际的硬件磁盘就像一个单元一样，无法通过同时发送多个请求来加快速度（它会处理一个接一个。）

# ruby - Ruby 可枚举反向检测

> ID：11269154
> 
> 赞同：8
> 
> 时间：2012-06-29T21:23:06.007
> 
> 标签：ruby, arrays, ienumerable, reverse, detect

假设我有以下数组：

```
views = [
  { :user_id => 1, :viewed_at => '2012-06-29 17:03:28 -0400' },
  { :user_id => 1, :viewed_at => '2012-06-29 17:04:28 -0400' },
  { :user_id => 2, :viewed_at => '2012-06-29 17:05:28 -0400' },
  { :user_id => 3, :viewed_at => '2012-06-29 17:06:28 -0400' },
  { :user_id => 1, :viewed_at => '2012-06-29 17:07:28 -0400' },
  { :user_id => 1, :viewed_at => '2012-06-29 17:08:28 -0400' },
  { :user_id => 3, :viewed_at => '2012-06-29 17:09:28 -0400' },
  { :user_id => 3, :viewed_at => '2012-06-29 17:16:28 -0400' },
  { :user_id => 3, :viewed_at => '2012-06-29 17:26:28 -0400' },
  { :user_id => 3, :viewed_at => '2012-06-29 17:36:28 -0400' },
  { :user_id => 1, :viewed_at => '2012-06-29 17:47:28 -0400' },
  { :user_id => 2, :viewed_at => '2012-06-29 17:57:28 -0400' },
  { :user_id => 3, :viewed_at => '2012-06-29 17:67:28 -0400' },
  { :user_id => 1, :viewed_at => '2012-06-29 17:77:28 -0400' }
] 
```

假设数组按**viewed_at排序**

如果我想检索特定**user_id的****views**数组中的最后一个视图哈希，我可以执行以下操作：

 **```
views.reverse.detect { |view| view[:user_id] == 1 } 
```

其中**检测**将返回块评估为真的可枚举中的第一项。

我的问题是：我假设**反向**`O(n)`方法是有成本的，那么我怎样才能反向检测而不必反转阵列？还是**相反**的方法不是？****`O(n)`****

 ***** * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-29T21:25:45.187

方法`Array#reverse`在时间和空间上是 O(n)。由于您不需要整个反向数组，您可以使用[Array#reverse_each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reverse_each)，这将是 O(1) 在空间中。在实践中，这只适用于非常大的数组。

```
views.reverse_each.detect { |view| view[:user_id] == 1 }
#=> {:user_id=>1, :viewed_at=>"2012-06-29 17:77:28 -0400"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:36:13.060

这将从块为真的最后一个对象中获取索引（如果没有匹配，则为 nil）。

```
views.rindex{|view| view[:user_id] == 1} 
```

在对@toklands 进行基准测试之后`reverse_each`（令我惊讶的是）要快得多：

```
require 'benchmark'
ar = Array.new(100){rand(100)}
target = rand(100)

Benchmark.bm(15) do |x|
  x.report('reverse_each'){1000.times{ar.reverse_each.detect(target)}}
  x.report('rindex'){1000.times{ar.rindex(target)}}
end

#                      user     system      total        real
#reverse_each      0.000000   0.000000   0.000000 (  0.002981)
#rindex            0.020000   0.000000   0.020000 (  0.012078) 
```******

# sql - 增加小时数和天数

> ID：11269158
> 
> 赞同：0
> 
> 时间：2012-06-29T21:23:19.173
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services

我正在 SSRS 中构建报告。

在设计模式下，它看起来像这样：

![在此处输入图像描述](../Images/e6e7360ba6b452b06b350c41aa4e1a77.png)

`tat2`是从 1 到 192 的值，并出现在报告中，如下所示：

```
1
2
3
...
192 
```

我想知道是否有办法代替做这样的事情：

```
DAY 1 12:00AM
DAY 1 1:00AM
DAY 1 2:00AM
...
DAY 7 9:00PM
...
DAY 8 12:00AM 
```

换句话说，我想将数字 1 到 192 转换为小时和天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:54:18.647

您可以为此使用 Date.AddHours() - 只需创建一个新的 Date ，它是任何一年的开始并使用

```
Date.AddHours(Fields!YourNumericField.Value) 
```

这样你就可以获得滚动时间 - 你会超过 192 小时吗？最大范围是多少，因为这会在 365 处翻转。您可以混合和匹配并执行如下表达式：

```
=Math.Ceiling(Fields!YourNumericField.Value / 24) & SomeDate.AddHours(Fields!YourNumericField.Value) 
```

类似的东西

我在这台机器上没有 SSRS 来测试：P

编辑：

好的，要获取基准日期，您可以使用 new DateTime(year, month, day)

[http://msdn.microsoft.com/en-us/library/system.datetime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)

所以表达式

```
="DAY " & Math.Ceiling(Fields!tat2.Value / 24) & " " & format(new DateTime(2000, 1, 1).AddHours(Fields!tat2.Value), "hh:mm tt") 
```

这应该给出：

```
DAY 1 10:45 AM 
```

应该可以工作 - 如果您想更改上午 10:00 位的格式，请检查此参考：

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

"HH:mm" 为您提供 24 小时时间 + 分钟，例如 23:54

“hh:mm tt”是 12 小时，例如 12:00 PM

玩一玩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:56:05.960

这可以在底层查询中轻松完成 - 不确定是否在 SSRS 中执行此操作：

```
SELECT 
  Tat2 / 24 + 1 as Day, 
  CAST(Tat2 % 24 AS CHAR(2)) + ':00 ' +
    CASE WHEN Tat2 % 24 > 12 then 'PM' else 'AM' end as AMPM
FROM YourTable 
```

当然，这不会处理超过 365 天，因为它不会数月或数年。

# windows - 查看进程树 - tlist/tasklist

> ID：11269165
> 
> 赞同：12
> 
> 时间：2012-06-29T21:24:15.153
> 
> 标签：windows, windows-7, tasklist, tlist

从 开始`windows xp`，`tlist`命令被命令替换`tasklist`。

旧`tlist`命令有选项`\t`，允许查询父/子进程关系。

中是否存在类似的选项`tasklist`？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T18:49:05.050

我想你想要这个：

```
tasklist /SVC 
```

如果这没有帮助，那么我推荐 Process Explorer。这是一个显示所有父进程和子进程的程序。

这是官方链接：[http ://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-20T09:40:43.387

你也可以试试

```
tasklist /M 
```

它会给你这样的结果：

```
BESClientUI.exe               4296 ntdll.dll, wow64.dll, wow64win.dll,
                                   wow64cpu.dll
SynTPHelper.exe               2216 N/A
sihost.exe                    9340 ntdll.dll, KERNEL32.DLL, KERNELBASE.dll,
                                   msvcrt.dll, combase.dll, ucrtbase.dll,
                                   RPCRT4.dll, bcryptPrimitives.dll,
                                   sechost.dll, advapi32.dll,
                                   CoreMessaging.dll, ntmarta.dll, 
```

你也可以过滤它

```
tasklist /M /FI "xxx" 
```

其中 xxx 你可以指定过滤参数

```
Filters:
    Filter Name     Valid Operators           Valid Value(s)
    -----------     ---------------           --------------------------
    STATUS          eq, ne                    RUNNING | SUSPENDED
                                              NOT RESPONDING | UNKNOWN
    IMAGENAME       eq, ne                    Image name
    PID             eq, ne, gt, lt, ge, le    PID value
    SESSION         eq, ne, gt, lt, ge, le    Session number
    SESSIONNAME     eq, ne                    Session name
    CPUTIME         eq, ne, gt, lt, ge, le    CPU time in the format
                                              of hh:mm:ss.
                                              hh - hours,
                                              mm - minutes, ss - seconds
    MEMUSAGE        eq, ne, gt, lt, ge, le    Memory usage in KB
    USERNAME        eq, ne                    User name in [domain\]user
                                              format
    SERVICES        eq, ne                    Service name
    WINDOWTITLE     eq, ne                    Window title
    MODULES         eq, ne                    DLL name 
```

例如：

```
tasklist /M /FI "IMAGENAME eq explorer.exe" 
```

这给了你类似的东西：

```
Image Name                     PID Modules
========================= ======== ============================================
explorer.exe                  9912 ntdll.dll, KERNEL32.DLL, KERNELBASE.dll,
                                   msvcrt.dll, combase.dll, ucrtbase.dll,
                                   RPCRT4.dll, bcryptPrimitives.dll,
                                   OLEAUT32.dll, msvcp_win.dll, shcore.dll,
                                   advapi32.dll, sechost.dll, powrprof.dll,
                                   user32.dll, win32u.dll, GDI32.dll,
                                   gdi32full.dll, shlwapi.dll,
                                   windows.storage.dll, kernel.appcore.dll,
                                   profapi.dll, FLTLIB.DLL, SHELL32.dll,
                                   cfgmgr32.dll, TWINAPI.dll, PROPSYS.dll,
                                   winmm.dll, settingsynccore.dll,
                                   UxTheme.dll, dwmapi.dll, SspiCli.dll,
                                   USERENV.dll, twinapi.appcore.dll,
                                   WININET.dll, WTSAPI32.dll,
                                   TextInputFramework.dll, WINMMBASE.dll,
                                   bcrypt.dll, cryptsp.dll, RMCLIENT.dll,
                                   CoreUIComponents.dll, CoreMessaging.dll,
                                   wintypes.dll, ntmarta.dll, IMM32.DLL, 
```

# backbone.js - 使用 Backbone.js 的主要公司列表

> ID：11269167
> 
> 赞同：4
> 
> 时间：2012-06-29T21:24:27.333
> 
> 标签：backbone.js

在 Backbone.js 网站本身（首页）和此页面[https://github.com/documentcloud/backbone/wiki/Projects-and-Companies-using-Backbone](https://github.com/documentcloud/backbone/wiki/Projects-and-Companies-using-Backbone)之外，我正在尝试查找使用它的公司的完整列表. 我认为 Twitter 也使用它。

有人知道在哪里可以找到这样的列表吗？我已经搜索过了，到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:30:41.153

主干站点上有一个列表：http:
[//backbonejs.org/#examples](http://backbonejs.org/#examples)

显然，您的列表中有很多重复项，但它确实包含一些值得注意的额外列表，例如 Soundcloud、Pitchfork、Pandora、Khan Academy、Foursquare 和 Linkedin Mobile。

# android - android中基于语言环境的地址格式

> ID：11269172
> 
> 赞同：7
> 
> 时间：2012-06-29T21:25:04.547
> 
> 标签：android, street-address

嗨，在我的应用程序中，我需要根据用户设置的语言环境显示输入地址。有没有人在Android平台上工作或地址格式或有任何指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-03T07:58:23.993

查看[googlei18n/libaddressinput：Google 的邮政地址库，为 Android 和 Chromium 提供支持](https://github.com/googlei18n/libaddressinput)。项目中有两个模块：android 和 :common。您应该只需要 :common 来格式化地址以显示区域设置。

```
import android.location.Address;
import android.support.annotation.NonNull;
import android.text.TextUtils;
import com.google.i18n.addressinput.common.AddressData;
import com.google.i18n.addressinput.common.FormOptions;
import com.google.i18n.addressinput.common.FormatInterpreter;
...
public static String getFormattedAddress(@NonNull final Address address, 
                                         @NonNull final String regionCode) {
    final FormatInterpreter formatInterpreter
            = new FormatInterpreter(new FormOptions().createSnapshot());
    final AddressData addressData = (new AddressData.Builder()
            .setAddress(address.getThoroughfare())
            .setLocality(address.getLocality())
            .setAdminArea(address.getAdminArea())
            .setPostalCode(address.getPostalCode())
            .setCountry(regionCode) // REQUIRED
            .build());
    // Fetch the address lines using getEnvelopeAddress,
    List<String> addressFragments = formatInterpreter.getEnvelopeAddress(addressData);
    // join them, and send them to the thread.
    return TextUtils.join(System.getProperty("line.separator"),
            addressFragments);
} 
```

注意：regionCode 必须是有效的 iso2 国家代码，因为这是格式解释器从中提取地址格式的地方。（如果您好奇，请参阅[RegionDataConstants以获取格式列表。）](https://github.com/googlei18n/libaddressinput/blob/master/common/src/main/java/com/google/i18n/addressinput/common/RegionDataConstants.java)

> 设置地址的 2 字母 CLDR 区域代码；请参阅地址数据#getPostalCountry()。与传递给构建器的其他值不同，区域代码永远不能为空。

示例：美国

> 801 栗子街
> ST。密苏里州路易斯 63101

示例：JP

> 〒1600023
> NISHISHINJUKU
> 3-2-11 NISHISHINJUKU SHINJUKU-KU TOKYO

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T21:38:24.387

我在其他平台上做了相当多的本地化。以下是 Android 本地化指南：http: [//developer.android.com/guide/topics/resources/localization.html#using-framework](http://developer.android.com/guide/topics/resources/localization.html#using-framework)

一种方法是使用本地化资源来存储与您想要的每个语言环境的地址布局相对应的 MessageFormat 字符串。从那里，您需要参考全球地址块标准，并为您需要的每个语言环境创建格式字符串。

# unix - UNIX 打开多个窗口并传递登录名/密码

> ID：11269174
> 
> 赞同：0
> 
> 时间：2012-06-29T21:25:13.497
> 
> 标签：unix, sunos

开门见山; 我想在 UNIX 中创建一个脚本，在屏幕上的特定位置打开两个窗口，输入用户名和密码（由用户作为参数给出），然后执行另一个脚本。

我想知道这是否可行，如果可以；我应该去哪里看？

我是 UNIX 新手，但对脚本和编程非常熟悉。

* * *

在 thb 和 notfed 响应后编辑

我目前在 OS X 上运行 SunOS 5.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:39:57.693

关于窗口的位置，查看 X(7)——也就是说，`man 7 X`在终端输入命令并查看结果——然后向下滚动该手册页到*GEOMETRY SPECIFICATIONS 部分，*如果您的手册页版本有这样的一节。简而言之，要让程序`xfoo`以坐标 (40, 100) 的左上角打开水平大小为 200，垂直大小为 160 的窗口，请给出命令`xfoo -geometry 200x160+40+100`。

这可能不是您问题的完整答案，因为您谨慎地没有提供完整的细节，但可以这么说，有人怀疑它会让您走上正确的轨道。

关于您的身份验证问题，crypt(3) 联机帮助页及其*SEE ALSO*部分可能会有所帮助。有关更高级的处理，请参阅 Libpam，其中 PAM 代表 Pluggable Authentication Modules。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T18:07:53.700

如果这两个窗口是**Xterms**，那么有一个简单的方法可以做到这一点；

请注意，这是来自`ksh`脚本，但应该适用于`bash`

```
## This is how big  (how many columns & rows)  your Xterm will be
GEOM0=198x20
GEOM1=98x45

## Colors
COLOR="-bg black -fg white -cr red"

## Xterm Options (See Man page)
XOPTS="+ah +ai -b 2 -cb +cn -j -ls -rw -aw -si +sk" 

## Scroll-back Buffer
SCRLB="9999"

## Commands to execute (you could put an SSH command here)
CMD0="-e /bin/gtail -F /var/adm/messages"

CMD1="-e /bin/gtail -F /var/log/secure"

TITLE="-title Something Clever Here "

TERMBIN=/usr/openwin/bin/xterm

# PLACEMENT
# We specify where we want the window to pop-up by adding "+#+#" to the GEOM.
################################################################################
## Top-Left corner (For my monitor, that's "+2+2")
${TERMBIN} ${XOPTS} -sl ${SCRLB} -fn 6x10 ${COLOR} -geometry ${GEOM0}+2+2 ${TITLE} ${CMD0} &

## Top-Center (For my monitor, that's "+2+233")
${TERMBIN} ${XOPTS} -sl ${SCRLB} -fn 6x10 ${COLOR} -geometry ${GEOM1}+2+233 ${TITLE} ${CMD1} & 
```

# java - 在处理程序使用 Netty 接收事件之前，如何将对象附加到通道？

> ID：11269177
> 
> 赞同：2
> 
> 时间：2012-06-29T21:25:23.673
> 
> 标签：java, netty

`channelBound`我有一个关于绑定请求和接收事件的上游处理程序的同步问题。`channelBound`由于处理程序需要使用对象来处理回调，因此我需要在处理程序接收事件之前将对象附加到通道。下面的例子。

处理程序示例：

```
public class MyClientHandler extends SimpleChannelUpstreamHandler {

    @Override
    public void channelBound(ChannelHandlerContext ctx, ChannelStateEvent e) {

        /* Problem: This can occur while the channel attachment is still null. */
        MyStatefulObject obj = e.getChannel().getAttachment();

        /* Do important things with attachment. */ 
    }

} 
```

主要示例：

```
ClientBootstrap bootstrap = ... //Assume this has been configured correctly.

ChannelFuture f = bootstrap.bind(new InetSocketAddress("192.168.0.15", 0));

/* It is possible the boundEvent has already been fired upstream
 *  by the IO thread when I get here. 
 */
f.getChannel().setAttachment(new MyStatefulObject()); 
```

**可能的灵魂**

我想出了几个解决方案来解决这个问题，但它们都有种“气味”，这就是为什么我在这里询问是否有人有干净的方法来做到这一点。

解决方案1：在回调中旋转或阻塞，`channelBound`直到附件不为空。我不喜欢这个解决方案，因为它占用了一个 I/O 工作者。

解决方案 2：`MyClientHandler`进入双向处理程序并`ThreadLocal`在`bindRequested`下游回调中使用 a 获取附件。我不喜欢这样，因为它依赖于请求线程用于触发`bindRequested`事件的 Netty 实现细节。

我发现解决方案 1 比解决方案 2 更容易忍受。所以如果这是我需要做的，我会的。

有没有一种简单的方法来获取通道引用而无需先请求绑定或连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:13:59.057

让您的`ChannelPipelineFactory`实现接受构造函数参数并在那里指定附件。将一个处理程序放在所有其他处理程序的前面，并使第一个处理程序的`channelOpen()`方法设置附件，然后从管道中删除第一个处理程序，因为它不再需要了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T10:00:48.650

是的，在您将附件设置到频道之前，boundEvent 可能会获取处理程序。

如果附件对您打开的每个频道都非常具体，那么您可以在绑定未来注册一个频道未来监听器，并通过设置所有内容而不使用 BootStraps 在 operationComplete() 上设置附件。以下是 EchoClient 示例的修改版本，它工作正常。

```
 // Configure the client.
    final NioClientSocketChannelFactory clientSocketChannelFactory = new NioClientSocketChannelFactory(
            Executors.newCachedThreadPool());

    // Set up the pipeline factory.
    final ChannelPipelineFactory channelPipelineFactory = new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() throws Exception {
            return Channels.pipeline(
                    new MyClientHandler());
        }
    };

    ChannelPipeline pipeline = channelPipelineFactory.getPipeline();
    final Channel channel = clientSocketChannelFactory.newChannel(pipeline);

    channel.getConfig().setPipelineFactory(channelPipelineFactory);
    channel.getConfig().setOption("tcpNoDelay", true);
    channel.getConfig().setOption("receiveBufferSize", 1048576);
    channel.getConfig().setOption("sendBufferSize", 1048576);

    ChannelFuture boundFuture = Channels.future(channel);

    boundFuture.addListener(new ChannelFutureListener() {
        @Override
        public void operationComplete(ChannelFuture future) throws Exception {
            if (future.isSuccess()) {
                future.getChannel().setAttachment(new Object());// set the channel attachment
            }
        }
    });

    channel.getPipeline().sendDownstream(new DownstreamChannelStateEvent(channel, boundFuture, ChannelState.BOUND, new InetSocketAddress(host, 0)));

    ChannelFuture connectFuture = Channels.future(channel); 
    channel.getPipeline().sendDownstream(new DownstreamChannelStateEvent(channel, connectFuture, ChannelState.CONNECTED, new InetSocketAddress(host, port)));

    channel.getCloseFuture().awaitUninterruptibly();

    clientSocketChannelFactory.releaseExternalResources();// do not forget to do this 
```

# relational-database - 打印oracle数据库中所有表的所有记录

> ID：11269178
> 
> 赞同：0
> 
> 时间：2012-06-29T21:25:24.853
> 
> 标签：relational-database, sqlplus

如何使用 SQL*Plus 创建一个打印所有表中所有记录的查询？

我可以使用以下方法检索所有表：

```
select object_name from all_objects
where owner='me' and object_type='TABLE' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:31:34.057

```
SELECT column_name
FROM user_tab_cols
WHERE table_name in (SELECT table_name  FROM dba_tables) 
```

# c++ - 使用 gcc 的 boost::variant 链接器错误

> ID：11269179
> 
> 赞同：4
> 
> 时间：2012-06-29T21:25:26.833
> 
> 标签：c++, gcc, boost, c++11, boost-variant

我有点疯狂地试图弄清楚为什么以下内容无法编译：

```
#include <iostream>
#include <array>
#include <boost/variant.hpp>
#include <forward_list>

typedef unsigned long long very_long;
typedef boost::variant< int, std::string > variants_type;
typedef std::array< variants_type, 5 > row_type;
typedef std::forward_list<row_type> rows_holder_type;

int main() {

    rows_holder_type rows;
    row_type row_data;

    row_data[0] = 0;
    row_data[1] = 0;
    row_data[2] = 0;
    row_data[3] = 0;
    row_data[4] = 0;

    rows.push_front(row_data);
} 
```

这是我得到的编译器错误：

> /usr/include/testing/test_code.o||在函数中`'std::array<boost::variant<int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>, 5ul>::array(std::array<boost::variant<int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>, 5ul> const&)'`：|
> 。store.cpp :( text._ZNSt5arrayIN5boost7variantIiSsNS0_6detail7variant5void_ES4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_EELm5EEC2ERKS6 _ [_ _ ZNSt5arrayIN5boost7variantIiSsNS0_6detail7variant5void_ES4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_S4_EELm5EEC5ERKS6] + 0X31）||未定义参照`'boost::variant<int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>::variant(boost::variant<int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&)'`|
> ||=== 构建完成：1 个错误，0 个警告 ===|

如果我更换：

```
typedef boost::variant< int, std::string > variants_type; 
```

和：

```
typedef boost::any variants_type; 
```

代码可以编译，但出于性能原因，我不想使用 boost::any。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:19:54.467

我用 MSVC 和 gcc 4.7.0 测试了你的代码。MSVC 可以很好地编译和链接代码（当然是`#include <string>`），但 gcc 在最后一行给出了链接器错误`rows.push_front(row_data);`。如果您注释掉该行，gcc 将接受该代码。我看不出为什么 gcc 会给出链接器错误，并得出结论认为这是 gcc 的错误。gcc 的一种解决方法是更改`std::array`​​为`std::vector`.

（根据错误消息，我假设您正在使用 Code::Blocks 和 gcc）

我已经消除了额外的代码，下面的例子仍然给出了链接器错误：

```
#include <boost/variant.hpp>
#include <array>

int main()
{
    std::array<boost::variant<int, double>, 5> row_type1;
    std::array<boost::variant<int, double>, 5> row_type2 = row_type1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:50:24.797

你不见了`#include <string>`；除此之外，您的代码很好。

# c# - 无法在 DataGridViewCheckBoxColumn 中选中复选框？

> ID：11269181
> 
> 赞同：19
> 
> 时间：2012-06-29T21:25:36.430
> 
> 标签：c#, winforms, datagridview

我正在`DataGridView`使用复选框列和文本列创建一个简单的列（后面会有更多列，但这是我试图开始工作的最小工作示例）。当我运行此代码时，会出现复选框列，但我无法选中这些框。

```
DataGridViewCheckBoxColumn checkColumn = new DataGridViewCheckBoxColumn();
checkColumn.ThreeState = false;
checkColumn.Width = 20;

MyDataGridView.Columns.Add(checkColumn);
MyDataGridView.Columns.Add(new DataGridViewTextBoxColumn()); 
```

由于在这种情况下什么都没有出现，我想添加一些虚拟数据。

```
for (int i = 0; i < 10; i++)
{
    MyDataGridView.Rows.Add(new Object[] { true, "test"});
} 
```

通常，`DataGridView`它填充了从自定义对象列表绑定的数据，就像我的[这个问题](https://stackoverflow.com/questions/11268520/how-do-i-bind-a-datagridviewcomboboxcolumn-to-a-property-method-of-an-object-tha)一样，但我认为在继续之前以基本方式让它工作会更好。

我不是试图以编程方式设置选中状态，而是让用户选择然后在各种其他事件处理程序中使用该选择。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-30T09:38:36.503

代码似乎没问题，所以我只能告诉您检查并确保`DataGridView`正确设置了以下属性：`ReadOnly`设置为`False`和`Enabled`设置为`True`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-08T08:18:48.903

我有同样的问题，我的解决方案是改变

> “EditMode”从“EditProgramatically”变成默认的“EditOnKeystrokeOrF2”，

这解决了我的问题。

以上所有建议均已落实。

亲切的问候海德

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-29T23:27:31.810

只需更改 DataGridView 的只读属性

```
 MyDataGridView.ReadOnly = false; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-03T19:25:45.127

即使复选框列不是表格设置，表格本身也可能设置为只读，表格设置将覆盖列设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T06:02:52.247

当您使用具有（在 DataGridView 中）具有ter`DataGridView`的对象填充 时，也会发生这种情况。中表示此（只读）属性的列自动为只读，因为它不允许在外部设置属性（=在对象的代码之外）。`public Boolean property``CheckBox``private set``DataGridView`

```
public class ExampleObject
{
    /// <summary>
    /// A public property that can only be read.
    /// When a DataGridViewRow is populated with this object, the column representing this Boolean property is automatically read-only.
    /// </summary>
    public Boolean QCPassed
    {
        get;
        private set;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-15T10:17:21.953

在不同的情况下我也有同样的问题我的 DataGridView 绑定到一个由 SqlDataReader 填充的 DataTable（它是只读的）。我用 SqlDataAdapter 替换了 SqlDataReader 工作正常。

```
DataTable dt=new DataTable();
SqlDataAdapter da=new SqlDataAdapter("Select <column_names> from <table_name>",con);
da.Fill(dt); 
```

# vb.net - 如何使用 Exuberant Ctags 为 VB.NET 文件创建标签？

> ID：11269184
> 
> 赞同：3
> 
> 时间：2012-06-29T21:26:08.603
> 
> 标签：vb.net, vim, ctags, exuberant-ctags

我们在工作中使用 .NET，我们的项目有点混杂，有一些 VB 和 C#。Exuberant Ctags 按照[这些说明](https://web.archive.org/web/20121114112215/https://arun.wordpress.com/2009/04/10/c-and-vim/)为我生成 C# 标签。但是，我还没有弄清楚如何让它为我的 VB.NET 代码生成标签。我发现唯一有帮助的文章是这篇[文章](http://www.rutherfurd.net/2003/apr/17/adding-support-for-visual-basic-to-exuberent-ctags/)。但在 2003 年，它的排名只有几年。我注意到的第一件事是这一行：

```
--langmap=vb:.bas.cls.ctl.frm.vbs 
```

错了，也老了。我将其更改为：

```
--langmap=vb:.vb 
```

这稍微改善了我的结果，但它似乎仍然没有产生预期的行为（例如，当我`:set tag=tags`在函数调用或参数上执行 ^] 或 g] 时，它没有标签）。

这是我的`ctags.cnf`文件的样子（我已经验证它正在被使用）：

```
--langdef=vb
--langmap=vb:.vb
--regex-vb=/^(Public|Private|\b)[ \t]*Sub[ \t]+([a-zA-Z0-9_]+)/\2/s,subroutine/i
--regex-vb=/^(Public|Private|\b)[ \t]*Function[ \t]+([a-zA-Z0-9_]+)/\2/f,function/i
--regex-vb=/^(Public|Private)[ \t]+([a-zA-Z0-9_]+)[ \t]+As[ \t]+/\2/v,variable/i
--regex-vb=/^(Public|Private|\b)[ \t]*Const[ \t]+([a-zA-Z0-9_]+)[ \t]+(As|=)[ \t]+/\2/c,const/i
--regex-vb=/^(Public|\b)[ \t]*Property[ \t]*(Get|Let|Set)[ \t]+([a-zA-Z0-9_]+)/\3/n,name/i
--regex-vb=/^(Public|Private|\b)[ \t]*Enum[ \t]+([a-zA-Z0-9_]+)/\2/e,enum/i
--regex-vb=/^([a-zA-Z_]+):/\1/l,label/i
--recurse
--exclude="bin"
--exclude="obj"
--fields=+ianmzS
--extra=+fq
--vb-kinds=cn 
```

任何线索我需要做什么才能获得适当的支持？

## 编辑：

这是我的标签文件中的一个片段：

```
!_TAG_FILE_FORMAT   2   /extended format; --format=1 will not append ;" to lines/
!_TAG_FILE_SORTED   1   /0=unsorted, 1=sorted, 2=foldcase/
!_TAG_PROGRAM_AUTHOR    Darren Hiebert  /dhiebert@users.sourceforge.net/
!_TAG_PROGRAM_NAME  Exuberant Ctags //
!_TAG_PROGRAM_URL   http://ctags.sourceforge.net    /official site/
!_TAG_PROGRAM_VERSION   5.8 //
Application.Designer.vb .\My Project\Application.Designer.vb    1;" kind:F  line:1
Application.Designer.vb .\Nuts\My Project\Application.Designer.vb   1;" kind:F  line:1
AssemblyInfo.vb .\My Project\AssemblyInfo.vb    1;" kind:F  line:1
AssemblyInfo.vb .\Nuts\My Project\AssemblyInfo.vb   1;" kind:F  line:1
AttachmentHandler.vb    .\Utilities\AttachmentHandler.vb    1;" kind:F  line:1 
```

虽然我的 CS 代码库生成这样的标签：

```
SomeModel   .\Client\Views\Models\Namespace\SomeModel.cs    /^    public class SomeModel$/;"    kind:c  line:12 namespace:Views.Models.SomeModel    access:public 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:08:21.663

除非您遵循零缩进编码约定，否则您的正则表达式将不起作用；）

尝试：

```
 // Note the extra [ \t]* right after ^
 --regex-vb=/^[ \t]*(Public|Private|\b)[ \t]*Sub[ \t]+([a-zA-Z0-9_]+)/\2/s,subroutine/i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T11:31:58.000

这是一个工作配置，从 my 中提取`~/.ctags`，基于 OP 的配置并应用接受的答案编辑。

我不得不删除标签匹配器，因为这阻止了所有子/函数匹配（不知道为什么）并替换为`(Public|Private|\b)`使其`(Public|Private)?`可选地匹配访问修饰符（否则它不匹配任何没有这些修饰符的我）。

```
--exclude="bin"
--exclude="obj"
--langdef=vb
--langmap=vb:.vb
--regex-vb=/^[ \t]*(Public|Private)?[ \t]*Sub[ \t]+([a-zA-Z0-9_]+)/\2/s,subroutine/i
--regex-vb=/^[ \t]*(Public|Private)?[ \t]*Function[ \t]+([a-zA-Z0-9_]+)/\2/f,function/i
--regex-vb=/^[ \t]*(Public|Private)[ \t]+([a-zA-Z0-9_]+)[ \t]+As[ \t]+/\2/v,variable/i
--regex-vb=/^[ \t]*(Public|Private)?[ \t]*Const[ \t]+([a-zA-Z0-9_]+)[ \t]+(As|=)[ \t]+/\2/c,const/i
--regex-vb=/^[ \t]*(Public)?[ \t]*Property[ \t]*(Get|Let|Set)[ \t]+([a-zA-Z0-9_]+)/\3/n,name/i
--regex-vb=/^[ \t]*(Public|Private)?[ \t]*Enum[ \t]+([a-zA-Z0-9_]+)/\2/e,enum/i
#--regex-vb=/^[ \t]*([a-zA-Z_]+):/\1/l,label/i
--recurse
--fields=+ianmzS
--extra=+fq
--vb-kinds=cn 
```

# java - 如何构建包含 NetBeans 的所有库依赖项的可执行文件？

> ID：11269193
> 
> 赞同：1
> 
> 时间：2012-06-29T21:26:51.730
> 
> 标签：java, c++, c, netbeans, executable

我想在 NetBeans 中构建我的程序，以便发布的可执行文件包含运行它所需的所有依赖项（例如：它需要 cygwin1.dll）。如果没有 cygwin1.dll 在同一目录中，我目前无法在另一台机器上运行我的可执行文件。我不介意可执行文件是否是大文件。

NetBeans 中是否有自动检测/允许的设置？我需要设置/打开“静态”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:12:10.623

我似乎无法静态链接 cygwin1.dll。

参考： [你能静态编译一个cygwin应用程序吗？](https://stackoverflow.com/questions/340696/can-you-statically-compile-a-cygwin-application)

# git - 发布和维护 nodejs 的模块

> ID：11269195
> 
> 赞同：1
> 
> 时间：2012-06-29T21:27:00.617
> 
> 标签：git, node.js, module, packages

所以我刚刚发布[了我的第一个 nodejs 模块](https://github.com/ketamynx/node-codein)。

我做过的事情：

*   选择了一个面向 SEO 的名称
*   把代码贴在github上
*   将模块添加到模块[列表中](https://github.com/joyent/node/wiki/Modules)
*   通过发布模块`npm publish`

现在，

1.  我还需要做更多的事情，以确保需要它的人可以使用我的模块吗？
2.  如何使用 npm 推送更新？我又试了`npm publish`一次，但它说我需要先取消发布，或者更改版本或做一些疯狂的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:15:45.407

> 我还需要做更多的事情，以确保需要它的人可以使用我的模块吗？

就基础知识而言，您已经涵盖了您的基础。你可以考虑写到[DailyJS 之](http://dailyjs.com/)类的博客网站或发布到一些邮件列表以获得口碑，但是将你的代码放在 GitHub 上并将你的包放在 NPM 上是一个可靠的开始。

> 如何使用 npm 推送更新？

一旦您发布了模块的特定版本，您不应该将更改推送到相同的版本——这可以确保期望您的模块的某个版本以某种方式运行的人可以确保它这样做。如果你需要更新你的模块，你应该在你的`package.json`文件中增加版本号并发布它。

在选择版本号时一定要坚持[语义版本控制](http://semver.org/)，这样版本匹配器就可以`~3.0.5`工作了。有关详细信息，请参阅[http://npmjs.org/doc/json.html#version 。](http://npmjs.org/doc/json.html#version)

# sql - 如何使用 INFORMATION_SCHEMA 查找数据库中所有外键的主键

> ID：11269197
> 
> 赞同：0
> 
> 时间：2012-06-29T21:27:31.483
> 
> 标签：sql, sql-server, information-schema

我想在一个表中找到所有外键，并为每个外键找到它指向的主键表和列。我需要使用 INFORMATION_SCHEMA 来执行此操作，因为我们希望将其用于所有数据库供应商（或至少所有正确实施 INFORMATION_SCHEMA 的供应商）。

我想出的最好的是：

```
"SELECT k.COLUMN_NAME, ccu.TABLE_NAME AS 'references_table', ccu.COLUMN_NAME AS 'references_field' " +
"FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS k LEFT OUTER JOIN " +
"INFORMATION_SCHEMA.TABLE_CONSTRAINTS AS c ON k.TABLE_NAME = c.TABLE_NAME AND k.TABLE_SCHEMA = c.TABLE_SCHEMA AND " +
"k.TABLE_CATALOG = c.TABLE_CATALOG AND k.CONSTRAINT_CATALOG = c.CONSTRAINT_CATALOG AND " +
"k.CONSTRAINT_NAME = c.CONSTRAINT_NAME LEFT OUTER JOIN " +
"INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS AS rc ON rc.CONSTRAINT_SCHEMA = c.CONSTRAINT_SCHEMA AND " +
"rc.CONSTRAINT_CATALOG = c.CONSTRAINT_CATALOG AND rc.CONSTRAINT_NAME = c.CONSTRAINT_NAME LEFT OUTER JOIN " +
"INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE AS ccu ON rc.UNIQUE_CONSTRAINT_SCHEMA = ccu.CONSTRAINT_SCHEMA AND " +
"rc.UNIQUE_CONSTRAINT_CATALOG = ccu.CONSTRAINT_CATALOG AND rc.UNIQUE_CONSTRAINT_NAME = ccu.CONSTRAINT_NAME " +
"WHERE(k.CONSTRAINT_CATALOG = DB_NAME()) AND (k.TABLE_NAME = '" + table.Name + "') AND (c.CONSTRAINT_TYPE = 'FOREIGN KEY')"; 
```

这让我觉得过于复杂。有更好的选择吗？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:49:53.543

```
SELECT  ccu1.TABLE_NAME as fkTable, ccu1.COLUMN_NAME as fkColumn, 
        ccu2.TABLE_NAME as referencedTable, ccu2.COLUMN_NAME as referencedColumn
FROM    INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu1,
        INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu2,
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc
WHERE   rc.CONSTRAINT_NAME = ccu1.CONSTRAINT_NAME
AND     rc.UNIQUE_CONSTRAINT_NAME = ccu2.CONSTRAINT_NAME 
```

我针对 SQL Server 2008 数据库对此进行了测试，当在我的用户数据库的上下文中运行时，它返回了我定义的所有带有外键的表，以及相关的表和列。

当然，您也可以进一步过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T21:55:00.833

最初接受的答案没有正确考虑使用复合主键的数据库。

试试这个：

```
select  fku.CONSTRAINT_NAME, fku.ORDINAL_POSITION
        , fku.TABLE_SCHEMA as FK_TABLE_SCHEMA
        , fku.TABLE_NAME as FK_TABLE_NAME
        , fku.COLUMN_NAME as FK_COLUMN_NAME
        , pku.TABLE_SCHEMA as PK_TABLE_SCHEMA
        , pku.TABLE_NAME as PK_TABLE_NAME
        , pku.COLUMN_NAME as PK_COLUMN_NAME

from    INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc
        INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE pku
            ON rc.UNIQUE_CONSTRAINT_NAME = pku.CONSTRAINT_NAME
        INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE fku
            ON rc.CONSTRAINT_NAME = fku.CONSTRAINT_NAME AND pku.ORDINAL_POSITION = fku.ORDINAL_POSITION
order by fku.TABLE_SCHEMA, fku.TABLE_NAME, fku.ORDINAL_POSITION 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:43:31.813

如果引用的表（外键正在查看的表）具有唯一键，则 Jim 的答案无法正确返回所有外键，因为它使用 UNIQUE_CONSTRAINT_NAME 列。我建议使用：

```
SELECT 
    FK = fk.name, 
    FKTable = QUOTENAME(OBJECT_SCHEMA_NAME(fkcol.[object_id])) 
        + '.' + QUOTENAME(OBJECT_NAME(fkcol.[object_id])),
    FKCol = fkcol.name,
    ' references => ',
    PKTable = QUOTENAME(OBJECT_SCHEMA_NAME(pkcol.[object_id])) 
        + '.' + QUOTENAME(OBJECT_NAME(pkcol.[object_id])),
    PKCol = pkcol.name
FROM sys.foreign_keys AS fk
INNER JOIN sys.foreign_key_columns AS fkc
ON fk.[object_id] = fkc.constraint_object_id
INNER JOIN sys.columns AS fkcol
ON fkc.parent_object_id = fkcol.[object_id]
AND fkc.parent_column_id = fkcol.column_id
INNER JOIN sys.columns AS pkcol
ON fkc.referenced_object_id = pkcol.[object_id]
AND fkc.referenced_column_id = pkcol.column_id
ORDER BY fkc.constraint_column_id; 
```

来源：

*   [针对 INFORMATION_SCHEMA 视图的案例](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)

# hive - 在 hive 中创建外部表时，我可以将位置指向目录中的特定文件吗？

> ID：11269203
> 
> 赞同：29
> 
> 时间：2012-06-29T21:28:02.637
> 
> 标签：hive, external

我已经这样定义了一个表：

```
create external table PageViews (Userid string, Page_View string)
partitioned by (ds string)
row format as delimited fields terminated by ','
stored as textfile location '/user/data'; 
```

我不希望 /user/data 目录中的所有文件都用作表的一部分。我可以执行以下操作吗？

```
location 'user/data/*.csv' 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-01T00:11:29.413

克莫斯利说的是真的。截至目前，您无法选择性地选择某些文件作为 Hive 表的一部分。但是，有两种方法可以绕过它。

**选项 1：** 您可以将所有 csv 文件移动到另一个 HDFS 目录并在其上创建一个 Hive 表。如果它更适合您，您可以在当前目录中创建一个包含所有 CSV 文件的子目录（例如 csv）。然后，您可以在此子目录之上创建一个 Hive 表。请记住，在父目录之上创建的任何 Hive 表都不会包含来自子目录的数据。

**选项 2：** 您可以更改查询以使用名为`INPUT__FILE__NAME`.

您的查询将类似于：

```
SELECT 
   *
FROM
   my_table
WHERE
   INPUT__FILE__NAME LIKE '%csv'; 
```

这种方法的不良影响是，即使您只关心特定文件，Hive 查询也必须遍历目录中存在的整个数据。该查询不会根据使用 . 的谓词过滤掉文件`INPUT__FILE__NAME`。它只会过滤掉与`INPUT__FILE__NAME`映射阶段使用的谓词不匹配的记录（因此过滤掉来自特定文件的所有记录），但映射器也会在不必要的文件上运行。它会给你正确的结果，可能会有一些，可能很小的性能开销。

这种方法的好处是，如果您的表中有多个文件，并且您希望能够在几个查询中查询该表（或其分区）中的所有文件以及其中的一部分文件，则可以使用同一个 Hive 表其他查询。您可以利用`INPUT__FILE__NAME`虚拟列来实现这一点。例如：如果 HDFS 目录中的分区`/user/hive/warehouse/web_logs/`如下所示：

```
/user/hive/warehouse/web_logs/dt=2012-06-30/
   /user/hive/warehouse/web_logs/dt=2012-06-30/00.log
   /user/hive/warehouse/web_logs/dt=2012-06-30/01.log
   .
   .
   .
   /user/hive/warehouse/web_logs/dt=2012-06-30/23.log 
```

假设您的表定义如下所示：

```
CREATE EXTERNAL TABLE IF NOT EXISTS web_logs_table (col1 STRING)
PARTITIONED BY (dt STRING)
LOCATION '/user/hive/warehouse/web_logs'; 
```

添加适当的分区后，您可以使用以下查询查询分区中的所有日志：

```
SELECT
   *
FROM
   web_logs_table w
WHERE
   dt='2012-06-30'; 
```

但是，如果您只关心一天中第一个小时的日志，则可以使用如下查询查询第一个小时的日志：

```
SELECT
   *
FROM
   web_logs_table w
WHERE 
   dt ='2012-06-30'
   AND INPUT__FILE__NAME='00.log'; 
```

另一个类似的用例可能是包含来自不同域的 Web 日志的目录，并且各种查询需要分析不同域集的日志。查询可以使用`INPUT__FILE__NAME`虚拟列过滤掉域。

在上述两个用例中，拥有一个小时或域的子分区也可以解决问题，而不必使用虚拟列。但是，可能存在一些要求您不创建子分区的设计权衡。在这种情况下，可以说，使用`INPUT__FILE__NAME`虚拟列是您最好的选择。

**在 2 个选项之间做出决定：**

这实际上取决于您的用例。如果您从不关心文件是您试图从 Hive 表中排除，那么使用选项 2 可能是一种矫枉过正，您应该修复目录结构并在包含您关心的文件的目录顶部创建一个 Hive 表.

如果您目前排除的文件遵循与其他文件相同的格式（因此它们都可以是同一个 Hive 表的一部分）并且您可以看到自己编写一个查询来分析目录中的所有数据，然后使用 Option 2.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-15T03:08:43.123

当我有类似的问题要解决时，我遇到了这个线程。我能够通过使用自定义 SerDe 来解决它。然后，我添加了 SerDe 属性，这些属性指导将 RegEx 应用于任何特定表的文件名模式。

如果您只处理标准 CSV 文件，自定义 SerDe 可能看起来有点矫枉过正，我需要处理更复杂的文件格式。如果您不回避编写一些 Java，这仍然是一个非常可行的解决方案。当您无法重构存储位置中的数据并且您正在不成比例的大文件集中寻找非常特定的文件模式时，它特别有用。

```
> CREATE EXTERNAL TABLE PageViews (Userid string, Page_View string)  
> ROW FORMAT SERDE 'com.something.MySimpleSerDe' 
> WITH SERDEPROPERTIES ( "input.regex" = "*.csv")
> LOCATION '/user/data'; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-29T22:26:55.113

不，您目前不能这样做。已打开 JIRA 票证，允许正则表达式选择 Hive 表的包含文件 ( [https://issues.apache.org/jira/browse/HIVE-951](https://issues.apache.org/jira/browse/HIVE-951) )。

现在你最好的办法是在不同的目录上创建一个表，然后复制你想要查询的文件。

# c# - jqueryui 对话框上的 ASp.net 按钮会导致所有数据重置。使用submitBehavior=False，并在 (!ispostback) 中进行数据绑定

> ID：11269204
> 
> 赞同：0
> 
> 时间：2012-06-29T21:28:03.993
> 
> 标签：c#, asp.net, postback, jquery-ui-dialog

所以我已经为此苦苦挣扎了几天。我有一个登录页面，它检查用户是否是第一次登录，如果是，它会显示一个 jqueryui 对话框，要求用户选择他们的安全问题。对话框很简单，三个下拉菜单、三个文本框以及一个继续和取消按钮。对话框显示查找，当您单击继续时，数据将保存到数据库中，但它只保存下拉列表的默认值，而不保存文本框中的文本。在我看来，表格在数据保存之前回发，然后保存空白/默认内容。我已经尝试了所有可以在互联网上找到的方法来解决这个问题。截至目前，我正在启动页面加载对话框以进行测试。下面的代码：

Javascript：

```
function validateQuestions() {

            var q1Index = $('#<%= ddlQuest1.ClientID%>').get(0).selectedIndex;
            var q2Index = $('#<%= ddlQuest2.ClientID%>').get(0).selectedIndex;
            var q3Index = $('#<%= ddlQuest3.ClientID%>').get(0).selectedIndex;
            "<%=Q3Index%>" = q3Index;
            var label = document.getElementById('<%= _lblQuestError.ClientID%>');
            label.style.display = 'none';

            if (q1Index == q2Index || q1Index == q3Index || q2Index == q3Index) {label.style.display = 'block';}
            else {label.style.display = 'none'}
            return false;
        }

        function validateAnswers() {

            var ans1Text = $('#<%= txtAnswer1.ClientID%>').val();
            var ans2Text = $('#<%= txtAnswer2.ClientID%>').val();
            var ans3Text = $('#<%= txtAnswer3.ClientID%>').val();
            var ans1error = document.getElementById('<%= _lblAns1Error.ClientID%>');
            var ans2error = document.getElementById('<%= _lblAns2Error.ClientID%>');
            var ans3error = document.getElementById('<%= _lblAns3Error.ClientID%>');
            ans1error.style.display = 'none';
            ans2error.style.display = 'none';
            ans3error.style.display = 'none';

            if(ans1Text=""){ans1error.style.display = 'block';}                
            else if(ans2Text=""){ans2error.style.display = 'block';}
            else if(ans3Text=""){ans3error.style.display = 'block';}
            else { ans1error.style.display = 'none'; ans2error.style.display = 'none'; ans3error.style.display = 'none'}

            return false;
        }
function cancel() {
            $("#_dlgQuest").dialog('close');
            return false;
        }
function showDialog() {
            var secQuestDlg = $('#_dlgQuest').dialog({
                bgiframe: true,
                height: 350,
                width: 900,
                modal: true,
                overlay: {
                    backgroundColor: '#000',
                    opacity: ".8"
                }
            });
            secQuestDlg.parent().appendTo('/html/body/form[0]');
        } 
```

按钮aspx：`<asp:Button ID="_dlgbtnContinue" ToolTip="Continue" runat="server" Text="Continue" UseSubmitBehavior="false" OnClick="_dlgbtnContinue_Click" CausesValidation="false" />`

页面加载：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ddlQuest3.Attributes.Add("onchange", "javascript:validateQuestions();");
            ddlQuest1.Attributes.Add("onchange", "javascript:validateQuestions();");
            ddlQuest2.Attributes.Add("onchange", "javascript:validateQuestions();");
            txtAnswer1.Attributes.Add("onblur", "javascript:validateAnswers();");
            txtAnswer2.Attributes.Add("onblur", "javascript:validateAnswers();");
            txtAnswer3.Attributes.Add("onblur", "javascript:validateAnswers();");  
            List<String> lstQuestions = QuikDrawServiceHelper._QuikDrawClient.GetQuestions();               
            ddlCountry.Focus();
            FillQuestions();
            ClientScript.RegisterStartupScript(GetType(), "hwa", "showDialog()", true);
            }
    } 
```

填写问题：

```
try
            {
                foreach (string s in lstQuestions)
                {
                    if (s.Equals(Customer.Quest1Code))
                    {
                        q1 = s;
                    }
                    if (s.Equals(Customer.Quest2Code))
                    {
                        q2 = s;
                    }
                    if (s.Equals(Customer.Quest3Code))
                    {
                        q3 = s;
                    }
                }
            }
            catch (Exception ex)
            {

            } 
```

完成点击事件：

```
protected void _dlgbtnContinue_Click(object sender, EventArgs e)
        {  
            Customer = CompanyServiceHelper._CompanyClient.GetCustomerByID(Convert.ToInt32(Session["CustomerID"].ToString()));   
            if (Session["FirstLogin"] == "Yes")
            {
                Customer.Quest1Code = ddlQuest1.SelectedValue;
                Customer.Quest1Ans = txtAnswer1.Text;
                Customer.Quest2Code = ddlQuest2.SelectedValue;
                Customer.Quest2Ans = txtAnswer2.Text;
                Customer.Quest3Code = ddlQuest3.SelectedValue;
                Customer.Quest3Ans = txtAnswer3.Text;
                CompanyServiceHelper._CompanyClient.AddQuestionsForCustomer(Customer);
                Session["FirstLogin"] = "Yes";
                Session["CustID"] = Customer.CustID;                
    } 
```

我也尝试过链接按钮，我得到了同样的结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:26:06.840

您面临的问题的根本原因是当弹出窗口消失时对话框变为“显示：无”，这会重置对话框中的所有值，使它们无法在服务器上访问。尽管“runat=server”，但在“display:none”的服务器 bcz 上无法访问表单字段，让您认为这些值从未设置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:58:49.800

似乎当您单击`dlgbtnContinue`按钮时它仍然没有进行回发，因此您完成了`!isPostBack`所有操作，然后重置了值。在此之后，`_dlgbtnContinue_Click`事件被触发，保存空白值。也许尝试检查`!isPostBack`DropDown 中的值是否也不是默认值，这意味着如果它们不是默认值，您不想再次进入该值。`_dlgbtnContinue_Click`只是一个想法......拥有代码会很好。祝你好运。

# php - PHP：DI 容器

> ID：11269209
> 
> 赞同：1
> 
> 时间：2012-06-29T21:29:03.033
> 
> 标签：php, dependency-injection

我一直在阅读依赖注入和 DI 容器。但是，我无法理解这个概念。

DI 容器如何知道“控制器”依赖于“加载器”并在“控制器”之前加载“加载器”？

我看到它的方式是它需要某种配置文件来跟踪依赖关系，如果是这样，它不是更容易编写：

```
// Controller
function __construct() {
    $this->load = new \Framework\Core\Loader;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:31:25.387

是的，DIC 需要预先配置，无论是在一些配置文件中，还是通过将工厂闭包堆叠在一起或通过注释源代码。

是的，在 ctor 中创建实例更容易，但这将消除 DI 的所有好处，因为您不再注入依赖项。

另请注意，您不需要 DIC 即可进行 DI。DI 只是通过构造函数、setter 或 using 方法在代码中注入依赖项的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:53:44.613

只是为了完成戈登所说的：

> 是的，DIC 需要预先配置，无论是在一些配置文件中，还是通过将工厂闭包堆叠在一起或通过注释源代码。

这里最简单/最快的方法是注释，看看这个例子：

```
class Loader {
    //...
}

class MyController {
    /**
     * @Inject
     * @var Loader
     */
    private $loader;

    public indexAction() {
        // You can use $this->loader
    }

} 
```

在这个例子中，依赖（加载器）已经通过注解注入：代码清晰易读，不需要编写任何配置文件。这是 IMO 最简单的解决方案。

如果您对这种方法感兴趣，我以[PHP-DI](http://mnapoli.github.com/PHP-DI/)为例，这是一个使用注释的依赖注入框架（我在此工作）。

# vb.net - VB.NET 使用密码加密

> ID：11269211
> 
> 赞同：3
> 
> 时间：2012-06-29T21:29:11.537
> 
> 标签：vb.net, encryption, cryptography

我有一个桌面应用程序，其中用户有一个加密的 ZIP 文件库。配置文件包含解密这些 ZIP 的主密码。这个想法是用户输入他们在安装应用程序时选择的程序密码来打开程序，并且该密码用于解密存储在配置文件中的主密码。

所有这些安全性的要点是，**即使有人可以访问硬盘和用户的 Windows 帐户，他们仍然无法在没有密码的情况下进入 ZIP 文件**，理想情况下。

为了验证用户输入的程序密码，我从这里（页面底部）使用 C# 哈希代码（转换为 VB）：

[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

到目前为止，一切都很好。我们只存储了程序密码的哈希值，因此黑客无法通过查看配置文件来读取它。

现在，我正在尝试实现此处的加密：

[http://msdn.microsoft.com/en-us/library/yx129kfs.aspx](http://msdn.microsoft.com/en-us/library/yx129kfs.aspx)

**实际问题：**

那么以下哪一项以纯文本形式存储在配置文件中，用于在运行时使用用户输入的程序密码解密 ZIP 主密码？

*   用于生成加密密钥的盐（这可以与上面用于散列密码的盐相同吗？）

*   初始化向量（IV）？

*   加密密钥？（可能不是......）（MS示例中的k1）

*   解密密钥？（在 MS 的例子中 k2）

在MS的例子中，他们把加密和解密都混在一起了……我有很多片段，但我不知道如何把它们放在一起……

**更新**

我读过 AES 加密比 MS 在上面示例中使用的 Triple DES 加密更安全。看到我们在 zip 文件上使用 AES，最好使用 AES 作为 ZIP 文件密码。

那么，我如何结合这个 AES 示例：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx#Y2300](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx#Y2300)

用 PBKDF2 生成加密密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:33:56.743

您需要存储 PBKDF 函数的盐和迭代计数（不能与用于散列密码的盐相同）。

关键是 PBKDF 的结果，对于给定的盐和迭代计数，它是固定的。

您还需要存储 IV。
如果您愿意，您可以使用密码的（PBKDF）散列，使用第三个（存储的）盐作为 IV。

# node.js - 无法启动工头，因为 node.js 抱怨找不到一些不起眼的模块

> ID：11269217
> 
> 赞同：1
> 
> 时间：2012-06-29T21:29:49.050
> 
> 标签：node.js, foreman

试图让一个项目在我的 debian vm 上运行，但工头拒绝启动。node.js 错误消息不是很有帮助，因为它甚至没有告诉我找不到哪个模块。

```
sissi@debian:/media/fancystuff$ foreman start
22:05:33 web.1     | started with pid 2949
22:05:33 web.1     |
22:05:33 web.1     | module.js:337
22:05:33 web.1     |     throw new Error("Cannot find module '" + request + "'");
22:05:33 web.1     |           ^
'2:05:33 web.1     | Error: Cannot find module '/media/fancystuff/web.js
22:05:33 web.1     |     at Function._resolveFilename (module.js:337:11)
22:05:33 web.1     |     at Function._load (module.js:279:25)
22:05:33 web.1     |     at Array.0 (module.js:484:10)
22:05:33 web.1     |     at EventEmitter._tickCallback (node.js:190:38)
22:05:33 web.1     | process terminated
22:05:33 system    | sending SIGTERM to all processes 
```

顺便说一句：错误消息是相同的，无论 web.js 是否存在，如果它被删除......这只会增加我的困惑。

顺便说一句 2：“工头检查”给了我“检测到有效的 procfile（网络）”

叹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:08:02.667

从这一行：

```
'2:05:33 web.1     | Error: Cannot find module '/media/fancystuff/web.js 
```

看起来在您调用的 Procfile 中的行尾有一个非打印字符，`node web.js`因为`'`放在模块名称字符串之后的字符最终出现在行首。

编辑 Procfile 并确保该特殊字符消失，您的问题可能会得到解决。我可以在我的 Debian 开发人员上复制它。`web.js`在 EOL 之前的行尾添加 <32 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T02:47:34.770

很可能`Procfile`是从附加回车符的不同操作系统中复制的，例如`\r\n`与工头不兼容的操作系统。只需删除 Procfile 中的尾随空格或字符并重新运行。或者最简单的方法是删除 `Procfile`并使用相同的操作系统创建

示例程序文件：

`web: node web.js`

并启动应用程序：

`ubuntu@yadayada:~/heroku/web$ foreman start`

# html - CSS：在 IE6 和 Firefox 中垂直显示的水平选项卡

> ID：11269219
> 
> 赞同：0
> 
> 时间：2012-06-29T21:29:57.830
> 
> 标签：html, css, tabs

我有一些在 jsfiddle 中完美运行的水平选项卡的 CSS 和 HTML。但是，在 Firefox 13 和 IE6（我最需要在其中工作的浏览器）中，选项卡都显示为垂直无序列表。

这是CSS：

```
.tablist
{
    list-style:none; 
    height:2em;
    padding:0; 
    margin:0; 
    border: none;
}
.tablist li
{
    display:inline-block;
    float: left;
}

.tablist li a
{
    float: left;
    margin-right:0.13em; 
    padding:0 1em;
    text-decoration:none;
    border:0.06em solid #000;
    border-bottom:0;
    font:bold 0.88em/2em arial,geneva,helvetica,sans-serif;
    color:#000;
    background-color:#ccc;

    /* CSS 3 elements */
    webkit-border-top-right-radius:0.50em;
    -webkit-border-top-left-radius:0.50em;
    -moz-border-radius-topright:0.50em;
    -moz-border-radius-topleft:0.50em;
    border-top-right-radius:0.50em;
    border-top-left-radius:0.50em;
}

.tablist li a:hover
{
    background:#3cf; 
    color:#fff;
    text-decoration:none;
}
.tablist li#current a
{
    background-color: #777;
    color: #fff;
}
.tablist li#current a:hover
{
    background: #39C;
} 
```

这是HTML：

```
<div class="tablist">
    <ul>
        <li><a href="#Dashboard"><strong>Tutorialsphere</strong></a></li>
        <li><a href="#"><strong>Photoshop</strong></a></li>
        <li><a href="#"><strong>Illustrator</strong></a></li>
        <li><a href="#"><strong>Fireworks</strong></a></li>
        <li><a href="#"><strong>Flash</strong></a></li>
        <li><a href="#"><strong>CSS</strong></a></li>
        <li><a href="#"><strong>PHP</strong></a></li>
    </ul>
</div> 
```

有一段时间，这在 Firefox**中**工作，我不记得有什么改变——但我必须有。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:31:36.340

IE6 不支持内联块。因此，它只是忽略您的显示属性并将其保留为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:59:53.467

我手边没有 IE6，但试试 display: block; float:left 到这个选择器：.tablist li a

# jquery - jQuery In Action 第二版代码示例不起作用

> ID：11269220
> 
> 赞同：2
> 
> 时间：2012-06-29T21:30:14.160
> 
> 标签：jquery, google-chrome-devtools

我最近购买了[jQuery In Action Second Edition](http://www.manning.com/bibeault2/)，我正在浏览从网站下载的[示例源代码](http://www.manning.com/bibeault2/jqia2.source.zip)（警告：zip 文件）。

当我打开第 2 章中的“jQuery 选择器实验室”示例页面时，我在 Chrome 或 Firefox 中看不到任何图像或 DOM 内容。在 Chrome 开发人员工具控制台中，我看到以下错误消息：

![Chrome 控制台错误消息](../Images/eed30154f75af8b1449a5cbd201e1b30.png)

有没有人遇到过这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:34:37.383

使用软件作为[MAMP](http://www.mamp.info/en/index.html)并将您的文件加载到应用程序的 httpd 文件夹中。然后使用 URL localhost/yourscript 调用您的脚本。它应该工作:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T21:23:23.037

如果您有权访问*命令行*并且拥有**python**或**ruby**​​ ，则只需在文件夹目录中运行以下命令之一即可启动本地服务器：

```
python -m SimpleHTTPServer 8000 
```

或者

```
ruby -run -e httpd . -p 8000 
```

从那里，只需在浏览器中输入：`http://localhost:8000`就可以了。

# ruby - 带有标头的 Ruby https POST

> ID：11269224
> 
> 赞同：33
> 
> 时间：2012-06-29T21:30:32.123
> 
> 标签：ruby, post, https, header

如何在带有 json 的 Ruby 中制作带有标题的 Https 帖子？

我试过了：

```
uri = URI.parse("https://...")
    https = Net::HTTP.new(uri.host,uri.port)
    req = Net::HTTP::Post.new(uri.path)
    req['foo'] = bar
    res = https.request(req)
puts res.body 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-02T20:56:20.013

问题是一个json。这解决了我的问题。无论如何，我的问题还不清楚，所以赏金给了 Juri

```
require 'uri'
require 'net/http'
require 'net/https'
require 'json'

@toSend = {
    "date" => "2012-07-02",
    "aaaa" => "bbbbb",
    "cccc" => "dddd"
}.to_json

uri = URI.parse("https:/...")
https = Net::HTTP.new(uri.host,uri.port)
https.use_ssl = true
req = Net::HTTP::Post.new(uri.path, initheader = {'Content-Type' =>'application/json'})
req['foo'] = 'bar'
req.body = "[ #{@toSend} ]"
res = https.request(req)
puts "Response #{res.code} #{res.message}: #{res.body}" 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-02T16:55:12.243

尝试：

```
require 'net/http'
require 'net/https'

uri = URI.parse("https://...")
https = Net::HTTP.new(uri.host,uri.port)
https.use_ssl = true
req = Net::HTTP::Post.new(uri.path)
req['foo'] = bar
res = https.request(req)
puts res.body 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-12-11T09:18:16.480

这是使用 Net::HTTP 的一种更简洁的方法。如果您只想获得响应并丢弃其他对象，这非常有用。

```
require 'net/http'
require 'json'

uri = URI("https://example.com/path")
res = Net::HTTP.start(uri.host, uri.port, use_ssl: true) do |http|
  req = Net::HTTP::Post.new(uri)
  req['Content-Type'] = 'application/json'
  # The body needs to be a JSON string, use whatever you know to parse Hash to JSON
  req.body = {a: 1}.to_json
  http.request(req)
end
# The "res" is what you need, get content from "res.body". It's a JSON string too. 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-16T06:00:37.893

一个默认安全的示例：

```
require 'net/http'
require 'net/https'

req = Net::HTTP::Post.new("/some/page.json", {'Content-Type' =>'application/json'})
req.body = your_post_body_json_or_whatever
http = Net::HTTP.new('www.example.com', 443)
http.use_ssl = true
http.ssl_version = :TLSv1 # ruby >= 2.0 supports :TLSv1_1 and :TLSv1_2.
# SSLv3 is broken at time of writing (POODLE), and it's old anyway.

http.verify_mode = OpenSSL::SSL::VERIFY_PEER # please don't use verify_none.

# if you want to verify a server is from a certain signing authority, 
# (self-signed certs, for example), do this:
http.ca_file = 'my-signing-authority.crt'
response = http.start {|http| http.request(req) } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-13T12:06:04.200

它的工作，你可以像这样传递数据和标题：

```
header = {header part}
data = {"a"=> "123"}
uri = URI.parse("https://anyurl.com")
https = Net::HTTP.new(uri.host,uri.port)
https.use_ssl = true
req = Net::HTTP::Post.new(uri.path, header)
req.body = data.to_json
res = https.request(req)

puts "Response #{res.code} #{res.message}: #{res.body}" 
```

# android - 如何创建活动视图

> ID：11269227
> 
> 赞同：4
> 
> 时间：2012-06-29T21:30:46.183
> 
> 标签：android, android-activity

所以我有这个扩展活动的类。但是我想在屏幕上画一些东西，所以我需要制作一个画布。但是我不能扩展 View，因为它已经是一项活动。我该怎么办？

我的活动有我用来做一些事情的 onClick 方法，但我想做的是在调用 onClick 方法时绘制一个简单的图像。

谢谢。

```
public class Stuff extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
(...)
}

@Override
public void onClick(View arg0) {
(...)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T21:46:43.307

**STEP 1：**通过 extends View 创建一个类：

```
public class DrawView extends View {  
    public float currentX=40;  
    public float currentY=50;  

    public DrawView(Context context) {  
        super(context);  
        // TODO Auto-generated constructor stub  
    }  

    @Override  
    protected void onDraw(Canvas canvas) {        
        super.onDraw(canvas);   
        Paint paint=new Paint();  
        paint.setColor(Color.RED);  
        canvas.drawCircle(currentX, currentY, 25, paint);  
    }  

} 
```

**第 2 步：**在您的材料活动中：

```
public class Stuff extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);  
setContentView(R.layout.main);  
LinearLayout root=(LinearLayout) findViewById(R.id.root); 
(...)
}

@Override
public void onClick(View arg0) {
//DRAW YOUR VIEW ON BUTTON CLICK
final DrawView drawView=new DrawView(this);  
drawView.setMinimumWidth(300);  
drawView.setMinimumHeight(500);
drawView.currentX=200;  
drawView.currentY=200;  
drawView.invalidate(); 
root.addView(drawView);
(...)
} 
```

**第 3 步：**您的 Activity main.xml 为：

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"  
    android:orientation="vertical"   
    android:background="#99FFCC"  
    android:id="@+id/root">  
</LinearLayout> 
```

最后在这里提问之前尝试在谷歌上搜索。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:41:40.037

您可以在您的活动中声明一个内部类，以便参考以下代码：

```
 public class GraphicsTest extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new GraphicsTestView(this));
  }

  private static class GraphicsTestView extends View
  {
    private ShapeDrawable mDrawable =
        new ShapeDrawable();
    /* Drawable's are objects which can be drawn on a Canvas
       ShapeDrawable is used to draw primitive shapes such as:
       ArcShape, OvalShape, PathShape, RectShape, RoundRectShape
       A Canvas is the object provided by Android on which
       a view tries to draw itself. In addition to ShapeDrawable,
       there are other subclasses of Drawable like PictureDrawable,
       RotateDrawable, ScaleDrawable, ClipDrawable,GradientDrawable, etc
       Some of these we will see when we consider the XML approach to
       graphics 
     */

    public GraphicsTestView (Context context) 
    {
       super(context);
       setFocusable(true);
       this.mDrawable.getPaint().setColor(0xFFFF0000); 
           //argb where a is alpha (transparency)
    }

    @Override
    protected void onDraw(Canvas canvas)
    /* the onDraw method is where a view draws itself
           this is our first time overriding it.
         */
    {
        int x = 10;
        int y = 10;
        int width = 300;
        int height = 50;
        this.mDrawable.setBounds(x, y, x + width, y + height);
        this.mDrawable.draw(canvas);

        ArcShape arc = new ArcShape(45,90); //start angle, sweep angle
        ShapeDrawable test = new ShapeDrawable(arc);

        Paint p = test.getPaint();
        p.setColor(0xFF00FFFF);

        p.setStyle(Paint.Style.STROKE);

        test.setBounds(10, 70, 310, 370); 
            //Top-Left, Bottom Right of rectangle to draw into
        test.draw(canvas);

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:35:22.313

您是说要在 XML 文件中获取布局视图吗？您可以在其中绘制视图，让您的代码调用它并查看它，然后将图像设置为在单击时响应。

在您的 onCreate 方法中，`super.onCreate(savedInstanceState);`添加此`setContentView(R.id.layoutname)`

例如

```
@Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    } 
```

至于 onClickListener，你可以设置视图来实现它，因为你已经在 Activity 中实现了它。

```
 // set this after "setContentView(R.layout.main);"
b1 = (Button)findViewById(R.id.main);
b1.setOnClickListener(this); 
```

# google-maps - 带有自定义图标的 Google Maps API v3 兴趣点

> ID：11269231
> 
> 赞同：8
> 
> 时间：2012-06-29T21:31:01.000
> 
> 标签：google-maps

我在我给定区域的学校、教堂和公园中有一个页面，但我想用 3 个不同的图标设置 3 个 POI 的样式。我搜索了谷歌甚至所有文档，但找不到答案。

```
var map;
var infowindow;

function initialize() {

  // Center of Map
  var centerLatlng = new google.maps.LatLng(29.745376, -95.380125);

  // Marker Icons Declaration
  var icon = new google.maps.MarkerImage("smLinks-twitter.png", null, null, new google.maps.Point(41,47));

  // Map Options
  var myOptions = {
    zoom: 16,
    center: centerLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    icons: icon 
  };

  // Draw the map
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  // Marker Icons Implementation
  markers = new google.maps.Marker({ 
    position: centerLatlng,
    map: map, 
    title: 'Center of Map', 
    icon: icon 
  });

  // Services: Places
  var request = {
    location: centerLatlng,
    radius: 800,
    types: ["school", "church", "park"]
  };
  infowindow = new google.maps.InfoWindow();
  var service = new google.maps.places.PlacesService(map);
  service.search(request, callback);

} // function initialize()

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      createMarker(results[i]);
    }
  }
}

function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location,
    icon: icon
  });
  google.maps.event.addListener(marker, 'mouseover', function() {
    infowindow.setContent(place.name + '<br/>' + place.vicinity + '<br/><img src="' + place.icon + '">');
    infowindow.open(map, this);
  });
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T22:50:55.380

请看我的快速而肮脏的[**演示**](http://jsfiddle.net/yV6xv/96/)。这个想法是使用`place.types`数组来确定您要添加到地图中的地点类型。我简单地为这个数组的第一项（通常是 2 或 3 项长）分配了一个标记，可能类似于：

```
["school", "establishment"] 
```

在某些情况下，“大学”出现在“学校”之前，因此使用了“大学”图标。您会想改进将类型与图标匹配的方式，即优先考虑学校或大学？也许遍历数组以寻找正确的类型。一个地方 (general_contractor) 不在我的图标列表中，因此默认的 pin 标记放置在那里。如果您检查`iconType`实际上是否具有所需的类型，则可以使用“默认”图标。我会把这些细节留给你=）

这是我用于图标的来源：[https ://sites.google.com/site/gmapsdevelopment/](https://sites.google.com/site/gmapsdevelopment/)

```
function createMarker(place) {
    var placeLoc = place.geometry.location;

    var iconType = {};
    iconType['school'] = "http://maps.google.com/mapfiles/kml/pal2/icon2.png";
    iconType['church'] = "http://maps.google.com/mapfiles/kml/pal2/icon11.png";
    iconType['park'] = "http://maps.google.com/mapfiles/kml/pal2/icon12.png";
    iconType['university'] = "http://maps.google.com/mapfiles/kml/pal2/icon14.png";

    var marker = new google.maps.Marker({
        map: map,
        position: place.geometry.location,
        icon: iconType[place.types[0]]
    });

    google.maps.event.addListener(marker, 'mouseover', function() {
        infowindow.setContent(place.name + '<br/>' + place.vicinity + '<br/><img src="' + place.icon + '">');
        infowindow.open(map, this);
    });
} 
```

或者，使用 switch 语句：

```
function createMarker(place) {
    var placeLoc = place.geometry.location;

    var iconUrl;
    switch (place.types[0]) {
    case 'school':
        iconUrl = "http://maps.google.com/mapfiles/kml/pal2/icon2.png";
        break;
    case 'church':
        iconUrl = "http://maps.google.com/mapfiles/kml/pal2/icon11.png";
        break;
    case 'park':
        iconUrl = "http://maps.google.com/mapfiles/kml/pal2/icon12.png";
        break;
    case 'university':
        iconUrl = "http://maps.google.com/mapfiles/kml/pal2/icon14.png";
        break;
    default:
        iconUrl = "http://maps.google.com/mapfiles/kml/pal4/icon39.png";
    }

    var marker = new google.maps.Marker({
        map: map,
        position: place.geometry.location,
        icon: iconUrl
    });

    google.maps.event.addListener(marker, 'mouseover', function() {
        infowindow.setContent(place.name + '<br/>' + place.vicinity + '<br/><img src="' + place.icon + '">');
        infowindow.open(map, this);
    });
} 
```

# c# - 如何在 C# 中为 Windows 应用程序提供导览（工具提示导览）

> ID：11269232
> 
> 赞同：2
> 
> 时间：2012-06-29T21:31:01.313
> 
> 标签：c#, tooltip

我正在寻找一种方法来改进我们应用程序的现有导览。我看过 googlemap 最新的“MapsGL！” 游览并希望为我们用 C# 编写的应用程序实现类似的东西。

用例是向我们的客户展示一系列靠近相应控件的工具提示，应单击这些工具提示以完成工作流程。

无论如何我们可以在 C# 中做到这一点吗？

[编辑]

我正在谈论的应用程序是 WINDOWS 应用程序而不是 WEB 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:39:14.313

```
Hello try with Tooltip property

<asp:webcontrol id="id" ToolTip="string" runat="server" />

For example button

<form runat="server">
<asp:Button id="button1" Text="Submit" runat="server"
ToolTip="This is an example-button" />
</form> 
```

# nfs - 在具有 2 个 NIC 的 ubuntu 上使用 NFS。客户端无法挂载目录

> ID：11269237
> 
> 赞同：-1
> 
> 时间：2012-06-29T21:31:26.823
> 
> 标签：nfs, nic

我已经被这个问题困扰了一段时间了。我有一台运行 ubuntu 的计算机（比如 A），并且有 2 个 NIC。一个网卡连接到家庭网络，另一个连接到隔离的专用网络。A创建的私有网络中还有另一台计算机（B）。它们都是linux。A 有一个 NFS 文件夹，我想将它安装在 B 上，但它不允许我和服务器抱怨权限被拒绝。防火墙都关闭了，我编辑了 fstab 和导出。有趣的是，当 B 在家庭网络上时，B 可以毫无问题地挂载 NFS 目录。此行为表明问题似乎存在于 NFS 服务器设置上。因为 NFS 服务器有 2 个 NIC，所以它似乎更喜欢使用连接到家庭网络而不是专用网络的 NIC。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:28:57.433

/etc/exports 文件中有什么？您应该允许使用 A 的私有接口的名称（或 IP）从私有网络安装 ant mount。假设您的计算机 a 有两个 IP 地址

家庭：192.168.1.1/24 私人：10.0.0.1/24

B 有 10.0.0.2/24

然后 /etc/exports 应该如下所示：

/home 10.0.0.2(rw,...)

在 B 上，您应该安装为：

挂载 10.0.0.1:/home /mnt

# sql - 跨表查询

> ID：11269244
> 
> 赞同：-1
> 
> 时间：2012-06-29T21:32:12.347
> 
> 标签：sql, ms-access, database-design

我很好奇如何从表格的“圆圈”中获取所需的数据。

我有 5 个表（和一些支持表）： 3 个由联结表连接的实体。所以一般模型是这样的：

*Cards*有很多*Budgets*，*Accounts*有很多*Budgets*，*Accounts*有很多*Cards*。

所以我的关系通过连接表形成一个圆圈，从卡到预算再到账户再到卡，直到今天，当我尝试使用所有 5 个表构建查询时，这种结构都工作得很好，并且注意到我不知道避免这种结构存在的模糊连接的方法。我认为创建 AccountBudget 和 CardBudget 表可能是一个更好的主意，但是由于它们都将定义完全相同类型的数据，因此一个表似乎更有效。

我试图获取的信息基本上是某种类型的所有卡的总预算限制，以及同一类型的所有帐户的总预算限制。我只是看错了这个问题吗？

```
// Card             Budget_Card       Budget        Budget_Account         Account
// -------          ---------         --------      --------------         ---------
// cardId------\    budgetId<---------budgetId------>budgetId         -----accountId--(to Card)->
// accountId    --->cardId            limit          accountId<------/      typeId
// (etc)                              typeId                             (etc)

//  (typeId in Budget is either 1 for an account budget or 2 for a card budget.) 
```

如您所见，它是一个圆圈。我想要完成的是返回一行，其中包含两列：where`Budget.limit`中记录的总和，以及属于同一类型的 s 中的所有行的总和。`Account``typeId = 1``Budget.limit``Card``Account`

根据建议，我实际上可以从联合中获取我需要的数据，但如果数据不在两个单独的列中，这对我没有用：

```
SELECT DISTINCTROW Sum(Budget.limit) AS SumOfLimit
FROM (Account RIGHT JOIN Card ON Account.accountId = Card.accountId)
RIGHT JOIN (Budget LEFT JOIN Budget_Card ON Budget.budgetID = Budget_Card.budgetId) ON Card.cardId = Budget_Card.cardId
GROUP BY Budget.typeId, Budget.quarterId, Account.typeId
HAVING (((Budget.typeId)=2) AND ((Budget.quarterId)=[@quarterId]) AND ((Account.typeId)=[@accountType]))

UNION SELECT DISTINCTROW Sum(Budget.limit) AS SumOfLimit
FROM Budget LEFT JOIN (Account RIGHT JOIN Budget_Account ON Account.accountId = Budget_Account.accountId) ON Budget.budgetID = Budget_Account.budgetId
GROUP BY Budget.typeId, Budget.quarterId, Account.typeId
HAVING (((Budget.typeId)=1) AND ((Budget.quarterId)=[@quarterId]) AND ((Account.typeId)=[@accountType])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:44:41.920

所以，如果我理解正确，您已经使用相同的名称制作了单独的列标题，因此您的数据会因为信息需要分开而出现偏差？如果是这种情况，我建议按照您的建议更改列标题，或者将两个查询链接在一起。通过查询相同的标记名称来连接数据将组合结果。如果您想指定某些内容，为列标题创建单独的名称总是一个好主意。

下面是使用SQL查询多表的解释：[http ://www.techrepublic.com/article/sql-basics-query-multiple-tables/1050307](http://www.techrepublic.com/article/sql-basics-query-multiple-tables/1050307)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:49:48.973

首先查询 Cards，然后与 Accounts 查询合并

尽管将卡与帐户相关联然后只有帐户预算会更容易，但是我不知道这是否适用于您的架构

# emacs - 如何更改 Emacs 可用的堆栈大小？

> ID：11269247
> 
> 赞同：6
> 
> 时间：2012-06-29T21:32:43.600
> 
> 标签：emacs, elisp

当我使用相对较大的 TAGS 文件运行*anything-c-etags-select*命令时，我总是会收到错误消息，例如Emacs 上的迷你缓冲区内的正则*表达式匹配器中的堆栈溢出。*在`*Messages*`缓冲区中，出现如下日志消息：

```
File TAGS is large (9MB), really open? (y or n) 
Loading tag file...70%
and: Stack overflow in regexp matcher 
```

似乎 Emacs 没有足够的堆栈大小来读取整个标签数据。有没有办法增加 Emacs 的堆栈大小？

我用 2 个版本的 Emacs 试过这个：

*   Emacs Mac OS X 24.1（通用二进制）
*   适用于 Mac OS X 23.4 的 Emacs（通用二进制）

但是，他们都显示了相同的错误消息。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:35:48.557

可能为您提供简单的解决方法：

> *   [http://www.emacswiki.org/emacs/MultilineRegexp](http://www.emacswiki.org/emacs/MultilineRegexp)
> 
> 更好的是：[\0-\377[:nonascii:]]* 避免了“正则表达式匹配器中的堆栈溢出”对于大文本，例如 > 34k。

...和/或...

> *   [http://www.svi.nl/EmacsProgrammingTips](http://www.svi.nl/EmacsProgrammingTips)
> 
> 我的标签表位于不同的位置，具体取决于我正在使用的代码。我发现让环境变量 $DEVELOP 指向我正在工作的目录很容易，该目录具有 Emacs 的 TAGS 和 vi 的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:27:38.190

我确认如果*字符串匹配*函数的第二个参数太大，该函数无法处理该参数。我为函数添加了一个限制，如下所示：

```
$ git diff
diff --git a/lisp/anything/anything-config.el b/lisp/anything/anything-config.el
index 23f00e5..cee5e13 100644
--- a/lisp/anything/anything-config.el
+++ b/lisp/anything/anything-config.el
@@ -7001,7 +7001,7 @@ If not found in CURRENT-DIR search in upper directory."
                        (anything-aif (string-match "\177" i)
                            (substring i 0 it)
                          i))
-           do (cond ((and elm (string-match "^\\(.+\\),[0-9]+" elm))
+           do (cond ((and elm (< (length elm) 2000) (string-match "^\\(.+\\),[0-9]+" elm))
                      (setq fname (match-string 1 elm)))
                     (elm (setq cand (concat fname ": " elm)))
                     (t (setq cand nil))) 
```

我认为这是一种快速而肮脏的 hack，但它现在运行良好。

# apache-flex - 鼠标悬停时自定义下拉

> ID：11269252
> 
> 赞同：0
> 
> 时间：2012-06-29T21:32:58.713
> 
> 标签：apache-flex

我正在制作一个自定义组件，在您将鼠标悬停在用户名上后会显示一个小下拉区域。我正在使用两种状态，向上和悬停来切换我的下拉框。

我的问题是它认为我在离开`Group`用户名后离开了组件级别。然后第二级组（我的下拉菜单）消失了。

我尝试在鼠标悬停功能中将事件处理程序重新附加到我的组件级别`Group`，`callLater`但这没有用。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         mouseOver="groupLogIn_mouseOverHandler(event)" 
         mouseOut="groupLogIn_mouseOutHandler(event)"
        >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import spark.skins.SparkSkin;
            protected function groupLogIn_mouseOverHandler(event:MouseEvent):void
            {

                this.currentState = "hover";
            }

            protected function groupLogIn_mouseOutHandler(event:MouseEvent):void
            {

                this.currentState = "up"
            }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="up"/>
        <s:State name="hover"/>
    </s:states>

    <s:Label id="lblUsername" color="0xffffff" fontSize="14" right="18" top="5"/>

    <s:Group  includeIn="hover" width="160" height="110" top="20" right="0" >
        <s:Rect top="0" right="0" bottom="0" left="0">
            <s:fill>
                <s:SolidColor color="0x1a1a1a"/>
            </s:fill>
        </s:Rect>
    </s:Group>
</s:Group> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:15:20.683

您的鼠标事件需要一个“命中区”。现在你的部分组件是完全透明的。当鼠标经过透明区域时，触发 MOUSE_OUT 事件。（当我说“透明”时，µi 实际上的意思是那里根本什么都没有）。

幸运的是，这很容易解决：只需在其他组件下方添加一个覆盖整个区域的 Rect 并将其设置`alpha`为`0`. 这使得 Rect 对用户不可见，但它仍然可以对鼠标事件做出反应。

```
<s:Rect id="hitzone" top="0" right="0" bottom="0" left="0">
   <s:fill>
       <s:SolidColor alpha="0" />
   </s:fill>
</s:Rect>

<s:Label id="lblUsername" />

... 
```

# javascript - 如何确定动画精灵何时到达某个点？

> ID：11269253
> 
> 赞同：0
> 
> 时间：2012-06-29T21:33:03.443
> 
> 标签：javascript, algorithm, function, math

我有一个 Javascript 中的 2D 动画，我需要一个精灵以设定的速度和方向从一个点 (x1, y1) 移动到另一个点 (x2, y2)。例如，

```
function update(speedX, speedY){
    x1 += speedX;
    y1 += speedY;
    if("(x1, y1) reach (x2, y2)"){
        // do other stuff
    }
} 
```

在大多数情况下，speedX 和 speedY 不相等，它们也不会均匀地影响每个轴所需的行进距离。我使用切线函数计算 speedX 和 speedY 值，以计算给定速度和角度的必要速度。

我的问题是，有没有一种算法可以做到这一点？我更喜欢高效的东西，因为这必须每秒完成 30 次，而且它是浮点加法！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:46:38.050

通常（我过去开发过一些游戏，没什么特别的顺便说一句）**我曾经将我的精灵视为矩形**，然后我使用一个非常简单的公式检查两个精灵的重叠（看看[这个非常好的解释](http://www.leetcode.com/2011/05/determine-if-two-rectangles-overlap.html)）。

**假设您必须检查 point 和 rectangle 之间的碰撞**。您可以应用相同的简化公式来检查该点是否位于矩形区域之间。在这种情况下，[请阅读此处](http://www.leetcode.com/2010/04/how-to-determine-if-point-is-inside.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:28:41.397

解决方案：

好的，通过一些工作我想通了。首先，我定义了一个函数

```
function getSign(val) { ... } 
```

根据传入的数字分别是负数、0 还是正数，它只返回 -1、0 或 1。然后，我在开始时做了以下事情（在任何更新发生之前）：

```
var xSign = getSign(x1-x2);
var ySign = getSign(y1-y2); 
```

最后，要检查该点当前是否位于或刚刚超过目标 (x2, y2)，只需检查以下代码：

```
function update(speedX, speedY){
    x1 += speedX;
    x2 += speedY;
    var curXsign = getSign(x1-x2);
    var curYsign = getSign(y1-y2);
    if( curXsign != xSign || curYsign != ySign ||
        (curXsign == 0 && curYsign == 0)){
            // do other stuff
    }
} 
```

基本上，如果 X 或 Y 之间的相对矢量距离的任何一个符号改变了符号，这意味着该轴经过了该点。如果 curXsign 和 curYsign 都为 0，这意味着它就在目标点上。这三种情况中的任何一种都意味着您正在或刚刚超过目标点。测试和工作。

另一种可能的解决方案是测试起点和当前位置之间的距离（curDist），并将其与起点和目标点之间的距离（dist）进行比较。一旦 curDist >= dist，你就知道你已经到达或超过了目标点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T21:01:27.870

它位于 VIC-II 的 $1F 端口中：

```
PRINT PEEK(53279) 
```

:-)

# database-design - 存储从多个来源收集的数据，并将一组指定为官方

> ID：11269254
> 
> 赞同：0
> 
> 时间：2012-06-29T21:33:09.603
> 
> 标签：database-design

我想设计一个名为 Fruit 的表，其中存储一种水果的名称、价格和来源。样本数据：

```
(Apple, 100c, SuperMarket1)
(Orange, 101c, SuperMarket1)
(Apple, 99c, SuperMarket2)
(Orange, 103c, SuperMarket2) 
```

我将 SuperMarket1 的 Orange 价格指定为官方价格，SuperMarket2 的 Apple 价格指定为官方价格。

目前，Source 不是表的主键，因此，所有非官方条目都不会显示。如果我想存储非官方价格，我需要将 Source 变成主键的一部分。要将条目指定为官方，然后我需要使用 Source=Official 输入额外的条目，或者创建一个指定为官方的列？

我的目标是：

1.  能够存储所有可用的价格，而不是必须在一张表中。
2.  官方条目的来源应该很容易识别。
3.  能够以最少的联接数查询官方。
4.  一种水果的官方价格不能超过一个。
5.  水果的集合并不小（水果只是一个例子）并且不断发展。维护一个额外的表来存储每种类型的官方 Source 可能是一个巨大的负担。

对干净的设计有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:46:22.793

看起来你需要类似的东西：

![在此处输入图像描述](../Images/339ada3008fd8225d9f345bc22176bb7.png)

注意：FRUIT.STORE_ID 在上述模型中可以为 NULL，以打破 FK 循环并允许在运行时实际插入新数据。如果您的 DBMS 支持延迟约束，则可以将此字段设为 NOT NULL（除非您实际上希望允许没有官方价格的水果）。

> 1) 能够存储所有可用的价格，而不是必须在一张表中。

在这个模型中，价格不是每个水果，而是**每个商店**的每个水果。

> 2) 官方条目的来源应易于识别。

这就是 FRUIT.STORE_ID 的用途。

> 3）能够查询官方的最小连接数。

```
SELECT * FROM FRUIT JOIN PRICE
    ON FRUIT.FRUIT_ID = PRICE.FRUIT_ID AND FRUIT.STORE_ID = PRICE.STORE_ID 
```

> 4) 一种水果的官方价格不能超过一个。

每个水果在 FRUIT 中由一行表示，并且 FRUIT.STORE_ID 每行不能存储多个值。

> 5）水果的集合并不小（水果只是一个例子）并且不断发展。维护一个额外的表来存储每种类型的官方 Source 可能是一个巨大的负担。

幸运的是，数据库非常擅长维护大量数据。

# git - 如何在 git 中按名称命名和检索存储？

> ID：11269256
> 
> 赞同：1921
> 
> 时间：2012-06-29T21:33:21.263
> 
> 标签：git, git-stash

我一直认为你可以通过做来给一个存储命名`git stash save stashname`，你以后可以通过做来申请`git stash apply stashname`。但似乎在这种情况下，所发生的一切`stashname`都将用作存储描述。

有没有办法真正命名一个藏匿处？如果没有，您会推荐什么来实现等效功能？本质上，我有一个小储藏室，我想定期申请，但不想总是寻找`git stash list`它的实际储藏室编号。

* * *

## 回答 #1

> 赞同：1503
> 
> 时间：2013-03-04T08:18:13.163

这就是你的做法：

```
git stash push -m "my_stash" 
```

`"my_stash"`存储名称在哪里。

一些更有用的事情要知道：所有的存储都存储在一个堆栈中。类型：

```
git stash list 
```

这将列出你所有的藏匿处。

要应用存储并将其从存储堆栈中删除，请键入：

```
git stash pop stash@{n} 
```

要应用存储并将其保存在存储堆栈中，请键入：

```
git stash apply stash@{n} 
```

`n`隐藏更改的索引在哪里。

请注意，您可以使用存储名称应用存储并将其保存在堆栈中：

```
git stash apply my_stash_name 
```

* * *

## 回答 #2

> 赞同：633
> 
> 时间：2018-03-29T15:08:43.767

`git stash save`自 2.15.x/2.16 起已**弃用**，您可以使用`git stash push -m "message"`

你可以像这样使用它：

`git stash push -m "message"`

其中“消息”是您对该存储的注释。

为了检索存储，您可以使用：`git stash list`. 这将输出一个这样的列表，例如：

```
stash@{0}: On develop: perf-spike
stash@{1}: On develop: node v10 
```

然后你只需使用`apply`给它`stash@{index}`：

```
git stash apply stash@{1} 
```

*参考* [git stash 手册页](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-push-p--patch-k--no-keep-index-u--include-untracked-a--all-q--quiet-m--messageltmessagegt--ltpathspecgt82308203)

* * *

## 回答 #3

> 赞同：187
> 
> 时间：2017-11-10T16:06:23.897

如果您只是在寻找一种轻量级的方法来保存当前工作副本的部分或全部更改，然后在以后随意重新应用它们，请考虑使用补丁文件：

```
# save your working copy changes
git diff > some.patch

# re-apply it later
git apply some.patch 
```

时不时地我想知道我是否应该为此使用藏匿处，然后我看到上面的疯狂之类的事情，我对我正在做的事情感到满意:)

* * *

## 回答 #4

> 赞同：131
> 
> 时间：2012-06-29T22:34:19.220

如果你觉得它足够重要，你可以把一个 stash 变成一个分支：

```
git stash branch <branchname> [<stash>] 
```

从手册页：

这将创建并签出一个名为`<branchname>`从`<stash>`最初创建的提交开始的新分支，将记录的更改应用`<stash>`到新的工作树和索引，然后删除`<stash>`成功完成的 if。如果没有`<stash>`给出，则应用最新的。

`git stash save`如果您运行的分支发生了足够的变化，以至于 git stash apply 由于冲突而失败，这将很有用。由于 stash 应用在 git stash 运行时的 HEAD 提交之上，因此它恢复了最初的隐藏状态，没有冲突。

您可以稍后将这个新分支重新定位到其他地方，该地方是您藏匿时所在位置的后代。

* * *

## 回答 #5

> 赞同：59
> 
> 时间：2012-06-29T21:39:34.260

藏匿处并不意味着像你想要的那样永久存在。在提交时使用标签可能会更好。构建你想要隐藏的东西。做出承诺。为该提交创建一个标签。然后将您的分支回滚到`HEAD^`. 现在，当您想重新应用该存储时，您可以使用`git cherry-pick -n tagname`( `-n`is `--no-commit`)。

* * *

## 回答 #6

> 赞同：55
> 
> 时间：2020-06-04T12:24:27.647

所以，我不确定为什么这个话题会引起如此多的恐慌。我可以用 a和 deprecated[命名 a`git stash`](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/How-to-use-a-git-stash-name-for-an-easy-pop-or-apply)，并且可以使用正则表达式将其拉回 a ：`push``save``apply`

## git stash 方法使用一个名字来申请

```
$ git stash push -m "john-hancock"

$ git stash apply stash^{/john-hancock} 
```

正如之前提到的，该`save`命令已被弃用，但它仍然有效，因此您可以在无法通过`push`调用更新它们的旧系统上使用它。与`push`命令不同，`-m`开关不需要`save`.

```
// save is deprecated but still functional  
$ git stash save john-hancock 
```

这是 Git 2.2 和 Windows 10。

## 视觉证明

这是一个漂亮的动画 GIF，演示了这个过程。

[![动画 GIF 显示 git stash apply 使用可识别的名称。](../Images/ddc6d4a6403430e048dea3c2985c1a22.png)](https://i.stack.imgur.com/0yky1.gif)

## 事件顺序

GIF 运行很快，但如果你看，过程是这样的：

1.  该`ls`命令显示目录中的 4 个文件
2.  `touch example.html`添加第 5 个文件
3.  `git stash push -m "john-hancock" -a`（`-a`包括未跟踪的文件）
4.  该`ls`命令在存储后显示 4 个文件，这意味着存储和隐式硬重置有效
5.  `git stash apply stash^{/john-hancock}`运行
6.  该`ls`命令列出了 5 个文件，显示*example.html*文件被带回，这意味着该`git stash apply`命令有效。

## 这甚至有意义吗？

坦率地说，我不确定这种方法的好处是什么。给存储命名是有价值的，但不是检索。也许编写[搁置和取消搁置](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/How-to-git-shelve-changes-and-save-local-files-with-stash)过程的脚本会有所帮助，但仅按名称弹出一个存储仍然更容易。

```
$ git stash pop 3
$ git stash apply 3 
```

这对我来说看起来比正则表达式容易得多。

* * *

## 回答 #7

> 赞同：53
> 
> 时间：2019-09-05T13:40:46.643

用来`git stash push -m aNameForYourStash`保存它。然后用于`git stash list`了解您要应用**的存储的索引。**然后使用`git stash pop --index 0`弹出存储并应用它。

注意：我使用的是*git 版本 2.21.0.windows.1*

* * *

## 回答 #8

> 赞同：49
> 
> 时间：2018-06-06T18:53:14.397

我的`.zshrc`文件中有这两个函数：

```
function gitstash() {
    git stash push -m "zsh_stash_name_$1"
}

function gitstashapply() {
    git stash apply $(git stash list | grep "zsh_stash_name_$1" | cut -d: -f1)
} 
```

以这种方式使用它们：

```
gitstash nice

gitstashapply nice 
```

* * *

## 回答 #9

> 赞同：36
> 
> 时间：2019-05-07T09:40:23.447

那这个呢？

```
git stash save stashname
git stash apply stash^{/stashname} 
```

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2021-09-23T11:37:22.740

### 用名字保存一个 git stash

```
$ git stash push -m "say-my-name" 
```

### 按名称执行 git stash apply

```
$ git stash apply stash^{/say-my-name} 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2021-10-04T13:43:36.680

Stash 可以使用以下命令**自定义注释。**

```
PS D:\git-example> git stash -m "your comment" 
```

**列出**藏匿处

```
PS D:\git-exapmle> git stash list

stash@{0}: On master: first stash
stash@{1}: On master: second stash 
```

我们可以选择任何存储，我们必须通过 stash@{x}，下面我选择第二个存储，即 1。

```
PS D:\git-example> git stash pop 1 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2013-11-26T22:51:49.507

### 别名

`sapply = "!f() { git stash apply \"$(git stash list | awk -F: --posix -vpat=\"$*\" \"$ 0 ~ pat {print $ 1; exit}\")\"; }; f"`

### 用法

`git sapply "<regex>"`

*   与适用于 Windows 的 Git 兼容

*编辑：我坚持我原来的解决方案，但我明白为什么大多数人更喜欢 Etan Reisner 的版本（上图）。所以只是为了记录：*

```
sapply = "!f() { git stash apply \"$(git stash list | grep -E \"$*\" | awk \"{ print $ 1; }\" | sed -n \"s/://;1p\")\"; }; f" 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2018-08-09T20:58:57.650

不幸的是，`git stash apply stash^{/<regex>}`它不起作用（它实际上并没有搜索存储列表，请参阅[接受的答案](https://stackoverflow.com/a/11688523/539149)下的评论）。

`git stash list`以下是通过正则表达式搜索以查找第一个（最近的）`stash@{<n>}`然后将其传递给的插入式替换`git stash <command>`：

```
# standalone (replace <stash_name> with your regex)
(n=$(git stash list --max-count=1 --grep=<stash_name> | cut -f1 -d":") ; if [[ -n "$n" ]] ; then git stash show "$n" ; else echo "Error: No stash matches" ; return 1 ; fi)
(n=$(git stash list --max-count=1 --grep=<stash_name> | cut -f1 -d":") ; if [[ -n "$n" ]] ; then git stash apply "$n" ; else echo "Error: No stash matches" ; return 1 ; fi) 
```

```
# ~/.gitconfig
[alias]
  sshow = "!f() { n=$(git stash list --max-count=1 --grep=$1 | cut -f1 -d":") ; if [[ -n "$n" ]] ; then git stash show "$n" ; else echo "Error: No stash matches $1" ; return 1 ; fi }; f"
  sapply = "!f() { n=$(git stash list --max-count=1 --grep=$1 | cut -f1 -d":") ; if [[ -n "$n" ]] ; then git stash apply "$n" ; else echo "Error: No stash matches $1" ; return 1 ; fi }; f"

# usage:

$ git sshow my_stash
 myfile.txt | 1 +
 1 file changed, 1 insertion(+)

$ git sapply my_stash
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

    modified:   myfile.txt

no changes added to commit (use "git add" and/or "git commit -a") 
```

请注意，将返回正确的结果代码，以便您可以在其他脚本中使用这些命令。这可以在运行命令后验证：

```
echo $? 
```

请注意[变量扩展漏洞](https://unix.stackexchange.com/questions/171346/security-implications-of-forgetting-to-quote-a-variable-in-bash-posix-shells)，因为我不确定该`--grep=$1`部分。也许应该是`--grep="$1"`，但我不确定这是否会干扰正则表达式分隔符（我愿意接受建议）。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2014-08-22T17:00:11.577

**别名** 对于类 Unix 系统，这可能是一种更直接的语法，无需封装在函数中。将以下内容添加到 [alias] 下的 ~/.gitconfig

```
sshow = !sh -c 'git stash show stash^{/$*} -p' -
sapply = !sh -c 'git stash apply stash^{/$*}' -
ssave = !sh -c 'git stash save "${1}"' - 
```

用法：sapply*正则表达式*

示例： git sshow MySecretStash

最后的连字符表示从标准输入中获取输入。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2018-01-11T01:30:02.457

这个答案很大程度上归功于 Klemen Slavič。我本来只是对接受的答案发表评论，但我还没有足够的代表:(

您还可以添加一个 git 别名来查找 stash ref 并在其他别名中使用它来显示、应用、删除等。

```
[alias]
    sgrep = "!f() { ref=$(git --no-pager stash list | grep "$1" | cut -d: -f1 | head -n1); echo ${ref:-<no_match>}; }; f"
    sshow = "!f() { git stash show $(git sgrep "$1") -p; }; f"
    sapply = "!f() { git stash apply $(git sgrep "$1"); }; f"
    sdrop = "!f() { git stash drop $(git sgrep "$1"); }; f" 
```

请注意，该`ref=$( ... ); echo ${ref:-<no_match>};`模式的原因是不返回空白字符串，这将导致 sshow、sapply 和 sdrop 以最新的存储为目标，而不是像预期的那样失败。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-02-19T12:56:59.003

使用一个小的 bash 脚本来查找存储的数量。称之为“gitapply”：

```
NAME="$1"
if [[ -z "$NAME" ]]; then echo "usage: gitapply [name]"; exit; fi
git stash apply $(git stash list | grep "$NAME" | cut -d: -f1) 
```

用法：

```
gitapply foo 
```

...其中 foo 是您想要的存储名称的子字符串。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2017-06-08T15:56:03.283

用来`git stash save NAME`保存。

然后...您可以使用此脚本来选择要应用（或弹出）的脚本：

```
#!/usr/bin/env ruby
#git-stash-pick by Dan Rosenstark

# can take a command, default is apply
command = ARGV[0]
command = "apply" if !command
ARGV.clear

stashes = []
stashNames = []
`git stash list`.split("\n").each_with_index { |line, index|
    lineSplit = line.split(": ");
    puts "#{index+1}. #{lineSplit[2]}"
    stashes[index] = lineSplit[0]
    stashNames[index] = lineSplit[2]
}
print "Choose Stash or ENTER to exit: "
input = gets.chomp
if input.to_i.to_s == input
    realIndex = input.to_i - 1
    puts "\n\nDoing #{command} to #{stashNames[realIndex]}\n\n"
    puts `git stash #{command} #{stashes[realIndex]}`
end 
```

我喜欢能够看到藏匿处的名称并进行选择。我也使用 Zshell，坦率地说不知道如何使用上面的一些 Bash 别名；）

注意：正如凯文所说，[你应该使用标签和樱桃挑选。](https://stackoverflow.com/a/11269321/8047)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2021-12-20T09:05:37.567

这是我的社区别名：`wip`和`wip-apply`。当您`git wip`还存储未跟踪的文件并返回到先前的提交状态时。

```
git config --global alias.wip '!f() { git stash save $1 -u ; }; f'       

git config --global alias.wip-apply '!f() { temp=$(git stash list | cut -d ':' -f 3 | grep -n -w $1 | cut -d ':' -f 1) ; stashnum=$((temp-1)) ; stashname=$(echo stash@{$stashnum}) ; git stash apply $stashname ; }; f' 
```

用法：

```
git wip "featureA"
git wip-apply "featureA" 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-08-31T12:08:25.400

这里有很多答案，但我相信 OP 所追求的所需等效功能并没有被任何一个答案或评论完全封装。

通过将`git add`、`git diff`、`git rm`和组合`git reset`到自定义 git 命令中，我们可以快速将更改聚合到补丁文件中，稍后我们可以通过名称轻松引用该文件：

[![git-bottle-demo](../Images/c86fc7f5add9426d3118563d4b13363d.png)](https://i.stack.imgur.com/d8Qan.gif)

以下是上述[自定义 git 命令](https://gitbetter.substack.com/p/automate-repetitive-tasks-with-custom)中使用的命令（也可[作为 gist](https://gist.github.com/GrayedFox/a191e201620bb4adce226dc11b947ae2)使用） -**请注意使用`--hard`标志**将重置您当前的分支以及删除对本地文件的所有更改：

```
#!/usr/bin/env bash

if [ $# -eq 1 ] ; then
  NAME=$1
else
  echo "Please pass exactly one argument, which is the name of the patch file"
  exit 1
fi

git add .

# if previous patch file with the same name exists untrack it
if [ -f "$NAME.patch" ] ; then
  git rm --cached $NAME.patch
fi

# warning: this will diff all changes into a file called NAME.patch and do a hard reset of the current branch

git diff --staged > $NAME.patch
git reset --hard $HEAD 
```

*   您现在可以简单`git bottle hello`地创建一个`hello.patch`文件。
*   应用它`git apply hello.patch`

诀窍是首先跟踪所有文件，以便我们可以利用 diff 命令的[暂存（或缓存）选项](https://git-scm.com/docs/git-diff#Documentation/git-diff.txt-emgitdiffemltoptionsgt--cached--merge-baseltcommitgt--ltpathgt82308203)。通过一些调整，您可以扩展自定义命令以在工作目录之外的某个位置输出补丁文件，即可能在硬盘驱动器上的某个补丁文件夹中，或者您可以更新`.gitignore`文件以忽略它。

应得的信用：[这个答案](https://stackoverflow.com/a/47226847/3249501)激发了我自己的灵感，它描述了补丁方法，但忽略了新文件中的更改将被排除在差异显示之外。

警告：由于此命令依赖于它，`git add`它不会限制 git 已经忽略的任何文件的更改。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-07-20T19:35:00.780

这是使用 PowerShell 完成此任务的一种方法：

```
<#
.SYNOPSIS
Restores (applies) a previously saved stash based on full or partial stash name.

.DESCRIPTION
Restores (applies) a previously saved stash based on full or partial stash name and then optionally drops the stash. Can be used regardless of whether "git stash save" was done or just "git stash". If no stash matches a message is given. If multiple stashes match a message is given along with matching stash info.

.PARAMETER message
A full or partial stash message name (see right side output of "git stash list"). Can also be "@stash{N}" where N is 0 based stash index.

.PARAMETER drop
If -drop is specified, the matching stash is dropped after being applied.

.EXAMPLE
Restore-Stash "Readme change"
Apply-Stash MyStashName
Apply-Stash MyStashName -drop
Apply-Stash "stash@{0}"
#>
function Restore-Stash  {
    [CmdletBinding()]
    [Alias("Apply-Stash")]
    PARAM (
        [Parameter(Mandatory=$true)] $message,         
        [switch]$drop
    )

    $stashId = $null

    if ($message -match "stash@{") {
        $stashId = $message
    }

    if (!$stashId) {
        $matches = git stash list | Where-Object { $_ -match $message }

        if (!$matches) {
            Write-Warning "No stashes found with message matching '$message' - check git stash list"
            return
        }

        if ($matches.Count -gt 1) {
            Write-Warning "Found $($matches.Count) matches for '$message'. Refine message or pass 'stash{@N}' to this function or git stash apply"
            return $matches
        }

        $parts = $matches -split ':'
        $stashId = $parts[0]
    }

    git stash apply ''$stashId''

    if ($drop) {
        git stash drop ''$stashId''
    }
} 
```

[更多细节在这里](https://geoffhudik.com/tech/2017/07/19/git-command-line-part-5/ "更多在这里")

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-12-26T08:18:02.110

在我的鱼壳里

```
function gsap
  git stash list | grep ": $argv" | tr -dc '0-9' | xargs git stash apply
end 
```

利用

gsap name_of_stash

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2019-01-31T20:53:54.690

`git stash apply`也适用于除`stash@{0}`. 所以你可以使用普通的**标签**来获得一个持久化的名字。这也有一个好处，就是你不会意外`git stash drop`或`git stash pop`它。

所以你可以像这样定义一个别名`pstash`（又名“持久存储”）：

```
git config --global alias.pstash '!f(){ git stash && git tag "$1" stash && git stash drop; }; f' 
```

现在您可以创建一个标记的存储：

```
git pstash x-important-stuff 
```

然后像往常一样再次`show`：`apply`

```
git stash show x-important-stuff
git stash apply x-important-stuff 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-11-29T13:45:31.547

迟到了，但如果使用 VSCode，一个快速的方法是打开命令面板（CTRL / CMD + SHIFT + P）并输入“Pop Stash”，您将能够按名称检索您的存储无需使用 git CLI

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-12-11T14:54:44.640

我不认为有办法 git pop 一个 stash 的名字。

我创建了一个 bash 函数来完成它。

```
#!/bin/bash

function gstashpop {
  IFS="
"
  [ -z "$1" ] && { echo "provide a stash name"; return; }
  index=$(git stash list | grep -e ': '"$1"'$' | cut -f1 -d:)
  [ "" == "$index" ] && { echo "stash name $1 not found"; return; }
  git stash apply "$index"
} 
```

使用示例：

```
[~/code/site] on master*
$ git stash push -m"here the stash name"
Saved working directory and index state On master: here the stash name

[~/code/site] on master
$ git stash list
stash@{0}: On master: here the stash name

[~/code/site] on master
$ gstashpop "here the stash name" 
```

我希望它有帮助！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2022-01-13T22:38:19.640

如果您使用的是 ZSH，则此别名组合非常致命：

```
zstyle ':completion:*' completer _expand_alias _complete _ignored
alias gs="git stash push -u -m "
alias gsp='git stash pop' 
```

基本上你可以使用 tab 来自动完成你的别名，然后你可以很容易地按名称命名和搜索你的 git stashes。此推送别名还将包括任何未跟踪的文件，我发现默认情况下这些文件很有用。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-09-10T11:58:54.417

对于除了存储创建之外的所有内容，我会通过引入[fzf](https://github.com/junegunn/fzf/)作为依赖项来提出另一种解决方案。我建议您花 5 分钟的时间来了解它，因为它总体上是极大的生产力助推器。

[无论如何，他们的示例页面](https://github.com/junegunn/fzf/wiki/examples#git)的相关摘录提供了存储搜索。更改 scriptlet 以添加其他功能（如存储应用程序或删除）非常容易：

```
fstash() {
    local out q k sha
    while out=$(
            git stash list --pretty="%C(yellow)%h %>(14)%Cgreen%cr %C(blue)%gs" |
            fzf --ansi --no-sort --query="$q" --print-query \
                --expect=ctrl-d,ctrl-b); do
        mapfile -t out <<< "$out"
        q="${out[0]}"
        k="${out[1]}"
        sha="${out[-1]}"
        sha="${sha%% *}"
        [[ -z "$sha" ]] && continue
        if [[ "$k" == 'ctrl-d' ]]; then
            git diff $sha
        elif [[ "$k" == 'ctrl-b' ]]; then
            git stash branch "stash-$sha" $sha
            break;
        else
            git stash show -p $sha
        fi
    done
} 
```

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2021-04-14T17:25:23.217

这是我做的一个快速设置，对我有用，希望它也对你有用：

假设我的 package.json 项目文件中有一个自定义/本地脚本，我不想推送到远程仓库

```
{
   // ... package.json stuff
   "scripts": {
       "custom": "ts-node a_ts_test_file.ts"
   }
} 
```

因此，当我想推送我的分支或类似的东西时，我决定存储这个更改，然后弹出存储直到我的下一个“git push”。

所以 ...

1.  您需要创建一个新的 git 别名：

```
# dev is the "stash tag"
# To stash current working directory
git config --global alias.sh "stash -m 'dev'" 
```

2.  您需要编辑您的`~.bashrz`，或者`~.zshrc`如果您使用的是 zsh 或 oh-my-zsh，请添加以下别名：

```
# Apply stash "tagged" $(X) where X is substring of "git stash list" output filtered by output that contains "dev".
# I didn't use git stash apply because "dev" tag isn't unique, so it's a need to pop the stash and ensure to create a new one alias set on first step
alias gitsh="git stash pop $(git stash list | grep 'dev' | cut -d ':' -f 1) || echo 'nope'" 
```

3.  享受

使用标签“dev”推送您的工作目录：`git sh` 从标签为“dev”的存储中提取您的隐藏更改：`sitsh`

（这是我在五分钟内制作的一个小脚本，对我有用，如果它失败了......修复它！）

# debugging - 为什么我无法调试 Microsoft Outlook？

> ID：11269259
> 
> 赞同：0
> 
> 时间：2012-06-29T21:33:31.353
> 
> 标签：debugging, outlook

好吧，现在是星期五，我刚刚在 MS-Outlook 中收到一条错误消息。然后它给了我一个选项，要么关闭程序，要么调试它。我勇敢地想，选择调试它：

那我等了2分钟。它说

OUTLOOK.EXE 中 0x76eb15de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

然后，在 MS Visual Studio 中，“没有可用的源 - 没有为任何调用堆栈帧加载符号”。

我如何弄清楚 OUTlook 发生了什么？如何让 Microsoft 知道我想调试 Outlook？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:40:16.390

所以显然我被禁止查看MS源代码，因此他们不会让我“真正”调试......

# javascript - 使用 jquery 将 JSON 数组从 jsp 传递到 javascript

> ID：11269261
> 
> 赞同：0
> 
> 时间：2012-06-29T21:33:46.223
> 
> 标签：javascript, jquery, json, jsp

我已经搜索了两天，并尝试了我认为的所有可能的事情。我使用 GSON 创建一个 JSON 数组。当我在通过 jquery 将其发送到 Javascript 之前打印出我的 json 字符串时，它看起来像这样：

```
[{"var1":"hi","var2":"this","var3":"is"}] 
```

在我看来很好。我尝试通过以下两种方式发送到 js：

```
String json = gson.toJson(googData, listType);
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().write(json); 
```

和

```
String json = gson.toJson(googData, listType);
<%= json %> 
```

这是我的js代码：

```
$.getJSON("testgoogle.jsp", function(json) {
    $.each (json, function(k, v) {
        alert(v.val1);
    });
}); 
```

很简单吧？我可以将其更改为 $.get 并查看字符串。如果我 alert(k) 它只提醒 0 一次。我怀疑我的 json 字符串传递了一些空格。当我警告从 jsp 返回的任何内容时，它在警告框中的显示低于说警告（“hi”）。你知道在哪里！是在警告框中，“嗨”是怎么在中间的！图片 好吧，当我从 jsp 发送 <%= "hi" %> 时，它低于 !。我将 <%= "hi" %> 一直移动到顶部，所以我的 jsp 看起来像：

```
<%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%= "hi" %> 
```

正如你所看到的，我正在抓住稻草。这在 ! 的底部返回了“hi”。我的 jsp 中的行越多，我将“hi”向下移动，它在我的警报框中越低。还有，很奇怪的事。如果我把它留在我的jsp的顶部：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

这实际上会在我的警报中打印出来。

如果您需要更多信息，请告诉我。

**解决方案：** 当密钥为 var1 时，我试图调用 val1。哇！我永远不会把所有这些时间拿回来；）正确的代码与上面的代码相同，除了 val1 应该是 var1。另外，我用 eval(json) 试过了，它仍然可以工作，仅供参考。感谢您尝试帮助大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:38:49.793

[$.getJSON()](http://api.jquery.com/jquery.getJSON/)

> 成功回调传递返回的数据，该数据通常是由 JSON 结构定义并使用 $.parseJSON() 方法解析的 JavaScript 对象或数组。它还传递了响应的文本状态。

您不必自己“解析”字符串，因为它已经被 jQuery 解析了

```
$.getJSON("testgoogle.jsp", function(json) {
    $.each (json, function(k, v) {
        alert(v.val1);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:40:40.300

尝试这个 ：

```
$.getJSON("testgoogle.jsp", function(json) {
$.each (json[0], function(k, v) {
    alert(v);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:37:11.850

In $.getJSON the `json` in `function(json) {` is alraedy a JavaScript object so you don't eval it

# c# - 突出显示列表框中的某些行

> ID：11269265
> 
> 赞同：0
> 
> 时间：2012-06-29T21:34:24.570
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我有一个使用高分数据源设置的列表框

```
public class HighScore
{
    public string Username {get;set;}
    public int Score{get;set}
}

var IList<HighScore> HighScores = getAllTheScores();
MyListbox.ItemsSource = HighScores; 
```

我想更改用户名属性等于当前登录用户（存储在 AppSettings 中）的任何行的背景颜色。我见过转换器，但这需要以某种方式获取当前登录的用户，这似乎不是转换器应该负责获取的东西。

我也可以迭代列表框项目，但从我所看到的情况来看，这是不建议的，我应该更喜欢绑定而不是钻入控件后面的代码。

任何关于如何最好地实现这一目标的建议都非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:36:51.953

两个建议。您已经提到了第一个，即使用 ValueConverter。如果可以从视图模型（推荐）访问值值，则很容易将其传递给 ValueConverter。如果它没有存储在视图模型中，那么只要命名正确，就不用担心从值转换器中获取它。

第二个建议是使用行为。行为将负责根据用户设置背景。我在这里没有看到比价值转换器有太多优势，除了它不是价值转换器的背面。它（几乎）会做同样的事情。总的来说，我会推荐一个价值转换器。易于实现，代码开销低，需要很少的 xaml。

# string - 使用动态编程查找字符串中最长的单词？

> ID：11269266
> 
> 赞同：1
> 
> 时间：2012-06-29T21:34:33.243
> 
> 标签：string, algorithm, dynamic, longest-substring

当我看到一个问题询问我是否可以从字符串中找到最长的单词（字符串没有空格，只有字符）时，我已经开始研究一些算法问题。经过一段时间的思考，我只是想确认我是否可以使用动态编程来解决类似于最大连续和问题的问题。在解析每个字符之后，我可以调用 isWord 方法（已经实现），然后如果它继续转到下一个字符并增加单词长度，如果不是，那么只需将计数器重置为零并开始从该索引中查找一个单词. 请让我知道这是否是一个好方法，否则请指导我有什么更好的方法来解决这个问题。

谢谢你们的帮助。

-维克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:42:21.737

该算法将无法正常工作。考虑以下字符串：

```
BENDOCRINE 
```

如果您从字符串的开头开始并在您还有一个单词时向前扫描，您会找到单词“BEND”，然后在该点之后重置字符串并从 O 开始。这里的正确答案是选择“内分泌”这个词要长得多。

如果您有一个静态字典，并且想从该字典中找到包含在文本字符串中的最长单词，您可能需要查看**[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)**，它将在文本字符串中找到一组字符串的每一个匹配项，并且这样做非常有效。您可以轻松修改算法，以便它随时跟踪它输出的最长单词，这样它就不会输出比目前找到的最长单词更短的字符串，在这种情况下，运行时间将为 O(n + m)，其中n 是要搜索的文本字符串的长度，m 是所有合法英语单词中的字符总数。此外，如果您提前进行 O(m) 预处理，那么从那时起，您可以在 O(n) 时间内找到给定字符串中最长的单词，其中 n 是字符串中的字符数。

（至于为什么它运行时间为 O(n + m)：通常运行时间是 O(n + m + z)，其中 z 是匹配的数量。如果你限制输出的匹配数量，那么你永远不会输出一个比目前最长的单词短，最多可以输出n个单词，因此运行时间为O(n + m + n) = O(n + m))。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:45:10.330

动态编程不适用于您的问题：

让 seq1 和 seq2 为 2 个字符序列

isWord(Concatenation(seq1, seq2)) 不能从 isWord(seq1) 和 isWord(seq2) 的值推断出来

# c++ - 禁用特定包含文件的警告

> ID：11269268
> 
> 赞同：0
> 
> 时间：2012-06-29T21:34:40.237
> 
> 标签：c++, g++, compiler-warnings, openni

我在 OS X 上使用 OpenNI，由于某种原因，它的`.h`文件到处都吐出很多警告，这很烦人。

有没有办法关闭 OpenNI 包含文件的所有警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:51:31.570

我发现我可以指定包含目录以`OpenNI`使用`-isystem`switch 而不是`-I`.

`-isystem`使 gcc 将包含目录视为系统目录，因此不会为它们生成任何警告。

# php - 故障排除“警告：mysqli_result::fetch_array() 期望参数 1 很长，给定对象”

> ID：11269269
> 
> 赞同：3
> 
> 时间：2012-06-29T21:34:42.160
> 
> 标签：php, mysqli

我得到的警告是：

> 警告：mysqli_result::fetch_array() 期望参数 1 很长，对象在...第 103 行给出。

我在第 103 行旁边发表了评论`while ($row = $result->fetch_array($result)) {`

问题 2：我可以将其中的任何内容存储在包含文件中还是应该存储？

问题 3：`$query`我可以将这些买方、卖方等中的任何一个存储在某个数组中吗？如何？

```
/* FETCH CONTACT INFORMATION */

$query = ("SELECT * FROM contacts WHERE contacttype IN ('Buyer','Seller','Buyer / Seller','Investor') AND leadstatus = 'New' ORDER BY date DESC");

$ID = $row ['ID'];     
$firstname = $row ['firstname'];     
$lastname = $row['lastname'];
$ID = $row['ID'];   
$partner  = $row['spousefirst'];   
$phonecell = $row['phonecell'];
$email = $row['email'];
$date = $row['date'];
$contacttype = $row['contacttype'];
$agentassigned = $row['agentassigned'];
$leadstatus = $row['leadstatus'];

$result = $mysqli->query($query) or die ("Error: ".mysqli_error($mysqli));

echo'
  <table class="results" id="results">
    <thead> 
      <tr> 
        <th width="10"><input type="checkbox" name="checkAll" id="checkAll" class="checkall" value="check all"></th>
        <th>NAME</td> 
        <th>PARTNER</td> 
        <th>PHONE</td> 
        <th>EMAIL</td> 
        <th>DATE</td> 
        <th>TYPE</td> 
        <th>AGENT</td> 
        <th>STATUS</td> 
        <th>NOTES</td> 
        <th>TASKS</td> 
        <th>&nbsp;</td>
       </tr> 
     </thead>';

while ($row = $result->fetch_array($result)) {  // THIS IS LINE 103

      echo'
     <tbody>       
       <tr>
        <td width="10"><input type="checkbox" name="" id="" value="'.$ID.'"></td>
        <td><a href="/backend/leads/view/?ID='.$ID.'"><strong>'.$firstname.' '.$lastname.'</strong></a></td>
        <td><a href="/backend/leads/view/?ID='. $ID.'">'.$partner.'</a></td>
        <td>'.$phonecell.'</td>
        <td><a href="mailto:'. $email.'">'.$email.'</a></td>
        <td>'.date("M jS, g:i A", strtotime($date)).'</td>
        <td>'.$contacttype.'</td>
        <td>'.$agentassigned.'</td>
        <td>'.$leadstatus.'</td>
        <td><a href="/backend/contacts/notes.php?ID='.$ID.'">View</a> +</td>
        <td><a href="/backend/contacts/todo.php?ID='.$ID.'">View</a> +</td>
        <td><a href="/backend/contacts/deletesuccess.php?ID='.$ID.'">D</a></td>
       </tr>
     </tbody>       
    </table>';

}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:40:33.217

在面向对象模式下，该参数`fetch_array()`指定获取类型 ( `MYSQLI_ASSOC, MYSQLI_NUM`)，并且不获取结果资源。

```
while ($row = $result->fetch_array(MYSQLI_ASSOC)) { 
```

然后，在您的循环中，我们假设您要使用来自`$row`变量而不是普通变量的键。将变量赋值从上面移到你的循环中。

```
while ($row = $result->fetch_array(MYSQLI_ASSOC)) {

  // Move these assignments into the loop so they are available to your
  // echo statement when constructing your <tbody>
  $ID = $row ['ID'];     
  $firstname = $row ['firstname'];     
  $lastname = $row['lastname'];
  $partner  = $row['spousefirst'];   
  $phonecell = $row['phonecell'];
  $email = $row['email'];
  $date = $row['date'];
  $contacttype = $row['contacttype'];
  $agentassigned = $row['agentassigned'];
  $leadstatus = $row['leadstatus'];

  echo'
 <tbody>       
   <tr>
    <td width="10"><input type="checkbox" name="" id="" value="'.$ID.'"></td>
    <td><a href="/backend/leads/view/?ID='.$ID.'"><strong>'.$firstname.' '.$lastname.'</strong></a></td>
    <td><a href="/backend/leads/view/?ID='. $ID.'">'.$partner.'</a></td>
    <td>'.$phonecell.'</td>
    <td><a href="mailto:'. $email.'">'.$email.'</a></td>
    <td>'.date("M jS, g:i A", strtotime($date)).'</td>
    <td>'.$contacttype.'</td>
    <td>'.$agentassigned.'</td>
    <td>'.$leadstatus.'</td>
    <td><a href="/backend/contacts/notes.php?ID='.$ID.'">View</a> +</td>
    <td><a href="/backend/contacts/todo.php?ID='.$ID.'">View</a> +</td>
    <td><a href="/backend/contacts/deletesuccess.php?ID='.$ID.'">D</a></td>
   </tr>
 </tbody>       
</table>';

} 
```

### 编辑

关于你的其他几个问题...

我会说将其存储在包含文件中并没有什么好处。它的代码不多，如果您不打算在其他地方重用它，那么将它移出此文件不会有任何好处。

您的查询是静态的，不使用任何 PHP 变量。因此，将它们存储在数组中也没有多大好处，这需要在 PHP 中进行额外的工作才能转换为 SQL。

```
$options = array('Buyer','Seller','Buyer / Seller','Investor');
// Join them into a string and quote both ends of it.
// If this includes any user input, you must call `$mysqli->real_escape_string()` on _each_ of them.
// Since in this one instance it is static in your code though without variables, that isn't necessary here
$options = "'" . implode("','", $options) . "'";
$query = ("SELECT * FROM contacts WHERE contacttype IN ($options) AND leadstatus = 'New' ORDER BY date DESC"); 
```

# python - Django：从数据库生成模型与从模型生成数据库

> ID：11269277
> 
> 赞同：0
> 
> 时间：2012-06-29T21:35:25.207
> 
> 标签：python, mysql, django, django-models, code-generation

我通过在 django 中创建一个“有趣”的网站来熟悉 MVC。我真的很喜欢 api 和 python 本身的很多特性。但我真正不喜欢的一件事是 django 鼓励您让它为您构建数据库。我很了解inspectDB，并且对使用它很感兴趣。

所以我的问题是，是否有充分的理由让我选择一种模型/数据库生成方法而不是另一种？我觉得用传统的 SQL 方式（我可以访问组合键）定义我的数据库要舒服得多。但我担心使用无法通过 Model api 获得的东西可能会在以后给我带来问题。比如组合键、medium_text等。

我正在使用 mysql 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:52:31.503

如果您正在开始一个新项目，请始终让 Django 生成表。Django 提供了使用预先存在的数据库来支持遗留数据或您无法直接控制数据库结构的情况的机制。*对于需要*它的人来说，这是 Django 的一个很好的特性，但它为开发人员创造了更多的工作，并打破了 Django 中的许多约定。

您仍然可以并且事实上我们鼓励您在事后添加额外的索引和任何其他可用的数据库特定*优化*。

# asp.net-mvc - asp .net mvc中的自定义网址

> ID：11269283
> 
> 赞同：1
> 
> 时间：2012-06-29T21:35:50.160
> 
> 标签：asp.net-mvc, url

我是 ASP.NET-MVC 的新手，我正在尝试创建一个简单的博客应用程序。我想为博客的详细信息页面使用自定义 url。

现在博客详细信息页面的 url 是标准的 'localhost/Blog/Details/3'，但我想实际使用 url 'localhost/Blog/2012/06/blog-title'，基本上使用'localhost/Blog/ {年}/{月}/{博客标题}'

我曾尝试在互联网上查看，但我不明白如何做到这一点，也无法获得关于如何做到这一点的简单教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:46:07.270

您必须映射自定义路线

```
routes.MapRoute(
                "Default", // Route name
                "Blog/{action}/{month}/{BlogTitle}", // URL with parameters
                new {controller ="MyController"}

            ); 
```

localhost/Blog/text/text/text 类型的任何 url 都将映射到此路由

此网址将调用 MyController.Action(month,BlogTitle)

确保首先放置限制性更强的路由，因为将考虑与 url 匹配的第一条路由（从上到下）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T04:56:20.407

您可以如下创建一条新路线`Global.asax.cs`，

```
routes.MapRoute(
   "Post",                                         // route-name
   "Blog/{year}/{month}/{BlogTitle}",              // format
   new { controller = "Books", action = "Post" },  // controller & action
   new { year = @"\d{4}", month = @"\d{2}" }       // constraints
); 
```

# python - Django throws a 500 error

> ID：11269287
> 
> 赞同：-1
> 
> 时间：2012-06-29T21:36:16.830
> 
> 标签：python, django, internal-server-error

Dear Python/Django expert,

Due to recent server migration, my python-powered django app throws a 500 page. The log file is listed below. Can you please give me some help in diagnosing this problem?

==========================

[haiyang@web aihaiyang]$ tail ~/logs/user/error_django_aihaiyang_log [Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] return callback(request, **param_dict), referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] File "/home/haiyang/webapps/django_aihaiyang/lib/python2.5/django/utils/decorators.py", line 93, in _wrapped_view, referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] response = view_func(request, *args, **kwargs), referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] File "/home/haiyang/webapps/django_aihaiyang/lib/python2.5/django/views/defaults.py", line 30, in server_error, referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] t = loader.get_template(template_name) # You need to create a 500.html template., referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] File "/home/haiyang/webapps/django_aihaiyang/lib/python2.5/django/template/loader.py", line 157, in get_template, referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] template, origin = find_template(template_name), referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] File "/home/haiyang/webapps/django_aihaiyang/lib/python2.5/django/template/loader.py", line 138, in find_template, referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] raise TemplateDoesNotExist(name), referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

[Fri Jun 29 17:25:57 2012] [error] [client 127.0.0.1] TemplateDoesNotExist: 500.html, referer: [http://aihaiyang.com/synlex/syntactic/](http://aihaiyang.com/synlex/syntactic/)

=========================

Thanks, Haiyang

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:43:06.153

您需要创建一个 500.html 模板并将其放在您的 template_dir [模板不存在：500.html](https://stackoverflow.com/questions/2822422/template-does-not-exist-500-html)

# installation - SQL Server CE 4.0 Installation problems

> ID：11269288
> 
> 赞同：0
> 
> 时间：2012-06-29T21:36:28.730
> 
> 标签：installation, sql-server-ce

I have downloaded the latest version of SQLServer CE 4.0 and am trying to install it. After downloading and saving it to my local machine I double-click on the EXE. Then it presents me with the "Do You Want to Run This File" dialog box to which I, of course, answer "yes".

That's it ... nothing else. I open up Task Manager to see if it is busy and I locate the "Image Name" - SSCERRuntime_x64ENU.exe*32 - and it's not doing anything. It is occupying a little memory (between 800K - 1400K) and is not using the CPU at all ... at all?

I have no idea why this would be happening and have run out of ideas. I ultimately kill the process and be on my way but I NEED SQL-CE 4.0 installed.

I am willing to try anything (within reason of course ;))

Running Windows 7 Enterprise x64.

Thanks, G

# c# - 如何重复从套接字读取？

> ID：11269291
> 
> 赞同：3
> 
> 时间：2012-06-29T21:37:02.140
> 
> 标签：c#, sockets

首先，我在 C# 中编码。我正在通过套接字将不同大小的数据写入设备。写入数据后，我想从套接字读取数据，因为一旦设备处理完所有数据，它就会写回错误代码/完成消息。目前我有这样的事情：

```
byte[] resultErrorCode = new byte[1];
resultErrorCode[0] = 255;

while (resultErrorCode[0] == 255)
{
    try
    {
        ReadFromSocket(ref resultErrorCode);
    }

    catch (Exception)
    {
    }
}
Console.WriteLine(ErrorList[resultErrorCode[0] - 48]); 
```

我`ReadFromSocket`在其他地方使用，所以我知道它工作正常。最终发生的是我连接的端口（在我的机器上）更改为随机端口。我认为这会导致另一端的固件连接不良。因此，当我在另一端写入数据时，它会尝试将数据写入我连接的原始端口，但是在尝试读取几次后，我这边的连接端口会发生变化。

如何在收到完成命令之前连续从套接字读取？如果我知道循环出了点问题，因为对于我最小的测试文件，它非常一致地需要 1 分 13 秒。我已经通过删除循环并将代码休眠 1 分 15 秒来测试代码。当它恢复时，它成功读取了我期望的完成命令。有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:13:03.043

您应该拥有一个单独的线程，它将充当您的外部硬件的驱动程序。该线程将接收所有数据，对其进行解析并将适当的消息传输到应用程序的其余部分。这部分代码将使您了解如何从硬件接收和解析数据。

```
 public void ContinuousReceive(){
    byte[] buffer = new byte[1024];
    bool terminationCodeReceived = false;
    while(!terminationCodeReceived){
      try{
          if(server.Receive(buffer)>0){
             // We got something
             // Parse the received data and check if the termination code
             // is received or not
          }
      }catch (SocketException e){
          Console.WriteLine("Oops! Something bad happened:" + e.Message);
      }
    }
  } 
```

**笔记：**

1.  如果你想在你的机器上打开一个特定的端口（一些外部硬件被配置为与一个预定义的端口通信）那么你应该在创建你的套接字时指定
2.  在您想要停止您的应用程序或外部硬件 API 需要之前，切勿关闭您的套接字。保持套接字打开将解决随机端口更改
3.  `Thread.Sleep`在处理外部硬件时使用它不是一个好主意。如果可能，您应该使用事件（在 RS232 连接的情况下）或在单独的线程上阻塞调用，就像上面代码中的情况一样。

# ruby-on-rails - 在 Sass 中访问 Rails.env

> ID：11269292
> 
> 赞同：4
> 
> 时间：2012-06-29T21:37:08.320
> 
> 标签：ruby-on-rails, sass

是否可以在 Sass 文件中访问 Rails.env？

我正在尝试这样做：

```
$url: <%= Rails.env.production? ? '//foo.com' : '//localhost:3000' %>

@font-face {
  src: url("#{$url}/font/fontawesome-webfont.eot");
} 
```

但这给出了：

> “$url:”之后的无效 CSS：预期的表达式（例如 1px，粗体）是“<%= Rails.env.p...”

我尝试过使用不同的文件扩展名，例如`css.scss.erb`等，但没有任何乐趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T21:48:42.487

确保它是`name.css.scss.erb`

另外，这是一个很好的答案[https://stackoverflow.com/a/7653451/643500](https://stackoverflow.com/a/7653451/643500)

# dependency-injection - 对使用 IOC 容器、服务定位器和工厂感到困惑

> ID：11269293
> 
> 赞同：4
> 
> 时间：2012-06-29T21:37:09.603
> 
> 标签：dependency-injection, inversion-of-control, ioc-container, anti-patterns, service-locator

假设我有一个`BaseForm`依赖于`ILogger`或`IResourceManager`或类似的东西。目前，它使用服务定位器解决了所需服务的正确实现，我知道这是一种反模式。

*   使用构造函数注入是解决这种依赖关系的正确方法吗？
*   我是否必须`BaseForm`在容器中注册我的（及其派生类型）才能创建具有已解析依赖项的实例？这不是把一切都复杂化了吗？
*   使用包裹在服务定位器周围的静态工厂是不是很糟糕？
*   抛开单元测试不谈，我真的会因为使用服务定位器反模式而受到惩罚吗？

很抱歉一次问了很多问题。我已经阅读了以下 SO 问题和许多其他问题，但阅读它们只会增加我的困惑：

*   [如何使用依赖注入而不是服务定位器](https://stackoverflow.com/questions/5460564/)
*   [依赖注入和服务定位器模式有什么区别？](https://stackoverflow.com/questions/1557781/)
*   [如何避免服务定位器反模式？](https://stackoverflow.com/questions/6833995/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T00:21:28.417

如果可能的话，你应该总是使用依赖注入，因为它有一些明显的优势。然而，对于 UI 技术，并不总是可以使用依赖注入，因为某些 UI 技术（例如，在 .NET 空间中，Win Forms 和 Web Forms）只允许您的 UI 类（表单、页面、控件等）具有默认构造函数。在这种情况下，您将不得不退回到其他东西，即服务定位器。

在这种情况下，我可以给你以下建议：

*   仅针对无法由容器使用依赖注入创建的 UI 类以及无论如何都不是单元测试的东西回退到服务定位器。
*   尝试在这些 UI 类中实现尽可能少的逻辑（作为仅具有视图相关内容的[Humble 对象）。](http://xunitpatterns.com/Humble%20Object.html)这允许您尽可能多地进行单元测试。
*   将容器包裹在一个静态方法周围，以对应用程序的其余部分隐藏容器。确保在无法解决依赖关系时调用此静态方法失败。
*   解析该类型的（默认）构造函数中的所有依赖项。这允许应用程序在创建该类型时无法解决其依赖项之一时快速失败，而不是稍后单击某个按钮时。
*   在应用程序启动期间（或使用单元测试）检查是否可以创建所有这些 UI 类型。这使您不必通过整个应用程序（通过打开所有表单）来查看 DI 配置中是否存在错误。
*   当容器无法构建类型时，没有理由在容器中注册它们。如果它们可以由容器创建（例如使用 ASP.NET MVC 控制器类），则显式注册它们会很有用，因为某些容器允许您预先验证配置，这将正确检测这些类型中的配置错误离开。

除了单元测试之外，还有另外两个反对使用服务定位器的重要论据，这由 Mark Seemann 在他著名的博客文章[服务定位器是一种反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)中给出：

*   服务定位器“隐藏类的依赖关系，导致运行时错误而不是编译时错误”
*   服务定位器正在“使代码更难维护”

# java - Java Python 消息签名和验证

> ID：11269295
> 
> 赞同：0
> 
> 时间：2012-06-29T21:37:20.043
> 
> 标签：java, python, compatibility, digital-signature, pycrypto

我的服务器是用 Python 编码的，我正在为这个服务器制作一个 java 客户端。

我正在使用以下方式签署消息（数据）：

```
public static byte[] Sign(PrivateKey privateKey, byte[] data) throws Exception{
        System.out.println("Signing the key inside RSACrypto#Sign");
        Signature dsa = Signature.getInstance("SHA1withRSA");

        SecureRandom secureRandom =null;
        dsa.initSign(privateKey,secureRandom);
        dsa.update(data);
        return dsa.sign();
} 
```

这将返回一个 byteArray(named signed_data) ，现在我正在使用 Base64.encodeBase64 对该签名进行编码，并使用以下方法将 byteArray(named my_byte_array) 转换为字符串：

```
String str = new String(my_byte_array) 
```

并将此字符串发送到服务器。

在服务器端，我收到这个字符串，然后服务器使用以下方法验证签名：

```
publicKey.verify(str(data), (long(base64.b64decode(my_byte_array)),)) 
```

使用库[http://gdata-python-client.googlecode.com/hg/pydocs/gdata.Crypto.PublicKey.RSA.html](http://gdata-python-client.googlecode.com/hg/pydocs/gdata.Crypto.PublicKey.RSA.html)

当我尝试在两侧打印 my_byte_array 时，它们是相同的，signed_data 和 base64.b64decode(my_byte_array) 也是如此

但我收到此错误：

```
ValueError: invalid literal for long() with base 10: '\x8b\xa1\xbb\x19fO\xea\xe7\xa4B\xd4\xd2\xa1\xe3\xb9\xd0\x89n\xa2\xfe\xb5\xedsL\x02\xba\xad\x12!qjp\x0c%+Z\t\xa7\x12\x08\x90\xfaTk\xca\xd0\xae\xd8\xa9\xfa\xbb]>9\x1c\x80\xd0 
```

据我所知，之所以会出现此错误，是因为 Java 将消息签名为字节，而 python 期望它为 Long。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:37:44.240

你实际上有2个问题。

第一个是 - 根据[Java Cryptograpy Architecture API](http://docs.oracle.com/javase/1.4.2/docs/guide/security/CryptoSpec.html#AppA) - *SHA1withRSA*算法涉及 PKCS#1 v1.5 填充。在 Python 端，必须使用相同的填充方案来验证签名；这可以通过 PyCrypto 的 PKCS#1 v1.5 签名模块（[Crypto.Signature.PKCS1_v1_5](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Signature.PKCS1_v1_5-module.html)）来实现。

第二个问题是您指出的问题：`verify`RSA PyCrypto 对象的方法奇怪地要求将签名编码为整数。但是，通过使用我上面提到的模块，问题就会消失，因为它接受字节字符串。

# android - 启动器活动意图标志

> ID：11269303
> 
> 赞同：0
> 
> 时间：2012-06-29T21:37:55.200
> 
> 标签：android, android-intent, flags

我想根据用户定义的设置在我的应用程序的启动器活动上设置一些意图标志。例如，如果用户选择不关闭背光，我应该为启动器活动设置 FLAG_KEEP_SCREEN_ON。有没有办法在主要活动开始之前获得当前意图并更改它的标志？

我一直在使用 PowerManager 和 WakeLock，但这种方式现在有点过时了，所以我想更新应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:53:16.850

> 有没有办法在主要活动开始之前获得当前意图并更改它的标志？

不，对不起。

话虽如此，只要在你的活动中调用[`setKeepScreenOn()`一些`View`](http://developer.android.com/reference/android/view/View.html#setKeepScreenOn%28boolean%29)，你就会完成同样的事情。

> 我一直在使用 PowerManager 和 WakeLock，但这种方式现在有点过时了

`PowerManager`并且没有被弃用，但它们需要额外的权限并且有点冒险——如果你因为崩溃或其他原因而失败，`WakeLock`用户会不高兴。`release()``WakeLock`

# yahoo-pipes - How to get the direct link from a twitter short link

> ID：11269304
> 
> 赞同：0
> 
> 时间：2012-06-29T21:38:09.317
> 
> 标签：yahoo-pipes

twitter rss feed links comes short (like [http://t.co/rwkYrSPD](http://t.co/rwkYrSPD))

I want to get the direct link with using yahoo pipes

How to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:46:53.053

好吧，显然您可以直接转到该页面。例如，http://t.co/rwkYrSPD 变为[http://trailers.apple.com/trailers/focus_features/paranorman/](http://trailers.apple.com/trailers/focus_features/paranorman/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:46:36.220

Yahoo Pipes 是否能够`HEAD`针对 URL 执行请求？如果您`HEAD`针对该网址运行（`curl -I 'http://t.co/rwkYrSPD')`您将收到`HTTP/1.1 301 Moved Permanently`以实际网址作为`Location`标头的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T00:12:14.990

我意识到现在已经很久了，但是请查看[这个 Pipe 的源代码](http://t.co/rwkYrSPD)，它使用[LongURL API](http://longurl.org/api)（例如，[http: //api.longurl.org/v2/expand?url=http://t.co /rwkYrSPD](http://api.longurl.org/v2/expand?url=http://t.co/rwkYrSPD) ) 和 YQL。

# asp.net-mvc-3 - Microsoft AntiXSS 替代方案

> ID：11269306
> 
> 赞同：22
> 
> 时间：2012-06-29T21:38:13.797
> 
> 标签：asp.net-mvc-3, security, antixsslibrary

微软的 AntiXSS 库已经被[破坏](http://wpl.codeplex.com/discussions/286177)了 6 个月，看起来已经被废弃了（官方可能是这样，也可能不是这样）。由于以前版本的安全问题，回滚到早期版本是不安全的。在使用 Microsoft（特别是 MVC）堆栈时，是否有任何积极开发的用于 AntiXSS 和 Web 安全的良好替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T10:29:54.763

2012 年 6 月发布的 ajax 控制工具包附带了一个新的 xss sanitizer。该工具包最初也是使用微软的反 xss 库，所以他们遇到了同样的问题。新的消毒剂基于 HtmlAgilityPack

请参阅[http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx](http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T00:35:13.640

我有同样的问题，我一直在寻找解决方案，但没有找到其他任何东西。

基本上，我认为前进的唯一选择是使用某种 WMD 风格（就像他们在 Stackoverflow 上所做的那样）......将其作为 WMD 标记发送回服务器，然后将其作为 HTML 保存在数据库中，然后将其转换为 html在服务器上的页面上吐出它。

这可能是一个好的开始：[http ://code.google.com/p/pagedown/](http://code.google.com/p/pagedown/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-12T17:23:12.053

有一个名为[AntiXSS.NetStandard](https://www.nuget.org/packages/AntiXSS.NetStandard)[的 WPL 非官方端口](https://github.com/hangy/AntiXSS)支持.NET Standard 2.0（.NET Core 2.0+、.NET Framework 4.6.1）中的**AntiXSS**。

# python - Natgrid interpolation in Matplotlib producing Null Values

> ID：11269307
> 
> 赞同：1
> 
> 时间：2012-06-29T21:38:18.930
> 
> 标签：python, null, matplotlib, interpolation

Everyone,

I am currently having some difficulty with the interpolation produced by griddata in matplotlib. I have a data set that contains 3 values per a data point. I am attempting to plot this data in a contour. The problem I am having is that the the built in delauny interpolation breaks on some data sets. So, I have tried to move over to the natgrid interpolatoin. This works for some data. However, other data sets it produces some null values in the output of griddata. I should also mention that these null values occur in an area where most values are the same (0 in this case).

Are there any suggestions as to what could cause this?

Edit: Here are some more details.

The source data is rather large and cannot be pasted in here. So, I used a pastebin to hold it. I hope this is allowed. That is available here: [http://pastebin.com/C7Nvvcaw](http://pastebin.com/C7Nvvcaw). This is formatted like x, y, z. So the first column is the x value and so on. This is the result for printing every item in the xyz list and piping it into a file.

The same applies for the post interpolation data. So, I have used a pastebin as well. Here it is: [http://pastebin.com/ZB6S2qFk](http://pastebin.com/ZB6S2qFk). Each [] corresponds with a particular y value. The y values are not included because they are in the separate lists. Though, they just range from 0-50 for the Y axis and 0-100 for the X axis. This is the output of printing every item in the zi list from my code and piping it into a file.

Now for the code, I have not attached all of the code because a large part of it is out of the scope of this question. So, I will post the relevant components. The initial data is in a list of lists providing the ability to navigate the data in 3 dimensions. I suppose this is similar to a 3 dimensional array, though it is not and just a list of lists. The source data's list is called xyz.

```
 #Function to get individual column of data
    def column(matrix, i):
            return [row[i] for row in matrix]

    #Getting Max and Mins
    xmin = float(min(column(xyz, 0)))
    xmax = float(max(column(xyz, 0)))
    ymin = float(min(column(xyz, 1)))
    ymax = float(max(column(xyz, 1)))

    #Resolution for interpolation (x and y list lengths)
    resx = 100
    resy = 50

    xi = np.linspace(xmin, xmax, resx)
    yi = np.linspace(ymin, ymax, resy)

    x = np.array(column(xyz, 0))
    y = np.array(column(xyz, 1))
    z = np.array(column(xyz, 2))

    zi = griddata(x, y, z, xi, yi, interp='nn') 
```

EDIT: I found a solution. The 0 values are breaking the interpolation. I was able to catch them and change them all to 0.1 and the interpolation no longer produces the null values. this is acceptable in my case because 0 and 0.1 fall under the same contour color. For other users if you need to retain absolute accuracy of the data, I would suggest transforming all the values by +1, interpolating, then transforming the interpolated values -1\. This will retain the accuracy without breaking the interpolation method.

Thanks for any help,

Daniel

# android - How do I set up the project in the Android site's "Managing the Activity Lifecycle" training exercise?

> ID：11269308
> 
> 赞同：3
> 
> 时间：2012-06-29T21:38:21.383
> 
> 标签：android, lifecycle

I'm trying to implement the project in the Android site's "Managing the Activity Lifecycle" training exercise at [http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html) .

The instructions don't say how to set it up. A *.zip file is provided, but I can't figure out how to get it to work. No matter what I do, there are errors that keep the project from running.

What is the proper procedure for getting this project to work?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:11:10.557

在打开管理生命周期项目之前，请检查 eclipse 帮助下拉菜单中的更新。然后按照我所做的这些步骤打开项目并成功运行：

*   将光标指向文件下拉菜单->然后点击导入

*   将打开一个对话框，将光标指向 Android，然后选择**Existing Android code into workspace**，如下图所示：

    ![导入安卓项目](../Images/c5d8d39213f97b08339eaba7a1f15d49.png)

*   选择android代码选项后，选择项目根源目录，如下图所示：

    ![选择项目来源](../Images/705009074da9dacd35d3b244c150f97a.png)

由于我已经导入项目，所以它显示**选择至少一个项目提示**

*   接下来，将光标指向完成按钮。一切都完成了，eclipse 导入我们的管理项目显示在左窗格的项目资源管理器窗口中。

通过设备或模拟器运行您的项目，这是 google 的一个很棒的活动生命周期示例演示。干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:21:14.890

我在学习教程时也遇到了这个问题。我试图将“activityLifecycle”项目导入 Eclipse，但什么也没有发生，尝试了几种不同的方法。

事实证明，最近有一个工具包更新（可能与新版本发布相吻合）。使用“帮助”菜单中的“检查更新”更新您的 Eclipse，然后安装。使用 android SDK Manager 安装其他软件包（在 eclipse 中单击带有向下箭头的 android），然后安装推荐的软件包（您需要成为管理员才能执行此操作）。

在 Eclipse 和 android 更新后，您应该能够使用 import 命令和解压缩的项目文件夹来导入包。它确实弹出了一些警告，但该项目在模拟器中仍然运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:49:29.183

我假设您已经完成了教程[构建您的第一个应用程序](http://developer.android.com/training/basics/firstapp/index.html)。

如果是这样，那么您只需提取 zip 文件，然后在 eclipse 中选择 File>Import，然后选择 Android 并从那里按照向导进行操作。它应该编译得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T20:09:06.827

我有同样的问题。在 Eclipse 中，执行 File->Import，选择“Existing android code into workspace”并选择提取的“activity-lifecycle”目录。确保您没有在工作区中提取“活动生命周期”压缩包，而是在其他位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-10T19:39:04.200

我正在使用 Android Studio，这就是这个示例对我有用的方式

1.- 打开项目 -> 导入项目文件（Eclipse ADT、Gradle 等） 2.- 选择您的文件夹，我选择了活动生命周期，然后单击确定

最终转换项目需要一些时间，由于 sdk，它将无法编译，因此 1.- 关闭项目 2.- 探索项目的 de 文件，查找此文件 build.gradle 3.- 打开此文件要更改此值 compileSdkVersion、buildToolsVersion、minSdkVersion 和 targetSdkVersion。使用已成功编译的先前项目的值并保存更改 4.-打开此项目，它将起作用。而已。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-12T14:03:47.540

对于那些对这里的解释有困难的人，这些是对我有用的步骤，在一些细节上：

1.  下载 ActivityLifecycle.zip，然后解压缩到您选择的目录。
2.  启动 Android Studio 并选择“导入项目（Eclipse ADT、Gradle 等”）将出现一个窗口：“选择要导入的 Eclipse 或 Gradle 项目”。使用它导航到您在前面的步骤中解压缩的文件夹并选择该文件夹。最后，单击确定。
3.  当您在上一步中单击“确定”时，会出现一个新窗口：“从 ADT (Eclipse Android) 导入项目。单击下一步使用自动生成的导入目标目录。在下一页上，选中所有项目并单击“完成”。
4.  如果您使用的是代理，接下来会出现“代理设置”窗口。在这种情况下，请相应地设置您的主机和端口号。
5.  此时项目将在 Android Studio 中打开，但会显示一个警告对话框：Frameworks detected Android framework is detected in the project Configure。
6.  单击警告对话框中的配置，将出现一个新窗口：“设置框架”。
7.  在新的“设置框架”窗口中单击确定。
8.  展开项目侧栏中的 Gradle Scripts 项。
9.  双击 build.gradle(Module:app) 项；这将为导入的应用程序打开应用程序级别的 gradle 构建文件。当您安装 Android Studio 时，您通常会安装一些可用 SDK 的子集。导入项目的 build.gradle 文件可能无法针对您在 Android Studio 设置中拥有的任何 SDK 进行编译，因此您必须编辑此文件以匹配。就我而言，我正在编写代码以针对 SDK 版本 17 进行编译；这也是我的目标平台。因此，我使用这些信息来编辑导入项目的 build.gradle 文件。

以下是更改前代码的外观：

```
android {
    compileSdkVersion 14
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.example.android.lifecycle"
        minSdkVersion 7
        targetSdkVersion 15
        ... 
```

以下是它的外观：

```
android {
    compileSdkVersion 17
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.example.android.lifecycle"
        minSdkVersion 7
        targetSdkVersion 17
        ... 
```

至此，导入过程应该已经完成​​，Eclipse 项目现在已“转换”为符合 Android Studio 约定的项目。我希望这有帮助！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-27T09:57:42.790

对于那些对此解决方案有困难的人，我已经详细阐述了这些步骤：

1.  下载 ActivityLifecycle.zip，然后解压缩到您选择的目录。
2.  启动 Android Studio 并选择“导入项目（Eclipse ADT、Gradle 等”）将出现一个窗口：“选择要导入的 Eclipse 或 Gradle 项目”。使用它导航到您在前面的步骤中解压缩的文件夹并选择该文件夹。最后，单击确定。
3.  当您在上一步中单击“确定”时，会出现一个新窗口：“从 ADT (Eclipse Android) 导入项目。单击下一步使用自动生成的导入目标目录。在下一页上，选中所有项目并单击“完成”。
4.  如果您使用的是代理，接下来会出现“代理设置”窗口。在这种情况下，请相应地设置您的主机和端口号。
5.  此时项目将在 Android Studio 中打开，但会显示一个警告对话框：Frameworks detected Android framework is detected in the project Configure。
6.  单击警告对话框中的配置，将出现一个新窗口：“设置框架”。
7.  在新的“设置框架”窗口中单击确定。
8.  展开项目侧栏中的 Gradle Scripts 项。
9.  双击 build.gradle(Module:app) 项；这将为导入的应用程序打开应用程序级别的 gradle 构建文件。当您安装 Android Studio 时，您通常会安装一些可用 SDK 的子集。导入项目的 build.gradle 文件可能无法针对您在 Android Studio 设置中拥有的任何 SDK 进行编译，因此您必须编辑此文件以匹配。就我而言，我正在编写代码以针对 SDK 版本 17 进行编译；这也是我的目标平台。因此，我使用这些信息来编辑导入项目的 build.gradle 文件。

以下是更改前代码的外观：

```
android {
    compileSdkVersion 14
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.example.android.lifecycle"
        minSdkVersion 7
        targetSdkVersion 15
        ... 
```

以下是它的外观：

```
android {
    compileSdkVersion 17
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.example.android.lifecycle"
        minSdkVersion 7
        targetSdkVersion 17
        ... 
```

此时，导入过程应该已完成，Eclipse 项目现在已“转换”为符合 Android Studio 约定的项目。我希望这有帮助！

# c# - Generics: I'm not quite sure what the does - can you explain?

> ID：11269310
> 
> 赞同：0
> 
> 时间：2012-06-29T21:38:26.207
> 
> 标签：c#, generics, inheritance, .net-3.5

I'm creating an abstract class to derive from. I have a `Value` property that can be numerous data types. I saw an article on generics and I'm just wondering if my understanding is correct.

Does having an abstract:

```
BaseClass<T> 
```

and inheriting it like:

```
InheritingClass: BaseClass<int> 
```

basically equate to: *anywhere there is a type `T` defined in BaseClass , treat it as a type `int` when used through InheritingClass*?

That is my understanding and I just want to make sure that is correct before I build the rest of these classes and find out I was way off. This is the first time I've used generics.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T21:40:08.870

不，不是的; 这意味着您的类专门仅继承自`BaseClass<int>`. 如果您在 中定义泛型类型参数`T`，`InheritingClass`如下所示：

```
InheritingClass<T> : BaseClass<int> 
```

那么该类型参数仅适用于`InheritingClass`它自己的成员，并且不适用于`BaseClass`任何方式。由于出身，`T`也不会`InheritingClass`自动解决。`int`换句话说，这两个类型参数是相互独立的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T21:45:51.570

> InheritingClass 中存在类型 T 的任何地方，都将其视为类型 int

正如@BoltClock 已经提到的那样，情况并非如此。但是，我想知道您是否想说：

> BaseClass 中有类型 T 的任何地方，都将其视为 int 类型

如果这就是你的意思，那么你确实是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:45:53.803

泛型用于具有类型安全的类，可以轻松定制以与任何类型一起使用。“T”是您要与该类一起使用的类型的占位符。

[http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)

“泛型允许您定义类型安全的数据结构，而无需提交实际的数据类型。”

# iphone - Sorting the float data in the Array of dictionary in iPhone?

> ID：11269311
> 
> 赞同：0
> 
> 时间：2012-06-29T21:38:32.957
> 
> 标签：iphone, sorting, nsmutablearray, nsmutabledictionary

I am having the array of Dictionary and it's in the formats of,

```
 resultsArray = { 

id = 1;
name = test;
distance = 11.5;

id = 2;
name = test1;
distance = 0.5;

id = 3;
name = test2;
distance = 2.5;

id = 4;
name = test4;
distance = 1.5; 
```

}

I want to sort the array using the distance key and my distance in the float type. So how can i sort the array using distance is in the ascending order?.

So i am expecting the results like this,

```
resultsArray = { 

id = 2;
name = test1;
distance = 0.5;

id = 4;
name = test4;
distance = 1.5;

id = 3;
name = test2;
distance = 2.5;

id = 1;
name = test;
distance = 11.5;

} 
```

Please help me out.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:49:20.673

```
NSArray *sortedArray = [resultsArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"distance" ascending:YES]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:47:13.020

```
[resultArray sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    return [[obj1 objectForKey:@"distance"] compare:[obj2 objectForKey:@"distance"]];
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T22:11:30.217

还有一种解决方案：

```
@interface NSDictionary(sortingByDistance)
-(NSComparisonResult) compareByDistance:(NSDictionary*)dict;
@end
@implementation NSDictionary(sortingByDistance)
-(NSComparisonResult) compareByDistance:(NSDictionary*)dict {
    return [[self objectForKey:@"distance"] compare:[dict objectForKey:@"distance"]];
}
@end 
```

现在对数组进行排序，您可以使用`sortUsingSelector`方法：

```
[resultArray sortUsingSelector:@selector(compareByDistance:)]; 
```

# sql - SQL：没有父键的树结构

> ID：11269315
> 
> 赞同：0
> 
> 时间：2012-06-29T21:38:56.417
> 
> 标签：sql, sqlite, tree

注意：不能更改数据架构。我坚持下去。

数据库：SQLite

我有一个简单的树结构，`without parent keys`只有 1 级深。为了清楚起见，我简化了数据：

```
ID    Content       Title
1     Null          Canada
2     25            Toronto
3     33            Vancouver
4     Null          USA
5     45            New York
6     56            Dallas 
```

该结构也是有序的，因此所有加拿大城市 > 加拿大的 ID 为 1 且小于美国的 ID 为 4

问题：当我不知道有多少城市时，如何选择所有国家的城市？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:58:19.427

我的查询将每个城市分配给每个国家，这可能不是您想要的，但是：

[http://sqlfiddle.com/#!5/94d63/3](http://sqlfiddle.com/#!5/94d63/3)

```
SELECT *

FROM (
      SELECT
        place.Title AS country_name,
        place.ID AS id,

        (SELECT MIN(ID)
         FROM place AS next_place
         WHERE next_place.ID > place.ID
           AND next_place.Content IS NULL
        ) AS next_id

      FROM place
      WHERE place.Content IS NULL
     ) AS country

INNER JOIN place
 ON place.ID > country.id
AND CASE WHEN country.next_id IS NOT NULL
         THEN place.ID < country.next_id
         ELSE 1 END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:59:26.133

```
select * from tbl
 where id > 1
   and id < (select min(id) from tbl where content is null and id > 1) 
```

编辑

我刚刚意识到，如果没有 ID 更大的国家/地区，上述方法不起作用。这应该解决它。

```
select * from tbl a
 where id > 4
   and id < (select coalesce(b.id,a.id+1) from tbl b where b.content is null and b.id > a.id) 
```

编辑 2 - 还使子查询完全相关，因此只需在一个地方更改国家/地区 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:59:37.707

这里有几件事情要考虑，一个是你的数据是否会改变，另一个是它是否不会改变，第一个存在两个解决方案，第二个，只有一个。

*   如果您的数据按示例所示进行组织，则可以选择前 3 个，即

    `SELECT * FROM CITIES WHERE ID NOT IN (SELECT TOP 3 ID FROM CITIES)`

*   您可以创建另一个表，在其中指定哪个城市属于哪个父级，并自己创建层次结构。

我推荐使用第二个。

# python - 如何使用 SQLAlchemy 将表单验证放入模型中？

> ID：11269319
> 
> 赞同：2
> 
> 时间：2012-06-29T21:39:22.607
> 
> 标签：python, validation, sqlalchemy, pyramid, wtforms

我看到很多应用程序使用 Form 对象来验证数据，然后将数据传递给模型，而在模型中完全没有验证。我觉得最好将核心验证放在模型本身（例如，永远没有 18 岁以下的用户）以在任何情况下运行。换句话说，我不关心用户是如何创建的（无论是通过 web ui 还是命令行），核心规则应该始终适用。

我正在使用 SQLAlchemy（在 Pyramid 应用程序中），我想在模型中定义我的核心验证规则，使我的表单（WTForms）始终尊重模型中定义的核心规则，以便所有数据都是一致的。

其他人是否已经在这样做，或类似的事情？

类似于[这个 php](http://mwop.net/blog/200-Using-Zend_Form-in-Your-Models.html)解决方案的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T21:31:09.607

SQLAlchemy 允许您注册侦听器，这些侦听器在某些事件发生时被调用，例如您可以注册一个事件以在修改模型的字段时触发。来自[SQLAlchemy 文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html)：

> 当将 retval=True 标志传递给 listen() 时，侦听器可以选择返回值的可能修改版本：
> 
> ```
> def validate_phone(target, value, oldvalue, initiator):
>     "Strip non-numeric characters from a phone number"
> 
>     return re.sub(r'(?![0-9])', '', value)
> 
> # setup listener on UserContact.phone attribute, instructing
> # it to use the return value 
> listen(UserContact.phone, 'set', validate_phone, retval=True) 
> ```
> 
> 像上面这样的验证函数也可以引发异常，例如`ValueError`停止操作。

因此，如您所见，您可以在模型级别修改或拒绝某些字段的值。

我不确定您的表单库是否与此功能集成，但推出您自己的解决方案绝对不会太难。

# javascript - 从 Greasemonkey 到 Servlet 的 Ajax 调用：响应失败

> ID：11269320
> 
> 赞同：1
> 
> 时间：2012-06-29T21:39:32.693
> 
> 标签：javascript, jquery, ajax, servlets, greasemonkey

虽然我有编程经验，但对 GS、JS 或与 UI 相关的任何东西都是全新的。

场景：从 Greasemonkey 脚本向 Servlet 进行 AJAX 调用

Greasemonkey/JS 代码：

```
function getResultsData(query){
alert("Getting the Data");
$.ajax( 
    {
    cache: false,   
    data: {"q":query},      
    dataType:"text",
    url: "http://myserver.com:8000/search?",
    success: processData        
    }); //end of $.ajax }

function processData(data){
alert("Got the data");
var myResultDiv = document.getElementById("searchRes");
myResultDiv.innerHTML = data; } 
```

小服务程序代码：

```
 System.out.println("-----------This is an AJAX call------------------");
        //Commented the original logic
        resp.setContentType("text/plain");
        resp.setCharacterEncoding("UTF-8");
        resp.getWriter().write("Text from Servlet"); 
```

问题：

*   如果 url（在 $.ajax 中）是其他一些现有的 API，则 GS/JS 代码可以完美运行。响应反映在 UI 中

*   但是，当我提供服务器的 url 时，我可以在 Firebug.Console 中观察到该调用没有 http 响应，但状态显示为 200 OK，整个条目变为“RED”。

*   当我测试从 Firebug 的“http 调用条目”复制的 url 时，它运行良好，因为我可以在新选项卡上看到响应“来自 Servlet 的文本”。

有人可以帮忙吗。

**注意**greasemonkey运行的网站，我的服务器属于同一个域，即

Greasemonkey 网站：www.example.com

我的服务器：www.myserver.example.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:25:35.323

感谢@mattedgod。他的评论促使我进行更多研究，我找到了答案。

添加以下代码段以使其工作。

```
response.setHeader("Access-Control-Allow-Origin", "*"); 
```

令人惊讶的是，如果我在标头中明确指定我自己的服务器的完整 http 地址，它就不起作用。我还没有找出原因。

# asp.net - 相同的网站不同的端口 Javascript 和样式表

> ID：11269322
> 
> 赞同：1
> 
> 时间：2012-06-29T21:39:34.490
> 
> 标签：asp.net, iis-7, asp.net-membership, port

我有一个在 IIS7 下运行的网站。这个网站一切正常。我已经复制了目录并在不同的端口上创建了一个克隆网站。当我在不同的端口上浏览新网站时，在我登录之前我没有得到任何样式设置——然后一切都正常显示。

**该问题似乎与 ASP.NET 成员资格/授权有关。我在子目录中有一个 web.config 以允许所有用户（web.config），但是即使所有配置、目录等都相同，克隆网站也没有使用它们。只有端口是 IIS 7 使用的不同或非 .config 设置。**

* * *

我发现了问题，但不是全部答案。这些目录需要 IUSR 权限才能工作，但原始网站没有这些权限。它只有 IIS_IUSRS。如果有人可以完全解释这种行为以及如何在不授予 IUSR 的情况下解决问题，那么我将奖励该答案。

答案应该是完全解释性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:19:31.827

一个潜在的问题是您的配置中的授权设置。

寻找这样的东西：

```
 <location path="MyResourcesFolder">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location> 
```

上面的示例将产生您所描述的效果，假设您的资源（css、jscript 等）位于名为*MyResourcesFolder*的文件夹中。检查实际网站中的 web.config，不一定是项目。这是因为如果您使用配置转换，您的网站配置可能与您的项目配置不同。

# ios - 对 iOS 阻塞和保留周期的偏执

> ID：11269323
> 
> 赞同：2
> 
> 时间：2012-06-29T21:39:36.117
> 
> 标签：ios, ios5, automatic-ref-counting, objective-c-blocks

我对块和创建保留周期的可能性变得有点偏执。我正在使用`UIAlertView`该类的基于块的版本，它允许您使用块而不是委托方法。我使用了很多这样的 Alertviews，所以我经常调用实例方法来做很多繁重的工作。

我在方法中所做的分配`someInstanceMethod`会导致保留周期吗？
（我正在使用 ARC 进行内存管理。）

```
__weak id weakSelf = self;
[doWorkAndThen:^{
   [weakSelf someInstanceMethod];
}];

-(void) someInstanceMethod{
    //will either of the assignments below cause a retain cycle?
    self.iVar = @"data";
    [self setIvar:@"data";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T21:45:04.663

号`-someInstanceMethod`不是块。你从一个人那里调用它的事实是无关紧要的。*只有*块本身*内部*的引用才会导致保留，并且由于块内的唯一引用是一个`__weak`变量，所以你很好。

顺便说一句，如果您真的想放松心情，您应该修改基于块的`UIAlertView`类，以便在视图关闭时丢弃所有块。这样，即使您确实创建了保留周期，它也会在警报视图消失后自动中断。

# jquery - 由一个菜单控制的两个幻灯片（背景滑块和文本滑块）

> ID：11269336
> 
> 赞同：0
> 
> 时间：2012-06-29T21:40:38.807
> 
> 标签：jquery, slideshow, jcarousel

我正在尝试设置一个仅使用一个控制菜单的滑块（例如项目 1 | 项目 2 | 项目 3），但会影响背景图像和包含文本的 div 容器。

看看 SAP 的这个例子：http: [//www.sap.com/germany/index.epx](http://www.sap.com/germany/index.epx) 在那里你可以点击这个黄色方块，框内的文本和背景都会发生变化（即使在右侧比率）。

我尝试了几个幻灯片插件，例如 jCarousel、Nivo Slider、bxSlider ……但由于我的 javascript 技能较弱，我真的不知道如何实现我的目标……

任何人都可以帮助我吗？

谢谢，塞巴斯蒂安

编辑：感谢您的回复！我尝试了您的解决方案并发表了评论（见下文）。除此之外，我还提供了一个链接，指向我试图让这种效果发挥作用的网页：http: [//prism-informatics.com/new/#](http://prism-informatics.com/new/#)

对于背景滑动效果，我使用了一个名为“bgStretcher”的库/脚本/模块。它提供 bg 图像的预加载、漂亮的过渡效果和“实时缩放”...

页面中心有一个 jCarousel（带有文本的白框，如“IT-Strategy”）。最好的情况是，如果您单击框下方的控件（数字“1”或“2”），那么这会告诉 bgStretcher-script 滑动到适当的 bg-picture...因为我的坏js技能，不知道有没有办法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:11:23.350

试试这个：（也在这里：http: [//jsfiddle.net/HzWRT/](http://jsfiddle.net/HzWRT/)）

```
<!DOCTYPE html><html><head>

<style>
.slider {
    margin: 100px;
    padding: 10px;
    border: 1px solid black;
}
.slider > div {
    display: none;
}
.slider > .control, .slider > .active {
    display: block;
}
.slider > .control .active {
    font-weight: bold;
}
</style>

</head><body>

<p>Other content here.</p>

<div class="slider">
    <div id="one">
        <h2>One</h2>
        <p>Something you want to say.</p>
    </div>
    <div id="two">
        <h2>Two</h2>
        <p>Something you want to write.</p>
    </div>
    <div class="control">
        <a href="#one" data-background="lightblue" class="active">One</a>
        <a href="#two" data-background="lightgreen">Two</a>
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
jQuery(function($) {
    $('.slider > .control').delegate('a', 'click', function() {
        var $this = $(this),
            slider = $this.closest('.slider');
        $('body').css('background', $this.data('background'));
        slider.find('.active').removeClass('active');
        slider.find($this.attr('href')).addClass('active');
        $this.addClass('active');
        return false;
    }).find('.active').trigger('click');
});
</script>
</body></html> 
```

它不会在计时器上自动更改，但您没有指定是否需要它。

要使用图像背景，只需将“lightblue”和“lightgreen”替换为任何 CSS 背景属性，例如“url(http://example.com/bg.png)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:31:37.757

这是一个大幻灯片。

把它们分开怎么样？文本滚动条，后面有一个大精灵，您可以使用 css 更改背景中的图像。

首先，您需要滚动一些文本。有各种各样的图像滚动器也可以为您滚动文本。如果您使用 jcarousel，则只需按照文本滚动条进行操作

其次，决定是否要为图像使用 sprite 和 div / body 元素。您需要设置您选择的高度和宽度，并确保设置了“display:block”或“display:inline-block”。

最后，锁定“文本滚动”以了解何时滚动图片。（您也可以将此想法用于 $("#some-other-carousel .jcarousel-prev").click() 并推进单独的轮播）

例子：

```
<body style="background:url(/some/sprite.png) no-repeat 0 0;">
<ul id="text-id">
  <li>whatever</li>
  <li>a jcarousel</li>
  <li>text carousel</li>
  <li>needs</li>
</ul>
</body> 
```

# js

```
 $(function(){
//start the carousel with whatever it needs to scroll text
     $("#text-id").jcarousel();
// y - size of your sprite
     var totalSpriteYsize = 400;
// your example used the body element for a picture background, so that's what this does
     var $body = $("body");
// 'listen' for your text carousel clicks, and alter the background picture
      $body.on({"click":function(event){
       var curPosition = parseInt($body.css("background-position-y"),10);
       var adjustY =100;
// all sprite Y positions go negative from 0, and we don't want to go off the end of the sprite
       var newPosition = -((curPosition - adjustY) % totalPicYsize);
       if($(this).is(".jcarousel-prev"){
         newPosition = -((curPosition + adjustY) % totalPicYsize);
       }
       $body.css("background-position-y", newPosition+"px");
//this .on selector decides which 'clicks' to listen to.
      }},".jcarousel-prev,.jcarousel-next",null);

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T01:06:40.470

这个新答案使用了 bgStretcher：（小提琴：http: [//jsfiddle.net/rNLEQ/](http://jsfiddle.net/rNLEQ/)）

```
<!DOCTYPE html><html><head>

<link rel="stylesheet" type="text/css" href="http://www.ajaxblender.com/script-sources/bgstretcher-2/bgstretcher.css" />

<style>
.slider {
    background-color: white;
    width: 300px;
    margin: 100px;
    padding: 10px;
    border: 1px solid black;
}
.slider > div {
    display: none;
}
.slider > .control, .slider > .active {
    display: block;
}
.slider > .control li {
    display: inline;
    padding: 10px;
}
.slider > .control .showPage {
    font-weight: bold;
}​
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://www.ajaxblender.com/script-sources/bgstretcher-2/bgstretcher.js"></script>
<script>
jQuery(function($) {
    $('body').bgStretcher({
        images: [
            'http://prism-informatics.com/new/sites/all/themes/prism_new/images/bg1.jpg',
            'http://prism-informatics.com/new/sites/all/themes/prism_new/images/bg2.jpg',
            'http://prism-informatics.com/new/sites/all/themes/prism_new/images/bg3.jpg',
            'http://prism-informatics.com/new/sites/all/themes/prism_new/images/bg4.jpg',
        ],
        imageWidth: 1024, 
        imageHeight: 768, 
        nextSlideDelay: 8000,
        slideDirection: 'N',
        slideShowSpeed: 1000,
        transitionEffect: 'fade',
        sequenceMode: 'normal',
        buttonPrev: '#prev',
        buttonNext: '#next',
        pagination: '.control',
        anchoring: 'left center',
        anchoringImg: 'left center',
        preloadImg: true,
        callbackfunction: function() {
            var i = $('#bgstretcher .bgs-current').index('#bgstretcher li') + 1;
            $('.slider > div').removeClass('active');
            $('#slide'+i).addClass('active');
        }
    });
});
</script>
</head><body>

<p>Other content here.</p>

<div class="slider">
    <div id="slide1" class="active">
        <h2>One</h2>
        <p>Something you want to say 1.</p>
    </div>
    <div id="slide2">
        <h2>Two</h2>
        <p>Something you want to say 2.</p>
    </div>
    <div id="slide3">
        <h2>Three</h2>
        <p>Something you want to say 3.</p>
    </div>
    <div id="slide4">
        <h2>Four</h2>
        <p>Something you want to say 4.</p>
    </div>
    <div class="control"></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

</body></html> 
```

# batch-file - 如何在批处理/cmd中“注释掉”（添加注释）？

> ID：11269338
> 
> 赞同：1023
> 
> 时间：2012-06-29T21:40:58.793
> 
> 标签：batch-file, cmd, comments, comment-conventions

我有一个批处理文件，它运行几个执行表修改的 python 脚本。

1.  我想让用户注释掉他们不想运行的 1-2 个 python 脚本，而不是从批处理文件中删除它们（所以下一个用户知道这些脚本作为选项存在！）

2.  我还想添加注释以特别提醒他们在运行批处理文件之前需要在批处理文件中更新的变量。我看到我可以使用`REM`. 但它看起来更像是在用户运行后更新用户的进度。

是否有更恰当地添加评论的语法？

* * *

## 回答 #1

> 赞同：1102
> 
> 时间：2013-05-30T15:02:35.323

# 使用`::`或`REM`

```
::   commenttttttttttt
REM  commenttttttttttt 
```

# 但是（正如人们所说）：

*   `::`不能内联工作；添加`&`字符：
    `your commands here & :: commenttttttttttt`
*   内部嵌套部分（`IF/ELSE`，`FOR`循环等...）`::`应跟在正常行之后，否则会出错（`REM`在此处使用）。
*   `::`也可能在内部失败`setlocal ENABLEDELAYEDEXPANSION`

* * *

## 回答 #2

> 赞同：968
> 
> 时间：2012-06-29T21:49:47.633

该`rem`命令确实用于评论。运行脚本后，它本质上不会更新任何人。不过，一些脚本作者可能会以这种方式使用它而不是`echo`，因为默认情况下，批处理解释器会在处理每个命令之前*打印出它。*由于`rem`命令不执行任何操作，因此可以安全地打印它们而不会产生副作用。要避免打印命令，请为其添加前缀`@`，或者，要在整个程序中应用该设置，请运行`@echo off`. （这是`echo off`为了避免打印更多命令；这是为了避免在回显设置生效之前`@`打印*该命令。）*

所以，在你的批处理文件中，你可以使用这个：

```
@echo off
REM To skip the following Python commands, put "REM" before them:
python foo.py
python bar.py 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-06-29T21:46:17.353

不，普通的旧批处理文件`REM`用作注释。 `ECHO`是在屏幕上打印某些内容的命令。

要“注释掉”文件的部分，您可以使用`GOTO`. 所有这些命令/技术的示例：

```
REM it starts here the section below can be safely erased once the file is customised
ECHO Hey you need to edit this file before running it!  Check the instructions inside
ECHO Now press ctrl-c to interrupt execution or enter to continue
PAUSE
REM erase the section above once you have customised the file
python executed1.py
ECHO Skipping some stuff now
GOTO End
python skipped1.py
python skipped2.py
:END
python executed2.py 
```

我能说什么？批处理文件是很久以前的遗物，它们笨重且丑陋。

[您可以在此网站上](http://www.robvanderwoude.com/batchfiles.php)阅读更多内容。

编辑：稍微修改了示例以使其包含您显然正在寻找的元素。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-11-02T21:33:15.817

在计算机不是很快的日子里，最好使用 :: 而不是 REM。REM'ed 行被读取，然后被忽略。::'ed 行一直被忽略。这可以在“过去”加速您的代码。此外，在 REM 之后你需要一个空格，在 :: 你不需要之后。

正如第一条评论中所说：您可以将信息添加到您认为需要的任何行

```
SET DATETIME=%DTS:~0,8%-%DTS:~8,6% ::Makes YYYYMMDD-HHMMSS 
```

至于跳过部分。将 REM 放在每行前面可能相当耗时。如前所述，使用 GOTO 跳过部分是跳过大段代码的简单方法。请务必在您希望代码继续运行的位置设置 :LABEL。

```
SOME CODE

GOTO LABEL  ::REM OUT THIS LINE TO EXECUTE THE CODE BETWEEN THIS GOTO AND :LABEL

SOME CODE TO SKIP
.
LAST LINE OF CODE TO SKIP

:LABEL
CODE TO EXECUTE 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2016-08-24T10:50:55.117

## 多行注释

如果您要注释掉大量行，那么最好进行多行注释而不是注释掉每一行。

请参阅[Rob van der Woude 在评论区发表的这篇文章](http://www.robvanderwoude.com/comments.php)：

> 批处理语言没有注释块，尽管有一些方法可以实现效果。
> 
> ```
> GOTO EndComment1
> This line is comment.
> And so is this line.
> And this one...
> :EndComment1 
> ```
> 
> 您可以使用`GOTO`Label 和 :Label 进行块注释。
> 
> 或者，如果注释块出现在批处理文件的末尾，您可以`EXIT`在代码末尾写上任意数量的注释以供您理解。
> 
> ```
> @ECHO OFF
> REM Do something
>   •
>   •
> REM End of code; use GOTO:EOF instead of EXIT for Windows NT and later
> EXIT
> 
> Start of comment block at end of batch file
> This line is comment.
> And so is this line.
> And this one... 
> ```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-06-09T14:38:03.017

## 将注释与命令放在同一行：使用`& :: comment`

```
color C          & :: set red font color
echo IMPORTANT INFORMATION
color            & :: reset the color to default 
```

**解释：**

[`&`分隔两个命令](https://technet.microsoft.com/en-us/library/bb490954.aspx)，所以在这种情况下`color C`是第一个命令，`:: set red font color`是第二个。

* * *

### 重要的：

这个带有注释的语句在直觉上看起来是正确的：

```
goto error1         :: handling the error 
```

但这**不是评论的有效使用**。它之所以有效，只是因为`goto`忽略了第一个参数之后的所有参数。证明很简单，这`goto`也不会失败：

```
goto error1 handling the error 
```

但类似的尝试

```
color 17            :: grey on blue 
```

由于命令未知的 4 个参数，执行命令失败`color`：`::`, `grey`, `on`, `blue`.

它只能作为：

```
color 17     &      :: grey on blue 
```

**所以&符号是不可避免的。**

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-09-21T05:24:11.210

`::`您可以使用or注释掉某些内容`REM`：

```
your commands here
:: commenttttttttttt 
```

或者

```
your commands here
REM  commenttttttttttt 
```

要在与命令相同的行上执行此操作，您必须添加一个 & 符号：

```
your commands here      & ::  commenttttttttttt 
```

或者

```
your commands here      & REM  commenttttttttttt 
```

# 笔记：

*   **`::`** 在嵌套逻辑（`IF-ELSE`、`FOR`循环等）中使用会导致错误。在这些情况下，请**`REM`**改用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-12T16:40:03.340

您可以使用以下语法将注释添加到批处理文件的末尾：

```
@echo off
:: Start of code
...
:: End of code

(I am a comment
So I am!
This can be only at the end of batch files 
```

只要确保你从不使用右括号。

署名：Leo Guttirez Ramirez 在[https://www.robvanderwoude.com/comments.php](https://www.robvanderwoude.com/comments.php)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-13T07:12:46.907

这是一个老话题，我想在这里补充一下我的理解，以扩展这个有趣话题的知识。

REM 和 :: 之间的主要区别是：

REM 本身就是一个命令，而 :: 不是。

我们可以将 :: 视为一个标记，一旦 CMD 解析器遇到一行中的第一个非空格是这个 :: 标记，它就会跳过整行并读取下一行。这就是为什么 REM 后面至少应该有一个空格才能作为该行的注释，而 :: 后面不需要任何空格。

REM 本身就是一个命令，可以从下面的[FOR](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/for)语法中得到最好的理解

基本的 FOR 语法如下

```
FOR %v in (set) DO <Command> [command param] 
```

这里`<Command>`可以是任何有效的命令所以我们可以编写以下有效的命令行作为`rem`命令

```
FOR %i in (1,2,3) DO rem echo %i 
```

但是，我们不能编写以下行，因为`::`它不是命令

```
FOR %i in (1,2,3) DO :: echo %i 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-14T17:01:05.953

您可以使用`::`或`rem`进行评论。

评论时，使用`::`速度快 3 倍。[此处](https://www.thebateam.org/forum/how-to/rem-vs-colons-for-batch-script-comments/)显示了一个示例

仅当注释在`if`, 中时才使用`rem`，因为冒号可能会出错，因为它们是标签。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-09T00:44:30.277

## 评论一行

对于注释行，使用[REM 或 ::](https://stackoverflow.com/a/12408045/388389)虽然`::` 可能[会在括号内失败](https://ss64.com/nt/rem.html)

在以 开头的延迟扩展行内`!<delimiter>`将被忽略，因此可用于注释：

```
@echo off

setlocal enableDelayedExpansion

echo delayed expansion activated
!;delayed expansion commented line
echo end of the demonstration 
```

## 在行尾注释

对于行尾的注释，您可以再次使用`rem`并`::`结合`&`：

```
echo --- &:: comment (should not be the last line in the script)
echo --- &rem comment 
```

## 在文件末尾评论

注意将在`exit`命令后解析，您可以使用它在文件末尾添加注释：

```
@echo off

echo commands

exit /b 

-------------------
commnts at the end 
of the file
------------------ 
```

## 内联评论

不存在的变量的扩展被替换为什么都没有，并且由于`=`很难设置变量，您可以[将其用于内联注释](https://stackoverflow.com/a/12411082/388389)：

```
@echo off

echo long command %= this is a comment =% with an inline comment 
```

## 多行注释

可以使用多行注释`GOTO`（用于外括号）和`REM`条件执行（用于内括号）。[更多细节在这里](https://stackoverflow.com/a/28522310/388389)：

```
@echo off

echo starting script

goto :end_comments
 comented line 
 one more commented line
:end_comments

echo continue with the script

(
    echo demonstration off
    rem/||(
      lines with
      comments
    )
    echo multiline comment inside
    echo brackets
) 
```

使用宏美化了相同的技术：

```
@echo off

::GOTO comment macro
set "[:=goto :]%%"
::brackets comment macros
set "[=rem/||(" & set "]=)"

::testing
echo not commented 1

%[:%
  multi 
  line
  comment outside of brackets
%:]%

echo not commented 2

%[:%
  second multi 
  line
  comment outside of brackets
%:]%

::GOTO macro cannot be used inside for
for %%a in (first second) do (
    echo first not commented line of the %%a execution
    %[%
        multi line
        comment
    %]%
    echo second not commented line of the %%a execution
) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-09-20T15:48:22.227

我更喜欢使用：

*   REM 征求意见
*   &REM 用于内联注释

例子：

```
@echo off
set parameter1=%1%
REM test if the parameter 1 was received
if defined parameter1 echo The parameter 1 is %parameter1% &REM Display the parameter 
```

# grails - 在 IntelliJ/Grails 中更改 Ivy 缓存位置

> ID：11269341
> 
> 赞同：1
> 
> 时间：2012-06-29T21:41:23.753
> 
> 标签：grails, intellij-idea, ivy

我试过谷歌搜索和搜索stackoverflow，但我的本地开发困境也没有找到解决方案。

我在 Win7 上的用户目录与备份服务同步，我想避免同步，但无论我到目前为止发现什么都不会更改 Ivy 缓存位置。

我尝试了以下方法：

*   设置 GRAILS_OPTS 环境变量
*   设置 GRAILS_AGENT_CACHE_DIR 环境变量
*   修改了我的 BuildConfig.groovy 并进入`System.setProperty "ivy.default.ivy.user.dir", "C:\\.ivy2"`

我最近才开始使用 IntelliJ，所以我不确定 IDE 是否是根本原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T01:48:15.287

把它放在你的 BuildConfig.groovy 或 ~/.grails/settings.groovy

```
grails.dependency.cache.dir = "C:\\.ivy2" 
```

# haskell - Haskell - 如何生成排列

> ID：11269342
> 
> 赞同：0
> 
> 时间：2012-06-29T21:41:26.857
> 
> 标签：haskell, permutation

我怎样才能创建一个函数来懒惰地为字符'_'和'*'进行排列，如下所示：

例如：

```
Main> function 3
["___","*__","_*_","__*","**_","_**","*_*","***"] 
```

第一个元素仅由 组成`_`，接下来的 3 个是列出的排列：`*__`，第二个 3 是列出的排列，`**_`最后一个元素仅包含`*`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:41:41.657

这是另一个“正确顺序”版本：

```
function :: Int -> [String]
function c = concatMap helper $ zip (reverse [0..c]) [0..c]

helper :: (Int, Int) -> [String]
helper (c,            0)          = [replicate c '_']
helper (0,            c)          = [replicate c '*']
helper (cUnderscores, cAsterisks) = map ('_' :) (helper (cUnderscores - 1, cAsterisks))
                                 ++ map ('*' :) (helper (cUnderscores, cAsterisks - 1)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T00:09:04.690

你可能想看看`replicateM`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:46:03.683

```
let k = ["_", "*"]
let p = [ a ++ b ++ c | a <- k, b <- k, c <- k ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T22:23:08.027

“正确顺序”版本：

```
import Data.List

function k = concatMap (nub . permutations . pat) [0..k]
  where pat x = replicate x '*' ++ replicate (k-x) '_' 
```

不过，我不知道如何在恒定时间内从一种排列过渡到另一种排列。

# plone - plone.app.multilingual 可以用于部分翻译的网站吗？

> ID：11269346
> 
> 赞同：5
> 
> 时间：2012-06-29T21:42:12.457
> 
> 标签：plone, multilingual

我正在尝试让 plone.app.multilingual 与当前为英文的网站合作，但将部分翻译。我使用的是 plone.app.multilingual 而不是更熟悉的 LinguaPlone，因为 LinguaPlone 不支持的站点使用的敏捷内容类型。

我有一个测试站点可以玩。当我翻译一页时，它似乎为英语内容创建了一个 /en 文件夹，而（例如）为法语创建了一个 /fr 文件夹。我可以在页面的两种语言变体之间来回切换，但是一旦我使用法语，我就看不到所有其他英语页面。作为站点访问者，这是没有用的，它忽略了这样一个事实，即尽管浏览器可能设置为首选法语，但它也可能接受英语。我已经选择了我认为允许回退到默认站点语言的相关选项，如果我知道页面的 URL，它可以让我查看它们，但如果我看不到内容，那就没什么用了首先。

plone.app.multilingual 是否可以以这样一种方式工作，即用户可以看到**某种**语言的内容页面，即使它不是他们自己的，或者是我将网站转换为使用 Archetypes 的唯一选择？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:33:02.297

LinguaPlone 将以相同的方式处理这种情况：使所有内容“语言中立”，除非有翻译。

通过将所有内容标记为“语言中立”，无论设置了何种语言偏好，最终用户都会找到并显示它。现在，如果您的任何内容*确实*有翻译，您确实需要将英语设置为原始版本的语言，以便仅在选择英语时才会显示。

为此，您可能可以使用`plone.multilingual.events.IObjectTranslatedEvent`.

至于内容的创建`en/`和`fr/`位置，这是`ITranslationLocator`适配器的任务（从 开始`plone.multilingual.interfaces`，您可以覆盖该适配器以提供您自己的选择。请参阅[默认实现](https://github.com/plone/plone.multilingual/blob/master/src/plone/multilingual/factory.py)以了解当前的工作方式。

# php - 使用 AS3/PHP 将 wav 文件压缩为一个小的 m4a 或 mp3 文件

> ID：11269349
> 
> 赞同：0
> 
> 时间：2012-06-29T21:42:37.500
> 
> 标签：php, actionscript-3, mp3, wav, m4a

是否可以使用 AS3 或 PHP 将 wav 文件压缩为小的 m4a 或 mp3 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:53:15.603

为了节省服务器流量和 cpu 你应该使用 as3 在用户 PC 上压缩它，这是我使用的库： [https ://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy](https://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:09:59.687

你可以在你的服务器上使用 ffmpeg 来做到这一点！

您将在 Sourceforge找到[ffmpeg 的 PHP 扩展。](http://ffmpeg-php.sourceforge.net/)

在项目网站上下载[ffmpeg 。](http://ffmpeg.org/)

# javascript - 页面滚动到页面上的每个井号？

> ID：11269356
> 
> 赞同：0
> 
> 时间：2012-06-29T21:43:15.653
> 
> 标签：javascript, jquery

我有一个使用其他 PHP 文件加载外部内容的 PHP 页面。我正在使用包含，所以它应该很简单。我删除了一个 scrollTo 函数（如下）。但是，自从我这样做后，当我重新加载主页时，我可以在 URL 中看到它非常快速地滚动到每个井号标记，并在最后一部分结束。

我真的不知道是什么脚本导致了这种情况。我使用了 Chrome Elements，但我什么也没看到。

在过去的两个小时里，我一直试图弄清楚这一点，所以我真的需要另一双眼睛来帮助我弄清楚这是从哪里来的。所以请快速浏览一下。

这是现在变得疯狂的实时测试页面。

[测试页面](http://period3designs.com/tmss/l1/terminals/4100.php)

这是我最初的JS代码，然后删除

```
$().ready(function(){

    var currentAnchor1 = null;
    //Check if it has changes
    if(currentAnchor1 != document.location.hash){
        currentAnchor1 = document.location.hash;
        //if there is not anchor, the loads the default section
        if(!currentAnchor1){
            query1 = "page=1";
        }
        else
        {
            //Creates the  string callback. This converts the url URL/#main&id=2 in URL/?section=main&id=2
            var splits1 = currentAnchor1.substring(1).split('&');
            //Get the section
            var page1 = splits1[0];
            delete splits1[0];
            var query1 = "page=" + page1;       
        }

        //Send the petition 
        $.scrollTo( document.location.hash, 500, { easing:'elasout' });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:52:16.793

这来自您的 PHP 页面。4100.php 正在输出内联 JavaScript。

**您不能`<!--`在 JavaScript 中使用 for 块注释，**因此您的`window.location`调用确实仍在进行。（对于 JavaScript 中的多行注释，用`/*`and将行括起来`*/`。）

第 2485 行：

```
<script type="text/javascript">
<!--
window.location = "http://www.period3designs.com/tmss/l1/terminals/4100.php#4100errors"
//-->
</script> 
```

第 4779 行：

```
 <script type="text/javascript">
<!--
window.location = "http://www.period3designs.com/tmss/l1/terminals/4100.php#4100guides"
//--> 
```

第 5319 行：

```
 <script type="text/javascript">
<!--
window.location = "http://www.period3designs.com/tmss/l1/terminals/4100.php#4100howto"
//-->
</script> 
```

第 5393 行：

```
<script type="text/javascript">
<!--
window.location = "http://www.period3designs.com/tmss/l1/terminals/4100.php#4100functions"
//-->
</script> 
```

第 5467 行：

```
 <script type="text/javascript">
<!--
window.location = "http://www.period3designs.com/tmss/l1/terminals/4100.php#4100menus"
//-->
</script> 
```

# actionscript-2 - 使用字符串获取关联数组中的信息

> ID：11269358
> 
> 赞同：0
> 
> 时间：2012-06-29T21:43:32.920
> 
> 标签：actionscript-2

我有一个将两个字符串作为参数的函数，我想使用这些参数来获取关联数组中保存的数据。

```
var myVar:Object = {};

myVar.value = 10;

function getStuff(v:String, vl:String){

//...

} 
```

在这种情况下，`v`=`"myVar"`和`vl`= `"value"`。

如何转换`v`为变量名`'myVar'`并`v1`转换为`'value'`以便我可以访问数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:50:25.517

对不起，如果这不起作用，因为我只能在这里测试 AS3，但请试试这个：

```
function getStuff(v:String, vl:String){
  return eval(v + "." + vl);
} 
```

最终

```
function getStuff(v:String, vl:String){
  return eval("_gobal." + v + "." + vl);
} 
```

# griffon - 如何在代理后面安装 Griffon 插件

> ID：11269360
> 
> 赞同：0
> 
> 时间：2012-06-29T21:43:57.167
> 
> 标签：griffon

我正在尝试通过发出此命令将一些插件安装到 Griffon

```
griffon install-plugin miglayout 
```

但我得到错误：

> 欢迎使用 Griffon 1.0.0 - [http://griffon-framework.org/](http://griffon-framework.org/)在 Apache Standard License 2.0 下获得许可 Griffon 主页设置为：/usr/local/share/Griffon-1.0.0
> 
> 基本目录：/home/biske/Griffon examples/form 运行脚本 /usr/local/share/Griffon-1.0.0/scripts/InstallPlugin_.groovy 解决依赖关系... 依赖关系在 304 毫秒内解决。环境设置为开发无法安装插件 miglayout [离线：false]

我正在使用 Griffon Griffon 1.0.0。它失败了，因为网络有代理。如果网络中启用了代理，有没有办法安装插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:46:41.797

您是否尝试过使用 add-proxy / set-proxy 命令？

[http://griffon.codehaus.org/guide/latest/ref/Command%20Line/add-proxy.html](http://griffon.codehaus.org/guide/latest/ref/Command%20Line/add-proxy.html)

[http://griffon.codehaus.org/guide/latest/ref/Command%20Line/set-proxy.html](http://griffon.codehaus.org/guide/latest/ref/Command%20Line/set-proxy.html)

[http://griffon.codehaus.org/guide/latest/ref/Command%20Line/clear-proxy.html](http://griffon.codehaus.org/guide/latest/ref/Command%20Line/clear-proxy.html)

[http://griffon.codehaus.org/guide/latest/ref/Command%20Line/remove-proxy.html](http://griffon.codehaus.org/guide/latest/ref/Command%20Line/remove-proxy.html)

# php - 在 PHP 中更改来自 MySQL 的项目的顺序

> ID：11269361
> 
> 赞同：3
> 
> 时间：2012-06-29T21:44:05.910
> 
> 标签：php, mysql, database

我需要从 MySQL 数据库中提取项目列表，然后使用 PHP 显示它们。我已经想通了。我的问题是如何更改项目的顺序。我知道您可以根据数据库中的某个字段（例如“id”或类似字段）对它们进行排序。

我需要做的是对 2 个字段进行计算，然后根据该计算对结果列表进行排序。例如，我需要显示 db 中的 Integer-X 和 Integer-Y。我还需要显示 Integer-X 减去 Integer-Y 的结果，并且我需要根据 Integer-X 减去 Integer-Y 的结果对响应列表进行排序。

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:45:28.083

您可以将计算放在 ORDER BY 子句中：

```
ORDER BY integerXField - integerYField 
```

此外，如果您为 SELECT 列表中的计算提供别名，则可以按别名排序：

```
SELECT
    ... integerXField - integerYField as theDiff
..
ORDER BY theDiff 
```

# jquery - 在 Firefox 的 jQuery $ajax 调用中使用 xhrFields: { withCredentials: true } 时的状态码 = 0

> ID：11269362
> 
> 赞同：6
> 
> 时间：2012-06-29T21:44:16.273
> 
> 标签：jquery, ajax, firefox, cookies, cors

我在用着

```
xhrFields : { 
  withCredentials: true 
} 
```

在 jQuery $ajax 调用中，以便在我的查询中发送会话 cookie。

该调用在我的 apache 日志上提供了正确的状态代码（401/200 取决于是否设置了 cookie），但 Firefox 总是收到状态 = 0（即 $.ajax() 中的错误）如果我删除此 xhrFields 部分，状态代码正常（但未发送 cookie）

这是我在 Firefox 中使用 xhrFields 设置收到的响应对象：

```
{"readyState":0,"responseText":"","status":0,"statusText":"error"} 
```

我的 Apache 配置启用了 CORS，并且还允许 Access-Control-Allow-Credentials（这里是相应的 HTTP 标头）

```
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: * 
```

AJAX 调用或网络服务器配置中是否缺少某些内容？

注意：这在 Chrome 中运行良好

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T19:27:48.270

您可能必须比 * 更明确地指定 Access-Control-Allow-Origin 标头。

[https://developer.mozilla.org/En/HTTP_access_control#Requests_with_credentials](https://developer.mozilla.org/En/HTTP_access_control#Requests_with_credentials)说：

> **重要提示：**在响应凭据请求时，服务器必须指定域，并且不能使用通配符。

# php - 在 PHP 中创建和搜索用户帖子

> ID：11269365
> 
> 赞同：-1
> 
> 时间：2012-06-29T21:44:21.420
> 
> 标签：php, ruby-on-rails

这是我第一次进入后端开发，在过去的项目中主要担任设计角色。我正在做一个个人项目，并充实了我认为是某种逻辑的东西。只是分解了一些非常基本的用户任务。

**核心用户操作**：

*   用户可以创建新帖子

    用户可以按标签、创建日期和其他内容查找其他用户的帖子。这是在一个中央搜索区域完成的。（搜索字符串：“狗鞍”，检索提及狗鞍、狗和鞍的帖子）

    可以从帖子联系帖子的创建者。

    用户可以删除他们创建的帖子。

**我需要以下指导/建议：**

我应该为用户捕获哪些数据？什么框架最适合我所描述的应用程序动态？（ROR、Python、PHP 等。我目前是一个单人团队）

有没有我可以参考的开源项目？

我非常专注于自学，并且可以利用好的建议！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:06:04.633

鉴于您概述的相当通用的要求并且您刚刚进入开发领域，您应该尝试建立一个框架。这样您就不需要从头开始编写所有内容。您仍然可以进行大量控制，但许多常用函数、类等的好处将加速您的开发。

试试像 CodeIgniter for PHP 这样的东西。请参阅[http://codeigniter.com/](http://codeigniter.com/)。网上有很多教程可以帮助您入门。例如，请参阅[http://net.tutsplus.com/sessions/codeigniter-from-scratch/](http://net.tutsplus.com/sessions/codeigniter-from-scratch/)。

您所描述的根本不建议使用特定语言。ROR、Python、PHP——您可以使用其中任何一种来创建您所描述的内容。许多人认为 PHP 的学习曲线不如 ROR 和 Python 陡峭，这就是我推荐它的原因。但是，这些其他语言的框架也可以为您提供与代码点火器相同的好处。

# android - Intent.putExtra AsyncTask 上的错误

> ID：11269366
> 
> 赞同：0
> 
> 时间：2012-06-29T21:44:31.717
> 
> 标签：android, service, android-asynctask

我正在使用 asy 任务来执行加载过程，而服务应该负责连接。我在线上遇到了一些错误：

```
serviceIntent.putExtra("receiver",new DownloadReceiver(new Handler())); 
```

当我使用 AsyncTask 和服务进行连接时。我的 AsyncTask 代码是：

```
 private class DownloadReceiver extends ResultReceiver{
public DownloadReceiver(Handler handler) {
    super(handler);
}

@Override
   protected void onReceiveResult(int resultCode, Bundle resultData) {
    super.onReceiveResult(resultCode, resultData);
  //  if (resultCode == DownloadService.UPDATE_PROGRESS) {
        int progress = resultData.getInt("progress");
     //   mProgressDialog.setProgress(progress);
     //   if (progress == 100) {
       //     mProgressDialog.dismiss();
        }
    }

  protected String doInBackground(String... params) {

    Intent serviceIntent = new Intent();
            serviceIntent.putExtra("url", "www.google.com");

            new DownloadReceiver(new Handler());
            serviceIntent.putExtra("receiver",new DownloadReceiver(new Handler()));
    serviceIntent.setAction("connection.DownloadService");
    context.startService(serviceIntent); 
```

那么可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:24:18.427

假设您的 Intent 修改是正确的，然后将您的`Intent`代码从 AsyncTask 的 doInBackground 方法移动到 onPostExecute 函数中。

您不能从 doInBackground 内部修改任何视图，您必须在保证在事件调度线程上运行的回调函数之一中进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:07:16.047

```
if( this error == compile time error){
`DownloadReceiver` class should implements the   Parcelable interface 
}
else{ 
```

我认为您遇到了一个错误，因为您在方法中创建了[Handler](http://developer.android.com/reference/android/os/Handler.html)对象，该 `doInBackground()`方法在 UI 线程之外的另一个线程中执行，然后在您的应用程序中的某个位置`UI Thread`使用该`Handler`对象访问。注意：要正确地做到这一点，您应该创建`Handler`in `UI Thread`。为你的案子做这件事真是个好地方。

```
onPostExecute 
```

或者把它作为一个实例变量。并将其传递给构造函数；

}

# apache - ANT 构建配置依赖于核心文件

> ID：11269369
> 
> 赞同：1
> 
> 时间：2012-06-29T21:44:43.917
> 
> 标签：apache, ant, dependencies, config

目前正在开发一个由“核心”目录和多个单独的“产品”目录组成的 PHP/HTML/JS 项目。

目录结构如下...

```
Core
    JS
    PHP
Product1
    JS
    PHP
    build.xml
Product2
    JS
    PHP
    build.xml 
```

ANT 构建脚本位于每个相应的产品目录中。触发 ANT 构建时，核心文件被复制到部署目录中，然后各自的产品文件被合并到（并在必要时覆盖）同一个目录。ANT 然后运行 ​​Qunit、PHPUnit 测试、连接和最小化 javascript 等。然后将这个新的部署目录复制到 CI 环境中。

我的问题是，这是最好的方法吗？有没有办法引入核心文件的版本控制 - 所以 product1 可能会使用 v1.2 的核心文件？

这种方法在本地运行应用程序时也会导致问题 - 每次更改文件时，都需要再次运行构建脚本。

有人对如何改进有任何建议吗？

# python - 如何在 Python 中重载？

> ID：11269372
> 
> 赞同：1
> 
> 时间：2012-06-29T21:44:52.003
> 
> 标签：python

我正在尝试制作一个在不同参数类型上调用时执行不同操作的函数。具体来说，其中一项功能应具有签名

```
def myFunc(string, string): 
```

另一个应该有签名

```
def myFunc(list): 
```

鉴于不允许我指定参数是字符串还是列表，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:47:30.150

Python 不支持重载，即使是按参数计数。你需要做：

```
def foo(string_or_list, string = None):
    if isinstance(string_or_list, list):
        ...
    else:
        ... 
```

这很愚蠢，或者只是重新考虑您的设计以不必超载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T21:50:14.933

在[http://code.activestate.com/recipes/577065-type-checking-function-overloading-decorator/](http://code.activestate.com/recipes/577065-type-checking-function-overloading-decorator/)有一个食谱可以满足您的需求；

基本上，你用@takes 和@returns 类型声明来包装你的函数的每个版本；当您调用该函数时，它会尝试每个版本，直到找到不会引发类型错误的版本。

**编辑：**这是一个精简版；这可能不是一件好事，但如果你必须这样做，方法如下：

```
from collections import defaultdict

def overloaded_function(overloads):
    """
    Accepts a sequence of ((arg_types,), fn) pairs
    Creates a dispatcher function
    """
    dispatch_table = defaultdict(list)
    for arg_types,fn in overloads:
        dispatch_table[len(arg_types)].append([list(arg_types),fn])

    def dispatch(*args):
        for arg_types,fn in dispatch_table[len(args)]:
            if all(isinstance(arg, arg_type) for arg,arg_type in zip(args,arg_types)):
                return fn(*args)
        raise TypeError("could not find an overloaded function to match this argument list")

    return dispatch 
```

这是它的工作原理：

```
def myfn_string_string(s1, s2):
    print("Got the strings {} and {}".format(s1, s2))

def myfn_list(lst):
    print("Got the list {}".format(lst))

myfn = overloaded_function([
    ((basestring, basestring), myfn_string_string),
    ((list,), myfn_list)
])

myfn("abcd", "efg")   # prints "Got the strings abcd and efg"
myfn(["abc", "def"])  # prints "Got the list ['abc', 'def']"
myfn(123)             # raises TypeError 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T22:53:30.233

不是一个完美的解决方案，但如果第二个字符串参数永远不会合法`None`，您可以尝试：

```
def myFunc( firstArg, secondArg = None ):
    if secondArg is None:
        # only one arg provided, try treating firstArg as a list
    else:
        # two args provided, try treating them both as strings 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T21:48:46.127

`*args`可能是更好的方法，但您可以执行以下操作：

```
def myFunc(arg1, arg2=None):
  if arg2 is not None: 
     #do this
  else:
     #do that 
```

但这可能是一种糟糕的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T21:46:26.503

将其定义为采用可变参数：

```
def myFunc(*args): 
```

`len`然后，您可以通过和检查参数的数量和类型，`isinstance`并将调用路由到适当的特定于案例的函数。

但是，如果您使用可选的命名参数，它可能会使代码更清晰。如果你根本不使用重载会更好，这有点不是python的方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T21:51:07.417

你不能——例如一个类实例方法可以在运行时插入。

例如，如果一个类有多个`__init__`，那么最好使用多个`@classmethod`，例如`from_strings`or`from_sequence`

# google-app-engine - 如何动态传递参数以映射 GAE mapreduce 上的函数？

> ID：11269381
> 
> 赞同：7
> 
> 时间：2012-06-29T21:45:39.967
> 
> 标签：google-app-engine, mapreduce

我需要运行一个动态的mapreduce 作业，因为每次运行mapreduce 作业时（例如，响应用户请求），都需要将参数传递给map 和reduce 函数。

我该如何做到这一点？我在文档中的任何地方都看不到如何在运行时对 map 和 reduce 进行动态处理。

```
class MatchProcessing(webapp2.RequestHandler):

  def get(self):
      requestKeyID=int(self.request.get('riderbeeRequestID'))
      userKey=self.request.get('userKey')
      pipeline = MatchingPipeline(requestKeyID, userKey)
      pipeline.start()
      self.redirect(pipeline.base_path + "/status?root=" + pipeline.pipeline_id)

class MatchingPipeline(base_handler.PipelineBase):
    def run(self, requestKeyID, userKey):
        yield mapreduce_pipeline.MapreducePipeline(
            "riderbee_matching",
            "tasks.matchingMR.riderbee_map",
            "tasks.matchingMR.riderbee_reduce",
            "mapreduce.input_readers.DatastoreInputReader",
            "mapreduce.output_writers.BlobstoreOutputWriter",
            mapper_params={
                "entity_kind": "models.rides.RiderbeeRequest",
                "requestKeyID": requestKeyID,
                "userKey": userKey,
            },
            reducer_params={
                "mime_type": "text/plain",
            },
            shards=16)

def riderbee_map(riderbeeRequest):
    # would like to access the requestKeyID and userKey parameters that were passed in mapper_params
    # so that we can do some processing based on that

    yield (riderbeeRequest.user.email, riderbeeRequest.key().id())

def riderbee_reduce(key, values):
    # would like to access the requestKeyID and userKey parameters that were passed earlier, perhaps through reducer_params
    # so that we can do some processing based on that

    yield "%s: %s\n" % (key, len(values)) 
```

请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T23:24:23.923

我很确定您可以在 mapper_parameters 中指定参数，然后从上下文模块中读取它们。有关更多详细信息，请参阅[http://code.google.com/p/appengine-mapreduce/wiki/UserGuidePython#Mapper_parameters](http://code.google.com/p/appengine-mapreduce/wiki/UserGuidePython#Mapper_parameters)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T19:23:04.507

这是使用上下文模块从映射器函数访问映射器参数的方法：

```
from mapreduce import context

def riderbee_map(riderbeeRequest):
    ctx = context.get()
    params = ctx.mapreduce_spec.mapper.params
    requestKeyID = params["requestKeyID"] 
```

# javascript - jquery在页面加载时为页面背景颜色设置动画

> ID：11269391
> 
> 赞同：4
> 
> 时间：2012-06-29T21:46:34.130
> 
> 标签：javascript, jquery

我试图在页面加载时更改网页的背景颜色。我认为这不应该起作用，“body”是我希望操纵的正确元素。我使用[http://docs.jquery.com/UI/Effects/animate](http://docs.jquery.com/UI/Effects/animate)作为参考。

```
$(document).ready(function(){
    $("body").animate({ backgroundColor: "#000000" }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T21:48:58.430

**工作演示** [http://jsfiddle.net/aqrvA/8/](http://jsfiddle.net/aqrvA/8/)

请添加 Jquery ui 库，Rest 会像火箭一样工作！<你的代码很好>

*Jquery UI 链接：http:* [//jqueryui.com/](http://jqueryui.com/)

希望这可以帮助，`:)`

**脚本：**

```
 <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
  <script type="text/javascript" src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script> 
```

**代码**

```
$(document).ready(function(){
    $("html body").animate({ backgroundColor: "#000000" }, 1000);
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T21:48:28.613

您不能**仅**使用jQuery 为颜色设置动画。您必须使用 jQuery UI，将动画扩展到颜色。[看这里](http://jqueryui.com/demos/animate/):)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T21:57:31.030

> “jQuery UI 效果核心扩展了 animate 函数，使其也能够为颜色设置动画。这些过渡可以为背景和边框颜色设置动画，并接受以 hex、rgb 和颜色名称指定的颜色。”

在加载之前，您将无法使用动画功能`jquery-ui.js`

[https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js)

这就是你需要的。

# node.js - childprocess.stdout.on('data', callback) 没有触发

> ID：11269397
> 
> 赞同：3
> 
> 时间：2012-06-29T21:47:01.550
> 
> 标签：node.js, stdio, spawn

我正在尝试捕获子进程的输出并通过 websocket 发送，但我在捕获`on.(data, callback)`事件时遇到问题。

```
var subscriberProc = spawn('./stdoutsub', 
                      ['mytopic', '--clientid', 'node-dispatcher'], 
                      {cwd: '/Users/oskar/projects/others/rsmb_1/mac/'});

subscriberProc.stdout.on('data', function(data) {
  console.log('-> "' + data + '"');
  wsServer.send(data);
}); 
```

如果我更改为以下内容，stdoutsub 进程将使用预期数据打印到节点进程 stdout。

```
var subscriberProc = spawn('./stdoutsub', 
                      ['mytopic', '--clientid', 'node-dispatcher'], 
                      {cwd: '/Users/oskar/projects/others/rsmb_1/mac/', 
                       stdio: 'inherit'}); 
```

我在 OSX 上运行节点版本 0.8.1。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:29:25.677

我遇到了类似的问题（在某些情况下我错过了输出）并得出结论，在我有机会开始收听它之前，生成的进程正在喷出输出。

我通过使用类似于以下 Node.js 文档中的代码解决了这个问题：

```
var fs = require('fs'),
    spawn = require('child_process').spawn,
    out = fs.openSync('./out.log', 'a'),
    err = fs.openSync('./out.log', 'a');

var child = spawn('prg', [], {
    detached: true,
    stdio: [ 'ignore', out, err ]
}); 
```

然后我读了 out.log，到目前为止，一切对我来说都很好。

# java - 在 Java 中生成 Swing 表单并验证用户输入？

> ID：11269399
> 
> 赞同：1
> 
> 时间：2012-06-29T21:47:10.073
> 
> 标签：java, swing

是否有任何库可以从如下模型在 Swing JFrame 中生成用户表单，**并**使用模型中定义的约束验证用户输入？

```
<SomeObject>
  <FirstParameter name="firstParameter" displayName="First" 
dataType="Integer" min="1" max="100" />
  <SecondParameter name="secondParameter" displayName="Second" dataType="String">
    <PossibleValue value="Dog" />
    <PossibleValue value="Mouse" />
  </SecondParameter>
</SomeObject> 
```

所以lib应该为“FirstParameter”生成JTextField，为“SecondParameter”生成JList。按下“提交”按钮后，如果某些数据不正确（不满足约束），用户应该会弹出窗口。有正则表达式来检查数据会很好。

# encoding - 如何对对象 System.DirectoryServices.Protocols.BerConverter.Encode("???", myData) 使用 BER 编码

> ID：11269401
> 
> 赞同：3
> 
> 时间：2012-06-29T21:47:18.937
> 
> 标签：encoding, character-encoding, ldap, x509certificate, directoryservices

我需要对 BER 数据进行编码和解码。.NET 有类`System.DirectoryServices.Protocols.BerConverter`

静态方法需要我在第一个参数中输入一个字符串，如下图

```
 byte[] oid = { 0x30, 0xD, 0x6, 0x9, 0x2A, 0x86, 0x48, 0x86, 0xF7, 0xD, 0x1, 0x1, 0x1, 0x5, 0x0 }; // Object ID for RSA

        var result2 = System.DirectoryServices.Protocols.BerConverter.Decoding("?what goes here?", oid); 
```

BER 编码用于 LDAP、证书，并且在许多其他格式中很常见。

我会很高兴有信息告诉我如何在这个类上编码或解码。Stack Overflow 或 Google（或 Bing）的前几页上没有关于此的内容。

**问题**

*   如何使用 BER 解码将上面的字节数组转换为对应的 OID？

*   如何解析（或尝试解析）DER 或 BER 格式的 SubjectPublicKeyInfo ASN.1 数据？

*   看来 DER 编码\解码类是 .NET 框架的内部。如果有，他们在哪里？（我想请 connect.microsoft.com 将这些成员公开）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T03:09:25.187

> 如何使用 BER 解码将上面的字节数组转换为对应的 OID？

提取 OID 字节数组后，可以使用`OidByteArrayToString()`. 我已经包含了下面的代码，因为我在 .NET 库中找不到类似的函数。

> 如何解析（或尝试解析）DER 或 BER 格式的 SubjectPublicKeyInfo ASN.1 数据？

我也无法在 .NET SDK 中找到 TLV 解析器。下面是 BER TLV 解析器的实现，`BerTlv`. 由于 DER 是 BER 的子集，因此解析将以相同的方式工作。给定一个 BER-TLV`byte[]`数组，它将返回`BerTlv`支持访问子 TLV 的对象列表。

> 看来 DER 编码\解码类是 .NET 框架的内部。如果有，他们在哪里？（我想请 connect.microsoft.com 将这些成员公开）

也许其他人可以回答这个问题。

**概括**

这是一个如何使用下面提供的代码的示例。[我使用了您在上一篇文章](https://stackoverflow.com/q/11269079/845279)中提供的公钥数据。BerTlv 可能应该被扩充以支持查询，例如`BerTlv.getValue(rootTlvs, '/30/30/06');`.

```
public static void Main(string[] args)
{
    string pubkey = "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDrEee0Ri4Juz+QfiWYui/E9UGSXau/2P8LjnTD8V4Unn+2FAZVGE3kL23bzeoULYv4PeleB3gfmJiDJOKU3Ns5L4KJAUUHjFwDebt0NP+sBK0VKeTATL2Yr/S3bT/xhy+1xtj4RkdV7fVxTn56Lb4udUnwuxK4V5b5PdOKj/+XcwIDAQAB";
    byte[] pubkeyByteArray = Convert.FromBase64String(pubkey);
    List<BerTlv> rootTlvs = BerTlv.parseTlv(pubkeyByteArray);

    BerTlv firstTlv = rootTlvs.Where(tlv => tlv.Tag == 0x30).First();//first sequence (tag 30)
    BerTlv secondTlv = firstTlv.SubTlv.Where(tlv => tlv.Tag == 0x30).First();//second sequence (tag 30)
    BerTlv oid = secondTlv.SubTlv.Where(tlv => tlv.Tag == 0x06).First();//OID tag (tag 30)

    string strOid = OidByteArrayToString(oid.Value);
    Console.WriteLine(strOid);
} 
```

输出：

> 1.2.840.113549.1.1.1

**OID 编码/解码**

```
public static byte[] OidStringToByteArray(string oid)
{
    string[] split = oid.Split('.');
    List<byte> retVal = new List<byte>();

    //root arc
    if (split.Length > 0)
        retVal.Add((byte)(Convert.ToInt32(split[0])*40));

    //first arc
    if (split.Length > 1)
        retVal[0] += Convert.ToByte(split[1]);

    //subsequent arcs
    for (int i = 2; i < split.Length; i++)
    {
        int arc_value = Convert.ToInt32(split[i]);
        Stack<byte> bytes = new Stack<byte>();
        while (arc_value != 0)
        {
            byte val = (byte) ((arc_value & 0x7F) | (bytes.Count == 0 ? 0x0:0x80));
            arc_value >>= 7;
            bytes.Push(val);
        }
        retVal.AddRange(bytes);
    }
    return retVal.ToArray();
}

public static string OidByteArrayToString(byte[] oid)
{
    StringBuilder retVal = new StringBuilder();

    //first byte
    if (oid.Length > 0)
        retVal.Append(String.Format("{0}.{1}", oid[0] / 40, oid[0] % 40));

    // subsequent bytes
    int current_arc = 0;
    for (int i = 1; i < oid.Length; i++)
    {
        current_arc = (current_arc <<= 7) | oid[i] & 0x7F;

        //check if last byte of arc value
        if ((oid[i] & 0x80) == 0)
        {
            retVal.Append('.');
            retVal.Append(Convert.ToString(current_arc));
            current_arc = 0;
        }
    }

    return retVal.ToString();
} 
```

**BER-TLV 解析器**

```
class BerTlv
{
    private int tag;
    private int length;
    private int valueOffset;
    private byte[] rawData;
    private List<BerTlv> subTlv;

    private BerTlv(int tag, int length, int valueOffset, byte[] rawData)
    {
        this.tag = tag;
        this.length = length;
        this.valueOffset = valueOffset;
        this.rawData = rawData;
        this.subTlv = new List<BerTlv>();
    }
    public int Tag
    {
        get { return tag; }
    }
    public byte[] RawData
    {
        get { return rawData; }
    }
    public byte[] Value
    {
        get
        {
            byte[] result = new byte[length];
            Array.Copy(rawData, valueOffset, result, 0, length);
            return result;
        }
    }
    public List<BerTlv> SubTlv
    {
        get { return subTlv; }
    }
    public static List<BerTlv> parseTlv(byte[] rawTlv)
    {
        List<BerTlv> result = new List<BerTlv>();
        parseTlv(rawTlv, result);
        return result;
    }
    private static void parseTlv(byte[] rawTlv, List<BerTlv> result)
    {
        for (int i = 0, start=0; i < rawTlv.Length; start=i)
        {
            //parse Tag
            bool constructed_tlv = (rawTlv[i] & 0x20) != 0;
            bool more_bytes = (rawTlv[i] & 0x1F) == 0x1F;
            while (more_bytes && (rawTlv[++i] & 0x80) != 0) ;
            i++;

            int tag = Util.getInt(rawTlv, start, i-start);

            //parse Length
            bool multiByte_Length = (rawTlv[i] & 0x80) != 0;

            int length = multiByte_Length ? Util.getInt(rawTlv, i+1, rawTlv[i] & 0x1F) : rawTlv[i];
            i = multiByte_Length ? i + (rawTlv[i] & 0x1F) + 1: i + 1;

            i += length;

            byte[] rawData = new byte[i - start];
            Array.Copy(rawTlv, start, rawData, 0, i - start);
            BerTlv tlv = new BerTlv(tag, length, i - length, rawData);
            result.Add(tlv);

            if (constructed_tlv)
                parseTlv(tlv.Value, tlv.subTlv);

        }
    }
} 
```

这是一个实用程序类，其中包含上面类中使用的一些函数。为了清楚起见，它被包括在内。

```
class Util
{
    public static string getHexString(byte[] arr)
    {
        StringBuilder sb = new StringBuilder(arr.Length * 2);
        foreach (byte b in arr)
        {
            sb.AppendFormat("{0:X2}", b);
        }
        return sb.ToString();
    }
    public static byte[] getBytes(String str)
    {
        byte[] result = new byte[str.Length >> 1];
        for (int i = 0; i < result.Length; i++)
        {
            result[i] = (byte)Convert.ToInt32(str.Substring(i * 2, 2), 16);
        }
        return result;
    }
    public static int getInt(byte[] data, int offset, int length)
    {
        int result = 0;
        for (int i = 0; i < length; i++)
        {
            result = (result << 8) | data[offset + i];
        }
        return result;
    }
} 
```

# android - Android 设备上的 gstreamer-java + gstreamer_ndk_bundle + JNA 无法播放声音文件？

> ID：11269403
> 
> 赞同：1
> 
> 时间：2012-06-29T21:47:20.407
> 
> 标签：android, gstreamer, jna, java-gstreamer

我已经为平台 8、10 和 13 构建了 gstreamer_ndk_bundle，没有任何错误和问题。现在我正试图让 gstreamer-java 在 android 上工作，我想我让它*工作*了。JNA 运行良好（在我的 lib 上进行了测试），我已将所有缺少`Structure.setFieldOrder()`的调用添加到 gstreamer-java 代码中，删除了 Android 上不存在的所有类和包，它可以在模拟器上编译和运行。另外，我在该平台模拟器上使用了为特定平台编译的 gstreamer 库。

我使用此代码播放 Mp3 文件：

```
File file = new File(getExternalFilesDir(null),"demo_tunes.mp3" );

try 
{
    InputStream is = getResources().openRawResource(R.raw.test);
    OutputStream os = new FileOutputStream(file);
    byte[] data = new byte[is.available()];
    is.read(data);
    os.write(data);
    is.close();
    os.close();
} 
catch (IOException e) 
{
    Log.w("ExternalStorage", "Error writing " + file, e);
}

Gst.init("AudioPlayer", new String[]{"--gst-plugin-path=/data/data/org.gstreamer.marko/lib"});

Pipeline pipe  = new Pipeline("PipeLine"); 
Element src = ElementFactory.make("filesrc","Input File"); 
src.set("location", file.getAbsolutePath()); 
Element decode = ElementFactory.make("decodebin2", "Decode");
Element sink = ElementFactory.make("audioflingersink", "Sink");
pipe.addMany(src, decode, sink); 
Element.linkMany(src, decode, sink);

pipe.play(); 
```

所有需要的库及其依赖项都是这样加载的：

```
static
{

    System.loadLibrary("glib-2.0");
    System.loadLibrary("gmodule-2.0");
    System.loadLibrary("gthread-2.0");
    System.loadLibrary("gobject-2.0");
    System.loadLibrary("gstreamer-0.10");

    //Libraries for base plugins
    System.loadLibrary("gstbase-0.10");
    System.loadLibrary("gstpbutils-0.10");          
    System.loadLibrary("gstinterfaces-0.10");
    System.loadLibrary("gstvideo-0.10");
    System.loadLibrary("gstplaybin");

    //Base plugins
    System.loadLibrary("gstcoreelements");
    System.loadLibrary("gstautodetect");

    System.loadLibrary("gsttag-0.10");
    System.loadLibrary("gstaudio-0.10");
    System.loadLibrary("gstriff-0.10");
    System.loadLibrary("ogg");
    System.loadLibrary("gstogg");
    System.loadLibrary("gstaudioflinger");
    System.loadLibrary("mad");
    System.loadLibrary("gstmad");

    System.loadLibrary("gstdecodebin2");
    System.loadLibrary("gstautodetect"); 
} 
```

应用程序运行，但我没有听到任何声音！此外，我还尝试将设备的音量调到最大，但也没有声音：

```
 AudioManager audman = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
        audman.setStreamVolume(AudioManager.STREAM_MUSIC, audman.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);
        audman.setStreamVolume(AudioManager.STREAM_SYSTEM, audman.getStreamMaxVolume(AudioManager.STREAM_SYSTEM), 0);
        audman.setStreamVolume(AudioManager.STREAM_DTMF, audman.getStreamMaxVolume(AudioManager.STREAM_DTMF), 0); 
```

在 Log cat 输出中，我可以看到创建了 audioflinger sink 但没有声音：

```
06-29 20:07:09.407: GstAudioFlingerSink(462): gst_audioflinger_sink_getcaps,0x0
06-29 20:07:09.434: GstAudioFlingerSink(462): creating ringbuffer
06-29 20:07:09.434: GstAudioFlingerSink(462): created ringbuffer @0x1fc810
06-29 20:07:09.447: GstAudioFlingerSink(462): >gst_android_audioringbuffer_open_device
06-29 20:07:09.447: GstAudioFlingerSink(462): gst_audioflinger_sink_open
06-29 20:07:09.447: audioflinger_wrapper(462): Create AudioTrack successfully 0x1f6e70
06-29 20:07:09.447: GstAudioFlingerSink(462): create a new flinger, 0x1f6e70 
```

**我错过了什么？**我也尝试了这个`PlayBin`，`PlayBinMediaPlayer`并尝试了OGG文件，也运行了，但没有声音......

# c# - 从3点计算反比

> ID：11269404
> 
> 赞同：-1
> 
> 时间：2012-06-29T21:47:26.163
> 
> 标签：c#, math, graph, curve-fitting

如果已经有人问过这个问题，我深表歉意——我不确定在这里使用的正确术语，所以如果有的话，希望它能帮助像我这样的其他人找到任何被标记为欺骗的东西。

我正在寻找从 3 个点为代码（理想情况下是 C# 或 Javascript）创建曲线的公式 - 公式应采用 y = a/(t+b) + c 的形式，其中 t 是时间 - 水平轴 - y 是纵轴。显然，a、b 和 c 只是用于图形拟合。

我该怎么办？我应该使用现有的库吗？

源数据有超过 3 个数据点可用，我只是在寻找将 1/x 曲线拟合到数据的最简单方法 - 因此，例如，如果需要 4 个点来获得精度，则很容易作为输入提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:22:10.073

如果您正在寻找适合表格的功能

```
 y(t) = a/(t + b) + c 
```

对于一组数据点，您将面临非线性最小二乘问题，您可以使用 Gauss-Newton 或 Levenberg-Marquardt 方法。但是，当您的近似值是多项式的比率时，有一种名为的旧算法`Loeb's algorithm`可用于生成良好的（但不是最好的 - 可以证明它不会收敛到最佳近似值）近似值。它通过线性化最小二乘问题并产生迭代最小二乘解决方案来工作（尽管在实践中您将通过一次迭代获得良好的结果）。我为我的博士学位研究了这个算法，我强烈推荐它用于任何你想使用多项式比率来近似数据点的实际问题（你的例子是非常简单的例子）。

缺点是该算法非常陈旧，您可能很难找到合适的文档。如果可以的话，实现起来并不比标准线性最小二乘近似更复杂。如果您的问题在这里没有得到更好的答案，请考虑使用谷歌搜索。如果您找不到合适的信息，请告诉我，我会将我的论文上传到我的网站（包含方法的实现细节），您可以下载它。

正如我所说，您可能会在这里得到一个简单得多的答案，但如果没有，那肯定是您可以选择的。

# sublimetext2 - Sublime Text 2 是否有在文件资源管理器中查找当前文档的键盘快捷键？

> ID：11269407
> 
> 赞同：18
> 
> 时间：2012-06-29T21:48:21.110
> 
> 标签：sublimetext2

我经常使用`Ctrl`+`P`打开文件，但是我希望能够让文件资源管理器扩展它的视图，这样我就可以看到我打开的文件在哪里，以及同一目录中还有哪些其他文件。

鉴于我打开了一个文件，是否有一个键盘快捷键可以在文件资源管理器中导航到该文件？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-01T09:12:44.107

使用上下文菜单中的“在侧栏中显示”选项（鼠标右键单击）。

该命令是`reveal_in_side_bar`，您可以创建一个键绑定（Preferences > Key Bindings - Users）。一个例子：

```
{ "keys": ["alt+."], "command": "reveal_in_side_bar" } 
```

问候

# liferay - 哪个是 IBM WebSphere Portal / WCM 菜单的 Liferay 等价物？

> ID：11269408
> 
> 赞同：0
> 
> 时间：2012-06-29T21:48:24.543
> 
> 标签：liferay, portal, websphere-portal, web-content

我已经使用 WPS 和 WCM 开发了几年，现在我也在学习 Liferay。我忍不住比较了这些功能，我知道在 Liferay 中有些事情是不同的。

我想知道管理以下简单示例的最佳实践：

*   带有旋转木马的简单页面，带有多个图像和链接
*   页面中插入的谷歌分析（可在大多数页面中重复使用）

以下是我在 IBM WPS 中如何解决它：

*   在每个页面中调用的带有 Google Analytics 代码的 HTML 组件（我在 Liferay 中找不到如何执行此操作）
*   图像和链接的内容定义。
*   为每个图像和链接创建多个内容。
*   创建一个以轮播形式显示内容列表的菜单（我在 Liferay 中也找不到如何执行此操作）

我知道 Liferay 有一个列表 portlet 和具有可重复项的内容。我知道我可以使用这些，但是如果我可以拥有每个图像/链接的内容和一个可重用的 HTML 代码片段，它会更有用。

我应该如何以最有效的方式在 liferay 中解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:54:38.923

您必须使用 Liferay Web Content portlet 来创建轮播。这在控制面板中可用。对于您的特定要求，您必须创建一个动态 Web 内容，其中涉及使用 Velocity 语言和 javascript 来迭代一组图像。事实上，如果你看到 Liferay 的网站，主页上就有这种东西。

对于 Google Analytics，有两种方法。Liferay 不仅仅用于创建一个站点，它还可以满足多个站点的创建。每个站点都有一组页面。您可以再次从控制面板创建站点。在站点设置中，您可以选择添加谷歌分析 ID。因此，每个站点都可以有不同的谷歌分析 ID。

如果您想在全球范围内执行此操作，我们将在 liferay 的主题中添加谷歌分析脚本片段。

为了更好地理解 Liferay 中使用的所有行话，您至少必须阅读 Liferay 的文档。在经历它的同时，你忘记了你以前学到的东西。Liferay 拥有比 Websphere 门户网站更多的功能。

[http://www.liferay.com/documentation/liferay-portal/6.1/user-guide](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide)

# asp.net-mvc - MVC在剃刀中循环，生成的下拉列表未选择值

> ID：11269411
> 
> 赞同：6
> 
> 时间：2012-06-29T21:48:31.623
> 
> 标签：asp.net-mvc, razor

我在 razor 中有一个循环，它会多次生成模板。在模板里面有一个下拉列表

```
@Html.DropDownlistFor(x=>x.pasajero[i].option, Model.optionItems) 
```

下拉列表被呈现，但是没有为该`selected="selected"`属性设置任何选项。

我已经能够使用相同的值在循环外正确呈现下拉列表。任何想法为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T23:36:49.747

尝试：

```
@Html.DropDownlistFor(x => x.pasajero[i].option,new SelectList(Model.optionItems,"IdField","DisplayField", Model.pasajero[i].option)) 
```

确保`x.pasajero[i].option`具有与 相同的类型`IdField`。

# file-io - fortran 中的最大“字符串”长度

> ID：11269421
> 
> 赞同：3
> 
> 时间：2012-06-29T21:49:21.460
> 
> 标签：file-io, fortran

fortran 是否有最大“字符串”长度？

我将从一个可能有很长行的文件中读取行。我现在看到的每行大约有 1.3k 个字符，但它们可能有更多。我正在将文件中的每一行读取到一个字符 * 5000 变量中，但是如果将来我得到更多，将其设置为字符 * 5000000 变量是不是很糟糕？有最大值吗？有没有比制作非常大的字符变量更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T22:44:39.150

由于通常的 Fortran IO 是基于记录的，因此将行读入字符串意味着知道最大字符串长度。另一种可能的设计：使用流 IO 和 Fortran 将忽略记录边界。以比最长行短的固定长度块读取文件。复杂之处在于处理跨块边界拆分的项目。实用性取决于问题中未给出的细节。

PS 来自 Adams 等人的“The Fortran 2003 Handbook”：“字符串允许的最大长度取决于处理器。” -- 表示依赖于编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:43:49.643

最大值将取决于实现。对于您的情况，我可以想到以下几点：

```
 character(:),allocatable :: ch

  l = 5
  do
    allocate(character(l) :: ch)
    read(unit,'(a)',iostat=io) ch
    if (ch(l-4:l) = '     ' .or. io/=0) exit
    deallocate(ch)
    l = l * 2
  end do 
```

显然不适用于 pad='no' 并且如果您希望记录中带有 spacec 的长区域。

# c++ - 基于配置文件的通用 GUI

> ID：11269423
> 
> 赞同：1
> 
> 时间：2012-06-29T21:49:30.193
> 
> 标签：c++, user-interface, configuration-files

我应该开发一个简单的 GUI 框架（C++，wxWidgets），它只能通过 ini / config 文件进行配置，我想知道是否已经有这样的东西了。

举一个（非常简单的）例子可能会有所帮助：

假设我的配置文件如下所示：

```
menu-item = file-dialog
menu-item = execute(sh ~home/myFooBarProgramm param1 param2) 
```

当它解析配置时，我希望它创建一个带有两个菜单项的 GUI，一个打开文件对话框，另一个运行指定的程序。

所以，我的问题是：是否有任何软件可以做这样或类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:42:24.417

那应该做 QML，这里有一些例子和演示：[http ://doc.qt.io/qt-4.8/qdeclarativeexamples.html](http://doc.qt.io/qt-4.8/qdeclarativeexamples.html)

# java - 使用 GenerationType.IDENTITY 时在帮助表中获取 bytea 类型的字段

> ID：11269424
> 
> 赞同：0
> 
> 时间：2012-06-29T21:49:35.560
> 
> 标签：java, hibernate

我正在使用 Hibernate 创建我的数据库方案。有一个名为“tbl_articles”的表和另一个名为“tbl_categories”的表。要建立 nn 关系，需要一个辅助表（“tbl_articles_categories”）。

以下是所有必要的实体：

```
@Entity
@Table( name = "tbl_articles" )
public class Article implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @Column( nullable = false )
    @GeneratedValue( strategy = GenerationType.IDENTITY )
    private Integer id;

    // other fields...

    public Integer getId()
    {
        return id;
    }

    public void setId( Integer id )
    {
        this.id = id;
    }

    // other fields...
}

@Entity
@Table( name = "tbl_categories" )
public class Category implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @Column( nullable = false )
    @GeneratedValue( strategy = GenerationType.IDENTITY )
    private Integer id;

    // other fields

    public Integer getId()
    {
        return id;
    }

    public void setId( Integer id )
    {
        this.id = id;
    }

    // other fields...
}

@Entity
@Table( name = "tbl_articles_categories" )
@AssociationOverrides({
    @AssociationOverride( name = "pk.article", joinColumns = @JoinColumn( name = "article_id" ) ),
    @AssociationOverride( name = "pk.category", joinColumns = @JoinColumn( name = "category_id" ) )
})
public class ArticleCategory
{
    private ArticleCategoryPK pk = new ArticleCategoryPK();

    public void setPk( ArticleCategoryPK pk )
    {
        this.pk = pk;
    }

    @EmbeddedId
    public ArticleCategoryPK getPk()
    {
        return pk;
    }

    @Transient
    public Article getArticle()
    {
        return pk.getArticle();
    }

    public void setArticle( Article article )
    {
        pk.setArticle( article );
    }

    @Transient
    public Category getCategory()
    {
        return pk.getCategory();
    }

    public void setCategory( Category category )
    {
        pk.setCategory( category );
    }
}

@Embeddable
public class ArticleCategoryPK implements Serializable
{
    private static final long serialVersionUID = 1L;

    @ManyToOne
    @ForeignKey( name = "tbl_articles_categories_fkey_article_id" )
    private Article article;

    @ManyToOne
    @ForeignKey( name = "tbl_articles_categories_fkey_category_id" )
    private Category category;

    public ArticleCategoryPK( Article article, Category category )
    {
        setArticle( article );
        setCategory( category );
    }

    public ArticleCategoryPK()
    {
    }

    public Article getArticle()
    {
        return article;
    }

    public void setArticle( Article article )
    {
        this.article = article;
    }

    public Category getCategory()
    {
        return category;
    }

    public void setCategory( Category category )
    {
        this.category = category;
    }
} 
```

现在，我在文章表和类别表中得到了我想要的序列类型。但是查看我的帮助表，没有预期的字段 article_id 和 category_id 每个整数类型 - 而是有文章和类别 bytea 类型。

这里有什么问题？

编辑：对不起，忘了提到我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:12:11.357

我已经通过添加和解决了`@JoinColumn`这个`ArticleCategoryPK.article`问题`ArticleCategoryPK.category`

# javascript - JavaScript、正则表达式和空结果

> ID：11269425
> 
> 赞同：1
> 
> 时间：2012-06-29T21:49:38.290
> 
> 标签：javascript, regex

我写了这个正则表达式：`<(a*)\b[^>]*>.*?</\1>`

并在此正则表达式测试站点上进行了测试：`http://gskinner.com/RegExr/?2tntr`

正则表达式的重点是通过站点 HTML 并找到所有链接。然后它应该在一个数组中返回这些供我操作。

在正则表达式测试站点上，它运行良好，但是在我的站点上使用 JavaScript 时，它返回 null。

JavaScript 看起来像这样：

```
var data = $('#mainDivOnMiddleOfPage').html();

var pattern = "<(a*).*href=.*>.*</a>";
var modi = "g";

var patt = new RegExp(pattern, modi);
var result = patt.exec(data); 
```

jQuery 获取页面的内容。这是经过测试和验证的。

问题是，为什么这在 JavaScript 中返回 null 而在正则表达式测试器中应该返回什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:57:55.497

所有`<a>`链接：

```
<a[^>]*?\bhref=['\"](.*?)['\"] 
```

仅限绝对链接（以 开头`http`）：

```
<a[^>]*?\bhref=['\"](http.*?)['\"] 
```

* * *

JavaScript 代码：

```
var html = '<a href="test.html">';
var m = html.match(/<a[^>]*?\bhref=['"](.*?)['"]/);
print (m[1]); 
```

[在此处](http://ideone.com/D4387)查看并测试代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:22:09.563

“正则表达式的重点是通过网站 HTML 并找到所有链接。然后它应该将这些返回到一个数组中供我操作。”

我不会添加另一个正则表达式答案，但只想指出，如果您拥有文档（不仅仅是 html），那么通过链接集合更容易。这包含所有`<a href="">`的，但也包含所有`<area>`元素：

```
for (var link, links = document.links, n = links.length, i=0; i<n; i++){
    link = links[i];
    switch (link.tagName){
        case "A":
            //do something with the link
            break;
        case "AREA":
            //do something with the area.
            break;
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T22:23:22.617

继续在此处发布此内容，因为我认为这是您想要的 - 但是，它不是 RegEx 解决方案。

```
$(function(){
    $.ajax({
        url: "test.htm",
        success: function(data){
            var array_of_links = $.makeArray($("a",data));
            // do your stuff here
        }
    });

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T22:04:34.600

我使用下面的代码来做同样的事情，它对我有用，试试看

```
var data = document.getElementById('mainDivOnMiddleOfPage').textContent;

var result = data.match(/<(a*).*href=.*>.*<\/a>/);
​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T22:33:16.243

我有意识地选择了一个答案。然而，值得一提的是，当前的 REGEX 解决方案匹配标签，而不是孤立的实际 HREF。

这就是 JavaScript 失败的地方，因为它有点简单的 REGEX 实现不允许在`g`指定全局标志时捕获子组。

解决此问题的一种方法是利用 REGEX 替换回调。这将只获得链接 HREF，而不是标签。

```
var html = document.body.innerHTML,
    links = [];
html.replace(/<a[^>]*?href=('|")(.*?)\1/gi, function($0, $1, $2) {
    links.push($2);
});
//links is now an array of hrefs 
```

它还使用反向引用来关闭`href`属性，即确保开始和结束引号都是单引号或双引号，而不是混合的。

旁注：正如其他人所提到的，在可能的情况下，您希望对此进行 DOM，而不是 REGEX。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T22:30:08.000

你的问题是你没有编译你的正则表达式：

```
patt.compile(); 
```

您必须在使用该`exec()`方法之前调用它。

# distance - 以米为单位获取距离 maxscript

> ID：11269434
> 
> 赞同：1
> 
> 时间：2012-06-29T21:50:20.387
> 
> 标签：distance, units-of-measurement, maxscript

有没有办法以米为单位获得两个物体之间的距离？

我现在正在尝试这个

```
 units.displayType =#metric
        myDistance = distance aObject1 aObject2

        label1.text = distance  as string 
```

当然，这给了我这些对象之间的距离，但以 3dsmax 为单位......

因此，如果有人知道方法或公式，我将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:55:56.560

maxscript帮助中有一个专门用于此的完整主题，[Units Struct - Accessing System and Display Units](http://docs.autodesk.com/3DSMAX/14/ENU/MAXScript%20Help%202012/index.html?url=files/GUID-DB50F450-C3D1-47A5-98A2-A3460171003-1997.htm,topicNumber=d28e671230)

您需要的代码如下所示：

```
label1.text = units.formatValue myDistance 
```

# php - Codeigniter 创建动态侧边栏

> ID：11269437
> 
> 赞同：0
> 
> 时间：2012-06-29T21:50:35.033
> 
> 标签：php, codeigniter, templates, sidebar

我一直在寻找一种灵活的方法来在不同的页面中生成不同的侧边栏。目标是将自定义链接传递到每个侧边栏。模板库对我的应用程序来说似乎有点过分，所以我开发了一个简单的解决方案。我不确定这是否是最好的解决方案。我的问题是你怎么看？非常感谢您的建议！

**1** . 在你的控制器中添加一个私有函数来加载你的侧边栏视图：

```
/**
 * The function has 2 arguments. 
 * $title is the sidebar widget title.
 * $widget will contain an array of links to be added in the sidebar widget.
 */

private function sidebar($title, $widget)   
{
    $widget['title'] = $title;
    $this->load->view('includes/sidebar', $widget); 
} 
```

**2.**在要加载自定义侧边栏的控制器函数中，调用私有函数`sidebar()`并将所需的侧边栏数据传递给它。

下面是一个名为`edit`用于编辑帖子的控制器函数。在示例中，我需要加载一个带有选项的侧边栏，以查看和删除我所在的帖子：

```
function edit($post_id = '')
{
    //your code, form validation, etc...

    //Prepare sidebar widget links
    //Array key is link url, array value is link name
    $widget['links'] = array (
        'posts/single/' . $post_id => 'View post',
        'posts/remove/' . $post_id => 'Remove post'
    );
    $this->sidebar('Options', $widget);  //load sidebar  
} 
```

**3.**最后是显示从控制器传递的自定义数据的侧边栏视图：

```
<div id="sidebar">
    <ul>
        <li class="widget">
            <div class="label"><?php echo $title; ?></div>
            <ul>
                <?php foreach ($links as $link => $value): ?>
                    <li><?php echo anchor($link, $value); ?></li>
                <?php endforeach; ?>
            </ul>
        </li>
    </ul>
</div> 
```

**结论**

将以下代码添加到自定义侧边栏标题和链接的任何控制器函数中：

```
$widget['links'] = array (
            'controller/function' => 'Link Name 1',
            'controller/function' => 'Link Name 2',
            'controller/function' => 'Link Name 3'
);
$this->sidebar('Widget Title', $widget); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:39:01.193

我认为这可以完成。我不是 CodeIgniter 方面的专家，但我可以告诉你这很好。您应该始终确保的一件事是验证传递给函数的数据。在这种情况下：

```
private function sidebar($title=FALSE, $widget=FALSE) {
   if ($title && $widget) {
      //process
   }
   else
      return FALSE
   }
} 
```

另一种方法是将链接传递给模板（不是侧边栏模板，而是您的主模板：

```
$data['sidebar'] = array('link/link'=>'My Link');
$this->load->view('mytemplate', $data); 
```

在模板中加载侧边栏模板并将数据传递给它：

```
<html>
<!--All my html-->
<?php $this->load->view('includes/sidebar', $data['sidebar']); ?>
</html> 
```

这只是另一种选择。但你所做的一切都很好。

# codeigniter - 如何将 Codeigniter 中的 CSRF 包含到 ajax 数据中

> ID：11269439
> 
> 赞同：5
> 
> 时间：2012-06-29T21:50:47.837
> 
> 标签：codeigniter, jquery

我正在尝试将一些数据传递到我的控制器中，但出现 500 错误。经过一番研究，我发现这是由于没有发送 CSRF 令牌造成的。

看来我需要将其与数据一起包括在内：`<?php echo $this->security->get_csrf_token_name(); ?>:"<?php echo $this->security->get_csrf_hash(); ?>"`

我的 JS 很弱，所以我对如何更改它以包含上述内容有点困惑。

```
<script type="text/javascript"> 
$(document).ready(function() {
    $("#order").sortable({
        update : function (event, ui) {
            order = $('#order').sortable('serialize');
            $.ajax({
                url: "<?=base_url().'admin/category/update_order'?>",
                type: "POST",
                data: order,
                success: function(response){
                    console.log(response);
                }
            });
        }
    });
}
);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:06:34.083

令牌需要在 的`data`参数中传递`$.ajax`。

这应该可行，但请参阅下面的注释。

`order['<?php echo $this->security->get_csrf_token_name(); ?>'] = '<?php echo $this->security->get_csrf_hash(); ?>';`

但是，这里有一些不好的做法。主要是您不应该在您的 javascript 中使用 PHP，因为这会阻止您将 javascript 作为单独的文件访问（这很好，因为浏览器会缓存它以使您的页面加载更快并消耗更少的带宽）。

最好像这样将令牌存储在您的订单`<form>`html 中。

`<input type="hidden" name="<?php echo $this->security->get_csrf_token_name(); ?>" value="<?php echo $this->security->get_csrf_hash(); ?>" />`

然后它将与您的其余表单数据一起序列化。

您还可以将 URL 存储在表单的操作属性中。这将帮助您的脚本优雅地降级，并将 URL 保留在一个位置而不是 2 个位置。

```
<form id="order" method="post" action="<?=base_url()?>admin/category/update_order"> 
```

在`$.ajax`调用中，`url: $('#order').attr('action'),`假设 #order 是实际的表单 ID，请使用类似的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T23:53:22.730

CI 将 csrf 存储在 cookie 中，您可以从那里获取它：

```
var csrf = $.cookie('csrf_cookie_name'); 
```

这种方法的缺点是 jQuery 本身不提供 cookie 访问。所以你需要一个[jquery 插件](http://plugins.jquery.com/project/Cookie)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T22:03:31.373

您是对的，只需将 CSRF 令牌添加到您的帖子数据中即可。您可以使用 jQuery 的 $.extend 函数将您已经创建的订单对象与 CSRF 令牌数据合并，如下所示：

```
$.extend(alerts, {
'<?php echo $this->security->get_csrf_token_name(); ?>' :
'<?php echo $this->security->get_csrf_hash(); ?>' }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-16T04:38:20.067

Here's a different approach. Simple function in Auth.php that returns the csrf token name and hash in JSON format. Then, in our javascript, make two ajax calls, the first to grab the csrf creds and insert them into hidden form fields, the second to handle our actual form submit.

// place function in Auth.php controller

```
public function get_csrf()
{
    $csrf['csrf_name'] = $this->security->get_csrf_token_name();
    $csrf['csrf_token'] = $this->security->get_csrf_hash();

    echo json_encode($csrf);
} 
```

// myFunction()

```
<script type="text/javascript">
function myFunction() {

    // first ajax call to grab the csrf name and token
    // from our get_csrf() function in Auth.php
    $.ajax({
        type: "GET",
        dataType: 'json',
        url: "https://<your_domain>.com/auth/get_csrf", //replace with your domain
        success: function (data) {

            // assign csrf name and token to variables
            csrf_name = data.csrf_name;
            csrf_token = data.csrf_token;

            // assign field1 and field2 field values to variables
            var form_field1 = document.getElementById('field1').value;
            var form_field2 = document.getElementById('field2').value;

            // insert csrf creds into form
            $('#csrftoken').attr('name', csrf_name);
            $('#csrftoken').val(csrf_token);

            // second ajax call -- this is our form handler
            $.ajax({
                type: "POST",
                url: "https://<your_domain>.com/<your_controller>/<your_function>", //replace with your domain/controller/function
                data: {
                    // ES6 computed property keys are great...
                    [csrf_name] : csrf_token,
                    "field1" : form_field1,
                    "field2" : form_field2
                      },
                success: function(data) {

                    // handle the return from your form submit
                    if (data == "ok") {
                        console.log("Success!");
                        $("#infoMessage").html("<p>Success</p>").fadeIn(300);

                    } else {

                        console.log("Oops!");
                        $("#infoMessage").html("<p>Oops!</p>");

                    }

                }
            });

        }
    });

}
</script> 
```

// html

```
<div id="infoMessage"></div>

<form method="post" accept-charset="utf-8">

    <input type="hidden" id="csrftoken" name="" value="" />

    <label for="field1">Field 1:</label> <br />
    <input type="text" name="field1" id="field1"  />

    <label for="field2">Field 2:</label> <br />
    <input type="text" name="field2" id="field2"  />

    <input type="button" name="submit" value="SUBMIT" onclick="myFunction()" />

</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T18:54:13.610

另一种解决方案是使用 .serialize()：

```
$.post("user/save", $('#frmUser').serialize(),function(html){
        $("#results").html(html);
}); 
```

这将找到存储 CSRF 数据的隐藏字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T22:53:11.560

我扩展`form_helper`为`MY_form_helper.php`向我自己的表单生成代码提供 csrf 令牌 - 你可以使用类似的东西：

```
 function secure_form() {
        $CI =& get_instance();
        return '<input type="hidden" name='.$CI->security->get_csrf_token_name().' value='.$CI->security->get_csrf_hash().'>';
    } 
```

# python - 更改文本中的两行

> ID：11269440
> 
> 赞同：1
> 
> 时间：2012-06-29T21:50:54.000
> 
> 标签：python, file-io, editing

到目前为止，我有一个 python 脚本，大部分是为我目前正在从事的项目编写的，并且遇到了障碍。我基本上运行了一个程序，它会输出以下输出文件（称为 big.dmp）：

```
)O+_05 Big-body initial data  (WARNING: Do not delete this line!!)
) Lines beginning with `)' are ignored.
)---------------------------------------------------------------------
  style (Cartesian, Asteroidal, Cometary) = Cartesian
  epoch (in days) =    1365250.
)---------------------------------------------------------------------
COMPSTAR r=5.00000E-01 d=3.00000E+00  m= 0.160000000000000E+01
  4.570923967127310E-01  1.841433531828977E+01  0.000000000000000E+00
 -6.207379670518027E-03  1.540861575481520E-04  0.000000000000000E+00
  0.000000000000000E+00  0.000000000000000E+00  0.000000000000000E+00 
```

现在有了这个文件，我需要编辑 epoch 行和以 COMPSTAR 开头的行，同时保持从积分到积分的其余信息不变，因为最后 3 行包含我的对象的笛卡尔坐标，本质上是程序输出的内容.

我知道如何使用`f = open('big.dmp', 'w')`和`f.write('text here')`创建初始文件，但是如何将最后三行读入新的 big.dmp 文件以进行下一次集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:25:15.190

如果您的文件*格式*在行号方面是*固定的，则此解决方案将仅更改两行：*

```
with open('big.dmp') as inf, open('out.txt', 'w') as outf:
    data = inf.readlines()
    data[4] = '  epoch (in days) = 9999.\n'      # line with epoch
    data[6] = 'COMPSTAR r=2201 d=3330  m= 12\n'  # line with COMPSTAR
    outf.writelines(data) 
```

产生这个输出文件：

```
)O+_05 Big-body initial data  (WARNING: Do not delete this line!!)
) Lines beginning with `)' are ignored.
)---------------------------------------------------------------------
  style (Cartesian, Asteroidal, Cometary) = Cartesian
  epoch (in days) = 9999.
)---------------------------------------------------------------------
COMPSTAR r=2201 d=3330  m= 12
  4.570923967127310E-01  1.841433531828977E+01  0.000000000000000E+00
 -6.207379670518027E-03  1.540861575481520E-04  0.000000000000000E+00
  0.000000000000000E+00  0.000000000000000E+00  0.000000000000000E+00 
```

显然，如果行号不一致，这将不起作用，但我想我会提供它，以防您的数据格式在行号方面是一致的*。*

此外，由于它一次将整个文件读入内存，因此对于真正的大文件来说，它不是一个理想的解决方案。

使用打开文件的优点`with`是，当您完成文件或遇到异常时，它们会自动为您关闭。

有更灵活的解决方案（搜索字符串，逐行处理文件），但如果您的数据是固定的且很小，那么利用这些因素没有不利之处。聪明的人曾经说过“简单胜于复杂”。（Python之禅）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:15:46.540

大概是这样的？

```
infile = open('big1.dmp')
outfile = open('big2.dmp', 'w')

for line in infile:
    if line.startswith(')'):
        # ignore comments
        pass
    elif 'epoch' in line:
        # do something with line
        line = line.replace('epoch', 'EPOCH')
    elif line.startswith('COMPSTAR'):
        # do something with line
        line = line.replace('COMPSTAR', 'comparison star')
    outfile.write(line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T00:04:13.540

这是一个更容变化的版本：

```
import re

reg_num = r'\d+'
reg_sci = r'[-+]?\d*\.?\d+([eE][+-]?\d+)?'

def update_config(s, finds=None, replaces=None, **kwargs):
    if finds is None:    finds = update_config.finds
    if replaces is None: replaces = update_config.replaces

    for name,value in kwargs.iteritems():
        s = re.sub(finds[name], replaces[name].format(value), s)
    return s

update_config.finds = {
    'epoch': r'epoch \(in days\) =\s*'+reg_num+'\.',
    'r':     r' r\s*=\s*' + reg_sci,
    'd':     r' d\s*=\s*' + reg_sci,
    'm':     r' m\s*=\s*' + reg_sci
}
update_config.replaces = {
    'epoch': 'epoch (in days) ={:>11d}.',
    'r':     ' r={:1.5E}',
    'd':     ' d={:1.5E}',
    'm':     ' m= {:1.15E}'
}

def main():
    with open('big.dmp') as inf:
        s = inf.read()

    s = update_config(s, epoch=1365252, r=0.51, d=2.99, m=1.1)

    with open('big.dmp', 'w') as outf:
        outf.write(s)

if __name__=="__main__":
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T22:11:17.593

有点难以理解您想要什么，但假设您只想删除不以 ) 开头的行：

```
text = open(filename).read()
lines = text.split("\n")
result = [line for line in lines if not line.startswith(")") 
```

或者，一个班轮：

```
[line for line in open(file_name).read().split("\n") if not line.startswith(")")] 
```

# mysql - 如何在 MySQL 中按日期获取具有不同列和公共键的最新记录？

> ID：11269444
> 
> 赞同：1
> 
> 时间：2012-06-29T21:51:46.647
> 
> 标签：mysql

我有一个类似于这样的数据集：

```
id   product_id   size       color     price   created_date
------------------------------------------------------------------
1    24           small      black     9.99    2012-06-21 00:00:00
2    24           small      red       9.99    2012-06-23 00:00:00
3    24           medium     black     11.99   2012-06-24 00:00:00
4    24           medium     red       11.99   2012-06-24 00:00:00
5    24           large      black     12.99   2012-06-25 00:00:00
6    24           large      red       12.99   2012-06-26 00:00:00
7    24           small      black     8.99    2012-06-27 00:00:00
8    24           medium     black     10.99   2012-06-29 00:00:00
9    24           large      red       13.99   2012-06-30 00:00:00
10   24           medium     red       10.99   2012-07-01 00:00:00 
```

我的预期结果集是：

```
id   product_id   size       color     price   created_date
------------------------------------------------------------------
2    24           small      red       9.99    2012-06-23 00:00:00
5    24           large      black     12.99   2012-06-25 00:00:00
7    24           small      black     8.99    2012-06-27 00:00:00
8    24           medium     black     10.99   2012-06-29 00:00:00
9    24           large      red       13.99   2012-06-30 00:00:00
10   24           medium     red       10.99   2012-07-01 00:00:00 
```

因此，换句话说，从表中选择所有 product_id = 24 和 size/color 是唯一的，并且只返回 created_date 的最新条目。

我不确定解决这个问题的最佳方法是什么。通过临时表进行子选择？内部联接？某种独特/独特的组合？我可能让这变得比它必须的更困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:55:21.893

您需要获得[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT   mytable.*
FROM     mytable NATURAL JOIN (
  SELECT   size, color, MAX(created_date) AS created_date
  FROM     mytable
  GROUP BY size, color
) AS t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/05d19/1/0)上查看。

# python - Wikimapia API 显示地图

> ID：11269446
> 
> 赞同：0
> 
> 时间：2012-06-29T21:51:50.407
> 
> 标签：python, wikimapia

我对 API 非常陌生，因此我决定研究 Wikimapia API 以了解 API 的真正工作原理。我目前正在卡内基梅隆大学做研究，研究主管指示我开始使用 API 并弄清楚它是如何工作的等等。现在，我必须输入纬度/经度，这将显示 500m^2 周围的地图它。这将用于自动驾驶吉普车，以补充汽车上的传感器可以感知的内容。

无论如何，所以我下载了 pymapia 并使用了 box 函数，但它所做的只是返回：

```
>>> print box(40.444663, -79.943036, 40.444842, -79.939774)

query http://api.wikimapia.org/?function=box&key=7758C23C-47DA8BA3-4205B7F8-57EB8EDD-A0808F25-F570C462-959B517B-51410DC3&bbox=40.444663,-79.943036,40.444842,-79.939774&format=json&page=1&count=50
{u'count': 50, u'language': u'en', u'has_deeper_tiles': False, u'version': u'1.0', u'found': 0, u'folder': [], u'page': 1} 
```

我该怎么处理输出？这没有任何意义.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:56:55.433

您只调用 API 的基本 URL。[API 文档](http://wikimapia.org/api)有更多关于做什么的信息。您需要传递其他参数（例如`lon_min/max`和`lat_min/max`）才能实际获取更多数据。您必须花点时间才能获得所需的数据。

# wpf - 通过 .csproj 在 Visual Studio 中加载设计时 WPF 资源

> ID：11269447
> 
> 赞同：1
> 
> 时间：2012-06-29T21:51:55.077
> 
> 标签：wpf, visual-studio-2010, csproj, design-time-data

在 Expression Blend 4 中，可以通过编辑项目文件来加载设计时资源。这是一个示例：

```
<Page Include="Properties\DesignTimeResources.xaml"
    Condition="'$(DesignTime)'=='true'
    OR ('$(SolutionPath)'!='' AND Exists('$(SolutionPath)')
    AND '$(BuildingInsideVisualStudio)'!='true'
    AND '$(BuildingInsideExpressionBlend)'!='true')">
    <Generator>MSBuild:Compile</Generator>
    <SubType>Designer</SubType>
    <ContainsDesignTimeResources>true</ContainsDesignTimeResources>
</Page> 
```

现在我一直试图在 Visual Studio 2010 中实现同样的功能，但没有成功。是否有人在 Visual Studio 中获得了像这样加载的设计时数据，还是仅使用 Expression Blend 支持此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:10:25.440

您正在寻找使用[d:DesignData 和 d:DataContext](http://msdn.microsoft.com/en-us/library/ee839627.aspx)。这是[Jag Reehal 的博客上使用 Blend 和 Visual Studio 的示例](http://www.arrangeactassert.com/how-to-use-designdata-to-populate-controls-with-design-time-data-in-silverlight-and-wpf/)。和[微软演练](http://msdn.microsoft.com/en-us/library/ee823176.aspx)

# delphi - 如何在不修改原始类的情况下将代码插入类？

> ID：11269449
> 
> 赞同：1
> 
> 时间：2012-06-29T21:52:05.263
> 
> 标签：delphi, oop, vcl, delphi-2006

我创建了一个例程来使 Delphi 可视控件的角变圆。

现在我要做的是确保每个视觉对象都像`TMemo`,`TEdit`并且`TPanel`是圆的，而不必在创建表单时为每个人调用函数。

如何从我的代码（表单单元）中为这些类中的每一个扩展 create 方法，以便它们保留类的名称和其他单元上的正常行为？

```
procedure RoundCornersOf(Control: TWinControl) ;
var
   R: TRect;
   Rgn: HRGN;
begin
   with Control do
   begin
     R := ClientRect;
     rgn := CreateRoundRectRgn(R.Left, R.Top, R.Right, R.Bottom, 20, 20) ;
     Perform(EM_GETRECT, 0, lParam(@r)) ;
     InflateRect(r, - 4, - 4) ;
     Perform(EM_SETRECTNP, 0, lParam(@r)) ;
     SetWindowRgn(Handle, rgn, True) ;
     Invalidate;
   end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:04:56.397

存在在运行时修改类的构造或技巧，例如，请参阅[在 delphi 中替换组件类](https://stackoverflow.com/q/4685863/757830)和[在运行时按需更改组件类](https://stackoverflow.com/q/9877718/757830)。但是，据我了解，您必须声明所有出现的控件类型的单独类型。

`Controls`另一种方法是在创建表单后使用和`ControlCount`属性遍历所有控件：

```
 public
    procedure AfterConstruction; override;
  end;

procedure ModifyControls(Window: TWinControl);
var
  I: Integer;
begin
  for I := 0 to Window.ControlCount - 1 do
    if Window.Controls[I] is TWinControl then
    begin
      ModifyControls(TWinControl(Window.Controls[I]));
      RoundCorners(TWinControl(Window.Controls[I]));
    end;
end;

procedure TForm1.AfterConstruction;
begin
  inherited AfterConstruction;
  ModifyControls(Self);
end; 
```

但要小心控制娱乐，这比你想象的要多。例如，更改 Edit 的`BorderStyle`属性会导致重新创建 Edit，这会撤消您的修改。在这些情况下重做修改，前提是您可以跟踪它们。

# git - 一个组的集中式 git

> ID：11269462
> 
> 赞同：0
> 
> 时间：2012-06-29T21:54:29.147
> 
> 标签：git, repository

我们有一个小型工作组，我想鼓励它在使用 SVN 后采用 git。因此，我有兴趣在充分利用 git 的同时充分利用 SVN 必须提供的中央存储库。我们往往不会有一个大型项目，而是有许多较小且不相关的项目，因此它们可能会被构建为多个 git 存储库。人们对如何前进有什么建议？几个选项：

1.  通过 ssh 实现的简单目录结构
2.  私人github
3.  石榴石

我们没有通过防火墙对机器进行 ssh 访问（见图），因此对我们来说访问本地资源意味着通过 http。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:58:01.110

私人 GitHub 对我很有吸引力，因为您永远不必担心管理 repo 服务器。[BitBucket](https://bitbucket.org/)是一个非常好的**免费**替代品，它现在支持 git，并且不为私人 repos 收费：

> 将所有 Git 和 Mercurial 源代码存储在一个具有无限私有存储库的位置。包括问题跟踪、wiki 和拉取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:51:28.373

一个 Linux 虚拟机安装在带有 Gitolite 的服务器上，多年来对我来说运行良好。最新版本允许您通过简单推送到管理存储库来更新所有其他管理任务之间的挂钩。我会极力推荐它。

# ruby-on-rails - 如何对已经有多个验证的 ActiveModel 属性进行条件验证？

> ID：11269469
> 
> 赞同：0
> 
> 时间：2012-06-29T21:55:41.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, authlogic

我正在使用 Authlogic，默认情况下会在登录、电子邮件和密码等字段上进行一些验证（长度、唯一性、格式等）。

如果存在另一个属性，我希望能够跳过附加到其中一个属性的所有验证。

这可能吗？就像是：

```
validate :email, :unless => :has_openid? 
```

然后它将跳过电子邮件属性上的格式、长度和唯一性验证。

我正在使用 Rails 3.1.x 应用程序和 authlogic 3.1.0

更新：我试图关注这篇文章，但我无法让它正常工作： [http ://erikonrails.snowedin.net/?p=242](http://erikonrails.snowedin.net/?p=242)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:52:55.473

我编写了一个解决方法并将其抽象为一个 gem： [https ://github.com/synth/conditional_attribute_validator](https://github.com/synth/conditional_attribute_validator)

宝石文件：

```
gem 'conditional_attribute_validator', :git => "git://github.com/synth/conditional_attribute_validator.git" 
```

例子：

```
class User
  include ConditionalAttributeValidator

  validate_attributes_with_condition :login, :password, :password_confirmation, :unless => :has_another_form_of_authentication?
end 
```

资源：

```
def validate_attributes_with_condition(*args)
  opts = args.extract_options!
  raise "Must have an :if or :unless option" unless opts.has_key?(:if) or opts.has_key?(:unless)

  merge_methods = self.methods.grep(/merge_.*_options/)
  args.each do |field|
    merge_methods.grep(/#{Regexp.quote(field)}/).each do |m|
      self.send(m, opts)
    end
  end
end 
```

Rails根据已指定的任何验证自动创建 merge_attr_options 方法，以便将选项合并到现有验证中*。*所以我查找这些方法并遍历它们并检查该方法是否适用于特定字段。如果是这样，我调用 merge_attr *_options*方法并传入选项。

我不太关心性能，因为这只是在初始化时执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:25:03.513

我使用 authlogic 完成此操作的方法是将块传递给`acts_as_authentic`：

```
acts_as_authentic do |config|
  with_options :unless => :has_openid? do      
    config.merge_validates_format_of_email_field_options
    config.merge_validates_length_of_email_field_options
    config.merge_validates_uniqueness_of_email_field_options
  end
end 
```

# c# - 使用 IComparer 对 xml 中的节点进行排序/排序

> ID：11269472
> 
> 赞同：1
> 
> 时间：2012-06-29T21:56:12.983
> 
> 标签：c#, xml, linq, icomparer

我需要对 xml 中的节点进行排序。我有以下代码成功地按字母顺序排列它们。但是，尽管允许使用字符串，但大部分数据都是数字的。我有一个 IComparer 设置，可以正确排序数据，因为我希望它出现在其他地方。

```
System.Xml.Linq.XDocument output = new System.Xml.Linq.XDocument(
                    new System.Xml.Linq.XElement("xml",
                from node in input.Root.Elements("training")
                orderby node.Attribute("order").Value
                select node)); 
```

我已经找到了如何在方法调用中使用 IComparer，`.OrderBy(x => x, new CustomComparer())` 但是，我还没有弄清楚如何让它与 xml 一起使用。从我在网上阅读的内容来看，我似乎无法从查询语法中调用 IComparer。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:03:31.837

你是对的，你不能使用查询表达式`orderby`子句中的重载。幸运的是，您的查询非常简单，因此您可以使用：

```
// Have a using directive for System.Xml.Linq - it'll make everything simpler!
XDocument output = new XDocument(
    new XElement("xml",
        input.Root
             .Elements("training")
             .OrderBy(node => node.Attribute("order)".Value, comparer))); 
```

# python - 是否可以通过导入向 python3 添加语句？还是我必须修改c文件并重新编译

> ID：11269473
> 
> 赞同：2
> 
> 时间：2012-06-29T21:56:20.770
> 
> 标签：python, python-3.x

在 cPython >= 3.0 中，是否可以通过导入的模块向语言添加语句？假设我想实现一个 case/switch 语句，我可以把它写成一个模块，还是我必须按照[PEP 306](http://www.python.org/dev/peps/pep-0306/)编辑 cPython 源文件并重新编译整个语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:28:22.097

假设您的新语言结构可以转换为标准 Python：是的，从技术上讲，它可以使用[import hooks](http://www.python.org/dev/peps/pep-0302/)来完成。基本上，你必须阅读文件，用有效的 Python 代替你的语言结构（这个任务很可能需要一个完整的解析器），编译生成的 Python 源代码，并返回一个模块对象。不适合胆小的人，但它在技术上是可行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T00:39:55.263

使用 if/elif 的阶梯来进行切换。不要与语言抗争。了解它擅长什么，然后做这些事情：

```
if x == 1:
    do_1()
elif x == 2:
    do_2()
elif x == 17:
    do_17()
else:
    something_else() 
```

添加语句是一项重大工作，而将它们设计好则更加困难。在 python-ideas 邮件列表上已经讨论了关于 switch 语句的讨论。阅读这些以了解所涉及的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T22:02:07.600

甚至不要尝试。您必须编辑源代码并重新编译。

相反，问问自己为什么需要一个 switch 语句，并意识到它只是没有必要。

```
def firstfunction(x):
    print(x)

def secondfunction(x):
    print(x + 15)

def thirdfunction(x):
    print(x / 15.0)

choices = {
    '5': firstfunction,
    5: secondfunction,
    30: thirdfunction,
}

if x in choices:
    choices[x](x)
else:
    print("default case") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T22:02:33.980

不，不能添加语句。您必须找到使用函数、类和/或对象的解决方法。

对于 switch/case 的情况：您可以通过多种方式进行操作。

例如，仅使用 dict：

```
def process(a):
    d = {3: lambda: func1(1, 2, 3),
         4: lambda: func2(3, 2, 1),
        }
    call = d.get(a, lambda: elsepart(a))
    return call(a) 
```

# javascript - angular.js: 修改时选择 textearea 的内容

> ID：11269476
> 
> 赞同：0
> 
> 时间：2012-06-29T21:57:14.467
> 
> 标签：javascript, events, angularjs

我想知道是否可以在修改文本区域时选择它的内容。在 jQuery 中，我会执行以下操作：

```
$("texarea").on("change", function (e) {
    $(this).select(); // the content gets selected for copy/cut operations
}); 
```

我知道直接从 Angular 控制器中操作 DOM 元素是一种不好的做法，所以如果你知道我可以如何干净地做到这一点，我很乐意学习如何！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:40:51.313

我认为您可以执行以下操作，使用`onblur`和`onfocus`属性将事件处理程序附加到您的文本字段元素。为每个编写两个函数，如下所示：

`onfocus`获取文本字段的初始内容 `onblur`获取最终内容并与初始内容进行比较，如果有差异则运行选择功能

如果您希望它是实时的，您还可以使用`onkeyup`和`onkeydown`

# apache - 如何让源代码语法在 maven-fluido-skin maven 站点皮肤中工作？

> ID：11269481
> 
> 赞同：0
> 
> 时间：2012-06-29T21:57:42.637
> 
> 标签：apache, maven, apt

基于引导程序的 maven-fluido-skin 皮肤令人赏心悦目，但我无法弄清楚如何让源代码在 apt 页面中呈现。有没有人有一个如何将 xml 或 java 代码片段放入源代码 apt 以便它呈现为在输出 html 页面中突出显示的语法的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:36:44.117

您可以通过流体皮肤的选项激活行号：

```
<project name="xxx">
  [...]
  <custom>
    <fluidoSkin>
      <sourceLineNumbersEnabled>true</sourceLineNumbersEnabled>
    </fluidoSkin>
  </custom>
  [...]
</project> 
```

这是[文档](http://maven.apache.org/skins/maven-fluido-skin/index.html)的摘录。

# html - IE7中的HTML表格太宽

> ID：11269485
> 
> 赞同：0
> 
> 时间：2012-06-29T21:58:01.483
> 
> 标签：html, css, html-table, internet-explorer-7

我有一张在 Chrome、IE8 和 IE9 中显示良好的表格。然而，在 IE7 中，表格最终比它的内容宽得多（100% 的包含元素？）。如何使表格仅与 IE7 和 IE6 中的内容一样宽（并在较新的浏览器中继续正常显示）？

这是表格：

```
<table class="SisSubDetailTable">
    <tbody>
        <tr>
            <td>Date:</td><td>10-16-11</td><td>SOID:</td><td>SUST — Sustaining                                                                                          </td>
        </tr>
        <tr>
            <td>Status:</td><td>25 characters' worth of data</td><td>Work Order:</td>
            <td>     </td>
        </tr>
        <tr>
            <td>Company:</td><td>6K8  — KAPCO</td><td>Sub:</td><td>9999 </td>
        </tr>
        <tr>
            <td>Store:</td><td>34 characters' worth of data</td><td>Export Price:</td>
            <td>$0.00</td>
        </tr>
        <tr>
            <td>Class:</td><td>26 characters' worth of data</td><td>Control Ship:</td>
            <td>N</td>
        </tr>
    </tbody>
</table> 
```

下面的 CSS 似乎使单元格变窄了，但整个表格仍然比 400px 宽得多：

```
table.SisSubDetailTable
{
    width: 400px;
}

table.SisSubDetailTable td
{
    border-width: 0;
    width: 100px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:04:18.567

您应该在 css 中设置其宽度属性。使用猜测并检查以确定您想要多大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:05:20.853

如果您还没有这样做，请以像素为单位设置值并避免使用其他单位。

# php - PHP：返回新实例与返回相同实例

> ID：11269486
> 
> 赞同：0
> 
> 时间：2012-06-29T21:58:14.170
> 
> 标签：php, class, instance

在 OOP PHP 中，当涉及到性能和单元测试时，最好让工厂返回，新实例或相同实例。

例如。每次使用一个类时创建新实例是否被认为是不好的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:08:33.833

您不想让工厂返回相同的实例。您希望他们返回新实例。这就是工厂的意义所在。[单例在 PHP 中没有用。](https://stackoverflow.com/questions/4595964/who-needs-singletons/4596323#4596323)如果您想将一个实例限制为一个实例，则创建一次并将其注入需要的位置。

在性能方面，无论您返回相同的实例还是创建一个新实例，都可以忽略不计。也就是说，除非您在 ctor 中进行非常昂贵的工作（例如连接到数据库），否则无论如何您都不应该这样做。

对于单元测试，您希望您的工厂返回新的实例而不是相同的实例，因为那将是全局状态。测试应该单独进行，而不是之前测试中的某个实例的状态仍然存在，因为这样更容易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:01:19.957

返回相同的实例最适合[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。工厂不应该关心他们返回的东西......只要它符合某些标准。

如果您的工厂返回一个数据库连接，最好返回一个单例连接而不是创建一个新连接。

# windows-phone-7 - 我需要从我的位置绘制多条路线到 Bing 地图上的预定义位置

> ID：11269488
> 
> 赞同：1
> 
> 时间：2012-06-29T21:58:21.357
> 
> 标签：windows-phone-7

我需要从我的位置绘制多条路线到 Bing 地图上的预定义位置。

但是我是WP7的新手，谁能告诉我步骤

这个答案是否足以绘制路线？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:58:11.630

请参阅[使用 Bing 地图 SOAP 服务计算路线一](http://msdn.microsoft.com/en-us/library/ee681887.aspx)文，尤其是*添加代码以计算和​​显示路线*示例。这个例子使用[MapPolyline](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.mappolyline.aspx)类来绘制路线。您可以根据需要添加任意数量的此类行。

或者，请参阅[Bing Maps for Games with Pathfinding](http://create.msdn.com/en-US/education/catalog/sample/bing_maps_pathfinding)示例，尤其是`RouteRender`类。这是 XNA 更自定义的方法。

# php - 无法将 JSON 字符串解析为数组

> ID：11269490
> 
> 赞同：0
> 
> 时间：2012-06-29T21:58:50.020
> 
> 标签：php, arrays, json

我正在使用以下 PHP 代码返回一个 json 字符串：

```
$itemURL = 'http://***.***.***/search?tag=Football&affiliate_id=&max_results=3';
$response = file_get_contents($itemURL);//curl_exec($curlHandle);
echo $response;
$response = array($response);
echo $response[0]; 
```

我得到一个看起来像这样的 json 字符串：

> [ {“ID”：“123”，“描述”：“冠军足球海军 T 恤”，“HighPrice”：16.99，“LowPrice”：16.99，“SalePrice”：null，“OnSale”：false，“URL” ：“http://www.mystore.com/itemDescription”，“ImageURL”：“http://www.mystore.com/mainstore/045.jpg”，“LargeImageURL”：“http://www.mystore. com/mainstore/045.jpg”、“ThumbnailImageURL”：“http://www.mystore.com/mainstore/045.jpg”、“MiniImageURL”：“http://www.mystore.com/mainstore/045。 jpg", "AffiliateID": "" }, { "ID": "23", "描述”：“Champion Football Navy T 恤 XL”，“HighPrice”：16.99，“LowPrice”：16.99，“SalePrice”：null，“OnSale”：false，“URL”：“http://www.mystore. com/itemDescription”、“ImageURL”：“http://www.mystore.com/mainstore/045.jpg”、“LargeImageURL”：“http://www.mystore.com/mainstore/045.jpg”、“ ThumbnailImageURL”：“http://www.mystore.com/mainstore/045.jpg”，“MiniImageURL”：“http://www.mystore.com/mainstore/045.jpg”，“AffiliateID”：“”} ]“SalePrice”：null，“OnSale”：false，“URL”：“http://www.mystore.com/itemDescription”，“ImageURL”：“http://www.mystore.com/mainstore/045.jpg ", "LargeImageURL": "http://www.mystore.com/mainstore/045.jpg", "ThumbnailImageURL": "http://www.mystore.com/mainstore/045.jpg", "MiniImageURL": "http://www.mystore.com/mainstore/045.jpg", "AffiliateID": "" } ]“SalePrice”：null，“OnSale”：false，“URL”：“http://www.mystore.com/itemDescription”，“ImageURL”：“http://www.mystore.com/mainstore/045.jpg ", "LargeImageURL": "http://www.mystore.com/mainstore/045.jpg", "ThumbnailImageURL": "http://www.mystore.com/mainstore/045.jpg", "MiniImageURL": "http://www.mystore.com/mainstore/045.jpg", "AffiliateID": "" } ]http://www.mystore.com/mainstore/045.jpg”、“ThumbnailImageURL”：“http://www.mystore.com/mainstore/045.jpg”、“MiniImageURL”：“http://www. mystore.com/mainstore/045.jpg", "AffiliateID": "" } ]http://www.mystore.com/mainstore/045.jpg”、“ThumbnailImageURL”：“http://www.mystore.com/mainstore/045.jpg”、“MiniImageURL”：“http://www. mystore.com/mainstore/045.jpg", "AffiliateID": "" } ]

但是，当我回显 $response[0] 时，我得到了整个字符串。如果我使用 json_decode 或 encode 我会得到一个字符串，但它周围有引号。我不知道如何投射这个该死的东西，所以它作为一个对象数组运行，然后我可以迭代。感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:05:25.073

尝试这个...

```
$itemURL = 'http://***.***.***/search?tag=Football&affiliate_id=&max_results=3';
$response = file_get_contents($itemURL);//curl_exec($curlHandle);
$response = json_decode($response); 
```

你会得到一个像...

```
array(2) {
  [0]=>
  object(stdClass)#1 (12) {
    ["ID"]=>
    string(3) "123"
    ["Description"]=>
    string(30) "Champion Football Navy T-shirt"
    ["HighPrice"]=>
    float(16.99)
    ["LowPrice"]=>
    float(16.99)
    ["SalePrice"]=>
    NULL
    ["OnSale"]=>
    bool(false)
    ["URL"]=>
    string(38) "http://www.mystore.com/itemDescription"
    ["ImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["LargeImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["ThumbnailImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["MiniImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["AffiliateID"]=>
    string(0) ""
  }
  [1]=>
  object(stdClass)#2 (12) {
    ["ID"]=>
    string(2) "23"
    ["Description"]=>
    string(33) "Champion Football Navy T-shirt XL"
    ["HighPrice"]=>
    float(16.99)
    ["LowPrice"]=>
    float(16.99)
    ["SalePrice"]=>
    NULL
    ["OnSale"]=>
    bool(false)
    ["URL"]=>
    string(38) "http://www.mystore.com/itemDescription"
    ["ImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["LargeImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["ThumbnailImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["MiniImageURL"]=>
    string(40) "http://www.mystore.com/mainstore/045.jpg"
    ["AffiliateID"]=>
    string(0) ""
  }
} 
```

然后，您可以使用 $response[0]、$response[1] 等访问您的 JSON 对象...例如使用字段的特定名称，例如**$response[0]->AffiliateID**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:07:00.057

你需要打电话给你正在寻找的财产

IE：

```
echo response[0].ID; //getting the 1st item in the response array then access the "ID" property of the json object. 
```

json 响应是一个动态对象，它允许您与所有属性进行交互，就像您从头开始创建对象一样。

[{... 和 ... }] 中的值是对象值。

所以...

```
var json = '{"ID" : 1, "Prop1" : "Value1", Prop2 : "Value2" }'; 
```

可以使用 jQuery 的 parseJSON 方法进行解析

```
var obj= jQuery.parseJSON(json);
echo obj.ID; //1
echo obj.Prop1; //Value
echo obj.Prop2; //Value2 
```

当您在 { 和 } 周围有 [... 和 ...] 时，您知道该对象是一个数组，需要相应地处理。

希望这可以帮助。

wm

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T22:10:32.100

```
if (mysql_num_rows($result) > 0) {
$response["events"] = array();

while ($row = mysql_fetch_array($result)) {
      $tmparr = array();
        $tmparr["uid"] = $row["uid"];
        $tmparr["date"] = $row["date"];
        $tmparr["hours"] = $row["hours"];
        $tmparr["store_name"] = $row["store_name"];
        $tmparr["event_information"] = $row["event_information"];
        $tmparr["event_type"] = $row["event_type"];
        $tmparr["Phone"] = $row["Phone"];
        $tmparr["price"] = $row["price"];
        $tmparr["address"] = $row["address"];
        $tmparr["image_url"] = $row["image_url"];
        $tmparr["created_at"] = $row["created_at"];
        $tmparr["updated_at"] = $row["updated_at"];
        array_push($response["events"], $tmparr);
}    
$response["success"] = 1;
echo json_encode($response); 
```

我不明白您要做什么，但这是我用来从 sql 查询 ($result) 返回数据行数组的方式。我希望这可以帮助你

# iphone - 照片中的“分享到 MyApp”按钮

> ID：11269495
> 
> 赞同：0
> 
> 时间：2012-06-29T21:59:47.133
> 
> 标签：iphone, ios5, share

向 iPhone 的照片/相机应用程序添加类似于“通过 Facebook 分享”功能的菜单选项需要什么，用户可以使用相机拍摄照片并将其推送到我的应用程序？我需要在我的 ViewController 中做出哪些规定来容纳推送的图像数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:30:38.050

简单地说，你不能。Apple 不允许您的应用程序向内置 iOS 应用程序添加功能。

您将需要在您的应用程序中构建一个相机功能，该功能可以访问用户照片库并添加您正在寻找的共享功能。

# javascript - 引发错误的Javascript为空或不是对象

> ID：11269499
> 
> 赞同：0
> 
> 时间：2012-06-29T22:00:06.473
> 
> 标签：javascript

我试图制作幻灯片画廊并使用 URL 上的示例 - [http://mediaeventservices.com/2007/11/15/ajax-image-gallery-powered-by-slideflow-like-cover-flow/](http://mediaeventservices.com/2007/11/15/ajax-image-gallery-powered-by-slideflow-like-cover-flow/)

当我在 FF 中查看它时它工作正常但是 IE 和 chrome 给我一个错误：

```
“is null or not an object”. 
Message: Object required
Line: 66
Char: 2
Code: 0
URI: file:///C:/Romona/P%20drive%20backup/componets/slideShow/slideShow4/slideShowGallery/gallery.html 
```

IE 开发人员工具表明以下行导致了问题：

```
var imgSrc = ‘photos/large/’+ photos.item(photoNumber – 1).getElementsByTagName(“src”)[0].childNodes[0].nodeValue; 
```

有没有人有什么建议？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:05:51.077

# c++ - 我可以使用覆盖非虚拟方法的方法吗？

> ID：11269501
> 
> 赞同：16
> 
> 时间：2012-06-29T22:00:20.780
> 
> 标签：c++, polymorphism, overriding

我试图理解 C++ 中的一点。如果类 A 有一个非虚拟方法，而扩展 A 的类 B 覆盖该方法，我可以创建 B 的实例并以某种方式使用 B 中定义的方法吗？是否有必要覆盖非虚拟方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-29T22:18:42.067

> 是否有必要覆盖非虚拟方法？

您实际上并没有压倒一切，但这是行为，即

```
B* b = new B();
A* a = new B();
b->method(); //Calls B's method
a->method(); // Calls A's method 
```

因此，指针/引用类型决定了调用的方法。

> 我可以创建 B 的实例并以某种方式使用 B 中定义的方法吗？

是的。指针/引用类型必须是 B 类型。（参见前面的示例）。

如果你不声明`method`是`virtual`，你不能**覆盖**它，但你可以**隐藏**它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-29T22:06:27.260

如果`B`继承自`A`，并重新定义 中定义的方法`A`，则 的新实例`B`将调用`B`的版本。但是，如果方法不是虚拟的，则不存在多态行为，因此如果将 的实例`B`引用为`A`，则该方法将是`A`'s。例如：

```
struct A {
    void foo () { std::cout << "A::foo" << std::endl; }
};

struct B : public A {
    void foo () { std::cout << "B::foo" << std::endl; }
};

B b;
b.foo();
A *a = &b;
a->foo(); 
```

上面代码的输出将是：

```
B::foo
A::foo 
```

但是，如果该`foo`方法是虚拟的，那么`B::foo`将被打印两次。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T22:06:57.070

如果一个函数不是`virtual`，那么变量的类型也决定了哪个实现被分派：

```
#include <iostream>

using namespace std;

struct A {
    void f() { cout << "A" << endl; }
};

struct B : public A {
    void f() { cout << "B" << endl; }
};

int main(int args, char** argv) {

    B b;
    A& a = b;

    b.f();
    a.f();

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T22:10:53.320

*   不，没有机制可以覆盖 A 类中的非虚拟方法。
*   是的，您可以通过使用范围解析运算符 A::methodName 来使用在 B 中重载的类 A 中的非虚拟方法

# ant - 如果在给定时间内未输入，如何使 ant 提示使用默认值？

> ID：11269502
> 
> 赞同：4
> 
> 时间：2012-06-29T22:00:46.770
> 
> 标签：ant, input, timeout

我写的很多 ant 脚本都使用默认值，而这些默认值几乎是独占的。即我只是偶尔会想在没有默认值的情况下运行它。

很多时候，这些脚本需要足够的时间，所以在它们运行时去做其他事情是有意义的，比如喝咖啡或使用 Little Developer's Room。当然，如果上面有提示，而你忘记了，那么你就是 SOL。

有什么办法可以在提示符上设置超时，所以如果没有输入，比如说 30 秒，它只接受默认值，这样当我回到我的工作站时，我就有了我的 war/jar/准备好了吗？就像是

```
<input addproperty="branch.tag" 
       defaultvalue="dev" 
       timeout="30000">
    Which branch would you like to build?
</input> 
```

现在显然这个超时功能不存在，但你知道我想要完成什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T00:37:21.800

# 选项 1：将构建配置为自动或交互式运行

您可以通过在属性文件中提供默认输入值，将构建配置为全自动运行，而不是让输入提示超时。

### 默认.properties

```
Which\ branch\ would\ you\ like\ to\ build?=dev 
```

要在交互式构建和自动构建之间切换，可以在调用 Ant 时指定要使用的输入处理程序的类型：

### 自动构建

```
$ ant -Dhandler.type=propertyfile 
```

### 交互式构建

```
$ ant -Dhandler.type=default 
```

需要使用嵌套`<handler>`元素指定输入处理程序。

```
<input addproperty="branch.tag" defaultvalue="dev"
    message="Which branch would you like to build?">
  <handler type="${handler.type}" />
</input> 
```

最后一步是`PropertyFileInputHandler`通过定义`ant.input.properties`系统属性来指定属性文件。

### Linux

```
export ANT_OPTS=-Dant.input.properties=default.properties 
```

# 选项 2：在宏定义中使用 AntContrib [Trycatch](http://ant-contrib.sourceforge.net/tasks/tasks/trycatch.html)和[Parallel](http://ant.apache.org/manual/Tasks/parallel.html)

```
<taskdef name="trycatch" classname="net.sf.antcontrib.logic.TryCatchTask">
  <classpath>
    <pathelement location="/your/path/to/ant-contrib.jar"/>
  </classpath>
</taskdef>

<macrodef name="input-timeout">
  <attribute name="addproperty" />
  <attribute name="defaultvalue" default="" />
  <attribute name="handlertype" default="default" />
  <attribute name="message" default="" />
  <attribute name="timeout" default="30000" />
  <text name="text" default="" />

  <sequential>
    <trycatch>
      <try>
        <parallel threadcount="1" timeout="@{timeout}">
          <input addproperty="@{addproperty}"
              defaultvalue="@{defaultvalue}"
              message="@{message}">
            <handler type="@{handlertype}" />
            @{text}
          </input>
        </parallel>
      </try>

      <catch>
        <property name="@{addproperty}" value="@{defaultvalue}" />
      </catch>
    </trycatch>
  </sequential>
</macrodef>

<target name="test-timeout">
  <input-timeout addproperty="branch.tag" defaultvalue="dev"
      message="Which branch would you like to build?"
      timeout="5000" />
  <echo message="${branch.tag}" />
</target> 
```

# 选项 3：编写自定义 Ant 任务

实施留给读者作为练习。

# c# - OpenTK GenFramebuffers 错误

> ID：11269504
> 
> 赞同：1
> 
> 时间：2012-06-29T22:00:58.083
> 
> 标签：c#, opengl, opentk

我正在尝试使用 OpenTK 中的 GenFramebuffers 函数。在原生 OpenGL 中，此函数需要生成一些帧缓冲区名称和一个指向 int 的指针，这些名称将存储在其中。但是 OpenTK 变体需要生成多个名称和**一个单独**的 Int32 参数。

这是来自 OpenTK 的函数的源代码：

```
 public static void GenFramebuffers(Int32 n, out Int32 framebuffers)
    {
        unsafe
        {
            fixed (Int32* framebuffers_ptr = &framebuffers)
            {
                Delegates.glGenFramebuffers((Int32)n, (UInt32*)framebuffers_ptr);
                framebuffers = *framebuffers_ptr;
            }
        }
    } 
```

据我所见，如果将除 1 以外的任何值指定为 n，它将覆盖内存。为了确保这一点，我实际上用 n=2 进行了尝试，实际上它写了我作为 out 参数传递的 Int32 加上一个恰好在它之后的内存中的 Int32。

这不是 OpenTK 中唯一受影响的函数，所有 genXXX 函数都是这样。

我是在这里发疯还是 OpenTK 严重损坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:40:45.600

我认为这是内部功能。OpenTK 在 GL 类中有这个函数来生成单个帧缓冲区：

```
 public static int GenFramebuffer()
    {
        int id;
        GenFramebuffers(1, out id);
        return id;
    } 
```

对于数组类型参数，OpenTK 具有以下功能：

```
void GenFramebuffers(Int32 n, [OutAttribute] Int32[] framebuffers)
unsafe void GenFramebuffers(Int32 n, [OutAttribute] Int32* framebuffers) 
```

但我相信您也可以通过这种方式使用您提到的功能：

```
int[] arr = new int[15];
GenFramebuffers(10, out arr[5]); // will fill 10 starting with index 5 
```

# servlets - HelloServlet tomcat 7.0.28 使用注解

> ID：11269508
> 
> 赞同：0
> 
> 时间：2012-06-29T22:01:30.360
> 
> 标签：servlets, annotations, tomcat7

我只想通过 url: 运行 HelloServlet `http://localhost:8080/HelloServlet`。但它显示请求的资源 (/HelloServlet) 不可用。我使用tomcat 7.0.28。

从 运行`localhost:8080`，它显示页面。

HelloServlet 代码：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;

@WebServlet("/HelloServlet")
public class HelloServlet extends HttpServlet {
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    String docType =
      "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 " +
      "Transitional//EN\">\n";
    out.println(docType +
                "<HTML>\n" +
                "<HEAD><TITLE>Hello</TITLE></HEAD>\n" +
                "<BODY BGCOLOR=\"#FDF5E6\">\n" +
                "<H1>Hello</H1>\n" +
                "</BODY></HTML>");
  }
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:08:57.173

要获取此 URL，您必须将 web 应用程序部署为根 web 应用程序。AFAIR，您只需将生成的战争命名为 ROOT.war 即可。否则，应用程序将部署在上下文路径下，默认情况下，该路径是 war 文件的名称。因此，如果您的战争是 hello.war，则 URL 应该是

```
http://localhost:8080/hello/HelloServlet 
```

# javascript - Javascript 对象保留包含旧数据

> ID：11269509
> 
> 赞同：0
> 
> 时间：2012-06-29T22:01:31.423
> 
> 标签：javascript, jquery

我正在尝试根据状态选择从 JSON 字符串中过滤结果。我将更深入地解释。对于下面的代码，jsonstring 包含整个 javascript 对象。我通过 grep 函数过滤状态，然后将结果添加到主对象（jsonstring）中，因此我可以获得具有新过滤状态的整个 javascript 对象。但是每次调用这个下拉菜单时，我都会得到最后更新的 javascript 对象，但每次调用这个函数时我都想要原始的 jsonstring。

```
function dropdownchange(jsonstring)
{
 var e = document.getElementById("documents_filter");
 var svalue = e.options[e.selectedIndex].value;

 if(svalue == "In Progress")
 {
  var docstatusfilter;
  docstatusfilter = $.grep(jsonstring.Apps.statuslist , function(el, i) {
           return el.DOCUMENT_STATUS === "In Progress"        
            });   
    jsonstring.Apps.statuslist = docstatusfilter;   
 }

 if(svalue == "Auth (Verified)")
 {
  var authstatus;
  authstatus = $.grep(jsonstring.Apps.statuslist , function(el, i) {
           return el.DOCUMENT_STATUS === "Auth (Verified)"          
            });    
   jsonstring.Apps.statuslist = authstatus;    
 }

} 
```

当这个函数第一次调用它工作完美但是一旦我改变下拉它包含jsonstring中的前一个记录但是我每次调用这个函数时都想要原始的jsonstring..

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:25:37.320

您需要做的就是将您的 jsonstring 复制到另一个对象中并在您的函数中使用该对象。这是一个将克隆您的对象的函数 -

```
function clone(obj) {
    var copy = jQuery.extend(true, {}, obj);
    return copy;
} 
```

现在像这样调用这个函数：

```
function dropdownchange(jsonstring)
{
var newJsonString = clone(jsonstring);
 var e = document.getElementById("documents_filter");
 var svalue = e.options[e.selectedIndex].value;
 ......
 .... 
```

只需`newJsonString`在函数内部使用而不是`jsonstring`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:08:47.453

将原始字符串存储在单独的变量中。使用原始字符串变量作为函数的输入，然后将结果值设置为不同的变量。

# c# - 忽略 webforms routehanlder 中的文件扩展

> ID：11269510
> 
> 赞同：0
> 
> 时间：2012-06-29T22:01:38.953
> 
> 标签：c#, asp.net

我正在使用以下路由处理程序在 .net 4.0 解决方案中路由 url。默认情况下，路由处理程序会忽略存在的文件，这正是我需要的，因为我不想映射 css 文件、js 文件、图像文件等。

webconfig 中的更改（添加 customerros 部分）迫使我注意到一个错误。如果有图片的链接，但图片不存在，则映射 url，造成很多麻烦（错误）。

现在我需要完全忽略文件扩展名（js、css、jpg、gif 等），或者最好只映射 .aspx 文件。但我不知道该怎么做。

ps：网站是基于用户上传的，总会有百分之一的失效链接。

```
public class RouteHandler : IRouteHandler
{
    private readonly string _path;

    public RouteHandler(string path)
    {
        _path = path;
    }

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        Page page = BuildManager.CreateInstanceFromVirtualPath(_path, typeof(Page)) as Page;

        foreach (KeyValuePair<string, object> i in requestContext.RouteData.Values)
        {
            HttpContext.Current.Items[i.Key.Replace("*", "")] = i.Value;
        }

        return page;
    }
}

routes.Add("somename", new Route("folder/insidefolder", null, null, new RouteHandler("~/folder-insidefolder.aspx"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:28:37.473

我认为以下行解决了图像问题（需要更多测试）：

```
routes.Ignore("{*images}", new { images = @".*\.(jpg|JPG|gif|GIF|png|PNG|ico|ICO)(\?.*)?" }); 
```

# android - 如何在 Eclipse 中配置 javah 工具

> ID：11269511
> 
> 赞同：1
> 
> 时间：2012-06-29T22:02:07.367
> 
> 标签：android, eclipse, ubuntu, java-native-interface

我已经找到了大约 5 个答案，尝试了所有答案，但都没有成功。

环境：Ubuntu 12.04/靛蓝

运行->外部工具->外部工具配置...

创建新程序位置：/usr/bin/javah /* *$ which javah 给 /usr/bin/javah ** /

工作目录：${workspace_loc:/MyProject/bin/classes}

属性：-d ${workspace_loc:/MyProject/jni} com.myproject.MyActivity

运行结果：找不到“com.myproject.MyActivity”的类文件

从终端运行给出相同的结果 maxim@ubuntu:~/workspace/MyProject/bin/classes$ javah -jni com.myproject.MyActivity

错误：无法访问 android.app.Activity 的 android.app.Activity 类文件，未找到 maxim@ubuntu:~/workspace/MyProject/bin/classes$

已安装 SDK/NDK，添加了外部路径。如何添加缺失的部分？谢谢大家。

**编辑于 7 月 3 日**

将本机库加载移动到单独的类解决了这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T14:08:09.607

android developer's answer中也提到了[这篇文章的](https://stackoverflow.com/questions/11135720/android-java-using-javah-on-linux)详细说明：

正如您在下面的屏幕截图中看到的那样，像这样设置外部工具：

1.  在 Eclipse ADT 中，单击“运行”，将鼠标悬停在菜单的最后一个选项 - “外部工具”上，然后选择“外部工具配置”

2.  将路径设置为以下内容：

    2.1。位置：安装 Java C:\Program Files\Java\jdk1.7.0_13\bin\javah.exe 的位置

    2.2\. 工作目录：你项目的 /bin/classes/ 目录 ${workspace_loc:/MyProject/bin/classes}

    2.3\. 参数：-jni ${java_type_name}

3.  单击运行（请注意，您必须选择 java 类）

4.  使用您的文件浏览器，检查 /bin/classes/ 目录 - 您应该在那里找到 .h 头文件。

![在此处输入图像描述](../Images/6e6d6f5c61ad16f1aa6b964a0597aea1.png)

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T22:17:45.963

我在 linux 上也有类似的问题。原来我没有在正确的文件夹上做这件事。

尝试阅读它，看看它是否有帮助：[Using javah on linux](https://stackoverflow.com/questions/11135720/android-java-using-javah-on-linux)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T17:12:27.487

根据恩克的回答，为了方便起见，我添加了更多论据。
1.您不必使用“-classpath”正确设置工作目录。（您可以忽略图片中的工作目录设置。）
2.您可以从Eclipse中的集成控制台获取详细信息。
3.您可以使用“-d”参数指定输出目录。
*不要忘记替换此图中的项目目录名称。（“MyProject”）

![如何在 Eclipse 项目中设置 JavaH 执行参数。](../Images/65f6b364ac864deee98025e1d1c066a0.png)

# c++ - 对象浏览器中的 C++ ansi 命名空间

> ID：11269513
> 
> 赞同：2
> 
> 时间：2012-06-29T22:02:11.373
> 
> 标签：c++, namespaces, c++11, objectbrowser

我想知道是否可以使用 Visual Studio 的对象浏览器查看 C++ ansi/iso 命名空间“内部”的内容，就像使用 Visual Basic 或 C# 一样。比如查看命名空间“std”中有哪些函数，或者 iostream 或 cstring 中有什么（这些命名空间是什么？）。我刚开始学习 C++，所以如果我知道我可以使用哪些内置函数，那将非常有用。对象浏览器有可能还是我找错了地方？

# c++ - 以下两行代码的另一个 C++ 等效项

> ID：11269522
> 
> 赞同：1
> 
> 时间：2012-06-29T22:03:00.660
> 
> 标签：c++

抱歉这么模糊的标题。基本上，我正在尝试破解一个功能以满足我的需求。但最近我在 python 上做了很多工作，我的 c++ 有点生疏了。

所以早些时候我的功能采取了

```
 int func(FILE *f)  
 { .....
   if (fgets(line, MM_MAX_LINE_LENGTH, f) == NULL) 
    return MM_PREMATURE_EOF;

if (sscanf(line, "%s %s %s %s %s", banner, mtx, crd, data_type, 
    storage_scheme) != 5)
    return MM_PREMATURE_EOF;

 } 
```

现在我直接输入字符串数据而不是这个

```
 int func(std::string *data)  
   { .....
   // how should I modify this if statment..I want to parse the same file
   // but instead it is in form of one giant string

 } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:10:33.227

您可以使用相同的代码，只需将其中的数据转换`std::string`为 C 字符串即可。

```
sscanf(data->c_str(), "%s %s %s %s %s", //...); 
```

但是，您应该考虑传入 const 引用，因为您可能不打算修改输入数据：

```
int func(const std::string &data) {
    //...
    if (sscanf(data.c_str(), //...)) {
        //...
    }
} 
```

# python - 机械化卡在页面加载直到超时，而常规浏览器工作正常，没有 javascript/ajax

> ID：11269523
> 
> 赞同：0
> 
> 时间：2012-06-29T22:03:15.613
> 
> 标签：python, mechanize

使用 python 和机械化即时尝试登录网站。

我正在使用的代码是：

```
 from mechanize import Browser

def calOnline(uname,passwd):
    br = Browser()
    br.set_debug_http(True)
    br.set_debug_redirects(True)  
    br.set_debug_responses(True)
    br.set_handle_redirect(True)
    br.set_handle_robots(False)
    br.set_handle_refresh(True)
    #~ br.encoding()
    br.addheaders = [('User-Agent','Mozilla/5.0 (X11; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1'),
        ('Accept','text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
        ('Accept-Language','en-us,en;q=0.5'),
        ('Accept-Encoding','gzip, deflate'),
        ('Connection','keep-alive')]
    print('opening site')
    br.open('https://m.cal-online.co.il/')
    print('\n\nsubmiting first form')
    br.select_form(nr=0)
    br.submit()
    print('\n\nselecting login form')
    br.select_form(nr=0)
    br['ctl00$cphMain$LGN$UserName'] = uname
    br['ctl00$cphMain$LGN$Password'] = passwd
    print('\n\nsubmitting form')
    br.submit(name='ctl00$cphMain$LGN$LoginButton')
    print('\n\nOpening details page')
    res = br.open('https://m.cal-online.co.il/SCREENS/Transactions/TrSearch.aspx')
    print res.read()

uname = 'someuname'
passwd = 'somepasswd'   
a = calOnline(uname, passwd)
print a.read() 
```

该网站是信用卡网站的移动版本，我试图从中获取我的费用。

浏览器（Android 作为移动设备或 Firefox/Chrome/Opera 作为桌面）打开站点并登录没有任何问题。在尝试以编程方式登录时，它只是卡住了，这里是 iOS 用户代理的调试日志：

```
opening site
send: 'GET / HTTP/1.1\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nHost: m.cal-online.co.il\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nConnection: close\r\n\r\n'
reply: 'HTTP/1.1 200 OK\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: Set-Cookie: JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449; Path=/; Secure
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Date: Fri, 29 Jun 2012 21:44:52 GMT
header: Cache-Control: no-cache, no-store, must-revalidate, no-transform
header: Pragma: no-cache
header: Expires: -1
header: Content-Type: text/html;charset=utf-8
header: Content-Length: 302
header: Connection: close
send: 'GET /SCREENS/AccountManagement/HomePage.aspx HTTP/1.1\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nHost: m.cal-online.co.il\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nConnection: close\r\nCookie: JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\n\r\n'
reply: 'HTTP/1.1 302 Moved Temporarily\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Location: https://m.cal-online.co.il/SCREENS/AccountManagement/Opening.aspx?ReturnUrl=%2fSCREENS%2fAccountManagement%2fHomePage.aspx
header: Content-Length: 0
header: Date: Fri, 29 Jun 2012 21:44:53 GMT
header: Connection: close
send: 'GET /SCREENS/AccountManagement/Opening.aspx?ReturnUrl=%2fSCREENS%2fAccountManagement%2fHomePage.aspx HTTP/1.1\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nHost: m.cal-online.co.il\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nConnection: close\r\nCookie: JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\n\r\n'
reply: 'HTTP/1.1 200 OK\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Date: Fri, 29 Jun 2012 21:44:55 GMT
header: Cache-Control: private
header: Content-Type: text/html;charset=utf-8
header: Content-Length: 1256
header: Connection: close
send: 'GET /SCREENS/AccountManagement/Login.aspx HTTP/1.1\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nHost: m.cal-online.co.il\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nConnection: close\r\nCookie: JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\n\r\n'
reply: 'HTTP/1.1 302 Moved Temporarily\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Location: https://m.cal-online.co.il/SCREENS/AccountManagement/Login.aspx?cc=c009a07&rnd=2103197098
header: Set-Cookie: test_cookie=ok; expires=Sat, 30-Jun-2012 21:45:12 GMT; path=/
header: Content-Length: 0
header: Date: Fri, 29 Jun 2012 21:45:07 GMT
header: Connection: close
send: 'GET /SCREENS/AccountManagement/Login.aspx?cc=c009a07&rnd=2103197098 HTTP/1.1\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nHost: m.cal-online.co.il\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nConnection: close\r\nCookie: test_cookie=ok; JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\n\r\n'
reply: 'HTTP/1.1 200 OK\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Set-Cookie: ASP.NET_SessionId=clocqc55tdzykh45zql10045; path=/; HttpOnly
header: Date: Fri, 29 Jun 2012 21:45:09 GMT
header: Cache-Control: no-cache, no-store, must-revalidate, no-transform
header: Pragma: no-cache
header: Expires: -1
header: Content-Type: text/html;charset=utf-8
header: Content-Length: 3153
header: Connection: close

submiting first form
send: 'POST /SCREENS/AccountManagement/Login.aspx?rnd=2103197098&cc=c009a07 HTTP/1.1\r\nContent-Length: 189\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nConnection: close\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nHost: m.cal-online.co.il\r\nReferer: https://m.cal-online.co.il/\r\nCookie: test_cookie=ok; ASP.NET_SessionId=clocqc55tdzykh45zql10045; JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\nContent-Type: application/x-www-form-urlencoded\r\n\r\n__VIEWSTATE=&ctl00%24__MATRIX_VIEWSTATE=1&ctl00%24cphMain%24LGN%24UserName=&ctl00%24cphMain%24LGN%24Password=&ctl00%24cphMain%24LGN%24LoginButton.x=1&ctl00%24cphMain%24LGN%24LoginButton.y=1'
reply: 'HTTP/1.1 200 OK\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Date: Fri, 29 Jun 2012 21:45:10 GMT
header: Cache-Control: no-cache, no-store, must-revalidate, no-transform
header: Pragma: no-cache
header: Expires: -1
header: Content-Type: text/html;charset=utf-8
header: Content-Length: 3210
header: Connection: close

selecting login form

submitting form
send: 'POST /SCREENS/AccountManagement/Login.aspx?rnd=2103197098&cc=c009a07 HTTP/1.1\r\nContent-Length: 206\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nConnection: close\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nHost: m.cal-online.co.il\r\nReferer: https://m.cal-online.co.il/SCREENS/AccountManagement/Login.aspx?rnd=2103197098&cc=c009a07\r\nCookie: test_cookie=ok; ASP.NET_SessionId=clocqc55tdzykh45zql10045; JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\nContent-Type: application/x-www-form-urlencoded\r\n\r\n__VIEWSTATE=&ctl00%24__MATRIX_VIEWSTATE=2&ctl00%24cphMain%24LGN%24UserName=<uname>&ctl00%24cphMain%24LGN%24Password=<passwd>&ctl00%24cphMain%24LGN%24LoginButton.x=1&ctl00%24cphMain%24LGN%24LoginButton.y=1'
reply: 'HTTP/1.1 302 Moved Temporarily\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Location: https://m.cal-online.co.il/SCREENS/AccountManagement/HomePage.aspx
header: Set-Cookie: .ASPXAUTH=478FDDCD007398FEB264895D0F6EDB51B391DD0F5FBA3C71FC6A9E747AF3A97E6382E7B939614DFC07B25A1D4A641ED121F15508483A676AC49BAA550BEADF382F93792E849F63E99B03FA45143391ACD5E18CA7124FAC43AC378D16703DB5B2A374E4D1B3278BF9B886F3B4A41BB12E3569162D; path=/; HttpOnly
header: Content-Length: 0
header: Date: Fri, 29 Jun 2012 21:45:14 GMT
header: Connection: close
send: 'GET /SCREENS/AccountManagement/HomePage.aspx HTTP/1.1\r\nAccept-Language: en-us,en;q=0.5\r\nAccept-Encoding: gzip, deflate\r\nConnection: close\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16\r\nHost: m.cal-online.co.il\r\nCookie: test_cookie=ok; ASP.NET_SessionId=clocqc55tdzykh45zql10045; .ASPXAUTH=478FDDCD007398FEB264895D0F6EDB51B391DD0F5FBA3C71FC6A9E747AF3A97E6382E7B939614DFC07B25A1D4A641ED121F15508483A676AC49BAA550BEADF382F93792E849F63E99B03FA45143391ACD5E18CA7124FAC43AC378D16703DB5B2A374E4D1B3278BF9B886F3B4A41BB12E3569162D; JSESSIONID=E46452F3D9D4B7303C6E93F04BE54449\r\nReferer: https://m.cal-online.co.il/SCREENS/AccountManagement/Login.aspx?rnd=2103197098&cc=c009a07\r\n\r\n'
reply: 'HTTP/1.1 200 OK\r\n'
header: Server: Apache-Coyote/1.1
header: X-Powered-By: ASP.NET
header: X-MA-MIS-Device: root^html^mozilla/5^safari^appleiphone^appleiphone(os_3.0)
header: Server: Microsoft-IIS/6.0
header: X-AspNet-Version: 2.0.50727
header: Date: Fri, 29 Jun 2012 21:45:16 GMT
header: Cache-Control: no-cache, no-store, must-revalidate, no-transform
header: Pragma: no-cache
header: Expires: -1
header: Content-Type: text/html;charset=utf-8
header: Content-Length: 5235
header: Connection: close 
```

我的 Firefox 用户代理也会发生同样的事情。它只是卡在这一刻，直到网站超时，由于不活动而将我重定向到 LogOut 页面。有什么我错过的吗？提前致谢

# python - 使用 lxml 查找根节点名称

> ID：11269524
> 
> 赞同：1
> 
> 时间：2012-06-29T22:03:22.337
> 
> 标签：python, lxml

鉴于以下情况：

```
>>> from lxml import etree
>>> contents=open('file.xml').read()
>>> node=etree.fromstring(contents) 
```

如何获取节点的根标签名称？例如，如果 xml 是：

```
<Orders>
 <Order>
  <Digital_Order>1021</Digital_Order>
 </Order>
</Orders> 
```

它会返回`"Orders"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:07:44.950

应该只是简单的`node.tag`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:08:53.107

`node`实际上是你的根节点。

但是您可能会因为无效的 xml 而遇到问题，最后的订单应该是`</Orders>`

# biztalk - 规则策略不更新消息？

> ID：11269528
> 
> 赞同：1
> 
> 时间：2012-06-29T22:04:01.200
> 
> 标签：biztalk, biztalk-2010

我已经构建了一个模式，一个带有接收端口的编排，用于接收该类型的消息，并将消息传递给业务规则。业务规则策略根据规则将消息中的元素更新为真或假。我有一个范围形状，里面有一个调用规则形状。调用规则形状将消息传递给规则，然后我有一个发送形状，它将消息发送到发送端口。我已经测试了规则策略并且它工作正常，但是当我删除一个文件时，编排会处理它并输出一个文件，该文件应该具有来自规则策略的更新值，但是输出文件始终与输入文件相同. 我知道消息是不可变的，那么我应该如何从 BR 中获取一个值，并用它构建一个新消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:45:18.013

呼叫规则形状将构建新消息，因此听起来您的规则可能不会触发。您是否启用了对策略的跟踪？有关说明，请参见链接：

[http://msdn.microsoft.com/en-us/library/aa995589(BTS.10).aspx](http://msdn.microsoft.com/en-us/library/aa995589(BTS.10).aspx)

# objective-c - 为什么@synthesize 不显示某些@properties 的选择？

> ID：11269532
> 
> 赞同：1
> 
> 时间：2012-06-29T22:04:30.527
> 
> 标签：objective-c, xcode

在我的代码中，我有大约五个`@property`语句；当我去找`@synthesize = ...`他们时，有些在对象的下拉菜单中给我选择（属性名称），而有些则没有。我还发现，如果我没有`_property`在我的方法中将所有属性都更改为，那么执行没有任何区别；该应用程序仍然有效。

为什么无论属性名称是否有下划线作为前缀，应用程序仍会运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:45:53.423

你应该使用`@synthesize iVar = _iVar;`，但也许很快你就不需要合成了；）

我会说 Xcode 提供的选项只是代码完成有点错误。

严格来说，您使用的名称根本不重要（只要没有任何冲突），`@synthesize iVar = i_va_R;`是完全合法的，因此：

```
@synthesize foo = bar;
@synthesize bar = foo;
// DO NOT DO THIS IN REAL LIFE!! 
```

您所说的只是您希望该属性由具有给定名称的实例变量支持。如果您从不直接访问实例变量（始终使用`self.iVar`而不是`iVar`or `_iVar`），那么您使用什么并不重要，如果您想直接访问 iVar，它只对其余代码很重要。

只是为了澄清一点，这里有一个示例，说明如何在不使用属性的情况下实现上述内容：

```
@interface MyBadClass {
    int foo;
    int bar;
}

- (int)foo;
- (void)setFoo:(int)foo;

- (int)bar;
- (void)setBar:(int)bar;

@end

@implementation MyBadClass

- (it)foo
{
    return bar;
}

- (void)setFoo:(int)foo
{
    bar = foo;
}

- (int)bar
{
    return foo;
}

- (void)setBar:(int)bar
{
    foo = bar;
}

@end 
```

（PS：我使用`int`s 来避免处理内存管理，但同样适用于对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:25:40.333

在 32 位运行时，您可能会遇到问题，因为支持 ivars 的属性不是自动创建的……在 64 位模式或 iPhone 中，如果您创建了一个名为 _var 和属性 var 的 IVar，那么在合成时不要指定 _var，您将有 2 个 var，但是它将在 32 位 Mac OS 中损坏

# installation - 安装前检查 Mantis：无法安装

> ID：11269536
> 
> 赞同：0
> 
> 时间：2012-06-29T22:04:48.267
> 
> 标签：installation, mantis

我正在尝试在我的服务器上安装 Mantis。问题是我似乎无法通过安装前检查步骤。我单击“安装/升级数据库”，并显示所有“GOOD”。然后它说：Database Creation Suppressed, SQL Queries follow << 这里打印了很多 sql 查询，主要是创建和更改表 >>。当我第一次这么说时，我去了 MySQL Workbench，（数据库 bugtracker 已经创建），并运行给定的脚本。因此，创建所有需要的表。

然后它说：

```
Your database has not been created yet. Please create the database, then install the tables and data using the information above before proceeding. 
```

它检查了更多的东西（所有结果都是“GOOD”），最后它显示这条消息：

```
Install was successful.
Continue to log into Mantis 
```

前面的单词“Continue”显示为指向 login_page.php 的超链接。当我单击它时，它会直接返回到此预安装检查页面。

问题是，数据库已创建！我第一次遇到运行它们的 sql 查询时，确实创建了表。

```
Attempting to connect to database as admin  GOOD
Attempting to connect to database as user   GOOD
Checking Database Server Version 
Running mysql version 5.5.25 
```

我的 PHP 版本是 5.3.14。我尝试安装的 Mantis 版本是 1.2.11。

任何想法，如我做错了什么？或者我可以提供的任何其他信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:51:28.667

我现在意识到这不是这个问题的最佳地点。尽管如此，万一其他人偶然发现了这一点，我想告诉大家我能找到的唯一解决方法是安装另一个 Mantis 版本：1.1.1。很旧，但它工作！

# apache-flex - flex：如何在 spark 和 mx 中嵌入字体？

> ID：11269545
> 
> 赞同：1
> 
> 时间：2012-06-29T22:05:32.913
> 
> 标签：apache-flex, flex4, flex4.5

我的 flex (4.5) 应用程序使用 MX 和 Spark 组件。我想嵌入 Arial 字体，我很疯狂：它适用于 Spark 组件，或者适用于 MX 组件，但不能同时适用于两者。

有时某些组件会消失，或者两者都是粗体等！

```
<?xml version="1.0" encoding="utf-8"?><mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%"  layout="absolute" xmlns:s="library://ns.adobe.com/flex/spark">
<mx:Style>
    @namespace mx "library://ns.adobe.com/flex/mx";
    @namespace s "library://ns.adobe.com/flex/spark";
    @font-face { 
        src: url("c:/windows/fonts/arial.ttf"); 
        fontFamily: Arial; 
        fontWeight:normal;
        embed-as-cff: true;

    }
    @font-face {
        src: local("Arial");
        font-weight: normal;
        fontFamily: Arial;
        fontStyle:normal;
        embed-as-cff:false;         
    }
    @font-face {
        src: local("Arial");
        fontFamily: Arial;
        fontWeight:bold;
        fontStyle: normal;
        embed-as-cff:false;
    }
</mx:Style>
<mx:Label x="177" y="160" text="mx|normal"/>
<mx:Label x="177" y="201" fontWeight="bold" text="mx|bold"/>    
<s:Label x="182" y="235" text="S|normal"/>
<s:Label x="182" y="278" text="S|bold" fontWeight="bold"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:24:31.220

删除说：的字体样式`embedAsCFF: false`并添加以下内容：

```
mx|global {
    textFieldClass: ClassReference("mx.core.UIFTETextField");
} 
```

这将强制所有渲染文本的 mx 组件使用可以处理 CFF 嵌入字体的文本字段。它还有一个优点是您不必两次嵌入相同的字体。

# mysql - 安装已安装 South 的新应用程序后的 SyncDB - 不想搞砸任何事情

> ID：11269554
> 
> 赞同：3
> 
> 时间：2012-06-29T22:06:37.227
> 
> 标签：mysql, django, django-south, sorl-thumbnail, syncdb

我正在使用 South 为 Django 1.4 项目管理我的 (MySQL) 数据库表，它工作得很好。

这是一个新手问题，但我现在将 sorl.thumbnail ( [http://sorl-thumbnail.readthedocs.org/en/latest/installation.html#installation](http://sorl-thumbnail.readthedocs.org/en/latest/installation.html#installation) ) 添加到设置中的已安装应用程序列表中文件。

说明说，如果我使用“缓存的数据库键值存储”，我现在必须使用 syncdb。

可以继续使用syncdb吗？我不太确定我的 MySQL+South 安装是否算作一个。这会搞砸什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:43:49.463

如果我没记错的话，当你开始使用 south 时，你不应该再使用 syncdb。相反，您应该使用`schemamigration`或其他南方的特定命令。

[在这里](http://south.readthedocs.org/en/latest/commands.html#schemamigration)你可以找到你要找的东西。我在这里引用应该让你头脑清醒的短语：

> 架构迁移的主要用途是当您刚刚完成闪亮的新 models.py 并想要加载数据库时。在 vanilla Django 中，您只需运行 syncdb - 但是，对于迁移，您需要迁移来创建表。
> 
> 在这种情况下，您只需运行：
> 
> ./manage.py schemamigration myapp --initial
> 
> 这将编写一个大迁移来为您的应用程序中的模型创建所有表；只需运行 ./manage.py migrate 来获取它，您只需比 syncdb 多一步即可完成！

希望能帮助到你！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-30T00:33:19.740

syncdb 不会干扰 South，事实上，为了安装新应用程序，您应该始终首先使用 syncdb，然后如果有任何迁移，则应用 south 进行迁移。所以，是的，你不会有任何问题。

# jquery - 为什么这个 jquery datetimepicker 看起来如此不合时宜？

> ID：11269555
> 
> 赞同：1
> 
> 时间：2012-06-29T22:06:53.293
> 
> 标签：jquery, css, datetimepicker

我正在尝试使用来自：[http ://trentrichardson.com/ 的 datetimepicker](http://trentrichardson.com/)

功能似乎正在运行，但看起来很糟糕 - 参见图片。谁能帮我找出为什么会这样？

浏览器是火狐。

标头有...

```
<link rel="stylesheet" type="text/css" href="/css/mainmenu.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/smoothness/jquery-ui-1.8.21.custom.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/dttimepicker.css" />

    <script src="/jscript/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/jscript/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <script src="/jscript/jquery-ui-timepicker-addon.js" type="text/javascript"></script> 
```

它看起来像这样： ![扭曲的日期时间选择器](../Images/b8e89eeaf7ebf70fcdea185d9c0ec9ed.png)

并注意到，当我删除主菜单的 CSS 时，它会正确显示！！！这是我的主菜单 css 文件：

```
<div class="bvmainmenu">
    <ul>
        <li><a href="/" id="Home">Home</a></li>
        <li><a id="Reports">Reports</a>
            <ul>
                <li><a href="...">....</a></li>
                <li><a href="...">....</a></li>
                <li><a href="...">....</a></li>
            </ul>
        </li>
        <li><a id="Managment">Managment</a>
            <ul>
                <li><a href=".....">.....</a></li>
                <li><a>....</a></li>
            </ul>
        </li>
        <li><a id="Admin">Admin</a>
            <ul>
                <li><a href="...">....</a></li>
                <li><a href="....">....</a></li>
                <li><a href="...">...</a></li>
                <li><a href="...">...</a></li>
                <li><a href="...">...</a></li>
                <li><a href="/">item3</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

menu 有自己的类，这里是它的 css：

```
.bvmainmenu{                                            /*main bvmainmenu properties*/
    border:none;
    border:0px;
    margin:0px;
    padding:0px;
    font-family:verdana,geneva,arial,helvetica,sans-serif;
    font-size:14px;
    font-weight:bold;
    color:8e8e8e;
    }
.bvmainmenu ul{                                     /*main bvmainmenu items bar*/
    background:url(/images/bvmainmenu-bg.gif) top left repeat-x;
    height:43px;
    list-style:none;
    margin:0;
    padding:0;
    }
    .bvmainmenu li{
        float:left;                             /*main bvmainmenu item positioning*/
        padding:0px 8px 0px 8px;
        }
    .bvmainmenu li a,span{                                  /*main bvmainmenu items text properties etc*/
        color:#666666;
        display:block;
        font-weight:bold;
        line-height:43px;
        padding:0px 25px;
        text-align:center;
        text-decoration:none;
        }
        .bvmainmenu li a:hover{
            color:#000000;
            text-decoration:none;
        }
    .bvmainmenu li ul{
        background:#e0e0e0;
        border-left:2px solid #000000;
        border-right:2px solid #000000;
        border-bottom:2px solid #000000;
        display:none;
        height:auto;
        filter:alpha(opacity=95);
        opacity:0.95;
        position:absolute;
        width:auto;                             /*225px;  this will make all drop downs of same width*/
        z-index:200;
        }
    .bvmainmenu li:hover ul{                        /*shows drop down bvmainmenu box on hover*/
        display:block;
        }
    .bvmainmenu li ul li {                              /*drop down bvmainmenu box*/
        display:block;
        float:none;
        padding:0px;
        width:auto;                             /*225px;  this will make all drop downs of same width*/
        }
    .bvmainmenu li ul li a{
        display:block;
        font-size:12px;
        font-style:normal;
        padding:0px 5px 0px 5px;            /*top rt bt lf   def:0,10,0,15*/
        text-align:left;
        line-height:1.5;                        /*added for visual effect, you can use value normal*/
        }
        .bvmainmenu li ul li a:hover{                   /*drop down bvmainmenu items*/
            background:#949494;
            color:#000000;
            opacity:1.0;
            filter:alpha(opacity=100);
            }
    .bvmainmenu p{
        clear:left;
        } 
```

谁能告诉这里出了什么问题？为什么这个小部件看起来如此有趣？字体也太大了！在陈列室（UI 网站）中，它看起来很闪亮！！

谢谢。拉杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:10:58.653

```
.bvmainmenu li a,span 
```

该跨度未封装在菜单类中

（修订）

如果你想封装跨度，它可以是：

```
.bvmainmenu li a,.bvmainmenu span 
```

或者

```
.bvmainmenu li a span 
```

根据您想要实现的目标，最后一个将仅匹配 .bvmainmenu li a 内的所有跨度，而不影响“a”，前一个将影响锚点 (li a) 以及 .bvmainmenu 内的所有跨度

# visual-c++ - wxgrid , 检测滚动事件

> ID：11269558
> 
> 赞同：0
> 
> 时间：2012-06-29T22:07:00.607
> 
> 标签：visual-c++, wxwidgets

我创建了一个带有自定义表的 wxGrid。每当用户向下滚动到网格的最底部时，我都必须从表中加载接下来的 100 行。我尝试了 EVT_SCROLL_BOTTOM() 但我无法检测到它。什么是正确的做法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:29:14.483

您可以为网格绑定滚动获胜事件。我遇到了和你几乎一样的要求。:)

```
self.Bind(wx.EVT_SCROLLWIN, self.OnScroll) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:14:19.743

我不知道您的问题的答案，但提醒我，网格被设计为与[wxGridTableBase](http://docs.wxwidgets.org/stable/wx_wxgridtablebase.html)类型的对象一起使用，该对象 可以由应用程序扩展。通过扩展这个类，你应该能够在扩展对象中做任何你想要的缓存。

# android - 如何从 Android AppWidget 启动 Activity？

> ID：11269559
> 
> 赞同：13
> 
> 时间：2012-06-29T22:07:12.480
> 
> 标签：android, android-activity, android-appwidget

像这样的代码运行良好。

```
 Intent configIntent = new Intent (context, WidgetConfigActivity.class);
    configIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
    PendingIntent pIntent = PendingIntent.getActivity(context, 0, configIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    remoteView.setOnClickPendingIntent(R.id.btn, pIntent); 
```

但是我想在活动出现之前隐藏该按钮，所以我试图将意图发送到小部件本身，在`onReceive()`方法中执行隐藏组件，然后启动活动。问题是我不能`startActivity()`在 AppWidget 中使用函数。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T22:58:29.457

> 问题是我不能在 AppWidget 中使用 startActivity() 函数。

是的你可以。您被传入（或）您的-- 调用的`Context`对象中。`onUpdate()``onReceive()``AppWidgetProvider``startActivity()`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-30T09:14:49.297

谢谢 2 CommonsWare

还有一件事要做。在这种情况下`context.startActivity();`抛出。`RuntimeException`

> 从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

所以你需要设置标志

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

前。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-12T11:11:12.343

```
 // on receive function use this for new activity start
               Intent intent = new Intent (context, AppWdget.class);
               intent.setFlags (Intent.FLAG_ACTIVITY_NEW_TASK);
               context.startActivity (intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-14T00:04:47.500

您可以发送广播意图而不是开始活动！我想在按下小部件按钮时执行一个动作——而不是专门启动一个显示在屏幕上的活动。您可以使用此技术在小部件本身中执行您的代码（其中小部件不一定包含活动。）

```
Intent intt = new Intent(ctx, RWidg.class);
intt.setAction("myActionName");
PendingIntent bcInt = PendingIntent.getBroadcast(ctx, 0, intt, 0);

RemoteViews views = new RemoteViews(ctx.getPackageName(), R.layout.widg_lay);
views.setOnClickPendingIntent(R.id.button, bcInt);

appWidgetManager.updateAppWidget(widgId, views); 
```

不是使用 PendingIntent 来启动一个活动，而是使用 PendingIntent.getBroadcast() 创建一个带有“密钥”的 PendingIntent： ActivityManager.INTENT_SENDER_BROADCAST 导致 ActivityManager 执行 sendBroadcast() 而不是 startActivity()

您需要在 onRecieve() 方法中添加一个“if”语句，以拦截您使用的一个或多个操作名称：

```
public void onReceive(Context ctx, Intent intt) {
  String action = intt.getAction();
  if (action.compareTo("myActionName")) {
    // Do your myActionName work here
  } else {
    super.onReceive(ctx, intt);
  }
} // end of onReceive 
```

# authentication - LDAP 与关系数据库

> ID：11269564
> 
> 赞同：7
> 
> 时间：2012-06-29T22:07:53.897
> 
> 标签：authentication, ldap, authorization, relational-database

我在网上搜索了一个令人绝望的令人失望的答案后，我来找你我的问题：哪个更快：LDAP 还是关系数据库？

我需要设置一个具有用户身份验证和授权的系统。我知道 LDAP 具有满足这种需求的“结构”，但它真的比 MySQL 快吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T14:04:02.603

出于身份验证和授权的目的，我认为 LDAP 在性能和简单性或安装和维护之间提供了最佳组合。LDAP 作为一种协议非常小，需要的网络带宽也相对较少。小协议还使加密传输具有相当高的性能。

LDAP 也很简单，服务器易于部署，现代、专业质量的 LDAP 服务器提供了与关系数据库相比令人印象深刻的性能，所有其他条件都相同，例如硬件和查询类型。

我同意在您的情况下可以使用其中任何一种，但通常 LDAP 更适合身份验证和授权，因为它简单且维护成本较低。至于性能，我正在测试的 LDAP 服务器每秒提供大约 28,000 次身份验证，而 postgres 在相同硬件上提供大约 42% 的身份验证，尽管很难比较苹果和橘子。

现代专业品质的 LDAP 服务器还为安全密码存储提供极其强大和快速的加密哈希 - 以及在客户端必须使用 SASL 的 DIGEST-MD5 机制实现无密码时需要可逆密码的情况下相当强大的可逆分组密码（如 AES）验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T05:35:08.697

我同意 Al，一般来说不可能说哪个更快。这都是上下文的。我喜欢在这个老生常谈之后，Al 然后提出了一个普遍的观点，即 LDAP 很慢。:) 我离题了...

开个玩笑，归结为您要尝试做什么与目标系统优化做什么。MySQL/MSFT SQL Server/等。被构建为通用存储，您将（倾向于）在其中存储具有各种查询模式的规范化数据。他们在堆栈的许多层都有各种逻辑，可以尝试帮助您对数据进行各种类型的查询和计算，甚至在您最了解时让您向 QP 提示信息。LDAP 目录的优化往往完全不同……比如存储具有特定查询模式的分层组织对象（由 LDAP RFC 指定）。例如，AD 很快……很快。它针对对象搜索和检索以及相关操作（如身份验证）进行了优化。

像任何东西一样，您可以使用得好或不好。

没有处于疯狂的缩放模式，我怀疑你可以非常成功地使用其中任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:32:08.847

IMO 这不是一个真正的问题，因为**它总是取决于特定的实现**。

我只能把我的经验放在这里：LDAP 慢，SQL 快。我使用 MS SQL 2008，就我而言，由于它对重复查询的智能缓存，它非常快。

但是你需要它非常快吗？在处理用户、授权和身份验证时，基于 LDAP 的解决方案通常可以更轻松、更好地集成到其他软件和/或 LAN 基础设施。

# php - PHP JSON 数组格式化

> ID：11269568
> 
> 赞同：0
> 
> 时间：2012-06-29T22:08:39.777
> 
> 标签：php, arrays, json

让我首先开始，抱歉标题令人困惑。我不知道如何准确地描述它，但这里是。所以我在数据库中查询字符串。如果只找到 1 个结果，那么创建一个数组、用信息填充它、编码 JSON 并返回它相对容易。我对何时有多个结果感到困惑。下面的代码是我正在使用的，但我非常怀疑它是否正确。我无法使用我需要的方法将其编码为 JSON 格式。如果您至少可以帮助我指出正确的方向，我将不胜感激！谢谢！

* * *

PHP：

```
if ($action == 'profile') {
    while ($pson = mysql_fetch_array($personQuery)) {
        $typeSearch = 'profile';
        $profQuery = mysql_query("SELECT * FROM tableName WHERE ColumnName LIKE '$query'");
        $compQuery = mysql_query("SELECT * FROM tableName2 WHERE ColumnName LIKE '$query'");
        if ($profQuery && mysql_num_rows($profQuery) > 0) {
            $personQueryRows = mysql_num_rows($profQuery);
            while ($row = mysql_fetch_array($profQuery)) {
                if ($compQuery && mysql_num_rows($compQuery) > 0) {
                    while ($com = mysql_fetch_array($compQuery)) {
                        if (mysql_num_rows($profQuery) > 1) { 
                            $compQueryRows = mysql_num_rows($compQuery);
                            if ($compQueryRows > 0) {
                                $compReturn = "true";
                            } else {
                                $compReturn = "false";
                            }
                            $nameArray = Array(
                                "success"=>"true",
                                "date"=>date(),
                                "time"=>$time,
                                "action"=>$action,
                                "returned"=>"true"
                            );
                            global $result;
                            for ($i=1;$i<=$personQueryRows;$i++) {
                                $nameResult[$i]=Array(
                                    "id"=>$row['id'],
                                    "name"=>$row['name'],
                                    "gender"=>$row['gender'],
                                    "comp"=>$row['company'],
                                    "queryType"=>"profile"
                                );
                                $result = array_merge($nameArray, $nameResult[$i]);
                            }
                            $encodedJSON = json_encode($result);
                            echo $encodedJSON;
                        }
                    }
                }
            }
        }
    }
} 
```

}

返回的 JSON：

```
{"success":"true","date":"Jun 29 2012","time":"14:43:16","action":"profile","returned":"true","id":"14321","name":"John Smith","gender":"male","comp":"ABC Studios, LLC.","queryType":"profile"}
{"success":"true","date":"Jun 29 2012","time":"14:43:16","action":"profile","returned":"true","id":"292742","name":"John Smith","gender":"male","comp":"DEF Studios, LLC.","queryType":"profile"} 
```

JavaScript 错误（解析 JSON 时）：

```
Uncaught SyntaxError: Unexpected token { 
```

* * *

PS 我刚刚开始使用 PHP 数组和 JSON 格式，所以如果这完全错误，我深表歉意。还在学习阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:37:31.967

看起来你正在构建 $nameResult[$i]，但是你这样做了：

```
$result = array_merge($nameArray, $nameResult[$i]); 
```

您在 for 循环的每次迭代中都执行此操作（对于您返回的每一行一次），这意味着每次您都在破坏 $result。

在你完成那个 for 循环之后，你可以获取最终的 $result（意味着最后一个 $personQueryRows），然后对其进行 json_encode。

查看您的另一个问题（http://stackoverflow.com/questions/11257490/jquery-parse-multidimensional-array），看起来您真正应该做的是在您遍历 $personQueryRows 的循环之前：

```
$output=$nameArray; 
```

然后将 array_merge 行替换为：

```
$output[] = $nameResult[$i]; 
```

最后一行会将 $result 数组作为新的数组成员附加到 $output 数组上，这意味着它正在嵌套数组，这是嵌套 JSON 所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:33:40.567

您的代码应如下所示：

```
global $result;
$result = array();
.......    

if ($action == 'profile') {
  while{{{{{{{{...}}}}}}}}}}}

  $encodedJSON = json_encode( $result );
  echo $encodedJSON;
} 
```

# command-line - 如何清除 Octave 中的命令行？

> ID：11269571
> 
> 赞同：42
> 
> 时间：2012-06-29T22:08:54.523
> 
> 标签：command-line, octave

在 Octave 中，在命令行中键入命令时，有时我需要擦除整行并重新启动新命令。在 Matlab 中，擦除文本将使用`ESC`密钥完成。在 Octave 中，这不起作用。我发现丢弃输入文本的唯一方法是使用`Ctrl-C`. 这可行，但很丑陋，因为它会留在屏幕上。

是否有组合键可以清除 Octave 中的线路？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2015-02-16T04:58:13.717

清除命令窗口**类型**：

```
clc 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-06-30T01:20:28.153

定义了几个清除快捷方式：

*   `Meta-D`: 清除下一个单词¹
*   `Ctrl-K`: 清除到行尾
*   `Ctrl-U`: 清除整行
*   `Ctrl-L`：清除线路和屏幕

`octave` [在手册的命令行编辑部分](http://www.gnu.org/software/octave/doc/interpreter/Command-Line-Editing.html#Command-Line-Editing)查看更多示例。

由于历史原因`Ctrl-U`，通常由您的终端控制而不是`octave`，虽然`octave`也支持它。您可以使用`stty kill undef`（使用还原`stty kill '^U'`）对此进行测试。

[¹ `Meta`经常绑定到`Win`key或者`Alt`key上。如果不先按 Esc 键，然后按需要“元化”的字符。]

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-29T22:34:16.210

`Ctrl-A`: 转到行首。

`Ctrl-K`：杀死从光标开始的所有字符。

# python - 如何隐藏子进程的输出

> ID：11269575
> 
> 赞同：324
> 
> 时间：2012-06-29T22:08:57.657
> 
> 标签：python, subprocess, espeak

我在 Ubuntu 上使用 eSpeak 并有一个 Python 2.7 脚本，可以打印并说出一条消息：

```
import subprocess
text = 'Hello World.'
print text
subprocess.call(['espeak', text]) 
```

eSpeak 会产生所需的声音，但会因为一些错误（ALSA lib...，无套接字连接）而使外壳混乱，因此我无法轻松阅读之前打印的内容。退出代码为 0。

不幸的是，没有记录的选项可以关闭其冗长性，因此我正在寻找一种方法来仅在视觉上使其静音并保持打开的外壳清洁以进行进一步的交互。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：509
> 
> 时间：2012-06-29T22:15:36.430

对于 python >= 3.3，将输出重定向到 DEVNULL：

```
import os
import subprocess

retcode = subprocess.call(['echo', 'foo'], 
    stdout=subprocess.DEVNULL,
    stderr=subprocess.STDOUT) 
```

对于 python <3.3，包括 2.7 使用：

```
FNULL = open(os.devnull, 'w')
retcode = subprocess.call(['echo', 'foo'], 
    stdout=FNULL, 
    stderr=subprocess.STDOUT) 
```

它实际上与运行此 shell 命令相同：

```
retcode = os.system("echo 'foo' &> /dev/null") 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-06-30T01:02:41.797

这是一个更便携的版本（只是为了好玩，在您的情况下没有必要）：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from subprocess import Popen, PIPE, STDOUT

try:
    from subprocess import DEVNULL # py3k
except ImportError:
    import os
    DEVNULL = open(os.devnull, 'wb')

text = u"René Descartes"
p = Popen(['espeak', '-b', '1'], stdin=PIPE, stdout=DEVNULL, stderr=STDOUT)
p.communicate(text.encode('utf-8'))
assert p.returncode == 0 # use appropriate for your program error handling here 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2016-07-14T21:32:28.720

使用[`subprocess.check_output`](https://docs.python.org/2/library/subprocess.html#subprocess.check_output)（python 2.7 中的新功能）。如果命令失败，它将抑制标准输出并引发异常。（它实际上返回标准输出的内容，因此如果需要，您可以稍后在程序中使用它。）示例：

```
import subprocess
try:
    subprocess.check_output(['espeak', text])
except subprocess.CalledProcessError:
    # Do something 
```

您还可以使用以下命令抑制 stderr：

```
 subprocess.check_output(["espeak", text], stderr=subprocess.STDOUT) 
```

对于 2.7 之前的版本，请使用

```
import os
import subprocess
with open(os.devnull, 'w')  as FNULL:
    try:
        subprocess._check_call(['espeak', text], stdout=FNULL)
    except subprocess.CalledProcessError:
        # Do something 
```

在这里，您可以使用

```
 subprocess._check_call(['espeak', text], stdout=FNULL, stderr=FNULL) 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-07-23T21:56:35.113

从 Python3 开始，您不再需要打开 devnull 并且可以调用[subprocess.DEVNULL](https://docs.python.org/3/library/subprocess.html#subprocess.DEVNULL)。

您的代码将按如下方式更新：

```
import subprocess
text = 'Hello World.'
print(text)
subprocess.call(['espeak', text], stderr=subprocess.DEVNULL) 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2014-08-31T22:40:28.380

为什么不使用 commands.getoutput() 代替？

```
import commands

text = "Mario Balotelli" 
output = 'espeak "%s"' % text
print text
a = commands.getoutput(output) 
```

# c# - 如何管理处理任务中的服务质量？

> ID：11269576
> 
> 赞同：0
> 
> 时间：2012-06-29T22:08:58.180
> 
> 标签：c#, .net, algorithm, queue

我正在实施一项任务处理服务，我想管理服务质量，为某些类型的任务提供更高的优先级。有四种类型的任务，因此我将使用四个队列，每种类型的任务一个。

*   创建四个处理线程（每个队列一个）并为它们分配不同的优先级是否方便？
*   或者我应该让处理线程主要处理更高优先级的队列？
*   还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:43:36.057

I would suggest having a single thread that is responsible for grabbing tasks.

There are many, many possible strategies. One is simply to have 4 queues, and try to cycle between them. Another is to stick tasks into a priority queue (typically implemented with a heap data structure), but if you do that then be aware that all of the higher priority tasks will be taken before any lower priority tasks. A third is to use a priority queue based on age so you can take the oldest request first - then make high priority requests artificially old. (I could suggest the age of the oldest thing in the queue plus a constant term.)

One general point to keep in mind. If you assign sufficient capacity, your queues will likely remain reasonably short. If your capacity is insufficient, then queues will grow without bound and in the long run you can think of your queueing problem as one of triage rather than prioritization. But if possible, it often works well to try to increase capacity instead of being clever in prioritization.

# jquery - 如何从 Oracle APEX 4 经典报告中选择行元素值（表标签中的行元素）

> ID：11269577
> 
> 赞同：0
> 
> 时间：2012-06-29T22:08:58.447
> 
> 标签：jquery, row, oracle-apex, html-table

这里是挑战..

我有一个基于 Oracle APEX 4 中区域 1 的 SQL 的经典报告

报告（Report1）的结构类似于

```
 DATE_COL(this column will be hidden) or even the whole region can be hidden)
Row1    12-01-2001
Row2    11-01-2001
Row3    10-01-2001 
```

我想选择 Row1 的 DATE_COL 的值，即 Date1 并将其分配给可以在同一页或另一页上的 ITEM 的标签。

例如，ITEM 是 P_ITEM，其名称将在屏幕上显示为 12-01-2001

所以，基本上我想选择列 DATE_COL 报告的 Row1 元素并将其用作标签名称

然后我想选择 DATE_COL 的 Row2 元素，它是 DATE2，并分配给同一页面上另一个报告的 col1 标签，即 Report2，看起来像这样

```
 <a href = "www.google.com"> 11-01-2001 </a> (this name is coming from report 1 of DATE_COL of Row2 element) also it has link

Row1   100
Row2   200 
```

请指导我如何完成这个。

示例 html 看起来像这样

```
<!DOCTYPE html>
<html>
<body>

<table id="report_R124146326020103259" cellspacing="1" cellpadding="0" border="1" summary="">
<tbody>

<tr>

<td>

<table class="report-standard" cellspacing="1" cellpadding="2" border="0" summary="">

<tbody>

<tr>
 <th id="DATE1" class="header" align="left">DATE1</th>
 <th id="DATE2" class="header" align="left">DATE2</th>
 <th id="DATE3" class="header" align="left">DATE3</th>
 <th id="DATE4" class="header" align="left">DATE4</th>
 <th id="DATE5" class="header" align="left">DATE5</th>
</tr>

<tr class="highlight-row">
 <td class="data" headers="DATE1">12-01-2001</td>
 <td class="data" headers="DATE2">11-01-2001</td>
 <td class="data" headers="DATE3">10-01-2001</td>
 <td class="data" headers="DATE4">09-01-2001</td>
 <td class="data" headers="DATE5">08-01-2001</td>
</tr>

<tr class="highlight-row">
 <td class="data" headers="DATE1">10-01-2001</td>
 <td class="data" headers="DATE2">09-01-2001</td>
 <td class="data" headers="DATE3">08-01-2001</td>
 <td class="data" headers="DATE4">12-01-2001</td>
 <td class="data" headers="DATE5">11-01-2001</td>
</tr>

</tbody>

</table>

</td>

</tr>

</tbody>

</table>

</body>
</html> 
```

我猜想 JQuery 可以用来完成，但不确定选择器需要如何使用。

谢谢，--CP

编辑 1

我基于 Tom 的 Jquery 选择器创建了以下脚本，该选择器确实选择了行元素。但是，我在 W3Schools html 编辑器中运行的以下脚本没有选择我放入 Test 函数的行元素。我在“A 标签”中调用的测试函数没有产生任何结果。然而，WelcomeMessage 的另一个功能确实产生了结果。有人可以帮我找出错误吗？

```
<!DOCTYPE html>
<html>

<head>

    <script type="text/javascript" src="jquery.js"></script>

    <script type="text/javascript"> 
    function test(i) { 
       var ab = $("#report_DT tr:eq(i) td.data[headers='DATE1']").text();
       document.write(ab);
    }

    function welcomeMessage()
    {
      document.write("Welcome to Henley's Department Store!");
    }
    </script>

    </head>

    <body>

    <table id="report_DT" cellspacing="1" cellpadding="0" border="1" summary="">
    <tbody>

    <tr>

    <td>

    <table class="report-standard" cellspacing="1" cellpadding="2" border="0" summary="">

    <tbody>

    <tr>
     <th id="DATE1" class="header" align="left">DATE1</th>
     <th id="DATE2" class="header" align="left">DATE2</th>
     <th id="DATE3" class="header" align="left">DATE3</th>
     <th id="DATE4" class="header" align="left">DATE4</th>
     <th id="DATE5" class="header" align="left">DATE5</th>
    </tr>

    <tr class="highlight-row">
     <td class="data" headers="DATE1">12-01-2001</td>
     <td class="data" headers="DATE2">11-01-2001</td>
     <td class="data" headers="DATE3">10-01-2001</td>
     <td class="data" headers="DATE4">09-01-2001</td>
     <td class="data" headers="DATE5">08-01-2001</td>
    </tr>

    <tr class="highlight-row">
     <td class="data" headers="DATE1">10-01-2001</td>
     <td class="data" headers="DATE2">09-01-2001</td>
     <td class="data" headers="DATE3">08-01-2001</td>
     <td class="data" headers="DATE4">12-01-2001</td>
     <td class="data" headers="DATE5">11-01-2001</td>
    </tr>

    </tbody>

    </table>

    </td>

    </tr>

    </tbody>

    </table>

    <a href ="default.asp">  

    <div> <Script Language="JavaScript">
                         test(i);
                      </Script>
                 </div>

    </a>

    <a href ="default.asp">  

    <div> <Script Language="JavaScript">
                         welcomeMessage();
                      </Script>
                 </div>

    </a>
    </body>
    </html> 
```

任何人都可以发现为什么测试功能没有检索到所需结果的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:11:50.277

理想情况下，您希望为您的区域分配一个静态 ID（编辑区域 > 属性 > 静态 ID）

然后使用

```
$("#yourregionid tr:eq("+ rownumber_you_need +") td.data[headers='"+ header_id +"']").text() 
```

请注意 :eq 使用基于零索引的系统，因此第 0 行将是带有标题的行，而第 1 行将是带有实际数据的第一行。将 header_id 替换为您需要从中获取数据的列的标题。在您的示例中：

```
$("#yourregionid tr:eq(1) td.data[headers='DATE1']").text()
$("#yourregionid tr:eq(2) td.data[headers='DATE2']").text() 
```

编辑：

```
<a href="javascript:test(1);">click for a test</a>
<script type="text/javascript"> 
function test(i) { 
   var ab = $("#report_DT tr:eq(i) td.data[headers='DATE1']").text();
   alert(ab);
}; 
</script> 
```

编辑 2：因此，如果您想主动操作第二个报告的表头： - 为您的报告区域 2 分配静态区域 ID - 为区域（您的第二个区域）的“刷新后”事件创建动态操作. 这对于允许在您的区域进行分页同时仍保持更改的标题是必要的。- 对于真正的动作，选择一个执行 javascript 代码：

```
$("#report2staticid th").each(function(index){
   var linktext, newlink;
   if(index==0){
      linktext = $("report1staticid tr:eq(1) td.data[headers='DATE1']").text();
      newlink = $("<a />").attr("href", "www.google.com").text(linktext);
   } else if(index==1){
      //something for header 2
   } else if(index==2){
      //andsoforth
   };
   $(this).html(newlink);
}); 
```

这会遍历第二个报告中的每个 TH 元素，并更改每个 th 的 html 内容：我们在每个元素中放置一个新的 A 标记。

编辑 3：您在实施中犯了一些错误：

```
function test(i) { 
   var ab = $("#report_DT tr:eq(i) td.data[headers='DATE1']").text();
   document.write(ab);
} 
```

应该

```
function test(i) { 
   var ab = $("#report_DT table.report-standard tr:eq("+i+") td.data[headers='DATE1']").text();
   document.write(ab);
} 
```

i 是一个输入参数，您需要将其连接到选择器字符串中。

您的 HTML 脚本标记也是错误的。您调用 test 并为其提供“i”。“我”是什么？它在任何地方都没有定义。提供一个值。（记住，这是行号。）

```
<Script Language="JavaScript">test(1);</Script> 
```

完整代码：

```
<!DOCTYPE html>
<html>
   <head>
      <script type="text/javascript" src="jquery.js"></script>
      <script type="text/javascript">
      function test(i) {
         var ab = $("#report_DT table.report-standard tr:eq("+i+") td.data[headers='DATE1']").text();
        document.write(ab);
      }
      function welcomeMessage()     {
      document.write("Welcome to Henley's Department Store!");
      }
      </script>
      <title></title>
   </head>
   <body>
      <table id="report_DT" cellspacing="1" cellpadding="0" border="1" summary="">
         <tbody>
            <tr>
               <td>
                  <table class="report-standard" cellspacing="1" cellpadding="2" border=
                  "0" summary="">
                     <tbody>
                        <tr>
                           <th id="DATE1" class="header" align="left">
                              DATE1
                           </th>
                           <th id="DATE2" class="header" align="left">
                              DATE2
                           </th>
                           <th id="DATE3" class="header" align="left">
                              DATE3
                           </th>
                           <th id="DATE4" class="header" align="left">
                              DATE4
                           </th>
                           <th id="DATE5" class="header" align="left">
                              DATE5
                           </th>
                        </tr>
                        <tr class="highlight-row">
                           <td class="data" headers="DATE1">
                              12-01-2001
                           </td>
                           <td class="data" headers="DATE2">
                              11-01-2001
                           </td>
                           <td class="data" headers="DATE3">
                              10-01-2001
                           </td>
                           <td class="data" headers="DATE4">
                              09-01-2001
                           </td>
                           <td class="data" headers="DATE5">
                              08-01-2001
                           </td>
                        </tr>
                        <tr class="highlight-row">
                           <td class="data" headers="DATE1">
                              10-01-2001
                           </td>
                           <td class="data" headers="DATE2">
                              09-01-2001
                           </td>
                           <td class="data" headers="DATE3">
                              08-01-2001
                           </td>
                           <td class="data" headers="DATE4">
                              12-01-2001
                           </td>
                           <td class="data" headers="DATE5">
                              11-01-2001
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </td>
            </tr>
         </tbody>
      </table><a href="default.asp">
      <div>
         <script language="JavaScript" type="text/javascript">
         test(1);
         </script>
      </div>
      </a>
      <a href="default.asp">
      <div>
         <script language="JavaScript" type="text/javascript">
         welcomeMessage();                       
         </script>
      </div>
      </a>
   </body>
</html> 
```

# java - EJB 中的静态工厂方法

> ID：11269578
> 
> 赞同：0
> 
> 时间：2012-06-29T22:09:01.667
> 
> 标签：java, jsf, interface, ejb

我有一个 EJB，我不希望任何人能够显式地实例化它。所以我有一个实例化它的静态方法（工厂方法）这个类称为EmailEJB。它有一个名为 EmailService 的接口。

现在，当我使用 jsf 时，我有一个名为 EmailMB 的托管 bean。

我的问题：

1.  为什么我只能访问接口而不能访问 bean 本身？
2.  如何在 EmailMB 中实例化那个 EmailEJB ？我不能在接口内有一个静态类，也不能实例化接口。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:35:18.503

EJB 是实例化的，它的生命周期由您的容器管理。

托管 Bean 链接到 JSF，并且应该包含来自您的用户的值。

EJB 的作用是执行业务作业（从数据库中检索数据、保存、更新、插入、调用另一个 EJB 等...）。

您从托管 bean 中提取信息并将它们作为参数提供给 EJB 的方法。EJB 将完成这项工作，并可能会返回一些信息，这些信息可以存储在托管 bean 中以返回给用户。

EJB 永远不会在托管 bean 中实例化。**您不管理 EJB：它由应用程序服务器管理**。

# perl - 两个 perl 脚本使用同一个库，在同一个文件夹中 - 一个可以访问它，另一个不能

> ID：11269581
> 
> 赞同：0
> 
> 时间：2012-06-29T22:09:53.810
> 
> 标签：perl, apache, ubuntu

我正在尝试设置一个 apache 服务器来使用 FGMap 显示 FlightGear 的地图。地图页面的所有 Web 服务器文件都在 /var/www/fgmap 中。它调用 fg_server_xml.cgi 脚本，该脚本尝试使用 /var/www/fgmap/sg_perl/blib/lib/sgmath.pm 中的库。（作为参考，Blib 是指向同一目录中另一个文件夹的符号链接 - 指向 /var/www/fgmap/sg_perl/blibx86-64）

当我尝试访问该页面时，fg_server_xml.cgi 给 ma 一个 500 Internal Server Error，并且 apache 错误日志显示：

```
[Sat Jun 30 07:59:48 2012] [warn] -T switch is ignored, enable with 'PerlSwitches -T' in httpd.conf\n
[Sat Jun 30 07:59:48 2012] [error] Can't locate sgmath.pm in @INC (@INC contains: /var/www/sg_perl/blib/arch/auto/sgmath 
/var/www/sg_perl/blib/lib /etc/perl /usr/local/lib/perl/5.14.2 
/usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 
/usr/local/lib/site_perl . /etc/apache2) 
at /var/www/fgmap/fg_server_xml.cgi line 14.\nBEGIN failed--compilation aborted at /var/www/fgmap/fg_server_xml.cgi 
line 14.\n 
```

但是，我将另一个 perl 脚本 sg_test.pl 放到同一个目录中，它引用同一个库并从中运行一个函数并打印输出。该脚本运行良好，并且可以找到该库。

为什么一个脚本在其库调用中与另一个脚本相同且在完全相同的位置，却无法找到另一个脚本可以轻松访问的文件？

我的一个理论是，Apache 试图以没有权限或其他东西的用户身份访问它，以访问其中包含 sgmath.pm 的文件夹，因此我让所有用户都可以访问 WWW 的每个文件夹/子文件夹/文件。仍然没有运气。

Apache 绝对可以使用 .cgi，这没问题，我制作了一个可以正常工作的测试 .cgi 文件。

谢谢！

编辑：有问题的图书馆调用

```
use lib "/var/www/sg_perl/blib/lib";
use lib "/var/www/sg_perl/blib/arch/auto/sgmath";
use sgmath; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:34:32.433

使用`use lib`，您添加了

```
/var/www/sg_perl/blib/lib 
```

但你说文件在

```
/var/www/fgmap/sg_perl/blib/lib 
```

后一条路径不存在`@INC`（通过检查错误消息确认）。

# c++ - 处理带有特殊字符的 Hunspell 建议

> ID：11269586
> 
> 赞同：0
> 
> 时间：2012-06-29T22:10:26.427
> 
> 标签：c++, ascii, hunspell

我已使用 Visual Studio 2010 将[Hunspell](http://hunspell.sourceforge.net)集成到 Windows 7 上的非托管 C++ 应用程序中。

我有适用于英语的拼写检查和建议，但现在我正试图让事情适用于西班牙语并遇到一些障碍。每当我收到有关西班牙语的建议时，带有重音字符的建议都无法正确翻译为`std::wstring`对象。

`Hunspell->suggest`以下是从该方法返回的建议示例：

![Hunspell->suggest(...) 结果](../Images/98b3e58827adb820b627ad4a1368d246.png)

这是我用来将其转换`std::string`为`std::wstring`

```
std::wstring StringToWString(const std::string& str)
{
    std::wstring convertedString;
    int requiredSize = MultiByteToWideChar(CP_UTF8, 0, str.c_str(), -1, 0, 0);
    if(requiredSize > 0)
    {
        std::vector<wchar_t> buffer(requiredSize);
        MultiByteToWideChar(CP_UTF8, 0, str.c_str(), -1, &buffer[0], requiredSize);
        convertedString.assign(buffer.begin(), buffer.end() - 1);
    }

    return convertedString;
} 
```

在我运行完之后，我得到了这个，最后是时髦的角色。

![转换为 wstring 后](../Images/04ed94c84292f00deb6dbfeee9c616e5.png)

谁能帮我弄清楚这里的转换会发生什么？我猜测它与从 hunspell 返回的负字符有关，但不知道如何将其转换为`std::wstring`转换代码的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:11:24.337

It looks like the output of Hunspell is ASCII with code page 852. Use 852 instead of CP_UTF8 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx)

Or configure Hunspell to return UTF8.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:48:03.120

看起来 Hunspell 的输出是带有代码页`28591`（ISO 8859-1 Latin 1；西欧 (ISO)）的 ASCII，我通过查看 unix 命令行实用程序的 Hunspell 默认设置找到了它。

更改`CP_UTF8`为`28591`对我有用。

```
// Updated code page to 28591 from CP_UTF8
std::wstring StringToWString(const std::string& str)
{
    std::wstring convertedString;
    int requiredSize = MultiByteToWideChar(28591, 0, str.c_str(), -1, 0, 0);
    if(requiredSize > 0)
    {
        std::vector<wchar_t> buffer(requiredSize);
        MultiByteToWideChar(28591, 0, str.c_str(), -1, &buffer[0], requiredSize);
        convertedString.assign(buffer.begin(), buffer.end() - 1);
    }

    return convertedString;
} 
```

这是来自 MSDN[的代码页列表，](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756%28v=vs.85%29.aspx)它帮助我找到了正确的代码页整数。

# wordpress - 如何在WordPress的登录屏幕中隐藏“用户名”-“密码”文本字段

> ID：11269587
> 
> 赞同：0
> 
> 时间：2012-06-29T22:10:30.700
> 
> 标签：wordpress

我正在使用 wordpress 的社交连接插件，并希望使社交登录（fb、twitter、堆栈交换......）成为唯一的选择。我查看了各种插件来自定义登录页面，但它们都没有提供删除用户名和密码文本字段以及“记住我”复选框和“忘记密码？”的功能。标签。有任何想法吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-29T23:38:41.917

如果要删除密码和用户名文本字段，则必须修改 wp-login.php（在您的 wordpress 目录中）并删除或注释（用`<!--`and注释`-->`）这部分（第 671 到 708 行）：

```
<form name="loginform" id="loginform" action="<?php echo esc_url( site_url( 'wp-login.php', 'login_post' ) ); ?>" method="post">
    <p>
        <label for="user_login"><?php _e('Username') ?><br />
        <input type="text" name="log" id="user_login" class="input" value="<?php echo esc_attr($user_login); ?>" size="20" tabindex="10" /></label>
    </p>
    <p>
        <label for="user_pass"><?php _e('Password') ?><br />
        <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="20" /></label>
    </p>
<?php do_action('login_form'); ?>
    <p class="forgetmenot"><label for="rememberme"><input name="rememberme" type="checkbox" id="rememberme" value="forever" tabindex="90"<?php checked( $rememberme ); ?> /> <?php esc_attr_e('Remember Me'); ?></label></p>
    <p class="submit">
        <input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="<?php esc_attr_e('Log In'); ?>" tabindex="100" />
<?php   if ( $interim_login ) { ?>
        <input type="hidden" name="interim-login" value="1" />
<?php   } else { ?>
        <input type="hidden" name="redirect_to" value="<?php echo esc_attr($redirect_to); ?>" />
<?php   } ?>
<?php   if ( $customize_login ) : ?>
        <input type="hidden" name="customize-login" value="1" />
<?php   endif; ?>
        <input type="hidden" name="testcookie" value="1" />
    </p>
</form> 

<?php if ( !$interim_login ) { ?>
<p id="nav">
<?php if ( isset($_GET['checkemail']) && in_array( $_GET['checkemail'], array('confirm', 'newpass') ) ) : ?>
<?php elseif ( get_option('users_can_register') ) : ?>
<a href="<?php echo esc_url( site_url( 'wp-login.php?action=register', 'login' ) ); ?>"><?php _e( 'Register' ); ?></a> |
<a href="<?php echo esc_url( wp_lostpassword_url() ); ?>" title="<?php esc_attr_e( 'Password Lost and Found' ); ?>"><?php _e( 'Lost your password?' ); ?></a>
<?php else : ?>
<a href="<?php echo esc_url( wp_lostpassword_url() ); ?>" title="<?php esc_attr_e( 'Password Lost and Found' ); ?>"><?php _e( 'Lost your password?' ); ?></a>
<?php endif; ?>
</p>
<?php } ?> 
```

之后，您应该只有 Wordpress 徽标和反向链接。

# ruby-on-rails - 没有页面刷新的 Rails 通知

> ID：11269592
> 
> 赞同：1
> 
> 时间：2012-06-29T22:10:43.523
> 
> 标签：ruby-on-rails, ruby, jquery

我通过 Rails 创建了一个简单的私人消息传递应用程序，但我试图让它简单地显示新消息已经到达，而无需用户刷新页面。

我正在研究状态机，因为我认为它可能是构建这样的东西的一部分。谁能把我推向正确的方向？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:06:19.140

使用 javascript 最简单的方法是使用`setTimeout`+定期向服务器发送请求`$.get()`。

另一种稍微复杂一点的方法是使用像[faye](http://faye.jcoglan.com/)这样的宝石。这个主题有很好的[railscast](http://railscasts.com/episodes/260-messaging-with-faye)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:48:08.077

查看任何消息传递协议，例如：

[法耶](http://faye.jcoglan.com/)

[套接字.IO](http://socket.io/)

或托管解决方案，如 [PubNub](http://www.pubnub.com/)或[Pusher](http://pusher.com/)

# c - C void 指针和指针比较

> ID：11269594
> 
> 赞同：3
> 
> 时间：2012-06-29T22:10:49.207
> 
> 标签：c, pointers, struct, comparison, void-pointers

我有以下函数从 C 中的链表中删除通用数据：

```
void removeData(void *data, struct accList *theList)
{
    struct accListNode* cur = theList->head;
    struct accListNode* prev = NULL;

    for(; cur != NULL; prev = cur, cur = cur->next)
    {
        if(cur->data == data)
        {
            if(cur == theList->head)
            {
               theList->head = cur->next;
            }
            if(cur == theList->tail)
            {
                theList->tail = prev;
            }
            if(prev != NULL)
            {
                prev->next = cur->next;
            }
            free(cur);
            return;
        }
    }
} 
```

背后的含义是`cur->data == data`什么？

由于我的数据是通用的 ( `void*`)，这对任何原始类型和任何结构类型意味着什么？

例如，考虑员工结构：

```
struct employee
{
    char name[20];
    float wageRate;
}; 
```

`cur->data == data`如果 data 是 type ，该语句将如何工作`struct employee*`？由于数据是指向结构的第一个内存地址的指针，我只是比较指针地址吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T22:15:19.427

```
cur->data == data 
```

将指针`cur->data`与指针进行比较`data`。您正在比较它们的值，而不是它们的地址。指针是和其他变量一样的变量。它有一个地址（即`&some_ptr`）和一个值（即它所指事物的地址）。

请注意，其他类型的比较（即`<` `>` `>=` `<=`）会导致未定义的行为，除非指针指向同一数组的元素或指向末尾的元素（除非您知道它们指向驻留的“对象”，否则这样做没有意义无论如何，在同一块连续内存中，但仍然）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T22:21:55.323

> cur->data == data 背后的含义是什么？

代码正在检查两个指针​​是否是同一个指针

> 由于我的数据是通用的（void*），这对任何原始类型和任何结构类型意味着什么？
> 
> 如果数据是 struct employee* 类型，语句 cur->data == data 将如何工作？

没什么，比较的效果是一样的

> 由于数据是指向结构的第一个内存地址的指针，我只是比较指针地址吗？

不，你在比较指针

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T22:15:43.347

您正在比较指针本身，而不是指向的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T00:20:26.870

我猜你没有写removeData()？如果不是，那么我的解释是：

removeData() 旨在从链表中删除特定条目（即*data），而不是内容等于*data 的条目。因此，removeData() 的调用者必须已经知道他们想要 free() 的条目的确切位置。他们可以自己释放（）它，但这并不好，因为链表仍然包含指向它的指针，并且可能链表的其他用户会认为释放（）的对象仍然有效（他们会没有理由不相信，没有任何其他计划告诉他们）。

如果您想要一个函数在列表中搜索其内容与 *data 的内容匹配的条目（但与 *data 不在同一内存中），那么您需要为每种此类类型编写一个 removeData() 版本，并且您的 accList 需要是同质的（包含该类型的所有对象），或者 accList 还需要包含每个条目类型的一些指示，可能作为枚举，以及 removeData() 的每个版本（每种类型一个) 将需要跳过与其自身类型不匹配的元素。

# c# - LinqToEntities 产生不正确的 SQL（双重子查询）

> ID：11269595
> 
> 赞同：6
> 
> 时间：2012-06-29T22:10:49.833
> 
> 标签：c#, sql, linq, linq-to-entities

我有一个 LinqToEntities 查询，它在创建 SQL 时会产生一个子查询。这会导致结果集在每次运行查询时返回 0-3 个结果。子查询本身会产生一个随机结果（应该如此）。这里发生了什么？

LINQ 查询：

```
from jpj in JobProviderJobs
where jpj.JobID == 4725 
&& jpj.JobProviderID == (from jp2 in JobProviderJobs 
                        where jp2.JobID == 4725 
                        orderby Guid.NewGuid() 
                        select jp2.JobProviderID).FirstOrDefault()
select new 
{
    JobProviderID = jpj.JobProviderID
} 
```

产生这个 SQL：

```
SELECT 
[Filter2].[JobID] AS [JobID], 
[Filter2].[JobProviderID1] AS [JobProviderID]
FROM   (SELECT [Extent1].[JobID] AS [JobID], [Extent1].[JobProviderID] AS [JobProviderID1], [Limit1].[JobProviderID] AS [JobProviderID2]
    FROM  [dbo].[JobProviderJob] AS [Extent1]
    LEFT OUTER JOIN  (SELECT TOP (1) [Project1].[JobProviderID] AS [JobProviderID]
        FROM ( SELECT 
            NEWID() AS [C1], 
            [Extent2].[JobProviderID] AS [JobProviderID]
            FROM [dbo].[JobProviderJob] AS [Extent2]
            WHERE 4725 = [Extent2].[JobID]
        )  AS [Project1]
        ORDER BY [Project1].[C1] ASC ) AS [Limit1] ON 1 = 1
    WHERE 4725 = [Extent1].[JobID] ) AS [Filter2]
LEFT OUTER JOIN  (SELECT TOP (1) [Project2].[JobProviderID] AS [JobProviderID]
    FROM ( SELECT 
        NEWID() AS [C1], 
        [Extent3].[JobProviderID] AS [JobProviderID]
        FROM [dbo].[JobProviderJob] AS [Extent3]
        WHERE 4725 = [Extent3].[JobID]
    )  AS [Project2]
    ORDER BY [Project2].[C1] ASC ) AS [Limit2] ON 1 = 1
WHERE [Filter2].[JobProviderID1] = (CASE WHEN ([Filter2].[JobProviderID2] IS NULL) THEN 0 ELSE [Limit2].[JobProviderID] END) 
```

**编辑：**

因此将子查询更改为此有效，但我不知道为什么

```
(from jp2 in JobProviderJobs 
    where jp2.JobID == 4725 
    orderby Guid.NewGuid() 
    select jp2).FirstOrDefault().JobProviderID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:32:25.023

这样做是由于`FirstOrDefault()`. 调用`FirstOrDefault()`一个空的 JobProviderJobs 集会产生一个`null`值，但是调用一个空的`int`s 集会产生一个`0`. 认识到这一点，LINQ to Entities 尝试在查询结束时调用 case 语句，以确保如果没有匹配的 JobProviderJobs，则选择的结果将为 0 而不是 null。

在大多数情况下，重新创建内部投影不会引起任何问题，但是您的使用`NewGuid()`显然会抛出这个逻辑。

您找到了一种解决方案。另一种方法是这样转换内部表达式的结果：

```
from jpj in JobProviderJobs
where jpj.JobID == 4725 
&& jpj.JobProviderID == (from jp2 in JobProviderJobs 
                        where jp2.JobID == 4725 
                        orderby Guid.NewGuid() 
                        select (int?) jp2.JobProviderID).FirstOrDefault()
select new 
{
    JobProviderID = jpj.JobProviderID
} 
```

更正确的实现将重用初始 SQL 投影，而不是创建两个等效的投影。很可能解析器根本不够复杂，无法正确处理这个问题，开发人员从来没有看到有任何需要修复它，因为 SQL Server 应该能够优化相同的投影，只要它们是确定性的。

如果尚不存在，您可能应该记录一份关于此的错误报告。

# php - 不使用 pcntl_fork 的 PHP 简单守护程序

> ID：11269596
> 
> 赞同：1
> 
> 时间：2012-06-29T22:10:52.410
> 
> 标签：php, bash, cron, daemon, background-process

我的 Web 应用程序的一部分是一个后台脚本，它从 beanstalkd 服务器轮询并处理数据。

该脚本需要连续运行（如守护程序）。如果它崩溃，它需要重新启动。它也不能启动两次（更准确地说是运行两次）。

由于我想简化部署和开发过程，我想避免使用`pcntl_fork`. 它在 Windows 上不可用，它需要在 Mac 上重新编译 PHP，有时也在 Linux 上......

我可以简单地使用 bash 脚本在后台启动 PHP 脚本吗？

```
# verify that the script is not already running
...

/usr/bin/php myScript.php & 
```

如果我每隔一小时左右使用 crontab 执行这个批处理，我的进程应该连续运行，如果它崩溃，它应该在最多一小时内重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:36:49.330

假设您盲目地控制运行脚本的服务器，[Supervisor](http://supervisord.org/)对您来说可能是一个很好的解决方案。

它是一个进程控制守护进程，用 Python 编写。您可以将其配置为启动您的 PHP 脚本并使其保持运行。PHP 脚本本身不需要做任何特别的事情。没有分叉，没有手动过程控制，什么都没有。

另一方面，您还表达了对`pcntl_fork`在 Windows 上不可用的担忧。如果你真的在 Windows 上运行这个东西，Supervisor 不会为你工作，因为它不是 Windows 友好的。请记住，Windows 对 Unix 风格的守护进程也不是很友好，因为它希望将守护进程作为服务来控制。虽然[这是可能的](https://stackoverflow.com/questions/5952500/setting-a-php-script-as-a-windows-service)，但这并不是一个简单或优雅的解决方案。

# ruby-on-rails - 如何在浏览器中查看 Rails 测试输出？

> ID：11269600
> 
> 赞同：0
> 
> 时间：2012-06-29T22:11:12.630
> 
> 标签：ruby-on-rails, testing

我可以发誓，早在 2.x 时代就有一种方法可以在浏览器中查看 Rails 测试输出，类似于 Jasmine 为 Javascript 所做的。

我疯了还是这存在？如果是这样，它是宝石吗？我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:15:57.503

不确定你的意思是什么——因为你必须在命令行上运行 Rails 测试，它们如何/为什么会在你的浏览器中结束？

也就是说，也许您正在考虑代码覆盖率报告？这些生成的 HTML 文件显示了每个被测试文件的代码百分比，看起来像这样：

![](../Images/159ff854e550bf05d6d88acac1f9ff03.png)

![](../Images/a67dbb8a5b24b21e9038874fb0d2a895.png)

这些屏幕截图都来自[simplecov](https://github.com/colszowka/simplecov)，事实上的 Ruby 测试覆盖库。

# python - 在 Python 中，如何检测网站是否已关闭？

> ID：11269606
> 
> 赞同：-2
> 
> 时间：2012-06-29T22:12:35.887
> 
> 标签：python, http, request

换句话说，如果它返回 200，则打印 True。否则，错误。

我怎样才能检测到呢？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T22:15:31.470

我建议使用[`requests`](http://docs.python-requests.org/en/latest/index.html)图书馆访问网站：

```
>>> r = requests.get('http://example.com')
>>> r.status_code
200 
```

如果`status_code`不是 200 或出现异常，则它无法正常运行。[您可以在此处](http://docs.python-requests.org/en/latest/user/quickstart/#timeouts)和[此处](http://docs.python-requests.org/en/latest/user/quickstart/#errors-and-exceptions)阅读相关的例外情况（例如`requests.exceptions.Timeout`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T22:21:35.427

您可以像这样使用函数[urllib2.urlopen](http://docs.python.org/library/urllib2.html#urllib2.urlopen)：

```
>>> import urllib2
>>> print urllib2.urlopen("http://www.example.com").getcode()
200 
```

# facebook - 将查询字符串发送到 Facebook 应用程序画布

> ID：11269608
> 
> 赞同：-1
> 
> 时间：2012-06-29T22:13:01.023
> 
> 标签：facebook, query-string

我正在尝试创建 facebook 应用程序，但我不知道如何传递查询字符串。

如何将查询字符串参数传递给 facebook 应用程序？

我已将我的 url 添加到 facebook 应用程序中的画布 url。

```
http://www.pollsdb.com/get.aspx?qtnid=1&width=239&headerhight=40&height=204 
```

我希望用户能够通过更改`qtnid`查询字符串中的来访问不同的民意调查。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:22:16.870

您在画布 URL 设置中提供的查询字符串按原样传递。

如果你想从外部链接到你的应用程序，你必须使用`app_data`参数——你放在那里的所有东西也会传递给你的应用程序。如果您需要传输多个值，请在将它们分配给`app_data`或类似的东西之前对它们进行 JSON 编码。

# soundmanager2 - 第二次播放问题

> ID：11269613
> 
> 赞同：3
> 
> 时间：2012-06-29T22:13:57.920
> 
> 标签：soundmanager2

我的问题是一旦音轨停止播放并且您再次点击播放按钮，歌曲就无法播放。我的意思是我没有听到任何播放，但第一次工作正常。

```
 soundManager.url = '{{ asset('bundles/bm/swf/')}}';
    soundManager.onload = (function() {
        var preview = soundManager.createSound({
            id: 'previewer',
            url: '{{ path('play_track', { 'id' : track.id}) }}',
            type: 'audio/mp3'
        });
        preview.options.whileplaying = function() {
            var current  = new Date (this.position),
                minutes  = current.getMinutes(),
                seconds  = current.getSeconds();

            var current = minutes + ':' + seconds;

            $('.editable').html(current);
        }

        $('.bigPlay').click(function(e){
            if($(this).hasClass('playbtn')) {
                e.stopPropagation();
                $(this).removeClass('playbtn').addClass('pausebtn');
                preview.play({
                    onfinish: function() {
                        preview.stop();
                        $('.bigPlay').removeClass('pausebtn').addClass('playbtn');
                    }
                });

                return false;
            }

            if($(this).hasClass('pausebtn')) {
                e.stopPropagation();
                $('.bigPlay').removeClass('pausebtn').addClass('playbtn');
                preview.stop();

                return false;
            }
        });
    }); 
```

控制台显示：

```
-- SoundManager 2: HTML5 support tests (/^(probably|maybe)$/i): mp3: true (preferring flash), mp4: true (preferring flash), ogg: true, wav: true -- soundmanager2.js:1110
-- SoundManager 2 V2.97a.20120527 (AS2/Flash 8) + HTML5 audio, normal polling -- soundmanager2.js:1110
soundManager::createMovie(): Trying to load /bundles/bm/swf/soundmanager2_debug.swf soundmanager2.js:1110
soundManager::initMovie(): Waiting for ExternalInterface call from Flash... soundmanager2.js:1112
soundManager::externalInterfaceOK() (~0 ms) soundmanager2.js:1112
soundManager::init() soundmanager2.js:1112
soundManager: Attempting JS to Flash call... soundmanager2.js:1112
(Flash): SM2 SWF V2.97a.20120527 (AS2/Flash 8) soundmanager2.js:1112
(Flash): JS to/from Flash OK soundmanager2.js:1112
Flash security sandbox type: remote soundmanager2.js:1112
(Flash): Enabling polling, 50 ms interval soundmanager2.js:1112
-- SoundManager 2 loaded (OK) -- soundmanager2.js:1110
soundManager::initComplete(): calling soundManager.onload() soundmanager2.js:1110
soundManager.createSound(): previewer (/app_dev.php/track/play/4.mp3) soundmanager2.js:1110
SMSound() merged options: {
 id: previewer, 
 url: /app_dev.php/track/play/4.mp3, 
 type: audio/mp3, 
 autoLoad: false, 
 autoPlay: false, 
 loops: 1, 
 multiShot: true, 
 multiShotEvents: false, 
 pan: 0, 
 stream: true, 
 usePolicyFile: false, 
 volume: 100
} soundmanager2.js:1112
Loading sound previewer via HTML5 soundmanager2.js:1112
creating HTML5 Audio() element with URL: /app_dev.php/track/play/4.mp3 soundmanager2.js:1112
HTML5::adding event listeners: previewer soundmanager2.js:1112
SMSound.load(): /app_dev.php/track/play/4.mp3 soundmanager2.js:1110
HTML5::load: previewer soundmanager2.js:1112
0 soulshaka-club-69-underground-mix:529
soundManager.onload() complete soundmanager2.js:1110
HTML5::loadstart: previewer soundmanager2.js:1112
SMSound.play(): "previewer" is loading - attempting to play.. soundmanager2.js:1110
SMSound.play(): "previewer" is starting to play soundmanager2.js:1112
setPosition(0): delaying, sound not ready soundmanager2.js:1112
HTML5::play: previewer, /app_dev.php/track/play/4.mp3 soundmanager2.js:1112
HTML5::waiting: previewer soundmanager2.js:1112
HTML5::loadedmetadata: previewer soundmanager2.js:1112
HTML5::loadeddata: previewer soundmanager2.js:1112
SMSound._onload(): "previewer" loaded. soundmanager2.js:1110
HTML5::canplay: previewer, /app_dev.php/track/play/4.mp3 soundmanager2.js:1112
HTML5::playing: previewer soundmanager2.js:1112
HTML5::suspend: previewer soundmanager2.js:1112
HTML5::suspend: previewer soundmanager2.js:1112
HTML5::suspend: previewer soundmanager2.js:1112
HTML5::suspend: previewer soundmanager2.js:1112
HTML5::ended: previewer soundmanager2.js:1112
SMSound._onfinish(): "previewer" soundmanager2.js:1112
SMSound.play(): "previewer" soundmanager2.js:1112
SMSound.play(): "previewer" is starting to play soundmanager2.js:1112
setPosition(0): setting position soundmanager2.js:1112
HTML5::play: previewer, /app_dev.php/track/play/4.mp3 soundmanager2.js:1112
HTML5::playing: previewer soundmanager2.js:1112
setPosition(0): setting position soundmanager2.js:1112
SMSound.play(): "previewer" soundmanager2.js:1112
SMSound.play(): "previewer" is starting to play soundmanager2.js:1112
setPosition(0): setting position soundmanager2.js:1112 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T23:05:01.960

所以我不是 SoundManager2 方面的专家，但我能够修复一个类似这样的错误。对我来说，这是我的服务器。返回音频数据时需要设置 HTTP 标头。

技术说明部分列出了您需要提供的一些基本内容： [http ://www.schillmania.com/projects/soundmanager2/doc/technotes/](http://www.schillmania.com/projects/soundmanager2/doc/technotes/)

正确设置这些标题将播放音频。我需要添加更多的标题只是为了让 SoundManger2 让我播放两次声音。这是我的浏览器获取和 mpeg 文件的响应的标头。我可能需要也可能不需要“Accept-Ranges”标头：

```
Accept-Ranges:bytes
Connection:close
Content-Length:30592
Content-Type:audio/mpeg
Server:Jetty(6.1.x) 
```

# objective-c - 回调函数在提取双指针时出现问题

> ID：11269615
> 
> 赞同：-6
> 
> 时间：2012-06-29T22:14:10.557
> 
> 标签：objective-c, c, cocoa-touch, sqlite

```
// issue with the following not returning info or just stalling... but no errors
static int callback(void *voidParam, int argc, char **argv, char **azColName)
{   
    static int k = 0;
    myReturn structReturn;

    char *cTempF = (argv[0] ? argv[0] : "NULL");
    memcpy(&structReturn.cFirstName, cTempF, sizeof(cTempF));// tried strlen(cTempF)... no help

    memcpy(voidParam + k * sizeof(structReturn), &structReturn, sizeof(structReturn));

    k++;
} 
```

* * *

```
myReturn *structReturn = (myReturn*)malloc(sizeof(myReturn) * 20);

rc = sqlite3_exec(db, pSQL, callback, structReturn, &zErrMsg); 
```

* * *

```
typedef struct ReturnTag
{
    char cFirstName[100];
    char cLastName[100];
    short int iAge;
}myReturn; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:17:22.910

解决了它...需要： `memset(&structReturn.cFirstName, '\0', 100);`

```
static int callback(void *voidParam, int argc, char **argv, char **azColName)
{   
    static int k = 0;
    myReturn structReturn;

    char *cTempF = (argv[0] ? argv[0] : "NULL");
    memset(&structReturn.cFirstName, '\0', 100); // <--- needed here
    memcpy(&structReturn.cFirstName, cTempF, strlen(cTempF));

    memcpy(voidParam + k * sizeof(structReturn), &structReturn, sizeof(structReturn));

    k++;
} 
```

# jquery - asp.net jquery ajax json：交换数据的简单示例

> ID：11269622
> 
> 赞同：5
> 
> 时间：2012-06-29T22:15:02.237
> 
> 标签：jquery, asp.net, ajax, json

（问题在两个回复帖子的帮助下得到解决——见下文）

如果能获得一个在浏览器（使用 JavaScript/JQuery）和 ASP.NET（使用 Visual Studio 2010）之间交换数据 JSON 数据的简单示例，我将不胜感激。

当我单击一个按钮时，将执行以下操作：

```
 <script type="text/javascript">
    bClick = function () {
        var myData = { "par": "smile" };
        alert("hi "+myData.par);
        $.ajax({
            url: "ericHandler.ashx",
            data: myData,
            dataType: 'json',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            success: function (data) { alert("DIDit = " + data.eric); },
            error: function (data, status, jqXHR) { alert("FAILED:" + status); }
        });
    }
</script> 
```

在 Visual Studio 中，我有以下与 ashx 文件关联的代码。当我运行它并单击按钮时，一切都按预期工作，除了我没有看到 myData 传递给 C# 代码——我在调试器中查看 context.Request.QueryString 并显示“{}”。

我看过使用的例子

```
string stringParam = (string)Request.Form("stringParam"); 
```

但似乎没有定义 Visual Studio“请求”。我想做的就是看到数据双向移动，而我似乎已经完成了一半。任何帮助，将不胜感激。

--C#代码--

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace CSASPNETSerializeJsonString
{
/// <summary>
/// Summary description for ericHandler
/// </summary>
public class ericHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        string rq = context.Request.QueryString["par"];

        context.Response.ContentType = "application/json";
        context.Response.Write("{\"eric\":\"12345\"}");
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

}

***已解决 首先，如果您想将一些表单参数从 JavaScript 发送到 ASP.NET，则应使用下面第二篇文章中的 ajax 调用，并且不要对数据使用 stringify。换句话说，如果不指定要发送的数据是 json，则缺少任何规范默认为 'application/x-www-form-urlencoded'）。这将导致对象的字段以“url”格式附加（field=X&field2=Y&field3=Z..），从而使用 Request.Form["field"] 在 ASP.NET 中显示。

其次，如果你真的想发送 JSON 数据，那么指定这个类型就是发送的内容（就像我在上面所做的那样）并在接收端使用 InputStream。然后需要进一步解析接收到的字符串以获取字段值。

在我的示例中，我将“手动”编码为字符串的 JSON 数据发回。我相信有一个 JSON 序列化例程，以便可以发送 C# 对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T23:03:22.730

其他资源建议`contentType: 'application/json; charset=utf-8',`从 AJAX 调用中删除：

```
 $.ajax({ 
            url: "ericHandler.ashx", 
            data: myData, 
            dataType: 'json', 
            type: 'POST', 
            success: function (data) { alert("DIDit = " + data.eric); }, 
            error: function (data, status, jqXHR) { alert("FAILED:" + status); } 
        }); 
```

读取服务器端的值：

```
string myPar = context.Request.Form["par"]; 
```

你也可以试试：

```
string json = new StreamReader(context.Request.InputStream).ReadToEnd(); 
```

这里提到：[https ://stackoverflow.com/a/8714375/139917](https://stackoverflow.com/a/8714375/139917)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T22:44:12.463

我马上就搞定了。这是它最基本的形式：

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>

    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $.ajax({
                url: 'Handler.ashx',
                type: 'POST',
                success: function (data) {
                    alert(data);

                },
                error: function (data) {
                    alert("Error");
                }
            });
        });
    </script>
    <title></title>
</head>
<body>
    <form id="form1" runat="server">

    </form>
</body>
</html> 
```

代码背后：

```
<%@ WebHandler Language="C#" Class="Handler" %>

using System;
using System.Web;

public class Handler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write("Hello World");
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

# c++ - g ++：数组绑定不是整数常量

> ID：11269623
> 
> 赞同：9
> 
> 时间：2012-06-29T22:15:05.923
> 
> 标签：c++, g++, constants

有了代码，

```
const double rotationStep = 0.001;
const int N = 2*int(M_PI/rotationStep) + 3;

static unsigned int counts[N]; 
```

`g++`给出错误：

> 数组绑定在 »]« 标记之前不是整数常量

我正在使用`g++`/`gcc`版本 4.6.1

谁能告诉我为什么`g++`抱怨这种表达方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T22:50:30.903

从 2003 年的 ISO C++ 标准开始，这不是一个*完整的常量表达式*。引用标准第 5.19 节：

> 一个*整数常量表达式*只能包含字面量 (2.13)、枚举数、`const`变量或整数或枚举类型的静态数据成员，这些成员使用常量表达式 (8.5)、整数或枚举类型的非类型模板参数和 `sizeof`表达式进行初始化。浮动文字 (2.13.3) 只有在转换为整数或枚举类型时才能出现。

你可以改变这个：

```
const double rotationStep = 0.001;
const int N = 2*int(M_PI/rotationStep) + 3; 
```

对此：

```
const int inverseRotationStep = 1000;
const int N = 2*int(M_PI)*inverseRotationStep + 3; 
```

（假设`M_PI`在某处定义；标准中没有指定，但它是一个常见的扩展。）

2011 ISO C++ 标准稍微放宽了这一点。5.19p3（引用 N3337 草案）说：

> *整型常量表达式*是整型或无范围枚举类型的字面常量表达式。

我*认为* `2*int(M_PI/rotationStep) + 3`，因此`N`，符合新规则的条件，但您的编译器可能尚未实现它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T22:16:26.600

问题是……

```
g++ gives: array bound is not an integer constant before »]« token 
```

值`const`不是一个常量表达式（尽管这很容易理解为什么这会让你感到困惑）。

编辑：当我第一次读到这个时，我假设是 C。这里的问题是这个表达式在编译时没有被评估：

```
const int N = 2*int(M_PI/rotationStep) + 3; 
```

虽然这将是

```
const int N = 10; 
```

正如@ildjarn 在评论中指出的那样，浮点运算不能保证在编译时进行评估。 [这是我找到的相关 SO 帖子。](https://stackoverflow.com/questions/4417155/floating-point-arithmetic-at-compile-time)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T22:51:06.490

正如 Ed 已经指出的，浮点运算的优化，包括常量折叠，不能保证在编译时发生。[英特尔](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=/com.ibm.vacpp6m.doc/proguide/ref/cvfltar.htm)关于该主题的页面提供了一些示例，但主要是舍入行为可能不同，浮点运算可能会引发异常。[本文](http://www.agner.org/optimize/optimizing_cpp.pdf)更深入一些（第 8.3 节，“算术归约”）。

GCC 只支持

> “浮点表达式收缩，例如如果目标具有对它们的本机支持，则形成融合乘加运算”

[如编译器优化](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)手册中 ffp-contract 标志的描述中所述。

# python - 使用 Python 测量音频输出电平？

> ID：11269631
> 
> 赞同：1
> 
> 时间：2012-06-29T22:15:50.860
> 
> 标签：python, excel, audio, measure

有没有办法在 Python 中测量音频输出电平？我想每 1/10 秒测量一次 30 秒音频文件的音量，然后将数据导出到 Excel 之类的文件中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:25:03.997

我知道这是一个长镜头，但也许有一些 libavcodec/FFMpeg 端口到 python。总是值得一试，看看是否有沿着这些路线存在的东西......

# java - JavaFX HMTLEditor 对“返回”键没有反应

> ID：11269632
> 
> 赞同：3
> 
> 时间：2012-06-29T22:16:17.227
> 
> 标签：java, javafx-2

我试图用 JavaFX 的`HTMLEditor`组件做一些实验。我使用了以下代码（摘录）：

```
 fxPanel=new JFXPanel();
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            Group group = new Group();
            scene = new Scene(group);               
            fxPanel.setScene(scene);
            view = VBoxBuilder.create().build();

            group.getChildren().add(view);

            edit = HTMLEditorBuilder.create().build();
           // toolPane = TabPaneBuilder.create().minHeight(60d).build();
            //toolPane.getTabs().add(new Tab("Allgemein"));

            view.getChildren().add(edit);

        }
    });

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            jPanel1.add(fxPanel);
        }
    }); 
```

到目前为止，它工作正常，但有一个重要的例外——我不能为 BR 使用返回键——它似乎只是被忽略了。这个键完全没有反应。据我所知，任何其他键都按预期工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T23:50:09.580

我注意到`CTRL`-在不`M`工作的地方工作。`Enter`所以我只是通过`KeyListener`在 JFXPanel 上放置一个来解决这个问题，将它`KeyChar`从 10 更改为 13 并将事件重新发布到系统事件队列。如果 HTMLEditor 开始同时响应两者`ENTER`，这可能会在稍后停止工作`CTRL`，`M`尽管如此。

```
fxPanel.addKeyListener(new KeyListener() {

    public void keyTyped(KeyEvent e) {
        if (e.getKeyChar() == 10) {
            e.setKeyChar((char) 13);
            Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(e);
        }
    }

    public void keyPressed(KeyEvent e) {}

    public void keyReleased(KeyEvent e) {}
}); 
```

现在有人有更好的主意吗？

*编辑*：我发现另一种获得所需效果的方法是`KeyEventDispatcher`在当前键盘焦点管理器上安装自定义，如下所示：

```
KeyboardFocusManager kfm = DefaultKeyboardFocusManager.getCurrentKeyboardFocusManager();
kfm.addKeyEventDispatcher(new KeyEventDispatcher() {
    @Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        if (DefaultKeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner() == jfxPanel) {
            if (e.getID() == KeyEvent.KEY_TYPED && e.getKeyChar() == 10) {
                e.setKeyChar((char) 13);
            }
        }
        return false;
    }
}); 
```

这样做的好处是更改原始`KeyEvent`版本而不是之后发布新版本，因此如果`HTMLEditor`要开始响应`Enter`事件，我们就不会加倍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T12:14:11.167

我发现这是 JavaFX 中的一个已知错误。

[https://javafx-jira.kenai.com/browse/RT-33354](https://javafx-jira.kenai.com/browse/RT-33354)
和
[http://javafx-jira.kenai.com/browse/RT-20887](http://javafx-jira.kenai.com/browse/RT-20887)

但仅供参考，对于 JavaFX 2.2，它被解决为“不会修复”。JavaFX 8 中没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-24T16:23:42.627

我仍然看到 Oracle JDK 10 的这个问题。窥视`HTMLEditorSkin`，有一个`Command.INSERT_NEW_LINE`，但按“Enter”时没有执行。原则上，有用于执行`Command`, 的 API 可以从关键事件过滤器中调用，但 API 是私有的。

以下是围绕此限制的破解。它“有效”，但它当然是一个 hack，可能会随着 JavaFX 的未来更新而中断：

```
HTMLEditor editor = /* .. somehow get the HTMLEditor .. */
editor.addEventFilter(KeyEvent.KEY_PRESSED, event ->
{
    if (event.getCode() == KeyCode.ENTER)
    {
        event.consume();
        final HTMLEditorSkin skin = (HTMLEditorSkin) htmlEditor.getSkin();
        try
        {
            // Use reflection to invoke the private method
            // executeCommand(Command.INSERT_NEW_LINE.getCommand(), null);
            final Method method = skin.getClass().getDeclaredMethod("executeCommand", String.class, String.class);
            method.setAccessible(true);
            method.invoke(skin, Command.INSERT_NEW_LINE.getCommand(), null);
        }
        catch (Throwable ex)
        {
            throw new RuntimeException("Cannot hack around ENTER", ex);
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-18T22:32:21.610

您可以通过过滤事件并将 <^m> 事件触发到 webview 来生成换行符

```
 // fix enter ignored on linux
    HTMLEditor editor = ...
    WebView editorView = (WebView) editor.lookup(".web-view");
    editor.addEventFilter(KeyEvent.KEY_PRESSED, e -> {
        if (e.getCode() == KeyCode.ENTER) {
            e.consume();
            editorView.fireEvent(new KeyEvent(
                    e.getSource(),
                    editorView,
                    KeyEvent.KEY_TYPED,
                    "\r", "", KeyCode.ENTER,
                    false, true, false, false));
        }
    }); 
```

# c# - C# 等效于 stringByAddingPercentEscapesUsingEncoding？

> ID：11269635
> 
> 赞同：4
> 
> 时间：2012-06-29T22:16:29.300
> 
> 标签：c#, iphone, windows-phone

我试图找到一种方法来模仿`stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding`iPhone 的行为，使用 C#（用于 Windows Phone）。

我对 iPhone 编程一无所知，对它的网络搜索似乎没有提供任何文档页面来解释它实际上做了什么来帮助我弄清楚如何模仿它。我的意思是，我可以看到它使用编码“百分比转义”字符串，但我找不到任何示例来确认我将获得的输出是否正确。它只是一个简单的 URL 编码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:25:37.460

我不太确定我是否理解您的问题，但[HttpUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)可能是您正在寻找的。在 MSDN 你会发现它的定义和例子。

更新：[这是 Apple 的官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)，关于您提到的 iOS 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:02:09.347

试试这个网址

```
 var uri = new Uri (url);
    var nsurl = new NSUrl (uri.GetComponents (UriComponents.HttpRequestUrl, UriFormat.UriEscaped));
    UIApplication.SharedApplication.OpenUrl (nsurl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T17:14:03.313

虽然这个问题已经很老了，但对于那些仍在寻找答案的人`HttpUtility.UrlPathEncode`来说：C# 是否等同`stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]`于 Objective C。这是在移动应用程序/iOS/iPhone 应用程序 (Xamarin) 中编写电子邮件等时应该使用的。`HttpUtility.UrlEncode`和之间的区别`HttpUtility.UrlPathEncode`是 -

> UrlEncode 方法将每个空格字符转换为加号 (+)。UrlPathEncode 方法将每个空格字符转换为字符串“%20”，它以十六进制表示法表示一个空格。在对 URL 的路径部分进行编码时使用 UrlPathEncode 方法，以保证解码后的 URL 一致，无论哪个平台或浏览器执行解码。

此外，尽管 MSDN 文档建议使用**UrlEncode**而不是**UrlPathEncode**，但只有后者才能在引用的场景中起作用。

[更新] 在 Android (Xamarin) 中不起作用，如果您有编码字符串，则需要使用**HttpUtility.UrlDecode**将它们解码回来。

# actionscript-3 - 在 Flex 4.6 中写入日志文件

> ID：11269638
> 
> 赞同：1
> 
> 时间：2012-06-29T22:16:58.257
> 
> 标签：actionscript-3, apache-flex, flex4.6

有没有办法在 Flex 4.6 中写入文本文件？它是 AIR 的桌面应用程序。我想从几个数组中写入数据，以及时间和日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:19:11.620

为这个测试项目一起扔了一个简单的记录器：http: [//www.shaunhusain.com/DrawTextRandomly/srcview/](http://www.shaunhusain.com/DrawTextRandomly/srcview/) 它在 src/util/Logger.as

因为它标记了第一次创建日志条目，然后计算从那时到所有其他日志条目的时间并将其与记录的字符串一起输出，它还输出与最后一个日志条目的时间差，因此您可以了解完成一个功能/算法/操作需要多长时间。随意抓住这个，尽管只是一个测试片段，我可能应该在我的代码上发布一个许可证，我将使用 MIT 许可证[http://www.opensource.org/licenses/mit-使用 license.txt 更新 src 文件夹许可证.html](http://www.opensource.org/licenses/mit-license.html)

您可以重新利用这个类并让它使用 Flex 中的 FileStream/File 对象进行编写。文件本身基本上是特定文件的句柄，FileStream 将允许您调用 writeUTFBytes(string) 将数据写入文件。

代码将是这样的：

```
var fs:FileStream = new FileStream();
fs.open(new File("logfile.txt"),FileMode.WRITE);
fs.writeUTFBytes("Some output");
fs.close(); 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:50:42.930

[as3corelib](https://github.com/mikechambers/as3corelib)有一个可与 Flex Logging API 一起使用的[FileTarget类。](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/air/logging/FileTarget.as)

本[文档页面](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f0f.html)说明了如何使用日志记录 API。

# jasper-reports - JasperReports 根据 Category 值以外的值自定义系列标签

> ID：11269639
> 
> 赞同：1
> 
> 时间：2012-06-29T22:17:00.847
> 
> 标签：jasper-reports, jfreechart

我有一个带有折线图的 JasperReport，我需要在其上显示标签，但我希望它们有条件地显示每个数据点。我创建了自定义程序类来实际显示值，但我想使用与值字段不同的字段来决定是否应该显示它。

基本上在我的数据集中我有 3 个字段：

```
Date: (Category Axis)
Value: (Value Axis)
PrintValue: Boolean field 
```

我只想在 PrintValue=true 时打印标签中的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:07:39.090

一种解决方案是覆盖 JRDefaultScriptlet 在 scriptlet 类中实现的方法之一，然后以您希望的任何方式设置“PrintValue”的值。然后在您的图表数据集中，您应该能够将其`$V{PRINTVALUE}`作为操作数进行引用。

我将假设您使用 iReport 进行报告设计。

1.  在 iReport 中打开您的报告并单击报告名称（报告检查器中最顶部的节点）

2.  将 Scriplet 类设置为您的包名称和类，例如 org.company.scriptlets.MyChartClass

3.  在 iReport 中声明您的报告变量。在这种情况下，“PRINTVALUE”将是变量名。

4.  创建一个覆盖 scriplet 方法的 java 类，例如 beforeDetailEval，例如：

    ```
    @Override
    public void beforeDetailEval() throws JRScriptletException {
            super.beforeDetailEval();
            ...
            this.setVariableValue("PRINTVALUE", true);
    } 
    ```

    由于您希望有条件地为每个刻度线显示类别标签，因此您可能需要使用键/值对的 Map。键是类别标签，“PRINTVALUE”的值是真/假。注意我没有在上面的示例代码中说明这一点，但它完全有可能。只需将您的报告变量声明为 Map，例如`HashMap<String, Boolean> hm`.

5.  您需要将新的 scriplet 类添加到 iReport 中的 Classpath。

希望这有助于或至少让你开始。

# java - 使用 Java 拆分平面文件

> ID：11269642
> 
> 赞同：-1
> 
> 时间：2012-06-29T22:17:18.963
> 
> 标签：java, split

我对java相当陌生，需要一些帮助。我有 10 列的平面文件，总共有 9750 行。所有行都是用竖线分隔的。我需要将文件拆分为每行 2000 行（5 个文件）。

我如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:27:33.193

这是一个足够简单的算法：

1.  从文件“file.txt”中读取一行
2.  将行写入“file1.txt”
3.  总共重复 2000 次
4.  从文件“file.txt”中读取一行
5.  将行写入“file2.txt”
6.  总共重复 2000 次
7.  ETC

要从文件中读取，您可以使用`BufferedReader`：

```
BufferedReader in = new BufferedReader(new FileReader("file.txt"));
String s = in.readLine(); // read first line from file 
```

要写入文件，请使用`PrintWriter`：

```
PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("file1.txt")));
out.println("line1");
out.println("line2");
out.close(); // don't forget this after you're done printing to the file! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T20:49:20.763

您可以使用 FFPOJO 库。FFPOJO 项目是一个平面文件解析器，基于 POJO 的 Java 应用程序库。这是处理平面文件的面向对象的方法，因为该库基于 POJO 和对象平面映射 (OFM)，使用 Java 注释、XML 或两者兼而有之。一起使用时，XML 映射会覆盖注释。

[https://github.com/ffpojo/ffpojo](https://github.com/ffpojo/ffpojo)

# ruby-on-rails - 捆绑程序错误 - http.rb:799:in `connect': SSL_set_tlsext_host_name: (OpenSSL::SSL::SSLError)

> ID：11269649
> 
> 赞同：0
> 
> 时间：2012-06-29T22:17:47.577
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm, bundler

我将 gem 从 ruby​​-1.9.2 迁移到 ruby​​-1.9.3，然后尝试运行 bundle install。当我这样做时，我得到了上面的错误。关于为什么的任何线索？

使用 rvm 1.9.2、ruby 1.9.3p0（2011-10-30 修订版 33570）[i686-linux]、bundler 1.1.4 和 ruby​​gems 1.8.24

```
Error stack:
user@linux-kt6v:~/rails_projects/rails_app> bundle install
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_set_tlsext_host_name: (OpenSSL::SSL::SSLError)
  from /home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
  from /home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
  from /home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
  from /home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/http.rb:799:in `connect'
  from /home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
  from /home/user/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/http.rb:750:in `start'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/vendor/net/http/persistent.rb:224:in `connection_for'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/fetcher.rb:145:in `fetch'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/fetcher.rb:173:in `fetch_dependency_remote_specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/fetcher.rb:132:in `fetch_remote_specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/fetcher.rb:70:in `specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/source.rb:234:in `block in remote_specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/source.rb:232:in `each'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/source.rb:232:in `remote_specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/source.rb:165:in `fetch_specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/source.rb:70:in `specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/lazy_specification.rb:53:in `__materialize__'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/spec_set.rb:86:in `block in materialize'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/spec_set.rb:83:in `map!'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/spec_set.rb:83:in `materialize'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/definition.rb:127:in `specs'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/definition.rb:122:in `resolve_remotely!'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/installer.rb:48:in `run'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/installer.rb:12:in `install'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/cli.rb:220:in `install'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/vendor/thor/task.rb:22:in `run'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/vendor/thor.rb:263:in `dispatch'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/lib/bundler/vendor/thor/base.rb:386:in `start'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.4/bin/bundle:13:in `<top (required)>'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/bin/bundle:23:in `load'
  from /home/user/.rvm/gems/ruby-1.9.3-p0/bin/bundle:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:30:18.877

看起来您需要一些更新：

```
curl -L get.rvm.io | bash # get latest RVM
rvm reload                # load installed version 
rvm autolibs enable       # enable automatic libraries installation
rvm remove 1.9.3          # remove installed ruby
rvm install 1.9.3         # install it again - including proper libraries 
```

# objective-c - 在分配实例之前尝试访问静态属性崩溃

> ID：11269650
> 
> 赞同：1
> 
> 时间：2012-06-29T22:17:56.803
> 
> 标签：objective-c, ios, cmmotionmanager

我在我的应用程序中使用核心运动。此代码工作正常：

```
motionManager = [[CMMotionManager alloc] init];
int a = [CMMotionManager availableAttitudeReferenceFrames]; 
```

此代码因 EXC_BAD_ACCESS 崩溃，行上方有此注释：**THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY** _YOU_MUST_EXEC__

```
int a = [CMMotionManager availableAttitudeReferenceFrames];
motionManager = [[CMMotionManager alloc] init]; 
```

我可以通过使用语句的第一个顺序来解决这个问题，但是由于 availableAttitudeReferenceFrames 被定义为

```
+ (NSUInteger)availableAttitudeReferenceFrames 
```

似乎我应该能够在实例化一个类之前访问该属性。为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:20:34.350

这是一个相当奇怪的错误。如果你打电话`fork()`然后尝试使用CoreFoundation，你应该只看到这一点。因为你不能`fork()`在 iOS 上，所以你不应该看到这个错误。

你能在一个非常小的示例项目中重现这个问题吗？如果可以，您应该向 Apple[提交错误报告](http://bugreport.apple.com)并附上示例项目。

# php - 在 SQL 选择语句中将多个列值合并为单个值

> ID：11269655
> 
> 赞同：1
> 
> 时间：2012-06-29T22:18:40.800
> 
> 标签：php, mysql

我有一个自动完成字段，用户可以在其中以相同的顺序输入姓氏名字中间名。

使用姓氏名字中间名（作为一个术语）我必须显示自动完成下拉菜单。

在我的数据库中，我有 3 列名字姓氏和中间名。现在我必须将同一行的 3 个列值（asc_lastname、asc_firstname、asc_middlename）与用户输入（术语）进行比较。

这是 SQL 查询。请纠正我的错误。

```
$rs = mysql_query( "select asc_lastname, asc_firstname, asc_middlename from issio_asc_workers INNER JOIN issio_workers_asc_sc_list 
ON  issio_asc_workers.lname_fname_dob=issio_workers_asc_sc_list.lname_fname_dob where issio_workers_asc_sc_list.center_id='$cid' 
AND issio_workers_asc_sc_list.center_user_type = '31' AND issio_workers_asc_sc_list.center_status <> 'deleted' AND 
(issio_asc_workers.asc_lastname+' '+issio_asc_workers.asc_firstname+' '+issio_asc_workers.asc_middlename) 
LIKE '". mysql_real_escape_string($term) ."%'  ORDER BY issio_asc_workers.lname_fname_dob ASC LIMIT 0,10"); 
```

是否可以使用 SQL 查询一次比较 3 列值，例如

```
 select * 
 from table 
 where (column1+''+column2+''column3) like 'this is good' 
```

对不起我的糟糕句子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:56:54.260

试试这个查询：

```
SELECT * FROM your_table WHERE CONCAT(column1, ' ', column2, ' ', column3) LIKE '%this is good%' 
```

[CONCAT 文档](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)

# php - 如何从两个单独的页面将 PHP 变量传递给 Javascript 变量？

> ID：11269663
> 
> 赞同：-1
> 
> 时间：2012-06-29T22:20:10.623
> 
> 标签：php, javascript, variables, external

我正在尝试将 PHP 变量传递给 Javascript 变量，例如：

```
<?php   $myvar=10;   ?>

<script type="text/javascript">
    jsvar = <?php echo $myvar; ?>;
    document.write(jsvar);
</script> 
```

如何在另一个页面上分离变量？例如 Page1.html 将具有 document.write 并且变量将从 page2.php 中提取

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T22:23:54.987

只有阿贾克斯。以 jQuery 为例：

```
$.get('page2.php', function(data) {
    alert( data );
}); 
```

...

**更新**

或者（因为聪明的人指出总是有不止一种方法可以走）你可以包含`page2.php`在你`page1.php`的变量中，变量值将变得可用：

```
<?php
require_once('page2.php');
?>

<script type="text/javascript">
    jsvar = <?php echo $myvar; ?>;
    document.write(jsvar);
</script> 
```

# android - 跟踪 TableLayout 的位置？

> ID：11269664
> 
> 赞同：0
> 
> 时间：2012-06-29T22:20:12.300
> 
> 标签：android, android-ui

如何跟踪 UI 元素的位置，比如 a `TableLayout`？

我的意思是，每当它的位置发生变化时，都会调用某种事件处理程序，然后在事件处理程序代码中我可以获得这个 TableLayout 的坐标（可能是它的左上角的坐标）

示例代码将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:49:37.037

几乎任何小部件或布局都有[onLayout](http://developer.android.com/reference/android/view/ViewGroup.html#onLayout%28boolean,%20int,%20int,%20int,%20int%29)方法，该方法接收左、上、右和底部位置作为参数。基`android.view.View`类甚至对此事件[onLayoutChangeListener](http://developer.android.com/reference/android/view/View.OnLayoutChangeListener.html)有一个监听器，但`TableLayout`没有。所以你可以扩展它并覆盖`onLayout`方法来做你想做的事。

# javascript - 使用浏览器放大和缩小时，如何阻止 spry 菜单自动换行？

> ID：11269666
> 
> 赞同：0
> 
> 时间：2012-06-29T22:20:49.143
> 
> 标签：javascript, css, spry

我已经到了互联网的尽头，并试图解决这个问题。这是带有快速菜单的页面。你会注意到一些内联样式使它适合 980px 宽的设计。 [的HTML](http://www.enhancedbrand.com/wildfire/index.html)

这是 spry CSS。

```
 [CSS][2] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:34:37.303

我在萤火虫中设置了这个：

```
ul.MenuBarHorizontal {
    width: 1200px;
} 
```

这表明导航菜单比 980 宽，这就是它环绕的原因。您需要从菜单项的填充或边距中去除五个或十个像素。

```
ul.MenuBarHorizontal a {
    padding: 9px 20px;
} 
```

似乎运作良好。实际上，您可以将第二个填充值提高到 26 像素，而无需环绕。

# ruby-on-rails - Rails 应用程序通过链接获得不必要的 RESTFUL

> ID：11269670
> 
> 赞同：0
> 
> 时间：2012-06-29T22:21:13.390
> 
> 标签：ruby-on-rails

我有一个应用程序，当我在主页上时链接可以正常工作，但是当我在属于诸如“用户”之类的资源的页面上时，一些链接会有点奇怪。

当我在主页上并单击“关于”页面的链接时，我直接被带到那里。但是，如果我在用户/索引页面上并将鼠标悬停在“关于”页面的链接上，它会将目的地显示为“用户/关于”。

这是我的路线文件的样子。

```
RobotimusApp::Application.routes.draw do

  resources :users

  root to: "pages#home"

  match '/about', to:'pages#about'
  match '/guides', to:'pages#guides'

end 
```

这是我的导航栏的样子

```
%ul.nav
  %li
    =link_to 'Home', root_url
  %li
    =link_to 'About', 'about'
  - if user_signed_in?
    %li
      = link_to('My Sites', user_path(current_user)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:50:38.267

Welp，问题出在这一行：

```
=link_to 'About', 'about' 
```

我们没有像传递这样的路由路径`about_path`，而是传递字符串`'about'`。当`link_to`接收到一个字符串作为其 URL 参数时，它不会通过路由器或任何东西运行它；它假定这是您要访问的 URL。（毕竟，`about_path`和类似的返回字符串。）

因此，您最终会在 HTML 中得到类似这样的内容：

```
<a href="about">About</a> 
```

这里，`about`是一个相对 URL，所以从路径`/users`到`/users/about`.

您*可以*只使用前面的斜杠使其成为绝对路径：

```
= link_to 'About', '/about' 
```

但是当我们可以使用路由来代替时，硬编码我们的 URL 并不是特别适合 Rails。你可能会这样做：

```
= link_to 'About', about_pages_path 
```

（是`about_pages`路由名称吗？可能应该是。你总是可以用`as`参数命名它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:48:52.940

如果您`rake routes`在终端中运行，您将获得所有可用路线的列表。

认为您的关于页面的链接应该是

```
 = link_to 'About', about_pages_path 
```

# android - 用于检测矩形的 Android 手势检测器

> ID：11269671
> 
> 赞同：0
> 
> 时间：2012-06-29T22:21:13.840
> 
> 标签：android

您能否告诉我是否有任何库/API 来检测用户是否使用手势在屏幕上绘制了一个矩形？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:36:36.257

用于[`android.gesture.Gesture`](http://developer.android.com/reference/android/gesture/Gesture.html)存储手势。并[`android.gesture.GestureOverlayView`](http://developer.android.com/reference/android/gesture/GestureOverlayView.html)检测用户是否绘制需要的手势。这是一个很好的[教程](http://www.vogella.com/articles/AndroidGestures/article.html)

# c++ - 如何在 C++ 正则表达式中捕获 0-2 个组并打印它们？

> ID：11269678
> 
> 赞同：8
> 
> 时间：2012-06-29T22:22:01.517
> 
> 标签：c++, regex, c++11

### 编辑 3

当我被正则表达式卡住时，我采用了 good'ol 自定义解析方法。结果并没有那么糟糕，因为文件内容可以非常整齐地标记化，并且可以使用*非常*简单的状态机在循环中解析标记。那些想要检查的人，在 Stackoverflow [here](https://stackoverflow.com/questions/11282437/why-doesnt-range-for-find-my-overloads-of-begin-and-end-for-stdistream-iterat)中的另一个问题中，有一段代码使用 range-for、ifstream 迭代器和自定义流标记器执行此操作。这些技术大大降低了执行自定义解析器的复杂性。

我想在第一部分中以两个为一组的捕获组对文件内容进行标记，然后逐行标记。我喜欢一个半功能性的解决方案，但我想学习如何让它变得更好。也就是说，没有“额外处理”来弥补我对捕获组的知识不足。接下来是一些初步的，最后是一个更准确的问题（行

```
const std::regex expression("([^:]+?)(^:|$)"); 
```

...是我想结合处理结果来询问的问题）。

基本上是这样定义的文件：

```
definition_literal : value_literal
definition_literal : value_literal
definition_literal : value_literal
definition_literal : value_literal
HOW TO INTERPRET THE FOLLOWING SECTION OF ROWS
[DATA ROW 1]
[DATA ROW 2]
...
[DATA ROW n] 
```

其中每个数据行由一定数量的整数或浮点数组成，由空格分隔。每行具有与其他行一样多的数字（例如，每行可以有四个整数）。因此，“解释部分”基本上以纯文本形式在一行中讲述了这种格式。

我有一个几乎可以正常工作的解决方案，可以读取这样的文件：

```
int main() 
{
    std::ifstream file("xyz", std::ios_base::in);
    if(file.good())
    {
        std::stringstream file_memory_buffer;
        file_memory_buffer << file.rdbuf();
        std::string str = file_memory_buffer.str(); 
        file.close();

        const std::regex expression("([^:]+?)(^:|$)");
        std::smatch result;

        const std::sregex_token_iterator end;       
        for(std::sregex_token_iterator i(str.begin(), str.end(), expression); i != end; ++i)
        {
            std::cout << (*i) << std::endl;
        }
    }

    return EXIT_SUCCESS;
} 
```

使用定义的正则表达式`expression`，它现在打印`<value>`定义文件的部分，然后是解释部分，然后是数据行。如果我将正则表达式更改为

```
"([^:]+?)(:|$)" 
```

...它打印所有标记为一组的行，几乎就像我想要的那样，但是如何将第一部分标记为两组，其余部分逐行标记？

任何指针、代码、解释都非常受欢迎。谢谢。

### 编辑：

正如**Tom Kerr**已经指出的那样，但还有一些额外的点，这也是一次排练，或者如果你愿意，也可以编码 kata，不要编写自定义解析器，而是看看我是否可以——或者我们可以:-)——完成这与正则表达式。我知道正则表达式在这里不是最有效的事情，但这没关系。

我希望拥有的是类似于标题信息元组的列表（大小为 2 的元组），然后是 INTERPRET 行（大小为 1 的元组），我可以用它来选择一个函数来处理数据行（大小为 1 的元组）。

是的，“如何解释”行包含在一组定义明确的字符串中，我可以从头开始逐行读取，沿途拆分字符串，直到遇到其中一个解释行。我知道，这个正则表达式解决方案不是最有效的方法，但更像是编写 kata 代码让自己编写除客户解析器之外的其他东西（我上次用 C++ 编写已经有一段时间了，所以这也是在排练）。

### 编辑 2

我已经设法通过更改迭代器类型来访问元组（在这个问题的上下文中），就像这样

```
const std::sregex_iterator end;     
for(std::sregex_iterator i(str.begin(), str.end(), expression); i != end; ++i)
{
    std::cout << "0: " << (*i)[0] << std::endl;
    std::cout << "1: " << (*i)[1] << std::endl;
    std::cout << "2: " << (*i)[2] << std::endl;
    std::cout << "***" << std::endl;
} 
```

尽管这与我想要的还有很长的路要走，但我尝试使用的正则表达式有问题。无论如何，这个新发现，另一种迭代器，也有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:44:06.067

我相信你正在尝试的是：

```
TEST(re) {
    static const boost::regex re("^([^:]+) : ([^:]+)$");

    std::string str = "a : b";
    CHECK(boost::regex_match(str, re));
    CHECK(!boost::regex_match("a:a : bbb", re));
    CHECK(!boost::regex_match("aaa : b:b", re));

    boost::smatch what;
    CHECK(boost::regex_match(str, what, re, boost::match_extra));
    CHECK_EQUAL(3, what.size());
    CHECK_EQUAL(str, what[0]);
    CHECK_EQUAL("a", what[1]);
    CHECK_EQUAL("b", what[2]);
} 
```

我不确定我会在这种情况下推荐正则表达式。我认为您会发现一次读取一行，拆分`:`，然后修剪空间更易于管理。

我想如果您不能将下面的行作为哨兵，那将更加困难。通常我希望这样的格式在该行中是显而易见的，而不是标题每一行的格式。

```
HOW TO INTERPRET THE FOLLOWING SECTION OF ROWS 
```

# python - 在 pymongo 中动态构建查询

> ID：11269680
> 
> 赞同：0
> 
> 时间：2012-06-29T22:22:02.813
> 
> 标签：python, mongodb, pymongo

我有一个网页，用户可以在其中在地图上查看来自 MongoDB 的数据。我想要几个复选框、单选按钮等来过滤地图上看到的内容。如果我使用 MySQL，我会这样做

```
query = "SELECT * FROM table WHERE x = 1" 
if checkbox == "checked":
  query += "AND WHERE y = 2" 
```

如何用 pymongo 复制它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T22:26:21.480

您只需构建查询字典：

```
query = {'x': 1}
if checkbox == 'checked':
    query['y'] = 2

results = db.collection.find(query) 
```

进行`OR`查询将如下所示：

```
query = [{'x': 1}]
if checkbox == 'checked':
    query.append({'y': 2})

results = db.collection.find({'$or': query}) 
```

# java - 按下某些其他键时 KeyEvent 未触发

> ID：11269681
> 
> 赞同：2
> 
> 时间：2012-06-29T22:22:03.460
> 
> 标签：java, swing, awt, keylistener, keyevent

我在 Java 中遇到了更多关键问题。Key 事件本身就可以正常工作，`SPACE`并且当按下其他键时......

但是，如果我同时按下`UP`键和`LEFT`键，则`SPACE`事件不会触发。但是，`SPACE`当单独按下或按下或与其他键一起按下时，它会`LEFT`触发`UP`。

这是我的代码：

```
public void keyPressed(KeyEvent e) 
{
    if(e.getKeyCode() == KeyEvent.VK_UP)
    {
        upkeyisdown = true;         
    }
    if(e.getKeyCode() == KeyEvent.VK_DOWN)
    {
        downkeyisdown = true;
    }
    if(e.getKeyCode() == KeyEvent.VK_LEFT)
    {
        leftkeyisdown = true;
    }
    if(e.getKeyCode() == KeyEvent.VK_RIGHT)
    {
        rightkeyisdown = true;
    }
    if(e.getKeyCode() == KeyEvent.VK_SPACE)
    {
        spacekeyisdown = true;
    }

}  
public void keyReleased(KeyEvent e) 
{
    if(e.getKeyCode() == KeyEvent.VK_UP)
    {
        upkeyisdown = false;            
    }

    if(e.getKeyCode() == KeyEvent.VK_DOWN)
    {
        downkeyisdown = false;
    }
    if(e.getKeyCode() == KeyEvent.VK_LEFT)
    {
        leftkeyisdown = false;
    }
    if(e.getKeyCode() == KeyEvent.VK_RIGHT)
    {
        rightkeyisdown = false;
    }
    if(e.getKeyCode() == KeyEvent.VK_SPACE)
    {
        spacekeyisdown = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T02:01:05.533

如 中所述[`KeyEvent`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html)，不支持多个同时`KEY_PRESSED`或`KEY_RELEASED`事件。这同样适用于[`KeyStroke`](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html)。您*可以*绑定到包含修饰符的实例，如此[处](https://stackoverflow.com/a/5129757/230513)`KeyStroke`所示。修饰符可以包括“alt、shift、control、meta、altGraph 或其组合”。

附录：“如果我同时按下`UP`键和`LEFT`键，`SPACE`事件不会触发。”

使用`KeyEventDemo`来自[*How to Write a Key Listener*](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)，我看到了预期`KEY_PRESSED`和`KEY_RELEASED`事件。顺序会有所不同，因为事件实际上不能“同时”发生，尽管`KEY_PRESSED`可靠地发生在`KEY_RELEASED`. 我怀疑您的代码中其他地方存在逻辑错误。管理复杂性的一种方法是

*   使用 an`enum`来持有`keyCode`s；该[游戏](http://robotchase.sourceforge.net/)使用单次击键，但它说明了如何在这种情况下使用 an `enum`。

*   使用`EnumSet`s 包含可识别的组合；[这里](https://stackoverflow.com/a/6559541/230513)有一个相关的例子。

# javascript - 使用jQuery改变背景图片

> ID：11269684
> 
> 赞同：0
> 
> 时间：2012-06-29T22:22:14.697
> 
> 标签：javascript, jquery

我正在尝试在单击链接时更改链接的背景图像。我不断收到您不能在 null 上调用“click”的错误。

JQuery（在标题中）

```
<script type="text/javascript">
    $('a.upvote-arrow').click(function(){
        $('#tempid1').css('background-image','url(../images/icons/up-arrow2.png)');
    });
</script> 
```

HTML

```
<div class="top-comment-vote">
    <a href="#" class="upvote-arrow" title="Up vote" id="tempid1"></a>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:25:18.657

尝试添加`$(document).ready`：

```
<script type="text/javascript">
$(document).ready(function(){
    $('a.upvote-arrow').click(function(){
        $(this).css('background-image','url(../images/icons/up-arrow2.png)');
    });
})
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:26:57.777

你确定这个脚本是在 html 进入 DOM 之后加载的吗？

尝试将您编写的内容包装在 onload 闭包中。

```
$(function() {
 $('a.upvote-arrow').click(function(){
   $('#tempid1').css('background-image','url(../images/icons/up-arrow2.png)');
 });
}); 
```

您可以做的另一件事是利用委托进行事件注册。

```
$('body').on("click", ".a.upvote-arrow", function(){
 $('#tempid1').css('background-image','url(../images/icons/up-arrow2.png)');
}); 
```

这会将其绑定到身体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T22:25:36.987

尝试用 document.ready 包装你的脚本；我怀疑您的脚本可能在整个页面加载之前正在运行。

# java - Tomcat 可能发送我无法处理的 GET 请求

> ID：11269687
> 
> 赞同：0
> 
> 时间：2012-06-29T22:22:49.130
> 
> 标签：java, tomcat

我的客户端在 Tomcat 服务器上运行，我无权访问客户端代码。所以我必须建立这个服务器来处理来自客户端的请求。为此，我正在端口上读取字节流，如下所示：

```
ServerSocket ss = new ServerSocket(8999);
Socket s = ss.accept();
InputStreamReader in = new InputStreamReader(s.getInputStream());

cbuf = new char[buf_length];
int char_read = in.read(cbuf,0,10000);

inputLine = new String(cbuf); 
```

我应该从客户端获取 SOAP POST 请求，并且我能够处理这些请求，但是在这些客户端请求之间，我收到了一个如下所示的 GET 请求：

```
GET / HTTP/1.1
User-Agent: Java/1.6.0_21
Host: localhost:8999
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive 
```

所以用户代理不是客户端（它可能是 Tomcat），它接受一切。所以我的服务器代码无法处理这个。所以我尝试关闭套接字，重新打开并尝试读取，但它再次读取相同的 GET 请求。

我是否需要为此请求发送特定响应以继续我的程序，以便客户端能够向我发送下一个请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:08:54.190

如果您的真正意思是问题在于您无法使用`Accept`标头中列出的任何类型进行响应，那么正确的 HTTP 响应代码是 406。您使用此状态代码构造一个 HTTP 响应，发送它，然后关闭。

但是，你的意思是你不能处理它？因为请求说它会接受任何东西！

至于客户端将如何响应 406，这取决于客户端。如果它想重试，它将重试，尽管它不应该响应具有相同`Accept`标头的 406。

你甚至不清楚是什么向你发出请求（它不是 Tomcat）——这肯定是你的大部分问题，对吧？弄清楚。然后你可以弄清楚你应该做什么。

# jquery - 我想用标签显示/隐藏内容并同时更改全屏背景。这甚至可能吗？

> ID：11269690
> 
> 赞同：0
> 
> 时间：2012-06-29T22:23:08.207
> 
> 标签：jquery, background

我正在与一个客户合作，该客户想要一个具有全屏背景的网站，当单击显示/隐藏选项卡时，该背景会发生变化。

我认为自己很擅长适应 jquery，但我很难过。我真的没有任何代码要显示，但如果有人至少能指出我正确的方向，我可能会弄清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:28:32.153

试试这个：http: [//jsfiddle.net/HzWRT/](http://jsfiddle.net/HzWRT/)

# iphone - UIWebView ScalePagesToFit 在某些页面上？

> ID：11269693
> 
> 赞同：0
> 
> 时间：2012-06-29T22:23:25.783
> 
> 标签：iphone, uiwebview, scale

我正在开发一个博客应用程序，我在其中解析 XML，并从 XML 加载全文，并在 UIWebView 上使用 loadHTML 方法进行显示。为了让它正确显示，我必须将比例页面设置为 NO。但是，有些博客在故事中有链接，当点击这些链接时，一些页面需要缩放。你建议我怎么做才能让它正确显示所有页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:48:53.287

我认为您最好使用@protocol UIWebViewDelegate 并实现@optional webViewDidFinishLoad: 。

您可以将存在的 UIWebView* 属性与某个已知数量进行比较，以了解您是否回到了原始博客页面（或跟踪离开博客的堆栈）。

在决定是否为该特定页面设置 scalePagesToFit 时，您可能可以检查 scrollView @property 的帧大小。

其中一些您将不得不实时计算并根据您认为合适的方式进行调整。

# ruby-on-rails - 没有控制器名称的 Rails 3 URL

> ID：11269697
> 
> 赞同：6
> 
> 时间：2012-06-29T22:23:57.940
> 
> 标签：ruby-on-rails, routes, urlhelper

假设我想在我的网站上有一个包含 Rails 3 的博客，这将是我唯一拥有的东西。我想使用 Rails 来实现它，但我不喜欢 Rails 生成的 URL。我想要这样的网址：

`example.com/2012/05/10/foo`

我不想要我知道该怎么做的事情（使用 to_param）：

`example.com/entries/2012/05/10/foo`

我仍然想使用像这样的助手

```
new_entry_path(@entry) # -> example.com/new
entry_path(@entry) # -> example.com/2012/05/10/foo
edit_entry_path(@entry) # -> example.com/2012/05/10/foo/edit
destroy_entry_path(@entry)
form_for(@entry)
link_to(@entry.title, @entry) 
```

等等。然后我会发表评论并希望它们也可以作为自己的资源访问，例如

`example.com/2012/05/10/foo/comments/5`

并且这些网址也应该可以通过普通助手获得：

```
edit_entry_comment_path(@entry, @comment) # -> example.com/2012/05/10/foo/comments/5/edit 
```

或类似的东西。

那么是否有可能在没有控制器名称的情况下获取 URL 并仍然使用 url 辅助方法？只需覆盖 to_param 将始终只更改 url 中控制器名称之后的部分。获得一些示例代码真的很有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T22:44:12.013

你`routes.rb`可能有这样一行：

```
resources :entries 
```

它产生形式的路线`/entries/2012/05/10/foo`。

* * *

存在一个`:path`参数，允许您使用除默认名称之外的其他内容`entries`。例如：

```
resources :entries, :path => 'my-cool-path' 
```

将产生形式的路线`/my-cool-path/2012/05/10/foo`。

* * *

但是，如果我们**将一个空字符串传递给`:path`**，我们会看到您正在寻找的行为：

```
resources :entries, :path => '' 
```

将产生形式的路线`/2012/05/10/foo`。

# php - 类外的PHPUnit测试函数

> ID：11269707
> 
> 赞同：10
> 
> 时间：2012-06-29T22:25:30.793
> 
> 标签：php, unit-testing, phpunit

我对 PHPUnit 和单元测试很陌生，所以我有一个问题：我可以在一个类之外测试一个函数，比如：

```
 function odd_or_even( $num ) {
    return $num%2; // Returns 0 for odd and 1 for even
}

class test extends PHPUnit_Framework_TestCase {
    public function odd_or_even_to_true() {
        $this->assetTrue( odd_or_even( 4 ) == true );
    }
} 
```

现在它只是返回：

```
No tests found in class "test". 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T22:28:31.157

您需要在函数名称前加上“test”，以便将它们识别为测试。

[从文档中：](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html)

> 3.  测试是名为 test* 的公共方法。
> 
> 或者，您可以在方法的文档块中使用 @test 注释将其标记为测试方法。

调用应该没有问题`odd_or_even()`。

例如：

```
class test extends PHPUnit_Framework_TestCase {
    public function test_odd_or_even_to_true() {
        $this->assertTrue( odd_or_even( 4 ) == true );
    }
} 
```

# matlab - MATLAB 的“SIGMA must be symmetric and positive definite”错误有时没有意义

> ID：11269715
> 
> 赞同：3
> 
> 时间：2012-06-29T22:25:44.347
> 
> 标签：matlab, probability, numerical

我不确定这是否是编程或统计问题，但我 %99 确定应该存在数字问题。所以也许可以提出一个程序化的解决方案。

我正在使用 MATLAB 的 mvnpdf 函数来计算一些观测值的多元高斯 PDF。我经常收到“SIGMA 必须是对称且正定的”错误。

但是，我从数据中获取协方差矩阵，所以数据*应该*是合法的。重新生成问题的代码是：

```
err_cnt = 0;
for i = 1:1000
    try 
        a = rand(3); 
        c = cov(a); 
        m = mean(a); 
        mvnpdf(a, m, c);
    catch me
        err_cnt = err_cnt + 1;
    end
end 
```

每次运行时，我都会收到约 500-600 个错误。

PS我的情况下不生成随机数据，只是在这里生成演示一下。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T03:29:18.140

这是一个线性代数问题，而不是一个编程问题。回忆一下 k 维多元正态分布的 PDF 公式：

![在此处输入图像描述](../Images/9ea2aac9bfb7eb91d2a843b151679d51.png)

当您的矩阵不是严格正定的（即，它是奇异的）时，分母中的行列式为零并且指数中的倒数未定义，这就是您得到错误的原因。

然而，一个常见的误解是协方差矩阵必须是正定的。这不是真的——协方差矩阵只需要是*半正定*的。您的数据完全有可能具有奇异的协方差矩阵。此外，由于您正在形成的是观察数据的*样本协方差矩阵*，因此您可能会因没有足够的观察结果而产生奇点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T02:06:59.787

如果协方差矩阵的对角线值（非常接近）零，就会发生这种情况。一个简单的解决方法是将一个非常小的常数添加到`c`.

```
err_cnt = 0;
for i = 1:1000
    try 
        a = rand(3); 
        c = cov(a) + .0001 * eye(3); 
        m = mean(a); 
        mvnpdf(a, m, c);
    catch me
        err_cnt = err_cnt + 1;
    end
end 
```

结果为 0 个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T17:06:14.780

当您的数据位于子空间（奇异协方差矩阵）中时，概率密度在整个空间中是奇异的。粗略地说，这意味着你的密度在每个点上都是无限的，这不是很有用。因此，如果是这种情况，并且它不是数字，那么您可能需要考虑数据跨越的子空间中的概率密度。这里的密度是很好定义的。在这种情况下，将对角线值添加为 @Junuxx 会产生非常不同的值。

# ios - 无法在 cellForRowAtIndexPath 中设置单元格 alpha

> ID：11269718
> 
> 赞同：3
> 
> 时间：2012-06-29T22:25:48.917
> 
> 标签：ios, xcode, uitableview

在我的代码的一部分中，我调用

```
UITableViewCell *cell = (UITableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath]; 
```

得到一些单元格，然后我将它们的 alphas 更改为 0.35。这行得通，细胞看起来褪色了。

但是，当我滚动 tableview 时，移出窗口然后移回的单元格不再褪色。即使在 cellForRowAtIndexPath 中，每个禁用行的 alpha 设置为 0.35，也会发生这种情况。

在返回 cellForRowAtIndexPath 中的单元格之前，我记录了

```
NSLog(@"%f", cell.alpha); 
```

它返回 .35

但是，滚动后单元格不褪色？看起来好像它的 alpha 在显示之前神奇地变回了 1。

以下是我在 Section 类中实现 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell;

if ([self disabled]) 
{
    cell = [SectionedTableViewController tableView:tableView dequeueReusableCellWithIdentifier:@"CellDisabled" style:UITableViewCellStyleDefault];
    cell.alpha = .35;
}
else
{
    cell = [SectionedTableViewController tableView:tableView dequeueReusableCellWithIdentifier:@"CellEnabled" style:UITableViewCellStyleDefault];
    cell.alpha = 1;
}

cell.selectionStyle = UITableViewCellSelectionStyleNone;

//if-else block that only sets labels is here omitted

if (cell.textLabel.text == [[cs objectAtIndex:[self c]] type])
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}

NSLog(@"%f", cell.alpha);

return cell; 
```

}

协调这些部分的视图控制器从它们那里获取单元格，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Alpha: %f", [[[self sections] objectAtIndex:indexPath.section] tableView:tableView cellForRowAtIndexPath:indexPath].alpha);
    return [[[self sections] objectAtIndex:indexPath.section] tableView:tableView cellForRowAtIndexPath:indexPath];
} 
```

（并且 NSLog 正在记录适当的 alpha 值）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T10:05:24.537

将所有子视图添加到单元格的 contentView 并在中使用以下字符串`-cellForRowAtIndexPath`：

`cell.contentView.alpha = {needed_value};`

会为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T22:37:12.193

此问题可能是由于在表格视图中重用了单元格。有一个更好的方法可以做到这一点：

您应该在视图控制器中创建一个 NSMutableDictionary 并为应该褪色的索引设置键。

然后，在 cellForRowAtIndexPath 中，当您设置单元格时，根据索引是否作为字典中的键存在来设置 alpha。

此解决方案将在没有任何奇怪行为的情况下工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T11:00:04.883

确保您也设置了 alpha 值`cell.contentView`。还要设置 alpha，`tableView:willDisplayCell:forRowAtIndexPath:`因为它在 iOS 7 中可能不起作用

# c# - 如何使 Windows 窗体的关闭按钮不关闭窗体但使其不可见？

> ID：11269723
> 
> 赞同：3
> 
> 时间：2012-06-29T22:26:28.917
> 
> 标签：c#, .net, winforms, button

此表单有一个 NotifyIcon 对象。当用户单击关闭按钮时，我希望表单不关闭而是不可见。然后，如果用户想再次查看表单，他可以双击系统托盘中的图标。如果用户想关闭表单，他可以右键单击图标并选择“关闭”。

有人能告诉我如何使关闭按钮不关闭表单而是使其不可见吗？

（或者如果有人可以想出更好的方法来通过各种方式实现相同的目标）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T22:31:06.350

首先，您要处理主窗体的[`.FormClosing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)事件（或通过覆盖[OnFormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onformclosing.aspx)方法）。[`e.Cancel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.aspx)通过设置为 true 来取消它。

然后，您使用 a[`NotifyIcon`](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx)将图标添加到系统托盘。

最后，通过调用隐藏表单[`.Hide()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.hide.aspx)。

```
protected override void OnFormClosing(FormClosingEventArgs e) {
    if (IActuallyWantToCloseFlag)
        return;

    var ni = new NotifyIcon(this.components)
    {
        Icon = someIcon,
        Text = "My text",
        Visible = true
    };
    ni.DoubleClick += (sender, args) => { this.Show(); };

    this.Hide();
    e.Cancel = true;
} 
```

这应该让你开始。您可能想要创建`ni`一个成员变量，以便您可以在显示/隐藏表单时继续隐藏/显示图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T22:31:13.933

您可以尝试将其设为托盘图标应用程序。这里有一个很好的教程：http: [//www.developer.com/net/net/article.php/3336751/C-Tip-Placing-Your-C-Application-in-the-System-Tray.htm](http://www.developer.com/net/net/article.php/3336751/C-Tip-Placing-Your-C-Application-in-the-System-Tray.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T22:30:11.280

实现您想要的最简单的方法是订阅 FormClosing 事件并设置 visible false，通过包含这种代码：

```
FormClosing += (sender, args) => { args.Cancel = true; Visible = false; }; 
```

# ruby-on-rails - 如何在 rspec 中使用 capybara 点击下拉选项

> ID：11269724
> 
> 赞同：22
> 
> 时间：2012-06-29T22:26:41.760
> 
> 标签：ruby-on-rails, testing, rspec, capybara, logout

我正在使用 ruby​​ on rails 3.2.3 和 capybara 来帮助创建请求规范。我的目标是创建一个测试注销的规范请求。网页：

```
<li class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown">
    Welcome <%= current_user.first_name + " "+ current_user.last_name%>
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <a href="#">
      <%= link_to "Sign out", destroy_user_session_path, :method => :delete%>
    </a>
  </ul>
</li> 
```

对于测试，我有

```
describe "sign out" do
  it "should let user to sign out" do
    login_as user, :scope => :user
    # click_on "Welcome #{user.first_name} #{user.last_name}"
    # Now click on Sign out
  end
end 
```

我不知道如何单击使用水豚注销，因为它位于下拉菜单中，因此在页面上不可见。有人知道吗 ？

有没有其他方法可以点击下拉菜单中的元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T02:50:24.300

我已经通过单击两个链接测试了一个下拉列表

```
click_link "Welcome #{current_user.first_name} #{current_user.last_name}"
click_link 'sub link' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T01:20:32.093

你好，我最终想通了。我不得不用它`xpath`来找到链接。基于`html`上述，这是我所做的：

在 rspec 中，我写道：

```
page.find(:xpath, "//a[@href='/users/sign_out']").click 
```

我使用 "//a[@href='/users/sign_out']" 的原因是因为它`link_to "Sign out", destroy_user_session_path, :method => :delete`被编译到`<a href="/users/sign_out" ...`网页上。

它有效:-)

哦，顺便说一句，我发现了这个有用的链接：[http ://www.suffix.be/blog/click_image_in_link_capybara](http://www.suffix.be/blog/click_image_in_link_capybara)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T19:05:27.083

一个更简单的解决方案就是：

select("你想从菜单中选择的选项", :from => "label name")

注意：“标签名称”是`<label>`. 但是，您也可以使用`<select>`此处的“id”或“name”属性，我认为这更好，因为您可以在某些时候更改标签文本，如果您这样做，您的测试仍然会通过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-19T18:29:04.927

我的例子

```
find("ol.nya-bs-select.btn-default.form-control[ng-model='scope.values.countries']")
    .find_button("Nothing selected").click 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-11T19:15:06.033

我遇到了类似的问题，但我的下拉列表没有任何文字，只有图标：

```
%li#user-menu.dropdown
  %a.dropdown-toggle{ href: "#", data: { toggle: "dropdown" }, role: "button", aria: { haspopup: "true", expanded: "false" } }
    %i.fa.fa-user
    %span.caret
  %ul.dropdown-menu
    %li.logout-text= link_to "Log Out", destroy_user_session_path, :method => :delete 
```

在我的规范中，我使用了：

```
def when_I_sign_out
  find('#user-menu').click
  click_on 'Log Out'
end 
```

# windows - 具有同步浏览功能的文件管理器

> ID：11269725
> 
> 赞同：2
> 
> 时间：2012-06-29T22:26:43.397
> 
> 标签：windows

我正在寻找支持以下功能的 Windows 文件管理器：

1.  双窗格视图中的同步浏览
2.  TortoiseSVN 图标覆盖
3.  能够在 Beyond Compare 等外部工具中快速启动文件夹比较
4.  支持标签式浏览
5.  支持保存浏览会话

该工具不一定必须支持上面列出的所有功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:03:38.513

我发现 Windows Double Explorer 非常有用。

它支持以下功能：

1.  TortoiseSVN 图标覆盖
2.  支持标签式浏览
3.  支持保存浏览会话

感谢卢克的推荐！

# javascript - mp4 视频的隐藏式字幕

> ID：11269726
> 
> 赞同：1
> 
> 时间：2012-06-29T22:26:54.647
> 
> 标签：javascript, html, css

我无法使用隐藏式字幕来处理我的视频，我很确定我有很多让它工作所需的代码，我只是不确定我可能会丢失什么。我还在正文中收到一条消息，其中显示 data-begin 和 data-end 带有绿色下划线，并且它说 Attribute data-begin 不是元素跨度的有效属性，我不确定那是不是问题，我可能需要使用另一个标签，这仍然可以让它工作。我对html很陌生。这是我所有的代码

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link type="text/css" href="skin/jplayer.blue.monday.css" rel="stylesheet" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>

    <script type="text/javascript" src="javascripts/jquery.jplayer.min.js"></script>
   <script type="text/javascript">
       $(document).ready(function () {
           $("#jquery_jplayer_1").jPlayer({
               ready: function () {
                   $(this).jPlayer("setMedia", {
                       m4v: "videos/sequence01mp4video.mp4",
                       poster: "http://www.jplayer.org/video/poster/Big_Buck_Bunny_Trailer_480x270.png"
                   });
               },
               swfPath: "/javascripts",
              supplied: "m4v"
           });
       });
       (function (_global) {
           var captions = [];
           var video;
           var output;
           var caplen;

           window.addEventListener('load', function () {
               output = document.createElement('div'); // JS is enabled, so insert a div to put the captions into
               output.id = 'caption'; // it has an id of caption
               video = document.querySelector('video'); // and it's after the first video element
               video.parentNode.insertBefore(output, video.nextSibling);
               getCaptions();
               video.addEventListener('timeupdate', timeupdate, false);
           }, false);

           // function to populate the 'captions' array
           function getCaptions() {
               captions = []; // empty the captions array
               var nodes = document.querySelectorAll('#transcript span');
               var node = "";
               var caption = "";
               for (var i = 0, node; node = nodes[i]; i++) {
                   caption = {
                       'start': parseFloat(node.getAttribute('data-begin')), // get start time
                       'end': parseFloat(node.getAttribute('data-end')), // get end time
                       'text': node.textContent
                   };
                   captions.push(caption); // and all the captions into an array
               }
               caplen = captions.length;
           }

           function timeupdate() {
               var now = video.currentTime; // how soon is now?
               var text = "", cap = "";
               for (var i = 0; i < caplen; i++) {
                   cap = captions[i];
                   if (now >= cap.start && now <= cap.end) { // is now within the times specified for this caption?
                       text = cap.text; // yes? then load it into a variable called text
                       break;
                   }
               }
               output.innerHTML = text; // and put contents of text into caption div
           }

           // hide transcript div when scripting is enabled
           document.write('<style>#transcript{display:none}</style>');
       })(this);

   </script>

</head>
<body>
  <div id="jp_container_1" class="jp-video ">
    <div class="jp-type-single">
      <div id="jquery_jplayer_1" class="jp-jplayer"></div>
      <div class="jp-gui">
        <div class="jp-video-play">
          <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
        </div>
          <div id="transcript">
         <span data-begin="0:00:00.380" data-end="0:00:03.670">hello, my name is rob carson environmental engineer with the</span>
         <span data-begin="0:00:03.670" data-end="0:00:06.880">hello, my name is rob carson environmental engineer with the.</span>
           </div>
        <div class="jp-interface">
          <div class="jp-progress">
            <div class="jp-seek-bar">
              <div class="jp-play-bar"></div>
            </div>
          </div>
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <div class="jp-controls-holder">
            <ul class="jp-controls">
              <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
              <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
              <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
              <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
              <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
              <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
            </ul>
            <div class="jp-volume-bar">
              <div class="jp-volume-bar-value"></div>
            </div>
            <ul class="jp-toggles">
              <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
              <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
              <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
              <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
            </ul>
          </div>
          <div class="jp-title">
            <ul>
              <li>Big Buck Bunny Trailer</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="jp-no-solution">
        <span>Update Required</span>
        To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
      </div>
    </div>
  </div>
</body>
</html> 
```

# wordpress - 如何使用“待处理”帖子进行分页

> ID：11269730
> 
> 赞同：1
> 
> 时间：2012-06-29T22:27:36.790
> 
> 标签：wordpress, pagination, archive, categories, posts

我正在开发一个网站，该网站允许用户浏览前端的待处理帖子/内容。

但是，我似乎无法使用这些帖子进行分页。我有一个自定义查询，它会在类别页面、存档等上显示待处理帖子的第一页。

但是第 2、3 页等不起作用。

有什么想法吗？

谢谢！

这是我正在使用的示例代码：

```
$args = array(
    'cat'      => $cat_ID,
    'paged' => get_query_var('paged'),
    'showposts' => 50,
    'posts_per_page' => 50,
    'post_status' => 'pending',

);

query_posts($args);

if( have_posts() ) : while (have_posts()) : the_post();

//Post code inserted here

<?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:00:15.167

如果主查询中没有足够的结果运行到该页面，WordPress 分页将 404。

我确信有更好的方法，但我能想到的唯一方法是在存档/搜索页面中使用您的自定义循环，该页面的帖子比草稿多。

例如，将您的自定义循环添加到 search.php 模板并通过传递将生成大量结果的搜索查询（例如“a”）来访问它。使用 search.php 将在结果中包含页面、帖子和自定义帖子类型，因此会产生更多结果。

使用 paginate_links 进行分页，它将继续在每个页面上传递 queryvar，之后你应该会很好。

另外，我建议使用 WP_Query 而不是 query_posts。[请参阅此处了解原因](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts)。

# eclipse - 如果未安装插件，如何在 Eclipse 中断开旧团队提供程序

> ID：11269731
> 
> 赞同：1
> 
> 时间：2012-06-29T22:27:44.043
> 
> 标签：eclipse, svn, version-control, mercurial

我最近切换到 Eclipse Indigo（来自 Galileo），并且我还从带有 subclipse 的 SVN 切换到 Mercurial（带有 MercurialEclipse）以进行版本控制。在不受 SVN 控制的新项目或现有项目上，我可以右键单击并使用 Team->Share 进行设置。在工作区中位于 SVN 下的现有项目上，团队上下文菜单将应用补丁...作为唯一选项。我似乎无法找到断开 SVN 作为团队提供者的方法。我希望避免将 subclipse 重新安装到 Indigo 中，以便能够与它断开连接。

# java - 线程的多线程访问和变量缓存

> ID：11269732
> 
> 赞同：6
> 
> 时间：2012-06-29T22:27:56.007
> 
> 标签：java, android, multithreading, volatile

如果我阅读有关多线程的完整章节/书籍，我可以找到答案，但我想要一个更快的答案。（我知道[这个](https://stackoverflow.com/questions/1461533/is-it-safe-to-access-this-variable-from-multiple-threads)stackoverflow 问题很相似，但还不够。）

假设有这个类：

```
public class TestClass {
   private int someValue;

   public int getSomeValue() { return someValue; }
   public void setSomeValue(int value) {  someValue = value; }
} 
```

有两个线程（A 和 B）访问这个类的实例。考虑以下顺序：

1.  答：getSomeValue()
2.  B：setSomeValue()
3.  答：getSomeValue()

如果我是对的， someValue 必须是易失的，否则第三步可能不会返回最新值（因为 A 可能有缓存值）。它是否正确？

第二种情况：

1.  B：setSomeValue()
2.  答：getSomeValue()

在这种情况下，A 总是会得到正确的值，因为这是它的第一次访问，所以他还没有缓存值。这是正确的吗？

**如果仅以**第二种方式访问​​一个类，则不需要 volatile/synchronization，或者是吗？

**请注意，此示例**已简化，实际上我想知道复杂类中的特定成员变量和方法，而不是整个类（即哪些变量应该是可变的或具有同步访问权限）。要点是：如果更多线程访问某些数据，是否需要同步访问，还是取决于它们访问它的方式（例如顺序）？

* * *

阅读评论后，我尝试用另一个例子来说明我的困惑的根源：

1.  从 UI 线程：`threadA.start()`
2.  threadA 调用`getSomeValue()`，并通知 UI 线程
3.  UI 线程获取消息（在其消息队列中），因此它调用：`threadB.start()`
4.  threadB 调用`setSomeValue()`，并通知 UI 线程
5.  UI 线程获取消息，并通知线程A（以某种方式，例如消息队列）
6.  线程A调用`getSomeValue()`

这是一个完全同步的结构，但为什么这意味着 threadA 将在第 6 步中获得最新的值？（如果`someValue`不是易失性的，或者从任何地方访问时都没有放入监视器）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:35:48.290

如果两个线程调用相同的方法，则无法保证调用所述方法的顺序。因此，取决于调用顺序的原始前提是无效的。

这与调用方法的*顺序*无关；这是关于同步的。这是关于使用某种机制使一个线程等待而另一个*完全完成其写操作。* 一旦决定拥有多个线程，*就必须* 提供同步机制以避免数据损坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:06:22.847

众所周知，我们需要保护的是数据的关键状态，而支配数据关键状态的原子语句必须是同步的。

我有这个例子，其中使用了 volatile，然后我使用了 2 个线程，这些线程用于每次将计数器的值增加 1 直到 10000。所以它必须总共是 20000。但令我惊讶的是它并没有总是发生。

然后我使用**同步关键字使其工作。**

**同步**确保当线程访问同步方法时，**不允许其他线程访问该对象或该对象的任何其他同步方法，**确保不会发生数据损坏。

**线程安全类意味着它将在存在下划线运行时环境的调度和交错的情况下保持其正确性，而无需访问该类的客户端的任何线程安全机制。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T03:41:51.163

让我们看看[这本书。](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.3.1.4)

> 一个字段可能被声明为 volatile，在这种情况下，Java 内存模型（第 17 节）确保所有线程都能看到变量的一致值。

所以`volatile`保证声明的变量不会被复制到线程本地存储中，否则这是允许的。进一步解释说，这是对非常简单的共享存储同步访问的锁定替代方案。

另请参阅[这篇较早的文章，](https://stackoverflow.com/questions/1006655/are-java-primitive-ints-atomic-by-design-or-by-accident)该文章解释了`int`访问必须是原子的（但不是`double`or `long`）。

这些一起意味着如果您的`int`字段被声明`volatile`，则不需要锁来保证原子性：您将始终看到最后写入内存位置的值，而不是由于半完成写入而导致的混淆值（就像使用 double或长）。

但是，您似乎暗示您的 getter 和 setter 本身是原子的。这不能保证。JVM 可以在调用或返回序列的中间点中断执行。在此示例中，这没有任何后果。但是如果电话有副作用，例如`setSomeValue(++val)`，那么你会有不同的故事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T23:06:37.293

问题是java只是一个规范。有很多 JVM 实现和物理操作环境的例子。在任何给定的组合上，一个动作可能是安全的或不安全的。例如，在单处理器系统上，您示例中的 volatile 关键字可能完全没有必要。由于内存和语言规范的编写者无法合理地考虑可能的操作条件集，他们选择将某些模式列入白名单，这些模式保证适用于所有兼容的实现。遵守这些准则可确保您的代码在您的目标系统上运行，并确保它具有合理的可移植性。

在这种情况下，“缓存”通常是指在硬件级别进行的活动。在 java 中发生的某些事件会导致多处理器系统上的内核“同步”它们的缓存。访问 volatile 变量就是一个例子，同步块是另一个例子。想象一个场景，这两个线程 X 和 Y 被安排在不同的处理器上运行。

```
X starts and is scheduled on proc 1
y starts and is scheduled on proc 2

.. now you have two threads executing simultaneously
to speed things up the processors check local caches
before going to main memory because its expensive.

x calls setSomeValue('x-value') //assuming proc 1's cache is empty the cache is set
                                //this value is dropped on the bus to be flushed
                                //to main memory
                                //now all get's will retrieve from cache instead
                                //of engaging the memory bus to go to main memory 
y calls setSomeValue('y-value') //same thing happens for proc 2

//Now in this situation depending on to order in which things are scheduled and
//what thread you are calling from calls to getSomeValue() may return 'x-value' or
//'y-value. The results are completely unpredictable. 
```

关键是`volatile`（在兼容的实现上）确保有序写入将始终刷新到主内存，并且在下一次访问之前，其他处理器的缓存将被标记为“脏”，无论从哪个线程进行访问。

免责声明：易失性不会锁定。这一点很重要，尤其是在以下情况下：

```
volatile int counter;

public incrementSomeValue(){
    counter++; // Bad thread juju - this is at least three instructions 
               // read - increment - write             
               // there is no guarantee that this operation is atomic
} 
```

`setSomeValue`如果您的意图是必须始终在之前调用，这可能与您的问题有关`getSomeValue`

如果意图是`getSomeValue()`必须始终反映最近的调用，`setSomeValue()`那么这是使用`volatile`关键字的好地方。请记住，如果没有它，即使首先安排了，也无法保证`getSomeValue()`会反映最近的调用。`setSomeValue()``setSomeValue()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T04:17:42.833

> 如果我是对的， someValue 必须是易失的，否则第三步可能不会返回最新值（因为 A 可能有缓存值）。它是否正确？

如果线程 B 调用 setSomeValue()，您需要某种同步来确保线程 A 可以读取该值。`volatile`不会自行完成此操作，也不会使方法同步。执行此操作的代码最终是您添加的任何同步代码，以确保`A: getSomeValue()`在`B: setSomeValue()`. 如果按照您的建议，您使用消息队列来同步线程，则会发生这种情况，因为一旦线程 B 获得消息队列上的锁，线程 A 所做的内存更改就对线程 B 可见。

> 如果仅以第二种方式访问​​一个类，则不需要 volatile/synchronization，或者是吗？

如果您真的在进行自己的同步，那么听起来您并不关心这些类是否是线程安全的。但请确保您不会同时从多个线程访问它们；否则，任何非原子的方法（分配 int is）都可​​能导致您处于不可预测的状态。一种常见的模式是将共享状态放入不可变对象中，这样您就可以确定接收线程没有调用任何 setter。

如果您确实有一个要更新并从多个线程读取的类，我可能会先做最简单的事情，这通常是同步所有公共方法。如果您真的认为这是一个瓶颈，您可以研究 Java 中一些更复杂的锁定机制。

那么 volatile 保证什么？

对于确切的语义，您可能必须阅读教程，但总结它的一种方法是 1）最后一个线程访问 volatile 所做的任何内存更改将对访问 volatile 的当前线程可见，以及 2）访问 volatile 是原子的（它不会是部分构造的对象，也不是部分分配的 double 或 long）。

同步块具有类似的属性：1）最后一个线程访问锁所做的任何内存更改对该线程都是可见的，并且 2）块内所做的更改相对于其他同步块以原子方式执行

(1) 表示任何内存更改，而不仅仅是对 volatile 的更改（我们谈论的是 JDK 1.5 之后）或同步块内的更改。这就是人们提到排序时的意思，这是在不同的芯片架构上以不同的方式完成的，通常是通过使用内存屏障。

此外，在同步块的情况下，(2) 仅保证如果您在同一个锁上同步的另一个块中，您不会看到不一致的值。同步对共享变量的所有访问通常是个好主意，除非您真的知道自己在做什么。

# html - :nth-child() 带有定义列表的奇/偶伪类

> ID：11269738
> 
> 赞同：3
> 
> 时间：2012-06-29T22:28:30.030
> 
> 标签：html, css, css-selectors, pseudo-class

我不知道如何将奇/偶`:nth-child()`伪类应用于定义列表

```
<dl>
    <dt>green foo</dt>
    <dd>green bar</dd>
    <dt>red foo</dt>
    <dd>red bar</dd>
    <dt>green foo</dt>
    <dd>green bar</dd>
</dl>

<style>
dl { color: blue }
dd:nth-child(odd) { color:green }
dd:nth-child(even) { color:red }​
</style> 
```

[http://jsfiddle.net/8Ge5h/2/](http://jsfiddle.net/8Ge5h/2/)

新小提琴：

[http://jsfiddle.net/8Ge5h/7/](http://jsfiddle.net/8Ge5h/7/)

使用正确的 :nth-of-type 伪类。

```
dd:nth-of-type(even) {color: red;}
dt:nth-of-type(even) {color: red;}
dd:nth-of-type(odd) {color: green;}
dt:nth-of-type(odd) {color: green;} 
```

​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T22:30:57.363

在 HTML 中，`dt`和`dd`是彼此的兄弟，在同一个 parent 下`dl`。因此，如果您在单个`dt`和之间交替，那么您的所有元素都将是，而您的所有元素都将是.`dd``dl``dt``:nth-child(odd)``dd``:nth-child(even)`

您可能正在寻找`:nth-of-type()`，这将帮助您只检查`dt`or`dd`类型，不像`:nth-child()`它不关心它是什么类型的元素，只关心它相对于父元素的位置。

如果你想让每一个奇数的`dd`绿色和每一个偶数`dd`的红色：

```
dd:nth-of-type(odd) { color:green }
dd:nth-of-type(even) { color:red }​ 
```

[更新的小提琴](http://jsfiddle.net/BoltClock/8Ge5h/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-12T11:50:16.343

请注意，从 HTML 5.2 开始，允许将“div 作为 dl 元素的子元素”。

所以像这样：

```
<dl>
  <div>
    <dt>Name</dt>
    <dd>Godzilla</dd>
  </div>
</dl> 
```

你的CSS可能是这样的：

```
dl { background-color: blue; padding: 10px }
div:nth-child(odd) { background-color:green }
div:nth-child(even) { background-color:red } 
```

# excel - 从 SSRS 2005 导出到 excel 提高了钻取级别

> ID：11269745
> 
> 赞同：1
> 
> 时间：2012-06-29T22:29:11.373
> 
> 标签：excel, reporting-services, export

我在 SSRS 报告中有三个级别的分组如下

```
+ Heading 1
- Heading 2
  + Heading 2 Group 1
  - Heading 2 Group 2
    + Heading 2 Group 2  Sub group 1
    - Heading 2 Group 2  Sub group 2
      Detail 1
      Detail 2 
```

它在 IE 报告中看起来很好，但是当我导出到 excel 时，前两个级别出现，组折叠了。在展开第二组时，所有行（子组和详细信息）都会显示而没有任何分组按钮。

任何人都可以帮助我如何在excel上获得第三级分组。

# git - GIT Rebase 一个合作的分支？

> ID：11269746
> 
> 赞同：11
> 
> 时间：2012-06-29T22:29:31.467
> 
> 标签：git, merge, rebase, remote-branch, feature-branch

读完这篇文章后，rebase 将更改从主分支收集到我的功能分支是有意义的： [Git workflow and rebase vs merge questions](https://stackoverflow.com/questions/457927/git-workflow-and-rebase-vs-merge-questions/457988#457988)

```
clone the remote repo
git checkout -b my_new_feature
..work and commit some stuff
git rebase master
..work and commit some stuff
git rebase master
..finish the feature
git checkout master
git merge my_new_feature 
```

如果功能分支位于我的机器本地并且我可以随意重写历史记录，这将非常有用。

但是，如果我在功能分支上与其他人合作怎么办。既然我们的功能分支保存在远程存储库中，我们如何从主分支获取最新更改到我们的功能分支？

所以我们合并？还是有另一种巧妙的 GIT 方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T15:36:11.740

您的情况有解决方案，无需切换到完全不同的工作流程。

正如您已经发现的那样，关于从主分支获取修复到功能分支，最好的办法是挑选那些特定的提交。但我更喜欢**为修补程序设置主题分支，**而不是在主线中修复，这样我就可以将这些修补程序正确地*合并*到它们阻止的每个功能中。

为了尽可能保持功能开发历史的简洁和线性，所有协作者都必须使用它`git pull --rebase`来获取更新，这样就不会出现无意义的合并提交。

如果您仍想在当前主要开发分支上重新设置协作功能分支（用于持续集成测试或其他目的）或以任何其他方式重写其历史记录，您可以在功能完成/完成后，就在合并到之前执行此操作主分支，但你应该在一个*新的单独的本地/私有分支*中进行。

以下是如何在 master 的新分支中重新创建您的主题更改（跳过樱桃选择）：

```
$ git checkout -b feature_final feature # jump to a new branch for grooming
$ git rebase [-i] master                # rebase topic changes onto master 
```

从那里你决定如何处理重新定位的分支 - 向上游推送 QA 或直接合并到 master（如果你想在历史中明确表示，可以使用 --no-ff ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:44:07.483

如果你一个人工作，rebase 什么都不做。您没有向 master 提交任何新内容。

您的合并将是一个快进合并，您可以通过根本不检查它来做到这一点

```
git push . HEAD:master 
```

无论您是否与某人一起工作，将 master 中的工作合并到您的功能分支中都是一种不好的做法。它被称为反向合并。它不好的原因是你现在没有一个原子的工作。master 的历史现在与你的特性纠缠在一起，使得使用这个特性，比如 rebase，在很多情况下是不可能的。

您需要考虑您的分支策略以及您想要实现的目标。这是我的：

[http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

可以看到每个分支都是从同一个地方开始的。您有一个单独的集成分支和发布候选分支来混合和匹配您想要的功能，同时不污染它们。

至于与同事合作开发一个功能，这取决于一个功能有多大（您工作的粒度）。如果它很大，您可以将上述过程应用于功能本身并改为按任务分支。

如果它是一个小功能，您可以在该分支上合并或变基 - 这并不重要。在这一点上，它归结为团队对什么感到满意。

# objective-c - 旋转和调整 CIImage

> ID：11269748
> 
> 赞同：1
> 
> 时间：2012-06-29T22:29:44.680
> 
> 标签：objective-c, ios, xcode, uiimage, core-image

我有两个 CIImages。我正在尝试将 CGAffineTransformation 应用于顶部图像，然后将其与背景图像一起传递给 CIFilter 进行混合，但我得到的图像似乎显示顶部图像在移动（我只是希望它在现场旋转）。

缩放时我也遇到了同样的问题（顶部图像的位置似乎发生了变化）。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:55:14.417

因此，经过大量挖掘，事实证明我的问题是由于旋转点造成的。这个问题/答案很有帮助。

[CG上下文旋转](https://stackoverflow.com/questions/3033685/cgcontext-rotation)

# php - PHP - exec，shell_exec，系统不工作

> ID：11269753
> 
> 赞同：1
> 
> 时间：2012-06-29T22:30:54.030
> 
> 标签：php, exec

我读了很多类似的问题，但对我没有任何帮助

我正在使用 wamp 2.2、Apache 2.0、PHP V5.3.8

safe_mode=off - 从 php.ini 中删除的 disabled_functions 我正在尝试执行

```
exec("chrome.exe google.com"); 
```

什么都没有发生，当我尝试

```
exec("calc"); 
```

尽管我将 apache 服务的用户更改为管理员并且我使用验证用户

```
exec("whoami"); 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:48:46.213

停止 Apache 作为服务运行。

当 Windows 运行服务时，它不会直接作为启动服务器或管理的用户运行，因此它很可能在服务环境中启动 chrome，因此您不会看到它加载到桌面上，有两种方法可以解决这个问题

停止 apache 服务浏览到您的 apache 目录并手动运行 httpd.exe 然后尝试您的脚本它应该可以工作，或者如果它不需要通过网络请求运行，因此它不使用浏览器中的任何内容，您可以允许它使用`c:\wamp\php\php.exe yourfile.php`（你的 php 路径应该被替换为`c:\wamp\php`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:37:39.643

CMD 和 php shell 的环境路径可能不一样。您要么必须给出文件的完整路径，要么首先给出php`export`中的路径`chrome.exe`

另外，我认为`chrome.exe`打开页面需要XServer，php不能在shell中打开图形界面。这些命令不会作为父级传递给实际的 shell，因此 php 文件无法为您“启动”应用程序。

请阅读 exec 函数的详细信息： [PHP`exec`参考](http://php.net/manual/en/function.exec.php)

还可以尝试添加`2> errors.txt`以查看程序执行中是否有错误。

--

该程序需要知道要连接到哪个 X 服务器，并且它需要具有连接到该服务器的权限。使用 DISPLAY 环境变量指定 X 服务器；如果您从 X 中的终端或 GNOME 面板或类似的东西运行 PHP 程序，这通常会自动设置；但是，如果您以其他方式运行 PHP 脚本，它可能不知道要连接到哪个 X 服务器。

X 有多种方法来指定连接到服务器的权限，但最常见的一种是在用户主目录中使用名为“.Xauthority”的文件。因为只有在 X 服务器上登录的用户才能读取这个文件，所以他们是唯一可以运行 GUI 程序的用户。因此，如果您以登录 X 服务器的同一用户身份启动 PHP 用户，那么您的权限应该没有任何问题。但是，如果 PHP 程序以不同的用户身份运行，则必须授予该用户访问 X 服务器的权限。

参考：[http](http://bytes.com/topic/php/answers/838364-cant-launch-graphical-apps-php-exec-ubuntu-8-04-system) ://bytes.com/topic/php/answers/838364-cant-launch-graphical-apps-php-exec-ubuntu-8-04-system （我知道该链接适用于 linux 并且没有与 Windows 完全相同的解决方案，但`exec()`仍需要知道要引用哪个 X 接口）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T16:16:35.283

试试 PHP 脚本？

```
<?php shell_exec('notepad.exe');?> 
```

它正在工作。

# jquery - 是否可以从jstree拖放到jqgrid？

> ID：11269758
> 
> 赞同：2
> 
> 时间：2012-06-29T22:31:29.893
> 
> 标签：jquery, jquery-plugins, jqgrid, drag-and-drop, jstree

看起来可以从jqgrid拖放到jstree。 [从 JQGrid 拖到 jsTree v.0.9.9a](https://stackoverflow.com/questions/3300258/drag-from-jqgrid-to-jstree-v-0-9-9a) 。是否可以从 jstree 拖放到 jqgrid？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:48:52.387

不幸的是，还没有人为它制作插件。有可能，它只需要你弄清楚如何去做。也许值得尝试一下。我相信很多人会使用它/发现它很有帮助，因为目前没有插件可以完成这项工作。

# ios - iOS - 获取当前视图控制器

> ID：11269762
> 
> 赞同：1
> 
> 时间：2012-06-29T22:32:19.767
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, uiapplicationdelegate

在我的应用程序中，我的初始视图控制器以模态方式推送具有 4 个选项卡的 UITabBarController，我想从其中一个选项卡中的控制器之一的 AppDelegate 中获取，但我不知道该怎么做。

我需要这个能够使用处理 URL 回调

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:39:48.503

所以你正试图从 tabbarcontroller 中获取一个视图控制器？

```
UIViewController *myController = [[tabBarController viewControllers] objectAtIndex:0]; 
```

`0`是标签索引。要使用此方法，您需要知道您想要的选项卡所在的索引。

# c++ - 与 c++11 正则表达式不匹配

> ID：11269766
> 
> 赞同：13
> 
> 时间：2012-06-29T22:32:52.353
> 
> 标签：c++, regex, c++11

为什么这在 g++ (Debian 4.6.3-1) 4.6.3 或 clang 版本 3.2 (trunk 159457) 中找不到匹配项

```
#include <iostream>
#include <string>
#include <regex>

using namespace std;

int main()
{
    string line("test");
    regex pattern("test",regex_constants::grep);
    smatch result;

    bool ret(false);
    ret = regex_search(line,result,pattern);  
    cout <<  boolalpha << ret << endl;
    cout <<  result.size() << endl;
    return 0 ;
} 
```

输出

```
false
0 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T22:34:32.323

因为`<regex>`尚未在 libstdc++ 中实现，如此[处](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)所述（第 28 节）。

现在，请改用[Boost.Xpressive](http://www.boost.org/libs/xpressive/)或[Boost.Regex](http://www.boost.org/libs/regex/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T14:08:38.940

到目前为止，您的示例运行正确：

```
$ ~/src/gcc/inst/bin/g++ --version
g++ (GCC) 4.9.0 20140224 (experimental) 
```

上

```
$ uname -a
Linux ... x86_64 x86_64 x86_64 GNU/Linux 
```

执行

```
$ ./83-regex.x 
true
1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T23:08:03.757

根据this change log `<regex>`is supported in **gcc-4.9** with libstd++-v3

[http://gcc.gnu.org/gcc-4.9/changes.html](http://gcc.gnu.org/gcc-4.9/changes.html)

# java - 同时支持基于公共接口的 API 和内部具体的 API？

> ID：11269767
> 
> 赞同：2
> 
> 时间：2012-06-29T22:32:54.540
> 
> 标签：java, api, generics

我使用接口设计了一个完整的 API，客户端可以实现这些 API 以利用某些行为。在内部，我想使用我自己的实现类来使用更丰富的 API。我希望这些实现继续符合基于接口的 API，但是 Java 对泛型的处理正在阻碍。

这是一个例子：

```
public interface PublicAPI {
    void doSomething(SomeType object);
}

public class SomeTypeImpl implements SomeType { }

public class InternalClass implements PublicAPI {
    public void doSomething(SomeTypeImpl object) {
        // ...
    }
} 
```

在某些情况下，可以在公共 api 中使用通配符指定类型，例如`<T extends SomeType>`，但这会与导致方法冲突的泛型集合失效。

所以我问你，有没有办法支持这种类型的设计（或更好的设计），还是我注定要在我的内部类和公共 API 的实现之间来回转换？

谢谢！

**更新**

我对为什么实际上不可能强制执行比 API 提供的更具体的类型有了更好的感觉。一旦有人拥有您的对象的实例，它就可能被较少特定类型的“污染”。

根据 ACL 的建议，我采用了在我自己的特定包中使用内部类的方法，然后使用公共 API 接口创建它们的“视图”。一旦创建了视图，该对象就会被标记为不纯，并且不能再保证对象是接口以外的任何类型。在我自己的类中，当处理不纯的对象时，我会抛出异常（因为这意味着允许引用过早泄漏）。

我将把这个问题留给进一步的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:46:13.667

你为什么不通用你的界面？就像是：

```
public interface PublicAPI<T extends SomeType> {
    void doSomething(T object);
} 
```

顺便说一句，您可以将接口扩展为：

公共接口 InternalPublicAPI 扩展 PublicAPI { .... 在此处添加您的内部方法 }

Hibernate中有这样的东西，有`Session`和`SessionImplementor`接口。

# c++ - 在派生类中覆盖纯虚方法时，C++“未在此范围内声明”

> ID：11269770
> 
> 赞同：3
> 
> 时间：2012-06-29T22:33:06.210
> 
> 标签：c++, templates, inheritance, scope, overriding

这是我需要做的：

```
#include <iostream>                                                                                                                                                                                              

using namespace std;

class A
{
    public :
    virtual void fa() = 0;
};

template <typename type>
class B : public A
{
    protected :
    int v_b;
};

template <typename type>
class C : public B<type>
{
    public :
    void fa()
    {
        // whatever action that try to access v_b
        cout << "v_b = " << v_b << endl;
    }
};

int main()
{
    C<int> toto;
    toto.fa();
    return 0;
} 
```

这是 g++ 输出：

```
test.cpp: In member function ‘void C<type>::fa()’:
test.cpp:25:29: error: ‘v_b’ was not declared in this scope 
```

据我了解，v_b 是 B 的受保护成员，因此可以在 C 中访问。A 和 B 都是抽象类，我需要在 C 类中重写 A 的 f_a() 方法才能实例化它。因为编译器告诉我这个

```
test.cpp: In member function ‘void C<type>::fa()’: 
```

而**不是**

 **```
‘void A::fa()’: 
```** 

**我不明白为什么 v_b 变量不在范围内。这是我使用模板方式的问题吗？**

 **谁能帮我解决这个问题？

谢谢

**编辑 ：**

[我尝试按照此处](https://stackoverflow.com/questions/7281072/accessing-public-members-of-base-class-fails)的建议使用 this->v_b 或 B<type>::v_b并且**效果很好**！谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:48:09.660

在表达式中：

```
 cout << "v_b = " << v_b << endl; 
```

`v_b`是一个非依赖表达式（即它*看起来*不像依赖于模板参数。对于非依赖表达式，第一阶段查找必须解析符号，并且它会通过仅在非依赖上下文中查找来做到这一点。这个不包括模板基（因为它确实取决于类型参数）。简单的解决方法是使用 限定调用`this`：

```
 cout << "v_b = " << this->v_b << endl; 
```

现在它是一个*依赖*表达式（`this`这显然取决于实例化类型），并且查找被延迟到第二阶段，其中类型被替换并且可以检查基数。**

# android - 将 PPT 嵌入 HTML（用于 Android 中的 webview）

> ID：11269781
> 
> 赞同：0
> 
> 时间：2012-06-29T22:34:28.860
> 
> 标签：android, html, embed, powerpoint

有谁知道将 PPT 文件（powerpoint）嵌入 HTML 的方法？

我找到了通过 Office Web App 和/或 Google Docs 通过 iframe 嵌入的解决方案。我尝试了它们并在 HTML 中正常工作，但在我的情况下，我需要将 PPT 文件放入个人服务器中。

我发现的其他选项如 Embedit.in，一个显示 PPT 的 Flash 嵌入（不将 PPT 转换为 SWF（Flash 格式））。

但是，我仍在寻找一种将保存在个人服务器中的 PPT 文件显示为 HTML 的方法，有什么想法吗？这个问题的任何网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T05:13:43.777

建议...

将 ppt 转换为 pdf 并使用代码生成器@http: [//pdfobject.com/generator.php](http://pdfobject.com/generator.php)。

使用标准（不是 java）。

他们生成的代码中有一个小错误删除网址末尾的井号标签**# 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:39:42.343

在 PowePoint 2010 之前，您可以使用 PowerPoint API 将 ppt 保存为 html。

您是否还检查了 api 供应商？这是一个常见的问题，可能有 api 可以做到这一点。

# android - 查询彩信-短信对话

> ID：11269786
> 
> 赞同：1
> 
> 时间：2012-06-29T22:34:38.210
> 
> 标签：android, mms

我正在实现这里讨论的方法[How to Read MMS Data in Android](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android) Here is the snippet。

```
ContentResolver contentResolver = getContentResolver();
final String[] projection = new String[]{"*"};
Uri uri = Uri.parse("content://mms-sms/conversations/");
Cursor query = contentResolver.query(uri, projection, null, null, null); 
```

当我尝试通过光标获取数据时，我没有得到彩信的 ID。我只得到 SMS 消息的 ID。我的收件箱中有两条彩信，但没有显示它们的地址“号码”。

# inline-formset - 当使用带有表单向导的内联表单集时，表单集表单验证在哪里？

> ID：11269791
> 
> 赞同：7
> 
> 时间：2012-06-29T22:35:31.190
> 
> 标签：inline-formset, django-formwizard

我正在创建一个示例，以了解有关使用 SessionWizard 使用内联表单集的更多信息。最终，我想集成动态表单集，以便在提交之前通过模板添加和删除单个表单。但是，当第二个表单中缺少数据时，它无法像常规 ModelForm 那样进行验证。

SessionWizard 中是否有需要重写的方法？它是在 Django 中固有地处理的吗？

指导和例子将不胜感激。

模型.py

```
class Parent(models.Model):
    name = models.CharField(max_length=256)
    def __unicode__(self):
        return name

class Child(models.Model):
    name = models.CharField(max_length=256)
    parent = models.ForeignKey(Parent)
    def __unicode__(self):
        return name 
```

网址.py

```
test_forms = [['parent', ParentForm],['child', ChildFormSet]]

urlpatterns = patterns('example.views',
    url(r'^$', TestWizard.as_view(test_forms)),
) 
```

表格.py

```
class ParentForm(ModelForm):
    class Meta:
        model = Parent

class ChildForm(ModelForm):
    class Meta:
        model = Child
        exclude = ('parent',)

ChildFormSet = inlineformset_factory(Parent, Child, extra=1)

class TestWizard(SessionWizardView):
    """
    This WizardView is used to create multi-page forms and handles all the
    storage and validation stuff using sessions.
    """
    #template_name = ''

#    def get_template_names(self):
#        """
#        Returns a list of template names to be used for the request.
#        Overridden TemplateResponseMixin for specifying template for step.
#        """
#        return 'survey/forms/wizard_form.html'
#
#    def get_context_data(self, form, **kwargs):
#        context = super(TestWizard, self).get_context_data(form=form, **kwargs)
#        return context
#
#    def get_form_initial(self, step):
#        """
#        Returns dict (list of key, values) for initial form data.
#        Useful for populating form fields with data from prior form, with extra
#        logic for dealing with formsets.
#        """
#        return self.initial_dict.get(step, {})
#
#    def get_form(self, step=None, data=None, files=None):
#        """
#        Constructs the form for a given step - overridden to add extra arguments
#        """
#        form = super(TestWizard, self).get_form(step, data, files)
#        return form

    def done(self, form_list, **kwargs):
        return render_to_response('survey/thanks.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

向导-form.html

```
{% extends "base.html" %}
{% load i18n %}

{% block head %}
    {{ wizard.form.media }}
{% endblock %}

{% block content %}
    <p>DEFAULT WIZARD FORM Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
    <form action="" method="post">{% csrf_token %}
        <table>
            {{ wizard.management_form }}
            {% if wizard.form.forms %}
                {{ wizard.form.management_form }}
                {% for form in wizard.form.forms %}
                    {{ form }}
                {% endfor %}
            {% else %}
                {{ wizard.form }}
            {% endif %}
        </table>
        {% if wizard.steps.prev %}
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}">{% trans "first step" %}</button>
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">{% trans "prev step" %}</button>
        {% endif %}
        <input type="submit" value="{% trans "submit" %}"/>
    </form>
{% endblock %} 
```

# c - 将csv字符串转换为浮点数组

> ID：11269792
> 
> 赞同：4
> 
> 时间：2012-06-29T22:35:41.980
> 
> 标签：c

任何人都可以建议将 csv 字符串转换为 C 中的浮点数组的简单方法吗？

例如

```
char my_string[] = "1.0,2.0,3.0"; 
```

到：

```
my_array = [1.0, 2.0, 3.0] 
```

my_array 的类型在哪里`float[]`

我将`sscanf`用作快速简便的解决方案，但我不知道字符串中预先包含多少个值

是否有一些现有的库函数可以做到这一点，而我不必求助于每次`char`寻找“，”的循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T22:44:36.483

你可以使用[`strtok()`](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)：

```
float my_array[N]; // if you don't know how many there are, use the heap
int i = 0;

char *tok = strtok(my_string, ",");
while (tok != NULL) {
    my_array[i++] = atof(tok);
    tok = strtok(NULL, ",");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T22:43:41.177

您可以使用一个库 - [LibCSV](http://sourceforge.net/projects/libcsv/)

根据他们的描述：

> libcs​​v 是一个小型、简单、快速的 CSV 库，用纯 ANSI C89 编写，可以读取和写入 CSV 数据。它提供了一个直接的接口，使用回调函数来处理解析的字段和行，并且可以解析格式不正确的 CSV 文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T22:40:06.897

使用一次`while()`只读取一个浮点数的循环`sscanf()`。只要`sscanf()`返回 0，你就知道你在列表的末尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T02:57:43.987

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char** split(const char *str, const char *delimiter, size_t *len){
    char *text, *p, *first, **array;
    int c;
    char** ret;

    *len = 0;
    text=strdup(str);
    if(text==NULL) return NULL;
    for(c=0,p=text;NULL!=(p=strtok(p, delimiter));p=NULL, c++)//count item
        if(c==0) first=p; //first token top

    ret=(char**)malloc(sizeof(char*)*c+1);//+1 for NULL
    if(ret==NULL){
        free(text);
        return NULL;
    }
    strcpy(text, str+(first-text));//skip until top token
    array=ret;

    for(p=text;NULL!=(p=strtok(p, delimiter));p=NULL){
        *array++=strdup(p);
    }
    *array=NULL;
    *len=c;
    free(text);
    return ret;
}

void free4split(char** sa){
    char **array=sa;

    if(sa!=NULL){
        while(*sa)
            free(*sa++);//for string
        free(array);    //for array
    }
}

int main(){
    char my_string[] = "1.0,2.0,3.0";
    float *my_array;
    char **strs;
    size_t count;

    strs=split(my_string, ", \t", &count);
    my_array=(float*)malloc(sizeof(float)*count);
    {   //convert
        int i;
        for(i=0;i<count;++i)
            my_array[i]=(float)atof(strs[i]);
        free4split(strs);

    }
    {   //test print
        int i;
        for(i=0;i<count;++i)
            printf("%f\n", my_array[i]);
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T03:45:31.280

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* getToken(char **p, const char delimiter){
    char *word, *top=*p;
    int len;

    if(*p == NULL || **p == '\0') return NULL;
    while(**p && **p != delimiter)
        ++(*p);
    if(**p != delimiter) return strdup(top);
    len = *p - top;
    ++(*p);
    word=(char*)malloc(sizeof(char)*(len+1));
    strncpy(word, top, len);
    word[len]='\0';
    return word;
}

int main(){
    char my_string[] = "1.0,2.0,3.0";
    float *my_array=NULL;
    char *word, *p=my_string;
    int count=0;

    while(NULL!=(word=getToken(&p, ','))){
        my_array=(float*)realloc(my_array, sizeof(float)*(++count));
        my_array[count-1]=(float)atof(word);
        free(word);
    }
    {   //test print
        int i;
        for(i=0;i<count;++i)
            printf("%f\n", my_array[i]);
    }
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T22:48:58.767

您可能想研究使用`strchr`函数族。

```
STRCHR(3)           Linux Programmer's Manual           STRCHR(3)

NAME
       strchr, strrchr - locate character in string

SYNOPSIS
       #include <string.h>

       char *strchr(const char *s, int c);

       char *strrchr(const char *s, int c);

DESCRIPTION
       The  strchr()  function  returns  a  pointer  to the first
       occurrence of the character c in the string s.

       The strrchr() function  returns  a  pointer  to  the  last
       occurrence of the character c in the string s.

RETURN VALUE
       The  strchr()  and strrchr() functions return a pointer to
       the matched character or NULL  if  the  character  is  not
       found.

CONFORMING TO
       SVID 3, POSIX, BSD 4.3, ISO 9899

SEE ALSO
       index(3),  memchr(3),  rindex(3),  strpbrk(3),  strsep(3),
       strspn(3), strstr(3), strtok(3) 
```

# bash - 将新目录添加到 PostgreSQL 表中的 Bash 脚本

> ID：11269793
> 
> 赞同：2
> 
> 时间：2012-06-29T22:35:44.167
> 
> 标签：bash, postgresql

我正在尝试编写一个列出目录并创建一个 SQL 脚本来插入这些目录的脚本，问题是我只想插入新目录，这是我目前所拥有的：

```
#If file doesn't exist add the search path test
if [ ! -e  /home/aydin/movies.sql ] 
then
    echo "SET SEARCH_PATH TO noti_test;" >> /home/aydin/movies.sql;
fi
cd /media/htpc/
for i in *
do
    #for each directory escape any single quotes
    movie=$(echo $i | sed "s:':\\\':g" )
    #build sql insert string
    insertString="INSERT INTO movies (movie) VALUES (E'$movie');";
    #if sql string exists in file already   
    if grep -Fxq "$insertString" /home/aydin/movies.sql
    then
        #comment out string
        sed -i "s/$insertString/--$insertString/g" /home/aydin/movies.sql
    else
        #add sql string
            echo $insertString >> /home/aydin/movies.sql;
    fi
done;
#execute script
psql -U "aydin.hassan" -d "aydin_1.0" -f /home/aydin/movies.sql; 
```

似乎除了一件事之外，脚本无法识别带有单引号的条目，因此在没有新目录的情况下再次运行脚本时，文件如下所示：

```
--INSERT INTO movies (movie) VALUES (E'007, Moonraker (1979)');
--INSERT INTO movies (movie) VALUES (E'007, Octopussy (1983)');
INSERT INTO movies (movie) VALUES (E'007, On Her Majesty\'s Secret Service (1969)'); 
```

我也愿意接受有关更好方法的建议，我的过程似乎相当冗长且效率低下:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:06:14.580

脚本对我来说通常看起来不错。考虑修改后的版本（未经测试）：

```
#! /bin/bash
#If file doesn't exist add the search path test
if [ ! -e  /home/aydin/movies.sql ] 
then
    echo 'SET search_path=noti_test;' > /home/aydin/movies.sql;
fi
cd /media/htpc/
for i in *
do
    #build sql insert string - single quotes work fine inside dollar-quoting
    insertString="INSERT INTO movies (movie) SELECT \$x\$$movie\$x\$
WHERE NOT EXISTS (SELECT 1 FROM movies WHERE movie = \$x\$$movie\$x\$);"

    #no need for grep. SQL is self-contained.
    echo $insertString >> /home/aydin/movies.sql
done

#execute script
psql -U "aydin.hassan" -d "aydin_1.0" -f /home/aydin/movies.sql; 
```

*   要开始一个新文件，请使用`>`而不是`>>`

*   对不带变量的字符串常量使用单引号`'`来展开

*   使用[PostgreSQL**美元引用**](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)，因此您不必担心字符串中的单引号。您必须转义 shell 中的`$`字符以删除其在 shell 中的特殊含义。
    对美元引号使用“不可能”字符串，因此它不能出现在字符串中。如果您没有，您可以测试引号字符串并在不太可能的情况下更改它应该匹配，以绝对确定。

*   用于`SELECT .. WHERE NOT EXISTS`INSERT 以自动防止重新插入已经存在的条目。这可以完全防止表中的重复条目 - 不仅仅是在新条目中。

*   上的索引`movies.movie`（可能，但不一定是唯一的）会加快插入速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:08:30.233

为什么要打扰`grep`而`sed`不是让数据库检测重复项？

`movie`在每次运行时添加唯一索引并创建一个新的（临时）插入脚本，然后使用自动提交（默认）或`-v ON_ERROR_ROLLBACK=1`使用`psql`. 要获得电影数据库的完整插入脚本，请`--column-inserts`使用`pg_dump`.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:06:01.473

有一个名为**[incron](http://inotify.aiken.cz/?section=incron&page=doc&lang=en)**的实用程序守护程序，只要将某些文件写入监视目录，它就会触发您的脚本。它使用内核事件，没有循环 - 仅限 Linux。

在其配置（完整文件路径）中：

```
/media/htpc IN_CLOSE_WRITE /home/aydin/added.sh $@/$# 
```

然后最简单**的 adder.sh**脚本没有任何参数检查：

```
#!/bin/bash
cat <<-EOsql | psql -U "aydin.hassan" -d "aydin_1.0"
INSERT INTO movies (movie) VALUES (E'$1');
EOsql 
```

您可以在一个目录中拥有数千个文件，并且您可以使用原始脚本来解决问题。

# c# - 如何在 C# 中的对象实例中覆盖方法

> ID：11269797
> 
> 赞同：1
> 
> 时间：2012-06-29T22:36:25.530
> 
> 标签：c#, overriding, abstract-class

我是一名试图过渡到 C# 的 Java 程序员，我希望有一种方法可以在 C# 中做一些我在 Java 中习惯的事情：在抽象对象的声明中覆盖一个方法，如下所示：

```
//This is the way I do it in Java and want to do in C#
Keyword k = new Keyword("quit"){
    public abstract void do(String context){
        //TODO Do stuff
    }
}; 
```

这是我在 Java 中已经做了一段时间的一些文本游戏的东西。我研究了抽象类、虚拟类和匿名类，但它们都没有做到这一点。抽象和虚拟希望我创建一个全新的子类，但这将非常耗时且大规模不可行。匿名类不（据我所知）使我能够覆盖方法，只是字段并且不提供任何稳定供我依赖。

如果有办法做到这一点或类似的事情，请解释。谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:40:25.273

这在 C# 中不起作用。您必须创建一个继承自关键字的新类。

```
public class MyKeyword : Keyword
{
    public MyKeyword(string s) : base(s)
    { }

    public override void do(string context)
    {
        // TODO: Do stuff.
    }
} 
```

[C# 中的匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)不是您可以为其提供任何公共方法的类。它们只有属性，旨在成为一种快速的方法内方法，将复杂数据从一行传递到下一行。

老实说，我不知道你可以做你在 Java 中展示的东西。也就是说，如果我将其理解为一种内联类派生。

Brian Rasmussen 提到使用[委托](http://msdn.microsoft.com/en-us/library/ms173171.aspx)。看起来像这样：

```
public delegate void DoSomething(string context);
public class Keyword
{
    public DoSomething Do;

    private void CallsDo()
    {
        if (Do != null)  Do("some string");
    }
} 
```

然后你可以分配给它：

```
Keyword k = new Keyword();
k.Do = (ctx) => { /* Do something with ctx string */ }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:46:00.143

[代表](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)可能是您所追求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:52:19.477

您可以为这种方法使用委托：注意示例

```
public class Keyword
{
     public delegate void Do();
}

//Area of Execution
{
   //...
   Keyword k = new Keyword();
   k.Do = delegate() 
   {
       Console.Writeln("Anonymous Inner function assigned to a callback function i.e a Delegate!");  
   };
} 
```

这些很像 C/C++ 中的函数指针，但根据你的背景，这对你来说可能毫无意义。

用最简单的术语来说，委托是封装方法/函数的类型安全对象。这意味着它维护一个或多个方法的引用，并且可以稍后通过委托对象调用它们，而不是在方法本身上显式调用它们。您可以将匿名函数分配给右侧，就像您描述的 Java 中的方法一样。

希望这可以帮助。在此处阅读更多内容以深入了解代表

[代表们](http://msdn.microsoft.com/en-us/library/ms173172%28v=vs.80%29.aspx)

# iphone - 应用程序崩溃，内存不足

> ID：11269798
> 
> 赞同：2
> 
> 时间：2012-06-29T22:36:34.500
> 
> 标签：iphone, objective-c, ios, ipad

我正在开发一个水平滚动图像的简单 iPad 应用程序（Lion 上的 iOS 5.1.1 和 XCode 4.3.3）。它使用延迟加载，但不幸的是，由于图像大约 3/4 的内存不足，它正在崩溃。我使用 XCode 分析器和 Instruments 来查找和修复任何泄漏，但它仍然崩溃。崩溃日志如下：

```
Incident Identifier: 91B65E89-4CCE-4CB5-975F-365D23D802E5
CrashReporter Key:   659f640ad55a7dfbaf0305305e0b8f0fb36a6c41
Hardware Model:      iPad1,1
OS Version:          iPhone OS 5.1.1 (9B206)
Kernel Version:      Darwin Kernel Version 11.0.0: Sun Apr  8 21:51:26 PDT 2012; root:xnu-1878.11.10~1/RELEASE_ARM_S5L8930X
Date:                2012-06-29 14:51:58 -0700
Time since snapshot: 49 ms

Free pages:        610
Active pages:      0
Inactive pages:    694
Throttled pages:   43266
Purgeable pages:   0
Wired pages:       18518
Largest process:   GBTL

Processes
     Name                 UUID                    Count resident pages
        GBTL <d26b776787493174ae14f454a11b746d>   31295 (jettisoned) (active)
 debugserver <2408bf4540f63c55b656243d522df7b2>     134
    installd <0f9e14173c503a8089f7f8cd0329a1a0>     403
         atc <1e5f2a595709376b97f7f0fa29368ef1>     605 (jettisoned)
notification_pro <373a488638c436b48ef0801b212593c4>      96
notification_pro <373a488638c436b48ef0801b212593c4>      99
notification_pro <373a488638c436b48ef0801b212593c4>      96
        afcd <c3cc9d594b523fd1902fb69add11c25d>     133
  MobileMail <eed7992f4c1d3050a7fb5d04f1534030>    1004 (jettisoned)
        ptpd <62bc5573db7a352ab68409e87dc9abb9>     356 (jettisoned)
mediaserverd <f03b746f09293fd39a6079c135e7ed00>     404 (jettisoned)
        iapd <0a747292a113307abb17216274976be5>     285 (jettisoned)
  DTMobileIS <1383b8ed7d373b59a0839e89ab947089>     899
notification_pro <373a488638c436b48ef0801b212593c4>      99
 dataaccessd <473ff40f3bfd3f71b5e3b4335b2011ee>     735 (jettisoned)
springboardservi <b74f5f58317031e9aef7e95744c816ca>     283
syslog_relay <b07876a121a432d39d89daf531e8f2bd>      62
notification_pro <373a488638c436b48ef0801b212593c4>      98
syslog_relay <b07876a121a432d39d89daf531e8f2bd>      66
notification_pro <373a488638c436b48ef0801b212593c4>      98
filecoordination <0f34c714b10d35318f0d445f1d953386>      98
        geod <976e1080853233b1856b13cbd81fdcc3>     127
absinthed.K48 <04b40efabeac392ba63cba7256b86bb0>      74
     notifyd <f6a9aa19d33c3962aad3a77571017958>     181
  aosnotifyd <8cf4ef51f0c635dc920be1d4ad81b322>     369
    BTServer <31e82dfa7ccd364fb8fcc650f6194790>     186
CommCenterClassi <041d4491826e3c6b911943eddf6aaac9>     274
 SpringBoard <c74dc89dec1c3392b3f7ac891869644a>    4878 (active)
  aggregated <a12fa71e6997362c83e0c23d8b4eb5b7>     356
        apsd <e7a29f2034083510b5439c0fb5de7ef1>     630
     configd <ee72b01d85c33a24b3548fa40fbe519c>     304
fairplayd.K48 <47deae2d0fb23b6594b0128353e8b48d>     115
   fseventsd <914b28fa8f8a362fabcc47294380c81c>     175
     imagent <9c3a4f75d1303349a53fc6555ea25cd7>     361
   locationd <cf31b0cddd2d3791a2bfcd6033c99045>     833
mDNSResponder <86ccd4633a6c3c7caf44f51ce4aca96d>     188
mediaremoted <327f00bfc10b3820b4a74b9666b0c758>     201
   lockdownd <b06de06b9f6939d3afc607b968841ab9>     216
      powerd <133b7397f5603cf8bef209d4172d6c39>     133
     syslogd <7153b590e0353520a19b74a14654eaaa>      97
       wifid <3001cd0a61fe357d95f170247e5458f5>     258
UserEventAgent <dc32e6824fd33bf189b266102751314f>     362
     launchd <5fec01c378a030a8bd23062689abb07f>     123

**End** 
```

这是相关的代码：

```
#import "GBTLViewController.h"

@implementation GBTLViewController

@synthesize scrollView;
@synthesize pageControl;
@synthesize pageImages;
@synthesize pageViews;

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [self loadVisiblePages];

    if (!pageControlBeingUsed) {
        // Update the page when more than 50% of the previous/next page is visible
        CGFloat pageWidth = self.scrollView.frame.size.width;
        int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
        self.pageControl.currentPage = page;
    }
}

- (IBAction)changePage {
    // update the scroll view to the appropriate page
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;
    [self.scrollView scrollRectToVisible:frame animated:YES];

    pageControlBeingUsed = YES;
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;

    // Work out which pages you want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }

    // Load pages in our range
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }

    // Purge anything after the last page
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
}

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {

        CGRect frame = self.scrollView.bounds;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0.0f;

        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit;
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView];
        [newPageView release];

        [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
    }
}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a     nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    pageControlBeingUsed = NO;

    scrollView.delegate = self;
    [self.scrollView setBackgroundColor:[UIColor blackColor]];
    scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollView.clipsToBounds = NO;
    scrollView.scrollEnabled = YES;
    scrollView.pagingEnabled = NO;

    self.pageImages = [NSArray arrayWithObjects:
                   [UIImage imageNamed:@"480X_cover.jpg"],
                   [UIImage imageNamed:@"GBTL1.jpg"],
                   [UIImage imageNamed:@"GBTL2.jpg"],
                   [UIImage imageNamed:@"GBTL3.jpg"],
                   [UIImage imageNamed:@"GBTL4.jpg"],
                   [UIImage imageNamed:@"GBTL5.jpg"],
                   [UIImage imageNamed:@"GBTL6.jpg"],
                   [UIImage imageNamed:@"GBTL7.jpg"],
                   [UIImage imageNamed:@"GBTL8.jpg"],
                   [UIImage imageNamed:@"GBTL9.jpg"],
                   [UIImage imageNamed:@"GBTL10.jpg"],
                   [UIImage imageNamed:@"GBTL11.jpg"],
                   [UIImage imageNamed:@"GBTL12.jpg"],
                   [UIImage imageNamed:@"GBTL13.jpg"],
                   [UIImage imageNamed:@"GBTL14.jpg"],
                   [UIImage imageNamed:@"GBTL15.jpg"],
                   [UIImage imageNamed:@"GBTL16.jpg"],
                   [UIImage imageNamed:@"GBTL17.jpg"],
                   [UIImage imageNamed:@"GBTL18.jpg"],
                   [UIImage imageNamed:@"GBTL19.jpg"],
                   [UIImage imageNamed:@"GBTL20.jpg"],
                   nil];

    NSInteger pageCount = self.pageImages.count;

    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    self.pageViews = [[[NSMutableArray alloc] init] autorelease];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);

    [self loadVisiblePages];
}

// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    NSInteger pageCount = self.pageImages.count;

    for (NSInteger i=0; i<pageCount; i++) {
    [self purgePage:i];
    }

    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * pageCount, pagesScrollViewSize.height);

    [self loadVisiblePages];
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.scrollView = nil;
    self.pageControl = nil;
}

- (void)dealloc {
    [scrollView release];
    [pageControl release];
    [super dealloc];
}

@end 
```

如果有人能弄清楚内存问题发生在哪里以及如何解决它，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:55:22.530

不知道这些是什么尺寸的图像，但有许多策略可以处理这种情况：

1）你真的需要将图像加载到 NSArray 中吗？似乎根据您的文件命名方案，您可以构建一些逻辑以根据需要将其从包中拉出，然后在屏幕外立即丢弃。

2) 有时在 @autorelease 块中做这种事情是有利的。见这里： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsautoreleasepool_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsautoreleasepool_Class/Reference/Reference.html)

3）您可能想查看此示例应用程序缩小低分辨率屏幕的大图像：http: [//developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html#//apple_ref/doc /uid/DTS40011173](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011173)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:52:35.600

一个问题是您的 loadPage 和 purgePage 方法中的以下两行：

```
if ((NSNull*)pageView == [NSNull null]) {
if ((NSNull*)pageView != [NSNull null]) { 
```

右侧 ( `[NSNull null]`) 创建一个新对象，您正在`pageView`与该对象的地址进行比较。即使`pageView`是另一个使用 创建的对象`[NSNull null]`，它的地址也很可能与您在条件中创建的新对象不匹配`if`。`nil`使用它来指定尚未加载的页面会更好。您可以通过将`pageViews`字段设置为`NSMutableDictionary`(with`NSUInteger`作为键类型) 轻松做到这一点。除此之外，您还可以将这些检查替换为以下类型的检查：

```
if ([pageView isTypeOfClass:[NSNull class]]) {
if (![pageView isTypeOfClass:[NSNull class]]) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T23:11:09.780

那是您拥有的大量图像。也许将图像的 NSString 名称存储在一个数组中，并且屏幕上只有一两个图像处于活动状态。

# linux - 在哪里/如何在 *nix 命令行实用程序中保存首选项文件？

> ID：11269799
> 
> 赞同：2
> 
> 时间：2012-06-29T22:36:35.467
> 
> 标签：linux, macos, unix

我正在编写一个小型命令行实用程序。它应该能够在 OSX、UNIX 和 Linux 上运行。

它需要在某个地方保存一些首选项，例如在一个小的 YAML 配置文件中。将这样的文件保存在哪里？

语言：Python 2.7
操作系统：*nix

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:44:20.223

通常，这些文件位于 ~/.rc 之类的地方（例如：~/.hgrc）。如果您需要大量配置设置，这可能是文件的路径或目录的路径。

有关详细说明，请参见[http://www.linuxtopia.org/online_books/programming_books/art_of_unix_programming/ch10s03.html](http://www.linuxtopia.org/online_books/programming_books/art_of_unix_programming/ch10s03.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T22:44:45.263

如果您的应用程序被命名为“someapp”，您可以将配置保存在一个文件中，例如`$HOME/.someapp`. 如果你愿意，你可以给配置文件一个扩展名。如果您认为您的应用程序可能有多个配置文件，您可以使用该目录`$HOME/.someapp`并在其中创建常规命名（非隐藏）文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T22:45:32.700

我会避免将文件放在`~`目录中，因为它完全被垃圾淹没了。至少在 ubuntu 上，最近的趋势是`~/.config/<appname>/`用于您需要的任何点文件。我真的很喜欢那个约定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T18:21:01.833

许多跨平台工具在 OS X 上使用与在 linux（和其他 POSIX/非 Windows 平台）上相同的路径。使用 POSIX 位置的主要优势不是节省几行代码，而是节省了对 Mac 特定指令的需求，并允许 Mac 用户从社区中的 linux 用户那里获得帮助（无需翻译他们的建议）。

另一种选择是将它们放在 ~/Library 下的“Mac-friendly”位置。使用 Mac 位置的主要优势基本上是“Apple 这么说”——除非您打算对代码进行沙箱化，在这种情况下，主要优势是您可以这样做。

如果您选择使用库位置，您应该阅读文件系统编程指南中的[关于 OS X 文件系统](https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW14)和[OS X 库目录详细信息](https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/MacOSXDirectories/MacOSXDirectories.html#//apple_ref/doc/uid/TP40010672-CH10-SW1)，但这里是简短版本：

*   几乎所有内容：在 ~/库/应用程序支持。理想情况下，您应该使用 -[NSFileManager URLForDirectory:inDomain:appropriateForURL:create:error:] 之类的 API 来获取路径；如果没有，您必须手动处理本地化、沙盒容器等问题。
*   可以轻松重新创建的任何内容（因此不需要备份、迁移等）： ~/Library/Caches 的同名子目录。
*   首选项：改用 NSUserDefaults 或 CFPreferences API。如果您使用自己的格式，“旧”的做事方式是在 ~/Library/Preferences 下创建一个以您的应用程序名称或捆绑 ID 命名的子目录，并将您的文件放入其中。Apple 不再推荐，但并没有真正推荐替代方案（缺少“使用 CFPreferences，该死的！”）；许多应用程序（例如，Aquamacs）仍然以旧方式执行此操作，但其他应用程序却假装它们不是首选项并将它们存储在应用程序支持下。

在 Python 中，它的工作方式如下（省略错误处理，并假设您按名称而不是为自己设置捆绑 ID）：

```
from Foundation import *
fm = NSFileManager.defaultManager()
appsupport = (fm.URLForDirectory_inDomain_appropriateForURL_create_error_(
  NSApplicationSupportDirectory, NSUserDomainMask, None, True, None)[0].
  URLByAppendingPathComponent_isDirectory_(
  appname, True))
caches = (fm.URLForDirectory_inDomain_appropriateForURL_create_error_(
  NSCachesDirectory, NSUserDomainMask, None, True, None)[0].
  URLByAppendingPathComponent_isDirectory_(
  appname, True))
prefs = NSUserDefaults.persistentDomainForName_(appname) 
```

# networking - 如何从另一台计算机查看我服务器上的网页？

> ID：11269801
> 
> 赞同：0
> 
> 时间：2012-06-29T22:36:39.900
> 
> 标签：networking, web-applications, webserver, ip-address

我有一个我在家用计算机上的服务器上开发的 Web 应用程序。是否可以从我家庭网络上的另一台计算机访问该网页？

我天真的方法只是输入我的 IP 地址，然后输入`:8888`服务器正在侦听的端口号......

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:51:59.187

我不知道它是否会有所帮助，但您可以使用 ssh 连接到您的计算机。但是您需要从 shell 中执行此操作（从 mac 上的终端，在 PC 上使用 putty）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:11:12.573

[最后，通过在我的路由器上设置端口转发并使用no-ip](http://www.no-ip.com/)进行 DNS 管理，可以更轻松地设置对服务器的远程访问。他们有一个体面的演练来让它全部启动和运行。所以我只需输入`my-address.no-ip.org`即可从任何远程设备访问我的网站。

否则，Sampo 发布的有关超级用户的问题的链接值得一试。

# git - 嵌套和独立的 GIT 存储库，用于备份，如何？

> ID：11269804
> 
> 赞同：3
> 
> 时间：2012-06-29T22:37:05.397
> 
> 标签：git, nested, backup

我想使用 GIT 作为备份解决方案。我的公司有一个 Windows 共享网络和一个 Centos 服务器。每个用户都有一个唯一的共享文件夹，其中包含用户的所有文件。我们有 2 个开发人员，他们可以有一个 git repo(s)。

如果子文件夹有 git repos，我如何才能使用户的整个文件夹成为 GIT 存储库，执行通常的 git 操作、提交、推送等，而不导入？

注意：子模块不是解决方案，我不知道用户主文件夹下的存储库是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:08:28.260

Git 不能提供良好的备份解决方案的原因有很多：

*   你不能有嵌套的 Git 存储库——没有办法强制 Git 将嵌套`.git`目录视为普通目录
*   它不会保存完整的权限和所有权
*   它的索引格式不能扩展到许多文件
*   它不能很好地处理大文件（它会耗尽内存，因为它需要将整个文件放在内存中进行压缩——或者至少在一年前是这样的，也许他们已经修复了它）
*   虽然压缩对源代码有好处，但对虚拟机映像等就不是很好了。
*   备份到远程系统涉及首先在本地备份
*   无法防御备份文件损坏

话虽如此，Git 作为备份解决方案非常棒的原因有以下几点：

*   每个备份都是一个完整的快照——您不需要在恢复旧的完整备份之后再进行一些增量备份来获取最新文件
*   非常好的重复数据删除性能
*   总体来说空间效率不错
*   对有效地将备份传输到远程系统的强大支持

我的建议：看看[bup](https://github.com/apenwarr/bup/)。它不是很成熟，没有看到太多活跃的开发，并且缺少一些重要的功能，但它有很多希望。它是一个基于 Git 的开源备份程序。他们保留了 Git 做得好的东西，但替换/增强了 Git 做得不好的一些东西（用于备份）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:48:18.477

你所要做的就是

```
git init 
```

在每个用户的基础上。如果他们在那里存储他们的 git repos，git 的范围将停止在那些有`.git`文件夹的目录上。

目前尚不清楚您是否想要将 git 存储库提交到另一个 git 存储库。我不建议这样做。

# php - 使用 Codeigniter + Tank Auth 从电子邮件创建用户名

> ID：11269817
> 
> 赞同：0
> 
> 时间：2012-06-29T22:38:59.377
> 
> 标签：php, codeigniter, codeigniter-2, tankauth

我使用 Codeigniter 框架 + Tank_Auth 注册库。它们工作得很好，但我只需要稍微改变一下寄存器形式。

我想从电子邮件地址生成用户名，而不是从注册表单中获取。我在 library/Tank_auth.php 文件中添加了一个简单的函数。这是我的用户名生成器功能：

```
function _create_username_from_email($email)
{
$user = strstr($email, '@', true); // As of PHP 5.3.0
return $user;
} 
```

1.  请让我知道我需要在哪里运行我的函数并将其写入数据库。

2.  我还需要从注册表单中删除用户名字段。所以我需要如何为控制器中的用户名字段传递表单验证。

如果你们中的任何人能帮助我解决这些问题，我将非常高兴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:13:07.257

在行`121`中，`application/models/tank_auth/users`您有：

```
/**
 * Create new user record
 *
 * @param   array
 * @param   bool
 * @return  array
 */
function create_user($data, $activated = TRUE)
{
    $data['created'] = date('Y-m-d H:i:s');
    $data['activated'] = $activated ? 1 : 0;

    if ($this->db->insert($this->table_name, $data)) {
        $user_id = $this->db->insert_id();
        if ($activated) $this->create_profile($user_id);
        return array('user_id' => $user_id);
    }
    return NULL;
} 
```

就在`if ($this->db->insert($this->table_name, $data)) {`插入之前：

```
$data['username'] = strstr($data['email'], '@', true); 
```

PS 我希望你理解它，但以防万一 - 如果你有两个或多个用户使用相同的电子邮件用户名部分，`john@hotmail.com`并且`john@gmail.com`他们都将使用相同的用户名，这可能会导致意外行为。

# .net - 在实体框架模型中引发异常的类型初始化程序？

> ID：11269822
> 
> 赞同：0
> 
> 时间：2012-06-29T22:39:36.037
> 
> 标签：.net, entity-framework

我有 2 个项目 A 和 B，
每个项目都有自己的数据库，并使用实体框架连接到它，每个项目单独运行良好
我的问题是，当我将项目 B 用作项目 A 中的库时，它给了我“类型(MYCLASS) 的初始化程序引发了异常"
你应该知道 (MYCLASS): 是项目 B 中的一个实体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:14:19.470

检查两个项目是否在`app.config`. 您可能在项目 B 中升级了 ef dll，但在项目 A 中没有升级。由于您在 A 中引用了 B，因此 entityframework 将 A 中的配置用于两个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T03:49:09.033

首先将相同版本的 EF 安装到所有项目，然后在 App.config 文件中检查以下内容，

1.  **connectionStrings**元素位于**configSections**元素之后。
2.  **启动**元素在**connectionStrings**元素之后。

```
<?xml version="1.0" encoding="utf-8"?>
 <configuration>
   <configSections>
         <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
   </configSections>
   <connectionStrings>
         <add name="SchedulingContext" connectionString="Data Source=XXX\SQL2008R2DEV;Initial Catalog=YYY;Persist Security Info=True;User ID=sa;Password=XXX"   providerName="System.Data.SqlClient"/>
   </connectionStrings>
   <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>       
 </configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T09:19:10.967

只需从 ConfigSection 中删除所有行

```
 <configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

# aptana - Aptana：查找和替换制表符（带空格）

> ID：11269825
> 
> 赞同：9
> 
> 时间：2012-06-29T22:39:47.207
> 
> 标签：aptana, whitespace

我姗姗来迟地将 Aptana 设置为使用四个空格而不是制表符。我已经对首选项进行了必要的更改，因此每个新选项卡都会插入四个空格。

但是，所有现有选项卡仍然存在，因此`Mixed spaces and tab`出现错误。你怎么能`Replace all`解决这个问题？我已经尝试过`^t`，`<TAB>`等等，但它只是将这些作为普通字符串进行搜索。指定空格和制表符的正确方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-30T15:49:39.213

我发现自己处于类似情况，复制整个源代码并重新粘贴它帮助了我。只需对您的源代码`Ctrl`+ `A`，`Ctrl`+执行以下操作`C`，然后是`Del`整个代码并再次`Ctrl`+`V`它。如果您在上面提到的选项中设置了空格，您将只获得空格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T22:50:07.247

~~重构~~源菜单中有一个选项可以在制表符和空格制表符之间进行转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-18T18:19:34.687

这对我有用：*编辑 > 查找/替换...*（`CTRL`+ `F`），检查正则表达式，键入`\t`并键入 4 个空格（我使用 4 个空格作为制表符）。

# cmake - cmake：在 CMakeLists.txt 中选择生成器

> ID：11269833
> 
> 赞同：42
> 
> 时间：2012-06-29T22:41:40.660
> 
> 标签：cmake

我想**强制 CMake**使用CMakeLists.txt 中的“Unix Makefiles”**生成器。**

**这是我现在使用的命令。**

```
cmake -G "Unix Makefiles" . 
```

**我希望是这样。**

```
cmake . 
```

在安装了 VC 和自定义工具链的 Windows 上运行时。

我希望能够在`CMakeLists.txt`文件中设置生成器。

**也许是这样的。**

```
set(CMAKE_GENERATOR "Unix Makefiles") 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-07-21T22:47:37.050

这对我有用 -在您的项目目录中创建一个名为**PreLoad.cmake的文件，其中包含：**

`set (CMAKE_GENERATOR "Unix Makefiles" CACHE INTERNAL "" FORCE)`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-23T09:34:42.467

在我看来，`CMAKE_GENERATOR`如果在`CMakeLists.txt`. 如果您使用（即使在开头`CMakeLists.txt`）

```
set(CMAKE_GENERATOR "Ninja")
message("generator is set to ${CMAKE_GENERATOR}") 
```

你可以在输出中看到类似

```
% cmake ../source
-- The C compiler identification is GNU 4.9.2
...
-- Detecting CXX compile features - done
generator is set to Ninja
-- Configuring done
-- Generating done
-- Build files have been written to: /tmp/build 
```

因此，该变量仅在生成过程的最后设置。如果你使用类似的东西

```
set(CMAKE_GENERATOR "Ninja" CACHE INTERNAL "" FORCE) 
```

in `CMakeLists.txt`，然后在第一次运行`cmake ../source`（不带`-G`）时使用*默认*生成器。不过，该变量`CMAKE_GENERATOR`存储在缓存中。因此，如果您`cmake ../source`之后重新运行，它将使用`CMAKE_GENERATOR`缓存中变量中指定的生成器。

不过，这肯定不是最优雅的解决方案；-) 也许使用一个批处理文件来实际`cmake -G generator`为用户执行...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T10:21:38.860

这不是我得到的，当我运行相同的命令时，cmake 将寻找 gcc 编译器/make 实用程序。如果 PATH 设置不正确，它将失败，如下所示：

```
D:\Development\build>cmake -G "Unix Makefiles" ..\source
CMake 错误：CMake 无法找到与“Unix Makefiles”对应的构建程序。CMAKE_MAKE_PROGRAM 未设置。
  您可能需要选择不同的构建工具。
CMake 错误：错误需要内部 CMake 变量未设置，cmake 可能未正确构建。
缺少的变量是：
CMAKE_C_COMPILER_ENV_VAR
CMake 错误：错误需要内部 CMake 变量未设置，cmake 可能未正确构建。
缺少的变量是：
CMAKE_C_COMPILER
CMake 错误：找不到 cmake 模块文件：D:/Development/build/CMakeFiles/CMakeCCompiler.cmake
CMake 错误：错误需要内部 CMake 变量未设置，cmake 可能未正确构建。
缺少的变量是：
CMAKE_CXX_COMPILER_ENV_VAR
CMake 错误：错误需要内部 CMake 变量未设置，cmake 可能未正确构建。
缺少的变量是：
CMAKE_CXX_COMPILER
CMake 错误：找不到 cmake 模块文件：D:/Development/build/CMakeFiles/CMakeCXXCompiler.cmake
CMake 错误：在 EnableLanguage 之后未设置 CMAKE_C_COMPILER
CMake 错误：在 EnableLanguage 之后未设置 CMAKE_CXX_COMPILER
-- 配置不完整，出现错误！

```

当 gcc / mingw 在路径中时，一切正常。那么您能否提供有关您的 PATH 变量或 CMAKE 版本的更多信息？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-18T11:03:44.003

您需要在 Generate 阶段设置生成器，以便将其写入缓存。第一次配置只需要运行一次此命令

> cmake .. -DCMAKE_GENERATOR:INTERNAL=Ninja

这会将 Ninja 配置为默认生成器。

稍后您可以简单地运行

> 制作..

它会默认使用 Ninja 生成器

[您可以在从命令行运行 CMake](https://cmake.org/runningcmake/)下阅读有关它的更多信息

> 从命令行运行 cmake 时，可以为 cmake 指定将在缓存中设置值的命令行选项。这是通过命令行上的 -DVARIABLE:TYPE=VALUE 语法完成的。这对于非交互式夜间测试构建很有用。

# c++ - 从函数返回一个字符串

> ID：11269837
> 
> 赞同：3
> 
> 时间：2012-06-29T22:42:16.097
> 
> 标签：c++, string, c++11, return-value, move-semantics

我想编写一个跨平台的函数（win32 和 linux），并返回日期时间的字符串表示 [hh:mm:ss dd-mm-yyyy]。

知道我只想以流方式将返回的字符串用作临时字符串，如下所示：

```
std::cout << DateTime() << std::endl; 
```

我考虑用以下原型编写一个函数

```
const char* DateTime(); 
```

如果您返回一个字符数组，则必须在完成后将其删除。但我只想要一个临时的，我不想担心取消分配字符串。

所以我写了一个只返回一个 std::string 的函数：

```
#include <ctime>
#include <string>
#include <sstream>

std::string DateTime()
{
    using namespace std;

    stringstream ss;
    string sValue;
    time_t t = time(0);
    struct tm * now = localtime(&t);

    ss << now->tm_hour << ":";
    ss << now->tm_min << ":";
    ss << now->tm_sec << " ";
    ss << now->tm_mday + 1 << " ";
    ss << now->tm_mon + 1 << " ";
    ss << now->tm_year + 1900;

    sValue = ss.str();

    return sValue;
} 
```

我意识到我正在返回 DateTime 中的堆栈变量的副本。这是低效的，因为我们在 DateTime 堆栈上创建字符串，填充它，然后返回一个副本并销毁堆栈上的副本。

c++11 移动语义革命是否已经解决了这种低效率问题——我可以对此进行改进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T01:12:32.793

lapin，您的代码是很好的 C++11 代码。在 C++98/03中，由于编译器优化，您的代码*可能会很高效，但不能保证这些优化。*在 C++11 中，这些相同的优化可能仍会使您的返回免费，但万一他们不这样做，您的字符串将被移动而不是复制。

因此，按价值回报无罪！:-)

小尼特：

最佳实践是在第一次使用时声明您的值，而不是在块的顶部：

```
string sValue = ss.str();
return sValue; 
```

或者甚至：

```
return ss.str(); 
```

但这只是一个小问题。你的代码很好*而且*很高效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T08:35:02.587

另一种方法是使其成为带有流插入器的函数对象，如下所示：

```
struct DateTime()
{
    friend std::ostream& operator<<(std::ostream& os, DateTime)
    {
        time_t t = time(0);
        struct tm * now = localtime(&t);

        os << now->tm_hour << ":";
        os << now->tm_min << ":";
        os << now->tm_sec << " ";
        os << now->tm_mday + 1 << " ";
        os << now->tm_mon + 1 << " ";
        os << now->tm_year + 1900;

        return os;
    }

    // Could be converted to a static method,
    //  since DateTime has no internal state
    std::string str() const
    {
        // the following 3 lines can be replaced by
        //  return boost::lexical_cast<std::string>(*this);
        std::ostringstream ss;
        ss << *this;
        return ss.str();
    }

    operator std::string() const
    { return str(); }
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T23:51:48.997

在没有 RVO/NRVO 的世界中，这应该避免在 C++11 之前的标准库中进行复制构造。在带有用于字符串的移动构造函数的 C++11 后库中，它仍然避免调用移动构造函数；这可能只是一个微不足道的差异，但 OP 仍然在询问如何做得更好。

（是的，我同意从字符串继承是丑陋的，但它确实有效。）

```
#include <ctime>
#include <string>
#include <sstream>
#include <iostream>

using namespace std;

class DateString : public string {

public:
DateString() : string()     {

    stringstream ss;
    time_t t = time(0);
    struct tm * now = localtime(&t);

    ss << now->tm_hour << ":";
    ss << now->tm_min << ":";
    ss << now->tm_sec << " ";
    ss << now->tm_mday + 1 << " ";
    ss << now->tm_mon + 1 << " ";
    ss << now->tm_year + 1900;

    append(ss.str());

}
};

int main()
{
    cout << DateString() << endl;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T01:16:01.687

好的，我知道这不是线程安全的，而且我可能会被否决到地狱结束，但我在我正在使用的库中看到了以下内容（CERN 的根）：

```
const char * myfunc(){

  static std::string mystr;

  /*populate mystr */

  return mystr.c_str();
} 
```

这只有在你知道没有人会愚蠢到抓住指针的情况下才有效。

这是一种无论如何都不会泄漏的临时方法。

# javascript - jquery动态添加html字段遇到神秘问题

> ID：11269841
> 
> 赞同：0
> 
> 时间：2012-06-29T22:42:45.193
> 
> 标签：javascript, jquery, html

我正在使用 jquery 根据用户的选择复制几个 html 字段。然而，我遇到了一个有趣的问题。一般来说，我要求用户选择他们想要的应用程序数量：

1.  如果只有一个应用程序： a. 需要选择应用方法（为简单起见，仅提供“空中”）；湾。选择“空中”后，它会要求您提供更多信息，化学应用方法（CAM）。

2.  如果他们选择了两个应用程序，jquery 代码将为您克隆和重命名必要的问题。

我的问题是当我选择有两个应用程序时，子问题“CAM”不会出现。经过一些故障排除后，我发现问题可能出在这个 javascript : `$('.app_method:last').find('select').change(function()`。该语句自动将我的循环索引增加一（谁能告诉我为什么会发生这种情况？），这与代码不匹配。

这是我的代码的[演示：](http://jsfiddle.net/godhong/uYbgG/34/)

下面是我的html代码：

```
<div class="articles">
        <table align="center">

        <tr><th><label for="id_NOA">Number of applications:</label></th><td><select name="NOA" id="id_NOA">
            <option value="1" selected="selected">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select></td></tr>

        <tr><th><label for="id_Ap_m">Application method 1</label></th><td><select name="Ap_m" id="id_Ap_m">
            <option value="" selected="selected">Select an application method</option>
            <option value="1">Aerial</option>
        </select></td></tr>

        <tr><th><label for="id_CAM_1">Chemical application Method (CAM) 1</label></th><td><select name="CAM_1" id="id_CAM_1">
            <option value="2">2-Interception based on crop canopy</option>
            <option value="9">9-Linear foliar based on crop canop</option>
        </select></td></tr>
        </table>
 </div> 
```

​ jquery代码：

```
$(document).ready(function() {

    //this part of code controls inputs when there is only one application
    $('#id_CAM_1').attr('id', 'id_1').closest('tr').addClass('method_options').hide();
    $('#id_Ap_m').change(function() {
        $('tr.method_options').hide();
        if ($(this).val() == "1") {
            $('#id_' + $(this).val()).closest('tr').show();
        }
    });

    i = 1;
    $('.articles').find('table').addClass('table');
    $('#id_Ap_m').closest('tr').addClass('app_method');

    $('#id_NOA').change(function() {
        var total = $(this).val();

        //remove all
        $('.app_method').each(function(index) {
            if (index != 0) $(this).remove()
        });

        //create new ones
        for (var i = 2; i <= total; i++) {
            alert('a=' + i);

            $('.app_method:first').clone().appendTo('.table').find('label').text('Application method ' + i);
            $('.app_method:last').find('select').attr('name', 'Ap_m' + i).attr('id', 'id_Ap_m' + i);
            alert('b=' + i);

            $('<tr class="method_options_1' + i + '" style="display: none;"><th><label for="id_CAM_1">Chemical application Method (CAM)' + i + '</label></th><td><select name="CAM_1_' + i + '" id="id_1_' + i + '"><option value="2">2-Interception based on crop canopy</option><option value="9">9-Linear foliar based on crop canop</option></select></td></tr>').appendTo('.table');
            alert('c=' + i);

//The following statement increase the loop index by one, which causes me problems. Can    
//anyone let me know why this could happen?
            $('.app_method:last').find('select').change(function() {
                alert('d=' + i)
                $('.method_options_1').hide();
                alert('e=' + i);

                if ($(this).val() == "1") {
                    alert('e=' + i);
                    $('.method_options_1' + i).show();
                }
            })
        }
    })
})​ 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:14:27.807

我认为这可以更简单地完成：（小提琴：http: [//jsfiddle.net/QaHWz/](http://jsfiddle.net/QaHWz/)）

```
<!DOCTYPE html><html><head></head><body>

<table align="center"><tbody>
    <tr><th></th><td><a href="#" id="add_application">Add Application</a></td></tr>
</tbody></table>

<table id="template" style="display:none"><tbody>
    <tr>
        <th><label for="id_Ap_m_{n}">Application method {n}</label></th>
        <td>
            <select class="Ap_m" name="Ap_m_{n}" id="id_Ap_m_{n}" data-application="{n}">
                <option value="" selected="selected">Select an application method</option>
                <option value="1">Aerial</option>
            </select>
        </td></tr>
    <tr style="display:none" class="app_{n} method_1"><th><label for="id_CAM_{n}">Chemical Application Method (CAM) {n}</label></th><td><select name="CAM_{n}" id="id_CAM_{n}">
        <option value="2">2-Interception based on crop canopy</option>
        <option value="9">9-Linear foliar based on crop canopy</option>
    </select></td></tr>
</tbody></table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
jQuery(function($) {
    var applications = 0;
    $('#add_application').click(function() {
        applications++;
        var last_row = $(this).closest('tr');
        last_row.before(jQuery('#template tbody').html().replace(/{n}/g, applications));
    });
    $(document).delegate('.Ap_m', 'change', function() {
        var app = $(this).data('application');
        $('.app_'+app).hide();
        $('.app_'+app+'.method_'+this.value).show();
    });
});
</script>
</body></html> 
```

**编辑：**您遇到的问题`.change()`是您正在使用`i`变量 ，该变量在函数运行之前会递增。您需要以另一种方式将 的*值*`i`放入函数中。这是一种可能的方法：

```
$('.app_method:last').find('select').bind('change', { row: i }, function(event) {
    var i = event.data.row;
    alert('d=' + i)
    // ...
}); 
```

该`{ row: i }`位使 jQuery 将此数据附加到传递给函数的事件对象。然后我`var i`在函数范围内创建，不受`i`外界影响，并将这个值赋给它。

# ruby-on-rails - 主干路由器通配非主干路由

> ID：11269843
> 
> 赞同：2
> 
> 时间：2012-06-29T22:43:31.687
> 
> 标签：ruby-on-rails, backbone.js, backbone-routing

我正在使用设计，带骨干的导轨。我所有的主干路由都工作得很好。但是像 /accounts/login 这样应该由 rails 渲染的非骨干路由正在与骨干路由器一起使用。

```
SS.Routers.ApplicationRouter = Backbone.Router.extend({
  initialize: function() {
    this.el = $("#content");
  },

  routes: {
    "": "home"
  },

  "home": function () {
    console.debug("Got home request");
    var view = new SS.Views.Home();
    this.el.empty().append(view.render());
  }
}); 
```

对 /accounts/login 的实际请求/响应来自 rails 日志。但是之后会触发 Backbone 主根目录并呈现我的主页。

我的布局有

```
 $(function () {
    SS.init();
  }); 
```

从

```
window.SS = {
  Models: {},
  Collections: {},
  Views: {Providers: {}},
  Routers: {},
  init: function (data) {
    console.debug("Initializing Backbone Components");
    new SS.Routers.ApplicationRouter();
    new SS.Routers.ProvidersRouter();
    if (!Backbone.history.started) {
      Backbone.history.start();
      Backbone.history.started = true;
    };
  }
}; 
```

这再次触发了我的家乡路线。

主干中的“”路由不应该是通配符 /accounts/login ，但它是。

一点调试告诉我 /accounts/login 正在被 "" 吞噬，因为该片段是一个空字符串。

在骨干路由不匹配的所有情况下，该片段都是一个空字符串。

来自骨干网 0.9.2 的代码

```
loadUrl: function(fragmentOverride) {
      var fragment = this.fragment = this.getFragment(fragmentOverride);
      var matched = _.any(this.handlers, function(handler) {
        if (handler.route.test(fragment)) {
          console.debug(handler);
          console.debug(fragment);
          handler.callback(fragment);
          return true;
        }
      });
      return matched;
    }, 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:08:52.793

将类 ('passThrough') 或 'data-passThrough=true' 属性添加到链接。在您的路由器中捕获此类/属性并返回 true，以便 Backbone 停止处理它并且浏览器将其视为常规链接。

# c# - 在 IEnumerable 中选择偶数/奇数元素 ?

> ID：11269847
> 
> 赞同：15
> 
> 时间：2012-06-29T22:44:11.233
> 
> 标签：c#, linq, .net-4.0, ienumerable

> **可能重复：**
> [使用 LINQ 获取序列的奇数/偶数部分](https://stackoverflow.com/questions/267033/getting-odd-even-part-of-a-sequence-with-linq)
> [如何从 List<T> 中获取每第 n 个项目？](https://stackoverflow.com/questions/682615/how-can-i-get-every-nth-item-from-a-listt)

我正在使用 HtmlAgilityPack 和 C# 来解析一些 HTML。

```
<div id="post-8266">
<div class="ruler"> </div>
<div id="post-8266">
<div class="ruler"> </div>
<div id="post-8266">
<div class="ruler"> </div>
<div id="post-8266">
<div class="ruler"> </div> 
```

基本上，我有这些元素，每个元素都在自己的对象中，在 IEnumerable 中。

有没有一种优雅的方式来获取集合中的每个 N/2 元素。意思是，用 class 跳过每个 div `.ruler`？

我需要遍历结果集，因此要么将每个找到的对象复制到一个新的 IEnumerable 中，要么只在 foreach 函数中内联使用它。

例如：

```
//Copying resulting set to new IEnumerable<T>:
var odds = elements.SelectOdds();

//Using it inline for my usage:
foreach (var x in elements.SelectOdds())
{   
} 
```

哪些选项是最好的，我怎样才能优雅地实现这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-29T22:46:18.487

```
var odds = sequence.Where((item, index) => index % 2 != 0);
var evens = sequence.Where((item, index) => index % 2 == 0); 
```

我唯一不喜欢这个解决方案的是，如果你需要赔率和偶数，它需要重复序列两次。如果由于某种原因你必须避免这种情况，你将不得不更加努力：

```
var groups = sequence.Select((item, index) => new { Item = item, Index = index })
                     .GroupBy(x => x.Index % 2 == 0)
                     .ToDictionary(g => g.Key, g => g); 
```

然后，赔率是`groups`where the `Key`is`false`的那些元素，而偶数是`groups`where the `Key`is的那些元素`true`：

```
var odds = groups[false];
var evens = groups[true]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T22:51:35.753

您可以为此目的定义自己的扩展方法：

```
public static class LinqExtensions
{
    public static IEnumerable<T> SelectOdds<T>(this IEnumerable<T> enumerable)
    {
        bool odd = false;

        foreach (var item in enumerable)
        {
            if (odd)
                yield return item;

            odd = !odd;
        }
    }
} 
```

# r - 使用ggplot从科学记数法转换为十进制

> ID：11269850
> 
> 赞同：6
> 
> 时间：2012-06-29T22:44:13.330
> 
> 标签：r, ggplot2, scientific-notation

我正在尝试`ggplot`使用以下命令绘制一些测试数据（显示在本文末尾）：

```
options(scipen=20)    
ggplot(testData,aes(x=Group.1, y=x), format(scientific=FALSE)) + 
scale_x_discrete(name="Test", formatter=comma) + geom_bar() 
```

该图生成得很好，但 x 轴是科学计数法（如测试数据中），我将如何以十进制显示它？（如命令所示，我已经尝试了 scipen 选项和各种格式化程序选项 - 正如本网站其他帖子中所建议的那样）

**我的测试数据：**

```
> str(testData)
'data.frame':   5 obs. of  2 variables:
$ Group.1: Factor w/ 5 levels "(1.3e+03,1.5e+03]",..: 1 2 3 4 5
$ x      : num  80000 94000 86000 112000 98000

> testData
            Group.1      x
1 (1.3e+03,1.5e+03]  80000
2 (1.5e+03,1.7e+03]  94000
3 (1.7e+03,1.9e+03]  86000
4 (1.9e+03,2.1e+03] 112000
5 (2.1e+03,2.3e+03]  98000

> dput(testData)
structure(list(Group.1 = structure(1:5, .Label = c("(1.3e+03,1.5e+03]", 
"(1.5e+03,1.7e+03]", "(1.7e+03,1.9e+03]", "(1.9e+03,2.1e+03]", 
"(2.1e+03,2.3e+03]"), class = "factor"), x = c(80000, 94000, 
86000, 112000, 98000)), .Names = c("Group.1", "x"), row.names = c(NA, 
-5L), class = "data.frame") 
```

*testData的生成：*

```
testData <- aggregate(as.numeric(as.character(housing7$PRICE)),
                      by=list(cut(as.numeric(as.character(housing7$SIZE)), 
                      breaks=5)), FUN=mean) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T22:59:56.943

一旦你的因子标签以科学记数法存储，就不容易回到正常记数法。

由于您曾经`cut`创建此因子，因此您可以使用参数更改标签中使用的位数`dig.lab`。例如：

```
testData <- aggregate(as.numeric(as.character(housing7$PRICE)),
by=list(cut(as.numeric(as.character(housing7$SIZE)), breaks=5,dig.lab=6)), FUN=mean) 
```

# android - 无法从意图获取图片网址

> ID：11269854
> 
> 赞同：1
> 
> 时间：2012-06-29T22:44:40.163
> 
> 标签：android, appcelerator

> **可能重复：**
> [在图像视图中显示来自意图的 jpg 图像](https://stackoverflow.com/questions/11590881/display-jpg-image-from-intent-in-imageview)

当我单击“共享”>我的应用程序时，我试图从图库中获取图像文件路径。如何捕捉我选择的图像的路径？

我在该部分之间的清单中添加了这个。

```
<intent-filter>
<action android:name="android.intent.action.SEND" />
<category android:name="android.intent.category.DEFAULT" />
<data android:mimeType="image/*" />
            <data android:mimeType="video/*" />
            <data android:mimeType="audio/*" />
            <data android:mimeType="application/pdf" />
            <data android:mimeType="application/postscript" />
            <data android:mimeType="application/zip" />
            <data android:mimeType="application/x-tar" />
            <data android:mimeType="application/msword" />
            <data android:mimeType="application/vnd.ms-excel" />
            <data android:mimeType="application/vnd.ms-powerpoint" />
            <data android:mimeType="application/vnd.oasis.opendocument.text" />
            <data android:mimeType="application/vnd.oasis.opendocument.presentation" />
            <data android:mimeType="application/vnd.oasis.opendocument.graphics" />
            <data android:mimeType="application/vnd.oasis.opendocument.image" />
            <data android:mimeType="application/vnd.oasis.opendocument.spreadsheet" />
            <data android:mimeType="application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
            <data android:mimeType="application/vnd.visio" />
            <data android:mimeType="application/x-debian-package" />
            <data android:mimeType="application/vnd.android.package-archive" />
            <data android:mimeType="text/csv" />
            <data android:mimeType="text/plain" />
            <data android:mimeType="text/rtf" />
                <data android:mimeType="image/*" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:43:48.360

清单似乎是正确的（`image/*`无论如何应该足够了），您可能在代码中做错了什么。看到[这个](https://stackoverflow.com/questions/11590881/display-jpg-image-from-intent-in-imageview)

# asp.net - 存储过程未从网页中获取参数

> ID：11269858
> 
> 赞同：1
> 
> 时间：2012-06-29T22:45:26.640
> 
> 标签：asp.net, sql

我正在努力让查询通过网络表单运行和显示结果。它使用参数将值传递到存储过程中，但是尽管设置了 @status 值，但它似乎没有被 sp 拾取，因此不返回任何结果。我的 Vb 非常有限，我怀疑这就是问题所在。

继承人的SQL：

```
ALTER proc [dbo].[get_status_times]

@status nvarchar
as

select project_code, activity_code, project_date, project_time from 
timesheet where status = @status 
```

和VB

```
Sub detailsClicked(ByVal sender As Object, ByVal e As DataGridCommandEventArgs) Handles listweekstatus.ItemCommand
    Dim wccolumn As TableCell = e.Item.Cells(0)
    '  Dim timeColumn As TableCell = e.Item.Cells(1)
    Dim statusColumn As TableCell = e.Item.Cells(2)
    ' Dim buttonColumn As TableCell = e.Item.Cells(3)

    Dim wccoltext As DateTime = wccolumn.Text
    ' Dim timeColText As String = timeColumn.Text
    Dim statusColText As String = statusColumn.Text
    ' Dim buttonColText As String = buttonColumn.Text

    Dim myConnection As New SqlConnection(ConfigurationManager.ConnectionStrings("chronosdb").ConnectionString)

    Const strSQL As String = "get_status_times"
    Dim myCommand As New SqlCommand(strSQL, myConnection)

    myCommand.CommandType = CommandType.StoredProcedure

    myCommand.Parameters.Add("@status", SqlDbType.NVarChar)
    myCommand.Parameters("@status").Value = statusColText
    myCommand.Parameters("@status").Direction = ParameterDirection.Input

    'Set the datagrid's datasource to the datareader and databind
    myConnection.Open()
    weekdetails.DataSource = myCommand.ExecuteReader(CommandBehavior.CloseConnection)
    weekdetails.DataBind()

End Sub 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:50:50.137

尝试在 proc 中更改参数声明：

```
@status nvarchar(200) --For example 
```

现有声明会将您的输入修剪为第一个字符：

例如下面的代码：

```
create proc paramtest (@param nvarchar)
as
begin
select @param
end
go

exec paramtest 'foobar' 
```

只选`f`

# java - 如何将字符串从 base 32 解码为 BigInteger

> ID：11269861
> 
> 赞同：1
> 
> 时间：2012-06-29T22:45:37.083
> 
> 标签：java, biginteger, base32

我尝试了以下代码：

```
import java.math.BigInteger;
import org.apache.commons.codec.binary.Base32;
import org.junit.Test;

public class Sandbox
{
  @Test
  public void testSomething() {
    String sInput = "GIYTINZUHAZTMNBX";

    BigInteger bb = new BigInteger(new Base32().decode(sInput));

    System.out.println("number = " + bb);
  }
} 
```

这是输出：

```
number = 237025977136523702055991 
```

使用[这个网站在 base 32 之间进行转换，](http://online-calculators.appspot.com/base32/)我得到的结果与实际输出不同。根据我从网站上得到的结果，这是我期望看到的结果：

```
expected output = 2147483647 
```

知道为什么会这样吗？

**编辑：**

请原谅我故意尝试转换 2^31-1 造成混淆。

使用我之前链接到的转换网站，我更改了输入：

```
String sInput = "GE4DE==="; 
```

预期输出：

```
number = 182 
```

实际输出：

```
number = 3225650 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:30:39.873

你所做的是正确**的......假设 Base32 字符串来自 Base32 编码的字节数组，你从调用** `BigInteger.toByteArray()`.

`BigInteger(byte[] val)` does not really take an array of arbitrary bytes. It takes the `byte[]` representation of a `BigInteger`. Also, it assumes the most-significant byte is in `val[0]`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:44:47.070

If it's base-32 the X, Y, and Z shouldn't be there. Are you sure it isn't base-36?

# python - 将计算值存储在数据存储中，或者只是即时计算

> ID：11269862
> 
> 赞同：0
> 
> 时间：2012-06-29T22:45:47.853
> 
> 标签：python, database, performance, google-app-engine, google-cloud-datastore

我用python为谷歌应用引擎编写了一个应用程序，每个用户都可以提交一个帖子，每个帖子都有一个由其投票和评论数决定的排名。排名只是基于这两个参数的简单计算。我想知道我应该将这个值存储在数据存储中（并在那里占用空间）还是只是在每次需要时简单地计算它。现在仅供参考，帖子将按排名排序，因此需要考虑在内。

我主要是出于效率考虑，并尝试平衡是否应该尝试保存数据存储空间或保存读/写配额。

我认为简单地存储它会更好，但是每次有人对帖子投票或评论时，我都需要重新计算和重写排名值。

任何输入都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:34:52.497

将排名作为属性存储在帖子中怎么样？这对查询/排序是有意义的，不是吗。

如果您在存储投票/评论计数的同时（意味着在同一实体中）存储排名，那么写入成本的唯一增加将是索引。（好的初始写入成本也是如此，但这就是 2 [无论如何非常小]）。

无论如何，每次有人对帖子投票或评论时，您都需要进行数据库操作！？！还有什么方法可以跟踪投票/评论？

但实际上，我想你会开始使用文本搜索来查找帖子中的数据。如果是这样，我会考虑将排名作为属性存储在搜索索引中，并使用它来对匹配结果进行排名。

我们不需要考虑您如何选择要显示的帖子。投票和评论排名是唯一的标准吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:52:34.140

当计算成本很高时，缓存最有用。如果计算简单又便宜，还不如根据需要重新计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T03:50:01.830

如果您依赖于在实体中保持运行中的投票计数，那么您要么必须愿意失去偶尔的投票，要么必须使用交易。如果您使用事务，则您每秒可以执行多少事务的速率受到限制。（请参阅有关交易和实体组的文档）。如果您有可能获得大量选票，则速率限制可能是个问题。

对于低投票率，在实体中保留计数可能会很好。但是，如果您的投票率出现任何显着峰值，存储单独的投票实体，这些实体会定期汇总到缓存计数中，可能会通过保存在 memcache 中的（可能不可靠的）增量计数进行调整，可能对您更有效。

这实际上取决于您要优化的内容。如果您试图通过以非事务方式缓存投票计数来最小化磁盘写入，则您可能会失去投票。

# javascript - 控制台中出现错误

> ID：11269871
> 
> 赞同：0
> 
> 时间：2012-06-29T22:46:16.880
> 
> 标签：javascript

我在错误控制台中收到一条错误消息：传递给 Function.prototype.apply 的参数数组太大，它所在的文件是：resource://ct2504091/BackStage.jsm。有谁知道为什么这个错误突然突然出现？

以下是错误出现位置的视图源代码：

```
var postBytes = stream.readByteArray(stream.available());
poststr = String.fromCharCode.apply(null, postBytes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:03:18.193

Google 搜索“javascript BackStage.jsm”显示：您似乎安装了“Bibirmer for Firefox Plugin”，它会干扰您的代码。尝试卸载它。

# c# - 委托.DynamicInvoke

> ID：11269876
> 
> 赞同：2
> 
> 时间：2012-06-29T22:46:51.420
> 
> 标签：c#, delegates, invoke

我想通过存储在列表中的方法名称调用该方法。任何人都可以帮忙吗？我是 C# 的新手！

```
{
   delegate string ConvertsIntToString(int i);
}

class Program
{
    public static List<String> states = new List<string>() { "dfd","HiThere"};
    static void Main(string[] args)
    {
        ConvertsIntToString someMethod = new ConvertsIntToString(states[1]);
        string message = someMethod(5);
        Console.WriteLine(message);
        Console.ReadKey();
    }
    private static string HiThere(int i)
    {
        return "Hi there! #" + (i * 100);
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:53:21.950

看起来您根本不需要`Delegate.DynamicInvoke`-您不是在尝试动态*调用*它-您正在尝试动态*创建*委托，您可以使用[`Delegate.CreateDelegate`](http://msdn.microsoft.com/en-us/library/system.delegate.createdelegate.aspx). 基于您的示例的简短但完整的程序（但不使用列表 - 这里不需要）：

```
using System;
using System.Reflection;

delegate string ConvertsIntToString(int i);

class Program
{
    static void Main(string[] args)
    {
        // Obviously this can come from elsewhere
        string name = "HiThere";

        var method = typeof(Program).GetMethod(name, 
                                               BindingFlags.Static | 
                                               BindingFlags.NonPublic);
        var del = (ConvertsIntToString) Delegate.CreateDelegate
            (typeof(ConvertsIntToString), method);

        string result = del(5);
        Console.WriteLine(result);
    }

    private static string HiThere(int i)
    {
        return "Hi there! #" + (i * 100);
    }
 } 
```

显然，如果你想要的方法是不同的类型，或者是实例方法，或者是公共的，你需要调整它。

# plot - Gnuplot 自动缩放的最小和最大边界

> ID：11269877
> 
> 赞同：14
> 
> 时间：2012-06-29T22:46:51.823
> 
> 标签：plot, gnuplot, scaling, autoscaling

如何限制 gnuplot 的自动缩放，以便以 y-max 为例，它至少是一个特定值，并且它会自动缩放到固定的“限制”？

通过查看文档，我只看到如何修复轴的最小或最大端，而另一个是自动缩放的。

[关于 PDF 第 93 页上的自动缩放](http://www.gnuplot.info/docs_4.4/gnuplot.pdf)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-11T11:36:16.800

自 4.6 版以来，gnuplot 提供了一种新语法来指定自动缩放的上限和下限。对于您的情况，您可以使用

```
set xrange [0:100 < * < 1000] 
```

从文档中引用：

执行自动缩放的范围可能受到下限`<lb>`或上限`<ub>`或两者的限制。语法是

```
{ <lb> < } * { < <ub> } 
```

例如

```
0 < * < 200 
```

集`<lb> = 0`和`<ub> = 200`。

该语法可以应用于 的最小值或最大值`set *range`。

要自动缩放`xmin`但保持积极，请使用

```
set xrange [0<*:] 
```

要自动缩放`x`但保持 10 到 50 的最小范围：

```
set xrange [*<10:50<*] 
```

有关更多信息，请参阅有关文档`set xrange`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T23:27:42.243

我认为这是不可能的，要么您在 no-、min- 或 max- 上进行自动缩放，要么在两个轴上进行自动缩放，即：

```
set yrange [FIXED_MIN : FIXED_MAX]
set yrange [        * : FIXED_MAX]
set yrange [FIXED_MIN :         *]
set yrange [        * :          ] 
```

分别。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T17:27:43.037

在这种情况下，您可以过滤数据并让 gnuplot 进行正常的自动缩放：

```
set yrange [*:*]
plot 'mydatafile' u 1:(($2 >= YMIN && $2 <= YMAX) ? $2 : 1/0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T07:23:30.163

由于人们似乎对这个问题感兴趣，我将添加我解决这个问题的方式作为答案：

我通过在数据的开头插入一个不可见的标记来最小化自动缩放。这导致情节总是“显示”它，即使它看不到。

然后我在用于为 gnuplot 准备数据的解析器脚本中实现了 gnuplot 之外的最大值（可能在其中也有可能，看看**mgilson 的答案）。**

实际上，在脚本中，我将所有“剪掉”的值添加到 y=0 中，并将它们设为红色。这样我得到一个“警告”，值太大而无法绘制图表。（我的程序监视两个主机之间的 ping，尝试绘制 5s+ 延迟是没有意义的 => 我将其标记为连接断开）

# entity-framework - EF CodeFirst 在保存更改的同时处理数据库异常

> ID：11269881
> 
> 赞同：5
> 
> 时间：2012-06-29T22:47:40.110
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

由于 EF 不支持唯一键约束，看来我们需要在 Save 方法期间捕获异常，并向用户显示错误消息。

这种方法的问题是：

*   我们如何知道哪条记录引发了异常
*   我们怎么知道什么样的问题引发了异常（例如，我可以在同一记录上有两个唯一的约束，所以我需要告诉用户哪个被破坏了）

DBMS 是 SqlServer 2008。

如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:09:21.333

如果您允许用户可以输入在数据库中必须唯一的值，您应该在保存更改之前验证此输入：

```
if (context.Customers.Any(c => c.SomeUniqueProperty == userInput))
    // return to user with a message to change the input value
else
    context.SaveChanges(); 
```

这不仅适用于数据库中具有唯一约束的值，也适用于输入必须引用现有目标记录或主键值的外键值（如果数据库中未自动生成主键）。EF 在后一种情况下对您没有帮助，因为上下文不知道整个数据库表的内容，而只知道当前附加到上下文的实体。确实，EF 将禁止附加具有相同主键的两个对象，但允许具有相同唯一键约束的两个对象。但是，当您将更改保存到数据库时，这并不能完全防止您违反主键约束。

在不太可能的情况下，`Any`检查和`SaveChanges`另一个用户输入了具有相同值的记录，我会认为发生的异常是无法处理的，只是告诉用户“发生了预期的错误，请重试......”。如果用户再次尝试`Any`检查，他将获得更有用的消息来更改上面代码中的输入值。

此类唯一键约束或主键约束违规返回的异常是一般`DbUpdateException`异常，其中一个内部异常将`SqlException`包含 SQL Server 错误代码作为其属性之一。任何其他详细信息只能在异常消息“*违反 UNIQUE KEY 约束 IX_SomeUniqueProperty_Index...* ”或类似消息中找到。如果您希望用户能够理解并对此信息做出相应的反应，您可以显示它。否则，您可以记录此消息以供管理员或开发人员检查可能存在的错误或其他问题。

# django - 寻找 django“原型”（“博客”、“论坛”、“问题跟踪器”、“维基”等）

> ID：11269883
> 
> 赞同：1
> 
> 时间：2012-06-29T22:47:49.173
> 
> 标签：django

我对Web开发不太了解，所以这个问题可能听起来非常无知......

无论如何，我从 Django 开始。我认为到目前为止，“规范”网站类型必须有相当标准的 Django 模式，例如，“博客”、“论坛”、“商店”、“维基”、“问题跟踪器”等。即，现成的，“基本”实现（使用 Django），只需少量定制，就足以满足大多数需要此类网站的用户的需求。

我的意思是，例如，大多数论坛可以通过在“规范的”基于*Django*的论坛中自定义相对少量的参数来实现。对于其他网站“类型”（“博客”、“问题跟踪器”等）也是如此。

（我想将这些原型称为“网站模板”，但在这种情况下，“模板”一词已被使用。但实际上，这就是我要谈论的全部内容：整个基于 Django 的实现的“模板”各种网站“类型”。）

> 有这样的“Django 原型”集合吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:25:08.010

恕我直言

[http://www.djangopackages.com/](http://www.djangopackages.com/)作为包的“主要”位置

和

[https://docs.djangoproject.com/en/dev/misc/design-philosophies/](https://docs.djangoproject.com/en/dev/misc/design-philosophies/)作为 django 开发人员的主要理念

并且不想考虑像“模板”这样的任何代码块。

阅读一些代码，从中获得灵感，然后编写自己的代码。尽量避免复制粘贴策略:)

不要忘记 python pep

# python - 在外部 python 脚本中设置 sys 变量

> ID：11269884
> 
> 赞同：1
> 
> 时间：2012-06-29T22:47:53.090
> 
> 标签：python

我有一个在 cron 作业上运行的 python 脚本。该脚本使用相关门户网站的 django ORM 进行 db 调用。但是，我很难从命令行运行脚本。在脚本的顶部，我有：

```
import sys
sys.path.append('/Users/david542/Desktop/project/')
from project.home.models import Title, Order 
```

当我尝试运行脚本时：

```
 File "/Library/Python/2.7/site-packages/django/utils/functional.py", line 184, in inner
self._setup()
  File "/Library/Python/2.7/site-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable 
DJANGO_SETTINGS_MODULE is undefined 
```

看来我需要`DJANGO_SETTINGS_MODULE`在我的 python 脚本中设置路径，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:27:21.610

假设您的项目设置在 /Users/david542/Desktop/project/my_settings.py 中，您需要将 DJANGO_SETTINGS_MODULE 设置为 'my_settings' 以让 Django 知道它在哪里。

要设置变量，只需使用调用您的脚本

```
DJANGO_SETTINGS_MODULE=my_settings python /path/to/your/script.py 
```

另外，我建议您不要在脚本中硬编码项目的路径，而是使用 PYTHONPATH 环境变量传递它，如下所示：

```
PYTHONPATH="/Users/david542/Desktop/project" DJANGO_SETTINGS_MODULE=my_settings python /path/to/your/script.py 
```

干杯，

西蒙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:27:08.827

将 django 应用程序放入`sys.path`，然后设置 django 设置环境，请参阅此处了解更多详细信息：[为什么我需要设置 DJANGO_SETTINGS_MODULE？](https://stackoverflow.com/questions/2102330/why-do-i-need-the-django-settings-module-set#2102365).

```
import sys
sys.path.append('/Users/david542/Desktop/project/')
from django.core.management import setup_environ
from project import settings
setup_environ(settings)
from project.home.models import Title, Order 
```

# c++ - Microsoft C++ 异常：fl::i18n::MwLcDataNotFound？

> ID：11269887
> 
> 赞同：0
> 
> 时间：2012-06-29T22:48:17.363
> 
> 标签：c++, visual-studio-2010, visual-c++

在运行我的应用程序时，当我启动我的应用程序时（在我的第一行代码被执行之前），我得到大约 100 行

```
First-chance exception at 0x759bb9bc in myApp.exe: Microsoft C++ exception: fl::i18n::MwLcDataNotFound at memory location 0x00cce9e4..
First-chance exception at 0x759bb9bc in myApp.exe: Microsoft C++ exception: fl::i18n::MwLcDataNotFound at memory location 0x00cce9e4..
First-chance exception at 0x759bb9bc in myApp.exe: Microsoft C++ exception: fl::i18n::MwLcDataNotFound at memory location 0x00ccea6c.. 
```

在 Visual Studio 输出窗口中。我以前从未见过这个，我完全不知道它来自哪里。谷歌不会吐出一个结果。有谁知道这可能来自哪里或我怎么能找到？

我在 VS2010 中使用 CMake，我的应用程序使用 opencv、boost_program_options 和 matlab libmat/libmx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:07:23.633

它是 MATLAB 的一部分。这意味着 MATLAB 库找不到 ICU 数据文件。这是一个不严重的问题。

# c++ - 如何在 C++ 中执行缓存操作？

> ID：11269890
> 
> 赞同：-4
> 
> 时间：2012-06-29T22:48:43.243
> 
> 标签：c++, linux, unix

我想在刷新缓存后运行我的 C++ 程序，在运行我的程序之前我不知道缓存中有什么。在 Ubuntu 上的 C++ 中是否有其他方式可以在运行程序之前刷新我的缓存。

编辑：刷新缓存的动机是......每次我运行我的程序时，我都不希望我现在的数据结构存在于缓存中......我的意思是我想要一个冷缓存......所有访问由磁盘制成。

实现这一点的一种方法是重新启动计算机......但考虑到我必须运行的实验数量，这对我来说是不可行的。那么，任何人都可以指导我如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:20:08.937

您无需从用户模式（非内核模式）程序中刷新缓存。操作系统（Linux，在 ubuntu 的情况下）为您的应用程序提供了一个全新的虚拟地址空间，没有来自其他程序的“剩余东西”。如果不执行特殊的操作系统系统调用，您的程序甚至无法访问用于其他应用程序的内存。因此，从缓存的角度来看，您的应用程序从一个全新的开始，就它而言。有 cacheflush() 系统调用（语法因操作系统而异），但除非您为典型的用户模式应用程序做一些不寻常的事情，否则您可能会忘记缓存甚至存在；它只是为了加速你的程序，操作系统通过 CPU 的 MMU 管理它，你的应用程序不需要管理它。

您可能还听说过“内存泄漏”（分配给您的应用程序而您的应用程序忘记释放/删除的内存，一旦您的应用程序忘记它就会“永远丢失”）。如果您正在编写（可能）长时间运行的程序，内存泄漏绝对是一个问题。但是泄漏的内存只是泄漏它的应用程序的问题。在现代虚拟内存环境中，如果应用程序 A 泄漏内存，它不会影响应用程序 B。当应用程序 A 退出时，操作系统会清除其虚拟地址空间，并且此时任何泄漏的内存都会被系统回收，并且不会更长的时间消耗任何系统资源。在许多情况下，程序员特别选择不释放/删除内存分配，知道操作系统会在应用程序退出时自动回收全部内存量。该策略没有任何问题，只要程序不重复执行此操作，耗尽其虚拟地址空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T16:44:36.393

这是一个常见的问题。

首先，您必须了解缓存永远不会真正为空，就像寄存器永远不会真正为空一样，它始终存在，并且始终具有值。短语“刷新缓存”实际上是指将缓存内容写入内存，也称为内存屏障。见[https://en.wikipedia.org/wiki/Memory_barrier](https://en.wikipedia.org/wiki/Memory_barrier)

这不是您的问题，因此您使用了错误的术语。

您真正想要的是用错误的值填充缓存。这比听起来要难，因为您正在与通常是您朋友的所有优化作斗争。Memcpy'ing 大块内存（几 MB - 考虑到今天缓存的大小）应该正常工作。
但是...
您还拥有文件​​缓存和其他东西，这些东西会给您的应用程序带来不公平的优势。这可能是一个非常复杂的主题，它本身就是一个小项目。

# unix - 使用 grep 查找包含字符串的文件

> ID：11269891
> 
> 赞同：1
> 
> 时间：2012-06-29T22:48:46.083
> 
> 标签：unix

我的 htdocs 文件夹中的 .htaccess 文件不起作用。我在访问文件名时尝试重定向到 Google。我想找出我的 httpd.conf 的设置在哪里，所以我可以启用 mod_rewrite。我执行了以下 UNIX 命令来确定我的硬盘上是否存在 httpd.conf 文件：

```
find * -name "httpd.conf" 
```

该文件不存在。我在想也许还有另一个文件可以控制 mod_rewrite。我想查看任何目录中是否存在“AllowOverride”。我输入了以下 UNIX 命令：

```
grep -r "AllowOverride" * 
```

但它很难阅读，因为它会打印出很多文件夹。文件夹附带的消息是“权限被拒绝”或“没有这样的文件或目录”。如何仅获取包含 AllowOverride 的文件的文件路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T22:56:33.903

许多 Unix 和类似系统提供了一个`locate(1)`使用数据库来加速查找单个文件的命令。尝试这个：

```
locate httpd.conf 
```

当然，请注意，Apache 配置存储在各种名称的文件中；我见过`apache.conf`, `httpd.conf`, `httpd2.conf`, 然后是一大堆`/etc/apache2/conf.d/`——为配置 Apache 预留的整个目录结构。您的分布可能会有所不同。

也许[`apachectl configtest`](http://httpd.apache.org/docs/2.2/configuring.html)会显示路径？（目前没有安装在我的机器上，所以我不能轻易测试。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T22:52:15.943

试试这个命令：

```
 find / -name "httpd.conf" 2>1 | grep -v "Permission denied" 
```

`2>1`漏斗，`stderr`以便`stdout`两者都可以通过管道传输到[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)实用程序中。`grep`反过来将打印其中没有字符串“Permission denied”的任何行（`-v`否定/反转搜索字符串的匹配）

如果您不重定向`stderr`到`stdout`，则`stderr`到控制台的输出将绕过命令行的其余部分。

您可以通过*附加以下内容来**扩展*上述命令行：

 *```
| grep -v "No such file or directory" 
```

如果该字符串出现并且您也想抑制它。

这将告诉您[有关 io 重定向的所有信息](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)。这是一个很好的[快速总结](http://www.cyberciti.biz/faq/redirecting-stderr-to-stdout/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:09:20.743

使用以下内容：

```
 find / -type f -exec grep -n "AllowOverride" {} \; -print 2>/dev/null 
```

要从根目录扫描包含“AllowOverride”字符串的文件，如果要在特定目录中运行搜索，请改用以下命令：

```
 find /path/to/directory -type f -exec grep -n "AllowOverride" {} \; -print 2>/dev/null 
```

输出应该只打印包含指定字符串的文件以及匹配行的编号*

# entity-framework - 列名无效

> ID：11269892
> 
> 赞同：3
> 
> 时间：2012-06-29T22:48:50.663
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我得到一个可能很容易解决的常见错误，但我不知道如何解决。这是我得到的信息。

列名无效。[节点名称（如果有）= Extent1，列名称= Blog_BlogId]

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详细信息：** System.Data.SqlServerCe.SqlCeException：列名无效。[节点名称（如果有）= Extent1，列名称= Blog_BlogId]

这是代表我的实体的类：

```
public class BlogContext : DbContext
{
    public BlogContext()
        : base("SqlCeServices")
    {

    }

    public DbSet<User> Users { get; set; }

    public DbSet<Blog> Blogs { get; set; }

    public DbSet<Post> Posts { get; set; }

    public DbSet<Category> Categories { get; set; }

    public DbSet<Tag> Tags { get; set; }
}

[Table("aspnet_Users")]
public class User
{
    [Required]
    public Guid ApplicationId { get; set; }

    [Required]
    public Guid UserId { get; set; }

    [Required]
    public string UserName { get; set; }

    [Required]
    public string LoweredUserName { get; set; }

    public string MobileAlias { get; set; }

    [Required]
    public bool IsAnonymous { get; set; }

    [Required]
    public DateTime LastActivityDate { get; set; }
}

public class Blog
{
    [Key]
    public int BlogId { get; set; }

    [Required]
    public string Name { get; set; }
    public string Url { get; set; }
    public int Rating { get; set; }

    public virtual ICollection<User> Editors { get; set; }

    public virtual ICollection<Post> Posts { get; set; }
}

public class Post
{
    [Key]
    public int PostId { get; set; }
    [Required, MaxLength(200)]
    public string Title { get; set; }
    public string Content { get; set; }
    public string Abstract { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime DateLastEdited { get; set; }

    public virtual User UserId { get; set; }

    public virtual ICollection<Category> Categories { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }

    public virtual Blog BlogId { get; set; }
}

public class Category
{
    [Key]
    public int CategoryId { get; set; }
    [Required, MaxLength(200)]
    public string Title { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Post> Posts { get; set; }

    public virtual Category ParentCategory { get; set; }

    public virtual Blog BlogId { get; set; }
}

public class Tag
{
    [Key]
    public int TagId { get; set; }
    [Required, MaxLength(200)]
    public string Title { get; set; }

    public virtual Blog BlogId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:04:49.520

考虑更改您的 Post 类，以便 BlogId 将 FK 引用到关联的 Blog 而不是 Blog 对象本身。添加一个新属性 Blog 以引用实际的 Blog 对象。

```
public class Post
{
    [Key]
    public int PostId { get; set; }
    [Required, MaxLength(200)]
    public string Title { get; set; }
    public string Content { get; set; }
    public string Abstract { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime DateLastEdited { get; set; }

    public virtual User UserId { get; set; }

    public virtual ICollection<Category> Categories { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }

    public virtual int BlogId { get; set; }
    public virtual Blog Blog { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-15T18:50:06.437

你可以试试... **ForeignKey**注解

公共虚拟 int BlogId { 获取；放; }

**[ForeignKey("BlogId")]** public virtual Blog Blog { get; 放; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T05:25:33.110

从数据库中分离连接，删除与应用程序相关的任何应用程序数据并重建并重试，它对我有用。

# emacs - Emacs 指导如何设置日期/时间格式

> ID：11269897
> 
> 赞同：4
> 
> 时间：2012-06-29T22:48:59.087
> 
> 标签：emacs, dired

现在 dired 以以下格式写入上次访问日期/时间：

```
Jun 20 14:22 
```

如何让它写：

```
20.06.2012 14:22 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T23:52:13.090

这些选项之一：

## 1 可以设置合适的变量。

> ```
>  (setq ls-lisp-format-time-list  '("%d.%m.%Y %H:%M" "%d.%m.%Y %H:%M")
>       ls-lisp-use-localized-time-format t) 
> ```

![在此处输入图像描述](../Images/ca646e2b8915cdb251d197a7cc9c7e44.png)

解释：`ls-lisp-format-time-list`是两个格式字符串的列表，它们与`format-time-string`函数一样工作。有两个，因为默认情况下，emacs 设置为显示具有比“旧”文件更高分辨率时间戳的“最近”文件，其中最近与较旧的阈值是 6 个月（我认为）。第一个是用于最近文件的格式；后者适用于旧文件。

我从不喜欢默认行为；我只是希望文件以相同的方式显示。所以我将列表设置为对新旧文件使用相同的时间格式。

## 2 您可以重新定义功能`ls-lisp-format-time`。

例如，如果我这样做：

```
(defun ls-lisp-format-time (file-attr time-index now)
  "################") 
```

然后 dired 看起来像这样：

![在此处输入图像描述](../Images/be0e1e630ba57d21e88f4266e3049214.png)

该函数的原始定义在 ls-lisp.el 中。

# wpf - 在 Visual Studio 2010 中锁定 WPF 设计器

> ID：11269898
> 
> 赞同：0
> 
> 时间：2012-06-29T22:49:14.073
> 
> 标签：wpf, visual-studio, designer

这是一个非常奇怪的情况。我有一个带有许多用户控件的应用程序，现在由于某种原因，当我进入 Visual Studio 中的可视化设计器并尝试编辑控件时，我被锁定了，我可以单击控件但没有任何反应。我可以进入 Expression Blend 并进行编辑，但不能使用 Visual Studio。这完全是随机的，因为一些用户控件是可编辑的，而另一些则不是。

有没有人遇到过这个问题，有解决办法吗？

谢谢。

# c# - javascript Dev Express 中的 Window[] 函数

> ID：11269899
> 
> 赞同：1
> 
> 时间：2012-06-29T22:49:36.220
> 
> 标签：c#, asp.net, devexpress

我正在使用 DevExpress 组件在 C# 中编写仪表板应用程序。我正在尝试动态创建一个圆形仪表，并使用回调函数更新仪表值。在此处的 DevExpress 示例中：

[http://demos.devexpress.com/ASPxGaugesDemos/Gauges/CircularGauge.aspx](http://demos.devexpress.com/ASPxGaugesDemos/Gauges/CircularGauge.aspx)

他们展示了如何更新在设计时已经添加到表单中的仪表。他们样本中的一个调用有 var gague = window[gaugeName]

当我调用此函数时，值会返回 undefiend：

```
function PerformCallbackCore(gaugeName) {

var gauge = window[gaugeName];
m_isDirty = gauge.InCallback();
if (!m_isDirty)
    gauge.PerformCallback();
} 
```

有谁可能知道为什么我无法检索仪表值？

谢谢 - 拉里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:07:49.917

这是由于仪表演示中的**错误代码**。是的，我使用（并支付）DX；我可以这么说。

代码`setTimeout`与字符串一起使用（这里够坏了！）并传入分配给控件的窗口属性的“名称” `ClientInstanceName`（如果使用的名称与此不匹配，则代码将不起作用）。由于 Gauge1 ... GaugeN 具有不同的“代理”功能，演示代码更加混乱/丑陋。

现在，我*怀疑*未`ClientInstanceName`使用或未在某处传递正确的名称，因此`window[aPropertyName]`评估为未定义，但是..

..编写它的更好方法是直接使用/传递对象，而不是依赖人为的“客户端名称”/窗口属性。请参阅 [ASPxClientGaugeControl](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxGaugesScriptsASPxClientGaugeControltopic)（并按照[相应处理程序](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxClassesScriptsASPxClientEndCallbackEventHandlertopic)的链接）并考虑这一点：

```
<ClientSideEvents EndCallback="onEndGaugeCallback" /> 
```

使用单个统一回调（并且明显缺乏“客户端名称”和无用的代理方法）：

```
function onEndGaugeCallback (s, e) {
   // "s" is for Sender; it evaluates to the appropriate [Gauge] control
   // or rename it to "gauge" or whatever :-)
} 
```

快乐编码！

# php - Zend 找不到我的映射器类

> ID：11269901
> 
> 赞同：0
> 
> 时间：2012-06-29T22:49:43.010
> 
> 标签：php, zend-framework

我正在使用模块，结构如下：

```
-application
    -modules
        -affaire
            -controllers
                -ProfileController.php
            -models
                -Affaire.php
                -AffaireMapper.php 
```

问题出在 ProfileController 的索引操作中，当我调用时：

```
$affaireMapper = new Affaire_Model_AffaireMapper(); 
```

我得到的错误是 Affaire_Model_AffaireMapper not found on ... 好吧，你知道演习：P 我怀疑这是因为我的模块名称是用小写字母写的。我还在 AffaireMapper.php 中仔细检查了我的班级名称，以确保它没有输入错误。顺便说一句，这个名字是 Affaire_Model_AffaireMapper！

如果是因为我怀疑，有什么办法可以让我的小写名字“事务”？我希望它是小写的，所以我的；就像：“somthing.com/affaire/profile”。无论如何，我是 Zend 的新手，所以它可能（或者它是：P）一个新手错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:46:50.773

找到了解决方案，我忘记了模块的 bootstrap.php 文件和 application.ini 中的变量 ressources.modules[] = ""。当我意识到它只发生在模块内的模型上时，我能够找到一个主题：[zend modules models](https://stackoverflow.com/questions/1836447/zend-modules-models)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T20:52:11.163

linux服务器切掉类名，生成类文件的patch，在这种情况下，这样做：

> $affaireMapper = 新事务模型_AffaireMapper();

将类重命名为：

> 事务模型_事务映射器

# javascript - JavaScript 是对象还是函数

> ID：11269903
> 
> 赞同：2
> 
> 时间：2012-06-29T22:50:07.327
> 
> 标签：javascript, object

我有这个代码：

```
var obj = function (i) {
   this.a = i;
   this.init = function () {
       var _this = this;
       setTimeout(function () {
           alert(_this.a + ' :: ' + typeof _this);
       }, 0);
   };
   this.init();
};

obj('1');
obj('2');
obj('3');
new obj('4');​​​ 
```

[http://jsfiddle.net/kbWJd/](http://jsfiddle.net/kbWJd/)

该脚本警告 '3 :: object' 3 次和 '4 :: object' 一次。

我知道这是为什么。这是因为`new obj('4')`创建了一个具有自己内存空间的新实例，并且之前的调用共享它们的内存空间。在代码中`obj`如何确定我是新对象还是函数时，因为`typeof _this`只是说“对象”？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:54:54.883

这是你要找的吗？如果您在函数内执行没有`new`关键字`this`的函数，则等于包含对象（`window`在这种情况下）。

```
if( this === window ){
    console.log('not an object instance');
} else {
    console.log('object instance');
} 
```

具有不同包含对象的示例：

```
var obj = {

    method: function(){

        if( this === obj ){
            alert('function was not used to create an object instance');
        } else {
            alert('function was used to create an object instance');
        }

    }

};

obj.method(); // this === obj

new obj.method(); // this === newly created object instance 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:03:31.937

该`instanceof`运算符可用于另一种解决方案：

```
var foo = function() {
    if (this instanceof foo) {
        // new operator has been used (most likely)
    } else {
        // ...
    }
}; 
```

# c# - XML 树到平面文本行的通用转换

> ID：11269911
> 
> 赞同：1
> 
> 时间：2012-06-29T22:50:54.260
> 
> 标签：c#, xml, xslt

[此问题的](https://stackoverflow.com/questions/11268937/xml-xsl-c-transforming-repeating-group-into-several-text-lines)解决方案将示例 XML 树硬编码转换为平面分隔的文本文件：

```
string orderXml = 
@"<?xml version='1.0' encoding='utf-8'?>
<Order id='79223510'>
<Status>new</Status>
<ShipMethod>Standard International</ShipMethod>
<ToCity>Tokyo</ToCity>
<Items>
    <Item>
    <SKU>SKU-1234567890</SKU>
    <Quantity>1</Quantity>
    <Price>99.95</Price>
    </Item>
    <Item>
    <SKU>SKU-1234567899</SKU>
    <Quantity>1</Quantity>
    <Price>199.95</Price>
    </Item>
</Items>
</Order>";

StringReader str = new StringReader(orderXml);

var xslt = new XmlTextReader(new StringReader(

    @"<xsl:stylesheet version='1.0' 
    xmlns:xsl='http://www.w3.org/1999/XSL/Transform'>

    <xsl:output method='text' indent='no' media-type='text/plain' />
    <xsl:variable name='newline'><xsl:text>&#13;&#10;</xsl:text></xsl:variable>
    <xsl:variable name='delimiter'>|</xsl:variable>

    <!-- by default, don't copy any nodes to output -->
    <xsl:template match='node()|@*'>
        <xsl:apply-templates select='node()|@*'/>
    </xsl:template>

    <xsl:template match='/Order/Items/Item'>
    <xsl:value-of
        select='concat(
        ../../@id, $delimiter,
        ../../Status, $delimiter,
        ../../ShipMethod, $delimiter,
        ../../ToCity, $delimiter,
        SKU, $delimiter,
        Quantity, $delimiter,
        Price,
        $newline)'
        />
    </xsl:template>
    </xsl:stylesheet>"

                ));

var xDoc = new XPathDocument(str);
var xTr = new System.Xml.Xsl.XslCompiledTransform();
xTr.Load(xslt);

StringBuilder sb = new StringBuilder();
StringWriter writer = new StringWriter(sb);
xTr.Transform(xDoc, null, writer);

string[] lines = sb.ToString().Split(new string[] {"\n"}, StringSplitOptions.RemoveEmptyEntries);    

lines.ToList().ForEach(System.Console.Write); 
```

产生如下输出：

```
79223510|new|Standard International|Tokyo|SKU-1234567890|1|99.95
79223510|new|Standard International|Tokyo|SKU-1234567899|1|199.95 
```

有没有办法使用通用 XSL 转换遍历源 XML 树并将父节点和属性值连接到子节点来产生相同的输出？

笔记：

1.  如果节点有任何属性，则该节点将没有要连接的值。

2.  如果一个节点有多个属性，那么它们的值应该使用斜杠字符连接。

3.  真正的通用解决方案应该能够工作并扁平化具有两个以上层次结构的 XML 树。

这是另一个带有两个属性的附加父节点的示例文档：

```
<Order id='79223510'>
<Status>new</Status>
<ShipMethod>Standard International</ShipMethod>
<ToCity>Tokyo</ToCity>
<Marketplace id="123-45678-9089808" name="MyBooks" />
<Items>
    <Item>
    <SKU>SKU-1234567890</SKU>
    <Quantity>1</Quantity>
    <Price>99.95</Price>
    </Item>
    <Item>
    <SKU>SKU-1234567899</SKU>
    <Quantity>1</Quantity>
    <Price>199.95</Price>
    </Item>
</Items>
</Order> 
```

这是所需的分隔平面文本文件输出：

```
79223510|new|Standard International|Tokyo|123-45678-908980/MyBooks|SKU-1234567890|1|99.95
79223510|new|Standard International|Tokyo|123-45678-908980/MyBooks|SKU-1234567899|1|199.95 
```

* * *

[Dimitre Novatchev](https://stackoverflow.com/users/36305/dimitre-novatchev)的解决方案在这里适用于原始示例文档和具有更高级别节点层次结构的 XML 文档。

```
 string orderXml = 
//      @"<?xml version='1.0' encoding='utf-8'?>
//      <Order id='79223510'>
//      <Status>new</Status>
//      <ShipMethod>Standard International</ShipMethod>
//      <ToCity>Tokyo</ToCity>
//      <Marketplace id='123-45678-9089808' name='MyBooks'/>
//      <Items>
//          <Item>
//          <SKU>SKU-1234567890</SKU>
//          <Quantity>1</Quantity>
//          <Price>99.95</Price>
//          </Item>
//          <Item>
//          <SKU>SKU-1234567899</SKU>
//          <Quantity>1</Quantity>
//          <Price>199.95</Price>
//          </Item>
//      </Items>
//      </Order>";

@"<?xml version='1.0' encoding='utf-8'?>
<Order id='79223510'>
    <Status>new</Status>
    <ShipMethod>Standard International</ShipMethod>
    <ToCity>Tokyo</ToCity>
    <Marketplace id=""123-45678-9089808"" name=""MyBooks"" />
    <Items>
        <Item>
        <X>
            <SKU>SKU-1234567890</SKU>
            <Quantity>1</Quantity>
            <Price>99.95</Price>
        </X>
        <X>
            <SKU>SKU-1234554321</SKU>
            <Quantity>1</Quantity>
            <Price>199.95</Price>
        </X>
        </Item>
        <Item>
        <Y>
            <SKU>SKU-0987654321</SKU>
            <Quantity>1</Quantity>
            <Price>299.95</Price>
        </Y>
        <Y>
            <SKU>SKU-0987667890</SKU>
            <Quantity>1</Quantity>
            <Price>399.95</Price>
        </Y>
        </Item>
    </Items>
</Order>";

StringReader str = new StringReader(orderXml);

var xslt = new XmlTextReader(new StringReader(   
    @"<xsl:stylesheet version='1.0'
        xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
        xmlns:ext='http://exslt.org/common'>
    <xsl:output method='text'/>
    <xsl:strip-space elements='*'/>

        <xsl:param name='pLeafNodes' select=
        '//*[not(*[*])
            and
            (
            name() = name(following-sibling::*[1])
            or
            name() = name(preceding-sibling::*[1])
            )
            ]'/>

        <xsl:template match='/'>
        <xsl:variable name='vrtfPass1'>
            <t>
                <xsl:call-template name='StructRepro'/>
            </t>
        </xsl:variable>

        <xsl:apply-templates mode='pass2'
            select='ext:node-set($vrtfPass1)/*/*' />
        </xsl:template>

    <xsl:template match='Order' mode='pass2'>
    <xsl:apply-templates select='.//@* | .//text()' mode='pass2'/>
    <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <xsl:template match='@*|text()' mode='pass2'>
    <xsl:if test='not(position()=1) and not(self::text())'>/</xsl:if>
    <xsl:if test='not(position()=1) and self::text()'>|</xsl:if>
    <xsl:value-of select='.'/>
    </xsl:template>

        <xsl:template name='StructRepro'>
        <xsl:param name='pLeaves' select='$pLeafNodes'/>

        <xsl:for-each select='$pLeaves'>
            <xsl:apply-templates mode='build' select='/*'>
            <xsl:with-param name='pChild' select='.'/>
            <xsl:with-param name='pLeaves' select='$pLeaves'/>
            </xsl:apply-templates>
        </xsl:for-each>
        </xsl:template>

        <xsl:template mode='build' match='node()|@*'>
            <xsl:param name='pChild'/>
            <xsl:param name='pLeaves'/>

            <xsl:copy>
            <xsl:apply-templates mode='build' select='@*'/>

            <xsl:variable name='vLeafChild' select=
                '*[count(.|$pChild) = count($pChild)]'/>

            <xsl:choose>
                <xsl:when test='$vLeafChild'>
                <xsl:apply-templates mode='build'
                    select='$vLeafChild
                            |
                            node()[not(count(.|$pLeaves) = count($pLeaves))]'>
                    <xsl:with-param name='pChild' select='$pChild'/>
                    <xsl:with-param name='pLeaves' select='$pLeaves'/>
                </xsl:apply-templates>
                </xsl:when>
                <xsl:otherwise>
                <xsl:apply-templates mode='build' select=
                'node()[not(.//*[count(.|$pLeaves) = count($pLeaves)])
                        or
                        .//*[count(.|$pChild) = count($pChild)]
                        ]
                '>

                    <xsl:with-param name='pChild' select='$pChild'/>
                    <xsl:with-param name='pLeaves' select='$pLeaves'/>
                </xsl:apply-templates>
                        </xsl:otherwise>
                    </xsl:choose>
                    </xsl:copy>
                </xsl:template>
                <xsl:template match='text()'/>
            </xsl:stylesheet>"
                ));

//
// White space cannot be stripped from input documents that have already been loaded. 
// Provide the input document as an XmlReader instead. 
//+
//var xDoc = new XPathDocument(str);
XmlReaderSettings settings;
settings = new XmlReaderSettings();
settings.ConformanceLevel = ConformanceLevel.Document;
var xDoc = XmlReader.Create(str, settings);
//-

var xTr = new System.Xml.Xsl.XslCompiledTransform();
xTr.Load(xslt);

StringBuilder sb = new StringBuilder();
StringWriter writer = new StringWriter(sb);
xTr.Transform(xDoc, null, writer);

string[] lines = sb.ToString().Split(new string[] {"\n"}, StringSplitOptions.RemoveEmptyEntries);    

lines.ToList().ForEach(System.Console.Write);     

//  test output 1
//  79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234567890|1|99.95
//  79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234567899|1|199.95

// test output 2
//  79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234567890|1|99.95
//  79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234554321|1|199.95
//  79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-0987654321|1|299.95
//  79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-0987667890|1|399.95 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:16:10.970

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
     <xsl:output method="text"/>
     <xsl:strip-space elements="*"/>

     <xsl:param name="pLeafNodes" select=
     "//*[not(*[*])
        and
         (
          name() = name(following-sibling::*[1])
         or
          name() = name(preceding-sibling::*[1])
          )
         ]"/>

     <xsl:template match="/">
      <xsl:variable name="vrtfPass1">
          <t>
            <xsl:call-template name="StructRepro"/>
          </t>
      </xsl:variable>

      <xsl:apply-templates mode="pass2"
         select="ext:node-set($vrtfPass1)/*/*" />
     </xsl:template>

 <xsl:template match="Order" mode="pass2">
  <xsl:apply-templates select=".//@* | .//text()" mode="pass2"/>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>

 <xsl:template match="@*|text()" mode="pass2">
  <xsl:if test="not(position()=1) and not(self::text())">/</xsl:if>
  <xsl:if test="not(position()=1) and self::text()">|</xsl:if>
  <xsl:value-of select="."/>
 </xsl:template>

     <xsl:template name="StructRepro">
       <xsl:param name="pLeaves" select="$pLeafNodes"/>

       <xsl:for-each select="$pLeaves">
         <xsl:apply-templates mode="build" select="/*">
          <xsl:with-param name="pChild" select="."/>
          <xsl:with-param name="pLeaves" select="$pLeaves"/>
         </xsl:apply-templates>
       </xsl:for-each>
     </xsl:template>

      <xsl:template mode="build" match="node()|@*">
          <xsl:param name="pChild"/>
          <xsl:param name="pLeaves"/>

         <xsl:copy>
           <xsl:apply-templates mode="build" select="@*"/>

           <xsl:variable name="vLeafChild" select=
             "*[count(.|$pChild) = count($pChild)]"/>

           <xsl:choose>
            <xsl:when test="$vLeafChild">
             <xsl:apply-templates mode="build"
                 select="$vLeafChild
                        |
                          node()[not(count(.|$pLeaves) = count($pLeaves))]">
                 <xsl:with-param name="pChild" select="$pChild"/>
                 <xsl:with-param name="pLeaves" select="$pLeaves"/>
             </xsl:apply-templates>
            </xsl:when>
            <xsl:otherwise>
             <xsl:apply-templates mode="build" select=
             "node()[not(.//*[count(.|$pLeaves) = count($pLeaves)])
                    or
                     .//*[count(.|$pChild) = count($pChild)]
                    ]
             ">

                 <xsl:with-param name="pChild" select="$pChild"/>
                 <xsl:with-param name="pLeaves" select="$pLeaves"/>
             </xsl:apply-templates>
            </xsl:otherwise>
           </xsl:choose>
         </xsl:copy>
     </xsl:template>
     <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Order id='79223510'>
    <Status>new</Status>
    <ShipMethod>Standard International</ShipMethod>
    <ToCity>Tokyo</ToCity>
    <Marketplace id="123-45678-9089808" name="MyBooks" />
    <Items>
        <Item>
            <SKU>SKU-1234567890</SKU>
            <Quantity>1</Quantity>
            <Price>99.95</Price>
        </Item>
        <Item>
            <SKU>SKU-1234567899</SKU>
            <Quantity>1</Quantity>
            <Price>199.95</Price>
        </Item>
    </Items>
</Order> 
```

**产生想要的正确结果：**

```
79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234567890|1|99.95
79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234567899|1|199.95 
```

**这是一个更复杂的 XML 文档，它是我根据提供的文档创建的**：

```
<Order id='79223510'>
    <Status>new</Status>
    <ShipMethod>Standard International</ShipMethod>
    <ToCity>Tokyo</ToCity>
    <Marketplace id="123-45678-9089808" name="MyBooks" />
    <Items>
        <Item>
         <X>
            <SKU>SKU-1234567890</SKU>
            <Quantity>1</Quantity>
            <Price>99.95</Price>
         </X>
         <X>
            <SKU>SKU-1234554321</SKU>
            <Quantity>1</Quantity>
            <Price>199.95</Price>
         </X>
        </Item>
        <Item>
         <Y>
            <SKU>SKU-0987654321</SKU>
            <Quantity>1</Quantity>
            <Price>299.95</Price>
         </Y>
         <Y>
            <SKU>SKU-0987667890</SKU>
            <Quantity>1</Quantity>
            <Price>399.95</Price>
         </Y>
        </Item>
    </Items>
</Order> 
```

**当在第二个文档上应用相同的转换时，再次产生所需的正确结果**：

```
79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234567890|1|99.95
79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-1234554321|1|199.95
79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-0987654321|1|299.95
79223510|new|Standard International|Tokyo/123-45678-9089808/MyBooks|SKU-0987667890|1|399.95 
```

**说明**：

1.  这是一个两遍转换。

2.  第一遍将源 XML 文档转换为碎文件。**[使用此答案](https://stackoverflow.com/a/8597577/36305)**中通用粉碎的解决方案。这里最重要的是正确指定切碎的“叶子”节点。这些是任何元素节点： 1) 没有自己有子元素的子元素；2) 其名称与其紧邻的前一个兄弟元素的名称相同，或者与其紧随其后的兄弟元素的名称相同。

**中间结果是**：

```
<t>
   <Order id="79223510">
      <Status>new</Status>
      <ShipMethod>Standard International</ShipMethod>
      <ToCity>Tokyo</ToCity>
      <Marketplace id="123-45678-9089808" name="MyBooks"/>
      <Items>
         <Item>
            <X>
               <SKU>SKU-1234567890</SKU>
               <Quantity>1</Quantity>
               <Price>99.95</Price>
            </X>
         </Item>
      </Items>
   </Order>
   <Order id="79223510">
      <Status>new</Status>
      <ShipMethod>Standard International</ShipMethod>
      <ToCity>Tokyo</ToCity>
      <Marketplace id="123-45678-9089808" name="MyBooks"/>
      <Items>
         <Item>
            <X>
               <SKU>SKU-1234554321</SKU>
               <Quantity>1</Quantity>
               <Price>199.95</Price>
            </X>
         </Item>
      </Items>
   </Order>
   <Order id="79223510">
      <Status>new</Status>
      <ShipMethod>Standard International</ShipMethod>
      <ToCity>Tokyo</ToCity>
      <Marketplace id="123-45678-9089808" name="MyBooks"/>
      <Items>
         <Item>
            <Y>
               <SKU>SKU-0987654321</SKU>
               <Quantity>1</Quantity>
               <Price>299.95</Price>
            </Y>
         </Item>
      </Items>
   </Order>
   <Order id="79223510">
      <Status>new</Status>
      <ShipMethod>Standard International</ShipMethod>
      <ToCity>Tokyo</ToCity>
      <Marketplace id="123-45678-9089808" name="MyBooks"/>
      <Items>
         <Item>
            <Y>
               <SKU>SKU-0987667890</SKU>
               <Quantity>1</Quantity>
               <Price>399.95</Price>
            </Y>
         </Item>
      </Items>
   </Order>
</t> 
```

.3\. 第二遍处理中间结果顶部元素的子元素——处理在模式“pass2”中完成。

这个第二遍处理相当简单——所有后代属性或后代文本节点都按文档顺序处理，并且它们的值使用与节点类型对应的分隔符输出（'|' 用于文本节点，'/' 用于属性）。

# android - 使用 ExifInterface 旋转 jpeg 有时不起作用

> ID：11269914
> 
> 赞同：3
> 
> 时间：2012-06-29T22:51:20.450
> 
> 标签：android, rotation, jpeg

嗨，这是我旋转 jpeg 图像的方式：

```
private static boolean rotateJpg(String filepath, int degrees) {
    // get current rotation degree
    int iCurRotation = getExifOrientation(filepath);

    // create exif
    ExifInterface exif = null;

    try {
    exif = new ExifInterface(filepath);
} catch (IOException ex) {
    return false;
}

// Calculate new rotation degree
int iNewRotation = iCurRotation + degrees;

try {
    iNewRotation %= 360;
    if (iNewRotation < 0) iNewRotation += 360;

    int orientation = ExifInterface.ORIENTATION_NORMAL;
    switch (iNewRotation) {
    case 0:
        orientation = ExifInterface.ORIENTATION_NORMAL;
        break;
    case 90:
        orientation = ExifInterface.ORIENTATION_ROTATE_90;
        break;
    case 180:
        orientation = ExifInterface.ORIENTATION_ROTATE_180;
        break;
    case 270:
        orientation = ExifInterface.ORIENTATION_ROTATE_270;
        break;
    }

    // save new rotation degree
    if (exif != null) {
        exif.setAttribute(ExifInterface.TAG_ORIENTATION, Integer.toString(orientation));
        exif.saveAttributes();
    }
} catch (Exception ex) {
    return false;
}
return true;

} 
```

上面的代码有效。但是，我有时会得到：

```
06-29 18:28:35.780: E/JHEAD(28163): Can't write back - didn't read all 
```

我查了一下它是什么，发现是 external/jhead/jpgfile.c 抛出了错误：

```
// Command line parsing code
static const char * progname;   // program name for error messages

//--------------------------------------------------------------------------
// Parse the marker stream until SOS or EOI is seen;
//--------------------------------------------------------------------------
static int ReadJpegSections (FILE * infile,ReadMode_t ReadMode)
{
    int a;
    int HaveCom = FALSE;

    a = fgetc(infile);

    if (a != 0xff || fgetc(infile) != M_SOI){
        return FALSE;
    }
    for(;SectionsRead < MAX_SECTIONS-1;){
        int itemlen;
        int marker = 0;
        int ll,lh, got;
        uchar * Data;

        for (a=0;a<7;a++){
            marker = fgetc(infile);
            if (marker != 0xff) break;

            if (a >= 6){

                printf("too many padding bytes\n");

                return FALSE;

            }
        }

        if (marker == 0xff){
            // 0xff is legal padding, but if we get that many, something's wrong.
            ErrExit("too many padding bytes!");
        }

        Sections[SectionsRead].Type = marker;

        // Read the length of the section.
        lh = fgetc(infile);
        ll = fgetc(infile);

        itemlen = (lh << 8) | ll;

        if (itemlen < 2){
            ErrExit("invalid marker");
        }

        Sections[SectionsRead].Size = itemlen;

        Data = (uchar *)malloc(itemlen+1); // Add 1 to allow sticking a 0 at the end.
        if (Data == NULL){
            ErrExit("Could not allocate memory");
        }
        Sections[SectionsRead].Data = Data;

        // Store first two pre-read bytes.
        Data[0] = (uchar)lh;
        Data[1] = (uchar)ll;

        got = fread(Data+2, 1, itemlen-2, infile); // Read the whole section.
        if (got != itemlen-2){
            ErrExit("reading from file");
        }
        SectionsRead += 1;

        //printf("Marker '%x' size %d\n",marker, itemlen);
        switch(marker){

            case M_SOS:   // stop before hitting compressed data 
                // If reading entire image is requested, read the rest of the data.
                if (ReadMode & READ_IMAGE){
                    int cp, ep, size;
                    // Determine how much file is left.
                    cp = ftell(infile);
                    fseek(infile, 0, SEEK_END);
                    ep = ftell(infile);
                    fseek(infile, cp, SEEK_SET);

                    size = ep-cp;
                    Data = (uchar *)malloc(size);
                    if (Data == NULL){
                        ErrExit("could not allocate data for entire image");
                    }

                    got = fread(Data, 1, size, infile);
                    if (got != size){
                        ErrExit("could not read the rest of the image");
                    }

                    Sections[SectionsRead].Data = Data;
                    Sections[SectionsRead].Size = size;
                    Sections[SectionsRead].Type = PSEUDO_IMAGE_MARKER;
                    SectionsRead ++;
                    HaveAll = 1;
                }
                return TRUE;

            case M_EOI:   // in case it's a tables-only JPEG stream
                printf("No image in jpeg!\n");
                return FALSE;

            case M_COM: // Comment section
                if (HaveCom || ((ReadMode & READ_EXIF) == 0)){
                    // Discard this section.
                    free(Sections[--SectionsRead].Data);
                }else{
                    process_COM(Data, itemlen);
                    HaveCom = TRUE;
                }
                break;

            case M_JFIF:
                // Regular jpegs always have this tag, exif images have the exif
                // marker instead, althogh ACDsee will write images with both markers.
                // this program will re-create this marker on absence of exif marker.

                free(Sections[--SectionsRead].Data);
                break;

            case M_EXIF:

                if (SectionsRead <= 2){
                    // Seen files from some 'U-lead' software with Vivitar scanner
                    // that uses marker 31 later in the file (no clue what for!)
                    process_EXIF((char *)Data, itemlen);
                }else{
                    // Discard this section.
                    free(Sections[--SectionsRead].Data);
                }
                break;

            case M_SOF0: 
            case M_SOF1: 
            case M_SOF2: 
            case M_SOF3: 
            case M_SOF5: 
            case M_SOF6: 
            case M_SOF7: 
            case M_SOF9: 
            case M_SOF10:
            case M_SOF11:
            case M_SOF13:
            case M_SOF14:
            case M_SOF15:
                process_SOFn(Data, marker);
                break;
            default:
                // Skip any other unknown sections.
                if (ShowTags){
                    printf("Unknown Jpeg section marker 0x%02x size %d\n",marker, itemlen);
                }
                break;
        }
    }
    return TRUE;
}

//--------------------------------------------------------------------------
// Discard read data.
//--------------------------------------------------------------------------
void DiscardData(void)
{
    int a;
    for (a=0;a<SectionsRead;a++){
        free(Sections[a].Data);
    }
    memset(&ImageInfo, 0, sizeof(ImageInfo));
    SectionsRead = 0;
    HaveAll = 0;
}

//--------------------------------------------------------------------------
// Read image data.
//--------------------------------------------------------------------------
int ReadJpegFile(const char * FileName, ReadMode_t ReadMode)
{
    FILE * infile;
    int ret;

    infile = fopen(FileName, "rb"); // Unix ignores 'b', windows needs it.

    if (infile == NULL) {
        fprintf(stderr, "%s: can't open '%s'\n", progname, FileName);
        return FALSE;
    }

    // Scan the JPEG headers.
    ret = ReadJpegSections(infile, ReadMode);
    if (!ret){
        printf("Not JPEG: %s\n",FileName);
    }

    fclose(infile);

    if (ret == FALSE){
        DiscardData();
    }
    return ret;
}

//--------------------------------------------------------------------------
// Write image data back to disk.
//--------------------------------------------------------------------------
void WriteJpegFile(const char * FileName)
{
    FILE * outfile;
    int a;

    if (!HaveAll){
        ErrExit("Can't write back - didn't read all");
    }

    outfile = fopen(FileName,"wb");
    if (outfile == NULL){
        ErrExit("Could not open file for write");
    }

    // Initial static jpeg marker.
    fputc(0xff,outfile);
    fputc(0xd8,outfile);

    if (Sections[0].Type != M_EXIF && Sections[0].Type != M_JFIF){
        // The image must start with an exif or jfif marker.  If we threw those away, create one.
        static uchar JfifHead[18] = {
            0xff, M_JFIF,
            0x00, 0x10, 'J' , 'F' , 'I' , 'F' , 0x00, 0x01, 
            0x01, 0x01, 0x01, 0x2C, 0x01, 0x2C, 0x00, 0x00 
        };
        fwrite(JfifHead, 18, 1, outfile);
    }

    // Write all the misc sections
    for (a=0;a<SectionsRead-1;a++){
        fputc(0xff,outfile);
        fputc(Sections[a].Type, outfile);
        fwrite(Sections[a].Data, Sections[a].Size, 1, outfile);
    }

    // Write the remaining image data.
    fwrite(Sections[a].Data, Sections[a].Size, 1, outfile);

    fclose(outfile);
} 
```

我在线上遇到上述错误：

```
exif.saveAttributes(); 
```

得到这个错误是非常不一致的。此外，它甚至无法在 try/catch(Exception) 上捕获。我该如何解决？

提前致谢。

# c - 为什么我不能声明 unsigned char* test = "Some text"

> ID：11269925
> 
> 赞同：5
> 
> 时间：2012-06-29T22:52:38.050
> 
> 标签：c, visual-studio-2010, embedded

这在 Visual Studio 2010 中不起作用，它给了我以下错误

```
void main (void)
{
     unsigned char* test = "ATGST"; 

} 
```

**编辑 1：**我的问题是为什么这适用于嵌入式系统，但不适用于 PC？

[![在此处输入图像描述](../Images/2034ac390561b427077ad09dbcfad005.png)](https://i.stack.imgur.com/YJg7i.png)

但是当我将其更改为：

```
 char* test = "ATGST"; 
```

有用。

我使用 C 为嵌入式系统编写代码的主要内容，并且我使用 Visual Studio 来测试一些功能，因此我不必在微控制器上实时测试它。

我需要一个解释，因为微控制器接受第一个代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T23:05:30.920

**编辑以符合 C++ 标记的删除并安抚嵌入的标记。**

首先，手头的问题是，您试图将`char[]`文字传递给`unsigned char*`. 您不能真正将 char 与`unsigned`or等​​同`signed`起来，在这方面它有点特别。此外，字符串文字被赋予唯一的存储空间，并且永远不应该被修改。如果您正在处理字符，则需要使用可以衰减到的*标准* `char*`。`char[]`你可以强行施放它，但我不喜欢推荐这样的东西。正如评论之一指出的那样，这样做是安全的。实际上，它实际上是真正安全的稀有事物之一。

但是对于 reinterpret_casting 提供足够的限定条件的严格答案的空间太小了，这基本上是在告诉编译器你知道你在做什么。这可能非常危险，只有在您对手头的问题非常确定时才应该这样做。char 通常只是通用的，甚至没有签名或未签名。由于 unsigned char 的范围比 char 更大，并且通常 char 使用有符号 char 的正子集来描述字符（或任何其他可以适合的数据），如果您的数据不在扩展的正范围内，您重新出发。但是，一定要安全地符合环境和代码。

## 关于入口点功能 - 符合编辑

由于已经确定您在嵌入式系统上工作，这意味着您的程序很可能不需要返回任何内容，因此它可以保留`void main()`（也可能是它需要给定嵌入式系统指定的非常不同的返回，OP 最了解他的系统所施加的要求）。在很多情况下，你可以保持 void 的原因是因为没有环境/操作系统可以安抚，没有人可以交流。但是嵌入式系统也可能非常专业，最好通过详细研究给定平台来满足所施加的要求（如果有的话）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T23:00:30.670

一方面，你需要一个`const`在那里。其次，`char`!=`unsigned char`和（唯一的） != `signed char`。

字符串字面量是`const char[N]`适当大小的类型`N`，因此只能转换为`const char*`. 请注意，该语言有一个特殊规则，允许您隐式删除，`const` *但修改字符串文字仍然是 UB*，因此这样做是一个非常糟糕的主意。

微控制器的 C 实现在这方面是不合格的。最好简单地使用`const char*`，这是正确的，而不是试图破解 VS 接受不正确的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T05:29:00.633

我相信这是将字符串分配给 unsigned char * 的情况。

好吧，当你分配一个字符串值时，它会分配与字符相关的 ASCII 值，所以你应该使用 char * 代替 unsigned char *。

如果您想分配字符串、字符以外的值，那么您的实现是正确的。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T06:25:41.983

> 我的问题是为什么这适用于嵌入式系统，但不适用于 PC？

很可能是因为您不小心在 C++ 中编译 PC 代码，它的类型检查比 C 更严格。在 C 中，无论您使用 unsigned char 还是 plain char，代码都可以编译得很好。

但是，正如其他答案中所建议的那样，您的代码存在一些问题需要修复。如果代码需要同时在嵌入式和 Windows 上运行，则应将其重写为：

```
#ifdef _WIN32
int main (void)
#else
void main (void)
#endif
{
  const unsigned char* test = "ATGST"; 

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T22:55:12.143

如果您对文本使用字符类型，请使用非限定字符。

如果您将字符类型用作数字，请使用无符号字符。unsigned char，它至少为您提供 0 到 255 的范围。

欲了解更多信息：[什么是无符号字符？](https://stackoverflow.com/questions/75191/what-is-an-unsigned-char)

# vim - Windows 7 中的 NerdTree 复制命令

> ID：11269926
> 
> 赞同：5
> 
> 时间：2012-06-29T22:52:39.393
> 
> 标签：vim, nerdtree

我没有看到`Copy`命令的菜单选项。这是我在 Windows 7 机器上看到的菜单：

```
NERDTree Menu. Use j/k/enter and the shortcuts indicated
==========================================================
> (a)dd a childnode
  (m)ove the curent node
  (d)elete the curent node 
```

根据插件[文档](http://www.vim.org/scripts/script.php?script_id=1658)，`Copy`并非所有平台都支持该命令。

```
A textual filesystem menu is provided which allows you to create/delete/move file 
and directory nodes as well as copy (for supported OSs) 
```

有没有人设法让它在 Windows 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T23:40:18.637

The root cause for the issue is discussed in detail(rather colorfully) in this [blog post](http://got-ravings.blogspot.fr/2008/07/windows-copying-commands-suck-giant.html).(ht [romainl](https://stackoverflow.com/users/546861/romainl)). I managed to find a solution by using the `cp.exe` shipped with [msygit](http://msysgit.github.com/).

**Ensure `cp.exe` is in your path**

The `cp.exe` file can be found in `<GIT_HOME>\bin` directory. My path didn't not contain the ``\bin`directory. So I copied`cp.exe`and`msys-1.0.dll` to a directory in my path.

**Set the `g:NERDTreeCopyCmd` variable**

Add the line below to the end of the `_vimrc` file

```
let g:NERDTreeCopyCmd= 'cp -r ' 
```

**Fix the implementation of `s:Path.copy` function.**

Replace the lines 2297-2299 of `~/vimfiles/bundle/nerdtree/plugin/NERD_tree.vim` (assuming you used pathogen for managing vim plugins)

*   Replace the lines 2297-2299

    ```
    let dest = s:Path.WinToUnixPath(a:dest)

    let cmd = g:NERDTreeCopyCmd . " " . escape(self.str(), s:escape_chars) . " " . escape(dest, s:escape_chars) 
    ```

*   With the lines below

    ```
    let dest = a:dest
    let cmd = 0
    if s:running_windows
        let cmd = g:NERDTreeCopyCmd . '"' . self.str() . '" "' . dest . '"'
    else
        let cmd = g:NERDTreeCopyCmd . " " . escape(self.str(), s:escape_chars) . " " . escape(dest, s:escape_chars)
    endif 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-22T14:59:07.943

我通过安装[Gow让它工作了](https://github.com/bmatzelle/gow)

`choco install -y gow`

然后将此行添加到vim

`let g:NERDTreeCopyCmd= 'cp -r'`

谢谢：[https ://github.com/scrooloose/nerdtree/issues/152](https://github.com/scrooloose/nerdtree/issues/152)

PS：choco命令来自[https://chocolatey.org/](https://chocolatey.org/)

# seo - Schema.org 站点导航元素

> ID：11269930
> 
> 赞同：8
> 
> 时间：2012-06-29T22:53:12.853
> 
> 标签：seo, schema.org, google-rich-snippets

我无法让网站管理员工具丰富代码片段测试工具正确返回 schema.org 的 WebPageElement 类型的标记。

[http://schema.org/WebPageElement](http://schema.org/WebPageElement)

有人有托管此标记的网站吗？

我正在为在 Google 搜索中返回不受欢迎的片段的网站寻找解决方案。该网站是一个交互式幻灯片演示库，具有高级搜索功能。

该网站上的许多不同搜索页面每周都会从 Google 索引中删除。这些页面上返回的片段包括导航菜单。没有 h1 标签，导航菜单的第一行是粗体，因此 Google 将菜单标识为页面的主要内容，并在搜索结果中返回此信息。

我需要 Google 将实际页面内容放在搜索结果中，以提高点击率并解决可能的重复内容问题。

我认为最好在网站上放置一个 h1 标签，并为 WebPageElement、SiteNavigationElement、WPHeader、WPFooter 和 WebPage 添加架构。

有人在他们的网站上有这个标记的例子吗？

过去我使用丰富的代码片段工具并让它返回错误，并且在每个实例中我发现我的代码确实包含错误，所以我不认为它是工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T21:58:15.663

我在[http://gamesforkidsfree.net/en/](http://gamesforkidsfree.net/en/)中实现了几个 schema.org WebPageElement 类型，包括`siteNavigationElement`

[您可以在 Rich Snippets Testing Tool 中查看 Google](http://www.google.com/webmasters/tools/richsnippets?url=http://gamesforkidsfree.net/en/)如何识别它。

同样在谷歌网站管理员工具中，有一个部分可以在“优化/结构化数据”中检查这种标记，对于这种情况，它显示：

```
 Type                      Schema        Items    # Pages
    ---------------------------------------------------------
    ItemPage                  schema.org    109,657  6,866
    WPAdBlock                 schema.org    20,727   6,973
    SiteNavigationElement     schema.org    7,350    7,322
    WPHeader                  schema.org    7,319    7,319
    WPFooter                  schema.org    7,319    7,319
    WebPage                   schema.org    649      649 
```

关于重复内容，您可以查看许多关于规范化的 Google 支持页面之一（这不是重复的内容吗？:) 例如[规范化](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066)->[提示](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66359)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:55:56.003

综上所述，当您定义 BREADCRUMP 和 schema.org 时，谷歌确实会在其 SERP 中显示，因为它是由搜索引擎巨头制作的，因此实施它可以确保在一定程度上更好地理解有关您页面的机器人。搜索引擎不会告诉您他们所做的一切，但如果您遵循他们共同制定的主要标准，您几乎可以确保自己在 SERP 中具有良好的内容可用性。

不过，您不应该过多地指望由此产生的影响。

我建议你主要关注漂亮的 url、规范用法、标题、描述和 schema.org itemprop 的正确实现，用于内页的主要内容类型，以及 H1 用于标题。

还尝试在 html 中尽可能高地呈现您的主要内容，并避免拆分您的标题、摘要和图像……最好的情况是它们应该与 H1、IMG 和 P 元素相互接近，而不是被 div、表格和很快。

你可以看看这个网站[http://svejo.net/1792774-protsesat-n ​​a-tsifrovizatsiya-v-balgariya-zapochva](http://svejo.net/1792774-protsesat-na-tsifrovizatsiya-v-balgariya-zapochva)

它在其文章页面上有一个相当不错的 SEO，并且由于它的页面 SEO，它在 SERP 中经常显示得非常好。

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:52:45.840

如果您可以显示实际网站或 SERP 屏幕截图，将更容易回答。顺便说一句，我不认为您的问题可以使用这种标记来解决，因为即使 Schema.org*是*Google 的一项举措，也没有证据表明 Google 支持它。

据我了解，您有两种不同的问题：

1.  **错误的搜索片段**。Google 在搜索片段中显示与用户查询相关的页面文本片段。因此，您在搜索片段上看到的内容很大程度上取决于您在搜索框中输入的查询。如果您在片段中看到导航菜单的一部分，则可能是索引页面中没有相关文本，因此 Google 没有比导航菜单中的文本更好的显示
2.  **从 Google 索引中删除的搜索页面**。这是一个不同的、更严重的问题。与您正在输入的查询的其他页面排名相比，这些“搜索页面”是否是一个良好且相关的结果？页面的主题是否清晰明确（请记住，有时您需要用勺子喂食搜索引擎）？我给你的问题多于答案，但是，正如我之前所说，不看网站就不容易诊断 SEO 问题。

# javascript - 是否可以执行使用 pjax 检索到的 Javascript 代码？

> ID：11269934
> 
> 赞同：2
> 
> 时间：2012-06-29T22:53:32.713
> 
> 标签：javascript, pjax

假设我有一些简单的 Javascript，例如：

```
<script>
    var hello = function(){
        alert("Hello World!");
    }
</script> 
```

.. 在 helloworld.html 页面上。如果我使用 Pjax 将此脚本块加载到另一个页面中。如何执行函数 hello()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:02:28.890

出于安全原因，许多浏览器不会运行由 注入的 Javascript `innerHTML`，我认为 Pjax 可能会使用它。[（这是一个最小的例子。）](http://jsfiddle.net/r4ZZG/)

也许[Pjax 的 issue #48](https://github.com/defunkt/jquery-pjax/issues/48)中提出的解决方案会有所帮助

> 对我有用的是将我的 jQuery 代码放在一个函数中，在 document.ready 上正常调用它（对于非 pushState 浏览器），然后将该函数绑定到 pjax:end，即：
> 
> ```
> $('body').bind 'pjax:end', mainFunction 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T02:45:09.570

这可以通过 PJAX 实现。您只需要使用 type 的 script 标签`text/javascript`。

PJAX 库中的代码：

```
function executeScriptTags(scripts) {
  if (!scripts) return

  var existingScripts = $('script[src]')

  scripts.each(function() {
    var src = this.src
    var matchedScripts = existingScripts.filter(function() {
      return this.src === src
    })
    if (matchedScripts.length) {
      matchedScripts.remove();
    }
    console.error("FOUND SCRIPTS", scripts, matchedScripts.length);

    var script = document.createElement('script')
    script.type = $(this).attr('type')
    script.src = $(this).attr('src')
    document.head.appendChild(script)
  })
} 
```

# ruby-on-rails - Rails 500 错误：application.css 未预编译

> ID：11269935
> 
> 赞同：5
> 
> 时间：2012-06-29T22:53:33.950
> 
> 标签：ruby-on-rails, apache, passenger, precompiled

我在 Mediatemple 的 Ubuntu linux box (ve) 服务器上使用 Apache 在Passenger 上运行 Rails。当我尝试加载任何页面时，我的应用程序给我一个 500 错误（Rails 错误，而不是 Apache 错误）：[http ://www.mvngmtns.com](http://www.mvngmtns.com)

我在config/environments/production.rb中看到了一篇关于改变这一行的文章：

```
 config.assets.compile = true 
```

但这并没有解决我的问题。任何人都可以帮忙吗？

我的开发日志：

```
Started GET "/" for 72.225.170.239 at 2012-06-29 15:28:43 -0700
Processing by HomeController#index as HTML
Rendered application/_logo.html.erb (0.6ms)
Rendered application/_navbar.html.erb (1.4ms)
Rendered home/index.html.erb within layouts/application (2.6ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (application.css isn't precompiled):
2: <html>
3: <head>
4:   <title>Moving Mountains<%= get_title %></title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8:
app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___2841110860658336572_129641540'
app/controllers/home_controller.rb:6:in `index' 
```

按照要求，跑了

```
 rake assets:precompile --trace RAILS_ENV=production
    touch /tmp/restart.txt 
```

但仍然是同样的错误。这是跟踪所说的：

```
newguy@mvngmtns:/var/www/movingmountains$ rake assets:precompile --trace RAILS_ENV=production
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/usr/local/rvm/rubies/ruby-1.9.2-head/bin/ruby /usr/local/rvm/gems/ruby-1.9.2-head@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:non digest 
```

我在浏览器中仍然有相同的“500 - 我们很抱歉，但出了点问题”，并在 apache 日志文件中缓存：[GET /] 未命中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T23:04:34.883

设置后

```
config.assets.compile = true 
```

您还应该运行：

```
 rake assets:precompile --trace RAILS_ENV=production 
```

请参阅：[rails 3.1.0 ActionView::Template::Error（application.css 未预编译）](https://stackoverflow.com/questions/7275636/rails-3-1-0-actionviewtemplateerrror-application-css-isnt-precompiled)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T22:57:14.337

我不知道有关 Mediatemple 的详细信息，但也许您需要在部署之前预编译您的资产：

```
rake assets:precompile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T16:53:46.947

几件事：

1.  检查样式表是否真的被编译了——它会像`public/assets/application-XXX.css`
2.  乘客寻找`APP_DIR/tmp/restart.txt`，而不是`/tmp/restart.txt`，所以请确保您`touch`的文件在正确的位置

# emacs - 语法突出显示与emacs中的flymake errline颜色冲突？

> ID：11269937
> 
> 赞同：2
> 
> 时间：2012-06-29T22:54:09.250
> 
> 标签：emacs, syntax-highlighting, flymake

我正在使用带有 jshint 的 flymake 来突出显示 emacs24 中的 javascript 问题。我的 custom.el 有

```
(custom-set-faces '('(flymake-errline ((((class color)) (:background "Red" :foreground "Black"))))) 
```

这会将 jshint 抱怨的代码的背景颜色设置为红色，并且由于某些颜色在红色背景下难以阅读，因此将前景色设置为黑色。

问题是，如果突出显示的代码具有语法突出显示，则语法突出显示颜色会覆盖 my `:foreground "Black"`，我仍然无法读取突出显示的代码。

除了选择不同的颜色，人们还做了什么来避免这个问题？

更新：奇怪的是，有些颜色**被**我的`:foreground "Black"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:29:38.517

'cat' 到你的 emacs 配置文件：

`(custom-set-faces '(flymake-errline ((((class color)) (:background "Gray30")))) '(flymake-warnline ((((class color)) (:background "Gray20")))))`

# windows - Windows 7：cmd.exe：设置启动目录（在指向 cmd.exe 的链接中）

> ID：11269943
> 
> 赞同：6
> 
> 时间：2012-06-29T22:54:29.920
> 
> 标签：windows, windows-7, cmd, directory

我正在运行 Windows 7，当我运行 cmd.exe 时，我希望它在名为 C:\foo\bar 的目录中启动。我记得能够在桌面上创建指向此可执行文件的链接，然后右键单击某处以通过在瞬态窗口中填写一个字段来设置 cmd.exe 命令提示符的启动菜单，但我找不到它。我发现以下论点似乎更复杂。我想通过弹出窗口设置 cmd.exe 的启动目录。

[在 Windows 7 中更改命令提示符的默认启动目录](https://stackoverflow.com/questions/4895966/changing-default-startup-directory-for-command-prompt-in-windows-7)

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T10:06:50.867

正如其他海报已经提到的那样：常规方法是编辑快捷方式的属性并填写标有“开始”的字段。就那么简单。

*但是，由于某种原因，如果同时*在快捷方式的高级属性中启用“以管理员身份运行”复选框，这对启用 UAC 的系统没有影响。

![在此处输入图像描述](../Images/276eb336543f9f071427811ad5237387.png)

一个解决方案是将所有内容放在快捷方式的“目标”字段中：

```
%windir%\System32\cmd.exe /K cd /d "E:\My Folder" & sometest.bat 
```

在 64 位上运行并且您想显式启动 32 位的命令提示符时：

```
%windir%\SysWOW64\cmd.exe /K cd /d "E:\My Folder" & sometest.bat 
```

有关上面使用的命令行参数的更多信息，请参见：
`cmd.exe /?`
`cd.exe /?`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T23:06:41.247

当您创建 cmd.exe 的快捷方式时，您可以打开快捷方式属性并在“*快捷方式*”选项卡下找到“*开始”选项，该*选项将告诉`cmd.exe`您从哪里开始，如下所示：

![命令提示符快捷方式属性](../Images/1f509c2eedb169dbc223fb46e45ca45b.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T23:05:33.837

打开快捷方式的属性`cmd`并在那里设置目录：

![在此处输入图像描述](../Images/72e52c4c51bd21aeb714dc6f7e41e8c1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-15T00:34:24.313

试试这个快捷方式目标：

```
C:\Windows\System32\cmd.exe cd /d %~dp0 
```

它将`cmd.exe`在快捷方式的文件夹中开始。

# ruby - build() 等价于两个现有对象

> ID：11269948
> 
> 赞同：1
> 
> 时间：2012-06-29T22:54:56.787
> 
> 标签：ruby, ruby-on-rails-3

是否有与`collection.build`Ruby on Rails 中的命令等效的命令在两个已经存在的模型对象之间建立关系？例如，如果我有一个用户模型和一个联系人模型（通过 has_many_and_belongs_to 双向连接）并且我想将一个用户添加到联系人的用户集合中，并将一个联系人添加到用户的联系人集合中，是否有任何简单的方法可以简单地为我建立这种联系？还是我必须写出来

```
 contact.users << some_user
    contact.save
    some_user.contacts << contact
    some_user.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:13:04.067

我相信：

```
contact.users << some_user 
```

足够。

根据 Rails [Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association-reference)：

> collection << 方法通过在连接表中创建记录，将一个或多个对象添加到集合中。

# android - 相机内存消耗

> ID：11269954
> 
> 赞同：0
> 
> 时间：2012-06-29T22:55:40.547
> 
> 标签：android, memory-management, camera

我正在通过 android camera API 拍照：

为了计算某些图像处理的可用内存，我想检查图像是否适合内存。我正在使用这些功能执行此操作：

```
 /**
     * Checks if a bitmap with the specified size fits in memory
     * @param bmpwidth Bitmap width
     * @param bmpheight Bitmap height
     * @param bmpdensity Bitmap bpp (use 2 as default)
     * @return true if the bitmap fits in memory false otherwise
     */
    public static boolean checkBitmapFitsInMemory(long bmpwidth,long bmpheight, int bmpdensity ){
        long reqsize=bmpwidth*bmpheight*bmpdensity;
        long allocNativeHeap = Debug.getNativeHeapAllocatedSize();

        if ((reqsize + allocNativeHeap + Preview.getHeapPad()) >= Runtime.getRuntime().maxMemory())
        {
            return false;
        }
        return true;
    }

    private static long getHeapPad(){
        return (long) Math.max(4*1024*1024,Runtime.getRuntime().maxMemory()*0.1);
    } 
```

问题是：我仍然收到 OutOfMemoryExceptions（不是在我的手机上，而是来自已经下载了我的应用程序的人）

异常发生在以下代码的最后一行：

```
public void onPictureTaken(byte[] data, Camera camera) {
        Log.d(TAG, "onPictureTaken - jpeg");
        final byte[] data1 = data;
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        options.inSampleSize = downscalingFactor;
        Log.d(TAG, "before gc");
        printFreeRam();
        System.gc();
        Log.d(TAG, "after gc");
        printFreeRam();
        Bitmap photo = BitmapFactory.decodeByteArray(data1, 0, data1.length, options); 
```

downscalingFactor 是通过 checkBitmapFitsInMemory() 方法选择的。我这样做是这样的：

```
 for (downscalingFactor = 1; downscalingFactor < 16; downscalingFactor ++) {
    double width = (double) bestPictureSize.width / downscalingFactor;
    double height = (double) bestPictureSize.height / downscalingFactor;
    if(Preview.checkBitmapFitsInMemory((int) width, (int) height, 4*4)){ // 4 channels (RGBA) * 4 layers
        Log.v(TAG, "  supported: " + width+'x'+height);
        break;
    }else{
        Log.v(TAG, "  not supported: " + width+'x'+height);
    }
   } 
```

任何人都知道为什么这种方法如此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:39:28.427

尝试改变这个：

```
Bitmap photo = BitmapFactory.decodeByteArray(data1, 0, data1.length, options); 
```

对此：

```
Bitmap photo = BitmapFactory.decodeByteArray(**data**, 0, data.length, options); 
```

# linux - 通过 Linux 访问 perforce 中的最新标签

> ID：11269955
> 
> 赞同：1
> 
> 时间：2012-06-29T22:56:08.753
> 
> 标签：linux, unix, label, perforce, p4v

当我在 Linux 中输入以下命令时，我会得到一个标签列表：

```
p4 labels -e '< pattern-for-required-label >' 
```

但我只想获取列表中的最新标签。如果有任何命令可以让我从长列表中选择最新的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:59:08.953

`p4 labels -e ''|head`（或“|tail”，取决于您要查看列表的顶部还是底部）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T22:19:13.323

您可以使用以下`sort`命令执行此操作：

`p4 labels <branch> | sort -k3`

第三列是日期。这困扰了我好几个月，终于有了一个哈哈的时刻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:08:26.373

要限制返回的标签数量，您可以使用以下`-m`选项：

```
p4 labels -m 1 -e 'your pattern' 
```

这只会返回一个标签。另外值得注意的是，许多 p4 命令将使用`-m`参数来控制返回的结果数量。还有一件事：`-E`如果您希望/需要，模式参数的版本使过滤器模式不区分大小写。

参考：[http ://www.perforce.com/perforce/doc.current/manuals/cmdref/labels.html](http://www.perforce.com/perforce/doc.current/manuals/cmdref/labels.html)

如果 p4 标签命令没有得到你想要的，我建议看看 perforce 提供的[Perl](http://www.perforce.com/perforce/doc.current/manuals/p4script/02_perl.html#1047731)、[Python](http://www.perforce.com/perforce/doc.current/manuals/p4script/03_python.html#1116373)和[Ruby](http://www.perforce.com/perforce/doc.current/manuals/p4script/01_ruby.html#1047157) API——这些都是 Perforce 工作人员支持的库，并且非常有能力连接你的自定义代码需要。

[http://www.perforce.com/product/components/apis](http://www.perforce.com/product/components/apis)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-23T23:54:19.623

为了补充@Garrett Waiss 和@Zulu 的回答：

您还可以`p4 labels`使用 switch 告诉输出时间`-t`，然后按日期和时间排序。通过管道`tail`获取最新结果，如您的问题所示：

`p4 labels -t <expression> | sort -k3,3 -k4,4 | tail -n1`

另请注意：

*   一些 p4 客户端版本希望您`-e`在标签表达式之前指定
*   如果您使用标签命名方案，例如 mylabel_001, mylabel_002,... 那么您希望表达式为 mylabel_* 即： `p4 labels -t -e mylabel_* | sort -k3,3 -k4,4 | tail -n1`

# java - 如何让 Java 使用我的类加载器进行类解析

> ID：11269960
> 
> 赞同：1
> 
> 时间：2012-06-29T22:56:53.730
> 
> 标签：java, classloader

下面的测试用例。输出：

```
custom loading of: pkg.TestRun
ran.
wish this would run in my custom classloader 
```

我想要发生的是在输出的第二行和第三行之间看到“自定义加载：pkg.TestRun”。

我怎样才能让它从我的自定义类加载器加载一个类的依赖项，即使第一个类是从父类加载的？请注意，在我的真实案例中，我得到了一个找不到类的异常，因为父类加载器不知道 OtherClass 的等价物。

我知道一种解决方案是让自定义类加载器显式加载 TestRun。但是，如何加载 TestRun 已为父类加载器所知，我不想单独管理查找它，因为它已经完成，而且我可能很难以某种方式弄清楚它何时已经在没有我做的情况下进行管理任何事物。而且我尝试过类似 super.getResource （返回 null）或 findClass （已经将 parent 设置为它的类加载器）之类的东西，但都没有奏效。

那么，我可以让父类找到类，但自定义加载器定义它吗？或者，有没有办法让它总是使用我的自定义加载器来查找依赖项？

```
package pkg;

public class TestCL {

    static class MyCL extends ClassLoader {
        MyCL(ClassLoader parent) {
            super(parent);
        }

        @Override
        public Class loadClass(String name, boolean resolve) throws ClassNotFoundException {
            System.out.println("custom loading of: " + name);
            return getParent().loadClass(name);
        }
    }

    public static void main(String[] args) throws Exception {
        MyCL cl = new MyCL(Thread.currentThread().getContextClassLoader());
        Thread.currentThread().setContextClassLoader(cl);
        cl.loadClass("pkg.TestRun").getMethod("run", new Class[] {}).invoke(null);
    }
}

class TestRun {
    public static void run() {
        System.out.println("ran.");
        OtherClass.runAlso();
    }
}

class OtherClass {
    public static void runAlso() {
        System.out.println("wish this would run in my custom classloader");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:16:45.620

问题是您没有使用自定义类加载器加载任何内容
它要求它的父级加载类，因此所有内容都由主类加载器加载。

试试这个修改后的代码：

```
package stackoverflow.june2012.classloader;

import java.io.File;
import java.net.URL;
import java.net.URLClassLoader;

public class TestCL {

static class MyCL extends URLClassLoader {
    MyCL(URL[] urls) {
        // NOTE: No parent classloader!
        super(urls, null);
    }

    @Override
    public Class loadClass(String name, boolean resolve) throws ClassNotFoundException {
        System.out.println("custom loading of: " + name);
        return super.loadClass(name, resolve);
    }

    @Override
    protected Class<?> findClass(String name) throws ClassNotFoundException {
        System.out.println("findClass: " + name);
        System.out.println("NOTE: Only called if this classloader does NOT have a parent");
        return super.findClass(name);
    }
}

public static void main(String[] args) throws Exception {
    URL url = new File("./bin").toURI().toURL();
    System.out.println("url to search for classes: " + url);
    MyCL cl = new MyCL(new URL[] {url});
    Thread.currentThread().setContextClassLoader(cl);
    Class loadClass = cl.loadClass("stackoverflow.june2012.classloader.TestRun");
    System.out.println("Loaded TestRun using classloader: " + loadClass.getClassLoader());
    loadClass.getMethod("run", new Class[] {}).invoke(null);
} 
```

}

而且我必须将您的其他 2 个类移动到一个单独的文件中，否则无法访问它，因为它在不同的类加载器中是包私有的：

```
package stackoverflow.june2012.classloader;

public class TestRun {
    public static void run() {
    System.out.println("ran.");
    OtherClass.runAlso();
    }
}

class OtherClass {
    public static void runAlso() {
        System.out.println("wish this would run in my custom classloader");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:35:29.227

一种解决方案是使用父类加载器（或已经知道它在哪里的类加载器）来读取类的字节，然后在自定义类加载器中定义它。

所以，像这样：

```
public static byte[] loadBytesForClass(ClassLoader loader, String fqn) throws IOException {
    InputStream input = loader.getResourceAsStream(fqn.replace(".", "/") + ".class");
    if (input == null) {
        System.out.println("Could not load bytes for class: " + fqn);
    }
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    StringUtil.copy(input, output);
    return output.toByteArray();
} 
```

然后您可以`defineClass(name, bytes, 0, bytes.length)`使用这些字节调用以在自定义类加载器中定义它。

# jquery - 对不同函数中的相同元素使用 hide()

> ID：11269962
> 
> 赞同：2
> 
> 时间：2012-06-29T22:57:05.177
> 
> 标签：jquery, hide

好吧，这是我使用 JQuery 的第一天，所以请尽情享受我制作的这些功能。当单击不同的触发器时，我试图隐藏一个 div (#panel)。下面是三个函数，其中三个函数在使用时都需要隐藏（#panel）。我设置它的方式仅适用于第一个功能。另外两个不隐藏元素。所以事不宜迟。

```
jQuery(document).ready(function($){
var $panel = $(this).closest(".panel-container").find(".panel");
$('#searchsubmit').click(function(e){
    $('#boxes').empty();
    e.preventDefault();
    var $panel = $(this).closest(".panel-container").find(".panel");
    var search_val=$("#s").val();
    $.post(
        WPaAjax.ajaxurl,
        {
            action : 'loop_search',
            search_val : search_val
        },
        function( response ) {
            $('#boxes').append( response ).masonry( 'reload' );
            $panel.hide("slow");
            $('.trigger').removeClass("active");
            $('.trigger-loop').removeClass("active");
        }
    );
});
$('#fame.trigger-loop').click(function(){
var $panel = $(this).closest(".panel-container").find(".panel");
    $('.trigger').removeClass('active');
    $('.trigger-loop').removeClass('active');
    $('#fame.trigger-loop').addClass('active');
    $('#boxes').empty();
    $.post(
        WPaAjax.ajaxurl,
        {
            action : 'loop_fame'
        },
        function( response ) {
            $('#boxes').append( response ).masonry( 'reload' );
            $panel.hide("slow");
        }
    );
});
$('#new.trigger-loop').click(function(){
var $panel = $(this).closest(".panel-container").find(".panel");
    $panel.hide("slow");
    $('.trigger').removeClass('active');
    $('.trigger-loop').removeClass('active');
    $('#new.trigger-loop').addClass('active');
    $('#boxes').empty();
    $.post(
        WPaAjax.ajaxurl,
        {
            action : 'loop_new',
        },
        function( response ) {
            $('#boxes').append( response ).masonry( 'reload' );
            $panel.hide("slow");
        }
    );
 });

}); 
```

//--html

```
<li>
 <a id="fame" class="trigger-loop active" href="#"><div id="fame-icon"></div></a>
</li>
<li>
 <a id="new" class="trigger-loop" href="#"><div id="gold-artist"></div></a>
</li>
<li>
 <div class="panel-container">
  <div class="panel">
     <----content----->
  </div>
  <a class="trigger" href="#"><div id="playlist-icon"></div></a>
 </div>
</li>
<li>
 <div class="panel-container">
  <div class="panel">
     <----content----->
  </div>
  <a class="trigger" href="#"><div id="random-icon"></div></a>
 </div>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:03:55.413

问题是您有一个全局变量被覆盖并导致不良影响。

```
var $panel = $(this).closest(".panel-container").find(".panel"); 
```

该行将设置`$panel`为全局变量，因为它除了`document.ready`. `$panel`当您在其中一个回调闭包中时，再次定义时存在利益冲突。考虑更改这些名称以消除冲突。

结果是`$panel`在内部调用全局

```
function( response ) {
        $('#boxes').append( response ).masonry( 'reload' );
        $panel.hide("slow");
 } 
```

而不是调用您正在考虑的本地化版本。这就是为什么只有一个人在躲藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:10:39.037

试试这个`$('#fame.trigger-loop').click`和`$('#new.trigger-loop').click`;

```
var $panel = $(this).closest('ul').find(".panel-container").find(".panel"); 
```

# jquery - 为什么我的 KendoUI 移动开关无法正常工作？

> ID：11269963
> 
> 赞同：0
> 
> 时间：2012-06-29T22:57:10.783
> 
> 标签：jquery, kendo-ui, fubumvc

我正在使用 FUBUMVC 并使用自定义 HTMLConvention 生成以下 htmltag(s)：

```
<div class="CheckboxWithValues">
<input type="checkbox" checked="true" name="Advertise_CheckboxWithValuesInput" checked_text="Yes" checked_value="37" unchecked_text="No" unchecked_value="38">
<input type="hidden" name="Advertise" value="37">
</div> 
```

通过 jQuery，我将使用以下代码附加 KendoUI 移动 silder：

```
$(document).ready(function () {
$('input[name$="_CheckboxWithValuesInput"]').each(function () {
    var input = $(this);
    var hiddenFieldName = input.attr("name").replace("_CheckboxWithValuesInput", "");
    var hiddenField = $('input[name="' + hiddenFieldName + '"]');
    var checked_value = input.attr('checked_value');
    var unchecked_value = input.attr('unchecked_value');

    //bind initial value
    if (input.is(':checked'))
        hiddenField.val(checked_value);
    else
        hiddenField.val(unchecked_value);

    //setup kendo UI switch
    var checked_text = input.attr('checked_text').toString();
    var unchecked_text = input.attr('unchecked_text').toString();
    var s = input.kendoMobileSwitch({ checked: input.is(':checked'), onLabel: checked_text, offLabel: unchecked_text }).data('kendoMobileSwitch');
    //bind change event
    s.bind('change', function (e) {
        var checked = e.checked;
        if (checked)
            hiddenField.val(checked_value);
        else
            hiddenField.val(unchecked_value);
    });
}); 
```

});

我正在让开关显示在页面上，但是当它似乎已经多次绑定到页面时。一次使用自定义的 onLabel 和 offLabel，另一次使用默认的“ON”和“OFF”值。

这是页面上的样子：

[http://i.stack.imgur.com/sJzCm.jpg](http://i.stack.imgur.com/sJzCm.jpg)

还有人遇到这个吗？

这是在将开关添加到控件后修改后的 html 的样子：

```
<div class="CheckboxWithValues">
<span class="km-switch km-switch-on">
<span class="km-switch km-switch-on" style="">
<input type="checkbox" checked="true" name="Advertise_CheckboxWithValuesInput" checked_text="Yes" checked_value="37" unchecked_text="No" unchecked_value="38" data-role="switch">
<span class="km-switch-wrapper"><span class="km-switch-background" style="margin-left: -18px; "></span></span>
<span class="km-switch-container">
<span class="km-switch-handle" style="-webkit-transform: translateX(62px); ">
<span class="km-switch-label-on">ON</span>
<span class="km-switch-label-off">OFF</span>
</span>
</span>
</span>
<span class="km-switch-wrapper"><span class="km-switch-background" style="margin-left: -15px; "></span></span>
<span class="km-switch-container">
<span class="km-switch-handle" style="-webkit-transform: translate(65px, 0px); ">
<span class="km-switch-label-on">Yes</span>
<span class="km-switch-label-off">No</span>
</span>
</span>
</span>
<input type="hidden" name="Advertise" value="37">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:36:45.767

由于某种原因，它初始化了两次。你能检查 $(document).ready() 是否被调用了两次吗？您是否也启动了 Kendo 移动应用程序？

@Ian： data('kendoMobileSwitch') 包含他使用的 Switch 对象。

# expressionengine - Expressionengine 上一个 下一个 仅显示 1 个类别

> ID：11269968
> 
> 赞同：0
> 
> 时间：2012-06-29T22:58:36.587
> 
> 标签：expressionengine, preview, next, conditional

大家好，感谢您阅读本文

首先对不起我的解释，我的技术英语并不完美

好吧，我有一个名为“博客”的频道连接到组类别中的不同类别。

我使用一个独特的模板来显示所有类别的所有条目，我称之为：“文章”</p>

在文章模板中，我想显示“预览”和“下一个”链接以浏览仅一个类别（ID = 13）的每个条目

使用此代码（带有预览链接的示例）它正在工作，当我访问属于类别 13 的条目时，我看到我的链接并能够导航

`{exp:channel:prev_entry category=“13” }
/expressionengine/themes/site_themes/agile_records/images/arrownavleft.png {/exp:channel:prev_entry}`

但是我的问题现在开始了，这个链接在所有类别条目中也可见我不知道如何在他们的文章模板中隐藏这些链接（预览和下一个）！上面的代码还不够，我尝试了一些条件但没有成功

抱歉，我可能不清楚，但很难用英语解释

谢谢你的任何回答R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:02:15.250

尝试将您的 Prev/Next Entry 标记包装在条件中，使其仅显示在类别 13 的条目上。

我会为此使用[Low Seg2Cat](http://gotolow.com/addons/low-seg2cat/docs)。

```
{if segment_1_category_id == 13}
  {exp:channel:prev_entry category=“13” }
   ....
  {/exp:channel:prev_entry}
{/if} 
```

您需要设置 segment_n_category_id 以匹配您的类别的 URL 段。

# google-maps - 存储与调用 Google Places API

> ID：11269969
> 
> 赞同：1
> 
> 时间：2012-06-29T22:58:42.637
> 
> 标签：google-maps, google-places-api

我的应用程序为每个用户查询一次 Google Geocoding API。它存储他们的纬度以供以后分析。

我正在考虑一个调用 Google Places API 的功能，并在地图上向用户显示他们附近的一些“地方”。我不想存储附近的 Google 地方信息。在这个过程中有相当大的开销。

许多人在留言板上强调不要从我的应用程序中轰炸 Places API 的重要性。但是，Google Places API 允许大量的每日流量，远高于 Maps API，也远高于我的网站将使用的流量。

任何人都可以明确解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:08:56.177

强调减少对 Places API 的调用次数的唯一可能原因是，如果您可能有超出[^(开发指南)](https://developers.google.com/places/documentation/index#Limits)规定的配额限制（目前许可站点设置为 100,000）的危险。如果您确信自己不会接近或超过限制，那么您的评估是正确的。与尝试存储结果作为避免类似 Places API 请求相关的额外开销不值得增加复杂性。只需调用 Places API，处理结果，然后将它们放在您的 Google 地图上以显示给您的用户。

# java - 如何创建自定义事件（它们必须在 netbeans 调色板中）

> ID：11269980
> 
> 赞同：0
> 
> 时间：2012-06-29T23:01:36.410
> 
> 标签：java, swing, events, jpanel, jbutton

我一直在寻找几个小时来解决我的问题，我在 Java 语言中有点新的编程，并且已经设法创建了一个包含 6 个自定义按钮的自定义面板，但现在我需要创建一个可以检测到的事件我按下，我已经用 C# 完成了这个，但在 Java 中找不到方法。

这段代码在 C# 中，但我当然需要类似的 Java 代码。

```
/// <summary>
/// Enumerator with buttons states
/// </summary>
public enum EstadoBoton
{
    Aceptar = 1,
    Nuevo = 2,
    Editar = 3,
    Cancelar = 4,
    Eliminar = 5,
    Imprimir = 6,
    Salir = 7
}
/// <summary>
/// Delegate method for buttons events
/// </summary>
/// <param name="edoBoton"></param>
public delegate void BotonPresionado(EstadoBoton edoBoton);

public partial class ctrlBotones : UserControl
{
    /// <summary>
    /// here I keep the state of the button
    /// </summary>
    private EstadoBoton estadoBoton;
    /// <summary>
    /// Event that manages the state of the button
    /// </summary>
    public event BotonPresionado BotonPresionado
    {
        add { this.botonpresion += value; }
        remove { this.botonpresion -= value; }
    }
    private BotonPresionado botonpresion;
    public ctrlBotones()
    {
        InitializeComponent();
    } 
```

该示例在 Visual Studio 的事件列表中显示名称“BotonPresionado”，因此我可以选择该事件并生成代码。

我会非常感谢你能给我的任何帮助。

提前感谢，如果我的英语不是很好，我很抱歉，还在学习。:)

当我在 GUI 上按下自定义事件时，我忘记编写生成的代码。

```
//As we can see, it generates en event for this control not for the buttons.
private void ctrlBotones1_BotonPresionado(HerramientasInterfaz.EstadoBoton edoBoton)
    {
        //I just use a switch to check wich button I pressed.
        switch (edoBoton)
        {
            case HerramientasInterfaz.EstadoBoton.Aceptar:
                Aceptar();
                break;
            case HerramientasInterfaz.EstadoBoton.Nuevo:
                Nuevo();
                break;
            case HerramientasInterfaz.EstadoBoton.Salir:
                Close();
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:25:24.257

好的，Aaron Daw 我在某种程度上认为您想创建自己的“事件”。这意味着为组件重用相同的代码。

我过去以这种方式尝试过自定义组件（JButtons，JMenu）

```
public class MyMenu extends JMenu
{
public MyMenu(ImageIcon i,String s)
{
    super();
    setIcon(i);
    setText(s);
    setVerticalTextPosition(SwingConstants.BOTTOM);
    setHorizontalTextPosition(SwingConstants.CENTER);
}
} 
```

为“MyMenu”创建对象，这里我们不需要每次都添加属性，这是优势。

以同样的方式，我尝试使用 JButton 的自定义侦听器，它正在工作。当您单击按钮时，它将打印“按下按钮”这是 customEvent 类

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;

public class CustomListener 
{
JButton button;
public CustomListener(JButton b)
{
button=b;

button.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==button)
        {
            System.out.println("button pressed");

        }
    }
});

}
} 
```

这是主要课程

```
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
public class MainClass extends JFrame
{
JButton jbutton;
public MainClass()
{
    setLayout(new FlowLayout());
    add(jbutton());
    setSize(800,600);
    setVisible(true);
}
public JButton jbutton()
{
    if(jbutton==null)
    {
        jbutton=new JButton("click");
        new CustomListener(jbutton);
    }
    return jbutton;
}

public static void main(String args[])
{
    new MainClass();
}
} 
```

现在我可以重用 actionListener。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T18:21:49.577

我的朋友

如果您正在寻找类似于*Visual Studio的***用户界面**，例如轻松**拖放**

 ***然后在**netbeans**中右键单击您的项目，然后单击**新的 JFrame 表单**（如果它不存在则在其他项目中），您将有一个简单的**拖放**用户界面

`JButton`然后从**调色板**中删除一个，然后双击它`JButton`，你会得到那个**事件**`JButton`....***

# javascript - 在 chrome 开发者工具中禁用脚本编辑

> ID：11269982
> 
> 赞同：19
> 
> 时间：2012-06-29T23:01:48.563
> 
> 标签：javascript, debugging, google-chrome, usability, google-chrome-devtools

我使用 Chrome 开发人员工具来调试我的 JavaScript 代码，但我对 Chrome 允许您在“脚本”选项卡下编辑 JavaScript 文件的方式感到不满。有时，我没有意识到我在 Chrome 中，我开始在 Scripts 选项卡下对代码进行更改，只是在刷新时才意识到我刚刚所做的更改从未保存到磁盘！

我想知道是否有办法使“脚本”选项卡中显示的代码只读，这样如果我尝试在 Chrome 中编辑文件，我会看到它不可编辑，然后意识到我不在我的IDE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:07:27.790

使用以下过程在 Chrome 32+ 中将脚本源设为只读：

*   转到 chrome://flags/#enable-devtools-experiments URL

*   选择允许 UI 主题

*   打开 Chrome 开发工具

*   选择设置（按 F1 或单击最右侧的三个点）

*   选择允许 UI 主题

*   使用以下样式创建[DevTools 主题：](https://github.com/paulirish/sample-devtools-theme-extension)

    ```
    .content-view.script > .text-editor { -webkit-user-modify: read-only !important; } 
    ```

*   将其发布到[Chrome 网上应用店](https://chrome.google.com/webstore/category/themes)

*   安装主题

*   重启 Chrome

**参考**

*   [Custom.css 已在 32.0.1700.76 m Google Chrome 更新中停止工作](https://stackoverflow.com/questions/21207474/1113772)
*   [示例 DevTools 主题扩展](https://github.com/paulirish/sample-devtools-theme-extension)
*   [适用于 Chrome 开发工具的 Chrome 开发者版深色主题](https://github.com/KeenRivals/chrome-developer-edition-dark)
*   [WebCore Inspector 脚本内容视图](http://trac.webkit.org/browser/trunk/Source/WebInspectorUI/UserInterface/Views/ScriptContentView.css)
*   [Chromium 用户数据目录](http://www.chromium.org/user-experience/user-data-directory)

使用 Chrome 31 的旧流程：

> 使用[用户样式表](http://brugbart.com/Articles/custom-style-sheets)完全禁用脚本选项卡：

```
.toolbar-item.scripts { display:none !important; } /* Hide Scripts Tab */ 
```

> 或者只是将脚本源设为只读：

```
.text-editor-editable { -webkit-user-modify: read-only !important; } /* Old selector */
.content-view.script > .text-editor { -webkit-user-modify: read-only !important; } /* Older selector */
.editing { -webkit-user-modify: read-only !important; } /* Generic Selector */ 
```

> 以下是文件的几个可能位置：

*   Windows 7 铬：
    *   `%LOCALAPPDATA%\Chromium\User Data\Profile 1\User StyleSheets\Custom.css`
*   Windows 7 铬：
    *   `%LOCALAPPDATA%\Google\Chrome\User Data\Default\User StyleSheets\Custom.css`
*   OSX 铬：
    *   `/Users/YourUsername/Library/Application Support/Google/Chrome/Default/User StyleSheets/Custom.css`
*   Ubuntu 铬：
    *   `~/.config/chromium/Default/User\ StyleSheets/Custom.css`

使用以下[Chrome Devtools](https://stackoverflow.com/questions/7149450/1113772) URL 来引用相关样式：

chrome-devtools://devtools/devTools.css

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T16:44:42.740

据我所知，Chrome/WebKit 开发者工具中没有禁用脚本编辑的选项。

以下是~~两种~~可能的解决方案：

## 解决方案1：

制作一个每次编辑时都会显示警报的扩展程序：

JavaScript：

```
chrome.devtools.inspectedWindow.onResourceContentCommitted.addListener(function(resource, content) {
    alert("WARNING: Your changes will not be saved!!");
    // Optional, but and extra layer of "protection", if you don't want/need it just remove the "experimental" permission from the manifest
    if (chrome.experimental) {
        chrome.experimental.devtools.console.addMessage("error", "WARNING: Your changes will not be saved!!");
        // Shows in red
    }
}); 
```

扩展（解压，首先启用 chrome://flags 下的实验扩展 API）：[http ://www.mediafire.com/?wb1r67ron0x6szh](http://www.mediafire.com/?wb1r67ron0x6szh)

## 解决方案2：

修改源代码并运行自定义构建：

另一种选择是修改开发者工具源，请参阅[https://developers.google.com/chrome-developer-tools/docs/contributing](https://developers.google.com/chrome-developer-tools/docs/contributing)了解更多详情。如果您这样做了，您需要做的就是`text-editor-editable`从编辑器容器中删除该类（第 1279 行，[DefaultTextEditor.js](https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/inspector/front-end/DefaultTextEditor.js)）。

## 解决方案3：

让 chrome 自动保存你的文件：

第三个选项是启用 chrome 来保存您的文件，有许多扩展程序可以做到这一点，即[Tincr](http://tin.cr/)。Tincr 还可以让您实时重新加载文件并提供完整的语法突出显示。

我个人的看法是，这是最好的解决方案。

# mysql - 电子邮件中的确认码

> ID：11269991
> 
> 赞同：0
> 
> 时间：2012-06-29T23:03:46.787
> 
> 标签：mysql

我不知道从哪里开始。我有一个确认码，它被创建并存储在我的数据库中。当我从我的数据库中复制该代码并将其粘贴到我的网页时，它说它是错误的。这怎么可能。它正在工作，然后就停止了。我什至不知道要给你看什么，所以让我知道你需要看什么。

如果这有帮助，我的登录也不起作用。它说当我从数据库中获取用户名或密码时，用户名或密码不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:11:27.270

愚蠢的错误，我不得不将名称更改为用户名

# android - 媒体播放器安卓

> ID：11269994
> 
> 赞同：-1
> 
> 时间：2012-06-29T23:03:56.627
> 
> 标签：android, media-player

我想使用 MediaPlayer android，使用此代码，但出现错误，有办法修复此代码，或者谁能给我一个更好的例子？

```
try {

    MediaPlayer player = new MediaPlayer();
    player.setDataSource("/LFP/res/raw/Allen.mp3");
    player.prepare();
    player.start();

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:21:33.887

```
import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;

import android.media.MediaPlayer.OnPreparedListener;
import android.view.MotionEvent;
import android.widget.MediaController;
import android.widget.TextView;

import java.io.IOException;

public class AudioPlayer extends Activity implements OnPreparedListener,                
MediaController.MediaPlayerControl{
private static final String TAG = "AudioPlayer";

public static final String AUDIO_FILE_NAME = "audioFileName";

private MediaPlayer mediaPlayer;
private MediaController mediaController;
private String audioFile;

private Handler handler = new Handler();

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.audio_player);

audioFile = this.getIntent().getStringExtra(AUDIO_FILE_NAME);
((TextView)findViewById(R.id.now_playing_text)).setText(audioFile);

mediaPlayer = new MediaPlayer();
mediaPlayer.setOnPreparedListener(this);

mediaController = new MediaController(this);

try {
  mediaPlayer.setDataSource(audioFile);
  mediaPlayer.prepare();
  mediaPlayer.start();
} catch (IOException e) {
  Log.e(TAG, "Could not open file " + audioFile + " for playback.", e);
}

}

@Override
protected void onStop() {
super.onStop();
mediaController.hide();
mediaPlayer.stop();
mediaPlayer.release();
}

  @Override
  public boolean onTouchEvent(MotionEvent event) {

  mediaController.show();
  return false;
}

public void start() {
mediaPlayer.start();
}

public void pause() {
mediaPlayer.pause();
}

public int getDuration() {
return mediaPlayer.getDuration();
}

public int getCurrentPosition() {
return mediaPlayer.getCurrentPosition();
}

public void seekTo(int i) {
mediaPlayer.seekTo(i);
}

public boolean isPlaying() {
return mediaPlayer.isPlaying();
}

public int getBufferPercentage() {
return 0;
}

public boolean canPause() {
return true;
}

public boolean canSeekBackward() {
return true;
}

public boolean canSeekForward() {
return true;
}

  public void onPrepared(MediaPlayer mediaPlayer) {
  Log.d(TAG, "onPrepared");
  mediaController.setMediaPlayer(this);
  mediaController.setAnchorView(findViewById(R.id.main_audio_view));

   handler.post(new Runnable() {
     public void run() {
     mediaController.setEnabled(true);
     mediaController.show();
     }
   });
  }
 } 
```

这对我来说很好。希望它也对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T10:33:32.103

利用

```
mediaplayer.prepareAsync() 
and 
mediaplayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mp) {
                    mp.start();
                }
            }); 
```

取而代之的是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T12:48:50.787

在这里，我将音频文件保存在资产中。以下代码有效，

```
MediaPlayer mp= new MediaPlayer();
        AssetFileDescriptor afd = null;
        try {
            afd =getActivity().getBaseContext().getAssets().openFd("myAudio.mp3");
            mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
            afd.close();
            mp.prepare();
            mp.start();

            mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer mp) {
                    mp.release();
                }
            });
        } catch (IOException e) {
            e.printStackTrace();
        } 
```