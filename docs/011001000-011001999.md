# StackOverflow 问答 11001000-11001999

# asp.net-mvc-3 - 为新实体和编辑保存控制器

> ID：11001001
> 
> 赞同：0
> 
> 时间：2012-06-12T16:41:55.793
> 
> 标签：asp.net-mvc-3, entity-framework-4

MVC3 和实体框架新手在这里。我正在尝试编写一个控制器来处理编辑和创建新条目。到目前为止，这是我的代码（大部分是自动生成的）

```
 //POST: /License/Save
    [HttpPost]
    public string Save(LICENSE_USER license_user)
    {
        if (license_user.License_ID != 0)
        {
            if (ModelState.IsValid)
            {
                db.Entry(license_user).State = EntityState.Modified;
                db.SaveChanges();
                return "Save Complete";
            }
        }
        else
        {

            if (ModelState.IsValid) {
                db.LICENSE_USER.Add(license_user);
                db.SaveChanges();
                return "New License created - " + license_user.License_ID;
            }
        }
        return "What's going on here?";
    } 
```

它非常适合编辑，因为我在 POST 中包含了 License_ID 字段。但是，对于新条目，我排除了 License_ID 字段，它默认为 0。获取下一个 License_ID 字段并使用该字段更新对象的最优雅方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:43:48.327

使`License_ID`数据库中的列成为主自动增量键。这样您在插入新实体时就不需要手动设置它。数据库将负责。

在您的 EDMX 模型中，该`StoreGeneratedPattern`属性必须设置`Identity`为该属性。

# python - Python Numpy 库中的复合赋值运算符

> ID：11001003
> 
> 赞同：6
> 
> 时间：2012-06-12T16:41:57.060
> 
> 标签：python, numpy

Python 的 numpy 库对精美索引的“矢量化”有时会产生意想不到的结果。例如：

```
import numpy
a = numpy.zeros((1000,4), dtype='uint32')
b = numpy.zeros((1000,4), dtype='uint32')
i = numpy.random.random_integers(0,999,1000)
j = numpy.random.random_integers(0,3,1000)

a[i,j] += 1
for k in xrange(1000):
    b[i[k],j[k]] += 1 
```

在数组 'a' 和 'b' 中给出不同的结果（即元组 (i,j) 的出现在 'a' 中显示为 1 而不管是否重复，而重复在 'b' 中计数）。这很容易验证如下：

```
numpy.sum(a)
883
numpy.sum(b)
1000 
```

还值得注意的是，花哨的索引版本比 for 循环快两个数量级。我的问题是：“numpy 是否有一种有效的方法来计算重复计数，如在提供的示例中使用 for 循环实现的那样？”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:03:32.520

这应该做你想要的：

```
np.bincount(np.ravel_multi_index((i, j), (1000, 4)), minlength=4000).reshape(1000, 4) 
```

作为细分，将和`ravel_multi_index`指定的索引对转换为整数索引到 C-flattened 数组；计算每个值出现在该索引列表中的次数；并将C-flattened 数组转换回 2d 数组。`i``j``bincount``0..4000``reshape`

在性能方面，我测量它比“b”快 200 倍，比“a”快 5 倍；你的旅费可能会改变。

由于您需要将计数写入现有数组`a`，请尝试以下操作：

```
u, inv = np.unique(np.ravel_multi_index((i, j), (1000, 4)), return_inverse=True)
a.flat[u] += np.bincount(inv) 
```

我使第二种方法比“a”慢一点（2x），这并不奇怪，因为`unique`阶段会很慢。

# python - 尽管在 python 子进程中给出了 stderr=PIPE ，但仍将输出抛出到外部

> ID：11001004
> 
> 赞同：0
> 
> 时间：2012-06-12T16:42:02.893
> 
> 标签：python, pipe, subprocess

```
 str = "blah -l"
    cpuinfo = subprocess.Popen(str.split(),stdout=PIPE,stderr=PIPE)

    tuples = cpuinfo.communicate() 
```

在上面的代码中，当我给出 str=[some_valid_command] 时，会将输出提供给元组。当我给出一个无效命令时，我希望将错误带到 PIPE，但它仍然在控制台上抛出......我不太确定，我在哪里理解错了......

谢谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:02:56.453

我不确定您是否看到 stderr 实际出现在控制台上，或者只是遇到 Python 无法生成名为“blah”的进程，该进程是在运行您提供的示例时产生的......

该示例的输出将是 Python 引发一个`OSError: [Errno 2] No such file or directory`，除非您在 PATH 中有一个名为“blah”的可执行脚本，否则这是可以预期的

我做了一个简单的测试，并写了一个这样的 bash 脚本：

```
#!/bin/bash

echo "This is stdout"
echo "This is a failure on stderr" >&2
exit 1 
```

在授予该脚本可执行权限后，我重复了您的示例，而是将我的脚本（在本地目录中名为 fail.sh）称为：

```
import subprocess

cmd = './fail.sh'
proc = subprocess.Popen(cmd.split(), stdout=subprocess.PIPE, stderr=subprocess.PIPE)
proc.communicate() 
```

这`('This is stdout\n', 'This is a failure on stderr\n')`按预期返回。

因此，也许您在这里真正看到的是，您尝试调用的任何程序（如果不是废话）根本不存在于您的 PATH 中。

还有一个关于`str`在 Python 中用作标签的注意事项：`str`是一种内置类型，不应用作变量或函数的名称，除非您特别想“超载”内置函数。也是如此`string`，这是一个类。

# jquery - 下拉菜单 切换关闭

> ID：11001005
> 
> 赞同：0
> 
> 时间：2012-06-12T16:42:10.727
> 
> 标签：jquery

我有一个简单的下拉菜单，效果很好，但是有没有办法让如果你点击除了 ul 之外的任何地方，它会再次关闭它？

jQuery

```
$('.header').click(function() {
    $('.menu').toggle();
}); 
```

HTML

```
<a class="header" href="#">All</a>
<ul class="menu">
    <li>All</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:47:55.703

我会将切换更改为 toggleClass 并在您的 CSS 中添加一个活动或开放类。如果您使用 JQuery UI，也可以使用动画。例如

```
.menu {
display:none;
}

.menu.active {
display:block;
} 
```

然后

```
$('.header').click(function(e) {
  $('.menu').toggleClass("active", 1000);
  if (!$('body').hasClass("menu-active")) {
    $('body').addClass("menu-active");
  }
});

$('body.menu-active').click(function(e) {
  $('.menu').removeClass("active");
  $('body').removeClass("menu-active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:46:37.073

如何添加：

```
$('.header').click(function(e) {
  e.stopPropagation();
  $('.menu').toggle();
});
$('body').click(function() {
  $('.menu').hide();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/tWDJD/18/)**。

# asp.net - 下拉列表何时发生 DataBinding？

> ID：11001007
> 
> 赞同：2
> 
> 时间：2012-06-12T16:42:16.420
> 
> 标签：asp.net, vb.net, drop-down-menu, page-lifecycle

这是我的下拉列表和数据源。我的问题是.. 什么时候可以为下拉列表设置默认选定选项，也就是所有下拉列表何时被数据绑定并填充它们的 ListItems？我已经尝试过 Page_PreRender、Page_PreRenderComplete、Page_Load。

我已经阅读了建议 Page_PreRender 的 MSDN 页面生命周期事件。

```
 <asp:DropDownList ID="ddlRampStandard" runat="server"
 DataSourceID="RampStandardDataSource" DataTextField="StandardName" 
 DataValueField="StandardName" RepeatDirection="Horizontal" 
 ViewStateMode="Enabled"></asp:DropDownList>

 <asp:SqlDataSource ID="RampStandardDataSource" runat="server" 
 ConnectionString="<%$ ConnectionStrings:AIMP_DeleteMeConnectionString %>" 
 SelectCommand="SELECT [StandardName] FROM [CR_Standard]"></asp:SqlDataSource> 
```

这是简单的代码隐藏，它说明了我正在尝试做的事情。

```
Protected Sub Page_PreRenderComplete(sender As Object, e As System.EventArgs) Handles Me.Load
ddllstSideOfStreet.Items(0).Selected = True
End Sub 
```

我收到一个未创建实例的错误，提示 ddllstSideOfStreet 没有项目。我确实使用断点验证了这一点，并观察前面提到的任何 prerender、load、prerendercomplte 函数中不存在任何项目。但是，当页面加载时，下拉列表确实加载了预期的数据绑定信息。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:04:37.553

只是为了确保，标记中的处理程序和后面代码中使用正确处理程序的方法。

像这样：

```
Protected Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender

End Sub 
```

标记如下：

```
<asp:DropDownList ID="ddlRampStandard" runat="server"     
 DataSourceID="RampStandardDataSource" DataTextField="StandardName"      
 DataValueField="StandardName" RepeatDirection="Horizontal"      
 ViewStateMode="Enabled" OnPreRender="Page_PreRender"></asp:DropDownList> 
```

刚才在我的机器上尝试了一个类似的解决方案，它奏效了。

# php - Mysql、php和html表单同步

> ID：11001009
> 
> 赞同：0
> 
> 时间：2012-06-12T16:42:19.350
> 
> 标签：php, mysql, html

在表单方面我很弱，这里似乎缺少一些东西，提交表单时没有填充 mysql 表，就网络上的信息而言，有很多关于如何制作表格，php上有很多，mysql上有很多，但我没有找到任何可以同步这三个的东西，这就是我所拥有的：

形式（不用担心，一旦我得到功能，我就会将样式设置为外部）：

```
<div style="background-color:#424142; width:100%; margin-left:7%; margin-top:20px;">
    <form action="templates/tmpl_tmd022/scripts/post_subscription.php" method="post">
        <table width="100%" border="0">
            <tr>
                <td style="padding:5px; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;" colspan="2">Sign up now to recieve our free newsletter. </td>
            </tr>
            <tr>
                <td style="padding:5px; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;" width="30%">First name:</td>
                <td style="padding:5px; padding-left:0; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;" width="70%"><input type="text" name="fname"  /></td>
            </tr>
            <tr>
                <td style="padding:5px; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;">Last name:</td>
                <td style="padding:5px; padding-left:0; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;"><input type="text" name="lname" /></td>
            </tr>
            <tr>
                <td style="padding:5px; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;">Email:</td>
                <td style="padding:5px; padding-left:0; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#FFF;"><input type="text" name="email" /></td>
            </tr>
            <tr>
                <td style="padding:5px;">&nbsp;</td>
                <td style="padding:3px; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:12px; color:#000;"><input type="submit" value="Submit" style="color:000;"/></td>
            </tr>
        </table>
    </form>
</div> 
```

PHP：

```
<?php
    require "connect_to_mysql.php"; 

    $fname=($_POST['fname']); 
    $lname=($_POST['lname']); 
    $email=($_POST['email']); 

    $sql="INSERT INTO subscriptions (lname, fname, email) 
    VALUES ('$_POST[lname]','$_POST[fname]','$_POST[email]')"; 

    mysql_close(); 

    header('Location: http://www.*websitehidden*.com/')
?> 
```

包含的 connect_to_mysql.php 文件是数据库名称、数据库用户和数据库密码，它经过测试并且运行良好。

有没有人知道我犯了什么（可能是愚蠢的）错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:43:59.637

您没有包含执行查询的 mysql_query() 部分。

```
<?php
require "connect_to_mysql.php"; 

$fname = mysql_real_escape_string($_POST['fname']); 
$lname = mysql_real_escape_string($_POST['lname']); 
$email = mysql_real_escape_string($_POST['email']); 

$sql="INSERT INTO subscriptions (lname, fname, email) 
VALUES ('$lname','$fname','$email')"; 
mysql_query($sql);

mysql_close(); 

header('Location: http://www.*websitehidden*.com/')
?> 
```

此外，**不应使用**mysql_ 函数，它们是旧的做事方式，不如新的 mysqli_ 函数快速和安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:43:53.907

尝试修复您的 SQL：

```
$sql = "INSERT INTO subscriptions (lname, fname, email) 
        VALUES ('$lname','$fname','$email')"; 
mysql_query($sql); 
```

# mysql - 如何通过计算 CakePHP 2.0 中的字段来排序 sql 结果

> ID：11001010
> 
> 赞同：0
> 
> 时间：2012-06-12T16:42:22.537
> 
> 标签：mysql, count, find, cakephp-2.0

当我执行以下操作时：

```
$popular_posts = $this->Blog->find('all', array('limit' => 5)); 
```

我得到以下信息：

大批

```
(
    [0] => Array
        (
            [Blog] => Array
                (
                    [id] => 4fcfb37d-3eb0-4ec2-a744-175c987a2b72
                    [title] => This is a post example2
                    [short_description] => You've stumbled across our blog! Welcome! Here 
                    [created] => 2012-06-06 21:46:05
                    [modified] => 2012-06-07 16:01:24
                )

            [Reply] => Array
                (
                    [0] => Array
                        (
                            [id] => 4fcfb305-0c58-421b-9149-175c987a2b72
                        )

                    [1] => Array
                        (
                            [id] => 4fd0ae9e-dca0-4afe-862c-1258987a2b72
                        )

                )

        ),
    [1] ...
    [2] ...

) 
```

如何按回复数排序结果？？？（描述）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:16:02.263

尝试这个

```
$data = $this->Blog->find('all',array('group' =>array('Reply.id'), 
                        'order' => array('COUNT(Reply.id) DESC'),
                        'limit'=> 5)); 
```

# static-analysis - 是否可以在 frama-c 值分析器中注入值？

> ID：11001011
> 
> 赞同：2
> 
> 时间：2012-06-12T16:42:32.590
> 
> 标签：static-analysis, frama-c

我正在尝试使用 frama-c 值分析器来评估实际上是线程化的 C 代码。我想忽略任何可能发生的线程问题，只检查单个线程的可能值。到目前为止，这是通过将入口点设置为线程开始的位置来实现的。

现在我的问题是：在一个线程中，我读取由另一个线程写入的值，因为 frama-c 不（也不应该？）考虑线程（当前）它假设我的变量在某个广泛的范围内，但我知道范围实际上要小得多。是否可以告诉值分析器这个变量的值范围？

例子：

```
volatile int x = 0;

void f() {
    while(x==0)
        sleep(100);
    ...
} 
```

这里 frama-c 检测到 x 是易失的，因此具有范围 [--..--]，但我知道另一个线程将写入 x 的内容，我想告诉分析器 x 只能是 0 或 1。这对frama-c是否可行，尤其是在gui中？

在此先感谢基督教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:17:51.653

这目前无法自动实现。值分析认为 volatile 变量始终包含其基础类型中包含的全部值。然而，存在一个专有插件，它将对 volatile 变量的访问转换为对用户提供的函数的调用。在您的情况下，您的代码将基本上转换为：

```
int x = 0;

void f() {
while(1) {
    x = f_volatile_x();
    if (x == 0)
    sleep(100);
...
} 
```

通过`f_volatile_x`正确指定，您可以确保它只返回 0 到 1 之间的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:23:31.567

如果您正在研究的线程中未修改变量“x”，您还可以在“main”函数的开头使用以下命令对其进行初始化：

```
x = Frama_C_interval (0, 1); 
```

这是一个由 Frama-C 定义的函数，`...../share/frama-c/builtin.c`因此您必须在使用它时将此文件添加到您的输入中。

# c# - WebBrowser 控件 - 使用 JavaScript 按钮调用脚本问题

> ID：11001014
> 
> 赞同：3
> 
> 时间：2012-06-12T16:42:45.337
> 
> 标签：c#, javascript, wpf-controls, webbrowser-control, invokescript

我正在尝试登录网站。我能够使用所有连接信息正确填写表格，但我无法登录页面。该按钮是一个没有名称或ID的链接，所以我无法直接单击它。我一直在研究 invokeScript() 的东西，但这似乎也不起作用。这是按钮代码：

```
<div style="float:left; width:50px; margin: 0px auto 0px auto; text-align:center;">
    <div id="loginBtn">
        <a href="#" style="text-decoration:none; font-weight:bold; font-size: 10px; color:#FFFFFF;" onClick="javascript: LoginSubmit(event, true);" tabindex="3">
            Log In
        </a>
    </div>
</div> 
```

我怎样才能点击这样的链接？

我试过这样的东西：

```
webBrowserControl.InvokeScript("LoginSubmit", "true" );

webBrowserControl.InvokeScript("LoginSubmit(event, true)"); 
```

和

```
webBrowserControl.InvokeScript("LoginSubmit", new object[] { new string[] { "event", "true" } }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T16:49:21.273

您可能缺少**Document**，如下所示：

`webBrowserControl.Document.InvokeScript(name, args)`

如果不尝试使用[此包装方法](http://notions.okuda.ca/2009/06/11/calling-javascript-in-a-webbrowser-control-from-c/)调用脚本，请提取：

```
private object MyInvokeScript(string name, params object[] args) 
{ 
    return webBrowserControl.Document.InvokeScript(name, args); 
}

…

int x = 50; 
int y = 100; 
MyInvokeScript("LoginSubmit",x, y); 
```

# javascript - 使用正则表达式突出显示字符串中的变量词

> ID：11001020
> 
> 赞同：1
> 
> 时间：2012-06-12T16:43:19.133
> 
> 标签：javascript, regex

```
var stringToHighlight = [userinput] // may be any string like "foo", "bar" or "."
var stringToBeHighlighted = [any text] // Lorem Ipsum ... 
```

到目前为止我有

```
var regex = new RegExp(stringToHighlight, "g")                  
var highlightedString = stringToBeHighlighted.replace(regex, "<span class='highlight'>$&</span>") 
```

这不适用于字符“。” 例如，因为它被解释为正则表达式元字符。但不是实际字符“。” 导致所有文本都被突出显示。如何排除那些特殊的元字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:46:16.357

JS 没有任何内置函数来转义正则表达式中的元字符，但你可以使用这个函数（来自[这个答案](https://stackoverflow.com/a/9620214/107152)）：

```
function quotemeta(str){
    return str.replace(/[.+*?|\\^$(){}\[\]-]/g, '\\$&');
} 
```

这将像这样使用：

```
var regex = new RegExp(quotemeta(stringToHighlight), "g"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:48:44.160

您要么需要输入一个实际的正则表达式（通过在其前面放置“\”来转义“.”），或者您可以使用诸如[http://phpjs.org/functions/strstr:551](http://phpjs.org/functions/strstr:551)之类的函数来查找字符串文字

# php - 浏览器用户代理列表

> ID：11001021
> 
> 赞同：-1
> 
> 时间：2012-06-12T16:43:19.817
> 
> 标签：php

我正在使用函数来检测我的网站访问者浏览器类型，但后来我发现很多访问都带有无法检测到的浏览器，所以我可能需要对我的浏览器用户代理列表进行一些更新。

这是我的浏览器列表，其中浏览器名称为数组键，用户代理为值。

```
$browsers = array(
                'Opera' => 'Opera',
                'Mozilla Firefox'=> '(Firebird)|(Firefox)',
                'Galeon' => 'Galeon',
                'Mozilla'=>'Gecko',
                'MyIE'=>'MyIE',
                'Lynx' => 'Lynx',
                'Netscape' => '(Mozilla/4\.75)|(Netscape6)|(Mozilla/4\.08)|(Mozilla/4\.5)|(Mozilla/4\.6)|(Mozilla/4\.79)',
                'Konqueror'=>'Konqueror',
                'SearchBot' => '(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp/cat)|(msnbot)|(ia_archiver)',
                'Internet Explorer 8' => '(MSIE 8\.[0-9]+)',
                'Internet Explorer 7' => '(MSIE 7\.[0-9]+)',
                'Internet Explorer 6' => '(MSIE 6\.[0-9]+)',
                'Internet Explorer 5' => '(MSIE 5\.[0-9]+)',
                'Internet Explorer 4' => '(MSIE 4\.[0-9]+)',
); 
```

我的问题是在哪里可以获得更多浏览器名称/用户代理！例如 safari、navigator、mosaic、lynx、amaya、omniweb、avant、camino ..等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:47:24.393

不要重新发明轮子，使用 php 的[get_browser](http://php.net/manual/en/function.get-browser.php)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:38:33.507

以下站点有一个用户代理列表（蜘蛛、机器人、爬虫、浏览器）

[http://www.user-agents.org/](http://www.user-agents.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T16:47:45.873

我有一个列表.. 希望它也适用于你[浏览器列表](http://www.webdevelopersnotes.com/design/browsers_list.php3)

# ios - 自定义注释引脚

> ID：11001024
> 
> 赞同：0
> 
> 时间：2012-06-12T16:43:31.590
> 
> 标签：ios, mkmapview, mkannotationview

我有课

```
@interface MyLocation : NSObject <MKAnnotation> 

@property (copy) NSString *name;
@property (copy) NSString *address;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, strong) UIImage *banner;
@property (nonatomic, strong) NSString *descr; 
```

当我在地图上添加位置时，我希望该方法`- (MKAnnotationView*) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation`显示横幅....我该怎么做？

```
 - (MKAnnotationView*) mapView:
(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
    {
    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[MyLocation class]]) {
        MKPinAnnotationView *annotationView = (MKPinAnnotationView*)
        [mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] 
    initWithAnnotation:annotation reuseIdentifier:identifier];
                        } else {
                            annotationView.annotation = annotation;
                                }
                annotationView.enabled = YES;
                annotationView.canShowCallout = YES;
                annotationView.image = [UIImage imageNamed:@"Image2.jpg"];

                return annotationView;
        }
        return nil;
    } 
```

此方法更改所有注释引脚，但我需要为每个注释使用不同的图像。感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T11:29:29.290

自定义 CLASS MKAnnotationView，和 U 可以更改引脚参见苹果的示例代码：[地图标注](https://developer.apple.com/library/ios/samplecode/MapCallouts/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009746)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:09:48.340

您必须将 MKAnnotationView 用于自定义引脚，因为 MKPinAnnotationView 始终显示“默认”引脚。

# performance - 渲染大树时动态树变慢

> ID：11001026
> 
> 赞同：2
> 
> 时间：2012-06-12T16:43:33.887
> 
> 标签：performance, tree, dynatree

我正在寻找有关如何使用 Dynatree 渲染更快的大树的提示

我刚刚尝试了 Dynatree jquery 插件。

我尝试渲染一棵相当大的树： Root 正好有 7592 个子节点，距离 root 大约 10 层

在装有 Firefox 浏览器的 PC 上，Firebug 告诉我，我得到：

*   页面内容在 2.68 秒后加载（这取决于网络速度，要加载 356 KB）
*   3s 加载 DOM 内容
*   然后“加载”到达 9s

所以渲染树大约需要 6 秒。

构建树的代码由 HTML 组成，带有 ul、li 和“a href”标签整个树是在服务器端根据请求创建的，使用经典的 ASP 和 SQL 服务器生成页面的 HTML 不需要超过 500 毫秒

有没有办法提高速度？使用 JSON 吗？使用激光模式？如何在非 ajax 树上设置此模式？

此致

弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:09:51.570

这听起来比我预期的要慢。

我建议在服务器上构建数据并以 JSON 格式发送。如果这仍然太慢，只发送第一层或第一层和第二层并将它们标记为“惰性”，这样它们就会按需加载。您可以在这里找到一个示例： [http ://wwwendt.de/tech/dynatree/doc/sample-lazy.html](http://wwwendt.de/tech/dynatree/doc/sample-lazy.html)

还有一个基准页面，您可以将其用作参考：[http ://wwwendt.de/tech/dynatree/doc/test-bench.html](http://wwwendt.de/tech/dynatree/doc/test-bench.html)

# common-lisp - Lisp-遍历列表并替换值

> ID：11001029
> 
> 赞同：5
> 
> 时间：2012-06-12T16:43:43.053
> 
> 标签：common-lisp

在这个问题中，我有三个（结构相同的）列表。两个有所有数字，另一个用 填充`nil`。我正在尝试通过添加两个列表中的相应值来替换空列表中的相应值。到目前为止，我使用循环并用于`setf`替换值。

```
(defun add-two-lists (list1 list2 list3)
   (loop for a in list1
        for b in list2
        for c in list3 do
        (setf c (+ a b)))) 
```

问题是这个函数没有破坏性。如何使此功能具有破坏性？

* * *

好的，我知道我可以使用 an`apply`来做到这一点，但是为了将来或切线的目的，有没有办法使用循环来做同样的事情？

* * *

我决定求助于我的倒数第二个解决方案；使用列表长度来横向列表。

```
(defun add-two-lists (list1 list2 list3)
       (loop for x from 0 to (- (list-length list1) 1) do
            (setf (nth x list3) (+ (nth x list1) (nth x list2))))
       (values list3)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:54:38.590

这是一种方法：

```
(defun add-two-lists (list1 list2 list3)
   (loop for a in list1
        for b in list2
        for c on list3 do
        (rplaca c (+ a b))) 
```

附录

这是另一种使用地图而不是循环的方式：

```
(defun add-two-lists (list1 list2 list3)
  (mapl #'(lambda (cl al bl) (rplaca cl (+ (car al) (car bl))))
    list3 list1 list2)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T17:21:19.890

在不使用循环的情况下做同样事情的另一种方法（尽管它在概念上相似）

```
(defun add-two-lists (a b c &optional (d c))
  (if a
    (add-two-lists
     (cdr a) (cdr b)
     (cdr (rplaca c (+ (car a) (car b)))) d) d))

(add-two-lists '(1 2 3 4 5) '(1 2 3 4 5) '(nil nil nil nil nil)) 
```

**编辑**

```
(defun add-two-lists (a b c &optional (d c))
  (if a
    (add-two-lists
     (cdr a) (cdr b)
     (cdr (rplaca c (+ (car a) (car b)))) d) d))

(time
 (dotimes (i 1e6)
   (add-two-lists '(1 2 3 4 5)
          '(1 2 3 4 5)
          '(nil nil nil nil nil))))

;; Evaluation took:
;;   0.077 seconds of real time
;;   0.076004 seconds of total run time (0.076004 user, 0.000000 system)
;;   98.70% CPU
;;   214,723,476 processor cycles
;;   0 bytes consed

(defun add-two-lists-1 (list1 list2 list3)
  (loop for a in list1
     for b in list2
     for c on list3 do
       (rplaca c (+ a b))))

(time
 (dotimes (i 1e6)
   (add-two-lists-1 '(1 2 3 4 5)
          '(1 2 3 4 5)
          '(nil nil nil nil nil))))

;; Evaluation took:
;;   0.060 seconds of real time
;;   0.060004 seconds of total run time (0.060004 user, 0.000000 system)
;;   100.00% CPU
;;   169,395,444 processor cycles
;;   0 bytes consed 
```

**编辑 2**

但请注意优化的版本行为。可能又是 YMMV，但这是我在 64 位 Debian 和 SBCL 上得到的。

```
(defun add-two-lists (a b c &optional (d c))
  (declare (optimize (speed 3) (safety 0)))
  (declare (type list a b c d))
  (if a
    (add-two-lists
     (cdr a) (cdr b)
     (cdr (rplaca
       c 
       (the fixnum
         (+ (the fixnum (car a))
        (the fixnum (car b)))))) d) d))

(time
 (dotimes (i 1e6)
   (add-two-lists '(1 2 3 4 5)
          '(1 2 3 4 5)
          '(nil nil nil nil nil))))

;; Evaluation took:
;;   0.041 seconds of real time
;;   0.040002 seconds of total run time (0.040002 user, 0.000000 system)
;;   97.56% CPU
;;   114,176,175 processor cycles
;;   0 bytes consed

(defun add-two-lists-1 (list1 list2 list3)
  (declare (optimize (speed 3) (safety 0)))
  (loop for a fixnum in list1
     for b fixnum in list2
     for c cons on list3 do
       (rplaca c (the fixnum (+ a b)))))

(time
 (dotimes (i 1e6)
   (add-two-lists-1 '(1 2 3 4 5)
          '(1 2 3 4 5)
          '(nil nil nil nil nil))))

;; Evaluation took:
;;   0.040 seconds of real time
;;   0.040003 seconds of total run time (0.040003 user, 0.000000 system)
;;   100.00% CPU
;;   112,032,123 processor cycles
;;   0 bytes consed 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T20:30:04.103

Common Lisp 为此提供了一个函数：[MAP-INTO](http://www.lispworks.com/documentation/HyperSpec/Body/f_map_in.htm#map-into)。

# jquery - 如何在 Web 驱动程序中检查页面是否已完全加载？

> ID：11001030
> 
> 赞同：29
> 
> 时间：2012-06-12T16:43:43.973
> 
> 标签：jquery, selenium, webdriver, wait

我正在编写一些 Java Webdriver 代码来自动化我的应用程序。如何正确检查页面是否已加载？该应用程序也有一些 Ajax 调用。

我已经声明了对 WebDriver 的隐式等待。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-12T17:50:57.367

Selenium 为您做到了。或者至少它尽力而为。有时它不够用，你必须帮助它一点点。通常的解决方案是[`Implicit Wait`](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)解决大多数问题。

如果您真的知道自己在做什么以及为什么这样做，您*可以尝试*编写一个通用方法来检查页面是否完全加载。但是，它不能适用于所有网络和每种情况。

* * *

相关问题：[Selenium WebDriver : Wait for complex page with JavaScript(JS) to load](https://stackoverflow.com/questions/10720325/selenium-webdriver-wait-for-complex-page-with-javascript-to-load/10726369#10726369)，请在此处查看我的答案。

较短的版本：你永远无法确定。

“正常”负载很容易 - [`document.readyState`](https://developer.mozilla.org/en/DOM/document.readyState)。当然，这是由 Selenium 实现的。有问题的是异步请求，AJAX，因为你永远无法判断它是否已经完成。今天的大多数网页都有永远运行的脚本并一直在轮询服务器。

您可以做的各种事情都在上面的链接下。或者，像 95% 的其他人一样，在需要时使用[`Implicit Wait`](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)隐含和[`Explicit Wait`](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-waits)+ 。[`ExpectedConditions`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)

例如，单击后，页面上的某些元素应该变得可见，您需要等待它：

```
WebDriverWait wait = new WebDriverWait(driver, 10);  // you can reuse this one

WebElement elem = driver.findElement(By.id("myInvisibleElement"));
elem.click();
wait.until(ExpectedConditions.visibilityOf(elem)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-25T17:24:29.510

简单*的 ready2use*片段，非常适合我

```
static void waitForPageLoad(WebDriver wdriver) {
    WebDriverWait wait = new WebDriverWait(wdriver, 60);

    Predicate<WebDriver> pageLoaded = new Predicate<WebDriver>() {

        @Override
        public boolean apply(WebDriver input) {
            return ((JavascriptExecutor) input).executeScript("return document.readyState").equals("complete");
        }

    };
    wait.until(pageLoaded);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-08T18:06:33.357

您可以在 WepPage 中设置一个 JavaScript 变量，该变量在加载后即被设置。你可以把它放在任何地方，但如果你使用的是 jQuery，`$(document).onReady`这不是一个糟糕的起点。如果没有，那么您可以将其放在`<script>`页面底部的标签中。

与检查元素可见性相比，此方法的优点是您知道`wait`语句执行后页面的确切状态。

### 我的网页.html

```
... All my page content ...
<script> window.TestReady = true; </script></body></html> 
```

在您的测试中（C# 示例）：

```
// The timespan determines how long to wait for any 'condition' to return a value
// If it is exceeded an exception is thrown.
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(5.0));

// Set the 'condition' as an anonymous function returning a boolean
wait.Until<Boolean>(delegate(IWebDriver d)
{
    // Check if our global variable is initialized by running a little JS
    return (Boolean)((IJavaScriptExecutor)d).ExecuteScript("return typeof(window.TestReady) !== 'undefined' && window.TestReady === true");
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-16T18:12:05.107

我知道这篇文章很旧。但是在从上面收集了所有代码之后，我做了一个很好的方法（解决方案）来处理 ajax 运行和常规页面。该代码仅针对 C# 编写（因为经过一年的折腾，Selenium 绝对是 C# Visual Studio 的最佳选择）。

该方法用作扩展方法，意思是简单地说；在这种情况下，您可以向对象 IWebDriver 添加更多功能（方法）。重要的是您必须在参数中定义：'this' 才能使用它。

如果页面没有响应，超时变量是 webdriver 等待的秒数。使用“Selenium”和“Selenium.Support.UI”命名空间，可以执行一段返回布尔值的javascript，无论文档是否准备好（完整）以及是否加载了jQuery。如果页面没有 jQuery，那么该方法将抛出异常。此异常被错误处理“捕获”。在 catch 状态下，只会检查文档的就绪状态，而不检查 jQuery。

```
public static void WaitUntilDocumentIsReady(this IWebDriver driver, int timeoutInSeconds) {
    var javaScriptExecutor = driver as IJavaScriptExecutor;
    var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(timeoutInSeconds));

    try {
        Func<IWebDriver, bool> readyCondition = webDriver => (bool)javaScriptExecutor.ExecuteScript("return (document.readyState == 'complete' && jQuery.active == 0)");
        wait.Until(readyCondition);
    } catch(InvalidOperationException) {
        wait.Until(wd => javaScriptExecutor.ExecuteScript("return document.readyState").ToString() == "complete");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T17:26:47.900

最近，当我处理 AJAX 应用程序/RIA 时，我遇到了同样的问题！我使用了隐式等待，时间约为 90 秒。它会等待，直到元素可用......所以，我们可以做些什么来确保该页面完全加载，

添加一个布尔语句，检查条件（元素的特定部分）是否存在并将其分配给变量，检查条件并且仅当它为真时，“执行必要的操作！”...在这样，我发现，两个等待都可以使用......

前任：

```
@Before

{ implicit wait statement}

@Test

{

boolean tr1=Driver.findElement(By.xpath("xx")).isEnabled/isDisplayed;

if (tr1==true && ____)//as many conditions, to make sure, the page is loaded

{

//do the necessary set of actions...
driver.findElement(By.xpath("yy")).click();

}

} 
```

希望这可以帮助！！它在实施阶段，对我来说也是......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T19:13:09.917

以下是我将如何解决它，使用代码片段给你一个基本的想法：

```
public class IFrame1 extends LoadableComponent<IFrame1> {

    private RemoteWebDriver driver;

    @FindBy(id = "iFrame1TextFieldTestInputControlID" ) public WebElement iFrame1TextFieldInput;
    @FindBy(id = "iFrame1TextFieldTestProcessButtonID" ) public WebElement copyButton;

    public IFrame1( RemoteWebDriver drv ) {
        super();
        this.driver = drv;
        this.driver.switchTo().defaultContent();
        waitTimer(1, 1000);
        this.driver.switchTo().frame("BodyFrame1");
        LOGGER.info("IFrame1 constructor...");
    }

    @Override
    protected void isLoaded() throws Error {        
        LOGGER.info("IFrame1.isLoaded()...");
        PageFactory.initElements( driver, this );
        try {
            assertTrue( "Page visible title is not yet available.", 
                    driver.findElementByCssSelector("body form#webDriverUnitiFrame1TestFormID h1")
                    .getText().equals("iFrame1 Test") );
        } catch ( NoSuchElementException e) {
            LOGGER.info("No such element." );
            assertTrue("No such element.", false);
        }
    }

    /**
     * Method: load
     * Overidden method from the LoadableComponent class.
     * @return  void
     * @throws  null
     */
    @Override
    protected void load() {
        LOGGER.info("IFrame1.load()...");
        Wait<WebDriver> wait = new FluentWait<WebDriver>( driver )
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring( NoSuchElementException.class ) 
                .ignoring( StaleElementReferenceException.class ) ;
        wait.until( ExpectedConditions.presenceOfElementLocated( 
                By.cssSelector("body form#webDriverUnitiFrame1TestFormID h1") ) );
    }
.... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-21T21:49:56.380

您可以使用 driver.getPageSource() 获取网站的 HTML。如果 html 在给定的时间间隔内没有变化，这意味着页面已完成加载。一两秒应该足够了。如果你想加快速度，你可以比较两个 html 的长度。如果它们的长度相等，则 html 应该相等，这意味着页面已完全加载。JavaScript 解决方案对我不起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-28T17:03:05.040

解决方案是使用隐式等待，这将解决您的页面加载问题。

```
WebDriverWait waitForElement = new WebDriverWait(driver, 15);
WebElement element = driver.findElement(By.id("myElement"));
element.click(); 
wait.until(ExpectedConditions.visibilityOf(element)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-16T18:21:36.983

下面是我的 BasePageObject 类中用于等待的一些代码：

```
public void waitForPageLoadAndTitleContains(int timeout, String pageTitle) {
    WebDriverWait wait = new WebDriverWait(driver, timeout, 1000);
    wait.until(ExpectedConditions.titleContains(pageTitle));
}

public void waitForElementPresence(By locator, int seconds) {
    WebDriverWait wait = new WebDriverWait(driver, seconds);
    wait.until(ExpectedConditions.presenceOfElementLocated(locator));
}

public void jsWaitForPageToLoad(int timeOutInSeconds) {
    JavascriptExecutor js = (JavascriptExecutor) driver;
    String jsCommand = "return document.readyState";

    // Validate readyState before doing any waits
    if (js.executeScript(jsCommand).toString().equals("complete")) {
        return;
    }

    for (int i = 0; i < timeOutInSeconds; i++) {
        TimeManager.waitInSeconds(3);
        if (js.executeScript(jsCommand).toString().equals("complete")) {
            break;
        }
    }
}

   /**
     * Looks for a visible OR invisible element via the provided locator for up
     * to maxWaitTime. Returns as soon as the element is found.
     *
     * @param byLocator
     * @param maxWaitTime - In seconds
     * @return
     *
     */
    public WebElement findElementThatIsPresent(final By byLocator, int maxWaitTime) {
        if (driver == null) {
            nullDriverNullPointerExeption();
        }
        FluentWait<WebDriver> wait = new FluentWait<>(driver).withTimeout(maxWaitTime, java.util.concurrent.TimeUnit.SECONDS)
                .pollingEvery(200, java.util.concurrent.TimeUnit.MILLISECONDS);

        try {
            return wait.until((WebDriver webDriver) -> {
                List<WebElement> elems = driver.findElements(byLocator);
                if (elems.size() > 0) {
                    return elems.get(0);
                } else {
                    return null;
                }
            });
        } catch (Exception e) {
            return null;
        }
    } 
```

支持方法：

```
 /**
     * Gets locator.
     *
     * @param fieldName
     * @return
     */
    public By getBy(String fieldName) {
        try {
            return new Annotations(this.getClass().getDeclaredField(fieldName)).buildBy();
        } catch (NoSuchFieldException e) {
            return null;
        }
    } 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-02-08T11:45:30.373

您可以截取屏幕截图并将呈现的页面保存在某个位置，如果页面加载完全没有损坏的图像，您可以检查屏幕截图

# asp.net-mvc - ASP.NET MVC 应用程序超时不起作用

> ID：11001035
> 
> 赞同：1
> 
> 时间：2012-06-12T16:43:48.500
> 
> 标签：asp.net-mvc, session, web-config, timeout, session-state

在我的 Web.config 文件中，我一直在尝试设置会话超时。我使用了以下代码：

```
<configuration>
   <system.web>
      <sessionState timeout="1"></sessionState>
   </system.web>
</configuration> 
```

当我运行应用程序时，超时仍然设置为默认的 20 分钟。试图找出设置不适用的原因。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T16:48:23.180

不要混淆 ASP.NET 会话超时（这是您设置的）和[Forms Authentication](http://msdn.microsoft.com/en-us/library/ff647070.aspx) cookie 超时，这是完全不同的，由`<forms>`标签控制：

```
<authentication mode="Forms">
  <forms
    loginUrl="/login"
    timeout="1" />
</authentication> 
```

ASP.NET 会话使用 cookie 来跟踪用户（它与身份验证无关）并将他们的唯一 ID 与存储在服务器上的哈希表相关联。另一方面，表单身份验证是在 ASP.NET 中跟踪经过身份验证的用户的一种方法。它使用 cookie，但它与 ASP.NET 会话不同。

# groovy - 不同的 groovy shell 详细级别是什么意思？

> ID：11001044
> 
> 赞同：0
> 
> 时间：2012-06-12T16:44:38.160
> 
> 标签：groovy

`org.codehaus.groovy.tools.shell.IO`有四个详细级别，但并没有很清楚它们的作用。哪个是系统默认值？它们之间有什么区别？到目前为止，我唯一注意到的是，如果 Verbosity 设置为 quiet，Groovysh 将不会在 shell 中打印最后返回的语句......

```
package org.codehaus.groovy.tools.shell.IO

public static final Verbosity QUIET = new Verbosity("QUIET");

public static final Verbosity INFO = new Verbosity("INFO");

public static final Verbosity VERBOSE = new Verbosity("VERBOSE");

public static final Verbosity DEBUG = new Verbosity("DEBUG"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:53:17.217

看起来默认是`INFO`，而且[是在这里设置的](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/tools/shell/util/Preferences.java)。

而且看起来[这里是用来](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/tools/shell/util/Logger.java)根据Level来设置输出的颜色的。但是，我只对代码进行了简短的查看和 grep，可能是错误的或遗漏了一些东西。

# sql - 触发更新以更新所有子节点

> ID：11001045
> 
> 赞同：1
> 
> 时间：2012-06-12T16:44:40.397
> 
> 标签：sql, function, postgresql, triggers, plpgsql

在阅读了几篇关于分层数据表的文章后，我进入了一个如下所示的表：LOCAL：

```
|id|name        |parent_id|abbreviature | path        |
------------------------------------------------------- 
|1 |"Shoping"   |NULL     | "Sh"        | "Sh"        |
|2 |"Building A"|1        | "A"         | "Sh.A"      |
|3 |"Building B"|1        | "B"         | "Sh.B"      |
|4 |"Building C"|1        | "C"         | "Sh.C"      |
|5 |"Floor -1"  |2        | "-1"        | "Sh.A.-1"   |
|6 |"Floor 0"   |2        | "0"         | "Sh.A.0"    |
|7 |"Floor 1"   |2        | "1"         | "Sh.A.1"    |
|8 |"Floor 2"   |2        | "2"         | "Sh.A.2"    |
|9 |"Room 101"  |7        | "101"       | "Sh.A.1.101"|
|10|"Hospital"  |NULL     | "Hosp"      | "Hosp"      | 
|11|"Secretary" |10       | "Secrt"     | "Secrt"     | 
```

等等。这种方式特别容易选择一个节点的所有后代。

我创建了这个函数来生成路径：

```
CREATE OR REPLACE FUNCTION teste1_trig () RETURNS TRIGGER AS '
  DECLARE
        dot    varchar := ''.'';
        npath local.path%TYPE;
  BEGIN
    IF NEW.parent_id IS NULL THEN
        NEW.path:=NEW.abbreviature;
        RETURN NEW;
    ELSEIF NEW.parent_id IS NOT NULL THEN
        SELECT path INTO npath FROM local WHERE id=NEW.parent_id;
        NEW.path:=npath||dot||NEW.abbreviature;
        RETURN NEW;
    END IF;
  END;' LANGUAGE 'plpgsql'; 
```

此功能由以下触发器激活：

```
CREATE TRIGGER trigger_teste
  BEFORE INSERT OR UPDATE
  ON local
  FOR EACH ROW
  EXECUTE PROCEDURE teste1_trig(); 
```

除了当我从具有子节点的节点更新缩写时，每件事都完美无缺，子节点仍然使用旧路径。

我想更改函数以更新当前行中的所有子项。这是选择所有孩子的查询：

```
SELECT id,name,parent_id FROM local WHERE id IN ( 
(WITH RECURSIVE parent AS
(
    SELECT id, parent_id  from local WHERE id = id_from_the_modified_node
    UNION ALL 
    SELECT t.id, t.parent_id FROM parent
    INNER JOIN local t ON parent.id =  t.parent_id
)

SELECT id FROM  parent
WHERE id <> id_from_the_modified_node) ); 
```

如果缩写已更新（即更改缩写名称或更改 parent_id），我如何更改要在一系列行中执行的功能？

我正在使用 Postgresql v9.1。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:52:21.073

我找到了我认为最适合这种情况的答案。如我错了请纠正我！

```
DECLARE 
id_upd INT[];
...
BEGIN
...

SELECT array ( SELECT id FROM local WHERE parent_id=NEW.id ) into id_upd; --- select direct childs
    IF id_upd IS NOT NULL THEN              
        FOREACH i IN ARRAY id_upd LOOP      
           UPDATE local SET path=NEW.path||'.'||abbreviature where id=i; --- update them
        END loop;       
    END IF;

END; 
```

这样，我只需更新节点的所有直接子节点，然后触发器再次为子节点的子节点触发，依此类推。

只是不要忘记检查父节点是否不是该节点的后代，这样您将创建一个无限循环。

最好的祝福

# c# - URI / URL 的正则表达式

> ID：11001046
> 
> 赞同：0
> 
> 时间：2012-06-12T16:44:41.100
> 
> 标签：c#, .net, windows

我目前正在通过 HTML 页面搜索特定链接，目前我有一个如下的正则表达式来获取通用 URI：

```
Regex regex = new Regex(@"(https?|ftp|file)\://[A-Za-z0-9\.\-]+(/[A-Za-z0-9\?\&\=;\+!'\(\)\*\-\._~%]*)*"); 
```

虽然 HTML 中有几个链接，所以它选择了第一个，因为我要提取的链接如下：

```
http://*.*.com/dlp/*/*/* 
```

使用正则表达式如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:06:07.930

试试这个：

```
http\://[A-Za-z0-9\.\-]+\.com/dlp[A-Za-z0-9\.\-/]* 
```

您可能需要再次转义一些字符。

# r - 使用 GAM 拟合降低因子水平

> ID：11001047
> 
> 赞同：0
> 
> 时间：2012-06-12T16:44:49.573
> 
> 标签：r, r-factor, gam

我正在使用 GAM 模型根据给定点的某些环境条件来预测物种丰度。我创建了一个广义加法模型 (GAM) 来执行此操作并以此为基础进行预测。但是，我在模型方程中有一个分类变量（沉积物类型 = [1,2,3,4]）。该方程似乎工作得很好，但是拟合的结果似乎将因子水平“1”吸收到截距中。见下文。

谁能解释这个模型发生了什么？我不完全明白。这是在 R 中使用 mgcv 包运行的。谢谢！

```
Equation:            
abundance ~ s(x) + s(y) + s(z) + s(w) + factor(Sediment)
Parametric coefficients:  
Estimate Std. Error z value Pr(>|z|)

(Intercept)   ------------_7.138 ----- 0.000 ------7541.26   2e-16  
        factor(Sediment)2 -0.2496868  0.0016749 -149.08   2e-16  
        factor(Sediment)3 -0.5128687  0.0058931  -87.03   2e-16  
        factor(Sediment)4 -0.1467369  0.0034606  -42.40   2e-16

Approximate significance of smooth terms:  
              _________   _edf Ref.df  Chi.sq p-value    
s(x) 3.983      4   69264  2e-16  
s(y)  3.998      4 1147536  2e-16   
s(z)  3.995      4  197458  2e-16  
s(w)   3.999      4  340085  2e-16 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:29:25.713

截距代表沉积物类型 1 的平均丰度，因为这将是参考水平（第一水平）。估计值是其他沉积物类型水平的系数，表示该类型与参考水平（沉积物类型 1）的偏差。

这是模型中因子变量的标准约定；如果您在模型中有截距，则无法表示它**，并且**因子的每个级别作为模型矩阵的结果列将彼此线性相关 - 您可以用至少少一列表示相同的信息模型矩阵。

如果需要，可以通过添加`- 1`到公式中来删除截距，但我在这里看不到这样做的原因。

# ipad - iPad 上的下拉菜单

> ID：11001050
> 
> 赞同：1
> 
> 时间：2012-06-12T16:45:13.500
> 
> 标签：ipad, drop-down-menu

我正在使用 CSS 作为我正在构建的网站上的下拉菜单。当您将鼠标悬停在父选项卡上时，下拉菜单会使用 CSS3 的转换属性淡入。我遇到的问题是父标签链接到另一个页面，因此当您在 iPad 上点击父标签时，它会将您带到该页面而不是显示下拉菜单 - 这会导致可用性问题。

有没有办法让它在第一次点击时出现下拉菜单，第二次点击将您带到父页面？

这是我用来显示菜单的 HTML：

```
<nav>
  <ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="http://www.apple.com">Team</a>
      <ul>
        <li><a href="http://www.apple.com">Our Workers</a></li>
        <li><a href="http://www.apple.com">Join Us</a></li>
      </ul>
     </li>
    <li><a href="#">Contact</a></li>
  </ul>
</nav> 
```

这是一个 jsFiddle 链接：http: [//jsfiddle.net/A64QU/197/](http://jsfiddle.net/A64QU/197/)

在此先感谢，感谢您的帮助。​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:16:00.750

您在设计上走在正确的轨道上，该设计在第一次点击时调用菜单，在第二次点击时调用父页面。这将适用于用户不能总是“悬停”的仅触摸屏或有时触摸屏的设备，并且对于难以将光标稳定在菜单上的用户来说至关重要，因此我建议在悬停显示菜单上使用它无论是 Mobile Safari、Internet Explorer 还是任何其他浏览器，都可以进行设计。

要执行您的要求，请处理`<a>`标签上的单击事件（例如使用 jQuery：[http](http://api.jquery.com/click/) ://api.jquery.com/click/ ）并以这种方式隐藏/显示菜单（您可以使用 jQuery 的切换，或显示/ hide.) 然后扩展代码考虑菜单是显示还是隐藏来决定是否应该阻止`<a>`标签的默认行为并显示菜单（例如jQuery的preventDefault：[http](http://api.jquery.com/event.preventDefault/) ://api.jquery.com/event.preventDefault/ ）或允许发生单击的默认行为`<a>`：导航到`<a href>`URL。

考虑到使用这种方法，您可能还需要为用户提供一种在菜单打开后关闭菜单的方法（并阻止页面的某些部分）。这通常是通过文档级别的单击处理程序完成的。

我不建议尝试实施触摸保持，因为这对用户来说并不为人所知。根据我的用户测试经验，大多数人都不会尝试这个，即使是看起来像是菜单的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:52:13.493

触摸 UI 比喻中没有“悬停”，尽管在 jQuery Mobile UI 中有一个对应的事件被称为 touchhold；当手指在触摸屏上保持按下一段时间（例如 500 毫秒、700 毫秒等）时，它会被触发。当您将手指按住某些键时，iPad 的虚拟键盘上会发生类似的情况，例如 [a] 键：您会弹出 [a] 的变体形式（变音符号、重音符号等）。

您可以连接起来，以便在 touchhold 而不是在点击事件上调用菜单打开代码，然后让各个菜单项监听点击事件。您要么必须自己通过编写所需的 javascript 来覆盖 Mobile Safari 的 touchevents，要么安装实现此行为的 UI 库。

# php - 每 10 分钟更新一次数据库的函数

> ID：11001051
> 
> 赞同：2
> 
> 时间：2012-06-12T16:45:16.103
> 
> 标签：php, linux, phpmyadmin

我有两个数据库。下面是我用来从第一个数据库获取信息的代码。

```
$myrow = mysql_query("SELECT SUM(uploaded) FROM peers",$db);
$sum = mysql_fetch_array($myrow);
$c = $sum[0] / 1000000;
$d = $c / 1000000;
$l = round($d,3);

echo "<p>UP: $l TB</p>";

$myrow1 = mysql_query("SELECT SUM(downloaded) FROM peers",$db);
$sum1 = mysql_fetch_array($myrow1);
$a = $sum1[0] / 1000000;
$b = $a / 1000000;
$k = round($b,3);

echo "<p>DW: $k TB</p>"; 
```

我需要将此信息添加到我的第二个数据库中，并每 10 分钟使用第一个数据库中的新信息对其进行更新。我正在使用 phpmyadmin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:52:04.130

您的问题非常笼统，因此我将尝试针对所有情况回答您应该创建一个每 10 分钟运行一次的进程（如果您使用 Linux，则为 cron，如果您使用 Windows，则为计划任务）

如果你使用**Linux**，你可以

*   **如果您真的想使用 PHP，请创建一个 PHP 脚本并使用 php 命令行调用它，**或者（最糟糕的是）创建一个 php 页面来执行您想要的操作，并让 CRON 使用 LYNX 浏览器每 10 分钟调用一次。
*   在 c/python/etc 中创建一个程序。连接到第一个数据库、查询信息并写入第二个数据库。
*   创建一个使用 mysql 命令行连接到数据库的 bash 脚本并执行相同的操作。（这样的好处是不用编程）

如果您使用**Windows**，您可以：

*   在 C# 或 vb.net 或类似中创建计划任务
*   使用 powershell 创建计划任务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:49:50.913

使用 cron 作业更新数据库中的信息。

[cron 作业或 PHP 调度程序](https://stackoverflow.com/questions/1268044/cron-jobs-or-php-scheduler)

[http://net.tutsplus.com/tutorials/other/scheduling-tasks-with-cron-jobs](http://net.tutsplus.com/tutorials/other/scheduling-tasks-with-cron-jobs/)

# php - Aweber 开发人员/实验室 API 工作

> ID：11001052
> 
> 赞同：0
> 
> 时间：2012-06-12T16:45:17.953
> 
> 标签：php, wordpress, aweber

[我刚刚在https://labs.aweber.com/apps](https://labs.aweber.com/apps)上创建了一个帐户以测试 Aweber 服务。我也在那里创建了一个应用程序。

首先，我正在尝试在我的这个开发者帐户中创建一个列表（列表名称），我不确定如何向其中添加列表？并且可以看到应用程序 ID，这是 list_id 吗？

其次，我正在尝试使用我的插件访问这个开发者帐户。我从他们的实验室下载了一个 PHP 库，其中包含 demo.php。我从实验室找到了消费者密钥和消费者密钥，并在我的 demo.php 中更改了它们，当我运行 demo.php 时，它总是带我到： [https ://auth.aweber.com/1.0/oauth/authorize?oauth_token =Aqz6ePpjxPrZ0DePqi3LDBmZ](https://auth.aweber.com/1.0/oauth/authorize?oauth_token=Aqz6ePpjxPrZ0DePqi3LDBmZ)

我不是要使用哪个登录名的用户？

第三，我正在尝试将订阅者添加到列表中。如何获取以下脚本的 accessKey、accessSecret、$account_id？

[https://labs.aweber.com/docs/code_samples/subs/create](https://labs.aweber.com/docs/code_samples/subs/create)

Aweber 的实验室文档很短，他们对这些东西不是很清楚。如果有人使用 Aweber 的实验室帐户进行测试，请给我您的建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:12:45.093

您还需要有一个 Aweber 帐户。开发者帐户只是为您提供创建应用程序并与他们的 API 对话的权限。

然后，您需要一个普通的 Aweber 帐户来添加订阅者或获取列表。

# grails - 将 Grails 2.0.4 部署到 Glassfish 3.1.2 服务器时出错

> ID：11001057
> 
> 赞同：1
> 
> 时间：2012-06-12T16:45:44.820
> 
> 标签：grails, spring-security, glassfish

我正在使用 Spring Security Core 1.2.7.3 插件，并在尝试部署时收到此错误：

```
Error occurred during deployment: Exception while loading the app : 
java.lang.IllegalStateException: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'transactionManagerPostProcessor': Initialization of bean failed; nested exception
 is     org.springframework.beans.factory.BeanCreationException: Error creating bean 
with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while
setting bean property 'sessionFactory'; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting 
bean property 'hibernateProperties'; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while    
setting 
bean property 'propertie .... msg.seeServerLog 
```

当我从 netbeans 中运行该应用程序时，它运行良好，但是当我尝试部署它时，我收到了错误。我已经尝试清理并取消注释`'mysql:mysql-connector-java:5.1.16'`BuildConfig.groovy 文件中依赖项中的代码。我正在使用已安装在 /lib 文件夹中的 Oracle jdbc 驱动程序。

我猜这与找不到 Oracle jdbc 驱动程序有关。

更新：我在下面添加了我的生产关闭

```
production {
    dataSource {
        url = "jdbc:oracle:thin:@MYSERVERNAME.com:xxxx:xxxxxxx"
        pooled = true
        properties {
           maxActive = -1
           minEvictableIdleTimeMillis=1800000
           timeBetweenEvictionRunsMillis=1800000
           numTestsPerEvictionRun=3
           testOnBorrow=true
           testWhileIdle=true
           testOnReturn=true
           validationQuery="SELECT 1"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:04:58.047

检查你的`DataSource.groovy`，很可能你的`production`关闭有问题。当您在 NetBeans 中运行时，您可能使用的是开发环境，但是当您构建一个战争时，Grails 使用的是生产环境。您可以尝试`-Dgrails.env=production`在 IDE 中设置标志，看看是否遇到了同样的问题。如果它有效，您就知道这是 Glassfish 的问题，如果它失败了，您就知道这是您的环境配置的问题。

**编辑：**

尝试将此添加到您的生产闭包中：

```
driverClassName = "oracle.jdbc.driver.OracleDriver"
dialect = "org.hibernate.dialect.Oracle10gDialect" 
```

或者任何适合您的 Oracle 版本的方言。

# c# - 创建对象时如何从实体框架生成Guid

> ID：11001059
> 
> 赞同：0
> 
> 时间：2012-06-12T16:45:49.797
> 
> 标签：c#, wpf, entity-framework

我已将数据网格绑定到上下文并在运行时添加了一些行，但它会生成异常并且由于 Guid 类型的属性仅生成空 Guid 而无法保存更改。
创建对象时如何从实体框架生成Guid？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:03:49.697

[您可以使用[DatabaseGenerated(DatabaseGeneratedOption.Identity)]](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedattribute%28v=vs.95%29.aspx)装饰您的 Guid 属性

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid Id { get; set; } 
```

这将在您每次插入时生成一个新的行 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:16:44.697

换句话说，您可以`YourEntity`像这样创建一个部分类：

```
public partial class YourEntity
{
   public Guid ID { get; set;}    
   public YourEntity()
   {
      ID = Guid.NewGuid();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T12:06:27.163

您只需将字段的属性“StoreGeneratedPattern”更改为 Identity。

所以你的对象'SalesOrderHeader'有一个字段'rowguid'。只需选择该字段并转到属性。

选择“StoreGeneratedPattern”并选择“身份”。

我应该指出，我也是 Entity Framework 的新手，但这对我有用。我只是希望在更新模型时保留此设置。如果不是，那会很痛苦。

谢谢，格雷。

# asp.net-mvc-3 - RoleProvider 不适用于服务器上的自定义 IIdentity 和 IPrincipal

> ID：11001061
> 
> 赞同：4
> 
> 时间：2012-06-12T16:45:54.203
> 
> 标签：asp.net-mvc-3, httpmodule, roleprovider, iprincipal, iidentity

我正在使用自定义`IIdentity`并`IPrincipal`在我的`ASP.NET MVC`应用程序中通过`EF 4.3`这里解释[（](https://stackoverflow.com/questions/10742259/using-custom-iprincipal-and-iidentity-in-mvc3)并遵循接受的答案的解决方案）。另外，我有一个自定义`RoleProvider`. **在本地（使用`IIS Express`），它可以正常工作**。但是现在，当我在真实主机上上传应用程序时，似乎所有用户都在`"admin"`起作用！例如，我创建了一个不在角色中的用户`"admin"`，但它可以访问所有受保护的页面（需要`"admin"`角色）。例如`Role.IsUserInRole`总是返回`true`。请问你有什么想法吗？你能帮助我吗？有什么我应该做的设置`IIS`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:08:01.527

我解释了这个解决方案，它对我有用。我现在没有，可能你应该回滚到`AuthenticateRequest`事件。如果你想尝试这种方式，你必须`RoleManagerModule`从你的项目中完全删除。试试这个，让我知道是否有效：

```
// in your module:

public void Init(HttpApplication context) {
    _application = context;
    // rollback this line:
    _application.AuthenticateRequest += ApplicationAuthenticateRequest;
}

// and in web.config

<!-- in system.web section: -->
</system.web>
  <!-- other stufs -->
  <httpModules>
    <remove name="RoleManager"/>
  </httpModules>
</system.web>

<!-- and in system.webServer section: -->
<system.webServer>
  <!-- other stufs -->
  <modules runAllManagedModulesForAllRequests="true">
    <remove name="RoleManager"/>
  </modules>
<system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T09:32:34.267

如果你想继续使用默认的 RoleManager，那就很难了。我尝试通过从默认值派生来创建自己的 RoleManager，但没有任何运气。经过 2 天的尝试，我最终为 RolePrincipal 创建了一些扩展方法：

```
public static bool IsEmployee(this RolePrincipal principal)
{
    if (IsAuthenticated())
        return principal.IsInRole("Employee");

    return false;
}

public static bool IsAdmin(this RolePrincipal principal)
{
    if (IsAuthenticated())
        return principal.IsInRole("Admin");

    return false;
} 
```

创建了一个新的 WebViewPage 类：

```
public abstract class BaseViewPage : WebViewPage
{
    public virtual new RolePrincipal User
    {
        get
        {
            if (base.User == null)
                return null;

            return (RolePrincipal)base.User; //Hard casting: If it goes wrong, it better goes wrong here
        }
    }
}

public abstract class BaseViewPage<TModel> : WebViewPage<TModel>
{
    public virtual new RolePrincipal User
    {
        get
        {
            if (base.User == null)
                return null;

            return (RolePrincipal)base.User; //Hard casting: If it goes wrong, it better goes wrong here
        }
    }
} 
```

修改了views文件夹中的web.config：

```
<pages pageBaseType="MyCompany.MyProject.BaseViewPage"> 
```

我所有的控制器都来自我的 BaseController：

```
public abstract class BaseController : Controller
{
    protected virtual new RolePrincipal User
    {
        get { return HttpContext.User as RolePrincipal; }
    }
} 
```

缺点是这些方法每次被调用时都会查询我的数据库。我正在使用 MVC 4 顺便说一句

希望这对任何人都有帮助

# mootools - 触发 dom 级事件

> ID：11001062
> 
> 赞同：1
> 
> 时间：2012-06-12T16:45:56.557
> 
> 标签：mootools

有谁知道在 dom 级别触发单击带有 mootools 的元素的方法？

`foo.fireEvent('click')`例如，只会触发*mootools 添加的*事件，这对这个特定的应用程序不是很有帮助。

这是一个玩具示例-您可以看到单击顶部按钮将触发两个事件处理函数，而尝试使用下部按钮触发单击只会触发第二个函数。

[http://jsfiddle.net/Tc4Bv/](http://jsfiddle.net/Tc4Bv/)

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:17:45.200

现代浏览器有一个`Element.click`可用的方法，所以你可以尝试这样的事情：

```
Element.implement({
    synteticClick: function() {
        var click = 'click';
        (this[click] && !(this[click]())) || this.dispatchEvent(new Event(click));
        return this;
    }
}); 
```

[http://jsfiddle.net/dimitar/LUPYK/](http://jsfiddle.net/dimitar/LUPYK/)

在最新的 FF、Chrome、IE9 和 IE9 中以 IE7 模式（兼容）工作/测试。

请记住，事件对象可能是基本的，即缺少 clientX/Y 等 - 所以它在很大程度上取决于你在另一边做什么......

# ruby - Rally App 中查询任务+最后更新用户

> ID：11001064
> 
> 赞同：0
> 
> 时间：2012-06-12T16:46:05.047
> 
> 标签：ruby, rally

我试图通过添加显示上次更新时间和谁进行更新的列来更新最近更改的应用程序。前一个可以通过将 LastUpdateDate 添加到查询中轻松完成，但后一个对我来说非常棘手。

我试图查询 RevisionHistory 如下

```
queries.push({
    type:"task",
    key:"tasks",
    fetch:"WorkProduct,Name,FormattedID,ToDo,Owner,LastUpdateDate,RevisionHistory",
    query: "(LastUpdateDate > " + lastWorkDateWithoutTime + ")",
    order: "LastUpdateDate desc"
}); 
```

然后提取最新更改的用户名

```
// query last update
var lastrevision = task.RevisionHistory.Revisions[0];
task.LastUpdateBy = lastrevision.User; 
```

但这行不通，因为我无法访问 task.RevisionHistory.Revisions

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:49:29.497

您几乎就在那里，您只需要确保更改 fetch 以包括 Revisions 以及 RevisionHistory。

```
queries.push({
    type:"task",
    key:"tasks",
    fetch:"WorkProduct,Name,FormattedID,ToDo,Owner,LastUpdateDate,RevisionHistory, Revisions",
    query: "(LastUpdateDate > " + lastWorkDateWithoutTime + ")",
    order: "LastUpdateDate desc"
}); 
```

# xcode - 是否可以在 Mac OS X 10.7.4 上并排安装 Xcode 4.3 和 Xcode 4.5？

> ID：11001069
> 
> 赞同：9
> 
> 时间：2012-06-12T16:46:19.007
> 
> 标签：xcode

是否可以在 Mac OS X 10.7.4 上并排安装 Xcode 4.3 和 Xcode 4.5？

我想安装预览版，但希望在继续之前进行一些确认。

发行[说明](http://adcdownload.apple.com//Developer_Tools/xcode_4.5_developer_preview/xcode_45dp_rn.pdf)没有提到 Xcode 4.3。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T17:00:53.223

是的，如果你从[开发者网站](https://developer.apple.com/downloads/)下载你的 Xcode 版本，你可以把它们放在两个不同的文件夹中。如果您为 .app 捆绑包提供两个不同的名称，它们甚至可以安装在同一个文件夹中。

您还可以将这两个图标都保留在 Dock 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:54:11.673

此外，对于命令行工具，使用命令 xcode-select 来切换当前 xcode。

# dart - Dart 中的关闭挂钩？

> ID：11001071
> 
> 赞同：1
> 
> 时间：2012-06-12T16:46:27.573
> 
> 标签：dart, dart-isolates

我需要在 Dart 程序结束之前采取一些措施（转储统计数据）。程序在 main 方法结束后继续（还有其他隔离），所以我无法准确确定程序结束的时刻。

在 Java 中，我可以使用 java.lang.Runtime.addShutdownHook。Dart 运行时中是否存在类似的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:18:15.233

它没有，至少不是直接在 Dart 中。如果你将 Dart VM 嵌入到你的程序中，你可以通过嵌入 API 为任何隔离注册这样的钩子。

将来，可能会有某种隔离监控（这在很多场景中都很有用），这样您就可以在隔离死亡（正常或未捕获的异常）时得到通知，但它不存在现在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T17:57:11.447

前段时间添加了对此的支持

见[https://code.google.com/p/dart/issues/detail?id=15188](https://code.google.com/p/dart/issues/detail?id=15188)

# .net - 存储点列表的最佳方法

> ID：11001080
> 
> 赞同：2
> 
> 时间：2012-06-12T16:47:15.177
> 
> 标签：.net

我想存储（大容量存储）点列表；更准确地说，它是一个列表，其中包含一个未定义（但不超过 200 个）坐标组的数量，其中每个组代表一个*区域*（一个矩形）。该*区域*可以是例如[`Rect`](http://msdn.microsoft.com/en-us/library/system.windows.rect.aspx)结构。

**对我来说最好的方法是什么：**
按重要性排序：

1.  存储内存中占用的空间（显然越少越好）。
2.  易于修改文件（最好能够识别和更改单个坐标，而不是由于更改而重写整个文件）。
3.  速读。
4.  速写。

我已经对如何设置工作有了一些想法（例如，由自定义类管理的简单文本格式、序列化、访问数据库（我只能使用访问数据库）……），但最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:49:11.633

SQL Server 具有可用于存储多边形的本机空间类型格式

[http://technet.microsoft.com/en-us/library/bb964711](http://technet.microsoft.com/en-us/library/bb964711)
[http://technet.microsoft.com/en-us/library/bb895267.aspx](http://technet.microsoft.com/en-us/library/bb895267.aspx)

对于操作，您可以将数据加载到对象中以读取/修改/验证每个多边形中的新点。

**编辑：** Jason Follas 在这里对空间类型进行了很好的探索： http:
[//jasonfollas.com/blog/archive/2008/03/14/sql-server-2008-spatial-data-part-1.aspx](http://jasonfollas.com/blog/archive/2008/03/14/sql-server-2008-spatial-data-part-1.aspx)

**编辑：**我看到 OP 被编辑，因为他只能使用访问数据库，所以我的答案不再适用......但我会保持原样，以防其他人发现这个问题*没有*这样的数据库限制。

至于 OP，仅使用访问数据库会极大地限制您的能力。
我会考虑两个表：**Area**和**Points**具有简单的一对多关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:57:38.370

这正是大多数 GIS 存储格式所解决的问题。有许多不同的格式可用，都有不同的优点和缺点。

OGR 项目支持[多种格式](http://www.gdal.org/ogr/ogr_formats.html)的 GIS 样式矢量数据，几乎所有这些格式都支持存储具有您所追求的大部分特征的区域要素。这里的“较新”格式之一是[ESRI 的文件地理数据库](http://resources.arcgis.com/content/geodatabases/10.0/file-gdb-api)格式，它通过 OGR 的 C# 包装器在 .NET 中得到支持。

或者，许多数据库系统，例如 SQL Server、PostgreSQL、Oracle 等，都支持将空间数据直接存储在数据库中。根据您的需要，这可能有点“重量级”，但将支持非常高的性能和可扩展性。

# iphone - 新使用 XCode Instruments 解释 iPhone 开发的内存警告，需要指导

> ID：11001088
> 
> 赞同：0
> 
> 时间：2012-06-12T16:47:54.163
> 
> 标签：iphone, ios, memory-management, cocos2d-iphone, xcode-instruments

我正在开发一款 iPhone 游戏，它会收到我没有足够经验来解释的内存警告。我一直在看一些 iTunesU 教程，但我仍然不是很擅长这个..

我在运行游戏时收到了各种内存泄漏，我想了解如何正确解释 Instruments 中的堆栈跟踪显示。

我附上了 ObjectAllocation 工具输出的屏幕截图![仪器输出](../Images/c81bdf6ead21fe8656c02dc7c99eca37.png) 。即使我缩放过滤器，我也无法过滤 ObjectSummary 中的数据![看到这个截图](../Images/54cc49083f2a79dc1f35e2c8b7f4117f.png)。

当初始化 GameScene 并加载所有数据（ParallaxBackground、CCSpriteBatchNode）并创建 Sprite 和子弹帧（在 spriteFrames 的 CCArray 中）时，内存使用量的峰值发生在[1中。](https://i.stack.imgur.com/T4oT1.png)

蓝色的大峰值只是在加载时，但应用程序冻结，然后在一段时间后崩溃，从图表中我看到内存使用量（蓝色条）已经下降..所以我不安静地明白这一点。此外，每当我尝试使用泄漏工具时，应用程序就会崩溃..

我知道对于有经验的人来说这是一个非常愚蠢的问题，但我只需要一些额外的帮助才能开始使用这个工具集。

**我认为内存问题是由于我在精灵缓存类中分配的精灵造成的，但我对此不确定，因此想使用 Instruments 对此进行调查，但无法找出如何查看导致内存警告的对象和如何访问堆栈跟踪..**

PS：我在第 4 代 iPod 上运行，我使用 Cocos2D 作为库

编辑：我也不明白为什么如果 Live Bytes 只有 1.01 MB，应用程序会崩溃，为什么我仍然会收到内存警告（请参阅黑旗）。是由于某些指针引用了某个空变量还是由于过多的内存分配？1.01 MB 对我来说似乎并不多..

**编辑 2：按照 Marion 的建议，我使用了 Activity Monitor 并意识到有效的实际内存使用量为 55.39 MB。我误解了“实时字节”这个词。我将尝试进一步深入研究这一点，并且暂时不接受这个问题，以便让其他人做出贡献。如果我在一两天内没有任何其他答案，我会将当前答案标记为已接受。谢谢！**

![活动监视器](../Images/93b1a4a1579f06ae6ef43ee3a3ec052c.png)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:00:03.840

如果要查找泄漏，请使用 Leaks 工具而不是 Allocations。要了解当前使用了多少内存，请使用 ActivityMonitor。

如果你在 cocos2d 中会有内存问题，你可以尝试清除缓存。在 cocos2d 中你可以清除`CCTextureCache`, `CCSpriteFrameCache`, `CCAnimationCache`. 它将释放未使用的纹理和帧。

如果您想检查是否所有不必要的纹理都从内存中删除，您可以在`CCTextureCache`类中放置断点并调用，例如，`sharedTextureCache`查看 throw textures_ 字典的内容。或者向这个类添加一些方法，以便能够转储缓存的当前状态。

# python - 如何向表单添加额外的文本区域字段

> ID：11001090
> 
> 赞同：0
> 
> 时间：2012-06-12T16:48:08.517
> 
> 标签：python, django

我需要生成几个文本区域供用户填写并提交回模型。但是，我认为他们都需要有不同的名字（我正确吗？）

如何为每个 textarea 生成随机名称，以及模型如何在获取 POST 请求的一个内获取数据？

谢谢！

编辑：我希望使用随机生成的名称来识别内容并将它们保存在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:59:34.290

在这里很难给你一个好的答案，因为你没有指出你真正想要达到的目标。您可以在表单中添加 1000 个文本字段，但如果它们与模型上的数据不相关，那么就没有多大意义，而且您忽略了重要的信息。

尽管如此，在一个非常基本的层面上，您可以像这样将额外的文本区域添加到您的表单中：

```
class MyModelForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyModelForm, self).__init__(*args, **kwargs)

        for i in range(1, 11):
            self.fields['mytextarea%d' % i] = forms.CharField(label='Textarea %d' % i, widget=forms.Textarea) 
```

**更新**

根据您的评论，以及您打算稍后实际存储和检索 textarea 字段的事实，您应该为它们创建一个单独的模型并通过一对多关系将其链接到您的主模型。例如：

```
class PrimaryModel(models.Model):
    ... # Stuff here

class TextareaModel(models.Model):
    myprimarymodel = models.ForeignKey(PrimaryModel)
    mytextarea = models.TextField() 
```

很难举一个很好的例子，因为你没有说明你的模型是什么样的，但基本的想法是你有一个模型，它只包含一个主模型的外键和一个 textarea 字段。然后，您可以通过模型表单集将这些文本区域视为内联。

# regex - 进行嵌套分支重置时需要确认捕获组编号

> ID：11001093
> 
> 赞同：0
> 
> 时间：2012-06-12T16:48:16.797
> 
> 标签：regex

在进行嵌套分支重置时，我已经对它可能如何工作做出了最好的猜测。我在互联网上搜索了嵌套信息，但找不到明确的确认。

主要关注的是紧随内部嵌套的序列会发生什么。
下面的示例是我最好的猜测，如果有人可以确认它的正确性或引导我朝着正确的方向前进，我将不胜感激。

示例正则表达式：

```
(a)(?|x(y)z(?|(u)(u)(u)(u)(u)(u)|(e)(e)(e)|(c))(K)|(p(q(?|(M)(M)(M)(M)(?|(T)(T)(T)|(D)(D))(R)(R)|(B)(B)(B)|(v)))r)(o)(i)|(t)s(w))(Z) 
```

编号排序的正则表达式：

```
1    ( a )
     (?|
          x
2         ( y )
          z
          (?|
3              ( u )
4              ( u )
5              ( u )
6              ( u )
7              ( u )
8              ( u )
            |  
3              ( e )
4              ( e )
5              ( e )
            |  
3              ( c )
          )
9         ( K )
       |  
2         (
               p
  3            (
                    q
                    (?|
    4                    ( M )
    5                    ( M )
    6                    ( M )
    7                    ( M )
                         (?|
    8                         ( T )
    9                         ( T )
    10                        ( T )
                           |  
    8                         ( D )
    9                         ( D )
                         )
    11                   ( R )
    12                   ( R )
                      |  
    4                    ( B )
    5                    ( B )
    6                    ( B )
                      |  
    4                    ( v )
                    )
  3            )
               r
2         )
13        ( o )
14        ( i )
       |  
2         ( t )
          s
3         ( w )
     )
15   ( Z ) 
```

* * *

*Perl 测试用例：*

[格式化：](http://www.regexformat.com)

```
 # (a)(?|x(y)z(?|(u)(u)(u)(u)(u)(u)|(e)(e)(e)|(c))(K)|(p(q(?|(M)(M)(M)(M)(?|(T)(T)(T)|(D)(D))(R)(R)|(B)(B)(B)|(v)))r)(o)(i)|(t)s(w))(Z)

 ( a )                         # (1)
 (?|
      x
      ( y )                         # (2)
      z
      (?|
           ( u )                         # (3)
           ( u )                         # (4)
           ( u )                         # (5)
           ( u )                         # (6)
           ( u )                         # (7)
           ( u )                         # (8)
        |  
           ( e )                         # (3)
           ( e )                         # (4)
           ( e )                         # (5)
        |  
           ( c )                         # (3)
      )
      ( K )                         # (9)
   |  
      (                             # (2 start)
           p
           (                             # (3 start)
                q
                (?|
                     ( M )                         # (4)
                     ( M )                         # (5)
                     ( M )                         # (6)
                     ( M )                         # (7)
                     (?|
                          ( T )                         # (8)
                          ( T )                         # (9)
                          ( T )                         # (10)
                       |  
                          ( D )                         # (8)
                          ( D )                         # (9)
                     )
                     ( R )                         # (11)
                     ( R )                         # (12)
                  |  
                     ( B )                         # (4)
                     ( B )                         # (5)
                     ( B )                         # (6)
                  |  
                     ( v )                         # (4)
                )
           )                             # (3 end)
           r
      )                             # (2 end)
      ( o )                         # (13)
      ( i )                         # (14)
   |  
      ( t )                         # (2)
      s
      ( w )                         # (3)
 )
 ( Z )                         # (15) 
```

Perl 引擎结果：
输入

```
axyzuuuuuuKZ
axyzeeeKZ
axyzcKZ
apqMMMMTTTRRroiZ
apqMMMMDDRRroiZ
apqBBBroiZ
apqvroiZ
atswZ 
```

输出

```
 **  Grp 0 -  ( pos 0 , len 12 ) 
axyzuuuuuuKZ  
 **  Grp 1 -  ( pos 0 , len 1 ) 
a  
 **  Grp 2 -  ( pos 2 , len 1 ) 
y  
 **  Grp 3 -  ( pos 4 , len 1 ) 
u  
 **  Grp 4 -  ( pos 5 , len 1 ) 
u  
 **  Grp 5 -  ( pos 6 , len 1 ) 
u  
 **  Grp 6 -  ( pos 7 , len 1 ) 
u  
 **  Grp 7 -  ( pos 8 , len 1 ) 
u  
 **  Grp 8 -  ( pos 9 , len 1 ) 
u  
 **  Grp 9 -  ( pos 10 , len 1 ) 
K  
 **  Grp 10 -  NULL 
 **  Grp 11 -  NULL 
 **  Grp 12 -  NULL 
 **  Grp 13 -  NULL 
 **  Grp 14 -  NULL 
 **  Grp 15 -  ( pos 11 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 14 , len 9 ) 
axyzeeeKZ  
 **  Grp 1 -  ( pos 14 , len 1 ) 
a  
 **  Grp 2 -  ( pos 16 , len 1 ) 
y  
 **  Grp 3 -  ( pos 18 , len 1 ) 
e  
 **  Grp 4 -  ( pos 19 , len 1 ) 
e  
 **  Grp 5 -  ( pos 20 , len 1 ) 
e  
 **  Grp 6 -  NULL 
 **  Grp 7 -  NULL 
 **  Grp 8 -  NULL 
 **  Grp 9 -  ( pos 21 , len 1 ) 
K  
 **  Grp 10 -  NULL 
 **  Grp 11 -  NULL 
 **  Grp 12 -  NULL 
 **  Grp 13 -  NULL 
 **  Grp 14 -  NULL 
 **  Grp 15 -  ( pos 22 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 25 , len 7 ) 
axyzcKZ  
 **  Grp 1 -  ( pos 25 , len 1 ) 
a  
 **  Grp 2 -  ( pos 27 , len 1 ) 
y  
 **  Grp 3 -  ( pos 29 , len 1 ) 
c  
 **  Grp 4 -  NULL 
 **  Grp 5 -  NULL 
 **  Grp 6 -  NULL 
 **  Grp 7 -  NULL 
 **  Grp 8 -  NULL 
 **  Grp 9 -  ( pos 30 , len 1 ) 
K  
 **  Grp 10 -  NULL 
 **  Grp 11 -  NULL 
 **  Grp 12 -  NULL 
 **  Grp 13 -  NULL 
 **  Grp 14 -  NULL 
 **  Grp 15 -  ( pos 31 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 34 , len 16 ) 
apqMMMMTTTRRroiZ  
 **  Grp 1 -  ( pos 34 , len 1 ) 
a  
 **  Grp 2 -  ( pos 35 , len 12 ) 
pqMMMMTTTRRr  
 **  Grp 3 -  ( pos 36 , len 10 ) 
qMMMMTTTRR  
 **  Grp 4 -  ( pos 37 , len 1 ) 
M  
 **  Grp 5 -  ( pos 38 , len 1 ) 
M  
 **  Grp 6 -  ( pos 39 , len 1 ) 
M  
 **  Grp 7 -  ( pos 40 , len 1 ) 
M  
 **  Grp 8 -  ( pos 41 , len 1 ) 
T  
 **  Grp 9 -  ( pos 42 , len 1 ) 
T  
 **  Grp 10 -  ( pos 43 , len 1 ) 
T  
 **  Grp 11 -  ( pos 44 , len 1 ) 
R  
 **  Grp 12 -  ( pos 45 , len 1 ) 
R  
 **  Grp 13 -  ( pos 47 , len 1 ) 
o  
 **  Grp 14 -  ( pos 48 , len 1 ) 
i  
 **  Grp 15 -  ( pos 49 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 52 , len 15 ) 
apqMMMMDDRRroiZ  
 **  Grp 1 -  ( pos 52 , len 1 ) 
a  
 **  Grp 2 -  ( pos 53 , len 11 ) 
pqMMMMDDRRr  
 **  Grp 3 -  ( pos 54 , len 9 ) 
qMMMMDDRR  
 **  Grp 4 -  ( pos 55 , len 1 ) 
M  
 **  Grp 5 -  ( pos 56 , len 1 ) 
M  
 **  Grp 6 -  ( pos 57 , len 1 ) 
M  
 **  Grp 7 -  ( pos 58 , len 1 ) 
M  
 **  Grp 8 -  ( pos 59 , len 1 ) 
D  
 **  Grp 9 -  ( pos 60 , len 1 ) 
D  
 **  Grp 10 -  NULL 
 **  Grp 11 -  ( pos 61 , len 1 ) 
R  
 **  Grp 12 -  ( pos 62 , len 1 ) 
R  
 **  Grp 13 -  ( pos 64 , len 1 ) 
o  
 **  Grp 14 -  ( pos 65 , len 1 ) 
i  
 **  Grp 15 -  ( pos 66 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 69 , len 10 ) 
apqBBBroiZ  
 **  Grp 1 -  ( pos 69 , len 1 ) 
a  
 **  Grp 2 -  ( pos 70 , len 6 ) 
pqBBBr  
 **  Grp 3 -  ( pos 71 , len 4 ) 
qBBB  
 **  Grp 4 -  ( pos 72 , len 1 ) 
B  
 **  Grp 5 -  ( pos 73 , len 1 ) 
B  
 **  Grp 6 -  ( pos 74 , len 1 ) 
B  
 **  Grp 7 -  NULL 
 **  Grp 8 -  NULL 
 **  Grp 9 -  NULL 
 **  Grp 10 -  NULL 
 **  Grp 11 -  NULL 
 **  Grp 12 -  NULL 
 **  Grp 13 -  ( pos 76 , len 1 ) 
o  
 **  Grp 14 -  ( pos 77 , len 1 ) 
i  
 **  Grp 15 -  ( pos 78 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 81 , len 8 ) 
apqvroiZ  
 **  Grp 1 -  ( pos 81 , len 1 ) 
a  
 **  Grp 2 -  ( pos 82 , len 4 ) 
pqvr  
 **  Grp 3 -  ( pos 83 , len 2 ) 
qv  
 **  Grp 4 -  ( pos 84 , len 1 ) 
v  
 **  Grp 5 -  NULL 
 **  Grp 6 -  NULL 
 **  Grp 7 -  NULL 
 **  Grp 8 -  NULL 
 **  Grp 9 -  NULL 
 **  Grp 10 -  NULL 
 **  Grp 11 -  NULL 
 **  Grp 12 -  NULL 
 **  Grp 13 -  ( pos 86 , len 1 ) 
o  
 **  Grp 14 -  ( pos 87 , len 1 ) 
i  
 **  Grp 15 -  ( pos 88 , len 1 ) 
Z  

-----------------------

 **  Grp 0 -  ( pos 91 , len 5 ) 
atswZ  
 **  Grp 1 -  ( pos 91 , len 1 ) 
a  
 **  Grp 2 -  ( pos 92 , len 1 ) 
t  
 **  Grp 3 -  ( pos 94 , len 1 ) 
w  
 **  Grp 4 -  NULL 
 **  Grp 5 -  NULL 
 **  Grp 6 -  NULL 
 **  Grp 7 -  NULL 
 **  Grp 8 -  NULL 
 **  Grp 9 -  NULL 
 **  Grp 10 -  NULL 
 **  Grp 11 -  NULL 
 **  Grp 12 -  NULL 
 **  Grp 13 -  NULL 
 **  Grp 14 -  NULL 
 **  Grp 15 -  ( pos 95 , len 1 ) 
Z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:56:21.607

似乎是正确的。由于分支重置中的捕获组数等于其任何分支中的最高捕获组数。

这是来自的报价[`perlre`](http://perldoc.perl.org/perlre.html)：

> 每个分支中的编号将照常进行，并且此构造之后的任何组都将被编号，就好像该构造仅包含一个分支，即其中具有最多捕获组的分支。

# javascript - QtWebkit javascript桥，无法访问Qt对象方法

> ID：11001097
> 
> 赞同：0
> 
> 时间：2012-06-12T16:48:31.897
> 
> 标签：javascript, c++, qtwebkit

使用 QtWebkit 的 javascript 桥，我创建了一个类来将我的 web 框架中的数据与我的 Qt 代码的其余部分连接起来。它识别对象，但不识别它的任何方法。

mainwindow.cpp 代码：

```
#include "app.h"
MainWindow::MainWindow(QWidget *parent) :  QWebView(parent)
{
    happ = new app(this);
     m_network = new QNetworkAccessManager(this);
     page()->setNetworkAccessManager(m_network);

     QFile file("E://qt//test.happ//index.html");
     file.open(QIODevice::ReadOnly | QIODevice::Text);
     QTextStream in(&file);
     QString htmlContent = in.readAll();

     addJSObject();
     QObject::connect(page()->mainFrame(), SIGNAL(javaScriptWindowObjectCleared()),this, SLOT(addJSObject()));

     setHtml(htmlContent);
 }

void MainWindow::addJSObject()
{
    page()->mainFrame()->addToJavaScriptWindowObject(QString("happ"), happ);
}; 
```

app.h 代码：

```
#include <QObject>

class app:public QObject
{
public:
    app(QObject *parent);
public slots:
        void os_foo();

signals:
        void win_bar();

}; 
```

javascript:

```
function a(){
    if(window.happ){ 
        alert("obj: " + typeof happ);            //shows "obj: object" 
        alert("os_foo: " + typeof happ.os_foo); //shows "os_foo: undefined" 
    } 

} 
```

javascript不能调用app类的函数，各位帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:35:06.490

您是否尝试过`Q_INVOKABLE`在正常（即非插槽功能）上使用？尝试这个

```
class app:public QObject
{ 
  public:
    app(QObject *parent);
  //public slots:
    Q_INVOKABLE void os_foo();

   signals:
    void win_bar();
}; 
```

然后从您的 JavaScript 代码中调用该函数。

通常这种方法对我有用。不过，我从来没有结合过`Q_SLOT`and `Q_INVOKABLE`。

# javascript - jQuery 在完全加载的框架上访问 iframe 内的框架

> ID：11001100
> 
> 赞同：2
> 
> 时间：2012-06-12T16:48:57.153
> 
> 标签：javascript, jquery, html

需要使用 jQuery 访问框架内框架内的元素。

我有这个结构：

```
<iframe id="frame1">
  <frameset id="frameset">
    <frame id="frame2"> <div id="exampleDiv">text</div> </frame>
  </frameset>
</iframe> 
```

和脚本：

```
$("#frame1 #frameset #frame2").load(function () {
    $('#exampleDiv').hide();
}); 
```

但是这个脚本不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:02:02.927

您应该使用 jquery content() 来检索 iframe 的内容，然后使用 .find() 方法，但框架中的文档应该与父文档位于同一域中。

在这种情况下 ：

```
 $("#frame1").contents().find("#exampleDiv").hide() 
```

# java - 如何以编程方式设置 JAX-WS 客户端的 SSLContext？

> ID：11001102
> 
> 赞同：60
> 
> 时间：2012-06-12T16:48:57.653
> 
> 标签：java, ssl, certificate, jax-ws

我正在一个分布式应用程序中的服务器上工作，该应用程序具有浏览器客户端，并且还参与与第 3 方的服务器到服务器通信。我的服务器有一个 CA 签名证书，让我的客户端使用 HTTP/S 和 XMPP（安全）使用 TLS (SSL) 通信进行连接。这一切都很好。

现在我需要通过 HTTPS/SSL 使用 JAX-WS 安全地连接到第 3 方服务器。在此通信中，我的服务器在 JAX-WS 交互中充当客户端，并且我有一个由第 3 方签署的客户端证书。

我尝试通过标准系统配置 ( `-Djavax.net.ssl.keyStore=xyz`) 添加新的密钥库，但我的其他组件显然受此影响。尽管我的其他组件对其 SSL 配置 ( `my.xmpp.keystore=xxx, my.xmpp.truststore=xxy, ...`) 使用专用参数，但似乎它们最终使用全局`SSLContext`. （配置命名空间`my.xmpp.`似乎表明了分离，但事实并非如此）

我还尝试将我的客户端证书添加到我的原始密钥库中，但是 - 再次 - 我的其他组件似乎也不喜欢它。

我认为我剩下的唯一选择是以编程方式连接到 JAX-WS HTTPS 配置，以设置用于客户端 JAX-WS 交互的密钥库和信任库。

关于如何做到这一点的任何想法/指示？我找到的所有信息要么使用该`javax.net.ssl.keyStore`方法，要么设置全局`SSLContext`，我猜这将在同一个confilc中结束。我最接近有用的是这个旧的错误报告，它请求我需要的功能：[添加对将 SSLContext 传递给 JAX-WS 客户端运行时的支持](http://bugs.sun.com/view_bug.do;jsessionid=329a8cda29e5d3927a6a32edadeb?bug_id=6384251)

有什么需要吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-14T11:50:57.807

这是一个难以破解的难题，因此记录在案：

为了解决这个问题，它需要一个 custom`KeyManager`和一个`SSLSocketFactory`使用这个 custom`KeyManager`来访问分隔的`KeyStore`. `KeyStore`我在这个优秀的`SSLFactory`博客条目 中找到了基本代码： [how-to-dynamically-select-a-certificate-alias-when-invoking-web-services](http://alesaudate.wordpress.com/2010/08/09/how-to-dynamically-select-a-certificate-alias-when-invoking-web-services/)

然后，需要将专门`SSLSocketFactory`的内容插入到 WebService 上下文中：

```
service = getWebServicePort(getWSDLLocation());
BindingProvider bindingProvider = (BindingProvider) service; 
bindingProvider.getRequestContext().put("com.sun.xml.internal.ws.transport.https.client.SSLSocketFactory", getCustomSocketFactory()); 
```

其中`getCustomSocketFactory()`返回`SSLSocketFactory`使用上述方法创建的。这仅适用于 JDK 中内置的 Sun-Oracle impl 中的 JAX-WS RI，因为指示`SSLSocketFactory`属性的字符串是此实现专有的。

在这个阶段，JAX-WS 服务通信是通过 SSL 保护的，但是如果您从同一个安全服务器 () 加载 WSDL，那么您将遇到引导问题，因为收集 WSDL 的 HTTPS 请求将不会使用与 Web 服务相同的凭据。我通过使 WSDL 在本地可用（file:///...）并动态更改 Web 服务端点来解决这个问题：（关于为什么需要这样做的很好的讨论可以[在这个论坛](http://cxf.547215.n5.nabble.com/Why-does-a-JAX-WS-client-use-the-WSDL-at-run-time-tp548595p548596.html)中找到）

```
bindingProvider.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, webServiceLocation); 
```

现在，WebService 被引导并能够使用命名（别名）客户端证书和相互身份验证通过 SSL 与服务器对应方进行通信。∎</p>

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-17T17:32:35.300

这就是我根据[这篇文章](https://stackoverflow.com/questions/6810634/how-to-make-simple-ssl-thru-web-services)通过一些小的调整来解决它的方法。此解决方案不需要创建任何其他类。

```
SSLContext sc = SSLContext.getInstance("SSLv3");

KeyManagerFactory kmf =
    KeyManagerFactory.getInstance( KeyManagerFactory.getDefaultAlgorithm() );

KeyStore ks = KeyStore.getInstance( KeyStore.getDefaultType() );
ks.load(new FileInputStream( certPath ), certPasswd.toCharArray() );

kmf.init( ks, certPasswd.toCharArray() );

sc.init( kmf.getKeyManagers(), null, null );

((BindingProvider) webservicePort).getRequestContext()
    .put(
        "com.sun.xml.internal.ws.transport.https.client.SSLSocketFactory",
        sc.getSocketFactory() ); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-30T13:30:04.830

我尝试了以下方法，但在我的环境中不起作用：

```
bindingProvider.getRequestContext().put("com.sun.xml.internal.ws.transport.https.client.SSLSocketFactory", getCustomSocketFactory()); 
```

但是不同的属性就像一个魅力：

```
bindingProvider.getRequestContext().put(JAXWSProperties.SSL_SOCKET_FACTORY, getCustomSocketFactory()); 
```

其余代码取自第一个回复。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-23T21:01:10.937

通过结合 Radek 和 l0co 的答案，您可以访问 https 后面的 WSDL：

```
SSLContext sc = SSLContext.getInstance("TLS");

KeyManagerFactory kmf = KeyManagerFactory
        .getInstance(KeyManagerFactory.getDefaultAlgorithm());

KeyStore ks = KeyStore.getInstance("JKS");
ks.load(getClass().getResourceAsStream(keystore),
        password.toCharArray());

kmf.init(ks, password.toCharArray());

sc.init(kmf.getKeyManagers(), null, null);

HttpsURLConnection
        .setDefaultSSLSocketFactory(sc.getSocketFactory());

yourService = new YourService(url); //Handshake should succeed 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-20T21:20:36.393

您可以将您的代理身份验证和 ssl 人员移动到肥皂处理程序

```
 port = new SomeService().getServicePort();
  Binding binding = ((BindingProvider) port).getBinding();
  binding.setHandlerChain(Collections.<Handler>singletonList(new ProxyHandler())); 
```

这是我的例子，做所有的网络操作

```
 class ProxyHandler implements SOAPHandler<SOAPMessageContext> {
    static class TrustAllHost implements HostnameVerifier {
      public boolean verify(String urlHostName, SSLSession session) {
        return true;
      }
    }

    static class TrustAllCert implements X509TrustManager {
      public java.security.cert.X509Certificate[] getAcceptedIssuers() {
        return null;
      }

      public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {
      }

      public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {
      }
    }

    private SSLSocketFactory socketFactory;

    public SSLSocketFactory getSocketFactory() throws Exception {
      // just an example
      if (socketFactory == null) {
        SSLContext sc = SSLContext.getInstance("SSL");
        TrustManager[] trustAllCerts = new TrustManager[] { new TrustAllCert() };
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        socketFactory = sc.getSocketFactory();
      }

      return socketFactory;
    }

    @Override public boolean handleMessage(SOAPMessageContext msgCtx) {
      if (!Boolean.TRUE.equals(msgCtx.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY)))
        return true;

      HttpURLConnection http = null;

      try {
        SOAPMessage outMessage = msgCtx.getMessage();
        outMessage.setProperty(SOAPMessage.CHARACTER_SET_ENCODING, "UTF-8");
        // outMessage.setProperty(SOAPMessage.WRITE_XML_DECLARATION, true); // Not working. WTF?

        ByteArrayOutputStream message = new ByteArrayOutputStream(2048);
        message.write("<?xml version='1.0' encoding='UTF-8'?>".getBytes("UTF-8"));
        outMessage.writeTo(message);

        String endpoint = (String) msgCtx.get(BindingProvider.ENDPOINT_ADDRESS_PROPERTY);
        URL service = new URL(endpoint);

        Proxy proxy = Proxy.NO_PROXY;
        //Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("{proxy.url}", {proxy.port}));

        http = (HttpURLConnection) service.openConnection(proxy);
        http.setReadTimeout(60000); // set your timeout
        http.setConnectTimeout(5000);
        http.setUseCaches(false);
        http.setDoInput(true);
        http.setDoOutput(true);
        http.setRequestMethod("POST");
        http.setInstanceFollowRedirects(false);

        if (http instanceof HttpsURLConnection) {
          HttpsURLConnection https = (HttpsURLConnection) http;
          https.setHostnameVerifier(new TrustAllHost());
          https.setSSLSocketFactory(getSocketFactory());
        }

        http.setRequestProperty("Content-Type", "application/soap+xml; charset=utf-8");
        http.setRequestProperty("Content-Length", Integer.toString(message.size()));
        http.setRequestProperty("SOAPAction", "");
        http.setRequestProperty("Host", service.getHost());
        //http.setRequestProperty("Proxy-Authorization", "Basic {proxy_auth}");

        InputStream in = null;
        OutputStream out = null;

        try {
          out = http.getOutputStream();
          message.writeTo(out);
        } finally {
          if (out != null) {
            out.flush();
            out.close();
          }
        }

        int responseCode = http.getResponseCode();
        MimeHeaders responseHeaders = new MimeHeaders();
        message.reset();

        try {
          in = http.getInputStream();
          IOUtils.copy(in, message);
        } catch (final IOException e) {
          try {
            in = http.getErrorStream();
            IOUtils.copy(in, message);
          } catch (IOException e1) {
            throw new RuntimeException("Unable to read error body", e);
          }
        } finally {
          if (in != null)
            in.close();
        }

        for (Map.Entry<String, List<String>> header : http.getHeaderFields().entrySet()) {
          String name = header.getKey();

          if (name != null)
            for (String value : header.getValue())
              responseHeaders.addHeader(name, value);
        }

        SOAPMessage inMessage = MessageFactory.newInstance()
          .createMessage(responseHeaders, new ByteArrayInputStream(message.toByteArray()));

        if (inMessage == null)
          throw new RuntimeException("Unable to read server response code " + responseCode);

        msgCtx.setMessage(inMessage);
        return false;
      } catch (Exception e) {
        throw new RuntimeException("Proxy error", e);
      } finally {
        if (http != null)
          http.disconnect();
      }
    }

    @Override public boolean handleFault(SOAPMessageContext context) {
      return false;
    }

    @Override public void close(MessageContext context) {
    }

    @Override public Set<QName> getHeaders() {
      return Collections.emptySet();
    }
  } 
```

它使用 UrlConnection，您可以在处理程序中使用您想要的任何库。玩得开心！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-25T10:40:11.390

上述内容很好（正如我在评论中所说），除非您的 WSDL 也可以通过 https:// 访问。

这是我的解决方法：

将 SSLSocketFactory 设置为默认值：

```
HttpsURLConnection.setDefaultSSLSocketFactory(...); 
```

对于我使用的 Apache CXF，您还需要将这些行添加到您的配置中：

```
<http-conf:conduit name="*.http-conduit">
  <http-conf:tlsClientParameters useHttpsURLConnectionDefaultSslSocketFactory="true" />
<http-conf:conduit> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-14T06:58:32.123

对于那些尝试但仍未使其正常工作的人，这使用 Wildfly 8 为我做到了，使用动态`Dispatcher`：

`bindingProvider.getRequestContext().put("com.sun.xml.ws.transport.https.client.SSLSocketFactory", yourSslSocketFactory);`

请注意，`internal`Property 键中的部分已在此处消失。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-12T21:00:35.743

在设置信任管理器时，我在信任自签名证书时遇到了问题。我使用了 apache httpclient 的 SSLContexts 构建器来创建一个自定义`SSLSocketFactory`

```
SSLContext sslcontext = SSLContexts.custom()
        .loadKeyMaterial(keyStoreFile, "keystorePassword.toCharArray(), keyPassword.toCharArray())
        .loadTrustMaterial(trustStoreFile, "password".toCharArray(), new TrustSelfSignedStrategy())
        .build();
SSLSocketFactory customSslFactory = sslcontext.getSocketFactory()
bindingProvider.getRequestContext().put(JAXWSProperties.SSL_SOCKET_FACTORY, customSslFactory); 
```

`new TrustSelfSignedStrategy()`并在方法中作为参数传入`loadTrustMaterial`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-23T17:17:26.000

我在这里尝试了这些步骤：

[http://jyotirbhandari.blogspot.com/2011/09/java-error-invalidalgorithmparameterexc.html](http://jyotirbhandari.blogspot.com/2011/09/java-error-invalidalgorithmparameterexc.html)

而且，这解决了这个问题。我做了一些小的调整 - 我使用 System.getProperty 设置了两个参数...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-30T11:44:42.157

由于系统集成之间的密钥库冲突，我们遇到了这个问题，因此我们使用了以下代码。

```
private PerSecurityWS prepareConnectionPort()  {
      final String HOST_BUNDLE_SYMBOLIC_NAME = "wpp.ibm.dailyexchangerates";
      final String PATH_TO_SLL = "ssl/<your p.12 certificate>";
      final File ksFile = getFile(HOST_BUNDLE_SYMBOLIC_NAME, PATH_TO_SLL);
      final String serverURI = "you url";

      final KeyStore keyStore = KeyStore.getInstance("pkcs12");
      keyStore.load(new FileInputStream(ksFile.getAbsolutePath()), keyStorePassword.toCharArray());
      final KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
      kmf.init(keyStore, keyStorePassword.toCharArray());

      final HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {
        @Override
        public boolean verify(final String hostname, final SSLSession session) {
          return false;
        }
      };

      final SSLContext ctx = SSLContext.getInstance("TLS");
      ctx.init(kmf.getKeyManagers(), null, null);
      final SSLSocketFactory sslSocketFactory = ctx.getSocketFactory();

      final PerSecurityWS port = new PerSecurityWS_Service().getPerSecurityWSPort();

      final BindingProvider bindingProvider = (BindingProvider) port;
      bindingProvider.getRequestContext().put("com.sun.xml.internal.ws.transport.https.client.SSLSocketFactory",sslSocketFactory);
      bindingProvider.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, serverURI);
      bindingProvider.getRequestContext().put("com.sun.xml.internal.ws.transport.https.client.hostname.verifier",DO_NOT_VERIFY);
      return port;
    } 
```

# unit-testing - TDD multi threaded applications

> ID：11001106
> 
> 赞同：2
> 
> 时间：2012-06-12T16:49:01.710
> 
> 标签：unit-testing, tdd, testdrivendesign

Could someone shed some light on how multi threaded functionality could be developed in a pure TDD fashion. (possibly with some examples in C# or Java)

Thanks in Advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T05:23:56.433

In short,

*   First assert that the code that runs on a thread works. Functionality wise. Simple unit test - no threads. You can extract a type (sample name Executor) that abstracts away the threading aspect. e.g. Execute(codeblock) that spawns a new thread in production on which the codeblock is executed. In tests, codeblock is executed on the calling thread - like a function call.
*   Next write a stress test that uses the production Executor. Spawn multiple threads and assert on your invariants. i.e. things that must/must not happen irrespective of how many threads are spawned.

There are some other nuances to this - based on whether you are spawning multiple threads (active) or whether you are being called on different threads (passive). I'd recommend you read up the chapter related to threading in the GOOS book by SteveFreeman and NatPryce

# ghostscript - 查询 Ghostscript 以获取输出设备的默认选项/设置（例如“pdfwrite”或“tiffg4”）

> ID：11001107
> 
> 赞同：6
> 
> 时间：2012-06-12T16:49:02.163
> 
> 标签：ghostscript

在[这个对“将 EPS 转换为 PDF 的 GhostScript 命令行参数”的回答中](https://stackoverflow.com/a/3461186/277826)；据说`pdfwrite`Ghostscript的设备默认分辨率是720x720，我一开始觉得难以置信！

有没有办法列出 Ghostscript 设备的默认选项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T18:08:46.193

由于 Ghostscript 是一个成熟的 PostScript 解释器，您还可以向它发送 PostScript 片段，这些片段不会导致页面元素的绘制，但会查询它的内部状态。

如果您想知道*显示器*的默认设置是什么，当您要求它`gs some.pdf`仅在屏幕上显示 PDF 时，您可以尝试以下操作：

```
gs \
   -c "currentpagedevice {exch ==only ( ) print == } forall" 
```

在 Windows 上，这变为：

```
gswin32c.exe ^
   -c "currentpagedevice {exch ==only ( ) print == } forall" 
```

结果是`/SomeName somevalue`描述用于将页面呈现到当前屏幕的设置的对列表。

这是因为通常显示器是 Ghostscript 将其输出发送到的默认设备。现在您可能会注意到您会看到一个空的 Ghostscript 窗口弹出，您必须将其关闭....啊，添加一些选项以避免弹出窗口怎么样？

```
gs \
   -o /dev/null \
   -dNODISPLAY \
   -c "currentpagedevice {exch ==only ( ) print == } forall" 
```

或者，在 Windows 上：

```
gswin32c.exe ^
   -o nul ^
   -dNODISPLAY ^
   -c "currentpagedevice {exch ==only ( ) print == } forall" 
```

但这会更改查询返回值，因为您（无意中）更改了输出设备设置：

```
gs -c "currentpagedevice {exch ==only ( ) print == } forall" | grep Resolution 
```

结果：

```
HWResolution [86.5426483 86.5426483]
/.MarginsHWResolution [1152.0 1152.0] 
```

将此与

```
gs \
   -o /dev/null \
   -dNODISPLAY \
   -c "currentpagedevice {exch ==only ( ) print == } forall" \
| grep Resolution 
```

结果：

```
/HWResolution [72.0 72.0]
/.MarginsHWResolution [72.0 72.0] 
```

所以，请避开这个陷阱。几年前我就成功掉进去了，好久都没注意到……

现在假设您要查询 PDF 写入设备的默认设置，运行这个：

```
gs \
  -o /dev/null \
  -sDEVICE=pdfwrite \
  -c "currentpagedevice {exch ==only ( ) print == } forall" \
| tee ghostscript-pdfwrite-default-pagedevice-settings.txt 
```

您现在将`pdfwrite`在 *.txt 文件中拥有设备的所有设置。你可以用其他一些有趣的 Ghostscript 设备重复这一点，然后比较它们的所有细节差异：

```
for _dev in \
  pswrite ps2write pdfwrite \
  tiffg3 tiffg4 tiff12nc tiff24nc tiff32nc tiff48nc tiffsep \
  jpeg jpeggray jpegcmyk \
  png16 png16m png256 png48 pngalpha pnggray pngmono; \
do \
  gs \
    -o /dev/null \
    -sDEVICE=${_dev} \
    -c "currentpagedevice {exch ==only ( ) print == } forall" \
   | sort \
   | tee ghostscript-${_dev}-default-pagedevice-settings.txt; \
done 
```

`pswrite`比较像这样的和设备的设置是相当有趣的`ps2write`（并且还发现可用于一个设备但不能用于其他设备的参数）：

```
sdiff -sbB ghostscript-ps*write-default-pagedevice-settings.txt 
```

* * *

**更新：**

正如您可能想象的那样，这也是比较不同 Ghostscript 版本的好方法，并跟踪最近版本中不同设备的默认设置可能发生的变化。如果您想了解所有新实现的颜色配置文件和现在存在于 Ghostscript 中的 ICC 支持，这将特别有趣。

此外，为避免仅返回`-dict-`某些键值，请使用宏`===`来代替。像但也打印字典的*内容*。`==``===``==`

 *所以这里是`pdfwrite`设备的示例输出。请记住，Ghostscript 的`pdfwrite`设备旨在提供与*Adob​​e Acrobat Distiller*大致相同的功能（具有附加功能，它不仅接受 PostScript 作为输入，还接受 PDF，因此您可以*重新提取*现有 PDF 文件以修复、改进或以其他方式操纵它们）。因此，Ghostscript对原 Distiller 也支持的`pdfdevice`大部分运算符表示敬意：`setdistillerparams`

```
gs \
  -o /dev/null \
  -sDEVICE=pdfwrite \
  -c "currentpagedevice {exch ==only ( ) print === } forall" \
| sort

/%MediaDestination 0
/%MediaSource 0
/.AlwaysEmbed []
/.HWMargins [0.0 0.0 0.0 0.0]
/.IgnoreNumCopies false
/.LockSafetyParams false
/.MarginsHWResolution [720.0 720.0]
/.MediaSize [612.0 792.0]
/.NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats]
/ASCII85EncodePages false
/AllowIncrementalCFF false
/AllowPSRepeatFunctions false
/AlwaysEmbed []
/AntiAliasColorImages false          [*]
/AntiAliasGrayImages false           [*]
/AntiAliasMonoImages false           [*]
/AutoFilterColorImages true
/AutoFilterGrayImages true
/AutoPositionEPSFiles true
/AutoRotatePages /PageByPage
/BeginPage {--.callbeginpage--}
/Binding /Left                       [*]
/BitsPerPixel 24
/BlueValues 256
/CalCMYKProfile (None)               [*]
/CalGrayProfile (None)               [*]
/CalRGBProfile (None)                [*]
/CannotEmbedFontPolicy /Warning      [*]
/CenterPages false
/ColorACSImageDict << /Blend 1 /VSamples [2 1 1 2] /QFactor 0.9 /HSamples [2 1 1 2] >>
/ColorConversionStrategy /LeaveColorUnchanged
/ColorImageDepth -1
/ColorImageDict << /Blend 1 /VSamples [2 1 1 2] /QFactor 0.9 /HSamples [2 1 1 2] >>
/ColorImageDownsampleThreshold 1.5
/ColorImageDownsampleType /Subsample
/ColorImageFilter /DCTEncode
/ColorImageResolution 150
/ColorValues 16777216
/Colors 3
/CompatibilityLevel 1.4
/CompressEntireFile false
/CompressFonts true
/CompressPages true
/ConvertCMYKImagesToRGB false
/ConvertImagesToIndexed true
/CoreDistVersion 5000
/CreateJobTicket false               [*]
/DSCEncodingToUnicode []
/DefaultRenderingIntent /Default
/DetectBlends true                   [*]
/DetectDuplicateImages true
/DeviceGrayToK true
/DeviceLinkProfile ()
/DoNumCopies false
/DoThumbnails false                  [*]
/DocumentTimeSeq 0
/DocumentUUID ()
/DownsampleColorImages false
/DownsampleGrayImages false
/DownsampleMonoImages false
/EmbedAllFonts true
/EmitDSCWarnings false               [*]
/EncodeColorImages true
/EncodeGrayImages true
/EncodeMonoImages true
/EncryptionR 0
/EndPage {--.callendpage--}          [*]
/FirstObjectNumber 1
/FitPages false
/ForOPDFRead false
/GraphicICCProfile ()
/GraphicIntent 0
/GraphicsAlphaBits 1
/GrayACSImageDict << /Blend 1 /VSamples [2 1 1 2] /QFactor 0.9 /HSamples [2 1 1 2] >>
/GrayImageDepth -1
/GrayImageDict << /Blend 1 /VSamples [2 1 1 2] /QFactor 0.9 /HSamples [2 1 1 2] >>
/GrayImageDownsampleThreshold 1.5
/GrayImageDownsampleType /Subsample
/GrayImageFilter /DCTEncode
/GrayImageResolution 150
/GrayValues 256
/GreenValues 256
/HWResolution [720.0 720.0]
/HWSize [6120 7920]
/HaveCIDSystem false
/HaveTransparency true
/HaveTrueTypes true
/HighLevelDevice true
/ImageICCProfile ()
/ImageIntent 0
/ImageMemory 524288                  [*]
/ImagingBBox null
/InputAttributes << 59 << /PageSize [612 792] >> 36 << /PageSize [649 918] >> 13 << /PageSize [595 842] >> 49 << /PageSize [354 499] >> 26 << /PageSize [2004 2835] >> 3 << /PageSize [792 1224] >> 62 << /PageSize [595 792] >> 39 << /PageSize [612 936] >> 16 << /PageSize [297 420] >> 52 << /PageSize [1460 2064] >> 29 << /PageSize [709 1001] >> 6 << /PageSize [2448 3168] >> 42 << /PageSize [396 612] >> 19 << /PageSize [105 148] >> 55 << /PageSize [516 729] >> 32 << /PageSize [2599 3677] >> 9 << /PageSize [1684 2384] >> 45 << /PageSize [1417 2004] >> 22 << /PageSize [1296 1728] >> 58 << /PageSize [612 1008] >> 35 << /PageSize [918 1298] >> 12 << /PageSize [842 1191] >> 48 << /PageSize [499 709] >> 25 << /PageSize [2835 4008] >> 2 << /PageSize [612 792] >> 61 << /PageSize [612 792] >> 38 << /PageSize [323 459] >> 15 << /PageSize [420 595] >> 51 << /PageSize [2064 2920] >> 28 << /PageSize [1001 1417] >> 5 << /PageSize [1585 2448] >> 64 << /PageSize [0 0 524287 524287] >> 41 << /PageSize [283 420] >> 18 << /PageSize [148 210] >> 54 << /PageSize [729 1032] >> 31 << /PageSize [354 499] >> 8 << /PageSize [2384 3370] >> 44 << /PageSize [2004 2835] >> 21 << /PageSize [864 1296] >> 57 << /PageSize [1224 792] >> 34 << /PageSize [1298 1837] >> 11 << /PageSize [1191 1684] >> 47 << /PageSize [709 1001] >> 24 << /PageSize [2592 3456] >> 1 << /PageSize [792 1224] >> 60 << /PageSize [612 792] >> 37 << /PageSize [459 649] >> 14 << /PageSize [595 842] >> 50 << /PageSize [2920 4127] >> 27 << /PageSize [1417 2004] >> 4 << /PageSize [1224 1585] >> 63 << /PageSize [792 1224] >> 40 << /PageSize [612 936] >> 17 << /PageSize [210 297] >> 53 << /PageSize [1032 1460] >> 30 << /PageSize [499 709] >> 7 << /PageSize [2016 2880] >> 43 << /PageSize [2835 4008] >> 20 << /PageSize [648 864] >> 56 << /PageSize [363 516] >> 33 << /PageSize [1837 2599] >> 10 << /PageSize [73 105] >> 46 << /PageSize [1001 1417] >> 23 << /PageSize [1728 2592] >> 0 << /PageSize [612.0 792.0] >> >>
/Install {--.callinstall--}
/InstanceUUID ()
/IsDistiller true
/KeyLength 0
/LZWEncodePages false
/Margins [0.0 0.0]
/MaxClipPathSize 12000
/MaxInlineImageSize 4000
/MaxPatternBitmap 0
/MaxSeparations 3
/MaxShadingBitmapSize 256000
/MaxSubsetPct 100
/MaxViewerMemorySize -1
/MonoImageDepth -1
/MonoImageDict << /K -1 >>
/MonoImageDownsampleThreshold 1.5
/MonoImageDownsampleType /Subsample
/MonoImageFilter /CCITTFaxEncode
/MonoImageResolution 300
/Name (pdfwrite)
/NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats]
/NoEncrypt ()
/NoT3CCITT false
/NumCopies null
/OPM 1
/OffOptimizations 0
/Optimize false                      [*]
/OutputAttributes << 0 << >> >>
/OutputDevice /pdfwrite
/OutputFile (/dev/null)
/OutputICCProfile (default_rgb.icc)
/OwnerPassword ()
/PDFA 0
/PDFACompatibilityPolicy 0
/PDFEndPage -1
/PDFStartPage 1
/PDFX false
/PDFXBleedBoxToTrimBoxOffset [0.0 0.0 0.0 0.0]
/PDFXSetBleedBoxToMediaBox true
/PDFXTrimBoxToMediaBoxOffset [0.0 0.0 0.0 0.0]
/PageCount 0
/PageDeviceName null
/PageOffset [0 0]
/PageSize [612.0 792.0]
/ParseDSCComments true
/ParseDSCCommentsForDocInfo true
/PatternImagemask false
/Permissions -4
/Policies << /PolicyReport {--dup-- /.LockSafetyParams --known-- {/setpagedevice --.systemvar-- /invalidaccess signalerror} --if-- --pop--} /PageSize 0 /PolicyNotFound 1 >>
/PreserveCopyPage true               [*]
/PreserveDeviceN true
/PreserveEPSInfo true                [*]
/PreserveHalftoneInfo false          [*]
/PreserveOPIComments true            [*]
/PreserveOverprintSettings true
/PreserveSMask true
/PreserveSeparation true
/PreserveTrMode true
/PrintStatistics false
/ProcessColorModel /DeviceRGB
/ProduceDSC true
/ProofProfile ()
/ReAssignCharacters true
/ReEncodeCharacters true
/RedValues 256
/RenderIntent 0
/RotatePages false
/SeparationColorNames []
/Separations false
/SetPageSize false
/SubsetFonts true
/TextAlphaBits 1
/TextICCProfile ()
/TextIntent 0
/TransferFunctionInfo /Preserve
/UCRandBGInfo /Preserve
/UseCIEColor false
/UseFastColor false
/UseFlateCompression true
/UsePrologue false                   [*]
/UserPassword ()
/WantsToUnicode true
/sRGBProfile (None)                  [*] 
```

**[*] 笔记：**

> 根据官方文档，目前Ghostscript上的以下设置（Adobe Acrobat Distiller支持）是可以设置和查询的，*但是设置并没有效果：*

*   `/AntiAliasColorImages`
*   `/AntiAliasGrayImages`
*   `/AntiAliasMonoImages`
*   `/AutoPositionEPSFiles`
*   `/Binding`
*   `/CalCMYKProfile`
*   `/CalGrayProfile`
*   `/CalRGBKProfile`
*   `/CannotEmbedFontPolicy`
*   `/ConvertImagesToIndexed`
*   `/CreateJobTicket`
*   `/DetectBlends`
*   `/DoThumbnails`
*   `/EmitDSCWarnings`
*   `/EndPage`
*   `/ImageMemory`
*   `/LockDistillerParams`
*   `/Optimize`
*   `/PreserveCopyPage`
*   `/PreserveEPSInfo`
*   `/PreserveHalftoneInfo`
*   `/PreserveOPIComments`
*   `/sRGBProfile`
*   `/StartPage`
*   `/UsePrologue`*

# java - 在 Java 上播放声音时的 NullPointer

> ID：11001114
> 
> 赞同：0
> 
> 时间：2012-06-12T16:49:21.930
> 
> 标签：java, nullpointerexception, javasound

尝试播放声音时出现错误。由于某种原因，我得到了一个空指针异常。我使用的位置和文件都存在，并且在输出文件字符串时，我确实得到了文件的正确路径。空指针位于 .open 行上。我究竟做错了什么？

```
package main;

import java.io.File;
import java.io.IOException;
import java.net.URL;

import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

public class Sound {
    Clip background;

    public void init() {

    try {
        String file = new File("").getAbsolutePath() + "\\Sounds\\Pacman_Opening.wav";
        System.out.println(file);
        background = AudioSystem.getClip();
        background.open(AudioSystem.getAudioInputStream(getClass().getResource(file)));
    } catch (LineUnavailableException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnsupportedAudioFileException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }

    public void playBG() {
        background.start();
    }
    public void stopBG() {
        background.stop();
    }   
    public static void main(String[] args) {
        Sound s = new Sound();
        s.init();
        s.playBG();
    }

} 
```

这是错误（第一行是位置）：

```
Exception in thread "main" java.lang.NullPointerException
    at com.sun.media.sound.WaveFileReader.getAudioInputStream(Unknown Source)
    at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
    at main.Sound.init(Sound.java:21)
    at main.Sound.main(Sound.java:42) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:51:16.877

`Class.getResource()`不采用*文件名*- 它采用*资源*名称。

你为什么不直接创建一个`File`并将其传递给`getAudioInputStream`？

```
// TODO: Avoid backslashes in file constructor calls; there are other ways
// of creating relative paths
File file = new File("Sounds\\Pacman_Opening.wav");
...
background.open(AudioSystem.getAudioInputStream(file)); 
```

# python - 需要改进序列检测算法

> ID：11001117
> 
> 赞同：0
> 
> 时间：2012-06-12T16:49:35.487
> 
> 标签：python, algorithm, math

这个问题很复杂，因此请提出问题以解释有关此问题的更多详细信息。（ps。我不是以英语为母语的人，这就是为什么......）

输入是长度为 34 的***样本*序列**，而输出是**结果**部分

现在，我有一个**长度为 34的序列*****样本***，它可以构造为：（“结果”是我需要的）

 *****样本*序列**=结果部分+**已知序列**（我不知道**结果部分的****长度**）

 ****1.  **结果**（长度 34）
2.  **结果**（长度 N，N < 34）+**已知序列**（34 - N）

所有这些按顺序排列的数字都是随机的。

现在，我需要找到不包括**序列已知部分的****结果**部分。

 **一些背景资料：

1.  我有 1000 万个长度为 34 的***样本*序列。（来自生成器的 1000 万个知道 34 位随机数序列）**

2.  找到结果后，我需要在 500 万长度的序列*B*上进行比较，并查找结果序列是否在某处的长序列上唯一匹配。

我目前的算法是使用一个**检测器**，它是**已知序列的前 10 位数字，如果我在*****样本***序列的某处检测到检测器序列，则删除该**序列**。**但是，结果**仍然有可能包含**已知**序列内的序列部分。有没有人有更好的算法？

非常感谢！另外，我在 python 下对此进行了编程。

前任。

**第一个条件**：

199010104761700150004736290473629657 == 样品序列

都是结果，已知部分仍然相同

输入：

199010104761700150004736290473629657

输出：

199010104761700150004736290473629657

**第二个条件**：

199010104728392817111123995561547659 == 样品序列

1990101047 == 结果部分

28392817111123995561547659... == 已知部分

输入将是：199010104728392817111123995561547659, 28392817111123995561547659 ...

我想要的输出是：1990101047

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:47:46.533

您可以使用[Knuth–Morris–Pratt 算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)。您实际上不会找到子字符串，但您可以记下`i`到达主题字符串末尾时的值。********

# sql - 插入访问 NEW 后 Postgres 触发

> ID：11001118
> 
> 赞同：31
> 
> 时间：2012-06-12T16:49:40.137
> 
> 标签：sql, postgresql, triggers, plpgsql

我有一个非常简单的触发器：

```
CREATE OR REPLACE FUNCTION f_log_datei()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO logs (aktion, tabelle, benutzer_id) VALUES(TG_OP, 'dateien', NEW.benutzer_id);
END; $$ LANGUAGE 'plpgsql';

CREATE TRIGGER log_datei AFTER INSERT OR UPDATE OR DELETE
ON dateien
FOR EACH STATEMENT
EXECUTE PROCEDURE f_log_datei(); 
```

我的表日志如下：

```
CREATE TABLE logs(
    id int PRIMARY KEY DEFAULT NEXTVAL('logs_id_seq'),
    zeit timestamp DEFAULT now(),
    aktion char(6),
    tabelle varchar(32),
    alt varchar(256),
    neu varchar(256),
    benutzer_id int references benutzer(id)
); 
```

在 dateien 中插入内容后，出现以下错误：

```
ERROR:  record "new" is not assigned yet
DETAIL:  The tuple structure of a not-yet-assigned record is indeterminate.
CONTEXT:  SQL statement "INSERT INTO logs (aktion, tabelle, benutzer_id) VALUES(TG_OP, 'dateien', NEW.benutzer_id)"
PL/pgSQL function "f_log_datei" line 3 at SQL statement 
```

为什么我会收到此错误？我查看了文档，似乎他们使用 new 的方式与我相同。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-12T17:31:51.843

来自[精美手册](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)：

> **36.1。触发器行为概述**
> [...]
> 对于行级触发器，输入数据还包括`NEW`用于`INSERT`和`UPDATE`触发器的行，和/或`OLD`用于`UPDATE`和`DELETE`触发器的行。语句级触发器目前没有任何方法来检查语句修改的各个行。

并从[触发程序](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)：

> `NEW`
> 数据类型`RECORD`；为行级触发器中的`INSERT`/操作保存新数据库行的变量。`UPDATE`这个变量`NULL`在语句级触发器和`DELETE`操作中。

请注意它所说的关于行级触发器和语句级触发器的内容。

您有一个语句级触发器：

```
...
FOR EACH STATEMENT
EXECUTE PROCEDURE f_log_datei(); 
```

语句级触发器每条语句触发一次，并且一条语句可以应用于多行，因此*受影响行*的概念（即是什么`NEW`和`OLD`是关于）根本不适用。

如果您想在触发器中使用`NEW`(or `OLD`)，那么您希望触发器对每个受影响的行执行，这意味着您需要一个行级触发器：

```
CREATE TRIGGER log_datei AFTER INSERT OR UPDATE OR DELETE
ON dateien
FOR EACH ROW
EXECUTE PROCEDURE f_log_datei(); 
```

我刚改成`FOR EACH STATEMENT`.`FOR EACH ROW`

* * *

你的触发器也[应该返回一些东西](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)：

> 触发器函数必须返回`NULL`与触发触发器的表的结构完全相同的记录/行值。
> [...]
> 触发的行级触发器`AFTER`或触发的语句级触发器的返回值，`BEFORE`或者`AFTER`总是被忽略；它也可能为空。但是，任何这些类型的触发器仍可能通过引发错误来中止整个操作。

所以你应该`RETURN NEW;`或`RETURN NULL;`在你的触发器中。你有一个 AFTER 触发器，所以你使用哪个 RETURN 并不重要，但我会选择`RETURN NEW;`.

# r - R中+=（加等于）的等价物是什么

> ID：11001120
> 
> 赞同：6
> 
> 时间：2012-06-12T16:49:46.470
> 
> 标签：r, operators

> **可能重复：**
> [R: += 和 ++ 等价于 c++/c#/java 等？](https://stackoverflow.com/questions/5738831/r-and-equivalent-from-c-c-java-etc)

R（特别是 a `data.frame`）是否有 += 运算符的版本？我想说：

```
my.df[foo > 50,"foo"] -= 10 
```

但到目前为止我能想到的最好的是：

```
my.df[foo > 50,"foo"] <- my.df[foo > 50,"foo"] - 10 
```

任何帮助表示赞赏。

# javascript - 另一个函数的函数返回

> ID：11001122
> 
> 赞同：0
> 
> 时间：2012-06-12T16:49:51.443
> 
> 标签：javascript, jquery

**编辑：** 我怎样才能`return`为父母设定价值`function`？

```
function returningFn() {
    function otherFn() {
        var value = 123;
        return value; //For returningFn     
    }
} 
```

我想`returningFn`退货`value`...我该怎么做？？？我无法让它工作...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:56:29.197

```
function returningFn(returnInfo) {
    function otherFn() {
        var value = 123;
        return value;  //return the value
    }
    return otherFn();  //call the function which has its own return statement
}   
console.log( returningFn() ); 
```

[JSFiddle](http://jsfiddle.net/6aVU8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T16:56:59.183

```
function returningFn() {
    function otherFn() {
        var value = 123;
        return value; //For returningFn     
    }
    return otherFn();
} 
```

你以前没有引用正确的东西。当 JS 函数返回某些内容时，您可以将函数调用视为它返回的内容，以便您可以：

```
alert(returningFn()); 
```

# java - Jibx 与 JXPath 在性能方面的对比

> ID：11001126
> 
> 赞同：0
> 
> 时间：2012-06-12T16:50:12.037
> 
> 标签：java, performance, jibx, jxpath

处理一个处理大量 XML 文件并将其加载到 RDBMS 中的项目。在转换层，需要将 XML 文件转换为 java pojo ，丰富验证，然后插入 DB。

文件大小为 appx。10 KB

问题是，在转换层中使用哪个框架 1) JIBX(with woodstox) 2) jxpath Jxpath 可以方便地开发一个可配置的转换层，因为它是基于表达式的，我们可以根据条件动态评估路径。但另一方面，我担心性能。

我还没有尝试过这两种方法。感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:01:42.400

我试过VTD，我对性能很满意。

# php - 使用 SimpleXML 和 jQuery Ajax 在服务器中创建 XML 文件

> ID：11001127
> 
> 赞同：0
> 
> 时间：2012-06-12T16:50:12.527
> 
> 标签：php, jquery, xml, ajax, simplexml

我想做的事情肯定可以完成，但我做错了：我想在使用 Ajax 调用时创建一个 XML 文件。我得到了以下代码（合成）。也许这个例子不起作用，它只是为了举例说明：

**HTML**

```
<html>
<head>
  <!-- JQuery 1.7 included -->  
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
</head>
<body>
  <p>Create XML on server!</p>
  <form id="prog" method="POST">
    <input type="text" id="test" />
    <button id="submit" type="submit"> Create now! </button>
  </form>
  <script>
    jQuery.noConflict();
    jQuery(document).ready(function($){
        var test = $('#test').val();

        // When the button it's clicked:
        $('#submit').click(function () {
            $.ajax({
                // Este es el archivo PHP que procesa la información y envía el mail
                url: "createXML.php",
                type: "POST",
                data: test,
                success: function (html) {
                    // If succeed
                    if (html==1) {
                        alert("DONE!!");
                    }
                }
            });
        });

        // With this I cancel the default behaviour of the button so it doesn't submit by itself.
        return false;
    });

</script>
</body>
</html> 
```

**服务器中的 PHP**

```
<?php
    echo "HI! Ajax arrived here and this code it's being executed!";

    //I load a string to be the contents of the XML file
    $exemel = simplexml_load_string('<example><simple>As simple as this!</simple></example>');

    // I save the file as following:
    $exemel->asXml('xml/DONE.xml');
    echo 1;
?> 
```

在此示例中，PHP 代码按原样工作，而另一个则没有。但是在我的代码的整个上下文中，Ajax 调用是有效的，我毫不怀疑，因为它完成了它必须做的所有其他事情，而只是创建 XML 代码没有做到这一点。拥有与此处相同的 PHP 代码，如果我执行 Ajax 调用它不会创建的文件。如果在控制台中我这样做

```
php createXML.php 
```

成功创建的 XML 文件。所以它不是 PHP 代码，同时它不是我的 Ajax 调用中的错误，因为它完成了它应该做的一切。会发生什么？

## 编辑

在我的真实代码中，在服务器的 PHP 文件中，我这样做：

```
$test = (isset($_GET['test'])) ? $_GET['test'] : null;
//If something fails, I add the error to an errors array:
$errors = array();
isset($errors);
if (!$test) $errors[count($errors)] = 'Something failed with the test!';
//If there are any errors
if (!$errors) {
    createXML ();
} 
```

该 createXML() 函数包含我以前的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:56:50.450

尝试这个

```
$xml = simplexml_load_string($_POST['test']);
if(file_put_contents("xmlfile.xml",$xml->asXML())){
 echo "xml file created successfully";
}else{
 echo "failed to create file";
} 
```

同样在 php 方面，您对 $_POST['test'] 不做任何事情？xml字符串在哪里..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:01:46.503

我很惭愧你我得到的代码运行良好，但是写入文件的文件夹对用户没有权限=/对不起......我仔细检查了这个，但是即使使用 chmod 777 我也不能不要这样做。这是用户组的权限问题......对不起，感谢您帮助我。 [在 Linux 中更改文件夹的权限](https://superuser.com/a/19333/120689)

# javascript - 通过 JavaScript ( JSON ) 用 PHP 对象填写表单

> ID：11001130
> 
> 赞同：0
> 
> 时间：2012-06-12T16:50:14.680
> 
> 标签：javascript, object

我设法用javascript中的用户ID填写了一个表格：

（在 php 文件中）

```
<..button onclick="fillOut(UserId)"...... 
```

（在 javascript 文件中）

```
fillOut(UserId){

        form = document.formulario;
        form.valor3.value = UserId;

} 
```

好的，这有效，但现在我需要将一个对象传递给表单

我在 php 中有一个对象

```
User U = new User();

<button onclick="fillOut(U)"...... 

( In javascript file )
fillOut(U){
        form = document.formulario;
        form.valor3.value = U;
} 
```

不幸的是，这不起作用，javascript 不接受该对象。我不确定是否可以这样做。我认为我必须使用 JSON 来做到这一点，但我不知道该怎么做。

一些线索？？任何想法？？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:55:09.657

您正在混合服务器和客户端语言。

您不应该尝试将其直接传递给 JavaScript，而是向服务器发送 Ajax 调用，服务器将以字符串（或 JSON）形式返回适当的响应，然后由 JavaScript 捕获并填写表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:56:35.020

您试图直接在 Javascript 代码中访问 PHP 对象，这是不可能的。

而是使用脚本标记内的 json_encode 将 php 对象呈现为 Javascript 对象（使其在客户端可用）。

尝试这个：

```
<?php
    User U = new User();
?>

<button onclick="fillOut()"..
<script type="text/javascript">
    var user = <?php echo  json_encode(U);?>;
    fillOut(U){
        U = U || user;
        form = document.formulario;
        form.valor3.value = U;
    }

</script> 
```

# xml - 转换以删除重复并复制其余部分

> ID：11001133
> 
> 赞同：3
> 
> 时间：2012-06-12T16:50:19.637
> 
> 标签：xml, xslt, xslt-1.0

我希望输出 xml 根据属性“f”为元素“c”分组。这是我的输入 xml 和 xslt。我希望该组只出现一次，并且其他节点应该按原样复制到输出中。我尝试的 xslt 复制了整个输入 xml。因此，如果有两个或多个具有 c 元素且 'f' 的属性值相同的元素，则希望该组第一次出现在输出中。我想要的结果也被复制了。

输入xml

```
<M>
   <a>
      <b>
         <c f="123">
            <d>Al</d>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
  <a>
    <b>
      <c f="123">
        <d>Al</d>
        <e NO="678">
          <f>Y</f>
          <g>
            <h>FTO</h>
          </g>
        </e>
      </c>
    </b>
  </a>
  <a>
    <b>
      <c f="567">
        <d>Al</d>
        <e NO="678">
          <f>Y</f>
          <g>
            <h>FTO</h>
          </g>
        </e>
      </c>
    </b>
  </a>
  <a>
    <b>
      <somethingelse></somethingelse>
    </b>
  </a>
</M> 
```

想要输出xml

```
<M>
  <a>
    <b>
      <c f="123">
        <d>Al</d>
        <e NO="678">
          <f>Y</f>
          <g>
            <h>FTO</h>
          </g>
        </e>
      </c>
    </b>
  </a>
  <a>
    <b>
      <c f="567">
        <d>Al</d>
        <e NO="678">
          <f>Y</f>
          <g>
            <h>FTO</h>
          </g>
        </e>
      </c>
    </b>
  </a>
  <a>
    <b>
      <somethingelse></somethingelse>
    </b>
  </a>
</M> 
```

xslt 我试过了

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="mykey" match="c"
   use="@f"/>

  <xsl:template match=
  "c[generate-id()
      =
       generate-id(key('mykey',@f)[1])
      ]
  ">

    <xsl:text/>
    <xsl:copy-of select="key('mykey',@f)[1]"/>
  </xsl:template>
  <xsl:template match="node()|@*">
        <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:55:42.837

**这种转变**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kAByC-F" match="a" use="*/c/@f"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match=
      "a[*/c
       and
         not(generate-id()
            =
             generate-id(key('kAByC-F', */c/@f)[1])
             )
        ]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<M>
   <a>
      <b>
         <c f="123">
            <d>Al</d>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
  <a>
    <b>
      <c f="123">
        <d>Al</d>
        <e NO="678">
          <f>Y</f>
          <g>
            <h>FTO</h>
          </g>
        </e>
      </c>
    </b>
  </a>
  <a>
    <b>
      <c f="567">
        <d>Al</d>
        <e NO="678">
          <f>Y</f>
          <g>
            <h>FTO</h>
          </g>
        </e>
      </c>
    </b>
  </a>
  <a>
    <b>
      <somethingelse></somethingelse>
    </b>
  </a>
</M> 
```

**产生想要的正确结果**：

```
<M>
   <a>
      <b>
         <c f="123">
            <d>Al</d>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <c f="567">
            <d>Al</d>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <somethingelse/>
      </b>
   </a>
</M> 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:21:45.500

一个简单的解决方案是为以下所有`c`节点添加一个空模板：

```
<xsl:template match="c[generate-id() = generate-id(key('mykey',@f)[position() &gt; 1])]" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:07:44.720

一个想法可能是将 c 的所有值以一种允许您将它们彼此区分开来的格式保存在变量中，然后每次遇到 c 时，检查该值是否包含在变量中。如果是，则跳到下一个节点。如果不是，则继续处理当前节点。

如果您需要更具体的信息，请告诉我

编辑：作为一种替代方法，可能是一种更简单的方法（我最近一直在使用 NAnt，所以我可能会给你一个 NAnt 策略）是按所有节点的 s 值对它们进行排序。然后只需有一个变量来存储 c 的当前值并进行比较，直到您正在查看的值不等于存储的值。然后重新分配值并再次执行！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T17:49:13.043

您可以匹配元素并检查其子元素中`<a>`是否存在具有相同`f`属性的任何先前兄弟。`<c>`如果有，您已经找到了给定值的副本（给定`f`值的出现`f`不是该值的第一次出现），您可以覆盖标识模板以跳过该元素：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/M/a[b/c/@f = preceding-sibling::a/b/c/@f]"/>

</xsl:stylesheet> 
```

该解决方案的一个优点是它不需要任何有关密钥或 ID 生成的知识。它只适用于基本的 XPath 轴功能。但是，当要比较的元素并非都在相同的嵌套深度/相同的相对元素层次结构中时，它可能会稍微复杂一些。

PS：我删除了该`<xsl:strip-space elements="*"/>`元素，因为我无法对其进行测试（我的 Xml 处理器声称我只能在传递可读流而不是文件时使用它），但如果它适合您，请随时重新插入它。

# mysql - 尝试导入 CSV，MySQL 出现错误

> ID：11001137
> 
> 赞同：0
> 
> 时间：2012-06-12T16:50:34.767
> 
> 标签：mysql

不确定这是否真的是一个“堆栈溢出”问题，因为它不是立即编程的（我正在使用 PHPMyAdmin），但我正在尝试导入 CSV，并在尝试导入时收到错误“无效的列数”。

什么会导致这种情况？我只是从 excel 导出为 CSV - 我认为它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:54:39.137

很可能是因为 CSV 文件中的列数大于（或不同）您尝试导入的数据库表中的列数......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:53:16.270

Excel 在创建 csv 文件方面很糟糕。它通常在具有连续空白单元格的行上留下尾随逗号。

或者它可能是细胞中的撇号。

尝试另存为制表符分隔的文本，我想我有更多的运气。

# spring - spring 控制器 + ZK 中的服务为空

> ID：11001140
> 
> 赞同：2
> 
> 时间：2012-06-12T16:50:48.060
> 
> 标签：spring, zk

我正在尝试将 zk 与 spring 集成，但不知何故我无法使 spring 实例成为那些服务/管理对象：S

控制器，产品类型控制器：

```
 @Controller
    public class ProductTypeController extends SelectorComposer {

        @Resource
        private ProductTypeService productTypeService;

        @Listen("onCreate = listbox#typeList")
        public void loadAll() {
            BindingListModelList model = new BindingListModelList(productTypeService.getAll(), false);
            typeList.setItemRenderer(new ProductTypeListRenderer());
            typeList.setModel(model);   
        }

       public void loadAll2(Listbox lb){
         List lista = productTypeService.getAll();
        BindingListModelList model = new BindingListModelList(lista, false);
        lb.setItemRenderer(new ProductTypeListRenderer());
        lb.setModel(model);              
    }

    } 
```

祖尔

```
<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?>
<?init class="org.zkoss.zkplus.databind.AnnotateDataBinderInit" ?>
<zk>
    <hlayout>
    <div id="winDiv" apply="com.iknition.micutecake.controller.ProductTypeController">
        <vbox>
            <listbox id="typeList" width="450px" height="300px" >
                <listhead>
                    <listheader width="50px" label="id" sort="auto(id)" />
                    <listheader width="250px" label="name" sort="auto(name)" />
                    <listheader width="140px" label="description" sort="auto(description)" />
                </listhead>
            </listbox>
        </vbox>
    </div>
        </hlayout>
</zk> 
```

我得到 NullPointerException 因为 productTypeSerivce 为空。

但是，如果我添加`onCreate="loadAll2(self);"`到 .zul 中的列表框行，那么它将以这种方式调用该方法`loadAll2(Listbox lb)`，productTypeService 不为空，并且一切正常。

知道为什么吗？或者如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:38:48.650

我找到了答案。

只需要更换

```
<div id="winDiv" apply="com.iknition.micutecake.controller.ProductTypeController"> 
```

和

```
<div id="winDiv" apply="${productTypeController}"> 
```

所以 zk 将使用 spring resolver 来解析控制器

# android - 无法在 2 个 android 模拟器之间呼叫/发送短信

> ID：11001143
> 
> 赞同：-1
> 
> 时间：2012-06-12T16:50:52.087
> 
> 标签：android, phone-call

即使在我拨号呼叫另一个模拟器时启动了 2 个模拟器后，它也会在按下拨号按钮后自动断开连接，发送短信的情况相同，无法从一个模拟器向另一个模拟器发送消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:55:35.727

您不能直接从一个模拟器呼叫或发送短信到另一个模拟器。相反，您可以模拟上述内容，如以下链接中的逐步所示：

[http://www.dotnetexpertsforum.com/simulating-sms-in-android-emulator-t1396.html](http://www.dotnetexpertsforum.com/simulating-sms-in-android-emulator-t1396.html) [http://www.slegg.net/simulate-incoming-call-with-android-emulator/](http://www.slegg.net/simulate-incoming-call-with-android-emulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:56:48.903

当你想在模拟器之间调用时，你只需要使用你想调用的模拟器的控制台端口号进入你想调用的模拟器的拨号器。这在模拟器窗口的标题中显示为一个数字，例如`5554:my_emulator_name`。在这种情况下，您可以拨打 5554。

# javascript - 开发 JavaScript - 我应该什么时候开始进行单元测试？

> ID：11001149
> 
> 赞同：5
> 
> 时间：2012-06-12T16:51:14.237
> 
> 标签：javascript, unit-testing, testing, jasmine

我已经开始将 JavaScript 应用程序作为个人项目编写。我希望为这个项目学习和使用单元测试。我在编写单元测试方面没有太多经验，但我读到[Jasmine](http://pivotal.github.com/jasmine/)将是一个很好的库来帮助我实现这一目标。

话虽如此，我在最初的编码狂潮中有点过分热心。我有了一个想法，并付诸实施。因此，我的应用程序的结构过去和现在都不像我希望的那样 OO。这使我走上了多次大型重构的道路。我发现用弱类型语言进行重构让我特别容易出现错误重入。

我不得不返回并解决我重新引入的错误这一事实使我渴望进行单元测试。然而，相比之下，我如此多地改造我的代码库的基础这一事实仍然让我犹豫不决。我不想为我的项目创建单元测试，然后才决定需要更多的重组（这将使我的测试超过“纠正错误”的程度）。

这是一个普遍的担忧吗？我觉得在某个时间点，我的“基础”将足够稳定，可以为其编写测试……但这会使测试听起来不那么吸引人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:59:18.357

我会考虑将您当前的代码库视为“实验性”或“原型” - 例如，您通常会丢弃的东西。

如果您计划重构代码库，那么在重构之前或为重构代码引入单元测试可能是一个好主意。

为当前代码库编写测试的好处非常明显：您可以针对它们运行重构的代码库以验证功能。在重构时，您可能还需要对测试进行一些重构，但这是正常的。

在重写测试时你不应该做的是删除它们。尝试在每个测试中保持所有最终断言相同，同时替换测试的其他工作方式。这样，您应该能够更好地跟踪您正在测试的内容，并且新功能仍然可以完成相同的工作。

当然，如果您以非 OO 方式编写原始代码，则可能很难对其进行很好的测试。在这种情况下，我建议选择为您的原始代码编写更高级别的测试（功能测试），或者使用 TDD 类型的方法编写重构代码。

使用功能测试，您可以对应用程序的主要功能进行测试覆盖。您不会像单元测试那样进行细粒度的测试，但是您可以更轻松地编写测试，并且最终不需要对它们进行太多修改。为此，您可以使用 Selenium 之类的工具。

使用 TDD 方法，您可能会做最少的工作。您将确保新编写的代码具有良好的测试覆盖率，但您必须手动验证代码的工作方式是否与旧代码相同。

# cocoa - 可可 NSMenu 在位置添加 NSMenuItem

> ID：11001151
> 
> 赞同：5
> 
> 时间：2012-06-12T16:51:17.593
> 
> 标签：cocoa, nsmenuitem, nsmenu

我正在尝试在我的应用程序中创建一个 NSMenu。我成功创建了带有一些固定项目的菜单，现在我必须以编程方式添加一些项目。我也成功了，但它在其他项目的底部添加了该项目。有没有办法将这个以编程方式创建的项目放在固定项目之间？这是我的代码：

。H：

```
@interface AppController : NSObject {

    IBOutlet NSMenu *statusMenu;
    NSStatusItem *statusItem;
} 
```

.m

```
 [statusMenu setAutoenablesItems:NO];

    statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
    [statusItem setMenu:statusMenu];

    NSImage *statusImage = [[NSImage alloc] initWithContentsOfFile:@"Icon.icns"];
    [statusItem setImage:statusImage];
    [statusItem setTitle:@"Multibox"];
    [statusItem setHighlightMode:YES];

    NSMenuItem *item = [[NSMenuItem alloc] initWithTitle:@"Carlo | 0000000000" 
                                                  action:@selector(fooClicked:) keyEquivalent:@""]; 
    [item setTarget:self];
    [statusMenu addItem:item]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T16:55:11.623

您想使用`insertItem:atIndex:`方法系列而不是`addItem:`那些方法。

# regex - 如何使用 sed 和 regex 提取字段

> ID：11001153
> 
> 赞同：0
> 
> 时间：2012-06-12T16:51:20.640
> 
> 标签：regex, sed

我的输入如下所示：

```
[03/Jun/applications/somejunk/morejunk/ 200 
```

我想使用 sed + regex 以如下形式提取它：

```
03/Jun 200 
```

这是我正在尝试的正则表达式，但我不知道如何提取我想要的东西。

```
\([0-9]{2}/[a-zA-Z]{3}/\).* \([0-9]{3}\) 
```

任何帮助都是极好的。这是我的测试代码：

```
$ echo "[03/Jun/applications/somejunk/morejunk/ 200" | sed 's,\\([0-9]{2}/[a-zA-Z]{3}/\\).* \\([0-9]{3}\\),\1 \2,g' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:56:05.143

这行得通

```
sed 's;\[\([0-9]\{2\}/[a-zA-Z]\{3\}\)[^ ]*\(.*\);\1\2;' 
```

* * *

```
$ echo "[03/Jun/applications/somejunk/morejunk/ 200" | sed 's;\[\([0-9]\{2\}/[a-zA-Z]\{3\}\)[^ ]*\(.*\);\1\2;'
03/Jun 200 
```

匹配 2 个数字`[0-9]\{2\}`
匹配单个斜线`/`
匹配 3 个字母`[a-zA-Z]\{3\}`
将它们分组`\1`- 即用括号将它们
匹配任何内容，直到空格`[^ ]*`
匹配空格之后的所有内容（包括空格）并保留它作为`\2`
回报`\1\2`
`\2`已经包含一个空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:00:18.840

尝试以下操作：

```
sed 's,.\([0-9]\{2\}/[a-zA-Z]\{3\}\)/.* \([0-9]\{3\}\),\1 \2,' 
```

例子：

```
$ echo "[03/Jun/applications/somejunk/morejunk/ 200" | sed 's,.\([0-9]\{2\}/[a-zA-Z]\{3\}\)/.* \([0-9]\{3\}\),\1 \2,'
03/Jun 200 
```

# php - 在遍历查询结果时识别重复项

> ID：11001158
> 
> 赞同：1
> 
> 时间：2012-06-12T16:51:46.843
> 
> 标签：php, mysql, ranking

[这是我之前提出](https://stackoverflow.com/questions/10855462/detect-future-duplicate-values-while-iterating-through-mysql-results-in-php)的问题的后续。

我可以很好地计算排名（包括平局的逻辑）；当我遇到重复排名的第一个实例时，问题是**检测未来的重复。**

## 这是获取结果集的 SQL 查询：

```
SELECT
    s1.team_id,
    sum(s1.score>s2.score) wins
FROM scoreboard s1
    LEFT JOIN scoreboard s2
        ON s1.year=s2.year
        AND s1.week=s2.week
        AND s1.playoffs=s2.playoffs
        AND s1.game_id=s2.game_id
        AND s1.location<>s2.location
GROUP BY s1.team_id
ORDER BY wins DESC; 
```

## 这是我将在 PHP 中循环的示例 SQL 结果集：

```
team_id   wins
--------------
10        52
2         48
5         46
11        46
3         42
9         39
... 
```

## 这是我用于显示的 PHP 代码，它需要将“T-”附加到所有绑定的等级：

```
$i = 0;
while($row = mysql_fetch_assoc($r)) { //iterate thru ordered (desc) SQL results
    ++$i;
    ($row['wins'] == $prev_val)
        ? $rnk = 'T-' . $rnk    //same as previous score, indicate tie
        : $rnk = $i;            //not same as previous score
    $rnk = str_replace('T-T-','T-',$rnk); //eliminate duplicative tie indicator
    if ($row['team_id'] == $team_id) { //current team in resultset matches team in question, set team's rank
        $arr_ranks['tp']['cat'] = 'Total Wins';
        $arr_ranks['tp']['actual'] = number_format($row['wins'],1);
        $arr_ranks['tp']['league_rank'] = $rnk;
        $arr_ranks['tp']['div_rank'] = $div_rnk;
    }
    else if ($i == 1) { //current team is category leader (rank=1) and is not team in question, set current team as leader
        $arr_ranks['tp']['leader'] = "<a href='index.php?view=franchise&team_id=" . $row['team_id'] . "'>" . get_team_name($row['team_id']) . '</a> (' . number_format($row['wins']) . ')';
    }
    $prev_val = $row['wins']; //set current score as previous score for next iteration of loop
} 
```

上面的“平局”逻辑将把＃4队与＃3队平局，但**反之**则不然。

换句话说，对于#3 队，`$rnk = 3`，而对于#4 队，`$rnk = T-3`。（两者都**应该**是“T-3”。）

所以问题就变成了：我如何在遍历结果时“向前看”以找出当前分数是否与列表后面的分数相同/重复，这样我就可以将它与随后的欺骗一起视为并列？

@Airzooka 给了我[一个潜在的解决方案](https://stackoverflow.com/questions/10855462/detect-future-duplicate-values-while-iterating-through-mysql-results-in-php)，但我很想知道是否有更有效的方法来做到这一点（甚至可能在 SQL 级别）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:39:29.047

在伪代码中：

```
loop through rows as row1
    loop through rows as row2
        if row1 ain't row2 and row1.points == row2.points, append T 
```

更新：

好吧，这个怎么样，因为你是通过wins来排序你的结果集，无论如何：尝试将每一行的信息存储在一个临时数组或变量中，比如`$previousTeamWins`, `$previousTeamName`等。然后你可以比较当前和前一个并分配 T基于此。因此，您实际上将分配延迟到下一次迭代（或者在最后一行的情况下直到循环退出）。通过行集一趟，应该完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:50:42.340

那这个呢？

```
SELECT
 t1.*,
 EXISTS (
  SELECT *
  FROM `teams` as t2
  WHERE t2.pts = t1.pts AND t1.id != t2.id
 ) as `tied`
 FROM `teams` as t1
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:18:10.747

试试这个，我希望它对你有用

```
SELECT t1.`id`,t1.`pts`,t1.`team_id`,
IF(t1.`pts` = t2.`pts` AND t1.`id` != t2.`id` ,1,0) AS `tied`
FROM `teams` t1
LEFT JOIN `teams` t2 on t2.`pts` = t1.`pts` AND t2.`id` != t1.`id`
GROUP bY t1.`id` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:27:18.397

哎，还在看你的代码。所以说到底，你只想输出一两个队，对吧？如果领导者是相关团队，则为一个，否则为两个。如果是这种情况，请尝试这样的事情（警告它未经测试）：

```
$i = 0;
while($row = mysql_fetch_assoc($r)) { //iterate thru ordered (desc) SQL results 
    ++$i; 
    ($row['wins'] == $prev_wins) 
        ? $rnk = $prev_rnk    //same as previous score, indicate tie 
        : $rnk = $i;            //not same as previous score 
    $rnk = str_replace('T-T-','T-',$rnk); //eliminate duplicative tie indicator 

    if ($prev_team_id == $team_id) {
        $arr_ranks['tp']['cat'] = 'Total Wins'; 
        $arr_ranks['tp']['actual'] = number_format($prev_wins,1); 
        $arr_ranks['tp']['league_rank'] = $prev_rnk; 
        $arr_ranks['tp']['div_rank'] = $div_rnk;

        if ($row['wins'] == $prev_wins)
        {
            $arr_ranks['tp']['tie'] = true;
        }
        else
        {
            $arr_ranks['tp']['tie'] = false;
        }

    break;
    }
    else if ($i == 1) { //current team is category leader (rank=1) and is not team in question, set current team as leader 
        $arr_ranks['tp']['leader'] = "<a href='index.php?view=franchise&team_id=" . $row['team_id'] . "'>" . get_team_name($row['team_id']) . '</a> (' . number_format($row['wins']) . ')'; 
    }

    $prev_wins = $row['wins'];
    $prev_team_id = $row['team_id'];
    $prev_rnk = $rnk;
}

if ($prev_team_id == $team_id) {
    $arr_ranks['tp']['cat'] = 'Total Wins'; 
    $arr_ranks['tp']['actual'] = number_format($prev_wins,1); 
    $arr_ranks['tp']['league_rank'] = $prev_rnk; 
    $arr_ranks['tp']['div_rank'] = $div_rnk;

    if ($row['wins'] == $prev_wins)
    {
        $arr_ranks['tp']['tie'] = true;
    }
    else
    {
        $arr_ranks['tp']['tie'] = false;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T16:52:57.823

我想我通过 SQL 找到了解决方案！可能不优雅（我可以稍后清理它），但这里......

查询：

```
SELECT a.team_id, a.wins, count(*) instances
FROM
    (SELECT
        s1.team_id,
        sum(s1.score>s2.score) wins
    FROM scoreboard s1
        LEFT JOIN scoreboard s2
            ON s1.year=s2.year
            AND s1.week=s2.week
            AND s1.playoffs=s2.playoffs
            AND s1.game_id=s2.game_id
            AND s1.location<>s2.location
    GROUP BY s1.team_id) AS a
    LEFT JOIN
        (SELECT
            sum(s1.score>s2.score) wins
        FROM scoreboard s1
            LEFT JOIN scoreboard s2
                ON s1.year=s2.year
                AND s1.week=s2.week
                AND s1.playoffs=s2.playoffs
                AND s1.game_id=s2.game_id
                AND s1.location<>s2.location
        GROUP BY s1.team_id) AS b
            ON a.wins = b.wins
GROUP BY a.team_id, b.wins
ORDER BY a.wins DESC; 
```

这给出了输出......

```
=================================
|team_id   | wins    |instances |
=================================
|10        | 44      |1         |
|2         | 42      |3         | //tie
|9         | 42      |3         | //tie
|5         | 42      |3         | //tie
|3         | 41      |1         |
|11        | 40      |1         |
|...       |         |          |
================================= 
```

然后，在 PHP 中，我将能够通过检查 when 来检测所有关系`$row['instances'] > 1`。

感谢大家在这个不自然的繁琐问题上与我相处！

# graph - 属性关系图的例子？

> ID：11001160
> 
> 赞同：1
> 
> 时间：2012-06-12T16:51:50.577
> 
> 标签：graph

有几十个（至少）各种图形类型的数据集。不幸的是（对我来说）这些通常由仅涉及节点-边关系的图示例主导。或者，我对包含节点属性的图感兴趣，即属性关系图（ARG）。我已经浏览了很多图形数据集，甚至没有找到 ARG 的基本示例。

任何指向 ARG 示例的指针将不胜感激！

# c# - 如何从 ASP.Net 网页和 razor 使用 MongoDB？

> ID：11001170
> 
> 赞同：0
> 
> 时间：2012-06-12T16:52:21.513
> 
> 标签：c#, mongodb, razor

我已经使用 JSON 表示法了解了 MongoDB 语法，并且可以找到一些 C# 示例，但是它们比我想要的更复杂，我正在寻找一个非常简单的模型来遵循 Mongo 的基本工作从网页和剃刀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T16:56:03.910

你没有。您的数据访问应该在您的代码后面完成，或者更好的是，在您的代码后面调用的存储库中完成。

如果您进行快速搜索，您会发现有很多将 MongoDB 与 .NET 结合使用的示例。

*   [http://www.mongodb.org/display/DOCS/CSharp+Language+Center](http://www.mongodb.org/display/DOCS/CSharp+Language+Center)
*   [http://www.joe-stevens.com/2011/10/02/a-mongodb-tutorial-using-c-and-asp-net-mvc/](http://www.joe-stevens.com/2011/10/02/a-mongodb-tutorial-using-c-and-asp-net-mvc/)
*   [http://www.eggheadcafe.com/tutorials/database/3a73c6de-82a1-4690-a7aa-d0eda58203f7/store-aspnet-site-visitor-stats-in-mongodb.aspx](http://www.eggheadcafe.com/tutorials/database/3a73c6de-82a1-4690-a7aa-d0eda58203f7/store-aspnet-site-visitor-stats-in-mongodb.aspx)

# apache-flex - Flex 4 中的 CurrencyFormatter 与欧元

> ID：11001171
> 
> 赞同：2
> 
> 时间：2012-06-12T16:52:22.183
> 
> 标签：apache-flex, flex4.5, currency-formatting

我有这个 currencyFormatter ：

```
<s:CurrencyFormatter id="currencyFormatter" currencySymbol="€"  useGrouping="true"  groupingSeparator="." decimalSeparator="," fractionalDigits="2" useCurrencySymbol="true" locale="de-DE" /> 
```

一切正常，但问题是当我输入一个值“24,50”时，它不被接受。但如果我输入“24.50”，它会被接受并转换为“€ 24,50”

我需要能够用逗号作为小数分隔符输入货币。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:54:48.113

必须自己执行此操作，并且无法覆盖 CurrencyFormatter 类中的值...但是您可以将 SharedResources 放在本地目录**locale/en_US/SharedResources.properties**中，并更改/添加值为的**decimalSeparator**变量逗号。

该文件位于：

*C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\frameworks\projects\framework\bundles\en_US\SharedResources.properties*

所以你可以看看它，但你会想要在你的项目中包含一个覆盖它，并将它包含在构建的 swf 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:58:05.870

如果您想保留它的原始值，您应该只将格式化程序用于显示目的。您需要扩展 spark.formatters.CurrencyFormatter 并覆盖格式函数以接受逗号，因为传递给函数的值被转换为数字，然后确定为 NaN。

```
package 
```

{

导入 spark.formatters.CurrencyFormatter；

```
public class MyCurrencyFormatter extends CurrencyFormatter
{
    public function MyCurrencyFormatter()
    {
        super();
    }
    override public function format(value:Object):String{
        var target:Object = value;
        if(target is String){
            //whatever conversion logic you need
            target = String(target).replace(",",".");
        }
        return super.format(target);
    }
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:22:12.107

好吧，我的解决方案，无疑是丑陋的，但有效......我猜我是一种快速而肮脏的解决方案：P

在格式化输入的文本之前（在 focusOut 事件中），我只需将逗号“，”替换为句点“.”。所以格式化程序可以发挥它的魔力并保持快乐（认为它将句点转换为逗号：D）

第二个问题更简单，我只是使用了格式化程序的内置解析方法，它给了我一个属性“值”，它的值作为存储的数字！
问题解决了！！谢谢你们的帮助！
干杯！

# svn - svn checkout to viewvc 链接返回重定向 url 错误

> ID：11001177
> 
> 赞同：4
> 
> 时间：2012-06-12T16:52:50.373
> 
> 标签：svn

我正在尝试 svn 签出以下内容：

```
http://website.com/viewvc/tool
but I get the error:
SVN: E195019 Redirect cycle detected for URL... 
```

我不太确定是否应该使用 viewvc 链接到 svn 结帐，但我在 viewvc 页面上找不到其他可以结帐的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:45:15.810

感谢迈克尔的帮助，我得到了答案。基本上 viewvc 的 URL 与 SVN 的 url 不同，不能以同样的方式解释。用 viewvc 链接调用 svn checkout 是行不通的。您所要做的就是更改链接：

```
website.com/viewvc/tool
to
website.com/svn/tool 
```

和 svn 应该像往常一样工作

# c - 为什么这个定义宏会执行强制转换？

> ID：11001178
> 
> 赞同：2
> 
> 时间：2012-06-12T16:52:51.023
> 
> 标签：c, casting, macros

我有一个类似函数的宏，它接受一个枚举返回码和一个函数调用。

```
#define HANDLE_CALL(result,call) \
    do { \
        Result callResult = call; \
        Result* resultVar = (Result*)result; \
        // some additional processing
        (*resultVar) = callResult; \
    } while(0) 
```

花哨的指针转换`Result*`和随后的取消引用是否会给您带来任何好处？也就是说，这样做有什么好处：

```
callResult = call;
// additional processing
*result = callResult; 
```

宏是这样使用的：

```
Result result;
HANDLE_CALL(&result,some_function()); 
```

顺便说一句，这不是我的代码，我也不是 C 高级用户，所以我只是想了解这样做背后是否有任何逻辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:57:33.823

我认为它给你的是宏的用户可以传入任何旧类型的指针，而不仅仅是`Result*`. 就我个人而言，我要么按照你的方式去做，要么如果我真的想允许（例如）一个`void*`宏参数，我会写`*(Result*)(result) = callResult;`.

*可能*还有另一件事，这取决于宏的其余部分是什么样的。有没有提到“一些额外`resultVar`的处理”，或者这条线是`(*resultVar) = callResult;`有条件的？*如果是这样*，那么`resultVar`存在是为了确保宏只对其每个参数进行一次评估，因此它的行为更像是一个函数调用，而不是它对它们进行任何其他次数（包括零）的评估。

 *所以，如果你在一个循环中调用它，`HANDLE_CALL(output++, *input++)`那么它会做一些模糊可预测的事情。至少，它确实提供`output`了`Result*`宏作者的意图。`void*`除了允许不同的参数类型（如or ）之外，我仍然不确定演员会给你什么`char*`。

在某些情况下，无论您是否有额外的演员阵容，它都会产生另一个影响。例如，考虑：

```
typedef double Result;

int foo() { return 1; }
int i;
HANDLE_CALL(&i, foo()); 
```

如果`typedef double Result;`在屏幕上看不到，则其他三行看起来很无害。将 int 分配给 int 有什么问题，对吗？`int*`但是一旦宏被扩展，当你转换到时就会发生不好的事情`double*`。对于演员表，坏东西是未定义的行为，很可能`double`大于`int`并且超出`i`. 如果幸运的话，您会收到关于“严格别名”的编译器警告。

如果没有演员表，你就做不到`double* resultVar = &i;`，因此具有该更改的原始宏会捕获错误并拒绝代码，而不是做一些讨厌的事情。您的版本`*result = callResult;`实际有效，前提是`double`可以准确表示`int`. 它具有 IEEE 双精度且`int`小于 53 位，它可以。

大概`Result`真的是一个结构，没有人会真正编写我上面给出的代码。但我认为它可以作为一个例子，为什么宏最终总是比你想象的更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:28:40.240

正如史蒂夫所说，演员是能够传递`Result*`与宏不同的东西。但我认为它不应该做演员，这很危险，但只是初始化。会更好

```
#define HANDLE_CALL(result,call)         \
    do {                                 \
        Result callResult = (call);      \
        Result* resultVar = (result);    \
        /* some additional processing */ \
        (*resultVar) = callResult;       \
    } while(0) 
```

这将强制执行与`result`兼容的分配`Result*`，因此它可以是`Result*`或`void*`。将（指向更大结构的指针）强制转换为（类型的第一个字段`Result`）左右的所有其他用途都是无用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T16:55:56.677

这完全取决于人们传递给实例的愚蠢的东西。你真的需要一个宏吗 - 一个内联函数会更好。*

# spring - 为什么在 @Cachable 方法中仍然调用 Spring 消息转换器

> ID：11001180
> 
> 赞同：3
> 
> 时间：2012-06-12T16:52:56.207
> 
> 标签：spring, caching, optimization

假设我的控制器中有两种方法可以同时支持 json 和 xml。

```
@RequestMapping(value = "/get/response.json", method = RequestMethod.GET)
@Cacheable(JSON_CACHE)
public @ResponseBody JSONResponse getJsonResponse(){
    return responseService.getJsonResponse();
}
@RequestMapping(value = "/get/response.xml", method = RequestMethod.GET)
@Cacheable(XML_CACHE)
public  @ResponseBody XMLResponse getXmlResponse(){
    return responseService.getXmlResponse();
} 
```

还有两个消息转换器，将我的对象编组为合适的响应。

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="jsonConverter"/>
            <ref bean="xmlConverter" />
        </list>
    </property>
</bean> 
```

问题是 Spring 3.1，即使方法用 注释`@Cachable`，仍然为每个调用调用 marshaller。它在编组之前缓存对象的状态。这是不可接受的，因为性能在这里至关重要，而且编组对我来说太昂贵了。我希望 Spring 在这种情况下缓存最终响应。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:13:14.693

为避免此问题，可以使用 ehcache 网络缓存：[http ://www.ehcache.org/documentation/user-guide/web-caching](http://www.ehcache.org/documentation/user-guide/web-caching)

它通过简单地将过滤器添加到 web.xml 并提供 HTTP 响应的缓存来工作。

```
<filter>
    <filter-name>SimpleCachingHeadersPageCachingFilter</filter-name>
    <filter-class>net.sf.ehcache.constructs.web.filter.SimpleCachingHeadersPageCachingFilter
    </filter-class>
    <init-param>
        <param-name>suppressStackTrace</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>cacheName</param-name>
        <param-value>CachedPage2Cache</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>SimpleCachingHeadersPageCachingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# jquery - Jquery拆分功能无法设置数字选项值

> ID：11001182
> 
> 赞同：0
> 
> 时间：2012-06-12T16:53:10.733
> 
> 标签：jquery, split

我正在尝试使用 jquery split 函数来设置选项值，但它不起作用。我一定错过了一些非常简单的东西（编程新手！）。

```
$("#product").on('change keyup', function() {
var value = $('option:selected', this).text();
$("#small").val(value.split('-')[1]);
$("#medium").val(value.split('-')[2]);
$("#large").val(value.split('-')[3]);
}).keyup();​

<select id="product">
    <option value="ronald mcdonald-100-200-300">ronald</option>
    <option value="the hamburglar-150-250-350">ronald</option>
</select>
<select>
    <option value="0" id="small">Small</option>
    <option value="0" id="medium">Medium</option>
    <option value="0" id="large">Large</option>
</select> 
```

​还可以在 jsfiddle 上为您带来观赏乐趣：[**Demo**](http://jsfiddle.net/6tPEJ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:57:08.177

**[现场演示](http://jsfiddle.net/6tPEJ/7/)**

代替

```
var value = $('option:selected', this).text(); 
```

和

```
var value = $('option:selected', this).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:55:49.370

```
var value = $('option:selected', this).attr('value'); // not .text(), if you use text
                                                      // it will give you ronald as return 
```

**[演示](http://jsfiddle.net/FQSPy/2/)**

或者

```
var value = $(this).val(); // also return you the selected option value 
```

**[演示](http://jsfiddle.net/FQSPy/1/)**

# php - 使用 Gmail 在 PHP 上发送电子邮件的 SMTP 错误

> ID：11001190
> 
> 赞同：0
> 
> 时间：2012-06-12T16:53:25.367
> 
> 标签：php, mysql

错误：

```
SMTP -> ERROR: Failed to connect to server: Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP? (18313040)
SMTP Error: Could not connect to SMTP host. no photos' requests in pending! 
```

使用 Gmail 域通过我的 PHP 脚本发送邮件时出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:58:21.367

检查您的 PHP 配置并查看 php_openssl.dll 是否已安装/启用。

# javascript - 在 Chromium 中将插入符号移动到 contentEditable 的末尾

> ID：11001191
> 
> 赞同：3
> 
> 时间：2012-06-12T16:53:28.377
> 
> 标签：javascript, contenteditable, chromium, caret

我面临一个烦人的问题。我正在研究一个小 RTE，我现在正试图在元素末尾移动插入符号。

现在，这是我的代码（来自这篇文章[How to move cursor to end of contenteditable entity](https://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity)）：

我有一些自定义函数可以处理范围和窗口。我几乎可以肯定他们是正确的。

```
function(contentEditableElement){
    var contentEditableElement = this.getFocusedElement().parentNode;
    if(this.contentDoc.createRange)//Firefox, Chrome, Opera, Safari, IE 9+
{
    range = this.contentDoc.createRange();//Create a range (a range is a like the selection but invisible)
    range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range
    range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start
    selection = this.win.getSelection();//get the selection object (allows you to change selection)
    selection.removeAllRanges();//remove any selections already made
    selection.addRange(range);//make the range you have just created the visible selection
 }
else if(this.doc.selection)//IE 8 and lower
{ 
    range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)
    range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range
    range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start
    range.select();//Select the range (make it the visible selection
}
} 
```

它在 FF 和 Opera 下运行良好……但在 Chromium 中，插入符号根本不动。

你能帮我找到正确的方法吗？谢谢

# vb.net - 将值放入只读文本框 vb.net

> ID：11001197
> 
> 赞同：0
> 
> 时间：2012-06-12T16:53:46.813
> 
> 标签：vb.net, forms, textbox

我有一个包含许多文本框的表单。我想禁用与 2 个或更多文本框的用户交互操作，但我想为其分配一些文本。我想不出办法来做到这一点......

我有以下代码：

```
 If tablead.Rows(0)(4) = True Then
        TextBox2.Text = "0"
        TextBox2.ReadOnly = True
        TextBox2.Text = "0"
 End If 
```

当我运行它时，文本框变为“只读”，但未显示值 0。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:41:39.163

你做的有点对，但是你需要提供更多的代码。

这

```
If tablead.Rows(0)(4) = True then
   TextBox2.Text = "0"
   TextBox2.ReadOnly = True
End If 
```

足以实现您的目标，但由于某种原因，它永远不会触发您放入此代码的事件。请查看是否有其他事情发生，使其跳过此代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-13T09:14:32.953

逐步检查您的代码 - 观察会发生什么，您会发现问题

# javascript - Javascript 控制台应用程序？

> ID：11001203
> 
> 赞同：13
> 
> 时间：2012-06-12T16:54:15.473
> 
> 标签：javascript, html, console

是否可以在 JS 中制作基于控制台的应用程序？
我现在可以实现的所有这些。我希望有一个基于浏览器控制台的应用程序，而不是弹出提示：P

```
var fname=prompt("Command:","")
if (fname=="do_stuff") {alert("Ok, i will do stuff...")}
else {alert("You did not tell me something i know!")}; 
```

在我上面编写的 Javascript 程序中：首先有一个`prompt`框，然后有一个`if`语句来检查用户是否输入了“do_stuff”，如果他没有输入..（“ `else`”）然后它将显示一个警告框：你没有告诉我知道的事！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T20:44:46.983

简短的回答：您几乎可以使用 JavaScript做**任何事情。**这是一个示例控制台，它接受一个命令，后跟一组以空格分隔的参数，类似于许多 Windows 命令行操作。

看起来你对 JavaScript 很陌生，你应该学习了解它是如何与浏览器一起工作的……但我不知道你将使用什么浏览器，所以我的示例使用了 YUI 框架所以我的代码不会因为浏览器规范化而杂乱无章。

尝试将以下内容保存为 HTML 文档。然后，当您在浏览器中打开它时，尝试“do_stuff arg1 George 9 howdy”或“greet Navweb”。我希望您可以通过检查代码来弄清楚发生了什么。恐怕我没有时间发表适当的评论。

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
        <title>Console</title>
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.5.0/build/cssreset/cssreset-min.css"/>
        <style type="text/css">
            html {
                background-color: #000;
                }
            body {
                font-family: "Lucida Console";
                font-size: 13px;
                color: #0f0;
                }
            #in {
                display: block;
                position: fixed;
                left: 0;
                bottom: 0;
                width: 100%;
                padding: 8px;
                border-color: #fff;
                border-width: 1px 0 0 0;
                background-color: #000;
                color: #0f0;
                }
        </style>
    </head>
    <body>
        <div id="out"></div>
        <input id="in" tabindex="0"/>
    </body>
    <script type="text/javascript" src="http://yui.yahooapis.com/combo?3.5.0/build/yui/yui-min.js"></script>
    <script type="text/javascript">
        YUI().use("node", function(Y) {

            var COMMANDS = [
                {
                    name: "do_stuff",
                    handler: doStuff
                },

                {
                    name: "greet",
                    handler: function(args) {
                        outputToConsole("Hello " + args[0] + ", welcome to Console.");
                    }
                }
            ];

            function processCommand() {
                var inField = Y.one("#in");
                var input = inField.get("value");
                var parts = input.replace(/\s+/g, " ").split(" ");
                var command = parts[0];
                var args = parts.length > 1 ? parts.slice(1, parts.length) : [];

                inField.set("value", "");

                for (var i = 0; i < COMMANDS.length; i++) {
                    if (command === COMMANDS[i].name) {
                        COMMANDS[i].handler(args);
                        return;
                    }
                }

                outputToConsole("Unsupported Command: " + command);
            }

            function doStuff(args) {
                outputToConsole("I'll just echo the args: " + args);
            }

            function outputToConsole(text) {
                var p = Y.Node.create("<p>" + text + "</p>");
                Y.one("#out").append(p);
                p.scrollIntoView();
            }

            Y.on("domready", function(e) {
                Y.one("body").setStyle("paddingBottom", Y.one("#in").get("offsetHeight"));
                Y.one("#in").on("keydown", function(e) {
                    if (e.charCode === 13) {
                        processCommand();
                    }
                });
            });
        });
    </script>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T16:57:50.743

最简单、最兼容的方法是使用众多 Javascript 终端仿真器库之一，例如[termlib](http://www.masswerk.at/termlib/)、[jqueryterminal](http://terminal.jcubic.pl/)等

# asp.net-mvc - 使用 SignalR 将数据从 SQL Server 推送到 Web 应用程序

> ID：11001205
> 
> 赞同：9
> 
> 时间：2012-06-12T16:54:16.223
> 
> 标签：asp.net-mvc, sql-server-2008, signalr, server-push

我的 ASP.NET MVC 4 Web 应用程序向客户端显示频繁更新的数据。数据源自外部源（安装在服务器上的应用程序）并由 SQL Server 2008 R2 处理。

目前的数据流非常传统：客户端从 ASP.NET 轮询，ASP.NET 轮流从 SQL Server 轮询。

为了避免轮询（现在我需要在 Web 应用程序的用户之间进行实时交互），我正在更改推送方法，`signalR`用于向客户端广播数据。这增加了用户体验的流畅性，也减少了客户端和 ASP.NET 服务器之间轮询的开销。

现在的问题是反转 SSRV 和 ASP.NET 之间的流程：我想以最有效的方式**将数据从 SSRV 推送到 ASP.NET 。**

SSRV 正在运行昂贵的查询来导入一些外部数据——一旦数据被处理，它们也可以通过广播在 Internet 上共享。

我目前的穷人方法：向 Web 应用程序（在本地主机上）发出 POST Http 请求以发送数据（为此我使用 CLR 函数）。

处理完数据后，我将它们打包准备好，将它们`HttpWebRequest`排队到 Service Broker 中以避免影响其他活动，然后我就完成了。

我已经注销了`SqlDependency`，因为这会迫使我查询数据——这不是一个很大的优势（我会用 localhost HTTP 请求来换取在 SQL Server 上运行的查询）

同时我觉得应该有一个更整洁的方法来做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:35:55.913

好吧，我意识到 SignalR.Client.NET.35 库有点晚。

在撰写本文时，它没有打包在 NuGet 中，因此必须从 GitHub SignalR 项目站点[下载](https://github.com/SignalR/SignalR/zipball/master)代码并作为项目添加到解决方案中（需要**SignalR.Client.NET**和**SignalR.Client.NET35**）。

这是最终的解决方案，以防将来可以帮助某人：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Text;
using System.Data;
using System.Xml;
using Microsoft.SqlServer.Server;
using System.Data.SqlTypes;
using System.Net;
using System.IO;
using System.Xml.XPath;
using SignalR.Client.Hubs;

    internal static HubConnection connectionT = null;
    internal static IHubProxy msgHubT = null;

    /// <summary>
    /// allows SSRV to send a message to the Web Socket hub
    /// </summary>
    /// <param name="URL">URL of the Hub</param>
    /// <param name="hubName">Name of the message Hub to be used for broadcasting.</param>
    /// <param name="hubMethod">Hub method to be used for broadcasting.</param>
    /// <param name="message">Message to be broadcasted.</param>
    [SqlFunction()]
    public static void ut_sendMsgToHub(string URL, string hubName, string hubMethod, string message)
    { 
      try
        {
        if (connectionT == null)
        {
            connectionT = new HubConnection(URL.Trim()); // "http://localhost:56844/M2Hub"
        }
        if (msgHubT == null)
        {
            msgHubT = connectionT.CreateProxy(hubName.Trim());//"M2data"
        }

            if (!(connectionT.State == SignalR.Client.ConnectionState.Connected 
                || connectionT.State == SignalR.Client.ConnectionState.Reconnecting
                 || connectionT.State == SignalR.Client.ConnectionState.Connecting))
                connectionT.Start().Wait();
            msgHubT.Invoke(hubMethod.Trim(), message.Trim()).Wait();//"Send"
        }
        catch (Exception exc)
        {
            SqlContext.Pipe.Send("ut_sendMsgToHub error: " + exc.Message + Environment.NewLine);
        }
    } 
```

需要注意的重要一点：连同已编译的 SQL SERVER 2008R2 CLR 库，您必须将以下 dll 放在同一文件夹中：

*   牛顿软件.Json
*   SignalR.Client.Net35 显然
*   SM诊断
*   System.Runtime.Serialization
*   正确版本中的 System.ServiceModel（如果不兼容，请参阅 C:\Windows\assembly 中 GAC 中所述的版本）。
*   系统线程

最后在 SQL SERVER 中：

```
CREATE ASSEMBLY CLR_Bridge from 'C:\PathToLibraries\Library_CLR.dll' 
WITH PERMISSION_SET = UNSAFE --UNSAFE required
CREATE PROCEDURE ut_sendMsgToHub 
@url nchar(125) ,
@hubName nchar(75),
@hubMethod NCHAR(75),
@message NVARCHAR(MAX)
AS
EXTERNAL NAME CLR_Bridge.[LibraryNamespace.CLR_Bridge].ut_sendMsgToHub 
```

为了调用 ut_sendMsgToHub，我使用了一个服务代理，以便我确信函数执行的任何问题都与处理数据的存储过程分离

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:57:51.343

你看过[SignalR](https://github.com/SignalR/SignalR)吗？您可以使用它将数据异步推送到您的 UI（尽管它不是真正的推送）。对于您的具体情况，这可能无法接受，但我建议您看一下。可能是你需要的。希望有帮助。

# regex - 将用户文件夹替换为 ~ 和 // 替换为 /

> ID：11001206
> 
> 赞同：0
> 
> 时间：2012-06-12T16:54:21.540
> 
> 标签：regex, terminal

我正在为[Alfred](http://www.alfredapp.com/)开发一个扩展，用于`touch`在 Finder 中当前选定的文件夹中创建一个新文件，然后将路径复制到新文件。由于我不确定是否有可以将路径复制到这个新创建的文件的命令，所以我使用`find`它来定位效果很好的文件。然后我使用`pbcopy`将路径复制到我的剪贴板。被复制的路径格式为`/Users/doug/Desktop//me.md`.

我想用**Desktop**和**me.md**之间的`/Users/doug`替换`~`和替换，所以最终路径是.`//`****`/``~/Desktop/me.md`****

 ****如果有帮助，这是我在 Alfred 中使用的整个脚本：

```
folder=`osascript -e 'tell application "Finder" to set theFolder to POSIX path of (target of window 1 as alias)'`
cd "$folder"
touch {query}
find "$folder" -maxdepth 1 -mmin -1 -name "*.md" | pbcopy 
```

该`{query}`字段将替换为在 Alfred 中键入的内容，在这种情况下，将是新创建文件的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:06:35.093

您可以使用 sed 轻松完成此操作：

```
find "$folder" -maxdepth 1 -mmin -1 -name "*.md" | sed -e 's#/Users/doug#~#;s#//#/#' | pbcopy 
```****

# c++ - 常量表达式的问题

> ID：11001207
> 
> 赞同：0
> 
> 时间：2012-06-12T16:54:21.730
> 
> 标签：c++

我在编译代码时遇到了一些问题。我有这个特定的代码

```
 typedef double Type;

    static const Type MAX_VALUE = __DBL_MAX__;
    static const Type MIN_VALUE = -__DBL_MAX__; 
```

现在当我尝试编译它时。它显示以下错误

```
error: a call to a constructor cannot appear in a constant-expression 
```

我将定义 const 更改为 constexpr。但它显示以下错误

```
error: ‘constexpr’ does not name a type
note: C++0x ‘constexpr’ only available with -std=c++0x or -std=gnu++0x 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:08:30.350

我的水晶球告诉我这些行在类定义中。这是您遗漏的一条非常重要的信息。

在 C++11 之前，只能在类体内初始化整数和枚举静态成员。其他的，包括浮点数，必须在外面定义。

# sql - 将列名作为参数传递？

> ID：11001209
> 
> 赞同：1
> 
> 时间：2012-06-12T16:54:24.957
> 
> 标签：sql, sql-server, sql-server-2008

有没有办法将列名作为参数传递给函数？

我想创建一个函数，根据列过滤值，但我将此列名传递给函数（理想情况下作为字符串）？

我确实尝试过，但我将列名声明为 varchar，显然这不起作用！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T16:56:26.030

简短的回答：没有。

唯一的方法是使用动态 SQL。制作一个以字段/表名作为参数的存储过程并构建一个新的 SQL 语句来执行的情况并不少见。

但是，函数不能执行动态 SQL。

这*可能*表明设计方向错误。如果您详细说明为什么需要它，我们也许可以在根本不需要它的地方提供替代设计。

或者，您可能更适合使用存储过程而不是函数。

使用一系列`OR`条件的想法*也*符合您的描述。但它通常会产生非常糟糕的计划。我将查找我的有用链接，以了解为什么以及如何处理它；它非常深入，但很高兴知道。

**编辑**这是链接： [T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search.html "T-SQL 中的动态搜索条件")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T16:56:40.450

您可以在一些动态 sql 中执行此操作，在其中动态构建查询，或者如果您的字段数量有限，您可以执行类似的操作

```
select * from table where
(param = 'field1' and field1 = value)
or (param = 'field2' and field2 = value) 
```

# html - 从 Gtalk 打开桌面应用程序

> ID：11001210
> 
> 赞同：0
> 
> 时间：2012-06-12T16:54:26.647
> 
> 标签：html, google-talk

我有点奇怪的要求。我在 PC 中安装了一个谷歌谈话机器人和一个独立的应用程序。在向机器人发出一些命令时，机器人应该能够发送一个链接，点击它可以在桌面上打开应用程序。

例如。我已经下载了一个名为 MyCalendar 的应用程序。谷歌机器人应该给我一个链接，点击哪个 MyCalendar 应用程序应该在桌面上打开。

我不知道这是否真的可能。我想出了一种方法，方法是在我的服务器打开页面上提供一个页面的 URL，它会打开桌面应用程序，就像 Apple Appstore 网站如何打开 ITunes 一样。

有没有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:36:15.240

您真正要问的是：如何注册桌面应用程序来处理自定义 url 方案？

这真的取决于操作系统：

OS X：[http ://cocoadev.com/wiki/HowToRegisterURLHandler](http://cocoadev.com/wiki/HowToRegisterURLHandler)

视窗：http: [//msdn.microsoft.com/en-us/library/aa767914.aspx](http://msdn.microsoft.com/en-us/library/aa767914.aspx)

# java - 正则表达式和字符串操作技术

> ID：11001212
> 
> 赞同：0
> 
> 时间：2012-06-12T16:54:29.433
> 
> 标签：java, regex

假设输入字符串可以指定如下：

*   读取（xpath（'...'））或
*   xpath('...') 或
*   ...

Where ... 仅包含一些 xpath 表达式，例如，`/comment/text`

我真正想要的只是 xpath 表达式；考虑到可以指定的三种可能的有效模式，一般提取该值的有效方法是什么。

另外，我正在用 Java 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:03:59.617

它会帮助您发布一些代码，但您可以使用字符串拆分。请参考[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)

如果您确定有 xpath('') ，那么您可以使用 xpath(' 作为您的正则表达式并剥离字符串并收集其中的数据，直到它遇到另一个 ' （撇号）。

我希望这能给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:07:42.783

这是基本示例，它与两个字符串示例中的 xpath 部分匹配：

```
import java.util.regex.*;

class Untitled {
  public static void main(String[] args) {
    String input = "read(xpath('...'))";
    String result = null;
    Pattern regex = Pattern.compile("xpath\\(\'(.*?)\'\\)");
    Matcher matcher = regex.matcher(input);

    if (matcher.find()) {
        result = matcher.group(1);
    }

    System.out.println(result);
  }
} 
```

# android - 如何从异步任务返回数据

> ID：11001215
> 
> 赞同：1
> 
> 时间：2012-06-12T16:54:37.160
> 
> 标签：android, android-asynctask

我有一个类扩展 asynctask

```
private class taskMK extends AsyncTask<Void,Void,JSONObject>{
        String url;
        JSONObject json;
        public taskMK(String tr){
            this.url = tr;
        }
        @Override
        protected JSONObject doInBackground(Void... params) {
            JSONParser jsonParser = new JSONParser();
            JSONObject json = jsonParser.getJSONFromURL(url);
            return json;
        }

        @Override
        protected void onPostExecute(JSONObject result) {
            this.json = result;
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
        }
        public JSONObject getkq(){
            return this.json;
        }

    } 
```

活动中

```
String url = "https://maps.googleapis.com/maps/api/place/search/json?location="+lat+"%2C"+lng+"&name=atm&radius="+bk+"&sensor=false&key=AIzaSyCxaZYo1zJ_QxuNcp5dL5P0xm5XvIJPXRw";
taskMK mk = new taskMK(url);
mk.execute();
JSONObject json = mk.getkq(); 
```

我打算将此代码放在 asynctask 类中，但出现错误“无法在未调用 Looper.prepare() 的线程内创建处理程序”...。实际上，我不知道如何解决这个问题。

```
 Double lat = loc.getLatitude();
    Double lng = loc.getLongitude();
    String url = "https://maps.googleapis.com/maps/api/place/search/json?location="+lat+"%2C"+lng+"&name=atm&radius="+bk+"&sensor=false&key=AIzaSyCxaZYo1zJ_QxuNcp5dL5P0xm5XvIJPXRw";

    JSONParser jsonParser = new JSONParser();
    JSONObject json = jsonParser.getJSONFromURL(url);
    marker=getResources().getDrawable(R.drawable.hoe);
    itemizedOverlay = new MarkerATM(marker, mapView);
    int i=0;
    try{
        JSONArray array_atm = json.getJSONArray("results");
        for(i=0;i<array_atm.length();i++){
            JSONObject c = array_atm.getJSONObject(i);
            String atm_name = c.getString("name");
            String atm_address = c.getString("vicinity");

            JSONObject geometry  = c.getJSONObject("geometry");
            JSONObject location = geometry.getJSONObject("location");
            String atm_lat = location.getString("lat");
            String atm_lng = location.getString("lng");

            Double _lat = Double.parseDouble(atm_lat)*1E6;
            Double _lng = Double.parseDouble(atm_lng)*1E6;

            GeoPoint myPoint = new GeoPoint(_lat.intValue(), _lng.intValue());
            OverlayItem overlayItem = new OverlayItem(myPoint, atm_name, atm_address);
            itemizedOverlay.addOverlay(overlayItem);                            
        }
    }   catch(JSONException e){
        e.printStackTrace();
    }
    mapOverlays.add(itemizedOverlay); 
```

我想从 taskMK 获取数据，但数据总是返回 null ......我怎么办我解决了我的问题 :( .. 对不起，我用英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:28:51.300

您可以在执行 asyncTask 的活动类中使用，而不是`getkq()`在类中使用。所以使用以下内容：`taskMK``setkq()`

```
private class taskMK extends AsyncTask<Void,Void,JSONObject>{
    String url;
    JSONObject json;
    MyActivityClassObject obj;

    public taskMK(String tr, MyActivityClassObject obj){
        this.url = tr;
        this.obj = obj;
    }
    @Override
    protected JSONObject doInBackground(Void... params) {
        JSONParser jsonParser = new JSONParser();
        JSONObject json = jsonParser.getJSONFromURL(url);
        return json;
    }

    @Override
    protected void onPostExecute(JSONObject result) {
        this.obj.setkq(result);
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }
} 
```

在您的活动课程中，您可以使用以下功能：

```
public void setkq(JSONObject obj){
        //Add your parsing logic here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:00:57.607

这是因为 AsyncTask 是一个线程。它会自己做他的事情，当你调用`JSONObject json = mk.getkq();`AsyncTask 时，他的任务可能不会完成，因此返回 null 值。

根据您要对文件执行的操作，您可能希望显示从 JSON 文件中解析的一些数据。如果您想以任何方式更改 UI。你应该这样做`onPostExecute()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:29:09.130

我不会使用 AsyncTask，而是使用 IntentService，发送一个包含您想要完成的工作以启动它的 Intent，并在完成后将一个 Intent 发送回您的 Activity。

# c# - 将 Imagesource 加载到控件中

> ID：11001219
> 
> 赞同：1
> 
> 时间：2012-06-12T16:54:39.843
> 
> 标签：c#, wpf, image, controls

我需要一个显示图像的 System.Windows.Controls.Control 实例。但我所拥有的只是一个图像源。

我可以用

```
var image = new Image();
image.Source = imageSource; 
```

但是，除了 Image 在 Controls 命名空间中之外，它本身并不是从 Control 派生的。

有没有一种简单的方法可以以编程方式将 Imagesource 放入控件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:01:57.170

您可以将其包装在 ContentControl 中。

```
ContentControl cc = new ContentControl();
cc.Content = image; 
```

但我真的很好奇为什么你需要一个控制。

# javascript - 主干.js 路由器没有响应 url 片段

> ID：11001227
> 
> 赞同：1
> 
> 时间：2012-06-12T16:55:20.773
> 
> 标签：javascript, jquery, backbone.js

我定义并实例化了一个简单的路由器。

**问题：**当我转到 url`http://localhost/backbone1/#photos/5`时，我希望在 javascript 控制台中看到输出`console.log()`，但没有显示任何内容。我错过了什么吗？

**JS代码**

```
var GalleryRouter = Backbone.Router.extend({

    routes: {
        "about": "showAbout",
        "photos/:id": "getPhoto",
        "search/:query": "searchPhotos",
        "search/:query/p:page": "searchPhotos",
        "photos/:id/download/*imagePath": "downloadPhoto",
        "*other": "defaultRoute"
    },

    showAbout: function() {

    },

    getPhoto: function(id) {
        console.log('You are trying to reach photo ' + id);
    },

    searchPhotos: function(query, page) {
        console.log('Page number: ' + page + ' of the results for ' + query);
    },

    downloadPhoto: function(id, imagePath) {

    },

    defaultRoute: function(other) {
        console.log("Invalid. You attempted to reach: " + other);
    }

});

var myGalleryRouter = new GalleryRouter(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:57:29.260

您缺少初始化方法

```
 var initialize = function () {
            var myGalleryRouter = new GalleryRouter();
            Backbone.history.start();
        };
return {
        initialize: initialize
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:40:29.103

调用后，路由器开始监听 url 哈希变化`Backbone.history.start()`。通常，您需要先加载基本数据并初始化全局视图，然后再启动路由器。

# rest - REST 可以实现连接池吗？

> ID：11001230
> 
> 赞同：7
> 
> 时间：2012-06-12T16:55:41.560
> 
> 标签：rest, connection-pooling

由于 REST 是无状态的，因此传入的每个请求都不知道传入的前一个请求。在这种情况下可以使用连接池吗？

如果要实现连接池，它将打开连接池并在每次请求时将其关闭，就像标准数据库连接一样。

如何实现 REST 以利用连接池？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:04:53.780

你需要了解什么是连接池（对象池）、缓存和区别。

创建连接池是为了避免创建这些昂贵资源的费用。它们大多是在某个地方创建和存储的，在使用后，它们会返回池中并可以再次使用。这是您避免一遍又一遍地创建这些资源的费用。比如数据库连接。

对于 REST，如何向 REST 服务发出请求？让我们通过 PUT、GET、POST 等通过 HTTP 说，所以你需要 HTTP 连接。如果您担心服务器，则取决于您使用的服务器，它们中的大多数都使用线程。

我有一种感觉，您可能会对缓存和对象池感到困惑。使用对象池，就像线程池一样，您创建 X 数量的该对象并将其存储在池中（通常是队列）。每当你需要一个时，你就从池子里问一个。完成后，您将其放回游泳池。

连接池上下文中的 REST 太有意义了。

您可能想要的是缓存... REST 是无状态的，但每个对象都有一个唯一标识符，因此您可以根据该 ID 缓存它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:22:25.453

这当然是可能的：[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)并没有规定关于您的服务器如何在内部构建的任何内容，而是用于忽略状态并具有统一的 HTTP 接口。因此，您可以拥有一个使用连接池连接到您的数据库的服务器进程，但这仍然完全符合整个 REST、无状态、插入式组件的设计风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:52:55.027

REST 实现中的无状态要求处理请求所需的任何状态都需要包含在其中。它不会阻止服务器为了效率而保持状态。

连接池可以，服务器上的身份验证缓存也可以。不行的是 SQL 类型的连接池，其中您的请求流如下： { login / operation1 / operation2 } 如果不首先在同一连接上执行登录操作，则无法为 operation1 提供服务。REST 实现需要类似 { login + operation1 / login + operation2 }，因为它可以在 { login + operation1 } { drop cnx } { login + operation2 } 中安全地拆分，因此不需要服务器维护状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-25T21:54:46.210

对于 REST 框架的性能调优，我建议阅读[RESTful 应用程序](http://www.subbu.org/blog/2011/03/performance-of-restful-apps)的性能并作为一个很好的案例研究[Profiling Django REST framework](http://dabapps.com/blog/api-performance-profiling-django-rest-framework/)。

ps.: While the question focuses on connection pooling for REST, it suggests that the OPs goal is to increase the throughput/speed of the REST service.

# jquery - jQuery 的淡出和回调 - 快速执行操作时会显示两个元素

> ID：11001232
> 
> 赞同：0
> 
> 时间：2012-06-12T16:55:48.473
> 
> 标签：jquery

这是一个简单的问题，但我似乎无法解决它。我有这段代码，它几乎可以解释自己：

```
 $('div.userrate').hover(function() {
        var width = $(this).width();
        $(this).width(width);
        $(this).stop().children('form').fadeOut('fast', function() {
            $(this).next('p.hidden').fadeIn('fast')
        });
    }, function() {
        $(this).children('p.hidden').stop().fadeOut('fast', function() {
            $(this).prev('form').fadeIn('fast')
        })
    }) 
```

它工作得很好，但是当我快速浏览所有元素时，它会中断。两者都是可见的`p.hidden`。`form`我试图在`stop()`这里添加一些操作，但没有帮助。

有什么建议么？

- 编辑 -

根据要求，.userrate 的 HTML：

```
<div class="userrate">    
<form>    
<input class="star {split: 2}" type="radio" disabled="disabled" value="1">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="2">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="3">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="4">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="5">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="6">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="7">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="8">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="9" checked="checked">    
<input class="star {split: 2}" type="radio" disabled="disabled" value="10">
</form>    
<p class="hidden">Skończyłem</p>    
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:02:36.313

~~最简单的事情是~~添加`.stop()`到回调淡入淡出。更改`.fadeIn()`为`.fadeTo()`应确保评级元素始终完全消失（问题所在）。`.hidden`元素没有正确淡出的问题从来没有出现过（这是有道理的），但你可以`.fadeTo()`在那里使用以防万一。

这是一个示例小提琴：http: [//jsfiddle.net/36SCH/](http://jsfiddle.net/36SCH/)

# ruby-on-rails-3 - Rails 3 - 路由到控制器方法

> ID：11001235
> 
> 赞同：0
> 
> 时间：2012-06-12T16:55:57.360
> 
> 标签：ruby-on-rails-3, controller, routes

这是我目前正在使用的： `Rails -v 3.2.3`

我正在尝试在 routes.rb 中创建一条路径，该路径将路由到我的 links_controller.rb 中的方法。

**路线.rb**

`match 'modify_points' => 'links#modify_points', :as => :modify_points`

**links_controller.rb 方法**

```
def modify_points
  @link = Link.find(params[:id])
  @link.update_attribute :points, @link.points + params[:by].to_i if params[:by] =~ /[+|-]?1/
  render_text @link.points
end 
```

在我看来，这是我调用该方法的方式：

`<%= link_to('UP', modify_points_path(link, :by => 1), :remote => true) %>`

但是，当我单击此`UP`链接时……没有任何反应。应该发生的是link.points应该增加1，但是当我在控制台中检查时，我的积分仍然为零。我是否正确创建了路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:15:50.170

我一直使用这样的东西：

匹配 '/modify_points' => 'link#modify_points', :as => 'modify_points'

这会产生你想要的路线吗？rake 路线显示什么？

# .net - 使用命令在 XAML 中的另一个控件上设置属性

> ID：11001236
> 
> 赞同：0
> 
> 时间：2012-06-12T16:55:59.013
> 
> 标签：.net, wpf, xaml, binding, .net-4.0

这似乎应该很简单。但我找不到任何匹配的问题，所以这里是：

假设我有一个按钮：

```
<Button>Press Me</Button> 
```

而且我有第三方标签控件

```
<SomeTabControl x:Name="myTabControl" IsSelected="False">
   <TextBlock>Stuff Here</TextBlock>
</SomeTabControl> 
```

我如何连接该按钮的命令，使其设置`IsSelected`为 True 以仅`myTabControl`使用**XAML**？

或者甚至有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:47:57.603

你可以尝试这样的事情：

```
<Button x:Name="button1" Content="Press Me" >
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <ei:ChangePropertyAction TargetObject="{Binding ElementName=myTabControl}"
                PropertyName="IsSelected" Value="True"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

这要求您将`microsoft.expression.interactions.dll`程序集的引用添加到您的项目中。

# c++ - 内存错误及相关

> ID：11001237
> 
> 赞同：1
> 
> 时间：2012-06-12T16:56:01.620
> 
> 标签：c++, memory-management

啊! 我想我有其中一个晦涩的记忆错误。但我不确定。它甚至可能不在我的代码部分。我正在 MS VC++ 2005 上测试一个（C++）应用程序。现在，我的代码在看似无害的向量推回时抛出了一个异常并由于一些堆错误而中断：

```
std::vector<int> blah;
for(int i=0; i<somesize; ++i) {
   blah.push_back(0);
} 
```

无论我将这段代码移动到哪里，失败都发生在推回时。这太疯狂了！我确信这种用法没有任何违法之处。此外，当我将其注释掉时，它会毫无问题地通过它。在它的上方和下方，我有其他向量，我可以毫无问题地加载它们。与此相关，我还有另一个关于这样做的问题：

```
std::vector<double*> wha;
wha.push_back(nil);
..
... 
wha[0] = some pointer I create; 
```

我的问题是：当 wha 超出范围时，它不应该删除指针，对吗？我想我是对的，但最好澄清一下。很抱歉，没有太多细节，但如果有任何其他细节有帮助，请告诉我，我会尝试发布更多信息。谢谢。

编辑：

确切的错误信息是：

```
First-chance exception at 0x771b70cd in myprogram_run.exe: Microsoft C++ exception: 
H5::FileIException at memory location 0x08026ca0..
First-chance exception at 0x771b70cd in myprogram_run.exe: Microsoft C++ exception: 
H5::FileIException at memory location 0x08026ca0..
'myprogram_run.exe': Loaded 'C:\Windows\System32\wdmaud.drv', No symbols loaded.
...
...
''myprogram_run.exe': Unloaded '<path\to>\bin\win64-x64-vs2005.shared\tcl85.dll'
The thread 'Win64 Thread' (0x23a8) has exited with code 0 (0x0).
The thread 'Win64 Thread' (0x120c) has exited with code -1 (0xffffffff).
The thread 'Win64 Thread' (0x27bc) has exited with code -1 (0xffffffff).
...
...
HEAP[myprogram_run.exe]: HEAP: Free Heap block dfd6870 modified at dfd68d0 after it was freed
Windows has triggered a breakpoint in myprogram_run.exe.

This may be due to a corruption of the heap, and indicates a bug in myprogram_run.exe or any of 
the DLLs it has loaded.

The output window may have more diagnostic information 
The program '[3052] myprogram_run.exe: Native' has exited with code -1 (0xffffffff). 
```

我应该担心 H5::FileIExceptions 吗？我们确实将它作为第 3 方 DLL 链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:02:09.590

1.  您发布的代码很好。内存损坏可能发生在其他地方，`push_back`只是揭示了它。
2.  `nil`不会被删除。每次使用 时`push_back`，都会将指针的副本推入向量中。唯一被删除的是包含所有指针副本的内部数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:27:40.420

一般来说，遇到堆损坏时你应该做的第一件事是启用某种形式的“调试 malloc”，大多数平台都有这个。

在 VC++2005 上，显然你可以`#define _DEBUG`. 这会将 malloc() 转换为[_malloc_dbg()](http://msdn.microsoft.com/en-us/library/faz3a37z%28v=vs.80%29.aspx)，其中包括调试信息（例如文件/行）和填充以检查缓冲区溢出/不足。另请参见[CRT 调试堆](http://msdn.microsoft.com/en-us/library/974tc9t1%28v=vs.80%29.aspx)。

**编辑：**如果这没有帮助（而且通常没有帮助），您可以使用调试 malloc 在每次分配后放置一个“保护页”，例如[DUMA](http://sourceforge.net/projects/duma/)或 OSX 的`libgmalloc`. 这在调试版本中默认不启用，因为开销很大（每次分配最多约 8K），但可以更快地调试问题*（*并捕获错误访问，而不是随后调用 malloc()/free()/堆检查功能）。

（我最近修复了一个我已经忍受了*多年*的〜每周崩溃- 可能超过十年！我不确定我之前怎么没有想到这样做，因为我已经知道 libgmalloc几乎一样长的时间，并用它来调试工作中的堆损坏。）

# java - 如何使用 BoneCP 连接池正确关闭 Embedded Derby 数据库

> ID：11001246
> 
> 赞同：0
> 
> 时间：2012-06-12T16:56:31.480
> 
> 标签：java, derby, bonecp

使用 Derby，您需要特别调用：

```
DriverManager.getConnection("jdbc:derby:myDatabase;shutdown=true"); 
```

当你想关闭数据库时。但是，使用 BoneCP，您可以：

```
BoneCPConfig config = new BoneCPConfig();
config.setJdbcUrl("jdbc:derby:myDatabase");
config.setXXX(...);
... 
BoneCP connectionPool = new BoneCP(config);

// shutdown connection pool
connectionPool.shutdown(); 
```

但是，对于[derby，您需要调用 shutdown 命令，否则可能会出现一些错误](https://stackoverflow.com/questions/2307788/how-to-shutdown-derby-in-memory-database-properly)

**所以问题是如何在 BoneCP 框架中调用关闭连接字符串？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:53:56.143

[在另一个相关的较新问题](https://stackoverflow.com/questions/13304891/bonecp-derby-how-to-properly-shutdown)中，以下似乎是相同的原因：“除非您正在运行 v0.8.1-beta2 或更高版本，否则在您的配置中将“disableConnectionTracking”设置为 true。”

换句话说，您需要 derby 连接 URL 以及 BoneCP 的正确配置，至少现在...

请注意，[当成功关闭 derby 时，您应该预期会出现异常](http://db.apache.org/derby/docs/dev/devguide/tdevdvlp40464.html)：“成功关闭总是会导致 SQLException 指示 Derby 已关闭并且没有其他异常。”

# python - 将连接字符串拆分为元组并忽略空字符串的最快方法

> ID：11001247
> 
> 赞同：21
> 
> 时间：2012-06-12T16:56:32.070
> 
> 标签：python, split

我有一个这样的连接字符串：

```
my_str = 'str1;str2;str3;' 
```

我想对其应用`split`函数，然后将结果列表转换为元组，并删除由`split`（注意最后一个';'）产生的任何空字符串

到目前为止，我正在这样做：

```
tuple(filter(None, my_str.split(';'))) 
```

有没有更有效（在速度和空间方面）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T17:03:12.753

这个怎么样？

```
 tuple(my_str.split(';')[:-1])
    ('str1', 'str2', 'str3') 
```

您在字符处拆分字符串`;`，并将所有子字符串（最后一个空字符串除外）传递给元组以创建结果元组。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-12T16:59:39.933

这是一种非常合理的方法。一些替代方案：

*   `foo.strip(";").split(";")`（如果字符串内没有任何空切片）
*   `[ x.strip() for x in foo.split(";") if x.strip() ]`（从每个切片中去除空格）

执行此操作的“最快”方法取决于很多事情……但是您可以轻松地尝试使用 ipython 的`%timeit`：

```
在 [1] 中： foo = "1;2;3;4;"

在 [2] 中：%timeit foo.strip(";").split(";")
1000000 次循环，3 次中的最佳：每个循环 1.03 us

在 [3] 中：%timeit 过滤器（无，foo.split(';'))
1000000 个循环，3 个中最好的：每个循环 1.55 us

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T17:02:44.603

如果您只希望最后有一个空字符串，您可以这样做：

```
a = 'str1;str2;str3;'
tuple(a.split(';')[:-1]) 
```

或者

```
tuple(a[:-1].split(';')) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T05:34:36.530

尝试`tuple(my_str.split(';')[:-1])`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T17:02:17.910

是的，这是一种非常 Pythonic 的方式。如果您喜欢生成器表达式，也可以将其替换为`filter()`：

```
tuple(part for part in my_str.split(';') if part) 
```

这样做的好处是允许在线对每个零件进行进一步处理。

有趣的是，文档`str.split()`说：

> ... 如果 sep 未指定或为无，则任何空白字符串都是分隔符**，并且从结果中删除空字符串**。

我想知道为什么要完成这种特殊情况，而不允许其他分隔符使用它...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T17:01:19.190

使用拆分然后切片：

```
 my_str.split(';')[:-1] 
```

或者 ：

```
lis=[x for x in my_str.split(';') if x] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-14T15:01:43.827

如果您的字符串中的项目数是固定的，您也可以像这样解构内联：

```
(str1, str2, str3) = my_str.split(";") 
```

更多信息在这里： [https ://blog.teclado.com/destructuring-in-python/](https://blog.teclado.com/destructuring-in-python/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-19T23:57:50.997

我知道这是一个老问题，但我刚发现这个问题，发现最佳答案（大卫）没有像 OP 要求的那样返回元组。尽管该解决方案适用于 OP 给出的一个示例，但投票率最高的答案 (Levon) 会用子字符串去除尾随分号，这会在空字符串上出错。

最强大和 Pythonic 的解决方案是 voithos 的回答：

```
tuple(part for part in my_str.split(';') if part) 
```

这是我的解决方案：

```
tuple(my_str.strip(';').split(';')) 
```

但是，当针对空字符串运行时，它会返回：

```
('',) 
```

所以我会用voithos的回答代替我的。谢谢voithos！

# r - 在 R 中绘制转换后的数据

> ID：11001248
> 
> 赞同：1
> 
> 时间：2012-06-12T16:56:34.773
> 
> 标签：r

我正在尝试绘制最终结果。我已将响应变量转换为

```
expon=^0.2 
```

以获得描述效果的回归线。我不想用曲线来说明效果，我想保持直线并在 y 轴上放置一个指数刻度。我是否忽略了帮助页面中的某个部分？

到目前为止的相关输入是：

```
expon = 0.2 ## best fit for assumptions AND correlation 
tempMin = 0
dmaxDS_Summer_noSO4$response = dmaxDS_Summer_noSO4$TempChange^expon

plot(response[ind & !indClosed&!indLarge]~Sunshine[ind &!indClosed&!indLarge], 
  exp="y",data=dmaxDS_Summer_noSO4,pch=21,col="red",
  main='All Small Sites',ylab="Temperature Change^0.2",xlab="Sunshine Hrs")
abline(a[1]a[5]lwd=3,col="red") 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-05T15:59:08.717

您可以使用`log`函数的参数`plot`。请看下面的代码：

```
# Data Simulation
expon <- 0.2 ## best fit for assumptions AND correlation 
tempMin <- 0

dmaxDS_Summer_noSO4 <- data.frame(TempChange  = 0.2 ^ 0:100 , Sunshine = 0:100 %/% 12)
dmaxDS_Summer_noSO4$response = dmaxDS_Summer_noSO4$TempChange ^ expon
ind = seq_along(nrow(dmaxDS_Summer_noSO4))
indClosed = FALSE 
indLarge = FALSE

# Plotting
plot(response[ind & !indClosed & !indLarge] ~ Sunshine [ind & !indClosed & !indLarge], 
     data = dmaxDS_Summer_noSO4,
     pch = 21,
     col = "red",
     main = "All Small Sites",
     ylab = "Temperature Change ^ 0.2",
     xlab = "Sunshine Hrs",
     log = "y") 
```

输出： [![绘图输出](../Images/033dd2213005c4a1ee595cdf34069689.png)](https://i.stack.imgur.com/nmGNq.png)

# java - 堆空间不足

> ID：11001252
> 
> 赞同：20
> 
> 时间：2012-06-12T16:56:41.670
> 
> 标签：java, scala, jvm, heap-memory

我遇到了堆空间问题。我的程序很简单。有两个演员（发送和接收）“发送”演员每秒传递 10000 个对象以“接收”，并接收发布这些对象。接收者收到的对象被保存在容器中，但容器每秒都被清空。所以容器不可能空间不足。现在，在 420000 个对象之后，我的 eclipse 鞋出现错误，提示“ **ioconsole 更新程序遇到问题”**。当我进入细节时，我看到错误**内部错误::Java堆空间**

我试过增加堆大小。我的堆大小是 8096m，maxpermsize 是 4096

我正在使用 visualVm 监视我的代码，我注意到它根本没有超过堆大小。如何解决问题完全空白。

有人可以让我知道还有哪些其他可能的情况会导致此类错误。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-12T17:00:42.740

IOConsole 是一个 Eclipse 类，而不是你的程序。您是否经常打印到 System.out？在窗口 > 首选项下搜索“控制台”。为所有控制台缓冲区设置某种限制。尝试从程序中打印更少的输出。也许改为登录到文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-06T05:04:18.100

由于控制台中的缓冲区大小而出现此问题。

解决方案 ：

右键单击控制台 -> 首选项

限制控制台。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T17:20:21.140

您可以添加以下 JVM 参数，让您了解内存使用情况和 GC 正在做什么：

```
-Xloggc:/tmp/gc.log -XX:+PrintGCDetails -XX:+PrintGCTimeStamps 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T16:06:45.757

我遇到了这个问题，我试图通过在 Eclipse 中更改堆和缓冲区设置来解决它。但是我无法解决它。然后我注意到我的程序中存在内存泄漏，并且线程数随时间增加。在我修复了这个错误之后，问题就解决了。我认为内存泄漏不是最可能的原因，但应该考虑。

# vb.net - 不允许编辑链接（引用）的项目

> ID：11001253
> 
> 赞同：0
> 
> 时间：2012-06-12T16:56:42.917
> 
> 标签：vb.net, visual-studio-2010

最近我发现了如何在 Visual Studio 中添加指向项目的链接，以便您可以在项目之间引用公共或共享文件。编辑原始文件会将更改传播到引用文件的项目。但是您也可以编辑引用项，并且更改会反映在原始文件中，有没有办法防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:06:29.807

参考项目*是*原始文件。
如果您不想更改“原始文件”，请复制文件而不是引用它。

此外，人们*喜欢*编辑文件。
如果不应该编辑某些代码，请将其设为二进制文件。

# ruby-on-rails - 如何在 Heroku 多个测功机上使用载波缓存？

> ID：11001259
> 
> 赞同：4
> 
> 时间：2012-06-12T16:57:13.600
> 
> 标签：ruby-on-rails, caching, heroku, carrierwave

我在 Heroku 上有一个带有 Carrierwave 的应用程序。在一个页面上，我有 2 个表单：1 个用于上传图片的 ajax 表单和 1 个用于创建对象所需的附加信息的普通表单。假设我的 Carrierwave 挂载为`:picture`，每次提交 ajax 表单时，图片都会临时保存到 public 文件夹中，其路径返回为`:picture_cache`. 第二种形式然后使用它来知道在第二个请求中要使用新对象创建哪个图片。这适用于单个测功机。

不同的测功机不知道彼此的文件系统。因此，如果提交第二个表单的请求与第一个表单的请求不同，它就找不到图像。

有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:24:32.063

我使用自定义模型并将所有文件（包括 tmp 文件）存储在 mongodb 中。上传被标记为 tmp。那些模型是“保存”的，我只需删除“tmp”标志。这样，所有节点始终可以看到所有图像。载波默认缓存在 ./tmp 中是非常疯狂的，因为许多多节点配置会看到这个问题（除非平衡器实现会话亲和性）。

这是我的模型和控制器等：[https ://gist.github.com/3161569](https://gist.github.com/3161569)

您必须以下列形式进行一些自定义工作：

*   保存每个发布的文件，无论如何
*   在隐藏字段中中继发布的文件 ID
*   在保存时查找文件和/或以前上传的 id
*   建立模型关联

这种方法虽然不是“魔术”，但也产生了以下令人敬畏的副作用：

*   你有*一个*进程在后台运行作业来缩略图图像与旋转 image_magick 每当用户点击“提交”（这是一个*严重*的DOS 向量，尤其是在内存有限的主机上，如 heroku）

*   您可以在后台、每小时或其他任何情况下将图像迁移到 s3，并且上传只是有一个新的 url（在这种情况下，如果控制器注意到这一点，则需要发出永久重定向）。这真的很好，因为您可以将它们保存在数据库中以进行开发、登台等，并在不更改任何上传或查看代码的情况下将部分或全部上传迁移到 s3。

# php - MySQL/PHP ORDER BY 对畸形数据

> ID：11001265
> 
> 赞同：4
> 
> 时间：2012-06-12T16:57:34.127
> 
> 标签：php, mysql

假设我有这张桌子。假设它看起来像这样：

```
table values (

 - id (int, primary key, auto increment) 
 - object_id (foreign key on a
   different table. Used to search for specific object values) 
 - year
   (varchar, because in someone's infinite wisdom using "1981-1982" in
   addition to 1981 and 1982 values is a good idea) 
 - high_price 
 - low_price

) 
```

现在，如果只是在最后添加数据并更新价格，这将是一件容易的事情。但是，数据并不好看。例如，让我们看一下三年的范围：

```
(id, object_id, year, high_price, low_price)

 - 259, 60, 1976, 34000, 29000
 - 260, 60, 1977, 35000, 31000
 - 261, 60, 1978, 36000, 35000
 - 1103, 60, 1976, 29000, 25000
 - 1104, 60, 1977, 36000, 32000
 - 1105, 60, 1978, 38000, 33000
 - 2634, 60, 1976, 34000, 30000
 - 2635, 60, 1977, 37000, 33000
 - 2636, 60, 1978, 40000, 35000 
```

如果我想获取特定年份的 18 个最新条目，我将如何做呢？它还需要以相反的顺序排列，这样当我绘制它时，最近的年份就在右边。我不一定知道最近的一年，也可能不是当年（很可能不是当年）。

我的 php 中有一条 SQL 语句，如下所示：

```
$sql = "SELECT * FROM `values` WHERE `object_id`='$id' 
    ORDER BY  `year` DESC, `id` DESC LIMIT 18"
$result = $mysqli->query($sql); 
```

这似乎获得了正确的值，但将它们置于错误的顺序。我可以简单地通过反向循环遍历列表，但我想知道是否有一个 SQL 语句可以为我执行此操作。

谢谢！

编辑：我已经用`ORDER BY year ASC, id DESC`and尝试了 SQL `ORDER BY year DESC, id ASC`。这些都不起作用。第一个仍然向后吐出它们，而第二个从第一年而不是最后一年吐出它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:02:49.730

添加一个外部选择并翻转年份的顺序：

```
SELECT * FROM (
  SELECT year, col2, col3 ... FROM `values` WHERE `object_id`='$id' 
      ORDER BY  `year` DESC, `id` DESC LIMIT 18
  ) a
ORDER BY YEAR ASC 
```

# php - 无需下载即可唯一标识文件

> ID：11001269
> 
> 赞同：3
> 
> 时间：2012-06-12T16:57:49.243
> 
> 标签：php, javascript, python

所以基础项目是这个......

我正在尝试编写一个服务器应用程序，它将从网站下载和散列文件。

这样做的原因是，我可以将以不同名称重新上传的特定文件列入黑名单，或者提供有关文件真实内容的进一步描述。这些文件有 0.1KB - 10.00MB 等等。如果我可以在一个合理的大致数字内检测到一个文件已经被散列，我可以返回散列而不是下载整个文件并发送结果。

我的临时解决方案是一个 JavaScript 插件，它可以在现场完成。这会导致暂时冻结，并且对我来说太多余了。我的目标是让它变得足够好与公众分享；目前的方法远非如此。

我在编程方面的技能非常广泛，但在任何个人中都不是专业或完善的，因此高度赞赏图书馆或示例。

* * *

我的java脚本代码的一个片段是这个......

```
 $('.tablesorter tbody tr').each(function(index) {
        var href = 'http:' + $(this).find("td a:eq(0)").attr('href');
        var MD5  = "";
        $.get(href, function(data) {
            MD5 = calcMD5(data);
            $(".tablesorter tbody tr:eq("+index+") td:eq(3)").text(MD5); 
         });
    }); 
```

这很好用，可以满足需要。但是，我想让服务器执行此操作，以便文件只需要进行一次哈希处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:15:34.060

假设您的问题是您希望最小化使用的带宽量，您可以将下载的数据量限制为前 100kb，并在该部分上构建您的散列。您可以使用的其他信息是服务器在标头中发送的任何信息，例如总文件大小和 MIME 文件类型。

显然，如果您希望查看的文件在文件后面的部分不同，这将不起作用。但它应该适用于图像或其他压缩文件格式。

# python - Python龙卷风httplib重试

> ID：11001272
> 
> 赞同：0
> 
> 时间：2012-06-12T16:58:13.597
> 
> 标签：python, tornado

我正在使用[tornado使用](http://www.tornadoweb.org/documentation/httpclient.html)**HTTP proxy**异步获取许多网页。因此，我的许多获取都发生了错误（*我的代理不可靠*）。我想用另一个代理立即重试它们。这是示例：

```
from tornado import ioloop
from tornado import httpclient

def handle_request(response):
    if response.error:
        print "Error:", response.error
        // HERE i want to put my retry with another proxy
    else:
        print response.body
    ioloop.IOLoop.instance().stop()

http_client = httpclient.AsyncHTTPClient()
http_client.fetch("http://www.google.com/", handle_request)
ioloop.IOLoop.instance().start() 
```

但是我怎样才能从**handle_request**向当前循环添加新的 fetch 事件？另外，我如何将变量传递给**handle_request**（列出我所有的代理）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:05:50.347

你问了两个问题——

我会考虑使用部分[http://docs.python.org/library/functools.html#partial-objects](http://docs.python.org/library/functools.html#partial-objects)

```
from functools import partial

PROXIES = [A, B, C, D] # As appropriate
...
def handle_request(proxies, response):
    if ...BAD RESPONSE...:
        return http_client.fetch(response.request.url, partial(handle_request, proxies[1:]))
    # Now handle the case that you have a good result or you're out of proxies

http_client.fetch("http://www.google.com/", partial(handle_request, PROXIES[:])) 
```

当然，另一个选择是让它成为一个对象。

```
class ProxyRequest(object):
     PROXIES = [A, B, C]

     def __init__(self, url):
          self.url = url
          self.proxies = self.PROXIES[:]
          self.fetch()

     def fetch(self):
          p, self.proxies = self.proxies[0], self.proxies[1:]

          http_client.fetch(self.url, self.handle, proxy=p)

     def handle(self, response):
          if response.error:
               if self.proxies:
                     return self.fetch()
               else:
                     ...error case...

          ...stop the ioloop if you want... 
```

# php - 为 Android 构建一个简单的音乐流媒体应用程序

> ID：11001275
> 
> 赞同：2
> 
> 时间：2012-06-12T16:58:23.753
> 
> 标签：php, android, http, client-server, rtsp

我想构建一个基本的客户端-服务器应用程序，我的 android 智能手机可以在其中流式传输一些音频文件，这些文件保存在我的本地服务器上。

对于客户端-服务器通信，我从 REST 方法开始，所以我在 android 上使用简单的 HTTP-GET 请求，在服务器端使用 PHP 和 MySQL。HTTP-GET 请求返回一个 URL 以播放特定文件。

之后我使用这个 URL 开始播放文件：

```
mp.setDataSource("http://127.224.2.222/music/filename.mp3"); 
```

为此，我将音乐文件夹直接保存到 ApacheWebserver 的 www 目录中。

REST 方法是正确的方法吗？

关于安全问题，我怎样才能防止人们下载文件？（即，一旦有人知道我的 httpget 请求的地址，我认为在浏览器中很容易看到文件）

对于流式传输音乐，我现在正在使用这种简单的 HTTP 方法——RTSP 连接的优势是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:23:21.693

对于 Web 服务的身份验证，请查看 OAuth2.0，这是事实上的标准。如果 OAuth 对您的程序来说太多，您可以在 URL 中添加一个简单的令牌。这仍然让您对一系列窥探攻击敞开大门，但确实增加了一点保护。

至于方法：http请求将以最高下载速度（同时牺牲延迟）下载文件并将其缓冲在您的手机上。RTP（RTSP 实际上是一种不同的协议，用于控制设备，而不是通过网络流式传输媒体）连接具有更多用于实时流式传输的协议规范，因为它具有低延迟，并且只请求缓冲区所需的下一个 x 数据包。换句话说，http 将简单地完成工作，而 RTP 是一个更优雅的解决方案。

# action - 将psd文件批量导出为png

> ID：11001276
> 
> 赞同：10
> 
> 时间：2012-06-12T16:58:29.097
> 
> 标签：action, photoshop

我有数千个 psd 文件要保存为 png。psd 文件没有什么不同，除了图像中心的小文本。有没有办法让工作自动化？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T17:12:04.110

是的。打开您的操作窗口。创建新动作。记录自己打开，将文件保存为 png 并关闭文件。

然后在文件-> 自动化-> 批处理下。将其指向您的 psd 文件夹并选择您的操作。它应该运行将它们保存为 png 的文件。

如果您不熟悉操作，则快速 google 搜索可能会有所帮助。

根据作者输入编辑：}

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-10T18:15:22.290

[XnView](http://www.xnview.com/en/)做得很好。它可以将大多数文件批量转换为大多数格式。它还具有批量转换和批量重命名等功能。

我经常使用它来将 PSD 转换为 JPG/PNG/GIF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T17:08:14.157

我会使用 Irfanview 强大的批处理引擎。免费且超快。

*   转到 Irfanview 缩略图中的文件夹
*   选择所有文件
*   右键单击并“使用选定文件启动批处理对话框”
*   选择 PNG 作为输出格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-13T03:14:20.430

是的，您可以进行 Photoshop 操作来保存 png，然后通过批处理运行它。不幸的是，当您想要使用此操作选项并指定保存已处理文件的目标时，这会变得很棘手。

进入 Dr. (Russell) Brown 的 Image Processor Pro，它是 Photoshop 的一个扩展，可以满足大多数人的需求。它非常简单，甚至可以将多个进程和输出格式/目标堆叠到每个文件。

它是布朗博士服务的一部分 - [http://russellbrown.com/scripts.html](http://russellbrown.com/scripts.html)

# iphone - 带有 Cordova (Phonegap) 的 iPhone 4 可缩放视图

> ID：11001281
> 
> 赞同：2
> 
> 时间：2012-06-12T16:58:36.007
> 
> 标签：iphone, cordova, retina-display

我有一个奇怪的问题。我使用 Cordova 部署了一个专为 iPhone 4 设计的应用程序。

但是 Viewport 总是双倍缩放的，所以 webkit 创建了一个 1280 * 1920 px 的视图。

我不知道为什么会这样。我已经包括了

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;"/> 
```

但它仍在发生。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:01:21.580

好吧，我终于找到了解决方案，但仍然很尴尬。

在 cordova.plist 我设置`Enable viewport scale`为`yes`. 但仍然在元视口中我必须做一个`initial-scale=0.5`

# android - OnTouchEvent 不适用于子视图

> ID：11001282
> 
> 赞同：31
> 
> 时间：2012-06-12T16:58:37.210
> 
> 标签：android, ontouchlistener

我有一个线性布局，上面有一个 Button 和一个 TextView。我为活动编写了一个 OnTouchEvent。如果我触摸屏幕，代码工作正常，但如果我触摸按钮，代码不起作用。对此有什么可能的解决方案？

```
public boolean onTouchEvent(MotionEvent event) {
   int eventaction=event.getAction();

   switch(eventaction)
   {
   case MotionEvent.ACTION_MOVE:
      reg.setText("hey");

   break;
   }
   return true;

  } 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-12T17:09:24.263

问题在于 Android 如何处理触摸事件的操作顺序。每个触摸事件都遵循以下模式（简化示例）：

1.  Activity.dispatchTouchEvent()
2.  ViewGroup.dispatchTouchEvent()
3.  View.dispatchTouchEvent()
4.  View.onTouchEvent()
5.  ViewGroup.onTouchEvent()
6.  活动.onTouchEvent()

**但是事件只会跟随链直到它们被消耗**`onTouchEvent()`（意味着有人从或侦听器返回 true ）。如果您只是触摸屏幕上的某个位置，则没有人对该事件感兴趣，因此它会一直流向您的代码。但是，对于按钮（或其他可点击`View`），它会消耗触摸事件，因为它对它感兴趣，因此流程在第 4 行停止。

如果要监视进入 Activity 的所有触摸，则需要重写`dispatchTouchEvent()`，因为始终首先`onTouchEvent()`调用的内容是最后调用的，并且只有在没有其他人捕获该事件的情况下才调用。但是，请注意不要在此处使用事件，否则子视图将永远无法获取它们，并且您的按钮将无法单击。

```
public boolean dispatchTouchEvent(MotionEvent event) {
   int eventaction=event.getAction();

    switch(eventaction) {
      case MotionEvent.ACTION_MOVE:
          reg.setText("hey");
          break;
      default:
          break;
    }

    return super.dispatchTouchEvent(event);
} 
```

另一种选择是将您的触摸处理代码放入自定义`ViewGroup`（如`LinearLayout`）并使用其`onInterceptTouchEvent()`方法允许父视图偷走并在必要时处理触摸事件。不过要小心，因为这种交互在新的触摸事件开始之前无法撤消（一旦你窃取了一个事件，你就窃取了它们全部）。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-16T14:39:42.400

让我在@Devunwired 的这篇出色的帖子中再添加一条评论。

如果您还在 View 上设置了 onTouchListener，那么它的 onTouch() 方法将在调度方法之后调用，但在任何 onTouchEvent() 方法之前调用，即在@Devunwired 的答案中介于 no.3 和 no.4 之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:01:47.703

尝试将您的布局的[descendantFocusability](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android%3adescendantFocusability)属性设置为 blocksDescendants

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-09T03:12:21.747

`Activity::onTouchEvent`仅当 Activity 窗口中的视图没有消耗/处理事件时才会调用。如果您触摸`Button`，`Button`将消耗事件，因此 Activity 将无法处理它。

查看以下文章，了解有关 Android 触摸事件处理管道的更多信息。

[http://pierrchen.blogspot.jp/2014/03/pipeline-of-android-touch-event-handling.html](http://pierrchen.blogspot.jp/2014/03/pipeline-of-android-touch-event-handling.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-27T09:09:08.093

你也可以试试`onUserInteraction()`：

```
@Override 
public void onUserInteraction(){
     //your code here
     super.onUserInteraction();
} 
```

很适合我！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-12T14:12:48.090

`public boolean dispatchTouchEvent(MotionEvent event)`改为使用`onTouchEvent()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-31T12:50:17.147

```
RecyclerView list_view = findViewById(R.id.list_view);
list_view.addOnItemTouchListener(new RecyclerView.SimpleOnItemTouchListener(){
    @Override
    public boolean onInterceptTouchEvent(@NonNull RecyclerView rv, @NonNull MotionEvent e) {
        View child = rv.findChildViewUnder(e.getX(), e.getY());
        Log.i("Hello", "World");
        return false;
    }
}); 
```

# vba - VBA 触发市场数据引擎重启

> ID：11001289
> 
> 赞同：0
> 
> 时间：2012-06-12T16:58:50.307
> 
> 标签：vba, excel, reuters

我安装了 PPP.xla、DDE.xla、PPPInit.xla 插件。但我不知道这些加载项的受保护密码。如果我想触发[Market Data Engine Restart]，我应该调用哪个函数？

```
Call Application.Run("???") 
```

我想要这个的原因是因为有时当我使用 RtHistory("IDN", ,,,) 时，它不起作用（返回 "#N/AN/A"），除非我重新启动 PowerPlusPro.exe 或单击 [重新启动数据引擎] 在路透社工具栏中。我想通过使用 VBScript 调用 Excel 来自动化这个 RtHistory 工作。因此，我必须有这个函数名才能在获取数据之前触发重启。

有没有专家对此有想法？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T07:33:49.613

我有同样的问题。我通过重新激活 powerplus pro 插件解决了这个问题。

```
sub yourSub()
 Dim wbName As String

 wbName = ActiveWorkbook.Name
 Call activateAddIn("PowerPlus Pro Excel v5.1")
 Workbooks(wbName).Activate

end sub

'/**
' ReActivate AddIn
'**/
Public Function activateAddIn(AddinName As String) As Boolean
    AddIns(AddinName).Installed = False
    AddIns(AddinName).Installed = True
    Sleep 5000
End Function 
```

干杯

斯蒂芬

# jquery - jquery循环插件标题不起作用

> ID：11001290
> 
> 赞同：0
> 
> 时间：2012-06-12T16:59:11.337
> 
> 标签：jquery, cycle, caption

我现在已经解决了这个问题

如果您在循环中遇到字幕问题，您实际上可以通过简单地将 img 包装进去来实现它们

```
<span></span> 
```

标签并使用它们来保存文本 - 或制作

```
<p></p> 
```

标签来保存文本并应用 css 来设置它们的样式。

如果你想让它们出现在 img 上，那么用 z 索引或其他东西影响 css ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:34:00.683

```
$('#caption').html(this.title); 
```

将页面的标题*元素*放入标题标签中。你想要的是每个图像元素的 alt （或标题）*属性*，所以试试 this.attr ，所以像.....

```
$('#caption').html(this.attr("alt")); 
```

或者如果你想使用title属性，只需将上面的alt替换为“title”

[此链接更详细地介绍了 attr](http://api.jquery.com/attr/)

# tcl - 通过变量中断while循环，然后使用vwait等待循环终止。不工作？

> ID：11001293
> 
> 赞同：2
> 
> 时间：2012-06-12T16:59:19.127
> 
> 标签：tcl, expect, interactive, tk

我目前有一个 GUI，经过一些自动化（使用期望）后，用户可以与 10 个 telnet 连接之一进行交互。使用以下循环完成交互：

```
#After selecting an item from the menu, this allows the user to interact with that process
proc processInteraction {whichVariable id id_list user_id} {
    if {$whichVariable == 1} {
        global firstDead
        set killInteract $firstDead
    } elseif {$whichVariable == 2} {
        global secondDead
        set killInteract $secondDead
    }
    global killed

    set totalOutput ""
    set outputText ""
    #set killInteract 0
    while {$killInteract == 0} {
        set initialTrue 0
        if {$whichVariable == 1} {
            global firstDead
            set killInteract $firstDead
        } elseif {$whichVariable == 2} {
            global secondDead
            set killInteract $secondDead
        }
        puts "$id: $killInteract"
        set spawn_id [lindex $id_list $id]
        global global_outfile

        interact  {
            -i $spawn_id
            eof {
                set outputText "\nProcess closed.\n"
                lset deadList $id 1
                puts $outputText
                #disable the button
                disableOption $id $numlcp
                break
            }

            -re (.+) {
                set outputText $interact_out(0,string)
                append totalOutput $outputText
                #-- never looks at the following string as a flag
                send_user -- $outputText
                #puts $killInteract
                continue
            }

            timeout 1 {
                puts "CONTINUE"
                continue
            }        
        }
    }
    puts "OUTSIDE"
    if {$killInteract} {
        puts "really killed in $id"
        set killed 1
    }
} 
```

选择新的过程时，应杀死先前的过程。我以前有它，如果单击一个按钮，它就会再次进入这个循环。最终我意识到 while 循环永远不会退出，并且在按下 124 次按钮后，它崩溃了（stackoverflow = P）。它们不是在后台运行，而是在堆栈上。所以我需要一种方法来在`processInteraction`新进程启动时终止函数中的循环。这是我在多次失败后最后一次尝试解决方案：

```
proc killInteractions {} {
    #global killed
    global killInteract
    global first
    global firstDead
    global secondDead
    global lastAssigned

    #First interaction
    if {$lastAssigned == 0} {
        set firstDead 0
        set secondDead 1
        set lastAssigned 1
        #firstDead was assigned last, kill the first process
    } elseif {$lastAssigned == 1} {
        set firstDead 1
        set secondDead 0
        set lastAssigned 2
        vwait killed
        #secondDead was assigned last, kill the second process
    } elseif {$lastAssigned == 2} {
        set secondDead 1
        set firstDead 0
        set lastAssigned 1
        vwait killed
    }

    return $lastAssigned
} 
```

`killInteractions`按下按钮时调用。脚本挂起`vwait`。我知道代码对于处理具有两个变量的进程似乎有点奇怪/古怪，但这是让其工作的绝望的最后努力。

死信号被发送到正确的进程（以`secondDead`or的形式`firstDead`）。`while`我将交互的超时值设置为 1 秒，因此即使用户正在与该 telnet 会话进行交互，它也会被迫继续检查循环是否为真。一旦发送了 dead 信号，它就会等待确认进程已经死亡（通过`vwait`）。

问题是一旦发送信号，循环永远不会意识到它应该死掉，除非它被赋予上下文来检查它。`first`循环需要一直运行，直到它被or踢出`secondDead`。所以在切换到下一个进程之前需要有某种形式的等待，让前一个进程的循环`processInteraction`有控制权。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:26:22.687

你的代码对我来说似乎非常复杂。但是，关键问题是您正在运行内部事件循环（事件循环代码非常简单，因此可以预见是一个问题）并使用卡住的东西构建 C 堆栈。你不想要那个！

让我们首先确定那些内部事件循环在哪里。首先，`vwait`是规范的事件循环命令之一；它运行一个事件循环，直到它的变量被设置（可能是由一个事件脚本）。然而，它并不是唯一的。特别是，Expect`interact` *还*运行一个事件循环。这意味着一切都可能变得嵌套和纠结，而且……好吧，[你不希望这样](http://wiki.tcl.tk/1255)。（该页面谈到[`update`](http://www.tcl.tk/man/tcl8.5/TclCmd/update.htm)，但它适用于所有嵌套的事件循环。）将事件循环放入您自己的事件循环`while`中特别容易导致调试问题。

解决此问题的最佳途径是重写代码以使用延续传递样式。不是使用嵌套事件循环编写代码，而是重新排列事物，以便您拥有对事件进行评估的代码片段，并在它们之间传递必要的状态，*而无需*启动嵌套事件循环。（如果您没有使用 Expect 并且使用的是 Tcl 8.6，我建议您使用[`coroutine`](http://www.tcl.tk/man/tcl8.6/TclCmd/coroutine.htm)它来执行此操作，但我认为当前不适用于 Expect，并且它确实需要尚未广泛部署的 Tcl 测试版.)

唉，由于需要与子流程进行交互，一切都变得更加复杂。没有办法在后台进行交互（也没有那么大的意义）。相反，您需要做的是`interact`在整个程序中只使用一个，并让它在生成的连接之间切换。您可以通过为`-i`选项提供一个全局变量的名称来实现这一点，该变量包含要与之交互的当前 id，而不是直接使用 id。（这是一个“间接”的 spawn id。）我认为使这项工作最简单的方法是拥有一个“不连接到任何其他东西”的 spawn id（例如，你连接它`cat >/dev/null`只是为了充当一个无所事事的角色）您在脚本开始时创建的，然后在有意义时交换实际连接。您当前使用的实际东西`interact`提防最好使用`expect_background`（记住使用`expect_out`而不是`interact_out`）。

您的代码太长了，我无法重写，但是您应该非常仔细地查看;`eof`子句的逻辑`interact`。它需要做的比目前更多。从 GUI 中杀死的代码也应该更改；它应该`send`是一个合适的 EOF 标记来生成要被杀死的进程，而*不是等待*确认死亡。

# php - .HTaccess 子目录重定向到不同的服务器

> ID：11001294
> 
> 赞同：0
> 
> 时间：2012-06-12T16:59:22.240
> 
> 标签：php, .htaccess, amazon-ec2

我即将开始运行我们的 PHP 应用程序的三个不同环境 - 开发、登台和生产。我们的一些客户将获得 Staging 访问权限，以帮助我们在生产前与真实客户一起测试新功能。我们的应用程序通过仅使用 HTTPS 的弹性负载均衡器在 AWS EC2 上运行。我需要一种方法来允许用户转到[https://mydomain.com/staging](https://mydomain.com/staging)并被重定向到登台环境（仍然会在地址栏中显示[https://mydomain.com/staging](https://mydomain.com/staging)，但他们会得到来自不同服务器集的内容）。Staging 中将有一些代码确保他们的帐户已被批准进行 Staging 访问，并允许他们进入或重定向到主应用程序。

我似乎无法弄清楚如何在 .htaccess 中编写它。我已经尝试了很多我在网上找到的东西，但都没有让它工作。我开始认为即使在名为“staging”的生产环境中拥有一个真正的目录并在其中有一个 index.php 文件来检查他们的帐户并根据结果重定向它们可能更有意义。

但是，我想避免为此购买另一个 SSL 证书，因此我不想使用子域进行暂存，而是使用虚拟目录。那有意义吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:03:46.430

您需要在 httpd 配置文件中启用 .htaccess 的使用（您可以通过在 conf 文件中找到具有 AllowOverride None 的行并将其更改为 AllowOverride All 来实现），然后将 .htaccess 放在 html 文件夹中的文件夹中使用以下行调用 staging

```
Redirect /staging http://whereverYourStagingEnvoIs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:59:19.437

我建议使用子域而不是子目录，`staging.mydomain.com`

然后在您的主机记录中，`mydomain.com`您可以指向`staging`您喜欢的任何服务器。

# maven - maven3 检测插件的 maven 版本 - 无法激活其他默认配置文件

> ID：11001295
> 
> 赞同：1
> 
> 时间：2012-06-12T16:59:33.737
> 
> 标签：maven, maven-2, maven-3

我需要检测用户是否在我的父 pom 中使用 mvn2 或 mvn3 以加载正确的插件版本。我遵循了这里的建议：[http ://maven.apache.org/plugins/maven-site-plugin/maven-3.html#Using_maven-site-plugin_2.x_with_Maven_2_and_maven-site-plugin_3.x_with_Maven_3](http://maven.apache.org/plugins/maven-site-plugin/maven-3.html#Using_maven-site-plugin_2.x_with_Maven_2_and_maven-site-plugin_3.x_with_Maven_3)

检测机制工作得很好——但是，我的其他激活ByDefaul 的配置文件不再被拾取。

超级 pom 如下所示：

```
<profile>
    <id>profile-1</id>
    <activation>
      <activeByDefault>true</activeByDefault>
    </activation>
</profile>
<profile>
    <id>profile-2</id>
    <activation>
      <activeByDefault>false</activeByDefault>
    </activation>
</profile>
   <profile>
      <id>maven-3</id>
      <activation>
         <file>
         <!--  This employs that the basedir expression is only recognized by Maven 3.x (see MNG-2363) -->
            <exists>${basedir}</exists>
        </file> 
      </activation>     
      <build>
         <pluginManagement>
            <plugins>
               <plugin>
                  <groupId>com.company.plugins</groupId>
                      <artifactId>my-super-plugin</artifactId>
                      <version>1.0-123</version>
                    </plugin>
            </plugins>
         </pluginManagement>
      </build>
   </profile>
 </profiles> 
```

当我使用 mvn3 运行 mvn help:active-profiles --> 仅列出 maven-3 配置文件。如果我使用 mvn2，则会正确列出 profile-1。

**编辑 **：事实证明，它实际上在这里有很好的记录：[http ://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

> 除非使用上述方法之一激活同一 POM 中的另一个配置文件，否则此配置文件将自动对所有构建处于活动状态。当在命令行或通过其激活配置激活 POM 中的配置文件时，默认情况下处于活动状态的所有配置文件都会自动停用。

我现在的问题是：如果使用-P profile2，您建议默认激活profile1，激活profile 2，而如果使用maven3，则激活maven-3 profile？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:24:11.697

到目前为止，我还没有找到比这更好的东西：

```
<activation>
    <property>
        <name>!dummy</name>
    </property>
</activation> 
```

`dummy`您肯定不会使用的某种愚蠢的变量名称在哪里。

# ruby-on-rails - 没有端口号的 Rails 应用程序

> ID：11001297
> 
> 赞同：1
> 
> 时间：2012-06-12T16:59:39.760
> 
> 标签：ruby-on-rails, ruby, passenger

我正在使用以下命令启动生产服务器。

```
nohup ruby script/server webrick -e production & 
```

我的 Rails 应用程序以 URL 中的端口号开头，如下所示：

> [http://myapp.com:3000/](http://myapp.com:3000/)

如何从应用程序 URL 中删除端口号？我想我需要安装像乘客这样的东西，如果有人建议我一个很好的教程。

PS：我的 rails App 托管在[http://dreamhost.com](http://dreamhost.com)，我使用的是 Rails 2.3r

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:07:57.760

在生产环境中，您可能希望使用乘客而不是自己做事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:10:32.423

HTTP 的“无端口”表示端口 80，因此请使用`-p 80`or指定`--port=80`：

```
nohup ruby script/server webrick -e production -p 80 & 
```

您*不需要*Passenger，但使用它可以使较小的应用程序更易于管理，并且需要更少的保姆。

# perl - perl WWW::Mechanize 设置最大大小并仍然获取内容

> ID：11001299
> 
> 赞同：2
> 
> 时间：2012-06-12T16:59:47.627
> 
> 标签：perl, www-mechanize, lwp-useragent, max-size

所以我使用 WWW::Mechanize 来获取页面的内容，并且我想设置一个最大尺寸。此外，如果达到最大尺寸，我想获取到目前为止已获取的内容。我知道在 LWP 中你可以这样做：

```
my $ua = LWP::UserAgent->new;
$ua->max_size(1024);
$ua->get($url); 
```

现在，即使已达到 1024 字节，`$ua->content`仍将保存直到该点为止的可读内容。WWW::Mechanize 是 LWP 的一个子类，所以你可以用基本相同的方式来设置它：

```
my $mech = WWW::Mechanize->new;
$mech->max_size(1024);
$mech->get($url); 
```

然后您会认为，由于 WWW::Mechanize 是 LWP::UserAgent 的子类，`$mech->content`因此会保存检索到的内容，直到大小达到 1024 字节。但是，每当我运行它并达到最大大小时，我都会从我的 WWW::Mechanize 对象中获取如下所示的内容：

```
?|???-???+"?O<?p}?,?ܙmW ?`E??\\ސ???ѧ??U{3??? 
```

有谁知道我怎样才能让 WWW::Mechanize 像它的超类 LWP::UserAgent 那样实际输出可读的东西？我喜欢 WWW::Mechanize 提供的一些附加功能，所以如果可能的话，我希望能够继续使用它，而不是仅仅为此切换到 LWP。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:20:49.507

我想这是`$mech->response->decoded_content`

# css - 边框属性的简写？

> ID：11001303
> 
> 赞同：5
> 
> 时间：2012-06-12T16:59:54.740
> 
> 标签：css

我们可以缩短：

```
border-top:1px solid black;
border-left:2px solid red;
border-bottom:3px solid green;
border-right:4px solid blue; 
```

类似于：

```
border:1px solid black 2px solid red 3px solid green 4px solid blue; 
```

注意：我已经这样知道了：

```
border-width:1px 2px 3px 4px;
border-style:solid;
border-color:black red green blue; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T17:02:05.283

不，你不能让它比你提供的例子更短。

## [从文档](http://w3.org/TR/css3-background/#the-border-shorthands)

> 与简写的 'margin' 和 'padding' 属性不同，'border' 属性不能在四个边框上设置不同的值。为此，必须使用一个或多个其他边框属性。

[谢谢@火箭]

* * *

如果您使用的是预处理器（如 SCSS），您可以尝试使用 mixin，但我几乎不相信这就是您想要的：

```
@mixin border_shorthand(
$top_width, $top_color, $top_style,
$left_width, $left_color, $left_style,
$bottom_width, $bottom_color, $bottom_style,
$right_width, $right_color, $right_style) {
  border-top: $top_width $top_color $top_style;
  border-left: $left_width $left_color $left_style;
  border-bottom: $bottom_width $bottom_color $bottom_style;
  border-right: $right_width $right_color $right_style;
}

.element {
  @include border_shorthand(1px, black, solid, 2px, red, solid, 3px, green, solid, 4px, blue, solid);
} 
```

哪个输出：

```
.element {
  border-top: 1px black solid;
  border-left: 2px red solid;
  border-bottom: 3px green solid;
  border-right: 4px blue solid; } 
```

# ruby - Ruby 如果接下来做很多事情，最优雅的方法是什么？

> ID：11001307
> 
> 赞同：4
> 
> 时间：2012-06-12T17:00:09.213
> 
> 标签：ruby

我是 ruby​​ 新手，编写了这段代码并且可以工作，但我知道这不是最优雅的方式，你能帮我用 ruby​​ 方式重构它吗？

```
 #Ckeck that is not a repetead user
  next if Profile.exists?(:screen_name => t.from_user) 
  next if SearchResults.exists?(:username => t.from_user)
  next if usernames.include? t.from_user 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:20:44.027

我认为你的方法很好，但就个人而言，我会做这样的事情（提供的信息）......

用于[`reject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reject)将您的收藏限制为所需的元素。

```
def repeat_user(user, usernames)
  Profile.exists?(:screen_name => user.from_user)    ||
  SearchResults.exists?(:username => user.from_user) ||
  usernames.include? user.from_user
end

User.all.reject{ |user| repeat_user user, usernames }.each do |user|
  # do your stuff here
end 
```

# jquery - JSP - 滑动图像

> ID：11001310
> 
> 赞同：0
> 
> 时间：2012-06-12T17:00:28.533
> 
> 标签：jquery, html

我正在使用`<marquee>`在我的 jsp 页面中滑动图像。但是，我找不到如何将图像从我的 jsp 页面的右侧顶部滑动到右侧底部。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:03:36.353

您可以使用 jQuery 的原生 animate() 函数：

HTML：

```
<img height="100" width="100" id="box" src="#" /> 
```

CSS：

```
#box{
    position:absolute;
    right:0px;
    top:0px;
}​ 
```

​jQuery：

```
$(function() {
    $theBox = $("#box");
    $theBox.animate({
        top:$(window).height()-$theBox.height()
    }, 1000);
}); ​ 
```

[http://jsfiddle.net/hNYDe/](http://jsfiddle.net/hNYDe/)

# java - PreparedStatement“吃掉”我的行尾

> ID：11001317
> 
> 赞同：0
> 
> 时间：2012-06-12T17:01:02.800
> 
> 标签：java, mysql, sql, tomcat, prepared-statement

在那之后：

```
String content = "Some \n multiline \n content";
//actually, content comes from request (tomcat application)
stmnt.setString(2,content); 
```

我在数据库（mysql）中有这个：

> “一些多行内容”

我怎样才能避免这种情况？

部分页面来源：

```
<textarea name="content" rows="5" cols="40"># encoding: UTF-8def put_actions()action = "<a href='view'><img src= 
```

但必须是：

```
<textarea name="content" rows="5" cols="40"># encoding: UTF-8
def put_actions()
    action = "<a href='view'><img src= 
```

PS。只需

```
statement = Connection.createStatement();
statement.executeUpdate("UPDATE v5_scriptlets SET content = '"+request.getParameter(request)+"'"); 
```

一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:12:45.957

哦，错误出现在我的辅助方法中，它从字符串中删除了所有 \n >_< 谢谢大家的帮助！

# javascript - 在继续之前等待 API 调用在 Javascript 中完成

> ID：11001318
> 
> 赞同：11
> 
> 时间：2012-06-12T17:01:18.077
> 
> 标签：javascript, jquery, ajax, api, asynchronous

我过去和今天都在努力解决的问题是阻止 API/AJAX 继续运行，直到您收到您的回复。目前我正在使用 Facebook API。我需要从调用中获得响应然后返回它，但发生的事情是我的函数在我从 API 调用中得到响应之前就返回了。我知道它为什么会发生，我只是不知道如何防止它！这是我的代码...

```
function makeCall(){

var finalresponse = "";
    var body = 'Test post';

      FB.api('/me/feed', 'post', { message: body }, function(response) {
        if (!response || response.error) {
         finalresponse = response.error;
        } else {
          finalresponse = 'Post ID: ' + response.id;
        }
      });
      return finalresponse;

} 
```

// - - - 编辑

我注意到有些人提出了这样的建议......

```
function makeCall(){
var finalresponse = "";
FB.api('/me/feed', 'post', { message: body }, function(response) {
        if (!response || response.error) {
         finalresponse = response.error;
         return finalresponse;
        } else {
          finalresponse = 'Post ID: ' + response.id;
          return finalresponse;
        }
      });
} 
```

但这返回未定义

// 根据更新进行编辑

```
function share_share(action_id){

  var finalresponse = makeCall(action_id, process);
  return finalresponse;

}

function makeCall(action_id, callback){

var body = 'Test post';
      FB.api('/me/feed', 'post', { message: body }, function (response) {
        if (!response || response.error) {
         var finalresponse = response.error;
        } else {
          finalresponse = 'Post ID: ' + response.id;
        }
        callback(action_id, finalresponse);
      });

}
function process(action_id, finalresponse){
  console.log(finalresponse);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-12T17:17:40.313

每天被问 100 次，似乎不可能有一个答案的问题。

调用是异步的，因此不可能一步完成。您期望的基本示例。

```
function one() {
  var a = 1;
  return a;
}
alert( one() ); 
```

实际发生了什么：

```
function one() {
  var a;
  window.setTimeout( 
     function() {
        a = 1;
     }, 2000);
  return a;  //This line does not wait for the asynchronous call [setTimeout/ajax call] to run. It just goes!
}
alert( one() ); 
```

你需要做的就是把它分成两部分。

```
function one( callback ) {   
   window.setTimeout( function(){  //acting like this is an Ajax call
        var a = 1;
        callback(a);
   },2000);
}
function two( response ) {
   alert(response);
}
one( two ); 
```

因此，在您的情况下，您需要将代码分解为两块。

```
function makeCall( callback ) {
    var body = 'Test post';
      FB.api('/me/feed', 'post', { message: body }, function (response) {
        if (!response || response.error) {
         var finalresponse = response.error;
        } else {
          finalresponse = 'Post ID: ' + response.id;
        }
        callback(finalresponse);
      });
}

function processResponse( response ) {
    console.log(response);
}
makeCall(processResponse); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T17:07:12.627

在 JavaScript 中，没有等待或让步的概念。JavaScript 将继续执行您的代码，而不会中断。乍一看似乎很奇怪，很麻烦，但它有它的优点。

因此，在这种情况下的想法是，您希望在收到响应后执行的代码应该放入您提供给 FB.api() 的回调中。您必须在 return 语句之后将代码分解为响应回调，以便在收到响应时执行它。

如果 JavaScript 与大多数语言（例如 C++/Java）一样，这就是您对 JavaScript 的*期望：*

```
var futureResult = SomeAsyncCall();
futureResult.Wait(); //wait untill SomeAsyncCall has returned
var data = futureResult.GetData();
//now do stuff with data 
```

然而，JavaScript 中的想法是基于处理异步时的回调：

```
SomeAsyncCall(function(result) {
    var data = result.GetData();
    //now do stuff with data
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T17:13:31.423

您不想阻止返回它，因为这样做会在请求期间阻止用户的浏览器。如果请求因任何原因（拥塞、站点维护等）挂起，浏览器将对任何用户输入无响应，从而导致用户不安。

而不是执行以下操作：

```
var res = makeCall();
if(res)
{
   // do stuff
} 
```

做这个：

```
function makeCall(){
    FB.api('/me/feed', 'post', { message: body }, function(response) {
        if (response && !response.error) {
            // do stuff
        }
    });
}

makeCall(); 
```

# amazon-ec2 - EC2 上的轻、中或重利用率预留实例有什么区别？

> ID：11001320
> 
> 赞同：30
> 
> 时间：2012-06-12T17:01:20.230
> 
> 标签：amazon-ec2, cloud

他们谈论不同的利用率实例，但我找不到一个地方可以真正说明轻利用率大型实例与重度利用率大型实例之间的区别，而不是价格。有人可以告诉我有什么区别吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-12T17:04:44.877

实例是一样的。这只是定价差异，因此如果您知道您将大量使用该实例，则可以通过支付前期费用来节省资金。

您为使用率较高的实例预先支付了更多费用，但从长远来看，假设您一直运行它，您可以节省更多，因为每小时费率更便宜。

因此，这只是您将使用多少实例（让它运行）来确定哪种类型对您来说最有价值的问题。如果它会一直打开一年或三年，那么大量使用绝对是最便宜的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-28T09:15:46.570

按需，轻型、中型和重型提供不同的前期成本和每小时成本，前期成本逐渐增加，每小时成本降低。

根据[http://aws.amazon.com/ec2/reserved-instances/](http://aws.amazon.com/ec2/reserved-instances/)

Light Utilization RI——Light Utilization Linux RI（与按需实例相比）的盈亏平衡点为 1 年期限的 28% 或 3 年期限的 11%。如果您希望更多地使用您的实例，RI 将为您节省资金。

中等利用率 RI – 中等利用率 Linux RI（相对于轻利用率预留实例）的盈亏平衡点为 1 年期限的 41% 或 3 年期限的 19%。

高利用率 RI – 高利用率 Linux RI（相对于中等利用率预留实例）的盈亏平衡点为 1 年期限的 56% 或 3 年期限的 35%。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T00:24:16.997

这是亚马逊文档的链接：

[http://aws.amazon.com/ec2/reserved-instances/#2](http://aws.amazon.com/ec2/reserved-instances/#2)

它没有解释/量化多少使用量构成轻、中或大，但它给出了一个大概的数量。

总结一下（摘自上述文档）：

*   Light Utilization RI 非常适合每天仅运行几个小时、每周运行几天或非常零星的周期性工作负载
*   中等利用率 RI 最适合大部分时间运行但使用量存在一定差异的工作负载（例如全年需求可能增加或减少的 Web 服务器流量）
*   高利用率 RI 可提供任何预留实例类型的最绝对节省。它们最适合稳态工作负载，您愿意承诺始终运行这些实例以换取我们最低的每小时使用费

如果您像我一样想看看我们为轻型、中型和重型所支付的价格得到了什么，这里就是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-28T19:52:34.060

我认为这里的答案已经很好了。[http://www.cloudorado.com/](http://www.cloudorado.com/)只是一个可以帮助您选择正确预订类型的提示。进入*高级模式*，然后选择您计划运行服务的时间（订阅持续时间）以及服务器每天运行的时间。该服务将选择最佳预订选项 - 您可以查看详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T18:52:16.797

这里的数学有点复杂。但是，归根结底，这取决于您将为您所拥有的预留类型/大小/区域运行实例的小时数。现在变得更加复杂，因为您可以为不同的可用区和大小进行预订交易。

Cloudability 博客上有一个关于选择预留实例类型/数量的精彩博客系列。

[http://cldy.co/choosing-ri-types](http://cldy.co/choosing-ri-types)

还有一个涵盖所有数学的网络研讨会录音：

[http://cldy.co/ri-webinar-recording](http://cldy.co/ri-webinar-recording)

全面披露：我为 Cloudability 工作。

# c++ - 2D 插值

> ID：11001321
> 
> 赞同：2
> 
> 时间：2012-06-12T17:01:21.367
> 
> 标签：c++, algorithm, qt, datagrid, interpolation

我开发了一个小程序，可以让我加载图像然后对其进行一些角度测量。这是一个屏幕截图（此屏幕截图中没有加载图像）。

![程序截图](../Images/1c8ae15efce7fab893203dd43b8189e1.png)

完成所有测量后，我有一个 x、y 和角度值的列表。我想做的是对它们进行插值以生成某种图形。我宁愿直接实现这个功能，而不是依赖任何其他库（只要它可能而且不复杂）。

所以基本上我看到了两个步骤，首先是对数据进行插值，其次是从中生成一个图表。

起初我打算实现一些双三次插值，但这种插值需要一个规则的网格，我不能保证。

目前我认为我必须主要选择：

1.  将我的数据转换为常规网格，然后进行双三次插值。
2.  找到另一种不需要规则网格的插值。

你认为我应该怎么走，你知道我应该使用哪种网格重新定义/插值吗？我对这两种方法都没有任何意见，但我认为这将花费我很多时间，而且我不希望最终意识到我陷入了死胡同。

如果这有任何相关性，我正在使用 Qt 和 Windows。

编辑：基本上我最后想要这样的东西：

![最终图片](../Images/b4f5ba88c31d9389b8fe713ce76652cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:58:43.180

您正在寻找的是 2D 最小二乘拟合函数，并生成热图或 3D 表面。

QWT 是一个很好的库，可以帮助绘制它，但没有它也是可行的。

[谷歌最小二乘 2D 计算](https://www.google.com/search?q=least%20squares%202d%20calculation)

# c# - 使用包含逗号的数据写入 MVC 中的 csv

> ID：11001322
> 
> 赞同：4
> 
> 时间：2012-06-12T17:01:41.093
> 
> 标签：c#, asp.net-mvc-3

我的一项操作输出了一个 csv 文件。问题是如果一个字段包含逗号，那么它将数据行分成两个字段。我尝试使用 "\"" 将每一行包含在双引号中，但这不起作用。有人可以指导我正确的方向吗？

更新

```
var sw = new StringWriter();
            sw.WriteLine(String.Format("{0},{1},{2},{3},{4},{5},{6},{7},{8},{9},{10},{11},{12},{13}", "First Name","Last Name","Address1","Address2","City","State","Postal Code","Country","Dealer ID","Dealer Name","Survey Source","Amount","Email","Survey Code"));
            sw.WriteLine(String.Format("\"{0}\",\"{1}\",\"{2}\",\"{3}\",\"{4}\",\"{5}\",\"{6}\",\"{7}\",\"{8}\",\"{9}\",\"{10}\",\"{11}\",\"{12}\",\"{13}\"",  model.SurveyWinnerDetails.Select(p => p.FirstName).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.LastName).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.Address1).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.Address2).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.City).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.State).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.PostalCode).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.CountryCode).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.DealerID).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.DealerName).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.SurveySource).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.Amount).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.Email).First().Replace("\"", "\"\""),
                        model.SurveyWinnerDetails.Select(p => p.SurveyCode).First().Replace("\"", "\"\"")));
            return File(new System.Text.UTF8Encoding().GetBytes(sw.ToString()), "text/csv", "SurveyWinner.csv"); 
```

当我现在运行它时，我收到一个错误：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:22:55.053

CSV 文件使用与 C# 不同的转义。如果要在 CSV 文件中包含逗号，则需要用双引号对整个单元格进行转义。应该注意的是，这会产生在文本中放置双引号的次要问题！这个问题可以通过加倍双引号来解决。

IE。此 csv 文件将显示为包含 3 列的单行：

```
This is a single cell,"This,is,a,single,cell", "This,is""a,single""cell" 
```

尝试这样的事情：

```
sw.WriteLine(string.Format("\"{0}\",\"{0}\"", model.MyStringData1.Replace("\"", "\"\"")); 
```

请特别注意，我的双引号表示单元格紧跟在逗号后面，而在您的示例中，您有一个额外的空格。您需要删除这个额外的空间才能正确转义您的 CSV 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:12:21.817

没有一种“官方”CSV 格式，但最常见的格式在 RFC 4180 (http://tools.ietf.org/html/rfc4180) 中有概述。根据该 RFC（第 6 节），包含逗号的字段应该用双引号引起来。

根据@Axam 在下面的观察，RFC 4180 不允许逗号周围有额外的空格。将格式字符串更改为：

```
"{0},{1},{2},{3},{4},{5},{6},{7},{8},{9},{10},{11},{12},{13}" 
```

# vb.net - VB6.0、VB2010、VB.NET的区别

> ID：11001327
> 
> 赞同：-3
> 
> 时间：2012-06-12T17:01:53.067
> 
> 标签：vb.net, vb6-migration

我研究过 VB 6.0，但对 .NET 几乎一无所知。谁能告诉我VB6.0、VB 2010 express和VB.NET这三个版本的区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T17:30:03.607

现在这是一个有点宽泛的问题，但简而言之，VB.NET 是语言，而 VB 2010 是随 Visual Studio 2010 和 .NET 4 一起发布的 VB.NET 版本。

所以主要的比较应该是在 VB6 和 VB.NET 之间，因为你会发现最大的区别。

VB.NET 包含许多功能，这些功能在 C++ 等其他语言中已经存在了很长时间，并且在某些方面被认为与 VB6 不同，甚至不再被称为 VB。但是让我们暂时搁置争论，那些新的闪亮事物是什么？好吧，除其他外，您还有以下内容：

*   真正的面向对象继承
*   重载
*   自由线程
*   严格的类型检查

还有更多。然后有一些更改可能更难适应，因为它们接近旧的，比如从零开始的数组，使用 return 语句而不是使用函数名从函数返回值，通过参数传递值而不是引用，新的错误处理（使用try，catch，finally等），命名空间的使用等。这个列表还在继续。

VB.NET 使用的 .NET Framework 的剪切广度使其成为一个更通用的平台 (IMO)。它还运行在 CLR（公共语言运行时）中，它或多或少是一个具有即时编译引擎的虚拟机。

在编译方面，VB6 编译为本机代码，而 VB.NET 编译为 CIL（通用中间语言），这使得逆向工程更容易，但是您可以混淆代码以降低可读性。

正如您从我刚刚写的内容中看到的那样，这是一个相当广泛的主题，但是如果您有更精确的问题，请随时提出，否则我希望您现在对差异有更清晰的了解。:)

# java - Java拆分字符串表现

> ID：11001330
> 
> 赞同：50
> 
> 时间：2012-06-12T17:02:01.943
> 
> 标签：java, string, performance, optimization, split

这是我的应用程序中的当前代码：

```
String[] ids = str.split("/"); 
```

在分析应用程序时，字符串拆分花费了不可忽略的时间。此外，该`split`方法采用正则表达式，这在这里是多余的。

我可以使用什么替代方法来优化字符串拆分？`StringUtils.split`更快吗？

（我会尝试并测试自己，但分析我的应用程序需要很多时间。）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-12T18:13:33.737

`String.split(String)`如果您的模式只有一个字符长，则不会创建正则表达式。按单个字符拆分时，它将使用非常有效的专用代码。`StringTokenizer`在这种特殊情况下并没有快多少。

这是在 OpenJDK7/OracleJDK7 中引入的。[这是一个错误报告](http://bugs.sun.com/view_bug.do?bug_id=6840246)和[一个提交](http://hg.openjdk.java.net/jdk7/jdk7/jdk/rev/1ff977b938e5)。我在[这里做了一个简单的基准测试](https://gist.github.com/2923321)。

* * *

```
$ java -version
java version "1.8.0_20"
Java(TM) SE Runtime Environment (build 1.8.0_20-b26)
Java HotSpot(TM) 64-Bit Server VM (build 25.20-b23, mixed mode)

$ java Split
split_banthar: 1231
split_tskuzzy: 1464
split_tskuzzy2: 1742
string.split: 1291
StringTokenizer: 1517 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-12T17:10:40.350

如果您可以使用第三方库，则[Guava](https://github.com/google/guava) [`Splitter`](https://google.github.io/guava/releases/20.0/api/docs/com/google/common/base/Splitter.html)在您不要求时不会产生正则表达式的开销，并且通常非常快。（披露：我为 Guava 做出了贡献。）

```
Iterable<String> split = Splitter.on('/').split(string); 
```

（此外，`Splitter`通常比.[更可预测](https://github.com/google/guava/wiki/StringsExplained#splitter)`String.split`。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-12T17:04:48.947

[`StringTokenizer`](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)对于像这样的简单解析来说要快得多（我不久前做了一些基准测试，你得到了巨大的加速）。

```
StringTokenizer st = new StringTokenizer("1/2/3","/");
String[] arr = new String[st.countTokens()];
arr[0] = st.nextToken(); 
```

如果您想获得更多性能，也可以手动执行：

```
String s = "1/2/3"
char[] c = s.toCharArray();
LinkedList<String> ll = new LinkedList<String>();
int index = 0;

for(int i=0;i<c.length;i++) {
    if(c[i] == '/') {
        ll.add(s.substring(index,i));
        index = i+1;
    }
}

String[] arr = ll.size();
Iterator<String> iter = ll.iterator();
index = 0;

for(index = 0; iter.hasNext(); index++)
    arr[index++] = iter.next(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-03-10T21:46:39.757

看到我正在大规模工作，我认为提供更多基准测试会有所帮助，包括我自己的一些实现（我按空格分开，但这应该说明一般需要多长时间）：

我正在处理一个 426 MB 的文件，有 2622761 行。唯一的空白是普通空格 (" ") 和行 ("\n")。

首先，我用空格替换所有行，并对一大行进行基准分析：

```
.split(" ")
Cumulative time: 31.431366952 seconds

.split("\s")
Cumulative time: 52.948729489 seconds

splitStringChArray()
Cumulative time: 38.721338004 seconds

splitStringChList()
Cumulative time: 12.716065893 seconds

splitStringCodes()
Cumulative time: 1 minutes, 21.349029036000005 seconds

splitStringCharCodes()
Cumulative time: 23.459840685 seconds

StringTokenizer
Cumulative time: 1 minutes, 11.501686094999997 seconds 
```

然后我逐行对分割进行基准测试（这意味着函数和循环被多次完成，而不是一次全部完成）：

```
.split(" ")
Cumulative time: 3.809014174 seconds

.split("\s")
Cumulative time: 7.906730124 seconds

splitStringChArray()
Cumulative time: 4.06576739 seconds

splitStringChList()
Cumulative time: 2.857809996 seconds

Bonus: splitStringChList(), but creating a new StringBuilder every time (the average difference is actually more like .42 seconds):
Cumulative time: 3.82026621 seconds

splitStringCodes()
Cumulative time: 11.730249921 seconds

splitStringCharCodes()
Cumulative time: 6.995555826 seconds

StringTokenizer
Cumulative time: 4.500008172 seconds 
```

这是代码：

```
// Use a char array, and count the number of instances first.
public static String[] splitStringChArray(String str, StringBuilder sb) {
    char[] strArray = str.toCharArray();
    int count = 0;
    for (char c : strArray) {
        if (c == ' ') {
            count++;
        }
    }
    String[] splitArray = new String[count+1];
    int i=0;
    for (char c : strArray) {
        if (c == ' ') {
            splitArray[i] = sb.toString();
            sb.delete(0, sb.length());
        } else {
            sb.append(c);
        }
    }
    return splitArray;
}

// Use a char array but create an ArrayList, and don't count beforehand.
public static ArrayList<String> splitStringChList(String str, StringBuilder sb) {
    ArrayList<String> words = new ArrayList<String>();
    words.ensureCapacity(str.length()/5);
    char[] strArray = str.toCharArray();
    int i=0;
    for (char c : strArray) {
        if (c == ' ') {
            words.add(sb.toString());
            sb.delete(0, sb.length());
        } else {
            sb.append(c);
        }
    }
    return words;
}

// Using an iterator through code points and returning an ArrayList.
public static ArrayList<String> splitStringCodes(String str) {
    ArrayList<String> words = new ArrayList<String>();
    words.ensureCapacity(str.length()/5);
    IntStream is = str.codePoints();
    OfInt it = is.iterator();
    int cp;
    StringBuilder sb = new StringBuilder();
    while (it.hasNext()) {
        cp = it.next();
        if (cp == 32) {
            words.add(sb.toString());
            sb.delete(0, sb.length());
        } else {
            sb.append(cp);
        }
    }

    return words;
}

// This one is for compatibility with supplementary or surrogate characters (by using Character.codePointAt())
public static ArrayList<String> splitStringCharCodes(String str, StringBuilder sb) {
    char[] strArray = str.toCharArray();
    ArrayList<String> words = new ArrayList<String>();
    words.ensureCapacity(str.length()/5);
    int cp;
    int len = strArray.length;
    for (int i=0; i<len; i++) {
        cp = Character.codePointAt(strArray, i);
        if (cp == ' ') {
            words.add(sb.toString());
            sb.delete(0, sb.length());
        } else {
            sb.append(cp);
        }
    }

    return words;
} 
```

这就是我使用 StringTokenizer 的方式：

```
 StringTokenizer tokenizer = new StringTokenizer(file.getCurrentString());
    words = new String[tokenizer.countTokens()];
    int i = 0;
    while (tokenizer.hasMoreTokens()) {
        words[i] = tokenizer.nextToken();
        i++;
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-12T17:05:22.460

`java.util.StringTokenizer(String str, String delim)`[根据这篇文章](https://stackoverflow.com/a/691224/1431971)，速度大约是原来的两倍。

但是，除非您的应用程序规模庞大，否则对您来说`split`应该没问题（参见同一篇文章，它在几毫秒内引用了数千个字符串）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-12T17:11:03.003

Guava 有一个[Splitter](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)，它比该`String.split()`方法更灵活，并且不（必然）使用正则表达式。OTOH，`String.split()`已在 Java 7 中进行了优化，以在分隔符为单个字符时避免使用正则表达式机制。所以性能在 Java 7 中应该是相似的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-29T01:50:17.947

StringTokenizer 比任何其他拆分方法都快，但是让标记器返回分隔符以及标记化的字符串可以将性能提高 50% 左右。这是通过使用构造函数来实现的`java.util.StringTokenizer.StringTokenizer(String str, String delim, boolean returnDelims)`。这里有一些关于这个问题的其他见解：[StringTokenizer 类的性能与 Java 中的 split 方法](https://stackoverflow.com/questions/5965767/performance-of-stringtokenizer-class-vs-split-method-in-java/18500975#18500975)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-12T17:11:57.273

String 的 split 方法可能是更安全的选择。[至少从 java 6 开始](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)（尽管 api 参考是针对 7 的），他们基本上说不鼓励使用 StringTokenizer。他们的措辞引述如下。

" *StringTokenizer 是一个遗留类，出于兼容性原因保留，但不鼓励在新代码中使用它。建议任何寻求此功能的人使用 String 的 split 方法或 java.util.regex 包。* "

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-04T00:56:49.920

您可以自己编写拆分函数，这将是最快的。这是证明它的链接，它也对我有用，将我的代码优化了 6 倍

[StringTokenizer - 用整数读取行](https://stackoverflow.com/questions/19356021/stringtokenizer-reading-lines-with-integers)

拆分：366 毫秒 IndexOf：50 毫秒 StringTokenizer：89 毫秒 GuavaSplit：109 毫秒 IndexOf2（上述问题中给出了一些超级优化的解决方案）：14 毫秒 CsvMapperSplit（逐行映射）：326 毫秒 CsvMapperSplit_DOC（构建一个文档并一次性映射所有行）：177 毫秒

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-21T12:06:05.350

使用 Apache Commons Lang » 3.0 的

```
StringUtils.splitByWholeSeparator("ab-!-cd-!-ef", "-!-") = ["ab", "cd", "ef"] 
```

如果您需要非正则表达式拆分并且想要字符串数组中的结果，那么使用 StringUtils，我将 StringUtils.splitByWholeSeparator 与 Guava 的 Splitter 和 Java 的 String 拆分进行了比较，发现 StringUtils 更快。

1.  StringUtils - 8ms
2.  字符串 - 11 毫秒
3.  拆分器 - 1 毫秒（但返回 Iterable/Iterator 并将它们转换为字符串数组总共需要 54 毫秒）

# mysql - 多列主键中的 NULL 值

> ID：11001333
> 
> 赞同：72
> 
> 时间：2012-06-12T17:02:04.937
> 
> 标签：mysql, null, composite-primary-key

我有一张表，其中有几列构成主键。所存储数据的性质允许其中一些字段具有`NULL`值。我这样设计了我的桌子：

```
CREATE TABLE `test` (
    `Field1` SMALLINT(5) UNSIGNED NOT NULL,
    `Field2` DECIMAL(5,2) UNSIGNED NULL DEFAULT NULL,
    PRIMARY KEY (`Field1`, `Field2`)
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB; 
```

但是，当我运行`describe test`它时显示如下：

```
|| *Field* || *Type*                || *Null* || *Key* || *Default* || *Extra* 
|| Field1  || smallint(5) unsigned  || NO     || PRI   ||           ||         
|| Field2  || decimal(5,2) unsigned || NO     || PRI   || 0.00      || 
```

`NULL`插入值时我不断收到错误消息。

> 列 'Field2' 不能为空

这是因为作为主键一部分的字段不能为空吗？除了使用'0'之外，我还有什么选择`NULL`？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-12T17:06:35.233

从 MySQL 文档：

> 首要的关键
> 
> 必须将所有键列定义为 NOT NULL 的唯一索引。如果它们没有被显式声明为 NOT NULL，MySQL 会隐含地（并且默默地）声明它们。一张表只能有一个 PRIMARY KEY。PRIMARY KEY 的名称始终是 PRIMARY，因此不能用作任何其他类型索引的名称。

[https://dev.mysql.com/doc/refman/8.0/en/create-table.html](https://dev.mysql.com/doc/refman/8.0/en/create-table.html)

如果 Field2 可以为 NULL，我质疑为什么您需要将它作为主键的一部分，因为您需要 Field1 在所有行中都是不同的。所以 Field1 本身应该足以作为主键。您可以在 Field2 上创建不同类型的索引。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-05-06T09:40:21.647

> 主键用于使列既唯一又不为空

为了插入 NULL 值，将 field2 设置为**UNIQUE**。

> 唯一约束使字段删除重复项但允许*空*值

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-12T18:28:03.137

主键声明该列不能有`NULL`值。所以用于定义复合主键的列不会是`NULL`.

Oracle 服务器还比较复合主键定义中使用的所有列的组合。如果您的所有列现有数据（例如 x，y）与新添加的行匹配，则会引发 Unique Constraint Violated 错误。

此外，看看这个线程： [复合主键中可为空的列有什么问题？](https://stackoverflow.com/questions/386040/whats-wrong-with-nullable-columns-in-composite-primary-keys).

此链接提供了有关复合键中 NULLABLE 列的可能性的有价值信息！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-20T12:32:14.247

您可以像这样使用唯一键：

```
mysql> CREATE TABLE `test` (
    ->     `Field1` SMALLINT(5) UNSIGNED NOT NULL,
    ->     `Field2` DECIMAL(5,2) UNSIGNED NULL DEFAULT NULL,
    ->     UNIQUE KEY (`Field1`, `Field2`)
    -> )
    -> COLLATE='latin1_swedish_ci'
    -> ENGINE=InnoDB;
Query OK, 0 rows affected (0.03 sec)

mysql> 
mysql> desc test
    -> ;
+--------+-----------------------+------+-----+---------+-------+
| Field  | Type                  | Null | Key | Default | Extra |
+--------+-----------------------+------+-----+---------+-------+
| Field1 | smallint(5) unsigned  | NO   | MUL | NULL    |       |
| Field2 | decimal(5,2) unsigned | YES  |     | NULL    |       |
+--------+-----------------------+------+-----+---------+-------+
2 rows in set (0.01 sec) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-12T17:08:16.343

您可以使用唯一键，请查看此链接，它们适用于空值

[http://www.xaprb.com/blog/2009/09/12/the-difference-between-a-unique-index-and-primary-key-in-mysql/](http://www.xaprb.com/blog/2009/09/12/the-difference-between-a-unique-index-and-primary-key-in-mysql/)

# java - 匹配模式的正则表达式

> ID：11001336
> 
> 赞同：-2
> 
> 时间：2012-06-12T17:02:09.773
> 
> 标签：java, regex

我正在尝试为这样的命令获取匹配项；

```
[AUTR| <version_software> | <version_protocol> | <msg> ]
[PING] 
```

找到与第一个命令匹配的正则表达式是什么？

```
AUTR
version_software
version_protocol
msg 
```

这是解析的代码：

```
String[] tokens =  msg.replace('<',' ').replace('>',' ').replace('[', ' ').replace(']', ' ').split("\\|");
for (int i=0; i<tokens.length; i++) tokens[i] = tokens[i].trim(); 
```

我只是想知道如何使用正则表达式解决方案来完成。

编辑：

我正在尝试使用更简单的表达式匹配组，并且使用此代码调用 m.groupCount 返回一个...但是当我尝试打印它时...它抛出此异常“java.lang.IllegalStateException：找不到匹配项"

```
 Pattern pattern = Pattern.compile("([\\w+])");
    Matcher m = pattern.matcher("[AUTR]");

    for (int i=0; i<m.groupCount();i++)
    {
        System.out.println(m.group(i));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:32:04.620

**编辑**： http: [//fiddle.re/6ykc](http://fiddle.re/6ykc)

正则表达式：

```
\[([\w]+)(\s*\|\s*<([\w. ]+)>\s*)*\] 
```

Java 正则表达式字符串：

```
"\\[([\\w]+)(\\s*\\|\\s*<([\\w. ]+)>\\s*)*\\]" 
```

请注意，这现在适用于可变命令，并且所有额外参数必须匹配以下字符集 [a-zA-Z_0-9。]（包括句点和空格）。

**问题：**可变长度命令存在一个问题，您无法使用可变类型分组捕获多个组。

> 与组关联的捕获输入始终是该组最近匹配的子序列。如果由于量化而对组进行第二次评估，则如果第二次评估失败，则将保留其先前捕获的值（如果有）。例如，将字符串“aba”与表达式 (a(b)?)+ 匹配，将第二组设置为“b”。所有捕获的输入在每次匹配开始时都会被丢弃。 [http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg)

**编辑2：**

为了获得所有这些，您可以执行 2 个正则表达式，一个获取命令：

```
String command_regex = "\\[([\\w]+)"; 
```

并找到它，然后找到可以使用 <> 作为关键字符来选择的参数：

```
String parameters = "<([\\w. ]+)>";

Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(string_to_match);

while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

希望有帮助。

* * *

**原件**：

不完全确定格式，是“<”和“>”和“|” 必需的？命令、version_software、version_protocol 和 message 的格式是什么？这是我对正则表达式的尝试（在 Python 中测试）

```
\[(\w+)\s*\|\s*<([\w.]+)>\s*\|\s*<(\w+)>\s*\|\s*<([\w\s]+)>\s*\] 
```

您需要确保转义括号和管道符号（我在之间添加了 \s* 条件，因为我不知道是否会有空格。如果你这样做：

```
>> search.re("expression above", line) 
>> search.groups() 
```

它至少应该给出 python 中的所有标记。我把它留得更硬编码，以便为您想要抓取的每个令牌留出调整空间，否则您可以通过将其设为一个组并重复 3 次来减少最后 3 个部分。让我知道结果？

# java - GWT GChart - 可以用偏移量定位刻度吗？

> ID：11001338
> 
> 赞同：1
> 
> 时间：2012-06-12T17:02:14.050
> 
> 标签：java, gwt, gchart

我想自定义使用 GWT 库 clientsidegchart (gchart) 开发的图表，并且我想将 X 轴刻度标签定位在轴上方并稍微向右（这样它们就不会与网格线重叠）。我怎样才能做到这一点 ？

而且，我尝试修改刻度标签字体大小（到 10 像素），但没有看到任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:09:24.623

这是一种解决方法，但`setTickLabelPadding()`使用负值可以解决问题。请注意，您的刻度标签可能会干扰图表中显示的点。

# php - 关于类破坏的mysql查询

> ID：11001341
> 
> 赞同：0
> 
> 时间：2012-06-12T17:02:36.483
> 
> 标签：php, sql, class, mysqli, destructor

可以对类 __destruct 函数执行 mysqli 查询吗？

我在某处听说它不会总是完成查询，或者它不会按预期工作。

例如：

```
class stackoverflow{
    function a() {
    }

    function b() {
    }

    function __destruct() {
        //mysqli query here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:19:37.783

通常，您最好创建自己的方法来执行任何需要在脚本末尾完成的工作并手动调用它。

在我看来，主要原因是错误处理。

根据[在线文档](http://www.php.net/manual/en/language.oop5.decon.php)：

> 尝试从析构函数（在脚本终止时调用）抛出异常会导致致命错误。

这意味着如果出现错误 - 例如 - 在您的 mysql 查询中，致命错误将关闭您的脚本。

__destruct 方法有时可能很有用，但更好地用于只需要一些简单硬代码的情况，这些硬代码经过测试且不易出错。

此外，某些服务器可能会在关闭阶段更改各种参数。比如工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:05:00.587

没有理由不按预期工作。但是，如果您首先解释为什么要这样做会有所帮助，**[可能会有比您想到的更好的解决方案](http://www.perlmonks.org/?node_id=542341)**

# wpf - 为什么扩展器设计为仅容纳一个内容？

> ID：11001342
> 
> 赞同：0
> 
> 时间：2012-06-12T17:02:43.317
> 
> 标签：wpf, xaml

我正在尝试向扩展器添加一些内容，但是它会引发以下错误

```
<Expander Name="myExpander" Background="Tan"
              HorizontalAlignment="Left" Header="my expander"
              ExpandDirection="Down" IsEnabled="True" Width="100" IsExpanded="True">
        <Rectangle Width="10" Height="10" Fill="Red"/>
        <Rectangle Width="10" Height="10" Fill="blue"/>
</Expander> 
```

**对象“扩展器”已有子对象，无法添加“矩形”。'Expander' 只能接受一个孩子。**

我以为我可以将 Expander 用作容纳少量元素的容器，但它似乎只能容纳一个！有什么解决方法吗？

谢谢你。阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:04:38.340

许多元素都是这种情况。您可以嵌套一个面板，例如 Grid 或 StackPanel，以便布局多个子项。

例子：

```
<Expander Name="myExpander" Background="Tan"
              HorizontalAlignment="Left" Header="my expander"
              ExpandDirection="Down" IsEnabled="True" Width="100" IsExpanded="True">
        <StackPanel>
            <Rectangle Width="10" Height="10" Fill="Red"/>
            <Rectangle Width="10" Height="10" Fill="blue"/>
        </StackPanel>
</Expander> 
```

这为您在如何布局孩子方面提供了无限的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:04:49.693

`Expander`是一个 ContentControl，这意味着它包含单个内容。大多数容器都是这样的。

处理此问题的方法是将矩形放在它们自己的面板中，例如网格，并制作`Grid`扩展器的内容。

```
<Expander Name="myExpander" Background="Tan"
          HorizontalAlignment="Left" Header="my expander"
          ExpandDirection="Down" IsEnabled="True" Width="100" IsExpanded="True">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>
        <Rectangle Width="10" Height="10" Fill="Red"/>
        <Rectangle Grid.Column="1" Width="10" Height="10" Fill="blue"/>
    </Grid>
</Expander> 
```

您可以在此处使用您想要的任何布局机制 - 例如 a `Canvas`, `Grid`, `StackPanel`,`WrapPanel`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T17:13:30.440

小心在已经有网格的窗口中嵌套扩展器记住使用 Header="texthere" 而不是 Content= 因为扩展器内容会与网格内容冲突

# sql - 如何使用 XQuery/SQL 解码等？

> ID：11001348
> 
> 赞同：3
> 
> 时间：2012-06-12T17:03:13.943
> 
> 标签：sql, sql-server, xpath, xquery, xquery-sql

使用 Microsoft SQL Server...

```
declare @x xml
set @x = '<Example>&lt;You &amp; Me&gt;</Example>'
select cast(@x.query('/Example/text()') as nvarchar(50)) 
```

结果是“<你&我>” 而不是“<你和我>”。

如何让 SQL 以“<”、“&”之类的方式读取 XML 和'>' 被解码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T17:09:59.157

使用[`value()`](http://msdn.microsoft.com/en-us/library/ms178030)而不是`query()`.

```
declare @x xml
set @x = '<Example>&lt;You &amp; Me&gt;</Example>'
select @x.value('(/Example)[1]', 'nvarchar(50)') 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/1823)

# python - 传递给动作的参数的名称是什么？（参数解析）

> ID：11001354
> 
> 赞同：2
> 
> 时间：2012-06-12T17:03:37.120
> 
> 标签：python, argparse

```
start_check_stop = parser.add_mutually_exclusive_group()
start_check_stop.add_argument('-s', '--start', action=start(*what*))
start_check_stop.add_argument('-c', '--check', action=check(*what*))
start_check_stop.add_argument('-t', '--stop', action=stop(*what*)) 
```

为了将给定的命令行参数传递给函数，我需要在标*有什么的地方传递什么？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:06:47.260

您的操作应该扩展`argparse.Action`已经具有用于传递参数值的变量的类。您的操作调用中的参数是不必要的。

# slickgrid - 过滤器上的 Slickgrid 断点

> ID：11001356
> 
> 赞同：1
> 
> 时间：2012-06-12T17:03:47.060
> 
> 标签：slickgrid

查看 Slickgrid 示例并使用 Google Chrome，我在过滤器上设置了一个断点，以查看内部发生了什么。断点在第 87 行工作正常[http://mleibman.github.com/SlickGrid/examples/example-header-row.html](http://mleibman.github.com/SlickGrid/examples/example-header-row.html)

但它在第 143 行不起作用

[http://mleibman.github.com/SlickGrid/examples/example4-model.html](http://mleibman.github.com/SlickGrid/examples/example4-model.html)

为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:02:33.267

发生这种情况是因为第二个示例在构造函数中将`inlineFilters`选项设置`DataView`为 true，而第一个示例则没有。这意味着，在第二个示例中，SlickGrid 正在重新编译您的过滤器函数并将其内联到循环中以避免函数调用开销。这显着加快了对大型数据集的过滤。

如果要调试它，设置断点将不起作用。您需要`debugger`在过滤器函数本身中添加一条语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:32:50.727

尽管[example4](http://mleibman.github.com/SlickGrid/examples/example4-model.html)将该`myFilter`函数设置为 dataView 过滤器，但过滤是通过滑块和文本框事件连接完成的 - 检查第 288 行和第 303 行是否相同。这些上的过滤器断点应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:02:13.473

编译过滤器。

[示例 4](http://mleibman.github.com/SlickGrid/examples/example4-model.html)中的第 197 行：`dataView = new Slick.Data.DataView({ inlineFilters: true });`

当 dataView 初始化时， inlineFilters 标志会导致 dataView “编译”过滤器，因此不会调用原始过滤器函数。使用了新的“编译”函数。

有关 Complied Filters的代码，请参见[slick.dataview.js中的第 201 和 466 行。](https://github.com/mleibman/SlickGrid/blob/master/slick.dataview.js)

# mysql - 使用 IPTABLES 将 MySQL 3306 端口限制为 localhost

> ID：11001368
> 
> 赞同：9
> 
> 时间：2012-06-12T17:04:37.980
> 
> 标签：mysql, iptables

我试图限制 linux 机器上的 MySQL 3306 端口与 localhost 以外的任何东西建立任何连接，以防止外部攻击。我有以下代码，我不确定它是否正确：

> ```
> iptables -A INPUT -p tcp -s localhost --dport 3306 -j ACCEPT
> 
> iptables -A OUTPUT -p tcp -s localhost --dport 3306 -j ACCEPT
> 
> iptables -A INPUT -p tcp --dport 3306 -j DROP
> 
> iptables -A OUTPUT -p tcp --dport 3306 -j DROP 
> ```

我的另一个问题是 - 只授予本地主机访问权限是否正确？这是一个标准的专用 centos 网络服务器，上面有 30 多个域。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T17:16:48.740

为什么不直接关闭与 MySQL 的网络？

添加到 my.cnf：

`skip-networking`

它还应该通过强制通过管道连接来提供微不足道的性能改进，这会跳过用于网络部分的大量测试。请注意，更改后您将需要使用 localhost，*而不是*127.0.0.1。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-15T07:21:37.067

```
iptables -A INPUT -p tcp --dport 3306 -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT 
```

上述规则用于将两行转换为单行。

回答你的第二个问题：

如果您不想从 localhost 以外的地方提供 mysql 访问，那么以这种方式配置是完美的。简单的。:-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-19T14:36:45.903

```
iptables -A INPUT -p tcp --dport 3306 -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT
iptables -A INPUT -p tcp --dport 3306 -j DROP 
```

如果要删除过滤，请使用以下命令：

```
iptables -D INPUT -p tcp --dport 3306 -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT
iptables -D INPUT -p tcp --dport 3306 -j DROP 
```

**注意**：两者都可能需要root，所以：`sudo iptables (...)`

# actionscript-3 - 线图有困难

> ID：11001370
> 
> 赞同：2
> 
> 时间：2012-06-12T17:04:44.263
> 
> 标签：actionscript-3, apache-flex, flex3

我需要有关 LineChart 的帮助：

情况：

我有一个 LineChart，其中包含由 Oracle 查询获取的一些数据，我选择了 ValorC、ValorP、Sla 和 OBS 列，其中 OBS="如果 ValorC 发生问题，则说明理由"。问题是将鼠标放在图表中的点（值）上时如何显示此值？我可以使用 DataTip 吗？

```
<mx:series>             
  <mx:LineSeries id="IDValor"  displayName="Execução Diária" yField="ValorC" showDataEffect="seriesInterpolate" />
  <mx:LineSeries id="IDValorP" displayName="Meta Produção" yField="ValorP" showDataEffect="seriesInterpolate" />
  <mx:LineSeries id="IDSLA"    displayName="Sla Acordado" yField="Sla"  showDataEffect="seriesInterpolate"/>
</mx:series> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:02:17.337

我用两个函数解决了这个问题： - 1º `public function init():void { chart.addEventListener(ChartItemEvent.ITEM_ROLL_OVER, minhaSolicitacao); }` - 2 º `public function minhaSolicitacao(e:ChartItemEvent):void { TextObs.text = e.hitData.item.OBS; }` *OBS are visible=false TKS for ALL

# sql - 如何将两列与 Oracle 表中两列的组合进行比较？

> ID：11001376
> 
> 赞同：0
> 
> 时间：2012-06-12T17:04:52.897
> 
> 标签：sql, oracle

我有一个我无法弄清楚的逻辑难题。

我有一个表，其中两列代表一个 PK。Prods 和 Prod_Colour

```
TableA
Prods, Date_, Prod_Colour

One  |  null     |  Red
One  |  null     |  Blue
Two  | 2012-06-08| Blue
Two  |   null    | Yellow
Three|   null    | Green
Three| 2012-06-08| Red 
```

该日期表示这些产品从该日期起不再可用，但是一旦再次可用，可以更改日期。

我能够根据日期限制行。

```
SELECT a.*
FROM TABLEA a
WHERE Date_ > '2012-06-11' or Date_ IS NULL 
```

但我需要做的是在子查询中使用此表，其中 Prods 和 Prod_Colour 在排除项中组合...

这不是一个很好的解释，但基本上在上面的示例中，Prod_Colour = 'Red' 的 Prods 3 和 Prod_Colour = 'Blue' 的 Prods 2 将被排除，但 Prod_Colour 的日期大于今天或 null 的 Prods One 将包括在内。

一如既往，我感谢任何建议或提示。

提前致谢。

为了进一步澄清，我有一个从几个不同的表中选择的查询，在其中一个表中，我需要包含 prods 和 prod_Colour 仅当 prods 和 Prod_Colour（组合为每一行的唯一标识符）在 TableA 中可用时，其中 date_ 表示它们是可用的。组合不会改变，但 date_ 可以。我会使用 tDate 来表示今天作为比较的日期。

```
Select O.Prods, O.Prod_Colour /*each combination needs to match the combination in TableA */
FROM TableB
Where O.Prods + O.Prod_C in (Select A.Prods + A.Prod_Colour
                             FROM TABLE A WHERE Date_ IS NULL or Date_ > tDate) 
```

类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T17:47:38.040

根据您上次的编辑，您似乎正在寻找这个构造：

```
SELECT *
  FROM tableB
 WHERE (prods, prod_colour) IN
       (SELECT prods, prod_colour
          FROM tablea a
         WHERE date_ > tDate OR date_ is NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:14:42.003

```
SELECT a.*
FROM TABLEA a
WHERE (Date_ > '2012-06-11' or Date_ IS NULL)
AND not (Prods = 'Two' and Prod_Colour = 'Blue')
AND not (Prods = 'Three' and Prod_Colour = 'Red') 
```

# templates - 如果不使用会话范围，我可以访问我正在加载的模板中的 Coldfusion 页面上的变量集吗？

> ID：11001386
> 
> 赞同：0
> 
> 时间：2012-06-12T17:05:38.183
> 
> 标签：templates, variables, coldfusion, global-variables, scope

我有一个 Coldfusion8 页面，我在其中预先声明了一些变量，如下所示：

```
<cfif (structKeyExists(url,"extern"))>
    <cfset variables.someVar = "value">
<cfelse>
    <cfset variables.someVar = "">
</cfif> 
```

在此之后，我有一些模板，我正在加载：

```
<cfinclude template="templates/tmp_pagetop.cfm">
<cfoutput><head></cfoutput>
<cfinclude template="templates/tmp_pageheader.cfm">
... 
```

我在模板中访问*variables.someVar时遇到问题。*

**问题：**
这是否可能使用*变量*范围？我不想使用*会话*或*应用程序*范围，因为我正在处理的变量实际上应该只存在于相应的页面中。但我认为可以在页面中声明一次并在整个模板中引用。如果我不能使用变量，还有其他方法吗？

**编辑：**
首先，感谢所有的反馈！

当我开始使用 SO 时，我通常会提出如下问题，但最终减少到最低限度，因为我通常没有得到关于彻底问题的答案......可惜......我想我可能也会离开很远:-)

所以，如果有人想看看，我有一个名为 search.cfm 的页面。这个页面是一个 shell 页面，我通过 AJAX 和/或模板加载不同的布局。具体情况是通过 AJAX 加载的搜索表单。

所以这是3部分：

**1) search.cfm**在这里，我正在检查 Session.extern(al) 以获取页面的本地实例。如果它是本地实例，我会抓取用户变量 A、B、C，我希望在加载搜索表单模板时访问这些变量。

```
<cfif (structKeyExists(url,"extern"))>
    <!--- preload external user data  --->
    <cfstoredproc procedure="proc_select_extern" datasource="dtb">
        <cfprocparam type="in" value="#Session.extern#" cfsqltype="cf_sql_varchar" maxlength="13">
        <cfprocresult name="external_user">
    </cfstoredproc>

    <!--- set external variables --->
    <cfif external_user.recordcount eq 1>
        <cfoutput query="external_user">
            <cfscript>
            // CULPRIT string
            variables.user_modules = external_user.modules;
            </cfscript>
        </cfoutput>
    <cfelse>
    <!--- remove unknown URL params --->
        <cfset StructDelete(Session, "Extern")>
    </cfif> 
</cfif> 
```

然后在我的**app.js**中，我正在监听（[Jquery-Mobile](http://jquerymobile.com/test/docs/api/events.html)）pagebeforeshow 事件并通过 AJAX 将相应的表单加载到页面中：

```
$(document).on('pagebeforeshow', '#search' , function(e, data) {
    // load main search form
    if ( $(this).attr('val') != true ) {
        $(this).attr('val') == true;
        // here I'm calling the default search form
        ajaxUpdate( "../layouts/tmp_searcher.cfm", $('.searchFromWrapper'), "search", "default", "search" );
        }
....
var ajaxUpdate = 
    function update( from, target, param, account, bindings ) {
        $.mobile.loading( 'show' );
        $.ajax({
            async: true, type: 'GET', returnFormat: 'json', 
            data: { value: param, type:  account },
            url: from, timeout: 7500,
            success: function(data) {
                var makeUp = !$.support.touch ? data.replace("<select", "<select data-native-menu='false' ") : data;
                target.addClass('.fade.out')
                    .html( makeUp ) 
                        ...
                }); 
```

正在加载的**tmp_searcher.cfm**模板包含所有搜索表单变体。在初始加载时，我正在获取基于基本或外部（用户 ID）的。

它在 tmp_searcher.cfm 中，我无法再访问*variables.XXX* ...与我之前的问题中的 URL 相同...哦，写下来有点道理，为什么它不起作用 ;-)

我省去了细节，tmp_searcher.cfm 中的第一行是：

```
<cfdump output="D:\ColdFusion8\logs\dump.txt" label="catch" var="#variables.user_module#"> 
```

什么都不转储并且（@Leigh）抛出错误：

```
Element USER_MODULE is undefined in VARIABLES 
```

所以，我的问题应该是：

如果内容在同一页面上并且我不想使用 Session 或 Application Scope，Coldfusion 变量是否可以通过 AJAX 调用持续存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:13:05.387

您可以使用请求范围。这将允许您访问请求中的任何变量，包括模板。

但我使用的方法是使用带有前缀的 cfimport，例如..“ui”

```
<cfimport taglib="templates" prefix="ui">
<ui:tmp_pagetop heyLookAVar="#myvar# > 
```

然后在您的模板中，您可以访问`attributes.heyLookAVar`

您可以非常花哨并检测模板调用标签是结束还是开始......那么您只需要一个

```
<ui:page>
   my page
</ui:page> 
```

# ios - 从 JSON 中一张一张加载照片

> ID：11001391
> 
> 赞同：0
> 
> 时间：2012-06-12T17:06:02.767
> 
> 标签：ios, xcode, json, image, gallery

我有一个 JSON 服务，我在其中使用一些照片。我想从中制作一个缩略图库：

```
 -(void)fillPhotos:(NSMutableArray *)json{
    _loadingLabel.alpha=0;
    [SV setScrollEnabled:YES];
    if(json.count>0){
        NSDictionary *json_dictionary=[json objectAtIndex:0]; 
        NSInteger i=0;
        for(i=0;i<[[json_dictionary objectForKey:@"Photos"] count];i++){
        NSDictionary *photosDic =[[json_dictionary objectForKey:@"Photos"] objectAtIndex:i] ;
        NSString *imageUrl = [photosDic objectForKey:@"URI"];
        UIImageView* photo;
        CGRect viewRect;
            if(i % 2){
            viewRect = CGRectMake(164,146*(i/2)+10*(i/2), 146, 146);
            NSLog(@"par");
            }else{
            viewRect = CGRectMake(10,146*(i/2)+10*(i/2), 146, 146);   
                NSLog(@"impar");
            }
            photo = [[UIImageView alloc] initWithFrame:viewRect];
            photo.image=[UIImage imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString: imageUrl]]];
            [SV addSubview:photo];
            SV.contentSize=CGSizeMake(320,146*i+146);
            [SV reloadInputViews];
        }
    }
} 
```

它工作正常，但我有两个问题。首先，我希望视图逐张加载照片，因此用户不必等待 cicle 结束即可一次查看所有照片。其次，我希望照片在中心裁剪，但只占用 146x146 帧。但是，如果我将 Top 置于 contentmode 中，照片就会从他的框架中拉出。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:18:07.907

对于第一个问题，您需要异步加载图像。究竟如何做到这一点有点超出答案的范围（部分取决于您），但您可能想研究`NSURLConnection`or `NSOperation`and `NSOperationQueue`。

对于第二个问题，只需设置`photo.clipsToBounds = YES`.

# powershell - 如何仅对在 powershell 中替换的行进行管道传输？

> ID：11001392
> 
> 赞同：1
> 
> 时间：2012-06-12T17:06:04.347
> 
> 标签：powershell

我有这个：

```
(gc "$env:a.txt") -replace 'aaa', 'bbb' 
```

我想以某种方式对其进行管道传输，以便打印已更改的行（更改后），并且仅打印它们（`'bbb'`当然，不简单地搜索 ..）。如何 ？

### 编辑：

我忘了提到我想在这个过程中更改文件，这使得它更难（但我想看到，作为“理智反馈”，只有更新的行）：

```
(gc "a.txt") -replace 'aaa', 'bbb' | something-here-?? | sc a.txt 
```

我必须分两步完成还是有办法将它们全部通过管道传输？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:15:16.510

您可以先匹配要替换的文本，然后逐行替换...

```
(gc a.txt) -match 'aaa' | % { $_ -replace 'aaa', 'bbb' } 
```

我还想指出，您的代码以及源自您的代码的代码实际上并没有修改原始文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:34:12.413

对于您想要的，要显示正在更改的内容并替换文件的内容，您可以执行以下操作：

```
gc test.txt | %{ 
    if($_ -match "this") {
        $replaced = $_ -replace "this","that"
        write-host $replaced
        $replaced
    } else{
        $_
    }

} | sc test2.txt 
```

如果您只想在替换后查看差异，您可以使用`compare-object`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:30:08.837

我看不出有任何理由不使用 seth 的方法，但如果有一些微妙的东西，或者如果你只是喜欢打字：有一个内置的差异。要获得更改的行的更改版本：

```
 diff (gc myfile) ((gc myfile) -replace "x", "y")) |  % { if ($_.SideIndicator -eq '=>') { $_.InputObject } } 
```

（您可以通过删除 SideIndicator 的测试来获得原始和更改）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:30:27.083

您可以使用 ForEach-Object 检查新值的每个替换值并将其写出。只要确保继续通过管道传递所有内容：

```
(Get-Content "a.txt") -replace 'aaa', 'bbb' | 
    ForEach-Object { if( $_ -like '*bbb*' ) { Write-Host $_ } $_ } | 
    Set-Content a.txt 
```

它将显示任何已经包含 bbb 的行。如果你真的只是想看看之前和之后：

```
Get-Content "a.txt" | 
    ForEach-Object {
         if( $_ -match 'aaa' ) 
         {
             $newLine = $_ -replace 'aaa','bbb'
             Write-Host "> $_"
             Write-Host "< $newLine"
             $newLine
         }
         else
         {
             $_
         }

    } |
    Set-Content a.txt 
```

# spring - DelegatingFilterProxy 在没有 Spring Security 的 Spring MVC 应用程序上调用了两次

> ID：11001400
> 
> 赞同：3
> 
> 时间：2012-06-12T17:06:21.570
> 
> 标签：spring, jakarta-ee, spring-mvc, tomcat7

我在我的 Spring MVC 应用程序中有一个作为 DelegatingFilterProxy 实现的过滤器，它被调用了两次。我不知道发生了什么事。我确信 Spring 上下文没有被创建两次，因为所有配置都在 root-context.xml 中，而我的 servlet-context.xml 是空的。

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>cheapig</display-name>

    <!--Definição do Contexto Global do Container do Spring com recursos (beans) que são compartilhados com
    TODOS os Servlets e Filtros -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Cria o container do Spring compartilhado com todos os Servlets e Filtros -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <display-name>sessionListener</display-name>
        <listener-class>br.com.cheapig.util.SessionListener</listener-class>
    </listener>

    <!-- Filtro para controlar acesso -->
    <filter>
     <filter-name>cheapigFilter</filter-name>
     <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>      
    </filter>

    <filter-mapping>
      <filter-name>cheapigFilter</filter-name>
      <url-pattern>/*</url-pattern>

    </filter-mapping>

    <!-- Definição do Servlet que processa todos os requests da aplicação. Como se está utilizando
    o Framework Spring, o servlet é o DispatcherServlet. -->
    <servlet>
        <servlet-name>cheapig</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/cheapig/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Mapeamento dos Servlets e URLs -->     
    <servlet-mapping>
        <servlet-name>cheapig</servlet-name>
        <url-pattern>/cheapig/*</url-pattern>
    </servlet-mapping>

    <error-page>
        <error-code>404</error-code>
        <location>/WEB-INF/view/util/layout_404.jsp</location>
    </error-page>

    <error-page>
        <error-code>405</error-code>
        <location>/WEB-INF/view/util/layout_405.jsp</location>
    </error-page>

    <error-page>
        <error-code>500</error-code>
        <location>/WEB-INF/view/util/layout_500.jsp</location>
    </error-page>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

</web-app> 
```

我的根上下文（请记住 servlet-context.xml 已注释）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/aop       
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
        ">
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <!-- Imports user-defined @Controller beans that process client requests -->
    <import resource="cheapig/controllers.xml" />
    <import resource="cheapig/hibernateMySQL5.xml"/>    
    <import resource="cheapig/integracaoTiles2.xml"/>
    <import resource="cheapig/servicoEmail.xml"/>

    <mvc:annotation-driven/>
    <context:component-scan base-package="br.com.cheapig" />
    <task:annotation-driven/>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
      <property name="sessionFactory" ref="sessionFactory"/>    
    </bean>

    <!-- Root Context: defines shared resources visible to all other web components -->
    <!-- Configurações de Internacionalização -->
    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="latin1" />
    </bean> 

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <property name="defaultLocale" value="pt" />
    </bean> 

    <!-- Mapeamento da view "rssViewer" para o bean "rssViewer" -->
    <bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />
    <bean id="rssViewer" class="br.com.cheapig.servico.CustomRssViewer" />

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <!-- one of the properties available; the maximum file size in bytes -->
        <property name="maxUploadSize" value="3145728" />
        <property name="maxInMemorySize" value="3145728"></property>
    </bean>

    <bean id="velocityEngine"
        class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
        <property name="velocityProperties">
            <value>
                resource.loader=file
                file.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
            </value>
        </property>
    </bean>
    <!-- <bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean"> 
        <property name="velocityProperties"> <value> resource.loader=class class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader 
        </value> </property> <property name="resourceLoaderPath"> <value>/WEB-INF/velocity</value> 
        </property> </bean> -->

    <!-- <bean id="controleAcesso" class="br.com.cheapig.seguranca.ControleAcesso"> 
        <bean id="cheapigFilter" class="br.com.cheapig.seguranca.SegurancaFilter" 
        > <property name="controleAcesso" ref="controleAcesso" /> <property name="localeResolver" 
        ref="localeResolver" /> </bean> -->

</beans> 
```

我的过滤器：

```
package br.com.cheapig.seguranca;

import java.io.IOException;
import java.util.Date;
import java.util.Locale;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.i18n.LocaleContextHolder;
import org.springframework.stereotype.Component;
import org.springframework.web.filter.OncePerRequestFilter;
import org.springframework.web.servlet.LocaleResolver;

import br.com.cheapig.controlador.HistoricoVisitasController;
import br.com.cheapig.dominio.HistoricoVisitas;
import br.com.cheapig.dominio.Usuario;
import br.com.cheapig.exception.ControleAcessoException;
import br.com.cheapig.util.CheapigUtil;
import br.com.cheapig.util.ConstantesAmbiente;
import br.com.cheapig.util.ConstantesGenericas;
import br.com.cheapig.util.ConstantesHistoricoVisitas;
import br.com.cheapig.util.ConstantesSessao;
import br.com.cheapig.util.WorkflowUtil;
import br.com.cheapig.workflow.Request;

/**
 * Classe responsável por fazer a filtragem do controle de acesso aos recursos do site
 * 
 * @author Guilherme Macedo
 * @since Apr 30, 2012
 */
@Component(value = "cheapigFilter")
public class SegurancaFilter extends OncePerRequestFilter {

    @Autowired
    private ConstantesAmbiente constantesAmbiente;

    @Autowired
    private LocaleResolver localeResolver;

    @Autowired
    private ControleAcesso controleAcesso;

    @Autowired
    private HistoricoVisitasController historicoVisitasController;

    /**
     * Cria um novo objeto SegurancaFilter
     */
    public SegurancaFilter() {
        super();
    }

    /**
     * @see org.springframework.web.filter.OncePerRequestFilter#doFilterInternal(javax.servlet.http.HttpServletRequest,
     *      javax.servlet.http.HttpServletResponse, javax.servlet.FilterChain)
     */
    @SuppressWarnings("unchecked")
    @Override
    protected void doFilterInternal(HttpServletRequest pRequest, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        Locale locale = new Locale("pt", "br");
        this.localeResolver.setLocale(pRequest, response, locale);
        LocaleContextHolder.setLocale(locale);
        String path = pRequest.getRequestURI().substring(pRequest.getContextPath().length());
        String uri = pRequest.getRequestURI();

        HttpSession vSession = pRequest.getSession();
        String appId = (String) vSession.getAttribute("facebookAppId");
        if(appId == null || appId.isEmpty()){
            vSession.setAttribute("facebookAppId", this.constantesAmbiente.getFacebookAppId()); 
        }

        if (path.startsWith("/resources") || path.startsWith("/css")) {
            filterChain.doFilter(pRequest, response); // Goes to default servlet.
            System.out.println("resources");
        } else {
            System.out.println("uri: "+uri);
            this.salvaVisita(pRequest);

            if (uri.equals("/") || uri.equals("/cheapig/")) {
                pRequest.getSession().setAttribute("loadCidadeList", true);
            } else {
                pRequest.getSession().setAttribute("loadCidadeList", false);
            }
            String vUrl = uri.substring("/cheapig".length());
            String vLogado = (String) vSession.getAttribute(ConstantesSessao.SESSION_LOGADO);

            if (vLogado == null) {
                vLogado = ConstantesGenericas.SIGLA_NAO;
                vSession.setAttribute(ConstantesSessao.SESSION_LOGADO, ConstantesGenericas.SIGLA_NAO);
            }

            if (vLogado.equals(ConstantesGenericas.SIGLA_SIM) && vUrl.contains("login")) {
                String vRedirectURL = "/cheapig/";  
                response.sendRedirect(vRedirectURL);
            }else{
                Usuario vUsuario = (Usuario) vSession.getAttribute(ConstantesSessao.SESSION_USUARIO);

                try {
                    if (vLogado.equalsIgnoreCase(ConstantesGenericas.SIGLA_NAO)) {
                        this.controleAcesso.verificaPermissoesAnonimas(vUrl);
                    } else {
                        this.controleAcesso.verificaAcesso(vUsuario, vUrl);
                    }                   
                    pRequest.getRequestDispatcher(uri).forward(pRequest, response);
                } catch (ControleAcessoException e) {
                    Request vRequest = new Request();
                    vRequest.setRequestURI(uri);
                    vRequest.setRequestURL(vUrl);
                    vRequest.setRequestParameters(WorkflowUtil.montaParametrosURLParameterMap(pRequest.getParameterMap()));
                    vRequest.setRequestMethod(pRequest.getMethod());
                    vSession.setAttribute("COMING_REQUEST", vRequest);
                    response.sendRedirect("/cheapig/loginTela");
                    return;
                }   
            }

        }
    }

    public ControleAcesso getControleAcesso() {
        return this.controleAcesso;
    }

    public LocaleResolver getLocaleResolver() {
        return this.localeResolver;
    }

    @Override
    protected void initFilterBean() throws ServletException {

    }

    /**
     * Coleta as informações do usuário e persiste no histórico de visitas
     * 
     * @param request
     *            HttpServletRequest
     */
    private void salvaVisita(HttpServletRequest request) {
        String locale = request.getLocale().getLanguage();
        String browser = CheapigUtil.identificaBrowser(request.getHeader(ConstantesHistoricoVisitas.HTTP_BROWSER));
        String metodo = request.getMethod();
        String ip = request.getRemoteAddr();
        String pagAcessada = request.getRequestURI();
        String host = request.getRemoteHost();

        HistoricoVisitas historico = new HistoricoVisitas();
        historico.setLinguagemNavegador(locale);
        historico.setBrowser(browser);
        historico.setDataAcesso(new Date());
        historico.setHost(host);
        historico.setIpVisitante(ip);
        historico.setPagAcessada(pagAcessada);
        historico.setRequestMethod(metodo);

        this.historicoVisitasController.cadastrarHistoricoVisitas(historico);
    }

    public void setControleAcesso(ControleAcesso controleAcesso) {
        this.controleAcesso = controleAcesso;
    }

    public void setLocaleResolver(LocaleResolver localeResolver) {
        this.localeResolver = localeResolver;
    }
} 
```

任何人都可以帮助我或给我一个提示？

提前致谢！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:26:53.620

此问题的唯一合乎逻辑的原因是有多个请求，因为您的过滤器正在实现`OncePerRequestFilter`.

可能的原因是重定向和事件冒泡（例如，单击一个元素，该元素后面有其他元素也具有 onclick 功能）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:09:28.477

你为什么认为过滤器被调用两次？您是否在调试器上有断点或在日志中看到它？

当我最近遇到类似问题时（过滤器中的调试器断点命中两次），我发现我的浏览器每次点击发出 2 个请求 - 一个用于实际页面，另一个用于`favicon.ico`文件（书签/收藏夹或 url 栏中显示的小图标在谷歌浏览器中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T12:20:38.207

也许重定向有问题？

根据您的`doFilterInternal`实现，您正在某些条件下进行重定向。重定向创建一个新请求，因此过滤器被第二次调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T18:39:03.240

我的问题是我的过滤器类上有一个@WebFilter 注释。

# php - 无法在 Magento 中添加 css

> ID：11001401
> 
> 赞同：0
> 
> 时间：2012-06-12T17:06:23.817
> 
> 标签：php, html, css, magento, xhtml

将我的主页的自定义模板放在 mytheme/layout/page/customhome.phtml 中

要将其应用于主页，我必须使用管理 CMS，因为 local.xml 无法更改主页的模板。我使用此代码在自定义布局更新 xml 框中执行此操作：

```
 <reference name="root">
     <action method="setTemplate">
        <template>page/homes.phtml</template>
    </action>
</reference> 
```

那行得通，主页正在使用我的模板，但 Magento 没有将任何 css 文件导入页面的 head 部分。甚至没有像styles.css 这样的默认值。我尝试使用上面的 xml 更新并使用 local.xml 和引用 head 添加我自己的，但没有任何效果。

有任何想法吗？谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:51:52.737

You have a problem with the change of the template. From the phtml file you need made the $this->getChildHtml() corresponding. If you go to your old template in app/design/frontend/base/page/3colums.phtml for example you can see the next command lines:

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>">
<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="wrapper">
    <?php echo $this->getChildHtml('global_notices') ?>
    <div class="page">
        <?php echo $this->getChildHtml('header') ?>
        <div class="main-container col3-layout">
            <div class="main">
                <?php echo $this->getChildHtml('breadcrumbs') ?>
                <div class="col-wrapper">
                    <div class="col-main">
                        <?php echo $this->getChildHtml('global_messages') ?>
                        <?php echo $this->getChildHtml('content') ?>
                    </div>
                    <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
                </div>
                <div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div>
            </div>
        </div>
        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>
    </div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body>
</html> 
```

Ok, then you be careful with this, all block in yout template need a getChildHtml() from the corespondig phtml. In your case is probably that you don´t add this call from the template. Then don´t work head, content, footer, etc. I think this is your ploblem, nonetheless you can write the content of your custom template to help you with the solution. Hope help you

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:22:42.520

要获得 Magento CSS 和 js，您需要拥有

```
<?php echo $this->getChildHtml('head') ?> 
```

在你`<head>`的标签里面，这样它就可以从 page.xml 中获取它们

```
<block type="page/html_head" name="head" as="head">
                <action method="addJs"><script>prototype/prototype.js</script></action>
                <action method="addJs"><script>lib/ccard.js</script></action>
                <action method="addJs"><script>prototype/validation.js</script></action>
                <action method="addJs"><script>scriptaculous/builder.js</script></action>
                <action method="addJs"><script>scriptaculous/effects.js</script></action>
                <action method="addJs"><script>scriptaculous/dragdrop.js</script></action>
                <action method="addJs"><script>scriptaculous/controls.js</script></action>
                <action method="addJs"><script>scriptaculous/slider.js</script></action>
                <action method="addJs"><script>varien/js.js</script></action>
                <action method="addJs"><script>varien/form.js</script></action>
                <action method="addJs"><script>varien/menu.js</script></action>
                <action method="addJs"><script>mage/translate.js</script></action>
                <action method="addJs"><script>mage/cookies.js</script></action>

                <block type="page/js_cookie" name="js_cookies" template="page/js/cookie.phtml"/>

                <action method="addCss"><stylesheet>css/styles.css</stylesheet></action>
                <action method="addItem"><type>skin_css</type><name>css/styles-ie.css</name><params/><if>lt IE 8</if></action>
                <action method="addCss"><stylesheet>css/widgets.css</stylesheet></action>
                <action method="addCss"><stylesheet>css/print.css</stylesheet><params>media="print"</params></action>

                <action method="addItem"><type>js</type><name>lib/ds-sleight.js</name><params/><if>lt IE 7</if></action>
                <action method="addItem"><type>skin_js</type><name>js/ie6.js</name><params/><if>lt IE 7</if></action>
            </block> 
```

一旦你有了这个，你应该得到 Magento 需要的 CSS 和 js。也应该在你的包/主题的 page.xml 下添加你的 CSS

```
<action method="addCss"><stylesheet>css/customs.css</stylesheet></action> 
```

并确保您在主题的 css 文件夹中有该文件

# c# - 在导出时禁用自动封装

> ID：11001402
> 
> 赞同：0
> 
> 时间：2012-06-12T17:06:26.013
> 
> 标签：c#, csv, aspose, aspose-cells

我最近在工作中继承了一个项目，该项目是由我们的一个不太熟练的实习生编写的。这在理论上相当简单；它只需要将一些数据从服务器导出到供应商的 CSV 文件。

问题是我们的供应商需要将所有字段，而不仅仅是其中包含逗号的字段，封装在引号中。Aspose Cells 似乎对带有逗号的字段进行了某种形式的自动封装，但不是所有字段。

最初的程序员制作了他们自己的方法，在导出之前将引号应用于所有字段，但文件最终会在所有字段周围加上三重引号。为了解决这个问题，他们编写了另一个函数，重新打开文件并用一个单引号替换所有三引号。

我知道文本文件有分隔符选项，但我找不到任何关于更改 Aspose 中的封装的信息。

**所以我的问题是，他们是否有其他处理这个问题的方法比像现在这样进行两次传球更好？**

**更新：Aspose 在他们的论坛上回复了我的帖子，他们说他们将向 TxtSaveOptions 类添加一个属性以支持此功能。如果/当发生这种情况时，我会再次更新。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:47:45.987

在 Aspose.Cells for .NET v7.2.2 中，他们添加了一个新属性来`TxtSaveOptions`调用`AlwaysQuoted`.

以下是如何在保存期间使用此属性的示例：

```
var options = new TxtSaveOptions(SaveFormat.CSV) {AlwaysQuoted = true};
workBook.Save(@"C:\Export Location\"), options); 
```

将该属性设置为 true 将封装所有字段，而不考虑内容。默认设置是像 Excel 一样模仿 CSV 标准。

# ios - 使用企业分发分发应用程序

> ID：11001403
> 
> 赞同：0
> 
> 时间：2012-06-12T17:06:28.870
> 
> 标签：ios, enterprise-distribution

我们有几个应用程序允许用户搜索特定区域的所有可用房产，然后我们有几个应用程序适用于几家不同的公司，允许用户搜索只有该公司在营销的房产 - 即您可以拥有应用程序公司 1、公司 2 和公司 3 等除了品牌外看起来都一样，但每个都只返回他们正在营销的属性的结果。

我想使用企业分发来分发这些应用程序。我想在公司网站上上传每家公司的个人申请，以便各自公司可以将他们的申请分发给他们的客户。

我是否需要为每家公司提供不同的苹果企业分销计划，即支付 299 美元/公司？或者我可以使用相同的企业计划 我使用企业分发上传的每个应用程序是否有最大下载限制？苹果是否允许我们这样做，因为组织外的人可以下载应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:13:10.023

如果您在公司内进行分发（即不通过 App Store），您只需要企业分发。

如果您希望公众能够下载该应用程序，那么企业分发是错误的途径。只需在您的帐户下定义多个应用程序，上传不同的品牌版本并为每个版本设置适当的版权和支持信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:13:18.257

企业许可特定于个别公司。该公司必须与苹果公司建立自己的许可证。该许可证只能用于制作应用程序并将其分发给公司自己的员工和设备。它们不能分发给具有企业许可证的公司以外的任何人。

Enterprise 听起来不像您正在尝试做的事情的解决方案。如果您正在寻找某种私人分发，请查看企业对企业应用程序。

# linux - 无法通过 ARM 板的串行连接写入 GSM 模块

> ID：11001405
> 
> 赞同：1
> 
> 时间：2012-06-12T17:06:33.427
> 
> 标签：linux, arm, gsm, termios

在我们的 Graduation 项目中，我们应该将 GSM 模块 (ADH8066) 连接到运行嵌入式 Linux (Qtopia) 的 ARM 板 (OK-6410) 并与之通信。

当我们第一次对模块进行操作时，它会发送一个“Ready”消息，然后我们可以通过 AT 命令与它进行通信。我们已经使用超级终端成功地与它通信，并设法发送了一条简单的短信。

当我们尝试从 ARM 板与它通信时，就会出现问题。

我们设法收到“就绪”消息，但没有任何响应。

这是我们到目前为止开发的代码：

```
int main(void){

int fd;
char *dev ="/dev/ttySAC3";
struct termios options;

char buffer[20];
char buffer2[20];
char *bufptr;
char *bufptr2;
bufptr = buffer;
bufptr2 = buffer2;
int nbytes,nbytes2=0;

fd = open (dev, O_RDWR | O_NOCTTY);

tcflush(fd, TCIOFLUSH);

tcgetattr(fd, &options);

cfsetispeed(&options, B115200); //Set Baud-rate to 115200
cfsetospeed(&options, B115200);

options.c_cflag |= CLOCAL | CREAD; //Enable the receiver and set local mode
options.c_cflag &= ~PARENB; //No parity (8N1)
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;
options.c_cflag &= ~CRTSCTS; //Disable hardware flow control

options.c_lflag |= (ICANON | ECHO | ECHOE); //enable input-canonical mode

options.c_iflag = IGNPAR; //Ignore parity errors
options.c_iflag &= ~(IXON | IXOFF | IXANY); //Disable software flow control

options.c_oflag |= OPOST; //enable output-processing mode

tcsetattr(fd, TCSANOW, &options);

printf("Hello GSM\n");

tcflush(fd, TCIOFLUSH);

//capture the "Ready" message
while(1){
    nbytes = read(fd, bufptr, 1);
    if (0!=strstr(buffer,"Ready")){
        printf("\nReady Found!\n");
        break;
    }
    bufptr += nbytes;
}

tcflush(fd, TCIOFLUSH);

// send simple "AT" AT command
int y = write(fd,"AT\r\n",4);
if (y==4)
    printf("Written\n");

//trying to capture the "OK" response for the above AT command
while(1){
    nbytes2 = read(fd, bufptr2, 1);
    perror ("Read error: ");
    printf("%c\n",*bufptr2);
}

return 1;
} 
```

我们得到的回应是：

```
Hello GSM

Ready Found!
Written 
```

然后它阻塞并保持空闲状态。

如果我们设法捕捉到“Ready”消息，这是否意味着“read”工作正常？如果上面印有“written”，那是不是意味着“write”工作正常？那么，为什么我们不能与模块通信呢？

谢谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-29T12:36:16.417

您能够收到“就绪”，因为调制解调器在没有任何命令的情况下发送此消息。但是您开始发出 ATM 命令，您需要立即接收响应，没有任何延迟，因为调制解调器在您发出命令后立即恢复。这里你需要运行两个应用程序，一个是发出命令，第二个是接收响应。或者您可以使用定时器中断或读取串口响应。

# c# - OracleCommand.ExecuteNonQuery() 抛出异常

> ID：11001416
> 
> 赞同：1
> 
> 时间：2012-06-12T17:07:02.503
> 
> 标签：c#, asp.net, oracle, datetime

感谢您花时间查看并帮助我。我对似乎非常简单的插入操作感到疯狂，但我似乎无法通过这部分。这是我的代码：

```
 protected void InsertIntoMaterialDB()
    {
        ToroGeneral toro = new ToroGeneral();

        // Grab connection string.
        string conString = toro.GetOracle1ConnectionString();
        string insertQuery = "INSERT INTO MATERIALMOVEREQUEST (ORIGINATOR, REQUESTDATE, PARTNUMBER, REQUESTQTY, MOVEFROM, MOVETO, COMPLETEDBY, COMPLETION_DATE, COMMENTS, RESPONSETIME) "
                               + "values (:Originator, :RequestDate, :PartNumber, :RequestQty, :MoveFrom, :MoveTo, :CompletedBy, :CompletionDate, :ResponseTime, :Comments)";

        using(OracleConnection conn1 = new OracleConnection(conString))
        {    
             conn1.Open();
             OracleCommand cmd = conn1.CreateCommand();
             OracleTransaction myTrans;
             cmd.CommandText = insertQuery;
             myTrans = conn1.BeginTransaction(IsolationLevel.ReadCommitted);
             cmd.Transaction = myTrans;

             if (cmd.Connection.State == ConnectionState.Closed)
             {
                  cmd.Connection.Open();
             }

             DateTime rDate = DateTime.Parse(RequestDateTB.Text);
             DateTime cDate = DateTime.Parse(CompDateTB.Text);

             cmd.Parameters.AddWithValue("Originator", OracleType.VarChar).Value = OriginatorTB.Text;
             cmd.Parameters.AddWithValue("RequestDate", OracleType.DateTime).Value = rDate;
             cmd.Parameters.AddWithValue("PartNumber", OracleType.VarChar).Value = PartNumber.Text;
             cmd.Parameters.AddWithValue("RequestQty", OracleType.Number).Value = Convert.ToInt32(RequestQuantity.Text);
             cmd.Parameters.AddWithValue("MoveFrom", OracleType.VarChar).Value = MoveFromTB.Text;
             cmd.Parameters.AddWithValue("MoveTo", OracleType.VarChar).Value = MoveToTB.Text;
             cmd.Parameters.AddWithValue("CompletedBy", OracleType.VarChar).Value = CompletedByTB.Text;
             cmd.Parameters.AddWithValue("CompletionDate", OracleType.DateTime).Value = cDate;
             cmd.Parameters.AddWithValue("ResponseTime", OracleType.Number).Value = Convert.ToInt32(RespTimeTB.Text);
             cmd.Parameters.AddWithValue("Comments", OracleType.VarChar).Value = CommentsTB.Text;

             cmd.ExecuteNonQuery(); // THIS THROWS AN EXCEPTION.
             cmd.Transaction.Commit();
        }

    } 
```

除了两个“日期”类型字段 REQUESTDATE 和 COMPLETION_DATE 之外，我能够让一切正常工作。我不知道我做错了什么，除了当它到达 ExecuteNonQuery() 调用时它会引发异常。

如果有人有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:52:54.780

I've run into a similar issue in the past. Use the To_Date function to convert the string to a date oracle will recognize.

```
INSERT INTO MATERIALMOVEREQUEST (ORIGINATOR, REQUESTDATE, PARTNUMBER, REQUESTQTY, MOVEFROM, MOVETO, COMPLETEDBY, COMPLETION_DATE, COMMENTS, RESPONSETIME) "
                           + "values (:Originator, To_Date(:RequestDate, 'YYYY-MM-DD-HH24:MI:SS'), :PartNumber, :RequestQty, :MoveFrom, :MoveTo, :CompletedBy, To_Date(:CompletionDate, 'YYYY-MM-DD-HH24:MI:SS'), :ResponseTime, :Comments)"; 
```

Then in your parameters set the value to a string.

```
cmd.Parameters.AddWithValue("RequestDate", OracleType.VarChar).Value = rDate.ToString("yyyy-MM-dd-hh:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:21:26.117

对于 Date 字段，您可能希望使用`OracleType.DateTime`并传递您通过解析输入字符串生成的 DateTime 值，例如：

```
AddWithValue("CompletedBy", OracleType.DateTime).Value = 
              DateTime.ParseExact(...CompletedByTB.Text...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:28:48.720

除了上面乔所说的之外，我还注意到了几件事：-

a) 您正在打开一个事务，但在出现任何异常时从不回滚它。您可能希望用 try catch 语句将其括起来，并在出现异常时回滚事务并在其他情况下提交。

b）您应该始终在连接对象周围使用 using 块（我刚刚在问题中编辑了您的代码）。这样您就不必明确关闭和处理连接。这是因为所有连接提供程序类型（包括 OracleConnection）都通过其基类“DbConnection”实现[IDisposable接口。](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

# sql-server-ce - 在 SQL Compact 3.5 中更新 IDENTITY 列的种子值？

> ID：11001417
> 
> 赞同：1
> 
> 时间：2012-06-12T17:07:04.063
> 
> 标签：sql-server-ce, primary-key, identity, unique-constraint

我们在 SQL Compact 3.5 中执行大数据块的表到表复制。为了避免身份约束的问题，我们`SET IDENTITY_INSERT table ON`在复制之前和`SET IDENTITY_INSERT table OFF`之后使用。

正如[MSDN 中所描述的](http://technet.microsoft.com/en-us/library/bb734402.aspx)，身份元信息，尤其是下一个身份号码 ( `AUTOINC_NEXT`) 不会在插入时由 SQL Compact 运行时更新。因此，在插入之后，我们遇到了标识值与插入值冲突的问题。

我们尝试了 MSDN 上推荐的方法，通过运行以下命令来增加身份种子：

```
ALTER TABLE Projects ALTER COLUMN ProjectID IDENTITY (200, 2); 
```

但是我们收到以下错误消息：

```
The column cannot become an identity column after it is created. 
```

在 SQL Compact 中插入后，有什么方法可以更新身份种子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:16:09.367

问题是我们错误地假设标识列始终是表中的第一个。因此，出现错误消息是因为我们试图将一个列作为身份，而实际上之前并不是一个身份列。

# c# - 如何等待 IObservable 使用 Reactive Extensions 在不阻塞 UI 的情况下完成？

> ID：11001418
> 
> 赞同：2
> 
> 时间：2012-06-12T17:07:05.767
> 
> 标签：c#, wpf, c#-4.0, asynchronous, system.reactive

我正在尝试更新一段代码，以便它模拟模式对话框，而 Reactive Extensions 感觉像是一个合适的工具，但我无法让它工作。

目前，代码如下所示：

```
public bool ShowConfirmationDialogs(IEnumerable<ItemType> items)
{
    bool canContinue = true;

    foreach (var item in items)
    {
        Dialog dialog = new Dialog();
        dialog.Prepare(item);   // Prepares a "dialog" specific to each item

        IObservable<bool> o = Service.ShowDialog(dialog, result =>
        {
             // do stuff with result that may impact next iteration, e.g.
             canContinue = !result.Condition;
        });

        // tried using the following line to wait for observable to complete
        // but it blocks the UI thread
        o.FirstOrDefault();

        if (!canContinue)
            break;
    }

    if (!canContinue)
    {
        // do something that changes current object's state
    }

    return canContinue;
} 
```

到目前为止，当 显示的“对话框”`ShowDialog`关闭时，来自 lambda 表达式的代码被用来做一些事情。调用`ShowDialog`是非阻塞的，用于返回`void`。

在幕后发生的事情`ShowDialog`是一个对象被添加到一个`ObservableCollection`，以便它显示在屏幕上。

我进行了修改`ShowDialog`，以便在对话框关闭时返回订阅者的`IObservable<bool>`who 呼叫`OnCompleted`。这行得通。我使用以下代码对其进行了测试：

```
o.Subscribe(b => Console.WriteLine(b), () => Console.WriteLine("Completed")); 
```

`"Completed"`当对话框关闭时，我可以看到字符串。我的问题是上面的行是非阻塞的，所以我可能会显示几个我不想做的对话框。

我尝试了以下方法：

```
o.FirstOrDefault(); 
```

假设程序会在那里等到 observable 发送一些东西或完成。该程序可以阻止，但它也会冻结 UI，这意味着我永远看不到我的对话框，我永远无法关闭，所以 observable 永远不会完成。

我尝试了几种变体`ObserveOn`，并`SubscribeOn`尝试让 UI 线程完成其工作，但没有运气。任何想法都将不胜感激，我的主要目标是保持代码看起来连续，有点像使用`Window.ShowDialog`.

**总结一下：（**并在评论中回答克里斯）

问题在于它`ShowDialog`是非阻塞的，如上所述，预期的行为与使用`Window.ShowDialog`. 现在，我要么不阻塞——但循环继续，我得到几个对话框——或者我可以阻塞（用`FirstOrDefault`），但它也会阻塞 UI，这会阻止我关闭对话框以完成 observable。

**更多解释：（**对于 Enigmativity）

当我调用时`ShowDialog`，显示的控件是模态的——从某种意义上说，它阻止用户访问应用程序的其余部分——但对该方法的调用是非阻塞的，因此执行会立即继续。在我的示例中，由于循环，这可能会显示多个对话框。该方法是非阻塞的，因为它所做的只是将一个对象添加到集合中，而我无法更改此行为。

但是，希望使用 Rx，我做了它，以便`ShowDialog`返回一个`IObservable`. 所以现在该方法立即返回，但我有一个对象，一旦关闭`OnCompleted`由 的操作显示的控件，就会调用任何观察者。`ShowDialog`我正在`Subject`为此使用 a ，以防万一。

我现在想要的是在继续之前等待返回`IObservable`完成，因此模拟阻塞调用。`FirstOrDefault`等待部分成功，但不幸的是，它也阻塞了 UI 线程，阻止控件实际显示，从而阻止用户关闭它，从而阻止`IObservable`完成。

我知道我的想法离我不远了，因为我可以通过在*x*秒后自动关闭对话框来让事情顺利进行。我现在需要的只是“等待”部分不要阻塞 UI，以便用户可以关闭控件而不是计时器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:29:31.323

我找到了解决我的问题的方法，所以如果您有兴趣，我会分享它。

经过一些重构后，我重命名了问题中使用的服务方法并创建了一个新方法。它的界面是这样的：

```
public interface IDialogService
{
    /// <summary>
    /// Displays the specified dialog.
    /// </summary>
    /// <remarks>This method is non-blocking. If you need to access the return value of the dialog, you can either
    /// provide a callback method or subscribe to the <see cref="T:System.IObservable{bool?}" /> that is returned.</remarks>
    /// <param name="dialog">The dialog to display.</param>
    /// <param name="callback">The callback to be called when the dialog closes.</param>
    /// <returns>An <see cref="T:System.IObservable{bool?}" /> that broadcasts the value returned by the dialog
    /// to any observers.</returns>
    IObservable<bool?> Show(Dialog dialog, Action<bool?> callback = null);

    /// <summary>
    /// Displays the specified dialog. This method waits for the dialog to close before it returns.
    /// </summary>
    /// <remarks>This method waits for the dialog to close before it returns. If you need to show a dialog and
    /// return immediately, use <see cref="M:Show"/>.</remarks>
    /// <param name="dialog">The dialog to display.</param>
    /// <returns>The value returned by the dialog.</returns>
    bool? ShowDialog(Dialog dialog);
} 
```

解决我的问题的部分是实施`ShowDialog`：

```
public bool? ShowDialog(Dialog dialog)
{
    // This will hold the result returned by the dialog
    bool? result = null;

    // We show a dialog using the method that returns an IObservable
    var subject = this.Show(dialog);

    // but we have to wait for it to close on another thread, otherwise we'll block the UI
    // we do this by preparing  a new DispatcherFrame that exits when we get a value
    // back from the dialog
    DispatcherFrame frame = new DispatcherFrame();

    // So start observing on a new thread. The Start method will return immediately.
    new Thread((ThreadStart)(() =>
    {
        // This line will block on the new thread until the subject sends an OnNext or an OnComplete
        result = subject.FirstOrDefault();

        // once we get the result from the dialog, we can tell the frame to stop
        frame.Continue = false;
    })).Start();

    // This gets executed immediately after Thread.Start
    // The Dispatcher will now wait for the frame to stop before continuing
    // but since we are not blocking the current frame, the UI is still responsive
    Dispatcher.PushFrame(frame);

    return result;
} 
```

我认为注释应该足以理解代码，我现在可以这样使用：

```
public bool? ShowConfirmationDialogs(IEnumerable<ItemType> items)
{
    bool canContinue = true;

    foreach (var item in items)
    {
        Dialog dialog = new Dialog();
        dialog.Prepare(item);   // Prepares a "dialog" specific to each item

        bool? result = Service.ShowDialog(dialog);

        canContinue = result.HasValue && result.Value;

        if (!canContinue)
            break;
    }

    if (!canContinue)
    {
        // do something that changes current object's state
    }

    return canContinue;
} 
```

我很想听听其他用户可能有的任何评论或替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:26:44.260

您的代码是可观察和可枚举序列的奇怪混合。您还试图`bool`从使用 observables 的函数中返回 a ，因此您强制要求进行阻塞操作的不良做法。

你最好尝试让一切都保持为可观察的。这是最佳实践方法。

函数`item`中的每个也没有明确的用途。`ShowDialog`

这是我目前能提供的最好的，但我不知道更多。尝试这个：

```
public IObservable<bool> ShowConfirmationDialogs(IEnumerable items)
{
    var query =
        from item in items.OfType<SOMEBASETYPE>().ToObservable()
        from result in Service.ShowDialog(item =>
        {
            // do stuff with result that may impact next iteration of foreach
        })
        select new
        {
            Item = item,
            Result = result,
        };

    return query.TakeWhile(x => x.Result == true);
} 
```

调用代码应该在 UI 线程上观察。

让我知道这是否有帮助。

# backbone.js - Underscore.js 模板问题 - 无法调用 null 的“替换”方法

> ID：11001419
> 
> 赞同：3
> 
> 时间：2012-06-12T17:07:06.593
> 
> 标签：backbone.js, underscore.js

我一直在寻找并找到很多答案，但似乎没有一个有效。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>
           Shopping Cart
        </title>
        <link rel="stylesheet" href="lib/style.css" type="text/css">
    </head>
    <body>
<script id="rtemp" type="text/x-underscore-template"">
            <span><%= title %></span>
    </script>
        <script src="lib/jquery.js" type="text/javascript"></script>
        <script src="lib/underscore.js" type="text/javascript"></script>
        <script src="lib/backbone.js" type="text/javascript"></script>
        <script src="lib/script.js" type="text/javascript"></script>
    </body>
    <script>
var Photo = Backbone.Model.extend({

    initialize: function(){
        console.log('this model has been initialized');

        this.bind("change:title", function(){
            var title = this.get("title");
            console.log("My title has been changed to.. " + title);
            var pv = new PhotoView();
            pv.render();
        });

    },

    setTitle: function(newTitle){
        this.set({ title: newTitle });
    },

    setLocation: function(newLoc)
    {
        this.set({location:newLoc});
    }
});

var PhotoView = Backbone.View.extend
({
    el: $('body'),

    render: function(event)
    {
        var name = myPhoto.get('title');
        console.info(name);
        var template = _.template($('#rtemp').html(), {title:name});
        console.info(this.model);
        $(this.el).html(template);
        return this;
    }

});

    </script>
</html> 
```

第一的;

创建方法的新实例

```
 var newPhoto = new Photo();
 newPhoto.setTitle('Fishing'); 
```

这工作正常，它将通过模板加载到正文中。但是，如果我再做一次，

```
newPhoto.setTitle('Sailing'); 
```

我收到错误消息 - “无法调用 null 的方法‘替换’”

没有线路错误，但我相信它在

```
var template = _.template($('#rtemp').html(), {title:name}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-12T18:50:50.370

你这里有一些问题。

1.  `"`您的模板在属性中有一个 double `type`，它应该是：

    ```
    <script id="rtemp" type="text/x-underscore-template"> 
    ```

2.  您的视图应该在什么时候`render`引用：`myPhoto``this.model`

    ```
    var name = this.model.get('title'); 
    ```

3.  而您的主要问题是您的视图`<body>`用作它`this.el`并且您的模板在里面`<body>`。

您完全替换了`<body>`渲染视图时的内容：

```
$(this.el).html(template); 
```

所以在第一次`render`调用之后，就没有了`#rtemp`。然后，在下一次`render`通话中，你试试这个：

```
var template = _.template($('#rtemp').html(), ...); 
```

但由于`#rtemp`不再在 DOM 中，所以一切都崩溃了。

如果您立即抓取模板：

```
var PhotoView = Backbone.View.extend({
    el: $('body'),
    template: _.template($('#rtemp').html()),
    //...
}); 
```

然后`this.template()`在中使用`render`：

```
render: function(event) {
    //...
    var template = this.template({
        title: name
    });
    //...
} 
```

你会有更好的运气。当然，您需要确保使用这种方法在文档就绪处理程序中定义视图，或者`#rtemp`在定义视图时可能不可用。

演示：http: [//jsfiddle.net/ambiguous/dwGsM/](http://jsfiddle.net/ambiguous/dwGsM/)

* * *

也就是说，您的应用程序的结构相当奇怪。你有一个模型，它会倾听自己的声音，然后模型会在发生变化时创建并呈现一个视图。监听自身的模型本身很好，但通常您有监听模型的视图，并且视图会随着模型的变化重新呈现自己（或只是自身的一部分）。

你的模型应该看起来更像这样：

```
var Photo = Backbone.Model.extend({
    setTitle: function(newTitle) {
        this.set({ title: newTitle });
    },
    setLocation: function(newLoc) {
        this.set({ location: newLoc });
    }
}); 
```

然后你的观点是这样的：

```
var PhotoView = Backbone.View.extend({
    el: $('body'),
    template: _.template($('#rtemp').html()),
    initialize: function() {
        _.bindAll(this, 'render');
        this.model.on('change:title', this.render);
    },
    render: function(event) {
        this.$el.html(
            this.template(this.model.toJSON())
        );
        return this;
    }
}); 
```

[`_.bindAll`](http://underscorejs.org/#bindAll)in[`initialize`](http://documentcloud.github.com/backbone/#View-constructor)确保将`this.render`被正确调用`this`；然后`initialize`绑定到事件，以便它可以响应模型中的更改。视图知道它关心什么，因此它负责处理模型中的变化。而在 中`render`，您通常只需调用[`toJSON`](http://documentcloud.github.com/backbone/#Model-toJSON)即可获取模板的数据。此外，较新版本的 Backbone`$(this.el)`在视图中包含缓存版本，[`this.$el`](http://documentcloud.github.com/backbone/#View-$el)因此您不再需要`$(this.el)`自己处理。

然后你会像这样把事情搞砸：

```
var newPhoto = new Photo();
var viewPhoto = new PhotoView({ model: newPhoto });
newPhoto.setTitle('Fishing');
newPhoto.setTitle('Sailing'); 
```

`model`您可以通过在创建视图时指定选项来告诉视图使用什么模型。

您可能还想将模板`<script>`移出`<body>`.

新的和改进的演示：http: [//jsfiddle.net/ambiguous/Kytw7/](http://jsfiddle.net/ambiguous/Kytw7/)

# visual-studio-2010 - 从 VisualStudio 发布多个项目

> ID：11001422
> 
> 赞同：1
> 
> 时间：2012-06-12T17:07:20.227
> 
> 标签：visual-studio-2010, deployment

我有一个包含多个 Web 应用程序项目的解决方案。我怎样才能一次发布所有这些？在 VisualStudio 2010 中，该解决方案没有执行此操作的选项。

我发现了这个：http: [//msdn.microsoft.com/en-us/library/ms404233.aspx](http://msdn.microsoft.com/en-us/library/ms404233.aspx)

请注意，我不使用 ClickOnce，我正在尝试发布到目录（现在）。

运行宏会报错：

> 在 VBAssembly 中发生了“System.NotImplementedException”类型的异常，但未在用户代码中处理
> 
> 附加信息：未实现（HRESULT 异常：0x80004001 (E_NOTIMPL)）

我不明白为什么它不能在项目对象上调用 Save()，因为它是项目。

谢谢！安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:41:42.773

我在 VS2012 上遇到了同样的问题。您必须为每个项目制作发布配置文件。也许这篇[文章](https://stackoverflow.com/questions/13647129/vs2012-publish-multiple-projects-in-a-solution)有帮助。

# php - PHP - Mongo - $ 或

> ID：11001423
> 
> 赞同：3
> 
> 时间：2012-06-12T17:07:23.283
> 
> 标签：php, mongodb

我正在使用 PHP/Mongo 查询如下数据集：

```
{
  description:
  {
    0:
      {level: (some int 0-50)},
    1:
      {level: (some int 0-50)},

  ...

    n:
      {level: (some int 0-50)}
   }
 } 
```

如何在 php 中编写函数，该函数将构建一个动态查询，使用 $or 并基于描述键的数量 (0 ... n) 搜索 40 级及以上？

我目前的手动查询不起作用（我感觉这是因为在某些条目中 description.1、2、3 不存在）：

```
find("$or":{"description.0.level":[40,41,42,43,44,45,46,47,48,49,50],"descriptio‌​n.1.level":[40,41,42,43,44,45,46,47,48,49,50],"description.2.level":[40,41,42,43,‌​44,45,46,47,48,49,50],"description.3.level":[40,41,42,43,44,45,46,47,48,49,50]}}) 
```

它给了我一个错误：

> 致命错误：未捕获的异常 'MongoCursorException' 带有消息 '$and/$or/$nor must be a nonempty array'

所以，我需要一个能够动态构建查询并工作的函数:)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T19:02:09.783

查询的`$or`值本身应该是一个数组。 `{$or : [...]}`

请参阅[MongoDB 文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)中的标准示例。

您可能还希望使用诸如`$in`（或`$lt`和`$gt`组合）之类的运算符来选择您感兴趣的描述级别，而不是枚举每个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T17:14:24.387

对于那些感兴趣的人，这是我解决这个问题的最终代码（作品）。

```
$y = 0;
$descriptionLevels = 10; // set to 'n' levels as needed ...
while($y < $descriptionLevels){
    $filter['$or'][]['description.' . $y . '.level']['$in'] = range($startLevel, $endLevel);
    $y++;
} 
```

# php - 使用PHP打印出水平而不是垂直的表格

> ID：11001426
> 
> 赞同：5
> 
> 时间：2012-06-12T17:07:43.033
> 
> 标签：php, mysql, html-table

**问题：**

我有一张垂直打印的表格，但我希望它改为水平打印。任何人都可以就如何实现这一目标提供指导？

**PHP代码：**

```
echo '
    <table class="table table-condensed table-bordered neutralize">     
        <tbody>
            <tr>
                <td><b>Kriterium</td>
                <td><b>Betyg</td>
            </tr>
';

while ($row = mysql_fetch_assoc($result))
{
    echo '
        <tr>
            <td>'.$i.'</td>
            <td>'.$row['RID'].'</td>
        </tr>
    ';

    $i++;
}

echo '
        </tbody>
    </table>
'; 
```

**电流输出：**

![在此处输入图像描述](../Images/0124445dc70063f0afd1cd2288d51da0.png)

**期望的输出：**

![在此处输入图像描述](../Images/af629cd4312eed965a167bb6e1d59e47.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T17:12:57.553

循环遍历您的查询结果，首先构建您想要的两行，然后将它们添加到您的表中：

```
$kriterium = '';
$betyg = '';

while ($row = mysql_fetch_assoc($result))
{
    $kriterium .= '<td>'.$i.'</td>';
    $betyg .= '<td>'.$row['RID'].'</td>';
    $i++;
}

echo '
    <table class="table table-condensed table-bordered neutralize">     
        <tbody>
            <tr>
                <td><b>Kriterium</td>'.$kriterium .'
            </tr>
            <tr>
                <td><b>Betyg</td>'.$betyg .'
            </tr>
        </tbody>
    </table>
'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:28:25.227

您可以在二维数组中收集数据，然后重用此数组以构建不同格式的输出：

```
$rows  = array();
$index = 0;

while ($row = mysql_fetch_assoc($result))
    $rows[0][] = ++$index;
    $rows[1][] = $row['RID'];
}

$table = '<table class="table table-condensed table-bordered neutralize">     
  <tbody>
    <tr><td><b>Kriterium</b></td><td>%s</td></tr>
    <tr><td><b>Betyg</b></td><td>%s</td></tr>
  </tbody>
</table>';

printf(
  $table, 
  implode('</td><td>', $rows[0]),
  implode('</td><td>', $rows[1])
); 
```

# list - haskell所有功能

> ID：11001430
> 
> 赞同：1
> 
> 时间：2012-06-12T17:07:59.727
> 
> 标签：list, haskell, boolean

我需要一个程序来检查所有元素对之间的差异是否在 -2 到 2 的区间内`( >= -2 && < 2)`。如果是，则返回`True`，否则返回`False`。例如，`[1,2,3]`是`True`，但是`[1,3,4]`是`False`。我正在使用该`all`功能。我的`if`条款有什么问题？

```
allfunc (x : xs)
   = if all (...) xs
      then allfunc xs
      else [x] ++ allfunc xs
allfunc _
   = [] 
```

或者我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:16:48.223

为此，使用列表推导式或 do-notation 可能更容易。

```
pairsOf lst = do 
  x <- lst
  y <- lst
  return (x, y) 
```

`pairsOf`返回输入中的数字对列表`lst`。例如，`pairsOf [1,2,3]`结果为`[(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)]`。

现在，您可以定义单行中的一对之间的差异，`\(x, y) -> x - y`并将其映射到列表中：

```
differences lst = map (\(x, y) -> x - y) (pairsOf lst) 
```

现在你只需要确保每个元素都在和`differences lst`之间。`-2``2`

当然，这只是一种可能的方法。还有很多其他的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:54:53.653

做你所描述的天真的方法是：

```
allfunc xs = all (<=2) [abs(a-b) | a <- xs, b <- xs ] 
```

但是，更有效的方法是比较列表的最小值和最大值：

```
fastfunc [] = true
fastfunc xs = maximum xs - minimum xs <= 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:37:16.353

为什么不简单...

```
allfunc xs = (maximum xs - minimum xs) <= 2 
```

或者如果你真的想调查每一对，你可以使用单子：

```
import Control.Monad
allfunc xs = all ((<=2).abs) $ liftM2 (-) xs xs 
```

`liftA2`from`Control.Applicative`也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:10:47.107

好吧，问题规范不是很清楚。

你说：

> 所有元素之间的差异在 -2 到 2 的区间内 ( >= -2 && < 2)

但是也：

> 例如，[1,2,3] 为真，但 [1,3,4] 为假

[1,2,3] 是如何成立的？

假设你的意思是`-2 <= diff <= 2`，那么我会使用这个：

```
allfunc :: (Ord a, Num a) => [a] -> Bool
allfunc theList = all (\x -> (x >= -2) && (x<2)) [x-y | x <- theList, y <- theList ]

allfunc [1,2,3] -- => True
allfunc [1,3,4] -- => False 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-12T17:17:45.713

基本上，是的，你做错了什么。`all`旨在采用谓词和要测试的值列表。`True`因此，当且仅当应用于给定谓词函数时所有值都为真时，它将返回。IE：

```
allValuesEven = all even
allValuesOdd  = all odd 
```

# wpf - 无法更改 XAML 中的 Button.Content

> ID：11001431
> 
> 赞同：0
> 
> 时间：2012-06-12T17:07:59.817
> 
> 标签：wpf, triggers

我想使用 DataTrigger 更改 XAML 中按钮的内容。有条件地我需要更改按钮的文本。但是，如果 Button 最初有文本，则文本不会更改。使其工作的唯一方法是不设置`Content`，或者使用触发器设置它。

所以如果我有

```
<Button Content="Some text" /> 
```

触发器不会更改按钮文本。

如果我有

`<Button />`

或者

```
<Button>
    <Button.Style>
        <Style TargetType="Button">
            <Setter Property="Content" Value="Some text" />
        </Style>
    </Button.Style>
</Button> 
```

触发器有效。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:36:34.767

这是因为 DepedencyProperty 优先。见这里：http: [//msdn.microsoft.com/en-us/library/ms743230.aspx](http://msdn.microsoft.com/en-us/library/ms743230.aspx)

本地值的优先级高于触发器。这意味着本地值将“优先于”触发值

当您在样式中设置它时，它会更改优先级。触发器优先于样式设置器，这就是它按预期工作的原因。

# joomla - Joomla - 组件 404 和空白首页

> ID：11001435
> 
> 赞同：0
> 
> 时间：2012-06-12T17:08:18.233
> 
> 标签：joomla, components

我目前正在运行 Joomla 1.5，我已将我的站点移动到一个新域，并认为我已正确执行了该过程。但是现在我的菜单不见了，似乎文章没有出现在它们的正确模块中。除了我使用的组件现在给我一个 404 未找到组件错误。有谁知道这是为什么或我该如何解决这个问题？请我真的需要一些帮助或指导....

谢谢

这是我的链接：[http ://davidjamesmedia.ca](http://davidjamesmedia.ca)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:26:27.830

确保检查以下事项：

1.  确保您在 configuration.php 中进行了正确的数据库设置更改
2.  确保您的服务器正在运行 PHP 5.2+
3.  确保您的 MySQL 版本在 5.0+ 左右，但也不要太高，例如 5.5.24，这可能会导致一些贬值功能出现问题。
4.  如果您使用 SEF，还要确保您的服务器安装了 Apache mod_rewrite 扩展，否则您可以在 configuration.php 中关闭 SEF

# iphone - sqlite3_prepare_v2 返回 21 &“无法准备语句：内存不足”

> ID：11001436
> 
> 赞同：1
> 
> 时间：2012-06-12T17:08:25.063
> 
> 标签：iphone, database, sqlite, storing-data

我收到这些错误，一切都在这里。我所做的只是创建一个带有 Xcode 指定路径的 .db 文件，然后创建一个表，其中显示的值作为列。然后我尝试继续填充表格，但在标题中收到上述错误（似乎这些是导致我头痛的原因）。如果有人能对此有所了解，将不胜感激。

```
#import "Email.h"

@implementation Email

@synthesize to, cc, bcc, fromName, fromEmail, headers, datetime, subject, body, folder, state, attachments;

-(void)StoreEmail:(Email *)email{
    NSString *docsDir;
    NSArray *dirPaths;

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the database file
    databasePath = [[NSString alloc] 
    initWithString: [docsDir stringByAppendingPathComponent: 
    @"contacts2.db"]];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: databasePath ] == NO)
    {
        const char *dbpath = [databasePath UTF8String];

        if (sqlite3_open(dbpath, &contactDB2) == SQLITE_OK)
        {
            char *errMsg;
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS CONTACTS2 (ID INTEGER PRIMARY KEY AUTOINCREMENT, FROM TEXT, NAME TEXT, SUBJECT TEXT, BODY TEXT, ATTACHMENTS TEXT, HEADERS TEXT, DATETIME TEXT, FOLDER TEXT, STATE TEXT)";

            if (sqlite3_exec(contactDB2, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"path" message:@"failed to create table" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert show];
            }
            sqlite3_close(contactDB2);
        } 
        else 
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"path" message:@"failed to open/create database" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }
    }

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"path" message:databasePath delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];

    sqlite3_stmt *statement;
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &contactDB2) == SQLITE_OK)
    {
        NSLog(@"This is what open returns %d", sqlite3_open(dbpath, &contactDB2));
        //NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS2 (from, name, subject, body, attachments, headers, datetime, folder, state) VALUES (\"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\")", email.fromEmail, email.fromName, email.subject, email.body, email.attachments, email.headers, email.datetime, email.folder, email.state];
        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS2 (from, name) VALUES (\"%@\", \"%@\")", email.fromEmail, email.fromName];
        const char *insert_stmt = [insertSQL UTF8String];
        sqlite3_prepare_v2(contactDB2, insert_stmt, -1, &statement, NULL);
        NSLog(@"could not prepare statemnt: %s\n", sqlite3_errmsg(database));
        //NSLog(@"%d", sqlite3_prepare_v2(contactDB2, insert_stmt, -1, &statement, NULL));
        if (sqlite3_step(statement)== SQLITE_DONE)
        {
            NSLog(@"2");
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"path" message:@"email added" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];

        } 
        else 
        {
            NSLog(@"%d", sqlite3_step(statement));
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"path" message:@"failed to add email" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }
        sqlite3_finalize(statement);
        sqlite3_close(contactDB2);
    }
} 
```

# c# - 如何在 Windows Azure 上为 Windows Phone 使用 Microsoft Translator API？

> ID：11001438
> 
> 赞同：3
> 
> 时间：2012-06-12T17:08:32.267
> 
> 标签：c#, silverlight, windows-phone-7, azure, microsoft-translator

以前，bing 翻译器可以通过 SOAP 界面轻松访问。现在它已迁移到 Windows Azure。我在 Azure 市场注册了每月 10000 封信（免费）。如何通过 C# 中的 windows phone 通过翻译器 api 翻译文本？请帮忙。我不确定如何使用 BeginExecute 和 EndExecute 进行查询。

我已下载 TranslatorContainer.cs 并将其添加到我的项目中。现在我只是想用 GetLanguagesForTranslation 方法获取语言。这是我写的代码。

```
public partial class PhonePage1 : PhoneApplicationPage
{

    public PhonePage1()
    {
        InitializeComponent();

        Translator transInstance = new Translator();

    }
    class Translator
    {
        private Uri service_root;
        private TranslatorContainer context;

        public Translator()
        {
            service_root = new Uri("https://api.datamarket.azure.com/Bing/MicrosoftTranslator/");
            context = new TranslatorContainer(service_root);
            context.Credentials = new NetworkCredential("ID","...........");
            var query = context.GetLanguagesForTranslation();
            query.BeginExecute(OnQueryComplete, query);
        }

        public void OnQueryComplete(IAsyncResult result)
        {
            var query = result as DataServiceQuery<Language>;

            string langstring = "";
            foreach (Language lang in query.EndExecute(result))
            {
                langstring += lang.Code + "\n";
            }
            MessageBox.Show(langstring);
        }
    }
} 
```

在 OnQueryComplete() 中，`query`即使在分配之后也是 null。结果的 Properties IsCompleted 为 true，并且 statusCode 为 OK。我不知道该怎么做。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T21:00:23.037

在必应翻译团队的帮助下，我让它在我的 Silverlight 应用程序中工作：

1.  需要在代理上关闭 UseDefaultCredentials

2.  在异步回调中，您将结果转换为 DSQ，但需要转换的是结果的 AsyncState。见下文。

    ```
    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var serviceUri = new Uri("https://api.datamarket.azure.com/Bing/MicrosoftTranslator/");
        var accountKey = "**********************"; // 
        var tcode = new Microsoft.TranslatorContainer(serviceUri);

        tcode.Credentials = new NetworkCredential(accountKey, accountKey);
        tcode.UseDefaultCredentials = false;
        var query = tcode.GetLanguagesForTranslation();
        query.BeginExecute(OnQueryComplete, query);
    }

    public void OnQueryComplete(IAsyncResult result)
    {
        var query = (DataServiceQuery<Microsoft.Language>)result.AsyncState;
        var enumerableLanguages = query.EndExecute(result);
        string langstring = "";
        foreach (Microsoft.Language lang in enumerableLanguages)
        {
            langstring += lang.Code + "\n";
        }
        MessageBox.Show(langstring);
    } 
    ```

这样您就可以使用 BeginExecute() 和 BeginEnd() 来获取异步结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T02:43:10.730

我遇到了完全相同的问题，有人建议该问题可能与调用 GetLanguagesForTranslation 时异步结果如何在内部返回有关，但是我没有进一步挖掘，只是使用 Execute() 来获取如下语言列表：

```
var serviceUri = new Uri("https://api.datamarket.azure.com/Bing/MicrosoftTranslator/");
var accountKey = "***********************"; // 
var tcode = new TranslatorContainer(serviceUri);
tcode.Credentials = new NetworkCredential(accountKey, accountKey);
var languages = tcode.GetLanguagesForTranslation().Execute().ToArray(); 
foreach (var i in languages)
{
    Console.WriteLine(i.Code);
} 
```

不确定这是否是您正在寻找的东西，但它在我的情况下效果很好。

# php - 对动态拉取的文件进行排序

> ID：11001444
> 
> 赞同：0
> 
> 时间：2012-06-12T17:09:25.573
> 
> 标签：php, arrays, sorting, usort

我正在尝试从目录中动态加载文件，然后按月份对它们进行排序。从七月开始，然后到六月。

这是我目前所拥有的——

```
function monthCompare($a, $b) {
    $a = strtolower($a);
    $b = strtolower($b);
    $months = array(
        'July' => 1,
        'August' => 2,
        'September' => 3,
        'October' => 4,
        'November' => 5,
        'December' => 6,
        'January' => 7,
        'February' => 8,
        'March' => 9,
        'April' => 10,
        'May' => 11,
        'June' =>12,

    );

    if($a == $b)
        return 0;

    if(!isset($months[$a]) || !isset($months[$b]))
        return $a > $b;

    return ($months[$a] > $months[$b]) ? 1 : -1;

}

usort($filearray, "monthCompare"); 
```

这是我认为不起作用的代码。

谢谢

1.  这些文件是分钟，它们的名称格式是“月-日-年”

2.  任何人都可以随时修改这些文件

3.  他认为他使用函数 usort 的方式存在问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:21:22.903

将文件名转换为[unix 时间戳](http://ca2.php.net/manual/en/function.strtotime.php)并按此排序怎么样？像这样：

```
$files = array('january-25-2012.pdf', 'february-2-2012.pdf');
$sorted_array = array();

foreach($files as $key => $file) {
   $name = explode(".", $file);
   $nix_date = strtotime($name[0]); // turn to unix timestamp
   $sorted_array[$nix_date] = $name[0];
}
// sort by keys
ksort($sorted_array); 

```

将导致：

```
 array(2) {
   [1327522320] => string(15) "january-25-2012"
   [1328213520] => string(15) "february-2-2012"
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:17:36.770

使用函数[filectime](http://www.php.net/manual/en/function.filectime.php)。在 unix 上，此函数将返回文件最后修改时间的日期（但要小心，因为在 Windows 上，这将返回文件创建时间）。您可以使用此功能根据文件的修改时间对文件进行排序，这将适用于您的笔记文本。

# asp.net - 如何将参数传递给asp.net中的js函数

> ID：11001450
> 
> 赞同：0
> 
> 时间：2012-06-12T17:10:07.263
> 
> 标签：asp.net

我想将 5 个参数传递给我的 js 函数。但是在传递这些参数时出现了一些错误。如何解决？

```
 <asp:Button ID="btnRezAktar" runat="server" Text="Aktar" OnClientClick='<%# Eval("o_no", "SubmitPage(\"{0}\", ") + Eval("k_ad", "\"{0}\") + Eval("gir_tar", "\"{0}\") + Eval("cik_tar", "\"{0}\") + Eval("gece_say", "\"{0}\")") %>' />

 <script language="javascript">
        function SubmitPage(o_no, k_ad, gir_tar, cik_tar, gece_say) {
            window.opener.document.getElementById('txtRoomNo').value = o_no.toString();
            window.opener.document.getElementById('txtNameSurname').value = k_ad.toString();
            window.opener.document.getElementById('txtStartDate').value = gir_tar.toShortDateString();
            window.opener.document.getElementById('txtFinishDate').value = cik_tar.toShortDateString();
            window.opener.document.getElementById('txtNightNum').value = gece_say.toString();
            this.close();
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:17:03.703

试试这个

```
OnClientClick=
  '<%# string.Format("SubmitPage('{0}','{1}','{2}','{3}','{4}')", Eval("o_no"), Eval("k_ad"), Eval("gir_tar"), Eval("cik_tar"), Eval("gece_say")) %>' 
```

# sql - 带有实体框架的sql查询

> ID：11001452
> 
> 赞同：0
> 
> 时间：2012-06-12T17:10:30.440
> 
> 标签：sql, entity-framework, linq-to-sql, ado.net, objectcontext

如果我使用实体框架进行连接，如何使用 sql 语言查询？我从这篇[文章](https://stackoverflow.com/questions/3962541/how-to-run-sql-queries-on-ef)中了解到 ObjectContext.ExecuteStoreQuery 无济于事，因为它仅适用于某些查询（不是 1:1 到 sql 语言）。

提到的另一个选项是使用 ObjectContext.Connection 并从那里编写“经典”ADO.NET 代码，但我就是不知道怎么做。

有人可以写一个非常简单的代码示例我如何执行一个简单的查询，例如

```
select MAX(customer_id) from Customers 
```

与实体框架？我知道存在 Linq-To-Sql，但我更喜欢使用 sql 语言，它看起来更简单，我更熟悉它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T17:14:32.577

使用`Database.SqlQuery`方法执行`SQL queries`

```
var maxId= context.Database.
           SqlQuery<int>("select MAX(customer_id) from Customers")
                                                              .SingleOrDefault(); 
```

`context`这应该在您的`DataContext`类对象中起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:53:45.013

没有答案，但我必须...

> 我更喜欢使用sql语言

帮自己一个忙，“忘记” SQL！*Linq 真的没那么难。*字符串文字中的 SQL 是维护地狱。Linq 是强类型的，因此编译器可以保护您免受代码损坏。你有智能感知，更少的仪式代码，更容易表达复杂的查询。等等等等。

您的声明在 Linq 中是小菜一碟。

```
context.Customers.Max(c => c.customer_id) 
```

好吧，只是一个建议：D

# css - 在 Compass Susy 中组合布局断点？

> ID：11001454
> 
> 赞同：2
> 
> 时间：2012-06-12T17:10:38.040
> 
> 标签：css, sass, compass-sass, susy-compass

我只是想使用 Susy

我已经定义了布局，我需要从桌面版本开始，然后再添加 2 个：一个用于平板电脑，一个用于手机：

```
$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1.4em;
$grid-padding   : $gutter-width;

$phone: 4 35em;
$tablet: 35em 8 70em; 
```

似乎正在工作。当我需要对应该出现在桌面上而不是其他两个中的任何内容进行更改时，我的问题就出现了，我发现自己在重复自己：

```
#my-div {
@include span-columns(3 omega,7);
     @include at-breakpoint($tablet) {
    display:none;
    }
 @include at-breakpoint($phone) {
    display:none;
    }
} 
```

我怎样才能简化这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:07:02.357

在这种情况下，您不需要 susy，您只需要一个最大宽度为 70em 的基本 CSS 媒体查询。断点的唯一原因是获得媒体查询/布局更改组合。或者，添加 '$small: 8 70em;' 并使用它。

# java - Json - Java 对象到 Json

> ID：11001458
> 
> 赞同：6
> 
> 时间：2012-06-12T17:11:11.620
> 
> 标签：java, json, jakarta-ee

我对 Json 非常陌生，我的目标是从 Java bean 创建下面的 Json 输出。我应该如何构建我的 Java 对象？我应该将 MyResult 类和 User 和 Result 作为子类吗？我可以为此使用什么 Json 库？

```
“MyResult” {
    “AccountID”: “12345”,
    "User" {
        "Name": "blah blah",
        "Email": “blah@blah.com”,
     },
     "Result" {
         "Course": “blah”,
         "Score": “10.0”
     }
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T20:56:01.663

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

* * *

> 我应该如何构建我的 Java 对象？

下面是您的对象模型的样子。MOXy 的 JSON 绑定利用 JAXB 注释将域模型映射到 JSON，因此我也包含了这些注释。JAXB 实现具有映射字段/属性名称的默认规则，但由于您的文档与默认值不同，因此必须对每个字段进行注释。

**我的结果**

```
package forum11001458;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="MyResult")
public class MyResult {

    @XmlElement(name="AccountID")
    private String accountID;

    @XmlElement(name="User")
    private User user;

    @XmlElement(name="Result")
    private Result result;

} 
```

**用户**

```
package forum11001458;

import javax.xml.bind.annotation.XmlElement;

public class User {

    @XmlElement(name="Name")
    private String name;

    @XmlElement(name="Email")
    private String email;

} 
```

**结果**

```
package forum11001458;

import javax.xml.bind.annotation.XmlElement;

public class Result {

    @XmlElement(name="Course")
    private String course;

    @XmlElement(name="Score")
    private String score;

} 
```

* * *

> 我可以为此使用什么 Json 库？

下面是如何使用 MOXy 进行 JSON 绑定：

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要`jaxb.properties`在与域模型相同的包中包含一个名为以下条目的文件：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

请注意 MOXy 的 JSON 绑定如何不需要任何编译时依赖项。Java SE 6 中提供了所有必要的 API。如果您使用的是 Java SE 5，则可以添加必要的支持 API。

```
package forum11001458;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(MyResult.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setProperty("eclipselink.media-type", "application/json");
        File json = new File("src/forum11001458/input.json");
        Object myResult = unmarshaller.unmarshal(json);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(myResult, System.out);
    }

} 
```

**输入.json/输出**

```
{
   "MyResult" : {
      "AccountID" : "12345",
      "User" : {
         "Name" : "blah blah",
         "Email" : "blah@blah.com"
      },
      "Result" : {
         "Course" : "blah",
         "Score" : "10.0"
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T17:13:26.760

[Google 的 GSON](http://code.google.com/p/google-gson/)是一个非常好的 json 库。[这](https://sites.google.com/site/gson/gson-user-guide)是来自上一个链接，它基本上概述了它的一些功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T17:16:01.533

[jackson](http://jackson.codehaus.org/)也非常快速且易于使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T17:18:37.927

虽然已关闭，[但这篇 SO 帖子](https://stackoverflow.com/questions/2378402/jackson-vs-gson)可以帮助您了解 Jackson 和 GSON 之间的区别。哪一个是“最好的”取决于对你来说什么是重要的。

编辑：特别是对于杰克逊，你的例子看起来很像他们给出的他们所谓的完整数据绑定的例子，你可以在[这里](http://wiki.fasterxml.com/JacksonInFiveMinutes#Full_Data_Binding_.28POJO.29_Example)阅读。顺便说一句，虽然宣布的阅读该文档所需的 5 分钟可能有点短，但它完整地概述了可以使用 Jackson 的不同方式。您还会注意到给出的示例不使用注释。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-19T20:22:42.197

或[GSON](http://code.google.com/p/google-gson/)

超级简单（无需获取器/设置器，无需注释或配置）。

```
class BagOfPrimitives {
  private int value1 = 1;
  private String value2 = "abc";
  private transient int value3 = 3;
}

BagOfPrimitives obj = new BagOfPrimitives();
Gson gson = new Gson();
String json = gson.toJson(obj); 

==> json is {"value1":1,"value2":"abc"} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-02T04:25:26.063

**我可以为此使用什么 Json 库？**Jackson 库用于将 Java 对象序列化为 JSON 并将 JSON 字符串反序列化为 Java 对象。将以下依赖项添加到 pom.xml。

```
 <dependency>
     <groupId>com.fasterxml.jackson.core</groupId>
     <artifactId>jackson-databind</artifactId>
     <version>2.9.4</version> 
     </dependency> 
```

此依赖项会将以下库传递到类路径中：jackson-annotations-2.9.4.jar jackson-core-2.9.4.jar jackson-databind-2.9.4.jar

**注意：请始终使用最新的罐子。

**我应该如何构建我的 Java 对象？**请查看完整的工作代码。

```
 **MainClass.java:**

      import java.io.IOException;

     import com.fasterxml.jackson.databind.ObjectMapper;
     import com.fasterxml.jackson.databind.SerializationFeature;

    public class MainClass {

    public static void main(String[] args) throws IOException {

    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    Result result = new Result();
    result.setCourse("blah");
    result.setScore("10.0");

    User user = new User();
    user.setName("blah blah");
    user.setEmail("blah@blah.com");

    MyResult myResult = new MyResult();
    myResult.setAccountID("12345");
    myResult.setResult(result);
    myResult.setUser(user);

    MyPojo myPojo = new MyPojo();
    myPojo.setMyResult(myResult);

    String jsonStr = mapper.writeValueAsString(myPojo);

    System.out.println(jsonStr);

} }

     **MyPojo.java:-**

    import com.fasterxml.jackson.annotation.JsonProperty;
    import com.fasterxml.jackson.annotation.JsonPropertyOrder;

@JsonPropertyOrder({ "AccountID", "User", "Result" })
public class MyPojo {
private MyResult MyResult;

public MyResult getMyResult() {
    return MyResult;
}

@JsonProperty("MyResult")
public void setMyResult(MyResult MyResult) {
    this.MyResult = MyResult;
} }

    **MyResult.java:**

import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonPropertyOrder;

@JsonPropertyOrder({ "AccountID", "User", "Result" })
public class MyResult {

private User User;

private Result Result;

private String AccountID;

public User getUser() {
    return User;
}

@JsonProperty("User")
public void setUser(User User) {
    this.User = User;
}

public Result getResult() {
    return Result;
}

@JsonProperty("Result")
public void setResult(Result Result) {
    this.Result = Result;
}

public String getAccountID() {
    return AccountID;
}

  @JsonProperty("AccountID")
  public void setAccountID(String AccountID) {
    this.AccountID = AccountID;
    } }

    **Result.java:**

 import com.fasterxml.jackson.annotation.JsonProperty;
 import com.fasterxml.jackson.annotation.JsonPropertyOrder;

   @JsonPropertyOrder({ "Course", "Score" })
    public class Result {

    private String Course;

    private String Score;

    public String getCourse() {
    return Course;
    }

    @JsonProperty("Course")
    public void setCourse(String Course) {
    this.Course = Course;
}

   public String getScore() {
    return Score;
}

   @JsonProperty("Score")
  public void setScore(String Score) {
    this.Score = Score;
  } }

    **User.java:**

    import com.fasterxml.jackson.annotation.JsonProperty;
    import com.fasterxml.jackson.annotation.JsonPropertyOrder;

    @JsonPropertyOrder({ "Name", "Email" })
      public class User {

    private String Name;

    private String Email;

    public String getName() {
    return Name;
    }

@JsonProperty("Name")
public void setName(String Name) {
    this.Name = Name;
}

public String getEmail() {
    return Email;
}

@JsonProperty("Email")
public void setEmail(String Email) {
    this.Email = Email;
}

@Override
public String toString() {
    return "ClassPojo [Name = " + Name + ", Email = " + Email + "]";
} }

   **Result:**

      {
  "MyResult" : {
    "AccountID" : "12345",
   "User" : {
     "Name" : "blah blah",
     "Email" : "blah@blah.com"
   },
   "Result" : {
     "Course" : "blah",
     "Score" : "10.0"
   }
  }
} 
```

注意：请注意使用 Json 注释，如 @JsonProperty("Email") 以使预期输出中的 json 属性名称与 @JsonPropertyOrder({ "Name", "Email" } 以保持预期输出中的序列相同。参考：[https](https://www.baeldung.com/jackson-annotations) ://www.baeldung.com/jackson-annotations 。

# c# - Regex.Split 方括号 [] 内的所有内容

> ID：11001459
> 
> 赞同：0
> 
> 时间：2012-06-12T17:11:14.297
> 
> 标签：c#, regex, split

在正则表达式方面，我真的是一个 n00b。例如，我一直在尝试拆分字符串`[----anything inside-----]`。

```
string s = "Hello Word my name_is [right now I'm hungry] Julian";
string[] words = Regex.Split( s, "------"); 
```

结果将是 `"Hello Word my name_is "`和`" Julian"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T17:16:05.873

您要使用的正则表达式是：

```
Regex.Split( s, "\\[.*?\\]" ); 
```

方括号是特殊字符（指定字符组），因此必须使用反斜杠对其进行转义。在方括号内，您需要除右方括号外的任何字符序列。有几种方法可以处理它。一种是指定`[^\]]*`（明确指定“不是右方括号”）。另一个，正如我在回答中使用的那样，是通过在其后附加一个问号来指定匹配不是贪婪的。这告诉正则表达式处理器不要贪婪地消耗尽可能多的字符，而是在匹配下一个表达式时立即停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:16:21.637

`@"\[.*?\]"`将匹配文本的括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:20:52.857

另一种写法：

```
Regex.Split(str, @"\[[^]]*\]"); 
```

# sql - 有没有办法在不恢复的情况下查询备份数据库？

> ID：11001460
> 
> 赞同：1
> 
> 时间：2012-06-12T17:11:19.763
> 
> 标签：sql, sql-server

我有一个 SQL Server 2005 实例正在运行，我的一个客户删除了一些他们想要取回的数据。这是四个记录。有没有办法在不恢复数据库的情况下查询备份以查看数据是否存在？

他们只是注意到数据丢失了，并且可能在 3 个月前或昨天被他们删除，因此备份可能已被覆盖并且根本不存在。我只是想覆盖我的基础，看看我是否能找到数据，然后告诉他们他们不应该第二次点击确定，当我问他们是否确定要删除该记录时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:17:35.273

RedGate 销售[虚拟还原](http://www.red-gate.com/products/dba/sql-virtual-restore/)，它可以

> 直接从备份中快速装载实时、功能齐全的数据库

您可以注册试用并检查您当前的备份。

PS 我没用过 Virtual Restore，但我用的其他 RedGate 产品质量很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:18:54.227

~~不，没有这种可能性，但是，~~如果您的备份媒体是文件，（例如，文件夹中有不同的名称），您可以制作一个循环脚本来自动恢复每个文件以及对丢失记录的后续查询。 如果你想要我有一个类似的脚本但我现在无法访问，那么
该脚本只需要执行。`restore database ... from ...`

# android - 安卓媒体播放器

> ID：11001462
> 
> 赞同：1
> 
> 时间：2012-06-12T17:11:25.183
> 
> 标签：android, android-mediaplayer

您好，我是 android 的新编​​码员。我有一个“播放”“暂停”和“停止”本地 .mp3 文件的程序。我在这里找到了这个网站的来源。

[http://android-er.blogspot.com/2010/07/android-mediaplayer.html](http://android-er.blogspot.com/2010/07/android-mediaplayer.html)

所以我在代码中发布，一切似乎都很好，直到我真正点击播放并得到一个错误。

我试图阅读错误但无法弄清楚它到底在说什么？

我的错误是这个（logcat）：

```
06-12 12:02:38.810: E/AndroidRuntime(4190): FATAL EXCEPTION: main
06-12 12:02:38.810: E/AndroidRuntime(4190): java.lang.NullPointerException
06-12 12:02:38.810: E/AndroidRuntime(4190):atcom.reg.ihigh.Cocaine$1.onClick(Cocaine.java:53)
06-12 12:02:38.810: E/AndroidRuntime(4190): at android.view.View.performClick(View.java:2485)
06-12 12:02:38.810: E/AndroidRuntime(4190): at android.view.View$PerformClick.run(View.java:9089)
06-12 12:02:38.810: E/AndroidRuntime(4190): at android.os.Handler.handleCallback(Handler.java:587)
06-12 12:02:38.810: E/AndroidRuntime(4190): at android.os.Handler.dispatchMessage(Handler.java:92)
06-12 12:02:38.810: E/AndroidRuntime(4190): at android.os.Looper.loop(Looper.java:123)
06-12 12:02:38.810: E/AndroidRuntime(4190): at android.app.ActivityThread.main(ActivityThread.java:3806)
06-12 12:02:38.810: E/AndroidRuntime(4190): at java.lang.reflect.Method.invokeNative(Native Method)
06-12 12:02:38.810: E/AndroidRuntime(4190): at java.lang.reflect.Method.invoke(Method.java:507)
06-12 12:02:38.810: E/AndroidRuntime(4190): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-12 12:02:38.810: E/AndroidRuntime(4190): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-12 12:02:38.810: E/AndroidRuntime(4190): at dalvik.system.NativeStart.main(Native Method) 
```

班级

```
package com.reg.ihigh;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Cocaine extends Activity {
    MediaPlayer mediaPlayer;
     Button buttonPlayPause, buttonQuit;
     TextView textState;

     private int stateMediaPlayer;
     private final int stateMP_NotStarter = 0;
     private final int stateMP_Playing = 1;
     private final int stateMP_Pausing = 2;

      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.drugg);

          buttonPlayPause = (Button)findViewById(R.id.playButton);
          buttonQuit = (Button)findViewById(R.id.quitButton);
          textState = (TextView)findViewById(R.id.state);

          buttonPlayPause.setOnClickListener(buttonPlayPauseOnClickListener);
          buttonQuit.setOnClickListener(buttonQuitOnClickListener);

          initMediaPlayer();

      }

      private void initMediaPlayer()
      {
       mediaPlayer = new  MediaPlayer();
          mediaPlayer = MediaPlayer.create(Cocaine.this, R.raw.cocaine);
          stateMediaPlayer = stateMP_NotStarter;
          textState.setText("- IDLE -");
      }

      Button.OnClickListener buttonPlayPauseOnClickListener
       = new Button.OnClickListener(){

       @Override
       public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(stateMediaPlayer){
        case stateMP_NotStarter:
         mediaPlayer.start();
         buttonPlayPause.setText("Pause");
         textState.setText("- PLAYING -");
         stateMediaPlayer = stateMP_Playing;
         break;
        case stateMP_Playing:
         mediaPlayer.pause();
         buttonPlayPause.setText("Play");
         textState.setText("- PAUSING -");
         stateMediaPlayer = stateMP_Pausing;
         break;
        case stateMP_Pausing:
         mediaPlayer.start();
         buttonPlayPause.setText("Pause");
         textState.setText("- PLAYING -");
         stateMediaPlayer = stateMP_Playing;
         break;
        }

       }
      };

      Button.OnClickListener buttonQuitOnClickListener
     = new Button.OnClickListener(){

      @Override
      public void onClick(View v) {
       // TODO Auto-generated method stub
       mediaPlayer.stop();
       mediaPlayer.release();
       finish();
      } 
      };

} 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"

/>
<Button
android:id="@+id/playButton"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

android:text="Play"/>
<Button
android:id="@+id/quitButton"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

android:text="Quit"/>
<TextView
android:id="@+id/state"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
</LinearLayout> 
```

编辑修复：

当我转换我的原始 mp3 以压缩它们时，它是如何在复制过程中损坏到原始文件夹的。所以我只是重新压缩复制过来并bam。一切正常！谢谢@MattWolfe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:32:22.680

`MediaPlayer`s`create()`方法[说](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20int%29)：_

```
Returns a MediaPlayer object, or null if creation failed 
```

这就是你的情况。阅读此[答案](https://stackoverflow.com/questions/6782109/nullpointerexception-while-using-androids-mediaplayer)和此[答案](https://stackoverflow.com/questions/3369068/android-play-sound-on-button-click-null-pointer-exception)以获取有关解决您的问题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:13:59.243

找出第 53 行的内容并添加一个检查，以确保在调用其中一个方法之前，任何对象（在 . 的左侧）都不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:25:00.623

在调用初始化 mediaPlayer 的方法 initMediaPlayer() 之前设置 onClickListener。由于 mediaPlayer 未在您的 onClickListener 中初始化，因此它会引发 NullPointerException。

在您的 onCreate 中，在设置您的 onClickListener 之前调用 initMediaPlayer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T17:47:44.433

你的媒体资源好吗？用 uri 试试看它是否有效（你可以使用一些在线 mp3 文件的 url）

# google-analytics - 在 Google Analytics 中设置电子商务跟踪

> ID：11001465
> 
> 赞同：0
> 
> 时间：2012-06-12T17:11:44.983
> 
> 标签：google-analytics, e-commerce

我正在为客户设置电子商务跟踪，并且有几个问题可以帮助我理解 Google Analytics。

我了解您必须为收据中出现的每个产品提供一个“_addItem”。这是否需要以任何方式更改 JavaScript，还是使用已有的内容自动生成每个项目的数据？

我的另一个问题是：当 JavaScript 从收据中提取交易和项目信息时，我是否必须对我的网站代码做任何事情以确保 JavaScript 中使用的标识符与收据中的标识符匹配？下面的 JavaScript 如何知道它收集的数据中的“总计”是什么意思？

我希望我已经说清楚了，请问您是否希望我详细说明。我真的只是想弄清楚它是如何工作的，以及我需要做什么才能让它工作。

```
<script type="text/javascript">
pageTracker._addTrans(
"order-id", // required
"affiliate or store name",
"total",
  "tax",
  "shipping",
  "city",
  "state",
  "country"
);

pageTracker._addItem(
  "order-id", // required
  "SKU",
  "product name",
  "product category",
  "unit price",  // required
  "quantity"  //required
);

pageTracker._trackTrans();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:29:42.203

Google Analytics 不会根据当前页面自动填充报告。GA 不会解析页面上的任何内容。您需要手动将所有信息作为参数传递给`_addTrans`和`_addItem`。

该文档非常详细，并解释了您应该如何实现它。但最后，代码片段只是示例。您应该根据服务器端逻辑动态地生成代码片段，以便使用该事务的正确信息填充代码。

[实施电子商务跟踪的官方指南](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce)

# transition - d3.js 中的过渡线

> ID：11001467
> 
> 赞同：3
> 
> 时间：2012-06-12T17:11:52.953
> 
> 标签：transition, d3.js

抱歉，如果这个问题看起来很愚蠢，但它让我困惑了几天，所以我非常感谢任何人的任何简单输入！:) 我正在尝试在 d3.js 中构建一个在不同数据集之间转换的折线图。但是，每当我点击转换功能时，它都会选择图表上的原始线，以及图表的轴，并转换所有这些。我试图做 selectAll("svg:path") 而不是 selectAll("path") 但它只返回一个 DOMException 12，表明选择不存在。

```
//beginning of code to append axis to graph
graph.append("svg:g").attr("class", "x axis")

//draws the original line on the graph
graph.append("svg:path").attr("d", line(dataset1));

//line function
var line = d3.svg.line()
        .x(function(d) {return x(d.age);})
        .y(function(d) {return y(d.freq);})
        .interpolate("basis");

//transition function
function transition(newData) {          
        graph.selectAll("path")
            .data(newData)
        .transition()
            .duration(2000)
            .attr("d", line(newData));
    } 
```

感谢您的任何回复！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:25:26.627

只需给您想要更改唯一类/标识符的东西，例如

```
graph.append("svg:path").attr("d", line(dataset1)).classed("line", true);
...
graph.selectAll("path.line")
        .data(newData)
... 
```

# gwt - 带有标签和图像的 GWT Celltable 列

> ID：11001469
> 
> 赞同：0
> 
> 时间：2012-06-12T17:11:56.077
> 
> 标签：gwt, celltable

我正在寻找将标签和图像添加到 CellTable 列，具有以下要求：
- 标签后面应该跟一个图像。
- 单击列（标签或图像上的任何位置），切换图像。

我正在考虑创建一个包含 Horizo​​ntalPanel 的自定义小部件。其中本身包含标签和图像。在投入大量时间之前，只想确认这种方法是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:18:17.783

不，您不能将小部件放在 CellTable 中。您必须制作一个自定义单元格（扩展`AbstractCell`）并直接生成 HTML。

看看 GWT 对不同单元格的实现，看看它们如何实现点击等。例如，没有好的 ClickEvents - 你必须直接响应浏览器事件。

要切换图像，您必须重新绘制整个表格，或者使用您不想使用的疯狂 javascript。

# python - 解析 defaultdict 字符串

> ID：11001471
> 
> 赞同：3
> 
> 时间：2012-06-12T17:12:02.573
> 
> 标签：python, parsing, defaultdict

我用一个简单的打印命令转储了多个 defaultdict，如下所示：

```
defaultdict(<type 'list'>, {'actual': [20000.0, 19484.0, 19420.0], 'gold': [20000.0, 19484.0, 19464.0]}) 
```

是否有一些标准解析器可以用来检索它们？我知道我应该使用 pickle，但是生成这些 defaultdict 的代码非常慢，我想避免重新运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:22:00.093

如果您的 defaultdict 的类型是 always `<type 'list'>`，您可以使用以下内容：

```
from collections import defaultdict

s = """
defaultdict(<type 'list'>, {'actual': [20000.0, 19484.0, 19420.0], 'gold': [20000.0, 19484.0, 19464.0]})
"""
data = eval(s.replace("<type 'list'>", 'list')) 
```

人们会告诉你这`eval()`是不安全和邪恶的，但如果有人试图将有害代码注入你转储的数据中，他们可能同样容易编辑你的源代码。如果您从中获取此数据的文本文件比您的源代码更易于访问，那么您可能不想使用此方法。

如果您的 defaultdicts 有多种类型，但它们都是内置类型（或易于`repr`在类型名称之间转换），那么您仍然可以使用此方法进行多次替换，例如：

```
for rep, typ in ((repr(list), 'list'), (repr(dict), 'dict')):
    s = s.replace(rep, typ)
data = eval(s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:15:00.507

完全丑陋，但有效：

```
s = """
defaultdict(<type 'list'>, {'actual': [20000.0, 19484.0, 19420.0], 'gold': [20000.0, 19484.0, 19464.0]})
"""

import re, ast

s = re.sub('^[^{]+', '', s)
s = re.sub('[^}]+$', '', s)

print ast.literal_eval(s) 
```

请注意，这会创建一个普通的`dict`，而不是一个 defaultdict。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:03:57.547

您可以创建自己的子类：

```
from collections import defaultdict

class mydefdict(defaultdict):
     def __repr__(self):
         return "mydefdict(%s, %s)" % (repr(self.default_factory()) + ".__class__", repr(dict(self))) 
```

然后像其他类型一样使用它`eval`：

```
>>> d = mydefdict(list)
>>> d['foo'] = [1,2,3]
>>> d['bar']
[]
>>> print d
mydefdict([].__class__, {'foo': [1, 2, 3], 'bar': []})
>>> reprstring = repr(d)
>>> d2 = eval(reprstring)
>>> d2
mydefdict([].__class__, {'foo': [1, 2, 3], 'bar': []}) 
```

请注意，使用这种方式，将为结构中的每个对象引用创建一个单独的副本，即使其中一些引用是对同一对象的引用。

# wordpress - wordpress 编辑特定页面 html

> ID：11001472
> 
> 赞同：0
> 
> 时间：2012-06-12T17:12:02.810
> 
> 标签：wordpress

例如我在wordpress“page3”中创建新页面我想编辑这个页面的html和css并添加例如我的联系人，怎么做？我正在搜索主题选项，但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:46:03.610

您可以编辑 page.php 文件，但您对它所做的操作将影响所有其他页面。或者您可以复制 page.php 文件并将其命名为 page-3.php（或您的“Page3”页面 ID 号）。一定要保留对页眉和页脚以及页面顶部和底部的调用。

# javascript - Javascript 重新加载以加载新实例而不重新加载页面

> ID：11001474
> 
> 赞同：0
> 
> 时间：2012-06-12T17:12:13.173
> 
> 标签：javascript, jquery, dialog

我在关闭时在 jQuery 对话框中使用 window.location.reload。问题是，如果用户较早发布到页面，它会给他们一个对话框来重新加载发布数据。有没有办法在不“重新加载”或“刷新”的情况下加载页面。

类似于 PHP 的 header("Location");

我需要它来加载相同的 url，而不是重新加载它。

我知道我可以使用 window.location = window.location，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:16:58.347

怎么样`window.location.href = document.URL;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:20:40.827

除了直接的答案之外，从更广泛的范围来看这个问题可能会有所帮助。

提示用户重新加载发布数据，因为他们通过 POST 方法来到该页面 - 如果您使用[PRG 模式](https://en.wikipedia.org/wiki/Post/Redirect/Get)，您将避免发布数据提示，*并*获得它提供的各种其他好处。也就是说，这是一个多一点的工作:)

# android - ListFragment 膨胀了两次

> ID：11001475
> 
> 赞同：0
> 
> 时间：2012-06-12T17:12:21.360
> 
> 标签：android, android-listview, android-listfragment

我有一个线性布局（`layout_container`在skeleton.xml 中），它在创建活动时用ListFragment ( `menufragment`) 膨胀。然后，当用户执行单击时，此布局将替换为另一个 ListFragment ( `albumsfragment`)。

问题是当我按下后退按钮时，我确实回到了 menufragment 但列表长了两倍，因为它再次被相同的项目填满了。我怎么能避免这种情况？

**OnCreate 方法，在 Activity 内部**：

```
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.skeleton);

        FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();      
        MenuFragment menufragment = new MenuFragment();  
        fragmentTransaction.add(R.id.layout_container, menufragment, "menufragment");      
        fragmentTransaction.commit();

        } 
```

**OnClick 方法，在 Activity 内部**：

```
 public void OnMenuClick() {

AlbumsFragment albumsfragment = new AlbumsFragment(); 
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.replace(R.id.layout_container, albumsfragment, "albumsfragment");
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit();

} 
```

**我的片段类代码：**

```
public class MenuFragment extends ListFragment{

ArrayList<MenuItem> m_parts = new ArrayList<MenuItem>();

     @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            MenuAdapter m_adapter;

            m_parts.add(new MenuItem ("item1"));
            m_parts.add(new MenuItem ("item2"));
            m_parts.add(new MenuItem ("item3"));
            m_parts.add(new MenuItem ("item4"));

            m_adapter = new MenuAdapter(getActivity(), R.layout.menu_row, m_parts);
            setListAdapter(m_adapter); 
```

因此，每次我从 AlbumFragment 回到 MenuFragment 时，MenuFragment 中的列表都会随着 item1、item2、item3、item4 的再次添加而增长。

我尝试`if (savedInstanceState == null)`在 MenuFragment 的事务之前添加检查，但没有改变任何东西。

我应该怎么做才能使 MenuFragment 从后面的 Stack 弹出而不会再次被这些项目充气？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:31:32.327

看看[Fragment 生命周期](http://developer.android.com/guide/topics/fundamentals/fragments.html#Creating)。`onActivityCreated()`每次返回 a 时都会调用`Fragment`。相反，尝试将您的实现移动到`onCreate()`这应该可以解决您的重复问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:00:13.617

可能您还可以检查 arraylist 的大小，然后在填充 arrayList 之前在 onActivityCreated() 上清除它。

```
 if(m_parts != null && m_parts.size()>0){

        //Clear the contents of the arrayList m_parts

          m_parts.clear();
       } 
```

然后将数据添加到arrayList。

# delphi - 当我在过程的参数中使用“const”时，它有什么区别？

> ID：11001477
> 
> 赞同：19
> 
> 时间：2012-06-12T17:12:23.203
> 
> 标签：delphi, parameters, constants

`const`当我在过程中使用参数时，它有什么不同？

以以下过程为例：

```
procedure DoSomething(Sender: TObject; const Text: String; var Reply: String);
begin
  //Text is read-only and Reply will be passed back wherever DoSomething() was called
  Reply:= Text;
end; 
```

该参数`Text: String`带有前缀，`const`以便（据我所知）制作和使用该值的副本 - 并且是只读的。我想知道的是，这对应用程序的影响与我没有放在`const`那里有何不同？也许是表演技巧？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T17:30:24.663

查看[文档](http://docwiki.embarcadero.com/RADStudio/en/Parameters_%28Delphi%29#Constant_Parameters)状态：

“使用 const 允许编译器优化结构化和字符串类型参数的代码。它还提供了一种保护措施，防止无意中通过引用另一个例程来传递参数。”

例如，在字符串的情况下，优化意味着在作为 const 传递时没有额外的引用计数。同样作为 const 传递**并不**意味着它是一个副本。通常它在内部作为引用传递，因为编译器确保没有对它的写访问。

一些非常有趣的文章可以完全理解幕后发生的事情：

[http://delphitools.info/2010/07/28/all-hail-the-const-parameters](http://delphitools.info/2010/07/28/all-hail-the-const-parameters)

[http://vcldeveloper.com/articles/different-function-parameter-modifiers-in-delphi](http://vcldeveloper.com/articles/different-function-parameter-modifiers-in-delphi)

编辑：

一个简单的例子表明 const 可能会导致内部引用传递：

```
program Project1;

{$APPTYPE CONSOLE}

type
  PMyRecord = ^TMyRecord;
  TMyRecord = record
    Value1: Cardinal;
    Value2: Cardinal;
  end;

procedure PassAsConst(const r: TMyRecord);
begin
  PMyRecord(@r).Value1 := 3333;
  PMyRecord(@r).Value2 := 4444;
end;

procedure PassByVal(r: TMyRecord);
begin
  PMyRecord(@r).Value1 := 3333;
  PMyRecord(@r).Value2 := 4444;
end;

var
  r: TMyRecord;
begin
  r.Value1 := 1111;
  r.Value2 := 2222;
  PassByVal(r);
  Writeln(r.Value1);
  Writeln(r.Value2);

  PassAsConst(r);
  Writeln(r.Value1);
  Writeln(r.Value2);

  Readln;
end. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T17:26:16.933

当您没有 const 前缀时，编译器必须假定您将更改参数。这意味着复制它并设置一个隐藏的尝试...最终处理本地字符串变量，因此有时 const 可以产生显着的性能改进。它还使生成的代码更小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:02:16.550

除了前面关于使用 const 时效率的答案（即编译器不需要复制变量）之外，如果您使用带接口参数的 const，它会阻止触发 ref 计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-16T19:29:48.370

当您`const string`在函数中使用参数时，您向 Delphi 编译器承诺您不会从中调用任何其他函数，至少在您将所有这些`const string`参数复制到您将拥有的局部变量之前不会。

[https://github.com/the-Arioch/XE2_AutoOpenUnit/blob/master/Delphi_String_Bug/Girli_str_2xFree_Minimized.dpr](https://github.com/the-Arioch/XE2_AutoOpenUnit/blob/master/Delphi_String_Bug/Girli_str_2xFree_Minimized.dpr)

[https://plus.google.com/+AriochThe/posts/WB3toSpAdfA](https://plus.google.com/+AriochThe/posts/WB3toSpAdfA)

```
program Girli_str_2xFree_Minimized;

{$APPTYPE CONSOLE}

// initial mini-demo by Ãèðëèîíàéëüäî - http://www.sql.ru/forum/memberinfo.aspx?mid=249076
// variance IfDef's re-added by Arioch (orginal reporter)

uses
  SysUtils;

{.$Define TestBug_Impl_Exit}
{.$Define TestBug_Impl_AsIs}

{.$Define NewStr_Unique}

var
  rFile: string; 
// global or local does not matter.
// originally it was an object member.

{$IfNDef TestBug_Impl_Exit} {$IfNDef TestBug_Impl_AsIs}
function TestBUG(const S: string): string;
begin
  Result := S;
end;
{$EndIf}{$EndIf}

{$IfDef TestBug_Impl_AsIs}
procedure TestBUG(const S: string; var Result: string);
begin
  Result := S;
end;
{$EndIf}

{$IfDef TestBug_Impl_Exit}
function TestBUG(const S: string): string;
begin
  Exit(S);
end;
{$EndIf}

procedure Test(const FileName: string);
{$IfDef TestBug_Impl_AsIs} var unnamed_temp: string; {$EndIf}
begin

// rFile := FileName.SubString(0, Length(FileName));  // unavail in XE2

{$IfNDef NewStr_Unique}
  rFile := Copy(FileName, 1, Length(FileName));
  // reference-counting broken, de facto writes into const-string (destroys it)
{$Else}
  rFile := FileName; // no bug, reference-counting proceeded normally!
  UniqueString(rFile);
{$EndIf}

{$IfNDef TestBug_Impl_AsIs}
  TestBUG(FileName); // try to use the const-pointer to the old string
{$Else}
  TestBUG(FileName, unnamed_temp);
{$EndIf}
end; // <== Fatality here

begin
  try
    try
      rFile := ParamStr(0);
      Test(rFile);

      Writeln('Safely returned from the hazardous function without memory dislocations.');

    except
      on E: Exception do
        Writeln(E.ClassName, ': ', E.Message);
    end;
  finally
    Writeln;
    Writeln('Read the output. Press ENTER to terminate the program.');
    Readln;
  end;
end. 
```

由于 volatile string 和 const string 实际上是两种不同的类型——经典编译器对它们的处理方式不同——应该添加数据转换：当调用 const-string 函数时传递它 volatile-string 参数 Delphi 可以增加使用计数器并减少它函数退出后。将 const-strings 参数向下传递到下一个 const-string 函数就是现在的样子，一旦编译器将 volatile 字符串类型转换为 const 字符串，它就可以保持不变。

可悲的是，事实并非如此。这里是龙。

因此，如果您的函数具有 const 字符串参数 - 要么不要从中调用，要么将这些参数缓存到本地变量中。

# asp.net-mvc-3 - 是否可以使用 jira 和 ant 在 asp.net mvc3 中创建构建

> ID：11001478
> 
> 赞同：0
> 
> 时间：2012-06-12T17:12:29.207
> 
> 标签：asp.net-mvc-3, ant, build, jira

我正在使用 ant 和 jira 为 asp.net mvc3 项目之一进行日常构建，我为此搜索了很多论坛，但我找不到任何解决方案，

是否可以在服务器上使用 ant 和 jira（或任何其他工具）创建每日构建，结果如下

```
www.example.com/build1
www.example.com/build2
www.example.com/build3
... 
```

每个构建都应该工作

等待回复

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:23:19.140

你想要的是持续集成。你可能想和哈德森或詹金斯一起去。然后，您可以使用 ant 或 microsoft 构建工具来每天或每小时或为您构建任何内容。

您可以跟踪构建，也可以使用特定 ID 部署构建等。

使用 JIRA，您可以跟踪错误等。

# c# - HTC Radar 不支持 Motion API？

> ID：11001479
> 
> 赞同：0
> 
> 时间：2012-06-12T17:12:39.703
> 
> 标签：c#, windows-phone-7, xaml, augmented-reality

我一直在开发一个使用增强现实的应用程序。这是最基本的例子。我完全按照本[教程](http://msdn.microsoft.com/en-us/library/hh202984%28v=vs.92%29.aspx)进行操作，当我在 HTC Radar 上运行应用程序时，我收到一个弹出窗口，上面写着“此设备不支持 Motion API”。我检查了手机能够运行 AR 应用程序的先决条件，我认为我的手机支持一切（WP7.5 Mango，...），但我可能错了。有谁知道这个问题是否有任何解决方法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:13:05.587

在我的专业意见中，HTC Radar 支持运动 API。事实上，我已经开发了一个使用这个 api 的应用程序，它在 HTC Radar 上运行良好。你的手机是在哪里买的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:44:41.143

如果您按照本教程进行操作，则可能与您检查 API 是否受支持有关。

```
 // Check to see whether the Motion API is supported on the device.
  if (! Motion.IsSupported)
  {
    MessageBox.Show("the Motion API is not supported on this device.");
    return;
  } 
```

# c++ - 模板化转换构造函数无法访问受保护的数据成员

> ID：11001480
> 
> 赞同：2
> 
> 时间：2012-06-12T17:12:44.513
> 
> 标签：c++, templates, constructor

我有一个带有转换构造函数的模板类 Rect，它允许 Rect 到 Rect 之间的转换，反之亦然。但是在编译代码时，编译器会给出一个错误，说明构造函数无法访问类的受保护成员。这是代码：

```
#include <iostream>
#include <list>
#include <algorithm>

using namespace std;

template< typename T >
class Rect{
protected:
  T width, height;
public:
  Rect(T a, T b){
    width = a;
    height = b;
  }
  template< typename U >
  Rect(Rect<U> const &r){
    width = r.width;
    height = r.height;
  }
  int area(){
    return width*height;
  }
};

int main(){
  Rect<int> a(3,4);
  Rect<float> b(a);
  cout<<b.area()<<endl;
} 
```

这是编译错误：

```
test.cpp: In constructor ‘Rect<T>::Rect(const Rect<U>&) [with U = int, T = float]’:
test.cpp:28:18:   instantiated from here
test.cpp:10:7: error: ‘int Rect<int>::width’ is protected
test.cpp:18:5: error: within this context
test.cpp:10:14: error: ‘int Rect<int>::height’ is protected
test.cpp:19:5: error: within this context 
```

我想在不使用模板专业化和结交朋友类的情况下解决这个问题。据我所知，您不能将构造函数声明为朋友。有任何想法吗？

**编辑：**我已经对语义进行了更正。所以我试图构建的构造函数实际上是一个转换构造函数。

**Edit2：**更正了程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:15:11.250

您应该知道的第一件事是*模板构造函数*永远不是*复制构造函数*。第二件事是不同的不相关的类在哪里，就像 a`Rect<T>`和an一样不相关。`Rect<U>``T != U``std::string``std::vector`

您应该提供一些访问`width`and的方法`height`，并且您的*转换构造函数*应该使用这种访​​问方法来创建新的`Rect`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T17:26:03.587

正如 K-ballo 所提到的，`Rect<int>`并且`Rect<float>`是不同的类型，并且无法访问彼此的私有成员和受保护成员。您可以通过将以下模板朋友声明添加到您的类中来明确允许这一点（[就像这样](http://ideone.com/DGajI)）：

```
template <typename U> friend class Rect; 
```

从语义上讲，这意味着“对于任何类型`U`，让类`Rect<U>`访问我的私有成员和受保护成员”——它是从每个`Rect`实例化到每个其他`Rect`实例化的传出权限授予。

`width`请注意，如果您为and添加访问器（正如 K-ballo 建议的那样），这将不是必需`height`的 - 然后您可以在转换构造函数中使用这些访问器并完全放弃朋友定义。我更喜欢他的解决方案而不是我的解决方案；我给我的只是作为另一种可能的选择，并向您介绍一个您可能不熟悉的概念（朋友，特别是模板朋友）。

# r - 来自 R 中的 ftsa 包的 error() 中的 giveall=TRUE 返回错误

> ID：11001484
> 
> 赞同：0
> 
> 时间：2012-06-12T17:12:52.220
> 
> 标签：r, time-series, forecasting

我正在尝试使用 R CRAN ftsa 包中的 error() 函数。当我设置选项 giveall=TRUE 时，返回所有可用方法的结果，R 输出为：

```
Error en length(insampletrue)  : insampletrue' is lost 
```

我尝试了错误函数帮助站点提供的示例，

```
error(forecast = 1:5, forecastbench = 6:10, true = 11:15, method = "mrae") 
```

将其更改为：

```
error(forecast = 1:5, forecastbench = 6:10, true = 11:15, giveall=TRUE) 
```

但我得到了同样的结果。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:28:49.293

感谢您提请我注意这个问题。ftsa:::mase、ftsa:::mdase 和 ftsa:::rmsse 函数中的错误函数存在编码错误。缺少一个参数，当 giveall = TRUE 时显示错误消息。我将提交一个更新版本并将其上传到 cran。或者，欢迎发送电子邮件至 HanLin.Shang@gmail.com，我很乐意尽快将代码分发给您。

亲切的问候和非常感谢：韩

# php - 使用 Codeigniter 进行 PHP 路由（SEO 的 URL 中的标题）

> ID：11001485
> 
> 赞同：2
> 
> 时间：2012-06-12T17:12:56.417
> 
> 标签：php, codeigniter, routing

我有一些关于使用 Codeigniter 进行路由的问题。我现在正在做的事情如下：

```
$route['articles/(:num)'] = 'articles/view/$1'; // $1 will contain an ID 
```

这意味着 example.com/articles/123 将完美运行并加载 ID 为 123 的文章。但我也希望有可能将文章的标题添加到 URL（用于 SEO）。示例：example.com/articles/123/article-title

我想要的与 Stack Overflow 几乎相同：stackoverflow.com/questions/123/the-title

我怎样才能做到这一点？

我也想知道 Stack Overflow 是如何工作的。如果我转到 stackoverflow/questions/111，标题将自动添加到 url。这是用 php redirect() 完成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T17:33:44.190

我过去做过类似的事情；我找不到它知道，但 IIRC（几个月前）你可以像你一样使用一条路线，也可以添加一条更具体的路线，比如

```
$route['articles/(:num)/(:any)'] = 'articles/view/$1/$2';
$route['articles/(:num)'] = 'articles/view/$1'; 
```

如您所见，两者都映射到相同的方法，这有点“重载”；您可以使用默认值来弥补缺失的参数：

```
function articles($id,$slug = FALSE) 
{ } 
```

并简单地忽略文章检索中的第二个参数。

至于添加标题，您可以：

1.  在您的数据库中有一个“slug”字段，在保存文章时创建。您可以使用舒适的`url_title($title,'dash',TRUE)`功能（在 url 帮助程序中），该功能将`$title`、`dash`用作分隔符，并将其全部设为小写；
2.  使用上述函数并“即时”转换文章的标题（从数据库中检索后）；如果第二个参数不为假，只需检查 article() 方法，您就会知道是否需要创建 slug；

至于如何在没有它的情况下使用 url 时如何显示 slug，正如您所猜测的那样，您可以进行重定向，但是由于两条路由都指向相同的方法，因此它不会为您改变任何东西。

哦，嗯，​​在调用重定向时要小心循环，仔细检查；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:17:15.790

我建议您在表中创建一个 slug 字段，并使用要用作 id 的 url 完成它。让我解释。

你有这张桌子

```
id
title
slug 
```

当你将一篇文章保存到你的数据库中时，你可以动态地创建一个 slug，例如：

```
id: 1
title: My first post
slug: 1-my-first-post 
```

然后您可以使用页面的 slug（在本例中为 1-my-first-post）广告 id，您可以调用它：

```
www.example.com/articles/1-my-first-post 
```

显然你需要在你的数据库选择中处理它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:35:59.920

正如我们在评论中讨论的那样。

您可以多次创建路线并使用不同的参数，例如：

```
$route['articles/(:num)/(:any)']
$route['articles/(:num)'] 
```

我会创建一个带有重定向的函数，添加或不添加标题。

希望能帮助到你。

# javascript - 将 div 缩略图切换脚本与图像缩放脚本相结合

> ID：11001491
> 
> 赞同：1
> 
> 时间：2012-06-12T17:13:12.937
> 
> 标签：javascript, jquery, css, html, thumbnails

我正在尝试让 2 个不同的脚本一起工作..

*   一个是一个简单的缩略图切换脚本，它根据单击的缩略图更改大图像，来自[http://bonrouge.com/br.php?page=imageswitch](http://bonrouge.com/br.php?page=imageswitch)

*   另一个是图像缩放脚本，它根据鼠标悬停的位置缩放到更大的图像，来自[http://www.dynamicdrive.com/dynamicindex4/featuredzoomer.htm](http://www.dynamicdrive.com/dynamicindex4/featuredzoomer.htm)

问题是它总是显示第二张图像，无论缩略图是切换到第一张还是第二张。我认为这与 div 重叠或其他有关。

这是组合代码：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#image-switch ul {
margin:0 0 0 20px;
color:red;
list-style-type:none;
}
#image-switch li {
padding:10px;
}
#image-switch #two, #image-switch #three, #image-switch #four, #image-switch #five {
display:none;
}
#radiobs {
width:150px;
position:relative;
margin:0;
}
#radiobs input {
margin:0;
padding:0;
position:absolute;
margin-left:6em;
width:15px;
}
</style>
<style type="text/css">
.magnifyarea{ /* CSS to add shadow to magnified image. Optional */
box-shadow: 5px 5px 7px #818181;
-webkit-box-shadow: 5px 5px 7px #818181;
-moz-box-shadow: 5px 5px 7px #818181;
filter: progid:DXImageTransform.Microsoft.dropShadow(color=#818181, offX=5, offY=5, positive=true);
background: white;
}
</style>
</head>
<body>
<div id="image-switch">

<div class="fright">
<div id="one">
<img id="image1" src="redsmall.jpg" height="193" width="150" alt="redsmall" />
<p>This is a red one.</p>
</div>
<div id="two">
<img id="image2" src="bluesmall.jpg" height="193" width="150" alt="bluesmall" />
<p>This is a blue one.</p>
</div>
</div>
</div>

<ul>
<li><a onclick="switch1('one');">first frame</a></li>
<li><a onclick="switch1('two');">second frame</a></li>
</ul>
<div class="clear"></div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript" src="featuredimagezoomer.js"></script>

<script type="text/javascript">

jQuery(document).ready(function($){

$('#image1').addimagezoom({
    zoomrange: [3, 10],
    magnifiersize: [450,350],
    magnifierpos: 'right',
    cursorshade: true,
    largeimage: 'redbig.jpg' //<-- No comma after last option!
})

$('#image2').addimagezoom({
    zoomrange: [3, 10],
    magnifiersize: [450,350],
    magnifierpos: 'right',
    cursorshade: true,
    largeimage: 'bluebig.jpg' //<-- No comma after last option!
})

})

</script>

<script type="text/javascript">
function switch1(div) {
var options, obj, id; 
if (document.getElementById(div)) { // change this to div instead of 'one'
    options=['one','two','three','four'];
    for (var i=0; i<options.length; i++) { 
        id = options[i]; // caching the array item is good practice bc array/object     access is slow
        obj=document.getElementById(id);
        if (!obj) { continue; } // make sure the obj exists
        obj.style.display = (id === div) ? "block" : "none"; 
       }
   }
}
//
</script>
</body>
</html> 
```

如果有人知道出了什么问题，我保证我会以你的名字命名我的长子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:18:05.750

我注意到两件事是错误的：

**1：**

你`#image1`两次都用

```
jQuery(document).ready(function($){

    $('#image1').addimagezoom({
        zoomrange: [3, 10],
        magnifiersize: [450,350],
        magnifierpos: 'right',
        cursorshade: true,
        largeimage: 'redbig.jpg' //<-- No comma after last option!
    }); //use semicolons

    $('#image2').addimagezoom({ // **** image2 not image1!!! ****
        zoomrange: [3, 10],
        magnifiersize: [450,350],
        magnifierpos: 'right',
        cursorshade: true,
        largeimage: 'bluebig.jpg' //<-- No comma after last option!
    }); //use semicolons

}); //use semicolons 
```

**2：**

您需要检查 div 是否存在，而不是每次都检查 'one' 是否存在。我还进行了其他一些编辑（请参阅我在代码中的评论）。

```
var switch1;
(function($){ // let's use jQuery, its on the page anyway
    switch1 = function(div) {
        var options, $obj, id; 
        if ($('#' + div).length) { // change this to div instead of 'one'
            options=['one','two','three','four'];
            for (var i=0; i<options.length; i++) { 
                id = options[i]; // caching the array item is good practice bc array/object access is slow
                $obj=$('#' + id);
                if (!$obj.length) { continue; } // make sure the obj exists
                $obj.css({
                    "display": id === div ? "block" : "none",
                    "left": id === div ? "0" : "10000px"
                });
            }
        }
    }
})(jQuery); 
```

**编辑：** 由于您现在看到两者，我认为我们需要确保将隐藏的图像移出屏幕（然后我们将它们移回）。为此，请在 css 规则之后添加更新：

```
#two, #three, #four, #five { /* using two id selectors in a row is unnecessary */
    display: none;
    position: relative;
    left: 10000px; /* move them wayyy off screen. */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:14:11.770

在这里，您调用了两个图像：

```
 <img id="image1" src="redsmall.jpg" height="193" width="150" alt="redsmall" /> 
  <img id="image2" src="bluesmall.jpg" height="193" width="150" alt="bluesmall" />

These two images should be seen as you only applied zoom feature using jQuery.
 Probably,in style section..you need to make some modifications.

 Following seems to be erratic work. 
                <li><a onclick="switch1('one');">first frame</a></li>

  Here,this shud be da way
                <a=" " onclick="switch1();"> or <a=# onclick="switch1();">

Moreover,U got all divs stored in options..so u dun need div to be passed.
U can refer to option[index]..And also, document.getElementById(img).src would be         required.

I amnt providing you the code.But hope these informations help you.. 
```

# php - php://input 文件上传？

> ID：11001498
> 
> 赞同：6
> 
> 时间：2012-06-12T17:13:34.997
> 
> 标签：php, file-upload, input

我正在尝试使用 PHP 分块上传视频文件。（而且我们都知道 PHP 对此有多么神奇）下面是我的测试代码：

```
echo "<form action='' method='post' enctype='multipart/form-data'>";
echo "<input name='video' type='file' />";
echo "<input type='submit' value='UPLOAD' />";
echo "</form>";

if (isset($_POST['video']))
{
    $putdata = fopen("php://input", "r");
    $fp = fopen("assets/video/test.mp4", "w");

    while ($data = fread($putdata, 1024))
    {
        echo $data;
        fwrite($fp, $data);
    }

    echo "<h1>DONE! (hopefully)</h1>";

    fclose($fp);
    fclose($putdata);
} 
```

当 I 时`echo $data;`，我没有得到文件的内容——相反，我只得到`video=video.mp4`,`video.mp4`是我尝试上传的文件的名称。这是怎么回事？:( 我如何获得实际文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:43:12.923

客户端库应该用于像这样的分块上传，例如[PLUpload](http://www.plupload.com/)。

# grails - Grails：getClass().getResource("whatever") 不起作用

> ID：11001501
> 
> 赞同：2
> 
> 时间：2012-06-12T17:13:53.140
> 
> 标签：grails, resources, classpath

如何在 Grails 中使用 getResource(String) 加载文件？

类和文件位置：

```
- grails-app
  - utils
    - MyClass.groovy
    - myfile.jks 
```

有了以下我得到`null`

```
MyClass.class.getResource('myfile.jks')
MyClass.class.getResource('/myfile.jks')
MyClass.class.getResource('/grails-app/utils/myfile.jks')
MyClass.class.getResource('/utils/myfile.jks') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:00:56.560

我通常会`grails-app/conf`在类路径上的目录中抛出类似的文件。那么你应该可以使用`MyClass.class.getResource('/myfile.jks')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:22:14.633

您需要将资源文件放到类路径中。一种快速的方法是将它放在项目的 src/java 目录中。

# .net - 从 .NET 与 BizTalk 通信

> ID：11001505
> 
> 赞同：0
> 
> 时间：2012-06-12T17:14:14.310
> 
> 标签：.net, biztalk

我们即将开始一个项目，我们将需要通过我们现有的 .NET 代码与外部 Biztalk 服务器进行通信。我的第一个假设是，为了做到这一点，我们需要使用提供的标准soap 适配器，但是，我听说因为我们使用的是.NET，所以还有其他更有效的连接技术可用。

诚然，我目前对Biztalk的了解非常有限，所以我想知道是否有人可以指出一些相关信息？

谢谢大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T18:41:09.853

可能最简单的方法是通过 MSMQ 将 XML 消息直接发送到 BizTalk。这是最好和最轻量级的解决方案：

1.  根据消息模式完全按照您的需要生成 XML 消息
2.  创建一个简单的队列客户端来对消息进行排队
3.  通过 MSMQ 适配器在 BizTalk 中配置接收位置以接收消息

使用 .NET 代码可以轻松实现第 1 步和第 2 步。

# objective-c - 未调用 AFNetworking 数据获取方法

> ID：11001507
> 
> 赞同：0
> 
> 时间：2012-06-12T17:14:16.647
> 
> 标签：objective-c, ios, rest, asynchronous, afnetworking

我正在创建一个应用程序，在第一个视图中，用户可以选择登录或注册。在注册视图中是 a `UITableViewCell`，当单击它时，会将用户带到包含 a`UITableView`和 a的视图`UIPickerView`。`UITableView`工作正常，但是`UIPickerView`应该动态提取它应该使用网络调用显示的数据的 正在显示，但看起来完全空白。加上几句`NSLog`话，我注意到模型中使用拉取数据的方法`AFNetworking`永远不会被调用。我已经为`UIPickerViewDelegate`and`UIPickerViewDataSource`方法发布了下面的代码，以及应该在模型中提取数据的方法。提前致谢。

**UIPickerViewDelegate**

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row 
            forComponent:(NSInteger)component {
    return [[self.brain classChoicesForSignUp] objectAtIndex:row];
} 
```

**UIPickerViewDataSource**

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView 
numberOfRowsInComponent:(NSInteger)component {
    size_t numberOfRows = [self.brain classChoicesForSignUp].count;

    NSLog(@"Number of Rows: %@", [[NSNumber numberWithFloat:numberOfRows] stringValue]);

    return numberOfRows;
} 
```

**注册PickerBrain.m**

```
#import "SignUpPickerBrain.h"
#import "AFJSONRequestOperation.h"

@implementation SignUpPickerBrain

#pragma mark - Picker Data

- (NSArray *)classChoicesForSignUp {
    NSLog(@"Class choices method called");
    // Note that in my code, the actual URL is present here.
    NSURL *url = [NSURL URLWithString:@"the URL"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"Success!");
        NSLog([JSON description]);
    } failure:nil];

    [operation start];
    [operation waitUntilFinished];
    NSLog([operation responseJSON]);
    return [operation responseJSON];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:16:20.403

此代码示例中有很多反模式。我强烈建议不要使用您当前的方法，并考虑以下几点：

*   做网络**异步**，即不要使用`[operation waitUntilFinished];`. 每当你创建一个发出网络请求的方法时，给它一个块参数，一旦结果进来就可以用作回调。
*   将您的结果存储在控制器等的数组属性中，并使用它来驱动您的委托和数据源。在您当前的方法中，您将在每次显示一行时执行一个网络请求（！）。因此，相反，初始化为一个空数组，一旦新结果设置为该属性，重新加载数据源。一个异步请求。简单的。
*   摆脱`SignUpPickerBrain`. 要么使用合适的模型，要么只在 Controller 中自己调用。示例 iOS 项目有一些很好的模式可供遵循。
*   使用`AFHTTPClient`. 如果您正在与特定的 Web 服务进行交互，那么拥有一个`AFHTTPClient`子类来处理所有这些请求会非常有用。

# linux - 通过 putty.exe 在 Windows 命令行上运行 shell 脚本（带参数）

> ID：11001508
> 
> 赞同：4
> 
> 时间：2012-06-12T17:14:26.320
> 
> 标签：linux, bash, batch-file, putty

我需要执行一个批处理脚本，它在 Linux 机器内远程运行 shell 脚本。

现在，一切正常，但是如果我尝试为shell 脚本提供**命令行参数，则脚本无法执行。**

工作->前

> C:\temp\Testing>putty.exe -pw "blabla" -m "test-script.sh" bob@10.20.110.57

但是，如果我尝试给出论点，它将无法执行。例子：

**不工作**

> C:\temp\Testing>putty.exe -pw "blabla" -m "test-script.sh **ok-1** " bob@10.20.110.57

```
 where ok-1 = command line argument for local script test-script.sh 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T22:26:47.733

`putty.exe`您可以使用`pscp`and `plink`（PuTTY 附带的实用程序）来执行此操作，而不是使用。使用这样的命令：

```
pscp.exe -pw "blabla" test-script.sh bob@10.20.110.57:/some/path/ 
```

将脚本复制到远程服务器，然后使用如下命令：

```
plink.exe -ssh -pw "blabla" bob@10.20.110.57 /some/path/test-script.sh ok-1 
```

执行它。

# css - dojo RangeSlider 手柄位置错误

> ID：11001512
> 
> 赞同：1
> 
> 时间：2012-06-12T17:14:48.490
> 
> 标签：css, dojo, position, rangeslider

我正在尝试整理一个包含一些图表的网页，以及一些 RangeSlider 小部件来控制图表的数据范围和粒度。我创建了一些元素来保存各种导航项，并且正处于我想要放置 RangeSlider 的位置。一切正常，除了当我单击手柄之间的阴影条，向左或向右移动两个手柄时，手柄会跳到滑块的右侧，并停留在那里。

我很确定这是由于我的 div 的绝对/相对定位与滑块组件之间的不兼容，但我正在努力让它工作。如果我只是放置没有任何 div 样式的滑块，则滑块可以工作，但不是我想要的。

下面列出了整个文件。它只有大约 80 行，包括我的样式信息。为了简单起见，我将它附加到 div，而不是从外部 .css 文件中绘制它。要试用它，您需要调整到 dojo 组件的路径。

比我更有经验的人可能很快就可以确定范围，但我似乎无法将 dojo 要求与我自己的要求相协调。

谢谢。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>Errlog Chart for Single Host</title>
    <style type="text/css">
        @import "1.7.src/dojo/resources/dojo.css";
        @import "1.7.src/dijit/themes/tundra/tundra.css";
        @import "1.7.src/dijit/themes/dijit.css";
        @import "1.7.src/dijit/tests/css/dijitTests.css";
        @import "1.7.src/dojox/form/resources/RangeSlider.css";
    </style>

    <script type="text/javascript" src="1.7.src/dojo/dojo.js" djConfig="isDebug:true, parseOnLoad: true"></script>
    <script type="text/javascript">
        dojo.require("dojox.form.RangeSlider");
        dojo.require("dijit.form.HorizontalRule");
        dojo.require("dijit.form.HorizontalRuleLabels");
    </script>
</head>
<body class="tundra">
<div id='header' style="width:100%;
    background: #FC8;
    position: absolute;
    height: 30px;
    top: 0;">header</div>
<div id='middle' style="width:100%;
    background: #8FC;
    position: absolute;
    top: 30px;
    bottom: 30px;">
  <div id='left' style="background: #C8F;
    position: absolute;
    left: 0;
    top: 0;
    width: 25%;
    height: 100%;">
  </div>
  <div id='right' style="background: #CF8;
    position: absolute;
    left: 25%;
    top: 0;
    width: 75%;
    height: 100%;">
  <div id='charts' style="background: #DF7;
  position: absolute;
  width: 100%;
  top:0;
  height:60%;">
CHARTS GO HERE
  </div>
  <div id='sliders' style="background: #BF9;
  position: absolute;
  width: 100%;
  bottom:0;
  height:40%;">
SLIDERS GO HERE
    <div 
        id="hrSlider" 
        discreteValues="11"
        onChange="dojo.byId('minValue').value=dojo.number.format(arguments[0][0]/100,{places:1,pattern:'#%'});dojo.byId('maxValue').value=dojo.number.format(arguments[0][1]/100,{places:1,pattern:'#%'});"
        value="20,80" 
        intermediateChanges="true"
        style="width:500px;" 
        dojoType="dojox.form.HorizontalRangeSlider">
        <ol dojoType="dijit.form.HorizontalRuleLabels" container="topDecoration" style="height:1.2em;font-size:75%;color:gray;" count="11" constraints="{pattern:'#.00%'}"></ol>
        <div dojoType="dijit.form.HorizontalRule" container="topDecoration" count=11 style="height:10px;margin-bottom:-5px;"></div>
    </div>
    Horizontal Slider Min Value:<input readonly id="minValue" size="10" value="20.0%"/><br/>
    Horizontal Slider Max Value:<input readonly id="maxValue" size="10" value="80.0%"/><br/>
  </div>
  </div>
</div>
<div id='footer' style="width:100%;
    background: #8CF;
    position: absolute;
    height: 30px;
    bottom: 0;">footer</div>
<script type="text/javascript">
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T12:44:11.010

如果 min 和 max 之间的差异不能被离散值整除，则会出现奇数偏移。由于您没有设置 min max，它们默认为 0 和 100。即 101 个值，不能被 11 整除

# javascript - 正则表达式不允许连续使用多个特殊字符

> ID：11001513
> 
> 赞同：-4
> 
> 时间：2012-06-12T17:14:48.910
> 
> 标签：javascript, regex

我需要一个不允许连续出现多个特殊字符的正则表达式。

例如：

'this is a test' = 有效输入
'this, is a test' = 有效输入
'.......' = not valid input
'this,, is a test' = 无效输入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T17:18:02.030

根据您定义“特殊字符”的方式，您可以使用：

```
var valid = !str.match(/[^a-z0-9\s]{2}/i); 
```

* * *

更新后的规格：

> 对于这个，“特殊”字符是`,._-'"`

```
var valid = !str.match(/[-,._'"]{2}/i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:23:48.853

为什么需要正则表达式来执行此操作？

```
 var is_special_character = function(ch) { ... }

 var is_valid = function(str) {
   var special_characters = 0;
   for(var i = 0; i < str.length; i++) {
     if(is_special_character(str[i]))
       special_characters++;
     else  
       special_characters = 0;
     if(special_characters > 1) return false;
   }
   return true;
 } 
```

# c++ - boost库的编译问题

> ID：11001514
> 
> 赞同：2
> 
> 时间：2012-06-12T17:14:51.157
> 
> 标签：c++, boost, linker-errors, undefined-reference, boost-regex

我正在尝试编译一些源代码。然而，它抛出了一些与 boost 库相关的错误。这是错误

```
undefined reference to `boost::re_detail::get_mem_block()'
main.cpp:(.text+0x40a6): undefined reference to `boost::re_detail::verify_options(unsigned int, boost::regex_constants::_match_flags)'
main.cpp:(.text+0x40db): undefined reference to `boost::re_detail::put_mem_block(void*)'
main.cpp:(.text+0x430a): undefined reference to `boost::re_detail::put_mem_block(void*)'
main.o: In function `_ZN7Command12createVectorIdEEvRKSsRSt6vectorIT_SaIS4_EES4_.constprop.1207':
main.cpp:(.text+0x436e): undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
main.cpp:(.text+0x439f): undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
main.cpp:(.text+0x43d0): undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits< 
```

我的系统中安装了 boost regex 库，我使用 -L 选项给出了库的路径，并使用 -lboost_regex 选项指定了库。可能是什么问题？

它确实找到了图书馆。但仍然抛出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-16T02:32:24.343

我遇到了同样的问题，已经解决了。所以也许你之前安装了旧版本的 boost，链接器链接了旧版本。

尝试删除所有已安装的boost库，然后重新安装boost库，您的问题将得到解决。

# lucene - 读取现有 Lucene 索引的元数据

> ID：11001516
> 
> 赞同：4
> 
> 时间：2012-06-12T17:14:58.943
> 
> 标签：lucene, indexing, metadata, analyzer

是否可以通过读取现有的 Lucene 索引来找出字段上使用了哪些分析器/标记器？如果是，请告诉我如何。寻找某种可能与索引一起存储的元数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:07:09.177

Lucene 不存储这些信息。如果您希望以后能够使用它，您需要自己存储它。

# c# - 忽略缺失的列

> ID：11001517
> 
> 赞同：2
> 
> 时间：2012-06-12T17:15:00.063
> 
> 标签：c#, asp.net, sql-server-2008, ibatis

如何忽略 iBatis resultMap 上的缺失列？

如果我有这个映射器

```
<resultMap id="DBEntity" class="CS_Entity">
    <result property="Id" column="Id" />
    <result property="Field1" column="f1" />
    <result property="Field2" column="f2" />
</resultMap> 
```

对于某些查询，我想返回列 f2，但是如何在不为所有其他查询添加具有默认值的字段 f2 的情况下声明。

有一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:18:42.753

使用两个 resultsMap 之一`f2`

```
<resultMap id="DBEntityWithF2" class="CS_Entity">
    <result property="Id" column="Id" />
    <result property="Field1" column="f1" />
    <result property="Field2" column="f2" />
</resultMap> 
```

另一个没有`f2`

```
<resultMap id="DBEntity" class="CS_Entity">
    <result property="Id" column="Id" />
    <result property="Field1" column="f1" />
</resultMap> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:03:30.500

您可以简单地`"select f2 as Field2 from yourTable"`在您的 sql 中使用，并在您的配置中使用`resultClass="CS_Entity"`而不是使用。`resultMap`这样，您就不需要像上面那样声明映射了。

# ruby-on-rails - Rails：结合 3 个选择下拉菜单来修改模型的 1 个属性

> ID：11001524
> 
> 赞同：0
> 
> 时间：2012-06-12T17:15:23.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

所以通常我`date_select`在我的模型表单中的 Rails 应用程序中使用帮助程序，但在我正在构建的最新应用程序中，我需要为每个下拉列表（月、日、年）指定单独的 css id，这不是可能与`date_select`. 所以相反，我一直在使用`select_month`,`select_day`和`select_year`helpers 。问题来了：如何让它们都描述`datetime`我数据库中的一条记录？

（顺便说一句，我已经看过[这个问题](https://stackoverflow.com/questions/5657902/in-rails-how-to-combine-values-from-three-drop-downs-into-a-single-record-for-a)，但它对我来说似乎毫无用处。另外，我不想做一些 jQuery 的东西来处理这个问题。）

这是我到目前为止所拥有的：

```
#default_time_for is just a helper method that returns the default time for the specified "period" of time (month,day,etc.)

<%= select_month(default_time_for(:month)) %>
<%= select_day(default_time_for(:day)) %> 
<%= select_year(default_time_for(:year), {:start_year => Time.now.year-18, :end_year => 1930}) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:21:46.233

我会在服务器端组合它们：

```
require 'date'

def update
  date = Date.parse(params[:year] + params[:month] + params[:day])

  # Add to object and save
end 
```

您仍然可以进行批量分配，假设这`date`是您要分配的字段，您可以执行以下操作：

```
def update
  date = Date.parse(params[:year] + params[:month] + params[:day])
  params = params.merge( { :user => { :date => date }})

  @user = User.find(params[:id])
  if @user.update_attributes(params)
    # save was good
  else
    # save was bad
  end
end 
```

**如果您要使用上面的代码，还要确保您熟悉并减轻了[Mass Assignment 发出的安全性问题。](http://guides.rubyonrails.org/security.html#mass-assignment)**

# c# - 如何使用正则表达式从由 ,\n 分隔的文本文件中获取特定值？

> ID：11001538
> 
> 赞同：1
> 
> 时间：2012-06-12T17:16:06.710
> 
> 标签：c#, regex, string, parsing, substring

我有一个如下的 SQL 脚本，用于用一些数据填充 db 表。然后我在 VS2010 中使用 C# 中的 StreamReader 读取此文件。我想知道的是，一旦我将此文件作为字符串读入，如何将每个单独的参数拆分为子字符串？

所以理想情况下，我想要将每个单独的 VALUE 参数读入它自己的单独子字符串，以便我可以处理它。

SQL 脚本：

...

```
INSERT INTO [dbo].[My_Table] ( \n My_ID, \n My_Title, \n My_Message \n ) VALUES ( \n 40, \n 'Hello, This is the message title', \n 'Hello, This is \n the message body' \n )

INSERT INTO [dbo].[My_Table] ( \n My_ID, \n My_Title, \n My_Message \n ) VALUES ( \n 41, \n 'Hello again, This is another message title', \n 'Hello again, This is \n another message body' \n ) 
```

我目前正在调试它并尝试几种不同的方法，一种使用 String.Split() ，另一种使用 Regex 方法。

这是我的 C# 代码：

```
// this is to find the VALUES parameters in the SQL file
private static readonly Regex matchValues = new Regex(@".*?VALUES.*?\((.*?)\)",
RegexOptions.Compiled | RegexOptions.IgnoreCase | RegexOptions.CultureInvariant
|RegexOptions.Singleline);

// fileText is the string object containing the raw text read in from the SQL file
public static string FindMatches(string fileText)
{
    List<Match> matches = matchValues.Matches(fileText).Cast<Match>().ToList();

    foreach (Match match in matches)
    {
         string value = match.Groups[1].Value;
         string pattern = @"^,$";

         // do work

         string[] delimiters = new string[] { ",\n" };

         string[] splitGroup = value.Split(delimiters, StringSplitOptions.None);

         string[] split = Regex.Split(value, pattern);

     }
} 
```

因此，如果我可以简要解释这段代码，matchValues 正则表达式会为我找到插入参数的值，并且工作正常。（注意我已经用 \n 字符更新了 SQL 文件，以显示文件的布局以及读取时它是如何存储在字符串变量中的）。请注意，在 My_Message 值中可以有 ',' 和 '\n' 情况。但是，每个参数的结尾可以由 ',\n' 唯一标识，但我无法让它在正则表达式中工作，并且 String.Split() 只能使用 1 个字符。

由于我在 SQL 脚本中有超过 50 个条目，因此列表包含每个发现的匹配项的每个案例，因此我需要将每个插入语句中的每个单独的 ID、标题和消息拆分为嵌套在循环中的 3 个单独的变量。

目前 splitGroup[] 字符串对象返回了太多子字符串，因为我们在参数值中有新行，而使用正则表达式的 split[] 字符串对象只是将其全部作为一个字符串返回。

我希望这个更新的信息是有帮助的。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:21:42.517

您可以设置 RegexOptions 以匹配数据多行，这意味着正则表达式将匹配美元符号 $ 与行尾而不是字符串结尾。这是代码：

```
string strRegex = @"^Regex Test";
RegexOptions myRegexOptions = RegexOptions.Multiline;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"Regex Test for stackoverflow.";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:30:31.750

你也可以使用[`String.Split`](http://msdn.microsoft.com/en-us/library/ms131448%28v=vs.100%29)：

```
var inserts = File.ReadLines(path)
         .Where(l => l.IndexOf("VALUES (") > -1)
         .Select(l => new
         {
             SQL = l,
             Params = l.Substring(l.IndexOf("VALUES (") + 8)
                       .Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
         });
foreach (var insert in inserts)
{
    String sql = insert.SQL;
    String[] parameter = insert.Params;
} 
```

# android - MultiChoiceModeListener 导致 SherlockListFragment 出现问题

> ID：11001539
> 
> 赞同：7
> 
> 时间：2012-06-12T17:16:12.550
> 
> 标签：android, actionbarsherlock, android-actionbar, android-listfragment

因此，我正在阅读[这个较早的问题](https://stackoverflow.com/questions/10251095/change-listview-choicemode-from-singlechoice-to-multiplechoicemodal)，以了解如何允许我单击列表中的项目以执行一项操作或长按该项目以切换到 ActionMode，我可以在其中选择多个项目并使用 ActionBar 做某事到那些项目。但是，我对[这个答案](https://stackoverflow.com/a/10463373/539731)有疑问。具体来说，我将其实现为 SherlockListFragment（使用 ActionBarSherlock）。然而，当我声明一个新的 MultiChoiceModeListener 时，Eclipse 会抛出一些编译错误。

```
Description Resource    Path    Location    Type
Cannot override the final method from SherlockListFragment  DateTimeListFragment.java   /path/to/my/project line 127    Java Problem
The method inflate(int, Menu) in the type MenuInflater is not applicable for the arguments (int, Menu)  DateTimeListFragment.java   /path/to/my/project line 125    Java Problem 
```

这些在我删除 MultiChoiceModeListener 的那一刻就消失了。我不知道是什么原因造成的，因为我知道没有什么奇怪的事情发生。

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
        //super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.alarmsmenu, menu); //line 125
    }
    public boolean onOptionsItemSelected(MenuItem Item) //line 127
    {
        switch(Item.getItemId())
        {
        case R.id.addAlarm:
            addAlarm();
            return true;
        case R.id.editAlarms:
            return true;
        default:
            return super.onOptionsItemSelected(Item);
        }       
    } 
```

我很困惑。为什么实现 MultiChoiceModeListener 意味着我不能覆盖 OnOptionsItemSelected？

**编辑：**为了帮助澄清，这是我的进口。

```
import java.util.Calendar;
import java.util.GregorianCalendar;
import android.app.DatePickerDialog;
import android.app.TimePickerDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.*;
import android.support.v4.content.Loader;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView.MultiChoiceModeListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.DatePicker;
import android.widget.ListView;
import android.widget.TimePicker;

import com.actionbarsherlock.app.SherlockListFragment;
import com.actionbarsherlock.app.ActionBar; //Yes, it's unused...
import com.actionbarsherlock.view.*;
import com.commonsware.cwac.loaderex.acl.*; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T02:07:06.970

[一位来自 reddit 的好心人通知我](http://www.reddit.com/r/androiddev/comments/v0rim/its_always_sad_when_you_ask_a_question_on/c50fuoy)，显然 ActionBarSherlock 目前不支持 MultiChoiceModeListener。当听众想要原生 Android 菜单时，我使用 ActionBarSherlock 的菜单这一事实可能也导致了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:37:34.010

如果您使用的是 Eclipse，我会删除您的所有`import`指令，然后点击`Ctrl`++ （对于 Mac而言是`Shift`++ ），并根据冲突非常小心地选择导入。`o``Cmd``Shift``o`

我目前的 SherlockActivites，诚然不使用碎片正在做：

```
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem; 
```

当我将我`Activity`的 s 转换为`SherlockActivity`s 时，我确实遇到了你所描述的确切问题。

**编辑：**将`MultiChoiceModeListener`接口添加到我的类会导致生成如下方法：

```
public boolean onActionItemClicked( ActionMode mode, android.view.MenuItem item )
{
  // TODO Auto-generated method stub
  return false;
} 
```

请注意，MenuItem 是完全限定的。这可能是这里的一个线索。也许您正试图将 Sherlock 菜单传递给需要 Android 菜单的东西。

我想我的建议是尝试限定所有可能发生冲突的调用，然后在确定哪些方法被错误调用后，从那里开始。

例如，更改：

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) 
```

到：

```
public void onCreateOptionsMenu(Fully.Qualified.Path.Menu menu, MenuInflater inflater) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T01:09:11.283

确保您正在导入这两个类，而不是 vanilla android 版本：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem; 
```

另外，我会尝试导入 ActionBarSherlock[演示项目](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ActionItems.java)，看看 ActionItem 示例是否在那里工作。

# ninject - SignalR 依赖解析器无法在 Javascript 集线器上运行

> ID：11001541
> 
> 赞同：3
> 
> 时间：2012-06-12T17:16:16.337
> 
> 标签：ninject, signalr

我最近升级到了优秀的 SignalR 库的新版本，并将我所有的依赖注入从 StructureMap 移到了 Ninject，因为 Ninject 似乎得到了更好的支持。

我已经使用此处描述的“从集线器外部通过集线器广播”的服务器端通知的依赖注入工作正常：[https](https://github.com/SignalR/SignalR/wiki/Hubs) ://github.com/SignalR/SignalR/wiki/Hubs 。

我遇到的问题是来自 Javascript 集线器的所有 SignalR 消息似乎都没有触发依赖注入。

我也在使用 MVC4 WebAPI，它也需要一些努力才能使依赖注入工作。

这是我的集线器：

```
public class PresenceHub : Hub, IPresenceHub
{
    private readonly IUserRepository _userRepository;
    private readonly IFormsAuthenticationProvider _formsAuthenticationProvider;

    public PresenceHub(IFormsAuthenticationProvider formsAuthenticationProvider, IUserRepository userRepository)
    {
        _userRepository = userRepository;
        _formsAuthenticationProvider = formsAuthenticationProvider;
    }

    public void PresenceChange(string presence)
    {
        var user = _userRepository.FindById(_formsAuthenticationProvider.GetUserId());
        var rosterEntry = Mapper.Map<User, RosterEntryDto>(user);
        rosterEntry.Presence = presence;
        Clients.updatePresence(rosterEntry);
    }
} 
```

这是我的 Ninject 引导程序：

```
Namespace SLx.Web.App_Start
{
using System;
using System.Web;

using Microsoft.Web.Infrastructure.DynamicModuleHelper;

using Ninject;
using Ninject.Web.Common;

public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        // SignalR Ninject Resolver
        GlobalHost.DependencyResolver = new SignalR.Ninject.NinjectDependencyResolver(kernel);

        // WebApi Ninject Resolver
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);

        RegisterServices(kernel);
        return kernel;
    }

    private static void RegisterServices(IKernel kernel)
    {

    }        
} 
```

我通过如下定义的 PresenceProxy 通知服务器端的客户端：

```
public class PresenceHubProxy : IPresenceHubProxy
{
    private readonly IHubContext _hubContext;

    public PresenceHubProxy()
    {
        _hubContext = GlobalHost.ConnectionManager.GetHubContext<PresenceHub>();
    }

    public void NotifyLogin(RosterEntryDto user)
    {
        _hubContext.Clients.updatePresence(user);
    }

    public void NotifyLogout(RosterEntryDto user)
    {
        _hubContext.Clients.updatePresence(user);
    }
} 
```

代理工作正常，注入到控制器或其依赖项中，并且可以向客户端发送消息。

当客户端尝试通过 Javascript 调用 SignalR 时，我收到以下错误：

```
No parameterless constructor defined for this object. 
```

看起来 Ninject 没有被调用，因为依赖项没有被注入到构造函数中。我需要做什么才能让依赖注入也适用于 Javascript 调用？

更新 -

根据 DFowler 的建议，我已经替换了 PostApplicationStart 中的解析器。调试我可以在即时窗口中看到 SignalR.GlobalHost.Resolver 的类型为 NinjectDependencyResolver 但它仍然无法正常工作我得到同样的错误 - 没有无参数的构造函数。

然后，我删除了 NinjectDependencyResolver NuGet 库并将源文件添加到我的解决方案中，并将其用于调试目的。对 GetService 和 GetServices 的调试表明在 NinjectDependencyResolver 中从未调用过这两种方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:58:40.230

问题是我没有调用 RouteTable.Routes.MapHubs：

```
GlobalHost.DependencyResolver = new SignalRNinjectResolver(NinjectWebCommon.Kernel);
RouteTable.Routes.MapHubs(new SignalRNinjectResolver(NinjectWebCommon.Kernel)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:19:43.653

从文档[https://github.com/SignalR/SignalR/wiki/Extensibility](https://github.com/SignalR/SignalR/wiki/Extensibility)：

注意：不要覆盖 PreApplicationStart 中的全局解析器，它不会起作用，或者它只会在某些时候起作用。在 PostApplicationStart（使用 WebActivator）或 Global.asax 中进行。

# android - 如何使用 Ignition HTTP 类发出 Get 请求？

> ID：11001545
> 
> 赞同：0
> 
> 时间：2012-06-12T17:16:25.727
> 
> 标签：android

的文档`[Ignition][1]`相当稀疏。我正在查看 HTTP 类的文档，例如[link here](http://mttkay.github.com/ignition-docs/ignition-support/apidocs/)，但我很困惑。

我当前的代码看起来像这样（经过清理的版本）：

```
client = AndroidHttpClient.newInstance(MyConstants.USER_AGENT);
String url = SaveConstants.MY_URL;
url += "?" + MyConstants.MY_PARAMETER + "=" + parameterValue;
HttpGet request = new HttpGet(url);
InputStream contentStream = null;
try {
    HttpContext httpContext = new BasicHttpContext();
    HttpResponse response = client.execute(request, httpContext);
    contentStream = response.getEntity().getContent();
    String content = Util.inputStreamToString(contentStream);
} 
```

如何更改它以使用 Ignition 类？我有两个问题：

1.  我看不到如何初始化或使用 IgnatedHttpRequest。似乎没有构造函数和文档来解释此类的使用。
2.  IgnitedHttpRequest 可以使用 GET 请求，还是只使用 POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:19:08.173

使用 IgnatedHttp 类：[链接](http://mttkay.github.com/ignition-docs/ignition-support/apidocs/com/github/ignition/support/http/IgnitedHttp.html)

所以，

```
new IgnitedHttp(context).get("http://www.example.com") 
```

将返回您可以调用 send() 方法的 IgnitedHttpRequest 对象。

有关 IgnatedHttpRequest 的更多信息，请参阅：[链接](http://mttkay.github.com/ignition-docs/ignition-support/apidocs/com/github/ignition/support/http/IgnitedHttpRequest.html)

此 send() 将返回一个 IgnitedHttpResponse 对象，您可以调用该对象 getResponseBodyAsString()。

有关 IgnatedHttpResponse 的更多信息，请参阅： [链接](http://mttkay.github.com/ignition-docs/ignition-support/apidocs/com/github/ignition/support/http/IgnitedHttpResponse.html)

总而言之，

```
new IgnitedHttp(context).get(url).send().getResponseBodyAsString() 
```

是你第一个问题的答案。您的第二个问题的答案是 IgniteHttp 也有用于发布、放置等的方法。

这是您可能想做的很多事情的示例活动：[https ://github.com/mttkay/ignition/blob/master/ignition-support/ignition-support-samples/src/com/github/点火/样品/支持/IgnatedHttpSampleActivity.java](https://github.com/mttkay/ignition/blob/master/ignition-support/ignition-support-samples/src/com/github/ignition/samples/support/IgnitedHttpSampleActivity.java)

享受使用我找到的最好的代码。

# php - 覆盖wordpress的404页面

> ID：11001547
> 
> 赞同：1
> 
> 时间：2012-06-12T17:16:33.807
> 
> 标签：php, wordpress

我们有一个包含数百个 url 的数据库，我们希望为其显示类似的内容。但是我们不想在 wordpress 中制作数百页。

有没有一种方法可以覆盖/抑制 wordpress 404 页面以在此数据库中的所有 url 上显示页面（已创建）的内容。

我所需要的只是对一个 URL 执行此操作的代码，剩下的我就可以完成了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:43:45.417

在主题文件夹中使用`404.php`

这样您就可以找到被调用的 URL 并稍微自定义页面。

希望这会有所帮助，杰森

**[更新]**

我不明白为什么需要插件。在 404.php 模板中，您将拥有如下内容：

```
<?php 

get_header();

//Get called URL 
$url = $_SERVER['REQUEST_URI'];

//Some function to check database to see if this URL should exist
if(checkIfPageExists($url)) {
   //Page Code Here
} else {
   //404 Code Here
}

get_footer();

?> 
```

**[更新 2]**

修复状态码很容易：

```
<?php 

//Get called URL 
$url = $_SERVER['REQUEST_URI'];

//Some function to check database to see if this URL should exist
if(checkIfPageExists($url)) {
   //Set 200 Status
   status_header( "200" );
   //Get Header
   get_header();
   //Page Code Here
} else {
   //Set 404 Status
   status_header( "404" );
   //Get Header
   get_header();
   //404 Code Here
}

get_footer();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:19:48.317

您可以在 htaccess 文件中使用 301 重定向

`RewriteRule ^your-db-url.html /your-redirect-page.html [L,R=301]`

您也可以编写一个脚本，以这种格式列出您的所有 url，然后将其复制并粘贴到您的 .htaccess 文件中，高于您的 wordpress 重写规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:39:10.947

您可以使用 htaccess。在您的 wordpress 安装中的 htaccess 文件顶部输入以下内容。404page.html 是您创建的错误页面。

```
ErrorDocument 404 /404page.html 
```

希望有帮助。

# testing - Trac 问题的测试经理

> ID：11001548
> 
> 赞同：1
> 
> 时间：2012-06-12T17:16:37.243
> 
> 标签：testing, trac

我正在寻找一种方法来更好地管理 Trac 中的测试用例列表。Trac的[测试管理器插件](http://trac-hacks.org/wiki/TestManagerForTracPlugin)似乎是显而易见的选择。

任何人都对 Trac 的测试管理器插件有经验、评论和/或疑虑？

我们还查看了[Testuff](http://www.testuff.com/)，它有一个很棒的“Test Runner”应用程序，它与 Trac 集成以创建票证。但是，它将所有测试用例、实验室等存储在其服务器上。我真的很想为文档、票据和测试提供一个单一的目的地（即 Trac）。

我们今天使用 SnagIt 进行屏幕捕获和注释。我们正在查看 Windows 中的问题步骤记录器。我们希望找到可以将捕获发送到 Trac 的东西，类似于 Testuff-Trac 集成。

对于可以通过每次鼠标单击和按键记录来捕获视频/图像的应用程序有什么建议吗？奖励：将捕获附加到新的 Trac 票证中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:48:47.820

要捕获电影并上传到 Trac，请尝试[http://www.bbtestassistant.com/](http://www.bbtestassistant.com/)

对于单个屏幕截图、注释和上传到 Trac，请尝试[http://fat-bug.com](http://fat-bug.com)

我还为 Cropper 编写了一个插件[http://cropper.codeplex.com/](http://cropper.codeplex.com/)，它可以让你上传图片，但它不支持像胖虫一样的事先注释。让我知道你是否想要一份副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:29:25.560

我们在我之前的一个项目中使用了 Test Manager Plugin For Trac，我可以说它对我们来说效果很好。它提供了测试用例和用户故事之间的双向可追溯性，支持测试计划（在我看来是执行计划，但与 wiki 页面合并成为测试计划），并且大多数 Trac 插件允许定制以满足过程需要。

# dynamics-crm - 使用模板创建电子邮件，然后附加动态附件

> ID：11001549
> 
> 赞同：4
> 
> 时间：2012-06-12T17:16:42.593
> 
> 标签：dynamics-crm, dynamics-crm-2011

我一直在尝试为我们的组织编写一些自定义工作流程，但我被困在一个特定的问题上。我知道如何创建附件并将它们链接到新电子邮件，但我想对模板做同样的事情？我了解如何使用 SendEmailFromTemplateRequest 类，但我还没有找到将附件链接到它的方法。我找到[了这篇文章](http://social.microsoft.com/Forums/en/crmdevelopment/thread/50573621-6334-4454-874a-54837e32ec8d) ，但我需要更多关于如何使用 InstantiateTemplateRequest 的详细信息。我试图[以此作为指导](http://www.resultondemand.nl/support/sdk/T_Microsoft_Crm_Sdk_Messages_InstantiateTemplateRequest.htm)来修补它，但到目前为止我还没有运气。

我的需求是我需要从模板创建一封电子邮件，然后将动态生成的文件附加到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:42:43.163

[我在这里](http://blog.xrm-services.co.uk/?p=204)找到了我需要的东西，但我注意到我仍然需要使用 IOrganizationService 帮助器创建电子邮件对象。基本上，我创建了 InstantiateTemplateRequest，然后将其传递给 IOrganizationService Execute() 函数，然后从 InstantiateTemplateResponse 对象中检索到 Email 对象。收到电子邮件后，我对其进行编辑并将其传递给 IOrganizationService Create() 函数。之后，我使用 SendEmailRequest 对象发送它，该对象还需要 IOrganizationService Execute() 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:41:59.290

我不太确定您将如何实际使用这些模板。但是一种解决方法可能是您可以使用与发送附件相同的方式发送电子邮件。创建一些逻辑来获取模板的字符串内容，根据需要进行字符串处理操作（通常模板中只有少数字段需要修改，大部分文本保持不变）。现在将此字符串作为字符串传递给电子邮件的正文。我认为这不应该有任何麻烦。如果我遗漏了一些东西或误解了完整的问题，请纠正我。

# php - 使用jquery post创建模块时全局$user的Drupal 7范围

> ID：11001550
> 
> 赞同：1
> 
> 时间：2012-06-12T17:16:43.060
> 
> 标签：php, drupal-7, drupal-modules

我正在创建一个模块来填充我的 drupal 7 页面的正文。

我有 3 个正在使用的文件。

```
1\. league_settings.module
2\. league_settings.js
3\. league_settings.php 
```

League_settings.module 如下。

```
function league_settings_block_view($delta = '') {
    drupal_add_js(drupal_get_path('module', 'league_settings') .'/js/jquery.js');
    drupal_add_js(drupal_get_path('module', 'league_settings') .'/js/json2.js');
    drupal_add_js(drupal_get_path('module', 'league_settings') .'/js/livequery.js');
    drupal_add_js(drupal_get_path('module', 'league_settings') .'/js/leagueSettings.js');

    $block = array(
      'subject' => t('Enabled Modules'),
      'content' => 'this text works',
     );
       return $block;
    } 
```

League_settings.js 很简单

```
$.post('/modules/leage_settings/php/leagueSettings.php', 
    function(data){
    alert(data);
}); 
```

League_settings.php 是

```
global $user;
$name = $user->name;
echo $name; 
```

这将警告一个黑色文本框。如果我回显“测试”，它将正常工作。

目前，如果我的帖子上出现错误 500，我无法进行查询。我尝试将全局 $user 放入函数中无济于事。创建这样的模块是设置 php/js 文件以查询我的 drupal 数据库并编辑我的页面 html 的最佳方式吗？

# php - 来自 php 的 Jquery 响应，内置 javascript

> ID：11001554
> 
> 赞同：0
> 
> 时间：2012-06-12T17:16:56.010
> 
> 标签：php, javascript, jquery, ajax

我有这个 Javascript 函数，它通过 jquery 将用户名和密码发送到 php 文件，然后得到响应以显示文本，然后根据它是否成功，它将以绿色或红色显示。（绿色成功，红色 - 其他）：

```
function get() {
            $("#message").hide();
            $.post("login-exec", {
            login: form.login.value,
            password: form.password.value
            },
                function(output) {
                    if($.trim(output) == "Login Successful"){
                        document.getElementById("message").style.color = 'green';
                        $("#message").html(output).fadeIn(2000);
                    }
                    else{
                        document.getElementById("message").style.color = 'red';
                        $("#message").html(output).fadeIn(2000);
                    }

                });
        } 
```

我想知道我是否可以使用 php 文件上的 style.color 执行此逻辑，然后只发送已经具有适当绿色、红色和文本响应的输出。就像以某种方式在响应中包含 javascript，然后将其解析出来以运行 javascript 代码以及消息文本。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:21:34.633

您可以使用 css 更改样式颜色，如[http://jsfiddle.net/TLkMF/](http://jsfiddle.net/TLkMF/)中所示。

如果 PHP`output`在小提琴中返回变量的 json，它应该做你想要的。

如果您还想设置消息文本，那么您可以按照[http://jsfiddle.net/TLkMF/1/中的说明进行操作](http://jsfiddle.net/TLkMF/1/)

# c# - 按下“X”按钮时允许取消

> ID：11001569
> 
> 赞同：2
> 
> 时间：2012-06-12T17:17:43.550
> 
> 标签：c#, wpf, xaml

当用户在主窗口中按下“X”时，我会出现这个对话框：

```
 -- Save Changes --------------------------
|                                          |
|  Do you want to save changes?            |
|                                          |
|                                          |
|    |Don't Save|      |Cance|   |Save|    |
|__________________________________________| 
```

我在实现“取消”按钮时遇到问题。我不知道在用户点击取消后如何告诉主窗口不要关闭。我通过窗口的“关闭”命令/方法向用户提示此对话框。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T17:21:43.997

在结束事件中，您需要将事件属性设置`Cancel`为 true。

```
 void DataWindow_Closing(object sender, CancelEventArgs e)
    {
        MessageBox.Show("Closing called");

        // If data is dirty, notify user and ask for a response
        if (this.isDataDirty)
        {
            string msg = "Data is dirty. Close without saving?";
            MessageBoxResult result = 
              MessageBox.Show(
                msg, 
                "Data App", 
                MessageBoxButton.YesNo, 
                MessageBoxImage.Warning);
            if (result == MessageBoxResult.No)
            {
                // If user doesn't want to close, cancel closure
                e.Cancel = true;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T17:20:53.620

被调用的处理程序方法有一个表示事件 args 的参数（类型为[CancelEventArgs](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.aspx)，我们称之为它`e`。`e.Cancel = true`在处理程序内部设置以防止默认行为。

# cakephp - cakephp 插件调用我已经设置好的模型

> ID：11001575
> 
> 赞同：0
> 
> 时间：2012-06-12T17:17:56.747
> 
> 标签：cakephp, plugins

在我的 cakePHP 应用程序中，我正在实现 Miles Johson 的论坛插件 (http://milesj.me/code/cakephp/forum)。

它在插件中创建一个名为 Profile 的模型。我的普通应用程序中已经有一个名为 Profile 的模型，因此在使用论坛时出现了很多错误。将这两种模型合二为一似乎不是一个好的选择，因为它们用于非常不同的目的。

有没有一种简单的方法来更改插件中的模型名称，而无需花费数小时搜索“Profile”或“Forum.Profile”的每个实例并将其更改为“ForumProfile”和“Forum.ForumProfile”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:12:48.253

您可以尝试向您的 database.php 添加另一个连接，例如“forums”并将其配置为使用前缀“forums_”。在 ForumsAppModel 中覆盖构造函数并使用您的论坛连接和前缀。您需要在所有论坛表前加上“forums_”。

我不明白为什么论坛插件没有直接使用表格和所有内容的前缀完成。

# windows - 在 Windows 上创建高度可定制的安装程序

> ID：11001578
> 
> 赞同：1
> 
> 时间：2012-06-12T17:18:02.530
> 
> 标签：windows, installation

哪些安装程序选项可让您为 Windows 创建高度自定义的安装程序？我尝试过 Visual Studio 和 Advanced Installer，它们对用户不友好，也不是完全可定制的。

用户友好是指易于添加文件并根据需要进行注册表更改。通过定制，我的意思是易于编辑安装对话框等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:26:07.730

NSIS 是一个非常好的安装程序，但如果您的目标是 MSI 包，则可能无济于事。

因为您尝试了 Visual Studio 和 Advanced Installer，我觉得您正在尝试创建一个基本 MSI 包。所以我会记住这一点。

Installshield有许多类型的项目：

> 基本微星
> 
> 安装脚本（非 MSI）
> 
> 安装脚本 MSI

使用 Basic MSI，您基本上只能使用 Windows Installer 引擎。您的 UI 与 Windows Installer 允许的一样可自定义。这意味着不多。

Installscript 项目非常灵活，您可以在其中做很多事情。您可以创建对话框或从外部资源 dll 等导入它...但这是一个非 MSI 类型的项目。

我不会尝试 Installscript MSI。

如果您想要真正的灵活性，请使用众多可用解决方案中的任何一种来创建您自己的 UI。VC++、.NET C# Winforms、WPF、Python 等...

自定义 UI 解决方案可以根据需要灵活地进行。如果您记住一件事，这将很有效：

> UI 序列仅用于收集用户输入。不得进行任何系统更改。

因此，您可以使用自定义的精美 UI 解决方案来收集所有需要的信息，将信息存储在公共属性中，然后调用 MSI 包，将所有公共属性静默传递给它。你完成了。

你的两个目标：

> 用户友好性
> 
> 定制

很容易满足的话。

# java - 正则表达式语句

> ID：11001579
> 
> 赞同：1
> 
> 时间：2012-06-12T17:18:02.883
> 
> 标签：java, regex, text-files, java.util.scanner

我从来都不擅长正则表达式，我似乎无法得到这个......

我正在尝试按照这些行匹配语句（这是我正在阅读的文本文件中的两行）

```
Lname Fname 12.35 1
Jones Bananaman 7.1 3 
```

目前我正在使用这个while语句

```
reader.hasNext("\\w+ \\w+ \\d*\\.\\d{1,2} [0-5]") 
```

但它没有进入while语句。当我删除 while 时，程序可以很好地读取文本文件。代码段是这样的：

```
private void initializeFileData(){
    try {
        Scanner reader = new Scanner(openedPath);

        while(reader.hasNext("\\w+ \\w+ \\d*\\.\\d{1,2} [0-5]")){
            employeeInfo.add(new EmployeeFile(reader.next(), reader.next(), reader.nextDouble(), reader.nextInt(), new employeeRemove()));
        }
        for(EmployeeFile element: employeeInfo){
            output.add(element);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:36:44.473

对单词之间的空格使用`\s`字符类：

```
while(reader.hasNext("\\w+\\s\\w+\\s\\d*\\.\\d{1,2}\\s[0-5]")) 
```

**更新：**

根据`Scanner`该类的 javadoc，默认情况下它使用空格分割它的标记。您可以使用 的`useDelimiter(String pattern)`方法更改它使用的分隔符`Scanner`。

```
private void initializeFileData(){
    try {
        Scanner reader = new Scanner(openedPath).useDelimiter("\\n");
        ...
        while(reader.hasNext("\\w+\\s\\w+\\s\\d*\\.\\d{1,2}\\s[0-5]")){
        ... 
```

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:37:53.627

从我所看到的（如果我错了，请纠正我，因为正则表达式似乎总是欺骗我的大脑：p），你没有正确处理空格。您需要使用 \s，而不仅仅是标准的 ' ' 字符

编辑：对不起，\s。别人打败了我：p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:59:32.400

实际上

```
\w+ 
```

将要`[Lname, Fname, 12, 35, 1]`赶上`Lname Fname 12.35 1`。因此，您可以存储`reader.nextLine()`然后从那里提取所有正则表达式匹配项。从那里，您可以通过以下方式对其进行一些抽象：

```
class EmployeeFile {

 .....

     public EmployeeFile(String firstName, String lastName,
                         Double firstDouble, int firstInt,
                         EmployeeRemove er){
          .....
     }

     public EmployeeFile(String line) {
        //TODO : extract all the required info from the string array
        //       instead of doing it while reading at the same time. 
        //       Keep input parsing separate from input reading.
        //       Turn this into a string array using the regex pattern 
        //       mentioned above

     }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:07:07.037

我创建了自己的版本，没有文件和最后一个循环，就像这样：

```
private static void initializeFileData() {
        String[] testStrings = {"Lname Fname 12.35 1", "Jones Bananaman 7.1 3"};
        Pattern myPattern = Pattern.compile("(\\w+)\\s+(\\w+)\\s+(\\d*\\.\\d{1,2})\\s+([0-5])");
        for (String s : testStrings) {
            Matcher myMatcher = myPattern.matcher(s);
            if (myMatcher.groupCount() == 4) {
                String lastName = myMatcher.group(1);
                String firstName = myMatcher.group(2);
                double firstValue = Double.parseDouble(myMatcher.group(3) );
                int secondValue = Integer.parseInt(myMatcher.group(4));                
                //employeeInfo.add(new EmployeeFile(lastName, firstName, firstValue, secondValue, new employeeRemove()));
            }
        }
    } 
```

请注意，我删除了点之前的斜杠（您需要一个点，而不是任何字符）并插入括号，以创建组。

我希望它有所帮助。

# javascript - jQuery 自定义事件在全局范围内工作，但不在对象之间？

> ID：11001582
> 
> 赞同：0
> 
> 时间：2012-06-12T17:18:07.070
> 
> 标签：javascript, jquery, events

请在此处查看演示：http: [//jsfiddle.net/mA6qm/1/](http://jsfiddle.net/mA6qm/1/)（扩展控制台）

为什么两个对象之间没有发送或接收事件，但将相同的代码放在全局范围内时可以正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:33:15.783

问题是您将事件绑定到的对象与您触发它的对象不同。在`setTimeout`回调中，即使您定义为该对象上的方法，`this`也不会引用。相反，它将引用窗口。同样，当您绑定事件时，该事件被绑定在. 您需要确保两者都使用相同的对象。`calling_object``finished``listening_object`

# php - Array Rand 不使用 MySQL 获取数组

> ID：11001584
> 
> 赞同：0
> 
> 时间：2012-06-12T17:18:09.347
> 
> 标签：php, mysql, sql

我编写了一个从 MySQL 查询中检索值的 PHP 脚本。我使用 mysql_fetch_array 将结果添加到数组中。我正在尝试从数组中选择一个随机值，但是 array_rand 似乎不起作用。我的代码如下：

```
<?php 
session_start();
ob_start();
require_once 'includes/db_connection.php';
require_once 'includes/contest.php';
require_once 'includes/survey.php';
require_once 'includes/poll.php';
require_once 'includes/clients.php';
require_once 'includes/user.php';
//Select All Entries from Contest and Save as Array
//Select 
mysql_connect(localhost,s2ktest_s2kuser, Bc33iyZYQWgUmguBehPI);
$dbname = 's2ktest_s2k';
mysql_select_db($dbname);
$contestid = 20;
$query = "SELECT UserID FROM Contest_Entered WHERE ContestID = $contestid";
//Save Result
$result = mysql_query($query) or die(mysql_error());
//Save All Contest Entries in Array
$entries = mysql_fetch_array($result) or die(mysql_error());

//Output all Rows
//While Each Entry in the Array is a Value
while($entries = mysql_fetch_array($result))
{
echo $entries;
echo "</br>";
}
echo array_rand($entries);
//mysql_free_result($result);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:22:08.250

`mysql_fetch_array()`一次只检索一行。首先，使用 append 语法将整个结果集加载到一个数组中`[]`，然后从中随机获取。

```
$all_entries = array();
// Using MYSQL_NUM to retrieve only numeric keys
// by default, mysql_fetch_array() gets both numeric and associative keys
while($entries = mysql_fetch_array($result, MYSQL_NUM))
{
  // Append all rows onto an array, only a sinlge value so you get a 1D array 
  $all_entries[] = $entries[0];
}
// Then call array_rand() against $all_entries
echo array_rand($all_entries); 
```

### 免责声明：

开始考虑从旧`mysql_*()`函数迁移到支持预处理语句的现代 API。 [PDO](http://php.net/pdo)在 RDBMS 之间非常出色且可移植，而[MySQLi](http://php.net/mysqli)也是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:22:14.710

那是因为您在`$entries`开始循环时将值从数组更改为字符串。尝试`array_rand($entries)`在循环之前回显。

但是，如果您尝试从表中检索随机行（而不是从行中检索随机列，如您的代码所示）`ORDER BY RAND()`，请在查询中使用。目前还不清楚你要做什么。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:22:41.887

可能是因为你没有任何数组......当时只生成一行。

```
while($entries = mysql_fetch_array($result))
 {
  echo $entries;
  $arr[] = $entries;
  echo "</br>";
 }
 echo array_rand($arr); 
```

# javascript - 如何在 Blogspot 模板中拥有一个使用 Blogspot 变量的脚本？

> ID：11001586
> 
> 赞同：1
> 
> 时间：2012-06-12T17:18:12.230
> 
> 标签：javascript, blogger, blogspot

我有以下 Facebook iframe 作为模板的一部分：

```
<iframe allowTransparency='true' expr:src='&quot;http://www.facebook.com/plugins/like.php?href=&quot; + data:post.url + &quot;&amp;layout=standard&amp;show_faces=false&amp;width=100&amp;action=like&amp;font=arial&amp;colorscheme=light&quot;' frameborder='0' scrolling='no' style='border:none; overflow:hidden; width:576px; height:24px;'/> 
```

主要特点是它使用 Blogspot 变量`data:post.url`作为用户可以“喜欢”的链接。不幸的是，最近 blogspot 决定将人们重定向到他们当地的 blospot 地址，所以如果您`example.blogspot.com`在英国开业，您将被重定向到`example.blogspot.co.uk`，并且您看不到任何来自岛外的人。

显而易见的解决方法是让每个人都喜欢 .com 主页，所以我创建了一个脚本来动态生成这个 iframe：

```
<script type="text/javascript">
document.write("<iframe allowTransparency='true' frameborder='0' scrolling='no' src='http://www.facebook.com/plugins/like.php?href=");
var thisUrl = "data:post.url";
var beginning = thisUrl.indexOf("blogspot")+9;
var end = thisUrl.indexOf("/", 15);
document.write(thisUrl.substring(0, beginning));
document.write("com");//change regional url to com
document.write(thisUrl.substring(end));
document.write("&layout=standard&show_faces=false&width=100&action=like&font=arial&colorscheme=light' style='border:none; overflow:hidden; width:576px; height:24px;'></iframe>");
</script> 
```

为了让 Blogspot 接受它，我必须对它的部分进行 html-ecap，但我无法将变量`data:post.url`替换为正确的值 - 它实际上保持原样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:17:17.050

格热尼奥。

这不会直接回答您的问题，但您可以使用

替换`data:post.url`为`data:post.canonicalUrl`

这意味着您的所有喜欢等都将使用您博客的 .com 版本。

所以你不应该需要使用任何 javascript 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T11:46:36.320

要显示 Blogger 变量，您需要使用`<data:blog.varName/>`.

所以，在你的情况下，而不是：

```
var thisUrl = "data:post.url"; 
```

你需要使用：

```
var thisUrl = "<data:post.url/>"; 
```

UPD 1：如果您想在 head 部分使用页面 url，请使用`<data:blog.url/>`not `<data:post.url/>`。

UPD 2：但你为什么不使用`window.location`？

# android - 极其简单的 android 应用程序保持 FC'ing

> ID：11001588
> 
> 赞同：0
> 
> 时间：2012-06-12T17:18:15.477
> 
> 标签：android, forceclose

嘿，我刚开始涉足 android 编程，从我短暂的时间来看，我有点沮丧。我在 Eclipse 中不会出错，但是当我启动我的应用程序时，它会立即强制关闭。我正在逐字阅读android教程，但我仍然遇到错误。我的目标是在相对布局中创建一个列表视图。此外，由于某种原因，当我分配 p.firstName 或 p.lastName 时，它​​也会强制关闭，但无论如何这是我的代码。如果这有所作为，我正在使用 API 级别 15（即 Android 4.0.3）。

```
 package matthews.zack.test;
 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
   public class _testActivity extends Activity {

Button save;
People p = new People();
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //onInitialize();
}

private void onInitialize()
{
     save = (Button)findViewById(android.R.id.button1);
     save.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            EditText firstName = (EditText)findViewById(android.R.id.text1);
            EditText lastName = (EditText)findViewById(android.R.id.text2);
            p.setFirstName("Hai");//firstName.getText().toString());
            p.setLastName("Hi");//lastName.getText().toString());
            //((EditText)findViewById(android.R.id.text1)).setText("This the tune bada bing bada boom");
        }
    });
} 
```

}

`
这是我的 XML 代码

```
`<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width ="fill_parent"
android:layout_height = "fill_parent">
<TableLayout 
android:id="@+id/details"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" 
android:layout_alignParentBottom="true">

<TableRow>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/firstName" />

<EditText
    android:id="@+id/editText1"
    android:ems="10" 
/>
</TableRow>
<TableRow>
<TextView
android:id="@+id/textView2"
android:layout_width = "wrap_content"
android:layout_height="wrap_content"
android:text="@string/lastName" />
<EditText
    android:id="@+id/editText2"
     />
</TableRow>
<TableRow>
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/Save" />
</TableRow>
</TableLayout>

<ListView
 android:id = "@+id/listView1"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_alignParentTop="true"
 android:layout_above="@id/details"
 />

</RelativeLayout>

` 
```

这是我的错误输出

```
06-12 00:32:44.871: D/AndroidRuntime(30530): Shutting down VM
06-12 00:32:44.871: W/dalvikvm(30530): threadid=1: thread exiting with uncaught exception (group=0x40a3b1f8)
06-12 00:32:44.879: E/AndroidRuntime(30530): FATAL EXCEPTION: main
06-12 00:32:44.879: E/AndroidRuntime(30530): java.lang.RuntimeException: Unable to start activity ComponentInfo{matthews.zack.test/matthews.zack.test._testActivity}: java.lang.NullPointerException
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.os.Looper.loop(Looper.java:137)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at java.lang.reflect.Method.invokeNative(Native Method)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at java.lang.reflect.Method.invoke(Method.java:511)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at dalvik.system.NativeStart.main(Native Method)
06-12 00:32:44.879: E/AndroidRuntime(30530): Caused by: java.lang.NullPointerException
06-12 00:32:44.879: E/AndroidRuntime(30530):    at matthews.zack.test._testActivity.onInitialize(_testActivity.java:24)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at matthews.zack.test._testActivity.onCreate(_testActivity.java:18)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.Activity.performCreate(Activity.java:4465)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-12 00:32:44.879: E/AndroidRuntime(30530):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-12 00:32:44.879: E/AndroidRuntime(30530):    ... 11 more 
```

android会在不告诉我异常的情况下强制关闭，这有点令人沮丧。我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:22:12.137

您正在搜索`Button`使用错误的`id`. 它应该是：

```
save = (Button)findViewById(R.id.button1); 
```

此外，您正在为`EditText`. 像这样修改它：

```
EditText firstName = (EditText)findViewById(R.id.text1);
EditText lastName = (EditText)findViewById(R.id.text2); 
```

您唯一会使用`android.R.layout.some_id_here`的是当您使用定义的框架时`id`（例如，您将使用a 中布局中使用`android.R.id.list`的`ListView`元素`ListActivity`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T17:21:23.340

> android会在不告诉我异常的情况下强制关闭，这有点令人沮丧。

它就在日志中，它的 a`java.lang.RuntimeException`和进一步说

> 引起：java.lang.NullPointerException

您正在使用未在布局中定义`findViewById`的*id 。*该函数找不到具有该 ID 的任何视图并返回 null。您稍后尝试取消引用此类 null 并因此引发`NullPointerException`异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T17:22:27.000

`android.R.id.button1`应该`R.id.button1`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T17:24:23.010

这是错误：

```
save = (Button)findViewById(android.R.id.button1); 
```

你最好做这样的事情：

```
save = (Button)findViewById(R.id.button1); 
```

并导入正确的 R 文件：

```
import com.yournamespace.R; 
```

# c# - 使用矢量图形作为自定义表单形状

> ID：11001594
> 
> 赞同：1
> 
> 时间：2012-06-12T17:18:47.710
> 
> 标签：c#, wpf

是否可以在 WPF 应用程序中将矢量图形用作自定义表单形状，以便在用户想要调整应用程序大小时，可以动态重新计算和重绘矢量图形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:20:39.563

是的。事实上，WPF 中的大部分“绘图”API 已经是这种方式了。

[Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx)类及其子类提供了保留模式、基于矢量图形的绘图机制，可以轻松处理缩放和变换。有关详细信息，请参阅[形状和基本绘图](http://msdn.microsoft.com/en-us/library/ms747393.aspx)。

# html - 不能在其他 div 标签中居中 div

> ID：11001602
> 
> 赞同：2
> 
> 时间：2012-06-12T17:19:42.460
> 
> 标签：html, css

与这个斗争。一切似乎都很好，但我无法让内容在`<div id="contacts">`and`<div class="contacts2">`部分居中。

我错过了一些东西，并且盯着它看太久了，无法理解它。希望这里有人能发现我的问题。

* * *

[http://jsfiddle.net/mpAy2/](http://jsfiddle.net/mpAy2/)

这是代码：

```
<!--Start content wrapper--> 
<div id="content"> 
 <div id="contact_wrapper">

    <!--**************Glenn and Cathy*****************-->
     <div id="contacts">
       <p class="text6">Administrative Staff</p><br /><br />

    <div class="admin_list_img">
           <img src="../images/staff_students/glenn.jpg" alt="Image of Dr. Glenn Wilson" />
        </div>
        <div class="admin_list">
             <span class="text12b"><a href="http://www.usm.maine.edu/tech/glenn-wilson-0">Dr&#46; Glenn Wilson</a></span> <br/>Associate Professor of Technology&#44; Senior Research Scientist<br/><br/>
            Office&#58; 178 Science Building <br />Phone&#58; &#40;207&#41;780&#45;8045<br />Email&#58 <a href="mailto:gwilson@usm.maine.edu"> gwilson&#64;usm&#46;maine&#46;edu</a></div>

        <div class="admin_list_img">
             <img src="../images/staff_students/default3.jpg" alt="image of Cathy Virecci-Fana" />
        </div>
        <div class="admin_list">
             <span class="text12b">Cathy Virecci&#45;Fana</span> <br/>Grants&#44; Contracts and Projects Coordinator<br/><br/>
            Phone&#58; &#40;207&#41;780&#45;4782<br />Email&#58 <a href="mailto:gwilson@usm.maine.edu">cfana&#64;usm&#46;maine&#46;edu</a></span>
        </div>
     </div>

     <!--**************Clare Congdon and Bruce Macloed*****************-->
     <div class="contacts2">
       <p class="text6">Principle Investigators</p><br /><br />

        <div class="pi_list_img">
             <img src="../images/staff_students/default3.jpg" alt="default image" />
        </div>
        <div class="pi_list">
             <span class="text12b"><a href="http://www.usm.maine.edu/cos/clare-bates-congdon">Dr&#46; Clare Congdon</a></span> <br/>Associate Professor of Computer Science<br /><br/>
            Office&#58; 228 Science Building <br />Phone&#58; &#40;207&#41;228&#45;8441<br />Email&#58 <a href="mailto:gwilson@usm.maine.edu">congdon&#64;usm&#46;maine&#46;edu</a></p>
        </div>

        <div class="pi_list_img">
             <img src="../images/staff_students/default3.jpg" alt="default image" />
        </div>
        <div class="pi_list">
             <span class="text12b"><a href="http://www.usm.maine.edu/cos/bruce-macleod">Dr&#46; Bruce MacLeod</a></span> <br/>Associate Professor of Computer Science<br/><br/>
            Office&#58; 222 Science Building<br />Phone&#58; &#40;207&#41;780&#45;4285<br />Email&#58 <a href="mailto:gwilson@usm.maine.edu">macleod&#64;usm&#46;maine&#46;edu</a></p>
        </div>
    </div>

     <!--**************David Briggs and Carl Blue *****************-->
    <div class="contacts2">
        <div class="pi_list_img">
              <img src="../images/staff_students/default3.jpg" alt="default image" />
        </div>
        <div class="pi_list">
             <span class="text12b"><a href="http://www.usm.maine.edu/cos/david-briggs">Dr&#46; David Briggs</a></span> <br/>Associate Professor of Computer Science<br /><br/>
            Office&#58; 220 Science Building <br />Phone&#58; &#40;207&#41;780&#45;4723<br />Email&#58 <a href="mailto:briggs@usm.maine.edu">briggs&#64;usm&#46;maine&#46;edu</a></p>
        </div>

        <div class="pi_list_img">
             <img src="../images/staff_students/default3.jpg" alt="default image" />
        </div>
        <div class="pi_list">
             <span class="text12b"><a href="http://www.usm.maine.edu/tech/carl-blue">Dr&#46; Carl Blue</a></span> <br/>Associate Professor of Computer Science<br/><br/>
            Office&#58; Room 210 John Mitchell Center<br />Phone&#58; &#40;207&#41;780&#45;5391<br />Email&#58 <a href="mailto:cblue@usm.maine.edu">cblue&#64;usm&#46;maine&#46;edu</a></p>
        </div>
     </div>

     <!--**************David Bantz *****************-->
     <div class="contacts2">
        <div class="pi_list_img">
              <img src="../images/staff_students/default3.jpg" alt="default image" />
        </div>
        <div class="pi_list">
              <span class="text12b"><a href="http://www.usm.maine.edu/cos/david-bantz">Dr&#46; David Bantz</a></span> <br/>Adjunct Professor<br /><br/>
            Office&#58; 226 Science Building <br />Phone&#58; &#40;207&#41;780&#45;8440<br />Email&#58 <a href="mailto:bantz@usm.maine.edu">bantz&#64;usm&#46;maine&#46;edu</a></p>
        </div>
     </div>
 </div>
</div>
______________________

#content{
    width:100%;
    max-width: 1000px;
    height:100%;
    padding: 0px;
    margin-top: 0px;
    margin-bottom: 5px;
    margin-left: auto;
    margin-right: auto;
    text-align:center;
    background-color:#fff;
    border-top: 0px;
    position:relative;
    z-index:1px;
}

#contact_wrapper{
    width: 100%;
    min-width: 900px;
    height: 350px;
    position: relative;
    margin-left: auto;
    margin-right: auto;
    background-color: #333;
    text-align: center;
}

#contacts {
    height:250px;
    width:100%;
    min-width: 870px;
    font-family: arial,serif,Capitals,serif;
    font-size: 18px;
    margin-top: 25px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    text-align: center;
    top: 70px;
    background-color: #fff;
    border-bottom: solid 1px;
    border-top: solid 1px;
}

.text6 {
    font-size: 18px;
    font-family:arial,serif,Capitals,serif;
    font-weight:0;
    color: #000;
    text-align: left;
    margin-bottom: 0px;
    padding-bottom: 0px;
}

.admin_list{
    position: relative;
    text-align:left;
    font-size: 12px;
    float: left;
    width:23%;  
    height:150px;  
    background-color:#fff;
    padding:0px;
    margin: 0px 20px 0px 0px;
    vertical-align: middle;
}

.admin_list_img{
    position: relative;
    text-align:center;
    float: left;
    background-color:#fff;
    padding:0px;
    margin: 0px 20px 0px 20px;
    vertical-align: middle;
}

.contacts2 {
    height:200px;
    width:100%;
    min-width: 870px;
    font-family: arial,serif,Capitals,serif;
    font-size: 18px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    text-align: center;
    top: 70px;
    background-color: #fff;
    border-bottom: 0px;
    border-top: 0px;
}

.pi_list{
    position: relative;
    text-align:left;
    font-size: 12px;
    float: left;
    width:23%;  
    height:150px;  
    background-color:#fff;
    padding:0px;
    margin: 0px 20px 0px 0px;
    vertical-align: middle;
}

.pi_list_img{
    position: relative;
    text-align:center;
    float: left;
    background-color:#fff;
    padding:0px;
    margin: 0px 20px 0px 30px;
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:00:18.967

如果您删除`float: left`并添加`display: inline-block`到`.admin_list`, `.admin_list_img`, `.pi_list`,`.pi_list_img`它将居中。看起来您将不得不在行政部门内处理联系人的维度。

[http://jsfiddle.net/Wexcode/qbAAc/embedded/result/](http://jsfiddle.net/Wexcode/qbAAc/embedded/result/)

# bash - 只运行多个内联命令的第一个 Bash 命令

> ID：11001606
> 
> 赞同：0
> 
> 时间：2012-06-12T17:20:04.013
> 
> 标签：bash, ssh, sh

我有一个通过 SSH 运行某些命令的程序。一些命令是静态的（总是相同的），而另一些则具有在运行之间变化的参数。程序使用私钥连接服务器，锁定授权密钥强制执行命令“sh run_script.sh”。

run_script.sh 只会在 $SSH_ORIGINAL_COMMAND 匹配一组静态命令时运行，或者如果它以某种方式开始（对于非静态命令）。

问题是类似的东西

```
allowedCommand arg1 arg2 && rm -r ~/ 
```

很可能会溜走。

是否可以让 bash 只运行第一个命令，而忽略管道或 && 之后的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:02:55.280

您可能可以将包装脚本设置为登录 shell（而不是`/bin/bash`），并使用它`sed`或其他东西来去除不需要的部分。它可能会出现误报，并且对于包含空格和其他情况的参数可能会失败（请参阅[BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)）。

这种方法可能会引入无法预料的安全问题。

最好将`ssh`, `sudo`, 受限外壳等提供的安全功能`rbash`与操作系统提供的其他安全设施结合使用。

# linux - 按子列排序

> ID：11001608
> 
> 赞同：-1
> 
> 时间：2012-06-12T17:20:11.687
> 
> 标签：linux, bash

我真的需要你的帮助来完成这项任务。我有以下文本文件：

```
0001030111
0011030611
0003030113 
0002030112          
0006030311
0004030114       
0007030311
0012030612 
```

我想对第 7 列和第 8 列的结果进行排序，以获得类似的结果：

```
0001030111
0003030113
0002030112
0004030114
0006030311
0007030311
0011030611
0012030612
      ^^
      Sort by these positions. 
```

但是使用：

排序 +0.6 -1.9 -s setup.txt > sorted.txt

我得到的东西没有按我想要的顺序出现。（请参见下文）

```
0001030111
0002030112
0003030113
0004030114
0007030311
0006030311
0011030611
0012030612 
```

你能帮我解决这个问题吗？太谢谢了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:50:26.963

使用`0.n`符号（不带`-k`）进行排序时，请回想第一列中的第一个字符是 numbered `0.0`，并且规范`1.n`意味着由字段分隔值（默认空格字符）定义的第二列数据，也可以设置喜欢`-t":"`（不是在你的例子中）。

所以我认为您的问题的解决方案是（使用您熟悉的语法）

```
sort +0.6 -0.7 -s setup.txt > sorted.txt
#---------^^^^^--- note change here 
```

对不起，但我现在没有任何方法可以测试这个。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:37:46.700

要使用过时的语法，您可能需要设置一个环境变量来启用它：

```
_POSIX2_VERSION=201112 sort +0.6 -1.9 -s setup.txt > sorted.txt 
```

或使用现代语法：

```
sort -k1.7 -k1.8 -s setup.txt > sorted.txt 
```

# javascript - 设置与滚动位置相关的 div 不透明度

> ID：11001611
> 
> 赞同：2
> 
> 时间：2012-06-12T17:20:21.503
> 
> 标签：javascript, jquery, math

我正在尝试根据它们与滚动条位置的接近程度来设置一系列 div 的不透明度。

这就是我到目前为止所拥有的 - [http://jsfiddle.net/jGeYg/1/](http://jsfiddle.net/jGeYg/1/)

当您位于窗口顶部时，我已设法将不透明度设置为 0，当您到达 div 顶部时，它会提高到 1。

我想要实现的是，直到您在 div 上方 50px 并在您位于 div 顶部时达到完全不透明度时才开始提高不透明度。本质上它是不透明度变化的范围

```
$('div').position().top - 50 -> $('div').position().top //psuedo code 
```

我不想使用插件。我遇到了数学问题而不是代码问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:28:14.927

[http://jsfiddle.net/b9ZCk/3/](http://jsfiddle.net/b9ZCk/3/) 我添加了一些调试文本来显示位置和不透明度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:32:13.443

我不确定这是否是您想要的效果.. 但请尝试让我知道，

```
$(window).scroll(function() {
    var st = $(this).scrollTop();
    $('.block').each(function(index) {
        if (($(this).offset().top-st) < 50) {
            $(this).css({
                'opacity': (0 + (st / $(this).offset().top))
            });
        } else {
            $(this).css({'opacity': 0.1});
        }
    })
}); 
```

**演示：http:** [//jsfiddle.net/skram/jGeYg/5/](http://jsfiddle.net/skram/jGeYg/5/)

# jquery - （重新）将 JQuery Mobile 控件状态绑定到底层标记中设置的值

> ID：11001615
> 
> 赞同：1
> 
> 时间：2012-06-12T17:20:45.097
> 
> 标签：jquery, jquery-mobile

我正在使用 JQuery Mobile 1.1.0，但无法使基础列表选择与 JM 控件的呈现状态保持同步。这是一个例子：

这是正在使用的控件类型的示例。

```
<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
    <select name="taResidentYears" id="taResidentYears">
        <option selected="selected" value="">Years</option>
        <option value="0">0 Years</option>
        <option value="1">1 Year</option>
        <option value="2">2 Years</option>
    </select>
    <select name="taResidentMonths" id="taResidentMonths">
        <option selected="selected" value="">Months</option>
        <option value="0">0 Months</option>
        <option value="1">1 Month</option>
        <option value="2">2 Months</option>
    </select>
</fieldset> 
```

在正常的页面加载中，控件会正确呈现，然后可能会选择如下值...

![在此处输入图像描述](../Images/067f86042a9a90d204e4e2094d9b4523.png)

但是，在某些页面加载场景中，我有后台 JQuery 例程从存储在本地存储中的数据中设置每个**选择控件的值。**在这些场景中，JQuery Mobile 渲染不同步，即使实际设置了值，我也会得到以下结果。这些值表示待选择的值。

![在此处输入图像描述](../Images/0944e6ed313534018d6b7266a92b31d0.png)

就底层形式而言，所有值都是正确的，没有丢失任何东西。它只是不同步的视觉表示。

我可以做些什么来让 JM 控件重新绑定到基础值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:29:04.827

事实证明，我只需要确保我订购了脚本标签，以便 JQuery Mobile 位于列表的最后。在某些情况下，我需要调用关联的 JQuery`Refresh()`方法来重新绑定。

# c# - 流畅的 NHibernate 和 NLog

> ID：11001616
> 
> 赞同：4
> 
> 时间：2012-06-12T17:20:48.787
> 
> 标签：c#, nhibernate, fluent-nhibernate, nlog, onion-architecture

我的流畅配置中出现了一些模糊的错误。我已经读过设置日志记录解决方案将帮助我解决这个问题。我想使用 NLog。我知道我需要使用 Common.Logging 2.0 和 NHibernate.IInterfaceLogger 来启动和运行它。我只是不知道如何把这些碎片放在一起。我的系统基于洋葱架构。我为 NLog 设置了我的日志记录服务，并且我有我的接口，但我只是有点困惑我应该在哪里将所有这些绑定在一起。我的数据项目中存在我的 Fluent NHibernate 配置。我假设我想在那里将所有这些绑定在一起。

对此的任何想法都会很棒！我有点失落！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:32:58.180

[NHibernate.NLog](https://www.nuget.org/packages/NHibernate.NLog) nuget 包执行此操作。我现在在一个项目中使用它。

为了完整起见，或者如果该包消失或用户不使用 nuget。您将其添加到 FluentConfiguration 中：

```
.ExposeConfiguration(c =>
    {
        c.SetProperty(@"nhibernate-logger", @"Microfilm.Core.NLogFactory, Microfilm.Core");
    }) 
```

实现`ILoggerFactory`以返回实现的类`IInternalLogger`。方法中包含的内容非常简单`IInternalLogger`；您只是将 NHibernate 记录器的调用桥接到 NLog 调用。

# ios - 如何设置 UITableView 框架以填充弹出框

> ID：11001617
> 
> 赞同：0
> 
> 时间：2012-06-12T17:20:48.847
> 
> 标签：ios, uitableview, uipopovercontroller

我想用 UITableView 填充弹出框。弹出框的高度取决于设备的方向等。如何设置 UITableView 属性使其始终填充弹出框的可用大小，并在必要时垂直滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:56:25.210

@H2CO3 是正确的。

在您呈现弹出框时的操作中，执行以下操作：

```
mytableView.frame = myPopover.bounds; 
```

这样，您的表格视图将匹配它所在的弹出框。

然后，当您希望它滚动时，请执行以下操作：

```
[self.tableView setScrollEnabled:YES]; 
```

# javascript - 在 JavaScript (jQuery) 代码中使用 Accent

> ID：11001621
> 
> 赞同：1
> 
> 时间：2012-06-12T17:21:14.317
> 
> 标签：javascript, jquery, html

我在购物车脚本中有一些口音问题。这是我的 Javascript 代码的一部分：

```
//process product groups
        products.each(function(gid) {
            //create groups of products
            var gname = this.id.replace(/_/g, ' ');
            var gbutton = $('<a />',{'title':gname, 'prod_id':this.id,'href':'#'}).text(gname);
            $('<li/>').append(gbutton).appendTo(groups);

            //register onclick event for group link
            gbutton.click(function(e) {
                //make clicked group active
                groups.find('.active-group').removeClass('active-group');
                $(this).parent().addClass('active-group');
                //hide all groups 
                products.css('display','none');
                active_group = $('#' + $(this).attr('prod_id'), shop);
                //show only active group
                active_group.css({'top':0,'display':'block'});
                //animate products by shifting their top position and tweening opacity
                active_group.children('li').each(function(i){
                  $(this).css({'top':parseInt((i+settings.pageColumns)/settings.pageColumns)*settings.groupAnimationShift,'opacity':0});
                  $(this).delay(i*settings.groupAnimationStartDelay).
                  animate({'top':0,'opacity':1},settings.groupAnimationTime,settings.groupAnimationEasing);
                });
                //update number of pages
                active_group.current_page = 1;
                active_group.pages = Math.ceil(active_group.children('li').length / (settings.pageRows*settings.pageColumns));
                //update page scroll
                resetPageScroll();
                e.preventDefault();
            }); 
```

它与 HTML 中的 UL id 链接

前任。：

```
<ul id="Enseignes_Résidentielles">

                  <li class="product" name="RD-101" price="5" minimum="4" skip="4"> 
                         <a class="product-image fancybox" href="images/product_big.jpg" title="Picture 4">
                             <img src="images/product_2.png" alt="Preview"/>
                             <div class="text-overlay">
                              <p class="product-heading">Description</p>
                               Enseignes résidentielles imprimées sur 2 panneaux 4 mm 36” x 24” collés dos à dos.
                             </div>
                         </a>
                         <p class="product-heading">RD-101 (Simple)</p>
                         <a href="#" id="test" class="product-buy">Ajouter au panier</a>
                         <p class="product-meta">Double de pareterre 32x24</p>
                         <div class="product-price">18<span class="product-currency">$</span></div>

                    </li> 
```

当我向 UL id 添加重音符号和其他标点符号时，除了购物车 DIV 中的所有功能外，一切都正常工作......如果我的 UL id 不包含重音符号或其他 utf-8 字符，它工作正常。

知道为什么吗？知道如何解决这个问题吗？

* * *

编辑

这是现场项目...：[http](http://danalcoimpressions.com/remax/index.html) ://danalcoimpressions.com/remax/index.html 试试这个...在第一个选项卡（Enseignes Résidentielles）的任何项目中单击“Ajouter au panier”...悬停购物车选项卡并尝试添加或删除该类别中的项目，但它不起作用。但是在第二个标签（Enseignes Balcon）中尝试同样的事情，标签（UL）名称中没有重音......它在购物车中会很好用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:24:37.247

从[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:06:02.287

我认为问题在于这段代码：

```
function itemRemoveHandler(p) {
  //look for item in cart
  var filter = /(\w+)::(\w+)/.exec(p.id);
  delete cart[filter[1]][filter[2]]; 
```

JavaScript 对正则表达式中的 Unicode 字符的支持非常糟糕。特别是`\w`操作员不能正常工作。因此，匹配不起作用，所以`delete`换行符。

我不确定该建议什么作为解决方法。您可以将特殊字符排除在“id”值之外，或者使用正则表达式。

*编辑*——确定确认；正则表达式应用于字符串时，与重音字符不匹配。

# spring - 在 Tomcat 中的上下文之间转发请求

> ID：11001623
> 
> 赞同：5
> 
> 时间：2012-06-12T17:21:17.163
> 
> 标签：spring, tomcat, servlets, url-rewriting, tuckey-urlrewrite-filter

我希望能够使用 Tuckey URLRewrite 过滤器在 Tomcat 中进行跨上下文请求转发。例如，我希望能够使用像[http://example.com/group-elements/300245/some-descriptive-text](http://example.com/group-elements/300245/some-descriptive-text)这样的 SEO-/user-friendly URL 来路由传入请求，其中“group-elements " 不是已部署应用程序的名称，而是映射到应用程序 'foo' 的 Java Spring 控制器方法的 URL，例如[http://example.com/foo/app/group/300245/elements](http://example.com/foo/app/group/300245/elements)。我正在使用 Tomcat 7.0.27 和 URLRewrite 3.2.0；我正在使用 Java Spring 3.1 Web 应用程序。

[URLRewrite 3.20 文档](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/3.2/index.html#to)记录了“to”过滤器参数元素的可选“context”属性：

```
If your application server is configured to allow "cross context" communication then this attribute can be used to forward (and only forward, not redirect or other "to" types) requests to a named servlet context.

On Tomcat, for instance, the application contexts in the server configuration (server.xml or context.xml) need the option crossContext="true". For instance, the two applications mentioned before ("app" and "forum") have to be defined as:

<Context docBase="app" path="/app" reloadable="true" crossContext="true"/>
<Context docBase="forum" path="/forum" reloadable="true" crossContext="true"/> 
```

鉴于这一点以及[关于 feature 的原始讨论](http://code.google.com/p/urlrewritefilter/issues/detail?id=17)，'context' 属性似乎是我正在寻找的。但是，我无法正确启用跨上下文请求转发。

这是我在 conf/server.xml 中的“上下文”条目应用程序“foo”：

```
<Context docBase="foo" path="/foo" reloadable="true" crossContext="true"/> 
```

我在 webapps/ROOT/WEB-INF/ 中有我的 urlrewrite.xml 文件和 web.xml 文件。这是他们的样子：

urlrewrite.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 3.2//EN" 
"http://tuckey.org/res/dtds/urlrewrite3.2.dtd">

<urlrewrite>    
    <rule>
        <from>baz</from>
        <!-- Note: this 'to' element's value has an error.  See the edit at bottom of this post for corrected version. -->
        <to context="foo">/foo/app/group/300245/elements</to> 
    </rule> 
</urlrewrite> 
```

网页.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd" version="2.5">

    <filter>
        <filter-name>UrlRewriteFilter</filter-name>
        <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
        <init-param>
            <param-name>logLevel</param-name>
            <param-value>WARN</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>UrlRewriteFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

上面在 urlrewrite.xml 中定义的规则故意是基本的和硬编码的。在这种情况下，我只是想在开发“to”和“from”中的正则表达式之前让规则的跨上下文方面起作用。

当我使用该规则请求[http://example.com/baz](http://example.com/baz)时，Tomcat 返回 404 错误，提示“请求的资源 (/baz) 不可用”。我在“to”过滤器参数中尝试了一些变体，但还没有任何效果。而且我还没有找到任何应​​该如何使用“上下文”的例子。

关于如何使这种跨上下文请求过滤起作用的任何想法？甚至可能吗？我想我可以通过将 foo.war 重命名为 ROOT.war 或更改[此处](https://stackoverflow.com/questions/715506/tomcat-6-how-to-change-the-root-application)提到的根应用程序来实现我想要做的事情，但我想尝试通过 URLRewrite 执行此操作，除非这样做不可行或表面上看是个坏主意。

如果显示更多我的配置会有所帮助，请告诉我。提前感谢您的任何意见。

**编辑**：

感谢克里斯托弗舒尔茨的有用回答。在我的情况下，问题是由两件事引起的：1）在 webapps/ROOT/META-INF 中没有 context.xml 文件，以及 2）在 webapps/ 中的 URL 重写规则中的“to”元素中有错误根/WEB-INF/urlrewrite.xml。

修复涉及在 webapps/ROOT/META-INF 中放置一个适当的 context.xml 文件。作为其他遇到此问题的人的参考，该文件最终看起来像这样：

webapps/ROOT/META-INF/context.xml

```
<?xml version='1.0' encoding='utf-8'?>

<Context docBase="ROOT" path="/" reloadable="true" crossContext="true" /> 
```

正如 Schultz 所提到的，只需要为给定 URL 重写规则（此处为 ROOT）中的 'from' 元素中隐含的上下文定义一个带有 crossContext="true" 的上下文。不必在“to”URL 重写规则中为应用程序显式定义上下文。换句话说，您不需要为该应用程序手动创建 context.xml 文件——因此继续上面的示例，您不需要手动定义 context.xml 文件并将其放入 webapps/foo/META-INF /。

舒尔茨的回答反映了在官方 Tomcat 文档中定义上下文的建议：http: [//tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)。

这个问题也是因为我最初的帖子中的 URL 重写规则有错误。正确的版本应该是：

urlrewrite.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 3.2//EN" 
"http://tuckey.org/res/dtds/urlrewrite3.2.dtd">

<urlrewrite>    
    <rule>
        <from>baz</from>
        <!-- Note: the use of '/app' instead of '/foo/app/' below -->
        <to context="foo">/app/group/300245/elements</to> 
    </rule> 
</urlrewrite> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:45:44.577

如果您的（真实）webapp 部署到`/foo`并且您想要即时重写 URL，例如`/group-elements/baz`转发（***而不是***重定向）到`/foo/app/group/300245/elements`，那么您将不得不将重写过滤器部署到以下两个位置之一：`/group-elements`或`/`.

上述配置似乎正在部署到 ROOT（即*）* `/`，但随后将 URL 映射`/baz`到`/foo/app/group/300245/elements`. 相反，你可能想要这个：

```
<rule>
    <from>/group-elements/baz</from>
    <to context="foo">/foo/app/group/300245/elements</to>
</rule> 
```

看起来你试图击中我本来期望的工作*。*`http://example.com/baz`最后一点魔法将是使`ROOT`上下文跨上下文（请注意，您的 web 应用程序不需要跨上下文：只有 urlrewrite 一个可以）。您可以通过 addint to将`ROOT`webapp 更改为跨上下文。`crossContext="true"``webapps/ROOT/META-INF/context.xml`

最后，您真的应该停止`<Context>`在 server.xml 中放置元素：将它们保留在那里基本上意味着您需要重新启动 Tomcat 才能更改您的 webapp 部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:23:16.707

发表评论后，我得出了这个可能的结论：

我认为您将反向代理的概念与跨上下文混合在一起。跨上下文是在同一应用程序服务器内的两个 Web 应用程序之间共享数据的方法。像“Apache http”这样的反向代理可以重写一个 url 以将其传递给它后面的某个服务器，从而有效地隐藏任何不需要的部分或执行其他操作，如负载平衡。

基础设施将是：客户端 --> 反向代理 --> 应用服务器

# java - 线程“main”java.lang.NumberFormatException 中的异常：对于输入字符串：“3291105000”

> ID：11001634
> 
> 赞同：4
> 
> 时间：2012-06-12T17:21:52.617
> 
> 标签：java, exception, numberformatexception

为什么会这样？我正在解析的字符串看起来很像一个 int。该程序正在从文件中读取，我知道它工作得最多，因为这个数字在列表中很靠后。有任何想法吗？此外，该程序正在解析大于 22 亿的整数，所以我不知道这是否是大小问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T17:23:38.707

带符号的 32 位`int`只能是 2^31 或 0x7FFFFFFF (2,147,483,647)。您需要使用更大的数据类型。`long`会让你达到 2^63。或者[BigInteger](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)类会给你一个任意大小的整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:23:26.770

`int`可以有最小值`-2,147,483,648`和最大值`2,147,483,647`（含），您的数字（来自字符串）超出范围

改用对你`long`有用`Long.parseLong(3291105000)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:26:24.483

使用 a `long`，它可以保存 64 位整数。

*   `int`s 最多只能保存约 20 亿个整数
*   `long`s 可以容纳高达 ~9e18 的整数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T17:26:37.360

就像其他人说的那样，这个数字显然超出了 int 的范围，因此你得到了例外。

4 个字节，有符号（二进制补码）。-2,147,483,648 至 2,147,483,647。像所有数字类型一样，int 可以转换为其他数字类型（byte、short、long、float、double）。当有损转换完成时（例如 int 到 byte），转换是以较小类型的长度为模完成的。

# google-maps-api-3 - 谷歌地图 KML 多边形

> ID：11001641
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:12.113
> 
> 标签：google-maps-api-3

我已成功将 kml 文件导入到 Google 地图，以便显示房地产边界。

我还使用了[https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-arrays](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-arrays)上的教程来绘制简单的多边形并让它们可点击。

但是，我不知道如何使 kml 文件创建的多边形可点击。kml 上的多边形是非常复杂的形状，由许多坐标组成以形成多边形。以下示例仅适用于 1 个房地产边界：

```
-83.6530304633209,34.8237504877659,0 -83.65536046332301,34.8248804877671,0 -83.65672046332431,34.8262904877683,0 -83.6567504633242,34.8271904877693,0 -83.655330463323,34.8308304877725,0 -83.6565104633242,34.8333304877749,0 -83.65765046332511,34.8349204877764,0 -83.6571104633247,34.8383604877794,0 -83.6591604633265,34.8443604877853,0 -83.6588104633263,34.8468904877875,0 -83.6591604633265,34.8507504877912,0 -83.6583904633258,34.8543804877945,0 -83.6569404633244,34.8566604877968,0 -83.65475046332242,34.8599504877998,0 -83.6545604633223,34.8610404878007,0 -83.6543204633219,34.8635704878032,0 -83.65568046332331,34.8684104878075,0 -83.6553904633231,34.8695004878086,0 -83.6546604633224,34.8706904878097,0 -83.654380463322,34.872050487811,0 -83.6552304633228,34.8745504878134,0 -83.65494046332262,34.8759104878145,0 -83.65377046332161,34.8768304878154,0 -83.6504704633185,34.8796104878179,0 -83.64877046331689,34.8814504878196,0 -83.6469204633151,34.8849204878229,0 -83.6450204633134,34.8870304878249,0 -83.64227046331081,34.8897904878275,0 -83.6389204633076,34.8911304878288,0 -83.6344604633034,34.8921304878297,0 -83.6330604633022,34.8926104878301,0 -83.6295204632988,34.8948504878322,0 -83.6278404632974,34.8969604878341,0 -83.6273304632969,34.89832048783551,0 -83.62726046329681,34.8994904878366,0 -83.6286904632982,34.9030704878399,0 -83.6287304632981,34.9045104878412,0 -83.62844046329791,34.9056004878421,0 -83.6268704632964,34.9077104878443,0 -83.6256904632953,34.9086304878451,0 -83.6240704632939,34.9091204878455,0 -83.6226304632926,34.9088804878452,0 -83.6204304632904,34.9083904878448,0 -83.6179704632882,34.9100604878463,0 -83.61680046328711,34.9109904878471,0 -83.6157204632862,34.9116404878477,0 -83.61126046328189,34.9123704878484,0 -83.610200463281,34.91347048784951,0 
```

当我手动将它们转换为 latlng 对并将它们插入到上面的 Google 教程中时，这些坐标不起作用，如下所示：

```
new google.maps.LatLng(-83.6530304633209,34.8237504877659),
new google.maps.LatLng(83.65536046332301,34.8248804877671),
new google.maps.LatLng(-83.65672046332431,34.8262904877683),
new google.maps.LatLng(-83.6567504633242,34.8271904877693) 
```

任何人对我如何使 kml 图层多边形可点击或使用 kml 数据重绘多边形并使它们可点击有任何想法？

谢谢

**编辑：**这是我用来加载 kml 的代码：

```
<!-- Declare the application as HTML5 using the <!DOCTYPE html> declaration -->
<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <!-- include the Maps API JavaScript using a script tag -->
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAaWOu7N4OX8BlYUwZhvWP2V0P6YQryN9Y&sensor=true"></script>
    <script type="text/javascript">
    function initialize()
    {
        <!-- create a JavaScript object literal to hold a number of map properties -->
        var myOptions =
        {
            center: new google.maps.LatLng(-34.397, 150.644),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            fillColor: '#0000ff'
        };
        <!-- a JavaScript function to create a "map" object -->
        var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
        var myLayer = new google.maps.KmlLayer('http://www.domain.com/gmaps/1.kml',{suppressInfoWindows: true,map: map});
        google.maps.event.addListener
        (
            myLayer,"mouseover",function()
            {
                this.setOptions({fillColor: "#000000"});
            }
        ); 
        google.maps.event.addListener
        (
            myLayer, 'click', function(kmlEvent)
            {
                var text = kmlEvent.featureData.description;
                showInContentWindow(text);
            }
        );

        google.maps.event.addListener
        (
            myLayer,"mouseover",function()
            {
                this.setOptions
                (
                    {
                        fillColor: "#000000"
                    }
                );
            }
        ); 

        function showInContentWindow(text)
        {
            var sidediv = document.getElementById('content_window');
            sidediv.innerHTML = text;
        }
    }
    </script>
</head>
<!-- initialize the map object from the body tag's onload event -->
<body onLoad="initialize()">
    <!-- create a div element named "map_canvas" to hold the Map -->
    <div id="map_canvas" style="width:79%; height:100%; float:left"></div>
    <div id="content_window" style="width:19%; height:100%; float:left"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:51:42.353

Unfortunately, you don't get a `mouseover` event with the `KmlLayer`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer); check at the api-doc, scroll down a bit to see the **Events**, and all you get for events are: `click`, `defaultviewport_changed`, and `status_changed`. I have also explored the options that are available because the `KmlLayer` is an `MVCObject`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#MVCObject), but that doesn't offer additional events. I don't think this is possible.

There may be another way to achieve what you want, but I haven't found it; let's see what others may be able to add.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T12:30:35.650

使用[KmlLayer](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)，您无法更改多边形的属性。如果您使用第三方 KML 解析器（如[geoxml3](https://code.google.com/p/geoxml3/)或[geoxml-v3](https://code.google.com/p/geoxml-v3/)）将多边形呈现​​为原生 Google Maps API v3 对象，您可以更改它们的属性（但性能是否可接受将取决于您的 KML 的复杂程度）。您还可以动态更改使用 FusionTablesLayer 渲染的图块中的多边形（将您的 KML 导入 Fusion Tabel）。

[在鼠标悬停时使用 geoxml3 渲染的 KML 更改多边形颜色的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=VoterDistricts_random.xml)

# php - PHP-如何在不使用临时文件的情况下将图像存储到 SQL 数据库中？

> ID：11001645
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:18.503
> 
> 标签：php, sql, image

我试图在不使用临时文件的情况下将图像存储到 SQL 数据库中。我不想使用临时文件，因为太多可能会导致问题。我看到了这个[教程](http://forum.codecall.net/topic/40286-tutorial-storing-images-in-mysql-with-php/)：但是这个[问题](https://stackoverflow.com/questions/1636877/how-can-i-store-and-retrieve-images-from-a-mysql-database-using-php)和[这个](http://www.phpriot.com/articles/images-in-mysql/7)问题一样使用临时文件。我将图像作为 php 资源而不是文件。尝试将图像的 base64 字符串放入也失败了。我正在写一个 blob。感谢您的关注，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:44:17.523

输出缓冲！

```
ob_start();
imagejpeg($image_resource);
$image = ob_get_clean(); 
```

$image 现在保存您可以写入 mysql 数据库中的 blob 字段的图像数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:38:29.680

PHP 并不是真正为处理长任务或文件上传而构建的。

这意味着它依赖于 Apache 函数进行文件上传。

因此，您必须按照所有示例向您展示的那样做：让 Apache 处理临时目录中的上传，并且仅在将文件放入数据库之后。

# performance - 每天最大时间戳

> ID：11001646
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:25.130
> 
> 标签：performance, postgresql, postgresql-9.1

我有一个事件表：

```
create table event (id integer primary key, date timestamptz unique);
insert into event (id, date) values
 (22784, '2012-01-01 01:00:00+00'),
 (22785, '2012-01-01 04:00:00+00'),
 (22786, '2012-01-01 07:00:00+00'),
 (22787, '2012-01-01 10:00:00+00'),
 (22788, '2012-01-01 13:00:00+00'),
 (22789, '2012-01-01 16:00:00+00'),
 (22790, '2012-01-01 19:00:00+00'),
 (22791, '2012-01-01 22:00:00+00'),
 (22792, '2012-01-02 01:00:00+00'),
 (22793, '2012-01-02 04:00:00+00'),
 (22794, '2012-01-02 07:00:00+00'),
 (22795, '2012-01-02 10:00:00+00'),
 (22796, '2012-01-02 13:00:00+00'),
 (22797, '2012-01-02 16:00:00+00'),
 (22798, '2012-01-02 19:00:00+00'),
 (22799, '2012-01-02 22:00:00+00'),
 (22800, '2012-01-03 01:00:00+00'),
 (22801, '2012-01-03 04:00:00+00'),
 (22802, '2012-01-03 07:00:00+00'),
 (22803, '2012-01-03 10:00:00+00'),
 (22804, '2012-01-03 13:00:00+00'),
 (22805, '2012-01-03 16:00:00+00'),
 (22806, '2012-01-03 19:00:00+00'),
 (22807, '2012-01-03 22:00:00+00'),
 (22808, '2012-01-04 01:00:00+00'),
 (22809, '2012-01-04 04:00:00+00'),
 (22810, '2012-01-04 07:00:00+00'),
 (22811, '2012-01-04 10:00:00+00'),
 (22812, '2012-01-04 13:00:00+00'),
 (22813, '2012-01-04 16:00:00+00'),
 (22814, '2012-01-04 19:00:00+00'),
 (22815, '2012-01-04 22:00:00+00'),
 (22816, '2012-01-05 01:00:00+00'),
 (22817, '2012-01-05 04:00:00+00'),
 (22818, '2012-01-05 07:00:00+00'),
 (22819, '2012-01-05 10:00:00+00'),
 (22820, '2012-01-05 13:00:00+00'),
 (22821, '2012-01-05 16:00:00+00'),
 (22822, '2012-01-05 19:00:00+00'),
 (22823, '2012-01-05 22:00:00+00'),
 (22824, '2012-01-06 01:00:00+00'),
 (22825, '2012-01-06 04:00:00+00'),
 (22826, '2012-01-06 07:00:00+00'),
 (22827, '2012-01-06 10:00:00+00'),
 (22828, '2012-01-06 13:00:00+00'),
 (22829, '2012-01-06 16:00:00+00'),
 (22830, '2012-01-06 19:00:00+00'),
 (22832, '2012-01-06 22:00:00+00'),
 (22833, '2012-01-07 01:00:00+00'),
 (22834, '2012-01-07 04:00:00+00'),
 (22835, '2012-01-07 07:00:00+00'),
 (22836, '2012-01-07 10:00:00+00'),
 (22837, '2012-01-07 13:00:00+00'),
 (22838, '2012-01-07 16:00:00+00'),
 (22839, '2012-01-07 19:00:00+00'),
 (22840, '2012-01-07 22:00:00+00'),
 (22841, '2012-01-08 01:00:00+00'),
 (22842, '2012-01-08 04:00:00+00'),
 (22843, '2012-01-08 07:00:00+00'),
 (22844, '2012-01-08 10:00:00+00'),
 (22845, '2012-01-08 13:00:00+00'),
 (22846, '2012-01-08 16:00:00+00'),
 (22847, '2012-01-08 19:00:00+00'),
 (22848, '2012-01-08 22:00:00+00'),
 (22849, '2012-01-09 01:00:00+00'),
 (22850, '2012-01-09 04:00:00+00'),
 (22851, '2012-01-09 07:00:00+00'),
 (22852, '2012-01-09 10:00:00+00'),
 (22853, '2012-01-09 13:00:00+00'),
 (22854, '2012-01-09 16:00:00+00'),
 (22855, '2012-01-09 19:00:00+00'),
 (22856, '2012-01-09 22:00:00+00'),
 (22857, '2012-01-10 01:00:00+00'),
 (22858, '2012-01-10 04:00:00+00'),
 (22859, '2012-01-10 07:00:00+00'),
 (22860, '2012-01-10 10:00:00+00'),
 (22861, '2012-01-10 13:00:00+00'),
 (22862, '2012-01-10 16:00:00+00'),
 (22863, '2012-01-10 19:00:00+00'),
 (22864, '2012-01-10 22:00:00+00')
; 
```

我想从每天获取最大时间戳的 id。我所拥有的是：

```
select date::date as date, id
from event e
where date = (
    select max(date)
    from event
    where date_trunc('day', date) = date_trunc('day', e.date)
)
order by date;
    date    |  id   
------------+-------
 2011-12-31 | 22784
 2012-01-01 | 22792
 2012-01-02 | 22800
 2012-01-03 | 22808
 2012-01-04 | 22816
 2012-01-05 | 22824
 2012-01-06 | 22833
 2012-01-07 | 22841
 2012-01-08 | 22849
 2012-01-09 | 22857
 2012-01-10 | 22864
(11 rows) 
```

它按预期工作，但性能非常糟糕。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:42:08.777

DISTINCT ON 可能表现更好：

```
SELECT DISTINCT ON (d) date_trunc('day',date)::date as d ,id
FROM event 
ORDER BY d desc, date desc; 
```

如果结果必须按日期升序排序，则需要另一个级别的排序：

```
SELECT d,id 
FROM (
    SELECT DISTINCT ON (d) date_trunc('day',date)::date as d ,id
    FROM event 
    ORDER BY d desc, date desc
) s
ORDER BY d; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:47:11.813

```
Select date,id from event
inner join (
    Select Max(date_trunc('day', date) as LatestDay 
    From event
) On LatestDay = date_trunc('day', date) 
```

可能会更好一些，但 date_trunc 函数正在杀死你。这可能值得一试。

```
CREATE INDEX ON event ((date_trunc('day',date))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T03:40:04.467

这应该快得多：

```
SELECT DISTINCT ON (1)
       date::date, id
FROM   event e
ORDER  BY 1, e.date DESC;  -- e.date, not just date! 
```

*   获得升序不需要另一个级别的排序。

*   `date_trunc()`没有必要。铸造日期可以完成这项工作。

*   在`ORDER BY`子句中，一定要对表进行限定`e.date`以选择源列，而不是同名的输出列。由于凌乱的 SQL 标准，可见性规则*在这里令人困惑。*

*   顺便说一句，`date`是每个 SQL 标准中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)。您不会将其用作现实世界中的列名，对吗？在这个小例子中已经很混乱了。

* * *

另一种方法是使用窗口函数：

```
SELECT DISTINCT ON (1)
       date::date
      ,first_value(id) OVER (PARTITION BY date::date ORDER BY date DESC) AS id
FROM   event
ORDER  BY 1; 
```

更具可读性，但速度较慢。

# visual-studio-2010 - 在 resharper 5.1 中，您如何重新打开代码检查以提供将 foreach 循环转换为 linq 表达式的功能

> ID：11001649
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:35.083
> 
> 标签：visual-studio-2010, resharper, resharper-5.1

我不确定这是不是正确的论坛，如果不是，请随时移动它...

在 VS2010 中，在 Resharper 5.1 中，您如何重新打开代码检查以将 foreach 循环转换为 linq 表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:24:56.083

在`ReSharper->Options`窗口中，转到`Code Inspection->Inspection Severity`。

您可以在那里更改每个项目的检查选项。

# php - 来自 PHP 值的 GMaps 地理编码

> ID：11001650
> 
> 赞同：0
> 
> 时间：2012-06-12T17:22:39.827
> 
> 标签：php, api, google-maps, geocoding

我在试图弄清楚如何从 POST 发送的地址或从另一个页面获取数据生成谷歌地图时遇到了一些问题。

我想要它，这样地图就会立即显示出来，并且不需要有人在输入框中输入地址来触发。

如果有人有一些资源可以帮助我解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:29:16.417

您将需要 Javascript 和 PHP。请参阅以下 S/O 链接

[在页面加载时将地址传递给谷歌地图](https://stackoverflow.com/questions/4157750/passing-address-to-google-maps-on-page-load)

# mysql - SQL IF - ELSE 语句

> ID：11001653
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:47.300
> 
> 标签：mysql, sql, if-statement

我有一张这样的桌子：

```
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| ID    | bigint(20) | NO   | PRI | NULL    |       |
| view  | bigint(20) | NO   |     | NULL    |       |
+-------+------------+------+-----+---------+-------+ 
```

**是否可以使用 SQL 的 IF-ELSE 语句来做到这一点？**

1.  检查表中是否有 ID=1 行
2.  如果有，将视图列增加 1。
3.  如果没有，则向 ID=1 的表插入新行

它应该是这样的：

```
IF((SELECT COUNT(ID) FROM wp_viewcount WHERE ID=1) == 0)
BEGIN
INSERT INTO wp_viewcount VALUES (1,1)
END
ELSE
BEGIN
UPDATE wp_viewcount SET view=view+1 WHERE ID=1
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:47:46.510

以下 SQL 语句将通过使用`on duplicate key`语法产生您想要的 IF - ELSE 逻辑。

```
insert into wp_viewcount values(1,1) on duplicate key update view=view+1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:38:51.567

您只能`if`在存储过程中使用 MySQL。例如：

```
DELIMITER //

CREATE PROCEDURE `test_procedure` (IN wp_id INT)
BEGIN
IF( (SELECT COUNT(*) FROM wp_viewcount WHERE id = wp_id)<1) THEN
    INSERT INTO wp_viewcount(id,view) VALUES (wp_id,1);
ELSE
    UPDATE wp_viewcount SET view=view+1 WHERE ID=wp_id;
END IF;
END // 
```

鉴于您的用例，MySQL 的[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:31:18.630

为什么不使用

```
if not exists (select * from wp_viewcount where id = 1)
begin
    --insert logic
end
else
begin
    --update logic
end 
```

# python - Python 无法放置模块

> ID：11001654
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:48.780
> 
> 标签：python, module, nameerror

我刚刚开始学习 python 版本 3 并尝试在 python 中创建一个文件。我将文件放置在这组命令显示的所有位置。

```
import sys
sys.path 
```

该文件具有类似这样的简单功能

```
 def hello(var):
     print("Hello "+var) 
```

但是当我运行它时

```
hello("Google") 
```

我收到名称错误。

请问有人可以帮我吗？我正在使用 Windows。还是我必须按文件名而不是函数名调用？如果是这样，我应该怎么称呼它？提前感谢任何帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:27:50.017

您需要先`import`保存文件：

```
import myModule 
```

（假设你的文件被称为`myModule.py`）

然后你可以像这样调用函数：

```
myModule.hello('world') 
```

替代语法：

```
from myModule import hello
hello('world') 
```

# php - mysql_fetch_assoc 无法访问相似的列名称

> ID：11001655
> 
> 赞同：1
> 
> 时间：2012-06-12T17:22:48.910
> 
> 标签：php, mysql

我的查询中有多个表

```
$query = mysql_query("SELECT * FROM reservation r, users u ...")

while( $fetch = mysql_fetch_assoc($query)){
    if($fetch['u.id'] == $fetch['r.id']) 
    ... 
```

这是我在表上具有相同列名的问题，当我尝试将预订的 id 与用户的 id 进行比较时，我只得到用户的 id！

我可以用列名替换“*”并更改它们的名称，`AS (SELECT s.id as sid ...)`但有没有更简单的方法？例如：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:29:21.657

如果您的两个表都有同名的列，那么您将只能访问关联数组中的其中一个字段 - 键是字段的名称，因此第一个被覆盖到第二个。

正如您所说，快速修复是显式重命名字段，以免它们发生冲突。尽管您可以通过使用来解决它`mysql_fetch_array`- 这将为您提供所有字段，但您需要通过索引号访问字段；因此，如果您更改表结构，则需要重新编写代码。

如果可能的话，更好的方法是不要在不同的表中有两个具有相同名称的字段 - 如果它们被称为`reservationID`and `userID`，你会完全避免这种情况。我尽量不重复使用字段名，除非它是外键。

# wordpress - 如何在 WordPress 网站中使用 wp-nicescroll 插件

> ID：11001657
> 
> 赞同：0
> 
> 时间：2012-06-12T17:23:09.697
> 
> 标签：wordpress, plugins

我有这个个人 wordpress 网站：www.RagaBhakti.com，我试图用 nicescroll 替换丑陋的垂直和水平滚动条。所以我去了[http://wordpress.org/extend/plugins/wp-nicescroll/installation/](http://wordpress.org/extend/plugins/wp-nicescroll/installation/) 并安装并激活了 nicescroll 插件。

因为我是 Wordpress 的新手，所以我不知道接下来的步骤是什么才能看到滚动条变为 nicescroll。如果需要将一些 Jquery 内容添加到实际页面中，那么详细了解如何执行此操作会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:43:52.773

正如我现在看到您的网站一样，jQuery 和 NiceScroll 可以正常加载并且可以正常工作。

请注意，滚动条仅在您使用滚轮滚动时才会出现。您必须在您的 Wordpress 管理部分中自定义它以适应您在插件选项中的需求。

# ruby-on-rails - 在作为可标记的轨道宝石上指定可标记类型

> ID：11001661
> 
> 赞同：1
> 
> 时间：2012-06-12T17:23:24.093
> 
> 标签：ruby-on-rails, tags, gem, acts-as-taggable-on

所以这就是交易，我一直在我的模型上使用acts-as-taggable-on，但是在我的应用程序中的某个时刻，我不得不拉出模型并将它们放入一个 gem 中，这样我就可以重新使用它们在几个共享该结构的应用程序上。问题是我的 gem 引用了命名空间模型 IE。

```
VideoapiModel::Category.new 
```

或者

```
VideoapiModel::Video.new 
```

而不仅仅是模型本身（就像以前一样）

```
Video.new 
```

或者

```
Category.new 
```

我的问题是，现在我之前拥有的数据是“损坏的”，因为当我使用 .tag_list 方法时，它会使用**VideoapiModel::Video**的 taggable_type 搜索标签，而不是像以前那样只搜索**Video 。**

因此，我的问题是：**当使用acts-as-taggable-on 时，有没有办法在标签查询中指定 taggable_type？**

# javascript - Javascript将声明为函数字典的函数转换为原型

> ID：11001664
> 
> 赞同：0
> 
> 时间：2012-06-12T17:23:37.813
> 
> 标签：javascript, function, prototype

我想要做的是：

我的基本代码：

```
var Obj = function() {
    this.do = function() {};
    this.stop = function() {};
    this.kill = function() {};
};

Obj.prototype.load = function() {}; 
```

所需的转换：

```
var ConvObject = function() { };
ConvObject.prototype = (typeof Obj == "function")? new Obj : Obj; 
```

此示例有效（用于转换部分）。在 ConvObject 中，Obj 的所有方法都在那里。但就我而言，我不想执行 Obj 的默认构造函数。我宁愿避免这种情况。确实，我不想执行新的 Obj。

我尝试了不同的方法来实现这一点。这是我现在能找到的最佳答案：

```
var getSizeOf = function(obj) {
  var size = 0, key;
  for (key in obj) {
    if (obj.hasOwnProperty(key)) size++;
  }
  return size;
};

var ConvObject = function() { };
if ((typeof Obj == "function") && getSizeOf(Obj.prototype) == 0) {
  ConvObject.prototype = new Obj;
}
else {
  ConvObject.prototype = (typeof Obj == "function")? Obj.prototype : Obj;
} 
```

这在 Obj 看起来像这样时有效：

```
var Obj = new function() {};
Obj.prototype.do = function() {};
Obj.prototype.stop = function() {};
Obj.prototype.kill = function() {};
Obj.prototype.load = function() {}; 
```

或者，如果它看起来像这样：

```
var Obj = function() {
    this.do = function() {};
    this.stop = function() {};
    this.kill = function() {};
    this.load = function() {};
}; 
```

但是，当我有上面的基本代码时，这个解决方案会失败。如何避免对默认构造函数的调用？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:26:19.687

使用[`Object.create()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)（或其 polyfill）直接从`Obj.prototype`.

要从`Obj`构造函数中“继承”实例方法，您应该在每个实例上调用它`ConvObject`：[非常简单的 Javascript 继承](https://stackoverflow.com/q/9073253/1048572)。当这些方法是特定于实例的方法时，您无论如何都需要这样做，否则它们应该在原型上。

# mercurial - 使用“移植”时“跳过祖先修订”是什么意思？

> ID：11001666
> 
> 赞同：9
> 
> 时间：2012-06-12T17:23:44.737
> 
> 标签：mercurial

我正在使用`graft`命令将 4 个变更集从 BranchA 拉到 BranchB。当我这样做时，有些是嫁接的，有些不是：

```
PS D:\Dev\ProjectAlpha> hg graft 5f403abb2b24
skipping ancestor revision 15911
PS D:\Dev\ProjectAlpha> hg graft 535ff712c5a3
grafting revision 15925
PS D:\Dev\ProjectAlpha> hg graft cf42b7113e02
grafting revision 15931
PS D:\Dev\ProjectAlpha> hg graft 6920922ee602
skipping ancestor revision 15910 
```

我找不到任何解释这一点的文件。我可以找到来源，但如果有人能过来解释一下，也许对其他人会有所帮助。

我需要牢记移植手术的顺序吗？我做错了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T17:53:29.270

来自`hg help glossary`：

```
Ancestor
    Any changeset that can be reached by an unbroken chain of parent
    changesets from a given changeset. More precisely, the ancestors of a
    changeset can be defined by two properties: a parent of a changeset is
    an ancestor, and a parent of an ancestor is an ancestor. See also:
    'Descendant'. 
```

因此，graft 拒绝将这些修订作为您当前变更集的后代，因为它们已经是您当前变更集的祖先，并且让您的祖先成为您的后代在“回到未来”电影中被证明是行不通的。;)

# regex - Scala 正则表达式 youtube 视频 ID

> ID：11001668
> 
> 赞同：1
> 
> 时间：2012-06-12T17:23:48.557
> 
> 标签：regex, scala

我正在尝试使用以下内容从 youtube url 中提取视频 ID：

```
val YoutubeRegex = """v=([^&]+)""".r

  "v=IQJ13vFYOU8&feature=g-all-lik" match {
    case YoutubeRegex(videoId) => videoId
    case _ => throw new NoSuchFieldError("impossible to find youtube Id")
  } 
```

可悲的是，这不起作用......有什么想法吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:31:46.733

不应该是这样的吗？

```
val YoutubeRegex = """v=([^&]+).*""".r // need to specify that there could be remainder

"v=IQJ13vFYOU8&feature=g-all-lik" match {
  case YoutubeRegex(videoId) => videoId
  case _ => throw new NoSuchFieldError("impossible to find youtube Id")
} 
```

因此，您将获得`IQJ13vFYOU8`没有选择的部分。

# php - 将 CDN 与图像调整器脚本一起使用

> ID：11001671
> 
> 赞同：4
> 
> 时间：2012-06-12T17:23:54.790
> 
> 标签：php, image, cdn

我正在使用图像调整器在我的网站中输出图像。目前情况下是否可以使用CDN？

图像缩放器获取图像的文件路径并输出所需的图像。现在，即使我使用 CDN，图像调整器脚本也托管在我的服务器上。所以每个图像请求都通过我的服务器。使用 CDN 会对我有任何好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:04:03.490

CDN 上的缓存对象以请求 URI 为键，因此您应该从 CDN 中受益，前提是您的应用程序不会在 URL 中生成任何随机性。如果您的图像请求看起来像这样

```
/resizer/200x100/thing.jpg
# ...or...
/resizer/thing.jpg?size=200x100 
```

然后 CDN 会为所有后续请求缓存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:53:08.617

简短的回答：不。如果您的服务器即时调整图像大小，那么它仍然会成为瓶颈，并且 CDN 的好处基本上会丢失。

您可能会满意的三种解决方案：

1.  在图像上传时让图像调整器脚本运行一次，并创建所有必要的图像大小，然后以逻辑方式将所有内容存储在 CDN 上。（合理的解决方案。缺点：非常死板，添加新的图像尺寸需要大量工作）。

2.  根据请求运行图像调整器脚本（即：调整单个图像的大小并上传到 CDN），但前提是图像在 CDN 上不存在。（您可以将创建的图像列表存储在数据库中，或者，如果可能的话，最好使用[对象表示法默认图像技术](https://stackoverflow.com/questions/980855/inputting-a-default-image-in-case-the-src-arribute-of-an-html-img-is-not-valid)）（很酷的解决方案。缺点：旧浏览器不喜欢对象标签，虽然是非标准的有效，代码）。

3.  切换 CDN，使用更成熟的 CDN 服务，允许您通过 API 操作媒体文件。例如：[http](http://cloudinary.com/) ://cloudinary.com/ （顺利航行的解决方案。缺点：没有非智能 CDN 便宜，但在大多数情况下你几乎感觉不到它，它会为你节省大量编码）。

希望这会有所帮助，我很想听听您选择了什么解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:57:16.390

如果您的服务器和脚本足够快，那么我会使用您的服务器代码。这意味着如果您需要添加自定义函数，您可以使用脚本。如果您有任何严重的问题或想要 CDN 可能提供的更多选项，请切换。

# linux - 在 Linux 中，如何找到包含最多子目录或文件的目录？

> ID：11001672
> 
> 赞同：10
> 
> 时间：2012-06-12T17:23:56.363
> 
> 标签：linux

如何在系统中找到文件/子目录数量最多的目录？显然，聪明的答案是`/`，但这不是我要找的。

我被告知文件系统没有节点，所以我怀疑某处有很多文件/目录只是垃圾，我想找到它们。

我试过运行这个：

```
$ find /home/user -type d -print | wc -l 
```

查找特定目录。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T17:43:59.677

从当前目录开始，你可以试试

```
find . -type d | cut -d/ -f 2 | uniq -c 
```

这将列出从当前目录开始的所有目录，用字符“/”分隔每一行，选择字段编号“2”（每行以“./”开头，因此您的第一个字段将是“.”）然后只有输出唯一行，并计算此唯一行出现的频率（-c 参数）。

您还可以在末尾添加“sort -g”。

# c# - 无法从高阶函数的用法中推断出类型参数

> ID：11001673
> 
> 赞同：10
> 
> 时间：2012-06-12T17:24:04.280
> 
> 标签：c#, delegates, functional-programming, higher-order-functions, anonymous-delegates

我有以下高阶函数：

```
public static Func<T, bool> Not<T>(Func<T, bool> otherFunc)
{
    return arg => !otherFunc(arg);
} 
```

并试图这样称呼它：

```
var isValidStr = LinqUtils.Not(string.IsNullOrWhiteSpace); 
```

编译器给了我“无法从用法中推断出类型参数”错误。但以下工作：

```
var isValidStr = LinqUtils.Not((string s) => string.IsNullOrWhiteSpace(s)); 
```

我想知道有什么区别？ `string.IsNullOrWhiteSpace`已经是具有完全相同签名的非重载函数。

如评论中所述，以下内容也有效，但仍无法解释在这种情况下类型推断失败的原因：

```
var isValidStr = LinqUtils.Not<string>(string.IsNullOrWhiteSpace); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:37:59.087

Eric Lippert 在他的博客上回答了您正在处理的问题的详细信息，请[点击此处](http://blogs.msdn.com/b/ericlippert/archive/2007/11/05/c-3-0-return-type-inference-does-not-work-on-member-groups.aspx)。

基本上，正如“David B”在您的评论中所说，“IsNullOrWhiteSpace 是一个方法组。方法组今天只有一个参与成员，但未来可能会得到更多。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:26:35.570

这有效：

```
var isValidStr = Not<string>(string.IsNullOrWhiteSpace); 
```

虽然，编译器似乎应该有足够的信息来推断这里的类型参数 - 这不应该是必需的......

# javascript - 显示来自另一个网站的所有图像的客户端脚本

> ID：11001677
> 
> 赞同：2
> 
> 时间：2012-06-12T17:24:13.743
> 
> 标签：javascript, jquery, html, parsing

我想在我的页面上有一个表单接受用户输入，准确地说是一个 URL，一旦该字段完成，让脚本转到输入的目标 URL（在后台），并显示该页面上的所有图像在缩略图视图中供用户选择。我已经能够使用 php 让它工作，但想要一个客户端解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:30:00.917

JavaScript 受[同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)限制。[除非它支持CORS](https://developer.mozilla.org/en/http_access_control)，否则它将无法读取其他站点。其他选择是在您的域上使用本地代理 [服务器端语言] 来获取内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:30:27.517

客户端解决方案会很棘手。大多数浏览器不允许跨域 AJAX 调用。

看看[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# python - Argparse - 没有参数的自定义操作？

> ID：11001678
> 
> 赞同：15
> 
> 时间：2012-06-12T17:24:14.193
> 
> 标签：python, argparse

```
class StartAction(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        print "Hello"

start.add_argument('-s', '--start', action=StartAction) 
```

我知道通常让动作类似于“store_true”会阻止参数的要求，但是有没有办法使用自定义动作并且仍然不需要传递参数？

所以我想要的是：

> python example.py -s
> 
> 你好

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T17:55:07.610

尝试添加`nargs=0`到您的`start.add_argument`：

```
start.add_argument('-s', '--start', action=StartAction, nargs=0) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-03T12:13:39.993

正如[mgilson 所建议](https://stackoverflow.com/a/11002123/923794) `nargs=0`的那样。由于它是您的操作所固有的，因此我将其放入操作中：

```
class StartAction(argparse.Action):
    def __init__(self, nargs=0, **kw):
        super().__init__(nargs=nargs, **kw)
    def __call__(self, parser, namespace, values, option_string=None):
        print "Hello"

start.add_argument('-s', '--start', action=StartAction) 
```

并且您拥有您想要的行为，而无需添加`nargs=0`到每个`add_argument()`呼叫中​​。如果您有多个参数以相同的方式工作，那就太好了。

但是，用户仍然可以覆盖默认值，`nargs=0`这对于您的用例来说是愚蠢的，如问题中所示。所以我会强制执行：

```
class StartAction(argparse.Action):
    def __init__(self, nargs=0, **kw):
        if nargs != 0:
            raise ValueError('nargs for StartAction must be 0; it is '
                             'just a flag.')
        super().__init__(nargs=nargs, **kw)
    def __call__(self, parser, namespace, values, option_string=None):
        print "Hello" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-28T13:59:44.240

在查阅了上述内容并尝试了不同的方法后，我编写了这个示例。这是一个实现“Uncount”计数的类，它与“count”操作相反。

```
import argparse
class Uncount(argparse.Action):
    def __init__(self, option_strings, dest, nargs=0, choices=None, const=None, **kwargs):
        if nargs != 0:
            raise ValueError("no arguments to this parameter are allowed")
        if const is not None:
            raise ValueError("this parameter does not permit constants")
        if choices is not None:
            raise ValueError("no choices to this parameter are allowed")
        super(Uncount, self).__init__(option_strings=option_strings, nargs=nargs, dest=dest,**kwargs)
    def __call__(self, parser, namespace, values, option_string=None):
        value = getattr(namespace, self.dest, 0)
        setattr(namespace, self.dest, value-1)

opts={}
argparser = argparse.ArgumentParser(description='Report on other teams')
argparser.add_argument(
    '-v','--verbose',dest='verbose',default=0,action='count',
    help='increase log level',
)
argparser.add_argument(
    '-q','--quiet',dest='verbose',default=0,action=Uncount,
    help='increase log level',
) 
```

例子：

```
>>> argparser.parse_args('-q -q'.split())
Namespace(verbose=-2)
>>> argparser.parse_args('-q -v'.split())
Namespace(verbose=0)
>>> argparser.parse_args('-q -v -v'.split())
Namespace(verbose=1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-24T14:40:10.327

对于在 2020 年发现此问题的任何人：如果您尝试在 python3 的最新 argparse 包中传递 nargs=0，则会出错：

```
ValueError: nargs for store actions must be != 0; if you have nothing to store, actions such as store true or store const may be more appropriate 
```

您可能正在寻找的解决方案是通过 action="store_const" 和 const=True

例子：

```
parser = argparse.ArgumentParser
parser.add_argument('-s', '--start', help='Start script or whatever', action="store_const", const=True) 
```

当 -s 参数传递给脚本的主/其余部分时，这会将 parser.start 的值设置为“True”。

# css - 添加到 css 中的特殊字符 (â€‹) 这是从哪里来的？

> ID：11001682
> 
> 赞同：0
> 
> 时间：2012-06-12T17:24:27.490
> 
> 标签：css, utf-8, character-encoding, notepad++, replace

我在记事本++中进行了一堆搜索替换操作，以有效地缩小我的css——主要是删除空格/制表符等......）这最终破坏了我的大部分css。

显然，到处都插入了一个奇怪的字符（â€‹））在没有BOM的UTF-8中使用notepad ++，我看不到这些，但它们出现在视图源中。

我可以通过在 ANSI 编码中进行搜索替换来删除这些，但我的问题是，这个字符是什么，为什么它会出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:51:57.377

当字符串“â€‹”被误解为 windows-1252 编码数据时，它是 ZWSP 的 UTF-8 编码形式。（使用一个不错的[UTF-8 解码器](http://software.hixie.ch/utilities/cgi/unicode-decoder/utf8-decoder)对此进行了检查。）这解释了为什么您在 UTF-8 模式下的 Notepad++ 中看不到它；ZWSP（零宽度空格）是没有宽度的不可见字符。

显然浏览器将样式表解释为 windows-1252 编码。*使用*BOM保存文件可能会有所帮助，因为这样浏览器可能会更好地猜测编码。真正的解决方法是确保（以依赖于服务器的方式）服务器为 CSS 文件发送适当的 Content-Type 标头。

但是，如果这是您的 CSS 文件中唯一的非 Ascii 字符，那么在您删除了有问题的数据之后，这实际上并不重要。

我不知道有什么简单的方法可以让 Notepad++ 插入 ZWSP（你当然可以在系统中使用通用的字符插入实用程序），所以它的来源有点神秘。也许通过从某个地方复制和粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:03:22.133

在 Firefox 中使用 Web 开发者插件或 ext，您可以在 css 文档中看到问题字符。

在 Visual Studio 中，我只能看到：

```
}
.t 
```

Web 开发人员显示了一个不需要的隐藏字符，一个顶部带有插入符号的“a”：

```
}
â.t 
```

上面的 utf 编码器链接揭示了这一点

```
} (the encoded character for ampersand)
.t 
```

还有这个

但只需通过删除和重新输入来解决问题。

# java - 我应该每次都链接 GUI 测试还是重新启动小程序？

> ID：11001684
> 
> 赞同：1
> 
> 时间：2012-06-12T17:24:29.633
> 
> 标签：java, swing, coding-style, gui-testing

例如，在开源项目[JChemPaint](http://jchempaint.github.com/)中，通过将十几个单独的测试收集到几个 Java 文件中来测试 GUI（使用 FEST 框架）。每个文件只启动一次小程序，并在一个链中执行几个独立的测试。

我想知道这是否是好的做法。当然，每次启动都会花费时间。但是，我可以看到先前操作的副作用和可能的例外的问题，但我不是专家。那么，将多个测试放在一个小程序启动中是一种好习惯吗？

（我也在寻找 GUI 测试的最佳实践集合，但不能提出这样的问题，尽管如此，还是欢迎提示。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:39:18.500

我对这两个[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)之间的尴尬划分感到困扰：

[`org.openscience.jchempaint.application.JChemPaint`](https://github.com/JChemPaint/jchempaint/blob/master/src/main/org/openscience/jchempaint/application/JChemPaint.java) [`org.openscience.jchempaint.applet.JChemPaintAbstractApplet`](https://github.com/JChemPaint/jchempaint/blob/master/src/main/org/openscience/jchempaint/applet/JChemPaintAbstractApplet.java).

粗略阅读后，不愿批评；但重构内容可能会限制所需的重复测试量。在这个非常简化的[示例](https://sites.google.com/site/drjohnbmatthews/subway)中，常见的初始化仅限于`initContainer()`方法。相比之下，`JChemPaint`它要复杂得多，并提供许多小程序参数，应测试其正确传输。

这种重构可能正在进行中。[`appletests`](https://github.com/JChemPaint/jchempaint/tree/master/applettests)似乎是早期开发阶段的产物，而较新的工件[`jchempaint.src.test`](https://github.com/JChemPaint/jchempaint/tree/master/src/test)似乎反映了更新的、基于注释的测试架构。

# javascript - 如何从 javascript 访问 Ruby 配置变量

> ID：11001686
> 
> 赞同：0
> 
> 时间：2012-06-12T17:24:35.967
> 
> 标签：javascript, ruby, ruby-on-rails-3.2

我在 application.rb 中添加了一个配置变量，例如

```
module Www
    class Application < Rails::Application
      ...
      config.myurl = "http://localhost:8443/play"
end 
```

在我的页面上单击某些内容后，我想使用此配置变量的值来提供我的完整 url，例如 mypage.js

```
function ClickedOnSomething(someid){
    var fullUrl = <value of config.myurl> + '?id='+someid+'.html'; 
    ...
} 
```

因此，例如，如果我单击的 id 是 1776，那么 fullUrl 将是字符串 `http://localhost:8443/play?id=1776.html`

我正在使用 Ruby on Rails 3.2.3 和 Ruby 1.9.3

我尝试过的一件事是通过控制器，如下所示：

在 application_controller.rb 我添加

```
def before_filter
  # This variable will be available in all controller actions and views
  @url_global = Www::Application.config.myurl
end 
```

在 application.html.erb 我添加

```
<script type="text/javascript">
  var url_global = "<%= @url_global %>"
</script> 
```

然后在 mypage.js 我做了

```
function ClickedOnSomething(someid){
    var fullUrl = @url_global + '?id='+someid+'.html'; 
    ...
} 
```

但 @url_global 无法识别。实际上，我已经尝试了许多在 javascript 中使用 var 的不同变体，但没有什么对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:00:54.250

我看到你声明

```
var url_global = "<%= @url_global %>"; 
```

所以你必须在函数中使用 url_global，而不是 @url_global;

```
var fullUrl = url_global + '?id='+someid+'.html'; 
```

我对么？

# codeigniter - 在 CodeIgniter 中验证后重新填充 form_upload

> ID：11001688
> 
> 赞同：0
> 
> 时间：2012-06-12T17:24:40.277
> 
> 标签：codeigniter

我在验证后重新填充 form_upload 时遇到问题。其他输入字段或选择框用值重新填充，但上传输入字段不是这种情况。有没有可能？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:26:46.997

您不能重新填充文件类型输入。这是一个 HTML 安全限制。

# css - 使用 CSS 添加子横幅

> ID：11001689
> 
> 赞同：0
> 
> 时间：2012-06-12T17:24:42.667
> 
> 标签：css, html

对于我的期末项目，我正在开发一个学生管理系统。对于学生、教师和家长页面以及主横幅，我使用`divs`. 问题是，当我加载一些我使用修改过的页面的表单（`reportcard-student`// `addmarks-teacher`）`viewreport-parent`时，当我`reportcard-student`第一次按下链接时，链接会转到正确的横幅，但是当单击两次时，它会重定向到其他两个横幅中的一个。如何修改我的 HTML/CSS 代码？

# sql - 在 SQL 中映射两个表（多对多关系）

> ID：11001695
> 
> 赞同：0
> 
> 时间：2012-06-12T17:25:24.907
> 
> 标签：sql, oracle11g

> **可能重复：**
> [如何加入 2 个表](https://stackoverflow.com/questions/5281891/how-to-join-2-tables)

我对数据库很陌生。我正在尝试使用第三个映射表将两个表链接在一起。我该如何在 oracle 中执行此操作？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:28:03.770

假设有两个表`A`并且`B`具有`ID`s 类型`INT`...

```
CREATE TABLE A (
  ID INT,
  ...
)

CREATE TABLE B (
  ID INT,
  ...
) 
```

您可以将它们映射为：

```
CREATE TABLE ABCrossReference (
  A_ID INT,
  B_ID INT
) 
```

并存储`A.ID`在_`ABCrossReference.A_ID``B.ID``ABCrossReference.B_ID`

最后，您将`JOIN`它们放在一起以获取数据：

```
SELECT * FROM A
JOIN ABCrossReference ON A.ID = ABCrossReference.A_ID
JOIN B ON ABCrossReference.B_ID = B.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:49:42.937

了解 JOIN 功能。你可以在这里阅读更多关于它的信息[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# java - 如何使现有的 Java 类/接口实现成为单例？

> ID：11001697
> 
> 赞同：0
> 
> 时间：2012-06-12T17:25:29.533
> 
> 标签：java, spring, singleton

假设我在 Spring 中使用 ApplicationContext 实现。

ApplicationContext 是 Java Spring Framework 中的一个接口，我无法更改它。

如何确保此实现只能有一个实例？

例如。我有以下代码 -

```
public class ApplicationContextSingleton 
{
     private static ApplicationContext context;
     private static int numberOfInstances = 0;

     public static ApplicationContext getApplicationContext()
     {
         if(numberOfInstances == 0)
         {
             context = new ClassPathXmlApplicationContext("spring.xml");
             numberOfInstances++;
         }
         return context;
     }
} 
```

这样，我可以确保只有一个 ApplicationContext 实例，前提是它的获取方式如下 -

```
ApplicationContext context = ApplicationContextSingleton.getApplicationContext(); 
```

但这并不能阻止另一个程序员说——

```
ApplicationContext context = new ClassPathXmlApplicationContext("spring.xml"); 
```

从而创建一个新的ApplicationContext。如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:30:42.913

你想做`ApplicationContext`一个单例，所以我会用我自己的自定义类覆盖这个类，确保它首先出现在类路径上，并让它有一个私有构造函数。

也就是说，如果你下定决心让它成为单身人士。正如其他答案和评论所指出的，有更好的方法来解决您的问题。

应该注意的是，覆盖部分库通常不是一个好主意，因为它可能会在以后引起头痛，尤其是当您尝试升级框架版本时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:32:06.237

除非有人能想出一些非常有创意的东西，否则我认为没有办法做到这一点。这类似于尝试制作`int`单例。只是不会发生，因为您无法控制您没有编写的类的使用。您只需要相信您的开发人员不会创建第二个上下文。

或者，我几乎可以保证这是不可能的，但是您***可以获得***spring 的完整源代码，进行一些代码更改以使上下文成为单例，然后自己构建它。这不是一个可能的解决方案，但无论如何我觉得有必要指出它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:30:54.893

没有办法做到这一点，因为

ClassPathXmlApplicationContext 没有被 Spring 实现为单例模式。告诉每个人你有一个实用的方法来访问上下文对象并使用 new 创建上下文是昂贵的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T17:40:20.930

1.  使用自动构建系统来构建您的代码，只要它提交到您的软件存储库。
2.  将工具集成到您的构建过程中，例如 FindBugs 或 PMD。如果这些工具触发了某些条件，则构建失败并且不允许生成任何工件。
3.  在您的集成工具中创建一个案例，寻找创建自己的上下文的开发人员。

所以你不能阻止他们这样做，但你可以阻止他们把这些东西推到你的开发、质量保证和产品环境中。这可能看起来有点矫枉过正，但这种过程将有助于您的开发人员可以做但不应该做的数百件事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T17:30:28.723

[Josh Block 建议在Effective Java](http://books.google.com/books/about/Effective_Java.html?id=ZZOiqZQIbRMC)中使用枚举。[这不是那本书的链接](http://www.vogella.com/articles/DesignPatternSingleton/article.html)，但它展示了他和旧的方式（替代）方式

# ruby-on-rails - 如何在多态模型上设置 current_user id？

> ID：11001699
> 
> 赞同：1
> 
> 时间：2012-06-12T17:25:40.610
> 
> 标签：ruby-on-rails

在这种复杂的情况下，如何设置 Rails 记录的所有者。

我有用户、事件、标签模型。标签是多态的。

在事件表单上，我有一个`:tag_ids`多选。

在标签创建控制器中，我有：

```
def create
  klass = [Event, ...some other models.].detect { |t| params["#{t.name.underscore}_id"]}
  @taggable = klass.find(params["#{klass.name.underscore}_id"])
  @tag = @taggable.tags.new(params[:tag]
  if save.......
end 
```

到目前为止，一切都很好。但是 Tag 模型也有一个`:tagged_by_id`列，我需要将其设置为当前用户。

```
@tag = @taggable.tags.new(params[:tag].merge(tagged_by_id: current_user.id)) 
```

似乎它应该工作。但事实并非如此。

```
tagged_by_id = nil 
```

我究竟做错了什么？

谢谢

# android - Android - 从嵌入资产文件夹中的 SWF（JW 播放器）访问远程 URL

> ID：11001700
> 
> 赞同：1
> 
> 时间：2012-06-12T17:25:44.833
> 
> 标签：android, webview, flash, jwplayer

我正在使用 loadUrl() 将我的资产文件夹中的 HTML 文件加载到 WebView 中。HTML 文件引用了嵌入在 assets 文件夹中的 JW Player swf。

我希望 JW Player 播放远程 URL。可悲的是，它不会。

如果我从另一台服务器远程加载 SWF（而不是在我的资产文件夹中使用 SWF），我可以访问外部 URL。在这种情况下，外部 URL 是 RTMP 流。例如：

```
<!DOCTYPE html> 
<html lang='en'>
<head><meta charset='utf-8'> 
</head>
<body style='margin:0; pading:0;background-color: #000000;'>
    <script type='text/javascript' src='http://developer.longtailvideo.com/svn/trunk/fl5/jwplayer.min.js'></script>

    <div id='mediaspace'>This text will be replaced</div>

    <script type='text/javascript'>
      jwplayer('mediaspace').setup({
        'flashplayer': 'http://developer.longtailvideo.com/svn/trunk/fl5/player.swf',
        'file': 'testvid.mp4',
        'streamer': 'rtmp://b27i9s9t3.rtmphost.com/AndroidMedia',
        'controlbar': 'bottom',
        'width': '800',
        'height': '450'
      });
    </script>

</body> 
```

...作品

```
<!DOCTYPE html> 
<html lang='en'>
<head><meta charset='utf-8'> 
</head>
<body style='margin:0; pading:0;background-color: #000000;'>
    <script type='text/javascript' src='file:///android_asset/jwplayer.min.js'></script>

    <div id='mediaspace'>This text will be replaced</div>

    <script type='text/javascript'>
      jwplayer('mediaspace').setup({
        'flashplayer': 'file:///android_asset/player.swf',
        'file': 'testvid.mp4',
        'streamer': 'rtmp://b27i9s9t3.rtmphost.com/AndroidMedia',
        'controlbar': 'bottom',
        'width': '800',
        'height': '450'
      });
    </script>

</body> 
```

...不起作用。JW Player 加载 - 但是一旦按下播放按钮，它就会快速闪烁“连接不可用：错误 #2028”，然后永远旋转 ajax 微调器。

我假设这是从资产文件夹加载到 Web 视图中的所有 SWF 的一般问题，并且不特定于 JW Player。

有任何想法吗？

# c# - LINQ 将 HTML 编写为 XML

> ID：11001711
> 
> 赞同：0
> 
> 时间：2012-06-12T17:26:24.883
> 
> 标签：c#, asp.net, xml, linq

我是 Web 编程和 Visual Web Developer 的新手。我制作了一个提示用户输入的页面，然后此输入使用 InnerHTML 访问替换了提示。因此，表格只能在第一次显示时进行编辑。这是我希望其他人能够访问的 HTML 的最终编辑版本。所以我需要一种将编辑内容写入 XML 文件的方法。我知道这可以用 LINQ 完成，但我还没有弄清楚如何去做。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:57:18.067

这是我在网上找到的一个例子：http: [//www.hookdonlinq.com/LINQtoXML5MinuteOverview.ashx](http://www.hookedonlinq.com/LINQtoXML5MinuteOverview.ashx)。如果您将 LINQ to XML 代码与文件输出进行比较，您应该能够弄清楚。

代码：

```
XDocument doc = new XDocument(
    new XDeclaration("1.0", "utf-8", "yes"),
    new XElement("rss", 
        new XAttribute("version", "2.0"),
        new XElement ("channel",
            new XElement("title", "RSS Channel Title"),
            new XElement("description", "RSS Channel Description."),
            new XElement("link", "http://aspiring-technology.com"),
                new XElement("item",
                new XElement("title", "First article title"),
                new XElement("description", "First Article Description"),
                new XElement("pubDate", DateTime.Now.ToUniversalTime()),
                new XElement("guid", Guid.NewGuid())),
            new XElement("item",
                new XElement("title", "Second article title"),
                new XElement("description", "Second Article Description"),
                new XElement("pubDate", DateTime.Now.ToUniversalTime()),
                new XElement("guid", Guid.NewGuid()))
            )
        )
     ); 
```

doc.Save(@"c:\sample.xml");

文件：

```
<rss version="2.0">
  <channel>
    <title>RSS Channel Title</title>
    <description>RSS Channel Description.</description>
    <link>http://aspiring-technology.com</link>
    <item>
      <title>First article title</title>
      <description>First Article Description</description>
      <pubDate>2006-12-05T20:53:53.53125</pubDate>
      <guid>ff7bbf19-9155-4773-913c-767bcbf09904</guid>
    </item>
    <item>
      <title>Second article title</title>
      <description>Second Article Description</description>
      <pubDate>2006-12-05T20:53:53.5625</pubDate>
      <guid>8a3fd5e8-b99f-49fe-8a43-7fb62d80c18c</guid>
    </item>
  </channel>
</rss> 
```

# c# - SGEN 在公共泛型方法的 where 子句上失败

> ID：11001719
> 
> 赞同：0
> 
> 时间：2012-06-12T17:27:10.697
> 
> 标签：c#, .net, serialization, sgen

我有一个项目，其中 SGEN 用于预编译序列化程序集（没有 /proxytypes 标志）。在这个项目中，有一个到目前为止一直是内部的类（因此 sgen 将不理会它）。我需要公开课程，这样做的简单行为会导致 sgen 失败并出现错误：

'Infragistics.Shared.DisposableObject' 类型是在未引用的程序集中定义的......'

这个程序集确实被引用了，并且总是被引用，否则程序集本身将无法编译。版本也完全匹配，并且参考已关闭特定版本。

第一个令人困惑的部分是这个类没有公共状态（没有公共字段，根本没有属性），这并不使它成为序列化的良好候选者。

更令人困惑的部分是，删除唯一公共（通用）方法上的 where 子句允许 sgen 很好地处理程序集。

这是一个类，上面只有一个公共的、非显式实现的东西（接口实现了两个方法，不相关）：

```
public class AppointmentDrawFilter : IUIElementDrawFilter
{
    // This is a fluent method to register a type with its handler
    public AppointmentDrawFilter Support<TUiElement>(DrawPhase phases, Func<UIElement, Appointment> retriever = null)
        where TUiElement : UIElement  // <-- commenting out (or changing UIElement to MarshalByRefObject) fixes sgen
    {
        // adds input to a couple dictionaries (failure still occurs with body commented out)
        return this;
    }
} 
```

注意： UIElement 继承自 DisposableObject，是 sgen 失败时找不到的类型。请注意，当我注释掉 where 子句时，UIElement 仍在其他地方使用，但 sgen 并没有对此感到不满。标记 Support() 方法内部也允许 sgen 完成，因为它只关心公共的东西。

为什么 sgen 首先会关心非 Web 服务的公共方法？

为什么它只会因为 where 子句的存在而绊倒？

为什么在这种特殊情况下，sgen 没有找到明显存在的程序集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:28:27.877

我对此进行了一些测试，并找到了您可以使用的可能解决方法。

我发现当你有一个泛型方法时，可以重现这种情况在当前程序集中。

例如，我发现的问题的最简单再现是：

具有以下 C# 代码的类库一：

```
namespace One
{
    public class BaseObject
    {
    }
} 
```

具有以下 C# 代码的类库二：

```
using One;

namespace Two
{
    public class TestClass
    {
        public void TestMethod<T>()
            where T : BaseObject
        {

        }        
    }
} 
```

在 Two.dll 上使用 sgen 时，会重现错误，它抱怨没有引用程序集 One。

对于解决方法，我发现我可以从程序集一中的类派生程序集（类库）二中的任何类，或者从程序集一中实现接口。要在您的特定情况下解决此问题，您可以添加以下类：

```
using Infragistics.Shared;
namespace DayViewTextCenter
{
    public class WorkaroundSgenIssue:DisposableObject
    {
        protected override void OnDispose()
        {
        }
    }
} 
```

虽然我实际上没有找到您提出的三个问题的答案，但我确实发现实际错误是 System.Xml.Serialization.Compiler 类的 Compile 方法中的 System.InvalidOperationException：

```
System.InvalidOperationException occurred
  Message=Unable to generate a temporary class (result=1).
error CS0012: The type 'One.BaseObject' is defined in an assembly that is not referenced. You must add a reference to assembly 'One, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.

  Source=System.Xml
  StackTrace:
       at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
  InnerException: 
```

我能够从上面复制这个引用程序集一和二，并使用以下代码：

```
Type type = typeof(TestClass);
Assembly assembly = type.Assembly;
XmlReflectionImporter importer = new XmlReflectionImporter();
XmlTypeMapping mapping = importer.ImportTypeMapping(type);
CompilerParameters parameters = new CompilerParameters();
Assembly xmlAssembly = XmlSerializer.GenerateSerializer(new Type[] { type }, new XmlMapping[] { mapping }, parameters); 
```

就像我之前建议的解决方法一样，如果添加了派生自程序集 One 中的类的第二种类型，则可以避免异常。

装配二需要额外的类：

```
public class Test : BaseObject
{
} 
```

更新了生成序列化程序集的逻辑：

```
Type type = typeof(TestClass);
Assembly assembly = type.Assembly;
XmlReflectionImporter importer = new XmlReflectionImporter();
XmlTypeMapping mapping = importer.ImportTypeMapping(type);
Type type2 = typeof(Test);
XmlReflectionImporter importer2 = new XmlReflectionImporter();
XmlTypeMapping mapping2 = importer2.ImportTypeMapping(type2);
CompilerParameters parameters = new CompilerParameters();
Assembly xmlAssembly = XmlSerializer.GenerateSerializer(new Type[] { type, type2 }, new XmlMapping[] { mapping, mapping2 }, parameters); 
```

# java - 只获取Java中数组的一部分？

> ID：11001720
> 
> 赞同：333
> 
> 时间：2012-06-12T17:27:20.900
> 
> 标签：java, arrays

我在 Java 中有一个整数数组，我只想使用它的一部分。我知道在 Python 中你可以做这样的事情 array[index:] 它从索引中返回数组。在Java中是否可能发生这样的事情。

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2012-06-12T17:29:44.097

Java中数组的长度是不可变的。因此，您需要将所需的部分复制到一个新数组中。
使用[java.util.Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)类中`copyOfRange`的方法：

```
int[] newArray = Arrays.copyOfRange(oldArray, startIndex, endIndex); 
```

> **startIndex**是要复制的范围的初始索引，包括在内。
> **endIndex**是要复制的范围的最终索引，不包括在内。（此索引可能位于数组之外）

例如：

```
 //index   0   1   2   3   4
int[] arr = {10, 20, 30, 40, 50};
Arrays.copyOfRange(arr, 0, 2);          // returns {10, 20}
Arrays.copyOfRange(arr, 1, 4);          // returns {20, 30, 40}
Arrays.copyOfRange(arr, 2, arr.length); // returns {30, 40, 50} (length = 5) 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-12T17:30:11.760

您可以将数组包装为列表，并请求它的子列表。

```
MyClass[] array = ...;
List<MyClass> subArray = Arrays.asList(array).subList(index, array.length); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-12T17:29:57.623

是的，您可以使用[Arrays.copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

它做同样的事情（注意有一个副本：你不改变初始数组）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-11-23T19:37:39.913

你可以试试：

```
System.arraycopy(sourceArray, 0, targetArray, 0, targetArray.length);// copies whole array

// copies elements 1 and 2 from sourceArray to targetArray
System.arraycopy(sourceArray, 1, targetArray, 0, 2); 
```

请参阅[系统的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-12T17:32:09.023

如果您使用的是 Java 1.6 或更高版本，则可以使用[`Arrays.copyOfRange`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29)来复制数组的一部分。从javadoc：

> 将指定数组的指定范围复制到新数组中。范围 (from) 的初始索引必须介于 0 和 之间`original.length`，包括 0 和 。at 的值`original[from]`被放入副本的初始元素中（除非`from == original.length`or `from == to`）。原始数组中后续元素的值被放入副本中的后续元素中。范围（）的最终索引，`to`必须`from`大于等于 返回数组的长度为.`original.length``false``original.length - from``to - from`

这是一个[简单的例子](http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html)：

```
/**
 * @Program that Copies the specified range of the specified array into a new 
 * array.
 * CopyofRange8Array.java 
 * Author:-RoseIndia Team
 * Date:-15-May-2008
 */
import java.util.*;
public class CopyofRange8Array {
    public static void main(String[] args) {
       //creating a short array
       Object T[]={"Rose","India","Net","Limited","Rohini"};
        // //Copies the specified  short array upto specified range,
        Object T1[] = Arrays.copyOfRange(T, 1,5);
        for (int i = 0; i < T1.length; i++) 
            //Displaying the Copied short array upto specified range
            System.out.println(T1[i]);
    }

} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-12T17:29:59.417

查看[copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean[],%20int,%20int%29)；和例子：

```
int[] arr2 = Arrays.copyOfRange(arr,0,3); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-12T17:29:59.457

你可以使用这样的东西：[`Arrays#copyOfRange`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-05T13:10:19.197

```
public static int[] range(int[] array, int start, int end){
        int returner[] = new int[end-start];
        for(int x = 0; x <= end-start-1; x++){
            returner[x] = array[x+start];
        }
        return returner;
    } 
```

这是一种与 Array.copyOfRange 执行相同操作但不导入任何内容的方法

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2019-09-22T16:15:04.323

您可以`subList(int fromIndex, int toIndex)`在整数 arr 上使用方法，如下所示：

```
import java.util.ArrayList;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        List<Integer> arr = new ArrayList<>();
        arr.add(1);
        arr.add(2);
        arr.add(3);
        arr.add(4);
        List<Integer> partialArr = arr.subList(1, 3);

        // print the subArr
        for (Integer i: partialArr)
            System.out.println(i + " ");
    }
} 
```

输出将是：`2 3`。

请注意，该`subList(int fromIndex, int toIndex)`方法对其接收的第二个变量 (var2 - 1) 执行负 1，我不知道确切原因，但这就是发生的情况，可能是为了减少超出数组大小的机会。

# android - Android：如何从状态栏通知创建的 PendingIntent 访问 AsyncTask？

> ID：11001723
> 
> 赞同：6
> 
> 时间：2012-06-12T17:27:43.527
> 
> 标签：android, android-asynctask, status, android-notification-bar, android-pendingintent

我的应用程序启动一个`AsyncTask`从 URL 下载文件的应用程序。同时它会创建一个状态栏`Notification`，告诉用户下载完成的百分比。

我试图让我的应用程序响应单击通知。如果下载仍在进行中，我想显示一个`DialogInterface`询问他们是否要停止下载。单击是应该停止下载。

我遇到的问题是我不确定如何从`PendingIntent`我为通知设置的访问我的异步任务。我可以`DialogInterface`很容易地显示，但我不确定如何显示正在停止下载的活动。

我尝试创建一个可以访问通知的 Helper 类以及引用可下载文件的 File 对象，但是我收到一条错误消息，指出该对象不可序列化（它确实实现了`Serializable`）。助手类还包括一个成员，该成员将保存下载进度，这是我将用于是否显示对话框的条件。

我正在考虑使用 Brodcast Action 和接收器，但我不确定将接收器放在哪里。它会进入扩展的类`AsyncTask`吗？

任何帮助，将不胜感激。这是`PendingIntent`附在`Notification`. 如果您想查看更多代码，请询问。

```
public class DownloadNotificationActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate( Bundle savedInstanceState ) {
    super.onCreate( savedInstanceState );

    Intent i = getIntent();

    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {

        @Override
        public void onClick( DialogInterface dialog, int which ) {
            switch ( which ) {
                case DialogInterface.BUTTON_POSITIVE :
                    // Yes button clicked
                    // Stop download
                    finish();
                    break;

                case DialogInterface.BUTTON_NEGATIVE :
                    // No button clicked
                    finish();
                    break;
            }
        }
    };

    if ( /* download not complete */ ) {
        AlertDialog.Builder builder = new AlertDialog.Builder( this );
        builder.setMessage( R.string.stop_download ).
                setPositiveButton( R.string.yes, dialogClickListener ).
                setNegativeButton( R.string.no, dialogClickListener ).show();
    }
    else {
        // Access file
    }

}
} 
```

所以说清楚，我有一`ViewDetailActivity`堂课。它有一个名为的内部类，当用户单击屏幕上的按钮时，`DownloadFile`它会扩展并执行。`AsyncTask`在 的`doInBackground()`方法中`DownloadFile`，从 URL 开始下载 mp3，`Notification`并根据下载的文件量创建和更新状态栏。的`PendingIntent`是`Notification`用`DownloadNotificationActivity`（显示的代码）创建的，它应该显示一个对话框，选择“是”，应该取消`AsyncTask`.

我的问题是我需要回复`DownloadFile`已取消下载的任务，但我不确定如何`DownloadFile`从该任务`DownloadNotificationActivity`中访问以取消它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:55:05.847

在您的`asynctask`中，您需要在取消时检查`isCancelled()`并`doInBackground()`中止。从您的通知中，您调用`cancel()`.`asynctask`

为此，您需要将引用传递`AsyncTask`给您的通知活动。

例如：

您可以像这样创建 AsyncTask：

```
class MyAsyncTask extends AsyncTask<Void, Integer, Void> {
        @Override
        protected Void doInBackground(Void... unused) { //be sure to check isCancelled here, i.e. if (isCancelled()) break; 
```

然后在您的主目录中`Activity`创建`AsyncTask`类似的内容：

```
public class MyActivity extends Activity {
    private MyAsyncTask zeTask;
    @Override
    public void onCreate(Bundle savedInstanceState) {
              zeTask= new MyAsyncTask();
              zeTask.execute(); 
```

然后，当您创建通知并想取消异步任务时，只需将其称为 zeTask。MyAsyncTask 需要与通知在同一个活动中，并且 zeTask 可以是保存对 AsyncTask 的引用的变量。

```
switch ( which ) {
                case DialogInterface.BUTTON_POSITIVE :
                    zeTask.cancel();
                    finish();
                    break; 
```

# php - 如何将国际用户重定向到亚马逊本地商店？

> ID：11001731
> 
> 赞同：1
> 
> 时间：2012-06-12T17:28:08.367
> 
> 标签：php, javascript, jquery, amazon, affiliate

**背景：**我的网站有国际用户。我在这些网站上写过亚马逊及其产品的评论。

我一直在寻找将国际用户从我的网站链接重定向到他们当地的亚马逊商店的方法，同时正确链接到原始产品并保持我的会员 ID 完好无损。我找到了几种方法，我将在下面列出，但我想知道是否有任何我错过的好的替代方法。

这看起来不错[http://code.stephenmorley.org/php/mapping-visitor-ip-addresses-to-amazon-sites/](http://code.stephenmorley.org/php/mapping-visitor-ip-addresses-to-amazon-sites/) 和[http://petewilliams.info/blog/2009/07/javascript-amazon-associate -链接本地化器/](http://petewilliams.info/blog/2009/07/javascript-amazon-associate-link-localiser/)

**问题：**为了清楚起见，我想知道人们使用哪些方法/教程/脚本**将国际用户重定向到他们的本地/相关亚马逊商店**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:08:17.630

您可以使用 GeoLite 之类的东西（关于[此处](http://www.phparch.com/2011/11/geolocation-its-easier-than-it-looks/)的教程）来查找他们的国家/地区，然后设置一个数组来交叉检查他们的国家/地区与`header()`功能发送到的任何地方。这将是一些工作，但你可以做到。

# cordova - xui.js swipe 插件 - 如何获取元素 id

> ID：11001733
> 
> 赞同：0
> 
> 时间：2012-06-12T17:28:23.590
> 
> 标签：cordova, xui

我在 photegap 项目中使用 xui，因为它运行良好，除了使用 swipe 插件时，我找不到获取点击元素 id 属性的方法。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:29:43.807

您传递给该`swipe`方法的回调将作为第一个参数传递给触摸事件对象。

因此，您可以查看[Touch Event 文档](https://developer.mozilla.org/en/DOM/TouchEvent)，尤其是对象`touches`数组`Touch`；这些[`Touch`对象](https://developer.mozilla.org/en/DOM/Touch)有一个`target`属性，可以让您直接引用触摸事件开始的元素。

# .net - 说，“程序集成功添加到缓存中”，但它不在缓存中

> ID：11001737
> 
> 赞同：4
> 
> 时间：2012-06-12T17:28:36.090
> 
> 标签：.net, com, assemblies, gac, .net-assembly

我得到的反馈：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools>gacutil.
exe /i "C:\Users\wherever\ClassLibrary1.dll"
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools> 
```

但它不是在搜索的内容

```
gacutil.exe /l | clip 
```

它不在 /Windows/assemblies 中

我正在使用.net 4。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T17:35:49.210

.Net 4.0 程序集位于不同的位置。它们存在于 C:\Windows\Microsoft.NET\assembly

# android - 如何将 JSON 字符串转换为 Int 然后转换为 Arg Bundle？

> ID：11001746
> 
> 赞同：2
> 
> 时间：2012-06-12T17:29:14.647
> 
> 标签：android, json, string, int, bundle

我正在尝试传递从 JSON 字符串中提取的 Int 值以减少代码冗余。

在我的 JSON 文件中，我在“ *resFile* ”中有一个字符串值。我将此字符串存储到**TAG_RES_FILE**中，我想将它作为 Int 传递到 Bundle 中。

如果您查看我的代码，您会看到注释*//TRY #1//*。这按预期工作，但我需要**Int**来自存储我的**TAG_RES_FILE**的变量。在评论*//TRY #2//* 只是我想要发挥作用的一个例子 - 显然它没有。在下一行中，我尝试将标记字符串转换为**Int**但这会产生以下运行时错误：

> java.lang.NumberFormatException：无效的 int：“resFile”

我什至尝试将 0x7f060000（来自 R.java）放入 JSON 字符串。

所以我的问题是：我该如何做到这一点？我是在正确的轨道上还是应该以完全不同的方式去做？

感谢您的帮助和输入 - 请在您的答案中显示代码示例。

JSON字符串片段：

```
[
    {
        "_id": "1",
        "label": "A Lable",
        "title": "Some Title",
        "description": "Bla, bla, bla",
        "containerID": "Some container id",
        "isRawRes": "boolean value here",
        "resFile": "R.raw.advisory_circulators_sort_list"
    }, {. . .
] 
```

在我的哈希图中：

```
// Parse the string to a JSON object
        for (int i = 0; i < json.length(); i++) {
            JSONObject json_data = json.getJSONObject(i);

            // Storing each json item in variable
            String id = json_data.getString(TAG_ID);
            String label = json_data.getString(TAG_LABEL);
            String title = json_data.getString(TAG_TITLE);
            String description = json_data.getString(TAG_DISCR);
            String containerID = json_data.getString(TAG_FRAG_ID);
            String isRawRes = json_data.getString(TAG_IS_RAW_RES);
            String resFile = json_data.getString(TAG_RES_FILE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_LABEL, label);
            map.put(TAG_TITLE, title);
            map.put(TAG_DISCR, description);
            map.put(TAG_FRAG_ID, containerID);
            map.put(TAG_IS_RAW_RES, isRawRes);
            map.put(TAG_RES_FILE, resFile);

            // adding HashList to ArrayList
            mList.add(map);
} 
```

在我的 ListViews setOnItemClickListener 中：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    . . .

        final Bundle args = new Bundle();

//TRY #1//int rawRes = R.raw.advisory_circulators_sort_list; <--I NEED TO GET THIS IN FROM MY TAG!!
//TRY #2//int rawRes = TAG_RES_FILE; <-- TO SOMETHING LIKE THIS!!
        int passResFile = Integer.parseInt(TAG_RES_FILE);//<--THIS GIVES A NPE!!
        args.putInt("KEY_RES_FILE", passResFile);

        bolean isRawRes = true;
        args.putBoolean("KEY_IS_RAW_RES", isRawRes);

        // Delayed to improve animations
        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            public void run() {
                ListViewFragment lvf = new ListViewFragment();
                lcFT.replace(R.id.listContainer, lvf).commit();
                lvf.setArguments(args);
            }
        }, 300);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:44:43.157

相反，只需存储`advisory_circulators_sort_list`而不是`R.raw.advisory_circulators_sort_list`. 然后，要获取整数标识符，请使用以下方法：

```
int passResFile = getResources().getIdentifier( resFile, "raw", getPackageName() ); 
```

# ruby-on-rails-3 - 从 TCP 套接字解析 XML 流

> ID：11001749
> 
> 赞同：2
> 
> 时间：2012-06-12T17:29:24.847
> 
> 标签：ruby-on-rails-3, xml-parsing

我编写了一个 Ruby 脚本来通过 TCP 套接字连接到 XML 流。我想使用 LibXML 解析这个 XML 流）。我的问题是我不知道如何将此流传递给 LibXML。从 LibXML 文档[XML::Document.io(io)](http://libxml.rubyforge.org/rdoc/classes/LibXML/XML/Document.html#M000472%20%22LibXML%3aXML%3aDocument%28io%29)这似乎是为 HTTP 设置的，而不是 TCP 套接字。关于如何包装我的 TCP 套接字以便 LibXML 可以使用它的任何帮助？或者有没有更好的方法从我的 TCP 套接字解析这个 XML 流？我现在正在学习 Ruby，所以下面的代码也不是我认证的方式。根据关于 stackoverflow 的其他问题，似乎我必须确保在将 XML 发送到 LibXML 解析器之前拥有完整的 XML（正确的结束标记）。提前致谢。

这是我到目前为止所拥有的：

```
 require 'socket'
   require 'timeout'

   username = "username\r\n"
   password = "password\r\n"
   port = 4500
   server = 'xmlfeed.website.com'

   tcp_client = TCPSocket.new(server, port)

   all_data = []
   value = 0
   while true
     partial_data = tcp_client.recv(1012)

     if partial_data.length == 0
       break
     end
     all_data << partial_data
     puts(all_data)
     if value == 0
           tcp_client.puts(username)
           value = 1
     end
     if value == 1
           tcp_client.puts(password)
           value = 2
     end
     if all_data.to_s.chomp.casecmp( "Starting Feed")
           value = 3
           puts "Begin the feed"
     end
     if value == 3
           # Parse the data using LibXML
           # this is the part I'm not sure how to approach
           puts(all_data)
    end
   end
   tcp_client.close

   puts all_data.join() 
```

# python - python-memcache 中的一致性哈希

> ID：11001751
> 
> 赞同：1
> 
> 时间：2012-06-12T17:29:26.737
> 
> 标签：python, memcached, hash, consistent-hashing

> **可能重复：**
> [python-memcache 是否使用一致的散列？](https://stackoverflow.com/questions/926814/does-python-memcache-use-consistent-hashing)

python-memcached 是否支持一致性哈希？我发现了一些关于这个的线程，但大多数都超过 2 年了。

干杯

# c# - 使用不为同名课程工作？

> ID：11001752
> 
> 赞同：2
> 
> 时间：2012-06-12T17:29:31.237
> 
> 标签：c#

我在名为 Hasher 的命名空间中有一个名为 Hasher 的类。因此，完全限定名称将是：

```
Hasher.Hasher ... 
```

我正在尝试在外部程序集（C#）中使用 Hasher 类。我已将命名空间导入到我的类中：

```
using Hasher; 
```

但是当我尝试使用 Hasher 类时，编译器将找不到它。

```
using Hasher;

namespace Test {
  ///<summary>
  ///This is a test class for HasherTest and is intended
  ///to contain all HasherTest Unit Tests
  ///</summary>
  [TestClass()]
  public class HasherTest {

    ///<summary>
    ///A test for GenerateFromRawData with null seed
    ///</summary>
    [TestMethod()]
    [ExpectedException( typeof( ArgumentNullException ) )]
    public void GenerateFromRawDataTest_NullSeed() {
      byte[] seed = null;
      byte[] salt = null;

      seed = null;
      salt = null;

      Hasher.GenerateFromRawData( seed, salt );
    }

} 
```

生成：

```
Error   The type or namespace name 'GenerateFromRawData' does not exist in the namespace 'Hasher' (are you missing an assembly reference?)  M:\j41833b_UR403088_ReportingDotNet\ReportingDotNet\src\AG385\_UnitTest\HasherTest.cs   _UnitTest 
```

我没有正确使用“使用”吗？（我的主要语言是 VB.NET，所以我的 C# 有点生疏。粗略检查 MSDN 文档并没有发现任何东西）

编辑：这很好用。

```
namespace Test {
  ///<summary>
  ///This is a test class for HasherTest and is intended
  ///to contain all HasherTest Unit Tests
  ///</summary>
  [TestClass()]
  public class HasherTest {

    ///<summary>
    ///A test for GenerateFromRawData with null seed
    ///</summary>
    [TestMethod()]
    [ExpectedException( typeof( ArgumentNullException ) )]
    public void GenerateFromRawDataTest_NullSeed() {
      byte[] seed = null;
      byte[] salt = null;

      seed = null;
      salt = null;

      Hasher.Hasher.GenerateFromRawData( seed, salt );
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:50:15.413

感谢@asawyer 提供以下文章：

[http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)

有两个分析器。一、使用外部别名：

[http://msdn.microsoft.com/en-us/library/ms173212(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms173212(v=vs.100).aspx)

二、重命名Hasher命名空间。（当您可以控制源代码并且这是我选择的选项时，建议您这样做。）

# php - 如何在将矢量图像用作输出图像中的图层之前对其进行缩放

> ID：11001753
> 
> 赞同：0
> 
> 时间：2012-06-12T17:29:31.643
> 
> 标签：php, vector, svg, imagemagick, ghostscript

我正在使用一些光栅和一些矢量文件构建图像，并将其输出到 png。有没有办法让我在生成 png 之前预先缩放这些矢量之一？

例如，如果矢量很大，则生成栅格将是一个问题，因为如果我以后按比例缩小栅格，则矢量（不再是矢量）看起来会失真。到目前为止，我使用 imagemagic 来生成 png。

在我写我的 png 之前，我有什么想法可以预先缩放矢量，同时仍然具有矢量缩放功能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:34:14.937

您可以通过操作 DOM 自己预缩放 SVG。通过改变 <svg> 元素的`viewBox`、`width`和`height`属性，您可以有效地缩放整个图像。

SVG 1.1 Recommendation 中有一个示例，位于：[7.7 The 'viewBox' attribute](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)。

# c - atoi 返回的值无法打印

> ID：11001754
> 
> 赞同：-1
> 
> 时间：2012-06-12T17:29:33.220
> 
> 标签：c, linux, char, int, atoi

在介绍代码之前，先介绍一下背景知识：我有一个名为 的字符指针数组`math`，现在，在`while`循环中，我试图将数学中的值转换为`int`using`atoi`并将其保存在`int`variable`ai`中。没有编译错误。但是，当我尝试打印时`ai`，它并没有打印出来。程序以某种方式运行而不会崩溃。我无法弄清楚问题是什么，如果有问题程序应该崩溃`atoi`，如果没有问题那么它应该打印`ai`。

代码如下：

```
int c1 = 3; //the array contains 3 characters 1 2 3
int c2 = 0;
while(c2 < c1)
{
    int ai;
    ai = atoi(math[c2]);
    // the array is valid, I have checked it time and again so is the content in array
    write(STDOUT_FILENO,math[c2],1); //this works fine.
    write(STDOUT_FILENO,&ai,sizeof(&ai));
    //this doesn't print anything and somehow loop goes on to meet
    //the condition.
    c2++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:34:30.747

记住`write`不是`printf`。所以

```
write(STDOUT_FILENO,&ai,sizeof(&ai)) 
```

将`sizeof(int)`字符块写入STDOUT；如果我们假设一个 32 位的`int`，它会将 ASCII 码表中对应的字符打印为`(ai >> 24) & ff`、和`(ai >> 16) & ff`，这可能是四个不可打印的字符。`(ai >> 8) & ff``(ai >> 0) & ff`

如果要将整数的字符串表示形式写入控制台，请使用：

```
printf("%d", ai); 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:21:07.350

```
write(STDOUT_FILENO,&ai,sizeof(&ai)); 
```

写入`ai`to的位模式，`stdout`但使用地址的`ai`长度而不是 的长度`ai`。在现代机器上，这些值通常与 不同`4`，`8`因此您正在编写任意垃圾，甚至产生访问错误。

无论如何，这可能不是您想要的。

如果你想把你的号码写成一个可读的字符串来`stdout`使用类似的东西

```
write(STDOUT_FILENO, math, strlen(math)); 
```

`math`已经有了你想在上面看到的字符表示`stdout`。

如果你真的想抽出`ai`使用的比特表示

```
write(STDOUT_FILENO, &ai, sizeof ai); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:28:15.973

考虑您的附加信息

> 它是一个使用套接字的多处理客户端服务器建模代码

你可能有一些额外的魔法`STDOUT_FILENO`。考虑使用`fdopen`,代替 (绝对不正确)`fprintf`和(可能不正确) 。`fflush``write``printf`

像这样：

```
FILE* f = fdopen(STDOUT_FILENO, "w");
fprintf(f, "%d", ai);
fflush(f);
...
fclose(f); // also closes the socket 
```

# file - 图片副本不正确

> ID：11001756
> 
> 赞同：0
> 
> 时间：2012-06-12T17:29:37.767
> 
> 标签：file, image-processing, graphics, bitmap

我需要读取图像并用 C++ 回写（创建它的副本）

我有一个代码

```
FILE *filePtr, *filePtr2;    
BITMAPFILEHEADER bitmapFileHeader;
BITMAPINFOHEADER bitmapInfoHeader;

filePtr = fopen(path,"rb");
filePtr2 = fopen("output.bmp","wb");

fread(&bitmapFileHeader, sizeof(BITMAPFILEHEADER),1,filePtr);
fread(&bitmapInfoHeader, sizeof(BITMAPINFOHEADER),1,filePtr);

fwrite(&bitmapFileHeader, sizeof(BITMAPFILEHEADER),1,filePtr2);
fwrite(&bitmapInfoHeader, sizeof(BITMAPINFOHEADER),1,filePtr2);

char *bitmapImage = new char[bitmapInfoHeader.biHeight*bitmapInfoHeader.biWidth*3];
fseek(filePtr, bitmapFileHeader.bfOffBits, SEEK_SET);

fread(bitmapImage, bitmapInfoHeader.biHeight*bitmapInfoHeader.biWidth*3, 1, filePtr);
fwrite(bitmapImage, bitmapInfoHeader.biHeight*bitmapInfoHeader.biWidth*3, 1, filePtr2); 
```

但是生成的图像的重量小于源图像。我可以在 ImageViewer 中打开它，但没有显示最后几行图像。

如果我在代码中的任何地方将乘以 3 更改为乘以 4，则查看的结果图像没有问题，但尺寸大于源图像。

biBitCount = 24 这就是为什么我要乘以 3，原因（位图数据字段中的每三个字节代表 (BGR) 每个像素的蓝色、绿色和红色的相对强度。）

# c++ - 从引用中调用虚函数

> ID：11001757
> 
> 赞同：-2
> 
> 时间：2012-06-12T17:29:40.573
> 
> 标签：c++, reference

我有这样的结构

```
struct structure
{
    BaseObject &A; //BaseObject has a function declared as virtual
}; 
```

在运行时，我动态地将一个对象分配给 &A

```
structure *s = new structure;
DerivedObjectB *B = new DerivedObjectB(); //Derived class overloads the virtual function 
s->A = *B; //s is a pointer of the structure. S has been initialized 
```

我可以编译此代码，但在运行时出现段错误。我有一个限制，我不能使用指针。这不是家庭作业。由于构建 SSA 的问题，我用作反向编译器的编译器限制使用指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:00:26.150

如果不能使用指针，则必须使用引用。如果使用引用，则*必须在构造时将其初始化为最终值*。

```
struct structure
{
    BaseObject &A; //BaseObject has a function declared as virtual
    structure(BaseObject &A_) : A(A_) {}
};

DerivedObjectB *B = new DerivedObjectB(); 
structure *s = new structure(*B); //done
//keep in mind you cannot delete `B` until _after_ you delete `s` 
```

您上面的代码不应该编译，因为 a`structure`不能以这种方式创建，因为它没有自动默认结构，因为它有一个引用成员。此外，即使它确实编译了，该`A`成员也将是 的父对象的副本，`BaseObject` *或者*其他一些不是你想要的奇怪的东西。`DerivedObjectB``BaseObject`

你*绝对确定*你不能在那里使用指针吗？这根本没有意义，并且很难处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:52:23.883

您不能更改 A 引用的对象，一旦`structure`被构造。您可能想要的是：

```
struct structure
{
  structure() : A(NULL) {}
  ~structure() { if (this->A) { delete this->A; } }
  BaseObject * A;
};

structure *s = new structure;
s->A = new DerivedObjectB(); 
```

无论如何，使用原始指针很容易出错，您应该考虑一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:38:02.773

我打赌你刚刚宣布

```
structure* s; 
```

或者

```
structure* s = NULL; 
```

亚里特？~~否则，没有理由崩溃。~~

**或** `s->A`引用超出范围的对象，因此当您调用`operator =`它时，您会遇到未定义的行为。

是这两者之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T17:57:29.657

这甚至不应该编译。引用在构造后无法反弹，并且您应该收到一个错误，告诉您它必须绑定到某个东西。

# postgresql - 当仅提供 timestamptz 中的日期时强制执行默认时间

> ID：11001758
> 
> 赞同：3
> 
> 时间：2012-06-12T17:29:40.783
> 
> 标签：postgresql, default-value

假设我有桌子：

```
postgres=# create table foo (datetimes timestamptz);
CREATE TABLE
postgres=# \d+ foo 
                            Table "public.foo"
  Column   |           Type           | Modifiers | Storage | Description 
-----------+--------------------------+-----------+---------+-------------
 datetimes | timestamp with time zone |           | plain   | 
Has OIDs: no 
```

所以让我们在其中插入一些值......

```
postgres=# insert into foo values 
    ('2012-12-12'), --This is the value I want to catch for.
    (null), 
    ('2012-12-12 12:12:12'), 
    ('2012-12-12 12:12');
INSERT 0 4 
```

这就是我们所拥有的：

```
postgres=# select * from foo ;
       datetimes        
------------------------
 2012-12-12 00:00:00+00

 2012-12-12 12:12:12+00
 2012-12-12 12:12:00+00
(4 rows) 
```

理想情况下，当输入未提供 TIME 时，我想设置一个默认时间戳值，而不是事实上的时间`2012-12-12`，`00:00:00`我想设置一个默认的`15:45:10`.

意思是，我的结果**应该**如下所示：

```
postgres=# select * from foo ;
       datetimes        
------------------------
 2012-12-12 15:45:10+00    --This one gets the default time.

 2012-12-12 12:12:12+00
 2012-12-12 12:12:00+00
(4 rows) 
```

我不确定如何在 postgres 8.4 中执行此操作，我在手册的[datetime](http://www.postgresql.org/docs/8.4/static/functions-datetime.html)部分或有关列默认值的部分中找不到任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:36:41.250

可以在`BEFORE INSERT`触发器中调整新行的值。这样的触发器可以测试 中是否存在非零时间分量`NEW.datetimes`，如果没有将其设置为所需的固定时间。

但是，在 INSERT 子句中时间部分显式设置为零的情况无法使用此技术处理，因为`'2012-12-12'::timestamptz`等于`'2012-12-12 00:00:00'::timestamptz`。所以这就像试图区分 0.0 和 0.00。

从技术上讲，调整值应该发生在从字符串隐式转换为列类型之前，即使是`RULE`（动态查询重写）也无法做到这一点。

在我看来，最好的选择是重写 INSERT 并对每个值应用一个函数，将其从字符串显式转换为时间戳。此函数将测试输入格式并在需要时添加时间部分：

```
 create function conv(text) returns timestamptz as $$
    select case when length($1)=10 then ($1||' 15:45:10')::timestamptz
      else $1::timestamptz end; $$
   language sql strict immutable;

insert into foo values 
    (conv('2012-12-12')),
    (conv(null)), 
    (conv('2012-12-12 12:12:12')), 
    (conv('2012-12-12 12:12')); 
```

# c# - Monitor.Enter 和 Monitor.Exit 在不同的线程中

> ID：11001760
> 
> 赞同：10
> 
> 时间：2012-06-12T17:29:45.030
> 
> 标签：c#, .net, multithreading, locking

`Monitor.Enter`并且`Monitor.Exit`被设计为从同一个线程调用。但是，如果我需要在与获取的线程不同的线程中释放锁怎么办？

例如：有共享资源和使用该资源的异步操作。操作从共享资源开始`BeginOperation`并获取锁。还有`EndOperation`释放锁的方法。`EndOperation`通常在回调的另一个线程中调用，因此我无法调用`Monitor.Exit`该`EndOperation`方法。在这种情况下，最好的方法是什么？仔细检查锁定`AutoResetEvent`而不是`Monitor`一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T17:33:45.747

您正在寻找的原语称为[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)，可以安全地进入一个线程并从另一个线程退出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T17:33:23.067

如果您可以使用 .NET 4.0，则可以将其替换为[System.Threading.Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)，它允许您在一个线程中获取许可并在另一个线程中释放它们。

> Semaphore 类在调用 WaitOne 或 Release 时不强制执行线程标识。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T17:34:28.540

尝试使用ManualResetEvent，它用于阻止thead(s)，直到某些外部事件被触发。MSDN 文档：

[http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)

# jquery - 如何在文本框中获取 Enter 键以触发功能而不是第一个/默认按钮

> ID：11001762
> 
> 赞同：43
> 
> 时间：2012-06-12T17:29:57.110
> 
> 标签：jquery, button, textbox, keycode, enter

我试图让 Enter 键在某个文本框内被按下时触发一个功能，而不是触发第一个或默认按钮。

你可以在这里看到一个例子：http: [//jsfiddle.net/cutsomeat/WZ6TM/1/](http://jsfiddle.net/cutsomeat/WZ6TM/1/)

如果您按其他键，您将获得一个带有键码的警报框，但如果您按 Enter 键，您将不会获得带有键码的警报框，而是按钮单击事件中的警报框。

显然 Enter 键是触发按钮。有没有办法避免这种情况，而是在 keyup 事件中捕获 Enter 键，然后触发另一个函数？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-12T17:32:26.383

尝试这个：

```
$('#myText').on("keypress", function(e) {
        if (e.keyCode == 13) {
            alert("Enter pressed");
            return false; // prevent the button click from happening
        }
}); 
```

[演示](http://jsfiddle.net/WZ6TM/3/)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-05-28T07:28:33.900

使用`.on()`as`.live()`已被[弃用](http://api.jquery.com/live/)。

```
$(document).on("keypress", ".myText", function(e) {
     if (e.which == 13) {
         //do some stuff
     }
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-12T17:41:24.670

在 keyDown 中执行`e.preventDefault()`以避免按钮的默认操作：

```
$('#myText').keydown(function(e) {
    if (e.keyCode == 13) {
        e.preventDefault();
    }
    alert(e.keyCode);
}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-12T17:38:50.520

```
$(document).ready(function() {

    $('#myText').keypress(function(e) {
        if ( e.keyCode == 13 ) {  // detect the enter key
            $('#myButton').click(); // fire a sample click,  you can do anything
        }
    });

    $('#myButton').click(function(e) {
        alert('Button click activated!');
    });

}); 
```

**[演示](http://jsfiddle.net/WZ6TM/335/)**

对于实时元素，使用[`.on()`](http://api.jquery.com/on/)如下：

```
$(document).ready(function() {

    $(document).on('keypress', '#myText', function(e) {

        if ( e.keyCode == 13 ) {  // detect the enter key
            $('#myButton').click(); // fire a sample click,  you can do anything
        }
    });

    $(document).on('click', '#myButton', function(e) {
        alert('Button click activated!');
    });

}); 
```

# windows - 如何防止 Windows 控制台应用程序关闭？

> ID：11001770
> 
> 赞同：1
> 
> 时间：2012-06-12T17:30:03.793
> 
> 标签：windows, console-application

我有一个控制台应用程序，它可能需要超过 5 秒才能正常关闭。但是，如果用户单击标题栏上的关闭按钮，windows 似乎会强制终止应用程序。通过使用[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)，我设法将终止延迟了 5 秒。有没有办法延长这个延迟？

# android - Appcelerator：正确的方式自动关闭键盘

> ID：11001774
> 
> 赞同：1
> 
> 时间：2012-06-12T17:30:16.133
> 
> 标签：android, iphone, titanium

我正在使用 Titanium 编写应用程序。我希望能够在单击文本字段之外的任何内容时自动关闭键盘。我还没有为这个问题找到一个优雅的解决方案。

我考虑过几件事，但仍在寻找更好的解决方案：

1.  基本上将事件侦听器分配给视图中存在的所有其他内容，然后关闭键盘（使用`textField.blur()`）。我想避免这种情况，因为它会导致很多代码只是为了关闭键盘。此外，如果我最终向视图添加任何其他内容，我还必须向该对象添加一个单击侦听器，因此它不是很容易维护。
2.  创建一个大的透明视图，并让它占据整个屏幕。将它直接放在文本字段下方，并在将关闭键盘的那个上添加一个单击侦听器。这是一个比 #1 更好的解决方案，但仍然不是很好，因为我在让 zIndexes 正常工作时遇到了很多麻烦。对于我的目的来说，这也是低效的，因为我有具有特定宽度和高度的视图来封装文本字段。为了简化代码，我使用了这些，并在整个应用程序中重复使用它们。
3.  我已经尝试为文本字段的“模糊”事件添加一个侦听器，但这似乎没有被适当地触发。

就是这样。我有点不知所措。zIndexing 在 iPhone 上的表现也很奇怪，我还没有在 Android 上尝试过。此外，正如我上面提到的，我使用的许多文本字段都封装在具有设置宽度/高度的小视图中——所以我认为这会影响 Z 索引的功能。

所以根本问题是：当单击焦点所在的文本字段之外的*任何内容时，关闭键盘的最佳方法是什么？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:45:48.077

如果我是正确的，点击事件会通过所有视图和窗口传播，因此可以修改您的#1 选项以检查最底层（视图或窗口）上的点击，检查其来源然后决定做什么。

# ruby-on-rails - Rails 3.1.4 上的资产管道 - 路径正确但样式表路径错误的 Javascript

> ID：11001784
> 
> 赞同：0
> 
> 时间：2012-06-12T17:31:11.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, heroku, asset-pipeline

我的资产管道似乎坏了……

它发生在升级后：

*   **从**“3.1.0”**到**“3.1.4”的****轨道****
*****   **指南针轨道**从**'1.0.0.rc.3'**到**'1.0.2'***   **指南针**从**“0.12.rc.1”**到**“0.12.1”******

 ****`<head>`JS 位于（正确路径）下，`/assets/`但 CSS 位于`/stylesheets/`（错误路径）下。真实例子：

```
<link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css">
<script src="/assets/jquery.js?body=1" type="text/javascript"></script> 
```

我的 application.html.erb 文件：

```
<%= stylesheet_link_tag    "application" %>
<%= javascript_include_tag "application" %> 
```

我怎样才能让'styleesheet_link_tag'指向`/assets/`而不是`/stylesheets/`？

## 编辑

是`mobile-fu`宝石版本`0.3.0`导致了这种奇怪的行为。我不再使用它，问题消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:52:29.890

您可以将其添加到 application.erb 文件并检查一次吗？

```
config.assets.prefix = "/assets" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:04:34.120

检查你的`config/compass.rb`文件。那里可能有一个 css_path 设置。****

# iphone - Need a robust solution to keyboard entry of an integer value in Settings bundle

> ID：11001786
> 
> 赞同：0
> 
> 时间：2012-06-12T17:31:19.670
> 
> 标签：iphone, ios5, settings, settings.bundle

I have an integer value that spans a range so large it is impractical to use a slider, as it lacks the sensitivity to pick out an exact value in that range.

I used a PSTextFieldSpecifier instead, and set the keyboard to Numbers. However, in Settings.app, the copy and paste function allows text to be inserted into what should be a numeric field.

Does anyone have a solution to the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:48:32.013

I have always implemented this with a custom

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

routine. You monitor the characters as they come in and only accept the numerics.

I used a UITextField, and implemented the UITextFieldDelegate methods outlined below:

```
// This method enforces the textField to give up first responder and return
-(BOOL)textFieldShouldReturn:(UITextField *)textField{
    [textField resignFirstResponder];
    return YES;
}

// This method copies the current UITextField' text into a string used for editing
// comparing, and for if a cancelation occurs we can replace with the original text
-(void)textFieldDidBeginEditing:(UITextField *)textField{
    initialValueWhenEntering = [NSString stringWithString:textField.text];
    [initialValueWhenEntering retain];
}

// This routine enforces that only a single period or numerics be taken into the new
// value for the input
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    unsigned int stringLength = (unsigned int)[textField.text lengthOfBytesUsingEncoding:NSASCIIStringEncoding];
    unsigned int counter;
    unsigned int periodCounter = 0;

    // Test to make sure there wasnt already some periods in the initial string
    for(counter = 0; counter < stringLength; counter++){
        if(   [textField.text characterAtIndex:(NSUInteger)counter] != '.' && 
            ( [textField.text characterAtIndex:(NSUInteger)counter] < '0' ||
              [textField.text characterAtIndex:(NSUInteger)counter] > '9' ) ){
            return NO;
        }else if( [textField.text characterAtIndex:(NSUInteger)counter] == '.' ){
            periodCounter++;
        }
    }

    stringLength = (unsigned int)[string lengthOfBytesUsingEncoding:NSASCIIStringEncoding];
    for(counter = 0; counter < stringLength; counter++){
        if(   [string characterAtIndex:(NSUInteger)counter] != '.' && 
            ( [string characterAtIndex:(NSUInteger)counter] < '0' || [string characterAtIndex:(NSUInteger)counter] > '9' ) ){
            return NO;
        }else if( [string characterAtIndex:(NSUInteger)counter] == '.' ){
            periodCounter++;
        }
    }

    if( periodCounter <= 1 ){
        return YES;
    }else{
        return NO;
    }
} 
```

And finally the routine that gets automatically called when the textfield has ended editing

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
    unsigned int stringLength = (unsigned int)[textField.text
                                lengthOfBytesUsingEncoding:NSASCIIStringEncoding];
    unsigned int counter;

    if( 0 == stringLength ){
        textField.text = initialValueWhenEntering;

        float temperature = [textField.text floatValue];

        // Set the temperature of all element boxes
        for(counter = MIN_ELEMENT_INDEX; counter <= MAX_ELEMENT_INDEX; counter++){
            [periodicButtons[counter] setOutputType:myGraphType aValue:temperature];
        }
    }else if( 1 == stringLength ){
        if( [textField.text characterAtIndex:(NSUInteger)0] == '.' ){
            textField.text = initialValueWhenEntering;
        }

        float temperature = [textField.text floatValue];

        textField.text = [NSString stringWithFormat:@"%.2f", temperature];

        // Set the temperature of all element boxes
        for(counter = MIN_ELEMENT_INDEX; counter <= MAX_ELEMENT_INDEX; counter++){
            [periodicButtons[counter] setOutputType:myGraphType aValue:temperature];
        }
    }else{ // Should be a semi-valid number at this point
        float temperature = [textField.text floatValue];

        if( temperature > 5900.0 ){
            temperature = 5900.0;
        }

        textField.text = [NSString stringWithFormat:@"%.2f", temperature];

        // Set the temperature of all element boxes
        for(counter = MIN_ELEMENT_INDEX; counter <= MAX_ELEMENT_INDEX; counter++){
            [periodicButtons[counter] setOutputType:myGraphType aValue:temperature];
        }
    }

    [initialValueWhenEntering release];
} 
```

In my example, I did perform value limit checking, but this code could be deleted.

# c++ - 对负值使用计数排序？

> ID：11001797
> 
> 赞同：7
> 
> 时间：2012-06-12T17:32:06.757
> 
> 标签：c++, sorting

我有以下代码，但这仅适用于无符号整数，我的目标是编写一个适用于所有整数的代码......

```
void CountingSort(vector<int> & a, vector<int> & b)
{
    int k=*max_element(a.begin(),a.end());
    k++;

    vector <int> c(k);

    for (int i=0;i<a.size();i++)
        c[a[i]]++;
    for (int i=1;i<k;i++)
        c[i]=c[i]+c[i-1];
    for (int i=0;i<a.size();i++)
    {
        b[c[a[i]]-1]=a[i];
        c[a[i]]--;
    }
} 
```

如何将其更改为适用于所有整数类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:53:05.637

首先计算最小值和最大值：

```
int k_min=*max_element(a.begin(),a.end());
int k_max=*min_element(a.begin(),a.end());
int k = k_max - k_min + 1; 
```

对以下代码应用一些更改，替换`a[i]`为`a[i] - k_min`; 其余的应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:23:54.270

thnks Anatolyg 我的新代码是：

```
void Counting_Sort(vector <int>& a, vector <int>& b)
{
int k=*max_element(a.begin(), a.end());
int m=*min_element(a.begin(), a.end());

  int n=k-m+1;
  vector<int>v(n);
for(int i=0; i<a.size(); i++)
   v[a[i]-m]++;
 for(int i=1; i<v.size(); i++)
   v[i]=v[i]+v[i-1];
  for(int i=a.size()-1;i>=0; i--)
  { 
     b[v[a[i]-m]-1] = a[i]; 
     v[a[i]-m]--; 
  }
} 
```

# javascript - Javascript中的全局变量不更新

> ID：11001800
> 
> 赞同：0
> 
> 时间：2012-06-12T17:32:16.767
> 
> 标签：javascript

我花了最后 30 分钟来解决这个问题。

让我们假设以下情况：

```
<script>
    var x = 0 ; //global variable
    function compute() {
        x = x+1; 
    }
</script> 
```

x 的值是否应该增加，以便我以后可以将其访问到函数中？

我有以下代码：

```
var id1 = 0;
var id2 = 0; 
$.ajax({
    url: "http://localhost/twee/chat/comment",
    type: 'POST',
    data: form_data,
    success: function(data) {
        var data1 = parseInt(data);
        id1 = id2 = data1; 
    }
}); 
```

我希望能够在以后的函数中访问 id1 和 id2 的值（自从我将它们声明为 0 后更新）。

但是，该值保持为零，并且可以很好地检索 data1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:39:21.523

我不知道你什么时候尝试使用 ID，但是 ajax 调用是异步的，所以如果你尝试像这样读取变量：

```
var id1 = 0;
var id3 = 0 ; 
$.ajax({
         url: "http://localhost/twee/chat/comment",
         type: 'POST',
         data: form_data,
         success: function(data) {
              var data1 = parseInt(data, 10);
          id1 = id2 = data1;

         alert(id1) // Will alert whatever number returned as data. 
}});

alert(id1) // Will alert 0 
```

第二个警报将与 ajax 调用几乎同时被调用，此时数据尚未更新，而第一个警报将在数据返回之前不会被调用。如果要使用 ID，则必须在成功回调中或在成功回调中调用的函数中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:38:31.020

您确定要在回调运行 `id1`后检查 的值吗？是一个异步操作，在响应从服务器返回之前不会调用您的回调。`success``ajax`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:42:34.920

您的 ajax 回调是异步的。`success`在远程服务器响应之前，它不会运行该功能。一旦完成，您的函数就会执行，并且变量会递增。

这是 Javascript 编程和一般异步编程的一个难点：同时有许多球在空中，很难推断它们如何完成它们的操作，以及何时可以看到结果。

很容易将 $.ajax() 调用视为“从服务器获取结果”，但实际上它是“向服务器发出请求”。谁知道什么时候可以结束？

# web-services - 如何使用 apache commons pool 通过超时将对象返回到池中

> ID：11001801
> 
> 赞同：5
> 
> 时间：2012-06-12T17:32:18.427
> 
> 标签：web-services, connection-pooling, production-environment, apache-commons-pool

我正在使用 Apache Commons Pool 库来维护一个 couchbase 连接池（可以看作任何类型的连接，并不重要）。

我面临的问题是，我发现将对象返回池的唯一方法是通过调用**GenericObjectPool类的****returnObject**方法以编程方式完成。这迫使应用程序保证一旦从池中借用对象就返回，而不管应用程序中的任何异常或意外行为。

 **尽管我在整个应用程序中控制对象返回到池中，但我发现完全依赖程序员返回对象是有风险的。有没有人知道一旦超过给定超时（回收对象）自动返回对象的方法。一旦借用对象超过超时，它也可以以任何方式使池创建新对象。

PS：我的应用程序公开了一组 REST Web 服务，它们连接到分布式内存缓存服务器（Couchbase）。该池创建一组到 Couchbase 的连接。

任何建议都会有所帮助！

**编辑**

我尝试的第一个解决方案是创建一个新类 ( **CouchbaseClientHandler )，其中包含来自存储在池 (** **CouchbaseClient** )中的对象类型的连接对象。我已经在**CouchbaseClientHandler上实现了***finalize*方法，以确保如果对该对象的引用因意外异常而丢失，则关联实际上返回到池中。当垃圾收集器销毁对象时，该对象将被返回。这没有按预期工作。无法预测垃圾收集器何时会到达回收对象，而且它通常花费的时间比预期的要长。

 **我现在实际工作的解决方案有点不同，但更安全。由于我的池旨在供 Web 服务使用，并且由于每个 Web 服务都在单独且唯一的线程中运行（我在 Tomcat 上使用 Jersey），因此我决定使用映射唯一线程 ID 的静态 hashmap 变量到在执行 web 服务时从池中借用的**CouchbaseClient**对象列表。由于我的 Web 服务的设计方式是，无论发生什么，处理程序方法都会在返回之前处理最终输出，因此我可以确保始终运行一个方法，将那些借用的对象（连接）返回到池中，即没有被有效地返回到池中。

尽管这对我来说效果很好，但我真的很想知道是否有更好的方法来通过超时借用的对象来声明或擦除尚未归还的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-05T20:10:31.917

假设销毁/创建新方法是可以的，并且您使用的是 2.0+ 版本的公共池，您可以使用废弃对象跟踪和删除来确保在对象被借用且永不归还时不会永久泄漏容量。有关配置设置和将 AbandonedConfig 实例作为参数的 GenericObjectPool 构造函数，请参见 AbandonedConfig 的 javadoc。启用废弃对象跟踪和删除后，当池容量不足时，池将销毁已借用但未归还时间超过 removeAbandonedTimeout 的实例。

如果由于某种原因您必须使用 1.x 版池，您可以获取源代码或直接使用 DBCP 1.x 附带的 AbandonedObjectPool。****

# jquery - 访问 jQuery UI 对话框中的 iframe 中的元素

> ID：11001811
> 
> 赞同：4
> 
> 时间：2012-06-12T17:33:01.690
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

HTML 非常简单，在我的页面上有

```
<div id="notificationDialog" title="View Notification"></div> 
```

我根据查看页面的用户动态加载通知，并将它们显示在 iframe 中，该 iframe 位于 jQuery ui 对话框中。基本上，

```
function viewNotif(nid) {
  var wWidth       = jQuery(window).width();
  var dWidth       = wWidth * 0.5;
  var $notifIframe = jQuery('<iframe />', {
      name: 'myFrame',
      id:   'myFrame',
      src: "/modals/modal_notification.php?nid="+nid,
      width:"100%",
      height:"100%",
      align:"center",
      scrolling:"auto",
      frameborder:"0"
  }); 

  jQuery('#notificationDialog').html($notifIframe.clone());

  jQuery('#notificationDialog').dialog({
      autoOpen: false,
      height: auto,
      width: dWidth,
      modal: true
  });

  jQuery('#notificationDialog').dialog('open');
} 
```

我正在尝试访问 jQuery ui 对话框内 iframe 内的 div 的高度值，但迄今为止无法这样做。我如何获得 div 的高度值，div 的 id 是 notification_container，它在 iframe 内，在 notificationDialog 内？

编辑 - 我应该提到该函数在页面的 onClick 中调用，并将通知 ID (nid) 传递给该函数以显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:57:05.550

```
$("iframe").contents().find("#selector"); 
```

需要注意的是，只有在本地访问 iframe 内容时才允许这样做。否则，您将收到拒绝访问错误。

# configuration - 为 CQ 存储特定于环境的 OSGI 配置

> ID：11001813
> 
> 赞同：4
> 
> 时间：2012-06-12T17:33:08.430
> 
> 标签：configuration, osgi, aem, day-cq

我想存储我们在 SVN 中制作的 Felix 配置，并将它们应用于自动构建生成的包中的 CQ。为此，我一直按照**[此 CQ5 OSGI 配置文档](http://dev.day.com/docs/en/cq/current/deploying/configuring_osgi.html#OSGi%20Configuration%20in%20the%20Repository)**中的说明创建 sling:OsgiConfig 配置节点，以将其签入 SVN。

如何存储**特定于环境的**配置？例如，我希望 DEV 环境的日志配置与 PROD 环境将使用的日志配置不同。我想理想地将***两种***环境的配置存储在 SVN 中，并让环境根据环境选择要使用的配置。

我该怎么做——或者我应该为特定环境的配置使用不同的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:06:52.857

要具有特定于环境的配置，您应该在 CQ5 中使用运行模式 - 这里有很多关于如何实现[**this_page的信息**](http://dev.day.com/content/kb/home/cq5/CQ5SystemAdministration/RunModeDependentConfigAndInstall.html)

希望这可以帮助。

# android - 如何在网格布局中的每个图像下添加 TextView？

> ID：11001815
> 
> 赞同：0
> 
> 时间：2012-06-12T17:33:10.360
> 
> 标签：android, gridview

我需要在每张图片下显示图片描述，但出现无法转换的`GridView`错误`TextView`：

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <GridView 
        android:id="@+id/main_gridview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:numColumns="2"
        android:padding="10dp"
        android:verticalSpacing="30dp" />

    <TextView
        android:id="@+id/tvIconDesc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15sp" />
</LinearLayout> 
```

代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        TextView textView; 
        if (convertView == null) { 
            textView = new TextView(mContext);
            imageView = new ImageView(mContext);
            imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
          //imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
        } else {
            imageView = (ImageView) convertView;
            textView = (TextView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        textView.setText(thumbDesc[position]);
        return imageView;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:44:21.270

convertView 将成为您的父视图，在这种情况下是 GridView。这就是为什么您收到无法转换错误的原因。您正在尝试将其转换为 ImageView （以及 TextView ）。

您应该将 ImageView 和 TextView 放在一个 cell.xml 布局文件中。然后在 getView() 调用期间膨胀并填充该 xml 文件，而不是为网格中的每个单元格创建新的 TextView / ImageView 实例。

这是涵盖这些主题[的教程。](http://www.mkyong.com/android/android-gridview-example/)他甚至使用了您的具体示例（每个单元格中的文本和图像）。完成本教程后，您只需稍作修改，以使文本位于图像下方，如果这是您希望它出现的方式。

# ruby-on-rails-3 - 通过 jruby 和 warbler 使用资产管道和公共/图像

> ID：11001816
> 
> 赞同：3
> 
> 时间：2012-06-12T17:33:12.730
> 
> 标签：ruby-on-rails-3, jruby, asset-pipeline, warbler

我正在使用 warbler 将 RoR 应用程序部署为 war 文件。在我参与之前，应用程序中的少数图像在资产管道中，但我的职责是介绍易滑地图和本土地图图块。

因为磁贴占用了大量空间，而且它们不会像应用程序那样频繁地更改，所以我们的想法是简单地从`public/images/tiles`. 将部署应用程序其余部分的 war 文件，然后将切片解压缩到正确的目录中。

这在开发模式下工作正常，但莺部署使用上下文路径，并且瓦片得到 404ed，因为它们位于 /contextpath/images ，而不是 /images

我之前没有在 jruby 环境中工作过，而团队的其他成员恰好在本周外出度假（哈！）。Nick Sieger 关于`config.action_controller.asset_host`在[Warbler 使用的建议：我的图像在哪里](https://stackoverflow.com/questions/1191175/warbler-where-are-my-images)破坏了通过资产工作的图像和 css，所以我会感谢任何其他允许资产和公共共存的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T12:03:37.107

在 production.rb 中尝试这条线`config.assets.precompile += %w( *.js *.scss *.coffee *.css )`然后运行`jruby -S rake assets:precompile`。它将你所有的资产编译成静态资产，然后warbler会相应地打包它们，它应该可以解决你的问题。

您可以检查的另一件事是您如何指向视图中的图像。如果您希望在其中找到它们，`/image`则应将路径写为`<%= image_tag "\image" %>`. 关于尾随`\`。

# node.js - 允许对 Heroku 上的 Express/Node.js 应用程序的 CORS REST 请求

> ID：11001817
> 
> 赞同：101
> 
> 时间：2012-06-12T17:33:13.083
> 
> 标签：node.js, rest, heroku, express, cors

我已经在 node.js 的 express 框架上编写了一个 REST API，它适用于来自 Chrome 中的 js 控制台和 URL 栏等的请求。我现在正试图让它在另一个应用程序上处理来自另一个应用程序的请求域（CORS）。

javascript 前端自动发出的第一个请求是到 /api/search?uri=，并且似乎在“预检”OPTIONS 请求上失败。

在我的快递应用程序中，我正在添加 CORS 标头，使用：

```
var allowCrossDomain = function(req, res, next) {
    res.header('Access-Control-Allow-Origin', '*');
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With');

    // intercept OPTIONS method
    if ('OPTIONS' == req.method) {
      res.send(200);
    }
    else {
      next();
    }
}; 
```

和：

```
app.configure(function () {
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(allowCrossDomain);
  app.use(express.static(path.join(application_root, "public")));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

从 Chrome 控制台我得到这些标题：

请求网址：http://furious-night-5419.herokuapp.com/api/search?uri=http%3A%2F%2Flocalhost%3A5000%2Fcollections%2F1%2Fdocuments%2F1

请求方法：选项

状态码：200 OK

请求标头

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, x-annotator-auth-token, accept
Access-Control-Request-Method:GET
Connection:keep-alive
Host:furious-night-5419.herokuapp.com
Origin:http://localhost:5000
Referer:http://localhost:5000/collections/1/documents/1
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5 
```

查询字符串参数

```
uri:http://localhost:5000/collections/1/documents/1 
```

响应标头

```
Allow:GET
Connection:keep-alive
Content-Length:3
Content-Type:text/html; charset=utf-8
X-Powered-By:Express 
```

这看起来像 API 应用程序发送的缺少正确的标头吗？

谢谢。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-15T20:16:14.497

我已经在一个干净的 ExpressJS 应用程序上检查了你的代码，它工作得很好。

尝试将您的移动`app.use(allowCrossDomain)`到配置功能的顶部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-06T02:35:57.697

我之所以将其添加为*答案*，只是因为原始帖子是作为评论放入的，因此当我第一次浏览此页面时，它确实被您忽略了。

正如@ConnorLeech 在他对上述已接受答案的评论中指出的那样，有一个非常方便的 npm 包，毫不奇怪，[名为 cors](https://github.com/expressjs/cors)。它的使用很简单`var cors = require('cors'); app.use(cors());`（同样，抄自 Leech 先生的回答），也可以按照他们的[文档](https://github.com/expressjs/cors)中所述的更严格、更可配置的方式应用。

可能还值得指出的是，我上面提到的原始评论是在 2014 年发表的。现在是 2019 年，查看[npm 包的 github 页面](https://github.com/expressjs/cors)，repo 是在 9 天前更新的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-15T08:08:24.437

要支持带有凭据的 cookie，您需要此行 `xhr.withCredentials = true;`

[mdn 文档 xhr.withCredentials](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials "文档")

在 Express Server 中，将此块添加到所有其他块之前

```
`app.all('*', function(req, res, next) {
     var origin = req.get('origin'); 
     res.header('Access-Control-Allow-Origin', origin);
     res.header("Access-Control-Allow-Headers", "X-Requested-With");
     res.header('Access-Control-Allow-Headers', 'Content-Type');
     next();
});` 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-10T18:19:30.657

[![在此处输入图像描述](../Images/e4c08ee97f919ea16422de9e4136ea9a.png)](https://i.stack.imgur.com/AH7x6.png)

请按照以下步骤操作：

> npm install cors --save

在你的根 js 文件中：

```
 var express = require('express') 
 var cors = require('cors')
 var app = express()
 app.use(cors()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-18T00:05:17.900

对于大多数浏览此问题的人来说，情况并非如此，但我遇到了完全相同的问题，并且解决方案与`CORS`.

原来 JSON Web Token secret`string`没有在环境变量中定义，因此无法对令牌进行签名。这导致任何`POST`依赖检查或签署令牌以获得超时并返回`503`错误的请求，告诉浏览器有问题`CORS`，但事实并非如此。在 Heroku 中添加环境变量解决了这个问题。

我希望这可以帮助别人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-21T23:40:18.790

Cors 错误可能掩盖了您的实际错误。查看您的 heroku 构建日志以查看您潜在的真正错误。我的是这个。

[Heroku Postgres：“psql：致命：主机没有 pg_hba.conf 条目”](https://stackoverflow.com/questions/60048669/heroku-postgres-psql-fatal-no-pg-hba-conf-entry-for-host)

# sql-server-2005 - 为 MSSQL 中的新列上传数据

> ID：11001818
> 
> 赞同：1
> 
> 时间：2012-06-12T17:33:14.597
> 
> 标签：sql-server-2005

我在数据库中添加了一个新列，并希望从电子表格中填充它。是否有一个简单的查询可以根据电子表格中与数据库中的列匹配的另一列来获取数据？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:44:19.367

我知道两种方法：

编辑电子表格，创建一个公式

```
="update mytable set mynewcolumn = " + A1 + " where " + B1 + " = primaryKeyColumn" 
```

其中 A1 表示第一个包含数据的单元格，B1 是将要更新的行的主键值。然后将单元格向下拖动到右下角，重复公式。复制公式生成的文本，粘贴到 SQL Mgmt Studio 并运行。

或者，您可以使用 MSSQL 的导入引擎，它允许您选择电子表格作为数据源。从那里您可以将您的列映射到新列。

# linux - 如何将新的 LDAP 用户添加到颠覆

> ID：11001820
> 
> 赞同：0
> 
> 时间：2012-06-12T17:33:16.767
> 
> 标签：linux, svn, ldap, collabnet

我们的 SVN 管理员放假了，我需要添加一个新用户到 subversion。

我们在 RedHat 盒子上使用 Collabnet Subversion。

我找到了包含所有配置文件的**CollabNet_Subversion/conf/**目录，包括我可以看到的包含我们所有用户及其所属组的身份验证文件。

我们所有的用户都需要使用他们的 LDAP 凭据登录，所以我不需要更改任何内容。

它看起来像这样：company_auth_production

```
 `[groups]
    it-leads = jsmith, hsimpson, pgriffin
    it-all = ajolie, rwitherspoon, @it-leads

    [/]
    * =

    [prod:/]
    @it-all = rw
    ` 
```

所以我添加了新用户并重新启动了颠覆。但这似乎并没有奏效。我错过了其他东西吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:01:34.677

在你的 apache 配置中通常是一个**require**指令（例如“require group”或“require user”）。通常有一个用户必须属于访问 svn 的特定组（例如 svnusers 等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:13:54.780

一种。您提到有“company_auth_production”文件。请检查是否有其他授权文件，可能是“authz”。你能否提供更多关于这方面的信息。

根据您文件中的结构

[产品：/] @it-all = rw

应该已经向“it-all”的所有用户授予读写访问权限，直到路径“prod”。

湾。如果这不起作用，请尝试使用“VisualSVN 服务器”。它有一个非常好的 gui 来添加用户并给他们特权。

希望这可以帮助。

# c# - 使用构建后事件将文件从一个项目复制到另一个项目...VS2010

> ID：11001822
> 
> 赞同：148
> 
> 时间：2012-06-12T17:33:36.000
> 
> 标签：c#, visual-studio-2010

我有一个包含 3 个项目的解决方案。我需要将视图从一个项目复制到另一个项目。我可以通过构建后事件复制创建的 DLL，如下所示：

![在此处输入图像描述](../Images/525a564cf079b0a71684e591df538600.png)

所以我想将项目一“/Views/ModuleHome/Index.cshtml”中的文件复制到项目二中的文件夹中。如何通过构建后事件将文件复制到我想要的项目中？谢谢

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2012-06-12T17:42:51.003

```
xcopy "$(ProjectDir)Views\Home\Index.cshtml" "$(SolutionDir)MEFMVCPOC\Views\Home" 
```

如果你想复制整个文件夹：

```
xcopy /E /Y "$(ProjectDir)Views" "$(SolutionDir)MEFMVCPOC\Views" 
```

* * *

更新：这是工作版本

```
xcopy "$(ProjectDir)Views\ModuleAHome\Index.cshtml" "$(SolutionDir)MEFMVCPOC\Views\ModuleAHome\" /Y /I 
```

以下是一些常用的开关`xcopy`：

> *   **/I** - 如果复制多个文件，则将其视为目录。
> *   **/Q** - 不显示正在复制的文件。
> *   **/S** - 复制子目录，除非为空。
> *   **/E** - 复制空子目录。
> *   **/Y** - 不提示覆盖现有文件。
> *   **/R** - 覆盖只读文件。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-14T07:43:07.780

```
xcopy "your-source-path" "your-destination-path" /D /y /s /r /exclude:path-to-txt- file\ExcludedFilesList.txt 
```

注意源路径和目标路径中的引号，而不是 exludelist txt 文件的路径中的引号。

ExcludedFilesList.txt 的内容如下：.cs\

我正在使用此命令将文件从我的解决方案中的一个项目复制到另一个项目，但不包括 .cs 文件。

```
/D Copy only files that are modified in sourcepath
/y Suppresses prompting to confirm you want to overwrite an existing destination file.
/s Copies directories and subdirectories except empty ones.
/r Overwrites read-only files. 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-07-20T07:18:12.867

xcopy "$(TargetDir)*$(TargetExt)" "$(SolutionDir)\Scripts\MigrationScripts\Library\" /F /R /Y /I

/F – 显示完整的源和目标文件名

/R - 这将覆盖只读文件

/Y - 禁止提示覆盖现有文件

/I - 假设目标是目录（但必须以 结尾）

一个小技巧——在目标中你必须以字符 \ 结尾来告诉 xcopy 目标是目录而不是文件！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-12T17:40:40.007

调用`Batch`文件，它将`Xcopy`为所需文件源运行到目标

```
call "$(SolutionDir)scripts\copyifnewer.bat" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-07-03T21:20:47.430

我像这样使用它。

```
xcopy "$(TargetDir)$(TargetName).dll" "$(SolutionDir)Lib\TIRM\x86\" /F /Y 
xcopy "$(TargetDir)$(TargetName).lib" "$(SolutionDir)Lib\TIRM\x86\" /F /Y 

/F : Copy source is File   
/Y : Overwrite and don't ask me 
```

注意这个的使用。$(TargetDir) 已经 '\' "D:\MyProject\bin\" = $(TargetDir)

您可以在命令编辑器中找到宏

[![在此处输入图像描述](../Images/29667503ae61803f609ec05a54f85975.png)](https://i.stack.imgur.com/chSwl.jpg)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-21T15:11:57.173

这个命令对我来说就像一个魅力：

```
for /r "$(SolutionDir)libraries" %%f in (*.dll, *.exe) do @xcopy "%%f" "$(TargetDir)" 
```

它**递归地**将每个`dll`和`exe`文件复制`MySolutionPath\libraries`到`bin\debug`or`bin\release`中。

[你可以在这里](http://www.siddharthpandey.net/how-to-copy-any-files-using-visual-studios-build-events/)找到更多信息

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-08T17:25:25.650

和之前的回复一样，我也建议`xcopy`。但是，我想用`/exclude`参数添加到 Hallgeir Engen 的答案中。该参数似乎存在一个错误，阻止它使用长路径名或包含空格的路径名，因为引号不起作用。路径名需要采用“DOS”格式，“Documents”转换为“DOCUME~1”（根据[this source](https://sevenx7x.wordpress.com/2009/01/02/xcopy-with-exclude-option-shows-cant-read-file/)）。

所以，如果你想使用 \exclude 参数，这里有一个解决[方法](https://social.msdn.microsoft.com/Forums/en-US/f71b3d63-7b77-4adf-8428-f83a2a96e433/problem-with-postbuild-event-using-xcopy-command-with-exclude-parameter?forum=csharpide)：

```
cd $(SolutionDir)
xcopy "source-relative-to-path-above" "destination-relative-to-path-above
/exclude:exclude-file-relative-path 
```

请注意，源路径和目标路径可以（并且应该，如果它们包含空格）在引号内，但**不是**排除文件的路径。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-08T15:02:46.167

如果您想考虑**平台**（x64、x86 等）和**配置**（调试或发布），它将是这样的：

```
xcopy "$(SolutionDir)\$(Platform)\$(Configuration)\$(TargetName).dll" "$(SolutionDir)TestDirectory\bin\$(Platform)\$(Configuration)\" /F /Y 
```

# c - 对结构进行排序时 Swenson 的 Timsort 实现问题

> ID：11001823
> 
> 赞同：0
> 
> 时间：2012-06-12T17:33:43.883
> 
> 标签：c, visual-studio-2010, macros, c99, timsort

我发现了 Timsort 的 Swenson 的 C 实现： [https](https://github.com/swenson/sort) ://github.com/swenson/sort在较早的 SO 问题之一中提到。

我遇到了两个问题：

1）要使用它，我需要定义适合我想要排序的类型的 SORT_CMP 宏。我的类型被定义为（这里有点简化）：

```
typedef struct{
    int a;
    int b;
} MyType 
```

我尝试定义：

```
#define SORT_TYPE MyType
#define SORT_CMP(x,y) (x.a - y.a) 
```

但我不断收到一个错误：“在不是结构或联合的东西中请求成员'a'”我认为也许 x 和 y 将是指针，但是：

```
#define SORT_CMP(x,y) (x->a - y->a) 
```

也不行。你能帮我解决这个问题吗？我是 C 新手，可能缺少一些基本的东西。

2）有没有办法在 Visual Studio 中编译该代码？它使用来自较新的 C 标准的东西（比如块中间的声明）并且 cl.exe 不接受它。我使用 GCC (mingw) 编译它，但 mingw 的其余代码比 VC 慢 20%（使用 O2 或 O3 标志 vs lc.exe 使用 /Ox）所以我可以从使用 Timsort 而不是 stdlib qsort 中获得任何收益不会弥补的。Pelles 编译器也是如此。我的大部分数据都有很多部分排序的序列，排序需要大约 50% 的执行时间，所以我觉得假设我让它在 VC 中工作，这里有收获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:55:33.773

您可以尝试在宏参数周​​围添加括号，如下所示：

```
#define SORT_CMP(x,y) ((x).a - (y).a) 
```

该宏很可能与指向 SORT_TYPE 变量的取消引用指针一起使用：

```
SORT_TYPE * pMyTypeVar1, pMyTypeVar2;
...
SORT_CMP(*pMyTypeVar, *pMyTypeVar2); 
```

如果宏参数周围的括号丢失，则预处理器会生成如下内容：

```
(*pMyTypeVar1.a - *pMyTypeVar2.a) 
```

并且由于点运算符比星运算符绑定得更紧密，编译器会尝试找到`a`指针的成员，`pMyTypeVar1`而`pMyTypeVar2`这将不起作用。

按照建议使用括号将导致：

```
((*pMyTypeVar1).a - (*pMyTypeVar2).a) 
```

这样编译器首先取消引用`pMyTypeVar1`，`pMyTypeVar2`最后能够找到 member `a`。

# sql-server - 从我的本地机器恢复到远程数据库

> ID：11001828
> 
> 赞同：0
> 
> 时间：2012-06-12T17:34:07.433
> 
> 标签：sql-server, database, backup, restore

我在**Go Daddy**注册并希望从我的本地计算机恢复数据库。他们提供给我的工具不起作用，除非它来自他们。我正在尝试从本地 SQL 服务器恢复，但是当我浏览时，我无法恢复远程数据库的本地文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:38:11.163

他们故意阻止用户恢复对他们来说是“外来”的备份，以满足模糊的 Microsoft 安全建议。

您必须在本地计算机和主机上的空数据库之间执行模式比较和数据比较，以生成脚本以重新创建所有对象和数据。（在源代码控制存储中提供这些脚本也会很有帮助。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:32:31.080

我发现的最好方法是通过此代码将数据库脚本化为数据库转储

```
SET NOCOUNT ON
GO

PRINT 'Using Master database'
USE master
GO

PRINT 'Checking for the existence of this procedure'
IF (SELECT OBJECT_ID('sp_generate_inserts','P')) IS NOT NULL --means, the procedure already exists
    BEGIN
        PRINT 'Procedure already exists. So, dropping it'
        DROP PROC sp_generate_inserts
    END
GO

CREATE PROC sp_generate_inserts
(
    @table_name varchar(776),       -- The table/view for which the INSERT statements will be generated using the existing data
    @target_table varchar(776) = NULL,  -- Use this parameter to specify a different table name into which the data will be inserted
    @include_column_list bit = 1,       -- Use this parameter to include/ommit column list in the generated INSERT statement
    @from varchar(800) = NULL,      -- Use this parameter to filter the rows based on a filter condition (using WHERE)
    @include_timestamp bit = 0,         -- Specify 1 for this parameter, if you want to include the TIMESTAMP/ROWVERSION column's data in the INSERT statement
    @debug_mode bit = 0,            -- If @debug_mode is set to 1, the SQL statements constructed by this procedure will be printed for later examination
    @owner varchar(64) = NULL,      -- Use this parameter if you are not the owner of the table
    @ommit_images bit = 0,          -- Use this parameter to generate INSERT statements by omitting the 'image' columns
    @ommit_identity bit = 0,        -- Use this parameter to ommit the identity columns
    @top int = NULL,            -- Use this parameter to generate INSERT statements only for the TOP n rows
    @cols_to_include varchar(8000) = NULL,  -- List of columns to be included in the INSERT statement
    @cols_to_exclude varchar(8000) = NULL,  -- List of columns to be excluded from the INSERT statement
    @disable_constraints bit = 0,       -- When 1, disables foreign key constraints and enables them after the INSERT statements
    @ommit_computed_cols bit = 0        -- When 1, computed columns will not be included in the INSERT statement

)
AS
BEGIN

/***********************************************************************************************************
Procedure:  sp_generate_inserts  (Build 22) 
        (Copyright © 2002 Narayana Vyas Kondreddi. All rights reserved.)

Purpose:    To generate INSERT statements from existing data. 
        These INSERTS can be executed to regenerate the data at some other location.
        This procedure is also useful to create a database setup, where in you can 
        script your data along with your table definitions.

Written by: Narayana Vyas Kondreddi
            http://vyaskn.tripod.com

Acknowledgements:
        Divya Kalra -- For beta testing
        Mark Charsley   -- For reporting a problem with scripting uniqueidentifier columns with NULL values
        Artur Zeygman   -- For helping me simplify a bit of code for handling non-dbo owned tables
        Joris Laperre   -- For reporting a regression bug in handling text/ntext columns

Tested on:  SQL Server 7.0 and SQL Server 2000 and SQL Server 2005

Date created:   January 17th 2001 21:52 GMT

Date modified:  May 1st 2002 19:50 GMT

Email:      vyaskn@hotmail.com

NOTE:       This procedure may not work with tables with too many columns.
        Results can be unpredictable with huge text columns or SQL Server 2000's sql_variant data types
        Whenever possible, Use @include_column_list parameter to ommit column list in the INSERT statement, for better results
        IMPORTANT: This procedure is not tested with internation data (Extended characters or Unicode). If needed
        you might want to convert the datatypes of character variables in this procedure to their respective unicode counterparts
        like nchar and nvarchar

        ALSO NOTE THAT THIS PROCEDURE IS NOT UPDATED TO WORK WITH NEW DATA TYPES INTRODUCED IN SQL SERVER 2005 / YUKON

Example 1:  To generate INSERT statements for table 'titles':

        EXEC sp_generate_inserts 'titles'

Example 2:  To ommit the column list in the INSERT statement: (Column list is included by default)
        IMPORTANT: If you have too many columns, you are advised to ommit column list, as shown below,
        to avoid erroneous results

        EXEC sp_generate_inserts 'titles', @include_column_list = 0

Example 3:  To generate INSERT statements for 'titlesCopy' table from 'titles' table:

        EXEC sp_generate_inserts 'titles', 'titlesCopy'

Example 4:  To generate INSERT statements for 'titles' table for only those titles 
        which contain the word 'Computer' in them:
        NOTE: Do not complicate the FROM or WHERE clause here. It's assumed that you are good with T-SQL if you are using this parameter

        EXEC sp_generate_inserts 'titles', @from = "from titles where title like '%Computer%'"

Example 5:  To specify that you want to include TIMESTAMP column's data as well in the INSERT statement:
        (By default TIMESTAMP column's data is not scripted)

        EXEC sp_generate_inserts 'titles', @include_timestamp = 1

Example 6:  To print the debug information:

        EXEC sp_generate_inserts 'titles', @debug_mode = 1

Example 7:  If you are not the owner of the table, use @owner parameter to specify the owner name
        To use this option, you must have SELECT permissions on that table

        EXEC sp_generate_inserts Nickstable, @owner = 'Nick'

Example 8:  To generate INSERT statements for the rest of the columns excluding images
        When using this otion, DO NOT set @include_column_list parameter to 0.

        EXEC sp_generate_inserts imgtable, @ommit_images = 1

Example 9:  To generate INSERT statements excluding (ommiting) IDENTITY columns:
        (By default IDENTITY columns are included in the INSERT statement)

        EXEC sp_generate_inserts mytable, @ommit_identity = 1

Example 10:     To generate INSERT statements for the TOP 10 rows in the table:

        EXEC sp_generate_inserts mytable, @top = 10

Example 11:     To generate INSERT statements with only those columns you want:

        EXEC sp_generate_inserts titles, @cols_to_include = "'title','title_id','au_id'"

Example 12:     To generate INSERT statements by omitting certain columns:

        EXEC sp_generate_inserts titles, @cols_to_exclude = "'title','title_id','au_id'"

Example 13: To avoid checking the foreign key constraints while loading data with INSERT statements:

        EXEC sp_generate_inserts titles, @disable_constraints = 1

Example 14:     To exclude computed columns from the INSERT statement:
        EXEC sp_generate_inserts MyTable, @ommit_computed_cols = 1
***********************************************************************************************************/

SET NOCOUNT ON

--Making sure user only uses either @cols_to_include or @cols_to_exclude
IF ((@cols_to_include IS NOT NULL) AND (@cols_to_exclude IS NOT NULL))
    BEGIN
        RAISERROR('Use either @cols_to_include or @cols_to_exclude. Do not use both the parameters at once',16,1)
        RETURN -1 --Failure. Reason: Both @cols_to_include and @cols_to_exclude parameters are specified
    END

--Making sure the @cols_to_include and @cols_to_exclude parameters are receiving values in proper format
IF ((@cols_to_include IS NOT NULL) AND (PATINDEX('''%''',@cols_to_include) = 0))
    BEGIN
        RAISERROR('Invalid use of @cols_to_include property',16,1)
        PRINT 'Specify column names surrounded by single quotes and separated by commas'
        PRINT 'Eg: EXEC sp_generate_inserts titles, @cols_to_include = "''title_id'',''title''"'
        RETURN -1 --Failure. Reason: Invalid use of @cols_to_include property
    END

IF ((@cols_to_exclude IS NOT NULL) AND (PATINDEX('''%''',@cols_to_exclude) = 0))
    BEGIN
        RAISERROR('Invalid use of @cols_to_exclude property',16,1)
        PRINT 'Specify column names surrounded by single quotes and separated by commas'
        PRINT 'Eg: EXEC sp_generate_inserts titles, @cols_to_exclude = "''title_id'',''title''"'
        RETURN -1 --Failure. Reason: Invalid use of @cols_to_exclude property
    END

--Checking to see if the database name is specified along wih the table name
--Your database context should be local to the table for which you want to generate INSERT statements
--specifying the database name is not allowed
IF (PARSENAME(@table_name,3)) IS NOT NULL
    BEGIN
        RAISERROR('Do not specify the database name. Be in the required database and just specify the table name.',16,1)
        RETURN -1 --Failure. Reason: Database name is specified along with the table name, which is not allowed
    END

--Checking for the existence of 'user table' or 'view'
--This procedure is not written to work on system tables
--To script the data in system tables, just create a view on the system tables and script the view instead

IF @owner IS NULL
    BEGIN
        IF ((OBJECT_ID(@table_name,'U') IS NULL) AND (OBJECT_ID(@table_name,'V') IS NULL)) 
            BEGIN
                RAISERROR('User table or view not found.',16,1)
                PRINT 'You may see this error, if you are not the owner of this table or view. In that case use @owner parameter to specify the owner name.'
                PRINT 'Make sure you have SELECT permission on that table or view.'
                RETURN -1 --Failure. Reason: There is no user table or view with this name
            END
    END
ELSE
    BEGIN
        IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = @table_name AND (TABLE_TYPE = 'BASE TABLE' OR TABLE_TYPE = 'VIEW') AND TABLE_SCHEMA = @owner)
            BEGIN
                RAISERROR('User table or view not found.',16,1)
                PRINT 'You may see this error, if you are not the owner of this table. In that case use @owner parameter to specify the owner name.'
                PRINT 'Make sure you have SELECT permission on that table or view.'
                RETURN -1 --Failure. Reason: There is no user table or view with this name      
            END
    END

--Variable declarations
DECLARE     @Column_ID int,         
        @Column_List varchar(8000), 
        @Column_Name varchar(128), 
        @Start_Insert varchar(786), 
        @Data_Type varchar(128), 
        @Actual_Values varchar(8000),   --This is the string that will be finally executed to generate INSERT statements
        @IDN varchar(128)       --Will contain the IDENTITY column's name in the table

--Variable Initialization
SET @IDN = ''
SET @Column_ID = 0
SET @Column_Name = ''
SET @Column_List = ''
SET @Actual_Values = ''

IF @owner IS NULL 
    BEGIN
        SET @Start_Insert = 'INSERT INTO ' + '[' + RTRIM(COALESCE(@target_table,@table_name)) + ']' 
    END
ELSE
    BEGIN
        SET @Start_Insert = 'INSERT ' + '[' + LTRIM(RTRIM(@owner)) + '].' + '[' + RTRIM(COALESCE(@target_table,@table_name)) + ']'      
    END

--To get the first column's ID

SELECT  @Column_ID = MIN(ORDINAL_POSITION)  
FROM    INFORMATION_SCHEMA.COLUMNS (NOLOCK) 
WHERE   TABLE_NAME = @table_name AND
(@owner IS NULL OR TABLE_SCHEMA = @owner)

--Loop through all the columns of the table, to get the column names and their data types
WHILE @Column_ID IS NOT NULL
    BEGIN
        SELECT  @Column_Name = QUOTENAME(COLUMN_NAME), 
        @Data_Type = DATA_TYPE 
        FROM    INFORMATION_SCHEMA.COLUMNS (NOLOCK) 
        WHERE   ORDINAL_POSITION = @Column_ID AND 
        TABLE_NAME = @table_name AND
        (@owner IS NULL OR TABLE_SCHEMA = @owner)

        IF @cols_to_include IS NOT NULL --Selecting only user specified columns
        BEGIN
            IF CHARINDEX( '''' + SUBSTRING(@Column_Name,2,LEN(@Column_Name)-2) + '''',@cols_to_include) = 0 
            BEGIN
                GOTO SKIP_LOOP
            END
        END

        IF @cols_to_exclude IS NOT NULL --Selecting only user specified columns
        BEGIN
            IF CHARINDEX( '''' + SUBSTRING(@Column_Name,2,LEN(@Column_Name)-2) + '''',@cols_to_exclude) <> 0 
            BEGIN
                GOTO SKIP_LOOP
            END
        END

        --Making sure to output SET IDENTITY_INSERT ON/OFF in case the table has an IDENTITY column
        IF (SELECT COLUMNPROPERTY( OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name),SUBSTRING(@Column_Name,2,LEN(@Column_Name) - 2),'IsIdentity')) = 1 
        BEGIN
            IF @ommit_identity = 0 --Determing whether to include or exclude the IDENTITY column
                SET @IDN = @Column_Name
            ELSE
                GOTO SKIP_LOOP          
        END

        --Making sure whether to output computed columns or not
        IF @ommit_computed_cols = 1
        BEGIN
            IF (SELECT COLUMNPROPERTY( OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name),SUBSTRING(@Column_Name,2,LEN(@Column_Name) - 2),'IsComputed')) = 1 
            BEGIN
                GOTO SKIP_LOOP                  
            END
        END

        --Tables with columns of IMAGE data type are not supported for obvious reasons
        IF(@Data_Type in ('image'))
            BEGIN
                IF (@ommit_images = 0)
                    BEGIN
                        RAISERROR('Tables with image columns are not supported.',16,1)
                        PRINT 'Use @ommit_images = 1 parameter to generate INSERTs for the rest of the columns.'
                        PRINT 'DO NOT ommit Column List in the INSERT statements. If you ommit column list using @include_column_list=0, the generated INSERTs will fail.'
                        RETURN -1 --Failure. Reason: There is a column with image data type
                    END
                ELSE
                    BEGIN
                    GOTO SKIP_LOOP
                    END
            END

        --Determining the data type of the column and depending on the data type, the VALUES part of
        --the INSERT statement is generated. Care is taken to handle columns with NULL values. Also
        --making sure, not to lose any data from flot, real, money, smallmomey, datetime columns
        SET @Actual_Values = @Actual_Values  +
        CASE 
            WHEN @Data_Type IN ('char','varchar','nchar','nvarchar') 
                THEN 
                    'COALESCE('''''''' + REPLACE(RTRIM(' + @Column_Name + '),'''''''','''''''''''')+'''''''',''NULL'')'
            WHEN @Data_Type IN ('datetime','smalldatetime') 
                THEN 
                    'COALESCE('''''''' + RTRIM(CONVERT(char,' + @Column_Name + ',109))+'''''''',''NULL'')'
            WHEN @Data_Type IN ('uniqueidentifier') 
                THEN  
                    'COALESCE('''''''' + REPLACE(CONVERT(char(255),RTRIM(' + @Column_Name + ')),'''''''','''''''''''')+'''''''',''NULL'')'
            WHEN @Data_Type IN ('text','ntext') 
                THEN  
                    'COALESCE('''''''' + REPLACE(CONVERT(char(8000),' + @Column_Name + '),'''''''','''''''''''')+'''''''',''NULL'')'                    
            WHEN @Data_Type IN ('binary','varbinary') 
                THEN  
                    'COALESCE(RTRIM(CONVERT(char,' + 'CONVERT(int,' + @Column_Name + '))),''NULL'')'  
            WHEN @Data_Type IN ('timestamp','rowversion') 
                THEN  
                    CASE 
                        WHEN @include_timestamp = 0 
                            THEN 
                                '''DEFAULT''' 
                            ELSE 
                                'COALESCE(RTRIM(CONVERT(char,' + 'CONVERT(int,' + @Column_Name + '))),''NULL'')'  
                    END
            WHEN @Data_Type IN ('float','real','money','smallmoney')
                THEN
                    'COALESCE(LTRIM(RTRIM(' + 'CONVERT(char, ' +  @Column_Name  + ',2)' + ')),''NULL'')' 
            ELSE 
                'COALESCE(LTRIM(RTRIM(' + 'CONVERT(char, ' +  @Column_Name  + ')' + ')),''NULL'')' 
        END   + '+' +  ''',''' + ' + '

        --Generating the column list for the INSERT statement
        SET @Column_List = @Column_List +  @Column_Name + ','   

        SKIP_LOOP: --The label used in GOTO

        SELECT  @Column_ID = MIN(ORDINAL_POSITION) 
        FROM    INFORMATION_SCHEMA.COLUMNS (NOLOCK) 
        WHERE   TABLE_NAME = @table_name AND 
        ORDINAL_POSITION > @Column_ID AND
        (@owner IS NULL OR TABLE_SCHEMA = @owner)

    --Loop ends here!
    END

--To get rid of the extra characters that got concatenated during the last run through the loop
SET @Column_List = LEFT(@Column_List,len(@Column_List) - 1)
SET @Actual_Values = LEFT(@Actual_Values,len(@Actual_Values) - 6)

IF LTRIM(@Column_List) = '' 
    BEGIN
        RAISERROR('No columns to select. There should at least be one column to generate the output',16,1)
        RETURN -1 --Failure. Reason: Looks like all the columns are ommitted using the @cols_to_exclude parameter
    END

--Forming the final string that will be executed, to output the INSERT statements
IF (@include_column_list <> 0)
    BEGIN
        SET @Actual_Values = 
            'SELECT ' +  
            CASE WHEN @top IS NULL OR @top < 0 THEN '' ELSE ' TOP ' + LTRIM(STR(@top)) + ' ' END + 
            '''' + RTRIM(@Start_Insert) + 
            ' ''+' + '''(' + RTRIM(@Column_List) +  '''+' + ''')''' + 
            ' +''VALUES(''+ ' +  @Actual_Values  + '+'')''' + ' ' + 
            COALESCE(@from,' FROM ' + CASE WHEN @owner IS NULL THEN '' ELSE '[' + LTRIM(RTRIM(@owner)) + '].' END + '[' + rtrim(@table_name) + ']' + '(NOLOCK)')
    END
ELSE IF (@include_column_list = 0)
    BEGIN
        SET @Actual_Values = 
            'SELECT ' + 
            CASE WHEN @top IS NULL OR @top < 0 THEN '' ELSE ' TOP ' + LTRIM(STR(@top)) + ' ' END + 
            '''' + RTRIM(@Start_Insert) + 
            ' '' +''VALUES(''+ ' +  @Actual_Values + '+'')''' + ' ' + 
            COALESCE(@from,' FROM ' + CASE WHEN @owner IS NULL THEN '' ELSE '[' + LTRIM(RTRIM(@owner)) + '].' END + '[' + rtrim(@table_name) + ']' + '(NOLOCK)')
    END 

--Determining whether to ouput any debug information
IF @debug_mode =1
    BEGIN
        PRINT '/*****START OF DEBUG INFORMATION*****'
        PRINT 'Beginning of the INSERT statement:'
        PRINT @Start_Insert
        PRINT ''
        PRINT 'The column list:'
        PRINT @Column_List
        PRINT ''
        PRINT 'The SELECT statement executed to generate the INSERTs'
        PRINT @Actual_Values
        PRINT ''
        PRINT '*****END OF DEBUG INFORMATION*****/'
        PRINT ''
    END

PRINT '--INSERTs generated by ''sp_generate_inserts'' stored procedure written by Vyas'
PRINT '--Build number: 22'
PRINT '--Problems/Suggestions? Contact Vyas @ vyaskn@hotmail.com'
PRINT '--http://vyaskn.tripod.com'
PRINT ''
PRINT 'SET NOCOUNT ON'
PRINT ''

--Determining whether to print IDENTITY_INSERT or not
IF (@IDN <> '')
    BEGIN
        PRINT 'SET IDENTITY_INSERT ' + QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + QUOTENAME(@table_name) + ' ON'
        PRINT 'GO'
        PRINT ''
    END

IF @disable_constraints = 1 AND (OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name, 'U') IS NOT NULL)
    BEGIN
        IF @owner IS NULL
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' NOCHECK CONSTRAINT ALL' AS '--Code to disable constraints temporarily'
            END
        ELSE
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(@owner) + '.' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' NOCHECK CONSTRAINT ALL' AS '--Code to disable constraints temporarily'
            END

        PRINT 'GO'
    END

PRINT ''
PRINT 'PRINT ''Inserting values into ' + '[' + RTRIM(COALESCE(@target_table,@table_name)) + ']' + ''''

--All the hard work pays off here!!! You'll get your INSERT statements, when the next line executes!
EXEC (@Actual_Values)

PRINT 'PRINT ''Done'''
PRINT ''

IF @disable_constraints = 1 AND (OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name, 'U') IS NOT NULL)
    BEGIN
        IF @owner IS NULL
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' CHECK CONSTRAINT ALL'  AS '--Code to enable the previously disabled constraints'
            END
        ELSE
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(@owner) + '.' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' CHECK CONSTRAINT ALL' AS '--Code to enable the previously disabled constraints'
            END

        PRINT 'GO'
    END

PRINT ''
IF (@IDN <> '')
    BEGIN
        PRINT 'SET IDENTITY_INSERT ' + QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + QUOTENAME(@table_name) + ' OFF'
        PRINT 'GO'
    END

PRINT 'SET NOCOUNT OFF'

SET NOCOUNT OFF
RETURN 0 --Success. We are done!
END

GO

PRINT 'Created the procedure'
GO

--Mark procedure as system object
EXEC sys.sp_MS_marksystemobject sp_generate_inserts
GO

PRINT 'Granting EXECUTE permission on sp_generate_inserts to all users'
GRANT EXEC ON sp_generate_inserts TO public

SET NOCOUNT OFF
GO

PRINT 'Done' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:54:45.863

基本上有两种方法可以恢复`Database`使用`Sql Server`。

1.  通过`SSMS`还原实用程序。
2.  **[从这里](http://www.sqlservercentral.com/Forums/Topic1217118-391-1.aspx#bm1217538)**手动恢复数据库脚本

# delphi - 发送带有签名的电子邮件

> ID：11001835
> 
> 赞同：0
> 
> 时间：2012-06-12T17:34:49.863
> 
> 标签：delphi, email, shell

我一直在使用：

```
 ShellExecute(Self.Handle,
            nil, PCHAR(format('mailto:%s ?Subject=Assunto: &Body=',[_lEmails ])),
            nil,
            nil,
            SW_NORMAL); 
```

发送电子邮件。没有正文文本，因此在其电子邮件客户端中具有自动签名的用户会自动获得这些内容。

现在我想让用户也可以插入文本，但如果他们这样做，文本会到达那里但没有签名。有没有办法“强制”这个。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T22:05:21.003

您可以改用[MAPI](http://msdn.microsoft.com/en-us/library/aa142548%28v=EXCHG.65%29.aspx) (the `Messaging Applications Programming Interface`)，它可以让您更好地控制电子邮件，并允许使用附件等内容。您还可以选择是显示用户的电子邮件客户端“撰写”窗口还是直接添加到发件箱。（由于 Windows 安全性的变化，发件箱功能现在通常受到限制，尤其是在 MS Outlook 方面。）

最快、最简单的方法是使用[JEDI Code Library](http://wiki.delphi-jedi.org/index.php?title=JEDI_Code_Library) `JCLEMail`之类的东西。它是 SimpleMAPI 的包装器，这使得它非常容易（代码取自一个较旧的应用程序，并且基于 JCL 演示中的示例）：

```
EMail := TJclEMail.Create;
try
  EMail.Recipients.Add(AnsiString(EMailAddress), AnsiString(EMailName));
  EMail.Subject := AnsiString(Subject);
  EMail.Body := AnsiString(Body);
  EMail.HtmlBody := False;  // True if it's HTML email

  // Send attachment if wanted
  EMail.Attachments.Add(AnsiString(FileName));
  EMail.Send(True);   // True to show default email, false to add to outbox
finally
  EMail.Free;
end; 
```

缺点`SimpleMAPI`是它可能是一个短期的解决方案（尽管它仍然存在于 Win7 64 位及更早版本中，但我不能代表 Windows 8）。根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd296734%28v=vs.85%29.aspx)，

> [不鼓励使用 Simple MAPI。它可能在 Windows 的后续版本中被更改或不可用。]

缺点`MAPI`是它依赖于`MAPI`安装的客户端。幸运的是，几乎所有支持的软件也`mailto`应该支持`MAPI`；例如，Outlook 可以，Mozilla Thunderbird 也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:41:40.943

在确保出现默认签名时（如果这是问题的症结所在，如果不是对不起，我误读了），那么您可能会不走运（因为我一直在尝试这样做）。

下面的 MS 文章似乎说“不”。这似乎意味着直到 2010 年的 Outlook 版本在通过 MAPI 创建电子邮件时不支持默认电子邮件签名。它似乎没有提供太多理由，并建议您只需使用电子邮件对话框中的“插入签名”选项（对我来说，当您可能希望它默认时，这并不是真正的帮助，也许只是电子邮件“去”无需用户干预）。

[http://support.microsoft.com/kb/2544665](http://support.microsoft.com/kb/2544665)

# javascript - 如何在 HTML5 画布中绘制触摸直线

> ID：11001840
> 
> 赞同：1
> 
> 时间：2012-06-12T17:35:10.583
> 
> 标签：javascript, html, canvas, touch, line

我正在尝试为 iPad 创建一个绘图工具集，到目前为止我已经完成了正方形，但我不确定如何编写一条**直线**？这是我完成的正方形的代码，也许会有所帮助。我想知道如何编写一条直线。在那之后，如果我也想画圆圈怎么办？我需要更改此代码中的哪些内容？

这是代码：

JavaScript（方形/矩形）

```
// "Draw Rectangle" Button
function rect(){
var canvas = document.getElementById('canvasSignature'), ctx = canvas.getContext('2d'), rect = {}, drag = false;

function init() {
  canvas.addEventListener("touchstart", touchHandler, false);
  canvas.addEventListener("touchmove", touchHandler, false);
  canvas.addEventListener("touchend", touchHandler, false);
}

function touchHandler(event) {
  if (event.targetTouches.length == 1) { //one finger touche
    var touch = event.targetTouches[0];

    if (event.type == "touchstart") {
      rect.startX = touch.pageX;
      rect.startY = touch.pageY;
      drag = true;
    } else if (event.type == "touchmove") {
      if (drag) {
        rect.w = touch.pageX - rect.startX;
        rect.h = touch.pageY - rect.startY ;
        draw();
      }
    } else if (event.type == "touchend" || event.type == "touchcancel") {
      drag = false;
    }
  }
}

function draw() {
  ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "orange";
}

init();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:40:48.477

只需替换这个：

```
ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);

ctx.clearRect(0, 0, canvas.width, canvas.height); 
```

像这样：

```
ctx.fillLine(rect.startX, rect.startY, rect.w, rect.h);

ctx.clearLine(0, 0, canvas.width, canvas.height); 
```

这当然不是 100% 有效的代码，但这个概念应该有效，你会明白的

# iphone - 将 UIImageView 拆分为较小的图像时遇到问题

> ID：11001841
> 
> 赞同：0
> 
> 时间：2012-06-12T17:35:11.120
> 
> 标签：iphone, objective-c, ios, ipad, uiimageview

我正在尝试`UIImageView`调整该图像的大小并显示它。然后我想将该图像分解成更小的部分并显示它们。

调整大小的图像显示正确，但“拆分”的图像似乎太大；我认为它们来自原始（稍大）图像。以下屏幕截图显示了左侧调整大小的图像和左侧的一列拆分图像。

![在此处输入图像描述](../Images/829eff4afe637afd09b94d5f60ce269a.png)

调整大小的图像正确显示而较小的图像没有让我感到困惑。任何想法都会受到赞赏 - 甚至是替代方案。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    width = imgOriginal.frame.size.width;
    height = imgOriginal.frame.size.height;
    whratio = width/height; 
    [self getOriginalImageInfo];
    [self resizeImage];
    resizedImage = [self resizeImage];
}

-(void) getOriginalImageInfo {
    lblWidth.text = [NSString stringWithFormat:@"%0.2f", width];
    lblHeight.text = [NSString stringWithFormat:@"%0.2f", height];
    lblWHRatio.text = [NSString stringWithFormat:@"%0.2f", whratio];
}

-(UIImageView*) resizeImage {
    if (whratio >= 0.7 && whratio <=0.89) {
        imgOriginal.frame = CGRectMake(20, 20, 500, 600);
        imgOriginal.autoresizingMask = NO;
        float resizedWHRatio = (imgOriginal.frame.size.width)/(imgOriginal.frame.size.height);
        lblResizedWidth.text = [NSString stringWithFormat:@"%0.2f", imgOriginal.frame.size.width];
        lblResizedHeight.text = [NSString stringWithFormat:@"%0.2f", imgOriginal.frame.size.height];
        lblResizedWHRatio.text = [NSString stringWithFormat:@"%0.2f", resizedWHRatio];
        return imgOriginal;
    }
    return nil;
}

- (IBAction)easyPressed:(id)sender {
    NSLog(@"Easy button pressed");
    CGImageRef original = [resizedImage.image CGImage];
    float pieceWidth = (resizedImage.frame.size.width) / 5;
    float pieceHeight = (resizedImage.frame.size.height) / 6;
    for (int i =0; i<6; i++) {
        CGRect rectangle = CGRectMake(0, 0+((float)i*pieceHeight), pieceWidth, pieceHeight);
        CGImageRef newTile =  CGImageCreateWithImageInRect(original, rectangle);
        UIImageView *puzzlePiece = [[UIImageView alloc] initWithFrame:CGRectMake(611, 20+((float)i*pieceHeight), pieceWidth, pieceHeight)];
        puzzlePiece.tag = i+1;
        puzzlePiece.image = [UIImage imageWithCGImage:newTile];
        puzzlePiece.alpha = 0.5;
        [puzzlePiece.layer setBorderColor: [[UIColor blackColor] CGColor]];
        [puzzlePiece.layer setBorderWidth: 1.0];
        [self.view addSubview:puzzlePiece];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:40:41.783

尝试对部分图像应用与主图像相同的缩放因子！！！

或者

截取正在显示的 UIImageView 的屏幕截图并将其拆分。

# javascript - facebook 连接第三方小部件？

> ID：11001842
> 
> 赞同：1
> 
> 时间：2012-06-12T17:35:29.553
> 
> 标签：javascript, facebook

我正在构建第三方小部件而不使用 iframe。当小部件被渲染时，它实际上在第三方页面 DOM 中创建了一个 DOM 结构。我的小部件中有 facebook 按钮，我希望我的用户使用“facebook connect”来连接我的应用程序。如果我在 iframe 内渲染小部件，这将有效。但是如果 Facebook 连接在第三方页面上加载，它就不起作用。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:25:22.107

好的。所以我从你的问题中得到的是，你正在开发一个第三方插件，其他人可以在他们的网站上使用。如果是这种情况，为了使 facebook connect 工作，您将不得不从您的服务器加载 iframe，并在您的小部件之间进行跨域操作，只需使用 jsonp 并提供一个 api。因此，通过 facebook 与您的小部件之间的所有请求都与您的 appId 和您的域连接，并且与您的小部件的所有第 3 方交互都将通过您的服务器 + jsonp。从理论上讲，这种解决方法会起作用，但我不确定我是否在回答你的问题。我想这也许就是上面 leosok 的意思。

[http://json-p.org/](http://json-p.org/) -- jsonp 快速教程

[http://php.net/](http://php.net/) -- php 网站（用于学习服务器端编程）

[http://w3schools.com/](http://w3schools.com/) - 一个很好的学习资源，用于所有与 web 开发相关的东西

[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html) --windows apache 服务器包，包含构建自己的开发环境所需的所有细节

[http://www.apachefriends.org/en/xampp-linux.html](http://www.apachefriends.org/en/xampp-linux.html) - 与最后一个链接相同，但适用于 linux 风格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:45:21.813

您是否尝试通过 php 加载他们的 iframe？

# c - 对 char 进行按位运算得到 32 位结果

> ID：11001843
> 
> 赞同：2
> 
> 时间：2012-06-12T17:35:47.923
> 
> 标签：c, char, bitwise-operators

我一直在用 C 编写一个程序，将 char 的前 4 位移到末尾，将后 4 位移到开头。对于大多数值，它正常工作，以及反向操作，但对于某些值，如 8、x、y、z，它给出一个 32 位值作为结果。通过打印变量的十六进制值检查的值。谁能解释为什么会这样？

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char o, f,a=15;
    scanf("%c",&o);
    printf("o= %d\n",o);
    f=o&a;
    o=o>>4;
    printf("o= %d",o);
    o=o|(f<<4);
    printf("o= %x, size=%d\n",o,sizeof(o));
    f=o&a;
    o=o>>4;
    printf("o= %d",o);
    o=o|(f<<4);
    printf("o= %x, size=%d\n",o,sizeof(o));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:43:48.883

`o`作为参数传递给`printf()`会导致自动转换为`int`，这在您的系统上显然是 32 位的。自动转换使用符号扩展，因此如果设置了第 7`o`位，则转换结果中的第 8-31 位将被设置，这将解释您所看到的。

您可以使用`unsigned char`而不是`char`避免这种情况。或传递`o & 0xff`给`printf()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T17:38:33.017

尝试将您的变量声明为`unsigned char`. 您正在获得高位的符号扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T17:43:43.050

作为 printf （或任何可变参数函数，或任何没有原型的函数）的参数给出的 char 被提升为 int。如果 char 在您的平台上签名并且传递的值为负，则扩展符号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T17:59:14.287

您的值被打印为 32 位值，因为您的格式说明符`%x`告诉`printf`将值打印为`unsigned int`. 要将其打印为，您需要带有长度修饰符`unsigned char`的格式说明符。如果值为正，则对打印输出没有影响，但对于负数则有影响，因为它们设置了最高有效位。`%hhx``hh`

对于下文，解释该代码中如何出现负值，我假设`CHAR_BIT == 8`负整数的二进制补码表示。

对于班次， 的值`o`提升为`int`。如果设置了原始值的第四个最低有效位（如果`(o & 8) != 0`），则在第一次交换半字节后，设置 的最高有效位`o`。如果`char`默认情况下在您的平台上签名，则意味着结果是否定的。对于第二个半字节交换， 的值`o`再次提升为`int`，从而产生负值。负值的右移是实现定义的，所以

```
o=o>>4; 
```

在这种情况下是不可移植的（尽管实际上所有实现都使用算术右移[带符号扩展]或逻辑右移[从左移零]）。

在对负整数进行算术移位的实现中，`o`将设置 的四个最高有效位，因此

```
o=o|(f<<4); 
```

不再改变值。

可移植地修复代码以获得所需行为的唯一方法是按照 Ned 的建议声明`o`为 an 。`unsigned char`那么所有的价值观都是积极的，并且转变的行为是明确的并且符合您的期望。

# cocoa - 无法动态调整 NSImageView 的大小

> ID：11001846
> 
> 赞同：1
> 
> 时间：2012-06-12T17:36:10.503
> 
> 标签：cocoa, nsimage, nsimageview

我有一个包含动态生成的 NSImage 的 NSImageView。当我更改显示的图像时，我想动态调整 NSImageView 的大小，以便它精确地包裹新图像，并调整封闭窗口的大小，以便 NSImageView 和窗口的每个其他部分之间的空间保持不变。（请注意，图像视图的缩放设置为无，因为我希望它的图像始终以其物理尺寸显示。）为了说明，假设我从[图像视图中的一个小图像](https://i.imgur.com/NqEKL.png)开始。如果我用[大图像](https://i.imgur.com/Z33XO.png)替换它，我希望 NSImageView 和封闭窗口都调整大小以适应它，而不影响任何其他元素的大小或间距。

目前，每当通过步进器或关联的文本字段更改放大级别时，我都会调用以下方法。虽然重新生成图像并将其加载到 NSImageView 工作正常，但调整 NSImageView 和封闭窗口的大小却不行。

```
- (void) updateMagnification:(NSUInteger)newMagnification {
    // Keep values of stepper and associated text field synchronized.
    [self.magnificationStepper setIntegerValue:newMagnification];
    [self.magnificationTextField setIntegerValue:newMagnification];

    // Regenerate image based on newMagnification and display in image view.
    [self.qrGenerator generateWithBlockPixelWidth:newMagnification];
    self.imageView.image = self.qrGenerator.image;

    // Adjust frame size of image view.
    NSLog(@"Old size: frame=%@ image=%@", NSStringFromSize(self.imageView.frame.size), NSStringFromSize(self.imageView.image.size));
    [self.imageView setFrameSize:NSMakeSize(self.imageView.image.size.width, self.imageView.image.size.height   )];
    NSLog(@"New size: frame=%@ image=%@", NSStringFromSize(self.imageView.frame.size), NSStringFromSize(self.imageView.frame.size));

    //[self.window setViewsNeedDisplay:YES];
    //[self.imageView setNeedsDisplay:YES];
    //[self.imageView.superview setNeedsDisplay:YES];
} 
```

无论我是增加还是减少放大率值，导致图像变小或变大，NSImageView 和窗口的大小都保持不变。被注释掉的三个`setNeedsDisplay:`调用即使没有注释也没有效果——我试图确定问题是否与控件在调整大小后不重绘有关，但调用没有效果。奇怪的是，我的`NSLog`调用表明 imageView 的框架确实采用了请求的大小，因为它们产生了以下输出：

```
2012-06-12 11:02:50.651 Presenter[4660:603] Old size: frame={422, 351} image={168, 168}
2012-06-12 11:02:50.651 Presenter[4660:603] New size: frame={168, 168} image={168, 168} 
```

当然，实际显示不会改变。

有趣的是，在 Interface Builder 中或以编程方式将 imageView 的框架样式更改为“无” `[self.imageView setImageFrameStyle:NSImageFrameNone]`，让我的行为更接近我想要的。使图像变大，否则它会被图像视图剪切，确实会导致图像视图和窗口变大。然而，从这一点来看，缩小图像并不会导致图像视图或窗口相应地调整大小。“无”是唯一显示这种稍微正确的行为的图像框架样式——所有四种带边框的样式（即斜角[默认]、按钮、凹槽和照片）都显示了与上述相同的完全错误的行为。

我遇到了[一个有类似问题的人](https://stackoverflow.com/questions/7045442/resized-nsimageview-not-redrawing)。奇怪的是，当他的图像视图的框架样式设置为时，他只观察到有问题的行为`NSImageFrameNone`，而这是唯一给我一些正确行为的值。我尝试在调整大小之前将框架样式修改为非无值，之后修改为无，因为这解决了其他人的问题，但对我来说，这产生了与我最初将框架样式设置为“无”时相同的行为.

您提供的任何帮助将不胜感激。谢谢！

# javascript - 通过字符串的开头或 JavaScript 中的单个字符进行匹配

> ID：11001847
> 
> 赞同：2
> 
> 时间：2012-06-12T17:36:12.860
> 
> 标签：javascript, regex

我有两个正则表达式：

```
/\/(\w\w+)/g
/(^\w\w+)/g 
```

并且想知道是否有任何方法可以将它们组合成一个正则表达式？基本上我想找到以/开头的字符串的任何部分，或者是字符串的开头，然后是一个包含2个或更多字符的单词。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T17:38:27.870

是的你可以：

```
/(?:^|\/)(\w{2,})/g 
```

使用非捕获组在起始条件之间交替。这也将保持捕获组编号与原始组编号相同。

# vb.net - 日期之前的vb.net现在小于日期时间

> ID：11001851
> 
> 赞同：0
> 
> 时间：2012-06-12T17:36:37.860
> 
> 标签：vb.net, datetime, date

上次保存在数据库中的日期是：6/13/2012 12:27:30 PM

在我的 DateTime 现在是：6/13/2012 01:27:57 AM

但是，当我执行此功能时，它总是说：“日期已手动修改，请设置为有效日期时间”

但是，DateTime Now 不小于我数据库中的日期。怎么了？

这是代码，请纠正它，

```
Private lastdate As DateTime
Private Sub GetDBdate()
...
    Dim ss As String
    Dim sc As New SQLiteCommand
    ss = "select dtime from dincome order by dtime desc limit 1"
    sc = New SQLiteCommand(ss, mycon)
    lastdate = CDate(sc.ExecuteScalar)
End Sub

    Private Function CheckValidDate() As Boolean
    Dim dtnow As DateTime = DateTime.Now
    If dtnow < lastdate Then
        Return False
    End If
    Return True
    End Function

    Private Sub Button_Click
    If Not CheckValidDate() Then
    label1.Text = "Date has been manually modified, Please Set to Valid DateTime"
        Exit Sub
    End If
    ...
    ...
    Exit Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:40:54.040

我想这是一个 24 小时的问题，昨天我从 tt 中删除了

Dim dt As DateTime = DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss")

应该是：

Dim dt As DateTime = DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss tt")

谢谢两个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:42:34.343

你的休息时间大约是一小时。你检查过你的时区设置吗？这在过去引起了我的问题。

# php - PHP 简单的 html dom 解析器。空跨度

> ID：11001852
> 
> 赞同：1
> 
> 时间：2012-06-12T17:36:39.757
> 
> 标签：php, dom, html-parsing

我正在尝试使用以下代码解析该站点。

```
<span id="ctl00_cphBody_resList_pnlResumes_rptResumes_ctl01_Label1" class="address">Somename, <nobr>Someage</nobr></span> 
```

我是这样解析的

```
$fio=$text_specialty_next->find('span#ctl00_cphBody_resList_pnlResumes_rptResumes_ct'.$n.'_Label1'); 
```

但是当我试图打印结果时，

```
echo $fio->innertext; 
```

结果是空的。什么会导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:38:35.327

在`find()`

`rptResumes_ct'.$n.'_Label1'`

但应该是

`rptResumes_ctl'.$n.'_Label1'`

你错过了一个“l”

的价值是`$n`多少？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:40:50.603

有吗`$n="l01"`？你用的是什么解析器？在[SimpleHTMLDom](http://simplehtmldom.sourceforge.net/)你需要使用`find(span[id=...]);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:28:03.500

问题解决了。$find->smth 返回数组，whick 当然没有内文。我必须使用 foreach(find->smth as $someelement) 来回显它。

# django - media 和 site_media 文件夹有什么区别？

> ID：11001854
> 
> 赞同：1
> 
> 时间：2012-06-12T17:36:45.263
> 
> 标签：django, pinax

这两个文件夹有什么区别？我在 Pinax 中创建了一个示例项目，有时他们将内容放在媒体中，有时在 site_media 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:57:03.810

我相信 MEDIA 用于上传文件，而 site_media 用于静态文件。

[https://docs.djangoproject.com/en/dev/topics/files/](https://docs.djangoproject.com/en/dev/topics/files/)

尽管以下引用是关于静态文件的，但我认为它涵盖了差异：

> 在以前的 Django 版本中，通常将静态资产与用户上传的文件一起放在 MEDIA_ROOT 中，并在 MEDIA_URL 处提供它们。引入 staticfiles 应用程序的部分目的是更容易将静态文件与用户上传的文件分开。
> 
> 因此，您需要使您的 MEDIA_ROOT 和 MEDIA_URL 与您的 STATIC_ROOT 和 STATIC_URL 不同。您需要自己安排在 MEDIA_ROOT 中提供文件；staticfiles 根本不处理用户上传的文件。但是，您可以使用 django.views.static.serve() 视图在开发中为 MEDIA_ROOT 提供服务；请参阅服务其他目录。

# node.js - Socket.io 不同的客户端 ID

> ID：11001856
> 
> 赞同：1
> 
> 时间：2012-06-12T17:37:03.253
> 
> 标签：node.js, websocket, socket.io

我正在尝试使用 websockets 和 socket.io 制作一个简单的多人游戏。

我们的大部分功能都在工作，我们现在的问题是找出获胜的玩家是谁。

所以我们现在尝试实现的解决方案是在运行时获取套接字，当玩家死亡时，他们会向服务器发送消息。接收到此消息的服务器将属性“死”添加到套接字。`socket.dead = true`当玩家死亡时设置。

然后我们检查连接的套接字列表（动态获取）以查看是否只有一个剩余的玩家活着（通过检查是否定义了 socket.dead）。我们意识到的一件事是已连接套接字的 socket.ids 实际上发生了变化——这证明对我们来说是个问题......

问题是套接字 id 何时何地发生变化，我们如何检测这些变化以便更新我们的游戏数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:09:04.347

您不应该检查套接字 id，而是应该在用户每次连接到 Socket.IO ( `socket.user = username`) 时对用户进行身份验证。

然后，您可以检查他们的用户名，而不是检查“活着”的玩家的 id。

更多关于使用 Express 和 Socket.IO 处理会话的信息：[http ://www.danielbaulig.de/socket-ioexpress/](http://www.danielbaulig.de/socket-ioexpress/)

# java - 动态数组列表大小

> ID：11001859
> 
> 赞同：4
> 
> 时间：2012-06-12T17:37:27.603
> 
> 标签：java, arrays, dynamic

如何使用 Java 设置动态数组的大小？

我尝试`setsize(...)`使用数组变量但不工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T17:38:16.700

初始化时需要固定数组大小，[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)改为使用，然后使用[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)数组[`toArray()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28%29)

例如：

```
List<Integer> listOfInt = new ArrayList<Integer>(); //no fixed size mentioned
listOfInt .add(1);
listOfInt .add(2);
listOfInt .add(3);
//now convert it to array 
Integer[] arrayOfInt = list.toArray(new Integer[listOfInt .size()]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:40:29.317

你的标题令人困惑。您使用的是 ArrayList 还是 Array。每次分别调用,方法（或任何其他添加/删除变体）时，都会根据
需要扩展和收缩。无需自己管理其大小。`ArrayList``add``remove`

一个列表初始化如下：

```
List<Integer> lst = new ArrayList<Integer>(); 
```

现在您有一个列表，您可以在其中添加虚拟无限数量的元素。

An`array`在初始化时需要它的大小，如果不重新初始化就无法更改。

# c# - IXmlSerializable 和 XmlSerializer 一起发出

> ID：11001862
> 
> 赞同：2
> 
> 时间：2012-06-12T17:37:32.910
> 
> 标签：c#, xmlserializer, ixmlserializable

我有大约 50 个多态继承关系类。我使用 XmlSerializer 对它们进行序列化。现在对于几个类，我想实现 IXmlSerializable。所以我从一个类开始。这个类不是基类而是直接派生自所有多态关系的基类。

实现后，生成的 XML 仅包含我用 WriteXML 方法编写的上述类的标签。没有其他类的信息。很奇怪的行为！！！！

所以请指导我解决这个问题，以便维护其他类信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:38:23.347

据我了解，您是正确的 - 您的 xml 包含您隐式添加的`WriteXML`（当前类的）属性？但这是正确的行为。您应该隐式添加项目，如接口描述中的[示例](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)。

如果您需要基类的属性 - 添加它们。如果您需要从此类继承的类的属性 - 尝试通过反射获取它们。[使用反射获取属性名称](http://www.csharp-examples.net/reflection-property-names/)。但是不要`typeof(MyClass)`使用`.GetType()`并[在那里](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)检查如何获取属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T08:57:02.127

类似的问题[在这里](https://stackoverflow.com/questions/1385382/implementing-ixmlserializable-on-a-collection-object)和[那里](https://stackoverflow.com/questions/31728114/xml-serializer-for-inner-object-strange-bug/31742010#31742010)。

`ReadXml(XmlReader reader)`以该行结束方法

`reader.Read();`

接缝来解决问题...

# javascript - jQuery文字动画

> ID：11001863
> 
> 赞同：0
> 
> 时间：2012-06-12T17:37:36.687
> 
> 标签：javascript, jquery

我到处寻找以下 jquery 文本动画师的免费版本（或类似插件），但我找不到。有很多很棒的 jquery 插件的免费片段，为什么我找不到像这样的文本动画师的任何片段？[http://codecanyon.net/item/textfx-a-jquery-text-animation-tool/full_screen_preview/309565?ref=lvraa](http://codecanyon.net/item/textfx-a-jquery-text-animation-tool/full_screen_preview/309565?ref=lvraa)

我真的做了很多研究，这个最接近我的需要。我只想要一个不显眼的文本动画器，用于我的网页上的文本内容，它应该引起查看者的注意。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:45:35.480

这是一些div的动画。你可以自己做。第一：将一个字符串分解成一个div数组（我建议你使用jquery）

```
var s = 'Hello world';
var animationcanvas = $('<div />');
for (i = 0; i< s.length; i++){
   animationcanvas.append('<div>' + s[i] + '</div>');
} 
```

然后想一些动画并使用`jquery.animate` 直觉来做

# android - Android AlarmManager 无法理解的行为

> ID：11001864
> 
> 赞同：0
> 
> 时间：2012-06-12T17:37:48.450
> 
> 标签：android, android-service, alarmmanager, android-pendingintent

我知道 AlarmManager 被讨论了好几次，但我真的找不到可以帮助我的答案。我有一个应用程序需要在某个时间启动服务并制作一些东西，所以经过一些研究工作，我决定 AlarmManager 是我需要的。

我用这段代码来完成这项工作

```
 Intent myIntent=new Intent();
    ComponentName cn=new ComponentName("my.package.name", "my.package.name.AlarmService");
    myIntent.setComponent(cn);
    PendingIntent pendingIntent= PendingIntent.getService(alarm._context, alarm.id, myIntent, 0);
    AlarmManager alarmManager = (AlarmManager) _context.getSystemService(Context.ALARM_SERVICE);
    alarmManager.set(AlarmManager.RTC_WAKEUP, alarm.time, pendingIntent); 
```

其中“警报”是我写的一个对象。现在，我肯定喜欢这个代码工作的死亡，因为如果我将一个（或多个）动作设置为 2 分钟或几个小时，它就会工作（我在服务的第一条指令中写了一个日志文件）。如果我执行

```
 adb shell dumpsys alarm 
```

我可以看到我所有未决的意图。好的，很高兴看到一切正常，我将我的行动安排在：

01:00 AM 08:00 AM 08:40 AM 09:15:AM 01:00 PM 02:00 PM 18:00 PM

设置此操作后，我执行

```
 adb shell dumpsys alarm 
```

我可以看到所有未决的意图。然后我去睡觉......当我早上 07:30 醒来时，安排在 01:00 AM 的操作尚未执行，如果我执行

```
 adb shell dumpsys alarm 
```

我所有未决的意图都消失了！！！！！！！

我对这种行为感到非常沮丧，因为我花了很多时间编写这个应用程序，但我无法让它正常工作。经过数周的研究，我发布了这个问题，因为我尝试了每一件事，但我仍然遇到这个问题。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:42:43.207

`AlarmManager`来自（[链接在这里](http://developer.android.com/reference/android/app/AlarmManager.html)）的文档：

> 只要警报接收器的 onReceive() 方法正在执行，警报管理器就会持有 CPU 唤醒锁。**这保证了在您完成广播处理之前手机不会休眠。** 一旦 onReceive() 返回，警报管理器就会释放这个唤醒锁。 **这意味着在某些情况下，一旦您的 onReceive() 方法完成，手机就会进入睡眠状态。**如果您的警报接收器调用了 Context.startService()，则手机可能会在请求的服务启动之前休眠。**为防止这种情况，您的 BroadcastReceiver 和 Service 将需要实施单独的唤醒锁定策略，以确保手机继续运行直到服务可用。**

如果您`Service`还没有设置正确的唤醒锁，设备将在`AlarmManager`完成后立即进入睡眠状态，您也需要在代码中进行管理。

高温高压

# string - 从文件的特定行打印列？

> ID：11001865
> 
> 赞同：0
> 
> 时间：2012-06-12T17:37:48.477
> 
> 标签：string, bash, file-io

我正在查看从第 7 行第 18 列开始的不同版本号的文件。

使用 Bash 从第 7 行（即“字符”）第 18 列到行尾读取（到 $ 变量中）字符串的最佳方法是什么？到该行的倒数第 5 个字符呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:42:49.397

`sed`方式：

```
variable=$(sed -n '7s/^.\{17\}//p' file) 
```

编辑（感谢评论者）：如果通过列表示字段（用制表符或空格分隔），则可以将命令更改为

```
variable=$(sed -n '7s/^\(\s\+\S\+\)\{17\}//p' file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:44:14.843

采用

```
var=$(head -n 17 filename | tail -n 1 | cut -f 18-) 
```

或者

```
var=$(awk 'NR == 17' {delim = ""; for (i = 18; i <= NF; i++) {printf "%s%s", delim, $i; delim = OFS}; printf "\n"}') 
```

如果您的意思是“字符”而不是“字段”：

```
var=$(head -n 17 filename | tail -n 1 | cut -c 18-) 
```

或者

```
var=$(awk 'NR == 17' {print substr($0, 18)}') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:48:21.830

根据您要使用的实用程序，您有多种不同的方法可以解决此问题。您的一个选择是通过以下任何一种方式使用 Bash 的子字符串扩展：

### sed

```
line=1
string=$(sed -n "${line}p" /etc/passwd)
echo "${string:17}" 
```

### awk

```
line=1
string=$(awk "NR==${line} {print}; {next}" /etc/passwd)
echo "${string:17}" 
```

### 核心工具

```
line=1
string=`{ head -n $line | tail -n1; } < /etc/passwd`
echo "${string:17}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T17:41:13.437

如果“列”是指“字段”：

```
a=$( awk 'NR==7{ print $18 }' file ) 
```

如果您真的想要第 7 行末尾的第 18 个字节，请执行以下操作：

```
a=$( sed -n 7p | cut -b 18- ) 
```

# authentication - 使用 OAUTH 2.0 调用 WCF Resfull 方法

> ID：11001866
> 
> 赞同：7
> 
> 时间：2012-06-12T17:37:50.003
> 
> 标签：authentication, oauth-2.0, wcf-rest

我正在寻找任何文章或论坛主题，在那里我可以找到如何进行 oauth 2.0 身份验证的信息。特别是我有 MVC 3 应用程序和 WCF Restfull API。而且我必须使用 oauth 2.0 协议身份验证从 Web 应用程序调用 API 方法。但我找不到任何关于它的信息。谷歌搜索后，我只看到如何为 facebook、linkedin、google 等开发客户的结果。任何帮助都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T20:22:24.100

You could have a look at [DotNetOpenAuth](http://dotnetopenauth.net/). It has a client library which you can easily install from [NuGet here](https://www.nuget.org/packages/DotNetOpenAuth.Ultimate/4.3.3.13295). Using `DotNetOpenAuth` all the OAuth plumbing is handled behind the scenes.

**DotNetOpenAuth:**

When you install the NuGet Package: [https://www.nuget.org/packages/DotNetOpenAuth.Ultimate/4.3.3.13295](https://www.nuget.org/packages/DotNetOpenAuth.Ultimate/4.3.3.13295)

You can setup an OAuth client like this:

```
var authorizationServerDescription = new AuthorizationServerDescription
{
    ProtocolVersion = ProtocolVersion.V20,
    TokenEndpoint = new Uri("https://yourUrl/token"),
    AuthorizationEndpoint = new Uri("https://yourUrl/authorize")
};

var client = new WebServerClient(authorizationServerDescription, "ClientIdentifier", "ClientSecret"); 
```

Then you can request a `IAuthorizationState` like this:

```
// Resource Owner Password Flow
client.ExchangeUserCredentialForToken("userName", "password");

// Client Credential Flow
client.GetClientAccessToken(); 
```

The IAuthorizationState contains the `AccessToken` you can use to Authorize against your Api. If a RefreshToken is provided you can also refresh your authorization using:

```
client.RefreshAuthorization(AuthorizationState); 
```

**ThinkTecture:**

Alternatively you could use `Thinktecture.IdentityModel`. If you chose to use Thinktectures IdentityModel be sure to check out this post: [Introducing OAuth2 Code Flow and Refresh Token Support in Thinktecture IdentityServer](http://leastprivilege.com/2013/03/15/introducing-oauth2-code-flow-and-refresh-token-support-in-thinktecture-identityserver/). Which not only explains how to set up an OAuth Token Server using Thinktecture, but how to use the client as well including a code sample. Ofcourse you can use this client to validate against another OAuth 2.0 server as long as the parameters are implemented according to the OAuth specifications.

**OAuth 2.0 Playground** If you want to have a better look at the OAuth 2.0 flow, be sure to check out Google's [OAuth 2.0 Playground](https://developers.google.com/oauthplayground/). I think that a lot of people don't know that it is possible to test your own server with it. Just push the 'settings' icon in the top right and set:

> OAuth endpoints: Custom

And you're good to go.

# java - 如何使用 GSon 处理异构列表

> ID：11001870
> 
> 赞同：1
> 
> 时间：2012-06-12T17:38:04.420
> 
> 标签：java, gson

我想存储类似的东西

```
ImmutableList<Fruit> list =
    ImmutableList.of(new Orange(42), new Banana(43), new Apple("green"), new Apple("red")); 
```

使用 GSon。显然我需要修改序列化，因为无法从默认输出重新创建列表

```
[{"value":42},{"value":43},{"color":"green"},{"color":"red"}] 
```

将字段“类型”与自定义反序列化器一起添加可能会，但在尝试之前，我想问一下是否有更好的方法。

# c# - How to explicitly fail a test case with Coded-UI

> ID：11001877
> 
> 赞同：4
> 
> 时间：2012-06-12T17:38:26.010
> 
> 标签：c#, testing, coded-ui-tests

I am automating some test cases with Coded-UI And I am trying to figure out how to explicitly fail a test case from the code instead of waiting for the code to timeout. I considered creating an assertion that is bound for failure, but that feels sloppy to me. Here is an example of my code:

```
public bool CheckifFileExists(String SearchFile, int secondswait)
    {
        bool FileExists = File.Exists(SearchFile);
        int i = 0;
        while (FileExists == false && i <= secondswait)
        {
            FileExists = File.Exists(SearchFile);
            System.Threading.Thread.Sleep(1000);
            i++;
        }

        return (FileExists);
    }

bool FileExistsStatus = CheckifFileExists(SearchFile, secondswait);

if(FileExistsStaus == true)
    //continue test case
else
    //explicitly fail test case 
```

I looked around for a while but could not find anything specific to Coded-UI that allows me to fail the test case.

Thank you!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:08:17.167

Moved from my comment on the question to an answer.

How about `Assert.IsTrue(FileExistsStatus)`?

# asp.net - ASP.Net 中是否有一种简单的方法可以通过更改某些查询参数来获取当前 URL？

> ID：11001878
> 
> 赞同：1
> 
> 时间：2012-06-12T17:38:26.657
> 
> 标签：asp.net, query-string

我有几个案例，其中我有一个包含多个查询参数的页面 - 最近是一个搜索结果页面 - 并且需要创建指向同一页面的链接，并在 URL 中更改了一个或多个查询参数。这似乎是一个常见的用例，我觉得好像必须有一些简单的内置方法来做这件事。

现在，我正在使用我编写的一个函数，它接收参数和值的字典，并将它们与来自`Request.QueryString`. `null`删除带有值的参数。它有效，但我对更简单的方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:38:27.577

我现在使用的功能：

```
public string ThisPageWithParams(IDictionary<string, string> newParameters)
{
    string url = Request.Url.AbsolutePath + "?";

    var parameters = new Dictionary<string, string>();
    foreach (string k in Request.QueryString)
    {
        parameters[k] = Request.QueryString[k];
    }
    foreach (var kv in newParameters)
    {
        if (newParameters[kv.Key] == null)
        {
            parameters.Remove(kv.Key);
        }
        else
        {
            parameters[kv.Key] = kv.Value;
        }
    }

    url += string.Join("&amp;", parameters.Select(kv => Server.UrlEncode(kv.Key) + "=" + Server.UrlEncode(kv.Value)));

    return url;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:17:40.017

我建议的小改进：

```
//...
{
    UriBuilder ub = new UriBuilder(Request.Url);

    //...

    ub.Query = string.Join("&", parameters.Select(kv => string.Format("{0}={1}", Server.UrlEncode(kv.Key), Server.UrlEncode(kv.Value))));

    return ub.ToString();
} 
```

* * *

*编辑*

实际上返回值也应该是一种`Uri`类型，但我不想引入任何重大更改。

# css - 多级中使用的嵌套 div 和类的 CSS 问题

> ID：11001884
> 
> 赞同：0
> 
> 时间：2012-06-12T17:38:35.293
> 
> 标签：css, css-selectors

（在我开始之前，是的，我之前问过[类似的问题](https://stackoverflow.com/questions/10940422/how-to-float-image-inside-of-div)；不幸的是，由于添加了新信息，标记已经完全变坏了，现在我无法弄清楚。）

我有一些由 Drupal 视图生成的非常难看的标记。因为许多类名可以在多个地方使用，在层次结构的各个级别（例如，第一个`view-content/view-grouping/view-grouping-header`需要向左浮动（或者至少它的内容用于爆头图像，但其他 view-grouping-header 元素需要显示在图像的右侧），我不能只处理类名；我需要获得完整的层次结构。我遇到了一些麻烦......（我知道有人会过来说，“但是你可以在 Drupal 视图中向字段添加类；为什么不这样做呢？”好吧，如果你正在显示，你可以单个字段，但在这种情况下，我需要按显示的 6 个字段中的 5 个进行分组，并且当您按字段分组时，您将字段本身设置为从显示中排除，这意味着您添加到该字段的任何自定义类被忽略。您可以对分组进行样式化的唯一操作是将单个类应用于所有行，我已经这样做了，但在这种情况下没有帮助。）

```
<div class="view-clone-of-speaker-list">
<div class="view-content">
<div class="view-grouping">
    <div class="view-grouping-header">
        <div id="file-741" class="file file-image file-image-jpeg 
         contextual-links-region">
            <div class="content">
                <img src="johndoe.jpg" width="180" height="180" alt="" /> 
                <!-- this img needs to float left -->
            </div>
        </div>
    </div>

    <div class="view-grouping-content">
        <div class="view-grouping">
            <div class="view-grouping-header">
                <a href="/speaker/john-doe">John Doe</a>
                <!-- this view-grouping-header a needs to be styled differently 
                than the one the next level down (view full profile) -->
            </div>

            <div class="view-grouping-content">
                <div class="view-grouping">
                    <div class="view-grouping-header">
                        Freelance consultant
                    </div>
                    <div class="view-grouping-content">
                        <div class="view-grouping">
                            <div class="view-grouping-header">
                                Path to Purchase Institute
                            </div>
                            <div class="view-grouping-content">
                                <div class="view-grouping">
                                    <div class="view-grouping-header">
                                        <a href="/speaker/john-doe">
                                    view full profile    &gt;</a>
                                    </div>
                                    <div class="view-grouping-content">
                                        <h3>Sessions:</h3>
                                        <div class="views-row views-row-1 views-row-odd views-row-first">      
                                            <div class="views-field views-field-title-1">
                                                <span class="field-content">
                                                    <a href="/session/keynote-address-2">Keynote Address 2</a>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="views-row views-row-2 views-row-even views-row-last">      
                                            <div class="views-field views-field-title-1">
                                                <span class="field-content">
                                                    <a href="/session/keynote-address-1">Keynote Address 1</a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div> 
```

这是我尝试过的，例如，为了获得外部视图分组 - 我想在整个事物周围放置一个边框：

```
.view-clone-of-speaker-list.div.view-content.div.view-grouping {
    border: 1px solid #a8a8a8;      
} 
```

但根据 Firebug 的说法，该元素并没有得到那种风格。

这是期望的结果；对于实际的样式代码，我不需要帮助（我不认为！）；我只需要一只手来弄清楚如何处理正确的元素，因为它们嵌套得非常糟糕。 ![在此处输入图像描述](../Images/7456693480e43c0e08f1c53af495bc75.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:43:52.797

选择器上的句点表示“类”；div.myClass 表示具有 myClass 类的 div。div.myClass.div.myOtherClass 没有任何意义。

我想你想要的是

```
div.view-clone-of-speaker-list>div.view-content>div.view-grouping {
    border: 1px solid #a8a8a8;      
} 
```

这意味着“具有视图分组类的 div，它是具有视图内容类的 div 的子级，它是具有扬声器列表视图克隆类的 div 的子级”。

# regex - perl替换文本中的算术和重复

> ID：11001887
> 
> 赞同：2
> 
> 时间：2012-06-12T17:38:49.880
> 
> 标签：regex, perl

我正在尝试打印一些“+”字符，然后是一些“-”字符，重复次数由一些简单的算术决定。你能告诉我以下有什么问题吗（这在没有尝试划分的情况下有效）：

```
some-command | perl -pe 's/(\d+) (\d+)/ "+" x ($1 / 4) . "-" x ($2 / 4)/eg' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T17:42:37.980

`/`需要逃避。尝试：

```
some-command | perl -pe 's/(\d+) (\d+)/ "+" x ($1\/4) . "-" x ($2\/4)/eg' 
```

另一种选择是使用与您的正则表达式不同的字符`/`：

```
some-command | perl -pe 's;(\d+) (\d+); "+" x ($1/4) . "-" x ($2/4);eg' 
```

# php - PHP：在表单数据中操作多维数组？

> ID：11001890
> 
> 赞同：2
> 
> 时间：2012-06-12T17:38:59.240
> 
> 标签：php, arrays, multidimensional-array, foreach

我有一个包含一个人的名字和姓氏的表格。用户可以使用链接添加多个人，该链接通过 JS 创建新的输入字段。以下是包含 2 个人的表单示例：

```
<form action="" method="post">
    <input type="text" class="required" name="people[first][]" />
    <input type="text" class="required" name="people[last][]" />

    <input type="text" class="required" name="people[first][]" />
    <input type="text" class="required" name="people[last][]" />

    <input type="submit" name="submit">
</form> 
```

我试图找出一种将这些数据插入数据库的方法。我试过使用：

```
foreach ($_POST['people'] as $person) {
  foreach ($person as $value) {
    echo $value . '<br/>';
  }
} 
```

..这导致

名字 1
名字 2
姓氏 1
姓氏 2

我试图以某种方式对结果进行分组，以便我可以为每个`first name x`+`last name x`组合插入一个新行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:47:44.137

像这样创建输入元素：

```
<input type="text" name="people[0][first]" />
<input type="text" name="people[0][last]" />
<input type="text" name="people[1][first]" />
<input type="text" name="people[1][last]" /> 
```

在您的 PHP 中：

```
foreach ($_POST['people'] as $person) {
  echo $person['first'].' '.$person['last'].'<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:49:00.547

`$_POST['people']['first']`是一个名字数组。
`$_POST['people']['last']`是一个姓氏数组。

您可以将它们合并到一个数组中，如下所示：

```
$people = $_POST['people'];
$length = count($people['first']);
for($i = 0; $i < $length; $i++)
    $temp[] = array('first' => $people['first'][$i], 'last' => $people['last'][$i]);
$people = $temp; 
```

生成的数组`$people`将是关联数组的数组，可能如下所示：

```
Array
(
    [0] => Array
        (
            [first] => Jim
            [last] => Smith
        )

    [1] => Array
        (
            [first] => Jenny
            [last] => Johnson
        )

) 
```

这相当于您通过修改 HTML 获得的数组，正如 bsdnoobz 所展示的那样，您也可以这样做。遍历它也是一样的：

```
foreach ($people as $person) {
    echo $person['first'] . ' ' . $person['last'] . '<br />';
} 
```

# google-maps - 是来自客户的 PC 还是我的数据库服务器的请求？

> ID：11001891
> 
> 赞同：1
> 
> 时间：2012-06-12T17:39:05.017
> 
> 标签：google-maps, google-maps-api-3, oracle-apex

我需要用 APEX 和谷歌地图服务开发一个数据库项目。我注意到谷歌地图服务有限制。

我假设如果我在 APEX 中编写 javascript 代码并向 Google 发送请求（例如加载地图），请求是从客户端浏览器直接发送到 Google 地图服务器，而不是从我的数据库服务器发送到 Google 地图服务器，所以我的应用程序不会打破服务限制。这个假设正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:13:00.460

请求的来源无关紧要 - 每个请求都包含标识您的应用程序的 API 密钥（自我上次查看以来可能已更改）。所以无论是来自数据库服务还是 js-client 都没有关系。

您的应用程序*将*在超过配额的那一刻打破服务限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T01:08:27.247

我不会费心编写此代码，因为有一个可用于 4.1 的谷歌地图插件。Apex-plugins.com

# jquery - 如何使用 CSS 和 jQuery 创建简单的选项卡？

> ID：11001897
> 
> 赞同：1
> 
> 时间：2012-06-12T17:39:33.940
> 
> 标签：jquery, css

我想创建一些简单的标签。

我有 3 个具有不同内容的 s，我通过在后两个s`div`上设置一个负上边距来将它们放置在彼此之上。`div`

然后我有 3 个选项卡，并且我已经设置了我的代码，以便当您单击`#tab1 .fadein content1`.

例子：

```
$(document).ready(function() {
  $(".content-kidsclub").hide();
  $("#tab1").click(function() {
    $(".content-kidsclub").fadeTo("slow", 1.0);
  });
});

$(document).ready(function() {
  $(".content-computersuite").hide();
  $("#tab2").click(function() {
    $(".content-computersuite").fadeTo("slow", 1.0);
  });
});

$(document).ready(function() {
  $(".content-education-assistance").hide();
  $("#tab3").click(function() {
    $(".content-education-assistance").fadeTo("slow", 1.0);
  });
}); 
```

我第一次点击每个都很好。但在那之后它就停止了。而且：如果您首先单击 tab2，则由于负边距，它会高于此值。不知道为什么。

我感觉如此接近却又如此遥远。我怀疑它与回调有关。

我对 jQuery 很陌生，所以这似乎有点愚蠢。

总的来说，有没有人知道一种更好的方法来将`div`s 放置在彼此之上，然后让标签工作。是否与使用`display:block`有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T17:41:19.083

为什么不使用 JQuery UI 并使用选项卡功能？

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

超级容易设置和开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T17:53:42.110

你非常接近 - [http://jsfiddle.net/7mfLF/1/](http://jsfiddle.net/7mfLF/1/)

请注意，您不必重复该`document.ready`部分 - 声明一次即可。

当然你可以使用 Bootstrap 和 jQuery UI，但是它们真的很重，对于这些小任务，包含一个 130Kb 的库并不是最好的做法。

```
$(document).ready(function(){
    $("li").click(function() {
        $("li div").hide();
        $(this).children("div").fadeIn("slow");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:44:28.273

看起来您正在显示您的标签，但再也没有隐藏它们？

有没有想过使用 twitter 引导程序？可能会简化事情...

[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T20:06:59.773

我在我的项目中使用此代码：

[带有 CSS 和 jQuery 的简单标签](http://www.htmldrive.net/items/show/542/Simple-Tabs-w-CSS-jQuery.html)

它简单、轻量，因为使用纯 JQuery（没有 JQuery UI）并且可以在我测试过的所有浏览器中工作。希望能帮到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T15:09:28.973

我终于明白了，为帮助这就是我想要的而欢呼。

```
$(document).ready(function(){ 
    $("#tab1").click(function(){
        $(".content-computersuite").css({display: "none"}).animate({opacity: "0"});
        $(".content-education-assistance").css({display: "none"}).animate({opacity: "0"});                    
        $(".content-kidsclub").css({display: "block"}).animate({opacity: "1"},1000);    
    });

    $("#tab2").click(function(){
        $(".content-kidsclub").css({display: "none"}).animate({opacity: "0"});  
        $(".content-education-assistance").css({display: "none"}).animate({opacity: "0"});
        $(".content-computersuite").css({display: "block"}).animate({opacity: "1"},1000);   
    });

    $("#tab3").click(function(){
        $(".content-kidsclub").css({display: "none"}).animate({opacity: "0"});  
        $(".content-computersuite").css({display: "none"}).animate({opacity: "0"});
        $(".content-education-assistance").css({display: "block"}).animate({opacity: "1"},1000);    
    });
}); 
```

只需一个简单的 CSS 从 display:none 更改为 display:block。然后动画淡化它。欢呼解释我只需要在方便时准备好文件。

# c++ - Windows 窗体 - 单实例 - 包含语句

> ID：11001904
> 
> 赞同：0
> 
> 时间：2012-06-12T17:40:12.300
> 
> 标签：c++, winforms, visual-c++, c++-cli

当我尝试在“For_Student_Details.h”表格中使用#include“CFIS_Main.h”语句时，它不接受......任何人都可以指出我的错误吗？感谢您的帮助..

```
MyProject.cpp
// MyProject.cpp : main project file.

#include "stdafx.h"

#ifndef CFIS_Main_h
#define CFIS_Main_h
#include "CFIS_Main.h"
#endif

using namespace MyProject;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Application::Run(gcnew CFIS_Main());
    return 0;
} 
```

# 我的 MdiParent 代码

```
//CFIS_Main.h  IsMdiContainer = True

#include "For_Student_Detials"

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
For_Student_Detials^ MyStudentDet= For_Student_Detials::GetForm(true,this);
MyStudentDet->MdiParent=this;
MyStudentDet->FormBorderStyle=System::Windows::Forms::FormBorderStyle::None;
MyStudentDet->Dock=DockStyle::Fill;
MyStudentDet->Show();
} 
```

# 我的 MdiChild 代码 For_Student_Details

```
#include "CFIS_Main.h"  Why Not included...?????

public: static For_Student_Details^ For_Student_Details::_instance = nullptr;
public: static For_Student_Details^ For_Student_Details::GetForm(bool^ IsMDIChild, CFIS_Main^ MyInstFrm) {
if (_instance == nullptr)
    _instance = gcnew For_Student_Details();

if (_instance->IsDisposed)
    _instance = gcnew For_Student_Details();

if (IsMDIChild)
    _instance->MdiParent = MyInstFrm;

return _instance;
} 
```

收到以下错误

```
error C2061: syntax error : identifier 'CFIS_Main'
error C2065: 'MyInstFrm' : undeclared identifier
error C2660: 'CashFlow_InformationsSystem::For_Loan_Details::GetForm' : function does not take 2 arguments 
```

从上面的代码中，它不包括CFIS_Main，我无法识别我的错误，有人可以指出我吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:45:34.233

您有一个循环标题参考：

*   “For_Student_Details”包括“CFIS_Main.h”
*   “CFIS_Main.h”包括“For_Student_Details”

您将需要解决此循环依赖关系。

最简单的方法是在“CFIS_Main.h”中只保留函数*声明*，并将*定义*移动到“MyProject.cpp”中，其中还包括“For_Student_Details”。`button1_Click()`

 *您还必须定义（或包含正确的标题）中`CFIS_Main`引用的类型`For_Student_Details::GetForm()`（这可能会在您修复循环包含问题后得到解决）

此外，将包含保护放在头文件中，而不是 .cpp 文件中*

# git - 保存旧的 git 存储库版本

> ID：11001909
> 
> 赞同：1
> 
> 时间：2012-06-12T17:40:42.093
> 
> 标签：git, file, repository, commit, versions

对于我正在处理的项目，我需要保存特定版本的 git 存储库的所有文件。我已经查看了大量有关 git checkout 的信息，但我无法弄清楚这对我拥有的目录中的文件有什么影响，更不用说保存该特定提交的版本了。有谁知道在特定提交时获取 git 存储库文件的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:52:13.777

[做一个“git export”（比如“svn export”）？](https://stackoverflow.com/questions/160608/how-to-do-a-git-export-like-svn-export)

```
git checkout [commit sha]
git archive --format zip --output /full/path/to/zipfile.zip master 
```

但是，我不知道，为什么。通常一个人使用 vcs 正是因为它保存了每个状态，那么为什么不直接标记它并在需要时检查它呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:58:06.743

我认为`tag`会有所帮助。每次您想保存所有当前文件时，输入类似`git tag -a v1.4 -m 'version 1.4'`. 因此，一旦您想要返回这些文件，首先提交或存储更改，然后键入`git checkout v1.4`，文件将回滚到您标记的时间。检查这些链接以获取更多信息：[如何标记](http://learn.github.com/p/tagging.html)以及[如何取回它们](https://stackoverflow.com/questions/791959/how-to-use-git-to-download-a-particular-tag)。

# java - Android 线程、服务以及它们之间的双向通信

> ID：11001910
> 
> 赞同：1
> 
> 时间：2012-06-12T17:40:45.687
> 
> 标签：java, android, multithreading, android-service

我正在努力解决这里需要发生的事情。我目前正在开发一个运行服务的应用程序。该服务在启动时会打开一个在后台线程中运行的网络服务器。

在此服务运行的任何时候，用户都可以从浏览器向设备发送命令。目前的事件顺序如下。

1.  用户向服务器发送请求
2.  服务器通过 msg 处理程序构造向服务发送消息，它发送诸如 url 参数之类的数据
3.  服务对数据做它想做的事，并希望在浏览器中向用户发送一些反馈消息
4.  ？？？
5.  服务器对请求的响应包含来自服务的反馈消息。

我的函数设置方式我需要在等待服务响应时暂停我的 serve() 函数，然后在收到消息后恢复并发送 http 响应。

网络服务器.java

```
public Response serve( String uri, String method, Properties header, Properties parms, Properties files )
{

    Bundle b = Utilities.convertToBundle(parms);
    Message msg = new Message();
    msg.setData(b);
    handler.sendMessage(msg);
    //sending a message to the handler in the service

    return new NanoHTTPD.Response();
} 
```

命令服务.java

```
public class CommandService extends Service {

private WebServer webserver;
public Handler handler = new Handler() {
      @Override
      public void handleMessage(Message msg) {
          execute_command(msg.getData());//some type of message should be sent back after this executes

      }; 
```

有什么建议么？这种结构是实现它的最佳方式，还是你能想到一个更好的设计来实现更清晰的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:29:06.880

我认为缺乏答案是因为您没有非常具体地说明您的问题是什么。根据我的经验，在 StackOverflow 上获得一般架构建议的简单或直接问题的答案更容易。

我不是Android专家，但我会试一试。我的问题是为什么你有一个在服务后台运行的 Web 服务，为什么不只有一个类，让你的服务成为 Web 服务？

关于线程、通信和睡眠，要记住的主要事情是网络服务器需要始终可以服务新请求，同时服务当前请求。除此之外，客户端等待线程完成其任务是正常的（即线程“阻塞”）。因此，大多数网络服务器都会产生一个新线程来处理传入的每个请求。如果您有一个后台线程，但在等待后台线程完成其任务时阻塞了初始线程，那么您最好完成所有事情在一个线程上。实际上，为了简单起见，后者更可取。

如果 Android 在请求进来时实际上为您生成了新线程，那么就不需要后台线程。只需在一个线程上同步执行所有操作，并为简单而欢欣鼓舞！

# actionscript-3 - 使用 Flash 在 as3 中嵌入图像

> ID：11001913
> 
> 赞同：0
> 
> 时间：2012-06-12T17:40:50.490
> 
> 标签：actionscript-3, embedded-resource

我在 Mac 上使用 Flash Pro、CS6。

我有这门课

```
package classes
{
    public class AssetEmbeds_1x
    {
        //kid
        [Embed(source = '../graphics/Player_Graphics.swf')]
        public static const playerG:Class;
    }
} 
```

这是一个 swf，其中包含一个名为 KidCharacter 的导出（在第一帧）movieclip。我正在尝试从另一个班级访问那个 childCharacter 影片剪辑，但我无法做到这一点。

我试过这个...

```
var textureClass:Class = AssetEmbeds_1x;
var newClass = textureClass['playerG'];

myGraphic = newClass['kidCharacter']; 
```

但它不起作用，myGraphic（它是一个影片剪辑）始终为空。我不确定它是否甚至嵌入了任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:47:27.383

尝试这个：

```
var player:MovieClip = new AssetsEmbeds_1x.playerG();
var kid:MovieClip = player.root.kidCharacter; 
```

# salesforce - 字符 ' ' 没有可行的替代方案

> ID：11001916
> 
> 赞同：0
> 
> 时间：2012-06-12T17:40:56.903
> 
> 标签：salesforce, apex-code

嗨，我在此代码中收到以下错误 /* 类：CreateMobileChatterCntrl 描述：在联系人上发布 Chatter。开发者：Harish Khatri(Appirio Offshore) 创建日期：2012 年 6 月 2 日 */

```
public without sharing class CreateMobileChatterCntrl {
  public final Id ContactID{get;set;}
  public String message{get;set;}
  public boolean isSuccess{get;set;}
  public boolean throwError{get;set;}
  public String deviceType{get;set;}
  //----------------------------------------------------------------------------    
    //constructor
  //----------------------------------------------------------------------------  
  public CreateMobileChatterCntrl() {
    throwError = false;
    isSuccess = false;
    if( ApexPages.CurrentPage().getParameters().get('id') != null){
      ContactID = ApexPages.CurrentPage().getParameters().get('id');
    }
    String userAgent = ApexPages.currentPage().getHeaders().get('USER-AGENT');
    if(userAgent.contains('iPhone')) 
      deviceType = 'iPhone';
    //else if(userAgent.contains('Android')) deviceType = 'Android';  
  }
  //----------------------------------------------------------------------------    
    // Post the chatter on contact
  //----------------------------------------------------------------------------
  public Pagereference save() {

    if(message == null || message ==''){
      throwError = true;
      return null;
    }

    FeedItem feedItem = new FeedItem();
    feedItem.ParentId = ContactID;
    feedItem.Body = message;

    try {

      insert feedItem;
      isSuccess = true;

    } catch(Exception e){}
   return null;//new PageReference('/' + ContactID);
  }

  public Pagereference cancel() {
    return new PageReference('/' + ContactID);
  }
} 
```

public final Id ContactID{get;set;} 在这一行我收到错误 No Viable Alternative at character ' '。任何人都可以帮助我为什么会收到此错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T17:48:34.357

您的类文件中的某些单引号字符无效 --- 可能是因为您从其他地方复制并粘贴了代码。在我从其他地方复制代码之前，我已经多次发生这种情况。从以下引号开始： message == '' ，我会删除单引号，重新输入它们，然后重新保存文件。对所有单引号重复（或进行查找和替换）。

# java - 为什么有两个带有 Google Guice 依赖注入框架的单例实例

> ID：11001920
> 
> 赞同：5
> 
> 时间：2012-06-12T17:41:11.580
> 
> 标签：java, singleton, guice

在我的应用程序中有 2 个由 Google Guice 创建的 Singleton 实例。

这怎么可能？

绑定如下：

```
bind(Foo.class).to(FooImpl.class).in(Scopes.SINGLETON); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:52:48.827

这里的问题是绑定声明。

我们通过将绑定声明替换为：

```
bind(FooImpl.class).in(Scopes.SINGLETON);
bind(Foo.class).to(FooImpl.class); 
```

# jquery - 如何使用jquery动态包装和展开带有div的html控件

> ID：11001926
> 
> 赞同：0
> 
> 时间：2012-06-12T17:41:25.760
> 
> 标签：jquery, html

我正在动态生成 html 控件，现在我想使用 jquery 将 html 内容动态包装在 div 中。

示例：动态生成的控件是

```
<input type='text' value='default' id='text1'/> 
```

应该包装为

```
<div class='outerdiv'>
  <input type='text' value='default' id='text1'/>
  <span class='handle'></span>
</div> 
```

我试过了

```
$('#text1').wrap("<div class='outerdiv'><span class='handle'></span></div>"); 
```

并且为了打开我使用

```
$('#text1').unwrap(); 
```

但我无法得到我所期望的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:44:38.617

用于`.wrap()`将其包含在 div 中，然后使用`.after()`或`.append()`添加跨度。

```
$('#text1').wrap("<div class='outerdiv'></div>").after("<span class='handle'></span>"); 
```

要解包和删除，`.remove()`请在解包之前找到和跨度：

```
$('#text1').next().remove().end().unwrap(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T17:44:13.593

那这个呢？

```
$('#text1').wrap('<div class="outerdiv"></div>').after('<span class="handle"></span>'); 
```

# java - Mysql与表的继承

> ID：11001931
> 
> 赞同：0
> 
> 时间：2012-06-12T17:41:33.860
> 
> 标签：java, mysql

我正在用 Java 编程，我有三个类。

一个是`User`。其他类是`UserTeacher`和`UserStudent`。两者都继承自`User`.

我必须在 mysql 数据库中实现表来存储值。你会怎么做？具有`User`属性`username`、`pw`和。`firstname``lastname`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:44:29.643

制作一个带有额外属性的表，除了用户名、密码、名字之外，称为 userType。你还有什么要问的吗？

编辑。您还可以将表格拆分为以下内容：

```
UserTeacher: firstname, passwd, username
UserStudent: firstname, passwd, username
User: firstname, username 
```

但是我仍然认为第一种方法更好，因为教师和学生的班级只是在他们是谁而不是他们的属性上有所不同（至少没有提到）。如果您确实有很多其他属性，我会推荐如下内容：

```
UserTeacher: firstname, username, attr1, attr2, attrN
UserStudent: firstname, username, attr1, attr2, attrN
User: firstname, username, passwd 
```

# openlayers - OpenLayers 单击时生成 4 个独立的多边形

> ID：11001936
> 
> 赞同：0
> 
> 时间：2012-06-12T17:42:13.607
> 
> 标签：openlayers

嗨，我是 openlayers 的新手，我从 openlayers 提供的示例中获取了以下代码，我试图通过单击创建 4 个多边形，然后将每个多边形拖放到一个新位置，这可能吗？

提前感谢您的帮助。

代码：

```
<script type="text/javascript">
    var map, vectors, controls;
    function init(){
        map = new OpenLayers.Map('map');
        var options = {numZoomLevels: 3};
        var graphic = new OpenLayers.Layer.Image(
            'some title',
            'image.png',
            new OpenLayers.Bounds(-180, -88.759, 180, 88.759),
            new OpenLayers.Size(800, 200),
            options
        );
        graphic.events.on({
            loadstart: function() {
                OpenLayers.Console.log("loadstart");
            },
            loadend: function() {
                OpenLayers.Console.log("loadend");
            }
        });
        var jpl_wms = new OpenLayers.Layer.WMS( "title",
            "http://t1.hypercube.telascience.org/cgi-bin/landsat7", 
            {layers: "landsat7"}, options);
            vectors = new OpenLayers.Layer.Vector("Vector Layer");
            map.addLayers([graphic, vectors]);
            map.addControl(new OpenLayers.Control.LayerSwitcher());
            map.addControl(new OpenLayers.Control.MousePosition());
            controls = {
                point: new OpenLayers.Control.DrawFeature(vectors,
                            OpenLayers.Handler.Point),
                shape: 
 //*************This is what i'm trying to   do***************************************************
                for (i=0; i<5; i++)
                {    
                new OpenLayers.Control.DrawFeature(vectors,
                        OpenLayers.Handler.RegularPolygon,
                        {handlerOptions: {radius: 5, sides: 4, snapAngle: 45 }}),
                }

                drag: new OpenLayers.Control.DragFeature(vectors)
            };
            for(var key in controls) {
                map.addControl(controls[key]);
            }
            map.setCenter(new OpenLayers.LonLat(0, 0), 3);
            document.getElementById('noneToggle').checked = true;
        }
        function toggleControl(element) {
            for(key in controls) {
                var control = controls[key];
                if(element.value == key && element.checked) {
                    control.activate();
                } else {
                    control.deactivate();
                }
            }
        }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:24:16.577

您应该创建一个随机线性环（我不知道您是否希望您的多边形是随机的）。线性环是一个对象，其中包含多边形所需的所有点。

```
var polygonFeatures = new Array();
for (i = 0; i < 4; i++) {

  var site_points = new Array();

  // Whatever points you want to us in site points
  // A point is an OpenLayers.Geometry.Point
  var linear_ring = new OpenLayers.Geometry.LinearRing(site_points);

  // Create a feature for the polygon(s) to be in
  polygonFeatures[i] = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([linear_ring]);
}

// Add the features to the vector layer
vectors.addFeatures([polygonFeatures]); 
```

这就是您必须向地图添加多边形的方式，您不应该在控件中定义它们。拖动功能已经正确，只需确保您为 site_points 找到了一些东西。

# iphone - UIScrollView 一次只向一个方向滚动

> ID：11001938
> 
> 赞同：23
> 
> 时间：2012-06-12T17:42:23.170
> 
> 标签：iphone, ios, ipad, uiscrollview, scroll

我有一个 UIScrollView ，我希望它能够在两个方向上滚动（目前可以），但一次只能滚动一个。因此，例如，如果您开始水平滚动它，它根本不会垂直移动，直到您松开并开始垂直移动它。我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-12T17:46:19.940

将`directionalLockEnabled`属性设置为 YES。来自苹果文档：

> 如果此属性为 NO，则允许在水平和垂直方向上滚动。如果此属性为 YES 并且用户开始沿一个大致方向（水平或垂直）拖动，则滚动视图将禁用在另一个方向上的滚动。如果拖动方向是对角线，则滚动不会被锁定，用户可以向任意方向拖动，直到拖动完成。默认值为否

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-12T14:39:43.847

这个问题的公认答案并不完全正确。根据当前的文档`directionalLockEnabled`（在原始答案中引用）：

> 如果拖动方向是对角线，则滚动不会被锁定，用户可以向任意方向拖动，直到拖动完成。

我自己也发现了这种情况。如果拖动的初始方向接近 x 轴和 y 轴之间的 45 度角，则方向锁定将失败。如果您或多或少地水平或垂直拖动，则会激活锁定。

有关实现真正单轴锁定的一种方法，请参阅此链接： [http ://bogdanconstantinescu.com/blog/proper-direction-lock-for-uiscrollview.html](http://bogdanconstantinescu.com/blog/proper-direction-lock-for-uiscrollview.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-25T10:36:30.107

实现这一点的简单方法是像这样设置`directionalLockEnabled`并`YES`实现 UIScrollerView 委托

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.x != 0 &&
        scrollView.contentOffset.y != 0) {
        scrollView.contentOffset = CGPointMake(0, 0);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-18T10:29:38.940

根据@Joe xi 的回答，这对我有用。**斯威夫特 3.0**

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
    if scrollView.contentOffset.x != 0 && scrollView.contentOffset.y != 0 {
        scrollView.contentOffset = CGPoint(x: 0, y: 0)
    }
} 
```

# java - Java GUI 对象的动态重新定位

> ID：11001943
> 
> 赞同：2
> 
> 时间：2012-06-12T17:42:35.967
> 
> 标签：java, swing, gridbaglayout

您好 StackOverflow 用户！

我有一个问题，我确实找到了问题的*解决方案*，但我觉得解决方案不是*最佳*的。我觉得我使用蛮力来实现我想做的事情，并且想知道是否有更好的方法来实现我想要的事情。

基本上我所拥有的是一个使用 GridBagLayout 的 Java GUI 应用程序。我使用 GridBagLayout 因为布局基本上总是居中对齐。当添加其他内容时，它会向上、向下、向左或向右移动所有内容（取决于添加新对象的位置）。问题是我的程序还需要删除某些对象（取决于其他代码块中发生的情况）。所以假设我有四个像这样排列的对象`[1] [2] [3] [4]`，我想删除`[3]`. 我本质上希望布局更改为`[1] [2] [3]`，本质上是在`[3]`. 在视觉上这样做没有问题（因为 GridBagLayout 的工作原理）。然而，当新的东西被添加到显示中时，会出现重叠，因为虽然`[4]`占据了视觉位置`[3]`，GridBagPosition（不知道还能叫什么）没有改变。所以我为删除过程实现了下面的代码。

```
public void removeSubImagePanel (int subPanelIdx) {
    int x, y, nextX, nextY;
    this.remove(this.portraits[subPanelIdx]);

    nextX = this.portraits[subPanelIdx].getGbx();
    nextY = this.portraits[subPanelIdx].getGby();

    for (int i = subPanelIdx; i < this.numberOfPortraits; i++) {
        x = nextX;
        y = nextY;

        this.portraits[i] = this.portraits[i+1];
        if (this.portraits[i+1] != null) {
            nextX = this.portraits[i+1].getGbx();
            nextY = this.portraits[i+1].getGby();
            this.portraits[i].getObject().setSubPanelIdx(i);
            gbc.gridx = x;
            gbc.gridy = y;
            this.portraits[i].setGbLocation(x, y);
            gb.setConstraints(this.portraits[i], gbc);
        }
    }
    this.portraits[this.numberOfPortraits] = null;
    this.numberOfPortraits--;
} 
```

本质上，我向“肖像”对象添加了两个整数变量，以保持 GridBagLayout 上 X 和 Y 的位置。这样，我可以得到 position `[3]`，得到`[4]`set`[4]`的位置到 where `[3]`'s 的位置，然后（如果有 a `[5]`， set`[5]`的位置到`[4]`'s 的旧位置等等，直到我到达最后一个元素。

感觉太“蛮力”了，不得不添加这些整数，我觉得如果我要为每个对象制作一个单独的 GridBagConstraint 会更糟。有没有更好的方法来完成我需要做的这种转变？

对不起，这个问题很长。我没想到会这么久。我希望这仍然可以。如果我不清楚并且您需要任何澄清，请随时提问！

编辑：如果这是在 CodeReview stackexchange 上会更好吗？实际上，将它放在那里似乎更有意义。不过我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:21:45.650

我不确定您对该项目的要求是什么，但我会查看[Spring 布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)- 此布局可让您指定以下内容：

```
the left of [1] should be 10 pixels from the left of the panel
the right of [1]  should be 10 pixels from the left of [2]
etc. 
```

像您在这里描述的那样实现一个漂亮的流体布局要容易得多（imo）。

**编辑：**只是尝试添加到讨论中：

也许你可以有一个从 Panel 扩展的名为 PortraitPanel 的类，在那里你可以维护一个图像面板列表。你可以有公共方法： add(int index); 删除（整数索引）；

因此，当您调用 add(2) 时，它将将该面板添加到该索引处的列表中 - 然后在索引 - 1 和索引 + 1 处获取面板并执行例程来调整这些约束，以便将它们布置在新添加的面板的任一侧。同样，对于删除，您可以使用 index - 1 并将其约束设置为在 index + 1 旁边布局，然后删除索引处的项目。同样，如果您使用 SpringLayout ，那么设置它非常容易，以便在窗口调整大小等时保持流畅。

希望这与您正在尝试做的事情一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:55:01.907

此[示例](https://stackoverflow.com/questions/3078354)显示可以从容器中删除所有组件并以任意顺序完全替换每个组件。封闭容器所需的时间`validate()`可以忽略不计，因为组件本身保持不变。

# mongodb - mongodb中的嵌套文档和_id索引

> ID：11001950
> 
> 赞同：1
> 
> 时间：2012-06-12T17:42:52.687
> 
> 标签：mongodb

我有一个包含嵌套文档的集合。每个文档还有一个 _id 字段。

这是文档结构的示例

```
{
   "_id": ObjectId("top_level_doc"),
   "title": "Cadernos",
   "parent": "4fd55bbc5d1709793b000008",
   "criterias": {
     "0": {
       "_id": ObjectId("a_nested_doc"),
       "value": "caderno",
       "operator": "contains",
       "field": "design0" 
    } 
  } 
} 
```

我希望能够通过搜索它的 _id 找到嵌套文档

有了这个查询

```
{
    "criterias._id" : ObjectId("a_nested_doc")
} 
```

它返回父文档（我只想要嵌套的那个）。

理想情况下我会这样做

```
{
    "_id" : ObjectId("a_nested_doc")
} 
```

并且它将返回具有该 id 的文档（无论是否嵌套）。

附言。为了简单起见，我编辑了“_id”值，只是为了这个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:00:00.837

您可能不得不忍受选择criterias._id （至少不用为查询编写包装器），但是您可以通过简单地检索字段的子集来选择文档本身。

[http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)

```
// The simplest case converted to your use case
db.collection.find( { criterias._id : ObjectId("a_nested_doc") }, { criterias : 1 } ); 
```

# gradle - 突然“无法解决所有依赖项...'org.apache.james:apache-mime4j:0.6@jar'未找到

> ID：11001954
> 
> 赞同：8
> 
> 时间：2012-06-12T17:43:20.867
> 
> 标签：gradle

我是 gradle 的新手，但我正在进行的项目的构建已经独立工作了几个月。今天我尝试“分级”它，我得到一个相当神秘的错误......

```
bobk-mbp:DM_Server bobk$ gradle
:clean
:readme
:compileJava

FAILURE: Build failed with an exception.

* What went wrong:
Could not resolve all dependencies for configuration ':compile'.
> Artifact 'org.apache.james:apache-mime4j:0.6@jar' not found.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 7.114 secs 
```

问题是我在我的依赖项部分对 org.apache.james:apache-mime4j 没有任何明确的依赖关系，所以它一定是来自其他东西。我如何确定我的哪些依赖项实际上需要这个，然后，我如何克服或解决这个缺失的工件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T19:00:38.613

那很有趣。maven 的 dependency:tree 的 gradle 等价物是

```
gradle dependencies
compile - Classpath for compiling the main sources.
+--- com.google.guava:guava:11.0.2 [default]
|    \--- com.google.code.findbugs:jsr305:1.3.9 [compile,master,runtime]
...
+--- org.jboss.resteasy:resteasy-multipart-provider:2.3.0.GA [default]
|    +--- javax.mail:mail:1.4.4 [compile,master,runtime]
|    |    \--- javax.activation:activation:1.1 [compile,master,runtime]
|    +--- org.apache.james:apache-mime4j:0.6 [compile,master,runtime] 
```

这表明我对詹姆斯的依赖是通过 resteasy 进入的。仅此知识是没有帮助的。看来我的本地缓存已经坏了。核对本地 m2 缓存 (~/.m2) 解决了这个问题（我开始 rm -rf 一次一个包，但很快就变老了）。

```
rm -rf ~/.m2 
```

显然，我需要了解很多关于这个基础设施的知识。我确信有更好的方法来做到这一点。

# java - 在 Hibernate 中使用子查询

> ID：11001956
> 
> 赞同：0
> 
> 时间：2012-06-12T17:43:42.953
> 
> 标签：java, hibernate

考虑一个使用两个表的示例查询。查询就像：

```
select t1.name, t1.address, (select count(*) from table2 t2 where t1.userid = t2.userid) as totalpoints from table1 t1 
```

有两个名为`Table1.java`和的 bean 类`Table2.java`。我的 DAO 类扩展了`HibernateDAOSupport`. `getHibernateTemplate.find()`是否可以在函数调用中将此查询与两个 bean 类一起使用？

任何帮助都是不言而喻的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:52:56.613

是的，这是可能的。HQL 查询与 SQL 查询几乎相同。但是请注意，您的 SQL 是无效的。[在有关子查询的 Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-subqueries)中甚至有一个这样的查询示例。

# java - AOP：对切入点的调用比我预期的要多

> ID：11001971
> 
> 赞同：3
> 
> 时间：2012-06-12T17:44:30.847
> 
> 标签：java, aspectj, aop

我正在尝试 AspectJ 并在制作计数器时遇到了一些我不理解的东西。这是代码：

```
aspect testaAssociacao perthis(execucoesReceita()){

  pointcut execucoesReceita() : execution(* Receita.*(..));

  int x;

    //constructor
    public testaAssociacao() { x = 0; }
    after(): execucoesReceita(){
      x = x+1;
      System.out.println("x = "+x); 
    }
} 
```

在 main() 中有：

```
 Receita r1 = new Receita("bolo1");
  Receita r2 = new Receita("bolo2");

  r1.adicionaIngrediente(new Ingrediente("FARINHA", 3));
  r1.adicionaIngrediente(new Ingrediente("leite", 1));
  r1.adicionaIngrediente(new Ingrediente("FARINHA", 2));
  r1.adicionaIngrediente(new Ingrediente("leite", 3)); 
```

在这种情况下，出口显示：

```
x = 1
x = 2
x = 1
x = 2 
```

如果我删除`perthis()`声明，这样它就不会被对象 Receita 分开，退出是这样的：

```
x = 1
x = 2
x = 3
x = 4
x = 5 
```

如果只有 4 次操作，计数器怎么可能到达 5？它是考虑 main() 函数，还是在另一个时刻运行？

# python - 使用 python 使用 IE 运行 Selenium 测试

> ID：11001974
> 
> 赞同：1
> 
> 时间：2012-06-12T17:44:42.610
> 
> 标签：python, internet-explorer, selenium-webdriver

[这里](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)的安装页面说要将 selenium 服务器独立 jar 添加到 CLASSPATH。罐子有什么作用？我需要吗？我已经运行了一些硒代码，没有它也可以工作。我只是实例化了 IE

`driver = driver.Ie()`

我在 Python 中运行 webdriver（selenium 2），试图测试 IE9（然后在测试 IE8 之后）。（我没有使用 .NET，只是运行一个 .py 文件）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:40:47.617

那是您需要使用“Selenium 1”运行的 jar。据我所知，Selenium 2 没有必要。它可以在进行远程测试时使用（我没有在 Selenium 2 上做过），但本地测试绝对不需要它。

# android - 如何使用卸载活动完成我的 android 应用程序的实际卸载/删除？

> ID：11001976
> 
> 赞同：2
> 
> 时间：2012-06-12T17:44:46.087
> 
> 标签：android, package, uninstallation

我添加了一个带有意图过滤器的活动来拦截我的应用程序的卸载，以便在用户卸载我的应用程序时添加一些额外的处理/清理。我的活动被调用得很好，但我似乎无法完成从设备中删除包的过程。

```
<activity
        android:name=".Uninstall"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.DELETE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="package"  />
        </intent-filter>
    </activity> 
```

当我使用包管理器尝试完成卸载时，它只会弹出相同的选择器对话框。

```
Intent intent = new Intent(Intent.ACTION_DELETE, Uri.fromParts("package", Uninstall.this.getPackageName(), null));
startActivity(intent); 
```

如果我为我的应用程序提供替代卸载活动，我如何完成从设备上实际卸载 apk？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:52:51.607

您应该查看参考文档以了解您的意图。意图`ACTION_DELETE`与从容器中删除项目有关，而不是与应用程序/包有关。处理删除应用程序/包的意图是，`ACTION_PACKAGE_REMOVED`但正如文档所述：

> 现有应用程序包已从设备中删除。数据包含包的名称。正在（卸载）安装的包没有收到这个`Intent`。

因此，对您的问题的简短回答是无法完成。如果您按书行事，则无需在卸载时执行其他任务。

# mysql - 为什么这个简单的更新运行如此缓慢？

> ID：11001977
> 
> 赞同：2
> 
> 时间：2012-06-12T17:44:49.337
> 
> 标签：mysql, performance

我正在一个相当大的桌子上运行我认为是相当直接的更新。我试图找出为什么这个简单的更新运行如此缓慢。大约花了5个小时才完成。

`master`表：大约 2m 行和 90 个字段。 `builder`表：大约 150 万行和 15 个字段

我最初尝试直接插入：

```
-- Update master table with newly calculated mcap
update master as m
inner join 
  (select b.date_base, b.gvkey, sum(b.sec_cap) as sum_sec_mkt 
  from builder as b
  group by b.gvkey, b.date_base) as x
on  x.gvkey = m.gvkey AND 
    x.date_base = m.date_base
set m.mcap = x.sum_sec_mkt; 
```

不幸的是，这运行了几个小时，我在等了 4 小时后终于把它杀死了。然后我想我会创建一个临时表并将初始选择的结果插入其中。

```
CREATE TABLE `temp_mkt_cap` (
  `date_base` date NOT NULL,
  `gvkey` varchar(15) DEFAULT NULL,
  `mkt_cap` double DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- insert market cap values in to temporary table
insert into temp_mkt_cap
select b.date_base, b.gvkey, sum(b.sec_cap) as sum_sec_mkt 
from builder as b
group by b.gvkey, b.date_base;

ALTER TABLE temp_mkt_cap
add primary key (date_base, gvkey); 
```

插入工作正常，`temp_mkt_cap`大约有 140 万行，但最终更新需要 5 小时才能完成。

```
-- Update master table with newly calculated mcap
update master as m
inner join temp_mkt_cap as mc
on m.date_base = mc.date_base AND m.gvkey = mc.gvkey
set m.mcap = mc.mkt_cap; 
```

'master' 有 'date_base' 和 gvkey_iid`PRIMARY KEYS`和 gvkey 作为`KEY`. 我之前在表上完成了更复杂的插入和更新，但无法弄清楚为什么这不起作用。

任何帮助将不胜感激。谢谢，

**更新：**主表上的键是：

```
ALTER TABLE master
  ADD PRIMARY KEY (gvkey_iid,date_base),
  ADD  KEY date_offset (date_offset),
  ADD  KEY gvkey (gvkey),
  ADD  KEY iid (iid); 
```

**更新**我向主表添加了一个新密钥，更新运行时间为 93.6 秒，低于 5 小时。感谢大家的帮助。

```
ALTER TABLE master
  ADD KEY 'date-gvkey' (date_base, gvkey); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:00:05.240

由于您要加入`mc.date_base AND m.gvkey = mc.gvkey`，因此您需要在两个表上按照加入它们的相同顺序对这些字段进行索引。

如果要将 table1 与 table2 连接，则需要AND`on table1.field1 = table2.field1 AND table1.field2 = table2.field2`上的索引。`(table1.field1, table1.field2)``(table2.field1, table2.field2)`

`Not null`领域是优选的。

此外，由于您是从该字段进行更新，因此`mc.mkt_cap`如果该字段还不是您之前创建的复合键的第一个字段，则需要在该字段上添加一个 SINGLE 键。

所有其他键或索引都可能会减慢您的查询速度。

请仔细检查您的数据库...

# java - JPA 与 Google Cloud SQL“NoClassDefFoundError：java.util.prefs.Preferences 是受限类”

> ID：11001978
> 
> 赞同：1
> 
> 时间：2012-06-12T17:44:49.943
> 
> 标签：java, google-app-engine, jpa, google-cloud-sql

我将 JPA 与 GAE/Google Cloud SQL 一起使用，并根据 Google 文档设置了所有内容。我可以在 Eclipse 中浏览我的 JPA 实体，并且应用程序运行良好，除非我尝试这样做：

```
EntityManager em = EMF.get().createEntityManager(); 
```

在 EMF 内部，我这样做：

```
private static final EntityManagerFactory emfInstance = Persistence.createEntityManagerFactory("MyApp"); 
```

...这就是导致错误的原因。这是获取 EntityManagerFactory 的正确方法吗？

下面是回溯。我还在回溯下方粘贴了 persistence.xml 内容，但它是自动生成的，我认为它是正确的。我不明白为什么 Preferences 会受到限制，因为我使用了 Google 推荐的访问 EntityManagerFactory 的方式。

```
java.lang.NoClassDefFoundError: java.util.prefs.Preferences is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at com.google.cloud.sql.Driver.<clinit>(Driver.java:34)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.eclipse.persistence.internal.security.PrivilegedAccessHelper.getClassForName(PrivilegedAccessHelper.java:119)
    at org.eclipse.persistence.sessions.DefaultConnector.loadDriverClass(DefaultConnector.java:253)
    at org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:85)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at org.pathways.myapp.rest.impl.GetProgramNameByID.<init>(GetProgramNameByID.java:16)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_(Runtime.java:126)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance(Runtime.java:134)
    at com.sun.jersey.server.spi.component.ResourceComponentConstructor._construct(ResourceComponentConstructor.java:191)
    at com.sun.jersey.server.spi.component.ResourceComponentConstructor.construct(ResourceComponentConstructor.java:179)
    at com.sun.jersey.server.impl.resource.PerRequestFactory$PerRequest._getInstance(PerRequestFactory.java:182)
    at com.sun.jersey.server.impl.resource.PerRequestFactory$AbstractPerRequest.getInstance(PerRequestFactory.java:144)
    at com.sun.jersey.server.impl.application.WebApplicationContext.getResource(WebApplicationContext.java:238)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="MyApp" transaction-type="RESOURCE_LOCAL">
        <class>org.myapp.shared.ProfileInfo</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.google.cloud.sql.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://mydomain.net:myapp:mydbinstance/mydb"/>
            <property name="javax.persistence.jdbc.user" value=""/>
            <property name="javax.persistence.jdbc.password" value=""/>
        </properties>
    </persistence-unit>
</persistence> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:55:08.270

看起来您与两个不同的 jpa 提供者有冲突。

您应该删除 eclipselink，因为谷歌应用引擎使用了 datanucleus。检查您的库依赖项。

编辑：

正确的解决方案是更改`com.google.cloud.sql.Driver`为`com.google.appengine.api.rdbms.AppEngineDriver`persistence.xml

# javascript - 变量未定义，但我已定义为类中的属性

> ID：11001979
> 
> 赞同：1
> 
> 时间：2012-06-12T17:44:50.520
> 
> 标签：javascript, javascript-objects

我有以下代码：

**Javascript：**

```
slideShow = {
     ImgsFolder: "images/",
     ImgsSrc: ['img.jpg', 'img2.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg'],
     MainElem: document.getElementById('SlideShow'),
     ImgElem: (this.MainElem.firstElementChild) ? this.MainElem.firstElementChild : this.MainElem.firstChild
     doit: function(){
          for (i = 0; i < this.ImgsSrc.length; i++) {
               document.writeln(this.ImgsFolder + this.ImgsSrc[i] + "<br/>");
               }
       }

  } 
```

当打印`ImgElem`变量的值时，给我错误信息`this.MainElem is undefined`，最后一行的问题。
我不知道这部分代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:49:33.063

为了使用`this`关键字，您必须使用关键字实例化对象`new`。否则，在这种情况下，`this`关键字将指向`window`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:56:45.070

正如我在评论中提到的，不可能从符号本身中引用通过对象文字符号创建的对象。

您需要先完全创建对象，然后才能引用它。

```
slideShow = {
     ImgsFolder: "images/",
     ImgsSrc: ['img.jpg', 'img2.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg'],
     MainElem: document.getElementById('SlideShow')
}

slideShow.ImgElem = slideshow.MainElem.firstElementChild ||
                    slideshow.MainElem.firstChild 
```

* * *

*要在创建期间*引用对象，您需要一个构造函数。

```
function SlideshowMaker() {
     this.ImgsFolder = "images/",
     this.ImgsSrc = ['img.jpg', 'img2.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg'],
     this.MainElem = document.getElementById('SlideShow')

     this.ImgElem = this.MainElem.firstElementChild ||
                    this.MainElem.firstChild
}

 // use "new"----v----to create a new object
var slideshow = new SlideshowMaker() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:57:40.577

当您使用诸如 之类的对象字面量时`{ key: value, ... }`，对象实际上是在整个块被解析/执行之后创建的。

```
var a = {
  // a is not defined here
  key: value
};
// it is defined here 
```

此外，您不能将`this`其用作您将要创建的对象的引用。`this`只能在对象的方法中使用（绑定到对象或在其上下文中执行的函数）。

你有两个选择：

1.) 您需要创建一个 getter 函数，例如

```
var a = {
  b: value,
  c: function () { return this.b.c; }
}; 
```

并调用它以访问`b.c`：`a.c()`

2.）在您的情况下，更好的方法是在`ImgElem`实际创建对象后定义属性：

```
var slideShow = {
 MainElem: document.getElementById('SlideShow')
};
slideShow.ImgElem = slideShow.MainElem.firstElementChild || slideShow.MainElem.firstChild; 
```

`slideShow`注意代替的用法`this`。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-12T17:47:51.627

也许你放错了一些括号？

```
var slideShow = {
ImgsFolder: "images/",
ImgsSrc: ['img.jpg', 'img2.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg'],
MainElem: document.getElementById('SlideShow'),
ImgElem: (this.MainElem.firstElementChild ? this.MainElem.firstElementChild :   this.MainElem.firstChild)
} 
```

# wix - 如何调试自定义引导应用程序？

> ID：11001980
> 
> 赞同：19
> 
> 时间：2012-06-12T17:44:51.457
> 
> 标签：wix, windows-installer, wix3.6, burn, votive

我正在使用 Burn for MSIs 包。我正在使用 Votive (Visual Studio) 和我自己的自定义 BA 而不是 WiXBA。我尝试使用`Debugger.Launch()`. 但是当我开始调试时，会出现错误消息。

> 没有为任何调用堆栈帧加载符号。无法显示源代码

我意识到 package.exe 链接了位于`C:\Documents and Settings\user\Local Settings\Temp\{GUID}\`. `{GUID}`总是改变。因此，每当我运行 package.exe 时，总是会更改目录。

我认为这是发生错误的原因。

在 Visual Studio 中，当我使用位于绝对路径 ( `.../Debug/bin/CustomBA.dll`) 的 CustomBA dll 启动 package.exe 时。但是在执行 package.exe 之后，它会链接到`Local Settings\Temp\{GUID}`目录。因此，当我们开始调试并附加到 CustomBA dll 时，CustomBA dll 的目录会动态更改并`No symbols are loaded`发生错误。

*   为什么 package.exe 链接位于的 dll `C:\Documents and Settings\user\Local Settings\Temp\{GUID}\`？我们可以静态选择dll的路径吗？
*   如果我们不能静态选择 dll 路径，如何使用 CustomBA 的调试功能？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T22:33:50.193

要调试引导程序应用程序，您需要在同一解决方案中同时使用 Bundle .wixproj 和 BA .csproj（或 .vcxproj，如果您正在使用本机 .dll），并且 Bundle 项目应该依赖于 BA 项目，因此重新构建正常工作。以下步骤应该允许您单步执行您的代码。

注意：确保您*没有*运行提升的 Visual Studio。如果您禁用了 UAC，请重新启用它。如果 Visual Studio 正在提升运行，这些步骤将无法正常工作。

1.  重建项目。这可确保您创建了一个 Bundle，其中包含更新的 BA.dll。
2.  右键单击解决方案资源管理器中的 BA .csproj 并选择`Set as StartUp Project`. BA .csproj 应该是粗体。
3.  右键单击 BA .csproj 并选择`Properties`.
4.  在`Properties`BA .csproj 上选择`Debug`选项卡。
5.  在`Debug`选项卡中，选择标记为的单选按钮`Start external program`
6.  浏览到构建 Bundle 的路径。

现在，您可以按 F5 并开始调试。请记住，每当您更改 BA .csproj 时，您还需要确保重新构建 Bundle .wixproj。否则，Bundle 将与您的旧 BA 一起启动，并且调试器会发现新构建的 BA 的 .pdbs 不匹配。

*额外的功劳：如果您`Just My Code`在调试器设置中禁用并下载 pdbs.zip 和 sources.zip 以匹配您的 WiX 安装版本，您实际上可以单步调试 Burn 代码以及您的 BA，以了解一切如何协同工作。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-10T21:35:25.863

我在这篇文章中遵循了[Rob 的建议](https://stackoverflow.com/a/15913760/480583)，但遗憾的是我无法让它为我工作（Visual Studio 2015，Wix 3.10.3，使用 WixWPF 管理引导程序应用程序）。没有断点被击中。我注意到调试器将自身附加到错误的进程，安装程序有两个正在运行的进程（我猜是 BA 和 Bundle）。当我更改进程时，断点被命中，但我的托管 BA 有我想在调试器实际连接之前调试的代码

我设法找到了一个解决方案，在连接调试器之前应用程序不会启动。我将此代码放在我的托管 BA 的构造函数代码隐藏文件（在 DEBUG 块中）中，就像这样......

```
public MainWindow()
{
#if DEBUG
    // Do not start until debugger attached
    while(!System.Diagnostics.Debugger.IsAttached)
    {
        System.Threading.Thread.Sleep(1000);
    }
#endif
    InitializeComponent();
    InstallData = new InstallerInfo();
} 
```

现在，当我与 Bundle 一起编译我的托管引导程序应用程序（带调试）并运行它时，应用程序将不会启动，直到您附加到托管引导程序应用程序`Tools > Attach to Process > Find your exe in the list`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T10:10:58.917

您**无法**从 Visual Studio 在调试模式下运行自定义 BA。

您可以做的是运行生成的 exe 文件，然后将 Visual Studio 附加到可让您调试它的进程。（在菜单中`Tools > Attach to Process > Find your exe in the list`：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-14T18:26:13.833

正如上面建议的许多其他答案，调试器附加到运行安装程序可执行文件的进程。您需要手动将调试器附加到在临时文件夹下生成的 UI 进程，就像许多以前所做的那样。

为了允许在不提及所有额外代码的情况下自动附加子进程，您可以如上所述：

1.  [安装名为MicrosoftChildProcessDebuggingPowerTool](https://marketplace.visualstudio.com/items?itemName=vsdbgplat.MicrosoftChildProcessDebuggingPowerTool)的 Visual Studio 扩展。
2.  就像 Rob 提到的那样，在调试启动操作中设置可执行文件。
3.  启用本机代码调试（重要）
4.  通过Debug -> Other Debug Targets -> Child Process Debugging Settings -> Enable child process debugging -> Save开启子进程调试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-22T08:46:06.133

唯一真正有效的是：

```
protected override void Run()
{
    Debugger.Launch();
} 
```

在您的引导程序 UI 应用程序（BootstrapperApplication 后代）中。然后从资源管理器中启动构建的 bootstrapper.exe 并在“选择即时调试器”窗口中重用您的 Visual Studio 实例。不要忘记在重新构建之前清理解决方案。这有时会阻止正确调试。

PS：当在找到引导程序 UI 程序集的正确 pdb 时遇到问题时，请选择与引导程序设置相同的架构。混合架构可能会导致调试问题。

干杯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-04T07:47:18.143

将 MessageBox 作为 BA 的第一行。运行 BA，MessageBox 就会出现。在点击 OK 之前，从菜单 DEBUG|Attach to Process，选择您的 BA 和 Attach。然后点击MessageBox的OK。现在你的调试！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-04T15:14:41.357

Rob 的解决方案不起作用。AhmedBM 的方法有效，但它仍然可以进一步简化，以便 VS 运行 WiX 引导程序进程，然后立即附加到子进程。

```
public void Run(EnvDTE80.DTE2 DTE, Microsoft.VisualStudio.Shell.Package package)
{
    //kill old ones if any
    System.Diagnostics.Process.Start(@"c:\Windows\System32\taskkill.exe", "/F /IM Bootstrapper.exe /T");
    System.Threading.Thread.Sleep(1000);
    //start new one
    System.Diagnostics.Process.Start(@"<solution path>\src\Bootstrapper\bin\Debug\Bootstrapper.exe");
    System.Threading.Thread.Sleep(1000);

    foreach (Process proc in DTE.Debugger.LocalProcesses)
    {
        if (proc.Name.ToString().Contains(@".cr\Bootstrapper.exe"))
        {           
                proc.Attach();
                return;  
        }
    }
    System.Windows.MessageBox.Show("Bootstrapper Process was not found.");
} 
```

唯一的问题是您需要 DTE 对象。在早期版本的 VS 中，我们有可以访问的宏。但是在 VS 2017 中我们没有它们。因此，您可以快速制作简单的 VS 扩展并在其中添加运行代码的命令。或者使用已经存在的扩展，其中一些允许自定义命令。

# java - 内存中的 Java/JPA 数据库序列号池

> ID：11001987
> 
> 赞同：0
> 
> 时间：2012-06-12T17:45:39.160
> 
> 标签：java, database, memory, sequence

在内存中实现池化序列号生成器是否有一个好的解决方案？

我知道 Hibernate/JPA 包含一个表生成器 id 类型，但不幸的是，由于遗留原因，我的 web 服务需要能够在实际保存对象之前在内存中分配这些 id。

有推荐的方法吗？我确信可能会发生许多危险的事情，关于事务回滚等等。有没有人有任何建议或资源可以解释处理这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:54:09.030

这很有趣，我以前从未想过。可能有帮助的一件事是使用[AtomicLong](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html)但这并不能解决回滚事务的问题。

也许一个类包装类似的东西并保留一个长值列表来保存可以从第一个检索的回滚键可以工作吗？

另一个问题是您需要从表中获取最大键值（如果您执行类似于我描述的操作）以确保您的应用程序启动时没有重复键。

我不确定这是否有帮助，但这是一个开始的地方。

# .net - 为什么创建一个新线程比让它们闲置更昂贵？

> ID：11001990
> 
> 赞同：2
> 
> 时间：2012-06-12T17:45:49.783
> 
> 标签：.net, multithreading

ThreadPool 保持线程空闲，而不是创建和拆除它们，虽然不是一直都是基于给定时间有多少线程。

即使我不知道线程创建和销毁期间的整个过程，为什么比让线程空闲更昂贵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:48:13.933

好吧，因为简单地说，空闲线程什么都不*做*。它只是在等待工作。创建线程涉及分配内存、负载平衡……各种幕后工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:58:52.297

创建托管线程时会发生很多事情。显然，线程的本地和托管数据结构都被创建了。此外，托管线程提交其整个 1 MB 堆栈空间，并分配额外的每个线程数据结构。简而言之，这是一个非常昂贵的分配。

通过保留线程并重用它们（例如通过线程池），这个成本被摊销了。话虽如此，您仍然不想让过多的线程闲逛，因为即使在空闲时它们也会占用资源。因此，线程池将定期终止空闲线程以回收资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:47:39.537

仅仅因为空闲线程不做任何事情。

创建线程会执行大量工作（分配内存、创建管理线程所需的数据结构等）。所有这些工作都为一个池线程完成一次，而不是每次线程有工作时都执行一次。

# java - 更改背景虚线 JFreeChart

> ID：11001991
> 
> 赞同：1
> 
> 时间：2012-06-12T17:45:57.477
> 
> 标签：java, background, jfreechart

我想让我的图表可打印。我知道 JFreeChart 已经有一个打印配置，但我需要让它可打印（黑白），以便我可以将图像（已经可打印）保存为 PNG 并将其放入报告中。

我尝试将背景更改为白色，但背景中的线条变得不可见（它们已经是白色的）。

我搜索过，但找不到更改颜色的选项。

有人可以给我一些光吗？

编辑：是 XY 图表（最初带有灰色背景和白色虚线）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:57:48.663

我的一个消息来源中有这样的内容：

```
plot.setBackgroundAlpha(0.25)
plot.setDomainMinorGridlinePaint(Color.GRAY)
plot.setDomainGridlinePaint(Color.DARK_GRAY)
plot.setRangeMinorGridlinePaint(Color.GRAY)
plot.setRangeGridlinePaint(Color.DARK_GRAY) 
```

也许它有帮助。

也可以应用一个主题，如：

```
StandardChartTheme.createJFreeTheme().apply(chart) 
```

您可以先应用任何主题，然后修改您想要的所有内容。

# c# - CA2225、IConvertible 和发布构建性能

> ID：11001992
> 
> 赞同：1
> 
> 时间：2012-06-12T17:45:59.067
> 
> 标签：c#, operator-overloading, release, compiler-optimization, iconvertible

我正在创建一个公开显式和隐式转换运算符的对象。代码分析建议我还创建命名方法来匹配（[CA2225：运算符重载已命名替代](http://msdn.microsoft.com/en-us/library/ms182355.aspx)）。另外，我选择实现`IConvertible`，它包含一堆 ToXXX 方法，尽管它需要一个`IFormatProvider`作为参数。

其中大多数是执行相同代码的替代方法，所以我想知道在发布模式下编译时是否会优化/内联我的调用以消除性能问题，这样我就不必重复代码。

例如：

```
public byte ToByte()
{
    // My code that I don't want to copy/paste.
}

public static explicit operator Byte(MyObject obj)
{
    return obj.ToByte();
}

byte IConvertible.ToByte(IFormatProvider provider)
{
    return ToByte(); //I don't care about the provider in this case.
} 
```

# oracle - 使用 Oracle REGEXP_REPLACE 从字符串中删除除第一个之外的所有点

> ID：11001993
> 
> 赞同：2
> 
> 时间：2012-06-12T17:45:59.707
> 
> 标签：oracle, plsql

我想使用 Oracle REGEXP_REPLACE 从字符串中删除一些点。如果存在，我必须从第二个点中删除。例如：

```
4       => 4
5       => 5
5.1     => 5.1
5.1.1   => 5.11
5.1.2   => 5.12
5.1.2.1 => 5.121
5.1.2.2 => 5.122
6       => 6 
```

我有这个

```
select REGEXP_REPLACE(num, '(\d+)(\.)(\d+)(\.)(\d+)', '\1.\3\5')
from my_table; 
```

问题是我的查询只针对两个点。如果字符串有两个以上的点，我必须修改查询以接受更多的点等等。有没有办法自动做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:20:19.020

一个可能的“肮脏”解决方案

```
select REGEXP_REPLACE(num, '(\d+)(\.)(.*)', '\1\2') || 
       REPLACE( REGEXP_REPLACE(num, '(\d+)(.*)', '\2') ,'.','') 
from my_table; 
```

虽然还不清楚，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:29:09.547

```
SELECT SUBSTR(mystr, 1, INSTR(mystr,'.'))
       || REPLACE(SUBSTR(mystr, INSTR(mystr,'.')+1),'.')
FROM my_table; 
```

# c# - 如何找到下一层节点的值？

> ID：11001994
> 
> 赞同：0
> 
> 时间：2012-06-12T17:46:00.330
> 
> 标签：c#, xml

所以我目前在项目级别有一个 XML 节点：

```
 <Item>
        <Item_Number>0000000063089</Item_Number>
        <English_Description>MOUNTAIN DEW</English_Description>
        <French_Description>MOUNTAIN DEW</French_Description>
        <Price>219</Price>
        <Department>000006</Department>
        <Department_Description>BEVERAGES</Department_Description>
        <FHST>11</FHST>
        <HST>18</HST>
        <UPC>0006900005056</UPC>
        <Total_Without_Tax>219</Total_Without_Tax>
        <Total_With_Tax>248</Total_With_Tax>
        <Quantity>1</Quantity>
    </Item> 
```

我如何才能说出 Item_Number 值，仅该节点的值为 0000000063089？在 C# 中。

节点存储如下：

```
 XmlNode node; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:47:50.660

您可以使用`[]`：

```
node["Item_Number"].InnerText == "0000000063089" 
```

或者`SelectSingleNode()`：

```
node.SelectSingleNode("Item_Number").InnerText == "0000000063089" 
```

后者使用命名空间，而前者不使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:50:28.083

```
//Display the contents of the child nodes.
if (node.HasChildNodes)
{
  for (int i=0; i<node.ChildNodes.Count; i++)
  {
    Console.WriteLine(node.ChildNodes[i].InnerText);
  }
} 
```

因此，如果您想要第一项，那么它就是 node.ChildNodes[0].InnerText

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:13:56.410

并不是说您已经得到的答案有什么问题，但您也可以使用 Linq 来做到这一点。就像是：

```
node.ChildNodes
    .OfType<XmlNode>()
    .Where(x => x.Name == "Item_Number")
    .Select(x=>x.InnerText).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T17:48:00.080

您是否查看过 XmlNode 类的文档？[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx)可能有一个属性或方法可以做你想做的事。

# python - 解析目录中的 html 文件并检查它们是否在 Python 中格式错误

> ID：11001996
> 
> 赞同：0
> 
> 时间：2012-06-12T17:46:11.923
> 
> 标签：python, html, beautifulsoup, non-well-formed

我希望编写一个脚本，该脚本将通过一个目录并检查 html 文件是否格式错误。请看我的代码

```
directory = "html"
for root, dirs, files in os.walk(directory):
    for file in files:
        if str(file).endswith('.html'):
              #Help needed here
              if file is badly formed:
                 print "Badly Formed"
              else:
                 print "Well Formed" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:32:01.623

```
import xml.etree.ElementTree as ETree
....

    try:
        self.doc = ETree.parse( file )
        # do stuff with it ...
    except  ETree.ParseError :
        print( "ERROR in {0} : {1}".format( ETree.ParseError.filename, ETree.ParseError.msg ) ) 
```

# wsdl - WSDL 模式导致分段错误

> ID：11001997
> 
> 赞同：0
> 
> 时间：2012-06-12T17:46:15.450
> 
> 标签：wsdl, wso2, wso2esb

我有 Ubuntu 10.04 LTS，它使用 PHP 5.3.2。我正在尝试让 WSO2 为 PHP 2.1.0 工作，并且我确信我已经安装了所有必需的软件包。编译安装成功，我已经多次查看安装说明以确认我没有错过任何步骤。

几乎所有提供的示例脚本都能完美运行。

然而，其中两个示例（使用 WSDL 1.1 的 WSDL 模式客户端和使用 WSDL 2.0 的 WSDL 模式客户端）正在产生分段错误。一旦运行这两个示例中的任何一个，就会出现在我的 Apache2 错误日志中：

```
[Tue Jun 12 07:44:18 2012] [notice] child pid 18246 exit signal Segmentation fault (11) 
```

似乎 WSDL 模式被破坏了。

我的 中有以下指令`php.ini`：

```
extension = "wsf.so"
wsf.home = "/usr/lib/php5/20090626/wsf_c"
wsf.log_path = "/var/log"
wsf.log_level = 4 
```

谁能提供一些关于可能出了什么问题的见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:47:29.337

与 Ubutnu 相比，您能否检查您在 WAMP 上使用的 SSL 版本。我发现这个问题可能是一个线索： [https ://wso2.org/jira/browse/WSFPHP-467](https://wso2.org/jira/browse/WSFPHP-467)