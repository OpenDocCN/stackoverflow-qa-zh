# StackOverflow 问答 10713000-10713999

# arrays - 构建张量而不是可变大小的数组

> ID：10713001
> 
> 赞同：1
> 
> 时间：2012-05-23T03:19:26.863
> 
> 标签：arrays, r, matrix, rubiks-cube

所以这里是瘦的：

1.  想象一个魔方；它是 3x3x3。我碰巧有一个数组，它是一个魔方的“立方体”，只是它是 4x4xn。n 从 1 开始

2.  当数组中每个 4x4 矩阵中的某个条件为真时，矩阵就会自我复制；即 n 增长 1（数组或魔方变长/变成长方体）。假设对于数组中的每个 4x4 矩阵，如果 [2,4] > [2,1]，则矩阵在数组中复制其自身的另一个版本。

3.  当数组中每个 4x4 矩阵中的相同特定条件为假时，矩阵本身就会“死亡”或将其自身抹去不复存在。数组或魔方变得更短。比方说，对于数组中的每个 4x4 矩阵，如果 [2,4] < [2,1]，则矩阵会将自身从数组中擦除。

4.  所以我试图将它构建成一个数组，显然你不能随意从数组中添加和删除矩阵。

5.  有人告诉我你必须建立一个张量——（从我的概念模型到维基百科所说的，看起来这是一个二阶应力张量）。我不是物理学家，也绝对不是数学纯粹主义者。我是一个基础应用数学专家（ORSA），但我没有任何学位，只有几年的“分析”经验。

6.  是否有人可以为我演示如何在 R 中构建这个结构。我希望你明白，找到关于如何在 R 中构建我认为我正在写的类型的张量的可理解/概念性信息非常困难.

非常感谢您提供的任何帮助。

我非常感谢它。

所以这是我尝试过的一些方法：

```
cells<-c(0,.4,0,0,.25,.6,.25,.5,4,12,4,10,20,0,0,0)
Mu<-matrix(cells, 4,4, byrow=TRUE)
Ma<-list(Mu)
for(i in Ma){
    if(i[2,4] > i[2,1]){
       j <-length(Ma) + 1
       c[Ma, j<-Mu]
    }else if(i[2,4] < i[2,1]){
        Ma[[i]] <- NULL
        }
    }
} 
```

这行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:24:31.887

由于您需要能够从数组中添加或删除 4*4 矩阵，因此使用 4*4 矩阵列表而不是数组可能更容易。

```
# Initial data
d <- replicate(3, matrix(sample(1:16),4,4), simplify=FALSE)
# Remove an element
remove <- function(d, i) {
  d[[i]] <- NULL
  d
}
# Duplicate an element
duplicate <- function(d, i) {
  d <- append(d, list(d[[i]]))
  d
}
# Example
d <- remove(d, 1)
d <- duplicate(d, 2)
d <- remove(d, 1)
d 
```

如果性能是一个问题（列表被一次又一次地复制），您可能更喜欢使用环境。

```
# Sample data
d <- replicate(3, matrix(sample(1:16),4,4), simplify=FALSE)
names(d) <- as.character(seq_along(d))
e <- as.environment(d)
# Remove an element
remove <- function(e, i) {
  rm(list=as.character(i), envir=e)
  e
}
# Duplicate an element
duplicate <- function(e, i) {
  stopifnot( length(ls(e)) > 0 )
  j <- max( as.numeric(ls(e)) ) + 1
  assign( as.character(j), get( as.character(i), envir=e ), envir=e )
  e
}
# Example (the elements are named, and their names do not change)
remove(e, 1)
duplicate(e, 3)
remove(e, 2)
as.list(e) 
```

根据您的复制和删除条件，这将变为：

```
# Sample data
d <- replicate(3, matrix(sample(1:16),4,4), simplify=FALSE)
names(d) <- as.character(seq_along(d))
e <- as.environment(d)
# Main loop
for(i in ls(e)) {      # i is the name of the matrix
  m <- get(i, envir=e) # The matrix itself
  if(m[2,4] > m[2,1]) {
    cat("Duplicating", i, "\n")
    duplicate(e, i)
  } else {
    cat("Removing", i, "\n")
    remove(e, i)
  }
}
as.list(e) 
```

# python - 查找二维数组Python的长度

> ID：10713004
> 
> 赞同：91
> 
> 时间：2012-05-23T03:19:40.683
> 
> 标签：python, arrays

如何找到二维数组中有多少行和列？

例如，

```
Input = ([[1, 2], [3, 4], [5, 6]])` 
```

应显示为 3 行 2 列。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-05-23T03:21:34.520

像这样：

```
numrows = len(input)    # 3 rows in your example
numcols = len(input[0]) # 2 columns in your example 
```

假设所有子列表都具有相同的长度（也就是说，它不是锯齿状数组）。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-23T03:24:28.933

您可以使用`numpy.shape`.

```
import numpy as np
x = np.array([[1, 2],[3, 4],[5, 6]]) 
```

结果：

```
>>> x
array([[1, 2],
       [3, 4],
       [5, 6]])
>>> np.shape(x)
(3, 2) 
```

元组中的第一个值是 number rows = 3; 元组中的第二个值是列数 = 2。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-10-25T13:03:42.920

此外，计算总项目数的正确方法是：

```
sum(len(x) for x in input) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-23T03:26:07.063

假设输入[行][列]，

```
 rows = len(input)
    cols = map(len, input)  #list of column lengths 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-17T04:23:32.747

您也可以使用 np.size(a,1), 1 这里是轴，这将为您提供列数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-21T23:03:39.393

假设`input[row][col]`

```
rows = len(input)
cols = len(list(zip(*input))) 
```

# javascript - 保留参数的功能

> ID：10713009
> 
> 赞同：1
> 
> 时间：2012-05-23T03:20:27.220
> 
> 标签：javascript, javascript-events

在下面的代码片段中，调用函数为什么以及如何形成一个全新的执行上下文，其中 i 的值被保留？

```
function getHandler(n) {
    return function() {
        alert( 'You clicked on: ' + n );
    };
}

for (var i = 0; i < 100; ++i) {
    myElements[i].onclick = getHandler(i);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:38:59.283

它是由 JavaScript 闭包和 JavaScript 中 for 循环中声明的变量的行为引起的。因为参数`n`是`addHandler`'s 闭包的一部分，所以 n 为在其内部声明的函数实例维护它的值。碰巧的是，您从全局空间中的 for 循环中传入 i 。

[这是一个显示该行为的小提琴](http://jsfiddle.net/PtTfS/)。

如果你要做一些事情来增加`n`内部`addHandler`，你会发现它实际上并没有影响`i`。再一次，这是因为闭包，`n`存在于`addHandler`' 闭包内并且仅由`i`.

[*这是一个显示该*行为的小提琴](http://jsfiddle.net/PtTfS/2/)。

由于闭包，无论在其中创建的任何内容（在这种情况下为一些函数引用）都`n`将存在多久。`addHandler`

我希望这是有道理的。我认为这很难解释。

编辑：[这是对 JavaScript 闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)及其工作原理的精彩解释。

# ruby-on-rails - 如果您的 ruby on rails 脚本中有超过 1 个错误，它如何知道显示的是哪一个？

> ID：10713011
> 
> 赞同：1
> 
> 时间：2012-05-23T03:20:58.343
> 
> 标签：ruby-on-rails

我经常写一些代码，然后得到一个错误，改变它，然后看到一个不同的错误。这是否意味着第一个错误已修复，并且由于我刚刚更改的内容而我只有一个新错误？或者只是这个新错误比第一个更“紧迫”？我怎样才能知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:34:35.763

可能两者兼而有之。大多数情况下，当您修复第一个错误时，您应该只会看到随后出现的错误的通知。但是，如果您的修复不正确或与之前的代码片段混淆，您可能会突然导致错误。

这就是为什么像测试这样的技术很重要的原因。如果发生此类逻辑错误，您的测试套件可以解决问题。

# android - apk 文件名更改

> ID：10713012
> 
> 赞同：2
> 
> 时间：2012-05-23T03:21:05.677
> 
> 标签：android, eclipse, apk

运行 MacOSX。更新到最新的 Android SDK 和 ADT。使用 Eclipse 为我的项目部署 apk 文件。不知何故，当设备尝试启动关联的 apk 文件时，它会将 -1 附加到 /data/app 路径。我怀疑问题出在 Eclipse 中，因为即使在第一次加载全新的 AVD 时也会发生这种情况。我查看了此板上的其他解决方案，包括：取消选中跳过包装以及清理和重建。还尝试在设备上恢复出厂设置，以防万一挂断。另外我想我会是一只聪明的猴子，改变我的项目名称并添加 -1; 没那么聪明。然后Android去寻找-2版本的apk。关于如何解决问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:23:01.210

这可能是您的 Intent 的问题。

检查您是否在 AndroidManifest.xml 中添加了 Activity。

当你想创建新的活动时，你应该在你的 AndroidManifest.xml 中注册它。

# c++ - 用 C++ 编程的 DAW 用什么来进行图形渲染和音频输出？

> ID：10713015
> 
> 赞同：2
> 
> 时间：2012-05-23T03:21:23.647
> 
> 标签：c++, audio, graphics, render

标题说明了一切——用 C++ 编写的数字音频工作站（如 Ableton）使用什么库或代码或任何东西来渲染其图形和播放音频？

在发现 C# + XNA 对基于计算机的 daws 来说是一个糟糕的选择之后——我开发了节拍器之后几乎没有正确地“击中”它，当我修复它时，它会失控——我决定现在我要切换对于 C++，由于 C++ 是中级语言，而 C# 是高级语言；也因为跨平台兼容性。

经过几次（使用极其不同的术语）谷歌搜索后，我无法找到关于这个主题的数据。谁能给我帮助我开始编写 DAW 的信息？

如果您想知道，我正在编写 DAW 主要是因为我需要一个 DAW，而且我喜欢拥有一个我可以自定义、更改做什么等的想法；也为了好玩。我倾向于编写像这样的真正高级和高级项目以获得乐趣，尽管我几乎没有完成任何......;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:44:36.047

首先，完全有可能编写稳定的节拍器并正确处理任何语言的计时。例如，大量基于 Web 的基本 DAW 是用 Java 和 Flash 编写的。今天的 Google (moog) 涂鸦在 HTML5/Javascript 中运行（如果你有 chrome）。高级语言倾向于让您对垃圾收集等事情的控制较少，这通常意味着您无法实现低延迟，但除非您做错了什么，否则时间永远不会成为问题。

现在，回答这个问题：

大多数专业的商业 DAW 使用自己的库直接与系统提供的 API 交互。对于音频，在 linux 上，这意味着 OSS 或 Alsa；Mac OS X：核心音频；Windows 有很多音频 API，因为它们讨厌你。一些公司，比如 Avid，有他们的 API，因为他们也讨厌你，但他们的硬件与标准 API 兼容，因为他们并不真的讨厌你。

对于图形：使用您的系统支持的任何图形库。对于可移植性，Qt 和 OpenGL 是不错的选择。我确定还有其他人。实际上并没有任何标准库来显示波形或任何东西——你自己做。正确有效地做到这一点并不容易，但这也不是火箭科学。就显示而言，您还可以选择使用高级语言而不会遇到麻烦。

也可以考虑使用[http://www.openframeworks.cc/](http://www.openframeworks.cc/)和[http://libcinder.org/](http://libcinder.org/)

对于音频，您可以使用非常流行的 PortAudio 库：[http ://www.portaudio.com/](http://www.portaudio.com/)

PortAudio 可以在多种平台上运行，使用 C 语言编写，具有良好的社区支持，并且比任何一种现有 API 都更易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:24:34.527

确保您还查看了[Juce](http://www.rawmaterialsoftware.com/juce.php)、[RTAudio](http://www.music.mcgill.ca/~gary/rtaudio/)和[STK](https://ccrma.stanford.edu/software/stk/)。为了回答您的问题，许多商业插件和 DAW 编写者都使用 Juce，而 Ableton 使用他们自己的一组库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:46:32.387

用于快速更新视图的 Qt 与 OpenGL（通过 QGLWidget）适用于我的 DAW 应用程序......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T23:29:13.780

[Ardor](http://ardour.org/)使用 GTK+ 作为 GUI，使用[插孔](http://jackaudio.org/)作为音频。

# php - 从另一个文件访问 PHP 类

> ID：10713019
> 
> 赞同：0
> 
> 时间：2012-05-23T03:21:59.137
> 
> 标签：php, ajax

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>The Ultimate War Game</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="_assets//js/ajax.js" type="text/javascript"></script>
</head>

<body>

<?php
include("/_assets/inc/war.php");
include("/_assets/inc/player.php");

    $war = new War();
    $deck_one = $war->getPlayerOneDeck();
    $deck_two = $war->getPlayerTwoDeck();

    $player_one = new Player($deck_one);
    $player_two = new Player($deck_two);

    ?>

<a id="next-card" href="javascript:void(0)">Next Play</a>

<div class="table">

    <div class="hands">

    </div>

</div>
</body>
</html> 
```

我有两个课程（不需要代码）。从提供的代码中，我创建了一个战争类、玩家一类和玩家二。简而言之，它的作用是向两名玩家发牌并创建班级。

我的问题是我正在尝试在下面创建一个名为 Next Play 的 ajax 函数。单击后，我可以打开另一个 PHP 文件，但无法访问 $war、$player_one 或 $player_two。

另一个问题是，如果我将 PHP 代码放在 ajax 调用中，那么每次单击“Next Play”时它都会重新创建这些对象。

最终目标是我尝试创建这些对象，然后通过 ajax 或任何其他建议的方法访问这些对象的属性，而无需重新创建对象。我希望这不会令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:27:01.653

当 PHP 脚本结束时，它的状态被丢弃。正如您所说的那样，每次再次运行此脚本时，状态都会从头开始重新建立。这些值不会跨请求自动保留。要持久化数据，请将其放入[会话](http://www.php.net/manual/en/book.session.php)或其他永久存储（如数据库）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:42:00.627

根据我的假设乍得，您的数据结构在您的游戏中不是永久的。
你说你把你的代码放在一个ajax调用中。
试着想一想 ajax 调用的本质，你调用了一个 ajax 函数（比如说'next play'），
然后该函数调用它之外的某个页面。
该机制就像你以普通方式浏览网页一样，
每次调用时都会请求一些对象，因此对于你当前的数据结构来说并不是那么持久。

如果您想存储播放状态，只需尝试将数据存储
在相当持久的地方，例如 cookie 或 DB。或者你可以将一些机制/算法移动到 JavScript 中，
比如在 JS 变量中保持战争或卡组状态。即使在 ajax 调用后添加回调函数来保持您的状态也会有所帮助。
这样，您不必将数据存储在 DB 或 cookie 中。

希望这有帮助。:)

# three.js - THREE.PlaneGeometry 没有被渲染

> ID：10713021
> 
> 赞同：3
> 
> 时间：2012-05-23T03:22:19.740
> 
> 标签：three.js

我试过玩 aerotwist 的教程。一切都很顺利，直到我弄乱了 THREE.PlaneGeometry，如下代码：

```
var $container = $('#container');
var WIDTH = $container.width(), HEIGHT = $container.height();
var VIEW_ANGLE = 45, ASPECT = WIDTH / HEIGHT, NEAR = 0.1, FAR = 10000;

var renderer = new THREE.WebGLRenderer();
var camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);
var scene = new THREE.Scene();
camera.position.z = 300;
renderer.setSize(WIDTH, HEIGHT);
$container.append(renderer.domElement);

// create the mesh's material
var meshMaterial = new THREE.MeshBasicMaterial({color:0xCC0000});
var mesh = new THREE.Mesh(new THREE.CubeGeometry(100,100,1,1),meshMaterial);

// add the mesh to the scene
scene.add(mesh);
scene.add(camera);
renderer.render(scene, camera); 
```

当我从

```
var mesh = new THREE.Mesh(new THREE.CubeGeometry(100,100,1,1),meshMaterial); 
```

到

```
var mesh = new THREE.Mesh(new THREE.PlaneGeometry(100,100,1,1),meshMaterial); 
```

或者

```
var mesh = new THREE.Mesh(new THREE.PlaneGeometry(100,100),meshMaterial); 
```

然后什么都没有渲染。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:47:39.967

它可能不是双面的，或者您在当前角度看不到它，请检查[平面旋转的这个 js 小提琴](http://jsfiddle.net/NycWc/21/)并玩弄那个以进行练习。

**编辑：**

看起来飞机朝下，所以相机看不到它，我更改了`mesh.rotation.x`它以证明它确实可以渲染。

请参阅 -[更新示例](http://jsfiddle.net/NycWc/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T21:20:28.203

尼尔的回答是我首先要尝试的；也可能是您的比例（至少在一个轴上）设置为 0 或 NaN。

# iphone - stringFromDate 总是 NIL

> ID：10713024
> 
> 赞同：2
> 
> 时间：2012-05-23T03:22:25.207
> 
> 标签：iphone, objective-c, ios, ipad, nsdate

我知道这是一个重复的问题，但是在 stackoverflow 和 google 上搜索了许多类似的问题之后，没有一个解决方案对我有用。

我正在尝试将从数据库接收到的日期转换为字符串格式以显示在 iPhone 应用程序中。

我正在以下列方式将日期转换为字符串，但`[dateFormat stringFromDate:beginDate]`总是返回 nil。

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MMM dd hh:mm a"];
NSString *dateString = [dateFormat stringFromDate:beginDate];
NSLog(@"date: %@", dateString);
[dateFormat release]; 
```

服务器收到的 NSDate 格式如下：

```
2012-05-23 13:06:51.394+1000 
```

我希望它

```
May 25 13:06 PM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T03:50:28.813

beginDate 的类型是什么？如果是NSString，则先转换为NSDate，使用`dateFromString`NSDateFormatter的方法。

```
NSString *beginDate = @"2012-05-23 13:06:51.394+1000";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

// Set the format of the dateFormatter to the date format of the server
dateFormatter.dateFormat = @"yyyy-MM-dd HH:MM:ss.SSSZ";
// Convert the NSString to NSDate
NSDate* date = [dateFormatter dateFromString: beginDate];

// Set the format of dateFormatter to your own format
dateFormatter.dateFormat = @"MMM dd hh:mm a";
// Convert NSDate to your own format of date
beginDate = [dateFormatter stringFromDate: date]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T04:15:26.137

您需要先将 beginDate 字符串转换为实际的 NSDate，然后执行此操作：

```
NSString *beginDateString  = [arr_data objectAtIndex:1];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss.SSSZ"];
NSDate *beginDate = [formatter dateFromString:beginDateString];

[formatter setDateFormat:@"MMM dd hh:mm a"];
NSString *dateString = [formatter stringFromDate:beginDate];
NSLog(@"date: %@", dateString); 
```

请注意，您在问题中说您希望它输出`May 25 13:06 PM`，但它实际上会输出`May 25 01:06 PM`。（13:06 将使用 24 小时制而不是 12 小时制，并且不需要上午/下午。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T03:35:41.207

上面的代码没有错，它适用于当前日期。只需更换

```
NSString *dateString = [dateFormat stringFromDate:beginDate]; 
```

经过

```
NSString *dateString = [dateFormat stringFromDate:[NSDate date]]; 
```

并将工作。

看来你的`beginDate`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T07:00:24.943

可能是您的 beginDate 格式类似于“2013-09-29 14:57:48.0”，但 dataFormate 是

```
[dFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"] 
```

更改为“yyyy-MM-dd HH:mm:ss.0”就可以了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T21:19:35.827

您需要先打电话`setDateFormat`再打电话`stringFromDate`

```
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"HH:mm dd/MM/yyyy"];
NSString * dateString =[dateFormatter stringFromDate:someDate]; 
```

# javascript - Facebook 是否可以获取用户数据并在 iframe 中填充表单？

> ID：10713026
> 
> 赞同：7
> 
> 时间：2012-05-23T03:22:54.503
> 
> 标签：javascript, jquery, facebook, iframe, facebook-iframe

我正在尝试为 Facebook 页面创建 iframe 选项卡。

在此页面上，我正在加载一个 iframe，该 iframe 由来自另一个域/站点的表单组成。

是否可以使用 javascript 来查询图形 api 以使用 javascript 将用户的数据加载到这个 iframe 加载的表单中，这样看起来是预先填充给用户的？

我知道存在跨域安全问题。在这种情况下，假设我的 iframe 选项卡现在托管在与 iframe 加载的表单相同的域上，这现在可行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:38:04.340

没错，出于安全原因（同源策略），浏览器会阻止您想要的内容。

你可以做什么：

1.  在 iframe 中重新加载表单并将您从 js sdk 获得的数据传递给它，您甚至可以将数据发布到 iframe（就像 facebook 对画布应用程序所做的那样）。

2.  您应该能够更改 iframe 的位置，但只是哈希部分（片段），这不会导致 iframe 重新加载。
    在 iframe 中注意位置变化并从片段中提取数据。
    问题是这种方法可能会弄乱浏览器历史记录。

3.  寻找另一种跨域通信的解决方案，也许[是 easyXDM](http://easyxdm.net/wp/)？

* * *

# 编辑

这是第一个选项的两个实现：

1) 使用 GET

```
<iframe id="userform"></iframe>

<script type="text/javascript">
    // load and init FB JS SDK

    FB.api("me", function(response) {
        document.getElementById("userform").src = USER_FORM_URL + "?name=" + response.name;
    });
</script> 
```

2) 使用 POST 进入 iframe

```
<form method="POST" action="USER_FORM_URL" target="userform" id="postForm">
    <input type="hidden" name="fbResponse" id="fbResponseInput" />
</form>

<iframe name="userform"></iframe> 
```

然后，在 iframe 本身上，获取数据（从 GET 或 POST）并相应地呈现用户表单。

```
<script type="text/javascript">
    // load and init FB JS SDK

    FB.api("me", function(response) {
        document.getElementById("fbResponseInput").value = JSON.stringify(response);
        document.getElementById("postForm").submit();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T03:32:19.943

```
var ifrm = document.getElementById('myIframe');
ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument; 
```

现在你有了 iframe，只需使用

```
ifrm.getElementById('textBoxId').value = 'value-fetched-from-facebook'; 
```

通过以下方式从 FB 获取数据

```
FB.api('me?fields=firstName&lastName', function(res)
{
//response contains your user info.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:37:47.613

您的标签页必须调用 GraphAPI。

将用户数据返回到 JavaScript 线程后，您有 2 个选项：

1）您始终可以使用查询字符串将数据传递给您的 IFRAME。只有在这一刻，您才生成具有正确 url 的 iframe，其中包含查询字符串中的数据。

2) 您可以调用位于您的内部 IFRAME 页面中的 javascript 函数。此函数将从 Facebook 图形 api 响应接收对象，并将直接填充页面。

检查这篇文章。

[从父页面调用 iframe 中的 JavaScript 代码](https://stackoverflow.com/questions/251420/invoking-javascript-in-iframe-from-parent-page)

# ruby-on-rails - 在 Rails 3 中批量分配嵌套模型

> ID：10713027
> 
> 赞同：1
> 
> 时间：2012-05-23T03:23:24.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我有一个名为锦标赛的模型：

```
class Tournament < ActiveRecord::Base
  belongs_to :venue
  belongs_to :tier                                                                               
  has_and_belongs_to_many :tournament_directors, :class_name => "User"  

  ...
end 
```

我想要一个编辑锦标赛视图，用户可以通过在文本字段中输入用户名并单击使用 javascript 的添加按钮来将锦标赛总监添加到锦标赛中。我还希望删除将使用 javascript 删除用户的链接。

我观看[了嵌套模型表单的 RailsCast，](http://railscasts.com/episodes/197-nested-model-form-part-2)但在视频中他们实际上是在创建和销毁嵌套模型（在这种情况下是用户）。如何使用 Rails 通过表单元素处理分配给锦标赛的用户，而不创建和销毁用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:45:04.087

看看 Ryans 最近的截屏视频之一：

[http://railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)

它应该是您所追求的完美示例。

# javascript - 在 for 循环中使用现有变量

> ID：10713032
> 
> 赞同：8
> 
> 时间：2012-05-23T03:23:57.023
> 
> 标签：javascript, loops, for-loop

是否可以从 for 循环中省略变量赋值并执行类似的操作……？

```
otherVar = 3;

for ( otherVar > 0; otherVar-- )
{
    stuff
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T03:26:22.307

是的，但您需要输入分号：

```
var otherVar = 3;

for ( ; otherVar > 0; otherVar-- ) {
    doStuff();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:26:15.440

通常 While 在这种情况下更受欢迎（更好的可读性）..

```
otherVar = 3;

while ( otherVar > 0)
{
   stuff
   otherVar--;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:27:18.593

您可以从任意数字开始倒计时：

```
var counter = 3;
while ( counter-- ) {
  console.log( counter );
} 
```

输出：2、1、0

# eclipse - 请升级您的 Subversion 客户端.... 如何？

> ID：10713038
> 
> 赞同：7
> 
> 时间：2012-05-23T03:24:49.737
> 
> 标签：eclipse, svn, subclipse

我今天打开了我的 Eclipse，之前有一个完美工作的 Subclipse，它决定自发地破坏自己。

```
svn: E155021: The path 'xxx' appears to be part of a Subversion 1.7 or greater working copy.  Please upgrade your Subversion client to use this working copy. 
```

我尝试在 eclipse 中完全卸载我的所有 subclipse 包，然后重新安装它们，但它没有修复它。这是我使用的安装链接：

Subclipse 1.8.x 更新站点 - [http://subclipse.tigris.org/update_1.8.x](http://subclipse.tigris.org/update_1.8.x)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T04:07:16.207

我断开了我的项目与 repo 的连接并删除了我所有的 svn 元数据，然后重新连接它并且它工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T02:28:18.437

当我从版本控制下的现有项目复制到版本控制下的另一个项目时，有时会发生这种情况。您可以尝试“刷新/清理”，或者当您从一个项目复制到另一个项目时，转到“导航器”，然后删除任何 svn 元数据。此数据通常位于 .svn 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T08:44:46.203

当我尝试将先前断开的项目连接到现有的 svn 路径时，我遇到了同样的问题。

我靠近它，发现我试图在 svn 项目的子目录中连接项目。只需指向实际的 svn 路径即可解决问题！

# objective-c - 如何从应用代理调用 Facebook

> ID：10713040
> 
> 赞同：1
> 
> 时间：2012-05-23T03:24:59.807
> 
> 标签：objective-c, ios, xcode

在过去的 5 个小时里，我一直在苦苦挣扎，试图在我的应用程序中实现 Facebook，这是一个彻头彻尾的痛苦。我现在在 Facebook 网站的基础上一步一步来。我已经实现了他们所说的一切，但我对如何从另一个视图控制器调用 Facebook 感到困惑（例如，打开登录屏幕，然后让用户在墙上发布一些东西）。

我就是这样做的。如果有人可以请花时间解释我将永远欠你的债，我正在失去理智。谢谢

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    facebook = [[Facebook alloc] initWithAppId:@"XXXXXXXXXX" andDelegate:fbControl];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }

}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {

    return [facebook handleOpenURL:url];
}

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    [facebook dialog:@"feed" andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:37:20.737

您所做的只是启用与 Facebook 应用程序的交互，其中没有实际使您的应用程序交互的代码。例如，我在我的一个应用程序中有这个：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   FACEBOOK_APP_ID, @"app_id",
                                   self.newsItem.link, @"link",
                                   self.newsItem.imageURL, @"picture",
                                   self.newsItem.title, @"caption",
                                   contentString, @"description",
                                   nil];

AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

[appDelegate.facebook dialog:@"feed" andParams:params andDelegate:(id)self]; 
```

这显示了一个对话框，允许用户在他们的墙上张贴一些东西。您需要调用什么方法取决于您要执行的操作，但`dialog:andParams:andDelegate`用于显示“发布到新闻源”对话框。

# sql - 是否可以根据 SQL 选择语句中的查询生成列？

> ID：10713043
> 
> 赞同：2
> 
> 时间：2012-05-23T03:25:33.833
> 
> 标签：sql, sql-server-2008, select

我正在尝试为我的应用程序生成一个安全矩阵作为报告。

看着这个问题，这几乎正是我想要的。

[SQL Server：透视字符串数据的示例](https://stackoverflow.com/questions/24470/sql-server-pivot-examples)

我改变了解决方案

```
SELECT Action,
   MAX( CASE data WHEN 'View' THEN data ELSE '' END ) ViewCol, 
   MAX( CASE data WHEN 'Edit' THEN data ELSE '' END ) EditCol
FROM t
GROUP BY Action 
```

适应我的解决方案。

```
SELECT RefRoleId ,
       MAX( CASE Permission WHEN 'AdministerErrors' THEN 'X' ELSE '' END ) 'Administer Errors'
 FROM RolePermission
 GROUP BY RefRoleId 
```

我可以看到的问题是我需要确切地知道我拥有哪些权限并将它们作为列硬编码到查询中。我需要一个新的

MAX( CASE 权限 WHEN 'AdministerErrors' THEN 'X' ELSE '' END ) 'Administer Errors'

对于每一个权限。

有没有办法让我通过查询将我想要显示的列添加到 SQL 查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:57:50.557

是的，您可以根据表中的数据动态构建您的数据透视表，自动添加所需数量的列。分步说明：[http ://www.simple-talk.com/community/blogs/andras/archive/2007/09/14/37265.aspx](http://www.simple-talk.com/community/blogs/andras/archive/2007/09/14/37265.aspx)

这篇文章没有提到 SQL Server 2008，但它也适用于该版本。

# asp.net - Aspx.cs 不能识别在 aspx 中声明的控件？

> ID：10713044
> 
> 赞同：1
> 
> 时间：2012-05-23T03:25:48.840
> 
> 标签：asp.net

我创建了一个新的 Web 项目分支：文件 -> 新建 -> 项目 -> ASP.NET Web 应用程序

然后我尝试添加一个简单的控件 asp:Label 但 aspx.cs 由于某些原因无法识别此声明。我没有对默认项目进行任何更改。它包含 6 页：

![在此处输入图像描述](../Images/fc5fa47d58047158e5507016f8359e2b.png)

有谁知道什么可能导致这个问题？谢谢。

**编辑**
这里我添加到文件`About.aspx`中的是带有 id = 的标签`id1`

```
<%@ Page Title="About Us" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="About.aspx.cs" Inherits="WebApplication2.About" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:label ID="id1" runat="server" >A Label</asp:label>
    <h2>
        About
    </h2>
    <p>
        Put content here.
    </p>
</asp:Content> 
```

我在没有调用该变量的情况下运行了项目`id1`，一切正常。

![在此处输入图像描述](../Images/182ea1f6c0649222e6762c5262225228.png)

`id1`但是如果我在inside 调用`About.aspx.cs`，它给了我错误，说找不到变量。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication2 {
    public partial class About : System.Web.UI.Page {
        protected void Page_Load(object sender, EventArgs e) {
            id1.Text = "What the heck?";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T05:17:56.897

根据您的评论，您的`About.aspx.designer.cs`文件似乎缺少标签定义。删除您的`About.aspx.designer.cs`文件并重新生成它，右键单击项目 ( `WebApplication2`) 并选择“ `Convert To Web Application`”，这将重新生成您的`About.aspx.designer.cs`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:31:54.213

尝试清理您的解决方案并重建它，最好是这个问题是因为 .aspx 文件中的错误继承属性

# asp.net - 当我只想获取 ASP.NET Response.Cookie 时正在设置

> ID：10713048
> 
> 赞同：1
> 
> 时间：2012-05-23T03:26:14.837
> 
> 标签：asp.net, cookies

我有一个页面检查设置的 cookie 的值，`HttpResponse`并且根据某些标准，该页面可能会修改该值。逻辑基本上是：

```
If Response.Cookie("foo").Value = "bar" Then
    Response.Cookie("foo").Value += "rawr"
End If 
```

显然，任何从 cookie 中取出的尝试都会`Response.Cookie`导致该 cookie 被设置在响应中。在下面的代码中，*即使没有设置或添加到* `Response.Cookie` *集合*中......

```
Dim c As HttpCookie = Response.Cookies("rawr")
Response.Cookies.Get("foo") 
```

...响应仍然包含...

```
Set-Cookie: rawr=; path=/
Set-Cookie: foo=; path=/ 
```

所以这对我的原始代码片段意味着如果 cookie 值不等于`foo`，则 cookie 将被清空（因为将 cookie 放入`If`集合中，它是空白的，并且条件永远不会将它设置为`+="bar"`.

**检查和修改** `Response.Cookie` **集合中的 cookie 而不无意将它们设置为空白的正确方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T20:37:58.363

我认为您的意思是检查 Request.Cookies("foo")，而不是 Response.Cookies.("foo")。

如果你真的是认真写的，你可以在变量中保存更早的逻辑值，这些值将决定最终的输出 cookie 设置。

# php - 会话和 cookie 安全性和开销

> ID：10713059
> 
> 赞同：0
> 
> 时间：2012-05-23T03:27:29.683
> 
> 标签：php

我有一个登录系统，用户可以在其中检查“记住我”选项。当用户选中该选项时，我将 session_id 存储到 cookie 中，并将他的 session_id、ip、浏览器信息等写入数据库会话表。因此，当用户回来时，我根据存储在会话表中的 session_id/ip/browser/etc 确保 cookie 没有被伪造。

现在看来，这可能是很多开销和数据库写入。有没有更好、更安全的方法来做到这一点而无需太多开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:28:16.523

这是一个权衡：当数据没有存储在数据库中时，它最终会访问 PHP 存储会话数据的服务器的本地文件系统。换一种说法：什么是慢？一个随机访问数据库命中还是一个随机访问磁盘命中？

我发现将会话存储到数据库是一种更优雅的解决方案，因为它比基于文件系统内容的猜测更容易跟踪用户及其会话。它还允许您在任何时候手动注销用户或模拟登录会话（一次密码重置）。

如果您使用 MySQL，请将您正在使用的“会话”表的引擎设置为 MEMORY，您将始终拥有极快的查找速度，而不会影响用户体验。

# javascript - 函数计算两次折扣

> ID：10713062
> 
> 赞同：0
> 
> 时间：2012-05-23T03:27:38.687
> 
> 标签：javascript

对于我的生活，我似乎无法弄清楚为什么这个函数不能正确计算。如果我运行这个函数，折扣 ( `totalPrice`) 会应用两次，例如：`20*1.05 == 21`，但是当函数运行时它给了我`22.05`.

我究竟做错了什么？谢谢您的帮助。

```
<script type="text/javascript">
    function codeDiscount() {
        var totalCost = document.getElementById('total').value;
        var custCode = document.getElementById('coupon').value; 

        if (custCode == "ABCD" || custCode == "EFGH")
        {
            totalCost = document.getElementById('total').value; 
            var totalPrice = parseInt(totalCost) * 1.05;
            document.getElementById('total').value = totalPrice;
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:34:08.513

我怀疑问题不在此代码块中。有什么会导致 codeDiscount() 被第二次调用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:01:44.753

如果您的总字段在每次发生变化时都会更新，最好采用以下方法：

将总值存储在一个单独的变量中：

```
var cartTotal = 0; 
```

然后，每当项目总和发生变化时，您都会对其进行更新：

```
// calculate sum of all products
cartTotal = 0;
for (var i in all_products) {
    cartTotal += all_procucts[i].price;
}
// calculate discount
codeDiscount(); 
```

要重新计算折扣，您使用`cartTotal`但您只更新该字段

```
var totalPrice = cartTotal;

if (custCode == 'ABCD') {
    totalPrice *= 1.05;
}

document.getElementById('total').value = totalPrice; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:33:56.700

我怀疑你的代码有问题：

```
 <script type="text/javascript">
    function codeDiscount() {
        var totalCost = document.getElementById('total').value;
        var custCode = document.getElementById('coupon').value; 

        if (custCode == "ABCD" || custCode == "EFGH")
        {
            var totalPrice = parseInt(totalCost) * 1.05;
            document.getElementById('total').value = totalPrice;
        }
    }
</script> 
```

另外，请确保不要两次调用相同的函数。否则，结果将不正确。

# c# - 如何使用 Roslyn 执行反射操作

> ID：10713063
> 
> 赞同：4
> 
> 时间：2012-05-23T03:28:06.080
> 
> 标签：c#, reflection, system.reflection, roslyn

我想使用 Roslyn 对以下类执行反射样式操作：

```
public abstract class MyBaseClass
{
    public bool Method1()
    {
        return true;
    }
    public bool Method2()
    {
        return true;
    }
    public void Method3()
    {
    }
} 
```

基本上我想这样做，但与罗斯林：

```
BindingFlags flags = BindingFlags.Public | 
                     BindingFlags.Instance;
MethodInfo[] mBaseClassMethods = typeof(MyBaseClass).GetMethods(flags);
foreach (MethodInfo mi in mBaseClassMethods)
{
    if (mi.GetParameters().Length == 0 && mi.ReturnType == typeof(void))
    {
        methodInfos.Add(mi);
    }
    if (mi.GetParameters().Length == 0 && mi.ReturnType == typeof(bool))
    {
        methodInfos.Add(mi);
    }
} 
```

本质上，我想获得一个满足我在上面反射示例中使用的标准的方法列表。此外，如果有人知道一个解释如何使用 Roslyn 进行类似反射的操作的网站，请随时向我指出那个方向。我一直在寻找几个小时，似乎无法在这方面取得进展。

提前致谢，

鲍勃

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:15:28.353

得到你想要的方法可以这样完成：

```
 public static IEnumerable<MethodDeclarationSyntax> BobsFilter(SyntaxTree tree)
    {
        var compilation = Compilation.Create("test", syntaxTrees: new[] { tree });
        var model = compilation.GetSemanticModel(tree);

        var types = new[] { SpecialType.System_Boolean, SpecialType.System_Void };

        var methods = tree.Root.DescendentNodes().OfType<MethodDeclarationSyntax>();
        var publicInternalMethods = methods.Where(m => m.Modifiers.Any(t => t.Kind == SyntaxKind.PublicKeyword || t.Kind == SyntaxKind.InternalKeyword));
        var withoutParameters = publicInternalMethods.Where(m => !m.ParameterList.Parameters.Any());
        var withReturnBoolOrVoid = withoutParameters.Where(m => types.Contains(model.GetSemanticInfo(m.ReturnType).ConvertedType.SpecialType));

        return withReturnBoolOrVoid;
    } 
```

为此，您需要一个 SyntaxTree。通过反射，您正在处理程序集，所以我不知道您问题的那部分的答案。如果您希望它作为 Visual Studio 的 Roslyn 扩展，那么这应该是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:12:34.393

Bob，我建议您从随 Roslyn CTP 一起安装的语法和语义演练文档开始。它们表明了大部分（如果不是全部）。

# java - 如何处理独立 Java 应用程序中的 Hibernate 异常

> ID：10713064
> 
> 赞同：1
> 
> 时间：2012-05-23T03:28:12.870
> 
> 标签：java, hibernate, exception-handling

Hibernate 抛出的异常是未经检查的，从我在别处读到的内容看来，它们不应该被代码捕获。但是，这意味着当例如发生临时数据库错误时，发生该错误的线程将终止，并且我们的应用程序变得无响应。应该怎么做？

发生的示例异常：

```
javax.persistence.PersistenceException
Caused by: org.hibernate.exception.GenericJDBCException: could not insert
Caused by: java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction 
```

当应用程序运行数小时或数天时会发生这种情况。

我读过的大部分内容都是关于如何在集成到 Spring 或类似的东西时使用 Hibernate。因此，每个 Web 请求都会启动一个新线程，如果该线程终止，它只会影响该一个 Web 请求。但是对于一个独立的Java应用程序，我们应该如何处理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:31:29.870

捕获 RuntimeException 并没有错。未选中它只是为了让您选择不选中。

如果您有处理异常的特定策略（例如重试，或触发应用程序逻辑中的其他内容），请务必抓住它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:39:44.137

Hibernate Exceptions 未经检查，因为它们不想强迫您捕获它们，这取决于应用程序的设计，如果您想在 DAO 或其他任何地方处理。

如果您的案例您应该处理 (Catch)`PersistenceException`并采取纠正措施通知您的用户发生了不好的事情。

正如其他答案在一般说明中所强调的那样，捕捉`RuntimeException`和采取纠正措施没有害处，通常也建议投掷`RuntimeException`而不是`CheckedException`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:14:17.330

如果你有一个独立的应用程序，你仍然可以使用 Spring。归根结底，Spring 只不过是一堆你配置为加载和运行的 java 类。在中心有一个 ApplicationContext 对象，它只是 applicationContext.xml 文件的对象版本。

基本上，在您的“public static void main(String[] args)”中，您可以从您的 xml 文件创建一个 ApplicationContext。请注意，ApplicationContext 是一个接口，因此您可能会调用 FileSystemXmlApplicationContext(String configLocation) 的构造函数。

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html#FileSystemXmlApplicationContext(java.lang.String](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html#FileSystemXmlApplicationContext(java.lang.String) )

查看[http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/beans.html](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/beans.html)并仔细查看第 3.2 节。

# android - 使用外部文件夹时无法附加源（eclipse）

> ID：10713067
> 
> 赞同：5
> 
> 时间：2012-05-23T03:29:02.723
> 
> 标签：android, eclipse

我正在开发一个 Eclipse 项目（Eclipse 3.6.2 + Android ADT + BlackBerry 插件），我需要在其中共享 Android、BlackBerry 和 JavaSE 项目之间的代码。

我将独立于平台的代码移动到一个单独的文件夹并创建了以下结构

```
CoreCode - java project
  - /src - platform independent code

CorePlusDroid - Android library project with core code plus Android-specific classes 
  - /src - Android-specific code   
  - /core_src - linked source from CoreCode/src (via Source tab in Java Build Path)

DroidApp - Android application that uses CorePlusDroid library
  - /src
  - /gen
  - /assets
  etc 
```

DroidApp 构建并运行正常，但是当我尝试从 CoreCode 浏览类或使用调试器进入其中一个类时，我得到“找不到源”页面。我尝试单击“更改附加源...”按钮并将位置路径设置为 /CoreCode/src 或将此文件夹指定为外部文件夹，但没有任何帮助。编辑器仍然无法在 CoreCode/src 中找到类的源代码。

知道我做错了什么以及如何解决吗？能够在平台之间共享代码真的很棒，但是当调试真的很痛苦时却无法进入它。

谢谢。

# google-drive-api - 如何在 Google Drive 管理应用程序控制台中删除默认使用复选框

> ID：10713075
> 
> 赞同：0
> 
> 时间：2012-05-23T03:30:28.233
> 
> 标签：google-drive-api

![管理应用程序控制台页面](../Images/7106cfca749443eb21f80a63d8b040c3.png)

作为开发人员，我希望我的应用程序隐藏“默认使用”复选框，就像 HelloFax 所做的那样。

我在哪里可以设置这个？

我们尝试清空 MIME 和扩展名设置，但我们得到了

![在此处输入图像描述](../Images/c38e348dd87b1ee943d511a10b2bc85f.png)

这是否意味着如果我的应用程序不支持创建新文档，我不能删除默认使用复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:42:49.177

您可以在 API 控制台的 Drive SDK 部分列出应用程序默认可以打开的 MIME 类型和扩展：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

将“默认 MIME 类型”和“默认文件扩展名”都留空以隐藏复选框。

编辑：如果您的应用没有主要类型，您需要指定至少一种类型（或扩展名）作为次要类型或允许它创建新文件。

这是因为新的安全模型仅授予对用户使用给定云端硬盘应用创建的文件或用户使用给定云端硬盘应用打开的文件的访问权限：

[https://developers.google.com/drive/apps_overview#granting_file-level_access](https://developers.google.com/drive/apps_overview#granting_file-level_access)

# android - dp 中指定的边距在不同屏幕上的相对大小不同

> ID：10713076
> 
> 赞同：2
> 
> 时间：2012-05-23T03:30:29.260
> 
> 标签：android, user-interface, scaling, imagebutton

更新：我发现了我的问题。我已经为不同的分辨率定义了单独的可绘制资源，但我不知道我必须为不同的屏幕尺寸创建不同的布局。我想我应该更完整地阅读“支持多个屏幕”页面。其他有此问题的人，请阅读整个页面：

[http://developer.android.com/guide/practices/screens_support.html#qualifiers](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

我的印象是使用 dp 单位的目的是在不同的屏幕尺寸上使间距相同，但我有一个 ImageButton，它的宽度、高度、左边和上边距都用 dp 单位定义，当我循环通过模拟器上不同的屏幕尺寸，按钮不会定位在相同的相对位置。

我的 ImageButton 在 xml 文件中定义如下：

```
<ImageButton
    android:id="@+id/routesButton"
    android:layout_height="33dip"
android:layout_width="90dip"
    android:src="@drawable/route_button"
    android:scaleType="fitCenter"
    android:background="#00000000"
    android:layout_gravity="top|left"
    android:layout_marginTop="280dip"
android:layout_marginLeft="15dip" /> 
```

我认为这可能与 ImageButton 有关，因为在 dp 中设置了边距的其他视图正在正确调整。我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:14:38.787

我发现了我的问题。我已经为不同的分辨率定义了单独的可绘制资源，但我不知道我必须为不同的屏幕尺寸创建不同的布局。我想我应该更完整地阅读“支持多个屏幕”页面。其他有此问题的人，请阅读整个页面：

[http://developer.android.com/guide/practices/screens_support.html#qualifiers](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

# c++ - win32 DialogBox() 和 MAKEINTRESOURCE()：如何修改应用的ui？

> ID：10713100
> 
> 赞同：-1
> 
> 时间：2012-05-23T03:34:59.163
> 
> 标签：c++, windows, winapi, device, joystick

我正在研究我的项目，该项目试图使用操纵杆控制相机，我发现了这个示例代码：

[http://ukgtut.googlecode.com/svn-history/r53/trunk/irrlicht/src/proto_carace/Joystick.cpp](http://ukgtut.googlecode.com/svn-history/r53/trunk/irrlicht/src/proto_carace/Joystick.cpp)

这个应用程序有自己的 ui，不适合我的项目，ui 似乎是由 MAKEINTRESOURCE(IDD_JOYST_IMM) 创建的，我想修改但不知道该怎么做。

我应该更改 MAKEINTRESOURCE() 中的变量来修改 ui 吗？如何构建自己的 ui？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:52:58.850

您需要使用资源编辑器（甚至是文本编辑器）来修改资源文件中的对话框模板。

# php - 将带有空格的数据从数据库插入到数组中

> ID：10713101
> 
> 赞同：2
> 
> 时间：2012-05-23T03:35:01.740
> 
> 标签：php, mysql

是否可以将这种数据从数据库插入到数组中？

```
Mouse
Keyboard  //Saved from a Textarea box 
Monitor 
```

整张桌子是这样的；

```
id  ||   Owner  ||  Items
--------------------------
1   ||   John   || Mouse
    ||          || Keyboard //This is in a single row
    ||          || Monitor
-------------------------- 
```

如何将字段“Items”中的每一行数据分配到一个数组中（比如说$items）？

所以它会像：

```
 $items[0] = "Mouse";
  $items[1] = "Keyboard";
  $items[2] = "Monitor"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:51:57.540

尝试：

```
$items = explode("\n", $string_from_db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:50:13.727

您可以使用[mysql_fetch_assoc()](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

或[PDOStatement::fetchAll()](http://sg.php.net/manual/en/pdostatement.fetchall.php)

或[mysqli_result::fetch_assoc()](http://sg.php.net/manual/en/mysqli-result.fetch-assoc.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:53:19.380

像这样的东西？

```
$arr = explode("\n",$data);   // split into lines
$categories = explode("||",$arr[0]);
unset($arr[0]); array_values($arr[0]);  // dont want categories anymore
array_walk($categories,create_function('&$v','$v = trim($v);'));   // trim space from categories
$data = array();   // holds info
foreach((array)$arr as $key=>$val) {
   if (substr($val,0,5)=="-----") { continue; }   // ignore "-----..." lines
   $row = explode("||",$val);
   foreach((array)$row as $key2=>$val2) {
      $data[ $categories[$key2] ][] = trim($val2);
   }
}

echo "<pre>";
print_r($data);
echo "</pre>"; 
```

您使用上述代码的示例给出：

```
Array
(
    [id] => Array
        (
            [0] => 1   
            [1] =>     
            [2] =>     
        )

    [Owner] => Array
        (
            [0] =>    John   
            [1] =>           
            [2] =>           
        )

    [Items] => Array
        (
            [0] =>  Mouse
            [1] =>  Keyboard
            [2] =>  Monitor
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T04:55:00.480

如果我正确阅读最后一行，你想要：

```
 $results = $db -> query("SELECT Items FROM table");

  while($row = $results -> fetch_assoc()) {
        $items[] = $row['Items'];
  } 
```

# watir-webdriver - 如何找到自定义标签，例如 ?

> ID：10713102
> 
> 赞同：5
> 
> 时间：2012-05-23T03:35:06.047
> 
> 标签：watir-webdriver

我不得不处理页面中带有`<g>`标签的一些图形项目。我可以通过放入 selenium webdriver 来做这样的事情来找到它们：

```
browser.wd.find_elements( :tag_name => "g" ) 
```

watir webdriver 的等价物是什么？

另外，我如何将这些硒元素转换为 watir 元素？

我可以添加对`<g>`标签的支持以某种方式在本地等待吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T14:31:24.657

**解决方案 1 - Watir-Webdriver 等效项：**

相当于您在 selenium-webdriver 中所做的事情是：

```
browser.elements( :tag_name => "g" ) 
```

所以你可以做这样的事情来输出每个元素的文本：

```
browser.elements( :tag_name => "g" ).each do |x|
  puts g.text
end 
```

**解决方案 2 - 添加对 G 元素的支持：**

在需要 Watir-webdriver 之后，添加以下代码：

```
module Watir
    module Container
        def g(*args)
            G.new(self, extract_selector(args).merge(:tag_name => "g"))
        end

        def gs(*args)
            GCollection.new(self, extract_selector(args).merge(:tag_name => "g"))
        end         
    end

    class G < Element
    end

    class GCollection < ElementCollection
        def element_class
            G
        end
    end
end 
```

然后你可以像对待任何其他元素一样对待'g'。例如：

```
puts browser.g(:index, 0).text
browser.gs.each{ |x| puts x.text } 
```

G 和 GCollection 类将支持所有标准元素方法。如果有特定于该元素的内容，您可以向该类添加其他方法。

**更新 - 添加自定义方法的示例：**

要获得光标样式，您可以向 G 类添加一个方法，如下所示：

```
class G < Element
    def cursor_style()
        assert_exists
        return @element.style("cursor")
    end
end 
```

这将允许您像这样获取游标属性：

```
puts browser.g(:index, 0).cursor_style
#=> move 
```

任何与元素交互的自定义​​方法都需要以 assert_exists 开头。然后，在该方法中，您可以使用 @element 变量来处理元素。

请注意，因为 G 元素继承自 Element 类，您也可以使用内置样式方法：

```
puts browser.g(:index, 0).style("cursor")
#=> move 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:32:01.437

watir 或 watir-webdriver 不支持非标准 HTML 标签。部分原因是我们必须支持的可能标签名称列表是无穷无尽的。

如果你愿意，你可以在你自己的自定义标签中进行猴子补丁。从长远来看，如果您将不得不大量处理这些自定义标签，那么这可能是您最好的解决方案，因为它的行为就像 Watir api 支持的其他标准 HTML 元素一样。

您可以在标签名称上使用 CSS 选择器，但这仅在您坚持元素对象时才有效，如[Watir::Exception::MissingWayOfFindingObjectException: invalid attribute: :css](https://stackoverflow.com/q/9006223/409820)中所述。如果您问我，哪种方式会使事情变得不那么可读和/或有用，但在这方面可能是一个快速而简单的解决方案，值得付出微薄的代价。

或者，当您需要 watir 不支持的东西时，您可以使用`.driver`or方法来访问 webdriver 功能。`.wd`（但这也不那么可读）

# php - PHP html DOM vs 纯 HTML 速度

> ID：10713106
> 
> 赞同：4
> 
> 时间：2012-05-23T03:35:57.653
> 
> 标签：php, html, performance, dom

这是一个简单的问题，但是在带有 php 回显结果的简单 html 页面或仅由 php dom 构建的 html 页面之间哪个更快？

感谢您的回答和建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:45:35.803

太多未知变量……</p>

使用 DOM 时，您可以非常快速地将大量信息放入树中；使用 echo 您需要以其他方式跟踪您的（元）数据。要打印静态页面，您不应该使用 DOM。要打印在构建过程中经过大量修改的页面，您可能需要使用 DOM。

这个问题没有正确答案。您需要为您的特定用例做一个基准测试。

* * *

但你也可以珍惜你的时间……我希望如此。即使使用 DOM 渲染页面可能会更慢，但让您的项目增长会更容易。使用`echo`调用的编写模块系统很快就会变得一团糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:31:15.890

您应该尝试一些 MVC 框架，例如 Code Igniter

一遍又一遍地编写相同的代码并不好。

您可以像这样拆分您的网站

```
 ____________________________________
|                HEADER             |  // Header.php
|___________________________________| 
|                     NAV BAR       |  //menu.php
|___________________________________|
|                                   |  
|                                   |
|    Content                        | //Content {Different pages based on menu clicked}
|                                   |
|___________________________________|
|          FOOTER                   | 
|___________________________________|  //Footer.php 
```

所以你所有的页面都是这样的

```
<?php
    include(header.php);
    include(menu.php);

    //based on menu clicked 
   include('clickedPage.php')

  //Finally
  include('footer.php');
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T08:15:44.060

没有什么比直接访问纯 HTML 文件更快的了。最好使用**.html**扩展名。

PHP 代码必须经过 PHP 解释器，这是一个额外的步骤。

每种服务器端语言（C#、PHP、Python、Java、Node.js 等）都是如此

# sqlite - 当我尝试运行 Sqlite3 新安装时出现错误

> ID：10713107
> 
> 赞同：1
> 
> 时间：2012-05-23T03:35:58.290
> 
> 标签：sqlite

我刚刚从他们官方网站上提供的源代码安装了 sqlite3，我下载了文件“sqlite-autoconf-3071201.tar.gz”并编译了它。

但是当我尝试从命令行运行 sqlite 时，我收到以下消息：

> SQLite 标头和源版本不匹配 2011-11-01 00:52:41 c7c6050ef060877ebe77b41d959e9df13f8c9b5e 2012-05-22 02:45:53 6d326d44fd1d626aae0e8456e5fa2049f1ce0789

我正在使用 ubuntu 最新版本。

有人可以帮忙吗？谢谢

# java - android中java.lang.OutOfMemoryError的主要原因是什么

> ID：10713110
> 
> 赞同：2
> 
> 时间：2012-05-23T03:36:14.123
> 
> 标签：java, android, memory-management, memory-leaks, out-of-memory

我是android和java的新手。我制作了一个运行良好的应用程序，除了当我向下滚动应用程序中的列表视图时出现 java.lang.OutOfMemoryError 异常，每次滚动到底部时都会动态增加（10 个项目）。滚动一些 4-5 页后，我得到了这个异常。任何人都可以帮我解决此异常以及避免此类异常的一些提示。

我的适配器：

```
public class LazyAdapter extends BaseAdapter{

    private static LayoutInflater inflater = null;
    private Activity activity;
    public ImageLoader imageLoader;
    public static ArrayList<Product> values;
    private String product_action;

    public LazyAdapter(Activity a, ArrayList<Product> arg3) {

        values = arg3;
        activity = a;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {

        return values.size();
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public static class ViewHolder {

        public TextView text;
        public ImageView image;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View vi = convertView;
        ViewHolder holder;

        Product p = values.get(position);

        if (convertView == null) {
            vi = inflater.inflate(R.layout.feed_items, null);
            holder = new ViewHolder();
            holder.text = (TextView) vi.findViewById(R.id.label);
            ;
            holder.image = (ImageView) vi.findViewById(R.id.logo);
            vi.setTag(holder);
        } else {
            holder = (ViewHolder) vi.getTag();
        }

        if (condition1) {
            holder.text.setText(myText);
            holder.image.setTag(imageUrl);

            imageLoader.DisplayImage(imgURL, activity, holder.image);
        } else if (condition2) {
            holder.text.setText(myText);
                    holder.image.setTag(imageUrl);
            imageLoader.DisplayImage(imgURL, activity, holder.image);
        } else if (condition3) {
            holder.text.setText(myText);
            holder.image.setTag(imageUrl);

            imageLoader.DisplayImage(imgURL), activity,
                    holder.image);
        }

        return vi;
    }

    public void add(Product product) {

        values.add(product);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:31:30.787

`java.lang.outofmemmory`dvm 没有内存空间时发生错误。这就是内存泄漏的问题。当应用程序保留对对象的引用越来越多并且从不释放它们时，就会发生内存泄漏。因此，垃圾收集器将永远不会收集这些对象，并且可用内存将越来越少，直到我们达到没有足够可用内存供应用程序正常运行的程度。

当使用可用平台资源无法满足内存请求时引发。这样的请求可以由正在运行的应用程序或由 VM 的内部功能发出。每次滚动列表时还有一件事，然后 vm 需要内存来显示该列表，以便使用前一个视图释放列表对象。

要解决此问题，首先创建一个 XML 文件，您可以在其中创建`ListView`这样的文件（Xmlfilename 为`yourlist.xml`）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearlayout_id"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@color/encode_view">

<ListView
    android:id="@+id/info_list_id"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_above="@+id/cancelinfobtn_id" >
</ListView>
</RelativeLayout> 
```

现在创建一个 XML，在其中创建`ImageView`和`TextView`。（XML 文件名：）`yourimagetextlayout.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" 
    android:background="#ffffff">
    <ImageView
        android:id="@+id/logo"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginLeft="5px"
        android:layout_marginRight="20px"
        android:layout_marginTop="5px"
        android:layout_weight="0.25"
        android:src="@drawable/your image source name" />

    <TextView
        android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/logo"
        android:text="@+id/label"
        android:textSize="16px" 
        android:textColor="@color/contents_text"/>

</RelativeLayout> 
```

现在你有了你的`Activity`类，你可以`ListView`通过它的 id 找到你的类，并创建一个自定义适配器类，你可以在其中填写你的列表，如下所示：

```
public class MobileArrayAdapter extends ArrayAdapter<String>
{
    private final Context context;
    private ArrayList<String> contactNamesList;
    View rowView;
    ImageView imageview;

    public MobileArrayAdapter(Context context, ArrayList<String> contactNamesList) {
        super(context, R.layout.yourimagetextlayout, contactNamesList);
        this.context = context;
        this.contactNamesList = new ArrayList<String>();
        this.contactNamesList.addAll(contactNamesList);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = inflater.inflate(R.layout.yourimagetextlayout, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        imageview = (ImageView) rowView.findViewById(R.id.logo);
        String findname=contactNamesList.get(position);
        textView.setText(contactNamesList.get(position));
        imageview.setImageBitmap(ur image phto path);
        return rowView;
    }

} 
```

现在在您的`Activity`班级中`ListView`通过其 id 找到您的：

```
ListView listview = (ListView)findViewById(R.id.info_list_id); 
```

只需像这样实例化适配器类：

```
MobileArrayAdapter mobileadapter = new MobileArrayAdapter(this, yourarraylist); 
```

并将此适配器添加到您的 ListView 中：

```
listview.setAdapter(mobileadapter); 
```

# cakephp - cakephp，用户已注册 - 如何创建响应页面？

> ID：10713113
> 
> 赞同：1
> 
> 时间：2012-05-23T03:36:21.940
> 
> 标签：cakephp

当用户在我们的页面上注册时，我希望在用户单击提交后出现一个页面，它会说“感谢您注册，请检查您的电子邮件。”。

这是我添加功能的代码

```
function add(){
        $this->set('title_for_layout', 'Please Login');
        $this->set('stylesheet_used', 'style');
        $this->set('image_used', 'eBOXLogo.jpg');   
    if($this->request->is('post')){
    $this->User->create(); 
    if ($this->User->save($this->request->data)) 
    { 
        $this->Session->setFlash('The user has been saved');  

    }
    else { $this->Session->setFlash('The user could not be saved. Please, try again.'); } 
    } 

  } 
```

这是我的添加视图

```
<h2>Please enter your details</h2>
<?php
echo $this->Form->create('User', array('action'=>'add'));
echo $this->Form->input('username',array('label'=>'Username: '));
echo $this->Form->input('password',array('label'=>'Password: '));
echo $this->Form->input('password_confirmation',array('type'=>'password'));
echo $this->Form->input('email',array('label'=>'Email: '));
echo $this->Form->input('title',array('label'=>'Title: '));
echo $this->Form->input('firstname',array('label'=>'First Name: '));
echo $this->Form->input('surname',array('label'=>'Surname: '));
echo $this->Form->input('street',array('label'=>'Street Address: '));
echo $this->Form->input('city',array('label'=>'City: '));
echo $this->Form->input('state',array('label'=>'State: '));
echo $this->Form->input('country',array('label'=>'Country: '));
echo $this->Form->end('Click here to Register ');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:48:01.700

```
if ($this->User->save($this->request->data)) { 
    $this->Session->setFlash('The user has been saved');
    $this->redirect(array('action' => 'thank_you'));
} 
```

或者：

```
if ($this->User->save($this->request->data)) { 
    $this->Session->setFlash('The user has been saved');
    $this->render('thank_you');
} 
```

换句话说，只需创建另一个您重定向到的操作，或者在用户注册时简单地呈现一个特殊视图。

# php - 在 Magento 中调用外部 js 和 css

> ID：10713114
> 
> 赞同：0
> 
> 时间：2012-05-23T03:36:41.770
> 
> 标签：php, magento

我正在尝试将我所有的静态内容移动到 CDN 以提高我的 Magento 商店的性能。我可以成功地在页面头部获得我想要的脚本标签，但我不知道如何将它放在正确的位置。

下面的代码在输出的其余部分下方输出prototype.js 脚本标记，因此它不起作用。基本上，我只想知道控制脚本元素顺序的最佳方法。

这是在我的主题目录中的 page.xml 布局文件中。

```
<block type="page/html_head" name="head" as="head">
                <block type="core/text" name="cdn_prototype">
                    <action method="setText">
                        <text><![CDATA[<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.2/prototype.js"></script>]]></text>
                    </action>
                </block>
                <action method="addJs" ifconfig="dev/js/deprecation"><script>prototype/deprecation.js</script></action>
                <action method="addJs"><script>lib/ccard.js</script></action>
                <action method="addJs"><script>prototype/validation.js</script></action>
                <action method="addJs"><script>scriptaculous/builder.js</script></action>
                <action method="addJs"><script>scriptaculous/effects.js</script></action>
                <action method="addJs"><script>scriptaculous/dragdrop.js</script></action>
                <action method="addJs"><script>scriptaculous/controls.js</script></action>
                <action method="addJs"><script>scriptaculous/slider.js</script></action>
                <action method="addJs"><script>varien/js.js</script></action>
                <action method="addJs"><script>varien/form.js</script></action>
                <action method="addJs"><script>mage/translate.js</script></action>
                <action method="addJs"><script>mage/cookies.js</script></action>
                <action method="addJs"><script>dvm/menu.js</script></action>

                <block type="page/js_cookie" name="js_cookies" template="page/js/cookie.phtml"/>

                <action method="addItem"><type>skin_js</type><name>js/scripts.js</name></action>

                <action method="addCss"><stylesheet>css/styles.css</stylesheet></action>
                <action method="addItem"><type>skin_css</type><name>css/styles-ie.css</name><params/><if>lt IE 8</if></action>
                <action method="addItem"><type>skin_css</type><name>css/styles-ie-8.css</name><params/><if>lt IE 9</if></action>
                <action method="addCss"><stylesheet>css/widgets.css</stylesheet></action>
                <action method="addCss"><stylesheet>css/print.css</stylesheet><params>media="print"</params></action>

                <action method="addItem"><type>js</type><name>lib/ds-sleight.js</name><params/><if>lt IE 7</if></action>
                <action method="addItem"><type>skin_js</type><name>js/iehover-fix.js</name><params/><if>lt IE 7</if></action>
            </block> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:39:32.447

这是如何做到的：

```
<block type="core/text" name="google.maps">
    <action method="setText">
        <text><![CDATA[<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>]]></text>
    </action>
</block> 
```

# ruby - 使用 Ruby 语言创建类别和子类别

> ID：10713118
> 
> 赞同：1
> 
> 时间：2012-05-23T03:37:24.107
> 
> 标签：ruby, recursion

我整天都在尝试解决这个问题，但没有任何解决方案，所以你能帮帮我吗？这是问题描述：程序应该能够显示给定类别/子类别的面包屑轨迹。例如：输入：公共关系输出：商业与金融>>广告与营销>>公共关系。

这里商业与金融是主要类别，广告与营销是其子类别，公共关系是广告与营销的子类别。

我考虑过使用递归来实现它，但我不太确定该怎么做。

谢谢，吉米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:31:41.077

假设它是普通的 Ruby，你可以这样做：

```
class Category
  def initialize name, parent = nil
    @name = name 
    @parent = parent
  end

  def display
    @parent ? "#{@parent.display} >> #{@name}" : name
  end

  def name
    @name
  end
end 
```

并像这样使用它

```
1.9.2p320 :046 > c = Category.new "Parent"
 => #<Category:0x000001009c46d0 @name="Parent", @parent=nil> 
1.9.2p320 :047 > sub = Category.new "Sub", c
 => #<Category:0x000001009bf860 @name="Sub", @parent=#<Category:0x000001009c46d0 @name="Parent", @parent=nil>> 
1.9.2p320 :048 > sub.display
 => "Parent >> Sub" 
```

# opengl - 线性光模式的 Alpha 混合层

> ID：10713120
> 
> 赞同：3
> 
> 时间：2012-05-23T03:37:33.383
> 
> 标签：opengl, graphics, shader

我正在重新创建一些 Photoshop 混合，并尝试使用线性光模式。在 Photoshop 中，您将有一个 100% 不透明度的背景层，然后将一个 50% 不透明度的顶层设置为线性光作为混合模式。

我确实找到了有关如何进行线性光混合的信息，但它仅在两个图层都为 100% 不透明度时才有效。

这是执行线性光模式的着色器代码，当图层都处于 100% 不透明度时，它给出的结果与 Photoshop 相同：

```
#define BlendLinearDodgef           BlendAddf
#define BlendLinearBurnf            BlendSubstractf

#define BlendAddf(base, blend)      min(base + blend, 1.0)
#define BlendSubstractf(base, blend)    max(base + blend - 1.0, 0.0)

#define BlendLinearLightf(base, blend)  (blend < 0.5 ? BlendLinearBurnf(base, (2.0 * blend)) : BlendLinearDodgef(base, (2.0 * (blend - 0.5)))) 
```

我查看了[http://en.wikipedia.org/wiki/Alpha_compositing](http://en.wikipedia.org/wiki/Alpha_compositing)但仍有问题。

如何让混合模式适用于半透明图层？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:17:52.013

您应该阅读[PDF 规范](https://www.adobe.com/content/dam/acom/en/devnet/pdf/pdfs/pdf_reference_archives/PDFReference.pdf)以了解当您的 alpha 不是 100% 时如何使用混合模式。特别是，请参阅第 7.2 节“基本合成计算”。第 414 页上的公式应该解释您需要什么：

```
Cr= (1-as/ar) * Cb + (as/ar) * [(1-ab) * Cs + ab * B(Cb,Cs)] 
```

# html - ID 属性可以以冒号开头吗？

> ID：10713121
> 
> 赞同：4
> 
> 时间：2012-05-23T03:37:38.960
> 
> 标签：html

出于纯粹的学术目的查看Gmail的来源，我遇到了这个。

```
<input id=":3f4" 
    name="attach" 
    type="checkbox" 
    value="13777be311c96bab_13777be311c96bab_0.1_-1" 
    checked=""> 
```

奇迹的奇迹，大多数元素的 id 都以 a 开头，`:`
我一直认为 ID 属性的定义是这样的。

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

还是我错过了什么新东西？我的意思是 HTML5 可以吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T03:41:14.420

## 允许性

在最新的工作草案中是允许的：http: [//www.w3.org/TR/html-markup/datatypes.html#common.data.id](http://www.w3.org/TR/html-markup/datatypes.html#common.data.id)

> 任何字符串，有以下限制：
> - 必须至少有一个字符长
> - 不能包含任何空格字符

该规范还指出：

> 以前的 HTML 版本对 ID 值的内容有更大的限制（例如，它们不允许 ID 值以数字开头）。

您引用的定义出现在[HTML 4 规范](http://www.w3.org/TR/html4/types.html)中。

有一个[被广泛访问的 SO 线程](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)访问了一些关于 ID 的注意事项（主要从 HTML 4 的角度来看）。

## 基本原理

想多了，才发现这里有两个很好的问题：

**为什么规范允许这样做？**

可以包含任何字符的 ID 可能会破坏各种事物，例如 CSS 选择器（如果未使用正确的转义）、Sizzle（jQuery 使用）模式匹配、服务器 ID（例如 ASP.Net Web 表单使用）以及从模型属性生成的 ID（例如可能使用 MVC 模式）。

除了所有这些，我相信 HTML 5 的一个关键目标是*不*创建并非绝对必要的限制（这是 XHTML 的一个缺点）。仅仅因为尚未确定某事的目的并不意味着它不会在未来出现。

尽管有很多事情是*行不通*的，但某些事情工作得很好，例如`document.getElementById(":foo")`

[http://jsfiddle.net/Xjast/](http://jsfiddle.net/Xjast/)

与大多数事情一样，开发人员需要了解他或她正在使用的工具。

**谷歌为什么这样做？**

显然，除非您是 Gmail 团队的一员，否则无法最终回答这个问题。然而，谷歌极大地减少和混淆了他们的代码。他们还管理大量脚本，这表明了明确定义的约定。

这是另一个想法。如果 Google 利用 CSS 选择器需要转义某些字符的事实怎么办？这将大大有助于减少电子邮件中包含的内容的意外重新样式化。

# android - 应用程序崩溃，恢复状态

> ID：10713122
> 
> 赞同：1
> 
> 时间：2012-05-23T03:37:40.223
> 
> 标签：android, database

我有一个父活动，所有其他活动都来自该活动。在我的第一个屏幕活动（android.intent.category.LAUNCHER）中，我从填充 ram-sqlite 字典的父 Activity 调用方法，它是唯一发生的地方。

我想调查以下情况：应用程序崩溃，那些内存字典被删除。是否有可能在下一次启动时将用户置于与“主要”不同的某些活动上？在这种情况下，字典将保持为空，我将再次崩溃。可能吗 ？我应该怎么做才能防止它 - 创建应用程序派生类和 if-check，在那里填充字典？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:06:22.290

如果应用程序崩溃，您将不会再次启动相同（崩溃）的活动。但是，如果某些数据在启动时对您的主要活动的状态非常重要，那么您应该确保在它们发生变化时永久保存它们。所以你不应该只在你的活动 onStop() 方法中保存你的状态。

# c# - 使用搜索选项保存 word 文档的架构

> ID：10713126
> 
> 赞同：0
> 
> 时间：2012-05-23T03:38:15.310
> 
> 标签：c#, sql-server-2008

我们正在构建一个内部应用程序，用户可以选择在系统中保存 word 文档，但问题是用户应该能够通过关键字搜索这些文档。我们使用 asp.net、c# 和 Sqlserver 2008。我想将这些文档保存在 Varchar 字段中，然后在这些字段中搜索关键字，或者我是否需要使用 Solr/Lucene 进行全文搜索。

我想知道这是否是为此目的的有效设计。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:49:35.940

没有更多细节，这是不可能明智地回答的。有几点需要考虑：

您是说将整个文档保存到数据库中的 varchar 字段中吗？这听起来并不聪明 - 你有保持数据库副本与磁盘副本同步的整个问题（更不用说首先是数据库副本的整个想法......）

您提到关键字：如果关键字数量有限，那么编写一个在 word doc 中搜索关键字的办公室互操作应用程序相当容易。您可以在保存时执行此操作并保留哪些文档包含哪些单词的数据库，或者您可以“即时”执行此操作（即，一个应用程序在整个文件夹中搜索包含特定单词的文档） - 它一切都取决于您可能拥有多少文档，所需的性能等。

您可以对文档属性做些什么（添加您自己的与关键字对应的自定义属性）并搜索具有该属性的文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:16:01.923

如果您必须将 word 文档存储在数据库中，并且希望能够通过一些经典关键字搜索它们，则使用[Virtual Path Provider](http://support.microsoft.com/kb/910441)，每次保存文档时，将一些关键字放在 dB 字段中并使用这些关键字进行搜索。此方法将绕过 John3136 提到的 DB Copy。

如果您需要能够搜索文档的内容，如果文件保存为 blob，您将无法执行此操作，因此出于此目的，将文档另存为 XML Word 2003 并配置完整文件可能更有意义文本搜索忽略尖括号，例如：

```
Regex.Replace(dBFieldOfWordXMLData, @"<[^>]*>", string.Empty); 
```

我认为最有效的方法是使用 Virtual Path Provider，MSDN 文章和 Sharepoint 文档使用 Virtual Path Provider，它们是可搜索的。我已经对 Azure 上的 EpiServer CMS 最有效的解决方案进行了一些研究：http: [//episerverazurevpp.codeplex.com/](http://episerverazurevpp.codeplex.com/)

# django - 在 Django 中使用具有多个值的选择字段预填充表单

> ID：10713128
> 
> 赞同：0
> 
> 时间：2012-05-23T03:38:51.457
> 
> 标签：django, forms, select, populate

我已经尝试了很多东西，但我仍然不知道如何`select field`在 Django 中填充 a 。以下示例添加了一个带有`name='tags'`属性的选择字段的字典。

```
data = {}
for tag in tags:
  data['tags'] = tag.name
form = Form(initial=data) 
```

正如预期的那样，循环正在覆盖键“标签”，因此它只优先于最后一个值（实际上，表单显示了最后一个值）。我预计也许通过一个列表会起作用：

```
data = {}
l = []
for tag in tags:
  l.append(tag.name)
data['tags'] = l
form = Form(initial=data) 
```

但在这种情况下，它只是行不通。

可以想象，我正在使用与此类似的表单：

```
class NewTopicForm(forms.Form):
  ... some fields
  tags = ChoiceField(
            widget=forms.Select(), 
            choices=SOME_CHOICES
         ) 
```

当我需要添加多个值时，使用选择字段填充表单的正确方法是什么？

谢谢！

**更新：**

我根据这篇[文章](https://stackoverflow.com/a/3915048/460147)尝试了以下操作：

```
data = {'tags': tags.values_list('name',flat=True) } 
```

不幸的是，它不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:15:08.547

如果您希望初始值是一个列表，您似乎需要[MultipleChoiceField 。](https://docs.djangoproject.com/en/dev/ref/forms/fields/#multiplechoicefield)

# objective-c - 以编程方式实例化子类 uitableviewcell initwithstyle 不显示分隔符

> ID：10713130
> 
> 赞同：0
> 
> 时间：2012-05-23T03:39:00.033
> 
> 标签：objective-c, ios, cocoa-touch

在 iOS5.0 中，我试图用 initwithstyle 以编程方式实例化一个子类 uitableviewcell。我正在使用的代码如下。当我使用 UITableViewCell alloc 实例化时...我得到了表格分隔符，但是当我使用 thumbCell alloc 这样做时，表格行分隔符行不出现，我在 thumbCell 中设置的文本不出现..屏幕出现全白..请帮助我了解我做错了什么..

在我的视图控制器中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *identifier = @"GroupCell";
    thumbCell *cell = [self.testTableView dequeueReusableCellWithIdentifier:identifier];
    //UITableViewCell *cell = [self.testTableView dequeueReusableCellWithIdentifier:identifier]; (this works)

    if(!cell) {
        cell = [[thumbCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
       //cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];(this works)
    }
    [cell.textLabel setText:@"test"];
    return cell;
} 
```

在 thumbCell 子类中

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        [self.textLabel setText:@"thumbCell"];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:52:21.153

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
 static NSString *identifier = @"GroupCell";
thumbCell *cell = [self.testTableView dequeueReusableCellWithIdentifier:identifier];
//UITableViewCell *cell = [self.testTableView dequeueReusableCellWithIdentifier:identifier]; (this works)

if(!cell) {
    cell = [[thumbCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
   //cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];(this works)
}
NSInteger sectionRows = [tableView numberOfRowsInSection:[indexPath section]];
NSInteger row = indexPath.row;
[cell setCellBackground:sectionRows:row];
[cell.textLabel setText:@"test"];

return cell;
} 
```

在 thumbCell 类中（自定义单元格类）

```
-(void)setCellBackground:(NSInteger)sectionRows:(NSInteger)row
{
UIImage *rowBackground;
UIImage *selectionBackground;

if (row == 0 && row == sectionRows - 1)
{
    rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"];
    selectionBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];
}
else if (row == 0)
{
    rowBackground = [UIImage imageNamed:@"topRow.png"];
    selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];
}
else if (row == sectionRows - 1)
{
    rowBackground = [UIImage imageNamed:@"bottomRow.png"];
    selectionBackground = [UIImage imageNamed:@"bottomRowSelected.png"];
}
else
{
    rowBackground = [UIImage imageNamed:@"middleRow.png"];
    selectionBackground = [UIImage imageNamed:@"middleRowSelected.png"];
}
((UIImageView *)self.backgroundView).image = rowBackground;
((UIImageView *)self.selectedBackgroundView).image = selectionBackground;
} 
```

# python - Python：比较具有相似名称的文件（递归）

> ID：10713131
> 
> 赞同：1
> 
> 时间：2012-05-23T03:39:38.307
> 
> 标签：python, file-io

[在这些人](https://stackoverflow.com/questions/10575686/merge-two-files-of-different-lengths-in-python)的帮助下，我能够生成以下代码，它读取两个文件（即 SA1.WRD 和 SA1.PHN），将它们合并，并将结果与​​删除的单词子列表进行比较一本字典：

导入 sys 导入 o​​s 导入重新导入 itertools

```
#generator function to merge sound and word files
def takeuntil(iterable, stop):
    for x in iterable:
        yield x
        if x[1] == stop:
            break

#open a dictionary file and create subset of words
class_defintion = re.compile('([1-2] [lnr] t en|[1-2] t en)')
with open('TIMITDIC.TXT') as w_list:
    entries = (line.split(' ', 1) for line in w_list)
    comp_set = [ x[0] for x in entries if class_defintion.search(x[1]) ]

#open word and sound files
total_words = 0
with open(sys.argv[1]) as unsplit_words, open(sys.argv[2]) as unsplit_sounds:
    sounds = (line.split() for line in unsplit_sounds)
    words = (line.split() for line in unsplit_words)
    output = [
    (word, " ".join(sound for _, _, sound in
        takeuntil(sounds, stop)))
    for start, stop, word in words
]
for x in output:
    total_words += 1

#extract words from above into list of words in dictionary set
glottal_environments = [ x for x in output if x[0] in comp_set ] 
```

我正在尝试修改该部分 `#open a dictionary files`以在具有多个子目录的大目录上运行。每个子目录都包含 .txt 文件、.wav 文件、.wrd 和 .phn 文件。我只想打开 .wrd 和 .phn 文件，并且我希望能够一次打开它们两个，并且只有当基本文件名匹配时，即 SA1.WRD 和 SA1.PHN，而不是 SA1。 WRD 和 SI997.PHN。

我的直接猜测是做这样的事情：

```
for root, dir, files in os.walk(sys.argv[1]):
    words = [f for f in files if f.endswith('.WRD')]
    phones = [f for f in files if f.endswith('.PHN')]
    phones.sort()
    words.sort()
    files = zip(words, phones) 
```

返回：`[('SA1.WRD', 'SA1.PHN'), ('SA2.WRD', 'SA2.PHN'), ('SI997.WRD', 'SI997.PHN')]`

我的第一个问题是我是否走在正确的轨道上，如果是这样，我的第二个问题是如何将这些元组中的每一项视为要读取的文件名。

感谢您提供的任何帮助。

**编辑**：

我想我可以将代码块放入 for 循环中：

```
for f in files:
        #OPEN THE WORD AND PHONE FILES, COMAPRE THEM (TAKE A WORD COUNT)
        total_words = 0
        with open(f[0]) as unsplit_words, open(f[1]) as unsplit_sounds:

        ... 
```

但是，这会导致 IOError，可能是由于每个元组中每个项目的单引号引起的。

**更新** 我修改了我的原始脚本以包含`os.path.join(root, f)`如下所述。该脚本现在遍历目录树中的所有文件，但它只处理它找到的最后两个文件。这是输出`print files`：

```
[]
[('test/test1/SI997.WRD', 'test/test1/SI997.PHN')]
[('test/test2/SI997.WRD', 'test/test2/SI997.PHN')] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:00:17.740

我已经测试了与文件系统相关的不同部分，但您更容易确认实际文件以确认它适用于您的数据。

**编辑**以允许包含路径名

```
import sys
import os
import os.path
import re
import itertools

#generator function to merge sound and word files
def takeuntil(iterable, stop):
    for x in iterable:
        yield x
        if x[1] == stop:
            break

def process_words_and_sounds(word_file, sound_file):
    #open word and sound files
    total_words = 0
    with open(word_file) as unsplit_words, open(sound_file) as unsplit_sounds:
        sounds = (line.split() for line in unsplit_sounds)
        words = (line.split() for line in unsplit_words)
        output = [
            (word, " ".join(sound for _, _, sound in
                            takeuntil(sounds, stop)))
            for start, stop, word in words
            ]
        for x in output:
            total_words += 1
    return total_words, output

for root, dir, files in os.walk(sys.argv[1]):
    words = [ os.path.join( root, f ) for f in files if f.endswith('.WRD')]
    phones = [ os.path.join( root, f ) for f in files if f.endswith('.PHN')]
    phones.sort()
    words.sort()
    files = zip(words, phones)
    # print files

output = []
total_words = 0
for word_sounds in files:
    word_file, sound_file = word_sounds
    word_count, output_subset = process_words_and_sounds(word_file, sound_file)
    total_words += word_count
    output.extend( output_subset )

#open a dictionary file and create subset of words
class_defintion = re.compile('([1-2] [lnr] t en|[1-2] t en)')
with open('TIMITDIC.TXT') as w_list:
    entries = (line.split(' ', 1) for line in w_list)
    comp_set = [ x[0] for x in entries if class_defintion.search(x[1]) ]

#extract words from above into list of words in dictionary set
glottal_environments = [ x for x in output if x[0] in comp_set ] 
```

# objective-c - iOS 动态添加 UIControls

> ID：10713137
> 
> 赞同：1
> 
> 时间：2012-05-23T03:40:14.133
> 
> 标签：objective-c, ios

我正在尝试在运行时将一堆 UIButtons 添加到屏幕上。根据用户输入，我想在不同的位置显示不同的按钮。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:43:07.147

是的，这是可能的。

在 Objective-C 中创建一个按钮：

```
UIButton *btnPrefix = [UIButton buttonWithType:UIButtonTypeCustom];
[btnPrefix setFrame:CGRectMake(0, 0, 20, 20)];
[btnPrefix setUserInteractionEnabled: YES];
[btnPrefix addTarget:self action:@selector(buttonTapped) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview: btnPrefix]; 
```

# mysql - 使用存储过程计算团队中的人数

> ID：10713140
> 
> 赞同：1
> 
> 时间：2012-05-23T03:41:08.180
> 
> 标签：mysql, sql, join, stored-procedures

我想创建一个存储过程，它接受球队名称和年份，并返回该特定球队在该特定年份的球员人数。我正在使用 MYSQL，下面列出了我正在使用的表：

```
Person     (personID, name, phone, email, year)
Player     (personID, dateOfBirth, school)
playerTeam (personID, teamID)
Team       (teamID, teamName, ageGroup) 
```

到目前为止，我已经尝试加入表格并仅在 teamName 和 Person.year = 输入参数的情况下计算 personID，但无济于事。有任何想法吗？

提交此问题后，通过反复试验，我能够使用以下语句使其工作：

```
DELIMITER //

CREATE PROCEDURE teamSize (IN team VARCHAR (30), IN YEAR INT) 
BEGIN
          SELECT 
                    COUNT(Person.personID) NumOfPlayers 
          FROM
                    Person AS p,
                    Player,
                    playerTeam,
                    Team 
          WHERE Person.personID = Player.personID 
                    AND Player.personID = playerTeam.personID 
                    AND Team.teamID = playerTeam.teamID 
                    AND Team.teamName = team 
                    AND Person.year = YEAR ;
END //

DELIMITER ;

CALL teamSize('Pirates', 1991); 
```

反正有没有使用连接等来简化这个，因为目前它有点混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:55:27.087

我不确定你是否想要这样：

```
DELIMITER //

CREATE PROCEDURE GetPlayerCount (
          IN oTeamName VARCHAR (50),
          IN oYear INT
) AS 
BEGIN
          SELECT 
                    COUNT(a.PersonID) NoOfPlayers 
          FROM
                    Person a 
                    INNER JOIN PlayerTeam b 
                              ON a.PersonID = b.PersonID 
                    INNER JOIN Team c 
                              ON b.TeamID = c.TeamID 
          WHERE b.TeamName = oTeamName 
                    AND a.Year = oYear ;
END //

DELIMITER ; 
```

但我认为这是你想要的。

用法：

```
CALL GetPlayerCount('TeamDog', 2012); 
```

# python - 提交表单时如何将表单的输入文本设置为web2py中的特定值？

> ID：10713142
> 
> 赞同：0
> 
> 时间：2012-05-23T03:41:41.483
> 
> 标签：python, forms, web, web2py

我有一个带有两个提交按钮的表单：

```
form=FORM(DIV(INPUT(_name='itemId', requires=[IS_NOT_EMPTY(),IS_LENGTH(maxsize=12)]), 
```

输入(_type='submit',_value='search',_name='search'), INPUT(_type='submit',_value="random_search",_name='random')))

如果按下“搜索”按钮，则表单将使用 itemId 值提交。如果按下“random_search”按钮，表单应将 itemId 设置为随机值并提交表单。如何实施？我使用了 form.vars.itemId 但它不起作用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:21:03.087

提交表单后，查看一些代码并了解您在做什么（以及如何生成随机 itemId）会有所帮助。也许是这样的：

```
def index():
    if request.vars.random:
        request.vars.itemId = generate_random_id()
    form = FORM(DIV(INPUT(_name='itemId', _type='text',
        _value=request.vars.itemId if request.vars else '',
        requires=[IS_NOT_EMPTY(), IS_LENGTH(maxsize=12)]),
        INPUT(_type='submit', _value='search', _name='search'),
        INPUT(_type='submit', _value="random_search", _name='random')))
    return dict(message=form.process()) 
```

# asp.net-mvc - Upshot/Knockout Architectural Best Practices - 在 Upshot 和 .NET 之间进行通信时首选的提供程序是什么？

> ID：10713143
> 
> 赞同：9
> 
> 时间：2012-05-23T03:41:41.907
> 
> 标签：asp.net-mvc, knockout.js, asp.net-web-api, breeze, upshot

对于当前的项目，我试图了解如何有效地利用 Knockout 2.1.0、Upshot 1.0.0.2、ASP.NET MVC4 和 Entity Framework 4.3。有很多基本的架构问题似乎没有现成的答案。我列举了我的几个问题（在单独的帖子中），希望有人可以为我自己和其他人提供合理的指导，因为我们试图在现实世界的应用程序中实现这种组合。

在2 月的荷兰 TechDays 上， **Steve Sanderson**就 Knockout 和 Upshot.js 发表了精彩的演讲，他提到 Upshot 可以适应多种连接服务器的方法。（如果您还没有看过演示文稿，那么值得一看。您可以在[http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)查看。）

不幸的是，他没有时间详细说明这些通信机制是什么，或者推荐了哪些以及在什么情况下。

根据**Denver Developer**在其题为“深入了解 Upshot.js”( [http://denverdeveloper.wordpress.com/2012/03/07/digging-into-upshot-js/](http://denverdeveloper.wordpress.com/2012/03/07/digging-into-upshot-js/) ) 的博客文章中的说法，共有三个数据提供者由Upshot.js。这些都是：

• 默认为**DataProvider()**并使用/Submit 方法和您提供的操作使用jQuery 的$.ajax 方法获取数据。（AG 注意：我相信这通常与WebAPI 公开的**DbDataController**对象**相关**，但我不确定确切的限制是什么。）

• 下一个是**riaDataProvider()** – 与第一个类似，但它使用 /json/SubmitChanges 方法和 /json/{your option} 来获取数据

• 最后，我们还有**odataDataProvider()** ——这个完全不同，因为它目前不支持更新数据——它是只读的。

许多密切相关的问题自然而然地出现在为典型用途选择供应商的问题上。

*   哪个数据提供者更好——默认数据提供者还是 RIA 数据提供者？
*   推荐哪一种正常使用，在什么情况下使用？
*   使用普通**DataProvider**与**riaDataProvider**对性能有何影响？

在相关的说明中，互联网上似乎很少有关于结果的文档。除了苦读 upshot.js 中的 4700 多行代码之外，这个库还有其他像样的文档来源吗？

到目前为止，我查看的资源包括以下（以及更多）。

*   来自 Steve Sanderson 的 SPA 演示的源代码（可从[http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/](http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/)获得）。

*   Bart Jolling 对 Steve Sanderson 的 SPA 演示应用程序的变体的源代码来自他关于“使用 ASP.NET MVC4 构建单页应用程序”的文章（第 1-4 部分）。[http://bartjolling.blogspot.com/2012/04/building-single-page-apps-with-aspnet.html](http://bartjolling.blogspot.com/2012/04/building-single-page-apps-with-aspnet.html)

*   来自 ASP.NET 站点的 Big Shelf SPA 演示代码 - [http://www.asp.net/single-page-application/spa-samples/sample-bigshelf-application](http://www.asp.net/single-page-application/spa-samples/sample-bigshelf-application)

*   Microsoft ASP.NET “A Tour through SPA”（主要关注结果示例） [http://www.asp.net/single-page-application/spa-samples](http://www.asp.net/single-page-application/spa-samples)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T20:29:45.507

您应该避免使用 upshot 并改用[http://www.breezejs.com/](http://www.breezejs.com/)

ASP.Net MVC 路线图（注意没有进一步开发结果）： [http ://aspnetwebstack.codeplex.com/wikipage?title=Roadmap](http://aspnetwebstack.codeplex.com/wikipage?title=Roadmap)

密切关注路线图以及 john Papa 的博客 ( [http://www.johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins](http://www.johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins) ) - 这应该让你走在正确的道路上

更新：我刚开始玩热毛巾 - 它将 Breeze、Durandal.js Knockout.js 和 Twitter Bootstrap（以及其他）角色变成了一个非常好的模板......到目前为止它看起来很酷

[https://github.com/johnpapa/HotTowel](https://github.com/johnpapa/HotTowel)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T00:19:11.417

使用哪个提供程序取决于您的服务器端 dataService 类型。在我的实践中，它们是：

1.  WCF RIA 服务 + 结果（使用 riaDataProvider）+ 淘汰赛。
2.  ASP.NET WEB API + 结果（使用 dataProvider）+ 淘汰赛。（两者都会为您做好事！）
3.  WCF 数据服务 + 结果（使用 oDataProvider）+ 淘汰赛。（现在只读取数据）
    对于oData服务器端服务，“JayData”是一个不错的选择

# facebook - 我可以运行托管在 localhost 上的 facebook 应用程序吗

> ID：10713144
> 
> 赞同：0
> 
> 时间：2012-05-23T03:41:57.227
> 
> 标签：facebook

是否可以运行托管在 localhost 上的 facebook？世界各地的其他用户是否可以使用该应用程序，或者当用户请求时，防火墙将阻止 facebook 从我的计算机中获取内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:30:13.270

在您的应用程序的基本设置 ( [https://developers.facebook.com/apps](https://developers.facebook.com/apps) ) 下的 Settings->Basic->选择您的应用程序如何与 Facebook 集成...

使用“站点 URL：”和“移动站点 URL：”来保存您的生产和开发 URL。两个站点都将被允许进行身份验证。我只是使用 Facebook 进行身份验证，所以我不需要任何移动站点重定向功能。我通常在测试身份验证时将“Mobile Site URL:”更改为“localhost:12345”站点，然后在完成后将其恢复正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:46:53.993

防火墙甚至没有机会拦截它。

根据 IPv4 的定义，“localhost”位于不可路由的网络上。我无法通过名称可靠地访问您的家用计算机，并且“localhost”将始终解析为本地主机。

您可以使用一些技巧来使您的家用机器对外界可见，但它们并不可靠，我真的不想使用因为您的愤怒的小鸟游戏使您的机器崩溃而出现故障的服务。

# c# - 我无法从闭包中修改变量，为什么？

> ID：10713147
> 
> 赞同：1
> 
> 时间：2012-05-23T03:42:26.400
> 
> 标签：c#, dynamic, lambda, closures

我想看看我是否可以以 javascript-fashion 的方式编写一些 c# 代码，但我得到了一个意想不到的行为。我知道 c# 没有坏，但我不明白什么是错的，为什么它没有做我认为应该做的事情。

**代码**：

```
class Program
{
    static void Main(string[] args)
    {
        var person = CreatePerson(new{
            FirstName = "Lucas",
            LastName = "Ontivero",
            Age = 34
        });

        Console.WriteLine("Name....... : {0}", person.FullName);
        Console.WriteLine("IsJuvenile. : {0}", person.IsJuvenile);

        person.SetFirstName("Pablo");
        Console.WriteLine("Name....... : {0}", person.FullName);

        Console.ReadKey();
    }

    static private dynamic CreatePerson(dynamic cfg)
    {
        string firstName = cfg.FirstName;
        string lastName = cfg.LastName;
        var age = cfg.Age;

        return new{
            FullName = string.Format("{0} {1}", firstName, lastName),
            FirstName = firstName,
            LastName = lastName,
            SetFirstName = new Action<string>(fn => firstName= fn),
            SetLastName = new Action<string>(ln => lastName = ln),
            IsJuvenile = age < 18 
        };
    }
} 
```

**输出**：

```
Name....... : Lucas Ontivero
IsJuvenile. : False
Name....... : Lucas Ontivero 
```

**但我期望**：

```
Name....... : Lucas Ontivero
IsJuvenile. : False
Name....... : Pablo Ontivero 
```

为什么名字不会改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:45:16.260

它确实……但`FullName`没有。它在内部计算`CreatePerson`并存储为`string`，而不是稍后评估为字符串的属性。

您可以使用 lambdas 来导致延迟评估，就像使用`SetFirstName`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:48:32.233

它为您提供了 FullName 的第一个任务。
您需要重新分配 FullName

```
FullName = string.Format("{0} {1}", firstName, lastName) 
```

开启`SetFirstName`功能

# python - 如何在 Python 中对二维数组求和？

> ID：10713150
> 
> 赞同：15
> 
> 时间：2012-05-23T03:43:01.593
> 
> 标签：python

**我想在 python 中求和一个二维数组：**

这是我所拥有的：

```
def sum1(input):
    sum = 0
    for row in range (len(input)-1):
        for col in range(len(input[0])-1):
            sum = sum + input[row][col]

    return sum

print sum1([[1, 2],[3, 4],[5, 6]]) 
```

它显示`4`而不是`21`(1+2+3+4+5+6 = 21)。我的错误在哪里？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-27T06:07:33.340

我认为这更好：

```
 >>> x=[[1, 2],[3, 4],[5, 6]]                                                   
>>> sum(sum(x,[]))                                                             
21 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-23T03:58:07.720

您可以将该函数重写为，

```
def sum1(input):
    return sum(map(sum, input)) 
```

基本上，`map(sum, input)`将返回一个包含所有行总和的列表，然后，最外层`sum`将添加该列表。

例子：

```
>>> a=[[1,2],[3,4]]
>>> sum(map(sum, a))
10 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-23T03:50:33.013

numpy的解决方案就是：

```
import numpy as np
x = np.array([[1, 2],[3, 4],[5, 6]]) 
```

结果：

```
>>> b=np.sum(x)
   print(b)
21 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-14T16:44:16.443

这是另一个替代解决方案

```
In [1]: a=[[1, 2],[3, 4],[5, 6]]
In [2]: sum([sum(i) for i in a])
Out[2]: 21 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-23T03:59:11.690

更好的是，忘记索引计数器，只遍历项目本身：

```
def sum1(input):
    my_sum = 0
    for row in input:
        my_sum += sum(row)
    return my_sum

print sum1([[1, 2],[3, 4],[5, 6]]) 
```

Python 的一个很好的（和惯用的）特性是让它为你计算。`sum()`是内置的，您不应该使用内置名称作为您自己的标识符。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-05-23T03:45:12.467

这是问题

```
for row in range (len(input)-1):
    for col in range(len(input[0])-1): 
```

尝试

```
for row in range (len(input)):
    for col in range(len(input[0])): 
```

Python 的 range(x) 已经从 0..x-1

> range(...) range([start,] stop[, step]) -> 整数列表
> 
> ```
> Return a list containing an arithmetic progression of integers.
> range(i, j) returns [i, i+1, i+2, ..., j-1]; start (!) defaults to 0.
> When step is given, it specifies the increment (or decrement).
> For example, range(4) returns [0, 1, 2, 3].  The end point is omitted!
> These are exactly the valid indices for a list of 4 elements. 
> ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-23T03:45:21.920

`range()`在 python 中排除最后一个元素。换句话说，`range(1, 5)`是 [1, 5) 或 [1, 4]。因此，您应该只使用`len(input)`迭代行/列。

```
def sum1(input):
    sum = 0
    for row in range (len(input)):
        for col in range(len(input[0])):
            sum = sum + input[row][col]

    return sum 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-23T03:46:45.803

不要将 -1 放在 range(len(input)-1) 中，而是使用：

```
range(len(input)) 
```

range 自动返回比参数值小一的列表，因此无需显式给出 -1

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-01T20:54:51.987

快速回答，使用...

```
total = sum(map(sum,[array])) 
```

`[array]`你的数组标题在哪里。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-13T22:49:50.737

```
def sum1(input):
    return sum([sum(x) for x in input]) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-21T14:51:34.627

在 Python 3.7 中

```
import numpy as np
x = np.array([ [1,2], [3,4] ])
sum(sum(x)) 
```

输出

```
10 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-26T00:14:27.753

似乎普遍的共识是 numpy 是一个复杂的解决方案。与更简单的算法相比。但是为了存在答案：

```
import numpy as np

def addarrays(arr):

    b = np.sum(arr)
    return sum(b)

array_1 = [
  [1, 2],
  [3, 4],
  [5, 6]
]
print(addarrays(array_1)) 
```

这似乎是首选的解决方案：

```
x=[[1, 2],[3, 4],[5, 6]]                                                   
sum(sum(x,[])) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-17T07:57:21.237

```
def sum1(input):
    sum = 0
    for row in input:
        for col in row:
            sum += col
    return sum
print(sum1([[1, 2],[3, 4],[5, 6]])) 
```

# html - 如何垂直对齐图像中间 ?

> ID：10713152
> 
> 赞同：0
> 
> 时间：2012-05-23T03:43:22.187
> 
> 标签：html, css

地狱所有：下面是html代码，我想垂直对齐 li 中的每个图像，谷歌搜索后不知道。我可以使用 jquery 根据图像的高度将其设置为 margin-top，但这是不方便的解决方案。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=GB2312"/>
    <style type="text/css">
        .psdthumb2 ul {
            list-style: none;

        }
        li.qq2{
            height: 400px;
            width: 400px;
            background-color: red;
        }
    </style>
</head>

<body>
<div class="psdthumb2">
    <ul>
        <li>111111</li>
        <li class="qq2">
            <img src="http://mat1.qq.com/www/images/allskin/wmlogo.gif">
        </li>
    </ul>
    <ul>
        <li>222222</li>
        <li class="qq2">
            <img src="http://img11.360buyimg.com/n4/3445/522086b7-dc0a-432c-b027-7b2a80c79f29.jpg">
        </li>
    </ul>
</div>
</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:56:14.363

```
li.qq2{
   display : table-cell;
   vertical-align : middle;
   text-align : center;
} 
```

这应该有效。

在 Chrome、Safari、FF 和 IE 9 中测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T04:21:00.700

[这是](http://jsfiddle.net/Heebt/)一个工作示例：

**CSS**

```
.psdthumb2 ul 
{
    list-style: none;
}
li.qq2
{
    height: 400px;
    width: 400px;
    background-color: red;
    display: table-cell;
    vertical-align: middle;
}​ 
```

**HTML**

```
<div class="psdthumb2">
    <ul>
        <li>111111</li>
        <li class="qq2">
            <img src="http://mat1.qq.com/www/images/allskin/wmlogo.gif">
        </li>
    </ul>
    <ul>
        <li>222222</li>
        <li class="qq2">
            <img src="http://img11.360buyimg.com/n4/3445/522086b7-dc0a-432c-b027-7b2a80c79f29.jpg">
        </li>
    </ul>
</div> 
```

基本上你只需要添加 `display: table-cell; vertical-align: middle;`到你的 css 类。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T03:51:18.890

```
.qq2 img{vertical-align:middle;} 
```

应该管用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T04:34:31.397

使用更新的代码查看演示：- [http://jsbin.com/ozixop/edit#javascript,html,live](http://jsbin.com/ozixop/edit#javascript,html,live)

您只需更新您的 css 并为垂直中间添加一些属性，如下所述：-

```
 li.qq2{
background-color: red;
display: table-cell;
height: 400px;
text-align: center;
vertical-align: middle;
width: 400px;
    } 
```

# asp.net-mvc - 淘汰赛、CKEditor 和单页应用程序

> ID：10713155
> 
> 赞同：16
> 
> 时间：2012-05-23T03:44:18.830
> 
> 标签：asp.net-mvc, knockout.js, ckeditor, singlepage

我遇到了涉及 KnockoutJS 和 CKEditor 的情况。

基本上，我们网站的一部分是“单页”应用程序样式，目前它只涉及 2 个页面，但可能会随着时间的推移而扩展，目前它只是一个“列表”页面和一个用于项目的“管理”页面列表。

管理页面本身需要某种富文本编辑器，我们已经使用 CKEditor 为公司范围的解决方案。

因为这 2 个页面是“单页”样式，显然 CKEditor 无法注册管理元素，因为它们在页面加载时不存在 - 足够简单的问题来解决。因此，作为一个示例，我将 CKEditor 附加到了一个效果很好的点击事件上。下一个问题是，已经设置的 Knockout observables 没有得到更新，因为 CKEditor 实际上并没有修改它附加的文本区域，它创建了所有这些你实际编辑的 div/html 元素。

经过一番谷歌搜索后，我找到了一个使用 TinyMCE 执行此操作的示例 - [http://jsfiddle.net/rniemeyer/GwkRQ/](http://jsfiddle.net/rniemeyer/GwkRQ/)所以我想我可以为 CKEditor 调整类似的内容。

目前我已经非常接近有一个可行的解决方案了，我已经使用这种技术初始化和更新了正确的 observables（我将在底部发布代码），甚至正确地发回服务器 - 太棒了。

我目前遇到的问题是“单页”应用程序部分和 CKEditor 的重新初始化。

基本上发生的情况是您可以从列表中单击以管理然后保存（返回到列表页面）然后当您转到另一个“管理”时，CKEditor 被初始化但它没有任何值，我已经检查过更新代码（如下）和“值”肯定具有正确的值，但它没有被推送到 CKEditor 本身。

可能是对 CKEditor 的流程/初始化过程缺乏了解，或者对淘汰赛绑定缺乏了解，或者可能是为我们的单页应用程序设置的框架存在问题 - 我不确定。

这是代码：

```
//Test one for ckeditor
ko.bindingHandlers.ckeditor = {
    init: function (element, valueAccessor, allBindingsAccessor, context) {
        var options = allBindingsAccessor().ckeditorOptions || {};
        var modelValue = valueAccessor();

        $(element).ckeditor();

        var editor = $(element).ckeditorGet();

        //handle edits made in the editor
        editor.on('blur', function (e) {
            var self = this;
            if (ko.isWriteableObservable(self)) {
                self($(e.listenerData).val());
            }
        }, modelValue, element);

        //handle destroying an editor (based on what jQuery plugin does)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            var existingEditor = CKEDITOR.instances[element.name];
            existingEditor.destroy(true);
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor, context) {
        //handle programmatic updates to the observable
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).html(value);
    }
}; 
```

因此，在 HTML 中，它是一个相当标准的淘汰赛“数据绑定：ckeditor”，它在 ViewModel 初始化时为其应用绑定。

我放了调试器；在代码中查看流程，看起来当我第一次加载时它调用 init，然后更新，当我第二次进入时它会点击 ko.utils.domNodeDisposal 来处理元素。

我试过不破坏它，然后 CKEditor 抱怨该名称已经存在。我试过不破坏它并检查它是否存在并初始化如果它不存在 - 这是第一次有效，但第二次我们没有 CKEditor。

我认为我缺少的只有一件事可以让它发挥作用，但我已经用尽了所有选择。

有谁知道整合这三件事可以帮助我吗？

有没有可以帮助我的淘汰专家？

任何帮助将非常感激。

医学博士

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T04:58:15.673

对于任何感兴趣的人，我对其进行了排序：

这只是一个基本的执行顺序，我只需要在初始化之前将值设置为 textarea html。

请注意，这使用 jquery 适配器扩展来对元素执行 .ckeditor() 。

可能还有更好的方法来完成“模糊”部分。

此扩展目前也不适用于选项，但相比之下应该非常简单。

```
ko.bindingHandlers.ckeditor = {
    init: function (element, valueAccessor, allBindingsAccessor, context) {
        var options = allBindingsAccessor().ckeditorOptions || {};
        var modelValue = valueAccessor();
        var value = ko.utils.unwrapObservable(valueAccessor());

        $(element).html(value);
        $(element).ckeditor();

        var editor = $(element).ckeditorGet();

        //handle edits made in the editor

        editor.on('blur', function (e) {
            var self = this;
            if (ko.isWriteableObservable(self)) {
                self($(e.listenerData).val());
            }
        }, modelValue, element);
    }
}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T14:03:01.863

我已经处理了一段时间了，并且再次遇到了 .on("blur") 方法的几个问题。也就是说，当人们点击富文本并输入文本然后直接滚动到我表单上的“保存”按钮时，可观察对象的更新速度不够快。有很多方法可以处理延迟，但我想要更正式的方法。我深入研究了 CKEditor 文档并找到了这个 gem： [focusManager](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.focusManager.html)

这是处理所有焦点和模糊实例的内置功能，并允许您将真正的模糊事件连接到控件。

这是我的富文本绑定处理程序

```
ko.bindingHandlers.richText = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {

       var txtBoxID = $(element).attr("id");
       var instance = CKEDITOR.instances[txtBoxID];

       var options = allBindingsAccessor().richTextOptions || {};
       options.toolbar_Full = [
            ['Source', '-', 'Format', 'Font', 'FontSize', 'TextColor', 'BGColor', '-', 'Bold', 'Italic', 'Underline', 'SpellChecker'],
            ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl'],
            ['Link', 'Unlink', 'Image', 'Table']
       ];

       //handle disposal (if KO removes by the template binding)
       ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
          if (CKEDITOR.instances[txtBoxID]) { CKEDITOR.remove(CKEDITOR.instances[txtBoxID]); };
       });

       $(element).ckeditor(options);

       //wire up the blur event to ensure our observable is properly updated
       CKEDITOR.instances[txtBoxID].focusManager.blur = function () {
          var observable = valueAccessor();
          observable($(element).val());
       };
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {

       var val = ko.utils.unwrapObservable(valueAccessor());
       $(element).val(val);

    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-25T17:03:07.817

在其他答案中完成的工作的基础上，这是我的解决方案：

*   使用 ckeditor 自己的`change`事件处理更改（按键更新，但不仅如此）
*   使用 ckeditor `getData()`，所以你不会得到不需要的 HTML，比如“魔术线”和类似的东西
*   处理内存管理（未经测试）

代码：

```
ko.bindingHandlers.ckeditor = {
    init: function(element, valueAccessor, allBindingsAccessor, context) {
        var options = allBindingsAccessor().ckeditorOptions || {};
        var modelValue = valueAccessor();
        var value = ko.utils.unwrapObservable(valueAccessor());

        $(element).html(value);
        $(element).ckeditor();

        var editor = $(element).ckeditorGet();

        //handle edits made in the editor
        editor.on('change', function(e) {
            var self = this;
            if (ko.isWriteableObservable(self)) {
                self($(e.listenerData).val());
            }
        }, modelValue, element);

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            if (editor) {
                CKEDITOR.remove(editor);
            };
        });
    },
    update: function(element, valueAccessor, allBindingsAccessor, context) {
        // handle programmatic updates to the observable
        var newValue = ko.utils.unwrapObservable(valueAccessor());
        if ($(element).ckeditorGet().getData() != newValue)
            $(element).ckeditorGet().setData(newValue)
    }
}; 
```

我使用的标记（注意`afterkeydown`）：

```
<textarea 
    id="editor1" 
    data-bind="ckeditor: text, valueUpdate: 'afterkeydown'"
></textarea> 
```

**更新**：根据评论中的要求，这是一个最小的[工作 Fiddle](http://jsfiddle.net/n5gfdvp3/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-27T13:36:25.763

*第一次发帖，如果我做错了什么，请告诉我*

在我的项目中，我给出了关于是否有未保存的更改以及是否需要更新 observable 的视觉反馈`keyup`。并在`click`单击工具栏按钮时打开。*这也与我在属性中使用`valueUpdate:['afterkeydown','propertychange','input']`的`data-bind`一致。*

另外，为了性能，我使用了回调方法参数`.ckeditor(callback,options)`而不是`.on(eventName,handler)`.

这是我想出的自定义绑定：

```
ko.bindingHandlers.ckeditor = {
    init: function (element, valueAccessor, allBindingsAccessor, context) {
        // get observable
        var modelValue = valueAccessor();;

        $(element).ckeditor(function(textarea) {
            // <span> element that contains the CKEditor markup
            var $ckeContainer = $(this.container.$);
            // <body> element within the iframe (<html> is contentEditable)
            var $editorBody =
                    $ckeContainer.find('iframe').contents().find('body');
            // sets the initial value
            $editorBody.html( modelValue() );
            // handle edits made in the editor - by typing
            $editorBody.keyup(function() {
                modelValue( $(this).html() );
            });
            // handle edits made in the editor - by clicking in the toolbar
            $ckeContainer.find('table.cke_editor').click(function() {
                modelValue( $editorBody.html() );
            });
        });

        // when ko disposes of <textarea>, destory the ckeditor instance
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).ckeditorGet().destroy(true);
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor, context) {
        // handle programmatic updates to the observable
        var newValue = ko.utils.unwrapObservable(valueAccessor());
        var $ckeContainer = $(element).ckeditorGet().container;
        if( $ckeContainer ) {
            // <span> element that contains the CKEditor markup
            $ckeContainer = $($ckeContainer.$);
            // <body> element within the iframe (<html> is contentEditable)
            var $editorBody =
                    $ckeContainer.find('iframe').contents().find('body');
            // if new value != existing value, replace it in the editor
            if( $editorBody.html() != newValue )
                $editorBody.html( newValue );
        }
    }
}; 
```

* * *

**理由：**

我知道我可能应该使用`.getData()`and而不是这种在内容中查找和`.setData(html)`查找的相当老套的方式。`<body>``<table class="cke_editor">``iframe`

原因是，对于`update:`以下条件：

```
if( $(element).ckeditorGet().getData() != newValue )
    $(element).ckeditorGet().setData( newValue ) 
```

由于 CKEditor 的 HTML 格式，最初是正确的。因此，通知用户有关脏记录，即使它不是。**对我来说非常具体，**所以我认为你应该知道，以防你想知道为什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T14:36:01.577

我刚刚在 CKEditor 4 中使用了这种技术，用 2 路绑定覆盖了现有的（1 路）“html”绑定。我正在使用内联 CKEditor，它的行为可能与完整/静态编辑器不同（不确定）。我从“值”绑定开始，然后对其进行了调整以使用`innerHTML`：

```
ko.bindingHandlers.html = {
    'init': function (element, valueAccessor, allBindingsAccessor) {
        var eventsToCatch = ["blur"];
        var requestedEventsToCatch = allBindingsAccessor()["valueUpdate"];
        var valueUpdateHandler = null;

        if (requestedEventsToCatch) {
            if (typeof requestedEventsToCatch == "string")
                requestedEventsToCatch = [requestedEventsToCatch];

            ko.utils.arrayPushAll(eventsToCatch, requestedEventsToCatch);
            eventsToCatch = ko.utils.arrayGetDistinctValues(eventsToCatch);
        }

        valueUpdateHandler = function () {
            var modelValue = valueAccessor();
            var oldValue = ko.utils.unwrapObservable(modelValue);
            var elementValue = element.innerHTML;
            var valueHasChanged = (oldValue !== elementValue);

            if (valueHasChanged)
                modelValue(elementValue);
        }

        ko.utils.arrayForEach(eventsToCatch, function (eventName) {
            var handler = valueUpdateHandler;

            if (eventName.indexOf("after") == 0) {
                handler = function () {
                    setTimeout(valueUpdateHandler, 0)
                };

                eventName = eventName.substring("after".length);
            }

            ko.utils.registerEventHandler(element, eventName, handler);
        });
    },
    'update': function (element, valueAccessor) {
        var newValue = ko.utils.unwrapObservable(valueAccessor());
        var elementValue = element.innerHTML;
        var valueHasChanged = (newValue !== elementValue);

        if (valueHasChanged)
            element.innerHTML = newValue;
    }
}; 
```

警告：这可能应该更新为使用 CKEditor 自己的`change`事件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-04T18:00:14.353

我重写了这个来更新每个 keyup 上的 observable，而不是模糊。这是对 observable 的更多更新，但只要您使用按钮保存，到目前为止这似乎工作得很好！

```
//handle edits made in the editor
CKEDITOR.instances.thread_message.on('contentDom', function() {
  CKEDITOR.instances.thread_message.document.on('keyup', function(e) {

    var self = this;
    if (ko.isWriteableObservable(self)) {
      var ckValue = CKEDITOR.instances.element_id.getData();
      self(ckValue);
      //console.log("value: " + ckValue);
    }
  }, modelValue, element);
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-26T23:41:08.600

对于“模糊”部分，我尝试了下面的代码，它似乎工作

```
 editor.on('blur', function (e) {
                var self = this;
                if (ko.isWriteableObservable(self)) {
                    var ckValue = e.editor.getData();
                    self(ckValue);
                }
            }, modelValue, element); 
```

我认为如果您从其他地方“更新”可观察对象（不是通过编辑，因为这是由“模糊”处理的），仍然需要“更新”部分

# javascript - 在格式为 JSON 的 var 中获取最大值

> ID：10713156
> 
> 赞同：0
> 
> 时间：2012-05-23T03:44:36.383
> 
> 标签：javascript, json, max

我正在使用 Highcharts 在使用 Filemaker 后端的自定义 Web 发布解决方案中呈现一些图表。在尝试绘制我想要的图表的过程中，我正在通过使用数据创建一个 JSONish 对象：

```
var vSeries = [ 
            {
                "name": '2011 Q3',  
                "data": [3316,468,475,398,244,466,358,328,380,199]
            }, { 
                "name": '2011 Q4',
                "data": [3614,492,546,435,256,493,367,377,423,225]
            }, {
                "name": '2012 Q1',
                "data": [3891,544,579,489,266,512,414,384,464,239]
            }, { 
                "name": '2012 Q2',
                "data": [3807,537,550,474,255,523,389,401,441,237]
            }
            ]; 
```

我的问题是如何使用javascript获得“数据”（3891）中任何值的最大值？我确定这是某种循环，但不知道获取迭代转义数的语法，以及如何仅选择数据中的值。

感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:48:23.133

```
Array.max = function( array ){
    return Math.max.apply( Math, array );
}; 
```

请参阅此链接：[http ://ejohn.org/blog/fast-javascript-maxmin/](http://ejohn.org/blog/fast-javascript-maxmin/)

# testing - 非自动化网站稳定性测试服务

> ID：10713163
> 
> 赞同：1
> 
> 时间：2012-05-23T03:46:01.217
> 
> 标签：testing, web, cross-browser

进行了大量搜索，但仍未找到以非虚拟或自动化方式提供跨浏览器（包括 Ipad 1、2、3）的真实用户测试的站点。

我们最近有一个网站崩溃了 Ipad 1（当然是客户的 Ipad），但无法在任何在线服务中复制，所以我们现在希望将我们完成的网站发送出去并取回一份报告，表明它可以在 IE 7-10 上运行、Chrome 和所有 Ipad 代等。

有谁知道这样的服务。如前所述，它必须在实际设备上，而不是虚拟设备上。

提前致谢。

# jquery-ui-dialog - 关闭带有文本链接的 jquery ui 弹出窗口

> ID：10713167
> 
> 赞同：0
> 
> 时间：2012-05-23T03:46:38.397
> 
> 标签：jquery-ui-dialog

jquery-ui 弹出对话框有问题。如果我使用默认弹出关闭按钮关闭，则可以，但如果我使用文本链接关闭，则弹出不关闭。

```
$(document).ready(function () {
    $('a#popup').live('click', function (e) {
        var page = $(this).attr("href")
        var $dialog = $('<div></div>')

    .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"></iframe>')
    .dialog({
        autoOpen: false,
        modal: true,
        height: '500',
        width: '85%',
        title: "",

        buttons: {
            "Close": function () { 
                $dialog.dialog('close'); 
                location.reload();
             }
        },
    });
        $dialog.dialog('open');
        e.preventDefault();

    });
});

$("#close").live("click", function (e) {
   alert('hjhhh');
   $dialog.dialog('close');
});

call from html
<a id="close" href="#">close popup</a> 
```

非常感谢之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:55:24.430

`$dialog`不在`$("#close")`函数范围内。尝试`var $dialog`在`$(document).ready`函数外声明`$('a#popup')`

# python - web.py 上的 HAML/SCSS

> ID：10713169
> 
> 赞同：1
> 
> 时间：2012-05-23T03:46:47.223
> 
> 标签：python, haml, sass, web.py

我一直在研究这无济于事。有谁知道 web.py 上是否有 HAML/SCSS 支持。

它不需要是本机支持，它可以是导入以启用它的模块。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:37:16.700

就 Sass 而言，您可以使用 Ruby 的 Sass 库来处理 SCSS，然后提供 CSS 输出。如果出于某种原因不想使用 Ruby，现在还有一个[C++ 实现。](https://github.com/hcatlin/sassc)

另一种选择是使用在 Javascript 中实现的[LessCSS](http://lesscss.org/)。在开发期间，您可以将所有处理卸载到浏览器，并仅在生产中提供预编译的 CSS。我发现它是一个非常舒适的工作流程，尽管在某些方面它的实现不如 Sass 的那么完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:18:50.930

scss有[ruby​​ gem](http://sass-lang.com/)，您只需要在命令行运行它即可将 scss 编译为 css。

我在我的 webpy 应用程序中使用了许多不同的东西，包括用于 scss 和基于 nodejs 的咖啡脚本编译器的额外 compass ruby​​ gem。我有运行所有命令行实用程序的咖啡脚本蛋糕文件（将 scss 编译为 css，将咖啡编译为 js，缩小 css 和 js 文件，提取 i18n 字符串进行翻译）。

# playframework - Playframework 2.0 ClassNotFoundException

> ID：10713173
> 
> 赞同：1
> 
> 时间：2012-05-23T03:47:27.707
> 
> 标签：playframework, playframework-2.0

我使用 play 框架开发了一个 Web 应用程序。在开发过程中，我总是使用“play run”来启动服务器。

今天我尝试通过运行“play start”来启动服务器进行部署，然后出现如下错误：

```
java.lang.NoClassDefFoundError: Files
Caused by: java.lang.ClassNotFoundException: Files
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: Files.  Program will exit.
Exception in thread "main" 
```

我相信这是一个“路径中的空格”，因为“缺失的类”名称“文件”让我想起了“程序文件”。但是我的游戏被安装到了一个没有空间的目录中。此外，我能够一直运行“play run”。

我还应该寻找其他地方吗？

[更新：这里](https://stackoverflow.com/questions/10305131/running-play-framework-2-0-in-windows-got-a-noclassdeffounderror)有一个类似的问题，但该解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:45:01.390

使用 2.0.3 发出“play start”命令时遇到了同样的问题。在 2.0.4 下，我仍然遇到播放开始的问题，但正在运行

```
play run 
```

奇迹般有效。

# security - 在 EC2 中管理密钥对的最佳方法是什么？

> ID：10713175
> 
> 赞同：1
> 
> 时间：2012-05-23T03:47:38.767
> 
> 标签：security, amazon-ec2, amazon-web-services

假设您有一个由 3 名开发人员组成的团队，并且您希望他们都在同一个应用程序上工作。是否建议创建一个诸如“mycoolapp.pem”之类的密钥对，然后将其私下分发给团队成员，以便他们都使用相同的密钥登录到盒子？使用 Amazon AWS 服务在团队环境中管理密钥对的最佳实践是什么？对于可能需要访问的新团队成员，将密钥对存储在安全地方的建议方法是什么？

谢谢

# ruby-on-rails - 回滚 | 如何根据日期查找下一个和上一个

> ID：10713177
> 
> 赞同：2
> 
> 时间：2012-05-23T03:47:39.703
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试通过 slug 查找模型的 1 个实例，我可以通过

```
@project = Project.where(:slug => params[:id]).first 
```

但是，一旦我得到实例，我想从名为 publish 的列的顺序中找到模型的下一个和上一个实例，该列是一个日期。

我将如何仅按列获取任意顺序的前一个和下一个实例的 slug？

::Edit:: 将此添加到我的建模工作中。

```
def previous(offset = 0)     
  self.class.select('slug').first(:conditions => ['published < ?', self.id], :limit => 1,        :offset => offset, :order => "published DESC")
end

def next(offset = 0)
  self.class.select('slug').first(:conditions => ['published > ?', self.id], :limit => 1, :offset => offset, :order => "published ASC")
end 
```

我在[Next, Previous Records Using Named Scope找到了这个解决方案](https://stackoverflow.com/questions/2754810/next-previous-records-using-named-scope)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T03:58:42.710

假设您的`publish`日期是独一无二的，这样的事情应该可以工作：

```
@project = Project.where(:slug => params[:id]).first

@prev_project = Project.where( "publish < ?", @project.publish ).
                        order( "publish DESC" ).
                        first

@next_project = Project.where( "publish > ?", @project.publish ).
                        order( "publish" ).
                        first 
```

对于`@prev_project`该`where`子句表示之前的所有项目`@project`，`order`将它们列出在最前面（将之前的一个放在`@project`顶部）并将`first`查询限制为一个结果，即上一个项目。查询`@next_project`相同但相反。如果`publish`不是唯一的，您还必须对第二个标准进行排序。

但是，您可能需要考虑不重新发明轮子并使用非常常见的 gem [act_as_list](http://swanandp.github.com/acts_as_list/)，这将使这变得像`@project.higher_item`and一样简单`@project.lower_item`。

# tridion - 使用核心服务更新 Tridion 中的组件时出错

> ID：10713179
> 
> 赞同：2
> 
> 时间：2012-05-23T03:47:45.070
> 
> 标签：tridion

使用核心服务更新 Tridion 中的组件时出现错误

> 根元素必须在命名空间中

我的代码：

```
ComponentData  component = client.Read(webDavPath, readOptions) as ComponentData;
component = client.TryCheckOut(webDavPath, readOptions) as ComponentData;
//XDocument dom = XDocument.Parse(component.Content);
//// do your modifications to dom
//component.Content = dom.ToString();
doc.Load(filePath);
sw = new StringWriter();
xw = new XmlTextWriter(sw);
doc.WriteTo(xw);
component.Content = sw.ToString();
//client.CheckOut(webDavPath, true, readOptions);
client.Update(component, readOptions);
client.Save(component, readOptions);
client.CheckIn(component.Id, readOptions);

//client.Update(component, new ReadOptions());
// component = client.Update(component, readOptions) as ComponentData; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:55:25.643

在向组件添加新字段时，您需要指定架构命名空间。

您可以在代码中获取架构命名空间，然后在添加新字段时使用它。

您尚未显示用于更新内容的代码，因此很难在问题的上下文中向您展示，但下面的示例可能会有所帮助。（对您来说可能略有不同，因为您从现有组件开始）

```
// get namespace from component schema
SchemaData sd = client.Read(_componentSchemaTcmId, null) as SchemaData;
XNamespace ns = sd.NamespaceUri;

//create/update content
XElement contentXml = new XElement(ns + "news");
contentXml.Add(new XElement(ns + "title", "Title"));
contentXml.Add(new XElement(ns + "sub_title", "Sub Title"));

component.Content = contentXml.ToString(); 
```

另外，我认为你不需要`client.Update(component, readOptions);`两者`client.Save(component, readOptions);`

如果这没有帮助，请发布您的完整代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:42:43.920

您的架构有一些命名空间，例如这是我的架构：

```
<xsd:schema elementFormDefault="qualified" targetNamespace="uuid:ce656a4c-71e8-407f-8734-26a60da2440a" xmlns="uuid:ce656a4c-71e8-407f-8734-26a60da2440a" xmlns:tcmi="http://www.tridion.com/ContentManager/5.0/Instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<xsd:import namespace="http://www.tridion.com/ContentManager/5.0/Instance"></xsd:import>
<xsd:annotation>
    <xsd:appinfo>
        <tcm:Labels xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
            <tcm:Label ElementName="text" Metadata="false">text</tcm:Label>
        </tcm:Labels>
    </xsd:appinfo>
</xsd:annotation>
<xsd:element name="Content">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="text" minOccurs="1" maxOccurs="1" type="xsd:normalizedString">
                <xsd:annotation>
                    <xsd:appinfo>
                        <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:ExtensionXml>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

请注意`"uuid:ce656a4c-71e8-407f-8734-26a60da2440a"`，这是您的架构的名称空间。你的组件的根元素应该在同一个命名空间中，这里是相应的组件源：

```
<Content xmlns="uuid:ce656a4c-71e8-407f-8734-26a60da2440a">
    <text>Some text</text>
</Content> 
```

如果您的组件的命名空间不正确 - 您将得到与您所拥有的一样的异常。如果这不能解决您的问题，您能否发布您的架构和组件源？

# asp.net-mvc - 如何访问和绑定 Upshot 提供的实体元数据（通过客户端上的 JavaScript）？

> ID：10713185
> 
> 赞同：3
> 
> 时间：2012-05-23T03:49:01.450
> 
> 标签：asp.net-mvc, entity-framework-4, knockout.js, knockout-2.0, upshot

Upshot 的一个假定好处是它能够查询通过数据注释公开的元数据。如何访问实体属性的元数据，例如字符串长度、默认值、显示名称、描述信息以及是否需要某个字段？

如何将这些数据连接到 jQuery Validation 或 Knockout Validation 等验证框架？

注意：我目前正在使用 Knockout 2.1.0、Upshot 1.0.0.2、Entity Framework 4.3 和 ASP.NET MVC4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:30:39.813

您可以使用结果函数 metadata() 来访问此信息，例如：

如果您有以下结果注册：

```
@(Html.UpshotContext(bufferChanges: true)
    .DataSource<App.Controllers.DBController>(x => x.GetUsers())
    .ClientMapping<App.Models.User>("User")
) 
```

您可以像这样访问元数据（和验证规则）：

```
var metadata = upshot.metadata(upshot.type(User)); 
```

您还可以检索有关属性的信息（例如“名称”）：

```
var propertyType = upshot.metadata.getPropertyType(upshot.type(User), "Name"); 
```

# regex - 正则表达式匹配仅包含某些字符的整个单词

> ID：10713189
> 
> 赞同：7
> 
> 时间：2012-05-23T03:50:24.460
> 
> 标签：regex

我想匹配仅包含已定义字符的整个单词（或真正的字符串）。

例如，如果字母是`d`, `o`, `g`:

```
dog = match
god = match
ogd = match
dogs = no match (because the string also has an "s" which is not defined)
gods = no match
doog = match
gd = match 
```

在这句话中：

```
dog god ogd, dogs o 
```

...我希望匹配`dog`, `god`, and `o`（不是`ogd,`因为逗号或`dogs`由于`s`）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-23T03:56:38.617

这应该适合你

```
\b[dog]+\b(?![,]) 
```

**解释**

```
r"""
\b        # Assert position at a word boundary
[dog]     # Match a single character present in the list “dog”
   +         # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
\b        # Assert position at a word boundary
(?!       # Assert that it is impossible to match the regex below starting at this position (negative lookahead)
   [,]       # Match the character “,”
)
""" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T03:52:58.173

以下正则表达式表示您要查找的三个字符出现一次或多次：

```
[dog]+ 
```

解释：

方括号的意思是：“*任何封闭的字符*”。

加号表示：*“前一个表达式出现一次或多次*”

这将是完全相同的事情：

```
[ogd]+ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T04:41:29.570

您使用的是哪种正则表达式风格/工具？（例如 JavaScript、.NET、Notepad++ 等）如果它支持前瞻和后瞻，您可以这样做：

```
(?<!\S)[dog]+(?!\S) 
```

这样，您将只能获得位于字符串开头或前面有空格、或位于字符串末尾或后面有空格的匹配项。如果您不能使用lookbehind（例如，如果您使用JavaScript），您可以拼出前导条件：

```
(?:^|\s)([dog]+)(?!\S) 
```

在这种情况下，您将从组 #1 中检索匹配的单词。但是不要采取下一步并尝试将前瞻替换为`(?:$|\s)`. 如果你这样做了，第一个命中（“dog”）将消耗尾随空格，并且正则表达式将无法使用它来匹配下一个单词（“god”）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T03:53:28.890

根据语言，这应该做你需要做的事情。它只会与您上面所说的相符；

这个正则表达式：

```
[dog]+(?![\w,]) 
```

在一串..

```
dog god ogd, dogs o 
```

只会匹配..

```
dog, god, and o 
```

[javascript 中的示例](http://jsfiddle.net/Daedalus/NMhpZ/1/)

[php中的示例](http://ideone.com/iWgQu)

两个`[]`（括号）之间的任何内容都是一个字符类。它将匹配括号之间的任何字符。您也可以使用范围.. `[0-9]`、`[a-z]`等，但它只会匹配 1 个字符。`+`and`*`是量词。搜索`+`1 个或多个字符，而`*`搜索 0 个或多个字符。您可以使用大括号 ( `{}`) 指定明确的字符范围，在其间放置一个数字或多个数字：`{2}`将仅匹配 2 个字符，而`{1,3}`将匹配 1 或 3。

括号之间的任何内容`()`都可用于回调，例如您想要返回或使用返回的值作为字符串中的替换。这 ？！是负前瞻，它不会匹配后面的字符类，以确保字符存在时**不**匹配带有字符的字符串。

# mysql - 销毁从错误表中删除的操作

> ID：10713192
> 
> 赞同：0
> 
> 时间：2012-05-23T03:50:46.910
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

我有一个用户模型，它可以通过丰富的连接表有很多假期。我在视图上的销毁语句是从假期表中删除，而不是应该从 user_holidays 表中删除。见下文：

```
class HolidaysController < ApplicationController
  def destroy 
  @user = User.find(params[:user_id]) 
  @user_holiday = @user.holidays.find(params[:id]) 
  @user_holiday.destroy 
  redirect_to @user 
  end
end 
```

这是查看按钮：

```
<% @user.holidays.each do |hld| %>
                  <td><%= hld.name %></td>
                  <td><%= hld.date %></td>
                <td>
                    <%= button_to('Destroy', user_holiday_path(@user, hld), :method => 'delete', :class => 'btn btn-large btn-primary') %> 
```

楷模：

```
class User < ActiveRecord::Base 
has_many :user_holidays 
has_many :holidays, :through => :user_holidays

class UserHoliday < ActiveRecord::Base 
attr_accessible :holiday_id, :user_id 
belongs_to :user 
belongs_to :holiday 

class Holiday < ActiveRecord::Base 
attr_accessible :name, :date 
has_many :user_holidays 
has_many :users, :through => :user_holidays 
```

有任何想法吗？谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:19:59.620

你应该使用`@user.user_holidays`而不是`@user.holidays`

```
@user_holiday = @user.user_holidays.where(holiday_id: params[:id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:08:00.677

（我的错误没有正确阅读你的问题）

```
 @user = User.find(params[:user_id]) 
 @user.holidays.delete(@user.holidays.find(params[:id])) 
```

# jquery - 给定两个元素，将 html 包裹在异构元素周围？

> ID：10713193
> 
> 赞同：2
> 
> 时间：2012-05-23T03:50:48.877
> 
> 标签：jquery

给定两个有序但不一定是顺序的兄弟元素，我如何将 html 包裹在它们周围？

```
$(element_a).before( "<span class='wow'>" );
$(element_b).after( "</span>" ); 
```

以上不起作用，因为它为我关闭了开始标签，并且不插入后者。

（兄弟姐妹是各种各样的类型和类，所以使用 slice 来帮助完成这项任务很困难，但也许我还没有考虑清楚。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:55:12.803

```
$("<span class='wow'></span").appendTo('#container');
$(element_a, element_b).each(function() {
   $(this).clone(true).appendTo(".wow");
   $(this).remove()
}) 
```

[http://jsfiddle.net/KZtE9/1/](http://jsfiddle.net/KZtE9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:07:05.373

`element_a`如果我理解正确，您希望在和`element_b`（包括）之间的所有元素周围放置一个跨度。

一旦您弄清楚如何将所有这些元素放入单个 jQuery 对象中，该[`.wrapAll()`方法就可以很好地做到这一点，但是这样的事情应该可以工作：](http://api.jquery.com/wrapAll/)

```
var $els = $(element_a);
$els = $els.add( els.nextUntil(element_b) ).add(element_b)

$els.wrapAll("<span class='wow' />"); 
```

这从一个包含 just 的 jQuery 对象开始`element_a`，然后使用[`.add()`方法](http://api.jquery.com/add/)和[`.nextUntil()`方法](http://api.jquery.com/nextUntil/)`element_a`添加和之间的所有元素`element_b`，最后添加 in `element_b`。

# c++ - IEEE-754 浮点计算、相等和窄化

> ID：10713195
> 
> 赞同：8
> 
> 时间：2012-05-23T03:51:05.083
> 
> 标签：c++, floating-point, undefined-behavior, ieee-754

在以下代码中，函数 foo1、foo2 和 foo3 旨在等效。但是，当 run foo3 没有从循环中终止时，是否有这种情况的原因？

```
template <typename T>
T foo1()
{
   T x = T(1);
   T y = T(0);
   for (;;)
   {
      if (x == y) break;
      y = x;
      ++x;
   }
   return x;
}

template <typename T>
T foo2()
{
   T x = T(0);
   for (;;)
   {
      T y = x + T(1);
      if (!(x != y)) break;
      ++x;
   }
   return x;
}

template <typename T>
T foo3()
{
   T x = T(0);
   while (x != (x + T(1))) ++x;
   return x;
}

int main()
{
   printf("1 float:  %20.5f\n", foo1<float>());
   printf("2 float:  %20.5f\n", foo2<float>());
   printf("3 float:  %20.5f\n", foo3<float>());
   return 0;
} 
```

注意：这是使用 VS2010 在发布模式下使用 /fp 精确编译的。不确定 GCC 等将如何处理此代码，任何信息都会很棒。这可能是在 foo3 中，x 和 x+1 值以某种方式变为 NaN 的问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T06:38:16.920

发生的情况很可能如下。在 x86 架构上，可以使用 80 位精度完成中间计算（long double 是对应的 C/C++ 类型）。编译器将所有 80 位用于 (+1) 操作和 (!=) 操作，但在存储之前截断结果。

所以你的编译器真正做的是：

```
while ((long double)(x) != ((long double)(x) + (long double)(1))) {
  x = (float)((long double)(x) + (long double)(1));
} 
```

这绝对是不符合 IEEE 的，给每个人带来无尽的头痛，但这是 MSVC 的默认设置。使用`/fp:strict`编译器标志禁用此行为。

这是我大约 10 年前对这个问题的回忆，所以如果这不完全正确，请原谅我。[有关 Microsoft 官方文档，请参见此处](http://msdn.microsoft.com/en-us/library/e7s85ffb.aspx)。

**编辑**我很惊讶地得知 g++ 默认表现出完全相同的行为（在 i386 linux 上，但不是例如 -mfpmath=sse）。

# excel-2007 - 根据某些参数在excel中拆分单元格

> ID：10713196
> 
> 赞同：0
> 
> 时间：2012-05-23T03:51:05.617
> 
> 标签：excel-2007

我想知道谁可以将以下内容分成两个单元格：

如果我在一个单元格中有 C:\Pgm\Win\a1.c

我怎样才能把它分成两个单元格

```
C:\Pgm\Win       a1.c 
```

在我的 excel 中，我有大约 500 行这样的行。他们有任何可用的键吗？我正在使用 excel 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:43:02.317

通过将数据用于列 ....我们可以进入...进入多个列...但这不是 100% 的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:55:47.053

您可以使用公式进行拆分

假设第一个字符串在单元格中`A1`，请将这些公式放在
单元格中`B1`

```
=LEFT(A1,FIND("*",SUBSTITUTE(A1,"\","*",LEN(A1)-LEN(SUBSTITUTE(A1,"\",""))))-1) 
```

细胞`C1`

```
=RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,"\","*",LEN(A1)-LEN(SUBSTITUTE(A1,"\",""))))) 
```

向下复制所有数据行

计算完这些公式后，您可以复制/粘贴值并在需要时删除原始数据

# jquery - 如何在砌体布局中居中 div？

> ID：10713201
> 
> 赞同：3
> 
> 时间：2012-05-23T03:51:43.590
> 
> 标签：jquery, html, css, jquery-masonry

我到处搜索，找不到答案。

如何在砌体布局中垂直和水平居中 div？我基本上希望一切都围绕这个 div 构建。

任何帮助都会很棒！

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T17:48:16.227

当您调用 masonry 时，您可以使用 `isFitWidth: true`然后在容器上设置 margin: 0 auto 。

```
$container.masonry({
    columnWidth : 120,
    isFitWidth: true

}); 
```

在此处查看示例：**[Centered Masonry](http://desandro.github.io/masonry/demos/centered.html)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T04:01:57.573

如果它只是一个 div 你可以尝试用户

```
margin: 0 auto; 
```

用于水平居中。

垂直居中你可以试试这个：

[http://blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

# javascript - 禁用按钮

> ID：10713203
> 
> 赞同：0
> 
> 时间：2012-05-23T03:52:01.183
> 
> 标签：javascript

`li`好的，如果我在标签下的列表中有六个按钮（每个按钮`rel`都是数组的一部分），我如何在按钮执行时禁用它？（在这种情况下播放视频）

我知道这有点含糊（我没有提供代码或类似的东西），但那是因为我不知道该怎么做。如果我至少可以指出正确的方向，那将很有帮助，这样即使我无法弄清楚，至少我可以具体解决我的问题...谢谢...

**编辑**这是我现在所做的

```
<li rel='1' id="first">
    <div style="top:0px;">
      <img src="graphics/filler.png" alt="" width="280" height="128" onClick="asess"/>    
    </div>
</li> 
```

然后添加相应的功能

```
function asess() {
    document.getElementById("first").disabled = true;
} 
```

我现在还不关心重新添加该功能，因为首先我想让这部分工作。

**编辑**我有这个，应该可以工作，但我想它不是在“说话”按钮？

```
$("li, .thumbs").bind("touchstart click", function() {
var $this = $(this);
if (!document.getElementById("first").disabled) {
            document.getElementById("first").disabled = true }
            else {document.getElementById("first").disabled = false};
        }); 
```

我知道它只会与具有该 id 的按钮（第一个）对话，但只要我能让它为一个按钮工作，我就可以完成其余的工作。那么，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:13:11.547

每个按钮都有一个[onclick 事件处理程序](http://www.javascriptkit.com/javatutors/event1.shtml)。为了防止 onclick 处理程序执行任何操作，附加到处理程序的 JavaScript 方法应返回`false`. 如果您使用 jQuery 执行此操作，[`return false;`则与调用`e.preventDefault`](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)（[或`event.preventDefault`用于 IE](https://stackoverflow.com/questions/1000597/event-preventdefault-function-not-working-in-ie-any-help)）相同。

当普通事件处理程序启动与按钮关联的操作时，它应该[添加](https://stackoverflow.com/questions/6348494/addeventhandler-vs-onclick)禁用 onclick 操作的事件处理程序。

您可能还需要对按钮应用新的 CSS 样式，以便用户知道它已被禁用。

操作完成后，您需要删除禁用 onclick 操作的事件处理程序并再次使用正常操作。

您总是可以只使用一个标志来表示一个动作正在进行中，并通过这些动作打开和关闭它。如果标志打开，则事件处理程序方法返回 false。

通过使用事件处理程序，您还可以在用户尝试单击按钮时向他们显示警报，然后再返回 false。

**编辑：**

这是您需要的那种 JavaScript，第一次单击启动该过程，该过程将在五秒钟后使用`setTimeout('stopAction()', 5000);`. 如果您在此期间再次单击该项目，则会收到等待消息。

我建议你看看使用 jQuery 来开发一个健壮的跨浏览器解决方案。

```
var inProgress = false;

function asess() {
    if(inProgress) {
      alert('Please wait ...');
      return false;
    } else {
      startAction();
    }
}

function startAction() {
    inProgress = true;
    alert('Starting');
    document.getElementById("first").style.backgroundColor  = '#333333';
    setTimeout('stopAction()', 5000);
}

function stopAction() {
    inProgress = false;
    alert('Stopping');
    document.getElementById("first").style.backgroundColor  = '#FFFFFF';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:21:56.390

您可以“禁用”单击处理程序中的元素，并在成功执行回调时重新启用它。

不能保证单击处理程序绑定到具有`disabled="disabled"`属性的元素在浏览器中始终如一地实现（即事件可能/仍会触发），并且无论如何都不允许在表单元素上除外。我只想添加`class="disabled"`它，它赋予我额外的权力来设置禁用元素状态的样式，例如，将其变灰。

哦，还有 jQuery。自然地，这个逻辑可以在“普通”javascript中重现，但在库的使用上更加整洁，[小提琴](http://jsfiddle.net/ovfiddle/fDdZg/2/)：

```
$('#my-button').click(function() {
    var $this = $(this); //cache the reference
    if (!$this.hasClass('disabled')) {
        $this.addClass('disabled');
        alert('hello world!');
        setTimeout(function($btn) {
            $btn.removeClass('disabled');
        }, 5000, $this);
    } else {
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:06:02.057

`document.getElementById("my_button").disabled = true;`

当你完成时。

`document.getElementById("my_button").disabled = false;`

# drupal - Drupal：覆盖 user-profile.tpl：“打印主题（'username'，$user）；” 显示登录用户名而不是个人资料所有者

> ID：10713211
> 
> 赞同：0
> 
> 时间：2012-05-23T03:53:18.500
> 
> 标签：drupal, profile

好吧，正如标题所说，我试图在 Drupal 6 安装中覆盖整个用户配置文件模板。

这是我到目前为止所得到的：

```
<h1><?php print theme('username', $user); ?>  &nbsp;<a class="btn btn-primary btn-mini" href="/user/<?php print $user->uid;?>/edit">edit my account</a> &nbsp;<a class="btn btn-danger btn-mini" href="/user/<?php print $user->uid;?>/profile/perfil">edit my profile node</a>&nbsp;<a class="btn btn-mini" href="/logout"><b>log out</b></a></h1>
  <br><?php print $user_profile; ?> 
```

这个想法是接管配置文件以不显示任何选项卡：

用户名 [编辑帐户按钮] [编辑节点配置文件按钮] [通常在用户配置文件中的所有其他内容]

**我的问题是上面的代码显示了登录用户的用户名（和编辑按钮），而不是个人资料所有者的。** $user_profile; 工作正常，因为按钮后显示的内容是个人资料所有者的。

我应该如何扭曲它以按照我的意愿行事？

谢谢！！！

罗莎蒙达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:36:47.543

以防万一有人想知道，我刚刚能够找到答案并想分享它：

```
<?php echo $account->uid;?>
<?php echo $account->name;?> 
```

据我所知，如果您想显示登录用户，请使用 USER，当您提及帐户所有者时，您只需使用 ACCOUNT。

干杯，

罗莎蒙达

# java - 如果我将 0 传递给 random.nextInt() 会发生什么

> ID：10713216
> 
> 赞同：-3
> 
> 时间：2012-05-23T03:53:32.650
> 
> 标签：java

我正在使用 java.util.random 的 nextInt 函数来获取一个随机数，我注意到我的代码可能会将 0 传递给该函数。我想知道在这种情况下结果会是什么。我猜它每次都会简单地返回 0，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T03:56:52.210

如果您通过，它将引发运行时异常`n = 0`。

```
public int nextInt(int n) {
    if (n <= 0)
        throw new IllegalArgumentException("n must be positive");

    if ((n & -n) == n)  // i.e., n is a power of 2
        return (int)((n * (long)next(31)) >> 31);

    int bits, val;
    do {
        bits = next(31);
        val = bits % n;
    } while (bits - val + (n-1) < 0);
    return val;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T03:55:32.003

`IllegalArgumentException`如果你传入零，它会抛出一个。

从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)：

> **参数：** `n` - 要返回的随机数的界限。**必须是积极的。**
> **返回：** 来自此随机数生成器序列的 0（包括）和 n（不包括）之间的下一个伪随机、均匀分布的 int 值
> **抛出：** `IllegalArgumentException` - 如果`n`不是正数

# java - 我的休眠枚举是否正常工作/稳定设置？

> ID：10713218
> 
> 赞同：0
> 
> 时间：2012-05-23T03:54:17.450
> 
> 标签：java, hibernate

我有一些枚举属性，例如我的 User 对象：

```
@Column(name = "user_status")
private UserStatus userStatus; 
```

其中 UserStatus 是：

```
public enum UserStatus {
    NONE(0),
    MEMBER(1),
    PENDING(2);

    private long enumValue;

    UserStatus(long permissionValue) {
        this.enumValue = permissionValue;
    }

    public long getEnumValue() {
        return enumValue;
    }

    public void setEnumValue(long enumValue) {
        this.enumValue = enumValue;
    }
} 
```

在数据库（mysql）中，UserStatus 列是：

```
user_status int(11) NOT NULL 
```

我很困惑，这是如何工作的？hibernate 足够聪明来映射这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:06:12.423

JPA 规范定义了嵌入式枚举的行为，允许将它们存储为基于整数的序数或字符串表示形式。默认行为是将枚举存储为整数序数。`@Enumerated`您可以通过注释控制此行为。在您的示例中，以下内容将导致您的 JPA 提供程序在您的 DDL 中生成 varchar 类型：

```
@Column(name = "user_status")
@Enumerated(STRING)
private UserStatus userStatus; 
```

附带说明一下，在我看来，将整数序数存储在数据库中是一个可怕的想法，因为如果您重新排序/更改枚举成员，数据就会变成垃圾。

参考：[JPA 2.0 规范](http://download.oracle.com/otn-pub/jcp/persistence-2.0-fr-eval-oth-JSpec/persistence-2_0-final-spec.pdf)- 第 11.1.16 节

# jquery - 通过 jquery-ajax 在 jsp 中未收到 json

> ID：10713227
> 
> 赞同：0
> 
> 时间：2012-05-23T03:56:06.807
> 
> 标签：jquery, ajax, json, jsp, servlets

我通过 ajax 从 jsp 向 servlet 发送 2 个数据，servlet 只是获取这些数据，然后转换为 json obj 并返回该 json。现在 jsp 得到那个 json 来显示这两个数据。ajax 正在成功执行 servlet，但每次都提醒我错误而不是成功。请告诉我应该怎么做才能在警报中显示这些数据？详细信息.jsp：

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>            
    function doajax(){
        $.ajax({
            url: "AccountDetails",
            type: "post",
            dataType: "json",
            data: { "mobileNo":"01914752849", "fullName":"Md. Muzahid-ul Islam" },
            error:function(){
                alert("error occured!!!");
            },
            success:function(data){
                alert(data.fullName + "\n" + data.mobileNo);
            }
         });
      }
</script> 
```

AccountDetails.java(servlet):

```
PrintWriter out = response.getWriter();
try {
    String fullName = request.getParameter("fullName");
    String mobileNo = request.getParameter("mobileNo");
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("fullName", fullName);
    jsonObject.put("mobileNo", mobileNo);
    out.println(jsonObject);
} finally {
    out.flush();
    out.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-27T03:55:51.163

将 servlet 中的代码编辑为

```
Gson gson = new Gson();
JsonElement element = gson.toJsonTree(<Object_to_be_passed or model_class>);
out.write(element.toString()); 
```

而且你必须导入两个包`com.google.gson.Gson`和`com.google.gson.JsonElement`servlet

> 注意：尝试通过将数据包装在模型类中来转发数据

希望能帮助到你..：）

# mysql - CakePHP 动作仅在满足布尔值时发生

> ID：10713229
> 
> 赞同：1
> 
> 时间：2012-05-23T03:56:17.220
> 
> 标签：mysql, validation, cakephp

嘿，我们正在尝试验证 CakePHP 中的帐户，但前提是满足布尔值。

如果用户与其他用户有关系，则他们只能接收或发送发票。

但是我们不确定如何在 CakePHP 中做到这一点。

这是我们的伪代码，我们相信它会在普通 PHP 和 MYSQL 中完成：

```
CREATE TRIGGER invoice_insert
Before Insert ON Invoices FOR EACH ROW

BEGIN
if i.receiverid, i.senderid
where = r.partyone, r.partytwo
active = 1

SEND INVOICE

else

SEND ERROR "no relationship exists" 
```

# python - 如何在 python 中制作网站图表？

> ID：10713230
> 
> 赞同：1
> 
> 时间：2012-05-23T03:56:18.153
> 
> 标签：python, graph, python-2.7

我想制作一个 python 脚本，将其作为输入的主 url，例如： [https](https://stackoverflow.com/) ://stackoverflow.com/ 然后它遍历所有页面并制作网站所有页面（节点）的有向图及其子页面，当且仅当节点a（页面a）到节点b（页面b）存在链接时，它才具有边缘。我认为有类似的东西，但我没有在谷歌中找到......如果有任何想法，也许使用`wget`我想听的其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:51:19.637

我只会为您提供使用基本 python 构建此类工具所需的指示：

*   首先你需要[urllib](http://docs.python.org/library/urllib2.html)来打开 urls 。
*   然后，您可以使用正则[表达式](http://docs.python.org/library/re.html)或[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)在您的页面中查找链接。第一个 CPU 开销较小，但精度较低，后者是一个模糊的 HTML 解析器（意味着它接受有缺陷的 HTML）
*   然后，您可以将您的网址存储在`list`要抓取的网址中，对于您在页面中找到的每个链接，您需要检查您是否已经抓取过它（以避免无限循环），使用`set`
*   为了构建您的图表，对于您抓取的每个新页面，它都是一个新节点。您找到的每个链接都是一个新的优势。

或者，您可以使用[scrapy](http://scrapy.org/)，这是一个用于爬行的 Python 库。

# session - 使用 JMeter 记录 https 会话

> ID：10713243
> 
> 赞同：0
> 
> 时间：2012-05-23T03:58:34.533
> 
> 标签：session, jmeter

我在录制需要访问外部 https 站点（Payment Express/DPS）的会话时遇到问题。

在录制会话时，我收到了：

本网站的安全证书有问题。. . 安全证书问题可能表明试图欺骗您或拦截您发送到服务器的任何数据。
我们建议您关闭此网页，不要继续访问此网站。
单击此处关闭此网页。
继续访问此网站（不推荐）。

当我单击继续访问该网站时，我收到一个页面过期错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T21:11:51.287

查看 BlazeMeter 的 JMeter Chrome 扩展： [https ://chrome.google.com/webstore/detail/blazemeter-the-load-testi/mbopgmdnpcbohhpnfglgohlbhfongabi?hl=en](https://chrome.google.com/webstore/detail/blazemeter-the-load-testi/mbopgmdnpcbohhpnfglgohlbhfongabi?hl=en)

您仍然必须注册 BlazeMeter（JMeter 即服务），但您可以注册免费（终身）计划，并且仍然使用扩展程序将您在浏览器中所做的一切记录到 JMeter 脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:47:42.377

我最近遇到了类似的问题。

我通过取消选中“尝试 HTTPS 欺骗”来修复它。

检查您的 HTTP 代理服务器，如果已选中，请将其清除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T11:17:13.120

截至今天，Https 记录已在 Jmeter 2.9 的新版本中成功运行。我必须导入代理证书并使用 Firefox 才能使其正常工作。在此版本之前，Jmeter 具有需要检查的 https 欺骗。对于新版本，该选项已消失，它可能会立即生效。否则，您需要按照以下帖子导入证书

有关更多信息，请参阅此链接[使用 Jmeter 记录 Https](http://qtp-automate.blogspot.co.uk/2013/05/https-recording-with-new-jmeter_22.html)

# node.js - 节点 REPL eval 回调

> ID：10713247
> 
> 赞同：1
> 
> 时间：2012-05-23T03:58:47.477
> 
> 标签：node.js, read-eval-print-loop

我有一个小型示例程序[http://pastebin.com/5gFkaPgg](http://pastebin.com/5gFkaPgg)通过 TCP 向客户端提供 REPL。根据文档[http://nodejs.org/api/repl.html](http://nodejs.org/api/repl.html)我正确设置了 eval 函数（第 11-13 行），但回调对象不是函数。我在文档中误解了什么？

```
 callback(null,result);
  ^
TypeError: object is not a function 
```

无法回答我自己的问题...

根据[https://github.com/joyent/node/blob/master/lib/repl.js](https://github.com/joyent/node/blob/master/lib/repl.js) 签名是

```
function(code, context, file, cb) {
  //code
  cb(err, result);
} 
```

让我知道是否有更合适的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:14:46.737

错误和签名告诉我回调是作为它的参数给出的，`(code, context, file, cb)`但作为它的参数是预期的`(code, cb)`，因此`context`被绑定到`cb`并且`context`不是一个函数，所以产生了错误。

您需要做的是将回调的参数列表更改`repl.start`为：

```
function(cmd, context, file, callback) { 
```

或使用常见的：

```
function(cmd) {
  var callback = arguments[arguments.length-1]; // get the last argument 
```

带有第二个选项的代码，因为它没有引入新名称：

```
var net = require('net');
var repl = require('repl');

function main() {
  var clients = [];

  net.createServer(function(socket) {
    clients.push(socket);

    repl.start(">", socket, function(cmd) {
      var callback = arguments[arguments.length-1];
      var result = cmd;

      callback(null,result);
    });
    socket.on('end',function() {
      clients.splice(clients.indexOf(socket));
    });
  }).listen(8000);
}

main(); 
```

# python - 如何生成有条件的随机数

> ID：10713250
> 
> 赞同：2
> 
> 时间：2012-05-23T03:58:56.267
> 
> 标签：python, algorithm

我想在 [1,n] 范围内生成 2n-1 个随机整数，每个元素出现两次，但随机值仅出现一次。
例如：

```
n = 3  
seq = [1, 2, 3, 1, 3] 
```

在这个例子中 2 只出现一次。

我的算法是使用字典，如下所示：

```
-------------
| 数 |次|
| 1 | 2 |
| 2 | 1 |
| 3 | 2 |

```

其中键是从 1 到 n，值表示键的出现次数。我用 2 的值填充字典，并将一个随机键的值减少到 1。

1.  有没有其他算法？
2.  如果n很大导致无法存储在内存中怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T04:08:48.853

我不确定我是否 100 确定你在追求什么，但这里是一个尝试：

```
import random as rn

x = range(3)*2 #generate a list where each number appears twice

rn.shuffle(x) #shuffle it
x.pop()       #remove one number 
```

结果：

```
>>> x
[2, 0, 2, 1, 0] #the result is a list where every number appears twice, except for
                #one number which was removed at random, also the numbers are 
                #randomly arranged 
```

编辑：

这是对非常大的 n 执行此操作的尝试（该大小的列表无法存储在您的 ram 中的 n）。我看不到如何洗牌整数。但是，我可以随机删除一个。假设您要将列表写入 txt 文件。

```
drop = rn.range(0,n) #choose a random integer to drop

with open('my_file.txt','w') as f:
    for ind,ele in enumerate(xrange(n)):  
        if ind == drop: #do not write the element to txt file
            pass
        else:
            f.write(str(ele) + '\n') #write every except for one element to txt file

with open('my_file.txt','a') as f:
    for ele in xrange(n):
        f.write(str(ele) + '\n') # write every element to txt file 
```

最后，我们将 n-1 个元素写入 txt 文件两次，一次写入 1 个元素，该元素是随机选择的。

对于 n = 5，txt 文件如下所示：

```
0
2
3
4
0
1
2
3
4 
```

在上述情况下，1 只出现一次，每隔一个数字出现两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:15:55.323

与@Akavall 一样，不确定我是否理解正确。您想生成 2n-1 个在 1 到 n 范围内的数字（包括我假设的 n）。那么这些数字并不是真正随机的，只有出现 1 次的数字。

```
import random

n=3

# Generate n numbers
numbers = [i for i in range(1,n+1)]
# Concatenate list to itself (now have 2n numbers)
numbers *= 2
# Remove a random element in the list (now have 2n-1 numbers)
numbers.pop( random.randint(0, len(numbers)-1) )

# Print results
from collections import Counter
print( Counter(numbers) ) 
```

输出

```
Counter({1: 2, 3: 2, 2: 1}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:20:27.083

> 2․ 如果n很大导致无法存储在内存中怎么办？

取决于您想对这些数字做什么以及顺序是否重要。从您呈现表格的方式来看，我会说您不关心顺序，因此即使使用很大`n`，编码整个表格所需的实际信息量也非常少：`n`它本身和只有一个的索引入口。

如果您认为内存将成为问题，那么完全改变您的方法可能会更好，但如果没有更多信息，很难说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T04:20:54.867

1）我建议使用随机数生成器来选择您的“单个”数字，然后我将使用构建所有数字的集合，然后使用内置的随机播放方法。我推荐使用内置 shuffle 方法，因为内置方法往往是高度优化的。

*   Java 集合参考： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)
*   Java shuffle 参考： [http](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle(java.util.List) ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle(java.util.List )

2）如果 n 非常大，那么您可能希望将数字块写入文件并在任何给定时间仅对部分进行改组。一个类比是试图同时洗牌 5 副牌。这充其量是非常困难的，但是您可以取大集合的一部分并将这些部分混在一起，将这些部分返回到大集合中，然后再选择两个部分进行混洗，重复直到满足您想要的混洗要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T04:53:15.883

结果频率表的生成器，这应该有助于解决内存问题

```
from random import randint

def generate_counts(n):
    remove_index = randint(1,n+1)
    return ((i+1,2-(remove_index==i)) for i in range(n)) 
```

输出

```
for number, frequency in generate_counts(10):
    print "%i: %i"%(number,frequency)

1: 2
2: 2
3: 2
4: 1
5: 2
6: 2
7: 2
8: 2
9: 2
10: 2 
```

# javascript - 调用函数时出现“未捕获的类型错误：对象不是函数”

> ID：10713258
> 
> 赞同：2
> 
> 时间：2012-05-23T04:00:43.687
> 
> 标签：javascript, jquery, wordpress

我的代码出现了这个奇怪的错误。我正在尝试通过添加特定触发器来解决 [用于] 在 Chrome 中工作但不能在 IE 中工作的页面（惊喜），但现在我`Uncaught TypeError: object is not a function`在 Chrome 的控制台中收到错误。

据我所知，这是一个功能（正在进行中）：

```
<script type="text/javascript">
    function validate() {                
            var id = jQuery("form").attr('id');
            var formid = "#"+id;
            jQuery(formid).add("<input type=\"hidden\" name=\"APC_UPLOAD_PROGRESS\" value=\""+id+"\" />");
            jQuery("#validate").hide();
            jQuery("#submitme").show();
    }
</script> 
```

它被以下代码调用：

```
<button id="validate" onClick="validate()" type="button">Validate</button> 
```

我没有使用`<input type="submit>`，因为我有额外的表单提交 JS 来运行。

因此，当我单击按钮时，页面什么也不做，并且在控制台中出现名义上的错误。

我尝试使用`jQuery.fn.validate = function(){};`但无济于事。

为了让这更有趣，该网站是 Wordpress，这个特定的页面加载 jQuery 和 MooTools 以及直接的 JS。

简而言之; 我犯了什么愚蠢的小错误？谷歌上的所有搜索都是多年前的，并且是由我认为是类的东西生成的。

**更新**

控制台说这一行是错误

```
<button id="validate" onClick="validate()" type="button">Validate</button> 
```

**更新 2**

Pastbin 链接到表单代码[http://pastebin.com/3Kw5vdhn](http://pastebin.com/3Kw5vdhn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:29:21.390

在 Chrome 浏览器中，您可以要求 JS 执行在异常时停止。要启用它，请打开 JS 控制台并单击主面板和控制台之间胡须左侧的小图标。如果图标为蓝色，您将停止对所有异常的执行，如果图标为红色，则仅在未捕获的异常上，如果它为灰色，则根本不停止。

因此，单击直到它变为红色以停止未捕获的异常。运行您的网页，执行应在引发异常时完全停止。然后您可以检查 validate 变量的值。

我怀疑这是您的代码与您正在加载的其他代码之间的某种全局变量冲突。要快速检查，请将 validate 重命名为 QQvalidate 并尝试您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:29:45.640

嗨 Joshua，我尝试在我的 PC 上运行相同的代码并且它运行良好，检查您的参考资料（jQuery 源文件等）。

# c# - Internet Explorer - 通过客户端 Java 或 C# 代码设置会话 Cookie 来指定 JSessionID

> ID：10713259
> 
> 赞同：0
> 
> 时间：2012-05-23T04:01:02.957
> 
> 标签：c#, java, internet-explorer, session, jsessionid

在我的代码中，我有一个 JSessionID，我想与一个 IE 实例共享它。

我可以启动一个 IE 实例，但是我需要为浏览器指定 JSessionID。应用程序服务器将是 JBoss、WebSphere 或 WebLogic，因此我正在寻找一种通过会话 cookie 设置值的解决方案（通过本地 java 或 C# 代码，而不是基于服务器的代码）。

请注意，通过 url 或服务器设置 JSessionID 对我的方案没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:21:35.533

使用 IE 自动化设置 document.cookie。

以下是相关问题 - [https://stackoverflow.com/search?q=%5Binternet-explorer%5D+automation](https://stackoverflow.com/search?q=%5Binternet-explorer%5D+automation)和示例[http://www.c-sharpcorner.com/UploadFile/gcorrell/IEInstance12062005003909AM/IEInstance.aspx](http://www.c-sharpcorner.com/UploadFile/gcorrell/IEInstance12062005003909AM/IEInstance.aspx)。一些文档链接 - [IWebBrowserApp](http://msdn.microsoft.com/en-us/library/aa752127(v=VS.85).aspx)和[Document.cookie](http://msdn.microsoft.com/en-us/library/ms533693(v=vs.85).aspx)。

```
SHDocVw.InternetExplorer ie = new SHDocVw.InternetExplorerClass();
IWebBrowserApp wb = (IWebBrowserApp) ie;
wb.Visible = true;
//Do anything else with the window here that you wish
wb.Navigate(url, ref o, ref o, ref o, ref o);
// add code to wait for navigation to complete... 
// i.e. by waiting for NavigateComplete2  event, or simply sleep...
wb.Document.cookie="...."; 
```

# php - 在本地计算机上托管网站

> ID：10713260
> 
> 赞同：0
> 
> 时间：2012-05-23T04:01:16.877
> 
> 标签：php, apache, codeigniter, mobile

我是一名网络开发人员。我想测试我的网站如何在手机和电脑上运行。我正在使用 xampp 和 codeigniter。

我创建了一个虚拟服务器，例如：rssfeed.local。它在我的电脑上正常工作。但是我希望当我在我的 Ipod 的 safari 中输入上面的 url 时，它也可以工作。

所以我将我的电脑的IP更改为静态IP。例如：192.168.1.100 ipod 会理解并在我的电脑上访问该网站。但是当我输入 rssfeed.local 时，ipod 不理解。

你能告诉我如何为此目的配置apache吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:17:37.583

您在这里有 4 个选项：

1.  您需要有一个服务器，您可以通过您的 iphone 和您的网站连接到该服务器并配置 DNS。

2.  您需要一个路由器，您可以在其中配置 DNS 设置，将内部 IP 地址连接到 DNS。

3.  在你的 iPhone 上编辑 hosts 文件，为此你需要越狱它。

4.  使用一些软件作为代理工具，该工具可以将 url 转换为内部 ip 地址。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-23T09:52:07.020

您可以尝试更改您的 HOSTS 文件，它在 c:\windows\system32\drivers\etc 中的位置在下面的文档中添加一个类似“rssfeed.local 192.168.1.100”的项目。好，工作完成。

# validation - Upshot/Knockout Architectural Best Practices - 哪个客户端验证库应该与 Knockout 和 Upshot 一起使用？

> ID：10713261
> 
> 赞同：0
> 
> 时间：2012-05-23T04:01:34.330
> 
> 标签：validation, jquery-validate, knockout.js, upshot

至少有三个可能的验证库可以很好地与 Knockout 配合使用。这些包括：

*   jQuery 验证（jQuery 插件）
*   Knockout.Validation [Knockout 插件] (https://github.com/ericmbarnard/Knockout-Validation)
*   Knock-Knock 验证 [Knockout 插件] (https://github.com/Enome/knockknock)

假设，使用标准 jQuery 验证需要在所有表单输入字段上绑定“uniqueName”。Knockout 通常不需要这个，因此除非请求（通过绑定），否则不会提供它。

有两个贡献的 Knockout 验证插件。这些是 Knockout.Validation 和 Knock-Knock 验证。我注意到 Knockout.Validation 最近更新了，但是 Knock-Knock 验证在大约一年内没有更新。

我的假设可能是标准的 jQuery 验证或 Knock-Knock 验证可能是与 Knockout 和 Upshot 一起使用的首选标准。

是否有人将这两个验证插件中的任何一个与 Upshot 及其从服务器公开的实体元数据结合使用？

如果是这样，您能否告诉我建议将两者中的哪一个用于一般用途，并可能提供一些有关其实施的提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:16:53.513

如果您的问题是验证，我认为这可能对您有好处。

[http://www.asp.net/single-page-application/spa-samples/samples-a-tour-through-spa/scenario-four-update-multiple-entities](http://www.asp.net/single-page-application/spa-samples/samples-a-tour-through-spa/scenario-four-update-multiple-entities)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:24:17.457

在我当前的项目中，我使用的是 Knockout.Validation 插件。我发现它几乎在所有方面都优于 Knock-Knock。它支持我能想象到的所有用例。我没有专门将它与结果一起使用，但这是我使用淘汰赛 js 进行验证的图书馆。

不鼓励使用 jQuery 验证，因为视图模型中的手动 DOM 操作不符合 MVVM 的精神，并且可以说违背了目的 - 重点是从 DOM 中抽象出来并根据 VM 进行思考

# c# - 将子级添加到 Treeview C#

> ID：10713265
> 
> 赞同：1
> 
> 时间：2012-05-23T04:01:52.080
> 
> 标签：c#, visual-studio-2010, treeview, treenode

我正在尝试在 C# 中填充树视图。我可以成功填充第一层，但是我无法添加孩子。最后两行代码是我目前尝试过的。但是在运行时给出了相同的错误：“对象引用未设置为对象实例”

```
for (int index = 0; index < jobArray.Length; index++)
        {
            TreeNode newNode = new TreeNode();
            newNode.Text = jobArray[index].name;
            newNode.Tag = jobArray[index];
            treeView1.Nodes.Add(newNode);
            foreach(Truss t in jobArray[index].trusses)
            {
                TreeNode newNode1 = new TreeNode();
                newNode1.Text = t.name;
                newNode1.Tag =  t;
                treeView1.Nodes[0].FirstNode.Nodes.Add(newNode1);
               // treeView1.SelectedNode.Nodes.Add(newNode1);
            }
        } 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:07:39.493

替换`treeView1.Nodes[0].FirstNode.Nodes.Add(newNode1);`为：

```
newNode.Nodes.Add(newNode1); 
```

# java - 禁用仪器库

> ID：10713268
> 
> 赞同：3
> 
> 时间：2012-05-23T04:02:12.033
> 
> 标签：java, instrumentation

是否可以在 Java 应用程序中禁用检测库，或者检查当前是否正在运行？

出于安全原因，我的目标是防止用户在我的应用程序上运行检测实现。

经过一些实验，我自己提出了一个理论解决方案，其中我发现`java.class.path`系统属性在路径分隔符之后以 -javaagent VM 参数 jar 文件的路径结尾。从这个属性中，我可以检查一个类路径属性是否是我的程序本身未指定的外部 jar，如果检测到外来 jar，则终止我的应用程序。

但是，上面的方法对我来说似乎有些 hacky，但我还没有找到直接阻止 -javaagent 参数的方法，也没有找到检测仪器代理库的简单方法。这些更清洁的替代品中的任何一种都可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-07T06:51:52.150

Java 代理也可以在运行时加载：

```
vm = com.sun.tools.attach.VirtualMachine.attach(pid);
agent = new File("agent.jar");
vm.loadAgent(agent.toString());
vm.detach(); 
```

我认为您的代码在这种情况下不起作用。
可以像这样检查是否允许附加：

```
SecurityManager sm = System.getSecurityManager();
if (sm != null)
    sm.checkPermission(new AttachPermission("attachVirtualMachine")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T04:52:58.430

在做了更多研究之后，几天前我在编写了一个临时的类路径属性分析器后找到了一个可靠的解决方案。

我使用 RuntimeMXBean 获取 VM 参数，然后检查 -javaagent: 参数。

```
RuntimeMXBean RuntimemxBean = ManagementFactory.getRuntimeMXBean();
List<String> args = RuntimemxBean.getInputArguments();
for (String arg : args) {
    if (arg.contains("-javaagent:")) {
        // block application from running
    }
} 
```

# recursion - 蛮力算法不会正确屈服；否则工作正常

> ID：10713280
> 
> 赞同：1
> 
> 时间：2012-05-23T04:03:56.367
> 
> 标签：recursion, python-3.x, yield, brute-force

我正在尝试找到一种方法来编写一个固定长度（目前）的蛮力生成器，我可以像这样最好地激活它。

```
for i in FixedLength('abc', 3):
    print(i); 
```

i 的值不应该是生成器。这就是我所拥有的：

```
import sys;
class FixedLength:  
    def __init__(self, charset, length, code_page=sys.getdefaultencoding())
        self.length=length;
        self.code_page=code_page;
        #basically
        self.charset=bytes(charset, code_page);
        self.retval=[charset[0]]*length;

    def __iter__(self):
        return self;

    def __next__(self):
        #problem line 1
        self.recurse(0);
        raise StopIteration;

    def recurse(self, recursion_level):
        if recursion_level==self.length-1:
            for char in self.charset:
                self.retval[recursion_level]=char;
                if self.validate():
                    #problem line 2
                    yield self.output();
        else:
            for char in self.charset:
                self.retval[recursion_level]=char;
                self.recurse(recursion_level+1);
    def validate(self):
        return True;
    def output(self):
        return bytes(self.retval).decode(self.code_page); 
```

我知道它会打印输出（来自问题第 2 行）就好了，但我不能让它产生相同的信息。屈服问题线 1 将生成器封装在生成器中。返回问题行 1 将不起作用，因为它不会引发 StopIteration 错误。但除此之外，它似乎并没有真正递归。虽然，它确实多次调用 self.recurse，但递归级别保持在 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:42:30.080

你`recurse`是一个生成器函数。调用时，它会产生一个序列。如果您`__next__`想返回序列的下一个值，它必须从以下获取下一个值`recurse`：

```
def __next__(self):
    next(self.recurse(0)) 
```

内置`next()`也会引发`StopIteration`异常。

但是，设计有点混乱。它将生成器与您实现类似的尝试混合在一起。换句话说，您将一个生成器包装到另一个生成器中。或者，您正在递归地实现迭代器，这很奇怪。或者我很困惑。目的是什么？它可能可以以更简单的方式实现。

# android - Android：如何删除SD卡中的文件夹

> ID：10713285
> 
> 赞同：3
> 
> 时间：2012-05-23T04:05:27.870
> 
> 标签：android

我的应用程序在 sdcard 中创建了一个文件夹。我想***在应用程序正在卸载*** 或***通知应用程序被卸载时***删除该文件夹。反正是做得到吗？？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:29:05.317

使用 getExternalFilesDir() 获取 SDCard 上的目录，当您的应用程序被卸载时，该目录将被删除。

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:37:49.460

目前，Android 不允许您在卸载应用程序时执行代码。

通过 SharedPreferences 设置的所有设置连同 Aplication Data an Cache 文件夹中的所有内容都将被删除。

唯一会保留的是写入 SD 卡的数据以及对手机设置所做的任何更改。

# c++ - 管道输出后出现的^@符号（C++）

> ID：10713287
> 
> 赞同：1
> 
> 时间：2012-05-23T04:05:40.380
> 
> 标签：c++, pipe, lcs

因此，我在 C++ 中为算法介绍书 (CLRS) 实现了最长公共子序列算法，它工作得很好，有点。当我做这样的事情时：

`./lcs abc bc > OUTPUT`

当我在 中打开`OUTPUT`文件时`vim`，我看到：

`2 bc^@`

这是正确的，没有那个奇怪的`^@`符号。我做了一些谷歌搜索，这似乎是某种`NULL`角色？

我以前从未遇到过这个问题..有人知道如何摆脱它吗？

谢谢！-kstruct

*编辑* 这是执行打印的代码：

```
cout << lcsLength << " ";
    if (lcsLength > 0) cout << lcsString;

return 0; 
```

`lcsString`一个在哪里`std::string`。不确定这是否有帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:16:00.863

那是`NUL`（这是一个*字符*值，并且被定义为全位为零），而不是`NULL`（这是一个*指针*，几乎总是全位为零，但不是必须的）。

我们需要查看您的代码才能确定，但​​最可能的原因是您打印的 C 字符串的一个字节（它始终`NUL`作为最后一个字节）比您应该打印的多一个字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T04:47:04.807

您已经展示了输出 lcsString 的代码，但与 C 样式字符串不同，`std::string`类型可以包含空字符，因为长度与字符串数据本身分开维护。

尝试添加以下内容以转储字符串的内容：

```
cout << "length of lcsString: " << lcsString.length() << endl;
cout << '"' << lcsString << '"' << endl;
for (int i = 0; i < lcsString.length(); ++i) {
    cout << hex <<  int(lcsString[i]) << " ";
}
cout << endl; 
```

我打赌你会看到：

```
length of lcsString: 3
"bc "
62 63 0 
```

然后你需要找出你正在做什么来创建（或修改）`lcsString`它在最后包含一个空字符。

# iphone - 点击搜索按钮触发什么事件？

> ID：10713291
> 
> 赞同：0
> 
> 时间：2012-05-23T04:06:03.473
> 
> 标签：iphone

当我点击键盘显示 UISearchDisplayController 上的搜索按钮时，它会触发什么事件？

没有任何事件被触发

```
- (void) searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller;
{

}
- (void) searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller;
{

}
- (void) searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller;
{

}
- (void) searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller;
{

}
// called when the table is created destroyed, shown or hidden. configure as necessary.
- (void)searchDisplayController:(UISearchDisplayController *)controller didLoadSearchResultsTableView:(UITableView *)tableView;
{

}
- (void)searchDisplayController:(UISearchDisplayController *)controller willUnloadSearchResultsTableView:(UITableView *)tableView;
{

}

// called when table is shown/hidden
- (void)searchDisplayController:(UISearchDisplayController *)controller willShowSearchResultsTableView:(UITableView *)tableView;
{

}
- (void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView;
{

}
- (void)searchDisplayController:(UISearchDisplayController *)controller willHideSearchResultsTableView:(UITableView *)tableView;
{

}
- (void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView;
{

} 
```

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:02:03.790

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar;                     // called when keyboard search button pressed
{

} 
```

它需要使用 UISearchbar 的功能而不是 UISearchDisplayController

# c# - 如何使用aspx C#上传后自动播放视频

> ID：10713292
> 
> 赞同：0
> 
> 时间：2012-05-23T04:06:11.800
> 
> 标签：c#, asp.net, asp.net-ajax

我只试过这个简单的上传

默认.aspx：

```
<AjaxControlToolkit:AsyncFileUpload ID="AsyncFileUpload1" runat="server" CompleteBackColor="White" 
OnUploadedComplete="AsyncFileUpload1_UploadedComplete" OnUploadedFileError="AsyncFileUpload1_UploadedFileError" 
OnClientUploadComplete="Success" OnClientUploadError="Error" /> 
    <br />
<asp:Button runat="server" ID="btnUpload" Text="Upload" Width="84px"/>
<asp:Label ID="Label1" runat="server"></asp:Label> 
```

默认.aspx.cs：

```
protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    //Fired on the server side when the file successfully uploaded 
    if (AsyncFileUpload1.HasFile)
    {
        AsyncFileUpload1.SaveAs(@"C:\Images\" + AsyncFileUpload1.FileName);
        Label1.Text = "Received " + AsyncFileUpload1.FileName + " Content Type " + AsyncFileUpload1.PostedFile.ContentType;
    }

}

protected void AsyncFileUpload1_UploadedFileError(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    Label1.Text = "Error!!";
    //Fired on the server side when the loaded file is corrupted 

    //Display some error message here 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:53:44.740

匿名者，

如果您仍然遇到此问题，请尝试以下代码...

在 aspx 中：

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<div>
    <asp:AsyncFileUpload ID="AsyncFileUpload1" runat="server" CompleteBackColor="White"
        OnUploadedComplete="AsyncFileUpload1_UploadedComplete" OnUploadedFileError="AsyncFileUpload1_UploadedFileError"
        OnClientUploadComplete="Success" OnClientUploadError="Error" />
</div>
<div>
    <asp:Button runat="server" ID="btnUpload" Text="Upload" Width="84px" OnClick="btnUpload_Click" />
    <asp:Label ID="Label1" runat="server"></asp:Label>
</div>

<div>
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <div>
                <!--STYLE SELECTOR-->
                <div>
                    <h3>
                        VMB Explaining the stage
                    </h3>
                </div>
            </div>
            <!-- MEDIA PLAYER -->
            <sil:MediaPlayer ID="MediaPlayer1" runat="server" Width="600" Height="440" />
        </ContentTemplate>
    </asp:UpdatePanel>
</div>
</form> 
```

还注册程序集

```
 <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
 <%@ Register Assembly="System.Web.Silverlight" Namespace="System.Web.UI.SilverlightControls" TagPrefix="sil" %> // Video Player 
```

在 aspx.cs 中

```
protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    //Fired on the server side when the file successfully uploaded 
    if (AsyncFileUpload1.HasFile)
    {            
        _strFilePath = AppDomain.CurrentDomain.BaseDirectory + "Uploads\\" + AsyncFileUpload1.FileName;
        AsyncFileUpload1.SaveAs(_strFilePath);
        Label1.Text = "Received " + AsyncFileUpload1.FileName + " Content Type " + AsyncFileUpload1.PostedFile.ContentType;
        PlayUploadedFile();
    }

}

private void PlayUploadedFile()
{
    //Here is my Code

    #region Media Player initial settings
    MediaPlayer1.AutoPlay = true;
    MediaPlayer1.ScaleMode = System.Web.UI.SilverlightControls.ScaleMode.Zoom;
    MediaPlayer1.MediaSource = _strFilePath;
    MediaPlayer1.MediaSkinSource = "~/skin/Custom.xaml";
    #endregion

}

protected void AsyncFileUpload1_UploadedFileError(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    Label1.Text = "Error!!";
    //Fired on the server side when the loaded file is corrupted 

    //Display some error message here 
} 
```

[对于视频播放器，您最初必须对此进行调查](http://silverlight30.codeplex.com/)

您需要参考 SilverlightApplication.Web.dll 和 System.Web.Silverlight.dll

就这样。

希望这将彻底解决您的问题:)

# java - Java 数组：将对象添加到数组但为空。如何修改？

> ID：10713294
> 
> 赞同：0
> 
> 时间：2012-05-23T04:06:14.953
> 
> 标签：java, arrays

为此，我正在运行 BlueJ 做面向对象的 java 并且我有 JVM 7.1 处于活动状态......

好的，所以我必须申请我的学位，但我遇到了麻烦。我很感谢“老师”让我使用我的三阵列系统，因为迭代器弄乱了我的单阵列系统。

遗憾的是，我无法在互联网上找到任何可以帮助解决我的问题的东西......

基本上当我去向数组添加一个“学生”时，该对象在所有字段中都是空的。我不知道如何修改它们。

我的数组使用菱形符号。类似于以下内容：

```
private ArrayList<Student> students; 
```

这是我目前使用的数组形式，还有 2 个数组。

```
private ArrayList<CollegeEmployee> staff;
private ArrayList<Faculty> members; 
```

有人建议我使用单个数组，但如上所述，迭代器把它搞砸了，只要我能修复它，我不在乎我有多少个数组，哈哈。

该程序在一个 while 循环内运行，并提示用户为某个命令输入一个字母。当用户输入“s”时，然后将一个学生添加到数组中，这就是问题所在。对象被赋予空值，我不知道如何修改它们...以下是调用对象构造函数

```
private void addStudent()
{
    Student b = new Student(firstName, lastName, address, postCode, phoneNumber, gradePointAvg, selectedCourse);
students.add(b);
} 
```

当用户退出程序时打印数组时，我从终端窗口得到以下输入：

空，空，空，0，0 0 空

我的问题是：我如何给对象 b 值以覆盖空值。顺便说一句，这些值必须由用户输入，而不是在数组的声明中预先设置。

感谢您的时间 ：）

这东西让我讨厌代码 xD

编辑：

这是学生类的构造函数和字段：

```
 private String title;
        public double gradePointAvg;
        public String selectedCourse;

        /**
         * Constructor for objects of class Student
         */
        public Student(String firstName, String lastName, String address, int postCode, int phoneNumber, double gradePointAvg, String selectedCourse)
        {
            super(firstName, lastName, address, postCode, phoneNumber);
            this.title = title;
            this.gradePointAvg = gradePointAvg;
            this.selectedCourse = selectedCourse;
        } 
```

人超类构造函数：

```
public String firstName;
public String lastName;
public String address;
public int postCode;
public int phoneNumber;

 /**
 * Constructor for objects of class Person
 */
public Person(String firstName, String lastName, String address, int postCode, int phoneNumber)
{
    // initialise fields
    this.firstName = firstName;
    this.lastName = lastName;
    this.address = address;
    this.postCode = postCode;
    this.phoneNumber = phoneNumber;
} 
```

上面的方法，addStudent 调用 student 构造函数，然后调用 person 构造函数。是的，它确实必须像这样，因为它是项目的限制。

我暂时公开了我的字段，因为它们被设置为受保护，因为私有是本地范围。

非常感谢你们检查我的代码..我希望我的老师更好>.<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:11:13.483

你初始化你的ArrayList了吗？

```
 private ArrayList<Student> students;
 students = new ArrayList<Student>(); 
```

别的

```
private ArrayList<Student> students = new ArrayList<Student>(); 
```

如果未初始化，它将返回空值，您将获得空指针异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:12:53.700

在您的 Student 类`firstName, lastName, address,selectedCourse`中`String`，Java 将初始化实例变量，这些实例变量是 Objects（在您的情况下为 String）`null`，对于您的其他字段，即`postCode, phoneNumber`我认为`int`默认值为 0。

当您在`addStudent`方法中检查用于构造对象的值时，似乎所有字符串都是 null 并且 int 未初始化。

```
Student b = new Student(firstName, lastName, address, postCode, phoneNumber, gradePointAvg, selectedCourse); 
```

执行上面的代码时，我认为 firstName、lastName 等参数都没有任何值，这就是它显示 null 的原因。

在将新`Student`对象添加到列表之前`students`，提示您的用户为`firstName, lastName, address`etc 提供值，然后使用这些值来构造您的`Student`对象。

更新示例代码：

学生班级：

```
package com.mumz.test.scanner;

public class Student {
    private String firstName = null;
    private String lastName = null;
    /**
     * @param firstName
     * @param lastName
     */
    public Student(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }
    /**
     * @return the firstName
     */
    public String getFirstName() {
        return firstName;
    }
    /**
     * @param firstName the firstName to set
     */
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    /**
     * @return the lastName
     */
    public String getLastName() {
        return lastName;
    }
    /**
     * @param lastName the lastName to set
     */
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return String.format("Student [firstName=%s, lastName=%s]", firstName, lastName);
    }
} 
```

主要班

```
package com.mumz.test.scanner;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class StudentScannerApp {
    private List<Student> students = new ArrayList<Student>();
    public static void main(String[] args) {

        StudentScannerApp studentScannerApp = new StudentScannerApp();
        //This scanner we will use for reading data from input stream
        Scanner inputStream = new Scanner(System.in);

        System.out.println("Enter First Name");
        String firstName = inputStream.nextLine();
        System.out.println("Enter Last Name");
        String lastName = inputStream.nextLine();
        studentScannerApp.addStudent(firstName, lastName);

        System.out.println("Enter Another student details");
        System.out.println("Enter First Name");
        firstName = inputStream.nextLine();
        System.out.println("Enter Last Name");
        lastName = inputStream.nextLine();
        studentScannerApp.addStudent(firstName, lastName);

        System.out.println(studentScannerApp.students);
    }

    private void addStudent(String firstName, String lastName){
        Student student = new Student(firstName, lastName);
        students.add(student);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:39:01.150

我想学生扩展人，不是吗？

那么你的构造函数应该是这样的

```
public Student(String firstName, String lastName, String address, int postCode, int phoneNumber){
    super(firstName, lastName, address, postCode, phoneNumber);
    //Do whatever stuff Students do and normal Persons do not do.
} 
```

并且您的 addStudent 方法应该以这种方式添加学生：

```
private void addStudent(Student student){
    students.add(student);
} 
```

（无论如何，将其设为私有并没有多大意义，但我想您仍在学习）

所以，当你想创建和添加一个新学生时，你只需这样做（当然，你可以这样做，但如果你不想在你的数组中有大量名为 John Smith 的学生，你真的应该使用变量)

```
Student student = new Student("John", "Smith", "Fake Street", 123, 12345, 5555555);
students.add(student); 
```

# sql-server-2008 - SQL Server 2008：UTF8 SQL 文件注释显示为垃圾

> ID：10713295
> 
> 赞同：0
> 
> 时间：2012-05-23T04:06:35.263
> 
> 标签：sql-server-2008, utf-8

我正在使用 Microsoft SQL Server 2008。我是这个项目的新手，应该学习已经编写的存储过程，为当前版本修改它们并跟踪这些更改。

为了跟踪更改，我为每个版本创建一个目录，并使用带有签名的 UTF-8 编码保存我的存储过程 SQL 文件。这些文件中的大多数都有注释——有些是法语的。

问题是当我在 SQL Server Management Studio 中打开这些文件时，一些注释显示为垃圾，而不是处理存储过程，我需要花时间恢复注释。

是否有任何简单/推荐的方法来使用 UTF8 在存储过程中保存文档？

谢谢

# iphone - 数据成员的动态生成

> ID：10713300
> 
> 赞同：2
> 
> 时间：2012-05-23T04:07:06.140
> 
> 标签：iphone, objective-c, ipad

我制作了一个应用程序，它可以独立于标签解析给定的 xml 文件。它适用于列表单级 xml 文件。我想在对象上分配 xml 值。由于 xml 可以不同，因此类也必须是通用的，数据成员也必须是通用的。我可以通过使用数据类型 id 来实现通用数据成员。但问题是不同的 xml 可以有不同数量的数据类型。那么是否可以在运行时决定数据成员的数量？（这里我两次加载 xml 对实现我们的目标有用吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:22:04.943

[键值编码](https://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/occ/cat/NSKeyValueCoding)完全符合您的需求，如果您想要快速简单的东西，您可以使用 NSMutableDictionary。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:46:19.230

[从OP 的另一个问题](https://stackoverflow.com/questions/10717927/implementing-key-value-coding-in-objective-c)来到这里。只是为了详细说明 A-Live 的答案：

如果对象只是一个完全通用的值持有者，那么您应该只使用`NSMutableDictionary`. 没有特别需要为此使用 KVC，尽管它可以工作。

如果对象有一些固定属性加上任意数量的临时属性，或者如果它除了保存值之外还必须有一些行为，那么您可以将一个包装`NSMutableDictionary`在自定义类中。`-valueForUndefinedKey:`在这种情况下，当键不对应于类的任何正常属性时，您的自定义类将实现从字典中检索值。同样，它将实现`-setValue:forUndefinedKey:`允许通过将临时属性存储在字典中来设置它们。

一旦定义了这两个方法，类的客户端就可以使用 KVC 来获取和设置属性值，使用`-valueForKey:`and `-setValue:forKey:`。

您实现的任何“未定义键”方法都可以通过将任何和所有键传递给字典来完全允许，或者它们可以根据允许/已知属性列表检查键。该列表仍将在运行时建立，而不是在编译时固定，但是，如果您从某个地方获得该信息，它会建立一些额外的安全性。对于未知/不允许的键，只需调用 to`super`的实现。

如果您愿意，这两种方法（更可能是 setter）也可以实现与特定属性相关的行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T04:53:35.137

您可以使用[Touch XML](http://code.google.com/p/touchcode/source/browse/TouchXML/Common/Source/?r=SmallSocietyFork_20090625_1)、[TBXML](http://www.tbxml.co.uk/TBXML/Guides_-_Traversing_Unknown_elements___attributes.html)来解决您的问题。

# java - 免费定位服务 - 街道名称

> ID：10713303
> 
> 赞同：0
> 
> 时间：2012-05-23T04:07:21.613
> 
> 标签：java, javascript, geolocation

有谁知道任何免费的定位服务可以让我根据以色列的城市找到街道？我可以使用任何 java、.NET 或 javascript api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:16:07.367

如果您想在城市中*搜索*街道，[OSM Nominatim可能是您的最佳选择。](http://wiki.openstreetmap.org/wiki/Nominatim)

*nominatim.openstreetmap.org*服务器有一些限制性的使用[政策](http://wiki.openstreetmap.org/wiki/Nominatim_usage_policy)；[MapQuest 还提供](http://open.mapquestapi.com/nominatim/)没有使用限制的 Nominatim 服务。

如果您计划进行大量查询，最好[在自己的服务器上安装 Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim/Installation)，但请注意，这***不是***一项简单的任务，数据集的大小已接近 TB。

如果您要查找街道*列表*，[有几个选项](http://help.openstreetmap.org/questions/2980/how-do-i-list-all-the-streets-in-a-city-with-nominatim)。最简单的方法是使用[mapomatic](http://maposmatic.org)生成 CSV，但这是手动的，仅在您需要一两个城市时才有效。

[如果您需要多个城市，情况会更复杂：](http://help.openstreetmap.org/questions/2980/how-do-i-list-all-the-streets-in-a-city-with-nominatim/3132)

> 1.  下载 osmosis（也许还有 osmembrane，它是一个用于渗透的 beta GUI）
> 2.  下载您所在国家/地区的提取物荷兰.osm.pbf (~430MB)
> 3.  创建一个可由 osmois 解析的多边形文件（参见 osm2polygon）
> 4.  使用多边形运行 osmosis 并提取具有标签 name=* 和 Highway=residential 的所有方式
>     1.  路键名称，高速公路
>     2.  标签过滤器拒绝节点，拒绝关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:22:00.573

我不知道有任何服务可以列出特定城市的所有街道。也许您可以使用[Google Places Autocomplete API](https://developers.google.com/maps/documentation/places/autocomplete#place_autocomplete_requests)并将地点类型限制为街道（请参阅[this](https://stackoverflow.com/questions/10653023/is-there-a-way-to-restrict-the-google-places-autocomplete-to-search-a-citys-str)）。

# vb.net - vb.net 中是否有一个函数可以告诉我们 2 个字符串在 UTF8 unicode 排序规则下是否等效？

> ID：10713304
> 
> 赞同：1
> 
> 时间：2012-05-23T04:07:22.783
> 
> 标签：vb.net, utf-8, collation

这个问题类似于[How to emulate MySQLs utf8_general_ci collat​​ion in PHP string comparisons](https://stackoverflow.com/questions/8514329/how-to-emulate-mysqls-utf8-general-ci-collation-in-php-string-comparisons)但我想要 vb.net 而不是 PhP 的函数。

最近我做了很多据说是独一无二的钥匙。

一些键在 UTF8 unicode 排序规则下是等效的。

例如，看看这 2 个键：

拜尔斯街小酒馆__38.15_-79.07 拜尔斯街小酒馆__38.15_-79.07

如果我将其粘贴到首页，并查看源代码，您会看到

拜尔斯街小酒馆__38.15_-79.07

拜尔斯街小酒馆‎__38.15_-79.07

注意：在堆栈溢出中，它们看起来仍然不同。

我知道这不一样。我想即使在堆栈交换中它也不会显示。假设我有 100 万条这样的记录，我想测试 MySQL UTF8 排序规则是否将 2 个字符串声明为相同。我想在上传之前知道这一点。我怎么做。

所以 vb.net 认为这些是不同的键。当我们创建 mysql 查询并将其上传到数据库时，数据库抱怨它是同一个键。只需一个投诉，100 万个数据库的上传就会卡住。

我们甚至不知道到底是什么？无论如何，我们在哪里可以查到呢？

无论如何，我想要一个函数，当给定 2 个字符串时，它会告诉我它们是否会被视为相同。

如果可能的话，我们想要一个将字符串转换为最“标准”形式的函数。

例如，‎ 似乎什么都不编码，该函数会重新识别所有这些无字符并消除它。

有这种事吗？

到目前为止，这就是我所做的。我需要更全面的东西。

```
 Private Function StraightenQuotesReplacement() As Generic.Dictionary(Of String, String)
    Static replacement As Generic.Dictionary(Of String, String)
    If replacement Is Nothing Then
        replacement = New Generic.Dictionary(Of String, String)
        replacement.Add(ChrW(&H201C), """")
        replacement.Add(ChrW(&H201D), """")
        replacement.Add(ChrW(&H2018), "'")
        replacement.Add(ChrW(&H2019), "'")
    End If
    Return replacement
End Function

<Extension()>
Public Function straightenQuotes(ByVal somestring As String) As String
    For Each key In StraightenQuotesReplacement.Keys
        somestring = somestring.Replace(key, StraightenQuotesReplacement.Item(key))
    Next
    Return somestring
End Function

<Extension()>
Public Function germanCharacter(ByVal s As String) As String
    Dim t = s
    t = t.Replace("ä", "ae")
    t = t.Replace("ö", "oe")
    t = t.Replace("ü", "ue")
    t = t.Replace("Ä", "Ae")
    t = t.Replace("Ö", "Oe")
    t = t.Replace("Ü", "Ue")
    t = t.Replace("ß", "ss")
    Return t
End Function
<Extension()>
Public Function japaneseCharacter(ByVal s As String) As String
    Dim t = s
    t = t.Replace("ヶ", "ケ")
    Return t
End Function

<Extension()>
Public Function greekCharacter(ByVal s As String) As String
    Dim t = s
    t = t.Replace("ς", "σ")
    t = t.Replace("ι", "ί")

    Return t
End Function
<Extension()>
Public Function franceCharacter(ByVal s As String) As String
    Dim t = s
    t = t.Replace("œ", "oe")
    Return t
End Function

<Extension()>
Public Function RemoveDiacritics(ByVal s As String) As String
    Dim normalizedString As String
    Dim stringBuilder As New StringBuilder
    normalizedString = s.Normalize(NormalizationForm.FormD)
    Dim i As Integer
    Dim c As Char
    For i = 0 To normalizedString.Length - 1
        c = normalizedString(i)
        If CharUnicodeInfo.GetUnicodeCategory(c) <> UnicodeCategory.NonSpacingMark Then
            stringBuilder.Append(c)
        End If
    Next
    Return stringBuilder.ToString()
End Function

<Extension()>
Public Function badcharacters(ByVal s As String) As String
    Dim t = s
    t = t.Replace(ChrW(8206), "")
    Return t
End Function

<Extension()>
Public Function sanitizeUTF8_Unicode(ByVal str As String) As String
    Return str.ToLower.removeDoubleSpaces.SpacetoDash.EncodeUrlLimited.straightenQuotes.RemoveDiacritics.greekCharacter.germanCharacter
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:43:28.150

可能对看起来相似的字符使用不同的 unicode 代码点，例如连字符减号 (- U+002D)、短划线 (- U+2013) 和长破折号 (- U+2014) 是三个看起来都不同的字符相似的： - - -

使用 AscW() 函数检查每个字符。

编辑：

正如下面评论中所讨论的，使用 System.Text.NormalizationForm 命名空间来确定哪些 Unicode 代码点被视为等效字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:49:11.830

我使用下面的 VBA 代码来调查奇怪的字符串。

我将“byers-street”行复制到 Excel 工作表的单元格 D18 并输入`call DsplInHex(Range("D18"))`到立即窗口中。结果是：

```
62 79 65 72 73 2D 73 74 72 65 65 74 2D 62 69 73 74 72 6F 5F 33 38 2E 31 35 2D 37 39 2E 30 37 20 62 79 65 72 73 2D 73 74 72 65 65 74 2D 62 69 73 74 72 6F 200E 5F 33 38 2E 31 35 2D 37 39 2E 30 37 
```

Adding a line break and some spaces gives:

```
62 79 65 72 73 2D 73 74 72 65 65 74 2D 62 69 73 74 72 6F      5F 33 38 2E 31 35 2D 37 39 2E 30 37 20 
62 79 65 72 73 2D 73 74 72 65 65 74 2D 62 69 73 74 72 6F 200E 5F 33 38 2E 31 35 2D 37 39 2E 30 37 
```

According to my Unicode book `200E` is a `Left-To-Right Mark`. I would be interested to know how you managed to add that character to your key.

VB.NET is correct; these keys are different. Either MySQL deletes such characters or your transfer process deleted it. Either way, you need check your source data for funny characters.

```
Option Explicit
Public Sub DsplInHex(Stg As String)

  Dim Pos As Long

  For Pos = 1 To Len(Stg)
    Debug.Print Hex(AscW(Mid(Stg, Pos, 1))) & " ";
  Next
  Debug.Print

End Sub 
```

# ruby - 尝试匹配版权声明时出现错误

> ID：10713309
> 
> 赞同：2
> 
> 时间：2012-05-23T04:08:16.550
> 
> 标签：ruby, testing, rspec, watir, watir-webdriver

嗨，我正在使用带有 rspec 的 watir，并且遇到了以下代码块的问题：

我无法理解我做错了什么。我得到的确切错误是“语法错误，意外$end，期待keyword_end @b.text.include？”Ark © 1

```
describe "Copyright statement" do 
   it "should exist" do 
    @b.text.include? "Ark © 1"
   end
end 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:12:54.440

我认为你的缩进不在第一端需要另一个空间来排列。

```
describe "Copyright statement" do 
   it "should exist" do 
    @b.text.include? "Ark © 1"
   end 
end 
```

一旦你更正了这个，你应该能够看到@ChuckvanderLinden 和我认为是真正的问题 - 你失踪并结束，但没有看到文件的其余部分，我们无法确定。

我确实从戴夫托马斯那里得到了这个提示，

[http://pragdave.blogs.pragprog.com/pragdave/2008/12/ruby-19-can-check-your-indentation.html](http://pragdave.blogs.pragprog.com/pragdave/2008/12/ruby-19-can-check-your-indentation.html)

如果您使用 -w 标志运行文件，它将让您更好地了解问题以及它在代码中的确切位置。

```
ruby -w samplefile.rb 
```

这将为您提供类似于以下内容的输出：

```
t.rb:5: warning: mismatched indentations at 'end' with 'if' at 3
t.rb:9: warning: mismatched indentations at 'end' with 'def' at 2
t.rb:10: syntax error, unexpected $end, expecting keyword_end 
```

更容易找到您的错误，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:34:07.313

@SteveRobillard 在他的回复中解决了丢失的结束错误消息，但是您在如何尝试在那里使用 rspec 时遇到了另一个大问题。问题是您并没有真正对 .include 的结果做任何事情？方法，因为那里没有 .shou 。您的代码正在执行该方法，但只是有效地将返回到位桶中的“真”或“假”扔掉。该测试永远不会失败，因为您缺少任何类型的验证。我认为这条线需要更接近

```
describe "Copyright statement" do 
   it "should exist" do 
     @b.text.should include "Ark © 1"
   end 
end 
```

更正它可能不会解决您缺少的最终问题，但是如果没有类似的东西，您的“测试”实际上并没有测试任何东西。

另外，如果是我，我不仅希望看到版权位于 html 中的某个位置，还希望看到位于特定位置（例如页脚），该位置通常位于某种容器（例如 div）中。如果该 div 的 id 为“footer”，那么这部分代码将是这样的

```
it "should be found within the footer" do
  @browser.div(:id => 'footer').text.should include 'copyright © Yoyodyne 1984'
end 
```

查看与 Watir 一起使用的 rspec 的一个好方法是查看 watir 本身的 rspec 文件，例如 div 元素的规范以及它应该做什么的所有测试都在[https://github.com/watir/watirspec /blob/master/div_spec.rb](https://github.com/watir/watirspec/blob/master/div_spec.rb)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:51:45.310

我在网上搜索错误**“invalid multibyte char (US-ASCII)”时找到了解决方案**

将此行添加到顶部有助于版权声明！

```
# encoding: UTF-8 
```

它只是文件顶部的一个简单注释，但它解决了版权字符和 Rspec/Ruby 1.9 的问题。

感谢大家的帮助和支持。我真的很感激！

# c# - 关于 DataTables，C++ 中是否有与 LINQ 等效的东西？

> ID：10713310
> 
> 赞同：1
> 
> 时间：2012-05-23T04:08:19.930
> 
> 标签：c#, c++, linq

关于 DataTables，C++ 中是否有与 LINQ 等效的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:44:15.147

看看这个 [linq-in-c](https://stackoverflow.com/questions/5643734/how-to-use-linq-in-c-cli-in-vs-2010-net-4-0) 但是，恕我直言，使用[boolinq的最佳方法](http://code.google.com/p/boolinq/)

例如

```
struct Man
{
    std::string name;
    int age;
};

Man src[] =
{
    {"Kevin",14},
    {"Anton",18},
    {"Agata",17},
    {"Terra",20},
    {"Layer",15},
};

auto dst = from(src).where(  [](const Man & man){return man.age < 18;})
                .orderBy([](const Man & man){return man.age;})
                .select( [](const Man & man){return man.name;})
                .toVector(); 
```

# c# - 刷新数据后维护 DataGridView 控件的选定行

> ID：10713311
> 
> 赞同：1
> 
> 时间：2012-05-23T04:08:25.547
> 
> 标签：c#

我试图在刷新数据后维护 DataGridView 控件的选定行。这是我的代码

```
 public partial class frmPlant : Form
    {
        string gSelectedPlant;

     private void frmPlant_Load(object sender, EventArgs e)
        {
            dataGridView1.AutoGenerateColumns = true;
            dataGridView1.DataSource = bindingSource1;
            FillData();

            dataGridView1.DataMember = "Table";
}
 private void FillData()
        {
            ds = _DbConnection.returnDataSet(_SQlQueries.SQL_PlantSelect);
            bindingSource1.DataSource = ds.Tables[0];
        }
 public DataSet returnDataSet(string txtQuery)
        {
            conn.Open();
            sqlCommand = conn.CreateCommand();
            DB = new SQLiteDataAdapter(txtQuery, conn);
            DS.Reset();
            DB.Fill(DS);
            conn.Close();
            return (DS);
        }
  private void dataGridView1_Selectionchanged(object sender, EventArgs e)
        {
            if (dataGridView1.SelectedRows.Count > 0)
            {
                gSelectedPlant = dataGridView1.SelectedRows[0].Cells["PlantId"].Value.ToString();
            }
        }

        private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
        {
            int selectedIndex;
            if (!string.IsNullOrEmpty(gSelectedPlant) && e.ListChangedType == ListChangedType.Reset)
            {
                if (ds.Tables.Count > 0)
                {
                    selectedIndex = bindingSource1.Find("PlantId", gSelectedPlant);
                    if (selectedIndex <= 0)
                        selectedIndex = 0;
                    dataGridView1.Rows[selectedIndex].Selected = true;
                }
                else
                {
                    gSelectedPlant = string.Empty;
                }
            }
        }
    } 
```

它仍然无法维护所选行的行索引。它滚动到第 1 行。这是我使用的博客 [http://www.makhaly.net/Blog/9](http://www.makhaly.net/Blog/9)

假设，我在 Form1（所有代码所在的位置）上选择一行，然后进入下一个表单，它向我显示了特定 Plant 的详细信息。如果我再次回到第一个表单，按下后退按钮，该行将重置为 1。gSelectedPlant 取值 1 和 selectedindex = 0。这是有道理的，但我还不能弄清楚如何保持该值gSelectedPlant 的。是的，它最初需要一个空值，但在数据绑定完成时它变为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:57:47.380

你试过调试它吗？我无法尝试，因为除了表单的加载事件之外，我不知道您何时调用 FillData，但我认为这不是您遇到问题的关键。我怀疑问题在于您总是跳过 dataGridView1_DataBindingComplete 的选择部分，因为 gSelectedPlant 始终为空或设置为第一行。

这通常是因为 SelectionChanged 的​​触发次数比您想象的要多得多，尤其是在 DataBindingComplete 之前调用它。这意味着当您调用 FillData 时，您应该“指示”您的表单忽略 SelectionChanged 事件，直到 DataBindingComplete 已执行。这可以通过修改您的代码来完成，如下所示：

```
public partial class frmPlant : Form
{
     string gSelectedPlant;
     bool ignoreSelChg = false;  // <- added this bool    

     private void frmPlant_Load(object sender, EventArgs e)
     {
            dataGridView1.AutoGenerateColumns = true;
            dataGridView1.DataSource = bindingSource1;
            FillData();

            dataGridView1.DataMember = "Table";
     }

     private void FillData()
     {
            ignoreSelChg = true; // <- set the bool, SelectionChanged won't do anything now

            ds = _DbConnection.returnDataSet(_SQlQueries.SQL_PlantSelect);
            bindingSource1.DataSource = ds.Tables[0];
     }

     public DataSet returnDataSet(string txtQuery)
     {
            conn.Open();
            sqlCommand = conn.CreateCommand();
            DB = new SQLiteDataAdapter(txtQuery, conn);
            DS.Reset();
            DB.Fill(DS);
            conn.Close();
            return (DS);
     }

     private void dataGridView1_Selectionchanged(object sender, EventArgs e)
     {
            if (ignoreSelChg)  // <- don't do anything before DataBindingComplete
                return;

            if (dataGridView1.SelectedRows.Count > 0)
            {
                gSelectedPlant = dataGridView1.SelectedRows[0].Cells["PlantId"].Value.ToString();
            }
     }

     private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
        {
            int selectedIndex;
            if (!string.IsNullOrEmpty(gSelectedPlant) && e.ListChangedType == ListChangedType.Reset)
            {
                ignoreSelChg = false; // <- reset the bool, SelectionChanged get executed again

                if (ds.Tables.Count > 0)
                {
                    selectedIndex = bindingSource1.Find("PlantId", gSelectedPlant);
                    if (selectedIndex <= 0)
                        selectedIndex = 0;
                    dataGridView1.Rows[selectedIndex].Selected = true;
                }
                else
                {
                    gSelectedPlant = string.Empty;
                }
            }
        }
    } 
```

您可以在此处查看 Mark Rideout 的帖子：`[http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/01f937af-d0d0-4de5-8919-088e88c5af77/][1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T09:49:57.420

```
//public area
 int selectedID,rowIndex, scrollIndex;
 bool IsSelectedRow;

 private void DataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
  {
      if (e.RowIndex < 0)
          return;
      selectedID = (int)DataGridView1.SelectedRows[0].Cells[0].Value;
      scrollIndex = DataGridView1.FirstDisplayedScrollingRowIndex;
      IsSelectedRow = true;
    }

    private void DataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
            {
                if (IsSelectedRow)
                {
                    foreach (DataGridViewRow row in DataGridView1.Rows)
                    {
                        if (row.Cells[0].Value.ToString().Equals(selectedID.ToString()))
                        {
                            rowIndex = row.Index;
                            break;
                        }
                    }
                    DataGridView1.Rows[rowIndex].Selected = true;
                }           
            } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T04:53:12.773

你检查 bindingSource1.Find("PlantId", gSelectedPlant); 返回正确的行索引？

# android - 我可以为 ScrollView 设置 onScrollListener 吗？

> ID：10713312
> 
> 赞同：156
> 
> 时间：2012-05-23T04:08:27.497
> 
> 标签：android, listener, scrollview

我`HorizontalScrollView`在布局中使用 a ，我需要确定用户已到达滚动的起点和终点。

因为`ListView`我试过了`onScrollListener`，可以找到滚动的起点和终点。

我试图在我的身上做同样的事情，`Scrollview`但似乎不可能。有没有其他可能的方法来实现我所需要的。

* * *

## 回答 #1

> 赞同：410
> 
> 时间：2014-04-29T13:06:40.937

View 的每个实例调用`getViewTreeObserver()`. 现在，当持有 的实例时`ViewTreeObserver`，您可以`OnScrollChangedListener()`使用 方法向其中添加`addOnScrollChangedListener()`。

[您可以在此处](http://developer.android.com/reference/android/view/ViewTreeObserver.html)查看有关此类的更多信息。

它让您知道每个滚动事件 - 但没有坐标。不过，您可以通过使用`getScrollY()`或`getScrollX()`从侦听器中获取它们。

```
scrollView.getViewTreeObserver().addOnScrollChangedListener(new OnScrollChangedListener() {
    @Override
    public void onScrollChanged() {
        int scrollY = rootScrollView.getScrollY(); // For ScrollView
        int scrollX = rootScrollView.getScrollX(); // For HorizontalScrollView
        // DO SOMETHING WITH THE SCROLL COORDINATES
    }
}); 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-10-20T07:52:56.563

这可能非常有用。使用`NestedScrollView`而不是`ScrollView`. 支持库 23.1 引入`OnScrollChangeListener`了`NestedScrollView`. 所以你可以做这样的事情。

```
 myScrollView.setOnScrollChangeListener(new NestedScrollView.OnScrollChangeListener() {
        @Override
        public void onScrollChange(NestedScrollView v, int scrollX, int scrollY, int oldScrollX, int oldScrollY) {
            Log.d("ScrollView","scrollX_"+scrollX+"_scrollY_"+scrollY+"_oldScrollX_"+oldScrollX+"_oldScrollY_"+oldScrollY);
            //Do something
        }
    }); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-09-02T04:35:16.583

这是我编写的一个派生的 Horizo​​ntalScrollView，用于处理有关滚动和滚动结束的通知。当用户停止主动滚动*以及*在用户放手后完全减速时，它会正确处理：

```
public class ObservableHorizontalScrollView extends HorizontalScrollView {
    public interface OnScrollListener {
        public void onScrollChanged(ObservableHorizontalScrollView scrollView, int x, int y, int oldX, int oldY);
        public void onEndScroll(ObservableHorizontalScrollView scrollView);
    }

    private boolean mIsScrolling;
    private boolean mIsTouching;
    private Runnable mScrollingRunnable;
    private OnScrollListener mOnScrollListener;

    public ObservableHorizontalScrollView(Context context) {
        this(context, null, 0);
    }

    public ObservableHorizontalScrollView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ObservableHorizontalScrollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        int action = ev.getAction();

        if (action == MotionEvent.ACTION_MOVE) {
            mIsTouching = true;
            mIsScrolling = true;
        } else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
            if (mIsTouching && !mIsScrolling) {
                if (mOnScrollListener != null) {
                    mOnScrollListener.onEndScroll(this);
                }
            }

            mIsTouching = false;
        }

        return super.onTouchEvent(ev);
    }

    @Override
    protected void onScrollChanged(int x, int y, int oldX, int oldY) {
        super.onScrollChanged(x, y, oldX, oldY);

        if (Math.abs(oldX - x) > 0) {
            if (mScrollingRunnable != null) {
                removeCallbacks(mScrollingRunnable);
            }

            mScrollingRunnable = new Runnable() {
                public void run() {
                    if (mIsScrolling && !mIsTouching) {
                        if (mOnScrollListener != null) {
                            mOnScrollListener.onEndScroll(ObservableHorizontalScrollView.this);
                        }
                    }

                    mIsScrolling = false;
                    mScrollingRunnable = null;
                }
            };

            postDelayed(mScrollingRunnable, 200);
        }

        if (mOnScrollListener != null) {
            mOnScrollListener.onScrollChanged(this, x, y, oldX, oldY);
        }
    }

    public OnScrollListener getOnScrollListener() {
        return mOnScrollListener;
    }

    public void setOnScrollListener(OnScrollListener mOnEndScrollListener) {
        this.mOnScrollListener = mOnEndScrollListener;
    }

} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-07-17T15:37:17.813

您可以使用`NestedScrollView`而不是`ScrollView`. 但是，当使用 Kotlin Lambda 时，它不会知道您想要 NestedScrollView`setOnScrollChangeListener`而不是 View 中的（API 级别 23）。您可以通过将第一个参数指定为 NestedScrollView 来解决此问题。

```
nestedScrollView.setOnScrollChangeListener { _: NestedScrollView, scrollX: Int, scrollY: Int, _: Int, _: Int ->
    Log.d("ScrollView", "Scrolled to $scrollX, $scrollY")
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-10-22T23:25:01.133

除了接受的答案之外，您还需要保留侦听器的引用并在不需要时将其删除。否则，您将获得 ScrollView 和内存泄漏的空指针异常（*在已接受答案的评论中提到）*。

1.  您可以在您的活动/片段中实现 OnScrollChangedListener。

    ```
    MyFragment : ViewTreeObserver.OnScrollChangedListener 
    ```

2.  当您的视图准备就绪时，将其添加到 scrollView。

    ```
    scrollView.viewTreeObserver.addOnScrollChangedListener(this) 
    ```

3.  不再需要时移除监听器（即 onPause()）

    ```
    scrollView.viewTreeObserver.removeOnScrollChangedListener(this) 
    ```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-18T14:48:22.173

如果你想知道一个视图的滚动位置，那么你可以在 View 类上使用以下扩展函数：

```
fun View?.onScroll(callback: (x: Int, y: Int) -> Unit) {
    var oldX = 0
    var oldY = 0
    this?.viewTreeObserver?.addOnScrollChangedListener {
        if (oldX != scrollX || oldY != scrollY) {
            callback(scrollX, scrollY)
            oldX = scrollX
            oldY = scrollY
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-03T12:23:08.670

您可以定义一个自定义 ScrollView 类，并添加一个在滚动时调用的界面，如下所示：

```
public class ScrollChangeListenerScrollView extends HorizontalScrollView {

private MyScrollListener mMyScrollListener;

public ScrollChangeListenerScrollView(Context context) {
    super(context);
}

public ScrollChangeListenerScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public ScrollChangeListenerScrollView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
}

public void setOnMyScrollListener(MyScrollListener myScrollListener){
    this.mMyScrollListener = myScrollListener;
}

@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);
    if(mMyScrollListener!=null){
        mMyScrollListener.onScrollChange(this,l,t,oldl,oldt);
    }

}

public interface MyScrollListener {
    void onScrollChange(View view,int scrollX,int scrollY,int oldScrollX, int oldScrollY);
}

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-03T03:03:12.410

正在寻找正常`ScrollView`实现解决方案的 Kotlin 用户：

作为[这个答案](https://stackoverflow.com/a/25615921/11070397)的扩展，我创建了一个自定义视图，很好地解决了我的问题。

视图（创建一个新的 Kotlin 文件，在第 1 行维护您的包引用）：

```
import android.annotation.SuppressLint
import android.content.Context
import android.util.AttributeSet
import android.view.MotionEvent
import android.widget.ScrollView
import kotlin.math.abs

class ScrollViewWithEndFunc (
    context: Context?,
    attrs: AttributeSet?,
    defStyle: Int
) : ScrollView(context, attrs, defStyle) {

    constructor(context: Context?) : this(context, null, 0) {}
    constructor(context: Context?, attrs: AttributeSet?) : this(context, attrs, 0) {}

    interface OnScrollListener {
        fun onScrollChanged(scrollView: ScrollViewWithEndFunc?, x: Int, y: Int, oldX: Int, oldY: Int)
        fun onEndScroll(scrollView: ScrollViewWithEndFunc?)
    }

    private var isScrolling = false
    private var isTouching = false
    private var scrollingRunnable: Runnable? = null
    private var onScrollListener: OnScrollListener? = null

    fun setOnScrollListener(onScrollListener: OnScrollListener) {
        this.onScrollListener = onScrollListener
    }

    fun removeOnScrollListener() {
        this.onScrollListener = null
    }

    @SuppressLint("ClickableViewAccessibility")
    override fun onTouchEvent(ev: MotionEvent): Boolean {
        val action = ev.action
        if (action == MotionEvent.ACTION_MOVE) {
            isTouching = true; isScrolling = true
        } else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
            if (isTouching && !isScrolling) {
                onScrollListener?.onEndScroll(this)
            }
            isTouching = false
        }
        return super.onTouchEvent(ev)
    }

    override fun onScrollChanged(x: Int, y: Int, oldX: Int, oldY: Int) {
        super.onScrollChanged(x, y, oldX, oldY)
        if (abs(oldY - y) > 0) {
            scrollingRunnable?.let { removeCallbacks(it) }
            scrollingRunnable = Runnable {
                if (isScrolling && !isTouching) {
                    onScrollListener?.onEndScroll(this@ScrollViewWithEndFunc)
                }
                isScrolling = false
                scrollingRunnable = null
            }
            postDelayed(scrollingRunnable, 200)
        }
        onScrollListener?.onScrollChanged(this, x, y, oldX, oldY)
     }
    } 
```

XML 视图实现：

```
<your.package.here.ScrollViewWithEndFunc
        android:id="@+id/scrollview_main_dashboard"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"> 
```

活动/片段实现：

```
scrollviewMainDashboard.setOnScrollListener(object : ScrollViewWithEndFunc.OnScrollListener {
            override fun onScrollChanged(scrollView: ScrollViewWithEndFunc?, x: Int, y: Int, oldX: Int, oldY: Int) { }
            override fun onEndScroll(scrollView: ScrollViewWithEndFunc?) {
                /* Scroll ended, handle here */
        }) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-28T02:49:25.593

```
 // --------Start Scroll Bar Slide--------
    final HorizontalScrollView xHorizontalScrollViewHeader = (HorizontalScrollView) findViewById(R.id.HorizontalScrollViewHeader);
    final HorizontalScrollView xHorizontalScrollViewData = (HorizontalScrollView) findViewById(R.id.HorizontalScrollViewData);
    xHorizontalScrollViewData.getViewTreeObserver().addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {
        @Override
        public void onScrollChanged() {
            int scrollX; int scrollY;
            scrollX=xHorizontalScrollViewData.getScrollX();
            scrollY=xHorizontalScrollViewData.getScrollY();
            xHorizontalScrollViewHeader.scrollTo(scrollX, scrollY);
        }
    });
    // ---------End Scroll Bar Slide--------- 
```

# hadoop - map reduce 框架如何确定在 map 完全完成之前运行 reduce？

> ID：10713313
> 
> 赞同：1
> 
> 时间：2012-05-23T04:08:35.030
> 
> 标签：hadoop, mapreduce

我注意到通常当hadoop集群不忙时，在map端完全完成之前，reduce端开始进行？这怎么可能？我记得在某处读过减少进度指示器的内容有些误导，但记不清了。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T06:46:31.743

33 ¹ / [3] % 的 reduce 任务进度指示器正在复制地图输出。（另外 33 ¹ / [3] % 正在对它们进行排序，最后 33 ¹ / [3] % 构成对 reduce() 方法的实际调用。）映射器一直在完成，并且您配置的尽可能多的 reduce 任务正在拉取这些输出一旦准备好就立即完成，因此在任何 reduce() 调用发生之前，第一轮 reduce 阶段的² / [3]将完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:30:19.607

除了已经给出的答案之外，此行为由 mapred 属性控制`mapred.reduce.slowstart.completed.maps`，它表示在复制阶段开始之前必须完成的映射任务的百分比 (0-1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:28:31.610

这是因为 reducer 必须将 map 输出复制到 reduce 任务运行的节点。如果一个 map 任务已经完成并提交了它的输出，你可以直接传输它并将它们合并到 reducer 中已经可用的数据中。

所以这将为您节省大量时间，而不是等到所有映射器完成。

# javascript - 我可以让这个 javascript 幻灯片自动播放吗？

> ID：10713314
> 
> 赞同：0
> 
> 时间：2012-05-23T04:08:37.620
> 
> 标签：javascript, jquery, slideshow

我很难找到一个看起来不错的幻灯片，但我终于找到了一个使用 jQuery 的幻灯片。[http://sixrevisions.com/tutorials/javascript_tutorial/create-a-slick-and-accessible-slideshow-using-jquery/](http://sixrevisions.com/tutorials/javascript_tutorial/create-a-slick-and-accessible-slideshow-using-jquery/)

我喜欢平滑的过渡，但我不喜欢我必须单击才能显示下一张幻灯片。有没有办法在计时器上设置此幻灯片放映，并可能随机化幻灯片的顺序？我只是 jQuery 和 javascript 的初学者，我自己似乎无法解决这个问题。

提前致谢。这是我的代码 [http://jsfiddle.net/NB3sr/](http://jsfiddle.net/NB3sr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:12:33.060

您可以使用 setInterval(function, time) 自动调用下一张幻灯片函数。前任

```
setInterval(function(){
    $('#rightControl').trigger('click');
  }, 4000
); 
```

4000 是 4 秒

# android - 在 Eclipse 中安装 AndEngine

> ID：10713315
> 
> 赞同：12
> 
> 时间：2012-05-23T04:08:48.490
> 
> 标签：android, eclipse, andengine

我想安装 AndEngine... 我遇到了一些视频，这些视频向您展示了如何安装它。但这些视频是去年完成的，从那时起，安装它的方法发生了变化。至少他们在这些视频中的做法......让任何人知道我可以遵循的新扩展或一些新教程......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T20:33:22.580

请记住，目前有 2 个版本的 AndEngine GLES1 和 GLES2，大多数视频和教程都是针对 GLES1 的，因为 GLES2 最近发布了 AndEngine 也在谷歌代码上，现在移到了 github，所以旧的教程不起作用我写了一个有关设置 GLES2 并使其工作的教程，请查看

[https://jimmaru.wordpress.com/2012/04/23/setting-up-andengine-gles2-0/](https://jimmaru.wordpress.com/2012/04/23/setting-up-andengine-gles2-0/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T22:44:47.477

当前的最佳实践是将andengine 设置为库项目。andengine 的作者 Nicholas Gramlich 在此处发布了有关如何下载最新版本的 andengine 并将其添加到 eclipse asa 库项目的说明：

[http://www.andengine.org/forums/gles2/use-andengine-as-a-android-library-project-not-as-a-jar-t6142.html](http://www.andengine.org/forums/gles2/use-andengine-as-a-android-library-project-not-as-a-jar-t6142.html)

您*不想*获取 jar 文件并使用它。因为不再有 andengine 的 .jar 文件了。如果您使用的是 jar 文件，那么您使用的是旧版本。即使您使用 GLES1，您也应该通过库项目而不是 jar 文件更新到最新代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-11T09:20:44.067

我看到这仍然没有得到很好的解释。所以我自己做了。这是我的方式：

1.  在 Eclipse 中创建您的游戏项目（照常进行）
2.  从github下载andengine并解压到**and_location**（不是jar文件）
3.  在 Eclipse 中，将整个**and_location**文件夹作为“现有的 Android 代码..”导入，右键单击项目视图中的空白区域，然后从上下文菜单中选择“导入”。作为根目录选择**and_location**当你这样做时，它应该（默认情况下）标记“AndEngine”项目旁边的复选框。单击完成。
4.  现在您将在工作区中看到两个项目：
    *   你的游戏
    *   和引擎
5.  右键单击 YourGame 项目并选择“构建路径 -> 配置构建路径..”
6.  选择“项目”选项卡
7.  单击右侧的“添加”按钮。选择 AndEngine，点击 OK -> OK，瞧，你就完成了，你可以在你的项目中使用 AndEngine 类了

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-23T05:55:36.783

基本上你只是想在你的项目中添加 jar 文件。所以首先从[http://www.2shared.com/file/9K77Yazm/andengine.html](http://www.2shared.com/file/9K77Yazm/andengine.html)下载 jar 文件，现在你可以像这样在你的项目中包含这个 jar 文件右键单击你的项目->属性->javabuildpath->添加外部jar->给出下载和jar的位置并添加它。

# ios4 - 使用麦克风时可以禁用 Siri 吗？

> ID：10713318
> 
> 赞同：3
> 
> 时间：2012-05-23T04:09:21.067
> 
> 标签：ios4, audio-recording, siri

我的应用程序用麦克风录制东西，在 4S 上，Siri 有时会在录制过程中激活。当我将麦克风用于其他事情时，我的应用程序是否可以告诉 Siri 放松？

我发现了这个相关的问题：[可以在应用程序中禁用 Siri 吗？](https://stackoverflow.com/questions/7881167/can-siri-be-disabled-within-an-app)，但这都是关于接近传感器的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:49:29.483

我发现阻止 siri 的唯一方法是启用接近性。您可以参考[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW25](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW25)

# c++ - IsWow64Process PROCESS_QUERY_INFORMATION 检查进程句柄

> ID：10713320
> 
> 赞同：2
> 
> 时间：2012-05-23T04:10:13.780
> 
> 标签：c++, winapi, wow64

简单的问题，但是是否有一个 win32 API 调用来检索进程句柄是否具有`PROCESS_QUERY_INFORMATION`访问标志以便成功调用`IsWow64Process`？[AccessCheck 功能 - MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374815%28v=vs.85%29.aspx "访问检查")似乎可以工作，但我不确定这是否在检查相同类型的标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:40:51.910

看看[`NtQueryObject()`](http://msdn.microsoft.com/en-us/library/bb432383.aspx)功能。将其`ObjectInformationClass`参数设置为`ObjectBasicInformation`以请求句柄的`PUBLIC_OBJECT_BASIC_INFORMATION`结构，该结构具有`GrantedAccess`type 的成员[`ACCESS_MASK`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374892.aspx)，其中可能包含`PROCESS_QUERY_INFORMATION`.

# spring - GateIn 3.2 忽略 actionURL 参数

> ID：10713322
> 
> 赞同：0
> 
> 时间：2012-05-23T04:10:17.903
> 
> 标签：spring, jsp, spring-mvc, tomcat7, gatein

我正在使用`GateIn 3.2.0.FINAL`（`Tomcat 7`）`GateIn-3.2.0.Final-tomcat7.zip`。看起来中的参数`actionURL`被忽略了。

我的控制器如下所示：

```
@ActionMapping("search")
public void search(ActionRequest request) {
    LOG.info("doing search");
}

@ActionMapping("save")
public void save(ActionRequest request) {
    LOG.info("doing save");
} 
```

我的 JSP 看起来像这样：

```
<portlet:actionURL var="saveURL">
    <portlet:param name="javax.portlet.action" value="save"/>
</portlet:actionURL>

<form:form id="${ns}-save" action="${saveURL}" modelAttribute="createModel">
    <!-- omitted some html -->
    <input type="submit" value="submit"/>
</form:form> 
```

当我按下提交按钮时，POST 应该包含一个`javax.portlet.action=save`，但它没有。不包含named参数，由于找不到匹配的方法`javax.portlet.action`而抛出异常。`@ActionMapping`

为 HTML中的标签生成的 URL`form`如下所示：

```
/portal/classic/home/Permissions?navigationalstate=<gibberish>&amp;portal:componentId=<an UUID>&amp;interactionstate=<gibberish>&amp;portal:type=action&amp;portal:isSecure=false 
```

如果我用 firebug 手动编辑 URL 并添加`&javax.portlet.action=save`到它，它就像一个魅力，它会`save()`在控制器中找到方法。

现在，如果我在 URL中部署完全相同`war`的`jBoss Portal 2.7.2`, 。`&javax.portlet.action=save`对于`GateIn 3.1.0.FINAL`with也是如此`Tomcat 6`。

**附言**

我也尝试过使用另一个参数键：

```
@ActionMapping({params = "myparam=save"})
public void save(ActionRequest request) {
    LOG.info("doing save");
} 
```

...和：

```
<portlet:actionURL var="saveURL">
    <portlet:param name="myparam" value="save"/>
</portlet:actionURL> 
```

......结果相同。作品在`GateIn 3.1`and中找到`jBoss Portal 2.7.2`，但不是`GateIn 3.2`。

它也不适用于`GateIn 3.2.0.FINAL`with `Tomcat 6`。

**编辑**

忘了说这样做是可行的，但我不想使用它：

```
<form:form id="${ns}-save" action="${saveURL}&javax.portlet.action=save" modelAttribute="createModel">
   <!-- omitted -->
</form:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:31:55.063

尝试这个

```
ActionMapping({params = "action=save"})
public void save(ActionRequest request) { 
    LOG.info("doing save"); 
} 
```

和

```
<portlet:actionURL var="saveURL" escapeXml="false">
    <portlet:param name="action" value="save"/>
</portlet:actionURL> 
```

action 是默认参数名称，您必须进行其他更改才能使用您自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:23:48.170

尝试设置`escapeXML="false"`actionURL。

# jsf-2 - 打开 JSF2 Facelets 页面会导致 JSP 文件出现 404

> ID：10713323
> 
> 赞同：0
> 
> 时间：2012-05-23T04:10:43.957
> 
> 标签：jsf-2, facelets

我创建了一个新项目作为本教程 [JSF 工具教程 - 构建 JSF 2.0 应用程序](http://www.4shared.com/photo/39FUsNfF/what.html)

当我尝试通过右键单击`m.xhtml`并选择在服务器上运行来运行它时，我在`m.jsp`.

浏览器地址栏中的 URL 为：http://localhost:8080/Marwa/m.jsf

错误消息显示[HTTP 状态 404 - /Marwa/m.jsp](http://www.4shared.com/photo/39FUsNfF/what.html)

这是如何引起的，我该如何解决？

这是我的`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
 <display-name>Marwa</display-name>
  <welcome-file-list>
    <welcome-file>m.xhtml</welcome-file>

  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
   <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
   <param-value>false</param-value>
  </context-param>
  <context-param>
   <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
   <param-value>true</param-value>
  </context-param>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T03:35:34.783

它正在寻找 JSP 文件而不是 Facelets 文件。

JSP 是旧 JSF 1.x 中的默认视图技术。因此，此问题表明您实际上是在使用 JSF 1.x 或在 JSF 1.x 模式下运行 JSF 2.x。

确保那里确实有 JSF 2.x 库。您可以通过阅读服务器启动日志或使用 zip 工具提取 JSF JAR 文件并阅读 MANIFEST 文件来检查确切的 JSF 版本。[您也可以在http://myfaces.apache.org/download.html](http://myfaces.apache.org/download.html)（或[http://javaserverfaces.java.net/](http://javaserverfaces.java.net/)以获取其他实现）重新下载正确的版本。确保您获得 2.x 版本。

还要确保`faces-config.xml`声明符合 JSF 2.x 规范版本。它应该如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <!-- Config here -->

</faces-config> 
```

如果您的 Eclipse 没有自动完成这一切，那么您显然使用的是过时的 Eclipse 版本。Eclipse Helios (3.6) 首次为 Java EE 引入了内置 JSF2 支持。[您可以在http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)获得最新版本，目前是 Indigo SR2 (3.7.2)。

# xml - JSON 文件在 Safari 中加载，但在 Chrome 中不加载

> ID：10713325
> 
> 赞同：1
> 
> 时间：2012-05-23T04:11:11.227
> 
> 标签：xml, json, google-chrome

当我在 Safari 中运行页面时，JSON 文件加载成功，但在 Chrome 中运行时失败。在 Chrome 的错误控制台中，它显示此错误：

> XMLHttpRequest 无法加载 file:///C:/Users/290851/Desktop/json-eg/test.json。Access-Control-Allow-Origin 不允许 Origin null。

我还测试了 JSON 文件，它是有效的。有人可以告诉我为什么会发生这种情况以及解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:15:35.213

你听说过[跨域访问](http://en.wikipedia.org/wiki/Same_origin_policy)吗？？

您将无法在另一个域中调用该服务（在您的情况下为 jason 文件）。Chrome 会向您发出警告消息，说明脚本和服务位于不同的域（不同的站点）。这是现代浏览器中的一项安全功能，可防止此类网络调用。

如果您在同一个文件夹中同时拥有脚本和 jason 文件和 jason 文件，我想它应该是世界的。试试看。

您需要使用 Proxy 或 JSONP 来解决此问题。

[以前也有很多类似的问题](https://stackoverflow.com/search?q=cross%20domain%20javascript)，请查看它们。

# java - 从特定方向的矩阵中提取所有对角线的列表

> ID：10713327
> 
> 赞同：3
> 
> 时间：2012-05-23T04:11:37.437
> 
> 标签：java, matrix

我试图从矩阵中提取某个方向上的所有对角线，例如右下角。

对于以下矩阵：

```
A   B   C   D
E   F   G   H
I   L   M   N 
```

预期的结果应该是

```
[ [A F M], [B G N], [C H], [D], [E L], [I] ] 
```

欢迎使用通用方法。

我使用的语言是Java。

谢谢！

**编辑**

```
String[] grid = {"SUGAR", 
                 "GLASS", 
                 "MOUSE"};

for( int k = 0; k < grid.length; k++ )
{   
    StringBuffer buffer = new StringBuffer( );

    for( int i = 0; i < grid.length
                && i+k < grid[0].length( ); i++ )
    {
        buffer.append( grid[i].charAt(i+k) );
    }

    trie.addWord( buffer.toString() );
} 
```

添加到特里的输出词是

```
[ "SLU" "UAS" "GSE" ] 
```

存储在 trie 中的预期字符串（顺序无关紧要）

```
[ "SLU" "UAS" "GSE" "GO" "M" "AS" "R"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T14:14:18.643

如果您的数据是表格形式，您可以将矩阵向上扫描第一列，然后在第一行左侧。

```
final String[M][N] mtx = { ... };

public List<List<String>> diagonalize() {
    final List<List<String>> diags = new ArrayList<>();
    for (int row = M - 1; row > 1; --row) {
        diags.add(getDiagonal(row, 0));
    }
    for (int col = 0; col < N; ++col) {
        diags.add(getDiagonal(0, col));
    }
    return diags;
}

private List<String> getDiagonal(int x, int y) {
    final List<String> diag = new ArrayList<>();
    while (x < M && y < N) {
        diag.add(mtx[x++][y++]);
    }
    return diag;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T15:45:36.763

这是一个有趣的问题。

很容易陷入嵌套循环。

我注意到如果我把这些词放在一个字符串中，就会出现一种模式。

以 OP 为例，“SUGAR”、“GLASS”、“MOUSE”这三个词连接在一起形成 SUGARGLASSMOUSE。

这是我需要从连接字符串中获取的字符的从零开始的字符位置。我已经把它们排成一行，这样你就可以更容易地看到图案。

```
 10     M
     5    11     GO
0    6    12     SLU
1    7    13     UAS
2    8    14     GSE
3    9           AS
4                R 
```

看到图案了吗？我有 3 个索引，由 5 次迭代组成。我有 3 个单词，由 5 个字母组成。

对角词的数量是`letters + words - 1`。我们减去 1，因为字符位置 0 的第一个字母只使用一次。

这是我运行的测试的结果。

```
[ "SUGAR" "GLASS" "MOUSE" "STATE" "PUPIL" "TESTS" ]
[ "T" "PE" "SUS" "MTPT" "GOAIS" "SLUTL" "UASE" "GSE" "AS" "R" ]

[ "SUGAR" "GLASS" "MOUSE" ]
[ "M" "GO" "SLU" "UAS" "GSE" "AS" "R" ] 
```

这是代码：

```
import java.util.ArrayList;
import java.util.List;

public class Matrix {

    public static final int DOWN_RIGHT = 1;
    public static final int DOWN_LEFT = 2;
    public static final int UP_RIGHT = 4;
    public static final int UP_LEFT = 8;

    public String[] getMatrixDiagonal(String[] grid, int direction) {
        StringBuilder builder = new StringBuilder();
        for (String s : grid) {
            builder.append(s);
        }
        String matrixString = builder.toString();

        int wordLength = grid[0].length();
        int numberOfWords = grid.length;
        List<String> list = new ArrayList<String>();

        if (wordLength > 0) {
            int[] indexes = new int[numberOfWords];

            if (direction == DOWN_RIGHT) {
                indexes[0] = matrixString.length() - wordLength;
                for (int i = 1; i < numberOfWords; i++) {
                    indexes[i] = indexes[i - 1] - wordLength;
                }

                int wordCount = numberOfWords + wordLength - 1;

                for (int i = 0; i < wordCount; i++) {
                    builder.delete(0, builder.length());
                    for (int j = 0; (j <= i) && (j < numberOfWords); j++) {
                        if (indexes[j] < wordLength * (wordCount - i)) {
                            char c = matrixString.charAt(indexes[j]);
                            builder.append(c);
                            indexes[j]++;
                        }
                    }
                    String s = builder.reverse().toString();
                    list.add(s);
                }
            }

            if (direction == DOWN_LEFT) {
                // Exercise for original poster
            }

            if (direction == UP_RIGHT) {
                // Exercise for original poster
            }

            if (direction == UP_LEFT) {
                // Exercise for original poster
                // Same as DOWN_RIGHT with the reverse() removed
            }
        }

        return list.toArray(new String[list.size()]);
    }

    public static void main(String[] args) {
        String[] grid1 = { "SUGAR", "GLASS", "MOUSE", "STATE", "PUPIL", "TESTS" };
        String[] grid2 = { "SUGAR", "GLASS", "MOUSE" };

        Matrix matrix = new Matrix();
        String[] output = matrix.getMatrixDiagonal(grid1, DOWN_RIGHT);
        System.out.println(createStringLine(grid1));
        System.out.println(createStringLine(output));

        output = matrix.getMatrixDiagonal(grid2, DOWN_RIGHT);
        System.out.println(createStringLine(grid2));
        System.out.println(createStringLine(output));
    }

    private static String createStringLine(String[] values) {
        StringBuilder builder = new StringBuilder();
        builder.append("[ ");

        for (String s : values) {
            builder.append("\"");
            builder.append(s);
            builder.append("\" ");
        }

        builder.append("]");

        return builder.toString();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T16:09:16.197

```
 String[] grid = {"SUGAR", 
             "GLASS", 
             "MOUSE"};
    System.out.println("Result: " + Arrays.toString(diagonals(grid)));

public static String[] diagonals(String[] grid) {
    int nrows = grid.length;
    int ncols = grid[0].length();
    int nwords = ncols + nrows - 1;
    String[] words = new String[nwords];
    int iword = 0;
    for (int col = 0; col < ncols; ++col) {
        int n = Math.min(nrows, ncols - col);
        char[] word = new char[n];
        for (int i = 0; i < n; ++i) {
            word[i] = grid[i].charAt(col + i);
        }
        words[iword] = new String(word);
        ++iword;
    }
    for (int row = 1; row < nrows; ++row) {
        int n = Math.min(ncols, nrows - row);
        char[] word = new char[n];
        for (int i = 0; i < n; ++i) {
            word[i] = grid[row + i].charAt(i);
        }
        words[iword] = new String(word);
        ++iword;
    }
    assert iword == nwords;
    return words;
}

Result: [SLU, UAS, GSE, AS, R, GO, M] 
```

首先是列上第一个元素的循环。然后在行上循环，跳过第 0 行。两个循环中的代码非常对称。没什么太难的。假设所有字符串都具有相同的长度。

作为一个循环：

```
public static String[] diagonals(String[] grid) {
    int nrows = grid.length;
    int ncols = grid[0].length();
    int nwords = ncols + nrows - 1;
    String[] words = new String[nwords];

    // Position of first letter in word:
    int row = 0;
    int col = ncols - 1;

    for (int iword = 0; iword < nwords; ++iword) {
        int n = Math.min(nrows - row, ncols - col);
        char[] word = new char[n];
        for (int i = 0; i < n; ++i) {
            word[i] = grid[row + i].charAt(col + i);
        }
        words[iword] = new String(word);

        if (col > 0) {
            --col;
        } else {
            ++row;
        }
    }
    return words;
} 
```

的声明`word`可以被带到循环之外。只需使用 (row, col) 左侧和顶部边缘即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T04:55:28.043

您可以使用二维数组表示您的矩阵，

> char[][] 矩阵 = char[][]

然后你可以使用 for 循环来遍历它并提取你想要的输出，你的算法的输入将是你想要的对角线方向。

对于前; 一种可能的输入是正确的

根据可能的输入，您必须决定如何遍历循环初始条件和终止条件。

从最后一列第一行字符开始

> r = 0，c = 库仑计数 -1；

终止条件将是 first_column 最后一行索引处的字符。

> r = row_count -1，c = 0；

在最后一行或最后一列读取字符时的每次迭代都是子循环的终止

# ms-access - 如何防止数据迁移出 MDB？

> ID：10713329
> 
> 赞同：1
> 
> 时间：2012-05-23T04:12:26.273
> 
> 标签：ms-access, encryption, vb6, data-protection

我有一个 VB6/MDB 产品。

如果我想阻止客户端将数据从 MDB 大量传输到另一个数据库，我可以对 MDB 做些什么？

MDB 上的密码很容易被破解，所以这不是一种选择。

理想情况下，它将是某种只能由我的产品解密的加密。有没有现成的解决方案来实现这一目标？

编辑：我想过只加密一些重要的数据字段，例如客户姓名、ID，这会使数据库变得无用。但是，这仅适用于将来输入的任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:43:32.557

如果您真的担心这个问题，那么您最好的选择是将现有数据库升级到 Access 2007/2010 中使用的 ACCDB 格式。然后用数据库密码加密。

新格式使用 Windows Cryptographic API 进行数据库加密。此更改提高了通过蛮力攻击解密数据库所需的复杂程度。[此外，您可以按照本教程](http://www.databasejournal.com/features/msaccess/article.php/3752701/Secure-Microsoft-Access-Passwords-and-Encryption-in-Access-2007.htm)
增加 40 位的默认加密密钥

# xml-parsing - 从 Wikipedia XML 转储中获取静态 HTML 文件

> ID：10713330
> 
> 赞同：11
> 
> 时间：2012-05-23T04:12:27.990
> 
> 标签：xml-parsing, screen-scraping, web-crawler, mediawiki, wikipedia

我希望能够从我从[WikiMedia 转储页面下载的巨大（即使是压缩的）英文维基百科 XML 转储文件](http://dumps.wikimedia.org/enwiki/latest/)[enwiki-latest-pages-articles.xml.bz2](http://download.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2)中获取相对最新的静态 HTML 文件。似乎有很多可用的工具，尽管它们的文档很少，所以我不知道它们中的大多数是做什么的，或者它们是否与最新的转储保持同步。（我非常擅长构建可以通过相对较小的 HTML 页面/文件进行爬网的网络爬虫，尽管我对 SQL 和 XML 很糟糕，而且我不希望至少再过一年都能很好地使用它们。）我希望能够爬取从离线转储中获得的 HTML 文件，而无需求助于在线爬取维基百科。

有谁知道从最近的 Wikipedia XML 转储中获取静态 HTML 文件的好工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:21:16.193

首先，[导入数据](https://www.mediawiki.org/wiki/Manual%3aImporting_XML_dumps)。[然后使用DumpHTML](https://www.mediawiki.org/wiki/Extension%3aDumpHTML)创建 HTML 文件。虽然理论上很简单，但由于涉及的数据量和 DumpHTML 有点被忽视，这个过程在实践中可能会很复杂，所以请不要犹豫 [寻求帮助](https://www.mediawiki.org/wiki/Project%3aSupport_desk)。

# jsp - 适用于 Oracle iStore jsp 的可用 IDE。

> ID：10713334
> 
> 赞同：0
> 
> 时间：2012-05-23T04:13:00.767
> 
> 标签：jsp, oracle-apps, oracleapplications

我正在使用 Oracle 应用程序，为 oracle iStore 应用程序定制 jsp 页面。现在，我们正在使用 Dreamweaver 来查看和编辑 jsp 页面。页面可以使用 html、scriptlet 和样式进行编码。我是 iStore 应用程序的新手，我们可以使用 Eclipse 作为这个 jsp 页面的 IDE。或者任何其他更好的 IDE 可用于此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:55:20.090

您可以使用 Eclipse IDE 来编辑 jsp 文件。

Jdeveloper 是 oracle 指定用于 oracle 应用程序的 IDE。

# javascript - 如何从在 jquery 或 javascript 中自动完成的文本框中获取值

> ID：10713335
> 
> 赞同：0
> 
> 时间：2012-05-23T04:13:09.003
> 
> 标签：javascript, jquery, autocomplete

有一个文本框在加载时自动完成。假设它是一个电子邮件文本框

```
 $(document).ready(function () {

        var email = $("#txtEmail").text();

    }); 
```

我尝试通过此代码获取值，但它始终返回 null。如何获得自动完成的电子邮件值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:15:52.670

`var email = $("#txtEmail").val()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T04:16:05.860

您`.val()`为此使用：

```
var email = $("#txtEmail").val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T04:46:26.290

检查[演示](http://jsfiddle.net/yFQu4/1/)..我认为这是您真正想要的

**更新**

再看一个[演示](http://jsfiddle.net/3Cu9s/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T04:32:59.383

如果只有一种输入类型，则可以使用此链接，否则请使用 $("id of emial field").val(); [如果您的页面上只有一种输入类型，您可以使用：](http://jsfiddle.net/anupam/5Z643/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T04:35:01.210

要从 textarea 等输入字段中检索值，您必须使用文本`val()`以及从常规 html 标签（如 label、span、h1、h2 等）中获取值，您必须使用`text()`

```
$('#input_textarea').val(); //right way
$('#input_textarea').text(); // wrong way.returns null

$('#regular_html_tag').text(); // right way
$('#regular_html_tag').val(); // wrong way.It returtns NaN (not a number) 
```

# opencv - OpenCV：Ubuntu：NetBeans：cvSubdiv2DEdgeOrg“未声明”

> ID：10713344
> 
> 赞同：1
> 
> 时间：2012-05-23T04:15:16.667
> 
> 标签：opencv, netbeans-6.9, ubuntu-11.10

我在 Ubuntu 11.10 上使用 OpenCV 2.4 和 NetBeans 7.0.1。

当我尝试编译包含以下内容的代码时

```
CvSubdiv2DPoint* pt = cvSubdiv2DEdgeOrg( t ); 
```

我收到以下编译错误

```
error: there are no arguments to ‘cvSubdiv2DEdgeOrg’ that depend on a template parameter, so a declaration of ‘cvSubdiv2DEdgeOrg’ must be available [-fpermissive]
note: (if you use ‘-fpermissive’, G++ will accept your code, but allowing the use of an undeclared name is deprecated) 
```

当我右键单击 CvSubdiv2DPoint 并选择 Navigate:Got to Declaration/Definition 时，它在 types_c.h 中定义。如果据称“未声明”，我不明白我如何得到定义。另外，如果我包括

```
#include "types_c.h" 
```

并确保 types_c.h 在包含路径中，我仍然收到上面的错误消息。

彼得，我们将不胜感激在解决这个问题方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:38:48.503

它被转移到遗产。您需要包含其标题：

```
#include "opencv2/legacy/legacy.hpp" 
```

# javascript - JavaScript函数未按预期返回数组

> ID：10713347
> 
> 赞同：2
> 
> 时间：2012-05-23T04:15:34.703
> 
> 标签：javascript, jquery

我有一个 json 数组和一个简单的函数来返回一些数据。我可以将我想要的数据位记录到控制台（该函数当前执行此操作以进行测试），但它没有返回。

Stackers，请帮助我疲惫的大脑，让我知道我在哪里搞砸了。

（代码超级不言自明，函数调用在.js的底部）

[http://jsfiddle.net/BDJeU/](http://jsfiddle.net/BDJeU/)

```
function getCountryData(data, country)
{
    $.each(data, function(index) {

        if( data[index]["Country"] == country )
        {
            console.log( data[index]["Country"] );
            console.log( data[index]["data"] );
            return data[index]["data"];
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:19:17.160

尝试这个：

[http://jsfiddle.net/BDJeU/3/](http://jsfiddle.net/BDJeU/3/)

```
 function getCountryData(data, country)
    {
        var returnData;
        $.each(data, function(index) {

            if( data[index]["Country"] == country )
            {
                returnData = data[index]["data"];
                return false;
            }
        });
        return returnData;
    } 
```

它不起作用的原因是因为您要返回该`each`函数。因此，设置一个在迭代之外分配值的变量将为您提供所需的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:19:07.020

[`$.grep()`](http://api.jquery.com/jQuery.grep/)在这种情况下可能会更好：http: [//jsfiddle.net/zerkms/BDJeU/12/](http://jsfiddle.net/zerkms/BDJeU/12/)

```
function getCountryData(data, country)
{
    var result = $.grep(data, function(item) {
        return item["Country"] == country;
    });

    return result && result[0] && result[0]['data'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T04:20:08.783

您的回报在`each`. 所以`getCountryData`本身没有返回（所以默认返回未定义）。它需要是这样的：

```
function getCountryData(data, country)
{
    var result;
    $.each(data, function(index) {

        if( data[index]["Country"] == country )
        {
            console.log( data[index]["Country"] );
            console.log( data[index]["data"] );
            result = data[index]["data"];
        }
    });

    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T04:22:17.063

您需要返回外部`each`并使用`return`以尽早退出`each`迭代：

```
function getCountryData(data, country)
    {
        var res;
        $.each(data, function(index) {

            if( data[index]["Country"] == country )
            {
                res = data[index]["data"];

                // once found, stop searching and
                // break early out of the each iteration                  
                return; 
            }
        });
        return res;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T04:34:44.907

你真的应该使用每个吗？如果您尝试将结果过滤为单个答案，请尝试

```
function getCountryData(data, country) {
    var matchingCountries = $.grep(data, function(row){
        return row.Country == country;
    });
    if (matchingCountries.length > 0)
        return matchingCountries[0].data;
} 
```

# ruby-on-rails - 尝试运行 rake db:migrate 时出错

> ID：10713358
> 
> 赞同：2
> 
> 时间：2012-05-23T04:16:55.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我尝试命令 rake db:migrate 时出现以下错误

```
> NOTE: Gem.source_index is deprecated, use Specification. It will be
> removed on or after 2011-11-01\. Gem.source_index called from
> /home/hilarl/workspace/depot/vendor/rails/railties/lib/rails/gem_dependency.rb:21.
> NOTE: Gem::SourceIndex#initialize is deprecated with no replacement.
> It will be removed on or after 2011-11-01\. Gem::SourceIndex#initialize
> called from
> /home/hilarl/workspace/depot/vendor/rails/railties/lib/rails/vendor_gem_source_index.rb:100.
> NOTE: Gem::SourceIndex#add_spec is deprecated, use
> Specification.add_spec. It will be removed on or after 2011-11-01.
> Gem::SourceIndex#add_spec called from
> /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:91.
> NOTE: Gem::SourceIndex#add_spec is deprecated, use
> Specification.add_spec. It will be removed on or after 2011-11-01.
> Gem::SourceIndex#add_spec called from
> /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:91.
> NOTE: Gem::SourceIndex#add_spec is deprecated, use
> Specification.add_spec. It will be removed on or after 2011-11-01.
> Gem::SourceIndex#add_spec called from
> /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:91.
> NOTE: Gem::SourceIndex#add_spec is deprecated, use
> Specification.add_spec. It will be removed on or after 2011-11-01.
> Gem::SourceIndex#add_spec called from
> /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:91.
> NOTE: Gem::SourceIndex#add_spec is deprecated, use
> Specification.add_spec. It will be removed on or after 2011-11-01.
> Gem::SourceIndex#add_spec called from
> /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:91.
> NOTE: Gem::SourceIndex#add_spec is deprecated, use
> Specification.add_spec. It will be removed on or after 2011-11-01.
> Gem::SourceIndex#add_spec called from
> /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:91.
> WARNING: 'require 'rake/rdoctask'' is deprecated.  Please use 'require
> 'rdoc/task' (in RDoc 2.4.2+)' instead.
>     at /home/hilarl/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rdoctask.rb
> rake aborted! can't activate activesupport-3.2.3, already activated
> activesupport-2.3.14
> 
> (See full trace by running task with --trace) 
```

知道为什么会这样吗？我正在使用 ubuntu，在我的系统上安装了 ruby​​ 1.9.3-p194 和 rails 2.3.14 并使用 sqlite3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:40:06.000

你能试着跑步吗

`bundle exec rake db:migrate`

您可以在系统中安装同一个 gem 的不同版本 - 因此 `bundle exec <command>` 使用与您的项目 Gemfile 绑定的 gem（在 Gemfile.lock 文件中搜索您的 gem 以查看正在使用的版本）。

更好的做法是创建 gemsets 来打包选择的 gems 版本，这些版本将根据上下文中的项目被激活。

[http://bcardarella.com/post/699582642/rvm-gemsets-bundler-awesome](http://bcardarella.com/post/699582642/rvm-gemsets-bundler-awesome)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:10:40.080

检查您安装了哪些版本的 rails：

```
$ gem list rails

*** LOCAL GEMS ***

rails (3.2.3, 2.3.14) 
```

你应该像我在这里做的那样拥有多个 3.2.3 和 2.3.14

之后卸载你不需要的那些：

```
$ gem uninstall rails -v2.3.14
Remove executables:
    rails

in addition to the gem? [Yn]  Y
Removing rails
Successfully uninstalled rails-2.3.14 
```

最后你应该只有一个版本的rails：

```
$ gem list rails

*** LOCAL GEMS ***

rails (3.2.3) 
```

# image - 图像的动态内容更改

> ID：10713359
> 
> 赞同：0
> 
> 时间：2012-05-23T04:17:02.887
> 
> 标签：image, dreamweaver, photoshop, ui-design

我正在做一个网站项目，并不擅长设计。我需要在
[http://www.proptiger.com/images/banners/Top-–-generic-ad-for-Sai-Proviso-County-251x81.gif上创建图像](http://www.proptiger.com/images/banners/Top-–-generic-ad-for-Sai-Proviso-County-251x81.gif)

现在这是一个**.gif**图像，它有一个可更改的文本。起初我以为那是两个图像或 FLASH 的东西，但它们不是。另外，没有更改内容或文本的代码。不太熟悉 photoshop 或其他设计工具。这里需要它们还是可以通过其他方式完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:08:40.073

.gif文件在设计方面有一些优势，首先对于网页设计，它可以节省透明度，其次，它可以节省帧（很像flash视频）

* * *

此图像只需创建一个静态图像（背景），然后在 Photoshop 中将两个文本层放在它们上面。一种说法是 Dombivali 的公寓，另一种说法是 1/2 BHK Apts 开始（奇怪的标志）21.22 Lac。

然后，通过在相应图层前面按下小眼睛来隐藏其中一个文本图层。然后打开 Photoshop 动画窗口（Window->Animation）。并从那里制作你的动画。

* * *

现在以下内容可能不正确，因为我已经有一段时间没有在 Photoshop 中创建动画了。但是对于 CS4 或更早版本，您需要创建单独的框架，并在这些框架上隐藏和显示不同的图层。但在 CS5 中，您的时间线与 After Effects 中的时间线相似。每个图层都将显示在时间轴中，您从这里所做的就是让所有图层可见（在本例中为背景、文本 1 和文本 2），然后按下两个文本图层旁边的小箭头，打开时间线控件。

* * *

如果您只想显示文本，请按 Opacity 前面的秒表。现在会出现一个黄色的小钻石。这是你的关键帧。从那里你转到另一个帧，再次按下秒表，创建另一个关键帧，并更改特定图层的不透明度级别。这样，Photoshop 将为您创建介于两者之间的帧。

* * *

为您的图像设置动画后，转到文件->保存为网络和设备。选择右上角的 Gif，然后按保存。在保存选项中，您也可以选择保存 HTML。

希望这可以帮助。

# php - WordPress 插件的 Facebook API 集成和延长访问令牌时间

> ID：10713360
> 
> 赞同：0
> 
> 时间：2012-05-23T04:17:21.373
> 
> 标签：php, facebook, facebook-graph-api

最终，我正在为我的教会建立一个网站，他们有一个或两个 Facebook 帐户，完成页面和群组，我希望能够访问所有这些以从该网站获取他们的提要并发布给他们等，所以我相信我需要所有这些的访问令牌。我只是不知道从哪里开始。

* * *

好的，所以我开始迷失在所有这些身份验证的东西中。我读过

*   要代表用户执行操作，您需要该用户的访问令牌，并且
*   要代表页面或应用程序执行操作，访问它们的令牌等等。
*   您还需要注册一个显然不允许来自两个或多个不同域的 API 访问的应用程序。

由于文档分散，我迷失了如何构建应用程序来做我想做的事情。我想制作一个 WordPress 插件，让我能够链接到我的客户可能拥有的任何相关页面、用户帐户、应用程序等，并能够代表他们进行 API 调用。

*如何设置这样的应用程序？如何优雅地处理 OAuth 等？*

到目前为止，我几乎只是编写了一个存储 App ID 等的类，并保留了访问令牌，因为我猜用户在通过 OAuth 过程时登录了什么，并且该类检查该令牌是否过期。

你们中的一些经验丰富的 Facebook 开发人员能否帮助我开始创建这样的应用程序的相对标准？请不要在没有指导我如何使用该信息的情况下将我发送到 Facebook 文档页面。我已经阅读了很多，它很有帮助，但有点不完整。我希望这个 WordPress 插件相对通用，所以我可以将它放到其他 WordPress 安装中，并连接到我需要的任何 Facebook 帐户、页面、组和其他地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:23:16.403

如果您想创建一个一次性的 WordPress 插件供您自己使用，您可以跳过 oauth 身份验证内容，只需使用 Graph Explorer 工具生成一个 access_token（授予发布到页面等的相关权限）：[https:// developer.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

或按照此处的说明生成应用访问令牌： [https ://developers.facebook.com/docs/opengraph/using-app-tokens/](https://developers.facebook.com/docs/opengraph/using-app-tokens/)

使其通用将需要使用 WordPress 文档作为起点设置可配置插件，然后连接到 Facebook API。有两种方法可以解决：

*   让用户从 Facebook 输入他们的 App ID、App Secret 和其他 App 信息并通过插件对其进行身份验证，或者
*   让用户自己生成访问令牌，并让他们在设置页面上将其输入到 WP 插件中。

创建 WordPress 插件和从 Facebook 发布/获取内容的过程太复杂，无法在此解释。您将不得不使用来自 WordPress 和 Facebook 的文档来完成此操作（无论您是否喜欢）。

已经存在可以为您处理身份验证过程的插件，我将从那里开始。扩展现有插件以执行您想要的操作，或创建一个基于身份验证插件的新插件。它最终将为您节省大量工作。

# string - 查找并替换多个文本文件中的特定字符串

> ID：10713361
> 
> 赞同：0
> 
> 时间：2012-05-23T04:17:28.780
> 
> 标签：string, text, vbscript, replace, text-files

如何使用 vbscript 在某个文件夹中存在的多个文本文件中查找和替换特定字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:08:34.450

```
' This code replaces one string by another inside files looping though subfolders.
' It is vbscript so copy the text below in a .txt file and rename to .vbs
' It will take any non zero bytes file except for extensions you filter out in advance.

Option Explicit
Dim objFilesystem, objFolder, objFiles, objFile, tFile, objShell, objLogFile,objFSO, objStartFolder, colFiles
Dim SubFolder, FileText, bolWriteLog, strLogName, strLogPath, strCount, strCount2, strOldText, strNewText, strEXT
bolWriteLog = True
Const ForReading = 1
Const ForWriting = 2
Const TriStateUseDefault = -2
Set objFilesystem = WScript.CreateObject("Scripting.FileSystemObject")
Set objShell = CreateObject("wscript.Shell")
strLogName = "log.txt"
strLogPath = "C:\" & strLogName

strCount = 0
strCount2 = 0
strOldText="Dim"
strNewText="Dim-"
strEXT = "exe,dll,ps"

'Initialize log file
If bolWriteLog Then
   on error resume next
   Set objLogFile = objFileSystem.OpenTextFile(strLogPath, 2, True)
   WriteLog "############### Start Log ##################"
   If not err.number = 0 then
      msgbox "There was a problem opening the log file for writing." & chr(10) & _
         "Please check whether """ & strLogPath & """ is a valid file and can be openend for writing." & _
         chr(10) & chr(10) & "If you're not sure what to do, please contact your support person.",vbCritical, "Script Error"
      wscript.quit
   end if
   on error goto 0
end If

Set objFSO = CreateObject("Scripting.FileSystemObject")
objStartFolder = "C:\temp\"

Set objFolder = objFSO.GetFolder(objStartFolder)
Wscript.Echo objFolder.Path
Set colFiles = objFolder.Files
For Each objFile in colFiles
    Wscript.Echo objFile.Name
' Now we have an exception for all files that can not be opened in text modus: all extensions such as "exe" should be listed upfront.
    If Instr(1,strEXT, Right(LCase(objFile.Name), 3))=0 and objFile.size> 0 Then
ReplaceText(objFile)
End If

Next

ShowSubfolders objFSO.GetFolder(objStartFolder)

Sub  ReplaceText(objFile)

    strCount = strCount + 1
        WriteLog("Opening " & objFile.Name)
        Set tFile = objFile.OpenAsTextStream(ForReading, TriStateUseDefault)
        FileText = tFile.ReadAll
        tFile.Close
        If InStr(FileText, strOldText) Then
             WriteLog("Replacing " & strOldText & " with " & strNewText & ".")
             FileText = Replace(FileText, strOldText, strNewText)
                WriteLog("Text replaced")
        Else
                WriteLog(strOldText & " was not found in the file.")
                strCount2 = strCount2 +1
        End If
        Set tFile = objFile.OpenAsTextStream(ForWriting, TriStateUseDefault)
        tFile.Write FileText
        tFile.Close
        FileText = ""
strCount = 0
strCount2 = 0
End Sub

Sub ShowSubFolders(Folder)
For Each Subfolder in Folder.SubFolders
    Wscript.Echo Subfolder.Path
    Set objFolder = objFSO.GetFolder(Subfolder.Path)
    Set colFiles = objFolder.Files
    For Each objFile in colFiles
Wscript.Echo objFile.Name
ReplaceText(objFile)
    Next
    ShowSubFolders Subfolder
Next
End Sub

WriteLog "###############  EndLog  ##################"

WScript.Echo "Script Complete"
objShell.Run "C:\" & strLogName

'Clear environment and exit
On Error Resume Next

Set tFile = Nothing
Set objFile = Nothing
Set objFiles = Nothing
Set objFolder = Nothing
Set objLogFile = Nothing
Set objFilesystem = Nothing
Set objShell = Nothing

WScript.Quit

'Subs and functions ********** DO NOT EDIT ***************

sub WriteLog(sEntry)
   If bolWriteLog then objLogFile.WriteLine(Now() & ": Log:      " & sEntry)
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T10:35:39.407

lnafziger，谷歌一些东西，先自己尝试一些东西，如果你卡住了，然后问一个问题，这里有一些功能可以帮助你入门

```
Function ReplaceTest(patrn, replStr)
  Dim regEx, str1               ' Create variables.
  str1 = "The quick brown fox jumped over the lazy dog."
  Set regEx = New RegExp            ' Create regular expression.
  regEx.Pattern = patrn            ' Set pattern.
  regEx.IgnoreCase = True            ' Make case insensitive.
  ReplaceTest = regEx.Replace(str1, replStr)   ' Make replacement.
End Function

MsgBox(ReplaceTest("fox", "cat"))      ' Replace 'fox' with 'cat'. 
```

在这里可以循环浏览文件

```
Set fso = CreateObject("Scripting.FileSystemObject")
Call getFilesAndReplace(fso.GetFolder(map))
'--- ---'
Sub getFilesAndReplace(Folder)
  Dim files, file, Subfolder
  on error resume next
  For Each Subfolder in Folder.SubFolders
    Wscript.Echo "check " & Subfolder.path
    For Each file in Subfolder.files
      Wscript.Echo "replacing " & file.path
      'your replace routine
    Next
    Call getFilesAndReplace(Subfolder) 'recurse
  Next
End Sub 
```

# html - 如何在 vb.net 中创建特殊字符串

> ID：10713365
> 
> 赞同：1
> 
> 时间：2012-05-23T04:17:53.777
> 
> 标签：html, xml, vb.net, utf-8, character-encoding

在古代，我们可以用`chr(56)`

例如，假设字符不可打印。我们想把它放在一个字符串中。做就是了

```
Dim a as string = chr (56) 
```

现在我们有了 UTF8 或 unicode（或任何编码）。

假设我希望变量 a 包含

```
 &#8194;    &ensp;      en space
 &#8195;    &emsp;      em space
 &#8201;    &thinsp;    thin space
‌ &#8204;    &zwnj;      zero width non-joiner
‍ &#8205;    &zwj;       zero width joiner
‎ &#8206;    &lrm;       left-to-right mark
 &#8207;    &rlm;       right-to-left mark 
```

事实上，假设我想创建一个函数来从我的字符串中删除所有这些字符。

我该怎么做？

我希望该功能保持中文、韩文、日文字符完整，然后摆脱非常模糊的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:31:24.067

```
''' <summary>
''' This function replaces 'smart quotes' (ASC 145, 146, 147, 148, 150) with their correct ASCII versions (ASC 39, 34, 45), and replaces any other non-ASCII characters with "?"
''' </summary>
''' <param name="expression"></param>
''' <returns></returns>
''' <remarks></remarks>
Public Function Unicode2ASCII(ByVal expression As String) As String
  Dim sb As New System.Text.StringBuilder
  For i As Integer = 1 To Len(expression)
    Dim s As String = Mid(expression, i, 1)
    Select Case Asc(s)
      Case 145, 146 'apostrophes'
        sb.Append("'"c)
      Case 147, 148 'inverted commas'
        sb.Append(""""c)
      Case 150 'hyphen'
        sb.Append("-"c)
      Case Is > 127
        sb.Append("?"c)
      Case Else
        sb.Append(s)
    End Select
  Next i
  Return sb.ToString
End Function 
```

或者添加它们...

```
Dim s As String = "a" & ChrW(8194) & "b"
MsgBox(s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:44:06.867

[替换](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.replace)删除任何你想要的。[ChrW](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.chrw)按代码生成 Unicode 字符（要在 Unicode 平面 0 之外生成字符，您需要连接 2 个字符）。

就像是：

```
Replace("My text", ChrW(8194), ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:57:16.267

似乎应该有更好的方法，但我能想出的最好的方法在所有情况下都可以使用，如下所示：

```
Private Function getString(ByVal xmlCharacterCode As String) As String
    Dim doc As XmlDocument = New XmlDocument()
    doc.LoadXml("<?xml version=""1.0"" encoding=""utf-8""?><test>" + xmlCharacterCode + "</test>")
    Return doc.InnerText
End Function 
```

然后像这样使用它：

```
myString = myString.Replace(getString("&#8194;"), "") 
```

另外，您可能想看看我发现的这个页面：

[转换 &#XXXX; 的简单方法 在 .Net 中以编程方式或使用工具从 HTML 到 UTF-8 xml](https://stackoverflow.com/questions/3393153/easy-way-to-convert-xxxx-from-html-to-utf-8-xml-either-programmaticaly-in-ne)

# android - 在未连接 Internet 的情况下在 WebView 中显示空白页面

> ID：10713369
> 
> 赞同：1
> 
> 时间：2012-05-23T04:18:58.127
> 
> 标签：android

当移动用户没有 Internet 连接时，在我的 WebView 中显示 URL 地址。所以，我想当用户在没有 Internet 连接的 WebView 活动中显示白屏。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:03:19.277

首先，您应该以编程方式进行网络连接。

如果网络连接不可用，只需导航到另一个活动或为当前活动设置另一个布局。

# javascript - 我们如何冻结html表中的第一列和标题

> ID：10713373
> 
> 赞同：-1
> 
> 时间：2012-05-23T04:19:21.483
> 
> 标签：javascript, html-table, freeze

我没有任何好的解决方案来修复具有以下类型结构的表的头部和列：

```
 <table>    
    <thead>        
        <tr>            
            <th colspan="4">Current</th>            
            <th colspan="4">New/Requested</th>        
        </tr>        
        <tr>            
            <th nowrap="nowrap">RSD &nbsp;&nbsp;&nbsp;&nbsp;</th>           
            <th nowrap="nowrap">CRSD &nbsp;&nbsp;&nbsp;&nbsp;</th>            
            <th nowrap="nowrap">MSD &nbsp;&nbsp;&nbsp;&nbsp;</th>            
            <th nowrap="nowrap">Open QTY &nbsp;&nbsp;&nbsp;&nbsp;</th>            
            <th nowrap="nowrap">CRD &nbsp;&nbsp;&nbsp;&nbsp;</th>            
            <th nowrap="nowrap">CRSD &nbsp;&nbsp;&nbsp;&nbsp;</th>           
            <th nowrap="nowrap">MSD &nbsp;&nbsp;&nbsp;&nbsp;</th>            
            <th nowrap="nowrap">Open QTY &nbsp;&nbsp;&nbsp;&nbsp;</th>            
            <th nowrap="nowrap">Action</th>            
            <th nowrap="nowrap">Reason</th>            
            <th nowrap="nowrap">Action Code Status </th>        
        </tr>
    </thead>    
    <tbody>         
        <tr>             
            <td></td>              
            <td></td>                
            .....plenty of rows        
        </tr>     
    </tbody> 
</table> 
```

并通过 ajax 调用填充，请提供一个很好的解决方案，我也可以在其中使用我以前的 css。（意味着它不需要任何 CSS 更改）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T21:31:26.143

使用 css 作为您的解决方案。

为您需要的所有列创建第一个表，并仅呈现第一个固定列值，其余的在其中创建另一个表。

对于内部表格，给出一个特定的宽度和高度，并给出一个 css 溢出：滚动；

可能这个链接可以帮助你理解我的意思[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T04:28:28.857

你可以试试这样

```
<table>    
    <thead>        
        <tr>            
            <th colspan="4">Current</th>            
            <th colspan="4">New/Requested</th>        
        </tr>        
        <tr>            
            <th nowrap="nowrap">RSD aaaa</th>           
            <th nowrap="nowrap">CRSD aaaa</th>            
            <th nowrap="nowrap">MSD aaaa</th>            
            <th nowrap="nowrap">Open QTY aaaa</th>            
            <th nowrap="nowrap">CRD aaaa</th>            
            <th nowrap="nowrap">CRSD aaaa</th>           
            <th nowrap="nowrap">MSD aaaa</th>            
            <th nowrap="nowrap">Open QTY aaaa</th>            
            <th nowrap="nowrap">Action</th>            
            <th nowrap="nowrap">Reason</th>            
            <th nowrap="nowrap">Action Code Status </th>        
        </tr>
    </thead>
</table>
<div style='height: 150px; overflow: scroll;'>
<table> 
    <tbody>         
        <tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr><tr>             
            <td>a</td>              
            <td>a</td>         
        </tr>     
    </tbody> 
</table>
</div> 
```

# css - 视觉 CSS 结构和比较它们的东西

> ID：10713377
> 
> 赞同：4
> 
> 时间：2012-05-23T04:19:44.010
> 
> 标签：css, ide, editor

我正在寻找一种工具来帮助进行一些 CSS 编辑，但我不打算以看似正常的方式使用它。

我有一个正在重新设计的网站，我们已经有了带有更改的 CSS 文件，因为它已经应用于相关网站。

我理想中想要的是某种类型的编辑器，它可以帮助我可视化旧 CSS 和新 CSS 的结构或层次结构，这样我就可以更轻松地找到可以很好地交叉的类，需要调整的类，以及需要从头开始创建的类。

我不担心自动完成，或者能够立即查看更改或类似的东西，我真正想要的只是查看和遍历它的简单方法。

有谁知道可以做到这一点？理想情况下是免费或开源的，但欢迎所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:08:37.703

试试这个工具：[比较 CSS 样式表工具](http://www.alanhart.co.uk/archives/2010/12/15/compare-css-stylesheet-tool/)

# java - 为什么不能在执行时实现重载？

> ID：10713379
> 
> 赞同：8
> 
> 时间：2012-05-23T04:20:03.883
> 
> 标签：java, overloading, language-design

请参见以下示例：

```
interface I {}

class A implements I {}

class B implements I {}

class Foo{
    void f(A a) {}
    void f(B b) {}
    static public void main(String[]args ) {
        I[] elements = new I[] {new A(), new B(), new B(), new A()};
        Foo o = new Foo();
        for (I element:elements)
            o.f(element);//won't compile
    }
} 
```

为什么重载方法不支持向上转换？

如果在运行时实现重载，它将提供更大的灵活性。例如，访问者模式会更简单。是否有任何技术原因阻止 Java 这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T04:33:32.083

重载解决涉及一些重要的规则来确定最适合的重载，并且很难在运行时有效地执行这些操作。相比之下，覆盖解决方案更容易——在困难的情况下，您只需查找`foo`对象类的函数，而在简单的情况下（例如，当只有一个实现，或在此代码路径中只有一个实现时），您可以将虚拟方法转换为静态编译的、非虚拟的、非动态调度的调用（如果你是根据代码路径来做的，你必须做一个快速检查以验证对象实际上是你期望）。

事实证明，Java 1.4 及更低版本没有运行时覆盖解决方案是一件好事，因为这会使泛型更难改造。泛型在覆盖解析中发挥作用，但由于擦除，此信息在运行时不可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T15:14:29.093

没有*理论上*的理由不能做到这一点。Common Lisp 对象系统支持这种类型的构造——称为*多重分派*——尽管它在一个稍微不同的范式中这样做（方法，而不是附加到对象，是*泛型*（或泛型函数）的实例，它可以在多个参数值的运行时）。我相信 Java 也有扩展来启用它（我想到了 Multi-Java，尽管这可能是多重继承而不是多重分派）。

但是，除了语言设计者认为不应该这样做之外，可能还有 Java 语言无法完成的原因，我会让其他人去推理。不过，它确实给继承带来了复杂性。考虑：

```
interface A {}
interface B {}
class C implements A {}

class Foo {
    public void invoke(A a) {}
    public void invoke(B b) {}
}

class Bar extends Foo {
    public void invoke(C c) {}
}

class Baz extends Bar {
    public void invoke(A a) {}
}

Baz obj = new Baz();
obj.invoke(new C); 
```

哪个`invoke`被调用？`Baz`? `Bar`? 是什么`super.invoke`？提出确定性语义是可能的，但至少在某些情况下，它们可能会涉及混淆和意外。鉴于 Java 旨在成为一种简单的语言，我认为引入这种混淆的特性可能不会被视为符合其目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T21:32:46.783

> 是否有任何技术原因阻止 Java 这样做？

**代码正确性**：您当前的示例提供了 I 的两个实现和两个相应的方法 f。然而，没有什么能阻止其他实现 I 的类的存在 - 将分辨率移动到运行时也会将编译错误替换为可能隐藏的运行时错误。

**性能**：正如其他人所提到的，方法重载涉及相当复杂的规则，在编译时这样做肯定比在运行时为每个方法调用都这样做要快。

**向后兼容性**：当前重载的方法是使用传递参数的编译时类型而不是它们的运行时类型来解决的，改变行为以使用运行时信息会破坏许多现有的应用程序。

**如何解决它**

使用访问者模式，我不明白有人会认为它很难。

```
interface I{
      void accept(IVisitor v);
}
interface IVisitor{
      void f(A a);
      void f(B b);
}

class A implements I{
    void accept(IVisitor v){v.f(this);}
}
class B implements I{
    void accept(IVisitor v){v.f(this);}
}
class Foo implements IVisitor{
 void f(A a) {}
 void f(B b) {}
 static public void main(String[]args ) {
    I[] elements = new I[] {new A(), new B(), new B(), new A()};
    Foo o = new Foo();
    for (I element:elements)
        element.accept(o);
 }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T06:44:01.103

我认为除了语言的设计者之外没有人可以回答这个问题。我不是该主题的专家，但我将仅提供我的意见。

通过阅读[JLS 15.12](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12)关于方法调用表达式，很明显选择正确的方法来执行是一个已经很复杂的编译时过程；首先是在引入泛型之后。

现在想象一下将所有这些转移到运行时只是为了支持[mutimemethods](http://en.wikipedia.org/wiki/Multiple_dispatch)的单一特性。对我来说，这听起来像是一个给语言增加了太多复杂性的小特性，并且可能是一个具有一定性能影响的特性，因为所有这些决定都需要在运行时一遍又一遍地做出，而不仅仅是一次，就像今天一样，在编译时。

对于所有这些，我们可以添加一个事实，即由于[类型擦除](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)，不可能确定某些泛型类型的实际类型。在我看来，放弃静态类型检查的安全性并不符合 Java 的最佳利益。

无论如何，有有效的替代方案来处理多分派问题，也许这些替代方案几乎可以证明为什么它没有在该语言中实现。因此，您可以使用经典的[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)，也可以使用一定量的反射。

有一个过时的[MultiJava 项目](http://multijava.sourceforge.net/)在 Java 中实现了多调度支持，还有几个其他项目使用反射来支持 Java 中的多方法：[Java Multimethods](http://www.lshift.net/blog/2006/06/23/multimethods-for-java)，[Java Multimethods Framework](http://igm.univ-mlv.fr/~forax/works/jmmf/)。也许还有更多。

您还可以考虑另一种支持多方法的基于 Java 的语言，例如[Clojure](http://clojure.org/multimethods)或[Groovy](https://blogs.oracle.com/sundararajan/entry/multimethods_in_groovy)。

此外，由于 C# 是一种在其一般哲学上与 Java 非常相似的语言，因此更多地研究它如何[支持多](http://blogs.msdn.com/b/laurionb/archive/2009/08/13/multimethods-in-c-4-0-with-dynamic.aspx)方法并思考在 Java 中提供类似功能的含义可能会很有趣。如果您认为这是 Java 中值得拥有的功能，您甚至可以提交[JEP](http://openjdk.java.net/jeps/1)，它可能会在 Java 语言的未来版本中被考虑在内。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-26T00:04:08.420

Guess you just have to settle with reflection:

```
import java.lang.reflect.*;

interface I {}    
class A implements I {}    
class B implements I {}

public class Foo {

    public void f(A a) { System.out.println("from A"); }
    public void f(B b) { System.out.println("from B"); }

    static public void main(String[]args ) throws InvocationTargetException
        , NoSuchMethodException, IllegalAccessException 
    {
        I[] elements = new I[] {new A(), new B(), new B(), new A()};
        Foo o = new Foo();
        for (I element : elements) {
            o.multiDispatch(element);    
        }
    }

    void multiDispatch(I x) throws NoSuchMethodException
        , InvocationTargetException, IllegalAccessException 
    {    
        Class cls = this.getClass();

        Class[] parameterTypes = { x.getClass() };
        Object[] arguments = { x };

        Method fMethod = cls.getMethod("f", parameterTypes);
        fMethod.invoke(this,arguments);
    }       
} 
```

Output:

```
from A
from B
from B
from A 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-23T04:47:02.670

不是Java的答案。这个功能虽然存在于 C# 4 中：

```
using System;

public class MainClass {     
    public static void Main() {
        IAsset[] xx = { 
             new Asset(), new House(), new Asset(), new House(), new Car() 
        };     
        foreach(IAsset x in xx) {
            Foo((dynamic)x);
        }
    }

    public static void Foo(Asset a) {
        Console.WriteLine("Asset");
    }

    public static void Foo(House h) {
        Console.WriteLine("House");
    }

    public static void Foo(Car c) {
        Console.WriteLine("Car");
    }     
}

public interface IAsset { }      

public class Asset : IAsset { }

public class House : Asset { }

public class Car : Asset { } 
```

输出：

```
Asset
House
Asset
House
Car 
```

如果您使用的是 C# 3 及以下版本，则必须使用反射，我在我的博客*Multiple Dispatch in C#*上发表了一篇关于它的文章：[http ://www.ienablemuch.com/2012/04/multiple-dispatch-in-c .html](http://www.ienablemuch.com/2012/04/multiple-dispatch-in-c.html)

如果你想在 Java 中进行多次调度，你可能会走反射路线。

这是 Java 的另一种解决方案：[http ://blog.efftinge.de/2010/03/multiple-dispatch-and-poor-mens-patter.html](http://blog.efftinge.de/2010/03/multiple-dispatch-and-poor-mens-patter.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-23T04:32:15.797

您的方法说它将接受`A`或`B`哪些是 的派生类`I`，然后它们可以包含更多详细信息`I`

```
void f(A a) {} 
```

当您尝试`A`在您的案例接口中发送超类时`I`，编译器需要确认您实际发送`A`的详细信息`A`可能不可用`I`，也只有在运行时`I`才会实际引用`A`编译时没有此类信息的实例。 , 所以你必须明确地告诉编译器`I`实际上是`A`or`B`并且你做一个演员来这么说。

# android - 广播 Android 相机视频

> ID：10713384
> 
> 赞同：9
> 
> 时间：2012-05-23T04:20:38.487
> 
> 标签：android, video-streaming

我想要的是`broadcast`一个远程位置的安卓相机视频，任何人都可以在他们的手机或网站上观看该视频。我已经成功地`unicast`在我的电脑上安装了 vlc 播放器。我尝试了`red5`server, `Adobe media server`, `ffmpeg`server 但都无效。他们每个人都只能`broadcast`从预先录制的文件中录制视频，但不能从任何直播流中录制视频。任何人都可以建议我做什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T13:12:18.167

我读到（我认为它甚至在 stackoverflow 上）你可以为 MediaRecorder 提供一个 TCP-Connection 的 FileHandle。然后您可以监听该连接，读取数据，将其打包并作为 RTSP/RTP-Stream 重新发送。

如果我碰巧找到原始帖子，我会在这里引用它。

**编辑：**

最初的帖子是：[从 Android 流式传输视频](https://stackoverflow.com/q/4155166/982149)

关于 Filedescriptor 的部分来自： http: [//www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system](http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system)

以防万一，我引用了博客中的相应示例：

```
String hostname = "your.host.name"; 
int port = 1234; 
Socket socket = new Socket(InetAddress.getByName(hostname), port);
ParcelFileDescriptor pfd = ParcelFileDescriptor.fromSocket(socket);
MediaRecorder recorder = new MediaRecorder(); // Additional MediaRecorder setup (output format ... etc.) omitted 
recorder.setOutputFile(pfd.getFileDescriptor());
recorder.prepare();
recorder.start(); 
```

但是，这仅通过线路发送视频文件数据。您可以保存它然后播放。但如前所述，它还不是流。

**更新：** 第一步您甚至不必使用 TCP 套接字。我刚刚被“LocalSocket”(1) 绊倒了，这也为您提供了一个 FileHandle 来提供 MediaRecorder。这些本地套接字是“AF_LOCAL/UNIX 域流套接字”。见[http://developer.android.com/reference/android/net/LocalSocket.html](http://developer.android.com/reference/android/net/LocalSocket.html)

到目前为止，我自己还没有尝试过以上所有方法，但很快就会尝试。所以也许我可以在不久的将来提供更多帮助:)

(1)出于安全原因， **LocalSocket**在较新的 Android 版本上不可用！请参阅 2015 年 11 月 25 日的更新。

**更新 2：** 刚刚在 Android Sources 中看到了“OUTPUT_FORMAT_RTP_AVP”。但它是隐藏的 :( 所以我想它将在未来的 Android API 版本中可用 [。https](https://github.com/android/platform_frameworks_base/blob/master/media/java/android/media/MediaRecorder.java) ://github.com/android/platform_frameworks_base/blob/master/media/java/android/media/MediaRecorder.java第 219 行：

```
public static final int OUTPUT_FORMAT_RTP_AVP = 7; 
```

*我没有尝试通过提供硬编码来欺骗隐藏`7`......如果有人这样做，请在此处发表评论！*

**更新 2015-11-25**

我刚刚遇到了 libstreaming：[https](https://github.com/fyhertz/libstreaming) ://github.com/fyhertz/libstreaming 我没有深入研究它，但似乎有很多关于从这个项目的 Android 流式传输（如果不仅使用它） . 我在那里读到**LocalSocket 解决方案**对于较新的 Android 版本无效 :( 但他们提供了一个替代方案：ParcelFileDescriptor。

# php - 如何在 Facebook FQL 上进行内部联接

> ID：10713394
> 
> 赞同：0
> 
> 时间：2012-05-23T04:22:18.503
> 
> 标签：php, facebook, facebook-fql

好的，我正在查询两个 FQL 表：Events 和 event_members。在一个查询中，我从用户和他的朋友那里获得所有事件（我们称之为 $events），在另一个查询中，我让所有成员“参加”所有这些事件（我们称之为 $attendingmembers）。这两个查询都在 php 上作为数组返回，并且您可能已经知道 FQL 不允许 INNER JOINS。

我想要做的是“规范化”数据，这样我就可以加入两个结果，并得到一个包含所有事件详细信息和参加该事件的人数的数组。两个数组共享一个共同的 KEY：eid。

在 sql 上它会很容易......内部连接。但是在 FQL 上没有内连接，所以我认为我应该使用 array_intersect 或类似的方法进行连接“php-side”，但我找不到这样做的方法。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:29:24.893

内部连接不会为您提供参加的人数。一个伯爵会。此外，这不是“规范化”数据，这样想会让人困惑。

要在编程语言（例如 PHP）中执行此操作，只需遍历数组并在每次找到元素时增加一个计数器。

# php - mySQL groupconcat 返回 BLOB xxxB / Kib

> ID：10713397
> 
> 赞同：0
> 
> 时间：2012-05-23T04:22:40.777
> 
> 标签：php, mysql, sql, blob

根据成员的建议和上一篇文章，我正在对 interspire 购物车数据库中的多个表运行查询，如下所示：

```
SELECT c.customerid, c.custconfirstname, c.custconemail, o.ordstatus, o.orddate, GROUP_CONCAT(  'Order Id: ', orderid,  ' | Product name: ', ordprodname,  ' | Quantity: ', ordprodqty,  '<br>' ) AS ordered_items
FROM isc_customers c
LEFT OUTER JOIN isc_orders o ON o.ordcustid = c.customerid
LEFT OUTER JOIN isc_order_products op ON op.orderorderid = o.orderid
LEFT OUTER JOIN isc_product_images pi ON pi.imageprodid = op.orderprodid
GROUP BY c.customerid
HAVING COUNT( DISTINCT o.ordcustid ) >0
AND o.ordstatus = 0
AND o.orddate < UNIX_TIMESTAMP( ) -  '18000'
AND o.orddate > UNIX_TIMESTAMP( ) -  '259200' 
```

我在 phpmyadmin 中得到的结果如下所示：

```
customerid  custconfirstname    custconemail        ordstatus   orddate     ordered_items
6532        Cust1               CUST1@EXAMPLE.COM   0           1337502962  [BLOB - 498B]
5522        Cust2               CUST2@EXAMPLE.COM   0           1337670453  [BLOB - 284B]
4321        Cust3               CUST3@EXAMPLE.COM   0           1337507476  [BLOB - 521B]
1235        Cust4               CUST4@EXAMPLE.COM   0           1337577095  [BLOB - 1.0  KiB]
9560        Cust5               CUST5@EXAMPLE.COM   0           1337518452  [BLOB - 1.0  KiB] 
```

当我尝试在 php 页面中回显结果以对其进行测试时，没有返回任何内容。我只是想知道 Blob 的含义以及如何使用它。很明显它里面有一些数据，我只是不知道如何访问或使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:53:58.170

在显示值上方的 phpmyadmin 中，您可以看到 +Options 按钮单击该按钮，然后检查 Show BLOB 内容并单击 Go 按钮。它将显示值。

您可以使用与访问 customerid 类似的方式使用 ordered_items。

在php中

```
foreach($resultSet as $row)
{
   $customerid = $row['customerid'];
   $ordered_items = $row['ordered_items'];
} 
```

变量 $ordered_items 包含在 phpmyadmin 中显示的值。

# mysql - 为自定义字段动态添加新列到表中

> ID：10713401
> 
> 赞同：0
> 
> 时间：2012-05-23T04:23:05.583
> 
> 标签：mysql

我正在为我的应用程序构建自定义字段功能。这允许管理员根据站点的需要添加自定义配置文件字段供用户填写。

架构很简单

```
field_meta (store some metadata about the field)
================================================
id
type //type of field
field_name //name of the field in the fields table
render_data //Some data to use when rendering the form field

field
===================
id
name //Default field that can't be deleted
address //Default field that can't be deleted
customfield_1
customfield_2 
```

该`field_meta`表用于存储字段的一些元数据，以便我们可以渲染表单字段。

然后将每个字段存储在`field`表中的一个新列中。

问题：为了可用性和不必处理用户选择保留字或使用非英语单词作为列名，我不会要求用户为列名选择名称。

我目前正在考虑按字段类型调用列名（应用程序中有很多类型（电子邮件、网站、文本、段落文本等），仅举几例）并添加一个数字。一些例子：

*   电子邮件_1
*   文本1
*   文本_2
*   文本_3
*   电子邮件_2
*   ETC

然而，这种方法的问题在于，它需要大量的工作才能得出列名。我需要获取所有列，选择与我正在创建的列类型相同的列，解析最大数，然后创建列。

有没有更好的策略来做到这一点？或者也许是一种完全不同的方式来命名消除这些问题的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:33:51.553

不要尝试动态添加列，这是一种缓慢（而且形式不佳）的方法。

相反，将额外的列存储在一个新表中，每个都有自己的 ID。然后有另一个表来存储用户 ID、额外的列 ID 和该用户的属性信息。这将模拟添加新列，而实际上不必这样做。

编辑：确实听起来像 EAV。架构：
属性{id：int，名称：字符串}
用户{id：int，名称：字符串，（任何其他需要......）}
用户属性{Attribute_id：int，User_id：int，Attribute_info：字符串}

然后只需将任何新属性输入 Attributes（ID 递增），并将任何新用户信息输入 User_attributes，并使用适当的 User_id 和 Attribute_id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T01:20:09.343

我决定采用我原来的方法，即基本上创建一个由类型和递增数字组成的列名：

*   电子邮件_1
*   文本1
*   文本_2
*   文本_3

虽然生成名称需要相当多的努力，但这仅在创建配置文件字段时完成，因此性能影响只会在此期间发生。

# mysql - 具有 Hibernate+MySql 性能的 Web 服务

> ID：10713402
> 
> 赞同：0
> 
> 时间：2012-05-23T04:23:12.667
> 
> 标签：mysql, performance, web-services, hibernate

我有带有 Hibernate 作为 DAL 的 Java (Axis2) webservice。使用 InnoDB 作为 MySql 引擎。

关于性能我有几个问题： 1\. 通常抓取速度很快，但时间可能会有所不同，有时查询时间太长？通常需要时间查询的是以下查询： 1 获取用户信息的 Web 服务请求 - 我们在用户表上执行此操作，进行搜索 - “名称如 . 1 获取用户食谱的 Web 服务请求（查询食谱，其中 r.user. userId == userId, userId在webservice中给出） 2.如何配置c3p0连接池以获得最佳性能？

这取自 hibernate.cfg

```
<property name="connection.autoReconnect">true</property>
  <property name="connection.autoReconnectForPools">true</property>
  <property name="connection.is-connection-validation-required">true</property>
  <property name="hibernate.connection.zeroDateTimeBehavior">convertToNull</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</property>
  <property name="hibernate.show_sql">false</property>
  <property name="hibernate.current_session_context_class">thread</property>
  <property name="hibernate.format_sql">true</property>
  <property name="hibernate.use_sql_comments">true</property>
  <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>

  <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
  <property name="hibernate.c3p0.min_size">3</property>
  <property name="hibernate.c3p0.max_size">50</property>
  <property name="hibernate.c3p0.timeout">280</property>
  <property name="hibernate.c3p0.max_statements">50</property>
  <!-- this property forces the revalidation of a connection after the given amount of time (in secs) -->
  <!-- it must be set to LESS than the wait_timout setting for the mysql server (this setting defaults to 28800 secs (8 hours)) -->
  <property name="hibernate.c3p0.idle_test_period">300</property> 
```

以下是调用 2 个方法时使用的 hbm.xml 文件……这是 user.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 21:48:14 27/03/2012 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.icdb.data.User" table="user" catalog="yoavDB">
        <id name="userid" type="java.lang.Integer">
            <column name="userid" />
            <generator class="identity" />
        </id>
        <property name="birthdate" type="string">
            <column name="birthdate" length="50" not-null="true" />
        </property>
        <property name="password" type="string">
            <column name="password" length="100" not-null="true" />
        </property>
        <property name="firstname" type="string">
            <column name="firstname" length="50" not-null="true" />
        </property>
        <property name="lastname" type="string">
            <column name="lastname" length="50" not-null="true" />
        </property>
        <property name="country" type="string">
            <column name="country" length="100" not-null="true" />
        </property>
        <property name="email" type="string">
            <column name="email" length="100" not-null="true" />
        </property>
        <property name="numOfRecipes" type="int">
            <column name="numOfRecipes" not-null="true" />
        </property>
        <property name="picUrl" type="string">
            <column name="picUrl" length="200" />
        </property>
        <property name="rate" type="float">
            <column name="rate" precision="12" scale="0" not-null="true" />
        </property>
        <property name="fewWords" type="string">
            <column name="fewWords" length="200" not-null="true" />
        </property>
        <property name="whatscooking" type="string">
            <column name="whatscooking" length="45" not-null="true" />
        </property>
        <set name="usermessagesesForSenderUserId" table="usermessages" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="senderUserId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Usermessages" />
        </set>
        <set name="usermessagesesForUserId" table="usermessages" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Usermessages" />
        </set>
        <set name="timelines" table="timeline" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Timeline" />
        </set>
        <set name="generaltipses" table="generaltips" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="authorid" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Generaltips" />
        </set>
        <set name="userlastvisitsForVisitedUserId" table="userlastvisit" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="visitedUserId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Userlastvisit" />
        </set>
        <set name="recipes" table="recipe" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="ownerid" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Recipe" />
        </set>
        <set name="userlikeses" table="userlikes" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Userlikes" />
        </set>
        <set name="friendshiptablesForUserBId" table="friendshiptable" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userB_Id" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Friendshiptable" />
        </set>
        <set name="usersForFavUserId" table="userfavchefsync" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <many-to-many entity-name="com.icdb.data.User">
                <column name="favUserId" not-null="true" />
            </many-to-many>
        </set>
        <set name="friendshiptablesForUserAId" table="friendshiptable" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userA_Id" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Friendshiptable" />
        </set>
        <set name="usersForUserId" table="userfavchefsync" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="favUserId" not-null="true" />
            </key>
            <many-to-many entity-name="com.icdb.data.User">
                <column name="userId" not-null="true" />
            </many-to-many>
        </set>
        <set name="activitylogsForObjectUserId" table="activitylog" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="objectUserId" />
            </key>
            <one-to-many class="com.icdb.data.Activitylog" />
        </set>
        <set name="userlastvisitsForGuestUserId" table="userlastvisit" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="guestUserId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Userlastvisit" />
        </set>
        <set name="userrecipessyncs" table="userrecipessync" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Userrecipessync" />
        </set>
        <set name="activitylogsForUserId" table="activitylog" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Activitylog" />
        </set>
        <set name="recipereviews" table="recipereview" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="reviewerid" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Recipereview" />
        </set>
    </class>
</hibernate-mapping> 
```

这是 recipe.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 21:48:14 27/03/2012 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.icdb.data.Recipe" table="recipe" catalog="yoavDB">
        <id name="recipeid" type="java.lang.Integer">
            <column name="recipeid" />
            <generator class="identity" />
        </id>
        <many-to-one name="user" class="com.icdb.data.User" fetch="select">
            <column name="ownerid" not-null="true" />
        </many-to-one>
        <property name="releasedate" type="timestamp">
            <column name="releasedate" length="19" not-null="true" />
        </property>
        <property name="preparationtime" type="int">
            <column name="preparationtime" not-null="true" />
        </property>
        <property name="recipedifficulty" type="int">
            <column name="recipedifficulty" not-null="true" />
        </property>
        <property name="name" type="string">
            <column name="name" length="50" not-null="true" unique="true" />
        </property>
        <property name="description" type="string">
            <column name="description" length="200" />
        </property>
        <property name="lastupdated" type="timestamp">
            <column name="lastupdated" length="19" not-null="true" />
        </property>
        <property name="servecount" type="java.lang.Integer">
            <column name="servecount" />
        </property>
        <property name="complete" type="boolean">
            <column name="complete" not-null="true" />
        </property>
        <property name="category" type="int">
            <column name="category" not-null="true" />
        </property>
        <property name="numOfViews" type="int">
            <column name="numOfViews" not-null="true" />
        </property>
        <property name="indexOfRecipeOfUser" type="int">
            <column name="indexOfRecipeOfUser" not-null="true" />
        </property>
        <property name="picUrl" type="string">
            <column name="picUrl" length="200" />
        </property>
        <property name="numOfLikes" type="int">
            <column name="numOfLikes" not-null="true" />
        </property>
        <property name="calculatedRate" type="float">
            <column name="calculatedRate" precision="12" scale="0" not-null="true" />
        </property>
        <set name="userlastvisits" table="userlastvisit" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="lastViewedRecipeId" />
            </key>
            <one-to-many class="com.icdb.data.Userlastvisit" />
        </set>
        <set name="recipeingredients" table="recipeingredient" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="recipeid" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Recipeingredient" />
        </set>
        <set name="recipereviews" table="recipereview" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="recipeid" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Recipereview" />
        </set>
        <set name="userlikeses" table="userlikes" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="recipeId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Userlikes" />
        </set>
        <set name="activitylogs" table="activitylog" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="objectRecipeId" />
            </key>
            <one-to-many class="com.icdb.data.Activitylog" />
        </set>
        <set name="userrecipessyncs" table="userrecipessync" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="recipeId" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Userrecipessync" />
        </set>
        <set name="recipeinstructions" table="recipeinstruction" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="recipeid" not-null="true" />
            </key>
            <one-to-many class="com.icdb.data.Recipeinstruction" />
        </set>
    </class>
</hibernate-mapping> 
```

友谊表：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 21:48:14 27/03/2012 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.icdb.data.Friendshiptable" table="friendshiptable" catalog="yoavDB">
        <composite-id name="id" class="com.icdb.data.FriendshiptableId">
            <key-property name="userAId" type="int">
                <column name="userA_Id" />
            </key-property>
            <key-property name="userBId" type="int">
                <column name="userB_Id" />
            </key-property>
        </composite-id>
        <many-to-one name="userByUserAId" class="com.icdb.data.User" update="false" insert="false" fetch="select">
            <column name="userA_Id" not-null="true" />
        </many-to-one>
        <many-to-one name="userByUserBId" class="com.icdb.data.User" update="false" insert="false" fetch="select">
            <column name="userB_Id" not-null="true" />
        </many-to-one>
        <property name="status" type="short">
            <column name="status" not-null="true" />
        </property>
        <property name="statusLastChangedDate" type="date">
            <column name="statusLastChangedDate" length="10" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

最后访问：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 21:48:14 27/03/2012 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.icdb.data.Userlastvisit" table="userlastvisit" catalog="yoavDB">
        <composite-id name="id" class="com.icdb.data.UserlastvisitId">
            <key-property name="guestUserId" type="int">
                <column name="guestUserId" />
            </key-property>
            <key-property name="visitedUserId" type="int">
                <column name="visitedUserId" />
            </key-property>
        </composite-id>
        <many-to-one name="userByVisitedUserId" class="com.icdb.data.User" update="false" insert="false" fetch="select">
            <column name="visitedUserId" not-null="true" />
        </many-to-one>
        <many-to-one name="userByGuestUserId" class="com.icdb.data.User" update="false" insert="false" fetch="select">
            <column name="guestUserId" not-null="true" />
        </many-to-one>
        <many-to-one name="recipe" class="com.icdb.data.Recipe" fetch="select">
            <column name="lastViewedRecipeId" />
        </many-to-one>
        <property name="lastVisitTimeStamp" type="timestamp">
            <column name="lastVisitTimeStamp" length="19" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

获取用户信息的 Java 代码：

```
public String[] getUserInfo(    int visitingUserId,
                                int visitedUserId )
{
    Session session = ICDBHibernateUtil.getSessionFactory().getCurrentSession();
    try
    {
        session.beginTransaction();

        User                user    = (User) session.get(User.class, visitedUserId);
        ArrayList<String>   ret     = new ArrayList<String>();

        // Username
        ret.add( user.getFirstname() + " " + user.getLastname() );

        // Few words
        ret.add( user.getFewWords() );

        // Num of recipes
        ret.add( Integer.toString( user.getNumOfRecipes() ) );

        // Calculated Rank
        ret.add( Float.toString( user.getRate() ) );

        // Pic url
        ret.add( user.getPicUrl() );

        FriendshiptableId   id = new FriendshiptableId( visitingUserId, visitedUserId );
        Friendshiptable     ft = (Friendshiptable)session.get( Friendshiptable.class, id );
        if( ft == null )
        {
            id = new FriendshiptableId( visitedUserId, visitingUserId );
            ft = (Friendshiptable)session.get( Friendshiptable.class, id );
            if( ft == null )
            {
                ret.add( "none" );
            }
            else
            {
                FriendshipRequestStatusEnum status = FriendshipRequestStatusEnum.values()[ ft.getStatus() ];
                switch( status )
                {
                    case PENDING:
                        ret.add( "pending" );
                        break;

                    case ACCEPTED:
                        ret.add( "accepted" );
                        break;

                    case DECLINED:
                        ret.add( "declined" );
                        break;
                }
            }
        }
        else
        {
            FriendshipRequestStatusEnum status = FriendshipRequestStatusEnum.values()[ ft.getStatus() ];
            switch( status )
            {
                case PENDING:
                    ret.add( "pending" );
                    break;

                case ACCEPTED:
                    ret.add( "accepted" );
                    break;

                case DECLINED:
                    ret.add( "declined" );
                    break;
            }
        }

        if( visitingUserId != -1 )
        {
            // Has new stuff....
            UserlastvisitId ulvId   = new UserlastvisitId( visitingUserId, visitedUserId );
            Userlastvisit   ulv     = (Userlastvisit) session.get( Userlastvisit.class, ulvId );
            if( ulv == null )
            {
                // Lets add a new entry
                User visitingUser   = (User) session.load( User.class, visitingUserId );
                User visitedUser    = (User) session.load( User.class, visitedUserId );

                ulv = new Userlastvisit(    ulvId, 
                                            visitingUser, 
                                            visitedUser, 
                                            new Date() );
                session.save( ulv );

                ret.add( "true" );
            }
            else
            {
                List<?> loginResult= session.createQuery("from Recipe r where r.lastupdated >= :lastVisited" )
                        .setDate( "lastVisited", ulv.getLastVisitTimeStamp() )
                        .list();
                if( loginResult.size() > 0 )
                {
                    ret.add( "true" );
                }
                else
                {
                    ret.add( "false" );
                }

                // We need to update the last visit time...
                ulv.setLastVisitTimeStamp( new Date() );
                session.save( ulv );
            }
        }

        session.getTransaction().commit();

        String[] retStr = new String[ret.size()];
        ret.toArray( retStr );

        return retStr;
    }
    catch( RuntimeException e )
    {
        ICDBHibernateUtil.getSessionFactory().getCurrentSession().getTransaction().rollback();
        throw e;
    }
} 
```

getuserRecipes 方法：

```
public String[] getUserRecipesNew(  int     visitingUserId,
                                        int     userId,     
                                        int     pageNumber )
    {
        final int       PAGE_SIZE   = 20;

        Session session = ICDBHibernateUtil.getSessionFactory().getCurrentSession();
        try
        {
            session.beginTransaction();

            String hql = "from Recipe r where r.user.userid= :userid";

            Query query = session.createQuery( hql )
                                .setInteger(    "userid",       userId );

            query = query.setFirstResult( PAGE_SIZE * (pageNumber - 1) );
            query.setMaxResults( PAGE_SIZE );

            List<?> recipes = query.list();

            ArrayList<String> ret = new ArrayList<String>();
            if( recipes.size() == PAGE_SIZE )
            {
                // Indicates that might be more results
                ret.add( "true" );
            }
            else
            {
                // No more results
                ret.add( "false" );
            }

            DateFormat df = new SimpleDateFormat("MM/dd/yyyy");

            // Format the Recipes into string
            for( int i = 0; i < recipes.size(); i++ )
            {
                UserlikesId     userLikeId  = new UserlikesId( userId, ((Recipe)recipes.get(i)).getRecipeid() );
                Userlikes       userLike    = (Userlikes) session.get( Userlikes.class, userLikeId );

                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getRecipeid() ) );
                ret.add( ((Recipe)recipes.get(i)).getName() );
                ret.add( ((Recipe)recipes.get(i)).getDescription() );
                ret.add( ((Recipe)recipes.get(i)).getUser().getFirstname() + ((Recipe)recipes.get(i)).getUser().getLastname() );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getRecipedifficulty() ) );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getServecount() ) );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getPreparationtime() ) );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getUser().getUserid() ) );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getNumOfViews() ) );
                ret.add( df.format( ((Recipe)recipes.get(i)).getReleasedate() ) );
                ret.add( (((Recipe)recipes.get(i)).getPicUrl() == null) ? "" : ((Recipe)recipes.get(i)).getPicUrl() );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getCategory() ) );
                ret.add( (userLike==null)?"0":(userLike.isIsLike()?"1":"0") );
                ret.add( Integer.toString( ((Recipe)recipes.get(i)).getNumOfLikes() ) );
            }

            session.getTransaction().commit();

            String[] retStr = new String[ret.size()];
            ret.toArray( retStr );

            return retStr;
        }
        catch( RuntimeException e )
        {
            ICDBHibernateUtil.getSessionFactory().getCurrentSession().getTransaction().rollback();
            throw e;
        }
    } 
```

一切都写好了吗？应该如何调整它以获得更好的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:03:48.690

首先衡量什么需要时间。然后尝试在需要的地方进行优化。

如果您的池太小，并且您的并发请求多于池的连接数，那么显然会有延迟。嵌套可能的罪魁祸首是查询：

*   打开 SQL 日志并查看是否所有 SQL 查询都是必要的（没有不必要的急切获取）
*   在 MySQL 中检查这些查询的执行计划，并查看是否没有缺少索引。

快速阅读您的代码，您正在执行手动 N + 1 查询：

1.  菜谱查询
2.  对于每个食谱，找到一个 Userlikes

您应该使用单个查询在单个查询中加载所有需要的数据。或者至少，您应该使用一个`where id in (:setOfUserLikesIds)`子句执行一个查询来一次加载所有 Userlikes。

# google-app-engine - 如何在 Google App Engine 的开发服务器上使用拉取队列

> ID：10713405
> 
> 赞同：5
> 
> 时间：2012-05-23T04:23:40.513
> 
> 标签：google-app-engine, task-queue

我们已经使用推送队列很长时间了，并且在使用来自开发服务器的任务时没有问题。

然而，在使用拉取队列实现新服务的过程中，很难弄清楚如何在开发服务器上做同样的事情。

基本上从文档中，我们可以看到您应该使用 REST api（我们不能使用直接队列 api，因为它由外部应用程序使用）来租用/删除端点为

```
https://www.googleapis.com/taskqueue/v1beta1/projects/taskqueues 
```

但显然这在本地开发服务器中不起作用，而且似乎没有地方谈论这个。

只是想知道是否有人遇到过同样的问题可以阐明一些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:36:36.103

使用 Pull Queue，任务使用者可以是[internal](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull#Pulling_Tasks_within_App_Engine)或[external](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull#Pulling_Tasks_from_Outside_App_Engine)。

如果您需要它在开发服务器上工作，那么只需创建一个处理程序（一个 servlet）并使用内部 API 来[添加](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull#Adding_Tasks_to_a_Pull_Queue)、[租用](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull#Leasing_Tasks)和[删除](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull#Deleting_Tasks)任务。

# java - 系统变量和用户变量如何工作

> ID：10713407
> 
> 赞同：0
> 
> 时间：2012-05-23T04:24:15.490
> 
> 标签：java, windows, maven, system-variable, user-variables

我在用户变量中配置了 maven home 并使用命令对其进行了测试`mvn --version`，系统将我提示为“mvn 不是命令”。但是如果我将它配置为系统变量它的工作。我确实在笔记本电脑中配置了系统变量。但是在我的办公室里，我没有改变系统变量的优势。

我的问题是。

a) 为什么系统在从系统变量配置而不是在用户变量配置时识别

b) 有没有其他方法可以配置它并在我的办公室笔记本电脑上顺利工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:29:01.790

好吧，我在工作中所做的（我遇到了同样的问题）是为二进制文件创建一个名为 PATH 的用户变量。然后它似乎在这里工作。

1.  右键我的电脑
2.  点击属性
3.  在左侧，您将找到高级系统设置（Windows 7）。点击它
4.  然后转到高级选项卡并单击环境变量
5.  现在创建一个名为 PATH 的新用户变量，其值是 maven 安装的路径。（例如：C:\maven\bin）

# jquery - 阻止Android双击缩放

> ID：10713408
> 
> 赞同：4
> 
> 时间：2012-05-23T04:24:30.030
> 
> 标签：jquery, html, android-browser

我正在制作一个（非常）小页面，语音和语言治疗师使用它来计算语音中的口吃。对于每个音节，他们按下一个“音节”按钮，对于每个口吃，他们按下一个“口吃”按钮。

预期用途是在 Android 平板电脑上。我有所有的代码工作（使用jQuery）。它在计算机上运行良好。问题是：你必须快速敲击（每个音节敲一次）。当您在 Android 浏览器上快速点击时，它会放大和缩小并变得疯狂。

那么有没有办法让页面有一个固定的宽度，所以感觉不需要放大和缩小，或者另一种方法告诉Android 4.0不要做双击缩放动作。

这是我的代码。我省略了 jQuery 和 head，因为我认为这无关紧要。但是你可以看到页面有多小。

```
...
<body>
<h2>Stutter Count</h2>
Syllables: <span id="s-count">0</span>
<br>
Errors: <span id="e-count">0</span>
<br>
Percent Errors: <span id="all-p-count"><span id="p-count">0</span>%</span>
<br><br>
<input type="button" value="Syllable" id="s-button">&nbsp;
<input type="button" value="Error" id="e-button">&nbsp;
<input type="button" value="Reset" id="reset">
</body>
</html> 
```

编辑：我的代码在这里：[http](http://www.duncannz.com/pages/stutter-count.php) ://www.duncannz.com/pages/stutter-count.php （桌面版），或[http://www.duncannz.com/pages/stutter-count.php?mobile= 1](http://www.duncannz.com/pages/stutter-count.php?mobile=1)（用于手机/平板电脑）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:00:30.643

您可以`<meta>`用来限制缩放：

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

Then in your `php`, check whether this is a mobile device, if so, echoes out that `meta` tag.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T00:52:31.563

```
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width"> 
```

Meta Viewport tag does solve the problem in most of the cases. But Android has a strange issue where on orientation change the meta tag is reset and you can scale or zoom the page again.

For fixing this issue in Android monitor orientaionchange and set meta viewport tag on every orientationchange event.

Here is the link with code snippet [http://moduscreate.com/orientation-change-zoom-scale-android-bug/](http://moduscreate.com/orientation-change-zoom-scale-android-bug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:18:18.813

我没有尝试您的代码，但是如果您在移动端使用 jQuery Mobile，这样的事情可能会有所帮助：

```
$("input").live("focus", function () {
$.mobile.zoom.disable(true);
});
$("input").live("blur", function () {
$.mobile.zoom.enable(true);
}); 
```

这段代码应该在你的 jQuery Mobile 包含之前。请注意，在您的情况下，焦点和模糊可能不是正确的事件。如果人们点击我的选择框，我会从我用来禁用缩放的截图中截取这个。

只是关于设计的一个说明：您可能需要考虑将您的状态保存到 html5 本地存储，并且仅在用户最终选择提交按钮时才提交计数。

# r - 从R中的其他列中查找具有相应值的最大数据

> ID：10713411
> 
> 赞同：0
> 
> 时间：2012-05-23T04:24:37.767
> 
> 标签：r, matrix

我有每日数据（4011 天）和指标（1 个工作日，2 个周末）。我想用相应的指标找到每周最大值。例如（假设）数据是：

```
mydat <- matrix(c(0.027,0.034,0.019,0.021,0.026,0.024,0.058,0.026,0.064,
     0.066,0.026,0.101,0.069,0.054,rep(2,2),rep(1,5),rep(2,2),rep(1,5)), ncol=2) 
```

我尝试使用以下代码。我设法获得最大序列（在这种情况下，每周最大值），但我不希望指标中的最大序列。这是代码

```
week.max <- function(vec){    
   if(length(vec[is.na(vec)]) == 7){       
   return(NA)     
   } 
   else{
     return(max(vec, na.rm = T))
   } 
}

max.week.dat <- apply(mydat, 2, function(x) tapply(x, rep(1:(length(x)/7), 
  each=7, len=length(x)), week.max)) 
```

和结果

```
matrix(c(0.058,0.101,2,2),ncol=2) 
```

我想要这样的输出：

```
matrix(c(0.058,0.101,1,1),ncol=2) 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:06:46.380

这是数据（第三周多出一天）

```
mydat <- data.frame(value = c(0.027,0.034,0.019,0.021,0.026,0.024,0.058,0.026,0.064,
     0.066,0.026,0.101,0.069,0.054,0.95), ind = c(rep(2,2),rep(1,5),rep(2,2),rep(1,5),2)) 
```

你的功能

```
week.max <- function(vec){    
  if(length(vec[is.na(vec)]) == 7){       
return(NA)     
 } 
 else{
return(max(vec, na.rm = T))
 } 
} 
```

添加周信息

```
mydat$week <- c(rep(1:2,each=7),3) 
```

[使用与此处](https://stackoverflow.com/questions/10705290/r-select-a-value-for-based-on-a-highest-value-in-another-column/10712545#10712545)相同的解决方案

```
library(plyr)
ddply(mydat, .(week), subset, subset = value==week.max(value), select = -week) 
```

# php - move_uploaded_file 文件在调用两次时不起作用

> ID：10713412
> 
> 赞同：2
> 
> 时间：2012-05-23T04:24:47.750
> 
> 标签：php

我有一个在 php 中上传文件的功能，例如：

```
function upload_file($folder,$name)
{
$dest = "../product/". $folder."/". $name;
$src       = $_FILES['image']['tmp_name'];
if (move_uploaded_file($src, $dest)) {
    } else {
        echo "<script> alert('" . $src . "');
            window.history.go(-1); </script>\n";
        exit();
    }
} 
```

当我只调用一次函数时，`upload_file('small','abc.jpg')`它工作正常，但我调用了两次，例如：

```
upload_file('small','abc.jpg')
upload_file('big','abc.jpg') 
```

它不适用于第二个文件夹“大”

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:32:49.810

`move_uploaded_file`已移至第一个目的地。因此，解决方案是获取第一个目标路径，然后将其复制到另一个目标路径。

这将是很多解决方案。其中之一，将参数更改为数组并对其进行迭代。

```
<?php
$filesDes = array(
           array('folder'=>'small','name'=>'abc.jpg'),
           array('folder'=>'big','name'=>'abc.jpg'));

function upload_file($arrayfile)
{
    $firstfile = null;
    foreach($arrayfile as $val)
    {
        $dest = "../product/". $val['folder']."/". $val['name'];
        if(!isset($firstfile))
        {
            $firstfile = $dest;
            $src       = $_FILES['image']['tmp_name'];
            if (!move_uploaded_file($src, $dest)) {
               echo "<script> alert('" . $src . "');
               window.history.go(-1); </script>\n";
               exit();
            }
        }
    }
    else
    {
        if(!copy ( $firstfile , $dest ))
        {
           echo "<script> alert('" . $dest . "');
           window.history.go(-1); </script>\n";
           exit();
        }
    }
}
upload_file($filesDes) 
```

# javascript - 如何调试 youtube flash embed 的行为？

> ID：10713413
> 
> 赞同：3
> 
> 时间：2012-05-23T04:24:54.880
> 
> 标签：javascript, jquery, debugging, youtube, firebug

当我将鼠标悬停在它上面时，我正在使用的 youtube 嵌入似乎冻结（暂停并变得无响应）。它只发生在chrome上，而不是firefox上，我认为这是因为当你去快进但无法检查时那些缩略图预览。

有谁知道我如何跟踪或诊断可能会改变 youtube 播放器状态的原因？当它暂停、停止、缓冲和 youtube 的错误（来自他们的 API）时，我设置了一个函数，但这些都没有被触发。你还有什么建议使用的吗？也许在萤火虫之类的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:50:54.380

将 mm.cfg 与[Vizzy](http://code.google.com/p/flash-tracer/wiki/Troubleshooting)和[调试播放器](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html#main-pars_text_5)一起使用，以查看 Flash 端发生的事件。堆[快照](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)也可能有助于隔离问题。

# php - 在 PHP 中读取命令行输入

> ID：10713415
> 
> 赞同：1
> 
> 时间：2012-05-23T04:25:42.150
> 
> 标签：php, input, command-line-interface, space, enter

我想在 PHP 中读取命令行输入。我用 fscanf(STDIN, "%d", $numbers_arr[$i]); 但是当按下回车键时这需要输入。按下空格键时如何读取输入。

输入格式将分为两行，如下所示

5 2

1 2 3 4 5

第一行由两个输入组成，第二行由第一行中作为第一个数字输入的元素的数量组成。

请让我知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:51:53.883

这不是 PHP 在命令行上的工作方式。您需要找到一种不同的方式来构建您的输入。

# hadoop - 如何使用 Hadoop/Kerberos 设置设置用户/组权限？

> ID：10713417
> 
> 赞同：1
> 
> 时间：2012-05-23T04:25:48.470
> 
> 标签：hadoop, kerberos, cloudera

我正在尝试使用 Kerberos 设置 Hadoop

我正在遵循 CDH3 安全指南。

到目前为止一切进展顺利（HFDS 工作正常等），但是当我尝试提交作业时出现以下错误。

我以用户 HDFS 的身份运行 HDFS 服务器，以名为 mapred 的用户身份运行 Hadoop。我使用名为 bob 的用户提交作业，该用户属于 mapred 组。

以下是我对 taskcontroller.cfg 的值

```
mapred.local.dir=/opt/hadoop-work/local/
hadoop.log.dir=/opt/hadoop-1.0.3/logs
mapreduce.tasktracker.group=mapred
min.user.id=1000 
```

我得到的错误是

```
java.io.IOException: Job initialization failed (24) with output: Reading task controller config from /etc/hadoop/taskcontroller.cfg
Can't get group information for mapred  - Success.
    at org.apache.hadoop.mapred.LinuxTaskController.initializeJob(LinuxTaskController.java:192)
    at org.apache.hadoop.mapred.TaskTracker$4.run(TaskTracker.java:1228)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1203)
    at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1118)
    at org.apache.hadoop.mapred.TaskTracker$5.run(TaskTracker.java:2430)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.hadoop.util.Shell$ExitCodeException: 
    at org.apache.hadoop.util.Shell.runCommand(Shell.java:255)
    at org.apache.hadoop.util.Shell.run(Shell.java:182)
    at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375)
    at org.apache.hadoop.mapred.LinuxTaskController.initializeJob(LinuxTaskController.java:185)
    ... 8 more 
```

错误总是伴随着 taskcontroller.cfg 中“mapreduce.tasktracker.group=mapred”的值。

我一直在调试和查看，我认为问题是我在不同用户和组之间设置了错误的权限。

任何帮助是极大的赞赏。

# ios - 将NSDATA播放成音频格式IOS

> ID：10713419
> 
> 赞同：0
> 
> 时间：2012-05-23T04:25:59.060
> 
> 标签：ios

我有通过 AudioQueue 记录的 NSDATA ，我想通过 IOS 上的任何 AUDIO 播放器播放此音频，请对此提供帮助。

谢谢 Djrecker

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:13:15.300

将其保存为音频文件（例如 WAV）。AudioFile 和 ExtAudioFile API 可以帮助你编写这个。

您不能指望 iOS 上的任何音频播放器都能正确解释/猜测一组样本数据。这就是文件格式存在的原因——音频文件格式可以指定采样数、通道数、采样率、采样格式以及文件中有关音频的大量其他信息。使用音频文件，您可以以其他程序能够（正确）读取的格式交换此录音。

# javascript - 直接在 HTML 中设置“onclick”与通过 DOM 设置“onclick”有区别吗？

> ID：10713423
> 
> 赞同：2
> 
> 时间：2012-05-23T04:26:24.117
> 
> 标签：javascript, jquery, javascript-events

为什么`logfunc`“未定义”？

```
 var logfunc = function(obj) {
     return function() {
       console.log(obj)
     }
   }

  t += '<a onclick="logfunc(this)">&lt;</a>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:54:37.100

如果在全局范围之外声明引用`longfunc`将无法访问，[小提琴](http://jsfiddle.net/ovfiddle/A5H2H/)

我不提倡通过省略直接在全局范围内声明变量，`var`但它是一个很好的例子：

```
function setupStuff() {
    var logfunc = function(obj) { //defined within setupStuff scope
        /*...*/
    }
    t += '<a onclick="logfunc(this)">&lt;</a>';
}

function setupStuffDifferently() {
    logfuncB = function(obj) { //defined in the global scope
       /*...*/
    }
    t += '<a onclick="logfuncB(this)">&lt;</a>';
} 
```

我更愿意看到单独声明的函数

```
t += '<a onclick="logfunc(this)">&lt;</a>';

function logfunc(obj) { //this would work when assigned through `onclick`
       /*...*/
} 
```

如果您可以使用该选项，我建议您使用像 jQuery 这样的库，它在[分配和处理点击事件](http://api.jquery.com/click/)方面提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:01:18.650

您收到“未定义 logfunc”错误，因为您`logfunc`不在全局（即`window`）范围内，并且使用 HTML 元素属性绑定的函数必须是全局的。

您可以通过以下方式解决此问题：

```
window.logfunc = function(obj) {
  return function() {
    console.log(obj)
  }
}; 
```

但这仍然不会像您认为的那样做，因为它`logfunc`只是返回一个调用的函数`console.log`并且`<a>`不知道它应该调用该`function() { console.log(obj) }`函数，它只会将其视为一个真实值。我想你想要：

```
window.logfunc = function(obj) {
  console.log(obj)
}; 
```

如果您想单击链接以生成控制台消息。

至于“DOM之间`onclick`和通过DOM有什么区别”：

1.  通过属性附加的函数必须是全局的，这很快就会导致混乱。
2.  您只能使用每个元素附加一个函数，`onclick`但您可以[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)根据需要多次调用。如果你想将 JavaScript 片段作为字符串粘贴在一起，你可以绕过这个限制，但这很讨厌。
3.  同样，您可以使用;轻松撤消`addEventListener`呼叫 [`removeEventListener`](https://developer.mozilla.org/en/DOM/element.removeEventListener)从`onclick`属性中删除事件处理程序比添加一个事件处理程序涉及更严重的字符串争论。
4.  不必要地使用`onclick`HTML 和 JavaScript 会导致维护噩梦。

# java - 在命令行中找不到 MIME 媒体类型 application/xml，但在 Eclipse 中工作

> ID：10713424
> 
> 赞同：0
> 
> 时间：2012-05-23T04:26:54.350
> 
> 标签：java, jersey

我正在使用 Maven、Jersey 和 Jetty 服务器来构建 Web 服务接口。

当我在 Eclipse 上开发和测试软件时，一切正常。但是，当我尝试部署项目并向接口发出请求时，服务器报告“未找到 MIME 媒体类型应用程序/xml”。

我尝试了几天来解决问题，发现ServiceFinder（由Jersey提供）可以在Eclipse上找到所有MessageBodyWriter，但不能在命令行中找到。我还检查了所有球衣库是否已经到位，并在 META-INF 中定义。

非常感谢任何帮助！谢谢！

JDK：1.6.0_30 Eclipse：Indigo SR2 Jersey：1.12 码头：6.1.25

服务查找器代码：

```
ServiceFinder.find(javax.ws.rs.ext.MessageBodyWriter.class, true).toClassArray(); 
```

=============== META-INF 创建者：Apache Maven 构建者：Build-Jdk：1.6.0_30 类路径：jersey-servlet-1.12.jar jersey-server- 1.12.jar asm-3.1.jar jersey-core-1.12.jar

============= 在命令行中（只有 ViewableMessageBodyWriter 可用）

```
GN MBR:class com.sun.jersey.server.impl.template.ViewableMessageBodyWriter CP:co
m.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@28946
139 C:com.sun.jersey.server.impl.template.ViewableMessageBodyWriter@6a7d46b8 
```

============= 在 Eclipse 中（所有球衣供应商都可用）

```
GN MBR:class com.sun.jersey.server.impl.template.ViewableMessageBodyWriter CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@2fba32e3 C:com.sun.jersey.server.impl.template.ViewableMessageBodyWriter@60039882
GN MBR:class com.sun.jersey.core.impl.provider.entity.StringProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@6962ed8f C:com.sun.jersey.core.impl.provider.entity.StringProvider@31cc3e7c
GN MBR:class com.sun.jersey.core.impl.provider.entity.ByteArrayProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@5dda7d56 C:com.sun.jersey.core.impl.provider.entity.ByteArrayProvider@1af30c34
GN MBR:class com.sun.jersey.core.impl.provider.entity.FileProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@335ac93d C:com.sun.jersey.core.impl.provider.entity.FileProvider@6695c13b
GN MBR:class com.sun.jersey.core.impl.provider.entity.InputStreamProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@d51de22 C:com.sun.jersey.core.impl.provider.entity.InputStreamProvider@4592b04e
GN MBR:class com.sun.jersey.core.impl.provider.entity.DataSourceProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@79ce9102 C:com.sun.jersey.core.impl.provider.entity.DataSourceProvider@41fb404
GN MBR:class com.sun.jersey.core.impl.provider.entity.RenderedImageProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@689258c7 C:com.sun.jersey.core.impl.provider.entity.RenderedImageProvider@4c843d2b
GN MBR:class com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@6002a673 C:com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider@20f1fbb4
GN MBR:class com.sun.jersey.core.impl.provider.entity.FormProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@4dfdf943 C:com.sun.jersey.core.impl.provider.entity.FormProvider@44d0d6fd
GN MBR:class com.sun.jersey.core.impl.provider.entity.FormMultivaluedMapProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@5cf7c5b5 C:com.sun.jersey.core.impl.provider.entity.FormMultivaluedMapProvider@29dafde4
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$App CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@ed51dc2 C:com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$App@8c5697a
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$Text CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@4994b329 C:com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$Text@48e14b1f
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@417e6e7c C:com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General@6c9ce1cb
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$App CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@5387b07b C:com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$App@2acb4dcf
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$Text CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@71538614 C:com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$Text@59b02f33
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@2287c52c C:com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General@9fc1ec5
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$App CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@7fa1dd69 C:com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$App@7a95626d
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$Text CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@5bcf59f5 C:com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$Text@1e69555f
GN MBR:class com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@a1b12ea C:com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General@4feaf536
GN MBR:class com.sun.jersey.core.impl.provider.entity.ReaderProvider CP:com.sun.jersey.core.spi.component.ProviderFactory$SingletonComponentProvider@7776c5d4 C:com.sun.jersey.core.impl.provider.entity.ReaderProvider@5d66341b 
```

...

============= 完整错误堆栈 ==================

```
23-May-2012 12:05:54 com.sun.jersey.spi.container.ContainerResponse write
SEVERE: The registered message body writers compatible with the MIME media type
are:
*/* ->
  com.sun.jersey.server.impl.template.ViewableMessageBodyWriter

23-May-2012 12:05:54 com.sun.jersey.spi.container.ContainerResponse logException

SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class com.test.TestRest, and Java type class com.test.TestRest, and MIME media type application/xml was not found
        at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1451)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:926)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class com.test.TestRest, and Java type class com.test.TestRest, and MIME media type application
/xml was not found
        ... 21 more 
```

============= 启动 Jetty 服务器 ==== 我正在使用 Jetty Web 服务器，并像这样启动服务器：

```
Context root = new Context(server, "/", Context.SESSIONS); 
// Add REST handlers and Singleton providers 
ResourceConfig rc = new PackagesResourceConfig("handlerpkg"); 

// Add the Jersey root servlet holder to the root context 
root.addServlet(new ServletHolder(new ServletContainer(rc)), "/*");

server.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:33:59.410

通过在类路径中显式添加 jersey-core-1.12.jar 作为 VM 参数的一部分来解决该问题。

我在 -cp 中只有一个库，它使用 MANIFEST.MF 文件中的 Class-Paths 字段指向其他库。有趣的是，使用此方法，ServiceFinder 可以找到 MessageBodyReaders，但 MessageBodyWriter 无法找到。

现在我在 -cp 中有两个库，分别是 jersey-core-1.12.jar，lib 包含 Main 类。

感谢您提供的所有大力帮助。stackoverflow 是一个了不起的开发者网站。

# android - NDK 示例 - 无法构建或编译

> ID：10713426
> 
> 赞同：0
> 
> 时间：2012-05-23T04:27:08.467
> 
> 标签：android, android-ndk

我正在尝试学习 android NDK，我正在按照[http://developer.android.com/sdk/ndk/overview.html](http://developer.android.com/sdk/ndk/overview.html)上的步骤构建 hello-jni 示例。

我已经下载了 Android NDK。但是当我尝试通过终端构建或编译代码时，它显示“找不到命令”错误。

我正在开发 ubuntu。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T07:22:25.810

构建 hello-jni 的步骤是：

下载 Android NDK 并将其解压到某个目录（我选择 /opt）：

接下来，“cd /opt//samples/hello-jni”到示例目录，输入“/opt//ndk-build”构建文件，我的输出如下：

```
/opt/android-ndk/samples/hello-jni>/opt/android-ndk/ndk-build
[arm64-v8a] Gdbserver      : [aarch64-linux-android-4.9] libs/arm64-v8a/gdbserver
[arm64-v8a] Gdbsetup       : libs/arm64-v8a/gdb.setup
[x86_64] Gdbserver      : [x86_64-4.9] libs/x86_64/gdbserver
[x86_64] Gdbsetup       : libs/x86_64/gdb.setup
[mips64] Gdbserver      : [mips64el-linux-android-4.9] libs/mips64/gdbserver
[mips64] Gdbsetup       : libs/mips64/gdb.setup
[armeabi-v7a] Gdbserver      : [arm-linux-androideabi-4.8] libs/armeabi-v7a/gdbserver
[armeabi-v7a] Gdbsetup       : libs/armeabi-v7a/gdb.setup
[armeabi] Gdbserver      : [arm-linux-androideabi-4.8] libs/armeabi/gdbserver
[armeabi] Gdbsetup       : libs/armeabi/gdb.setup
[x86] Gdbserver      : [x86-4.8] libs/x86/gdbserver
[x86] Gdbsetup       : libs/x86/gdb.setup
[mips] Gdbserver      : [mipsel-linux-android-4.8] libs/mips/gdbserver
[mips] Gdbsetup       : libs/mips/gdb.setup
[arm64-v8a] Compile        : hello-jni <= hello-jni.c
[arm64-v8a] SharedLibrary  : libhello-jni.so
[arm64-v8a] Install        : libhello-jni.so => libs/arm64-v8a/libhello-jni.so
[x86_64] Compile        : hello-jni <= hello-jni.c
[x86_64] SharedLibrary  : libhello-jni.so
[x86_64] Install        : libhello-jni.so => libs/x86_64/libhello-jni.so
[mips64] Compile        : hello-jni <= hello-jni.c
[mips64] SharedLibrary  : libhello-jni.so
[mips64] Install        : libhello-jni.so => libs/mips64/libhello-jni.so
[armeabi-v7a] Compile thumb  : hello-jni <= hello-jni.c
[armeabi-v7a] SharedLibrary  : libhello-jni.so
[armeabi-v7a] Install        : libhello-jni.so => libs/armeabi-v7a/libhello-jni.so
[armeabi] Compile thumb  : hello-jni <= hello-jni.c
[armeabi] SharedLibrary  : libhello-jni.so
[armeabi] Install        : libhello-jni.so => libs/armeabi/libhello-jni.so
[x86] Compile        : hello-jni <= hello-jni.c
[x86] SharedLibrary  : libhello-jni.so
[x86] Install        : libhello-jni.so => libs/x86/libhello-jni.so
[mips] Compile        : hello-jni <= hello-jni.c
[mips] SharedLibrary  : libhello-jni.so
[mips] Install        : libhello-jni.so => libs/mips/libhello-jni.so 
```

完毕。要将输出构建到 apk 文件中，您需要使用 Android SDK，例如：

[使用 ANT 脚本构建 Android NDK](https://stackoverflow.com/questions/7432449/android-ndk-build-with-ant-script)

# android - 如何在图像上放置地理点作为android中的地图

> ID：10713431
> 
> 赞同：-1
> 
> 时间：2012-05-23T04:28:00.463
> 
> 标签：android

嗨，这个 raju 我是 android 新手。我在该项目中创建了一个小项目，我将图像显示为带有自定义视图的地图。我有纬度和经度点，然后如何使用我的纬度和经度点在图像上显示地理点，请任何人帮助我。如果有人知道，请提供一些样品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:32:23.973

希望这对您[在 Android 中使用 GoogleMap有所帮助](http://mobiforge.com/developing/story/using-google-maps-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:02:46.537

你去吧。

```
String getMapURL = "http://maps.googleapis.com/maps/api/staticmap?zoom=18&size=560x240" +
    "&markers=size:mid|color:red|" 
    + yourLatitude
    + "," 
    + yourLongitude
    + "&sensor=false";

URL imgValue = new URL(getMapURL);
Bitmap userIcon = BitmapFactory.decodeStream(imgValue.openConnection().getInputStream());

ImageView imgMapInImage = (ImageView) findViewById(R.id.imgMapInImage);
imgMapInImage.setImageBitmap(userIcon); 
```

自定义其余参数`width`，例如. 我的示例使用 560*240 的尺寸。使用您的尺寸。还可以根据自己的喜好更改缩放、图钉大小和颜色。`height``getMapURL`

希望这可以帮助。

编辑：这个例子使用谷歌地图静态 API。有关更多自定义选项，请在此处参考此 URL：[https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

# ruby-on-rails - 如何在 rspec 测试中存根 gmaps4rails 地理编码功能？

> ID：10713434
> 
> 赞同：5
> 
> 时间：2012-05-23T04:28:21.180
> 
> 标签：ruby-on-rails, factory-bot, gmaps4rails

我正在使用 gmaps4rails，并尝试开发一些测试。

我有工厂

```
factory :country do
   sequence(:name) { |n| "Country#{n}" }
end 
```

这显然不被谷歌识别。

```
Validation failed: Gmaps4rails address Address invalid 
```

API 调用也需要时间在我的测试中运行。

如何存根 API 调用？

我试过添加

```
before(:each)
  Country.stub(:geocode)
end 
```

到规范文件，但它没有效果。

我的模型看起来像这样

```
class Country < ActiveRecord::Base
  acts_as_gmappable :lat => 'latitude', :lng => 'longitude'
  def gmaps4rails_address
    "#{self.name}" 
  end
  geocoded_by :gmaps4rails_address

  after_validation :geocode
end 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:25:28.880

名称中与整数无关。

我猜地址不存在或无效。

无论如何，有很多方法可以跳过地理编码或存根。

[从宝石的规格](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/spec/models/user_spec.rb)中汲取灵感

# couchdb - CouchDB 范围的只读访问权限

> ID：10713437
> 
> 赞同：21
> 
> 时间：2012-05-23T04:28:31.980
> 
> 标签：couchdb, user-roles, access-rights

我需要创建一个 CouchDB 用户，该用户只能从任何数据库中读取文档，但不能写入其中任何一个。就我而言，它不是默认支持的（用户类型在[此处](http://wiki.apache.org/couchdb/Security_Features_Overview)描述）。

正如 wiki 所说，每个数据库都授予访问权限，所以我试图做的似乎不是使用 CouchDB 的最佳方式。

无论如何，这样做会很棒。你能给我一些关于如何实现它的提示吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T05:16:57.310

您需要在要执行此规则的每个数据库中放置一个设计文档。设计文档必须有一个*“验证功能”*来检查用户是否有写权限。

这是[CouchDB](http://guide.couchdb.org/)官方书籍中关于[验证函数](http://guide.couchdb.org/draft/validation.html)的一章。

更棒的是，[这里](https://github.com/iriscouch/manage_couchdb/blob/master/js/validate_doc_update.js)有一个验证功能，它只允许管理员修改文档，并将普通用户限制为只读访问。[在这里](https://github.com/iriscouch/manage_couchdb#an-easy-validation-function)您可以找到该功能的说明。

# jsp - 使用 Websphere 共享库..问题：无法找到 uri http://struts.apache.org/tags-html 的标签库，为什么？

> ID：10713438
> 
> 赞同：2
> 
> 时间：2012-05-23T04:28:47.560
> 
> 标签：jsp, web.xml, taglib, struts-1, websphere-7

我使用struts1.3.8和spring2.5开发了web应用程序，我在Websphere7中部署了war文件，没有jar。我将罐子保存在共享库中。当我运行应用程序时，它会引发以下错误。

```
com.ibm.ws.jsp.JspCoreException: JSPG0047E: Unable to locate tag library for uri http://struts.apache.org/tags-html  
at com.ibm.ws.jsp.translator.visitor.tagfiledep.TagFileDependencyVisitor.visitCustomTagStart(TagFileDependencyVisitor.java:76)  
at com.ibm.ws.jsp.translator.visitor.JspVisitor.processJspElement(JspVisitor.java:366)
at com.ibm.ws.jsp.translator.visitor.JspVisitor.processChildren(JspVisitor.java:419)    at
 com.ibm.ws.jsp.translator.visitor.JspVisitor.processJspElement(JspVisitor.java:234)    
at com.ibm.ws.jsp.translator.visitor.JspVisitor.visit(JspVisitor.java:216) 
```

我用谷歌搜索，我知道在 web.xml 中我们必须进行配置。
那么我必须做什么样的配置？？？
任何想法？？？
提前致谢。
拉克斯曼乔达里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T17:48:40.203

简而言之，不要将那些 JAR 放在共享库中；将它们放入 WEB-INF/lib 中。

# javascript - 定位弹出窗口

> ID：10713440
> 
> 赞同：0
> 
> 时间：2012-05-23T04:28:49.827
> 
> 标签：javascript, css

我有几个框（超过 100 个）将在屏幕上的不同位置动态创建。单击每个框后，我希望弹出一个带有详细信息的幻灯片。

我希望它的位置在每个盒子附近滑动。我已经这样做了，但是，如果某些框靠近右侧的浏览器窗口端，则弹出窗口的一半会隐藏在窗口中。

我希望这些弹出窗口在窗口之前完全显示（就像在 excel 中一样）。

我用于定位的 javascript 代码；

```
function centerPopup(comp_id, top, left) {    
    $("#popupContact").css({
        "position": "absolute",
        "top": top + 70,
        "left": left + 223
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:35:05.187

如果它们出现在另一个元素下方，请尝试`z-index`为弹出框的样式添加更高的样式。这将允许它以较低的 出现*在*其他东西上`z-index`。

我需要更多代码或示例（使用 jsfiddle.net）才能真正了解发生了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:02:16.060

如果我正确理解了您的问题，那不是与其他框重叠，而是在屏幕边缘丢失了一半框？这听起来像您使用窗口的边缘来设置框的位置，但您没有考虑框本身的宽度。确保将当前框的宽度除以 2，然后从最大窗口大小中减去。这会将框的右边缘定位在窗口的右侧（如果您想象一个框呈现在屏幕的最右侧）。

希望我正确地解释了你的问题。

# jquery - 在jQuery中如何将选项设置为动态选择

> ID：10713443
> 
> 赞同：0
> 
> 时间：2012-05-23T04:28:57.347
> 
> 标签：jquery, jquery-ui, jquery-plugins

看起来我有一个奇怪的问题。我正在创建一个选择菜单并将其分配给一些名为选择菜单的插件

```
$('#selectCombo').selectmenu({style:'dropdown'}); 
```

将其分配给它后..我无法隐藏它，也无法将选项设置为选中。我试过这个

```
$('<option value='+ret.cId+' selected=true>'+ret.cName+'</option>').appendTo('#selectCombo');   
    $('#selectCombo').selectmenu({style:'dropdown'}); 
```

它的工作，但它显示低于原始的另一个实例。我尝试删除类属性，但没有奏效。有什么办法..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:38:48.167

**自定义选择菜单**通常会创建`<div>`原始`<select>`元素的结构以允许自定义样式。

这意味着自定义选择菜单不会知道您对原始`<select>`.

再打电话`.selectmenu('destroy')`之前先打电话`.selectmenu({style: 'dropdown'});`。

**IE**

```
var newOption = $('<option value='+ret.cId+' selected=true>'+ret.cName+'</option>');
$('#selectCombo').append(newOption).selectmenu('destroy').selectmenu({style:'dropdown'}); 
```

**[这是一个例子。](http://jsfiddle.net/3B3Fp/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:39:09.603

您可以通过以下方式隐藏

```
$('#selectCombo').next('.ui-selectmenu .ui-selectmenu-button').hide(); 
```

并将选项设置为选定的使用此选项。

```
var value = <your value to select>;
$('#selectCombo').selectmenu("value", value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:56:03.417

```
var value = "anyvalue";
$("#selectboxid").val("value"); 
```

[检查这个](http://jsfiddle.net/anupam/GGJ7w/)

# dojo - Dojo autocomplete=on 用于文本字段

> ID：10713451
> 
> 赞同：3
> 
> 时间：2012-05-23T04:29:27.750
> 
> 标签：dojo

我已将我的应用程序从使用普通的 html 文本字段更改为 dijit 文本字段。添加道场后，只要我键入第一个字符，文本字段就不会在文本字段中显示先前输入的值，因此我无需再次键入文本。这是 dijit 文本字段小部件的默认行为。我怎样才能使文本字段自动完成。请帮我。我尝试在 addOnLoad 方法中使用以下语句，但没有运气

```
dojo.attr(dijit.byId('username').textbox, "autocomplete", "on"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:34:54.577

你是如何声明你的文本字段的？以下对我有用：

```
<div id="form1" data-dojo-type="dijit.form.Form" method="post">
    <input data-dojo-type="dijit.form.TextBox" name="text" id="text" autocomplete="on"/>
    <input type="hidden" name="delay" value="2"/>
    <button data-dojo-type="dijit.form.Button" type="submit">Send</button>
</div> 
```

见[http://jsfiddle.net/psoares/YZeTB/](http://jsfiddle.net/psoares/YZeTB/)

# android - putExtra 中的蓝牙适配器

> ID：10713453
> 
> 赞同：1
> 
> 时间：2012-05-23T04:29:52.450
> 
> 标签：android, android-intent, bluetooth, adapter

我有一个需求，我想开发一个混合应用程序并列出蓝牙设备、扫描和连接、共享文件等。

所以我想将`BluetoothAdapter`mAdapter 值添加到 extras 并将其传递给 onActivity 结果。喜欢并在by`enableIntent.putExtra("", mAdapter);`中使用它。有没有办法这样做？？？？`onActivityResult``getExtra(...)`

```
if (!mBluetoothAdapter.isEnabled()) {  
    Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);  
    ((Activity)context).startActivityForResult(enableIntent, RequestCodes.BLUETOOTH_ENABLE_CODE);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:48:36.837

为什么不使用**Application 类**来存储该数据并在需要的任何地方使用。

查看这篇文章了解如何使用[Application 类](https://stackoverflow.com/questions/10599775/how-do-i-make-global-changes-throughout-my-app-in-android/10599919#10599919)。

# ios - 以编程方式向 Facebook 问题添加评论

> ID：10713457
> 
> 赞同：1
> 
> 时间：2012-05-23T04:30:11.650
> 
> 标签：ios, facebook, facebook-graph-api

我们可以通过 Facebook 网站为 Facebook 问题添加评论。此外，我们可以以编程方式向 Facebook 问题添加问题选项，但是，是否可以以编程方式向问题添加评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:36:38.760

您只能以编程方式将评论添加到之前已在 facebook 中发布的问题。您不能以编程方式发布问题并同时以编程方式对其进行评论。

# url - 从 Google 发布者标签中的 url 获取广告位路径

> ID：10713458
> 
> 赞同：0
> 
> 时间：2012-05-23T04:30:20.510
> 
> 标签：url, slots

我正在研究谷歌发布者标签。有没有办法从 url 获取插槽路径

• 插槽路径：/1111/abc.com.au/xx/xxx

> > 从 url 获取 x 值的任何方法。
> > 
> > > 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:15:29.397

使用[window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)访问 URL 参数。

# jsp - 访问 Session 范围内的对象

> ID：10713461
> 
> 赞同：1
> 
> 时间：2012-05-23T04:30:37.593
> 
> 标签：jsp, session-variables

我正在构建一个 UI 模板，因此没有 java 文件。但是我需要 java 对象，所以我的 jsp 中只有类定义。我需要在“结果”数组中打印每个对象的 gameState 属性。怎么打印？

这行“${sessionScope['results'][innerItemNumber].gameState}[br]”有问题。我不确定语法。

我收到错误“javax.el.PropertyNotFoundException: Property 'gameState' not readable on type java.lang.String”。

测试.jsp：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<% 
    class Result {
        String gameState;
        String result;
        String optional;

        public Result(String gameState, String result, String optional) {
            this.gameState = gameState;
            this.result = result;
            this.optional = optional;
        }....
        .....// Getters & setters 
 }
%>

<%  java.util.ArrayList<Result> results = new java.util.ArrayList<Result>();
    results.add(new Result("Kick off", "14:00", ""));
    results.add(new Result("1st Half", "2-2", ""));
    results.add(new Result("1st Half", "2-1", ""));
    results.add(new Result("Peanalties", "3-6", "(1-1 FT)"));
    results.add(new Result("2nd Half", "2-0", ""));     
 %>
....
.....
<c:forEach items="0,1,2,3,4,5,6" var="innerItemNumber">  
<cell class="vertical-align-middle" width="33%" text-align="center">

        ${sessionScope['results'][innerItemNumber].gameState}[br]  ?????????

</cell>
</c:forEach > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:07:45.833

将您的课程从您的某些包中的 jsp 中移出，一切都会正常工作。不要忘记公开。

# reflection - 将 MakeGenericMethod 传递给动态类型

> ID：10713465
> 
> 赞同：1
> 
> 时间：2012-05-23T04:31:16.330
> 
> 标签：reflection, generic-method

我正在尝试调用一个泛型方法并需要动态地传递一个类型。但是得到一个编译错误，'CS0246：找不到类型或命名空间名称't'。您是否缺少 using 指令或程序集引用'。请告诉我我忽略了什么，谢谢。

……主要……

```
Type t = DiscoverType(field);   // returns Type given FieldInfo via Type.GetType(string)

MethodInfo method = typeof(testClass).GetMethod("MyGenericMethod", BindingFlags.NonPublic | BindingFlags.Instance);
MethodInfo generic = method.MakeGenericMethod(typeof(t));
object[] args = {field};
generic.Invoke(this, args); 
```

通用方法...

```
private void MyGenericMethod<T>(FieldInfo field)
{
    field.SetValue(obj, new List<T>(objList));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:33:50.587

很难知道你到底想做什么，但你可以像这样修复你的编译器错误：

```
MethodInfo generic = method.MakeGenericMethod(t); 
```

您使用`typeof`运算符从类型名称转到`System.Type`实例。在您的情况下，您已经拥有所需的 `System.Type`实例，因此`typeof`在这里没有用。

# asp.net-mvc-3 - 为什么 ctx.SaveChanges() 不首先保存 mvc 3 + 代码中的更改？

> ID：10713466
> 
> 赞同：0
> 
> 时间：2012-05-23T04:31:16.407
> 
> 标签：asp.net-mvc-3, entity-framework-4, code-first

```
 [HttpPost]
    public virtual ActionResult CreateProductVariant(ProductVariant pv)
    {
        try
        {
            ctx.ProductVariants.Add(pv);
            ctx.SaveChanges();
        }
        catch (System.Data.Entity.Validation.DbEntityValidationException dbvalationEx)
        {
            throw;
        }
        return RedirectToAction("Index");
    } 
```

没有验证异常，但不保存更改，为什么？

搜索完 SO 后，添加 ctx.Configuration.ValidateOnSaveEnabled = false; 在添加之前，它的工作原理！

这是我的 poco 课：

```
 public class Product
   {
      //other properties
      public ICollection<ProductVariant> ProductVariants { get; set; }
      public ICollection<ProductImage> ProductImages { get; set; }
   }

   public class ProductVariant
   { 
      //other properties
      public virtual Product Product { get; set; }
   } 
```

# html - 100% 宽度，背景重复

> ID：10713467
> 
> 赞同：-1
> 
> 时间：2012-05-23T04:31:21.730
> 
> 标签：html, css

我计划创建具有跨越浏览器宽度的背景的轮播。为此，我`margin:0; padding:0;`在正文中设置并将`div`跨越背景的我设置为`width:100%`. 我之所以选择这个，是因为它包含另一个`div`有左右边距的：auto; 使第二个在浏览器中`div`居中。`div`

我在尝试将背景图像添加到`div`跨越浏览器宽度的图像时遇到了问题。当我使用`background-repeat:repeat-x;`它时，它仍然只是浏览器最左侧的一个 550x1 像素的条子。它不重复。我认为这是由于 100% 的宽度。如果我放开 100% 宽度，我会遇到内部`div`被迫向右或向左的问题，这取决于所使用的显示器的分辨率。我不希望这种情况发生。

有谁知道我可以实现/模拟 100% 宽度并仍然使用的方法`background-repeat:repeat-x;`？

编辑，我使用 2 个 div，因为我正在应用 silverlight，并且想将它艺术地放置在屏幕上。这是我的代码，它可能会让我当时正在做的事情更有意义。如果您仍然认为 1 div 比 2 更好，请告诉我我错了，但这里是代码。它非常简单，因为在 Silverlight 中会做很多事情，或者至少我认为它会有点简单，但事情就是这样。

```
HTML
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Home.aspx.cs" Inherits="imd_data_Home" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Home</title>
    <link href="styles/main.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id=NavContainer>
<div id="Navigation">
    <img src="img_data/dem_Logo.png" id="Logo"/>
</div>

</div>
<div id="Carousel">
<div id="SilverlightContainer">

</div>
</div>

</body>
</html>

CSS
body 
{
    margin:0;
    padding:0;
    background-color:#000061;
}

#NavContainer
{
    width:900px;
    margin-left:auto;
    margin-right:auto;
}

#Navigation
{
    height:75px;
    width:100%;
}

#Logo
{
    float:left;
}

#Carousel
{
    height:550px;
    width:100%;
    background-image:url('img_data/carousel_bar_01.png');
    background-repeat:repeat-x;
}

#SilverlightContainer
{
    height:550px;
    width:900px;
    margin-left:auto;
    margin-right:auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:17:11.763

你不必采取两个 div 来实现你想要的。只需将您的背景图像放在身体中即可

```
body{ background:url(image path here) repeat-x} 
```

并给你的 div 一定的宽度，并给它一个像

```
div#yourID{margin:auto} 
```

这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:20:58.470

你只需要一个 div，你想要的那个在中间。

```
<div class="centered"></div> 
```

您在身体上设置背景：

```
body {
    min-height: 550px; 
    background: url(path/image.png) repeat-x;
    background-size: 1px 550px;
} 
```

然后你有居中的 div：

```
.centered {
    min-height: 150px; /* whatever values you wish for height and width */
    width: 300px;
    margin: 75px auto; /* whatever values you wish for top/ bottom margin */
} 
```

[你可以在http://dabblet.com/gist/2774626](http://dabblet.com/gist/2774626)上看到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:59:55.943

尝试这个：

```
body {
 width:100%;
 height:100%;
 background:url(your-image.jpg) repeat-x;
 position:absolute;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T00:24:31.417

解决了！问题是我没有为图像放置正确的位置`carousel_bar_01.png`。

# css - 浮动 div：重叠框，但第二个框上的内容仍被向下推

> ID：10713470
> 
> 赞同：4
> 
> 时间：2012-05-23T04:31:30.417
> 
> 标签：css, css-float

我有以下 HTML：

```
<div id = "container">
    <div class="block pink float"></div>
    <div class="green block">A</div>
</div> 
```

和以下CSS：

```
 .block {
        width: 200px;
        height: 200px;
    }

    .float { float: left; }
    .pink { background: #ee3e64; }
    .green { background: green; } 
```

我在输出中看到的是绿色框隐藏在粉红色下方？为什么会这样？而且，为什么`A`绿色框内没有显示？

请参阅此处的代码：

[http://jsfiddle.net/mazdakiat/cu9Cr/](http://jsfiddle.net/mazdakiat/cu9Cr/)

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:40:13.623

当您浮动一个元素时，它会使其脱离正常流程。因此，通过浮动粉红色，您可以让绿色块滑入其下方。但是，绿色块的`A`内部有所不同。这是一个孩子，粉红色的块推动了该内容。它出现在下方是因为粉红色块已完全覆盖绿色块并将内容推出底部。请参阅this fiddle以获得更好的图片。

[http://jsfiddle.net/cu9Cr/1/](http://jsfiddle.net/cu9Cr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:40:29.673

浮动粉红色框将其从文档流中取出。然后，如果粉红色的框根本不存在，则绿色框会移动到它所在的位置（元素内的文本但是环绕浮动元素）。粉红色的框显示在顶部，因为没有在任一对象上指定任何 z-index 属性，浏览器会将首先出现在 html 中的元素放置在 z-index 中高于下面的元素。

[更新] 根据下面 mrtsherman 的评论，在任何元素上设置 z-index 都不会产生任何影响，除非它们的位置设置为相对、绝对或固定。

# sql - 在 SQL Server 中拆分包含引号分隔符的分隔文本

> ID：10713471
> 
> 赞同：1
> 
> 时间：2012-05-23T04:31:34.317
> 
> 标签：sql, sql-server, tsql

这是从[将一个充满逗号分隔值的 varchar 传递给 SQL Server IN 函数开始的](https://stackoverflow.com/questions/878833/passing-a-varchar-full-of-comma-delimited-values-to-a-sql-server-in-function)。

我想拆分一些逗号分隔的文本，但我需要允许嵌入逗号：

```
 DECLARE @text NVARCHAR(1000) = 'abc,def,"ghi,jkl",mno'; 
```

我期待的结果是：

```
 abc
  def
  ghi,jkl
  mno 
```

这是我用来分割 CSV 文本的函数。

它使用一个循环，所以如果性能是一个问题，你可以使用这里的建议来调整它：[https ://stackoverflow.com/a/878964/482595](https://stackoverflow.com/a/878964/482595)

```
CREATE FUNCTION uf_Split
( 
    @Text NVARCHAR(MAX), 
    @Delimiter CHAR(1),
    @Quote CHAR(1)
) 
RETURNS @Result TABLE 
( 
    [Index] INT NOT NULL IDENTITY(1, 1), 
    [Value] NVARCHAR(4000) NULL,
    [CharPos] INT
)
AS 
BEGIN 
    DECLARE @start BIGINT; SET @start = 1
    DECLARE @end BIGINT; SET @end = 1

    IF @Text is null
    BEGIN
      RETURN
    END 

    WHILE 1=1 
    BEGIN 
        SET @end = 
            CASE
                WHEN CHARINDEX(@Quote, @Text, @start) = @start THEN CHARINDEX(@Quote + @Delimiter, @Text, @start + 1)
                ELSE CHARINDEX(@Delimiter, @Text, @start)
            END

        IF ISNULL(@end, 0) = 0 
        BEGIN 
            -- Delimiter could not be found in the remainder of the text:
            INSERT @Result([Value], [CharPos]) VALUES(SUBSTRING(@Text, @start, DATALENGTH(@Text)), @start)
            BREAK 
        END 
        ELSE IF (CHARINDEX(@Quote, @Text, @start) = @start) AND (CHARINDEX(@Quote + @Delimiter, @Text, @start + 1) = @end)
        BEGIN
            INSERT @Result([Value], [CharPos]) VALUES(SUBSTRING(@Text, @start + 1, @end - @start - 1), @start)
            SET @start = @end + 2
        END
        ELSE 
        BEGIN
            INSERT @Result([Value], [CharPos]) VALUES(SUBSTRING(@Text, @start, @end - @start), @start)
            SET @start = @end + 1
        END
    END 

    RETURN
END
GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:59:54.833

我在 t-sql 中使用两阶段拆分进行了拍摄。我绝对有兴趣看看其他人如何处理这个问题。如果这些字符串很大，或者您希望处理大型行集，我会考虑其他选项，可能是 BULK INSERT 或 CLR。

```
declare @data nvarchar(1000) = 'abc,def,"ghi,jkl",mno,"yak","yak,123"';

declare @x xml;
select  @x = cast('<d>' + replace(@data, '"', '</d><d>') + '</d>' as xml);

;with c(d,i)
as  (   select  p.n.value('.', 'nvarchar(max)') AS data,
                case
                    when left(p.n.value('.', 'nvarchar(max)'), 1) = ',' then 1
                    when right(p.n.value('.', 'nvarchar(max)'), 1) = ',' then 1 
                    else 0 
                end
        from    @x.nodes('/d') p(n)
    )       
select  d
from    c
where   i = 0 and len(d) > 0
union all
select  p.n.value('.', 'nvarchar(max)')
from    (   select cast('<d>' + replace(d, ',', '</d><d>') + '</d>' as xml)
            from c
            where   i=1
        ) d(x)
cross
apply   d.x.nodes('/d')p(n)
where   len(p.n.value('.', 'nvarchar(max)')) > 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:21:49.570

最好的方法是在函数中定义嵌入逗号的特殊情况，当您拆分检查字符串开头的嵌入逗号并删除该子字符串时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-23T15:47:29.253

很好的解决方案，谢谢分享！我确实做了一项更改以适应我的情况。我们的一些数据嵌入了`&`，这会导致非法字符错误。为了解决这个问题，我使用了一个 REPLACE 函数将其从 更改为`&`，`&amp;`以便可以在 XML 中对其进行解析。然后稍后当我需要将其更改回来时，我将值替换为`&amp;`with `&`。我确信有更好的方法来做到这一点，但肯定解决了我们的问题。下面是您的代码示例以及我的更改。

```
DECLARE @data NVARCHAR(MAX) = 'abc,def,"ghi,jkl",mno,"yak","yak,123","zzzz & yyyy"';

SELECT @data = REPLACE(REPLACE(REPLACE(@data, '&', '&amp;'), '<', '&lt;'), '>', '&gt;'); /**** Replace characters (&, <, >) ****/

DECLARE @x XML = CAST('<d>' + REPLACE(@data, '"', '</d><d>') + '</d>' AS XML);

;WITH c (d,i) AS
    (
        SELECT  p.n.value('.', 'NVARCHAR(MAX)') AS DATA,
                CASE
                    WHEN LEFT(p.n.value('.', 'NVARCHAR(MAX)'), 1) = ','
                        THEN 1
                    WHEN RIGHT(p.n.value('.', 'NVARCHAR(MAX)'), 1) = ','
                        THEN 1 
                    ELSE 0 
                END
        FROM @x.nodes('/d') p(n)
    )

SELECT REPLACE(REPLACE(REPLACE([z].[d], '&amp;', '&'), '&lt;', '<'), '&gt;', '>') AS d /**** Restore characters (&, <, >) ****/
FROM (
        SELECT d
        FROM c
        WHERE i = 0
            AND LEN(d) > 0

        UNION ALL

        SELECT p.n.value('.', 'NVARCHAR(MAX)')
        FROM (
                SELECT cast('<d>' + replace(d, ',', '</d><d>') + '</d>' AS XML)
                FROM c
                WHERE i = 1
            ) d(x)
        CROSS APPLY d.x.nodes('/d')p(n)
        WHERE LEN(p.n.value('.', 'NVARCHAR(MAX)')) > 0
    ) AS z
ORDER BY d; 
```

# javascript - 如何在 ExtJS 4.1.0 代理或阅读器中更改请求 URI

> ID：10713480
> 
> 赞同：3
> 
> 时间：2012-05-23T04:33:03.630
> 
> 标签：javascript, rest, extjs, extjs4, uri

事实上，带有 Rest 代理和 Json 读取器的 ExtJS 4.1 要求这样的 URI（虽然是 urlencoded）：

`http://localhost:8000/api/v1/choice/?filter=[{"property":"question_id","value":2}]`

我的服务器希望过滤器请求看起来像：

`http://localhost:8000/api/v1/choice/?question_id=2`

我查看`filterParam`了代理的配置，但似乎不相关。有没有一种实用的方法来实现服务器需要的请求 URI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:12:25.060

跟随并不漂亮，但它有效。现在要修复该死的商店...

```
/**
         * Customized to send ../?prop=val&prop2=val2 urls.
         */
        buildUrl: function(request) {
            var url = this.url;
            var filters = eval(request.params['filter']);
            if (filters) {
                delete request.params['filter'];
                url += '?'
                for (var i = 0; i < filters.length; i++) {
                    var filterString = filters[i].property + "=" + filters[i].value;
                    if (url.slice(url.length-1) === '?') {
                        url += filterString;
                    } else {
                        url += '&' + filterstring;
                    } 
                }
            };
            return url;
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:07:09.750

没有简单（容易）的方法。您将不得不扩展现有的`Proxy`课程。查看 和 的源`Ext.data.proxy.Proxy`代码`Ext.data.proxy.Server`。从查看功能`getParams`开始`buildUrl`

# asp.net - 如何为 Internet Explorer 生成下载 .pdf？

> ID：10713483
> 
> 赞同：2
> 
> 时间：2012-05-23T04:33:28.400
> 
> 标签：asp.net, vb.net, pdf, download, ms-word

我在一个网站上工作，用户在其中输入一个名称，然后按下一个按钮，提示服务器根据提供的信息创建一个 pdf 文件，然后将文件发送给用户。

我在没有 IIS 的笔记本电脑上测试网站。

我需要 pdf 是希伯来语，但在希伯来语上找不到带有 vb 的 pdfwrite；相反，我创建了一个 MS Word 文档，然后使用下面的代码将其转换为 pdf。

这在 Firefox、Chrome 和 Safari 上运行良好，但在 Internet Explorer 上，页面在下载之前断开连接。执行 create word 语句时断开连接。

谁能帮我？

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles      Button1.Click
      Dim strname As String
      strname = TextBox1.Text.Trim

      Dim oword As New word.Application
      Dim odoc As New word.Document
      oword = CreateObject("word.Application")

      odoc = oword.Documents.Add("C:\documents\tamp.dotx")

      odoc.Bookmarks.Item("name1").Range.Text = strname
      odoc.Bookmarks.Item("name2").Range.Text = strname
      odoc.Bookmarks.Item("name3").Range.Text = strname
      odoc.Bookmarks.Item("name4").Range.Text = strname
      odoc.Bookmarks.Item("name5").Range.Text = strname
      odoc.Bookmarks.Item("name6").Range.Text = strname

      odoc.ExportAsFixedFormat(Server.MapPath("\neshume.pdf"), 17)
      Response.Redirect(Server.MapPath("\neshume.pdf"))
      end sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:43:50.253

原来问题不在代码中 我的机器出了点问题 我在另一台计算机上对其进行了测试，它运行良好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:52:08.073

代替

```
Response.Redirect(Server.MapPath("\neshume.pdf")) 
```

和

```
 Response.Redirect("neshume.pdf") 
```

您不能重定向到完整路径（也许它被 ff 接受，因为它在同一台计算机上运行）。

# mysql - SQL：返回具有特定偏好设置的唯一用户

> ID：10713488
> 
> 赞同：0
> 
> 时间：2012-05-23T04:34:14.737
> 
> 标签：mysql, sql

表：

```
tUsers：用户标识（包含用户信息）
tPrefs：prefid，prefname（包含首选项定义）
tPrefVals：userid、prefid、value（包含偏好值）

```

首选项不是必需的，因此可能实际上不存在首选项记录。

首选项表如下所示：

```
id, userid, prefid, value
1,  1,      20,     es
2,  1,      224,    false
3,  1,      234,    true
4,  2,      220,    en
5,  2,      221,    es
6,  2,      234,    true 
```

prefid 是首选项定义的关键，例如对主要语言、次要语言等的首选项。首选项值表可能有也可能没有对应于 tPrefs 表中定义的每个首选项的行。有道理？

这些值都存储在 tPrefVals 表中。每个用户的每个首选项在该表中只有一行，而不是每个用户只有一行具有多个首选项。

目标：获取将偏好 20 或 21 设置为“es”值的用户列表。

```
SELECT DISTINCT tUsers.userid FROM tUsers
LEFT JOIN tPrefVals AS pri_lang ON tUsers.userid = pri_lang.user_id
LEFT JOIN tPrefVals AS sec_lang ON tUsers.userid = sec_lang.user_id
WHERE
((pri_lang.prefid = '20' AND pri_lang.value = 'es') 
OR
(sec_lang.prefid = '21' AND sec_lang.value = 'es')) 
```

我的想法是两次左加入首选项值表，但使用 WHERE 将其限制为仅类型 20 或 21 的首选项。这有效。但是，我不确定这是进行此类查询的最佳方式...您建议如何进行此查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:57:58.007

这比您的查询效率更高。

```
SELECT distinct a.UserID
FROM   tUsers a LEFT JOIN tPrefVals b
         on a.UserID = b.UserID
WHERE  b.PrefID in ('20', '21') AND b.`Value` = 'es' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:55:32.820

我不确定您为什么使用 tUsers 表。但这应该会给你我理解你正在寻找的结果：

```
select distinct userid from tPrefVals
where value = 'es' and prefid in ('20', '21') 
```

# javascript - Coffeescript 类命名空间方法

> ID：10713493
> 
> 赞同：1
> 
> 时间：2012-05-23T04:34:39.083
> 
> 标签：javascript, oop, coffeescript

```
 class SocialStudies
      constructor : (@val1,@val2) ->
          console.log 'constructed '+@val1+' | '+@val2
      doAlerts :
          firstAlert : =>
               alert @val1
          secondAlert : =>
               alert @val2

 secondPeriod = new SocialStudies 'git to class!', 'no recess for you!'

 secondPeriod.doAlerts.firstAlert() // error this.val1 is not defined 
```

希望你明白这一点。我想`@val1`从方法中设置的方法访问，而胖箭头什么也不做！有谁知道在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:41:07.337

```
 class SocialStudies
      constructor : (@val1,@val2) ->
          console.log 'constructed '+@val1+' | '+@val2
          @doAlerts =
            firstAlert : =>
                alert @val1
            secondAlert : =>
                alert @val2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:13:56.557

当然，您也可以这样做：

```
class SocialStudies
  constructor: (@val1, @val2) ->
    @doAlerts = firstAlert: @firstAlert, secondAlert: @secondAlert
  firstAlert: =>
    alert @val1
  secondAlert: =>
    alert @val2 
```

这在其他方面相当于 Keith Nicholas 的回答，但允许在继承类的方法中使用**super**关键字，所以你可以这样做，比如：

```
class AntiSocialStudies extends SocialStudies
  secondAlert: =>
    @val2 += ' no solitary drinking until 3PM.'
    super

secondPeriod = new AntiSocialStudies 'git to class!', 'no recess for you!'
secondPeriod.doAlerts.secondAlert() 
```

# php - php解析特定行

> ID：10713495
> 
> 赞同：-2
> 
> 时间：2012-05-23T04:34:49.820
> 
> 标签：php, facebook, parsing

```
 Array
(
[data] => Array
    (
        [0] => Array
            (
                [name] => Sujay John
                [id] => 765972231
            )

        [1] => Array
            (
                [name] => Bhawesh Kumar
                [id] => 820284831
            )

        [2] => Array
            (
                [name] => Deepak Sharma
                [id] => 1054741730
            )

        [3] => Array
            (
                [name] => Raman Steta
                [id] => 1093844232
            )

        [4] => Array
            (
                [name] => Rohit Sharma
                [id] => 1101853912
            )

        [5] => Array
            (
                [name] => Rakesh Sharma
                [id] => 1128223845
            ) 
```

我想要这样的输出：

```
name= Sujay John
id= 765972231

[name] => Deepak Sharma
[id] => 1054741730 
```

像那样......只有用户的名称和ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:45:37.907

```
foreach($level01['data'] as $dataArray){
   echo 'name='.$dataArray['name'].' id='.$dataArray['id'].;
} 
```

希望对您有所帮助，否则我的问题错了...

# mysql - 应用触发器后受影响的行数

> ID：10713498
> 
> 赞同：0
> 
> 时间：2012-05-23T04:35:14.203
> 
> 标签：mysql, sql, database

我有一个 mysql 表，我在其上创建了 on-after 和 on-before 触发器以进行插入。每个跳跳机分别更新 2 行。因此，一旦我在表中插入一行，总共更新了 5 行，即使来自数据库的响应将是“1 行受到影响”。我需要找到一种方法来了解更新的总行数，在本例中为 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:53:30.297

问题似乎是当您在触发器中插入/更新行时 MySQL 不计算在内。最好的解决方案可能是自己计算手动插入/更新的行，将值存储在变量中，在外部查询之后获取它并将 ROW_COUNT() 的结果添加到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:32:29.207

我认为它影响了一行，因为您在表中添加了一行。Mysql 回复仅提供该表中添加的行的信息。并且不通过触发器给出受影响的行。

# ios - Google Analytics（分析）自定义变量不适用于 ios

> ID：10713499
> 
> 赞同：0
> 
> 时间：2012-05-23T04:35:28.653
> 
> 标签：ios, ios4, google-analytics, google-analytics-api

我正在将 Google Analytics 与 ios 一起使用，并且我想在调用 viewDidAppear 后立即更新自定义变量的数量，这是我的代码。

```
for (int i = 0 ; i < [KeyArray count]; i++) {
        error = nil;
        if ([KeyArray objectAtIndex:i] == @"Carat") {
            NSDictionary *caratDict = [selectedDiamondsFilter objectForKey:[KeyArray objectAtIndex:i]];
            NSString *value = [NSString stringWithFormat:@"Carat From %@ to %@",[caratDict objectForKey:@"caratfrom"],[caratDict objectForKey:@"caratto"]];
            NSLog(@"%@",value);
            if (![[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"Carat" value:value scope:kGANVisitorScope withError:&error]) {
                NSLog(@"carat =%@",error);
            }

            if(![[GANTracker sharedTracker] trackEvent:@"Diamond Sort" action:@"Sort selected" label:@"sort" value:-1 withError:nil]){
                NSLog(@"Not able to track for Diamonds Section");
            }
            [[GANTracker sharedTracker] dispatch];

        }
        else if ([KeyArray objectAtIndex:i] == @"Clarity") {
            NSDictionary *caratDict = [selectedDiamondsFilter objectForKey:[KeyArray objectAtIndex:i]];
            NSString *value = [NSString stringWithFormat:@"Clarity From %@ to %@",[caratDict objectForKey:@"clarityfrom"],[caratDict objectForKey:@"clarityto"]];
            NSLog(@"%@",value);
            [[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"Clarity" value:value scope:kGANVisitorScope withError:&error];
            if(![[GANTracker sharedTracker] trackEvent:@"Diamond Sort" action:@"Sort selected" label:@"sort" value:-1 withError:nil]){
                NSLog(@"Not able to track for Diamonds Section");
            }

        }
        else if ([KeyArray objectAtIndex:i] == @"Color") {
            NSDictionary *caratDict = [selectedDiamondsFilter objectForKey:[KeyArray objectAtIndex:i]];
            NSString *value = [NSString stringWithFormat:@"Color From %@ to %@",[caratDict objectForKey:@"colorfrom"],[caratDict objectForKey:@"colorto"]];
            NSLog(@"%@",value);
            [[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"Color" value:value scope:kGANVisitorScope withError:&error];
            if(![[GANTracker sharedTracker] trackEvent:@"Diamond Sort" action:@"Sort selected" label:@"sort" value:-1 withError:nil]){
                NSLog(@"Not able to track for Diamonds Section");
            }

        }
        else if ([KeyArray objectAtIndex:i] == @"Price") {
            NSDictionary *caratDict = [selectedDiamondsFilter objectForKey:[KeyArray objectAtIndex:i]];
            NSString *value = [NSString stringWithFormat:@"Price From %@ to %@",[caratDict objectForKey:@"pricefrom"],[caratDict objectForKey:@"priceto"]];
            NSLog(@"%@",value);
            [[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"Price" value:value scope:kGANVisitorScope withError:&error];
            if(![[GANTracker sharedTracker] trackEvent:@"Diamond Sort" action:@"Sort selected" label:@"sort" value:-1 withError:nil]){
                NSLog(@"Not able to track for Diamonds Section");
            }

        }
        else if ([KeyArray objectAtIndex:i] == @"Shape") {
            NSArray *shapes = [selectedDiamondsFilter objectForKey:[KeyArray objectAtIndex:i]];
            for (int i = 0; i<[shapes count]; i++) {
                [[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"Shape" value:[shapes objectAtIndex:i] scope:kGANVisitorScope withError:&error];
                NSLog(@"%@",[shapes objectAtIndex:i]);
                if(![[GANTracker sharedTracker] trackEvent:@"Diamond Sort" action:@"Sort selected" label:@"sort" value:-1 withError:nil]){
                    NSLog(@"Not able to track for Diamonds Section");
                }

            }
            NSLog( @"%@",shapes);

        }
        else if ([KeyArray objectAtIndex:i] == @"Type") {
            NSArray *types = [selectedDiamondsFilter objectForKey:[KeyArray objectAtIndex:i]];
            for (int i = 0; i<[types count]; i++) {
                NSLog(@"%@",[types objectAtIndex:i]);
                [[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"Type" value:[types objectAtIndex:i] scope:kGANVisitorScope withError:&error];
                if(![[GANTracker sharedTracker] trackEvent:@"Diamond Sort" action:@"Sort selected" label:@"sort" value:-1 withError:nil]){
                    NSLog(@"Not able to track for Diamonds Section");
                }                   
            }

        }

        [[GANTracker sharedTracker] dispatch];

        if (error != nil) {
            NSLog(@"Custom Variable HAS ERROR");
        }

        NSLog(@"%@",selectedDiamondsFilter);
    } 
```

但问题是它有时会更新“类型”有时会更新“克拉”，有时会更新其他内容。

请帮助我在哪里犯错。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:12:52.110

你的比较指针，不好。

这些都需要更改为：

```
if([KeyArray objectAtIndex:i] isEqualToString:@"Carat"]]) 
```

# android - Eclipse Indigo、Windows 上的 Android 开发环境

> ID：10713506
> 
> 赞同：1
> 
> 时间：2012-05-23T04:36:54.823
> 
> 标签：android, eclipse, sdk, adt

我正在尝试在 Windows Xp 上的 Eclipse 3.7.2 Indigo 上设置主题环境。Android SDK 安装成功。当我从网站安装 Android 工具时

我收到以下错误

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, 
phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing:   
osgi.bundle,com.android.ide.eclipse.adt,18.0.0.v201203301601-306762
No repository found containing: 
org.eclipse.update.feature,com.android.ide.eclipse.adt,18.0.0.v201203301601-306762
No repository found containing: 
osgi.bundle,com.android.ide.eclipse.ddms,18.0.0.v201203301601-306762
No repository found containing:    
org.eclipse.update.feature,com.android.ide.eclipse.ddms,18.0.0.v201203301601-306762
No repository found containing:  
osgi.bundle,com.android.ide.eclipse.hierarchyviewer,18.0.0.v201203301601-306762
No repository found containing:        
org.eclipse.update.feature,com.android.ide.eclipse.hierarchyviewer,18.0.0.v201203301601-306762
No repository found containing: 
osgi.bundle,com.android.ide.eclipse.traceview,18.0.0.v201203301601-306762
No repository found containing:   
org.eclipse.update.feature,com.android.ide.eclipse.traceview,18.0.0.v201203301601-306762
No repository found containing:  
osgi.bundle,overlay.com.android.ide.eclipse.adt.overlay,18.0.0.v201203301601-306762 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:47:16.750

我所做的是将**https://dl-ssl.google.com/android/eclipse/**更改为**http://dl-ssl.google.com/android/eclipse/**并且它有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T04:08:27.030

我终于能够通过从 Eclipse 外部运行 SDK Manager 来完成任务，例如

```
Windows Start > Programs > android > android-sdk > right mouse click > run as  
administrator. 
```

这有帮助，现在我可以安装新软件包了。没有这样的味精（无法获取等等）

谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:55:52.023

首先，确保您已安装最新的 JDK 和 JRE 文件。接下来，一旦您下载并安装了 Eclipse，请转到 Help->Check for updates，让它运行并确保 Eclipse 完全是最新的。如果在此之后仍然无法正常工作，您可能需要下载“GEF”安装文件，您可以从这里获取下载地址：http: [//www.eclipse.org/gef/updates/index.php](http://www.eclipse.org/gef/updates/index.php)（只需将这些“添加”到您的 Eclipse“可用软件站点”并下载/安装所有文件）。

完成这一切后，您应该能够毫无问题地下载和安装 Android for Eclipse（希望如此）。这是我必须做的，希望它也对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T16:40:07.950

基于[2010 年的这个错误线程](https://code.google.com/p/android/issues/detail?id=6424)，我（2013 年 10 月）使用不同的 URL 解决了这个问题：

转到`Eclipse`/ 菜单 / `Window`/ `Preferences`/ `Install/Update`/ `Available Software Sites`。

click 的`Android Developer Tools Update Site`实体`Edit`。

给`Location`这个网址：

`https://dl-ssl.google.com/android/eclipse/site.xml`

**完毕！**

* * *

我以前的网址是`http://dl-ssl.google.com/android/eclipse/`。如果您在浏览器中检查它们，您可以看到哪个有效！对我来说，只有 xml。

*   xml [https://dl-ssl.google.com/android/eclipse/site.xml](https://dl-ssl.google.com/android/eclipse/site.xml)
*   原文[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

来源：[https ://code.google.com/p/android/issues/detail?id=6424](https://code.google.com/p/android/issues/detail?id=6424)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T04:54:34.170

试试这个，我遇到了同样的问题，并使用以下方法找到了解决方案：

> “没有找到包含”更新 Eclipse 时出现错误 Devon 发表于 2009 年 4 月 21 日 几天前，我开始在更新 Eclipse 插件时遇到问题。对于它尝试更新的几个存储库，我会收到“未找到包含的存储库”错误。这是一个快速修复：
> 
> 转到帮助->软件更新，然后选择可用软件选项卡并单击管理站点按钮
> 
> 使用“导出”按钮将站点导出到bookmarks.xml 文件在您喜欢的文本编辑器中打开bookmarks.xml 文件，然后在任何末尾缺少“/”的站点URL 中添加一个尾随“/”。保存更改。返回 Eclipse 中的 Manage Sites 窗口，选择所有站点并单击 Remove 按钮 现在，单击 Import 并加载已编辑的 bookmarks.xml 文件 现在再次尝试导入，它应该可以工作。

# iphone - 如何更改第一个 tabbaritem 的操作（单击时）

> ID：10713512
> 
> 赞同：0
> 
> 时间：2012-05-23T04:37:29.737
> 
> 标签：iphone, click, action, tabbarcontroller

我正在尝试将 tableviewcontroller 显示为第一页，其中包含 tabbarcontroller。显示后，我想更改 tabbarcontroller 中第一项的操作以显示菜单。

我已经创建了菜单，我只需要想办法改变tabbarcontroller上第一项的点击事件。

我已经搜索了几个小时，非常感谢您的帮助！

在此先感谢，汤米

*编辑：我找到了解决方案，我将在明天发布！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:51:26.477

实施

`- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item{ if(tabBar.selectedItem.tag == 0) { RootViewController *objRootViewController = [[RootViewController alloc]init]; [self.navigationController pushViewController:objRootViewController animated:YES]; [objRootViewController release]; } }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T23:36:02.073

我找到了解决这个问题的好方法......

我使用了 UITabBarController 委托并实现了这个：

```
 - (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
  if([viewController.title isEqualToString:@"YourTitleHere"])
  {
     // do your stuff here
  }else
  {
     return YES;
  }
} 
```

这对我很有用，很高兴我终于找到了解决方案！希望这对其他人也有帮助！

# installshield - 使用 Installshield 创建卸载程序

> ID：10713513
> 
> 赞同：0
> 
> 时间：2012-05-23T04:37:30.133
> 
> 标签：installshield, uninstallation, installshield-2010

我用 installshield 创建了一个安装程序，它可以工作。但我不卸载它。如何为我的项目创建卸载程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:09:03.580

卸载是自动创建的，您应该可以从 Windows 控制面板卸载。

但是，许多应用程序需要特殊的处理程序或在安装程序中编写的代码来处理卸载。这是特定于您的安装程序的。

# dotcloud - 有没有办法在环境中或在构建时获取 php 实例的构建号？

> ID：10713514
> 
> 赞同：0
> 
> 时间：2012-05-23T04:37:45.977
> 
> 标签：dotcloud

我正在尝试获取 php 实例中可用的内部版本号。我会将它用作静态资产（css、js）的一种“缓存破坏器”。有没有办法在运行时得到它？如果没有，有没有办法在安装后脚本中的构建时获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:53:07.323

我看到有几种方法可以做到这一点。

1.  在`/home/dotcloud/`代码目录中是构建版本的符号链接，例如我的代码目录指向`git-16ae997`. 在您的`postinstall`脚本中，如果您获取该目录的名称并将其存储在临时文件、环境变量中，或者可能将其注入您的配置脚本之一，您可以从您的程序中引用它。

将其放入您的`postinstall`脚本中会将`BUILD_VERSION`变量添加到您的脚本中，`.profile`并且您可以`$BUILD_VERSION`在 shell 或其他语言中使用它。`.profile`进行更改后，您可能需要重新获取资源以确保设置成功。

```
$ echo "export BUILD_VERSION=`readlink /home/dotcloud/code`" >> /home/dotcloud/.profile

$ echo $BUILD_VERSION 
```

使用 PHP，您应该能够在运行时使用以下变量获取它。

```
$_ENV["BUILD_VERSION"] 
```

1.  我在其他项目中使用的另一种方法是在 postinstall 中创建仅包含构建时间戳的 .version 文件，并为 build_version 引用该文件并将其用作缓存破坏器。这种方法的问题在于，`postinstall`如果您在 1 个实例以上扩展，您很可能最终会为每个实例使用不同的时间戳，我猜这不是您想要的。

    $ date '+%s' > /home/dotcloud/.version

我会坚持使用＃1，因为它在您扩展时起作用，而且它更加向前。

希望有帮助。

# javascript - jquery搜索结果过滤

> ID：10713517
> 
> 赞同：0
> 
> 时间：2012-05-23T04:38:31.083
> 
> 标签：javascript, jquery, sphinx

我用 php/sphinx/jquery 构建了一个搜索引擎，除了过滤搜索结果外，我大部分都在工作。搜索结果不是过滤器提交，而是显示所有结果，然后在单击复选框时尝试使用 jquery 隐藏不匹配的结果。

我在这里为它创建了一个小提琴[http://jsfiddle.net/LEZAh/](http://jsfiddle.net/LEZAh/)

有效的方法：检查一个框并具有相应的元素显示，当检查另一个框时，将其添加到允许的框中显示。

什么不起作用：当您选中多个复选框并取消选中其中一个时，相应的元素不会显示。

抱歉解释不好，但fillde会为自己说话，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:55:40.497

就像上面出色的帖子（mrtsherman，ahren）的补充一样，您的 else 语句的最后一行导致了问题。一个快速而肮脏的解决方案是：

```
 //$(".ni-search"+checks).show(); //this was the offending line

    $("#cat_"+$(this).attr('id')).hide(); //instead of showing everything just hide what was clicked 
```

我也成功地在你的小提琴中运行了这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:56:23.427

这是您的脚本的另一个简化版本。

[http://jsfiddle.net/LEZAh/4/](http://jsfiddle.net/LEZAh/4/)

```
$('input').change(function() {
    //all checkboxes are unchecked, so show all
    if ($('input:checked').length == 0) {
        $('.ni-search').show();
    }
    else {
        //otherwise only show checked
        $('.ni-search').hide();
        $('input:checked').each(function(index) {
            $('.ni-search').eq(index).show();
        });
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T04:48:48.660

我已经简化了你的点击功能。

```
$(document).ready( function () {
   $('.search-option input').click(function(){
      var inputs = $(".search-option input");
      var products = $(".ni-search");

      products.each(function(i){
         if(inputs.eq(i).is(":checked")){
            $(this).show();
         }else{
            $(this).hide();
         }
      });
      if(products.length == inputs.not(":checked").length){
          products.show();  
      }
   });
});​ 
```

这假设您的结果都将位于同一个包装器中，并且您的复选框也将全部位于同一包装器中。

[链接到更新的 jsFiddle](http://jsfiddle.net/LEZAh/2/)

# eclipse - Eclipse无法保存python2.7解释器

> ID：10713527
> 
> 赞同：1
> 
> 时间：2012-05-23T04:39:41.950
> 
> 标签：eclipse, save, settings, pydev, interpreter

虽然这很奇怪，但发生在我身上。我在 Pydev>interpreter-python 中添加了 python3.2，它总是被保存。我可以很好地运行我的脚本。但是当我在 Pydev>interpreter-python 中添加一个“python2.7”时，它会显示在那里，直到首选项窗口打开，一旦我关闭首选项窗口，它就会消失并带上其他解释器。我的意思是一个空的“interpreter-python”设置。

我将我的工作区保存在 Dropbox 中，以便我可以在使用 Ubuntu 12.04 X64 的不同系统上共享我的设置。我确信这不是 Dropbox ACL 设置问题，因为“Python3.2”设置保存并运行良好，直到我添加“python2.7”删除所有解释器，包括它自己。

请帮忙。无法编码。

AK

# java - 当retainall用于java中的两个键集时不可修改的集合问题

> ID：10713531
> 
> 赞同：3
> 
> 时间：2012-05-23T04:39:57.167
> 
> 标签：java, map

```
Map<String,String> map=request.getParameterMap(); 
```

^ 是不可修改的地图。

```
Set s1= map.keySet();
Set s2= map2.keySet();/* another keyset of local map*/ 
```

使用`s1.retainAll(s2)`抛出异常：`at java.util.collections$unmodifiablecollection.retainall`

这里`request.getParameterMap()`返回一个不可修改的地图。我尝试创建一个本地地图。但问题仍然存在。提出一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:00:52.867

该`Set.retainAll` 方法修改了它被调用的集合。假设`keySet`您不可修改的地图的方法只是对基础地图的看法，它不应该允许修改。您可能想要创建一个新的（可修改的）集合，然后从中删除项目：

```
Set s1 = new HashSet(map.keySet());
s1.retainAll(s3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:01:37.060

不允许修改不可修改映射的键集，因为返回的键集也是 unmodifiableSet。您可以从 unmodifiableMap 创建本地地图，然后在本地地图键集上使用 retainAll。

```
Map map1 = new HashMap();
map1 = Collections.unmodifiableMap(map1);
Map map2 = new HashMap();
Map map3 = new HashMap(map1);
Set s1 = map1.keySet();
Set s2 = map2.keySet();
Set s3 = map3.keySet();
s3.retainAll(s2); 
```

# api - 如何制作自定义 LinkedIn 分享按钮

> ID：10713542
> 
> 赞同：89
> 
> 时间：2012-05-23T04:41:05.547
> 
> 标签：api, share, linkedin

我需要能够向我的自定义按钮添加共享功能。我对[他们的生成器](https://developer.linkedin.com/plugins/share-plugin-generator)不感兴趣，因为我无法在那里更改 LinkedIn 图像。我想为 LinkedIn 分享按钮使用我自己的图片。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-05-24T12:01:59.567

用于分享的官方LinkedIn API：

[https://developer.linkedin.com/docs/share-on-linkedin](https://developer.linkedin.com/docs/share-on-linkedin)

阅读使用条款！

使用“自定义 URL”方法的示例链接：[http ://www.linkedin.com/shareArticle?mini=true&url=https://stackoverflow.com/questions/10713542/how-to-make-custom-linkedin-share-button /10737122&title=How%20to%20make%20custom%20linkedin%20share%20button&summary=some%20summary%20if%20you%20want&source=stackoverflow.com](http://www.linkedin.com/shareArticle?mini=true&url=https://stackoverflow.com/questions/10713542/how-to-make-custom-linkedin-share-button/10737122&title=How%20to%20make%20custom%20linkedin%20share%20button&summary=some%20summary%20if%20you%20want&source=stackoverflow.com)

您只需要使用 JavaScript 在弹出窗口中打开它或将其加载到`iframe`. 简单而有效——这就是我想要的！

## 编辑：附加到帖子的视频：

我检查了您不能真正将任何视频嵌入到 LinkedIn 帖子中，唯一的选择是将链接添加到带有视频本身的页面。

您可以通过将 YT 链接放入`url`参数来实现它：

[https://www.linkedin.com/shareArticle?mini=true&url=https://www.youtube.com/watch?v=SBi92AOSW2E](https://www.linkedin.com/shareArticle?mini=true&url=https://www.youtube.com/watch?v=SBi92AOSW2E)

如果您指定`summary`，`title`然后 LinkedIn 将停止从视频中提取它，例如：

[https://www.linkedin.com/shareArticle?mini=true&summary=youtube&title=f1&url=https://www.youtube.com/watch?v=SBi92AOSW2E](https://www.linkedin.com/shareArticle?mini=true&summary=youtube&title=f1&url=https://www.youtube.com/watch?v=SBi92AOSW2E)

它与 Vimeo 的工作方式完全相同，并且可能适用于任何网站。希望它会有所帮助。

## 编辑 2：将图像拉到帖子中：

当您打开上面的链接时，您会看到 LinkedIn 加载了一些图像以及传递的 URL（以及可选的标题和摘要）。

LinkedIn 会自动执行此操作，您可以在此处阅读：[https ://developer.linkedin.com/docs/share-on-linkedin#opengraph](https://developer.linkedin.com/docs/share-on-linkedin#opengraph)

有趣的是，正如它所说：

> 如果存在 Open Graph 标签，LinkedIn 的爬虫将不必依靠自己的分析来确定将共享哪些内容，从而提高共享信息正是您想要的内容的可能性。

它告诉我，即使没有附加 Open Graph 信息，LinkedIn 也可以根据自己的分析拉取这些数据。在 YouTube 的情况下，似乎就是这种情况，因为我找不到任何添加到 YouTube 页面的 Open Graph 标签。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-18T10:12:33.193

您可以使用 LinkedIn ShareArticle URL 创建自己的共享按钮，该 URL 可以具有以下参数：

```
https://www.linkedin.com/shareArticle?mini=true&url={articleUrl}&title={articleTitle}&summary={articleSummary}&source={articleSource} 
```

[您可以在此处](https://developer.linkedin.com/docs/share-on-linkedin)找到文档，只需选择“自定义 URL”即可查看详细信息。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2020-05-03T23:33:04.323

### 第 1 步 - 获取正确的 URL

这里的许多答案直到最近才有效。目前，***唯一***支持的参数是`url`，新的分享链接如下...

```
https://www.linkedin.com/sharing/share-offsite/?url={url} 
```

确保`url`已编码，使用类似[`fixedEncodeURIComponent()`](https://stackoverflow.com/a/61843371/2430549).

来源：**[Microsoft.com 官方 Linkedin Share 插件文档](https://docs.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/plugins/share-plugin)**。开发者文档的所有LinkedIn.com 链接现在似乎都是空白页——可能与微软收购LinkedIn 有关。

### 第 2 步 - 设置自定义参数（标题、图像、摘要等）

曾几何时，您可以使用这些参数：`title`, `summary`, `source`. 但是如果你仔细看*所有的文档*，***其实还是有办法设置摘要、标题等的！*** 将这些放在`<head>`您要共享的页面的块中...

*   `<meta property='og:title' content='Title of the article"/>`
*   `<meta property='og:image' content='//media.example.com/ 1234567.jpg"/>`
*   `<meta property='og:description' content='Description that will show in the preview"/>`
*   `<meta property='og:url' content='//www.example.com/URL of the article" />`

然后 LinkedIn 将使用这些！来源：[**LinkedIn 开发人员文档：让您的网站在 LinkedIn 上可共享**](https://www.linkedin.com/help/linkedin/answer/46687/making-your-website-shareable-on-linkedin?lang=en)。

### 第 3 步 - 验证 LinkedIn 分享结果

不确定你做对了吗？获取您正在共享的页面的 URL（即 example.com，而不是 linkedin.com/share?url=example.com），然后将该 URL 输入到以下内容中：[**LinkedIn Post Inspector**](https://www.linkedin.com/post-inspector/)。这将告诉您有关如何共享 URL 的所有信息！

这也会拉取/无效页面的当前缓存，然后刷新它（如果您在 LinkedIn 的数据库中有页面的卡住、缓存版本）。因为它会拉取缓存，然后刷新它，所以有时最好使用 LinkedIn Post Inspector 两次，并将第二个结果用作预期输出。

还是不确定？这是我使用 20 多种社交共享服务构建的[在线演示。](https://www.sortwords.com)检查源代码并亲自了解 LinkedIn 共享的工作原理。

### 第 4 步 - 查找*更多*社交共享服务及其共享 URL

我一直在维护一个自 2012 年以来一直在跟踪社交共享 URL 格式的 Github 存储库，请查看：[Github：社交共享 URL](https://github.com/bradvin/social-share-urls)。

为什么不加入所有社交分享网址？

[![社交分享网址](../Images/80f76ec3827227f0c745b62a5b15dff5.png)](https://i.stack.imgur.com/8rEut.jpg)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-04-15T15:17:50.420

截至 2017 年 4 月，这是用于共享的当前 URL：

[https://www.linkedin.com/shareArticle?mini=true&url=http://developer.linkedin.com&title=LinkedIn%20Developer%20Network &summary=My%20favorite%20developer%20program&source=LinkedIn](https://www.linkedin.com/shareArticle?mini=true&url=http://developer.linkedin.com&title=LinkedIn%20Developer%20Network%20&summary=My%20favorite%20developer%20program&source=LinkedIn)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-12-14T13:53:28.303

最好使用**自定义 url**方法。它是最简单的。找到了这个。它将打开一个弹出窗口，因此您不需要任何 bs 身份验证问题`w_share`。

```
<a href="https://www.linkedin.com/shareArticle?mini=true&url=http://chillyfacts.com/create-linkedin-share-button-on-website-webpages&title=Create LinkedIn Share button on Website Webpages&summary=chillyfacts.com&source=Chillyfacts" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
  <img src="http://chillyfacts.com/wp-content/uploads/2017/06/LinkedIN.gif" alt="" width="54" height="20" />
</a>
```

只需`url`使用您自己的网址更改即可。这是链接[http://chillyfacts.com/create-linkedin-share-button-on-website-webpages/](http://chillyfacts.com/create-linkedin-share-button-on-website-webpages/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-02-18T15:33:41.960

API 现已更新，之前的 API 将于 2019 年 3 月 1 日弃用。

要为 LinkedIn 创建自定义共享按钮，您现在需要进行 POST 调用。[您可以在此处](https://docs.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/share-on-linkedin?context=linkedin/consumer/context)阅读更新的文档。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-02-16T22:53:16.497

LinkedIn 最近修改了他们的网站，因此有大量旧链接只是重定向到开发人员支持主页。以下是 LinkedIn 支持网站上相关页面的更新链接（截至 2015 年 2 月 16 日）：[https ://developer.linkedin.com/docs/share-on-linkedin](https://developer.linkedin.com/docs/share-on-linkedin)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-09-26T13:57:51.350

LinkedIn 已经更新了他们的 api 并且共享 url 不再有效。现在您只能使用`url`查询参数。LinkedIn 将从 URL 中删除任何其他参数。

现在您不得不使用 oAuth 并与[linkedin API](https://docs.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/share-on-linkedin?context=linkedin/consumer/context)交互以代表用户共享内容。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-22T12:39:41.813

这对我有用：

```
https://www.linkedin.com/shareArticle?mini=true&url=articleUrl&title=YourarticleTitle&summary=YourarticleSummary&source=YourarticleSource 
```

您可以通过将其替换为您的内容来使用此链接。它可以 100% 工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-06-01T00:54:30.670

在页面加载后，您可以像这样自定义标准的 Linkedin 按钮：

```
$(".IN-widget span:first-of-type").css({
                'border': '2px solid #DCDCDC',
                '-webkit-border-radius': '3px',
                '-moz-border-radius': '3px',
                'border-radius': '3px'
                }); 
```

# javascript - 如何在 pjax 加载之前和之后运行 jQuery？

> ID：10713546
> 
> 赞同：8
> 
> 时间：2012-05-23T04:41:54.107
> 
> 标签：javascript, jquery, ajax, pjax

我目前正在使用 pjax，它工作得很好，但我需要运行两个 jQuery 函数，一个在 pjax 加载新 url 之前，一个在加载新 url 之后，我该怎么做？

我尝试了以下两种变体，但似乎都不起作用？

第一次尝试：

```
$("a").pjax("#main").live('click', function(){

    //Function Before Load  
    // Function After Load
}) 
```

第二次尝试：

```
$("body").on("click", "a", function(){

    //Function Before Load  

    $(this).pjax("#main");

    //Function After Load   

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-23T04:51:37.537

正如他们在他们的文档中所说，[这里](https://github.com/defunkt/jquery-pjax) `pjax`会针对您的需要触发两个事件

> pjax 将在您要求它加载您的响应正文的容器上触发两个事件：
> 
> pjax:start - 当一个 pjax ajax 请求开始时触发。
> 
> pjax:end - 当 pjax ajax 请求结束时触发。

以及为此的代码示例

```
$('a.pjax').pjax('#main')
$('#main')
  .on('pjax:start', function() { //do what you want to do before start })
  .on('pjax:end',   function() { //after the request ends }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:27:08.940

```
$("body").on("click", "a", function(){

 $(this).pjax("#main");
 $('a.pjax').pjax('#main')
 $('#main').on('pjax:start', function() { /* your code before ajax load */ });
 $('#main').on('pjax:end',   function() { /* your code after ajax load */ });

  return false;
}); 
```

# java - LWJGL Applet java.lang.UnsatisfiedLinkError：java.library.path 中没有 lwjgl

> ID：10713547
> 
> 赞同：0
> 
> 时间：2012-05-23T04:41:56.950
> 
> 标签：java, applet, lwjgl, unsatisfiedlinkerror

我正在尝试将我的 LWJGL 应用程序移植到 Applet 以在线播放，但是，我无法弄清楚如何为本地人提供正确的路径。

这是 .java 小程序代码：

```
package net.foxycorndog.idk.applet;

import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Canvas;

import net.foxycorndog.idk.Idk;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;

public class IdkApplet extends Applet
{
    Canvas  drawCanvas;

    Idk     idk;

    /** is the game loop running */
    boolean running = false;

    public void startLWJGL()
    {
        idk.start(drawCanvas);
    }

    /**
     * Tell game loop to stop running, after which the LWJGL Display will be
     * destroyed. The main thread will wait for the Display.destroy().
     */
    private void stopLWJGL()
    {
        running = false;

        try
        {
            idk.getGameThread().join();
        }
        catch (InterruptedException e)
        {
            e.printStackTrace();
        }
    }

    public void start()
    {

    }

    public void stop()
    {

    }

    /**
     * Applet Destroy method will remove the canvas, before canvas is destroyed
     * it will notify stopLWJGL() to stop the main game loop and to destroy the
     * Display
     */
    public void destroy()
    {
        super.destroy();
        System.exit(0);
    }

    public void init()
    {
        Idk.init();

        idk = new Idk();

        setLayout(new BorderLayout());
        try
        {
            drawCanvas = new Canvas()
            {
                public final void addNotify()
                {
                    super.addNotify();
                    startLWJGL();
                }

                public final void removeNotify()
                {
                    stopLWJGL();
                    super.removeNotify();
                }
            };

            setSize(640, 512);

            drawCanvas.setSize(getWidth(), getHeight());
            add(drawCanvas);
            drawCanvas.setFocusable(true);
            drawCanvas.requestFocus();
            drawCanvas.setIgnoreRepaint(true);
            setVisible(true);
        }
        catch (Exception e)
        {
            System.err.println(e);
            throw new RuntimeException("Unable to create display");
        }
    }

    protected void initGL()
    {

    }
} 
```

继承人的HTML代码：

```
<html>
    <body>
        <center>
            <div class="rounded">
                <applet code="net.foxycorndog.idk.applet.IdkApplet" name="theapplet" archive="Idk.jar" width="640" height="512" codebase="../applets/Idk">
                    <!-- The following tags are mandatory -->

                    <!-- Name of Applet, will be used as name of directory it is saved in, and will uniquely identify it in cache -->
                    <param name="al_title" value="appletloadertest">

                    <!-- Main Applet Class -->
                    <param name="al_main" value="net.foxycorndog.idk.applet.IdkApplet">

                    <!-- List of Jars to add to classpath -->
                    <param name="al_jars" value="lwjgl_applet.jar.pack.lzma, lwjgl.jar.pack.lzma, lwjgl_util.jar.pack.lzma">

                    <!-- signed windows natives jar in a jar --> 
                    <param name="al_windows" value="windows_natives.jar.lzma">

                    <!-- signed linux natives jar in a jar --> 
                    <param name="al_linux" value="linux_natives.jar.lzma">

                    <!-- signed mac osx natives jar in a jar --> 
                    <param name="al_mac" value="macosx_natives.jar.lzma">

                    <!-- signed solaris natives jar in a jar --> 
                    <param name="al_solaris" value="solaris_natives.jar.lzma">

                    <!-- Tags under here are optional -->

                    <!-- whether to use cache - defaults to true -->
                    <!-- <param name="al_cache" value="true"> -->

                    <!-- Version of Applet (case insensitive String), applet files not redownloaded if same version already in cache -->
                    <!-- <param name="al_version" value="0.1"> -->

                    <!-- Specify the minimum JRE version required by your applet, defaults to "1.5" -->
                    <!-- <param name="al_min_jre" value="1.6"> -->

                    <!-- background color to paint with, defaults to white -->
                    <!-- <param name="boxbgcolor" value="#000000"> -->

                    <!-- foreground color to paint with, defaults to black -->
                    <!-- <param name="boxfgcolor" value="#ffffff"> -->

                    <!-- logo to paint while loading, will be centered, defaults to "appletlogo.gif" -->
                    <!-- <param name="al_logo" value="appletlogo.gif"> -->

                    <!-- progressbar to paint while loading. Will be painted on top of logo, width clipped to percentage done, defaults to "appletprogress.gif" -->
                    <!-- <param name="al_progressbar" value="appletprogress.gif"> -->

                    <!-- whether to run in debug mode -->
                    <!-- <param name="al_debug" value="true"> -->

                    <!-- whether to prepend host to cache path - defaults to true -->
                    <!-- <param name="al_prepend_host" value="true"> -->

                    <param name="separate_jvm" value="true">

                    <p>
                        You're browser must have java enabled to view this content. If you do not have jave installed or the newest version, you can click here to update it to the latest version.
                        <a href="http://java.com/en/download/">Java</a>
                    </p>
                </applet>
            </div>
        </center>
    </body>
</html> 
```

这是错误输出：

```
Exception in thread "Thread-14" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1758)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1045)
at org.lwjgl.Sys$1.run(Sys.java:73)
at java.security.AccessController.doPrivileged(Native Method)
at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
at org.lwjgl.Sys.loadLibrary(Sys.java:95)
at org.lwjgl.Sys.<clinit>(Sys.java:112)
at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
at net.foxycorndog.presto2d.PrestoGL2D.createFrame(PrestoGL2D.java:172)
at net.foxycorndog.idk.Frame.init(Frame.java:163)
at net.foxycorndog.idk.Frame.<init>(Frame.java:75)
at net.foxycorndog.idk.Idk$1$1.<init>(Idk.java:118)
at net.foxycorndog.idk.Idk$1.run(Idk.java:118) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:51:42.000

在桌面应用程序和 Applet 中执行时，Java 运行时定位本机库的方式存在显着差异。因为 Applet 被捆绑并传输以在客户端浏览器中运行，所以您必须包含它需要的大多数依赖项，尤其是对于它引用的本机库。幸运的是，LWJGL 提供了一个帮助类来管理部署为小程序的应用程序。

阅读更多关于[LWJGL AppletLoader](http://www.lwjgl.org/wiki/index.php?title=Deploying_with_the_LWJGL_Applet_Loader_-_Introduction)以及如何将它整合到您的应用程序中的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:05:45.173

你的小程序标签的头部错误，应该如下

```
<applet code="org.lwjgl.util.applet.AppletLoader"
    archive="lwjgl_util_applet.jar" 
    codebase="." 
    width="640" height="512"> 
```

idk.jar 也应该添加到 al_jars 参数中。其余的看起来是正确的。

# asp.net-mvc - Upshot/Knockout Architectural Best Practices - 限制用户访问通过 WebAPI 公开的功能的首选方法是什么？

> ID：10713548
> 
> 赞同：0
> 
> 时间：2012-05-23T04:42:24.200
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api, upshot

使用 Knockout 和 Upshot 实现单页应用程序的一个基本思想是，大部分数据将使用 AJAX 以 JSON 格式从服务器接收和发送到服务器。

在服务器上，我们将公开一些端点（可能使用 WebAPI 和 DbDataController）来响应来自 Upshot 的请求。这些端点可以提供对数据的一般查询，例如客户列表、以前的订单、帐户信息等。

显然，不希望一个客户能够查看另一个客户的帐户信息、先前的订单或其他私人数据。

*   使用什么策略或方法来保护从结果（或其他机制）请求到服务器的查询（和数据）？（换句话说，我们如何确保用户只能访问他自己的数据？）
*   这些策略是否与普通 ASP.NET MVC 应用程序中使用的策略相同或不同——即使用 Authorize 属性？

这可能是一个非常简单的问题，但我仍然不清楚 WebAPI 控制器和通常的 ASP.NET MVC 控制器之间的所有区别。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:56:55.150

自定义授权属性是实现此要求的一种可能方式。[`System.Web.Http.AuthorizeAttribute`](http://msdn.microsoft.com/en-us/library/system.web.http.authorizeattribute%28v=vs.108%29.aspx)与标准 ASP.NET MVC 控制器的唯一区别是您从[`System.Web.Mvc.AuthorizeAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx).

# c - 指向指针的简单指针

> ID：10713551
> 
> 赞同：0
> 
> 时间：2012-05-23T04:42:45.247
> 
> 标签：c, pointers, double-pointer

我知道为什么会这样：

```
#include <stdio.h>

void cool_number(int **number) {
  int value = 42;
  int *p = &value;
  *number = p;
}

int main () {
  int *number;
  cool_number(&number);
  printf("number is %d\n", *number);
  return 0;
} 
```

我不明白为什么这不（在我的机器上打印`3700`或类似的东西）。

```
#include <stdio.h>

void cool_number(int **number) {
  int value = 42;
  int *p = &value;
  int **x = &p;
  number = x;
}

int main () {
  int *number;
  cool_number(&number);
  printf("number is %d\n", *number);
  return 0;
} 
```

为什么两者不等价？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:54:29.117

两者都是邪恶的，因为它们捕获了堆栈变量的地址。

第二个没有达到您的预期，因为您直接分配给参数编号，这只是暂时的，第一个更改了参数编号指针指向的内容，这与 main 中的 number 指向相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T04:48:08.413

我认为它们不等效，因为`number`在堆栈上按值传递，这是函数参数的标准。`number`您直接对inside 进行的任何更改都会`cool_number()`修改堆栈上的本地副本，并且不会反映在 in 的值`number`中`main()`。

在第一个示例中，您通过取消引用解决了这个问题`number`，它告诉计算机修改内存中的某个特定位置，而您也恰好有一个指向返回的指针`main()`。在第二个示例中您没有这个，所以所发生的只是您使本地`number`指针指向其他地方，而没有实际更新在`main()`. 因此，一旦您回到`main()`.

而且由于`value`是`cool_number()`函数的本地，因此不能保证在返回后访问它的引用，`cool_number()`并且当然不应该在琐碎/玩具示例之外的任何代码中使用。但是在这个特定的例子中，它与为什么你在两段代码之间看到不同的结果并没有真正的关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T04:54:32.313

据我了解，在这两种情况下，您的代码都是错误的。

1.  在第一种情况下，您将地址返回给分配在堆栈上的变量，该变量将在函数返回后立即释放。

2.  在第二种情况下，存在第一种情况的错误，加上您是按值传递数字，因此对数字的更新不会反映在调用者函数中。

在“C”中，参数总是按值传递。因此，您不能按原样更新传递的参数。例如：

```
int func(int a)
{
  a = 5; // In this case the value 5 will not be reflected in the caller as what is updated is the local copy of a on the stack
}

int func(int *a)
{

  *a = 5; // This update will show in caller as you are directly updating the memory pointed to by a
   a = malloc(4); //This update will not show in caller as again you are updating the local copy of stack       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:28:47.247

```
#include <stdio.h>

void cool_number(int **number) {
  int value = 42; /* this "value" hold 42 value, 
                     and it lifetime is only in this function */
  int *p = &value; /* here we get the address of "value" in memory */
  *number = p;
}

int main () {
  int *number;
  cool_number(&number);  /* after this function the "value" in memory had been recyled
                            and may be used by other program */
  printf("number is %d\n", *number); /* so when we print value here it will be 
                                 a unpredictable value, somehow may be crash */
  return 0;
} 
```

两者原理相同

# cocoa-touch - touchesEnded: 没有被调用，而是 touchesCancelled: 后跟崩溃

> ID：10713554
> 
> 赞同：0
> 
> 时间：2012-05-23T04:43:17.163
> 
> 标签：cocoa-touch, exception, ios5

当我在我的应用程序中的屏幕上滑动时，有时`touchesEnded:`不会被调用并且`touchesCancelled:`被多次调用，然后是崩溃`EXC_BAD_ACCESS`。我应该怎么办？

# delphi - 在运行时获取类中的变量名列表

> ID：10713555
> 
> 赞同：4
> 
> 时间：2012-05-23T04:43:27.243
> 
> 标签：delphi

我在程序中声明了一些简单的类，例如

```
MyClass = class 
    Var1 : Integer
    Var2 : Integer
end; 
```

我想做的是在运行时获取此类（“MyClass”）中的变量列表（对于组件可能类似于“GetPropList”？）

我想到了这样的事情（显然，函数“GetVarNames”不存在，但我希望这能给出想法），它将把“MyClass”中列出的变量的名称拉到 TStringList 中的字符串中：

```
var
    MyVariableNamesList: TStringList
    i : integer;

begin
    MyVariableNamesList := TStringList.create;        
    MyVariableNamesList := GetVarNames(MyClass)

end; 
```

任何人都可以建议吗？如果这是一个愚蠢的问题，请提前道歉！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T05:59:19.650

根据您的 Delphi 版本，您可以使用新的 RTTI（随 Delphi 2010 引入）。

你可以这样做：

```
function GetVarNames(const AClass : TObject) : TStringList;
var lType : TRttiType;
  lContext : TRttiContext;
  lProperty : TRttiProperty;
  lField : TRttiField;
begin
  Result := TStringList.create;
  LType := lContext.GetType(AClass.ClassType);
  if assigned(LType) then
  begin
    for LProperty in LType.GetProperties do
    begin
      Result.Add(lProperty.Name);
      //Get current value:
      Result.Add(lProperty.GetValue(AClass).ToString);
    end;
   for lField in LType.GetFields do
   begin
     Result.Add(lField.Name);
     //Get current value:
     Result.Add(lField.GetValue(AClass).ToString);
   end;
 end;
end; 
```

# javascript - 如何在 Handlebars / Ember.js 中插入动态 {{property}}？

> ID：10713559
> 
> 赞同：10
> 
> 时间：2012-05-23T04:43:52.540
> 
> 标签：javascript, handlebars.js

假设我有一个`User`JavaScript 模型，看起来像这样：

```
var User = function(attributes) {
  this.attributes = attributes;
}

User.fields = [
  {name: 'firstName'},
  {name: 'lastName'},
  {name: 'email'}
]

User.prototype.get = function(key) {
  return this.attributes[key];
}

User.all = [new User({firstName: 'Foo'})]; 
```

我想通过一个 Handlebars 模板运行它，该模板遍历`User`类上的每个字段，为其创建一个标题，然后为每个用户呈现值：

```
<table>
  <thead>
    <tr>
      {{#each User.fields}}
      <th>{{name}}</th>
      {{/each}}
    </tr>
  </thead>
  <tbody>
    {{#each User.all}}
    <tr>
      {{#each User.fields}}
      <td>{{content.get(name)}}</td>
      {{/each}}
    </tr>
    {{/each}}
  </tbody>
</table> 
```

我的问题是，我如何完成内部部分：

```
{{#each User.fields}}
<td>{{content.get(name)}}</td>
{{/each}} 
```

基本上就是这样做的`user.get(field.name)`。鉴于我事先不知道这些字段并希望它是动态的，我该如何在 Handlebars 中做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T12:43:33.730

```
 <body>
   <div id='displayArea'></div>
   <script id="template" type="text/x-handlebars-template">
    <table border="2">
        <thead>
        <tr>
            {{#each Fields}}
             <th>{{name}}</th>
            {{/each}}
        </tr>
        </thead>
        <tbody>
          {{#each users}}
          <tr>
            {{#each ../Fields}}
           <td>{{getName name ../this}}</td>
            {{/each}}
          </tr>
         {{/each}}
        </tbody>
     </table>
 </script>

<script type="text/javascript">
    var User = function(attributes) {
        this.attributes = attributes;
    }

    User.fields = [
        {name: 'firstName'},
        {name: 'lastName'},
        {name: 'email'}
    ]

    User.prototype.get = function(key) {
       return this.attributes[key];
    }

    User.all = [new User({firstName: 'Foo',lastName :'ooF',email : 'foo@gmail.com'}) , new User({firstName: 'Foo2'})];       //array of user

    //handle bar functions to display
    $(function(){
       var template = Handlebars.compile($('#template').html());

        Handlebars.registerHelper('getName',function(name,context){
                          return context.get(name);
          });
        $('#displayArea').html(template({Fields :User.fields,users:User.all}));
    });
   </script>
  </body> 
```

这将使用车把 JS 中的助手解决您的问题

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-23T05:08:09.000

您可以编写一个 Handlebars 助手来为您执行此操作。

# c - 如何在不使用c中的指针的情况下初始化三维char数组

> ID：10713566
> 
> 赞同：1
> 
> 时间：2012-05-23T04:44:52.860
> 
> 标签：c, arrays

如何在c中初始化没有指针的三维`char`数组并访问它？
我尝试了以下方法：

```
char card[1][3][15]={            
                      {"iron","man"},  
                      {"contagious","heide"},  
                      {"string","middle"}  
                     }; 
```

但我得到

```
 **Error:too many initializers**  
  **Warning: Array is only partially initialized** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:48:55.290

让我们举一个简单的例子......您可以使用自己的值而不是这些整数：

宣言：

```
int arr[2][3][4] = { { {1, 2, 3, 4}, {1, 2, 3, 4}, {1, 2, 3, 4} },
                     { {1, 2, 3, 4}, {1, 2, 3, 4}, {1, 2, 3, 4} } }; 
```

我希望，这对你来说很清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:17:57.977

考虑到您的示例本身：

我认为应该是

```
char card[1][3][15]={ {"iron","man", "contagious"}}; 
```

这意味着您可以有效地创建 3 个长度为 15 的 char 数组。您的第一个维度 1 没有太大影响。

所以，你可以让它像

```
char card[2][3][15]={ {"iron","man", "contagious"},
                      {"iron","man", "contagious"}}; 
```

因此，为了您的简单理解，行数表示第一个维度，每行中的列数表示第二个维度，每列中的元素数（在本例中为字符）表示第三个维度。

所以，现在您可以看到，对于您问题中的数据，您应该将数组声明为`char char[3][2][15]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:51:45.960

```
char card[1][3][15]={ { {"iron","man"},{"contagious","heide"},{"string","middle"}}
                     }; 
```

你应该在里面放另一个大括号。我想这会对你有所帮助。

# java - java中的hashCode实现

> ID：10713576
> 
> 赞同：0
> 
> 时间：2012-05-23T04:46:26.993
> 
> 标签：java, hashcode

我有一个`class Dog extends Animal`.

然后我调用 hashCode() 方法如下。

```
Animal animal  = new Dog(200);
System.out.println(animal.hashCode()); 
```

在这里，
如果我在 Dog 类中重写了 hashCode() ，它将被返回。否则，如果我在 Dog 类中覆盖了 hashCode() ，它将被返回。否则返回一些整数。

我想知道...

*   为什么在Dog类中没有覆盖的时候调用超类的hashCode()？“一些整数”是如何产生的以及产生了什么

*   当 hashCode 没有在任何地方生成时。（我听说它是​​对象的内存位置但不确定。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:49:08.410

这称为方法覆盖。该`hashCode`方法定义在 中`java.lang.Object`，基本上是对象层次结构的顶部，因此它始终可用于 Java 中定义的任何对象。如果该方法未在您的特定子类或其父类之一中被覆盖，`java.lang.Object`则将调用中定义的默认行为。

您通常不应该担心哈希码在父对象中的内部实现是什么，但默认实现确实使用对象的内部地址。请注意，这个内部地址正是 JVM*内部*使用的解释地址，应用程序不应该依赖它来获得任何特别有意义的东西。

[您可以在Java 语言规范 - 第 8.4.8 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.1.3)中阅读有关覆盖如何工作的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:55:51.083

在java中，每个类，如果没有明确提到，都会有Object类作为它的父类。由于 Object 类定义了 hashcode 方法，即使您没有在类中定义，这也是可用的。是的，在 java 中，默认的哈希码实现是返回对象的内存位置。在某种程度上，这看起来是正确的，就好像两个对象位于相同的内存位置而不是它们必须相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:02:51.147

hasCode() 是表单父类对象，因此如果您没有覆盖它，则将调用父方法。我认为您所说的某个整数是在超级父对象处生成的 hashCode。这表明您没有覆盖 Animal 类中的 hashCode 。

In general if a super class method is not overridden then the immediate parent's method will be called.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:23:15.263

1.  First In java every class, if not explitcitly mentioned, will have Object class as its parent class
2.  Java doesn't generate hashCode(), i.e. This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the Java^(TM) programming language. Most classes (especially if you are going to use it in any of the Collection API) specially in hashcontainer(HashSet and HashMap) should implement their own HashCode (and by contract their own equals method).

If you are interested to know when to implement hashCode() and equals() you can visit this site [http://www.javabeat.net/2007/08/hashcode-and-equals-methods/](http://www.javabeat.net/2007/08/hashcode-and-equals-methods/)

# javascript - 这两个 addEvent 函数有什么区别？

> ID：10713577
> 
> 赞同：0
> 
> 时间：2012-05-23T04:46:33.233
> 
> 标签：javascript, internet-explorer, attachevent

这是第一个：

```
function addEvent(el, type, fn){
    if(el.addEventListener){
        el.addEventListener(type, fn, false);
    }else{
        el[fn] = function(){
            fn.call(el, window.event);
        }
        el.attachEvent('on'+type, el[fn]);
    }
} 
```

第二个：

```
function addEvent(el, type, fn){
    if(el.addEventListener){
        el.addEventListener(type, fn, false);
    }else{  
        el['e' + fn] = function(){
            fn.call(el, window.event);
        }
        el.attachEvent('on'+type, el['e'+fn]);
    }
} 
```

第二个只是添加一个前缀，它有什么用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:04:39.403

在我看来，这两个函数都试图做同样的事情：以跨浏览器一致的方式绑定事件处理程序（即不支持的旧 IE 版本`.addEventListener()`）。如果该`.addEventListener()`方法可用，则使用它，否则它会创建一个代理函数，以确保使用适当的值`this`和事件对象调用回调函数。

区别仅在于创建和稍后引用元素上的属性时`el[fn]`：`el['e' + fn]`

```
 el[fn] = function(){
        fn.call(el, window.event);
    } 
```

的`fn`参数`addEvent()`必须是函数引用，而且我不确定如果您使用函数引用作为属性名称会发生​​什么，但我猜它本质上是`toString()`对函数执行 a 并将结果用作属性名称。所以`el['e' + fn]`会做同样的事情，但会添加`'e'`到开头。我没有看到“e”有任何特殊含义。

# python - Python：不会重新分配变量

> ID：10713579
> 
> 赞同：1
> 
> 时间：2012-05-23T04:46:53.903
> 
> 标签：python, function, variables

为什么调用*tst*时下面的变量 (A,B,C,D) 没有改变。

```
A,B,C = 0,0,0
D = 0

def tst():
    A,B,C = 1,2,3
    D = 4
    print(A,B,C,D)

tst() # tst is called
print(A,B,C,D)

Output:

(1, 2, 3, 4)
(0, 0, 0, 0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T04:51:00.967

因为 Python 范围规则。

在 def tst() 中，您正在创建局部变量 A、B 和 C，并为它们分配新值。

如果您希望分配给全局 A、B 和 C 值，请使用 global 关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:50:41.203

方法中的变量`tst`是*local*，也就是说，它们引用了只存在于该方法范围内的不同值。使用内部的关键字`global`（如`global A,B,C,D`）`tst`来修复行为。[请参阅此处](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)的示例和[此处](http://www.wellho.net/resources/ex.php4?item=y105/locvar.py)的问题。

# asp.net - 如何在中继器中切换 DIV 的可见性？

> ID：10713580
> 
> 赞同：1
> 
> 时间：2012-05-23T04:47:00.770
> 
> 标签：asp.net, repeater, visible

我的中继器中有一个 DIV，如下所示：

```
 <asp:Repeater ID="topicView" runat="server" OnItemCommand="Delete_ItemCommand">
    <ItemTemplate>
    <table width="945px" cellpadding="0" cellspacing="0" border="0" class="post-table">
        <tr>
            <td colspan="2">
                <div class="post-info">
                    <div class="post-info-left"><%#DataBinder.Eval(Container.DataItem, "PostDate")%></div>
                    <div class="post-info-right">#<%#DataBinder.Eval(Container.DataItem, "PostID")%></div>
                    <div class="clear"></div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="post-left">
                <p><strong><%#DataBinder.Eval(Container.DataItem, "Username")%></strong></p>
            </td>
            <td class="post-right">
                <p><%#DataBinder.Eval(Container.DataItem, "PostBody")%></p>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <div class="post-edit">
                    <p id="postEditAdmin" runat="server" visible="false"><a class="fancybox.iframe fancybox" href='editpost.aspx?postID=<%#DataBinder.Eval(Container.DataItem, "PostID")%>'>Edit</a> | <asp:LinkButton ID="deleteBtn" runat="server" Text="Delete" CommandName="Delete" OnClientClick="javascript:if(!confirm('Delete this information? this will delete permanently'))return false;" CommandArgument='<%#DataBinder.Eval(Container.DataItem, "PostID")%>' /></p>
                    <p id="postEdit" runat="server" visible="true"><i>You must be an admin to be able to edit or delete a post</i></p>
                </div>
            </td>
        </tr>
    </table>
    </ItemTemplate>
</asp:Repeater> 
```

谁能让我知道如何将 postEditAdmin.Visible 设置为 true 并将 postEdit.Visible 设置为 false？它没有在页面加载中被拾取。

另请注意，它将根据 if 语句进行更改。这是我到目前为止所拥有的：

```
 if (Session["role"].ToString() == "2")
        {
            postEditAdmin.Visible = true;
            postEdit.Visible = false;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:54:48.903

您必须在绑定过程中使 div 可见或隐藏。将事件添加到中继器。

在aspx页面，html端添加

```
 <asp:Repeater ID="topicView" runat="server" OnItemCommand="Delete_ItemCommand" OnItemDataBound="topicView_ItemDataBound"> 
```

在文件后面的服务器端代码添加

```
 void topicView_ItemDataBound(object sender, RepeaterItemEventArgs e) 
    {
         if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
         {
           // Show or hid div here
           System.Web.UI.HtmlControls.HtmlContainerControl postEditAdmin = (System.Web.UI.HtmlControls.HtmlContainerControl)e.Item.FindControl("postEditAdmin");

           System.Web.UI.HtmlControls.HtmlContainerControl postEdit= (System.Web.UI.HtmlControls.HtmlContainerControl)e.Item.FindControl("postEdit");

          if (Session["role"].ToString() == "2")
          {
              postEditAdmin.Visible = true;
              postEdit.Visible = false;
          }    
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:42:58.363

将 postEditAdmin 和 postEdit 部件包装在 PlaceHolder 控件中并设置其可见性：

```
<div class="post-edit">
    <asp:PlaceHolder id="postEditAdmin" runat="server" Visible="false">
         <p>...</p>
    </asp:PlaceHolder> 
```

您还可以使用数据绑定来控制可见性以避免代码隐藏：

```
<asp:PlaceHolder Visible="<%# Eval('PostEditAdminVisible') %>"> 
```

# apache - 在远程软件供应系统的目标端使用 OSGi 有什么优势？

> ID：10713583
> 
> 赞同：2
> 
> 时间：2012-05-23T04:47:25.370
> 
> 标签：apache, osgi, target, provisioning

我正在开发一个远程软件供应系统，它应该能够处理软件组件的所有部署、安装、卸载和升级。软件可以是任何语言（java、.net、c/c++ 等），目标端可以是 PC、嵌入式系统和智能手机。

我发现 Apache ACE 是开发该系统的理想选择。

我想知道在目标端使用 OSGi 是否有任何优势/必要性，因为 Apache ACE 也可以对非 OSGi 目标进行软件配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:59:52.383

在客户端拥有像 OSGi 这样的模块化框架在进行远程管理时是一个巨大的优势，因为它可以让您深入了解内部发生的事情 - 已安装的捆绑包、依赖项、捆绑包的状态、可用服务等。这对您有很大帮助必须远程解决问题。另一个优点是 OSGi 基本上迫使程序员开发适当的模块化和动态系统，这使得（远程）更新更加容易。

因此，如果您现在必须决定客户端使用哪种语言和框架，我强烈建议将 OSGi 用于嵌入式和移动客户端。对于个人电脑（我猜你的意思是台式电脑？）这可能不是最好的选择——这在很大程度上取决于你想在那里实现什么。如果你想远程安装 MS Office，OSGi 不会让你前进；）

但是，如果您在客户端已经有现有程序并且正在讨论是否将它们转换为 OSGi，我建议您先调查一下是否可以轻松转换它们。一些软件包可能会给你转换到 OSGi 带来很多麻烦，不是因为 OSGi 很复杂，而是因为程序本身不是模块化的，并且对环境的静态特性有很多假设（例如，什么都不会消失，部分系统永远不会更新等）。具有讽刺意味的是，无论您选择哪种远程配置系统，这些程序都将在以后给您带来最大的麻烦。

如果您在某些目标上安装了 OSGi，请务必使用远程供应系统，它可以让您访问完整的 OSGi 功能，而不仅仅是最基本和最简单的安装和更新功能。我还没有使用过 Apache ACE，但我对另一个供应系统 - [mPower Remote Manager](http://www.prosyst.com/index.php/de/html/content/98/Other-FOU-|-Products-|-Remote-Management-Server/)有经验。以下是文档中的一些[快照](http://dz.prosyst.com/pdoc/mPRM/um/system/user/mconsole_user.html)，可以让您了解以 OSGi 作为基础的可能性 - 您可以得出自己的结论，它是否对您的案例有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:25:15.443

我在你问的另一个问题中给出了一些例子：

[Apache ACE 可以使用的非 osgi 目标有哪些](https://stackoverflow.com/questions/10682198/what-are-the-non-osgi-targets-with-which-apache-ace-can-work/)

您可以编写自己的管理代理来与 ACE 服务器对话并安装工件。实际上有几个地方你可以挂上你自己的代码和协议。您是否正在考虑使用具体的语言/环境，或者您现在只是在探索可能性？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:30:50.027

好吧，OSGi 的优点没有改变，所以我可以参考[标准页面](http://www.osgi.org/About/WhyOSGi)。

为了更具建设性，我将把问题解读为“我是否应该费心将我的应用程序转换为 OSGi，因为 ACE 不需要它？”

我认为这取决于您所追求的更新机制的“种类”。如果您有一个单片应用程序（至少从供应的角度来看），您只作为一个整体进行部署和更新（就像一个 iOS 应用程序），那么使用 OSGi*就供应目的而言没有什么好处。*

对于其余部分，我可以像告诉其他任何人一样告诉您：将应用程序转换为 OSGi 并不难，但模块化代码可能是一场噩梦，但您在某些时候需要面对，无论是否是 OSGi。如果您的代码已经模块化，那么使用 OSGi 应该是小菜一碟。

# android - Android - 显示 PDF 文件的最佳方式

> ID：10713584
> 
> 赞同：0
> 
> 时间：2012-05-23T04:47:38.543
> 
> 标签：android, pdf, view

我有一个 600 页的 PDF，我从以前安装的 PDF 应用程序中调用了一个意图来查看。该应用程序运行良好，但我收到投诉说它只是一个 PDF。我想知道是否有一种最佳方式来显示这样的文件（两列带有图像），以便用户以最佳（移动？）格式查看它？希望一个自动化的工具，转换成文字并手动更改它是一项艰巨的任务。

正如我上面所说，该应用程序已经能够查看 PDF 文件。我想知道最好的移动友好格式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:02:48.567

使用下面的代码 -

```
Uri path = Uri.fromFile(pdfFile); 
Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
pdfIntent.setDataAndType(path, "application/pdf");
pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
try
{
    startActivity(pdfIntent);
}
catch(ActivityNotFoundException e)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:11:18.650

如果您想打开 PDF，我们应该安装 PDF 查看器，或者您可以更喜欢 NDK 从 PDF 文件中读取数据。

```
Uri path = Uri.fromFile(path); 
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

注意：一般我们无法在模拟器中查看 PDF 文件。

# php - 打开重定向保护

> ID：10713587
> 
> 赞同：1
> 
> 时间：2012-05-23T04:47:43.390
> 
> 标签：php, apache, security

[谷歌的网站管理员博客](http://googlewebmastercentral.blogspot.com/2009/01/open-redirect-urls-is-your-site-being.html)写了一些关于如何防止滥用开放重定向保护的解决方案，我对那里的一些解决方案感到困惑很长一段时间，我尝试谷歌搜索但没有发现任何结果。

1.  更改重定向代码以检查引荐来源网址
2.  考虑使用白名单
3.  考虑签署您的重定向
4.  特别禁止异地重定向

我对解决方案的猜测：

1.  用于`%{HTTP­_RE­FERER}`检查 url 请求
2.  在 url 请求中使用一些正则表达式来检查 url 请求中的站点是否在正则表达式的范围内
3.  想不出任何
4.  想不出任何

请让我知道我的猜测是否正确，如果不正确，请告诉我如何在 PHP 或 Apache 中正确执行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:06:33.313

1.  正确，但这不是一种可靠的方法。可以操纵 HTTP Referrer。
2.  定义允许重定向到的 URL 列表，与此列表进行比较并取消重定向到任何其他 URL。
3.  添加重定向的加盐哈希作为重定向参数。在重定向之前，请使用请求参数检查该哈希。如果计算的哈希值与请求参数中的哈希值相同，则可能没有进行请求操作 -> 可以执行重定向。这可以防止执行任何重定向，除非有人猜到您的哈希生成算法（这就是为什么您必须使用密钥对其进行加盐）。
4.  取消所有将导致任何不包含您的网站作为主机的 URL 的重定向。正如您在 2 中所猜测的那样，这可以使用正则表达式来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:55:00.827

当您的应用程序根据用户提供的内容（即通过 POST 或 GET）进行盲重定向时，打开重定向成为可能。开放重定向最常被网络钓鱼攻击利用。

为了防止打开重定向，如果 URL 来自用户输入，您应该验证并验证您重定向到的任何 URL。应根据白名单进行验证。

# android - 获取有关 Google Play 商店中可用的新应用版本的通知

> ID：10713589
> 
> 赞同：0
> 
> 时间：2012-05-23T04:47:52.600
> 
> 标签：android, notifications, version, google-play

我正在制作我的应用程序的新版本，并且我已将其上传到 android 市场，现在我希望我的用户收到新版本应用程序可用的通知。我不知道该怎么做。任何有关此的帮助将不胜感激。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:49:19.160

使用推送通知来通知使用 C2DM 的用户.. [https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:54:07.887

截至目前，我相信没有机制可以自动为您处理（android 市场通知应用程序）。由于您自己将应用程序发布到市场，您可以做的是让另一台服务器（您自己的）通知或更新可用的更新。然后，该服务器可以将通知推送到您的应用程序。您可以使用 Android 的 c2dm 推送，或使用您选择的网关实现您自己的推送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:02:11.840

有 2 种选择 -

1.  推送 - 您可以向您的应用程序的所有用户发送推送通知，告知您有可用的升级。（但它需要在编码和服务器方面的工作和资源）。你可以在这里找到一个很好的推送教程 [http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

2\. Pull - 在您的 Android 应用程序中执行异步任务，这样，无论何时打开应用程序，它都会异步检查是否有任何升级（通过在 URL 中包含版本代码），如果版本代码是，则向用户显示一个对话框大于设备中的内容。这是一种更简单的方法。

# objective-c - IkImageBrowserView 错误

> ID：10713590
> 
> 赞同：1
> 
> 时间：2012-05-23T04:47:56.633
> 
> 标签：objective-c, macos, cocoa, xcode4, ikimagebrowserview

我有一个 IkImageBrowserView 实例，用于在我的应用程序中显示文件中的图片。一切正常，但用另一个视图替换它。

```
 2012-05-23 12:37:29.690 test[3595:903] --ImageKit Error: IKCacheDatabase::entryAtIndex - bad index
    2012-05-23 12:37:29.691 test[3595:903] --ImageKit Error: entry #-1 doesn't exist
    2012-05-23 12:37:29.691 test[3595:903] --ImageKit Error: IKCacheDatabase::entryAtIndex - bad index
    2012-05-23 12:37:29.692 test[3595:903] --ImageKit Error: entry #-1 doesn't exist
    2012-05-23 12:37:29.693 test[3595:903] --ImageKit Error: IKCacheDatabase::entryAtIndex - bad index
    2012-05-23 12:37:29.693 test[3595:903] --ImageKit Error: IKCacheDatabase::entryAtIndex - bad index
    2012-05-23 12:37:29.693 test[3595:903] --ImageKit Error: IKCacheDatabase::entryAtIndex - bad index
    2012-05-23 12:37:29.694 test[3595:903] --ImageKit Error: entry #-1 doesn't exist
    2012-05-23 12:37:29.695 test[3595:903] --ImageKit Error: IKCacheDatabase::entryAtIndex - bad index
    2012-05-23 12:37:29.695 test[3595:903] --ImageKit Error: entry #-1 doesn't exist
    2012-05-23 12:37:29.696 test[3595:903] --ImageKit Error: ram manager::bind can't find cache node with uid: -1 size: 44 
```

我做了一些实验，发现这个消息不会导致应用程序崩溃。而不是每次我用其他视图替换浏览器视图时都会发生。有时我关闭视图，消息也会出现。下面的代码是 browserView 项。根据错误消息，它可能是由图像缓存引起的..但我找不到问题所在

```
 @interface ASFileBrowserViewItem : NSObject
    @property(retain) NSImage* itemImage;
    @property(retain) NSString* imagePath;
    - (id)initWithPath:(NSString*)path;
    @end

    #import "ASFileBrowserViewItem.h"
    #import <Quartz/Quartz.h>
    @implementation ASFileBrowserViewItem
    @synthesize itemImage = _itemImage;
    @synthesize imagePath = _imagePath;
    - (id)initWithPath:(NSString*)path
    {
        self = [super init];
        if (self) {
            self.imagePath = path;
            _itemImage = [[NSImage alloc] initWithContentsOfFile:path];
        }
        return self;
    } 

    - (void)dealloc
    {
        [_imagePath release];
        [_itemImage release];
        [super dealloc];
    }
    #pragma mark require from IKImageBrowserView Protocol
    - (NSString *) imageUID
    {
        return _imagePath;
    }
    - (NSString *) imageRepresentationType
    {
        return IKImageBrowserNSImageRepresentationType;
    }
    - (id) imageRepresentation
    {
        return _itemImage;
    }
    - (NSString *) imageTitle
    {
        return [_imagePath lastPathComponent];
    }
    @end 
```

# c# - 从 Excel 2007 - 2010 文档中提取图像

> ID：10713594
> 
> 赞同：0
> 
> 时间：2012-05-23T04:48:27.130
> 
> 标签：c#, .net, excel, com, interop

我正在编写一个使用 COM 互操作从 Excel 电子表格中提取图像的应用程序。

如果我将文件保存为 Excel 2010 中的 XLS（2003 格式），它工作得非常好，但是如果我将其保存为 XLSX（2007 到 2010 格式），它会产生此异常“服务器抛出异常。（来自 HRESULT 的异常：0x80010105 (RPC_E_SERVERFAULT))"

我的代码如下。pic.Copy(); 行抛出异常。与 XLS 完美搭配。

```
 public static BitmapSource[] ImportImages(string FileName)
    {
        //Create the Excel Object
        ExcelObj = new Microsoft.Office.Interop.Excel.Application();

        //Create the Workbooks wrapper
        Workbooks workbooks = ExcelObj.Workbooks;

        //Open the Excel workbook
        Workbook workbook = workbooks.Open(FileName);

        //Reference the worksheets in the Excel file
        Sheets sheets = workbook.Worksheets;

        List<BitmapSource> images = new List<BitmapSource>();

        List<Picture> pics = new List<Picture>();

        //Reference the first sheet in the workbook
        Worksheet sheet = sheets[1];

        for (int i = 1; i < 30; i++)
        {
           pics.Add(sheet.Pictures(i));
        }

        foreach (Picture pic in pics)
        {
            pic.Copy();

            if (Clipboard.ContainsImage())
            {
                images.Add(Clipboard.GetImage());
            }

            Marshal.ReleaseComObject(pic);
        }

        Marshal.ReleaseComObject(sheet);
        Marshal.ReleaseComObject(workbooks);
        Marshal.ReleaseComObject(workbook);
        Marshal.ReleaseComObject(sheets);
        ExcelObj.Quit();
        Marshal.ReleaseComObject(ExcelObj);

        return images.ToArray();
    } 
```

任何想法为什么会发生这种情况？我的项目需要能够支持 2003 年和 2007/2010 年。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:01:33.433

虽然您的目标是 Excel 2003 和 2007/更高版本，但我建议使用 OpenXml SDK 为 Excel 2007 及更高版本提取图片。首先，这是 SDK 比互操作更好的地方。我还没有为 Excel 做这件事，但为 PowerPoint 编写了代码来做同样的事情。它的速度非常快，因为您甚至不启动 Excel，而是直接使用 XML Excel 文件。其次，您似乎是在服务器上执行此操作，强烈建议避免使用 Interop。

# java - 将 Java 转换为 Symbian C/C++ - 字节和对象数组

> ID：10713595
> 
> 赞同：1
> 
> 时间：2012-05-23T04:48:31.377
> 
> 标签：java, c++, symbian, porting

Java代码：

```
public static final byte cw_bArray = 0x01;
public static final byte cw_string = 0x02;

byte[] arr1=new byte[]{0x01};
byte[] arr2=new byte[]{0x02};
byte[] arr3=new byte[]{0x03};
byte[] code_ward_arr=new byte[]{cw_bArray,cw_string,cw_bArray};

method:
mount(null,new Object[]{arr1,arr2,arr3}, code_ward_arr); 
```

我正在尝试将此代码转换为 symbian c/c++。我已经完成了这个，但我不知道如何通过任何人帮助我解决这个问题。

```
static const signed char cw_bArray = 0x01;
static const signed char cw_string = 0x02;

signed char a1 = {0x01};
signed char a2 = {0x02}; 
signed char a3 = {0x03}; 

signed char code_ward_arr[]  = {cw_bArray,cw_bArray,cw_bArray};
//signed char bbb[]  = {a1,a2,a3};  
   char *bb=new char[2];
    bb[0] = a1;
    bb[1] = a2;
    bb[2] = a3;

mount(NULL, bb[] , code_ward_arr); 
```

方法：

```
LOCAL_C void mount(signed char initData, char* obj[], signed char codeWord)
    {

    } 
```

* * *

我正在尝试将这部分代码转换为 c java 代码：

```
Object obj[] = null;
if(codeWord==null){
            obj = new Object[10];//Initial Loading Capacity
        }else{
            obj = new Object[codeWord.length];
        } 
```

C代码：

```
char* obj[] = {NULL};

 if(codeWord==NULL)
 {
 obj = new char[10];
 } 
 else 
 {
 obj = new char[Cwlen];
 } 
```

我会得到这个错误非法操作数'char * [1]'='char *'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:32:20.800

声明错误`a1`的行：`a3`

```
signed char a1 = {0x01}; 
```

此行声明一个字符（字节），然后为其分配一个数组。将变量声明为数组或指针：

```
// As array (my recommendation)
signed char a1[] = { 0x01 };

// As pointer
signed char *a1 = { 0x01 }; 
```

您还必须更改以下声明`bb`：

```
char *bb[] = { a1, a2, a3 }; 
```

我 C++ 数组衰减为指针，因此可以将指针分配给数组，但不能反过来。

然后你打电话`mount`不带括号：

```
mount(NULL, bb, code_ward_arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:53:00.593

这应该工作

```
char a1[]={0x01};
char a2[]={0x01};
char a3[]={0x01};

char *  bb [3];
bb[0] = a1;
bb[1] = a2;
bb[2] = a3;

mount(NULL, bb , code_ward_arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:20:50.060

你最大的问题是`mount`不知道它正在传递的数组的大小。这对 Java 来说不是问题，因为它的数组包含 C/C++ 数组没有的额外元数据（长度在这里是有用的）。

有一点例外。C/C++ 数组（不是指针）的大小在编译时可用，但仅在它们声明的范围内。一个数组作为指针传递给另一个方法，数组的大小丢失了。

要解决此问题，您需要提供额外的长度数据。也许最简单但最庞大的解决方案是将数据放在一个向量中。这对您来说可能太重了，尤其是当您出于效率原因转换为 C/C++ 时。

例子：

```
vector<signed char> a1(1, 0x01); // create vector of size 1 with all elements 0x01
vector<signed char> a2(1, 0x02); 
vector<signed char> a3(1, 0x03); 

vector<signed char> code_ward_arr(3, cw_bArray);

vector<vector<signed char> > bb(3);
bb[0] = a1;
bb[1] = a2;
bb[2] = a3;

mount(NULL, bb , code_ward_arr); 
```

方法：

```
LOCAL_C void mount(signed char initData, vector<vector<signed char> >& obj,
        vector<signed char>& codeWord); 
```

轻量级的解决方案是要么创建一个包含指向数据的指针和该数据的长度的结构，要么简单地添加额外的参数来挂载以保存数组的长度。当你有数组时，这会变得复杂和混乱，所以让我们坚持使用 struct 解决方案

例如。

```
template<typename T>
typedef struct array {
    size_t length;
    T* data;
} array;

LOCAL_C void mount(signed char initData, array<array<signed char> >& obj,
        array<signed char>& codeWord);

array<signed char> a1;
signed char a1_data[] = {0x01};
a1.length = sizeof(a1_data) / sizeof(signed char);
a1.data = a1_data;

...

array<signed char> bb_data[] = {a1, a2, a3};
array<array<signed char> > bb;
bb.length = sizeof(bb_data) / sizeof(array<signed char>);
bb.data = bb_data;

mount(NULL, bb, code_ward_arr); 
```

您需要小心，因为数组结构内的指针仅在创建它们的方法期间有效（除非实际数组 ( `[]`) 是全局的或在堆上创建的）。

# c# - vb.net 中有关自动调度的 DateTime 问题

> ID：10713597
> 
> 赞同：0
> 
> 时间：2012-05-23T04:48:43.363
> 
> 标签：c#, .net, vb.net, datetime

我有一个程序可以检查我的工作对象的日期和分钟部分。如果这些匹配，那么它会触发一个特定的工作。

```
 If jb.ScheduledStartTime.Value.ToString("MM/dd/yyyy mm") =
 Now().ToString("MM/dd/yyyy mm") Then
                        'Do some work here.
                    End If 
```

**问题：** 如果我在一天中以不同的时间间隔安排不同的工作，那么它们就可以正常工作。我的意思是它们被触发并且在上面的代码中当它匹配当前格式时它们进入循环。

但是，当日期在 12:00 更改时，它不起作用。即使我已将开始时间设置为早上 9:00 触发，但它恰好在 12:00 AM 进入循环，这使我的逻辑无效，让我感到困惑。

为什么会这样？我的日期和分钟检查逻辑在这里不正确吗？有没有更好的方法来做到这一点？

我在这里不检查确切的秒数，我只检查分钟部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:59:28.290

您是否正在检查当天的变化等？您的 schedulestarttime 是否在触发后正确更改。

顺便说一句，不要将时间作为字符串进行比较。这很痛苦，你会受伤。使用`TimeSpan`你可以然后得到多长时间的事情。

```
If datetime.now > jb.ScheduledStartTime then
   'Do Some work.
end if 
```

如果您需要较小的支票

```
dim myDateCheck as Datetime = datetime.now
myDateCheck = myDateCheck.AddSeconds(-myDateCheck.Second)
if myDateCheck > jb.ScheduledStartTime  then
    'Do Some work
end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:07:18.980

还要检查日期时间的**小时部分（HH）**，您的格式应该是**“MM/dd/yyyy HH:mm”**

试试这个

```
 If jb.ScheduledStartTime.Value.ToString("MM/dd/yyyy HH:mm") =
    Now().ToString("MM/dd/yyyy HH:mm") Then
                        'Do some work here.
 End If 
```

# sharepoint - Windows Sharepoint 服务 - stsadm - 如何启用命令行选项

> ID：10713600
> 
> 赞同：3
> 
> 时间：2012-05-23T04:48:52.580
> 
> 标签：sharepoint, sharepoint-2010

我想在 SharePoint 网站中安装一项功能。我正在尝试使用命令提示符来执行此操作。当我打开命令提示符并给出如下命令时：

```
stsadm -o installfeature 
```

它是说

```
'stsadm' is not recognized as an internal or external command,
operable program or batch file. 
```

如何使用命令提示符执行此操作。是否只需要使用powershell？我需要更改任何环境变量吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T04:52:22.793

`'stsadm.exe'`在我记得的路径中注册路径：

`C:\Program Files\Common Files\Microsoft Shared\web server extensions\12\BIN`

或输入以下命令：

`@set PATH=C:\Program Files\Common Files\Microsoft Shared\web server extensions\12\BIN;%PATH%`

希望有帮助。

# php - 使用 PHP、curl 或 file_get_contents 消耗两个后果 Rest web 服务？

> ID：10713604
> 
> 赞同：1
> 
> 时间：2012-05-23T04:49:00.297
> 
> 标签：php, rest, cookies, curl, file-get-contents

我需要先使用 webservice 登录，然后在浏览器中设置 cookie，然后调用另一个 webservice 并获取一些用户特定的数据。

当我在浏览器上粘贴rest webservice（首先记录，然后是另一个以获取用户特定数据）时，它工作正常。

但是，如果我使用 php（使用两次）调用这两个 Web 服务

```
file_get_contents("url to login");
$Userdata=file_get_contents("url to get user specific data"); 
```

似乎`$Userdata`没有数据，好像上一行`file_get_contents("url to login");` 还没有执行。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:51:40.197

您可以`get_file_contents`通过流上下文发送 cookie（请参阅[PHP - 使用 file_get_contents 发送 cookie](https://stackoverflow.com/q/3431160/262462)），但如果您想使用 cookie 登录，您必须以某种方式获取第一个请求设置的 cookie。使用 cURL 可能更容易。还有其他问题接受了用 cURL 来描述这个问题的答案：[file_get_contents receive cookies](https://stackoverflow.com/q/1797510/262462)

# java - 转换字符串时的 org.json.JSON.typeMismatch

> ID：10713611
> 
> 赞同：2
> 
> 时间：2012-05-23T04:50:06.333
> 
> 标签：java, android, json

我正在尝试在 Android 应用程序中转换以下 JSON：

```
[
    {
        "patient_id": "16",
        "patient_firstname": "Ion",
        "patient_name": "Vasilescu",
        "location": "Cardiologie, Salon 4, Pat 2"
    },
    {
        "patient_id": "22",
        "patient_firstname": "Claudiu",
        "patient_name": "Popovici",
        "location": "Pneumologie, Salon 5, Pat 5"
    },
    {
        "patient_id": "15",
        "patient_firstname": "Monica",
        "patient_name": "Suciu",
        "location": "Cardiologie, Salon 4, Pat 2"
    }
] 
```

我已经阅读了类似的问题和答案，但就我而言，我没有看到任何语法问题。我已经用[JSONLint](http://jsonlint.com/)检查了 JSON，并且验证成功。

我的java代码如下：

```
public JSONObject toJson(String jString){
    System.out.println("I've got"+jString+"*");

    try {
        return new JSONObject(jString);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("Error while converting to JSONObject");
    }

    return null;
} 
```

有人对如何摆脱我的错误有建议吗？或者如何实施更好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:58:56.273

将 JSONObject 替换为 JSONArray，因为它是一个数组！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T05:07:35.943

你得到的结果是一个 JSon 数组而不是 JSon 字符串，所以试着改变 slass

你的代码：

```
public JSONObject toJson(String jString){
    System.out.println("I've got"+jString+"*");

    try {
        return new JSONObject(jString);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("Error while converting to JSONObject");
    }

    return null;
} 
```

修改后：

```
public JSONObject toJson(String jString){
    System.out.println("I've got"+jString+"*");

    try {
        return new JSONArray(jString);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("Error while converting to JSONObject");
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T05:08:52.077

[在这里看到](http://jsonviewer.stack.hu/)你的 json 只包含`JsonArray`List 所以只需将你转换`String`为`JSONArray` 而不是`JSONObject`：

```
public JSONArray toJson(String jString){
    System.out.println("I've got"+jString+"*");

    try {
        return new JSONArray(jString);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("Error while converting to JSONArray");
    }

    return null;
} 
```

# php - 将 for 循环中的两个字段相乘

> ID：10713613
> 
> 赞同：0
> 
> 时间：2012-05-23T04:50:30.907
> 
> 标签：php

我想将两个字段相乘。下面我从 for 循环中获取所需的值。数据库中总共有 54 个字段，从 0 到 53。我需要将 9 和 11 相乘，并且需要将它们保存在一个变量中：

```
<tbody>
<?php
    for($i=0;$i<$count_rd;$i++) {
?>

<tr  class="odd_gradeX">

<?php
    for($j=0;$j<=53;$j++){  // 0 3 4 7 9 17 18 19 20 21 22
    if(($j != 1) && ($j != 2) && ($j != 10) &&  ($j != 5) && ($j != 6) && ($j != 8) && ($j != 11) && ($j != 12)
    && ($j != 13) &&  ($j != 14) && ($j != 15) && ($j != 16)
    && ($j != 23) &&  ($j != 24) && ($j != 25) && ($j != 26) && ($j != 27) && ($j != 28) && ($j != 29)
    && ($j != 30) &&  ($j != 36) && ($j != 37) && ($j != 38) && ($j != 39)
    && ($j != 31) && ($j != 32)  && ($j != 33) && ($j != 34) && ($j != 35)&& ($j != 40) && ($j != 41) && ($j != 42)
    && ($j != 43) && ($j != 44) && ($j != 45) && ($j != 46) && ($j != 47) && ($j != 48) && ($j != 49)
    && ($j != 50) && ($j != 51) && ($j != 52) && ($j != 53)){
?>

<?php
    if(($j == 9)||($j == 17)||($j == 18) ||($j == 19) ||($j == 20) ||($j == 21) ||($j == 22)){
?>

<td align="right">

<?php
    }
    elseif(($j == 3)){
?>

<td align="left">

<?php
    }
    else {
?>

<td align="center">

<?php
    }
?>

<?php
    if($result[$i][$j]!='') {
?>

<?php
    echo $result[$i][$j];
?>

<?php
    echo "&nbsp;";
        }
    }
?>

</td>

<?php
    }
?>

</tr>

<?php
    }  ?>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:23:44.950

我不确定你想用代码做什么，但你可以帮助自己使用数组来组织代码。

例子：

```
<?php
$rightNumbers = array(0, 3, 4, 7, 9, 17, 18, 19, 20, 21, 22);
$leftNumber = array(9, 17, 18, 19, 20, 21, 22);
echo '<tbody>';
for($i=0;$i<$count_rd;$i++)
{    
  echo '<tr class="odd_gradeX">';
  for($j=0;$j<=53;$j++)
  {
    if(in_array($j, $rightNumbers))
    {
      echo '<td align="right">';
    }
    else if(in_array($j, $leftNumber))
    {
      echo '<td align="left">';
    }
    else if($j === 3)
    {
      echo '<td align="center">';
    }

    // Result should be printed?
    if($result[$i][$j]!='') 
    {
      echo $result[$i][$j] . "&nbsp;";
    }
    echo '</td>';
  }
  echo '</tr>';
}
?> 
```

你说你想保存一个变量，不确定是哪个，但希望这可以帮助你更接近

# java - Eclipse 错误-为“project-desc”创建备份时

> ID：10713621
> 
> 赞同：0
> 
> 时间：2012-05-23T04:51:37.350
> 
> 标签：java, eclipse, windows-7, eclipse-indigo, java-6

当我尝试在 Windows 7 上的 eclipse indigo 中创建新的 Java 项目时，使用 JDK 1.6 时出现以下错误：

```
An error occurred while creating project. Check log for details.

Reason:
Problem while creating backup for 'project-desc'

The system cannot find the path specified. 
```

有没有人见过或解决过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:10:14.230

查看日志文件告诉我同样的事情 - eclipse 认为有效的目录路径无效。

事实证明我的 Eclipse 安装已损坏 - 删除它并用新的替换它一切正常。

# c# - 设置 WCF 传输和消息安全

> ID：10713628
> 
> 赞同：0
> 
> 时间：2012-05-23T04:52:07.737
> 
> 标签：c#, asp.net, wcf, wcf-binding

我正在尝试使用 WCF 服务设置传输和消息安全性。

我已经安装了本地 SSL 证书。但我收到此错误：

```
Error: Cannot obtain Metadata from http://localhost:57458/Service1.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: http://localhost:57458/Service1.svc    Metadata contains a reference that cannot be resolved: 'http://localhost:57458/Service1.svc'.    The server did not provide a meaningful reply; this might be caused by a contract mismatch, a premature session shutdown or an internal server error.HTTP GET Error    URI: http://localhost:57458/Service1.svc    There was an error downloading 'http://localhost:57458/Service1.svc'.    The request failed with the error message:--<html>    <head>        <title>Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http].</title>        <style>         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;}          p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }         pre {font-family:"Lucida Console";font-size: .9em}         .marker {font-weight: bold; color: black;text-decoration: none;}         .version {color: gray;}         .error {margin-bottom: 10px;}         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }        </style>    </head>    <body bgcolor="white">            <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>            <h2> <i>Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http].</i> </h2></span>            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">            <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.            <br><br>            <b> Exception Details: </b>System.InvalidOperationException: Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http].<br><br>            <b>Source Error:</b> <br><br>            <table width=100% bgcolor="#ffffcc">               <tr>                  <td>                      <code>An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</code>                  </td>               </tr>            </table>            <br>            <b>Stack Trace:</b> <br><br>            <table width=100% bgcolor="#ffffcc">               <tr>                  <td>                      <code><pre>[InvalidOperationException: Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http].]   System.ServiceModel.ServiceHostBase.MakeAbsoluteUri(Uri relativeOrAbsoluteUri, Binding binding, UriSchemeKeyedCollection baseAddresses) +12298460   System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress) +12295813   System.ServiceModel.ServiceHostBase.LoadConfigurationSectionInternal(ConfigLoader configLoader, ServiceDescription description, ServiceElement serviceSection) +67   System.ServiceModel.ServiceHostBase.ApplyConfiguration() +108   System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses) +192   System.ServiceModel.ServiceHost.InitializeDescription(Type serviceType, UriSchemeKeyedCollection baseAddresses) +49   System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses) +151   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses) +30   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +422   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1440   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +44   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +615[ServiceActivationException: The service '/Service1.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http]..]   System.Runtime.AsyncResult.End(IAsyncResult result) +687598   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +190   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, String routeServiceVirtualPath, Boolean flowContext, Boolean ensureWFService) +234   System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +355   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75</pre></code>                  </td>               </tr>            </table>            <br>            <hr width=100% size=1 color=silver>            <b>Version Information:</b>ÿMicrosoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.1            </font>    </body></html><!-- [InvalidOperationException]: Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http].   at System.ServiceModel.ServiceHostBase.MakeAbsoluteUri(Uri relativeOrAbsoluteUri, Binding binding, UriSchemeKeyedCollection baseAddresses)   at System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress)   at System.ServiceModel.ServiceHostBase.LoadConfigurationSectionInternal(ConfigLoader configLoader, ServiceDescription description, ServiceElement serviceSection)   at System.ServiceModel.ServiceHostBase.ApplyConfiguration()   at System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses)   at System.ServiceModel.ServiceHost.InitializeDescription(Type serviceType, UriSchemeKeyedCollection baseAddresses)   at System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath)   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(String normalizedVirtualPath)   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath)[ServiceActivationException]: The service '/Service1.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http]..   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result)   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, String routeServiceVirtualPath, Boolean flowContext, Boolean ensureWFService)   at System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e)   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)-->--. 
```

错误的重要部分可能是：

```
Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http]. 
```

这是我的 web.config 文件：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="Binding1">
          <security mode="TransportWithMessageCredential">
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </wsHttpBinding>

    </bindings>
    <services>
      <service behaviorConfiguration="ServiceBehavior" name="AutoSenderWCFService.AutoSenderService">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1"
          contract="AutoSenderWCFService.IService1"></endpoint>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />

      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceCredentials>

            <userNameAuthentication userNamePasswordValidationMode="Custom"
              customUserNamePasswordValidatorType="AutoSenderWCFService.MyValidator, AutoSenderWCFService"/>
            <serviceCertificate findValue="Michael-PC.pth.local" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
          </serviceCredentials>

          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true" httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

我想创建它，以便可以在本地计算机上对其进行调试，然后将其上传到我的服务器并使用自我认证的证书运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:53:15.860

同样的问题。 [带有 WCF 错误的 https：“找不到与方案 https 匹配的基地址”](https://stackoverflow.com/questions/363285/https-with-wcf-error-could-not-find-base-address-that-matches-scheme-https)

另外，尝试 httpGetEnabled="False" 和 httpsGetEnabled="False"

# postgresql - 是否可以在 Alfresco 数据库中创建新表？

> ID：10713632
> 
> 赞同：1
> 
> 时间：2012-05-23T04:52:54.663
> 
> 标签：postgresql, alfresco

我已经开始使用 Alfresco CMS。在我的项目中，要在现有的 Alfresco 数据库中创建一个新表。

我想知道我是否可以在 Alfresco 数据库中创建新表？如果它*可以*创造，我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:19:33.897

[Alfresco -> 如何创建自定义表格并访问它](https://forums.alfresco.com/en/viewtopic.php?t=6522)
希望这可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:04:52.303

已经存在一个用于 Alfresco Share 的组件，它以简单灵活的方式允许使用“零代码”实现此功能。在 Alfresco 插件[http://addons.alfresco.com/addons/alfresco-metadbconnector-component](http://addons.alfresco.com/addons/alfresco-metadbconnector-component)中可用。由 VenziaIT ( **http://venzia.es** ) 开发和维护。我们希望这对社区有所帮助。

问候！

# java - 为什么使用'|' 在java中

> ID：10713633
> 
> 赞同：-7
> 
> 时间：2012-05-23T04:52:57.403
> 
> 标签：java

> **可能重复：**
> [Java 运算符：`|= bitwise OR and assign`示例](https://stackoverflow.com/questions/10142059/java-operators-bitwise-or-and-assign-example)

```
boolean bAlive;

bAlive |= this.properties.containsKey(name); 
```

在上面，代码使用`'|'`. 为什么使用`'|`' ？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:56:17.590

布尔值与右侧的值进行或运算。

如果`this.properties.containsKey(name)`是`TRUE`，则`bAlive`设置为`TRUE`。

否则，`bAlive`保持不变。

# ruby-on-rails - 如果签入 Rails 表单标签

> ID：10713644
> 
> 赞同：3
> 
> 时间：2012-05-23T04:54:03.680
> 
> 标签：ruby-on-rails, ruby, erb

```
<%= form.text_field :email, :value => @customer.email_primary  %> 
```

我需要在值之前进行 if 检查，因此除非客户登录，否则它不会通过。我知道 if 是 if `logged_in?`，但我的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:58:21.110

```
<% if @customer.logged_in? %>
<%= form.text_field :email, :value => @customer.email_primary  %>
<% end %> 
```

# java - Java并发执行相同的功能

> ID：10713647
> 
> 赞同：0
> 
> 时间：2012-05-23T04:54:25.257
> 
> 标签：java

是否可以从线程同时执行相同的功能。我怀疑在 java 方法区域是相同的，所以对同一函数的多次调用可能会导致等待状态，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:57:48.067

是的。默认情况下，您可以并发执行方法。要停止并发执行，您需要使用同步关键字或并发类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:57:45.533

是的，除非您使用了同步，否则可能不会有任何等待锁定。这是默认行为，没有锁定和线程执行可以交错。

但请记住，您的线程调度程序将允许一个线程在给定时间运行。

默认情况下，在没有同步的情况下没有等待的并发访问是行为。

演示样品

```
public class MyThread implements Runnable {

    private MyThreadInvocation  threadInvocation    = null;

    public MyThread(MyThreadInvocation threadInvocation) {
        this.threadInvocation = threadInvocation;
    }

    @Override
    public void run() {
        System.out.println("Calling from : " + Thread.currentThread().getName());
        this.threadInvocation.printMessage();
    }
}

public class MyThreadInvocation {
    public void printMessage(){
        System.out.println("Hello");
    }

    public static void main(String[] args) {
        MyThreadInvocation myThreadInvocation = new MyThreadInvocation();
        Thread t1 = new Thread(new MyThread(myThreadInvocation));
        t1.setName("First Thread");

        Thread t2 = new Thread(new MyThread(myThreadInvocation));
        t2.setName("Second Thread");

        Thread t3 = new Thread(new MyThread(myThreadInvocation));
        t3.setName("Third Thread");

        t1.start();
        t2.start();
        t3.start();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T05:04:31.277

是的，完全有可能从多个线程同时调用相同的函数。每个线程都有自己的堆栈，这意味着它获得了自己的函数中使用的局部变量的副本。

在多核机器上，线程甚至可以在同一个函数中同时运行。

当然，如果多个线程同时访问相同的可变状态（例如，对象中两个线程都可以读取和写入的字段），则它们会同时调用相同的函数会导致问题。如果您想防止这些问题，您将需要使用某种形式的锁定或同步。

# c# - “（ListView）发件人”与“作为ListView的发件人”

> ID：10713649
> 
> 赞同：1
> 
> 时间：2012-05-23T04:54:29.533
> 
> 标签：c#, casting, sender

> **可能的重复：**
> [C#“as”cast vs classic cast](https://stackoverflow.com/questions/4926677/c-sharp-as-cast-vs-classic-cast)

这两种表达方式有什么区别？

*   `(ListView)sender`
*   `sender as ListView`

一般来说，我通常使用*exp* `sender as ListView`。但在 SO 我发现大多数时候用户使用`(ListView)sender`.

所以，我想知道哪个更有效。

或者，

如果是编码器的选择，使用哪一个[并且两者的工作方式相同]？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T04:57:50.547

不同之处在于，如果 sender 不是 ListView，则 (ListView)sender 会抛出异常，但作为 ListView 的 sender 不会抛出异常，而是在强制转换无效时返回 null。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T04:58:03.200

不同之处在于，如果由于某种原因 sender 无法转换为 ListView，`(ListView)sender`则会引发异常，而`sender as ListView`会导致结果为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T05:01:40.993

```
var listview = (ListView)sender  // Throws an exception if sender is not listView 
```

和

```
var listview = sender as ListView  // listview will be assigned to null if sender is not
                                   // a listview 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T04:55:59.467

`as`运算符在失败时不会抛出异常，而是用 null 填充 Left-Hand-Side 变量。

`(ListView)sender`如果发件人不是 ListView，While会抛出异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T05:04:04.897

如果不能赋值或不能转换，using`(a)b`将抛出异常，即使是不可为空的类型（如）也可以使用。Using永远不会抛出异常（如果不能分配给它，它会返回），但不会转换（例如你可以做但不是）并且如果不可为空则不会工作（例如你可以做但不是）。`b``a``a``int``b as a``null``b``a``(int?)12.3``12.3 as int?``a``12 as int?``12 as int`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T05:26:03.623

`sender as ListView`是相同的：

```
sender is ListView ? (ListView)sender : null 
```

效率上几乎没有区别。`as`对无效转换是安全的，因为它会产生 null 结果而不是抛出异常，所以我总是使用`as`然后检查 null 条件。

# objective-c - 以编程方式更改屏幕锁定超时

> ID：10713651
> 
> 赞同：1
> 
> 时间：2012-05-23T04:54:33.360
> 
> 标签：objective-c, cocoa, system-preferences

在我的 Cocoa 应用程序中，我想访问和更改计算机的屏幕锁定超时设置。在系统偏好设置中更改它不需要用户输入管理员密码。

![系统偏好截图 - 屏幕锁定超时](../Images/f52d32c551e433447f3f72b2667fa70b.png)

不幸的是，我在文档中找不到任何信息，而且我不确定我应该研究什么主题（安全设置/prefPane 编程）。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:43:20.193

```
NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:@"/Users/new/Library/Preferences/com.apple.screensaver.plist"];
[plistDict setObject:@"1" forKey:@"askForPassword"];
[plistDict setObject:@"3600" forKey:@"askForPasswordDelay"];
[plistDict writeToFile:@"/Users/new/Library/Preferences/com.apple.screensaver.plist" atomically:YES]; 
```

或从终端

```
defaults write com.apple.screensaver askForPasswordDelay 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T23:01:17.240

上面的答案显然适用于某些人，但在 10.8 上，如果您使用 FileVault，它会失败。该设置将保持不变，但在您启动“系统偏好设置”之前它不会真正生效。幸运的是，完成后有一种方法可以“触摸”设置：

```
- (void)touchSecurityPreferences;
{
    NSAppleScript *kickSecurityPreferencesScript = [[[NSAppleScript alloc] initWithSource: @"tell application \"System Events\" to tell security preferences to set require password to wake to true"] autorelease];
    [kickSecurityPreferencesScript executeAndReturnError:nil];
} 
```

**编辑**原来这仅适用于从非零设置到零设置。我认为这是一个安全问题。反过来，启动系统偏好设置是唯一的方法。

**编辑 2**如果您想这样做，这里是启动系统偏好设置的代码：

```
- (void)launchAndQuitSecurityPreferences;
{
    // necessary for screen saver setting changes to take effect on file-vault-enabled systems when going from a askForPasswordDelay setting of zero to a non-zero setting
    NSAppleScript *kickSecurityPreferencesScript = [[[NSAppleScript alloc] initWithSource:
                                                     @"tell application \"System Preferences\"\n"
                                                     @"     tell anchor \"General\" of pane \"com.apple.preference.security\" to reveal\n"
                                                     @"     activate\n"
                                                     @"end tell\n"
                                                     @"delay 0\n"
                                                     @"tell application \"System Preferences\" to quit"] autorelease];
    [kickSecurityPreferencesScript executeAndReturnError:nil];
} 
```

# php - 无法阅读或发布到朋友墙（新闻源）

> ID：10713655
> 
> 赞同：0
> 
> 时间：2012-05-23T04:54:51.043
> 
> 标签：php, facebook, facebook-apps

我一直在尝试阅读朋友的新闻提要以检查我的消息是否存在（无论消息是可见、隐藏还是删除），如果消息存在，则不要发布新消息。如果它不存在，则发布消息。下面的代码有很多不必要的代码来追踪问题的来源。我为“publish_stream，read_stream”设置了权限。

我尝试了其他博客中的所有代码，但似乎没有工作我不知道是不是因为我使用的是 PHP SDK 3.0 - 最新版本。我的应用程序是 iframe 应用程序。甚至在 Facebook 应用程序上购买了一本昂贵的书（太贵了），但购买后发现它已经过时了！

如果我使用 /me 或我的用户 ID 但不是我朋友的 ID，则该代码运行良好。

```
require 'config.php';
require 'facebook.php';

//Create facebook application instance.
$facebook = new Facebook(array(
  'appId'  => $fb_app_id,
  'secret' => $fb_secret
));

$sent = false;
$userData = null;
$PPnotposted = true;
$me = null;
$test_friends =1;

$user = $facebook->getUser();

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl(array("next"=> "<? echo $fb_app_url ?>" ));
} else {
  $loginUrl = $facebook->getLoginUrl( array( 'scope'=> 'publish_stream, read_stream', 'redirect_uri' => $fb_app_url));
}

$get_someone_else = 100000xxxxxxxxx; // I used a real user id but covered it up here so
                                     my friend's id hidden for this stackexchange help

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    if ( $get_someone_else ){
    $user_profile = $facebook->api("/".$get_someone_else);
    echo "<br/> ********************user is ".$get_someone_else." ******************<br/>";
    var_dump( $user_profile );  
    echo "<br/> ********************** end of user info ******************<br/>";   
    } else {
    $user_profile = $facebook->api('/me');
    }
  } catch (FacebookApiException $e) {
  }
// print_r( $user_profile );  
$PPaccesstoken = $facebook->getAccessToken(); 
$attachment[access_token]= $PPaccesstoken ;

    //post message to wall if it is sent through form

    if(isset($_POST['PPmessage'])){
        try {
           if( $get_someone_else ){
          $ppmy_news = $facebook->api("/.$get_someone_else./feed?limit=300");     //Get 300 messages to examine
    echo "<br/> *********************** news feed is ".$ppmy_news." ******************<br/>";
    var_dump( $ppmy_news );  
    echo "<br/> ******************** end of user info ********************<br/>";             
           } else {
          $ppmy_news = $facebook->api('/me/feed?limit=300');  //Get 300 messages 
                                                   //to examine. Initially I set it to
                                                   // 10 messages for testing purposes.
          }

//        var_dump( $ppmy_news);        
//          $sent = $facebook->api("/".$user."/feed", 'POST', $attachment );

          $ppmy_view_lp=0;
          if( $test_friends ) {     //Debugging flag to activate or deactivate parts of code
          echo "sent is :<br />";
//        var_dump( $sent ); 
          echo "<br />";
          $friends = $facebook->api('/me/friends');
          echo "friends is :<br />";
//        var_dump( $friends ); 
          echo "<br />";
                  $friendsLists = $facebook->api('/me/friends');
                  $total_friends = 0;
                  foreach ($friendsLists as $friends) {
                    foreach ($friends as $friend) {
                      $id = $friend['id'];
                      $name = $friend['name'];
                  $total_friends++;  //Get total number of friends
                      echo "friend : ".$name." id is: ".$id." Total friends is : ".$total_friends." <br/> ";
                     }
                  } 
          }
        } catch (FacebookApiException $e) {
        echo "<br/> !!!!!!!!!!!! Error Dump Line 85 !!!!!!!!!!!!! <br/>";
        var_dump( $e );
        echo "<br/> !!!!!!!!!!!! End of Error Dump !!!!!!!!!!!!! <br/>";        
            //do something about it
        }
    }

} 
```

但我发现我被拒绝许可，并且捕获转储是：

！！！！！！！！！！！！错误转储行 85 !!!!!!!!!!!!!!! object(FacebookApiException)#2 (7) { ["result:protected"]=> array(1) { ["error"]=> array(3) { ["message"]=> string(72) "(# 803）您请求的某些别名不存在：.100000xxxxxxxxx。” ["type"]=> string(14) "OAuthException" ["code"]=> int(803) } } ["message:protected"]=> string(72) "(#803) 你的一些别名请求的不存在：.100000xxxxxxxxx。” ["string:private"]=> string(0) "" ["code:protected"]=> int(0) ["file:protected"]=> string(48) "/home/www/drpetersnews.com /vmt/base_facebook.php" ["line:protected"]=> int(1106) ["trace:private"]=> array(4) { [0]=> array(6) { ["file"]= > string(48) "/home/www/drpetersnews.com/vmt/base_facebook.php" ["line"]=> int(810) ["function"]=> string(17) "throwAPIException" ["class"] => string(12) "BaseFacebook" ["type"]=> string(2) "->" ["args"]=> array(1) { [0]=> array(1) { ["error" ]=> array(3) { ["message"]=> string(72) "(#803) 您请求的某些别名不存在：.100000xxxxxxxxx。" ["type"]=> string(14) "OAuthException" ["code"]=> int(803) } } } } [1]=> array(4) { ["function"]=> string(6) "_graph" ["class"]=> string(12) "BaseFacebook" ["type"]=> string(2) "->" ["args"]=> array(1) { [0]=> string (32) "/. 字符串（6）“_graph”}[1]=>数组（1）{[0]=>字符串（32）“/.100000xxxxxxxxx./feed?limit=10”}}}[3]=>数组（6 ) { ["file"]=> string(40) "/home/www/drpetersnews.com/vmt/index.php" ["line"]=> int(54) ["function"]=> string(3 ) "api" ["class"]=> string(12) "BaseFacebook" ["type"]=> string(2) "->" ["args"]=> array(1) { [0]=> string(32) "/.100000xxxxxxxxx./feed?limit=10" } } } } !!!!!!!!!!!!!!! 错误转储结束！！！！！！！！！！！！！字符串（6）“_graph”}[1]=>数组（1）{[0]=>字符串（32）“/.100000xxxxxxxxx./feed?limit=10”}}}[3]=>数组（6 ) { ["file"]=> string(40) "/home/www/drpetersnews.com/vmt/index.php" ["line"]=> int(54) ["function"]=> string(3 ) "api" ["class"]=> string(12) "BaseFacebook" ["type"]=> string(2) "->" ["args"]=> array(1) { [0]=> string(32) "/.100000xxxxxxxxx./feed?limit=10" } } } } !!!!!!!!!!!!!!! 错误转储结束！！！！！！！！！！！！！

请帮帮我，让我知道我是否错误地设置了权限以及如何正确设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:12:14.913

代码是正确的，但问题可能出在 Facebook 的隐私设置上。如果您看不到用户墙上的帖子，则表示用户设置了隐私设置，阻止您查看帖子。

使用 Graph API Explorer 工具 (https://developers.facebook.com/tools/explorer/) 并查看是否可以使用它查看用户的提要。检查多个朋友 ID 以查看其中是否有任何返回数据。

# iphone - 如果您有大量静态数据，如何遵循 MVC？

> ID：10713661
> 
> 赞同：2
> 
> 时间：2012-05-23T04:55:28.447
> 
> 标签：iphone, objective-c, ios, model-view-controller

我正在其中开发一个 iPhone 应用程序我有大约 15 个数组和 15 个数组，其中的值对应于数组中的值，例如 NSArray *XYZ = {a,b,c,d} 和数组 NSArray *ABC = { w,x,y,z} 这样值 'a' 对应于 'x' 。可以告诉我在这种情况下遵循 MVC 的最佳方法是什么，就像我必须为另一个数组中的每个数组创建函数（返回数组）类还是我应该为每个数组上课。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:10:07.563

我会将您的所有业务逻辑编写为具有**模型文件中的这些数组的类，从****CONTROLLER**文件中访问这些类。然后，一旦您拥有所有数据，就可以从**CONTROLLER**访问**VIEW**文件以进行输出。在**MODEL**内部为这些数组编写函数，以便您可以重用它们，如果它们不同，它们可能需要自己的函数。这是一个有用的链接：[http](http://php-html.net/tutorials/model-view-controller-in-php/) ://php-html.net/tutorials/model-view-controller-in-php/这些视频让您了解 MVC 背后的逻辑：[http ://www.youtube.com /watch?v=HFQk8WGK1-Q&feature=bf_prev&list=UU9-GXsmQQ-N4h8ZsKI8CSkw](http://www.youtube.com/watch?v=HFQk8WGK1-Q&feature=bf_prev&list=UU9-GXsmQQ-N4h8ZsKI8CSkw)

# c++ - 尝试在 OSX 上部署 .app 包

> ID：10713671
> 
> 赞同：2
> 
> 时间：2012-05-23T04:56:20.970
> 
> 标签：c++, qt, deployment

刚刚完成了以下教程：http: [//qt-project.org/doc/qt-4.8/deployment-mac.html#the-bundle](http://qt-project.org/doc/qt-4.8/deployment-mac.html#the-bundle)

当我在我的应用程序上运行 otool 时，它看起来像这样：

```
qjson.framework/Versions/0/qjson (compatibility version 0.7.0, current version 0.7.1)
libboost_date_time.dylib (compatibility version 0.0.0, current version 0.0.0)
libQt.Shared.1.dylib (compatibility version 1.0.0, current version 1.0.0)
libQt.Framework.1.dylib (compatibility version 1.0.0, current version 1.0.0)
@executable_path/../Frameworks/QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.1)
@executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.1)
@executable_path/../Frameworks/QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.1)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 625.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

在我这样做之前它运行良好并指向这个：

```
 /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.1)
/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.1)
/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.1) 
```

现在，当我打开我的应用程序时，它会立即崩溃。当我尝试在终端中打开它时，出现以下问题：

```
objc[44337]: Class QNSImageView is implemented in both 
/Users/me/MyApp/MyApp.app/Contents/MacOS/./../Frameworks/QtGui.framework/Versions/4/QtGui and /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Versions/4/QtGui. One of the two will be used. Which one is undefined. 
```

由“段错误”完成

我怎样才能使它不冲突？我尝试运行 Qts 部署脚本，但这也不起作用。我究竟做错了什么？

编辑：

我再次尝试使用他们的脚本，这次我做了以下内容：

```
macdeployqt MyApp.app -dmg -no-plugins 
```

这创建了一个 .dmg，其中包含运行的我的应用程序。现在的问题是什么都没有发生，当我在终端中运行它时，我收到了这个错误：

```
QEventLoop: Cannot be used without QApplication
QEventLoop: Cannot be used without QApplication 
```

我的事件循环发生了什么？自从我从 finder 完美运行它以及部署它并从 deplyod 版本运行它以来，我的应用程序没有任何改变。没有意义

更新：现在我尝试删除旧应用程序并使用 QtCreator 从头开始​​构建它。然后我做了以下事情：

```
bash-3.2$ /Users/me/Downloads/macdeployqt-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release/macdeployqt/macdeployqt MyApp.app
copied "/Library/Frameworks/qjson.framework/Versions/0/qjson" to "MyApp.app/Contents/Frameworks/qjson.framework/Versions/0/qjson" 
copied "/usr/lib/libboost_date_time.dylib" to "MyApp.app/Contents/Frameworks//libboost_date_time.dylib" 
copied "/usr/lib/libQt.Shared.1.dylib" to "MyApp.app/Contents/Frameworks//libQt.Shared.1.dylib" 
copied "/usr/lib/libQt.Framework.My.1.dylib" to "MyApp.app/Contents/Frameworks//libQt.Framework.My.1.dylib" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Versions/4/QtGui" to "MyApp.app/Contents/Frameworks/QtGui.framework/Versions/4/QtGui" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Resources/qt_menu.nib/classes.nib" to "MyApp.app/Contents/Frameworks/QtGui.framework/Resources/qt_menu.nib/classes.nib" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Resources/qt_menu.nib/info.nib" to "MyApp.app/Contents/Frameworks/QtGui.framework/Resources/qt_menu.nib/info.nib" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Resources/qt_menu.nib/keyedobjects.nib" to "MyApp.app/Contents/Frameworks/QtGui.framework/Resources/qt_menu.nib/keyedobjects.nib" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtCore.framework/Versions/4/QtCore" to "MyApp.app/Contents/Frameworks/QtCore.framework/Versions/4/QtCore" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtNetwork.framework/Versions/4/QtNetwork" to "MyApp.app/Contents/Frameworks/QtNetwork.framework/Versions/4/QtNetwork" 
copied "/Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtXml.framework/Versions/4/QtXml" to "MyApp.app/Contents/Frameworks/QtXml.framework/Versions/4/QtXml" 

Deploying plugins from "/usr/plugins"
Created configuration file: "MyApp.app/Contents/Resources/qt.conf" 
This file sets the plugin search path to "MyApp.app/Contents/plugins" 
```

当我启动它时，它仍然崩溃，和以前一样。我的两个库“libQt.Shared.1.dylib”和“libQt.Framework.1.dylib”没有被称为，但它们都有与这些名称的符号链接。会不会跟坠机有关系？还是它会破坏链接并将它们复制到其中？这两个库是我自己完成的库，它们都使用 QtCore 和 QtNetwork。不过，使用 otool 时，该应用程序似乎指向了正确的东西：

```
@executable_path/../Frameworks/qjson.framework/Versions/0/qjson (compatibility version 0.7.0, current version 0.7.1)
@executable_path/../Frameworks/libboost_date_time.dylib (compatibility version 0.0.0, current version 0.0.0)
@executable_path/../Frameworks/libQt.Shared.1.dylib (compatibility version 1.0.0, current version 1.0.0)
@executable_path/../Frameworks/libQt.Framework.My.1.dylib (compatibility version 1.0.0, current version 1.0.0)
@executable_path/../Frameworks/QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.1)
@executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.1)
@executable_path/../Frameworks/QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.1)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 625.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

请帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:25:59.303

我之前在打包 PyQt 应用程序时也看到过这一点。修复（通常由 macdeployqt 完成）是将`qt.conf`文件放置`Contents/Resources`在应用程序的目录中。它通常只包含插件目录的名称：

*内容/资源/qt.conf*

```
[Paths]
Plugins = plugins 
```

这将使它停止尝试查看您的系统中的 Qt 库。你不应该需要`-dmg`标志，因为那与这种情况无关。我建议简单地`macdeployqt MyApp.app`在一个干净的构建上运行，看看它是否为你创建了 qt.conf。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:18:54.773

我解决了错误“将使用两者之一。哪个未定义。” 通过以下方式：由于 Qt 框架安装到`/Library/Frameworks`，所以运行应用程序时，dyld 也会在那里查看。我重命名了所有与 Qt 相关的框架（包括那些不以“Qt”开头的框架，比如 phonon！），所以它们再也找不到了。然后我再次从 Xcode 运行我的应用程序，这让我发现实际上我没有包含所有依赖项。例如，声子本身需要 QtDBus 和 QtXml。由于我忘记将它们添加到我的项目中，dyld 将使用例如全局`/Library/Frameworks/QtXml.framework`，这又取决于 QtCore。但是 QtCore 也是从全局目录加载的，这可能导致各种错误。就我而言，应用程序无限期地挂在 QWebpage 构造函数中。其他人似乎经历过崩溃。`install_name_tool`解决方案当然是在您自己的应用程序中包含和修补所有必要的 Qt 组件（通过）。

**更新：**在我将全局名称重命名为原始名称后，我仍然遇到问题，因为这两个地方都被考虑在内。仍在努力解决这个问题。我将把上面的答案留在这里只是为了记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T22:10:25.190

我发现了这个问题，如果其他人应该有同样的问题，我会在这里发布我的答案。

我完全忘记了我在运行时加载的库，它不是使用本地框架构建的。当我删除插件时，它运行良好，现在一切都很好:)

# java - 在java中的查询字符串中传递arraylist？

> ID：10713673
> 
> 赞同：0
> 
> 时间：2012-05-23T04:56:51.567
> 
> 标签：java, php, query-string

我将图像编码为字符串并将其放入arraylist。我如何将该arraylist throw 查询字符串发送到服务器并在php 中获取该arraylist？

是否可以在查询字符串中发送数组列表？

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:54:24.623

使用 JSON 表示字符串数组。您可以将整个列表表示为 JSON 对象并在查询字符串中发送。

# c++ - 如何在 Microsoft Visual C++.2010 Express 中链接 Lua？

> ID：10713674
> 
> 赞同：1
> 
> 时间：2012-05-23T04:56:51.513
> 
> 标签：c++, visual-c++, dll, lua, visual-c++-2010

我正在尝试编写可以从 Lua 访问的 C++ 类/函数。

我需要将 C++ 库导出为 dll 文件。

我正在使用 Microsoft Visual C++.2010 Express

所以我创建了一个项目并添加了需要的 .cpp 文件和 .h 文件现在当我尝试构建时，会出现以下错误。

> mylib.obj：错误 LNK2019：函数“void __cdecl g_initializePlugin(struct lua_State *)”(?g_initializePlugin@@YAXPAUlua_State@@@Z) 中引用了无法解析的外部符号 _lua_settop

所有 lua 函数都会出现类似的错误。谷歌搜索时，我了解到我必须链接 LUA。

如何在 Visual C++ 中做到这一点。

***PS*** 我找到了一个解决方案，指导我给

```
#pragma comment( lib, "lua5.1" ) 
```

对于这个解决方案，它需要一个 lua5.1 文件。我应该从哪里下载该文件以及它应该去哪里（在项目文件夹中？）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:15:07.850

好的！我想通了！

要链接 Lua，必须在创建 C++ 项目后执行以下操作。

*   复制 C:\Program Files\Lua\5.1\lib\lua5.1.dll 到你的项目文件夹
*   复制 C:\Program Files\Lua\5.1\lib\lua5.1.lib 到你的项目文件夹
*   右键单击项目 --> 属性 --> 配置属性 --> 链接器 --> 输入。
    *   将 lua5.1.lib 添加到附加依赖项
*   右键单击项目 --> 属性 --> 配置属性 --> VC++ 目录。

    *   添加 C:\Program Files\Lua\5.1\include 以包含目录

注意：我的 lua 安装在 C:\Program Files\Lua\5.1

现在在构建项目时，会创建 dll 文件！

# macos - CGrafPtr 到 WindowRef

> ID：10713676
> 
> 赞同：0
> 
> 时间：2012-05-23T04:57:27.617
> 
> 标签：macos, macos-carbon, npapi

MacOs 中的 NPAPI 在 NPWindow 结构中为我提供了 CGrafPtr，我需要一个 WindowRef。有没有办法从 CGrafPtr 获取 WindowRef ？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:41:04.323

如果您使用非常非常不推荐使用的 QuickDraw 绘图模型（使用 Carbon 事件模型），NPAPI 只会为您提供 CGrafPtr。使用 QuickDraw 模型编写一个新插件将是一个糟糕的主意：Firefox 64 位不支持它，Safari 64 位不支持它，Chrome 也不真正支持它（很快就不支持了） ）。您的插件不适用于大多数用户。

相反，您应该使用 Core Animation（绘图）+ Cocoa（事件）或 CoreGraphics + Cocoa。在 Cocoa 事件模型中，故意没有办法获得对浏览器窗口的引用。现代浏览器几乎都在单独的进程中运行插件，并且不能跨进程引用窗口。

简而言之，如果您尝试制作一个需要访问浏览器窗口的新 NPAPI 插件，那么您的设计是错误的。

# tomcat - 使用 apache tomacat 6.0 发布网站

> ID：10713678
> 
> 赞同：0
> 
> 时间：2012-05-23T04:57:36.580
> 
> 标签：tomcat

我有一个使用 servlet、jsp 和 postgres 作为后端的项目构建。我想将此项目发布为网站。我已经注册了一个站点，但我只能使用主机重定向来请求该站点。但是我希望在键入站点地址而不定向到本地主机端口时打开我的索引页面。我想使用 AA 或 CNAME 但不是 url 重定向。

我已经在 8085 端口安装了 apache。当用户请求我的网站时，我不想在地址栏中显示我的 IP 地址。请帮助我，我一直在努力构建这个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:20:12.263

我有同样的问题。您需要将 tomcat 默认端口更改为 80 而不是 8085。我假设您正在运行 Linux。我只熟悉 Ubuntu，所以目录可能不一样。/var/etc/tomcat6 文件夹中应该有一个名为 server.xml 的文件。在那里，您必须更改端口号。此外，您需要以 root 身份运行 Tomcat。有很多关于如何做到这一点的教程。

# android - 在 android 应用程序上显示 facebook 喜欢计数

> ID：10713687
> 
> 赞同：-3
> 
> 时间：2012-05-23T04:58:24.540
> 
> 标签：android, facebook

我是 android 新手，我必须实现一些代码来显示 facebook 的数量，比如在 android 应用程序上。请大家帮帮我。我很困惑。请大家帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:13:04.770

如果您的 Facebook 粉丝页面是[http://www.facebook.com/IronMan3TheMovie](http://www.facebook.com/IronMan3TheMovie)，您可以使用 Graph API 检查点赞数，例如[http://graph.facebook.com/IronMan3TheMovie](http://graph.facebook.com/IronMan3TheMovie)。注意它说的部分：`"likes": 62968,`。

解析上述调用返回的 JSON（需要更改以检查您的页面），然后显示计数。

您可以通过以下形式查询图表：

`http://graph.facebook.com/{page_id}`

或者

`http://graph.facebook.com/{page_user_name}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:17:54.217

保留一个按钮，当用户单击该按钮时，将 1 发送到服务器并添加到以前的计数 ....

代码：

```
HttpClient c= new DefaultHttpClient();
HttpPost postRequest = new HttpPost(YOUR_SERVER_URL?cnt=1);//send cnt value as Request parameter
HttpRespone response = httpClient.execute(postRequest);
//Read the response
BufferedReader reader = new BufferedReader(new InputStreamReader(response
                        .getEntity().getContent(), "UTF-8"));
//Server side create JSP page.catch count value as 
request.getparameter("cnt"); 
```

# algorithm - 如何 - Prolog 中的图形着色

> ID：10713690
> 
> 赞同：5
> 
> 时间：2012-05-23T04:58:58.730
> 
> 标签：algorithm, prolog, graph-theory, graph-coloring

我正在尝试在 Prolog 中制作简单的图形着色算法，但我有点难以理解该语言。我知道我想做什么——我想去一个顶点，找到所有其他连接到它的顶点，检查我的顶点的颜色，并根据它用不同的颜色为其他顶点着色。我只是很难将其翻译成 Prolog。如果它是 C 方言或 Java，对我来说将是小菜一碟，但这让我很适应。

这是我到目前为止所拥有的：

```
main:- graph_coloring.

%color_list([blue, red, green, yellow, white], colors).
%vertex_list([a, b, c, d], vertices).
%edge_list([(a,b),(b,c),(c,d)], edges).

%Our graph
color(blue).
color(red).
color(green).
color(black).
color(white).

%graph([a-b, b-c, b-d, c-d]).

vertex(a).
vertex(b).
vertex(c).
vertex(d).

%Subject to changing, so are asserted into listener at runtime.
init_dynamic_facts:-
    assertz(vertex_color(a, none)),
    assertz(vertex_color(b, none)),
    assertz(vertex_color(c, none)),
    assertz(vertex_color(d, none)),
    assertz(location(a)).

edge(a,b).
edge(b,c).
edge(b,d).
edge(c,d).

is_connect(A,B):-
    edge(A,B).
is_connect(A,B):-
    edge(B,A).

connections(Vertex):-
    edge(Vertex,X).
connections(Vertex):-
    edge(X,Vertex).

move(Vertex):-
    retract(location(_)),
    asserta(location(Vertex)).

paint_vertex(Vertex, Color):-
    retract(vertex_color(Vertex,_)),
    asserta(vertex_color(Vertex, Color)).

find_vertex_color(Vertex):-
    vertex_color(Vertex, X).

graph_coloring:-

    location(Current_vertex),
    vertex_color(Current_vertex, Curr_color),
    ( Curr_color =:= none ->
        connections(Current_vertex, Others),
        vertex_color(Others, Other_colors),
        paint_vertex(Current_vertex, 
```

我怎样才能完成这个算法？

（已编辑：graph_coloring 下的更多代码）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-08T19:25:46.377

我想提一下这个问题是一个典型的*约束满足问题*，可以使用*SWI-Prolog*的 CSP 模块来高效解决。这是完整的算法：

```
:- use_module(library(clpfd)). 

color(red).
color(blue).
color(green).

vertex(a).
vertex(b).
vertex(c).
vertex(d).
vertex(e).

edge(a,b).
edge(a,c).
edge(b,c).
edge(b,d).
edge(c,d).

colorGraph(ColorList) :- 
  findall((X, Y), edge(X, Y), Edges),
  findall(X, vertex(X), Vertexes),
  findall(hasColor(X, _), member(X, Vertexes), ColorList),
  createConstraint(Edges,ColorList),
  colorNodes(ColorList).

createConstraint([],_).
createConstraint([(V1,V2)|RL],ColorList):-
  member(hasColor(V1,C1),ColorList),
  member(hasColor(V2,C2),ColorList),
  dif(C1,C2),
  createConstraint(RL,ColorList).

colorNodes([]).
colorNodes([hasColor(_,C)|Nodes]) :-
  color(C),
  colorNodes(Nodes). 
```

`color/1`指示可用的颜色，`vertex/1`指示图中的顶点并`edge/2`定义顶点之间的对。此外，`colorGraph(?List)`确定顶点的颜色，其中`List`是`hasColor(Vertex, Color)`子句列表，`Vertex`是使用 的彩色顶点`Color`。

让我们详细介绍上面算法的每个部分，以了解发生了什么。

```
:- use_module(library(clpfd)). 
```

它指示*SWI-Prolog*加载包含*约束满足问题*的谓词的模块。

```
colorGraph(ColorList) :- 
  findall((X, Y), edge(X, Y), Edges),
  findall(X, vertex(X), Vertexes),
  findall(hasColor(X, _), member(X, Vertexes), ColorList),
  createConstraint(Edges,ColorList),
  colorNodes(ColorList). 
```

谓词`colorGraph/1`是算法的入口点。它将边/顶点的子句转换为列表，约束`ColorList`定义顶点列表，最后创建颜色约束并分配颜色（它们是两个独立的操作）。

```
createConstraint([],_).
createConstraint([(V1,V2)|RL],ColorList):-
  member(hasColor(V1,C1),ColorList),
  member(hasColor(V2,C2),ColorList),
  dif(C1,C2),
  createConstraint(RL,ColorList). 
```

预测`createConstraint/2`只是说明两个链接的顶点必须具有不同的颜色。这值得一提`dif/2`的是一个CSP谓词。

```
colorNodes([]).
colorNodes([hasColor(_,C)|Nodes]) :-
  color(C),
  colorNodes(Nodes). 
```

谓词`colorNodes/1`为顶点分配正确的颜色。Prolog 将注意根据上面定义的约束分配正确的颜色。

最后可以通过调用谓词找到结果`colorGraph/1`，如：

```
?- colorGraph(L).
L = [hasColor(a, red), hasColor(b, blue), hasColor(c, green), hasColor(d, red), hasColor(e, red)] ;
L = [hasColor(a, red), hasColor(b, blue), hasColor(c, green), hasColor(d, red), hasColor(e, blue)] ;
L = [hasColor(a, red), hasColor(b, blue), hasColor(c, green), hasColor(d, red), hasColor(e, green)] ;
L = [hasColor(a, red), hasColor(b, green), hasColor(c, blue), hasColor(d, red), hasColor(e, red)] ;
L = [hasColor(a, red), hasColor(b, green), hasColor(c, blue), hasColor(d, red), hasColor(e, blue)] ;
L = [hasColor(a, red), hasColor(b, green), hasColor(c, blue), hasColor(d, red), hasColor(e, green)] ;
L = [hasColor(a, blue), hasColor(b, red), hasColor(c, green), hasColor(d, blue), hasColor(e, red)] ;
L = [hasColor(a, blue), hasColor(b, red), hasColor(c, green), hasColor(d, blue), hasColor(e, blue)] ;
L = [hasColor(a, blue), hasColor(b, red), hasColor(c, green), hasColor(d, blue), hasColor(e, green)] ;
L = [hasColor(a, blue), hasColor(b, green), hasColor(c, red), hasColor(d, blue), hasColor(e, red)] ;
L = [hasColor(a, blue), hasColor(b, green), hasColor(c, red), hasColor(d, blue), hasColor(e, blue)] ;
L = [hasColor(a, blue), hasColor(b, green), hasColor(c, red), hasColor(d, blue), hasColor(e, green)] ;
L = [hasColor(a, green), hasColor(b, red), hasColor(c, blue), hasColor(d, green), hasColor(e, red)] ;
L = [hasColor(a, green), hasColor(b, red), hasColor(c, blue), hasColor(d, green), hasColor(e, blue)] ;
L = [hasColor(a, green), hasColor(b, red), hasColor(c, blue), hasColor(d, green), hasColor(e, green)] ;
L = [hasColor(a, green), hasColor(b, blue), hasColor(c, red), hasColor(d, green), hasColor(e, red)] ;
L = [hasColor(a, green), hasColor(b, blue), hasColor(c, red), hasColor(d, green), hasColor(e, blue)] ;
L = [hasColor(a, green), hasColor(b, blue), hasColor(c, red), hasColor(d, green), hasColor(e, green)] ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:10:39.940

我认为您正在尝试以 Prolog 程序不自然的方式思考；也就是说，您试图不使用递归:) 我想出的是以下内容，但这可能并不完全正确（为时已晚，而且我在尝试思考时没有良好的声誉，例如这个...：） ）

假设您拥有由以下事实描述的图表：

```
edge(a,b).
edge(b,c).
edge(b,d).
edge(c,d). 
```

并且可用的颜色是

```
color(blue).
color(red).
color(green). 
```

（你只需要 3 种颜色来为平面图着色，所以我们在这里只使用 3 种颜色）。我们还假设您希望以 [Vertex-Color] 列表的形式给出答案，其中列表将包含图形每个顶点的颜色。我相信以下是正确的解决方案：

```
coloring([V-C]) :-
        color(C),
        \+ edge(V,_).
coloring([V-C,V1-C1|Coloring]) :-
        color(C),
        edge(V,V1),
        V \== V1,
        coloring([V1-C1|Coloring]),
        C1 \== C. 
```

第一个子句说如果从 V 到任何其他顶点没有边，则尝试所有可能的颜色。第二个子句说顶点 V 将获得颜色 C，如果从 V 到 V1 有一条边，则顶点 V1 将获得颜色 C1，其中 V!= V1 和 C!= C1。（我还假设您的图是连接的，即没有未连接到其他顶点的顶点）。

由于我们只想要所有顶点都有颜色的解决方案，因此我们将只保留长度为 |V| 的列表，其中 V 是您拥有的顶点集。您可以通过多种方式实现此限制；我更喜欢使用“findall/3”：

```
colors(X) :-
        coloring(X),
        findall(V,edge(V,_),List),
        length(List,Len),
        length(X,Len). 
```

现在，通过咨询该程序并询问`|?- colors(X).`您将获得图形顶点的所有可能颜色分配。

如果有人发现问题，我几乎可以肯定上述解决方案中存在问题，请告诉我们:)

斯皮罗斯

# qt - 我正在尝试用 gif 格式保存 QImage

> ID：10713691
> 
> 赞同：2
> 
> 时间：2012-05-23T04:59:01.017
> 
> 标签：qt, visual-c++

我正在尝试使用 gif 格式保存 QImage，但收到错误 QImageIO::write: No such image format handler: GIF

这是我的代码

```
'QImage image;
QByteArray ba;
QBuffer buffer(&ba);
buffer.open(QIODevice::WriteOnly);
image.save(&buffer, "GIF");' 
```

任何建议都将受到高度重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:29:32.377

在[读写文件](http://qt-project.org/doc/qt-4.8/qimage.html#reading-and-writing-image-files)部分指定`QImage`Qt默认不支持写入“GIF”文件。您应该寻找实现此功能的第三方库。

# hadoop - 如何强制hadoop为每个地图处理更多数据

> ID：10713694
> 
> 赞同：1
> 
> 时间：2012-05-23T04:59:13.837
> 
> 标签：hadoop, mapreduce

我的工作进展非常缓慢，因为我认为 hadoop 为数据的大小创建了太多的地图任务。我在一些网站上读到，它可以有效地使用更少的地图来处理更大的数据块——有什么办法可以强制这样做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:31:29.927

两种可能：

1.  增加 90gb 数据的块大小，将其设置为 128m 或更大将使您的地图任务“工作更多”
2.  使用[`CombineFileInputFormat`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/lib/CombineFileInputFormat.html)并将您的块一起批处理到您认为合适的大小。

第一个解决方案要求您重写数据以更改块大小，第二个解决方案可以嵌入到您的工作中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:36:19.827

许多地图确实会对性能产生严重影响，因为地图任务启动的开销为 1 到 3 秒，具体取决于您的设置和硬件。
这里的主要设置是 JVM 重用（mapred.job.reuse.jvm.num.tasks）。将其设置为 -1，您可能会获得显着的性能提升。
这个问题的通常根本原因是很多小文件。此处讨论： [使用 Hadoop 处理大量小文件](https://stackoverflow.com/questions/5930955/processing-large-set-of-small-files-with-hadoop) 解决方案是将它们组织在一起。
如果您的文件确实很大，但可拆分 - 您可以增加块边，从而减少拆分数量及其 - 地图数量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T20:18:41.073

增加拆分大小或使用 CombineFileInputFormat 将多个文件打包到一个拆分中，从而减少处理数据所需的映射任务数量。

# python - 尝试打印嵌套列表时出错：

> ID：10713695
> 
> 赞同：0
> 
> 时间：2012-05-23T04:59:15.187
> 
> 标签：python, windows, python-3.x

我是 Python 新手，我通过阅读《**Head first Python**》一书来学习它。

我的疑问是，当我想打印嵌套列表时，我没有得到正确的输出，如书中所示

> > > 电影= [“圣杯”，1975，“特里琼斯和特里吉列姆”，91，[“格雷厄姆查普曼”，[“迈克尔佩林”，“约翰克莱斯”，“特里吉列姆”，“埃里克空闲”，“特里琼斯"]]]

--（书中给出的代码）

```
>>> for each_item in movies:
if isinstance(each_item, list):
    for nested_item in each_item:
        if isinstance(nested_item, list):
            for deeper_item in nested_item:
                print(deeper_item)
        else:
           print(nested_item)
else:
    print(each_item) 
```

——（书中输出）

```
The Holy Grail
1975
Terry Jones & Terry Gilliam
91
Graham Chapman
Michael Palin
John Cleese
Terry Gilliam
Eric Idle
Terry Jones 
```

- （但我只得到以下输出）

```
Graham Chapman
Michael Palin
John Cleese
Terry Gilliam
Eric Idle
Terry Jones
['Graham Chapman', ['Michael Palin', 'John Cleese', 'Terry Gilliam', 'Eric Idle', 'Terry Jones']] 
```

--

请帮助我，我已经尝试了我能想到的一切。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:27:05.777

由于缩进错误，所示代码将无法运行。第一个 if 语句应该缩进。（如果你得到了你显示的结果，你可能在没有调整这个网站上的缩进的情况下剪切和粘贴它）。

```
movies = ["The Holy Grail", 1975, "Terry Jones & Terry Gilliam", 91, ["Graham Chapman", ["Michael Palin", "John Cleese", "Terry Gilliam", "Eric Idle", "Terry Jones"]]]

for each_item in movies:
    if isinstance(each_item, list):
        for nested_item in each_item:
            if isinstance(nested_item, list):
                for deeper_item in nested_item:
                    print(deeper_item)
            else:
                print(nested_item)
    else:
        print(each_item) 
```

在 Python 提示符后粘贴时对我有用。当最后两行缩进比这少 4 个空格时，你的输出就是你得到的。

print(nested_item) 也仅缩进 3 个空格，其余部分（缩进时）使用 4 个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:13:15.863

最后`else`是错误的缩进。它必须与第一名处于同一水平`if`，而不是第一名`for`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:15:38.343

通过使用您的代码，我得到了您想要的。请检查缩进。

```
for item in movies:
    if isinstance(item,list):
        for nested_item in item:
            if isinstance(nested_item,list):
                for deep_item in nitem:
                    print deep_item
            else:
                print nested_item
    else:
        print item 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:17:54.673

对我来说工作得很好:)

```
movies = ["The Holy Grail", 1975, "Terry Jones & Terry Gilliam", 91, ["Graham Chapman", ["Michael Palin", "John Cleese", "Terry Gilliam", "Eric Idle", "Terry Jones"]]]

for each_item in movies:
    if isinstance(each_item, list):
        for nested_item in each_item:
            if isinstance(nested_item, list):
                for deeper_item in nested_item:
                    print(deeper_item)
            else:
               print(nested_item)
    else:
        print(each_item) 
```

我看不出它会为你产生那种输出的任何理由。你是直接在解释器中输入的吗？也许最初的清单以某种方式搞砸了。尝试将此代码处理到 IDLE 中，看看是否发生了任何奇怪的事情。

# django - 这是 django 模板 re: forloop.parentloop.first 中的错误还是我误解了？

> ID：10713697
> 
> 赞同：0
> 
> 时间：2012-05-23T04:59:17.523
> 
> 标签：django, django-templates

```
from django.template import Template, Context
template = Template("""
      {% for language in languages %}
        THIS IS forloop.parentloop.first +++++++++
        {% for tag in revision_tags %}
          {% for case in CASES %}
          <tr>
            {% if forloop.parentloop.first %}<th rowspan="6">{{ language|capfirst }}</th>{% endif %}
            {% if forloop.first %}<th rowspan="2">{{ tag }}</th>{% endif %}
            <th>{{ case|capfirst }}</th>
          </tr>
          {% endfor %}
        {% endfor %}
      {% endfor %}
""")

c = Context({
    'languages': ["english", "french"],
    'revision_tags': ["d", "s", "p"],
    'CASES': ["foo", "bar"],
})

h = template.render(c)
print h 
```

我希望每种语言只看一次，但我得到了两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:23:48.887

试试这个（未测试）...

```
{% for language in languages %}
    THIS IS forloop.parentloop.first +++++++++
    {% for tag in revision_tags %}
      {% if forloop.parentloop.first %}<th rowspan="6">{{ language|capfirst }}</th>{% endif %}
      {% for case in CASES %}
      <tr>
        {% if forloop.first %}<th rowspan="2">{{ tag }}</th>{% endif %}
        <th>{{ case|capfirst }}</th>
      </tr>
      {% endfor %}
    {% endfor %}
  {% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:38:47.873

这不是错误，我误解了。在这种情况下，测试应该是`{% if forloop.parentloop.first and forloop.first %}`每次祖父迭代获得 1 个真值。`language`

```
 {% for language in languages %}
    {% for tag in revision_tags %}
      {% for case in CASES %}
      <tr>
        {% if forloop.parentloop.first and forloop.first %}
        <th rowspan="6">{{ language|capfirst }}</th>
        {% endif %}
        {% if forloop.first %}<th rowspan="2">{{ tag }}</th>{% endif %}
        <th>{{ case|capfirst }}</th>
      </tr>
      {% endfor %}
    {% endfor %}
  {% endfor %} 
```

# javascript - 如何复制表格的一行

> ID：10713699
> 
> 赞同：0
> 
> 时间：2012-05-23T04:59:57.410
> 
> 标签：javascript, html

我正在尝试复制元素树。在这个过程中，我必须更改一些参数，例如名称，将参数传递给分配给原始元素的某个函数。如何设置元素的 onclick 和其他方法。

例如：

```
<table>
 <tr>
  <td>
    <select name="abc(0)" onclick="func(0)">
      <option> 1</option>
    </select>
  </td>
  <td>
    <input type="text" onkeypress="keyp(0)" name="text(0)">
  </td>
 </tr>
</table> 
```

我尝试了各种方法，例如 cloneNode(true) 并尝试重命名节点名称并尝试更改分配的方法参数。我也尝试通过 document.createElement 创建元素，但在 IE 中，它没有更改名称。在第二个选项中，它甚至没有设置名称。方法也没有改变，在第二种方法中它甚至没有被分配。

有人可以让我知道我在哪里做错了。

谢谢和问候阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:19:09.043

我认为最好的选择是摆脱 on_event_ 属性并重构您的javascript，以便它使用事件侦听器。这样，处理事件的代码将与标记完全分开，并且克隆不会导致任何问题。

请注意，您必须使用委托事件，因为必须为页面上最初不存在的克隆元素调用事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:13:57.377

在 IE 中唯一不能更改的属性是已经添加到表单的控件的类型，您可以更改其他所有内容。请注意，在所有浏览器中，克隆的元素都保留内联侦听器，使用*attachEvent*添加侦听器的元素也是如此（所有库都用于支持*attachEvent*而不是*addEventListener*的浏览器）。

下面的代码片段显示了表单元素的 name 属性可以更改（在 IE 8 标准模式下测试），并且为克隆节点保留了内联侦听器。

```
<form id="f0">
  <input type="text" name="inp0" onclick="alert(this.name);">
  <input type="button" value="Do clone" onclick="
    var el = this.form.inp0.cloneNode(true);
    this.form.appendChild(el);
    el.name = 'inp1';
  ">
</form> 
```

# jquery - 使用 Jquery 拖放或其他方式动态单击某个图像

> ID：10713701
> 
> 赞同：1
> 
> 时间：2012-05-23T05:00:21.663
> 
> 标签：jquery, jquery-ui, draggable, droppable

我知道这将很难解释，但我想试试运气，听听您的意见和建议。目前我正在开发一个边缘、做和交互式应用程序的项目。

```
我有图像 Alpha、Beta 和 Gamma。

    1\. 目前当图像 Alpha 拖到图像 Beta 上时，
       函数 A() 被触发。

    2\. 同样，当图像 Alpha 拖到图像 Gamma 上时，
       函数 B() 被触发。

```

```
但是我希望这也发生在点击事件上，其中：

    1\. 当图像 Alpha 被拖动到图像 Beta 上然后单击时，功能
       A() 应该被触发

    2\. 并且，当图像 Alpha 被拖动到图像 Gamma 上然后单击时，函数 B()
       应该被触发

```

我该如何做一种方法，可以在图像上单击一个图像按钮并根据上面单击的图像触发？

我使用 Jquery UI 来实现拖放。希望现在很清楚...... :)

希望能听到专家的意见，提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:10:23.953

```
$('#target').bind('click mouseover', function () {
    // Do something for both
}); 
```

# c++ - 多态性判定问题

> ID：10713702
> 
> 赞同：0
> 
> 时间：2012-05-23T05:00:22.263
> 
> 标签：c++, polymorphism, virtual-functions, dispatch

我有一个正在处理的问题。我有一个以这种模式相互继承的数字类：

```
#include <stdio.h>
#include <stdlib.h>

#include <list>

class TimeObject
{
  public:
    virtual void Tick()=0;

    std::list<TimeObject*> ticks;
};

class MapObject : public TimeObject
{
  public:
    MapObject()
    {
        ticks.push_front(this);

        printf("Create MapObject %p\n", this);
    }

    void Tick() { printf("mapobject tick\n"); }
};

class ControlObject : public MapObject
{
  public:
    ControlObject()
    {
        ticks.push_front(this);

        printf("Create ControlObject %p\n", this);
    }

    void Tick() { printf("controlobject tick\n"); }
};

int main()
{
    ControlObject test;

    std::list<TimeObject*>::iterator it = test.ticks.begin();

    for(; it != test.ticks.end(); it++)
    {
        TimeObject *trigger = *it;

        trigger->Tick();
    }

    return 0;
} 
```

示例中的列表存储任何`TimeObject`派生类。我的问题是，当`MapObject`在列表中存储指针时，也`ControlObjects`调度总是选择`ControlObject`函数。

是否可以使用多态性通过指针触发`MapObject`函数？`ControlObject`如果不可能/不切实际，有什么好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:05:04.260

您应该***始终***将指向 Base 类的指针存储`A*`在 list( `std::list< A*>`) 中。
应该正确地使指针指向类型对象`B`或`C` ***在***将指针添加到容器之前。
一旦你这样做了，动态调度将根据实际的对象类型为你调用*正确的函数。*你不需要做任何事情。

我不知道您为什么想要任何其他设计，如果您有任何充分的理由这样做，请告诉他们。

**为什么它总是调用`ControlObject::tick()`你的代码？**
你打电话时：

```
ticks.push_front(this); 
```

在`ControlObject::ControlObject()`你基本上最终覆盖了你添加到列表中的第一个指针，第一个推送指针的类型`MapObject *`不再是`ControlObject *`因为你改变了它背后的指针。你没有将指针的所有权转移到列表但是你们俩拥有共享所有权，并且您通过派生类中的构造函数调用修改了列表中的对象。这将在列表中留下两个`ControlObject *`对象，动态调度正确地确定并调用正确的方法。

动态调度的作用没有错，它是正确的行为。
如果你想调用，`MapObject::Tick();`那么你必须明确告诉编译器这样做，动态分派适用于对象的实际类型并且它工作正常。

```
void controlobject::Tick() 
{ 
    printf("controlobject tick\n"); 
    MapObject::Tick();
} 
```

* * *

从评论中复制：

> 恐怕这是一个糟糕的设计。代码按应有的方式工作，它按照 C++ 标准的定义工作。问题在于设计。除非您提供更广泛意义上的目标细节推测一个新的设计是困难的，而且毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:06:13.143

将类型 C 的变量转换为类型 B 应该可以解决问题。

```
 C c;
   B b;
   c.Function();
   ((B)c).Function();
   A * l[] = {&c,&b,&c};
   l[0]->Function();
   l[1]->Function();
   l[2]->Function();

   B test = *(B*)l[0];
   test.Function(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:57:43.497

`MapObject::Tick()`在您当前的示例中，您应该能够通过调用inside来调用两个虚拟成员（或者只是一个取决于基础类型的成员）`ControlObject::Tick()`：

```
class ControlObject : public MapObject
{
  public:
    ControlObject()
    {
        ticks.push_front(this);

        printf("Create ControlObject %p\n", this);
    }

    void Tick() { printf("controlobject tick\n"); MapObject::Tick(); }
}; 
```

显式函数调用表示法是必需的。

# jquery - jQuery在发布表单操作之前淡出页面

> ID：10713704
> 
> 赞同：2
> 
> 时间：2012-05-23T05:00:53.990
> 
> 标签：jquery, html, forms, post, fade

在发布表单操作之前，我必须淡出页面。我不确定这是否可能，所以我不知道从哪里开始。

也就是说，我*确实*知道如何为链接做这件事......下面的javascript。谢谢你的帮助！

我需要拦截来自的 post 方法的 HTML 表单

```
<form id="postitron" method="post" action="/postitron/answertron.php"> 
```

我用于`anchor`标签的 JavaScript

```
var $linkLocation;

function redirectPage(){
    window.location = $linkLocation;
}

$('a.transition').click(function(event){
    event.preventDefault();
    $linkLocation = this.href;
    $('#page').animate({opacity:0},400, function(){
        redirectPage();
    });
}); 
```

* * *

更新：

这么多答案！谢谢！

我已经实现了全面推荐的要点，并且得到了无限循环的动画..我错过了什么？

我制作了一个 JSFiddle 来演示......它不会在无限循环中动画......但它也不会返回 404。奇怪的！？

HTML

```
<form id="postitron" method="post" action="/postitron/answertron.php">
  <input type="hidden" name="acces" value"yes">
  <input id="submit" type="submit" value="DOIT">
</form> 
```

JavaScript

```
$('#postitron').submit(function(e){
    e.preventDefault();
    $('#page').animate({opacity:0},400, function(){
        $('#postitron').submit();
    });
}); 
```

* * *

更新#2

@Ahren 建议 @Priyank Patel 对 .one() 方法的使用会阻止动画无限循环，它确实做到了（耶！），但我的控制台现在返回一个阻止表单提交的错误：

未捕获的类型错误：对象# 的属性“提交”不是函数

这是更新的 JavaSript

```
$('#postitron').one('submit', function(e){
    e.preventDefault();
    $('#page').animate({opacity:0},400, function(){
        $('#postitron').submit();
    });
}); 
```

* * *

更新#3

进一步考虑... .one() 方法为元素执行一次处理程序.. 是不是在动画消失后阻止执行相同的 submit() 方法？

* * *

更新#4

[无限循环中的jQuery动画](https://stackoverflow.com/questions/10714467/jquery-animate-in-infinite-loop)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:04:20.387

您可以使用基本相同的代码，但改为绑定到表单提交。我相信 jQuery 足够聪明，不会无限循环。

```
$(<submitbutton>).click(function(event){
    event.preventDefault();
    $('#page').animate({opacity:0},400, function(){
        $('form').submit();
    });
}); 
```

更新 - 根据 technopeasant 的反馈，您可以通过绑定到按钮的单击事件而不是提交事件来避免无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:03:29.050

只需`$("body").fadeOut();`在重定向之前调用，但在您的情况下，它不会向表单发送任何数据，只是一个常规重定向。也许您想发送数据，然后重定向。

会是这样的：

```
$("a.transition").bind("click",function(e){
    e.preventDefault();

    var url = $(this).attr("href");

    var data = { /* handle your data and construct this object */ };

    $.post(url,data,function(){
        $("body").fadeOut(400,function(){
            window.location = url;
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:04:28.297

和你已经得到的差不多。

```
$("#postitron").submit(function(e){
    e.preventDefault(); //stops the submission
    $("body").fadeOut(400, function(){
        handleFormSubmission(); 
    }); 
});

function handleFormSubmission(){
   // form submission code here.    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:04:48.660

```
$('#postitron').one('submit', function(event) 
{
    event.preventDefault();
    // fadeout page here...
    $('#postitron').submit();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T05:07:05.287

您可以对表单使用相同的方法：

1.  防止事件默认表单提交
2.  淡出页面
3.  动画完成后用javascript提交表单

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T05:16:38.877

简单的 ！

```
<form id="target" action="destination.html">
  <input type="text" value="Hello there" />
  <input type="submit" value="Go" />
</form>

​
            $('#target').submit(function() {
                $('input').fadeOut('slow', function() {
                    alert('Redirecting now ......Were yor Seatbelts');
                    return false;
                });
            });? 
```

**更新的 jQuery 代码：**

```
<form id="postitron" method="post" action="/postitron/answertron.php">
  <input type="hidden" name="acces" value"yes">
  <input id="submit" type="submit" value="DOIT">
</form>

$('#postitron').submit(function() {
      $('input').fadeOut('slow', function() {
      alert('Redirecting now ......Were yor Seatbelts');
          //Will redirect to 404 in Jsfiddle
      return false;
  });
}); 
```

更新2 **：P** [http://jsfiddle.net/ipsjolly/ELKuL/5/](http://jsfiddle.net/ipsjolly/ELKuL/5/)

**更新**：http: [//jsfiddle.net/ipsjolly/ELKuL/3/](http://jsfiddle.net/ipsjolly/ELKuL/3/)

**示例：http:** [//jsfiddle.net/ipsjolly/ELKuL/1/](http://jsfiddle.net/ipsjolly/ELKuL/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T05:31:34.357

检查此代码后，它可能对您有所帮助：

```
<html>
        <head>
                <script type="text/javascript" src="jquery.js"></script>
                <script type="text/javascript">
                        $(document).ready(function(){
                            $("button").click(function(){
                                $("div").fadeOut(400,function(){
                                    alert(1)
                                    $("#form1").trigger("submit");
                                });
                            });
                        });
                </script>
        </head>
    <body>
    <div style="background:yellow;width:300px;height:300px">
        <form method="post" action="another.php" id="form1">
            <input type="text" value="hello this will hide">
                <button>Click to Fade</button>
        </form>
    </div>
    </body>
</html> 
```

# google-analytics - 使用 AngularJS 跟踪 Google Analytics 页面浏览量

> ID：10713708
> 
> 赞同：225
> 
> 时间：2012-05-23T05:01:29.037
> 
> 标签：google-analytics, angularjs

我正在使用 AngularJS 作为前端设置一个新应用程序。客户端的一切都是通过 HTML5 pushstate 完成的，我希望能够在 Google Analytics 中跟踪我的页面浏览量。

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-05-23T05:01:29.273

如果您`ng-view`在 Angular 应用程序中使用，您可以监听`$viewContentLoaded`事件并将跟踪事件推送到 Google Analytics。

假设您已在主 index.html 文件中设置了跟踪代码，名称为`var _gaq`并且 MyCtrl 是您在`ng-controller`指令中定义的内容。

```
function MyCtrl($scope, $location, $window) {
  $scope.$on('$viewContentLoaded', function(event) {
    $window._gaq.push(['_trackPageView', $location.url()]);
  });
} 
```

**更新：** 对于新版本的谷歌分析使用这个

```
function MyCtrl($scope, $location, $window) {
  $scope.$on('$viewContentLoaded', function(event) {
    $window.ga('send', 'pageview', { page: $location.url() });
  });
} 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-09-04T11:44:51.700

加载新视图时`AngularJS`，Google Analytics 不会将其计为新页面加载。幸运的是，有一种方法可以手动告诉 GA 将 url 记录为新的综合浏览量。

`_gaq.push(['_trackPageview', '<url>']);`可以完成这项工作，但是如何将其与 AngularJS 绑定？

这是您可以使用的服务：

```
(function(angular) { 

  angular.module('analytics', ['ng']).service('analytics', [
    '$rootScope', '$window', '$location', function($rootScope, $window, $location) {
      var track = function() {
        $window._gaq.push(['_trackPageview', $location.path()]);
      };
      $rootScope.$on('$viewContentLoaded', track);
    }
  ]);

}(window.angular)); 
```

当你定义你的角度模块时，包括分析模块，如下所示：

```
angular.module('myappname', ['analytics']); 
```

**更新**：

您应该将新的 Universal Google Analytics 跟踪代码用于：

```
$window.ga('send', 'pageview', {page: $location.url()}); 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-10-17T03:41:57.787

```
app.run(function ($rootScope, $location) {
    $rootScope.$on('$routeChangeSuccess', function(){
        ga('send', 'pageview', $location.path());
    });
}); 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-08-12T22:28:24.627

只是一个快速的补充。如果您使用的是新的 analytics.js，则：

```
var track = function() {     
 ga('send', 'pageview', {'page': $location.path()});                
}; 
```

另外一个提示是谷歌分析不会在本地主机上触发。因此，如果您在 localhost 上进行测试，请使用以下内容而不是默认创建（[完整文档](https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced)）

```
ga('create', 'UA-XXXX-Y', {'cookieDomain': 'none'}); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-06-04T05:11:18.010

我创建了一个服务 + 过滤器，可以帮助你们解决这个问题，如果您将来选择添加它们，也许还可以帮助其他一些提供商。

查看[https://github.com/mgonto/angularytics](https://github.com/mgonto/angularytics)，让我知道这对你有什么影响。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-08-13T15:58:01.730

合并 wynnwu 和 dpineda 的答案对我有用。

```
angular.module('app', [])
  .run(['$rootScope', '$location', '$window',
    function($rootScope, $location, $window) {
      $rootScope.$on('$routeChangeSuccess',
        function(event) {
          if (!$window.ga) {
            return;
          }
          $window.ga('send', 'pageview', {
            page: $location.path()
          });
        });
    }
  ]); 
```

将第三个参数设置为对象（而不仅仅是 $location.path()）并使用 $routeChangeSuccess 而不是 $stateChangeSuccess 就可以了。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-12-27T19:23:49.590

我使用上述方法在 github 上创建了一个简单的示例。

[https://github.com/isamuelson/angularjs-googleanalytics](https://github.com/isamuelson/angularjs-googleanalytics)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-10-20T18:39:42.490

在您的`index.html`中，复制并粘贴 ga 代码段，但删除该行`ga('send', 'pageview');`

```
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-XXXXXXXX-X');
</script> 
```

我喜欢给它自己的`my-google-analytics.js`带有自我注入的工厂文件：

```
angular.module('myApp')
  .factory('myGoogleAnalytics', [
    '$rootScope', '$window', '$location', 
    function ($rootScope, $window, $location) {

      var myGoogleAnalytics = {};

      /**
       * Set the page to the current location path
       * and then send a pageview to log path change.
       */
      myGoogleAnalytics.sendPageview = function() {
        if ($window.ga) {
          $window.ga('set', 'page', $location.path());
          $window.ga('send', 'pageview');
        }
      }

      // subscribe to events
      $rootScope.$on('$viewContentLoaded', myGoogleAnalytics.sendPageview);

      return myGoogleAnalytics;
    }
  ])
  .run([
    'myGoogleAnalytics', 
    function(myGoogleAnalytics) {
        // inject self
    }
  ]); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-03-30T16:42:17.043

最好的方法是使用谷歌标签管理器根据历史监听器触发你的谷歌分析标签。这些内置在 GTM 界面中，可以轻松跟踪客户端 HTML5 交互。

启用内置的*历史*变量并创建触发器以根据历史更改触发事件。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-05-27T14:51:54.197

我发现该`gtag()`功能有效，而不是该`ga()`功能。

在 index.html 文件的`<head>`部分内：

```
<script async src="https://www.googletagmanager.com/gtag/js?id=TrackingId"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'TrackingId');
</script> 
```

在 AngularJS 代码中：

```
app.run(function ($rootScope, $location) {
  $rootScope.$on('$routeChangeSuccess', function() {
    gtag('config', 'TrackingId', {'page_path': $location.path()});
  });
}); 
```

替换`TrackingId`为您自己的跟踪 ID。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-06-26T22:27:12.403

如果有人想使用指令来实现，请在 index.html 中标识（或创建）一个 div（就在 body 标签下，或在同一 DOM 级别）

```
<div class="google-analytics"/> 
```

然后在指令中添加以下代码

```
myApp.directive('googleAnalytics', function ( $location, $window ) {
  return {
    scope: true,
    link: function (scope) {
      scope.$on( '$routeChangeSuccess', function () {
        $window._gaq.push(['_trackPageview', $location.path()]);
      });
    }
  };
}); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-05-25T14:35:07.297

对于那些使用 AngularUI Router 而不是 ngRoute 的人，可以使用以下代码来跟踪页面浏览量。

```
app.run(function ($rootScope) {
    $rootScope.$on('$stateChangeSuccess', function (event, toState, toParams, fromState, fromParams) {
        ga('set', 'page', toState.url);
        ga('send', 'pageview');
    });
}); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-01-24T05:52:49.387

如果您使用的是 ui-router，您可以像这样订阅 $stateChangeSuccess 事件：

```
$rootScope.$on('$stateChangeSuccess', function (event) {
    $window.ga('send', 'pageview', $location.path());
}); 
```

有关完整的工作示例，请参阅[此博客文章](http://jasonwatmore.com/post/2015/11/07/AngularJS-Google-Analytics-with-the-UI-Router.aspx)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-04-01T15:06:09.930

使用 GA 'set' 确保为 Google 实时分析选择路线。否则，对 GA 的后续调用将不会显示在实时面板中。

```
$scope.$on('$routeChangeSuccess', function() {
    $window.ga('set', 'page', $location.url());
    $window.ga('send', 'pageview');
}); 
```

Google 通常强烈建议使用这种方法，而不是在“发送”中传递第三个参数。 [https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications](https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-08-07T17:24:33.083

创建单页应用程序的开发人员可以使用[autotrack](https://github.com/googleanalytics/autotrack)，其中包括一个[urlChangeTracker](https://github.com/googleanalytics/autotrack#urlchangetracker)插件，可以为您处理本指南中列出的所有重要注意事项。有关使用和安装说明，请参阅[autotrack 文档](https://github.com/googleanalytics/autotrack)。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-12-15T13:57:53.700

我在 html5 模式下使用 AngluarJS。我发现以下解决方案最可靠：

使用[angular-google-analytics](https://github.com/revolunet/angular-google-analytics)库。用类似的东西初始化它：

```
//Do this in module that is always initialized on your webapp    
angular.module('core').config(["AnalyticsProvider",
  function (AnalyticsProvider) {
    AnalyticsProvider.setAccount(YOUR_GOOGLE_ANALYTICS_TRACKING_CODE);

    //Ignoring first page load because of HTML5 route mode to ensure that page view is called only when you explicitly call for pageview event
    AnalyticsProvider.ignoreFirstPageLoad(true);
  }
]); 
```

之后，在 $stateChangeSuccess' 上添加监听器并发送 trackPage 事件。

```
angular.module('core').run(['$rootScope', '$location', 'Analytics', 
    function($rootScope, $location, Analytics) {
        $rootScope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams, options) {
            try {
                Analytics.trackPage($location.url());
            }
            catch(err) {
              //user browser is disabling tracking
            }
        });
    }
]); 
```

在任何时候，当您初始化用户时，您可以在其中注入 Analytics 并拨打电话：

```
Analytics.set('&uid', user.id); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-07-16T13:34:22.930

我正在使用 ui-router，我的代码如下所示：

```
$rootScope.$on('$stateChangeSuccess', function(event, toState, toParams){
  /* Google analytics */
  var path = toState.url;
  for(var i in toParams){
    path = path.replace(':' + i, toParams[i]);
  }
  /* global ga */
  ga('send', 'pageview', path);
}); 
```

这样我可以跟踪不同的状态。也许有人会发现它很有用。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-02-29T06:49:12.853

我个人喜欢使用模板 URL 而不是当前路径来设置我的分析。这主要是因为我的应用程序有很多自定义路径，例如`message/:id`或`profile/:id`。如果我要发送这些路径，我会在分析中查看很多页面，因此很难检查用户访问最多的页面。

```
$rootScope.$on('$viewContentLoaded', function(event) {
    $window.ga('send', 'pageview', {
        page: $route.current.templateUrl.replace("views", "")
    });
}); 
```

我现在在我的分析中获得干净的页面视图，例如`user-profile.html`和`message.html`而不是许多页面`profile/1`是`profile/2`和`profile/3`。我现在可以处理报告以查看有多少人正在查看用户配置文件。

如果有人对为什么这在分析中是不好的做法有任何异议，我会很高兴听到这个消息。使用 Google Analytics 很新，所以不太确定这是否是最好的方法。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-02-21T22:49:56.910

我建议使用 Segment 分析库并遵循我们的[Angular 快速入门指南](https://github.com/segmentio/analytics-angular)。您将能够使用单个 API 跟踪页面访问和用户行为操作。如果您有 SPA，则可以允许`RouterOutlet`组件在页面呈现时处理并用于`ngOnInit`调用`page`调用。下面的示例显示了您可以执行此操作的一种方法：

```
@Component({
  selector: 'app-home',
  templateUrl: './home.component.html',
  styleUrls: ['./home.component.css']
})
export class HomeComponent implements OnInit {
  ngOnInit() {
    window.analytics.page('Home');
  }
} 
```

我是[https://github.com/segmentio/analytics-angular](https://github.com/segmentio/analytics-angular)的维护者。如果您有兴趣尝试多种分析工具（我们支持超过 250 多个目的地），而无需编写任何额外的代码，您可以通过 Segment 来打开和关闭不同的目的地。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-11-21T12:29:25.933

与佩德罗洛佩兹的回答更加融合，

我将此添加到我的 ngGoogleAnalytis 模块（我在许多应用程序中重复使用）：

```
var base = $('base').attr('href').replace(/\/$/, ""); 
```

在这种情况下，我的索引链接中有一个标签：

```
 <base href="/store/"> 
```

在 angular.js v1.3 上使用 html5 模式时很有用

（如果您的基本标记没有以斜杠 / 结尾，请删除 replace() 函数调用）

```
angular.module("ngGoogleAnalytics", []).run(['$rootScope', '$location', '$window',
    function($rootScope, $location, $window) {
      $rootScope.$on('$routeChangeSuccess',
        function(event) {
          if (!$window.ga) { return; }
          var base = $('base').attr('href').replace(/\/$/, "");

          $window.ga('send', 'pageview', {
            page: base + $location.path()
          });
        }
      );
    }
  ]); 
```

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2013-12-21T17:09:57.500

如果您正在寻找对 Google Analytics 新跟踪代码的完全控制，您可以使用我自己的[Angular-GA](https://github.com/panrafal/angular-ga)。

它`ga`通过注入提供，因此很容易测试。除了在每个 routeChange 上设置路径之外，它没有任何魔力。您仍然必须像这里一样发送综合浏览量。

```
app.run(function ($rootScope, $location, ga) {
    $rootScope.$on('$routeChangeSuccess', function(){
        ga('send', 'pageview');
    });
}); 
```

另外还有一个指令`ga`允许将多个分析功能绑定到事件，如下所示：

```
<a href="#" ga="[['set', 'metric1', 10], ['send', 'event', 'player', 'play', video.id]]"></a> 
```

# android - 访问琐事游戏数据的最佳方式是什么

> ID：10713712
> 
> 赞同：1
> 
> 时间：2012-05-23T05:01:48.827
> 
> 标签：android, database, random, textview

我基本上是在创建一个琐事类型的游戏。在你有问题的地方，在你回答后，你按下一个按钮，看看你是否正确。然后你继续下一个问题。我有一个活动和一个 xml 来控制它的外观并让用户能够与屏幕上的内容进行交互。它目前显示一个问题。现在我需要在按下按钮时将其更改为不同的问题。它的工作方式是所有 textView 都会改变它们的文本。

我想有一种方法来存储我的问题，即一组文本视图的字符串，它是诸如类别、正确答案之类的信息。还有这个问题的整体标签，它必须是一个整数，所以我可以随机选择一个问题。我还希望它能够使用该整数检索问题的所有数据（如上所述）。换句话说，每个问题都与一个整数相关联。

有没有人对我应该以哪种方式实现这一点有任何想法？我只是在寻找任何可以让我的生活更轻松的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T05:14:31.917

为此使用数据库是旧概念。最好的方法是为此使用 XML 解析。这是一种简单的方法来完成您需要的操作。只需从标签中获取数据并在控件上显示。您可以通过简单的 XML Parsing 来做到这一点。为此，您必须在类中添加一个 xml 文件，然后按如下方式使用它

```
 Document doc=XMLfunctions.XMLfromString(this.getResources().openRawResource(name of the xml));       
        int numResults = XMLfunctions.numResults(doc);

        NodeList nodes = doc.getElementsByTagName("head tag");

            Element e = (Element)nodes.item(inx);

            btn[0].setText( XMLfunctions.getValue(e, "option1"));
            btn[1].setText( XMLfunctions.getValue(e, "option2"));
            btn[2].setText( XMLfunctions.getValue(e, "option3"));
            btn[3].setText( XMLfunctions.getValue(e, "option4"));
            tv.setText( XMLfunctions.getValue(e, "name"));
            tv1.setText( XMLfunctions.getValue(e, "answer"));

            tv.startAnimation(animation); 
```

也可以在谷歌上搜索，如果你觉得有问题，我会帮助你。此[链接可帮助您了解 XML 解析](http://p-xr.com/android-tutorial-how-to-parseread-xml-data-into-android-listview/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:08:17.957

由于您在标签中指出这是一个 Android 项目，因此您最好实现一个 SQLite 数据库来存储您的琐事文本。SQLite 是一种相当常见且轻量级的数据库解决方案，可与 Android 应用程序一起使用。 [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

这个 Stackoverflow 线程中的答案也可能有助于入门：

[如何在 Android 应用程序中实现 SQLite？](https://stackoverflow.com/questions/6884150/how-to-implement-sqlite-in-android-application)

# youtube-api - 第 49 行的 YouTube iframe API 错误

> ID：10713718
> 
> 赞同：2
> 
> 时间：2012-05-23T05:02:14.380
> 
> 标签：youtube-api

在 chrome 和 ff 中一切都很好。我有代码，还有一些功能可以在幻灯片更改时停止视频（我在页面上有 4 个视频）我尝试了 div 和 id 并调用

```
var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var video1;

    function onYouTubePlayerAPIReady() {
        video1 = new YT.Player('video1', {
            width: videoWidth,
            height: videoHeight,
            videoId: '**VIDEOID**'
        });
    } 
```

我已经尝试在源代码中使用 iframe 而不是只调用

```
video1 = new YT.Player('video1'); 
```

在 onyoutubeplaterapiready 内

我只在 IE 上得到的错误（我在 8 上测试过）是：消息：未指定的错误。行：49 字符：5 代码：0 URI：[http ://www.youtube.com/embed/](http://www.youtube.com/embed/) **VIDEOID** ?enablejsapi=1&origin=http://o

有什么办法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:33:24.957

我知道我迟到了，但我遇到了同样的错误，我在模态中加载 YouTube 播放器，当我关闭模态时，我在 IE8 上收到错误。问题是我在 API 中注册了“onStateChange”事件，当模式关闭并且玩家从 DOM 中移除时，我收到了该错误，因为该事件试图与不再存在的元素进行通信.

# firefox - 我究竟如何在 Firefox 扩展中获得以下 GUI？

> ID：10713728
> 
> 赞同：0
> 
> 时间：2012-05-23T05:03:30.307
> 
> 标签：firefox, firefox-addon, xul, firefox-addon-sdk

我是 Firefox 开发的新手，正在使用附加 SDK。我想知道如何在扩展中获取以下用户界面：

![截屏](../Images/f19fbd0bd49e76bb8f4b8d0c507a80c7.png)

这个界面是面板吗？如果不是，它是什么以及如何在 Firefox 插件中获取此界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:46:41.757

不，这不是面板。您的屏幕截图显示了一个[基于 XUL 的](https://developer.mozilla.org/en/XUL)对话框窗口，这就是它看起来像本机对话框的原因。

附加组件 SDK 使用 HTML 来满足其需求，但是在那里创建一个看起来像本机的对话框是很困难的。有一个支持 XUL[的附加 SDK 的分支，](http://asqueella.blogspot.de/2010/03/jetpack-sdk-and-xul-extensions.html)但它已经过时并且非常实验性。

另一种选择是[构建一个经典的扩展](https://developer.mozilla.org/en/Building_an_Extension)​​。它可以简单地为对话框提供一个 XUL 文件（[`<dialog>`](https://developer.mozilla.org/en/XUL/dialog)用作根标记）并[`window.openDialog()`](https://developer.mozilla.org/en/DOM/window.openDialog)在某个时候调用以显示它。

# apache-flex - 用于 flex air 移动设备的 Google+ api

> ID：10713729
> 
> 赞同：1
> 
> 时间：2012-05-23T05:03:43.093
> 
> 标签：apache-flex, google-plus, flex4.6

我是 flex air 移动应用程序的新手，这是我的第一个项目。我想了解用于 flex air mobile 的 google+ api。有任何可用的文档或教程吗？这很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:17:42.947

我签入了[Google+ API](http://flex-arulmurugant.blogspot.in/2011/09/flex-google-api-and-actionscript-3.html)。我找到[了这个使用 Google+ API 的 flex 实现示例](http://flex-arulmurugant.blogspot.in/2011/09/flex-google-api-and-actionscript-3.html)。我仍然可以找到 Google 提供的一些详细的本地支持，就像他们为[Flex for maps](https://developers.google.com/maps/documentation/flash/tutorial-flex)提供的一样。

# android - 如何让媒体播放器在所有活动中播放

> ID：10713730
> 
> 赞同：0
> 
> 时间：2012-05-23T05:03:57.263
> 
> 标签：android

我有一个具有多个活动的 android 应用程序第一个主要活动使用媒体播放器启动背景音乐。当应用程序处于前台时，如何让这些音乐继续播放我试图在 onpause 方法上停止应用程序并在 onresume 方法上启动它但是在每个活动中使用相同的代码很麻烦非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:26:26.523

如果您希望媒体播放器在应用程序处于前台之前播放，您不能在 onPause 中停止它。原因是如果从Activity A过渡到Activity B，会调用Activity A的onPause和Activity B的onResume/onCreate。为了实现你想要实现的东西，你需要检查应用程序何时进入后台。为此，请使用以下函数：

```
public boolean isAppOnForeground(final Context context)
    {
        final ActivityManager activityManager = (ActivityManager)     context.getSystemService(Context.ACTIVITY_SERVICE);
    final List<RunningAppProcessInfo> appProcesses = activityManager.getRunningAppProcesses();
    if (appProcesses == null)
    {
        return false;
    }
    final String packageName = context.getPackageName();
    for (final RunningAppProcessInfo appProcess : appProcesses)
    {
        if ((appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND) && appProcess.processName.equals(packageName))
        {
            return true;
        }
    }
    return false;
} 
```

对于背景：

```
public static boolean isApplicationBroughtToBackground(final Context context)
{
        final ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        final List<RunningTaskInfo> tasks = am.getRunningTasks(1);
    if (!tasks.isEmpty())
    {
        final ComponentName topActivity = tasks.get(0).topActivity;
        if (!topActivity.getPackageName().equals(context.getPackageName()))
        {
            return true;
        }
    }
    return false;
} 
```

要调用此函数，请创建一个 Base Activity 并覆盖其 onPause() 和 onResume() 方法，扩展 Base Activity 代替 Activity。

希望这对您有所帮助。

什拉达

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:12:31.460

创建后，您应该将媒体播放器绑定到服务！您可以在安卓开发者页面上查看服务：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

一旦媒体播放器绑定到服务，哪个活动处于活动状态都无关紧要。

# android - 如何在 Android 中解析 SOAP WebServices XML 数据？

> ID：10713735
> 
> 赞同：1
> 
> 时间：2012-05-23T05:04:22.600
> 
> 标签：android, web-services, soap, xml-parsing

我想在 Android 肥皂网络服务中将输入请求作为 XML 发送，最后我想在 Xml 中显示响应。我如何在 Android 中使用该肥皂网络服务。

```
 package com.venkattt.pack;

import java.net.SocketException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;

public class SoapWebservicesExampleActivity extends Activity {
    /** Called when the activity is first created. */
      final String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
     final String URL = "http://**********:8000/sap/bc/srt/wsdl/srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/document?sap-client=800&sap-user=*******&sap-password=*******";
      final String METHOD_NAME = "Z_GET_CUST_GEN";
     final String SOAP_ACTION = "urn:sap-com:document:sap:soap:functions:mc-style/Z_GET_CUST_GEN";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); // set up
            request.addProperty("Input", "1460");
            request.addProperty("Langu", "d");
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12); // put all required data into a soap
            envelope.dotNet = false;
            envelope.setOutputSoapObject(request);
            HttpTransportSE httpTransport = new HttpTransportSE(URL);
            httpTransport.debug = true;

            try {

                 httpTransport.call(SOAP_ACTION, envelope);
                 Object result = (Object) envelope.getResponse();

                 System.out.println("theeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee result"+result);

                }
            catch(SocketException ex){
                    ex.printStackTrace();
                } catch (Exception e) {
                   e.printStackTrace();
                }
        }
    } 
```

我编写了使用 Android 网络服务的代码，但我没有得到 xml 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:13:49.747

为此，您必须下载两个文件，

*   [AndroidHttpTransport.java](http://pastebin.com/wNbgKd5e)
*   [AndroidServiceConnection.java](http://pastebin.com/4zgf0iKT)

您还需要，

*   commons-httpclient-3.0.1.jar
*   ksoap2-android-assembly-2.5.4-jar-with-dependencies.jar

然后在`call()`类的方法中，`AndroidHttpTransport`您可以将 xml 响应分配给您定义的 String 并可以进一步访问它。

以下是相同的伪代码，

```
responseDump = new String(buf);
unescape(responseDump);
your_string = responseDump; 
```

然后`your_string`会有完整的 xml 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:17:32.353

```
 HttpPost httppost = new HttpPost("http://192.168.1.103/test/index1.php");
        //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost); 
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        Log.e("log_tag", "connection success ");
     //convert response to string

        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");

        }
        is.close();
        result=sb.toString();
        //Log.e("",""+result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:33:24.647

```
public class From extends Activity 
{
HttpPost httppost;
InputStream is;
ListView lv;
TextView displayStrip;
ArrayList<String> atcodeid=new ArrayList<String>();
ArrayAdapter<String> adapter;
ArrayList<String> listItems=new ArrayList<String>();
ArrayList<String> originalname=new ArrayList<String>();
String mode;
Button btn_name;
Button btn_map;
SharedPreferences prefs;
int testing;
String shortcutname;
@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.from);

    lv          =   (ListView)findViewById(R.id.listView1);
    displayStrip=   (TextView)findViewById(R.id.displayStrip);
    btn_name    =   (Button)findViewById(R.id.name);
    btn_map     =   (Button)findViewById(R.id.map);
    prefs       =    PreferenceManager.getDefaultSharedPreferences(this);
    testing     =    prefs.getInt("settings",0);

    adapter=new ArrayAdapter<String>(From.this,
            android.R.layout.simple_list_item_1,
            listItems);
    lv.setAdapter(adapter);
    lv.setFastScrollEnabled(true);
    String result = "";
   // ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
   // nameValuePairs.add(new BasicNameValuePair("birthyear","1990"));
    try{
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost("http://192.168.1.103/test/index1.php");
        //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost); 
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        //Log.e("log_tag", "connection success ");
      //  Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show();
    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }
    //convert response to string
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
           // Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show();
        }
        is.close();
        result=sb.toString();
        //Log.e("",""+result);
    }catch(Exception e){
           Log.e("log_tag", "Error converting result "+e.toString());
    }
    try{
        JSONArray jArray = new JSONArray(result);
        JSONObject json_data=null;
           for(int i=0;i<jArray.length();i++)
           {
                json_data =jArray.getJSONObject(i);
                String src_name=json_data.getString("commonname");
                originalname.add(src_name);
                if(src_name.contains("Wharf"))
                {
                    shortcutname=src_name.substring(0, src_name.indexOf("Wharf"));
                }
                else if(src_name.contains("Station"))
                {
                    shortcutname=src_name.substring(0, src_name.indexOf("Station"));
                }
                else 
                    shortcutname=src_name;
                listItems.add(shortcutname);
                //listItems.add(src_name);
                //Log.e("",i+"testing"+src_name);
                atcodeid.add(json_data.getString("Atcocode"));
                adapter.notifyDataSetChanged();
           }
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show();
    }
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView arg0,
        View arg1, int position, long arg3) {
        Intent i = new Intent(From.this, To.class);
        //Toast.makeText(From.this, ""+atcodeid.get(position)+" "+originalname.get(position), Toast.LENGTH_SHORT).show();
        i.putExtra("mode", mode);
        i.putExtra("id", atcodeid.get(position));
        i.putExtra("fromacto", originalname.get(position));
        startActivity(i);
        }
        });
    btn_map.setOnClickListener(new OnClickListener() {  
        public void onClick(View v) {
            btn_map.requestFocus();
            btn_map.setFocusable(true);
            SharedPreferences.Editor prefsEditor = prefs.edit();
            prefsEditor.putInt("settings", 1);
            prefsEditor.commit();
            Intent intent=new Intent(From.this , FromGoogleMaps.class);
            startActivity(intent);
        }
       });
    btn_name.setOnClickListener(new OnClickListener() {  
        public void onClick(View v) {
            btn_name.requestFocus();
            btn_name.setFocusable(true);
            SharedPreferences.Editor prefsEditor = prefs.edit();
            prefsEditor.putInt("settings", 0);
            prefsEditor.commit();
            Intent intent=new Intent(From.this , From.class);
            startActivity(intent);
        }
       });
       } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:09:46.903

嗨，这可能对你有用[http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:04:21.890

使用 DOM Parser 或 SAX Parser 会更好......这个链接肯定对你有用：

*   [Android XML Adventure – 使用 SAXParser 解析 XML 数据](http://xjaphx.wordpress.com/2011/10/09/android-xml-adventure-parsing-data-with-saxparser/)
*   [Android – 从 InputStream 读取响应的简单 XML DOM 解析器示例](http://vikaskanani.wordpress.com/2011/09/15/android-simple-xml-dom-parser-example-for-reading-response-from-inputstream/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-27T07:48:28.597

当您致电时，您将能够获得结果`HttpTransport.responseDump`

这是我的实施方式

```
public String GetNewTransaction_service(String login_id,String Password_id)
{

    String SOAP_ACTION = "http://www.webserviceX.NET/GetWeather";
    String METHOD_NAME = "GetWeather";
    String NAMESPACE  = "http://www.webserviceX.NET";
    String SOAP_ADDRESS = "http://www.webservicex.com/globalweather.asmx";

    SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);
    request.addProperty("login",login_id);
    request.addProperty("pwd",Password_id);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    envelope.implicitTypes = true;

    HttpTransportSE httpTransaport = new HttpTransportSE(SOAP_ADDRESS);
    httpTransaport.debug = true;

    String response = null;

    try
    {
        httpTransaport.call(SOAP_ACTION,envelope);
        response = httpTransaport.responseDump;
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return  response;
} 
```

# php - 试图将 localhost php 购物车带到 godaddy 并遇到问题

> ID：10713736
> 
> 赞同：0
> 
> 时间：2012-05-23T05:04:23.650
> 
> 标签：php, mysql, database

首先，我是 php sysql 和数据库的新手。我确实知道一点 c++，所以这对 php 有帮助。我不太了解数据库，所以我的问题是：.....

这是我的代码：

```
<?php

echo $_SERVER['DOCUMENT_ROOT'].'/'.'lensClensProducts/views/layouts/'.$controller.'.php';

// Includes our database functions
include('db_functions.php');

// includes our cart functions
include('cart_fns.php');

session_start();

 // set up default cart values
 if(!isset($_SESSION['cart']))
 {
     $_SESSION['cart']      =   array();    
     $_SESSION['total_items']   =   0;
     $_SESSION['total_price']   =      '0.00';
 }

// Defaults to index view unless user requests different view
$view = empty($_GET['view']) ? 'index' : $_GET['view'];

// Used for layout
$controller = 'shop';

 // checks which view is requested by user.
 switch ($view) {

   case "index":

         $products = find_products();

   break;

   case "add_to_cart":
         $id = $_GET['id'];
         $add_item = add_to_cart($id);
         $_SESSION['total_items'] = total_items($_SESSION['cart']);
         $_SESSION['total_price'] = total_price($_SESSION['cart']);
         header('Location: index.php');
   break;   

   case "update_cart":
         update_cart();
         $_SESSION['total_items'] = total_items($_SESSION['cart']);
         $_SESSION['total_price'] = total_price($_SESSION['cart']);
         header('Location: index.php?view=checkout'); 
   break;        

   case "checkout":

       if ( 0    < $_SESSION['total_price'] && $_SESSION['total_price'] <= 100  )
       {
           $shipping = 11.95;
       }

       if ( 100  < $_SESSION['total_price'] && $_SESSION['total_price'] <= 250  )
       {
           $shipping = 18.50;
       }

       if ( 250  < $_SESSION['total_price'] && $_SESSION['total_price'] <= 500  )
       {
           $shipping = 25.50;
       }

       if ( 500  < $_SESSION['total_price'] && $_SESSION['total_price'] <= 1000 )
       {
           $shipping = 36.00;
       }

       if ( 1000 < $_SESSION['total_price'] && $_SESSION['total_price'] <= 2500 )
       {
           $shipping = 64.50;
       }

       else if ( 2500 < $_SESSION['total_price'] )
       {
           $shipping = 250.00;
       }

   break;        

 }

// includes layout for controller
include( $_SERVER['DOCUMENT_ROOT'].'/'.'lensClensProducts/views/layouts/'.$controller.'.php' );

?> 
```

我在最后一行遇到问题 include($_SERVER['DOCUMENT_ROOT'].'/'.'gamelist/views/layouts/'.$controller.'.php' );

PS 此代码的第 16 行还有一个回显

特别是 ['DOCUMENT_ROOT'] 我猜这是一个全局变量。

我是这个出现的本地主机并且工作正常，在 go daddy 这没有做任何事情，但给我一个错误

警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已经由 /home/content/27/6235127/html/gamelist/index.php:4 中的 /home/content 发送/27/6235127/html/gamelist/index.php 第 16 行

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 已在 /home/content 中发送标头（输出开始于 /home/content/27/6235127/html/gamelist/index.php:4） /27/6235127/html/gamelist/index.php 第 16 行 /gamelist/views/layouts/index.php

我怀疑这与服务器名称有关，我使用了 lensclens3.db.6235127.hostedresource.com 的服务器名称，但这不起作用。

我知道上面的这个服务器名称在这个购物车的另一个​​页面上使用（和工作）时有效。

我应该使用另一个服务器名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:44:28.400

页面以特定顺序从服务器发送，首先是标题，然后是页面内容。您可以使用 PHP 中的各种函数来设置或修改标头，但如果您不自己制作，服务器会自动编写一些默认值。

像 echo 这样的命令将发送页面内容，您可以在页面上实际看到/读取的信息。

诸如 session_start 之类的命令会发送标头，即传递给浏览器的不可见信息。在 session_start 的情况下，信息是跟踪信息，很像 cookie。

通过使用 echo 命令，您告诉服务器开始提供内容，并且它必须发送标头。如果在标头已发送后使用 session_start，PHP 会抛出警告说“我不能使用此命令，因为标头已发送并且我开始提供内容。”

# android - 相同源代码的不同 APK - Android

> ID：10713741
> 
> 赞同：1
> 
> 时间：2012-05-23T05:04:47.710
> 
> 标签：android, android-emulator, android-widget, android-ndk, java-native-interface

附图显示了在两台不同机器上从同一项目生成的 APK（解压缩）。

![不同机器同源的APK内容](../Images/e61acb97011adc9d9e22d66d81857ce0.png)

如您所见，两种场景中的APK内容不同。在第二个APK edu中，lib,or,Android.mk,classes.dex,LICENSE.txt,pocketsphinx.i,pocketsphinx_wrap.c都不存在。我做不明白为什么在不同机器上使用相同代码的 APK 内容会有这种差异。显然，第二个 APK 没有给我正确的输出，在尝试启动时，崩溃并显示以下日志：

```
01-01 00:17:13.092: DEBUG/dalvikvm(3458): Late-enabling CheckJNI
01-01 00:17:13.100: INFO/ActivityManager(2302): Start proc or.exp.voicereco for activity or.exp.voicereco/.CameraMain: pid=3458 uid=10070 gids={1015}
01-01 00:17:13.124: INFO/dalvikvm(2302): Zip is good, but no classes.dex inside, and no .odex file in the same directory
01-01 00:17:13.124: WARN/PackageManager(2302): IOException reading apk: /system/app/PocketSphinxDemo.apk
01-01 00:17:13.124: WARN/PackageManager(2302): java.io.IOException: /system/app/PocketSphinxDemo.apk
01-01 00:17:13.124: WARN/PackageManager(2302):     at dalvik.system.DexFile.isDexOptNeeded(Native Method)
01-01 00:17:13.124: WARN/PackageManager(2302):     at com.android.server.pm.PackageManagerService.performDexOptLI(PackageManagerService.java:3172)
01-01 00:17:13.124: WARN/PackageManager(2302):     at com.android.server.pm.PackageManagerService.performDexOpt(PackageManagerService.java:3157)
01-01 00:17:13.124: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.ensurePackageDexOpt(ActivityManagerService.java:1869)
01-01 00:17:13.124: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.attachApplicationLocked(ActivityManagerService.java:3876)
01-01 00:17:13.124: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.attachApplication(ActivityManagerService.java:4013)
01-01 00:17:13.124: WARN/PackageManager(2302):     at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:351)
01-01 00:17:13.124: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1616)
01-01 00:17:13.124: WARN/PackageManager(2302):     at android.os.Binder.execTransact(Binder.java:338)
01-01 00:17:13.124: WARN/PackageManager(2302):     at dalvik.system.NativeStart.run(Native Method)
01-01 00:17:13.131: INFO/dalvikvm(2302): Zip is good, but no classes.dex inside, and no .odex file in the same directory
01-01 00:17:13.131: INFO/ActivityManager(2302): app/or.exp.voicereco[RESUMED] app.idle/false ...realStartActivityLocked
01-01 00:17:13.131: WARN/PackageManager(2302): IOException reading apk: /system/app/PocketSphinxDemo.apk
01-01 00:17:13.131: WARN/PackageManager(2302): java.io.IOException: /system/app/PocketSphinxDemo.apk
01-01 00:17:13.131: WARN/PackageManager(2302):     at dalvik.system.DexFile.isDexOptNeeded(Native Method)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.pm.PackageManagerService.performDexOptLI(PackageManagerService.java:3172)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.pm.PackageManagerService.performDexOpt(PackageManagerService.java:3157)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.ensurePackageDexOpt(ActivityManagerService.java:1869)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.am.ActivityStack.realStartActivityLocked(ActivityStack.java:601)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.attachApplicationLocked(ActivityManagerService.java:3925)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.attachApplication(ActivityManagerService.java:4013)
01-01 00:17:13.131: WARN/PackageManager(2302):     at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:351)
01-01 00:17:13.131: WARN/PackageManager(2302):     at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1616)
01-01 00:17:13.131: WARN/PackageManager(2302):     at android.os.Binder.execTransact(Binder.java:338)
01-01 00:17:13.131: WARN/PackageManager(2302):     at dalvik.system.NativeStart.run(Native Method)
01-01 00:17:13.147: INFO/dalvikvm(3458): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-01 00:17:13.155: DEBUG/AndroidRuntime(3458): Shutting down VM
01-01 00:17:13.155: WARN/dalvikvm(3458): threadid=1: thread exiting with uncaught exception (group=0x40b021f8)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458): FATAL EXCEPTION: main
01-01 00:17:13.155: ERROR/AndroidRuntime(3458): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{or.exp.voicereco/    or.exp.voicereco.CameraMain}: java.lang.ClassNotFoundException: or.exp.voicereco.CameraMain
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1989)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.ActivityThread.access$600(ActivityThread.java:125)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1149)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.os.Looper.loop(Looper.java:137)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.ActivityThread.main(ActivityThread.java:4368)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at java.lang.reflect.Method.invoke(Method.java:511)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at dalvik.system.NativeStart.main(Native Method)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458): Caused by: java.lang.ClassNotFoundException: or.exp.voicereco.CameraMain
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1873)
01-01 00:17:13.155: ERROR/AndroidRuntime(3458):     ... 11 more
01-01 00:17:13.155: WARN/ActivityManager(2302):   Force finishing activity or.exp.voicereco/.CameraMain 
```

有人可以告诉我为什么当我从一台机器而不是在另一台机器上编译和运行应用程序时得到正确的输出。而对于所有其他应用程序，生成的 APK 在第二台机器上是完美的。

任何帮助深表感谢。

问候，阿内斯

PS：这是一个基于ndk的应用程序。

# drupal - Drupal - 搜索 API - 视图 - Solr 索引：如何实现日期过滤器？

> ID：10713743
> 
> 赞同：0
> 
> 时间：2012-05-23T05:04:51.657
> 
> 标签：drupal, views

希望在 Solr 索引视图中加入日期过滤器。目前唯一的选择是用户手动输入文本日期以按日期过滤。使用“内容”视图中可用的“之间”功能公开日期过滤器并按月/日/年搜索会很好。创建“Solr Index”视图似乎会删除该功能。

我注意到 Search API 模块中的 handler_filter.inc 中缺少 Between 运算符：

```
public function operator_options() {
    return array(
      '<' => t('Is smaller than'),
      '<=' => t('Is smaller than or equal to'),
      '=' => t('Is equal to'),
      '<>' => t('Is not equal to'),
      '>=' => t('Is greater than or equal to'),
      '>' => t('Is greater than'),
    );
  } 
```

我们还需要修改哪些其他代码才能获得对用户更友好的日期过滤器供用户查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:04:16.597

你可以使用类似的东西：

```
$or = $query->createFilter('AND');
$or->condition('created', $start_date, '>=');
$or->condition('created', $end_date, '<=');
$query->filter($or); 
```

在`hook_search_api_query_alter`.

# jquery - 如何在 JQuery 中使用 .class 进行动画处理？

> ID：10713746
> 
> 赞同：0
> 
> 时间：2012-05-23T05:05:05.600
> 
> 标签：jquery, animation, svg

我可以动画#ID Div 标签来移动，但我不能调用 .class Div 标签来移动。我怎样才能正确地做到这一点？

```
.myClass {
                width: 40px; height: 40px;float:left;padding: 1px; margin:3px; 
                position:absolute; left:50px; top:60px; background:blue; color:white;
          } 
```

在 HTML 中：

```
<div class="myClass">Insert image2</div>
<div class="myClass"><img src="jef-frog.gif"width="50">DIV myCLASS</img></div>

function randomRange(min,max) {
                return Math.random() * (max-min) + min;
            }

            /* Generate some random starting position */
            var startmyClassX = randomRange(50,100);
            var startmyClassY = randomRange(50,100);

var item2 = $(".myClass"),cycle1;

function runItem2() {
                /* Set a the starting position to be random by editing the css */
                $(".myClass").css("left", startItem2X+"px");
                $(".myClass").css("top", startItem2Y+"px");
                $(".myClass").svg(onLoad);

                (cycle2 = function() {
                 var m = randomRange(50,100);
                 var n = randomRange(75,150);
                 myClass.animate({top:'+='+m, left:'+='+n},2000);
                 myClass.animate({left:'-='+n},2000);
                 myClass.animate({left:'+='+n, top:'-='+n},2000);
                 myClass.animate({left:'-='+n},2000)
                 myClass.animate({top:'+='+m},2000,cycle2)

                 })();

            }

runItem2(); 
```

任何人都可以帮助解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:06:05.430

您有一个变量`var item2 = $(".myClass")`，但稍后在您应该使用的代码中`item2`使用`myClass`：

```
myClass.animate({top:'+='+m, left:'+='+n},2000);
...
myClass.animate({top:'+='+m},2000,cycle2) 
```

将变量重命名为`myClass`或将后面的代码更改为使用`item2`. （您还声明了一个变量`cycle1`，然后使用`cycle2`.）

请注意，您提供给该[`.animate()`方法](http://api.jquery.com/animate/)的回调将在每个动画元素调用一次，因此通过`$(".myClass")`匹配两个元素，您将在每次重新启动循环时将动画数量加倍。

另请注意，在您的演示中，您有两个独立移动的东西，但是如果您使用该动画函数中的同一类为所有元素设置动画，那么所有元素将以相同的方式移动。

# python - 使用 pyserial ser.read 结果附加了 \r

> ID：10713747
> 
> 赞同：2
> 
> 时间：2012-05-23T05:05:19.413
> 
> 标签：python, pyserial

以下是获取连接到 HA7E 1-wire 适配器的 DS18B20 的 1-wire 序列号。ASCII“S”是获取序列号的代码。

```
import serial
ser = serial.Serial("/dev/cu.USA19H1d2P1.1",9600, bytesize=8, parity='N', stopbits=1,timeout=0)
ser.write("S")
ser.read(64) 
```

上面运行的结果是'69000001CFD7E328\r'

有没有办法停止 \r 附加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:24:15.497

您可能应该将“\r”视为设备协议的一部分。那么问题就变成了：“我如何丢弃字符串末尾我不感兴趣的协议垃圾？”

答案很简单：

```
raw_serial = ser.read(64)
serial_number = string.rstrip(raw_serial, '\r') 
```

# iphone - 拍摄完成后，UIActivityIndi catorView 未显示在相机覆盖视图上

> ID：10713748
> 
> 赞同：2
> 
> 时间：2012-05-23T05:05:20.910
> 
> 标签：iphone, ios, xcode, activity-indicator, camera-overlay

我在相机 OverlayView.xib 上有一个 UIActivityIndi​​catorView 中间。我通过反复调用**[cameraPicker takePicture]**来拍摄多个快照。我想在以下代码完成所有快照时显示指示器：

```
- (void)didTakePicture:(UIImage *)picture {   //Called from picker didFinishPickingMediaWithInfo

   [self.capturedImages addObject:picture];
   snapsCount ++;
   if (snapsCount < noOfSnaps) {
      [cameraPicker takePicture];
   }else {
     overlayView.indicator.hidden = NO;  //Not showing indicator
     [overlayView.indicator startAnimating]; //Not working
   }
} 
```

谁能告诉我不显示的原因。通过以下条件，我可以在拍摄最后一张快照之前显示指标，但为什么最后不能。

```
if (snapsCount < noOfSnaps) {
    if (snapsCount+1 == noOfSnaps) {

       overlayView.indicator.hidden = NO;  //Show the indicator
       [overlayView.indicator startAnimating];   //Work nicely
       overlayView.userMessage.text = @"Processing";
    }
    [cameraPicker takePicture];
} 
```

有没有人遇到过这个问题并且知道在所有快照完成后显示指标的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:33:01.753

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

if (snapsCount > noOfSnaps) {
overlayView.indicator.hidden = NO;  
[overlayView.indicator startAnimating];
}
[NSTimer scheduledTimerWithTimeInterval:0.3
                                 target:self 
                               selector:@selector(didTakePicture:) 
                               userInfo: [info objectForKey:UIImagePickerControllerOriginalImage] 
                                repeats:NO];
} 
```

# javascript - Javascript - 验证，仅限数字

> ID：10713749
> 
> 赞同：41
> 
> 时间：2012-05-23T05:05:23.607
> 
> 标签：javascript, validation, numbers

我试图让我的登录表单仅验证是否只输入了数字。如果输入只是数字，我可以工作，但是当我在数字后键入任何字符时，它仍然会验证等。12akf 将工作。凌晨 1 点会工作。我怎样才能克服这个？

登录部分

```
<form name="myForm">
    <label for="firstname">Age: </label>
    <input name="num" type="text" id="username" size="1">
    <input type="submit" value="Login" onclick="return validateForm()">

function validateForm()
{

    var z = document.forms["myForm"]["num"].value;
    if(!z.match(/^\d+/))
        {
        alert("Please only enter numeric characters only for your Age! (Allowed input:0-9)")
        }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-23T05:06:19.497

对`/^\d+$/`. `$`表示“行尾”，因此初始运行数字之后的任何非数字字符都将导致匹配失败。

**编辑：**

RobG 明智地建议更简洁`/\D/.test(z)`。此操作测试您想要的相反。`true`如果输入包含*任何*非数字字符，则返回。

简单地省略否定`!` 和使用`if(/\D/.test(z))`。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-17T05:57:23.927

这里是如何验证输入只接受数字这将接受像 123123123.41212313 这样的数字

```
<input type="text" 
onkeypress="if ( isNaN(this.value + String.fromCharCode(event.keyCode) )) return false;"
/> 
```

这不会接受输入点（。），所以它只会接受整数

```
<input type="text" 
onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;"
/> 
```

这样，您将不允许用户输入除数字以外的任何内容

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-07-03T00:02:43.673

这个对我有用：

```
function validateForm(){

  var z = document.forms["myForm"]["num"].value;

  if(!/^[0-9]+$/.test(z)){
    alert("Please only enter numeric characters only for your Age! (Allowed input:0-9)")
  }

} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-04-07T08:52:43.893

```
function validateNumber(e) {
            const pattern = /^[0-9]$/;

            return pattern.test(e.key )
        }
```

```
 <input name="username" id="username" onkeypress="return validateNumber(event)">
```

这种方法不锁定numlock数字、箭头、主页、结束按钮等

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-16T05:45:35.303

迟到的答案，但这可能会对某人有所帮助

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

使用会像

```
nn=document.forms["myForm"]["num"].value;

ans=isNumber(nn);

if(ans)
{
    //only numbers
} 
```

这个答案是从这里以巨大的票数找到的

[在 JavaScript 中验证数字 - IsNumeric()](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-13T00:22:42.787

最简单的解决方案。

感谢我的伙伴给了我这个答案。

您可以像这样在**输入文本框上设置****onkeypress**事件：

 **`onkeypress="validate(event)"`

然后使用这样的正则表达式：

```
function validate(evt){
     evt.value = evt.value.replace(/[^0-9]/g,"");
} 
```

它将扫描并删除与字段中的数字不同的任何字母或符号。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-24T06:22:17.213

正则表达式很棒，但为什么不在尝试使用它之前确保它是一个数字呢？

```
function addemup() {
var n1 = document.getElementById("num1");
var n2 = document.getElementById("num2");
sum = Number(n1.value) + Number(n2.value);
    if(Number(sum)) {
        alert(sum);
        } else {
            alert("Numbers only, please!");
        };
    }; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-26T06:25:17.670

```
function ValidateNumberOnly()
{
if ((event.keyCode < 48 || event.keyCode > 57)) 
{
   event.returnValue = false;
}
} 
```

此函数将只允许文本字段中的数字。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-27T16:49:58.870

> 无需输入限制的长代码，只需尝试此代码即可。
> 
> 它还接受有效的 int 和 float 两个值。

## Javascript 方法

```
onload =function(){ 
  var ele = document.querySelectorAll('.number-only')[0];
  ele.onkeypress = function(e) {
     if(isNaN(this.value+""+String.fromCharCode(e.charCode)))
        return false;
  }
  ele.onpaste = function(e){
     e.preventDefault();
  }
}
```

```
<p> Input box that accepts only valid int and float values.</p>
<input class="number-only" type=text />
```

## jQuery 方法

```
$(function(){

  $('.number-only').keypress(function(e) {
	if(isNaN(this.value+""+String.fromCharCode(e.charCode))) return false;
  })
  .on("cut copy paste",function(e){
	e.preventDefault();
  });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p> Input box that accepts only valid int and float values.</p>
<input class="number-only" type=text />
```

以上答案适用于最常见的用例 - 将输入验证为数字。

> 但是为了允许一些特殊情况，如负数并在删除之前向用户显示无效的击键，所以下面是这种特殊用例的代码片段。

```
$(function(){

  $('.number-only').keyup(function(e) {
        if(this.value!='-')
          while(isNaN(this.value))
            this.value = this.value.split('').reverse().join('').replace(/[\D]/i,'')
                                   .split('').reverse().join('');
    })
    .on("cut copy paste",function(e){
    	e.preventDefault();
    });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p> Input box that accepts only valid int and float values.</p>
<input class="number-only" type=text />
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-12-12T06:18:11.080

我认为我们不接受长结构编程，我们将添加每次拍摄代码，请参见下面的答案。

```
<input type="text" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" >
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-06-27T10:38:59.183

```
var elem = document.getElementsByClassName("number-validation"); //use the CLASS in your input field.
for (i = 0; i < elem.length; i++) {
   elem[i].addEventListener('keypress', function(event){
      var keys = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0];
      var validIndex = keys.indexOf(event.charCode);
      if(validIndex == -1){
         event.preventDefault();
      }
  });
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-11-26T17:27:31.153

如果您使用的是 React，只需执行以下操作：

```
<input
  value={this.state.input}
  placeholder="Enter a number"
  onChange={e => this.setState({ input: e.target.value.replace(/[^0-9]/g, '') })}
/> 
```

```
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
<script type="text/babel">
class Demo extends React.Component {
    state = {
      input: '',
    }

    onChange = e => {
      let input = e.target.value.replace(/[^0-9]/g, '');
      this.setState({ input });
    }

    render() {
        return (
          <div>
            <input
              value={this.state.input}
              placeholder="Enter a number"
              onChange={this.onChange}
            />
            <br />
            <h1>{this.state.input}</h1>
           </div>
        );
    }
}

ReactDOM.render(<Demo />, document.getElementById('root'));
</script>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-19T11:10:37.320

使用您已有的表格：

```
var input = document.querySelector('form[name=myForm] #username');

input.onkeyup = function() {
    var patterns = /[^0-9]/g;
    var caretPos = this.selectionStart;

    this.value = input.value.replace(patterns, '');
    this.setSelectionRange(caretPos, caretPos);
} 
```

这将在释放键后删除所有非数字。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-17T16:16:58.967

// 我使用这个 jquery 它工作得很好，只需将类 nosonly 添加到任何应该是数字的文本框：

```
$(document).ready(function () {
       $(".nosonly").keydown(function (event) {
           // Allow only backspace and delete
           if (event.keyCode == 46 || event.keyCode == 8) {
               // let it happen, don't do anything
           }
           else {
               // Ensure that it is a number and stop the keypress
               if (event.keyCode < 48 || event.keyCode > 57) {
              alert("Only Numbers Allowed"),event.preventDefault();
               }
           }
       });
   }); 
```**

# html - 相对于包装器 div HTML CSS 定位固定元素

> ID：10713752
> 
> 赞同：0
> 
> 时间：2012-05-23T05:05:58.730
> 
> 标签：html, css, position

我希望将浮动在下一页窗口右侧的框定位。

[http://mikegeorge.org/acej/index.html](http://mikegeorge.org/acej/index.html)

我想将它相对于其中包含所有文本的白色 div 定位，因此它不是附加到窗口的一侧，而是从内容区域浮动 10-20 像素。

CSS 源代码

```
#float-box {
position: fixed;
right: 10px;
top: 100px;

width: 150px;
padding: 10px 5px;
text-align: center;

background-color: #fff;

border: 5px solid rgba(180, 180, 180, .7);
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;

display: none;
}

.fb-1 {
height: 62px;
margin-bottom: 10px;
}

.fb-2 {
height: 60px;
margin-bottom: 10px;
}

.fb-3 {
height: 60px;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:12:24.370

你需要把它放进去`social-float`并`wrapper div`更新它的样式`right:-160px`。`160px`是宽度，`social-float`更多`10px`是额外边距。不要忘记添加`position:relative`到`#wrapper`

请`social-float`用下面的css替换

```
position: fixed;
left: 50%;
top: 100px;
width: 150px;
padding: 10px 5px;
text-align: center;
background-color: 
white;
border: 5px solid 
rgba(180, 180, 180, .7);
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;
display: none;
margin-left: 380px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:20:47.023

将你的 div 移动到#Wraper 中，

```
<div id="wrapper">

  <p>Curabitur id neque eget justo ultrices semper. Suspendisse eget sapien eros, sed dapibus justo. Fusce ullamcorper, felis vitae consequat malesuada, tortor metus mattis ligula, nec pellentesque nisl sapien vel velit. Sed augue sem, malesuada ut elementum dictum, blandit vitae lorem. Aliquam eu nulla neque, vitae feugiat tortor. In id augue nisl. Donec congue arcu vel mi semper sit amet porttitor tortor condimentum. Donec non eros tempor dolor bibendum venenatis. Donec ornare imperdiet leo, non venenatis odio mollis et. Suspendisse in sapien eu sapien egestas elementum.    </p>
  <p>Sed cursus consequat euismod. Pellentesque sagittis, odio et luctus sagittis, tellus mauris malesuada leo, in tincidunt nisl urna ac urna. Morbi vestibulum faucibus elit vel volutpat. Aliquam erat volutpat. Donec posuere velit vitae risus mattis molestie. Curabitur posuere egestas justo, quis iaculis leo convallis ut. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Ut tristique augue et leo consectetur in porttitor felis euismod. Aliquam ac mi condimentum arcu euismod molestie.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor adipiscing turpis, eu tristique tellus congue sit amet. In non ipsum risus. In hac habitasse platea dictumst. Sed eu mauris nulla. Ut vitae arcu urna, eu sodales enim. Curabitur porta elementum diam at adipiscing. Sed consectetur convallis neque, eu fermentum lectus mattis in. Ut tristique feugiat elementum. Quisque rutrum dui quis massa commodo id tempor dui vulputate. </p>
  <p>In nisi felis, venenatis at pellentesque et, bibendum eget justo. Sed imperdiet commodo rutrum. Proin massa felis, porttitor et commodo at, semper eu sapien. Curabitur eu neque libero. Proin consequat sagittis felis, ut ultricies orci auctor eget. Sed a vehicula risus. Vivamus nulla nisi, lobortis a semper nec, lobortis vel felis. Cras et sem magna, vel ullamcorper justo. Quisque volutpat massa eget leo blandit ultricies eget non nisl. Nunc vel lacus quis risus placerat consectetur vitae quis lectus. Nullam a ante ut nibh facilisis viverra. Nullam mollis, risus sit amet eleifend mattis, massa lorem tempor mauris, sed dictum nisl enim accumsan velit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam in faucibus enim. Nulla at mi orci, vel commodo felis. Donec ac tristique ante. </p>
  <p>Nunc eu tellus lectus. Vivamus tellus orci, scelerisque a gravida id, suscipit ut purus. Duis eu elit magna. Mauris quis tellus tellus. Fusce sed lorem in lectus aliquam cursus. Etiam orci lectus, fringilla sed imperdiet id, pharetra ut nisi. In hac habitasse platea dictumst. Vestibulum sed metus vel justo pulvinar vehicula ut lobortis mi. Cras viverra porta enim et malesuada. Quisque ullamcorper justo turpis, eu consequat ligula. Nam eget massa enim, in dictum felis. Nam cursus augue eu augue dignissim venenatis. Vestibulum in dignissim odio. Vivamus pulvinar, diam in tempor varius, tortor dolor tempus arcu, vel fringilla lectus eros at mi. </p>
**<div id="social-float" style="display: block; ">
    <div class="sf-twitter">
        Yo! Sign up fo' this!
    </div>

    <div class="sf-facebook">
        You know you want to!
    </div>

    <div class="sf-plusone">
        <a href="http://lulzdaily.com/no-im-not-drunk" target="_blank">Click Me, Por Favor!</a>

    </div>
</div>**
</div> 
```

在css下面使用，

```
#social-float {
left: 1020px;
top: 100px;
width: 150px;
padding: 10px 5px;
text-align: center;
background-color: 
white;
border: 5px solid 
rgba(180, 180, 180, .7);
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;
display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:26:02.687

请将您的`social-float`id 样式替换为：

```
#social-float {
    background-color: #FFFFFF;
    border: 5px solid rgba(180, 180, 180, 0.7);
    border-radius: 8px 8px 8px 8px;
    display: none;
    float: right;
    margin-left: 715px;
    padding: 10px 5px;
    position: fixed;
    text-align: center;
    top: 100px;
    width: 150px;
} 
```

# javascript - 为什么window.opener='x';window.close();在 Firefox 中不起作用

> ID：10713755
> 
> 赞同：0
> 
> 时间：2012-05-23T05:06:20.810
> 
> 标签：javascript, jquery, window.closed

我找到了这段代码，并一直在使用它来自动关闭窗口......它在 Chrome 中完美运行，

我怎样才能在Firefox中做到这一点？还是有更好的方法来关闭当前窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T05:56:11.727

它在 FF 中不起作用，因为它是设计使然。

您只能[关闭脚本打开的窗口](https://developer.mozilla.org/En/DOM/window.close)。即使您现在可能找到使其工作的技巧，但是一旦 FF 在下一个版本中对其进行修补，您的脚本将再次停止工作。

我的建议是改变你的页面设计。可能使用模态窗口或`div`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:23:42.077

你应该试试这个技巧

[如何使用 Javascript 在 FireFox 中关闭窗口或选项卡](http://www.yournewdesigner.com/css-experiments/javascript-window-close-firefox.html)

> 第一步是让浏览器误以为它是用脚本打开的……
> 
> ```
> window.open('','_parent',''); 
> ```
> 
> 这会在目标框架/窗口中打开一个新页面（不存在），（_parent 当然是执行脚本的窗口），并定义诸如窗口大小等参数，（在这种情况下，没有定义为不需要）。现在浏览器认为脚本打开了一个页面，我们可以以标准方式快速关闭它......
> 
> ```
> window.close(); 
> ```
> 
> 你有它 - 我告诉过你这很简单！如果您没有遵循，这里是两个简单步骤的完整解决方案：
> 
> 1.  **将以下代码复制/粘贴到页面顶部...**

```
 <script language="javascript" type="text/javascript">
     function closeWindow() {
     window.open('','_parent','');
     window.close();
     }
     </script> 
```

> 1.  **像这样设置你的链接：**

```
<a href="javascript:closeWindow();">Close Window</a>

or like this:
<input type="button" value="Close Window" onclick="closeWindow()"/> 
```

# vb.net - GET SET 属性与仅将其声明为正常的目的是什么？

> ID：10713759
> 
> 赞同：1
> 
> 时间：2012-05-23T05:07:00.503
> 
> 标签：vb.net

我一直想知道以下两者之间有什么区别：

```
Public Property ProgressMaxValue() As Integer
    Get
        Return maxval
    End Get
    Set(ByVal Value As Integer)
        maxval = Value
    End Set
End Property 
```

对比

```
Dim progressMaxValue as Integer
ProgressMaxValue = 1184 
```

做同样的事情对吗？我检查了其他人的代码，并且看到越来越多的第一个示例。只是想弄清楚重点，区别以及人们使用它的原因，哈哈。也许我错过了备忘录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:10:52.893

您正在为您的第一个代码创建一个`Property`。只要它已被实例化，这也将允许您在其他类中公开它。第二个只是类内可用的变量，甚至只是过程内的范围。两者内部存在差异。您还可以在您的属性中添加计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:11:50.290

> 只是宣布它是正常的......

在这种情况下没有“正常”。这两个语句实际上是完全不同的东西，一直到 IL，即一个属性和一个字段。当您通过读取或赋值使用属性的 getter 或 setter 时，您实际上是在调用一个方法。

在您的特定示例中，属性的 getter/setter 方法读取和更新字段，但由于它们是方法，因此它们可以执行您希望它们执行的任何操作。

至于*为什么*，这已被广泛讨论，例如[此处](http://www.codinghorror.com/blog/2006/08/properties-vs-public-variables.html)和[此处](https://stackoverflow.com/questions/2374416/why-use-simple-properties-instead-of-fields-in-c)（c# 文章，但在这种情况下可与 VB.Net 互换）。使用属性的一个广泛（但很好）的理由是它对外部调用者隐藏了类的内部。

# paypal - PayPal Adaptive Payment Checkout 隐藏收件人电子邮件？

> ID：10713760
> 
> 赞同：0
> 
> 时间：2012-05-23T05:07:00.747
> 
> 标签：paypal, paypal-adaptive-payments

我对使用 PayPal Adaptive Payments API 很陌生，我们有两个接收者用于任何付款。在结帐过程中，收款人的电子邮件地址会显示在收据页面以及电子邮件发票上。有什么办法可以关闭它，所以只显示名称，而不是电子邮件地址？我无法在他们的文档中找到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:21:12.043

根据我与 PayPal 交谈的了解，他们的政策是显示所有参与交易的用户。据我所知，没有切换；仅当用户的姓名或公司名称不可用时，才会显示用户的电子邮件。
另外，我相信该电子邮件无论如何都会显示在确认电子邮件中。

# iphone - 在 iOS 上，为什么视图框架的高度在旋转后几乎保持不变？

> ID：10713769
> 
> 赞同：6
> 
> 时间：2012-05-23T05:08:42.330
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

在*iPad 上*`ViewController.m`，如果我们在点击事件处理程序中打印出视图的框架高度：

 *```
NSLog(@"Height of main view is %f", self.view.frame.size.height); 
```

然后在纵向模式下，值为 1004（设备状态行为 20 像素，因此 1024 - 20 = 1004），如果设备旋转到横向模式，我预计它约为 768 或 748，但打印的值是实际上是1024。**（更新：如果应用程序以横向模式启动，那么没有旋转，它也打印为1024）。** 为什么会这样，是否有经验可以期望获得 748 或 768 的值？（是否有不止一种方法可以做到这一点？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:42:22.253

在 Apple 的文档中，关于 UIView 的框架：

> 警告：如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

所以你应该使用*bounds*属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:22:46.190

您可以改为以编程方式管理方向并覆盖 willRotateToInterfaceOrientation 方法。看路：

```
#define IPAD_SIZE_PORTRAIT          CGSizeMake(768, 960)
#define IPAD_SIZE_LANDSCAPE         CGSizeMake(1024, 704)

-(void)relayoutSubviews:(UIInterfaceOrientation)orientation
{
CGSize  scrSize;

if ((orientation == UIInterfaceOrientationLandscapeLeft) || (orientation == UIInterfaceOrientationLandscapeRight))
{
    scrSize = IPAD_SIZE_LANDSCAPE;
}
else
{
    scrSize = IPAD_SIZE_PORTRAIT;
}

self.view.bounds = CGRectMake(0, 0, scrSize.width, scrSize.height);
self.view.frame = CGRectMake(0, 0, scrSize.width, scrSize.height);
}

-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
[self relayoutSubviews:toInterfaceOrientation];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:16:23.250

这背后的原因是，当您旋转设备时，视图的框架会发生变化以适应状态栏，但实际上并不会旋转视图的框架。设备只是将视图呈现为旋转状态，而视图实际上并未旋转。我相信子视图会受到这种变化的影响，但整体视图不会。*

# c# - 显示字符串中的下一组单词

> ID：10713777
> 
> 赞同：0
> 
> 时间：2012-05-23T05:09:51.453
> 
> 标签：c#, asp.net, regex, string, string.format

我有以下代码：

```
 int numberOfWords = 50;

 string regexMatch = string.Format(@"^(\w+\b.*?){{" + numberOfWords + "}}");
 string firstWords = Regex.Match(result, regexMatch).Value; 
```

此代码显示字符串中的前 50 个单词。现在我想显示接下来的 50 个单词（第 51 个单词到第 100 个单词）。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:13:41.463

您可以使用相同的正则表达式，但从前 5o 个单词开始。由于您在 firstWords 中有前 50 个单词，所以我们必须在这 50 个单词之后开始。因此，我们将在 firstWords 中的 50 个单词之后获取结果的子字符串。firstWords.Length 将成为第二个 5o 单词的正则表达式的新起点。

```
 string secondWords = Regex.Match(result.Substring(firstWords.Length).Trim(), regexMatch).Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:26:43.903

如果要匹配多个`string`s，

像这样的代码：

```
List<string> Words = new List<string>();
for(int i = 0; (result.Length - (i * numberOfWords)) < numberOfWords; i++)
{
    Words.Add(Regex.Match(result.Substring(i * numberOfWords).Trim(), regexMatch).Value)
} 
```

您将获得字符串中存在的 50 个单词的列表！但是，如果末尾的`string`单词少于 50 个，则不会将这些单词添加到`Words`列表中。

# java - java邮件回复格式？

> ID：10713779
> 
> 赞同：0
> 
> 时间：2012-05-23T05:10:02.017
> 
> 标签：java, smtp, imap, jakarta-mail

我正在尝试使用 Java 编写 Gmail 自动回复器，使用 IMAP 读取电子邮件并使用 SMTP 回复它们。我使用 imap 阅读电子邮件，并在回复发送电子邮件的人时使用 SMTP。我希望我发送的电子邮件具有回复格式，与您在 gmail 中单击回复时获得的格式相同，其中包括发件人最初发送的日期和消息。Javamail中是否有一种方法可以做到这一点？如果不是，最好的方法是什么？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:32:28.740

不。JavaMail 回复方法将创建一个带有适当标题的新消息，但由您来构建消息的正文，这“只是”一个字符串操作问题。

# regex - VBA 文本文件搜索

> ID：10713780
> 
> 赞同：3
> 
> 时间：2012-05-23T05:10:02.757
> 
> 标签：regex, vba, outlook

我正在尝试编写一个 VBA 程序，在文本文件中搜索用户名以查找用户的 IP 地址。例如，给定下面的输入，如果我搜索`Chris Trucker`我想`192.168.130.22`在消息框中看到。

```
> 192.168.2.151,Super Fly,ABC\Flys,2012-05-18 16:11:29 
> 192.168.2.200,Rain,ABC\rain,2012-05-17 15:42:05 
> 192.168.2.210,Snow,ABC\Snow,2012-05-16 08:24:39 
> 192.168.2.78,Wind,ABC\wind,2012-05-02 19:24:06 
> 192.168.130.21,Mike Jordan,ABC\Jordanm,2012-05-18 17:28:11 
> 192.168.130.22,Chris Trucker,ABC\Truckerc,2012-05-18 17:28:11 
> 192.168.130.23,Chris Jackson,ABC\JacksonC,2012-05-18 17:04:39 
```

尝试了以下，但它是 VBScript

```
Const ForReading = 1

Set objRegEx = CreateObject("VBScript.RegExp")
objRegEx.Pattern = "JacksonC"  

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("\\server\tsusers\Users.txt", ForReading)

Do Until objFile.AtEndOfStream
    strSearchString = objFile.ReadLine
    osakapc = Left(strSearchString,14)
    Set colMatches = objRegEx.Execute(strSearchString)

    If colMatches.Count = 1 Then 
        For Each strMatch in colMatches  

        Next
    End If
Loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:55:04.333

这是我的做法：

```
Option Explicit

Sub tester()
    Dim inputFilePath As String
    inputFilePath = "\\server\tsusers\Users.txt"

    MsgBox GetUserIpAddress("Chris Trucker", inputFilePath) 
                            ' or "JacksonC" or "Bozo" or whatever

End Sub

Function GetUserIpAddress(whatImLookingFor As String, _
    inputFilePath As String)
    Const ForReading = 1

    Dim foundIt As Boolean
    Dim thisLine As String
    Dim ipAddress As String
    Dim FSO As Object
    Dim filInput As Object

    Set FSO = CreateObject("Scripting.FileSystemObject")
    Set filInput = FSO.OpenTextFile(inputFilePath, ForReading)

    foundIt = False
    Do Until filInput.AtEndOfStream
        thisLine = filInput.ReadLine
        If InStr(thisLine, whatImLookingFor) <> 0 Then
            foundIt = True
            ipAddress = Replace((Split(thisLine, ",")(0)), "> ", "")
            Exit Do
        End If
    Loop

    If foundIt Then
        GetUserIpAddress = ipAddress
    Else
        Err.Raise 9999, , _
            "I stiiiiiiiill haven't foooouuuund what I'm looking for."
    End If
End Function 
```

如您所见，如果未找到用户名，此函数将引发错误。

请注意，此功能允许您搜索长格式 ( `Chris Trucker`) 或短格式 ( `Truckerc`) 甚至时间戳 ( `2012-05-18 17:28:11`) 的用户名。但请注意，如果您的搜索词有多个实例，则只会返回与第一个实例对应的 IP 地址。如果您希望返回所有实例，您可以调整代码。

作为最后的评论，建议始终声明所有变量并通过`Option Explicit`在代码顶部强制自己这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T06:57:51.440

***功能***

```
Private Function ReturnNames(fPath$, pName$) As String
    'this This example uses **Microsoft VBScript Regular Expressions 5.5** and **Microsoft Scripting Runtime**
    Dim result$
    Dim re As New RegExp, fso As New FileSystemObject
    If fso.FileExists(fPath) = True Then
        Dim contents$, mt As Match, mts As MatchCollection
        contents = fso.OpenTextFile(fPath, ForReading).ReadAll
        With re
            .Global = True
            .MultiLine = True
            .Pattern = "^> *([^,\r\n]+),([^,\r\n]+),([^,\r\n]+),([^,\r\n]+)$"
            If .test(contents) = True Then
                Set mts = .Execute(contents)
                For Each mt In mts
                    If LCase(mt.SubMatches(1)) = LCase(pName) Then
                        result = mt.SubMatches(0)
                        Exit For
                    End If
                Next mt
            End If
        End With
        If result = "" Then
            result = "No matches found for '" & pName & "'."
        End If
    Else
        result = "File not found."
    End If

    ReturnNames = result

End Function 
```

**可能会被调用**

```
Public Sub test000()
    MsgBox ReturnNames("C:\Documents and Settings\Patel_81\Desktop\1.txt", "Chris Trucker")
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:38:50.697

您必须创建一个 FileSystemOject 并调用 ReadLine 方法。像这样的东西。

[http://www.visualbasicscript.com/Vbscript-to-read-txt-file-for-input-m31649.aspx](http://www.visualbasicscript.com/Vbscript-to-read-txt-file-for-input-m31649.aspx)

要获取 IP 地址和名称，请通过传递 ',' 作为参数调用 InStr 函数。

vibscript 中的字符串函数

[http://www.w3schools.com/vbscript/vbscript_ref_functions.asp](http://www.w3schools.com/vbscript/vbscript_ref_functions.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T00:41:46.970

多么精美的分隔文本文件啊！

假设您提供了文件格式，并且您传入了文件中实际存在的名称，此函数将返回您提供的任何名称的 IP 地址：

```
Function GetIPAddress(fileName As String, userName As String) As String

  Dim userinfo As String
  Dim tokens As Variant
  Dim laststring As Variant
  Dim userIP As String

  ' read text file into string
  userinfo = GetText(fileName)
  ' remove everything after the name we are looking for
  tokens = Split(userinfo, userName)(0)
  ' get the second-to-last comma-delimited value
  laststring = Split(tokens, ",")(UBound(Split(tokens, ",")) - 1)
  ' split by > and get second element
  userIP = Trim$(Split(laststring, ">")(1))

  GetIPAddress = userIP
End Function 
```

[使用Charley Kyd 的](http://www.exceluser.com/explore/questions/vba_textcols.htm)这个函数：

```
Function GetText(sFile As String) As String
  Dim nSourceFile As Integer, sText As String
  ''Close any open text files
  Close
  ''Get the number of the next free text file
  nSourceFile = FreeFile
  ''Write the entire file to sText
  Open sFile For Input As #nSourceFile
  sText = Input$(LOF(1), 1)
  Close
  GetText = sText
End Function 
```

**样品用法：**

```
Sub testgetip()
  Debug.Print GetIPAddress("\\server\tsusers\Users.txt", "Chris Trucker")
End Sub 
```

如果名称在目标文件中不存在，当然会抛出错误（运行时错误 9）。

**另一种可能的方法：**

```
Function GetIPAddress(fileName As String, searchTerm As String) As String

  Dim userinfo As String
  Dim tokens As Variant
  Dim i As Long
  Dim userIP As String

  ' read text file into string
  userinfo = GetText(fileName)
  ' split text file by line breaks
  tokens = Split(userinfo, vbCrLf)

  ' loop through array and look for line that contains search term
  For i = LBound(tokens) To UBound(tokens)
    If InStr(tokens(i), searchTerm) > 0 Then  ' found it
      ' get first element of comma-split string, then second element of space-split string
      GetIPAddress = Split(Split(tokens(i), ",")(0), " ")(1)
      Exit For
    End If
  Next i
End Function 
```

也使用[Charley Kyd 网站上](http://www.exceluser.com/explore/questions/vba_textcols.htm)的功能。

这个稍微好一点，因为如果没有找到搜索词，它不会抛出错误，它只会返回一个空值，您需要在调用代码中对其进行测试。与 Jean 的代码一样，它还允许您搜索任何术语，而不仅仅是用户名。

**样品用法：**

```
Sub testgetip()
  Dim ipaddr As String
  ipaddr = GetIPAddress("\\server\tsusers\Users.txt", "Trucker")

  If Len(ipaddr) = 0 Then
    MsgBox "Could not find IP address for that search term"
  Else
    Debug.Print ipaddr
  End If
End Sub 
```

# iphone - 核心图中的动态 X 轴点打印

> ID：10713782
> 
> 赞同：0
> 
> 时间：2012-05-23T05:10:12.557
> 
> 标签：iphone, objective-c, ios5, ios4, core-plot

我创建了一个简单的核心图示例，工作正常，但我需要动态生成的 x 轴值，我想开发图（日期）->（血压）图，血压间隔是固定的，但是日期是动态的。那么如何动态放置 X 轴（日期）值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:13:54.837

一旦您的数据源可以访问您要绘制的数据，您就可以使用绘图空间方法`-scaleToFitPlots:`来拟合数据周围的绘图空间范围。如果你已经知道数据的范围，你可以直接设置`xRange`and `yRange`。

# google-maps-api-3 - 如何在谷歌地图中显示静态图像？

> ID：10713791
> 
> 赞同：1
> 
> 时间：2012-05-23T05:11:03.643
> 
> 标签：google-maps-api-3

基本上，我想在我的地图中间显示一个十字准线，当用户四处移动时它会保持在中心。

这正是我要说的，除了这个例子的实现有点糟糕......当你快速平移时它非常缓慢和跳跃。

[http://www.daftlogic.com/sandbox-google-maps-centre-crosshairs.htm](http://www.daftlogic.com/sandbox-google-maps-centre-crosshairs.htm)

有人对使用 v3 maps api 实现这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:53:12.273

到目前为止，我见过的最流畅的方法是使用 KML 文件。[这是原来的](http://maps.google.com/maps?f=q&hl=en&q=http://kmlscribe.googlepages.com/SamplesInMaps.kml&ie=UTF8&ll=36.879621,-53.4375&spn=103.772916,208.476563&z=2&om=1)。

我将 KML 剥离到最低限度：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
      <ScreenOverlay>
        <Icon>
          <href>http://code.google.com/apis/kml/documentation/crosshairs.png</href>
        </Icon>
        <overlayXY x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
        <screenXY x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
        <rotationXY x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
        <size x="0" y="0" xunits="pixels" yunits="pixels"/>
      </ScreenOverlay>
  </Document>
</kml> 
```

在地图代码中，您只需使用选项设置 KML 图层`preserveViewport=true`。请注意，如果您在本地进行测试，则仍需要将 KML 文件上传到公共位置。

```
 var crosshairLayer = new google.maps.KmlLayer( 
      'http://freezoo.alwaysdata.net/justcrosshair2.kml', 
      {preserveViewport: true});

    crosshairLayer.setMap(map); 
```

JSFiddle [样式 1](http://jsfiddle.net/zBA3d/) [样式 2](http://jsfiddle.net/zBA3d/1/)

（它们是两个 KML 文件中的两个独立图标。）

# silverlight-4.0 - 如何诊断 Silverlight 视觉问题

> ID：10713793
> 
> 赞同：0
> 
> 时间：2012-05-23T05:11:07.200
> 
> 标签：silverlight-4.0

我有这样的silverlight4代码，

```
<controlsToolkit:BusyIndicator IsBusy="{Binding IsBusy}">
    <telerik:RadComboBox IsEnabled="{Binding IsEnabled, Mode=TwoWay}"/>
</controlsToolkit:BusyIndicator> 
```

这在一定程度上简化了问题，但本质上，如果我在加载一些数据时将 IsBusy 设置为“true”，然后将其设置为“false”，则 RadComboBox 会按预期正确禁用和启用。

如果我编译我的应用程序并将其发布到 IIS，则当我将 IsBusy 设置为“true”时 RadComboBox 将禁用，但在我将 IsBusy 设置为“false”后它不再启用。

我无法以正常意义上的运行 VS 并在我的机器上启动它来调试它。我有几个想法可以向我展示更多信息，但都无法发挥作用。

1) 我尝试将 VS 调试器附加到在 IIS 中运行应用程序实例的 IE。我添加的断点消失了，它说“未加载符号”。也许这是因为这是软件的发布版本而不是调试？

2) 我尝试使用 Silverlight Spy 来弄清楚发生了什么。与 snoop 不同，我无法看到 IsEnabled 属性的设置。例如它是继承的，还是设置在视图模型中，或者直接设置在控件上等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:12:37.730

如果我把它改成这个它就可以了，

```
<controlsToolkit:BusyIndicator IsBusy="{Binding IsBusy}">
    <telerik:RadComboBox IsEnabled="{Binding IsEnabled}"/>
</controlsToolkit:BusyIndicator> 
```

即从 RadComboBox 绑定中删除了 'Mode=TwoWay'。必须是 Telerik 控件或 BusyIndi​​cator 控件中的错误。我无法以任何其他方式解释它。

# ajax - Magento 和 AJAX.Updater

> ID：10713794
> 
> 赞同：0
> 
> 时间：2012-05-23T05:11:14.203
> 
> 标签：ajax, magento

我已经查看了这里和 Magento 板上的所有回复，但仍然没有运气。

我有状态的下拉列表，通过 AJAX.Updater 调用从所选状态收集零售商店列表。FireBug 向我展示了 RESPONSE 和 HTML，但代码永远不会填写指定的 DIV。

这是我的电话，其中 str 是通过的状态缩写。

```
new Ajax.Updater($('txtHint'),'../php/getdealer.php?q='+str, { method:'get', }); 
```

关于为什么它不会显示在屏幕上的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:52:42.460

应该

```
new Ajax.Updater($('txtHint'),'../php/getdealer.php?q='+str, { method:'get', }); 
```

不是

```
new Ajax.Updater('txtHint','../php/getdealer.php?q='+str, { method:'get' }); 
```

参考： http: [//prototypejs.org/api/ajax/updater](http://prototypejs.org/api/ajax/updater)

# android - 如何在 android 应用程序中集成谷歌评级选项？

> ID：10713798
> 
> 赞同：2
> 
> 时间：2012-05-23T05:11:28.807
> 
> 标签：android, google-ranking

如何在 android 应用程序中集成谷歌评级选项？

我想使用 google api 添加评分栏..

请任何人都可以帮忙..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:30:30.407

您可以在 android 中使用“RatingBar”小部件......

# ruby-on-rails - NoLinkedYouTube 帐户

> ID：10713803
> 
> 赞同：1
> 
> 时间：2012-05-23T05:12:05.983
> 
> 标签：ruby-on-rails

我正在使用 youtube_it 上传视频。我下载了 youtube_it 的演示应用程序，当我尝试上传视频时出现以下错误，`**NoLinkedYouTubeAccount**` 我的 youtube_it.yml 看起来像这样

```
common: &common
  dev_key: AI39si4aJ5Nzw2Sknaox12T14SvLip_TjPF3ZgE-JlP_YPTX_Ma3Pd2PPOPF_K9hmDYR8uouMTefSltn_ZXrWe0gFslMsESzbg
  username:  lafseries@gmail.com
  password:  password

test:
  <<: *common
development:
  <<: *common
production:
  <<: *common 
```

当我检查我的谷歌帐户时，dev_key 匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:36:24.647

如果您还没有完成，请确保在您的 intializers 文件夹中包含一个 load_youtube.rb 文件。

```
require 'ostruct'
raw_config = File.read(::Rails.root.to_s + "/config/youtube_it.yml")
YouTubeITConfig =  OpenStruct.new(YAML.load(raw_config)[Rails.env]) 
```

# php - 登录+数据库问题

> ID：10713807
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:12:41.790
> 
> 标签：php, mysql, login

每次登录时，密码都会从数据库中删除。其余数据完好无损。我是网络编程的初学者，对此我一无所知。这可能是什么原因？

[从评论中复制的代码]

```
$user= $_POST['username']; 
$pass = $_POST['password']; 
if((isset($user))&&(isset($pass))) { 
  $query ="Select password from table1 where user_name='".$user."'"; 
  $result = mysql_query($query) or die(); 
  $r= mysql_fetch_assoc($result) or die(); 

  if(!strcmp($pass, $r)) { 
   echo "succesful"; 
   session_start(); 
   $_SESSION['username']=$user; 
   $_SESSION['logged']=1; 
   header("Refresh: 0; URL = ..\home\index.php"); 
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:42:54.820

`session_start`检查 isset($_POST['username']) 时，您需要在第一行执行

```
session_start(); 
$user= isset($_POST['username']) ? trim($_POST['username']) : false; 
$password = isset($_POST['password']) ? trim($_POST['password']) : false; 

if($user !== false && $password !== false) { 
```

当您正确执行此操作时：

```
$r= mysql_fetch_assoc($result) or die(); 
if(!strcmp($pass, $r['password'])) { 
```

和标题：

```
header("Location: ..\home\index.php"); 
```

# connection-timeout - 使用 PHP 在程序之间切换以避免 SERVER 超时

> ID：10713810
> 
> 赞同：0
> 
> 时间：2012-05-23T05:13:01.293
> 
> 标签：connection-timeout

我有一个与许多其他问题相关的问题，但有一些关键的区别。我有一个 PHP 脚本，它需要每 15 分钟（900 秒）做一些常规工作（从数据库中删除一个元组）。这需要一遍又一遍地完成。因此，我使用 set_time_limit(0) 来防止 PHP 超时。该应用程序在第一次迭代中运行良好，然后因为服务器不允许脚本运行超过 1000 秒而被淘汰。我构想了一种解决方法，但不确定如何实际编写它。除了睡眠 900 秒之外，我需要一个脚本来做很少的事情——这不是问题。然后我需要它来启动工作程序，而睡眠程序需要结束。工作程序会做它的事（几秒钟）。然后它需要再次启动睡眠程序，工作程序需要结束。那样，没有脚本运行超过 1000 秒（在一次迭代中）。我试过使用包含、标题和其他一些东西，但到目前为止还没有运气。鉴于此应用程序对我的工作有多重要，我非常感谢您的帮助 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:28:43.683

您是否知道可以从命令行运行 PHP 脚本，而无需浏览器等待页面？如果您从那里运行该脚本而不是作为 CGI 运行，则它不会低于 1000 秒的限制。它甚至可以每 15 分钟被 cron 调用来完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:02:40.253

好吧 - 我自己想通了。这是一个示例代码：

链测试：

```
<html>
<body onload="form1.submit()">
<form id="form1" action="chaintest2.php" method="post">
</form>
<?php
print"Begun";
sleep(5);
?>
</body>
</html> 
```

链测试2：

```
<html>
<body onload="form1.submit()">
<form id="form1" action="chaintest.php" method="post">
</form>
<?php
print"PHP excecuted";
sleep(5);
?> 
```

这段代码将不断来回弹跳（打印开始并执行 PHP）。它永远不会通过 PHP 或服务器超时。

# .net - 绕过成员名称不能与其封闭类型相同

> ID：10713811
> 
> 赞同：4
> 
> 时间：2012-05-23T05:13:05.533
> 
> 标签：.net, visual-studio-2010, dynamics-crm-2011, odata

类似于：[成员名称不能与其封闭类型相同，](https://stackoverflow.com/questions/3528786/member-names-cannot-be-the-same-as-their-enclosing-type)除非我无法更改元数据，我只想完全忽略该类。

我正在尝试在 Visual Studio 2010 中添加服务引用，但出现以下错误。

> 自定义工具“DataServiceClientGenerator”失败。数据服务客户端代码生成失败：指定的架构无效。错误：(0,0)：错误 0042：名称 foo 不能用于 Microsoft.Crm.Sdk.Data.Services.foo 类型。成员名称不能与其封闭类型相同。

我知道这个错误是因为有人`foo`在对象中命名了一个字段，`foo`但我无法更改它..

因此，如果无法在 CRM 中进行任何更改，我如何生成我的服务参考？

我曾考虑下载`$metadata`然后删除有问题的类型，然后保存它（因为该类型不是我无论如何都会使用的类型）。但我不知道如何让它发挥作用，因为它不是太直截了当。

我曾尝试使用 C# 和 VB.NET 进行服务引用，但均未奏效，理想情况下，这将是适用于两者的解决方案，但此时我愿意接受仅适用于其中一个的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T12:42:02.220

我已经想出了如何解决这个问题。

```
http://localhost/myWcfDataService.svc/$metadata 
```

将此结果保存到磁盘，例如`c:\metadata.csdl`

然后手动编辑文件并删除（或重命名）有问题的字段（这将导致它在您的服务中不可用，但总比整个服务不工作要好）。

然后运行以下命令：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\DataSvcUtil.exe /language:CSharp /in:c:\metadata.csdl /out:c:\serviceReference1.cs 
```

现在将新生成的`serviceReference1.cs`文件添加到您的 Visual Studio 项目中，查找继承自此的类`System.Data.Services.Client.DataServiceContext`是您的服务入口点。

更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/dd756369.aspx)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T09:11:16.127

感谢 Seph，我想出了一些改进的方法来添加实际参考，而不是简单的 .cs 文件：

*   将您的另存`http://localhost/myWcfDataService.svc/$metadata`为文件，例如。`myService.csdl`
*   编辑它以`names cannot be the same as their enclosing type`手动解决。当一个类有一个同名的字段时会引起这种情况。我决定重命名类，例如。从`foo`到`foo_`. 您可以改为重命名字段。`c:\Windows\Microsoft.NET\Framework\v4.0.30319\DataSvcUtil.exe /language:CSharp /in:myService.csdl /out:serviceReference1.cs`定期运行以查看您何时消除了所有错误。
*   重命名`myService.csdl`为`$metadata`
*   临时在文件所在的文件夹中运行一些网络服务器`$metadata`。例如，我安装了 python 3 并且只是`python -m http.server`从所在的文件夹中运行`$metadata`。
*   像往常一样在 Visual Studio 中添加服务引用，但使用您的临时 Web 服务器地址。就我而言，它是`http://localhost:8000`。Visual Studio 将请求`/$metadata`并生成所有内容。

# actionscript-3 - “开源”媒体框架有什么意义？

> ID：10713814
> 
> 赞同：2
> 
> 时间：2012-05-23T05:13:29.013
> 
> 标签：actionscript-3, flash, open-source, osmf

我正在通过 OSMF（开源媒体框架）。我想知道为什么它被称为开源。我通过 Flash IDE 创建的视频不是免费的吗？我不能不付费就发布它们吗？youtube 上的视频是付费视频吗？或者我在这里混淆了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T05:32:39.710

开源媒体框架 (OSMF) 是一个开放的软件框架，用于构建基于 Adob​​e® Flash® 平台的强大、功能丰富的视频播放器和应用程序。OSMF 有两个主要目标：

1.  通过使内容提供商能够专注于用户体验而不是播放器管道来简化播放器开发。OSMF 降低了播放器开发的复杂性，让开发者有更多时间专注于整体用户体验。OSMF 的灵活架构允许开发人员轻松地为所有三种屏幕（桌面、移动和电视）定制播放器，并结合用于广告、报告和内容交付的插件以及标准播放器功能，例如播放控制、视频导航、缓冲、和动态流。

2.  通过使生态系统合作伙伴能够专注于提供一流的服务，而不是玩家集成，从而简化第 3 方开发。OSMF 允许开发人员集成来自 Adob​​e Flash Platform 生态系统中合作伙伴的插件，从而简化了与第三方解决方案和服务的集成。任何人都可以开发与 OSMF 媒体播放器集成的插件，并启用自定义功能和新功能，例如广告或报告。插件可以编译成基于 OSMF 的 SWF 或动态加载，允许插件提供者执行即时升级和版本控制。

参考：http:
[//sourceforge.net/adobe/osmf/home/Home/](http://sourceforge.net/adobe/osmf/home/Home/)

下载：http:
[//sourceforge.net/projects/osmf.adobe/files/latest/download](http://sourceforge.net/projects/osmf.adobe/files/latest/download)

SVN： http:
[//sourceforge.net/adobe/osmf/svn/2081/tree/](http://sourceforge.net/adobe/osmf/svn/2081/tree/)
[http://svn.code.sf.net/adobe/osmf/svn/trunk](http://svn.code.sf.net/adobe/osmf/svn/trunk)

它是开源的，就像在促进免费再分发和访问最终产品的设计和实施细节的哲学或实用方法中一样；一种软件，其源代码已发布并可供公众使用，任何人都可以复制、修改和重新分发源代码，而无需支付版税或费用。

# mysql - 连接中的疑问 - MySQL

> ID：10713816
> 
> 赞同：1
> 
> 时间：2012-05-23T05:13:38.703
> 
> 标签：mysql, join, outer-join

我有一个疑问，

```
SELECT E.staffid AS staff
SUM(E.Frequency='Less') AS lessCount, 
SUM(E.Frequency='More') AS moreCount,  
FROM effort_frequency E 
INNER JOIN ost_staff S ON S.staff_id = E.staffid 
WHERE E.log_date BETWEEN '2012-05-01' AND '2012-05-23' 
GROUP BY E.staffid 
```

我得到下表，

```
+-------+-----------+-----------+
| Staff | lessCount | moreCount |
+-------+-----------+-----------+
|  1    |    2      |     3     |
|  3    |    1      |     4     |
|  5    |    2      |     3     |
+-------+-----------+-----------+ 
```

您可以看到结果中缺少2 和 4，对于给定的日期，表中不会有 staff_id 2 和 4 的*行*`effort_frequency`，但我正在尝试加入`ost_staff`表，这样我就可以获得类似下表中，ost_staff 将包含所有员工 ID，比如说 1-5。

```
+-------+-----------+-----------+
| Staff | lessCount | moreCount |
+-------+-----------+-----------+
|  1    |    2      |     3     |
|  2    |    0      |     0     |
|  3    |    1      |     4     |
|  4    |    0      |     0     |
|  5    |    2      |     3     |
+-------+-----------+-----------+ 
```

我尝试了外部连接，但它不起作用，我想我在某个地方犯了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:24:45.323

将`WHERE`子句移至`ON`子句，并将 更改`INNER JOIN`为`RIGHT JOIN`。并将其更改`GROUP BY E.staffid`为`GROUP BY S.staff_id`; 同样将其`SELECT E.staffid,`更改为`SELECT s.staff_id`：

```
SELECT S.staff_id AS staff

    COALESCE(SUM(E.Frequency='Less'),0) AS lessCount, 
    COALESCE(SUM(E.Frequency='More'),0) AS moreCount,  

FROM effort_frequency E 

RIGHT JOIN ost_staff S 
ON S.staff_id = E.staffid 
AND E.log_date BETWEEN '2012-05-01' AND '2012-05-23' 

GROUP BY S.staff_id 
```

如果要使用`LEFT JOIN`，请切换表 ost_staff 和努力频率：

```
SELECT S.staff_id AS staff

    COALESCE(SUM(E.Frequency='Less'),0) AS lessCount, 
    COALESCE(SUM(E.Frequency='More'),0) AS moreCount,  

FROM ost_staff S 

LEFT JOIN effort_frequency E 
ON S.staff_id = E.staffid 
AND E.log_date BETWEEN '2012-05-01' AND '2012-05-23' 

GROUP BY s.staff_id 
```

您也可以使用 IFNULL 代替 COALESCE。IFNULL 仅适用于 MySQL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:16:29.267

您是否尝试**[过 LEFT JOIN](http://mysqljoin.com/joins/left-outer-join-tutorial/)**？

```
SELECT E.staffid AS staff
       COALESCE(SUM(E.Frequency='Less'),0) AS lessCount, 
       COALESCE(SUM(E.Frequency='More'),0) AS moreCount,  
FROM effort_frequency E LEFT JOIN ost_staff S 
      ON S.staff_id = E.staffid 
WHERE E.log_date BETWEEN '2012-05-01' AND '2012-05-23' 
GROUP BY E.staffid 
```

[**学习 SQL JOINS 的文章**](http://mysqljoin.com/)

**[添加COALESCE](http://www.w3schools.com/sql/sql_isnull.asp)**是因为如果不存在记录，它将返回*NULL值。*

# c# - EF 中的 SQL Server 校验和

> ID：10713818
> 
> 赞同：3
> 
> 时间：2012-05-23T05:13:42.827
> 
> 标签：c#, sql-server, entity-framework, checksum

我在 SQL Server 中有一个这样的表：

**用户**：

```
int ID PK Identity
nvarchar(50) Username
nvarchar(50) Password 
```

我将校验和字符串存储在`Password`列中，并使用此方法对密码进行哈希处理并将它们存储在我的表中

现在我想像这样在 EF 中使用这个表；

```
User = DBContext.Users.SingleOrDefault(rec => rec.Username == Request["U"] && rec.Password == Request["P"]); 
```

但是因为我将校验和值存储在我的表中，所以我必须更改`Request["P"]`以在 EF 中使用它

对不起，我是英语新手，你知道我在说什么吗？（我希望我能清楚地解释我的问题：（）

**UPDATE1**：如果我有这样的查询：

```
Select * from Users where username = @p1 and password = checksum(@p2) 
```

我如何转换 @p2 以使用这样的查询：

```
Select * from Users where username = @p1 and password = @p2 --Checksum omitted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:24:01.707

只要您使用 Database First（这意味着您拥有 EDMX），您就可以像这样添加[自定义函数](http://msdn.microsoft.com/en-us/library/dd456812.aspx)：

```
SELECT CHECKSUM(@password) 
```

给你 EDMX，然后你可以在 LINQ 查询中使用密码之前调用它来计算密码的校验和值。

# asp.net - 如何获取自动生成列的下一个 ID

> ID：10713821
> 
> 赞同：0
> 
> 时间：2012-05-23T05:13:53.263
> 
> 标签：asp.net, sql-server-2008

`ID`我的表中有一个自动生成的列`class`。插入时，我想获取自动 ID 的值，该值假定为该列生成，同时插入并连接到要放入`REF`列中的值，该值是 6 位唯一键。

我怎样才能找到`ID`要生成的下一列，很容易将a添加`1`到前一列，`ID`但是如果删除了前一列怎么办？请帮助我了解如何解决这个问题。

我不希望将`ID`已删除项目的内容提供给新项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:17:55.177

您可以使用 SCOPE_IDENTITY() 获取当前范围内最后创建的标识值。下一个值将从该值递增，但您不能确定它是否在您的范围内、另一个范围内或其他范围内。删除不会影响下一个值。

为什么需要“下一个价值”？

# java - ora-00933：更新 sql 语句的 SQL 命令未正确结束

> ID：10713822
> 
> 赞同：1
> 
> 时间：2012-05-23T05:14:02.193
> 
> 标签：java, sql, oracle, ora-00933

当点击下面的这一行时，我得到的 sql 命令没有正确结束。

```
stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);    
String updateQ = "update ANI_999 set First_Name = '"+d.getName()+"', HouseNo = '"+d.getAddr1()+"', Indicator_Sourcefile_iCARE3 = Indicator_Sourcefile_iCARE2, Indicator_Sourcefile_iCARE2 = Indicator_Sourcefile_iCARE1, Indicator_Sourcefile_iCARE1='"+currentFile+"' where CALLER_ID = '"+msisdn+"' ";

int result = stmt.executeUpdate(updateQ);
conn.commit();
conn.close();` 
```

我不断收到 ORA-00933：SQL 命令未正确结束。

这是`updateQ`语句的样子：

```
update ANI_999 set First_Name = 'ZAHARAH BINTI ABDUL RAHMAN', HouseNo = 'No. JKR6357,', Indicator_Sourcefile_iCARE3 = Indicator_Sourcefile_iCARE2, Indicator_Sourcefile_iCARE2 = Indicator_Sourcefile_iCARE1, Indicator_Sourcefile_iCARE1='ICAREP_ANI_SVCPROF_20120402_002.DAT' where CALLER_ID = '058011726' 
```

这是完整的功能：- 请参考这个符号“<<”

```
public void updateRecord(icData d, String msisdn) {
   Connection conn = null;
   Statement stmt = null;
   int recCtr = 0;

try {
   conn = ds.getConnection();

       stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY); 
       String updateQ = "update ANI_999 set First_Name = '"+d.getName()+"', HouseNo = '"+d.getAddr1()+"', Indicator_Sourcefile_iCARE3 = Indicator_Sourcefile_iCARE2, Indicator_Sourcefile_iCARE2 = Indicator_Sourcefile_iCARE1, Indicator_Sourcefile_iCARE1='"+currentFile+"' where CALLER_ID = '"+msisdn+"' ";

   int result = stmt.executeUpdate(updateQ);
   conn.commit();
   conn.close();
}
catch(SQLException ex) {

    logger.error("iCARE:Error : " + ex.getMessage()); <<this line show me that error>>

}
finally {
    try {if (stmt != null) stmt.close();} catch (SQLException e) {}
        try {if (conn != null) conn.close();} catch (SQLException e) {}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:19:16.773

您应该使用 PreparedStatement：

```
String updateQ = "update ANI_999 set First_Name = ?, HouseNo = ?, " +
       "Indicator_Sourcefile_iCARE3 = Indicator_Sourcefile_iCARE2, " +
       "Indicator_Sourcefile_iCARE2 = Indicator_Sourcefile_iCARE1, " +
       "Indicator_Sourcefile_iCARE1=? where CALLER_ID = ? ";
PreparedStatement prep =  conn.prepareStatement(updateQ, 
    ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY); 
prep.setString(1, ...);
prep.setString(2, ...);
prep.setString(3, ...);
int result = prep.executeUpdate(updateQ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T00:49:08.950

> 错误：ORA-00933：SQL 命令未正确结束。
> CAUSE: 你试图用不适当的子句执行 SQL 语句。

您应该在 catch 块中捕获堆栈跟踪，而不是仅仅捕获错误消息。这为您提供了具有根本原因的语句执行的行号。

改变

```
logger.error("iCARE:Error : " + ex.getMessage()); // <<this line show me that error>> 
```

至

```
ex.printStackTrace(); // <<this line show me that error>> 
```

或者，您可以尝试以下代码更改，看看它是否适合您。

您对更新语句的输入有可能包含一些未转义的字符，因此会导致错误。`Statement`将您的对象更改为`PreparedStatement`并查看它是否已解决。

```
try {  
  ...
  String updateQ = "update ANI_999"  
    + " set First_Name = ?, HouseNo = ?,"  
    + " Indicator_Sourcefile_iCARE3 = Indicator_Sourcefile_iCARE2,"  
    + " Indicator_Sourcefile_iCARE2 = Indicator_Sourcefile_iCARE1,"  
    + " Indicator_Sourcefile_iCARE1=?"   
    + " where CALLER_ID = ?";  

  PreparedStatement pstmt = conn
   .createStatement( updateQ, ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY );  
  pstmt.setString( 1, d.getName() );  
  pstmt.setString( 2, d.getAddr1() );  
  pstmt.setString( 3, currentFile );  
  pstmt.setString( 4, msisdn );  

  // print what the query actually holds. Not sure if all drivers support this.
  System.out.println( "DEBUG: query: " + pstmt.toString() );

  int result = pstmt.executeUpdate( updateQ );  
  System.out.println( "DEBUG: Update Result: " + result );
  ...  
} catch ( Exception ex ) {  
  // logger.error( ...  
  ex.printStackTrace(); // keep this until debugged  
}  
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T15:23:44.017

如果您将变量字符串插入到命令字符串中，您可以获得 ORA-00933，例如

```
string inputName = "Rose";
string sqlCmd = "SELECT * FROM mytable WHERE brand_name = '" + inputName +"'"; 
```

以上工作正常 - 但如果：

```
string inputName = "Rose's"; 
```

生成的 SQL 会 `SELECT * FROM mytable WHERE brand_name = 'Rose's'`引发 ORA-00933，因此请记住转义单引号！

如果您使用的是`LIKE`子句，那么您可能必须开始考虑转义`%`'s。人们建议使用准备好的语句的原因之一是你不必担心逃避这些事情。

# regex - 正则表达式提取语法中的一些值

> ID：10713825
> 
> 赞同：0
> 
> 时间：2012-05-23T05:14:39.767
> 
> 标签：regex

有人可以帮我处理`'request='`and之间的字符串的正则表达式`'">'`吗？

例如对于`request=this_is_the_text_I_need">`正则表达式将返回`'this_is_the_text_I_need'`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:17:09.147

这应该工作： `request=(.+?)">`. 它将提取介于`request=`和之间的任何文本`">`。它应该允许您通过使用正则表达式组来访问该值。

注意：我假设您使用单引号来表示您所追求的答案，并且不希望它们作为返回值的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:17:45.127

```
/request=([^"]+)">/

request= : Match "request="
([^"]+)  : Match anything other than '"' one or more and add it to first group. 
```

Python：

```
>>> re.match('request=([^"]+)">', 'request=this_is_the_text_I_need">').group(1)
'this_is_the_text_I_need' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:20:18.817

您正在寻找的是前瞻和后瞻语句。例如，在`grep`：

```
$> echo 'request=this_is_the_text_I_need">' | grep --only-matching --perl-regex "(?<=request=).*(?=\">)"
this_is_the_text_I_need 
```

所以`(?<=request=).*(?=\">)`由3部分组成：

*   `(?<=request=)`- 表示匹配的字符串将在 之后`request=`。
*   `.*`- 表示匹配的字符串可以包含所有可能的符号
*   `(?=\">)`- 表示匹配的字符串将在之前`">`。

# android - 在Android中重新启动应用程序表单设备后数据无法进入服务..？

> ID：10713828
> 
> 赞同：2
> 
> 时间：2012-05-23T05:15:03.910
> 
> 标签：android, service, android-emulator

嗨朋友我有一个问题...我想将字符串数据表单活动发送到服务，并且我已将数据保存到共享首选项中..我的一切正常，我能够将数据传递给服务类..但问题是那，如果我将字符串更改为共享首选项并从 Eclipse 运行我的项目，那么我不会遇到任何问题，但是我从设备或模拟器打开应用程序..然后更改我的字符串..那个时间值没有在服务中更新类，在服务类中，它采用旧数据。我如果调试它显示的值，但在显示旧值的设备中。请提供任何帮助

```
This is the code i tried...
Activity class,From where i sent the value to to the service class using alarm manager

@Override
    protected void onResume() {
        super.onResume();
// Preference Satting
        prefs = PreferenceManager
                .getDefaultSharedPreferences(this);
}

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                    alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                    myIntent = new Intent(PZAlarmTTSActivity.this, TtsService.class);

                    passedText = prefs.getString("text", "<unset>");
                    //Log.i("passed Text  :", passedText);

                    // Passing the value to the service
                    Bundle bundle = new Bundle();
                    bundle.putString("k_key", passedText);
                    myIntent.putExtras(bundle);
                    Log.i("key Data  :  ", passedText);

                    // Pending intent to launch when the alarm triggers
                    pendintIntent = PendingIntent.getService(PZAlarmTTSActivity.this, 0,
                            myIntent, 0);
                    // Sets alarm to trigger
                    alarmManager.set(AlarmManager.RTC_WAKEUP, calender.getTimeInMillis(), pendintIntent);

}

Service class, where i want to receive the string value

@Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        Toast.makeText(this, "service started", Toast.LENGTH_LONG).show();

        Bundle bundle = intent.getExtras();  
        String data = bundle.getString("k_key"); // Here data is not updating in 2nd  case
        Log.i("From service class : ", data);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:31:16.293

见[Doc](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)说：

**onStart：此方法已弃用。**

*改为实现 onStartCommand(Intent, int, int) 。*

*onStartCommand ：每次客户端通过调用 startService(Intent) 显式启动服务时由系统调用，提供它提供的参数和表示启动请求的唯一整数令牌。不要直接调用此方法。*

您需要使用线程来获取服务中的最新值，或者通过`startService`每次使用从 SharedPreferences 获取新值来启动服务，因为一旦服务启动，您的`onStart`方法不会被调用如果服务已经在运行

这也许对你有帮助！！！

# java - 想在这个jsp页面中显示动态值

> ID：10713829
> 
> 赞同：0
> 
> 时间：2012-05-23T05:15:04.943
> 
> 标签：java, jsp, jakarta-ee, servlets

这是我的jsp psge：

```
<%  while(rs.next()){ %>
<td><input type="checkbox" name="chkName" onclick="selectall()"></td> 
<td><input type="text"  name="empId" value="<%= rs.getString(1)%> "   

disabled="disabled"  maxlength="10"></td>
<td><input type="text" name="device" value="<%= rs.getString(2)%>"  

disabled="disabled" maxlength="10"></td>
<td><input type="text"  name="features" value="<%= rs.getString(3)%>"   

disabled="disabled" maxlength="60"></td>
<td><input type="text"  name="policyName" value="<%= rs.getString(4)%>" 

disabled="disabled" maxlength="10"></td>
<td><input type="text" name="password" id="password" 

disabled="disabled" value="<%=  rs.getString(5) %>" ><input 

type="button" name="Password" id="Password" value="Reset  Password" 

onclick="fillFields(this);"></td>
</tr>
<% } 
%>
</table>
<td><input type="submit" value="Save" colspan="2" onclick= "save

(this)"></td>
<td><input type="submit" value="Delete" colspan="2" onclick="deleted

(this)"></td>
</center>
</form>
<% 
```

实际上这个jsp显示了一个连接表（user_table & policy_management），我想同时更新这个连接表。我想把它放在一个会话中，这样我就可以在下一个servlet页面中设置和获取它的属性。

所以你能帮我吗，我必须为此做些什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:24:46.717

删除`disabled=disabled`，然后您可以在servlet中获取此表单值

# javascript - How to remove stuff inside tags?

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-05-23T05:15:25.417121 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I'm trying to make this script for a forum, which allows the use of tags in posts. Unfortunately, we can't use line breaks whenever we write these CSS styles because the form reads them as `<br>`'s and it screws everything.

They appear like this:

```
<style type="text/css"><!-- <br>#herp { background: #fff; }<br> --></style> 
```

If we stop the form from reading `<br>`'s, it would affect the rest of the elements. So we've tried to remove them using this:

```
var style = document.getElementsByTagName("style"); for(x=1;x<style.length;x++) { style[x].innerHTML.replace(/\<br\>/gi,""); } 
```

...to no avail.

To be honest, I'm not quite sure what kind of entities lie between these style tags. I don't think they're strings, nor are they comments. So the replace() doesn't seem to work.

Any thoughts?

[javascript](/tags/javascript "show questions tagged 'javascript'")[html](/tags/html "show questions tagged 'html'")4

## 2 回答 2

This answer is useful1

```
var style = document.getElementsByTagName("style");
for(x=1;x<style.length;x++) {
 style[x].innerHTML=style[x].innerHTML.replace(/\<br\>/gi,"");
} 
```

于 2012-05-23T06:01:25.633 回答This answer is useful0

You can get stylesheet object by using `document.styleSheets`

Try this in console

```
for(i in document.styleSheets){
 if(!isNaN(i)){
 document.styleSheets[i].disabled = true;
 }
} 
```

于 2012-05-23T06:06:38.847 回答

#### Related

[1](/questions/18065732 "Question score (upvotes - downvotes)")[html - 使用 VBA 在选择元素中获取选择选项的文本](/questions/18065732)[2](/questions/18065733 "Question score (upvotes - downvotes)")[windows-phone-8 - 在 Microsoft Windows 7 上为 Windows Phone 8 编程](/questions/18065733)[1](/questions/18065735 "Question score (upvotes - downvotes)")[regex - 为什么 .htaccess 文件无法重写我网站中的动态 url](/questions/18065735)[4](/questions/18065736 "Question score (upvotes - downvotes)")[c# - C# StringReader 类](/questions/18065736)[1](/questions/18065737 "Question score (upvotes - downvotes)")[ruby-on-rails - WARN 无法确定响应正文的内容长度。设置响应的内容长度或设置 Response#chunked = true](/questions/18065737)[2](/questions/18065738 "Question score (upvotes - downvotes)")[java - 在哈希图中找到最大值的最佳方法<arraylist,arraylist></arraylist,arraylist>](/questions/18065738)[0](/questions/18065744 "Question score (upvotes - downvotes)")[javascript - 使用 Google 电子表格时请求超时](/questions/18065744)[1](/questions/18065746 "Question score (upvotes - downvotes)")[c# - MessageQueue.CanWrite 总是返回 true](/questions/18065746)[2](/questions/18065750 "Question score (upvotes - downvotes)")[c# - 使用 Entity Framework 5.0 和 xtragrid 保存数据](/questions/18065750)[0](/questions/18065751 "Question score (upvotes - downvotes)")[c# - ajax ie8没有触发回调](/questions/18065751)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：10713831
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# objective-c - 主 NSWindow 内的视图，成为弹出 NSWindow 内的视图

> ID：10713839
> 
> 赞同：0
> 
> 时间：2012-05-23T05:16:35.070
> 
> 标签：objective-c, cocoa

我的 MainWindow 中有一个 NSView （例如 PDFViewer 组件）。通过单击按钮，我希望它成为另一个新 NSWindow 的视图。（想象一下，我想要一个带有此 pdf 预览的新浮动窗口）

我该如何解决这个问题？我不知道从哪里开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:14:10.050

只是`removeFromSuperview`然后`addSubview:`在另一个 NSWindow 上。

# java - NetBeans 项目 JAR 在清理和构建后不会运行？

> ID：10713841
> 
> 赞同：0
> 
> 时间：2012-05-23T05:16:49.200
> 
> 标签：java, netbeans, jar

在我的一个 Netbeans 项目中，jar 已构建并完美运行。但是，当清理和构建同一个项目时，该`lib`文件夹不存在`dist` 并且生成`jar`的不会运行并产生以下 CMD 提示消息：

```
 Microsoft Windows [Version 6.1.7600]
    Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

    C:\Windows\system32>CD C:\Users\gurukripa\Documents\NetBeansProjects\I-ROOM\dist

    C:\Users\gurukripa\Documents\NetBeansProjects\I-ROOM\dist>java -jar iroom.jAR
    Unable to access jarfile iroom.jAR

    C:\Users\gurukripa\Documents\NetBeansProjects\I-ROOM\dist>java -jar I-ROOM.jar
    Exception in thread "main" java.lang.UnsupportedClassVersionError: i/room/Essent
    ials (Unsupported major.minor version 51.0)
            at java.lang.ClassLoader.defineClass0(Native Method)
            at java.lang.ClassLoader.defineClass(ClassLoader.java:539)
            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:12
    3)
            at java.net.URLClassLoader.defineClass(URLClassLoader.java:251)
            at java.net.URLClassLoader.access$100(URLClassLoader.java:55)
            at java.net.URLClassLoader$1.run(URLClassLoader.java:194)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(URLClassLoader.java:187)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:289)
            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:274)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:235)
            at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)

    C:\Users\gurukripa\Documents\NetBeansProjects\I-ROOM\dist> 
```

我在用：

*   网豆 7.0,
*   JDK 1.7.0_02，
*   JRE 7
*   Windows 7 32 位家庭高级版

当我双击 jar 时没有任何反应，但我可以看到`javaaw`它正在任务管理器中运行。这有正当理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:23:34.107

您的 JAR 是使用不同版本的 JDK 编译的，而不是您尝试用来运行它的版本。确保 Netbeans 和命令行都使用相同版本的 JDK。

# php - 在 wordpress 中设置和获取特定于用户的变量

> ID：10713842
> 
> 赞同：1
> 
> 时间：2012-05-23T05:16:50.063
> 
> 标签：php, wordpress, session-variables

我正在尝试为 wordpress 编写一个插件，将帖子划分为不同的块，然后允许用户一次访问一个块。现在我有了它，所以我可以获取属于一个块的所有帖子，设置它们的块等。但是，我需要跟踪用户当前选择的块的 ID。我的问题是，如何设置特定于用户会话的变量，然后如何访问它？

如果需要更多说明，请询问，我将编辑解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:31:07.557

您可以使用会话 :-) 或 wordpress 功能[add_user_meta](http://codex.wordpress.org/Function_Reference/add_user_meta)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:55:53.560

我最终使用了一个 php cookie。这是像我这样的菜鸟的链接：http: [//www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp)

# php - AJAX 数据字符串中的 PHP 变量

> ID：10713844
> 
> 赞同：0
> 
> 时间：2012-05-23T05:16:57.483
> 
> 标签：php, jquery, ajax, request, referenceerror

`Uncaught ReferenceError: bierta (or whatever the URL var is) is not defined`当我在下面运行 AJAX 调用时，我得到了。我怎样才能解决这个问题？

```
$.ajax({
  type: "GET",
  async: false,
  url: "get-single-marker.php",
  data: "slug="+<?php echo $_GET['gt']; ?>,
  dataType: "json",
  success: function(res) {
    data = res;
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:24:27.023

你想要这样的东西：

```
data: "slug="+<?php echo json_encode($_GET['gt']); ?>, 
```

或者

```
data: "slug=<?php echo $_GET['gt']; ?>", 
```

或`gt`使用 JavaScript 从查询中获取。

查看源代码以了解为什么您的版本不起作用。

无论您使用哪种方法，您都需要确保正确验证/转义输入。`$_GET`是不受信任的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:29:31.000

您在这里为元素分配了一个变量，这就是它给您一个错误的原因。

尝试遵循代码。

```
data: "slug=<?php echo $_GET['gt']; ?>", 
```

这应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:36:56.850

尝试

```
data: "slug=<?php echo $_GET['gt']; ?>, 
```

或者

`data:{slug:"<?php echo $_GET['gt']; ?>"},`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:47:10.073

我希望这可能有用

```
data: { slug : <?php echo $_GET['gt']; ?> }  , 
```

引号不是必需的

# android - 在 Android 中调试时，如何将一堆数据传递到我的计算机？

> ID：10713847
> 
> 赞同：1
> 
> 时间：2012-05-23T05:17:26.587
> 
> 标签：android, debugging

Log.d 不足以推送一堆图像数据。是否有捷径可寻？我可以写一个文件，但是我必须把我的手机切换到USB模式，把文件复制过来，然后再把它切换回来……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:23:35.197

> 我可以写一个文件，但是我必须将手机切换到 USB 模式，复制文件，然后再切换回来

您可以使用`adb pull`或 ADT 从手机的文件系统中获取文件。

```
adb pull <remote> <local> 
```

在 ADT 中，使用 DDMS 透视图中的文件资源管理器选项卡。

![使用 ADT 拉取文件](../Images/a8e7dbef2633e56dc24f672783b64f50.png)

话虽如此，很可能有一种调试方法，而无需跳过创建文件、在计算机上获取文件然后对其进行分析的过程。

# macos - GHC - Mac OS X - ld：未知选项：-no_pie

> ID：10713848
> 
> 赞同：3
> 
> 时间：2012-05-23T05:17:27.967
> 
> 标签：macos, haskell, linker-errors, ghc, ld

当我尝试在 Haskell 中编译一个简单的 Hello World 并使用
ghc --make Main.hs进行编译时，
我得到：
Linking Main ...
ld: unknown option: -no_pie
collect2: ld returned 1 exit status

我在 Mac OS X 10.6.8 上。我以前可以编译没有这个错误，但是我有一段时间没有使用GHC，所以我一定是在那段时间安装或破坏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:46:38.183

Leopard 摆脱了一段时间的 no-pie：http: [//trac.macports.org/ticket/34064](http://trac.macports.org/ticket/34064)

正如评论所指出的，将 xcode/ld 升级到更新的版本会启用该标志。

# ruby-on-rails - 将数组传入 form_for() 和 link_to()

> ID：10713859
> 
> 赞同：4
> 
> 时间：2012-05-23T05:18:06.883
> 
> 标签：ruby-on-rails

我正在阅读 Rails 3 In Action。本书构建了一个 Projects which`has_many :tickets`类和一个 Tickets which 类`belongs_to :project`。routes.rb 文件如下所示：

```
 resources :projects do
      resources :tickets
    end 
```

现在，用于创建票证的表单采用如下数组：

```
 <%= form_for [@project, @ticket] do |f| %> 
```

在票 show.html.erb 页面上有如下链接：

```
 <%= link_to "Edit Ticket", [:edit, @project, @ticket] %>
    <%= link_to "Delete Ticket", [@project, @ticket], :method => :delete,
    :confirm => "Are you sure you want to delete this ticket?" %> 
```

现在我很困惑为什么需要将两个对象的数组传递给 form_for() 和 link_to()。另外，为什么“编辑票证”需要和 :edit 符号，而“删除票证”不需要 :destroy 符号。

谢谢，迈克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T06:15:56.363

从包含两个资源 ID 的 URL 嵌套资源路由，在本例中类似于：`/projects/1/tickets/10`。要生成这个 URL，我们需要知道项目的 id 和票证，所以这两个对象都需要传入。

一个编辑 URL 更进一步，并添加了一个动作关键字 - `/projects/1/tickets/10/edit`，所以我们需要再次传入这个动作。

然而，Rails 中的 RESTful 销毁路由使用 HTTP 方法 DELETE 而不是 action 关键字，因此销毁票证的 URL 确实是`/projects/1/tickets/10`; 只需使用 DELETE 请求而不是 GET。

有关更多信息，我建议从[外向内阅读 Rails Routing](http://guides.rubyonrails.org/routing.html)

# c# - 为什么要使用托管（C# 和 .NET）或本机代码进行 Windows API 开发？

> ID：10713864
> 
> 赞同：0
> 
> 时间：2012-05-23T05:18:32.233
> 
> 标签：c#, c++, windows, winapi

作为一名学习 Windows API 编程的开发人员，我应该使用本机代码的一些原因，以及我应该使用托管代码的一些原因是什么？

假设我同样熟悉非 Windows API 编程的两种类型的开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T05:22:14.393

**.NET**：生产力，易于开发。缺少某些 API，需要使用`PInvoke`

**C++ 中的 Win32 API**：所有 API 都可用。有时它们更难使用，因为底层的复杂性并没有隐藏在 .NET 类后面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:24:22.253

通常，这完全取决于您需要的控制量以及完成某事所需的时间。

您可以使用 .NET 框架快速完成工作，因为大多数功能都是内置的（尽管是千篇一律的东西）。

如果您需要对应用程序及其对某些事件的反应方式进行极高级别的控制，则可以使用使用 MFC 的非托管 C++ 应用程序。

# iphone - tempUITextView setText: @"some text" 给出错误

> ID：10713867
> 
> 赞同：-3
> 
> 时间：2012-05-23T05:18:50.057
> 
> 标签：iphone, objective-c, uiview, uitextfield, settext

我创建了一个 UIView* myView 然后我创建了一个 UITextVIew *tempUITextView 并将其文本设置为

```
[tempUITextView setText:@"some text"];
[myView addSubView: tempUITextView]; 
```

当我运行代码时，它给出了一个错误：**由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[UIView setText：]：**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:29:31.813

做以下事情：

```
UIView *myView = [[UIView alloc]initWithFrame:CGRectMake(0, 280, 320, 180)];//Any frame you want to set
[myView setBackgroundColor:[UIColor redColor]]; // Given color to differntiate between myView and tempUITextView
UITextView *tempUITextView = [[UITextView alloc]initWithFrame:CGRectMake(0, 0, 200, 100)];//Any frame for tempUITextView in myView
[tempUITextView setText:@"hi"];
[myView addSubview:tempUITextView];
[self.view addSubview:myView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:47:07.737

你的错误在这一行

```
UITextView* tempUITextView =[[[UIView alloc]initWithFrame:CGRectMake(0, 0, 100, 30)] autorelease]; 
```

将其替换为

```
UITextView* tempUITextView =[[[UITextView alloc]initWithFrame:CGRectMake(0, 0, 100, 30)]autorelease]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T05:36:21.020

您是否将 IBOutlets 用于视图和文本视图？如果是，请检查您是否将插座连接到错误的对象。

# javascript - 与 IIS 7 和 Cassini 相比，当 Web 应用程序托管在 IIS 6 上时，IE 的行为有所不同

> ID：10713868
> 
> 赞同：0
> 
> 时间：2012-05-23T05:18:54.977
> 
> 标签：javascript, html, internet-explorer, iis, iis-6

我有一个 Web 应用程序，可以在我的开发机器上的所有浏览器（IE9、Firefox、Chrome、Opera 和 Safari）上正常运行。当我将 Web 应用程序部署到测试服务器时，IE 将开始阻塞特定的 javascript 组件 (Zoomify)。

我可以在一个选项卡中使用开发托管 Web 应用程序打开 IE 9，在另一个选项卡中打开测试服务器 Web 应用程序，并且只有开发托管应用程序可以工作。除了 web.config 之外，两台机器上的 Web 应用程序代码完全相同。

开发人员工具将两个站点都显示为`Browser Mode: IE9 Document Mode: IE9 standards`.

Zoomify 组件在以下行失败：

```
c.onreadystatechange=null 
```

出现错误：

```
SCRIPT13: Type mismatch 
```

这里发生了什么？为什么 IE 处理 Javascript 的方式会根据 Web 应用程序的托管位置而有所不同？

* * *

# 更新

我现在已经在另一台服务器上进行了测试，奇怪的是它正在工作。此时的情况是，当 web 应用程序托管在 IIS 6 上时，javascript 文件在 IE 中会失败。

Opera 中也存在类似问题，但我没有收到错误消息。

```
Dev Machine
Windows 7
Web Server: Cassini
Status: Working

Test Server 1
Windows Server 2003
Web Server: IIS 6.0
Status: Not working

Test Server 2
Windows Server 2008
Web Server: IIS 7.0
Status: Working 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:21:55.820

我的猜测是应用程序在两个不同环境之间的部署方式之间存在路径差异......这可能会导致错误的 JS 引用您是否在测试服务器上使用虚拟目录等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:31:36.350

您是否在脚本元素上声明类型？我认为是这样，或者如果您有指定 X-Content-Type-Options: nosniff 的 http 响应标头

你可以在这里参考：http: [//blogs.msdn.com/b/ieinternals/archive/2010/09/27/ie9-beta-google-image-search-javascript-content-type-and-nosniff.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/09/27/ie9-beta-google-image-search-javascript-content-type-and-nosniff.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:08:03.200

失败的 javascript 行`c.onreadystatechange=null`具有误导性。通过调试 Zoomify javascript 代码，我能够确定在调用堆栈的更深处生成了一个错误。

`XMLHttpRequest`Zoomify 组件试图下载图像以进行显示，但由于 IE 不支持对对象的跨域调用而失败。`XDomainRequest`IE 确实支持使用该对象的跨域调用。但是，Zoomify 组件不提供对`XDomainRequest`. Opera 11 也不支持跨域调用。

对于 IE 和 Opera 的问题，我的解决方法是不使用跨域调用，并通过与 Web 应用程序相同域上的 URL 使图像资源可用。

# mysql - 如何使用 mysql odbc 连接器为远程系统创建 dsn 名称

> ID：10713871
> 
> 赞同：1
> 
> 时间：2012-05-23T05:19:23.403
> 
> 标签：mysql, sql-server

我想使用 (java/mssql) 从我的系统访问远程 mysql。

当我开始工作时，我使用 mssql 2008 r2 创建了链接服务器，当时我使用 mysql odbc 连接器为 mysql 数据库创建了一个 DSN 名称，我使用

> 本地主机

作为服务器名称，但实际上我需要在 DSN 上为远程服务器而不是我想使用的本地主机创建

> 192.168.1.120

在那我遇到了类似的错误

> 连接失败 hy000 mysql odbc 5.1 驱动程序无法连接到 mysql 服务器

请帮帮我，我在最后 7 天工作

提前致谢

# php - 对字符串中的任何数字使用函数

> ID：10713874
> 
> 赞同：1
> 
> 时间：2012-05-23T05:19:34.643
> 
> 标签：php, string, number-formatting

我试图把它带到这个字符串

`**string** = 55 Banana Slush 25 Test`进入`Fifty five Banana Slush twenty five test`

现在我有了将任何数字转换为单词的功能`replaceNumtoWord($number)`

但是我需要获取**字符串**，找到每个数字，然后在字符串中的每个数字上使用该函数，而不是从中提取数字。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:36:46.883

您可以使用[`preg_replace_callback()`](http://php.net/preg_replace_callback)：

```
$str = preg_replace_callback('/\d+/', function($match) {
    return replaceNumToWord($match[0]);
}, $str); 
```

如果您必须使用不支持匿名函数的旧 PHP 版本：

```
function _num2word_cb($match) {
    return replaceNumToWord($match[0]);        
}
$str = preg_replace_callback('/\d+/', '_num2word_cb', $str); 
```

旁注：该模式`\d+`将匹配任何数字序列，无论它们出现在哪里，例如它将匹配“my10,20,30foo”中的 10、20 和 30。`\b\d+\b`如果您只想匹配 20 ，则可以将模式更改为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:40:08.873

您可以使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)。

```
function transNumber($str) {
  return preg_replace_callback('/\d+/', function($matches){
            return replaceNumtoWord($matches[0]);
         }, $str);
} 
```

如果您的 php 版本 < 5.3，那么您需要定义传递给 preg_replace_callback 的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T05:44:55.597

```
preg_replace_callback ( mixed $pattern , callable $callback , mixed
 $subject [, int $limit = -1 [, int &$count ]] ) 
```

此函数的行为几乎与 preg_replace() 相同，除了应该指定回调而不是替换参数这一事实。

# javascript - javascript中的小数减法问题

> ID：10713878
> 
> 赞同：11
> 
> 时间：2012-05-23T05:20:01.440
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

当我减去 6.4-1.6 时，我在 JS 中得到的答案是 4.800000000000001，但我需要 4.8，而不使用 toFixed()、toPrecision() 和 Math.round()。任何想法？？？

谢谢，

水晶

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-23T05:26:49.173

在进行减法之前转换为整数以避免浮点运算问题：

```
(6.4 * 10 - 1.6 * 10) / 10 
```

看看[每个程序员应该知道的关于浮点运算的知识](http://floating-point-gui.de/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T05:24:47.870

这是IEEE 754 浮点数[的众所周知的限制。](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)请参阅[如何处理 JavaScript 中的浮点数精度？](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)为解决方案。

# android - 无法使用 ActionBarSherlock 库

> ID：10713886
> 
> 赞同：2
> 
> 时间：2012-05-23T05:20:30.337
> 
> 标签：android, actionbarsherlock

我已经使用 API 15 从现有源（ActionBarSherlock 库）创建了一个新的 android 项目。我将此库添加到我的项目中（**项目属性 -> android -> library-> add ->com_actionbarsherlock ->apply ->ok**）。但是当我再次看到（项目属性-> android-> library->）**com_actionbarsherlock 显示红色十字**。所以，我无法导入库类。我真的很挣扎。我附上了两个屏幕截图 添加库时的屏幕截图和添加库后的屏幕截图。任何帮助将不胜感激。![添加库时的屏幕截图](../Images/bed924b1f3fd4faf06268e35545920f6.png) ![添加库后的屏幕截图](../Images/83bc1a721db757172c9d14796f14c7b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:29:26.740

如果您正在使用`ActionBarSherlock v4.0`或更高版本，则需要针对 API 15 构建您的项目。

# android - 在手指触摸上移动文本视图作为拖放：android

> ID：10713887
> 
> 赞同：2
> 
> 时间：2012-05-23T05:20:32.537
> 
> 标签：android

我的朋友..我可以在视图上使用手指触摸来移动图像，但现在我想移动文本视图而不是图像但无法这样做..我可以将文本视图视为图像..意味着如果不能转换text-view in to image 然后我将传递图像对象..我在视图中移动图像的代码如下：

```
 public class MainGamePanel extends SurfaceView implements
    SurfaceHolder.Callback {

private static final String TAG = MainGamePanel.class.getSimpleName();

private MainThread thread;
private Droid droid;

public MainGamePanel(Context context) {
    super(context);
    // adding the callback (this) to the surface holder to intercept events
    getHolder().addCallback(this);

    // create droid and load bitmap
    droid = new Droid(BitmapFactory.decodeResource(getResources(), R.drawable.droid_1), 50, 50);

    // create the game loop thread
    thread = new MainThread(getHolder(), this);

    // make the GamePanel focusable so it can handle events
    setFocusable(true);
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // at this point the surface is created and
    // we can safely start the game loop
    thread.setRunning(true);
    thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    Log.d(TAG, "Surface is being destroyed");
    // tell the thread to shut down and wait for it to finish
    // this is a clean shutdown
    boolean retry = true;
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // try again shutting down the thread
        }
    }
    Log.d(TAG, "Thread was shut down cleanly");
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // delegating event handling to the droid
        droid.handleActionDown((int)event.getX(), (int)event.getY());

        // check if in the lower part of the screen we exit
        if (event.getY() > getHeight() - 50) {
            thread.setRunning(false);
            ((Activity)getContext()).finish();
        } else {
            Log.d(TAG, "Coords: x=" + event.getX() + ",y=" + event.getY());
        }
    } if (event.getAction() == MotionEvent.ACTION_MOVE) {
        // the gestures
        if (droid.isTouched()) {
            // the droid was picked up and is being dragged
            droid.setX((int)event.getX());
            droid.setY((int)event.getY());
        }
    } if (event.getAction() == MotionEvent.ACTION_UP) {
        // touch was released
        if (droid.isTouched()) {
            droid.setTouched(false);
        }
    }
    return true;
}

@Override
protected void onDraw(Canvas canvas) {
    // fills the canvas with black
    canvas.drawColor(Color.BLACK);
    droid.draw(canvas);
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T03:03:07.090

我可以通过添加一个`OnTouchListener`到我的`TextView`，将视图移动到移动事件的位置来实现这一点。

```
moveableText.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            // Offsets are for centering the TextView on the touch location
            v.setX(event.getRawX() - v.getWidth() / 2.0f);
            v.setY(event.getRawY() - v.getHeight() / 2.0f);
        }

        return true;
    }

}); 
```

这是在没有标题栏的全屏活动中，所以我想您需要从 y 坐标中减去标题栏（可能还有通知栏？）的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-22T09:49:17.640

我想让 TextView 只水平移动，上面的代码确实帮助了我，但它看起来有点不稳定，因为 textview 的中间总是指向手指。所以我稍微修改了代码，让它看起来更自然：

```
float diffFingerMove = 0;
private void moveViewOnFinger(View view, MotionEvent event){
    float fingerPos = event.getRawX();

    if(event.getAction() == MotionEvent.ACTION_DOWN){
        diffFingerMove = fingerPos - view.getX();
    }
    view.setX(fingerPos - diffFingerMove);
} 
```

# java - 旋转android上的进度消失了

> ID：10713890
> 
> 赞同：2
> 
> 时间：2012-05-23T05:21:03.050
> 
> 标签：java, android

我正在使用 AsyncTask 下载文件。我在那里实现了进展：

```
//Updating progress dialog
protected void onProgressUpdate(Integer... changed) {
    progressDialog.setProgress(changed[0]);
}

//STARTED 
@Override
protected void onPreExecute() {

    try {
        progressDialog = new ProgressDialog(context);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setMessage(context
                .getString(R.string.message_loading));
        progressDialog.setCancelable(false);
        progressDialog.show();
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
} 
```

纵向和横向一切正常。为了通知文件已下载，我正在使用界面。

所以错误是当我开始以纵向或横向下载我的文件时，虽然它没有完成，但我旋转设备然后进度消失并回调触发异常，因为无处可去。

当我旋转设备时，我的活动被重新创建，那么如何正确地做到这一点。我需要限制下载开始时用户无法旋转设备，然后如何做到这一点。

或者有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:32:32.947

如果您想在下载时限制方向，那么在开始下载之前使用此代码。这将限制用户的设备方向。

```
int current_orientation = getResources().getConfiguration().orientation;
if (current_orientation == Configuration.ORIENTATION_LANDSCAPE) {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} else {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

您可以在完成定向后使用此代码，允许用户再次旋转设备。

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:50:14.390

> 我需要限制下载开始时用户无法旋转设备，然后如何做到这一点。

为此，在显示进度对话框之前，您需要修复设备方向。

```
onPreExecute(){
.....
.....
Activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
//in case activity started in landscape mode
progressDialog.show();
} 
```

一旦你完成下载..你可以恢复到正常的方向变化。

```
onPostExecute(){
Activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
progressDialog.dismiss();
} 
```

我将建议另一种解决方案.. 不要限制活动的方向，而是可以在清单文件中添加“configChanges="Orientation"" 属性，请检查 onPreExecute() 方法和 setProgress(进度）如果它不为空。

```
onPreExecute(){
if(progressDialog!=null){
   progressDialog.setProgress(progress);
}
else{
......
......
}
} 
```

# java - 在 Web 浏览器中运行 java 代码

> ID：10713892
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:21:35.033
> 
> 标签：java, web-applications

作为一名学生，我创建了一个网站来主持实验。这个实验不过是 java 或 c++ 中的源代码。例如，如果我们必须开发一个打印前 10 个数字的代码，那么我将托管一个名为（比如）“numbers.java”的文件，其中包含以下代码

```
import java.io.*;
class numbers
{
  public static void main( String args[])
  {
    int i;
    for(i=1;i<=10;i++)
    {
      system.out.println(i);
    }
  }
} 
```

这只是一个例子。我托管此类文件，人们在进行实践时确实会参考它们。

但作为开发人员，我想创建类似于 Google 游乐场的游乐场。在这个操场上，人们可以在网络浏览器本身中在线执行这些代码。

我知道这样的代码可以用小程序执行，甚至可以用 php 重写以执行，但我仍然不想重写工作，我想像在网络浏览器上一样执行它们。这只是意味着我想在网络浏览器 中运行**.java文件。**

因此，可以在 Web 浏览器中运行上面显示的 java 代码。如果可能的话，请向我建议我应该在上面的代码中进行的更改。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:34:41.293

如果您使用的是 Java 6 或更高版本，您可能需要查看[JSR 223](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)（JDK 的通用脚本）。除此之外，它还允许您将 Java 代码作为脚本运行，例如与[BeanShell](http://www.beanshell.org/intro.html)一起使用时。

# cryptography - 安全 StringSinks

> ID：10713902
> 
> 赞同：4
> 
> 时间：2012-05-23T05:22:30.667
> 
> 标签：cryptography, cryptoapi, crypto++

所以似乎在 Crypto++ 中使用算法的常用方法是使用`StringSinks`，它是通过传递对 a 的引用来启动的`std::string`。

`std::string` [但是如果你因为安全问题](https://stackoverflow.com/questions/10683941/clearing-memory-securely-and-reallocations)不想使用怎么办？是否可以将数据放入类似的东西中`SecByteBlock`，或者我是否必须创建自己的接收器类，以重新增长的安全缓冲区字符串类为目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T06:26:17.213

试试[SecByteBlockSink 补丁](https://groups.google.com/d/msg/cryptopp-users/m79y5vh6Stg/IT-w6yToDlwJ)。它被发布到 Crypto++ 用户组，但 Wei 从未将其合并到库中。这里还有一个 wiki 页面：[SecByteBlockSink](http://www.cryptopp.com/wiki/SecByteBlockSink)。

```
$ cat filters.h.patch
Index: filters.h
===================================================================
--- filters.h        (revision 525)
+++ filters.h        (working copy)
@@ -10,6 +10,7 @@
 #include "queue.h"
 #include "algparam.h"
 #include <deque>
+#include <limits>

 NAMESPACE_BEGIN(CryptoPP)

@@ -805,6 +806,31 @@
                 {SourceInitialize(pumpAll,
MakeParameters("RandomNumberGeneratorPointer",
&rng)("RandomNumberStoreSize", length));}
 };

+class CRYPTOPP_DLL SecByteBlockSink : public Bufferless<Sink>
+{
+public:
+        SecByteBlockSink(SecByteBlock& sbb) : m_sbb(sbb) { }
+
+        size_t Put2(const byte *inString, size_t length, int /*messageEnd*/, bool /*blocking*/)
+        {
+                if(!inString || !length) return length;
+
+                const size_t size = m_sbb.size();
+                const size_t max = std::numeric_limits<std::size_t>::max() - size;
+
+                if(length > max)
+                        InvalidArgument("SecByteBlockSink: buffer overflow");
+
+                m_sbb.resize(size+length);
+                memcpy(m_sbb.begin()+size, inString, length);
+                
+                return 0;
+        }
+
+private:
+        SecByteBlock& m_sbb;
+};
+
 NAMESPACE_END

 #endif 
```

# click-framework - apache中的数据提供者方法点击

> ID：10713903
> 
> 赞同：0
> 
> 时间：2012-05-23T05:22:50.533
> 
> 标签：click-framework

数据提供者方法可以只写 apache click 的 onInit() 方法还是也可以用任何其他方法写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:47:39.707

No, you could add it pretty much anywhere as long as the provider is available when the control gets rendered. Adding the provider in the onInit or Page constructor is simply the most common place to use.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:18:24.233

DataProvider 是一个控件的接口，遵循 Page[1] 初始化序列，设置该接口的最佳位置是在 Page 的 onInit() 方法 [2] 上：

> 对于初始化页面控件，最佳实践是将所有控件创建代码放在页面构造函数中，并且**只将任何初始化代码放在对上下文或其他对象具有外部依赖关系的 onInit() 方法中。**通过遵循这种做法，很容易看出什么代码是“设计时”初始化代码以及什么是“运行时初始化代码”。

以下文章[3] 将帮助您了解如何使用 DataProviders。

吉尔伯托

[1] [http://click.apache.org/docs/click-api/org/apache/click/Page.html](http://click.apache.org/docs/click-api/org/apache/click/Page.html)

[2] [http://click.apache.org/docs/click-api/org/apache/click/Page.html#onInit](http://click.apache.org/docs/click-api/org/apache/click/Page.html#onInit) ()

[3] [http://click-framework.blogspot.com.br/2010/07/apache-click-220-dataprovider.html](http://click-framework.blogspot.com.br/2010/07/apache-click-220-dataprovider.html)

# linux - 如何在 linux 中检查哪些进程/tomcat 服务器正在使用某些 jdk 或 jre

> ID：10713904
> 
> 赞同：0
> 
> 时间：2012-05-23T05:22:51.447
> 
> 标签：linux, tomcat, java

我想检查哪些进程在 linux 中使用某些 java jdk 或 jre。linux环境的服务器中有很多tomcat服务器和不同的jdk 5/6等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:16:23.957

怎么查？如果要从命令行检查：

```
ps ax | grep java 
```

将为您提供正在运行的内容以及他们正在使用的 java 的列表。然后您可以使用 java -version 标志查找该版本

# selenium-webdriver - webdriver - 从下拉列表中选择国家/地区而不使用 xpath

> ID：10713914
> 
> 赞同：0
> 
> 时间：2012-05-23T05:23:51.483
> 
> 标签：selenium-webdriver

```
<a id="SIU2_country" class="button combobox-button country" onclick="event.cancelBubble = true; if (event.stopPropagation) { event.stopPropagation(); }" tabindex="9" style="cursor: auto;">
<span id="SIU2_country_span">&nbsp;</span>
<div class="combobox-menu" style="width: 298px; max-height: 212px; display: block;">
<div class="combobox-menu-item">
<span>United States</span>
</div>
<div class="combobox-menu-item">
<span>United Kingdom</span>
</div>
<div class="combobox-menu-item"> 
```

尽量避免在 webdriver 中使用 xpath：

```
(By.xpath("//a[@id='SIU2_country']/div/div/span[contains(text(),'United Kingdom')]")); 
```

如何使用 id 或 cssselector 从下拉列表中选择英国？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:46:45.700

怎么样

```
List<WebElement> menuItemsList = driver.findElement(By.id("SIU2_country")).findElements(By.className("combobox-menu-item"));
WebElement menuItem = menuItemsList.get(1).findElement(By.tagName("span")); 
```

不过这有点难看……请问在这里使用 xpath 有什么问题吗？

# android - 服务停止时如何隐藏状态栏上的gps图标？

> ID：10713915
> 
> 赞同：1
> 
> 时间：2012-05-23T05:23:59.383
> 
> 标签：android

当我的服务被禁用时，我需要从状态栏中隐藏 GPS 图标。

在我的应用程序中，我有两个菜单选项，当我按下“启用”时，gps 图标必须显示在状态栏上，当我按下“禁用”时，gps 图标不应显示在状态栏上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:24:12.673

如果您通过 请求 GPS 更新`LocationManager`，您可以使用此功能删除更新（禁用 GPS）：

```
locationManager.removeUpdates(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:57:46.367

要在服务停止时隐藏 GPS 图标，您需要删除当前活动位置更新的注册。

您可以通过调用`removeUpdates(PendingIntent intent)`位置管理器来执行此操作。

```
removeUpdates(PendingIntent intent)
Removes any current registration for location updates of the current activity with the given PendingIntent. 
```

看看这个[链接](http://developer.android.com/reference/android/location/LocationManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:27:00.303

只需您必须禁用 GPS 设备。当您禁用 GPS 时，图标将从系统托盘中消失。

[检查这个问题的答案。](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:42:04.873

简单的。当您需要该图标时，启用 GPS，当您不想要它时，禁用 GPS。

# vim - ctags 是否支持 zip 或 jar 文件？

> ID：10713921
> 
> 赞同：3
> 
> 时间：2012-05-23T05:24:18.260
> 
> 标签：vim, jar, ctags

ctags 是否支持 zip 或 jar 文件？
我想在 vim 中使用 ctags 来编程 java。
所以我希望ctags在jar中搜索java文件。

我不想解压缩jar，这将很难管理文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:18:23.767

在*ctags*构建的标签数据库中，它必须引用相对于标签数据库的索引文件。由于没有通用的符号来引用 ZIP 文件中的内容（可以随便描述为`/path/to/archive.zip:dirs/inside/file.txt`），因为这是普通文件系统中的一个单独的文件系统，所以这是不可能的。您必须解压缩 JAR 文件。

# node.js - node.js + jam + express：如果路径匹配，我如何创建一个将类设置为活动的导航

> ID：10713923
> 
> 赞同：12
> 
> 时间：2012-05-23T05:24:25.400
> 
> 标签：node.js, express, pug

我想出了以下代码，但问题是，每个菜单项都会有重复的锚标记。有没有更好的方法来做到这一点？

```
 ul.nav
                    - if(menu="Home") 
                        li.active
                            a(href="#") Dashboard
                    else
                        li
                            a(href="#") Dashboard
                    li 
                        a(href="#") About
                    li 
                        a(href="#") Contact 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T22:47:10.873

在另一个[类似的问题中](https://stackoverflow.com/questions/9488029/how-does-one-add-a-conditional-inside-of-a-link-in-jade)发现了这一点：

在每个“li”处使用三元组

```
ul
    li(class=(title === 'Home' ? 'active' : ''))
        a(href='#') Home
    li(class=(title === 'Dashboard' ? 'active' : ''))
        a(href='#') Dashboard 
```

如果需要，您可以设置路由以传递“菜单”值而不是使用“标题”：

```
exports.index = function(req, res) {
    res.render('index', {title: 'Home', menu: 'Home'});
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T05:59:20.337

这有更少的重复。

```
ul.nav
  each name in ["Dashboard", "About", "Contact"]
    if (menu=="Home")
      li.active
        a(href="#")= name
    else
      li
        a(href="#")= name 
```

使用 javascript添加`active`类可能会更好，或者您可以使用直接的 CSS`a:active`选择器获得所需的演示文稿。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T08:36:25.970

`href`这是一个替代方案，它在锚文本方面提供了比 Peter 的解决方案更大的灵活性。

```
nav
  // suppose title local denotes the active nav item
  - var nav = {}; nav[title] = 'active'
  ul
    // pass title to li class via nav object
    li(class='#{nav.Home}')
      // different href and anchor text
      a(href='/') Home
    li(class='#{nav.About}')
      a(href='/about') About
    li(class='#{nav.Contact}')
      a(href='/contact') Contact 
```

需要注意的是，那些`li`不活跃的会有一个`undefined`类，这在大多数情况下没有害处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-02T07:38:31.190

您可以在数据中传递 pageName。

```
each menu in ["Home", "Dashboard", "Contact", "About"]
    if (menu == pageName)
      li.active
        a(href="/#{menu}")= menu
    else
      li
        a(href="/#{menu}")= menu 
```

你可以调用渲染

```
res.render("index", { pageName: 'Home'})

res.render("index", { pageName: 'Dashboard'})

res.render("index", { pageName: 'Contact'}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-16T15:21:00.333

非常灵活，没有重复：

```
ul
  each menuitem in [{title:'Home',url:'/'},{title:'About',url:'/about'},{title:'Contact',url:'/contact'}]
    if (menuitem.title == title)
      li.active
        a.active(href=menuitem.url) #{menuitem.title}
    else
      li
        a(href=menuitem.url) #{menuitem.title} 
```

您需要设置页面的当前*标题*。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T07:05:21.453

我认为最好像这样将一个body类设置为当前路径

```
body(class = currentPath) 
```

因此，您可以使用选择器，例如

```
body.home .nav li.home, body.dashboard .nav li.dashboard {
  Style when current path
} 
```

这些选择器可以简化为最小的“body.path.path”，但它可能不够隔离。

这在客户端逻辑中也很有用，因为此选择器可用于确定 JavaScript 中的路径，例如

```
$("body.home").doSomethingSpecificToHome 
```

这样，您的模板的逻辑就少了很多。

现在，我认为没有办法根据 URL 自动设置“currentPath”。基于 'url':'path' 的助手可能很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-21T08:30:00.757

类似于@netAction 的帖子，但依赖于 URL 而不是标题。

```
each menuitem in [{title:'Home',url:'/'},{title:'About',url:'/about'},{title:'Contact',url:'/contact'}]
    if (path == menuitem.url)
        li.active
            a.active(href=menuitem.url) #{menuitem.title}
    else
        li
            a(href=menuitem.url) #{menuitem.title} 
```

结合

```
app.use(function(req, res, next) {
    res.locals = {
        isAuthenticated: req.isAuthenticated(),
        path :req.path
    }

    next(); // make sure we go to the next routes and don't stop here
}); 
```

# git - 如何让 WinMerge 成为我的 git 合并工具？

> ID：10713925
> 
> 赞同：61
> 
> 时间：2012-05-23T05:24:42.487
> 
> 标签：git, winmerge, difftool, mergetool

我正在尝试将 WinMerge 与 Git 集成，正如我之前在 Windows 7 Ultimate 上看到的其他人所做的那样。

我已经按照以下步骤操作，但是当我执行默认为 vimdiff 的 git mergetool 时，仍然会出现错误。

在 git 的根目录中创建了一个名为 winmerge.sh 的文件：C/Program Files (x86)/Git/，其中：WinMergeU 是正确的位置。

```
#!/bin/sh
echo Launching WinMergeU.exe: $1 $2
"C:/Program Files (x86)/WinMerge/WinMergeU.exe" 
git /e /u /dl "Base" /dr "Mine" "$1" "$2" 
```

并使用以下命令。

```
git config --global diff.tool winmerge
git config --global difftool.winmerge.cmd "winmerge.sh \"$LOCAL\" \"$REMOTE\""
git config --global difftool.prompt false 
```

错误显示为：

```
git config option merge.tool set to unknown tool: winmerge 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-05-01T23:04:17.143

您正在谈论*merge tool*，但您（以及其他一些有答案的人）正在将其配置为*diff tool*。

要配置合并工具，您需要使用`merge.tool`and`mergetool`配置而不是`diff.tool`and `difftool`，如下所示：

```
git config --global merge.tool winmerge
git config --replace --global mergetool.winmerge.cmd "\"C:\Program Files (x86)\WinMerge\WinMergeU.exe\" -e -u -dl \"Base\" -dr \"Mine\" \"$LOCAL\" \"$REMOTE\" \"$MERGED\""
git config --global mergetool.prompt false 
```

然后你可以使用

```
git mergetool 
```

这将打开您要编辑的两个文件。

@dvdvck 在评论中提到，在[命令行参数](http://manual.winmerge.org/Command_line.html)中，您可以为 winmerge 的结果文件指定第三个文件（输出路径参数）。

为了完整起见，我会提到还有[这个要点](https://gist.github.com/shawndumas/6158524)旨在完整配置 winmerge 作为 diff 和合并工具。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-07-11T16:51:10.380

如果您决定使用 SourceTree（或任何使用 SourceTree 的 Google 搜索者），您可以通过将 Merge Tool 设置为 custom 将 WinMerge 用于 Merge Tool，将 Diff Command 指向 WinMergeU.exe，通常：

```
C:\Program Files (x86)\WinMerge\WinMergeU.exe 
```

在参数中使用：

```
-e -u -dl "Mine" -wr -dr "Theirs" $LOCAL $REMOTE $MERGED 
```

这将导致左侧（标记为“我的”）可编辑，并且当您在 WinMerge 中保存时它将成为输出文件。右侧（标记为“他们的”）将是只读的（即 -wr 参数），这是必需的，因为 WinMerge 将所有保存的文件输出到 $MERGED 文件，所以如果双方都被编辑，它会输出左侧然后用右侧覆盖它；最好避免这种混乱。

如果您打开备份文件选项，WinMerge 将生成一个 .bak 文件。此文件的内容将是原始左侧文件，或者如果您多次保存，则为倒数第二个输出文件。您可以将其关闭，或将 *.bak 添加到您的 .gitignore 文件中。

Git 本身会在冲突解决后创建一个 *.orig 冲突文件，以防万一你搞砸了。同样，您可以将 *.orig 添加到您的 .gitignore 文件或关闭此功能。不幸的是，SourceTree 没有用于此的 GUI 选项，因此请启动您的 git bash，或者，如果您在安装期间选择了正确的 PATH 选项，请在 Windows 命令提示符下执行以下操作：

```
git config --global mergetool.keepBackup false 
```

这将停止 Git 创建 *.orig 文件。您还可以通过在用户目录的根目录中找到 .gitconfig 文件来直接编辑配置文件。如果您知道如何使用 VIM，则可以使用以下命令编辑整个内容：

```
git config --global --edit 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-06-07T22:46:21.247

Git 2.5+（2015 年第二季度）将包括 Winmerge 作为一个已知的[`git mergetool`](http://git-scm.com/docs/git-mergetool)！

如果 Winmerge 在您的中`%PATH%`，`git config merge.tool winmerge`那么您只需要做一个！
（它也适用于差异工具`git config diff.tool winmerge`：）

请参阅[David Aguilar (](https://github.com/davvid) [)的](https://github.com/davvid)[提交 3e4f237，2015](https://github.com/git/git/commit/3e4f2373b295e19dbc1a6bd0e743f65b500b7bda)年5 月 20 日。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 324a9f4](https://github.com/git/git/commit/324a9f41cbf96ad994efc3b20be239116eba0dae))^(中，2015 年 6 月 1 日）) 帮助者：[Philip Oakley (](https://github.com/PhilipOakley) [)](https://github.com/PhilipOakley)、[Johannes Schindelin (](https://github.com/dscho) [)](https://github.com/dscho)、[Sebastian Schuberth (](https://github.com/sschuberth) [)](https://github.com/sschuberth)、[SZEDER Gábor (](https://github.com/szeder) [)](https://github.com/szeder)[`davvid`](https://github.com/davvid)
^([`gitster`](https://github.com/gitster))
[`PhilipOakley`](https://github.com/PhilipOakley)[`dscho`](https://github.com/dscho)[`sschuberth`](https://github.com/sschuberth)[`szeder`](https://github.com/szeder)

现在，所有配置都直接在 Git 本身中为您完成，其中[`mergetools/winmerge`](https://github.com/git/git/blob/324a9f41cbf96ad994efc3b20be239116eba0dae/mergetools/winmerge)：

*   差异命令：`"$merge_tool_path" -u -e "$LOCAL" "$REMOTE"`
*   合并命令：`"$merge_tool_path" -u -e -dl Local -dr Remote "$LOCAL" "$REMOTE" "$MERGED"`

> ## `mergetools`: 添加 winmerge 作为内置工具
> 
> [使用此线程](http://thread.gmane.org/gmane.comp.version-control.git/268631)中描述的命令添加一个 winmerge scriptlet ，以便用户无需执行任何额外配置即可使用 winmerge。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-23T05:56:25.923

这是我的（在`%userprofile%\.gitconfig`或`~/.gitconfig`*nix 上），没有包装器（Win 7 Home Pro）：

```
[diff]
    tool = winmerge
[difftool "winmerge"]
    cmd = c:/path/to/winmergeu.exe -e -u -x -wl -wr -dl "base" -dr "mine" \"$LOCAL\" \"$REMOTE\" 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-05-01T02:21:49.040

这更容易做到，并且对我有用：

```
git config --global diff.tool winmerge

git config --replace --global difftool.winmerge.cmd "\"C:\path to winmerge\WinMergeU.exe\" -e -u -dl \"Base\" -dr \"Mine\" $LOCAL $REMOTE"

git config --global difftool.prompt false 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-07-25T06:54:37.207

要将 WinMerge 作为 Visual Studio 2017 Git 插件的比较和合并工具：

在 Windows 命令提示符下：输入 >> git config --global --edit 这将打开 .getconfig 文件进行编辑。

请使用以下命令更新：

```
[mergetool]
   prompt = false
   keepBackup = false
   keepTemporaries = false
[merge]
   tool = winmerge
   [mergetool "winmerge"]
   name = WinMerge
   trustExitCode = true
   cmd = \"C:\\Program Files (x86)\\WinMerge\\WinMergeU.exe\" -e -u -dl \"Base\" -dr \"Mine\" \"$LOCAL\" \"$REMOTE\" \"$MERGED\"
[diff]
   tool = winmerge
   [difftool "winmerge"]
   name = WinMerge
   trustExitCode = true
   cmd = \"C:\\Program Files (x86)\\WinMerge\\WinMergeU.exe\" -u -e $LOCAL $REMOTE 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-07-02T12:33:48.773

我最初赞成@CapinWinky 对使用 SourceTree 中的 WinMerge 的回答。该答案仍然有效，但 WinMerge 现在还支持需要额外参数的三向合并。

在 SourceTree 选项对话框中，我选择“自定义”作为合并工具，输入命令如下：

```
C:\Program Files\WinMerge\WinMergeU.exe 
```

和论据为：

```
-u -fm -wl -wr -dl Remote_RO -dm Local_Merged -dr Base_RO $REMOTE $LOCAL $BASE -o $MERGED 
```

似乎没有必要将远程/本地/基本参数括在引号中，以适应其中包含空格的路径。

此配置用于将中间窗格用作合并的输出文件。

[命令行参考](http://manual.winmerge.org/Command_line.html)

我遇到的问题是，在尝试合并时，WinMerge 无法打开。Sourcetree 启动 Git 以打开您选择的工具。当使用 Sourcetree 的自定义选项时，您的 git 配置文件（例如 C:\Users\Me\.gitconfig）被修改以添加一个名为“sourcetree”的新合并工具，并且 Git 命令包括`--tool=sourcetree`. 在某些时候，.gitconfig 文件没有正确更新，我在该部分中有两条“cmd”行，一条被破坏了：

```
[mergetool "sourcetree"]
    cmd = 'C:/Program Files/WinMerge/WinMergeU.exe' -u -fm -wl -wr -dl Remote_RO -dm Local_Merged -dr Base_RO $REMOTE $LOCAL $BASE -o $MERGED
    trustExitCode = true
    cmd = 'C:/Program ' 
```

手动修复 .gitconfig 文件对问题进行了排序。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-05-23T05:41:20.680

您的路径不正确，应该是`"/c/Program Files (x86)/WinMerge/WinMergeU.exe"`.

您在 shell 脚本环境中运行，而不是本机 Windows 命令提示符。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-09-12T11:37:50.777

安装 TortoiseGit 和 WinMerge 2.16（此版本支持 3 路合并）后，我发现 WinMerge 如何将自身集成到 TortoiseGit：

```
D:\Program Files\WinMerge\WinMergeU.exe /e /ub /fm /wl /wr /dl %tname /dm %bname /dr %yname  %theirs %base %mine /o %merged /am 
```

所以我编辑了`.gitconfig`文件并更改了一些变量以使其适合我（我将 WinMerge 目录添加到系统路径中）：

```
[mergetool "winmerge"]
    cmd = WinMergeU -e -ub -fm -wl -wr $LOCAL $BASE $REMOTE -o $MERGED -am 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-05T18:04:30.903

其他答案已经涵盖了通过命令行输入设置。与 WinMerge 完全 3 路合并的`.gitconfig`文件可以这样配置（此示例来自 Windows）：

```
[merge]
    tool = WinMerge

[mergetool "WinMerge"]
    cmd = \"C:\\Program Files\\WinMerge\\WinMergeU.exe\" -e -u -dl \"Local\" -dm \"Base\" -dr \"Remote\" \"$LOCAL\" \"$BASE\" \"$REMOTE\" -o \"$MERGED\"
    trustExitCode = true
    keepBackup = false

[diff]
    tool = WinMerge

[difftool "WinMerge"]
    cmd = \"C:\\Program Files\\WinMerge\\WinMergeU.exe\" -e -u -dl \"Old $BASE\" -dr \"New $BASE\" \"$LOCAL\" \"$REMOTE\"
    trustExitCode = true 
```

标志信息：

*   /e - 允许通过单击“esc”键关闭 WinMerge。
*   /u - 防止 WinMerge 将文件记录在最近使用的列表中。
*   /dl、/dm 和 /dl - 左侧、中间和右侧窗格的说明。
*   /o - 输出文件。保存**任何**窗格都会将该窗格的内容输出到输出文件。

`trustExitCode = true`告诉 git 在没有进一步提示的情况下接受输出。

`keepBackup = false`会自动删除自动生成的`*.orig`文件。

注意：使用 difftool 时的 $BASE 和 $MERGE 变量都只包含文件名。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-02T14:30:41.990

在为此烦恼了一个多小时后，我安装了[tortoisegit](https://code.google.com/p/tortoisegit/)，到目前为止，它给了我想要的东西。

[在http://thoai-nguyen.blogspot.com.au/2012/03/setup-tortoise-git-and-winmerge.html](http://thoai-nguyen.blogspot.com.au/2012/03/setup-tortoise-git-and-winmerge.html)中描述了 Tortoise git 的 Winmerge 设置

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-13T19:07:03.030

例子：

```
git config --global --add diff.tool winmerge
git config --replace --global difftool.winmerge.cmd "\"C:\Program Files (x86)\WinMerge\WinMergeU.exe\" -e -u -dl \"Base\" -dr \"Mine\" $LOCAL $REMOTE"
git config --global difftool.prompt false 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-24T10:44:11.017

这是唯一一个使用 Visual Studio 2019 和我的 winmerge 2.16.14.0 为我工作的人：C:\Users\CurrentUserAccount\.gitconfig

```
[difftool "winmerge"]
name = WinMerge
trustExitCode = true
    cmd = \"C:\\Program Files (x86)\\WinMerge\\WinMergeU.exe\" -e -u  \"$LOCAL\" \"$REMOTE\"
[diff]
    tool = winmerge
[difftool]
    prompt = false 
```

要检查的其他事项：文件 MySolution.git\config（是的，文件名为“config”，不带扩展名）：验证您是否有：

```
[diff]
tool = winmerge 
```

您可以使用以下命令对其进行修改（Visual Studio Menu "Git"\Open in Command Prompt"：

```
git config diff.tool winmerge 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-14T11:47:51.723

因此，我从未使用过三窗口模式进行合并，并且能够在上面的帮助下配置所有内容，但现在使用 Winmerge 2.16.16.0，我只能通过“打开冲突文件”选项获得所需的行为。它的 git 配置是：

```
cmd = \"c:/Programs/WinMerge/WinMergeU\" -e $MERGED 
```

至于我，这是最好的速度/可用性选项，无需手动处理那些特殊标记......

# android - 点击时更改 ListView 项目背景 - Android

> ID：10713929
> 
> 赞同：0
> 
> 时间：2012-05-23T05:24:55.633
> 
> 标签：android

我已经使用 BaseAdapter 准备了一个自定义列表视图。现在我想在单击事件上更改列表视图的选定项目的颜色。并且应该选择多个项目。这里我给出一个演示：

![在此处输入图像描述](../Images/e73d0635d407dd79a8724b0751c03853.png)

所选项目的颜色为橙色。这只是一个演示屏幕。如果有人知道如何更改所选列表项的整个背景颜色，请发表他们的评论。谢谢。

我正在使用这个 BaseAdapter 类：

```
public class MyListAdapter extends BaseAdapter {

private Activity activity;
private String[] title, artist, duration, rowNumber;
private static LayoutInflater inflater=null;
ViewHolder holder;

View vi;

public MyListAdapter (Activity context, String[] songTitle,String[] songArtist, String[] songDuration )
{
   try
   {
    activity = context;
    title = songTitle;
    artist = songArtist;
    duration = songDuration;

    rowNumber = new String[title.length];
    for(int i=0;i<title.length; i++){
        rowNumber[i] = Integer.toString(i+1);
    }
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

   }
   catch (NullPointerException e) 
   {
       e.printStackTrace();
   }
}

public int getCount() {
    return title.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public static class ViewHolder{
    private TextView txtSongNumber, txtSongTitle, txtSongArtist, txtSongDuration;

}

public View getView(int position, View convertView, ViewGroup parent) 
{
    try
    {
        vi=convertView;

       // System.out.println("Value of position"+position);
        if(convertView==null)
        {
            vi = inflater.inflate(R.layout.list_songs, null);
            holder=new ViewHolder();
            holder.txtSongNumber = (TextView)vi.findViewById(R.id.txtSongNumber);
            holder.txtSongTitle = (TextView)vi.findViewById(R.id.txtSongTitle);
            holder.txtSongArtist = (TextView)vi.findViewById(R.id.txtSongArtist);
            holder.txtSongDuration = (TextView)vi.findViewById(R.id.txtSongDuration);

            vi.setTag(holder);
        }
        else

            holder=(ViewHolder)vi.getTag();

        holder.txtSongNumber.setText(rowNumber[position]);
        holder.txtSongTitle.setText(title[position]);
        holder.txtSongArtist.setText(artist[position]);

        holder.txtSongDuration.setText(duration[position]);

    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
    return vi;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:13:09.820

它非常简单......只需尝试以下代码......

在您的列表适配器中：

先定义一个整数数组

```
ArrayList<Integer> itemPos = new ArrayList<Integer>(); 
```

然后在您的 getView 方法中使用此代码：

```
 if (itemPos.contains(position)) {
            holder.txtOne.setTextColor(Color.BLUE);
        } else {
            holder.txtOne.setTextColor(Color.WHITE);
        } 
```

现在在 Text View 的点击事件中使用此代码：

```
 if (!itemPos.contains(position)) {
                holder.txtOne.setTextColor(Color.BLUE);
                itemPos.add(position);
                notifyDataSetChanged();
            } else {
                holder.txtOne.setTextColor(Color.WHITE);
                notifyDataSetChanged();
                int po = itemPos.indexOf(position);
                itemPos.remove(po);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:41:31.457

由于您已经实现了 BaseAdapter，它有一个名为 getView 的核心方法，您可以轻松地将项目的状态存储在 BaseAdapter 中。例如，您可以使用 List 来存储状态。

然后，应该实现 ListView 的侦听器，如[http://developer.android.com/reference/android/widget/AdapterView.html#setOnClickListener(android.view.View.OnClickListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnClickListener(android.view.View.OnClickListener) ) 中所述。OnItemClickListener 的文档在这里，[http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)，通过它你可以得到点击的位置。

最后，在点击事件后更改项目的状态，并在适配器中调用 notifyDataSetChanged() 以通知数据已更改，您将看到更新的选定项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:58:26.867

“非常感谢您的帮助。我已经完成了这一切。现在我发现当我单击列表中的一项时，另一项也会被自动选中。BaseAdapter 有什么问题吗？”

对于这个问题，您需要保存列表视图行的状态，即在 getview 中是否选择了该行，检查它是否被选中，然后将行的颜色设置为选中。每当您选择或取消选择任何行时，您也需要保存状态。这是一个类似的示例，而不是复选框，行将在您的情况下出现...希望对您有所帮助，我给您一个链接...。

[如何实现一个获取所有复选框状态并将选中项的值添加到arraylist的按钮？](https://stackoverflow.com/questions/10190083/how-to-implement-a-button-that-gets-all-checkboxs-state-and-adds-the-value-of-c/10191369#10191369)

# installation - XPStyle 开启时使 CheckBox 的背景透明

> ID：10713930
> 
> 赞同：0
> 
> 时间：2012-05-23T05:25:04.683
> 
> 标签：installation, nsis

**XPStyle 打开时是否可以使复选框背景透明？**

以下简单代码可以使复选框背景透明，但前提是 XPStyle 设置为关闭。

有没有办法在保持 XPStyle 开启的同时让复选框的背景透明？我真的希望如此，否则我有很大的问题。我对真正的想法持开放态度，无论他们多么参与。

*如果没有办法，是否可以改变复选框背景的不透明度 - 也许我可以让它稍微透明（50％）？*

```
!include "LogicLib.nsh"
!include "MUI2.nsh"
!include WinMessages.nsh

OutFile "abc.exe"
Page Custom CustomPageInitialise

XPStyle on

Function CustomPageInitialise
    nsDialogs::Create 1018
    Pop $0
    SetCtlColors $0 0xFF0000 0x00FF00

    ${NSD_CreateCheckbox} 25u 20u 100% 20u "Version 8"
    Pop $1
    SetCtlColors $1 0xFF0000 transparent                        # Set tranparent color for control 
    ${NSD_AddExStyle} $1 ${WS_EX_TRANSPARENT}|${WS_EX_TOPMOST}  # Add special style 

    nsDialogs::Show
FunctionEnd

Section dummy
SectionEnd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:03:46.003

我已经在您的其他问题之一中链接到有关此问题的[错误报告。](https://sourceforge.net/tracker/index.php?func=detail&aid=1420352&group_id=22049&atid=373085)这可能是主题引擎和/或视觉样式中的限制/错误，要解决它，您可能必须创建一个插件，将复选框子类化并使用 WM_PRINT 或类似的东西对位图执行绘画......

# android - 如何获取用于黑莓剧本签名的 CSJ 文件？

> ID：10713932
> 
> 赞同：2
> 
> 时间：2012-05-23T05:25:44.213
> 
> 标签：android, blackberry, code-signing, blackberry-playbook

我想将应用程序从 android 移植到 Blackberry playbook。为此，我在此链接[http://developer.blackberry.com/android/signingkey](http://developer.blackberry.com/android/signingkey)中注册，我得到 3**个**名为`client-RBB-3973888918,client-RCR-3973888918,client-RRT-3973888918`. 但是为了注册，我需要 2 个 csj 文件（RDK 和 PBDT 文件）。我如何获得这些文件。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:35:22.657

我不知道第一次发生了什么。我在同一个链接中再次注册。然后我得到了 2 个 csj 文件（RDK 和 PBDT 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:18:31.310

CSI 文件用于提供与黑莓智能手机的签名，可能在您第一次注册后选择仅适用于黑莓智能手机。CSJ 文件用于平板电脑的签名目的。因此，如果您选择为 Tablet OS 签名，您将获得这两个 CSJ 文件。供您参考 [http://docs.blackberry.com/en/developers/deliverables/20779/Obtain_and_install_signing_keys_1264848_11.jsp](http://docs.blackberry.com/en/developers/deliverables/20779/Obtain_and_install_signing_keys_1264848_11.jsp)

或者

[http://supportforums.blackberry.com/t5/Testing-and-Deployment/BlackBerry-Applications-and-code-signing-Start-to-Finish/ta-p/445848](http://supportforums.blackberry.com/t5/Testing-and-Deployment/BlackBerry-Applications-and-code-signing-Start-to-Finish/ta-p/445848)

# airbrake - 请重试。此通知 UUID 仍在处理中

> ID：10713941
> 
> 赞同：1
> 
> 时间：2012-05-23T05:26:32.980
> 
> 标签：airbrake

我有一个关于airbrake的免费帐户。我也收到了同样的信息。在将错误提交给 airbrake 时，我在记录器中收到了此消息。

[Airbrake] 成功：Net::HTTPOK [Airbrake] 环境信息：[Ruby: 1.8.7] [Rails: 3.0.10] [Env: development] ** [Airbrake] Airbrake 的响应：7980204c-f28f-8966-9662 -265e20dec9fa [http://airbrake.io/locate/7980204c-f28f-8966-9662-265e20dec9fa](http://airbrake.io/locate/7980204c-f28f-8966-9662-265e20dec9fa)

当我尝试访问 URL 时，它会显示消息“请重试。此通知 UUID 仍在处理中”

但我不知道为什么错误没有出现在我的帐户中。

有人可以解释为什么会发生。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:46:46.997

AirBrake 正在经历一些影响我们的一些用户的技术难题。

我们正在努力生成解决问题的解决方案。

感谢您的耐心等待！

从，摩根

电子邮件：morgan@airbrake.io

# css - sass 看多个目录

> ID：10713942
> 
> 赞同：24
> 
> 时间：2012-05-23T05:26:37.883
> 
> 标签：css, shell, sass, watch

sass 中从 shell 脚本中查看多个目录的正确方法是什么？

我在 shell 脚本中有以下内容：

```
sass --style compressed --watch branches/mysite/assets/css/sass:branches/mysite/assets/css &
sass --style compressed --watch branches/mysite2/themes/css/sass:branches/mysite2/themes/css &
sass --style compressed --watch trunk/assets/css/sass:trunk/assets/css 
```

但是，这会创建 3 个进程，当我按 Ctrl+C 停止时，并非所有进程都退出。

如何让 sass 观看多个目录并正确退出？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-14T18:28:04.743

我希望您已经尝试过，但您可以将所有文件夹添加到一个命令行中：

```
sass --watch path/to/sass1:path/to/css1 path/to/sass2:path/to/css2 path/to/sass3:path/to/css3 
```

# r - 在 Windows 上使用 doSNOW 在 R 中进行并行计算：如何将结果从集群传输回主控

> ID：10713944
> 
> 赞同：3
> 
> 时间：2012-05-23T05:26:46.060
> 
> 标签：r, parallel-processing

在 Windows 上使用 R 中的集群时，我一直在尝试找到一种简单的方法将结果从集群传输到主服务器。如果结果是一个数组或一个简单的数字，foreach / %dopar% 语句的 .combine 选项会处理这个问题，但是如果结果是一个复杂的对象，让这样一个 randomForest 模型，如何从从属集群转移整个模型还给主人？

我尝试：assing with`env=.Global`但它在我的 Windows 7 上不起作用。

最后，我通过将对象保存到文件来解决问题。然后主人可以恢复对象。如果有人知道更优雅的方式或为什么 assing 不起作用，我很感激评论。

示例代码：

```
print(" paralelize with 8 cores ------------------------------")
library(doSNOW)
cl<-makeCluster(8)
registerDoSNOW(cl)
clusterEvalQ(cl, library(randomForest))
clusterExport(cl, "x")
clusterExport(cl, "y")
clusterExport(cl, "x.selected")

makeModel <- function(i){
  m <- randomForest(x,x.selected[i,],mtry=250,sampsize=3200,ntree = 3000,do.trace=TRUE) 
  eval(parse(text = paste("model_",i," <- m",sep="")))
  eval(parse( text =paste("save(model_", i, ", file =\"model_", i, ".Rdata\")",sep="" ) ))
}

foreach(i = 1:length(x.selected[,1]),.verbose = TRUE ) %dopar% makeModel(i)
stopCluster(cl)

foreach(i = 1:length(x.selected[,1]),.verbose = TRUE ) %do% 
load(paste("model_",i,".RData",sep="")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:22:09.653

如果您不指定 .combine 函数，foreach 将返回一个列表，以便像 clusterApply 函数一样处理任意对象。许多 foreach 示例使用`.combine="c"`，但这不适用于 randomForest 模型对象。如果 foreach 循环的主体评估为 randomForest 模型对象，则 foreach 将返回这些对象的列表。

这是 foreach 包中 randomForest 示例的简化版本，它返回列表中的模型对象，然后将它们组合起来。我还修改了它以使用 doSNOW 包，如您的示例所示：

```
library(doSNOW)
library(randomForest)
cl <- makeCluster(8)
registerDoSNOW(cl)
nr <- 1000
x <- matrix(runif(100000), nr)
y <- gl(2, nr/2)
rf <- foreach(ntree=rep(125, 8), .packages='randomForest') %dopar% {
  randomForest(x, y, ntree=ntree)
}
crf <- do.call('combine', rf)
print(crf)
stopCluster(cl) 
```

# php - Joomla 管理员登录面板的验证码

> ID：10713949
> 
> 赞同：3
> 
> 时间：2012-05-23T05:27:01.053
> 
> 标签：php, joomla

我面临着过去两天的问题。我需要 Joomla 管理面板的验证码。有许多插件可用，但没有在工作 joomla 管理面板。请帮帮我。我该怎么做？

问候， 曼普里特·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:18:10.370

我知道已经过去了很长一段时间，但我希望我可以为其他寻求相同解决方案的人提供有益的贡献。

我建议考虑使用来自 AkeebaBackup.com 的优秀管理工具扩展，尤其是“双因素”身份验证工具。这通过需要智能手机上的谷歌应用程序提供的密钥来增加另一个级别的安全性。我知道这不是验证码工具，但它可能是保护 Joomla 后端的更好解决方案。

希望有帮助。

布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:27:55.597

正如您所说，没有用于`/administrator`登录的插件。

如果你想写一个，你必须创建一个系统插件和一个登录组件。

要捕获登录或的`system`插件，需要调整目标以指向您自己的.`onAfterRoute``onAfterDispatch``/adminstrator``com_login`

然后创建一个新的`com_mylogin`- 您可以轻松地调整`com_login`组件以执行您想要的操作。

说了这么多，为什么你需要一个验证码——如果有人下定决心，它很少有效。验证码仅对不太聪明的机器人真正有用。

你可以做很多事情：

*   最简单的机制是将领域密码应用于`/administrator`...
*   或使用[一些推荐的方法来保护 Joomla！包含`/administrator`](http://docs.joomla.org/Category%3aSecurity_Checklist)
*   添加一个[登录保护扩展](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection)，如[JSecure 插件](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/12254)？

# oracle - 从交叉点/交汇点表中选择

> ID：10713952
> 
> 赞同：3
> 
> 时间：2012-05-23T05:27:13.917
> 
> 标签：oracle, duplicates, junction

很多时候只是找到合适的文章并在 StackOverflow 上阅读它帮助我完成了很多我不知道该怎么做的东西，但第一次，我想我需要写一篇。我一直在寻找这个问题的正确答案，但我没有找到一个。

所以问题在于我创建了 2 个表和一个交叉表来关联它们。

背后的想法很简单（我几乎不好意思解决这个问题）。

一篇 BBS 文章可能有一些附件。这意味着一篇文章可以有附件，也可以没有。一篇文章可以有多个附件。

我一直在尝试做的是

获取包含所有附件信息但没有重复行的文章列表。

好的...我尝试设置 DDL 但我无法正确格式化它...

```
create table article(
id PK
some other stuff...
)

create table attachment(
id PK
physical_file_name 
etc...
) 
```

这是十字路口

```
create table article_attachment(
id PK(synthetic)
article_id FK
attachment_ID FK
) 
```

我想选择所有文章，无论它是否有任何附件，但如果一篇文章有​​多个附件，我只需要其中一个附件。（不管是哪一个）

是的，这听起来很愚蠢，但这里没有 DBA 或 SQL 开发人员，所以我必须做所有的事情......非常混乱我正在尽我所能

任何明智的想法？

提前致谢

-ps - 我尝试过类似...

```
with refined_table as(

  select file_id, row_number() over(partition by id order by id desc) as seq
  from consumer_file

)
select * 
from consumer_info ci 
left outer join consumer_file cf on cf.consumer_id = ci.id
left outer join refined_table rt on rt.file_id = cf.file_id
where rt.seq =1 
```

这但我真的不明白它是如何工作的

更新

这是我一开始尝试的。它一直给我 ORA-00979:not a GROUP BY 表达式我找了很长时间的解决方案。一些人建议使用聚合函数或“提示”（如果是这样的话......）

```
 with refined_table as(

      select file_id, row_number() over(partition by id order by id desc) as seq
      from consumer_file

    ) 
```

我的意思是这个

嗯有什么想法吗？

非常感谢大家:)

```
SELECT 
    CI.id as article_id, 
    DF.id as attachment_id,  
    DF.PHYSICAL_NAME as file_name 
FROM 
    CONSUMER_INFO CI
LEFT OUTER JOIN 
    CONSUMER_FILE CF ON CF.CONSUMER_ID = CI.ID
LEFT OUTER JOIN 
    DEFAULT_FILE DF ON CF.FILE_ID = DF.id
GROUP BY 
   CI.ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T05:32:57.147

如果它从文章 -> 附件中只有 1->N 关系，那么您可以按如下方式修改*附件：*

```
create table attachment(
   id PK
   article_id FK 
   physical_file_name 
   etc...
) 
```

仅当文章和附件之间存在 N->N 关系时，您才需要单独的交集表。

更新：但是，如果您仍然需要保持 N<->N 关系（如您的评论中所述），那么您可以使用 GROUP BY 子句按 article_id 对结果进行分组，例如：

```
SELECT 
    article.id as article_id, 
    attachment.id as attachment_id,  
    attachment.physical_file_name as file_name 
FROM 
    article 
LEFT OUTER JOIN 
    article_attachment ON article_id = article.id 
LEFT OUTER JOIN 
    attachment ON attachment_id = attachment.id
GROUP BY 
    article_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:09:31.000

我认为您的表定义很好。仅选择一个附件的要求使事情变得更加复杂，但是由于您不在乎获得哪个附件，因此我认为以下应该可行：

```
SELECT *
  FROM ARTICLE a
  LEFT OUTER JOIN (SELECT ARTICLE_ID, MIN(ATTACHMENT_ID) AS ATTACHMENT_ID
                     FROM ARTICLE_ATTACHMENT
                     GROUP BY ARTICLE_ID) aa
    ON (aa.ARTICLE_ID = a.ID)
  LEFT OUTER JOIN ATTACHMENT t
    ON (t.ID = aa.ATTACHMENT_ID) 
```

分享和享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:49:35.470

如果您不关心您加载了哪些附件，那么您可能正在寻找这个：

```
select
  art.article_id, art.article_stuff,
  att.attachment_id, att.attachment_stuff
from
  article art,
  article_attachment aat,
  attachment att
where
  art.article_id = &article_id
  and aat.article_id = art.article_id
  and att.attachment_id = aat.attachment_id
  and rownum < 2; 
```

这`rownum < 2`将确保您只选择所有`article-article_attachment-attachment`组合的第一行。

# iphone - 如何将 mainBundle 中的数据库替换为文档目录中的同名数据库？

> ID：10713953
> 
> 赞同：0
> 
> 时间：2012-05-23T05:27:31.280
> 
> 标签：iphone, objective-c, xcode

我正在一个项目中更新数据库，其中 mainBundle 中的数据库需要更新。正如我们已经知道 mainbundle 中的文件是只读的，我将 mainBundle 中的数据库复制到文档目录以进行更新。更新后，我想将文档目录中的该文件替换为 mainBundle 中的文件。谁能告诉我如何解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:33:53.283

那是做不到的。因为您无法更新任何捆绑文件。不知何故，如果你这样做，你的构建将在下次运行时显示无效的二进制消息。

顺便说一句，为什么你需要从你的主包更新数据库？您的 mainbundle 数据库文件是原始数据库的副本，应将其复制到文档目录中以进行修改。

**更新**

对于即使在重新启动应用程序后仍希望保留记录的情况，这就是我们使用数据库的原因。为了解决您的问题，请执行以下操作：

```
NSString *docDirPath = [(NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)) objectAtIndex:0]; 
```

这将返回您的文档目录的路径。之后将您的数据库复制到此路径，如下所示：

```
NSString *dbPath = [strDocPath stringByAppendingPathComponent:@"myDb.sqlite"];
if (![[NSFileManager defaultManager] fileExistsAtPath:dbPath]) {
    [[NSFileManager defaultManager] copyItemAtPath:[[NSBundle mainBundle] pathForResource:@"mydb" ofType:@"sqlite"] toPath:dbPath error:nil];
} 
```

这将检查路径中是否已经存在数据库，而不是用空数据库替换它，如果数据库不存在（即您的第一次运行应用程序），它将复制。

现在您可以访问`dbPath`以访问文档目录中的数据库，并且即使在重新启动应用程序后也将保持不变。

不要忘记检查您的数据库是否存在，`if (![[NSFileManager defaultManager] fileExistsAtPath:dbPath]) {`否则您的应用程序将在每次运行时将您的文档目录的数据库替换为原始（空数据库）。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:40:20.540

您的捆绑包是签名副本。如果您尝试更改 Bundle 中的任何资源，其签名将变为无效。因此，您不能将更新的数据库从文档目录复制到 Bundle。您的代码应参考文档目录中的更新副本。

为此，一旦您发现需要更新，请按照以下步骤操作：

1.  重命名现有文档目录数据库。
2.  将 Bundle 数据库复制到文档目录。
3.  使任何一个副本更新一个。
4.  发布旧副本。
5.  在任何例外情况下，删除新副本，将旧副本重命名为原始名称。
6.  不要将您的布尔标志标记为应用程序已成功更新，以便下次它可以进行相同的练习。

希望能帮助到你。

# linux - 在多个浏览器中在 selenium 中运行测试，同时在每个测试用例之后清理数据库

> ID：10713954
> 
> 赞同：0
> 
> 时间：2012-05-23T05:28:08.650
> 
> 标签：linux, selenium, automation, selenium-rc, qa

我想在多个浏览器（FF 和 IE）上在 selenium 中运行我的测试用例。由于相同的测试用例运行两次，我想在运行每个测试用例后清理我的数据库。（否则第二个测试用例将失败，因为数据已经输入)

运行每个测试用例后有什么方法可以清理数据库吗？（运行一个shell脚本或任何方法）

我必须处理 mysql 和 mongo db。以前，当我使用单个浏览器运行时，我使用了一个 shell 脚本来清理初始数据并将其重新安装到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:00:38.043

您不能在每次测试运行之前简单地运行这些脚本吗？在测试之前运行数据库清理比在测试之后运行更好。因为当某事同时发生变化时，您仍然可以确定当您运行构建时，数据库必须处于默认状态，因为它刚刚被您的脚本清理。从 maven 你可以执行 bat/shell 文件[http://maven.40175.n5.nabble.com/How-to-execute-a-script-in-maven2-td106785.html](http://maven.40175.n5.nabble.com/How-to-execute-a-script-in-maven2-td106785.html)

只需使用预集成测试之类的阶段之一： [Maven 和 Exec：分叉一个进程？](https://stackoverflow.com/questions/4668839/maven-and-exec-forking-a-process)

* * *

我个人会选择一个包含构建自动化的更复杂的解决方案。考虑使用 CI 服务器（持续集成）。它负责在每次代码更改后构建您的应用程序。您可以查看 Jenkins - 它是免费的。使用此类工具可以让您运行多个作业。然后，您可以在那里配置一项作业来构建您的应用程序和另一项作业以在您的应用程序上运行测试。在测试之前，您可以简单地以 pre-steps 甚至 post-steps 的形式运行 bat/shell 脚本。这个过程当然被简化了，只是为了让你对它有一个整体的看法。如果您想了解更多信息，请询问:)

# linux - 打开设备失败

> ID：10713956
> 
> 赞同：1
> 
> 时间：2012-05-23T05:28:14.047
> 
> 标签：linux, kernel-module, device-node

我正在尝试写入 /dev/simulator 文件。我使用以下方法创建了此设备：

> *   # mknod /dev/simulator c 60 0
> *   # chmod 666 /dev/模拟器
> *   # ls -l /dev/模拟器
> *   crw-rw-rw- 1 根 60, 0 2012-05-22 19:22 /dev/simulator

我正在尝试打开此设备并在其上写一些东西，但出现错误：

> 应用程序：模拟器打开失败

这是我在条件下定义的，但为什么我无法进入设备？这是我的代码：

```
/*
* Some Other Code *
*/

static int simDev;
simDev = open("/dev/simulator", O_RDWR);
if(simDev<0) {
 printf("application: Simulator opening failed.\n");
 exit (1);
}
else 
 printf("Device opened successfully.");

signal(SIGIO, signal_handler);
pid_t pid;
pid = getpid();
write(simDev, &pid, 4);

/*
* Some Other Code *
*/

close(simDev); 
```

谁能帮我纠正我的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T05:32:04.437

您没有定义该设备另一端的内核模块。

# java - Android“全局变量”不持久

> ID：10713959
> 
> 赞同：3
> 
> 时间：2012-05-23T05:28:16.740
> 
> 标签：java, android, string, persistence

我创建了一个扩展 Application 以存储我想从多个活动中访问的变量的类

```
public class MyApplication extends Application 
{
private String fbId, firstName;
private long expires;

@Override
public void onCreate() 
{
    super.onCreate();
}

public String getFbId() 
{
    return fbId;
}

public void setFbId(String fbId) 
{
    this.fbId = fbId;
}

public String getFirstName()
{
    return firstName;
}

public void setFirstName(String firstName) 
{
    this.firstName = firstName;
} 
```

第一次运行应用程序时，我可以访问这些变量并设置这些变量。一旦我退出并重新启动应用程序，它会将我的值设置为 null，对于为什么会发生这种情况有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:32:07.643

如果您不将数据存储在存储中（不需要是数据库，可以是平面文件、SharedPreferences 或其他），那么它就不是持久的。

您应该使用[**`SharedPreferences`**](http://developer.android.com/guide/topics/data/data-storage.html#pref)来保存这种持久性数据。

> SharedPreferences 类提供了一个通用框架，允许您保存和检索原始数据类型的持久键值对。您可以使用 SharedPreferences 保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。此数据将在用户会话中持续存在（即使您的应用程序被终止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:33:20.967

没有办法以任何语言持久化变量。只要程序的生命周期结束，所有变量都会被销毁，并且内存会从 RAM/堆内存中释放。

对于持久性您有以下选项，

1.  **文件系统**
    *   一种简单的文件格式（例如 .txt）
    *   逗号分隔文件格式（例如 .csv）
2.  **数据库**
    *   Sqlite（在 Android 的情况下）
    *   RMS（在 Java ME、BlackBerry 的情况下）
3.  **编程语言支持的持久性存储**
    *   共享偏好

只有将变量的值存储到上述任何机制中，您才能使值**持久化**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:33:49.210

如果您回来时需要这些数据，您可能希望保留这些数据。您可以为相同的存储介质使用不同的存储介质，如 SharedPreference、Local Files、sqlite 等。请参考[这里](http://developer.android.com/guide/topics/data/data-storage.html)

# android - 谁负责在 Android 中触发 Application Not Responding Dialog？

> ID：10713961
> 
> 赞同：1
> 
> 时间：2012-05-23T05:28:33.697
> 
> 标签：android, android-anr-dialog

谁负责在 Android 中触发 Application Not Responding Dialog，以防输入事件在 5 秒内未处理？是吗

> Dalvik 运行时环境

或者

> android 框架中的任何特定管理器

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:47:52.583

这可能有用：http: [//developer.android.com/guide/practices/design/responsiveness.html](http://developer.android.com/guide/practices/design/responsiveness.html)

# python - 使用 matplotlib 在 Spyder 中进行交互式（？）绘图

> ID：10713966
> 
> 赞同：13
> 
> 时间：2012-05-23T05:28:59.223
> 
> 标签：python, plot, interactive, figure, spyder

我正在尝试从 Matlab 迁移到 Python，但无法弄清楚如何在 Spyder IDE 中进行交互式（？）绘图工作。我的测试代码如下所示。使用 .ion() 没有任何反应，我得到一个快速绘制的图形，然后窗口立即关闭并吐出我的 Hello。没有 .ion() 图形被正确绘制，但脚本挂起并且在我手动关闭图形窗口之前不会吐出 Hello。我希望脚本像 matlab 脚本一样运行并绘制我要求它的各种数字，同时进行任何计算并将输出放在终端（？）窗口上。

我尝试在 ipython 中一次输入一行，它似乎可以工作，但我更愿意以脚本表格式工作，在那里我可以在调整代码的行之间来回切换。

如果有帮助，我正在使用 Windows 7。我安装了 python(x,y) 并从那里启动 spyder（spyder 版本 2.1.9）。我见过一些类似的问题，但我无法解决这个问题。在我看来，有人说 ipythons 的最新版本与 spyder 不兼容，但后来我看到另一篇文章说无论如何都应该支持交互式绘图。谢谢您的帮助！如果有人有我可以用来模仿 matlab 行为的替代环境，那么我对 Python 真的很陌生。

```
import matplotlib.pylab as plt
plt.ion()
plt.plot([1,2,3])
plt.show()
plt.ylabel('This is an axis')
print ("Hello") 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T17:04:24.450

运行配置应*在当前 Python 或 IPython 解释器中设置为执行，*默认情况下允许交互式绘图。如果解释器*在新的专用 Python 解释器中设置为执行，*则必须选择*执行后与 Python 解释器交互。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T23:47:13.983

就我而言，这些是 spyder 中的默认设置，但是在我输入以下内容之前它仍然没有显示绘图：**%matplotlib inline**

不确定这是否有帮助，但想在这里分享。

# ruby-on-rails - “文本搜索查询不包含词位：”是什么意思？

> ID：10713968
> 
> 赞同：10
> 
> 时间：2012-05-23T05:29:06.993
> 
> 标签：ruby-on-rails, rspec, pg-search

在 Rails 应用程序中，我正在使用 pg_search gem。当我运行我的 RSpec 套件时，我看到许多行：

```
NOTICE:  text-search query doesn't contain lexemes: ""
LINE 1: ...e("pg_search_documents"."content"::text, '')))), (''), 0)) A... 
```

我不确定这意味着什么，或者这是否是我应该关注的事情。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T22:28:49.500

我是 pg_search 的作者和维护者。

该消息意味着您的搜索查询最终没有单词。因此，PostgreSQL 警告您不会得到任何结果，并且查询也没有那么有用。

忽略它是安全的。pg_search 总是将查询发送到数据库，即使在这种查询毫无意义的极端情况下也是如此。如果你真的想避免它，你可以在你的应用程序中添加逻辑来检测空白查询，而不是调用 pg_search 范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:48:10.013

在 Rails 3.2.2 中，我在 My database.yml 中使用它来消除来自 postgres 的通知消息。

```
test:
  min_messages: warning
  #... default configurations... 
```

# c# - 将 32768kb EGA 文件转换为 256x256 Texture2D？

> ID：10713977
> 
> 赞同：2
> 
> 时间：2012-05-23T05:30:01.690
> 
> 标签：c#, c#-4.0, graphics, xna

很抱歉，这是一个无助但原始海报的问题，但我正在尝试将 Ultima 4 的 SHAPES.EGA 转换为 Texture2D。SHAPES.EGA 中的每个字节代表 2 个像素，共有 256 个 16x16 图形。我需要将它们放在一个正方形中，因为 XNA 的 Reach 配置文件不支持高于 2048 的图像尺寸，无论实际图像大小如何。下面的代码让我得到了我想要的第一行，但所有其他行都不能正常工作。（假设它继续这种模式，第 17 行看起来就像第 2 行应该看起来的样子。）我已经为此工作了几个小时，但此时我一无所获。

```
int cur_size = 16;

GFX.SHAPES_EGA = new Texture2D(GraphicsDevice, cur_size * 16, cur_size * 16);
Color[] temparray = new Color[(cur_size * 16) * (cur_size * 16)];

int CurrentIndex = 0, foo;
for (int Vertical = 0; Vertical < cur_size * 16; Vertical++) //16
{
    for (int Horizontal = 0; Horizontal < 16; Horizontal++)
    {
        for (int CurByte = 0; CurByte < 8; CurByte++)
        {
            //foo = (Vertical * (cur_size / 2)) + (Horizontal * 8 * cur_size) + CurByte;
            foo = (Vertical * (cur_size / 2)) + (Horizontal * 8 * cur_size) + CurByte;
            //Console.WriteLine((CurrentIndex * 2) + "+" + foo);
            temparray[(CurrentIndex*2)] = Basic.EgaToColor((File_SHAPES_EGA[foo] >> 4) & 0x0F);
            temparray[(CurrentIndex*2) + 1] = Basic.EgaToColor(File_SHAPES_EGA[foo] & 0x0F);
            CurrentIndex++;
        }
    }
}
GFX.SHAPES_EGA.SetData(temparray); 
```

![该图像表明图像加载代码存在错误。](../Images/281c28ddd473034e6229b5d36e17ca58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:20:33.120

而不是`Vertical++`尝试`Vertical += 16`。为 Ultima 点赞！

# iphone - iPhone：为我的应用程序的特定区域添加标签栏控制器

> ID：10713981
> 
> 赞同：1
> 
> 时间：2012-05-23T05:30:24.463
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uitabbarcontroller

我正在开发一个 iphone 应用程序，其中**前四个屏幕是基于导航的**。

从第五屏开始，设计变成了**基于标签栏**的设计。在这个基于标签栏的部分中，我们能够导航每个标签上的子视图。

**我怎么能实现这个？**

**我在哪里声明标签栏控制器-在 appDelegate 或其他一些文件中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:39:18.527

您可以在 app-delegate 类中添加观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(youMethod)        
                                                 name:@"loginSucess" 
                                               object:nil];

- (void)youMethod
{
    UINavigationController *controller = [[[UINavigationController alloc] initWithRootViewController:self.tabBarController] autorelease];

    self.window.rootViewController = controller;    
    [self.window makeKeyAndVisible];
} 
```

对于您想要添加标签栏的操作，您可以像这样调用

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"loginSucess" object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:43:14.007

以编程方式创建 Tabbar 控制器并将 tabbarcontroller 添加到 navigationController

```
MyFirstViewController *myFirstViewController = [[MyFirstViewController alloc] init];
MySecondViewController *mySecondViewController = [[MySecondViewController alloc] init];

myFirstViewController.array = self.array;

NSArray *array = [[NSArray alloc] initWithObjects:myFirstViewController, mySecondViewController, nil];
UITabBarController *tab = [[UITabBarController alloc] init];
tab.viewControllers = array;

[array release];

UITabBarItem *item1 = [[UITabBarItem alloc] initWithTitle:@"first title" image:nil tag:1];
UITabBarItem *item2 = [[UITabBarItem alloc] initWithTitle:@"second title" image:nil tag:2];

myFirstViewController.tabBarItem = item1;
mySecondViewController.tabBarItem = item2;

[self.navigationController pushViewController:tab animated:YES]; 
```

使用此代码，这将对您有用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:13:55.783

我的应用程序中也有类似的问题，最后我想出了推送另一个 UIViewController 并将 UITabBarController 视图添加为子视图。

当你在你的第 4 个屏幕上并且你导航到第 5 个屏幕时，它也是一个 UIViewController。我假设你有 3 个标签。

在这个 UIViewController 的 viewDidLoad

```
UITabBarController *tabBarController = [[UITabBarController alloc] init];
UIViewController1 *objUIViewController1 = [[UIViewController alloc] initWithNibName:@"UIViewController1" bundle:nil];
UIViewController2 *objUIViewController2 = [[UIViewController alloc] initWithNibName:@"UIViewController2" bundle:nil];
UIViewController3 *objUIViewController3 = [[UIViewController alloc] initWithNibName:@"UIViewController3" bundle:nil];

tabBarController.viewControllers = [NSArray arrayWithObjects:objUIViewController1, objUIViewController2, objUIViewController3, nil];
tabBarController.delegate = self;
[[tabBarController.viewControllers objectAtIndex:0] setTitle:@"Title1"];
[[tabBarController.viewControllers objectAtIndex:1] setTitle:@"title2"];

[self.view addSubview:tabBarController.view];
[UIViewController1 release];
[UIViewController2 release];
[UIViewController3 release]; 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:37:51.483

在应用程序委托中，您声明了前 5 个屏幕（屏幕 1 到 5）假设在屏幕 5 的按钮上您要启动标签栏您执行以下操作：

```
//Create the tab bar controller
UITabBarController *tabBar = [[UITabBarController alloc] init];
//Create the 5 new view controllers
UIViewController *cont_1 = [[UIViewController alloc] init];

//Add them to array
NSArray *arr = [NSArray arrayWithObjects:cont_1, cont_2, ... , nil]
[tabBar setViewControllers:arr];

//Now push the tab bar controller
[self.navigationController pushViewController:tabBar animated:YES]; 
```

# vb6 - 如何隐藏代码中的硬编码密码？

> ID：10713982
> 
> 赞同：3
> 
> 时间：2012-05-23T05:30:24.913
> 
> 标签：vb6, decompiling, security-by-obscurity

我想在我的 VB6 代码中隐藏密码，这样即使通过反编译也无法显示密码。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:33:34.963

如果您的程序可以以明文形式访问它，那么就有可能以某种方式检索它。你最好以其他方式获得安全。如何做到这一点实际上取决于您的特定应用程序。您是否必须将密码存储在您的应用程序中？你能简单地存储一个预先计算的哈希值并与之进行比较吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T14:31:32.983

这实际上取决于您将使用该密码的目的。如果您只需要检查它，您可以简单地使用一个非常强大的密码并对其进行哈希处理（这样即使他们使用某种彩虹表也很难找到它）。

但是这样想，如果有人愿意反编译您的代码，他们可以通过将密码更改为另一个更简单的密码来完美破解您的应用程序，他们知道哈希。

另一方面，如果您尝试存储密码以便可以反转它（数据库密码？）并使用它，我会说您选择了错误的架构，并且您无法安全地保留恶意用户找出您的密码。您应该创建一个“普通用户”无法访问的服务器端应用程序和一个将向您的服务器端应用程序发送请求的客户端应用程序。

# jquery - 如何禁用jgd-dropdown？

> ID：10713984
> 
> 赞同：0
> 
> 时间：2012-05-23T05:30:34.607
> 
> 标签：jquery, drop-down-menu

我正在使用 jgd-dropdown，不知道如何禁用或灰显这个对象？有人有类似的问题吗？

谢谢吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:25:30.643

你已经找到答案了吗？我今天遇到了同样的需求，只是在 jquery.jgd.dropdown.js 中添加了以下 2 个函数：

```
$.fn.enable = function()
{
  $(this).removeAttr("disabled");
  $(this).children('dd').show();
};

$.fn.disable = function()
{
  $(this).attr("disabled", "disabled");
  $(this).children('dd').hide();
}; 
```

然后在需要时调用它们，即：$("#").enable();

# html - 保存值时的编码问题包含空格字符

> ID：10713986
> 
> 赞同：0
> 
> 时间：2012-05-23T05:31:07.957
> 
> 标签：html, ruby-on-rails-3, ruby-on-rails-3.1, character-encoding, utf8-decode

我正在使用 rails 3.2.3 我想将一些 html 数据保存到我的数据库中。但它在保存时会被编码。所以当我试图显示这些 html 数据时，它显示为纯文本。想要将纯 html 标签保存到我的数据库中，而不是保存编码数据。我该如何解决这个...

感谢在advnc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:46:58.443

无法将 HTML 保存到大多数数据库，因为它们不支持该类型。这意味着您总是必须以某种方式对 HTML 进行编码。

为管道的每个步骤编写测试用例，以确保输入和输出符合您的预期。