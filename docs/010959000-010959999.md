# StackOverflow 问答 10959000-10959999

# mongodb - 在 Meteor 中查询嵌入的文档

> ID：10959003
> 
> 赞同：1
> 
> 时间：2012-06-09T06:44:06.460
> 
> 标签：mongodb, meteor

我有一个 rails api，它使用 mongoid 在我的流星应用程序中创建一个嵌入文档到另一个文档中。如何使用流星查询嵌入的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:22:33.497

一旦您通过 mongoid 从您的 Rails 世界写入 mongo 数据库，假设您已正确地将 Meteor 应用程序指向此 mongo 数据库，只需像任何其他流星集合一样设置发布和订阅。然后使用 Minimongo 查询文档。因为这听起来像是一个子文档，所以请注意，[根据 docs](http://docs.meteor.com/#selectors)，点符号对于查询子文档仍然有点粗略。

这是文档中对 Minimongo 的解释：

> 在客户端上，创建了一个 Minimongo 实例。Minimongo 本质上是纯 JavaScript 中 Mongo 的内存中非持久实现。它用作本地缓存，仅存储此客户端正在使用的数据库的子集。客户端上的查询（查找）直接从此缓存中提供服务，无需与服务器对话。

# c++ - Boost + GCC + 预编译头文件编译时间慢

> ID：10959009
> 
> 赞同：7
> 
> 时间：2012-06-09T06:46:17.040
> 
> 标签：c++, gcc, boost, compilation, precompiled

运行：gcc 4.2.1 版（Apple Inc. build 5664）

我创建了一个带有默认预编译头文件的苹果 XCode 项目。它似乎很慢，一个没有主要功能的琐碎主文件不包含任何代码需要6秒才能编译，这是我升级到新的SSD驱动器之后。我在笔记本电脑上，但我对升级到工作站会缓解我的问题持保留意见。如果我关闭预编译头文件，那么主文件将在一秒钟内编译。似乎使用预编译的标头会对所有文件造成不利影响。这种延迟让我想避免编译和试验不好的代码。这是我在预编译头文件中包含的内容：

```
#pragma once

#include <algorithm>
#include <bitset>
#include <complex>
#include <deque>
#include <fstream>
#include <functional>
#include <iostream>
#include <istream>
#include <iterator>
#include <limits>
#include <list>
#include <locale>
#include <map>
#include <numeric>
#include <ostream>
#include <queue>
#include <set>
#include <sstream>
#include <stack>
#include <stdexcept>
#include <streambuf>
#include <string>
#include <valarray>
#include <vector>

#include <boost/smart_ptr/scoped_ptr.hpp>
#include <boost/smart_ptr/scoped_array.hpp>
#include <boost/smart_ptr/shared_ptr.hpp>
#include <boost/smart_ptr/shared_array.hpp>
#include <boost/smart_ptr/make_shared.hpp>  
#include <boost/smart_ptr/weak_ptr.hpp>
#include <boost/smart_ptr/intrusive_ptr.hpp>

#include <boost/regex.hpp>
#include <boost/thread.hpp>
#include <boost/bind/bind.hpp>
#include <boost/bind/apply.hpp>
#include <boost/bind/protect.hpp>
#include <boost/bind/make_adaptable.hpp>

#include <boost/asio.hpp>
//#include <boost/asio/ssl.hpp>

#include <boost/property_tree/ptree.hpp>
#include <boost/random.hpp>
#include <boost/lexical_cast.hpp>
#include <boost/date_time/gregorian/gregorian.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/date_time/local_time/local_time.hpp>
#include <boost/date_time/time_zone_base.hpp>
#include <boost/circular_buffer.hpp>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics.hpp> 
```

我没有包含精神，这确实使编译时间上升。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T12:15:25.727

GCC 的预编译头文件以一种非常特殊的方式工作。在任何给定的源文件中只能使用*一个*预编译的头文件。用于`-H`显示给定的头文件是否使用预编译版本。

此外，您必须使用与使用它的源文件完全相同的编译器标志来编译头文件。

设置 PCH 环境的典型方法如下：

**主.cpp：**

```
#include "allheaders.hpp"

int main() { /* ... */ } 
```

**allheaders.hpp：**

```
#include <algorithm>
// ... everything you need 
```

**汇编：**

```
g++ $CXXFLAGS allheaders.hpp                 # 1
g++ $CXXFLAGS -H -c -o main.o main.cpp       # 2
g++ $LDFLAGS -o myprogram main.o             # 3 
```

在第 1 步之后，您应该最终得到一个文件`allheaders.hpp.gch`，该文件应该很大。在第 2 步中，该`-H`标志应该产生额外的输出，告诉您正在使用预编译的头文件。步骤#3 链接可执行文件。

这个想法是第 1 步可能需要很长时间，但第 2 步应该会变得更快。

# git - 我在 Git 上有多个本地存储库，但我只想使用一个

> ID：10959011
> 
> 赞同：1
> 
> 时间：2012-06-09T06:46:39.880
> 
> 标签：git, github, github-for-windows

我仍在研究 Git 的基础知识，并使用 GitHub 作为我的在线存储库。所以当我试图自学并弄清楚一切时，我想我可能会因为安装不同版本的 Git Bash、Git GUI、Git Windows、Git Extensions 而发疯，但我主要使用的是 Git Bash。

我一定对“git init”命令发疯了，因为当我执行“git status”时会显示大量文件。我也在跟踪多个回购，但我只想一次只处理一个。最后，我的问题是如何解决这些冲突，并且一次只能通过本地机器上的 Git bash 使用一个 .git？

这是我执行“git status”时当前显示的内容

```
$ git status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 1 and 1 different commit(s) each, respectively.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#       modified:   ../../../GitHub/GitHelloWorld (new commits)
#       modified:   ../../../GitHub/StopFoodWaste (new commits, modified content
)
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       ../../../../.RubyMine40/
#       ../../../../.android/
#       ../../../../.appletviewer
#       ../../../../.asadminpass
#       ../../../../.bash_history
#       ../../../../.gem/
#       ../../../../.gitconfig
#       ../../../../.gitignore
#       ../../../../.kdiff3rc
#       ../../../../.m2/
#       ../../../../.ssh/
#       ../../../../AppData/
#       ../../../../Contacts/
#       ../../../../Desktop/
#       ../../../../DiskScrP.txt
#       ../../../AdventureWorks2012_Data.mdf
#       ../../../Amazon MP3/
#       ../../../Battlefield 3/
#       ../../../BinaryTreeADT.class
#       ../../../BinaryTreeADT.java
#       ../../../CyberLink/
#       ../../../DataStrucNotes.docx
#       ../../../Dimitrios Arethas.docx
#       ../../../Dimitrios_Arethas_resume.rtf
#       ../../../Dimitrios_Arethas_resume_doc.docx
#       ../../../Expression/
#       ../../../Fiddler2/
#       ../../../German Reporter.m4v
#       ../../../GoogleCodeJam.class
#       ../../../GoogleCodeJam.java
#       ../../../Greatwide_cover.docx
#       ../../../IISExpress/
#       ../../../ITCS2175/
#       ../../../ITCS2214/
#       ../../../ITCS3200 Notes.docx
#       ../../../ITIS - Ethics/
#       ../../../Music/
#       ../../../My Kindle Content/
#       ../../../My Shapes/
#       ../../../My Web Sites/
#       ../../../Notes/
#       ../../../ProjectEuler.class
#       ../../../ProjectEuler.java
#       ../../../SQL Learn/
#       ../../../SQL Server Management Studio/
#       ../../../SaaS Class/
#       ../../../SharpDevelop Projects/
#       ../../../Visual Studio 11/
#       ../../../Visual Studio 2005/
#       ../../../Visual Studio 2008/
#       ../../
#       ../../../Youcam/
#       ../../../dativ_prepositions.docx
#       ../../../desktop.ini
#       ../../../dimitrios_engagement_checklist.doc
#       ../../../dimitrios_trial_schedule.doc
#       ../../../eclipse/
#       ../../../gitscc.config
#       ../../../me.jpg
#       ../../../workspace-sts-2.9.1.RELEASE/
#       ../../../../Downloads/
#       ../../../../Dropbox/

no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:53:00.260

在远程端，您可以使用以下命令查看您的远程仓库[`git remote`](http://git-scm.com/docs/git-remote)：

```
git remote -v 
```

并删除你不想要的

```
git remote rm name 
```

请参阅“[使用遥控器](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)”。

在状态方面，尝试查找`.git`您拥有的所有目录。你应该在一个`GitHub/yourRepo`目录中，而不是`.git`几乎在你`C:\`这里。

# java - 关于java线程生命周期

> ID：10959014
> 
> 赞同：4
> 
> 时间：2012-06-09T06:46:53.127
> 
> 标签：java, multithreading

所以我有一个“棘手”的问题，我想看看人们的意见。

我正在编写一个组件，它扩展了一个 JPanel 并做一些自定义的东西。在那个组件里面我有一个线程，它像这样永远循环：

```
//chat thread
    Thread chat_thread = new Thread(new Runnable(){
        public void run(){
            while(true){
                //get chat updates
            }
        }
    });
    chat_thread.start(); 
```

那么问题来了，当组件被方法从其父组件中移除时`remove()`，这个线程是否还活着，或者当你移除组件时它会死掉？

编辑：
感谢大家的回复，确实线程并没有终止删除它的启动器，所以为了从另一个组件终止这个线程，我做了以下事情：

```
Set<Thread> t = Thread.getAllStackTraces().keySet();
    Iterator it = t.iterator();
    while(it.hasNext()){
        Thread t2 = (Thread)it.next();
        if(t2.getName().equals("chat_thread")){
            t2.interrupt();
        }
    } 
```

首先使用 Thread.setName() 方法为我的线程创建一个名称。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:49:22.300

该线程永远不会死亡（除非它崩溃或自行终止）。

启动它的线程或包含它的组件发生了什么并不重要。

如果您不想挂起JVM，您可以将其声明为守护线程。然后它会在其他所有操作时关闭。为了获得更多控制，您需要确保在适当的时间终止您自己的代码中的线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T06:49:57.557

它仍然会活着。正在运行的线程构成 GC 的根。从根开始的引用链中可访问的所有内容都不符合 GC 条件。顺便说一句，这意味着您的面板也不会被 GC，因为线程包含对面板 ( `EnclosingPanel.this`) 的隐式引用。

当您不想再运行该线程时，您需要确保停止该线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T06:51:29.257

线程在完成工作或您完成工作之前不会死亡`interrupt`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T07:05:03.080

线程在退出其 run() 方法时将终止，因此当组件通过 remove() 方法从其父级中删除时，该线程将永远不会终止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T01:22:01.020

看看 Component.removeNotify。在您的组件中，保留指向线程的指针：

```
public class MyPanel extends JPanel {
   private Thread thread = ...;

   public void removeNotify() {
      super.removeNotify();
      thread.interrupt();
   }
} 
```

当awt 决定删除组件的本机对等点（即支持awt 组件的windows 或linux 组件）时，该方法由它自己调用。根据javadoc：

通过销毁本机屏幕资源使该组件无法显示。此方法由工具包内部调用，不应由程序直接调用。覆盖此方法的代码应调用 super.removeNotify 作为覆盖方法的第一行。

# c++ - Visual Studio 2010 C++ - 如何包装 .lib 文件以供重用

> ID：10959015
> 
> 赞同：2
> 
> 时间：2012-06-09T06:47:05.450
> 
> 标签：c++, visual-studio-2010, dependencies, word-wrap, libs

我在 Visual Studio 2010 中使用 C++。我正在尝试构建一个客户端和服务器都依赖于同一个“引擎”的客户端-服务器架构

以下是解释这一点的图表：

[图片 http://img266.imageshack.us/img266/5573/dependencies.png](http://img266.imageshack.us/img266/5573/dependencies.png)

在哪里：

**引擎**- 特定于应用程序的引擎

**BaseEngine** - 非特定于应用程序的引擎（由其他应用程序使用）

**SomeLibrary** - BaseEngine 所依赖的库

使用 Visual Studio，我设置了适当的项目引用和“包含目录”。

**Client**能够看到 Engine 中的方法，而Engine**能够**看到**BaseEngine**中的方法。但是问题是当客户端和/或服务器调用引擎上的方法时，我遇到了一些*链接错误（LNK1120、LNK2001）。*

似乎发生这种情况是因为引擎依赖于 BaseEngine 而客户端不依赖于 BaseEngine。

所以我的问题是：

无论如何，Engine 和 BaseEngine 项目是否可以打包，以便客户端和服务器不需要引用 BaseEngine？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:34:02.770

问题是：链接器错误是否与 Engine.lib 或 BaseEngine.lib 相关？
我假设您对 BaseEngine.lib 导出并在客户端/服务器中引用的函数有问题，这会导致无法解析的符号。
如果您的客户端/服务器依赖于 BaseEngine.lib 导出的功能，但您只引用 Engine.lib，则必须直接引用 BaseEngine 库或使 Engine.lib 显式转发 BaseEngine.lib 提供的这些功能。
Engine.lib 确实依赖（和引用）BaseEngine.lib 的事实并不意味着 BaseEngine.lib 的功能是由 Engine.lib 无缝转发的。我猜你正在偶然发现这个假设。如果确实需要，链接器仅包含从 BaseEngine.lib 到 Engine.lib 的功能。但是，除非您明确这样做，否则这些功能对于进一步的依赖项（在您的情况下为客户端/服务器）是不可见的。我建议您在 Engine.lib 中编写某种包装器功能，以转发客户端/服务器引用的 BaseEngine.lib 中的函数。

# c++ - lua_pcall 去哪儿了？（OSX Lion 上的 Lua 5.2.0）

> ID：10959017
> 
> 赞同：2
> 
> 时间：2012-06-09T06:47:35.663
> 
> 标签：c++, linker, compiler-errors, lua, symbols

问题：

```
$ clang++ -L../lib/osx/ -I../include/ -o test Script.cpp Main.cpp Verbose.cpp -llua -lUnitTest++
Undefined symbols for architecture x86_64:
  "_lua_pcall", referenced from:
      LuaSystem::dostring(char const*) in Script-EgY0dM.o
     (maybe you meant: _lua_pcallk)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

让我们看看我的 lua 构建：

```
$ cd src/
stevenlu443@steven-mba(Jun 09 02:41:58)[~/Downloads/lua-5.2.0/src]
$ ls
Makefile   lcorolib.c ldump.o    llex.o     lopcodes.o ltable.c   luac.c
lapi.c     lcorolib.o lfunc.c    llimits.h  loslib.c   ltable.h   luac.o
lapi.h     lctype.c   lfunc.h    lmathlib.c loslib.o   ltable.o   luaconf.h
lapi.o     lctype.h   lfunc.o    lmathlib.o lparser.c  ltablib.c  lualib.h
lauxlib.c  lctype.o   lgc.c      lmem.c     lparser.h  ltablib.o  lundump.c
lauxlib.h  ldblib.c   lgc.h      lmem.h     lparser.o  ltm.c      lundump.h
lauxlib.o  ldblib.o   lgc.o      lmem.o     lstate.c   ltm.h      lundump.o
lbaselib.c ldebug.c   liblua.a   loadlib.c  lstate.h   ltm.o      lvm.c
lbaselib.o ldebug.h   linit.c    loadlib.o  lstate.o   lua        lvm.h
lbitlib.c  ldebug.o   linit.o    lobject.c  lstring.c  lua.c      lvm.o
lbitlib.o  ldo.c      liolib.c   lobject.h  lstring.h  lua.h      lzio.c
lcode.c    ldo.h      liolib.o   lobject.o  lstring.o  lua.hpp    lzio.h
lcode.h    ldo.o      llex.c     lopcodes.c lstrlib.c  lua.o      lzio.o
lcode.o    ldump.c    llex.h     lopcodes.h lstrlib.o  luac
stevenlu443@steven-mba(Jun 09 02:41:59)[~/Downloads/lua-5.2.0/src]
$ nm liblua.a | grep _lua_pcall
115:0000000000001a30 T _lua_pcallk
116:0000000000003b40 S _lua_pcallk.eh
1563:                 U _lua_pcallk
1839:                 U _lua_pcallk
stevenlu443@steven-mba(Jun 09 02:42:12)[~/Downloads/lua-5.2.0/src]
$ nm *.o | grep _lua_pcall
115:0000000000001a30 T _lua_pcallk
116:0000000000003b40 S _lua_pcallk.eh
597:                 U _lua_pcallk
977:                 U _lua_pcallk
2630:                 U _lua_pcallk
2760:                 U _lua_pcallk 
```

为什么不`_lua_pcall`存在？5.2 文档似乎说 pcallk 与 pcall 一样，但具有能够产生的好处，但 pcall 应该仍然可用......

更新：我刚刚意识到我正在尝试使用较旧的（5.1？）标头链接到 5.2... 有人知道哪里有一个列表说明哪些标头是必要的吗？我不需要来自 Lua 源的所有标题。

我们可以从这里看到的内容推断，在 5.2 中 pcall 是使用`_lua_pcallk`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:27:03.927

要编译使用 Lua C API 的程序，您需要`lua.h`经常`lauxlib.h`包含`lualib.h`.

当你改变 Lua 的版本时，比如从 5.1 到 5.2，你需要重新编译你的程序。当您更改相同版本的发行版时，例如从 5.1.4 到 5.1.5，您无需重新编译，只需重新链接即可。

当然，在所有情况下，请确保使用一致的头文件和库，即不要混合来自不同版本或发行版的头文件和库。

# java - 从java中的一维数组创建多维数组

> ID：10959021
> 
> 赞同：1
> 
> 时间：2012-06-09T06:49:01.610
> 
> 标签：java

我想从java中的一维数组创建一个多维数组。

我的一维数组就像

```
 int[] grid = {5, 3, 1, 2, 0, 4, 1, 1, 3 }; 
```

我想在运行时创建一个 3x3 维度的矩阵，因为这个数组中有 9 个元素。任何人都可以为此提出一些好主意。谁能建议我在下面的代码中应该做什么，以便它可以给我 3 个数组的数组列表，或者如果有人可以建议我一些更好的想法来正确执行此操作。我知道下面的代码有错误。

```
 ArrayList<int[]> matrix = new ArrayList<>();
    int[] tempArray = new int[n];
    int j = 0;
    for(int i=0 ; i<=grid.length; i++){         

        if((i+1) / 3 == 0){         
            matrix.add(tempArray);
            j=0;
        }else{          
            tempArray[j] = grid[i];
            j++;
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:58:31.847

Java原生做多维数组；您不需要在`ArrayList`.

像这样的东西应该给你你想要的：

```
int[] grid = {5, 3, 1, 2, 0, 4, 1, 1, 3 };
int [][] matrix = new int[3][3];

for (int x = 0; x < 3; x++) {
  for (int y = 0; y < 3; y++) {
    matrix[x][y] = grid[x + y * 3];
  }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:55:30.223

您的迭代步骤离数组太远了；`grid.length`为您提供值 9，最高索引为 8 - 将您的结束条件更改为严格小于长度。

当您准备好将新数组放入`ArrayList`. 我建议，在添加矩阵后，创建一个新实例`tempArray`：

```
matrix.add(tempArray);
tempArray = new int[n];
j++; 
```

`j`当你准备好重新添加一些元素到你的元素时，不要重置为 0 `ArrayList`- 这会让它回到它开始的地方。与`i`自动递增相同的问题 - 您必须意识到`i`可能已经比您预期的更进一步。

最后，我建议使用模运算符而不是那样除法 - 模以相同的方式工作，并且更容易阅读。

```
if(i % 3 == 0) { // Analogous to adding one and dividing by 3. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T07:22:09.857

```
public class sample {
public static void main(String args[])
  {
    int[] grid = {5, 3, 1, 2, 0, 4, 1, 1, 3 };
    int i=0,j=0;
    int count=-1;int k;
    int[][] arr=new int[3][3];

    for(i=0;i<3;i++)
    {
     count++;
      for(j=0;j<3;j++)
      {

          if(count == 0)
          {
              k=j;
              arr[i][j]=grid[k];
          }

          if(count == 1)
          {
              k=j+3;
               arr[i][j]=grid[k];
          }
          if(count == 2)
          {
              k=j+6;
               arr[i][j]=grid[k];
          }
     }

    }

   for(i=0;i<3;i++)
   {
    for(j=0;j<3;j++)
    {

        System.out.print(arr[i][j]+" ");
    }
    System.out.println(" ");
    }

  }
} 
```

# javascript - 在 img 点击时更改正文 onLoad

> ID：10959028
> 
> 赞同：0
> 
> 时间：2012-06-09T06:49:45.750
> 
> 标签：javascript, asp.net, javascript-events

我有一个页面，该页面有一个标签`<body onload="setInterval('window.location.reload()', 60000);">`，该标签会导致页面每 1 分钟刷新一次。

我想制作一个按钮（ PAUSE ），单击该按钮会取消刷新。

我尝试了以下方法，但它不起作用：

`window.onload= function () {};`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:00:36.873

使用[clearInterval()](http://www.w3schools.com/jsref/met_win_clearinterval.asp)

在您的脚本中：

```
var pid=false;
function clear()
{
   clearInterval(pid);
   pid=false;
}
function resume()
{
   if(!pid)
     pid=setInterval('window.location.reload()', 60000); 
} 
```

在身体里

```
<body onload="pid=setInterval('window.location.reload()', 60000);">....
<button onclick="clear()">Pause</button>
<button onclick="resume()">Resume</button>.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T06:53:00.853

你可以`clearInterval()`这样打电话

```
id = setInterval('func', time);
<button onlcick="clearInterval(id)">Pause</button> 
```

`clearInterval()``window`是清除你的对象中的一个方法`setInterval()`

[这是一个](http://bit.ly/MiX2Qd)包含更多信息的链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T07:02:10.770

最好将脚本放在一个函数中，以便您也可以从其他地方调用它。

像这样...

```
<html>
<head>
    <script type="text/javascript">
        var intervalRef;   
        function ResumeRefresh(interval){
            intervalRef = setInterval('window.location.reload()', interval);
        }
        function StopRefresh(){
            intervalRef=window.clearInterval(intervalRef);
        }
    </script>
</head>
<body onload="ResumeRefresh(60000);">
    <input type="button" val="Stop Refreshing" onclick="StopRefresh();"></input>
</body> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T07:03:59.403

你将需要这样的东西：

```
<script>
var reloadInterval;
var run = true;
function setMyInterval()
{
   reloadInterval = setInterval('window.location.reload()', 60000);
}
function Pause()
{
   if(run)
   {
      clearInterval(reloadInterval);
   }
   else 
   {
      reloadInterval = setInterval('window.location.reload()', 60000);
   }
}
</script> 
```

html:

```
<body onload = 'setMyInterval()'>
<button onlcick="Pause()">Pause / Play</button> 
```

# android - 如何为 pulltorefreshlistview 确定 onItemClick

> ID：10959030
> 
> 赞同：1
> 
> 时间：2012-06-09T06:50:38.693
> 
> 标签：android

我正在使用 pulltorefreshlistview 我如何确定它的 onitemclick，我正在使用的当前代码没有给我正确的位置。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T07:17:12.590

正如评论中已经指出的那样：您可能正在单击屏幕上的第一个*可见*位置，但这并不意味着没有任何隐藏项目或不可见的标题占据位置 1 和 2。

实际上，在查看了[pull-to-refresh实现的源代码后](https://github.com/erikwt/PullToRefresh-ListView/blob/master/libraryproject/src/eu/erikw/PullToRefreshListView.java)，确实添加了[至少一个header](https://github.com/erikwt/PullToRefresh-ListView/blob/master/libraryproject/src/eu/erikw/PullToRefreshListView.java#L219)。

一种解决方案是通过（以及可能的其他一些计数）`OnItemClick(...)`的返回值来抵消位置。但是，仅使用from调用并将返回的对象转换为您填充 ListView 的任何内容[`getHeaderViewsCount()`](http://developer.android.com/reference/android/widget/ListView.html#getHeaderViewsCount%28&29)可能更容易且更简单。[`getItemAtPosition(...)`](http://developer.android.com/reference/android/widget/AdapterView.html#getItemAtPosition%28int%29)`position``OnItemClick`

# android - Android中的嵌套线程（线程中的线程）

> ID：10959045
> 
> 赞同：1
> 
> 时间：2012-06-09T06:52:41.627
> 
> 标签：android, multithreading, nested

是否建议实现嵌套线程？我遇到了需要在线程中调用线程的情况。我也有其他选择，比如在同一个线程中实现所有方法，但它变得太不整洁了。该项目中途将被其他人接管，因此其他人可能很难将所有东西放在一起。

还建议在一个线程内调用多个线程（出于与上述相同的原因）。

它会以任何方式影响性能吗（从逻辑上讲，它应该会提高性能，因为该软件是为双核设备设计的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:13:03.093

创建新线程会给您带来更多麻烦，因此通常我建议您不要仅仅为了分离而手动创建新线程。

如果您希望在主 UI 线程之外处理相当不同的工作块，则可以使用[更简单的方法来处理线程](http://developer.android.com/resources/articles/painless-threading.html)。考虑将它们放入`AsyncTask`s 中，如果您想同时运行多个任务，您可以确保它们运行的​​执行程序具有大于一个的线程池大小。

如果不详细说明您的问题实际上是什么，就很难准确地说出正确的方法是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:03:53.567

在得到@kabuko、@Fuzzical Logic 的回答并进行了一些研究后，我发现使用 AsyncTask 嵌套线程实际上是不可能的，因为 AsyncTask 需要在 UI 线程中执行。
但是，我试图实现的可以通过以下方式完成：

*   在初始 UI 线程中，调用不同的、多个 AsyncTask 来执行。

    例子：

    protected void onCreate(Bundle savedInstanceState) {.....

    DownloadUpdates.execute(fileId); //异步任务#1

    UpdateNotification.execute(); //异步任务#2

    ……}

**注意**（如此处文档中所述[）](http://developer.android.com/reference/android/os/AsyncTask.html)：

> 单个任务只能执行一次（如果尝试第二次执行会抛出异常）

*   *但是，如果两个线程相互依赖，请避免使用任何此类逻辑，因为它的执行时间是不可预测的，并且可能会陷入死锁或其他问题。*
*   *此外，如@Fuzzical Logic 所述，使用普通线程（不使用 AsyncTask）也可以实现嵌套线程*

# java - b0rked eclipse / IBM RAD

> ID：10959049
> 
> 赞同：1
> 
> 时间：2012-06-09T06:53:13.413
> 
> 标签：java, eclipse, validation, block, ibm-rad

Eclipse 和 IBM RAD 8 都不起作用。当这些 IDE 验证 Java 时，它们会报告阻止构建的错误错误。证据：

![在此处输入图像描述](../Images/c6bfe3495ed4d3f39f126b987f44c850.png)

即使我注释掉代码，它也会报告错误。我做清洁，我做构建，我从头开始制作一个全新的项目，我在 Eclipse 和 IBM RAD 8 之间切换，他们甚至无法在这些 IDE 中进行代码验证：s。当我删除它抱怨的代码部分时，IDe 发现它说的代码不存在，因此报告是自相矛盾的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:20:24.460

尝试点击 Project -> Clean 看看它是否解决了问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T07:49:23.607

通常，您不应在 Eclipse 变体之间共享工作空间。.project 配置文件不是为此而设计的。

解压缩新的 Eclipse，创建新的工作区并从源存储库重新导入源。如果可行，请删除当前有故障的工作区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T08:02:52.650

看起来您设法以某种方式使 Eclipse Java 构建器不再工作。有很多原因，例如有缺陷的 .project 文件、安装的其他插件表现不佳、构建器在项目配置中被禁用。

不要检查所有这些，而是​​按照 Thorbjørn 的建议重新安装 Eclipse 并将您的代码签出到新的工作区中。

# python - 将 `numpy.linalg.det` 作为方法添加到 `numpy.matrix`

> ID：10959050
> 
> 赞同：3
> 
> 时间：2012-06-09T06:53:22.163
> 
> 标签：python, matrix, numpy

我想写`M.det()`而不是`numpy.linalg.det(M)`，所以我这样做了：

`numpy.matrix.det = numpy.linalg.det`

它奏效了。

对这个程序有什么要说的吗？

* * *

例子：

```
import numpy as np
np.matrix.det = np.linalg.det
M = np.matrix([[1,2],[3,4]])
print M.det() 
```

正确的输出：`-2.0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:55:29.547

这称为[猴子修补](http://www.pererikstrandberg.se/blog/index.cgi?page=PythonMonkeyPatch)。它可能在这种特殊情况下有效，但它使您的程序难以遵循，因为该`det`方法仅存在于您的程序中，并且没有记录在任何地方。此外，它依赖于`np.matrix`实现细节，特别是它是一个纯 Python 类，并且不适用于所有类：

```
>>> numpy.ndarray.det = numpy.linalg.det
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
TypeError: can't set attributes of built-in/extension type 'numpy.ndarray' 
```

我建议不要这样做；它使你的程序更难阅读和维护，真的没有理由不写`from numpy.linalg import det`，然后`det(A)`代替`A.det()`.

# python - 高流量站点的 Dajaxice 性能测量

> ID：10959051
> 
> 赞同：0
> 
> 时间：2012-06-09T06:54:03.990
> 
> 标签：python, django, performance, jquery, dajaxice

如果这个问题已经被这个网站上的某个人回答过，请指点我那里。

假设每天有数百万次点击，将 Dajaxice 用于高流量网站是一个不错的选择吗？是否有人遇到过多次 AJAX 调用服务器的网页加载时间方面的性能问题？

Python+Django 项目的替代方案是什么？只使用jQuery会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:06:54.407

根据我的经验，Web 应用程序的主要负载位于数据库上。不在框架或模板引擎上。

# mongodb - 如何检查对象嵌套属性是否存在？

> ID：10959059
> 
> 赞同：2
> 
> 时间：2012-06-09T06:56:54.850
> 
> 标签：mongodb

我有一个`Document`带有嵌套`Properties`(Name, Value) 集合的对象。

现在我想找到`"Properties.Name" = "SomePropertyName"`不存在的文件。

我试过这个，但它只有在属性存在但`null`有价值的情况下才有效：

```
{"Properties":{"$elemMatch":{"Name":"SomePropertyName", "Value.0":{"$exists":false}}}} 
```

我尝试了一些狂野`$ne`的`$exists`组合，这些组合应该可以在我的关系数据库查询体验中起作用，但它没有帮助。

文档示例：

```
[
  {
    "_id": "Document1",
    "Properties": [
      {
        "Name": "SomeName",
        "Value": [
          "value1",
          "value2"
        ]
      },
      {
        "Name": "Property2",
        "Value": [
          "value3"
        ]
      }
    ]
  },
  {
    "_id": "Document2",
    "Properties": [
      {
        "Name": "Property2",
        "Value": [
          "value3"
        ]
      },
      {
        "Name": "Property3",
        "Value": null
      }
    ]
  },
  {
    "_id": "Document3",
    "Properties": [
      {
        "Name": "SomeName",
        "Value": null
      },
      {
        "Name": "Property2",
        "Value": [
          "value3"
        ]
      },
      {
        "Name": "Property3",
        "Value": null
      }
    ]
  }
] 
```

查询应该返回`Document2`和`Document3`（查询“SomeName”属性）

如何查询属性不存在或有`null`值的文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T05:25:04.070

我相信这是您想要的查询：

```
db.prop.find({$or: [
... {"Properties.Name":{$ne:"SomeName"}},
... {"Properties":{$elemMatch:{"Name":"SomeName","Value":null}}}
... ] }) 
```

这表示您想要所有未设置“SomeName”的文档（即所有存在的文档都不等于“SomeName”）以及名称为“SomeName”且同时“Value”为空的所有文档。

我在您的示例上进行了尝试，并获得了文档 2 和 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-16T09:42:42.653

这应该可以解决问题

```
'Properties.Name' : { $exists : true, $ne: null } 
```

# c# - 画布应用程序的 Facebook 点赞按钮

> ID：10959063
> 
> 赞同：-1
> 
> 时间：2012-06-09T06:57:45.310
> 
> 标签：c#, facebook, facebook-graph-api, facebook-like, facebook-c#-sdk

我有以下类似按钮的代码：

```
<fb:like data-href="http://foobar.com/Home/View/@Model.News.Id/" send="true" width="320" show_faces="true" font=""></fb:like> 
```

当我尝试在 Facebook Linter 中调试它时。它失败了：

```
Can't Download: Could not retrieve data from URL. 
```

当我查看 Facebook 作为响应返回的内容时，我发现它正在重定向到身份验证页面。

这是一个画布应用程序，我必须对用户进行身份验证。所以我在控制器的每一个动作中都有它。

我想做的就是每页都有一个动态的like按钮。

我怎样才能解决这个问题 ？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:21:38.127

仅供参考：[https ://developers.facebook.com/blog/post/407/](https://developers.facebook.com/blog/post/407/)

> 在 Facebook 上为画布 URL 启用 Like 按钮 根据开发人员社区的反馈，我们可以在 Facebook 上的应用程序中点赞内容。现在，您的用户可以喜欢您应用程序中的页面，就像他们对 Facebook 页面和网络上的其他页面所做的一样。
> 
> 生成的 News Feed 故事将直接链接回应用程序，为用户提供更多喜欢 Facebook 内容的机会。
> 
> 要实现此功能，请在 IFramed 页面或画布端点中添加 Open Graph 协议标签。您的画布应用程序 ID 将自动添加为 fb:app_id。og:url 自动指向您的apps.facebook.com URL，og:site_name 将作为您的应用程序名称填写。
> 
> 例如，如果您有兴趣获得内容分发或让用户能够喜欢虚拟商品，请添加以下 Open Graph 协议：
> 
> og:title - 对象的标题 og:image - 代表对象的图像 URL。图片必须至少为 50 像素 x 50 像素，并且最大宽高比为 3:1。如果您有一个希望向用户发布更新的真实世界对象（例如，原因、电影、产品），请使用适当的类型包含 og:type 标记。您可以使用 URL Linter 验证是否已正确输入 Open Graph 标记。

为了这

> 无法下载：无法从 URL 检索数据。

您应该允许 linter 访问页面以读取 og 标签。如果您的页面处于用户身份验证状态，您应该了解如何允许 facebook

> Facebook 需要抓取您的页面以了解如何在网站周围显示它。

爬虫的用户代理是：“facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:52:26.200

你如何以及在哪里允许刮刀？我有一个页面，您必须登录，但我无法正常工作..

# css - Twitter Bootstrap Accordion 和按钮下拉菜单溢出问题

> ID：10959068
> 
> 赞同：21
> 
> 时间：2012-06-09T06:59:17.653
> 
> 标签：css, twitter-bootstrap

我将 Bootstrap 用于我网站的一部分。我将手风琴与下拉按钮混合在一起。当按钮位于底部时，问题就来了，下拉菜单被隐藏，因为 .accordion-body 溢出设置为隐藏。

您可以在此处查看 jsfiddle：http: [//jsfiddle.net/DBQU7/6/](http://jsfiddle.net/DBQU7/6/)

所以我做了你所期望的，试着去做`overflow-y:visible`。但是你可以在这里看到结果，它不起作用：（你可能还注意到下拉菜单在 div 内部，它在 div 内部创建了一个滚动条，而不是仅仅显示出来。

[http://jsfiddle.net/DBQU7/5/](http://jsfiddle.net/DBQU7/5/)

我看到了类似的问题：[Twiiter Bootstrap (Button Dropdown) + Div Fixed](https://stackoverflow.com/questions/9780525/twiiter-bootstrap-button-dropdown-div-fixed)

但这并不能解决我上面提到的问题。

所以问题是，我怎样才能让下拉菜单正常显示。

谢谢。

* * *

到目前为止我发现的唯一解决方案（我很高兴被证明是错误的）是添加一个 CSS 属性，使溢出在打开时可见，然后通过 JS 脚本使其在可见和隐藏之间切换......不理想，但到目前为止没有比这更好的了。

-- 已编辑 -- 实际上效果不是很好，似乎也不是一个可行的解决方案。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-22T01:46:31.097

## 创见

你非常接近你的解决方案。就是这个：

```
.accordion-body.in { overflow:visible; } 
```

该类`.in`在打开时添加，因此仅在打开时设置可见性。

[请参阅示例小提琴。](http://jsfiddle.net/DBQU7/17/)

## 可能有助于解决 Chrome 错误的更新

下面的 bug mg1075 注释可以通过对上面的代码稍作更改来解决，如下所示：

```
.accordion-body.in:hover { overflow:visible; } 
```

这基本上可以防止`overflow`在动画完成之前发生。它工作得很好，除了当您单击向下按钮打开下拉菜单然后*退出*时，`.accordion-body`它会再次裁剪下拉菜单，但直到您再次将鼠标悬停在下拉区域上。有些人可能认为这种行为更可取。

[请参阅带有更新代码的小提琴。](http://jsfiddle.net/DBQU7/21/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T16:24:52.453

另一个似乎适用于所有浏览器的解决方案：

```
.accordion-body[class*="in collapse"]{ overflow:visible;} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T12:22:58.997

我不知道你是否会发现这是一个可以接受的替代解决方案，或者你的下拉菜单有多少项目，但你可以使用“ [dropup](http://twitter.github.com/bootstrap/components.html#buttonDropdowns) ”类，以便让下拉菜单下拉而不是下拉。

[http://jsfiddle.net/ecSH4/](http://jsfiddle.net/ecSH4/)

```
<div class="btn-group dropup"> 
```

* * *

**更新**

在这一点上相当笨拙，但在有限的意义上，它“有效”。

[http://jsfiddle.net/ecSH4/52/](http://jsfiddle.net/ecSH4/52/)

```
$(".special-drop, .special-drop .caret").click(function() {
    var $myCollapsable = $(this).closest(".collapse"),
        $myDropDown = $(this).closest(".dropdown"),
        $myDropDownMenu = $(this).next(".dropdown-menu");

    function toggleDropMenu() {
        if ($myDropDown.hasClass("open")) {
            $myDropDownMenu.hide();
        } else {
            $myDropDownMenu.show();
        }
    }

    if ($myCollapsable.css("overflow") === "hidden") {
        $myCollapsable.css("overflow", "visible");
        toggleDropMenu();
    } else {
        $myCollapsable.css("overflow", "hidden");
        $myDropDownMenu.hide();
        toggleDropMenu();
    }

});

$(document).click(function() {
   $(".collapse").css("overflow", "hidden");
   $(".dropdown-menu").hide();
});​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T20:21:09.520

设置`overflow: visible`菜单打开时（[演示](http://jsfiddle.net/jefferyto/DBQU7/9/)）：

```
$('html').on('click', function() {
    setTimeout(function() {
        $('[data-toggle="dropdown"]').closest('.collapse').css('overflow', '');
    }, 0);
});

$('body').on('click', '[data-toggle="dropdown"]', function() {
    var parent = $(this).parent(), collapse = parent.closest('.collapse');
    setTimeout(function() {
        collapse.css('overflow', parent.hasClass('open') ? 'visible' : '');
    }, 0);
}); 
```

如果我们直接设置溢出，Chrome 中似乎存在重绘问题（在 Linux 上使用 Chrome 19 测试）。`setTimeout()`解决这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T22:13:30.740

如果您在这里找到了帮助让 Bootstrap 按钮下拉菜单在 jqgrid 内部工作的方法（来自链接的问题），那么答案很简单。首先，在您的按钮列的 colModel 条目中，使用“类”属性设置一个 css 类，然后在您的 css 文件中添加一行以使该类的样式溢出：可见。作为奖励，如果您在 colModel 条目中设置 title: false ，您将摆脱按钮上的工具提示悬停。

所以：

```
colModel:[...
    {name:"Action", index:"RecID", classes:"actionTD", title:false, label:"Action", width: 80, fixed: true, sortable:false, align: 'center', formatter: 'actionFormatter'} 
```

和：

```
.ui-jqgrid tr.jqgrow td.actionTD {overflow: visible;} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-16T21:22:10.470

将 id 添加到下拉切换链接。

例子：

```
id="actionButton" 
```

和 jQuery

```
function actionButtonExpand() {
    var actionButtonDropdownMenuHeight=$(this).parent().children(".dropdown-menu").height()+19;
    var actionButtonAccordionBodyHeight = $(this).parent().parent().parent().height();
    var actionButtonAccordionBodyExtended = actionButtonDropdownMenuHeight+actionButtonAccordionBodyHeight;
        $(this).dropdown();
        if($(this).parent().hasClass("open")){        
            $(this).parent().parent().parent().css("height","");
            $(this).parent().css("margin-bottom","9px");
        } else {
            $(this).parent().parent().parent().height(actionButtonAccordionBodyExtended);
            $(this).parent().css("margin-bottom",actionButtonDropdownMenuHeight);
        }
    }

function actionButtonContract() {
    $("#actionButton").parent().parent().parent().css("height","");
    $("#actionButton").parent().css("margin-bottom","9px");

}                           
$("#actionButton").click(actionButtonExpand);
$(".accordion-toggle").click(actionButtonContract); 
```

[http://jsfiddle.net/baptme/6yAnc/](http://jsfiddle.net/baptme/6yAnc/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T04:01:01.580

所以这里有一个部分解决方案。这确实使下拉菜单故意向上。使它成为一个下拉菜单。

这是要添加的 CSS 规则：

```
.btn-group.open-upward.open ul.dropdown-menu {
    top: auto;
    bottom: 100%;
} 
```

所以要添加的类是**`open-upward`**

```
<div class="btn-group open-upward">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
      <li>Dropdown stuff</li>
      <li>Dropdown stuff</li>
      <li>Dropdown stuff</li>
      <li>Dropdown stuff</li>
  </ul>
</div> 
```

我说部分是因为一旦你添加了这个类，它就会向上。您必须删除该类才能将其恢复为默认行为。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-04T22:39:43.257

我知道我迟到了七个月参加这个聚会，但也许其他人会觉得这很有帮助。

我发现这个问题的最干净的解决方案是在手风琴上使用 Bootstrap 事件处理程序。它仍然有点笨拙，但在 IMO 中，它比 ScottS 接受的答案要少一些（我认为如果不是 Chrome 中的行为会更好）。

```
$(document).ready(function() {
  $('.accordion-body').on('shown', function() {
    $(this).css('overflow', 'visible');
  });
  $('.accordion-body').on('hide', function() {
    $(this).css('overflow', 'hidden');
  });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-23T01:34:03.110

这是您需要添加的所有内容以使下拉菜单显示：

```
#collapseThree {
 溢出：可见；   
}​</pre>

[http://jsfiddle.net/DBQU7/6/](http://jsfiddle.net/DBQU7/6/)

```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-20T07:28:38.580

这是此问题在 Google 中的第一个结果，因此我将代表引导程序社区在此处重新发布此问题。根据 bootstrap 团队的说法，这个问题应该在 3.0 中修复；以下是推荐的临时解决方案：

在 boostrap.js 中，改变转换函数：

```
, complete = function () {
        if (startEvent.type == 'show') that.reset()
        that.transitioning = 0
        that.$element[method]('fully').trigger(completeEvent)
      } 
```

在 boostrap.css 中，添加这个类：

```
.collapse.in.fully
{
    overflow:visible;
} 
```

我已经在 IE8、9 和 10、FF 11 和 12 中对此进行了测试。这些是我们网络上允许的所有浏览器，但如果它在 IE8 和 FF11 中运行，它很有可能在任何地方都可以运行。我在 FF11 中接受的解决方案有问题。

来源：推特 github 问题 #3601

# symbian - Symbian merging of one sis file to other sis file

> ID：10959069
> 
> 赞同：0
> 
> 时间：2012-06-09T06:59:28.650
> 
> 标签：symbian

I'm working on a Symbian project where I'm trying to install an application from the server. The problem is that there are two SIS files coming from the server for the same application. How do I merge the two SIS files and install the result on the device?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:00:05.503

您可以在 .pkg 文件中使用嵌入式 sis 在 firstApp.pkg 中添加字符串

```
@secondApp.sis 
```

并运行 makesis

secondApp.sis 将在 firstApp.sis 中构建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:40:28.630

为什么要合并？只需单独安装它们 - 如果您可以安装一个，那么您可以安装两个。

如果这 2 个 SIS 文件也是您创建的，那么您可以将一个插入另一个。

# java - VC++睡眠功能的Android等效功能

> ID：10959082
> 
> 赞同：0
> 
> 时间：2012-06-09T07:02:00.503
> 
> 标签：java, android

是 android(Java) 中任何与 sleep(VC++) 函数等效的函数。如果没有，请提供一种方法来做到这一点。

例如。 `Sleep(5000);`// 延迟 5000 毫秒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:03:01.680

您可以尝试[Thread.sleep()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29)方法。

```
try {
        //thread to sleep for the specified number of milliseconds
        Thread.sleep(5000);
        } catch (Exception e) {
              e.printStackTrace();
        } 
```

# vb.net - 如何从 VB.net 代码调用 vbscript 中的特定函数

> ID：10959086
> 
> 赞同：0
> 
> 时间：2012-06-09T07:02:43.803
> 
> 标签：vb.net, vbscript, interop

在 VB.net 中，我们可以使用以下行执行 VBScript 代码：

```
System.Diagnostics.Process.start("AbsolutePathofVBScriptfile") 
```

但是如何从 VB.net 代码调用 vbscript 中存在的特定函数呢？我搜索了它，但无法弄清楚。我发现的一些东西是 IActiveScript、MSScript.ocx ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:11:19.100

我不确定这是否可以完成，因为您在两个完全不同的域中操作。

您提供的那行代码与双击 vbscript 文件没有什么不同。

我几乎没有做过 vbscript 编程，但是这又如何... 创建另一个脚本文件（存根），它只在您的主库文件中调用一个函数（子例程）。然后，从 VB.net 应用程序调用存根。

**库.vbs**

```
Function LibraryFunction(oValue)
    Wscript.Echo "LibraryRoutine Running!"
End Sub

... 
```

**存根.vbs**

```
' Essentially "Import" the library script
Const ForReading = 1

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("procedures.vbs", ForReading)
Execute objFile.ReadAll()

' Call the appropriate function from library
LibraryFunction(4) 
```

**VB.net**

```
System.Diagnostics.Process.start("stub.vbs") 
```

[函数、子例程以及如何从其他脚本调用它们](http://technet.microsoft.com/en-us/library/ee176984.aspx)

# object - 如何引用onMetaData属于什么

> ID：10959088
> 
> 赞同：0
> 
> 时间：2012-06-09T07:02:48.700
> 
> 标签：object, actionscript, netstream

我正在开发一个多 flv 预加载器，最多加载 10 个视频并背靠背播放。

我创建了一个包含 10 个对象的数组的 videoplay 对象。

这 10 个对象每个都有一个 netstream 和一个 onMetaData..

我的问题是；调用 onMetaData 时，我如何确定它所引用的对象..

```
 function vidPlayerStatus              (e):void
          {
          //trace(e.info.code);
          }

          function vidPlayerAsyncErrorHandler   (event:AsyncErrorEvent):void
          {
          }

          function vidPlayerMetaData            (item:Object):void
          {
      // which object ??
          }

          function vidPlayerInit                ():Object
          {
          var i;
          var vp:Object=new Object();
          var clip_array:Array=new Array();
          vp["nc"]=new NetConnection();
          vp["nc"].addEventListener(NetStatusEvent.NET_STATUS,vidPlayerStatus);
          vp["nc"].connect(null);
          for(i=0;i<10;i++)
           {
           var vc:Object=new Object();
           vc["vidi"]=new Video();
           vc["ns"]=new NetStream(vp["nc"]);
           vc["ns"].addEventListener(AsyncErrorEvent.ASYNC_ERROR, vidPlayerAsyncErrorHandler);
           vc["ns"].addEventListener(NetStatusEvent.NET_STATUS, vidPlayerStatus);
           vc["ns"].client={};
           vc["ns"].client.onMetaData=vidPlayerMetaData;
           vc["ns"].bufferTime=0;
           vc["stage"]=0;
           vc["is_paused"]=0;
           vc["vidi"].attachNetStream(vc["ns"]);
           clip_array.push(vc);
           }
          vp["clip_pf"]=0;
          vp["clip_array"]=clip_array;
          return vp;
          }

          function vidPlayerLoad                (str:String):int
          {
          var i;

          for(i=0;i<10;i++)
           {
           if(vidPlayer["clip_array"][i].stage==0) break;
           }
          if(i==10) { return -1; }
          vidPlayer["clip_array"][i]["vidi"].width=320;
          vidPlayer["clip_array"][i]["vidi"].height=240;
          stage.addChild(vidPlayer["clip_array"][i]["vidi"]);
          vidPlayer["clip_array"][i]["ns"].play(str);
          vidPlayer["clip_array"][i]["ns"].pause();
          vidPlayer["clip_array"][i]["is_paused"]=1;
          vidPlayer["clip_array"][i]["stage"]=10;
          vidPlayer["clip_array"][i]["vidi"].y=(i*240);
          return i;
          }

          function vidPlayerYield               ():void
          {
          var i,j;
          vidPlayer["clip_pf"]++;
          vidPlayer["clip_pf"]%=10;
          i=vidPlayer["clip_pf"];
          if(vidPlayer["clip_array"][i].stage==0) return;
          //trace("vp["+i+"] bytesloaded="+vidPlayer["clip_array"][i]["ns"].bytesLoaded+" bytestot="+vidPlayer["clip_array"][i]["ns"].bytesTotal+"   tim="+Math.round(vidPlayer["clip_array"][i]["ns"].time)+"  fps="+Math.round(vidPlayer["clip_array"][i]["ns"].currentFPS)+" buflen"+Math.round(vidPlayer["clip_array"][i]["ns"].bufferLength));
          }

          function vidPlayerPause               (index,state):void
          {
          if(state==0)  { vidPlayer["clip_array"][index]["ns"].resume(); vidPlayer["clip_array"][index]["is_paused"]=0; }
          else          { vidPlayer["clip_array"][index]["ns"].pause();vidPlayer["clip_array"][index]["is_paused"]=1; }
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:47:06.277

您可以使用包装器来获取这样的`vc`实例：

```
function vidPlayerMetaData(vc:Object, metaData:Object) { ... }

vc["ns"].client.onMetaData = function(metaData:Object) { vidPlayerMetaData(vc, metaData); }; 
```

考虑到您的代码，我真的建议使用强类型类实例而不是滥用对象来存储您的数据（`vp, nc`）。此外，使用 Vector 代替 the`clip_array`会增加可维护性并减少出错的机会。

# java - MVC pattern in an Android application for drawing

> ID：10959089
> 
> 赞同：1
> 
> 时间：2012-06-09T07:02:58.760
> 
> 标签：java, android

I'm developing the Android application for drawing. So, I NEED to use MVC pattern for it. I have View class which the application use for drawing:

```
public class PainterView extends View implements DrawingListener {

    private Painter painter;

    private Bitmap bitmap;
    private Paint bitmapPaint;
    private Path path;
    private Paint paint;

    public PainterView(Context context, Painter painter) {

        super(context);
        this.painter=painter;
        this.painter.addDrawingListener(this);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        if (bitmap!=null) {
            canvas.drawBitmap(bitmap, 0, 0, bitmapPaint);
            canvas.drawPath(path, paint);
        } 
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                painter.touchStart(x, y);
                break;
            case MotionEvent.ACTION_MOVE:
                painter.touchMove(x, y);
                break;
            case MotionEvent.ACTION_UP:
                painter.touchUp();
                break;
        }

        return true;
    }

    @Override
    public void update(Bitmap bitmap, Paint bitmapPaint, Path path, Paint paint) {

        this.bitmap=bitmap;
        this.bitmapPaint=bitmapPaint;
        this.path=path;
        this.paint=paint;
        invalidate();
    }
} 
```

Main activity:

```
public class MainScreenActivity extends Activity {
    /** Called when the activity is first created. */
    private PainterView mMainView;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        Display display = getWindow().getWindowManager().getDefaultDisplay();
        Painter painter=new Painter(display.getWidth(), display.getHeight());
        mMainView = new PainterView(this, painter);
        setContentView(mMainView);
    }
} 
```

And Painter class which keeps all algorithms (Model). Please, note, all algorithms work good:

```
public class Painter {

    private List<DrawingListener> mDrawingListeners;

    private static final float TOUCH_TOLERANCE = 4;
    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    public Paint mPaint;
    public Bitmap mBitmap;
    public Canvas mCanvas;
    public Path mPath;
    public Paint mBitmapPaint;

    private float mX, mY;

    public Painter(int width, int height) {
        initializeGraphic(width, height);
    }

    private void initializeGraphic(int width, int height) {

        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFF0000);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);

        mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        mCanvas.drawRect(new Rect(0, 0, width, height), new Paint(Color.BLACK));
    }

    private void drawingChanged() {
        notifyDrawingListeners();
    }

    public void touchStart(float x, float y) {
        Log.e("event", "start");
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
        drawingChanged();
    }

    public void touchMove(float x, float y) {
        Log.e("event", "move");
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
        }
        drawingChanged();
    }

    public void touchUp() {
        Log.e("event", "up");
        mPath.lineTo(mX, mY);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        drawingChanged();
    }

    public void addDrawingListener(DrawingListener listener) {
        if (mDrawingListeners==null) {
            mDrawingListeners=new ArrayList<DrawingListener>();
        }
        mDrawingListeners.add(listener);
    }   

    public void removeDrawingListener(DrawingListener listener) {
        mDrawingListeners.remove(listener);
    }

    public void notifyDrawingListeners() {

        for (DrawingListener listener:mDrawingListeners) {
            listener.update(mBitmap, mBitmapPaint, mPath, mPaint);
        }
    }
} 
```

But I have some problems: when I touch by screen and draw then it works, but if I up my finger from screen then the screen will be black again! I.e. the application doesn't save the result of drawing. So, if I add this lines into onDraw method:

```
@Override
protected void onDraw(Canvas canvas) {

    if (bitmap!=null) {
        canvas.drawBitmap(bitmap, 0, 0, bitmapPaint);
        canvas.drawPath(path, paint);
        painter.mBitmap=bitmap;
        painter.mBitmapPaint=bitmapPaint;
        painter.mPaint=paint;
        painter.mPath=path;
    } 
} 
```

then it works! But I don't understand why! The application uses the same links, why I need to change it again after drawing? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:05:50.473

Android implicity follows `MVC` pattern, so you just need not bother.

[MVC pattern on Android](https://stackoverflow.com/questions/2925054/mvc-pattern-in-android)

# asp.net - Custom paging in asp.net without data source controls using Entity Framework

> ID：10959091
> 
> 赞同：1
> 
> 时间：2012-06-09T07:03:07.530
> 
> 标签：asp.net, entity-framework

I am trying to implement custom pagination in gridview without using any data source controls. I didn't find any good/complete tutorial so far.

Here is how I am creating the gridview:

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" PageSize="10" 
               onpageindexchanging="GridView1_PageIndexChanging" ShowFooter="True">
 </asp:GridView> 
```

This grid is populated when a button is clicked. Rows from the database need to be picked based on items in listbox control

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    using (context = new TrackForceDataEntities())
    {
        try
        {
            string[] arr = lstStates.Items.Cast<ListItem>().Select(i => i.Text).ToArray();
            var searchResults = context.data_vault.Where(d => arr.Contains(d.STATE)).OrderByDescending(d=>d.STATE);

            GridView1.DataSource = searchResults;
            GridView1.DataBind();
         }
         catch (Exception exception)
         {
             Response.Write(exception.Message);
         }
     }
} 
```

This above query is very slow because it is bringing all records, How can I fetch only one page records and still show paging ?

Next is the gridview `PageIndexChanging` event. When I click page 2, it shows page 2 rows but paging links disappear.

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    using (context = new TrackForceDataEntities())
    {
        try
        {
            // var searchResults = context.data_vault.Where(d => d.STATE == lstStates.SelectedItem.Text).OrderBy(d => d.dv_id).Take(10).Skip(2);

            //var selection = lstStates.Items(i => i.Text).ToArray();
            //var result = context.data_vault.Where(x => selection.Contains(x.Prop));

            string[] arr = lstStates.Items.Cast<ListItem>().Select(i => i.Text).ToArray();

            var result = context.data_vault.Where(d => arr.Contains(d.STATE)).OrderByDescending(d => d.STATE).Skip(e.NewPageIndex * GridView1.PageSize)
                                         .Take(GridView1.PageSize)
                .ToList();

            //var result = context.data_vault.Where(d => d.STATE == lstStates.SelectedItem.Text).OrderBy(d => d.STATE).Skip(e.NewPageIndex * GridView1.PageSize).Take(GridView1.PageSize).ToList();
            //// this is very important part too
            GridView1.PageIndex = e.NewPageIndex;

            GridView1.DataSource = result;
            GridView1.DataBind();

        }
        catch (Exception exception)
        {
            Response.Write(exception.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:31:58.433

通过以下链接您将能够得到答案。分页是通过 sql server 通过传递页码和页面大小来完成的。

[点击这里](https://stackoverflow.com/questions/10911148/how-to-paginate-a-gridview-and-sql-custom-query-with-row-number/10912308#10912308)

# android - How to have 3 sets of layout resources for Android

> ID：10959093
> 
> 赞同：0
> 
> 时间：2012-06-09T07:03:16.097
> 
> 标签：android, layout, drawable

I'd like to have 3 sets of layouts and 3 sets of drawables for 480x854, 540x960, and 720x1280\.

How would I go about naming my resource folders to accomodate this?

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:08:22.643

*drawable-normal* (480x854)、*drawable-large* (540x960)、*drawable-xlarge* (720x1280) 怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:08:39.530

三组drawables可以放在以下文件夹的资源目录[res]下`res/drawable-hdpi`，`res/drawable-ldpi`和`res/drawable-mdpi`.

# javascript - Intermittent RequireJS Load Error

> ID：10959095
> 
> 赞同：17
> 
> 时间：2012-06-09T07:03:25.207
> 
> 标签：javascript, module, backbone.js, requirejs, js-amd

I have a rather large Backbone.js project that uses RequireJS. As the project size grew ("size" here referring to the number of separate module files), intermittent errors started cropping up. Most of the time, it's an object error:

`Uncaught TypeError: object is not a function`

Occasionally, it complains about a module not being loaded.

These errors disappear once the project is run through the r.js optimizer. They only happen when RequireJS is loading the individual modules.

Which brings me down to my question - does RequireJS start having issues with modules loading in time when the number of modules reach a certain number?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T19:08:43.517

这个问题似乎在即将发布的 require.js 2.1 版本中得到解决。看这里：

[https://github.com/jrburke/requirejs/issues/478](https://github.com/jrburke/requirejs/issues/478)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T16:59:06.210

这绝对是我最近几天遇到的一个错误。加载一个模块可能会导致应用程序不同部分中的第二个完全不相关的模块在之前完美运行的地方变得未定义。我经常使用 RequireJS - 这不是脚本加载或循环依赖问题。起初，当需要在第二层视图中迭代多次（1800+）的文本文件时，我最常遇到错误：

```
domReady -calls-> new View1() -iterates-> new SubView() -depends-> text!template
         -calls-> new View2() --> undefined! 
```

这将导致其他地方完全不相关的模块变得未定义。通过将 SubView 功能集成到 View 模块中，我解决了一段时间。

```
domReady -calls-> new CombinedView1() -depends-> text!template
         -calls-> new View2() --> ... all good ... 
```

随着项目的发展，我再次碰壁，真的需要找到一种方法来解决它。包含更多模块会导致先前定义的模块随机变为未定义。Require 不会引发错误，浏览器也不会。我也没有使用 CoffeeScript 或类似的东西。

我花了一些时间创建了我的应用程序的一个版本，它具有相同的模块和依赖结构，依赖视图、模型和集合被删除。这工作得很好，所以我只能假设存在某种内存问题？但是 Chrome 也从不抛出任何错误。

我想我的下一步是用一些消耗内存的循环来填充我的骨架应用程序，看看会发生什么：我会让你知道它是怎么回事。

使用 Require v2.0.1，所以没有顺序插件 - 依赖项和包都使用 shim config 指令进行配置。加载的非 AMD 模块：

*   骨干
*   下划线
*   jQuery
*   胡子
*   传单
*   引导程序

PS道歉，如果这不是在正确的地方。我认为作为评论会更好，但老实说，我在任何地方都看不到评论按钮。

**更新：** 此依赖结构不断中断：

```
Main
  - View 1
      - text!...
      - View 2
         - text!... 
```

每次用空字符串替换文本都可以正常工作：

```
Main
  - View 1
      - View 2 
```

那么为什么等待文本加载会导致 View 1 在主模块中显式设置为依赖项时变得未定义呢？在加载它所依赖的所有内容之前，肯定不应该调用 Main 吗？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-17T07:16:20.350

最近几天我一直在与同样的问题作斗争，这就是我发现的：

显然，通过 text.js 插件需要模板的嵌套依赖结构可能会导致竞争条件，当 requirejs 认为顶层模块准备好时，它会导致它没有准备好。当我有几个这种类型的嵌套模块依赖结构时，我才遇到这个问题：

```
Router
  -> View1
    -> text!.../view1.html
    -> View2
      -> text!.../view2.html
  -> View3
    -> text!.../view3.html
    -> View4
      -> text!.../view4.html
  -> View5
    -> text!.../view5.html
    -> View6
      -> text!.../view6.html
  -> View7
    -> text!.../view7.html
    -> View8
      -> text!.../view8.html 
```

有了这个结构，当路由器尝试实例化视图时，我得到了像“View1 不是构造函数”这样的类型错误。

还需要顶层视图中嵌套视图的模板为我解决了这个问题：

```
Router
  -> View1
    -> text!.../view1.html
    -> text!.../view2.html
    -> View2
      -> text!.../view2.html
  -> View3
    -> text!.../view3.html
    -> text!.../view4.html
    -> View4
      -> text!.../view4.html
  -> View5
    -> text!.../view5.html
    -> text!.../view6.html
    -> View6
      -> text!.../view6.html
  -> View7
    -> text!.../view7.html
    -> text!.../view8.html
    -> View8
      -> text!.../view8.html 
```

我真的不知道 require.js 是如何工作的，但这在我看来就像那些嵌套文本！当为父模块设置了一些“就绪”标志时，不考虑调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T09:06:51.430

确认您有

*   垫片配置[http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)
*   'waitSeconds' 属性和
*   [http://requirejs.org/docs/errors.html#timeout](http://requirejs.org/docs/errors.html#timeout)

希望这可以帮助

# c# - Set the Entity Connection string in a different project

> ID：10959096
> 
> 赞同：0
> 
> 时间：2012-06-09T07:03:27.853
> 
> 标签：c#, entity-framework, connection-string

I want to place **Entities** and **Database** (here I used Sql Serve Ce) in a project, and use them in another project in the `same solution`.

**`I have problem setting the database location this way and the context is always null`**

`Project One` will have all the **database** , **ConnectionString** and **entities**

`Project Two` is the User project of the Entities defined in Project One

This is a Windows Forms Application And the name of the Entity Connection Name is **dbEntitties**

The database is in the **root of the application folder**

This was a sample connection string I had :

```
<add name="dbEntities"
 connectionString="metadata=res://*/dbModel.csdl|res://*/dbModel.ssdl|res://*/dbModel.msl;provider=System.Data.SqlServerCe.3.5;provider connection string=&quot;
 Data Source=|DataDirectory|\db.sdf;Password=xxxxxxx;Persist Security Info=True&quot;" providerName="System.Data.EntityClient" /> 
```

-- The project will work as it is expected if I place the **database** and **entities** in the same project, But placing them in a different project and referencing the that project wouldn't help, I got no errors but the context will remain null.

Any Ideas ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:47:00.897

好的，所以从上面的评论中，我们已经确定了原因是它没有获取配置，因为您已将它与数据库一起放在根目录中。

配置只会被入口点拾取。将它放在 Windows 窗体中应该可以解决此问题。

# c# - Equivalent of Controller.Read() in ASP.NET MVC 3

> ID：10959098
> 
> 赞同：0
> 
> 时间：2012-06-09T07:03:53.567
> 
> 标签：c#, .net, asp.net-mvc-3

I want to send the files in filestreams of size more than 800 MB from controller to UI.

Is there any method to send the filestream from controller to browser in ***chunks***.

because if I use

```
File(downloadStream, "application/octet-stream", fileName); 
```

is taking system memory and not able to send it to UI.

Please suggest the most efficient way of sending the filestream in chunks .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:16:04.047

使用 FilePathResult，它使用 HttpResponse.TransmitFile 将文件直接写入 http。此方法不会在服务器的内存中缓冲文件，因此它应该是发送较大文件的更好选择。

[在这里](http://www.mikesdotnetting.com/Article/125/ASP.NET-MVC-Uploading-and-Downloading-Files)查看它的实现

# ruby-on-rails - sending value on partial file via another view and render that form

> ID：10959100
> 
> 赞同：-1
> 
> 时间：2012-06-09T07:04:07.140
> 
> 标签：ruby-on-rails

```
<%@nfo.each do |m|%>

  <table>

    <tr><p class="icons"><%= m.name %></p></tr>
          <tr> <%= image_tag  m.picture(:big)%><tr>

       <%@a -=1%>
   </div>

</table>
<% end %> 
```

when I am using this at that time I can iterate it through each but I want to iterate it on another view file for that I made it some thing like

```
<%@nfo[i].name%>

  <table>

    <tr><p class="icons"><%= @info[i].name %></p></tr>
          <tr> <%= image_tag  @info[i].picture(:big)%><tr>

   </div>

</table> 
```

and in another view I am rendring this form and want to pass the value of i but I am not able to pass how I can pass the value because now this form also giving error i is not define is it possible to send the value from one view to partial file like this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:22:45.827

您可以将变量传递给您的部分：

```
<%= render :partial => "your_partial", :locals => { :variable => value } %> 
```

然后您可以通过本地哈希访问您的部分内容。因此，您只需在视图中传递变量。

# android - how can i play video from byte in android

> ID：10959103
> 
> 赞同：6
> 
> 时间：2012-06-09T07:04:35.643
> 
> 标签：android, encryption, android-videoview

I have video in my project. and for security i encrypt the video files which is working quite well. but problem is that the

```
 **videoView.setVideoPath("/mnt/sdcard/intro_video.3gp");** 
```

In this method I have to pass the file.(which is decrypted) so I am creating decrypted file on sdcard for path of file is that possible to pass bytes (which are decrypted) directly in video view. I am using Cipher for encrypt.

Here is my code for

```
 private void decryption()throws Exception {
    // TODO Auto-generated method stub
    String filePath2 = path + "en/encVideo";

    String filePath3 = path + "de/decVideo";

    File decfile = new File(filePath3);

    if(!decfile.exists())
        decfile.createNewFile();

    File outfile = new File(filePath2);
    int read;

    FileInputStream encfis = new FileInputStream(outfile);
    Cipher decipher = Cipher.getInstance("AES");

    decipher.init(Cipher.DECRYPT_MODE, skey);
    FileOutputStream decfos = new FileOutputStream(decfile);
    CipherOutputStream cos = new CipherOutputStream(decfos,decipher);   

    while((read=encfis.read()) != -1)
    {

        cos.write(read);
        cos.flush();
    }
    cos.close(); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:55:54.837

如果您正在寻找将视频流式传输到没有中间文件来存储解密版本的 VideoView，那么答案是肯定的，您可以做到。您需要两个主要组件：一个流服务器，例如本地 http 实例和[CipherInputStream](http://developer.android.com/reference/javax/crypto/CipherInputStream.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:42:27.090

我怀疑你能做到。由于您使用的是 VideoView，因此需要特定的标头和尾端来说明哪种格式以及如何编码等。如果您能弄清楚我仍然怀疑它是否可以采用原始文件。您最好的选择是创建随机文件名，同时保存并将其传递给播放器。

# java - 使用清单和音频和图像文件夹创建 jar 文件，包括外部 jar

> ID：10959118
> 
> 赞同：2
> 
> 时间：2012-06-09T07:06:07.233
> 
> 标签：java, jar

我正在尝试创建一个具有以下项目内容的 jar 文件

*   项目
    *   user_interface（包文件夹，包括与 GUI 相关的所有 .classes）
    *   function_operations（包文件夹，包括与操作相关的所有 .classes）
    *   声音（文件夹包括所有声音文件）
    *   图标（包括所有图像和图标）
    *   jars（包括所有外部 jar 文件）
    *   manifest.txt（有一行 *Main-Class: user_interface.messengerGUI* 和两个输入）

我正在使用命令

```
jar cvfm helloBuddy.jar manifest.txt user_interface/*.class function_operations/*.class icons/ sounds/ 
```

它成功创建了jar文件，但在执行时出现以下错误

> JAI-MATA-DI-LINUX 项目# java -jar helloBuddy.jar 线程“main”中的异常 java.lang.NoClassDefFoundError: user_interface/messengerGUI 原因：java.lang.ClassNotFoundException: user_interface.messengerGUI at java.net.URLClassLoader$1。在 java.net.URLClassLoader.findClass(URLClassLoader.java:205) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:321) 的 java.security.AccessController.doPrivileged(Native Method) 运行(URLClassLoader.java:217)在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:266) 找不到主类：user_interface.messengerGUI。程序将会退出。

另一个问题是如何包含外部罐子？

编辑：终于成功地形成了罐子。使用 eclipse 我可以创建 jar 文件。但是当我运行它时会出现以下错误

> 线程“main”中的异常 java.lang.NoClassDefFoundError: org/jivesoftware/smack/ChatManagerListener 原因：java.lang.ClassNotFoundException: org.jivesoftware.smack.ChatManagerListener at java.net.URLClassLoader$1.run(URLClassLoader.java:217 ) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:205) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:321) 在 sun.misc.Launcher$ AppClassLoader.loadClass(Launcher.java:294) at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 找不到主类：user_interface.messengerGUI。程序将会退出。

我在项目中包含了一些外部 jar 文件。org/jivesoftware/smack/ChatManagerListener 这个类属于smackx.jar 文件之一。所以这个错误是添加到项目中的外部 jar 文件。任何线索我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:06:39.603

[除非您使用像jarclassloader](http://one-jar.sourceforge.net/)这样的自定义类加载器或使用像 onejar 这样的工具[，](http://www.jdotsoft.com/JarClassLoader.php)否则您不能像这样嵌套 jar 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:16:35.177

试试这个，这是在eclipse中创建jar或runnable jar的方法，项目中的所有外部库都将包含在内

```
File -> Export-> Java ->Runnbale JAR file

Launch configuration : your Class containing the public static void main(String[] args)

Export destination : Target place

Library Handling:

Package required libraries into generated JAR

FINISH 
```

# iphone - ZBar SDK orientation Issue in Ipad?

> ID：10959120
> 
> 赞同：1
> 
> 时间：2012-06-09T07:06:24.460
> 
> 标签：iphone, ios

I have an IPAD application which is supporting only in landscape mode. In which i wanted to use ZbarSDK for reading bar codes,i created a view in my view controller then load it with background of the readerviewcontroller.working fine in iphone.But in ipad with this orientations it is behaving strage,like loading in portrait mode,etc.I am using this but no luck.`reader.supportedOrientationsMask = ZBarOrientationMask(UIInterfaceOrientationLandscapeRight`can anybody help me how to use this sdk correctly in ipad with landscape orientations?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T14:49:57.213

我刚刚遇到嵌入式阅读器视图的问题，并读到在旋转时缺少对 setNeedsLayout 的调用，不确定它是否会对某人有所帮助，但这是解决我的问题的方法

```
- (void) willRotateToInterfaceOrientation: (UIInterfaceOrientation) orient duration:     (NSTimeInterval) duration
{
    [self.readerView willRotateToInterfaceOrientation:orient  duration:duration];
    [self.readerView setNeedsLayout];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:55:51.920

Works fine for me. Our iPad app supports only Landscape orientation:

```
// ADD: present a barcode reader that scans from the camera feed
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
ScanOverlay overlayController = [[ScanOverlay alloc] initWithNibName:@"ScanOverlay" bundle:nil];
reader.cameraOverlayView = overlayController.view;
ZBarImageScanner *scanner = reader.scanner;
// TODO: (optional) additional reader configuration here
reader.supportedOrientationsMask = UIInterfaceOrientationMaskLandscape;
reader.wantsFullScreenLayout = YES;
reader.showsZBarControls = NO;  //If we don't set this to NO, the overlay may not display at all
reader.tracksSymbols = YES;
[overlayController willRotateToInterfaceOrientation:YES duration:0.5];

// ADD: present a barcode reader that scans from the camera feed

// EXAMPLE: disable rarely used I2/5 to improve performance
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

//Show the scanner view    
if([self respondsToSelector:@selector(presentViewController:animated:completion:)]){
    [self presentViewController:reader animated:YES completion:^(void){}];
} else if([self respondsToSelector:@selector(presentModalViewController:animated:)]) {
    [self presentModalViewController:reader animated:YES];
} else {
    NSLog(@"Error! Can't present the View Controller");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T07:13:11.250

我认为使用下面的代码可以帮助你......

```
ZBarReaderViewController *reader = [ZBarReaderViewController new];
[reader shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeRight]; 
```

希望，这对你有帮助.. :)

# asp.net - 样式表仅适用于 asp.net 中母版页的内容页

> ID：10959122
> 
> 赞同：1
> 
> 时间：2012-06-09T07:07:12.407
> 
> 标签：asp.net

我有一个母版页，其中链接了 10 个内容页。现在，附加到母版页的 CSS 文件会自行应用于内容页。

但是，如果我只想为其中一个内容页面使用不同的 CSS 文件（并且母版页 CSS 都不应该应用于它）。怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:10:03.763

您可以将该样式添加到特定页面的占位符而不是母版页

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
    CodeBehind="Detail.aspx.cs" Inherits="Test.Detail" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <link href="<%= Page.ResolveUrl("~/styles/style.css")%>" type="text/css" rel="stylesheet" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
</asp:Content> 
```

# javascript - 在循环内调用异步函数

> ID：10959123
> 
> 赞同：2
> 
> 时间：2012-06-09T07:07:34.333
> 
> 标签：javascript, jquery, asynchronous, highcharts

我有一个对象`charts`，

```
 var charts = {
        chart1 : function (){
            return {
                key1 : value1,
                key2: value2,
                key3, value3
            }
        },
        chart2 : function(){
            return {
                key1 : value1,
                key2: value2,
                key3, value3
            }
        },
        chart3 : function(){
            return {
                key1 : value1,
                key2: value2,
                key3, value3
            }
        } 
    } 
```

一个函数`callback`

```
function callback(instance){
    .....
    .....
} 
```

我可以`chart1`像这样画图表，

```
var chart = new Highcharts.Chart(charts.chart1(),callback);
// callback is a function which gets called when drawing of chart is completed. 
```

所有像这样的图表，

```
 for(chart in charts){
        if(charts.hasOwnProperty(chart)){
            new Highcharts.Chart(charts.chart(),callback);
        }
    } 
```

但是，同时绘制很多图表会挂起firefox。所以，我想在前一个图表的回调中一一调用图表。（画完一张，再画第二张，以此类推……）

我可以通过创建一个包含每个图表名称的数组来实现这一点。在`callback`函数上，我将增加索引并调用下一个图表。

问题来了，

***如何在不手动创建图表名称列表的情况下绘制所有图表？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:27:57.430

您可以创建对象中所有键的可迭代数组，然后在构建每个图表时逐个循环遍历它们：

```
function makeAllCharts() {
    // make list of charts
    var chartList = [], pos = 0;
    for (chart in charts) {
        chartList.push(chart);
    }

    function nextChart() {
        if (pos < chartList.length) {
            var key = chartList[pos++];
            new Highcharts.Chart(charts[key](), function() {
                callback();
                nextChart();
            });
        }
    } 
    nextChart();
} 
```

因为您不能在没有循环的情况下一次直接从对象中迭代一个键列表`for (x in y)`，所以您确实需要创建可以通过增加索引来迭代的中间数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:14:04.527

您正在寻找 JSDeferred 库 - [http://cho45.stfuawsc.com/jsdeferred/](http://cho45.stfuawsc.com/jsdeferred/)

# visual-studio-2010 - 在 Visual Studio 中关闭整行复制

> ID：10959126
> 
> 赞同：19
> 
> 时间：2012-06-09T07:08:05.763
> 
> 标签：visual-studio-2010, copy-paste

Visual Studio 2010 中有一个设置可以在光标位于空白行且没有选择时关闭复制和剪切命令。但是，当光标不在空行上并且您按 ctrl+C 时，它**总是**将整行复制到剪贴板。我觉得这很烦人，因为我总是先突出显示某些内容，复制它，然后将光标放在我要粘贴的位置并按 ctrl+V。但是，有时我会错过**v**并点击**c**，它将剪贴板上的文本替换为当前行的文本，我必须从头开始......

有谁知道在没有选择时如何关闭*复制*，无论光标是否在空行上？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T07:12:11.377

设置中有选项：转到工具-选项->文本编辑器->所有语言->在没有选择时将剪切或复制命令应用于空白行

此外，如果您不小心将某些内容复制到剪贴板中，您可以使用以下快捷方式：Ctrl+Shift+V – 在剪贴板环中循环。

**已编辑**：似乎没有选项可以关闭它，因为默认情况下 Ctrl-C 分配给 Edit.Copy 命令，如果未选择任何内容，它将复制当前行。但是，您可以将以下宏分配给 Ctrl-C，它应该可以解决问题：

```
Sub CopyOnlyIfSelection()
    Dim s As String = DTE.ActiveDocument.Selection.Text
    Dim n As Integer = Len(s)
    If n > 0 Then
        DTE.ActiveDocument.Selection.Copy()
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-17T19:09:14.370

我知道这是个老问题，但由于新版本的 Visual Studio 不再原生支持宏，我想我已经分享了我的新扩展（因为我找不到任何现有的扩展）：[https://marketplace.visualstudio .com/items?itemName=KiwiProductions.CopyOnlySelection](https://marketplace.visualstudio.com/items?itemName=KiwiProductions.CopyOnlySelection)

# javascript - Javascript 替代品

> ID：10959131
> 
> 赞同：3
> 
> 时间：2012-06-09T07:09:28.833
> 
> 标签：javascript, regex, web

我最近遇到了`Javascript supplant`crockford 的功能。功能是这样的 -

```
if (!String.prototype.supplant) {
    String.prototype.supplant = function (o) {
        return this.replace(/{([^{}]*)}/g,
            function (a, b) {
                var r = o[b];
                return typeof r === 'string' || typeof r === 'number' ? r : a;
            }
        );
    };
} 
```

我需要了解这个函数的机制以及这个东西到底是如何工作的。我遇到过很多解释，但都倾向于通过引入使事情变得更糟的技术来使事情变得复杂。

试图寻找

1.`regex`这里的解释

2.function(a,b) 代码块的逻辑

3.那个return语句的使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:46:12.973

正如托马拉克所说，正则表达式中的空格并非微不足道

1.  正则表达式基本上匹配这样的内容：`{ ... }`. 这`[^{}]`意味着花括号中的内容可以是除了花括号之外的任何内容。这 `*`意味着内容的长度可以是零或任何数字。括号内的部分是带[括号的子字符串匹配](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions#Using_Parenthesized_Substring_Matches)

2.  该函数将字典传入 as `o`，并使用上面的正则表达式执行 a `replace`。只要有匹配，`replace`就会调用 的回调函数。`a`是整个匹配部分，`b`是与“Parenthesized Substring Matches”对应的子匹配部分。回调函数`b`在字典中查找作为键，并返回对应的值

3.  return 语句表示如果类型`r`是字符串或数字，则返回`r`；否则返回`a`

您可以查看 Jared Farrish 提供的[示例代码](http://jsfiddle.net/userdude/E53Tv/)，它非常清楚地显示了匹配和替换是如何工作的。

# linux - 在字符串上使用 awk

> ID：10959133
> 
> 赞同：11
> 
> 时间：2012-06-09T07:10:01.567
> 
> 标签：linux, bash, awk

我可以使用 awk 提取字符串上的第一列或任何列吗？实际上，我正在使用一个文件并将其读取到一个变量中，我想在该变量上使用 AWK 并完成我的工作。

这怎么可能？有什么建议么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-09T07:17:52.387

打印第一列*：

```
<some output producing command> | awk '{print $1}' 
```

打印第二列：

```
<some output producing command> | awk '{print $2}' 
```

等等

`<some output producing command>`像`cat filename.txt`or`echo $VAR`等​​在哪里。

例如`ls -l | awk '{print $9}'`提取第九列，这就像一个......尴尬的方式`ls -1`

*列由分隔空格定义。

* * *

编辑：如果您的文本已经在变量中，例如：

```
VAR2=$(echo $VAR | awk '{print $9}') 
```

如果您将 9 更改为所需的列，它将起作用。

# c++ - 为什么在 WIN CE 6.0 中运行简单的控制台应用程序但不运行基于对话框的应用程序？

> ID：10959134
> 
> 赞同：1
> 
> 时间：2012-06-09T07:10:02.593
> 
> 标签：c++, visual-c++, windows-mobile, embedded, windows-ce

我正在为嵌入式 Visual C++ 4 中的 Windows CE 6.0 开发应用程序。

我使用以下简单代码创建了一个带有平台“Pocket PC 2003”的简单控制台应用程序（WCE 应用程序）：

```
#include "stdafx.h"
#include <stdio.h>

int WINAPI WinMain( HINSTANCE hInstance,
                    HINSTANCE hPrevInstance,
                    LPTSTR    lpCmdLine,
                    int       nCmdShow)
{

    FILE * pFile; 
    char c; 
    pFile=fopen("alphabet.txt","wt");   
    for (c = 'A' ; c <= 'Z' ; c++) {
        putc (c , pFile);
    }   
    fclose (pFile); 
    return 0;
} 
```

这个简单的代码在我的 WinCE 6.0 设备上正常工作，并创建了“alphabet.txt”。

但是当我创建一个基于对话框的项目（WCE MFC AppWizard（exe））并在我的对话框窗口初始化之前将此代码放在我的项目的主类中时它不起作用并且没有创建“alphabet.txt”文件和我的应用程序没有任何消息就无法打开。

```
BOOL CFffffApp::InitInstance()
{
    // Standard initialization
    // If you are not using these features and wish to reduce the size
    //  of your final executable, you should remove from the following
    //  the specific initialization routines you do not need.

    FILE * pFile; 
    char c; 
    pFile=fopen("alphabet.txt","wt");   
    for (c = 'A' ; c <= 'Z' ; c++) {
        putc (c , pFile);
    }   
    fclose (pFile); 

    CFffffDlg dlg;
    m_pMainWnd = &dlg;
    int nResponse = dlg.DoModal();
    if (nResponse == IDOK)
    {
        // TODO: Place code here to handle when the dialog is
        //  dismissed with OK
    }
    else if (nResponse == IDCANCEL)
    {
        // TODO: Place code here to handle when the dialog is
        //  dismissed with Cancel
    }

    // Since the dialog has been closed, return FALSE so that we exit the
    //  application, rather than start the application's message pump.
    return FALSE;
} 
```

为什么它不起作用，我该如何解决这个问题？

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T00:04:15.397

目标设备上是否有 MFC 运行时？它们还必须是您的应用程序所针对的对象。请注意，eVC 4.0 使用了 mfcce400.dll，它根本没有随 Platform Builder 6.0 提供（实际上 IIRC MFC 甚至不在 CE 6.0 操作系统目录中，Studio '08 使用了更新的 MFC 版本的设备）。您必须将 mfcce400 二进制文件（它们位于 eVC SDK 中）与您的应用程序一起分发。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T20:57:42.553

我的 C++ 非常生锈，但您仍然需要初始化控件。

```
CFffffDlg dlg = new CFffffDlg(); // << Initialize the dlg
m_pMainWnd = &dlg;
int nResponse = dlg.DoModal();
if (nResponse == IDOK) 
```

正确的？这就是你所需要的吗？

# c++ - C++ 没有命名类型错误

> ID：10959136
> 
> 赞同：0
> 
> 时间：2012-06-09T07:10:13.687
> 
> 标签：c++, makefile

我似乎无法确定这个问题，所以我想我会在这里问。我知道为什么通常会出现此错误，但这次我似乎无法弄清楚。可能是一些我不知道或遗漏的简单事情。

```
g++  -c -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT src/Render.cpp -L/usr/lib/i386-linux-gnu -lSDL -lSDL_image
src/Render.cpp:8:1: error: ‘Render’ does not name a type
src/Render.cpp:13:1: error: ‘Render’ does not name a type
src/Render.cpp:18:14: error: ‘Render’ has not been declared
src/Render.cpp:31:6: error: ‘Render’ has not been declared
make: *** [Render.o] Error 1 
```

这是我的 core.cpp、Makefile 和 Render.h

**渲染.cpp**

```
#ifndef _Render_h
#define _Render_h
#include <iostream>
#include "SDL/SDL_image.h"

using namespace std;

Render::Render()
{

}

Render::~Render()
{

}

SDL_Surface* Render::loadImg(string filename)
{
    SDL_Surface* temp = NULL;
    SDL_Surface* optimized = NULL;

    if((temp = IMG_Load(filename.c_str())) != NULL)
    {
        optimized = SDL_DisplayFormat(temp);
        SDL_FreeSurface(temp);
    }
    return optimized;
}

void Render::applySurface(int x, int y, SDL_Surface* source,
        SDL_Surface* destination)
{
    SDL_Rect offset;
    offset.x = x;
    offset.y = y;
    SDL_BlitSurface(source, NULL, destination, &offset);    
}

#endif 
```

**核心.cpp**

```
#include <iostream>
#include "SDL/SDL.h"
#include "Render.h"

using namespace std;

int main(int argc, char* args[])
{
    string imgGoku = "src/imgs/Goku.bmp";
    string imgVegeta = "src/imgs/Vegeta.png";
    const int SCREEN_WIDTH = 640;
    const int SCREEN_HEIGHT = 480;
    const int SCREEN_BPP = 32;
    SDL_Surface *message = NULL;
    SDL_Surface *background = NULL;
    SDL_Surface *screen = NULL;
    Render rnd;

    if(SDL_Init(SDL_INIT_EVERYTHING) == -1)
    {
        return 1;
    }

    screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGHT,
            SCREEN_BPP, SDL_SWSURFACE);
    if(screen == NULL)
    {
        return 1;
    }

    SDL_WM_SetCaption("Hello World", NULL);
    rnd.applySurface(10,10,rnd.loadImg(imgGoku),screen);
    if(SDL_Flip(screen) == -1)
    {
        return 1;
    }

    SDL_Delay(2000);
    SDL_FreeSurface(message);
    SDL_FreeSurface(background);
    SDL_Quit();
    return 0;
} 
```

**渲染.h**

```
#include "SDL/SDL.h"

using namespace std;

class Render{
    public:
        Render();
        ~Render();
        SDL_Surface* loadImg(string filename);
        void applySurface(int x, int y, 
                SDL_Surface* source, 
                SDL_Surface* destination);
}; 
```

**生成文件**

```
#Game Make file
TARGET = game.exe
OBJS = core.o \
       Render.o \

SDL_CFLAGS := $(shell sdl-config --cflags)
SDL_LDFLAGS := $(shell sdl-config --libs) -lSDL_image
CFLAGS = -Wall
LIBS =
LDFLAGS = 

$(TARGET): $(OBJS)
       g++ $(CFLAGS) $(SDL_CFLAGS) -o $@  $(LDFLAGS) $(OBJS) $(SDL_LDFLAGS) $(LIBS)
%.o: src/%.cpp src/Render.h
       g++  -c $(SDL_CFLAGS) $< $(SDL_LDFLAGS)

.PHONY: clean
clean:
    rm -f $(TARGET) $(OBJS) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:16:54.463

您需要在 Render.cpp 的顶部包含 Render.h

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T10:11:04.160

> 是的。我认为这就是#ifndef 和#define 所做的，但我想我理解它们或错误地使用它们。

您误解了它们*，并且*错误地使用了它们。

虽然向`#include "Render.h"`您的 Render.cpp 文件添加指令将解决您的直接编译问题，但它并不能解决误解和误用的双重问题。您应该对代码进行另外两个修复。我将总结您应该进行的更正，然后说明您为什么应该这样做。

问题 #1：您需要将`#ifndef _Render_h`/`#define _Render_h`对和关闭`#endif`从源文件移动到标题。

问题 #2：从预处理器符号中删除前导下划线`_Render_h`。

**#include guards**
查看几乎所有系统头文件，您会发现它们遵循非常标准的布局。该文件以描述该文件的标题注释开头。紧随其后的是一对形式的行`#ifndef _SOME_NAME_H_`和`#define _SOME_NAME_H_`。文件的主体紧随其后，文件中的最后一件事是结束`#endif`。那`#ifndef`/`#define`对被称为`#include`守卫。关闭`#endif`总是（嗯，几乎总是；其中一些系统标题违反标准布局）在最后。

这样做是为了防止同一个标头被多次包含。假设您有头文件 foo.h、bar.h 和 baz.h。假设 foo.h 和 bar.h 都使用了 baz.h 中定义的功能。这些标题中的每一个都应该有一个`#include "baz.h"`指令，最好靠近顶部。现在假设你的 main.cpp`#include`是 foo.h 和 bar.h。如果文件 baz.h 没有`#include`保护，它将在 main.cpp 中包含两次。您的 main.cpp 很可能无法编译。

这个多重包含问题的解决方案是`#include`在文件 baz.h 中放置一个守卫。现在`#include "foo.h"`main.cpp 中的将 baz.h 的主体粘贴到您的代码中，但`#include "bar.h"`不会因为`#include`baz.h 中的守卫将使预处理器跳过 baz.h 的主体。

`#include`在每个头文件中放置一个保护是个好主意。

**#pragma once**守卫
的概念有几个问题。`#include`

*   该名称必须指定两次，一次在`#ifndef`指令中，另一次在`#define`指令中。对于墨菲定律来说，这是一个巨大的机会，可以让其丑陋的头脑抬头。程序员可以而且确实打错了这些名称中的一个或另一个。
*   最后`#endif`是另一个潜在的问题来源。一些维护程序员（维护程序员是开发程序员存在的祸根）将会看到，在关闭*之后*`#endif`添加代码将快速而肮脏地解决他的棘手问题。维护程序员总是尽可能选择最快、最脏的解决方案。就这样搞定了。
*   名称必须是唯一的。假设您只是从事大型项目的众多人中的一员，并且假设您和其他人都有一个名为 Render.h 的文件。这两个文件在两个不同的目录中，所以这两个文件同名是没有问题的。`#include`如果两个文件都有使用预处理器符号的保护，则会出现一个大问题`Render_h`。

这些问题有一个很好的解决方案，`#pragma once`指令。这个编译指示，如果它有效的话，完全符合`#include`守卫的意图，但更好。只有一行而不是三行，并且没有预处理器名称。问题是“如果它有效”。这是一个编译指示，所以并不是所有的编译器都支持它，而且一些支持它的编译器也没有做对。

由于. `#include`_ `#pragma once`其他人使用`#pragma once`是因为可移植性问题不适用于他们的项目。还有一些人同时使用这两种机制。

**前导下划线**
如果您查看系统头文件，您会发现它充满了带有前导下划线的名称。这可能会给人一种印象，即使用前导下划线是正确的做法。毕竟，谁比编译器厂商更懂语言呢？

编译器供应商使用前导下划线的原因是为了避免与您的代码冲突。一个好的编译器供应商使用前导下划线正是因为如果您不在任何名称中使用前导下划线，这样做可以防止他们的名称与您的名字冲突。永远不要在类名、全局变量、自由函数或预处理器符号中使用前导下划线。前导下划线保留供编译器使用。

# sql - 自动更改分区函数和分区模式

> ID：10959138
> 
> 赞同：0
> 
> 时间：2012-06-09T07:11:17.133
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我的表格结构如下：

```
SalesCompanyFinancialPeriod (ID int, ...)
Document (ID int, SalesCompanyFinancialPeriodID Int, ...)
DocumentDetail (ID Int, DocumentID Int, ...) 
```

我想创建一个分区函数和分区模式，用于使用列值对`Document`表和表进行分区。我还想使用表上的后触发器自动更改此分区架构和分区函数。`DocumentDetail``SalesCompanyFinancialPeriodID``SalesCompanyFinancialPeriod`

换句话说，我想在创建新记录时自动在我的数据库中创建一个文件组，并在这个新创建的文件组中将表和表`salescompanyfinancialperiod`的记录分区。`Document``DocumentDetail``salescompanyfinancialperiodid`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:27:14.973

请参阅[http://sqlfascination.com/2010/09/12/interval-partitioning-in-sql-server-2008/](http://sqlfascination.com/2010/09/12/interval-partitioning-in-sql-server-2008/)，它几乎完全做到了这一点（基于 1 个表，但它是相同的想法。）

他指出，根据 MS 的说法，DML 触发器不能直接执行此操作。引用 Books OnLine：“......当 DML 触发器用于作为触发操作的目标的表或视图时，不允许在 DML 触发器的主体内使用以下 Transact-SQL 语句......, ALTER PARTITION FUNCTION, . ..”

他说这是不真实的，但我会小心的。相反，您可以创建一个存储过程来更改基于触发器运行的分区。这更安全一些，因为该语句需要以数据库所有者身份运行并具有数据空间权限，这在触发器中直接使用可能会很吓人。

旁注 - 在 SQL 2008 中，没有列表分区，只有范围分区，所以即使手动这样做也会很烦人。您可以根据以下内容欺骗它： [http ://www.sqlservercentral.com/articles/partition/64740/](http://www.sqlservercentral.com/articles/partition/64740/)

# jquery - 旋转 droppable 时拖放

> ID：10959140
> 
> 赞同：1
> 
> 时间：2012-06-09T07:11:41.033
> 
> 标签：jquery, jquery-ui, rotation

我正在使用 jQuery UI 拖放。我的 droppables 被旋转了，我遇到了问题，因为错误的 droppable 得到了 drop 事件。当 droppable 旋转时，任何良好行为的解决方案？

# opencv - 将具有图像数据的 numpy 数组转换为 CvMat

> ID：10959141
> 
> 赞同：1
> 
> 时间：2012-06-09T07:11:57.270
> 
> 标签：opencv, numpy

我在一个 numpy 数组中有一个图像，我使用 savefig 保存它，然后使用 opencv loadImage 函数将图像加载到 CvMat。但我想删除这个保存图像的步骤。

我的 Numpy 图像大小是 25x21，如果我使用 fromArray 函数

im = cv.fromarray(asarray(img))

我得到一个尺寸为 25x21 的 CvMat，它非常小。但是当我将图像保存为 png 格式并使用 LoadImage 将其加载回来时，我得到了大小为 429x509 的全尺寸图像。

有人可以告诉我如何将这个全尺寸图像从 numpy 数组获取到 CvMat 吗？我可以在代码中将图像从 numpy 数组转换为 png 格式而不使用 savefig() 保存吗？这就是我现在正在做的事情。

```
imgFigure = imshow(zeros((gridM,gridN)),cmap=cm.gray,vmin=VMIN,vmax=5,animated=True,interpolation='nearest',extent=[xmin,xmax,ymin,ymax])  
imgFigure.set_data(reshape(img,(gridM,gridN)))  
draw()  
fileName = '1p_'
fileName += str(counter)
fileName += ".png" 
savefig(fileName,bbox_inches='tight',pad_inches=0.01,facecolor='black') 
```

上面 img 的大小为 525，gridM 和 gridN 分别为 25 和 21。然后我使用以下方法加载此图像：

```
img = cv.LoadImage(fileName, cv.CV_LOAD_IMAGE_GRAYSCALE) 
```

现在 img 大小为 429x509。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:57:00.543

您可以`cv.fromarray()`直接在您的 numpy 数组上使用，而无需在两者之间保存：

```
import cv
import numpy as np
a = np.arange(0,255,0.0255).reshape(50,200)
b = cv.fromarray(a)
cv.SaveImage('saved.png', b)
print b
#Output:
<cvmat(type=42424006 64FC1 rows=50 cols=200 step=1600 )> 
```

numpy 数组变成了一个 cvmat，大小不变。这是保存的图像：

![在此处输入图像描述](../Images/ce0d81c5f0c676b6ec3b3ad4a0b23623.png)

# android - 在 Mac OS 上设置 Android 平台

> ID：10959143
> 
> 赞同：0
> 
> 时间：2012-06-09T07:12:09.110
> 
> 标签：android, facebook-android-sdk

我在mac上安装android工作环境。我已经安装了 Eclipse。我按照手册中的说明安装了 android 插件。我去了“帮助”和“检查新软件”，但是当我输入网站网址时，它显示以下错误：

找不到某些网站。有关更多详细信息，请参阅错误日志。[在https://dl-ssl.google.com/android/eclipse](https://dl-ssl.google.com/android/eclipse)找不到存储库.. HTTP 方法不允许：http: [//developer.android.com/sdk/eclipse-adt.html/content.xml](http://developer.android.com/sdk/eclipse-adt.html/content.xml) HttpClient 连接错误响应代码 405。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:47:35.860

目前支持以下操作系统： Windows XP 或 Vista Mac OS X 10.4.8 或更高版本（仅限 x86） Linux（在 Linux Ubuntu Dapper Drake 上测试） 您还需要安装合适的开发环境，例如：Eclipse Eclipse 3.2、 3.3 (Europa) Android 开发工具插件（可选） 其他开发环境或 IDE JDK 5 或 JDK 6（仅 JRE 是不够的） 不兼容 Gnu Compiler for Java (gcj) Apache Ant 1.6.5 或更高版本，适用于 Linux 和 Mac，适用于 Windows 的 1.7 或更高版本 安装 Android SDK

首先，您需要下载 Android SDK 包 .zip 存档，下载后在您的机器上找到合适的安装位置并解压缩压缩文件。请注意：从现在开始，通过本教程，此安装位置将被称为 $SDK_ROOT 或者，您可以将 /tools 添加到根路径，这将避免需要指定工具目录的完整路径，同时使您能够运行 Android调试桥 (adb) 以及其他命令行工具。添加 /tools： Linux 编辑 ~/.bash_profile 或 ~/.bashrc 文件，寻找设置 PATH 变量的行。将完整路径位置添加到 PATH 变量的 $SDK_ROOT/tools 位置。如果不存在 PATH 行，您可以通过键入以下内容添加该行： export PATH=${PATH}: Mac OS X 在主目录中找到 .

# ios - 重音字符在 NSString 数组中错误编码

> ID：10959146
> 
> 赞同：0
> 
> 时间：2012-06-09T07:12:31.003
> 
> 标签：ios, encoding, nsstring, nsmutablearray

？我正在从一个列表中构建一个 NSMutableArray 的 NSStrings，其中一些字母带有重音（土耳其语）。我已经能够将结果编码为 NSString 和 NSLog。但是当我将该 NSString 添加到我的 NSMutableArray 时，编码不正确。

这有效：

```
NSString* temp = [[NSString alloc] init];
char *str = "üç"; 
temp = [NSString stringWithUTF8String:"üç"];
NSLog(@"str: %@",temp); 
```

记录输出：

```
2012-06-09 09:09:18.398 Fluent[1821:f803] str: üç 
```

当我尝试像这样将它添加到我的 NSMutableArray 时：

```
ones = [NSArray arrayWithObjects:@"",@"bir",@"iki",temp,@"dört",@"beş",@"altı",@"yedi",@"sekiz",@"dokuz",nil];
NSLog(@"ones: %@",ones); 
```

它丢失了编码：

```
2012-06-09 09:09:18.399 Fluent[1821:f803] ones: (
"",
bir,
iki,
"\U00fc\U00e7",
"d\U00f6rt",
"be\U015f",
"alt\U0131",
yedi,
sekiz,
dokuz) 
```

关于如何做到这一点的任何想法？我在这方面阅读的帖子似乎都集中在通过 HTTP 传输。

我想要一种更简单的方法，例如在必要时对 C 字符串进行编码，然后按空格将字符串解串到数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:23:48.483

这不会丢失编码，尝试将 nsarray 中的字符串添加到 UILabel 或 UITextField 并且它应该是正确的这种编写 Unicode 表示的行为仅在您 NSLog 时发生在控制台中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:29:17.610

您的字符串未正确编码。您看到的是一个将完整数组写入日志的工件。在这种情况下，首先将数组转换为属性列表格式，然后写入日志。

如果您创建一个循环并将每个元素分别写入日志，您会看到一切正常：

```
NSUInteger count = [ones count];
for (NSUInteger i = 0; i < count; i++) {
    NSLog(@"element %d: %@", i, [ones objectAtIndex: i]);
} 
```

# css - 如何在css3中缩放容器的宽度

> ID：10959148
> 
> 赞同：0
> 
> 时间：2012-06-09T07:12:38.007
> 
> 标签：css

如何使用 css3 转换缩放元素以占据浏览器的全宽和高度？我可以使用缩放功能。但是如何计算我应该用于缩放的因子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:20:36.287

这是 webkit (Chrome, Safari) 的示例

[http://jsfiddle.net/dM8zL/](http://jsfiddle.net/dM8zL/)

```
#expandme {
  width: 10%;
  height: 10%;
  margin: 0 auto;        
  background: red;
  position: fixed;
}
#expandme:hover {
  width: 100%;
  height: 100%; 
  position: fixed;  
 -webkit-transition: all .2s ease-in-out;     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:24:15.707

缩放不需要 css3，您可以使用简单的 % 作为宽度和高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T07:21:05.023

这和你想要的一样吗？ [http://jsfiddle.net/RcXfN/4/](http://jsfiddle.net/RcXfN/4/)

# c - 双数组Trie的一种实现

> ID：10959153
> 
> 赞同：1
> 
> 时间：2012-06-09T07:13:05.227
> 
> 标签：c, trie

我试图理解和使用这个[Double-Array Trie implementation](http://linux.thai.net/~thep/datrie/datrie.html)。但是，我似乎可以理解他们提出的理论实现与代码之间的类比。
准确地说，以下是使用的主要 Trie 结构：

```
struct _Trie {
AlphaMap   *alpha_map;
DArray     *da;
Tail       *tail;

Bool        is_dirty;
}; 
```

如果有人使用过这个实现，您能否提供一个高级解释，说明以下结构的使用以及与基本数组和检查数组的双数组概念的关系。特别是 AlphaMap。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:54:54.233

`libdatrie`将 unicode 字符转换为紧凑的内部表示；您必须在创建 trie 时定义允许范围的列表。`alpha_map`是一个字符范围的链表。

`da`是一个双数组结构。它包含`base`和`check`数组。

`tail`是一种用于存储非分支后缀的数据结构（参见“后缀压缩”）。

`is_dirty`是一个标志，如果 trie 尚未存储到磁盘或从磁盘加载后已更改，则设置为 TRUE。

# javascript - Uglify-js 不会破坏变量名

> ID：10959154
> 
> 赞同：18
> 
> 时间：2012-06-09T07:13:05.650
> 
> 标签：javascript, performance, compression, minify, uglifyjs

试图为我的 js 库准备好的构建环境。根据网络上的评论，[UglifyJS](https://github.com/mishoo/UglifyJS)似乎是最好的压缩模块之一，在 NodeJS 下工作。所以这是缩小代码的最佳推荐方法：

```
var jsp = require("uglify-js").parser;
var pro = require("uglify-js").uglify;

var orig_code = "... JS code here";
var ast = jsp.parse(orig_code); // parse code and get the initial AST
ast = pro.ast_mangle(ast); // get a new AST with mangled names
ast = pro.ast_squeeze(ast); // get an AST with compression optimizations
var final_code = pro.gen_code(ast); // compressed code here 
```

如这里所见，`pro.ast_mangle(ast)`应该修改变量名，但事实并非如此。我从这个管道中得到的只是 javascript 代码，没有空格。起初我认为我的代码没有针对压缩进行优化，但后来我用[Google Closure](http://closure-compiler.appspot.com/home)进行了尝试，得到了相当大的压缩（变量名称和所有内容都被破坏了）。

UglifyJS 专家，有什么提示我做错了什么吗？

**更新**：

实际代码太大，无法在此处引用，但即使是这样的片段也不会被破坏：

```
;(function(window, document, undefined) {

    function o(id) {
        if (typeof id !== 'string') {
            return id;  
        }
        return document.getElementById(id);
    }   

    // ...

    /** @namespace */
    window.mOxie = o;

}(window, document)); 
```

这就是我得到的（我猜只有空格被剥离）：

```
(function(window,document,undefined){function o(id){return typeof id!="string"?id:document.getElementById(id)}window.mOxie=window.o=o})(window,document) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T11:50:00.367

好的，似乎最新版本的 Uglify JS 需要将 mangle 选项显式传递为 true，否则它不会损坏任何东西。像这样：

```
var jsp = require("uglify-js").parser;
var pro = require("uglify-js").uglify;

var orig_code = "... JS code here";
var options = {
    mangle: true
};

var ast = jsp.parse(orig_code); // parse code and get the initial AST
ast = pro.ast_mangle(ast, options); // get a new AST with mangled names
ast = pro.ast_squeeze(ast); // get an AST with compression optimizations
var final_code = pro.gen_code(ast); // compressed code here 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-09T11:42:08.540

默认情况下 uglify 不会破坏顶级名称，也许这就是您所看到的？

尝试：-mt 或 --mangle-toplevel — 也可以在顶级范围内修改名称（默认情况下我们不这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-26T17:15:17.817

如果您使用的是 Uglify2，则可以使用`TopLevel.figure_out_scope()`. [http://lisperator.net/uglifyjs/scope](http://lisperator.net/uglifyjs/scope)

如果您使用的是 Uglify1，它会稍微复杂一些。这是我通过修改[Uglify`squeeze_more.js`文件](https://github.com/mishoo/UglifyJS/blob/master/lib/squeeze-more.js)中的代码而整理的一些代码：

```
function eachGlobalFunctionCall(ast, callback) {
  var w = uglify.uglify.ast_walker(),
      walk = w.walk,
      MAP = uglify.uglify.MAP,
      scope;

  function with_scope(s, cont) {
    var save = scope, ret;
    scope = s;
    ret = cont();
    scope = save;
    return ret;
  }

  function _lambda(name, args, body) {
    return [ this[0], name, args, with_scope(body.scope, curry(MAP, body, walk)) ];
  }

  w.with_walkers({
    "function": _lambda,
    "defun": _lambda,
    "toplevel": function(body) {
      return [ this[0], with_scope(this.scope, curry(MAP, body, walk)) ];
    },
    "call": function(expr, args) {
      var fnName = expr[1];

      if (!scope.has(fnName)) {    // <--- here's the important part
        callback(fnName, args, scope);
      }
    }
  }, function() {
    return walk(uglify.uglify.ast_add_scope(ast));
  });
} 
```

上面的这个仅适用于全局函数调用，但它为您提供了一个回调，该回调在 walker 找到对未知（全局）方法的调用时执行。

例如，给定以下输入：

```
function foo () {
  bar(1);
  (function () {
    function bar() { }
    bar(2);
    (function () {
      bar(3);
    }());
  }());
} 
```

它会找到电话`bar(1)`，但*不会* `bar(2)`找到or `bar(3)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T11:45:21.530

全局范围内的变量可用于任何其他脚本，因此 Uglify 不会在没有特殊开关的情况下更改它们，以防您真的需要它们可见。您可以使用`-mt`/ `toplevel`switch/setting ，或者更好的是，停止污染全局范围并清楚地表明您不打算让这些变量在外部看到，而是将您的代码框架化为匿名的自调用函数，该函数将用作私有范围。

# ruby-on-rails-3 - 集成 ActiveAdmin 和 adauth

> ID：10959157
> 
> 赞同：3
> 
> 时间：2012-06-09T07:13:34.280
> 
> 标签：ruby-on-rails-3, active-directory, activeadmin

我有一个正在运行的 Rails 应用程序，使用 ActiveAdmin 及其模型对用户进行身份验证。现在我对迁移到 ActiveDirectory 身份验证感兴趣，因此我的用户可以验证域的用户。我一直在尝试adauth，它看起来像一个很棒的gem，但是在尝试将这个gem 与我的ActiveAdmin 身份验证“混合”时我有点迷失了。我很确定我不是第一个这样做的人，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:13:17.127

我终于能够设法将 AD 集成到 ActiveAdmin 中。

如果有人感兴趣，这就是我所做的：

*   在你的 gem 中包含 gem 'adauth'
*   执行捆绑安装
*   执行 rails g adauth:config

*   为您的 AD 连接配置 config/initializers/adauth.rb。例如，如果您的域是 example.com，则必须包括：

    ```
    c.domain = "example.com" 
    c.server = "IP address of your domain controller"
    c.base = "dc=example, dc=com" 
    ```

*   执行 rails g adauth:sessions

*   修改您的 application_controller.rb。我的是：

    ```
    class ApplicationController< ActionController::Base
        protect_from_forgery
        helper_method :current_user
        def current_user
            @current_user ||= User.find(session[:user_id]) if session[:user_id]
        end
        def authenticate_user!
           if current_user.nil?
               redirect_to '/sessions/new', :error => "Invalid Login" 
           end
        end
    end 
    ```

*   执行 rails g adauth:user_model user install_adauth。这会创建迁移 install_adauth，但由于某种原因它是空的。我不得不自己填写：

    ```
    class InstallAdauth < ActiveRecord::Migration
        def up
            create_table :users do |u|
                u.string 'login'
                u.text 'group_strings'
                u.string 'name'
                u.string 'ou_strings'
            end
        end
        def down
            drop_table :users
        end
    end 
    ```

*   执行 rake db:migrate

*   修改您的 session_controller.rb。我的是：

    ```
    class SessionsController < ApplicationController
        def new
            redirect_to '/admin' if current_user 
        end
        def create
            ldap_user = Adauth.authenticate(params[:username], params[:password])
            if ldap_user
                user = User.return_and_create_with_adauth(ldap_user)
                session[:user_id] = user.id
                redirect_to '/admin' 
            else
                redirect_to '/sessions/new', :error => "Invalid Login" 
            end
        end

        def destroy
            session[:user_id] = nil
            redirect_to '/sessions/new' 
        end
    end 
    ```

*   到目前为止，通过 ActiveAdmin 的验证仍然有效。要切换到 ActiveDirectory，我们必须更改文件 initializers/active_admin.rb

    ```
    # config.authentication_method = :authenticate_admin_user!
    config.authentication_method = :authenticate_user!

    #config.current_user_method = :current_admin_user
    config.current_user_method = :current_user 
    ```

*   就我而言，我也需要重新启动 Apache。

如果任何时候我们想切换回 ActiveAdmin，我们只需要撤消最后一次更改

# php - php is / switch 语句检查 '0' 字符串或 '00' 字符串

> ID：10959160
> 
> 赞同：4
> 
> 时间：2012-06-09T07:14:32.983
> 
> 标签：php

我有一个白痴问题，但我被卡住了。

这是我的简单代码

```
$my_string = '00';

switch ((string)$my_string)
{
    case '-1': $return_string = 'bla bla..'; break;
    case '0': $return_string = 'One zero'; break;
    case '00': $return_string = 'Double zero'; break;
    default: $return_string = 'default'; break;
}

echo $return_string; 
```

返回之前代码的结果

```
One Zero 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:19:02.887

`switch`使用[相等](http://php.net/manual/en/types.comparisons.php#types.comparisions-loose)，而不是身份。由于`'0'`等于`'00'`（因为它们都评估为`0`），因此该结构将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T07:28:30.940

嗯，这基本上是因为 php 不是一种强类型语言。所以 "00" == "0" 给出了 true （正如所说的 switch 使用相等运算符）

您可以将其更改为带有三等号的 if else 语句，这样就可以了。

“00” === “0” 给出错误。检查此线程以获取更多详细信息。[PHP 相等（== 双等）和身份（=== 三等）比较运算符有何不同？](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T07:46:22.080

如上所述： switch 不检查相同的类型和值（和之间的差异`==`）`===`。要让开关在您的情况下工作，您可以这样做：

```
$my_string = '00';
switch (true)
{
    case ((string) $my_string === '-1'): $return_string = 'bla bla..'; break;
    case ((string) $my_string === '0'): $return_string = 'One zero'; break;
    case ((string) $my_string === '00'): $return_string = 'Double zero'; break;
    default: $return_string = 'default'; break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T08:52:10.937

另一种解决方案是：

```
switch ('_'.$my_string)
{
    case '_-1': $return_string = 'bla bla..'  ; break;
    case '_0' : $return_string = 'One zero'   ; break;
    case '_00': $return_string = 'Double zero'; break;
    default   : $return_string = 'default'    ; break;
} 
```

# mono - Mono xbuild - 我可以阻止它每次都进行重建吗？

> ID：10959164
> 
> 赞同：2
> 
> 时间：2012-06-09T07:15:36.957
> 
> 标签：mono, xbuild, raspberry-pi

我正在使用 mono 和 xbuild 在 Raspberry Pi 上编译和调试 OpenTK。但是，每次我通过运行*xbuild OpenTK.sln /p:Configuration=Debug*更改一行代码时，它都会启动重新构建，这需要大约一个小时来编译。

我在命令行帮助中的任何地方都找不到开关，但想知道是否有人知道如何让 xbuild 只编译修改后的文件？或者我可以在项目文件的设置中更改什么？

# javascript - javascript中任何格式的日期正则表达式？

> ID：10959174
> 
> 赞同：0
> 
> 时间：2012-06-09T07:17:12.967
> 
> 标签：javascript

javascript中任何格式的日期的正则表达式

格式包括：dd/mm/yyyy or mm/dd/yyyy or yyyy/dd/mm or dd-yy-mmmm or ddmmyyyy 等等.....

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:31:44.907

Reg Ex 用于考虑闰年的日期。为 as3 编写的，但由于 js 和 as3 都是 ECMAScript 的衍生产品，因此它在 JS 中也应该可以正常工作。

**使用所需的日期分隔符更改 reg ex 中的 #。对于全局分隔符，将 # 替换为 (/|-|.)**

对于 DD-MM-YYYY 格式

```
^(?:31#(?:(?:0[13578])|(?:1[02]))#)|(?:(?:29|30)#(?:(?:0[1,3-9])|(?:1[0-2]))#)(?:(?:1[6-9]|[2-9]\d)\d{2})$|^(?:29#02#(?:(?:(?:1[6-9]|[2-9]\d)(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0[1-9])|(?:1\d)|(?:2[0-8]))#(?:(?:0[1-9])|(?:1[0-2]))#(?:(?:1[6-9]|[2-9]\d)\d{2})$ 
```

对于 MM-DD-YYYY 格式

```
^(?:(?:(?:0?[13578]|1[02])#31)\1|(?:(?:0?[1,3-9]|1[0-2])#(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2#29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))#(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$ 
```

性能测试。

```
29-02-2000 ---> true
millis 2
29-02-2006 ---> false
millis 0
29-02-2001 ---> false
millis 0
30-02-2000 ---> false
millis 0
31-11-2000 ---> false
millis 0
29-13-2000 ---> false
millis 0
31-11-2000 ---> false
millis 0
31-07-2000 ---> true
millis 0
31-08-2000 ---> true
millis 1
31-12-2000 ---> true
millis 0
30-11-2011 ---> true
millis 0
17-07-2011 ---> true
millis 0
04-10-1987 ---> true
millis 0
01-01-1900 ---> true
millis 0
24-05-88 ---> false
millis 0
24-05-88 ---> false
millis 0
29-12-2011 ---> true
millis 0
31-12-2000 ---> true
millis 0
1-1-2010 ---> false
millis 0
1-1-99 ---> false
millis 0
1-01-99 ---> false
millis 0
01-1-99 ---> false
millis 0 
```

对于各种格式，修改日期分隔符 reg ex 和 ordering。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:20:43.307

没有“完美”的解析，但我建议使用[datejs 之](http://code.google.com/p/datejs/)类的东西来处理 javascript 中的日期。它可以处理许多具有多种格式支持的解析例程。

# javascript - 如果未加载纯 Javascript 和后备，则检测并附加 jQuery

> ID：10959182
> 
> 赞同：3
> 
> 时间：2012-06-09T07:18:44.833
> 
> 标签：javascript, jquery

有谁知道一种方法来检测 jQuery 库是否已加载，如果没有附加它并在加载到 DOM 后启动脚本作为后备解决方案？

这是我的脚本：

```
if (typeof jQuery == 'undefined') {
    // if jQuery Library is not loaded
    var script = document.createElement( 'script' );
    script.type = 'text/javascript';
    script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js';
    document.body.appendChild(script);
    startScript();
} else {
    // cool, jQuery Library is loaded
    startScript();
}

function startScript() {
    $.noConflict();
    jQuery(document).ready(function($){
    .... // my jquery code
    });
} 
```

当然，上面正确地附加了 jQuery，但没有做任何事情，因为脚本在附加后立即启动。对此有任何提示吗？

我很感激任何答案。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:21:51.810

你很好，除了，正如你所说，你不能`startScript`在附加新`script`元素后立即调用。相反，做一个`setTimeout`循环：

```
// ...
document.body.appendChild(script);
maybeStart(); 
```

看起来像这样的地方`maybeStart`（不在 , 函数的主体内`if`，函数声明在那里无效）：

```
function maybeStart() {
    if (typeof jQuery === "undefined") {
        setTimeout(maybeStart, 100);
    }
    else {
        startScript();
    }
} 
```

这将检查是否加载了 jQuery，如果没有，则等待 10 分之一秒并再次检查。找到 jQuery 后，它会调用您的`startScript`.

您可能希望在其中设置时间限制（以防 jQuery 永远不会加载，因此您不会永远循环）。

或者，您*可以*在元素上挂钩“加载”样式的事件`script`，但它的机制因浏览器而异。在某些浏览器上，它就像`load`一个`img`元素一样；在 IE（至少是旧版本）上，您必须使用`readystatechange`，并且在某些版本的 IE 上两者都可以使用。所以你必须保留一个标志，这样你就知道你是否已经启动了你的脚本等，而且......好吧，如果你知道脚本创建了一个众所周知的全局符号（如jQuery就是这种情况）。

# android - 以编程方式从小部件中删除元素

> ID：10959185
> 
> 赞同：0
> 
> 时间：2012-06-09T07:19:02.480
> 
> 标签：android, widget

我在小部件布局中有一个图像视图和一个文本视图。现在我需要以编程方式从远程视图中删除图像视图。

我看到有 api **remoteView.removeAll(Viewid);**

所以当我这样做的时候

```
remoteViews.removeAll(R.id.imageView); 
```

并通过更新remoteView

```
appwidgetmanager.updateAppVidget 
```

屏幕上看不到任何具体的东西。图像视图仍然存在。

我在正确的轨道上吗？请就此提出您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:25:06.270

该函数`removeAll`等价于`ViewGroup.removeAllViews`。要让它通过*RemoteViews*对象在小部件中工作，您需要将其`ImageView`包装在`FrameLayout`. 然后，您可以调用`removeAll`并传递that的*id*`FrameLayout`。

请注意，使用*RemoteViews将可见性设置为**INVISIBLE*甚至*GONE*要容易得多，并且不需要额外的。*`Views`*

# opengl - 如何将 [0, 1] 之外的值写入 gl_FragData

> ID：10959189
> 
> 赞同：1
> 
> 时间：2012-06-09T07:19:24.740
> 
> 标签：opengl, glsl

我正在尝试通过 gl_FragData 写出视图空间位置。

不幸的是，这个值似乎被钳制了 [0-1] （或者至少是当我读回它时）

有办法不夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:32:52.593

只需使用浮点纹理：GL_RGBA16F、GL_RGBA32F 等……它们没有被钳位

[http://www.opengl.org/wiki/Floating_point_and_mipmapping_and_filtering](http://www.opengl.org/wiki/Floating_point_and_mipmapping_and_filtering)

我使用（用于创建空浮点纹理）：

```
glGenTextures(1, &texId);
glBindTexture(GL_TEXTURE_2D, texId);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);        
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);    
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);   
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB16F, width, height, 0, GL_RGB, GL_FLOAT, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:04:11.793

您可以使用[GL_ARB_color_buffer_float](http://www.opengl.org/registry/specs/ARB/color_buffer_float.txt)扩展来设置浮点颜色缓冲区：片段使用浮点格式存储，并且可以通过启用/禁用`CLAMP_FRAGMENT_COLOR_ARB`开关（使用`ClampColorARB`）来钳制/取消钳制结果。

请注意，这不是基于纹理的技术，但它定义了一个真实的颜色缓冲区。遗憾的是，此颜色缓冲区无法显示在普通窗口上（离屏渲染）。

* * *

尊重[GL_ARB_texture_float](http://www.opengl.org/registry/specs/ARB/texture_float.txt)扩展，GL_ARB_color_buffer_float 允许控制固定渲染管线的钳位行为（分离顶点阶段和片段阶段）。

但是，定义颜色缓冲区不允许您拥有多个颜色缓冲区。相反，使用浮点纹理允许您设置更复杂的帧缓冲区对象。

但是，请注意来自 texture_float 扩展的以下讨论：

> 浮点值是否适用于固定功能 GL？
> 
> ```
>  RESOLVED:  This extension introduces texel values that can be
>    outside [0, 1].  No clamping occurs to these values during
>    texture filtering.  For the fixed-function pipeline, the
>    filtered texel is now clamped before it is used for texture
>    environment blending.  The ARB_color_buffer_float extension
>    can be used to control this clamping.  For the programmable
>    pipelines, no clamping occurs. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-30T18:13:10.140

您需要禁用颜色钳制：

```
glClampColorARB(GL_CLAMP_VERTEX_COLOR_ARB, GL_FALSE);
glClampColorARB(GL_CLAMP_FRAGMENT_COLOR_ARB, GL_FALSE); 
```

# php - 外部目录列表和下载

> ID：10959191
> 
> 赞同：1
> 
> 时间：2012-06-09T07:19:58.067
> 
> 标签：php, directory, download

我正在尝试制作一个脚本，让我在我的网络根目录之外下载文件并列出文件...它列出了目录的文件，但它不允许我下载它们，因为当它们被点击时它就可以了到 website.com/clickedlink.jpg 但它需要一些如何改变它去我想要的位置......

我想我解释这有点奇怪，所以请告诉我是否需要澄清。

我需要从 /home/files/I/need 下载文件，但网站存储在 /var/website/

因此，如果有人可以帮忙，我将百分百感谢！

```
<html><head><title>Root page</title></head><body>

<? 
// open this directory 
$myDirectory = opendir("/home/files/I/need");

// get each entry
while($entryName = readdir($myDirectory)) {
    $dirArray[] = $entryName;
}

// close directory
closedir($myDirectory);

//  count elements in array
$indexCount = count($dirArray);
Print ("$indexCount files<br>\n");

// sort 'em
sort($dirArray);

// print 'em
print("<TABLE border=1 cellpadding=5 cellspacing=0 class=whitelinks>\n");
print("<TR><TH>Filename</TH><th>Filetype</th><th>Filesize</th></TR>\n");
// loop through the array of files and print them all
for($index=0; $index < $indexCount; $index++) {
        if (substr("$dirArray[$index]", 0, 1) != "."){ // don't list hidden files
        print("<TR><TD><a href=\"$dirArray[$index]\">$dirArray[$index]</a></td>");
        print("<td>");
        print(filetype($dirArray[$index]));
        print("</td>");
        print("<td>");
        print(filesize($dirArray[$index]));
        print("</td>");
        print("</TR>\n");
    }
}
print("</TABLE>\n");
?>
</body></html>

</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:50:17.297

最好的解决方案是让您的 Web 服务器通过创建位置别名来处理此问题；让 Web 服务器为您执行下载比在 PHP 中执行此操作更具可扩展性。

但是，由于您要求使用 PHP 解决方案，请将其添加到脚本的顶部：

```
$basePath = "/home/files/I/need";
if (isset($_SERVER['PATH_INFO']) && $file = basename($_SERVER['PATH_INFO'])) {
    if (file_exists("$basePath/$file")) {
        // add file size
        header('Content-Length: ' . filesize("$basePath/$file"));
        // write file to output
        readfile("$basePath/$file");
        return;
    }
} 
```

要构建 URL 以进行下载：

```
/path/to/your/script.php/clickedlink.jpg 
```

与生成页面的`/path/to/your/script.php`URL 相同；您附加一个斜杠以及预期的文件名。

我`basename()`用来阻止人们访问`../../../etc/passwd`或他们不应该看到的其他文件，但这也意味着您不能使用子文件夹。如果您需要支持子文件夹，则必须以`PATH_INFO`不同的方式对其进行清理。

# c# - 如何在运行时添加新的用户设置？

> ID：10959192
> 
> 赞同：0
> 
> 时间：2012-06-09T07:20:21.870
> 
> 标签：c#, .net, visual-studio-2010, settings

我想知道如何在运行时在 C sharp 中添加新的用户设置。如何动态插入新值？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-26T11:06:57.183

> 设置可以代表用户偏好或应用程序需要使用的有价值的信息。

添加新设置：

```
Properties.Settings.Default.Properties.Add("property_name",Color.AliceBlue); 
Properties.Settings.Default.Save(); 
```

编辑现有设置：

```
Properties.Settings.Default["property_name"]=Color.Green;
Properties.Settings.Default.Save(); 
```

检索

```
Color backColor = Properties.Settings.Default["property_name"] as Color; 
```

删除现有设置：

```
Properties.Settings.Default.Properties.Remove("property_name"); 
Properties.Settings.Default.Save(); 
```

# css - CSS：绝对位置的奇怪行为（元素移动）

> ID：10959196
> 
> 赞同：1
> 
> 时间：2012-06-09T07:20:45.743
> 
> 标签：css, css-position

我在我的网站上使用了几个具有相对位置的**div 块。**在它们里面我放了绝对位置的块。然而，我有生以来第一次注意到这种奇怪的行为。至少在 Opera 中，当我上下滚动页面或将鼠标悬停在 Magic Zoom 插件上时，那些**具有绝对位置**的块开始上下移动（而不是停留在一个地方）。如果我设置例如 top: 0px; 左：0px；他们呆在同一个地方。也许我改变了代码中的一些东西，因为这些东西最近才开始发生。

```
<div class="innerWrapper" style="width: 100%; position: relative">
    <div class="inside" style="left: auto; 
        right: auto; 
        bottom: auto; 
        top: -24px; 
        position: absolute;">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-09T07:31:42.890

将您的绝对 div 放在父 div 之后。绝对 div 应该是您的相对 div 的第一个孩子。

# php - 检查ip用户名被不同国家访问

> ID：10959198
> 
> 赞同：1
> 
> 时间：2012-06-09T07:21:03.637
> 
> 标签：php, mysql, geoip

我使用 Maxmind geoip 数据库来检索用户所在的国家/地区。我们将所有登录尝试存储在 mysql 中，并且通常人们使用不同的 ip 登录。如果 ip 来自同一个国家，这不是问题，但如果密码在板上共享，您会看到所有国家都在使用它。

我现在用它来检索国家和 IP：

```
$ipaddress = (long2ip($row['ip']));
$country_name = geoip_country_name_by_addr($gi, "$ipaddress");
$country_iso =  geoip_country_code_by_addr($gi, "$ipaddress"); 
```

然后计算不同IP地址的数量：

```
$count_ip = "SELECT distinct ip FROM members WHERE username='".$row['username']."'";
$result_ip = mysql_query($count_ip);
$ips = mysql_num_rows($result_ip); 
```

如果那超过 1，我会收到一条消息。

但我想比较用户名使用的所有 IP 地址的国家代码，以便我可以查看用户名是否被不同国家使用，然后发送消息。

我该怎么做？我有ip数组，我需要先检查ip的国家代码，然后看看它是否不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:37:28.947

您的查询已返回所有 IP 地址，因此您必须遍历结果行：

```
$countries = array();
while ($row = mysql_fetch_array($result_ip, MYSQL_NUM)) {
    $ipaddress = (long2ip($row[0]));
    $countries[geoip_country_name_by_addr($gi, "$ipaddress")] = true;
}

if (count($countries) > 1) {
    // more than one countries have been used to sign in
} 
```

顺便说一句，我假设您在查询中添加了日期范围；否则你会对那些旅行的人产生负面影响;-)

# c# - 如何从包含 SELECT 语句的字符串中获取表名

> ID：10959204
> 
> 赞同：5
> 
> 时间：2012-06-09T07:22:07.133
> 
> 标签：c#, sql-server, string

我有一个包含 sql 命令的字符串，

像这样的东西：

> strCommand = "Select [Feild1], [Feild2] From TableName Order By [Feild1] desc" ;

如何在这个字符串中找到表名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T08:30:53.693

到目前为止，解决方案都采用了在字符串中搜索的方法。您还没有提到您的 SQL 查询是否总是看起来相似，但是有许多查询变体可以包含这些解决方案将中断的内容。考虑...

*   `SELECT Field1, Field2 FROM TableName`
*   `SELECT Field1, Field2 FROM [TableName]`
*   `SELECT Field1, Field2 FROM dbo.TableName`
*   `SELECT Field1, Field2 FROM Table1Name, Table2Name`

如果您尝试解析的查询是您拥有数据库的查询，您可以让 SQL Server 为您完成解析查询的艰苦工作，而不是尝试考虑 SQL 中的所有情况。您可以使用 执行查询`SET SHOWPLAN_ALL ON`，这将生成查询计划表。然后，您可以分析 Arguments 列，其中包含标准格式的查询将涉及的所有字段。下面是一个示例程序：

```
SqlConnection conn = new SqlConnection(CONNECTIONSTRING);
conn.Open();

SqlCommand cmd = conn.CreateCommand();
cmd.CommandText = "SET SHOWPLAN_ALL ON";
cmd.ExecuteNonQuery();
cmd.CommandText = "SELECT [Field1], [Field2] FROM [TableName]";

DataTable dt = new DataTable();
dt.Load(cmd.ExecuteReader());

Regex objectRegex = new Regex(@"^OBJECT:\(\[(?<database>[^\]]+)\]\.\[(?<schema>[^\]]+)\]\.\[(?<table>[^\]]+)\]\.\[(?<field>[^\]]+)\]\)$", RegexOptions.ExplicitCapture);

List<string> lstTables = new List<string>();
foreach (DataRow row in dt.Rows)
{
    string argument = row["Argument"].ToString();
    if (!String.IsNullOrEmpty(argument))
    {
        Match m = objectRegex.Match(argument);
        if (m.Success)
        {
            string table = m.Groups["schema"] + "." + m.Groups["table"];
            if (!lstTables.Contains(table))
            {
                lstTables.Add(table);
            }
        }
    }
}

Console.WriteLine("Query uses the following tables: " + String.Join(", ", lstTables)); 
```

这将处理所有形式的查询名称并返回查询中涉及的所有表，无论它们是如何包含的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T07:25:44.880

如果这一直是相同的模式，那么：

```
 string tableName = strCommand.Split(' ', strCommand)[4]; 
```

但是如果您可以添加/删除字段，只需遍历拆分的字符串并搜索“From”，下一个字符串将是您的表名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T07:27:17.323

我会说 - “From”之后的内容是一种更可靠的获取表名的方式。遍历创建的数组，当您到达“From”时，下一个是表格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T07:38:37.730

这是为我们提供表名的方法，只需更改 SQL 查询字符串、连接字符串

适用于简单查询，也可以连接

```
public static List<string> getTablenames(string connString, string QueryString)
{
    SqlConnection con = new SqlConnection(connString);
    con.Open();
    DataTable dt = con.GetSchema("Tables");

    List<string> getTableName = new List<string>();
    List<string> tablenames = new List<string>();

    foreach (DataRow dr in dt.Rows)
       tablenames.Add(dr[2].ToString());

    for (int i = 0; i < dt.Rows.Count; i++)
    {
        string myTable = tablenames[i];
        Boolean checkMyTable = QueryString.Contains(myTable);
        if (checkMyTable == true)
            getTableName.Add(myTable);
    }
    con.Close();
    return getTableName;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-09T07:52:16.477

您可以使用子字符串（这样，您必须选择多少列都没有关系）

```
string table = strCommand.ToLower().Substring(strCommand.IndexOf("FROM".ToLower())).Split(' ')[0]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-22T20:03:02.197

ISun 的回答满足了我的需求，但需要进行一项更改才能获取表名：

```
string table = strCommand.ToLower().Substring(strCommand.IndexOf("FROM".ToLower())).Split(' ')[1]; 
```

不是

```
string table = strCommand.ToLower().Substring(strCommand.IndexOf("FROM".ToLower())).Split(' ')[0]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-09T08:04:38.107

如果你想要 SQL 的解决方案，试试这个

```
declare @q varchar(1000) = 'Select [Feild1], [Feild2] From TableName Order By [Feild1] desc',
        @tableName varchar(100) = '',
        @temp varchar(1000),
        @temp2 char(1)

declare @frmIndex int = CHARINDEX('From', @q, 0);
declare @flag int = 0, @counter int = 1;
select @temp = SUBSTRING(@q, @frmIndex, len(@q))

set @temp = LTRIM(REPLACE(@temp,'From',''))

while(@flag <> 1)
begin
    set @temp2 = SUBSTRING(@temp, @counter, 1)
    if(@temp2 = ' ')
        set @flag = 1
    select @tableName = @tableName + @temp2
    set @counter = @counter + 1
end

select @tableName as TableName 
```

# mysql - 如何优化此 MYSQL 查询以更快地运行

> ID：10959209
> 
> 赞同：0
> 
> 时间：2012-06-09T07:23:02.513
> 
> 标签：mysql

我有两张桌子

```
requests - request_id, request_message, user_id
responses - response_id, request_id, response_message, user_id, status 
```

我正在运行此查询以获取属于特定用户的未读响应的计数。

```
SELECT COUNT(*) 
FROM RESPONSES 
WHERE status = 'U' 
and request_id IN ( SELECT request_id FROM requests WHERE user_id  = '$User_id') 
```

有什么方法可以使用join来优化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:29:01.247

连接比子查询好试试这个

```
SELECT COUNT(*) 
FROM responses r
INNER JOIN requests rrs ON rrs.request_id = r.request_id
WHERE r.status = 'U' 
and r.user_id = '$User_id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:30:21.923

我建议使用显式连接而不是子查询：

```
SELECT 
 count(*) 
FROM
  responses res
INNER JOIN
  requests req
ON
  req.request_id=res.request_id
WHERE 
  req.user_id='$User_id'
  and res.status='U'; 
```

request_id 字段是否被索引？我猜它是请求中的 PKEY。请求中的 user_id 字段呢？

另外，虽然我复制了您的语法，但我希望 $User_id 不是由用户生成的输入填充的变量。您应该使用绑定参数（该方法将取决于您使用的语言。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T07:41:09.660

另一个查询是这个......

```
SELECT COUNT(*)
FROM responses
    INNER JOIN requests ON
        (requests.request_id = responses.request_id)
WHERE status = 'U' AND 
      responses.user_id = '$User_id' 
```

内部连接的最大运行时间是 max(table_1, table_2)，对于嵌套查询可能是多项式，具体取决于查询，所以是的，这更快...

有几种方法可以加速 sql
1) 总是使用固定的行宽，即没有字符串总是 varchar
2) 良好的索引。
3) 尽可能缓存。
缓存可以在服务器（代码）上完成......或设置一个辅助只读数据库。

# ios - TTTableView 中嵌入的空 TTTableView 不显示“空”消息

> ID：10959213
> 
> 赞同：0
> 
> 时间：2012-06-09T07:24:23.997
> 
> 标签：ios, three20

我在另一个 TTTableView 中嵌入了一个 TTTableView (_commentsItem)，如下所示：

```
 self.dataSource = [DetailItemDataSource dataSourceWithObjects:
                       @"", 
                       self.imageItem,
                       @"", 
                       findItem, 
                       @"",
                       _descriptionItem,
                       @"",
                       self.shareItem,
                       self.editItem,
                       @"",
                       _commentsItem,
                       @"",
                       _addCommentButtonItem,
                       nil]; 
```

当 _commentsItem 有行时，一切正常。我什至可以在 _commentsItem 中向表中添加行，调用 [..refresh]，并且封闭表会相应地自行调整。

当 _commentsItem 为空时会出现问题。通常，您希望得到一个覆盖整个屏幕的 TTErrorView，但我什么也没得到（实际上，我什至不希望它覆盖整个屏幕，我只想让“emptyTitle”显示出来。

我认为问题出在 TTTableView 的“ShowEmpty”中，它正在创建另一个包含 TTErrorView 的视图，而封闭表对此一无所知：

```
- (void)showEmpty:(BOOL)show {
  if (show) {
    NSString* title = [_dataSource titleForEmpty];
    NSString* subtitle = [_dataSource subtitleForEmpty];
    UIImage* image = [_dataSource imageForEmpty];
    if (title.length || subtitle.length || image) {
    TTErrorView* errorView = [[[TTErrorView alloc] initWithTitle:title
                                                      subtitle:subtitle
                                                         image:image] autorelease];
    errorView.backgroundColor = _tableView.backgroundColor;
    self.emptyView = errorView;

  } else {
    self.emptyView = nil;
  }
  _tableView.dataSource = nil;
  [_tableView reloadData];

  } else {
    self.emptyView = nil;
  } 
```

}

我怀疑当它的 TTTableView 嵌入另一个 TTTableView 时 showEmpty 并不是真的要正常工作，但是问题就变成了如何做到这一点。封闭表期望 _commentsItem 是一个 TTTableViewItem，所以我不能将 _commentsItem 的视图换成一个 UILabel。

所以问题是：当您在另一个 TTTableView 中嵌入了一个 TTTableView 时，为嵌入的表格显示“表格空”状态的最佳方式是什么？

谢谢！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:49:24.663

这是我最终解决此问题的方法：

1.  在创建封闭的 TTTableView 时，我决定是否要在存在评论时嵌入表格视图 (TTTableView)，或者是一个简单的空消息 [TTTableTextItem itemWithText:@"No Comments Yet!"];

2.  将 TTTableView 或 TTTableTextItem 项分配给名为 _commentsItem 的 TTTableItem *（TTTableView 和 TTTableTextItem 的超类）

3.  构建封闭表：

    self.dataSource = [DetailItemDataSource dataSourceWithObjects：@""，self.imageItem，@""，findItem，@""，_descriptionItem，@""，self.shareItem，self.editItem，@""，_commentsItem，@""， _addCommentButtonItem，无]；

4.  当我真正得到评论时，我将 TTTableTextItem 换成了一个新的 TTTableView：

    ```
    _commentsPresentItem = 
    [[DetailCommentsItem alloc] initWithFilter:self.lfm.object_id 
                                      detailViewController:self];
    _commentsItem  = _commentsPresentItem;

    // This is SUPER important. Without it the TTTableView in the
    // DetailCommentsItem won't appear properly.
    [[_commentsItem commentsViewController] viewWillAppear:TRUE];

    // Update OUR data source to signal we're swapped out row. Remember,
    // the source is a NSArray of SECTIONS each containing a NSArray of rows
    // for the section.
    unsigned int section  = [[self commentsItemIndexPath] section];
    unsigned int row      = [[self commentsItemIndexPath] row];
    [[[[self dataSource] items] objectAtIndex:section] removeObjectAtIndex:row];
    [[[[self dataSource] items] objectAtIndex:section] insertObject:_commentsPresentItem 
                                                  atIndex:row];

    //Notify the table view
    NSArray *x  = [[NSArray alloc] initWithObjects:_commentsItemIndexPath, nil];
    [self.tableView beginUpdates];
    [self.tableView reloadRowsAtIndexPaths:x withRowAnimation:UITableViewRowAnimationFade];
    [self.tableView endUpdates]; 
    ```

5.  无论我们是否创建了一个新表，都会调用这个位 - 当我们添加新注释以强制包含的表正确更新它的视图时，我们需要它。包括在内是为了完整性。

    ```
    [[_commentsPresentItem commentsViewController] invalidateModel];
    [[_commentsPresentItem commentsViewController] refresh]; 
    ```

# sql - 从一列中选择并插入另一列并附加一些字符串？

> ID：10959215
> 
> 赞同：0
> 
> 时间：2012-06-09T07:24:48.510
> 
> 标签：sql, sql-server, tsql

我有一个`countries`三列的表`country_name, country_code, country_flag`。

该表有 250 行，但该`country_flag`列目前全部为空，因为我现在已经创建了它。

此列的目的是包含该国家/地区的标志文件（图像）的路径`Images\Flags\UK.gif`（每个标志文件都被命名为国家代码）。现在我想编写一个查询，应该从列中选择国家代码并在开头和结尾`country_code`附加字符串，就像这样`Images\Flags\``.gif`

```
'Images\Flags\' + country_code + '.gif' 
```

然后`country_flag`用这个值更新列。

如果这是可能的，那么它将以更少的努力更新表格，我将获得`country_flag`列中的所有图像路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:31:37.200

尝试这个

```
Update countries set country_flag = 'Images\Flags\' + country_code + '.gif' 
```

# c# - 从财务报表中抓取 HTML

> ID：10959219
> 
> 赞同：0
> 
> 时间：2012-06-09T07:25:21.343
> 
> 标签：c#, visual-studio-2010, web-scraping, html-agility-pack

第一次尝试学习在 Visual Studio 和 C# 中使用 HTML。我正在使用[html 敏捷包](http://htmlagilitypack.codeplex.com/ "敏捷包")库。进行解析。

从这个[页面](http://www.google.com/finance?q=NASDAQ:TXN&fstype=ii "德克萨斯州") 我试图从这个页面的各个地方提取信息并将它们保存为格式正确的字符串

这是我当前的代码（取自：[shriek](https://stackoverflow.com/questions/10897162/parsing-financial-information-from-html "德克萨斯州")）

```
HtmlNode tdNode = document.DocumentNode.DescendantNodes().FirstOrDefault(n => n.Name == "td"
&& n.InnerText.Trim() == "Net Income");
if (tdNode != null)
{
  HtmlNode trNode = tdNode.ParentNode;
  foreach (HtmlNode node in trNode.DescendantNodes().Where(n => n.NodeType ==     HtmlNodeType.Element))
  {
    Console.WriteLine(node.InnerText.Trim());
    //Output:
    //Net Income
    //265.00
    //298.00
    //601.00
    //672.00
    //666.00
  }
 } 
```

它可以正常工作，但是我想获得更多信息，但我不确定如何正确搜索 html。首先，我还希望能够从年度数据中选择这些数字，而不仅仅是从季度数据（页面顶部的查看选项）。

我还想获取每列数字的日期，包括季度和年度（每列顶部的“截至...”）

同样对于未来的项目，谷歌是否为此提供了 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:34:01.223

如果您仔细查看原始输入 html 源代码，您会发现它的数据围绕 6 个主要部分组织，这些部分是具有以下“id”属性之一的 DIV html 元素：“ `incinterimdiv`”“ `incannualdiv`”“ `balinterimdiv`”“ `balannualdiv`”“ `casinterimdiv`”“ `casannualdiv`”。显然，这些与*季度*或*年度*数据的*损益表*、*资产负债表*和*现金流量相匹配。*

 **现在，当您使用 Html Agility Pack 抓取网站时，我建议您使用 XPATH ，这是访问 HTML 代码中任何节点的最简单方法，**而不依赖于 XML**，因为 Html Agility Pack 支持纯**XPATH over HTML**。

当然，XPATH 必须学习，但它非常优雅，因为它在一行中完成了很多事情。我知道这对于新的酷炫的面向 C# 的 Xlinq 语法可能看起来过时了 :)，但 XPATH 更简洁。它还使您能够将代码和输入 HTML 之间的绑定集中在普通的旧字符串中，并避免在输入源演变时（例如，当 ID 更改时）重新编译代码。这使您的抓取代码更加健壮，并且面向未来。您还可以将 XPATH 绑定放在 XSL(T) 文件中，以便能够*将*HTML 转换为以 XML 形式呈现的数据。

无论如何，足够的题外话了 :) 这是一个示例代码，允许您从特定行标题获取财务数据，另一个从所有行获取所有数据（来自 6 个主要部分之一）：

```
 HtmlWeb web = new HtmlWeb();
        HtmlDocument doc = web.Load("http://www.google.com/finance?q=NASDAQ:TXN&fstype=ii");

        // How get a specific line:
        // 1) recursively get all DIV elements with the 'id' attribute set to 'casannualdiv'
        // 2) get all TABLE elements under, with the 'id' attribute set to 'fs-table'
        // 3) recursively get all TD elements containing the given text (trimmed)
        foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@id='casannualdiv']/table[@id='fs-table']//td[normalize-space(text()) = 'Deferred Taxes']"))
        {
            Console.WriteLine("Title:" + node.InnerHtml.Trim());

            // get all following sibling TD elements
            foreach (HtmlNode sibling in node.SelectNodes("following-sibling::td"))
            {
                Console.WriteLine(" data:" + sibling.InnerText.Trim()); // InnerText works also for negative values
            }
        }

        // How to get all lines:
        // 1) recursively get all DIV elements with the 'id' attribute set to 'casannualdiv'
        // 2) get all TABLE elements under, with the 'id' attribute set to 'fs-table'
        // 3) recursively get all TD elements containing the class 'lft lm'
        foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@id='casannualdiv']/table[@id='fs-table']//td[@class='lft lm']"))
        {
            Console.WriteLine("Title:" + node.InnerHtml.Trim());
            foreach (HtmlNode sibling in node.SelectNodes("following-sibling::td"))
            {
                Console.WriteLine(" data:" + sibling.InnerText.Trim());
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:43:32.433

我强烈建议不要使用这种方法。谷歌吐出的 HTML 可能非常不稳定，因此即使您巩固了解析方法以获取所需的所有数据，在一天、一周或一个月内，HTML 格式也可能全部改变，您需要重写你的解析逻辑。

您应该尝试使用更静态的东西，例如 XBRL。

SEC 在此处为每家上市公司发布此 XBRL = [http://xbrl.sec.gov/](http://xbrl.sec.gov/)

您可以使用此工具包以编程方式处理数据 - [http://code.google.com/p/xbrlware/](http://code.google.com/p/xbrlware/)

编辑：阻力最小的路径实际上是使用[http://www.xignite.com/xFinancials.asmx](http://www.xignite.com/xFinancials.asmx)，但这项服务需要花钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T07:34:59.160

你有两个选择。一种是对 HTML 页面进行逆向工程，找出当您单击年度数据时运行的 JavaScript 代码，查看它从哪里获取数据并询问数据。

第二种更强大的解决方案是使用像 Selenium 这样的平台，它实际上模拟 Web 浏览器并为您运行 JavaScript。

据我所知，财务报表没有 CSV 接口。也许雅虎！有一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T04:44:36.917

如果您需要四处导航以到达正确的页面，那么您可能想考虑使用[WatiN](http://watin.org/)。WatiN 被设计为网页的自动化测试工具，并驱动选定的网络浏览器来获取页面。它还允许您识别输入字段并在文本框或按钮中输入文本。它很像 HtmlAgilityPack，所以你不应该觉得掌握它太难。**

# ruby-on-rails - 在 twitter-bootstrap-rails 中覆盖较少的变量

> ID：10959224
> 
> 赞同：1
> 
> 时间：2012-06-09T07:26:09.487
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

我正在使用 twitter-bootstrap-rails gem，在`bootstrap_and_overrides.css.less`文件中我有下一行：

```
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000; 
```

但是当我取消注释时，`@linkColor: #ff0000;`我收到以下错误：

```
Invalid CSS after "...icons-halflings": expected ")", was ".png"");" 
```

我做错了什么，还是lib的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T07:49:26.577

似乎删除`.png`s 等改变

```
// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png'); 
```

进入

```
// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white'); 
```

解决了这个问题。我认为这是一个库错误

# c - 内核中的地址

> ID：10959225
> 
> 赞同：7
> 
> 时间：2012-06-09T07:26:42.910
> 
> 标签：c, linux, kernel, kernel-module

当我在内核中找到地址时，我有一个问题。我在内核中插入了一个 hello 模块，在这个模块中，我放了这些东西：

```
char mystring[]="this is my address";
printk("<1>The address of mystring is %p",virt_to_phys(mystring)); 
```

我想我可以得到mystring的物理地址，但我发现，在syslog中，它的打印地址是0x38dd0000。但是，我把内存转储出来，发现它的真实地址是dcd2a000，这与前者有很大的不同。这要怎么解释？我做错事情了？谢谢

PS：我使用了一个工具来转储整个内存，物理地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T02:33:56.697

根据[VIRT_TO_PHYS 的手册页](http://mirror.linux.org.au/linux.conf.au/2005/cdrom-beta-1/linux-mandocs-2.6.12.6/virt_to_phys.html)

> 返回的物理地址是给定内存地址的物理 (CPU) 映射。**仅在通过 kmalloc 直接映射或分配的地址上使用此功能才有效。**
> 
> 此函数不提供 DMA 传输的总线映射。在几乎所有可以想象的情况下，设备驱动程序都不应该使用这个函数

尝试先分配内存`mystring`使用`kmalloc`；

```
char *mystring = kmalloc(19, GFP_KERNEL);
strcpy(mystring, "this is my address"); //use kernel implementation of strcpy
printk("<1>The address of mystring is %p", virt_to_phys(mystring));
kfree(mystring); 
```

[这是在这里](http://lxr.linux.no/linux/lib/string.c#L70)找到的 strcpy 的实现：

```
char *strcpy(char *dest, const char *src)
{
    char *tmp = dest;

    while ((*dest++ = *src++) != '\0')
            /* nothing */;
    return tmp;
} 
```

# python - 如何区分一个单词是半角还是全角？

> ID：10959227
> 
> 赞同：0
> 
> 时间：2012-06-09T07:27:21.637
> 
> 标签：python

最近我一直在处理混合语言的文本，包括中文、英文，甚至一些表情符号。

我一直在寻找这个问题很多，但我唯一能找到的是“用半角字符替换全角字符”而不是告诉你如何确定字符是半角还是全角 -宽词。

所以，我的问题是：

**是否可以判断一个单词是半角还是全角？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:35:24.687

在 unicode 6.1 中，这里有 block `Halfwidth and Fullwidth forms`, [pdf](http://unicode.org/charts/PDF/UFF00.pdf)。

在这个块内，`\uFF01-\uFF60`和`\uFFE0-\uFFE6`是全角的，而`\uFF61-\uFFDC`和`\uFFE8-\uFFEE`是半角的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:34:46.140

我认为这是一个很难回答的问题，除非您对什么是半角字符和什么是全角字符有明确的标准。如果您可以决定，那么您可以根据 Unicode（或任何编码方案）中的某些范围测试单词中的字符。

Unicode 块[半角和全角形式](http://unicode.org/charts/PDF/UFF00.pdf)仅向您显示哪些字符具有替代形式。对于此块中没有的任何内容，您必须决定您认为什么是半角和全角。

我想大多数西方字符是半角，大多数东方字符是全角，但两者都会有例外。正如[这份 Unicode 报告](http://www.unicode.org/reports/tr11/)强调的那样，也存在歧义。

[该提议](http://www.cl.cam.ac.uk/~mgk25/ucs/scw-proposal.html)包括似乎将字符分为全半角和模棱两可的[代码。](http://www.cl.cam.ac.uk/~mgk25/ucs/wcwidth.c)您可以使用这些代码点作为起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T07:36:14.710

如果一个单词的字符是全角的，那么它就是全角的。您需要查找 unicode 规范并查看哪些字符范围是全角的，然后检查每个字符。

# file-upload - 使用 HttpClient 和 MultipartEntity 将文件上传到 Solr

> ID：10959231
> 
> 赞同：1
> 
> 时间：2012-06-09T07:27:59.980
> 
> 标签：file-upload, solr, httpclient, multipart

httpclient, httpmime 4.1.3

我正在尝试通过 http 将文件上传到远程服务器，但没有成功。

这是我的代码：

```
 HttpPost method;
    method = new HttpPost(solrUrl + "/extract");
    method.getParams().setParameter("literal.id", fileId);
    method.getParams().setBooleanParameter("commit", true);

    MultipartEntity me = new MultipartEntity();
    me.addPart("myfile", new InputStreamBody(doubleInput, contentType, fileId));

    method.setEntity(me);
    //method.setHeader("Content-Type", "multipart/form-data");
    HttpClient httpClient = new DefaultHttpClient();
    HttpResponse hr = httpClient.execute(method); 
```

服务器是 Solr。

`curl`这是为了替换一个像这样调用的工作 bash 脚本，

`curl http://localhost:8080/solr/update/extract?literal.id=bububu&commit=true -F myfile=@bububu.doc`

如果我尝试设置“Content-Type”“multipart/form-data”，接收部分会说没有边界（这是真的）：

`HTTP Status 500 - the request was rejected because no multipart boundary was found`

如果我忽略此标头设置，服务器会发出一个错误描述，据我所知，该描述表明内容类型不是多部分 [2]：

`HTTP Status 400\. The request sent by the client was syntactically incorrect ([doc=null] missing required field: id).`

这与 [1] 有关，但我无法从中确定答案。我在想，

> 我处于同样的情况，但不知道该怎么做。我希望 MultipartEntity 会告诉 HttpPost 对象它是多部分的、表单数据并且有一些边界，并且我不会自己设置内容类型。我不太明白如何为实体提供边界——MultipartEntity 没有像 setBoundary 这样的方法。或者，如何让我自己在 addHeader 中指定随机生成的边界 - 也没有 getBoundary 方法......

[1][使用 HttpClient4 上传文件时设置标题“Content-Type”的问题](https://stackoverflow.com/questions/6212404/problem-with-setting-header-content-type-in-uploading-file-with-httpclient4)

[2] [http://lucene.472066.n3.nabble.com/Updating-the-index-with-a-csv-file-td490013.html](http://lucene.472066.n3.nabble.com/Updating-the-index-with-a-csv-file-td490013.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:28:05.640

我怀疑

```
method.getParams().setParameter("literal.id", fileId);
method.getParams().setBooleanParameter("commit", true); 
```

在第一行，是`fileId`字符串还是文件指针（或其他）？我希望它是一个字符串。至于第二行，您可以设置一个普通参数。

* * *

我正在努力解决`HTTP Status 400`. 我不太了解Java（或者是.Net？）

[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)

# javascript - 未终止的正则表达式文字错误

> ID：10959232
> 
> 赞同：0
> 
> 时间：2012-06-09T07:28:07.423
> 
> 标签：javascript, xml, jsp

我在解析 XML 文件时遇到了 Javascript 错误。我的代码如下所示：

```
var det = eval( "(" +  xmlhttp.responseText + ")"); 
```

此代码返回的 xml 文件将是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><accountss><accounts>`<password>1234</password><userid>arjel</userid></accounts></accountss> 
```

执行此代码时出现未终止的正则表达式文字错误。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:30:05.737

您正在尝试使用一段旧的、缓慢的、危险的代码来解析 XML，该代码旨在通过将**JSON**评估为 JavaScript 来解析它。与 JSON 不同，XML 不是 JavaScript 的子集，因此当您尝试执行此操作时会出错。

直接访问就`xmlhttp.responseXML`行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:48:01.913

你不需要 eval()。Eval 将尝试“执行”与 2 个括号连接的 xml 作为 javascript，但由于显而易见的原因，它会失败（不是 javascript 代码 - 无法执行它）。

如果您只想用圆括号连接您的 XML，请不要使用 eval()：

```
var det = "(" +  xmlhttp.responseText + ")"; 
```

# iphone - 如何在 iphone 中打开/关闭 UILocalNotification？

> ID：10959235
> 
> 赞同：0
> 
> 时间：2012-06-09T07:28:50.910
> 
> 标签：iphone, uilocalnotification

我通过在按钮操作设置警报上调用以下方法来根据 UISWitch 位置设置 UILocalNotification。

```
- (void)scheduleNotificationWithInterval:(int)minutesBefore {

    NSDateFormatter* theDateFormatter = [[NSDateFormatter alloc] init];
    [theDateFormatter setFormatterBehavior:NSDateFormatterBehavior10_4];
    [theDateFormatter setDateFormat:@"EEEE"];
    NSString *currentDay=  [theDateFormatter stringFromDate:combo2.datePick.date];

    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if (localNotif == nil)
        return;
    localNotif.fireDate = [combo2.datePick.date dateByAddingTimeInterval:-30];
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.repeatInterval=NSCalendarCalendarUnit;
    localNotif.repeatInterval = NSDayCalendarUnit;

    if (iBOfSwitchAlarm.on) {

        if([combo1.selectedText isEqualToString:currentDay])
        {

            NSLog(@"In DayCheck");
            localNotif.alertBody = @"Alarm Test";
            localNotif.alertAction = @"Ok";
            localNotif.soundName = UILocalNotificationDefaultSoundName;

            NSDictionary *infoDict = [NSDictionary dictionaryWithObject:@"THere Message for Alarm" forKey:@"Message"];
            localNotif.userInfo = infoDict;

            [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
        }
    }else{
        NSLog(@"SwOff");
    }
} 
```

我在 AppDelegate 中编写了以下代码。在这里，我还检查了开关位置。

```
ViewController *obj =[[ViewController alloc]init];

    NSString *itemName = [notif.userInfo objectForKey:@"Message"];

    if (obj.iBOfSwitchAlarm.on) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alarm Title" message:itemName delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:@"Continue", nil];
        alertView.tag = 1111;
        [alertView show];

        app.applicationIconBadgeNumber = notif.applicationIconBadgeNumber-1;
    }else{
       NSLog(@"SwitchOff");
    } 
```

现在我的问题是当我根据时间设置通知时。它正在准时戒备。但是在我关闭和再次打开之间时，它没有得到警报。有任何方法可以根据开关位置进行 On 和 Off 通知。如果有人知道，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:52:46.880

要关闭您可以使用`[[UIApplication sharedApplication] cancelAllLocalNotifications];`或特定的通知`[[UIApplication sharedApplication] cancelLocalNotification:<#(UILocalNotification *)#>];` ，然后您将不得不像这样重新安排您的通知

```
[[MKLocalNotificationsScheduler sharedInstance] scheduleNotificationOn:[[NSDate Date] addTimeInterval:60*60*24*1]
                                                                  text:@"Hi this is notification"
                                                                action:@"View"
                                                                 sound:@"Raising_Sound.mp3"
                                                           launchImage:nil
                                                               andInfo:nil]; 
```

就我而言，我将在一天后重新安排

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:45:32.670

如果一次只能有一个`UILocalNotification`，我会将其声明为变量，以便您可以随意访问它。

如果您存储您的`UILocalNotification`，您可以使用组合`-cancelLocalNotification:`将其**关闭**并`-scheduleLocalNotification:`重新**打开**，同时保持其属性不变。

# php - Facebook 范围 PHP

> ID：10959240
> 
> 赞同：0
> 
> 时间：2012-06-09T07:29:21.703
> 
> 标签：php, facebook, email, scope

我正在尝试使用 Facebook 的默认 PHP 网站集成和身份验证。当用户登录时，我可以请求权限以从用户那里获取各种信息。

* * *

> **这个问题有点老了。请注意 harkirat1892 的评论。**
> 
> “如果有人使用 Facebook SDK v4.4 遇到这个问题，那么 Dhiraj 的答案在这种情况下将不起作用，因为有一个小的变化。您不必在传递给 getLoginUrl 的数组中包含 redirect_uri。
> 
> 根据 v4.4，getLoginUrl 应该像这样工作：

```
$loginUrl = $facebook->getLoginUrl(
array(
    'scope'         => 'email,user_checkins, user_birthday'
)
); 
```

> 可以在此处找到各种范围：[Facebook 权限](https://developers.facebook.com/docs/facebook-login/permissions#referencehttps://developers.facebook.com/docs/facebook-login/permissions#reference)。”

* * *

很容易弄清楚如何使用 JavaScript 来做到这一点，但我很困惑在 PHP 示例中指定范围的位置。

基本上，我只想请求访问他们的电子邮件和位置以及其他一些信息的权限。

这是我正在使用的代码：（稍作修改，但几乎与他们所拥有的完全匹配。）

```
<?php
    define('YOUR_APP_ID', '---------');
    define('YOUR_APP_SECRET', '------------');

    //Uses the PHP SDK.  Download from https://github.com/facebook/php-sdk
    require 'facebook.php';

    $facebook = new Facebook(array(
      'appId'  => YOUR_APP_ID,
      'secret' => YOUR_APP_SECRET,
    ));

    $FBUID = $facebook->getUser();
?>

<?php  if ($FBUID) {
    $userInfo = $facebook->api('/' + $FBUID); ?>

<?php $FBName = $userInfo['name'];?>
    <!--
      Welcome <? // = $userInfo['name'] ?> -->

<?php } else { ?>
    <div id="fb-root"></div>
    <fb:login-button></fb:login-button>
<?php } ?>

    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId      : '---------------',
                status     : true,
                cookie     : true,
                xfbml      : true,
                oauth      : true,
            });

            FB.Event.subscribe('auth.login', function(response) {
                window.location.reload();
            });
        };

        (function(d){
            var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
         }(document));
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:31:54.953

这是您通常在[PHP](http://en.wikipedia.org/wiki/PHP)中指定范围的方式（查看**[文档](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)**）：

```
$facebook = new Facebook(array(
    'appId'  => AppInfo::appID(),
    'secret' => AppInfo::appSecret(),
));

$loginUrl = $facebook->getLoginUrl(
    array(
        'scope'         => 'read_stream,publish_stream,publish_actions,manage_pages,email,user_checkins',
        'redirect_uri'  => $redirectURI
    )
); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T23:01:56.513

如果使用 Facebook SDK v4.4 的人偶然发现了这个问题，那么 Dhiraj 的答案在这种情况下将不起作用，因为有一个小的变化。您不必在传递给 getLoginUrl 的数组中包含 redirect_uri。

根据 v4.4，getLoginUrl 应该像这样工作：

```
$loginUrl = $facebook->getLoginUrl(
array(
    'scope'         => 'email, user_checkins, user_birthday'
) 
```

);

可以在此处找到各种范围：[Facebook 权限](https://developers.facebook.com/docs/facebook-login/permissions#reference)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T02:10:17.433

上面的答案很好，但 Facebook 只是喜欢改变现状。在这个论坛上检查的最佳答案是针对 Facebook SDK 的一个版本，它已经过时了。与上面的示例类似，以下是您如何请求版本 5.0 的权限或范围。

```
session_start();

$F = new \Facebook\Facebook([
  'app_id'      => 'app-id',
  'app_secret'  => 'app-secret',
  'default_graph_version' => 'v2.8'
 ]);

$helper      = $F->getRedirectLoginHelper();
$callBackUrl = "http://website.com/callBack.php";
$scope       = array("email","user_likes");
$loginUrl    = $helper->getLoginUrl($url,$scope); 
```

另外，我注意到上面的答案是对“user_checkins”的请求，我认为它已被弃用。最新的权限参考列表在[这里](https://developers.facebook.com/docs/facebook-login/permissions#referencehttps://developers.facebook.com/docs/facebook-login/permissions#reference)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T09:16:03.967

我遇到了同样的问题并得到了以下解决方案。可能对您有帮助：

在 facebook 开发者控制台中打开您的应用程序，然后选择左侧的应用程序评论部分。

提交项目以供批准。某些权限需要在使用前获得 facebook 的批准。

:)

# sencha-touch-2 - 在 Sencha 中单击按钮更改容器

> ID：10959242
> 
> 赞同：1
> 
> 时间：2012-06-09T07:29:35.387
> 
> 标签：sencha-touch-2, sencha-architect

我的 Sencha Architect Frame work 2.0 中有两个容器。

第一个容器包含一个登录按钮。因此，在单击该按钮的点击事件时，我希望我的视图从容器 1 更改为容器 2。

如何才能做到这一点。

谢谢阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:44:47.323

尝试这个：

1.  使用布局制作一个面板：卡片，为面板设置 set activeItem(0)
2.  将两个容器放在面板内，请确保登录容器是第一个，另一个是第二个
3.  在面板的点击事件中为面板应用 setActiveItem(1)

这样您就可以在这两个视图之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:02:38.267

在您的按钮`tap`事件中，您应该运行如下内容：

`yourOuterContainer.animateActiveItem(1);`

注意：这里我假设您的外部容器包含 2 个组件：第一个容器和第二个容器（因此您的第二个容器的索引为 1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:21:25.727

您可以使用导航视图组件... Sencha Architect 文档提供了实现此功能的简单指南

[http://docs.sencha.com/architect/2/#!/guide/navigationview](http://docs.sencha.com/architect/2/#!/guide/navigationview)

# msbuild - 如何在 MsBuild 中同步项目之间的共享资源

> ID：10959250
> 
> 赞同：4
> 
> 时间：2012-06-09T07:31:41.990
> 
> 标签：msbuild, task, synchronize

我需要在 MsBuild 中构建的项目之间同步对共享资源的访问。过去，当项目按顺序在同一流程中运行时，这不是问题。但是现在当 MsBuild 可以在多个线程和多个进程中运行项目构建时，我就是找不到实现这一点的方法。

基本上，我想要的是当我的项目开始构建时，我可以对资源进行一些操作。当它们都建到最后时，我可以再做一次手术。

如果首先想到我可以实现一个自定义任务并让每个项目修改构建过程，在构建之前和之后注入任务。但由于它们可以并行运行，甚至可以跨进程运行，我似乎无法选择。

当试图弄清楚这一点时，我最接近的是当我在 Microsoft.Build.Execution 命名空间中找到 BuildSubmission 类时（http://msdn.microsoft.com/en-us/library/microsoft.build.execution.buildsubmission .aspx）。但是我找不到任何关于我应该如何从我的自定义任务中与这些类进行交互的信息。

任何类型的输入或某个方向的指针都将受到高度赞赏！

/每

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T11:00:46.033

您可以在自定义 MSBuild 任务中实现资源访问，并通过[命名互斥体](http://msdn.microsoft.com/en-us/library/bwe34f1k%28v=vs.110%29.aspx)保护它（这些可用于同步单独的进程）。也就是说，实现会首先获取互斥锁，检查资源是否需要被触碰，然后才会对资源执行它的工作，最后释放互斥锁。[您可以使用AfterTargets 或 BeforeTargets](http://freetodev.wordpress.com/2009/06/24/msbuild-4-0-beforetargets-and-aftertargets/)强制此任务在构建之前或之后运行。

这样，如果使用此任务的两个项目同时到达预构建或构建后阶段，则只有其中一个将在资源上执行工作，而另一个则等待。当第一个项目释放互斥体时，第二个项目将获取它，意识到工作已经完成并立即释放互斥体，而不接触资源。

您应该考虑是否要使用相同的互斥锁或两个不同的互斥锁来进行预构建和构建后资源访问（它们可以同时运行吗？）。

# javascript - Javascript BigInt.js 如何划分大数

> ID：10959255
> 
> 赞同：1
> 
> 时间：2012-06-09T07:31:53.667
> 
> 标签：javascript, bigint

[http://www.leemon.com/crypto/BigInt.js](http://www.leemon.com/crypto/BigInt.js)

我正在使用 leemon bigint.js 库，但我无法弄清楚如何将一个大数除以另一个。这是我到目前为止所拥有的：

```
var a = str2bigInt("100",10);
var b = int2bigInt("5", 10);
var result = [];
var r = [];
divide_(a,b,result,r)
alert(bigInt2str(result,10)); 
```

但是当我警告（结果）时，输出为 0。结果应该是 20？谁能看到我做错了什么？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:38:17.993

我想这条线

```
var b = int2bigInt("5", 10); 
```

应该

```
var b = str2bigInt("5", 10); 
```

该函数`int2bigInt`需要一个整数，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:43:54.577

显然，这个`BigInt.js`库希望结果数组已经有足够的长度来存储结果；使用空数组不起作用。

但是，此代码按预期工作：

```
var a = str2bigInt("100",10);
var b = int2bigInt("5", 10);
var result = new Array(2);
var r = new Array(2);
divide_(a,b,result,r);
alert(bigInt2str(result,10)); 
```

# objective-c - Objective C 的谓词格式

> ID：10959257
> 
> 赞同：0
> 
> 时间：2012-06-09T07:31:55.610
> 
> 标签：objective-c, ios

我试图理解Objective C中的谓词，但是我一直在弄清楚以下谓词的作用：

```
$NSPredicate *predicate = [NSPredicate predicateWithFormat:@"holder.valueOfAssets > 70"]; 
```

更具体地说，我不明白 dot(.) 运算符的作用。给出一些上下文：“holder”是一个指向一个对象的指针，它有一个名为“valueOfAssets”的方法。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:31:56.927

假设您有一个 CoreData 类 Person，person 具有 name、age 和 child 等属性，这与 Person 类有关系。接下来，您要发出一个获取请求，获取一些持久的 Person 对象，这些对象的孩子的年龄等于 18

```
NSPredicate = [NSPredicate predicateWithFormat@"child.age == %@", [NSNumber numberWithInt:18]];
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
[fetchRequest setPredicate:predicate];
NSArray *filteredPeople = [[self managedObjectContext] executeFetchRequest:fetchRequest error:nil]; 
```

所以基本上点语法用于对子对象属性执行操作。

# iphone - Core Animation 和 CALayer 和 CATransformLayer 可以显示具有“厚度”的对象吗？

> ID：10959260
> 
> 赞同：5
> 
> 时间：2012-06-09T07:32:06.757
> 
> 标签：iphone, ios, core-animation, calayer, 2.5d

似乎我们可以显示图层，甚至可以`zPosition`在 Core Animation 中为不同的图层使用不同的图层——但是，真的没有简单的方法来显示一些厚度的东西吗？

例如，一块 2 毫米厚的奶酪，或者一个按钮或一个倾斜的硬币，因此显示 1 毫米厚？不知何故，必须通过添加另一层来模仿厚度来显示厚度？所以这个 2.5D 是一个更基本的 2.5D，它是一个仅限于平面 2D 图像的 3D 世界……而一些 2.5D，比如一些 RPG 游戏，（比如[暗黑破坏神](http://en.wikipedia.org/wiki/Diablo_%28video_game%29)），有时也被称为 2.5D 但对象在那些情况下（例如建筑物）实际上可以具有宽度、长度和高度（厚度）。所以实际上，这些对我来说实际上是相当 3D 的……除了大多数物体都在侧向倾斜的 2D 地图上。

回到问题上来……在 iOS 中，它是否确实仅限于平面 2D 图像的 3D 世界，并且进入任何`width`x `length`x`height`都需要进入 OpenGL / `CAEAGLLayer`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:26:53.797

对，是真的。Core Animation 对 2D 对象（层）进行 3D 动画处理。您可以通过构建复杂的对象组合来模拟厚度，在其中为对象的边缘添加层，但这很痛苦。

OpenGL 是一个更好的 3D 平台。

# eclipse - 如何从 Eclipse Zest 将图形渲染为 JPG

> ID：10959261
> 
> 赞同：2
> 
> 时间：2012-06-09T07:32:32.270
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-gef, zest

我已经使用 Eclipse Zest Toolkit 实现了模型可视化。现在我想将视觉模型保存为 JPEG 图像。我怎样才能实现这个目标？

**已编辑：** 我已尝试实现[此处](https://stackoverflow.com/a/10735505/476917)提到的代码。但是捕获的图像被裁剪了，因为我的视图中有垂直滚动条（见图）： ![在此处输入图像描述](../Images/a114097d1290595a888bb26db4e67981.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:13:26.327

为此，我使用了以下代码（源自 PDE 中的插件依赖可视化示例）：

[http://code.google.com/a/eclipselabs.org/p/debugvisualisation/source/browse/hu.cubussapiens.debugvisualisation/src/hu/cubussapiens/debugvisualisation/internal/widgets/VisualisationGraphViewer.java](http://code.google.com/a/eclipselabs.org/p/debugvisualisation/source/browse/hu.cubussapiens.debugvisualisation/src/hu/cubussapiens/debugvisualisation/internal/widgets/VisualisationGraphViewer.java)

如果我没记错的话，这可以处理滚动问题（但我不确定）。

# iphone - 如何将文档路径中的文档上传到 iPad

> ID：10959262
> 
> 赞同：0
> 
> 时间：2012-06-09T07:32:42.390
> 
> 标签：iphone, ipad

这是我第一次在模拟器之外的 iPad 上测试我的应用程序。我有一些文件的路径是使用以下方法检索的：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

在模拟器中运行时一切正常，但在 iPad 上似乎没有上传文档目录中的文件。如何将所有这些文件上传到 iPad？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:11:44.890

iOS 设备遵循沙盒环境，因此每个应用程序都有自己的 Documents 文件夹。要将文件保存在文档文件夹中，您可以尝试以下操作：

```
 //This will provide you path for the document folder of your app.
 NSString *documentsPath = [NSHomeDirectory stringByAppendingPathComponent:@"Documents"]; 
```

现在，您可以使用此路径来附加文件路径并保存文件。
如果有任何疑问，请告诉我。

# bash - 带有多个参数的 bash 别名和 bash 函数

> ID：10959266
> 
> 赞同：0
> 
> 时间：2012-06-09T07:33:35.553
> 
> 标签：bash

我想同时使用带有多个参数的 bash 别名和 bash 函数。我模拟 svn sub 命令。

```
$ svngrep -nr 'Foo' .
$ svn grep -nr 'Foo' . 
```

我的期望是如下所示：

```
grep --exclude='*.svn-*' --exclude='entries' -nr 'Foo' . 
```

但实际上，只有别名（'svngrep'）表现良好，函数（'svn grep'）会导致无效选项错误。如何编写我的 .bashrc？

```
#~/.bashrc

alias svngrep="grep --exclude='*.svn-*' --exclude='entries'"

svn() {
  if [[ $1 == grep ]]
then
  local remains=$(echo $@ | sed -e 's/grep//')
  command "$svngrep $remains"
else
  command svn "$@"
fi
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:35:56.673

您想`shift`从位置参数中删除第一个单词：这保留了`"$@"`.

```
svn() {
  if [[ $1 = grep ]]; then
    shift
    svngrep "$@"
  else
    command svn "$@"
  fi
} 
```

使用 bash 的`[[`内置函数，single`=`用于字符串相等，double`==`用于模式匹配——在这种情况下你只需要前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:49:27.240

`svngrep`不是变量。它是 bash 使用的别名。因此必须创建一个新变量，例如：

```
svngrep_var="grep --exclude='*.svn-*' --exclude='entries'" 
```

并在您的代码段中使用它：

```
...
command "$svngrep_var $remains"
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:06:58.190

我自己重新考虑了这一点。并且工作正常！谢谢！

```
#~/.bashrc
alias svngrep="svn grep"
svn() {
if [[ $1 == grep ]]
then
    local remains=$(echo $* | sed -e 's/grep//')
    command grep --exclude='*.svn-*' --exclude='entries' $remains
else
  command svn $*
fi
} 
```

我选择保持别名简单。我使用 $* 而不是 $@。

编辑：2012-06-11

```
#~/.bashrc
alias svngrep="svn grep"
svn() {
  if [[ $1 = grep ]]
  then
    shift
    command grep --exclude='*.svn-*' --exclude='entries' "$@"
  else
    command svn "$@"
  fi
} 
```

# backbone.js - 使用事件聚合器在骨干 js 中加载具有不同模型的视图

> ID：10959267
> 
> 赞同：1
> 
> 时间：2012-06-09T07:33:50.300
> 
> 标签：backbone.js, asp.net-mvc-4

我是新来的主干.js 一周前开始使用主干。我不得不做一个演示。它背后的主要思想是当页面加载时，我需要显示课程，默认情况下，学生列表中的第一门课程。这是显示**course.js**文件中的课程列表的代码

***//模型***

```
 var Course = Backbone.Model.extend({
    urlRoot: '/api/courses/',
    idAttribute: 'Id', 
    defaults:{
        Id: null,
        Name: ""        
    },
    validate: function (attr) {
        if (!attr.Name)
            return "Name is required";          
      }
});

var Courses = Backbone.Collection.extend({
    model: Course,
    url: '/api/courses'
}); 
```

***//视图***

```
var CourseList = Backbone.View.extend({
    tagName: 'ul',
    initialize: function () {
        this.collection.on('reset', this.renderAll, this);
        this.collection.on('add', this.render, this);
        this.collection.fetch();
        _.bindAll(this, 'renderAll', 'render');
        return this;
    },
    renderAll: function () {
        this.collection.each(this.render);
        $('#spnStdntCourseName').text('Students Enrolled in ' + this.collection.at(0).get("Name"));
    },
    render: function (model) {
        var item = new CourseItem({ model: model });
        this.$el.append(item.el);
    },

    events: {
        "click    #btnAddCourse": "createNewCourse",
        "keypress #txtNewCourse": "createOnEnter"
    },

    createOnEnter: function (e) {
        if (e.keyCode == 13) {
            this.createNewCourse();
        }
    },
    createNewCourse: function () {
        this.collection.create({ Name: this.$el.find('#txtNewCourse').val() });
        this.$el.find('#txtNewCourse').val('');
    }
});

var CourseItem = Backbone.View.extend({
    tagName: 'li',
    className: 'courseli',
    events: {
        'click .remove': 'deleteItem',
        'click .edit': 'showEdit',
        'click': 'courseClicked'
    },

    initialize: function () {
        this.template = _.template($('#course').html()),
        this.model.on('change', this.render, this);
        this.render();
    },
    render: function () {
        var html = this.template(this.model.toJSON());
        this.$el.html('').html(html);
    },

    courseClicked: function () {
        $('#spnStdntCourseName').text('Students Enrolled in ' + this.model.get("Name"));
        Vent.trigger('studentDetails',"how to load student list from here based on courseID...?");
    },

    showEdit: function (event) {
        event.preventDefault();
        Vent.trigger('edit', this.model);
    },
    deleteItem: function () {
        this.model.destroy();
        this.remove();
    }
});

var CourseEdit = Backbone.View.extend({
    el: '#courseEdit',
    events: {
        'click #save': 'save',
        'click #cancel': 'cancel'
    },
    initialize: function () {
        _.bindAll(this, 'render', 'save');
        Vent.on('edit', this.render);
        this.template = _.template($('#courseEditTemplate').html())
    },
    render: function (model) {
        var data, html;
        this.model = model;
        data = this.model.toJSON();
        html = this.template(data);
        this.$el.html(html)
        .show()
        .find('#name')
        .focus();
        this.model.on('error', this.showErrors, this);
    },
    save: function (event) {
        var self = this;
        this.model.save({
            'Name': this.$el.find('#name').val()
        }, {
            success: function () {
                alert('Saved!');
                if (!window.courses.any(function (course) {
                    return course.get('Id') === self.model.get('Id');
                })) {
                    window.courses.add(self.model);
                }
                self.$el.hide();
            }
        });
    },
    cancel: function () {
        this.$el.hide();
    },
    showErrors: function (model, error) {
        var errors = '';
        if (typeof error === 'object') {
            errors = JSON.parse(error.responseText).join('<br/>');
            alert(errors);
        }
        else {
            alert(error);
        }
    }
});

var Vent = _.extend({ }, Backbone.Events);
window.courses = new Courses();
$(function () {
  var edit = new CourseEdit(),
    list = new CourseList({
        collection: window.courses,
        el: '#coursesList'
    });
}); 
```

请查看**CourseItem视图中的****“courseClicked”**函数，它应该在单击课程项目时加载学生列表。

 **现在我在students.js中有我的**学生**模型和视图，如下所示

```
var Student = Backbone.Model.extend({
urlRoot: '/api/students/',
idAttribute: 'Id',
defaults: {
    Id: null
},
validate: function (attr) {
    if (!attr.Name)
        return "Name is required";
}
});

var Students = Backbone.Collection.extend({
model: Student,
url: '/api/students'
}); 
```

**//视图**

```
var StudentList = Backbone.View.extend({
tagName: 'ul',
initialize: function () {
    this.collection.on('reset', this.renderAll, this);
    this.collection.on('add', this.render, this);
    this.collection.fetch({ data: $.param({ courseId: 11 }) });
    _.bindAll(this, 'renderAll', 'render');
    return this;
  Vent.on('studentDetails', this.render);
},
renderAll: function () {
    this.collection.each(this.render);
},
render: function (model) {
    var item = new StudentItem({ model: model });
    this.$el.append(item.el);
},

events: {
    "click    #btnAddStudent": "createNewStudent",
    "keypress #txtNewStudent": "createOnEnter"
},

createOnEnter: function (e) {
    if (e.keyCode == 13) {
        this.createNewStudent();
    }
},
createNewStudent: function () {
    this.collection.create({ Name: this.$el.find('#txtNewStudent').val() });
    this.$el.find('#txtNewStudent').val('');
} 
```

});

```
var StudentItem = Backbone.View.extend({
tagName: 'li',
className: 'studentli',
events: {
    'click .remove': 'deleteItem',
    'click': 'studentClicked'
},

initialize: function () {
    this.template = _.template($('#student').html()),
        this.model.on('change', this.render, this);
    this.render();
},
render: function () {
    var html = this.template(this.model.toJSON());
    this.$el.html('').html(html);
},

studentClicked: function () {
    var Id = this.model.get("Id");
},

deleteItem: function () {
    this.model.destroy();
    this.remove();
} 
```

});

```
window.students = new Students();
$(function () {
   var studentDetails = new StudentList({
        collection: window.students,
        el: '#studentsList'
    });      
}); 
```

所以在 document.ready 我有**studentDetails**变量，它加载学生列表。这是我现在的问题，我已经通过在 fetch 中传递一些硬代码参数来加载学生列表，如下所示

```
 this.collection.fetch({ data: $.param({ courseId: 11 }) }); 
```

但我需要展示的是，当页面加载时，课程列表视图中第一门课程的学生列表，以及在稍后阶段，点击的每个课程项目的学生列表。为此，如果你记得course.js 中“CourseItem”视图中的“courseClicked”函数，我使用过

```
 Vent.trigger('studentDetails',"how to load student list from here based on courseID...?"); 
```

studentDetails 是我在students.js中初始化的var（在上面的代码中），如下所示

```
window.students = new Students();
$(function () {
var studentDetails = new StudentList({
    collection: window.students,
    el: '#studentsList'
});      
}); 
```

因此，当我触发 studentDetails 时，我肯定需要我的 courseClicked 函数中的学生模型，这在该上下文中不可用。我相信你们从上面的解释中理解了我的问题。那么我该如何解决这个问题......？我遵循的方法是否错误..？任何好的选择，需要建议。希望问题中没有太多噪音。

**编辑**

```
var CourseList = Backbone.View.extend({
tagName: 'ul',
initialize: function () {
this.students = new Students();
var studentList = new StudentList({
  collection: this.students,
  el: '#studentsList'
});

this.collection.on('reset', this.renderAll, this);
this.collection.on('add', this.render, this);
this.collection.fetch();
_.bindAll(this, 'renderAll', 'render');
return this;
},

renderAll: function () {
    this.collection.each(this.render);
    $('#spnStdntCourseName').text('Students Enrolled in ' +    this.collection.at(0).get("Name"));
    this.students.fetch({ data: $.param({ courseId: this.collection.at(0).get("Id") }) });
},
render: function (model) {
this.$el.html("");
var item = new CourseItem({ model: model, students: this.students});
this.$el.append(item.el);   
}
}) 
```

我做了以下更改

1.students in collection to this.students(inside initialize of "CourseList" view) 在下面的代码

```
initialize: function () {
    this.students = new Students();
    var studentList = new StudentList({
        collection: this.students,
        el: '#studentsList'
    }); 
```

2.我在renderAll函数而不是render函数中获取了学生，因为对于获取的每个课程项目，学生也被获取。我的意思是如果有6门课程，我可以在集合中看到学生0课程6次

```
 renderAll: function () {
    this.collection.each(this.render);
    $('#spnStdntCourseName').text('Students Enrolled in ' +    this.collection.at(0).get("Name"));
    this.students.fetch({ data: $.param({ courseId: this.collection.at(0).get("Id") }) }); 
```

**子问题**

在“CourseList”中，我们有如下初始化函数

```
 initialize: function () {
    this.students = new Students();
    var studentList = new StudentList({
        collection: this.students,
        el: '#studentsList'
    }); 
```

学生名单如下

```
<div id="studentsList" class="box">
<div class="box-head">
    <h2 class="left">
        <span id="spnStdntCourseName"></span>
    </h2>
</div>
<div>
 <input type="text" id="txtNewStudent" placeholder="Add New Student" />
    <button id = "btnAddStudent">+ Add</button>    
</div>       
</div> 
```

每当我这样做时。$el.html("") 在**StudentList**视图的渲染函数中，如下所示

```
var StudentList = Backbone.View.extend({
tagName: 'ul',

render: function (model) {
this.$el.html("");
    var item = new StudentItem({ model: model });
    this.$el.append(item.el);
},
...... 
```

我松开了studentsList el中的按钮和文本框元素，当我在浏览器中查看我提到的tagName的源代码时没有显示ul，但我确实看到li是studentItem视图的tagName。你能说我是什么做错事

感谢我们的耐心

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T13:54:39.143

首先，您想让`CourseList`视图跟踪`Students`集合以及`StudentList`. 该`Students`集合将被传递到每个`CourseItem`视图以获取。渲染完 all 后`CourseItem`，它会告诉`Students`集合获取第一门课程的学生。

```
var CourseList = Backbone.View.extend({
  tagName: 'ul',
  initialize: function () {
    this.students = new Students();
    var studentList = new StudentList({
      collection: students,
      el: '#studentsList'
    });

    this.collection.on('reset', this.renderAll, this);
    this.collection.on('add', this.render, this);
    this.collection.fetch();
    _.bindAll(this, 'renderAll', 'render');
    return this;
  },

  render: function (model) {
    this.$el.html("");
    var item = new CourseItem({ model: model, students: this.students});
    this.$el.append(item.el);
    this.students.fetch({ data: $.param({ courseId: 0 }) }); // fetch the first
  },
  ...
}) 
```

将`CourseItem`存储`Students`集合，并在被点击时使用其模型的 id 获取正确的学生。

```
var CourseItem = Backbone.View.extend({
  ...
  initialize: function() {
    this.students = this.options.students;
  },
  ...
  courseClicked: function () {  
    $('#spnStdntCourseName').text('Students Enrolled in ' + this.model.get("Name"));

    var courseId = this.model.id;
    this.students.fetch({ data: $.param({ courseId: courseId }) });
  },
  ...
}) 
```

在`StudentList`视图中，您不要让它自己获取。

```
var StudentList = Backbone.View.extend({
  tagName: 'ul',
  initialize: function () {
      this.collection.on('reset', this.renderAll, this);
      this.collection.on('add', this.render, this);
      _.bindAll(this, 'renderAll', 'render');
      return this;
  },
  ...

  render: function() {
    this.$el.html(""); // Reset the view for new students
    var item = new StudentItem({ model: model });
    this.$el.append(item.el);
  }
}) 
```

然后在你的主脚本中：

```
window.courses = new Courses();

$(function () {
   var courseList = new CourseList({
        collection: window.course,
        el: '#courseList'
    });
}); 
```

免责声明：未经测试的代码。**

# visual-studio-2010 - 我的电脑没有 DVD-ROM 驱动器，如果我从 MSDN 下载，是否可以使用 Visual Studio 2010？

> ID：10959273
> 
> 赞同：0
> 
> 时间：2012-06-09T07:35:05.373
> 
> 标签：visual-studio-2010

我有一台没有 DVD-ROM 驱动器的计算机，如果我从 MSDN 下载它，是否可以使用 Visual Studio 2010？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:42:36.950

是的。如果您下载了 ISO，则可以使用[DAEMON Tools Lite](http://www.daemon-tools.cc/eng/products/dtLite)或其他 ISO 挂载软件来挂载 ISO 并安装 Visual Studio。您还可以使用[7-Zip](http://www.7-zip.org/download.html)从 ISO 中提取所有文件并从中进行安装。

# javascript - 如何通过javascript从模板中获取元素？

> ID：10959280
> 
> 赞同：3
> 
> 时间：2012-06-09T07:36:25.347
> 
> 标签：javascript, html, templates

我不知道如何通过 javascript 从模板中获取 DOM 元素的好方法。

示例模板：

```
<script id = "template" type="text/template">
    <div>text1</div>
    <div>text2</div>
    <div>text3</div>
</script> 
```

例如，我想用“text2”获取 div

我知道有一些方法，它们都是不好的：

1.  向所有元素添加“类”——它破坏了语义（为 CSS 创建的类）。在大型项目中，您必须为类使用很长的名称，这非常不方便。

2.  通过他的数字（索引）获取元素 - 添加新元素时，您必须在代码中重写旧数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:46:47.647

我看到了几个选项：

1.  如果不想使用`class`，可以使用[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)。

2.  假设您加载模板*一次*，然后根据需要复制其内容，您可以将`id`值放在模板中的元素上，然后在克隆它们并将它们添加到文档时将其删除（因此您最终不会`id`在元素的多个副本，这将是无效的并且可能会适得其反）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:40:57.887

也许您还可以根据需要创建任意数量的模板。每个 div 一个。如果您需要一次获取每个 div，则必须为它们设置 id...当然，您也可以浏览脚本元素中的 dom 以找到您感兴趣的那个...

回家这有帮助

问候

咪咪

# .net - Windows 8 的出现如何影响 Windows 窗体的使用？

> ID：10959281
> 
> 赞同：-1
> 
> 时间：2012-06-09T07:36:26.747
> 
> 标签：.net, winforms

我发现，Windows 8 将是高度基于 HTML5 + Javascript 的 Metro 应用程序的平台，而常规的基于桌面的应用程序（Windows 窗体）可以在 Chrome 模式下运行，这对用户来说是一种消极和沮丧。我无法弄清楚 Windows 窗体的未来是什么。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:15:44.457

我建议您回顾一下 MFC、ActiveX、WinForms、WPF 的时代。这会给你一些关于未来的想法。

您还可以看到 Telerik、Infragistics 和 DevExpress 等主要供应商的反应。

不可能回答你的问题，因为只有微软有答案，甚至他们也不清楚。

# c++ - 在 GDB 中调试多线程服务器 - 查找每个线程的状态。执行时继续并停止

> ID：10959289
> 
> 赞同：2
> 
> 时间：2012-06-09T07:38:21.957
> 
> 标签：c++, gdb, pthreads

我使用 gdb 附加到我的多线程应用程序，然后在该类型之后`cont`继续执行。

*   有什么方法可以随时在`cont`gdb 状态下停止执行并检查每个线程在做什么？
*   如何检查每个线程的状态并获取每个线程的执行行号？（命令）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:46:41.093

这就是我所做的，（取自[这里](http://therobotsbrain.blogspot.com.au/2011/02/poor-mans-sampling-profiler-for-live.html)）

创建一个小 gdb 脚本`stackdumper.gdb`来转储所有线程的堆栈跟踪：

```
thread apply all backtrace 
```

然后反复附加 gdb 并运行转储程序：

```
for i in $(seq 1 10) ; do
  gdb -batch -x stackdumper.gdb ./a.out 123456 > stack.$i
  sleep 10
done 
```

`./a.out`您感兴趣的二进制文件在哪里，而 123456 是 PID。

调整睡眠以满足您的采样需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T08:25:40.173

`thread apply all bt`

或者

`info threads`

`t <threadid from above trace >` 其次是

`where`或者`bt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T07:41:34.547

要获取所有已停止线程的回溯，请键入

```
thread apply all bt 
```

命令（输出与在 MacOSX 崩溃报告框中看到的完全相同）。

通常线程在 gdb 中同时停止。

参考： http: [//www.delorie.com/gnu/docs/gdb/gdb_40.html](http://www.delorie.com/gnu/docs/gdb/gdb_40.html)

这里是关于“全停”模式的，这是默认的：http: [//sourceware.org/gdb/onlinedocs/gdb/All_002dStop-Mode.html](http://sourceware.org/gdb/onlinedocs/gdb/All_002dStop-Mode.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T07:43:39.020

> 这是在 cont gdb 状态下随时停止执行并检查每个线程做什么的任何方法吗

如果您询问如何检查线程在没有`gdb`的情况下执行的操作，您可以运行
`pstask <pid-of-your application>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T08:34:52.277

是“pstack”吗，因为我认为“pstask”不是linux中的任何命令，如果是，请提供更多信息

# php - 如何使php包含网站中的html页面

> ID：10959291
> 
> 赞同：0
> 
> 时间：2012-06-09T07:38:47.667
> 
> 标签：php, html

我是第一个承认在 PHP 编码方面我是绿色的人。然而很多年前，一位同事给了我一个模式，用于将 PHP 与 HTML 结合起来创建网页。现在，我正在寻找改造网站，但我想知道是否有更好的方法来编写它？目前，我有一个 index.php 页面，其布局类似于：

```
<?php 

if (! isset($HTTP_GET_VARS['content']) || ! $HTTP_GET_VARS['content']){
  $content="home";
}
else 
  $content=$HTTP_GET_VARS['content'];

//1
 if ($content == "home"){
    $page_title="Page Title";
    $keywords="Keywords found in Meta";
    $desc="Description found in Meta";
    $style="scripts/style.css";
    $popupjs="none";
    $storbutnjs="none";
    $retreatjs="none";
    $rolloverjs="scripts/rolloverjs.js";
    $readform_chkjs="none";
    $logo="req-files/logo.html";
    $sidebar="req-files/sidebar.html";
    $main="home.html";
}

//2
if ($content == "about"){
    $page_title="Page Title";
    $keywords="Keywords found in Meta";
    $desc="Description found in Meta";
    $style="scripts/style.css";
    $popupjs="none";
    $storbutnjs="none";
    $retreatjs="none";
    $rolloverjs="none";
    $readform_chkjs="none";
    $logo="req-files/logo.html";
    $sidebar="req-files/sidebar.html";
    $main="about.html";
}

include ("req-files/head.html");
include ($logo);
include ("req-files/navbar.html");
include ($sidebar);
include ($main);
/*include ("scripts/analytics.js");*/
include ("req-files/footer.html");

?> 
```

因此，如果一个人键入`http://yourwebsite.com/?content=about`他们会在浏览器中获得整个 About 页面，其中包含所有必需的元、页眉、侧边栏、页脚、javascript、css、分析等。这些必需的部分中的每一个都是 html 文件，有些可能有 php 脚本对于一些 $ 标注，如页面标题、关键字等。

我的问题之一是当我的客户想要将 '($content == " ")' 之一的名称更改为其他名称时。首先，我可以更改变量，但是我必须将旧名称重定向到新名称，这样我们就不会丢失页面排名。

例如，`http://yourwebsite.com/?content=about`需要重定向到`http://yourwebsite.com/?content=about-us`.

最终，客户端会将所有或大部分页面重定向为更直接，`http://yourwebsite.com/about-us`. 相信当网站变成WordPress网站时，这将使重建更加顺利。

那么，有没有更好的方法来写这个？有没有更好的方法来重定向 URL？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:11:39.787

$HTTP_GET_VARS 已弃用。请尝试从官方文档中学习 PHP。

为了回答你的问题，另一个常用的系统是这样的：

文件：include.php

```
<?php
function topbanner($title) { ?>
  <!doctype html>
  <html>
  <head>
  <title><?php echo $title; ?></title>
  <script type="text/javascript" src="jquery.js"></script>
  </head>
  <body>
  <header>
  Site name, Logo, etc.
  <header>
<?php }

function footer() { ?>
  <footer>
  &copy;2012\. Your company name. Best viewed in Mozilla Firefox.
  </footer>
  </body>
  </html>
<?php } 
```

现在，像往常一样创建 html 页面，但要确保扩展名是 .php。在这些页面中，执行此操作。

```
<?php require_once('include.php'); topbanner("Title of this page"); ?>
<h3>Welcome to this site</h3>
<p>Content content content</p>
<img src="image.jpg" />
<?php footer(); ?> 
```

这适用于简单页面。如果您需要更复杂的设置，请按照 fork-cms 的样式使用 .htacess 重定向页面。无论哪种方式，页面被重命名意味着它们失去了索引。为什么页面需要经常重命名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:35:55.890

[http://php.net/manual/de/function.file-get-contents.php](http://php.net/manual/de/function.file-get-contents.php) 这样您就可以在 php (var) 中包含 html 站点

`$page = file-get-contents('myHTMLSite.html');`

和

`str_replace('{header}', $header, $page);`

# python - Trac 插件开发：如何从插件中访问 trac.ini 项

> ID：10959292
> 
> 赞同：0
> 
> 时间：2012-06-09T07:39:01.767
> 
> 标签：python, plugins, trac

我创建了一个运行良好的插件！

现在我需要从该插件访问 trac.ini 中的一些值

该插件正在实施`ITemplateStreamFilter`

方法是`def filter_stream(self, req, method, filename, stream, data):`

如何`key`从该方法中获取 trac.ini 中的某些内容的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:59:59.697

我认为您可以为此目的使用配置类[config.py](http://trac.edgewall.org/browser/trunk/trac/config.py)那里实现 get 方法：

```
 def get(self, section, key, default=''):
     return self[section].get(key, default) 
```

其中 section 是配置文件中的部分名称，key 是选项。

# ubuntu - 如何在 Ubuntu 上安装驱动程序 (ath9k) 时更改内核配置

> ID：10959295
> 
> 赞同：0
> 
> 时间：2012-06-09T07:39:57.973
> 
> 标签：ubuntu, configuration, installation, kernel, driver

我是一个新手，试图用 Atheros AR9170 芯片组为我的无线网络接口卡安装 ath9k。安装程序说，在安装完兼容无线稳定版本后，在编译内核时转到 menuconfig 并启用 Networking（cfg80211、mac80211）和 Driver（atheros 802.11n 支持）下的一些东西。我确实去了 usr/src/(linux kernel header in use)/ 并更改了这些配置。接下来我需要做什么？这些配置是如何体现的？当我连接我的硬件时，它还没有被识别/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:59:51.243

你需要重建你的内核。看看[这里](http://www.howtogeek.com/howto/ubuntu/how-to-customize-your-ubuntu-kernel/)。特地绕着说的那一行`make-kpkg clean`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T22:13:35.253

如果您使用的是 Ubuntu（根据标签猜测），您应该已经在内核中启用了 ath9k，以及它的依赖项（例如 mac80211）。如果您需要 Ubuntu 内核中没有的新功能或错误修复，您只需要 compile-wireless（现在重命名为 backports）。但即便如此，您也不应该需要重新编译内核。它应该具有您需要的配置。反向移植的一个重要目标是避免在升级某些驱动程序时重新编译供应商内核。

您可能遇到了其他问题，例如缺少 AR9170 固件，因此您决定需要安装驱动程序。或者可能是 Windows 的心态——新设备需要安装新的驱动程序。如果没有包含相关软件版本、您观察到的内容、您的期望以及您所做的事情的详细报告，就很难说。引用文档时，请准确引用。

# django - 扩展 UserCreationForm 时排除密码

> ID：10959296
> 
> 赞同：2
> 
> 时间：2012-06-09T07:40:13.310
> 
> 标签：django

我想创建一个视图，用户可以在其中更改他的用户对象的属性：名字、姓氏和电子邮件地址。Django 有一个内置的 UserCreationForm 用于创建用户。我已经有一个扩展版本，其中还包括电子邮件、名字和姓氏。现在我正在尝试将其扩展为*不*包括密码和用户名。

```
from django.contrib.auth.forms import UserCreationForm
class ExtendedUserCreationForm(UserCreationForm):
    class Meta:
        model = User
        fields = ('username', 'password1', 'password2', 
                  'email', "first_name", 'last_name' )

class UserEditForm(ExtendedUserCreationForm):
    class Meta:
        model = User
        exclude = ('username', 'password1', 'password2') 
```

我正在寻找的 UserEditForm 当然不能创建新实例，但它只会用于编辑现有实例：

```
form = UserEditForm(instance=request.user) 
```

但是，仍会显示用户名字段和密码字段。我怎样才能排除这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-23T11:27:11.043

您可以像这样删除表单初始化中的 password2 字段：

```
class MyUserCreationForm(UserCreationForm):

    def __init__(self, *args, **kargs):
        super(MyUserCreationForm, self).__init__(*args, **kargs)
        del self.fields['password2'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:49:09.037

[看看你的](https://github.com/django/django/blob/master/django/contrib/auth/forms.py#L48)子类不是一个坏主意。`password1`和`password2`字段直接在表单中定义，而不是在模型中。所以`exclude`并且`fields`不会对他们产生影响。`ModelForm`按照@MatthewSchinckel 的建议，自己制作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-29T15:33:35.783

认为这会给出这个想法......

```
class RegistrationForm(UserCreationForm):
    email = forms.EmailField(required=True)
    #first_name = forms.CharField(required=True)
    #last_name = forms.CharField(required=True)
    username = forms.CharField (required=True)

class Meta:
    model = User
    fields = ('first_name','last_name','username','email', 'password1', 'password2')

def __init__ (self, *args, **kwargs):
    super(RegistrationForm,self).__init__(*args, **kwargs)
    #remove what you like...
    self.fields.pop ('first_name')
    self.fields.pop ('last_name')
    self.fields.pop ('password1')
    self.fields.pop ('password2') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T07:44:31.037

为什么不只使用 a`ModelForm`并排除您不想要的字段？这似乎是一个更简单的解决方案。

# ios - 字节数组显示值，但 ImgView.Image 在 ios 中显示 null

> ID：10959297
> 
> 赞同：0
> 
> 时间：2012-06-09T07:40:25.360
> 
> 标签：ios, mono, xamarin.ios, uiimageview, uiimage

我正在尝试`UIImageView`通过此方法显示图像，`NSData.FromArray()`但它给出了一个空引用异常，我的代码如下：

```
Byte _imgData = GetRawData(_imgPath);  // this method get the byte array of size ([131072]) 
NSData _data = NSData.FromArray(_imgData);
ImgView.Image = UIImage.LoadFromData(_data) //in this _data shows the byte array value but the ImgView.Image shows null 
```

字节数组获取 RLE 压缩数据。

```
ImgView.Image = UIImage.LoadFromData(_data) 
```

_data 是 RLE 压缩字节数据我不知道如何将其转换为 IOS 支持的图像格式。它给出了一个错误，有什么解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:47:11.817

`UIImage.Load*``null`如果数据（无论是`NSData`文件名还是文件名）无效和/或格式对于`UIImage`.

您可能需要使用较低级别的 API 来提供有关任何*RAW*数据的一些数据（例如宽度、高度、深度）。完成后，您可以在其上构建一个`UIImage`。

# wcf - WCF net.tcp 绑定服务消耗

> ID：10959298
> 
> 赞同：0
> 
> 时间：2012-06-09T07:40:33.370
> 
> 标签：wcf

我有以下 WCF 客户端代码来使用 WCF 服务：

```
static void Main(string[] args)
        {
            IService1 vService;
            NetTcpBinding b = new NetTcpBinding();
            b.Security.Mode = SecurityMode.Message;
            b.Security.Message.ClientCredentialType = MessageCredentialType.Windows;

            EndpointAddress vEndPoint = new EndpointAddress("net.tcp://115.127.1.226/myservice/");
            ChannelFactory<IService1> cf = new ChannelFactory<IService1>(b, vEndPoint);

            vService = cf.CreateChannel();
            try
            {
                Console.WriteLine("Result from the system " + vService.HellowWorld());
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error Occured while connection establish to " + vEndPoint.Uri.ToString());
            }
            Console.ReadKey();

        } 
```

当我在本地运行它时，它运行成功。但是当我尝试远程使用我的 WCF 服务时，它发生了一个异常，任何人都建议我如何解决这个问题？

我的异常消息是：

```
Could not connect to net.tcp://115.127.1.226/myservice/. The connection attempt lasted for a time span of 00:00:21.0282028\. TCP error code 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond
115.127.1.226:808. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T00:47:39.553

尝试使用 ServiceBusEnvironment.SystemConnectivity.Mode = ConnectivityMode.Http;

# javascript - 多个下拉搜索替换字符串

> ID：10959301
> 
> 赞同：0
> 
> 时间：2012-06-09T07:40:55.533
> 
> 标签：javascript, html

我目前正在尝试基于多个下拉菜单创建搜索。

我使用的片段如下：

```
 <script type="text/javascript" charset="utf-8">
        function add_criteria (el) {
            search = document.getElementById('search_criteria');
            search.value = document.getElementById('type').value + " " + document.getElementById('color').value;}
    </script>

    <form role="search" method="get" id="searchform" action="search.html?submit=Go&_nkw">
        <label class="screen-reader-text" for="s">Search for:</label>
    Type
    <select name='type' id='type' class='postform' onchange="add_criteria(this);">
      <option value='' selected='selected'>All</option>
      <option class="level-0" value="dog">Dog</option>
      <option class="level-0" value="cat">Cat</option>
    </select> 

    Color
    <select name='color' id='color' class='postform' onchange="add_criteria(this);">
      <option value='' selected='selected'>All</option>
      <option class="level-0" value="red">red</option>
      <option class="level-0" value="white">white</option>
      <option class="level-0" value="green">green</option>
    </select> 
       <input type="submit" id="searchsubmit" value="Search" />
      </div>
    </form> 
```

然而结果是不正确的——我想要实现的是以这种方式显示的结果：

```
 http://mystore.com/search.html?submit=Go&_nkw=medium+red 
```

有没有人知道如何让这个替换刺固定并正常工作？

一些建议将不胜感激 - 非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:20:31.453

好吧，你只需要一个简单的技巧。首先从`<select>`标签中取出这些标签，并用名称和（这就是元素的工作方式）`<form>`制作两个假的：`<input>``submit``_nkw`[`<form>`](http://www.w3schools.com/tags/tag_form.asp)

```
<!DOCTYPE html>
<html>
<body>

<script type="text/javascript" charset="utf-8">
        function add_criteria (el) {
            search = document.getElementById('search_criteria');
            search.value = document.getElementById('type').value + " " + document.getElementById('color').value;}
    </script>

      <div>
        <select name='type' id='type' class='postform' onchange="add_criteria(this);">
            <option value='' selected='selected'>All</option>
            <option class="level-0" value="dog">Dog</option>
            <option class="level-0" value="cat">Cat</option>
        </select> 

        Color
        <select name='color' id='color' class='postform' onchange="add_criteria(this);">
            <option value='' selected='selected'>All</option>
            <option class="level-0" value="red">red</option>
            <option class="level-0" value="white">white</option>
            <option class="level-0" value="green">green</option>
        </select>
        </br>
        <form role="search" method="get" id="searchform" action="search.html">
            <input name="submit" value="Go" style="visibility:hidden;"></label>
            <input id="search_criteria" name="_nkw" value="" style="visibility:hidden;"></label>
            <input type="submit" id="searchsubmit" value="Search" />
        </form>
      </div>

</body>
</html> 
```

# ruby-on-rails-3 - 如何在 Rails 中测试/提取 Mail::Message 的不同 mime 部分

> ID：10959304
> 
> 赞同：1
> 
> 时间：2012-06-09T07:41:11.987
> 
> 标签：ruby-on-rails-3, testing

在 Rails 3 中测试多部分邮件消息时，是否有内置方法来提取不同部分（文本/html、文本/纯文本等）然后测试这些

我已经快速编写了一些东西以在我的测试中使用：[https](https://gist.github.com/2899995) ://gist.github.com/2899995 ，但如果存在的话，我更愿意使用现有的 Rails 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T22:06:57.090

您可以使用`email.html_part`and`email.text_part`来获取两个部分，`email.html_part.body`and`email.text_part.body`来获取文本。您还可以验证电子邮件是多部分的`email.multipart?`

该`email.parts`方法将为您提供消息的所有部分： [https ://github.com/mikel/mail/blob/master/lib/mail/message.rb](https://github.com/mikel/mail/blob/master/lib/mail/message.rb)

# html - 刷新 div 标签

> ID：10959308
> 
> 赞同：1
> 
> 时间：2012-06-09T07:41:38.310
> 
> 标签：html, refresh

我有我的 index.php 来加载另一个页面（playing.php）并刷新该加载页面的内容。它完成了一段时间的工作，然后页面变为空白，然后返回页面内容。不确定代码发生了什么链接：[移动网站](http://m.tamilmelisai.com) 请右键单击源代码

```
(function($){
$(document).ready(function()
{
    $.ajaxSetup(
    {
        cache: false,
        beforeSend: function() {
            $('#content').hide();
            $('#loading').show();
        },
        complete: function() {
            $('#loading').hide();
            $('#content').show();
        },
        success: function() {
            $('#loading').hide();
            $('#content').show();
        }
    });
    var $container = $("#content");
    $container.load("playing.php");
    var refreshId = setInterval(function()
    {
        $container.load('playing.php');
    }, 40000);
});})(jQuery); 
```

`

并调用内容

```
<div id="wrapper">
<div id="content"></div>
<img src="images/loading.gif" id="loading" alt="loading" style="display:none;" /> 
```

`

# java - Java 泛型 - 需要解释

> ID：10959310
> 
> 赞同：3
> 
> 时间：2012-06-09T07:41:56.383
> 
> 标签：java, generics

我有一个关于 Java 泛型的问题。在下面的代码中，我们将接口 B 参数化为另一种必须实现接口 A 的类型。

这段代码是正确的。问题是：为什么它不适用于以下 list() 方法声明？

```
private <X extends A, Y extends B<X>> List<Y> list() 
```

工作代码：

```
public interface A {
}
public interface B<T extends A> {
}
public class Test {

    private static class AA implements A {}
    private static class BB implements B<AA> {}

    private <R extends A, X extends R, Y extends B<X>> List<Y> list() {
        return null;
    }

    private void test() {
        List<BB> l = list();
    }
} 
```

编辑：我已经修改了代码。现在我们已经通过它可以发出的声音对鸟进行了参数化。问题是为什么 useless_t 是必要的？

```
public class Test {
    public interface Sound {
    }
    public interface Bird<T extends Sound> {
    }

    private static class Quack implements Sound {}
    private static class Duck implements Bird<Quack> {}

    private <useless_t extends Sound, sound_t extends useless_t, bird_t extends Bird<sound_t>> List<bird_t> list() {
            return null;
    }

    private void test() {
            List<Duck> l = list();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:26:23.057

我的 Eclipse IDE 不会按原样编译您的任何代码示例。但是当给出额外的类型提示时，它们会编译。在第二个示例中，无论有无 type parameter `useless_t`，以下行都不会为我编译：

```
List<Duck> l = list(); 
```

但以下确实为我编译：

```
List<Duck> l = this.<Sound, Quack, Duck> list(); 
```

排除因素后，以下内容也将`useless_t`编译：

```
List<Duck> l = this.<Quack, Duck> list(); 
```

所以这基本上是编译器没有正确获取类型参数的问题，你需要明确地给出类型。

**更新：**如果你真的遇到了一个添加`useless_t`了不同的程序，那么你处于不安全的地形，并且依赖于未指定的编译器行为。

您遇到了不同编译器行为不同的问题，即类型推断。JLS 并不完全清楚编译器必须在哪里推断类型，以及在哪里必须拒绝推断，因此这里有回旋余地。不同版本的 Eclipse 编译器和不同版本的 javac 在推断类型的位置不同。对于 javac，即使比较不同的 1.5.0_x 版本也是如此，并且 Eclipse 编译器通常可以推断出比 javac 更多的信息。

您应该只依赖所有常见编译器都成功的类型推断，否则会给出类型提示。有时，这就像引入临时变量一样容易，但有时（如您的示例中）您必须使用`var.<Types>method()`语法。

**关于评论：** *如果我想让 Duck.getSound() 方法返回 Quack，而不是使用泛型返回 Sound，该怎么办？*

假设 Bird 接口有以下方法：

```
public interface Bird<T extends Sound> {
    T getSound();
} 
```

然后你可以像这样实现它：

```
private static class Duck implements Bird<Quack> {
    public Quack getSound() { return new Quack(); }
} 
```

这是泛型的一个用例——允许实现指定具体类型，这样即使超类也可以使用该类型。（在不知道 T 的具体类型的情况下，Bird 接口可以有一个`setSound(T)`，或者用 T 做其他事情。）

如果调用者只知道实例是 type `Bird<? extends Sound>`，他将不得不像这样调用 getSound ：

```
Sound birdSound = bird.getSound(); 
```

如果调用者知道`Quack`，他可以进行`instanceof`测试。但是如果调用者知道这只鸟真的是 a `Bird<Quack>`，甚至那是 a `Duck`，那么他可以写这个并且它可以根据需要编译：

```
Quack birdSound = bird.getSound(); 
```

但要注意：在接口或超类中生成过多的类型会带来系统过于复杂的风险。正如 Slanec 所写，*重新思考你的真实设计，看看是否真的需要有这么多泛型。*

我曾经走得太远，最终得到了一个接口层次结构和两个实现层次结构，基于这样的接口：

```
interface Tree<N extends Node<N>,
               T extends Tree<N, T>> { ... }

interface SearchableTree<N extends SearchableNode<N>,
                         S extends Searcher<N>,
                         T extends SearchableTree<N, S, T>>
    extends Tree<N, T> { ... } 
```

我不建议效仿那个例子。;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:02:38.360

我想说：AA 实现了 A，通过定义 List<AA> l = list() 你希望它扩展 B<X> 而它没有。无论如何，您会看到编写这样的代码很容易混淆。这太复杂了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T07:26:45.203

您对 Java 泛型有一点误解。要记住的事情，这是一个微妙的事情，`List<Y>`不是关于列表的内容，而是对列表本身的修改。

让我们稍微推断一下；说我有`interface Animal`和。（随着我们的进展，我将发明更多的类和接口。）现在，如果我声明一个将动物返回为的方法，则以下代码没有任何问题：`interface Dog extends Animal``interface Cat extends Animal``List<Animal> createList()`

```
List<Animal> litter = createList();
Cat tabby = new Tabby();
litter.add(tabby);
Dog poodle = new Poodle();
litter.add(poodle); 
```

那是因为狗是动物，猫是动物；add on 类型的方法签名`List<Animal>`是`add(Animal)`；正如预期的那样，我们可以调用`add`任何有效的 Animal 实例。但是类型参数 on`List`并没有修改或限制列表的内容，它修改了列表本身的类型；“猫名单”不是“动物名单”，“狗名单”也不是。即使该`createLitter()`方法实际上返回的 a`new ArrayList<Animal>()`只包含 的实例`Parrot`，上面的代码也没有问题。但是，您不能做的是“缩小”列表的类型。例如，这是一个编译错误：

```
List<Bird> birds = createList(); // does not compile 
```

想象一下，如果它被允许，并`createList`返回一个包含我们虎斑猫的“动物列表”；以下将导致类转换异常：

```
Bird leaderOfTheFlock = birds.get(0); 
```

您也不能“扩大”列表的类型。想象一下，如果有可能：

```
List<Object> things = createList(); // does not compile 
```

也不允许这样做的原因是代码现在可以添加一个`new Integer(0)`-`things`因为 an`Integer`是一个`Object`. 显然这也不是我们想要的，出于同样的原因——“动物列表”不是“对象列表”。类型参数“Animal”`List<Animal>`修改了列表本身的类型，我们正在讨论两种不同类型的列表。这将我们引向这一点的第一个结果——泛型类型不遵循继承（is-a）层次结构。

如果不知道更多你想做什么，就很难从这里开始并保持相关性。我并不是要严厉，但看起来你开始在你的代码中使用泛型，看看是否有什么能起作用。我在泛型上苦苦挣扎多年。即使在浏览了一个解释这个微妙点的博客之后，我也不得不重新创建上述的相当多的变体来强化课程，寻找各种方法，如果我违反规则，我最终会出现类转换异常。您的问题的解决方案可能是代​​码的其他部分没有很好地定义您尝试引入的严格类型系统，您看到的泛型问题只是其中的一个症状。尽量减少泛型，更多地依赖组合和继承。我仍然偶尔会通过跳出通用的深端来击中自己的脚。尝试记住泛型的重点不是消除强制转换，而是使编译器可以使用类型信息，以帮助验证代码如何处理类型的正确性，这也很有帮助。或者换句话说，它将运行时错误（类转换）转换为源代码/编译时错误，因此请务必牢记编译时所拥有的类型信息之间的区别（即使使用泛型也是有限的） ) 以及您在运行时拥有的类型信息（即实例的完整类型信息）。

# vb.net - VB.NET MDI Child 设置其他子属性

> ID：10959315
> 
> 赞同：2
> 
> 时间：2012-06-09T07:43:39.040
> 
> 标签：vb.net, mdichild, mdiparent

我希望你能帮助我的麻烦。我有 1 个表单作为父 MDI (frmParent.vb) 并有 2 个子表单 (frmChild01.vb & frmChild02.vb)。

父表单的代码如下。

```
Private Sub OpenChild01ToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OpenChild01ToolStripMenuItem.Click
    Dim child01 As frmChild01

    child01 = New frmChild01()
    child01.MdiParent = Me
    child01.Show()
End Sub

Private Sub OpenChild02ToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OpenChild02ToolStripMenuItem.Click
    Dim child02 As frmChild02

    child02 = New frmChild02()
    child02.MdiParent = Me
    child02.Show()
End Sub 
```

frmChild01 有 button1
frmChild02 有 label1

我的问题是当用户单击 button1 时如何设置 label1.text
提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:01:24.757

有很多创造性的方法可以做到这一点；但最终您需要在 Child1 和 Child2 之间提供通信渠道。

最直接的方法是 to `Pass a Reference`of `frmChild02`to `frmChild01`。您需要`label1`公开`frmChidl02`才能访问它（或者您可以提供一个公共方法来处理设置。

只有*在*创建时引用了 frmChild02才有效`frmChild01`。由于您似乎有单独的按钮来启动这些表单，因此可能会更复杂。处理此问题的一种方法是使用事件来处理通信。让您的 Mdi Parent 侦听/引发来自子表单的事件。因此，当您单击按钮时，`frmChild01`让您的 Mdi 父级监听该事件并引发一个名为“ButtonClickInForm1”或类似的新事件。已`frmChild02`订阅该事件。如果有一个实例，`frmChild02`它将响应按钮单击并更新它的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:27:43.833

您需要检查 ChildForm02 是否已加载。如果不是，则需要先加载它，然后才能设置其标签的文本属性。它可能看起来像这样：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    If MDIParent1.ChildForm2 Is Nothing OrElse MDIParent1.ChildForm2.Visible = False Then
        MDIParent1.ChildForm2 = New Form2
        MDIParent1.ChildForm2.MdiParent = MDIParent1
        MDIParent1.ChildForm2.Text = "Window "
        MDIParent1.ChildForm2.Show()
    End If
    MDIParent1.ChildForm2.Label1.Text = "your text here"

End Sub 
```

您还需要在 MdiParent 表单中将子表单声明为 Public，以便您可以在解决方案中的任何位置访问它。

```
Public ChildForm1 As Form1
Public ChildForm2 As Form2 
```

# iphone - 为什么我的 UITableView 不能加载 detailView？- 不调用 loadView 和 viewDidLoad

> ID：10959319
> 
> 赞同：0
> 
> 时间：2012-06-09T07:44:31.627
> 
> 标签：iphone, objective-c, uitableview, uiviewcontroller, detailview

我有一个关于为什么我的 UITableView 不会加载 detailView 的问题......我以前用界面构建器做过，但现在我只是想纯粹地以编程方式来做。

在我的 tableView.h 中：

```
@property (strong, nonatomic) RLCASearchDetailViewControllerViewController *searchDetailViewController; 
```

在我的 tableView.m 中：

```
@synthesize searchDetailViewController = _searchDetailViewController;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (!self.searchDetailViewController) 
    {

        self.searchDetailViewController = [[RLCASearchDetailViewControllerViewController alloc] initWithNibName:@"" bundle:nil];

    }

    SearchItem *item = [ content objectAtIndex:indexPath.row ];

    [self.navigationController pushViewController:self.searchDetailViewController animated:YES];

    self.searchDetailViewController.detailItem = item;

} 
```

顺便说一句，我尝试将 initWithNibName: 值设为 nil，空字符串如上，甚至 @"RLCASearchDetailViewControllerViewController"。没有任何作用...

在我的 RLCASearchDetailViewControllerViewController.h 中：

```
@interface RLCASearchDetailViewControllerViewController : UIViewController
{

    SearchItem *detailItem;

}

@property (strong, nonatomic) id detailItem;

@end 
```

在我的 RLCASearchDetailViewControllerViewController.m 中：

```
@synthesize detailItem = _detailItem;

- (void)setDetailItem:(SearchItem*)newDetailItem
{
    NSLog( @"GETS HERE" );
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) 
    {

       NSLog( @"GETS HERE" );

    }

}

- (void)loadView
{
    [super loadView];
    // If you create your views manually, you MUST override this method and use it to create your views.
    // If you use Interface Builder to create your views, then you must NOT override this method.

    NSLog( @"DOES NOT GET HERE" );

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSLog( @"DOES NOT GET HERE" );
} 
```

如上所示，当我实现了一些调试打印时......它在理论上做了它应该做的事情，但由于某种原因没有加载视图。当单击表格单元格时，当视图应更改为子视图时，这会在 GUI 中体现出来。

我究竟做错了什么？请帮助......这让我发疯了，我已经在互联网上翻找了一段时间，希望得到答案。

非常感谢 - 我真的很感激！;)

真诚的，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:14:16.817

您的表格视图未嵌入导航控制器中，因此无法推送新的视图控制器。

由于详细视图控制器从不显示在屏幕上，因此它从不费心加载其视图，这就是为什么您在 loadView 或 viewDidLoad 方法中看不到任何内容的原因。

您没有展示如何为您的应用程序设置初始视图控制器，但它应该是一个导航控制器，您的表视图控制器作为根视图控制器。

如果您是初学者，使用故事板比尝试用代码完成所有操作要好得多。避免使用界面构建器几乎没有好处，也有很多缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:48:26.193

如果您不使用笔尖，请更改以下代码行：

```
self.searchDetailViewController = [[RLCASearchDetailViewControllerViewController alloc] initWithNibName:@"" bundle:nil]; 
```

至

```
self.searchDetailViewController = [[RLCASearchDetailViewControllerViewController alloc] init]; 
```

希望能帮助到你 ！

# ios - 如何使用相同的工具栏按钮显示/隐藏搜索栏

> ID：10959323
> 
> 赞同：0
> 
> 时间：2012-06-09T07:45:51.873
> 
> 标签：ios, xcode, button, show, searchbar

我有一个工具栏按钮

```
UIBarButtonItem *systemItem2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSearch target:self action:@selector(pressButton2:)];
    systemItem2.style = UIBarButtonItemStyleBordered; 
```

和新闻行动

```
- (void) pressButton2:(id)sender{
        mapSearch.hidden = NO;
} 
```

在视图中会出现

```
- (void)viewWillAppear:(BOOL)animated
{
  mapSearch.hidden = YES;
} 
```

**如何使用相同的按钮（第二次按下）显示和隐藏搜索栏？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:51:19.220

我了解您想切换`mapSearch.hidden`. 这是一个解决方案

```
mapSearch.hidden = !mapSearch.hidden; 
```

或者

```
mapSearch.hidden = (mapSearch.hidden) ? NO : YES; 
```

# c - 在一阶谓词逻辑中表示计数函数

> ID：10959327
> 
> 赞同：0
> 
> 时间：2012-06-09T07:46:45.803
> 
> 标签：c

**给定以下计算字符串中AlphaChar**字符数的函数，我如何在**一阶逻辑**中表示这样的计算函数？
注意：AlphaChar 只是一个**unsigned int**类型

```
int alpha_char_strlen (const AlphaChar *str)
{
    const AlphaChar *p;

    for (p = str; *p; p++)
        ;
    return p - str;
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T02:25:11.990

你可以定义`strlen`为

*   空字符串的长度为 0；
*   如果字符串的形式是，`<string of length n><string of length m>`那么它的长度是 n+m。

假设你的结构中有算术

```
HasLength(EmptyString,0) ^ \forall x \forall y \forall z \forall k \forall l \forall m
    (HasLength(x,k) ^ HasLenght(y,l) ^ HasLength(z,m) ^ z = xy => m = k + l) 
```

# html - 使浮动 div 保持在溢出内容之上

> ID：10959329
> 
> 赞同：1
> 
> 时间：2012-06-09T07:47:07.723
> 
> 标签：html, css

我想在一行中列出链接并隐藏任何不适合浏览器宽度的内容。最后，我希望有一个始终位于溢出链接之上的 div。我怎样才能做到这一点？

这是[dablet.com 上的演示](http://dabblet.com/gist/2900041)，调整浏览器窗口的大小以了解我的意思。

**HTML 标记：**

```
<div class="bar">
    <a href="">item</a>
    …
    <a href="">item</a>
    <a href="">item</a>

    <div class="more">
        <a href="">more items...</a>
    </div>
</div> 
```

**CSS 样式：**

```
.bar {
    font-size: 12px;
    height: 16px;
    margin: 0 0 5px;
    overflow:hidden;
}

.bar a:link,
.bar a:visited {
    background-color: #b3d4ae;
    border-radius: 5px;
    color: #003300;
    padding: 0 3px 15px 3px;
}

.more {
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:11:39.267

## 结果是： [（dabblet.com 上](http://dabblet.com/gist/2900057)的演示）

![在此处输入图像描述](../Images/45ddbc36a92b017840a12a6e2fee1d8b.png)
![在此处输入图像描述](../Images/73bf3bf485465258254bcb136b034c77.png)
![在此处输入图像描述](../Images/643a21de51ede73831a92bc6023f214f.png)

我将您标记中的锚点列表更改为`ul`它在 Web 开发中更具语义和良好实践

**HTML 标记：**

```
<div class="bar">
    <ul>
        <li><a href="#">link01</a></li>
        <li><a href="#">link02</a></li>
        <li><a href="#">link03</a></li>
        …
        <li><a href="#">link20</a></li>
    </ul>

    <div class="more">
        <a href="">more items...</a>
    </div>
</div> 
```

**CSS 样式：**

```
.bar {
    font-size: 12px;
    height: 16px;
    overflow: hidden;
    position: relative;
    /* .more width + ~15px to prevent half-visible links */
    padding-right: 83px;
}

.bar ul { margin: 0; }

.bar ul li {
    background-color: #b3d4ae;
    border-radius: 5px;
    color: #003300;
    padding: 0 3px;
    float: left;
}

.bar ul li a,
.bar ul li,
.more,
.more a {
    height: 16px;
    line-height: 16px;
    display: inline-block;
}

.bar ul li + li {
    margin-left: 6px;
}

.more {
    position: absolute;
    top: 0;
    right: 0;
    background-color: #fff;
    padding: 0 5px;
    box-shadow: -5px 0 5px #fff;
    /* fixed width for example */
    width: 70px;
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:17:06.647

尝试这个，

[演示](http://jsfiddle.net/zdcDA/)

**CSS：**

```
.bar {
font-size: 12px;
height: 16px;
margin: 0 0 5px;
overflow:hidden;
position:relative;
}

.bar a:link, .bar a:visited {
background-color: #b3d4ae;
border-radius: 5px;
color: #003300;
padding: 0 3px 15px 3px;
}

.links{  
}
.more {
float: right; 
margin-left:20px; 
} 
```

**标记：**

```
<div class="bar">
<div class="more">
    <a href="">more items...</a>
</div>
<div class="links">
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
    <a href="">item</a>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T08:01:46.520

您是否尝试使用网站右上角的“编辑”链接复制 Reddit？如果是这种情况，下面的 CSS 应该可以满足您的需求。

```
.more {
    right: 0;
    top:0;
    position: fixed;
    z-index: 1000;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T08:10:04.737

请尝试以下样式 -

```
.bar {
font-size: 12px;
height: 16px;
margin: 0 0 5px;
overflow:hidden;
position:relative
}
.bar a:link, .bar a:visited {
background-color: #b3d4ae;
border-radius: 5px;
color: #003300;
padding: 0 3px 15px 3px;
}
.more {
position: absolute;
z-index: 999;
top: 0px;
right: 0;
margin: 10px;
} 
```

# javascript - 如何在复杂系统中使用 TDD？

> ID：10959334
> 
> 赞同：0
> 
> 时间：2012-06-09T07:48:12.217
> 
> 标签：javascript, tdd

所以我一直在制作游戏，直到我想尝试 TDD，所以我的大部分工作代码都没有任何测试，但我想为每个新功能尝试 TDD。

我的问题是我的游戏由大量相互依赖的系统组成（有点像没有关卡就无法使用相机，对象保留大量引用并且初始化事物将其他事物作为参数）。所以只是为了测试雾系统，我需要初始化关卡、物理、相机、碰撞（因为它们在某种程度上都相互依赖），这会产生很多重复。这是代码：

```
test( "shadow test", function() {
    var b2world=new b2World(new b2Vec2(0, 0), false);
    var contactListener = new collisionHandler.CollisionHandler(MASK_BITS);
    b2world.SetContactListener(contactListener);

    var map = gamejs.http.load('images/prot8.json');
    var level = new Level.Level({
        map: map, 
        size: 0.5, 
        nMaskBits: MASK_BITS.node,
        nCategoryBits: MASK_BITS.player | MASK_BITS.birdy | MASK_BITS.innerBody,
        world: b2world,
        scale: SCALE});

    var cam = new Camera.Camera({
            lvlWid: this.level.width*SCALE*this.level.blockSize, 
            lvlHei: this.level.height*SCALE*this.level.blockSize, 
            yBand: 2,
            maxSpeed: 20,
            peerWindow: new b2Vec2(350, 300),
            scrWid: scrWid, 
            scrHei: scrHei});

    var shadow = new Shadow.Shadow({
        width : 300,
        height : 300,
        level : level,
        eye : new b2Vec2(600, 600),
    });

    ok( shadow.blit, "Shadow is extended from surface" );
    ok( shadow.level, "Shadow has reference to the level" );
    ok( shadow.eye, "Shadow has reference to player's eye" );
    ok( (function() {
        for (var i = 0; i < shadow.onScreenBlocks.length; i++) {
            var rect = level.boxes[ shadow.onScreenBlocks[i] ];
            //this is half finished
        }
        return true;
    }), "Shadow do picks the blocks that are visible on screen" );
    ok( (function() {
        for (var i = 0; i < level.boxes.length; i++) if ( shadow.notProcessBlock(i) ) {
            var rect = level.boxes[i];
            if (rect.left < cam.offsetX //at this point I just realized that camera need to be setup in a more complex way...
        }
        return true;
    }), "Shadow only process those blocks that are visible on screen" );
}); 
```

总的来说，它的氛围很差。我的想法更难绕开，也更难维持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T07:59:06.257

当以非 TDD 方式编写单元测试时，您必须为您编写的每段代码问自己：“我该如何测试这个”。这迫使您查看代码并确保在测试时可以替换所有依赖项。

在进行 TDD 时，从一开始就包含了“我如何测试这个”。当您无法替换所有依赖项时，在项目中间引入 TDD 会导致问题。

在进行单元测试时，您需要确保可以完全隔离地测试一个单元，并将所有依赖项替换为 mock 或 fakes。然后，您可以控制单元测试的所有输入，以便确保所有代码路径都经过测试。

要在您的项目中进行单元测试，您必须重构代码以真正支持单元测试。

我认为 TDD 不是这种情况下的主要问题。问题是你是否想使用单元测试，我认为这个问题的答案应该是肯定的！单元测试有很多优点。现在，您面临的问题是您编写的代码难以测试。确保您的代码可测试是可以在您编写代码之后完成的事情，但正如您现在所体验的那样，这非常困难。这就是 TDD 可以提供帮助的地方。TDD 将确保您的代码易于测试，因此您可以获得单元测试的所有好处。

我前段时间写了一篇关于单元测试的博客。也许它可以帮助：[单元测试，地狱还是天堂？](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

# properties - 如何将 setter 添加到 F# 中的可区分联合

> ID：10959335
> 
> 赞同：0
> 
> 时间：2012-06-09T07:48:17.367
> 
> 标签：properties, f#, discriminated-union

我想将 setter 属性添加到有区别的工会，我应该怎么做？

费：

```
type Factor =    
    | Value     of Object
    | Range     of String

    let mutable myProperty = 123
    member this.MyProperty
        with get() = myProperty
        and set(value) = myProperty <- value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T14:30:18.820

以下是我可能会采用的方法：

```
type Value = { value: obj; mutable MyProperty: int }
type Range = { range: string; mutable MyProperty: int }

type Factor =    
    | Value     of Value
    | Range     of Range

    member this.MyProperty
        with get() = 
            match this with
            | Value { MyProperty=myProperty }
            | Range { MyProperty=myProperty } -> myProperty
        and set(myProperty) = 
            match this with
            | Value x -> x.MyProperty <- myProperty
            | Range x -> x.MyProperty <- myProperty 
```

并像这样使用它：

```
let v = Value {value="hi":>obj ; MyProperty=0 }
v.MyProperty <- 2

match v with
| Value { value=value } as record ->
    printfn "Value of value=%A with MyProperty=%i" value record.MyProperty
| _ -> 
    printfn "etc." 
```

我在与您类似的场景中使用了这种技术，并在 FsEye 的手表模型中取得了令人满意的结果：[http://code.google.com/p/fseye/source/browse/tags/2.0.0-beta1/FsEye/WatchModel。 FS](http://code.google.com/p/fseye/source/browse/tags/2.0.0-beta1/FsEye/WatchModel.fs)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T08:16:58.523

为什么不使用类和活动模式：

```
type _Factor =    
    | Value_     of obj
    | Range_     of string

type Factor(arg:_Factor) =

    let mutable myProperty = 123
    member this._DU = arg
    member this.MyProperty
        with get() = myProperty
        and set(value) = myProperty <- value

let (|Value|Range|) (arg:Factor) = 
    match arg._DU with
    |Value_(t) -> Value(t)
    |Range_(t) -> Range(t) 
```

这显然会慢得多，但它可以让你做你想做的事

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T08:19:45.703

我对 F# 还不太熟悉，但我想你不能这样做，这没有任何意义。从他们的名字可以看出，受歧视的工会是工会。它们代表了某种选择。你正试图将一些状态融入其中。你想达到什么目的？用例是什么？

也许您需要做的就是为您的 DU 添加额外的“参数”，即如果您有

```
type DU = 
    | A of int
    | B of string 
```

并且您想添加 int 类型的 setter，那么您可以通过以下方式扩展 DU：

```
type DU = 
    | A of int * int
    | B of string * int

    member x.Set i =
        match x with
        | A(a1, a2) -> A(a1, i)
        | B(b1, b2) -> B(b1, i) 
```

# android - Cocos vs AndEngine for android

> ID：10959337
> 
> 赞同：7
> 
> 时间：2012-06-09T07:48:29.800
> 
> 标签：android, cocos2d-iphone, andengine, cocos2d-android

我想使用平铺地图编辑器制作游戏，并且我想使用 D-Pad 移动角色来移动角色

所以我想知道哪个引擎会更好 AndEngine 或 Cocos2d

请记住，我是这方面的初学者，所以我想看很多教程。:-D

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T11:27:40.057

两个引擎都支持非常容易地加载 TMX 地图并从 D-PAD 输入。因此，如果您的要求仅此而已，则没有太大区别。只用你熟悉的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T08:34:52.410

Cocos2d-android 不再支持。必须使用cocos2d-x，跨平台，使用JNI才能使用c++代码。更多信息在[这里](https://stackoverflow.com/q/10711047/1077364)。

Cocos2d-x 非常适合创建游戏，但我从来没有使用过 AndEngine。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-19T05:46:48.080

```
Libgdx      : Java (Good documentation/Sample example)
                   (Android/iOs/3D support also)

Cocos2d-x   : C++  (Good documentation and Sample example)
                   (Android/iOS/window/bada/blackbarry/etc/3D supports)

AndEngine   : Java (Documentation is **OK** but bit of issue )
                   (Android)

Cocos2d-android : Java (bIT of documentation/ easy to use )
                       (Almost dead only android) 
```

如果熟悉**java** `choose LibGdx` **OR** `cocos2d-x` for **C++**。

我建议你应该选择**cocos2d-X**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-03T20:26:12.910

我从 Cocos2d-android 开始，因为它似乎是一个更好的选择，但过了一段时间我很震惊，我找不到任何 Cocos2d-android 教程

要么去 Cocos2d-x-android ，要么去 AndEngine 我从未尝试过 Cocos2d-x-android ，但我可以确认 AndEngine 非常好，并且有很多示例和足够的教程来帮助您入门 [AndEngine 虽然缺乏文档..但是如果您从官方示例开始，那将不是问题]

编辑：AndEngine 现在有点死了

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T11:03:18.413

AndEngine 中有很多错误......我首先遇到了选择一件事而不是其他东西的同样困境，但我的选择包括 libgdx，andengine 和 cocos2dx ......

虽然 libgdx 是一个框架，但它是所有框架中最强大的，你可以深入研究代码（你可能会创建一些非凡的事件）......但对于像我这样的初学者来说，这是一个艰难的框架，因为我没有游戏经验编程（在它的网站上提供的那种简单的文档会吸引你使用它，但是当你想创建自己的东西时，你会感到困惑）.. 但是最好的性能是保证的！

接下来是 AndEngine .. Nicolas 所做的出色工作.. 但遗憾的是，错误数量一直在上升，并且设备周围的结果不一致.. 它是主要缺点之一.. 您可以避免错误，但是当性能受到严重打击时你别无选择，只能离开它！

Cocos2d-x（这就是没有错误和良好性能的 AndEngine 将来会是什么样子）.. 但是 cocos 的唯一缺点是在非 Mac OS 上编程......你没有通常的代码完成和这些天是程序员必备的微小功能..但是对于性能和抗错误编码，我们获得了 libgdx 的亚军！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T11:09:30.420

对于 Android，我强烈推荐 LibGDX：原生、良好的文档和大型社区/论坛。

# android - 无法运行 android 连接的应用程序引擎启动项目

> ID：10959338
> 
> 赞同：0
> 
> 时间：2012-06-09T07:48:45.120
> 
> 标签：android, google-app-engine, android-logcat

我正在尝试调试应用引擎连接的 android starter 应用程序，但是当我在手机上选择帐户（android 2.3.6 并按照教程在 appengine 上部署应用程序）时，它会显示这些错误并提示强制关闭应用程序。这是日志猫：

```
06-09 13:00:07.781: D/dalvikvm(14321): GC_CONCURRENT freed 76K, 44% free 3311K/5831K, external 518K/1030K, paused 3ms+3ms 
06-09 13:00:08.007: I/global(14321): Loaded time zone names for en_US in 1308ms. 
06-09 13:00:08.398: W/dalvikvm(14321): threadid=9: thread exiting with uncaught exception (group=0x40018578) 
06-09 13:00:08.429: E/AndroidRuntime(14321): FATAL EXCEPTION: IntentService[my_registered_c2dm_id@gmail.com]
06-09 13:00:08.429: E/AndroidRuntime(14321): java.lang.RuntimeException: The RequestFactory ValidationTool must be run for the com.testtasker.client.MyRequestFactory RequestFactory type
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.google.web.bindery.requestfactory.vm.impl.Deobfuscator$Builder.load(Deobfuscator.java:59)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.google.web.bindery.requestfactory.vm.InProcessRequestFactory.<init>(InProcessRequestFactory.java:80)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.google.web.bindery.requestfactory.vm.RequestFactorySource.create(RequestFactorySource.java:43)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.testtasker.Util.getRequestFactory(Util.java:158)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.testtasker.DeviceRegistrar.getRequest(DeviceRegistrar.java:107)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.testtasker.DeviceRegistrar.registerOrUnregister(DeviceRegistrar.java:54)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.testtasker.C2DMReceiver.onRegistered(C2DMReceiver.java:46)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.google.android.c2dm.C2DMBaseReceiver.handleRegistration(C2DMBaseReceiver.java:191)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at com.google.android.c2dm.C2DMBaseReceiver.onHandleIntent(C2DMBaseReceiver.java:110)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at android.os.Looper.loop(Looper.java:130)
06-09 13:00:08.429: E/AndroidRuntime(14321):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我在google和stackoverflow上搜索了很多，但无法解决错误。我没有更改启动代码中的单个字符，那么为什么它没有运行。

当我尝试通过模拟器（如教程中所述）时，它会给出 PHONE_REGISTRATION_ERROR。

使用的软件：面向 Web 开发人员的 Eclipse Java EE IDE。
eclipse平台3.7.2
版本：Indigo Service Release 2
Build id：20120216-1857

ADT 18.0.0
应用引擎 java sdk1.6.6
gwt sdk 2.4.0

这是调试堆栈：

```
DalvikVM[localhost:8600]    
Thread [<1> main] (Running) 
Thread [<8> Binder Thread #2] (Running) 
Thread [<7> Binder Thread #1] (Running) 
Thread [<9> IntentService[my_registered_c2dm_id@gmail.com]] (Suspended (exception RuntimeException))    
    C2DMReceiver(C2DMBaseReceiver).onHandleIntent(Intent) line: 124 
    IntentService$ServiceHandler.handleMessage(Message) line: 59    
    IntentService$ServiceHandler(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 130 
    HandlerThread.run() line: 60 
```

单击线程 9 变量时，它会显示：

```
com.testtasker.C2DMReceiver@4052c3e8 
Intent { act=com.google.android.c2dm.intent.REGISTRATION cat=[com.testtasker]   
cmp=com.testtasker/.C2DMReceiver (has extras) } 
```

请帮助我，我必须使用应用程序引擎，但在此之前，此示例应在真实设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T23:08:44.517

我不知道您使用的是哪个“教程”。使用 ADT 18，您将无法在此处运行[http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/](http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/)

而是按照此处的说明进行操作： [https ://developers.google.com/eclipse/docs/appeng_android_install_setup](https://developers.google.com/eclipse/docs/appeng_android_install_setup)

另外，请务必注册 c2dm 服务：[https](https://developers.google.com/android/c2dm/signup) ://developers.google.com/android/c2dm/signup ，我认为这是您的实际问题。我相信在测试时，您必须使用您在手机和本地 App Engine 服务器上注册时使用的相同帐户登录。

您是否自定义了文件，或者您是否正在尝试开箱即用地测试 c2dm 服务？

# node.js - 如何使用 elasticsearchclient 搜索内部数组

> ID：10959345
> 
> 赞同：0
> 
> 时间：2012-06-09T07:50:08.893
> 
> 标签：node.js, couchdb, elasticsearch

我已经安装了 elasticsearch-river-couchdb 和 node elasticsearchclient。现在我正在使用 node elasticsearchclient 在 couchdb 中搜索数据。我有这样的JSON结构，

```
{   
    first_name: "aruna", 
    interests: [ {name: "pets", level: 5}, 
                 {topic: "es", degree: "strong"}
              ] ,
designation: "SE",
company: "DOM",
salary: 200000
} 
```

现在我需要搜索我在查询中给出的任何值。为此，我尝试了以下代码，

```
var searchText = '*aru*'
testSearch = function() {
var qryObj = {
    "size" : 50,
            "query" : { 
           "wildcard" : { 
                "_all" :searchText
                }
             } 
     };
elasticSearchClient.search("test", "",qryObj, size)
    .on('data', function(data) {
        console.log("Search: "+data)
        assert.ok(JSON.parse(data), "testSearch failed.")
    })
    .exec()
} 
```

如果我将 searchText 的值设为 aruna 或 SE 或 DOM 或 200000，我就能获得完整的文档。但是当我搜索pets或strong或5或es时，我没有得到文件。请任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:16:02.150

我没有使用节点，但是一旦我使用 curl 创建了索引：

```
curl -XPOST 'http://localhost:9200/test/contact/' -d '
{   
first_name: "aruna", 
interests: [ {name: "pets", level: 5}, 
             {topic: "es", degree: "strong"}
          ] ,
designation: "SE",
company: "DOM",
salary: 200000
}
'
{"ok":true,"_index":"test","_type":"contact","_id":"B1it8B1wTqGkx3qSQqSo1Q","_version":1} 
```

我可以使用 query_string 搜索字符串宠物：

```
curl -XGET http://localhost:9200/test/contact/_search -d '
{"query":{"bool":{"must":[{"query_string":    {"default_field":"_all","query":"pets"}}],"must_not":[],"should":      []}},"from":0,"size":50,"sort":[],"facets":{}}
'       

{"took":3,"timed_out":false,"_shards":{"total":5,"successful":5,"failed":0},"hits":    {"total":1,"max_score":0.06780553,"hits":         [{"_index":"test","_type":"contact","_id":"B1it8B1wTqGkx3qSQqSo1Q","_score":0.06780553,   "_source" : 
{   
first_name: "aruna", 
interests: [ {name: "pets", level: 5}, 
             {topic: "es", degree: "strong"}
          ] ,
designation: "SE",
company: "DOM",
salary: 200000
} 
```

注意：当您在字段内创建带有哈希的索引时，它称为嵌套索引，我不确定通配符查询查询嵌套字段。但是查询字符串可以。同样在 19.4 中，您可以使用特殊语法查询带有 query_string 的嵌套字段，在您的情况下：interests.*:pets

[http://www.elasticsearch.org/blog/2012/05/21/0.19.4-released.html](http://www.elasticsearch.org/blog/2012/05/21/0.19.4-released.html)

# oracle - 11GR2 中的 Oracle 导入错误，创建带有编译错误的 ORA-39082 对象

> ID：10959351
> 
> 赞同：2
> 
> 时间：2012-06-09T07:51:42.667
> 
> 标签：oracle, import, oracle11g

我正在使用 Oracle 11GR2 版本。我使用以下命令成功导出了转储，在导出时我没有看到任何错误并且一切顺利。

```
expdp DBCOPY/DBCOPY@EAMSB1 DIRECTORY=DUMP_DIR dumpfile=dbcopy.dmp logfile=dbcopy.log schemas=DBCOPY 
```

我尝试使用 impdp 为同一数据库实例中的另一个用户导入它，方法是创建另一个用户（在我结束时进行测试）

```
impdp directory=DUMP_DIR dumpfile=DBCOPY.dmp FROMUSER=DBCOPY TRANSFORM=oid:n TOUSER=MADHU log=testlog9.log ignore=y remap_tablespace ={OBS_DATA:DATA_7I} 
```

这里显示

> 导入失败，出现以下错误

请就我的 impdb 或 expdb 命令提出任何问题。我在导入时遇到了一些错误，例如找不到表空间 OBS_DATA。所以我尝试了 remap_tablespace 属性。

日志文件中的错误

```
processing object type SCHEMA_EXPORT/PROCEDURE/PROCEDURE
Processing object type SCHEMA_EXPORT/PACKAGE/COMPILE_PACKAGE/PACKAGE_SPEC/ALTER_PACKAGE_SPEC
Processing object type SCHEMA_EXPORT/FUNCTION/ALTER_FUNCTION
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7SPNDMA" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7WZCOSL" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7OZOCST" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7OZLCOLTOTAL" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7OZOCSTTOTAL" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7REPJZACOS" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7REPJZPBCS" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7REPJZCOSL" created with compilation warnings
ORA-39082: Object type ALTER_FUNCTION:"MADHU "."O7REPJYACOS" created with compilation warnings
Processing object type SCHEMA_EXPORT/PROCEDURE/ALTER_PROCEDURE
ORA-39082: Object type ALTER_PROCEDURE:"MADHU "."DELETEDTBL" created with compilation warnings
ORA-39082: Object type ALTER_PROCEDURE:"MADHU "."SETFORCED" created with compilation warnings
ORA-39082: Object type ALTER_PROCEDURE:"MADHU "."O7PNODMA" created with compilation warnings
ORA-39082: Object type ALTER_PROCEDURE:"MADHU "."O7WOCOST" created with compilation warnings 
```

导入导出命令有问题吗？在日志文件的末尾我看不到消息

```
Import terminated successfully 
```

相反，它给出了以下消息

```
Processing object type SCHEMA_EXPORT/TABLE/INDEX/STATISTICS/FUNCTIONAL_AND_BITMAP/INDEX_STATISTICS
Processing object type SCHEMA_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS
Job "SYS"."SYS_IMPORT_FULL_01" completed with 35 error(s) at 23:35:34 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T10:03:13.683

您的数据库导出包含存储过程和函数。再次导入它们时无法编译它们。

在 SQLplus（和许多其他工具）中，您可以运行`SHOW ERRORS`以调查特定错误，例如：

```
SHOW ERRORS FUNCTION MADHU.O7SPNDMA 
```

由于您使用不同的用户导入了数据，并且可能完全在不同的数据库实例上，新用户可能没有相同的权限来访问表和其他 PL/SQL 包，因此在成功编译函数和过程的代码或同义词可能会丢失。

`SHOW ERRORS`将会说。如果您需要更多支持，可以将输出添加`SHOW ERRORS`到您的问题中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:00:30.157

从哪个数据库导出？如果是 10g，您可能需要修复错误 5581731。

# wordpress - 从帖子 ID 获取 Wordpress 类别 ID

> ID：10959356
> 
> 赞同：1
> 
> 时间：2012-06-09T07:52:18.747
> 
> 标签：wordpress

我正在使用自定义帖子类型和自定义类别。我需要在页面中获取自定义帖子类型的类别 ID。我尝试使用各种方法，但无法获取类别 ID。

```
<?php 
    $args = array(
                'posts_per_page'=> -1,
                 'post_type' => 'professional',
                 'orderby'=> 'id',
                 'order'=> 'asc',
                );
            query_posts($args);

    $my_posts = new WP_Query($args);
         while ($my_posts->have_posts()) : $my_posts->the_post(); // loop for posts
    function getCurrentCatID(){
    global $wp_query;
    global $post;
    $cats = get_queried_object()->term_id;
    $cat_ID = $cats[0]->cat_ID;
    return $cat_ID;
    } 
?>
<li>
    <div class="caption">
        <h3><a href="<?php  the_permalink(); ?>"><?php the_title();  ?></a></h3>
        <span class="industry"><?php getCurrentCatID($cat_ID); ?></span>
    </div>
</li> 
```

我无法在自定义帖子类型中获取猫 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:01:31.640

尝试这个。

```
$cat_l=get_the_term_list( $post->ID, 'custom_categories', '',  '&nbsp;,&nbsp;', '' );
echo $cat_l; 
```

# internet-explorer-6 - ie6 float:right display:inline-block(display:inline)

> ID：10959357
> 
> 赞同：1
> 
> 时间：2012-06-09T07:52:23.837
> 
> 标签：internet-explorer-6, css-float

如何`display:inline-block(display:inline)`修复`float:right`in `ie6`？

代码在：http: [//jsfiddle.net/VGAGt/](http://jsfiddle.net/VGaGt/)

html

```
<div>
    text<span>>></span>
</div>​ 
```

css

```
div{
    float:left; 
    width: 300px;
    height: 20px; 
    padding:5px;
    background:#ccc;
}
span{
    float:right;
    width:20px;
    height:20px;
    display:inline-block;
    zoom:1;
    *display:inline;
    cursor: pointer;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:36:16.413

您的文本在 IE6 中占据整个 div 的宽度，这就是 span 换行的原因。一种选择是将文本包装在 ap 标签中，将其浮动到左侧并通过将宽度设置为 200px 或类似的值来控制其宽度。

HTML

```
<div>
  <p>text</p><span>>></span>
</div> 
```

CSS

```
p {
  float:left;
  width:100px;
} 
```

这是[jsFiddle](http://jsfiddle.net/YuQHx/1/)。

# javascript - 使用javascript根据计算值显示“评分”，如星星

> ID：10959358
> 
> 赞同：0
> 
> 时间：2012-06-09T07:52:29.720
> 
> 标签：javascript, html, image

我有返回数字数组的函数。接下来我必须在相关的结果 id 中显示相同数量的星星。作为 JavaScript 中的一个完整的菜鸟（仍在为验证而苦苦挣扎：P），我尝试了很多事情都无济于事。希望下面的代码片段（当前状态）能解决我的问题 -

```
function display(name1, number1, sign1, name2, number2, sign2, check, y_nat, o_nat) {
    document.getElementById("yname").innerHTML = name1 ;
    document.getElementById("ynumber").innerHTML = number1 ;
    document.getElementById("ysign").innerHTML = sign1 ;
    document.getElementById("oname").innerHTML = name2 ;
    document.getElementById("onumber").innerHTML = number2 ;
    document.getElementById("osign").innerHTML = sign2 ;
    document.getElementById('result').innerHTML = check + '%';
/* I am trying to display y_nat[0] Stars in the result id - yr  by calling a show_image(id, number) function! */
    x = "yr";
    document.getElementById("yr").innerHTML = show_image(x ,y_nat[0]) ;
    x = "yl";
    document.getElementById("yl").innerHTML = y_nat[1] ;
    x = "yf";
    document.getElementById("yf").innerHTML = y_nat[2] ;
    x = "yp";
    document.getElementById("yp").innerHTML = y_nat[3] ;
    x = "ys";
    document.getElementById("ys").innerHTML = y_nat[4] ;
    x = "yi";
    document.getElementById("yi").innerHTML = y_nat[5] ;
    x = "or";
    document.getElementById("or").innerHTML = o_nat[0] ;
    x = "ol";
    document.getElementById("ol").innerHTML = o_nat[1] ;
    x = "of";
    document.getElementById("of").innerHTML = o_nat[2] ;
    x = "op";
    document.getElementById("op").innerHTML = o_nat[3] ;
    x = "os";
    document.getElementById("os").innerHTML = o_nat[4] ;
    x = "oi";
    document.getElementById("oi").innerHTML = o_nat[5] ;
}

function show_image (id,number) {
        var img = document.createElement("img");
        img.src = "stars2.png";
        x = number;
    y = id;
        for (i =0; i<x; i++){
        document.getElementById(y).appendChild(img);
    }
}//or something of this sort 
```

如果问题不清楚，请告诉我。我仍在尝试解决它，并且非常有义务有人可以指导。我正在尝试学习 JavaScript。我正在尝试使用以下链接中的代码。 [http://www.codingforums.com/archive/index.php/t-94715.html](http://www.codingforums.com/archive/index.php/t-94715.html)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T22:14:56.530

我看到的第一个问题是你需要在循环中有以下两行

```
 var img = document.createElement("img");
    img.src = "stars2.png"; 
```

像这样：

```
for (var i =0; i<x; i++){
    var img = document.createElement("img");
    img.src = "stars2.png";
    document.getElementById(y).appendChild(img);
} 
```

第二个问题：show_image 不返回任何内容（未定义除外），但您使用它来设置刚刚添加图像的元素的 html 内容：

```
document.getElementById("yr").innerHTML = show_image(x ,y_nat[0]) ; 
```

将此行更改为：

```
show_image(x ,y_nat[0]) ; 
```

可能还有更多错误，但这就是我注意到的。我为你做了一个小例子（在 IE 和 Chrome 中测试）：

```
<html>

<head>
<script type="text/javascript">

function display() {
    var x = "yr";
    show_image(x ,3) ;
}

function show_image (id,number) {
    var x = number;
    var y = id;
    for (var i =0; i<x; i++){
        var img = document.createElement("img");
        img.src = "stars2.png";
        document.getElementById(y).appendChild(img);
    }
}

</script>

</head>

<body onload="display();">

<div id="yr"></div>

</body>

</html> 
```

# c# - 基于两个参数在文本框中使用上下文键自动完成？

> ID：10959359
> 
> 赞同：1
> 
> 时间：2012-06-09T07:52:37.877
> 
> 标签：c#, javascript, asp.net, web-services, asp.net-ajax

![在此处输入图像描述](../Images/305b6b2d6755620946026c3c0f14afa6.png)

参考图像，有 2 `TextBox`( `tbxAttribute and tbxAttributeDesc`)。页面加载时将加载值`tbxAttribute TextBox`。 `tbxAttributeDesc TextBox`最终用户将填写该数据。

我已经完成了`Autocomplete Text`in `tbxAttributeDesc`。我们在表格中维护这些值，根据加载的`tbxAttribute`值，它们对应的值`AttributeDesc`将突出显示`tbxAttributeDesc Textbox`

我的代码是：

```
autoDesc = new AjaxControlToolkit.AutoCompleteExtender();

autoDesc.ID = "autoDesc" + i; 

autoDesc.BehaviorID = "tbxAtribute" + i;

autoDesc.ServicePath = "itemvaluemas.asmx";

autoDesc.ServiceMethod = "GetAttributeDesc";

autoDesc.TargetControlID = tbxAttributeDesc.ID;

autoDesc.MinimumPrefixLength = 1;

autoDesc.CompletionInterval = 10; 

autoDesc.FirstRowSelected = true;

autoDesc.CompletionSetCount = 30;

autoDesc.UseContextKey = true; 
```

并且还使用了 Javscript 概念。

参考下图：

![在此处输入图像描述](../Images/05ccee401b59f0d4857a74f726588b11.png)

在这里，我需要传递条件 as`tbxAtribute`和它们的对应`tbxAtributeDesc`，基于`tbxAbbr`需要突出显示的值..

如果我使用`ContextKey`那么我如何在上下文键中传递这两个文本框值..

如果您有任何想法，请帮助解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:40:38.023

使用 ContextKey 属性将文本框的值传递给 GetAutoCompleteValues 函数。

```
txtbox1.Attributes.Add("onchange", "$find('BehaviourIDOftbxAttributeDesc').set_contextKey(tbxAttribute.value);"); 
```

有关更多信息，请查看以下链接：

[AJAX C# AutoCompleteExtender contextKey](https://stackoverflow.com/questions/1440552/ajax-c-sharp-autocompleteextender-contextkey)

[http://arrao4u.wordpress.com/2010/01/14/autocomplete-extender-with-context-key/](http://arrao4u.wordpress.com/2010/01/14/autocomplete-extender-with-context-key/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:34:13.383

这是我找到的解决方案。

我使用 JavaScript：

```
function SetContextAbbr(formatid, itemValue, behaveid) {
var autoComplete1 = $find(behaveid);
var target = autoComplete1.get_element();
var txtformatid = document.getElementById(formatid);
var txtitemValue = document.getElementById(itemValue);
var contextkeydata = txtformatid.value + "-" + txtitemValue.value;
autoComplete1.set_contextKey(contextkeydata);
} 
```

使用函数作为

```
 public string[] GetItemabbr(string prefixText, int count, string contextKey)
 {
        string[] splitvalue = contextKey.Split('-');

        //code here
 } 
```

在 Web 服务中

```
 autoabbr = new AjaxControlToolkit.AutoCompleteExtender();
                    autoabbr.ID = "autoabbr" + i;
                    autoabbr.BehaviorID = "autoabbrbehave" + i;
                    autoabbr.ServicePath ="itemvaluemas.asmx";
                    autoabbr.ServiceMethod = "GetItemabbr";
                    autoabbr.TargetControlID = txtItemAbbrValue.ID;
                    autoabbr.MinimumPrefixLength = 1;
                    autoabbr.CompletionInterval = 10;
                    autoabbr.FirstRowSelected = true;
                    autoabbr.CompletionListCssClass = "completionList";
                    autoabbr.CompletionListHighlightedItemCssClass = "itemHighlighted";
                    autoabbr.CompletionListItemCssClass = "listItem";
                    autoabbr.CompletionSetCount = 30;
                    autoabbr.UseContextKey = true; 
```

# hibernate - 如何在休眠中的其他表中显示没有引用的表值

> ID：10959369
> 
> 赞同：-1
> 
> 时间：2012-06-09T07:54:52.430
> 
> 标签：hibernate, hql

我正在使用休眠，我只想显示表 A 中那些在 Bie 表中没有引用的记录表 A 有主键 jobId，它是表 B 中的外键。现在我只想显示那些不是的 id 值见表 B。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T09:20:30.440

```
 select a from A a where a.jobId not in (select b.jobId from B b) 
```

# android - 如何在android\monodroid 中取消RequestWindowFeature 的效果？

> ID：10959373
> 
> 赞同：0
> 
> 时间：2012-06-09T07:56:07.470
> 
> 标签：android, user-interface, xamarin.android

我写游戏。我`RequestWindowFeature(WindowFeatures.NoTitle);`在启动屏幕上使用，但如何在设置屏幕上禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:44:24.127

在您的设置活动 onCreate 中，运行以下命令：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
getWindow().setTitle("Settings"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:36:03.950

Mono 中的相应代码是

```
RequestWindowFeature(WindowFeatures.CustomTitle);
Window.SetTitle("Settings"); 
```

# android - distanceTo() 中使用的参数类型是什么？

> ID：10959374
> 
> 赞同：0
> 
> 时间：2012-06-09T07:56:11.323
> 
> 标签：android, methods, parameters

在`distanceTo()`方法中使用的参数是什么？我确实知道它使用的位置参数，但我的问题是，如果我正在制作一个必须计算与特定位置的距离的应用程序说一个特定的地标，那么该怎么做我进入`distanceTo()`函数的参数集，我确实知道这个地方的经纬度，但是`distanceTo()`函数只接受一个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:00:17.220

`distanceBetween()`如果您知道该地点的经纬度，则需要使用该方法。看看[文档](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:19:28.290

方法名称：**距离到**

* * *

```
public float distanceTo (Location dest) 
```

自：API 级别 1

**描述**

返回此位置与给定位置之间的近似距离（以米为单位）。距离是使用 WGS84 椭球定义的。

**参数**

> dest ，*目标位置*

**退货**

> 以米为单位的近似距离

* * *

源谷歌安卓[文档](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)

# android - 两个安卓设备之间的通信

> ID：10959377
> 
> 赞同：-1
> 
> 时间：2012-06-09T07:57:20.793
> 
> 标签：android

两个android设备是否可以在不使用运营商服务的情况下进行通信

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-09T08:42:25.760

您可以通过 http 进行通信。Lars Vogel 有一个很棒的教程：[http ://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html)

您也可以考虑将 REST 与此结合使用。

# javascript - Internet Explorer 8 和 7 正在将制表符转换为空格

> ID：10959379
> 
> 赞同：2
> 
> 时间：2012-06-09T07:57:40.103
> 
> 标签：javascript, jquery, cross-browser

我正在尝试使用带有 jQ​​uery 的 javascript 将制表符分隔的字符串转换为 html 表。

在输入字符串中，行由 分隔`<br/>`，列由分隔`tabs`。

这是我到目前为止所拥有的：

```
 $(function(){
    $('div.jstable').each(function(){

      var text = $(this).html();
      var rows = text.split(/<br>/i);
      var htmlString = "<table class='display dataTable'>"
      var startTbody = true;
      for(i = 0; i< rows.length; i++){
        // build header section
        if (i == 0){
          htmlString += '<thead>';
        }else {
          if (startTbody){
            htmlString += '<tbody>';
            startTbody = false;
          }
        }
        htmlString += '<tr>';

        var row = rows[i];
        var columns = row.split('\t'); 
        // build columns
        for (j = 0; j < columns.length; j++ ){
          if (i == 0){
            htmlString += '<th>' + columns[j] + '</th>';
          }else {
            htmlString += '<td>' + columns[j] + '</td>';
          }
        }

        htmlString += '</tr>';
        if (i == 0){
          htmlString += '</thead>'
        } else {
          if (i == rows.length - 1){
            htmlString += '</tbody>'
          }
        }
      }
      htmlString += '</table>';
      $(this).html(htmlString);
    })
  }); 
```

这是输入文本：

```
 <div class="jstable" style="float: left">
col1    col2    col3<br />asda  fd  dfs<br />mmmm   ffff    ssss
  </div> 
```

不幸的是，在 IE8/7 中，jquery .html() 函数返回的文本将所有制表符都替换为空格。

IE9 很好，当前版本的 Firefox 和 Chrome 也可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:08:28.067

您可以将正则表达式传递给[split()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)。`/\s+/`将任何类型的连续空白视为单个分隔符：

```
>>> "one   two".split(/\s+/)
["one", "two"]

>>> "one\ttwo".split(/\s+/)
["one", "two"]

>>> "one\ntwo".split(/\s+/)
["one", "two"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:55:05.037

FWIW 我发现如果我用`<pre>`标签包围输入文本，.html() 函数将按预期返回带有 IE7/8 中的标签的文本。

因此，初始示例源 html 将如下所示：

```
 <pre class="jstable" style="float: left">
col1    col2    col3<br />asda  fd  dfs<br />mmmm   ffff    ssss
  </pre> 
```

# php - 在 php/asp.net 应用程序中保存/加载 img/file（word、excel 等）的最佳方法是什么？

> ID：10959381
> 
> 赞同：2
> 
> 时间：2012-06-09T07:58:05.487
> 
> 标签：php, asp.net, mysql, sql-server, database

我目前是一名学生，我渴望成为一名出色的 Web 开发人员 :)

我想从事一些能够存储/检索图像或任何类型文件（.doc、.xcl、.txt 等）的“实践”项目。有人说最好将 img/any 文件存储在文件系统中，而不是将其保存在数据库中。

我想知道双方的利弊。

我还想知道在 MySQL 中存储 imgs/文件的最佳数据类型是什么（我目前正在使用 longblob for PHP-MySQL）来*保存 imgs*

我还想知道在 SQL Server 中存储 imgs/文件的最佳数据类型是什么（我目前正在使用 Asp.net Varbinary(max) for SQL Server 2008）*用于保存 imgs*

最后，我只是好奇像 facebook 和其他大型网络应用程序这样的网站是如何存储 imgs 和文件的。

先生/女士，您的回答将有很大帮助，我们将不胜感激。谢谢++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:13:08.350

Facebook 使用干草堆存储图像。

这是他们网站上描述图像存储和检索的链接

[http://www.facebook.com/note.php?note_id=76191543919](http://www.facebook.com/note.php?note_id=76191543919)

根据以前的经验，我建议不要将文件直接存储到 SQL 数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:27:39.020

**优点：**存储在数据库中

*   文件“永远”保存

*   可以更轻松地限制对真实文件的访问

*   从技术上讲，您可以检查重复文件。

*   您没有将文件保存在驱动器上，因此可以更快地访问服务器

*   服务器上的文件越少被认为“更好”且更有条理

*   “一个文件处理一切”

**缺点：**

*   如果站点已启动但数据库未启动，则文件将无效（通过“直接”链接）

*   一些无法重新配置的数据库只允许 blob 具有一定的大小限制（几 MB），因此无法存储非常大的图像（但可以分离）

*   将文件加载到（到变量）时，更多数据存储在内存中；与上面的问题类似，非常大的图像会降低您的服务器速度。

*   某些文件可能具有不同的字符编码，因此存储和/或检索文件可能会损坏原始文件。我不确定这是否是真正的问题，但我认为是。

我个人建议您不要再将文件存储在我的数据库中，因为它有缺点。

# android - Phonegap file writing throws error code 1

> ID：10959384
> 
> 赞同：0
> 
> 时间：2012-06-09T07:58:19.810
> 
> 标签：android, cordova

I am trying to write a file in android using phonegap cordova 1.5.0\. Below is the code snippet. This snippet is working fine in simulator but when I run this on my android mobile it goes till gotFs() then "fail error code" alert of fail() pops up with message

> "fail error code 1"

that means it is failing at line

> `fileSystem.root.getFile("projectFileName", {create: create: true, exclusive: false}, gotFileEntry, fail);`

.

code snippet

```
 function onDeviceReady() {
                window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
           }

               function gotFS(fS) {
            fileSystem = fS;
            fileSystem.root.getFile("projectFileName", {create: create: true, exclusive: false}, gotFileEntry, fail); 
          }

          function gotFileEntry(fE) {
            fileEntry = fE;
            fileEntry.createWriter(gotFileWriter, fail);
          }

          function gotFileWriter(writer) {
           .......... file writing code.
          }

         function fail(error) {
            alert('fail error code = '+error.code);
            alert('error '+error);
            console.log(error.code);
         } 
```

The simulator avd is 2.3.3 and my device has android 2.3.6.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:16:04.837

```
 fileSystem.root.getFile("projectFileName", {create: create: true, exclusive: false}, gotFileEntry, fail); 
```

to

```
 fileSystem.root.getFile("projectFileName", {create: true, exclusive: false}, gotFileEntry, fail); 
```

# xcode - ios 特定频率以上的录音

> ID：10959385
> 
> 赞同：0
> 
> 时间：2012-06-09T07:58:27.780
> 
> 标签：xcode, ios5, avaudioplayer, voice, voice-recording

现在我正在基于语音分析的项目下工作，在这个项目中，我必须记录频率超过**17000**赫兹的语音信号。低于这个速率，所有的信号都应该被忽略。我希望有一个语音**过滤器**来记录这个速率，如果有人对此有任何想法，请帮助我，这对我很有帮助，谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:05:36.007

听起来你想实现一个高通滤波器。

关于这些的[维基百科页面](http://en.wikipedia.org/wiki/High-pass_filter)非常详尽。

你在哪里得到一个频率分量超过 17kHz 的语音信号，这超出了我的想象，因为人声甚至无法产生接近 10kHz 的频率。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T14:59:55.923

[尝试此处](https://github.com/stephencelis/sc_listener)提供的 SCListener 示例代码。这可以预测产生的声音的频率，并帮助您进一步进行。

# multidimensional-array - 可变大小数组的 Fortran 数组

> ID：10959386
> 
> 赞同：3
> 
> 时间：2012-06-09T07:58:33.103
> 
> 标签：multidimensional-array, fortran

问题的简化描述：

商店里正好有*maxSize人在购物。*他们每个人都有一个购物清单，其中包含项目的价格（作为整数）。使用 Fortran 数组，我如何表示所有购物清单。购物清单可以包含*任意*数量的项目（1、10、1000000000）。

（注意：实际问题要复杂得多。甚至与购物无关。）

懒惰的方法是：

```
integer :: array(maxSize, A_REALLY_BIG_NUMBER) 
```

不过这样很浪费，我基本上是想让第二个维度是可变的，然后分别给每个人分配。

显而易见的尝试，注定要失败：

```
integer, allocatable :: array(:,:)
allocate(array(maxSize, :)) ! Compiler error 
```

Fortran 似乎要求数组在每个维度上都有固定的大小。

这很奇怪，因为大多数语言将多维数组视为“数组数组”，因此您可以单独设置“数组数组”中每个数组的大小。

这是有效的*方法*：

```
type array1D
    integer, allocatable :: elements(:) ! The compiler is fine with this!
endtype array1D

type(array1D) :: array2D(10)
integer :: i

do i=1, size(array2D)
    allocate(array2D(i)%elements(sizeAt(i))
enddo 
```

如果这是唯一的解决方案，我想我会使用它。但我有点希望有一种方法可以使用内在函数来做到这一点。必须为这样一个简单的事情定义自定义类型有点烦人。

在 C 中，由于数组基本上是一个语法奇特的指针，因此您可以使用指针数组来做到这一点：

```
int sizeAt(int x); //Function that gets the size in the 2nd dimension
int * array[maxSize];

for (int x = 0; x < maxSize; ++x)
        array[x] = (int*)(calloc(sizeAt(x) , sizeof(int))); 
```

Fortran 似乎也有指针。但是我发现的唯一教程都说“永远不要使用这些”或类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T14:58:34.183

您似乎在抱怨 Fortran 不是 C。这是真的。标准委员会选择以不同方式做事的原因可能有无数个，但这里有一些想法：

Fortran 数组的强大功能之一是它们可以被切片。

```
a(:,:,3) = b(:,:,3) 
```

是一个完全有效的陈述。 *如果数组是“指向数组的指针数组”，则无法实现这一点，*因为沿每个轴的尺寸不一定一致（您要实现的正是这种情况）。

在 C 中，确实没有多维数组这样的东西。您可以使用指向数组的指针数组来实现看起来相似的东西，但这并不是真正的多维数组，因为它不共享公共内存块。这可能会影响性能。事实上，在 HPC（许多 Fortran 用户花费时间）中，多维 C 数组通常是包裹在宏中的一维数组，用于根据维度的大小计算步幅。此外，像这样取消引用 7D 数组：

```
a[i][j][k][l][m][n][o] 
```

比以下内容更难输入：

```
a(i,j,k,l,m,n,o) 
```

最后，您发布的解决方案最接近您尝试模拟的 C 代码——它有什么问题？请注意，对于您的问题陈述，可能需要更复杂的数据结构（如链表）（可以在 C 或 Fortran 中实现）。当然，就性能而言，链表是最差的，但如果这不是问题，它可能是作为“购物者”使用的正确数据结构，可以决定将更多东西添加到他们的“购物车”中，即使它不在他们带到商店的购物清单上。

# linux - bash 命令错误

> ID：10959390
> 
> 赞同：1
> 
> 时间：2012-06-09T07:59:40.063
> 
> 标签：linux, bash

```
i=0
while read line

    do
    echo "i is --- $i"
    #echo $line "\n"

    if (( $i > 0 ))
    then
    $Eda_package=$(echo $line | awk '{print $1}')
    $well_bias=$(echo $line | awk '{print $2}')
    $biasmap=$(echo $line | awk '{print $3}')
    $unified=$(echo $line | awk '{print $4}')
    echo "eda pack --$Eda_package  wellbias is --$well_bias biasmap is --$biasmap  unified-      -- $unified"
    fi
    i=$((i+1))
    done < config.list 
```

在上面的 bash 程序中，我得到一个错误：

> ./script.sh：第 9 行：=EDA_7p0：找不到命令

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T08:04:18.127

表格行：

```
$xyzzy=plugh 
```

`xyzzy` *在它们被执行之前*将被替换，因此它们看起来像：

```
=plugh 
```

假设它们尚未设置。如果设置了它们*，*您可能会得到不同的行为，但仍然几乎可以肯定不是您想要的。

你应该改变你的行（例如）：

```
$Eda_package=$(echo $line | awk '{print $1}') 
```

至：

```
Eda_package=$(echo $line | awk '{print $1}') 
```

不是变量名的`$`一部分，它表明后面的单词*是*一个应该被替换的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:12:47.653

现在让 var1=1 和 var2=2 如果你只是写 $var2=$var1 那么它会给你错误 2=1 command not found

当您初始化任何变量时，您必须在没有 $ 的情况下在左侧使用变量名

# android - 用于 Android 开发的 Maven 集成

> ID：10959395
> 
> 赞同：2
> 
> 时间：2012-06-09T08:01:03.790
> 
> 标签：android, maven, maven-plugin, android-maven-plugin, maven-ant-tasks

**我们如何将 Maven 用于 android？**

我在 android 中使用 Lint 工具来解决编程错误。

它是 Maven 和这个工具一样还是提供了比 android 更多的功能？

因为我在 Java 编程中使用 Maven 工具进行不同类型的测试，例如使用预定义的测试用例进行集成测试单元测试。

如果 Maven 在 android 中也同样工作，那么请帮助我在我现有的项目中实现。将Maven集成到android中需要完成哪些基本步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:15:11.457

以下两个链接可帮助您开始在 android 中进行 Maven 集成：

1.  [m2eclipse-android-集成](http://code.google.com/a/eclipselabs.org/p/m2eclipse-android-integration/)
2.  [新的 Maven Android 插件功能](http://blog.mycila.com/2010/07/new-maven-android-plugin-features.html)

如果您有任何具体要求或疑问，可以问我。

# sql-server - 将 .mdf 文件从 app_data 文件夹复制到默认 localhost 文件夹

> ID：10959397
> 
> 赞同：4
> 
> 时间：2012-06-09T08:01:11.043
> 
> 标签：sql-server, mdf

我的朋友给了我一个数据库文件：`record.mdf`. 我将该文件复制`.mdf`到我的`app_data`文件夹中，我可以访问它。

但是，连接字符串包含绝对路径：

```
AttachDbFilename="C:\Users\Dell\Documents\Visual Studio 2010\Projects\WebApplication2\WebApplication2\App_Data\record.mdf" 
```

但我希望它使用以下方式连接：

```
Data Source=localhost\SQLEXPRESS; 
```

如何将`.mdf`文件复制到 SQL Server 的本地文件夹，以便连接字符串不使用数据库的绝对路径？

我正在使用 Visual Studio 2010。**我没有 SQL Server Management Studio。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T08:43:22.600

第 1 步：你需要找出你的 SQL Server 的数据目录。这将是类似的

```
C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Data 
```

默认情况下（对于 SQL Server 2008 R2 Express） - 在您的情况下可能会略有不同，具体取决于您安装 SQL Server Express 的方式（以及您拥有的版本）。

第2步：将该文件复制`record.mdf`到该目录

第 3 步：将其附加到您的 SQL Server Express 实例 -`sqlcmd`如果您手头没有 Mgmt Studio，请使用：

```
c:\> sqlcmd -S .\SQLExpress 
```

然后在 sqlcmd 提示符下，输入：

```
USE [master]
GO
CREATE DATABASE record ON 
   (FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Data\record.mdf' )
FOR ATTACH_REBUILD_LOG;
GO 
```

这会将`.mdf`文件作为新的“逻辑”数据库附加`record`到 SQL Server Express 实例，并`.ldf`在此过程中重建丢失的事务日志文件 ( )。

从现在开始，您可以使用

```
server=.\SQLEXPRESS;Database=record;Integrated Security=SSPI; 
```

作为连接到数据库的连接字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T08:33:25.223

您可以使用 App_Data 目录从 App_Data 目录访问它，而不是将其复制到 SQL 服务器本地文件夹`|DataDirectory|\record.mdf`

文档： http: [//msdn.microsoft.com/en-us/library/ms247257 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms247257(v=vs.80).aspx)

# android - 如何通过坐标x，y Android在视图中查找元素

> ID：10959400
> 
> 赞同：17
> 
> 时间：2012-06-09T08:01:19.650
> 
> 标签：android

如果我知道**坐标（X，Y）**像素（通过 OnTouchEvent 方法和 getX（），getY）我如何找到元素 ex。按钮或文本等......通过使用**X，Y**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-09T08:16:27.107

您可以使用`getHitRect(outRect)`每个子视图并检查该点是否在生成的矩形中。这是一个快速示例。

```
for(int _numChildren = getChildCount(); --_numChildren)
{
    View _child = getChildAt(_numChildren);
    Rect _bounds = new Rect();
    _child.getHitRect(_bounds);
    if (_bounds.contains(x, y)
        // In View = true!!!
} 
```

希望这可以帮助，

模糊逻辑

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-16T14:04:38.477

一个稍微更完整的答案，它接受任何`ViewGroup`并递归搜索给定 x,y 处的视图。

```
private View findViewAt(ViewGroup viewGroup, int x, int y) {
    for(int i = 0; i < viewGroup.getChildCount(); i++) {
        View child = viewGroup.getChildAt(i);
        if (child instanceof ViewGroup) {
            View foundView = findViewAt((ViewGroup) child, x, y);
            if (foundView != null && foundView.isShown()) {
                return foundView;
            }
        } else {
            int[] location = new int[2];
            child.getLocationOnScreen(location);
            Rect rect = new Rect(location[0], location[1], location[0] + child.getWidth(), location[1] + child.getHeight());
            if (rect.contains(x, y)) {
                return child;
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-30T07:27:17.053

[与https://stackoverflow.com/a/10959466/2557258](https://stackoverflow.com/a/10959466/2557258)相同的解决方案，但在 kotlin 中：

```
fun ViewGroup.getViewByCoordinates(x: Float, y: Float) : View? {
    (childCount - 1 downTo 0)
        .map { this.getChildAt(it) }
        .forEach {
            val bounds = Rect()
            it.getHitRect(bounds)
            if (bounds.contains(x.toInt(), y.toInt())) {
                return it
            }
        }
    return null
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-15T19:51:38.693

修改@Luke 提供的答案。区别在于 using`getHitRect`而不是`getLocationOnScreen`. 我发现`getLocationOnScreen`选择的视图不准确。还将代码转换为 Kotlin 并将其扩展为`ViewGroup`：

```
/**
 * Find the [View] at the provided [x] and [y] coordinates within the [ViewGroup].
 */
fun ViewGroup.findViewAt(x: Int, y: Int): View? {
    for (i in 0 until childCount) {
        val child = getChildAt(i)

        if (child is ViewGroup) {
            val foundView = child.findViewAt(x, y)
            if (foundView != null && foundView.isShown) {
                return foundView
            }
        } else {
            val rect = Rect()

            child.getHitRect(rect)

            if (rect.contains(x, y)) {
                return child
            }
        }
    }
    return null
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T08:38:29.560

Android 使用 dispatchKeyEvent/dispatchTouchEvent 找到正确的视图来处理按键/触摸事件，这是一个复杂的过程。因为可能有很多视图覆盖 (x, y) 点。

但是，如果您只想找到覆盖 (x, y) 点的最顶部视图，这很简单。

1 使用 getLocationOnScreen() 获取绝对位置。

2 使用getWidth()、getHeight()判断view是否覆盖(x,y)点。

3 计算整个视图树中的视图级别。（递归调用 getParent() 或使用某种搜索方法）

4 找到既涵盖了该点又具有最大层次的视图。

# facebook - 如何在打开的图形对象中使用另一个对象的自定义属性？

> ID：10959404
> 
> 赞同：0
> 
> 时间：2012-06-09T08:01:42.057
> 
> 标签：facebook, facebook-opengraph

抱歉，我对打开图表很陌生，并且很难按照我想要的方式发布操作...

如果我有两个自定义对象（书和作者）和一个与“书”相关的动作（阅读）。我还在“书”对象中添加了“作者”类型的自定义属性。

Q1) 如何让“阅读”动作帖子包含指向“作者”对象的链接？这甚至可能吗？到目前为止，我看不到在哪里可以在任何地方使用“作者”类型的自定义属性。

Q2) 如果自定义属性名称是“myapp:author”，在元标记中我应该在内容中准确地输入什么？如在`<meta property="myapp:author" content="??????">`

如果有人能阐明一些观点，我将不胜感激。我似乎找不到任何描述如何准确使用自定义属性的 fb 文档或 stackoverflow 帖子，我已经尝试了两天来解决这个问题......

* * *

该[文档页面](https://developers.facebook.com/docs/bestpractices/tips-open-graph/)描述了我可以做什么，但我该怎么做？？？

“使用相同的烹饪应用程序示例，如果我们想将作者添加到食谱对象，我们可以简单地向对象添加一个属性“作者”，我们将在其中将作者的姓名作为字符串提供。另一种建模方法是让“作者”属性指向一个“个人资料”对象，该对象具有关于作者的名字、姓氏、个人资料图片等的元数据。”

所以回到我的两个问题

Q1）如果我有一个“cook”“recipe”动作帖子，我可以在帖子中引用“author”（例如，用户在 myapp 上通过作者烹制了一个食谱）

Q2）“作者”属性的元标记内容应该是什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:44:35.497

您可以查看[Bultin Object Book](https://developers.facebook.com/docs/opengraph/objects/builtin/#book)以了解如何定义自定义属性

```
<html>
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# 
                  book: http://ogp.me/ns/book#">
     <meta property="fb:app_id"               content="YOUR_APP_ID"> 
     <meta property="og:type"                 content="book"> 
     <meta property="og:url"                  content="URL of this object">
     <meta property="og:image"                content="URL to an image">
     <meta property="og:description"          content="Description of content">
     <meta property="og:title"                content="Name of book">
     <meta property="book:release_date"       content="DateTime">
     <meta property="book:author"             content="Who wrote this">
     <meta property="book:isbn"               content="ISBN Number">
     <meta property="book:tag"                content="keywords">
    </head>
<body>
    <!--a wonderful book -->
</body>
</html> 
```

对于自定义类型，例如在另一个对象中引用/使用一个对象，请参阅此[复杂对象类型](https://developers.facebook.com/docs/opengraph/complextypes/)

```
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# 
       your-og-app: http://ogp.me/ns/apps/your-og-app#">
  <meta property="fb:app_id"                    content="YOUR_APP_ID"> 
  <meta property="og:type"                      content="your-og-app:restaurant"> 
  <meta property="og:title"                     content="Sample Restaurant"> 
  <meta property="og:description"               content="A great sample restaurant"> 
  <meta property="og:image"                     content="https://your-great-image"> 
  <meta property="your-og-app:owner:street_address" 
        content="1601 S. California St."> 
  <meta property="your-og-app:owner:locality"       content="Palo Alto"> 
  <meta property="your-og-app:owner:region"         content="California"> 
  <meta property="your-og-app:owner:postal_code"    content="94304"> 
  <meta property="your-og-app:owner:country_name"   content="United States"> 
  <meta property="your-og-app:owner:email"          content="nospam@fb.com"> 
  <meta property="your-og-app:owner:phone_number"   content="111-111-1111"> 
  <meta property="your-og-app:owner:fax_number"     content="111-111-1111"> 
  <meta property="your-og-app:owner:website"    
        content="http://www.facebook.com">
</head>
<body>
    <!--a wonderful web page of Sample Restaurant -->
</body>
</html> 
```

有关更多信息，您应该阅读[开放图协议](http://ogp.me/)。

# python - 打印 \78 在控制台中发出哔哔声

> ID：10959410
> 
> 赞同：2
> 
> 时间：2012-06-09T08:03:08.967
> 
> 标签：python, windows

为什么下面的代码让我的机器发出哔哔声？

```
print '\78' 
```

我已经在交互式解释器中对其进行了测试，并在命令行中运行了一个脚本。我还在嵌入式环境中对其进行了测试，它不会在那里发出哔哔声。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T08:04:50.717

# android - 与各种 REST 服务集成的移动应用程序架构

> ID：10959414
> 
> 赞同：0
> 
> 时间：2012-06-09T08:04:16.193
> 
> 标签：android, ios, web-services, rest, architecture

我正在编写一个移动应用程序（首先是 iOS，然后是 Android），我计划与各种服务（Facebook、Flickr、Instagram 等）集成。

最好的方法是什么？

我的第一个选择是让移动应用程序直接使用每个服务的 REST API（我怀疑很多第一方应用程序，例如 FaceBook iOS 应用程序，都是这样构建的）。

我的第二个选择是让移动应用程序与我构建的新 REST 服务通信，我的 REST 服务将分别与每个服务的 REST api 通信。这种方法有一些优点——如果我的服务在中国等国家没有被屏蔽，我可以交叉发帖到 Facebook。我相信 Foursquare 应用程序是这样构建的（中国的 Foursquare 用户可以将签到帖子交叉到他们的 Facebook 墙上，因为与 Facebook 的连接是通过位于中国境外的 Foursquare 服务器建立的，而不是中国的移动应用程序）。

其他应用程序（例如 Instagram）是做什么的？你们有两种架构的经验，可以评论利弊吗？我对 #2 的最大担忧是如何进行身份验证，并且很难找到说明如何将各个部分连接在一起的文档或样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:26:02.950

我不知道它是否能解决你所有的问题，但根据你对你的实现案例的解释，我可以推荐[Spring for Android](http://www.springsource.org/spring-android)框架，因为它提供了 REST 模板和 OAuth 机制来通过几个社交网站登录（ ig Twitter 或 Facebook）。此外，它具有良好的文档和良好的社区规模。希望它在某种程度上有所帮助。

# iphone - 想要将 NSString 作为公式执行

> ID：10959416
> 
> 赞同：2
> 
> 时间：2012-06-09T08:04:21.730
> 
> 标签：iphone, ios, nsstring

我有一个 NSString 对象，其中指定了多个条件，如下所示：

```
NSString *strFormula1 = @"\"man\" == \"man\" && 1<5 || 12<9";
NSString *strFormula2 = @"\"pac@pac.com\" == \"pac1@pac1.com\" || 9==9 && 8>2 || 2==2"; 
```

我想执行 NSString 对象中指定的公式并找出答案为 BOOL。指定的条件是返回 True 还是 False。

提前致谢：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T08:41:38.027

只需使用`NSPredicate`这样的：

```
NSString *strFormula1 = @"\"man\" == \"man\" && 1<5 || 12<9";
NSString *strFormula2 = @"\"pac@pac.com\" == \"pac1@pac1.com\" || 9==9 && 8>2 || 2==2";
NSString *strFormula3 = @"\"hello\" == \"world\"";

NSPredicate *predicate = [NSPredicate predicateWithFormat:strFormula1];
BOOL result = [predicate evaluateWithObject:nil]; //True

predicate = [NSPredicate predicateWithFormat:strFormula2];
result = [predicate evaluateWithObject:nil]; //True

predicate = [NSPredicate predicateWithFormat:strFormula3];
result = [predicate evaluateWithObject:nil]; //False 
```

如果您想知道谓词如何解析您的表达式，只需使用：

```
NSLog(@"%@", [predicate predicateFormat]); 
```

在我们的例子中返回：

```
("man" == "man" AND 1 < 5) OR 12 < 9 //1st Expression
"pac@pac.com" == "pac1@pac1.com" OR (9 == 9 AND 8 > 2) OR 2 == 2 //2nd Expression
"hello" == "world" //3rd Expression 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:10:21.793

那么你需要一个表达式解析器和评估器。

试试这个： [http ://www.engr.mun.ca/~theo/Misc/exp_parsing.htm](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:12:38.687

您需要结合使用方法和强制转换。

您的第一个论坛将是：

```
if([@"\"man\"" isEqualToString:@"\"man\""] && 1 < 5 || 12 < 9) {
        //Forumla == TRUE
 } 
```

如果您想将其转换为 BOOL 对象，如下`@rishi`所述：

```
BOOL strFormula1 = [@"\"man\"" isEqualToString:@"\"man\""] && 1<5 || 12<9; 
```

如果您`only`有要使用的字符串，如`@qianfg`建议的那样，您需要使用某种形式的正则表达式解析字符串中的整数和字符串以确定您的变量。

# java - 只显示小数点后两位

> ID：10959424
> 
> 赞同：97
> 
> 时间：2012-06-09T08:05:03.977
> 
> 标签：java, android, number-formatting

如何获得小数点后只有两位数的双精度值。

例如

如果

```
i=348842.
double i2=i/60000;
tv.setText(String.valueOf(i2)); 
```

此代码生成`5.81403333`。

但我只想要`5.81`.

那我该怎么办？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-06-09T08:06:27.533

使用[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)。

> DecimalFormat 是 NumberFormat 的一个具体子类，用于格式化十进制数。它具有多种功能，旨在使在任何语言环境中解析和格式化数字成为可能，包括对西方、阿拉伯和印度数字的支持。它还支持不同类型的数字，包括整数 (123)、定点数 (123.4)、科学计数法 (1.23E4)、百分比 (12%) 和货币金额 ($123)。所有这些都可以本地化。

*代码片段*-

```
double i2=i/60000;
tv.setText(new DecimalFormat("##.##").format(i2)); 
```

*输出*-

> 5.81

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2012-06-09T08:39:48.500

怎么样`String.format("%.2f", i2)`？

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-12-13T05:38:30.707

在这里，我将向您展示如何使您的十进制数变短。在这里，我将把它缩短到小数点后的 4 个值。

```
 double value = 12.3457652133
  value =Double.parseDouble(new DecimalFormat("##.####").format(value)); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-07-10T04:44:26.647

许多其他答案只做格式化。这种方法将返回**值**，而不仅仅是打印格式。

```
double number1 = 10.123456;
double number2 = (int)(Math.round(number1 * 100))/100.0;
System.out.println(number2); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-06-09T09:16:32.860

我认为最好和最简单的解决方案是（KISS）：

```
double i = 348842;
double i2 = i/60000;
float k = (float) Math.round(i2 * 100) / 100; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-09T08:15:40.427

```
i=348842.
double i2=i/60000;
DecimalFormat dtime = new DecimalFormat("#.##"); 
i2= Double.valueOf(dtime.format(time));
v.setText(String.valueOf(i2)); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-09T09:09:44.743

在将数字格式化为 char 序列时，开发人员头脑中应该弹出的第一件事应该是关心这些细节，比如是否可以反转操作。

其他方面是提供适当的结果。所以你想截断数字或四舍五入。

所以在你开始之前，你应该问问自己，我是否对价值感兴趣。

为了实现您的目标，您有多种选择，但其中大多数是指[Format](http://developer.android.com/reference/java/text/Format.html)和[Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)，但我只是建议查看[这个答案](https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java)。

# php - php页面图像链接不适用于MAMP

> ID：10959426
> 
> 赞同：0
> 
> 时间：2012-06-09T08:05:59.080
> 
> 标签：php, mamp

我正在使用 mamp 在本地运行一个 php 网站。在首页（即index.php）上有一些损坏的图像链接指向图像文件，如'/images/logo.gif'。他们正在开发一个远程托管的网站版本。

在实际的主网络文件夹中，我看到一个包含子文件夹“图像”的子文件夹“资源”。我不知道图像链接是否应该知道从其他代码中查看资源文件夹，或者 html 中的 img src 字段（来自本地托管版本上的检查元素）实际上应该读取“资源/图像/徽标” .gif'。我很犹豫是否只是更改代码中的字段，而不知道它是否应该在资源中看到子文件夹。

前任。

```
-/site
-index.php
-/includes
-/resources
    ...
    -/images
        -logo.gif
        ...
-/css
etc.... 
```

对于这个新手问题，我深表歉意，但我无法找到合适的资源来找到正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:18:16.700

如果您的图片链接到“images/logo.gif”，那么您的浏览器将在您的根目录中查找图片文件夹。您收到损坏的图像链接的原因是因为您实际上没有图像文件夹！您需要将所有内容更改为“resources/images/logo.gif”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T01:15:56.717

好的，看起来在远程站点上实际上有两个单独的图像文件夹，一个在根目录，一个在资源文件夹。这可以解释我的困惑。

# jquery - 无法让 jQuery Validation 插件错误消息消失

> ID：10959429
> 
> 赞同：2
> 
> 时间：2012-06-09T08:06:18.650
> 
> 标签：jquery, callback, jquery-validate

我在 div (parent1) 中有一组单选按钮，根据页面上的其他设置通过 javascript 显示或隐藏。

```
<div class="parent1">
<input type="radio" name="legal_14" id="legal_14a" value="1" class="legal_14"/> <label for="legal_14a">option 1</label><br/>
<input type="radio" name="legal_14" id="legal_14b" value="2" class="legal_14"/> <label for="legal_14b">option 2</label><br/>
<input type="radio" name="legal_14" id="legal_14c" value="3" class="legal_14"/> <label for="legal_14c">option 3</label><br/>
<span class="val-error"></span><br/>
</div> 
```

我只想在它们可见时验证单选按钮。所以我有一个依赖回调来处理这种情况，如下所示：

```
 "legal_14": {
  required: function() {if (!$('.parent1').is(':visible')) {console.log(false); return false;} else if ($("input[name='legal_14']:checked").length > 0) {console.log(false); return false;} else {console.log(true); return true;}}},
...
errorPlacement: function(error, element) {
  element.nextAll(".val-error").first().html(error.html());
},
success: function(label) {
  label.nextAll(".val-error").first().html();
} 
```

因此，这对于在正确的情况下（即当按钮可见但未单击时）显示错误消息非常有效。问题是，一旦我选择了其中一个单选按钮，console.log 会正确返回 false，但错误消息不会消失。我在其他地方有一个类似的依赖回调，它不依赖于正常工作的可见性。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:24:34.447

根据我的理解，这应该有效：

```
if($(".parent1").is(":visible"))
{
    // do validation 

   // return message 
} 
```

# eclipse - 在 PyDev 解释器中突出显示和替换自动完成函数中的参数

> ID：10959435
> 
> 赞同：1
> 
> 时间：2012-06-09T08:08:47.113
> 
> 标签：eclipse, autocomplete, pydev

当我在 PyDev 中按 Ctrl-Alt-Enter 并开始在解释器中输入函数名称时，PyDev 提供了一个自动完成列表。当我按 Enter 键时，PyDev 完成了函数名称并在括号中添加了参数名称。这会很好，除了参数名称没有突出显示，所以我必须在按 Enter 之前删除参数（或键入一个 octothorpe）。

有没有办法让 PyDev 突出显示参数名称（理想情况下，让您像在编辑器中那样切换到下一个）或完全省略它们？必须手动删除参数会破坏自动完成带来的任何效率提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:11:29.750

不幸的是，目前无法配置。

不过，您应该能够使用 Ctrl+Enter 应用完成（而不是仅使用 Enter）。这样就可以在没有参数的情况下应用完成（也没有括号——这可能不是你想要的 100%）——请注意，同样可以在 PyDev 编辑器中完成，而不仅仅是在交互式控制台中。

请将此添加到 PyDev 功能跟踪器。

# php - MySQLi 查询是否为空表？

> ID：10959436
> 
> 赞同：0
> 
> 时间：2012-06-09T08:08:49.343
> 
> 标签：php, mysqli

我想知道有些表是空的还是空的，现在我用这段代码意识到了这个问题：

```
// if table is empty it must return TRUE, if full FALSE

private function isEmpty($tableName)
{

    if ($result = $this->mysqli->prepare("SELECT COUNT(*) FROM ?"))
    {

            $result->bind_param("s",$tableName);
            $result->execute();
            $row_cnt = $result->num_rows;

            if (empty($row_cnt))
            {

                    return TRUE;

            }
            else
            {

                    return FALSE;

            }

    }

} 
```

这段代码似乎不是很完美，我想知道是否有更好的方法来获得相同的结果，但是使用 predicate **SQL EXISTS**或其他东西？谢谢你。

**更新：** 感谢您的评论和回答，但无论如何我不知道该怎么做，这称为错误：

```
$mysqli = new mysqli("localhost","root","","database");

if ($result = $mysqli->prepare("SELECT COUNT(*) FROM `talbe` LIMIT 1"))
{

    $row = $result->fetch_row();

    echo "<pre>";
    print_r($row);
    echo "</pre>";

    $result->close();

}
$mysqli->close(); 
```

> [2012 年 6 月 9 日星期六 11:25:34] [错误] [客户端 127.0.0.1] PHP 致命错误：调用 F:\server\sites\home\test.loc\www\ 中未定义的方法 mysqli_stmt::fetch_row() empty.php 在第 9 行

**更新：**

```
$mysqli = new mysqli("localhost","root","","db");

if ($result = $mysqli->query("SELECT * FROM `table` LIMIT 1"))
{

    if ($obj = $result->fetch_object())
    {

        echo "NOT EMPTY";

    }
    else
    {

        echo "empty";

    }

    $result->close();

}
$mysqli->close(); 
```

就是这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:21:44.587

`COUNT(*)`可以很好地确定表是否为空，前提是该表没有大量行。

另一种选择是`SELECT (something) FROM ${table} LIMIT 1;`如果返回结果则表不为空。

但是你确定可以通过mysqli中的参数设置表名吗？没想到是，需要查。

# linux - uclinux编译错误

> ID：10959437
> 
> 赞同：3
> 
> 时间：2012-06-09T08:08:50.910
> 
> 标签：linux, arm, cross-compiling

我正在尝试使用硬件制造商提供的工具链来交叉编译 uclinux。

当我运行`make`命令时，我收到一个我无法理解的错误：

```
yannick@ubuntu:~/uclinux-dist$ make
make -C tools/ucfront
make[1]: Entering directory `/home/yannick/uclinux-dist/tools/ucfront'
make[1]: `ucfront' is up to date.
make[1]: Leaving directory `/home/yannick/uclinux-dist/tools/ucfront'
ln -sf /home/yannick/uclinux-dist/tools/ucfront/ucfront tools/ucfront-gcc
ln -sf /home/yannick/uclinux-dist/tools/ucfront/ucfront tools/ucfront-g++
make ARCH=arm CROSS_COMPILE=arm-uclinux-elf- -C linux-2.6.x  || exit 1
make[1]: arm-uclinux-elf-gcc: Command not found
make[1]: Entering directory `/home/yannick/uclinux-dist/linux-2.6.x'
  CHK     include/linux/version.h
make[2]: `include/asm-arm/mach-types.h' is up to date.
  CC      arch/arm/kernel/asm-offsets.s
/bin/sh: 1: arm-uclinux-elf-gcc: not found
make[2]: *** [arch/arm/kernel/asm-offsets.s] Error 127
make[1]: *** [prepare0] Error 2
make[1]: Leaving directory `/home/yannick/uclinux-dist/linux-2.6.x'
make: *** [linux] Error 1

yannick@ubuntu:~/uclinux-dist$ locate arm-uclinux-elf-gcc
...
/usr/local/arm-uclinux-tools/bin/arm-uclinux-elf-gcc
...

yannick@ubuntu:~/uclinux-dist$ echo $PATH
/usr/local/arm-uclinux-tools/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

yannick@ubuntu:~/uclinux-dist$ ls -l /usr/local/bin
...
lrwxrwxrwx 1 root root 52 May 20 22:53 arm-uclinux-elf-gcc -> /usr/local/arm-uclinux-tools/bin/arm-uclinux-elf-gcc
...

yannick@ubuntu:~/uclinux-dist$ ls -l /usr/local/arm-uclinux-tools/bin/
...
-rwxr-xr-x 1 root root   81832 May 20 19:27 arm-uclinux-elf-gcc
...

yannick@ubuntu:~/uclinux-dist$ 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:14:53.570

*运行时*路径的值`make`不一定是命令执行时的值。在您尝试编译源文件之前，我会在实际中放置一个。*`echo $PATH``makefile`*

 *这至少会表明在构建过程中是否有某些东西正在改变你的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T11:53:45.207

您还应该在环境变量中添加它

# 跨工具路径

导出 CROSS_COMPILE=arm-uclinux-elf-*

# c# - 在应用程序中显示隐藏表单

> ID：10959440
> 
> 赞同：0
> 
> 时间：2012-06-09T08:09:35.180
> 
> 标签：c#, winforms

我在窗口表单应用程序中显示或隐藏表单有问题。

我首先在 program.cs （ Application.Run(new loginform());) 开始运行 loginform，当登录成功时，然后显示另一个表单（ Main Interface ），我想在显示第二个表单时关闭或隐藏登录表单，但是它不管用。

我不知道该怎么做。是否与线程相关的问题？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Myapp
{
   static class Program
   {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Loginfrm());

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:31:42.170

您可以向您的`Loginfrm`类添加一个属性，指示登录是否成功。然后，在关闭 your 之后`Loginfrm`，您可以开始另一个消息循环。

例子：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Loginfrm login = new Loginfrm(); 
    Application.Run(login);
    if (login.LogInSuccesfull)
        Application.Run(new MainForm());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:24:55.147

```
// in the mainform add to project form and call it SubForm
SubForm subform = new Subform();
subform.Show();
// in the subform
subform.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:58:25.727

使用[单例](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

**主界面.cs**

```
using System;

public class MainInterface : Form
{
   private static MainInterface Current;

   private MainInterface ()
   {
      if ( LoginForm . Instance != null )
         LoginForm . Instance . Close ();
   }

   public static MainInterface Instance
   {
      get 
      {
         if (Current == null)
         {
            Current = new MainInterface ();
         }
         return Current;
      }
   }
} 
```

**登录表单.cs**

```
using System;

public class LoginForm: Form
{
   private static LoginForm Current;

   private LoginForm ()
   {

      if ( MainInterface . Instance != null )
         MainInterface . Instance . Close ();
   }

   public static LoginForm Instance
   {
      get 
      {
         if (Current == null)
         {
            Current = new LoginForm ();
         }
         return Current;
      }
   }
} 
```

**程序.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Myapp
{
   static class Program
   {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            LoginForm . Instance . ShowDialog ();

        }
    }
} 
```

* * *

**转换形式：**

*从登录表单*

```
LoginForm . Instance . Hide ();
MainInterface . Instance . ShowDialog (); 
```

*从主界面*

```
MainInterface . Instance . Hide ();
LoginForm . Instance . ShowDialog (); 
```

* * *

对于超过 2 个表单，我建议使用 Manager 类（例如 Process ）来管理它们并在它们之间切换:)

问候，

# .net - C#.Net 中的数据表性能

> ID：10959441
> 
> 赞同：0
> 
> 时间：2012-06-09T08:09:54.360
> 
> 标签：.net, system.data.datatable

```
 public DataTable FetchData(string sQuery)
  {
    DataTable dtable = new DataTable();           

   using (SqlConnection conn = new SqlConnection(conString))
   {
      conn.Open();

      using (SqlCommand sqlCmd = new SqlCommand(sQuery, conn))
      {
        SqlDataReader sdRead = sqlCmd.ExecuteReader();
        dtable.Load(sdRead);
      }
    }

return dtable;
}

 Datatable dt = FetchData(string sQuery);
 foreach(DataRow row in table.Rows)
  ClassA obj = new ClassA(row);

 // Some manipulations
  //.....

Class A
{

  int id;
  int name;

 A(DataRow dr)
 {

  id = dr["ID"];
  name = dr["Name"];

}
} 
```

我需要从数据库中检索近 15,00,000 行。

我需要针对两种情况的建议。

1.  我将上述方法调用了 1-5 次，因此显然它创建了 1-5 个连接。**如果它变成性能的 10-20 倍重量？**（或创建一个全局连接并打开 1 个连接并处理所有连接，然后在最后关闭。）

2.  数据表呢？任何替代方案。我认为对于这么多行，我需要断开连接的架构。我需要用检索到的数据填充我自己的类对象（或迭代数据读取器并填充`List<objects>`FetchData() 内部）。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:57:15.230

首先，您可以尝试在数据库中预处理*尽可能多的东西*（这是他们擅长的。）。

然后，您将不得不缩减您获取的数据并并行化操作。让我在这里解释一些问题：

1.  您尝试通过一个网络管道加载大量数据
2.  然后您尝试将所有大量数据存储在主内存中
3.  然后在加载和分配所有内容后，对数据进行一些计算

一个更简单的步骤是将您的数据**划分**为较小的集合（可能是 200 行）。然后您将并行运行许多线程（一个线程连接），每个线程将获取少量行，将它们放入内存并计算您想要的任何内容（然后释放未使用的内存，这将与 成比例`number_of_workers x rows_loaded_by_worker`）。

接下来，您通过播放获取的行数（100 - 10000）和并行工作人员的数量来微调该过程。

请注意，您的 SQL 查询需要有效地检索许多较小的数据集（即使用`EXPLAIN`，以确保不涉及表扫描，否则这样的方法将失败）。

# php - 如何在 PHP 中从多个值创建数组

> ID：10959442
> 
> 赞同：0
> 
> 时间：2012-06-09T08:09:55.243
> 
> 标签：php, arrays, wordpress, variables

我有一个运行良好的 PHP 代码（wordpress），我只是觉得有一种更聪明的方法可以通过某种数组来缩短整个语法，有人帮忙，代码整洁是第一位的，这里是：

```
<?php
    $user = wp_get_current_user();
    // is there someone logged?
    if ($user->ID) {
        echo '<ul class="availableindex nav nav-pills nav-stacked">';
        $n1 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER1'));
        $n2 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER2'));
        $n3 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER3'));
        $n4 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER4'));
        $n5 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER5'));
        $n6 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER6'));
        $n7 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER7'));
        $n8 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER8'));
        $n9 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER9'));
        $n10 = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER10'));

        echo '<li><a href=# class=dir>' . $n1 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n2 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n3 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n4 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n5 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n6 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n7 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n8 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n9 . '</a></li>';
        echo '<li><a href=# class=dir>' . $n10 . '</a></li>';
        echo '</ul>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T08:14:19.763

缩短的方式可能是

```
$numberArray = array('NUMBER1', 'NUMBER2',...);

foreach ($numberArray as $number)
{
   echo '<li><a href=# class=dir>' . cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, $number)) . '</a></li>';

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T08:15:37.700

```
for($i = 1; $i <= 10; $i++) {
    echo '<li><a href=# class=dir>' .
    cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER' . $i))
   '</a></li>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T08:16:21.863

您可以使用循环来创建`$n`数组，然后使用另一个循环来打印它。

```
$count = 10;
for($i = 0; $i < $count; $i++) {
    $n[$i] = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER' . $i+1));
}
for($i = 0; $i < $count; $i++) {
    echo '<li><a href=# class=dir>' . $n[$i] . '</a></li>';
} 
```

或者，如果您不需要单独执行它们，则可以在一个循环中完成所有操作，而根本不需要数组。

```
$count = 10;
for($i = 0; $i < $count; $i++) {
    echo '<li><a href=# class=dir>' . cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER' . $i)); . '</a></li>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T08:20:45.193

。尝试这个

```
$user = wp_get_current_user();
// is there someone logged?
if ($user->ID) {
    echo '<ul class="availableindex nav nav-pills nav-stacked">';

    for($i=1; $i<=10; $i+=1){
      $t = cimy_uef_sanitize_content(get_cimyFieldValue($user->ID, 'NUMBER' . $i));
      echo '<li><a href=# class=dir>' . $n[$i] . '</a></li>';
    }
    echo '</ul>';
} 
```

# printing - 格罗夫格式

> ID：10959444
> 
> 赞同：0
> 
> 时间：2012-06-09T08:10:15.310
> 
> 标签：printing, formatting, groff

groff 如何`\`在我的文本中输出符号，不要将此符号作为宏读取？以及如何禁止用破折号分隔单词？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:14:19.657

`\e`您可以根据手册页获得反斜杠的打印版本。

还有`.nh`“无连字符”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-10T14:33:24.110

对我来说，写成`\\`一种*转义序列*可以正常工作并输出一个单反斜杠“\”。

# facebook - Facebook登录重定向到空白页面

> ID：10959450
> 
> 赞同：0
> 
> 时间：2012-06-09T08:11:46.653
> 
> 标签：facebook, magento, facebook-login

我已将 Facebook 登录集成到我的网站中。

这是我使用的代码：-

```
<a rel="facebook-connect" title="Facebook Connect" href="http://www.mysite.com/index.php/facebook/customer_account/connect/"><img src="<?php echo $this->getSkinUrl('images/flogin.png') ?>" /></a> 
```

当我通过替换在本地主机中尝试它时它工作正常`href="http://localhost/magento/index.php/facebook/customer_account/connect/"`

但是当我将它集成到实时网站时，它会将我重定向到一个空白页面，其 url 如下：-

```
www.mysite.com/index.php/facebook/customer_account/connect/ 
```

之后什么都没有发生。这个问题与上述网址或网站网址或其他任何内容有关吗？

我的应用程序设置是： -

*   网站网址：-`http://www.mysite.com/`
*   站点域：-`mysite.com`

# java - 将鼠标事件从 JList 转发到列表中的项目

> ID：10959451
> 
> 赞同：1
> 
> 时间：2012-06-09T08:12:17.010
> 
> 标签：java, swing, mouseevent, jlist

目前，我有`Jlist`一个自定义`CellRenderer`如下。我附加了一个自定义`MouseListener`以捕获悬停事件，然后是双击事件；但是当我以这种方式添加它们时，事件并没有被触发。20 分钟后，我发现这是因为`JList`阻止了事件到达各个列表项。有什么方法可以强制将`JList`鼠标事件转发给它的子元素，或者有更好的方法来做到这一点。

我的细胞渲染器：

```
public class FriendRenderer extends DefaultListCellRenderer {

    private static final long serialVersionUID = 1L;

    public Component getListCellRendererComponent(JList list,
            Object value,
            int index,
            boolean isSelected,
            boolean hasFocus) {

        Friend friend = (Friend)value;

        JLabel label = new JLabel(friend.getName());

        JPanel mainOuterPanel = new JPanel();
        mainOuterPanel.setLayout(new BorderLayout());

        /* Adding components to mainOuterPanel... */

        /* Here is where I add the custom MouseListener */
        mainOuterPanel.addMouseListener(new ListItemMouseListener());

        return(mainOuterPanel);
    }

} 
```

我的鼠标监听器：

```
public class ListItemMouseListener implements MouseListener{

    @Override
    public void mouseClicked(MouseEvent e) {}

    @Override
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseReleased(MouseEvent e) {}

    @Override
    public void mouseEntered(MouseEvent e) {
        Component source = e.getComponent();
        source.setBackground(new Color(102, 99, 86));
        System.out.println("Mouse entered on " + source.toString());
    }

    @Override
    public void mouseExited(MouseEvent e) {
        Component source = e.getComponent();
        source.setBackground(null);
        System.out.println("Mouse Exited on " + source.toString());
    }
} 
```

我在 JFrame 中构建 JList 的位置：

```
private JList getFriendsList(){
    friendsList = new JList(getFriendsListModel()); //TODO Actually fill with data
    friendsList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    friendsList.setLayoutOrientation( JList.VERTICAL );
    friendsList.addListSelectionListener(new FriendsListSelectionListener());
    friendsList.setCellRenderer(new FriendRenderer());
    return friendsList;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:17:09.133

将侦听器添加到列表并使用列表方法将点转换为行。

添加到渲染器时它不起作用的原因是渲染器实际上仅用于..渲染。它就像一个“模板”，用于在项目出现在屏幕上之前绘制列表项（以及所有其他可见的列表项）。

* * *

> ..访问单元格..以更改背景..

配置[`ListCellRenderer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListCellRenderer.html)来处理。

# c# - 用于大型静态索引数据的最佳无服务器数据库？

> ID：10959453
> 
> 赞同：3
> 
> 时间：2012-06-09T08:12:43.827
> 
> 标签：c#, .net, sql, database, sqlite

什么是最好的无服务器数据库，用于查询静态数据，性能好，数据会有很多索引？

我有一些要查询的数据，我不需要任何类型的事务或更改，数据为 5.0 GB，我需要将其与某些应用程序一起部署，我的列上需要 40 个索引，什么是最好使用的技术，由于数据大小的限制，我不能使用 SQL CE，我的建议是 sqlite 和 Firebird，还有其他选择，什么是最好的，为什么？

**注意**：大多数索引位于 int 列上，而其他索引位于要使用 (=) 运算符进行比较的小字符串列上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:31:21.393

我建议将 SQLite 与事务一起使用。到目前为止，我在运行 1 GB 的数据库文件时从未遇到过任何性能问题。

也许这个链接会有所帮助： [SO on using SQLite with large datasets](https://stackoverflow.com/questions/1033309/sqlite-for-large-data-sets)

SQLite 在并发方面存在一些问题，但如果你的用户不多，那么它会是一个不错的选择：

[SQLite 官方 何时使用](http://www.sqlite.org/whentouse.html)

并且有一些限制，在生产使用中几乎从未发生过（例如 2 GB Blob） [SQlite 官方限制](http://www.sqlite.org/limits.html)

# objective-c - 单击 UIWebView 上的链接时打开新的 UIViewController

> ID：10959456
> 
> 赞同：3
> 
> 时间：2012-06-09T08:14:03.023
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uiwebview

我发现这个线程与我的问题相匹配：[Clicking a link in UIWebView pushes on the NavigationView stack](https://stackoverflow.com/questions/3815167/clicking-a-link-in-uiwebview-pushes-onto-the-navigationview-stack)

但是，以下情况有所不同： 我没有使用导航控制器，而是使用基于视图的应用程序在按下相应按钮时手动切换到不同的视图控制器。我没有使用链接，而是使用 onClick 方法来检测用户何时单击 UIWebView 上的某些内容并尝试使用新的 UIWebView 打开新的 ViewController。

相同的代码会起作用还是我必须进行一些更改？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T08:20:33.840

你将不得不做一些修改

第一个：当 时`onClick`，您必须将当前页面重定向到新位置 例如，此位置将是`MYLocation://GoThere`

第二：更新`shouldStartLoadWithRequest`

```
-(BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

NSURL *url = request.URL;
NSString *urlString = url.absoluteString;

//Check if special link
if ( [ urlString isEqualToString: @"MYLocation://GoThere" ] ) {
    //Here present the new view controller
    MyViewController *controller = [[MyViewController alloc] init];
    [self presentViewController:controller animated:YES];

    return NO;
}

    return YES;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:25:20.530

我认为您可以使用 Omar 发布的 shouldStartLoadWithRequest 。如果新的 viewcontroller 有一个 webviewcontroller，那么你应该将 url（甚至是请求）传递给新的 viewcontroller 以显示点击的 URL。

# google-maps - Google MAP API：如何绘制两个地理点之间的最短平面路径？

> ID：10959473
> 
> 赞同：6
> 
> 时间：2012-06-09T08:18:26.243
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我需要在地图上绘制最短的平面路径。我在 Google Earth 中创建了 KML，并将 int 加载到 Google Map。正如您所看到的附加图像：路径非常不同：Google Vap 路径更长。如何在谷歌地图上绘制圆弧路径？

![Google 地球中的路径](../Images/b23198d8300d12402c14ed0c19ece508.png) ![谷歌地图中的相同路径](../Images/baed92eae3b9fc17590fc98388cbc5e4.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T15:10:10.897

在 V3 中，它只是将`geodesic: true`选项添加到您的折线。

**演示** [http://jsfiddle.net/yV6xv/20/](http://jsfiddle.net/yV6xv/20/)点击地图定义路径端点

```
 var myLine = new google.maps.Polyline({
      map: map,
      geodesic: true
    });

    var path = [];

    google.maps.event.addListener(map, 'click', function(event) {
      new google.maps.Marker({map:map,position:event.latLng});
      path.push(event.latLng);
      myLine.setPath(path);
    }); 
```

![演示结果](../Images/92ba3dd8c5dcc386e36846609800ea7d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:24:15.200

此示例适用于 API V2，但数学与 V3 相同：http: [//maps.forum.nu/gm_flight_path.html](http://maps.forum.nu/gm_flight_path.html)

马塞洛。

# cocos2d-android - Cocos2d-Android 自定义字体不起作用

> ID：10959475
> 
> 赞同：2
> 
> 时间：2012-06-09T08:19:09.987
> 
> 标签：cocos2d-android, custom-font

我正在尝试在带有 CClabel 的 Cocos2d-Android 中使用自定义字体，我已将我的字体文件添加到资产中并尝试按名称“Faraco_Hand.ttf”和“Faraco_Hand”使用它，但它不起作用，我已经用谷歌搜索过但没有没有找到任何解决方案。这就是我的代码的样子：

```
currentVideoLabel = CCLabel.makeLabel(VideosLabels[currentSelected], "Faraco_Hand.ttf", winSize.width/41);
        currentVideoLabel.setPosition(CGPoint.make(winSize.width/2, 20));
        addChild(currentVideoLabel); 
```

如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T04:10:55.010

嗨，我在这里使用这种方式在我的游戏中添加字体我正在与你分享我的代码检查它希望它对你有帮助我在标签上设置我的字体这是设置字体的唯一方法......一切都好

示例：1

```
 CCLabel labelcontinue = CCLabel.makeLabel("continue", "fonts/JimboStd-Black.otf", 14);
                labelcontinue.setPosition(CGPoint.ccp(272, 95));
                labelcontinue.setColor(ccColor3B.ccc3(165, 42, 42));
                mainPaperNode.addChild(labelcontinue, 25); 
```

示例 2：

```
 CCLabel labelWelcome = CCLabel.makeLabel("Welcome", "fonts/JimboStdBlack.otf",20);
        labelWelcome.setColor(ccColor3B.ccc3(139, 69, 19));
        labelWelcome.setPosition(CGPoint.ccp(innerArea.getContentSize().getWidth() / 2, (innerArea.getContentSize().getHeight() / 2) + 138));
        innerArea.addChild(labelWelcome); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T09:19:34.547

我知道这是迟到的回复，无论如何它可能会帮助搜索相同内容的人... CCLabel 支持外部字体，但某些 ttf 不会被 android 识别，所以它会通过异常，所以你最好尝试另一种字体而不是这个代码是一样的...

```
 label = CCLabel.makeLabel("label value", "external_font_name.ttf", 30);
  label.setPosition(CGPoint.make(winSize.width/2, 20));
  addChild(label); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T15:41:25.437

我认为你的方法没有任何问题。我想问题是你正在重命名原始字体文件。使用原始名称重命名字体文件名（写入字体文件本身，检查附件图像）。

![在此处输入图像描述](../Images/d560a0af85ac9ea703159262beb02db5.png)

在这种情况下，我将 ttf 文件保存在**Resources/fonts**文件夹中，并编写了如下代码：

```
CCLabelTTF* label = CCLabelTTF::create("Hello World", "fonts/A Damn Mess.ttf", 20); 
```

还要检查**CCLabelTTF**而不是**CCLabel**。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T07:14:20.293

*海这会有所帮助。这段代码对我来说很好。将自定义字体 int assets->fonts*

```
CCLabel label1 = CCLabel.makeLabel("Points: 0", "fonts/pin.ttf", 28);
    label1.setColor(ccColor3B.ccWHITE);
    label1.setPosition(280f * scaleX, 550f * scaleY);
    addChild(label1); 
```

# ios - 是否可以在 iOS 5.1.1 iPad 设备中运行使用 5.0 SDK 部署的 iPhone 应用程序

> ID：10959479
> 
> 赞同：1
> 
> 时间：2012-06-09T08:19:43.560
> 
> 标签：ios

我已经使用 Xcode 4.2.1 和 iOS 5.0 SDK 目标构建了应用程序，现在我的 iPad 设备中有 iOS 5.1，我要知道的是，如果我将设备升级到 iOS 5.1.1，我的应用程序可以工作。我只是用谷歌搜索了它，但我找不到解决方案。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:21:35.087

是的，它会工作，它也将在未来的任何 ios 上工作（ios 6+ 等）。请在此处查看我的答案[我的应用程序是否适用于新的 iOS？](https://stackoverflow.com/questions/10913662/will-my-app-work-with-a-new-ios/10913684#10913684)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:31:03.413

如果您正在谈论部署以进行测试，您至少需要 Xcode 4.3（仅适用于 Lion）才能在 iOS 5.1 的设备上运行您的应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T05:38:05.523

我已经使用 Xcode 4.2.1 和 5.1 部署目标测试了我的应用程序构建，现在我可以在安装了 iOS 5.1.1 的设备上运行该应用程序。 **注意：** 确保您的 Xcode 支持 iOS 5.1 SDK 框架。

# c# - 时间：2019-01-03 标签：c#mysql十进制数字。或者 ，

> ID：10959482
> 
> 赞同：0
> 
> 时间：2012-06-09T08:20:12.017
> 
> 标签：c#, mysql, decimal

我在 mysql 数据库中有一个表 EXPENSES，其中一列是 AMMOUNT，类型为 decimal(10,2)。我有一个 C# (winforms) 应用程序，它带有一个用于在数据库中插入值的文本框。

```
string initialquery = "INSERT INTO EXPENSES (ID, E_DATE, AMMOUNT, PERSON, COMMENTS, T_ID) " +
                            "VALUES ('" + id + "', '" + date.ToString("yyyy:MM:dd") + "', '" + ammount + "', '" + person + "', '" + comments + "', '" + tid + "')";
        //yyyy:MM:dd hh:mm:ss
        myMySqlConnection.Open();
        MySqlCommand command1 = new MySqlCommand(initialquery, myMySqlConnection);
        command1.ExecuteNonQuery();
        if (lang == 2)
            MessageBox.Show("ΤΑ ΔΕΔΟΜΕΝΑ ΑΠΟΘΗΚΕΥΤΗΚΑΝ");
        else if (lang == 1)
            MessageBox.Show("DATA SAVED");
        myMySqlConnection.Close(); 
```

问题与区域设置有关。如果我将格式设置为希腊语。十进制符号为“，”。当我尝试使用“，”插入十进制值时，它不接受它（存储为 405 而不是 40,5）。如果我将十进制符号设置为“。” 我在文本框中 40.5 存储正确。如果我将区域设置设置为英语并将十进制值设置为“，”，则再次无法正常工作。似乎只有当十进制符号是“。”时才接受十进制数字。我不太明白这一点。我怎样才能让它接受“，”作为小数运算符？

最好的问候乔治乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:07:35.117

我认为您设置了开发机器的区域设置，但 SQL Server 仍处于 en-us 模式，因此也要更改 SQL Server 的区域设置。

希望它可以接受你想要的小数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:14:08.073

您可以`CultureInfo.InvariantCulture`在从十进制转换为字符串时使用。

见[msdn](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)

报价：

```
decimal value = -16325.62m;
// Display value using the invariant culture.
Console.WriteLine(value.ToString(CultureInfo.InvariantCulture));
// Display value using the en-GB culture.
Console.WriteLine(value.ToString(CultureInfo.CreateSpecificCulture("en-GB")));
// Display value using the de-DE culture.
Console.WriteLine(value.ToString(CultureInfo.CreateSpecificCulture("de-DE")));
// This example displays the following output to the console:
//       -16325.62
//       -16325.62
//       -16325,62 
```

请注意，如果您的用户在他的输入中使用逗号，您可以使用机器文化从字符串转换为十进制，并在构建查询时使用`CultureInfo.InvariantCulture`“。”转换回字符串。（时期）。

高温高压

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T07:17:02.420

为了解决这个问题，我使用了一个不太正确的代码，但这就是我所做的。 `string ammount = (textBox2.Text).Replace (",",".");` 我将值作为字符串插入。将值传递给 sql 语句时：

```
string initialquery = "INSERT INTO EXPENSES (ID, E_DATE, AMMOUNT, PERSON, COMMENTS, T_ID) " +
                                "VALUES ('" + id + "', '" + date.ToString("yyyy:MM:dd") + "', '" + ammount + "', '" + person + "', '" + comments + "', '" + tid + "')"; 
```

及其工作

# bash - 如何在bash中的陷阱返回后重新提示？

> ID：10959487
> 
> 赞同：3
> 
> 时间：2012-06-09T08:20:55.400
> 
> 标签：bash, shell, signals

我有一个应该捕获 SIGTERM 和 SIGTSTP 的脚本。这就是我在主块中的内容：

```
trap 'killHandling' TERM 
```

在函数中：

```
killHandling () {
    echo received kill signal, ignoring
    return
} 
```

... 和 SIGINT 类似。问题是用户界面之一。脚本会提示用户输入一些内容，如果在脚本等待输入时出现 SIGTERM 或 SIGINT，那就令人困惑了。这是这种情况下的输出：

```
Enter something:     # SIGTERM received
received kill signal, ignoring

      # shell waits at blank line for user input, user gets confused
      # user hits "return", which then gets read as blank input from the user
      # bad things happen because of the blank input 
```

我肯定见过可以更优雅地处理此问题的脚本，如下所示：

```
Enter something:     # SIGTERM received
received kill signal, ignoring
Enter something:     # re-prompts user for user input, user is not confused 
```

实现后者的机制是什么？不幸的是，我不能简单地更改我的陷阱代码来重新提示，因为脚本会提示用户几件事，并且提示所说的内容取决于上下文。并且必须有比编写依赖于上下文的陷阱函数更好的方法。

我将非常感谢任何指示。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T22:36:27.660

这些不是非常健壮的方法——例如，它在第一个陷阱之后将 CTRL-C 作为字符处理的方式存在一些问题——但它们都处理您定义的用例。

### 使用 BASH_COMMAND 重新运行最后一个命令（例如读取）。

```
prompt () {
    read -p 'Prompting: '
}
reprompt () {
    echo >&2
    eval "$BASH_COMMAND"
}
trap "reprompt" INT
prompt 
```

在这种情况下，*BASH_COMMAND* 的计算结果为`read -p 'Prompting: '`。然后需要使用 eval 重新处理该命令。如果你不评估它，你可能会遇到奇怪的引用问题。YMMV。

### 使用 FUNCNAME 重新运行调用堆栈中的前一个函数。

```
prompt () {
    read -p 'Prompting: '
}
reprompt () {
    echo >&2
    "${FUNCNAME[1]}"
}
trap "reprompt" INT
prompt 
```

在此示例中，*FUNCNAME[1]*扩展为`prompt`，这是堆栈中的前一个函数。我们只是递归地再次调用它，根据需要多次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:09:59.873

CodeGnome 给出的答案是有效的，但正如他所指出的，它并不可靠；第二个 control-c 会导致不良行为。我最终通过更好地利用代码中现有的输入验证解决了这个问题。所以我的中断处理代码现在看起来像这样：

```
killHandling () {
   echo received kill signal, ignoring
   echo "<<Enter>> to continue"
   return
} 
```

现在光标仍然在空白行等待用户输入，但用户没有混淆，按提示按“Enter”键。然后脚本的输入验证检测到输入了一个空行，将其视为无效输入，并重新提示用户输入内容。

我仍然感谢 CodeGnome 的建议，我从中学到了一些东西。对于延迟发布此答案，我深表歉意。

# python - 构建 DSL 查询语言

> ID：10959489
> 
> 赞同：10
> 
> 时间：2012-06-09T08:21:12.933
> 
> 标签：python, django, dsl

我正在开发一个项目（用 Django 编写），它只有几个实体，但每个实体有很多行。

在我的应用程序中，我有几个静态“报告”，直接用普通 SQL 编写。用户还可以通过通用过滤器表单搜索数据库。由于目标受众非常精通技术，并且在某些时候过滤器无法满足他们的需求，我考虑为我的数据库创建一种查询语言，例如[YQL](http://developer.yahoo.com/yql/console/)或[Jira 的高级搜索](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)。

我找到了[http://sourceforge.net/projects/littletable/](http://sourceforge.net/projects/littletable/)和[http://www.quicksort.co.uk/DeeDoc.html](http://www.quicksort.co.uk/DeeDoc.html)，但似乎它们只对内存对象进行操作。由于数据库可能太大而无法将其保存在内存中，因此我希望在执行实际工作之前将查询翻译成 SQL（或者更好的是 Django 查询）。

有没有关于如何做到这一点的图书馆或最佳实践？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T20:20:12.500

[使用PLY](http://www.dabeaz.com/ply/)编写这样的 DSL 实际上非常容易，而且，在 Django 中，已经有一个示例可用于执行您想要的操作。你看，Django 有一个叫做[`Q`对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)的奇特的东西，它使 Django 查询事情变得相当容易。

在 2012 年 DjangoCon EU 上，Matthieu Amiguet 发表了题为“*在 Django 应用程序中实现特定领域语言*”的会议，他在其中经历了整个过程，一直到实现您想要的这种 DSL。[他的幻灯片，包括所有你需要的，都可以在他的网站上找到。](http://www.matthieuamiguet.ch/media/misc/djangocon2012/djangocon2012.html)最终代码（无论如何链接到最后一张幻灯片）可在[http://www.matthieuamiguet.ch/media/misc/djangocon2012/resources/compiler.html](http://www.matthieuamiguet.ch/media/misc/djangocon2012/resources/compiler.html)获得。

Reinout van Rees[对该会议也发表了一些好评](http://reinout.vanrees.org/weblog/2012/06/04/domain-specific-languages.html)。（他通常会这样做！）这些涵盖了一些缺失的上下文。

在给出的示例中，您可以看到与 YQL 和 JQL 非常相似的内容：

*   `groups__name="XXX" AND NOT groups__name="YYY"`
*   `(modified > 1/4/2011 OR NOT state__name="OK") AND groups__name="XXX"`

它也可以很容易地调整；例如，您可能想要使用`groups.name`而不是`groups__name`（我愿意）。这种修改可以相当简单地进行（允许`.`在 FIELD 标记中，通过修改`t_FIELD`，然后在构造对象之前`.`替换为）。`__``Q``p_expression_ID`

所以，这就满足了简单的查询；如果您希望制作更复杂的 DSL，它还为您提供了一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T09:33:43.340

我正好遇到了这个问题 - 一个需要搜索的大型数据库。我使用 django 制作了一些静态报告和几个精美的过滤器（使用[django](https://www.djangoproject.com/)非常简单），就像你一样。

然而，高级用户要求更多。我决定已经有一个他们都知道的[DSL -](http://en.wikipedia.org/wiki/Domain-specific_language) [SQL](http://en.wikipedia.org/wiki/SQL)。问题是如何使它足够安全。

因此，我使用 django 权限授予高级用户在新表中进行 SQL 查询的权限。然后，我为不太强大的用户提供了使用这些查询的视图。我让它们采用可选参数。查询是使用 Python 的较低级别[DB-API](http://www.amk.ca/python/writing/DB-API.html)运行的，无论如何 django 在其 ORM 的底层使用它。

真正的诀窍是打开一个只读数据库连接来运行这些查询，以确保没有运行任何更新。我通过在数据库中创建具有较低权限的不同用户并在视图中为该用户打开特定连接来建立只读连接。

TL;DR - SQL 是要走的路！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T20:06:50.920

[实际上，您可以使用pyparsing](https://github.com/pyparsing/pyparsing)编写自己的 SQL 语言。您甚至可以扩展非常详细的[示例。](https://github.com/pyparsing/pyparsing/blob/master/examples/simpleSQL.py)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T09:55:21.673

根据数据的形式、用户需要使用的查询类型以及数据更新的频率，Nick Craig-Wood 建议的纯 SQL 解决方案的替代方案是在[Solr](http://lucene.apache.org/solr/)中索引您的数据，然后运行对它的查询。

Solr 增加了一层复杂性（配置、数据同步），但速度超快，可以处理大型数据集，并提供（相对）直观的查询语言。

# javascript - 通过 js/jQuery 发布数据

> ID：10959490
> 
> 赞同：-2
> 
> 时间：2012-06-09T08:21:29.097
> 
> 标签：javascript, jquery

我对 Javascript 及其许多出色的库真的很陌生，我发现即使是最简单的脚本也很难执行。

我确实想学习这种语言，因为它对于创建客户网站非常有用，但是目前我正在尝试做一些相对简单的事情，这是在我的网站上标记个人信息。一个大列表中有很多消息，我正在查看的是当用户单击“标志 PM”图像时，它将在后台运行 flag.php，这会将 MySQL 中的标志字段从 0 更改为 1。

该脚本都依赖于一个字段，即 id，因此我可以通过数据库运行它。无论如何，这是我的代码；

**标志.php**

```
 require('_inc/_core/core.php'); // inc core_funcs for sql & clean
$pm_id = clean($_POST['p_id']); // create new variable, clean the post
echo "The ID for the PM is " . $pm_id;
mysql_query("UPDATE `messages` SET `flag_status` = 1 WHERE `id` = {$pm_id}"); // update the db 
```

**JS/jQuery**

```
 // Flag a Personal Message
$("#flagPM").submit(function(event) {
    event.preventDefault(); 
    $.post("flag.php", { p_id: pm_id } );
    alert(event);
}); 
```

**处理表单的 HTML**

```
<form action="#" id="flagPM"><input type="hidden" id="pm_id" value="$id" />
        <input type="submit" class="submit" value="FLAG" /></form> 
```

所以有一个名为**pm_id**的隐藏输入字段，其中包含我要发布的内容。

非常感谢一些帮助，Javascript 是从一个独立文件运行的，该文件是 flag.php 的两个目录

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:35:09.763

> Javascript 是从一个独立文件运行的，该文件是从 flag.php 开始的两个目录

在这种情况下，只需执行以下操作：

```
$.post("flag.php", { id: id } ); 
```

不会到达`flag.php`文件，您需要指定正确的路径，包括您提到的文件夹名称：

```
$.post("folder1/folder2/flag.php", { id: id } ); 
```

顺便说一句，您应该使用回调`$.post`函数来了解返回的消息`flag.php`：

```
$.post("flag.php", { id: id }, function(data){
  alert(data);
} ); 
```

从您的`flag.php`，确保`echo`您在 ajax 处理程序中获得该响应：

```
// your other code here, such as query, etc
echo 'whatever...'; 
```

# apache - 如何从 home.php 重定向到 home？

> ID：10959496
> 
> 赞同：0
> 
> 时间：2012-06-09T08:22:22.470
> 
> 标签：apache, .htaccess, mod-rewrite

这是我在 .htaccess 中的代码：

```
Options -Multiviews
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^home$ home.php [L] 
```

使用此代码，网址 www.example.com/home 确实有效，但它不会从 www.example.com/home.php 重定向到 www.example.com/home

改用此代码：

```
Options -Multiviews
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^home$ home.php [R=301,L] 
```

我收到此错误：

```
Not Found

The requested URL /var/chroot/home/content/08/236108/html/home.php was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

如何从 home.php 重定向到 home 并避免错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:27:24.160

```
Options -Multiviews
Options +FollowSymlinks

RewriteEngine on
RewriteBase /

RewriteRule ^home$ home.php [L]

RewriteCond %{THE_REQUEST} home\.php
RewriteRule ^home.php$ home [R=301,L] 
```

# sql - 在 SQL Server 中的数值数据类型前插入零

> ID：10959498
> 
> 赞同：0
> 
> 时间：2012-06-09T08:22:57.290
> 
> 标签：sql, sql-server, tsql

我试图在 SQL Server 中的类型为的列中插入一个值`numeric(18, 0)`。

我无法在开头插入零。例如添加`022223`被插入为`22223`...

我认为将列类型更改为`varchar`可行，但我不想更改表结构。

在不更改表结构的情况下执行此操作的任何方法..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:23:23.013

您可以在读取和插入这样的值时应用转换：

插入值时：

```
string s = "00056";
 double val = double.Parse("0." + s); 
```

并在查询值使用时：

```
double value = 0.00056; // stored value in your db field
 s = val.ToString().Remove(0,2); 
```

我认为它在任何情况下都会起作用 - 无论你的价值是否领先于零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:30:46.060

没有必要在数据库中使用这个。毕竟，您将选择数据，不是吗？所以在选择时做这样的[事情](http://blog.sqlauthority.com/2009/03/10/sql-server-pad-ride-side-of-number-with-0-fixed-width-number-display/)。我在谷歌中查找“mssql 数字前导零”。所有解决方案都像我提到的链接一样:) 或者显然，如果您出于某种原因必须在表中包含类似的数据，请使用 varchar :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:31:31.493

好吧，我认为这是不可能的，因为它被存储为 32 位，所以在打印时只需添加前导零......有多种方法。 [http://sqlusa.com/bestpractices2005/padleadingzeros/](http://sqlusa.com/bestpractices2005/padleadingzeros/)

# excel - 在工作表 2 中查找匹配值并复制工作表 1 中的相邻单元格值

> ID：10959500
> 
> 赞同：1
> 
> 时间：2012-06-09T08:23:17.830
> 
> 标签：excel, excel-2010

我搜索了许多类似的主题，但找不到任何可以满足我需要的东西。

我正在尝试创建一个跟踪飞镖游戏分数的工作表。

在**表 1**上，我有两列简单地跟踪每个玩家从 501 到 0 的投掷

**第 25 行**是每个玩家的剩余金额。

在**表 2**中，我有 2 列。A**列**包含您可以结帐的分数，**B 列**包含结帐*，例如 (T20, T20, D18)*。因此，如果**Sheet 1 的第 25 行中的值****与 sheet 2 的 A 列**中的任何值匹配，我想在***Sheet 2****的匹配行中显示***B 列的值，在** **Sheet 1**的剩余分数下方。

 ****谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:09:12.830

不知道你到底是什么意思，但第 26 行中的这个公式应该可以解决问题：

```
=index('Sheet 2'!$B:$B;match(A25;'Sheet 2'!$A:$A;0)) 
```

*   如果您的列表分隔符是逗号`,`，请使用它而不是分号`;`
*   您可能希望`1`用作 match 函数的第三个参数，如果要根据大于第 25 行中的数字的最接近的匹配显示结帐，并且工作表 2 中的 A 列按升序排序（1-9 )
*   或者`-1`如果您想要更小的最近匹配并且 A 列按降序排序 (9-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T15:06:17.803

你可以使用这个：

```
=IFERROR(VLOOKUP(A4, Sheet2!$C$2:$E$65535, 3, FALSE),0) 
```****

# cakephp - CakePHP 在 App 的控制器中调用插件模型

> ID：10959504
> 
> 赞同：2
> 
> 时间：2012-06-09T08:24:52.127
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-model

我正在构建一个插件并在插件模型中有某些方法。

从应用程序的控制器可以说用户控制器我想从插件调用模型。

我如何访问插件模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:17:30.850

```
$this->loadModel('PluginName.ModelName'); 
```

有什么大不了的？

# asp.net-mvc-3 - 当多个操作员工作时，Nop Commerce 管理面板上的响应时间很慢

> ID：10959506
> 
> 赞同：2
> 
> 时间：2012-06-09T08:25:04.247
> 
> 标签：asp.net-mvc-3, performance, nopcommerce

我们的实时网站使用了 nop commerce 2.3，带有 appx。100000 多种产品，800 个类别和 5000 家制造商。

它是托管在具有四核处理器和 16 GB 内存的专用服务器上的实时站点。

而一个 30 人的团队正在处理站点操作，包括添加新产品、更新现有产品和图片、订单处理等。大多数时候，我们面临着 Nop Commerce 管理员面板的很多问题。sql 超时等问题非常常见。而且管理面板速度慢得要命，一个人平均每天只能插入近8个产品。这给我们带来了很多痛苦。

为了解决这个问题，我们在连接到实时数据库服务器的本地 Intranet 服务器上托管了应用程序。但是有同样的问题。刚刚注意到，当我们在管理面板上工作时，现在实时站点没有问题。但是当我们在管理面板中工作时，管理方面仍然没有真正的改进。如果只有一个人负责管理，那么站点速度足以支持他的操作，但对于团队来说这还不够。

您有什么建议和建议的步骤来改善这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:26:02.137

老实说，这似乎更像是一个数据库问题，而不是其他任何事情，因为一个人可以使用它，但很多人不能。你有没有花时间分析：

*   性能不佳的查询
*   死锁
*   表或索引扫描
*   缺少索引或未使用的索引

除此之外，您是否通过管理应用程序进行了调试，以隔离管理应用程序中的哪些调用正在经历这些减速，如果您的性能问题与数据库无关？

# android - 持有对已创建活动的引用？

> ID：10959507
> 
> 赞同：1
> 
> 时间：2012-06-09T08:25:06.193
> 
> 标签：android, android-intent, android-activity

我正在开发一款安卓游戏，并且刚刚添加了一个主菜单。这是一个单独的活动——所以当有人点击菜单上的“新游戏”按钮时，它会打开一个新的游戏活动意图。

我的问题是如果用户点击“返回”，它会关闭游戏并返回主菜单。当我再次点击“新游戏”时，它崩溃了。

我认为它正在尝试制作游戏的第二个版本，并且内存不足。我是否应该尝试在菜单中保留游戏活动的副本，然后在他们再次点击“新游戏”时重新打开它？或者有没有更简单的方法来做到这一点？

我的“新游戏”按钮侦听器执行以下操作：（IslandGame 是我的主要游戏类 - 捆绑只是告诉它是开始新游戏还是加载以前的游戏，以及从哪个级别开始）

```
ButtonNewGame.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {                 
            Bundle bundle = new Bundle();
            bundle.putString("RESTORE", "NEW"); //in the restore key, say we want a new game
            bundle.putInt("CAMPAIGN", 1); //start in campaign #1

            Intent intent = new Intent(Intent.ACTION_RUN);
            intent.putExtras(bundle);
            intent.setClassName(thisActivity, IslandGame.class.getName());
            startActivity(intent);
        }         
    }); 
```

日志是：

```
06-09 17:42:34.199: E/dalvikvm-heap(239): 147456-byte external allocation too large for this process.
06-09 17:42:34.199: E/(239): VM won't let us allocate 147456 bytes
06-09 17:42:34.209: D/AndroidRuntime(239): Shutting down VM
06-09 17:42:34.209: W/dalvikvm(239): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-09 17:42:34.219: E/AndroidRuntime(239): Uncaught handler: thread main exiting due to uncaught exception
06-09 17:42:34.249: E/AndroidRuntime(239): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dylan.island/com.dylan.island.IslandGame}: android.view.InflateException: Binary XML file line #37: Error inflating class <unknown>
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.os.Looper.loop(Looper.java:123)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-09 17:42:34.249: E/AndroidRuntime(239):  at java.lang.reflect.Method.invokeNative(Native Method)
06-09 17:42:34.249: E/AndroidRuntime(239):  at java.lang.reflect.Method.invoke(Method.java:521)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-09 17:42:34.249: E/AndroidRuntime(239):  at dalvik.system.NativeStart.main(Native Method)
06-09 17:42:34.249: E/AndroidRuntime(239): Caused by: android.view.InflateException: Binary XML file line #37: Error inflating class <unknown>
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.Activity.setContentView(Activity.java:1622)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.dylan.island.IslandGame.onCreate(IslandGame.java:76)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
06-09 17:42:34.249: E/AndroidRuntime(239):  ... 11 more
06-09 17:42:34.249: E/AndroidRuntime(239): Caused by: java.lang.reflect.InvocationTargetException
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.dylan.island.IslandView.<init>(IslandView.java:1983)
06-09 17:42:34.249: E/AndroidRuntime(239):  at java.lang.reflect.Constructor.constructNative(Native Method)
06-09 17:42:34.249: E/AndroidRuntime(239):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
06-09 17:42:34.249: E/AndroidRuntime(239):  ... 23 more
06-09 17:42:34.249: E/AndroidRuntime(239): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.Bitmap.nativeCreate(Native Method)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:346)
06-09 17:42:34.249: E/AndroidRuntime(239):  at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:372)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.dylan.island.IslandView$IslandThread.initimages(IslandView.java:435)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.dylan.island.IslandView$IslandThread.beginLevel(IslandView.java:220)
06-09 17:42:34.249: E/AndroidRuntime(239):  at com.dylan.island.IslandView$IslandThread.<init>(IslandView.java:215)
06-09 17:42:34.249: E/AndroidRuntime(239):  ... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:33:55.847

避免`java.lang.OutOfMemoryError: bitmap size exceeds VM budget`

我认为在破坏游戏主活动并进入菜单活动时，您需要回收游戏中使用的所有图像。

使用大量图像时，请参考以下链接以获得良好做法：

[http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html)

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)

[OutofMemoryError：位图大小超出 VM 预算（Android）](https://stackoverflow.com/questions/1586685/outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:33:30.387

尝试

```
Intent intent = new Intent(YourCurrentActivity.this, IslandGame.class);
intent.putExtra("Restore", "NEW");
intent.putExtra("CAMPAIGN", 1);
startActivity(intent); 
```

不喜欢 Bunlde 以方便操作。

编辑：然后在其他 Activity 的 onCreate 中：

```
 Bundle extras = getIntent().getExtras(); 
    if(extras !=null && extras.getInt("CAMPAIGN") == 1){
        newGame();
    }
    else{
        loadGame(extras.getInt("gameId"));
        //or whatever
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:34:39.153

您可以覆盖后退按钮的功能以重新启动主要活动并将其设置在您的游戏活动之上，并在返回游戏时执行相同操作。但这显然是一种不好的做法，因为您不确定用户是否会再次点击开始游戏按钮。而是尝试在其 onDestroy 方法上的活动中释放所有使用的资源，并在用户回到它时午餐一个新实例。还尝试最小化您使用的位图的大小。例如尝试 9patches。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T08:38:00.747

您必须在 Android Manifest 文件中定义活动，以便只能创建一个实例。

```
<activity
    android:launchMode="singleTask"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T08:51:42.610

> 我认为它正在尝试制作游戏的第二个版本，并且内存不足。

你是绝对正确的。如果您正确完成了游戏活动，那么它应该尝试创建第二个版本，因为第一个版本应该已经消失了。

> 我是否应该尝试在菜单中保留游戏活动的副本，然后在他们再次点击“新游戏”时重新打开它？

一般来说，出于多种原因，这被认为是一种非常糟糕的做法。其中最重要的是由于上下文导致的内存泄漏。

> 或者有没有更简单的方法来做到这一点？

您可以将游戏活动定义为 singleTask 或 singleInstance。这个（目前）的一个问题是它不是修复内存错误的解决方案。SingleTasks 的编程方式与多实例应用程序不同，还有其他注意事项。由于您的问题在于您首先使用了内存，因此在走这条路之前，我肯定会查看以下内容：

1.  确保所有资源都已释放。这里特别关注的是对视图的任何静态引用。如果你有它们，请清理它们。

2.  确保所有位图都被回收。有时在调整位图大小时，会留下原始的。通常是一个愚蠢的疏忽。看看吧。:)

3.  如果您正在访问文件，请确保它们已关闭。几乎从来没有问题，但总是值得一试。

4.  在您的游戏活动完成后添加一个 System.gc() 调用。在资源的主要释放之后，这确实可以提供帮助。不幸的是，不能保证。在您的情况下，最好在主菜单的 onResume() 中。

一旦你用尽了所有这些，那么 singleTask 路线只是实现的选择。

希望这可以帮助，

模糊逻辑

# asp.net-mvc-3 - 返回视图时如何保持相同的数据？

> ID：10959508
> 
> 赞同：2
> 
> 时间：2012-06-09T08:25:08.613
> 
> 标签：asp.net-mvc-3

返回视图时如何保持相同的数据？

我试图将表单返回到视图，但它不起作用。

有什么好的和简单的方法可以做到这一点吗？

```
[HttpPost]
public ActionResult Register(FormCollection form)
{
    string name = form["Name"].Trim();
    if (string.IsNullOrEmpty(name))
    {
        TempData["TempData"] = "Please provide your name ";
        return View(form);
    }

    string email = form["Email"].Trim();
    var isEmail = Regex.IsMatch(email, @"(\w+)@(\w+)\.(\w+)");
    if (!isEmail)
    {
        TempData["TempData"] = "Sorry, your email is not correct.";
        return View(form);
    }

      //do some things
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:51:29.550

不知道你为什么会`FormCollection`在帖子中使用，但也许你来自 WebForms 背景。在 MVC 中，您应该使用 ViewModels 将数据传输到视图和从视图传输。

默认情况下，`Register`MVC 3 应用程序中的方法在视图中使用 ViewModel `Register`。你应该简单地把它发回去。事实上，如果您不知道作为 Internet 模板的一部分，默认应用程序已经为您创建了。

标准模式是有一个 ViewModel 代表您将在视图中使用的数据。例如，在您的情况下：

```
public class RegisterViewModel {

    [Required]
    public string Name { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }
} 
```

您的控制器应该包含 2 个动作， a`Get`和 a `Post`。呈现视图并`Get`准备好供用户输入数据。提交视图后，`Post`将调用该操作。View 将 ViewModel 发送到操作，然后该方法采取操作来验证和保存数据。

如果数据存在验证错误，将 ViewModel 返回给 View 并显示错误消息非常简单。

这是`Get`动作：

```
public ActionResult Register() {
    var model = new RegisterViewModel();
    return View(model);
} 
```

这是`Post`行动：

```
[HttpPost]
public ActionResult Register(RegisterViewModel model) {
    if(ModelState.IsValid) { // this validates the data, if something was required, etc...
        // save the data here
    }
    return View(model); // else, if the model had validation errors, this will re-render the same view with the original data
} 
```

您的视图看起来像这样

```
@model RegisterViewModel

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.Name)  <br />
        @Html.ValidationMessageFor(model => model.Name)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.Email)  <br />
        @Html.ValidationMessageFor(model => model.Email)
    </div>
} 
```

使用其他策略在 MVC 应用程序中捕获和保存数据是绝对可能的，它是一个非常可扩展的框架。但是有一种特定的模式使 MVC 成为它的样子，并且与该模式相反的工作有时会被证明是困难的。对于初学者来说，最好先了解首选的模式和策略，然后一旦理解得很好，您就可以采用一些自己的自定义策略来满足您的需求。到那时，您应该对系统有足够的了解，知道您需要更改什么以及在哪里更改。

编码快乐！！

# ruby-on-rails - Rails 3.1 - Events Listings - How to handle events that span many dates?

> ID：10959514
> 
> 赞同：0
> 
> 时间：2012-06-09T08:26:47.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

I'm building an events listing site. Currently each event is entered for a specific date and displayed in order......simple! However, I need to consider how to handle events such as festivals and plays that span more than one date. Entering the event over and over again for each date clearly isn't the best option. I've thought I could have a start date and end date, but i'm not sure how I would then make the event show in my index for the dates in between start/end. This is probably really simple, but I just thought i'd seek some guidance for those with more experience before I potentially set off down the wrong path with this.

The event schema at the moment:

```
create_table "events", :force => true do |t|
    t.date     "event_date"
    t.string   "headline"
    t.text     "info"
    t.integer  "event_type_id"
    t.integer  "venue_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "event_image_file_name"
    t.string   "event_image_content_type"
    t.integer  "event_image_file_size"
    t.datetime "event_image_updated_at"
    t.boolean  "free"
  end 
```

And my Event Controller index does:

```
 @events = Event.paginate(:page => params[:page], :per_page => 12).find(:all, :conditions => ['event_date >= ?', Date.today], :order => "event_date") 
```

**EDIT:** I should have pointed out that i'm listing the events with a date header generated by the following line in my Event Controllers Index method:

```
@events_dates = @events.group_by { |e| e.event_date } 
```

The the view is something along the lines of:

```
<% @events_dates.sort.each do |event_dates, events| %>
<div class="well">
<h3>
<% if event_dates == Date.today %>
Today
<% elsif event_dates == Date.today + 1 %>
Tomorrow
<% else %>
<%= event_dates.to_date.to_formatted_s(:my_format) %>
<% end %>
</h3>
</div>

<%= render events %>
<% end %> 
```

The events partial then has the event headline, info etc.

So, I think what I need to do is alter the way I loop through my date headers. Instead of grouping event dates from the db and then looping those, I almost need to loop through calendar days and see if events occur on those dates based on event_start_date and event_end_date. Any ideas how to approach that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:38:55.177

If you have a start and end date, using the conditions hash:

```
:conditions => ["event_start_date <= ? AND event_end_date >= ?", Date.today, Date.today] 
```

Or arel:

```
.where("event_start_date <= ? AND event_end_date >= ?", Date.today, Date.today) 
```

Edit:

Okay, so you want to iterate over a date range, and then display any events for that day. To iterate over a date range you'd use ruby's Date.upto() function, and for each date, you could then just iterate over the events, and only display events relevant for the current date.

The following code is assuming you've set up the @start_date and @end_date in the controller.

```
<% @start_date.upto(@end_date) do |date| %>
<div class="well">
<h3>
<% if date == Date.today %>
Today
<% elsif date == Date.today + 1 %>
Tomorrow
<% else %>
<%= date.to_formatted_s(:my_format) %>
<% end %>
</h3>
</div>

<%= render @events.select{|event| event.start_date < date && event.end_date > date} %>
<% end %> 
```

There's a bit too much logic going on in the view here though, and you might have to do a little rejigging to get it to work, but it should get you on the right path.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:21:22.930

I don't think you need to group by.

```
@events = Event.where('start_date >= ? AND end_date >= ?', Date.today.beginning_of_day], Date.today.beginning_of_day]).order(:start_date) 
```

In your view do something like:

```
 Today
  <% for event in @events %>
    <% if event.start_date == Date.today %>
      <%= render "events/event" %>
    <% end %>
  <% end 
  Tomorrow
  <% for event in @events %>
    <% if event.start_date == Date.tomorrow %>
      <%= render "events/event" %>
    <% end %>
  <% end %> 
```

Is that what your trying to achieve?

You'll need to clean it up a bit, perhaps using a `for event in @events.where date is today`, but you get the idea

# c# - 在 mvc3 中处理图像的不同方法

> ID：10959517
> 
> 赞同：2
> 
> 时间：2012-06-09T08:27:09.813
> 
> 标签：c#, asp.net-mvc-3, database-design, file-upload

我有一个测试房地产应用程序。性能不佳的问题。一个属性可以有一个或多个图像。

这些图像作为二进制文件存储在数据库中，现在我想创建我希望更好的解决方案，将图像保存在服务器硬盘中，并在数据库中使用参考路径。

我不知道该怎么做。我应该如何设计我的数据库表？如何将图像保存到服务器及其到数据库的路径？我将发布我当前的代码。

值得一提的是，我需要解决方案，我应该将图像与其他属性信息一起上传（在同一页面上，带有浏览按钮）。

**实体**

```
public class Property
{
   public Guid Id {get; set;}
   public string Name {get; set;}
   ...
   public List<Photo>Photos {get; set;}
}

public class Photo
{
   public Property Property {get; set;}
   public byte[] ImageData {get; set;}
   public string ImageMimeType {get; set;}
} 
```

**数据库设计**

```
Photo table
    Id              int 
    ImageData       varbinary(MAX)  
    ImageMimeType   varchar(50) 
    Version         int 
    PropertyId      int 
```

**在控制器内处理发布的图像和其他数据**

```
 [HttpPost]
    public ActionResult Create(PropertyViewModel newData, IEnumerable<HttpPostedFileBase> images)
    {
        if (ModelState.IsValid)
        {
            using (ISession session = ...GetCurrentSession())
            {
                using (ITransaction transaction = session.BeginTransaction())
                {
                    Domain.Property model = new Domain.Property();
                    newData.ToDomainModel(model, images);
                    transaction.Commit();
                    session.Save(model);
                }
            }
            return RedirectToAction("Index");
        }
        else
        {
            return View(newData);
        }
    } 
```

最后在 ViewModel.ToDomain 中我保存了这样的发布图像。

请注意，IEnumerable Images 是从网络表单发布的

```
List<Photo> Photos = new List<Photo>();
            foreach (var image in Images)
            {
                if (image != null && image.ContentLength > 0)
                {
                    Photo p = new Photo();
                    p.Property = x;
                    p.ImageMimeType = image.ContentType;
                    p.ImageData = new byte[image.ContentLength];
                    image.InputStream.Read(p.ImageData, 0, image.ContentLength);

                    Photos.Add(p);
                }
            }
            x.Photos = new List<Photo>();
            x.Photos = Photos; 
```

这种方法有效，实体之间的映射没问题，现在我应该改变什么以便将图像保存在服务器硬盘及其对数据库的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:51:54.503

将数据作为原始文件存储在数据库服务器磁盘上有其自身的问题，主要问题是您必须配置从客户端对文件系统的访问 - 在这种情况下是 Web 服务器。

如果您使用的是 Sql Server 2008 或更高版本，则有一个中间立场：[FILESTREAM](http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)

数据存储在文件中，但可以通过数据库访问。因此，您可以通过数据库连接获得参照完整性和访问权限，而不会导致数据库本身膨胀。

# r - 如何在 R 中的 Ubuntu/Linux 上写入剪贴板？

> ID：10959521
> 
> 赞同：39
> 
> 时间：2012-06-09T08:29:28.483
> 
> 标签：r

我正在运行 Ubuntu 11.10，我希望能够写入剪贴板（或主要选择）。以下给出错误

```
> x <- 1:10
> dput(x, 'clipboard')
Error in file(file, "wt") : 'mode' for the clipboard must be 'r' on Unix 
```

**如何写入剪贴板/主要选择？**

请注意，我已经看过[这个旧的 R-Help 帖子](http://tolstoy.newcastle.edu.au/R/e2/help/06/11/4157.html)，但我仍然不清楚我应该做什么。

> Linux 没有剪贴板，但 X11 会话有主要和次要选择。? 文件说
> 
> 剪贴板：
> 
> ```
>  'file' can also be used with 'description = "clipboard"' in mode
>   '"r"' only.  It reads the X11 primary selection, which can also be
>   specified as '"X11_primary"' and the secondary selection as
>   '"X11_secondary"'.
> 
>   When the clipboard is opened for reading, the contents are
>   immediately copied to internal storage in the connection.
> 
>   Unix users wishing to _write_ to the primary selection may be able
>   to do so via 'xclip' (<URL:
>   http://people.debian.org/~kims/xclip/>), for example by
>   'pipe("xclip -i", "w")'. 
> ```
> 
> 所以应用了RTFM。写入 X11 选择需要多个线程，我认为不值得付出相当大的努力来实现（与 Windows 不同）。
> 
> 请注意，窗口管理器可能有其他剪贴板，例如 RGtk2 包具有到 gtk 剪贴板的接口。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-09T20:49:47.150

```
clipboard <- function(x, sep="\t", row.names=FALSE, col.names=TRUE){
     con <- pipe("xclip -selection clipboard -i", open="w")
     write.table(x, con, sep=sep, row.names=row.names, col.names=col.names)
     close(con)
}

vec <- c(1,2,3,4)

clipboard(vec)
clipboard(vec, ",", col.names=FALSE)
clipboard(vec, " ", row.names=TRUE) 
```

在创建函数后，您可以将写入的任何内容粘贴回剪贴板。默认返回带有列但没有行名的制表符分隔值。如图所示，根据您的喜好指定其他分隔符、包括行名或排除列名。

编辑：为了澄清，您仍然需要安装 xclip。不过，您不需要先单独启动它。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-11-17T03:00:51.880

Clipr 包让这变得非常简单

```
x <- 1:10
clipr::write_clip(x) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-09T11:11:12.190

不确定这是否是*最好*的方法，但这是我如何让它工作的方法：

1.  安装 xclip：`sudo apt-get install xclip`
2.  阅读手册：`man xclip`
3.  写入 R 中的 X11 主节点：`write.table(1:10, pipe("xclip -i", "w"))`

* * *

**更新：**

请注意，`write.table`在管道关闭之前，传递给的对象不会出现在剪贴板中。您可以通过调用强制关闭管道`gc()`。例如：

```
write.table(1:10, pipe("xclip -i", "w"))  # data may not be in clipboard
gc()                                      # data written to primary clipboard 
```

* * *

管理连接的更好方法是使用带有 的函数`on.exit(close(con))`，即使`write.table`调用抛出错误，它也会关闭管道。请注意，您需要确保根据您的系统设置写入您打算使用的剪贴板（主要是默认设置）。

```
write.xclip <- function(x, selection=c("primary", "secondary", "clipboard"), ...) {
  if (!isTRUE(file.exists(Sys.which("xclip")[1L])))
    stop("Cannot find xclip")
  selection <- match.arg(selection)[1L]
  con <- pipe(paste0("xclip -i -selection ", selection), "w")
  on.exit(close(con))
  write.table(x, con, ...)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-24T23:54:05.053

版本：

*   薄荷 18.1，肉桂
*   剪辑 0.12
*   R 3.4.0 (2017-04-21)

我无法让其他解决方案发挥作用，所以我`man`接受了。这种方法对我有用（基于其他人的解决方案）。

```
write_clipboard = function(x, .rownames = F) {
    #decide how to write
    #windows is easy!
    if (Sys.info()['sysname'] %in% c("Windows")) {
      #just write as normal
      write.table(x, "clipboard", sep = "\t", na = "", row.names = F)
    } else {
      #for non-windows, try xclip approach
      #https://stackoverflow.com/a/10960498/3980197
      write.xclip = function(x) {
        #if xclip not installed
        if (!isTRUE(file.exists(Sys.which("xclip")[1L]))) {
          stop("Cannot find xclip")
        }
        con <- pipe("xclip -selection c", "w")
        on.exit(close(con))
        write.table(x, con, sep = "\t", na = "", row.names = F)
      }

      tryCatch({
        write.xclip(x)
      }, error = function(e) {
        message("Could not write using xclip")
      })
    }
} 
```

[这是我个人 R 包](https://github.com/Deleetdk/kirkegaard)中函数的淡化版本。

# 从剪贴板读取

阅读同样困难。这是上述内容的配套功能。

```
read_clipboard = function(header = T,
                          sep = "\t",
                          na.strings = c("", "NA"),
                          check.names = T,
                          stringsAsFactors = F,
                          dec = ".",
                          ...) {
  #decide how to read
  #windows is easy!
  if (Sys.info()['sysname'] %in% c("Windows")) {
    #just read as normal
    read.table(file = con, sep = sep, header = header, check.names = check.names, na.strings = na.strings, stringsAsFactors = stringsAsFactors, dec = dec, ...)
  } else {
    #for non-windows, try xclip approach
    #https://stackoverflow.com/a/10960498/3980197
    read.xclip = function(x) {
      #if xclip not installed
      if (!isTRUE(file.exists(Sys.which("xclip")[1L]))) {
        stop("Cannot find xclip")
      }
      con <- pipe("xclip -o -selection c", "r")
      on.exit(close(con))
      read.table(file = con, sep = sep, header = header, check.names = check.names, na.strings = na.strings, stringsAsFactors = stringsAsFactors, dec = dec, ...)
    }

    tryCatch({
      read.xclip(x)
    }, error = function(e) {
      message(sprintf("error: %s", e$message))
    })
  }
} 
```

# iphone - 如何实现倒计时然后调用方法

> ID：10959525
> 
> 赞同：0
> 
> 时间：2012-06-09T08:29:55.567
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在开发一个 2d 游戏，在我的游戏屏幕上，我必须在 30 秒到 0 秒之间实现一个反向计时器，如果玩家不移动他的角色，他将获胜，否则他将失败，游戏将结束。

这是我的初始化方法：

```
-(id)init
    {
    if(self==[super init])
    {
        self.isTouchEnabled=YES;
        self.isAccelerometerEnabled=YES;
        CGSize size=[[CCDirector sharedDirector] winSize];
        screenwidth=size.width;
        screenheight=size.height;
        west_pic=[CCSprite spriteWithFile:@"west_pic.png"];
        west_pic.anchorPoint=ccp(1, 1);
        west_pic.scaleX=1.4;
        west_pic.position=ccp(size.width, size.height);
        [self addChild:west_pic];
        label1=[CCLabelTTF labelWithString:@"Level One" fontName:@"Arial" fontSize:20];
        label1.position=ccp(size.width/3.8,size.height/1.2);
        [self addChild:label1];
        label2=[CCLabelTTF labelWithString:@"Lives :" fontName:@"ArcadeClassic" fontSize:18];
        label2.position=ccp(size.width/1.5,size.height/8.2);
        [self addChild:label2];
        player=[CCSprite spriteWithFile:@"player.png"];
        player.position=ccp(size.width/1.7, size.height/2);
        player.scale=0.2;
        player.tag=2;
        player.anchorPoint=ccp(1, 0);
        [self addChild:player];
        [self schedule:@selector(updateplayer:) interval:1.0f/60.0f];

    }
        return self;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:00:47.087

例如，你可以有一个秒数的实例，该玩家不能移动角色，那么你必须有一些事件方法来知道角色何时开始和停止移动，创建可更新标签（如果你想显示其余的播放时间）和计划计时器，这将减少秒数。像这样

```
- (void) onEnter
{
    [super onEnter];

    // if player character not move on start
    [self schedule:@selector(reduceRestTime) interval:1.f];
}

- (void) onExit
{
    [self unscheduleAllSelectors];
    [super onExit];
}

- (void) onCharacterStop
{
    m_restTime = // your time left. in your case, 30 sec
    // if you have time label
    [self updateRestTimeLabel];

    [self schedule:@selector(reduceRestTime) interval:1.f];
}

- (void) onCharacterBeginMovement
{
    [self unscheduleSelector:@selector(reduceRestTime)];    
}

- (void) reduceRestTime
{
    m_restTime--;

    // if you have time label
    [self updateRestTimeLabel];

    if( m_timeLeft == 0 )
    {
        [self unscheduleSelector:@selector(reduceRestTime)];

        // your win code
    }

}

- (void) updateRestTimeLabel
{
    [m_timeLabel setString:[NSString stringWithFormat:@"Time left: %d", m_timeLeft]];
} 
```

# c# - 存放大物件

> ID：10959530
> 
> 赞同：2
> 
> 时间：2012-06-09T08:30:49.763
> 
> 标签：c#, serialization, storage

存储大对象的最佳方法是什么？就我而言，它类似于树或链表。

我尝试了以下方法：

1）关系数据库

不适合树结构。

2) 文档数据库

我尝试了 RavenDB，但是当我调用 SaveChanges 方法时它引发了 System.OutOfMemory 异常

3) .Net 序列化

它工作得很慢

4) Protobuf

它不能反序列`List<List<>>`化类型，我不确定链接结构。

所以...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:51:01.167

您提到了 protobuf - 我经常将 protobuf-net 与数百兆字节大小的对象一起使用，但是：它确实需要适当地编写为 DTO，理想情况下是树（不是双向图，尽管支持这种用法在某些情况下）。

对于双向链表，这可能意味着：将“先前”链接标记为**未**序列化，然后在反序列化后回调中进行修复，以正确设置“先前”链接。平时很容易。

您是正确的，因为它当前不支持嵌套列表。*通过使用具有*列表的东西的列表，这通常是微不足道的，但我很想把它隐式化——即库应该能够在不需要更改模型的情况下模拟这一点。如果您对我这样做感兴趣，请告诉我。

如果您有想要序列化的模型的具体示例，并希望我提供指导，请告诉我 - 如果您不能在此处发布，那么我的电子邮件在我的个人资料中。完全取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:40:11.180

您是否尝试过 Json.NET 并将结果存储在文件中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:40:29.853

选项[2]：NOSQL（文档）数据库

我建议[Cassandra](http://cassandra.apache.org/)。

* * *

从[卡桑德拉维基](http://wiki.apache.org/cassandra/CassandraLimitations)，

```
Cassandra's public API is based on Thrift, which offers no streaming abilities 
any value written or fetched has to fit in memory. This is inherent to Thrift's 
design and is therefore unlikely to change. So adding large object support to
Cassandra would need a special API that manually split the large objects up 
into pieces. A potential approach is described in http://issues.apache.org/jira/browse/CASSANDRA-265\.    
As a workaround in the meantime, you can manually split files into chunks of whatever 
size you are comfortable with -- at least one person is using 64MB -- and making a file correspond 
to a row, with the chunks as column values. 
```

因此，如果您的文件小于 10MB，您应该没问题，只需确保限制文件大小，或将大文件分成块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T08:50:02.790

CouchDb 在应对此类挑战方面做得非常好。

[在 CouchDb 中存储一棵树](http://probablyprogramming.com/2008/07/04/storing-hierarchical-data-in-couchdb)

[在关系数据库中存储树](http://www.sitepoint.com/hierarchical-data-database/)

# java - java: 如何打印 JForm

> ID：10959535
> 
> 赞同：1
> 
> 时间：2012-06-09T08:31:21.530
> 
> 标签：java, swing, netbeans, printing

我有打印字符串的代码，它在程序本身中传递。在这里，我在打印按钮上调用此代码以获取硬拷贝。现在我想用相同的代码打印一个 JForm，但我不知道如何做到这一点。JForm 有一些标签和用户详细信息的文本字段。这是我打印字符串“Hello World”的代码。

```
public class PrintClass implements Printable, ActionListener {
public int display(Graphics g, PageFormat pf, int page) throws
                                                 PrinterException {
     if (page > 0) { /* We have only one page, and 'page' is zero-based */
        return NO_SUCH_PAGE;
    }

    /* User (0,0) is typically outside the imageable area, so we must
     * translate by the X and Y values in the PageFormat to avoid clipping
     */

   Graphics2D g2d = (Graphics2D)g;
   g2d.translate(pf.getImageableX(), pf.getImageableY());

    /* Now we perform our rendering */

   g.drawString("Hello World", 100, 100);

    /* tell the caller that this page is part of the printed document */

   return PAGE_EXISTS;
 } 
```

请帮助我调用 JForm 的构造函数，而不是传递字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:50:47.577

`Graphics`将当前的绘制`JFrame`到 a中`BufferedImage`，然后将图像绘制到打印机的`Graphics`.

```
Graphics g = myFrame.getContentPane().getGraphics();
// draw graphics into an image
// draw the image into the printer's graphics 
```

请务必注意，无论何时要打印表单内容，都应始终`Graphics`从您的`JFrame`

# iphone - 防止方法被不同实体同时调用的优雅方法

> ID：10959537
> 
> 赞同：3
> 
> 时间：2012-06-09T08:31:42.887
> 
> 标签：iphone, objective-c, ios, multithreading, cocoa-touch

我有一个方法，`someMethod`当 a) 用户点击视图和 b) 当用户拖动视图时调用。在`someMethod`中，有一个`UIView animateWithDuration`块使视图顶部的工具栏消失，并相应地重置其框架。如果用户点击视图，而不是拖动它，`someMethod`将在动画仍在完成时触发，这不是我想要的行为（简单地取消动画不起作用，因为完成块仍然触发（即使我检查'完成' BOOL）。所有事情都在考虑之中，我只是不希望在动画仍在进行时触发此方法。

显然，一个简单的解决方案是使用 a 设置手动锁定，`BOOL`并且只允许在锁定空闲时调用该方法。

我想知道，有没有更优雅的方法来完成这个？可以使用 GCD 或其他一些库来实现这一点，所以它更简单吗？

更新：我确实尝试使用同步，但问题是该方法触发动画，完成，但动画仍在另一个线程上运行。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:43:36.483

计时器用完并不意味着或需要辅助线程。您可以控制计时器安排在哪个线程上。如果您只是在主线程上安排计时器，那么这两件事都发生在主线程上。

使用的建议`@synchronized`实现了给定代码块没有同时为同一个对象（无论 的参数是什么`@synchronized`）运行的效果，但这与说它不在两个不同的线程上运行不同。

如果要检测是否在主线程以外的线程上调用了某个方法，然后将其分流到主线程，可以使用`+[NSThread isMainThread]`and `dispatch_async(dispatch_get_main_queue(), ^{ /* re-call current method */ });`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:32:54.510

在现代 iOS 和 OS X 中，控制执行的最优雅的机制是使用调度队列和块。对于全局锁，您可以使用单个串行队列并同步或异步向它发出请求，具体取决于您是否希望在执行关键代码时停止该线程上的剩余执行。

在某处全局声明您的队列：

```
dispatch_queue_t myQueue; 
```

因此，当您启动时，您将创建队列：

```
myQueue = dispatch_queue_create( "CRITICAL_SECTION", DISPATCH_QUEUE_SERIAL);    // FIFO 
```

当您想要执行代码的关键部分时，您可以使用：

```
dispatch_sync( shpLockQueue, ^{
     // critical section here
}); 
```

根据您的需要，您可能希望在这些块之一中调用您的方法，或者您可能希望在您正在保护的对象中拥有该块。

如果您需要确保例程在主线程上运行，您可以为此使用主调度队列，但如果没有必要，使用您自己的队列会更有效。如果您选择使用主队列，则无需设置自己的队列或存储它，您只需在以下范围内执行代码：

```
dispatch_sync( dispatch_get_main_queue(), ^{
     // critical section here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:39:03.507

我建议使用 @synchronized() 块，这里有一篇很棒的博客文章来解释它：

[http://googlemac.blogspot.com/2006/10/synchronized-swimming.html](http://googlemac.blogspot.com/2006/10/synchronized-swimming.html)

```
@synchronized(self) {
     [self someMethod];  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T08:42:00.163

好吧，即使只使用一个全局变量，也不能保证互斥，因为变量在更新之前被复制到寄存器中，如果这确实是你所说的“手动锁定 BOOL ...”，不幸的是它们不是真正优雅的解决方案....查看[https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)

祝你好运。

# c - Linux 和 Windows 上的 malloc_size 替代方案

> ID：10959538
> 
> 赞同：12
> 
> 时间：2012-06-09T08:31:45.410
> 
> 标签：c, windows, linux, gcc, malloc

给定一个`void *`指针，如何知道在这个给定地址上分配的块的大小（以前`malloc`在 Linux 和 Windows 中使用 ; 分配）？我希望这两个系统都能将此类信息存储在某个地方。也就是说，`malloc_size`OSX/Darwin 上存在替代方案。如果有帮助，请使用 gcc/mingw。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T09:08:16.297

在 Windows 上，使用 MS CRT 的东西可以使用[_msize](http://msdn.microsoft.com/en-us/library/z2s077bc%28v=vs.71%29.aspx)，在 Linux 上你可以尝试[malloc_usable_size](http://man7.org/linux/man-pages/man3/malloc_usable_size.3.html) ...

# jquery - jQuery - 两次点击启动功能

> ID：10959542
> 
> 赞同：0
> 
> 时间：2012-06-09T08:33:12.460
> 
> 标签：jquery

我创建了一个负责显示模式窗口的链接。模态窗口显示正常，但我必须单击两次...如何修复？

带有链接的html代码：

```
<body>
<a href="?id=1#" class="runpl">Buy product #1</a>
<br/><a href="?id=2#" class="runpl">Buy product #2</a>
</body> 
```

jQuery 启动函数：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="plPopup.min.js"></script>
<script type="text/javascript">

$(this).ready(function(){

        $('.runpl').plPopup("..popup html code..");

});

</script> 
```

plPopup.min.js：

```
(function($)
{
    var f = {width:'650',height:'150',background:false,html:'',url:'',close:'close'};
    var g;

    $.fn.plPopup=function(d)
    {
        g=$.extend({},f,g,d);
        var e=1+Math.floor(Math.random()*1024);
        if(g.background)
    {
        if(!$("div").is("#plup_fade"))
        {
            $("body").append('<div id="plup_fade'+e+'" class="plup_fade"></div>');
            $("#plup_fade"+e).hide()
            }
    }

    $("body").append('<div id="plup_msg'+e+'" class="plup_msg" style="width:'+parseInt(g.width)+'px; min-height:'+parseInt(g.height)+'px; height:'+parseInt(g.height)+'px; margin-top: -'+(parseInt(g.height)/2)+'px; margin-left: -'+(parseInt(g.width)/2)+'px;"></div>');

    $("#plup_msg"+e).html('<div class="plup_close" style="text-align:right;"><a href="#" title="'+g.close+'"><img src="img/popup/close.png"/></a></div><div class="plup_data"></div>');

    if(g.html)
    {
        $("#plup_msg"+e+" .plup_data").html(g.html)
    }else
    {
        if(g.url)
        {
            $("#plup_msg"+e+" .plup_data").load(g.url,function(a,b,c)
            {
                if(b=="error")
                {$("#plup_msg"+e+" .plup_data").html('<b>plPopup:</b> Error loading data =(</div>')}
                })
                }else{$("#plup_msg"+e+" .plup_data").html('<b>plPopup:</b> Nothing to render! =(')
                }
                }
                $("#plup_msg"+e).hide();$(this).click(function(){$("#plup_fade"+e).show();$("#plup_msg"+e).fadeIn('slow')});
                $("#plup_msg"+e+" .plup_close a, #plup_fade"+e).click(function()
                {
                    $("#plup_msg"+e).fadeOut('slow');$("#plup_fade"+e).delay(8000).hide()
                });

    return this
    }

})(jQuery); 
```

但他可能很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:41:03.163

尝试改变

```
$(this).ready(function(){ 
```

对此：

```
$(document).ready(function(){ 
```

查看代码后编辑：

发生这种情况是因为您正在链接到重新加载页面的参数。因此，Jquery 在单击时执行其操作，但随后页面刷新，将其恢复到初始状态。第二次鼠标单击不会更改 url，因为您已经加载了这些参数，因此 jquery 会显示弹出窗口。

您可以从链接中取出 href="" ，您会看到您仍然可以单击它们，但它们不会重新加载 url 并且一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:45:57.940

`.on()`由于您正在使用动态生成的 HTML ，因此我会将 click 事件处理程序从整个混乱中移到其单独的函数中。

基本上，在 document.ready 函数中，调用一个处理点击事件的函数，如下所示：

```
function PopupHandlers() {

  $('body').on({

     click: function () { YourClickHandler($(this)); }

  }, '.YouPopupSelectorClass');

} 
```

我认为你的代码一次做了太多的事情，应该分解成几个函数。甚至你的台词一次做不止一件事。例如，而不是`$('#SomeDiv').html('some super super long concatenation);`你应该有

```
var TheHTML = 'some HTML';
TheHTML = TheHTML + 'some more HTML';
TheHTML = TheHTML + ' and some more HTML'; 
$('#SomeDiv').html(TheHTML); 
```

这样，我们可以在您创建 HTML 时看到它实际上是什么，而不是有一个难以理解的超长行。而且你的变量应该比单个字母更明确：你希望你的源代码有明确的变量，然后用像谷歌闭包编译器这样的压缩器编译你的 javascript，它将用单个字母重命名你的变量。

但总的来说，在生成 HTML 并希望将其绑定到某些事件处理程序时，请考虑使用`.on()`而不是任何时候。`.click()`

# rack - 如何使用 Apache/Passenger 运行 puppetmaster

> ID：10959545
> 
> 赞同：1
> 
> 时间：2012-06-09T08:33:32.680
> 
> 标签：rack, passenger, puppet

在 CEntOs 6 上运行 Puppet v2.7.14 并使用 Apache/Passenger 而不是 WEBrick。有人告诉我，使用 httpd 和乘客时*`puppetmaster`*不需要运行服务（因此`chkconfig off puppetmaster`：）运行，但在我的情况下，如果我不*`puppetmasterd`*手动启动，任何代理都无法连接到主服务器。我可以*`httpd`*很好地开始，*“乘客”*似乎也可以开始。这是我的 apache 配置文件：

```
# /etc/httpd/conf.d/passenger.conf 
LoadModule passenger_module modules/mod_passenger.so

<IfModule mod_passenger.c>
    PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12
    PassengerRuby /usr/bin/ruby
    #PassengerTempDir /var/run/rubygem-passenger

    PassengerHighPerformance on
    PassengerUseGlobalQueue on
    PassengerMaxPoolSize 15
    PassengerPoolIdleTime 150
    PassengerMaxRequests 10000
    PassengerStatThrottleRate 120
    RackAutoDetect Off
    RailsAutoDetect Off
</IfModule> 
```

重新启动后，我在 httpd_error 日志中看到这些：

```
[Sat Jun 09 04:06:47 2012] [notice] caught SIGTERM, shutting down
[Sat Jun 09 09:06:51 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Sat Jun 09 09:06:51 2012] [notice] Digest: generating secret for digest authentication ...
[Sat Jun 09 09:06:51 2012] [notice] Digest: done
[Sat Jun 09 09:06:51 2012] [notice] Apache/2.2.15 (Unix) DAV/2 Phusion_Passenger/3.0.12 mod_ssl/2.2.15 OpenSSL/1.0.0-fips configured -- resuming normal operations 
```

并*`passenger-status`*在屏幕上打印这些信息：

```
----------- General information -----------
max      = 15
count    = 0
active   = 0
inactive = 0
Waiting on global queue: 0

----------- Application groups ----------- 
```

但是，正如我所说，在我手动启动*puppetmasterd*之前，我的任何代理都无法真正与主人交谈。有谁知道我还想念什么？或者，这也是它应该的方式吗？干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:56:56.203

听起来您可能缺少基于[https://github.com/puppetlabs/puppet/blob/master/ext/rack/files/apache2.conf的 /etc/httpd/conf.d/puppetmaster.conf 文件](https://github.com/puppetlabs/puppet/blob/master/ext/rack/files/apache2.conf)

如果没有这样的东西，您将缺少将端口 8140 映射到基于机架的 pupeptmastd 的粘合剂。

请参阅[http://docs.puppetlabs.com/guides/passenger.html](http://docs.puppetlabs.com/guides/passenger.html) [https://github.com/puppetlabs/puppet/tree/master/ext/rack](https://github.com/puppetlabs/puppet/tree/master/ext/rack) [http://www.modrails.com/documentation/Users%20guide %20Apache.html#_deploying_a_rack_based_ruby_application_including_rails_gt_3](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_deploying_a_rack_based_ruby_application_including_rails_gt_3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:24:20.473

经过几天的撞击，现在它正在运行。主要问题在于`port number`- puppetmaster 运行在与 puppet 代理尝试通信的不同端口上。

另一件事是：`RackAutoDetect On`必须在dashboard vhost 文件之前执行。我的所以，我将乘客虚拟主机文件重命名为：`00_passenger.conf`以确保它首先运行。之后，我让 puppetmaster 使用 Apache/Passenger 运行。干杯！！

# android - 将 mp3 文件放入 android 项目的正确位置

> ID：10959554
> 
> 赞同：38
> 
> 时间：2012-06-09T08:35:05.240
> 
> 标签：android, mp3

有没有像 res/drawable 这样的文件夹用于 mp3 或一般的音频文件？如果是，它是什么以及如何从应用程序访问它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-09T08:40:29.467

放置此类`.mp3`或任何其他文件的最佳位置是在`assets`文件夹中。

这些文件一旦存储将成为您的 android 应用程序本身的一部分，并且可以轻松读取。本[教程](http://xjaphx.wordpress.com/2011/10/02/store-and-use-files-in-assets/)很好地描述了它。

```
 AssetFileDescriptor afd = getAssets().openFd("AudioFile.mp3");
 MediaPlayer player = new MediaPlayer();
 player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
 player.prepare();
 player.start(); 
```

或者，您也可以将其存储在`raw`文件夹中，并通过将路径指定为原始文件夹直接读取它。这可以播放为：

```
int resID=getResources().getIdentifier(fname, "raw", getPackageName());
MediaPlayer mediaPlayer=MediaPlayer.create(this,resID); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-23T07:25:09.590

以下是您可以轻松遵循的一些步骤。

1.  使用要在其中添加音频剪辑/媒体文件的项目打开 android studio。

2.  在资源文件夹中创建一个`raw`文件夹。

3.  只需将媒体文件`raw`复制并粘贴到文件夹即可将媒体文件添加到`raw`文件夹中。

4.  在这里，我们添加了一个媒体文件“ring.mp3”。现在打开所需活动的 Java 文件，这里我们在 MainActivity 中添加音频。

5.  进一步添加此代码。

    `MediaPlayer ring = MediaPlayer.create(MainActivity.this, R.raw.ring);` `ring.start();`

6.  **现在运行应用程序，您的音乐将在应用程序启动时播放**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-07T02:19:58.370

您应该将 .mp3 保存到`res/raw`. AndroidStudio 识别该`raw`文件夹。（相比之下，它不会自动识别`res/assets`文件夹）。

播放音乐.mp3：

`mediaPlayer = MediaPlayer.create(ctx, R.raw.cat_meow); mediaPlayer.start();`

`R.`注意语法的方便使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-09T08:41:11.900

将其放入您的资产文件夹中。最好在 assets/raw/myfile.mp3 下您可以使用以下命令访问它：

```
String mp3File = "raw/music.mp3";
AssetManager assetMan = getAssets();
MediaPlayer media = new MediaPlayer();
FileInputStream mp3Stream = assetMan.openFd(mp3File).createInputStream();
media.setDataSource(mp3Stream.getFD());
media.prepare();
media.start(); 
```

# percentage - 我可以标准化余弦相似度吗？

> ID：10959562
> 
> 赞同：0
> 
> 时间：2012-06-09T08:37:07.623
> 
> 标签：percentage, normalize, cosine-similarity

有没有办法将余弦相似度列表转换为百分比？我试图把我的大脑包裹起来，但我很怀疑。

像这样标准化四个文档的余弦值是否有意义：

```
Doc #1  0.9600
Doc #2  0.9300
Doc #3  0.8800
Doc #4  0.8500 
```

总结他们

```
0.9600 + 0.9300 + 0.8800 + 0.8500 = 3.6200 
```

并使它们正常化。

```
Doc #1  0.9600 / 3.6200 = 0.2652
Doc #2  0.9300 / 3.6200 = 0.2570
Doc #3  0.8800 / 3.6200 = 0.2431
Doc #4  0.8500 / 3.6200 = 0.2348 
```

还是有更可接受的显示方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:54:56.497

我想这取决于您的用例，但总的来说，我认为没有必要对余弦相似度分数进行归一化，因为它们已经处于 0 到 1 的范围内。

# c# - 在发布方法响应后从网站解析表

> ID：10959563
> 
> 赞同：0
> 
> 时间：2012-06-09T08:37:15.140
> 
> 标签：c#, parsing, httpwebrequest

我想解析一个点击搜索按钮后出现的表格，然后过滤一些数据。我怎样才能做到这一点？

该网站是[ruspo.ru](http://ruspo.ru/)

我的代码是：

```
HttpWebRequest webRequest = WebRequest.Create("http://ruspo.ru/") as HttpWebRequest;
StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());
string responseData = responseReader.ReadToEnd();
responseReader.Close();
webRequest.GetResponse().Close();

MatchCollection m1 = Regex.Matches(responseData, @"(?<=<table class=""ui-widget ui-widget-content""[^>]*>).*?(?=</div>)", RegexOptions.Singleline);

foreach (Match m in m1)
{
    Response.Write(m.ToString());
    //txtPrice.Text = m.ToString();
    //ddlhotels.Text = m.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:28:55.913

好吧，它不像阅读现有页面那么简单。搜索结果很可能在某种 POST 之后，因此您必须对 POST 数据的外观进行逆向工程，自己执行 POST，然后读取结果。

此外，[不推荐使用 Regex 解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags?lq=1)。您应该使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，它提供实际的 DOM 支持并允许您对文档结构执行 XPath 查询。

```
 var doc = new HtmlDocument();
    doc.Load(new StringReader(responseData));

    var nodes = doc.DocumentNode.SelectNodes("//div");
    foreach (HtmlNode link in nodes)
    {
        string title = link.InnerText.Trim();
        // etc.
    } 
```

# ios - 使用数组将多个参数传递给函数

> ID：10959565
> 
> 赞同：2
> 
> 时间：2012-06-09T08:37:16.310
> 
> 标签：ios, design-patterns

我必须维护某人的代码。代码打开一个线程。iOS（以及我知道的任何其他语言）中的线程工作者函数只接受一个参数。为了克服这个问题，代码创建了一个数组，将所有参数添加到一个数组中并将其传递给线程。这是代码。

```
NSArray* params = [[NSArray alloc] initWithObjects: mainView, actionFlag, nil];
[self performSelectorOnMainThread:@selector(updateWorker:) withObject:params waitUntilDone:NO]; 
```

并且函数是这样调用的

```
-(void)updateWorker:(NSArray*)params
{
    UIView* view = [params objectAtIndex:0];
    bool actionFlag = ((NSNumber*)[params objectAtIndex:1]).boolValue;
    /* do stuff with view and actionFlag */
} 
```

我有一种直觉，这在很多层面上都是非常错误的，但无法为这个案例建立一个有效的论据。

将参数数量作为数组传递的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:42:15.323

实际上，您所做的在*技术上*是正确的（但我确实理解为什么感觉不对）。

如果您想感觉更好，在这种情况下我会做的是实例化（创建）一个“ `NSDictionary`”对象，然后将对象/值设置为有用的键，并在您的“ `updateWorker`”方法中，通过“ `objectForKey:`”获取对象。

这样做对您（或其他人）来说将来会更容易维护，因为您不必四处寻找阵列位置 1、阵列位置 2 等中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T08:41:50.100

其中大部分是未来的更新，可能会发生一些情况（不是那么罕见）：

*   向数组添加新参数
*   改变数组中元素的顺序
*   删除数组中的元素
*   释放和保留数组中的元素时出现问题（不是 ARC）

这里要注意的一点是，所有这些情况都很难调试，因为您将从一个线程移动到另一个线程

# mfc - GetDC() 或 CClientDC dc(this) 在非消息函数中不起作用？

> ID：10959566
> 
> 赞同：0
> 
> 时间：2012-06-09T08:37:21.460
> 
> 标签：mfc, dialog

我正在尝试在 MFC 对话框中设置背景图像，我成功地获取了客户端设备上下文，同时在, , 等函数内部编写,`CDC* pDC=GetDC()`或,但不是在新声明的函数中(也在类中)。`CClientDC dc(this)``OnTimer``OnPaint``OnEraseBkgrd``CDialog`

我通过一个简单的绘图函数对此进行了测试，比如在这两种情况下都绘制了一个矩形，结果是，如果我把它写成`OnTimer`, `OnPaint`, `OnEraseBkgrd`，它工作得很好，但是在我声明的新函数中它没有！

任何人都可以教我如何在非消息功能中获取客户端 dc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T15:12:11.133

为什么要使用 OnTimer 处理程序进行绘图？

您应该使用 WM_PAINT（或在某些情况下为 WM_ERASEBKGND）消息进行绘图。新声明的函数是什么？

您引用的所有名称都是消息处理程序。这些函数映射到消息映射，并在收到消息时由框架调用。

要设置背景，您应该使用 WM_ERASEBKGND。处理程序提供您应该用于绘图的设备上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:42:18.537

您在屏幕上的绘图只能在 OnPaint（或 OnEraseBkgrd）中完成。如果您需要提示从对话框中的其他位置进行绘图，则需要调用 InvalidateRect()，它随后将调用 OnPaint()。当你调用 OnPaint() 时，你可以调用 pDC->GetClipBox() 来获取需要更新的矩形。

我认为做你想做的最好的方法是在你的对话框类中存储一个指向背景图像的指针，然后当你想要更改背景图像时，设置位图指针并调用 InvalidateRect()。然后，您的 OnPaint() 函数将执行 BitBlt 以实际绘制新位图。

# objective-c - 什么是 Objective C 属性 (@property) 赋值消息传递符号？

> ID：10959569
> 
> 赞同：0
> 
> 时间：2012-06-09T08:38:00.150
> 
> 标签：objective-c

什么是 Objective C 属性 (@property) 赋值消息传递符号？

name 是在另一个文件中声明的属性，retain，synthesize ......一切都井井有条。

在 main.mi 中有这一行

计算器.name=@"马丁";

与此等效的消息传递是什么？如何通过消息传递设置属性，语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:41:57.667

```
[calculator setName: @"Martin"]; 
```

[http://cocoacast.com/?q=node/103](http://cocoacast.com/?q=node/103)

# c++ - cpp 建议在没有开销/io 调用的情况下进入静音状态的更好方法

> ID：10959573
> 
> 赞同：1
> 
> 时间：2012-06-09T08:38:30.867
> 
> 标签：c++, daemon, cout

我们有可以在`silence mode`and上运行的守护进程`print mode`（打印到 std::cout）。如何在`silence`没有开销和 io 调用的情况下实现它。建议更多更好的方法来做到这一点！或者写什么方法比较好！（优点/缺点）

例如：

**1方式：**

代码中的简单位置`std::cout << "blah-blah-blah: " << var << std::endl;` 何时需要静音`close(STDOUT_FILENO)`或将 cout 重写为`dev/null`（如何？）

**2种方法**

`global bool FLAG_SILENCE`在每次 cout 调用之前使用并检查它：`if (!FLAG_SILENCE) std::cout << "blah-blah-blah: " << var << std::endl;`

**3 路** 预定义宏`#define SILENTCOUT std::cout`，当需要保持沉默时`#define SILENTCOUT SOMETHING`（某事 = 一些具有运算符`<<`且没有过度硬`(does not know how to realise, seems need to define our own function with defined`<<` 的函数，什么都不做）

**4 路** 预定义宏`#define SILENTCOUT(x) std::cout << x << std::endl`使用`SILENTCOUT( "mess" )`——危险，非常丑陋

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:00:17.337

一个常见的解决方案是提供包含`if`实际打印的宏：

```
#define LOG( msg )                 \
    if ( !log_enabled ) {} else    \
        std::cout << msg; 
```

虽然通常宏有点复杂（例如，不是测试`log_enabled`采用日志级别，而是将其与预定义的级别进行比较并相应地记录）。

一些库使用宏的选项，该选项返回一个实现的记录器对象，`operator<<`并且根据配置将提供适当的记录器或只忽略参数的无操作接收器。这可能会稍微降低性能，因为这至少需要对`operator<<`.

无论如何，我建议您使用日志库，因为这些问题已经解决*了很多*次。

# asp.net - 为什么回发后选中复选框

> ID：10959574
> 
> 赞同：0
> 
> 时间：2012-06-09T08:38:38.107
> 
> 标签：asp.net

我有下一个代码，

```
<form id="form1" runat="server">
<asp:Label runat="server" ID="Label1" EnableViewState="false" />
<asp:CheckBox runat="server" ID="Check1" EnableViewState="false" Checked="false" />
<asp:Button runat="server" ID="Button1" Text="Button1" />
</form>

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack) return;

    Label1.Text = "Label value";
    Check1.Checked = true;
} 
```

为什么回发文本令人绝望，但复选框仍处于选中状态？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:54:22.797

引用这篇 MSDN 文章中的参考资料 - [Scott Mitchell](http://msdn.microsoft.com/en-us/library/ms972976.aspx)文档的了解 ASP.NET 视图状态：

**页面生命周期阶段 3 - 加载回发数据**

> 开发人员普遍存在一种*误解*，即视图状态以某种方式负责让 TextBox、CheckBox、DropDownList 和其他 Web 控件在回发过程中记住它们的值。情况并非如此，因为这些值是通过回发的表单字段值标识的，并在 LoadPostData() 方法中为那些实现 IPostBackDataHandler 的控件分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:45:09.320

因为复选框从表单数据中获取状态，所以它在重新创建时保持选中状态。

视图状态只需要记住复选框之前的状态，以便服务器端`Change`事件起作用。

# android - Android 中 EndlessAdapter 中的 java.util.ConcurrentModificationException

> ID：10959576
> 
> 赞同：0
> 
> 时间：2012-06-09T08:39:00.460
> 
> 标签：android

我得到了这个例外：

```
06-09 13:14:41.917: E/AndroidRuntime(630): java.util.ConcurrentModificationException
06-09 13:14:41.917: E/AndroidRuntime(630): at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:573) 
```

我使用以下内容[`EndlessAdapter`](https://github.com/commonsguy/cwac-endless)：

```
 private class DemoAdapter extends EndlessAdapter {

    private RotateAnimation rotate=null;

    DemoAdapter(ArrayList<Outlets> outletList) {
        super(new OutletListAdapter(VerticalsListActivity.this, outletList));

        rotate=new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                                    0.5f, Animation.RELATIVE_TO_SELF,
                                    0.5f);
        rotate.setDuration(600);
        rotate.setRepeatMode(Animation.RESTART);
        rotate.setRepeatCount(Animation.INFINITE);
      }

    @Override
    protected View getPendingView(ViewGroup parent) {
      View row=getLayoutInflater().inflate(R.layout.row, null);

      View child=row.findViewById(android.R.id.text1);

      child.setVisibility(View.GONE);

      child=row.findViewById(R.id.throbber);
      child.setVisibility(View.VISIBLE);
      child.startAnimation(rotate);

      return(row);
    }
    @Override
    protected boolean cacheInBackground() throws Exception {
        // TODO Auto-generated method stub
        if(isMoreLoading){
            try {   
                if(Project.isFilterEnabled){
                    getDownloadedData = (FetchAndParseData) new FetchAndParseData().execute(Project.searchUrl+"/pageno/"+ ++i);
                }else{
                    getDownloadedData = (FetchAndParseData) new FetchAndParseData().execute(UrlConstants.OUTLETS_INFO_URL+Project.currentCityId+"/pageno/"+ ++i+"/verticalid/1");
                }
                inputStream = getDownloadedData.get();
                XmlUtilities.parseAndLoadData(inputStream , mOutletXmlHandler);
                outletList = Project.getOutletList();//Project.getOutletList();

            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }               
        return isMoreLoading;
    }

    @Override
    protected void appendCachedData() {
        // TODO Auto-generated method stub

        adptr = (OutletListAdapter) getWrappedAdapter();
        if(outletList.size()==20){
            isMoreLoading=true;
        }else{
            isMoreLoading=false;
        }           

        if(outletList!=null){
            for (Outlets addThis : outletList) {
                adptr.add(addThis);
            }
        }

    }

  } 
```

现在，当一个列表包含少于 20 个元素并且我们滚动该列表时，它会引发上述异常。我在做什么错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T09:03:17.847

阿伦，

当一个集合被多个线程修改时，会发生 ConcurrentModificationException。你`cacheInBackground()`让我相信你确实在利用额外的线程来获取你的数据。大多数情况下，当您在更改集合（例如排序）的同时添加或删除集合（例如缓存）时，会发生这种情况。

解决这个问题的最简单方法是在另一个线程中修改它之前复制集合（获取）。修改完成后，复制新集，去掉旧集。这允许您根据需要（在后台）更改当前设置，但在保持响应的同时根据需要进行 UI 更改。

希望这可以帮助，

模糊逻辑

# java - Java - 如何启动我的应用程序，我的电脑只有 DVI 输出，需要转换为 VGA 显示器

> ID：10959593
> 
> 赞同：2
> 
> 时间：2012-06-09T08:41:16.190
> 
> 标签：java, linux, x11, xorg

当我有一台只有 DVI 输出和显示器是 VGA 输入的 PC 时（所以我使用了一个小型 DVI 到 VGA 转换器，我有我的操作系统显示器）

Linux 显示查询显示如下：

```
$ export DISPLAY=:0.0 && xrandr
xrandr: Failed to get size of gamma for output default
Screen 0: minimum 640 x 480, current 1280 x 1024, maximum 1280 x 1024
default connected 1280x1024+0+0 0mm x 0mm
   1280x1024       0.0* 
   1024x768        0.0  
   800x600         0.0  
   640x480         0.0  
  legend (0x10c)   74.5MHz
        h: width  1280 start 1344 end 1472 total 1664 skew    0 clock   44.8KHz
        v: height  720 start  723 end  728 total  748           clock   59.9Hz 
```

- 我的 Java 应用程序在启动时感到困惑，并且无法启动应用程序，但异常来自`dm.getWidth();`：

```
screen = Toolkit.getDefaultToolkit().getScreenSize();
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice[] screenDevices = ge.getScreenDevices();
for (int i = 0; i < screenDevices.length; i++) {
  System.out.println(screenDevices[i].getIDstring());
  DisplayMode dm = screenDevices[i].getDisplayMode();
  int screenWidth = dm.getWidth();    // this fails....
  int screenHeight = dm.getHeight();
  System.out.println("[myResolution]: " + screenWidth + " " + screenHeight);
  screen.width = screenWidth;
  screen.height = screenHeight;
} 
```

--**输出：**

```
[meJavaDebug]: YES i am running

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at main.YumYumYum.createAndShowGUI(YumYumYum.java:167)
    at main.YumYumYum.access$000(YumYumYum.java:42)
    at main.YumYumYum$1.run(YumYumYum.java:118)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:647)
    at java.awt.EventQueue.access$000(EventQueue.java:96)
    at java.awt.EventQueue$1.run(EventQueue.java:608)
    at java.awt.EventQueue$1.run(EventQueue.java:606)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:617)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138)

Total Garbage Collections: 0
Total Garbage Collection Time (ms): 0 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T09:15:48.107

似乎`screenDevices[i].getDisplayMode()`正在返回`null`您的系统。

它可能与Java Bugs Database 中的[这个 bug](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6921661)有关，似乎没有可行的解决方法......除了测试显示模式是否是`null`，如果是则不使用它。

# image-processing - 通过聚类进行图像变换

> ID：10959604
> 
> 赞同：0
> 
> 时间：2012-06-09T08:43:23.593
> 
> 标签：image-processing, opencv, cluster-analysis

我正在做一个关于图像二值化的项目，我需要对图像进行转换，以便使用聚类将其划分为单独的颜色层。我的意思是图像中不会有阴影，而是将输入图像的阴影转换为划分两种颜色的层。

输入和输出图像如下：![在此处输入图像描述](../Images/8475a4adaf4d10ed428a2e7880e011dd.png)

我正在尝试使用 opencv 来实现这一点，但无法弄清楚如何做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T08:49:18.047

尝试使用 k-means 聚类。 [http://aishack.in/tutorials/kmeans-clustering-opencv/](http://aishack.in/tutorials/kmeans-clustering-opencv/)

你可以得到尽可能多的颜色。

这是一个使用 Accord.NET C# 库实现的示例。 [http://crsouza.blogspot.com.au/2010/10/k-means-clustering.html](http://crsouza.blogspot.com.au/2010/10/k-means-clustering.html)

# hibernate - Example Queries in Hibernate

> ID：10959612
> 
> 赞同：1
> 
> 时间：2012-06-09T08:44:47.670
> 
> 标签：hibernate, criteria, hibernate-criteria

I have trying to understand how does an Example query in Hibernate works.

deptId is the primary key of the departments table.

I tried this code initially:

```
Dept department = new Dept();
        department.setDeptId(3);
        //department.setDeptName("ABCD");
        Criteria criteria = session.createCriteria(Dept.class).add(Example.create(department)); 
```

Executing this code, the results are not getting filtered w.r.t the rows having deptId = 3 i.e, the SQL Query is equivalent to selecting all records from Dept table where 1 = 1.

But if i consider this code:

```
Dept department = new Dept();
        //department.setDeptId(3);
        department.setDeptName("ABCD");
        Criteria criteria = session.createCriteria(Dept.class).add(Example.create(department)); 
```

The results are getting filtered w.r.t the deptName i.e. ABCD

Please inform why is the Example query behaving like this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T09:12:19.580

From the [documentation](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#querycriteria-examples) , query by example (QBE) will ignore primary key.

For the simple primary key , if you know the value of the PK , you could use `load()` or `get()`instead.

For the composite primary key , I agree that support of primary key in QBE is necessary . However , this request is still [unresolved](https://hibernate.onjira.com/browse/HB-1437).

# cryptography - OpenSSL 将多个内存 BIO 写入同一个接收器 BIO

> ID：10959613
> 
> 赞同：0
> 
> 时间：2012-06-09T08:45:05.590
> 
> 标签：cryptography, openssl

我正在目标 C 下试验 OpenSSL。我正在尝试编写 SMIME 非对称密钥加密数据。我打开文件、加密文件并将其写入磁盘没有问题。我可以加密单个内存缓冲区。我想要做的是实现一种分散收集方法，将多个内存缓冲区馈入相同的加密 BIO 并串行写入磁盘。

我的代码很简单。我设置了一个密码并使用`PEM_read_bio_X509_AUX()`. 我把它推到`STACK_OF`X509s 上，`certs`，`sk_X509_push(certs,...)`。我打开我的输出文件`writeBIO=BIO_new_file()`。我创建了一个内存 BIO`readBIO=BIO_new_mem_buf(buf,len);`并使用`p7=PKCS_encrypt(certs,readBIO,...);`. 最后，我将其写入输出，`i2d_PKCS7_bio(writeBIO,p7);`这仅适用于一个内存缓冲区。如果我尝试在循环中传递多个缓冲区，则仅输出最后一个。我已经尝试释放并重新分配在调用之间构建的`readBIO`abd ，但这不起作用。`p7``BIO_new_mem_buf`

有任何想法吗？

* * *

更新 - 我有一个解决方案，但没有一个让我喜出望外的解决方案：

我有一个名为 AETPublicKeyWrapper 的 OpenSSL 包装器

```
    @interface AETPublicKeyWrapper : NSObject
    {
    @私人的
       生物*读取生物；
       生物*写生物；
       STACK_OF(X509) *证书；
       常量字符 *rmode,*wmode;
       PKCS7 *p7;
       EVP_PKEY *privateKey;
       常量 EVP_CIPHER *密码；
       int 信息、输出格式、标志；
    }

    ...
    -(BOOL)openInputFile:(const char*)fname;
    -(BOOL)openOutputFile:(const char*)fname;
    -(BOOL)打开输入缓冲区；
    -(int)writeToInputBuffer:(const void*)buf 长度:(unsigned long long)len;
    -(BOOL)loadPublicKeyCert:(const char*)certFileName;
    ...
    -(BOOL)加密输入；
    -(BOOL)writeEncryptedOutput；
    -(BOOL)writeDecryptedOutput；
    ...

```

这封装了各种 OpenSSL API 调用。`-(BOOL)openOutputFile:`例如只是

```
    -(BOOL)openOutputFile:(const char*)fname
    {
       if(!(writeBIO=BIO_new_file((char*)fname,"wb")))
          返回否；
       返回是；
    }

```

我的多个缓冲区到同一输出的加密例程如下所示：

```
    AETPublicKeyWrapper *owrapper=[[AETPublicKeyWrapper alloc] init];
    [owrapper loadPublicKeyCert:[keyPath cStringUsingEncoding:NSASCIIStringEncoding]]
    [owrapper openOutputFile:[saveAsPath cStringUsingEncoding:NSASCIIStringEncoding]]
    [owrapper openInputBuffer]
    /* fileData 是一个标题 */
    [owrapper writeToInputBuffer:[fileData bytes] length:[fileData length]]
    /* dirArray 是一个缓冲区数组 */
    for(NSData *itemData in dirArray)
       [owrapper writeToInputBuffer:[itemData bytes] 长度:[itemData length]];
    [owrapper 加密输入]
    [owrapper writeEncryptedOutput]
    [owrapper 冲洗]
    [owrapper 发布]

```

各种方法是（省略了大多数错误处理；强制转换是为了关闭编译器）

```
    -(BOOL)loadPublicKeyCert:(const char*)certFileName
    {
       X509 *x=NULL；
       生物*新证书；
       证书=sk_X509_new_null();
       newCert=BIO_new(BIO_s_file());
       BIO_read_filename(newCert,certFileName);
       x=PEM_read_bio_X509_AUX(newCert,NULL,NULL,NULL);
       sk_X509_push（证书，x）；
       返回是；
    }

    -(BOOL)openInputBuffer
    {
       if(!(readBIO=BIO_new(BIO_s_mem())))
          返回否；
       返回是；
    }

    -(int)writeToInputBuffer:(const void*)buf 长度:(unsigned long long)len
    {
       返回 BIO_write(readBIO,(void*)buf,(int)len);
    }

    -(BOOL)加密输入
    {
       if(!(p7=PKCS7_encrypt(certs,readBIO,cipher,flags)))
          返回否；
       返回是；
    }

    -(BOOL)writeEncryptedOutput
    {
       如果（i2d_PKCS7_bio（writeBIO，p7）<=0）
          返回否；
       返回是；
    }

```

这可行，但我担心输入缓冲区可能会变得任意大，所以我希望能够写入输出并让它在每次写入时刷新，而不是在最后累积并执行整个加密/写入操作.

# android - ZXing2.0 在 Android2.1 下不工作

> ID：10959614
> 
> 赞同：-3
> 
> 时间：2012-06-09T08:45:06.860
> 
> 标签：android, zxing

我需要在`Barcode scanner`我的应用程序中添加一个设施。我尝试`core.jar`从 ZXing 2.0 添加到我的应用程序并尝试在 Android 2.1 上运行它。但是，安装后，“打开”选项卡处于隐藏模式。

为什么“打开”选项卡没有显示？ZXing 2.0是否只有特定的android版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:32:54.897

没有。ZXing 支持 Android 1.5+ 直到 1.7 版本，并支持 Android 2.1+ 从 2.0。我不知道“打开”选项卡处于隐藏模式是什么意思，但它与 ZXing 无关，听起来像是你自己的应用程序中的东西。

# clojure - clojure: O(1) 时间来获取向量的大小

> ID：10959616
> 
> 赞同：8
> 
> 时间：2012-06-09T08:45:27.493
> 
> 标签：clojure

## 语境

```
(doc count)
-------------------------
clojure.core/count
([coll])
  Returns the number of items in the collection. (count nil) returns
  0\.  Also works on strings, arrays, and Java Collections and Maps 
```

## 问题

计数是否保证是矢量上的恒定时间？

如果没有，是否可以在恒定时间内获得向量的大小？

## 更多背景

我实际上想获取向量的列表元素，假设我知道向量大小，我可以在 O(1) 中使用 nth 来完成。

## 编辑：

我忘了提这个。我需要它来处理*瞬态*向量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T09:21:23.137

是的，计数在向量上总是很快的。但是您可以调用`peek`以获取其最后一个元素。

# asp.net - 在 Linq 中分组到实体

> ID：10959617
> 
> 赞同：0
> 
> 时间：2012-06-09T08:46:18.107
> 
> 标签：asp.net, linq, entity-framework, linq-to-entities

我有一个有两列的表，像这样的状态和贷款

```
State  loan

NJ     100
CA     200
NJ     150
CT     300
CT     100 
```

我想使用 linq 按州对贷款进行分组。我已经这样做了，但它不起作用

```
var query = from address in context.data_vault.ToList()
group address by address.STATE into addressGroup
select new
{
    State = addressGroup.Key,
    count = addressGroup.Count()
}; 
```

我还需要对结果进行分页。

请建议我怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:50:18.810

要分页结果，只需使用[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)and [`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

```
int n = 3;
int pageSize = 10;
var pagedQuery = query.Skip(n * pageSize).Take(pageSize); 
```

# android - jsoup 用类和 id 解析 tr,td for loop

> ID：10959618
> 
> 赞同：1
> 
> 时间：2012-06-09T08:46:19.777
> 
> 标签：android, parsing, for-loop, html-parsing, jsoup

我是 jsoup 的新手，并试图解析这个 html
如何用 jsoup 解析它？

```
 <tr id="bir" >
    <td class ="number"> dsadds </td >
<td class ="name"> dsdad </td >
<td class ="idea"> dvewe </td ></tr>
  <tr id="bir" >
    <td class ="number"> ewe</td >
<td class ="name"> ewe</td >
<td class =idea> dsasdsds </td ></tr>
  <tr id="bir" >
    <td class ="number"> dsadd dsds </td >
<td class ="name"> dsdcdsd adds </td >
<td class ="idea"> dsad dsdsds </td ></tr> 
```

这是我的代码

```
 Elements kelime = document.select("tr#bir td.number");
    Elements anlam = document.select("tr#bir td.name");
    for(Element sectd:kelime){
         for(Element sectd1:anlam){

               result1 = sectd1.text();
               Custom temp = new Custom("Big" + result,"Small" +result1);

                 fetch.add(temp);

           }result = sectd.text();
    } 
```

我正在将数据添加到列表中，因为我需要在临时文件中显示 tr 的所有 td 信息。它实际上是我认为的循环问题：％但我没有得到它：/。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:50:45.753

您可以通过 #getElementsByClass(X); 解析类名 X 的元素；

```
Document doc = Jsoup.connect(yourURL).userAgent("Mozilla").get();
Elements els = doc.getElementsByClass("number");

for (Element el : els) {
    print(el.text());
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:17:25.320

谢谢你们的关注我在这里解决了我的代码的问题..

```
 Elements kelime = document.select("tr#bir");
    for(Element sectd:kelime){
        Elements tds = sectd.select("td"); 

               result = tds.get(0).text();
               result1 = tds.get(1).text();
               result2 = tds.get(2).text();

               Custom temp = new Custom("Kelime  :" + result,"En erken Türkçe örnek   :" + result1,"Köken   :"+result2);

                 fetch.add(temp);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T01:14:51.697

我只能猜测你的问题是什么。

我发现了两个问题：

*   如果您没有，您的 html 示例会导致空虚

    <table> examplehtmlcode</table>

*   您在报价中使用结果，然后它才具有价值；我移动了“字符串结果 = sectd.text();” 在内部 for 循环之前。

    导入java.io.File；导入 java.io.IOException；导入 org.jsoup.*；导入 org.jsoup.nodes.Document；导入 org.jsoup.nodes.Element；导入 org.jsoup.select.Elements；公共类 CopyOfparser {

    ```
    public static void main(String[] args){

    String filepath =   "C:/Users/RH/Desktop/test/1234.html";

    File input = new File(filepath);

    Document document=null;
    try {
        document = Jsoup.parse(input, "ISO-8859-1");
    } catch (IOException e) {
        e.printStackTrace();
    } 
    ```

    //这里开始你的代码：

    ```
    Elements kelime = document.select("tr#bir td.number");
    Elements anlam = document.select("tr#bir td.name");
    for(Element sectd:kelime){
         String result = sectd.text();

              for(Element sectd1:anlam){

              String result1 = sectd1.text();
              System.out.println("Big" + result +" Small" +result1);

           }

    } 
    ```

我得到了这个输出：

```
Bigdsadds Smalldsdad
Bigdsadds Smallewe
Bigdsadds Smalldsdcdsd adds
Bigewe Smalldsdad
Bigewe Smallewe
Bigewe Smalldsdcdsd adds
Bigdsadd dsds Smalldsdad
Bigdsadd dsds Smallewe
Bigdsadd dsds Smalldsdcdsd adds 
```

这对你有帮助吗？

# unique - OAuth 2.0 令牌对于提供者来说永远是唯一的吗？

> ID：10959623
> 
> 赞同：2
> 
> 时间：2012-06-09T08:47:49.217
> 
> 标签：unique, oauth-2.0, token, provider

当 OAuth 2.0 提供者发布令牌时，该令牌值对于提供者来说是否永远唯一？或者是否有可能在未来的某个时间，大概在令牌过期之后，可能会为不同的用户颁发另一个令牌，其价值相同？在搜索中，我发现了很多关于令牌过期的信息，但没有关于该令牌值是否可能在未来被重新使用的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:26:54.480

如果您使用 UUID 之类的东西——它取决于时间且是唯一的——所以你不应该让它们可重用。考虑到您将在不同的时刻生成代币——它们都会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:53:48.390

核心 OAuth 2 规范中没有任何内容可以保证这一点。是否存在冲突的可能性是特定于实现的。您应该从您的 OAuth AS 提供商那里了解可能性是什么。但同意 Artem - 如果您试图根据假设只是一个 API（访问）令牌来唯一标识用户，这听起来很奇怪。

# asp.net - 反序列化 json

> ID：10959626
> 
> 赞同：0
> 
> 时间：2012-06-09T08:48:28.933
> 
> 标签：asp.net, json, serialization, datacontractserializer, javascriptserializer

我正在尝试从 aspx 页面调用 Web 服务。Web 服务返回 json。我需要反序列化 json 对象。

我试图提取字符串，它的形式是：

```
"{ \" d \" : [ { \" _type \" : \" Myclass:#serviceName \", ....other members..}, { ..other records ... }, {...} ] }" 
```

我的代码如下：

```
 Stream receivedStream = HttpWResp.GetResponseStream();
    Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
    StreamReader reader = new StreamReader(receivedStream, encode);
    string text = reader.ReadToEnd(); // text shows the above string 
```

请帮助我下一步该怎么做。参考一些关于该主题的好文章也会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:57:38.073

如果您使用的是较早的 .NET 版本和/或想要更多功能，请查看以下内容：

[http://json.codeplex.com/](http://json.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:54:55.760

谷歌是你的朋友：[http ://www.google.com/search?ie=UTF-8&q=deserialize+json+c%23](http://www.google.com/search?ie=UTF-8&q=deserialize+json+c%23)

第一个结果看起来正是您所需要的：http: [//procbits.com/2011/04/21/quick-json-serializationdeserialization-in-c/](http://procbits.com/2011/04/21/quick-json-serializationdeserialization-in-c/)

# c - Linux 上 POSIX 函数“stat”的定义在哪里？

> ID：10959633
> 
> 赞同：2
> 
> 时间：2012-06-09T08:49:53.393
> 
> 标签：c, linux, posix, system-calls

在 Windows 上，`stat`Windows 提供的几乎所有其他 C/POSIX 函数都在 msvcrt.dll 中定义，这是 C 运行时库。

在 Linux 上，我知道很多 POSIX C 函数都是系统调用。我也知道在链接程序时，不能有未定义的引用。我已经在所有`so`文件中`/lib`搜索`/usr/lib`了符号`stat`或“损坏/前缀”形式，但没有找到任何东西。这是我使用的命令：

```
objdump -T /lib/*.so* /usr/lib/*.so* | grep "stat" 
```

它没有出现`stat`我正在寻找的东西。

所以我的问题变成了：它在哪里，以及定义的任何其他“系统调用”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T09:02:57.723

`stat`在我的Linux机器上，我可以`__stat`在 `/usr/lib/libc.a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T09:09:37.490

首先`stat`是模棱两可；有一个`stat`系统调用，并且有一个`stat`可以从调用系统调用的用户空间调用的函数。最后一个函数（至少在我的系统上）定义在`/usr/include/sys/stat.h`（没错，它在头文件中）。它实际上有几个定义（所有一个调用不同函数的衬里，例如`__fxstat`），根据编译器和系统以及诸如此类的东西选择其中一个。

无论如何，`stat`（和其他系统调用）只是调用内核的包装器（通常有很多编排）。这就是为什么我最初对你的意思感到困惑。我希望，尽管我的第一条评论没有帮助，但我可以提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T13:50:02.547

您甚至可以在不使用的情况下进行[linux 内核](http://en.wikipedia.org/wiki/Linux_kernel) [系统调用](http://en.wikipedia.org/wiki/System_call)`libc`（但这可能是一种不好的做法）。[Linux Assembly Howto](http://tldp.org/HOWTO/Assembly-HOWTO/)解释（在其第 5 章和第6 章中）如何做到这一点（至少在 x86 Linux 32 位上）。

但我认为这是一个坏主意。通过`libc`是一种很好的做法，甚至可能更快（例如因为[VDSO](http://en.wikipedia.org/wiki/VDSO)），并且更便携。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T14:23:30.367

您可以使用[syscall(2)调用它](http://www.kernel.org/doc/man-pages/online/pages/man2/syscall.2.html)

```
#include <sys/syscall.h>
...
syscall(SYS_stat, path, buf); 
```

另请参阅 Linux 系统调用参考：[http ://syscalls.kernelgrok.com/](http://syscalls.kernelgrok.com/)

# perl - gvim 找不到 Perl 模块

> ID：10959635
> 
> 赞同：4
> 
> 时间：2012-06-09T08:50:13.007
> 
> 标签：perl, vim

我正在尝试在 gvim 中编写一个使用该模块的函数。但是当 gvim 启动时`File::Path`它会提醒我。`"Can't locate File/Path.pm in @INC(@INC contains: .) at (eval 8) line 1. BEGIN failed--compilation aborted at (eval 8) line 1."`我知道这意味着 gvim 找不到我的 perl lib 路径。所以，我的问题是：如何告诉 gvim 找到 Perl 模块的正确路径？我尝试添加`use lib'C:/Perl/lib';`但问题仍然存在。谢谢~~~

```
if has("perl")
function! Make_dir()
    perl make_dir();
endfunction
autocmd VimEnter * call Make_dir()
perl <<EOF
use File::Path;
sub make_dir{
    my $bakup=$ENV{'HOME'}."/bakup" ;
    mkdir $bakup if not -e _;
    #VIM::SetOption("backup");
    #VIM::SetOption("backupdir=$bakup");
    #VIM::Msg($bakup);
    #todo....
}
EOF
endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:03:56.707

您是否“审查”了您的输出，或者它真的只是说“ `(@INC contains: .)`”？这似乎表明 Perl 安装不正确。它应该有更多的目录。我想这可能表明存在权限问题。

`use lib`不起作用，因为 Perl 找不到`lib.pm`或它附带的任何其他模块。`-I`应该可以工作，但这只是一个创可贴修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:44:55.007

[http://vim.wikia.com/wiki/Script:556](http://vim.wikia.com/wiki/Script:556) 顺便说一句，我也尝试了 vim Tips wiki 上的方法......但问题仍然存在

# c# - 删除项目后无法选择列表视图中的第一个项目

> ID：10959636
> 
> 赞同：0
> 
> 时间：2012-06-09T08:50:13.193
> 
> 标签：c#, .net, winforms, listview

我有列表视图控件。有一个删除选定项目的选项。用户删除一个项目后。我需要以编程方式选择删除项目或第一个项目之前的前一个项目。我试过了

```
listView.Items[0].Selected = true;
listView.Select(); 
```

没有选择或突出显示任何项目。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:44:52.930

ListView.Select 不会选择项目集合中的项目。
正确的语法是

```
if(this.listView1.Items.Count > 0)
{
    this.listView1.Focus();
    this.listView1.Items[0].Focused = true;
    this.listView1.Items[0].Selected = true;
} 
```

[在此处查看 MSDN](http://msdn.microsoft.com/en-us/library/y4x56c0b.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:09:34.270

listView 的 Items Collection 没有 Select() 方法。而是调用 listView 的 Select() 方法。但是，在大多数情况下，它应该在没有它的情况下工作。

```
listView.Items[0].Selected = true; 
listView.Select(); 
```

顺便说一句，“它不工作”并不能很好地解释是什么导致了你的麻烦。下次再具体一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:21:42.643

您发布的代码可以正常工作。您是否正在做其他事情，例如将焦点放在另一个控件上？listView 的默认行为是在失去焦点时隐藏选定的项目。

将 listView 的属性*HideSelection*设置为 false 并查看您是否能够看到选择。

# java - Jade.Boot 类未找到 ubuntu10.10

> ID：10959638
> 
> 赞同：0
> 
> 时间：2012-06-09T08:50:28.203
> 
> 标签：java, ubuntu, classpath, agents-jade

我知道这是一个老问题，但我花了很多时间在这个问题上，现在绝望地求助。

问题：我无法运行 > java jam.Boot -gui

终端：

```
xxxx:~/Documents/Active/Studies/MscEngProject/Work/Java$ java -cp home/xxxx/bucket/jade/lib/jade: jade.Boot -gui

Exception in thread "main" java.lang.NoClassDefFoundError: jade/Boot
Caused by: java.lang.ClassNotFoundException: jade.Boot
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: jade.Boot.  Program will exit. 
```

我正在运行：java版本“1.6.0_26”，Ubuntu10.10

自去年以来，我一直在使用翡翠，但仅在 Eclipse 中。现在我必须在命令行中运行程序。我尝试过移动jade.Boot，在命令中更改了我的类路径，还创建了一个CLASSPATH env 变量。我什至试图提取 Boot.class 并运行它。我不是最好的程序员，但确实了解一些东西，但这个问题超出了我的知识范围。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:55:20.010

`java jade.Boot -gui`仅当jade.Boot 在jre 的类路径中时才有效。将它添加到您的类路径并感到高兴。
您可以尝试这样做（如果jade是在jar中分发的）：`java -cp "jar1.jar;jar2.jar" jade.Boot -gui`
其他方法是下载sun jdk，将其解压缩（例如，在/opt/jdk中）并将jade libs放在/opt/jdk/lib或类似的smth中

# facebook - 在 localhost:8888 SSL 问题上调试 appengine

> ID：10959639
> 
> 赞同：2
> 
> 时间：2012-06-09T08:50:45.653
> 
> 标签：facebook, google-app-engine, facebook-graph-api, ssl

我正在尝试为我的 appengine (java) 网站创建一个 facebook 应用程序。首先，如果有人在 appengine 上使用 Struts2 时找到了这样做的好例子（facebook 应用程序），我将不胜感激。

无论如何，在 facebook 上创建应用程序时，我看到我必须指定一个“安全画布 URL”。我用了：

```
https://localhost:8888/enter? 
```

但是在调用应用程序 url 时，我不断收到此错误：

```
Secure Connection Failed An error occurred during a connection to
localhost:8888\. SSL received a record that exceeded the maximum
permissible length. (Error code: ssl_error_rx_record_too_long) 
```

我试图导航到 localhost 上的相同 url（不是通过 facebook）同样的错误，然后，我尝试将代码部署到我的 appengine 并运行 url（而不是通过 facebook）并且它可以工作。

我仍然希望能够在编写 facebook auth 等时调试我的代码，所以如果您知道如何在本地计算机上调试 SSL\HTTPS，请帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:13:04.993

发现我可以更改 facebooks 默认的“安全”行为，并让它使用常规的 http 请求重定向到应用程序。拯救了我的一天...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T20:25:08.130

我不相信 Facebook 仍然支持禁用 SSL，所以这个答案不再有效......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T10:24:25.873

你当然可以！您必须自己生成一些自签名 SSL 密钥才能安装在您的服务器上。完成此操作后，您必须确保您的服务器通过安全的 SSL 连接接受请求（使用`https`而不是`http`）。

对于本地开发，这很好，您只需在浏览器中接受自签名证书（每次打开它），但对于生产代码[，您需要](https://developers.facebook.com/blog/post/499/)为您的域购买 SSL 证书。

# eclipse-rcp - 用于查看的 GEF 编辑器功能

> ID：10959645
> 
> 赞同：0
> 
> 时间：2012-06-09T08:51:38.843
> 
> 标签：eclipse-rcp, eclipse-gef, draw2d

我创建了一个包含 GEF 编辑器的小型 GEF 项目。现在我想将除 GEF 调色板之外的所有功能都转换为 View。有可能吗？因为当我尝试执行编辑策略时，一切都不起作用。我可以使用 GEF Rectangle 部件和模型绘制一个矩形。它工作正常。但现在我想将调整大小、删除、撤消功能添加到我的视图中。在 GEF 编辑器中，这些功能运行良好。这些功能是否仅适用于编辑器？有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:54:01.597

您想要的在当前的 GEF 实施中是不可能的。所有图形编辑器都是 Eclipse 编辑器，所以我看不到如何将它们放在视图中。您可以实现此功能，但需要大量接线...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:17:13.870

您可以将一些 GEF 功能添加到您的视图中。为此，您的视图必须以下列方式实现。

```
// Use a standard Viewer for the Draw2d canvas
    private ScrollingGraphicalViewer viewer = new ScrollingGraphicalViewer();
    // Use standard RootEditPart as holder for all other edit parts
    // private RootEditPart rootEditPart = new ScalableFreeformRootEditPart();

    private ScalableRootEditPart rootEditPart = new ScalableRootEditPart();

// parts for model elements
private EditPartFactory editPartFactory = new MyEditPartFactory(); 
```

例如，您可以将 GEF 编辑策略添加到您的视图中。

```
public void createPartControl(Composite parent) {

        // Initialize the viewer, 'parent' is the
        // enclosing RCP windowframe
        viewer.createControl(parent);
        viewer.setRootEditPart(rootEditPart);
        viewer.setEditPartFactory(editPartFactory);

        viewer.setContents(ModelFactory.createRegionLayerModel());

                 viewer.setEditDomain(new DefaultEditDomain(new GraphicalEditor() {

                @Override
                public void doSave(IProgressMonitor monitor) {
                    // TODO Auto-generated method stub

                }

                @Override
                protected void initializeGraphicalViewer() {
                    GraphicalViewer viewer = getGraphicalViewer();

                }

                @Override
                protected void configureGraphicalViewer() {
                    super.configureGraphicalViewer();
                    super.configureGraphicalViewer();
                    GraphicalViewer viewer = getGraphicalViewer();
                }

            }));
} 
```

希望这对你有帮助！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:17:50.557

如果我理解正确，您基本上只是想摆脱**调色板**，同时保留完整的编辑功能？

这可以很容易地实现。让你的编辑器类扩展`org.eclipse.gef.ui.parts.GraphicalEditor`（[API](http://publib.boulder.ibm.com/infocenter/rsmhelp/v7r0m0/index.jsp?topic=/org.eclipse.gef.doc.isv/reference/api/org/eclipse/gef/ui/parts/GraphicalEditor.html)）而不是`org.eclipse.gef.ui.parts.GraphicalEditorWithPalette`or `org.eclipse.gef.ui.parts.GraphicalEditorWithFlyoutPalette`，你就摆脱了调色板：

> 本课程可作为 GEF 新客户的快速入门。它将创建一个包含单个 GraphicalViewer 作为其控件的编辑器。

但是，请注意 Javadoc 注释说

> 重要信息 此类仅应用作创建您自己的 EditorPart 实现的参考。这个类不会满足每个人的需要，并且将来可能会改变。客户可以复制实现。

理想情况下，您应该设置自己的实现`org.eclipse.ui.part.EditorPart`，但我认为作为起点`GraphicalEditor`可能会这样做:)。

# c++ - LD_PRELOAD 是否适用于所有版本的 unix/linux？

> ID：10959649
> 
> 赞同：2
> 
> 时间：2012-06-09T08:52:36.277
> 
> 标签：c++, linux, unix, ubuntu, ld-preload

我写了一个简单的 LD_PRELOAD 模块，在 Ubuntu 服务器上编译。此预加载是否适用于其他系统，如 Solaris、FreeBSD、CentOS 等。在某些操作系统上是否有任何特殊问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:44:42.197

该`LD_PRELOAD`机制适用于所有 ELF 系统（Linux、Solaris 等）。

理论上，如果体系结构匹配，相同的库可以在不同的操作系统上使用（例如，i386 库不能在 Solaris SPARC 上运行），但存在许多缺陷。例如，C 库提供的许​​多数据结构具有不同的大小和成员排列，即使架构相同，它们也会在操作系统之间不兼容。

如果您对在`LD_PRELOAD`库中调用的函数非常小心，那么您可以创建一个在操作系统之间兼容的库。你肯定需要测试它。

# iphone - iOS：在视图中调用委托方法以使该视图模式化

> ID：10959653
> 
> 赞同：0
> 
> 时间：2012-06-09T08:53:16.327
> 
> 标签：iphone, objective-c, ios

我有一个带有两个视图 A 和 B 的 TabBar 消息传递应用程序。在视图 A 中，我声明了一个委托类型的对象，该对象在视图 B 中有一个委托方法。现在，每当视图 A 中发生某些事情时，委托对象中的方法都会获取调用，然后触发视图 B 中的委托方法。每当发生这种“事情”时，我想要发生的是，如果视图 A 可见，我希望标签栏将视图切换到视图 B。如果视图 B 可见，则视图不会发生任何事情。我该如何做到这一点？

实际的应用程序比上面描述的更复杂，因为 TabBar 及其所有关联视图都在另一个视图控制器中，该控制器在 appdelegate 中加载。（我是这个应用程序的贡献者，原始开发人员以其无限的智慧决定让事情变得非常神秘。）而且我不想实现使用类似...的东西的解决方案

```
[self.tabBarController setSelectedIndex:1] 
```

...因为这不是我希望它发生的方式。每当调用视图 A 中的委托时，我只想使 B 中的视图可见。谢谢。

我编辑了我的帖子：这一行 [self.tabBarController setSelectedIndex:1] 及其上方和下方的子句构成了一行。我用省略号强调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:58:13.350

如果您只想确定哪个视图可见，您可以使用以下`-isDesendentOfView:`方法：

```
 if([viewA isDescendentOfView:someView]) {
      //viewA is visible as a subview to `someView`
 } 
```

**编辑：**看完你的问题。我认为您想将`sender`参数发送到您的委托方法以确定它来自何处..即：

如果您的委托方法被定义为：

```
-(void)someMethod:(id)sender; 
```

在您的委托中，您将执行以下操作：

```
-(void)someMethod:(id)sender {

    UIView *aView = (UIView*)sender;

        if(aView == viewA) {

       }

        if(aView == viewB) {

       }
} 
```

希望这会有所帮助，或者至少让您走上解决问题的道路！

# api - SoundCloud API /me/activities/future_href

> ID：10959654
> 
> 赞同：0
> 
> 时间：2012-06-09T08:53:19.877
> 
> 标签：api, soundcloud

[来自 url https://api.soundcloud.com/me/activities.json](https://api.soundcloud.com/me/activities.json)`future_href`的 SoundCloud API 回答中的内容是什么？

截图： http: [//f.cl.ly/items/1B110D1y1p0I1I3Y0B0Q/SCDevActivities.PNG](http://f.cl.ly/items/1B110D1y1p0I1I3Y0B0Q/SCDevActivities.PNG)

从 furute_href 地址返回的信息仅包含一条最后的活动消息。

cat 我如何获得早期活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T22:40:22.470

这`future_href`是一个 url，它将为您提供比您刚刚获得的活动（即尚未发生的活动）更新的活动。用例：您加载活动流，然后每 5 分钟或通过“拉动刷新”之类的方式轮询`future_href`资源以加载新活动。

我相信它最初不应该包含任何项目，如果它给你之前活动的副本，那就是一个错误。我会与相关团队核实。

# xpath - MS XML selectNodes 方法未返回预期的节点

> ID：10959655
> 
> 赞同：1
> 
> 时间：2012-06-09T08:53:19.987
> 
> 标签：xpath, vb6, xml-parsing

VB6中的代码（XML文件）

我的xml文件如下

```
<book>
    <name>x1</name>
    <price>1<price>
    <name>x2</name>
    <name>x3</name>
    <price>2<price>
</book> 
```

根节点是书

```
Set nodlist = xmlDoc.selectNodes("/Book/Price") 
```

**它仅选择 1 个节点，其余节点被忽略**

我想让所有节点命名为`price`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:25:08.877

```
Set nodlist = xmlDoc.selectNodes("/Book/Price") 
```

**XPath 是 CAse senSitiVe ——在提供的 XML 文档中没有命名`Book`或节点。`Price`因此上述方法调用必须返回一个空的`XmlNodeList`**。

你要：

```
Set nodlist = xmlDoc.selectNodes("/book/price") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:01:12.823

**1/**正如[JP](https://stackoverflow.com/users/190829/jp)在 OP 的评论中发现的那样，您的第二个`price`节点未正确关闭。

该`selectNodes()`方法使用 XPath 选择器（[语法](http://www.w3schools.com/xpath/xpath_syntax.asp)、[教程](http://www.w3schools.com/xpath/default.asp)），对吗？

**2/**正如[Dimitre](https://stackoverflow.com/users/36305/dimitre-novatchev)所说，XPath 区分大小写，因此`/Book/Price`如果您的实际元素是`book`and则无效`price`。应该是`/book/price`。

但是，如果将第一个`price`节点返回给您，则很可能您的选择器实际上是小写的`/book/price`，并且您的问题很可能来自`price`未正确关闭的第二个节点。

**3/**最后，你确定这*真的*`book`是你的 XML的*根节点吗？*你没有父母之类的吗？**`bookstore`**

 **如果您的选择器具有形式`/book/price`（一开始只有一个斜杠），它是一个*绝对*路径，那么它应该选择确实选择`price`的所有元素`book`，但只有给定`book`的是*（只有非常单一的）*根节点（没有其他`book`显然，在您的文档中，因为您不能在一个文档中有多个根，并且根本没有父）。

试试这个：

*   `book/price`应该为文档`price`的所有节点返回所有节点`book`
*   `price`应该返回所有`price`节点，无论它们是整个文档中的父节点

如果您有另一个根，例如`bookstore`，或者`library`想要使用*绝对路径*，请尝试：

*   `/bookstore/book/price`（或者`/library/book/price`，或者你的实际根节点是什么）

此外，您可以尝试使用类似的方式访问*您*的节点，具体取决于您在 XML 树中的位置或位置：

*   `//book/price`
*   `//price`**

# cocoa-touch - RKJSONParserKit，存储字典泄漏？这段代码有什么问题

> ID：10959658
> 
> 赞同：0
> 
> 时间：2012-06-09T08:53:51.400
> 
> 标签：cocoa-touch, restkit

我正在使用 RKJSONParserKit 读取 json 内容并存储在 NSDictionary

```
parser=[[[RKJSONParserJSONKit alloc] init]autorelease];
NSDictionary *dataDict=[parser objectFromString:response.bodyAsString error:&error]; 
```

dataDict 似乎正在泄漏，我什至尝试过

```
NSDictionary *dataDict=[NSDictionary dictionaryWithDictionary:[parser objectFromString:response.bodyAsString error:&error]]; 
```

据我了解，我不必发布 dataDict，因为我没有在其上使用 alloc/init。

该代码按预期工作，但在使用“Profiling”进行测试时 - 它显示泄漏。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:37:37.830

我认为这不是字典“泄漏”，而是方法 objectFromString:error:。在内部，我认为 JSONKit 创建了一些静态变量，这些变量将显示为“泄漏”，因为它们从未被释放。除非您有大量内存泄漏，否则我会说这是正常的。

# c++ - check_union256d 是什么？

> ID：10959659
> 
> 赞同：1
> 
> 时间：2012-06-09T08:54:19.903
> 
> 标签：c++, testing, gcc

功能是什么`check_union256d`？

它放在以下代码中：

```
/* { dg-do run } */
/* { dg-require-effective-target avx } */
/* { dg-options "-O2 -mavx" } */
#include "avx-check.h"
void static
avx_test (void)
{
  int i;
  union256d u, s1, s2;
  double e [4];
  s1.x = _mm256_set_pd (2134.3343,1234.635654,453.345635,54646.464356);
  s2.x = _mm256_set_pd (41124.234,2344.2354,8653.65635,856.43576);
  u.x = _mm256_div_pd (s1.x, s2.x);
  for (i = 0; i < 4; i++)
  e[i] = s1.a[i] / s2.a[i];

  if (check_union256d (u, e))
  abort ();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:08:22.757

它来自[英特尔 AVX](http://software.intel.com/en-us/avx/)，它是：

> SSE 的新 256 位指令集扩展，专为浮点 (FP) 密集型应用而设计。

# .htaccess - 动态子域重定向到 URL 变量

> ID：10959661
> 
> 赞同：0
> 
> 时间：2012-06-09T08:54:25.040
> 
> 标签：.htaccess, mod-rewrite, subdomain

我试图通过使用子域的名称作为变量将我网站的任何子域重定向到一个页面，但没有实际更改的 URL。

例如 [http://SUBDOMAIN-NAME.website.com](http://SUBDOMAIN-NAME.website.com) 指向： [http](http://www.website.com/view/SUBDOMAIN-NAME) ://www.website.com/view/SUBDOMAIN-NAME 但 URL 保持为 [https://soundcloud.com/bugprentice/im-so -疲劳的](https://soundcloud.com/bugprentice/im-so-tired)

我在 APACHE 服务器上，我想使用 .htaccess 规则

# unix - 另一个 grep 高级

> ID：10959666
> 
> 赞同：0
> 
> 时间：2012-06-09T08:55:15.523
> 
> 标签：unix, search, grep

Q1。我想grep这样的东西：

```
grep -Ir --exclude-dir="some*dirs" "my-text" ~/somewhere 
```

但我不想显示包含“my-text”的整个字符串，我只想查看文件列表。

Q2。我想查看包含“my-text”但不包含“another-text”的文件列表。怎么做？

抱歉，我在 man grep 中找不到答案，在 google 中也找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:18:02.297

Q1。你一定没有用谷歌搜索那个。

[`man grep`](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)

> -l, --files-with-matches
> 禁止正常输出；而是打印通常会从中打印输出的每个输入文件的名称。扫描将在第一次匹配时停止。

Q2。除非您希望两种模式位于同一行，否则您将需要多次调用 grep。就像是：

```
$ grep -l my-text | xargs grep -vl another-text 
```

# php - CronJob 的 Javascript 替代品

> ID：10959669
> 
> 赞同：3
> 
> 时间：2012-06-09T08:55:52.707
> 
> 标签：php, javascript, jquery, cron

Cronjob 有什么 javascript 替代品吗？

问题是，我的老板不想再使用 CronJob 进行日常执行，并告诉我如果我们可以使用 javascript 而不是 CronJob 来完成。

我写了一个 php+javascript 代码。它基本上从数据库中收集日常任务数据（要执行哪个 .php 文件，时间间隔是多少等）并将它们放入一个对象中。

然后，

```
<script>
    function mainFunc(){    
        for(var i=0; i<sizeOfJobs(); i++){ //traverse in the object
            currentDate = new Date();
            //if any of the jobs execution time has come, execute it           
            if(jobs[i]['next_run'] <= currentDate){ 
                $.ajax({
                    url: jobs[i]['file_location'] ,
                    async: false, //this is another question, look below please
                    success: function(data){
                        //after the finish, set next_run and last_run                   
                        currentDate = new Date();                    
                        jobs[i]['last_run'] = currentDate;
                        var nextRun = new Date();
                        nextRun.setTime(currentDate.getTime() + (jobs[i]['interval'] * 60 * 1000));  
                        jobs[i]['next_run'] = nextRun;                        

                    }
                });            
            }                    
        }
        //repeat

        //currently 10 sec but it will increase according to jobs max runtime        
        setTimeout(mainFunc,10000); 
    } 

        $(document).ready(function(){
            setTimeout(mainFunc,10000);        
        })
</script> 
```

所以，我使用这个代码。它适用于基本工作，但会有大量工作需要 10 分钟以上才能完成（例如删除和重新填充具有数千行的数据库表）

*   安全吗？
*   我是否应该将“异步”值设置为 false？
*   我知道可能存在必须同时执行的作业，如果我将 async 设置为 false，则每个作业都需要等待完成前一个作业等，因此我需要将 setTimeout 值设置为总最大运行时间所有的工作。
*   如果我将其设置为 true 会发生什么？我担心的是，如果一个作业不能在 setTimeout 间隔之前完成，它的 next_run 将不会被设置，它会自动重新执行。那么我应该在 ajax 调用之前设置 next_run 值吗？

回到主题，我需要做这一切吗？有更好的解决方案或库吗？（我用谷歌搜索但找不到任何有用的东西。）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:01:35.687

首先，在我的专业看来，你的老板疯了:)

话虽如此，您可以进行一些更改来解决您的恐惧：

1.  创建一个与数组`job_execution_slots`长度相同的`jobs`数组；初始化为`null`值。

2.  在你这样做之前，`$.ajax()`你检查是否`job_execution_slots[i]`是“采取”（不是`null`）。

3.  当插槽为空时，请`job_execution_slots[i] = $.ajax({...})`确保将其设置为`async: true`; 保留引用还允许您通过停止 AJAX 请求来“终止”作业。

4.  在您的 AJAX 完成处理程序中，您执行`job_execution_slots[i] = null;`

这基本上序列化了每个作业的执行。

让我知道这对您是否有意义；我可以根据需要提供更多细节:)

# java - 在执行一组操作后检查给定的布尔数组是否可以匹配目标布尔数组

> ID：10959674
> 
> 赞同：3
> 
> 时间：2012-06-09T08:56:35.163
> 
> 标签：java, arrays, boolean

这个任务实际上是作为作业交给我们的，但是作业中的要求是编写一个递归方法，如果我们对数组 A 执行了几个步骤后数组 A 可以匹配数组 B，则该方法可以返回 true 或 false，我已经以递归方式回答了这个问题，我有兴趣找到是否有更智能的方法，可以用来解决这种类型分配的某种模式或方程式，话虽如此，我不确定是否作业标签仍然相关，但我添加它以防万一。

以下是详细信息： 给定两个长度相同的布尔数组。如果给定数组“init”可以匹配目标数组“target”，则返回 true，问题是：每当我们将一个索引的值从 true “翻转”为 false 时，反之亦然，索引中的值在右侧和左侧当前索引的值，也翻转它们的值（如果这样的索引当然在数组范围内），例如：

```
boolean[] init =   {true, false, true, false, true, false};
boolean[] target = {false, true, false, true, false, true}; 
```

在这种情况下，答案是正确的，因为我们可以翻转 init 数组的第一个点 [0]，结果是：

```
boolean[] init =   {false, true, false, false, true, false);
boolean[] target = {false, true, false, true, false, true}; 
```

然后翻转 init 数组中的第 4 个点 [3]，导致 init 和目标数组之间匹配：

```
boolean[] init =   {false, true, false, true, false, true};
boolean[] target = {false, true, false, true, false, true}; 
```

递归地，它只是测试“翻转状态”或没有“翻转状态”的两个选项，并在每个测试的数组索引中前进，这将递归检查所有选项，如果找到匹配项，最终返回 true。

现在回到我的问题上，有没有更好的方法来解决这类问题而不必检查这么多选项？它不必是递归的……事实上，最好不是递归的：）所以请随时分享您的想法和建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:41:21.373

好的，我不打算写实现，但这里是基本逻辑。找出需要更改的值，例如。{true ,false ,false,true} 与 { true, true,false,false} = {true != true,false != true, false != false, true != false} = {false,true,false,true }

现在，我们将尝试翻转这个新数组，直到从 0 到 (size-2) 的所有值都等于 false。我们知道我们可以线性地做到这一点。如果 a[0] == true，则在 a[1] 处翻转，如果 a[1] == true，则在 a[2] 处翻转。只需遍历每个值，大小为 - 2。

最终，整个数组将为假，除了最后一个值为真或假的值。现在的问题是，如果只有最后一个值为真，是否可以转换数组以使所有值都为假？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:03:44.417

***评论***

对于 n 位，可以有 n 次操作用于不同的更改。

*   操作**顺序****无关紧要**！_ （交换的，联想的）
*   执行**两次**操作会恢复**相同**的状态。（反光的）

因此，每个解决方案都是 n 个操作的子集，可以按任意顺序执行。

*   *与算法无关：*如果有 k > 4 个连续不变的位，则可以排除中间位在 [i+2] 到 [k-1-2] 的操作。
*   **最多 3 个操作会影响一个特定的位**。因此，对于所有不同的位，您可以收集要从中选择的操作。
*   在针对一位的3 次操作中，必须选择**1 或 3次操作（2 次操作将恢复它）。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T10:02:52.590

如何加快实现速度（对是否可以使用给定规则转换数组的问题回答是/否）：

*   将所有内容表示为位而不是真假值数组。那么位翻转模式为：1100...00, 1110...00, 0111...00, ..., 0000...11。我们将搜索位翻转模式通过执行 BFS（或 DFS）来转换数组的所有可能方式。

*   存储是否可以使用位集进行转换（如果语言允许此类低级实现或提供此类库）或 char/boolean 数组。这将减少转换使用的空间。数组/位集的大小为 2 ^ n。

*   当你得到所有可能的变换后，你可以通过对输入和目标进行异或来回答O(1)中元素个数固定的问题，然后检查这种变换是否存在。好吧，如果元素的数量不同，那么没有太大的优势。

它应该能够达到 20-23 位，同时仍将时间保持在 1-3 秒以下（假设 C++ 代码）。对于 Java，它可能会慢一点，但应该在 30 秒以下。

不过，时间复杂度并不比您当前的方法好。

您也可以搜索变换模式 0000...01（提前终止，而不是搜索可能变换的整个空间），然后使用 Darcy Rayner 建议的方法。最坏情况的复杂性并不比您当前的方法好。

~~我不知道这个问题是否有任何数学解决方案。目前，这都是蛮力。~~

**编辑**

在数学上，可以证明我们可以用 Darcy Rayner 建议的方法（通过分析最后 2 位）贪婪地将差异减少到 1。

也可以证明，我们可以随时否定整个模式，即长度为3k，平凡，长度3k + 1，两端翻转，中间所有3组，长度3k + 2，翻转在一端，所有 3 组在中间。

所以如果我们有最后一位 = 1，我们可以翻转整个模式。如果原始长度是 3k + 1，我们最终会得到 3k 的差异（真），可以简单地翻转。如果原始长度是 3k，我们最终会得到 3k - 1 的差异，我们可以在一端翻转，并翻转每组 3。在这两种情况下（长度 3k + 1 和长度 3k），变换总是可能的。

我目前对案例 3k + 2 没有任何证据。

# database - SAS：从多个数据集创建多个文件

> ID：10959678
> 
> 赞同：1
> 
> 时间：2012-06-09T08:57:14.043
> 
> 标签：database, sas, dataset, extract

我有 24 个以相同方式构建的数据集。我的意思是相同的列标题（时间、日期、价格、股票代码）、数据集结构等。我不希望附加所有 24 个文件，因为一个数据集太大而无法处理。我将所有数据集命名为“file1 file2 file3 file4 .... up to file24”。

我想要做的是以下内容：

1.  例如，一次更改我所有 24 个文件中的日期格式；

2.  能够从每个文件中提取一个特定的股票代码，如“戴尔”，并附加所有提取的“戴尔”数据；

3.  最后，如何创建一个循环，使我可以将股票代码从“戴尔”更改为列表中的另一个股票代码，例如“Goog”？我希望该循环为我的所有股票代码执行 (2)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:49:34.913

1.  要更改数据集中的日期格式，循环遍历所有观察结果可能不是一个好主意。标准语法是 -

    proc datasets library = your_libname nolist; 修改数据集名称；格式变量名格式名；退出;

鉴于 modify 语句不采用多个 SAS 文件，您必须将其包装在一个宏中以用于所有 24 个文件

```
%macro modformats();
proc datasets library = <your libname> nolist;
  %do i = 1 %to 24;
  modify file&i;
    format <variable name> <format name>;
  %end;
quit;
%mend modformats; 
```

1.  要提取和附加所有“戴尔”相关数据，最好使用视图。

例如，您首先定义一个视图（注意这里没有创建名为“all_files”的物理数据集）-

```
data all_files / view = all_files;
  set file1 file2... file24;
run; 
```

然后你可以写 -

```
data dell;
  set all_files;
  where ticker = 'DELL';
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T12:10:09.170

这是解决方案的原型。我不知道你是否需要做很多符号更改。将根据要求修改代码。没测试过，不过应该可以。

```
%macro test();
%do i=1 %to 24;
  data file&i;
   set file&i;
    format date [dateformat];  /*replace with the format you want */ 

proc append base=unions data=file&i(where=(stock_symbol='Dell'));

data unions;
 set unions;
  stock_symbol='Goog';

%end;
%mend;

%test(); run; 
```

# python - Python中首选的最大缩进？

> ID：10959683
> 
> 赞同：3
> 
> 时间：2012-06-09T08:58:14.383
> 
> 标签：python

我正在阅读[PEP 8](http://www.python.org/dev/peps/pep-0008/#indentation)并注意到它没有说明最大缩进水平。当然，79 个字符的限制限制了缩进级别，但是**Python 中是否有推荐的最大缩进级别？**你对此有何看法？你有公司层面的政策吗？

作为其他地方的示例，Linus Torvals 在[Linux 内核样式指南](http://www.kernel.org/doc/Documentation/CodingStyle)中指出

> [...] 答案是，如果您需要 3 级以上的缩进，那么无论如何您都搞砸了，应该修复您的程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T10:33:45.853

可读性*是*这里最重要的事情。在一个运行超过 4 或 5 个页面/屏幕的函数中，4 或 5 级缩进并不像阅读 3 级那样严重

如果您想知道是否有太多缩进，您可能会这样做。你能重构你的代码来使用一些功能吗？列表/字典/集合理解？也许看看 itertools 看看有没有什么可以帮助的？...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-22T21:07:24.113

我在元编程（编写编写代码的代码）时遇到了硬缩进限制，它是 100。在 CPython 2.7.8 中，这是导入时抛出的内容：

```
IndentationError: too many levels of indentation 
```

因此，对于您的实际问题，在任何情况下或政策下，首选限制必须低于 100！:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-09T11:11:07.223

只要您处理的是过程范式，您就可以认为 Linus Torvalds 的 3 级缩进规则是有效的（而且并非总是如此，因为*几乎没有什么总是有效的*）。

与 C 不同，Python 提供了 OOP，它至少增加了一级缩进，因此您通常可能需要 3-4 级缩进，如果不是更多的话。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T09:03:10.390

由于它的风格，个人喜好起着一定的作用，但 3-4 是你应该去的。

然而，可读性是王道，所以最好让其他人查看你的代码并告诉你它是否难以理解。

像许多 Python “规则”一样，如果你能证明它是合理的，那就改变它们。

# artificial-intelligence - 使用一阶逻辑构建解析证明

> ID：10959684
> 
> 赞同：1
> 
> 时间：2012-06-09T08:58:19.240
> 
> 标签：artificial-intelligence, first-order-logic

对于即将到来的考试，我有以下复习题，希望得到一些帮助。我必须使用分辨率来回答“玛丽只用青苹果做馅饼”这个问题。我目前的知识库和语言是以下句子：

```
Mary only uses apples from John to make pies:
 ∀π,a(Apple(a) ∧ Pie(π) ∧ Make(M,π,a) => Grows(J,a))
(⌐Apple(a) V ⌐Pie(π) V ⌐Make(M, π, a) V Grows(J,a))    (in CNF) 
```

最近更新：

我会尽量说得更具体一些。我想证明的是“玛丽只用青苹果做馅饼”。写这个逻辑我得到：

Mary 只用青苹果做馅饼： π,a Pie(π) A Make(M, π, a) => Green(a)

以及将其翻译成 CNF 形式的步骤（http://en.wikipedia.org/wiki/Conjunctive_normal_form）：

```
π,a ⌐(Pie(π) A Make(M, π, a)) V Green(a) 
π,a (⌐Pie(π) V ⌐Make(M, π, a)) V Green(a) 
(⌐Pie(π) V ⌐Make(M, π, a)) V Green(a) 
⌐Pie(π) V ⌐Make(M, π, a) V Green(a) (CNF form) 
```

以 CNF 形式否定此陈述（我们将在决议中使用它来证明）：

饼图(π) A Make(M, π, a) A ⌐Green(a)

现在当对一阶逻辑使用分辨率时:(http://en.wikipedia.org/wiki/Resolution_(logic))

这是正确的吗！？还是我弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:16:43.230

我不确定你是否正确地解决了这个问题。第一步是将三个语句（“苹果是绿色的或红色的”、“约翰只种绿色的苹果”、“玛丽只用约翰的苹果做馅饼”）编码成分句形式，这是你没有做过的。

第二步是将您要证明的陈述的*否定（“玛丽只用青苹果做馅饼”）也编码成从句形式。*我不认为你已经这样做了，我认为你已经编码了积极的陈述。也许我错过了一些东西。但是对查询语句的否定进行编码最终会得到四个用 AND 串在一起的短语句，每个语句都可以被视为知识库中的一个语句。

从那里开始，减少是机械的。

*更新：* 再一次，您需要添加您要证明的陈述的*否定。*你没有这样做，你添加了声明本身和另一个关于苹果是绿色的声明。不要那样做。你不是要证明苹果是绿色的，而是要证明玛丽只用青苹果做馅饼的说法。否定*那个陈述*，用你的其他三个知识库陈述解决它，并提取一个矛盾（也就是说，对于某个陈述 X，将 X 和 not-X 一起解决。）

那就是算法。有用。如果您不这样做，无论您是否“需要”，您正在做的不是分辨率算法，如果我给您的家庭作业/考试评分，我会将其评分为不正确。

*更新 2*：您越来越近了，但是您的查询语句需要一个关于 a 是 Apple 的附加子句（即 Apple(a)），因为您的其他几个语句已经有。它应该看起来几乎与仅使用 John's apples 的关于 Mary 的陈述（然后因为它是查询而被否定。）它的形式是正确的，用 AND 串在一起的小子句，你只是缺少一个。

但是请注意，一旦您有了这些，每个小从句（因为它们与 AND 串在一起）都可以在您的知识库中充当独立的语句。因此，例如，按照您现在制定的方式，您可以使用第三条语句的表达式来解析 Pie(p)。解析证明中有很多步骤，但是一旦你完全编码了查询否定，它们都是这样的微小步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:39:26.070

作为一般信息，您需要在 CNF 中有您的知识库和一个 NEGATED 目标（也在 CNF 中）。然后通过统一和应用解决方案，您需要有一个 nil 解决方案或目标状态本身。其他选择是无法找到其中任何一个并无限解决。

如果

```
Make(p,π,a) 
```

在您的知识库中，然后将其与最后一个解决方案统一并应用解决方案，即：

```
⌐Make(M,π,a) 
```

给你一个零解决方案。此时你可以停下来总结一下。

# php - php。“return($var & 1);”是什么意思？意思是？

> ID：10959689
> 
> 赞同：0
> 
> 时间：2012-06-09T08:58:47.257
> 
> 标签：php

> **可能重复：**
> [回调函数返回 return($var & 1)？](https://stackoverflow.com/questions/6201134/callback-function-return-returnvar-1)

示例代码：

```
<?php
function odd($var)
{
    // returns whether the input integer is odd
    return($var & 1);
}

function even($var)
{
    // returns whether the input integer is even
    return(!($var & 1));
}

$array1 = array("a"=>1, "b"=>2, "c"=>3, "d"=>4, "e"=>5);
$array2 = array(6, 7, 8, 9, 10, 11, 12);

echo "Odd :\n";
print_r(array_filter($array1, "odd"));
echo "Even:\n";
print_r(array_filter($array2, "even"));
?> 
```

这种代码是什么意思：

```
 return  (x & y) 
```

?

# c++ - 为什么按值调用示例不修改输入参数？

> ID：10959694
> 
> 赞同：2
> 
> 时间：2012-06-09T08:59:41.170
> 
> 标签：c++, call

在下面的按值调用示例中，我无法理解为什么这段代码没有将 5 的值更改为 6。

第 11 行调用函数 changeValue 的值为 6，所以我认为应该输出 6，但仍然输出 5？

```
#include <iostream>
using namespace std;

void changeValue(int value);

int main()
{
  int value = 5;
  changeValue(value);

  cout << "The value is : " << value << "." << endl;

  return 0;
}

void changeValue(int value)
{
  value = 6;
}

// This doesn't change the value from 5 to 6\. 5 is output? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T09:02:32.530

当您通过***值***传递函数参数时，对象的副本将传递给函数而不是原始对象。除非您明确指定函数的参数，否则在 C/C++ 中始终按值传递。

你的功能：

```
void changeValue(int value) 
```

`value`按值接收参数，简而言之，创建in的副本`main()`并将其传递给函数，函数对该值而不是`value`in 进行操作`main()`。

如果要修改原始文件，则需要使用***pass by reference***。

```
void changeValue(int &value) 
```

现在对原始的引用（别名）`value`被传递给函数并且函数对其进行操作，从而反映了`main()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:03:18.170

当前观察到的行为是因为*按值传递*意味着实际上将值的副本（具有值的新整数）传递给函数。

您必须通过引用传递。为此，changeValue 函数将如下所示：

```
void changeValue(int& value) 
```

其余代码将保持不变。

通过引用传递变量意味着将`int value`声明的相同`main`传递给`changeValue`函数。

或者，您可以传递指向`value`该`changeValue`函数的指针。但是，这也需要更改调用函数的方式。

```
int main()
{
    int value = 5;

    changeValue(&value);

    ...

    return 0;
}

void changeValue(int* value)
{
    *value = 6;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T09:03:55.710

的值`value`没有改变，因为`int`你传递给函数的值被**复制**到函数的堆栈帧中，然后它被改变，当函数退出时，副本被销毁。的堆栈帧中的原始`main`文件没有更改，因为它被复制到`changeValue`.

如果你想改变它，你应该传递一个对 an 的引用`int`，就像这样`void changeValue(int& value)`，它表示该值不会被复制到函数中，而只是传递原始值的别名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T13:26:34.430

我将这个答案作为另一种思考编写函数和按值传递参数的方式。

您也可以通过以下方式编写此代码。即按值传递参数，修改函数中的本地副本，不改变原始值，并返回改变后的值。

```
int changeValue(int val)
{
  val = 6;
  return val;
}

int main()
{
int value = 5;

value = changeValue(value);

cout << "The value is : " << value << "." << endl;

return 0;
} 
```

我并没有以任何方式表明我对您的程序的建议比通过引用更好。相反，这只是学习函数式编程语言（Clojure）的方式正在影响我的思维方式。

此外，在 Python 等语言中，您不能修改标量参数。您只能返回一个新值。所以我的回答更像是在 C/C++ 中以不同方式思考事物的练习。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T09:04:52.903

和：

副本分配了 6，但不返回更改。

如果要更改值，则需要一些参考或指针：

尝试使用方法签名，如：

```
void changeValue(int& value) 
```

这可能会达到你的预期

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-09T09:04:54.050

这是因为`changeValue ()`函数的变化是局部的。当您可以将 main`changeValue (value)`中变量的内容`value`复制到函数的名为`value`（相同名称）的形式参数中时。同名并不意味着两者相同。您在函数内部访问的值是您在 main 中的值的*副本。*

要更改，您需要通过引用或指针传递它

```
void changeValue (int *val)
{
  *val = 6;
} 
```

`changeValue (&value)`主要调用

这是有效的，因为 main 中的变量地址`value`被传递，并且这个地址值被复制到`val`函数中。通过这样做`*val`，我们可以得到复制到的地址的内容`val`，这实际上是`value`main 中的内容。

或者

```
void changeValue (int &val)
{
  val = 6;
} 
```

# c++ - 如何检测空的 int 输入？

> ID：10959699
> 
> 赞同：3
> 
> 时间：2012-06-09T09:00:28.517
> 
> 标签：c++, input

我正在尝试编码 Q 并且正在寻找一行代码来检测是否没有给出输入（用户只需按 Enter 键）。相关的数据类型是 int。

我读过一些关于这个问题的其他问题，但不符合我的需求。我已经尝试过 eof 和其他类似的建议无济于事......

这是代码 -

```
#include <iostream>
#include <math.h>
#include <vector>
using namespace std;
int main() {
int ogv,cgv=0,i,j=0,k;
int arr [3];
vector<int> ans;
while(true) {
    cgv=0;
    cin>>ogv;
    //if("ogv is not a number, just an enter") 
          break;
    arr[0]=floor(ogv/4);
    arr[1]=floor(ogv/3);
    arr[2]=floor(ogv/2);
    for(i=0;i<=2;i++) {
        if (arr[i]<0)
            arr[i]=0;
        cgv+=arr[i];
    }

    if(ogv>cgv) {
        ans.push_back(ogv);
    }
    else {
        ans.push_back(cgv);
    }
   j++;
}
for(k=0;k<j;k++) {
    cout<<ans.at(k)<<endl;
}
} 
```

非常感谢您的帮助...！:D

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:09:11.977

您可以使用[noskipws 操纵器](http://www.cplusplus.com/reference/iostream/manipulators/noskipws/)

例子：

```
int x = -1;
cin>>noskipws>>x;
if(x==-1)
{
    // no number was entered, the user just pressed enter
}
else
{
    // the user entered a number
} 
```

* * *

编辑：为了在循环中使用它，您需要在每次读取尝试之前丢弃当前在缓冲区中的字符。

例如，如果用户在循环的第一次迭代中输入数字 4 并按 Enter，则 cin 将读取 4，但会将行尾字符留在缓冲区中。当读取发生在第二次迭代中时，cin 将在缓冲区中看到行尾字符，并将其视为用户按下回车键，退出循环。

我们可以使用该[`sync()`](http://www.cplusplus.com/reference/iostream/istream/sync/)方法来丢弃缓冲区中的任何未读字符。我们需要在任何尝试读取之前执行此操作`cin`：

```
cin.sync();
cin >> noskipws >> x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:04:31.990

如果您使用流输入整数，它将在读入之前跳过空格。这包括您可以输入的任何数量的换行符。

换句话说：

```
int i;
std::cin >> i; 
```

在找到一些非空白之前不会返回。

如果你想检测一个空行，我通常只是`getline`将一个完整的行转换为一个字符串，然后字符串流将其转换为一个整数，例如：

```
#include <iostream>
#include <string>
#include <sstream>

int main (void) {
    std::string s;
    int i = -1;

    std::cout << "Enter string: ";
    std::getline (std::cin, s);
    std::cout << "String is '" << s << "'\n";

    std::stringstream ss (s);
    ss >> i;
    std::cout << "Integer is " << i << "\n";

    return 0;
} 
```

成绩单如下：

```
pax> ./qq
Enter string: 
String is ''
Integer is -1

pax> ./qq
Enter string: hello
String is 'hello'
Integer is -1

pax> ./qq
Enter string: 0
String is '0'
Integer is 0

pax> ./qq
Enter string: 1
String is '1'
Integer is 1

pax> ./qq
Enter string: 314159
String is '314159'
Integer is 314159 
```

# android - setStreamVolume 声音通知

> ID：10959702
> 
> 赞同：1
> 
> 时间：2012-06-09T09:01:37.677
> 
> 标签：android

当我使用 setStreamVolume 或物理声音按钮来调整设备上的音量时，它会产生短促的声音通知（哔哔声） - 我该如何移除它？

现在我有类似的东西：

```
_audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, (int) ((_maxVolume / 100) * progress),AudioManager.FLAG_PLAY_SOUND); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T09:12:58.513

只需将 FLAG_PLAY_SOUND 替换为 0

```
_audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, (int) ((_maxVolume / 100) * progress), 0); 
```

# java - Swing JxMapViewer：聚焦一个对象并设置相应的缩放级别

> ID：10959703
> 
> 赞同：0
> 
> 时间：2012-06-09T09:01:39.177
> 
> 标签：java, swing, dictionary, focus, jxmapviewer

我试图将 JxMapViewer 集成到我的摇摆应用程序中。

我在地图上的两个航点之间画了一条线。现在我希望实现如下功能：

无论我在地图上的哪个位置，无论缩放级别设置如何，每当我单击按钮（或某些外部事件）时，焦点都应转移到我绘制的线（即间接在两个航点上）

其次，应设置缩放级别，以使包含这两个航点的地图部分可见。

我看到我们在类中有`getViewportBounds`方法。`JxMApViewer`同样我们没有`setViewportBounds`。在那种情况下，我们可以计算一个包含这两个航点的矩形并设置它。

任何提示将不胜感激

* * *

我已将现有`calculateZoomFrom`方法修改为：

```
int zoom = mainMap.getZoom();
Rectangle2D inner = generateBoundedRectangleForLine(positionSet, mainMap.getZoom());

int count = 0;
Rectangle outer = mainMap.getViewportBounds();
while(!outer.contains(inner) || (outer.contains(inner) && !(inner.getHeight() >= mainMap.getHeight() - 50))) {
    Point2D center = new Point2D.Double(
            inner.getX() + inner.getWidth()/2,
            inner.getY() + inner.getHeight()/2);
    GeoPosition px = mainMap.getTileFactory().pixelToGeo(center,zoom);
    mainMap.setCenterPosition(px);
    count++;
    if(count > 30) break;
    if(outer.contains(inner)) {
        if (!(inner.getHeight() >= mainMap.getHeight() - 50)) {
            zoom = zoom - 1;
            if(zoom < 1) {
                break;
            }
        } else {
            break;
        }

    } else {
        zoom = zoom + 1;
        if(zoom > 15) {
            break;
        }
    }

    mainMap.setZoom(zoom);
    inner = generateBoundedRectangleForLine(positionSet, zoom);
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:07:57.700

我找到了解决方案。解决方案是将缩放级别设置为最低级别，然后调用 calculateZoomFrom 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:44:29.173

你可以打电话`JXMapViewer.setCenterPosition(GeoPosition geoPosition)`给你`ActionListener`。

您必须自己计算适当的缩放级别（据我所知，JXMapViewer 不提供任何东西）。由于您知道航点的坐标，因此计算边界框并设置适当的缩放级别应该不是问题。

# image - 定位 HTML5 画布元素

> ID：10959717
> 
> 赞同：0
> 
> 时间：2012-06-09T09:04:13.193
> 
> 标签：image, html, canvas, rotation

我对 HTML5 完全陌生，过去几天一直在阅读它，主要是因为我想创建一个旋转图像以放入`<div>`. 我找到了一个完全符合我要求的代码，但是它把画布扔到了我页面的左下角（我不知道为什么，但我认为它与下面代码的第一行有关）。我不知道如何使代码适应一个元素，以便我可以把它放在我想要的地方。通过查看其他人的脚本并尝试模仿他们，我知道你应该做这种事情来保持画布“” `<canvas width="100" height="100" id="pageCanvas"></canvas>`，但我不知道如何命名下面的代码来做到这一点。我非常感谢任何人可以为我提供的任何帮助 - 非常感谢您的阅读！:)

```
<script>

    window.addEventListener("load", init); 

    var counter = 0,
        logoImage = new Image(),
        TO_RADIANS = Math.PI/180; 
    logoImage.src = 'IMG URL';
    var canvas = document.createElement('canvas'); 
    canvas.width = 100; 
    canvas.height = 100; 
    var context = canvas.getContext('2d'); 
    document.body.appendChild(canvas); 

    function init(){
        setInterval(loop, 1000/30); 

    }

    function loop() { 
        context.clearRect(0,0,canvas.width, canvas.height); 
        drawRotatedImage(logoImage,100,100,counter); 
        drawRotatedImage(logoImage,300,100,counter+90); 
        drawRotatedImage(logoImage,500,100,counter+180); 
        counter+=2; 

    }

    function drawRotatedImage(image, x, y, angle) { 

        // save the current co-ordinate system 
        // before we screw with it
        context.save(); 

        // move to the middle of where we want to draw our image
        context.translate(x, y);

        // rotate around that point, converting our 
        // angle from degrees to radians 
        context.rotate(angle * TO_RADIANS);

        // draw it up and to the left by half the width
        // and height of the image 
        context.drawImage(image, -(image.width/2), -(image.height/2));

        // and restore the co-ords to how they were when we began
        context.restore(); 
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:47:14.827

在您的 HTML 代码中创建一个画布元素，以便您可以将其准确放置在您想要的位置（使用 html + css）：

```
<canvas id='canvas' height='100' width='100'> Your browser does not support HTML5 canvas </canvas> 
```

并替换此 javascript 代码：

```
var canvas = document.createElement('canvas'); 
canvas.width = 100; 
canvas.height = 100; 
var context = canvas.getContext('2d'); 
document.body.appendChild(canvas); 
```

通过这个：

```
var canvas = document.getElementById('canvas'); 
var context = canvas.getContext('2d'); 
```

# c++ - 从游戏中截取视频帧

> ID：10959720
> 
> 赞同：1
> 
> 时间：2012-06-09T09:04:46.563
> 
> 标签：c++, opengl, direct3d

我想从目前在 PC 上启动的游戏中获取视频帧（图像）。

[XSplit Broadcaster](http://www.xsplit.com/)有这样的功能。它以某种方式列出了实际上是视频游戏的进程并允许抓取视频帧。

据我了解，它可以通过枚举当前正在运行的 Direct3D 表面并从中获取图片来完成。

我对么？那么OpenGL游戏的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:45:19.670

[`apitrace`](https://github.com/apitrace/apitrace)似乎能够使用 Ye Olde [Trike](https://stackoverflow.com/a/426260/44729)[捕获帧](http://en.wikibooks.org/wiki/OpenGL_Programming/Video_Capture)。[`LD_PRELOAD`](https://stackoverflow.com/a/426260/44729)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:30:12.013

你检查了[`glReadPixels()`](http://www.khronos.org/opengles/documentation/opengles1_0/html/glReadPixels.htm)吗？我以前用过。虽然有点慢。

尝试

```
glReadPixels(0,0,width, height,GL_RGB, GL_UNSIGNED_BYTE,buffer); 
```

# c++ - 不带进位标志的大整数加法

> ID：10959725
> 
> 赞同：3
> 
> 时间：2012-06-09T09:06:10.540
> 
> 标签：c++, c, addition, arbitrary-precision, carryflag

在汇编语言中，通常有一条指令添加两个操作数和一个进位。如果要实现大整数加法，只需添加不带进位的最低整数和带进位的下一个整数。在我无法访问进位标志的 C 或 C++ 中，我将如何有效地做到这一点？它应该适用于多个编译器和架构，所以我不能简单地使用内联汇编等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T09:33:15.103

您可以使用“钉子”（GMP 中的一个术语）：`uint64_t`在表示数字时，不要使用 a 的所有 64 位，而是仅使用其中的 63 位，最高位为零。这样，您可以通过简单的位移检测溢出。你甚至可能想要少于 63 个。

或者，您可以进行半字运算。如果您可以进行 64 位算术运算，请将您的数字表示为 s 数组`uint32_t`（或等效地，将 64 位字拆分为高 32 位块和低 32 位块）。然后，在对这些 32 位整数进行算术运算时，可以先提升到 64 位，然后再转换回来。这可以让你检测进位，如果你没有“乘法”指令，它也有利于乘法。

正如另一个答案所示，您可以通过以下方式检测无符号加法中的溢出：

```
uint64_t sum = a + b;
uint64_t carry = sum < a; 
```

As an aside, while in practice this will also work in signed arithmetic, you have two issues:

*   It's more complex
*   Technically, overflowing a signed integer is undefined behavior

so you're usually better off sticking to unsigned numbers.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T09:16:33.767

您可以通过以下事实来计算进位：如果通过添加两个数字溢出，结果将始终小于其他两个值中的任何一个。

换句话说，如果`a + b`小于`a`，则溢出。这当然是为了积极的价值观，`a`但那`b`是你几乎肯定会在 bignum 库中使用的东西。

不幸的是，进位引入了一个额外的复杂性，因为将最大可能值加上一个进位将给您与开始时相同的值。因此，您必须将其作为特殊情况处理。

就像是：

```
carry = 0
for i = 7 to 0:
    if a[i] > b[i]:
        small = b[i], large = a[i]
    else:
        small = a[i], large = b[i]
    if carry is 1 and large is maxvalue:
        c[i] = small
        carry = 1
    else:
        c[i] = large + small + carry
        if c[i] < large:
            carry = 1
        else
            carry = 0 
```

* * *

实际上，您可能还需要考虑*不*使用数组元素中的所有位。

我过去实现过库，其中最大“数字”小于或等于它可以容纳的最大值的平方根。因此，对于 8 位（八位字节）数字，您可以存储从 0 到 15 的值 - 这样，将两位数字相乘并添加最大进位将始终与八位字节匹配，从而使溢出检测没有意义，尽管以一些存储为代价。

同样，16 位数字的范围为 0 到 255，因此它不会在 65536 处溢出。

事实上，我有时将其限制为更多，确保人工换行值是 10 的幂（所以一个八位字节将包含 0 到 9，16 位数字将是 0 到 99，32 位数字从 0通过 9999，依此类推。

这在空间上有点浪费，但可以*非常*容易地与文本（例如打印您的数字）进行转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T09:13:11.273

您可以通过检查来检查无符号类型的进位，结果是否小于操作数（任何操作数都可以）。

只需从进位 0 开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T09:25:14.797

如果我理解正确，您想为自己的大整数类型编写自己的加法。

你可以用一个简单的函数来做到这一点。无需担心第一次运行时的进位标志。只需从右到左，逐位添加进位标志（在该函数内部），从进位 0 开始，并将结果设置为 (a+b+carry) %10 并将进位设置为 (a+ b+进位）/ 10。

这个 SO 可能是相关的： [how to implement big int in c](https://stackoverflow.com/questions/269268/how-to-implement-big-int-in-c)

# javascript - 自己的数组 + jQuery.serializeArray() + post as json

> ID：10959726
> 
> 赞同：1
> 
> 时间：2012-06-09T09:06:51.070
> 
> 标签：javascript, jquery, json, serializearray

我得到数据未定义，我想我不能 ['productId'] 在数组中，但我认为我需要 json 中的这种结构，我尝试了一些变化但它从来没有，我需要什么我只是想通过ajax发送一个json。

```
jQuery(':checked').each(function(i){
  data[i]['productId'] =  jQuery(this).parent().find('.productId').val();
  jQuery(this).parent().find('.attrGrp').each(function(j){
    data[i]['attrGrps'][j]['uid'] = jQuery(this).find('.active').attr('id');
    data[i]['attrGrps'][j]['amount'] = jQuery(this).parent().find('.amount').val();
  });
});
jQuery.post(newSession, {json: data.serializeArray()}); 
```

有没有更好的方法呢？或者我怎样才能让它工作？帮助表示赞赏；/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:22:36.307

您需要在使用它们之前初始化数组和对象。字符串索引仅适用于对象。尝试这个：

```
var data = [];
jQuery(':checked').each(function(i)
{
  data[i] = {};
  data[i].productId =  jQuery(this).parent().find('.productId').val();
  data[i].attrGrps = [];
  jQuery(this).parent().find('.attrGrp').each(function(j)
  {
    data[i].attrGrps[j] = {};
    data[i].attrGrps[j].uid = jQuery(this).find('.active').attr('id');
    data[i].attrGrps[j].amount = jQuery(this).parent().find('.amount').val();
  });
}); 
```

或者，您可以使用[jQuery().serialize](http://api.jquery.com/serialize/)，在表单中发布所有内容并在服务器上对其进行排序。

# jquery - 仅在验证成功时如何提交表单

> ID：10959728
> 
> 赞同：3
> 
> 时间：2012-06-09T09:07:07.003
> 
> 标签：jquery, html, jquery-validate

我尝试在提交请求之前验证表单。我正在使用 jquery 验证

我期待页面完成加载时，表单将自动提交，我将在 div 中看到“正在加载”。但这里什么都没有发生是我的代码。但似乎它不起作用..

```
<script type="text/javascript">

    function submitForm() {
        $('#SearchForm').validate({
            errorLabelContainer: "#ErrorLabel",
            rules: {
                instrument: {
                    required: true,
                    maxlength: 10
                }
            },
            messages: {
                maxlength: "Must no longer than 10 characters",
                required: "Must not be empty"
            },

            submitHandler: function () { $('#SearchForm').submit(); }
        });
    }

    $(document).ready(function () {
        $('#SearchForm').submit(function () {
            $('#DivToUpdate').text('Loading ...');
        });
        submitForm();
    });
</script> 
```

二

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T09:20:17.820

做了一个小**工作演示** [http://jsfiddle.net/CRfuZ/](http://jsfiddle.net/CRfuZ/)

2件事：尝试推杆`invalidHandler`并`form`传给`submitHandler`

在上面的演示中，如果您输入更多，那么`maxlenght 10`halbert in`invalidHandler`将捕获它。

休息随意玩演示。

希望这会有所帮助:)

链接：[http ://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

**代码**

```
jQuery(function($) {
    $("#form").validate({
        debug: false,
        focusInvalid: false,
        onfocusout: false,
        onkeyup: false,
        onclick: false,
        rules: {
            instrument: {
                required: true,
                maxlength: 10
            },
        },
        messages: {
            maxlength: "Must no longer than 10 characters",
            required: "Must not be empty"
        },
        success: function(label) {
            alert('succes:' + label);
        },
        submitHandler: function(form) {
            alert('start submitHandler');
            postContent('test');
            alert('end submitHandler');
        },
        invalidHandler: function(form, validator) {
            alert('invalidHandler');
        },
    });
});

function postContent(postData) {
    alert('postcontent: ' + postData);

}

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:26:27.503

使用下面编写的代码可能会解决您的问题...

```
<script type="text/javascript">
    jQuery(function ( $ ) {
            var $theForm = $( 'form' );
        $( '#DivToUpdate' ).text( 'Loading ...' );
        $theForm.validate({
            rules: {
                instrument : {
                    required: true,
                    maxlength: 10
                }
            }, messages: {
                maxlength : "Must no longer than 10 characters",
                required : "Must not be empty"
            }
        });
        if( $theForm.valid() ) {
            $theForm.submit(); //submitting the form
        }
    });
</script> 
```

你不应该`submitHandler`一般使用...

补充：在[jsfiddle](http://jsfiddle.net/rashid2538/R3Fk6/)运行示例。

# javascript - 将变量传递给 mongo 修饰符

> ID：10959729
> 
> 赞同：1
> 
> 时间：2012-06-09T09:07:10.027
> 
> 标签：javascript, mongodb, meteor

我正在尝试更新文档中的数组元素，但我希望能够动态控制哪些元素，所以这有效：

```
var doc = Collection.findOne({...});  
Collection.update({_id: doc._id}, {$set: {"field.1.subfield": 10}}); 
```

但我希望能够将 javascript 变量传递给“field.1.subfield”的 1

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:22:11.920

这应该可以解决问题，将对象解析为 $set。

```
var n = {};
n['field.'+i+'.subfield'] = 10;
Collection.update({_id: doc._id}, {$set:n}); 
```

如果您有问题，请联系我们。

# android - 如何在我们自己的 Android 应用上使用 KML 绘制叠加层？

> ID：10959735
> 
> 赞同：2
> 
> 时间：2012-06-09T09:08:20.407
> 
> 标签：android, google-maps, android-mapview, kml, android-maps

我想使用 .kml 文件绘制叠加层，看起来像这样。但是在我自己的 MapActivity 应用程序中。 [31.kml，印度尼西亚雅加达的展示区](http://bit.ly/LDfFhH) 或 [我从谷歌搜索得到的例子](http://bit.ly/LatEdV)

我已经尝试过这段代码，但它只是打开了谷歌地图应用程序，即使它已经给了我一张带有 KML 覆盖的地图。

`final Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("geo:0,0?q=http://dl.dropbox.com/u/32264286/Unggahan/31.kml"));startActivity(myIntent);`

可能吗？我该如何实现呢？有没有人可以帮助我。提前致谢。

最好的问候，@AdityaSetyadi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:27:37.223

要使用 KML 绘制地图，可以选择编写代码来解析 KML 并绘制叠加层。

此链接提供解决方案

[如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

# javascript - 在 asp.net 的标签中显示 jquery 的结果

> ID：10959739
> 
> 赞同：3
> 
> 时间：2012-06-09T09:09:11.477
> 
> 标签：javascript, jquery, asp.net, json

我想在我的 asp.net 页面上的标签控件中显示此 javascript 的结果，而不是警报。我该怎么做？

```
<script type="text/javascript" language="Javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> <!-- Require EasyJQuery After JQuery --><script type="text/javascript" language="Javascript" src="http://api.easyjquery.com/easyjquery.js"></script> <script type="text/javascript" language="Javascript">
    // 1\. Your Data Here
    function my_callback(json) {
        alert("IP :" + json.IP + " COUNTRY: " + json.COUNTRY);
    }

    function my_callback2(json) {

       alert("IP :" + json.IP + " COUNTRY: " + json.COUNTRY + " City: " + json.cityName + " Region Name: " + json.regionName);
    }

    // 2\. Setup Callback Function
   // EasyjQuery_Get_IP("my_callback"); // fastest version
    EasyjQuery_Get_IP("my_callback2","full"); // full version
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T09:19:59.550

## 使用动态 ID

asp.net的标签控件默认呈现为`span`所以你可以通过ID找到这个控件来设置里面的文本，并使用`text`as在里面输入：

```
 $('#<%=txtLabel.ClientID%>').text("message"); 
```

## 使用静态 ID

替代方案（版本 4+）您可以`ClientIDMode="Static"`在控件上设置，这样 id 就不会改变

```
<asp:Label runat="server" ID="txtName" ClientIDMode="Static">Test</asp:Label> 
```

渲染为`<span id="txtName">Test</span>`并在他内部写为

```
$('#txtName').text("message"); 
```

您的功能将是

```
function my_callback(json) {
    $('#txtName').text("IP :" + json.IP + " COUNTRY: " + json.COUNTRY);
}

function my_callback2(json) {
   $('#txtName').text("IP :" + json.IP + " COUNTRY: " + json.COUNTRY + " City: " + json.cityName + " Region Name: " + json.regionName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:17:44.373

当您使用服务器端控制其客户端 ID 更改时。正如 Aristos 正确指出的那样，如果您使用的是（v4+），您可以将`ClientIDMode`属性设置为`static`使其 ID 保持不变。如果您的标签 ID 是 myLabel 并且您设置`ClientIDMode=static`了，那么标签的 ID 将是 myLabel 本身。否则，ID 会呈现为这样的内容`#ctl00_ContentPlaceHolder1_myLabel`。这应该为您解决问题。

```
$('#<%= myLabel.ClientID %>').text("set whatever you need"); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:15:05.747

```
head runat="server">
    <script language="Javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script language="Javascript" type="text/javascript" src="http://api.easyjquery.com/easyjquery.js"></script>

<script language=Javascript>
    function setup_ip(json) {
        var htmlx = " Your IP Address: <b>" + json.IP;
        htmlx += "</b> | Country: " + json.countryName;
        if (json.cityName != "Unknown" || json.regionName != "Unknown") {
            htmlx += " | City: " + json.cityName + " / " + json.regionName;
        } else {
            htmlx += " | Your Time: " + json.localTimeZone;
        }

        $("#myipx").html(htmlx);
    }

    $(document).ready(function() {

        EasyjQuery_Get_IP("setup_ip", "full");

    });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <div class="inner">
<p class="welcome-message">
<a href="http://www.easyjquery.com/detect-get-clients-ip-address-country-using-javascript-php/"id="topid" title="Javascript, PHP jQuery API Detect Clients IP Address and Country - Geo Location"   ><asp:Label ID="myipx" runat="server"  ClientIDMode="Static"></asp:Label>Detecting Clients IP Address - Country - City</span></a>
<br />
<asp:Label ID="lbl1" runat="server"  ClientIDMode="Static"></asp:Label>
                </p>

            <!-- END #footer-texture -->
            </div>

    </div>
    </form>
</body> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-09T09:13:28.177

找到标签的 ID 或名称，并将其文本设置如下：

```
$('label#myLabel').text('foo'); 
```

# ios - 我该如何解决这个委托错误？

> ID：10959749
> 
> 赞同：0
> 
> 时间：2012-06-09T09:10:26.377
> 
> 标签：ios, xcode, delegates

我有一个代表，但如果没有其他代表行，它就无法工作：

```
- (id)initWithData:(NSData *)data delegate:(id <ParseOperationDelegate>)theDelegate {

    self = [super init];

    if (self != nil) {
        self.dataToParse = data;
        self.delegate = theDelegate;
    }

    appDelegate = (XMLAppDelegate *)[[UIApplication sharedApplication] delegate];

    return self;
} 
```

它应该在单元格中加载数据，但在第一次滚动之前不显示数据。我能做些什么？

编辑：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"productCell";
    static NSString *PlaceholderCellIdentifier = @"placeholderCell";

    int nodeCount = [appDelegate.products count];

    if (nodeCount == 0 && indexPath.row == 0) {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:PlaceholderCellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:PlaceholderCellIdentifier];
            cell.detailTextLabel.textAlignment = UITextAlignmentCenter;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }

        cell.detailTextLabel.text = @"Loading...";

        return cell;
    }

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    if (nodeCount > 0) {
        XMLProductView *listedProduct = [appDelegate.products objectAtIndex:indexPath.row];

        cell.textLabel.text = listedProduct.name;
        // cell.detailTextLabel.text = appRecord.artist;

        if (!listedProduct.productImage) {
            if (self.tableView.dragging == NO && self.tableView.decelerating == NO) {
                [self startImageDownload:listedProduct forIndexPath:indexPath];
            }
            UIImageView *listedImage = (UIImageView *)[cell viewWithTag:1];
            listedImage.image = [UIImage imageNamed:@"Placeholder.png"];
        }
        else {
            UIImageView *listedImage = (UIImageView *)[cell viewWithTag:1];
            listedImage.image = listedProduct.productImage;
        }

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:37:06.783

您的代码似乎在等待某些事件或某些文件被获取或下载，因此您需要在`[tableview reloadData];`下载此数据时调用，

我无法从代码中弄清楚，但我的直觉告诉我

第一个：您正在等待来自 int 的数据`nodeCount = [appDelegate.products count];`准备好，因此您需要有某种委托，当该数据准备好时会调用该委托

第二：您正在等待在这里下载图像`[self startImageDownload:listedProduct forIndexPath:indexPath]`，因此当实际下载此图像时，您需要将图像设置到该单元格或`reloadData`桌子上

这就是我可以从代码中得出的结论。

# java - 如果传递给jsp页面，内部类的实例会发生什么

> ID：10959754
> 
> 赞同：4
> 
> 时间：2012-06-09T09:11:44.463
> 
> 标签：java, inner-classes

我有一个问题，这代表了我的兴趣。假设我有这样一个类定义：

```
public class A extends DumbAction{
  public class B {
    // Inner class definition
    public String getName() {return "Class B";}
  }

  @Override 
  public void execute(HttpServletRequest request) {
    ArrayList<B> list = new ArrayList<B>();
    list.add(new B());
    // Here I add some more elements
    request.setAttribute("list", list);      
  }
} 
```

似乎编译器并没有禁止这样的代码。因此，我将内部类的实例列表传递给 HttpServletRequest 实例。但是，当我尝试在 JSP 中访问他们的公共方法时，我收到了关于此类读取方法（例如，getName）不存在的抱怨。虽然物体本身似乎存在。

这是什么意思？内部类甚至不能隐式传递给外部世界？或者他们的生命立即结束，因为外部类实例不再存在？或者没有人可以访问内部类的公共方法，除了外部类。

更新：这是使用内部类实例列表的jsp页面片段：

```
<c:forEach var = "element" items = "${list}">
  <c:out value = "${element.name}"/><br/>
</c:forEach> 
```

似乎 forEach 工作正常，但根据 JSTL 无法访问内部类的公共方法 getName()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T09:24:10.143

如果`B`没有 的实例的上下文，就不能存在 的实例`A`。如果您有对 的实例的引用`B`，则该对象隐式地具有对封闭`A`实例的引用，即使您没有直接引用。

# javascript - Javascript 函数只能通过显式编码而不是在 for 循环中工作

> ID：10959755
> 
> 赞同：-1
> 
> 时间：2012-06-09T09:12:10.227
> 
> 标签：javascript

我有以下完美运行的 Javascript 代码：

```
$(document).ready(function() {   
  $("#Select1").setDefault();    
  $("#Select2").setDefault();     
  $("#Select3").setDefault();      
  $("#Select4").setDefault();   
  $("#Select5").setDefault();      
  $("#Select6").setDefault();   
}); 
```

现在，如果我使用以下紧凑代码，它将不起作用：

```
$(document).ready(function() {
  for(i=1; i<=6; i++){
    $("#Select"+i).setDefault();    
  }
}); 
```

如果我写， for 工作正常**：**

```
for(i=1; i<=6; i++){
    alert(i);    
} 
```

任何的想法？

PS：我使用 Chrome 和 Firefox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:13:06.043

循环代码缺少右括号...`)`

```
$(document).ready(function() {
  for(i=1; i<=6; i++){
    $("#Select"+i).setDefault();    
  }
}); 
```

使用像 Firebug 这样的开发人员工具会为您突出显示这些语法错误。如果您使用的是 Chrome，请按 F12，您将可以访问 JavaScript 控制台等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:22:07.723

您可以修复使用循环的现有代码，但是作为替代且可能更清洁的解决方案，请尝试使用[以 selector 开头的属性](http://api.jquery.com/attribute-starts-with-selector/)：

```
$(document).ready(function() {   
    $('[id^="Select"]').setDefault();    
}); 
```

假设您`<select>`在 HTML 中使用 s （根据您的 ID 猜测），您可以使选择器更具体一点：

```
$('select[id^="Select"]').setDefault(); 
```

# jquery - 使用 JQuery 删除导致“未定义”错误

> ID：10959756
> 
> 赞同：3
> 
> 时间：2012-06-09T09:12:26.170
> 
> 标签：jquery, append

我在我正在开发的网站上添加了一个名为 scrollpaper 的插件。该插件用于静态页面和我附加到网站的 html 片段。

问题是，当调用函数的附加片段被删除时，使用：

```
$(this).remove(); 
```

我收到以下与滚动纸插件有关的错误：

```
TypeError: 'undefined' is not an object (evaluating 'data.clearer') 
```

错误发生在片段被删除的那一刻。它不会导致任何实际的性能问题，当我重新附加代码片段时，插件仍然可以成功调用和执行，但是错误确实会堆积起来，我非常想修复它们。

主插件文件包含在每个页面的底部，并在其下方添加了对静态页面的调用：

```
<script src="js/jquery.scrollbarpaper.js"></script>
<script type="text/javascript">
$(function() {
    $('.scrollpaper-trigger').scrollbarPaper();
});
</script> 
```

第二个调用被添加到附加的 html 中：

```
<script>
$(function() {
    $('.scrollpaper-trigger-lightbox').scrollbarPaper();
});
</script> 
```

如何重现问题：

1.  打开网络检查器/触发错误
2.  启动完整、派对、套餐或在线预订表格
3.  通过单击覆盖/关闭按钮关闭打开的元素，或在菜单页面底部的菜单之间切换。
4.  这将触发错误

为了自己解决问题，到目前为止，我只尝试将基本插件文件添加到附加元素（并忽略静态页面），我也尝试过使用`.html('')`and `.empty('')`。代替`.remove()`，但这没有帮助。

我只使用 JQuery 几个月，所以虽然我已经熟悉它的工作原理，但我很想学习最佳实践。但是，目前这个问题超出了我的范围，因此我们将不胜感激任何和所有的帮助。

菜单翻转脚本：

```
$('.other-menus a').click(function() {
var url = $(this).attr('data-url'); 

$('.switch').fadeOut(500,
function() {
$(this).detach();
$('<div></div>').load(url).fadeIn(800).appendTo('.switch-wrap');

})

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:36:29.607

您正在使用 DOM 从 DOM 中删除元素`.remove`，但这将清除所有`.data`项目，包括存储在`"scrollPaper"`键中的对象。scrollpaper 插件正在访问从 检索到的对象的属性`.data("scrollPaper")`，因此当它开始返回`undefined`时会引发异常。

你想`.detach`改为`scripts.js`：

```
$(this).detach(); //Removes Element From DOM 
```

# android - 在主机名中使用下划线

> ID：10959757
> 
> 赞同：7
> 
> 时间：2012-06-09T09:12:44.533
> 
> 标签：android, dns

Wikipedia 指出，[Android 和 Microsoft Windows 系统都在主机名中使用](http://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names)下划线。我的问题是，这些主机名是什么？你有这些奇怪的主机名的例子吗？它们的用途是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-26T11:28:18.540

`What are host names?`

类似于学校教室，每个学生都有一个卷号/ID，以便识别他/她，在*互联网*（或任何计算机网络）的教室中，网络中的每个设备都需要唯一标识. 这是通过*主机名*完成的。因此，主机名是有助于识别网络中设备的名称。

`Hostnames with underscore(_) character.`

在制定有效和无效标准期间`hostnames`，常用的终端接口是电传打字机（TTY）ASR-33的键盘。现在这个键盘从来没有下划线（_）键（检查这张图片[http://www.pdp8.net/asr33/pics/kbd_top.shtml?large](http://www.pdp8.net/asr33/pics/kbd_top.shtml?large)），因此不可能有`hostname`一个下划线（ _） 在里面。查看此链接了解更多详情：[http ://www.quora.com/Domain-Name-System-DNS/Why-are-underscores-not-allowed-in-DNS-host-names](http://www.quora.com/Domain-Name-System-DNS/Why-are-underscores-not-allowed-in-DNS-host-names)

域名中可以使用下划线（_）字符。正如这篇文章所述[，（域名）子域中可以有下划线“_”吗？](https://stackoverflow.com/questions/2180465/can-someone-have-a-subdomain-with-an-underscore-in-it) 有下划线是完全有效的。一些例子（如帖子所示）是`_jabber._tcp.gmail.com`或`_sip._udp.apnic.net`。另一个使用下划线的例子见[http://ideaharbor.org/notes/technical/enabling-chat-outside-google-apps](http://ideaharbor.org/notes/technical/enabling-chat-outside-google-apps)。尽管使用它是有效的，但它不是推荐的做法。

您帖子中的 wikipedia 链接指出，Microsoft Windows 和 Android 智能手机并未强制执行禁止在主机名中使用下划线的规则。不执行此规则可能会导致问题，因为许多系统拒绝此类主机名。

希望你能从这个解释中得到一些东西。

**编辑**

在对这个问题进行进一步调查时，我发现了这篇精彩的帖子，我想它阐明了主机名中下划线的用法：

[http://networkadminkb.com/KB/a156/windows-2003-dns-and-the-underscore.aspx](http://networkadminkb.com/KB/a156/windows-2003-dns-and-the-underscore.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T12:05:52.397

您对维基百科页面的阅读不正确。它并不是说这些系统*使用*下划线，而是说它们*支持*下划线。

如果这样一个系统的*管理员*在配置它时使用下划线，那么当它无法与世界其他地方进行互操作时，这是他自己的错。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-01T18:02:47.537

主机名（包括域组件）只允许包含字母字符、数字字符、连字符和句点。这最初是在[RFC 952中指定的，并在](http://www.ietf.org/rfc/rfc952.txt)[RFC 1123](http://www.ietf.org/rfc/rfc1123.txt)中进行了更新。[问题中链接的维基百科文章](http://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names)说，Android 和 Windows**允许**使用违反此语法的主机名。

这些名称绝对是无效的主机名，但它们是明确有效的 DNS 记录，即使它们是通常包含主机名的地址记录。我不知道使用下划线的野外主机名示例。为什么允许这样做？[如RFC 2181](http://www.ietf.org/rfc/rfc2181.txt)的“名称语法”部分所述，DNS 旨在成为通用命名服务，因此它不会尝试强制执行可能适用于单个记录类型的所有不同名称语法。

因此，即使主机名中不允许使用下划线，程序是否应该允许使用下划线的问题也更加微妙。在 DNS 的上下文中，必须允许使用下划线。如果您正在设置特定机器的主机名，则绝对应该禁止它们，因为它们是无效的。如果您使用主机名，比如访问一个 URL，我想您可能会争辩说，如果它解决了，您应该允许它，以努力[“在您接受的内容上保持自由”](http://en.wikipedia.org/wiki/Robustness_principle)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T07:21:24.360

WayBack 机器上有[这个列表](http://web.archive.org/web/20101201170412/http://www.dyndns.com/services/dns/dyndns/premium.html)，但它可能不再准确。

并用于[配置域名系统 (DNS) 服务器](http://uw714doc.sco.com/en/NET_tcpip/dnsN.main.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-09T12:47:56.307

主机名是（通常是 DNS）名称解析中使用的{完全限定}名称。下划线虽然显然是允许的，但不符合关于允许字符的适当 rfc，如果在本地环境之外使用，可能会引发不兼容问题。

也许 Windows 将其视为 90 年代的 Netbios/Netbeui 遗留物。

# android - 用于相机预览的不可见 SurfaceView

> ID：10959767
> 
> 赞同：7
> 
> 时间：2012-06-09T09:14:31.787
> 
> 标签：android, camera, surfaceview, preview

我只需要获取相机预览数据，而不是可见预览。由于我在服务中完成所有这些工作，因此我必须创建一个虚拟的 SurfaceView，它工作得非常好。

我使用了这个答案中的代码： [https ://stackoverflow.com/a/10268650/1395697](https://stackoverflow.com/a/10268650/1395697)

但是，`TYPE_SYSTEM_OVERLAY`它没有用。它是不可见的，但没有收到预览数据（在 中`onPreviewFrame()`）。当我将此参数更改为 0 时，我会获得预览数据，但它`SurfaceView`是可见的。

你知道其他方法吗？

我现在所做的只是使`SurfaceView`宽度和高度为 1 的可见，然后创建`ImageView`具有特定颜色的叠加层，这样您就看不到`SurfaceView`. 但这一点都不整洁，我真的想做得更好一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T09:31:31.230

我也使用了相同的 stackOverflow 答案，并得到了相同的问题。所以：

我已经添加了这段代码

```
this.setZOrderOnTop(true);
SurfaceHolder h = this.getHolder();
h.setFormat(PixelFormat.TRANSPARENT); 
```

到我的surfaceChanged方法，而不是活动（或我的情况下的服务），并让它变得透明，但日志抱怨废弃的帧:(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T09:18:28.213

您实际上根本不必将 SurfaceView 放在您的 UI 上。我们遇到了同样的问题并制作了一个虚拟的 SurfaceView。这是我们的代码：

```
SurfaceView dummy = new SurfaceView(c);
try {
    mCamera.setPreviewDisplay(dummy.getHolder());
} catch (IOException e) {

}
mCamera.setPreviewCallback(this);
mCamera.startPreview(); 
```

# php - 在 PHP 中使用 jQuery 发布表单值时出错

> ID：10959768
> 
> 赞同：0
> 
> 时间：2012-06-09T09:14:33.733
> 
> 标签：php, jquery

我制作了一个使用 jquerydatepicker 的简单页面，两个下拉组合框用于选择时间值。我试图发布这些值，但页面被重定向到自身，并使用 url 中显示的选定值，并且我在接收方页面上没有得到任何值。

这是脚本：

```
<script type="text/javascript">

 $(document).ready(function(){
    var jQueryDatePicker1Opts = {
      dateFormat: 'mm/dd/yy',
      changeMonth: false,
      changeYear: false,
      showButtonPanel: true,
      showAnim: 'fadeIn'
   };

   $("#jQueryDatePicker1").datepicker(jQueryDatePicker1Opts);
   $("#jQueryDatePicker1").datepicker("setDate", "new Date()");
   $('#submit').click(function() {
  var startTime = parseInt($('#Combobox1 option:selected').text());
  var endTime = parseInt($('#Combobox2 option:selected').text());

  if(startTime>=endTime){
         alert("End Time should not be less than Start Time !");
     return false;
      }         
   });
   $("#Campaign_form").submit(function(){  
 $.post({type:'POST', url:'campaigndata.php' ,
            data:$('#Campaign_form').serialize(), success: function(response) {
                $('#Campaign_form').find('.form_result').html(response);
    }});
    var isValid = $.validate.form(this);
         return isValid;
    });
  });
</script> 
```

这是表单脚本：

```
 <form name="Campaign_form" id="Campaign_form" >
      <input type="text" id="jQueryDatePicker1" name="jQueryDatePicker1" value="06/09/2012">
      <select name="StartTime" size="1" id="Combobox1" >
         <option value="1">01:00</option>
         ...
         <option value="24">23:00</option>
      </select>
      <select name="EndTime" size="1" id="Combobox2" >
         <option value="1">01:00</option>
          ...
         <option value="24">00:00</option>
      </select>
      <select name="SelectApp" size="1" id="Combobox3" >
      <?php 
          while($row = mysql_fetch_array($result)){
             echo "<option value =".$row['AppName'].">".$row['AppName']."</option>";
          }
      ?>
      </select>
      <input type="submit" id="submit" name="submit" value="submit" >
   </form> 
```

这是campaigndata.php 脚本：

```
 <?php
    $campaignDate =  $_POST['jQueryDatePicker1'];
    $camp_Start_Time =  mysql_real_escape_string($_POST['StartTime']);
    $camp_End_Time =  mysql_real_escape_string($_POST['EndTime']);
    $campaignID = $appid.$campaignDate.$camp_Start_Time ;   
 ?> 
```

此campaigndata.php 在回显php 变量时显示空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:17:29.870

您需要先连接到数据库，然后才能使用`mysql_real_escape_string()`并更改要发布的表单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:01:08.940

如果您不通过提交表单刷新页面，则必须返回 false

```
$("#Campaign_form").submit(function () {
    var isValid = $.validate.form(this);
    if (isValid)
        $.post({type:'POST', url:'campaigndata.php',
            data:$('#Campaign_form').serialize(), success:function (response) {
                $('#Campaign_form').find('.form_result').html(response);
            }});

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T09:39:05.283

你的回答对我帮助很大！！！我发现问题出在 capaigndata.php

我在 $_POST[''] 之前使用 mysql_real_escape_string() ；

这造成了问题。我删除了这些并使用了正常的 $_POST[] 并且它神奇地工作！:)

# security - OpenSSL 和 GOST 引擎问题（静态链接）

> ID：10959771
> 
> 赞同：2
> 
> 时间：2012-06-09T09:15:10.660
> 
> 标签：security, openssl, static-libraries, x509certificate, gost3410

我对静态链接的 openSSL 库和 GOST 加密引擎有疑问。

我有使用 GOST 密钥和证书的简单客户端/服务器应用程序。它适用于 GOST 密钥，但前提是我使用 openSSL 库的动态链接版本。如果我尝试使用静态链接的 openSSL，我会收到一条错误消息。

这是 openSSL 库初始化调用：

> OPENSSL_config("正确的配置文件路径");
> 
> SSL_library_init();
> 
> SSL_load_error_strings();

当我尝试读取证书文件时出现错误。

> SSL_CTX_use_certificate_chain_file(ctx, CERTFILE)

这里的返回值不是 1。所以这是一个错误。

人类可读的错误消息是：

> 3084809868:error:0609E09C:digital envelope routines:PKEY_SET_TYPE:unsupported algorithm:p_lib.c:239:3084809868:error:0B07706F:x509 certificate routines:X509_PUBKEY_get:unsupported algorithm:x_pubkey.c:155:3084809868:error:140BF1CSSLroutines :SSL_SET_CERT:x509 lib:ssl_rsa.c:402:

当我将相同的代码与动态链接的 openSSL 库与外部 GOST 引擎库一起使用时，一切正常。那么静态版和动态版有什么区别呢？我此时唯一的想法是我的库初始化顺序是错误的。

我检查了编译后的 libcrypto.a 库中的符号。

> 纳米./libcrypto.a | grep

这个命令给了我很多 GOST 函数的输出，这些函数包含在 libcrypto.a 库中。因此，我认为该库已正确编译，并且所有 GOST 引擎功能都包含在静态库中。

“不支持的算法”错误消息意味着 GOST 函数未正确初始化。问题是：如何正确地使用静态链接的 openSSL 初始化引擎？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:46:11.203

使用 GOST 引擎和静态链接 openssl 的正确解决方案是：

确保 openssl.cnf 存在于默认目录中。（如果我们像这样配置我们的库“./config –prefix = /gost-ssl-static”，默认配置库将是 /gost-ssl-static/ssl）（参见[http://www.cryptocom.ru/opensource /openssl100.html](http://www.cryptocom.ru/opensource/openssl100.html)了解详细信息）确保 openssl.cnf 在第一部分之前包含以下行，并带有方括号：

```
[openssl_def]
engines=engine_section

[engine_section]
gost=gost_section

[gost_section]
engine_id=gost
default_algorithms=ALL
CRYPT_PARAMS=id-Gost28147-89-CryptoPro-A-ParamSet 
```

初始化 openSSL 库和 gost 引擎：

```
OPENSSL_config(NULL); 
SSL_library_init();
SSL_load_error_strings(); 
```

我的错误是不正确的 OpenSSL 初始化。我的初始化代码要复杂得多。许多不必要的函数调用相互干扰，并初始化了 gost 引擎。另外我认为 OPENSSL_config(NULL) 函数中的唯一参数表示 openssl.cnf 文件的路径。这是错误的建议。

# android - Android AccountManager, Oauth, getAccessToken() 除了询问密码什么都不做

> ID：10959773
> 
> 赞同：3
> 
> 时间：2012-06-09T09:15:27.447
> 
> 标签：android, oauth, google-api

在这花了大约两天之后，我有点慌张。虽然到目前为止，我选择了 OAuth2 而不是 OpenID，但我非常精通 Authenticate 和 Authorize 之间的区别。

我希望我的 android 应用程序提供多种方式来验证用户身份，其中之一是 google 帐户，后来还有 facebook 和 twitter 帐户。我正在尝试使用 AccountManager 类来获取 OAuth 访问令牌（目前）只需验证用户的电子邮件地址。目标是，如果用户已经在 android 设备上保存了一个 google 帐户，他们可以授权我的应用程序一次，甚至可以不输入密码，并且永远不必从他们的 android 再次登录。

我决定使用 Google 自己的 AccountManager，因为它承诺在 Android 框架中本地处理大部分内容，甚至无需打开浏览器窗口。我正在使用谷歌 API 版本 7 (Android 2.1) 的库/构建目标，这是支持 AccountManager 的第一级。

我尝试了这两种不同的方法，一种是使用 AccountManager.getAuthTokenByFeatures() 来指定 Account 对象，另一种是使用 getAuthToken() 来指定这样的对象。

在每种情况下，调用都会完成（正如我所期望的那样），应用程序会显示一个授权对话框，询问我是否要授权该应用程序。到现在为止还挺好。如果我拒绝，程序会抛出我期望的异常。如果我接受，则会出现一个“Google 登录”对话框，要求我输入帐户密码。请注意，当我将帐户添加到设备时，我已经输入了密码。如果我在对话框中输入密码，则会出现“授权”等待屏幕，然后再次出现相同的对话框。奇怪的是，如果我输入正确的密码，“授权”等待屏幕似乎需要更长的时间。因此，我似乎无法进入成功获取令牌的代码路径。

尽管很容易发泄谷歌不清楚 AUTH_TOKEN_TYPE 是什么或 userinfo.email URL 未记录的事实，但我真的很想了解我在这里做错了什么并超越这一点。

这是我的代码，我会对此进行监控，当然很乐意回答任何问题。现在，我将着手捕获网络流量，看看这是否能进一步了解问题所在。

这是显示身份验证屏幕（好的）和密码对话框（不太好）的图像 [http://imageshack.us/g/707/device20120609020618.png/](http://imageshack.us/g/707/device20120609020618.png/)

```
 public void loginToGoogle() {
    System.out.println("Starting");
    AccountManagerFuture<Bundle> bundleFuture = 
        AccountManager.get(_activity).getAuthTokenByFeatures(
                "com.google", 
                "https://www.googleapis.com/auth/userinfo.email", 
                null, 
                _activity, 
                null, 
                null, 
                new AccountManagerCallback<Bundle>() {

                      public void run(AccountManagerFuture<Bundle> future) {
                        Bundle bundle;
                        try {
                          bundle = future.getResult();
                          for (String s : bundle.keySet()) {
                              System.out.println("Found key: "+ s);
                          }

                          System.out.println(bundle.getString(AccountManager.KEY_ACCOUNT_NAME));
                          System.out.println(bundle.getString(AccountManager.KEY_AUTHTOKEN));
                          //Use Token

                        } catch (OperationCanceledException e) {
                          Log.e("e", e.getMessage(), e);
                          System.out.println("User appears to have denied auth request");
                        } catch (AuthenticatorException e) {
                          Log.e("e", e.getMessage(), e);
                        } catch (IOException e) {
                          Log.e("e", e.getMessage(), e);
                        }
                      }
                    }, 
                    null);
    System.out.println("Done with AccountManager call");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T09:48:23.503

您的问题很可能在于您传递给 getAuthTokenByFeatures 的身份验证令牌类型。由于您使用的是 oauth2，因此您需要将其添加到您的身份验证类型的开头：

```
String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/userinfo.email" 
```

但是，我不确定您尝试使用的 Auth Token Type 是否有效。我自己只处理过日历和任务。希望这行得通，如果没有，请告诉我，我会为您找到正确的身份验证类型

# html - 单元格中的 HTML 垂直文本 + 导出到 excel

> ID：10959776
> 
> 赞同：2
> 
> 时间：2012-06-09T09:15:55.497
> 
> 标签：html, excel, text

我曾尝试这样做一次，但没有成功，现在再次遇到同样的问题。

我必须生成带有垂直文本的 HTML 表格，如下所示：

![在此处输入图像描述](../Images/aea737324d503fa893956d82c40d9915.png)

并且这个 HTML 在 excel 中应该是有效的（相同的）。

有人做过吗？

还有更多 - 我也无法使用图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T05:15:21.927

这个css是可能的：

```
-webkit-transform: rotate(-90deg);
-moz-transform: rotate(-90deg);
-ms-transform: rotate(-90deg);
-o-transform: rotate(-90deg);
transform: rotate(-90deg);
mso-rotate: 90;
-webkit-transform-origin: 50% 50%;
-moz-transform-origin: 50% 50%;
-ms-transform-origin: 50% 50%;
-o-transform-origin: 50% 50%;
transform-origin: 50% 50%;
position: absolute;
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:54:24.027

这不能仅使用 HTML 来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-02T21:35:48.397

如果您想旋转文本，以下属性将完成这项工作：

```
<td style="mso-rotate:90;">I Rotate</td> 
```

[http://fabianmejia.blogspot.pe/2008/11/rotate-text-in-web-generated-excel-file.html](http://fabianmejia.blogspot.pe/2008/11/rotate-text-in-web-generated-excel-file.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T10:08:08.523

```
<table>
         <td style="mso-rotate:90;">No</td>
         <td style="mso-rotate:90;">Name</td>
</table> 
```

# html - .htaccess 用许多 GET 重写 url，到 dir 样式，如：/page/subpage/subpage1/subpage2/ 等等

> ID：10959787
> 
> 赞同：1
> 
> 时间：2012-06-09T09:17:18.867
> 
> 标签：html, apache, .htaccess, url-rewriting, get

现在我在 .htaccess 文件中使用这些

```
RewriteRule (.*)/(.*)/(.*)/(.*)\.html$ index.php?lng=$1&page=$2&subpage=$3&subpage1=$4 [L]
RewriteRule (.*)/(.*)/(.*)\.html$ index.php?lng=$1&page=$2&subpage=$3 [L]
RewriteRule (.*)/(.*)\.html$ index.php?lng=$1&page=$2 [L]
RewriteRule (.*)\.html$ index.php?page=$1 [L]
RewriteRule index\.html$ index.php [L] 
```

并且工作正常。

如果我想添加另一个子页面，那么我必须输入一个包含所有获取的新 RewriteRule。例如，如果我想在前面的代码中添加另一个子页面，我应该输入：

```
 RewriteRule (.*)/(.*)/(.*)/(.*)/(.*)\.html$ index.php?lng=$1&page=$2&subpage=$3&subpage1=$4&subpage1=$5 [L] 
```

**但是我怎样才能使它更简单和通用来处理所有获取？**

注意：我不关心 GET 名称（页面、子页面 1 ....）

*编辑：我希望能够获取查询字符串，但我不关心名称（键）：page、subpage、subpage1 等*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T23:46:40.003

你只能使用一个（looooong）规则，但它会很丑，准备好......

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([^/]+)(/([^/]+))?(/([^/]+))?(/([^/]+))?(/([^/]+))?\.html$  index.php?p1=$1&p2=$3&p3=$5&p4=$7&p5=$9 [L] 
```

这里的诀窍是使用模式`(/([^/]+))?`并获得受损参数 (1,3,5...)

例如，使用 url `www.domain.com/a/b/c.html`，您将获得：

*   $1 = 一个
*   $2 = /b
*   $3 = b
*   $4 = /c
*   $5 = c
*   $6~$9 = null

# c# - 如何在选择查询中比较从 datetimepicker 获取的 2 个日期？

> ID：10959798
> 
> 赞同：0
> 
> 时间：2012-06-09T09:19:39.103
> 
> 标签：c#

我有 2 个日期时间选择器。在我的选择查询中，我想获取这些日期之间的记录。varchar(MAX) 中数据库中日期的数据类型。对于 datetimepicker，我将自定义格式设置为 dd-MM-yyyy。这是我的 sql 查询

```
SqlDataAdapter da = new SqlDataAdapter("Select custname From tb_customer WHERE date >= '"+dtp_fromdate.Text+"' AND date <= '"+dtp_todate.Text+"'", con); 
```

例如：如果我的开始日期是 9-06-2012 并且到目前为止是 11-06-2012。通过上面的查询，它显示了 10-06-2012 和 11-06-2012 的记录

如果我的开始日期是 10-06-2012 并且到目前为止是 11-06-2012。通过上面的查询，它显示了 10-06-2012 而不是 11-06-2012 的记录

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:22:22.253

使用[Convert](http://msdn.microsoft.com/en-us/library/ms187928.aspx)或`Cast`T-SQL 将`VARCHAR`值转换为`Date`or`DateTime`并学习/使用参数而不是硬编码的 SQL 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:31:07.200

问题在于没有使用参数。使用参数将避免您与您的数据库后端之间的任何误解

```
DataSet ds = new DataSet();
using (SqlConnection con = new SqlConnection(connectionString))
{
    SqlDataAdapter da = new SqlDataAdapter();
    string query = "Select custname From tb_customer WHERE date >= @from AND date <= @to"
    da.SelectCommand = new SqlCommand(queryString, con);
    da.SelectCommand.AddWithValue("@from" , dtp_fromdate.Value);
    da.SelectCommand.AddWithValue("@to" , dtp_to.Value);
    da.Fill(ds);
    return ds;
} 
```

# php - 如何使用 php exec 或 shee_exec 运行我编写的脚本

> ID：10959799
> 
> 赞同：1
> 
> 时间：2012-06-09T09:19:41.193
> 
> 标签：php, shell, exec

我有一个名为“resize”的调整大小的脚本这是脚本：

```
<?
echo exec('resize');
?> 
```

此页面位于我的 /var/www/site/resize.php 中，resize 命令位于 /bin/resize 中，它由 root 拥有，权限为 mod 777 但是，该命令没有被执行。请让我知道我需要什么。

我也尝试过使用调整大小脚本的绝对路径

```
 echo exec('/bin/resize'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:08:56.953

尝试反引号运算符 ` 或 shell_exec()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:26:05.497

如果你在 linux 上：

```
exec('php -q /bin/resize.php'); 
```

# javascript - 按内联 css 属性对选择框选项进行排序（Jquery）

> ID：10959804
> 
> 赞同：1
> 
> 时间：2012-06-09T09:20:35.653
> 
> 标签：javascript, jquery, jquery-selectors

我有以下选择框，想按`display:none`inlne 属性对其进行排序，所有没有`display:none`属性的选项都将显示在顶部，其余选项将显示在它们之后。如何在 jquery 中做到这一点？

**代码**

```
<select id="changeme"> 

<option style="display:none;">1</option>
<option>2</option>
<option>3</option>
<option style="display:none;">4</option>
<option>5</option>
<option style="display:none;">6</option> 
<option>7</option> 
<option style="display:none;">8</option>

</select> 
```

我知道具有属性的选项`display:none`不会显示，但我希望我渲染的 html 看起来像这样

```
<select id="changeme"> 

<option>2</option>
<option>3</option>
<option>5</option>  
<option>7</option> 
 <option style="display:none;">4</option>
 <option style="display:none;">6</option>
 <option style="display:none;">1</option>
 <option style="display:none;">8</option>

 </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:37:21.557

首先不是使用`display:none`我使用的样式`class=showLast`，这可能很容易

```
<select id="changeme">
    <option class="showLast">1</option>
    <option>2</option>
    <option>3</option>
    <option class="showLast">4</option>
    <option>5</option>
    <option class="showLast">6</option>
    <option>7</option>
    <option class="showLast">8</option>
</select> 
```

​​​​​​​​您也可以`this.className === showLast`根据是否希望首先显示或最后显示带有类的选项来更改条件。

```
var withClass = $('#changeme > option').map(function() {
    if (this.className === 'showLast') {
        return this;
    };
}).toArray();
$('#changeme').append(withClass); 
```

**[​演示](http://jsfiddle.net/dhirajbodicherla/5eHWH/2/)**

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:52:30.497

可能不是好的解决方案，但它有效

```
var options = [];
var select = $('#changeme');
select.find('option').each(function(){
    var $this = $(this);
    if($this.css('display') === 'none'){
        options.push($this.wrap('<p />').parent().html());
    }
    else{
        options.unshift($this.wrap('<p />').parent().html());
    } 
})  
select.html(options.join('')); 
```

**编辑：**

这是一个更简单的代码（但可能会导致隐藏选项作为`select`值）

```
$('#changeme').find('option').filter(function(){
        var $this = $(this);
        if($this.css('display') == 'none')
        $this.appendTo($this.parent());
}) 
```

# ios - UITableView setContentOffset：动画不正确

> ID：10959806
> 
> 赞同：2
> 
> 时间：2012-06-09T09:21:12.270
> 
> 标签：ios, uitableview, uiscrollview

我的代码是这样的：

```
[tableview setContentOffset:CGPointMake(0,180) animated]; 
```

但有时，它是不正确的，tableview 的 y 偏移量仅为 20 或其他值。

我调试代码并在 中找到`UIViewAnimationState animationDidStop:finished:`，他们只是将其设置为错误的 y 偏移值（如 20 或其他值），而不是我给 tableview 的 y 偏移值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:59:37.897

我认为您的 contentoffset 在 vi​​ewWillAppear 中进行了转换，请尝试将您的动画放入 viewdidload 或使用以下动画块：

```
[UIView animateWithDuratio:0.3 completion.....{
}]; 
```

希望这可以帮助！！

# javascript - 用于替换文本的 Javascript 和正则表达式

> ID：10959808
> 
> 赞同：1
> 
> 时间：2012-06-09T09:21:36.293
> 
> 标签：javascript, html, regex

先生，我正在用 javascript 做一个项目。我想用正则表达式替换一个文本。在一个段落中我想用 javascript 替换一些单词

例如：

```
 var str =" Would you like to have responses to your questions |code Would you like to have responses to your questions code| Would you like to have responses to your questions  "

 var n=str.replace("to","2"); 
```

这里所有的“ **to** ”都将被替换。我们不想删除**|code** to **code|之间** 请任何人帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:56:29.240

我认为你不应该依赖正则表达式来完成这类任务，因为它会过于复杂，因此速度很慢。无论如何，如果您的表达式是正确的（即，对于每个`"|code"`有 a`"code|"`并且没有嵌套`code`标签），您可以试试这个：

```
var n = str.replace(/to(?!(?:\|(?!code)|[^\|])*code\|)/g, "2"); 
```

不仅复杂，而且难以维护。在这些情况下，最好的办法是将字符串拆分为块：

```
var chunks = [], i, p = 0, q = 0;
while ((p = str.indexOf("|code", p)) !== -1) {
    if (q < p) chunks.push(str.substring(q, p));
    q = str.indexOf("code|", p);
    chunks.push(str.substring(p, p = q = q + 5));
}
if (q < str.length) chunks.push(str.substring(q));

// chunks === [" Would you like to have responses to your questions ",
//             "|code Would you like to have responses to your questions code|",
//             " Would you like to have responses to your questions  "] 
```

注意：`str.replace("to", "2")`不会替换所有出现的，*而*`"to"`只会替换第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:01:47.880

如果您想将所有 'to' 替换为 2，这将是代码

```
var str =" Would you like to have responses to your questions |code Would you like to have responses to your questions code| Would you like to have responses to your questions";
var n=str.replace(/to/g,"2"); 
```

# ruby - datamapper 的未定义方法“password_hash”错误

> ID：10959816
> 
> 赞同：1
> 
> 时间：2012-06-09T09:21:58.663
> 
> 标签：ruby, sinatra, datamapper, erb

我正在尝试使用 sinatra 构建 [Ryan Bates 的“authenticaion”][1]，但身份验证不起作用。我收到“未定义的方法密码哈希”错误。

其他一切都在工作。我检查了 datamapper 文档，特别是对于延迟加载，但找不到任何有用的东西。代码如下。我在做什么错？

# main.rb（仅相关部分）

```
post "/login" do
  user = User.authenticate params[:email], params[:password]
  if user
    session[:user_id] = user.id
    redirect "/"
  else
    session[:errors] = "No such user or bad password."
    redirect "/login"
  end
end 
```

# 用户.rb

```
require 'data_mapper'
require 'dm-validations'
require 'bcrypt'

module Kimsin

  DataMapper.setup :default, 'sqlite3:///home/barerd/RProjects/kimsin/users.db' 

  class User 
    attr_accessor :password, :confirm_password

    include DataMapper::Resource

    property :id, Serial
    property :email, String, :required => true, :unique => true, :format => :email_address,
    :messages => { :presence => "We need your email address.", :is_unique => "We already have that email.", :format => "Doesn't look like an email adress.."}
    property :password_salt, String
    property :password_hash, String, :length => 80
    validates_presence_of :password, :confirm_password, :messages => { :presence => "You have to type a password and confirm it." }
    validates_format_of :password, :confirm_password, :with => /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])([\x20-\x7E]){8,40}$/, :messages => { :format => "The password should be 8 to 40 characters long and contain at least one digit, one lowercase and one uppercase letter and one special character." }

    before :save, :encrypt_password

    def self.authenticate email, password
      user = User.all :email.like => email
      if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
        user
      else
        nil
      end
    end

    def encrypt_password
      if password != nil
        self.password_salt = BCrypt::Engine.generate_salt
        self.password_hash = BCrypt::Engine.hash_secret password, password_salt
      end
    end
  end

  DataMapper.finalize
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:47:10.170

添加一个`attr_reader :password_hash`解决它。

# php - HTML 未显示在浏览器上

> ID：10959819
> 
> 赞同：-1
> 
> 时间：2012-06-09T09:22:18.230
> 
> 标签：php

我正在编写一个代码，其中要求用户输入用户名和密码。如果提供的详细信息与数据库中的详细信息匹配，则向他显示数据，否则将提示他提供的信息无效。这是代码中说明信息无效的部分，

```
<?php if($user!=$username && $pass!=$password)
  {          
?>
<p id="intro">Invalid Information</p>
<?php 
  }
?> 
```

但是我面临的问题是，即使用户名和密码不匹配，也不会显示信息无效的消息。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T09:23:51.563

您需要 OR，而不是 AND：

```
<?php if($user!=$username || $pass!=$password) : ?>
<p id="intro">Invalid Information</p>
<?php endIf; ?> 
```

PS我使用了替代语法。它看起来更好。

* * *

使用 OR 而不是 AND 的原因，如果您检查 AND，只有当用户名**和密码****都**错误时，条件才会评估为 true（如果其中一个是正确的，您将得到 FALSE）。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:02:44.540

Your logic seems to be wrong. as you are using not equals to compare with the both variables, so to what you are trying to get from the logic, you have to use || instead of &&.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T09:28:11.123

```
 <?php if($user!=$username && $pass!=$password)
   {          
echo '<p id="intro">Invalid Information</p>';
   }
 ?> 
```**

# android - 如何创建行数和列数未知的动态表格布局？

> ID：10959825
> 
> 赞同：1
> 
> 时间：2012-06-09T09:22:56.730
> 
> 标签：android, dynamic, tablelayout, inflate

我想创建动态表格布局。我有这些节点（因为每个节点都有单独的样式）：

*   标题行
*   标题单元格
*   奇数行
*   奇数行单元格
*   偶数行
*   甚至像这样的行单元格：

    在此处输入代码

    ```
    <TableRow
        android:id="@+id/header_row"
        style="@style/HeaderRow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/header_tv"
            style="@style/HeaderText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>

    <TableRow
        android:id="@+id/bodyrow_odd"
        style="@style/BodyRowOdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/body_tv_odd"
            style="@style/BodyTextOdd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>

    <TableRow
        android:id="@+id/bodyrow_even"
        style="@style/BodyRowEven"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/body_tv_even"
            style="@style/BodyTextEven"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow> 
    ```

如果我想通过膨胀每个节点来创建动态接口，我必须将每个节点放在单独的 xml 中？`在此处输入代码

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-06-26T07:26:00.877

MainActivity.class

```
import android.graphics.Color;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.Gravity;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
init();
}

public void init() {
TableLayout stk = (TableLayout) findViewById(R.id.table_main);
TableRow tbrow0 = new TableRow(this);
TextView tv0 = new TextView(this);
tv0.setText(" Sl.No ");
tv0.setTextColor(Color.WHITE);
tbrow0.addView(tv0);
TextView tv1 = new TextView(this);
tv1.setText(" Product ");
tv1.setTextColor(Color.WHITE);
tbrow0.addView(tv1);
TextView tv2 = new TextView(this);
tv2.setText(" Unit Price ");
tv2.setTextColor(Color.WHITE);
tbrow0.addView(tv2);
TextView tv3 = new TextView(this);
tv3.setText(" Stock Remaining ");
tv3.setTextColor(Color.WHITE);
tbrow0.addView(tv3);
// Apply here your HeaderRow style.
tbrow0.setBackgroundColor(Color.BLUE);
stk.addView(tbrow0);
for (int i = 0; i < 25; i++) {
TableRow tbrow = new TableRow(this);
TextView t1v = new TextView(this);
t1v.setText("" + i);
t1v.setTextColor(Color.WHITE);
t1v.setGravity(Gravity.CENTER);
tbrow.addView(t1v);
TextView t2v = new TextView(this);
t2v.setText("Product " + i);
t2v.setTextColor(Color.WHITE);
t2v.setGravity(Gravity.CENTER);
tbrow.addView(t2v);
TextView t3v = new TextView(this);
t3v.setText("Rs." + i);
t3v.setTextColor(Color.WHITE);
t3v.setGravity(Gravity.CENTER);
tbrow.addView(t3v);
TextView t4v = new TextView(this);
t4v.setText("" + i * 15 / 32 * 10);
t4v.setTextColor(Color.WHITE);
t4v.setGravity(Gravity.CENTER);
tbrow.addView(t4v);
if (i % 2 == 0) {
// Apply here your BodyRowEven style.
tbrow.setBackgroundColor(Color.GRAY);
} else {
// Apply here your BodyRowOdd style.
tbrow.setBackgroundColor(Color.LTGRAY);
}
stk.addView(tbrow);
}
}
} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<ScrollView
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:background="#ffffff">

<HorizontalScrollView
android:id="@+id/hscrll1"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<RelativeLayout
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:orientation="vertical">

<TableLayout
android:id="@+id/table_main"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true" />
</RelativeLayout>
</HorizontalScrollView>
</ScrollView>
</LinearLayout> 
```

# php - 如何使用 jquery ajax 获取图像？

> ID：10959826
> 
> 赞同：5
> 
> 时间：2012-06-09T09:23:06.463
> 
> 标签：php, jquery, ajax, jcrop

我正在使用 jcrop 在我的 php 应用程序中裁剪图像。我使用下面的代码使用 ajax 传递坐标值和图像路径，

> ```
> function checkCoords(index)
>     {
>             if (parseInt(jQuery('#w').val())){
>                     jQuery.ajax({
>                         type    : "POST",
>                         cache: false,
>                         dataType: 'html',
>                         data    : {
>                                 x : jQuery('#x').val(),
>                                 y : jQuery('#y').val(),
>                                 w : jQuery('#w').val(),
>                                 h : jQuery('#h').val(),
>                        image_path : jQuery('#jc-hidden-image'+index).attr('src')
>                         },
>                         url     : BASE_URL+'apps/configure/cropimage',
>                         success : function(response) { 
>                                 jQuery(".preview_crop").html(response);
>                         }
>                     });                     
>             } 
>             else{
>                 alert('Please select a crop region then press Crop button.');
>             } 
> ```

在Controller中，我使用如下的ajax值，

```
 public function cropimageAction(){
        $params = $this->getRequest()->getParams();
        //d($params);
        if ($_SERVER['REQUEST_METHOD'] == 'POST')
        {
                $targ_w = $targ_h = 150;
                $jpeg_quality = 90;

                $src = $params['image_path'];
                $img_r = imagecreatefromjpeg($src);
                $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

                $image  = imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);

               header('Content-type: image/jpeg');
                imagejpeg($dst_r,null,$jpeg_quality);

                exit;
        }        
    } 
```

我得到了类似的回应

> ��(��(��(��(��

而不是裁剪的图像，得到了一些符号。需要在 ajax 响应中获得裁剪图像。我在这方面做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T09:46:41.660

您将完整的图像数据作为响应发送回，而不是将图像保存在服务器上并将 URL 作为响应发送给它

反而

```
header('Content-type: image/jpeg');
imagejpeg($dst_r,null,$jpeg_quality); 
```

拥有这个

```
imagejpeg($dst_r,"path/where/to/save/image.jpg",$jpeg_quality);
echo "path/where/to/save/image.jpg"; 
```

此外，您的成功功能应如下所示

```
success : function(url) { 
    jQuery(".preview_crop").html('<img src="' + url + '" />');
} 
```

# c++ - 我们传递给参数的无符号类型是什么？

> ID：10959830
> 
> 赞同：1
> 
> 时间：2012-06-09T09:23:39.063
> 
> 标签：c++, types, unsigned

我有以下代码的练习

```
int FindFirstSet(unsigned BitMap, unsigned start)
{
    unsigned Mask = (1 << start);
    while (Mask)
    {
        if (BitMap & Mask) return start;
        ++start;
        Mask <<= 1;
    }
    return -1;
} 
```

问题是 ：

“C++ 编程语言没有指定无符号整数中有多少位。解释为什么上面的代码不管无符号整数中有多少位都能工作。”

按照这个问题，我是否可以认为：任何类型的“位图参数”都是，“开始参数”也有位图的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T09:34:47.727

所有参数和变量都是无符号整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:17:34.000

此代码将起作用，因为`Mask`和`BitMap`具有相同的长度，并且最大可能值`start`大于 的长度`BitMap`。

但此代码并不总是按预期工作。以下是 c++ 标准对移位运算符的说明： `The behavior is undefined if the right operand is negative, or greater than or equal to the length in bits of the promoted left operand.`

因此，在某些编译器上，我们可能会看到`FindFirstSet(1, 42)`返回 42 而不是 -1。

# multithreading - 在unity3d中制作后台线程

> ID：10959832
> 
> 赞同：3
> 
> 时间：2012-06-09T09:23:56.413
> 
> 标签：multithreading, unity3d

我有两个后台线程的 wp7 应用程序： 1\. 时间计划 2\. 按计划时间播放不同的声音样本（同一时间可能有几个样本）。

如何用 unity3d 引擎重复这个逻辑？是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T22:13:53.270

Unity 不允许您从除主线程之外的任何线程访问其 API；您不能使用锁定原语来解决它。

不过，您可以使用标准 .NET 线程 API 来启动不直接与 Unity API 交互的线程。您可以在额外的线程上计算样本和缓冲区，但您的主线程必须调用 AudioClip.SetData 才能将计算的样本提交给 Unity。

请注意，自 Unity 2018.1 以来，引入了作业系统，它允许在后台线程上执行某些类型的计算任务（例如，设置变换位置）。随着时间的推移，可以执行的任务正在逐渐开放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T22:09:45.077

API 不是线程安全的这一事实并不意味着您不能将它与额外的线程安全一起使用。您只需要确保没有两个线程同时修改公共数据。您可以使用一个简单的锁定变量来确保没有人在更新样本列表时读取它。

但是，我建议使用[coroutines](http://docs.unity3d.com/Manual/Coroutines.html)而不是线程，因为它们使事情变得更容易。不需要线程安全，好处相似，执行顺序更清晰。

实现类似解决方案的更简单方法是更新 Update 中的示例列表，并在 LateUpdate 方法中读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:38:49.980

没办法=（Unity API**不是线程安全**的：[链接](http://answers.unity3d.com/questions/7524/is-the-unity-api-threadsafe.html)

# jquery - jquery 在页面加载时不起作用

> ID：10959833
> 
> 赞同：0
> 
> 时间：2012-06-09T09:24:09.987
> 
> 标签：jquery, html

我在我的网站中插入了一小段 jQuery 代码，以修复左右导航图标。问题是它仅在调整 Bowser 窗口大小时才有效，但它应该在文档加载后立即放置图标...在这里您可以看到它的实际效果（匈牙利语）：utravalo.com

此代码适用于我的其他网站，没有问题。我有点困惑... :)

这是jquery代码：

```
if (jQuery) {
  /* obtain jQuery instance */
  $sdv = jQuery.noConflict();

  /* ensure the links look & feel consistent */
  var formatLink = function (strEl) {
          var pEl = $sdv(strEl);
          if (pEl.length > 0) {
              pEl.children().children().css('color', '#3D536C');
              pEl.children().children().hover(

              function () {
                  $sdv(this).css('color', '#444444');
              }, function () {
                  $sdv(this).css('color', '#3D536C');
              });
          }
      }
  formatLink("#divPrev");
  formatLink("#divNext");

  var fnModifyNavigation = function () {
          /* obtain window's width */
          var w = $sdv(window).width();
          var hw = (w - 1020) / 2;
          if (hw > 100) {
              /* we have enough space for the fixed postion links */
              jQFPL($sdv("#divPrev"), 'left', 0, hw);
              jQFPL($sdv("#divNext"), 'right', 0, hw);
              $sdv("#divPostNav").hide();
          } else {
              /* not enough space for the fixed postion links */
              var divNav = $sdv("#divPostNav");
              if (divNav.length > 0) {
                  if (divNav.css('display') == 'none') {
                      divNav.show();
                      divNav.prepend(jQSPL("#divNext", "right"));
                      divNav.prepend(jQSPL("#divPrev", "left"));
                  }
              }
          }
      }

      /* jQuery Fixed Position Link */
  var jQFPL = function (el, remClass, absPosPX, width) {
          var pEl = el.detach();
          if (pEl) {
              pEl.removeClass(remClass);
              eval("var objStyle = { 'position':'fixed', 'top':'250px', 'width': '" + width + "px', '" + remClass + "':'" + absPosPX + "px', 'text-align':'" + remClass + "'};");
              pEl.css(objStyle);
              pEl.appendTo("body");
          }
      }

      /* jQuery Static Position Link*/
  var jQSPL = function (strEl, strFloat) {
          var el = $sdv(strEl).detach();
          el.css('position', 'static');
          el.css('width', '50%');
          el.css('float', strFloat);
          return el;
      }

      /* run position modification routine after the document is loaded */
      $sdv(fnModifyNavigation);

     /* handle the window's resize event and run position modification routine again */
     $sdv(window).resize(fnModifyNavigation);
} 
```

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:30:11.937

您想在 jQuery 就绪方法中运行 modify nav 和 formatLink 函数（这会等待 html 加载）：

```
$sdv(document).ready(
    function(){

        formatLink("#divPrev");
        formatLink("#divNext");

        /* run position modification routine
        after the document is loaded */
        $sdv(fnModifyNavigation);  

        /* handle the window's resize event
        and run position modification routine again */
        $sdv(window).resize(fnModifyNavigation);
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:56:06.507

修改最后一行，

从

```
$sdv(window).resize(fnModifyNavigation); 
```

到

```
$sdv(window).resize(fnModifyNavigation).resize(); 
```

# php - 从脚本标签、图像标签、链接获取坐标

> ID：10959835
> 
> 赞同：-1
> 
> 时间：2012-06-09T09:24:21.583
> 
> 标签：php, regex, geolocation, coordinates

我正在为交易建立一个搜索引擎，并将所有交易放在地图上，所以我需要来自网站的坐标和抓取。

因此，坐标可以在脚本、标签、图像、链接等上。

是否有任何工具或任何脚本、框架可以帮助我快速从某些网站获取坐标？怎么做？使用 PHP、XPath、正则表达式、节点、css 选择器？？？一些快速的“获取坐标”脚本。

有什么解决方案吗，手动操作太难了，因为我需要在超过 10,000 个网站上进行抓取，并且所有网站上的坐标都在脚本标签、图像或链接中......

任何自动化解决方案？

以下是一些案例：

```
 <a href="http://maps.google.com/maps?q=44.796637,20.480168" target="_blank">prikaži na karti</a>

<iframe frameborder="0" border="0" scrolling="no"  marginwidth="0" marginheight="0" title=""  src="http://www.kolektiva.rs/beograd/dailydeal/vendor/map/center/44.815123,20.469887/"></iframe>

<iframe frameborder="0" height="230" marginheight="0" marginwidth="0" scrolling="no" src="http://maps.google.com/maps/ms?ie=UTF8&amp;hl=el&amp;msa=0&amp;msid=207271638222613154872.00049df7bb569d7af0057&amp;ll=38.775499,23.483276&amp;spn=0.984971,1.257935&amp;z=8&amp;output=embed" width="230"></iframe> 
```

您可以添加您的案例，因为每个站点上都有不同类型的地图...

那么是否有通用代码不仅可以从这个示例中提取坐标 - 对于每个文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:37:19.037

嗯，我认为你有一个减号，因为你似乎在寻找某种魔法......或者你可能不够清晰和准确......

也许您应该尝试将您的问题分成几个孤立的确定问题，因为一种通用*地理坐标网络收割机*似乎是一个非常具体的应用程序......也许它存在，我不知道，但是......听起来不错现在的魔法:-)

所以也许试着对你可能面临的每个案例做一个清晰、明确的清单，并可能开始尝试为每个案例考虑一个可能的提取解决方案......

**话虽**如此，首先，您确定 IP 到 GPS 坐标还不够吗？如果您的每笔交易都有一个 URL，那么它可能就足够了。在这种情况下，您可能想看看[这里](http://www.maxmind.com/app/geolite)，免费数据库每个月都会更新，但它应该足够准确。他们为[许多开发环境提供 API，您可以](http://www.maxmind.com/app/api)[在此地址](http://www.maxmind.com/app/locate_demo_ip?ips=www.google.com)免费试用他们的服务（每天最多 25 个请求）

这是在 PHP 上使用[geolitecity](http://www.maxmind.com/app/geolitecity)数据库和[quova](http://developer.quova.com/)的快速[教程](http://www.phparch.com/2011/11/geolocation-its-easier-than-it-looks/)

我认为 PHP 也有一个 GeoIP 模块，但我不知道它是使用 maxmind 服务还是其他服务，而且我无法访问 PHP 网站，它现在似乎已关闭。也许以后试试[这个，](http://www.google.ie/search?q=php%20geoip)

**编辑：**您需要说明您的交易将拥有什么样的来源。它是在 ebay 或 amazon 等大型企业网站上，还是类似的？如果是，您可能首先要检查他们是否有适当的 API，您可以从中轻松检索每笔交易的 GPS 坐标...

**编辑#2：** 好的，所以从你的样本来看，你所有的地理定位案例似乎都是表格`23.987463,12.098374`，比如说~~二~~1 到 3 位数字之间是否有“减号”，后跟一个点，然后是 6 位数字，然后是逗号，然后~~二~~一到三位数字之间是否有“减号”，后跟一个点和六位数字......因此，匹配此格式的正则表达式将是：

```
'-?[0-9]{1,3}.[0-9]{6},-?[0-9]{1,3}.[0-9]{6}' 
```

现在，在 PHP 中，您应该执行以下操作：

```
preg_match_all('-?[0-9]{1,3}.[0-9]{6},-?[0-9]{1,3}.[0-9]{6}',$s,$out); 
```

您的输入字符串在`$s`哪里，以及您在哪里获得一个包含 3 个 GPS 坐标的数组`$out`。

$out 中的数组看起来像：

```
Array
(
[0] => Array
(
[0] => 44.796637,20.480168
[1] => 44.815123,20.469887
[2] => 38.775499,23.483276
) 
```

现在，我不是一个 PHP 人，我无法在我的机器上尝试任何代码，所以我建议你尝试一下，如果需要，就你可能遇到的新问题提出新的问题，更加清晰和明确......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:14:23.327

(preg_match_all('#(([0-9-]+){1,3}.([0-9]+))#is', $string, $matches))

工作！！！！

[http://ideone.com/X5qNh](http://ideone.com/X5qNh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T00:53:16.567

没有规定坐标有 6 位小数精度。我通常看到 4 到 10 之间，但实际上它可以是任何数字。最大值是 180，所以也许`'-?1?\d{1,2}\.\d{4,10}'`

# c# - SubSonic DAL，未找到组件？

> ID：10959838
> 
> 赞同：1
> 
> 时间：2012-06-09T09:25:09.473
> 
> 标签：c#, mysql, subsonic, subsonic2.2

我使用 c# 和 mysql 为 .NET4.0 应用程序生成了带有 Subsonic2.2 的 DAL 层。然而，当我使用集合时，我在这一行有这个例外：

```
AnagraficaCategorieCollection a = new AnagraficaCategorieCollection().Load(); 
```

告诉我它无法加载或找到程序集 MySql.Data，版本 5.2.3.0。

我的项目引用了较新的版本。我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T09:27:49.533

解决方案是使用[程序集重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)，它告诉框架使用更新版本的 MySql.Data。要添加重定向，请将其放在您的 web/app.config 中：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" culture="neutral" />
      <bindingRedirect oldVersion="5.0.0.0-6.5.3.0" newVersion="6.5.4.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

请注意，您可能需要更改版本号以匹配您当前的程序集。

# iphone - AVAudioPlayer 在 iOS sdk 的振动模式下播放一点点

> ID：10959843
> 
> 赞同：0
> 
> 时间：2012-06-09T09:25:31.717
> 
> 标签：iphone, ios, xcode, ios5

我正在使用 avaudioplayer 开发应用程序，它运行良好，但是，我的问题是，如果我的 iPhone 振动模式打开我的应用程序 avaudioplayer 播放音频略低于几秒，我不想在振动模式下播放 avaudioplayer 声音。

这是我的代码：

```
- (void)viewDidLoad
{
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL
                                                                fileURLWithPath:[[NSBundle mainBundle] 
                                                                                 pathForResource:@"audio" ofType:@"mp3"]] error:NULL]; 

    audioPlayer.numberOfLoops =-1;
    audioPlayer.delegate = self;
    audioPlayer.currentTime=0.0f;
    [audioPlayer prepareToPlay];
    [audioPlayer Play]; 

} 
```

谁能帮帮我..！

谢谢..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:33:03.013

尝试：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error: nil]; 
```

如 Apple Docs 中所述：

> **AVAudioSessionCategoryAmbient**
> 
> > 对于声音播放是非主要的应用程序，也就是说，您的应用程序可以在关闭声音的情况下成功使用。此类别也适用于“随玩”风格的应用程序，例如用户通过 iPod 音频播放的虚拟钢琴。当您使用此类别时，来自其他应用程序的音频会与您的音频混合。您的音频通过屏幕锁定和静音开关（在 iPhone 上称为响铃/静音开关）静音。

应该是您正在寻找的具体内容。

> 您的音频通过屏幕锁定和静音开关（在 iPhone 上称为响铃/静音开关）静音

# javascript - 播放声音时如何防止文本区域模糊

> ID：10959844
> 
> 赞同：0
> 
> 时间：2012-06-09T09:25:32.890
> 
> 标签：javascript, html, audio

我正在创建一个基于 HTML 的聊天。在此聊天中，当您收到新消息时，正在使用此代码播放声音：

```
$('#sound-root').html('<embed src="'+soundfile+'" hidden="true" autostart="true" loop="false" />'); 
```

问题是，在某些浏览器中，当您在输入 blur() 事件时收到消息时，会从 textarea 触发，您应该再次单击 textarea 以继续输入。有什么解决方法吗？

**PS：**

*   **#sound-root**是一个不可见元素，仅用于播放声音。
*   **#textChat**是文本区域的 id。
*   **#textChat**应该能够模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:27:43.153

防止在您的文本区域上发生模糊（如果您根本不需要它）

```
$('#textChat').blur(function(e){
    e.preventDefault();
    e.stopPropagation();
    return false;
}); 
```

如果您需要模糊事件，则在播放声音时将变量设置为 true，并且在此模糊功能中，您可以防止它仅在播放声音时发生。

# facebook - Facebook like box - 内容的宽度

> ID：10959846
> 
> 赞同：2
> 
> 时间：2012-06-09T09:25:54.840
> 
> 标签：facebook, iframe, facebook-likebox

由于 Facebook 改变了他们的图像大小，我的 Facebook Like-Box 都搞砸了。图片和文字太宽了。

有没有办法改变类似框的内容的宽度？我正在使用 iframe 版本。

代码是：

```
<iframe src="//www.facebook.com/plugins/likebox.php?locale=it_IT&href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FNautica-Nautilus%2F167411390055525&amp;width=300&amp;height=395&amp;colorscheme=light&amp;show_faces=false&amp;border_color=%23FFFFFF&amp;stream=true&amp;force_wall=true&amp;header=false&amp;appId=167411390055525" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:395px;" allowTransparency="true"></iframe> 
```

网站是这个：[http ://tinyurl.com/cy9d3mz](http://tinyurl.com/cy9d3mz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:35:26.600

我假设由于您所做的一切实际上是在您的站点中显示 Facebook 对象，因此 Facebook 希望保留其与内容有关的“外观和感觉”。

这些事情将包括

*   字体样式和大小。
*   图片尺寸。
*   图标。
*   分页技术。

在任何情况下，内容的宽度都与您放入的 iFrame 包装器直接相关。这就是 HTML 内容的行为方式。[您可以在上面发布的 iFrame 代码的相同位置](http://i.imgur.com/rDFxx.png)指定宽度参数。

从设计的角度来看，您最好在 3 列布局的 2 列中显示类似框。毕竟，您正在显示一个包含大量内容的插件。您需要为其提供所需的必要屏幕空间。

# git - 如何自定义 diff git 以忽略码日期生成

> ID：10959850
> 
> 赞同：6
> 
> 时间：2012-06-09T09:26:57.083
> 
> 标签：git, yard

我正在使用[yard](http://yardoc.org/)来生成我的项目的文档。即使文档可以生成，因此不需要进行版本控制，我们还是决定这样做，因为它可以更容易地查看代码（注释）更改对实际文档的影响。

问题是每次 yard 生成文档时，它都会更改每个文件开头的日期，导致所有文件都被视为已更改。

有没有办法告诉 git 忽略这些行以检测文件是否已更改，或者有一种方法可以将 yard 配置为如果它们相同则不重新生成文件？

谢谢

## 更新

我知道我可以做一个脚本或其他任何东西，如果只有日期发生了变化，它就会*清理文件。*所以我的问题是有一种 Git 方法可以做，即我应该费心阅读差异驱动程序还是应该执行干净的脚本。

如果我要走向清理路径，那么使用 git hook 或将其集成到 doc 生成中会更好吗？

最终，我对任何其他方式来跟踪由于生成的文档中的特定提交而导致的更改感兴趣。

我还没有真正解释我的问题是什么（以及为什么我要尝试对不需要的东西进行版本化）所以我们开始了。

有时，代码中的一些修改会搞砸文档，因此我将能够看到提交对文档的影响。

示例：我为 vim 使用模式行（文件第一行的注释告诉 vim 不同的信息）

知道我有一个包含模块文档的文件

```
#vi: my vim setting 
# Documentation of module A
module A
  .... some code

end 
```

在其他地方我使用这个模块

```
#vi : my vim setting

           ( 2 blank lines)
module A
   .... some different code
end 
```

那时，一切都很好，A 的文档将是`Documentation of module A`. 但是，如果有人（比如我）删除了最后一个文件中的一个空行并只留下一个（是的，我在模式行和代码之间留了 2 个空行），那么院子认为模式行是模块 A 的文档，它将是`vi : my vim setting`.

问题是，除了查看每一页之外，没有办法检测到文档是否被搞砸了。使用 git，我可以快速查看和检查更改的内容，甚至可以找到更改的时间（这很重要，因为这样我就可以找出更改的原因）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:43:50.473

不是直接的答案，只有元素：

*   `git diff`可以`-G`选择只保留与某个正则表达式匹配的补丁。似乎没有一个标志可以*排除*与您的日期线匹配的行，但也许您将有足够的想象力来构建一个正则表达式来保留除您的日期线之外的任何内容。
*   `diff`有这样一个选项 ( `diff -I`)，所以如果你能想办法将 git 生成的 diff 提供给 diff，你就可以走了。
*   [`meld`](http://meldmerge.org/)是一个图形差异查看器，可以很好地与 git 配合使用——例如，在项目目录上调用会`meld dir/`打开一个窗口，显示所有与`HEAD`过滤器）。它是为 linux 发行版打包的（至少对于 Ubuntu），并且该网站声称它也可以在 MacOS X 和 Windows 上运行（我没有尝试过）。
*   我还没有尝试过所有与 git 集成的可用 difftools，但它们可能提供类似的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:43:41.523

我对 yard 不熟悉，但没有办法让 git 忽略文件的某些部分。

最简单的解决方案是修改您的构建过程以运行自定义脚本，该脚本从生成的文件中删除数据，或者如果仅更改日期并在这种情况下恢复日期更改，则检查 git-diff。

但是，根本不对任何*生成的*代码/文件进行版本控制会更干净。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T12:01:18.967

### 不要那样做

可以从源重新生成的资产不应进行版本控制。正是由于您遇到的原因，这是一个坏主意：

1.  您的历史记录跟踪您不关心的更改。
2.  您必须努力忽略与您的提交历史无关的琐碎更改。
3.  您将存储库空间和处理时间浪费在可以按需重新生成的数据上。

请参阅[https://stackoverflow.com/a/10855342/1301972](https://stackoverflow.com/a/10855342/1301972)，了解有关版本和遗漏内容的相关讨论。

### 如果你还是这样做...

您可以在 Git 中创建一个自定义的[清理过滤器](http://git-scm.com/book/ch7-2.html)（或在您更新 YARD 时运行的 shell 脚本或 Rake 任务），在您提交文档文件之前删除您的时间戳。例如：

```
# Tested with: GNU findutils 4.4.2, GNU sed 4.2.1
find doc -type f -iname \*html -exec sed -i '/id="footer"/,/\/div/ d' {} + 
```

这将删除 YARD 文档中的所有页脚，这样您就不会将这些行提交到您的历史记录中。这应该解决您的具体问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T02:09:44.507

文件中完全没有日期就足够了吗？

特定于院子的解决方案（但不是特定于 git），如果您实际上不使用这些日期 - 首先让院子不生成它们：

在其中创建一个空文件，`customtemplates/default/layout/html/footer.erb`然后将其包含在您的模板中：

*   使用命令行

    ```
    yardoc --template-path ./customtemplates 
    ```

*   使用 Rakefile

    ```
    YARD::Rake::YardocTask.new do |yardoc|
        yardoc.options = ["--template-path", "./customtemplates"]
    end 
    ```

（或者，如果您仍然想要对 Yard 的确认，您可以将以下内容放入`customtemplates/default/layout/html/footer.erb`文件中）

```
<div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div> 
```

或者您可以在自己的页脚中添加公司徽标或其他信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T09:49:23.843

我有几乎同样的问题。这不是文档，而是 IDE 设置更改日期和时间的源文件。每次都保存。

要求是在提交之前让这个日期和时间“相当”，这意味着没有秒，分钟应该四舍五入到 15。

我认为最好的方法是在提交之前创建一个小的 git 命令来清理代码。插件。将其命名`git-cleanup`并将其放入`c:\Program Files (x86)\Git\libexec\git-core`（我使用的是 Windows）。

所以现在在做之前`git commit`我正在跑步`git cleanup`，它完成了所有的工作。实际上，我认为甚至可以一次性运行它，例如`git cleanup && git commit -a -m "Commit message"`. 或者为此命令创建自定义别名。

我已经用于`ruby`创建这个小脚本。但是您可以使用您选择的语言。Git 允许这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T13:10:21.497

### 更新问题的 Modeline 解决方案

如果问题确实是[VIM](http://vimdoc.sourceforge.net/htmldoc/options.html#%27modelines%27)模式行，而不是页脚中存储的日期，那么您可以使用 pre-commit 钩子（客户端）或 pre-receive 或 post-receive 钩子（服务器端）在之后立即检查换行符模式线。例如，使用 GNU sed：

```
sed -r '/^#[[:space:]]+vim?:/ {N; /\n[^\n]/q1}' 
```

然后，您的钩子可以显示差异、错误消息或根据退出状态采取其他操作。重要的是您的模式行将与后续文档块正确分离，并且应该被 YARD 正确忽略。

# java - 为什么这会引发空指针异常？

> ID：10959853
> 
> 赞同：0
> 
> 时间：2012-06-09T09:27:31.007
> 
> 标签：java, exception

我在 for 循环中有以下代码

```
MyClass myobj= new MyClass(customers, price);
System.out.println(myobj);
if (!myobj.equals(null)) { //same happesn with myobj != null
    System.out.println("not null");
}
myMethod(myobj); 
```

myMethod 正文是：

```
private void myMethod(MyClass myobj) {
   if (myobj.totalDemand()) {
      //bla bla
   } 
```

在 Junit 中运行代码后，“if (myobj.totalDemand())”行会引发 NullPointerException，但控制台会打印“not null”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T09:30:14.120

如果您调用`myobj.equals(null)`，则无法保证`equals()`类的实现不会抛出 a `NullPointerException`，如果`myobj`是`null`，您将`NullPointerException`尝试`.equals()`在`null`对象上调用。

要测试`null`，请使用以下代码：

```
if (myobj == null) 
```

并测试不为空，使用这个：

```
if (myobj != null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:44:04.210

如果 myobj 为 null，您将得到 NullPointerException，如果不是控制台，则会打印出“not null”。那么，每个调用周期中的变量客户和价格是否有任何内容？

# objective-c - iPad 富文本控件

> ID：10959854
> 
> 赞同：0
> 
> 时间：2012-06-09T09:27:38.507
> 
> 标签：objective-c, cocoa-touch, ipad

我正在寻找一种解决方案，允许用户在我的 iPad 应用程序（当前使用 UITextView）中编写文本，但我希望他们能够选择特定段落的字体、颜色和对齐方式，所以我基本上需要一个富文本编辑器某种意义上的。

最好的方法是什么？是否有现有的解决方案或者 UITextView 可以适应这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:44:59.810

Cocoa Touch 中没有可供开发人员使用的富文本控件。您可以为此尝试[EGOTextView](http://developers.enormego.com/code/EGOTextView)自定义控件。

# python - Tkinter Canvas 将项目移动到顶层

> ID：10959858
> 
> 赞同：9
> 
> 时间：2012-06-09T09:27:56.423
> 
> 标签：python, tkinter, widget, tkinter-canvas

我有一个 Tkinter Canvas 小部件（Python 2.7，而不是 3），在这个 Canvas 上我有不同的项目。如果我创建一个与旧项目重叠的新项目，它将在前面。我现在如何将旧项目移动到新创建的项目前面，或者甚至移动到画布上所有其他项目的前面？

到目前为止的示例代码：

```
from Tkinter import *
root = Tk()
canvas = Canvas(root,width=200,height=200,bg="white")
canvas.grid()
firstRect = canvas.create_rectangle(0,0,10,10,fill="red")
secondRect = canvas.create_rectangle(5,5,15,15,fill="blue") 
```

现在我希望 firstRect 在 secondRect 前面。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T09:46:01.493

使用对象的`tag_lower()`and`tag_raise()`方法`Canvas`：

```
canvas.tag_raise(firstRect) 
```

或者：

```
canvas.tag_lower(secondRect) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-27T08:02:08.273

如果您在画布上有多个项目并且您不知道哪个项目会重叠，那么请执行此操作。

```
# find the objects that overlap with the newly created one
# x1, y1, x2, y2 are the coordinates of the rectangle

overlappers = canvas.find_overlapping(x1, y1, x2, y2)

for object in overlappers:
    canvas.tag_raise(object) 
```

# python - genbitmaptextbutton 在 Windows 7 上不起作用

> ID：10959864
> 
> 赞同：0
> 
> 时间：2012-06-09T09:29:41.637
> 
> 标签：python, wxpython

我尝试来自另一个教程 [http://wiki.wxpython.org/AnotherTutorial#Bitmap_Text_Buttons的代码](http://wiki.wxpython.org/AnotherTutorial#Bitmap_Text_Buttons)

但它不能在 wxpython 2.8.12.1 和 python 2.6 上运行，我有这个错误：

文件“C:\Python26\Lib\site-packages\wx-2.8-msw-unicode\wx_core.py”，第 3473 行，在 ImageFromBitmap val = *core* .new_ImageFromBitmap(*args, **kwargs) wx._core.PyAssertionError： C++ 断言“bmp.Ok()”在 ....\src\msw\dib 失败。wxDIB::Create() 中的 cpp(148): wxDIB::Create(): 无效位图

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:34:24.807

我怀疑您的位图不在正确的位置。您是否提供“email.png”、“calendar.png”等图片？如果是，您确定将它们的正确路径传递给 wx.Bitmap 构造函数吗？

# android - 使用 Asynctask 显示进度条

> ID：10959866
> 
> 赞同：1
> 
> 时间：2012-06-09T09:30:01.030
> 
> 标签：android, android-asynctask

我有一个应用程序，我在其中进行了一个函数调用，该函数调用需要一些时间来计算，具体取决于用户输入。我尝试使用 实现进度条显示`AsyncTask`，但是当我在其中声明函数调用时`doinbackGround`出现错误，因为它与 UI 线程交互。我为函数调用创建了一个单独的线程，并在 UI 线程中调用了 AsyncTask 类并同步了它们的时间，`doinbackground`即将 Asynctask 的休眠时间设置为一个较大的值，以便函数调用在该时间完成。

但这不是一个好的解决方案，因为完成方法调用所花费的时间取决于用户输入，而我事先并不知道。我还希望我的进度条能够连续显示而不是离散的。我正在提供 Asynctask 调用类和函数调用的代码。

异步任务调用类

```
package com.integrated.mpr;

public class Progess extends Activity {

    static String[] display = new String[Model.n];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);
        Thread threada=new Thread(){
            public void run() {                     
                 display = new Logic().finaldata();
                 // this is the function call    
              }
           };
           threada.start();
        new loadSomeStuff().execute(" ");
    }

    public class loadSomeStuff extends AsyncTask<String,Integer,String>{
        ProgressDialog dialog;
        protected void onPreExecute(){
            dialog = new ProgressDialog(Progess.this);            
                            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMax(100);
            dialog.setTitle("Generating the most sensitive positions");
            dialog.show();              
        }
        @Override
        protected String doInBackground(String... arg0) {
                for(int i=0;i<20;i++){
                publishProgress(5);
                try {
                    Thread.sleep(1200);// the timing set to a large value
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            dialog.dismiss();
            return null;
        }
    protected void  onProgressUpdate(Integer...progress){
        dialog.incrementProgressBy(progress[0]);
    }
        protected void onPostExecute(String result){
            Intent openList = new Intent("com.integrated.mpr.SENSITIVELIST");
            startActivity(openList);
        }
    }
} 
```

耗时较长的功能

```
package com.integrated.mpr;
public class Logic {
    int n = Model.n;
    int ns = Model.ns;
    double final_matrix[][] = new double[n][5];
    double swap =0;

    double weightage_matrix[] = new double[n];
    double sorted_weightage[] = new double[n];
    String  display[] = new String[n]; 

    double[] peak_matrix = new double[n];
    double[] sd_matrix = new double[n];
    double[] rms_matrix = new double[n];
    double[] cf_matrix = new double[n];
    double[] mean_matrix = new double[n];
    int[] sensitive_positions = new int[n];
    double[] new_sensitive = new double[n];
    int[] sortsensi = new int[n];
    public String[] finaldata(){

    for(int i=0;i<n;i++){
            peak_matrix[i] = Model.timedata[i*5+0];
            sd_matrix[i] = Model.timedata[i*5+1];
            rms_matrix[i] = Model.timedata[i*5+2];
            cf_matrix[i] = Model.timedata[i*5+3];
            mean_matrix[i] = Model.timedata[i*5+4];
        }

        // Arrays sorted in asecnding order
        java.util.Arrays.sort(peak_matrix);
        java.util.Arrays.sort(sd_matrix);
        java.util.Arrays.sort(rms_matrix);
        java.util.Arrays.sort(mean_matrix);
        java.util.Arrays.sort(cf_matrix);

         Log.d("matrices", "sorted");
    for(int i = 0;i<n;i++){
        final_matrix[i][0]= peak_matrix[i];
        final_matrix[i][1]= sd_matrix[i];
        final_matrix[i][2]= rms_matrix[i];
        final_matrix[i][3]= cf_matrix[i];
        final_matrix[i][4]= mean_matrix[i];
    }

    Log.d("final ", "matrix");
    double temp =0;

    for(int i=0;i<n;i++){
        for(int j=0;j<5;j++){
            temp = final_matrix[i][j];
            for(int k =0;k<n;k++){
                if(temp==Model.timedata[k*5+j]){
                    weightage_matrix[k] = weightage_matrix[k]+(i+1)*n;
                }
            }
        }
    }

    //copying the values into sorted matrix;

    for(int i=0;i<n;i++){
        sorted_weightage[i] = weightage_matrix[i];
    }

    //sorting weighatge matrix in descending order

        for (int i = 0;i<n; i++ )
           {
              for ( int j = 0 ; j < n-i-1 ; j++ )
              {
                  if ( sorted_weightage[j] <sorted_weightage[j+1] ) {
                        swap = sorted_weightage[j];
                        sorted_weightage[j] = sorted_weightage[j+1];
                        sorted_weightage[j+1] = swap;
                  }
              }

           }        
        Log.d("sorted weightage", "matrix");
        for(int i =0;i<n;i++){
        temp = sorted_weightage[i];
        for(int j =0;j<n;j++){
            if(temp==weightage_matrix[j]){
                sensitive_positions[i]=j+1;
                }
            }
        }
    RealMatrix pcorrdata = new PearsonsCorrelation().computeCorrelationMatrix(Model.input_matrix);
    // the above statement takes time depending on the user input

    for(int i =0;i<n;i++){
        for(int j =0;j<n;j++){  
            if(pcorrdata.getEntry(i, j)<0){
                pcorrdata.setEntry(i, j, pcorrdata.getEntry(i, j)*-1);
            }

        }
    }

    for(int i =0;i<n;i++){
        for(int j =0;j<n;j++){
            Log.d(" "+i+" "+j, ""+pcorrdata.getEntry(i, j));
        }
    }

    for(int i =0;i<n;i++){
        Log.d("sensitive osition before correlation", ""+sensitive_positions[i]);
    }

    int[] perm_sensitive = sensitive_positions;
    for(int i =0;i<ns;i++){
        int temp1 = perm_sensitive[i]-1;
        if(i+1<n){
        for(int j=i+1;j<ns;j++){
            int temp2 = perm_sensitive[j]-1;
                    if(pcorrdata.getEntry(temp1, temp2)>0.5){
                        sensitive_positions =append((temp2)+1,sensitive_positions);

                    }
                }
        perm_sensitive = sensitive_positions;
        Log.d("perm", ""+perm_sensitive[0]);
        Log.d("perm", ""+perm_sensitive[1]);
            }
    }

    for(int i =0;i<n;i++){
        Log.d("values",""+perm_sensitive[i]);
    }

    for(int i =0;i<n;i++){
        display[i] = Model.posnames[perm_sensitive[i]-1];
    }

    return display;

    }
    private int[] append(int j, int[] sensitive_positions) {
        int[] sort_sensitive = new int[n];
        int z = 0;
        for(int i =0;i<n;i++){
            if(sensitive_positions[i]!=j){
                sort_sensitive[z]=sensitive_positions[i];
                z = z+1;
            }
        }
        sort_sensitive[n-1] = j;
        return sort_sensitive;
    }
} 
```

使用 Asynctask 的 progressupdate 来更新 UI

```
package com.integrated.mpr;
public class Logic extends Activity{
    int n = Choose.n;
    double final_matrix[][] = new double[n][5];
    double swap =0;

    double weightage_matrix[] = {0,0,0,0,0,0,0,0,0,0,0};
    double sorted_weightage[] = {0,0,0,0,0,0,0,0,0,0};
    static String  display[] = new String[Choose.n]; 

    static double[][] input_matrix;
    double[] peak_matrix;
    double[] sd_matrix;
    double[] rms_matrix ;
    double[] cf_matrix ;
    double[] mean_matrix ;
    int[] sensitive_positions ;
    double[] new_sensitive ;
    int[] sortsensi ;
    RealMatrix pcorrdata ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);
        String x = "abc";
        new loadSomeStuff().execute(x);
    }
    public class loadSomeStuff extends AsyncTask<String,Integer,String>{
        ProgressDialog dialog;
        protected void onPreExecute(){
            dialog = new ProgressDialog(Logic.this);
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMax(100);
            dialog.setMessage("Computing Most Sensitive Positions");
            dialog.show();
        }
        @Override
        protected String doInBackground(String... params) {
                publishProgress(25);
                publishProgress(50);
                publishProgress(75);
                publishProgress(100);
        }

        private int[] append(int j, int[] sensitive_positions) {
            int[] sort_sensitive = new int[n];
            int z = 0;
            for(int i =0;i<n;i++){
                if(sensitive_positions[i]!=j){
                    sort_sensitive[z]=sensitive_positions[i];
                    z = z+1;
                }
            }
            sort_sensitive[n-1] = j;
            return sort_sensitive;
        }

        protected void onProgressUpdate(Integer...progress){
            if(progress[0]==25){
                Log.d("loop 1 ", "start");
                Log.d("now in ", "35 loop");
                input_matrix = new double[22050][n];
                peak_matrix = new double[n];
                sd_matrix = new double[n];
                rms_matrix = new double[n];
                cf_matrix = new double[n];
                mean_matrix = new double[n];
                sensitive_positions = new int[n];
                new_sensitive = new double[n];
                sortsensi = new int[n];
                for(int i=0;i<n;i++){
                    peak_matrix[i] = Choose.timedata[i*5+0];
                    sd_matrix[i] = Choose.timedata[i*5+1];
                    rms_matrix[i] = Choose.timedata[i*5+2];
                    cf_matrix[i] = Choose.timedata[i*5+3];
                    mean_matrix[i] = Choose.timedata[i*5+4];
                }
                for(int i = 0;i<n;i++){
                    final_matrix[i][0]= peak_matrix[i];
                    final_matrix[i][1]= sd_matrix[i];
                    final_matrix[i][2]= rms_matrix[i];
                    final_matrix[i][3]= cf_matrix[i];
                    final_matrix[i][4]= mean_matrix[i];
                }
                //final sorted matrix obtained
                for(int i =0;i<n;i++){
                    for(int j=0;j<5;j++){
                        if(final_matrix[i][j]== new Page1().timedata1[j]){
                            weightage_matrix[0] = weightage_matrix[0]+(i+1)*24;
                        }
                        else if (final_matrix[i][j]== new Page2().timedata2[j]){
                            weightage_matrix[1] = weightage_matrix[1]+(i+1)*24;
                        }
                        else if (final_matrix[i][j]== new Page3().timedata3[j]){
                            weightage_matrix[2] = weightage_matrix[2]+(i+1)*24;
                        }
                        else if (final_matrix[i][j]== new Page4().timedata4[j]){
                            weightage_matrix[3] = weightage_matrix[3]+(i+1)*24;
                        }

                        else{
                            weightage_matrix[4] = weightage_matrix[4]+(i+1)*24;
                        }
                }
            }

                Log.d("loop 1 ", "stop");
                Log.d("now ", "incrementing");
                dialog.incrementProgressBy(15);
            }
            else if (progress[0]==50){
                Log.d("loop 2 ", "start");
            //copying the values into sorted matrix;
            for(int i=0;i<n;i++){
                sorted_weightage[i] = weightage_matrix[i];
            }
            //sorting weighatge matrix in descending order
            for (int i = 0;i<n; i++ ){
                      for ( int j = 0 ; j < n-i-1 ; j++ ){
                          if ( sorted_weightage[j] <sorted_weightage[j+1] ) {
                                swap = sorted_weightage[j];
                                sorted_weightage[j] = sorted_weightage[j+1];
                                sorted_weightage[j+1] = swap;
                          }
                      }             
            }
                for(int i =0;i<n;i++){
                    double temp = sorted_weightage[i];
                        for(int j =0;j<n;j++){
                            if(temp==weightage_matrix[j]){
                            sensitive_positions[i]=j+1;
                            }
                        }
                }

                Log.d("loop 2 ", "stop");
                dialog.incrementProgressBy(20);
                //now for correaltion
            }

            else if (progress[0] == 75){
                // genearting the input matrix for correaltion

                Log.d("loop 3 ", "start");
                for(int i=0;i<n;i++){
                    for(int j=0;j<22050;j++){
                        input_matrix[j][i] =  new Choose().rawdata[i*22050+j];
                    }
                }

                // now generating correlation matrix of N x n by using pearson correaltion
                 pcorrdata = new PearsonsCorrelation().computeCorrelationMatrix(input_matrix);
                dialog.incrementProgressBy(35);
            }
            else{                   
                Log.d("checkng correlation mtrix", "yup");                  
                for(int i =0;i<n;i++){
                    for(int j =0;j<n;j++){                          
                        if(pcorrdata.getEntry(i, j)<0){
                            pcorrdata.setEntry(i, j, pcorrdata.getEntry(i, j)*-1);
                        }                       
                    }
                }               
                Log.d("now in", "75 l00p");
                for(int i =0;i<n;i++){
                    Log.d("sensitive osition before correlation", ""+sensitive_positions[i]);
                }                   
                Log.d("loop 3 ", "stop");
                Log.d("loop 4 ", "start");                  
                int[] perm_sensitive = sensitive_positions;                 
                if((pcorrdata.getEntry(perm_sensitive[0]-1, perm_sensitive[1]-1))>0.5){
                    sensitive_positions = append(perm_sensitive[1],sensitive_positions);
                }                   
                perm_sensitive = sensitive_positions;                   
                if((pcorrdata.getEntry(perm_sensitive[2]-1, perm_sensitive[3]-1))>0.5){
                    sensitive_positions = append(perm_sensitive[3],sensitive_positions);
                }                   
                for(int i =0;i<n;i++){
                    Log.d("values",""+perm_sensitive[i]);
                }
                for(int i =0;i<n;i++){
                    display[i] = new Choose().posnames[perm_sensitive[i]-1];
                }
                Log.d("loop 4 ", "stop");
                dialog.incrementProgressBy(20);
                Log.d("now in ","100 loop");
                Intent openList = new Intent("com.integrated.mpr.SENSITIVELIST");
                startActivity(openList);                
            }
        }           
        protected void onPostExecute(String result){
            dialog.dismiss();
            Intent openList = new Intent("com.integrated.mpr.SENSITIVELIST");
            startActivity(openList);                
        }
    }   
} 
```

LogCat 错误

```
06-09 16:32:05.670: E/AndroidRuntime(8009): FATAL EXCEPTION: AsyncTask #4
06-09 16:32:05.670: E/AndroidRuntime(8009): java.lang.RuntimeException: An error occured while executing doInBackground()
06-09 16:32:05.670: E/AndroidRuntime(8009):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.lang.Thread.run(Thread.java:1096)
06-09 16:32:05.670: E/AndroidRuntime(8009): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
06-09 16:32:05.670: E/AndroidRuntime(8009):     at android.os.Handler.<init>(Handler.java:121)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at android.app.Activity.<init>(Activity.java:679)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at com.integrated.mpr.Logic.<init>(Logic.java:13)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at com.integrated.mpr.Progess$loadSomeStuff.doInBackground(Progess.java:53)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at com.integrated.mpr.Progess$loadSomeStuff.doInBackground(Progess.java:1)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-09 16:32:05.670: E/AndroidRuntime(8009):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-09 16:32:05.670: E/AndroidRuntime(8009):     ... 4 more 
```

请提出一个方法我怎么能做到这一点？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T09:38:31.700

使用 AsyncTask。它可以与 onProgressUpdate 和 onPostExecute 中的 UI 线程交互。您必须将计算保存在 doInBackground() 中，并且*只*在 onProgressUpdate() 中更新 UI。将您的 Logic 类分解为更多方法并像这样进行操作。

```
public class LogicAsync extends AsyncTask<Void, Integer, Void> {

   @Override
   protected Void doInBackground(Void... p) {
       Logic logic = new Logic();
       logic.loadArrays();
       publishProgress(10); //10% done

       try {
           Thread.sleep(1000);
       } catch {
       }

       logic.sortArraysAndMatrix();
       publishProgress(20); //20% done
       logic.copyAndSortWeightages();
       publishProgress(30);
       logic.finalData();
       publishProgress(100);
   }

   @Override
   protected void onProgressUpdate(Integer... progress) {
       updateUIWithPercent(progress[0]);
   }
} 
```

这是一个经过修改的逻辑类，其中包含一些分解的方法。

```
package com.integrated.mpr;

import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.stat.correlation.Covariance;
import org.apache.commons.math.stat.correlation.PearsonsCorrelation;
import org.apache.commons.math.util.FastMath;

import android.util.Log;

public class Logic {

    int n = Model.n;
    int ns = Model.ns;
    double final_matrix[][] = new double[n][5];
    double swap =0;

    double weightage_matrix[] = new double[n];
    double sorted_weightage[] = new double[n];
    String  display[] = new String[n]; 

    double[] peak_matrix = new double[n];
    double[] sd_matrix = new double[n];
    double[] rms_matrix = new double[n];
    double[] cf_matrix = new double[n];
    double[] mean_matrix = new double[n];
    int[] sensitive_positions = new int[n];
    double[] new_sensitive = new double[n];
    int[] sortsensi = new int[n];

    public void loadArrays() {
        for(int i=0;i<n;i++){
            peak_matrix[i] = Model.timedata[i*5+0];
            sd_matrix[i] = Model.timedata[i*5+1];
            rms_matrix[i] = Model.timedata[i*5+2];
            cf_matrix[i] = Model.timedata[i*5+3];
            mean_matrix[i] = Model.timedata[i*5+4];
        }
    }

    public void sortArraysAndMatrix() {
        // Arrays sorted in asecnding order
        java.util.Arrays.sort(peak_matrix);
        java.util.Arrays.sort(sd_matrix);
        java.util.Arrays.sort(rms_matrix);
        java.util.Arrays.sort(mean_matrix);
        java.util.Arrays.sort(cf_matrix);

        Log.d("matrices", "sorted");
        for(int i = 0;i<n;i++){
            final_matrix[i][0]= peak_matrix[i];
            final_matrix[i][1]= sd_matrix[i];
            final_matrix[i][2]= rms_matrix[i];
            final_matrix[i][3]= cf_matrix[i];
            final_matrix[i][4]= mean_matrix[i];
        }
    }

    public void copyAndSortWeightages() {
        Log.d("final ", "matrix");
        double temp =0;

        for(int i=0;i<n;i++){
            for(int j=0;j<5;j++){
                temp = final_matrix[i][j];
                for(int k =0;k<n;k++){
                    if(temp==Model.timedata[k*5+j]){
                        weightage_matrix[k] = weightage_matrix[k]+(i+1)*n;
                    }
                }
            }
        }

        //copying the values into sorted matrix;

        for(int i=0;i<n;i++){
            sorted_weightage[i] = weightage_matrix[i];
        }

        //sorting weighatge matrix in descending order

        for (int i = 0;i<n; i++ )
           {
              for ( int j = 0 ; j < n-i-1 ; j++ )
              {
                  if ( sorted_weightage[j] <sorted_weightage[j+1] ) {
                        swap = sorted_weightage[j];
                        sorted_weightage[j] = sorted_weightage[j+1];
                        sorted_weightage[j+1] = swap;
                  }
              }

           }

        Log.d("sorted weightage", "matrix");
    }

    public String[] finaldata(){

        for(int i =0;i<n;i++){
        temp = sorted_weightage[i];
        for(int j =0;j<n;j++){
            if(temp==weightage_matrix[j]){
                sensitive_positions[i]=j+1;
                }
            }
        }

        RealMatrix pcorrdata = new PearsonsCorrelation().computeCorrelationMatrix(Model.input_matrix);
        // the above statement takes time depending on the user input

    for(int i =0;i<n;i++){
        for(int j =0;j<n;j++){

            if(pcorrdata.getEntry(i, j)<0){
                pcorrdata.setEntry(i, j, pcorrdata.getEntry(i, j)*-1);
            }

        }
    }

    for(int i =0;i<n;i++){
        for(int j =0;j<n;j++){
            Log.d(" "+i+" "+j, ""+pcorrdata.getEntry(i, j));
        }
    }

    for(int i =0;i<n;i++){
        Log.d("sensitive osition before correlation", ""+sensitive_positions[i]);
    }

    int[] perm_sensitive = sensitive_positions;
    for(int i =0;i<ns;i++){
        int temp1 = perm_sensitive[i]-1;
        if(i+1<n){
        for(int j=i+1;j<ns;j++){
            int temp2 = perm_sensitive[j]-1;
                    if(pcorrdata.getEntry(temp1, temp2)>0.5){
                        sensitive_positions =append((temp2)+1,sensitive_positions);

                    }
                }
        perm_sensitive = sensitive_positions;
        Log.d("perm", ""+perm_sensitive[0]);
        Log.d("perm", ""+perm_sensitive[1]);
            }
    }

    for(int i =0;i<n;i++){
        Log.d("values",""+perm_sensitive[i]);
    }

    for(int i =0;i<n;i++){
        display[i] = Model.posnames[perm_sensitive[i]-1];
    }

    return display;

    }

    private int[] append(int j, int[] sensitive_positions) {
        // TODO Auto-generated method stub

        int[] sort_sensitive = new int[n];
        int z = 0;
        for(int i =0;i<n;i++){
            if(sensitive_positions[i]!=j){
                sort_sensitive[z]=sensitive_positions[i];
                z = z+1;
            }
        }
        sort_sensitive[n-1] = j;
        return sort_sensitive;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:41:12.740

您可以在 onPreExecute() 方法中显示进度对话框，如下所示：

```
 private class SaveProfileData extends AsyncTask<Void, Void, Void> {

    public SaveProfileData(){
        super();
    }

    @Override
    protected void onPreExecute(){
        pd = ProgressDialog.show(YourActivity.this, null, YourActivity.this.getString(R.string.lodingMessage), true);
    }

    @Override
    protected Void doInBackground(Void... params) {
        runOnUiThread(new Runnable() {
            public void run() {
                yourMethod();
            }});
        return null;
    }

    @Override
    protected void onPostExecute(Void result){
       pd.dismiss();
    }
} 
```

# recursion - 递归和归纳证明有什么关系？

> ID：10959874
> 
> 赞同：13
> 
> 时间：2012-06-09T09:32:34.087
> 
> 标签：recursion, type-theory, induction

递归和归纳证明有什么关系？

比方说`fn(n)`，

递归是`fn(n)`调用自身直到 meet `base condition`；

归纳是当`base condition`是满足，试图证明`(base case + 1)`也是正确的。

似乎递归和归纳是不同的方向。一个从`n`to开始，一个从to`base case`开始。`base case``infinite`

有人可以详细解释这个想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T17:49:56.613

递归和归纳是一回事！如果您使用具有依赖类型的编程语言（例如 Agda），这一点会变得很明显，但在某种程度上也可以在没有它们的情况下进行演示。

请记住，由于[Curry-Howard 对应关系](http://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence)，类型是命题，程序是证明。当您编写一个类型函数时`Nat -> Nat`（我将使用 Haskell 表示法），您试图证明给定一个自然数，您的程序将终止并产生另一个自然数。现在我们可能有这样的定义：

```
f 0 = 1
f (1 + n) = n * f n 
```

这既是其终止的递归定义，`f`又是其终止的归纳证明！

您可以通过以下方式将其作为证明阅读：

让我们证明 fx 对于任何 x 都终止。

*   基本情况：`f 0`根据定义，我们有常量，因此它终止。
*   归纳案例：如果我们假设`f n`termiates，`f (1 + n)`也终止（因为它调用的所有函数都终止）。

请注意，由于递归不仅限于递减其计数器的函数，因此归纳也不限于自然数。还有结构归纳，对应结构递归，两者在数学/编程中都很流行。这些将在尝试在更复杂的数据结构（列表/树/等）上证明事物/定义函数时使用。

现在，解决您对递归/归纳的“方向”的担忧。在这里考虑“需求方向”和“供应方向”是有帮助的，它们是相反的。

当您定义递归函数时，需求（方法调用）从较大的值流向基本情况。另一方面，供应（返回值）从基本情况流向较大的参数值。“定义性”是另一种思考供应的方式。它从基本情况开始并通过递归情况传播到无穷大。

现在，当您进行归纳证明时，定理是您的供应，而目标是您的需求。您可以从基本情况得出一个定理 T 0 ，然后使用归纳情况改进到您喜欢的任何大的 T n ：您的供应从 0 流向无穷大。现在，如果您有一个目标 G n，您可以使用归纳步骤从中制作一个较小的目标 G (nk)，直到您达到零。这样你的需求就会从 n 变为 0。

如您所见，在这两种情况下，供应方向都是“无穷大”，而需求方向在这两种情况下都是“趋于零”。

您还可以在不改变其含义的情况下颠倒归纳和递归描述中的明显顺序：

归纳是当证明 P n 成立时，您需要首先通过重复应用归纳案例将目标减少到 P 0，然后使用基本案例证明最终目标。

类似地，递归是您首先定义一个基本情况，然后根据之前的值定义进一步的值。看，方向很容易互换！

# android - Android sql游标速度慢

> ID：10959879
> 
> 赞同：1
> 
> 时间：2012-06-09T09:33:16.950
> 
> 标签：android, sqlite

我在从数据库收集数据的活动中有此代码。活动开始需要 5 秒。没有这个，活动需要 2 秒才能打开。有没有办法优化这段代码？

所有数组（包括循环中的数组：arr_calllog_name0）在我的手机上有 61 个项目。在模拟器中它很快，有 6 个项目。

```
for (int i=0; i<arr_calllog_name0.size(); i++)
    {

        Cursor crname = info.getAllTitles_Stats2A(arr_calllog_name0.get(i), "1", d1, d2);
        crname.moveToFirst();
        count_in = crname.getInt(0);
        arr_calllog_numberin0.add(String.valueOf(count_in));

        Cursor crname2 = info.getAllTitles_Stats2A(arr_calllog_name0.get(i), "2", d1, d2);
        crname2.moveToFirst();
        count_out = crname2.getInt(0);
        arr_calllog_numberout0.add(String.valueOf(count_out));

        Cursor crname3 = info.sumAllTitles_StatsA(arr_calllog_name0.get(i), "1", d1, d2);
        crname3.moveToFirst();
        sum_in = crname3.getInt(0);
        arr_calllog_durationin0.add(String.valueOf(sum_in));

        Cursor crname4 = info.sumAllTitles_StatsA(arr_calllog_name0.get(i), "2", d1, d2);
        crname4.moveToFirst();
        sum_out = crname4.getInt(0);
        arr_calllog_durationout0.add(String.valueOf(sum_out));

    } 
```

info 被声明为`HotOrNot info = new HotOrNot(ChartsDuration.this);`其中 HotOrNot 是包含 DbHelper 的类扩展 SQLiteOpenHelper 类。

一个查询是（另一个几乎相同）

```
public Cursor getAllTitles_Stats2A(String name, String type, String date1, String date2) {
        return ourDatabase.rawQuery("SELECT COUNT(*) FROM " + DATABASE_TABLE + " WHERE " + KEY_DATE + " BETWEEN '" + date1 + "'" + " AND '" + date2 + "'" + " AND " + KEY_NAME + " = '" + name + "'" + " AND " + KEY_TYPE + " = '" + type + "'" + " COLLATE NOCASE", null);
    } 
```

DATABASE_TABLE 在我的手机上有 500 个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:05:47.427

永远不要以这种方式使用游标。游标很宝贵（实际上，游标是数据表而不是指针），因此，就 CPU 时间而言，创建它们的成本很高。您的示例有两个非常严重的问题。

1.  不要在 for 循环中运行查询
2.  完成后始终关闭光标

如果您可以找到使用 JOIN 的方法来完成此操作，那么您更有可能成功，但如果没有更多信息，则很难为您的问题提供更明确的解决方案。

# android - 安卓通行证列表 > 到新活动

> ID：10959880
> 
> 赞同：0
> 
> 时间：2012-06-09T09:33:29.597
> 
> 标签：android, android-intent

我在我的主类中定义了一个列表，我正在从 KSoap 响应中加载数据：

```
List<HashMap<String, String>> POIs= new ArrayList<HashMap<String, String>>(); 
```

我使用以下代码将条目添加到列表中：

```
for (int i = 0; i < response1.getPropertyCount(); i++) {            
  SoapObject response2 = (SoapObject) response1.getProperty(i);
  HashMap<String, String> map = new HashMap<String, String>();                  
  map.put("ID",response2.getProperty("CID").toString());
  map.put("Distance",response2.getProperty("distance").toString());
  map.put("SubLocality",response2.getProperty("SubLocality1").toString());
  POIs.add(map);
} 
```

我想知道如何将兴趣点列表放在一个意图上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:07:40.287

我使用 Bundle.putSerializable 传递列表，因为它不大（只有大约 10 个项目）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:35:22.650

`List`使用主类的对象访问您的。就那么简单。

# objective-c - UIScrollView 不显示滚动条（滚动指示器）

> ID：10959882
> 
> 赞同：2
> 
> 时间：2012-06-09T09:33:59.140
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview, uikit

我有 UIScrollView，我以编程方式填充 UIImageViews。之后，我更改了 scrollview 的 contentSize 以便可以滚动它。它工作正常，但我没有看到滚动条，这让我很困扰。我已经设置在 .xib 中显示它们，我什至以编程方式设置了“showHorizo​​ntalScrollIndicator”属性，但我仍然看不到滚动条。

有谁知道为什么我看不到滚动条以及如何使它们出现？

顺便说一句，我并不是说我不想一直看到它们，我只是想要标准行为，但即使我滚动它们也不会显示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:10:14.010

我正在删除子视图和滚动指示器。

我首先通过检查要删除的子视图的类型来修复它，然后我更改了逻辑并且根本没有删除子视图。

# sql - db2 合并似乎在正确的 where 子句上失败

> ID：10959884
> 
> 赞同：1
> 
> 时间：2012-06-09T09:34:08.523
> 
> 标签：sql, merge, db2

我需要将数据从一个表合并到另一个表。

数据通过平面文件传递。这就是为什么我在将其投入生产之前首先使用负载表的原因。

我向加载表添加了一个字段`loadtabletime`，因此我可以告诉 db2 一次只合并一个文件，即使一次在加载表中插入了多个文件。

负荷表是`loaddlp.reservation_insert`，生产表是`dlp.reservation`。

这是我的查询：

```
MERGE INTO DLP.RESERVATION AS E 
USING LOADDLP.RESERVATION_INSERT as et 
   on e.TICKET_SERVER = et.TICKET_SERVER 
  and e.RES_ID = et.RES_ID 
  and et.LOADTABLETIME = '2012-06-09 10:44:17.42236' 
 WHEN MATCHED THEN UPDATE SET (foo) = (bar) 
 WHEN NOT MATCHED THEN INSERT (xyz) VALUES (;akdjf) 
```

加载表的主键是`ticket_server`,`res_id`和`loadtabletime`; 对于 prod 表，它是`ticket_server`and `res_id`。

此查询失败并出现以下错误：

> 无法将阶段中的数据更新到生产表 RESERVATION。[[23505] [IBM][CLI Driver][DB2/LINUXX8664] SQL0803N INSERT 语句、UPDATE 语句或由 DELETE 语句引起的外键更新中的一个或多个值无效，因为主键、唯一约束或唯一由“1”标识的索引限制表“DLP.RESERVATION”具有索引键的重复值。SQLSTATE=23505

但是，当我`loadtabletime`从`where`子句中删除时，它会神奇地起作用。当然，这不是一个选项，因为当将多个文件加载到加载表中时，插入时可能会出现 pk 违规。

当我运行时：

```
SELECT count(*) 
  from loaddlp.reservation_insert 
 where LOADTABLETIME = '2012-06-09 10:44:17.42236'; 
```

我得到正确的结果。

有谁知道查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:59:50.213

好的，我解决了。

关键是在“使用”字段中添加了一个选择查询。

例子：

```
 MERGE INTO DLP.RESERVATION AS e
USING (select * from LOADDLP.RESERVATION_INSERT WHERE LOADTABLETIME = '2012-06-09 10:44:17.42236') as et 
   on e.TICKET_SERVER = et.TICKET_SERVER 
  and e.RES_ID = et.RES_ID  
 WHEN MATCHED THEN UPDATE SET (foo) = (bar) 
 WHEN NOT MATCHED THEN INSERT (xyz) VALUES (;akdjf) 
```

# php - 函数 session_is_registered() 如何被弃用？

> ID：10959889
> 
> 赞同：-1
> 
> 时间：2012-06-09T09:35:17.483
> 
> 标签：php, mysql, function

> 弃用：函数在第 45 行`session_is_registered()`被弃用`C:\xampp\htdocs\xxx\admin\adm_login.php`

```
if(!isset($_SESSION['user_id'])){tep_redirect("adm_home.php");} 
```

我正在使用管理面板，我只是为 admin panner 编写代码，但显示了一些错误。

在`session.php`函数中的某些部分没有被拒绝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:37:15.630

您需要使用类似的代码

```
if (isset($_SESSION['name'])) 
```

获取变量是否“注册”。

而且您不再需要使用`session_register()`，您可以像使用其他变量一样使用赋值：

```
$_SESSION['name'] = 'value'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:38:13.273

[`session_is_registered`](http://php.net/session_is_registered)自 PHP 5.3.0 起已弃用，并在 PHP 5.4.0 中删除。

早先你不应该`session_is_registered`与`$_SESSION`. 没有直接替代该函数的方法，因为它与会话内注册的全局变量有关，这在技术上是不可能的/现在已弃用。

[`isset`](http://php.net/isset)在[`$_SESSION`超全局](http://php.net/%24_SESSION)上使用来检查是否设置了会话中的变量：

```
if(isset($_SESSION['user_id'])) {
   ... 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:41:51.010

“您只需要设置和引用 $_SESSION 变量。” 例如：这个语句

if( isset($_SESSION[$variablename]) )

代替

if(session_is_registered($variablename))

# .net - .NET 合并类库引用

> ID：10959893
> 
> 赞同：2
> 
> 时间：2012-06-09T09:35:26.937
> 
> 标签：.net, ilmerge, fody-costura

我有一个包含 WPF 用户控件的类库。这个库有一些依赖项，但我想将它部署为一个程序集。据我所知，IlMerge 的 WPF 存在一些问题。我尝试了 Costura，但它仅适用于应用程序，不适用于类库（正如我在[这里](http://code.google.com/p/costura/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=28)发现的那样）。有什么方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T15:18:09.013

作为 Costura 的贡献者之一，我现在可以确认它适用于库和应用程序。

事实上，Costura 的所有单元测试都在一个库中，所以它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:45:41.490

看看[这个链接](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)。当我在某处读到时，即使是 ILMerge 的作者也告诉他，如果他知道那样的话，ILMerge 就不会存在。就我个人而言，我在 WinForms 项目中使用过它并且效果很好，尽管它[声明](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)它可以正确处理 WPF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T17:54:41.030

我知道已经回答了，但是要使用反射修复程序集的加载，您可以在 AssemblyLoad 事件中附加以下代码

```
var assembly = Assembly.LoadFile(@"<path to your dll>");
var assemblyLoaderType = assembly.GetType("Costura.AssemblyLoader", false);
var attachMethod = assemblyLoaderType?.GetMethod("Attach", BindingFlags.Static | BindingFlags.Public);
attachMethod?.Invoke(null, new object[] { }); 
```

# java - Spring中的休眠对象

> ID：10959898
> 
> 赞同：0
> 
> 时间：2012-06-09T09:36:04.623
> 
> 标签：java, spring, hibernate

我有一个关于 Hibernate 对象和使用它的 In Spring MVC Framework 的问题。我有两个对象：ManyToOne 关系中的类别和语言：

```
@ManyToOne
@JoinColumn(name="language_id")
public Language getLanguage() {
return language;
} 
```

我想创建操作，它使用所选语言创建新类别。我的表格如下所示：

```
<form:form modelAttribute="addCategory" name="frm" method="post">

<form:select path="language.id">
<form:options items="${languages}" itemValue="id" itemLabel="name" />
</form:select>

//Other Fields like name etc.

</form:form> 
```

在控制器 POST 方法中，我有：

```
@RequestMapping(method = RequestMethod.POST, value="/add_category")
public String addCategory(Category category){
//code for save, redirect etc.
} 
```

假设我选择一种 ID = 4 且名称为“English”的语言，该语言存在于数据库中。当我想在metod addCategory 中显示语言ID（通过**category.getLanguage().geiId()**）时，我的 ID = 4 正确，但是当我想通过**category.getLanguage().getName()**显示选择的语言名称时，我有无效的。

这可能是因为 Spring 对象类别对 Hibernate 中的关系一无所知。我使用 Hibernate 4、Spring 3，并使用 Spring Bean SessionFactory 连接到 Hibernate。

在 Spring 请求中是否有可能获得完整的递归对象？换句话说：类别中的语言（**category.getLanguage()**）将是 ID = 4 且名称为“English”的完整对象的情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:53:56.930

我有疑问为什么您需要在类别对象的语言对象中填写名称。因为当您尝试将类别对象存储在数据库中时，它只会被hibernate用作参考目的。

当您使用 hibernate 从数据库中获取类别对象时，它将返回包含具有 id 和值的语言对象的对象。

尽管如此，如果您无论如何都想显示名称，那么您需要使用从用户选择的jsp页面获取的ID来获取名称。然后将该名称设置在存储在您的类别对象中的对象中。否则，您需要在 jsp 中拥有另一个字段`path="language.name"`。

希望这对您有所帮助。干杯。

# windows-phone-7 - xml文件读取数据并将数据绑定到wp7应用程序中按钮单击事件的列表框控件

> ID：10959900
> 
> 赞同：0
> 
> 时间：2012-06-09T09:36:15.050
> 
> 标签：windows-phone-7

我对 WP7 应用程序开发和尝试读取 xml 文件数据并将其绑定到按钮单击事件上的列表框控件非常陌生。

有人可以帮我解决这个问题。

这是我的 xml 文件格式：当我们单击按钮时，我想将此 xml 的描述标记绑定到列表框控件。

```
<ROOT>
<COMPANY NAME="Mercedes Benz">
<Car NAME="A-Class—Hatchback">
<Description>
<![CDATA[ Mercedes Benz will launch the sporty A-Class hatchback, its entry level variant based on the MFA platform for the European market in September 2012.]]>
</Description> 
<COLOR>Red</COLOR>
<Car NAME="Mercedes-Benz G-Class">
<Description>
<![CDATA[ It's the midweek hump and for many a first day back to work, time to jump to action, here's a Mercedes-Benz G-Class in action to inspire to push on to the end of the week!]]>
</Description> 
<COLOR>BLACK</COLOR>
</COMPANY>
<COMPANY NAME="BMW">
<Car NAME="BMW X1">
<Description>
<![CDATA[ The sporty and elegant design of the all-new three-door model, along with additional engine choices, are distinguishing features that sharpen the unmistakable profile of the all-new BMW 1 Series (3-door) as the recognised standard of sheer driving pleasure in the premium compact car segment.]]>
</Description> 
<COLOR>BLUE</COLOR>
</COMPANY>
</ROOT> 
```

任何帮助或建议将不胜感激。

谢谢， 苏德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:52:47.700

看这个教程它会帮助你

[http://www.windowsphonegeek.com/tips/wp7-working-with-xml-reading-filtering-and-databinding](http://www.windowsphonegeek.com/tips/wp7-working-with-xml-reading-filtering-and-databinding)

# ruby - 我应该如何在开发过程中试用我的 gem？

> ID：10959904
> 
> 赞同：8
> 
> 时间：2012-06-09T09:36:35.210
> 
> 标签：ruby, gem, rake

假设我有一个名为 foo 的 gem，文件结构如下：

```
foo.gemspec
test_foo.rb
lib/foo.rb
lib/foo/file1.rb
lib/foo/file2.rb 
```

该文件`test_foo.rb`包含一些我用来试用我的 gem 的代码。它使用以下行访问 gem 的代码：

```
require './lib/foo' 
```

然后，`lib/foo.rb`访问 gem 所需的其他文件，如下所示：

```
require './lib/foo/file1'
require './lib/foo/file2' 
```

由于`test_foo.rb`位于 gem 目录的根目录中，因此需要`lib/foo`包含根目录的完整路径的文件。

这一切都很好，并且允许我通过更改`test_foo.rb`.

但是，如果我想构建 gem，那么我必须将调用更改为`require`，如下所示：

```
require 'foo/file1'
require 'foo/file2' 
```

代替

```
require './lib/foo/file1'
require './lib/foo/file2' 
```

每次我想构建 gem 时，这有点乏味。

所以，我想到了另一种尝试的方法，它是用来`rake`自动构建和安装 gem，如下所示：

```
task :build do
    `gem build foo.gemspec`
    `gem uninstall foo`
    `gem install ./foo-0.0.0.gem`
end 
```

然后当我对代码进行更改并想尝试一下时，只需运行并`rake build`调用`require 'foo'`.`test_foo.rb`

但这是一个相当缓慢的过程，感觉有点像它打破了 ruby​​ 作为一种语言的意义，在这种语言中，您不必在尝试之前构建代码。

所以，我的问题是，在积极开发 gem 并对其进行测试时，最好的工作流程是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T13:40:12.373

`require`为了使代码在不同的情况下运行（本地测试，“生产”作为 gem 等），必须弄乱源文件中的路径，这很容易出错并且令人困惑。

您可以使用一些技巧来“编写一次，随处运行”（对不起，Java，用于窃取）。这也是你应该追求的目标，使用这些标准实践可以让其他人更容易理解你的代码，或者在某些事情没有按预期工作时帮助你。

您的代码已经遵循通用 gem 目录布局，无需更改任何内容。但是，作为一般经验法则，您应该使用`require`加载“库”和`require_relative`（如果您使用 Ruby >1.9）加载与您正在处理的文件相关的源文件。

1）您的文件 test_foo.rb 应该只包含一行：

```
require 'foo' 
```

那就是你从 require 路径中省略了 './lib' 部分。gem 的入口点（“require_path”）通常选择为“lib”。稍后会详细介绍 (3)。

2) 接下来，在 foo.rb 中，使用`require_relative`（再次假设 Ruby 1.9）拉入相关源文件：

```
require_relative 'foo/file1'
require_relative 'foo/file2' 
```

3) 要将 gem 的 require_path 设置为 lib，最好添加 gemspec 文件。

要测试您的代码（例如使用您的 test_foo.rb），您有几个选项：

4) 您可以使用 ruby​​ 的选项运行 test_foo.rb 以`-I`在其加载路径中包含 lib/ 目录：

```
ruby -I lib test_foo.rb 
```

这比直接在代码中添加额外的包含要少得多。

5) [Bundler](http://gembundler.com/)是一种更好的方式来管理您的代码/gem，以便在“现实生活”条件下对其进行测试，特别是如果您同时开发两个或多个相互依赖的 gem。Bundler 为您提供了在本地引用这些 gem 的选项，因此无需正式部署它们即可在开发期间测试它们的功能。要使用 Bundler，您需要将 Gemfile 添加到 gem 代码的根目录中。

6) 最后，为方便起见，将开发过程中的常用步骤集成到 Rakefile 中是有意义的，使用 rake 来驱动流程。

我在自己的项目中经常使用这些技术，这里有一些链接供您参考，并提供一些具体示例：

1)[测试文件只包含一个“require 'foo'”](https://github.com/emboss/krypt/blob/master/test/scratch.rb)

2）[使用“主”文件中的“require_relative”来拉入后续部分](https://github.com/emboss/krypt/blob/master/lib/krypt.rb)

3)[示例 gemspec，require_path 设置为“lib”](https://github.com/emboss/krypt/blob/master/krypt.gemspec)

5)[示例 Gemfile](https://github.com/emboss/krypt/blob/master/Gemfile)

6)[示例 Rakefile](https://github.com/emboss/krypt/blob/master/Rakefile)

当然，您不需要使用所有这些技术，使用步骤 1-4 可能会很好，但是随着您的项目变得越来越大，额外的努力肯定会得到回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T10:03:25.787

添加`$:.unshift File.expand_path("./lib", __FILE__)`你的测试文件然后你可以使用

```
require 'foo/file1' 
```

更改“./lib”取决于您的文件夹结构

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-13T06:52:15.583

我知道这已经晚了几年，但由于在学习创建 gem 时，我的搜索结果中经常出现这个问题，所以我想我会添加它。

如果您使用 Bundler gem 生成器 ( `bundle gem my_gem_name`) 创建您的 gem，它将生成一个 ruby​​ 可执行文件，该可执行文件以您的 gem 加载`./bin/console`开始，而无需实际安装它。`irb`

# .net - 在 C# Windows 运行时组件中，如何警告开发人员不要将 == 与公共类一起使用？

> ID：10959905
> 
> 赞同：2
> 
> 时间：2012-06-09T09:36:45.893
> 
> 标签：.net, windows-runtime, c#-5.0

在编写**输出为 WinMD 格式**的 C# Metro DLL 时，我有一个公共类`Id`。虽然它会覆盖`Equals`，但不允许重载`==`。

然而，同样的类在 DLL 内部使用，并且不可避免地使用 LINQ，我发现自己在编写`.Where(x => x.Id == Ids.House)`这显然行不通。

一种可能的解决方案是定义一个`IdInternal`which 是内部的，并且可以覆盖`==`然后将其包装在一个`Id`.

如果没有该解决方案（我怀疑它必须发生在几个类中），有没有办法通过编译/运行时错误警告开发人员他们不应该使用 == 这个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:13:54.453

winmd 文件不支持运算符重载。编译器可能存在阻止它们阻止在 winmd 文件中使用运算符重载的错误，但您不能依赖该行为。

我认为 InternalId 和 Id 可能是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:11:50.773

我有个主意。假设你的 ID 是 Int。

创建一个新的自定义类型，将显式转换添加到 Int 运算符并使用 [Obsolete] 属性将其标记为结果并带有警告。

# ruby-on-rails - rails 协会 has_many_and_belongs_to

> ID：10959907
> 
> 赞同：0
> 
> 时间：2012-06-09T09:37:11.737
> 
> 标签：ruby-on-rails, associations

我有两个模型，用户和事件。我需要用户和事件之间的两种关系。

*   User (:as Organizer) <-------> 事件，多对多关系
*   用户（：作为参加者）<--------> 事件，多对多关系

我猜测是否可以使用两个不同的 has_many_and_belongs_to 关联与多态性来实现关系。我是 Rails 新手，因此我将不胜感激有关该问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:43:34.053

为此，您不需要多态关系。

要定义两个模型之间的两个关联，您可以执行以下操作：

```
class User 
  has_many :organized_events, foreign_key: :organizer_id, class_name: "Event"
  has_many :attended_events, foreign_key: :attendee_id, class_name: "Event"
end

class Event
  belongs_to :organizer, class_name: "User"
  belongs_to :attendee, class_name: "User"
end 
```

这将为您提供一对多的关系。

如果您需要多对多，则每个关联都需要一个连接表。

```
class User
  has_many :attendances, foreign_key: :attendee_id
  has_many :attended_events, through: :attendances
end

class Event
  has_many :attendances, foreign_key: :attended_event_id
  has_many :attendees, through: :attendances
end

class Attendance
  belongs_to :attended_event, class_name: "Event" 
  belongs_to :attendee, class_name: "User"        
end 
```

活动组织者协会也有类似的情况。

[在这里](https://stackoverflow.com/questions/10898602/how-to-set-up-multiple-aliased-joins-between-two-models)查看我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:55:42.557

正如我在评论中提到的，如果您的关系组织者和与会者可以同时存在于同一用户，您只需要多态关联。如果是这种情况，请使用多态关联，如果不是，您可以使用`has_many :through`关联或`has_and_belongs_to_many`关联。第一个更灵活，因为您有一个额外的模型，例如可以进行验证。

# android - Android - 在 onCreate() 中显示列表视图图像

> ID：10959908
> 
> 赞同：0
> 
> 时间：2012-06-09T09:37:14.010
> 
> 标签：android, listview, dynamic, resources

我想创建一个列表视图，在 onCreate() 方法中初始化时立即将图像添加到某些字段，我不知道该怎么做。

这是我的 onCreate() 方法的必要部分：

```
((ListView) findViewById(android.R.id.list)).setClickable(true);
    for(int i=0; i<num_enter; i++){
    adapter=new SimpleAdapter(this, listItems, R.layout.custom_row_view,new String[]{"name", "current", "image"},  new int[] {R.id.text1, R.id.text2, R.id.lockImage});
    setListAdapter(adapter);
    HashMap<String,String> temp = new HashMap<String,String>();
    temp.put("name", name[i]);

    SetSql getport = new SetSql(this);
    getport.open();
    int port = getport.getSingleProtect(i);
    getport.close();
    if(port==1){
        //THIS IS WHERE I WANT TO SET THE IMAGE

        temp.put("current", Integer.toString(current[i]));
    }else{
    temp.put("current", Integer.toString(current[i]));
    }
    listItems.add(temp);
    adapter.notifyDataSetChanged();
    }
    }else{
        ((ListView) findViewById(android.R.id.list)).setClickable(false);
        adapter=new SimpleAdapter(this, listItems, R.layout.custom_row_view,new String[]{"name", "current"},  new int[] {R.id.text1, R.id.text2});
        setListAdapter(adapter);
        HashMap<String,String> temp = new HashMap<String,String>();
        temp.put("name", "You have no enteries yet!");
        temp.put("current", "");
        listItems.add(temp);
        adapter.notifyDataSetChanged();
    } 
```

这是我的custome_row_view.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<ImageView 
android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:id="@+id/lockImage"
/>

<TextView android:id="@+id/text1" 
android:textSize="25dp"  
android:textStyle="bold"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/>

<TextView android:id="@+id/text2"
android:textSize="25dp" 
android:layout_marginTop="5dp"
android:layout_width="wrap_content" 
android:layout_height="fill_parent"
android:layout_alignParentRight="true"/>

</RelativeLayout> 
```

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:09:41.027

我认为您应该在要添加图像的记录中创建新的 xml 文件。你的`listView`喜欢`category ListView`。我对你有一个理想

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;
     convertView = null;
    holder = new ViewHolder();
    int port = getport.getSingleProtect(position);
    if(port==1){
    //INFLATE YOUR IMAGE
        convertView = inflater.inflate(INFLATE_YOUR_IMAGES, null);
        convertView.setTag(holder);
        .......................

    }else {
        .................
        //INFLATE AS NORMAL
    }

    return convertView;
} 
```

# regex - 在可可中解析 URL

> ID：10959911
> 
> 赞同：0
> 
> 时间：2012-06-09T09:37:47.687
> 
> 标签：regex, cocoa, parsing, url

网址是：`http://oauth.vk.com/blank.html#access_token=244832666b8168a3mna06f03f5324789a8022455245532b032375f193ceab923&expires_in=86400&user_id=191742`

如何在 Cocoa 中解析它并得到`access_token`and `user_id`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:58:49.827

有一种`-fragment`方法在 .`NSURL`之后返回字符串`#`。

这是有用的。这是非常基本的，不支持实体（如`&amp;`），它只是将字符串拆分`&`然后拆分`=`。

```
@interface NSURL (SYBasicKeyValueParsing)
- (NSDictionary *)sy_keysAndValuesOfString:(NSString *)string;
- (NSDictionary *)sy_keysAndValuesOfFragment;
- (NSDictionary *)sy_keysAndValuesOfQuery;
@end

@implementation NSURL (SYBasicKeyValueParsing)

- (NSDictionary *)sy_keysAndValuesOfString:(NSString *)string
{
    if (!string) return nil;

    NSMutableDictionary *result = [NSMutableDictionary dictionary];

    for (NSString *pair in [string componentsSeparatedByString:@"&"]) {
        NSArray *keyAndValue = [pair componentsSeparatedByString:@"="];
        if ([keyAndValue count] == 2) {
            [result setObject:[keyAndValue objectAtIndex:1] forKey:[keyAndValue objectAtIndex:0]];
        }
    }
    return [[result copy] autorelease];
}

- (NSDictionary *)sy_keysAndValuesOfFragment
{
    return [self sy_keysAndValuesOfString:[self fragment]];
}

- (NSDictionary *)sy_keysAndValuesOfQuery
{
    return [self sy_keysAndValuesOfString:[self query]];
}

@end 
```

因此`sy_keysAndValuesOfFragment`，您的 URL 将导致以下结果：

```
{
    "access_token" = 244832666b8168a3mna06f03f5324789a8022455245532b032375f193ceab923;
    "expires_in" = 86400;
    "user_id" = 191742;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:13:56.597

有一个解析 URL 的类：[NSURL](http://developer.apple.com/library/ios/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)。如果这还不够，您可以使用NSString 类的[componentsSeparatedByString方法获取参数。](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# google-app-engine - 用于动态 html 的 GO 模板

> ID：10959912
> 
> 赞同：0
> 
> 时间：2012-06-09T09:38:08.300
> 
> 标签：google-app-engine, templates, go

谁能告诉我如何使用 GO 模板在[https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps上编写简单的页面，如 guestbook.jsp？](https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps)

在我看来，编写一个有效的程序很容易，但我想知道它是否可以像 JSP 页面一样简洁。

有两个问题不知道怎么解决

1.  JSP 页面使用两个对象用户和请求，而模板创建只需要一个。
2.  如果我们使用单独的模板来生成退出链接和留言簿，那么我们如何将它们嵌套在主页中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T12:53:39.053

我所做的是创建一个结构（我称之为“页面”对象），用我需要的实体填充它，然后在模板中对它们进行操作。

```
func myPage(w http.ResponseWriter, r *http.Request) {
    var user *User // fetch from somewhere

    page := struct {        
        Title     string
        User      *User
    }{"My title", user}

    return templates.ExecuteTemplate(w, "myPage", page)
} 
```

模板看起来像这样，让您可以访问结构中的所有字段：

```
{{define "myPage"}}
{{template "head" .}}

Title: {{.Title}}<br />
Name: {{.User.Name}}<br />

{{template "tail" .}}
{{end}} 
```

（请注意，这`{{template "head" .}}`将包括另一个模板，这里是页眉和页脚。）

我经常使用的另一件事是模板中的变量。您可以使用美元符号定义变量。

下面的例子不是很优雅，但可以让你知道什么是可能的。假设我们有三个切片：一个带有“ `User`”对象，一个带有“ `Spot`”对象，一个带有“ `Checkin`”对象。它们都是相同的长度并按位置相关（每个索引 0 包含签入的用户、他/她签入的地点，签入对象包含它发生的时间）。“范围”将在遍历切片时为您提供两个变量：索引（`$i`在示例中）和值（`$v`）。使用“索引”，您可以请求切片中的实体，因此`{{$user := index $checkinUsers $i}}`将在 $i 指向的位置处为您提供对象。

```
{{$checkinUsers := .CheckinUsers}}
{{$checkinSpots := .CheckinSpots}}
{{range $i, $v := .Checkins}}
    {{$user := index $checkinUsers $i}}
    {{$spot := index $checkinSpots $i}}
    <tr>
        <td>
            {{$user.FirstName}} {{$user.LastName}} @ {{$spot.Description}} ({{$v.Time}})<br />
        </td>
    </tr>
    {{end}} 
```

同样，这个例子不是很优雅，但我希望你能看到在 Go 中创建动态 HTML 就像在 JSP 中一样容易（我的经验是生成的页面比 JSP 更干净，因此更易于理解）经验较少的 Web 开发人员和设计师）。

前动画，/Alexander Yngling。

# jquery - Jquery form.submit 不工作

> ID：10959915
> 
> 赞同：3
> 
> 时间：2012-06-09T09:38:19.247
> 
> 标签：jquery

我有这样的代码，如果代码存在表单不提交，它会检查代码可用性

我的代码不起作用

```
<script type="text/javascript">
$(document).ready(function() {
    $('#Loading').hide();
            var min_chars = 3;  
            //result texts  
            var characters_error = 'Minimum amount of chars is 3';  
            var checking_html = 'Checking...';      

        $('#reality_form').submit(function(){

            if($('#realitycode').val().length < min_chars){
                $('#Info').html(characters_error);  
            }else{  
                //else show the cheking_text and run the function to check  
                    $('#Info').html(checking_html);  
                        var reltcode = $('#realitycode').val();  

                //use ajax to run the check  
                $.post("http://localhost/Testtt/wp-content/plugins/Realestate Redirection/check_realitycode_availablity.php", { realitycode: reltcode },

                 function(result){  
                    //if the result is 1  
                    if(result == 1){  
                        //show that the username is available
                        alert('hi');  
                        $('#Info').html(reltcode + ' is Available'); 

                    }else{  
                        alert('hello'); 
                        $('#Info').html(reltcode + ' is not Available');

                    } 

                }); 
           return false;    
            }

    });  

 }); 

</script>
<div class="wrap"> 
            <?php    echo "<h2>" . __( 'RealEstate Listing Options', 'oscimp_trdom' ) . "</h2>"; ?>
            <form action="" name="reality" method="post" id="reality_form">
            <input type="hidden" name="reality_hidden" value="Y">  
            Website Url:<input type="text" name="website_url" value="" />
            Listing Code: <input type="text" name="rlt_code" id="realitycode" />
            <input type="submit" name="submit" value="submit" />
            <div id="Info"></div>
            <span id="Loading"><img src="http://localhost/Testtt/wp-content/plugins/Realestate Redirection/loader.gif" alt="" /></span>

            </form>
</div> 
```

当我在控制台上查看时，Ajax url 变为错误，但是当我使用`realitycode keyup()`函数时，Ajax 可以正常工作。如果有任何错误，我希望表单不应该提交。但表格在每种情况下都提交请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:43:50.780

使用 .click 事件而不是提交。然后，如果表单有效，请在代码中调用提交自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:40:31.650

> 如果有任何错误，我希望表单不应该提交。但表格在每种情况下都提交请帮助

放在函数`return false`的***末尾***：`$('#reality_form').submit()`

```
$('#reality_form').submit(function(){
   // your other code
   return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:46:19.773

对您的代码进行以下更改：

```
 <script type="text/javascript">
   var validated = false;
    $(document).ready(function() {

        $('#Loading').hide();
                var min_chars = 3;  
                //result texts  
                var characters_error = 'Minimum amount of chars is 3';  
                var checking_html = 'Checking...';      

            $('#reality_form').submit(function(){
                if(validated)
                    return true;
                if($('#realitycode').val().length < min_chars){
                    $('#Info').html(characters_error);  
                }else{  
                    //else show the cheking_text and run the function to check  
                        $('#Info').html(checking_html);  
                            var reltcode = $('#realitycode').val();                   

                    //use ajax to run the check  
                    $.post("http://localhost/Testtt/wp-content/plugins/Realestate Redirection/check_realitycode_availablity.php", { realitycode: reltcode },

                     function(result){  
                        //if the result is 1  
                        if(result == 1){  
                            //show that the username is available
                            alert('hi');  
                            $('#Info').html(reltcode + ' is Available'); 
                            //do nothing

                        }else{  
                            alert('hello'); 
                            $('#Info').html(reltcode + ' is not Available');
                            validated = true;
                            $('#reality_form').submit();
                        }   
                    }); 
                  return false;    
                }

        });      

     }); 

    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T10:31:38.660

防止提交的另一种方法是使用以下代码：

```
$('#reality_form').submit(function(e){

    e.preventDefault(); 
```

在 jQuery 中，每个处理程序都接收事件对象作为第一个参数，并且该对象具有`prevetDefault()`抑制默认行为的方法。它可以用于任何类型的事件，例如元素`click`上。`<a>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-25T11:44:05.947

我想出了同样的问题。解决方案是...

```
Dont use name="submit"
<input type="submit" name="submit" value="submit" />

Instead
<input type="submit" name="anyOtherName" value="submit" /> 
```

# c++ - C++：在开关中调用类函数

> ID：10959916
> 
> 赞同：0
> 
> 时间：2012-06-09T09:38:24.960
> 
> 标签：c++, class, switch-statement, instance

我一直在尝试通过练习类和继承来学习我的期末考试，这是我迄今为止为继承提出的想法，但是我不确定如何解决下面发生的错误。

```
#include<iostream>
#include<iomanip>
#include<cmath>
#include<string.h>
using namespace std;

//BASE CLASS DEFINITION

class hero
{     
 protected:
            string name;
            string mainAttr;
            int xp;
            double hp;
            double mana;
            double armour;
            int range;
            double attkDmg;
            bool attkType;
  public:
         void dumpData();
         void getName();
         void getMainAttr();
         void getAttkData();
         void setAttkData(string);
         void setBasics(string, string, double, double, double);
         void levelUp();
};

//CLASS FUNCTIONS

void hero::dumpData()
{
 cout << "Name: " << name << endl;
 cout << "Main Attribute: " << mainAttr << endl;
 cout << "XP: " << xp << endl;
 cout << "HP: " << hp << endl;
 cout << "Mana: " << mana << endl;
 cout << "Armour: " << armour << endl;
 cout << "Attack Range: " << range << endl;
 cout << "Attack Damage: " << attkDmg << endl;
 cout << "Attack Type: " << attkType  << endl << endl;
}

void hero::getName()
{
     cout << "Name: " << name << endl;
}

void hero::getMainAttr()
{
     cout << "Main Attribute: " << mainAttr << endl;
}

void hero::getAttkData()
{
     cout << "Attack Range: " << range << endl;
     cout << "Attack Damage: " << attkDmg << endl;
     cout << "Attack Type: " << attkType  << endl;
}

void hero::setAttkData(string attr)
{
     int choice = 0;

     if (attr == "Strength")
 {
          choice = 1;
 }
 if (attr == "Agility")
 {
          choice = 2;
 }
 if (attr == "Intelligence")
 {
          choice = 3;
 }

 switch (choice)
 {
        case 1:
             range = 128;
             attkDmg = 80.0;
             attkType = 0;
             break;

        case 2:
             range = 350;
             attkDmg = 60.0;
             attkType = 0;
             break;

        case 3:
             range = 600;
             attkDmg = 35.0;
             attkType = 1;
             break;

        default:
                break;
 }
}

void hero::setBasics(string heroName, string attribute, double health, double mp, double armourVal)
{
     name = heroName;
     mainAttr = attribute;
     hp = health;
     mana = mp;
     armour = armourVal;
}

void hero::levelUp()
{
     xp = 0;
     hp = hp + (hp * 0.1);
     mana = mana + (mana * 0.1);
     armour = armour + ((armour*0.1) + 1);
     attkDmg = attkDmg + (attkDmg * 0.05);
}

//INHERITED CLASS DEFINITION

class neutHero : protected hero
{
      protected:
            string drops;
            int xpGain;
      public:
         int giveXP(int);
         void dropItems();
};

//INHERITED CLASS FUNCTIONS

int neutHero::giveXP(int exp)
{
    xp += exp;
}

void neutHero::dropItems()
{
     cout << name << " has dropped the following items: " << endl;
     cout << drops << endl;
}

/*
  END OF OO!
*/

//FUNCTION PROTOTYPES
    void dispMenu();

int main()
{
    int exit=0, choice=0, mainAttrChoice=0, heroCreated=0;
    double health, mp, armourVal;
    string heroName, attribute;

    do
    {
      dispMenu();
      cin >> choice;

      switch (choice)
      {
      case 1:
           system("cls");
           cout << "Please enter your hero name: ";
           cin >> heroName;
           cout << "\nPlease enter your primary attribute\n";
           cout << "1\. Strength\n" << "2\. Agility\n" << "3\. Intelligence\n";
           cin >> mainAttrChoice;
           switch (mainAttrChoice)
           {
              case 1:
                   attribute = "Strength";
                   health = 750;
                   mp = 150;
                   armourVal = 2;
                   break;

              case 2:
                   attribute = "Agility";
                   health = 550;
                   mp = 200;
                   armourVal = 6;
                   break;

              case 3:
                   attribute = "Intelligence";
                   health = 450;
                   mp = 450;
                   armourVal = 1;
                   break;
              default:
                   cout << "Choice invalid, please try again.";
                   exit = 1;
                   break;

       hero player;
       player.setBasics(heroName, attribute, health, mp, armourVal);
       player.setAttkData(attribute);
       heroCreated=1;
       system("cls");
       cout << "Your hero has been created!\n\n";
       player.dumpData();
       system("pause");

       break;

      } 
  case 2:
       system("cls");
       if (heroCreated == 1)
       {
          cout << "Your hero has been detailed below.\n\n";
          **player.dumpData(); //ERROR OCCURS HERE !**
          system("pause");
       }
       else
       {
           cout << 
           "You have not created a hero please exit this prompt "
           "and press 1 on the menu to create a hero.";
       }
       break;

  case 3:
       system("cls");
       cout << "Still Under Development";
       system("pause");
       break;

  case 4:
       system("cls");
       exit = 1;
       break;

  default:
       cout << "Your command has not been recognised, please try again.\n";
       system("pause");
       break;
  }
}
while (exit != 1);

system("pause");
return 0;

}

void dispMenu()
{
     system("cls");
     cout <<
     "1\. Create New Hero\n"
     "2\. View Current Hero\n"
     "3\. Fight Stuff\n"     
     "4\. Exit\n\n"     
     "Enter your choice: ";
} 
```

但是在编译时我得到以下错误：

```
220 `player' undeclared (first use this function) 
```

不确定如何修复它，因为我最近才开始使用 OO 方法。该错误在上面有一个注释，主要是案例 2。

干杯，伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:43:27.577

```
switch (choice)
{
    case 1:
    {
        hero player;
        ...
    }
    case 2:
        player.dumpData(); //ERROR OCCURS HERE ! 
```

`player`是一个具有自动存储持续时间的局部变量，它的生命周期与`case 1`. 您必须在`player`之前声明`switch (choice)`才能在所有情况下使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:41:18.530

如果您希望所有案例都能够访问该信息，则该案例的范围内没有`player`变量，您需要在整个 switch 子句之前定义一个变量。`player`因此，您还需要在调用方法之前检查变量是否为 NULL 或对象是否实际创建，因为它因此不能保证它是必要的。

通过这样做，您将变量`player`带入范围，以便所有案例都可以看到它：

```
hero player;
switch () {
    case 1:
        player.dostuff();
        break;
    case 2:
        player.domorestuff();
        break;
} 
```

如果你这样做

```
switch () {
    case 1:
        player.dostuff();
        hero player;
        break;
    case 2:
        player.domorestuff();
        break;
} 
```

那么案例 2 在您的代码中没有英雄播放器（假设案例类似于 if/else 子句），因为您的案例周围有大括号，所以更加明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:42:23.597

是的，您不能在 switch-case 块内创建对象并期望它们存在于外部。这是一个范围问题。你可以在 switch-case 之外声明它，或者使用单例模式（如果你只有一个玩家）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T09:54:43.373

您放错了一个大括号，这使事情变得混乱。您的`mainAttrChoice`开关末端没有支架，即在其`default`外壳中断之后。这意味着您的`player`变量实际上是`default`在 switch 的 case范围内定义的`mainAttrChoice`。顺便说一句，这也意味着您的外部开关的第一个案例没有`break`. 代码的缩进具有误导性。

该默认 case 语句的范围，实际上是任何一般的 case 语句，都是 switch 所在的范围，即它们都共享相同的范围。尽管如此，您不能在一种情况下定义变量并使其在另一种情况下可用。为什么？好吧，每个 case 语句都只是定义了 switch 范围内的一个点，您可以跳转到该点。如果您可以跳转到它，那么您可以在早期情况下跳过变量的初始化。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement)。

如果您想跨 case 语句访问相同的变量，那么它必须在 switch 之外声明。要声明 case 语句的局部变量，您需要使用花括号创建范围。看来您在声明时没有使用花括号，`hero` `player`因为它是 switch 中的最后一个 case 语句（我猜是因为我现在手头没有编译器）。

# opencart - 如何在 OpenCart 中显示公司名称和公司徽标

> ID：10959921
> 
> 赞同：1
> 
> 时间：2012-06-09T09:39:00.610
> 
> 标签：opencart

如何在前端显示商店名称和徽标？

实际上，无论我写什么，我都想显示我的公司名称和徽标`system->settings->General (store name)`。如果我更新此内容，则仅显示徽标，但不显示商店名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:26:54.783

店铺名称

```
<?php echo $this->config->get('config_name'); ?> 
```

标识

```
<?php echo HTTP_IMAGE . $this->config->get('config_logo'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T01:17:04.813

您实际上需要编辑代码

文件：upload/catalog/view/theme/default/template/common/header.tpl

定位：

```
<?php if ($logo) { ?>
<div id="logo"><a href="<?php echo $home; ?>"><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
<?php } ?> 
```

代替：

```
<?php if ($logo) { ?>
<div id="logo"><a href="<?php echo $home; ?>"><?php echo $this->config->get('config_name'); ?><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
<?php } ?> 
```

# java - 将数据库表结果转换为 XML - 如何生成 XML 文档

> ID：10959924
> 
> 赞同：2
> 
> 时间：2012-06-09T09:39:20.610
> 
> 标签：java, xml, xsd, xml-serialization

我有一个查询，当运行时返回一个结果集，其中显示的顺序和分组中包含以下数据：

```
Country     Region      Town
---------------------------------------
England     North       NewCastle
England     North       Manchester
England     North       Leeds
England     South       London
England     South       Bristol
England     South       Birmingham
England     South       Portsmouth
Norway      North       Trondheim
Norway      North       Tromso
Norway      South       Oslo
Norway      South       Stavanger
Norway      West        Bergen 
```

使用 Java，我想将返回的结果转换为 XML 文档，如下所示：

```
<countries>
    <country>
        <countryName>England</countryName>
        <region name = "south">
            <town>London</town>
            <town>Bristol</town>
            <town>Birmingham</town>
            <town>Portsmouth</town>
        </region>
        <region name = "north">
            <town>NewCastle</town>
            <town>Leeds</town>
        </region>
    <country>
        <country>
        <countryName>Norway</countryName>
        <region name = "south">
            <town>Oslo</town>
            <town>Stavanger</town>
        </region>
        <region name = "west">
            <town>Bergen</town>
        </region>
        <region name = "North">
            <town>Trondheim</town>
            <town>Tromso</town>
        </region>       
    <country>
<countries> 
```

遍历数据以便在正确位置创建和关闭标签的最佳方法是什么？我在这里看到了一个例子[http://www.mkyong.com/java/how-to-create-xml-file-in-java-jdom-parser/](http://www.mkyong.com/java/how-to-create-xml-file-in-java-jdom-parser/)但是数据的结构是平坦的，不像我使用的样本这可能需要多个循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-13T07:21:52.050

通过更改特定位置提到的属性检查此代码一次

```
 package com.annexure.main;

    import java.io.File;
    import java.io.FileWriter;
    import java.nio.file.FileAlreadyExistsException;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.Statement;

    import org.w3c.dom.Document;
    import org.w3c.dom.Element;

    import com.sun.org.apache.xerces.internal.dom.DocumentImpl;
    import com.sun.org.apache.xml.internal.serialize.OutputFormat;
    import com.sun.org.apache.xml.internal.serialize.XMLSerializer;
    /* JDBC Classes*/
    /* Java IO */
    /* W3C Interfaces */
    /* Xerces DOM Classes */
    /* Xerces Serializer */

    public class XmlMain { 

      public static final String JDBCURL = "oracle.jdbc.driver.OracleDriver"; 
      public static final String JDBCDRIVER ="jdbc:oracle:thin:@localhost:1521:xe"; 
      public static final String SQL = "select empid, empname, role from employee"; 
      public static String OUTPUTFILE = "D:employee.xml"; 
//replace file with Country.xml

      public static void main(String[] args) { 

        try{ 

        /** Step 1 : Making a JDBC Connection with database" **/ 
        Class.forName(JDBCURL) ;
        Connection conn = DriverManager.getConnection(JDBCDRIVER,"system","root"); 

        /** Step 2 : Retrieve the customer data from database **/ 
        Statement statement = conn.createStatement(); 
        ResultSet employeeRS = statement.executeQuery(SQL); 

        /** Step 3 : Build customer XML DOM **/ 
        Document xmlDoc = buildEmployeeXML(employeeRS);

        /** Step 4 : Write output to a file **/ 
        File outputFile = new File(OUTPUTFILE); 
        printDOM(xmlDoc, outputFile); 

        conn.close(); /*Connection close*/ 
        } catch(FileAlreadyExistsException f){
            System.out.println("file alread present at this location");
        }
        catch(Exception e) 
        { 
          System.out.println("Really poor exception handling " +e.toString()); 
        }
      }//Main 

      /*Build XML DOcument from database. The XML object is returned to main method where it is written to flat file.*/ 
      private static Document buildEmployeeXML(ResultSet _employeeRS) throws Exception 
      { 

      Document xmlDoc = new DocumentImpl(); 

      /* Creating the root element */ 
//replace employeetable with countries to set a countries tag
      Element rootElement = xmlDoc.createElement("EmployeeTable"); 
      xmlDoc.appendChild(rootElement); 

      while(_employeeRS.next()) 
       { 

        Element emp = xmlDoc.createElement("employee");
//replace employee with country for country tag

        /* Build the CustomerId as a Attribute*/ 
        emp.setAttribute("empid", _employeeRS.getString("empid")); 

        /* Creating elements within customer DOM*/ 
        Element empName = xmlDoc.createElement("empname"); 
        Element role = xmlDoc.createElement("role"); 

        /* Populating Customer DOM with Data*/ 
        empName.appendChild(xmlDoc.createTextNode(_employeeRS.getString("empname"))); 
        role.appendChild(xmlDoc.createTextNode(_employeeRS.getString("role"))); 

        /* Adding the empname and role elements to the employee Element*/ 
        emp.appendChild(empName); 
        emp.appendChild(role); 

        /* Appending emp to the Root Class*/ 
        rootElement.appendChild(emp); 
       } 
      return xmlDoc; 
      } 

      /* printDOM will write the contents of xml document passed onto it out to a file*/ 
      private static void printDOM(Document _xmlDoc, File _outputFile) throws Exception 
      { 
        OutputFormat outputFormat = new OutputFormat("XML","UTF-8",true); 
        FileWriter fileWriter = new FileWriter(_outputFile); 

        XMLSerializer xmlSerializer = new XMLSerializer(fileWriter, outputFormat); 

        xmlSerializer.asDOMSerializer(); 

        xmlSerializer.serialize(_xmlDoc.getDocumentElement()); 
      } 

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:44:04.570

如果不想解析 xml，则使用字符串缓冲区动态构造 XML。例如：

不决定根，并迭代你的结果集

```
StringBuffer sb = new StringBuffer();
for(int i =0 ; i<size of your result set; i++)
sb.append("<CountryNamString>"+s.getString(0)+"<regionName>"+rs.getString(1)+"<townName>"+rs.getString(2)+"</townName>"); 
```

这只是一个例子。您可以改进它。

# git - “提交您的更改或存储它们”是什么意思？

> ID：10959928
> 
> 赞同：11
> 
> 时间：2012-06-09T09:39:46.343
> 
> 标签：git, version-control

我在我曾经提交和推送的 GIT 存储库中有我的分支。但是今天我看到一个不同的程序员提交并推送到我的分支。现在，当我尝试拉出最新的分支时，GIT 完成了一半，然后给出错误“要么提交您的更改或存储它们”。我不知道这意味着什么，我不想在他对我的分支进行最新更改之前做出承诺。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T09:44:46.173

这意味着您有未提交的更改，这会阻止您拉动。

你可以通过提交或[隐藏](http://git-scm.com/book/en/Git-Tools-Stashing)它们来解决它。就像错误消息说的那样。

（顺便说一句，您通常通过提出精确的问题来获得更好的答案。如果您想知道是什么`git stash`，就问*那个*。简单地问“我如何解决 Git 告诉我提交或存储的问题”只会导致类似“你应该提交或隐藏”。

Git 本身已经回答了你的问题。如果您不理解*该*答案，请询问您不理解的部分。

# android - 更改列表视图中的背景颜色（可扩展列表视图）

> ID：10959932
> 
> 赞同：0
> 
> 时间：2012-06-09T09:41:06.990
> 
> 标签：android, android-layout

我正在尝试在列表视图的一部分中动态更改背景颜色，我有一个示例，当我尝试使用可扩展列表视图将其复制到另一部分时，它在列表视图中运行良好，但它失败了

如果学生在线或不在线，这段代码可以工作并显示不同的颜色

...

```
map.put(KEY_FIRSTNAME, temp.firstName);
map.put(KEY_NAME, temp.name);
map.put(KEY_EMAIL, temp.email);
map.put(KEY_ISONLINE, temp.isOnLine);

// change image if student is online or not
Log.d("demo", "is on line= " + temp.isOnLine);
if (temp.isOnLine.equalsIgnoreCase("1")) {
    map.put(KEY_IMAGE_ISONLINE, R.color.greenColor);
} else {
    map.put(KEY_IMAGE_ISONLINE, R.color.greyColor);
}
listItem.add(map);
}
myListView = (ListView) findViewById(R.id.listViewTabLeerlingen);

SimpleAdapter adapter = new SimpleAdapter(StudentTab.this,
    listItem,
    R.layout.list_item_student,
    new String[] { KEY_FIRSTNAME, KEY_NAME,
    KEY_IMAGE_ISONLINE }, new int[] {
    R.id.firstNameTextView,
    R.id.lastNameTextView,
    R.id.logo });
    myListView.setAdapter(adapter); 
```

随之而来的xml

```
<ImageView
            android:id="@+id/logo"
            android:layout_width="85dp"
            android:layout_height="match_parent"
            android:background="@color/greenColor"
            android:contentDescription="Image if student is online or not"
            android:src="@drawable/transparent_pixel" /> 
```

上面的工作正常但是下面的代码（只是代码的一部分）

...

```
ArrayList<Map<String, Object>> children = new ArrayList<Map<String, Object>>();
for (int i = 0; i < _data.length(); i++) {
try {   
   JSONArray tmp = _data.getJSONArray(i);
        HashMap<String, Object> map = new HashMap<String, Object>();

    // change image if student is online or not
    if (tmp.getString(3).equalsIgnoreCase("0")) {
        map.put(KEY_POINTS,R.color.redColor);
    }else{
        map.put(KEY_POINTS,R.color.greenColor);
    }
        map.put(KEY_QUESTIONTEXT, tmp.getString(1)); 
        map.put(KEY_ANSWER, tmp.getString(2));
        children.add(map);
    } 
catch (JSONException e) {
    e.printStackTrace();
}
childData.add(children); 
```

...

...

```
ArrayList<ArrayList<Map<String, Object>>> childData) {
            SimpleExpandableListAdapter listAdapter = new SimpleExpandableListAdapter(
                    this, groupData, R.layout.list_item_results_students,
                    new String[] { KEY_FIRSTNAME, KEY_NAME, KEY_ISJUIST },
                    new int[] { R.id.firstnameResults, R.id.nameResults,
                            R.id.resultsTextView }, childData,
                    R.layout.list_item_results_results, new String[] {
                            KEY_QUESTIONTEXT, KEY_ANSWER, KEY_POINTS }, new int[] {
                            R.id.questionTextView, R.id.answerTextTextView, R.id.score });
            ExpandableListView myListView = (ExpandableListView) findViewById(R.id.listViewTabResultaten);
            myListView.setAdapter(listAdapter); 
```

使用 xml：

```
<ImageView
        android:id="@+id/score"
        android:layout_width="16dp"
        android:layout_height="match_parent"
        android:background="@color/greenColor"
        android:contentDescription="Image if student has correct answer"
        android:src="@drawable/transparent_pixel" /> 
```

我会收到这个错误：

06-09 10:35:21.490: E/AndroidRuntime(4406): java.lang.ClassCastException: android.widget.ImageView 不能转换为 android.widget.TextView

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:37:33.790

`SimpleExpandableListAdapter`各州的文档

> childTo 应在“childFrom”参数中显示列的子视图。这些都应该是 TextViews。此列表中的前 N ​​个视图被赋予 childFrom 参数中前 N 列的值。

所以`SimpleExpandableListAdapter`唯一接受的`TextView`类。文档`SimpleAdapter`中对. [_](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/SimpleAdapter.java#SimpleAdapter.bindView)`ImageView`

因此，您的第一个示例有效，但第二个示例抛出`ClassCastException`.

要修复它，您可以覆盖此旧[StackOverflow 问题](https://stackoverflow.com/questions/1353101/about-expandable-list-in-android)`SimpleExpandableListAdapter`中所示的行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:15:32.677

在 SimpleExpandableListAdapter 的构造函数中，childTo 参数包含您的 ImageView 项目，@+id/score。childTo 数组应该只包含 TextViews。您正在尝试将颜色 int 分配给图像。

[SimpleExpandableListAdapter 参考](http://developer.android.com/reference/android/widget/SimpleExpandableListAdapter.html#SimpleExpandableListAdapter%28android.content.Context,%20java.util.List%3C?%20extends%20java.util.Map%3Cjava.lang.String,%20?%3E%3E,%20int,%20java.lang.String%5B%5D,%20int%5B%5D,%20java.util.List%3C?%20extends%20java.util.List%3C?%20extends%20java.util.Map%3Cjava.lang.String,%20?%3E%3E%3E,%20int,%20java.lang.String%5B%5D,%20int%5B%5D%29)

上面使用@+id/logo 的SimpleAdapter 实际上也是如此。

[简单适配器参考](http://developer.android.com/reference/android/widget/SimpleAdapter.html#SimpleAdapter%28android.content.Context,%20java.util.List%3C?%20extends%20java.util.Map%3Cjava.lang.String,%20?%3E%3E,%20int,%20java.lang.String%5B%5D,%20int%5B%5D%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T10:41:14.320

参数

context 与此 SimpleExpandableListAdapter 关联的 ExpandableListView 正在运行的上下文 groupData 一个地图列表。列表中的每个条目对应于列表中的一个组。Maps 包含每个组的数据，并且应该包括定义组视图的视图布局的“groupFrom”groupLayout 资源标识符中指定的所有条目。布局文件应至少包括在“groupTo”中定义的命名视图 groupFrom 将从与每个组关联的 Map 中获取的键列表。groupTo 应该在“groupFrom”参数中显示列的组视图。这些都应该是 TextViews。此列表中的前 N ​​个视图被赋予 groupFrom 参数中前 N 列的值。childData 地图列表列表。外部List中的每个条目对应一个组（按组位置索引），内部列表中的每个条目对应于组内的一个子项（按子位置索引），Map对应一个子项的数据（按组位置索引） childFrom 数组中的值）。Map 包含每个孩子的数据，并且应该包括定义孩子视图的视图布局的“childFrom”childLayout 资源标识符中指定的所有条目。布局文件应至少包括在“childTo”中定义的命名视图 childFrom 将从与每个孩子关联的 Map 中获取的键列表。并且 Map 对应于孩子的数据（按 childFrom 数组中的值索引）。Map 包含每个孩子的数据，并且应该包括定义孩子视图的视图布局的“childFrom”childLayout 资源标识符中指定的所有条目。布局文件应至少包括在“childTo”中定义的命名视图 childFrom 将从与每个孩子关联的 Map 中获取的键列表。并且 Map 对应于孩子的数据（按 childFrom 数组中的值索引）。Map 包含每个孩子的数据，并且应该包括定义孩子视图的视图布局的“childFrom”childLayout 资源标识符中指定的所有条目。布局文件应至少包括在“childTo”中定义的命名视图 childFrom 将从与每个孩子关联的 Map 中获取的键列表。 **childTo 应在“childFrom”参数中显示列的子视图。这些都应该是 TextViews。此列表中的前 N ​​个视图被赋予 childFrom 参数中前 N 列的值。**

在 SimpleExpandableListAdapter.java 的源代码中，您会发现：

private void bindView(View view, Map data, String[] from, int[] to) { int len = to.length;

```
 for (int i = 0; i < len; i++) {
        TextView v = (TextView)view.findViewById(to[i]);
        if (v != null) {
            v.setText((String)data.get(from[i]));
        }
    }
} 
```

# iphone - facebook 的 FB Graph API 身份验证

> ID：10959933
> 
> 赞同：0
> 
> 时间：2012-06-09T09:41:15.000
> 
> 标签：iphone, objective-c, xcode, fb-graph

我使用 FB graph api 将我的 ios 应用程序与 facebook.but 集成在一起我来自哪里的屏幕。

```
NSString *url_string = [NSString stringWithFormat:@"https://graph.facebook.com/oauth/authorize?client_id=%@&redirect_uri=%@&scope=%@&type=user_agent&display=touch", facebookClientID, redirectUri, extended_permissions];
NSURL *url = [NSURL URLWithString:url_string];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

CGRect webFrame = [super_view frame];

webFrame.origin.y = 0;
UIWebView *aWebView = [[UIWebView alloc] initWithFrame:webFrame];
[aWebView setDelegate:self];    
self.webView = aWebView;

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(5.0, 10, 150.0, 30.0);
[button setTitle:@"My Button" forState:UIControlStateNormal];
[button addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside];
[self.webView addSubview:button];
[aWebView release];

[webView loadRequest:request];  
[super_view addSubview:webView]; 
```

所以我怎么能搬回来请一些身体帮助我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:45:49.933

在`myAction:`方法中，删除`webView`

```
[self.webView removeFromSuperView]; 
```

# sql - 将具有多行的单列转换为具有多列的单行

> ID：10959937
> 
> 赞同：0
> 
> 时间：2012-06-09T09:41:36.723
> 
> 标签：sql, sql-server-2008, tsql

我需要将列数据转换为具有多列的单行

示例 - 我创建了一个临时表来加载列的数据

```
CREATE TABLE TestC (Comments Char(100), Row_Count [int] IDENTITY(1,1))

INSERT INTO TestC VALUES('A'),('B'),('C'),('D')

Select Min( Case When Row_Count = 1 Then Comments End ) As Comments 
, Min( Case When Row_Count = 2 Then Comments End ) As Comments 
, Min( Case When Row_Count = 3 Then Comments End ) As Comments 
, Min( Case When Row_Count = 4 Then Comments End ) As Comments 
, Min( Case When Row_Count = 5 Then Comments End ) As Comments 
, Min( Case When Row_Count = 6 Then Comments End ) AS Comments 
, Min( Case When Row_Count = 7 Then Comments End ) AS Comments 
FROM TestC 
```

![结果](../Images/d3563c5c6c8c20d8e0784b099dbeade9.png)

我正在尝试使其成为动态查询，下面是我目前正在尝试的代码片段

```
DECLARE @sql AS NVARCHAR (MAX);
SELECT   @sql =  ' SELECT Min (CASE WHEN [Row_Count] =' + CAST ([Row_Count] AS CHAR(5)) + 
' THEN [Comments] END) AS Comments'
FROM     [dbo].[TestC];
SET @sql = @sql + N' FROM  [dbo].[TestC] ';
PRINT @sql
EXECUTE sp_executesql @sql; 
```

这仍然需要一些调整。感谢你的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:42:18.840

您可以使用如下所示的数据透视查询：

```
SELECT Pvt.*
FROM (
    SELECT *
    FROM TestC
    )AS P
PIVOT (MIN(Comments) FOR Row_Count IN ([1],[2],[3],[4],[5],[6],[7]))Pvt 
```

编辑：您可以看到以下链接：

[动态枢轴链接 1](https://stackoverflow.com/q/8327261/1407421)

[动态枢轴链接 2](https://stackoverflow.com/q/10404348/1407421)

[动态枢轴链接 3](https://stackoverflow.com/q/10792991/1407421)

# javascript - javascript中的for循环

> ID：10959945
> 
> 赞同：0
> 
> 时间：2012-06-09T09:42:37.703
> 
> 标签：javascript

我正在尝试理解以下 javascript 代码片段

```
<!DOCTYPE html>
<html>
<body>
<p>Click the button to loop through the properties of an object named "person".</p>
<button onclick="myFunction()">Try it</button>
<p id="demo"></p>

<script type="text/javascript">
function myFunction()
{
var x;
var txt="";
var person={fname:"John",lname:"Doe",age:25}; 

for (x in person)
{
txt=txt + person[x];
}

document.getElementById("demo").innerHTML=txt;
}
</script>
</body>
</html> 
```

我对这条线有点困惑

```
for (x in person)
    {
    txt=txt + person[x];
    } 
```

正如我猜测的那样，它是一个关联数组，具有键-> 值关系，最终结果不应该像这样打印吗？

```
fname:"John",lname:"Doe",age:25 
```

? 非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T09:45:14.100

首先，*JavaScript 中没有关联数组的概念*，它`person`是一个对象，并且使用`for-in`循环迭代一个对象。

该行：

```
txt = txt + person[x]; 
```

简单地读取`person`对象的每个属性并连接`txt`变量中的值给出结果：

```
JohnDoe25 
```

* * *

仅供参考，始终`for-in`对对象使用循环，`for`对数组使用普通循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T09:50:14.117

如前所述，javascript 没有关联数组的概念，与正常的运行和测试方法相比，最好阅读一些关于 js 的内容，因为在我们学会以 js 的方式思考之前，有些行为在逻辑上是不正确的。

for for..in 循环检查此[https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)并阅读该`hasOwnProperty`部分。这让很多人感到困惑。

我建议您阅读[http://eloquentjavascript.net/](http://eloquentjavascript.net/)并在遇到任何问题时继续检查 MDN。那里的文档真的很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T09:46:43.383

首先`person`不是`array`它`object`

其次`for(x in person)`，这里`x`是`key`因此`person[x]`将给出值。

现在在线`txt = txt + person[x]`你只是连接字符串（值而不是键），所以 `txt`将只包含所有`values`

被上一个答案打败了大约 10 秒 :)

# gridview - Gridview 显示为空，但搜索会在 gridview 中显示数据

> ID：10959946
> 
> 赞同：0
> 
> 时间：2012-06-09T09:42:39.440
> 
> 标签：gridview

我正在 GridView 中执行搜索。问题是当我打开默认页面时，它不显示任何数据，而实际上有数据。但是当我执行搜索功能时，它会显示数据。我正在使用过滤器表达式按名字列在 Gridview 中搜索记录。当我取出 FilterExpression 位时，它显示正常，但是当我将其添加回来时，它什么也不显示，但搜索仍然有效。

```
< asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ConnectionStrings:SDAppDBsConnectionString2 %>"
    UpdateCommand="UPDATE PatInfo SET FirstName = @FirstName,
      LastName = @LastName, MiddleInitial = @MiddleInitial, HomeAddress = @HomeAddress,
      PhoneNumber = @PhoneNumber, Gender = @Gender, DOB = @DOB, SSN = @SSN WHERE (ID = @ID)"
    DeleteCommand="DELETE FROM PatInfo WHERE (ID = @ID)"
    SelectCommand="select * from [PatInfo]"
    FilterExpression="FirstName LIKE '%{0}%'" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:33:18.633

我终于想通了！！！页面加载后，我已经将文本填充到文本框中。当用户单击文本框进行搜索时，它会自动突出显示所有文本供用户搜索。这是示例。

```
 Original---> <asp:TextBox ID="SearchPatientBox"
  runat="server">Search for a Patient</asp:TextBox>

 Changed----> <asp:TextBox ID="SearchPatientBox"
  runat="server"></asp:TextBox> 
```

我假设搜索功能已经通过页面加载实现并显示了一个空的 Gridview，因为在 GridView 名字或姓氏数据库列中没有“搜索患者”。*啪啪啪*这么简单的事情......

疯了，但很高兴我终于想通了，感谢您再次尝试提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:22:39.460

您是否尝试在您的数据库管理器上运行查询？sqlserver？只是看看这是否会通过过滤器返回任何结果？只是为了缩小问题范围？

# c# - 由于权限无效，无法对 Pen 进行更改

> ID：10959947
> 
> 赞同：2
> 
> 时间：2012-06-09T09:42:48.750
> 
> 标签：c#, winforms

```
m.pen = Pens.Red; //No error

m.pen.EndCap = System.Drawing.Drawing2D.LineCap.Square;        //error 
```

其中 m 是另一个类的对象，它将 Pen 作为全局对象。

当我尝试设置 endcap 或 startcap 时，它显示错误为

“无法对 Pen 进行更改，因为权限无效。”

任何人都知道如何纠正这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T09:50:49.603

[Pens](http://msdn.microsoft.com/en-us/library/system.drawing.pens%28v=vs.100%29.aspx)返回的 Pen 对象是不可变的，这意味着它们的属性不能更改。尝试创建一个 Pen 对象。

```
Pen pen =new Pen(Color.Red,20f);
pen.EndCap = System.Drawing.Drawing2D.LineCap.Square; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T09:51:34.643

试试这个：

```
m.pen = new Pen(Color.Red); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T09:52:13.327

Pens.Red 是框架初始化的静态成员，不能修改。

您必须像这样声明自己的 Pen：

```
m.pen = new Pen(Color.Red);
m.pen.EndCap = System.Drawing.Drawing2D.LineCap.Square; 
```

# php - MySQL 插入前删除

> ID：10959948
> 
> 赞同：0
> 
> 时间：2012-06-09T09:42:52.353
> 
> 标签：php, mysql

我正在开发一个简单的网络聊天服务器。我有两个表：
**chatMsgs：**

*   行 ID
*   用户名
*   时间
*   行动
*   目标
*   信息

**在线用户：**

*   用户名
*   行动
*   最后登录

我将如何从 online.LastActive < %t%-120 的 onlineUsers 中删除任何行以及从 onlineUsers 中删除的任何项目，我想在 chatMsgs 中添加一个新行

```
Username=onlineUsers.username,
LastAction='logout',
Time=%t%,
Message='Timed out after 2min' 
```

%t% 只是一个占位符，将替换为 php 的 time() 返回值。如果可能的话，我想通过一次调用 mysqli_query 处理程序来做到这一点，尽管查询字符串可以包含 mysql 服务器的多个指令

以下作品afaik（尚未彻底测试），但我想知道是否有更好的方法：

```
<?php
    // $db is an mysqli database link.

    $t = time()
    $e = $t - 120,
    $q = "SELECT Username FROM onlineUsers WHERE LastActive<={$e};",
    $r = $db->query($q);

    if (!$r)
        die('db error');

    elseif ($r->num_rows > 0) {
        $q = '';

        $r = $r->fetch_all(MYSQLI_NUM);
        for ($n in $r)
            $q .= "INSERT INTO chatMsg(Username,Time,Action,Message) VALUES('{$n}',{$t},'Logout','Timed out after 2min');";

        $q .= "DELETE FROM onlineUsers WHERE LastActive<={$e};";

        $r = $db->query($q);
        if (!$r) 
            die('db error');
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:45:16.750

如果您想在单个 SQL 语句中完成所有这些操作，那么以下内容就足够了（使用上面的 $t 和 $e 变量）：

```
INSERT INTO chatMsg(Username, Time, Action, Message)
SELECT Username, {$t}, 'logout', 'Timed out after 2 mins'
FROM onlineUsers
WHERE LastActive <= {$e};

DELETE FROM onlineUsers WHERE LastActive <= {$e}; 
```

请注意，可能会发生竞争条件 - 如果用户在 INSERT 和 DELETE 语句之间执行某些活动，它们仍将从 onlineUsers 表中删除。您可以绕过此加载所有“要删除”的条目，首先调用删除，然后添加注销消息，但这与您的原始要求相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:47:56.847

SQL 查询：

```
INSERT INTO chatMsgs
VALUES ($username, $time, "logout", $target, $message);

DELETE FROM onlineUsers
WHERE Username = $username; 
```

# html - 单引号标点转换为问号

> ID：10959949
> 
> 赞同：0
> 
> 时间：2012-06-09T09:42:53.363
> 
> 标签：html, special-characters

我正在用strut1.2 做应用程序。在 UI 中，在 html 文本框中，我提供了带有单引号标点符号的值，但在 DB 中存储为？标记。那么如何处理相同。

例如：'torana' 变成 ?torana?。请给我同样的建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:08:00.653

在将文本字段值插入数据库之前，一旦使用 replaceAll 方法检查文本框值，请使用 variable_name.replaceAll("\'","_sq_"); 然后打印替换的字符串。如果您输入了“torana”，则需要更改为 _sq_torana_sq_ 。否则你会得到别的东西

# ruby-on-rails-3 - 为什么模型中有attr_accessor时无法保存记录

> ID：10959955
> 
> 赞同：0
> 
> 时间：2012-06-09T09:44:39.903
> 
> 标签：ruby-on-rails-3, activerecord

当我添加

```
 attr_accessor :minor_edit, :title, :body, :slug, :domain_id 
```

在我的 Post 模型中，当我保存模型时

```
 post = Post.new(:title => "123", body => "456")
  post.save 
```

数据库说标题栏为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:46:44.143

当你设置`attr_accessor :title`你覆盖 ActiveRecords 设置方法。您想改为使用`attr_accessible`来停止批量分配。

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

# java - Java中MVC中视图之间交互的正确方法是什么？

> ID：10959959
> 
> 赞同：1
> 
> 时间：2012-06-09T09:44:55.240
> 
> 标签：java, swing, model-view-controller, jpanel

我有 2 个`JPanel`：**Panel_S**，**Panel_P**。第一个监听站事件，第二个监听乘客事件。创建新乘客时，它会添加到`JList`Panel_P**中**。当乘客完成“去”到车站`goToStation`并排队时，`station.addPassenger(this);`车站的事件`fireAddPassengerEvent`被触发，乘客被添加到`JList`Panel_S**中**。现在，我需要一些如何从**Panel_P**`JList`中移除乘客的方法，因为它完成了“出发”并进入了车站的队列。实现这一点的正确方法是什么？**Panel_S**是否应该“告诉” **Panel_P一旦****Panel_S**将乘客从其列表中删除********将乘客添加到其列表中？********

 ******如果您不理解我的问题，请告诉我，我会尽力更好地解释自己。

```
public class Passenger extends Thread {
    private Station station;
    private Vector<PassengerEventsViewListener> viewListeners;

    public Passenger(Station station)
    {
        this.station = station;
    }
    private void getInLineInStation()
    {
        station.addPassenger(this);
    }
    private void fireArrivedToStationEvent(EventArgs<Passenger> args)
    {       
       for (PassengerEventsViewListener l : viewListeners) {
          l.arrivedToStationEvent(args);
       }
    }
    private void goToStation()
    {
        //going
        fireArrivedToStationEvent(this);
    }

    @Override
    public void run()
    {
       goToStation();
       getInLineInStation();
    }
}

public class Station {
     private Vector<StationEventsViewListener> viewListeners;

     private void fireAddPassengerEvent(Passenger passenger)
     {      
         for (StationEventsViewListener l : viewListeners) {
             l.addPassengerEvent(passenger);
         } 
     }
     public synchronized boolean addPassenger(Passenger p)
     {
          passengersInQueue.addLast(passenger);     
          fireAddPassengerEvent(passenger);
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:25:04.143

> 一旦 Panel_S 将乘客添加到其列表中，Panel_S 是否应该“告诉”Panel_P 从其列表中删除乘客？

在 MVC 中：没有。这通常是 MVC 试图避免的：将视图耦合在一起。像在 MVC 中一样，解决方案是让模型通知此信息。收到通知后，Panel_P 将自动从其列表中删除该乘客。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T10:39:59.840

不，你的观点不应该交流，也不应该耦合。只有模特们会说话和看到对方。每个模型的视图都会相应改变。

回到你的问题。`Panel_P`应该链接到包含乘客信息的模型。另一方面，`Panel_S`应链接到包含有关站点信息的模型。现在当有新乘客到站时，`passenger`模型应该通知`station`模型新到站。`Panel_S`然后可以从`station`模型更新而不关心`passenger`模型或其视图（`Panel_P`）******

# encryption - SSL 如何加密从服务器到客户端的数据？

> ID：10959961
> 
> 赞同：22
> 
> 时间：2012-06-09T09:45:07.137
> 
> 标签：encryption, ssl-certificate

大多数 wiki 文章都描述了客户端浏览器如何使用公钥（证书）加密敏感数据（例如用户名/密码）并将这些加密数据发送到服务器。服务器将使用私钥对其进行解密。我明白这部分。但没有明确的信息说明服务器如何加密数据并发送回浏览器。

以我的网上银行为例：

(0) 我已经接受了来自我的网上银行的可信证书（公钥）。

(1) 通过 SSL URL，我的浏览器访问[https://myonlinebanking.com](https://myonlinebanking.com)

(2) 我输入用户名/密码登录。这些数据是加密的，所以中间人只能看到无意义的数据。

(3) 银行网络服务器收到我的加密数据，并使用其私钥解密并成功验证我的帐户。

现在这是我的问题：

银行如何发回我的数据？银行用什么密钥加密响应数据？如果银行使用“公钥”加密，中间人可以看到它，就像我看到它一样。所以中间人不知道我的用户名/密码，但他仍然可以看到我的帐户余额？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T21:55:28.747

你有一些错误的假设：

*   HTTP 数据并不总是使用服务器的公钥加密，以便将其发送到服务器。
*   服务器的公钥只是在开始时使用（握手协议）来建立一个安全密钥，用于安全密钥加密（对称加密）。
*   所有通信都通过密钥或对称密钥加密，其中客户端（浏览器）和服务器使用相同的密钥来加密和解密数据。

TLS（传输层安全）协议使用非对称加密（公钥）和对称加密（安全密钥）的组合。与您的银行的主要通信是使用对称加密，在 TLS 握手期间使用非对称加密安全地建立会话密钥（安全密钥）。

[这一切都在 TLS（传输层安全）握手中，这在这个链接](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc785811(v=ws.10))中得到了很好的解释。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-09T13:52:58.837

[TLS 握手](http://en.wikipedia.org/wiki/Transport_Layer_Security#TLS_handshake_in_detail)过程在双方之间建立一个*对称密钥，可能在过程中使用**非对称*加密（细节取决于客户端/服务器之间协商的确切算法）。这样，通信在双向加密，而不仅仅是单向。

但是，最终保护您免受 MITM 侵害的是您的浏览器会执行某种形式的主机名验证。首先检查服务器在握手中提供的证书的有效性。如果成功，您的浏览器会检查证书是否绑定到它正在与之通信的确切主机。如果忽略此检查，即使其余通信严格遵循协议（包括所有加密元素），MITM 攻击仍然会成功。攻击者可以简单地伪装成任何主机并尽职尽责地执行协议的其余部分，你不会知道其中的区别。

# java - 在 Eclipse 中导入

> ID：10959965
> 
> 赞同：0
> 
> 时间：2012-06-09T09:45:35.643
> 
> 标签：java, eclipse, packages

我正在制作我的第一款游戏，我有超过 20 节课。

尽管它是可以管理的，但我希望能够对它们进行一些安排。这是一个“太空游戏”，我有多种船型，每种都有自己的类，继承了抽象的“船”类。我想把它们放在一个单独的“Ships”包中（并且仍然可以使用它们）。

那么如何用 Eclipse 来实现呢？我知道如何在项目中创建包文件夹，但是当我需要它们在项目的不同包中时，我不知道如何导入它们。

我曾尝试寻找答案，但我发现的所有示例和答案都超出了我的简单需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:53:01.340

这是一个很简单的问题。例如，当您在其他类中使用您的类时，您不需要方便地导入它们`Ship ship = new Ship();`。如果使用 ctrl+space eclipse 对 Ship 使用自动完成功能，则自动导入它们，但如果您编写它并且不使用自动完成功能，请使用 ctrl+shift+O 导入类。太简单。

# entity-framework - 无法将类型“字符串”隐式转换为“布尔”linq 查询

> ID：10959966
> 
> 赞同：1
> 
> 时间：2012-06-09T09:45:37.877
> 
> 标签：entity-framework, linq-to-entities

我有这个 LINQ 查询：

```
 var query = from row in context.data_vault
             group row by row.STATE into g
             select new {
                 State = g.Key,
                 Count = g.Sum(row => row.SCORE),
                 Phones = g.Count(c => c.PHONE)
             }; 
```

执行时，我收到以下错误：

> 无法在 g.Count(c => c.PHONE) 处将类型“字符串”隐式转换为“布尔”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:50:59.027

[Count](http://msdn.microsoft.com/en-us/library/bb535181.aspx)方法需要一个返回布尔值的函数。看起来您的 PHONE 属性是一个字符串，所以这不起作用。

你到底想计算什么？

也许你想要所有非空电话号码或类似的东西，试试

```
g.Count(c => !String.IsNullOrWhitespace(c.PHONE)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:51:17.727

你想数什么？如果要计算非空或非空电话号码，则需要使用`g.Count(c => String.IsNullOrEmpty(c.PHONE)==false )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:51:33.760

`Count()`期待一个谓词 - 返回布尔值的东西。你已经让它返回一个字符串。我不确定你在追求什么，但如果你想计算非空白手机的数量，你可以将其修改为

```
 var query = from row in context.data_vault
             group row by row.STATE into g
             select new {
                 State = g.Key,
                 Count = g.Sum(row => row.SCORE),
                 Phones = g.Count(c => c.PHONE != "")
             }; 
```

# javascript - jquery选择当前tr的第二个和第三个单元格

> ID：10959973
> 
> 赞同：1
> 
> 时间：2012-06-09T09:46:53.973
> 
> 标签：javascript, jquery, html, css

我是 jquery 的新手。下面是我在内容页面中的 html 表。在母版页中，我还有其他表。当我通过拖动从“tableAppointment”中选择表格单元格时。它选择页面内的所有表格单元格。用户有限制只能选择当前 tr 的第二个和第三个单元格。如果用户选择多于三行然后给出警报（“时隙不超过 45 分钟。”）..我怎么能用 jquery 做到这一点。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Drag selection example</title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">

        google.load("jquery", "1.3.2");

        google.setOnLoadCallback(function ()
        {
            var active = false;

            $('#tableAppointment tr td:nth-child(2), #tableAppointment tr td:nth-child(3)').mousedown(function (ev)
            {
                active = true;
                $(".csstdhighlight").removeClass("csstdhighlight"); // clear previous selection
                ev.preventDefault(); // this prevents text selection from happening
                $(this).addClass("csstdhighlight");
                $(this).addClass("temp_selected");
            });

            $('#tableAppointment tr td:nth-child(2), #tableAppointment tr td:nth-child(3)').mousemove(function (ev)
            {
                if (active)
                {
                    $(this).addClass("csstdhighlight");
                    $(this).addClass("temp_selected");
                }
                if ($('.temp_selected').length > 6)
                {
                    alert("Time slot not more than 45 minutes.")
                    return false;
                }
            });

            $(document).mouseup(function (ev)
            {
                active = false;
                $('.temp_selected').removeClass('.temp_selected');

            });
        });
    </script>
    <style type="text/css">
        .csstdhighlight
        {
            background-color: #ccffcc;
        }
    </style>
</head>
<body>
    <table id="tableAppointment" cellspacing="1" width="50%" border="1" align="center">
        <tr>
            <td bgcolor="#ffffff">
            </td>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                <b>Patient Name</b>
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd" valign="top" width="70px">
                8:00AM
            </td>
            <td class="csstablelisttd">
                0
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                15
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                30
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                45
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd" valign="top" width="90px">
                9:00AM
            </td>
            <td class="csstablelisttd">
                0
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                15
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                30
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                45
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
    </table>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:49:50.387

尝试使用`$('#tableAppointment tr td:nth-child(2)')`

为了`alert("time slot not more than 45 minutes.")`

```
<script type="text/javascript">

        google.load("jquery", "1.3.2");

        google.setOnLoadCallback(function ()
        {
            var active = false;

            $("#tableAppointment tr td:nth-child(2), #tableAppointment tr td:nth-child(3)").mousedown(function (ev)
            {
                ev.preventDefault(); // this prevents text selection from happening
                if(get_num_rows() > 3)
                { 
                    alert("time slot not more than 45 minutes");
                    return false; 
                }
                active = true;
                num_rows_selected = num_rows_selected + 1;
                $(".csstdhighlight").removeClass("csstdhighlight"); 
                $(this).addClass("csstdhighlight");
            });

            $("td").mousemove(function (ev)
            {
                if (active)
                {
                    $(this).addClass("csstdhighlight");
                }
            });

            function get_num_rows() {
                var count = 0;
                $("#tableAppointment tr").each(function(){
                    if($(this).find('td.csstdhighlight').length > 0)
                    {
                      count++;
                    }
                });
                return count;
            }

            $(document).mouseup(function (ev)
            {
                active = false;
            });

        });

    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T09:57:58.753

这样的事情怎么样？

```
$("td").mousemove(function (ev) {
    if (active){
        $(this).addClass("csstdhighlight");
    }
    if($('.csstdhighlight').length > 2){
        alert("time slot not more than 45 minutes.")
    }
}); 
```

因此，如果有超过 2 个元素包含**csstdhighlight**类。然后它会警告错误。

* * *

***第二次尝试：***

```
$("#tableAppointment td").mousedown(function (ev)
        {
            active = true;
            $(".csstdhighlight").removeClass("csstdhighlight"); // clear previous selection
            ev.preventDefault(); // this prevents text selection from happening
            $(this).addClass("csstdhighlight");
            $(this).addClass("temp_selected");
        });

        $("td").mousemove(function (ev)
        {
            if (active)
            {
                $(this).addClass("csstdhighlight");
                $(this).addClass("temp_selected");
            }
            if($('.temp_selected').length > 2){
                alert("time slot not more than 45 minutes.")
            }
        });

        $(document).mouseup(function (ev)
        {
            active = false;
            $('.temp_selected').removeClass('temp_selected');
        }); 
```

# asp.net-mvc - 从 MVC 的程序集资源中捆绑脚本和 CSS

> ID：10959974
> 
> 赞同：5
> 
> 时间：2012-06-09T09:46:56.457
> 
> 标签：asp.net-mvc, resources, bundle

我一直在 MVC 中使用 Bundles 将所有脚本和 CSS 打包在一起，这很棒但是.... 有没有办法将脚本或 CSS 从资源中包含在 Bundle 中的共享项目库中，或者有没有人知道类似的东西可以做到这一点的捆绑包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:21:32.333

我可能会开始编写一个自定义捆绑转换类来读取您需要的资源并返回它们的内容和内容类型：

```
public class ResourceTransform : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse response)
    {
        string result;

        using (Stream stream = Assembly.GetExecutingAssembly()
            .GetManifestResourceStream("YourAssemblyNamespace.YourResourceFolder.YourFile.css"))
        {
            using (StreamReader reader = new StreamReader(stream))
            {
                result = reader.ReadToEnd();
            }
        }

        response.ContentType = "text/css";
        response.Content = result;
    }
} 
```

对于生产用途，您可能希望减少`ResourceTransform`类的硬编码并将所需的资源作为参数或属性发送，但您明白了。

这样您就可以将此捆绑包添加到您的收藏中：

```
Bundle resources = new Bundle("~/css/resources");
    resources.Transforms.Add(new ResourceTransform());
    resources.Transforms.Add(new CssMinify());

bundles.Add(resources); 
```

# android - 禁用/阻止来自 Android 手机的 Internet 访问

> ID：10959979
> 
> 赞同：5
> 
> 时间：2012-06-09T09:47:39.343
> 
> 标签：android

场景是，我正在开发一个使用互联网的 android 应用程序。这是一个商业应用程序。公司将为所有员工提供安卓手机。现在他们的要求是他们不希望员工通过其他方式使用互联网，而不是通过他们的业务应用程序，这需要互联网访问。

简而言之，我需要开发一个禁用互联网（wifi、移动数据等）并仅在用户使用此应用程序时才允许互联网的应用程序。

这可能吗？如何做到这一点？一项将始终检查网络连接的服务？

任何帮助表示赞赏。

**更新：**

我正在使用 BroadcastReciever，它检测连接状态并禁用 Wifi。我如何检测移动数据的连接状态，我的意思是检测移动数据连接然后相应地禁用它的意图过滤器操作是什么，我尝试过

`<action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:00:01.893

这是不可取的，但如果你仍然想这样做，

在使用 Internt 的每个活动的 onCreate 中编写此代码，

```
WifiManager wifiManager = (WifiManager)this.context.getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(true); 
```

并在该活动写入的 onPause 中，

```
WifiManager wifiManager = (WifiManager)this.context.getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(false); 
```

这是为 GPRS/EDGE/3G 的 WIFI 做的，您可能必须以同样的方式启用禁用飞行模式。

**随时随地更新**

*每次*进行任何活动时都拿一个`SharedPreference`放一个，*每次*都放在每个活动的方法中。`boolean isAppRunning = true` *`in onCreate()``False` *`onDestroy()`**

 **现在，**创建一个监听动作的广播接收器**，`NETWORK_STATE_CHANGED`并在该接收器`onReceive()` *检查 SharedPreference 值*，

如果 SP 布尔变量为 True，则让 WIFI 启用，如果为 false，则表示您的应用未运行，然后再次关闭 WIFI。**

# perl - 删除行：在 pattern1 之后以及在 pattern2 和 pattern3 之间使用 awk/sed/perl

> ID：10959982
> 
> 赞同：6
> 
> 时间：2012-06-09T09:48:23.690
> 
> 标签：perl, sed, awk

我需要从文件中删除pattern1 之后以及**pattern 2 和****pattern3**之间的行，如下所示：

 **```
aaaaaaaa 
bbbbbbbb
pattern1   <-----After this line
cdededed
ddededed
pattern2
fefefefe   <-----Delete this line
efefefef   <-----Delete this line
pattern3
adsffdsd
huaserew 
```

请您建议如何使用 awk 或 sed 或在 perl 中完成此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T10:12:33.117

```
sed '/pattern1/,${ /pattern2/,/pattern3/{/pattern2/b; /pattern3/b; d;} };' file 
```

格式化：

```
/pattern1/,$ {
    /pattern2/,/pattern3/ {
        /pattern2/b;
        /pattern3/b; 
        d;
    } 
} 
```

解释：

*   `/pattern1/,$``pattern1`是文件末尾之后的行范围
*   `/pattern2/,/pattern3/`是和之间的线`pattern2`范围`pattern3`
*   `/pattern2/b;`并`/pattern3/b;`跳过原本包含在范围内的`pattern2`and行（请参阅[sed 常见问题解答](http://sed.sourceforge.net/sedfaq4.html#s4.24)）`pattern3`
*   `d`删除范围内的其他行

**更新**

从评论中，可以重写内部块：

```
//!d 
```

在哪里：

*   `//`（一个空模式）匹配最后使用的正则表达式（在这种情况下是`pattern2`和`pattern3`
*   `!`反转下一个命令，使其适用于*除*与模式匹配的行之外的所有内容
*   `d`删除这些行

所以完整的，重写的模式是：

```
/pattern1/,$ {
    /pattern2/,/pattern3/ {
        //!d
    } 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T10:45:18.810

像状态机一样使用 awk：

```
awk '
    BEGIN {print_line = 1}
    /pattern1/ {consider = 1}
    consider && /pattern2/ {print_line = 0; print}
    consider && /pattern3/ {print_line = 1}
    print_line {print}
' filename 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T14:01:11.447

如果您正在使用 perl 在命令行上寻找快速解决方案，这对于[`flip-flop`](http://perldoc.perl.org/perlop.html#Range-Operators)操作员来说是一个理想的情况。现在，有两种方法可以在极端情况下解释这个问题——只要`pattern1`出现之前，这两种方法的功能都是一样的`pattern2`：

1.  如果**pattern1**在 pattern2之后但在**pattern3**之前，则删除**pattern1**和**pattern3之间的所有****内容**

2.  或者，如果**pattern1**在 pattern2之后但在**pattern3**之前什么都不做**，***除非*你看到另一个**pattern1**。

 ***在我们开始之前，请注意 perl 的争论`-p`

```
-n                assume "while (<>) { ... }" loop around program
-p                assume loop like -n but print line also, like sed 
```

现在，首先，我给你..

```
perl -pe'$x ||= /7/; $_= "" if /5/ .. /8/ and $x' <(seq 1 10)
1
2
3
4
5
6
9
10 
```

`$x ||= /7/`: 这设置`$x`为`/7/`when `$x`is的返回值`false`。匹配时`/7/`会返回。`true`这意味着`$x`在第一次匹配时设置为 true，并且本质`||=`是永远不会在变量已经为 true 时设置它。

然后它设置`$_ = ''`范围是否在和之间`/5/`，`/8/`并且它已经设置`$x`为真。记住短路的工作方式：`a && b`意味着`b`只有在`a`评估为时才运行`true`。在这种情况下，评估的事实`a`将设置触发器操作符的状态——这就是我们想要的；然而，我们只希望在`$_ = ''`已经看到的情况下发生`7`。

现在，对问题的第二种解释只需切换顺序......

```
perl -pe'$x ||= /7/; $_= "" if $x and /5/ .. /8/' <(seq 1 10) 
```

这将打印整个范围。Perl`/5/`直到找到`/7/`. 在我们的连续范围内，这不会发生。

顺便说一句，要真正让其中一些答案感到羞耻，许多空间都不是必需的......

```
perl -pe'$x||=/2/;$_=""if$x&&/5/../8/' # secksey 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T13:15:04.963

这可能对您有用：

```
sed '/pattern1/,$!b;/pattern2/,/pattern3/!b;//!d' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-09T12:04:21.550

完成罗塞塔石碑：

```
perl -ne '++$saw_pattern1 if /pattern1/;
          $inside = ($saw_pattern1 && /pattern2/) .. /pattern3/;
          print unless $inside && ($inside > 1 && $inside !~ /E0$/)' \
  input 
```

该代码利用了 Perl 的[`..`范围运算符](http://perldoc.perl.org/perlop.html#Range-Operators)。

> 在标量上下文中，`..`返回一个布尔值。该运算符是双稳态的，就像一个触发器，并模拟*sed*、*awk*和各种编辑器的行范围（逗号）运算符。每个`..`运算符都维护自己的布尔状态，即使在调用包含它的子例程时也是如此。只要它的左操作数是假的，它就是假的。一旦左操作数为真，范围运算符保持真，直到右操作数为真，*之后*范围运算符再次变为假。直到下一次评估范围运算符时它才会变为假……</p>
> 
> 当运算符处于假状态时不计算右操作数，而当运算符处于真状态时不计算左操作数。优先级略低于`||`和`&&`。返回的值要么是空字符串（表示 false），要么是序列号（以 1 开头）表示 true。对于遇到的每个范围，都会重置序列号。范围中的最终序列号`E0`附加了字符串，这不会影响其数值，但如果您想排除端点，则可以搜索一些内容。您可以通过等待序列号大于 1 来排除起点。*****

# asp.net - 定义子文件夹页面的链接

> ID：10959983
> 
> 赞同：1
> 
> 时间：2012-06-09T09:48:24.503
> 
> 标签：asp.net, html, url, hyperlink, href

我在 MasterPage 中定义了 CSS，以便所有页面都可以使用相同的样式。出于某种原因，我为菜单定义了内联样式。

我为这样的页面提供了一个相对链接：

```
<ul>
<li style="left: -1px; top: 0px; width: 90px"><a href="Home.aspx">Home</a></li>
....
...
...</ul> 
```

“Home.aspx”位于根目录中。如果我从根目录访问它，上面提到的链接可以正常工作，但如果我尝试从子文件夹访问它，则会显示错误：`HTTP Error 404 - Not Found`.

如何从根目录和子文件夹访问“Home.aspx”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:55:47.460

**解决方案1：**
这种情况下应该使用asp超链接控件，&提供。

```
NavigateUrl = "~/Home.aspx" 
```

**解决方案 2：**
或者，您可以使用`../Home.aspx`子文件夹（级别 1）中的锚标记`../`为每个子文件夹级别添加。

# charts - 在谷歌图表中设置特定颜色

> ID：10959984
> 
> 赞同：1
> 
> 时间：2012-06-09T09:48:39.027
> 
> 标签：charts

我有谷歌可视化，我想根据数据表中的列设置每个饼图/条的特定颜色。

即我有一张表，其中列出了为自己喜欢的颜色投票的人数：

```
*Input table*
id  Color   Num Votes
1  'Red'    10
2  'Blue'   100
3  'Green'  50 
```

如何设置饼图上的颜色，以便“红色”的切片为红色等？但是，由于数据集的原因，我无法保证行将按特定顺序排列，因此无法创建颜色数组。

我想我需要使用格式化程序，但不能让它工作。

```
 var formatter = new google.visualization.ColorFormat();
 formatter.addRange('Blue', 'Blue', 'blue', 'blue');
 formatter.format(data, 1); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:38:27.197

简单的，

只需设置它`var options`

它应该是这样的：

```
var options = {'title':'Your Title',
               'width':XXX,
               'height':XXX,
               colors:['Blue', 'Blue', 'blue', 'blue']}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T04:04:56.177

通过 draw() 方法的第二个参数设置选项。

```
var chartOptions = {
    title: 'My Awesome Chart',
    colors: ['#657CD0','#DA68A0','#06C3C0','#777B80','#7C6D70','#7C0850','#F75870']
};

var pieChart = new google.visualization.PieChart(document.getElementById('pieChart'));
pieChart.draw(someData, chartOptions); 
```

看看这个用于谷歌可视化的颜色选择器：[http](http://www.philipwhitt.com/projects/google-visualization-theme-picker) ://www.philipwhitt.com/projects/google-visualization-theme-picker ，它可能会给你一些有用的颜色想法。

# c# - Youtube api (c#) 奇怪的错误

> ID：10959985
> 
> 赞同：0
> 
> 时间：2012-06-09T09:48:48.820
> 
> 标签：c#, youtube-api

我已经为这个问题困惑了 3 天，但我无法找到任何解决方案。对不起，如果这里不是问这种问题的地方。但相信我，我没有其他选择。

我有一个应用程序，用户可以在其中上传视频，然后通过 youtube api 将它们上传到某个 youtube 频道。此应用程序托管在亚马逊主机中。到目前为止很棒！

由于 ssl 的原因，我必须在不同的主机上部署这个应用程序。所以我做了一个我的主机的确切实例。但问题是当我尝试通过 youtube api 上传时出现此错误：

**远程服务器返回错误：(403) Forbidden。**

我所有的部署文件都是从一台主机复制粘贴到另一台主机。主机的结构和配置完全相同（正如我之前提到的，它是一个精确的实例）。

如果你们中的一些人有任何想法，我将不胜感激。再次抱歉，如果这是发布此问题的错误位置。

谢谢

**更新**

我用当前版本更新了 youtube dll，我收到了这条消息：

**无效证件**

奇怪的是，我只在特定的 youtube/google 帐户中收到此消息。在所有其他帐户中，我尝试正确上传视频。

也许是帐户有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:02:15.027

“403 Forbidden 响应的 HTTP 正文应包含错误的 XML 描述及其具体原因。”

假设您使用的是 HttpWebRequest。使用[WebException.Response](http://msdn.microsoft.com/en-us/library/system.net.webexception.response.aspx)获取正文并记录 xml 响应。

```
try
{
    var http = (HttpWebRequest)WebRequest.Create("youtube api");
    using (var resp = http.GetResponse())
    {
        //Handle api response
    }
}
catch (WebException we)
{
    if (we.Response == null)
        throw; //Rethrow because it doesn't have a body.

    var resp = (HttpWebResponse)we.Response;
    if (resp.StatusCode != HttpStatusCode.Forbidden)
        throw; //We are only handling forbidden, rethrow other statuses.

    using (var sr = new StreamReader(resp.GetResponseStream()))
    {
        var xml = sr.ReadToEnd();
        //Log xml here
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:54:45.330

好的，我想出了问题所在。

我试图从亚马逊服务器手动登录 youtube，令我惊讶的是它要求输入验证码。

输入验证码后，一切正常！

# c++ - 等效于 OpenCV C++ 接口中的 cvAvg

> ID：10959987
> 
> 赞同：1
> 
> 时间：2012-06-09T09:49:45.380
> 
> 标签：c++, opencv

我在这两个链接中遇到了同样的问题：[一](http://opencv-users.1802565.n2.nabble.com/How-to-calculate-the-average-pixel-intensity-of-a-small-patch-of-an-IplImage-td5216769.html)，[二](http://tech.dir.groups.yahoo.com/group/OpenCV/message/71908)。我需要计算图像中小 ROI 的像素强度平均值。

我选择了 ROI 并复制了其中的图像，所以现在我需要计算像素平均强度，避免所有像素出现循环。

链接中提供的答案建议使用`CvScalar c = cvAvg(img);`，但我找不到使用 C++ 接口的等价物。

你能指出来吗？我在文档中找不到它！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T10:19:40.380

我提供了解决问题的代码片段：

```
//defines roi
cv::Rect roi( roiVertexXCoordinate, roiVertexYCoordinate, roiWidth, roiHeight );

//copies input image in roi
cv::Mat image_roi = inputImage( roi );

//computes mean over roi
cv::Scalar avgPixelIntensity = cv::mean( image_roi );

//prints out only .val[0] since image was grayscale
cout << "Pixel intensity over ROI = " << avgPixelIntensity.val[0] << endl; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-09T09:53:25.497

用于`mean function`C++。

[http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=avg#mean](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=avg#mean)

```
Calculates an average (mean) of array elements.

C++: Scalar mean(InputArray src, InputArray mask=noArray())

Python: cv2.mean(src[, mask]) → retval 

C: CvScalar cvAvg(const CvArr* arr,const CvArr* mask=NULL ) 

Python: cv.Avg(arr, mask=None) → scalar 
```

# c++ - 将 const 引用传递给使用自定义对象的模板类

> ID：10959989
> 
> 赞同：2
> 
> 时间：2012-06-09T09:50:00.507
> 
> 标签：c++, templates

我有一个正在创建的模板类，它接受自定义对象。它看起来有点像这样。

```
template<typename T1,typename T2>
class myClass
{
public:
    myClass(const T1 &param1, const T2 &param2);
}

template<typename T1, typename T2>
myClass<T1,T2>::
myClass
(const T1 &param1, const T2 &param2)
{
    T1.customFunction(); //doesn't compile
} 
```

所以我希望无论何时使用这个模板类，使用它的人都有责任确保类 T1 有一个名为 customFunction() 的函数。很公平，问题是 customFunction 在编译时必须保证为 const，因为它是在常量参数（param1）上调用的，但是如果 T1 本质上是一个虚拟类，这怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:09:12.577

首先，应该是

```
param1.customFunction(); 
```

因为你用参数对象而不是类型来调用它。

其次，您不必担心。每当您构造一个`myClass`对象时，编译器都会检查您传递的参数是否属于成员函数存在且可调用的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:08:12.697

你有点偏离了：不是函数必须是“`const`在编译时”，而是必须知道传递的**类型。**它不编译的原因是因为您尝试调用`customFunction`类型`T1`而不是它的实例。

```
template<typename T1, typename T2>
myClass<T1,T2>::
myClass
(const T1 &param1, const T2 &param2)
{
      param1.customFunction(); //does compile
}; 
```

# iphone - 在 iPhone 上使用相机变焦

> ID：10959998
> 
> 赞同：3
> 
> 时间：2012-06-09T09:51:06.823
> 
> 标签：iphone, ios, zooming

是不是不能通过一些函数调用比如Android的`setzoom();`方法来利用iPhone 4S相机已经支持的变焦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:45:23.727

查看 Apple 的`UIImagePickerController`-class 文档，您似乎无法以编程方式利用 iPhone 4S 的原生相机变焦。但是，如果属性`showsCameraControls`( [docs](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/showsCameraControls) ) 设置为`true`，用户仍然可以通过用两根手指捏合来进行本地缩放。

不幸的是，我也不知道有任何私有 API 可以做到这一点。