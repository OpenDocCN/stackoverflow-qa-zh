# StackOverflow 问答 10279000-10279999

# python - 如何挂起线程而不杀死它

> ID：10279003
> 
> 赞同：4
> 
> 时间：2012-04-23T10:41:18.140
> 
> 标签：python, python-multithreading, python-2.6

我有几个线程同时执行。我想实现一个函数来保存我的线程的状态并在知道我不想杀死它的情况下停止它（没有 Thread.stop ()），因为我还寻求实现一个允许污渍继续我的线程的函数（因为停止的状态）

# android - 吐司和持续时间

> ID：10279004
> 
> 赞同：3
> 
> 时间：2012-04-23T10:41:18.793
> 
> 标签：android, toast

我的活动中有一个按钮。如果我点击显示 Toast。但是当我再次单击 Toast 时再次显示。所以结果当我点击很多次时，这个 Toast 会出现很长时间。当第一次消失时，下一个正在显示等等。当我再次单击按钮时我该怎么办，第一个 toast 将被隐藏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:56:56.143

如果已经显示，则调用`cancel()`方法隐藏 Toast。

看看[这个 API。](http://developer.android.com/reference/android/widget/Toast.html)

这可以简单地在 Toast 的对象上调用。

```
Toast toast = new Toast(context);

toast.setText("Text");
toast.show();//(call show()  to display Toast)
toast.cancel();//(call cancel() to  hide Toast). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:33:27.817

将此代码添加到您的活动（全局吐司）中，并在您想显示新文本时取消它。

```
Toast myLovelyToastThatNeverDies;
public void onClick(View v) {

    if(myLovelyToastThatNeverDies==null)
        myLovelyToastThatNeverDies = new Toast(Activity.this);
    else
        myLovelyToastThatNeverDies.cancel();
    myLovelyToastThatNeverDies.setText("my new text");
    myLovelyToastThatNeverDies.setDuration(anAverageDuration);
    myLovelyToastThatNeverDies.show();
} 
```

# php - Windows 服务器上 php 站点中的相对路径

> ID：10279005
> 
> 赞同：0
> 
> 时间：2012-04-23T10:41:20.620
> 
> 标签：php, iis

我有一个启用 PHP 的 Windows 服务器，我必须让一个网站正常工作。

一切都很好，php正在运行，afaik。但由于某种原因，我无法获得在页眉中工作的相对路径。

我有这个文件夹结构（只有相关文件夹）：

wwwroot/网站名称/

wwwroot/站点名称/控制

wwwroot/网站名称/图片

wwwroot/站点名称/型号

wwwroot/站点名称/查看

在 IIS 中，我将物理路径设置为 wwwroot/Sitename/Control。这会加载 pages.php（位于此处），然后加载 wwwroot/Sitename/view/header.php 和 footer.php。

这很好用，但是在 header.php 中有一些对位于 wwwroot/Sitename/Model 中的一些 javascript（和其他）文件的引用，例如：wwwroot/Sitename/model/js.js

（例如：

```
<link rel="stylesheet" type="text/css" href="../model/main.css" /> 
```

)

加载时浏览器找不到此文件。我确信这与我已经设置了物理路径这一事实有关，但这是加载 pages.php 所必需的。

谁能指出我正确的方向？为什么相对路径不起作用，或者可能是另一种设置物理路径/类似的方法。

编辑：括号中的说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:53:27.270

使用 ../ 进入文件夹。

在你的 header.php 中试试这个：

../模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:10:18.570

为什么不使用绝对网址？

```
$SiteURL = 'http://www.your_iis_sever.com'; 
```

然后在你的 javascript 文件中使用

```
<?php echo $SiteURL;?>/path/to/js/jscript.js 
```

前面的链接。确保其全部正确 => 如果路径正确，请在查看页面时检查源代码。从那里更容易导航。

# javascript - 小部件拖动图像

> ID：10279013
> 
> 赞同：0
> 
> 时间：2012-04-23T10:41:46.947
> 
> 标签：javascript, html, css

我想知道这是否可以使用 javascript 将图像从小部件拖动并锚定到页面的任何部分（在任何内容上）。这应该在页面调整大小或滚动时保持相同的内容。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:01:39.013

是的。可以从小部件中拖放图像。本[教程](http://jqueryui.com/demos/draggable/)可以帮助您...

# iphone - 无法从 iphone 应用程序编辑通讯录记录

> ID：10279017
> 
> 赞同：0
> 
> 时间：2012-04-23T10:42:11.713
> 
> 标签：iphone, edit, addressbook, abpersonviewcontroller

我想在我的 iphone 应用程序中编辑通讯录中的记录。但我无法编辑任何记录。这是我的代码

```
 // In my First View Controller

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   DetailViewController *detailViewController=[[DetailViewController alloc] initWithRecordObject:record];

 [self.navigationController pushViewController:detailViewController animated:YES];
    [detailViewController release];
}

//------------------------------------

#import <UIKit/UIKit.h>
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h>
#import "User.h"

@interface DetailViewController : UIViewController <UITableViewDelegate,UITableViewDataSource,UIActionSheetDelegate,ABPersonViewControllerDelegate> {

    ABRecordRef record;
    // Some other ivars
}
- (id)initWithRecordObject:(ABRecordRef)myrecord;

//------------------------------------

@implementation DetailViewController

- (id)initWithRecordObject:(ABRecordRef)myrecord
{
    self = [super initWithNibName:@"DetailViewController" bundle:nil];
    if (self) {
        record = myrecord;
    }
    return self;
}

#pragma mark - Edit Record Method

-(void)btnEditContactTapped:(id)sender {

    // Fetch the address book 
    ABAddressBookRef addressBook = ABAddressBookCreate();

    ABRecordID recID = ABRecordGetRecordID(record);

    ABRecordRef record1 = ABAddressBookGetPersonWithRecordID(addressBook,recID);

    ABPersonViewController *personViewController = [[ABPersonViewController alloc]init];

    // set delegate
    personViewController.personViewDelegate = self;

    // Allow editing info
    personViewController.allowsEditing = YES;

    // Display contact info of selected person
    personViewController.displayedPerson = record1;

    personViewController.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:self action:@selector(returnFromPersonView)] ;

    APP_DELGATE.isContactEdited = YES;

    [self.navigationController pushViewController:personViewController animated:YES];

    [personViewController release];
}

-(void)returnFromPersonView {
    NSLog(@"In %s",__PRETTY_FUNCTION__);
    [self.navigationController popViewControllerAnimated:YES];

}

#pragma mark - ABPersonViewControllerDelegate Method

- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifierForValue {

    //[self dismissModalViewControllerAnimated:YES];
    return NO;
} 
```

当我按下 personViewController 时，我看不到任何有关记录的信息。这是一个截图

![在此处输入图像描述](../Images/d9ff324005d22a21cf0f9392677eea13.png)

非常感谢任何形式的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T12:59:00.330

您没有将“正确的联系人 ID”作为`ABRecordRef`;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:48:55.680

查看 Apple 的[地址簿编程指南](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)。对您有用的页面是[直接交互：以编程方式访问数据库](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/DirectInteraction.html#//apple_ref/doc/uid/TP40007744-CH6-SW1)页面。我建议你看看那些页面，它们是不言自明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:27:48.793

将返回更改为 YES 可能有助于最后一种方法

```
- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifierForValue {

//[self dismissModalViewControllerAnimated:YES];
return NO; //try changing it to YES
} 
```

# performance - 为什么 Hadoop MapReduce 这么慢并且没有使用所有可用资源？

> ID：10279025
> 
> 赞同：1
> 
> 时间：2012-04-23T10:42:27.320
> 
> 标签：performance, apache, hadoop, mapreduce

我目前正在一个 9 节点集群中测试 Apache Hadoop 的性能，每个节点都有 4Gig RAM 和 2 个 CPU，并确定在提交单个作业时，集群的资源（RAM、CPU、NET、磁盘 I/O）几乎没用过。

阻止 MapReduce 使用所有可用资源的有限因素是什么？

# javascript - 是否可以传递立即调用的函数表达式的执行上下文

> ID：10279026
> 
> 赞同：4
> 
> 时间：2012-04-23T10:42:27.597
> 
> 标签：javascript

考虑以下代码：

```
(function() {
    var a = 5;
    var someFunc = function() { ... };
    function anotherFunc() {
        ...
    };
})();

window.myGlobalObj = {
    init: function() {
        // and somehow here I want to  access to the IIFE context
    }
}; 
```

我想在我的全局对象中拥有 IIFE 的执行上下文。我确实可以访问函数表达式和对象本身，因此我可以传递或修改某些内容以使其工作（不，我不能重写对象或函数中的所有内容）。

甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:51:45.493

您的 IIFE 的“内容”，即 、`a`等`someFunc`，在该函数范围内是本地的，因此您只能在该范围内访问它们。但是您可以`window.myGlobalObj`在 IIFE 内分配：

```
(function() {
    var a = 5;
    var someFunc = function() { ... };
    function anotherFunc() {
        ...
    };

    window.myGlobalObj = {
        init: function() {
           // and somehow here I want to  access to the IIFE context
        }
    };

})(); 
```

然后该`init`函数将可以访问这些变量，因为它们在其包含范围内。

编辑：如果您不能将定义`myGlobalObj`移到 IIFE 中，我唯一能想到的就是使用 IIFE 创建您从中访问的第二个全局对象`myGlobalObj`：

```
(function() {
    var a = 5;
    var someFunc = function() { ... };
    function anotherFunc() {
        ...
    };

    // create a global object that reveals only the parts that you want
    // to be public
    window.mySecondObject = {
       someFunc : someFunc,
       anotherFunc : anotherFunc
    };
})();

window.myGlobalObj = {
    init: function() {
        window.mySecondObject.someFunc();
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:19:08.120

我看到这是多么可行的唯一方法是使用`eval`模拟动态范围。这样做（注意 IIFE 必须放在全局对象之后）：

```
window.myGlobalObj = {
    init: function() {
        // and somehow here I want to  access to the IIFE context
    }
};

(function() {
    var a = 5;
    var someFunc = function() { ... };
    function anotherFunc() {
        ...
    };

    eval("(" + String(window.myGlobalObj.init) + ")").call(window.myGlobalObj);
})(); 
```

这是关于如何使用动态范围的参考：[是否可以在 JavaScript 中实现动态范围而不使用 eval？](https://stackoverflow.com/q/10060857/783743 "是否可以在不使用 eval 的情况下在 JavaScript 中实现动态范围？")

**编辑：**我已经包含了一个示例来演示在 JavaScript 中使用动态范围的强大功能。你也可以玩[小提琴](http://jsfiddle.net/knBjT/)。

```
var o = {
    init: function () {
        alert(a + b === this.x); // alerts true
    },
    x: 5
};

(function () {
    var a = 2;
    var b = 3;

    eval("(" + String(o.init) + ")").call(o);
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:02:56.233

不，这是不可能的。您要访问的上下文被调用`closure`并且只能在函数内访问（在您的情况下，匿名函数（IIFE 您如何称呼它））。有关闭包的更多信息，请关注优秀的[Douglas Crockfords The Javascript 编程语言视频教程](http://www.youtube.com/watch?v=v2ifWcnQs6M)。

您必须将这些属性放置到某个共享对象中。

# ajax - 如何在ajax重定向上为页面充值

> ID：10279028
> 
> 赞同：0
> 
> 时间：2012-04-23T10:42:38.390
> 
> 标签：ajax, asp.net-mvc-3, authorize.net

我正在使用 AuthorizeAttribute 来管理我的 ASP MVC 3 应用程序中的会话。但是我对会话结束时登录页面的显示方式有疑问。我相信这是因为页面没有充电。那么，如果会话在每个 AJAX 请求上都结束了，我怎么能强制页面重新充电呢？

谢谢。

编辑 ：

我使用这样的授权

```
[Authorize]
public class MySettingsController : Controller
{
  //my code here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:45:11.563

通过javascript：

```
location.reload() 
```

# iphone - 数字格式

> ID：10279031
> 
> 赞同：2
> 
> 时间：2012-04-23T10:42:44.297
> 
> 标签：iphone, objective-c, ios

大家好，我正在使用以下方法从 NSNumber 获取字符串

```
 -(NSString *)stringFromNumber:(NSNumber *)number
    {
        NSLog(@"Input:---%@",number);
        NSNumberFormatter *numFormatter = [[[NSNumberFormatter alloc] init] autorelease];
        [numFormatter setMaximumFractionDigits:5];
        [numFormatter setMinimumFractionDigits:2];
        //[numFormatter setExponentSymbol:@"e"];
        NSString *str_num = [numFormatter stringFromNumber:number];
        NSLog(@"Output:---%@",str_num);
        return str_num;
    } 
```

在控制台中我得到如下

```
 Input:---2.940000057220459
    Output:---2.94                
    Input:---2940.000057220459
    Output:---2940.00006         
    Input:---2.940000057220459e-15
    Output:---.00                 
    Input:---2.940000057220459e-12
    Output:---.00                 
    Input:---2.940000057220459e-09
    Output:---.00                 
    Input:---2.940000057220459e-06
    Output:---.00                 
    Input:---0.002940000057220459
    Output:---.00294 
```

但对于上述输入（顺序），我需要输出如下所示

```
---2.94
---2940
---2.94e-15
---2.94e-12
---2.94e-6
---2.94e-9
---0.00294 
```

我该怎么做？有人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:28:11.730

看看[NSNumberFormatter 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumberFormatter/setMinimumFractionDigits%3a)。

```
setMinimumFractionDigits:  
setMinimumIntegerDigits: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:29:49.750

我试过这个

```
-(NSString *)stringFromNumber:(NSNumber *)number
{
    NSLog(@"Input:---%@",number);
    NSNumberFormatter *numFormatter = [[NSNumberFormatter alloc] init];
    [numFormatter setMaximumFractionDigits:5];
    [numFormatter setMinimumFractionDigits:2];
    NSString *temp = [NSString stringWithFormat:@"%@",number];
    NSRange range = [temp rangeOfString:@"e"];
    if(range.length > 0){
        [numFormatter setNumberStyle:NSNumberFormatterScientificStyle];
        [numFormatter setExponentSymbol:@"e"];
    }
    NSString *str_num = [numFormatter stringFromNumber:number];
    NSLog(@"Output:---%@",str_num);
    return str_num;
} 
```

像这样

```
Input:---2.940000057220459
Output:---2.94
Input:---2940.000057220459
Output:---2940.00006
Input:---2.940000057220459e-15
Output:---2.94e-15
Input:---2.940000057220459e-12
Output:---2.94e-12
Input:---2.940000057220459e-09
Output:---2.94e-9
Input:---2.940000057220459e-06
Output:---2.94e-6
Input:---0.002940000057220459
Output:---.00294 
```

# c# - 实体框架 5 DbUpdateException：不可为空成员的空值

> ID：10279042
> 
> 赞同：9
> 
> 时间：2012-04-23T10:43:41.587
> 
> 标签：c#, entity-framework

我有一些数据模型：

```
[DataContract(Name = "artist")]
public class artist : IEqualityComparer<artist>
{
    [Key]
    [XmlIgnore]
    [DataMember]
    public int ID { get; set; }

    [DataMember]
    [XmlElement(ElementName = "name")]
    public string name { get; set; }

    [DataMember]
    [XmlElement(ElementName = "mbid", IsNullable = true)]
    public string mbid { get; set; }

    [DataMember]
    [XmlElement(ElementName = "url")]
    public string url { get; set; }

    [XmlElement(ElementName = "image", IsNullable = true)]
    public List<string> image { get; set; }

    [DataMember(IsRequired=false)]
    [XmlElement(ElementName = "stats", IsNullable = true)]
    public stats stats { get; set; }

    public double? match { get; set; }
    public List<tag> tags { get; set; }
    [XmlElement(ElementName = "similar")]
    [DataMember(Name = "similar")]
    public List<artist> similar { get; set; }

    [DataMember]
    [XmlElement(ElementName = "bio", IsNullable = true)]
    public wiki bio { get; set; }

    public bool Equals(artist x, artist y)
    {
        return x.name == y.name;
    }

    public int GetHashCode(artist obj)
    {
        return obj.name.GetHashCode();
    }
} 
```

和一个复杂的类型：

```
 [DataContract]
[ComplexType]
[XmlRoot(ElementName = "streamable", IsNullable = true)]
public class stats
{
    [DataMember(IsRequired = false)]
    public int listeners { get; set; }

    [DataMember(IsRequired = false)]
    public int playcount { get; set; }
} 
```

和数据库收录：

```
[Table("CachedArtistInfo")]
public class MusicArtists
{
    [Key]
    public string artistName { get; set; }
    public artist artistInfo { get; set; }

    private DateTime _added = default(DateTime);
    [DataMember(IsRequired = true)]
    [Timestamp]
    public DateTime added
    {
        get
        {
            return (_added == default(DateTime)) ? DateTime.Now : _added;
        }
        set { _added = value; }
    }
} 
```

最后一步：

```
 foreach (artist a in id)
        {
            df.CachedArtists.Add(new MusicArtists() { artistName = a.name, artistInfo = a });
            df.SaveChanges();
        } 
```

错误：ExceptionType“System.Data.Entity.Infrastructure.DbUpdateException”“不可为空成员的空值。成员：'stats'。” 变量已完全填充，其中包含对象统计信息。怎么了？

![在此处输入图像描述](../Images/94e31b987ec2ced3ce1fb8dc54a7d55e.png) ![在此处输入图像描述](../Images/dd4dba311aca0f025f10785ea2fba6c0.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-05T02:24:10.840

复杂类型不能为空 - 因此您必须在保存之前创建类的实例。这篇文章帮助我解决了同样的问题。 [http://weblogs.asp.net/manavi/archive/2011/03/28/associations-in-ef-4-1-code-first-part-2-complex-types.aspx](http://weblogs.asp.net/manavi/archive/2011/03/28/associations-in-ef-4-1-code-first-part-2-complex-types.aspx)

# vba - VBA Outlook 2010 从 Active Directory 中检索信息

> ID：10279045
> 
> 赞同：1
> 
> 时间：2012-04-23T10:43:57.803
> 
> 标签：vba, outlook, active-directory

我在 Outlook 2010 中使用 VBA，并且正在尝试创建一个函数，该函数将从 Active Directory 中检索选定的用户主文件夹路径。

以下代码是一个具有保存目的地的简单弹出窗口。

```
Sub SaveSelected()
'Declaration
Dim myItems, myItem, myAttachments, myAttachment
Dim myOrt As String
Dim myOLApp As New Outlook.Application
Dim myOlExp As Outlook.Explorer
Dim myOlSel As Outlook.Selection
Dim objFSO As Object
Dim intCount As Integer

'Ask for destination folder
myOrt = InputBox("Destination", "Save Attachments", "\\server\home\VARIABLE\")
End Sub 
```

我希望变量来自 AD，具体取决于当前选择的电子邮件。
例如，我收到了来自 Jimmy@home.com 的电子邮件，然后我选择了来自 jimmy@home.com 的电子邮件，我希望能够检索

> \服务器\主目录\吉米

并使用“jimmy”作为我的变量。如果这是可能的，任何帮助将不胜感激。

![在此处输入图像描述](../Images/bd87fb31e92d43833702668577365716.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:48:59.293

以下代码有效

```
Sub GetSelectedItems()

 Dim myOlExp As Outlook.Explorer
 Dim myOlSel As Outlook.Selection
 Dim mySender As Outlook.AddressEntry
 Dim oMail As Outlook.MailItem
 Dim oAppt As Outlook.AppointmentItem
 Dim oPA As Outlook.propertyAccessor
 Dim strSenderID As String
 Dim myOrt As String
 Dim user As String

 Const PR_SENT_REPRESENTING_ENTRYID As String ="http://schemas.microsoft.com/mapi/proptag/0x00410102"

 Set myOlExp = Application.ActiveExplorer
 Set myOlSel = myOlExp.Selection

 For x = 1 To myOlSel.Count
 If myOlSel.item(x).Class = OlObjectClass.olMail Then
 ' For mail item, use the SenderName property.
 Set oMail = myOlSel.item(x)

 ElseIf myOlSel.item(x).Class = OlObjectClass.olAppointment Then
 ' For appointment item, use the Organizer property.
 Set oAppt = myOlSel.item(x)

 Else

 Set oPA = myOlSel.item(x).propertyAccessor
 strSenderID = oPA.GetProperty(PR_SENT_REPRESENTING_ENTRYID)
 Set mySender = Application.Session.GetAddressEntryFromID(strSenderID)

 End If
 Next x

Set objConnection = CreateObject("ADODB.Connection")
Set objCommand = CreateObject("ADODB.Command")

objConnection.Open "Provider=ADsDSOObject;"
objCommand.ActiveConnection = objConnection

strDomainName = "ou=company,dc=mydc,dc=com"
strUserCN = oMail.SenderName & ""

objCommand.CommandText = "<LDAP://" & strDomainName & ">;(&
(objectCategory=person)(objectClass=user)(cn=" & strUserCN &
"));samAccountName;subtree"

Set objRecordSet = objCommand.Execute

If Not objRecordSet.EOF Then

user = objRecordSet.Fields("samAccountName")

myOrt = InputBox("Destination", "Save Attachments", "\\server\home\" &user & "")

End If

objConnection.Close
Set objRecordSet = Nothing
Set objConnection = Nothing
Set objCommand = Nothing

'free variables
Set myItems = Nothing
Set myItem = Nothing
Set myAttachments = Nothing
Set myAttachment = Nothing
Set myOLApp = Nothing
Set myOlExp = Nothing
Set myOlSel = Nothing
Set user = Nothing

End Sub 
```

# java - 在 Java/Android 中提取 3GP 视频文件的时长

> ID：10279047
> 
> 赞同：1
> 
> 时间：2012-04-23T10:44:07.467
> 
> 标签：java, android, video, 3gp

我是 Android 开发的新手，我正在尝试创建一个可以录制视频和查看录制视频的小型视频播放器。我正在 ListView 中查看应用程序录制的视频列表，其中为每个视频显示视频的标题和长度。

我使用以下方法获取视频列表：

```
File[] fileList = directory.listFiles(filter); 
```

我已经能够使用以下方法获取视频的名称：

```
fileList[i].getName() 
```

但我似乎无法弄清楚如何提取视频的长度/持续时间。我也找不到任何相关的 API。

如何在 Java 中获取 3GP 视频文件的持续时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:58:03.713

你可以像这样使用光标...

```
 String[] proj = {
            MediaStore.Video.Media._ID,
            MediaStore.Video.Media.DATA,
            MediaStore.Video.Media.DISPLAY_NAME,
            MediaStore.Video.Media.SIZE,
            MediaStore.Video.Media.DATE_TAKEN,
            MediaStore.Video.Media.DURATION };

            videocursor = managedQuery(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,proj, null, null, null); 
```

您可以使用`MediaStore.Video.Media.DURATION`.

希望它会帮助你。

# android - 如何停止正在运行的水平进度条并重置它

> ID：10279051
> 
> 赞同：2
> 
> 时间：2012-04-23T10:44:20.057
> 
> 标签：android, progress-bar

我知道我们如何使用此链接中的水平进度条[http://android-er.blogspot.in/2010/11/progressbar-running-in-asynctask.html](http://android-er.blogspot.in/2010/11/progressbar-running-in-asynctask.html) 但我想在两者之间停止运行进度棒 if我的任务完成了。我尝试了 stop() 和 resume() 方法但没有奏效。我想停止正在运行的程序，然后单击某个对话框确定按钮重新启动它。我是安卓新手。请支持我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:55:51.117

如果您愿意恢复停止正在线程或 Asynctask 中执行的进程，最好的方法是使用处理程序并向进程本身发送充当请求的消息。

发送停止消息（您定义消息），以便进程处理消息并停止线程并通知已停止的主线程。

以下是一些关于线程消息和处理程序的有用文章：

*   [http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)
*   [http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/](http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/)

例如，您可以使用处理程序将消息发送到处理程序然后执行动画步骤来实现动画，然后该步骤将发送另一条消息以执行下一步：[http ://code.google.com/p/android-page- curl/source/browse/trunk/src/com/mystictreegames/pagecurl/PageCurlView.java](http://code.google.com/p/android-page-curl/source/browse/trunk/src/com/mystictreegames/pagecurl/PageCurlView.java)

以下是我不久前制作的类似 digg 的应用程序的一些示例：[http ://code.google.com/p/meneameandroid/source/search?q=handleMessage&origq=handleMessage&btnG=Search+Trunk](http://code.google.com/p/meneameandroid/source/search?q=handleMessage&origq=handleMessage&btnG=Search+Trunk)

# python - 无法通过 wget e 或脚本访问 url

> ID：10279052
> 
> 赞同：1
> 
> 时间：2012-04-23T10:44:21.503
> 
> 标签：python, bash, web-scraping, web-crawler

大家好！我想通过 python 脚本访问一些网页。网址是：[http ://www.idealo.de/preisvergleich/Shop/27039.html](http://URL)

当我通过网络浏览器访问它时，它是好的。但是当我想用 urllib2 访问它时：

```
a = urllib2.urlopen("http://www.idealo.de/preisvergleich/Shop/27039.html") 
```

它给了我以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 403: Forbidden 
```

我也尝试使用 wget 访问它：

```
wget http://www.idealo.de/preisvergleich/Shop/27039.html 
```

错误是：

```
--2012-04-23 12:42:03--  http://www.idealo.de/preisvergleich/Shop/27039.html
Resolving www.idealo.de (www.idealo.de)... 62.146.49.133
Connecting to www.idealo.de (www.idealo.de)|62.146.49.133|:80... connected.
HTTP request sent, awaiting response... 403 Forbidden
2012-04-23 12:42:03 ERROR 403: Forbidden. 
```

谁能解释为什么会这样？以及如何使用 python 访问它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:50:53.620

他们正在阻止一些用户代理。如果您尝试以下操作：

```
wget -U "Mozilla/5.0" http://www.idealo.de/preisvergleich/Shop/27039.html 
```

有用。所以你必须想办法在你的 python 代码中伪造用户代理才能让它工作。

试试这个：

```
import urllib2
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
a = opener.open("http://www.idealo.de/preisvergleich/Shop/27039.html") 
```

# python - 搜索功能不是真正的搜索

> ID：10279054
> 
> 赞同：0
> 
> 时间：2012-04-23T10:44:26.140
> 
> 标签：python, for-loop, python-2.7

我有以下代码，假设在字符串中搜索字母“e”，`False`如果在字符串中找到“e”，则返回，返回`True`未找到“e”：

```
def has_no_e(word):
    for letter in word:
        if letter == 'e':
            return False
        return True 
```

据我了解，`for`循环将`word`一一访问字符，并根据我设置的条件检查它们，即`if letter == 'e'`

每次我运行程序时，似乎 for 循环出于某种原因只检查第一个字母！

因此调用该函数`has_no_e('dde','e')`将导致 return `True`。但如果我切换`has_no_e('edd','e')`它会返回`False`

我在 x86 Windows 7 Ultimate 机器上运行 Python 2.7.3...谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T10:58:17.673

其他人指出了您的错误，但整个功能过于复杂。你可以这样做：

```
def has_no_e(word):
    return 'e' not in word 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T10:46:06.757

```
return True 
```

位于 for 循环的主体内，因此它将在检查第一个字母是否为之后立即执行`'e'`（除非第一个字母为，`e`否则它将返回`False`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T10:46:52.493

你`return`的缩进错误。取消缩进（到与 相同的级别`for`），它会工作

# python - 使用反向引用不可能向后看

> ID：10279055
> 
> 赞同：12
> 
> 时间：2012-04-23T10:44:32.520
> 
> 标签：python, regex, python-3.x, python-2.7

据我了解，

```
(.)(?<!\1) 
```

永远不应该匹配。实际上，php`preg_replace`甚至拒绝编译它，ruby 也是如此`gsub`。不过，python`re`模块似乎有不同的看法：

```
import re
test = 'xAAAAAyBBBBz'
print (re.sub(r'(.)(?<!\1)', r'(\g<0>)', test)) 
```

结果：

```
(x)AAAA(A)(y)BBB(B)(z) 
```

任何人都可以为这种行为提供合理的解释吗？

# 更新

此行为似乎是模块中的[一个限制。](http://bugs.python.org/issue814253)`re`替代[`regex`](http://pypi.python.org/pypi/regex)模块似乎可以正确处理断言中的组：

```
import regex

test = 'xAAAAAyBBBBz'

print (regex.sub(r'(.)(?<!\1)', r'(\g<0>)', test))
## xAAAAAyBBBBz

print (regex.sub(r'(.)(.)(?<!\1)', r'(\g<0>)', test))
## (xA)AAA(Ay)BBB(Bz) 
```

请注意，与, 不同的是`pcre`，`regex`它还允许可变宽度的后视：

```
print (regex.sub(r'(.)(?<![A-Z]+)', r'(\g<0>)', test))
## (x)AAAAA(y)BBBB(z) 
```

最终，`regex`将被包含在标准库中，如[PEP 411](http://www.python.org/dev/peps/pep-0411/#candidates-for-provisional-inclusion-into-the-standard-library)中所述。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:17:53.487

这看起来确实像 Python`re`模块中的一个限制（说“bug”的好方法，正如我从与 Microsoft 的支持电话中了解到的那样）。

我想这与 Python 不支持可变长度的后向断言这一事实​​有关，但它还不够聪明，无法确定它`\1`始终是固定长度的。为什么在编译正则表达式时它不抱怨这个，我不能说。

有趣的是：

```
>>> print (re.sub(r'.(?<!\0)', r'(\g<0>)', test))
(x)(A)(A)(A)(A)(A)(y)(B)(B)(B)(B)(z)
>>>
>>> re.compile(r'(.*)(?<!\1)') # This should trigger an error but doesn't!
<_sre.SRE_Pattern object at 0x00000000026A89C0> 
```

所以最好不要在 Python 的后向断言中使用反向引用。积极的向后看也好不到哪里去（它在这里也匹配，就好像它是积极的向前看一样）：

```
>>> print (re.sub(r'(.)(?<=\1)', r'(\g<0>)', test))
x(A)(A)(A)(A)Ay(B)(B)(B)Bz 
```

我什至无法猜测这里发生了什么：

```
>>> print (re.sub(r'(.+)(?<=\1)', r'(\g<0>)', test))
x(AA)(A)(A)Ay(BB)(B)Bz 
```

# css - 溢出：隐藏不能防止折叠边距

> ID：10279058
> 
> 赞同：0
> 
> 时间：2012-04-23T10:44:52.427
> 
> 标签：css, overflow

溢出：hidden 可以建立一个新的阻塞格式上下文，阻塞格式上下文可以防止折叠边距。但在这个例子中，它不起作用，它们之间的差距仍然是 20px。为什么？ [http://www.w3.org/TR/CSS2/visuren.html#block-formatting](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)
[http://www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

.mod-a,.mod-b{margin:20px;overflow:hidden}

![在此处输入图像描述](../Images/75edc5fe3bd4e58371dc72bf5c706e75.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:59:59.340

**overflow:hidden**不会与[流入](http://jsfiddle.net/fXz57/1/)的孩子一起折叠，但会与其他 DIV 一起折叠。像这样写：

```
div{
    margin:20px 0;
    background:red;
    width:50px;
    height:50px;
    float:left;
    clear:left;
} 
```

检查这个[http://jsfiddle.net/fXz57/](http://jsfiddle.net/fXz57/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:48:47.087

溢出与边距或填充无关。如果您不想要边距，请设置`margin`为 0 而不是尝试更改`overflow`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:00:55.350

有边距，因为在您的班级中，您已将边距设为 20 像素。从 css 类 .mod-a,.mod-b:20px 中删除边距。

溢出隐藏与此无关。当您在其他标签中有一个长元素时使用它，其宽度为 50 px，内部文本为 200 px。然后溢出：隐藏将隐藏其他

# java - 克服Java中的使用文件问题

> ID：10279061
> 
> 赞同：0
> 
> 时间：2012-04-23T10:45:19.750
> 
> 标签：java, file, locking, lotus, lotus-domino

我对在 Lotus Domino 中运行的以下 Java 代码有疑问。

```
File filData = new File(domSapFilePath + "\\DOMSAP" + sdfDateTime.format((Calendar.getInstance()).getTime()) + ".csv");
        FileOutputStream foData = new FileOutputStream(filData);

        foData.write(DomSapGenerator.GenerateDomSapFile(con, dateFrom, dateTo).getBytes());

        foData.close();

        con.close(); 
```

创建的文件位于 UNC 路径中，但是当它尝试写入文件时，它会出错，指出该文件正在被另一个进程使用，如下所示：

```
error message: java.io.FileNotFoundException: \\10.XX.XX.XX\xxxxxx\XXX\DOXXXXXX22230.csv (The process cannot access the file because it is being used by another process) 
```

我以前从未用过 Java 编程，我希望有人能指出我正确的方向，以解决这个间歇性发生的问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:33:48.823

此问题的最可能原因是其他东西打开了文件并正在使用它。操作系统阻止您写入文件，因为这可能会干扰“其他”正在执行的操作。

它可能是间歇性发生的，因为“其他东西”只是偶尔使用该文件。

解决方案是弄清楚：

*   什么在使用文件，
*   为什么要锁定它，以及
*   如何协调文件上的不同活动以避免冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:58:50.863

当您尝试打开 UNC 路径时，此错误消息的另一个原因可能是代码在计划代理内运行。

在这种情况下，与服务器 \10.XX.XX.XX\ 的连接将在 Domino 运行的操作系统帐户的上下文中打开 - 通常是“SYSTEM”。由于不允许“SYSTEM”用户与另一台服务器建立网络连接，因此打开调用将失败。

解决方案：以有权建立网络连接的另一个 (AD) 用户身份运行 Domino 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:37:08.143

你没有说什么操作系统，但我会根据UNC格式来猜测一下windows。

Microsoft 有一个名为 Process Monitor 的程序。您可以使用它来跟踪正在触摸文件的内容。

[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

但我也会先接受 leyrers 的回应。

# android - GPS追踪解决方案

> ID：10279063
> 
> 赞同：-4
> 
> 时间：2012-04-23T10:45:31.287
> 
> 标签：android, iphone, windows-mobile, gps

我希望任何人给我有关使用 GPS 设备跟踪车辆运动的 GPS 跟踪站点的信息。服务器连接到设备并获取位置信息或设备连接到服务器并发送位置信息？我想了解有关跟踪车辆位置的网站功能的信息，例如[http://gpstrackit.com/](http://gpstrackit.com/)或[http://www.gofleet.ca](http://www.gofleet.ca)
我想在 android、Iphone、windows mobile 上模拟 gps 设备功能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:08:02.007

德国公司[GPSoverIP GmbH](http://www.gpsoverip.de/)为此提供软件和硬件。他们还有一个具有许多功能的[iPhone 应用程序。](http://itunes.apple.com/us/app/gps-explorer/id334398785?mt=8)还有用于第三方应用程序的开发人员 API。

我是那个应用程序的开发者。如果您想了解更多信息，请联系 GPSoverIP！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:11:50.940

如果您的问题是：-

> 服务器是否应该询问设备它在哪里？或者设备应该告诉服务器它在哪里？

答案是，设备（客户端）应该告诉服务器（Web 服务器）它在哪里。这种类型的系统很容易实现。

客户端很可能会向服务器发送一个`GET`或`POST`请求，其中包含详细说明其位置的变量。

使用示例 URL `GET`：-

> [http://www.example.com/setClientLocation.php?clientID=3&latitude=51.45346&longitude=-3.85234](http://www.example.com/setClientLocation.php?clientID=3&latitude=51.45346&longitude=-3.85234)

# javascript - 在登录页面上添加未使用的 javascript 文件

> ID：10279064
> 
> 赞同：0
> 
> 时间：2012-04-23T10:45:36.357
> 
> 标签：javascript, browser-cache

我有一个 Web 应用程序，其中登录页面后需要许多 jquery 文件。
我可以将它包含在登录页面上，以便在下一页上浏览器不会请求该文件。
表示文件是从浏览器缓存中使用的。
可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:50:48.580

是的，你可以（正如@Juhana 已经提到的那样）。

您还可以使用像 Google 这样的[CDN](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)来交付 jQuery 或其他常用库。如果有人已经通过 Google CDN 访问了包括 jQuery 在内的另一个站点，那么在登录到您的站点时（如果您还使用 Google 的 CDN），该站点已经被他的浏览器缓存了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:51:46.257

对的，这是可能的。由于您不想减慢登录页面的速度，因此最好在加载和呈现后将其动态插入页面，以便用户可以与它进行交互，而不会因加载此文件而造成任何延迟。另请注意，这并不能 100% 保证文件将在缓存中，因为浏览器可能会根据其政策和空间限制，在用户访问您的下一页之前选择不存储或删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:52:37.677

您可以使用 jquery`$.getScript()`方法在任何地方请求文件。如果服务器缓存打开，一切都会好起来的。

# jquery-mobile - 下一个和上一个按钮在 jquery mobile 中无法正常工作

> ID：10279065
> 
> 赞同：0
> 
> 时间：2012-04-23T10:45:36.870
> 
> 标签：jquery-mobile, navigation, buttonclick

我是 Jquery 的新手，我在此创建了示例 jquery mobile，如果使用一次返回和登录按钮，则 next(>>) 和 prevoius(<<) 按钮显示相同的页面，而不是使用**href**标记引用的页面。在使用后退按钮和登录按钮之前它工作正常，使用这些按钮后它工作异常。

编辑并查看演示 [http://jsfiddle.net/khushbujoshi/JERG4/5/](http://jsfiddle.net/khushbujoshi/JERG4/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:54:07.813

DOM 元素 ID 是唯一的，不要重复使用它们。

您无需使用 jQuery 自行更改页面。让 jQuery-mobile 处理它。

# asp.net - 使用 javascript 将 webmethod 结果附加到列表框

> ID：10279067
> 
> 赞同：0
> 
> 时间：2012-04-23T10:45:41.643
> 
> 标签：asp.net, jquery, webmethod

我正在尝试使用 ajax/jquery/webmethod 更新列表框。通过在 chrome 中检查开发人员工具中的网络活动，我可以看到 webmethod 正在返回值，但这些值没有被附加到列表框中。所以我想问题一定出在我的javascript代码上。有人可以看一下代码并告诉我为什么这不起作用吗？listbod 称为 ListBox1，位于 Homepage.aspx 页面中。

```
$(function updateListbox() {
var lBox = $('select[id$=ListBox1]');
setInterval(function () {
    $.ajax({
        beforeSend: function (req) {
            req.setRequestHeader("Accept", "application/json");
        },
        type: "POST",
        url: "Homepage.aspx/getCurrentList",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            var results = data.d;
            if (results.length > 0) {
                var updatedList = [];
                for (var i in results) {
                    updatedList.push(results[i]);
                }
                $(lBox).append(updatedList.join(''));
            }
            else alert("No new items to update...");
        }
    });
}, 5000); 
```

});

```
[WebMethod()]
    public static string[] getCurrentList()
    {
        int count = 0; 
        for(int i = 0; i < Global.ListUsers.Count(); i++)
            count++;

        string[] results = new string[count];

        for (int i = 0; i < count; i++)
           results[i] = Global.ListUsers[i].Username.ToString();                                          

        return results;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:42:28.633

如果要遍历一组项目，则需要：

```
for (var i = 0; i < results.length; i++) { 
```

您所拥有的将遍历结果对象的属性。

另外，我不确定您填充选择的方式。尝试这个：

```
for (var i = 0; i < results.length; i++) {
    lBox[0].options[i] = new Option(results[i], results[i], true, false)
} 
```

# asp.net-mvc-3 - 如何获取模型数据注释以实现应用程序验证，而无需在数据库级别实现以及使用 EF？

> ID：10279070
> 
> 赞同：0
> 
> 时间：2012-04-23T10:46:03.300
> 
> 标签：asp.net-mvc-3, entity-framework, validation, entity-framework-4

我喜欢使用数据注释来指定模型中字段验证的想法。但是在 EF 中，我注意到它希望在 DB 级别实现这一点，即 [Required] 成为“非空”字段。是否可以让应用程序应用此验证而不更改数据库？

谢谢，

埃德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:49:24.727

您可以做的是为视图使用单独的视图模型，为数据库使用单独的实体类。您可以使用[auto mapper 之](http://automapper.codeplex.com/)类的库来映射这些对象。

# magento-1.5 - 表费率或购物车规则应用于“基于邮政编码的免费送货”以适用于所有方法

> ID：10279086
> 
> 赞同：0
> 
> 时间：2012-04-23T10:47:17.393
> 
> 标签：magento-1.5, magento, magento-1.6

我想为具有指定邮政编码的某些地区提供免费送货服务。我将如何实现此功能？

我有“表率”和“购物车规则”两个选项。现在哪一种适用于所有运输方式，如 USPS 和 Fedex 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:47:47.747

您应该为此购买扩展程序。有很多定制费率的。我们使用自定义费率扩展，允许我们通过管理界面写入运费。

另请参阅[Magento - 添加多种运输方式](https://stackoverflow.com/questions/6978178/magento-adding-multiple-shipping-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:11:46.213

我找到了解决方案，它工作得很好。解决方案是使用此链接上明确定义的购物车规则

[http://addoa.com/blog/how-restrict-free-shipping-magento](http://addoa.com/blog/how-restrict-free-shipping-magento)

# c# - 为参数的具体名称注册字符串值

> ID：10279088
> 
> 赞同：5
> 
> 时间：2012-04-23T10:47:23.453
> 
> 标签：c#, inversion-of-control, ioc-container, autofac

我正在使用 Autofac，并且我有几个类要求输入字符串类型和名称 lang 的参数。有没有办法为所有名为“lang”的参数注册一个字符串值，所以它会自动解析？我不想编辑任何构造函数，因为它不是我的代码（我知道接受例如 CultureInfo 会使注册变得容易..）

导致语法短的东西，如 builder.Register(lang => "en-US").As().Named("lang")

将是理想的。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T15:56:26.287

解决这个问题的一个相当简单的方法是使用自定义 Autofac 模块。

首先，实现模块并处理 IComponentRegistration.Preparing 事件。这也是您存储参数值的地方：

```
using System;
using Autofac;
using Autofac.Core;

public class LangModule : Module:
{
  private string _lang;
  public LangModule(string lang)
  {
    this._lang = lang;
  }

  protected override void AttachToComponentRegistration(
    IComponentRegistry componentRegistry,
    IComponentRegistration registration)
  {
    // Any time a component is resolved, it goes through Preparing
    registration.Preparing += InjectLangParameter;
  }

  protected void InjectLangParameter(object sender, PreparingEventArgs e)
  {
    // Add your named parameter to the list of available parameters.
    e.Parameters = e.Parameters.Union(
      new[] { new NamedParameter("lang", this._lang) });
  }
} 
```

现在您有了自定义模块，您可以将它与其他依赖项一起注册并提供您想要注入的值。

```
var builder = new ContainerBuilder();
builder.RegisterModule(new LangModule("my-language"));
builder.RegisterType<LangConsumer>();
...
var container = builder.Build(); 
```

现在，当您解析任何具有字符串参数“lang”的类型时，您的模块将插入您提供的值。

如果您需要更具体，您可以使用事件处理程序中的 PreparingEventArgs 来确定正在解析的类型（`e.Component.Activator.LimitType`）等。然后您可以即时决定是否包含您的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:10:03.197

看看这个例子：

```
builder.Register<ClassName>((c, p) =>
{
var p2 = p.Named<string>("lang");
return new ClassName(p2);
});
var container = builder.Build();
var m = container.Resolve<ClassName>(new NamedParameter("lang", "en-US"));
var m2 = container.Resolve<ClassName>(new NamedParameter("lang", "fr-FR")); 
```

您可以解析您的类并在构造函数中传递参数。

# python-2.7 - @login_requred 装饰器，用于在 django 中使用 mongoengine 进行身份验证

> ID：10279090
> 
> 赞同：0
> 
> 时间：2012-04-23T10:47:43.153
> 
> 标签：python-2.7, mongoengine, django-1.3

我是 mongoengine 的新手，我想使用 @login_required 装饰器来检查用户是否登录。我使用了以下代码：''' from django.contrib.auth.decorators import login_required @login_required(login_url='/loginpage') def index(request):

```
return render_to_response('index.html') 
```

'''

但是上面的代码不起作用。即使我提交了正确的用户名和密码，它也会重定向到登录页面。有人对我如何实现目标有任何建议，或者知道任何可以帮助我的文章/示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:10:04.230

看起来你正在做的事情是正确的......@login_required 绝对适用于 mongoengine - 我在所有地方都使用它。

看看这里的代码：

[https://github.com/hmarr/django-mumblr/blob/master/mumblr/views/admin.py](https://github.com/hmarr/django-mumblr/blob/master/mumblr/views/admin.py)

此外，您需要使用 mongoengine 会话，如果您还没有：

# c# - 如何按类型获取 WPF 容器的子级？

> ID：10279092
> 
> 赞同：45
> 
> 时间：2012-04-23T10:47:47.533
> 
> 标签：c#, wpf, wpf-controls

如何在 WPF 中获取类型的子`ComboBox`控件`MyContainer` `Grid`？

```
<Grid x:Name="MyContainer">                    
    <Label Content="Name"  Name="label1"  />
    <Label Content="State" Name="label2"  />
    <ComboBox Height="23" HorizontalAlignment="Left" Name="comboBox1"/>
    <ComboBox Height="23" HorizontalAlignment="Left" Name="comboBox3" />
    <ComboBox Height="23" HorizontalAlignment="Left" Name="comboBox4" />
</Grid> 
```

这一行给了我一个错误：

```
var myCombobox = this.MyContainer.Children.GetType(ComboBox); 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-23T10:56:09.143

此扩展方法将递归搜索所需类型的子元素：

```
public static T GetChildOfType<T>(this DependencyObject depObj) 
    where T : DependencyObject
{
    if (depObj == null) return null;

    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
    {
        var child = VisualTreeHelper.GetChild(depObj, i);

        var result = (child as T) ?? GetChildOfType<T>(child);
        if (result != null) return result;
    }
    return null;
} 
```

所以使用它你可以要求`MyContainer.GetChildOfType<ComboBox>()`.

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-04-23T10:52:01.747

Children 是 UIElements 的集合。因此，您需要遍历项目并确定每个项目是否属于所需类型。幸运的是，已经有一个 Linq 方法可以做到这一点，即[`Enumerable.OfType<T>`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)，您可以使用[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)语法方便地调用它：

```
var comboBoxes = this.MyContainer.Children.OfType<ComboBox>(); 
```

此方法根据集合的类型过滤集合，并在您的情况下仅返回 type 的元素`ComboBox`。

如果您只想要第一个 ComboBox （正如您的变量名称所暗示的那样），您只需将调用附加[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)到查询：

```
var myComboBox = this.MyContainer.Children.OfType<ComboBox>().FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-09-16T21:39:20.287

所有这些答案，但一个使用递归，**IMO**只是蹩脚:)

**获得视觉孩子：**

```
public static IEnumerable<T> FindVisualChildren<T>([NotNull] this DependencyObject parent) where T : DependencyObject
{
    if (parent == null)
        throw new ArgumentNullException(nameof(parent));

    var queue = new Queue<DependencyObject>(new[] {parent});

    while (queue.Any())
    {
        var reference = queue.Dequeue();
        var count = VisualTreeHelper.GetChildrenCount(reference);

        for (var i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(reference, i);
            if (child is T children)
                yield return children;

            queue.Enqueue(child);
        }
    }
} 
```

**获取逻辑孩子：**

```
public static IEnumerable<T> FindLogicalChildren<T>([NotNull] this DependencyObject parent) where T : DependencyObject
{
    if (parent == null)
        throw new ArgumentNullException(nameof(parent));

    var queue = new Queue<DependencyObject>(new[] {parent});

    while (queue.Any())
    {
        var reference = queue.Dequeue();
        var children = LogicalTreeHelper.GetChildren(reference);
        var objects = children.OfType<DependencyObject>();

        foreach (var o in objects)
        {
            if (o is T child)
                yield return child;

            queue.Enqueue(o);
        }
    }
} 
```

请注意，两个深度遍历树，如果您希望在第一次遇到时停止，则更改两个代码以将调用包含`queue.Enqueue`在一个`else`块中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-18T21:04:29.060

所有这些答案都非常好，但是，如果你试图找到一个*特定*的 T 类型的视觉孩子，你要么被困住，然后找到你想要的，要么希望你得到的第一个是一个你想要的。我合并了几种方法以根据标准找到特定的方法。它有点像 LINQ，但我不想尝试处理递归枚举器。

像这样使用它：

```
MyContainer.FirstOrDefaultChild<Label>(l => l.Content=="State") 
```

我把它写成一个扩展方法。

```
public static class DependencyObjectExtensions
{
    public static T FirstOrDefaultChild<T>(this DependencyObject parent, Func<T, bool> selector) 
        where T : DependencyObject
    {
        T foundChild;
        return FirstOrDefaultVisualChildWhere(parent, selector, out foundChild) ? foundChild : default(T);
    }

    private static bool FirstOrDefaultVisualChildWhere<T>(DependencyObject parent, Func<T, bool> selector,
        out T foundChild) where T : DependencyObject
    {
        var count = VisualTreeHelper.GetChildrenCount(parent);
        for (var i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(parent, i);
            var tChild = child as T;
            if (tChild != null)
            {
                if (!selector(tChild)) continue;
                foundChild = tChild;
                return true;
            }

            if (FirstOrDefaultVisualChildWhere(child, selector, out foundChild))
            {
                return true;
            }
        }
        foundChild = default(T);
        return false;
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-29T15:42:57.103

搜索包含预定点（屏幕）的特定类型的第一个子项：

（参数'point'是调用'PointToScreen'函数的结果（以Visual类型声明））

```
private TDescendantType FindDescendant<TDescendantType>(DependencyObject parent, Point screenPoint) 
         where TDescendantType : DependencyObject
{
    int count = VisualTreeHelper.GetChildrenCount(parent);
    for (int i = 0; i < count; i++)
    {
        var child = VisualTreeHelper.GetChild(parent, i);
        if (child is Visual)
        {
            Point point = ((Visual)child).PointFromScreen(screenPoint);
            Rect rect = VisualTreeHelper.GetDescendantBounds((Visual)child);

            if (!rect.Contains(point))
                continue;
        }

        if (child is TDescendantType)
        {
            return (TDescendantType)child;
        }

        child = FindDescendant<TDescendantType>(child, screenPoint);
        if (child != null)
        {
            return (TDescendantType)child;
        }
    }
    return null;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-07-18T01:53:40.233

我找到了这个工作示例：

```
foreach (object o in LogicalTreeHelper.GetChildren(myWindow))
{
    if (o is SomeTypeOfMine)
    {
      //do something
    }
} 
```

资料来源：[https ://social.msdn.microsoft.com/Forums/vstudio/en-US/e0be708a-5fa2-4479-b5a0-8ff44a963803/find-all-child-controls-of-a-type?forum=wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/e0be708a-5fa2-4479-b5a0-8ff44a963803/find-all-child-controls-of-a-type?forum=wpf)

# java - Netty：从管道中动态添加和删除 FrameDecoder，协议封装

> ID：10279097
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:04.770
> 
> 标签：java, netty

我已经使用 Netty 3.3.1-Final 3 周了。我的协议有 3 个步骤，每个步骤都需要不同的**FrameDecoder**：

*   阅读论据
*   传输一些数据
*   数据管道相互关闭

我经历了很多我无法理解的“阻塞”问题。终于在我看来，阅读**org.jboss.netty.example.portunification**示例时，我在尝试**动态更改我的 FrameDecoder**时遇到了一些缓冲区问题：一个 FrameDecoder 的缓冲区（可能）在更改下一个时不是空的。 ..

有没有办法在 Netty 中轻松做到这一点？我必须更改我的协议吗？我需要编写一个大的 FrameDecoder 并管理一个状态吗？如果是这样，如何避免具有公共子部分的不同协议之间的代码重复（例如“读取参数”）？

今天我想到了一个**FrameDecoderUnifier**（下面的代码）的想法，目的是热添加和删除一些**FrameDecoder**，你怎么看？

谢谢你的帮助！

雷诺

----------- FrameDecoderUnifier 类 --------------

```
 /**
     * This FrameDecoder is able to forward the unused bytes from one decoder to the next one. It provides
     * a safe way to replace a FrameDecoder inside a Pipeline.
     * It is not safe to just add and remove FrameDecoder dynamically from a Pipeline because there is a risk
     * of unread bytes inside the buffer of the FrameDecoder you wan't to remove.
     */
    public class FrameDecoderUnifier extends FrameDecoder {

        private final Method frameDecoderDecodeMethod;
        volatile boolean skip = false;
        LastFrameEventHandler eventHandler;
        LinkedList<Entry> entries;
        Entry entry = null;

        public FrameDecoderUnifier(LastFrameEventHandler eventHandler) {
            this.eventHandler = eventHandler;
            this.entries = new LinkedList<Entry>();
            try {
                this.frameDecoderDecodeMethod = FrameDecoder.class.getMethod("decode", ChannelHandlerContext.class, Channel.class, ChannelBuffer.class);
            } catch (NoSuchMethodException ex) {
                throw new RuntimeException(ex);
            } catch (SecurityException ex) {
                throw new RuntimeException(ex);
            }
        }

        public void addLast(FrameDecoder decoder, LastFrameIdentifier identifier) {
            entries.addLast(new Entry(decoder, identifier));
        }

        private Object callDecode(FrameDecoder decoder, ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer) throws Exception {
            return frameDecoderDecodeMethod.invoke(decoder, ctx, channel, buffer);
        }

        @Override
        protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer) throws Exception {
            if (entry == null && !entries.isEmpty()) {
                entry = entries.getFirst();
            }

            if (entry == null) {
                return buffer; //No framing, no decoding
            }

            //Perform the decode operation
            Object obj = callDecode(entry.getDecoder(), ctx, channel, buffer);

            if (obj != null && entry.getIdentifier().isLastFrame(obj)) {
                //Fire event
                eventHandler.lastObjectDecoded(entry.getDecoder(), obj);
                entry = null;
            }
            return obj;
        }

        /**
         * You can use this interface to take some action when the current decoder is changed for the next one.
         * This can be useful to change some upper Handler in the pipeline.
         */
        public interface LastFrameEventHandler {

            public void lastObjectDecoded(FrameDecoder decoder, Object obj);
        }

        public interface LastFrameIdentifier {

            /**
             * True if after this frame, we should disable this decoder.
             * @param obj
             * @return 
             */
            public abstract boolean isLastFrame(Object decodedObj);
        }

        private class Entry {

            FrameDecoder decoder;
            LastFrameIdentifier identifier;

            public Entry(FrameDecoder decoder, LastFrameIdentifier identifier) {
                this.decoder = decoder;
                this.identifier = identifier;
            }

            public FrameDecoder getDecoder() {
                return decoder;
            }

            public LastFrameIdentifier getIdentifier() {
                return identifier;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T16:42:56.140

我遇到过类似的问题，因为从管道中删除帧解码器似乎并不能阻止它被调用，并且没有一种明显的方法可以使解码器表现得好像它不在链中一样：Netty坚持 decode() 至少读取一个字节，因此您不能简单地返回传入的 ChannelBuffer，而返回 null 会停止处理传入数据，直到下一个数据包到达，从而停止协议解码过程。

[首先： FrameDecoder](http://netty.io/3.7/api/org/jboss/netty/handler/codec/frame/FrameDecoder.html)的 Netty 3.7 文档实际上有一节“用管道中的另一个解码器替换解码器”。它说：

> 仅仅通过调用 ChannelPipeline#replace() 是不可能实现这一点的

相反，它建议通过返回一个包含解码的第一个数据包和接收到的其余数据的数组来传递数据。

```
return new Object[] { firstMessage, buf.readBytes(buf.readableBytes()) }; 
```

重要的是，在此之前必须启用“展开”，但是这部分很容易错过并且没有解释。我能找到的最好的线索是[Netty issue 132](https://issues.jboss.org/browse/NETTY-132)，这显然导致了 FrameDecoders 上的“展开”标志。如果为真，解码器将以对下游处理程序透明的方式将此类数组解包为对象。窥视源代码似乎证实了这就是“展开”的意思。

其次：似乎有一种更简单的方法，因为该示例还显示了如何将数据沿管道向下传递而不改变。例如，在完成其工作后，我的同步数据包 FrameDecoder 设置了一个内部标志并将其自身从管道中移除，并正常返回解码后的对象。设置标志后的任何后续调用都只需像这样传递数据：

```
protected Object decode(ChannelHandlerContext ctx,
                        Channel channel, ChannelBuffer cbuf) throws Exception {

    // Close the door on more than one sync packet being decoded
    if (m_received) {
        // Pass on the data to the next handler in the pipeline.
        // Note we can't just return cbuf as-is, we must drain it
        // and return a new one.  Otherwise Netty will detect that
        // no bytes were read and throw an IllegalStateException.
        return cbuf.readBytes(cbuf.readableBytes());
    }

    // Handle the framing
    ChannelBuffer decoded = (ChannelBuffer) super.decode(ctx, channel, cbuf);
    if (decoded == null) {
        return null;
    }

    // Remove ourselves from the pipeline now
    ctx.getPipeline().remove(this);
    m_received = true;

    // Can we assume an array backed ChannelBuffer?
    // I have only hints that we can't, so let's copy the bytes out.
    byte[] sequence = new byte[magicSequence.length];
    decoded.readBytes(sequence);

    // We got the magic sequence?  Return the appropriate SyncMsg
    return new SyncMsg(Arrays.equals(sequence, magicSequence));
} 
```

从 LengthFieldBasedFrameDecoder 派生的解码器保持在下游并处理所有后续数据帧。到目前为止，对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:11:42.080

我认为，应该避免使用*基于某些状态切换内部解码器*并*动态添加/删除上层处理程序*的帧解码器，因为

*   难以理解/调试代码
*   处理程序没有明确定义的职责（这就是您删除/添加处理程序的原因吗？一个处理程序应该处理一种或多种（相关）类型的协议消息，而不是许多处理程序相同类型的消息）
*   理想情况下，帧解码器只提取协议帧，而不是根据状态解码帧（这里帧解码器可以有内部解码器链来解码帧并触发带有解码消息的 MessageEvent，上面的处理程序可以对解码消息做出反应）。

**更新**：在这里，我考虑了一个协议，其中每条消息都可以有一个唯一的标签/标识符，并清楚地标记消息的结尾（例如[标签长度值](https://gist.github.com/1582634)帧格式）

# asp.net-mvc-3 - 如何确保始终获得正确的基本路径？

> ID：10279098
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:10.403
> 
> 标签：asp.net-mvc-3

有时我的基本路径我

[http://localhost/mywebsite/controller/index](http://localhost/mywebsite/controller/index)

有时是

[http://www.mywebsite.com/controller/index](http://www.mywebsite.com/controller/index)

我怎样才能始终获得正确的基本路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:53:38.347

您可以使用 @Url.Action("Index","Controller")

为了正确指向您的 Content 文件夹，请执行 @Url.Content("~/Content/blah")

# javascript - 如何使用 Backbone 填充子集合？

> ID：10279101
> 
> 赞同：1
> 
> 时间：2012-04-23T10:48:22.527
> 
> 标签：javascript, ajax, collections, backbone.js, trello

我正在使用 Trello API( [http://trello.com](http://trello.com) )，发现我实际上可以获取子集合，而不是使用 AJAX 来获取多次。例如，我可以使用以下方式获取卡片：

```
https://api.trello.com/1/boards/4eea4ffc91e31d1746000046?
lists=open&list_fields=name&cards=open&card_fields=name,desc
&key=[application_key] 
```

所以我可以通过一次获取数据来减少加载延迟，但我不知道如何将其填充到子集合中并避免第一次自动同步。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:23:13.023

获得数据后，您可以使用[Collection.reset()](http://documentcloud.github.com/backbone/#Collection-reset)来填充没有`fetch`它们的集合。

# asp.net - Web 服务失败，请求失败，HTTP 状态 401：未经授权

> ID：10279103
> 
> 赞同：1
> 
> 时间：2012-04-23T10:48:26.643
> 
> 标签：asp.net, vb.net, web-services, iis-7, .net-4.0

我有一个运行时间很长的任务，我需要从我的网站获取并放入 Web 服务，但是每次我尝试调用 Web 服务时都会收到此错误消息`The request failed with HTTP status 401: Unauthorized.`

我认为这可能只是凭据的问题，因为我在发送电子邮件时看到了类似的东西，所以我这样做了：

```
 Dim wsCustomer As New blueprintdev.RosterEmailService()

      Dim basicAuthenticationInfo As New System.Net.NetworkCredential("user", "pass")

      wsCustomer.UseDefaultCredentials = False

      wsCustomer.PreAuthenticate = True

      wsCustomer.Credentials = basicAuthenticationInfo

      txtTestResult.Text = wsCustomer.Test() 
```

这仍然给了我同样的问题。

还尝试使用默认凭据进行此操作，但仍然无济于事。

现在我不知道如何正确地做到这一点，所以我大部分时间都在学习教程等，谁能告诉我我在这里做错了什么？

谢谢

附加说明：我正在从事的项目是我加入公司时继承的项目，无法在 Visual Studio 中构建，因此在不大规模破解项目并删除大量代码的情况下，通过代码断点不是我的选择。

更新：运行提琴手向我展示了 3 个条目，当我查看身份验证选项卡时，我看到：

```
No Proxy-Authenticate Header is present.

WWW-Authenticate Header (Negotiate) appears to be a Kerberos reply:
A1 15 30 13 A0 03 0A 01 03 A1 0C 06 0A 2B 06 01  ¡.0\. ....¡...+..
04 01 82 37 02 02 0A                             ..7... 
```

然后

```
No Proxy-Authenticate Header is present.

WWW-Authenticate Header (Negotiate) appears to be a Kerberos reply:
A1 81 E2 30 81 DF A0 03 0A 01 01 A2 81 D7 04 81  ¡â0ß ....¢×.
D4 4E 54 4C 4D 53 53 50 00 02 00 00 00 0E 00 0E  ÔNTLMSSP........
00 38 00 00 00 15 82 89 E2 C1 20 C3 44 5E 99 21  .8....âÁ ÃD^!
A0 00 00 00 00 00 00 00 00 8E 00 8E 00 46 00 00   ..........F..
00 06 01 B1 1D 00 00 00 0F 41 00 43 00 41 00 44  ...±.....A.C.A.D
00 45 00 4D 00 59 00 02 00 0E 00 41 00 43 00 41  .E.M.Y.....A.C.A
00 44 00 45 00 4D 00 59 00 01 00 06 00 44 00 45  .D.E.M.Y.....D.E
00 56 00 04 00 1A 00 6C 00 6F 00 63 00 61 00 6C  .V.....l.o.c.a.l
00 2E 00 41 00 63 00 61 00 64 00 65 00 6D 00 79  ...A.c.a.d.e.m.y
00 03 00 22 00 44 00 45 00 56 00 2E 00 6C 00 6F  ...".D.E.V...l.o
00 63 00 61 00 6C 00 2E 00 41 00 63 00 61 00 64  .c.a.l...A.c.a.d
00 65 00 6D 00 79 00 05 00 1A 00 6C 00 6F 00 63  .e.m.y.....l.o.c
00 61 00 6C 00 2E 00 41 00 63 00 61 00 64 00 65  .a.l...A.c.a.d.e
00 6D 00 79 00 07 00 08 00 2E 76 48 74 53 21 CD  .m.y......vHtS!Í
01 00 00 00 00        

                       ..... 
```

最后这个以红色突出显示

```
No Proxy-Authenticate Header is present.

No WWW-Authenticate Header is present. 
```

这是否意味着身份验证数据在客户端和服务器之间的某处丢失？还是我一开始就没有通过任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:49:33.810

如果您可以通过浏览器访问该服务，我建议您传递您的用户名，包括域作为凭据。

用户名看起来像这样：DOMAIN\USER

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T09:56:05.657

我遇到了类似的问题，必须明确添加用户名和密码。

IE。

```
 wsCustomer.username = "something"
   wsCustomer.password = "something else" 
```

我猜你已经这样做了：

```
 Dim basicAuthenticationInfo As New System.Net.NetworkCredential("user", "pass") 
```

但也许值得一试

# servlets - 当我们在 jsp 页面或 java 类中显式创建 servlet 对象时会发生什么？它将如何影响性能？

> ID：10279104
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:29.830
> 
> 标签：servlets

当我们在页面或课堂上创建`Servlet`对象时，它是如何在内部工作的？它将如何影响性能？`JSP``Java`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:12:27.070

你不应该`new`像我们通常做的那样通过关键字显式调用servlet。在servlet的情况下，servlet容器负责实例化servlet。

对于 Web 应用程序的部署描述符中定义的每个 servlet，servlet 容器定位并加载该 servlet 类型的类。这可能在 servlet 引擎本身启动时发生，或者稍后在客户端请求实际委托给 servlet 时发生。

只有一个实例同时回答所有请求。这可以节省内存并允许 Servlet 轻松管理持久数据。

当一个人在页面或课堂上创建`Servlet`对象时，`JSP``Java`

> 您不能期望将其作为 Servlet 工作。

有关详细信息的答案，请在此处参考[BalusC 的答案](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T10:35:27.033

我们可以创建 servlet 类的对象。但是由于 servlet 的运行依赖于 web 容器提供的 servlet 上下文、请求、响应等，所以在容器环境之外创建一个也没有什么好处。

一句话—​​—通过这样做，我们不能期望像 servlet 一样工作。

# php - PHP5 和 DOM 操作两个 XML 文档

> ID：10279106
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:33.730
> 
> 标签：php, xml, dom

我正在开发一个应用程序，其中我使用两个看起来像这样的 XML 文档：

第一：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE markables SYSTEM "markables.dtd">
<markables xmlns="www.eml.org/NameSpaces/coref">
<markable id="markable_1" mmax_level="coref" span="word_1..word_4"> </markable>
<markable id="markable_2" mmax_level="coref" span="word_6..word_7"> </markable>
<markable id="markable_3" mmax_level="coref" span="word_10..word_24"> </markable>
</markables> 
```

第二个：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE words SYSTEM "words.dtd">
<words>
<word id="word_1">Alfa</word>
<word id="word_2">Beta</word>
<word id="word_3">Gamma</word>
<word id="word_4">Delta</word>
<word id="word_5">Zeta</word>
</words> 
```

然后我想使用 PHP5 和 DOM 对它们进行一些操作。这是PHP代码：

```
<?php

$xmlHitzakDok = new DOMDocument();
$xmlMarkDok = new DOMDocument();
if($xmlHitzakDok->load("words.xml") === FALSE){die('Errorea hitzen xml-a kargatzean');}
if($xmlMarkDok->load("coref.xml") === FALSE){die('Errorea markagarrien xml-a kargatzean');}
$xPath_Hitzak = new DOMXPath($xmlHitzakDok);
$xPath_Mark = new DOMXPath($xmlMarkDok);

$Hurrengo_HitzaID = "word_5";
$kont = 0;

foreach ($xPath_Hitzak->query('//words/word') AS $Hitza)
{
  $HitzaID = $Hitza->getAttribute('id');
    if ($HitzaID == $Hurrengo_HitzaID)
    {//GETS INTO HERE
           foreach ($xPath_Mark->query('//markables/markable') AS $Markagarria)
               {//DOESNT GET INTO HERE
          echo $HitzaID;
           }
        }
} 
```

我遇到的问题是我不知道为什么在运行代码时它没有进入嵌套的 foreach。有什么解决办法吗？

# asp-classic - 无法在 ASP 中执行查询

> ID：10279107
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:35.327
> 
> 标签：asp-classic

以下是我正在处理的 ASP 代码：

```
Dim sConnString, connection, sSQL, backgroundColor
sSQL = "SELECT firstName, lastName, email, zip, country, company, industry, revenue, timestamp FROM users"
sConnString=//a connection string
Set connection = Server.CreateObject("ADODB.Connection")
connection.Mode=adModeRead
connection.Open(sConnString)
connection.execute(sSQL)

Response.Write"<table>"
do while not connection.EOF
    if(backgroundColor="#f1f1f1")then
        backgroundColor="#ffffff"
    else
        backgroundColor="#f1f1f1"
    end if

    response.write"<tr backgroundColor="& backgroundColor & "></td>" & connection("firstName") & "</td><td>" & connection("lastName") & "</td><td>" & connection("email") & "</td><td>" & connection("zip") & "</td><td>" & connection("country") & "</td><td>" & connection("company") & "</td><td>" & connection("industry") & "</td><td>" & connection("revenue") & "</td><td>" & connection("timestamp") & "</td></tr>"

    connection.MoveNext
Loop
Response.Write"</table>"

connection.Close
Set connection = Nothing 
```

我收到以下错误：

> ADODB.Connection 错误“800a0bb9”
> 
> 参数类型错误、超出可接受范围或相互冲突。
> 
> /wsu.asp，第 13 行

第 13 行：

```
do while not connection.EOF 
```

你能帮我解决这个问题吗？

更新代码：

```
<html>
<body>
<%
Dim sConnString, connection, sSQL, backgroundColor
sSQL = "SELECT firstName, lastName, email, zip, country, company, industry, revenue, timestamp FROM users"
sConnString="a connection string for MS SQL database;"
Set connection = Server.CreateObject("ADODB.Connection")
Set rs = Server.CreateObject("ADODB.Recordset")
connection.Mode=adModeRead
rs.open sSQL,connection

Response.Write"<table>"
do while not connection.EOF
if(backgroundColor="#f1f1f1")then
backgroundColor="#ffffff"
else
backgroundColor="#f1f1f1"
end if

response.write "<tr backgroundColor="& backgroundColor & "></td>" & connection("firstName") & "</td><td>" & connection("lastName") & "</td><td>" & connection("email") & "</td><td>" & connection("zip") & "</td><td>" & connection("country") & "</td><td>" & connection("company") & "</td><td>" & connection("industry") & "</td><td>" & connection("revenue") & "</td><td>" & connection("timestamp") & "</td></tr>"

connection.MoveNext
Loop
Response.Write"</table>"

connection.Close
Set connection = Nothing
%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:06:00.770

在您的代码中查看以下编辑 - 您创建一个记录集，然后打开它并执行它

```
<html>
<body>
<%
Dim sConnString, connection, sSQL, backgroundColor,objrs
sSQL = "SELECT firstName, lastName, email, zip, country, company, industry, revenue, timestamp FROM users"    
Set connection = Server.CreateObject("ADODB.Connection")
connection.connectionstring = "put your connection string in here"
' replace put your connection string in here with your connection string
Set objrs= Server.CreateObject("ADODB.Recordset")   
connection.Open()
objrs.open sSQL,connection

Response.Write"<table>"
do while not objrs.EOF
if(backgroundColor="#f1f1f1")then
backgroundColor="#ffffff"
else
backgroundColor="#f1f1f1"
end if

response.write"<tr backgroundColor="& backgroundColor & "></td>" & objrs("firstName") & "</td><td>" & objrs("lastName") & "</td><td>" & objrs("email") & "</td><td>" & objrs("zip") & "</td><td>" & objrs("country") & "</td><td>" & objrs("company") & "</td><td>" & objrs("industry") & "</td><td>" & objrs("revenue") & "</td><td>" & objrs("timestamp") & "</td></tr>"

objrs.MoveNext
Loop
Response.Write"</table>"
%>
</body>
</html> 
```

一张纸条： -

这需要类似于-不确定您使用的是什么数据库-

```
 sConnString= "Provider=sqloledb;Data Source=ServerName;Initial Catalog=DatebaseName " 
```

或者，如果您有 dsn 连接，那么只需

```
sConnString = "DSN=xxxxx;uid=xxx;pwd=xxx" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:08:03.373

您将需要创建一个`Recordset`以从 SQL 查询中读取数据。您已经使用了连接本身。

试试下面的例子。

[这里](https://stackoverflow.com/questions/3837902/return-recordset-from-function-in-classic-asp)

# iphone - 找不到发布文件的位置

> ID：10279111
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:45.030
> 
> 标签：iphone, xcode4, osx-lion, osx-server

我最近将我的 XCode 升级到 4.3.2 并将我的操作系统升级到 Lion，以便我的应用程序可以与 IOS 5.1 plus 一起使用。我现在正在尝试升级几个旧应用程序，但找不到将应用程序文件上传到 Apple 的位置。

奇怪的是，我可以使用终端找到我的 DerivedData 文件夹的位置，但是当我尝试使用 Finder 时，Library 文件夹不存在。有什么我遗漏的，因为 Xcode 告诉我构建文件的路径是 /Users/SC/Library/Developer/XCode/DerivedData/MyAppFolder/... 但我在使用 Finder 时找不到它。当我使用 Finder 时，即使在我使用终端时显示库文件夹，它也不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:44:46.600

在 XCode 4 中构建和归档后，您可以转到 Window>Organizer>Archives 查看所有构建。您可以从那里验证并提交任何构建，或右键单击并选择“在 Finder 中显示”以找到该应用程序。

附言。请参阅我对 Lion 中的用户库的评论

# jquery - JSON字符串通过AJAX与jquery，Android

> ID：10279113
> 
> 赞同：0
> 
> 时间：2012-04-23T10:48:53.477
> 
> 标签：jquery, android, ajax, json, cordova

我一直在用phonegap在android中开发一个应用程序。任何人都可以帮助我如何调用我的 web 服务，通过我的 android 应用程序通过 AJAX 和 jquery 输出 JSON 字符串？非常感谢你的帮助。

我的 Jscript 中有这段代码：

```
$(document).bind("mobileinit", function(){
$.support.cors = true;
$.mobile.allowCrossDomainPages = true;
});

$.ajax({
  type: "POST",
  timeout: moneTimeout,
  url: "http://10.0.2.2:49878/SampleProject.aspx?p_trxn_type=doLogin&p_phoneNumber="+phoneNumber,
  error: function (xhr, status, errorThrown)
  { 
   alert(xhr.status);
  },
  dataType : "json",
  cache:false,
  async:false,
  success: function (ret)
  {
   try{
    var jsonObj = eval('(' + ret + ')');
    alert(jsonObj.Contacts.Contact['@phoneNumber']);
    alert(jsonObj.Contacts.Contact.LastName);
    alert(ret.Contacts.Contact['@phoneNumber'])
    alert(ret.Contacts.Contact.LastName);
   }
   catch(ex){
    alert(ex.message);
   }
   console.log(ret);
   alert(ret.length);
   alert(ret);
   alert(typeof ret);
   alert("success");
  }
 }); 
```

这是我喜欢从我的 c# webservice 获取的 JSON 数组：

```
 {"Contacts":{"Contact":{"@phoneNumber":"0002221111","@countryCode":"1","@typeCode":"73","@type":"Default, Mobile, DefaultContactNumber","@id":"04359c0dcca64638a5fcbb17b386ceed","Salutation":"Mr.","FirstName":"Tom","MiddleName":null,"LastName":"Cruise","NameSuffix":null,"PrimaryAddress":{"Street":{"#cdata-section":"3135 Teodoro Drive"},"Street2":{"#cdata-section":""},"City":{"#cdata-section":"Detroit"},"State":"MS","Country":"US","Postal":"48228"}}} 
```

我仍然收到警报：错误，并且它不显示来自我的 c# webservice 的 JSON 字符串数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:56:52.177

如果您正在寻找特定的 jquery。也许这会有所帮助

```
$.getJSON("http://yoururl.com?jsoncallback=?",  {
       requestParam: "someValue",  },  function(data) {
        //handle data  
       }
    ); 
```

有关更多信息，您可以查看：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:56:46.127

对我来说，我正在使用 Eclipse Helio 在 Android 上进行 phonegap 开发。我正在编写以下代码：（使用 Youtube API 和 JSONC 格式）

```
var myJsondoc = JSON.parse(data.text);
var writeintoHTML = document.getElementById('the_list');
writeintoHTML += myJsondoc.data.items[0].player.default; 
```

编辑抱怨“默认”为 Unexpected Token。起初，我忽略它。它编译并能够在我的 HTC 上运行。但是，当我在其他设备（Galaxy Tab 2.2、Galaxy S 2.3.4）上对其进行测试时，它们都无法正常工作。他们都有“Unexpected token default in file.....”的错误，因此，我将代码更改为使用YouTube API JSON格式。现在我所有的设备都在工作。只是 JSON 格式包含的数据比我需要的多，我试图使带宽使用率尽可能低。底线，我认为当变量与 oprand 同名时，JS 会抱怨变量。

# sql - 条件JOIN不同的表

> ID：10279116
> 
> 赞同：27
> 
> 时间：2012-04-23T10:49:13.463
> 
> 标签：sql, sql-server-2008, join, conditional

我想知道用户是否在2 个相关表中的**任何一个中有条目。**

**表**

```
USER (user_id)
EMPLOYEE (id, user_id)
STUDENT (id, user_id) 
```

用户可能有员工和/或学生条目。如何在一个查询中获取该信息？我试过了：

```
select * from [user] u
inner join employee e 
    on e.user_id = case when e.user_id is not NULL 
                        then u.user_id 
                        else null 
                   end
inner join student s 
    on s.user_id = case when s.user_id is not NULL 
                        then u.user_id 
                        else null 
                   end 
```

但它只会返回**两个**表中都有条目的用户。

### [SQL 小提琴示例](http://sqlfiddle.com/#!3/90216/2)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-23T10:57:45.597

您可以使用外部联接：

```
select *
  from USER u
  left outer join EMPLOYEE e ON u.user_id = e.user_id
  left outer join STUDENT s ON u.user_id = s.user_id
 where s.user_id is not null or e.user_id is not null 
```

或者（如果您对 EMPLOYEE 或 STUDENT 表中的数据不感兴趣）

```
select *
  from USER u
 where exists (select 1 from EMPLOYEE e where e.user_id = u.user_id)
    or exists (select 1 from STUDENT s  where s.user_id = u.user_id) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T11:07:11.237

如果您想将所有用户数据放在一起您可能有：

```
SELECT 
    user_id
    ,'Employee' AS Source
FROM 
    employee
UNION 
SELECT 
    user_id
    ,'Student' AS Source
FROM 
    student 
```

[http://sqlfiddle.com/#!3/90216/22](http://sqlfiddle.com/#!3/90216/22)

这也可以通过完全连接和 CASE 语句来完成：

```
SELECT 
    ISNULL(e.user_id,s.user_id) AS user_id
    ,CASE WHEN e.user_id IS NULL THEN 'Student' 
        ELSE 'Employee'
    END AS SOURCE
FROM 
    employee AS e 
    FULL JOIN student AS s
        ON s.user_id = e.user_id 
```

[http://sqlfiddle.com/#!3/90216/29](http://sqlfiddle.com/#!3/90216/29)

后者会将既是学生又是雇员的人组合成一排，并称他们为雇员。相比：

[http://sqlfiddle.com/#!3/2aa3e/1](http://sqlfiddle.com/#!3/2aa3e/1) 和 [http://sqlfiddle.com/#!3/2aa3e/2](http://sqlfiddle.com/#!3/2aa3e/2)

我让用户 1 成为学生和员工的地方

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-12T08:54:55.890

这样的解决方案也可以帮助你。

```
SELECT  S.*, P.*

,CASE
    WHEN S.ShipmentType = 'import' THEN SP.SupplierName
    WHEN S.ShipmentType = 'export' THEN C.CustomerName
END AS ShipmentDesination

FROM            tblShippments   S 
INNER JOIN      tblProducts     P   ON S.productId = P.productID  
LEFT OUTER JOIN tblCustomers    C   ON S.companyId = C.customerId AND S.ShipmentType = 'export'
LEFT OUTER JOIN tblSuppliers    SP  ON S.companyId = SP.supplierId AND S.ShipmentType = 'import' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T10:51:24.167

如果您将员工表和学生表视为一个表，则可以使用左连接：

```
select * 
from user u
left join 
(
   select 'Employee' as UserType,
          id,
          user_id
     from employee e 
    union all
   select 'Student',
          id,
          user_id
     from student s 
) r
  ON u.user_id = r.user_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T11:01:54.143

你写为 2 个单独的 SELECT 语句的 UNION 怎么样

例如： `SELECT * FROM User U JOIN Employee E ON E.User_Id = U.User_Id UNION SELECT * FROM User U JOIN student S ON S.User_Id = U.User_Id` 我不明白为什么你需要 CASE 语句，它看起来是多余的。如果您想要所有用户并显示空值，请使用 LEFT OUTER JOIN。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-27T17:02:26.560

适用于 mysql v5.6+
架构：

```
CREATE TABLE USER (user_id INT);
CREATE TABLE employee (id INT, user_id INT);
CREATE TABLE student (id INT, user_id INT);

INSERT INTO USER SELECT 1;
INSERT INTO USER SELECT 2;
INSERT INTO USER SELECT 3;
INSERT INTO USER SELECT 4;

INSERT INTO employee SELECT 1, 1;
INSERT INTO employee SELECT 2, 4;

INSERT INTO student SELECT 1, 2; 
```

第一个解决方案，完全外连接不适用于 mysql v5.6+：

```
 SELECT 
    IF(e.user_id IS NULL,s.user_id,e.user_id) AS user_id
    ,CASE WHEN e.user_id IS NULL THEN 'Student' 
        ELSE 'Employee'
    END AS SOURCE
FROM 
    employee AS e 
    LEFT JOIN student AS s
        ON (s.user_id = e.user_id)
    UNION
        SELECT 
    IF(e.user_id IS NULL,s.user_id,e.user_id) AS user_id
    ,CASE WHEN e.user_id IS NULL THEN 'Student' 
        ELSE 'Employee'
    END AS SOURCE
    FROM 
    employee AS e 
     RIGHT JOIN student AS s
        ON (s.user_id = e.user_id) 
```

替代解决方案：

```
SELECT   IF(e.user_id IS NULL,s.user_id,e.user_id) AS user_id,
 CASE WHEN e.user_id IS NULL THEN 'Student' 
            ELSE 'Employee'
        END AS SOURCE
 FROM   USER AS u
 LEFT OUTER JOIN employee e ON (u.user_id = e.user_id) 
 LEFT OUTER JOIN student s ON (u.user_id = s.user_id) 
 WHERE s.user_id IS NOT NULL OR e.user_id IS NOT NULL 
```

其他替代解决方案：

```
 SELECT u.user_id,SOURCE 
FROM USER u
INNER JOIN 
(
   SELECT 'Employee' AS SOURCE,id,user_id FROM employee e 
    UNION ALL
   SELECT 'Student',id,user_id  FROM student s 
) r ON u.user_id = r.user_id 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-06T12:42:15.863

```
SELECT   OrderID, Quantity,  O.ProductID , ProductName,
CASE
WHEN Quantity > 3 THEN 'The quantity is More than 3'
WHEN Quantity = 3 THEN 'The quantity is Equal to  3'
ELSE 'The quantity is Less than 3'
END AS QuantityText

FROM            tb_OrderDetail O 
INNER JOIN      tb_Product     P   ON O.ProductID = P.ProductID 
```

# jakarta-ee - Websphere Application Server 6 中的 MDB 池和 Thred 池配置

> ID：10279118
> 
> 赞同：0
> 
> 时间：2012-04-23T10:49:23.000
> 
> 标签：jakarta-ee, ejb, websphere-6.1

我正在使用 Websphere 应用程序服务器 (WAS) 6.1

有人可以帮助我为该特定 MDB 配置最大 MDB 池大小和最大线程池大小吗？我只需要在一个线程中执行一个 MDB 实例，一次执行不会超过 1 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:58:05.603

对于可扩展性而言，这似乎是一个糟糕的主意。在数据库级别（或 MDB 正在运行的任何事务系统）处理并发似乎更好。

如果您确实认为有必要，您可以通过将您的 EJB 的[poolSize](http://publib.boulder.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/rejb_ecnt.html)属性设置为 H1（“硬”实例最大值为 1）来模拟单例 MDB。这将导致 EJB 容器最多创建一个 EJB 实例，这意味着将向 MDB 传递消息的每个线程都将阻塞等待该实例可用。

```
-Dcom.ibm.websphere.ejbcontainer.poolSize=YourApp#YourModule.jar#YourEJBName=H1 
```

无法配置每个 MDB 线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:42:54.610

如果您不需要并发处理（这是 MDB 通常用于），您可以限制`maximum sessions`此 MDB 在 WAS 中绑定到的侦听器端口的参数。

# php - Codeigniter 中的会话销毁

> ID：10279125
> 
> 赞同：0
> 
> 时间：2012-04-23T10:49:50.583
> 
> 标签：php, codeigniter

我正在为我的应用程序使用 Code igniter。我在可能的应用程序主页、仪表板和设置中有三个控制器和三个模型。我已经在主页模型中启动了会话，并希望在仪表板控制器中销毁它。这是我的代码

```
foreach($query->result(as $row) {
   $info = array(
       'loginid'    => $row->loginid,
       'firstname'  => $row->firstname,
       'emailid'    => $row->emailid,
       'logged_in'  => TRUE
   );
}

$this->session->set_userdata($info); 
```

但是我的会话数组没有显示在仪表板控制器中。

我应该如何销毁会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:50:50.440

尝试这个：

> $this->session->sess_destroy();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:51:35.833

您使用以下命令销毁会话：

```
$this->session->sess_destroy(); 
```

根据[codeigniter 会话文档](http://codeigniter.com/user_guide/libraries/sessions.html)。

也就是说，我不确定它与您发布的代码有什么关系，而且我很确定它不会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T06:51:23.607

```
$this->session->set_userdata([
                    'logged_in'  => TRUE
                    'loginid'    => $row->loginid,
                    'firstname'  => $row->firstname,
                    'emailid'    => $row->emailid,       
                ]); 
```

并在您的控制器中像这样取消设置

```
$this->session->set_userdata([
            'logged_in' => false,
            'loginid' => null
        ]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-10T09:16:45.243

> foreach($query->result(as $row) 错误

请用

```
foreach($query->result() as $row)
{
    $info = array( 
                'loginid'  => $row->loginid ,
                'emailid' => row->emailid,
           );
} 
```

在仪表板控制器中显示。尝试这个

> $this->session->set_userdata($info);

然后你可以通过

> $this->session->sess_destroy();

# javascript - 如何在 twitter 引导下拉菜单中使用悬停图像

> ID：10279126
> 
> 赞同：1
> 
> 时间：2012-04-23T10:49:50.640
> 
> 标签：javascript, css, hover, twitter-bootstrap

使用推特引导程序。在该站点上，我有一个顶部导航栏，其中包含一些具有 dd 菜单的链接，而有些只是静态链接。

我正在使用 img 而不是文本锚来构建链接。

我想将悬停效果应用于导航栏中的每个链接。这可以通过换出图像或在精灵中加载不同的背景位置来完成。

我正在使用指定导航栏的常规方式，

```
 <ul class="nav nav-pills">
         <li class="dropdown" id="hifiMenu">
               <a class="dropdown-toggle" data-toggle="dropdown" href="#hifiMenu"><img src="$PRE/images/newhifi.png"></a>
         <ul class="dropdown-menu">
               <li class="mainitem"><a href="$PRE/newhifi">BY BRAND</a></li> 
```

是否可以将鼠标悬停在#hifiMenu 的 A 链接上，并且当下拉菜单被激活时，图像是否已换出？

不太确定使用 TB 的导航栏控件的最佳做法是什么。有没有人尝试过这样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:25:24.943

正如我的问题中提到的，我有以下导航栏项目：

```
<ul class="nav nav-pills">
     <li class="dropdown" id="hifiMenu">
           <a class="dropdown-toggle" data-toggle="dropdown" href="#hifiMenu"><img src="newhifi.png"></a>
     <ul class="dropdown-menu">
           <li class="mainitem"><a href="newhifi">BY BRAND</a></li>
.... 
```

为了让悬停工作，我首先创建了一个包含每个正常/突出显示的图像的大型精灵图像。

然后我为每个链接设置了一个新样式：

```
#hifiMenuLink {
    width:71px;
    height: 11px;
    background-image: url(path_to_sprite);
    background-repeat: no-repeat;
    background-position: 0px -6px;
} 
```

然后悬停：

```
#hifiMenuLink:hover {
    width:71px;
    height: 11px;
    background-image: url(path_to_sprite);
    background-repeat: no-repeat;
    background-position: 0px -37px;
} 
```

然后我将 ID hifiMenuLink 分配给了锚点本身......

```
<a id="hifiMenuLink" ... 
```

那是我快速而肮脏的解决方案。

希望这可以帮助将来的其他人。

# php - 每 5 秒从表中删除记录

> ID：10279129
> 
> 赞同：1
> 
> 时间：2012-04-23T10:50:25.497
> 
> 标签：php, mysql

我想每 5 秒删除一条记录，并且也有一个 cron 作业。但是一旦 cron 启动，它会立即删除所有记录。

无论我在这里是否使用 sleep 5 都不会影响执行

使用的代码如下。

```
mysql_select_db($database_xm, $xm);
$query_ex = "SELECT * FROM table";
$ex = mysql_query($query_ex, $xm) or die(mysql_error());
$row_ex = mysql_fetch_assoc($ex);

$RecordCount=mysql_num_rows($ex); 

for ($l=0;$l<=$RecordCount;$l++) {

mysql_select_db($database_xm, $xm);
$query_ss = "delete from table2 limit 1";
$ss = mysql_query($query_ss, $xm) or die(mysql_error());

    sleep(5);   
    ob_flush(); 

} 
```

如何每 5 秒删除一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:59:47.907

您为什么不简单地选择一条记录并从您已有的信息中识别它`$row_ex`？这样您还可以控制删除记录的顺序。

```
for ($l=0;$l<=$RecordCount;$l++) {
    $row = $row_ex[$l];
    $query_ss = "delete from table2 WHERE id = ".$row['id']; // EXAMPLE
    $ss = mysql_query($query_ss, $xm) or die(mysql_error());
    sleep(5);   
    ob_flush(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:54:57.817

cron min exec time 是 1m，你必须做不定式循环，在每个循环之后我必须在里面 sleep(5)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T10:55:07.397

SET ROWCOUNT 1 将行数限制为 1

例如：

-- 将行数限制为 1 SET ROWCOUNT 1

从表 2 中删除

-- 将限制设置回默认值 SET ROWCOUNT 0

会做的。

# jquery - JQuery - 获取函数的线索

> ID：10279130
> 
> 赞同：1
> 
> 时间：2012-04-23T10:50:34.030
> 
> 标签：jquery, scope, each

我必须通过一些代码并找到以下功能，我不明白。什么是hintContainer，它获取each() 的返回值，并且似乎这个对象应该放在回调函数中？

提前感谢您的任何猜测，不幸的是我无法联系开发人员。简而言之，该函数应该使用类 userHinterPanel 抓取所有 div 并显示它们。

```
function prepareHintMessages() {
// gets all userHintePanels
var hintContainer = jQuery('div.userHintPanel').each(function() {
    hintContainer = jQuery(this);
    // hint content div
    var hintContent = hintContainer.next();
    // hint content text
    var closeText = hintContainer.find('div.closeTextContainer');
    // inserts text into the content container
    hintContent.insertBefore(closeText);
    // show the complete hint panel
    hintContainer.parent().show();
});
} 
```

更新 HTML 片段，这是信息框：

```
<form id="form" name="form" method="post"
action="xxx.jsf"
enctype="application/x-www-form-urlencoded" class="newPatientForm">
<div id="form_showAllHintsContainer" class="showAllHintsContainer"
    onclick="jQuery('#form_showAllUserHints').click();"
    title="Alle verfügbaren Hinweise auf dieser Seite einblenden">
    ?<input class="hidden" id="form_showAllUserHints"
        name="form_showAllUserHints"
        onclick="A4J.AJAX.Submit('form',event,{'oncomplete':function(request,event,data){prepareHintMessages();},'similarityGroupingId':'form_showAllUserHints','parameters':{'userPrefActionParamShow':'NEW_PATIENT_HINT','form_showAllUserHints':'form_showAllUserHints'} } );return false;"
        value="showUserHints" type="button" />
</div>
<div class="generalPadding">
    <div id="form_hintRerenderContainer">
        <div id="form_newPatientHintWithIsh"
            class="userHintPanelContainer newPatient">
            <div id="form_newPatientHintWithIshHintPanel"
                class="alert-message block-message warning userHintPanel">
                <a href="#" onclick="closeHintMessage(this);"
                    title="Hinweis ausblenden" class="close">×</a>
                <div class="header">Hinweis</div>
                <div class="text">
                    <div class="closeTextContainer"
                        style="position: relative; height: 20px;">
                        <a href="#" onclick="closeHintMessage(this);"
                            style="font-size: 14px;" class="close"> Hinweis ausblenden</a>
                    </div>
                </div>
                <input class="hidden hideHintButton"
                    id="form_newPatientHintWithIshHintPanelHideButton"
                    name="form_newPatientHintWithIshHintPanelHideButton"
                    onclick="A4J.AJAX.Submit('form',event,{'similarityGroupingId':'form_newPatientHintWithIshHintPanelHideButton','parameters':{'form_newPatientHintWithIshHintPanelHideButton':'form_newPatientHintWithIshHintPanelHideButton','userPrefActionParam':'NEW_PATIENT_HINT'} } );return false;"
                    value="hideUserHints" type="button" />
            </div>
            <div class="hintContent">
                <ul>...</ul>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:20:39.683

它使用类“userHintPanel”捕获所有元素，并在关闭文本容器之前添加一些内容，然后显示所有准备好的 userHintPanels

一样东西：

```
 var closeText = hintContainer.find('div.closeTextContainer'); is a bit strange. 
```

它的目标是这样的：

```
 <div class="closeTextContainer">Panel x Close</div> 
```

但是在您的代码中，它不会抓取文本，而是元素本身。开发商可能是这个意思吗？

```
 var closeText = hintContainer.find('div.closeTextContainer').text(); 
```

如果确实是要抓取元素，最好将 var 重命名为“closeTextElement”，以便更好地理解代码。

另一个奇怪的事情：

```
var hintContent = hintContainer.next(); 
```

这将导致在最后一个 userHintPanel 中，hintContent 为“未定义”。这是故意的吗？

另一个非常重要的事情：

userHintPanel 的父级是 iFrame 吗？如果是这种情况，则以下语句在 Safari 中肯定会失败：

```
 hintContainer.parent() 
```

您应该得到的错误是： SCRIPT5022: DOM Exception: HIERARCHY_REQUEST_ERR (3)

# asp.net-mvc - 配置 ASP.NET MVC 以针对 AD 进行身份验证

> ID：10279140
> 
> 赞同：60
> 
> 时间：2012-04-23T10:51:18.083
> 
> 标签：asp.net-mvc, active-directory

针对 Active Directory 对 ASP.NET MVC 应用程序的用户进行身份验证的高级步骤是什么？

我假设是这样的：

1.  修改 web.config 以使用 Windows 身份验证
2.  配置 web.config 以使用 ActiveDirectoryMembershipProvider
3.  将 web.config 配置为使用在 AD 中查找的自定义 RoleProvider

以上看起来是否合理，如果是，我将有效的用户检测逻辑放在哪里？

在我的情况下，有效用户是特定 AD 域中的某人。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-23T11:04:45.183

# 表单认证

您可以使用普通表单身份验证针对 Active Directory 对用户进行身份验证，因为您只需要 AD 连接字符串：

```
<connectionStrings>
  <add name="ADConn" connectionString="LDAP://YourConnection" />
</connectionStrings> 
```

并添加 Membership Provider 以使用此连接：

```
<membership defaultProvider="ADMembership">
  <providers>
    <add name="ADMembership"
         type="System.Web.Security.ActiveDirectoryMembershipProvider,
               System.Web,
               Version=2.0.0.0, 
               Culture=neutral,
               PublicToken=b03f5f7f11d50a3a"
         connectionStringName="ADConn"
         connectionUsername="domain/user"
         connectionPassword="pwd" />
  </providers>
</membership> 
```

您将需要使用**username@domain**来成功验证用户身份。

*这里有一些东西可以让你开始*

*   [http://helios.ca/2009/05/04/aspnet-mvc-forms-authentication-with-active-directory/](http://helios.ca/2009/05/04/aspnet-mvc-forms-authentication-with-active-directory/)

* * *

# Windows 身份验证

如果您开始新项目，您可以随时从模板中选择**Intranet 应用程序**，一切都会为您处理好

![在此处输入图像描述](../Images/7849338a24461b1c843333f9d9a2237d.png)

如果要手动执行，则需要更改：

1.  启用 Windows 身份验证
2.  禁用匿名身份验证

有关在 IIS7/8 和 IISExpress 上执行此操作的详细信息：

> **IIS 7 和 IIS 8**
> 
> 1.  打开 IIS 管理器并导航到您的网站。
> 2.  在功能视图中，双击身份验证。
> 3.  在身份验证页面上，选择 Windows 身份验证。如果 Windows 身份验证不是一个选项，您需要确保在服务器上安装了 Windows 身份验证。
>     
>     
>     
>     要在 Windows 上启用 Windows 身份验证： **a)**在控制面板中打开“程序和功能”。 **b)**选择“打开或关闭 Windows 功能”。 **c)**导航到 Internet 信息服务 > 万维网服务 > 安全并确保选中 Windows 身份验证节点。
>     
>     
>     
>     要在 Windows Server 上启用 Windows 身份验证： **a)**在服务器管理器中，选择 Web 服务器 (IIS) 并单击添加角色服务 **b)**导航到 Web 服务器 > 安全并确保选中 Windows 身份验证节点。
>     
>     
> 4.  在“操作”窗格中，单击启用以使用 Windows 身份验证。
>     
>     
> 5.  在身份验证页面上，选择匿名身份验证。
> 6.  在“操作”窗格中，单击禁用以禁用匿名身份验证。
> 
> **IIS 快递**
> 
> 1.  右键单击 Visual Studio 中的项目并选择使用 IIS Express。
> 2.  在解决方案资源管理器中单击您的项目以选择该项目。
> 3.  如果“属性”窗格未打开，请将其打开 (F4)。
> 4.  在项目的“属性”窗格中： a) 将“匿名身份验证”设置为“禁用”。b) 将“Windows 身份验证”设置为“启用”。

在你`web.config`有类似的东西

```
<system.web>
  <authentication mode="Windows" />

  <authorization>
    <deny users="?" />
  </authorization>
</system.web> 
```

就是这样！

现在，当您想要用户身份时，只需调用

```
@User.Identity.Name 
```

这将向您展示我的`Domain\Username`喜好：

![在此处输入图像描述](../Images/203c5538e011c9fd5a2dd47b691cbe1d.png)

*这里有一些东西可以让你开始*

*   [http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-windows-authentication-cs](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-windows-authentication-cs)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-06T11:22:22.683

这是教程[Chris Schiffhauer - Implement Active Directory Authentication in ASP.NET MVC 5 中](https://web.archive.org/web/20160412061735/http://www.schiffhauer.com:80/mvc-5-and-active-directory-authentication/ "www.schiffhauer.com/mvc-5-and-active-directory-authentication/ 的存档")的解决方案：

> 您可以通过直接根据用户的域凭据对用户进行身份验证来保护 Active Directory 网络上的 MVC Web 应用程序。
> 
> ### 第 1 步：帐户控制器.CS
> 
> 将您的`AccountController.cs`文件替换为以下内容：
> 
> ```
> using System.Web.Mvc;
> using System.Web.Security;
> using MvcApplication.Models;
> 
> public class AccountController : Controller
> {
>     public ActionResult Login()
>     {
>         return this.View();
>     }
> 
>     [HttpPost]
>     public ActionResult Login(LoginModel model, string returnUrl)
>     {
>         if (!this.ModelState.IsValid)
>         {
>             return this.View(model);
>         }
> 
>         if (Membership.ValidateUser(model.UserName, model.Password))
>         {
>             FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
>             if (this.Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
>                 && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
>             {
>                 return this.Redirect(returnUrl);
>             }
> 
>             return this.RedirectToAction("Index", "Home");
>         }
> 
>         this.ModelState.AddModelError(string.Empty, "The user name or password provided is incorrect.");
> 
>         return this.View(model);
>     }
> 
>     public ActionResult LogOff()
>     {
>         FormsAuthentication.SignOut();
> 
>         return this.RedirectToAction("Index", "Home");
>     }
> } 
> ```
> 
> ### 第 2 步：帐户视图模型.CS
> 
> 更新您的`AccountViewModels.cs`（或任何您的 Account 模型类的名称）以仅包含此 LoginModel 类：
> 
> ```
> using System.ComponentModel.DataAnnotations;
> 
> public class LoginModel
> {
>     [Required]
>     [Display(Name = "User name")]
>     public string UserName { get; set; }
> 
>     [Required]
>     [DataType(DataType.Password)]
>     [Display(Name = "Password")]
>     public string Password { get; set; }
> 
>     [Display(Name = "Remember me?")]
>     public bool RememberMe { get; set; }
> } 
> ```
> 
> ### 第 3 步：WEB.CONFIG
> 
> 最后，更新您的`Web.config`文件以包含这些元素。
> 
> ```
> <?xml version="1.0" encoding="utf-8"?>
> <configuration>
>   <system.web>
>       <authentication mode="Forms">
>           <forms name=".ADAuthCookie" loginUrl="~/Account/Login" timeout="45" slidingExpiration="false" protection="All" />
>       </authentication>
>       <membership defaultProvider="ADMembershipProvider">
>           <providers>
>               <clear />
>               <add name="ADMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider" connectionStringName="ADConnectionString" attributeMapUsername="sAMAccountName" />
>           </providers>
>       </membership>
>   </system.web>
>   <connectionStrings>
>       <add name="ADConnectionString" connectionString="LDAP://primary.mydomain.local:389/DC=MyDomain,DC=Local" />
>   </connectionStrings>
> </configuration> 
> ```
> 
> ### 获取 LDAP 连接字符串可能需要几个步骤：
> 
> 1.  安装适用于 Windows 7 的远程服务器管理工​​具。确保按照安装后的说明通过控制面板将该功能添加到 Windows。
>     
>     
> 2.  打开命令提示符并输入`>dsquery server`
>     
>     
>     
>     假设该命令返回以下内容：
>     
>     
>     
>     ```
>     CN=PRIMARY,CN=Servers,CN=DefaultFirstName,CN=Sites,CN=Configuration,DC=MyDomain,DC=Local 
>     ```
>     
>     
>     *   服务器名称由第一个 CN 值和最后两个 DC 值组成，用点分隔。所以它是`primary.mydomain.local`。
>         
>         
>     *   端口是 389。
>         
>         
>     *   端口和正斜杠之后的连接字符串部分是结果中以第一个 开头的部分`"DC"`。所以它是`DC=MyDomain,DC=Local`。
>         
>         
>     *   所以完整的连接字符串是
>         
>         
>         
>         ```
>         LDAP://primary.mydomain.local:389/DC=MyDomain,DC=Local. 
>         ```
>         
>         
>     *   用户将只使用他们的用户名登录，而不使用域。所以正确的用户名是 C​​hris，而不是 MYDOMAIN\Chris。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T19:32:22.300

我发现这个链接检查 AD 安全组：

[ASP.NET MVC 5 中的 Active Directory 身份验证与表单身份验证和基于组的授权](http://www.benramey.com/2014/10/20/active-directory-authentication-in-asp-net-mvc-5-with-forms-authentication-and-group-based-authorization/)

唯一的问题是此设置使用登录页面来捕获 AD 的用户名/密码凭据。我将身份验证从“FORMS”更改为“WINDOWS”，因为我的应用程序将始终从网络内访问。如果您不打算使用 FORMS 身份验证，也不要忘记`<forms>`从标签中删除子标签。`<authentication>`

# java - 从数据库 SQL 填充 JList

> ID：10279143
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:51:32.717
> 
> 标签：java, sql, swing, jdbc, jcombobox

我一直在尝试用我的数据库中存在的信息填充下拉列表，但失败得很惨。我看过多个指南，并且有一些成功的代码我无法复制，因为我是新手，可能错过了一些步骤。这是我目前正在尝试的：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.sql.*;

public class populategui extends JFrame
{
    private JComboBox box;
    private JLabel picture;
    private static String[ ] filename = {rs.next};

    {
        try
    {        
            Class.forName(com.microsoft.jdbc.sqlserver);
            Connection con = (Connection)DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName=LIVE;integratedsecurity=true");
            Statement st = con.createStatement();
            String query="SELECT TOP(10)*FROM ERIT";
            ResultSet rs = st.executeQuery(query);
            while(rs.next());
    }
    catch(Exception e)
    {  
    }
    };

            public populategui(){
                super ("the title");
                setLayout(new FlowLayout());
                box=new JComboBox(filename);

            }

    } 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:15:30.550

您的部分问题是您正在“挤压”可能告诉您问题所在的异常。将其更改为（至少）：

```
try {
    ...
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

这样你就可以看到抛出了什么异常......

更好的是，记录异常。

* * *

作为一般规则，抓住是个坏主意`java.lang.Exception`，因为您最终可能会捕获各种您没有预料到的异常。这是一个可怕的想法，捕获异常并继续，好像没有出错一样。如果你丢掉关键证据，就很难弄清楚为什么你的程序不起作用。

* * *

最后，您似乎正在尝试通过复制和粘贴您在 Internet 上找到的示例来编写 Java 代码。这是编写不可靠代码的秘诀。你需要正确地*学习*这门语言，去购买并阅读一本关于 Java 编程的好教科书，或者学习（免费的）Oracle Java 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:28:39.190

我认为你的主要问题是在你的循环中没有操作：

```
ResultSet rs = st.executeQuery(query);
while(rs.next()); 
```

该代码是扩展的：

```
ResultSet rs = st.executeQuery(query);
while(rs.next()){
// nothing to to (n-times)
} 
```

# html - 无论 URL 参数，所有页面的后备？

> ID：10279151
> 
> 赞同：4
> 
> 时间：2012-04-23T10:51:48.077
> 
> 标签：html, html5-appcache

我在清单中有以下 FALLBACK 部分

```
FALLBACK:
*.php offline.html
/ offline.html
*/* offline.html 
```

我正在尝试使用 Firefox 及其离线工作功能。这适用于任何 URL，如 pageA.php、pageB.php 等。但是当我输入这样的 URL 时

```
pageA.php?parameter=1&ddd=2 
```

然后不显示离线页面，仅显示警告消息：

> Firefox 目前处于离线模式，无法浏览网页

任何想法如何修改清单，以便带有参数的 URL 也将回退到 offline.html？

# java - 关于字节条件

> ID：10279156
> 
> 赞同：0
> 
> 时间：2012-04-23T10:52:05.883
> 
> 标签：java

我陷入了一个问题。我有以下方法：

```
public byte determineCardType(final IInput inputData) {
    byte cardType = UNKNOWN_CARD;
    try {
      if (isWagRewardsLoyaltyCard(inputData))
        cardType = WAG_LOYALTY_CARD_TYPE;
      else if (isDRCard(inputData))   //checking that card scanned and swiped is a DR Card
        cardType = DR_CARD_TYPE;      
           else if (isWagRewardsPartnerCard(inputData))
        cardType = AARP_CARD_TYPE;
      return cardType;
    } catch (Exception e) {
      return UNKNOWN_CARD;
    }
  }
} 
```

然后，我有另一段代码，我在其中检查从上述方法返回的卡类型。

```
if((aarpCardSupport.isAARPCard(input))||(determineCardType(input)==DR_CARD_TYPE))  
        {
        return true;
        }else if((isDRCard(input))&&(isDRLoayltyEnabled())) //would return 1 for DR card only when isDRLoayltyEnabled returns true 
        {
          return true;
        }       
        return false ;  
} 
```

但是在上面的代码中，确定卡类型显示错误，因为它的返回类型是字节，我无法比较使用

```
if((aarpCardSupport.isAARPCard(input))||(determineCardType(input)==DR_CARD_TYPE))  , 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:58:44.087

```
if (aarpCardSupport.isAARPCard(input)
    || determineCardType(input) == (byte)DR_CARD_TYPE) 
```

或者有

```
public static final byte DR_CARD_TYPE = (byte) -2;
// Byte is signed, hence 254 = 256 - 2. 
```

* * *

***第二次尝试：***

假设 DR_CARD_TYPE 既是 an`int`并且可能在 128-255 范围内，请尝试：

```
if (aarpCardSupport.isAARPCard(input)
    || ((int)determineCardType(input)) & 0xFF == DR_CARD_TYPE & 0xFF) 
```

不过不太可能。也许错误在于（其他地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:40:23.920

如果您使用的是字节值，则不能使用 not logic 'and'`&&`或 'or' `||`。如果要使用按位“和”或“或”运算符，则需要分别使用`&`和`|`。

# javascript - 如何根据一组动态图像设置 div 宽度？

> ID：10279159
> 
> 赞同：0
> 
> 时间：2012-04-23T10:52:30.253
> 
> 标签：javascript, dynamic, html

我有一组 15 张水平堆叠的图像。根据视口大小，它们的大小是完全动态的。

要将页面扩展到 100% 以上，我使用了一个 DIV，它需要定期更新其宽度，并使用 15 个图像的宽度 + 固定数量。

我对javascript相当陌生，但我环顾四周，能够拼凑一个简单的脚本并制作了一个测试页面。

**更新，这是我无法工作的测试页面的完整代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
<script type="text/javascript">
window.onresize = function(event) { 
var img = document.getElementById('1');   
var w1 = parseInt(img.clientWidth);  
var img = document.getElementById('2');   
var w2 = parseInt(img.clientWidth);  

d.style.width= w1 + w2 + 400;  
} 
</script>
<style type="text/css">
  html,body{
  margin:0;
  padding:0;
  border:none;
  overflow-y:hidden;
}
.gal{
  vertical-align:middle;      
} 
</style>
</head>

<body style="color: #1b1b1d">
<div style="position:absolute; width:18500px; height:100%; margin:0px; padding:0px; left:0px; right:0px;z-index:1;background-color:#1b1b1d">
<img id="1" class="gal" height="100%" src="image1.jpg" />&nbsp;
<img id="2" class="gal" height="100%" style="max-height:652px;max-width:1024px" src="image1.jpg" />&nbsp;
</div>
</body>

</html> 
```

它在脚本末尾有和没有 +“px”都无法工作。

无论出于何种原因，它根本不起作用。任何人都可以在这里帮助指导我吗？我是新手。如果有帮助，我已经安装了另一个复制和粘贴脚本的 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:55:36.393

尝试这个：

```
var img = document.getElementById('#1');  
var w1 = img.clientWidth; 
var img = document.getElementById('#2');  
var w2 = img.clientWidth; 

d.style.width = (w1 + w2 + 400) + "px"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:55:52.763

尝试这个：

```
var img = document.getElementById('1');  
var w1 = parseInt(img.clientWidth); 
var img = document.getElementById('2');  
var w2 = parseInt(img.clientWidth); 

d.style.width= (w1 + w2 + 400) + "px"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:02:06.307

我认为脚本中的最后一行：

```
d.style.width="w1 + w2 + 400"; 
```

不需要在引号中，即：

```
d.style.width= w1 + w2 + 400; 
```

关于动态更新宽度 - 您确实需要将此脚本附加到浏览器的 resize 事件来处理它。IE：

```
window.onresize = function(event) {
    //your code here
} 
```

# objective-c - 懒惰地加载 NSTableView

> ID：10279161
> 
> 赞同：2
> 
> 时间：2012-04-23T10:52:34.993
> 
> 标签：objective-c, cocoa, nstableview

在 iOS 上，NSTableView (UITableView) 是延迟加载的，因为表格只显示当前视图所需的单元格，而不是更多。当用户向上或向下滚动时，会从数据源加载更多信息。

OSX有类似的东西吗？我有一个 NSTableView 有 1000 多条记录要加载（+ 多列），这导致加载延迟以及向上或向下滚动时的延迟。

这种“延迟”加载会是一个好的解决方案吗（如果可能的话）？或者也许是类似的东西？

谢谢。

PS关于加载过程-我使用两种常用方法

```
-(id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex 
```

和

```
-(NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView 
```

加载数据。其中有 if 语句来检查一些变量，因为我有 2 个包含数据的组合框，当包含“ALL”和“ALL”时会加载这 1000 多条记录。如果组合框不是“ALL”和“ALL”，则只加载几条记录，加载得很好。

鉴于您已经解释过延迟加载是自动完成的，我认为问题在于我正在从 XML 文件加载数据，因此解析可能会占用大量处理时间。

我虽然在运行时将 XML 文件中的数据加载到 NSDictionary 中，并将其保存在内存中，以便在需要时使用，这样我就可以避免实际需要显示信息时的加载时间。

你怎么看？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:19:13.197

您肯定希望将 XML 文件缓存到某种数据结构中。该方法将为*每个可见单元*`tableView:objectValueForTableColumn:row:`调用一次。如果您有很多列，则很容易看到 200 个单元格。向下翻页，这些单元格都发生了变化，您的 XML 文件加载了 200 次，并且滚动变得迟缓。

 *即使只为特定列中的每个单元格加载和解析 XML 文件，它也会很慢并且应该修复。

`tableView:objectValueForTableColumn:row:`您可以通过返回`nil`它会解析 XML 文件的位置来验证缓存是否必要。进行此更改后，它滚动是否顺畅，还是有其他问题？这显然会使应用程序无法使用，但在实施之前，您应该始终检查优化是否必要和充分。*

# ruby-on-rails - Simple_form 引导样式内联表单无法正常工作

> ID：10279164
> 
> 赞同：15
> 
> 时间：2012-04-23T10:52:58.143
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

我有一个有效的 twitter bootstrap 安装和简单的表单生成以下内容：

```
<form accept-charset="UTF-8" action="/find_map" class="simple_form form-inline" id="new_location" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="p5CSoidWaoGMfHY0/3ElWi0XJVg6Cqi9GqWRNlJLBQg=" /></div>
        <div class="control-group string required"><div class="controls"><input class="string required" id="location_address" name="location[address]" placeholder="Address" size="50" type="text" /></div></div><input class="btn" name="commit" type="submit" value="Find!" />
</form> 
```

不知何故，“寻找！” 按钮不会与搜索框出现在同一行。有任何想法吗？

谢谢！

更新：

抱歉，我应该提到所有标记都是由 simple_form 基于以下内容生成的：

```
<%= simple_form_for @location, :url => find_map_path, :html => { :class => 'form-inline' } do |f| %>

        <%= f.input :address, :label => false, :placeholder => "Address" %>
        <%= f.submit "Find!", :class => 'btn' %>

<% end %> 
```

所以，真的，生成的标记似乎存在问题，即使我已经运行了 simple_form 的引导安装等。

![在此处输入图像描述](../Images/c6be4127369376ca2525ab3f27321e75.png)

上图显示了一个直接的 html 表单

```
<form class="form-inline">
  <input type="text" class="input-small" placeholder="Email">
  <button type="submit" class="btn">Sign in</button>
</form> 
```

...在 simple_form 生成的那个之上。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T22:05:32.300

我认为这里有几个问题。一个是格式，simple_form`<div>`在输入字段周围添加 a 的方式。@Ron建议使用`input_field`simple_form 2.0.1 对我有用。我的示例是在联系人表中搜索姓名。以下使文本框和按钮并排显示：

```
<%= simple_form_for :contact, :method => 'get', 
    :html => { :class => 'form-search' } do |f| %>
  <%= f.input_field :search, :placeholder => "Name", 
      :class => "input-medium search-query" %>
  <%= f.submit "Find!", :class => "btn" %>
<% end %> 
```

另一个问题是 simple_form 通常假设您想​​要使用模型和字段名称。上面的示例使用 a`:symbol`而不是 a`@model`作为[此处](https://stackoverflow.com/questions/5181143/simple-form-without-for-non-model-form)建议的第一个参数。但这仍然会生成一个名为的输入字段`contact[search]`，因此您必须告诉您的控制器如何处理它。

*我认为在这种情况下，不*使用 simple_form可能更简单，而是使用 Ryan Bates 的[Railscast #240, Search, Sort, Paginate with AJAX](http://railscasts.com/episodes/240-search-sort-paginate-with-Ajax)开头附近的表单：

```
<%= form_tag contacts_path, :method => 'get', :class => "form-search" do %>
  <%= text_field_tag :search, nil, :placeholder => "Name", 
      :class => "input-medium search-query" %>
  <%= submit_tag "Find!", :name => nil, :class => "btn" %>
<% end %> 
```

现在该字段被命名为“search”，我可以在控制器的 #index 方法中使用它，如下所示：

```
@contacts = @contacts.search(params[:search]) 
```

假设我的模型中有这个：

```
def self.search(search)
  if search
    where('lower(name) LIKE ?', "%#{search.downcase}%")
  else
    scoped
  end
end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T23:02:30.073

它正在创建子表单，因为您要传递`input`给 simple_form。改为使用`input_field`。（顺便说一句，这也适用于 simple_fields_for）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T12:09:20.797

您需要自定义`control-group`和`controls`div 类以`inline-block`在它们位于`form-inline`表单下时显示：

```
form.form-inline div.control-group { display: inline-block; }
form.form-inline div.control-group div.controls { display: inline-block; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T12:09:59.507

*添加到马克的回复中：*

因此，`input_field`存在仅用于创建*输入*组件，它不会为您提供任何类型的标签/错误/包装器。这意味着您不会得到任何或标签包装该字段，您应该手动执行此操作以防万一。

现在关于将表单与对象一起使用，SimpleForm 是一个 FormBuilder，这意味着它被创建为与命名空间（对象或符号）一起使用。SimpleForm's `simple_form_for`== Rails' `form_for`，你*总是*需要一个对象命名空间来使用。

对于像搜索表单这样的简单案例，您最好使用简单的表单助手，例如`form_tag`，正如您所指出的那样。没有必要依赖`simple_form_for`或`form_for`为此，我同意，我通常会走这条路。

希望对您有所帮助，如果您仍有疑问，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T20:50:46.733

将 :html => { :class => 'form-inline' } 更改为 :html => { :class => 'form-horizo​​ntal' }

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T17:35:41.710

你不能移动输入地址旁边的输入按钮吗？我认为它会解决问题

```
<form accept-charset="UTF-8" action="/find_map" class="simple_form form-inline" id="new_location" method="post" novalidate="novalidate">
      <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="&#x2713;" />
    <input name="authenticity_token" type="hidden" value="p5CSoidWaoGMfHY0/3ElWi0XJVg6Cqi9GqWRNlJLBQg=" />
      </div>
      <div class="control-group string required">
    <div class="controls">
        <input class="string required" id="location_address" name="location[address]" placeholder="Address" size="50" type="text" />

        <!-- move the button to here -->
        <input class="btn" name="commit" type="submit" value="Find!" />
    </div>
      </div>

</form> 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-06-12T08:09:31.213

请所有有此问题的人不要使用流畅的布局，并确保您为文档指定 HTML5 文档类型。

# java - Java - 将方法添加到 netbeans 表单中的按钮

> ID：10279165
> 
> 赞同：0
> 
> 时间：2012-04-23T10:53:08.560
> 
> 标签：java, swing, oop

我有一个`ShortestPath`包含 Dijkstra 算法的类和一个名为`computeRoutes`. 我还有一个带有搜索按钮的表单——我想`computeRoutes`从这个按钮调用该方法，但不知道该怎么做。

```
public class ShortestPath {
    public static void computeRoutes(Node source){

        source.minimumDistance = 0;
        PriorityQueue<Node> nodeQueue = new PriorityQueue<Node>();
        nodeQueue.add(source);

        while(!nodeQueue.isEmpty()){
            Node u = nodeQueue.poll();
            for(Edge e : u.neighbours){
                Node n = e.goal;
                int weight = e.weight;
                int distThruU = u.minimumDistance + weight;
                    if(distThruU < n.minimumDistance){
                        nodeQueue.remove(n);

                    n.minimumDistance = distThruU;
                    n.previousNode = u;
                    nodeQueue.add(n);
                }
            }
        }
    }

    public static List<Node> getShortestRouteTo(Node goal){
        List<Node> route = new ArrayList<Node>();
        for(Node node = goal; node != null; node = node.previousNode)
            route.add(node);
        Collections.reverse(route);
        return route;
    }
}

public class BPForm extends javax.swing.JFrame {
....
private void btnSearchActionPerformed(java.awt.event.ActionEvent evt) {
(I want to call the computeRoutes method here) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:56:52.707

在 netbeans 设计器中双击此按钮。它将为此按钮打开 ActionListener 的代码（如果您不知道这是什么。您应该查看按钮的事件处理）。只需在此处使用 ShortestPath 类的对象（您是否已创建对象？）调用 computeRoutes()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:57:57.287

我想你已经实现了 ActionListener，并且在代码中你必须覆盖

```
public void actionPerformed(ActionEvent e) {
   if (e.getSource() == computeRoutes) {
       // put the logic here 
   }
.....
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T10:58:08.253

您只需要为按钮单击事件实现 OnClick 侦听器，然后只需调用您的方法

[http://www.roseindia.net/java/example/java/awt/MouseClick.shtml](http://www.roseindia.net/java/example/java/awt/MouseClick.shtml)

这是一个可以帮助您的示例

# mysql - 无法使用 Rails 在 MySQL 表中存储 UTC 时间

> ID：10279167
> 
> 赞同：2
> 
> 时间：2012-04-23T10:53:25.330
> 
> 标签：mysql, ruby, ruby-on-rails-3, timezone, ruby-1.8.7

我能够将字符串格式的本地时间转换为 UTC 时间格式。但是当我将这个 UTC 时间保存在我的 MySQL 表中时，它会以一种奇怪的格式保存。

```
t_utc = Time.parse('Mon Apr 23 03:00:23 -0700 2012').utc # => Mon Apr 23 10:00:23 UTC 2012
model_object.time_column = t_utc
model_object.save! 
```

当我从表中查询“time_column”列时，我得到

```
Mon, 23 Apr 2012 03:00:23 UTC +00:00 
```

代替，

```
Mon Apr 23 10:00:23 UTC 2012 
```

time_column 的“类型”是“DATETIME”
Rails 版本 3.0.9
config.time_zone = environment.rb 文件中的“UTC”

我花了很多时间试图找出问题所在，但徒劳无功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:17:54.133

尝试`config.active_record.default_timezone = :utc`在您的`config/application.rb`文件中设置。

# openssl - 打开 SSL 从服务器获取证书

> ID：10279171
> 
> 赞同：0
> 
> 时间：2012-04-23T10:53:42.163
> 
> 标签：openssl

OpenSSL c库中的哪个函数从服务器获取证书，检查证书是否有效，并根据有效性返回。像有效的，不受信任的等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:42:40.217

建立连接后，只需调用`SSL_get_verify_result(ssl)`您的连接对象`ssl`

```
if (SSL_get_verify_result(ssl) != X509_V_OK) {
       /* verification failed */
} 
```

可以在诊断部分[的手册页](https://www.openssl.org/docs/apps/verify.html#)`SSl_get_verify_result()`中找到可能的返回代码

如果您需要获取证书并自行验证，您可能需要查看 `SSL_get_peer_certificate(ssl)`获取证书和`X509_verify_cert()`.

# android - 如何在衬垫布局中填充相同的布局（Android）

> ID：10279176
> 
> 赞同：0
> 
> 时间：2012-04-23T10:54:11.377
> 
> 标签：android, android-layout

我需要创建一个列表。该列表将包含类似的对象。每个对象都会有一些图像、文本和按钮。我可以将这些项目放在表格布局中并排列它们（孩子）。但我需要列出这些（孩子）项目。我需要动态填充它们。所以我一开始就不能用 XML 编码它们。

我该怎么做。您可以发布一些教程或示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:00:09.987

这在将自定义视图设计为列表视图的一部分时帮助了我很多 -

[http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)

编辑 -

从未尝试过可能是这里-

```
new String[] {"pen","price","contactid"},
new int[] {R.id.text1,R.id.text2} 
```

用xml文件中的imageviews替换文本

然后这是

```
HashMap<String,String> tempnew = new HashMap<String,String>();
temp.put("pen",cur.getString(1).replace("+", " ")); 
```

替换为

```
HashMap<String,Image> tempnew = new HashMap<String,Image>();
temp.put("pen",Image1); 
```

Image1 将是您的图像

这是你的意思吗？

# c# - 如何在 C# 中比较这些对象的一个 或多个属性的两个对象列表？

> ID：10279177
> 
> 赞同：3
> 
> 时间：2012-04-23T10:54:24.277
> 
> 标签：c#, list, object, properties, compare

首先我必须说我不是一个经验丰富的程序员。我在 StackOverflow 上查看了类似的问题，但似乎没有找到可以用我有限的技能实现的合适答案。

在 C# 中，我需要根据这些对象中一个或多个属性的值来比较两个对象列表。我想创建两个新列表，其中一个对象存在于左侧，但在某些属性值中存在差异，或者在右侧列表中根本不存在，反之亦然。

在我只需要根据一个值比较两者之前，我不必处理对象而是字符串，所以我做了这样的事情：

```
(LeftItems and RightItems are Entities)

List<String> leftList = new List<string>();
List<String> rightList = new List<string>();
List<String> leftResultList = new List<string>();
List<String> rightResultList = new List<string>();
List<String> leftResultObjList = new List<string>();
List<String> rightResultObjList = new List<string>();

foreach (item i in leftItems)
{
  leftlist.Add(i.value);
}

//same for right 

foreach (string i in leftList)
{
  if(!rightList.contains(i))
  {
    leftResultList.Add(i);
  }
}

//same for the right list 
```

现在我必须比较多个值，所以我创建了一个类，它有几个需要比较的属性，所以我想做与上面相同的操作，但使用对象属性：

```
class CompItems
{
  string _x;
  string _y;

  public CompItems(string x, string y)
        {
         _x = x;
         _y = y;
        }
}

foreach (item i in leftItems)
{
  leftList.Add(new CompItem(i.value1,i.value2));
}

//same for the right list

foreach (CompItem c in leftItems)
{
  // Here is where things go wrong
  if(one property of object in rightItems equals property of object in leftItems) && some other comparisons
  {
    resultLeftObjList.Add(c)
  }
}

//And the same for the right list 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:00:45.137

您可以使您的类继承自[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)并根据您想要的属性进行比较，如下所示：

```
 class Employee : IComparable
    {
       private string name;
       public   string Name
       {
          get { return name; }
          set { name = value ; }
       }

       public Employee( string a_name)
       {
          name = a_name;
       }

       #region IComparable Members
       public   int CompareTo( object obj)
       {
         Employee temp = (Employee)obj;
         if ( this.name.Length < temp.name.Length)
           return -1;
         else return 0;
       }
   } 
```

[您可以在此处](http://www.aspfree.com/c/a/C-Sharp/Building-Csharp-Comparable-Objects-IComparable-versus-IComparer/)找到此解决方案的详细信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T10:58:26.970

在这种情况下，最简单和最 OOP 的方法 imo 可能是两种类型的[IComparable 接口](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)的简单实现，然后简单地调用`CompareTo`.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T11:00:49.153

例如覆盖

```
public Coordinates(string x, string y)
{
    X = x;
    Y = y;
}

public string X { get; private set; }
public string Y { get; private set; }

public override bool Equals(object obj)
{
    if (!(obj is Coordinates))
    {
        return false;
    }
    Coordinates coordinates = (Coordinates)obj;
    return ((coordinates.X == this.X) && (coordinates.Y == this.Y));
} 
```

然后调用列表的“相等”

# c++ - 如果基类析构函数是虚拟的，是否需要派生类析构函数定义？

> ID：10279183
> 
> 赞同：4
> 
> 时间：2012-04-23T10:55:15.623
> 
> 标签：c++, virtual-destructor

我正在尝试以下示例：

```
class base // base class
{
public:
    std::list<base*> values;
    base(){}
    void initialize(base *b) {
        values.push_front(b);
    }
    virtual ~base()
    {
        values.clear();
        cout<<"base called"<<endl;
    }
};

class derived : public base // derived class
{
public:
    ~derived(){
        cout<<"derived called"<<endl;
    }

};

int main()
{
    derived *d = new derived;
    base *b = new base;
    b->initialize(static_cast<base *>(d)); /* filling list */
    delete b;
    return 0;
} 
```

Q.1) 为什么不调用派生类的析构函数，就像我正在执行的基类析构函数一样`values.clear()`？

Q.2) 如果基类析构函数是虚拟的，是否需要派生类析构函数定义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T10:59:01.417

Q1。因为您没有删除 type 的对象`derived`。你只做`delete b;`，它会删除一个`base`. 您还应该调用`delete d;`.

此外，您应该指定负责内存管理的对象。你的设计容易出错。你最好使用智能指针来防止歧义。**此外，要按照您**的预期行事，析构函数应该是：

```
virtual ~base()
{
    for ( int i = 0 ; i < values.size() ; i++ )
        delete values[i];
    values.clear();
    cout<<"base called"<<endl;
} 
```

当然，使用这种方法，`delete d;`在您的`main`.

Q2。不，不需要定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T11:00:25.943

> 为什么派生类的析构函数没有被调用，就像我正在执行的基类析构函数一样`values.clear();`

`values.clear()`从此列表中删除所有指针。它不会删除指向的对象；这将是非常危险的，因为该列表无法知道它是否对它们的生命周期负责，或者它们是否只是用于引用在其他地方管理的对象。

如果您希望列表拥有这些对象，那么您必须在删除它们时自己删除它们，或者存储智能指针，例如`std::unique_ptr<base>`. 如果您的编译器不支持新的智能指针，那么您可能会发现 Boost 的[指针容器](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_container.html)库很有用。

> 是否需要派生类析构函数定义。如果基类析构函数是虚拟的。

仅当派生类中有需要清理的内容时才需要它。如果无事可做，则无需定义一个空的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:58:50.047

你实际上没有`delete d`，所以当然没有调用析构函数。要么使 d 静态分配（`derived d`而不是`derived *d = new derived`），要么调用`delete d`.

如果您没有在派生类中声明析构函数，则会创建默认析构函数。基类析构函数仍将被调用，请参阅[FAQ](http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.12) (11.12)。另请注意，由于基类析构函数是虚拟的，派生类析构函数自动是虚拟的（无论您是否定义），请参阅[FAQ](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.7) (20.7)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:00:00.427

为什么你认为应该调用派生类的析构函数？您只删除 base ，它是基类的一个实例。

不，不需要析构函数的定义——你可以省略它。

# php - 从单独的文件中返回 AJAX responseText

> ID：10279184
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:55:18.627
> 
> 标签：php, javascript, ajax, responsetext

> *这个问题过去可能被问过一百万次，但我还没有找到解决方案。所以我又问了一遍，希望得到一个不那么激进的答案，比如“看看别的地方”或“不要重复问题”。如果读者有输入上述任何句子或类似句子的冲动，我只能要求读者不要这样做，并完全忽略这篇文章。任何帮助是极大的赞赏。*

**问题**

在我的程序中，AJAX 脚本与 PHP 脚本进行通信。没有语法错误。AJAX 接收`responseText`井并将其发出警报。

`alert(request.responseText); //this works as desired`

但未能将其返回到另一个函数。

`return(request.responseText); //this actually returns undefined`

**完整的代码** *客户端文件*

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>test</title>
<script type="text/javascript" language="javascript" src="ajax.js"></script>
<script type="text/javascript" language="javascript">

    function createXMLHttp()
    {
        var xmlHttp = null; 
        if(window.XMLHttpRequest)
        {
            xmlHttp = new XMLHttpRequest();
        }
        else if(window.ActiveXObject)
        {   
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        return xmlHttp;
    }

    function ajax_phprequest(data, php_file)
    {
        var request =  createXMLHttp();
        request.open("POST", php_file, true);
        request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        request.send(data);
        request.onreadystatechange = function() 
        {
            if (request.readyState == 4)
            {
                document.write(request.responseText);
                return request.responseText; //changed from return(request.responseText;);
            }
        }
    }

    function foo()
    {
        alert(ajax_phprequest("user=defuser&pass=123456","auth.php"));
    }
</script>
</head>
    <input type="button" id="somebutton" value="Call foo()" onclick="foo();" />
<body>
</body>
</html> 
```

**完整的代码** *auth.php 文件*

```
<?php
    $user;
    $pass;
    if (isset($_POST['user']))  $user = $_POST['user'];
    else
    {
        echo 'err_u_Username is not specified';
        exit();     
    }
    if (isset($_POST['pass']))  $pass = $_POST['pass'];
    else
    {
        echo 'err_p_Password is not specified';
        exit();
    }
    if ($user = 'defuser' && $pass = '123456') echo ('That\'s right!');
    else echo ('That\'s not right!');
?> 
```

这可以通过将代码包含在与文档相同的文件中轻松解决。但我希望从不同的文件中调用该函数，然后将其返回到具有的文件`foo()`或文档中。简单地说，我希望 AJAX 函数返回 responseText 而不会每次都给出“未定义”。如果这与同步有关：我想知道针对此问题的任何解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:09:25.610

已经提到了它的要点，但我想更深入地解释为什么这不起作用。

您有以下代码：

```
request.onreadystatechange = function() 
{
    if (request.readyState == 4)
    {
        document.write(request.responseText);
        return(request.responseText);
    }
} 
```

基本上，您将`onreadystatechange`事件设置为匿名函数的值。在那个匿名函数中，您正在返回一个值，该值不会返回给 的调用者`ajax_phprequest()`，而是返回给匿名函数的调用者，它是事件系统，不太关心返回什么值。

之所以会这样，是因为这一切都是异步发生的。换句话说，你打电话`ajax_phprequest()`，那一刻发生的一切都发生在屏幕后面。用户可以像什么都没发生一样继续工作。但是，在后台请求并希望返回 php 文件。发生这种情况时，您可以使用内容，但是您调用的那一刻`ajax_phprequest()`早已过去。

正确的方法是使用回调函数。它可能看起来像这样：

```
function ajax_phprequest(data, php_file, callback)
{
    var request =  createXMLHttp();
    request.open("POST", php_file, true);
    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    request.send(data);
    request.onreadystatechange = function() 
    {
        if (request.readyState == 4)
        {
            document.write(request.responseText);
            callback(request.responseText);
        }
    }
}

function foo()
{
    ajax_phprequest("user=defuser&pass=123456","auth.php", function (text)
    {
        alert(text);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:59:23.737

那是因为调用是 ASYNCHRONOUS ，所以你不能以通常的方式从堆栈返回，即`alert(ajax_phprequest("user=defuser&pass=123456","auth.php"));`在返回 ajax 响应之前评估你的......你需要使用回调：

```
function callback( text ){
    // something
}

...
if (request.readyState == 4){
    callback( request.responseText );
} 
```

# c++ - 模拟器，发送请求 - 响应并打开 TCP 连接

> ID：10279186
> 
> 赞同：0
> 
> 时间：2012-04-23T10:55:20.407
> 
> 标签：c++, python, simulator, tcpclient

我必须编写一个模拟器，它发送一个注册请求，并在得到其他设备的响应后，它会打开彼此之间的 TCP 会话/连接。我必须从头开始。我认为我可以用 python 或 C++ 编写它。任何人都可以帮助我提供一些参考资料，从那里我可以开始朝着正确的方向工作并成功地做到这一点。？

谢谢阿坎莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:08:26.517

可以在[此处找到基本的 Python TCP/IP 客户端和服务器教程](http://www.doughellmann.com/PyMOTW/socket/tcp.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:00:18.447

您可以使用[Boost.Asio](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)并在 C++ 中执行此操作

# c# - 手动转换密码和盐以与 ASPNETDB 密码进行比较

> ID：10279194
> 
> 赞同：0
> 
> 时间：2012-04-23T10:55:49.547
> 
> 标签：c#, asp.net, .net, hash

我正在尝试手动将 aspnetdb 密码字段与我的手动哈希密码进行比较以检查有效性（我不能使用默认的成员身份实现，因为我正在使用自定义实现）。无论如何，我从记录中获取 Base64 密码盐，并使用以下算法来获取加盐哈希：

```
static byte[] GenerateSaltedHash(byte[] plainText, byte[] salt)
{
HashAlgorithm algorithm = new SHA256Managed();

byte[] plainTextWithSaltBytes =
    new byte[plainText.Length + salt.Length];

for (int i = 0; i < plainText.Length; i++)
{
    plainTextWithSaltBytes[i] = plainText[i];
}
for (int i = 0; i < salt.Length; i++)
{
    plainTextWithSaltBytes[plainText.Length + i] = salt[i];
}

byte[] hash = algorithm.ComputeHash(plainTextWithSaltBytes);

return hash;
} 
```

然后我获取这些字节并与 Convert.GetBase64Bytes(MembershipUser.Password) 进行比较。尽管我从 Convert 方法获得的字节和我计算的哈希值永远不会相同，即使我知道密码相同，但在某处存在断开连接。

关于我哪里出错的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:15:47.020

在查看 SqlMembershipProvider 的来源时，他们似乎在密码*之前复制了盐：*

```
static byte[] GenerateSaltedHash(byte[] plainText, byte[] salt)
{
HashAlgorithm algorithm = new SHA256Managed();

byte[] plainTextWithSaltBytes = new byte[plainText.Length + salt.Length];
salt.CopyTo(plainTextWithSaltBytes, 0);
plainText.CopyTo(plainTextWithSaltBytes, salt.Length); 

byte[] hash = algorithm.ComputeHash(plainTextWithSaltBytes);

return hash;
} 
```

# iphone - 针对 iPhone 应用的 Instruments UI 自动化测试

> ID：10279198
> 
> 赞同：0
> 
> 时间：2012-04-23T10:55:55.353
> 
> 标签：iphone, testing, user-interface, ios-ui-automation, xcode-instruments

我是使用工具的 UI 自动化的新手，我有以下问题： - 应用程序启动，我得到主窗口屏幕（其中包含登录和注册按钮） - 我已经设法编写 JavaScript 代码以便点击一个的两个按钮。-> 点击其中一个按钮后，将显示另一个屏幕。假设登录屏幕包含两个字段：用户名和密码。

在这种情况下，我如何告诉 Instruments 这是另一个屏幕，其中包含应该检索以填充字段并点击登录按钮的另一个元素？

我只知道检索主窗口。我不知道如何为下一个屏幕编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:12:12.560

您是否尝试过使用 Javascript 编辑器窗口中的小记录按钮捕捉您所做的事情？这样您就可以了解 Instruments 如何调用您使用的元素。

另请参阅此线程：

[UI 自动化 - 如何捕获 - 使用 javascript 编辑器记录](https://stackoverflow.com/questions/9815765/ui-automation-how-to-capture-record-using-javascript-editor)

# android - build.phonegap.com 是否有任何开源替代方案？

> ID：10279200
> 
> 赞同：1
> 
> 时间：2012-04-23T10:56:05.873
> 
> 标签：android, ios, compiler-construction, cordova, build

我正在寻找一个可以安装在我的服务器上的工具，我的团队成员可以将代码上传到该服务器并构建它。简而言之，它应该类似于 build.phonegap.com（但不是必须特定于 phonegap），但我可以在我自己的服务器上运行该工具。如果该工具是开源的，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:51:16.030

这是一个可能有帮助也可能没有帮助的部分答案：

[http://www.applaudcloud.com](http://www.applaudcloud.com)的代码在[github 链接](https://github.com/paulb777/AppLaudCloud)上开源。

它仍然只是 Android，我还没有发布好的构建说明。

我对合作和贡献感兴趣，以使其变得更好。

# iphone - 构建可以从流式摄像头识别颜色的 Iphone 应用程序

> ID：10279207
> 
> 赞同：2
> 
> 时间：2012-04-23T10:56:38.770
> 
> 标签：iphone, xcode, camera

我正在构建一个 iphone 应用程序，以在放置在色板上时通过 iphone 相机识别特定颜色。

请注意，我希望它通过流式摄像机输出工作，而不仅仅是静止图像或照片。

我最初的想法是扫描一系列像素（比如在相机馈送的每个角上 4 个），如果每个像素中注册的颜色匹配，然后向用户显示颜色（以文本形式）。

就示例代码或 API 而言，或者即使有更好的设计解决方案来解决问题，有人能否指出我正确的方向。

# xaml - 语义缩放分组集合

> ID：10279208
> 
> 赞同：0
> 
> 时间：2012-04-23T10:56:49.113
> 
> 标签：xaml, gridview, windows-runtime, winrt-xaml, semantic-zoom

在我的 Metro 应用程序中，我想为页面创建一个语义视图。

为此，我正在使用 foreach 循环手动创建分组集合对象。由于某种原因，我没有使用 LINQ 对对象集合进行分组。

所以现在当我尝试填充语义缩放时，它什么都不显示（没有语义缩放）。

如何将我自己的集合绑定到分组集合源

XAML

```
 <CollectionViewSource x:Name="GroupedSource"  IsSourceGrouped="true" /> 
```

文件隐藏代码

```
 GroupedSource.Source =context.Collection; // my own grouped collection.. 
```

使用 LINQ 时它工作正常。但由于某些原因我不能使用 LINQ

我还需要做什么才能得到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:15:07.057

尝试使用此代码设置源：

```
(semanticZoom.ZoomedOutView as ListViewBase).ItemsSource = GroupedSource.View.CollectionGroups; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T05:04:21.143

需要更多细节，但是。除非您绑定到分层数据源，否则 IsSourceGrouped="true" 只是故事的一半。您需要指定包含子集合的属性 - ItemsPath="myItems" 作为 CollectionViewSource 的 xaml 属性。如果这不是问题，则可能是执行的先决条件。放置一个断点并检查 context.Collection 在使用之前是否已填充，如果 context.Collection 是 ObservableCollection 您应该可以随时填充（即异步填充）。

```
<CollectionViewSource x:Name="GroupedSource"  IsSourceGrouped="true" ItemsPath="Items" /> 
```

# java - 查看除了我自己的一个进程的输出流

> ID：10279210
> 
> 赞同：0
> 
> 时间：2012-04-23T10:56:51.713
> 
> 标签：java, process, io

是否可以在我的代码中运行一个进程，然后在屏幕上看到两个输出流（进程和我的）？

我需要查看其他进程与我自己的代码并行执行的操作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:59:07.023

您需要启动一个线程，该线程从`Process`输出流中读取数据，并将其打印在`System.out`.

您可以使用这样的类：

```
class ProcessOutputStreamPrinter extends Thread {

    BufferedReader reader;

    public ProcessOutputStreamPrinter(Process p) {
        reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
    }

    public void run() {
        try {
            String line;
            while (null != (line = reader.readLine()))
                System.out.println("Process output: " + line);
        } catch (IOException e) {
            // handle somehow
        }
    }
} 
```

这是该类的一些测试代码：

```
class Test {
    public static void main(String[] args) throws IOException {

        // Start external process. (Replace "cat" with whatever you want.)
        ProcessBuilder pb = new ProcessBuilder("cat");
        Process p = pb.start();

        // Start printing it's output to System.out.
        new ProcessOutputStreamPrinter(p).start();

        // Just for testing:

        // Print something ourselves:
        System.out.println("My program output: hello");

        // Give cat some input (which it will echo as output).
        PrintWriter pw = new PrintWriter(new PrintStream(p.getOutputStream()));
        pw.println("hello");
        pw.flush();

        // Close stdin to terminate "cat".
        pw.close();
    }
} 
```

**输出：**

```
My program output: hello
Process output: hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:06:03.553

请执行下列操作：

1.  通过创建内部类并扩展来启动一个新线程`Runnable`
2.  在`run()`方法中写下你的代码
3.  通过以下方式从您的块中输出您的代码`System.out`
4.  `System.out`从块外部 输出主线程的代码。

内部类是启动新进程（线程）的最适当方式。我所指的块是您在 run() 方法中的代码。

# jqzoom - 如何在 Jqzoom 上显示缩略图标题

> ID：10279216
> 
> 赞同：0
> 
> 时间：2012-04-23T10:57:03.637
> 
> 标签：jqzoom

我想使用 jqzoom 画廊应用程序而不是 magiczoom。我有两个问题：

1.  Jqzoom 在所有缩放中显示相同的标题。我想在放大的大图像顶部显示缩略图标题。我怎样才能做到这一点？
2.  在magiczoom 应用程序中，有一个小的放大镜图像和中等大小（要缩放）图像顶部的“缩放”文本。我如何在 jqzoom 上实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:20:01.377

如果您有多个元素要使用多个缩略图进行缩放，则必须将“ `rel`”属性命名为每个组，以便它可以正确显示您的图像：

```
<a href="images/bora/bora1_lrg.jpg" class="jqzoom" rel='gal1'  title="BORA">
    <img src="images/bora/bora1_md.jpg"  title="BORA"  style="border: 5px solid #666;">
</a>
<br/>
<a href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: './images/bora/bora1_md.jpg',largeimage: './images/bora/bora1_lrg.jpg'}"><img src='images/bora/bora1_th.jpg'></a>
<a href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: './images/bora/bora2_md.jpg',largeimage: './images/bora/bora2_lrg.jpg'}"><img src='images/bora/bora2_th.jpg'></a>
<a  href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: './images/bora/bora3_md.jpg',largeimage: './images/bora/bora3_lrg.jpg'}"><img src='images/bora/bora3_th.jpg'></a>
<a  href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: './images/bora/bora4_md.jpg',largeimage: './images/bora/bora4_lrg.jpg'}"><img src='images/bora/bora4_th.jpg'></a>
</div>
<div class="example_column2" align="center">
   <a href="images/bora/bora5_lrg.jpg" class="jqzoom" rel='gal2'  title="BORA">
     <img src="images/bora/bora5_md.jpg"  title="BORA"  style="border: 5px solid #666;">
   </a>
   <br/>
   <a href='javascript:void(0);' rel="{gallery: 'gal2', smallimage: './images/bora/bora5_md.jpg',largeimage: './images/bora/bora5_lrg.jpg'}"><img src='images/bora/bora5_th.jpg'></a>
   <a href='javascript:void(0);' rel="{gallery: 'gal2', smallimage: './images/bora/bora6_md.jpg',largeimage: './images/bora/bora6_lrg.jpg'}"><img src='images/bora/bora6_th.jpg'></a>
   <a  href='javascript:void(0);' rel="{gallery: 'gal2', smallimage: './images/bora/bora7_md.jpg',largeimage: './images/bora/bora3_lrg.jpg'}"><img src='images/bora/bora7_th.jpg'></a>
   <a  href='javascript:void(0);' rel="{gallery: 'gal2', smallimage: './images/bora/bora7_md.jpg',largeimage: './images/bora/bora4_lrg.jpg'}"><img src='images/bora/bora7_th.jpg'></a>
</div> 
```

# c# - WCF：如何在端口 80 上配置 net.tcp 流量

> ID：10279217
> 
> 赞同：2
> 
> 时间：2012-04-23T10:57:06.653
> 
> 标签：c#, wcf, wcf-security

我有一个 WCF 服务，它被配置为在 netTcpBinding 上为高端口号（例如 9000）运行。这一切都有效，但前提是客户端可以访问该端口上的数据。我们遇到过很多情况，企业防火墙不允许我们在没有很多痛苦的情况下连接到这个端口。

有没有办法可以将其配置为在端口 80 上工作，而不会影响当前在服务器上运行的 Web 应用程序，这样大多数企业环境就不需要更改任何内容？我知道[.net tcp 端口共享，](http://msdn.microsoft.com/en-us/library/ms734772.aspx)但这不会允许端口 80 通过 net.tcp。

如果无法通过端口 80 配置 net.tcp，是否有针对这种情况的“最佳实践”来最大限度地减少防火墙问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:05:24.453

我建议您可以尝试大多数防火墙允许的端口 8080。IIS 7.0 目前不支持在不同的协议绑定之间共享相同的端口。因此，同一端口上的 HTTP + TCP 将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:12:52.953

您需要确保绑定到特定的 ip。通常，在绑定 WCF 服务时，人们使用 0.0.0.0 来接受任何 ip。如果您在端口 80 上执行此操作或未指定端口，它将覆盖 IIS 中的所有现有配置，从而有效地杀死所有正在运行的站点。

做到这一点的唯一方法是拥有一个可用于端口 80 绑定的单独 IP，其他站点不使用该 IP 进行连接。

# javascript - HTML5 移动网站上的动画

> ID：10279218
> 
> 赞同：2
> 
> 时间：2012-04-23T10:57:10.460
> 
> 标签：javascript, jquery, html, css

我正在制作一个移动网站，我正在使用 javascript 来制作动画？这是推荐的还是我应该使用 CSS3 过渡？

如果是这样，我怎样才能实现一个简单的 CSS3 过渡，单击时会`divA`向下移动？`20px``divA`

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:08:07.370

您需要结合使用 javascript 和 CSS。用于动画的 CSS 和用于触发它们的 javascript。

看看这个 jQuery 插件：[http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

我最近一直在使用它，它非常有用，尤其是对于回调。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:59:56.347

请不要使用 jQuery + 插件来移动移动设备上的 div。CSS3 过渡和动画在移动设备上得到了很好的支持，其中一些甚至是硬件加速的。

这是一个简单的脚本，可以满足您的需要：http: [//jsfiddle.net/3Sd4U/](http://jsfiddle.net/3Sd4U/)

# php - 在php中编写路径时感到困惑

> ID：10279219
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:57:13.493
> 
> 标签：php, path, include

我很困惑在包含中写一条路径。

这里有一些细节

我有一个文件 index.php 在这里：

localhost/widget/explore/staff/index.php

并希望包含一个名为 constants.php 的文件，该文件位于：

localhost/widget/includes/constants.php

告诉我如何编写所需的路径

```
include '?'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:00:07.233

```
include("..\\..\\includes\\constants.php"); 
```

或者试试这个；

```
include("C:\\Users\\Yousuf\\Desktop\\Web\\localhost\\widget_corp\\includes\\constants.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:06:12.530

首先要记住的是确保任何包含敏感信息（数据库登录名/密码等）的文件都存储**在**应用程序的文档路径之外。您不想让某人很容易地从 Web 浏览器下载此类文件。

考虑到上述情况，请查看您的 php.ini 文件。具体来说，搜索“ `include_path`”值。`include`这列出了使用或时搜索文件的每个文件夹`require`。

例如，如果您的搜索路径如下所示：`include_path=".:/usr/local/lib/php"`那么您可以将常量文件放入`/usr/local/lib/php`并使用`include 'constants.php';`.

一个更好的主意是创建一个单独的文件夹（例如，/usr/local/lib/myConstants）并将其添加到 include_path 值的末尾（`include_path=".:/usr/local/lib/php:/usr/local/lib/myConstants"`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:06:34.050

您也可以使用[chdir()](http://php.net/manual/en/function.chdir.php)来更改您的工作目录，尽管它并不漂亮并且可能会造成混淆。

# svn - 如何修复 SVN 导入行尾错误？

> ID：10279222
> 
> 赞同：12
> 
> 时间：2012-04-23T10:57:18.363
> 
> 标签：svn, import, line-endings

我必须导入一个巨大的 SVN 存储库，我必须将其从一台服务器传输到另一台服务器。所以我从旧服务器导出了它：

```
svnadmin dump . > archive.svn 
```

并将其导入新的：

```
svnadmin load . < archive.svn 
```

在导入过程中，我收到此错误：

```
Cannot accept non-LF line endings in 'svn:ignore' property 
```

我怎样才能解决这个问题？我完全控制了两台服务器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T14:27:28.007

您有 2 个选项，修复源或禁用道具验证。

**修复源*（svn:log 和 svn:ignore）*：**

```
sed -e '/^svn:log$/,/^K / s/^M/ /' -e '/^svn:ignore$/,/^PROPS-END$/ s/^M/\n/' archive.svn > repaired-archive.svn

svnadmin load . < repaired-archive.svn 
```

其中**^M**是控制字符，表示十六进制的 0D。要获得它，请使用 ^V^M ( **control V control M** ) 而不是 ^M ( circumflex M 或 control M )

**禁用道具验证：**

```
svnadmin load --bypass-prop-validation . < archive.svn 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-27T21:13:56.910

@ventura10 答案的第一个选项听起来不错，但对我**不起作用**。该`sed`命令更改了属性部分之外的一些版本化内容，导致加载转储时 md5 不匹配。

因为我的存储库没有包含二进制内容的属性，所以我更改了 sed 命令以更正所有属性，而不仅仅是`svn:log`和`svn:ignore`. 我还确定没有版本化文件包含以`Prop-content-length:`. 否则我在加载转储时会出错。

```
sed -e '/^Prop-content-length: /,/^PROPS-END$/ s/^M/ /' svn.dump > svn.dump.repaired 
```

`^M`替换为 很重要`[blank]`，因为属性值的大小不得更改。

**@ventura10 的注释仍然有效：**

> ^M 是一个控制字符，即十六进制的 0D。要获得它，请使用 ^V^M（控制 V 控制 M）而不是 ^M（抑扬符 M 或控制 M）

很难相信将现有存储库从 svn 1.4 升级到 svn 1.7 会使这一步变得必要，但我发现没有其他方法可以摆脱自 svn 1.6 以来不再接受的回车。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-16T01:13:39.740

通过一些体操，您可以使用`svnsync`具有修复 EOL 的能力来解决此问题。假设您的存储库被转储在`archive.svn`.

首先创建存储库以加载 repo，忽略 EOL 问题：

```
svnadmin create repo
svnadmin load repo < archive.svn --bypass-prop-validation 
```

现在创建一个新的存储库以复制到：

```
svnadmin create repo-fixed 
```

`svnsync`需要一些预提交钩子，即使您不使用它，所以只需使用您的编辑器在以下位置创建一个空的`repo-fixed/hooks/pre-revprop-change`：

```
#!/bin/sh
exit 0 
```

初始化目标存储库`svnsync`：

```
svnsync init file:///path/to/repo-fixed file:///path/to/repo 
```

现在复制整个存储库：

```
svnsync sync file:///path/to/repo-fixed 
```

哇！`svnsync`甚至会给你一个好消息：（`NOTE: Normalized svn:* properties to LF line endings`为什么 Subversion 团队没有更新`svnadmin`来做同样的规范化对我来说是个谜。）

完成后，转储新的存储库：

```
svnadmin dump repo-fixed > archive-fixed.svn 
```

**您现在拥有，除了 EOL 已根据需要进行修复之外`archive-fixed.svn`，它应该与 相同。`archive.svn`**

（可选）您现在可以删除您用于的临时存储库`svnsync`：

```
rm -rf repo-fixed 
```

***更新***事实证明，如果您加载这个新转储，您的 Subversion 客户端会收到错误：`Repository UUID does not match expected UUID`. 您必须使用`svnadmin setuuid ...`将[UUID ID 更改为以前的](https://serverfault.com/a/248506).

（这篇文章是我在网上找到的大量片段和部分解决方案的结晶。感谢所有比我了解更多的人；我只是把它们放在一起。）

也可以看看：

*   [使用 svnsync 复制带有历史记录的颠覆存储库](http://www.hackvalue.nl/en/article/123/copying_subversion_repositories_with_history_using_svnsync)
*   [https://stackoverflow.com/a/28472420/421049](https://stackoverflow.com/a/28472420/421049)
*   [https://svn.apache.org/repos/asf/subversion/trunk/notes/svnsync.txt](https://svn.apache.org/repos/asf/subversion/trunk/notes/svnsync.txt)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-23T12:13:31.897

你改过服务器版本吗？这是 1.6 中的一个已知问题，从 1.4 或 1.5 开始会导致问题。

Subversion 1.6 不再接受属性文件中的回车符 (^M)。您需要修复 svn:ignore 文件中的换行符，或者如果这样更容易重新创建。

或者，您可以选择[Subversion 1.7](http://www.wandisco.com/subversion/download)，或使用[uberSVN](http://www.ubersvn.com/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-16T12:21:38.463

使用[svndumptool](https://github.com/jwiegley/svndumptool)：

```
svndumptool.py eolfix-prop svn:ignore svn.dump svn.dump.repaired 
```

@tangens 解决方案也适用于我，但它并不完美，因为我得到了一个额外的空格字符作为回车符的替换。然而，我确实测试了 svn:ignore 仍然可以使用该额外空间，但我没有测试其他 SVN 属性。

使用 svndumptool 的缺点是它一次只能处理一个 svn 属性，如果您的转储文件很大，这会很耗时。

* * *

*一些发现*

您可能会对@tangens 没有用空字符替换 ^M 的原因感到好奇。如果您尝试用空字符替换它，您将收到此错误：

```
svnadmin: E140001: Dumpstream data appears to be malformed 
```

转储文件存储`Prop-content-length`属性，该属性将与属性的实际内容相匹配。将 ^M 替换为空字符将减少属性内容长度，从而导致错误。

svndumptool 将分别更改`Prop-content-length`和`Content-length`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-03T13:44:32.953

我在将 1.6 存储库升级到 1.8 时遇到了这个错误。我在网上找到了许多“修复”。

--bypass *-prop-validation*对我没有吸引力，因为它推迟了问题，下次你需要恢复 repo 时，你会遇到同样的问题。

我找到了一个 bash 脚本来循环获取评论并再次设置它们，但这不起作用。

对ventura10 解决方案的改进完成了这项工作。由于转储的大小，我最终使用单个命令在恢复转储时删除不需要的字符

```
 sed -e '/^svn:log$/,/^K / s/^M/ /' -e '/^svn:ignore$/,/^PROPS-END$/ s/^M/\n/' /path/to/svn.dump | svnadmin load /path/to/repo 
```

笔记：

> 其中 ^M 是控制字符，表示十六进制的 0D。要获得它，请使用 ^V^M（控制 V 控制 M）而不是 ^M（抑扬符 M 或控制 M）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-24T07:30:09.287

我刚刚成功修复了一个svn转储文件。它的属性中还有一个 CRLF，这导致了 SVN Edge 转储导入中的异常（它们的导入例程非常糟糕）。然后我“安装”了**svnserve**进行测试，这比预期的要容易得多（Windows 操作系统的说明）：

1.  下载并安装 TortoiseSVN 或其他包含 svn 命令行工具的软件。我已经安装了
2.  开始`cmd.exe`，运行`svnserve -d`。这个 cmd 窗口现在很忙。
3.  开始另一个`cmd.exe`创建回购：`svnadmin create d:\svn_repos\test12`
4.  将转储加载到 repo 中：`svnadmin load d:\svn_repos\test12 < d:\temp\svn\backup_test.dump`

svnserve 将为您提供失败的详细信息。

这是你必须修理的东西（左边是原件，右边是修理的）： [![在此处输入图像描述](../Images/41c656cf7e858c530039c53344f212de.png)](https://i.stack.imgur.com/ne6pm.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-16T14:53:19.160

我用过`svnadmin load --normalize-props {myrepo} < {mydumpfile}`，效果很好。

该`--normalize-props`开关被添加到颠覆 1.10。有关详细信息，请参阅[https://subversion.apache.org/docs/release-notes/1.10.html#normalize-props](https://subversion.apache.org/docs/release-notes/1.10.html#normalize-props)

为方便而复制 -

> **svnadmin 加载的新 --normalize-props 选项**
> 
> 新的 --normalize-props 选项已添加到 svnadmin load 命令。此选项可用于自动修复 svn:log 或 svn:ignore 等属性中的非 LF 行结尾。这种无效的行结尾被旧服务器接受，并且可以在旧存储库的存储库转储中找到，但被 Subversion 1.6 及更高版本拒绝。
> 
> 使用 --normalize-props 调用 svnadmin load 将自动修复在转储流中找到的所有无效属性行结尾，从而确保将适当的值加载到存储库中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-26T19:22:46.220

我的问题是提交的评论太大了。

# php - 如何使用 RewriteRule 重定向的异常？

> ID：10279223
> 
> 赞同：0
> 
> 时间：2012-04-23T10:57:19.010
> 
> 标签：php, apache, .htaccess

我的`.htaccess`文件中有以下内容

```
RewriteRule ^post/(.*)$ index.php?post=$1 [NC]
RewriteRule ^(.*)$ index.php?page=$1 [NC] 
```

我希望它（例如）重写`mysite.com/x`为，但重写为`mysite.com/index.php?page=x`除外，但是它不起作用。`mysite.com/post/x``mysite.com/index.php?post=x`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:04:05.700

添加`L`指令，例如`RewriteRule ^post/(.*)$ index.php?post=$1 [L,NC]`

`L`意思是最后，即如果重写规则匹配，它将停止处理下一个规则......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:58:42.167

**仅仅添加`[L]`标志是不够的，因为重写会循环进行，直到不再发生重写。**

[RewriteRule Last [L] 标志不起作用？](https://stackoverflow.com/questions/6797998/rewriterule-last-l-flag-not-working)

* * *

有很多方法 - 这是其中一种（考虑到您的示例规则，可能是最好的一种）。

```
# do not do anything for index.php (already rewritten URLs)
RewriteRule ^index\.php$ - [L]

# my rewrite rules
RewriteRule ^post/(.*)$ index.php?post=$1 [NC,L]
RewriteRule ^(.*)$ index.php?page=$1 [NC,L] 
```

# c# - 格式异常未处理。输入字符串的格式不正确

> ID：10279224
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:57:19.960
> 
> 标签：c#, visual-studio

我收到错误消息“未处理格式异常。” 和“输入字符串的格式不正确。” 在这一行 temp_i = float.Parse(textBox3.Text); 问题是什么？

```
//button 2 calculate button
private void button1_Click(object sender, EventArgs e)
{
  float temp_e;
  float temp_i;
  float temp_r;
  float temp_p;

  //*******************************************************
  // Resistance = Volts / Current
  //*******************************************************
  if (IsNumeric(textBox1.Text) &&
  IsNumeric(textBox2.Text) &&
  textBox3.Text == (""))
  {
    temp_e = float.Parse(textBox1.Text); //convert string to number
    temp_i = float.Parse(textBox3.Text); //convert string to number

    temp_r = temp_e / temp_i; //display 1st result
    textBox2.Text = Convert.ToString(temp_r);  //post result resistance (R)

    //calculate power
    temp_p = temp_e * temp_i;
    textBox5.Text = Convert.ToString(temp_p);

    //display 2nd result
    textBox4.Text = Convert.ToString(temp_r) + " * " + Convert.ToString(temp_i) + " = " + Convert.ToString(temp_p) + " watts";
  }' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:59:32.170

```
temp_i = float.Parse(textBox3.Text); //convert string to numbe 
```

`textBox3.Text`肯定包含 "" 因为它在你的 if 条件下。

您无法将“”解析为浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:59:46.513

问题应该很明显；`textbox3.Text`包含一个无法传递给的值`float.Parse`。在您的情况下，一个空字符串（基于`if`它上面的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:01:38.140

您检查文本框是否为空，如果是，您是否正在尝试转换为浮动？检查你的逻辑。

我猜你试图这样做：

```
temp_i = float.Parse(textBox2.Text); 
```

哪个更有意义:)

# java - 将应用程序移动到其他框架，然后返回上一个

> ID：10279227
> 
> 赞同：1
> 
> 时间：2012-04-23T10:57:24.477
> 
> 标签：java, swing, applet, jframe, jpanel

我正在写java小程序。我想打开一个新框架，内容实际存储在我的 Applet 中。我正在通过按钮打开新框架：

```
openInNew.addActionListener(new java.awt.event.ActionListener()
{
    public void actionPerformed(ActionEvent e) 
    {
        createDialog();
    }
});

//this Function retrieves Frame for applet
public Frame getParentFrame( Component child )
{
    Container c = child.getParent();
    while ( c != null )
        {
        if ( c instanceof Frame )
            {
            return ( Frame ) c;
            }
        c = c.getParent();
        }
    return null;
}

private void createDialog()
{
Frame f=getParentFrame(openInNew); //openInNew is a button to Open a JDialog
    frame = new AppletFrame("NEW FRAME",jContentPane);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setVisible(true);
} 
```

这是 的构造函数`AppletFrame`：

```
public AppletFrame(String string, JPanel jContentPane, Frame f) {
super(f,string);
    this.setContentPane(jContentPane);
    this.setSize(790, 650);

    this.addWindowListener(new WindowAdapter() 
    {
        public void windowClosing(WindowEvent e) 
        {
            removeAll();
            FileListViewer.destroyFrame();
        }
    });
}

public static void destroyFrame()
{
    jContentPane= (JPanel) frame.getContentPane();
jContentPane.repaint();  /*this one should repaint the Applet View, but the result
              * is still the same. jContentPane is not null,
              * it is filled with acutal components. */
jContentPane.setVisible(true);
frame.dispose();
frame.setVisible(false);
frame=null;
} 
```

我的问题是这`jConentPane`是一个引用，所以当我打开我的`AppletFrame`对象时，我的基本 Applet 框架中没有存储任何内容。我想再次设置`jContentPane`为`FileListViewer`，但我不能在 static 中引用非静态方法`destroyFrame()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:04:01.627

*   这里不需要打开一个新的[JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)或另一个[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)，使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)代替

*   如果要移动一个[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)，请使用[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html) `toFront/toBack`

# android - 如何通过纬度和经度查找英国的邮政编码

> ID：10279230
> 
> 赞同：4
> 
> 时间：2012-04-23T10:57:45.410
> 
> 标签：android, gps, location, postal-code

我正在开发一个 android 应用程序，在该应用程序中遇到了需要获取当前用户邮政编码的情况，因此我正在获取当前的纬度和经度，但是有没有办法通过提供纬度和经度来找到当前的邮政编码。

如果有任何提供此信息的网络服务或数据库可用，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T11:04:26.467

如果您正在谈论邮政编码，请使用此..

```
Geocoder geoCoder = new Geocoder(getApplicationContext(), Locale.getDefault());
List<Address> address = null;

if (geoCoder != null){
   try {
       address= geoCoder.getFromLocation(latPoint, lngPoint, 1);
       } catch (IOException e1) {
       // TODO Auto-generated catch block
       e1.printStackTrace();
      }
      if (address.size()> 0){
        String postCode = address.get(0).getPostalCode();
      } 
```

有了清单文件的这两个权限..

```
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:00:31.457

目前，该数据的唯一官方来源是皇家邮政的[邮政编码地址文件](http://www.royalmail.com/marketing-services/address-management-unit/address-data-products/postcode-address-file-paf)(PAF)，该文件需要许可证（需要付费）。

# android - 通过 REST/JSON 或 ksoap 将 android 移动短信发送到 asp.net 服务器？

> ID：10279238
> 
> 赞同：0
> 
> 时间：2012-04-23T10:58:10.873
> 
> 标签：android, asp.net, web-services

我想在服务器上创建我的短信的在线备份。REST 或 SOAP 哪个 Web 服务更好。我搜索了很多这个东西，但我无法找出最适合我的应用程序的 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:26:42.123

我认为 ksoap 最适合 Android；它的方法非常简单，并且具有良好的序列化。

# java - 休眠查询语法异常

> ID：10279240
> 
> 赞同：0
> 
> 时间：2012-04-23T10:58:19.547
> 
> 标签：java, hibernate, jpa

我有两个名为 Batch 和 Position 的类，我遇到了这个错误

`Caused by: org.hibernate.hql.ast.QuerySyntaxException: unexpected end of subtree [from bean.Position p where :batch member of p.positionConstraint]`

当调用 findByStudent 方法时。如果有帮助，我也在使用 JPA。非常感谢

```
public  class  Position {  
@ElementCollection
@LazyCollection(LazyCollectionOption.FALSE)  
@CollectionTable(name = "position_constraint")  
private  List<Batch> positionConstraint;  
}

public  class  Batch {
private  College college;

private  YearLevel yearLevel;

@Override
public  List<Position> findByStudent(StudentInformation student) {  
Batch batch = new  Batch(student.getCollege(), student.getYearLevel());  

Query query = getEntityManager().createQuery(
"from Position p where :batch member of p.positionConstraint").setParameter("batch", batch);  
return query.getResultList();  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:00:29.323

我认为您的字符串中有错误。它应该是： `"from Position p where :batch member of p.positionConstraint"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:29:16.943

您的示例结合了 Hibernate 3.6.8.Final 和数据库 H2 1.3.160 对我有用。还使用 JPA 等效查询：

```
select from Position p where :batch member of p.positionConstraint 
```

根据您使用的 Hibernate 版本，您可能正面临这个错误：[HHH-5209](https://hibernate.onjira.com/browse/HHH-5209)，它仍然是开放的。[HHH-5173](https://hibernate.onjira.com/browse/HHH-5713)也提供了一些额外的解释。

# html - Sencha Touch/ExtJS：平铺滚动视图（如 CATiledLayer）

> ID：10279248
> 
> 赞同：0
> 
> 时间：2012-04-23T10:58:47.517
> 
> 标签：html, cordova, sencha-touch-2, tile, catiledlayer

我正在寻找类似`CATiledLayer`（在 iOS 上）的东西，但用于 PhoneGap/Sencha Touch 2。

这个想法是以瓦片的形式从服务器“流式传输”一个非常大的图像 - 就像谷歌地图一样。

它应该支持移动设备上的触摸手势，以便用户可以捏缩放和滚动。

不幸的是，我找不到任何东西 - 所以非常感谢一些指针。

* * *

# 更新：

与此同时，我查看了[OpenLayers](http://openlayers.org/)，这似乎是我想要的并管理多层缩放等。不幸的是，它与 Geospartial 数据挂钩太多，无法禁用投影以使其像基本图像查看器一样工作。

我还发现了[GSV](http://mike.teczno.com/giant/pan/)（Big Ass Image Viewer）——不幸的是，我不支持触摸手势，而且通常似乎被放弃了。

对我来说，没有人真正需要这样的东西很奇怪，我尽量避免“重新发明轮子”。但现在看起来没有任何非地理数据/地图相关的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:41:46.603

我从未见过使用 Sencha Touch 2 完成这样的事情，尽管我会假设将这样的东西放在一起不需要太多。

它基本上是您的自定义组件（可以滚动）。在该组件中，您将插入 1 个与您的图像大小相同的子项（可以说；15000 像素 x 15000 像素），因此它会溢出。然后，您将侦听父容器上的滚动事件，当它到达某个 x/y 状态时，使用图像的该部分更新子项。

我不确定孩子 HTML 的最佳解决方案是什么。也许是一堆 div，但我认为`<canvas>`最适合图像。

# java - JQuery 发布到 Tomcat Servlet

> ID：10279249
> 
> 赞同：0
> 
> 时间：2012-04-23T10:58:48.703
> 
> 标签：java, jquery, servlets

我正在尝试将 JQuery 制作`$.post`为 Java Servlet。我将 Tomcat 服务器集成到 Apache 中，如果 Tomcat 服务器与 Apache 位于同一台机器上，则`$.post`成功。（Java Servlet 接收它）。

如果 Tomcat servlet 在远程机器上，并且我让`$.post(http://ip:8080/App/MyServlet,...)`servlet 没有收到任何东西。

如果我在我的机器上创建一个 JQuery `$.post`，我会喜欢这样`$.post(Myservlet,.....)`。如果我这样尝试：`$.post(http://localhost:8080/App/MyServlet,...)`它不起作用。

我应该如何将 JQuery 制作`$.post`为远程 uri？

Tomcat Servlet 的远程 uri 应该是什么样子？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:10:22.053

Jquery 在浏览器（客户端）中运行，这意味着它受浏览器同源策略的约束，这是一件好事。

这意味着 GET 或 POST 的 ajax 请求只能发送到发出 ajax 请求的页面的域。

有两种方法可以绕过该策略。第一个是让远程服务器为请求提供担保，第二个是绕过浏览器的同源策略。

因此，如果您可以控制远程服务器，或者如果管理员需要请求打开服务器/域来访问 ajax 请求，那么服务器只需要发送以下标头：

```
Access-Control-Allow-Origin: your-local-domain.org 
```

浏览器取回响应头，看到请求页面在上面的列表中，并允许响应通过。

如果您无法控制远程服务器，以下是绕过同源策略的偷偷摸摸的方法：

1.  使用参数向本地 url 发出 ajax 请求，并将其传递给 servlet，然后让代理脚本返回 servlet 响应的任何内容。

2.  JSONP（老实说，我仍然很模糊，但是 jquery 的 ajax 文档进入了它）

3.  `src`脚本注入，您可以利用脚本元素不受同源策略限制的事实。

在这 3 个中，我认为第一个是最安全、最少黑客和最诚实的（可以这么说），但 JSONP 已成为在 jquery 中拉取跨域请求的简单方法。

# javascript - 添加自动增量或时间戳 - javascript、jstorage

> ID：10279251
> 
> 赞同：0
> 
> 时间：2012-04-23T10:59:00.447
> 
> 标签：javascript

我正在尝试在我的网站上实现*jstorage 。*我是 JavaScript 新手，因此在这里需要一些帮助。

*jstorage*需要`Key`和`Value`为每个保存的行提供。

我想`Key`用自动增量值或时间戳自动填充，以更容易者为准 - 值必须是唯一的。

这是整个代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>jStorage - simple JavaScript plugin to store data locally</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">

        <style type="text/css">

            body{
                font-family: Sans-serif;
                font-size: 13px;
                color: #333;
                background: blue;
            }
            a {
                color: red;
            }
            table{
                border: 1px solid white;
                ;
            }

            h1{
                padding-top: 50px;
                font-size: 26px;
                font-weight: bold;
                border-bottom: 3px solid #CDEB8B;
            }

            h2{
                font-size: 18px;
                font-weight: bold;
                border-top: 1px solid #EEE;
                border-bottom: 3px solid #CDEB8B;
                margin-top: 20px;
                padding-top: 20px;
            }

            h3{
                font-size: 14px;
                font-weight: bold;
                color: red;
            }

            td{
                padding: 3px;
                border-right: 1px solid #CDEB8B;
                border-bottom: 1px solid #CDEB8B;
            }

            thead{
                background: url(img/gradientform.png) repeat-x; ;
                color: white;
            }

            .container{
                width: 190px;
                margin: 10px auto;
            }
            .delimg {

                background: url(img/details_close.png) no-repeat;
                width: 20px;
                height: 20px;
            }
            .addimg {
                background: url(img/details_open.png) no-repeat;
                width: 20px;
                height: 20px;
            }
        </style>

        <script src="js/jquery.js"></script>
        <script src="static/jquery.json-2.3.js"></script>

        <script src="static/jstorage.js"></script>

        <script>
            function insert_value(){
                var row = document.createElement("tr"),
                    key = document.getElementById('key').value,
                    val = document.getElementById('val').value;

                if(!key){
                    alert("KEY NEEDS TO BE SET!");
                    document.getElementById('key').focus();
                    return;
                }
                $.jStorage.set(key, val);
                document.getElementById('key').value = "";
                document.getElementById('val').value = "";
                reDraw();
            }

            function get_value(){
                var value = $.jStorage.get(document.getElementById("key2").value);
                alert(value);
                document.getElementById('key2').value = "";
            }

            function reDraw(){
                var row, del, index;
                var rows = document.getElementsByTagName("tr");
                for(var i=rows.length-1; i>=0; i--){
                    if(rows[i].className == "rida"){
                        rows[i].parentNode.removeChild(rows[i]);
                    }
                }

                index = $.jStorage.index();
                for(var i=0; i<index.length;i++){
                    row = document.createElement("tr");
                    row.className = "rida";
                    var t = document.createElement("td");
                    t.innerHTML = index[i];
                    row.appendChild(t);
                    t = document.createElement("td");
                    t.innerHTML  = $.jStorage.get(index[i]);
                    row.appendChild(t);
                    del = document.createElement("a");
                    del.href = "javascript:void(0)";
                    del.innerHTML = "<div class='delimg'></div>";
                    (function(i){
                        del.onclick = function(){
                            $.jStorage.deleteKey(i);
                            reDraw();
                        };
                    })(index[i])
                    t = document.createElement("td");
                    t.appendChild(del)
                    row.appendChild(t);
                    document.getElementById("tulemused").appendChild(row);

                }
            }
        </script>

        <!-- Exception Hub start -->
        <script type="text/javascript">
            var ehHost = (("https:" == document.location.protocol) ? "https://" : "http://");
            document.write(unescape("%3Cscript src='" + ehHost + "js.exceptionhub.com/javascripts/eh.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script>
            ExceptionHub.setup("b83fb652800fa143596deb6600fd9a2d", 116, 'production');
        </script>
        <!-- Exception Hub end -->

    </head>
    <body>

    <div class="container">

    <table cellspacing="0" cellpadding="0" style="width: 100%">
    <thead>
        <tr><td width="120">KEY</td><td>VALUE</td><td width="50">&nbsp;</td></tr>
    </thead>
    <tbody id="tulemused"></tbody>

    <tfoot>
        <tr>
            <td><input type="text" id="key" name="key" value="" style="width: 110px;" /></td>
            <td><input type="text" id="val" name="val" value="" style="width: 98%" /></td>
            <td><a href="javascript:insert_value()"><div class="addimg"></div></a></td>
        </tr>
        <tr>
            <td><input type="text" id="key2" name="key2" value="" style="width: 110px;" /></td>

            <td>Clicking "GET" alerts the value for provided key with the method <em>$.jStorage.get(key)</em></td>
            <td><a href="javascript:get_value()">GET</a></td>
        </tr>
    </tfoot>
    </table>
    <script>reDraw()</script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:00:57.027

JavaScript：

```
function uniqid()
{
    var newDate = new Date;
    return newDate.getTime();
} 
```

# apache-flex - Flex 生成器 SDK

> ID：10279259
> 
> 赞同：0
> 
> 时间：2012-04-23T10:59:40.703
> 
> 标签：apache-flex, sdk, builder

对于当前项目，我必须使用 Adob​​e Flex Builder 3，但需要更改使用的 SDK。我的问题是，我什至没有机会这样做。正如您在下图中看到的那样，应该没有其他选项。有谁知道这个问题或有如何解决它的线索？

[http://s1.directupload.net/file/d/2869/8v99rg8y_jpg.htm](http://s1.directupload.net/file/d/2869/8v99rg8y_jpg.htm)

格雷茨医学博士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:04:05.823

检查您是否安装了 SDK

> C:\Program Files\Adobe\Flex Builder 3\sdks

# c - 为什么使用 __attribute__((weak)) 和 #pragma weak？

> ID：10279261
> 
> 赞同：3
> 
> 时间：2012-04-23T10:59:47.067
> 
> 标签：c

我在[这里](http://embeddedfreak.wordpress.com/2009/08/07/cortex-m3-interrupt-vector-table/)阅读代码来定义 STM32 的中断向量。出于某种原因，两者`__attribute__((weak))`和`#pragma weak`都被使用：

```
void __attribute__((weak)) NMI_Handler(void); /* NMI Handler */ // [line 12]
#pragma weak NMI_Handler = Default_Handler    /* NMI handler */ // [line 48] 
```

不知何故，感觉两者都使用`__attribute__((weak))`是`#pragma weak`多余的。

我们可以没有其中之一吗？这种风格标准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:24:23.543

你是对的，但是...

```
#pragma weak NMI_Handler = Default_Handler 
```

独自一人可以完成预期的事情。但是出于以下原因添加***到函数原型中******会很好-`__attribute__((weak))`***

假设该文件是一个巨大的文件，其定义和原型遍布整个文件。现在，您使用 IDE/Editor 跳转到原型，`NMI_Handler`当您到达那里并没有看到`__attribute__((weak))`附加到`NMI_Handler`您的时候，不妨假设它`NMI_Handler`是在其他地方定义的，然后继续寻找目标并最终无处可去！现在，正如他们明确添加的那样`__attribute__((weak))`，您会知道该函数的定义*可能不存在*，您现在可以搜索任何杂注别名，而不是尝试查找不/可能不存在的函数的实际定义！

# erlang - 在 emacs 中，对于 erlang，wrangler 是不是比 distel 更好的选择？

> ID：10279270
> 
> 赞同：2
> 
> 时间：2012-04-23T11:00:20.137
> 
> 标签：erlang

在上周，我`'wrangler'`第一次知道存在。从介绍来看，比`distel`。如果您已经使用了这两种类型的扩展，您能告诉我是否值得用`distel`替换`wrangler`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:21:43.757

[Wrangler](http://www.cs.kent.ac.uk/projects/forse/wrangler/doc/overview-summary.html)不是Emacs*的*Erlang 模式。它是 Erlang 的[重构工具](http://en.wikipedia.org/wiki/Code_refactoring)，恰好在 Emacs 中运行。您可以将它与 Distel 结合使用。

# html - 您是否将 Schema Microdata 元标记放在 html 正文中？

> ID：10279277
> 
> 赞同：67
> 
> 时间：2012-04-23T11:00:39.203
> 
> 标签：html, microdata, schema.org

我在互联网和 stackoverflow 上搜索了很长时间来寻找这个问题的答案，我发现链接说你不应该在正文中放置元标记：

*   [在 <body> 中使用 HTML5+Microdata 的 <meta> 标签](https://stackoverflow.com/questions/7293366/using-microdatas-meta-tag-in-html5)
*   [在正文部分传递元数据](https://stackoverflow.com/questions/3126926/passing-meta-data-in-body-part)
*   [正文中的元标记](https://stackoverflow.com/questions/9820239/meta-tags-in-body)

而 schema.org 网站清楚地显示了直接嵌套在正文中的元标记[http://schema.org/AggregateRating](http://schema.org/AggregateRating)

只需看看那里发布的示例

```
 Customer reviews:

  <div itemprop="reviews" itemscope itemtype="http://schema.org/Review">
    <span itemprop="name">Not a happy camper</span> -
    by <span itemprop="author">Ellie</span>,
    <meta itemprop="datePublished" content="2011-04-01">April 1, 2011
    <div itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating">
      <meta itemprop="worstRating" content = "1">
      <span itemprop="ratingValue">1</span>/
      <span itemprop="bestRating">5</span>stars
    </div>
    <span itemprop="description">The lamp burned out and now I have to replace
    it. </span>
  </div>

 <div itemprop="reviews" itemscope itemtype="http://schema.org/Review">
    <span itemprop="name">Value purchase</span> -
    by <span itemprop="author">Lucas</span>,
    <meta itemprop="datePublished" content="2011-03-25">March 25, 2011
    <div itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating">
      <meta itemprop="worstRating" content = "1"/>
      <span itemprop="ratingValue">4</span>/
      <span itemprop="bestRating">5</span>stars
    </div>
    <span itemprop="description">Great microwave for the price. It is small and
    fits in my apartment.</span>
  </div> 
```

如果您将元标记保留在 中`<head>`，那么您如何将这两个日期与他们的评论联系起来？ `<meta itemprop="datePublished" content="2011-04-01">` `<meta itemprop="datePublished" content="2011-03-25">`

这引起了混乱，我想知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-03-14T20:54:32.283

如果一个`meta`元素

*   有一个`itemprop`属性和一个`content`属性，并且
*   没有`name`属性，没有`http-equiv`属性，没有`charset`属性，

那么`meta`在`body`. （如果值为 URL，则[必须使用`link`.](https://stackoverflow.com/a/19728910/1591669)）

为什么？因为[微数据规范改变了 HTML5](http://www.w3.org/TR/2013/NOTE-microdata-20131029/#content-models)。

（请注意，[在](https://webmasters.stackexchange.com/a/55133/17633)某些情况下， [RDFa 还通过允许更改 HTML5 。）`meta``body`](https://webmasters.stackexchange.com/a/55133/17633)

* * *

> 如果您将`meta`标签保留在 中`<head>`，那么您如何将这两个日期与他们的评论联系起来？

您可以[使用该`itemref`属性](https://stackoverflow.com/a/21161277/1591669)：

```
<!DOCTYPE html>
<html>
<head>
  <title>Using itemref for meta in the head</title>
  <meta itemprop="datePublished" content="2011-03-25" id="date">
</head>
<body>

  <div itemscope itemtype="http://schema.org/Review" itemref="date">
    <span itemprop="name">…&lt;/span>
  </div>

</body>
</html> 
```

`itemref`采用空格分隔的`id`值列表，因此您甚至可以引用两个或多个元素。只需将应添加到项目`id`的所有元素（包含属性）添加到其属性中，例如：.`itemprop``itemref``itemref="date author rating"`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-13T04:31:40.627

还要记住，可以完全避免 HTML 标记并使用~~完全包含在 HTML 文档中的`<head>`~~ [**任何位置**（甚至是动态注入！）的](https://developers.google.com/structured-data/schema-org)JSON-LD 标记，如下所示：

```
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Restaurant",
  "name": "Fondue for Fun and Fantasy",
  "description": "Fantastic and fun for all your cheesy occasions",
  "openingHours": "Mo,Tu,We,Th,Fr,Sa,Su 11:30-23:00",
  "telephone": "+155501003333",
  "menu": "http://example.com/menu"
}
</script> 
```

查看[schema.org](https://schema.org/)中的示例，它们通常包含 JSON 示例标记，例如[https://schema.org/Restaurant](https://schema.org/Restaurant)。

这是另一篇关于它的好文章[http://www.seoskeptic.com/json-ld-google-knowledge-graph-schema-org-seo/](http://www.seoskeptic.com/json-ld-google-knowledge-graph-schema-org-seo/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-28T20:57:36.913

我可以从 whatwg.org 读到在正文中使用是正确的：http: [//www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-meta-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-meta-element)

我在博客正文中使用元标记来指定“datePublished”和“dateUpdated”属性。Googles [Rich Snippets Testing Tool](http://www.google.com/webmasters/tools/richsnippets)告诉我它是正确的，并且 w3c 验证了代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-25T02:59:26.890

您可以使用：

```
<meta itemprop=""> 
```

即使您不想在页面上显示实际文本（例如产品名称），也可以在页面正文中进行机器可读的 schema.org 语义标记（例如机器人，用于 SEO）。

见：http: [//schema.org/docs/gs.html#advanced_missing](http://schema.org/docs/gs.html#advanced_missing)

> 有时，网页包含对标记有价值的信息，但由于信息在页面上的显示方式而无法标记。该信息可以在图像（例如，用于表示 5 分中的 4 分的图像）或 Flash 对象（例如，视频剪辑的持续时间）中传达，或者它可能是隐含但未明确说明的在页面上（例如，价格的货币）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-23T11:13:44.133

我这样做：

```
<meta id="md_course" itemprop="course" name="course"   content="..."/>
<meta id="md_lang" itemprop="language" content="eng"/>
<title id="md_title" itemprop="title" >Motivation and Course Overview</title>
</head>
<body itemscope itemtype=".../Presentation" itemref="md_course md_lang md_title md_field"> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-24T00:46:49.703

首次使用 schema.org 的微数据时，我在网页的 head 标记中添加了元标记，但是当我针对[Google 的 Rich Snippets Testing Tool](http://www.google.com/webmasters/tools/richsnippets)运行该页面时，并未提取数据。然后我将元标记移动到页面的正文中，数据显示为被提取。

# php - 我可以使用 Zend_Service_LiveDocx 来阅读 .doc 和 .docx 内容并将其转换为文本...？

> ID：10279279
> 
> 赞同：0
> 
> 时间：2012-04-23T11:00:48.260
> 
> 标签：php, zend-framework, file-format, zend-controller

我想阅读（而不是写入）.doc 和 .docx 文件，并且需要从中提取文本..

我尝试了很多方法，但有些方法只适用于 .docx 而不适用于 .doc

我知道 Zend_Service_LiveDocx 可以做到这一点，但不知道该怎么做......

请让我知道重新评分的详细信息，以及是否还有其他方法可以从 .docx 和 .doc 文件中读取内容...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:35:53.840

Zend_Service 中的所有类都与在线服务（Ebay、Flickr、Twitter 等）相关联。LiveDocx 也是一项在线服务，需要用户帐户（[注册](https://www.livedocx.com/user/account_registration.aspx)）。

如果您使用他们的服务，您应该能够阅读文档，但只有在使用它们托管而不是服务器上的语言环境时，我猜这就是您正在寻找的。[Zend LiveDocx 指南](http://framework.zend.com/manual/en/zend.service.livedocx.html)有更多信息。

# gxt - 更新模型属性时禁用 EditorGrid 行

> ID：10279289
> 
> 赞同：1
> 
> 时间：2012-04-23T11:01:10.833
> 
> 标签：gxt

这是我的要求：

我有一个`EditorGrid`根据其关联的 ListStore 呈现一些行。

有一个我的模型实例的`ListStore`集合，其中有一个名为“markeAsDeleted”的属性，该属性在 UI 的其他地方更新。

我的问题是：

当我的 'markAsDeleted' 属性为 'true' 时，如何更改相应行的呈现以将其变为“禁用”？

我期待的是一种添加到我的`EditorGrid`实例的渲染器，它会随着模型属性的更新而更新行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:40:19.727

使用过滤隐藏列将是您最好的选择。

如果您设置`store.setMonitoChanges(true);`，那么我相信它会在商店中的模型发生任何更改并从那里触发 storeUpdate 时进行协调，您可以重新应用您的过滤器（如果它不会自动执行此操作）；

例子

```
store.addStoreListener(new StoreListener<BaseModelData>() {
  public void storeUpdate(StoreEvent<M> se) {
      store.applyFilters("");
  }
}) 
```

编辑：在阅读了另一个答案的评论后，我注意到您正在使用 Grid 过滤器来过滤您可以在商店中轻松使用 addFilter 的列。

例子

```
store.addFilter(new StoreFilter<BaseModelData>() {
   public boolean select(Store<T> store, T parent, T item, String property) {
      return !item.get("markAsDeleted");
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:41:49.380

GXT 确保当您的网格存储被修改时，网格被重新渲染。因此，当您的应用程序的其他部分确实在模型上更新时，请确保在商店中明确更新相同的模型。

您可以使用 store.remove()、store.removeAll()、store.addAll() 将模型替换为更新后的模型。

# java - 安卓确保安全

> ID：10279296
> 
> 赞同：0
> 
> 时间：2012-04-23T11:02:06.640
> 
> 标签：java, php, android

我正在制作应用程序，它会将值发送到 php 脚本。然后 php 脚本将连接到 Mysql 数据库并返回 JSON 数组。然后应用程序会读取它。如何确保安全？目前我没有使用任何安全措施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:14:50.653

这取决于，这是一个如此庞大的话题，以至于真正的答案需要一本书的材料。

你问的是什么“安全措施”？

如果您正在谈论涉及 Web 服务器，那么您首先需要保护您的 Web 服务器并构建一个足够智能的 API，以防止最常见的攻击方法。你需要确保其他人——仅仅通过在 URL 中输入一些东西——不能做你的目标用户可以做的同样的事情。这意味着您需要先验证用户，然后才能授予他们访问 API 的权限。

最常见的方法是共享只有服务器和客户端知道的“密钥”。因此，您的用户使用电话有一个特定的密钥，而服务器有一个密钥。现在用户向服务器发送数据并发送验证哈希（如 sha1(KEY+DATA)）。然后服务器接收数据并确保哈希值相同。切勿将密钥本身与请求一起发送。

您需要测试的另一件事是重放攻击。如果有人窃听通信，那么您必须限制损害。这通常是通过您还发送请求的时间戳和服务器检查时间戳是否在可接受的范围内来完成的，因此如果有人稍后再次发送相同的请求，它将由于时间戳不同而失败。服务器对此进行检查，因为时间戳也被考虑用于输入数据验证。

然后你必须确保从服务器返回的数据是正确的。因此，服务器还将构建一个验证哈希，您的手机将检查该哈希，确保有人在将数据发送回您的手机时没有更改数据。

作为附加层，您还可以使用 AES/Rijndael 256 位加密等重型加密算法对发送（和从 API 接收）的数据进行加密。这将使用打开数据所需的密钥加密数据。如果电话和服务器知道密钥而其他人不知道，则可以安全地发送数据。

然后连接应该是 HTTPS/SSL，这有助于保护通信不被监听。但是如果有人已经可以访问您的手机，这将无济于事，因此建议也使用其他提到的方法。

至于您的手机，只要您没有安装可能危及安全性的应用程序，它本身就非常安全。此外，如果您认为您可以较少地保护您的 Web 服务器，认为由于只有手机与它通信是安全的，那么黑客可以很容易地在他们自己的手机上监听通信并找出您的 Web 服务 API 的基础知识和然后打开所有的门。因此，请确保您的安全层从大到小：Web 服务器是您系统中最大的实体。

如您所见，这是一个庞大的主题，可能需要很长时间才能学习。但是在不知道你到底在问什么的情况下，我真的无法为你提供任何进一步的帮助。

# c# - 在 C# 中创建文件系统路径分支

> ID：10279297
> 
> 赞同：0
> 
> 时间：2012-04-23T11:02:11.850
> 
> 标签：c#, path

我有一个我认为可能是一个非常简单的问题来回答（对于某人）。给定一个路径，比如 C:\A\B\C\D\，假设它不存在（C:\A\ B 可能，当然），在 c# 中？

我唯一能想到的就是一个看起来很脏的小路径解析器，其中包含所有潜在的陷阱。我相信这里的很多人之前都会遇到过这个小问题，并且有比我想出的更好的解决方案。

那么，您的想法请先生们（和女士们）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:05:21.243

`System.IO.Directory.CreateDirectory(@"C:\A\B\C\D\")`会做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:11:20.677

[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.create%28v=vs.71%29.aspx)

```
 // Specify the directories you want to manipulate.
    DirectoryInfo di = new DirectoryInfo(@"c:\MyDir");

    try 
    {
        // Determine whether the directory exists.
        if (di.Exists) 
        {
            // Indicate that it already exists.
            Console.WriteLine("That path exists already.");
            return;
        }

        // Try to create the directory.
        di.Create();
        Console.WriteLine("The directory was created successfully.");
    } 
    catch (Exception e) 
    {
        Console.WriteLine("The process failed: {0}", e.ToString());
    } 
    finally {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:05:43.553

```
 Directory.CreateDirectory(@"C:\A\B\C\D\"); 
```

如果路径中不存在所有目录，则创建它们，甚至返回子目录的 DirectoryInfo 对象（在本例中为 D）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T11:06:04.403

您可能想查看[MSDN](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)和“Directory.exists”-方法。

通过这种方式，您可以检测“C:\A\B\C\D...”是否已经存在，如果不存在，您可以使用[Directory.Create(String directoryName)](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx) ...创建它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T11:06:09.943

[Directory.CreateDirectory](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)会为您处理这些。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T11:06:11.320

```
 string folderPath = "C:\A\B\C\D"
 if (!System.IO.Directory.Exists(folderPath))
                System.IO.Directory.CreateDirectory(folderPath); 
```

# trello - trello API 是所有对象中唯一的 id 值

> ID：10279300
> 
> 赞同：2
> 
> 时间：2012-04-23T11:02:38.887
> 
> 标签：trello

正如主题所说 - 所有对象的 id 值都是唯一的吗？例如，一张卡片是否有可能（不可能）共享列表/板等的相同 ID？

我的猜测是“是”，但只是想检查一下。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:35:05.103

这些`id`值在所有帐户和所有对象中都是唯一的。

id 实际上是与[mongo](http://www.mongodb.org/)数据库`_id`中的记录相关联的文档。每个集合都要求它们是唯一的（即，两个列表或成员不应具有相同的）。请参阅有关碰撞概率的[其他问题。](https://stackoverflow.com/questions/4677237)（简而言之，不应该有任何碰撞）`_id``_id`

事实上，Trello Web 客户端和 API 依赖于`id`s 的唯一性，所以你可以做同样的假设是安全的。

# javascript - jQuery选项卡动画由控制器暂停和播放

> ID：10279302
> 
> 赞同：1
> 
> 时间：2012-04-23T11:02:46.010
> 
> 标签：javascript, jquery, css, animation, tabs

我使用 jQuery 选项卡进行轮播，但我需要控制按钮，例如播放和暂停。以下是我的控件。

```
<p id="carusalSwitch">Autoplay 
  <span class="on">On</span> | <span class="off">Off</span>
</p> 
```

然后页面加载，tab动画暂停（停止），通过按钮交互，可以播放，反之亦然。以下是查询代码，

```
// when loaded carousal is paused, off text is change to bold
$('#carusalSwitch .off').css('fontWeight','bold');

// when user click on "ON" link
$('#carusalSwitch .on').click(function() {
$('#featured > ul').tabs({fx:{opacity: 'toggle'}}).tabs('rotate', 3000, true);
    $(this).css('fontWeight','bold');
$('#carusalSwitch .off').css('fontWeight','normal');
});

// when user click on "OFF" link        
$('#carusalSwitch .off').click(function() {
$('#featured > ul').tabs();
     $(this).css('fontWeight','bold');
$('#carusalSwitch .on').css('fontWeight','normal');
}); 
```

当您单击“ON”链接时，动画开始，但当单击“off”时，动画仍然继续。可能是什么错误？

即使我尝试添加以下代码，

```
$('#featured > ul').tabs().clearQueue().stop(); 
```

但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:29:53.133

试试这个 ：

```
$('#featured > ul').unbind('toggle').unbind('rotate'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:43:33.247

```
$('#featured > ul').tabs('rotate', null, true); 
```

当我如上所述使用时，它工作正常。

# asp.net-mvc - NLog.Extended 未复制到我的 Web 项目

> ID：10279305
> 
> 赞同：3
> 
> 时间：2012-04-23T11:03:35.520
> 
> 标签：asp.net-mvc, nlog

我有两个项目的解决方案：

**项目 1：** Wrapper.Dll，其中包含一个 NLog 包装器。NLog 和 NLog.Extended 已与 Nuget 一起安装。

**项目 2：**是一个 ASP.Net MVC 项目，其中包含对项目 1 的引用。

当我尝试运行 Web 项目时，它会引发异常，因为 NLog 尝试从 NLog.Extended.Dll 加载目标渲染器。

如果我检查 Wrapper.dll 的 bin 目录，我有 NLog.Dll 和 NLog.Extended.Dll。

如果我检查 Web 项目的 bin 目录，我只有 NLog.dll。

如何告诉 Visual Studio 将 NLog.Extended.Dll 从项目 1 复制到项目 2？

**编辑：**添加一些使用 NLog.Extended.Dll 中的某些内容的死代码会复制文件。有没有更清洁的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T11:57:34.453

不幸的是，没有更清洁的解决方案。如果您的代码没有（直接或间接）引用 NLog.Extended 程序集中的对象，则不会复制它。这当然是一个问题，因为布局只是字符串而不是直接引用。您可以使用构建后事件，但在我看来这是一个更丑陋的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:27:59.873

`NLog.Extended.dll`如果它依赖于它，您可以在 Web 项目中添加对它的引用。

# android - 如何将listview数据作为3 2 1 textviews显示在android中

> ID：10279306
> 
> 赞同：0
> 
> 时间：2012-04-23T11:03:37.087
> 
> 标签：android, listview

我是 android 新手。我今天尝试的是获取一个列表视图，将数据显示为第一行中的 3 个文本视图和第二行中的 2 个文本视图和最后一个文本视图中的 1 个文本视图。为此，我在我的代码中尝试了这个，请帮助我出去 。

我能够在所有列表视图中显示 3 行 textview 但不能显示为 3 2 1 textview 。请建议我如何做到这一点。请帮助我完成我的主要活动

```
ListView lview3;  
 ListView3Activity adapter;  

    private static String month[] = {"January","February","March","April","May",  
        "June","July","August","September",  
        "October","November","December"};  

    private static String desc[] = {"Month - 1","Month - 2","Month - 3",  
        "Month - 4","Month - 5","Month - 6","Month - 7",  
        "Month - 8","Month - 9","Month - 10","Month - 11","Month - 12"};  
    private static String details[] = {"Month - 1","Month - 2","Month - 3",  
        "Month - 4","Month - 5","Month - 6","Month - 7",  
        "Month - 8","Month - 9","Month - 10","Month - 11","Month - 12"};  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lview3 = (ListView) findViewById(R.id.listView1);  
    adapter = new ListView3Activity(this, month, desc,details);  
    lview3.setAdapter(adapter);  

    lview3.setOnItemClickListener(this);  
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "Title => "+month[position]+" n Description => "+desc[position], Toast.LENGTH_SHORT).show();  

} 
```

}

listView3Activity 如下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:50:32.907

您是否需要如下屏幕截图所示的功能？

![功能示例](../Images/e8e4245835b9eba9f559bfd4272b5dd3.png)

如果是，那么这可以通过多种方式实现。其中之一如下。

1.  使用三个文本字段为 ListView 中的项目定义一个布局文件。（在我提供的方法中，我创建了 list_item_layout.xml，您可以参考这个以获取详细信息）
2.  根据您的需要向列表视图的适配器提供数据（例如，我创建了自定义适配器，它以 UserRecord 类型的 arrayList 和上下文作为参数）
3.  UserRecord 只是一个包含三个字符串的类，它们将显示在列表视图项中。
4.  将适配器设置为列表视图。
5.  详情请看代码，代码是不言自明的。

## 主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/sendNotification"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="SendNotification" />

    <ListView
        android:id="@+id/MyList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

## list_item_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_height="wrap_content" 
   android:gravity="left|center"
   android:layout_width="wrap_content" 
   android:paddingBottom="5px"
   android:paddingTop="5px" 
   android:paddingLeft="5px">

    <ImageView
       android:id="@+id/avatar"
       android:layout_width="wrap_content"
       android:layout_height="fill_parent"
       android:layout_marginRight="6dip"
       android:src="@drawable/ic_launcher" />
    <LinearLayout
       android:orientation="vertical"
       android:layout_width="0dip"
       android:layout_weight="1"
       android:layout_height="fill_parent">

        <TextView android:id="@+id/username"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:gravity="center"/>

        <TextView android:id="@+id/middlename" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content"/>

        <TextView android:id="@+id/lastname" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content"/> 
    </LinearLayout>
</LinearLayout> 
```

## listView 的自定义适配器 (CustomAdapter.java)

```
import java.util.ArrayList;

import com.main.UserRecord;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class CustomAdapter extends BaseAdapter {

    private ArrayList<UserRecord> _data;
    Context _c;
    CustomAdapter (ArrayList<UserRecord> data, Context c){
        _data = data;
        _c = c;
    }
    /* (non-Javadoc)
     * @see android.widget.Adapter#getCount()
     */
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return _data.size();
    }

    /* (non-Javadoc)
     * @see android.widget.Adapter#getItem(int)
     */
    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return _data.get(position);
    }

    /* (non-Javadoc)
     * @see android.widget.Adapter#getItemId(int)
     */
    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    /* (non-Javadoc)
     * @see android.widget.Adapter#getView(int, android.view.View, android.view.ViewGroup)
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
         View v = convertView;
         if (v == null) 
         {
            LayoutInflater vi = (LayoutInflater)_c.getSystemService(_c.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list_item_layout, null);

           TextView username = (TextView)v.findViewById(R.id.username);
           TextView middlename = (TextView)v.findViewById(R.id.middlename);
           TextView lastname = (TextView)v.findViewById(R.id.lastname);

           UserRecord user = _data.get(position);
           username.setText(user.userName);
           middlename.setText(user.middleName);
           lastname.setText(user.lastName);
         }
        return v;    
    }

} 
```

## 用户记录.java

```
package com.main;

public class UserRecord {
    public String userName;
    public String middleName;
    public String lastName;

    public UserRecord(String username, String middleName,String lastName) {
        this.userName = username;
        this.middleName = middleName;
        this.lastName = lastName;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:30:30.953

请参阅提出的[同类问题](https://stackoverflow.com/questions/10279176/how-to-populate-the-same-layout-inside-a-liner-layout-android/10279536#10279536)。

在您的情况下，您需要创建一个新的 xml 文件，其中包含您需要的布局。然后将该布局作为视图传递给每个新列表项。将数据数组作为示例中所示的 d 传递。

# audio - Java 音频转换器 api

> ID：10279310
> 
> 赞同：5
> 
> 时间：2012-04-23T11:04:02.300
> 
> 标签：audio, java, audio-converter

我正在寻找一个全面的 Java API，它可以转换各种格式和比特率的音频。

例如 WAV (6kHz to 48kHz) L16/audio ---TO--- WAV (RIFF header) 8KHz 8-bit mono A-law/U-law AIFF (6kHz to 48kHz) L16/audio ---TO-- - WAV（RIFF 标头）8KHz 8 位单声道 A-law/U-law

和其他语音音频格式。

任何其他关于音频转换的类似 Java 库的建议也会受到欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:05:37.320

我能够通过使用[Tritonus：开源 Java 声音 API](http://www.tritonus.org/plugins.html)及其广泛的[声音转换器插件](http://www.tritonus.org/plugins.html)来解决这个问题。

特别是 Tritonus 杂项插件在我的上下文中非常有用。

# iphone - 如何获取 UIImage 中使用的图像名称？

> ID：10279314
> 
> 赞同：17
> 
> 时间：2012-04-23T11:04:10.583
> 
> 标签：iphone, objective-c, ios, ipad, uiimage

我正在使用 UIImage，其中有一个图像，我想知道图像的名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T11:09:50.183

该功能不是内置的，`UIImage`因为图像并不总是从文件中加载。但是，您可以创建一个自定义`UIImageView`子类来满足您的需求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T11:10:03.190

这不可能。UIImage 实例包含实际的图像数据，没有对文件名的任何引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:09:30.053

图像不一定来自文件或其他命名来源，因此并非所有图像都有名称。从文件创建图像时，您可以将名称存储在单独的`NSString*`中，然后在必要时引用该存储的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T22:38:47.547

此代码将帮助您

```
 NSString *imgName = [self.imgView1st image].accessibilityIdentifier;

    NSLog(@"%@",imgName);

    [self.imgView2nd setImage:[UIImage imageNamed:imgName]]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-06-22T10:00:22.123

在以后的 iOS 版本中，可以从描述中提取图像名称。请注意，仅供调试使用！

```
extension UIImage {

    /// Extracts image name from a description.
    /// * Example description: `<UIImage:0x60000278ce10 named(main: ic_timeline_milestone_bluedot) {16, 16}>`
    /// * Example name: `ic_timeline_milestone_bluedot`
    /// - warning: For the debug use only.
    var name: String? {
        let description = self.description
        guard let regexp = try? NSRegularExpression(pattern: "\\(main: (.*)\\)", options: []) else { return nil }
        guard let match = regexp.matches(in: description, options: [], range: description.fullRange).first else { return nil }
        guard match.numberOfRanges > 0 else { return nil }
        let idx1 = description.index(description.startIndex, offsetBy: range.lowerBound)
        let idx2 = description.index(description.startIndex, offsetBy: range.upperBound)
        return String(description[idx1..<idx2])
    }
} 
```

# fonts - 如何在 ExtJS 4 中为整个应用程序设置字体样式？

> ID：10279316
> 
> 赞同：4
> 
> 时间：2012-04-23T11:04:25.693
> 
> 标签：fonts, extjs4

我想知道如何为 ExtJS 4 的整个应用程序设置某些字体样式（大小、字体名称等）？

我希望有一些单一的设置可以适用于整个应用程序。

请赐教！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:10:13.707

在您的自定义 CSS 文件中使用以下 CSS 代码：

```
.x-body {
    font-family: Tahoma;
    font-size: 11px;
    color: #333;
} 
```

您的自定义 CSS 文件**位于 ext-all.css**文件之后，如下所示：

```
<link href="ext/resources/css/ext-all.css" rel="stylesheet" type="text/css">
<link href="mycss.css" rel="stylesheet" type="text/css"> 
```

当然，您可以使用`<style>`标签代替。

**编辑：（**用于评论）

对于**面板标题**，请使用：

```
.x-panel-header-text-default,
.x-panel-header-text-default-framed {
    font-family: Tahoma;
    font-size: 11px;
    color: #333;
} 
```

对于**图表**，情况有所不同。因为他们使用 Theme 进行样式设置。因此，您可以创建一个主题并将其用于图表。要创建主题，您可以执行以下操作：

```
Ext.define('Ext.chart.theme.MyTheme', {
    extend:'Ext.chart.theme.Base',

    constructor: function() {
        Ext.chart.theme.MyTheme.superclass.constructor.call(this, {
            axisLabelBottom: {
                 fill: '#333',
                 font: 'Tahoma 11px'
            },
            axisLabelLeft: {
                 fill: '#333',
                 font: 'Tahoma 11px'
            },
            // other configs
        });
    }
}); 
```

要查看所有可用配置，请查看下面的链接并找到**主题**标题：
[http ://www.sencha.com/learn/drawing-and-charting/](http://www.sencha.com/learn/drawing-and-charting/)

要为您的图表使用**“MyTheme”**，您可以这样做：

```
{
    // ...
    xtype: 'chart',
    theme: 'MyTheme',
    // ..
} 
```

# spring - 调用某些操作时，放置在 ModelMap 中的表单对象似乎在某处被清除

> ID：10279319
> 
> 赞同：0
> 
> 时间：2012-04-23T11:04:30.337
> 
> 标签：spring, spring-mvc

我有一个控制器，它处理两种形式。

在初始化表单方法中，我设置了渲染屏幕所需的所有内容。并将表单对象放入模型图。

在渲染阶段，渲染成功完成。但是当提交完成并调用@ActionMapping 时。

我得到了例外。

```
org.springframework.web.portlet.handler.PortletSessionRequiredException: Session attribute 'someForm' required - not found in session
        at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter$PortletHandlerMethodInvoker.raiseSessionRequiredException(AnnotationMethodHandlerAdapter.java:554)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveModelAttribute(HandlerMethodInvoker.java:758)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:356)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
        at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:360)
        at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.doHandle(AnnotationMethodHandlerAdapter.java:347)
        at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.handleAction(AnnotationMethodHandlerAdapter.java:281)
        at org.springframework.web.portlet.DispatcherPortlet.doActionService(DispatcherPortlet.java:641)
        at org.springframework.web.portlet.FrameworkPortlet.processRequest(FrameworkPortlet.java:519)
        at org.springframework.web.portlet.FrameworkPortlet.processAction(FrameworkPortlet.java:460)
        at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:70)
        at com.nomadsoft.cortex.infrastructure.spring.security.SecurityContextAuthenticatedPortletFilter.doFilter(SecurityContextAuthenticatedPortletFilter.java:99)
        at sun.reflect.GeneratedMethodAccessor554.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
```

**如果我将对象放入我从请求对象获取的 HTTP 会话中并通过该过程进行操作，一切都会正常**

我不知道当我使用模型图时出了什么问题。

在应用程序的其余部分中，还有更多其他工作正常的控制器。

任何线索都会受到高度评价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:34:25.450

您的表单似乎需要“someForm”属性（`Session attribute 'someForm' required`）。必须在您的页面中调用此属性。

# java - 在动作侦听器完成之前执行的richfaces reRender

> ID：10279323
> 
> 赞同：3
> 
> 时间：2012-04-23T11:05:04.470
> 
> 标签：java, richfaces, jsf-1.2, rerender

我有一个 Richfaces listShuttle 组件，我需要对源值（左侧）进行排序。为此，在组件的值发生更改后，我有一个支持 bean 的方法来对元素进行排序，并且我想重新渲染 listShuttle。

xhtml代码：

```
<a4j:region>
    <rich:listShuttle id="#{id}_listShuttle"
        sourceValue="#{bean.displayedItems}"
        targetValue="#{bean.selectedItems}" var="item"
        fastOrderControlsVisible="false" orderControlsVisible="false"
        fastMoveControlsVisible="false"
        style="margin-right:15px;margin-bottom:15px;">

        <f:converter converterId="#{converterId}" />
        <a4j:support event="onlistchanged" action="#{bean.sortList}"
            reRender="#{updateId}, #{id}_listShuttle" />

        <rich:column>
            <h:outputText value="#{item.name}" />
        </rich:column>
    </rich:listShuttle>
</a4j:region> 
```

它是我在更多地方使用的组件，所以我向它传递了一些参数。

问题是该操作`action="#{bean.sortList}"` 是在重新渲染阶段之后执行的。我希望在重新渲染阶段之前执行此操作。

操作的顺序是这样的： - getDisplayedItems - setDisplayedItems - sortList

知道如何在 sortList 操作之后使 listShuttle 重新呈现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T19:19:53.363

将 immediate=true 添加到您的 sortList 可以解决问题吗？

# c# - 调用中的参数数量或类型错误

> ID：10279324
> 
> 赞同：1
> 
> 时间：2012-04-23T11:05:05.193
> 
> 标签：c#, sql, oracle, stored-procedures, oracle-sqldeveloper

您好我正在尝试创建一个存储过程来更新 Oracle SQL 开发人员中的列。从 c# 调用函数时出现此错误：

ORA-06550：第 5 行，第 3 列：PLS-00306：调用“SP_UPDATEREFILLCHECKPLANSET”时参数的数量或类型错误 ORA-06550：第 5 行，第 3 列：PL/SQL：语句被忽略

是什么原因，我该如何解决这个问题？

下面的程序：

```
create or replace
PROCEDURE SP_UPDATEREFILLCHECKPLANSET 
(
  In_MasterAdjustMaxRefillChecks IN "Ref_RefillCheckPlanSettings"."MasterAdjustMaxRefillChecks"%type,
  In_DefDaysBetweenRefillChecks IN "Ref_RefillCheckPlanSettings"."DefaultDaysBetweenRefillChecks"%type,
  In_MasterAdjustMaxNotices IN "Ref_RefillCheckPlanSettings"."MasterAdjustMaxNotices"%type,
  In_DefaultDaysBetweenNotices IN "Ref_RefillCheckPlanSettings"."DefaultDaysBetweenNotices"%type,
  In_DaysBefore1stRefillCheckNot IN "Ref_RefillCheckPlanSettings"."DaysBefore1stRefillCheckNotice"%type,
  In_SendNoticeIfPositiveBalance IN "Ref_RefillCheckPlanSettings"."SendNoticeIfPositiveBalance"%type,
  In_DefaultDaysAfterTermination IN "Ref_RefillCheckPlanSettings"."DefaultDaysAfterTermination"%type,
  In_EmergencyShutDown IN "Ref_RefillCheckPlanSettings"."EmergencyShutDown"%type,
  In_Reason IN "Ref_RefillCheckPlanSettings"."Reason"%type,
  In_MasterAmountOfPauses IN "Ref_RefillCheckPlanSettings"."MasterAmountOfPauses"%type,
  In_MaxAmountOfPauseDays IN "Ref_RefillCheckPlanSettings"."MaxAmountOfPauseDays"%type,
  In_Id IN NUMBER
)
AS 
BEGIN
UPDATE "Ref_RefillCheckPlanSettings"
  SET
    "MasterAdjustMaxRefillChecks" = In_MasterAdjustMaxRefillChecks,
    "DefaultDaysBetweenRefillChecks" = In_DefDaysBetweenRefillChecks,
    "MasterAdjustMaxNotices" = In_MasterAdjustMaxNotices,
    "DefaultDaysBetweenNotices" = In_DefaultDaysBetweenNotices,
    "DaysBefore1stRefillCheckNotice" = In_DaysBefore1stRefillCheckNot,
    "SendNoticeIfPositiveBalance" = In_SendNoticeIfPositiveBalance,
    "DefaultDaysAfterTermination" = In_DefaultDaysAfterTermination,
    "EmergencyShutDown" = In_EmergencyShutDown,
    "Reason" = In_Reason,
    "MasterAmountOfPauses" = In_MasterAmountOfPauses,
    "MaxAmountOfPauseDays" = In_MaxAmountOfPauseDays
    WHERE "Id" = In_Id;
END SP_UPDATEREFILLCHECKPLANSET; 
```

对更新存储过程的调用。

```
public void UpdateRefillCheckPlanSettings(RefillCheckPlanSettings updatedSettings)
        {
            if (_dbConn.State != ConnectionState.Open)
            {
                _dbConn.Open();
            }

            const string command = "SP_UPDATEREFILLCHECKPLANSET";

            using (var oracleCommand = new OracleCommand(command, _dbConn))
            {
                oracleCommand.CommandType = CommandType.StoredProcedure;

                try
                {
                    oracleCommand.Parameters.AddWithValue("In_MasterAdjustMaxRefillChecks", updatedSettings.MasterAdjustMaxRefillChecks);
                    oracleCommand.Parameters.AddWithValue("In_DefDaysBetweenRefillChecks", updatedSettings.DefaultDaysBetweenRefillChecks);
                    oracleCommand.Parameters.AddWithValue("In_MasterAdjustMaxNotices", updatedSettings.MasterAdjustMaxNotices);
                    oracleCommand.Parameters.AddWithValue("In_DefaultDaysBetweenNotices", updatedSettings.DefaultDaysBetweenNotices);
                    oracleCommand.Parameters.AddWithValue("In_DaysBefore1stRefillCheckNot", updatedSettings.DaysBeforeFirstRefillCheckNotice);
                    oracleCommand.Parameters.AddWithValue("In_SendNoticeIfPositiveBalance", updatedSettings.SendNoticeIfPositiveBalance);
                    oracleCommand.Parameters.AddWithValue("In_DefaultDaysAfterTermination", updatedSettings.DefaultDaysAfterTermination);
                    oracleCommand.Parameters.AddWithValue("In_EmergencyShutDown", updatedSettings.EmergencyShutDown);
                    oracleCommand.Parameters.AddWithValue("In_Reason", updatedSettings.Reason);
                    oracleCommand.Parameters.AddWithValue("In_MasterAmountOfPauses", updatedSettings.MasterAmountOfPauses);
                    oracleCommand.Parameters.AddWithValue("In_MaxAmountOfPauseDays", updatedSettings.MaxAmountOfPauseDays);
                    oracleCommand.Parameters.AddWithValue("In_Id", updatedSettings.Id);
                    oracleCommand.ExecuteNonQuery();
                }
                catch (Exception ex)
                {
                    Log.Fatal("Couldn't update RefillCheckPlanSettings! RefillCheckPlanSettings: '" + updatedSettings.Id + "'", ex);
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:27:41.460

错误可能出在此参数中：

```
In_DaysBefore1stRefillCheckNot IN "Ref_RefillCheckPlanSettings"."DaysBefore1stRefillCheckNotice"%type,  
oracleCommand.Parameters.AddWithValue("In_DaysBefore1stRefillCheckNot", updatedSettings.DaysBeforeFirstRefillCheckNotice); 
```

因为类型名称不相等：
DaysBefore* *1st* *RefillCheckNotice != DaysBefore* *First* *RefillCheckNotice

# php - array_key_exists 对于 $argv 不能正常工作？

> ID：10279325
> 
> 赞同：1
> 
> 时间：2012-04-23T11:05:06.297
> 
> 标签：php, unix

我正在编写一个 php 代码，该代码旨在从 Unix 控制台运行，并带有几个可选开关。我在使脚本识别开关时遇到问题。

我以这种方式从控制台运行脚本

```
./<scriptname>.php v 
```

希望在代码中会选择“v”开关，但似乎没有。这是用来拾取它的代码。

```
global $argv; // specified, but probably not needed
$verbose = array_key_exists("v", $argv); // should work but it doesn't!
// $verbose= isset($_GET["v"]); // tried, but doesn't work because it's run from console 
```

但是尽管有线路`var_dump($argv);`输出：

```
array(2) {
  [0]=>
  string(21) "./<scriptname>.php"
  [1]=>
  string(1) "v"
} 
```

以下行`echo "\nverbose: :$verbose:\n";`输出`verbose: ::`（即`false`）。

为什么 ？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:06:20.073

`"v"`里面是*值*`$argv`，不是*键*。您可以通过以下方式进行检查[`in_array`](http://php.net/manual/en/function.in-array.php)：

```
$verbose = in_array("v", $argv); 
```

注意：`in_array`对数组内容执行线性搜索，如果以下一个或多个条件为真，这可能不是最好的方法：

*   你在循环中调用它
*   数组很长
*   您预计会有大量支票退回`false`

在这种情况下，这些都不是真的，所以你在这里很好。但如果情况不同，您可以考虑使用数组的值作为另一个数组的键，以便您可以检查摊销成本，`O(1)`而不是`O(n)`：

```
// 100% safe as long as you don't mind "losing" duplicate values:
$lookup = array_fill_keys(array_keys($argv), true);

// Should be equivalent, at first sight looks safe, might be faster
// In THIS case it works just fine, but in this case you wouldn't want to
// flip the array in the first place
$lookup = array_flip($argv);

$verbose = isset($lookup["v"]); 
```

# web-services - 使用 Lotus Notes 的 Web 服务

> ID：10279326
> 
> 赞同：0
> 
> 时间：2012-04-23T11:05:10.097
> 
> 标签：web-services, lotus-notes

当我尝试使用 Lotus 脚本进行 WSDL 时出现以下错误，任何人都可以帮助我

“错误：客户端：WSDLreader：加载 wsdl 文件失败 HRESULT=0x80070057-WSDLReader:xml 解析器在第 1 行，第 63 行失败，原因是缺少空格。HRESULT=0x1Line:7”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:01:57.300

该错误通常意味着 WSDL 的结构已损坏。例如，如果您从服务器返回 404 页面而不是 WSDL。

首先尝试通过浏览器打开 WSDL 文件并检查它以确保您只取回 WSDL。

您上面的网址末尾有：

```
?WSDL%22 
```

%22 看起来不对。

其次，您可以使用 SOAPUI 之类的工具测试您的 WSDL。[http://www.soapui.org](http://www.soapui.org)

此位置的 Wiki 上有一个教程：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Testing_your_Domino_web_service_provider_and_consumer_using_SoapUI._](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Testing_your_Domino_web_service_provider_and_consumer_using_SoapUI._)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:54:07.827

这听起来像是 WSDL 文件的错误。看看您是否可以使用在线 WSDL 检查器对其进行验证。

此外，请确保您指定了正确的端点 URL。

# c++ - 错误 LNK2001：未解析的外部符号 C++

> ID：10279330
> 
> 赞同：5
> 
> 时间：2012-04-23T11:05:33.140
> 
> 标签：c++, visual-c++, inheritance, linker

在我之前编译良好的 VC++ 代码中，我添加了一个函数 X()，如下所示：

```
In the file BaseCollection.h
class Base
{
// code
virtual HRESULT X();
//code
};

IN the file DerivedCollection.h
class Derived:public Base
{
    HRESULT X();

}

In the file DerivedCollection.cpp
HRESULT Derived::X
{
// definition of Derived here. 
} 
```

已将头文件也正确包含在 .cpp 文件中。但我仍然不明白我收到链接错误的原因是什么：

> 错误 LNK2001：未解析的外部符号“公共：虚拟长 __thiscall Base::X()”(?X@Base@@UAEJI@Z)

我真的很努力修复这个错误。任何人都可以帮助我解决这个问题。提前非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T11:07:08.120

你实施`X()`了`Base`吗？你需要这样做，或者让它成为纯虚拟的：

```
class Base
{
// code
virtual HRESULT X() = 0; //pure virtual. Base doesn't need to implement it.
//code
}; 
```

此外，您对`X()`in的定义`Derived`看起来是错误的。你可能需要这样的东西：

```
HRESULT Derived::X()
{
// definition of Derived here. 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:07:27.277

你永远不会定义函数`X`：

```
HRESULT Base::X()
{
// definition of X 
} 
```

你还需要一个定义，`Derived::X()`因为那也是`virtual`.

# linux - 是否存在读取自身进程的 [stack] 地址范围的函数？

> ID：10279331
> 
> 赞同：2
> 
> 时间：2012-04-23T11:05:39.167
> 
> 标签：linux, linux-kernel, maps, stack, callstack

linux 上是否有可用的函数来获取有关当前进程的 [stack] 信息的地址范围的信息，如 /proc/self/maps 文件 [stack] 部分中的信息？看待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:25:33.850

据我所知，不，不存在这样的功能。如果您查看该[`pmap`](http://procps.cvs.sourceforge.net/viewvc/procps/procps/pmap.c?view=markup)实用程序的源代码，您会发现即使它们只是[解析](http://procps.cvs.sourceforge.net/viewvc/procps/procps/proc/readproc.c?view=markup)文件系统中的`/proc`文件，所以恐怕这是您能做的最好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:59:00.757

我不确定你到底想要什么，但你可以利用`pstack`（遗憾的是，它不适用于 64 位内核，IIRC）

[http://linux.die.net/man/1/pstack](http://linux.die.net/man/1/pstack)

# android - sqlite 查询运行时错误

> ID：10279332
> 
> 赞同：0
> 
> 时间：2012-04-23T11:05:43.410
> 
> 标签：android, sqlite, compiler-errors, runtime

我正在使用 sqlite，但我最终遇到了这个错误。我没有得到这里的错误。

下面是我的logcat。

```
android.database.sqlite.SQLiteException: near "/": syntax error: , while compiling: 

SELECT start,end FROM crop_list WHERE name =/sdcard/Shri Ramachandra kripalu bhajamana.mp3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:14:30.023

我认为您的问题是您忘记添加引号（''），例如：

> 从crop_list 中选择开始，结束，其中名称='/sdcard/Shri Ramachandra kripalu bhajamana.mp3'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:42:58.943

为什么不使用类助手和 Helper.dabase.query(.....) <- 它更快 ;) 比 helper.dabase.rawquery 快 2 segons ;) [SQLiteOpenHelper | Android 开发者](https://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDEQFjAA&url=http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html&ei=hWmVT-bIMaXW0QXW4_D8AQ&usg=AFQjCNEBb8YvlGxrEdTTNAan7LjslOLlYQ&sig2=3CZGyukB_mcBe5doXDhOQA)<-- 最佳实践

# html - 使用jsp根据选择显示下拉列表的相应编号

> ID：10279338
> 
> 赞同：0
> 
> 时间：2012-04-23T11:06:08.460
> 
> 标签：html, jsp

我有 2 个下拉菜单，一个是车名列表，另一个是号码列表。如果我从第一个 ddl 中选择任何一个车名，第二个应该显示与选择相关的相应号码。

```
<form method="post" action="sample2.jsp">
<select name="sel1">
<option value="Alto">Alto</option>
<option value="Esteem">Esteem</option>
<option value="Honda City">Honda City</option>
<option value="Chevrolet">Chevrolet</option>
</select>
<br>
<select name="sel2">
<option value="1.1">1.1</option>
<option value="1.2">1.2</option>
<option value="1.3">1.3</option>
<option value="1.4">1.4</option>
</select>
<input type="Submit" value="Submit">
</form> 
```

示例：中音->1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:17:44.963

您可以使用 jQuery 如下所示：

```
$('#sel1').change(function(){    
    var index = $('#sel1').attr('selectedIndex');
    $('#sel2').attr('selectedIndex', index);        
}); 
```

参见示例：http: [//jsfiddle.net/a2crA/1/](http://jsfiddle.net/a2crA/1/)

# php - 从 PHP 服务器获得空响应

> ID：10279344
> 
> 赞同：0
> 
> 时间：2012-04-23T11:06:32.377
> 
> 标签：php, android, json, http-post

嗨朋友们我正在尝试将 PHP Web 服务添加到我的 ANDROID 应用程序，我的 android 代码：

```
userName = userNameField.getText().toString();
passWord = passWordField.getText().toString();

try {
JSONObject json = new JSONObject();
json.put("username", userName);
json.put("password", passWord);
json.put("device_type", "Android");
json.put("lat", "0.0");
json.put("long", "0.0");

JSONObject json1 = new JSONObject();
json1.put("method_name", "checkLogin");
json1.putOpt("body", json);

HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams,
        TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
HttpClient client = new DefaultHttpClient(httpParams);

HttpPost request = new HttpPost(URL);
request.setEntity(new StringEntity(json1.toString()));
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String response = client.execute(request, responseHandler);

Toast.makeText(this, response, Toast.LENGTH_LONG).show();

} catch (ClientProtocolException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
} catch (Throwable t) {
Toast.makeText(this, "Request failed: " + t.toString(),
        Toast.LENGTH_LONG).show();
}
} 
```

要求：

```
 {"method_name":"checkLogin","body":   {"username":"someone@some.com","password":"password","device_type":"android","lat":"","long":""}} 
```

预期响应：

```
[{"status":"1","message":"Login successfully","data":{"id":"xx","username":"someone@some.com","first_name":"xxx","last_name":"yyy","gender":"xxx","relationship":"xxxx","birthdate":"xxxx","hometown":"","major":null,"class":null,"house":null,"device_type":"iphone","current_location_lat":"0.0","current_location_lon":"0.0","profile_image":"no_male_user.png","is_login":"1","created":"2012","status":"1","tag":[{"id":"x","tag_name":"xxxx"},{"id":"x","tag_name":"xxx xxx"}]}}] 
```

主文件

```
<?php
require_once('configure.php');
require_once('db.php');
require_once("request.php");
require_once("error_msg.php");
require_once("./includes/JSON.php");

$json = $_POST['json'];

$objRequest = new Request($json);
$rows = $objRequest -> main();
echo $rows;
?> 
```

请求.php

```
<?php
require_once("./includes/JSON.php");
require_once("db.php");
require_once('SimpleImage.php');
class Request
{
function __construct($json)
{
    $this -> array1 = @json_decode(stripcslashes(trim($json)));
}
function main()
{
    $objDb = new DB();
    $conn = $objDb -> getConnection();

    if(!$conn)
        return Error :: $DB_CONN_ERROR." ".$DB_CONN_ERROR_DESC;
    else
    {
        if($this -> array1 -> method_name == 'checkLogin')
            return $this -> getLoginFlag($this -> array1 -> body);
    }
}
// For Login Start
function getLoginFlag($body)
{
    $username = trim($body -> username);
    $password = ($body -> password);
    $device_type = trim($body -> device_type);

    $this -> rs_login = DB :: selectLoginRecord($body);
    $arr_resp = array();
    $retArray = array();
    $tagListArray = array();
    if(mysql_num_rows($this -> rs_login) > 0)
    {
        while($rows = mysql_fetch_array($this -> rs_login))
        {
                $arr_resp = array("id"=> $rows['id'],"username"=> $rows['username'],"first_name"=> ucfirst($rows['first_name']),"last_name"=>ucfirst($rows['last_name']),"gender"=>$rows['gender'],"relationship"=>$rows['relationship'],"birthdate"=>date('M d, Y', strtotime($rows['birthdate'])),"hometown"=>$rows['hometown'],"major"=>$rows['major'],"class"=>$rows['class'],"house"=>$rows['house'],"device_type"=>$rows['device_type'],"current_location_lat"=>$rows['current_location_lat'],"current_location_lon"=>$rows['current_location_lon'],"profile_image"=>$rows['profile_image'],"is_login"=>$rows['is_login'],"created"=>date('Y', strtotime($rows['created'])),"status"=>$rows['status']);   
        }
        $this -> rs_tag_list = DB :: selectTagList($arr_resp['id']);
        if(mysql_num_rows($this -> rs_tag_list) > 0)
        {   
            while($rows = mysql_fetch_array($this -> rs_tag_list))
            {
                $tagListArray['tag'][]= array("id"=> $rows['id'],"tag_name"=> $rows['tag_name']);   
            }
        }

        $finalArray = array_merge($arr_resp,$tagListArray);
        $retArray[] = array("status"  => "1","message" => "Login successfully","data" => $finalArray);
    }
    else
    {
        $retArray[] = array("status" => "0","message" => "The username or password you entered is incorrect");  
    }

    return json_encode($retArray);
}
// End Login

}

?> 
```

但是我得到了空洞的回应，有人可以帮助我吗？这里我使用 JSON 进行数据解析。感谢您的回复朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:12:48.053

如果它正确获得所需的值并准确执行所需的方法，您能否检查 php 代码？

# python - Python中的静态代码分析？

> ID：10279346
> 
> 赞同：5
> 
> 时间：2012-04-23T11:06:37.027
> 
> 标签：python, debugging, refactoring, static-code-analysis

您可以为 Python 推荐哪些有用的静态代码分析。我相信它们对于重构代码很有用。我知道

*   模块依赖的蛇食
*   pycallgraph 用于动态调用图
*   错误的 pylint

有静态调用分析器吗？如果我想编写自定义程序，哪种方法最简单？

您还能想到哪些其他类型的静态代码检查？或者甚至是一些像 ABC 这样的 Python 魔法？

编辑：我发现使用[http://docs.python.org/3.3/library/ast.html](http://docs.python.org/3.3/library/ast.html)甚至[http://www.astroid.org/](http://www.astroid.org/)都可以用来编写一些自定义解析器。然后可以使用 graphviz 来可视化，甚至可以使用 PlantUML 来制作 UML 图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-15T01:23:42.217

这是一个非常强大的 python 类型推断器 [https://github.com/yinwang0/pysonar2](https://github.com/yinwang0/pysonar2)

它具有强大的错误检查能力，但不会通过其界面公开，但我认为您可以基于它进行许多很棒的检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T02:07:18.610

查看[pychecker](http://pychecker.sourceforge.net/)和[pyflakes](https://launchpad.net/pyflakes)。有一个著名的问题是讨论[pylint-pychecker-or-pyflakes](https://stackoverflow.com/questions/1428872/pylint-pychecker-or-pyflakes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:11:52.253

不完全是“静态代码分析器”，甚至更多：

[http://code.google.com/p/shedskin/](http://code.google.com/p/shedskin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T05:55:51.593

Pysonar2 是`abstract interpretation`类型推断 Python 项目的一个非常好的实现。我对另一个类似问题的回答在[这里](https://stackoverflow.com/a/27978019/3261577)。

# javascript - Stop form from submitting if select option is disabled

> ID：10279348
> 
> 赞同：0
> 
> 时间：2012-04-23T11:06:49.403
> 
> 标签：javascript, forms

I'm not very good with forms and am having a great deal of difficulty with what should be a simple problem.

I have a form which contains the following:

```
 <select id="values" name="Choice">
            <option value="choose">Please Choose...</option>
            <option value="01">Value 1</option>
            <option value="02">Value 2</option>
        </select> 
```

All I want to do is stop the form from submitting if neither value-01 or value-02 are selected but the disabled option doesn't work.

How can I achieve this?

UPDATE:

I'm already using javascript to check the form, but this does not seem to work.

```
function submitForm() {
        if (formObj.Choice.value == '') {
            alert("Please select a value");
            return false;
        }
        return true;
    } 
```

UPDATE 2: In answer to @h4b0 question:

```
<input type="submit" value="Search" class="screen-reader-text button cf" name="SubmitButton" onclick="return submitForm();"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:34:08.307

In the form tag, use something like

```
<form name='myForm' method='post' id='myForm' onsubmit='return submitForm()'>
....
</form> 
```

When the form is submitted, it will run that JavaScript function, and then return the value of the result to the form. If it's true, it posts the data. If the results are false, it will cancel the submit.

You're really close with what you have in your submit button, but change the onclick to onsubmit, and move the event binding to the form tag.

[EDIT]

Your form will never return false with how you are checking for values in the select. Since none of the options have value='', your if statement will never evaluate to true and return false to the function caller.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:35:44.390

Try this, While Submitting the form call a method to check your condition by selectedIndex and return false to cancel the submit.

```
<script>
function validateMe(){
    var x=document.getElementById("Choice").selectedIndex;
    var y=document.getElementById("Choice").options;
    if(y[x] != "01"|| y[x] != "02"){
       return false;
    }
    return true;
}
</script>
<form name="YourForm" id ="YourForm" onSubmit="return validateMe()">
<select id="values" name="Choice" id="Choice">
        <option value="choose">Please Choose...</option>
        <option value="01">Value 1</option>
        <option value="02">Value 2</option>
    </select>

<input type="submit" value="Search" class="screen-reader-text button cf" name="SubmitButton">

</form> 
```

# mysql - 在一次选择中计算行数除以条件

> ID：10279351
> 
> 赞同：0
> 
> 时间：2012-04-23T11:06:59.680
> 
> 标签：mysql, select, count

这基本上是我的 mysql-table 的样子：

```
id  | A  |  B  
-------------
1 | bla  |  1
2 | bla  |  2
3 | bla  |  1
4 | bla  |  1
5 | bla  |  2
6 | bla  |  2
7 | bla  |  1 
```

我想计算有多少行有 1 作为 B 值，有多少行有 2 作为 B 值。在一个 SELECT 语句中执行此操作是否可能/是否有意义？

问候 && tia noircc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:08:36.163

使用 COUNT(*) 和 GROUP BY ，这会给你你的结果。

```
SELECT B,count(*) as occurence from myTable group by B; 
```

# c# - Sharepoint 外部数据 - 多值字段

> ID：10279352
> 
> 赞同：1
> 
> 时间：2012-04-23T11:07:02.500
> 
> 标签：c#, list, sharepoint, sharepoint-2010, bdc

我需要创建一个包含外部数据（来自 BDC）的列表字段。该字段必须包含多个值。但是我没有找到一种方法如何使外部数据字段采用多个值。

使用 Column-Properties 可以从 User-Contetntype 创建这样的多值字段。通过从外部数据创建列，我无法激活多值模式。

它应该看起来像这样，仅来自外部数据源 (BDC)： ![在此处输入图像描述](../Images/0e3588dff2db39af0d12671f91c424b0.png)

有谁知道如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:47:22.630

你的 TyperDescriptor 是什么 TypeName？将其设置为一个类型的数组。例如。

```
<TypeDescriptor Name="somename" TypeName="System.String[]" /> 
```

如果要更改现有爬网属性的类型，则需要先将其删除。从所有托管属性中取消映射，从搜索索引中排除属性并删除业务数据类别。重置索引和 IISRESET。进行完全爬网，您的爬网属性现在是多值的（变体类型 4127）。

# javascript - 方向路线末端的自定义图标

> ID：10279356
> 
> 赞同：2
> 
> 时间：2012-04-23T11:07:26.887
> 
> 标签：javascript, google-maps, google-maps-api-3

我对谷歌地图 v3 中的自定义图标有疑问，我声明了一个图标

```
var size2 = new google.maps.Size(87,87);
var start_point2 = new google.maps.Point(0,0);
var foothold2 = new google.maps.Point(43,87);
var endIcon = new google.maps.MarkerImage("http://gidzior.net/map/conceptPark.png", size2, start_point2, foothold2); 
```

我想在我的地图中使用它，这里是[http://gidzior.net/map/v3_animate_marker_directions.html](http://gidzior.net/map/v3_animate_marker_directions.html)，在我的代码设置 endLocation 图标中

代码

```
var map;
  var directionDisplay;
  var directionsService;
  var stepDisplay;
  var markerArray = [];
  var position;
  var marker = null;
  var polyline = null;
  var poly2 = null;
  var speed = 0.0000005, wait = 1;
  var infowindow = null;
  var zoomed;
  var zoomedd;
  var zoomeddd;

  var step = 50; // 5; // metres

  var myPano;   
  var panoClient;
  var nextPanoId;
  var timerHandle = null;

  var size = new google.maps.Size(26,25);
  var start_point = new google.maps.Point(0,0);
  var foothold = new google.maps.Point(13,15);

  var car_icon = new google.maps.MarkerImage("http://gidzior.net/map/car.png", size, start_point, foothold);

  var size2 = new google.maps.Size(87,87);
  var start_point2 = new google.maps.Point(0,0);
  var foothold2 = new google.maps.Point(43,87);

  var endIcon = new google.maps.MarkerImage("http://gidzior.net/map/conceptPark.png", size2, start_point2, foothold2);

function createMarker(latlng, label, html) {
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: car_icon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
}

function initialize() {
  infowindow = new google.maps.InfoWindow(
    { 
      size: new google.maps.Size(150,50)
    });
    // Instantiate a directions service.
    directionsService = new google.maps.DirectionsService();

    // Create a map and center it on Warszawa.
    var myOptions = {
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    address = 'warszawa'
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
       map.setCenter(results[0].geometry.location);
    });

    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
    }
    directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

    // Instantiate an info window to hold step text.
    stepDisplay = new google.maps.InfoWindow();

    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
  }

    var steps = []

    function calcRoute(){

if (timerHandle) { clearTimeout(timerHandle); }
if (marker) { marker.setMap(null);}
polyline.setMap(null);
poly2.setMap(null);
directionsDisplay.setMap(null);
    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
      suppressMarkers:true
    }
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var travelMode = google.maps.DirectionsTravelMode.DRIVING

        var request = {
            origin: start,
            destination: end,
            travelMode: travelMode,
            waypoints: [{
                location:new google.maps.LatLng(52.185570, 20.997255),
                stopover:false}],
            optimizeWaypoints: false
        };

        // Route the directions and pass the response to a
        // function to create markers for each step.
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK){
    directionsDisplay.setDirections(response);

        var bounds = new google.maps.LatLngBounds();
        var route = response.routes[0];
        startLocation = new Object();
        endLocation = new Object();

        // For each route, display summary information.
    var path = response.routes[0].overview_path;
    var legs = response.routes[0].legs;
        for (i=0;i<legs.length;i++) {
          if (i == 0) { 
            startLocation.latlng = legs[i].start_location;
            startLocation.address = legs[i].start_address;
            //marker = google.maps.Marker({map:map,position: startLocation.latlng});
            marker = createMarker(legs[i].start_location,"start",legs[i].start_address,"green");
          }
          endLocation.latlng = legs[i].end_location;
          endLocation.address = legs[i].end_address;
          var steps = legs[i].steps;
          for (j=0;j<steps.length;j++) {
            var nextSegment = steps[j].path;
            for (k=0;k<nextSegment.length;k++) {
              polyline.getPath().push(nextSegment[k]);
              bounds.extend(nextSegment[k]);

            }
          }
        }

        polyline.setMap(map);
        document.getElementById("distance").innerHTML = (polyline.Distance()/1000).toFixed(2)+" km";
        map.fitBounds(bounds);
        //createMarker(endLocation.latlng,"end",endLocation.address,"red");
    map.setZoom(18);
    startAnimation();
    zoomed=false;
    zoomedd=false;
    zoomeddd=false;
    step = 50;
    }                                                    
 });
}

      var tick = 100; // milliseconds
      var eol;
      var k=0;
      var stepnum=0;
      var speed = "";
      var lastVertex = 1;

//=============== animation functions ======================
      function updatePoly(d) {
        // Spawn a new polyline every 20 vertices, because updating a 100-vertex poly is too slow
        if (poly2.getPath().getLength() > 20) {
          poly2=new google.maps.Polyline([polyline.getPath().getAt(lastVertex-1)]);
          // map.addOverlay(poly2)
        }

        if (polyline.GetIndexAtDistance(d) < lastVertex+2) {
           if (poly2.getPath().getLength()>1) {
             poly2.getPath().removeAt(poly2.getPath().getLength()-1)
           }
           poly2.getPath().insertAt(poly2.getPath().getLength(),polyline.GetPointAtDistance(d));
        } else {
          poly2.getPath().insertAt(poly2.getPath().getLength(),endLocation.latlng);
        }
      }

      function animate(d) {
// alert("animate("+d+")");
        if (d>eol) {;
          map.panTo(endLocation.latlng);
          marker.setPosition(endLocation.latlng);
          return;
        }
        if (d>eol-20000 && zoomeddd!=true) {
          map.setZoom(12); // or whatever value
          zoomeddd=true;
        }
        if (d>eol-10000 && zoomedd!=true) {
          map.setZoom(13); // or whatever value
          zoomedd=true;
        }
        if (d>eol-1500 && zoomed!=true) {
          map.setZoom(15); // or whatever value
          step = 15;
          zoomed=true;
        }
        var p = polyline.GetPointAtDistance(d);
        map.panTo(p);
        marker.setPosition(p);
        updatePoly(d);
        timerHandle = setTimeout("animate("+(d+step)+")", tick);
      }

function startAnimation() {
        eol=polyline.Distance();
        map.setCenter(polyline.getPath().getAt(0));
        // map.addOverlay(new google.maps.Marker(polyline.getAt(0),G_START_ICON));
        // map.addOverlay(new GMarker(polyline.getVertex(polyline.getVertexCount()-1),G_END_ICON));
        // map.addOverlay(marker);
        poly2 = new google.maps.Polyline({path: [polyline.getPath().getAt(0)], strokeColor:"#0000FF", strokeWeight:0});
        // map.addOverlay(poly2);
        setTimeout("animate(50)",2000);  // Allow time for the initial map display
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:29:38.643

您已经创建了您的图标 ( `endIcon`)，并且您知道它应该在的位置 ( `endLocation`)，因此 — 一旦`endLocation`被地理编码并找到，就在那里创建一个标记。

你已经有了一个`createMarker`函数。使其通用，以便您可以将其用于不同的图标：

```
function createMarker(latlng, label, html, marker_icon) {
    // Note the new fourth argument
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        // this now uses the new argument
        icon: marker_icon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
} 
```

更改现有代码以`car_icon`作为创建汽车的第四个参数传入。

然后就在这条线之前

```
polyline.setMap(map); 
```

`endLocation.latlng`将包含旅程最后一段结束的坐标。那应该是你的目的地。因此，在该点创建一个标记。

`var destmarker = createMarker(endLocation.latlng,'Science Park','',endIcon);`

（按要求`label`填写`html`）

# java - JasperReports 是否取代了 Apache POI (M$) 和 iText (PDF)？

> ID：10279358
> 
> 赞同：5
> 
> 时间：2012-04-23T11:07:28.493
> 
> 标签：java, jasper-reports, itext, apache-poi

过去，我使用引用的库在 Java 中创建了业务文档。

我从来没有使用过 JasperReports，是吗？

JasperReports 是否允许从 Java 轻松创建 PDF 和 Excel 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T17:19:29.497

Jasper 可以在您的组织（或客户）的情况下受益：

1.  无法负担更强大的解决方案，例如 Crystal Reports（或 Cognos 等）
2.  需要高度定制/用户可配置的临时报告解决方案，这些解决方案非常容易集成到您现有的应用程序（基于 Web 或基于桌面）中：想想“嵌入式”解决方案。

我使用 Jasper Reports 作为我的后端报告生成器（内部 Jasper 使用 Apache POI 生成 XLS 和 iText 生成 PDF）构建了一个完全动态的、基于 Web 的临时报告解决方案。是否可以使用其他报告包？我敢肯定它会，但集成会更加困难（它需要通过 Web 服务与报告服务器通信，从报告服务器读取/流式传输数据等），并且可能无法实现对报告生成的相同细粒度控制。它完全有可能 Crystal Reports 有一个 Java API（我从未使用过 Crystal Reports），但如果从 Java 的角度来看它和 Jasper 一样容易处理，我会感到惊讶。

Jasper 让我构建了一个非常强大的嵌入式报告解决方案：因此对于像我这样的开发人员来说，它是一个“性感”的解决方案。这就是必须要小心的地方。对开发人员有吸引力的解决方案并不总是对最终用户最好。我确实相信其他解决方案从性能角度来看效率更高，因此可以处理更大的工作量。使用 Jasper 时，正确处理性能（时间、内存和 SQL 查询调优）、异步报告/调度和文档存储的工作完全留给了开发人员。

因此，如果您的性能限制不是太严格或者您的预期工作量是合理的（这都是相对的，相信我我知道），Jasper 可以是一个很好的嵌入式解决方案。但是，如果您有资金和资源（有人进行配置、维护）来购买更强大的报告解决方案，因为您的性能要求需要它，请探索其他解决方案。

# python - 缩进错误

> ID：10279359
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:07:29.397
> 
> 标签：python, methods, max, indentation, function

我正在尝试定义一个类似于方法 max 的方法，但我得到一个预期缩进的错误。我不确定代码有什么问题......我需要帮助解决这个问题。

```
def biggest(a,b,c):
    def bigger(a,b):
        if a > b:
            output = a
        else:
            output = b
        if output > c:
            return output
        else:
            return c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:02:29.430

您混淆了制表符和空格。用于`python -tt`验证。

# c# - 计算总上传/下载数据大小

> ID：10279362
> 
> 赞同：0
> 
> 时间：2012-04-23T11:07:39.633
> 
> 标签：c#

在我的 c# 应用程序（.net 框架 4）中，我从（使用 HttpWebRequest 类）一个 url 下载数据，获取过程应该在一定的时间间隔内重复。现在我想计算上传和下载数据的总大小（以 KB 为单位）。如何获取每个 Web 请求中的上传/下载数据大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:18:53.543

一旦您获得 WebResponse 并使用[http://msdn.microsoft.com/en-us/library/9kstw824.aspx](http://msdn.microsoft.com/en-us/library/9kstw824.aspx)读取数据，您每次都会读取字节。如果您 += 一个跟踪班级总数的静态变量，则可以对下载字节进行准确且最新的计数。上传也是一样。

从字节到千字节，除以 1024。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:11:30.753

使用[HTTP 标头属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.headers%28v=vs.110%29.aspx)获取标头信息。 [内容长度](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contentlength%28v=vs.110%29.aspx)应该给你以字节为单位的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:12:47.333

这是您正在寻找的 [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contentlength.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contentlength.aspx)

# django - Django：从每个视图自动将变量发送到模板？

> ID：10279364
> 
> 赞同：0
> 
> 时间：2012-04-23T11:07:45.123
> 
> 标签：django, django-templates, django-views, django-1.4

> **可能重复：**
> [如何从 Django 中的任何视图将数据传递给任何模板？](https://stackoverflow.com/questions/1071572/how-can-i-pass-data-to-any-template-from-any-view-in-django)

我想知道是否有办法让每个视图都自动发送一个变量或将其包含在请求上下文中到每个模板？消息框架之类的东西？

我的问题是我希望在每个页面上都有一个侧边栏，其中包含信息，比如用户输入的 10 个最新的个人资料页面。我能想到的唯一另一种选择是`get_recent_users`在每个视图的末尾调用并将其作为变量发送到模板，但我不喜欢这种解决方案，因为我有很多视图。它的呈现可以通过我用于模板继承的基本模板轻松管理。

**编辑：** 我忘了提到我想要访问的数据存储在 request.session 中，如果这样更容易的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:16:27.370

听起来你正在寻找一个[`context processor`](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:15:27.737

编写您的[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)，并在您想要的任何模板中使用它。

# web-services - RESTful 服务中的自定义操作

> ID：10279365
> 
> 赞同：28
> 
> 时间：2012-04-23T11:07:54.043
> 
> 标签：web-services, rest, uri

一段时间以来，我一直在阅读有关 RESTful 服务的文章，并且我了解对 RESOURCES 使用 VERBS 的重要性。

但有一件事我无法理解。如果我们需要调用不属于 CRUD 的某个操作，会发生什么？

例如，考虑我想让猫跳。我们应该使用哪种格式？

以下是 RESTful 吗？

```
http://host/cats/123/jump 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T14:07:59.340

如果`cats/123`代表一个资源，那么可以这样想：该资源可以有*多种*状态（吃、走、睡、**跳**、小便……）。当您使用 REST 架构风格设计 API 时，您希望允许客户端应用程序向将更改其状态的资源发出允许的请求。

在 的上下文中`cats/123`，您可以通过一系列 POST 请求来执行此操作，这将导致资源的状态发生变化。利用 REST 中的超媒体功能，您可以创建如下所示的请求和响应流程。请注意，允许的链接会随着对 POST 的响应而改变。此外，客户端应用程序将编码到 Links 数组中包含的属性，而不是 Href 属性中包含的实际 URI。

要求：

```
GET cats/123 
```

回复：

```
{
    "Color" : "black",
    "Age"   : "2",
    "Links":[
    {
        "Food":"kibbles",
        "Method":"POST",
        "Href":"http://cats/123",
        "Title":"Feed the cat"
    },
    {
        "Scare":"yell real loud",
        "Method":"POST",
        "Href":"http://cats/123",
        "Title":"Scare the cat"
    }]
} 
```

要求：

```
POST cats/123

{
    "Food":"kibbles"
} 
```

回复：

```
{
    "Color" : "black",
    "Age"   : "2",
    "Tummy" : "full"
    "Links":[
    {
        "Sleep":"lap",
        "Method":"POST",
        "Href":"http://cats/123",
        "Title":"Pet the cat"
    },
    {
        "Scare":"yell real loud",
        "Method":"POST",
        "Href":"http://cats/123",
        "Title":"Scare the cat"
    }]
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-05-14T09:27:55.623

对于纯粹的 Restful 设计，我会推荐类似的东西：

```
POST /cats/123/actions 
```

带有主体（动作类型在 request 中定义：

```
{
    "actionType": "jump",
    "customActionParameter": "some value"
} 
```

但这将是一个矫枉过正。[所以我发现遵循Google Api Design Guide for Custom Methods](https://cloud.google.com/apis/design/custom_methods)更容易：

```
POST /cats/123:jump 
```

这是谷歌在其云基础设施 Api 中使用的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-29T11:59:37.297

不要将 HTTP 动词与您域的状态机转换或操作混为一谈。

Stripe 的[发票工作流程](https://stripe.com/docs/billing/invoices/workflow#workflow-transitions)提供了一个很好的示例，说明如何以一种安静的方式表示状态转换或域操作。

您的域模型上的操作很可能通过对状态或状态字段的修改（PUT 或 PATCH）来表示，这将触发您自己代码的状态机中的工作流。例如，在您的示例中，跳跃动作也可能导致与 3x 步数相同的状态，因此它可能是对高度或高度字段的修改。然后，您的代码可能会实现某种类型的工作流管理或状态机，然后您可以根据请求的状态更改发出自己的事件和验证规则，而不是基于为实现它而执行的“操作”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-26T16:22:04.537

游戏晚了，但是因为 REST 是关于你的资源的状态，如果有点冗长，这也是可以接受的。这用形容词或名词替换了动词（正如@developerjack 所指出的，它经常与 HTTP 动词混为一谈）。

*   POST /cats/123/states/jumping，或
*   发布 /jumpingcats/123

对于有限的一组自然状态，这种语法可能更有意义。例如，使用调度程序，我以前做过：

*   POST /scheduler/states/stopped（停止调度程序）
*   POST /scheduler/states/started（启动调度器）
*   POST /scheduler/jobs/123/paused（暂停作业）
*   POST /scheduler/jobs/123/resumed（恢复工作）

# cruisecontrol.net - 在 Cruise control .net 中使用 msTest 的 PartCover

> ID：10279370
> 
> 赞同：0
> 
> 时间：2012-04-23T11:08:11.067
> 
> 标签：cruisecontrol.net, mstest, partcover

谁能告诉我如何在 Cruise control .net 中使用 partcover 和 mstest，

我已经这样做了，但我收到了一个错误

```
errorMSB3073: The command "C:\Program Files\PartCover\PartCover .NET 4.0\PartCover.exe --target=${nunitExePath} --target-work-dir=D:\Demo_Project\ --target-args=D:\DEMO\TestProject\bin\Debug\TestProject.dll --include=[LaTrompa]* --output=${partCoverReportPath}\${projectTests}-Results.xml" exited with code 9009. 
```

我在 msbuild 中使用了以下命令

```
<PropertyGroup>
<partCoverReportPath>D:\BuildReports\PartCover\</partCoverReportPath>
<nunitExePath>C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\mstest.exe</nunitExePath> 
```

-->

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:37:37.863

使用以下命令

```
C:\Program Files\PartCover\PartCover .NET 4.0\PartCover.exe" --target "C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\mstest.exe" --include [TestProjectName]* --include [More if u have]* --target-args "/noisolation /testcontainer:path\TestProjectName.dll" --target-work-dir "Working dir of project" --output "output pathr\partcover.xml 
```

# .net - 检测 LAN 中可用的 Internet 代理服务器

> ID：10279371
> 
> 赞同：0
> 
> 时间：2012-04-23T11:08:14.827
> 
> 标签：.net, windows, proxy, network-programming

当我连接到某个位置的 wifi 网络时，我必须使用 Internet 代理服务器，然后在我在家连接时撤消。我想创建一个程序来自动执行此操作。如何使用 C# 或 VB.NET 检测 LAN 中是否有任何代理服务器提供互联网，以及互联网目前是否可用（通过 ping 或其他方式）；这样我就可以为此创建一个工具。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:21:30.883

您想为此编写应用程序，还是使用已经编写的应用程序就足够了？

几年前我也遇到过同样的问题，当我去拜访客户时，我的笔记本电脑需要更改网络配置才能使用他们的代理服务器，而在家里我又恢复了正常。

有许多免费应用程序可以保存不同的配置。

[http://www.netsetman.com/index.php?s=nsm](http://www.netsetman.com/index.php?s=nsm)

# c++ - 是否可以调用 WriteFile 并且应用程序将永远等待回调？

> ID：10279372
> 
> 赞同：2
> 
> 时间：2012-04-23T11:08:17.477
> 
> 标签：c++, winapi, visual-c++

我调用该方法`win32::WriteFile`，然后调用

```
WaitForSingleObject( handle, INFINITE ) 
```

使用我在`WriteFile`通话中使用的相同句柄。

是否有可能有一些场景让我永远等待......并且`WriteFile`不会完成他的写作？我要写 512 kB，我假设我的硬件没有问题。

我希望得到`FAIL`而不是永远等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:22:25.043

这不应该发生，但它显然与一些“不是最佳”的驱动程序有关。无论如何，网络操作可能需要很长时间才能返回，所以我建议您应用较长的超时时间，可能是 2 分钟（1000*60*2），如果超时，请关闭/重新打开并重试 writeFile()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:57:38.373

当您进行重叠的 I/O 调用时，您将责任委托给驱动程序，以确保其及时完成。如果驱动程序有错误或硬件功能失调，您可以做任何合理的事情，当此类低级操作失败时，任何程序都无法继续以有用的方式运行。

请注意，您已经传递了一个指向驱动程序应该填充的缓冲区的指针，在超时到期后继续运行会留下一个悬空指针，当驱动程序确实设法完成时，驱动程序*可能会*使用该指针将字节喷射到您的进程中请求。您至少必须调用 CancelIo() 来解决这个问题。如果返回 false，则终止该过程。

这一切都没有什么意义，您需要操作系统提供最低限度的服务保证。您也可以在没有 OVERLAPPED 的情况下调用 WriteFile()。现在，同样的错误驱动程序将挂起您的程序。就像 CancelIo() 挂起一样。没关系，有问题的是司机，而不是你。并不是说用户不会注意到机器出现严重问题，其他程序也会遭受这种不幸。

不要编写处理极不可能的极端情况的代码。最重要的是，不要编写无法有效测试的代码。

# iphone - IPhone 中用于登录的 XMLParsing

> ID：10279373
> 
> 赞同：0
> 
> 时间：2012-04-23T11:08:19.177
> 
> 标签：iphone, objective-c, login, xml-parsing

我正在按照以下链接解析登录页面的 xml， http: [//yksoftware.blogspot.in/2010/04/iphone-programming-tutorial-xml-login.html](http://yksoftware.blogspot.in/2010/04/iphone-programming-tutorial-xml-login.html)

每当我输入用户名和密码字段时，即使我在文本字段中提供正确的用户名和密码，它也会显示登录失败。在下面的代码中，当我在 loginPressed 方法中保留断点并检查时，它没有进入 for 循环，

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    users = [[NSMutableArray alloc]init];
    NSURL *xmlURL = [NSURL URLWithString:@"http://www.mailrail.net/sample.aspx?username=naresh&password=reddy"];
    xmlParser = [[NSXMLParser alloc]initWithContentsOfURL:xmlURL];
    [xmlParser setDelegate:self];
    [xmlParser parse];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"User"]) {
        item = [[NSMutableDictionary alloc] init];
        currentUser =[[NSMutableString alloc] init];
        currentPassword =[[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    if ([elementName isEqualToString:@"User"]) {
        [item setObject:currentUser forKey:@"username"];
        [item setObject:currentPassword forKey:@"password"];
        [users addObject:[item copy]];

    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if ([currentElement isEqualToString:@"username"]) {
        [currentUser appendString:string];
    }
    if ([currentElement isEqualToString:@"password"]) {
        [currentPassword appendString:string];
    }
}

-(IBAction)loginPressed:(id)sender{
    for (NSMutableDictionary *val in users) {                    
        NSMutableString *usrname = [val objectForKey:@"username"];
        NSLog(@"%@",usrname);
        NSMutableString *psswrd = [val objectForKey:@"password"];
        usrname=[usrname stringByReplacingOccurrencesOfString:@"\n" withString:@""];
        usrname=[usrname stringByReplacingOccurrencesOfString:@"\t" withString:@""];
        psswrd=[psswrd stringByReplacingOccurrencesOfString:@"\n" withString:@""];
        psswrd=[psswrd stringByReplacingOccurrencesOfString:@"\t" withString:@""];
        if([usrname isEqualToString:[txtUsername text]]&&[psswrd isEqualToString:[txtPassword text]]){
            [lblLoginStatus setText:@"Login Successful!!"];
            return;
        }
    }
    [lblLoginStatus setText:@"login failed"];
    return;
}

-(IBAction)returnClicked:(UITextField *)sender{
    [sender resignFirstResponder];
}

-(IBAction)clickBackground:(id)sender{

    [txtPassword resignFirstResponder];
    [txtUsername resignFirstResponder];
} 
```

并返回登录失败。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:49:31.717

您首先需要解决如何使用解析器从xml解析一些东西的解析，然后考虑登录，因为如果您制作了解析器，那么使用登录表单很容易。下面是XML解析的以下教程，它很详细，可以帮助您获得帮助。

[http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:53:40.450

只需检查一下

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
currentElement = [elementName copy];
if ([elementName isEqualToString:@"User"]) {
     NSMutableDictionary *item = [[NSMutableDictionary alloc] init];
    [item setValue:[attributeDict valueForKey:@"username"] forKey:@"username"];
      [item setValue:[attributeDict valueForKey:@"password"] forKey:@"password"];
     [users addObject:item];
} 
```

}

请删除其他两名代表并检查

# compilation - 如何用 Marmalade 编译 Cocos2d-X？

> ID：10279374
> 
> 赞同：3
> 
> 时间：2012-04-23T11:08:20.910
> 
> 标签：compilation, cross-platform, cocos2d-x, marmalade

有没有人知道教程或三个简单的步骤来编译我用 Cocos2d-x 和 Marmalade 编写的代码？

我想把我已经在 Cocos2d-X 中编译和使用的代码插入到一个橘子酱项目中，然后编译。在很多地方都写得很容易，但我很难做到这一点。

**如果有人有一些简单的步骤，我将非常感激：“Maramalade + cocos2d-x for dummies style :)”**

谢谢，阿德里安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:29:28.697

我认为论坛上[的这篇文章](http://www.madewithmarmalade.com/node/3873)`Marmalade`可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:04:27.043

最新版本包括 helloworld 的项目 mkb 和测试跟随它们。

# c# - 测试在类中创建的对象

> ID：10279380
> 
> 赞同：0
> 
> 时间：2012-04-23T11:08:45.340
> 
> 标签：c#, rhino-mocks

我有这样的方法：

```
public void ABC(ViewModeL model)
    {
        var dataTable = new DataTable();
        dataTable.Columns.Add("column1", typeof(int));
        dataTable.Columns.Add("column2", typeof(int));                     
        var dr = dataTable.NewRow();
        dr["column1"] = 2;
        dr["column2"] = 0;
     } 
```

我想对 dataTable 对象进行断言，但我无法弄清楚如何执行此操作，因为它是在方法内部创建的，而且它也不是由此方法返回的。是否可以使用 rhino mocks 对其进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:25:32.467

不，这是一个局部变量，其生命空间是`ABC()`方法范围。因此，从单元测试的角度来看，这是不可能的`C#`，甚至是错误的，因此您不能依赖实现细节。

也许您没有提供整个方法体，因为`dataTable`变量会在`ABC()`方法执行后消失，那么为什么需要检查它呢？

# c# - 基于EF4中值子串的引用约束？

> ID：10279384
> 
> 赞同：0
> 
> 时间：2012-04-23T11:08:56.293
> 
> 标签：c#, entity-framework-4

在 EF4 中是否可以有一个仅基于值的子字符串的引用约束？

例如

参考表： 代码：varchar(5) 描述：varchar(50)

主表：代码：varchar(6) Data1：Data2：等...

我想有一个约束`MainTable.Code.Substring(0,5) > RefTable.Code`

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:19:43.300

不，这是不可能的，我怀疑您是否可以在数据库中创建这样的关系 - EF 遵循与关系数据库相同的规则。

[编辑：实际上，如果您尝试将其表示为QueryView](http://msdn.microsoft.com/en-us/library/cc716798.aspx)内的查询，则可以有一种方法来实现。

# wpf - 附加属性值不会传递给视图 - 列表的第一个/最后一个项目的样式

> ID：10279389
> 
> 赞同：1
> 
> 时间：2012-04-23T11:09:21.643
> 
> 标签：wpf, dependency-properties, attached-properties

我的目的是`Position`为列表元素定义一个依赖属性，以便在它们位于边缘时将它们设置为不同的样式。

我有一个依赖属性（以及未显示的默认 get 和 set 方法）：

```
public static readonly DependencyProperty PositionProperty = 
  DependencyProperty.RegisterAttached(
    "Position", 
    typeof(Position), 
    typeof(ClientView),
    new FrameworkPropertyMetadata(
      Position.Normal)); 
```

一个选项卡控件：

```
<TabControl x:Name="Items" ItemContainerStyle="{DynamicResource TabItem}"/> 
```

以及这些 TabItems 的模板：

```
 <Style x:Key="TabItem" TargetType="{x:Type TabItem}">
        ... <Setter Property="Template"> <Setter.Value>
    <Grid SnapsToDevicePixels="true">
      <ControlTemplate TargetType="{x:Type TabItem}">
        <Border x:Name="Bd">
          <StackPanel Orientation="Horizontal">
            <TextBlock 
Text="{Binding Position, RelativeSource={RelativeSource 
       AncestorType={x:Type client:ClientView}}}"/>
            <ContentPresenter x:Name="Content" ContentSource="Header"/>
          </StackPanel>
        </Border>
     </Grid>
     <ControlTemplate.Triggers>
        <Trigger Property="client:ClientView.Position" Value="Last">
          <Setter Property="CornerRadius" TargetName="Bd" Value="0,0,0,4"/>
        </Trigger>
     ... 
```

在我的`ClientView`类的代码隐藏中，当项目生成器告诉我他创建了这些 tabitems 时，我填充了这些属性：

```
var gen = Items.ItemContainerGenerator;
gen.StatusChanged += (sender, args) =>
{
   if (gen.Status == GeneratorStatus.ContainersGenerated)
   {
      var cnt = Items.Items.Count;
      if (cnt > 0)
      {
         if (cnt == 1)
         {
            gen.ContainerFromItem(Items.Items[0])
               .SetValue(PositionProperty, Position.Normal);
         }
         else
         {
            gen.ContainerFromItem(Items.Items[0])
               .SetValue(PositionProperty, Position.First);
            if (cnt > 2)
            {
               for (int i = 1; i < cnt - 2; i++)
               {
                  gen.ContainerFromItem(Items.Items[i])
                     .SetValue(PositionProperty, Position.Normal);
               }
            }
            gen.ContainerFromItem(Items.Items[cnt - 1])
               .SetValue(PositionProperty, Position.Last);
         }
      }
   }
}; 
```

当我运行此代码时，我可以调试这些事件并查看设置的正确值，但它们从未出现在视图中。文本框的文本始终显示“正常”，这是默认值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:42:40.240

如果你`TextBlock.Text`像这样绑定绑定属性怎么办

```
<TextBlock Text="{Binding
    Path=(ClientView.Position),
    RelativeSource={RelativeSource Mode=TemplatedParent}}" /> 
```

因为附加属性是在样式化的 TabItem 上设置的，即`TemplatedParent`.

编辑：如果您还通过[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)`Border.CornerRadius`设置属性，该绑定转换器从 Position 转换为适当的 CorderRadius 值：

```
<Border CornerRadius="{Binding
    Path=(ClientView.Position),
    RelativeSource={RelativeSource Mode=TemplatedParent},
    Converter={StaticResource PositionToCornerRadiusConverter}}" /> 
```

# asp.net - 我们可以在 MS SQL 中为 .mdf 文件编写触发器吗

> ID：10279390
> 
> 赞同：0
> 
> 时间：2012-04-23T11:09:22.720
> 
> 标签：asp.net, sql-server, triggers, mdf

我正在制作基于 Windows 的应用程序，其中我将 MS SQL 作为数据库。现在我已经获取了 .mdf 文件，并将其附加到 .Net 中，所以我可以为这个数据库编写触发器吗？

# jquery - 仅当父级有类时 jQuery 才解包

> ID：10279396
> 
> 赞同：2
> 
> 时间：2012-04-23T11:09:38.677
> 
> 标签：jquery

我使用 jQuery 的 unwrap 函数，但是我希望它仅在父 div（要删除的那个）具有某个类时才解包。

我正在使用这个：

```
$('.children').unwrap(); 
```

我尝试将其更改为此，因此仅当父级具有“父级”类时才会被删除，但代码的行为与上述相同。谢谢

```
$('.children').unwrap('.parent'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T11:11:32.767

```
$('.parent > .children').unwrap(); 
```

试试上面的:)

# probability - 为什么 v 结构对概率影响的流动没有贡献？

> ID：10279398
> 
> 赞同：2
> 
> 时间：2012-04-23T11:09:40.020
> 
> 标签：probability, bayesian-networks

我最近浏览了一个视频，它说在关系 x->W<-Y 中，X 不影响 yX 与 W 有因果关系，W 与 Y 有证据关系。那么 X 不会影响 Y 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:30:53.520

让我们让 W 代表“草坪很湿”，X 代表“最近下过雨”，Y 代表“自动洒水器最近打开了”。

显然，X 影响 W：如果最近下雨，很可能草坪是湿的。显然，Y 影响 W：如果最近打开了洒水器，草坪很可能是湿的。显然，知道了 W，我们就可以推断出 X 和 Y。

但是，X 是否直接影响 Y？换句话说，最近下雨（或不下雨）的事实是否会影响自动洒水器最近是否打开？不。如果我们对草坪的状态一无所知，因为我们没有向外看，最近下雨的机会与最近洒水活动的机会无关。

但是，一旦我们向外看，并确定草坪的状态，我们*就*可以在雨水和洒水活动之间做出推断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T21:25:10.583

我在这本在线书籍的第 1.3 节和第 1.4 节中找到了一个具体的例子，帮助我理解了这一点：

它遍历了您上面列出的所有案例，并针对每个案例解释了第 1.4 节中描述的运行示例。请看这里：

[http://people.cs.aau.dk/~uk/papers/pgm-book-I-05.pdf](http://people.cs.aau.dk/~uk/papers/pgm-book-I-05.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:23:33.697

如果未观察到 W，则 x 和 y 是独立的。

一种这样的 v 结构 CPD（完全确定性）看起来像这样。

将 X 和 Y 独立地画为二元变量，然后 W 为和。如果您只知道 X=1，那么 Y 可能是 0 而 W 可能是 1，或者 Y = 1 和 W = 2。知道 X 并不能让您区分这两种可能性。

一般来说，我认为使用确定性函数比概率函数更容易推理 v 结构。想想当 v 结构是 ADD、XOR 和 AND 时会发生什么，您通常可以获得关于一般声明的具体见解。

# appcelerator-mobile - 调用 Appcelerator 模块时的 EXEC_BAD_INSTRUCTION

> ID：10279399
> 
> 赞同：0
> 
> 时间：2012-04-23T11:09:42.707
> 
> 标签：appcelerator-mobile, titanium-modules

我正在使用 Appcelerator 模块。在设备上调用模块时出现 EXEC_BAD_INSTRUCTION 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:10:28.197

我发现我使用的是 1.0 版，而不是 0.1，所以出现了错误。;)

# python - 在 Ubuntu 中使用“top”理解 Python 执行

> ID：10279400
> 
> 赞同：-3
> 
> 时间：2012-04-23T11:09:45.903
> 
> 标签：python

当我执行 Python 脚本时。以下屏幕显示了“top”命令：

![在此处输入图像描述](../Images/945c97efc64525923f0df04b9f9cfde8.png)

告诉我我是否错了：屏幕显示 Python 脚本执行占用了一个完整的核心（%CPU：100%），其余核心用于其他执行（实际上正在休眠）？

我正在使用带有 Intel Core i5 的 Macbook Pro 10.6。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:20:23.250

您的 Python 脚本是单个进程，因此只能使用一个内核。您必须使用并行 python 之类的东西专门对其进行编码以使用多个内核

# java - java - 如何使用文档的 tf*idf 分数实现余弦相似度？

> ID：10279402
> 
> 赞同：0
> 
> 时间：2012-04-23T11:09:50.583
> 
> 标签：java, similarity, trigonometry, tf-idf

我有一组文档，我正在其中搜索我的关键字。我已经计算了关键字和所有文档的 tf-idf 值。假设，我将我的 tf-idf 值存储在所有文档的数组中，我如何使用它来计算我的余弦相似度？任何形式的代码帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:31:21.560

您可以将数组视为向量的集合，每个文档都有一个[向量](https://en.wikipedia.org/wiki/Vector_space_model)，其中元素的数量等于术语的数量。要确定两个文档的相似性，您可以以通常的方式计算对应向量的[标量积](https://en.wikipedia.org/wiki/Scalar_product)（对应向量分量的乘积之和），然后将其除以两个向量的范数的乘积。

在计算相似度之前对向量进行归一化是很实用的。在这种情况下，您只需使用文档向量的标量积，因为规范将是一个。

# cryptography - 对如何使用 AES 和 HMAC 感到困惑

> ID：10279403
> 
> 赞同：14
> 
> 时间：2012-04-23T11:09:52.880
> 
> 标签：cryptography, aes, hmac

在将加密消息从服务器传输到客户端时，我有点困惑如何以正确的方式使用 AES 和 HMAC（基于 SHA-256），反之亦然

如果以下方法错误，请纠正我：

1.  从密钥文件中获取安全密钥（例如，我们建议使用 AES-256，并且我们已经有一个有效的 256 位长度密钥）
2.  为 AES-256 生成随机 IV 以确保相同的纯文本将具有不同的加密输出。
3.  使用纯文本和安全密钥计算 HMAC-SHA-256。（第一个问题：我应该使用 IV 进行 HMAC 计算吗？例如附加到安全密钥？）
4.  使用 AES-256 加密纯文本。
5.  为客户端编写消息如下：HMAC + IV+ ENCRYPTED_MESSAGE

最大的问题是：是否有可能不将 IV 发送给客户端，而是以相同的方式生成它并且仍然是加密安全的？或者也可以发送IV？

我最终生成了随机 IV，因为需要相同的纯文本以不同的加密结果结束。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T01:44:13.407

不要发送 hmac(message)、aes(message)。如果您两次发送相同的消息，任何人都可以分辨出来。此外，您需要对密文进行mac以防止诸如[padding oracle attack](http://en.wikipedia.org/wiki/Padding_oracle_attack)之类的攻击。

**IV：**一般来说，处理 iv 的简单方法是将它添加到密文中，因为它是固定长度的。然后您可以在解密之前读取这些字节。IV 可以是公开的，但它们必须是随机的。

**HMAC：**如果您的库支持，最简单的方法是在 GCM 模式下使用 AES（或者，最好是 EAX）。这实际上不是 HMAC，但它提供了同样好的经过身份验证的加密。如果不支持这些：

您确实需要计算 iv 和密文的 hmac。如果 || 是连接（如果处理字节数组，你可以用说数组复制来做）然后你想要

```
CipherText = iv|| aes(key1,iv,message)  
tag = hmac(key2,ciphertext) 
```

然后发送（标签，密文）。在另一端，您运行相同的 hmac 调用以重新生成标签并将接收到的标签与计算出的标签进行比较。比较标签的 sha1 或 sha256 哈希而不是直接比较，这样您就不会在比较失败的地方泄漏。

您应该为 hmac 使用不同的密钥。在实践中，跟踪加密密钥的 sha1 总和就足够了。

# vba - VBScript - 如何让程序等到进程完成？

> ID：10279404
> 
> 赞同：10
> 
> 时间：2012-04-23T11:09:57.990
> 
> 标签：vba, vbscript, excel, excel-2010

我在与 VBA/Excel 宏和 HTA 一起使用的 VBScript 中遇到问题。问题只是 VBScript，我还有其他两个组件，即 VBA 宏和 HTA 前端工作正常。但在我解释问题之前，我想为你帮助我我必须帮助你理解VBScript的上下文。

因此，基本上所有组件（VBScript、VBA 宏和 HTA）都是我正在构建的工具的一部分，用于自动化一些手动杂务。它几乎是这样的：

# A-HTA

~~~~~~~~~~~~

1.  用户从 HTA/GUI 中选择一些文件。
2.  在 HTA 的 HTML 中，“SCRIPT”标签中有一些 VBScript，它将用户 4 个输入文件作为参数传递给 VBScript（由 WScript.exe 执行 - 您可以在此处参考注释 #1）
3.  该脚本，我们从现在开始将其*称为 myScript.vbs*然后处理 4 个参数，其中 3 个是特定文件，第 4 个是其中包含多个文件的路径/文件夹位置 - （为清楚起见，另请参见注释 #2）

# B - myScript.vbs

~~~~~~~~~~~~

1.  myScript.vbs 打开前 3 个参数，它们是 Excel 文件。其中之一是具有我的 VBA 宏的 *.xlsm 文件。
2.  myScript.vbs 然后使用第 4 个参数，它是包含多个文件的文件夹的 PATH，并将其分配给一个变量，以便在调用 GetFolder 时传递给 FileSystemObject 对象，即

    ```
    ... 'Other code here, irrelevant for this post
    Dim FSO, FLD, strFolder
    ... 'Other code here, irrelevant for this post
    arg4 = args.Item(3)
    strFolder = arg4
    Set FSO = CreateObject("Scripting.FileSystemObject"
    'Get a reference to the folder you want to search
    Set FLD = FSO.GetFolder(strFolder)
    ... 
    ```

3.  从这里我创建一个循环，以便我可以顺序打开文件夹中的文件，然后运行我的宏，即

    ```
    ...
    Dim strWB4, strMyMacro
    strMyMacro = "Sheet1.my_macro_name"

    'loop through the folder and get the file names
    For Each Fil In FLD.Files

        Set x4WB = x1.Workbooks.Open(Fil)
    x4WB.Application.Visible = True

    x1.Run strMyMacro

    x4WB.close
    Next 
    ... 
    ```

请注意，当前 3 个 Excel 文件打开时（由循环之前的代码控制，这里没有显示，因为我对那部分没有问题）我必须保持它们打开。

文件夹中的文件（作为第四个参数传递）必须按顺序打开和关闭。但是在打开和关闭之间，我需要**每次**循环迭代并从文件夹中打开一个新文件时运行 VBA/宏（写在之前打开的 3 个 Excel 文件之一中）（我希望你能跟随 - 如果没有请让我知道 ：） ）。

我遇到的问题是文件夹中的文件打开和关闭，打开和关闭，n 次（n = 文件夹中的文件数，自然）而不等待宏运行。这不是我想要的。我在“x1.Run strMyMacro”语句之后尝试了 WScript.sleep 语句，延迟了 10 秒，但无济于事。

有任何想法吗？

谢谢，QF。

笔记：

1 - 为了简单/清晰，这是如何：

```
 strCMD = cmd /c C:\windows\system32\wscript.exe myScript.vbs <arg1> <arg2> <arg3> <arg4>
    'FYI - This is run by creating a WShell object, wsObj, and using the .run method, i.e. WShell.run(strCMD) 
```

2 HTA 使用一段 JavaScript 来剥离用户的第 4 个输入文件（HTML：INPUT TYPE="file"）并将其传递给 HTA 中的 VBScript。这让我解决了无法在 HTML 中专门选择文件夹的问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T11:39:46.690

您需要告诉运行等待该过程完成。就像是：

```
const DontWaitUntilFinished = false, ShowWindow = 1, DontShowWindow = 0, WaitUntilFinished = true
set oShell = WScript.CreateObject("WScript.Shell")
command = "cmd /c C:\windows\system32\wscript.exe <path>\myScript.vbs " & args
oShell.Run command, DontShowWindow, WaitUntilFinished 
```

在脚本本身中，像这样启动 Excel。调试开始时可见：

```
File = "c:\test\myfile.xls"
oShell.run """C:\Program Files\Microsoft Office\Office14\EXCEL.EXE"" " & File, 1, true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-27T13:23:53.040

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2:Win32_Process")
objWMIService.Create "notepad.exe", null, null, intProcessID
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
Set colMonitoredProcesses = objWMIService.ExecNotificationQuery _
    ("Select * From __InstanceDeletionEvent Within 1 Where TargetInstance ISA 'Win32_Process'")
Do Until i = 1
    Set objLatestProcess = colMonitoredProcesses.NextEvent
    If objLatestProcess.TargetInstance.ProcessID = intProcessID Then
        i = 1
    End If
Loop
Wscript.Echo "Notepad has been terminated." 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:29:29.813

大概是这样的吧？（**未经测试**）

```
Sub Sample()
    Dim strWB4, strMyMacro
    strMyMacro = "Sheet1.my_macro_name"

    '
    '~~> Rest of Code
    '

    'loop through the folder and get the file names
    For Each Fil In FLD.Files
        Set x4WB = x1.Workbooks.Open(Fil)
        x4WB.Application.Visible = True

        x1.Run strMyMacro

        x4WB.Close

        Do Until IsWorkBookOpen(Fil) = False
            DoEvents
        Loop
    Next

    '
    '~~> Rest of Code
    '
End Sub

'~~> Function to check if the file is open
Function IsWorkBookOpen(FileName As String)
    Dim ff As Long, ErrNo As Long

    On Error Resume Next
    ff = FreeFile()
    Open FileName For Input Lock Read As #ff
    Close ff
    ErrNo = Err
    On Error GoTo 0

    Select Case ErrNo
    Case 0:    IsWorkBookOpen = False
    Case 70:   IsWorkBookOpen = True
    Case Else: Error ErrNo
    End Select
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-17T19:22:01.330

这可能无法具体回答您的长 3 部分问题，但这个线程很旧，我在今天搜索时发现了这个。这是一种更短的方法：“*等到一个过程完成*。” 如果您知道进程的名称，例如“EXCEL.EXE”

```
strProcess = "EXCEL.EXE"    
Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\cimv2")
Set colProcesses = objWMIService.ExecQuery ("Select * from Win32_Process Where Name = '"& strProcess &"'")
Do While colProcesses.Count > 0
    Set colProcesses = objWMIService.ExecQuery ("Select * from Win32_Process Where Name = '"& strProcess &"'")
    Wscript.Sleep(1000) 'Sleep 1 second
   'msgbox colProcesses.count 'optional to show the loop works
Loop 
```

归功于：[http ://crimsonshift.com/scripting-check-if-process-or-program-is-running-and-start-it/](http://crimsonshift.com/scripting-check-if-process-or-program-is-running-and-start-it/)

# asp.net - Ajax.ActionLink 调用的地址栏中没有 url

> ID：10279409
> 
> 赞同：1
> 
> 时间：2012-04-23T11:10:03.733
> 
> 标签：asp.net, ajax, asp.net-mvc, url-routing

当我单击此链接时：

Ajax.ActionLink("获取客户","GetCustomers","Customer");

我的网址栏仍然显示：www.mysite.com 而不是 ww.mysite.com/Customer/GetCustomers

我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:20:51.253

网页在后台通过 ajax 加载，您没有进行重定向，因此 URL 不会更改。

而是重定向到行动。

# .net - 无法在 Windows 8 应用程序中创建动态磁贴

> ID：10279417
> 
> 赞同：0
> 
> 时间：2012-04-23T11:10:28.133
> 
> 标签：.net, html, windows-8, microsoft-metro

我的要求是在其中一个应用程序页面中创建动态磁贴。但现在我能够创建仅驻留在 Windows 8 平板电脑的开始屏幕中的磁贴。

但我需要在应用程序中创建一个磁贴。我正在使用的环境：

*   Visual Studio 2011 测试版
*   其针对平板电脑的 Windows 8 开发
*   使用的语言 HTML、Js、C# - 它是一种 MVVM 模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:59:47.880

您需要使用 wp7 工具包中的 HUB Tile，它模仿为 Live tile。但是您需要将 HUB Tile 代码移植到 Windows 8。

# javascript - 使用js保存图片

> ID：10279421
> 
> 赞同：0
> 
> 时间：2012-04-23T11:10:38.387
> 
> 标签：javascript

我被困在一个点，我从服务器获取图像作为二进制数据，我需要将此图像保存在我的 PC 上，而无需任何用户干预。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:12:47.883

想一想。如果 JavaScript 可以在未经您明确同意的情况下将文件保存到您的 PC，那么世界上的每个黑客都可以在几分之一秒内访问您的 PC。Flash 有足够多的安全问题，JavaScript 不需要它们。

换句话说，你所要求的不可能**有充分的理由**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:20:45.820

也许 HTML5 File API 适合您。但是如果没有用户操作，这将是一个巨大的安全漏洞！

[http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)

[http://www.w3.org/TR/file-writer-api/#the-filesaver-interface](http://www.w3.org/TR/file-writer-api/#the-filesaver-interface)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:29:27.267

为什么要在*未经*用户同意的情况下保存某些内容？这绝不是一个好主意。

无论如何，JavaScript 无法弄乱您计算机的文件系统，因此它无法将图像保存到您的硬盘驱动器。您可以使用 JavaScript 在您的网页上创建图像，使用 img 或 canvas，然后要求用户保存它，但您想要的正是 JavaScript 无法实现的。

在您的服务器页面上，您可以创建二进制数据，并设置某些标头以将该页面视为可下载的内容，这几乎是您所能获得的。不过，它仍然会征求用户的同意。

# linq - Count 必须是 DbConstantExpression 或 DbParameterReferenceExpression。参数名称：计数

> ID：10279426
> 
> 赞同：0
> 
> 时间：2012-04-23T11:11:04.573
> 
> 标签：linq, entity-framework, linq-to-entities, dbcontext

```
Dim days = (From d In db.ShiftSchedule _
               Where d.Shift1 = 1 And d.WorkDate >= StartDate _
               Order By d.ID _
               Skip SkipValue _
               Select New With {d.ID, d.WorkDate, d.Shift1, _
               .EndDate = (From dd In db.ShiftSchedule _
               Where d.Shift1 = 1 And d.WorkDate >= StartDate _
               Order By d.ID _
               Skip SkipValue - 1 _
               Select dd.WorkDate).First}).First 
```

当我尝试执行上面的 LINQ to Entities 查询时，我收到以下错误，该代码可能有什么问题。

> Count 必须是 DbConstantExpression 或 DbParameterReferenceExpression。参数名称：计数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:58:24.783

我认为，您的内部查询应该有条件为 Where **dd** .Shift1 = 1 And **dd** .WorkDate >= StartDate Order By **dd** .ID 而不是 Where d.Shift1 = 1 And d.WorkDate >= StartDate _ Order By d.ID

不知道是不是笔误。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-28T11:19:14.613

由于您提供的“跳过”的值是计算出来的，这将导致异常。如果您将值存储在您首先计算的变量中，然后使用该变量，它应该可以按预期工作。

所以

```
Dim actualSkipValue = SkipValue - 1

Dim days = (From d In db.ShiftSchedule _
               Where d.Shift1 = 1 And d.WorkDate >= StartDate _
               Order By d.ID _
               Skip SkipValue _
               Select New With {d.ID, d.WorkDate, d.Shift1, _
               .EndDate = (From dd In db.ShiftSchedule _
               Where d.Shift1 = 1 And d.WorkDate >= StartDate _
               Order By d.ID _
               Skip actualSkipValue _
               Select dd.WorkDate).First}).First 
```

不应该抛出异常。

# javascript - 使用 Knockout.js 绑定 CSS3 动画回调

> ID：10279427
> 
> 赞同：2
> 
> 时间：2012-04-23T11:11:18.913
> 
> 标签：javascript, css, knockout.js, css-animations

我正在使用 Knockout.js 和 CSS3 动画为 iPad 构建“WebApp”。

不同页面之间的过渡是动画的。我想在动画结束时获得一个 JavaScript 回调。

现在我知道你可以像这样使用 Javascript 来捕获回调：

```
element.addEventListener(webkitAnimationEnd, function(){callfunction()},false); 
```

但是没有更好的方法来做到这一点吗？“淘汰方式”？我想使用`data-bind`DOM 中的属性绑定回调函数，而不是在我的 javascript 代码中访问 DOM 元素！

有任何想法吗？

**编辑：**也许我应该补充一点，我是 Knockout.js 的新手，我不知道我想做什么，或者更确切地说，我想如何去做是有意义的，或者你是否只是按照传统方式去做方式！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:36:31.910

我使用[jQuery Transit](http://ricostacruz.com/jquery.transit/)和一个淘汰赛自定义绑定来完成滑动页面转换。基本上，它会将活动页面 (div) 滑出并滑入一个新页面。它在移动设备（iPad、iPhone、iPod Touch、Android 手机等）上看起来也不错。这是绑定：

**Javascript：**

```
 var previousElement = null;
    ko.bindingHandlers.slideVisible = {
        init: function (element, valueAccessor)
        {
            var value = valueAccessor();
            $(element).toggle(ko.utils.unwrapObservable(value));
        },
        update: function (element, valueAccessor)
        {

            var value = ko.utils.unwrapObservable(valueAccessor());
            if (value)
            {
                if (previousElement == null)
                { // initial fade
                    $(element).show();
                }
                else
                {
                    //uses CSS3 Transform for smooth mobile performance
                    $(previousElement).transition({ x: '-100%' }, function () { $(this).hide(); });
                    $(element).css({ x: '100%' });
                    $(element).show().transition({ x: '0%' }, function () 
{ 
//Callback | transition finished code here
});
                }
                previousElement = element;
            }
        }
    }; 
```

**查看模型片段：**

```
isPageVisible: ko.observable(false) 
```

**HTML：**

```
<div data-bind="slideVisible: isPageVisible">
<!-- Page Content Here -->
</div> 
```

[**JS 小提琴演示**](http://jsfiddle.net/TWxy7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:55:07.643

根据我的经验，没有“淘汰方式”来处理这类事件。

Knockout 的作者建议使用 KO**事件**绑定进行简单绑定。但对于更复杂和/或不显眼的事件绑定场景，建议使用 jQuery： http: [//knockoutjs.com/documentation/unobtrusive-event-handling.html](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

我现在正在使用 Knockout 进行一个项目，我遵循了他的建议。使用一些 KO**事件**绑定（用于表单提交）和一些 jQuery 事件绑定（在我的情况下用于窗口调整大小事件）。

当然，您不需要使用 jQuery，但在您的情况下，走出 KO 库可能是正确的路线。玩得开心！

# wordpress - 用于 Wordpress 冲突的 Easy Mailchimp Extender 和简单的花式盒子插件

> ID：10279433
> 
> 赞同：1
> 
> 时间：2012-04-23T11:11:41.560
> 
> 标签：wordpress, plugins, fancybox, conflict, mailchimp

我是这些论坛的新手，实际上我发现它们是因为我的 wordpress 网站一直存在问题，因为我的两个插件相互冲突，我无法解决问题。

我正在使用 Easy Mailchimp Extender 插件和 easy fancy box 插件，尽管两者之间存在冲突。基本上，我的图像可以使用 easy fancybox 插件打开，但前提是 mailchimp 未激活。如果 mailchimp 处于活动状态，fancybox 将被禁用，并且我的主页媒体滑块无法正确显示。

您可以查看我的网站（并在此处查看主页问题）：

[http://www.martinbrooksmusic.com/](http://www.martinbrooksmusic.com/)

我通过谷歌搜索找到了论坛，因为 hugegoudaface 和我有同样的问题（在这个线程中被提到的第四个答案）——尽管他没有解释他是如何以我理解的方式解决问题的......

[MailChimp jQuery 冲突](https://stackoverflow.com/questions/3540770/mailchimp-jquery-conflict)

我非常感谢解决此问题的任何帮助。虽然我不是一个经验丰富的程序员，所以可能需要以非常基本的方式解释一些事情。

非常感谢！

马丁

# expect - 期待脚本基础知识

> ID：10279435
> 
> 赞同：0
> 
> 时间：2012-04-23T11:11:56.617
> 
> 标签：expect

我是 Expect 脚本的新手，我想知道任何可以从 Expect 脚本基础开始的链接。

1.  命令的语法
2.  如何运行和测试脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:20:53.323

获取《*[探索期望](http://shop.oreilly.com/product/9781565920903.do)*》一书。Expect 是[Tcl](https://en.wikipedia.org/wiki/Tcl)的扩展，因此请阅读[Tcl 教程](http://www.tcl.tk/man/tcl8.5/tutorial/tcltutorial.html)。

关于如何使脚本可执行的快速教程：

1.  你需要一个“shebang”行让操作系统知道如何解释你的脚本
2.  您需要赋予文件可执行权限
3.  您需要将脚本放在 $PATH 中的目录中，或者使用完整路径或相对路径调用它。

```
$ cat > test.exp << END
#!/usr/bin/expect -f
send_user "hello world\n"
END
$ chmod a+x test.exp
$ ./test.exp
hello world 
```

在开发和测试 Expect 脚本时，将

```
exp_internal 1 
```

一开始。

# javascript - YUI Compressor 和“使用严格”提示

> ID：10279436
> 
> 赞同：11
> 
> 时间：2012-04-23T11:12:02.560
> 
> 标签：javascript, yui-compressor, minify, use-strict

我一直在使用 YUI Compressor 来缩小 JS 文件。我有这个代码：

```
(function(global) {
    "use strict";

     var X=1;

    /*** my code here ***/

}(window)); 
```

我用这个命令压缩它：

```
$> java -jar yuicompressor-2.4.7.jar test.js -o test.min.js --verbose 
```

压缩输出文件中不存在“使用严格”提示。似乎 YUI 删除了所有提示。它输出这个警告：

```
[WARNING] Invalid hint syntax: use strict
(function(global){ ---> "use strict" <--- ;var X=1;... 
```

虽然，我的代码在压缩后工作正常，但我想知道 YUICompressor 是否有一个参数来保留提示和/或避免该警告的方法。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:10:18.377

部分解释可以在[这里](https://stackoverflow.com/questions/4463035/how-to-force-google-closure-compiler-to-keep-use-strict-in-the-compiled-js-co)找到。虽然这个问题是关于闭包编译器的，但答案会给你一个提示（因为谷歌也有这个问题）。在闭包中可以使用`--language_in=ECMASCRIPT5_STRICT`

不幸的是，到目前为止，YUI Compressor 还没有这样的东西。至少我找不到类似的东西。

# android - 如何在安卓市场上以横向模式发布安卓应用截图？

> ID：10279437
> 
> 赞同：4
> 
> 时间：2012-04-23T11:12:06.997
> 
> 标签：android, android-market-filtering

我是 Android 开发的新手。我刚刚在 Android Market 即 Google Play Store 上上传并发布了我的应用程序。这些天我遇到了一个问题，我无法在 Android Market 上以横向模式上传我的应用程序屏幕截图。谁能帮我解决这个问题？

提前感谢您的解决方案或反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:26:56.570

Google Play 关于 App Info 页面截图的提示

> 全出血，艺术无边框您可以横向上传屏幕截图。缩略图看起来是旋转的，但实际图像及其方向将被保留。

所以图像仅以纵向模式上传。拍摄旋转屏幕的屏幕截图并在上传时将尺寸变为纵向（如果它们的尺寸是横向的，即宽度大于高度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:31:40.007

首先，旋转 90 度并根据需要上传 2 张纵向图像，然后继续上传您的横向截图。

毕竟，删除你的前 2 张肖像截图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T06:48:13.653

将像素更新到 2000x1000 解决了我的问题。

# perl - 使用哪个命令行参数解析 Perl 模块？

> ID：10279439
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:12:16.650
> 
> 标签：perl

当我在 CPAN 中搜索“参数解析”时，它会返回 1250 次点击。

谁能推荐一个 Perl 模块来处理命令行参数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T11:15:18.837

这方面的标准模块（包含在 Perl 发行版中）是[`Getopt::Std`](http://p3rl.org/Getopt%3a%3aStd)和[`Getopt::Long`](http://p3rl.org/Getopt%3a%3aLong).

# linux - 为什么影子文件的inode值会发生变化？

> ID：10279446
> 
> 赞同：4
> 
> 时间：2012-04-23T11:12:49.640
> 
> 标签：linux

我为影子文件创建了一个硬链接。为了删除用户的密码，我在 vi 编辑器中打开了影子文件并删除了加密的密码，然后保存了。影子文件的 inode 值已更改。然后我更新了用户的密码，影子文件的 inode 值再次发生了变化。为什么影子文件的 inode 在编辑/更新时会发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:18:57.360

VI 将数据保存在一个新文件中，然后取消链接或重命名旧的目录条目。硬链接链接到旧链接。

这是在案例保存失败时确保数据一致性的两种方法之一。

另一种方法是复制旧文件然后覆盖它。旧副本将具有不同的 inum，而新保存的文件将与以前相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:08:07.447

处理文件写入的代码会在写入文件之前创建整个文件的副本，因为它应该存在于磁盘上。一旦文件被写入磁盘并刷新，它就会被重命名为正确的名称（/etc/shadow 或 /etc/gshadow，用于组影子文件）。

问题不仅仅是数据一致性。为了使系统可用，必须存在少量文件，安全文件就是其中的一部分。目标是避免出现系统崩溃或相关命令可能被挂起（Ctrl-Z 键或 SIGSTOP ...）和文件处于不安全状态的情况。“不安全”还可以包括“不存在”——非原子重命名文件可能会留下 /etc/shadow 文件根本不存在的时间间隔。

# spring - 需要解释：线程“主”org.springframework.beans.factory.BeanNotOfRequiredTypeException中的异常：

> ID：10279450
> 
> 赞同：0
> 
> 时间：2012-04-23T11:13:24.390
> 
> 标签：spring

当我尝试以下列方式访问 bean 时

```
ConfigurableApplicationContext context = new ClassPathXmlApplicationContext("factoryMethodDemo.xml");
    System.out.println(context.getBean("bean2",BeanLifeCycle.class));
    System.out.println(context.getBean("bean",FactoryMethodDemo.class));
    context.close(); 
```

这里 BeanLifeCycle.class 实现了所有生命周期接口，如 BeanNameAware...DisposableBean 等。FactoryMethodDemo.class 是一个简单的 bean

FactoryMethodDemo.java

```
 package com.demo;

    import org.springframework.context.ConfigurableApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class FactoryMethodDemo {
        private String message;

        public FactoryMethodDemo() {
        }

        public void setMessage(String message) {
            System.out.println("setMessage Called");
            this.message = message;
        }

        public void defaultInit() {
            System.out.println("defaultInit");

        }

        public static void main(String[] args) {
            ConfigurableApplicationContext context = new ClassPathXmlApplicationContext("factoryMethodDemo.xml");
            System.out.println(context.getBean("bean2",BeanLifeCycle.class));
            System.out.println(context.getBean("&bean",FactoryMethodDemo.class));
            context.close();
        }
    } 
```

BeanLifeCycle.java

```
 package com.demo;

    import org.springframework.beans.BeansException;
    import org.springframework.beans.factory.BeanFactory;
    import org.springframework.beans.factory.BeanFactoryAware;
    import org.springframework.beans.factory.BeanNameAware;
    import org.springframework.beans.factory.DisposableBean;
    import org.springframework.beans.factory.InitializingBean;
    import org.springframework.beans.factory.config.BeanPostProcessor;
    import org.springframework.context.ApplicationContext;
    import org.springframework.context.ApplicationContextAware;

    public class BeanLifeCycle implements BeanNameAware, BeanFactoryAware, ApplicationContextAware, BeanPostProcessor, InitializingBean, DisposableBean {

        private String property;

        public void setProperty(String property) {
            System.out.println("setProperty");
        }

        @Override
        public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
            System.out.println("setBeanFactory");
        }

        @Override
        public void setBeanName(String beanName) {
            System.out.println("setBeanName");
        }

        @Override
        public void setApplicationContext(ApplicationContext arg0) throws BeansException {
            System.out.println("setApplicationContext");

        }

        @Override
        public Object postProcessAfterInitialization(Object arg0, String arg1) throws BeansException {
            System.out.println("postProcessAfterInitialization");
            return new Object();
        }

        @Override
        public Object postProcessBeforeInitialization(Object arg0, String arg1) throws BeansException {
            System.out.println("postProcessBeforeInitialization");
            return new Object();
        }

        @Override
        public void afterPropertiesSet() throws Exception {
            // THis is treated as init method
            System.out.println("afterPropertiesSet");
        }

        @Override
        public void destroy() throws Exception {
            System.out.println("destroy");
        }

    } 
```

**factoryMethodDemo.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans  xmlns="http://www.springframework.org/schema/beans" x        mlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <bean id="bean" class="com.demo.FactoryMethodDemo">
    <property name="message" value="message"></property>
    </bean>
    <bean id="bean2" class="com.demo.BeanLifeCycle">
    <property name="property" value="property"></property></bean>
    </beans> 
```

它抛出以下异常

> 线程“主”org.springframework.beans.factory.BeanNotOfRequiredTypeException 中的异常：名为“bean”的 Bean 必须是 [com.demo.FactoryMethodDemo] 类型，但实际上是 [java.lang.Object] 类型

显然返回的是 Object 类型而不是 FactoryMethodDemo，请有人解释导致此类异常的幕后发生的事情。提前感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:23:19.470

我怀疑这`com.demo.FactoryMethodDemo`将实现[`FactoryBean`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html)接口：

这意味着 bean 将无法在应用程序上下文中查找，因为`FactoryMethodDemo`bean 负责创建另一个 bean（带有 id `bean`）。

如果您查看实现，`FactoryMethodDemo`您很可能会看到有一个实现`getObject`将返回 id 可用的 bean 实例`bean`。

因为“工厂 bean”与普通 bean 不同，您将无法使用该`getBean(String beanId, Class beanType)`方法查找它，因为它不会被注册。但是，您应该能够执行以下操作：

```
context.getBean("&bean"); 
```

这将返回创建 bean“bean”的“工厂”。

另请参阅[Spring 参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-factory-extension-factorybean)

# c++ - 在 emacs 中使用 EDE 处理 cmake/C++ 项目

> ID：10279454
> 
> 赞同：8
> 
> 时间：2012-04-23T11:13:40.273
> 
> 标签：c++, emacs, cedet

我想使用 EDE（来自 CEDET）来处理我的一些基于 cmake 的 C++ 项目。我发现了一些信息，这应该是可能的。但是从现有源文件和 cmake 文件创建新项目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:44:32.050

基于 CMake 的项目本身尚不支持 - 我个人使用标准 ede-cpp-root 项目类型 +[一些自定义命令来编译代码](https://github.com/alexott/emacs-configs/blob/master/rc/emacs-rc-cedet.el#L130)。在这个方向上有一些关于更完整功能的工作。[您可以在单独的存储库](https://code.launchpad.net/~arankine/+junk/ede-cmake)中找到更改。

# java - 关于数组元素减法和比较的逻辑

> ID：10279457
> 
> 赞同：0
> 
> 时间：2012-04-23T11:13:53.377
> 
> 标签：java, logic

我为以下问题编写了代码，但输出不如预期。我不知道我的代码是否有问题。逻辑似乎很好。谁能看看我的代码是否有问题。

给定一个按升序排序的分数数组，如果该数组包含 3 个相邻分数，并且彼此之间最多相差 2，则返回 true，例如 {3,4,5} 或 {3,5,5}。

我的源代码如下：

```
public boolean scoresClump(int[] scores) {

    boolean result = false;

    for(int i=0; i<scores.length-2; i++){
        if((scores[i+1]-scores[i])<=2 && (scores[i+2]-scores[i+1])<=2){
            result = true;
            break;
        }
    }

    return result;
} 
```

[这](http://codingbat.com/prob/p194530)是问题的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:33:19.480

干得好。您之前的帖子没有考虑非相邻值之间的增量。

```
public boolean scoresClump(int[] scores) {
  boolean result = false;

  for(int i=0; i<scores.length-2; i++){
      if((scores[i+2]-scores[i])<=2){
          result = true;
          break;
      }
  }

  return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:19:34.433

你的`for`循环应该是，`for(int i=0; i<scores.length-2; i++){`否则你会得到一个`ArrayOutOfBoundsException`.

另外，您`break`应该在`true`条件而不是条件中`false`。目前，您的代码在第一组不匹配条件的 3 个元素之后存在循环。

此外，如果它们已经按升序排序，则无需执行`Math.abs`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:19:40.613

首先，如果您遇到错误或意外行为，您应该描述它是什么（例如预期和实际输出）。

在您的情况下，我可以在您的代码中发现至少一个错误：您在循环分数 [i+2] 中访问。当我达到 length-1 时，您访问 length+1。即使访问 length+0 也已经是一个错误，因为最后一个元素的索引 length-1。您没有显示完整的代码，但我假设由于抛出异常，结果在调用函数中被解释为 false。

此外，这两项检查不是必需的，一项检查就足够了，因为您将在下一次迭代中执行下一次检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:26:44.913

试试这个：

```
 public boolean scoresClump(int[] scores) {
boolean result=false;
for(int i=0; i<scores.length-2; i++){
        if(Math.abs(scores[i]-scores[i+1])<=2 &&
        Math.abs(scores[i+1]-scores[i+2])<=2 &&
        Math.abs(scores[i]-scores[i+2])<=2){
            result=true;
        }
}
return result;
} 
```

# programming-languages - Windows 8 metro/winRT 中的新 JIT 编程语言是否可行？

> ID：10279458
> 
> 赞同：20
> 
> 时间：2012-04-23T11:13:57.857
> 
> 标签：programming-languages, windows-8, microsoft-metro, jit, windows-runtime

假设我想创建一种新的编程语言或使用一些 MS 不支持的语言（Haskell、Java ......无论如何），但希望能够针对 Windows 8 Metro/winRT 进行编码。

我知道 Metro UI 中的所有应用程序都是沙盒化的。
我知道我可以用本机 C++ 编程，所以我假设我也可以用 C 或汇编语言进行编程。
但：

1.  是否可以创建一个即时生成汇编代码的 JIT（如 CLR JIT）而不破坏沙盒限制？
2.  假设我将只使用[Metro 沙箱中允许的 API，](http://msdn.microsoft.com/en-us/library/windows/apps/br205757%28v=VS.85%29.aspx)是否可以不使用 XAML 作为 UI 界面？- 我可以直接使用 Direct2D/DirectX 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T18:05:04.950

据我所知，现在打电话还为时过早。我个人不知道如何在不使用 VirtualProtect() 的情况下编写抖动，这是一个核心 winapi 函数，可让您将一块内存与抖动生成的机器代码转换为可执行代码。

WinRT 应用程序可以使用许多本机 winapi 函数。受祝福的系统功能列表[可在此处获得](http://msdn.microsoft.com/en-us/library/windows/apps/br205762.aspx)。与内存相关的 api 非常有限，VirtualQuery 是列表中唯一接近的。

那么目前的语言预测是如何做到的呢？我们来看一下。CLR 有一个投影，它会加载到您使用 C# 等托管语言编写的任何 Metro 应用程序中。在 c:\windows\microsoft.net\framework\v4.0.30319\clr.dll 上运行 dumpbin.exe /imports 会生成一个相当大的 Windows DLL 依赖项列表。该转储的一个片段：

```
Dump of file clr.dll

File Type: DLL

  Section contains the following imports:

    KERNEL32.dll
...

              430 RaiseException
              581 VirtualAlloc
              584 VirtualFree
              589 VirtualQuery
              587 VirtualProtect          <=== here!
              339 HeapDestroy
              336 HeapAlloc
              342 HeapValidate
              540 SleepEx
              547 SwitchToThread
              ... etc 
```

另一种语言投影用于 javascript，在“Chakra”引擎中实现。很难弄清楚究竟是什么 DLL 实现了该引擎，它只是一个代号。运行启用了非托管调试的示例 Javascript 项目会显示已加载“jscript9.dll”。让我们对这个做 dumpbin.exe /imports：

```
 ....
  6898F4D5    10D DebugBreak
  6891FDA1    55E TerminateProcess
  6898EF9E    57E UnhandledExceptionFilter
  6891FD58    43C RaiseException
  68903BB7    59E VirtualProtect                 <=== here!
  6A218590    366 InterlockedPushEntrySList
  6A2185A9    365 InterlockedPopEntrySList
  6A2195AA    35C InitializeSListHead
  689026F9    598 VirtualAlloc
  68902852    59B VirtualFree
  6890603E    4A2 ResetWriteWatch
  ...etc 
```

嗯，它就在那里。它必须是。麻烦的是，现在*你*不能调用这个函数。它肯定不会通过 Store 验证器的审查。

这需要炖，至少在*真正的*WinRT 可用之前，运行在 ARM 内核上的 WinRT。不仅仅是您现在在 Windows 8 Consumer Preview 中运行的在 Win32 之上运行的那个。并且可以轻松利用现有的 winapi 函数，而不仅仅是修剪后的列表。那大概是年底吧。真正的硬件要到明年夏天才能掌握在您手中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T12:49:36.367

是的，可以为其他编程语言在 WinRT 上编写投影。甚至受到鼓励。本月早些时候在微软园区举行了一场名为 Lang.Next 的会议，主题是语言设计。其中一个会议专门针对此主题，您可能想观看（我有）：[http](http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/The-Windows-Runtime) ://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/The-Windows-Runtime和也阅读页面上的评论。让我引用一个：

> Martyn 明确表示，我们不仅希望语言设计者和实现者将 WinRT 添加到他们的语言和工具链的目标平台列表中，而且我们会提供帮助和建议。

所以开始吧！:-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-17T15:05:55.563

[这是我发现的一个技巧，可以访问这些缺失的 API（VirtualAlloc、VirtualProtect），这是实现抖动所必需的](http://at-my-window.blogspot.com/2012/12/gaining-access-to-full-windows-apis.html)（免责声明：这是我的博客）。

通过使用不安全的 C# 代码，您可以绕过强加于 .NET 反射的限制并调用内部 P/Invoke 方法`Win32Native.GetProcAddress`。拥有该功能后，您将自动获得对任何 Win32 功能的访问权限，包括`VirtualAlloc`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-25T15:05:19.210

1) 除了可以访问某些受限 API 的浏览器（并且可以集成其 JIT，但是 afaik，尚未发布浏览器的授权 API），标准 Win8 Metro App 将无法访问诸如“VirtualAlloc”之类的功能/VirtualProtect”（用于创建/更改读/写/可执行内存页面）：表示在Windows 8 Metro App下用C++开发的JIT不会通过认证。您已经可以使用 Visual Studio 11 Beta 提供的认证工具包检查您的应用程序。

有人可能会说“我要破解 PE 部分以强制读 + 写 + 可执行”部分，而不必使用 VirtualAlloc/VirtualProtect 函数，但不幸的是，这个 hack 也不起作用，因为你被迫编译 Windows 8 Metro exe 带有选项 /NXCOMPAT:YES，这意味着它正在启用“数据执行保护”（DEP）。

另一个人可能会尝试动态生成 DLL 并使用新的“LoadPackagedLibrary”从磁盘加载它们，但如果 DLL 不是原始部署的一部分（实际上，我无法做到），则此功能实际上被锁定好好工作）

唯一可用的 JIT 是 .NET JIT。所有使用 DLR（.NET 中的动态语言运行时）甚至反射 Emit 的 .NET 动态语言，如 IronPython/IronRuby（如果它们针对 Win8 Metro 进行了更新）都会被 jitted。因此，如果您以 .NET CLR 字节码为目标，您可以对代码进行 jitted。

例如，能够在 .NET CLR 中运行 Java 代码的 IKVM.Net 可以在 Windows 8 Metro App 下运行（但条件是它将被重构为仅使用经过认证的 Win8 Metro API）。

2) 是的，可以在不使用 XAML 的情况下编写 Direct2D/Direct3D11 应用程序。

检查 Windows 8 Metro 示例[http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)。例如，大多数 Direct2D 示例不使用 XAML。

作为 Metro Window 系统较低级别 API 的 CoreWindow 类是纯 Direct2D/Direct3D11 应用程序的入口点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T03:50:44.077

值得注意的是，即使你设法让 JIT 工作，也许是通过发出 CLR 字节码而不是本机机器代码，或者即使你只是实现了一个没有 JIT 的解释器，你也只能运行包含在你的原始代码中的代码应用程序包。如果您从应用程序外部下载脚本/字节码/等...并尝试在“本地上下文”中运行/JIT/解释它（即直接访问 WinRT 库），您会（可能有例外 - 请参阅下面的注释) 违反应用程序认证要求的第 3.9 节：

> 3.9 所有应用程序逻辑必须源自并驻留在您的应用程序包中您的应用程序不得尝试通过任何形式的动态包含代码或数据来更改或扩展打包的内容，这些代码或数据会更改应用程序与 Windows 运行时的交互方式或行为方式关于商店政策。例如，不允许下载远程脚本并随后在应用程序包的本地上下文中执行该脚本。

这里棘手的措辞是在这个“本地上下文”句子中。目前尚不清楚这究竟意味着什么。例如，如果您有一个 Web 浏览器控件，其门户网站打开一个网站（或在“Web 上下文”中运行的 html 应用程序中的 iframe），则该 Web 浏览器/iframe 正在“运行”JITed javascript 代码，但它将在不同的“上下文”中运行，并且无法直接访问 WinRT api。目前尚不清楚此异常是否仅适用于 XAML 中的 IE 浏览器控件或 html 应用程序中的 iframe w/web 上下文，或者您是否可以在解释器或动态运行时中实现自己的“web 上下文”。

话虽如此，您可以预编译任何类型的应用程序代码，作为将该代码放入应用程序并进行认证的一种方式，类似于在 iOS 上完成的方式，除了您可以选择预编译到 .NET 、本机机器代码或 javascript。

# javascript - jQuery 中的 event.srcElement.value 等效项

> ID：10279459
> 
> 赞同：2
> 
> 时间：2012-04-23T11:13:58.637
> 
> 标签：javascript, jquery

我有一个编写的函数，`javascript`我想重写它`jQuery`这是函数代码：

```
function onclickRbtn(controlID , Message)
     {
         var s = document.getElementById(controlID);
         var sVal = event.srcElement.value;
         for (var i = 0; i < s.rows.length; i++)
          {
             if (s.getElementsByTagName("input")[i].value == sVal)
                 s.getElementsByTagName("label")[i].innerText = Message;
         }
         s.disabled = 'disabled';
    } 
```

这段代码：event.srcElement.value 是什么，jQuery 中的等价物是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:15:17.307

您可以使用[***event.target***](http://api.jquery.com/event.target/)

要找出哪个元素是事件的目标，您可以使用

[***http://www.quirksmode.org/js/events_properties.html#target***](http://www.quirksmode.org/js/events_properties.html#target)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:17:01.147

你是这个意思：

```
$("button").click(function(){
    var value = $(this).val();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T11:20:17.240

如果你有工作的 JavaScript 代码，不要用 jQuery 重写它。这就像说“这把锤子可以把钉子钉在墙上，但我想用大锤代替。”

除此之外，您拥有的代码是 IE 8 及更低版本独有的，它在 IE 9 或其他浏览器中不起作用，因为它使用特定术语（全局`event`对象，`srcElement`...）

这是您应该使用的代码：

```
function onclickRbtn(controlID,Message,evt) {
    evt = evt || window.event;
    var s = document.getElementById(controlID),
        sVal = (evt.srcElement || evt.target).value,
        inputs = s.getElementsByTagName('input'),
        labels = s.getElementsByTagName('label');

    for( var i=0; i<s.rows.length; i++) {
        if( inputs[i].value == sVal) labels[i].innerText = labels[i].textContent = Message;
    }
    s.disabled = true;
} 
```

无论您在哪里附加事件，请确保将事件添加到参数中。例子：

```
<element onclick="onclickRbtn(controlID, Message, event);">
elem.onclick = function(e) {onclickRbtn(controlID, Message, e);}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T11:08:57.743

这适用于 IE9、IE 8、IE7、Chrome 22、Safari 5.7.1。它在 FF 14 中不起作用：

```
$(event.srcElement || event.target); 
```

# php - 编辑文本元素时重置后端用户设置

> ID：10279460
> 
> 赞同：2
> 
> 时间：2012-04-23T11:14:02.520
> 
> 标签：php, javascript, html, typo3

用户设置保存在 be_users.uc
但是当用户编辑文本元素时，设置被删除并且该字段几乎是空的。这只发生在一个页面上并且适用于所有用户。用户是管理员。

似乎是生成错误的 HTML。很多 HTML 都可以做到这一点吗？！ [这](http://jsfiddle.net/kSxWt/)是用户插入的 HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:05:58.123

我想，TYPO3 试图将更多的数据写入 uc，而不是允许的。数据是序列化的，所以你可以看到哪个条目太大了。

出于调试目的，您可以增加 be_users.uc 的字段大小，或者您可以保存记录并在之后查看 be_users.uc。也许你可以粘贴？我猜你会在那里看到一些非常大的条目。可能有助于解决问题。

# build - UppercuT项目输出目录配置

> ID：10279469
> 
> 赞同：0
> 
> 时间：2012-04-23T11:14:58.210
> 
> 标签：build

我正在尝试为我正在处理的项目建立一个构建系统，并且我已经添加了 Uppercut。

我的解决方案有许多项目，一切似乎都运行良好，尽管构建完成后的所有二进制文件都放在 code_drop 文件夹下的一个文件夹中，而不是我期望的基于项目名称的单个文件夹中。

谁能指出我正确的方向来实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:05:31.683

我现在实际上已经通过使用[PublishedApplications解决了这个问题](http://nuget.org/packages/PublishedApplications)

# vhdl - 如何在 DE0 nano 中将 FPGA 设计和 NIOSll 处理器链接为单个 FPGA 设计

> ID：10279475
> 
> 赞同：0
> 
> 时间：2012-04-23T11:15:23.173
> 
> 标签：vhdl, fpga, intel-fpga

您好，我正在尝试将 NIOSll 处理器集成到我现有的 FPGA 设计中，以便最终获得一个 FPGA 解决方案。我有一个用 VHDL 设计的信号监控单元，我需要将创建的设计连接到 NIOSll 处理器以进行计算并显示结果。我已经找到了单独做事的方法，但我想要单个 FPGA 中的两个元素。有可能吗？如果是，请告诉我如何。我正在使用 ALTERA DE0-Nano 板。请查看图片。红色部分是我想要实现的。 ![FPGA设计](../Images/6ec8ac20a0c37254f049345445e203ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:52:06.437

Nios II 处理器最简单的接口是它的[PIO（并行 I/O）](http://www.altera.com/literature/hb/nios2/n2cpu_nii5v3.pdf)外围设备，您可以随时从 Nios II 上运行的程序中读取这些外围设备。

一旦您在 Qsys/SOPC Builder 中配置了 Nios II 系统，请确保在单击*Generate*按钮之前勾选了 Generate 选项卡上的*Create block symbol file （它已经在我的设置中）。*然后，您将能够在原理图上执行*Insert* -> *Symbol*并选择生成的符号文件。然后，您可以将该块与设计的其他部分连接起来。

 ***可能值得考虑删除这两个`para2ser_28bit`实例，具体取决于您的应用程序，因为您可以将单个 PIO 外设实例设置为高达 32 位宽。如果您需要更多，您可以使用更多 PIO，但必须注意确保数据始终一致。

此外，如果您遇到问题， [Nios 论坛](http://www.alteraforum.com/forum/forumdisplay.php?f=37)是寻求帮助的好地方。***

# java - 如何从项目中查找未使用的 Java 类和 JSP 文件

> ID：10279479
> 
> 赞同：1
> 
> 时间：2012-04-23T11:15:33.680
> 
> 标签：java, eclipse, jsp

如何从项目中找到未使用的 Java 类和 JSP 文件？

我使用 Eclipse 和[Mercurial](http://en.wikipedia.org/wiki/Mercurial)作为源代码控制系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:41:04.720

我相信[CodePro](https://developers.google.com/java-dev-tools/codepro/doc/)会做你想做的。

如果仅在几个文件上右键单击该文件并选择“参考”，然后选择工作区或项目，这也是一种快速识别方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:36:16.800

[ProGuard](http://proguard.sourceforge.net/)将作为其“列出死代码”功能的一部分来执行此操作。[示例页面](http://proguard.sourceforge.net/index.html#manual/examples.html)向您展示了如何做到这一点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T11:40:03.507

对于项目中未使用的类，可以使用它。查看 Eclipse 如何将 Eclipse 未使用的类标记为黄色。由于它是开源的，因此很容易获得。

# ruby - 未定义的方法`build_book_reservation

> ID：10279480
> 
> 赞同：0
> 
> 时间：2012-04-23T11:15:39.197
> 
> 标签：ruby, ruby-on-rails-3, session

嗨，我只是想知道为什么会话在刷新时找不到我的预订并在其他控制器中使用它

这是我的应用程序控制器

```
 helper :all # include all helpers, all the time

     private
 def current_reservation
   @reservation ||= Reservation.find(session[:reservation_id]) if session[:reservation_id]
   #last assigned value will be returned as default.
 end

 def create_reservation_session(id)
   session[:reservation_id] = id
 end

 def destroy_reservation_session
   session[:reservation_id] = nil
 end 
```

我想在这里给我们

```
 def new
   @book_reservation = BookReservation.new
 end

def create
  @reservation = current_reservation
  @book_reservation=@reservation.build_book_reservation(params[:book_reservation])
  if @book_reservation.save
    #If success set session
    create_reservation_session(@reservation.id)
    #redirect_to root_url, :notice => "Successfully created book reservation."
  else
    render :action => 'new'
  end
 end 
```

它`undefined method`为 nil:NilClass` 错误引发 build_book_reservation'

* * *

模型/book_reservation.rb

```
 belongs_to :reservation 
```

模型/reservation.rb

```
has_one :book_reservation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:28:13.617

你从来没有参加`:reservation_id`过会议。

这意味着这`session[:reservation_id]`是`nil`并`Reservation.find(nil)`引发了您所看到的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:53:06.267

错误的原因是您从未设置会话但您尝试访问它。在您的应用程序控制器中使用

```
private
 def current_reservation
   @reservation ||= Reservation.find(session[:reservation_id]) if session[:reservation_id]
   #last assigned value will be returned as default.
 end

 def create_reservation_session(id)
   session[:reservation_id] = id
 end

 def destroy_reservation_session
   session[:reservation_id] = nil
 end 
```

在您的控制器中

```
 def new
   @book_reservation = BookReservation.new
 end

def create
  @reservation = Reservation.find(params[:reservation_id])
  if @reservation
    @book_reservation=@reservation.build_book_reservation(params[:book_reservation])
    if @book_reservation.save
      #If success set session
      create_reservation_session(@reservation.id)
      #redirect_to root_url, :notice => "Successfully created book reservation."
    else
      render :action => 'new'
    end
   else
      render :action => 'new'
   end 
```

然后，只要您需要，您就可以使用 current_reservation。

# html - 柱子上的 960gs 问题

> ID：10279483
> 
> 赞同：1
> 
> 时间：2012-04-23T11:15:43.347
> 
> 标签：html, css, grid, 960.gs

我想在 960 gs 12 col 中制作这样的页面 ![设计什么](../Images/af1c9fe76986514623c3c2e800d9cf16.png)

我写了html：

```
<div class="container_12">
    <div class="grid_6"><img src="images/x.jpg" /></div>
    <div class="grid_6"><img src="images/x.jpg" /></div>

    <div class="grid_1"><img src="images/x.jpg" /></div>
    <div class="grid_1"><img src="images/x.jpg" /></div>
    <div class="grid_1"><img src="images/x.jpg" /></div>
    <div class="grid_1"><img src="images/x.jpg" /></div>
    <div class="grid_1"><img src="images/x.jpg" /></div>
    <div class="grid_1 suffix_6"><img src="images/x.jpg" /></div>
</div> 
```

但这看起来像这样： ![显示什么](../Images/20e0aec5557901ceed9785be858bd1fd.png)

任何想法，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:02:06.197

每个网格都有一个边距并显示为内联。您需要将每组 div 放入单独的列中，并使用 alpha omega 类分别删除第一个/最后一个 div 的边距。

```
<div class="container_12">
  <div class="grid_6">
      <div class="grid_6 alpha omega"><img src="images/x.jpg" /></div>
      <div class="grid_1 alpha"><img src="images/x.jpg" /></div>
      <div class="grid_1"><img src="images/x.jpg" /></div>
      <div class="grid_1"><img src="images/x.jpg" /></div>
      <div class="grid_1"><img src="images/x.jpg" /></div>
      <div class="grid_1"><img src="images/x.jpg" /></div>
      <div class="grid_1 omega"><img src="images/x.jpg" /></div>
  </div>
  <div class="grid_6">
  <img src="images/x.jpg" />
  </div>
</div> 
```

# antlr - 忽略的下划线字母

> ID：10279486
> 
> 赞同：1
> 
> 时间：2012-04-23T11:15:48.687
> 
> 标签：antlr, antlrworks

如果我尝试在解释器中运行“___sad”以获取以下语法

```
grammar identTest;
options       

{   
    language = Java;
    output=AST;
}

goal: identifier;

fragment Letter: (('a'..'z') | ('A'..'Z'));
fragment Digit : '0' .. '9';
identifier :IDENTIFIER;

IDENTIFIER: Letter+;
WS:(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

解释器输出： ![口译员](../Images/d634e9fbecfaa250320e1268dcab441b.png) 调试器输出： ![调试器](../Images/4bfb0baee4c5b9788b8b41ee0bd33ab2.png)

解释器包含下划线字母，而调试器似乎只是忽略了它！我希望在这种情况下会出现某种异常（因为语法中只定义了“A”-“z”字母）。我的语法有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:31:52.917

不要使用解释器：它有问题。

使用调试器，您可以查看按下`Output`按钮（左下角）后解析器产生的警告/错误/异常。执行此操作时，您将看到以下内容：

```
.../__Test___input.txt line 1:0 no viable alternative at character '_'
.../__Test___input.txt line 1:1 no viable alternative at character '_'
.../__Test___input.txt line 1:2 no viable alternative at character '_' 
```

解析器只是从下划线中恢复并继续解析。

如果您不希望您的词法分析器从这种*没有可行的替代*警告中恢复，只需创建一个*通过*词法分析器规则（称为`OTHER`）并从中抛出异常：

```
grammar identTest;

options       
{   
    language = Java;
    output=AST;
}

goal       : identifier;
identifier : IDENTIFIER;

IDENTIFIER : Letter+;
WS         : (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
OTHER      : . {throw new RuntimeException("unknown char: '" + $text + "'");};

fragment Letter : (('a'..'z') | ('A'..'Z'));
fragment Digit  : '0' .. '9'; 
```

# c - x86_64 上的 memcpy 有多快

> ID：10279493
> 
> 赞同：-2
> 
> 时间：2012-04-23T11:16:34.423
> 
> 标签：c, linux, x86-64

`memcpy`使用 gcc 编译器和 Linux 在 x86_64 上的速度有多快。充其量等于`Time to transfer 1 long * Number of longs`还是比这更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:54:38.523

AFAIK，x86（32 位和 64 位）的最快副本使用 16 字节宽的数据传输，这是一个 XMM 寄存器的大小。这是英特尔优化手册中推荐的方法。但是，可以肯定的是，您必须反汇编您的系统库并查看它使用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:20:57.547

这完全取决于函数的 CRT 实现——您应该能够看到编译器的源代码并 100% 确定。

通常，它被优化为复制对机器有效的块，并根据开始/结束地址的对齐情况执行适当的边缘情况处理。鉴于需要处理任何长度和对齐方式，它不太可能比纯`long`副本更快（该语句以您的平台为模再次记住），但减速也不太可能对您的实际应用程序产生显着影响。

# iphone - wait_fences：未能收到回复：CLLocation 中的 10004003

> ID：10279496
> 
> 赞同：1
> 
> 时间：2012-04-23T11:16:45.037
> 
> 标签：iphone, objective-c, location, cllocationmanager, cllocation

```
locationManager = [[CLLocationManager alloc] init];

locationManager.delegate = self;

locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move

locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m

[locationManager startUpdatingHeading]; 
```

当我在 viewWillAppear 中使用此代码时，我有时会遇到此警告，因此没有调用的委托方法

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:39:46.723

我认为您使用以下代码嵌入您的代码...

```
locationManager = [[CLLocationManager alloc] init];

locationManager.delegate = self;

locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move

locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m

[locationManager startUpdatingHeading]; 
```

您在分配 locationManager 对象后首先定义`startUpdatingHeading`方法....所以可能是关于此错误的问题....如果再次出现此问题，请留下评论....希望这对您有所帮助.... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:46:06.107

您的`-viewWillAppear:`方法中的某些内容比显示您的视图的动画花费的时间更多。如果是这样，`CLLocationManager`也许您可​​以从后台线程或运行循环的下一轮启动它。

```
dispatch_queue_t q = /* bg queue or main queue */
dispatch_async(q, ^{
    /* your CLLocationManager code */
}); 
```

# c# - 如何在 C# XNA 中创建 Wait() 方法？

> ID：10279499
> 
> 赞同：3
> 
> 时间：2012-04-23T11:17:31.520
> 
> 标签：c#, xna, boolean, wait

我正在尝试在我的游戏中添加“吸引”模式，为此我需要告诉角色在移动之前等待（这样我就可以在屏幕上显示文本）。我决定创建一个可以发送以下参数的 Wait 方法是合适的。

```
 public bool Wait(int waitTime, GameTime gameTime)
    {
        // Wait Code
    } 
```

该代码将存储它被调用的时间，以毫秒为单位等待指定的时间，然后在时间过去后返回 true。

但是我不知道如何做到这一点，以便 gameTime 仅在第一次调用 Wait 时存储（或者 bool 永远不会标记为真）。我以为我可以制作内部布尔值来处理标记，但我不确定如何以动态/可重用的方式对其进行编程？

非常感谢任何帮助，并对这篇文章感到抱歉！<3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:34:19.733

我已经解决了一个类似的问题。这是片段：

```
private static readonly TimeSpan intervalBetweenAttack1 = TimeSpan.FromMilliseconds(3000); 
private TimeSpan lastTimeAttack; 
```

在可更新对象的 Update() 内部

```
public override void Update(GameTime gameTime)
{
      // If enough time has passed attack
      if (lastTimeAttack + intervalBetweenAttack < gameTime.TotalGameTime)
      {
           Attack();
           lastTimeAttack = gameTime.TotalGameTime;
      }
} 
```

这是 AI 的简化代码。它每3秒攻击一次。如果你只想攻击一个，你可以添加 bool hasAttacked = false; 然后只需在 Update() 中检查它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:17:14.057

您可以创建一个计时器类。你会在哪里做类似 Timer t = new Timer(3000f); //接受一个值来表示计时器运行多长时间

触发器：

```
t.Start(); 
```

更新方法：

```
if(!t.IsActive)
{
    //Player updates here
}
else
    t.Update(gameTime); 
```

等待方法：

```
public void Wait()
{
    if(t.IsActive)//set by the .start method
    {
        if(t.isComplete)
        {
             //do some stuff
             t.Stop();
        }
        else
        {
            //we're still timing, nothing to do here
        }
    }
} 
```

这非常粗糙并且是凭记忆编写的，因此不完全确定是否会对您有所帮助。

因此，在计时器类内部，它在更新期间递增，如果跟踪浮点数（类似于 currentTime += gameTime.elapsedgametime.milliseconds）大于存储的总时间，则将计时器标记为 IsComplete = true，然后当它为真时停止计时器运行。

因此，每当计时器运行时，都不会发生运动

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T12:20:16.640

看看 Thread.Sleep，[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep%28v=vs.100%29.aspx)

# c++ - QMainWindow 正在处理应该被 QDialog 捕获的事件

> ID：10279500
> 
> 赞同：1
> 
> 时间：2012-04-23T11:17:41.240
> 
> 标签：c++, qt

我有一个安装了事件过滤器的 QMainWindow，它打开了一个 QDialog。主窗口处理 Enter 键的按键释放。但是，当我在 QDialog 打开并处于焦点时按 Enter 键时，主窗口也会捕获此事件。

我怎样才能防止这种情况发生？我试图在 QDialog 中安装一个事件过滤器，以重新实现 keyReleaseEvent 和 keyPressEvent 函数，更改父级（当前为 0），但似乎没有任何帮助......

请注意，当我更改 QMainWindow 的事件过滤器以便它处理按键而不是按键释放时，QDialog 工作正常，但随后我得到了我试图避免的其他错误......

```
bool Window::eventFilter(QObject *, QEvent *event) {
 if (type == QEvent::KeyRelease) {
   QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);

   switch(keyEvent->key()) {
   case Qt::Key_Enter:
     // do something here
     break;
   default:
     break;
   }
}

Dialog::Dialog(unsigned int num, QWidget *parent)
: QDialog(parent), num(_num)
{
   ui.setupUi(this);
   ui.btnOK->setEnabled(false);

   connect(ui.btnOK, SIGNAL(clicked()), this, SLOT(accept()));
   connect(ui.btnCancel, SIGNAL(clicked()), this, SLOT(reject()));

   installEventFilter(this);
}

bool Dialog::eventFilter(QObject *, QEvent *event) {
 return true;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:12:37.073

尝试 webclectic 的第一种方法，但替换`e->ignore()`为`e->accept()`, 因为`ignore()`的行为与您想要实现的相反。

```
void MyDialog::keyReleaseEvent(QKeyEvent* e)
{
    QDialog::keyReleaseEvent(e);
    if (e->key() == Qt::Key_Enter)
        e->accept();
} 
```

或者也许你应该尝试模态对话框？

**更新：**如果我们希望对话框响应 Enter 键释放，我们必须始终调用 QDialog 的实现。

# java - 在哪里可以找到 ConnectivityMonitor()？

> ID：10279501
> 
> 赞同：0
> 
> 时间：2012-04-23T11:17:42.230
> 
> 标签：java, jakarta-ee, java-me, jxta

我要感谢大家耐心解答我的奇怪问题。

我想知道在哪里可以找到 JXTA 2.6 中的 ConnectivityMonitor() 方法？我附上一张图片，你可以得到一个想法。

. . . . . ![在此处输入图像描述](../Images/28e9c42967a8237aa1b5c06767aa9952.png)

==============================图2=================== =

![在此处输入图像描述](../Images/aeccf2844b1f1b3ac1f91dec69b0de8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:45:09.560

如果它们是 JXTA 的教程之一，那么您应该已经在与 EDGE_A 类相同的包中获得了该类。

请参阅：[一个教程](http://ppcast.googlecode.com/svn-history/r23/branches/jxse-tutorials-2.6/src/main/java/tutorial/connectivitymonitoring/)作为示例或从[JXSE 教程下载教程](http://jxse.kenai.com/Tutorials/Tutorials.html)并查看连接示例。

# android - android中的SQL错误

> ID：10279502
> 
> 赞同：0
> 
> 时间：2012-04-23T11:17:43.773
> 
> 标签：android, sql

我目前正在尝试从我的 android 数据库中删除一行数据，但收到一个不寻常的错误。该行在名称为 Timetable 的表中如下所示

_ID =（自动递增），MODULE = CM111，DAY = MONDAY，STARTTIME = 13:00，DURATION = 4 小时，TYPEOFSESSION = LAB，ROOM = PBS2

我正在使用此代码进行删除

```
private int removeEvent (String modulecodepicker){
    try{
    SQLiteDatabase db = events.getWritableDatabase();
    return db.delete(TABLE_NAME, MODULE + " = " + modulecodepicker, null);
    }catch(SQLiteException ex){
        Toast toast = Toast.makeText(this, "Broken", 10);
        toast.show();
    }
    return 0;
} 
```

这将返回此 SQL 错误

android.database.sqlite.SQLiteException：没有这样的列：CM111：，编译时：DELETE FROM timetable WHERE module = CM111

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:22:57.973

你可以为上面创建存储过程，它会更安全，更容易，

而使用内联也容易发生 sql 注入

请参考在 sql lite 中编写 procs

[http://chriswolf.heroku.com/articles/2011/01/26/adding-stored-procedures-to-sqlite](http://chriswolf.heroku.com/articles/2011/01/26/adding-stored-procedures-to-sqlite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:37:00.160

`SELECT 'CM111' from timetable`首先用一个语句交叉检查它。如果它不起作用，那么很明显你的 DELETE 不起作用。

# php - 在 PHP 中发布文本框数组

> ID：10279507
> 
> 赞同：4
> 
> 时间：2012-04-23T11:18:09.760
> 
> 标签：php, arrays, post

我有要发布的文本框值。我如何把它放在 PHP 数组中。

**编辑**

```
---------------------------
    <input type="text" name="ItemName[1][2]" >
        <input type="text" name="ItemName[1][3]" >
        <input type="text" name="ItemName[1][4]" >
------------------------------
$ItemNamesArray = $_POST[] ..... ????? What do I do in this step??? 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:21:10.853

```
<input type="text" name="array[]" />
<input type="text" name="array[]" />
<input type="text" name="array[]" />
<input type="text" name="array[]" />

print_r( $_POST['array'] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:36:54.693

```
<input type="text" name="ItemName[1][2]" >
<input type="text" name="ItemName[1][3]" >
<input type="text" name="ItemName[1][4]" >

$ItemNamesArray = $_POST['ItemName'][1];

foreach($ItemNamesArray as $item){
  var_dump($item); //this will show you the value of each item

 // do whatever you want to do (insert into a database, send an email, etc)
} 
```

但我不会为此使用二维数组，除非 ItemName 在同一表单上用于其他目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-18T05:13:54.817

```
<form method="post" name="myform">
<input type="text" name="array[]" Value="101"/>
<input type="text" name="array[]" Value="102"/>
<input type="text" name="array[]" Value="103"/>
<input type="text" name="array[]" Value="104"/>
<input type="submit" name="submit" Value="submit"/>
</form>

if(isset($_POST['submit'])){

foreach($_POST['array'] as $myarray) {

    echo $myarray.'<br>';

} 
```

# 输出

```
101
102
103
104 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T19:07:07.183

尝试 ：

```
<input type="text" name="ItemName[]" >
<input type="text" name="ItemName[]" >
<input type="text" name="ItemName[]" > 
```

并使用插入 SQL 输入数据库：

```
// EXECUTE SQL INDEXED TEXTBOX
foreach ($_POST['itemName'] as $item)
{

$query  = "INSERT INTO  tableName (field1)";
$query .= " VALUES ('" .  $item . "')";

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-09T09:25:33.163

Here is what I have done to show you what happen when you submit :

I completed your script to show the `$_POST` var (what you click on submit) like so :

```
<form method="POST">
  <input type="text" name="ItemName[1][2]" value="a">
  <input type="text" name="ItemName[1][3]" value="b">
  <input type="text" name="ItemName[1][4]" value="c">
  <input type="submit">
</form>

<?php
if($_POST) {
        echo "<pre>";
        print_r($_POST);
        echo "</pre>";
}
?> 
```

Here is the output when I click on submit :

```
Array
(
    [ItemName] => Array
        (
            [1] => Array
                (
                    [2] => a
                    [3] => b
                    [4] => c
                )
        )
) 
```

It show you that you have your array of values in `$_POST["ItemName"][1]` so you can do :

```
$myArrayOfValues = $_POST["ItemName"][1]; 
```

I hope this will help you.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T11:46:30.063

尝试这个

```
$_REQUEST['ItemName[1][2]'];
$_REQUEST['ItemName[1][3]'];
$_REQUEST['ItemName[1][4]']; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T11:20:57.327

您的 POST 输入位于 $_POST 数组中。要显示它 - `var_dump($_POST)`。访问其项目 - 例如名为“文本框” - `var_dump($_POST['textbox']`;

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-23T12:10:21.023

$_POST 或 $_GET 是用户可以与 Web 表单交互的方式的数组。在这种情况下，我有一个示例表格：

```
<form method="POST" action="array.php">

 <input name="a" type="text" value="1" />
 <input name="b" type="text" value="2" />
 <input type="submit" value="Sum" /> 
```

行动形式array.php：

```
<?php   
    $a = $_POST['a'];
    $b = $_POST['b'];
    echo $a + $b;
?> 
```

$_POST['a'],$_POST['b'] 是文本框的变量值，你可以在 PHP 代码中使用来评估。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-06-06T02:26:14.080

尝试这个

形式：

```
<input type="text" name="ItemName[]" value=""> 
```

PHP 脚本：

```
$ItemName = POST['ItemName'];

for ($i=0; $i<sizeof($ItemName); $i++){

   $sq = mysql_query("SELECT * FROM `table` WHERE `ItemName`='$ItemName[$i]'");

} 
```

# unix - 如何发布 *nix 项目？

> ID：10279508
> 
> 赞同：12
> 
> 时间：2012-04-23T11:18:09.963
> 
> 标签：unix, haskell, installation

因此，我编写了一个简洁的小程序，可以分析日语文本并为用户提供有关其中[汉字](http://en.wikipedia.org/wiki/Kanji)使用情况的各种统计数据，我想将这个程序发布给全世界。问题是，我不知道如何创建“发布”。

我意识到 *nix 系统经常将可执行文件（或符号链接）放在 /usr/bin 之类的地方，并且构建脚本通常会自动将它们放在那里，但事实证明我去用 Haskell 编写了这个东西。

> 然后就用阴谋集团！

...我听到你说。好吧，我会，除了我的程序有大量的数据文件可以读取，当然程序需要知道这些文件在哪里。通过使用 cabal，可执行文件不会被扔到一些奇怪的项目文件路径中吗：

> /usr/share/haskell/cabal/morecabal-1.0.4/myproject-1.3.4.1.a/thisisridiculous/

目前我从它的源目录运行可执行文件，它正在“./data”中寻找数据文件。是否有安装路径的典型格式，以便我可以提前告诉我的程序在源中查找数据的位置？

我的最终目标是把它变成一个 Arch Linux 包。谁能帮我开始？

对于好奇的人，[git repo 在这里](https://github.com/fosskers/nanq)。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T11:30:59.637

在 Cabal 项目中引用数据文件的可移植方式是在文件的`data-files`属性中命名它们`.cabal`。

Cabal 将生成一个名为的模块，该模块`Paths_packagename`定义了一个函数

```
getDataFileName :: FilePath -> IO FilePath 
```

您的代码可以使用它来确定数据文件的安装位置。

请参阅：[从包代码访问数据文件](http://www.haskell.org/cabal/users-guide/developing-packages.html#accessing-data-files-from-package-code)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T11:35:34.413

看看现有的 Haskell 项目，例如[Gitit是如何](http://gitit.net/)[为 Arch linux](http://aur.archlinux.org/packages.php?ID=21349)打包的。特别是 PKGBUILD。

您还可以下载[gitit tarball](http://hackage.haskell.org/packages/archive/gitit/0.7.3.8/gitit-0.7.3.8.tar.gz)并查看如何使用文件`data-files:`中的指令`gitit.cabal`。

我没有读过 Haskell，但是根据我对源代码的了解，该文件`Paths_gigit.hs`（可以在[此处](http://hackage.haskell.org/packages/archive/gitit/0.7.3.4/doc/html/src/Paths_gitit.html)找到。）是由 cabal 生成的，因此您只需要担心相对路径。然后只需导入它并使用该`getDataFileName`功能即可。

### 拱门包装：

*   维基[指南](https://wiki.archlinux.org/index.php/Creating_Packages)
*   PKGBUILD[文件描述](https://wiki.archlinux.org/index.php/PKGBUILD)
*   makepkg[指南](https://wiki.archlinux.org/index.php/Makepkg#Usage)

### 阴谋集团的包装：

*   Haskell 包装[维基书](http://en.wikibooks.org/wiki/Haskell/Packaging)
*   [阴谋集团用户](http://www.haskell.org/cabal/users-guide/)指南

### 两者的包装：

*   Archlinux wiki 上的Haskell 包[指南](https://wiki.archlinux.org/index.php/Haskell_package_guidelines)

# android - Android TextEdit 单词建议列表

> ID：10279511
> 
> 赞同：0
> 
> 时间：2012-04-23T11:18:15.123
> 
> 标签：android, android-layout, android-widget, android-listview, android-edittext

我正在制作一个手势检测应用程序，我在该应用程序上键入并检测我的库中的单词，我想使用单词建议列表。从我的数据库中获取单词并将它们显示在临时区域中，我可以从中选择我想要的单词。我附上一张示例图片和帖子。请在这方面帮助我。![在此处输入图像描述](../Images/859fe072d8127c37b9276035afa2df79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:26:40.877

尝试使用[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:22:53.310

我认为修改你的 textview InputType 会达到你想要的。

```
<TextView 
android:inputType="textAutoComplete" /> 
```

更多信息： http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

# java - android排序数组

> ID：10279512
> 
> 赞同：0
> 
> 时间：2012-04-23T11:18:27.523
> 
> 标签：java, sorting

我在排序数组时遇到了一些问题，我希望按天对数组进行排序，可以是星期一、星期二、星期三、星期四或星期五。我有一个显示数组中所有内容的类，但我想在上述日期之前订购它，我该怎么做？

我试过使用 collections.sort 和 Arrays.sort 但似乎没有给我想要的效果，有什么想法吗？

```
public void sortArray() {

} 
```

04-23 12:55:49.010: E/AndroidRuntime(281): 致命异常: main 04-23 12:55:49.010: E/AndroidRuntime(281): java.lang.RuntimeException: 无法启动活动 ComponentInfo{org. assignment.timetable/org.assignment.timetable.Timetable}: java.lang.NullPointerException 04-23 12:55:49.010: E/AndroidRuntime(281): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 04 -23 12:55:49.010: E/AndroidRuntime(281): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 android.app .ActivityThread.access$2300(ActivityThread.java:125) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 04-23 12: 55:49.010: E/AndroidRuntime(281): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-23 12:55:49.010:E/AndroidRuntime(281): 在 android.os.Looper.loop(Looper.java:123) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 android.app.ActivityThread.main(ActivityThread.java :4627) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-23 12:55:49.010: E/AndroidRuntime(281): 在java.lang.reflect.Method.invoke(Method.java:521) 04-23 12:55:49.010: E/AndroidRuntime(281): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java :868) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04-23 12:55:49.010: E/AndroidRuntime (281): 在 dalvik.system.NativeStart.main(Native Method) 04-23 12:55:49.010: E/AndroidRuntime(281): 由: java.lang.NullPointerException 04-23 12:55:49.010: E /AndroidRuntime(281)：在 org.assignment.timetable。Timetable$MyComparator.compare(Timetable.java:51) 04-23 12:55:49.010: E/AndroidRuntime(281): at org.assignment.timetable.Timetable$MyComparator.compare(Timetable.java:1) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 java.util.TimSort.countRunAndMakeAscending(TimSort.java:320) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 java.util.TimSort .sort(TimSort.java:185) 04-23 12:55:49.010: E/AndroidRuntime(281): at java.util.TimSort.sort(TimSort.java:169) 04-23 12:55:49.010: E /AndroidRuntime(281): 在 java.util.Arrays.sort(Arrays.java:1907) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 java.util.Collections.sort(Collections.java: 1972) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 org.assignment.timetable.Timetable.sortModules(Timetable.java:71) 04-23 12:55:49.010: E/AndroidRuntime(281) : 在 org.assignment.timetable.Timetable.onCreate(Timetable.java:40) 04-23 12:55:49.010: E/AndroidRuntime(281): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 04-23 12:55:49.010: E/AndroidRuntime(281): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 04-23 12:55:49.010: E/AndroidRuntime(281): ... 11 更多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:40:44.783

这是一个例子：

```
 //Assuming that the Module-class has the day stored as a String named "day"
static class MyComparator implements Comparator<Module>{
    private final static HashMap<String, Integer> order = getMap();

    @Override
    public int compare(Module lhs, Module rhs){
        int leftOrder = order.get(lhs.day.toLowerCase());
        int rightOrder = order.get(rhs.day.toLowerCase());
        return leftOrder - rightOrder;
    }

    private final static HashMap<String, Integer> getMap(){
        HashMap<String, Integer> res = new HashMap<String, Integer>();
        res.put("monday",0);
        res.put("tuesday",1);
        res.put("wednesday",2);
        res.put("thursday",3);
        res.put("friday",4);

        return res;
    }
} 
```

当你创建了你的数组（任何你想要的方式）时，你可以像这样对它进行排序：

```
Arrays.sort(myArray, new MyComparator()); 
```

或者，如果您有一个清单：

```
Collections.sort(myList, new MyComparator()); 
```

现在将对数组中的项目进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:35:48.337

```
public WeekComparator implements Comparator {
private String[] weeksdays = {"monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"};
public int compare(Object o1, Object o2) {
  if(!(o1 instanceof String && o2 instanceof String)) {
    throw new ClassCastException();
  }
  int day1 = indexOfDay((String)o1);
  int day2 = indexOfDay((String)o2);
  if(day1==day2) return 0;
  return (day1>day2 ? 1 : -1);
}

private int indexOfDay(String s) {
  for(int i = 0 ; i < weekdays.length;i++) {
    if(weekdays[i].equalsIgnoreCase(s)) return i;
  return 10;
} 
```

}

我没有对此进行测试，但应该可以工作..在纸上（嗯...屏幕）

# php - 产品未添加到我的购物车

> ID：10279516
> 
> 赞同：1
> 
> 时间：2012-04-23T11:18:56.767
> 
> 标签：php, html, e-commerce, shopping-cart

我想知道是否有人可以帮助我。我遇到了产品未添加到我的购物车的问题。我想知道是否有人可以帮助我或发现我的代码中的任何错误。感谢您的帮助，您可以对大量代码感到抱歉。

**汽车价格（在我的数据库中显示我所有的汽车）**

```
<head>
<title>Car Prices</title>

<!--main.css stylesheet involves the positioning of the website and effects that have been applied to the website-->
<!--slider.css stylsheet involves the positioning the size and the time frame of the slideshow that have been created-->
<!--menu.css stylesheet involves the form of navigation and the styles that have been applied to that horizontal navigation bar-->

<link href="css/main2.css" rel="stylesheet" type="text/css" />
<link href="css/slider.css" rel="stylesheet" type="text/css" />
<link href="css/menu.css" rel="stylesheet" type="text/css" />

</head>

<body>

<span class = "title1">Prestige Supercars Car Price</span>

<div id = "header1">

<!-- as i wanted the button to be wrapped with the text on top i had to wrap the text over the button-->

<?php

require "dbc.php";

$query = "SELECT * from cars";

$result = mysql_query ($query);

$rCount = mysql_num_rows($result);

$aresult = array();

$aresult = mysql_fetch_array($result);

while($row = mysql_fetch_array($result)){

$CID = $row ["id"];

echo'<div id="content7">
     <div class="car-image"><a href="carinformation.php?id='.$row["id"]. '"><img width="500px" height="200px" src="data:image/jpeg;base64,'. base64_encode($row["picture"]). '" />';
echo '<div id="title2">'.$row ["Car_Name"];
echo '<br />Price: &pound'.$row ["Price"];
echo '</div>';
     '<input name="viewdetails" type="submit" value="More" onClick="">';
     }

?> 
```

**汽车信息（指定一辆车）**

```
<?php

$carid = $_GET['id'];
require_once "dbc.php";

$result = mysql_query('SELECT * FROM cars WHERE id = "'.$carid.'"');
$rCount = mysql_num_rows($result);
?>
<?php
if($row = mysql_fetch_array($result)){
do{
     $CID = $row ["id"];
    echo '<div id="content8"><form name="userForm" method="post" action="cart.php?cid='.$row['id'].'">';
    echo '<div class="car-image"><a href="carinformation.php?id='.$row["id"]. '"><img width="500px" height="200px" src="data:image/jpeg;base64,'. base64_encode($row["picture"]). '" />';
    echo '<div id="title2">'.$row ["Car_Name"];
    echo '<br />Quantity: '.$row ["Quantity"];
    echo '<br />Price: &pound'.$row ["Price"];
    echo '<br/><input name="addCart" type="submit" value="ADD TO CART" onClick="">';

    echo '</form></div>';
    echo '<br/><br/><br/><br/><br/>';

    }while($row = mysql_fetch_array($result));
    }else{print"Sorry, no records where found!";}
?>
</body>
</html> 
```

**大车**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<!-- Presige Supercars -->

<head>
<title>Prestige Cars Cart</title>
</head>

<?php

//if product exists in command line, add it to cart
    @ $cid = $_GET['cid'];  
    //checks if command line has product added
    if($cid){
        //checks if cart is empty & creates it
        if(!isset($_SESSION['cart'])){
            $_SESSION['cart'] = array();
            $_SESSION['items'] = 0;
            $_SESSION['total_price'] = '0.00';
        }
        //cart array contains car id & quantity
        if (isset($_SESSION['cart'] [$cid] ))
            $_SESSION['cart'] [$cid]++;
        else 
            $_SESSION['cart'] [$cid] = 1;
    }

    //checks if command line has product updated
    if(isset($_POST['update'])){   
        foreach ($_SESSION['cart'] as $carid => $qty){
            //value from text box name
            if($_POST[$carid]<='0')
                unset($_SESSION['cart'] [$carid]);
            else 
                $_SESSION['cart'] [$carid] = $_POST[$carid];
        }
    }
?>

<?php
session_start();
?>
<?php
    //displays car
    if  ($_SESSION['cart']){
        //echo '<h3>Cart Contents</h3>';
        echo '<div id="content7">';
        echo '<table width="600" border="0" cellpadding=1 cellspacing=3>';
        echo '<form name="userForm" method="post" action="cart.php">';
        echo '<tr><th width="300" scope="col" align="center">Title</th>';
        echo '<th width="100" align="right">Quantity</th>';
        echo '<th width="150" align="right">Price</th></tr>';
        $_SESSION['total_price'] = '0.00';
        $_SESSION['items'] = 0;

        //place lines of products in page
            foreach ($_SESSION['cart'] as $carid => $qty){
            //Connect to your Database Server with your credentials
            require "dbc.php";

            $query = 'SELECT * FROM cars WHERE id = "'.$carid.'"';
            $result = mysql_query($query);
            $catNo = mysql_num_rows($result);
            $aresult = array();

            $product = mysql_fetch_array($result);
            $tprice = $qty*$product['Price'];
            echo '<tr><td align = "left"><span>';
            echo $product['Car_Name'];
            echo '</span></td>';
            echo '<td align = "right"><span>';
            //name of textbox=carid and value=qty
            echo '<input name="'.$carid.'" type="text" size="3" maxlength="3" value="'.$qty.'">';
            echo '</span></td>';
            echo '<td align = "right"><span>&pound;';
            echo $tprice;
            echo '</span></td></tr>';

            $_SESSION['items'] += $qty;
            $_SESSION['total_price'] += $tprice;

            //close the connection
            mysql_close($conn);
        }
        echo '<input type="hidden" name="update" value=true>';
        echo '<tr bgcolor="yellow"><td align="center">';
        echo '<input type="submit" name="Submit" value="Update Cart"></td>';
        echo '<td align = "right"><b>Total Qty: '.$_SESSION['items'].'</b></td>';
        echo '<td align="right"><b>Total: &pound;'.$_SESSION['total_price'].'</b></td>';
        echo '</tr>';
        echo '</table>';
        echo '</form>';
        echo '<br/><br/>';
        echo '<form action="pay.php" method="post">';
        echo '<input type="submit"  name="CHECKOUT" value="CHECKOUT"></form>';

        //echo '</div>';

    }else{  //if no product in cart
        echo '<div id="content7">';
        echo '<h3><span>You currently have no products in Shopping Cart.</span></h3>';
        echo '<p class="p1"><span></span></p>';
        //echo '</div>';
    }
    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:28:28.753

在您的 cart.php 中，您询问是否`$_SESSION['cart']`存在，但您`session_start()`稍后会调用几行代码。`session_start();`在“添加到购物车”功能之前写下。

**编辑2：**

```
//CHANGE action and method attribute
    echo '<div id="content8"><form name="userForm'.$row["id"].'" method="get" action="cart.php">';
    echo '<div class="car-image"><a href="carinformation.php?id='.$row["id"]. '"><img width="500px" height="200px" src="data:image/jpeg;base64,'. base64_encode($row["picture"]). '" />'; 
    echo '<div id="title2">'.$row ["Car_Name"]; 
    echo '<br />Quantity: '.$row ["Quantity"]; 
    echo '<br />Price: &pound'.$row ["Price"];
//CHANGE add this line --v
    echo '<input type="hidden" name="cid" value="'.$row['id'].'" />';
    echo '<br/><input name="addCart" type="submit" value="ADD TO CART"">'; 
```

**编辑：**

```
<head> 
<title>Prestige Cars Cart</title> 
</head> 

<?php 

//==========================ADD SESSION_START() HERE==========================
session_start();

//if product exists in command line, add it to cart 
    @ $cid = $_GET['cid'];   
    //checks if command line has product added 
    if($cid){ 
        //checks if cart is empty & creates it 
        if(!isset($_SESSION['cart'])){ 
            $_SESSION['cart'] = array(); 
            $_SESSION['items'] = 0; 
            $_SESSION['total_price'] = '0.00'; 
        } 
        //cart array contains car id & quantity 
        if (isset($_SESSION['cart'] [$cid] )) 
            $_SESSION['cart'] [$cid]++; 
        else  
            $_SESSION['cart'] [$cid] = 1; 
    } 

    //checks if command line has product updated 
    if(isset($_POST['update'])){    
        foreach ($_SESSION['cart'] as $carid => $qty){ 
            //value from text box name 
            if($_POST[$carid]<='0') 
                unset($_SESSION['cart'] [$carid]); 
            else  
                $_SESSION['cart'] [$carid] = $_POST[$carid]; 
        } 
    } 
?> 

<?php 
//==========================REMOVE SESSION_START() HERE==========================
?> 

<?php 
    //displays car 
    if  ($_SESSION['cart']){ 
..... 
```

# macos - OSX 导出的环境变量未在子进程中继承

> ID：10279519
> 
> 赞同：2
> 
> 时间：2012-04-23T11:18:57.623
> 
> 标签：macos, bash, variables, export, environment

我在雪豹上遇到了非常奇怪的问题。在我的终端中，我编写了两个脚本：

第一的：

```
#script-1.sh
export MY_VAR="This is my variable" 
```

第二个脚本：

```
# script-2.sh, having +x permission
#!/bin/bash
echo $MY_VAR 
```

在终端中，如果我获取 script-1，然后将 script-2 作为子进程调用，则不会显示输出：

```
$> source script-1.sh
$> echo $MY_VAR
This is my variable
$> . script-2.sh
This is my variable
$> ./script-2.sh

$> 
```

知道这里有什么问题吗？我使用 Cygwin 在 Windows 上尝试了相同的场景，并且它按预期工作 - 在 OSX 上，子进程似乎根本不知道`$MY_VAR`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:23:56.097

你确定你没有`script-1.sh`在子进程中运行吗？我在 10.6.8 和 10.7.3 中尝试了您的示例，它可以正常工作。命令`source script-1.sh`与相同`. script-1.sh`，它在相同的上下文中运行脚本。导出的变量是环境变量，它们总是被复制到子进程中。

`export`只有当我从 script-1.sh 文件中 省略时，我才能重现与您相同的输出。

# api - 从 Zend 休息控制器获取参数处理它并将数据返回给控制器

> ID：10279527
> 
> 赞同：1
> 
> 时间：2012-04-23T11:19:37.203
> 
> 标签：api, zend-framework, rest, frameworks, controllers

我正在研究一个宁静的 zend-API 框架工作。问题是，当发布请求时，我不知道如何将数据从控制器获取到单独的类中进行处理并将处理后的输出返回给控制器。即下面实现putAction函数的最佳方式

```
public function putAction()
    {     
        $resource = $this->_getParam('resource');
        $this->view->resource = $resource;
        //$requests = $this->getRequest();

        switch (true) {
            case (strstr($resource, 'account')):
               $response = $this -> do_post_request($requests);
               $resource = "You are accessing account";
                break;
            case (strstr($resource, 'property')):
                           $response = $this -> do_post_request($requests);
               $resource = "You are accessing  property";
                break;
        case (strstr($resource, 'autos')):
                           $response = $this -> do_post_request($requests);
               $resource = "You are accessing  autos";
                break;
            default:
                 $resource = "The specified resource is not available please check the api manual for available resources";
                break;
        }
        $this->view->message = $response;
        $this->_response->ok(); 
    } 
```

在其他类中的其他函数处理后收集响应。如果我要使用： $response = $this -> do_post_request($requests); 其他类的结构将如何让它们处理请求并产生响应

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:25:19.497

标准做法是为每个资源设置一个单独的控制器。假设您有一个名为 api 的模块，其命名空间为“Api_”，您已在 application.ini 文件中设置，如下所示：

```
autoloadernamespaces = "Api_" 
```

然后，您的 api 模块文件夹中应该有 3 个控制器，如下所示：

```
class Api_AccountController extends Zend_Rest_Controller {
    public function init()
    {
    }
    public function getAction()
    {
    }
    public function postAction()
    {
    }
    public function putAction()
    {
    }
    public function deleteAction()
    {
    }
} 
```

其他的显然是Api_AutoController、Api_PropertyController。然后，您必须告诉 Zend 使用哪个模块来处理 Rest 请求。在您的 application.ini 文件中：

```
routes.api.type = Zend_Rest_Route
routes.api.defaults.module = api
routes.api.defaults.controller = api
routes.api.api = auto,account,property 
```

Zend 现在将自动响应 GET [http://yourapplication.com/auto/:id](http://yourapplication.com/auto/:id)之类的请求 ，其中 :id 是汽车的唯一标识符。这不是 Rails，因此您当然要负责在 Api_AutoContoller 的 getAction() 方法中编写代码来查询数据库并返回有关 id 的 auto 信息：id 等。如果您需要将附加参数传递给其中一个路线，您可以执行以下操作之一：

(1) 明确 id 参数：[ApplicationURL]/auto/id/123/color/blue (2) 在请求正文中包含其他参数，或附加到 URL：[ApplicationURL]/auto/123?color=蓝色的

注意：您不必将所有这些都推到一个单独的模块中。如果您的应用程序小而简单，则为 Api 使用单独的模块可能没有意义。但这是我在工作项目中成功使用的设置。

# javascript - 如何在 HTML 文件中分配图像

> ID：10279529
> 
> 赞同：0
> 
> 时间：2012-04-23T11:19:41.103
> 
> 标签：javascript, jquery, html, css

我正在使用以下方式在灯箱中打开图像，但它会打开选​​择的图像我希望当我单击任何图像时它应该打开另一个图像如何做到这一点

```
<script type="text/javascript" >
    $(document).ready(function(){
        $(".linkbutton").click(function(){
            var address= $(this).attr("src");
            $("#popup").fadeIn("slow");
            $("#lightbox").attr("src",address);
        });
        $("#close").click(function(){
            $("#popup").fadeOut("fast");
        });
    });
</script> 
```

跟随身体

```
<div>
    <img src="image/smallicon_2.png" class="linkbutton">
</div> 

<div id="popup">
    <div id="center">
        <img id="lightbox" src="image/popup_page_1.png" >
        <img id="close" src="images/close.png" alt="close" >
    </div>  <!-- #center --> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:24:05.023

在 image 元素中添加一个属性以引用新图像：

```
<img src="image/smallicon_2.png" class="linkbutton" data-light="image/bigimage_2.png" /> 
```

然后替换：

```
var address= $(this).attr("src"); 
```

和：

```
var address= $(this).attr("data-light"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:22:14.427

更改确定图像src的行

```
var address= $(this).attr("src"); 
```

所以它使用你想要的图像的 src 。

# c# - ExceptionFilter 不处理异常

> ID：10279531
> 
> 赞同：0
> 
> 时间：2012-04-23T11:19:53.147
> 
> 标签：c#, asp.net-mvc-3

我在 MVC 3 应用程序中创建了自定义异常处理程序，不幸的是，如果抛出异常，它永远不会被命中。我错过了什么吗？

自定义异常过滤器

```
public class ExceptionFilter : IExceptionFilter
{
        public void OnException(ExceptionContext filterContext)
        {
         //Never executed
        }
} 
```

在 Global.asax.cx 中注册过滤器

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new ExceptionFilter()); //must be before HandleErrorAttribute
        filters.Add(new HandleErrorAttribute());
    } 
```

网页配置

```
<customErrors mode="RemoteOnly" defaultRedirect="/error/default">
  <error statusCode="404" redirect="/error/pagenotfound" />
</customErrors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:50:54.713

If you are testing by navigating to a missing page, what really happens is it tries to resolve the controller and you get an unhandled exception that throws a 500\. Add a and you should be able to trap the other errors as well.

# java - 从java中的另一个类访问静态变量

> ID：10279553
> 
> 赞同：5
> 
> 时间：2012-04-23T11:21:13.670
> 
> 标签：java, class, static, public

我在多线程服务器中将队列实现为链表。我想从另一个班级访问这个队列。两个类都在同一个包中。我尝试将此队列设为公共静态并通过 getter 访问它，但没有成功有人可以告诉我确切的问题是什么。

这是我的代码：队列声明：

```
public static Queue<Request> q=new ConcurrentLinkedQueue<Request>();

public static void setQ(Queue<Request> q) {
        Connection.q = q;
    }

    public static Queue<Request> getQ() {
        return q;
    } 
```

访问队列：

```
Queue<Request> queue=new ConcurrentLinkedQueue<Request>(); 
queue=Connection.getQ(); 
```

在连接线程中向队列添加值

```
q.add(r); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-23T11:24:22.983

您可以`public static`使用以下符号直接访问另一个类的成员`ClassName.memberName`：

```
public class Foo {
    public static String bar = "hi there";
}

public class Thing {
    public static void main(String[] args) {
        System.out.println(Foo.bar); // "hi there"
   }
} 
```

`public static`数据成员通常不是一个好主意（除非他们有`final`），但如果你需要一个，那就是你的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:40:17.237

如果直接访问，或者使用静态 getter 方法，您应该能够访问...

如果这是您的 Queue 课程...

```
public class Queue {
    public static LinkedList myList = new LinkedList();

    public static ListedList getMyList(){
        return myList;
    }
} 
```

然后，您可以通过调用`Queue.myList`或访问您的列表`Queue.getMyList()`- 两者都会做同样的事情。使用 getter 方法的好处是您可以控制对列表的访问，例如通过创建方法`synchronized`，防止对列表的调用出现乱序。

# python - 序列中相邻元素之间的比较

> ID：10279554
> 
> 赞同：3
> 
> 时间：2012-04-23T11:21:26.627
> 
> 标签：python, list, sequence

我需要一个序列中元素之间的比较索引。该索引是序列中相邻元素之间所有绝对比较的总和与序列及其长度可以具有的最大值之间的商。

例如，序列`s1 = [0, 1, 2]`和分别`s2 = [0, 2, 1]`具有绝对比较`[1, 1]`和`[2, 1]`。没有其他长度为 3 的序列组合具有比 3 更高的绝对比较和值。因此，对于 s1 和 s2，比较索引应该是 2/3 和 3/3。

这些序列总是有整数 from `0`to`length - 1`并且可以有不相邻的重复元素，例如`[0, 1, 0, 1, 0]`. 这些序列在其较低和最高元素值之间具有所有整数。

我需要一个函数来计算具有给定长度的序列可以具有的绝对比较和的最大值。我写的函数（最高）返回错误的结果。我写了这段代码：

```
 def aux_pairs(seq):
        n = 2
        return [seq[i:i + n] for i in range(len(seq) - (n - 1))]

    def comparisons_sum(seq):
        return sum([abs(el[-1] - el[0]) for el in aux_pairs(seq)])

    def highest(seq):
        card = len(seq)
        pair = [0, card - 1]
        r = (pair * (card / 2))
        if card & 1 == 1:
            r.append(0)
        return comparisons_sum(r)

    def comparison_index(seq):
        return comparisons_sum(seq) / float(highest(seq)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:32:10.000

生成列表的最简单方法是简单地执行以下操作：

```
def comparisons(seq):
    return [abs(a-b) for a, b in zip(seq, seq[1:])] 
```

至于您的比较，最高值始终是最大值，然后是最小值，重复。例如：对于长度 4：

```
[3, 0, 3, 0] 
```

因为这每次都会产生最大的差异。`length-1`对于比较字符串（长度）中的每个项目，将有这些最大差异之一（的`length-1`）。因此最大值将是`(length-1)**2`。

但是，您似乎暗示长度 3 的最大值是`3`，那么为什么`[0, 2, 0]`无效（产生`[2, 2]`的总和为`4`）？

您提到必须包含从`0`to的所有整数`length-1`，但这会使您的一些示例（例如`[0, 1, 0]`：）无效。这也与任何元素都可以重复的想法相冲突（如果长度为 n 的列表必须包含从 0 到 n-1，则它不能有重复）。

如果这种情况属实，那么您的问题与创建抖动矩阵的问题有些相似。

在从 0 到 len-1 排序范围的情况下，为了产生最大差异，最佳算法是从 0 向上工作，从 len-1 向下工作，将低值添加到列表的最高“边” ，反之亦然：

```
from collections import deque
from itertools import permutations
from operator import itemgetter

def comparisons(seq):
    return [abs(a-b) for a, b in zip(seq, seq[1:])]

def best_order(n):
    temp = deque([0, n-1])
    low = 1
    high = n-2
    while low < high:
        left = temp[0]
        right = temp[-1]
        if left < right:
            temp.append(low)
            temp.appendleft(high)
        else:
            temp.append(high)
            temp.appendleft(low)
        low += 1
        high -= 1
    if len(temp) < n:
        temp.append(low)
    return list(temp)

def brute_force(n):
    getcomp = itemgetter(2)
    return max([(list(a), comparisons(a), sum(comparisons(a))) for a in permutations(range(n))], key=getcomp)

for i in range(2, 6):
    print("Algorithmic:", best_order(i), comparisons(best_order(i)), sum(comparisons(best_order(i))))
    print("Brute Force:", *brute_force(i)) 
```

这给了我们：

```
Algorithmic: [0, 1] [1] 1
Brute Force: [0, 1] [1] 1
Algorithmic: [0, 2, 1] [2, 1] 3
Brute Force: [0, 2, 1] [2, 1] 3
Algorithmic: [2, 0, 3, 1] [2, 3, 2] 7
Brute Force: [1, 3, 0, 2] [2, 3, 2] 7
Algorithmic: [3, 0, 4, 1, 2] [3, 4, 3, 1] 11
Brute Force: [1, 3, 0, 4, 2] [2, 3, 4, 2] 11 
```

表明该算法与蛮力方法相匹配，以产生可能的最佳结果。

下面是一个更通用的解决方案：

```
from collections import deque

def comparisons(seq):
    return [abs(a-b) for a, b in zip(seq, seq[1:])]

def best_order(seq):
    pool = deque(sorted(seq))
    temp = deque([pool.popleft(), pool.pop()])
    try:
        while pool:
            if temp[0] < temp[-1]:
                temp.append(pool.popleft())
                temp.appendleft(pool.pop())
            else:
                temp.append(pool.pop())
                temp.appendleft(pool.popleft())
    except IndexError:
        pass
    return list(temp)

i = [0, 1, 2, 3, 4, 5, 6, 0, 0, 1, 1, 2, 2]
print("Algorithmic:", best_order(i), comparisons(best_order(i)), sum(comparisons(best_order(i))))
for n in range(2, 6):
    i = list(range(n))
    print("Algorithmic:", best_order(i), comparisons(best_order(i)), sum(comparisons(best_order(i)))) 
```

这使：

```
Algorithmic: [2, 1, 3, 0, 5, 0, 6, 0, 4, 1, 2, 1, 2] [1, 2, 3, 5, 5, 6, 6, 4, 3, 1, 1, 1] 38
Algorithmic: [0, 1] [1] 1
Algorithmic: [0, 2, 1] [2, 1] 3
Algorithmic: [2, 0, 3, 1] [2, 3, 2] 7
Algorithmic: [3, 0, 4, 1, 2] [3, 4, 3, 1] 11 
```

在可能的情况下，它与以前的结果相匹配。

# firefox - 我应该如何持久存储一个变量？

> ID：10279560
> 
> 赞同：3
> 
> 时间：2012-04-23T11:21:44.193
> 
> 标签：firefox, firefox-addon, storage

目前我正在开发一个 Firefox 扩展。现在我需要持久存储两个变量的值，以便即使重新启动 Firefox 也可以访问这些值。

我已经找到了以下存储数据的方法：

*   [SQLite 存储](https://developer.mozilla.org/en/Storage)
*   [优先](https://developer.mozilla.org/en/Code_snippets/Preferences)

但是只为两个值创建一个完整的数据库不是有点复杂吗？也许这听起来有点奇怪，但我真的不想将值保存在首选项中，因为实际上它们只是数据而不是首选项。

我真的无法决定哪种方式最好。您将如何存储数据？是否有其他方法可以存储 Firefox 扩展的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:34:26.390

是的，你应该使用偏好，这就是它们的好处。对于需要记住的少量数据，它们是完美的解决方案。`about:config`您可以在页面上轻松访问它们。

至于其他存储数据的方法：XUL 文档中的属性可以[保存在`localstore.rdf`](https://developer.mozilla.org/en/XUL_Tutorial/Persistent_Data). 您可以简单地[将数据保存到文件](https://developer.mozilla.org/en/JavaScript_code_modules/FileUtils.jsm)（可能是[JSON 编码的](https://developer.mozilla.org/en/JSON)）。好吧，您甚至可以将您的数据写入 Windows 注册表（不，不会给出链接）。但是使用偏好应该是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:30:45.237

饼干？

[火狐饼干教程](http://mozilla.gunnars.net/firefox_help_firefox_cookie_tutorial.html)

[Jquery-设置cookies](http://www.electrictoolbox.com/jquery-cookies/)

# c# - StandardOutput.ReadLine() 使用 c# 挂起应用程序

> ID：10279561
> 
> 赞同：1
> 
> 时间：2012-04-23T11:21:47.947
> 
> 标签：c#, asp.net

以下是应用程序代码。一段时间 p.StandardOutput.ReadLine(); 工作正常，但有时它挂断了我尝试了所有方法，但仍然出现此错误

```
 ProcessStartInfo startInfo = new ProcessStartInfo("c:\\windows\\system32\\test.exe");
 String s = " ";

 startInfo.WindowStyle = ProcessWindowStyle.Hidden;
 startInfo.CreateNoWindow = true;
 startInfo.RedirectStandardInput = true;
 startInfo.RedirectStandardOutput = true;
 startInfo.UseShellExecute = false;
 Process p = Process.Start(startInfo);
 p.StandardInput.WriteLine("list volume\n");
 String f = "";
 bool ignoredHeader = false;

 s = p.StandardOutput.ReadLine();
 p.WaitForExit(); 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:33:52.543

如果被调用的程序总是只输出一行，并且该行比系统使用的缓冲区短，那么您的程序是正确的。

如果它不输出一行，`ReadLine`则不会返回。所以你的程序在这种情况下被破坏了。

如果它输出太多，输出缓冲区就会满，被调用的程序会阻塞它的`Write`调用，直到有人从输出中读取足够的内容。由于您从未从第一行之后的输出缓冲区中读取数据，因此该块将永远存在，因此被调用的程序将永远不会终止。这反过来会导致您的程序在`p.WaitForExit()`.

该[文件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)明确指出：

> 在读取到其重定向流的末尾之前，不要等待子进程退出。
> 
> 代码示例通过调用`p.StandardOutput.ReadToEnd`before来避免死锁情况`p.WaitForExit`。如果父进程`p.WaitForExit`之前调用`p.StandardOutput.ReadToEnd`并且子进程写入足够的文本来填充重定向的流，则可能导致死锁情况。父进程将无限期地等待子进程退出。子进程将无限期地等待父进程从完整`StandardOutput`流中读取。

# ruby-on-rails-3 - 仅用于显示（只读）的 html5 表单的推荐方式？

> ID：10279562
> 
> 赞同：2
> 
> 时间：2012-04-23T11:21:51.617
> 
> 标签：ruby-on-rails-3, html

我试着查了一下，但没有找到任何线索......

构建仅用于显示数据的表单的推荐方法是什么？

通常您需要进行编辑：

```
<form ... >
 <label>My label <input type='text'></label>
 <input type='submit'>
<form> 
```

但是现在，我想要相同的表单，但不是用于编辑（数据库 webapps 的典型只读视图）。

*标签*标签似乎与输入标签挂钩，所以您不应该使用它吗？如果您在表单中使用*了 fieldset*标签，您将如何显示这些标签呢？

什么是正确的方法，像这样：？

```
<div class='form'>
   <div class='label'>My Label<div class='value'>my value</div></div>
</div> 
```

您是否应该将所有内容都包装在 div 标签和 span 中？

**从 Rails 的角度来看**

有 DRY，这似乎有点双重，因为您的编辑表单 - 通常 - 具有与“视图”相同的数据，但是您将它们单独设置（不像新/编辑）？好奇你们如何保持视图和 _edit 表单同步。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:11:18.387

您可以在文本字段中使用**readonly属性，**

```
<input type="text" readonly="readonly" value="myValue"> 
```

# c# - Excel.Range.Replace 的唯一替代品

> ID：10279564
> 
> 赞同：0
> 
> 时间：2012-04-23T11:21:57.827
> 
> 标签：c#, wpf, excel

如何用不同的字符串替换 Excel 中相同的匹配项？

我遇到的问题`Excel.Range.Replace`是该方法替换了一次调用中的所有事件。例如，如果我执行以下操作：

```
for (int i = 0; i < myNum; i++)
{
    myRange.Replace("foo", i.ToString());
} 
```

然后所有的**"foo"**将被替换为**0**而不是**1, 2 ,3 。**..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:29:41.167

```
void ReplaceFoosWithNumbers()
{
    int i;
    Range c;
    string firstAddress;

    Range rangeToSearchIn =  Worksheets(1).Range("a1:a5");
    Set c = rangeToSearchIn.Find("Foo", LookIn:=xlValues)
    if (c != null) 
    {
        firstAddress = c.Address
        while (true)
        {
            c.Value = i
            i = i + 1
            c = rangeToSearchIn.FindNext(c)
            if (c == null)
                break;
        }
    }
} 
```

编辑：请注意，我在没有 ac# 编辑器的情况下编写了这段代码。这将需要一些更正。发表评论，如果您需要任何帮助。

# javascript - Joomla 上的 Javascript setInterval 函数问题

> ID：10279565
> 
> 赞同：2
> 
> 时间：2012-04-23T11:22:01.367
> 
> 标签：javascript, jquery, joomla1.5, setinterval

我添加了这个脚本

```
<script type="text/javascript">
    var x = 2;
//console.log('Not broken');
$('.email_image li:gt(0)').css({opacity:0});

setInterval(function() {
   // function slideshow() {
    var m = $('.email_image li').size();
    x += 1;
    console.log('Not broken');
    if (x > m) {
        x = 1;
    }
    $(".email_image ul li:visible").animate({
        opacity: 0
    });
    $(".email_image ul li:nth-child(" + (x) + ")").animate({
        opacity: 1
    });
//    }
}, 5000);
    </script> 
```

到我的模板的 index.php 。我想使用该脚本为一组图像创建一个简单的幻灯片。循环只运行一次并停止。在 Joomla 之外，它运行良好，但在 Joomla 中，它只运行一次就停止。Joomla 的 setInterval 函数是否存在问题。有什么办法解决这个问题？

以下是 Joomla 中和 [Joomla](http://talonsoftwares.com/sweetroof/index.php?option=com_joomd&view=entry&layout=detail&id=1&Itemid=5) [外演示的链接](http://jsfiddle.net/2wnws/2/show/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:28:25.817

即使 jQuery 路径是正确的并且包含的​​很好，但`$`返回的不是 jQuery（似乎是冲突）：

```
function $(el){if(!el)return null;if(el.htmlElement)return Garbage.collect(el);if([window,document].contains(el))return el;var type=$type(el);if(type=='string'){el=document.getElementById(el);type=(el)?'element':false;}
if(type!='element')return null;if(el.htmlElement)return Garbage.collect(el);if(['object','embed'].contains(el.tagName.toLowerCase()))return el;$extend(el,Element.prototype);el.htmlElement=function(){};return Garbage.collect(el);} 
```

这是控制台上出现的错误：

```
Uncaught TypeError: Cannot call method 'css' of null 
```

* * *

`$`对于 jQuery，尝试用替换每个实例`jQuery`。

或者你可以`$`这样：

```
(function($){
   // your code here
})(jQuery); 
```

# php - WordPress：使用多个帖子循环？

> ID：10279568
> 
> 赞同：0
> 
> 时间：2012-04-23T11:22:21.867
> 
> 标签：php, wordpress, loops

我想在主页上使用多个循环。首先我想显示特定类别的帖子，然后是所有帖子，包括我上面包含的类别。但是当我使用第二个循环而不使用 query_posts 时，前一个循环的帖子被排除在外。

例如：

```
<div class="special_category" >
    <?php query_posts('category_name=special_cat&posts_per_page=10'); ?>
        <?php while (have_posts()) : the_post(); ?>
            <!-- will get special_cat posts -->
        <?php endwhile;?>
</div>

<div class="latest_posts">
        <!-- as i want do display all posts, so I don't use query_posts. -->
        <?php while (have_posts()) : the_post(); ?>
            <!-- this will exclude the posts of above special_cat -->
        <?php endwhile;?>
</div> 
```

如果我在第二个循环中使用 query_string（即使没有传递任何参数），那么它包括帖子。

```
<div class="latest_posts">
        <!-- i used query_posts without any arguments -->
        <?php query_posts(''); ?>
        <?php while (have_posts()) : the_post(); ?>
            <!-- now this will get all posts -->
        <?php endwhile;?>
</div> 
```

所以我的问题是，它是否意味着像那样工作，即。排除上述循环的帖子，还是我做错了什么？为什么不使用 query_posts 就无法获取所有帖子？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:25:31.913

第一个查询将影响第二个循环，直到您重置它

`<?php wp_reset_query(); ?>` 在第一个循环后添加

更多信息在这里[http://codex.wordpress.org/Function_Reference/wp_reset_query](http://codex.wordpress.org/Function_Reference/wp_reset_query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:42:31.623

如果您使用多个帖子循环，您应该使用[wp_query](http://codex.wordpress.org/Class_Reference/WP_Query)。
这样您也不必重置查询。

# c# - Microsoft UI 自动化框架是否处理 Java SWT、C++、Delphi 窗口或者我应该使用 OCR？

> ID：10279569
> 
> 赞同：4
> 
> 时间：2012-04-23T11:22:22.550
> 
> 标签：c#, ui-automation

我从事 AutoIT 和 windows 自动化工作超过 03 年，但主要是在 WinForms 上。AutoIT 不适用于 WPF 或 Java SWT UI。我已经使用了一点白色框架。我想编写一个用于测试和 03rd 方 UI 自动化的通用应用程序，我将一个带有窗口标题、窗口文本、UI 控件文本和操作（右键或左键）列表的 xml 传递给它——就像 AutoIT 控件一样-click 函数并执行该操作。

我的要求是它应该适用于所有 Windows 桌面应用程序（无论它们是用 C、C++、.Net Winforms、.Net WPF、Silver-light、Java、Delphi、Qt 还是任何东西编写的）。最终用户将是我们的运营或测试团队（他们将无法编码）。我应该采取什么方法？

1.  Microsoft UI 自动化框架是否支持所有类型的 Windows UI 自动化？
2.  White 框架是否比 Microsoft UI 自动化更好（我检查过 - White 在内部也使用 Rhino）？
3.  我是否应该编写自己的库来使用 OCR 来检测控件（与人类用户一样）？使用 OCR 会带来什么缺点？

问候 Akshay Mishra

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T12:19:54.710

UI 自动化框架处理任何使用（或映射到）本机 Windows 控件的东西，Java 的 SWT、大多数 C++ 的小部件工具包和 Delphi 的 VCL 表单就是这种情况，它也可以与呈现自己的控件但公开其界面的其他工具包一起使用出于可访问性目的（我认为 Java 的摇摆就是这种情况）。

White 在内部使用 UI 自动化框架，因此理论上它可以处理自动化框架可以处理的任何事情。

使用 OCR 会做很多工作，而且结果可能不会很好，所以如果你在 .NET 或 UI 自动化框架的 COM 对象中编码，你应该使用 White，因为没有什么比它更容易使用或有效的了具有如此多的接口类型，例如自动化框架（至少我还没有找到其他任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:52:20.830

如果它们是您正在使用的专业应用程序，那么它们很可能会公开某种形式的可访问性框架。这些对于自动化非常有用，我肯定会进行调查。

如果您想要一个完全可靠的系统，您可能必须为每个框架编写类似的自动化代码，然后拥有一个正在使用的检测机制。这是很多代码，但其中大部分已经存在。

正如您所提到的，OCR 是另一种选择。这几乎感觉像是一种廉价的黑客攻击，而不是一个好的解决方案，所以我建议将其作为后备选项牢记在心。AutoIt 很好地涵盖了 OCR，并带有几个围绕公共库的包装器。我想感兴趣的是[MODI](http://www.autoitscript.com/forum/topic/50608-real-ocr-in-au3-in-a-few-lines/)，你必须看看它是否允许你获取文本的坐标以及文本本身。

或者，如果字体将成为默认系统字体，或者您知道它将是什么字体，则不一定需要使用 OCR，而是可以搜索字体的图像。如果您有很多看起来都一样的按钮，可能值得一看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-29T12:35:30.623

**VS 2016 中的 Coded UI 测试不支持 Java GUI**

Automation FW（窗口，标题栏...）只能看到本机窗口元素，并且无法识别窗口的内部内容（JEdit，JCombobox ...）

因此，MTM 使用来自本机元素的坐标记录测试（[检查 SQA.stackexchange 上的问题](https://sqa.stackexchange.com/questions/20331/is-it-possible-to-use-ms-coded-ui-test-framework-to-test-java-gui-application)）

# c++ - 在 Gtk::Entry 小部件中强制输入数字

> ID：10279579
> 
> 赞同：3
> 
> 时间：2012-04-23T11:23:12.833
> 
> 标签：c++, gtkmm

我正在寻找一种可能的方法，只允许在 Gtk::Entry 小部件中输入数字，而不依赖于 SpinButtons。问题是，我找到了一个模板（[链接](https://mail.gnome.org/archives/gtkmm-list/2004-May/msg00169.html)），但它不起作用。我可以用我的其他代码编译它，但是如果我想声明一个实例

```
NumericEntry<int> int_entry(1,0,10); 
```

它告诉我

> 数字常量前应有“,”或“...”

第二部分是，我不清楚如何打包这个条目，因为我得到了一个

> 无法转换为小部件

使用时出错

```
functionname.pack_start(int_entry()) 
```

我想我的部分存在一个愚蠢的错误（C++ 和 Gtkmm 新手的错误组合），因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:56:10.650

只允许数字的一种方法是继承 Gtk::Entry 并覆盖 on_insert_text() 虚函数。在该虚函数中，您可以验证输入的文本，并且仅在文本验证时调用基类的 on_insert_text()。

```
void NumberEntry::on_insert_text(const Glib::ustring& text, int* position)
{
    // allow only numbers to be entered
    if (contains_only_numbers(text))
        Gtk::Entry::on_insert_text(text, position);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-23T21:46:14.007

这是一个没有子类化的解决方案。这是用 Rust 编写的，但在其他语言中应该也能正常工作。

```
fn is_non_ascii_digit(c: char) -> bool {
    !c.is_ascii_digit()
}
fn entry_disallow(entry: &gtk::Entry, pattern: fn(char) -> bool) {
    entry.connect_insert_text(move |entry, text, position| {
        if text.contains(pattern) {
            glib::signal::signal_stop_emission_by_name(entry, "insert-text");
            entry.insert_text(&text.replace(pattern, ""), position);
        }
    });
}

// To use it
entry_disallow(&entry, is_non_ascii_digit); 
```

# svn - 颠覆提交已完成，但未在 Web 服务器上更新文件

> ID：10279581
> 
> 赞同：-2
> 
> 时间：2012-04-23T11:23:16.430
> 
> 标签：svn, ubuntu, commit

我已经在 svn 上提交了我的更改，但是当我检查我的网络服务器时，文件仍然是一样的......

**为了在 Web 服务器www 文件夹**上应用更改，我是否遗漏了任何部分并且需要做些什么？

**我遵循的程序：**

*   通过版本登录（颠覆客户端）
*   存储库的位置是 svn://username@domain.com
*   结帐到文件夹
*   更新
*   对结帐文件夹进行更改
*   犯罪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:48:35.960

您的 Subversion 存储库和您的 Web 服务器不是一回事 - 提交对 Subversion 的更改不会自动将这些更新传播到 Web 服务器（除非有一个 Subversion 挂钩或其他进程监视存储库是否发生更改，并复制他们）。

当您将更改提交到 Subversion 时，您是在说“我做了一些更改，在我的本地 Web 服务器上对其进行了测试，并且确信它们将在生产环境中工作”。然后，您必须执行任何预期的生产部署过程，以便将这些已提交的更改应用于生产 Web 服务器。这可能就像登录到生产网络服务器并从 Subversion 刷新包含站点的文件夹结构一样简单 - 本质上是更新网络服务器上的“工作副本”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T15:23:44.617

通过将 apache 的 locationroot 更改为结帐文件夹来解决。

# javascript - 使javascript仅适用于div

> ID：10279587
> 
> 赞同：-4
> 
> 时间：2012-04-23T11:23:51.267
> 
> 标签：javascript, jquery, iframe, html

知道使 javascript/jquery 仅适用于 div 或 iframe 内的所有内容的方法吗？

举个例子：我有一个很酷的 javascript 函数，它可以让我的文本改变颜色，但是当我只希望它改变 div 或 iframe 中的文本时，它会改变整个文本页面的颜色。

有任何想法吗？

这是一些代码：

```
<script type="text/javascript">
    $(document).ready(function() { //  When the document is ready
    $.foo({
            fontchange: true,             //  Make the text pretty
        });
    });
</script> 
```

编辑：这似乎比它的价值更麻烦，感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:28:28.393

**发布代码后**更新答案：****

 **您发布的代码`$.foo({fontchange: true})`表明您正在使用 jQuery 插件，这有点不寻常，因为它不适用于一组选定的元素。这不是插件通常的工作方式，因此我们不知道您正在处理什么插件（大概它的文档讨论如何使其更具针对性）。

jQuery 插件的**通常**用法是首先获取一组要操作的元素，通常的选择器（见下文），然后在它们上调用插件函数。例如，`$("some selector here").foo({fontchange: true});`。但这并不是这个特殊的、不寻常的插件的工作方式。

* * *

**原始答案**：

您已经标记了您的问题`jquery`，因此：您可以在页面上的任何元素或元素集周围获取 jQuery 包装器，您可以为其编写[CSS3 选择器](http://www.w3.org/TR/css3-selectors/)（以及[更多](http://api.jquery.com/category/selectors/)）和[`jQuery`](http://api.jquery.com/jQuery/#jQuery1)函数，通常也可以通过它的别名`$`。

因此，例如，如果您有一个`div`with an `id`，`"foo"`这将`div`使用 CSS 选择器获得一个 jQuery 实例`#foo`：

```
var foo = $("#foo"); 
```

如果你在 a 中有一堆`span`s `div`，你可以使用通常的后代选择器语法来获取它们：

```
var spans = $("div span"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:26:04.943

您的函数可能会`document.body`在某个时候引用以使节点发生更改。而不是`document.body`，给它别的东西。在大多数元素的情况下，只需传递元素就可以了。`iframe`但是，在`contentDocument`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:28:26.640

大多数 jQuery 调用使用所谓的“选择器”来选择要处理的元素。您的代码可能类似于：

```
$('body').do_cool_stuff(); 
```

选择整个身体。 `'body'`是那里的选择器，您可以将其更改为：

```
$('#somediv').do_cool_stuff(); 
```

只选择一个 div：

```
<div id='somediv'>...</div> 
```

选择器`#`中的 与 的`id`属性相对应`div`。

**编辑，**现在我们有了一些代码：尝试更改`$.foo(...)`为`$('#somediv').foo(...)`.**

# php - 在 PHP 中显示 SQL 数据

> ID：10279588
> 
> 赞同：0
> 
> 时间：2012-04-23T11:23:52.233
> 
> 标签：php, html, sql

嗨 Stack Overflow 的用户，

我遇到了一个问题，我的 SQL 数据无法正确显示，我不确定如何解决这个问题。我只看到没有适当数据的打印部分。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <link rel="stylesheet" href="css/default.css" type="text/css" />
 <link rel="stylesheet" href="css/timetable.css" type="text/css" />
<title>Timetable Information</title>
</head>
<body>

<div id="header"></div>

<ul id="NavigationList">
<li><a href="Index.php">Index</a></li>
<li><a href="ModuleInfo.php">Module Info</a></li>
<li><a href="ModuleSearch.php">Module Search</a></li>
<li><a href="Timetable.php">Timetable Search</a></li>

</ul>
<p>
<p>Please select a school from the drop-down list.</p>

   <?php
require('json.php');
error_reporting(E_ALL);
$connection = mysql_connect('localhost', 'root','') or
    die("Could not connect: " . mysql_error());
mysql_select_db("timetable") or die("No such database");
$sql = sprintf("
  SELECT id,day,start,module
    FROM event JOIN teaches ON (event.id=teaches.event)
   WHERE staff='%s'", mysql_real_escape_string($_REQUEST['staff']));
$result = mysql_query($sql)
  or die(mysql_error());
while ($row = mysql_fetch_array($result)){
    print "<div>$row[id] $row[module] $row[day] $row[start]</div>\n";
}
?>
</p>
<div id="Footer">
            <p id="FooterText">Copyright &copy; 2012 .<br     />All     rights reserved.</p>    
            </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T18:00:56.650

```
while ($row = mysql_fetch_assoc($result)) { 
    $symbol= $row['Symbol'];
    $date= $row['Date']; 
    $avgprice= $row['avg_price']; 
    $var4 = $row['field4']
    ."<br>";

    echo "<tr>
        <td >".$symbol."</td>
        <td >".$date."</td>
        <td >".$avgprice."</td>
        <td >".$var4."</td>

    </tr>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:29:11.297

利用：

```
print "<div>{$row['id']} {$row['module']} {$row['day']} {$row['start']}</div>\n"; 
```

代替：

```
print "<div>$row[id] $row[module] $row[day] $row[start]</div>\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:00:16.453

尝试这样的事情

```
print "<div>".$row[id]. $row[module]. $row[day]. $row[start]."</div>\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:43:24.603

尝试这个

```
while ($row = mysql_fetch_array($result)){
echo "<div>".$row['id'];
echo $row['module'];
echo $row['day'];
echo $row['start'];
echo "</div>";
} 
```

而不是： print "$row[id] $row[module] $row[day] $row[start]\n";

# android - Android 如何在我的应用程序中使用打印应用程序在没有互联网的情况下打印文本文件

> ID：10279593
> 
> 赞同：0
> 
> 时间：2012-04-23T11:24:08.060
> 
> 标签：android, printing, bluetooth

我必须开发用于创建和打印发票的 android 应用程序。您能否向我提出一个解决方案，如何通过某些应用程序使用蓝牙打印机从我的应用程序中打印文本文件，但无需连接到互联网？我知道有 PrinterSahre、EpsonPrint、EasyPrint - 但它们通常只允许打印办公文档并有自己的 GUI 并且需要连接到 Internet。我宁愿需要使用一些 API 来静默打印文件，而无需用户再次选择存储卡上的文件并打印。那么有解决办法吗？

# magento - 在magento中设置产品评论自动批准

> ID：10279594
> 
> 赞同：3
> 
> 时间：2012-04-23T11:24:13.027
> 
> 标签：magento, review

当任何客户对产品提交评论时，评论必须自动获得批准。无需管理员批准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:36:39.413

你可以试试[这种方法](http://web.archive.org/web/20120702220628/http://www.magentocommerce.com/boards/viewthread/264907)。

**更新**：链接不再有效，所以我从网络档案中发布了一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T20:13:43.003

创建一个新模块是最好的方法，它简单易行。第 1 步：在 app/etc/modules 中创建一个名为 Dpc_Review.xml 的模块声明文件

```
<?xml version="1.0"?>
    <config>
    <modules>
        <Dpc_Review>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Review/>
            </depends>
        </Dpc_Review>
    </modules>
</config>
```

第 2 步：在 app/etc/local 中创建一个名为 Dpc 的文件夹 第 3 步：在 app/etc/local/Dpc/ 中创建一个新文件夹 Review 第 3 步：在 app/etc/local/Dpc/Review 中创建 3 个文件夹控制器等和 Helper 步骤 4：在 app/etc/local/Dpc/Review/etc/ 中创建一个名为 config.xml 的文件

```
<?xml version="1.0"?>
<config>
    <modules>
        <Dpc_Review>
            <version>0.0.1</version>
        </Dpc_Review>
    </modules>
    <frontend>
        <routers>
            <review>
                <args>
                    <modules>
                        <Dpc_Review before="Mage_Review">Dpc_Review</Dpc_Review>
                    </modules>
                </args>
            </review>
        </routers>
    </frontend>
    <global>
        <helpers>
            <dpc_review>
                <class>Dpc_Review_Helper</class>
            </dpc_review>
            <review>
                <rewrite>
                    <data>Dpc_Review_Helper_Data</data>
                </rewrite>
            </review>
        </helpers>
    </global>
</config>
```

第 5 步：在 app/code/local/Dpc/Review/Helper 中创建一个名为 Data.php 的文件

```
<?php

/**
 * Class Dpc_Review_Helper_Data
 */
class Dpc_Review_Helper_Data extends Mage_Review_Helper_Data
{

}
```

第 6 步：在 app/code/local/Dpc/Review/controllers/ 中创建一个名为 ProductController.php 的文件

```
<?php
require_once 'Mage' . DS . 'Review' . DS . 'controllers' . DS . 'ProductController.php';
/**
 * Class Dpc_Review_ProductController
 */
class Dpc_Review_ProductController extends Mage_Review_ProductController
{
    /**
     * Submit new review action
     *
     */
    public function postAction()
    {
        if (!$this->_validateFormKey()) {
            // returns to the product item page
            $this->_redirectReferer();
            return;
        }

        if ($data = Mage::getSingleton('review/session')->getFormData(true)) {
            $rating = array();
            if (isset($data['ratings']) && is_array($data['ratings'])) {
                $rating = $data['ratings'];
            }
        } else {
            $data   = $this->getRequest()->getPost();
            $rating = $this->getRequest()->getParam('ratings', array());
        }

        if (($product = $this->_initProduct()) && !empty($data)) {
            $session    = Mage::getSingleton('core/session');
            /* @var $session Mage_Core_Model_Session */
            $review     = Mage::getModel('review/review')->setData($data);
            /* @var $review Mage_Review_Model_Review */

            $validate = $review->validate();
            if ($validate === true) {
                try {
/****** This is the spot where we are now setting the value to STATUS_APPROVED *******/                        

$review->setEntityId($review->getEntityIdByCode(Mage_Review_Model_Review::ENTITY_PRODUCT_CODE))
                        ->setEntityPkValue($product->getId())
                        ->setStatusId(Mage_Review_Model_Review::STATUS_APPROVED)
                        ->setCustomerId(Mage::getSingleton('customer/session')->getCustomerId())
                        ->setStoreId(Mage::app()->getStore()->getId())
                        ->setStores(array(Mage::app()->getStore()->getId()))
                        ->save();

                    foreach ($rating as $ratingId => $optionId) {
                        Mage::getModel('rating/rating')
                            ->setRatingId($ratingId)
                            ->setReviewId($review->getId())
                            ->setCustomerId(Mage::getSingleton('customer/session')->getCustomerId())
                            ->addOptionVote($optionId, $product->getId());
                    }

                    $review->aggregate();
                    $session->addSuccess($this->__('Your review has been accepted'));
                }
                catch (Exception $e) {
                    $session->setFormData($data);
                    $session->addError($this->__('Unable to post the review.'));
                }
            }
            else {
                $session->setFormData($data);
                if (is_array($validate)) {
                    foreach ($validate as $errorMessage) {
                        $session->addError($errorMessage);
                    }
                }
                else {
                    $session->addError($this->__('Unable to post the review.'));
                }
            }
        }
        // this is my own custom need, feel free to do whatever you want here
        $product_url = $product->getUrlPath();
        if ($product_url) {
            $this->_redirect($product_url);
            return;
        }
        $this->_redirectReferer();
    }

}
```

# wordpress - wordpress 永久链接结构在子目录上的多站点上没有改变

> ID：10279604
> 
> 赞同：0
> 
> 时间：2012-04-23T11:25:09.223
> 
> 标签：wordpress, permalinks

我有一个在子目录上运行多阶段的 wordpress 站点。

当更改主站点上的永久链接结构时，一切正常，站点在 /%postname%/ 结构上显示帖子/页面。

但是，当我在子目录博客上进行相同的更改时，结构保持不变 /%category%/%postname%/ 它忽略了我的更改。

需要知道我该如何解决这个问题...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:01:16.177

似乎页面会自动获取 %postname% 上的父页面，使用名为[“自定义永久链接”的插件进行修复](http://wordpress.org/extend/plugins/custom-permalinks/)

遗憾的是 WordPress 没有内置选项...

# android - 为什么 getScaleY() 总是返回 1.0？[安卓]

> ID：10279613
> 
> 赞同：0
> 
> 时间：2012-04-23T11:26:02.183
> 
> 标签：android, android-layout, android-xml

我有一个`ImageView`包含图像的。由于它太大，该图像正在缩放以适应屏幕。

我试图找出图像使用`getScaleY()`和缩放了多少`getScaleX()`。如果图像没有被缩放，这*应该*返回`1.0`，并且返回的值小于`1.0`图像被缩小以适应视图的情况。

相反，无论图像是否按比例缩小，`getScaleX()`并且`getScaleY()`总是返回给我。`1.0`

你可以在这里看到我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/docImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/dossier_cover"
        android:adjustViewBounds="true"
        android:padding="0dp"
        />

</RelativeLayout> 
```

有谁知道为什么会这样？还是我最好以不同的方式找出规模？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:01:10.770

那是因为我`getScaleX()`在画出来之前就打电话了。谜团已揭开。

# c# - 自定义 DateTimePicker：获得一致的外观和感觉

> ID：10279616
> 
> 赞同：0
> 
> 时间：2012-04-23T11:26:32.010
> 
> 标签：c#, winforms, combobox, textbox, custom-controls

我正在创建一个`ComboBox`允许用户选择日期的自定义；日历显示是本地化的，使得内置的`DateTimePicker`不受欢迎[更多信息请参见[此处](http://support.microsoft.com/Default.aspx?scid=kb;en-us;889834&x=18&y=19)]。我需要 UI 控件来反映外观或现有组件。这是我尝试过的和遇到的问题：

*   使用`TextBox`带有绘制`ComboBox`按钮的 a：我尝试过使用`ComboBoxRenderer.DrawDropDownButton`，但外观与现有 UI 控件不相符。特别是我们没有`Application.EnableVisualStyles()`这样的按钮具有 Windows 98 的外观和感觉。`ComboBoxRenderer`绘制一个有光泽的灰色按钮。
*   使用 a`ComboBox`和 a`ToolStripDropDown`包含日历控件：按钮具有正确的外观和感觉，但我无法完全隐藏下拉框。尽管`ToolStripControlHost`有效地隐藏了下拉框，但当我单击按钮时，我可以看到下拉框在显示之前呈现`ToolStripDropDown`。我已经尝试过有效禁用下拉框的解决方法，但是正如您所期望的那样，按钮并没有保持所期望的被按下的视觉状态（并且绘制按钮让我回到了上述问题）。将下拉框的高度设置为零`OnMeasureItem`不起作用；虽然我想我可以使下拉框与我的日历 UI 选择器的高度相同，这样渲染看起来就不会特别糟糕。

是否存在获得我需要的行为的现有机制：a`TextBox`显示带有下拉箭头按钮的选定日期，单击该按钮时会显示日历 UI 选择组件。日历组件已经存在，并且按钮必须看起来像现有的 Windows 98 外观`ComboBox`按钮。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:44:41.443

我找不到明确的解决方案，所以我实施了一个解决方法：我截取了*正常*和*按下*状态（没有*悬停*状态）的 Windows 98 样式按钮并将它们添加为图像资源（在*resx*文件中）。然后我根据当前的用户交互绘制图像。这有几个后果，包括：对视觉样式的任何更改都不是无缝的，如果控件高度发生更改，按钮将不会像其他`ComboBox`实例一样调整大小。

# java - 使用另一个字符串生成一个 32 位字符串？

> ID：10279619
> 
> 赞同：0
> 
> 时间：2012-04-23T11:26:39.283
> 
> 标签：java, android, string

我想在我的应用程序中使用另一个字符串生成一个 32 位字符串。我怎么能这样做，我有一个像这样的字符串 64459003-1a63-4b3b-b649-ffab8433806b。我需要使用密码生成一个 32 位字符串，例如字符串的密码。我是新手请帮忙？

注意：我想要一个算法，如果以后调用它可以重新生成相同的字符串？

我真正想要的：我想从 android 设备的 UUID 生成一个加密或某种类型的 32 位字符串，并将其用于激活我的应用程序。用户将向技术支持发送生成的字符串，支持将发回激活激活应用程序的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:54:29.237

> 是的，我也希望它反转！

具有 32 位状态的 String 只能表示`2^32`状态。但是为了使反向转换起作用，您必须能够表示比这更多的状态。（输入字符串看起来像 128 位 UUID 的字符串表示。这意味着`2^128`不同的状态。）

你能做的最好的就是实现一个持久的查找表。如果你有更多`2^32`的万能钥匙，即使这样也会破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:03:10.910

好的，那么假设您将在数据库中拥有密码和前一个字符串。你可以使用随机的java类。
生成一个初始字符串：

```
//initially
Random rand=new Random();
byte[4] a=new byte[4];
rand.nextBytes(a);
//a will contain the 32 bit string
//store a in database
//Next time
Random b=new Random();
//convert tehe previous value to long
long value=0;
for(int i=0;i<b.length;i++)
 {
   value+=(b[i] & 0xff) <<(8*i);
   //System.out.println(Long.toString(value));
 }
b.setSeed(value);
//using this seed value generate a new random number
b.nextbytes(b);
//store this b to data base 
```

注意：您必须将数据库中的初始值存储在单独的列中。但是可以替换后续值。
要检索原始字符串，您必须查找数据库。从初始种子中，可以轻松找到其余值（通过调用 setSeed()）。

# java - 结合 putIfAbsent 并替换为 ConcurrentMap

> ID：10279629
> 
> 赞同：18
> 
> 时间：2012-04-23T11:27:05.680
> 
> 标签：java, concurrency, synchronization, concurrenthashmap

我有一个用例，我必须

*   如果 ConcurrentHashMap 中不存在该键，则插入一个新值
*   如果键已经存在于 ConcurrentHashMap 中，则用新值替换旧值，其中新值是从旧值派生的（不是昂贵的操作）

我提供以下代码：

```
public void insertOrReplace(String key, String value) {
        boolean updated = false;
        do {
            String oldValue = concurrentMap.get(key);
            if (oldValue == null) {
                oldValue = concurrentMap.putIfAbsent(key, value);
                if (oldValue == null) {
                    updated = true;
                }
            }
            if (oldValue != null) {
                final String newValue = recalculateNewValue(oldValue, value);
                updated = concurrentMap.replace(key, oldValue, newValue);
            }
        } while (!updated);
    } 
```

你认为它是正确的和线程安全的吗？

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T21:56:49.703

您可以使用下面与您的代码等效的代码将其缩短一点。我已经对它进行了一些压力测试，数千个线程同时访问它：它按预期工作，执行了多次重试（循环）（显然，你永远无法通过并发世界中的测试来证明正确性）。

```
public void insertOrReplace(String key, String value) {
    for (;;) {
        String oldValue = concurrentMap.putIfAbsent(key, value);
        if (oldValue == null)
            return;

        final String newValue = recalculateNewValue(oldValue, value);
        if (concurrentMap.replace(key, oldValue, newValue))
            return;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:19:48.317

您的方法似乎是线程安全的。如果您不需要 ConcurrentHashMap 的性能优势，请考虑改用常规 HashMap 并同步对它的所有访问。你的方法类似于 AtomicInteger.getAndSet(int)，所以应该没问题。我怀疑是否有更简单的方法可以做到这一点，除非您正在寻找图书馆调用来为您完成工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-30T08:57:56.587

我不认为这是正确的。据我了解，merge() 方法将是这项工作的正确工具。我目前有同样的问题，并写了一个小测试来查看结果。

该测试启动了 100 名工人。他们每个人都将地图中的值增加 100 次。所以预期的结果是 10000。

有两种类型的工人。一种使用替换算法并使用合并的算法。该测试使用不同的实现运行两次。

```
import java.util.concurrent.ArrayBlockingQueue;                                                                     
import java.util.concurrent.ConcurrentHashMap;                                                                      
import java.util.concurrent.ConcurrentMap;                                                                          
import java.util.concurrent.ExecutorService;                                                                        
import java.util.concurrent.ThreadPoolExecutor;                                                                     
import java.util.concurrent.TimeUnit;                                                                               

public class ConcurrentMapTest                                                                                      
{                                                                                                                   

   private static ConcurrentMap<String, Integer> map = new ConcurrentHashMap<>();                                   

   private final class ReplaceWorker implements Runnable                                                            
   {                                                                                                                
      public void run()                                                                                             
      {                                                                                                             
         for(int i = 0; i<100; i++)                                                                                 
         {                                                                                                          
            Integer putIfAbsent = map.putIfAbsent("key", Integer.valueOf(1));                                       
            if(putIfAbsent == null)                                                                                 
               return;                                                                                              
            map.replace("key", putIfAbsent + 1);                                                                    
         }                                                                                                          
      }                                                                                                             
   }                                                                                                                

   private final class MergeWorker implements Runnable                                                              
   {                                                                                                                
      public void run()                                                                                             
      {                                                                                                             
         for(int i = 0; i<100; i++)                                                                                 
         {                                                                                                          
            map.merge("key", Integer.valueOf(1), (ov, nv) -> {                                                      
               return ov + 1;                                                                                       
            });                                                                                                     
         }                                                                                                          
      }                                                                                                             
   }                                                                                                                

   public MergeWorker newMergeWorker()                                                                              
   {                                                                                                                
      return new MergeWorker();                                                                                     
   }                                                                                                                

   public ReplaceWorker newReplaceWorker()                                                                          
   {                                                                                                                
      return new ReplaceWorker();                                                                                   
   }                                                                                                                

   public static void main(String[] args)                                                                           
   {                                                                                                                
      map.put("key", 1);                                                                                            
      ConcurrentMapTest test = new ConcurrentMapTest();                                                             
      ThreadPoolExecutor threadPool = new ThreadPoolExecutor(10, 10, 100, TimeUnit.MILLISECONDS, new ArrayBlockingQu
      for(int i = 0; i<100; i++)                                                                                    
      {                                                                                                             
         threadPool.submit(test.newMergeWorker());                                                                  
      }                                                                                                             
      awaitTermination(threadPool);                                                                                 
      System.out.println(test.map.get("key"));                                                                      

      map.put("key", 1);                                                                                            
      threadPool = new ThreadPoolExecutor(10, 10, 100, TimeUnit.MILLISECONDS, new ArrayBlockingQueue<>(1000));      
      for(int i = 0; i<100; i++)                                                                                    
      {                                                                                                             
         threadPool.submit(test.newReplaceWorker());                                                                
      }                                                                                                             
      awaitTermination(threadPool);                                                                                 
      System.out.println(test.map.get("key"));                                                                      
   }                                                                                                                

   private static void awaitTermination(ExecutorService threadPool)                                                 
   {                                                                                                                
      try                                                                                                           
      {                                                                                                             
         threadPool.shutdown();                                                                                     
         boolean awaitTermination = threadPool.awaitTermination(1, TimeUnit.SECONDS);                               
         System.out.println("terminted successfull: " + awaitTermination);                                          
      }                                                                                                             
      catch (InterruptedException e)                                                                                
      {                                                                                                             
         // TODO Auto-generated catch block                                                                         
         e.printStackTrace();                                                                                       
      }                                                                                                             
   }                                                                                                                
} 
```

```
结果：
终止成功：真
10000
终止成功：真
1743

```

问题是在您的情况下，get 和 put 之间存在差距，因此对地图结果的并发访问会被覆盖。使用合并它是一个原子操作，尽管文档没有说明它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-10T19:14:29.870

您可以[`MutableMapIterable.updateValueWith(K key, Function0<? extends V> factory, Function2<? super V,? super P,? extends V> function, P parameter)`](https://www.eclipse.org/collections/javadoc/8.1.0/org/eclipse/collections/api/map/MutableMapIterable.html#updateValueWith-K-org.eclipse.collections.api.block.function.Function0-org.eclipse.collections.api.block.function.Function2-P-)从[Eclipse Collections](https://www.eclipse.org/collections/)使用。

如果地图中没有任何值，则该`factory`参数会创建一个初始值。该`function`参数与附加参数一起应用于地图值，以得出新的地图值。这`parameter`作为最终参数传递给`updateValueWith()`. 即使键不在地图中，也会调用该函数。所以初始值实际上是`function`应用于 和 的`factory`输出`parameter`。`function`不能改变值；它应该返回一个新值。在您的示例中，地图值是不可变的字符串，所以我们很好。

在 ConcurrentMaps like`org.eclipse.collections.impl.map.mutable.ConcurrentHashMap`中， 的实现`updateValueWith()`也是线程安全和原子的。重要的`function`是不要改变映射值，否则它不是线程安全的。它应该返回新值。在您的示例中，地图值是不可变的字符串，所以我们很好。

如果您的方法`recalculateNewValue()`只是进行字符串连接，那么您可以使用`updateValueWith()`.

```
Function0<String> factory = () -> "initial ";
Function2<String, String, String> recalculateNewValue = String::concat;

MutableMap<String, String> map = new ConcurrentHashMap<>();
map.updateValueWith("test", factory, recalculateNewValue, "append1 ");
Assert.assertEquals("initial append1 ", map.get("test"));
map.updateValueWith("test", factory, recalculateNewValue, "append2");
Assert.assertEquals("initial append1 append2", map.get("test")); 
```

您可以使用 Java 8 的[ConcurrentMap.compute(K key, BiFunction remappingFunction)](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#compute-K-java.util.function.BiFunction-)来完成同样的事情，但它有一些缺点。

```
ConcurrentMap<String, String> map = new ConcurrentHashMap<>();
map.compute("test", (key, oldValue) -> oldValue == null ? "initial append1 " : oldValue + "append1 ");
Assert.assertEquals("initial append1 ", map.get("test"));
map.compute("test", (key, oldValue) -> oldValue == null ? "initial append1 " : oldValue + "append2");
Assert.assertEquals("initial append1 append2", map.get("test")); 
```

*   没有单独的工厂来处理缺少键的情况，因此 lambda 的主体必须处理值和初始值。
*   API 不适合重用 lambda。每次调用都`updateValueWith()`共享相同的 lambda，但每次调用`compute()`都会在堆上创建新的垃圾。

注意：我是 Eclipse Collections 的提交者

# javascript - 如何在自定义 ImageMapType 实现中为某些缩放级别拉伸图块？

> ID：10279630
> 
> 赞同：4
> 
> 时间：2012-04-23T11:27:08.987
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经实现了一个自定义[ImageMapType](https://developers.google.com/maps/documentation/javascript/reference#ImageMapType)，它根据给定的坐标和 getTileUrl() 的缩放级别返回有效的平铺 URL。

```
new google.maps.ImageMapType({
    name: 'Satellite',
    getTileUrl: function(coord, zoom) {
        var p_type = "satellite",
            z = zoom - 11,
            corr = Math.pow(2, zoom) - Math.pow(2, z),
            p_x = coord.x - corr,
            p_y = coord.y - corr,
            maxCoord = Math.pow(2, (z+1)) - 1;

        if (p_x > maxCoord || p_y > maxCoord || p_x < 0 || p_y < 0) {
            return 'http://maps.gstatic.com/intl/en_us/mapfiles/transparent.png';
        }

        p_x = (p_x < 16 ? '0' : '') + p_x.toString(16);
        p_y = (p_y < 16 ? '0' : '') + p_y.toString(16);

        return 'http://map.example.com/' + p_type + '/' + (z + 1) + '/tile_' + p_y + p_x + '.jpg';
    },
    tileSize: new google.maps.Size(128, 128),
    isPng: false,
    minZoom: 11,
    maxZoom: 16
}); 
```

对于缩放级别 11 到 16，我有 128x128 个图块。通过将 ImageMapTypeOptions 对象的 maxZoom 属性增加到 16 以上，可以放大到有图块的位置（但当然不会出现图块，但标记和折线确实有效） . 在这种情况下，我希望从上一个缩放层拉伸瓷砖（与更改缩放级别时的过渡效果相同）。

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:04:25.243

非常好的问题。理论上在客户端应该可以做到，但是由于对象的`getTileUrl`方法 `google.maps.ImageMapType`必须返回URL，所以在使用这个对象时必须在服务器端进行。

另一种可能性是使用更通用[`google.maps.MapType`](https://developers.google.com/maps/documentation/javascript/reference#MapType)的对象并定义自己的`getTile`方法。然后你可能会返回你自己的拉伸`<img>`元素。

# android - 如何在字符串中搜索单词并在android的文本视图中突出显示单词？

> ID：10279632
> 
> 赞同：7
> 
> 时间：2012-04-23T11:27:16.943
> 
> 标签：android, textview

在我的 android 应用程序中，我有一个包含特定单词的字符串，所以我想在文本视图中显示整个字符串，并且应该突出显示特定的单词。希望下面的图片能给你一个想法。

![在此处输入图像描述](../Images/2d7e53e8d133b1336d0db0b7f599fcd1.png)

我已经使用以下代码来执行此操作，但它不起作用。

代码：

con 是我的字符串， groupNameContent 是文本字段。

```
con.replaceAll(arrGroupelements[groupPosition][5],"<font color='#CA278C'>"+arrGroupelements[groupPosition][5]+"</font>.");
groupNameContent.setText(Html.fromHtml(con)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T11:33:09.593

对于每个单词，您可以使用：

```
TextView textView = (TextView)findViewById(R.id.mytextview01);
//use a loop to change text color
Spannable WordtoSpan = new SpannableString("partial colored text");        
WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 2, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(WordtoSpan); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-21T10:42:39.597

如果我能理解你有单词列表，并且你想在文本中找到这个单词并突出显示它们，那么在这个答案中你有三个输入参数：

1.  全文。
2.  你的名单
3.  yourTextview 显示结果文本

    ```
    String text = "full of your text";
    Spannable textSpannable = new SpannableString(text);

    for (int j =0 ; j<yourList.size() ; j++) {
        //word of your list
        String word = String.valueOf(yourList.get(j));
        //find index of words
        for (int i = -1; (i = text.indexOf(word, i + 1)) != -1; i++) {
            //find the length of word for set color
            int last = i + word.length();
            //set text color with spannable
            textSpannable.setSpan(new BackgroundColorSpan(Color.parseColor("#0cab8f")),
                    i, last, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        }
    }
    yourTextView.setText(textSpannable); 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-22T12:17:45.500

**为了简单起见，我在这里发布我的方法**

. . . . . . . .

**首先准备使用方法**

```
 ArrayList<String> searchWords = new ArrayList<String>(Arrays.asList("Second", "Scottish", "forces", "England"));

    String text = "1333 – Second War of Scottish Independence: The Scottish-held town of Berwick-upon-Tweed surrendered to English forces, ending a siege led by Edward III of England (depicted).";

    TextView sampleTextView = new TextView(currentContext); // currentContext = getContext();

    if (searchWords != null) {
        Spannable newText = setSpanHighlight(text, searchWords);
        sampleTextView.setText(newText, TextView.BufferType.SPANNABLE);
    }
    else{
        sampleTextView.setText(text);
    } 
```

**方法**

```
 private Spannable setSpanHighlight(String text, @NonNull ArrayList<String> searchWord) {
    Spannable newText = new SpannableString(text);

    if (searchWord.size() != 0) {
        for (String word : searchWord){
            if (text.contains(word)){
                int beginIndex = text.indexOf(String.valueOf(word)); //Unnecessary 'String.valueOf()' call => if you have something else than String
                int endIndex = beginIndex + word.length();

                newText.setSpan(
                        new ForegroundColorSpan(Color.BLUE),
                        beginIndex,
                        endIndex,
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            }
        }
    }
    return newText;
} 
```

# html - 对带有 id 的特定 html 标签的 sed 和惰性搜索

> ID：10279634
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:27:29.657
> 
> 标签：html, tags, sed, strip

我怎样才能用 sed 删除所说的 html 标签？

例子：

```
<div id="header"><span id="navbar">... Content ...</span></div> 
```

我尝试了什么：

```
sed 's!<div id=\"header\">.*\?</div>!!g' 
```

请记住，这应该根据这个[正则表达式参考工作](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:53:43.447

这可能对您有用：

```
sed '
>    /<div id="header"><span id="navbar">/{ # search for start tags
>    s//\n/                                 # replace start tags with newline
>    :a                                     # label a
>    /\n<\/span><\/div>/bb                  # search for end tags and if so goto label b
>    s/\n./\n/                              # end tags not found bump along a character
>    ta                                     # goto label a if last substitution ok
>    :b                                     # label b
>    s///                                   # delete end tags and newline
>    /^$/d                                  # check for empty line and if so delete
>    }' file 
```

注意 这期望开始/结束标签在同一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:34:39.280

`sed`不支持`.*?`（贪婪匹配）。
你可以试试[`ssed`(super sed)](http://sed.sourceforge.net/grabbag/ssed/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:12:42.633

如果您的目标是从文件中删除 html 标记及其内容，您可以尝试以下命令。

注意：以下所有命令都是内联编辑。您要更改的文件将在运行此命令后立即更改。测试前请备份您的文件。

如果标签都在一行上，您可以尝试以下操作。

```
sed -i 's/<div id=\"header\"><span id=\"navbar\".*<\/span><\/div>//g' /yourfile 
```

* * *

如果标签位于多行，如下例所示，请尝试以下命令。

```
<div id="header"><span id="navbar">
    ... Content ...
</span></div> 
```

* * *

```
sed -i '/<div id=\"header\"><span id=\"navbar\">/,/<\/span><\/div>/g' /yourfile 
```

注意：如果您在 OS X 上工作，您需要将 (sed -i) 更改为 (sed -i '')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T06:17:12.467

使用 sed 将是：

```
testers="<div id="header"><span id=\"navbar\">... Content ...</span> some stuf </div>"
echo $testers| sed -E 's/<[\w ="/]+>// g' 
```

用`ssed`而不是`sed`巫婆手段（super sed）解决，您可以在任何POSIX系统中非常容易地安装它，所以我开始了。

```
testers="<div id="header"><span id=\"navbar\">... Content ...</span> some stuf </div>"
echo $testers| ssed -R -e 's/<[\w ="/]+>// g' 
```

结果是。

```
... Content ... some more stuf 
```

干杯。

# jquery - jQuery 验证插件和 jQuery Mobile - 将错误类添加到 fieldset/.ui-controlgroup-controls

> ID：10279640
> 
> 赞同：2
> 
> 时间：2012-04-23T11:28:05.510
> 
> 标签：jquery, jquery-mobile, jquery-validate

我正在尝试验证一组表单输入——在​​本例中是一组单选按钮，位于使用 jQuery Mobile 构建的表单上。如果未选择组中的任何按钮，我想向整个字段集（或者，更确切地说，.ui-controlgroup-controls div）添加一个类，以便我可以重新设置组周围的边框样式。下面的代码将完成此操作，*但*一旦组有效，就不会撤消更改。如果出现错误，我有没有办法触发添加类，然后在字段有效时将其删除？谢谢！

（我正在使用 jQuery Mobile 1.1.0、jQuery 1.7.2 和 Validate 1.9.0）

```
$('#contact').validate({
    errorPlacement: function(error, element)
    {
        if( element.closest('#employee-group').length ) {
        // special error handling
        $('#employee-group .ui-controlgroup-controls').toggleClass('grouperror');
    } else {
        // generic handling
        error.insertAfter(element);
    }
    }
}); 
```

# c# - WPF 图像工具提示锁定文件

> ID：10279650
> 
> 赞同：0
> 
> 时间：2012-04-23T11:28:52.093
> 
> 标签：c#, xaml

我有一个显示图像的列表框，该列表为用户提供了使用默认图像编辑器打开文件的选项。在列表中，图像有一个工具提示，显示图像的更大版本。

我的问题是，当工具提示显示图像被锁定并且用户尝试编辑图像时，当他尝试保存时，他将获得访问共享冲突。

xaml 非常简单

```
<Image x:Name="_thumbImage" Source="{Binding Path}" >                  
                            <Image.ToolTip>
                                <Grid>
                                    <Image Source="{Binding Path,BindsDirectlyToSource=True,IsAsync=False}" Stretch="Fill" HorizontalAlignment="Center" Height="300" Width="300"></Image>
                                </Grid>
                            </Image.ToolTip>

                        </Image> 
```

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:54:56.737

您可以显式创建一个`BitmapImage`将图像缓存在内存中并释放文件的方法。请注意，不需要两次加载图像，因此我将其放入资源中。

```
<Grid>
  <Grid.Resources> 
     <BitmapImage x:Key="Source" UriSource="{Binding Path}" />
  </Grid.Resources>                    
  <Image x:Name="_thumbImage" Source="{StaticResource Source}">
    <Image.ToolTip>
      <Grid>
        <Image Source="{StaticResource Source}" Stretch="Fill" 
                HorizontalAlignment="Center" 
                Height="300" Width="300">
        </Image>
      </Grid>
    </Image.ToolTip>
  </Image>
</Grid> 
```

# c# - 从流利的nhibernate中的子对象获取父对象

> ID：10279652
> 
> 赞同：1
> 
> 时间：2012-04-23T11:28:58.410
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有以下场景，其中“父母”包含具有一对多关系的“孩子”列表。

```
public class Parent
{
public virtual int Id { get; protected set; }
public virtual String Title { get; set; }
public virtual IList<Child> Child { get; set; }
}

public class Child
{
public virtual int Id { get; protected set; }
public virtual String Code{ get; set; }
} 
```

在某些时候，我有一个“子”类的对象，我想从中获取其各自的父对象。任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:23:28.233

你可以这样做：

```
var childId = "..."; 

Child childAlias = null;
session.QueryOver<Parent>
  .JoinAlias(parent => parent.Children, () => childAlias)
  .Where(() => childAlias.Id == childId)
  .TransformUsing(Transformers.DistinctRootEntity)
  .SingleOrDefault(); 
```

# android - 继续播放片段中的配置更改视频

> ID：10279653
> 
> 赞同：1
> 
> 时间：2012-04-23T11:28:59.037
> 
> 标签：android, orientation, fragment, android-videoview

我有一个包含 VideoView 的片段，我希望它在方向改变时继续播放。

我一直在寻找类似的案例，但我不知道最好的方法。

如果我在片段的 onCreate 方法中“setRetainInstance(true)”似乎还不够

任何人都可以给我一点帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:54:21.030

您可以尝试在片段中覆盖 onConfigurationChanged，将其留空：

```
@Override
public void onConfigurationChanged(Configuration newConfig){
    super.onConfigurationChanged(newConfig);        

} 
```

适用于正常活动，因此应该在片段中正常工作。您可能还需要在父活动中覆盖它。

**编辑：**

忘了说，你需要在活动的清单中添加以下标签。

```
android:configChanges="orientation" 
```

# php - 在 PHP 中接收多维文本框数组

> ID：10279658
> 
> 赞同：0
> 
> 时间：2012-04-23T11:29:23.473
> 
> 标签：php, arrays

我有要发布的文本框值。我如何把它放在 PHP 数组中。html 如下：

```
<input type="text" name="ItemName[1][2]" >
<input type="text" name="ItemName[1][3]" >
<input type="text" name="ItemName[1][4]" >

$ItemNamesArray = $_POST[] ..... ????? What do I do in this step??? 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:32:53.943

如果您使用`var_dump($_POST)`，您会立即看到答案：

```
array(1) {
  ["ItemName"]=>
  array(1) {
    [1]=>
    array(3) {
      [2]=>
      string(1) "a"
      [3]=>
      string(1) "b"
      [4]=>
      string(1) "c"
    }
  }
} 
```

所以你访问`$_POST['ItemName'][1][2]`例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:32:27.097

```
$_POST['ItemName'][1][2];
$_POST['ItemName'][1][3];
$_POST['ItemName'][1][4]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:33:11.527

可以像 $ItemNamesArray = $_POST['ItemName'] 一样访问 post 数组

你可以访问第一个项目`$ItemNamesArray[1][2]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:37:01.150

好吧，在你的例子中：

```
<input type="text" name="ItemName[1][2]" >
<input type="text" name="ItemName[1][3]" >
<input type="text" name="ItemName[1][4]" > 
```

`$_POST`键将是名称，因此，`ItemName`因为 PHP 将后续括号视为数组键，所以值将是：

```
$_POST['ItemName'][1][2]
$_POST['ItemName'][1][3]
$_POST['ItemName'][1][4] 
```

因此，如果您想要所有项目名称，请使用：

```
$itemNames = $_POST['ItemName']; 
```

供参考，

1.  您应该在使用之前清理并验证所有输入。

2.  如果您实际上没有`ItemName[2][1]`or`ItemName[0][1]`等​​，那么以下内容会更有意义：

    ```
     <input type="text" name="ItemName[]" />
     <input type="text" name="ItemName[]" />
     <input type="text" name="ItemName[]" /> 
    ```

这只会在它们进入时设置索引，而不是预先设置它们。

# android - 为什么我的 ProgressDialog 监听 ANY KEY（触摸）而不是后退按钮来关闭？

> ID：10279660
> 
> 赞同：6
> 
> 时间：2012-04-23T11:29:30.220
> 
> 标签：android, dialog, progress, back-button

我有一个像这样实现的 ProgressDialog：

```
// show progress dialog while date is loading
        progressDialog = ProgressDialog.show(XYActivity.this, getResources().getString(R.string.progress_dialog_please_wait), getResources().getString(R.string.progress_dialog_loading), true);
        progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener() {
            @Override
            public void onCancel(DialogInterface dialog) {
                cancel(true);
                Log.w(LOGTAG, "loading cancelled via back button");
            }

        });
        progressDialog.setCancelable(true); 
```

此 ProgressDialog 在 AsyncTask (PreExecute) 内实现，因此 cancel(true) 方法会停止 AsyncTask。这一切都很好。

**问题**是，我可以通过屏幕上**的任何随机触摸来****取消**ProgressDialog 。我只想通过按后退按钮来关闭对话框。请帮我！谢谢你们。

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T06:39:22.620

这对我有用：

```
@Override
protected void onPreExecute() {
    progressDialog = ProgressDialog.show(context, "Title", "Loading...", true, true, new OnCancelListener() {
        @Override
        public void onCancel(DialogInterface dialog) {
            cancel(true);
        }
    });
    progressDialog.setCanceledOnTouchOutside(false);
} 
```

GedankenNebel`setCanceledOnTouchOutside`建议的非常干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:34:54.600

试试下面的说明

不确定整个取消按钮...我听说过 onCancel() 方法未正确触发的报告。我的解决方案只是在对话框上制作一个普通按钮，并在按下按钮时调用返回。

```
private void createCancelProgressDialog(String title, String message, String buttonText)
{
    cancelDialog = new ProgressDialog(this);
    cancelDialog.setTitle(title);
    cancelDialog.setMessage(message);
    cancelDialog.setButton(buttonText, new DialogInterface.OnClickListener() 
    {
        public void onClick(DialogInterface dialog, int which) 
        {
            // Use either finish() or return() to either close the activity or just the dialog
            cancelDialog.dismiss();
        }
    });
    cancelDialog.show();
} 
```

然后只需在活动中的其他地方使用简单的调用方法

```
createCancelProgressDialog("Loading", "Please wait while activity is loading", "Cancel"); 
```

相当简单的解决方案，但它可以解决问题；）还只是要注意 cancelDialog 是一个活动擦除变量，如果您不需要从其他地方调用它，那么您应该能够仅将变量的范围限制为那个方法。**

# xcode - cocos2d : 检测两个圆之间的碰撞

> ID：10279662
> 
> 赞同：0
> 
> 时间：2012-04-23T11:29:36.540
> 
> 标签：xcode, cocos2d-iphone, collision-detection, sprite, geometry

所以我有两个精灵是圆圈。我想知道它们什么时候发生碰撞。我的问题是它们像矩形一样碰撞。我不想使用 box2d，只是使用 cocos2d 有没有办法检测两个圆之间的碰撞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:34:20.987

如果您有（或可以获得）圆的半径，那么您可以将半径的总和与中心到中心的距离进行比较。

某些计算领域的一个常见技巧是使用距离平方（因此您不必承受平方根的计算冲击）。在这种情况下，您可以将 d 平方与 (r1 + r2) 平方进行比较。

# ruby-on-rails - 如何使用文本搜索为列分配顺序或权重？

> ID：10279665
> 
> 赞同：0
> 
> 时间：2012-04-23T11:29:41.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, full-text-search, texticle

我正在使用 texticle 搜索产品模型的名称和描述属性。

到目前为止，texticle 似乎将在描述中找到的查询排名高于在名称中找到的查询。我想做相反的事情。

换句话说，名称列中的匹配项应该比描述列中的匹配项具有更大的权重。

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T03:33:47.190

虽然 texticle 开箱即用的效果很好，但它是一个相当简单的实现，并没有公开所有 postgresql 的全文搜索功能。

[pg_search](https://github.com/Casecommons/pg_search)公开了更多 postgresql 的全文搜索功能，并且似乎也比 texticle 更积极地维护。

# matlab - 如何在 MRI 图像中从大脑中分割出头骨

> ID：10279667
> 
> 赞同：2
> 
> 时间：2012-04-23T11:30:03.070
> 
> 标签：matlab

我得到了一个数据集，其中包含来自大脑 MRI 扫描的图像尺寸。有了这些图像，我将移除头骨，这样就只剩下大脑了。有没有什么好的分割技术可以用于这些类型的图像？

[![脑](../Images/b0335ba6569b311df5a4f024aa708525.png)](https://i.stack.imgur.com/3nMmn.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:47:45.010

看起来头骨总是在图像的外面，并且总是与大脑分离得很好。

# 方法 1：第一原则

在图像中心画一条线，当你找到第一个白色像素时停止——这将是头骨的一部分。找到连接到该像素的所有像素。删除它们，你就剩下大脑了。

# 方法二：使用图像处理工具箱

这就是“连接组件分割”问题。MATLAB 的图像处理工具箱有一个`bwconncomp()`函数可以枚举黑白图像中的连通分量。[请参阅本教程](http://au.mathworks.com/help/images/image-enhancement-and-analysis.html)，了解如何计算照片中的米粒 - 非常相似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:29:19.320

SPM8（Statistical Parametric Mapping）是一款免费的神经影像学软件，但需要 MATLAB。它可以使用 MATLAB 进行编程，它具有“分段”功能，您可以使用该功能将灰质、白质和脑脊液与其他部分分开。使用 SPM8，您还可以重新对齐您的图像并将它们标准化以匹配某些模板图像等，如果您愿意的话，还有很多其他的事情，这取决于您是否有解剖学或功能性 MR 图像，或两者兼而有之。

FSL（FMRIB 软件库）是一个免费的替代品（不需要 MATLAB，可以使用 Python 编程），它还具有分段功能和许多其他功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-24T10:28:04.033

我建议您使用 SPM 进行头骨剥离 [https://www.nitrc.org/projects/mrtool/](https://www.nitrc.org/projects/mrtool/)

将分割应用于您的结构体积将生成许多掩码（名为 c#filename.nii 的文件），指示不同的感兴趣组织。

进行颅骨剥离，保留 3 类灰质、白质和 CSF（掩码 c1.nii 至 c3.nii）并移除其余部分。分割后，只需使用 SPM 'imcalc' 选项并将原始结构体积乘以这些掩码的总和。

蚂蚁：
[https ://github.com/ANTsX/ANTs/blob/master/Scripts/antsBrainExtraction.sh](https://github.com/ANTsX/ANTs/blob/master/Scripts/antsBrainExtraction.sh)

首先，您需要 antsBrainExtraction.sh 脚本来运行大脑提取。您可以在安装步骤克隆的文件中找到它。如果您使用二进制文件，它可能不会存在。因此，您需要创建一个名为 antsBrainExtraction.sh 的空文件。现在到这里，将所有代码复制到您的文件中并保存。在任何情况下，您都应该得到用于大脑提取的 shell 脚本。

其次，您需要有一个模板来执行大脑提取。Gorgolewski 博士推荐了 OASIS。继续从这里下载。其他模板也可以使用，但由您决定哪个模板最适合您的数据。

现在我们已经准备好进行大脑提取本身了。实际上，这很简单。您只需要从 bash 终端运行以下命令：

antsBrainExtraction.sh -d -a \ -e -m -o

3DSlicer，最新版本： [https ://www.slicer.org/wiki/Modules:SkullStripperModule](https://www.slicer.org/wiki/Modules:SkullStripperModule)

顺便说一下，蚂蚁和切片器使用类似的方法。如果您还有其他问题，请告诉我

# mysql - 否定 MySQL 查询

> ID：10279671
> 
> 赞同：0
> 
> 时间：2012-04-23T11:30:35.540
> 
> 标签：mysql, null

否定 MySQL 查询的最佳方法是什么，即对于任何条件，*强制*它不返回任何记录。

我使用过`AND 1=0`似乎可行的方法，但我很想知道是否有这样的标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:33:35.160

只需添加一个`false`条件

```
select * from your_table where false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:34:29.827

添加一个总是评估为的内联谓词`FALSE`对我来说似乎是最好的方法。“内联”是指您不使用绑定变量。或者，您可以使用

```
LIMIT 0 
```

这具有更具表现力的优势，但取决于查询优化器的实现，它可能会更慢（未经验证）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:33:57.603

您也可以使用`AND false`. 不知道这两个选项之间是否有任何性能差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:01:47.520

在执行之前，您的常量表达式“1 = 0”将被评估为“false”，这只是“0”的别名，因此通过提供最终结果来避免 MySQL 评估表达式会更快、更容易阅读：

```
AND FALSE 
```

# javascript - 如何为显示标签表中的行赋予唯一的行 ID？

> ID：10279674
> 
> 赞同：0
> 
> 时间：2012-04-23T11:30:44.847
> 
> 标签：javascript, displaytag, delete-row

我正在使用显示标签在我的 JSP 上显示用户列表。我在每一行都有一个删除按钮，用于从列表中删除特定的行/用户。为此，我正在使用 ajax。

用户正在使用 ajax 从数据库中删除。但是因为我使用的是ajax。直到我刷新页面，用户仍然在显示标签列表中。

有什么办法可以使用javascript从显示表中删除行？

据我所知，可以使用javascript从表中删除行，但您至少需要知道行ID。

那么，如何为显示表中的每一行赋予唯一的行 ID？

请帮忙。

下面是我的代码

```
<display:table name="employeeUpdateList" pagesize="50" 
    class="listingTable" keepStatus="true" cellpadding="0px"
    cellspacing="0px" id="employeeUpdate" export="true" requestURI="">
    <display:setProperty name="export.decorated" value="true" />
    <display:setProperty name="export.excel.filename"
        value="Employee Update List.xls" />
    <display:column title="What is changed" property="columnName"></display:column>
    <display:column title="From" property="oldValue"></display:column>
    <display:column title="To" property="newValue"></display:column>
    <display:column title="Effective Date">
        <fmt:formatDate value="${employeeUpdate.effectiveDate}"
            pattern="dd MMMM yyyy" />
    </display:column>
    <display:column title="Changed By" property="changedBy.fullname"></display:column>
    <display:column title="Changed On">
        <fmt:formatDate value="${employeeUpdate.changedOn }"
            pattern="dd MMMM yyyy hh:mm:ss" />
    </display:column>
    <display:column media="html"
        style="text-align :center!important;padding:0px!important">
        <input class="input-button-small" type="button"
            value="<spring:message code='button.delete' />"
            onclick="deleteEmployeeUpdate('${deleteEmployeeUpdateUrl}','${employeeUpdate.id}')" />
    </display:column>
    <display:setProperty name="paging.banner.item_name"
        value="Employee Update" />
    <display:setProperty name="paging.banner.items_name"
        value="Employee updates " />
</display:table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:33:24.537

**更新**- 现在您已经发布了代码，我看到您正在使用 DOM0`onclick="..."`处理程序。我不建议这样做（见下文，这是进行事件委托的经典用例 - 在表级别而不是单个按钮上观察点击），但是..

您需要修改您的`deleteEmployeeUpdate`函数以接受另一个参数，即被单击的按钮。所以：

```
onclick="deleteEmployeeUpdate(this, '${deleteEmployeeUpdateUrl}','${employeeUpdate.id}')" 
```

和

```
function deleteEmployeeUpdate(button, url, id) {
    // ...
} 
```

然后在该函数中删除包含按钮的行：

```
var row = button.parentNode;
while (row && row.tagName.toLowerCase() !== "tr") {
    row = row.parentNode;
}
if (row) {
  row.parentNode.removeChild(row);
} 
```

有关使用事件委托的解决方案，请参见下文，在此之下，还有一些方便的阅读材料。

* * *

您无需提供行 ID。当您处理删除按钮上的`click`事件时，通常您对该删除按钮元素的引用为`this`. 它有一个[`parentNode`属性](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1060184317)，即包含它的节点（元素）。这可能是一个表格单元格 ( `td`)。*它*还有一个`parentNode`属性，大概是行 ( `tr`)，它也有一个通常是 a 的父级`tbody`，等等。

您可以通过调用其父节点的[`removeChild`函数](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1734834066)并传入`tr`元素来删除一行。

这是一个完整的示例：[Live copy](http://jsbin.com/acumof) | [来源](http://jsbin.com/acumof/edit)

HTML：

```
<table id="theTable">
  <tbody>
    <tr><td>First row</td><td><button class="delete">Delete</button></td></tr>
    <tr><td>Second row</td><td><button class="delete">Delete</button></td></tr>
    <tr><td>Third row</td><td><button class="delete">Delete</button></td></tr>
    <tr><td>Fourth row</td><td><button class="delete">Delete</button></td></tr>
  </tbody>
</table> 
```

JavaScript：

```
(function() {

  // Get a reference to the table
  var theTable = document.getElementById("theTable");

  // Watch for clicks
  hookEvent(theTable, "click", function(event) {
    var elm, row, tbody;
    elm = event.target
    while (elm && elm.className !== "delete") {
      elm = elm.parentNode;
    }
    if (elm) {
      // It's the delete button, remove this row
      row = elm.parentNode.parentNode; // Parent of button's parent
      tbody = row.parentNode;
      tbody.removeChild(row);
    }
  });

  // === Basic utility functions

  function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = String(msg);
    document.body.appendChild(p);
  }

  function hookEvent(element, eventName, handler) {
    // Very quick-and-dirty, recommend using a proper library,
    // this is just for the purposes of the example.
    if (typeof element.addEventListener !== "undefined") {
      element.addEventListener(eventName, handler, false);
    }
    else if (typeof element.attachEvent !== "undefined") {
      element.attachEvent("on" + eventName, function(event) {
        return handler(event || window.event);
      });
    }
    else {
      throw "Browser not supported.";
    }
  }
})(); 
```

阅读：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

* * *

FWIW，我强烈建议使用一个好的 JavaScript 库，如[jQuery](http://jquery.com)、[Prototype](http://prototypejs.org)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他任何一个](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)。该示例变得非常短，这显示了您可以如何专注于您正在尝试构建的内容，而不是纠结于低级 DOM API 的细节。

比如上面使用jQuery：[Live copy](http://jsbin.com/acumof/2) | [来源](http://jsbin.com/acumof/2/edit)

HTML：

*（不用找了）*

JavaScript：

```
jQuery(function($) {
  $("#theTable").on("click", "button.delete", function() {
    $(this).closest("tr").remove();
  });
}); 
```

这适用于 jQuery 1.7 及更高版本。如果你之前使用过一些东西，你会使用[`delegate`](http://api.jquery.com/delegate)而不是[`on`](http://api.jquery.com/on)（注意参数的顺序改变）：

```
jQuery(function($) {
  $("#theTable").delegate("button.delete", "click", function() {
    $(this).closest("tr").remove();
  });
}); 
```

几乎任何其他库都将同样简单。

# android - 我们如何在android中设置一个只允许我们输入正整数的文本字段

> ID：10279683
> 
> 赞同：0
> 
> 时间：2012-04-23T11:31:44.133
> 
> 标签：android

如何在 ANDROID 中设置仅允许正整数（如 0、1、2、3、4 等）的文本字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:36:27.187

将此行放在 xml 中：

```
 android:inputType="numberSigned" 
```

# .net - 面板上的 MouseUp？

> ID：10279687
> 
> 赞同：1
> 
> 时间：2012-04-23T11:31:53.163
> 
> 标签：.net, winforms

我创建了一个新的`WinForm`. 在那个 WinForm 中，我放了一个`Panel`. 停靠=填充。

运行项目。
**双击表单标题（最大化）**

在面板上获取 mouseUp：

> 函数：WindowsApplication1.Form1.Panel1_MouseUp(Object, System.Windows.Forms.MouseEventArgs)，线程：0x2068 主线程

它是错误还是功能？))

我知道当我双击面板的某些部分时，鼠标在鼠标下一会儿，但是我没有在面板上任何 mouseUp，但是？！

我的问题：我的面板中有一些可以选择或不选择的对象。当我单击面板上的 (MouseUp) 时（在“空白”空间，没有对象），通常我会取消选择所有对象。

但在最大化情况下，我应该保持对象选择不变！

如何“过滤” MouseUp 的最大化情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:39:39.777

好吧，你完美地描述了它

1.  鼠标按下标题
2.  MouseUp 在标题上
3.  鼠标按下标题
4.  窗口最大化，现在鼠标在窗体上。
5.  窗体上的 MouseUp。

即使您是正确的，并且这种行为非常烦人且无用，但在逻辑上应该是这样。

我建议尽可能避免使用 MouseDown/MouseUp。尽可能使用 MouseClick/DblClick。

问候，

编辑：

我有两个想法给你：

**在没有 MouseDown 的情况下跟踪 MouseUp。**

```
private bool bMouseDownState = false;

private void Form1_MouseDown(object sender, MouseEventArgs e)
{
    bMouseDownState = true;
}

private void Form1_MouseUp(object sender, MouseEventArgs e)
{
    if (!bMouseDownState)
        return;
    bMouseDownState = false;
} 
```

**注意 Maximize 事件并忽略 MouseUp。**

但是当窗口几乎最大化（这不会导致鼠标向上！）

最后忽略随后的鼠标（取消选择对象）。

**最后一件事——为什么要发明轮子？** 使用已经制作好的画布（visio？）

# c - GetTextMetrics 为 Courier New 返回不同的最大和平均字符宽度

> ID：10279688
> 
> 赞同：2
> 
> 时间：2012-04-23T11:32:01.793
> 
> 标签：c, winapi, windows-7, font-size, c++builder-6

我正在使用在 Windows 7 上运行的 Borland C++ Builder 6 维护一个应用程序。

该应用程序使用字体 Courier New 错误地绘制文本，因为每个字母都被略微切断。问题在于调用 GetTextMetrics 方法时，因为它使用不同的 tmAveCharWidth 和 tmMaxCharWidth 值填充 TEXTMETICS 结构。然后应用程序使用 tmAveCharWidth 来计算字符宽度是错误的，因为该值可能小于 tmMaxCharWidth。这个问题我会解决。

我很好奇为什么 GetTextMetrics 会为 Courier New 返回不同的 tmAveCharWidth 和 tmMaxCharWidth 值？我的理解是 Courier New 是等宽字体，并且 tmAveCharWidth 和 tmMaxCharWidth 应该相同。我用其他等宽字体测试了这个假设是正确的。

这是有问题的代码部分：

```
hFont = CreateFontIndirect(&lpInstData->lf);

hDC = GetDC(hWnd);
hFontOld = SelectObject(hDC, hFont);

GetTextMetrics(hDC, &tm);
lpInstData->nCharHeight = tm.tmHeight;
lpInstData->nCharWidth = tm.tmAveCharWidth; <--- Should be using tmMaxCharWidth 
```

这是我选择 12 号 Courier New 时运行的代码。

[传递给 CreateFontIndirect 的参数](http://i.stack.imgur.com/IUyqO.png)

[从 GetTextMetrics 返回的 TEXTMETRICS 结构](http://i.stack.imgur.com/bbh5v.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:55:48.693

我发现这确实是 ClearType 在工作（感谢 Deanna）。关闭 ClearType 可以在不更改任何代码的情况下更正显示问题，尽管我仍然需要更正应用程序如何使用 ClearType。

我还发现 Windows XP 上不存在该问题，因为默认情况下 ClearType 是关闭的，而在 Windows 7（和 Vista）中它默认是打开的。

# python - 如何导入上一级的模块并使用最新的定义？

> ID：10279690
> 
> 赞同：2
> 
> 时间：2012-04-23T11:32:09.370
> 
> 标签：python

**测试.py**

```
import unittest
import sys
import os
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), os.path.pardir)))
import my_module.ext

print sys.path
print dir(my_module.ext) 
```

但是`dir`给了我旧的功能。一个月前我`easy_install`是一个旧版本，当我运行时，`python tests.py`我得到了所有旧功能。

我需要目前存在的新定义`my_module.ext`

```
../
  - my_module/
      - __init__.py
      - ext.py
      - core.py
      - lib.py
  - tests
      - tests.py 
```

知道如何实现这一目标吗？谢谢。不安装它的原因是因为在部署库之前运行测试是一个好习惯。

仅供参考，它们不是课程。`my_module`可以做成鸡蛋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:36:50.867

尝试 sys.path.insert(0, /path/to/module) 而不是 sys.path.append

# c - 静态链接库的类似 dlsym 的行为

> ID：10279693
> 
> 赞同：4
> 
> 时间：2012-04-23T11:32:10.230
> 
> 标签：c, linux, ld

我正在尝试在 C 中编写一种调度函数，它应该接收一个由函数名称组成的字符串，然后从调度函数内部调用在接收到的参数中指定名称的函数。重点是我不想在动态加载的库中定义函数。流程应该是这样的。

文件1.c

```
void hello()
{
   fprintf(stderr,"Hello world\n");
}

void myfunc()
{
   mydispatch("hello");
} 
```

文件2.c

```
void mydispatch(const char *function)
{
...
} 
```

我知道这种结构可能有点奇怪，但我主要想知道是否可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:11:12.053

您可以使用 BFD 在运行时从符号名称中获取地址。

```
#include <stdio.h>
#include <stdlib.h>
#include <bfd.h>
#include <string.h>

void func1(int n)
{
    printf("%d\n", n);
}

void * addr_from_name(char * filename, char * symname)
{
    bfd *        ibfd;
    asymbol **   symtab;
    symbol_info  info;
    void *       symaddress = NULL;
    long         size;
    long         syms;
    unsigned int i;

    bfd_init();

    ibfd = bfd_openr(filename, NULL);
    bfd_check_format(ibfd, bfd_object);

    size   = bfd_get_symtab_upper_bound(ibfd);
    symtab = malloc(size);
    syms   = bfd_canonicalize_symtab(ibfd, symtab);

    for(i = 0; i < syms; i++) {
        if(strcmp(symtab[i]->name, symname) == 0) {
            bfd_symbol_info(symtab[i], &info);
            symaddress = (void *)info.value;
        }
    }

    bfd_close(ibfd);
    return symaddress;
}

int main(void)
{
    void (*func)(int) = addr_from_name("/homes/mk08/Desktop/lala", "func1");
    printf("%p\n", func);
    func(5);
    return EXIT_SUCCESS;
} 
```

在这种情况下，我硬编码`filename`，但动态获取它是微不足道的。假设您的源代码/二进制文件被调用`lala`，您可以像这样编译和运行：

```
gcc -Wall -std=gnu99 lala.c -o lala -lbfd && ./lala 
```

在我的系统上，打印：

```
0x400814
5 
```

请注意，此方法需要完整的符号表。为了减少开销，您可以在初始化例程中重复使用上面的代码。在那里，您将存储从函数名称到地址的映射。这导致生成查找表的一次性成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:35:55.910

你当然可以这样做：

```
void mydispatch(const char *function)
{
    if (!strcmp(function, "hello")
        hello();
    else if (!strcmp(function, "goodbye")
        goodbye();
} 
```

和你相处得很好；在过去，许多语言解释器都是以这种方式建造的。

至于做一些更动态的事情：静态链接库根本不存在必要的运行时结构。无论你做什么，你都必须手动或自动创建某种调度表（就像我在这里展示的那样）——但你必须自己做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:48:41.657

也许您正在寻找以下类型的解决方案：

文件1.c：

```
void myfunc()
{
   my_function_type fun = search_function( "operation1" );
   fun(); 
} 
```

工具.h：

```
typedef void (*my_function_type)( void );
void register_function( my_function_type fp, const char* name );
my_function_type search_function( const char* name ); 
```

文件2.c：

```
static void mydispatch( void )
{
...
}    

static void __attribute__ ((constructor)) register_functions()
{
     register_function( mydispatch, "operation1" );
} 
```

在该解决方案中，当您添加功能时，您不需要再次编译旧文件。只需编译新文件并链接。

# jquery - 绘画应用程序中的画布奇怪

> ID：10279695
> 
> 赞同：0
> 
> 时间：2012-04-23T11:32:18.533
> 
> 标签：jquery, canvas, paint

我将这个画布绘画应用程序视为基本模板，但希望当您只需在画布上单击鼠标时，一些可以帮助缓解问题。你似乎得到一条线而不是一个简单的点...... http://luhuiya.byethost7.com/demo/mspaint.html

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:38:36.237

您正在通过语句 draw(beginX, beginY, e.pageX , e.pageY); 在 mouseup 事件中绘制点 如下所示。e.pageX-8 和 e.pageY-8 导致渲染线而不是点。将其更改为 e.pageX 和 e.pageY。

我已经评论了之前的声明，并在 mouseup 事件中写了新的声明。

```
 $("#myCanvas").mouseup(function(e) {
      // draw(beginX, beginY, e.pageX-8 , e.pageY -8);
      draw(beginX, beginY, e.pageX , e.pageY);
      isDraw = false;
  }); 
```

# android - 在 ListView 中存储 CheckBox 状态

> ID：10279709
> 
> 赞同：1
> 
> 时间：2012-04-23T11:33:28.093
> 
> 标签：android, checkbox, android-listview, state

我正在尝试实现一段我发现的代码来存储 a 的状态，`CheckBox`但`ListView`它没有工作。有谁知道为什么我的适配器中的代码不起作用？

```
package kevin.erica.box;

import java.util.ArrayList;

import kevin.erica.box.R;

import android.R.color;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.TextView;

public class MobileArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;
    private ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();

    public MobileArrayAdapter(Context context, String[] values) {
        super(context, R.layout.list_adapter, values);
        this.context = context;
        this.values = values;

        for (int i = 0; i < this.getCount(); i++) {
            itemChecked.add(i, false); // initializes all items value with false
        }
    }

    @Override
    public View getView(final int position, View covertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.list_adapter, parent, false);
            CheckBox textView = (CheckBox) rowView.findViewById(R.id.checkBox1);
            textView.setTextColor(0xFFFFFFFF);
            textView.setText(values[position]);
            //Store state attempt
            final CheckBox cBox = (CheckBox) rowView.findViewById(R.id.checkBox1); // your
            // CheckBox
            cBox.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                CheckBox cb = (CheckBox) v.findViewById(R.id.checkBox1);

                if (cb.isChecked()) {
                    itemChecked.set(position, true);
                    // do some operations here
                } else if (!cb.isChecked()) {
                    itemChecked.set(position, false);
                    // do some operations here
                }
            }
        });
        cBox.setChecked(itemChecked.get(position)); // this will Check or Uncheck the
        // CheckBox in ListView
        // according to their original
        // position and CheckBox never
        // loss his State when you
        // Scroll the List Items.
        return rowView;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:40:53.567

您的问题没有说明应用程序关闭后存储数据的任何内容。要存储检查`CheckBoxes`，您可以使用数据库或简单文件。`CheckBox`Bellow 是将状态存储在数据库中的示例：

```
public class SimplePlay extends ListActivity {

    private String[] soundnames;
    private Helper mHelper = new Helper(this, "position_status.db", null, 1);
    private SQLiteDatabase statusDb;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // this is to simulate data
        soundnames = new String[40];
        for (int i = 0; i < 40; i++) {
            soundnames[i] = "Sound " + i;
        }
        // Retrieve the list of position that are checked(if any) from the
        // database
        statusDb = mHelper.getWritableDatabase();
        Cursor statusCursor = statusDb.rawQuery("SELECT * FROM status", null);
        int[] savedStatus = null;
        if ((statusCursor != null) & (statusCursor.moveToFirst())) {
            savedStatus = new int[statusCursor.getCount()];
            int i = 0;
            do {
                savedStatus[i] = statusCursor.getInt(0);
                i++;
            } while (statusCursor.moveToNext());
        }
        // if the cursor is null or empty we just pass the null savedStatus to
        // the adapter constructor and let it handle(setting all the CheckBoxes
        // to unchecked)
        setListAdapter(new MobileArrayAdapter(this, soundnames, savedStatus));
    }

    public class MobileArrayAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final String[] values;
        private ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();

        public MobileArrayAdapter(Context context, String[] values,
                int[] oldStatus) {
            super(context, R.layout.adapters_simpleplay_row, values);
            this.context = context;
            this.values = values;

            // make every CheckBox unchecked and then loop through oldStatus(if
            // not null)
            for (int i = 0; i < this.getCount(); i++) {
                itemChecked.add(i, false);
            }
            if (oldStatus != null) {
                for (int j = 0; j < oldStatus.length; j++) {
                    itemChecked.set(oldStatus[j], true);
                }
            }
        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View rowView = convertView;
            if (rowView == null) {
                LayoutInflater inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                rowView = inflater.inflate(R.layout.adapters_simpleplay_row,
                        parent, false);
            }
            CheckBox cBox = (CheckBox) rowView.findViewById(R.id.checkBox1);
            cBox.setTextColor(0xFFFFFFFF);
            cBox.setText(values[position]);
            cBox.setTag(new Integer(position));
            cBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    int realPosition = (Integer) buttonView.getTag();
                    if (isChecked) {
                        itemChecked.set(realPosition, true);
                        // update the database to store the new checked item:
                        ContentValues cv = new ContentValues();
                        cv.put("list_position", realPosition);
                        statusDb.insert("status", null, cv);
                    } else {
                        itemChecked.set(realPosition, false);
                        // delete this position from the database because it was
                        // unchecked
                        statusDb.delete("status", "list_position = "
                                + realPosition, null);
                    }
                }
            });
            cBox.setChecked(itemChecked.get(position));
            return rowView;
        }
    }

    //for working with the database
    private class Helper extends SQLiteOpenHelper {

        public Helper(Context context, String name, CursorFactory factory,
                int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // the list_position will hold the position from the list that are
            // currently checked
            String sql = "CREATE TABLE status (list_position INTEGER);";
            db.execSQL(sql);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // Just for interface
        }

    }

} 
```

经过快速测试，代码可以工作。这只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:00:02.337

您可以做一件事，获取相同大小的布尔数组并存储它是否被单击

您还可以使用另一个类来存储检查状态...

这是多个联系人选择的示例，这肯定对您有所帮助.....

[多选联系人](https://stackoverflow.com/questions/9834723/checkbox-in-listview-for-multiple-selection-of-contacts)

**编辑：**

例子

```
public class simple List extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, GENRES));

    final ListView listView = getListView();

    listView.setItemsCanFocus(false);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
}

private static final String[] GENRES = new String[] { "india", "england", "London", "New york", "New jercy", "LA", "Pakistan", "srilanka", "bangladesh", "chin", "Australia", "Japan" };} 
```

# model-view-controller - 使用 JSF 2.0 对 GET 请求和动态页面创建进行依赖于 URL 的处理

> ID：10279710
> 
> 赞同：1
> 
> 时间：2012-04-23T11:33:29.090
> 
> 标签：model-view-controller, jsf, url-rewriting, get

我刚刚开始深入研究 JSF 2.0，它以组件为中心的架构具有一组固定的视图，用于构建具有丰富用户界面的 Web 应用程序。但是 JSF 2.0 是否也应该用于具有动态页面创建和许多页面的网站？一个例子：

我有一个不完整的国家数据库和这些国家不同年份的统计数据。国家和可用统计数据集每天都在变化。我想提供如下 URL：

*   [http://domain.com/context/country/germany.html](http://domain.com/context/country/germany.html) （有关国家的一般信息）
*   [http://domain.com/context/country/germany_2012.html（2010年国家统计](http://domain.com/context/country/germany_2012.html) ）

为每个国家创建一个视图是没有意义的，例如WEB-INF/pages/country/germany.xhtml 或/country/germany.xhtml。我认为我真的需要基于给定 URL 的密集处理来创建动态页面。但是 JSF 2.0 是为这种用例构建的吗？

我真的在考虑结合像 Velocity 这样的模板引擎切换到普通的旧 Servlet。我对 JSF 2.0 的了解非常有限，我不知道我是否应该使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:47:21.197

在最简单的情况下，您可以创建一个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，该过滤器映射到一个 URL 模式`/country/*`并将所有请求转发到单个 JSF 视图。

```
@WebFilter("/country/*")
public class CountryFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        req.getRequestDispatcher("/WEB-INF/country.xhtml").forward(req, res);
    }

    // ...
} 
```

在与 关联的托管 bean 的（post）构造函数中`country.xhtml`，您可以获取原始请求 URI，如下所示：

```
String originalUri = (String) externalContext.getRequestMap().get(RequestDispatcher.FORWARD_REQUEST_URI);
// ... 
```

您可以在 bean/view 中进一步使用它来动态预填充/呈现所需的 HTML 输出。

对于进一步的抽象和更细粒度的配置，您可能需要查看[PrettyFaces](http://ocpsoft.com/prettyfaces/)，它在幕后的深度基本相同。

# android - Android中如何在SplashScreen后台运行代码

> ID：10279711
> 
> 赞同：1
> 
> 时间：2012-04-23T11:33:31.653
> 
> 标签：android

我正在使用一个需要后台处理的应用程序，如下所示。

每当我将请求发送到 URL 时，我都会得到 JSON 格式的输出。在 JSON 中，我有一个布尔变量。如果布尔变量是`true`，我需要再次将请求发送到 URL，直到我得到布尔变量的值`false`。

但在前台，SplashScreen 应该与进度条一起运行。我怎样才能做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:59:43.950

您可以使用`AsyncTask<>`来实现这一点。您可以在以下网址了解更多信息：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

你的想法的流程可以是这样的：

1.  使用进度条启动启动活动。
2.  在内部`onCreate()`启动 AsyncTask 以获取 JSON，并更新`onProgressUpdate()`AsyncTask 函数中的进度条。
    *   当 AsyncTask 完成 [ `onPostExecute(..)`] 时，调用一个函数来解析 JSON，并检查`true`/`false`值
    *   如果`true`然后再次重复该任务。
    *   如果为 false，则停止 AsyncTask。
3.  现在您的 URL 获取任务已完成，您可以进入下一个活动。

您也可以使用自定义的`ProgressDialog`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:36:49.553

使用 AsyncTask，这是一个非常强大的工具，但可能像其他技术一样复杂...... AsynchTask 使用泛型类型。有一种你必须实现的方法。

```
protected T doInBackground(T... params) {
   // body of your method
} 
```

和其他方法。通常

```
protected T doInBackground {}
protected void onProgressUpdate(T... params)
protected void onPostExecute(T param) 
```

首先 T 服务于一些输入数据。在您的情况下，它可以是您的 URL，例如。这个方法（doInBackground）在后台线程上运行，我上面的同事是如何写的，他们可能写了所有的东西。很少有类似的例子它看起来如何：

```
private class DownloadAsyncTask extends AsyncTask<String, DataTransmitted, InputStream> {
      protected InputStream doInBackground(String... params) {

            int contentLength = 0;
            int buffLength = 0;
            int progress = 0;
            InputStream inputStream = null;
            try {

                URL url = new URL(params[0]);
                HttpURLConnection urlConntection = (HttpURLConnection) url.openConnection();
                urlConntection.setRequestMethod("GET");
                urlConntection.setAllowUserInteraction(false);
                urlConntection.setInstanceFollowRedirects(true);
                urlConntection.connect();
                if (urlConntection.getResponseCode() == HttpURLConnection.HTTP_OK) {
                    contentLength = urlConntection.getContentLength();
                    progressDialog.setMax(contentLength);
                    inputStream = urlConntection.getInputStream();

                    while ((buffLength = inputStream.read(MAX_BUFFER)) != -1) {
                        try {
                            Thread.sleep(1);
                            progress += buffLength;
                            DataTransmitted data = new DataTransmitted(progress, contentLength);
                            publishProgress(data);
                        }
                        catch (InterruptedException ex) {
                            Log.e(this.getClass().getName(), ex.getMessage());
                        }
                    }

                }
                else {
                    throw new IOException("No response.");
                }

            }
            catch (MalformedURLException ex) {
                Log.e(this.getClass().getName(), ex.getMessage());
            }
            catch (IOException ex) {
                Log.e(this.getClass().getName(), ex.getMessage());
            }
            return inputStream;
        }

      @Override
        protected void onProgressUpdate(DataTransmitted... data) {

            progressDialog.setProgress(data[0].getProgress());
            progressDialog.setMessage(data[0].getProgress() + " bytes downloaded.");
            data[0] = null;
        }

        @Override
        protected void onPostExecute(InputStream inStream) {
            progressDialog.dismiss();
            progressDialog.setProgress(0);
            DownloadedStream.inputStream = inStream;
            DownloadedStream.test = "Toto je len test...";
            Thread.currentThread().interrupt();
            downloadTask = null;
            new AlertDialog.Builder(DownloadPictureActivity.this)
                .setTitle("Download finished")
                .setMessage("Picture was downloaded correctly.")
                .setPositiveButton("Zobraziť", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dlg, int whichButton) {
                        // body of method

                    }
                })
                .setNegativeButton("Zavrieť", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dlg, int whichButton) {
                     //body of method   
                    } 
                })
                .show();
        }
} 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:46:24.720

当进度条在 ui 线程上运行时，使用 aynctask 或单独的线程在服务器上获取数据。

# python - 如何在单独的行中打印dict？

> ID：10279712
> 
> 赞同：4
> 
> 时间：2012-04-23T11:33:34.040
> 
> 标签：python, dictionary

```
import re
sums = dict()
fh= open('wordcount.txt','r')
for line in fh:
    words = [word.lower() for word in re.findall(r'\b\w+\b', line)]
    for word in (words):
        if word in sums:
            sums[word] += 1
        else:
            sums[word] = 1
print sums
fh.close 
```

结果显示

```
{'and': 1, 'heart': 1, 'love': 2, 'is': 1, 'pass': 1, 'rest': 1, 'wounded': 1, 'at': 3, 
'in': 3, 'lie': 1, 'winchelsea': 1, 'there': 1, 'easy': 1, 'you': 2, 'body': 1, 'be': 
1, 'rise': 1, 'shall': 4, 'may': 2, 'sussex': 1, 'montparnasse': 1, 'not': 3, 'knee': 
1, 'bury': 3, 'tongue': 1, 'champmedy': 1, 'i': 5, 'quiet': 1, 'air': 2, 'fresh': 1, 
'the': 1, 'grass': 1, 'my': 3} 
```

代码打印所有单词并计算频率单词使用。

我想在单独的行中打印 dict 。

```
'and': 1
'heart': 1
'love': 2
... 
```

有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T11:34:26.640

```
>>> from pprint import pprint
>>> pprint(sums)
{'air': 2,
 'and': 1,
 'at': 3,
 'be': 1,
 'body': 1,
 ....., # and so on...
 'you': 2} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T12:10:06.650

```
>>>for x in sums:
    print(repr(x),":",dic[x])

'and' : 1
'heart' : 1
'sussex' : 1
'rise' : 1
'love' : 2
'be' : 1
'may' : 2
'the' : 1
'is' : 1
'in' : 3
'body' : 1
'rest' : 1
'at' : 3
'pass' : 1
'not' : 3
'knee' : 1
'air' : 2
'bury' : 3
'tongue' : 1
'lie' : 1
'winchelsea' : 1
'i' : 5
'there' : 1
'grass' : 1
'quiet' : 1
'shall' : 4
'montparnasse' : 1
'fresh' : 1
'easy' : 1
'wounded' : 1
'you' : 2
'champmedy' : 1
'my' : 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T11:39:16.970

您可以使用`iteritems`迭代键和值，从而能够根据需要格式化输出。假设字符串作为键，整数作为值：

```
for k, v in d.iteritems():
    print '%s: %d' % (k, v) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:22:26.547

另一种使用 lambda 的复杂方法

```
f = lambda *x: null; 
f( *( print( x,":",y ) for x,y in mydict.iteritems() ) ) 
```

输出

```
key2 : 2
key1 : 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-08T12:40:07.133

无需使用任何附加功能，使用简单的 for 循环，

```
student = {"Name":"Chandler Bing","Age":24,"Subject":["Sarcasm","Joke"]}
print(student)
for i in student:
    print(i,":",student[i]) 
```

```
Name : Chandler Bing
Age : 24
Subject : ['Sarcasm', 'Joke'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-01T05:16:55.233

Python 3 - 方法名称和语法更新 - 不错的 swizzles 集合

1 - lambda 是一次性匿名函数，主要用于过滤器、映射、reduce 等。
这里创建了一个包含打印和键值迭代的函数。

```
f = lambda *x: None; 
f( *( print( x,":",y ) for x,y in genre_counting.items() ) )

Games : 3862
Productivity : 178
Weather : 72
Shopping : 122
Reference : 64
Finance : 104 
```

2 - repr() 返回对象的规范字符串表示。

```
for x in genre_counting:
print(repr(x),":",genre_counting[x])

'Games' : 3862
'Productivity' : 178
'Weather' : 72
'Shopping' : 122
'Reference' : 64
'Finance' : 104 
```

3 - %s 是一个字符串占位符；%i 是一个整数占位符

```
for k, v in genre_counting.items():
print( '%s : %i' % (k, v) )

Games : 3862
Productivity : 178
Weather : 72
Shopping : 122
Reference : 64
Finance : 104 
```

# mysql - sql内连接功能

> ID：10279717
> 
> 赞同：1
> 
> 时间：2012-04-23T11:33:49.027
> 
> 标签：mysql, inner-join

我有 3 张桌子`Animals`, `Type`, `Country`.

## 动物

```
*Id |   Name    | Type  | Location*
001 |   bear    |   1   |   54
003 |   snake   |   4   |   32
005 |   penguin |   3   |   46 
```

* * *

## 类型

```
*Id |   Name*   
1   |   Mammal  
3   |   Bird
4   |   Reptile 
```

* * *

## 县

```
*Id |   Name*
54  |   Canada
32  |   Africa
46  |   Antartica region 
```

* * *

我需要的输出如下所示`Animals a`，`Type t`并且`Country c`

## 动物名单

```
Id  |   Name of Animal  | Type of Animal    |   Country
a.id|   a.name          |   t.name          |   c.name 
```

下面的`List of Animals`输出是查询

```
select a.id, a.name, t.name, c.name
from Animals a
INNER JOIN Type t 
  ON t.id = a.Type
INNER JOIN Country c 
  ON c.Id = a.Location 
```

我知道如何创建`INNER JOIN`，有没有可能在我有表的地方`Animals`有很多记录和一些额外的字段（23 列）

现在如何`fields`在`Animals`不写 `a.id`, `a.name`, `a.xyz`, `a.lkf`, `a.lfsl`, `t.name`, .... 一些与动物相关的额外字段的情况下将这些表与所有表连接起来

是否有任何方法或查询，我可以在其中所有动物记录以及`INNER JOIN`其他表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:36:07.133

> 现在如何在不写的情况下将这些表与所有`fields`表`Animals`连接 起来`a.id, a.name, a.xyz, a.lkf, a.lfsl, t.name, .... some extra fields related to animals`

尝试`SELECT a.*`从 Animals 表中选择所有列。

（如果这就是你想要做的......如果我正确理解了这个问题）

# c - 将字符附加到C中的字符串？

> ID：10279718
> 
> 赞同：54
> 
> 时间：2012-04-23T11:33:51.757
> 
> 标签：c, string

如何将单个字符附加到 C 中的字符串？

IE

```
char* str = "blablabla";
char c = 'H';
str_append(str,c); /* blablablaH */ 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-23T11:36:14.677

```
char* str = "blablabla"; 
```

您根本不应该修改此字符串。它驻留在实现定义的只读区域中。修改它会导致**未定义的行为**。

您需要一个 char 数组而不是字符串文字。

好读：
[char a[] = "string"; 有什么区别？和 char *p = "字符串";](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string/9631091#9631091)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-23T11:46:23.140

要将字符附加到 C 中的字符串，首先必须确保包含该字符串的内存缓冲区足够大以容纳额外的字符。在您的示例程序中，您必须分配一个新的附加内存块，因为无法修改给定的文字字符串。

这是一个示例：

```
#include <stdlib.h>

int main()
{
    char *str = "blablabla";
    char c = 'H';

    size_t len = strlen(str);

    /* one for extra char, one for trailing zero */
    char *str2 = malloc(len + 1 + 1);

    strcpy(str2, str);
    str2[len] = c;
    str2[len + 1] = '\0';

    printf("%s\n", str2); /* prints "blablablaH" */

    free(str2);
} 
```

首先，用于[`malloc`](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)分配一个新的内存块，该内存块足够大以容纳输入字符串的所有字符、要附加的额外字符 - 以及最后的零。然后调用[`strcpy`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html)将输入字符串复制到新缓冲区中。最后，更改新缓冲区中的最后两个字节以添加要添加的字符以及尾随零。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-09T01:41:18.293

如果您关心 Linux，则附加两个字符串的最简单方法是：

```
char * append(char * string1, char * string2)
{
    char * result = NULL;
    asprintf(&result, "%s%s", string1, string2);
    return result;
} 
```

这不适用于 MS Visual C。

**注意**：你必须[`free()`](https://man7.org/linux/man-pages/man3/free.3.html)返回的内存[`asprintf()`](https://man7.org/linux/man-pages/man3/asprintf.3.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-23T11:35:46.213

我认为您不能在 c 中声明这样的字符串。您只能对 const char* 执行此操作，当然您不能修改 const char *，因为它是 const。

您可以使用动态 char 数组，但您必须注意重新分配。

编辑：实际上这个语法编译正确。如果它以您的方式初始化（​​来自字符串文字），您仍然不应该修改 str 指向的内容

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-06T10:14:44.507

原始海报并不是要写：

```
 char* str = "blablabla"; 
```

但

```
 char str[128] = "blablabla"; 
```

现在，添加单个字符似乎比使用 strcat 添加整个字符串更有效。采用 strcat 方式，您可以：

```
 char tmpstr[2];
  tmpstr[0] = c;
  tmpstr[1] = 0;
  strcat (str, tmpstr); 
```

但您也可以轻松编写自己的函数（正如我之前的几个人所做的那样）：

```
 void strcat_c (char *str, char c)
  {
    for (;*str;str++); // note the terminating semicolon here. 
    *str++ = c; 
    *str++ = 0;
  } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-20T23:11:26.500

创建一个新字符串（字符串+字符）

```
#include <stdio.h>    
#include <stdlib.h>

#define ERR_MESSAGE__NO_MEM "Not enough memory!"
#define allocator(element, type) _allocator(element, sizeof(type))

/** Allocator function (safe alloc) */
void *_allocator(size_t element, size_t typeSize)
{
    void *ptr = NULL;
    /* check alloc */
    if( (ptr = calloc(element, typeSize)) == NULL)
    {printf(ERR_MESSAGE__NO_MEM); exit(1);}
    /* return pointer */
    return ptr;
}

/** Append function (safe mode) */
char *append(const char *input, const char c)
{
    char *newString, *ptr;

    /* alloc */
    newString = allocator((strlen(input) + 2), char);
    /* Copy old string in new (with pointer) */
    ptr = newString;
    for(; *input; input++) {*ptr = *input; ptr++;}
    /* Copy char at end */
    *ptr = c;
    /* return new string (for dealloc use free().) */
    return newString;
}

/** Program main */
int main (int argc, const char *argv[])
{
    char *input = "Ciao Mondo"; // i am italian :), this is "Hello World"
    char c = '!';
    char *newString;

    newString = append(input, c);
    printf("%s\n",newString);
    /* dealloc */
    free(newString);
    newString = NULL;

    exit(0);
}

              0   1   2   3    4    5   6   7   8   9  10   11
newString is [C] [i] [a] [o] [\32] [M] [o] [n] [d] [o] [!] [\0] 
```

不要在`[len +1]`不知道其确切大小的情况下更改数组大小（等），这可能会损坏其他数据。`alloc`具有新大小的数组并将旧数据放入其中，请记住，对于 char 数组，最后一个值必须是`\0`; `calloc()`将所有值设置为`\0`，这对于`char`数组非常有用。

我希望这有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-23T11:47:31.653

C 本身没有字符串——你拥有的是一个 char 指针，指向一些包含字符“blablabla\0”的只读内存。为了在此处附加一个字符，您需要 a) 可写内存和 b) 为新形式的字符串提供足够的空间。字符串文字 "blablabla\0" 两者都没有。

解决方案是：

1）使用`malloc()`等。动态分配内存。（之后不要忘记`free()`。）
2）使用 char 数组。

使用字符串时，请考虑使用函数`strn*`的变体`str*`——它们将帮助您保持在内存范围内。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-03T11:30:25.797

您可以`strcat`在`string.h`标准标头中使用，但不要将`char`第二个参数作为第二个参数传递，而是使用以下代码

```
void append_str(char str[] , char c){
     auto char arr[2] = {c , '\0'};
     strcat(str , arr);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-16T08:03:08.647

您可以使用 strncat()

```
#include <stdio.h>
#include <string.h>

int main(void){
  char hi[6];
  char ch = '!';
  strcpy(hi, "hello");

  strncat(hi, &ch, 1);
  printf("%s\n", hi);
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-06-23T03:29:59.503

就我而言，这是我找到的最佳解决方案：

```
snprintf(str, sizeof str, "%s%c", str, c); 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2013-01-31T12:48:34.100

**就是这样，它 100% 有效**

```
char* appending(char *cArr, const char c)

{

int len = strlen(cArr);

cArr[len + 1] = cArr[len];

cArr[len] = c;

return cArr;

} 
```

# c# - C# 在 Datagridview 中查找重复值

> ID：10279723
> 
> 赞同：0
> 
> 时间：2012-04-23T11:34:03.100
> 
> 标签：c#, datagridview, duplicates

对我的 c sharp 项目做一些用户界面限制。使用 Visual Studio 2008 和 C#.net。

所以我有一点代码，它是一个嵌套的 for 循环，应该遍历列行并检查是否有重复。

考虑一下，我应该将文本更改为可以打印出来的数组，因为可以有超过 1 个重复项。

简单地说，有一个零件联盟，加一是唯一的。用户希望改变联赛部分，有的升有降。

这是我到目前为止所拥有的。

```
 public void CheckForDuplicate()
    {
        DataGridViewRowCollection coll = ParetoGrid.Rows;
        DataGridViewRowCollection colls = ParetoGrid.Rows;

        foreach (DataGridViewRow item in coll)
        {
            foreach (DataGridViewRow items in colls)
            {
                if (items.Cells[5].Value == item.Cells[5].Value)  
                {   
                    if(items.Cells[2].Value != item.Cells[2].Value)
                    {
                        txtDupe.Text = items.Cells[2].Value.ToString();
                        this.Refresh();
                        dupi = false;
                    }
                }
            }
        }
    } 
```

什么都没有发生，什么都没有，似乎它总是假的。一些奇怪的原因调试没有捕捉到任何东西。所以如果我错过了一个愚蠢的班轮，或者如果有更好的方法来做到这一点，我会徘徊吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:10:09.917

在 LINQ 中选择 Distinct 应该这样做。使用方法语法，例如：

```
 public bool allUniqueRows()
    {
        var distinctCount =  from r in ParetoGrid.Rows
select r.whateverElement.Distinct().Count();
     if(distinctCount == ParetoGrid.Rows.Count())
    {
    return true;
    }
    else
    {
    return false;
    }
    } 
```

# android - android startActivity .. 异常行为

> ID：10279733
> 
> 赞同：0
> 
> 时间：2012-04-23T11:34:48.303
> 
> 标签：android, android-activity, android-intent

我需要一种方法来开始（更有可能将其放在前面）一个活动“MyActivity”......我只知道 xml 清单（意思是我知道：pachage name，class name，intent fiters - MAIN only & no specific broadcast）

那么我该如何开始该活动？

我现在用的：

```
public boolean startActivity2(String componentName) {
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);

    intent.setComponent(ComponentName.unflattenFromString(componentName));
    if (m_ContainerActivity.getPackageManager().resolveActivity(intent, 0) != null) {
        m_ContainerActivity.startActivity(intent);

        return true;
    }

    return false;
} 
```

我称之为：

```
startActivity2("com.app.pachage/.subpack.MyActivity"); 
```

这开始了活动，但我的进程 - 所以 +10 到奇怪的行为（我在旧进程中也有 MyActivity）.. 我想要的是从后面的堆栈中带回旧的..

**注意**：MyActivity 在意图过滤器中没有特别的意图，也没有广播！

所以想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:39:10.867

也许试试这样：

```
Intent i = new Intent();
i.setClassName("com.app.pachage", "com.app.pachage.subpack.MyActivity");
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:42:02.253

尝试设置一些 Intent 标志，例如

```
I.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:36:28.757

尝试一下。它可能会有所帮助

```
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT|Intent.FLAG_ACTIVITY_SINGLE_TOP|Intent.FLAG_ACTIVITY_NEW_TASK); 
```

或者你可以这样尝试

```
Intent intent = new Intent();
intent.setClassName(getapplicationContext(), com.app.pachage.subpack.MyActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT|Intent.FLAG_ACTIVITY_SINGLE_TOP|Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

# c - 如何在 (a*X)/b 公式中使用两个可能更大的数字重新调整 int

> ID：10279734
> 
> 赞同：1
> 
> 时间：2012-04-23T11:34:54.473
> 
> 标签：c, integer-arithmetic

我在 c 中有一个如下所示的公式：

```
X = (a * X) / b; 
```

这用于重新`X`缩放`a/b`。但是`X`16 位无符号整数和乘法`a`很容易溢出。我怎样才能只使用具有准确结果的整数来进行此计算。

我当然可以使用浮点运算，但是这个操作很有可能在没有浮点硬件的处理器上工作。

编辑：我忘了说 a 和 b 都是 32 位无符号整数。好吧，我的答案是右移`a`，`b`直到它们都适合 16 位。这种方式`a * X`最大为 32 位，最终计算是准确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:40:51.123

You can rewrite it like this:

```
X = (a/b)*X + (a%b)*(X/b) + (a%b)*(X%b)/b 
```

if you can be sure any of those doesn't overflow (the first is approximately result, the second is less than result, the third dividend approx `b^2`).

Why is that valid (provided no overflows occur, / means ordinary division, div integer division):

```
X div Y =def floor(X/Y)
X =def (X div Y) * Y + X mod Y

(X*Y) div Z = floor(X*[(Y div Z) * Z + Y mod Z] / Z)
  = floor(X*(Y div Z)*Z/Z + X*(Y mod Z)/Z)
  = X*(Y div Z) + X*(Y mod Z) div Z 
```

now, if we use this twice (with the C meaning of operators):

```
X = (a*X)/b = X*(a/b) + X*(a%b)/b =
            = X*(a/b) + (a%b)*(X/b) + (a%b)*(X%b)/b 
```

But I would recommend computing in a bigger precision, if that's possible

```
X = ((int)X*a)/b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:44:32.917

您可以提升`a`为更大的数据类型，例如：

```
X = ((long)a * X) / b; 
```

# iphone - 在 iPad 中使用 Core Plot 绘制近 40 个散点图时应用程序卡住

> ID：10279736
> 
> 赞同：1
> 
> 时间：2012-04-23T11:34:58.327
> 
> 标签：iphone, ipad, memory-management, ios5, core-plot

我正在开发一个 iPad 应用程序，它可以选择显示散点图用户能够绘制点。我使用了核心绘图库。我必须在视图控制器中显示 40 个散点图。当我加载 25 个图表时，我的应用程序没有响应并退出。

1.  核心图中是否有任何限制（散点图计数）以显示视图控制器？

2.  使用 Core Plot 加载散点图的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:57:53.733

图表的数量没有硬性限制，但您最终会耗尽内存和/或其他 GPU 资源。您可以在特定应用程序中显示的最大数量取决于图形的物理大小和复杂性以及运行它的硬件。

如果需要同时显示所有 40 个图，请尝试`collapsesLayers`在托管视图上设置为 YES，以便每个图仅使用一个 Core Animation 层。如果您不需要图形是交互式的，则可以使用的另一种技术是使用该`-imageOfLayer`方法将每个图形呈现为图像并将其显示在屏幕上。您可以在渲染后释放图形。

# xml - 如何定期更新 Quartz Composer 中的 XML 导入器？

> ID：10279737
> 
> 赞同：1
> 
> 时间：2012-04-23T11:35:04.130
> 
> 标签：xml, quartz-composer

我是 Quartz Composer 的新手，所以如果这很明显，请原谅……我在这里有一个 Quartz Composer 组合，它可以导入 XML 文件。我希望它更新导入的文件，让我们说每分钟。我找到了“更新信号”输入，并试图建立一个周期性信号来输入它，但没有成功。（这是我使用的周期性信号：http: [//quartzcompositions.com/phpBB2/mediawiki/index.php](http://quartzcompositions.com/phpBB2/mediawiki/index.php?title=Periodic_Signal&redirect=no) ?title=Periodic_Signal&redirect=no ）
任何帮助表示赞赏！顺便说一下，这是 BoinxTV 中的动画层。如果你们中的任何人都熟悉...
谢谢，
托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:55:39.323

1.  创建内置`LFO`（`Wave Generator`在 Lion 中）补丁的实例
2.  将类型设置为方形
3.  将周期设置为 60 秒
4.  将输出连接到补丁`Update Signal`上的输入。`XML Importer`

# php - 将文本区域中的行保存到数据库

> ID：10279743
> 
> 赞同：0
> 
> 时间：2012-04-23T11:35:48.733
> 
> 标签：php, jquery, mysql

我的目标是从文本区域中提取每一行并将其保存到我的 mysql 数据库中。

我认为我的问题在于 AJAX 函数或我从 textarea 中获取行的部分，但请看你自己：

```
//#userip = textarea;

    var content = $("#user_ip").val();
    var ips = content.split("\n");

    $.ajax({
        type:       'POST',
        url:        'inc.php?ban_user',
        data:       'user_ip='+ips,
        dataType:   'html',
        success:    function(data) {
            alert(data);
        },
            error: function() {
                alert("Error");
        }
    }); 
```

PHP部分是：

```
 if (isset($_POST["user_ip"])) {

        $user_ip   = htmlspecialchars(trim($_POST["user_ip"]));

            mysql_query("INSERT into banned (ip) values ('$user_ip')") or die(mysql_error());

        echo($user_ip);

    } 
```

此时`$user_ip`似乎只是所有 textarealines 组合的一个字符串。

我知道这样上面的 php 代码将无法工作，它会将所有行保存为一个结果！

我想要什么：将每个 txtarea-line 单独保存在我的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:40:06.673

“数据”属性想要一个具有“属性”的对象：值对，你给他一个字符串。

```
$.ajax({
        type:       'POST',
        url:        'inc.php?ban_user',
        data:       {'user_ip': ips},
        dataType:   'html',
        success:    function(data) {
            alert(data);
        },
            error: function() {
                alert("Error");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:44:26.573

如果您向我们展示了 $_POST["user_ip"] 包含的内容，那将会很有帮助。

$.val() 方法从集合中的*第一个*元素返回值 - 所以它不适用于多个文本区域（如果你认为它是这样的话）。

您获取字符串值并将其转换为字符串的逐行数组，然后进行隐式转换回单个字符串 - 为什么？只需将“内容”值发送到您的脚本，然后在那里用换行符分割。

（顺便说一句，代码仍然容易受到 SQL 注入的攻击）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:38:53.087

不要在客户端（ajax）而是在 php 脚本中拆分用户输入的字符串。

```
if (isset($_POST["user_ip"])) {
  $user_ip   = explode("\n",htmlspecialchars(trim($_POST["user_ip"])));
  foreach ( $user_ip AS $uip ) {
    mysql_query("INSERT into banned (ip) values ('$uip')") or die(mysql_error());
    echo($uip);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:39:15.530

我会使用以下方法调用来做到这一点：

```
$lines = preg_split( '/\r\n|\r|\n/', $string ); 
```

这将为您提供文本中所有行的数组。在此之后，您只需要遍历它并将每个值添加到数据库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T11:41:25.890

your problem lies within this:

```
var ips = content.split("\n"); 
```

`split()` returns an array of all the strings.

# asp.net-mvc-3 - 如何获取 Url.action 以生成操作方法名称

> ID：10279746
> 
> 赞同：0
> 
> 时间：2012-04-23T11:35:57.150
> 
> 标签：asp.net-mvc-3

为什么此号召性用语不提供操作方法名称？

```
@Url.Action("Index","NewStore") 
```

它只是产生...

```
localhost/TemplateUI/en-CA/Atomic/Wassabi/Store 
```

我需要它在最后产生 /index ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:37:07.217

那是因为`Url.Action`助手使用您在 Global.asax 中的路线注册。而且由于您是`Index`作为操作名称传递的，我猜在您的路由注册中您已经指定了 的默认值`action="Index"`，所以它被省略了。

例如，如果您有以下默认路由：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default",
        "{controller}/{action}",
        new { controller = "Home", action = "Index" }
    );
} 
```

因为`controller = "Home"`和`action = "Index"`约束都已指定，`/`并且`/Home`将是绝对等效的 url 并调用控制器的`Index`操作。`Home`

因此，当您尝试使用一些帮助程序构建 url 时也会发生同样的情况：它使用您的路由。

如果您需要在 url 中包含操作名称，请确保您已删除`action`路由定义中的约束。

# android - 在android中单击自定义列表视图中的edittext时显示错误

> ID：10279747
> 
> 赞同：0
> 
> 时间：2012-04-23T11:35:57.207
> 
> 标签：android, android-listview

单击编辑按钮时，所有项目名称、描述、价格都进入带有自定义列表视图的编辑文本。我无法在编辑文本中输入任何内容。如果我单击编辑文本，它会显示应用程序没有响应错误。

```
//my code getview method in Base adapter
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
     final ViewHolder holder;

        if (convertView == null) {
            holder = new ViewHolder();

            convertView = inflater.inflate(R.layout.editappetisesrlistview, null);
            holder.caption = (EditText) convertView
                    .findViewById(R.id.editappetisertext);
            holder.price=(EditText)convertView.findViewById(R.id.editappetiserprice);
            holder.desc=(EditText)convertView.findViewById(R.id.editappetiserdesc);
            holder.caption1=(ImageView) convertView.findViewById(R.id.editappetiserimage);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        //Fill EditText with the value you have in data source

        holder.caption.setText(itemnames[position]);
        holder.price.setText(prices[position]);
        holder.desc.setText(descs[position]);
        holder.caption.setId(position);
        holder.price.setId(position);
        holder.desc.setId(position);
        holder.caption.setFocusableInTouchMode(true);
        holder.price.setFocusableInTouchMode(true);
        holder.desc.setFocusableInTouchMode(true);

        holder.caption1.setImageBitmap(bmps[position]);    

        //we need to update adapter once we finish with editing
        holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
            {
                    final int position = v.getId();      
                    final EditText Caption = (EditText) v;
                    Caption.setFocusable(true);

                  holder.caption.setFocusable(true);
                  arr.remove(holder.caption.getId());
                    arr.add(holder.caption.getId(),holder.caption.getText().toString());

            }
                }

        });    
        holder.price.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
            {
                    final int position = v.getId();      
                    final EditText Caption1 = (EditText) v;
                 //   Caption1.setFocusable(true);

                    holder.price.setFocusable(true);
                    arr.remove(holder.price.getId());
                    arr.add(holder.price.getId(),holder.price.getText().toString());

            }
            holder.desc.setOnFocusChangeListener(new OnFocusChangeListener() {
                public void onFocusChange(View v, boolean hasFocus) {
                if(!hasFocus)
                {
                        final int position = v.getId();      
                        final EditText Caption2 = (EditText) v;
                     //   Caption2.setFocusable(true);

                        holder.desc.setFocusable(true);
                        arr.remove(holder.desc.getId());
                        arr.add(holder.desc.getId(),holder.desc.getText().toString());

                }
                    }

            });  

                }

        });  

        return convertView;
    }
} 
```

viewholder.java

```
class ViewHolder {
    EditText caption,price,desc;
    ImageView caption1;
}

class ListItem {
    String caption;
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T14:36:38.750

```
mViewHolder.editText = (EditText)convertView.findViewById(R.id.editText1);
            mViewHolder.editText.setTag(position);
            mViewHolder.editText.setTextColor(0xFF000000);
            mViewHolder.editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
                public void onFocusChange(View v, boolean hasFocus) {
                    if (!hasFocus) {
                        EditText et =(EditText)v.findViewById(R.id.editText1);
                        editTextArrayList.set(position,et.getText().toString().trim());
                    }
                }
            }); 
```

您好，下面的链接可能对您有所帮助[http://mylearnandroid.blogspot.in/2014/06/listview-problem-while-scrolling.html](http://mylearnandroid.blogspot.in/2014/06/listview-problem-while-scrolling.html)

# mustache - 使用 Mustache 输出以字符分隔的值

> ID：10279748
> 
> 赞同：1
> 
> 时间：2012-04-23T11:35:58.890
> 
> 标签：mustache

是否有任何优雅的方式来完成由字符（逗号、正斜杠等）分隔的值列表？

> 罗布、乔恩、丹、保罗

我正在使用Mustache 语法的[ICanHaz](http://icanhazjs.com/) JavaScript 实现。

```
<script id="nameTemplate" type="text/html">
    <span>Name {{#names}}{{.}} {{/names}}</span>
</script> 
```

但这会给出不正确的结果

> 罗伯、乔恩、丹、保罗、

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:32:35.093

AFAIK 没有这样的内置功能，所以你可以这样做：

模板：

```
<script id="nameTemplate" type="text/html">
    <span>Name 
        {{#names}}
        {{name}}{{^last}},{{/last}}                            
        {{/names}}</span>
</script> 
```

脚本：

```
var namesAsArrayOfObjects = {
    "names": [
      {"name": "Rob"},
      {"name": "John"},
      {"name": "Dan", "last": true}
  ]    
};

var user = ich.nameTemplate(namesAsArrayOfObjects);
$('#output').append(user);​ 
```

结果在这里：http: [//jsfiddle.net/alexpetrov/VS2jQ/](http://jsfiddle.net/alexpetrov/VS2jQ/)

另一种解决方案，在我看来不太优雅：

```
<script id="nameTemplate" type="text/html">
    <span>Name         
        {{#names}}{{#trimed}}{{.}}{{/trimed}}{{/names}}
        </span>
</script>

<div id="output"></div> 
```

```
var namesAsArrayOfStrings = {    
    "_counter": 1,
    "names": ['Rob', 'John', 'Alice'],
    "trimed": function() {            
        return function(text, render) {                            
            var text = render(text) + 
(namesAsArrayOfStrings._counter != namesAsArrayOfStrings.names.length ? "," : "");
            namesAsArrayOfStrings._counter++;

            return text;            
        }
    }   
};

var user = ich.nameTemplate(namesAsArrayOfStrings);

$('#output').append(user);​ 
```

# php - mysql_query 相当于 mongoDB

> ID：10279749
> 
> 赞同：0
> 
> 时间：2012-04-23T11:36:05.323
> 
> 标签：php, mysql, mongodb, benchmarking, nosql

我正在尝试编写一个`php benchmark`以比较一些 RDBMS、NewSQL 和 NoSQL。该脚本仅执行查询并测量执行时间。

对于 mysql-like，我简单地使用：

```
$start = microtime(true);
$result = mysql_query($SQL);
$end = microtime(true); 
```

我没有为我的基准测试获取数据。

但是使用 mongodb-php，函数`find()`返回一个`cursor`

```
$start = microtime(true);
$collection = $this->_db->selectCollection($collection);
$cursor = $collection->find($query);
$end = microtime(true); 
```

是否**等效（时间/数据成本**`$cursor`）`$result`？游标不加载数据，我必须迭代游标才能加载数据。这就是为什么在 MySQL 和 mongoDB 之间执行查询的时间如此不同或者只是 mongoDB 岩石......

 **我想知道将我的代码更改为：

```
$start = microtime(true);
$result = mysql_query($SQL);
while ($row = mysql_fetch_row($result)) {}
$end = microtime(true); 
```

和

```
$start = microtime(true);
$cursor = $collection->find($query);
foreach ($cursor as $doc) {}
$end = microtime(true); 
```

最后，是否可以说每次迭代 mongodb 游标数据都是直接从 mongodb 服务器而不是从计算机内存中获取的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:16:19.540

运行 ->find() 确实只是返回光标。在您获取第一个结果之前，查询不会执行。届时，驱动程序将发出查询。这允许您使用 ->limit() 和 ->skip() 之类的内容来修改光标。所以是的，迭代结果集也会更公平。

是的，遍历 mongoDb 游标，数据是从 MongoDB 服务器获取的。没有像 MySQL 这样的无缓冲查询（两者都允许）。当然，MongoDB 也会将这些数据保存在内存中——尤其是如果您紧接着执行两次。**

# ruby-on-rails - 如何从 request.env["omniauth.auth"] (Rails) 获取 twitter 用户名

> ID：10279751
> 
> 赞同：1
> 
> 时间：2012-04-23T11:36:08.813
> 
> 标签：ruby-on-rails, omniauth

我在我的应用程序中使用 Omni auth。我可以通过使用下面的代码来接收令牌和秘密..

```
auth = request.env["omniauth.auth"]
@token = auth['credentials']['token']
@secret = auth['credentials']['secret'] 
```

但我坚持获取 twitter 帐户的用户名。我可以从中获取用户名吗？

同时我正在寻找解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:59:36.560

我知道了。可以通过使用`auth['info']['name']` 我尝试以 Json 格式打印返回来获取用户名，并且可以找到它。

# dynamics-crm-2011 - 如何将 cutom Web 应用程序与 crm 2011 集成？

> ID：10279756
> 
> 赞同：1
> 
> 时间：2012-04-23T11:36:37.327
> 
> 标签：dynamics-crm-2011

我使用 .Net 4.0 开发了一个 Web 应用程序。我通过在其中创建虚拟目录在 CRM 2011 ISV 服务器上托管了该应用程序，当我通过 url 将其称为“/test.aspx”时，它将无法工作。如何做到这一点？请提供任何示例代码。

在此先感谢，谢卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:31:23.887

CRM 2011 不再支持此功能。

您只有两种扩展 CRM 的选择：

1.  通过创建 Silverlight 应用程序
2.  通过使用 JScript/jQuery/Json 创建 HTML 页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:13:35.447

当您没有告诉我们您遇到的错误时，要说出您的网络应用程序可能有什么问题并不是一件容易的事。这是我为在 CRM 2011 中的 ISV 下运行 Web 应用程序所做的工作。

正如一些人已经说过的，这在 CRM 2011 中已被弃用。

在您的自定义 Web 应用程序的 web.config 文件中，您应该删除 crm.authentication 并清除 httpModules。

```
<configSections>
   <remove name="crm.authentication" />
</configSections>

<httpModules>
   <clear/>
</httpModules> 
```

您还必须在 Web 应用程序的 bin 文件夹中放置一些 dll

*   Microsoft.Crm.dll
*   Microsoft.Crm.sdk.dll
*   Microsoft.Crm.Platform.Sdk.dll
*   Microsoft.Crm.Sdk.Proxy.dll
*   Microsoft.Xrm.Sdk.dll
*   AntiXssLibrary.dll

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T04:47:21.863

澄清 ISV 功能已弃用，但在 CRM 2011 中仍受支持。[http://msdn.microsoft.com/en-us/library/gg309571.aspx](http://msdn.microsoft.com/en-us/library/gg309571.aspx)。[http://msdn.microsoft.com/en-us/library/gg509061.aspx](http://msdn.microsoft.com/en-us/library/gg509061.aspx)

# javascript - 计算两个数组中所有可能的单词组合

> ID：10279758
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:36:48.890
> 
> 标签：javascript, jquery, math

我想显示可能的唯一单词组合的总数。

这是我的示例代码：

```
var wordlist1 = ["Goldener", "Stählerner", "Purpurner", "Strahlender", "Elektrischer", "Taumelnder"];       
var wordlist2 = ["Indianer", "Ast", "Dachs", "Wolfshund", "Schäferhund", "Lupus", "Schakal"] ; 
```

如何使用 JS 或 Jquery 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:41:20.697

组合数为 wordlist1.length * wordlist2.length

要显示组合：

```
for (i = 0; i < wordlist1.length; i++)
  for (j = 0; j < wordlist2.length; j++){
    // do something like alert(wordlist1[i] + " " + wordlist2[j]);
    // or append the combinations somewhere
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:42:29.870

一个列表的示例...将 for 循环放入一个函数中，您就知道了：-)

```
var wordlist1 = ["Goldener", "Stählerner", "Purpurner", "Strahlender", "Elektrischer", "Taumelnder"];
var wordlist2 = ["Indianer", "Ast", "Dachs", "Wolfshund", "Schäferhund", "Lupus", "Schakal"];

var uniqueWords = [];

for (var i = 0; i < wordlist1.length; i++) {
    var isUnique = true;

    for (var j = 0; j < uniqueWords.length; j++) { 
        if (wordlist1[i] == uniqueWords[j]) {
          isUnique = false;
          break;
        }
    }

    if (isUnique)
        uniqueWords.push(wordlist1[i]);
}

alert(uniqueWords.join("|")); 
```

# git - 在 git 中提交消息前缀

> ID：10279760
> 
> 赞同：4
> 
> 时间：2012-04-23T11:36:51.340
> 
> 标签：git, commit, commit-message

我需要在提交消息之前添加“ticket:N”，其中 N 是我正在处理的票的编号。但是我一直忘记前缀，并且只在 5-6 次提交后才记住它，所以`--amend`无济于事。是否可以设置一些警告，所以每次我忘记添加前缀时git都会警告我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-01T13:39:03.517

您可以`filter-branch`组合使用`--msg-filter`来更新一系列提交。

例如，如果您想将`ticket:N`HEAD 到 xxxxxx 的每条提交消息添加到前面：

`git filter-branch -f --msg-filter 'printf "ticket:N " && cat' xxxxxx..HEAD`

您还可以通过简单地反转`printf`和来附加到提交消息`cat`：

`git filter-branch -f --msg-filter 'cat && printf "ticket:N"' xxxxxx..HEAD`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:41:25.310

To make sure every commit message follows some standard form, you can use [the `commit-msg` hook](http://schacon.github.com/git/githooks.html#_commit_msg).

But if you want to edit the commit message of some commit that is not the most recent, you can do that too using [`git rebase -i`](http://schacon.github.com/git/git-rebase.html#_interactive_mode), assuming you didn't push it yet.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T23:51:16.763

如果您特别想将 JIRA 票号添加到您的提交中，您可以使用此方法[https://tjdane.medium.com/add-a-jira-ticket-to-a-batch-of-old-commits-67557fb42d3e](https://tjdane.medium.com/add-a-jira-ticket-to-a-batch-of-old-commits-67557fb42d3e)

# git - git rebase 从 url/路径

> ID：10279763
> 
> 赞同：5
> 
> 时间：2012-04-23T11:36:58.297
> 
> 标签：git

为什么我不能`rebase`从我可以的同一位置`pull`？例如，如果我在一个存储库中，我可以从另一个存储库中提取：

```
git pull /path/to/other 
```

但是我不能从其他存储库中变基；以下失败：

```
git rebase /path/to/other 
```

的帮助`rebase`没有提到任何参考规范，所以我不知道如何，或者即使，我可以/应该指定它们。

我怎样才能`rebase`从不同的位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T12:02:28.967

那是因为`git pull`和`git rebase`做完全不同的事情。

有什么`git pull`作用：

1.  *从某个远程存储库*中检索提交并将它们放入远程跟踪分支。
2.  将当前分支对应的远程跟踪分支合并到当前分支中。

有什么`git rebase`作用：

1.  *将当前分支的提交移到另一个分支*之上。

（在这两种情况下，这些只是默认值。）

主要区别是`git pull`在*远程存储库*上运行，而`git rebase`在*分支*上运行。这就是为什么`git rebase /path/to/other`不起作用，`/path/to/other`不是一个分支。

但是，如果您想做什么`git pull`，除了您想做`rebase`而不是`merge`，您可以这样做：使用`git pull --rebase`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T12:02:50.080

```
git pull --rebase /path/to/other 
```

# php - 通过 PHP 使用 While 循环将多个数据插入 SQL 服务器

> ID：10279764
> 
> 赞同：0
> 
> 时间：2012-04-23T11:37:00.037
> 
> 标签：php, mysql, sql

这个想法是将相同的数据插入 SQL DB $quantity 次，这意味着如果我有数量 = 10，则 SQL 查询需要插入相同的数据 10 次问题是，如果我有数量，我总是多一条记录=2 我将有 3 条记录，如果我有 1 我将有 2 条记录，所以

```
$i=1; 
while ($i<="$quantity")   
{
  $sql="INSERT INTO arivage (ID_Ship, Date_ariv, Date_achat, prov_id, Sph, cyl, Prod_type, Pord_color)  
       VALUES ('', '$date', '$date1', '$prov_id', '$sph', '$cyl', '$Prod_type', '$Prod_color')";
  mysql_query($sql);      
  $i++;
}
if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
} 
```

我也有 sql 连接并在代码中关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:41:02.937

If you always have one record too many, that probably means your quantity value is not correct (?).

Also, this is not related to your problem, you should use `while($i<=$quantity)` instead of `while($i<="$quantity")`. You do not need the `"`s

This first block is ok:

```
$i=1; 
while ($i<="$quantity")   
{
    $sql="INSERT INTO arivage (ID_Ship, Date_ariv, Date_achat, prov_id, Sph, cyl, Prod_type, Pord_color)  
        VALUES ('', '$date', '$date1', '$prov_id', '$sph', '$cyl', '$Prod_type', '$Prod_color')";
    mysql_query($sql);      
    $i++;
} 
```

The next if statement executes your query AGAIN, meaning you insert one too many rows. Removing the entire if statement would solve your "one too many rows is inserted" problem.

```
if (!mysql_query($sql,$con))
{
    die('Error: ' . mysql_error());
} 
```

Alternatively, change your while loop to:.

```
$i=1; 
while ($i<="$quantity")   
{
    $sql="INSERT INTO arivage (ID_Ship, Date_ariv, Date_achat, prov_id, Sph, cyl, Prod_type, Pord_color)  
    VALUES ('', '$date', '$date1', '$prov_id', '$sph', '$cyl', '$Prod_type', '$Prod_color')";
    if(!mysql_query($sql, $con)) {
        die('Error: ' . mysql_error());
    }
    $i++;
} 
```

# linux - 无法在 x86_32 中编译（错误 _asm__ 中的不可能约束）

> ID：10279767
> 
> 赞同：1
> 
> 时间：2012-04-23T11:37:02.447
> 
> 标签：linux, gcc, assembly

我在 x86_64 中编写此代码并编译并运行良好，

```
 __asm__("nop"
            : "=eax"(foo)
            : //"eax"(foo),"ebx"(bar)
            : "eax"
    ); 
```

但是当我尝试在其他机器（x86_32）上编译时 gcc 触发错误：S

```
 inline1.c:6: error: impossible constraint in _asm_ 
```

我无法修复它..：S

GCC 版本::

**不编译**：

```
 tur@aso:~$ gcc -v
   Using built-in specs.
   Target: i486-linux-gnu
   Configured with: ../src/configure -v --with-pkgversion='Ubuntu 4.4.3-4ubuntu5.1' --                     with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-       languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --       enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i486 --with-tune=generic --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu 
```

线程模型：posix gcc 4.4.3版（Ubuntu 4.4.3-4ubuntu5.1）

**编译**

```
 git@srvcode:/home/git/code/asm$ gcc -v
   Using built-in specs.
   COLLECT_GCC=gcc
   COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6.1/lto-wrapper
   Target: x86_64-linux-gnu
   Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.1-       9ubuntu3' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++,go --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu 
```

线程模型：posix gcc 版本 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3)

谢谢大家！！

阿图尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:59:46.207

`nop`是无操作数指令。如果内联中没有使用任何操作数，则 gcc 无法将任何寄存器分配给使用的操作数，这可能是设置任何输入/输出寄存器失败的原因。但是，该指令没有修改任何寄存器，所以我很好奇您为什么认为`eax`需要保留。

其次，在旧版本的 gcc 中，寄存器不能同时在输入/输出列表和 clobber 列表中。输入/输出列表上的寄存器当然被认为是“破坏”的。您最好调整该行为以实现向后兼容性。

此外，您应该记住，内联汇编中的寄存器操作数不是使用它们的实际名称指定的（除了 clobber 列表）。相反，使用描述寄存器的单个字母。所以，我们有`a`for `eax`，`b`for `ebx`，等等。您可能还想阅读[GCC Inline Assembly HOWTO](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)，它是获取有关该主题的信息的绝佳资源。

总结一下，这样的事情应该会更好：

```
__asm__("nop"
        : /* no output */
        : /* no input */
        : "%eax" /* eax is clobbered */
); 
```

# android - 谁能告诉我这段代码出了什么问题？

> ID：10279768
> 
> 赞同：0
> 
> 时间：2012-04-23T11:37:06.900
> 
> 标签：android, bluetooth, broadcastreceiver

我是安卓新手。我正在尝试扫描其他蓝牙设备。请指导我并帮助我找到解决方案。这是代码的一部分：

```
scan_btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        mBluetoothAdapter.startDiscovery();
        mReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    BluetoothDevice device = Untent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                }
            }
        };
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND); 
        registerReceiver(mReceiver, filter); 
    }
});

@Override
protected void onDestroy() {
    super.onDestroy();
    unregisterReceiver(mReceiver);//unregister the receiver
} 
```

![在此处输入图像描述](../Images/6a4777df69142020f24090d7d919f935.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:04:45.700

您的按钮是切换按钮。确保您的代码是 -

```
 mToggleButton = (ToggleButton) findViewById(R.id.toggleButton);
 mToggleButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    } 
```

# asp.net-mvc-3 - 在 MVC 中的视图之间传递数据

> ID：10279774
> 
> 赞同：1
> 
> 时间：2012-04-23T11:37:22.930
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我目前正在编写一个网络应用程序，它需要将一些配置设置从设置页面传递到带有搜索框的页面页面。

目前我将配置数据从设置页面传递到主页：

```
public ActionResult Settings(Configuration configuration)
{
    return RedirectToAction("ConfigSet", "Home", configuration);
} 
```

在家庭控制器中：

```
public ActionResult ConfigSet(Configuration configuration)
{            
    return View("Index");
} 
```

我正在生成一个部分视图：

```
 public PartialViewResult Search(string q)
    {
        List<Stuff> results = this.Search(q);
        return PartialView("SearchResults", results);
    } 
```

部分视图呈现如下：

```
@using (Ajax.BeginForm("Search", "Home", new AjaxOptions {
HttpMethod = "GET",
InsertionMode = InsertionMode.Replace,
UpdateTargetId = "searchResults",
}))
{
    <input type="text" name="searchString" />
    <input type="submit" value="Search" />
} 
```

我的问题是如何将配置设置传递给局部视图？这几天我一直在想这个问题，我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:48:35.367

您可以创建一个视图模型，它将像这样存储您的配置设置

```
public class MyViewModel
{
   public Configuration configuration {get;set;}
   public List<Stuff> results {get;set;} 
} 
```

& 在您的操作中返回 MyViewModel

```
public PartialViewResult Search(Configuration config)     
{
  var model = new  MyViewModel();
  //set its properties       
  model.results = this.Search(q);    
  model.configuration = configurationObject;     
  return PartialView("SearchResults", model);     
} 
```

如果您再次想将配置传递给控制器​​，那么

```
@using (Ajax.BeginForm("Search", "Home", new { config = Model.configuration } new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "searchResults", })) 
{     
     <input type="text" name="searchString" />     
     <input type="submit" value="Search" /> 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:49:00.813

您的意思是要在服务器上的 Search 操作方法中获取配置设置吗？要干净利落地执行此操作，您要么必须将它们往返于客户端并返回，这似乎不合逻辑且可能不安全（取决于您的配置中的内容），或者您需要在 Search 操作本身中再次检索它们。

# python - 带日期的 matplotlib 居中条形图

> ID：10279778
> 
> 赞同：19
> 
> 时间：2012-04-23T11:37:33.940
> 
> 标签：python, datetime, matplotlib

为了得到 x 轴是日期的条形，我正在做这样的事情：

```
import numpy as np
import matplotlib.pyplot as plt
import datetime

x = [datetime.datetime(2010, 12, 1, 0, 0),
    datetime.datetime(2011, 1, 1, 0, 0),
    datetime.datetime(2011, 5, 1, 1, 0)]
y = [4, 9, 2]

ax = plt.subplot(111)
barWidth=20
ax.bar(x, y, width=barWidth)
ax.xaxis_date()

plt.show() 
```

![在此处输入图像描述](../Images/7bc9b2473f97782288e82905f47b648a.png)

但是，这些图并不以 x 为中心。如果之前使用 ax.bar(x-barWidth/2.,y,width=barWidth) 来获取以 x 为中心的 bar。当 x 轴值是日期时，有没有办法得到相同的结果？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-23T13:00:28.320

我认为您需要该方法`align='center'`的关键字。`bar`

您的示例的细微更改：

```
import numpy as np
import matplotlib.pyplot as plt
import datetime

x = [datetime.datetime(2010, 12, 1, 0, 0),
    datetime.datetime(2011, 1, 1, 0, 0),
    datetime.datetime(2011, 5, 1, 1, 0)]
y = [4, 9, 2]

ax = plt.subplot(111)
barWidth=20
ax.bar(x, y, width=barWidth, align='center') #< added align keyword
ax.xaxis_date()

plt.savefig('baralign.png')
plt.show() 
```

导致下图：

![在此处输入图像描述](../Images/e60d0c6217e4d1f2b9b5897b6f91f5fc.png)

如果您知道在哪里看，这是一个非常直接的答案。`matplotlib`有一个广泛的文档，并且对于每种绘图方法，开发人员都提供[了关键字参数的详细描述](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.bar)。

# c# - 字符串拆分。寻找正确的方法来做到这一点

> ID：10279781
> 
> 赞同：0
> 
> 时间：2012-04-23T11:38:03.820
> 
> 标签：c#, string, split

我需要一些建议来了解拆分字符串的最简洁方法。

字符串 ix 是这样的：`00h00m00s`虽然 h 前面的 nrs 也可以是 3 或 4 like `000h00m00s`。

所以我认为我可以用一个普通的 string.split 来做到这一点，并将最后 3 个到字符串 1，然后做 3 次。（然后删除最后一个以仅保留 nr）

或者，如果我使用正则表达式或其他东西，这会是一种更清洁（更好）的方式吗？我还处于编码的学习期，想知道你对这种情况的看法。什么方法是更好的方法，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:43:53.690

假设您的输入与代表一个或多个十进制数字的格式匹配，您可以使用`#h#m#s`String.Split[方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)将输入拆分为四个部分，使用[Int32.Parse 方法](http://msdn.microsoft.com/en-us/library/b3h1hf19.aspx)将前三个部分中的每一个解析为整数，然后表示结果的[TimeSpan 结构](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)：`#`

```
var parts = "123h45m07s".Split('h', 'm', 's');

// parts == { "123", "45", "07", "" }

var result = new TimeSpan(hours:   int.Parse(parts[0]),
                          minutes: int.Parse(parts[1]),
                          seconds: int.Parse(parts[2]));

// result == {5.03:45:07} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:42:59.060

为此，Regex 可能是最好的——它是一种定义明确的格式。

```
var match = Regex.Match(input, @"^(\d+)h(\d+)m(\d+)s$");
var hoursString = match.Groups[1].Value;
var minutesString = match.Groups[2].Value;
var secondsString = match.Groups[3].Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:49:24.507

```
var fields = input.Split(new[] { "h", "m" , "s" },
                    StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:42:12.480

您可以使用[此](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx) 正则表达式方法：

```
public static string[] Split(
    string input,
    string pattern
)

var result = Regex.Split(input, @"\D"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T11:46:04.477

正则表达式适合此任务：

```
var regex = new Regex(@"^(?<hours>\d+)h(?<minutes>\d+)m(?<seconds>\d+)s$");
var match = regex.Match("13h44m52s");
if (match.Success) {
  var hours = Int32.Parse(match.Groups["hours"].Value);
  var minutes = Int32.Parse(match.Groups["minutes"].Value);
  var seconds = Int32.Parse(match.Groups["seconds"].Value);
  var timeSpan = new TimeSpan(hours, minutes, seconds);
  // Use timeSpan ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T11:46:12.013

我会使用这个正则表达式来确保您期望的位数

```
var match = Regex.Match(input, "^(\d{2,})h(\d{2})m(\d{2})s$");
var h = match.Groups[1];
var m = match.Groups[2];
var s = match.Groups[3]; 
```

# ios - TFHpple 返回 null 作为响应

> ID：10279782
> 
> 赞同：0
> 
> 时间：2012-04-23T11:38:11.527
> 
> 标签：ios, xml-parsing, asihttprequest, ios5

我正在尝试在我的项目中使用 TFHpple，这是代码......它相当容易理解：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    NSURL *url = [NSURL URLWithString:@"http://v1.myurl.com/somemethod"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDelegate:self];
    [request startAsynchronous];
}

- (void)viewDidUnload
{
    [self setGpMapView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];

    // Use when fetching binary data
    NSData *responseData = [request responseData];
    TFHpple *doc = [[TFHpple alloc] initWithXMLData:responseData];
    NSArray *elements = [doc searchWithXPathQuery:@"/entry"];
    NSLog(@"count: %@",[elements count]);

}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    NSError *error = [request error];
} 
```

在我之间，我还使用 asihttp 库来进行 http 请求调用。我在控制台中得到空值，我再次检查了 xml。我知道该标签肯定存在。请问有什么办法吗？

# 编辑 - 1

这是xml架构：

```
<feed xmlns:s="http://syndication.nhschoices.nhs.uk/services" xmlns="http://www.w3.org/2005/Atom">
<title type="text">
NHS Choices - GP Practices Near Location - richmond - Within 50km
</title>
<id>
http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/location?range=50&northing=174900&easting=517900
</id>
<rights type="text">© Crown Copyright 2009</rights>
<updated>2012-04-24T11:54:04+01:00</updated>
<category term="Search"/>
<logo>
http://www.nhs.uk/nhscwebservices/documents/logo1.jpg
</logo>
<author>
<name>NHS Choices</name>
<uri>http://www.nhs.uk</uri>
<email>webservices@nhschoices.nhs.uk</email>
</author>
<link rel="self" type="application/xml" title="NHS Choices - GP Practices Near Location - richmond - Within 50km" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/location?apikey=YAHUGHET&range=50&northing=174900&easting=517900&name=richmond"/>
<link rel="first" type="application/xml" title="first" length="1000" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/location?apikey=YAHUGHET&range=50&northing=174900&easting=517900&name=richmond&page=1"/>
<link rel="next" type="application/xml" title="next" length="1000" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/location?apikey=YAHUGHET&range=50&northing=174900&easting=517900&name=richmond&page=2"/>
<link rel="last" type="application/xml" title="last" length="1000" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/location?apikey=YAHUGHET&range=50&northing=174900&easting=517900&name=richmond&page=10"/>
<link rel="alternate" title="NHS Choices - Find and choose services - GP Practices" href="http://www.nhs.uk/ServiceDirectories/pages/ServiceSearch.aspx?ServiceType=GP"/>
<s:SearchCoords>174900,517900</s:SearchCoords>
<entry>
<id>
http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/32248
</id>
<title type="text">Sayer A</title>
<updated>2012-04-24T10:54:04Z</updated>
<link rel="self" title="Sayer A" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/32248?apikey=YAHUGHET"/>
<link rel="alternate" title="Sayer A" href="http://www.nhs.uk/ServiceDirectories/Pages/GP.aspx?pid=15F37AEF-EC5B-4A90-9E72-269ADEB39629"/>
<content type="application/xml">
<s:organisationSummary>
<s:name>Sayer A</s:name>
<s:address>
<s:addressLine>The Richmond Green Medical Cen</s:addressLine>
<s:addressLine>19 The Green</s:addressLine>
<s:addressLine>Richmond</s:addressLine>
<s:addressLine>Surrey</s:addressLine>
<s:postcode>TW91PX</s:postcode>
</s:address>
<s:contact type="General">
<s:telephone>020 83327515</s:telephone>
</s:contact>
<s:geographicCoordinates>
<s:northing>174900</s:northing>
<s:easting>517800</s:easting>
<s:longitude>-0.305512266736965</s:longitude>
<s:latitude>51.4608026642546</s:latitude>
</s:geographicCoordinates>
<s:Distance>0.1</s:Distance>
</s:organisationSummary>
</content>
</entry>
<entry> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:36:27.510

好的。显然你的 Root 元素是`<feed>`并且在它里面你有一些`<entry>`元素。所以你必须改变这条线（注意双'/'）才能抓住它们。如果您记录您的响应以确保您为解析器提供了正确的 xml，这也会很有帮助：

```
NSArray *elements = [doc searchWithXPathQuery:@"//entry"]; 
```

# html - 在屏幕上居中不同的图像

> ID：10279783
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:38:13.193
> 
> 标签：html, css, positioning

我在将图像居中时遇到问题。我想要实现的是[这个](http://www.flickr.com/photos/74322780@N08/7105734765/in/photostream/lightbox/)。

就像你可以看到我在屏幕顶部有 3 张图像。这 3 个图像位于一个名为“knoppen_boven”的 div 中。在这些图像下方，我有一个拼图图像。现在我可以看到我的网站看起来像[这样](http://www.flickr.com/photos/74322780@N08/6959666756/in/photostream/lightbox/)。

就像您看到的拼图很好地位于屏幕中间，但按钮却不是。

这是我的 HTML

```
<div class="ui-grid-g-menu">
        <div class="knoppen_boven">
            <a href="~PROBE(248)~" class="btnKlant" data-transition="slide">
                <img src="images/btnklant.png" width="80" height="85" />
            </a>
            <a href="~PROBE(249)~" class="btnContact" data-transition="slide">
                <img src="images/btnContact.png" width="80" height="85" />
            </a>
            <a href="~PROBE(250)~" class="btnPlanning" data-transition="slide">
                <img src="images/btnPlanning.png" width="80" height="85" />
            </a>
        </div>
        <img src="images/img_puzzel.png" class="menu" width="150" height="150" />
    </div> 
```

这是我的 CSS

```
.knoppen_boven{

    margin:50px auto;
}
.btnContact {
    overflow: hidden;
    position:absolute;
    top: 110px;
    left: 30px;

}
.btnKlant {
    overflow: hidden;
    position:absolute;
    top: 110px;
    left:125px;

}
.btnPlanning {
    overflow: hidden;
    position:absolute;
    top:110px;
    left:220px;

}
img.menu {
    overflow: hidden;
    display:block;
    margin:90px auto;       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:48:18.587

我认为你有点过度编译它。只需将 text-align: center 设置为 knoppen_boven div，图像将在页面中居中（无需绝对定位）。

```
 .knoppen_boven {
      text-align: center;
 } 
```

请记住删除您拥有的所有绝对位置（在三个按钮中），以便文本处理工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:51:50.770

我从您的热门图片中删除了一些课程。现在您可以相应地应用它们。

```
<style>
.knoppen_boven{
 align:center;
 height:100px;

}
.btnContact {
overflow: hidden;
position:absolute;
top: 110px;
left: 30px;

}
.btnKlant {
overflow: hidden;
position:absolute;
}
.btnPlanning {
overflow: hidden;
position:absolute;

}
img.menu {
overflow: hidden;
display:block;

}

</style> 
```

而html是

```
<div class="ui-grid-g-menu" align="center">
<div class="knoppen_boven" >
<a href="~PROBE(248)~"  data-transition="slide">
<img src="images/btnklant.png" width="80" height="85" />
        </a>
        <a href="~PROBE(249)~"  data-transition="slide">
            <img src="images/btnContact.png" width="80" height="85" />
        </a>
        <a href="~PROBE(250)~"  data-transition="slide">
            <img src="images/btnPlanning.png" width="80" height="85" />
        </a>
    </div>
    <img src="images/img_puzzel.png" class="menu" width="150" height="150" />
</div> 
```

希望这会帮助你。

# orbeon - 从 xsl PDF 模板中的指定 http-service 检索数据

> ID：10279784
> 
> 赞同：0
> 
> 时间：2012-04-23T11:38:18.203
> 
> 标签：orbeon, xforms

我正在使用 orbeon 3.8 并拥有[print-pdf-template.xml的第一个版本](https://github.com/orbeon/orbeon-forms/blob/e1e44590bb41ceaa6480a1156c8904d1b4a06341/src/resources/apps/fr/print/print-pdf-template.xsl)

我有以下问题，当我使用 http-services 填充 xforms:select 元素时，一切正常，直到我尝试获取 pdf 版本的表单，因为我可以理解下面的代码

```
<xsl:when test="local-name($control) = 'select1'">
   <!-- Other single-selection controls: just use label -->
   <field acro-field-name="'{$field-name}'" value="'{$control-resources/item[value = $control-value]/label}'"/>
</xsl:when> 
```

试图从表单拥有的资源中获取标签值，而不是从 http-service。当然，form.xhtml 中没有具有这种价值的数据。

当我用静态字段填充 xforms:element 时，一切都以 PDF 格式显示。如果我会改变

```
<field acro-field-name="'{$field-name}'" value="'{$control-resources/item[value = $control-value]/label}'"/> 
```

至

```
<field acro-field-name="'{$field-name}'" value="'{$control-value}'"/> 
```

然后 PDF 将显示所选项目的值。

据我了解，print-pdf-template.xsl 的数据在 print-pdf-template.xpl 中进行了描述，它决定了使用哪个处理器进行数据转换。

所以我想知道从 http-service 检索标签数据的最佳方法是什么，它在 PDF 模板中填充 xforms:select 元素与数据？

是否可以在不更改处理器代码的情况下检索数据？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:45:35.500

[从 2011 年 9 月 2 日开始，此提交](https://github.com/orbeon/orbeon-forms/commit/052f3825c5095bc6e8625d1bd86d35085b6888f4)（还涉及其他后续提交）已修复此问题。

所以这不是一个简单的修复，也没有简单的答案。从这里你可以：

1.  根据这些提交修补您的构建（不一定是微不足道的）
2.  升级到夜间构建
3.  等待下一个稳定版本

# c++ - 如何访问调用堆栈？

> ID：10279785
> 
> 赞同：1
> 
> 时间：2012-04-23T11:38:18.813
> 
> 标签：c++, callstack

我有一个由父节点和子节点组成的树数据结构，如下所示：

```
<Node1>
  <Node2/>

  <Node3>
    <Node4/>
  </Node3>
</Node1> 
```

为了解析结构，我使用了 μ-recursive 函数：

```
void RecursiveFunction(NodeT node)
{
    if(node.has_child())
        RecursiveFunction(node.child());
} 
```

当我调用作为参数传递的 RecursiveFunction 时，例如，Node2 我希望访问父（Node1）数据而不使用其他数据结构存储这些数据，因为第一个节点的数据在制作之前已存储在调用堆栈中递归调用。所以我需要访问调用堆栈来读取 Node1 的数据，而我正在解析 Node2 无法直接访问父亲，依此类推。

例如，如果我正在解析 Node4：

```
void RecursiveFunction(NodeT node)
{
    /* Access to Node3 and Node1 data...

    if(Node4.has_child())
        RecursiveFunction(Node4.child()); */
} 
```

可能吗？以什么方式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:49:23.930

访问调用堆栈对我来说有点过度工程。将函数从递归转换为迭代并使用您自己的堆栈。堆栈应包含 NodeT 的实例和整数值，通知函数有多少节点的子节点已被处理。如果该值低于节点的子节点计数，循环将增加该值并将下一个子节点添加到堆栈中。否则它将处理该节点，然后将其从堆栈中弹出。

另一个优点是，您不再受程序堆栈大小的限制，如果需要，您可以处理更多嵌套结构。否则你会冒风险，好吧，我们不要害怕说，堆栈溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:47:22.937

即使您能找到一种从调用函数访问数据的方法，任何其他程序员也不容易理解您的工作。

我建议用迭代替换递归，这应该可以让你清楚地表达你想要做什么。有关更多信息，请参阅[从递归到迭代](https://stackoverflow.com/questions/159590/way-to-go-from-recursion-to-iteration)的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:41:42.753

It would be possible, but it would be quite dangerous to do so. This is mainly because you want to mess with the process stack. Also I don't think there are any library functions to do so, that being said you would have to do some pointer arithmetics to achieve that.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:55:48.327

如果您想要或必须（例如作业要求？）坚持递归，请将父节点作为第二个参数添加到您的函数中，默认为`NULL`，表示当前节点是根节点。IE：

```
void RecursiveFunction(NodeT const& node, NodeT const* parentPtr=NULL)
{
    if(node.has_child())
        RecursiveFunction(node.child(), &node);
} 
```

请注意，我修改了您的函数以通过引用 const 来接受第一个参数，否则您会创建**很多**树的副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:27:16.080

调用堆栈也用于函数参数*，因此使用它来构建链：

```
struct chain {
  NodeT* node;
  chain const* parent;
}
void RecursiveFunction(chain const& c)
{
    if(c.node->has_child()) {
       chain child = { c.node->child(), &c };
        RecursiveFunction(child);
    }
} 
```

[*] 至少在概念上；实际实现可能会有所不同。在任何情况下，这个 C++ 代码都是可移植的，不像低级黑客。

# sql-server - 事务隔离下的命令shell SSIS包执行读取未提交

> ID：10279793
> 
> 赞同：0
> 
> 时间：2012-04-23T11:38:55.710
> 
> 标签：sql-server, transactions, ssis, locking, deadlock

如果执行以下操作，是否会隔离包中发生的所有事务？

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
BEGIN TRANSACTION
EXEC xp_cmdshell 'dtexec /f "C:\Package.dtsx"'
END TRANSACTION 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:49.283

不，pacakge 本身有一个默认事务（单击包上的任何空白处并查看属性），它还有自己的事务控制机制，其中可以“支持、需要或不支持”任务

[在此处](http://msdn.microsoft.com/en-us/library/ms137690%28v=sql.100%29.aspx)查看完整说明：

# python - 在 Chrome 网络窗格中查看 Python(+mod_wsgi) 错误消息

> ID：10279795
> 
> 赞同：0
> 
> 时间：2012-04-23T11:38:58.760
> 
> 标签：python, json, google-chrome, mod-wsgi

我是 Python 新手，查看错误消息时遇到问题：我有一个 javascript 函数进行如下调用：

```
$.getJSON('test.py', {data: 'somedata'}, function(return){alert(return.echo)}) 
```

并且一个 test.py 文件成功地回显了该消息：

```
def application(environ, start_response):
  import json
  status = '200 OK'
  response_headers = [('Content-type', 'application/json')]
  start_response(status, response_headers)
  data = environ['QUERY_STRING'].split('=')[1])   
  return json.dumps({'echo': data}, separators=(',',':')) 
```

注意：我刚刚从内存中重新键入了该脚本，所以如果您发现语法错误，那是我键入错误，基本脚本工作正常。

如果我通过呼叫运行页面，我会收到警报，然后如果我访问 Chrome 中的网络选项卡，我会看到

```
Request URL:http://localhost/test.py?data=somedata
Request Method:GET
Status Code:200 OK 
```

在预览和响应选项卡上，我看到：

```
{"echo":"testdata"} 
```

但是，如果我随后在脚本中抛出一个实际错误（在这个学习期间经常发生这种情况！）并在 Chrome 中测试页面，网络选项卡会显示正在进行的调用

```
Request URL:http://localhost/test.py?data=somedata
Request Method:GET
Status Code:500 Internal Server Error

Query String Parameters: (view URL encoded)
    data:'somedata' 
```

但是，如果我点击预览，它会显示：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, you@example.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Apache/2.2.21 (Unix) DAV/2 mod_wsgi/3.3 Python/2.6.7 Server at localhost Port 80 
```

我的问题是是否可以使用此窗口显示堆栈跟踪或任何有助于我诊断问题的信息。目前，我正在通过反复试验进行所有调试，除了热爱 Python 的每一秒。

有人能指出我正确的方向吗？

编辑这个页面：

```
http://code.google.com/p/modwsgi/wiki/DebuggingTechniques 
```

在“错误捕获中间件”标题下有一个解决方案，但他们的示例对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:36:20.400

尝试编写您的代码以容忍没有给出 QUERY_STRING。如果没有，以下将失败。

```
data = environ['QUERY_STRING'].split('=')[1]) 
```

一般来说，最好使用某种框架来确保像这样的小事情不会成为问题。

将 Flask 视为小型微框架的一个很好的例子。

# r - 如何找到一个值在一列中重复了多少次 - R

> ID：10279797
> 
> 赞同：2
> 
> 时间：2012-04-23T11:39:10.207
> 
> 标签：r, statistics

> **可能重复：**
> [计算 R 中的唯一值](https://stackoverflow.com/questions/4215154/count-unique-values-in-r)

我只有一列满是名字，我需要知道每个名字在这个列上出现了多少次。

我可以做一个

```
summary(dfUL) 
```

其中 dfUL 是我的用户列表数据框

这将为我提供一个特定值重复次数的摘要，但它只会针对前 6 个进行。我怎样才能为整个数据框做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T11:42:47.113

你已经试过了`table(dfUL)`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T23:45:38.880

另一种可能有用的方法是`match()`函数。

```
match(x,dfUL$somecol) #Where x is the value in somecol you are looking for
match(max(dfUL$somecol),dfUL) #Returns the row with the maximum value of somecol 
```

# apache - 部分 | 使用 Apache POI 的 Word

> ID：10279799
> 
> 赞同：3
> 
> 时间：2012-04-23T11:39:11.230
> 
> 标签：apache, ms-word, apache-poi

我想知道是否可以使用 Apache POI 阻止 Word 上的部分。如果有人有任何可以帮助我的示例或教程。

# objective-c - 使用 AddThis 插件将 UIImage 转换为 jpeg/png 文件以进行共享

> ID：10279805
> 
> 赞同：0
> 
> 时间：2012-04-23T11:39:32.183
> 
> 标签：objective-c, uiimage, addthis, uiimagejpegrepresentation

我想将 UIImage 转换为 jpeg 或 png 等格式，以便我可以使用名为“AddThis”的 IOS 插件共享该文件。我尝试仅使用 UIImage 共享它，但插件不支持它，所以我需要先找到一种将 UIImage 转换为 jpeg 的方法，然后将其添加到此代码中：

```
[AddThisSDK shareImage:[UIImage imageNamed:@"test.jpg] withService:@"twitter" title:@"I'm sharing something" description:@"Random description of image"]; 
```

代码必须有，`shareImage:[UIImageNamed:@""]`否则会发生错误。

到目前为止，我已经尝试使用它进行转换，`UIImageJPEGRepresentation`但我认为我没有正确完成它。老实说，我尝试将其与您直接从拍摄图像中转换的方式类似：

```
 NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"photo_boom.jpg"];

[UIImageJPEGRepresentation(shareImage, 1.0) writeToFile:jpgPath atomically:YES];

NSError *error;
NSFileManager *fileMgr = [NSFileManager defaultManager];

NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"photo_boom.jpg"];

NSLog(@"Documents directory: %@", [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error]); 
```

有些东西告诉我这不是正确的方法......主要是因为我无法让它工作。

我真的很感激任何帮助！

基本上，我通过转换 UIView 制作了 UIImage：

```
UIGraphicsBeginImageContext(firstPage.bounds.size); 
[firstPage.layer renderInContext:UIGraphicsGetCurrentContext()]; 
UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
```

然后我想给出一个 jpeg 格式，因为当我试图简单地将它作为

```
[AddThisSDK shareImage:image withService:@"twitter" title:@"I'm sharing something" description:@"Random description of image"]; 
```

它给了我一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:11:44.720

`UIImage`图像有自己的内部表示，因此无论您使用 jpeg 还是 png 数据加载它都无关紧要。

您感兴趣的 API 调用将 a`UIImage`作为第一个参数，因此类似于

```
[AddThisSDK shareImage:[UIImage imageNamed:@"photo_boom.jpg"] 
           withService:@"twitter" 
                 title:@"I'm sharing something" 
           description:@"Random description of image"]; 
```

应该可以工作，前提是您的捆绑包中包含 photo_boom.jpg。如果您要从文件夹加载以前保存的图像，则需要以下内容：

```
NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"photo_boom.jpg"];
UIImage * myImage = [UIImage imageWithContentsOfFile: jpgPath];

[AddThisSDK shareImage:myImage
           withService:@"twitter" 
                 title:@"I'm sharing something" 
           description:@"Random description of image"]; 
```

如果这不起作用，您是否尝试过在该`AddThisSDK`行上放置一个断点并检查 的值`image`？`po image`在控制台上键入。

# java - Java netbeans 表单 - 从组合框中获取值

> ID：10279807
> 
> 赞同：0
> 
> 时间：2012-04-23T11:39:36.960
> 
> 标签：java, string, swing, netbeans, jcombobox

我想从组合框中获取一个值并将其插入方法中。我的问题是该方法需要采用 Node 类型的变量。

> ShortestPath.computeRoutes(jComboBoxDepFrom.getSelectedItem().toString());

当我尝试上面的代码时，我收到以下错误：

> 类 busplanner.ShortestPath 中的方法 computeRoutes 不能应用于给定类型；必需：busplanner.Node 找到：java.lang.String 原因：实际参数java.lang.String 无法通过方法调用转换转换为busplanner.Node

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:51:21.473

您可以将节点放在组合框中，并为每个节点的文本使用渲染器。

```
jComboBoxDepFrom.setRenderer(new BasicComboBoxRenderer() {

    @Override
    public Component getListCellRendererComponent(JList list,
                                               Object value,
                                               int index,
                                               boolean isSelected,
                                               boolean cellHasFocus) {
        Node node = (Node)value;
        return super.getListCellRendererComponent(list, node.getText(),
                index, isSelected, cellHasFocus);
    };
}); 
```

如果 Node.toString 不够。

# c# - 模拟点击进入隐藏窗口

> ID：10279812
> 
> 赞同：3
> 
> 时间：2012-04-23T11:39:47.323
> 
> 标签：c#, click, hidden, simulate, sendinput

我有一个 C# 问题，

我能够模拟对当前窗口的点击，但如果窗口被最小化或隐藏，我想这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:55:23.607

这是一个完整工作的片段，它将为您提供窗口句柄、目标子窗口并将消息发布到该子窗口。

```
#include "TCHAR.h"
#include "Windows.h"

int _tmain(int argc, _TCHAR* argv[])
{
    HWND hwndWindowTarget;
    HWND hwndWindowNotepad = FindWindow(NULL, L"Untitled - Notepad");
    if (hwndWindowNotepad)
    {
        // Find the target Edit window within Notepad.
        hwndWindowTarget = FindWindowEx(hwndWindowNotepad, NULL, L"Edit", NULL);
        if (hwndWindowTarget) {
            PostMessage(hwndWindowTarget, WM_CHAR, 'G', 0);
        }
    }

    return 0;
} 
```

目前它会将`G`字符发送到记事本“Untitled”（打开一个新记事本，什么也不做。

[`spy++`](http://msdn.microsoft.com/en-us/library/aa264396%28v=vs.60%29.aspx)您可以找到使用Visual Studio 附带的子窗口。

下面是一个使用 SendInput 发送鼠标事件的例子：

```
#include "TCHAR.h"
#include "Windows.h"

int _tmain(int argc, _TCHAR* argv[])
{
    POINT pt;
    pt.x = 300;
    pt.y = 300;

    HWND hwndWindowTarget;
    HWND hwndWindowNotepad = FindWindow(NULL, L"Untitled - Notepad");
    if (hwndWindowNotepad)
    {
        // Find the target Edit window within Notepad.
        hwndWindowTarget = FindWindowEx(hwndWindowNotepad, NULL, L"Edit", NULL);
        if (hwndWindowTarget) {
            PostMessage ( hwndWindowTarget, WM_RBUTTONDOWN, 0, (pt.x) & (( pt.y) << 16) );
            PostMessage ( hwndWindowTarget, WM_RBUTTONUP, 0, (pt.x ) & (( pt.y) << 16) );
        }
    }

    return 0;
} 
```

* * *

抱歉，这花了这么长时间，这是 C# 版本：

```
using System;
using System.Runtime.InteropServices;

namespace Sandbox
{
    class Program
    {
        [DllImport("user32.dll")]
        static extern bool PostMessage(IntPtr hWnd, uint Msg, int wParam, int lParam);

        [DllImport("user32.dll")]
        static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

        [DllImport("user32.dll")]
        static extern IntPtr FindWindowEx(IntPtr hWnd, string lpClassName, string lpWindowName, string lParam);

        public const Int32 WM_CHAR = 0x0102;
        public const Int32 WM_KEYDOWN = 0x0100;
        public const Int32 WM_KEYUP = 0x0101;
        public const Int32 VK_RETURN = 0x0D;

        public const string windowName = "Untitled - Notepad";

        static void Main(string[] args)
        {
            Console.WriteLine($"Finding {windowName}");
            var hwndWindowNotepad = FindWindow(null, "Untitled - Notepad");

            if (hwndWindowNotepad != 0)
            {
                // Find the target Edit window within Notepad.
                var hwndWindowTarget = FindWindowEx(hwndWindowNotepad, null, "Edit", null);
                if (hwndWindowTarget != 0)
                {
                    Console.WriteLine($"Sending Char to {windowName}");
                    PostMessage(hwndWindowTarget, WM_CHAR, 'G', 0);
                }
            }
        }
    }
} 
```

# facebook-opengraph - Facebook 应用程序以非英语语言打开图形操作

> ID：10279813
> 
> 赞同：1
> 
> 时间：2012-04-23T11:40:02.193
> 
> 标签：facebook-opengraph

我有非英语母语的 Facebook 应用程序，但是当我创建和使用开放图形操作和对象时，它们显示为英语。我无法将动作文本更改为我的母语，因为它不接受我的角色，而且因为母语不是英语，我无法翻译它。

如何以我的母语使用和查看打开的图形操作和对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:02:07.407

转到[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)下的应用设置页面，编辑您的应用设置 - 在左侧，您应该会找到一个链接，上面写着“翻译您的应用”（或类似的内容，我目前正在使用德语界面），它目前是底部的第二个链接。

[https://developers.facebook.com/docs/internationalization/](https://developers.facebook.com/docs/internationalization/)解释了整个过程。

# jquery - jQuery wrapAll 子项，如果他们还没有某个类的父项

> ID：10279817
> 
> 赞同：0
> 
> 时间：2012-04-23T11:40:11.210
> 
> 标签：jquery

我使用以下内容将所有具有“子”类的项目与“父”类的 div 一起包装：

```
$(".child").wrapAll('<div class="parent" />'); 
```

问题是该函数有时会重新运行，我不希望创建多个 div.parents'。如何在我的代码中添加条件，以便仅在 div.childs' 还没有具有“父级”类的父级时才添加 div.parent？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:42:05.857

你可以[`hasClass()`](http://api.jquery.com/hasClass/)这样使用：

```
if (! $(".child").parent().hasClass('parent')){
   $(".child").wrapAll('<div class="parent" />');
} 
```

或[`closest`](http://api.jquery.com/closest/)与 一起使用`length`：

```
if (! $(".child").closest('.parent').length){
   $(".child").wrapAll('<div class="parent" />');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:56:21.383

不知道快不快：

```
$(":not(.parent) > .child").wrapAll('<div class="parent" />'); 
```

**没测试！！但可能有效**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:58:59.673

您可以在单行中完成）

$(".child").parents('p:not(.parent)').find(".child").wrapAll('');

# imagemagick - 使用 ImageMagick 创建地图标志

> ID：10279824
> 
> 赞同：1
> 
> 时间：2012-04-23T11:40:31.780
> 
> 标签：imagemagick

我有一个要求，我需要根据用户头像创建地图标志：

![在此处输入图像描述](../Images/b7ca997e48e00b402cd106742f2aad45.png)

用户头像可以是任何大小和纵横比。我遇到的问题是让图像正确合成，使我能够获得标记周围的透明度，以支持底部的刻度。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:29:50.653

事实证明，使用正确的方法是相当简单的。

首先，您需要两个叠加图像。其中之一是结果图像的大小，并且在任何地方都是透明的，除了您希望头像显示的位置。第二个是图像上环绕的简单透明PNG。

然后，这似乎有效：

```
composite avatar.jpg -thumbnail 61x68^ -gravity center map_marker.png mask.png output.png 
```

# c - SHA256 为每个输入生成相同的哈希值

> ID：10279825
> 
> 赞同：-2
> 
> 时间：2012-04-23T11:40:32.233
> 
> 标签：c

我正在使用 SHA256 在循环中生成 C 中的哈希值，以及要为其生成哈希的值，循环的计数器变量也被传递。由于每次迭代中计数器变量的值都会发生变化，所以我希望 SHA256 每次都返回不同的哈希值。但它每次都返回相同的哈希值。请帮忙！

提前致谢

代码：

```
int generate_sha256hash { 
  int loop = 0; 
  unsigned char hash_paramters[2] = {0};
  unsigned char device_ids[2] = {0,0}; 
  hash_paramters[0] = 0; 
  unsigned char pass_string = "PASSWORD"; 

   for(loop = 1; loop < 10; loop++) {
     hash_paramters[1] = loop;
     memcpy((unsigned char)(&input_info[0]),(unsigned char )hash_paramters ,2); 
     memcpy((unsigned char)(&input_info[2]),(unsigned char )device_ids,2);
     memcpy((unsigned char)(&device_info[4]),(unsigned char*)au8defaultPwd,8); 

     printf("\n Generating Hash Value "); 

     hash_value = SHA256(device_info,14,au8HashValue); 
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:27:20.730

您`input_info`在循环中进行更改（取决于计数器），但不要将其用于哈希生成。您只使用`device_info`)。

我认为调用中`unsigned char`的所有转换`memcpy`实际上都是转换为`unsigned char*`，因为它们应该是。您的代码中还有其他语法特性。

# ip-address - 远程 IP 地址和物理地址之间的区别

> ID：10279826
> 
> 赞同：1
> 
> 时间：2012-04-23T11:40:44.507
> 
> 标签：ip-address

远程 IP 地址和物理地址有什么区别？

这两件事是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:46:51.190

它们是在两个不同级别使用的地址。

IP 是分配给机器的软件虚拟名称。

物理地址（如果您指的是 MAC）是属于通信接口的唯一代码。

物理地址在较低级别用于物理路由消息。

参考 OSI 模型：[OSI](http://en.wikipedia.org/wiki/OSI_model)

# makefile - Installing glib in non-standard prefix fails

> ID：10279829
> 
> 赞同：34
> 
> 时间：2012-04-23T11:40:45.950
> 
> 标签：makefile, installation, glib, libtool

I'm trying to install glib in a non-standard prefix but I get the following when running `make install`:

```
/bin/sh ../libtool --mode=install /usr/bin/install -c libgthread-2.0.la '/root/build/lib'
libtool: install: error: cannot install `libgthread-2.0.la' to a directory not ending in /usr/local/lib 
```

Any reason why I *have to* install gthread only in a prefix ending with /usr/local/lib?

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-22T10:10:13.327

在我的 Linux 机器上编译 MonetDB 时，我也偶然发现了这个问题。这是对我有用的解决方案/解决方法：始终`make clean`在`./configure`.

在您的示例中，您应该能够：

```
./configure --prefix=/root/build && make clean && make && make install 
```

我在关于 apache httpd 错误的[讨论中找到了解决方案，Joe Orton 在其中分享](https://issues.apache.org/bugzilla/show_bug.cgi?id=35098)[了他的知识](https://issues.apache.org/bugzilla/show_bug.cgi?id=35098#c7)：

> 重新运行“配置”后，通常需要“清理”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-27T00:32:34.173

使用：

```
make clean 
make distclean 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-02T13:53:32.467

库的`install`路径通常可以自定义，而不是在某处的默认路径`/usr/local/`。

对于某些库，您应该`./configure`像这样指定它：

```
./configure --prefix=/the/new/install/path
make
make install 
```

其他人允许您在以下情况下指定它`make install`：

```
./configure
make
make install prefix=/the/new/install/path 
```

你可以两个都试试。至少一个应该可以解决您的问题。

# html - 如何在div内垂直居中子元素

> ID：10279831
> 
> 赞同：11
> 
> 时间：2012-04-23T11:40:55.623
> 
> 标签：html, css

> **可能重复：**
> [如何在更大的 div 中制作图像中心（垂直和水平）](https://stackoverflow.com/questions/388180/how-to-make-an-image-center-vertically-horizontally-inside-a-bigger-div)

HTML 代码：

```
<div class="promo_tumbs col_12">
    <div class="promo_tumb"></div>
    <div class="promo_tumb"></div>
    <div class="promo_tumb"></div>
    <div class="promo_tumb"></div>
    <div class="promo_tumb"></div>
</div> 
```

CSS部分：

```
.promo_tumbs {
    height: 155px;
    background: #058;
}
.promo_tumb {
    height: 75px;
    width: 125px;
    background: #990000;
    float: left;
    margin: 0 10px;
    text-align: center;
} 
```

我怎样才能垂直居中`.promo_tumb`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T11:45:06.117

阅读这篇关于垂直居中的文章。

[http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

如果您不想支持 IE7 或更低版本，则可以使用`vertical-align : middle`.

除此以外：

1.  设置`display`为`table` _`.promo_tumbs col_12`
2.  设置`vertical-align`为`middle`&`display`为 `table-cell`_ `.promo_tumb`

它应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T11:43:07.810

高度（`155px`和`75px`分别）是否总是固定的？在这种情况下，它就像更改`.promo_tumb`边距一样简单：

```
margin: 40px 10px 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:44:00.800

在 css/style 中使用`vertical-align: middle;`promo_thumbs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T11:57:04.317

```
css part insert in head section..........

   <style type="text/css">
  .promo_tumbs {height: 155px; background: #058; }
  .promo_tumb {height: 75px; width: 125px; background: #990000; float: left; 

   margin: 40px 50px; 

   text-align: center; }
  </style> 
```

身体部位编码......

```
 <div class="promo_tumbs col_12">
                <div class="promo_tumb"></div>
                <div class="promo_tumb"></div>
                <div class="promo_tumb"></div>
                <div class="promo_tumb"></div>
                <div class="promo_tumb"></div>
            </div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-23T12:00:45.920

```
.promo_tumbs {height: 155px; background: #058;
    vertical-align: middle;
    display:table-cell;
 } 
```

# c# - WCF: The server has rejected the client credentials

> ID：10279843
> 
> 赞同：1
> 
> 时间：2012-04-23T11:41:36.137
> 
> 标签：c#, wcf

I'm working on this problem quiet a long time... next step would be to reinstall all my PCs and/or reprogram everything...

The program(C#) I'm using is an old one (the guy who wrote this isn't available anymore :( )

Everything works fine on another testenvironment, but not on mine... we were not able to figure out where the differences are.

When I start my program and try to connect to my client I get an error:

> The server has rejected the client credentials.

What I did by now:

*   Tried it with the preconfigured Administrator User.
*   I created the same user on both PCs, which are in the same Workgroup User: Test PW: 123456 WorkGroup: TESTLAB
*   I added in the Local Security Settings -> Local Policies -> User Rights Assignment -> Access this computer from the network the Users: Everyone, Authenticated User, Administrator (on both PCs)
*   Windows Firewall is disabled, both PCs can ping each other and can connect via RDP

I also see some network packages flying arround while trying to connect (with Wireshark)

```
 private static System.ServiceModel.Channels.Binding getLargeNetTCPTransferBinding()
    {
        NetTcpBinding binding = new NetTcpBinding(/*SecurityMode.Message, true*/);
        binding.MaxReceivedMessageSize = 2147483647;
        binding.TransferMode = TransferMode.Buffered;
        binding.MaxBufferSize = 2147483647;
        binding.ReceiveTimeout = new TimeSpan(00, 2, 0);
        binding.SendTimeout = new TimeSpan(00, 2, 0);
        binding.Security.Mode = SecurityMode.Transport;
        binding.Security.Transport.ClientCredentialType = TcpClientCredentialType.Windows;
        binding.Security.Transport.ProtectionLevel = System.Net.Security.ProtectionLevel.EncryptAndSign;
        //binding.ReliableSession.Enabled = true;
        binding.ReliableSession.InactivityTimeout = new TimeSpan(23, 59, 59);
        binding.ReaderQuotas.MaxStringContentLength = 2147483647;
        //binding.TransactionFlow = true;
        return binding;
    } 
```

as I said, the same code works in another testenvironment :/ also the communictaion works with "localhost", so at least the code "should" work also on my workstations. Both PCs are running Windows XP SP3 (the same as on the second environment where everything works)

Hopefully someone can help me :/

# c# - SSL endpoint on a WCF service with only XML configuration file

> ID：10279844
> 
> 赞同：1
> 
> 时间：2012-04-23T11:41:37.887
> 
> 标签：c#, wcf

I have a WCF Service with only the xml configuration file and the .exe (so not the complete solution). Can i make existing endpoints secure with https? If so, how can i do this and how can i connect to it with my client which will be on another pc in the network?

this will be my service xml config: my binding:

```
 <wsHttpBinding>
    <binding
      name="HighQuotaWSHttpBinding"
      receiveTimeout="00:10:00"
      sendTimeout="00:10:00"
      bypassProxyOnLocal="true"
      maxBufferPoolSize="2147483647"
      useDefaultWebProxy="false"
      maxReceivedMessageSize="2147483647">
      <security mode="Transport">
        <transport clientCredentialType="None" />
      </security>
    </binding>
  </wsHttpBinding> 
```

my endpoint:

```
 <service
    behaviorConfiguration="WebDataServiceBehaviour"
    name="Humiq.Integral.WebDataService.Impl.ServiceLayer.WcfLibrary.WebDataService">
    <endpoint
      address="WebDataService"
      binding="wsHttpBinding" bindingConfiguration="HighQuotaWSHttpBinding"
      contract="Humiq.Integral.WebDataService.Intf.ServiceLayer.IWebDataService"
      name="WebDataServiceHttpBinding">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint
      address="mex"
      binding="mexHttpsBinding"
      contract="IMetadataExchange"
      name="mexManagement" />
    <host>
      <baseAddresses>
        <add baseAddress="http://mylocalip:9650/" />
        <add baseAddress="https://mylocalip:9651/" />
      </baseAddresses>
    </host>
  </service> 
```

behaviour:

```
 <behaviors>
  <serviceBehaviors>
    <!-- Behavior for WebserviceData interface -->
    <behavior name="WebDataServiceBehaviour">
      <!-- Set throttling of (concurrent) cals -->
      <serviceThrottling
         maxConcurrentCalls="100"
         maxConcurrentSessions="100"
         maxConcurrentInstances="100"/>
      <!-- To avoid disclosing metadata information, 
      set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpsGetEnabled="True"/>
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="True" />
      <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

And this is my client:

```
 <bindings>
        <wsHttpBinding>
            <binding name="WebDataServiceHttpBinding" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Basic" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://mylocalip:9651/WebDataService" binding="wsHttpBinding"
            bindingConfiguration="WebDataServiceHttpBinding" contract="wcf1.IWebDataService"
            name="WebDataServiceHttpBinding">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:01:15.857

您需要定义端口以在 Windows 上使用 ssl。

它是用 netsh 命令完成的，你可以阅读它的帮助：

```
netsh http add sslcert ipport=0.0.0.0:8732 certhash=4745537760840034c3dea27f940a269b7d470114 appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
```

# c# - WPF 3D Dynamic Textures

> ID：10279845
> 
> 赞同：3
> 
> 时间：2012-04-23T11:41:38.913
> 
> 标签：c#, .net, wpf, 3d, directx

I am writing a program (c# .NET 4.0 WPF 3D) that renders earth slices (like OpendTect's or Petrel's seismics module).

The problem is that I need to be able to zoom in deeply, and still see the details.

I tried putting a huge detailed texture (5000x5000), but it eats too much memory (200-300 MB), and crashes when I try to increase the size.

**Now I want to see if there is any way of using something like a dynamic texture - the one that will change depending on distance to the camera.**

Or maybe there is **some other way** of dealing with high-resolution surfaces?

I use this code to load texture:

```
wbm = new WriteableBitmap(
(int)1306*scale,
(int)ns*scale,
96,
96,
PixelFormats.Indexed8,
new BitmapPalette(getColors()));

...

visual3d.Material = visual3d.BackMaterial
= new DiffuseMaterial(new ImageBrush(wbm)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:57:42.203

您在这里有几个选择：

*   优化当前解决方案。5000 * 5000 * 4 大约是 100 MB。你如何加载和显示纹理？我有一个[应用程序](http://alloysvisualisation.codeplex.com/)可以渲染多达 1100 个 3d 对象并使用 300MB 内存，并且性能足够好。我强烈建议您运行分析器，不仅出于纯粹的性能原因，而且有助于捕获错误！我是 WPF 3D，感谢分析器，我发现我在做无用的镶嵌。
*   创建一个完整纹理的低分辨率图像和一些小的高分辨率图像，它们是纹理的一部分。如果用户单击/放大，您将加载适合视口的小型高分辨率图像。与谷歌地图类似的效果。
*   使用 XNA。您可以在 WPF 中托管 XNA 并使用[DXT](http://en.wikipedia.org/wiki/S3_Texture_Compression)纹理。我不确定，但 WPF 不直接支持该纹理共振峰。

# python - OpenERP 错误：使用显示选项卡

> ID：10279850
> 
> 赞同：0
> 
> 时间：2012-04-23T11:41:55.803
> 
> 标签：python, xml, openerp

我尝试显示选项卡，但出现此错误：*视图架构的 XML 无效！*

我写了以下代码：

```
<record model="ir.ui.view" id="employee_form_view">
    <field name="name">employee.form</field>
    <field name="model">employee</field>
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="employee">
            <group colspan="4" col="3">
                <field name="nom" />
                <field name="poste" />
                <field name="employee_age" />
            </group>
            <notebook>
                <page String="Géneral">
                    <sparator string="Links" colspan="4" />
                    <field name="nom" />
                </page>
                <page String="Others">
                    <field name="poste" />
                    <field name="employee_age" />
                </page>
            </notebook>
        </form>
    </field>
</record> 
```

为什么我得到那个错误？我该如何解决这个问题？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:57:56.640

标签

```
<page String="Géneral"> 
```

是不正确的

更正：

```
<page string="Géneral"> 
```

也许重音字符会引发错误，因此您将不得不使用 html 实体。

# java - 不会从 SharedPreferences 加载值 - 在计算中使用它们时，它们似乎是空白的

> ID：10279856
> 
> 赞同：1
> 
> 时间：2012-04-23T11:42:19.033
> 
> 标签：java, android, sharedpreferences

在我的应用程序中测试活动时，我发现它没有使用我使用 PreferenceActivity 设置的值。

我可以确认这些值是在 PrefsActivity 中正确设置的（至少是“本地”），因为每次我打开它时，设置都与我上次关闭它时的设置完全相同......

我是否必须在我的 PreferenceActivity 中指定将设置存储到哪个首选项文件中，还是我用来导入这些值以在我的活动中使用的方法有问题？感觉就像我在网上搜索了整个网络却没有找到该问题的明确答案......

这是我的活动应该加载首选项的地方，它看起来对吗？我知道这是唯一缺少的东西，因为当我在调试模式下运行它并手动输入要使用的值时，计算工作得很好......

```
public void OnStart() {
    // Loads the values for the calculator to use
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
       bodymass = settings.getInt(getString(R.string.pref_key_user_mass).toString(), 0);
       gender = settings.getString(getString(R.string.pref_key_user_gender).toString(), ""); 
```

另外，以下代码对您来说是否正确？（如果有人告诉我如何制作一个“if”语句同时比较多个变量，我也将不胜感激 - 例如，如果（三个字段中的一个为空）{做某事}）

```
 //Checks defined user gender and sets value to be used by calc accordingly
    if (gender == "male") {
        genderValue = 0.7;
    }
    else if (gender == "female") {
        genderValue = 0.6;
    }
    else if (gender == "") {
        settingsAlert();
    } 
```

它似乎永远不会触发 settingsAlert() 功能，即使所有应用程序数据都被擦除（然后它应该产生一条警报消息，提示用户在使用前设置首选项，但没有任何反应）

这是应该产生警报的代码：

```
public void settingsAlert() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("@string/dialog_setPrefs_text")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   Intent gotoSettings = new Intent(ActivityCalc.this, ActivitySettings.class); 
                   startActivity(gotoSettings);
               }
           })
           .setNegativeButton("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    finish();
               }
           })
           .create();
} 
```

## - 更新 -

我现在已经设法让警报对话框按原样生成，我想我会发布实现它的代码行，以便其他有同样问题的人可以观看和学习...... :)

问题似乎是警报确实创建正确，但从未真正调用显示 - 因此，一旦我在最后一行的`.show()`后面添加了那么一点，一切都运行良好。`.create()`

或者，您可以将其定义为 AlertDialog 对象，并在您喜欢时调用它：

```
 AlertDialog alert = builder.create();
    alert.show(); 
```

我在这里发布我的 PreferenceActivity 课程的内容供您查看

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // This line will import the preferences to display in the settings activity
    addPreferencesFromResource(R.xml.settings);
} 
```

要了解如何构建首选项资源文件，请查看[这篇文章](http://developer.android.com/resources/samples/ApiDemos/res/xml/preferences.html)

我不再包含用于指定要使用的共享首选项名称的字符串，因为我将 get 方法更改为使用 DefaultSharedPreferences：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

我现在只定义并初始化了需要在活动的其余部分持久化的变量：

```
private double genderValue = 0;
private String gender = "";
private int bodymass = 0; 
```

该应用程序现在完全可以正常工作 - 不会崩溃，并且可以正确加载 PreferenceActivity 中设置的首选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:02:55.030

您需要对 IF-ELSE 句子使用等于

```
if (gender.equals("male")) { //equals
    genderValue = 0.7;
}
else if (gender.equalsIgnoreCase("female")) { //Here the equalsIgnorecase one
    genderValue = 0.6;
}
else if (gender == "") {
    settingsAlert();
} else {
    settingsAlert();  //Probably it always comes here.
} 
```

另一件事..您是否使用“提交”正确保存了首选项？

```
 settings.edit().putString(getString(R.string.pref_key_user_gender).toString(), gender).commit(); 
```

--第三条评论后---

没试过。每个工作一个很好。但是如果你检查'duanhong169'评论，有2个putString和最后一个提交，所以..试一试:)无论如何你可以这样做：

```
SharedPreferences.Editor editor = settings.edit();
editor.putString("gender", genderValue);
editor.putInt("bodymass", bodymassValue);
editor.commit(); 
```

并回答您的其他问题..您需要“编辑”来保存偏好，它是如何工作的。您可以在 onpause、onrestart 或刚刚获得所需数据之后（在方法内）使用它。即，如果您需要登录数据，一旦您检查登录是否正确，并且如果您存储了不同的登录密码值（不同的用户），您可以 edit.putString 将新值保存在 onResult 确认中。

您可以做的更好的事情是尝试使用不同标签保存到首选项的不同方法，然后创建一个日志并从每个标签执行 getString()，这样您就会知道哪个有效，然后您可以选择更好/更容易你的情况。

**-- 更新 2 --**

据我所知.. （我从来没有尝试过，和你一样，我是 android 的新手）你的 preferences.xml 应该放在*res/xml*然后：

```
public class PreferencesFromXml extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

并获取数据：

```
PreferenceManager.setDefaultValues(this, R.xml.prefer, false);
SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(this); 
p.getString("key", "value_default") 
```

# jquery - 将固定 div 滚动到某个点

> ID：10279858
> 
> 赞同：2
> 
> 时间：2012-04-23T11:42:24.643
> 
> 标签：jquery

我看过一些这样的例子，但我的有点不同，无法弄清楚。

我正在使用在这些论坛上找到的一段 jQuery，将固定的 div 滚动到某个点然后停止，使用“scrollTop”。

```
var windw = this;

$.fn.followTo = function ( pos ) {
    var $this = this,
        $window = $(windw);

    $window.scroll(function(e){
        if ($window.scrollTop() > pos) {
            $this.css({
                position: 'absolute',
                top: pos
            });
        } else {
            $this.css({
                position: 'fixed',
                top: 40
            });
        }
    });
};

$('#scrollto-menu-nav').followTo(250); 
```

**但是，当它从底部**而不是从**顶部**到达一个高度时，我需要它停止滚动。有任何想法吗？

谢谢，R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:17:10.077

你可以这样做：

**HTML**

```
<img src=//ph.artsinn.de alt>
<div>
    <p>A short line of text, for better interpretation.</p>
    <p>Followed by another line, filled with letter and words</p> 
</div>

<img src=//ph.artsinn.de/240x160/666?text=scroll%20down alt id=obj>

<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt class=end>

<div>
    <p>A short line of text, for better interpretation.</p>
    <p>Followed by another line, filled with letter and words</p> 
</div>

<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt>​ 
```

**CSS**

```
/* not needed */
html,body{height:200%}
img {display:block}​ 
```

**JS**

```
$(function() {
    var $window = $(window),
        $sidebar = $("#obj"),
        sidebarTop = $sidebar.position().top,
        sidebarHeight = $sidebar.height(),
        $footer = $(".end"),
        footerTop = $footer.position().top;

    $sidebar.css('position', 'fixed');
    $window.scroll(function(e) {
        scrollTop = $window.scrollTop();
        topPosition = Math.max(0, sidebarTop - scrollTop);
        topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
        $sidebar.css('top', topPosition);
    });
});​ 
```

而且，再次，作为[fiddle](http://jsfiddle.net/ARTsinn/E6xEe/)。

# php - strrpos php函数无法工作

> ID：10279865
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:42:56.277
> 
> 标签：php, string

我有这个功能：

```
 function adjust_url_with_www_extract($host)
    {
       $pos =strrpos($host,"www.");
        if(  $pos === true  )
        {
          $host= substr($host,5);
        }

        return $host;
    } 
```

我从这个函数调用它：

```
 private function _unitTest()
    {
        $url="www.php.net/manual/en/function.substr.php";
        $result= $this->UnitTest->adjust_url_with_www_extract($url);
        return $result;
    } 
```

但它永远不会删除 www.. 因为它永远不会达到 if 条件.. 为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:46:39.567

strrpos() 函数查找一个字符串在另一个字符串中最后一次出现的位置。此函数返回成功时的位置，否则返回 FALSE。从不返回 TRUE

所以

strrpos($host,"www.") 将为您的网址提供 0，因此 0 表示 false 将 1 添加到 strrpos($host,"www.")+1 就像这样它会起作用

其他明智的 strrpos($host,"www.") > -1 像这样检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:52:29.643

让我们逐行进行：

```
$pos =strrpos($host,"www."); 
```

找到“www”的位置。（从相反的方向，嗯？）。

```
if(  $pos === false  ) 
```

如果我们没有找到它（嗯？），去掉前 5 个（嗯？）字符，返回其余的：

```
 $host= substr($host,5); 
```

否则返回整个主机：

```
return $host; 
```

那么为什么你期望它应该工作呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:13:53.347

为什么不简单地做：

```
function adjust_url_with_www_extract( $host ) {
     return preg_replace( '~^www\.~', '', $host );
} 
```

# android - 获取属于自己位置的移动设备的位置

> ID：10279869
> 
> 赞同：0
> 
> 时间：2012-04-23T11:43:01.200
> 
> 标签：android, gps, latitude-longitude

我正在尝试获取自己的位置。下面是给我一些错误的代码。下面给出了Log Cat..请帮助并且还想知道纬度和经度存储在哪个变量中。

我的位置.java

```
public class MyLocation extends Activity{ 

/** Called when the activity is first created. */ 
@Override 
public void onCreate(Bundle savedInstanceState) 
{ 
  super.onCreate(savedInstanceState); 
  setContentView(R.layout.main); 

  /* Use the LocationManager class to obtain GPS locations */ 
  LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 

  LocationListener mlocListener = new MyLocationListener(); 
  mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
} 

/* Class My Location Listener */ 
public class MyLocationListener implements LocationListener 
{ 

  public void onLocationChanged(Location loc) 
  { 

    loc.getLatitude(); 
    loc.getLongitude(); 

    String Text = "My current location is: " + 
    "Latitud = " + loc.getLatitude() + 
    "Longitud = " + loc.getLongitude(); 

    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show(); 
  } 

  public void onProviderDisabled(String provider) 
  { 
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show(); 
  } 

  public void onProviderEnabled(String provider) 
  { 
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show(); 
  } 

  public void onStatusChanged(String provider, int status, Bundle extras) 
  { 

  } 
} 
} 
```

原木猫

```
04-23 16:41:27.880: E/AndroidRuntime(3250): Uncaught handler: thread main exiting due to uncaught exception
04-23 16:41:27.920: E/AndroidRuntime(3250): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{your.meh.namespace/your.meh.namespace.PostActivity}: java.lang.ClassNotFoundException: your.meh.namespace.PostActivity in loader dalvik.system.PathClassLoader@458a8ad8
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2424)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2519)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.ActivityThread.access$2200(ActivityThread.java:123)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1870)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.os.Looper.loop(Looper.java:123)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.ActivityThread.main(ActivityThread.java:4370)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at java.lang.reflect.Method.invokeNative(Native Method)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at java.lang.reflect.Method.invoke(Method.java:521)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at dalvik.system.NativeStart.main(Native Method)
04-23 16:41:27.920: E/AndroidRuntime(3250): Caused by: java.lang.ClassNotFoundException: your.meh.namespace.PostActivity in loader dalvik.system.PathClassLoader@458a8ad8
04-23 16:41:27.920: E/AndroidRuntime(3250):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-23 16:41:27.920: E/AndroidRuntime(3250):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2416)
04-23 16:41:27.920: E/AndroidRuntime(3250):     ... 11 more
04-23 16:41:28.010: E/SemcCheckin(3250): Get crash dump level : java.io.FileNotFoundException: /data/semc-checkin/crashdump
04-23 16:41:28.040: I/dalvikvm(3250): threadid=7: reacting to signal 3
04-23 16:41:28.100: I/dalvikvm(3250): Wrote stack trace to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:47:09.850

您的错误（根据您粘贴的堆栈跟踪）与位置问题无关。

未找到导致 ClassNotFoundException 的类 PostActivity。

我认为您没有粘贴实际失败的代码

# java - 监控进程的cpu和内存使用情况

> ID：10279870
> 
> 赞同：0
> 
> 时间：2012-04-23T11:43:03.547
> 
> 标签：java, process

在 Java中运行其他一些进程并*监控*它们的最佳方式是什么？

通过监视我的意思是检查它们的 CPU 和内存使用情况以及它们的运行状态（正在运行或已完成）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:07:29.047

Java 不提供此类信息。您需要进行特定于操作系统的调用。

# css - 使用 Razor 的动态样式表

> ID：10279873
> 
> 赞同：15
> 
> 时间：2012-04-23T11:43:09.927
> 
> 标签：css, visual-studio, razor, server-side

如何在 CSS 文件中使用 Razor？

我使用[Razor View Engine](https://github.com/Antaris/RazorEngine)有一段时间了，我很好奇在样式表上使用它。**我可以在.cshtml**`<style>`文件块中使用 Razor，但我想知道是否也可以在外部**.css**文件中使用它（希望有**.csss**格式）。所以我google了一下，发现了两件事：

 ******第一个是[LESS](http://lesscss.org/)：“动态样式表语言”。它似乎易于使用且功能强大，但我真的需要 Razor-C#。

第二个是[Dynamic CSS Using Razor Engine](http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine)，一篇 CodeProject 文章，它更像我想要的，但它没有缓存或预编译支持（“不支持”是指作者没有提到这些方面）。我还想在 Visual Studio 中突出显示一些语法，但这是次要的。

那么，如何在 CSS 文件中以最低的性能成本编写 Razor，最好使用语法突出显示？

*   有没有一个“更完整”的项目？
*   我可以改进上述项目以实现缓存/编译吗？如果是这样，怎么做？

*附带说明：*
我找到了一个名为[RazorJS](http://djsolid.net/blog/razorjs---write-razor-inside-your-javascript-files)的项目。这就像我想要的具有缓存支持的 CSS 的 Javascript 版本。我提到这一点只是为了澄清我的需求。我目前不需要在 Javascript 中使用 Razor，但我想如果我用 CSS 完成它，用 Javascript 做同样的事情不会太难。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-23T13:14:32.193

您可以创建一个自定义视图引擎：

```
public class CSSViewEngine : RazorViewEngine
{
    public CSSViewEngine()
    {
        ViewLocationFormats = new[] 
        { 
            "~/Views/{1}/{0}.cscss", 
            "~/Views/Shared/{0}.cscss" 
        };
        FileExtensions = new[] { "cscss" };
    }

    protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
    {
        controllerContext.HttpContext.Response.ContentType = "text/css";
        return base.CreateView(controllerContext, viewPath, masterPath);
    }
} 
```

并在以下位置使用自定义扩展名注册它`Application_Start`：

```
ViewEngines.Engines.Add(new CSSViewEngine());
RazorCodeLanguage.Languages.Add("cscss", new CSharpRazorCodeLanguage());
WebPageHttpHandler.RegisterExtension("cscss"); 
```

并在 web.config 中将扩展与构建提供程序相关联：

```
<compilation debug="true" targetFramework="4.0">
    <assemblies>
        ...
    </assemblies>

    <buildProviders>
        <add extension=".cscss" type="System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </buildProviders>
</compilation> 
```

[[**注意**，如果您遇到程序集绑定错误，您可能需要更改扩展类型中的版本号以匹配您的 Razor 引擎版本。您可以通过查看对项目中 System.Web.WebPages.Razor 程序集的引用的属性来检查您使用的版本]]

最后一步是拥有一些控制器：

```
public class StylesController : Controller
{
    public ActionResult Foo()
    {
        var model = new MyViewModel
        {
            Date = DateTime.Now
        };
        return View(model);
    }
} 
```

和相应的视图： ( `~/Views/Styles/Foo.cscss`):

```
@model AppName.Models.MyViewModel

/** This file was generated on @Model.Date **/

body {
    background-color: Red;
} 
```

现在可以将其作为样式包含在布局中：

```
<link href="@Url.Action("Foo", "Styles")" rel="stylesheet" type="text/css" /> 
```******

# php - 具有三个点的域的正则表达式，例如：-“gov.ac.in”

> ID：10279878
> 
> 赞同：0
> 
> 时间：2012-04-23T11:43:31.570
> 
> 标签：php, regex

我们以这种格式 ( `http://www.xyz.gov.ac.in`) 列出 URL。并非所有人都像这样，其中一些具有正常的域。我对如何从 3 点 url 获取域名感到困惑。我们拥有的代码适用于 2 个点状域名。这是我们的代码：

```
function get_domain($url)
{
  $pieces = parse_url($url);
  $domain = isset($pieces['host']) ? $pieces['host'] : '';
  if (preg_match('/(?P<domain>[a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$/i', $domain, $regs)) {
    return $regs['domain'];
  }
  return false;
}

echo get_domain($url) ; 
```

我们如何修改上面的代码以适应 3 个点域以及其他类型？

回显结果应该是这种格式`xyz.gov.ac.in`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:07:52.473

基本上，你不能。至少不是没有包含所有“TLD”的查找表。

例如，在我的国家（荷兰），我们有`.nl`和`.co.nl`。但是`www.gov.nl`是一个普通的网站（我试图说明你不能自动说这`gov.`不是一个域）。并且`www.edu.nl`不存在。

任何试图解析它们的标准正则表达式都会告诉您域是`www.gov.nl`，而域实际上是`gov.nl`。对`edu.nl`.

您可以完成您想要的唯一方法是获取所有 TLD（和子 TLD）的列表并使用它来解析它们。

我相信 Firefox 和 Chrome 已经实现了这样一个列表（用于为 URL 中的域名着色）并不断更新。也许看看那些来源？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:03:04.187

试试这个：

```
/(^[\w|-]+\.)(?P<domain>([\w|-]+\.)+(\w+))/i 
```

希望这会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:07:12.207

您应该可以改用此 Regex

```
/(?P<domain>([a-z0-9][a-z0-9\-]{1,63}\.)+[a-z\.]{2,6})$/i 
```

# qt - 从 Windows 切换到控制台时出现 LInker 错误

> ID：10279879
> 
> 赞同：1
> 
> 时间：2012-04-23T11:43:31.797
> 
> 标签：qt, visual-c++, waf, subsystem

我正在将 Qt 用于 GUI 并在 waf 中构建我的项目。为了从控制台（默认）切换到 Windows 子系统，我必须通过我的 wscript（waf）将此参数传递给 VS 链接器

```
subsystem='windows' 
```

我在 waf 文件的构建部分中添加了这个，我收到了这个错误

```
MSVCRT.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup
C:\cygwin\home\sobingt\project\build\src\View\app.exe : fatal error LNK1120: 1 unresolved externals 
```

我想将此程序作为 Windows 而不是作为控制台运行。如果我将其作为控制台运行，则代码有效

```
subsystem='console' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:00:07.637

您需要链接到`qtmain.lib`（IIRC）。`winmain`这为窗口化的 Windows 应用程序提供了一个垫片。

# php - 我的 HTML 表单有风险吗？

> ID：10279882
> 
> 赞同：1
> 
> 时间：2012-04-23T11:43:41.000
> 
> 标签：php, html, forms

我有一个允许用户注册我的网站的 HTML 表单，我最近在网页上安装了 reCAPTCHA 以停止自动注册，今天有人说他们认为您的注册有遭受 csrf 攻击的风险。我不是一个编码员或任何东西，我只是运行一些小型网站，所以我查了一下，但所有示例都是针对网站操作等内容，但我的表单唯一要做的就是将输入输入到数据库中。我的表格有风险吗？如果我有风险，一个简单的令牌会阻止这种情况发生吗？

我无法在此处发布代码，因此表单代码位于[http://pastebin.com/rLxAAMFQ](http://pastebin.com/rLxAAMFQ)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:47:00.007

如果您的服务器端代码总是需要有效的验证码（它应该），那么这里绝对没有风险。CAPTCHA 作为反 CSRF 令牌也有双重职责。

CSRF 攻击围绕这样一个事实，即攻击者*提前*知道如何构建一个如果由受害者发送的请求将被视为有效。显然他们无法提前预测验证码将是什么，否则我们现在都会在街上杀死垃圾邮件机器人。

# java - 文件未成功上传到 FTP

> ID：10279885
> 
> 赞同：0
> 
> 时间：2012-04-23T11:43:55.740
> 
> 标签：java, apache, ftp, apache-commons

我编写了一个独立的程序来将文件上传到 FTP 服务器。代码运行良好，但我在 FTP 上找不到文件。这是代码

```
import java.io.FileInputStream;
import java.io.IOException;
import java.net.SocketException;

import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPReply;

public class FTPDemo {

    public static void main(String[] args) {

        FTPClient ftp = new FTPClient();
        int reply;

        try {

            ftp.connect("ip address");
            ftp.login("username","password");
            reply = ftp.getReplyCode();

            if(FTPReply.isPositiveCompletion(reply)){
                System.out.println("Connected Success");
            }else {
                System.out.println("Connection Failed");
                ftp.disconnect();
            }

            FileInputStream fis = null;
            String filename = "demo.txt";
            fis = new FileInputStream("C:\\demo.txt");
            System.out.println("Is file stored: "+ftp.storeFile(filename,fis));
            fis.close();
            ftp.disconnect();
        } catch (SocketException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        }

    }
} 
```

是否存储文件返回 false。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:52:53.310

让我引用您的[FTPClient 文档](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html#storeFile%28java.lang.String,%20java.io.InputStream%29)：

> FTPClient 中所有 FTP 命令方法的约定是，它们要么返回布尔值，要么返回某个其他值。布尔方法在 FTP 服务器成功完成回复时返回 true，在导致错误条件或失败的回复时返回 false。返回布尔值以外的值的方法返回包含由 FTP 命令生成的更高级别数据的值，如果回复导致错误条件或失败，则返回 null。如果要访问导致成功或失败的确切 FTP 回复代码，则必须在成功或失败后调用 getReplyCode。

换句话说，要了解失败的实际原因，您需要`ftp.getReplyCode()`从那里打电话和工作。

# iphone - 如何在以前的版本上运行应用程序

> ID：10279888
> 
> 赞同：0
> 
> 时间：2012-04-23T11:44:23.190
> 
> 标签：iphone

我正在使用 ios 5 在 Xcode 4.3 中开发一个 iPad 应用程序，并且 iam 使用 ARC 机制。如果我从 ipad 的第一个版本运行此应用程序，那么应用程序是否会崩溃。请让我知道 ARC 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:51:18.477

[文档](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)对此非常清楚：

> Mac OS X v10.6 和 v10.7（64 位应用程序）以及 iOS 4 和 iOS 5 的 Xcode 4.2 支持 ARC。Mac OS X v10.6 和 iOS 4 不支持弱引用。

最初的 iPad 附带 iOS 3.2，尽管它们有资格免费更新到 5.x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:48:03.483

`ARC`是一个编译时特性，所以它会运行。但是您还应该检查您的应用程序是否在您将支持的所有支持版本的 iOS 上运行。

# hadoop - hadoop多节点集群reducer函数出错

> ID：10279889
> 
> 赞同：0
> 
> 时间：2012-04-23T11:44:24.837
> 
> 标签：hadoop, mapreduce

我点击[这里的链接](http://jinutechworld.blogspot.in/2012/02/multi-node-hadoop-cluster-on-ubuntu.html)

当我运行上述教程第 8 步的命令时：-

```
hduser@ila:/usr/local/hadoop-0.22.0$ ./bin/hadoop jar hadoop-mapred-examples-0.22.0.jar wordcount /user/hduser/gutenberg /user/hduser/gutenberg6-out 
```

它正确运行 map 函数但不是 reduce 函数，给出以下错误：-

```
12/04/24 02:06:56 WARN conf.Configuration: mapred.used.genericoptionsparser is deprecated. Instead, use mapreduce.client.genericoptionsparser.used
12/04/24 02:06:56 INFO input.FileInputFormat: Total input paths to process : 3
12/04/24 02:06:56 INFO mapreduce.JobSubmitter: number of splits:3
12/04/24 02:06:56 INFO mapreduce.Job: Running job: job_201204232307_0012
12/04/24 02:06:57 INFO mapreduce.Job: map 0% reduce 0%
12/04/24 02:07:06 INFO mapreduce.Job: map 33% reduce 0%
12/04/24 02:07:09 INFO mapreduce.Job: map 100% reduce 0%
12/04/24 02:07:15 INFO mapreduce.Job: map 100% reduce 11%
12/04/24 02:08:14 INFO mapreduce.Job: Task Id : attempt_201204232307_0012_r_000000_0, Status : FAILED
org.apache.hadoop.mapreduce.task.reduce.Shuffle$ShuffleError: error in shuffle in fetcher#1
at org.apache.hadoop.mapreduce.task.reduce.Shuffle.run(Shuffle.java:124)
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:362)
at org.apache.hadoop.mapred.Child$4.run(Child.java:223)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1153)
at org.apache.hadoop.mapred.Child.main(Child.java:217)
Caused by: java.io.IOException: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.
at org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler.checkReducerHealth(ShuffleScheduler.java:253)
at org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler.copyFailed(ShuffleScheduler.java:187)
at org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyFromHost(Fetcher.java:227)
at org.apache.hadoop.mapreduce.task.reduce.Fetcher.run(Fetcher.java:149) 
```

我该如何克服这个问题..

@chris white 我遇到了一个新问题，当我运行上述命令时会出现新错误

```
hduser@vijay-P5E-VM-DO:/usr/local/hadoop-1.0.0$ ./bin/hadoop jar hadoop-examples-1.0.0.jar wordcount /user/hduser/gutenberg /user/hduser/gutenberg9-out
12/05/14 20:42:28 INFO mapred.JobClient: Cleaning up the staging area hdfs://master:54310/app/hadoop/tmp/mapred/staging/hduser/.staging/job_201205142041_0001
12/05/14 20:42:28 ERROR security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: hdfs://master:54310/user/hduser/gutenberg
org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: hdfs://master:54310/user/hduser/gutenberg
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:235)
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:252)
at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:962)
at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
at org.apache.hadoop.mapreduce.Job.submit(Job.java:465)
at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:495)
at org.apache.hadoop.examples.WordCount.main(WordCount.java:67)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

# jquery - 如何在一个 html 文档中使用 2 个 jquery 插件？

> ID：10279893
> 
> 赞同：0
> 
> 时间：2012-04-23T11:44:49.477
> 
> 标签：jquery, html, scrollbar

我想在网站的同一页面上使用 2 个不同的 jquery 插件。我有一张桌子，当表格宽度比页面布局宽时，我正在使用[tinyscrollbar滚动。](http://archive.plugins.jquery.com/project/tinyscrollbar)现在，我想使用[jQuery.FixedTable修复标题和第一列](http://www.novasoftware.com/Download/jQuery_FixedTable/JQuery_FixedTable.aspx)

我对 javascript 和 jqueries 的经验基本上为零，但我猜我需要在就绪事件中以某种方式调用这两个插件？我希望这两个都在同一个 html 文档中工作 - 有人可以让我知道这是如何完成的，以及应该以什么顺序编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:49:52.873

您需要确保导入核心 jQuery 脚本文件，然后导入两个函数的脚本文件。`ready`您在事件处理程序 ( `$(document).ready(...);`)中调用插件函数的顺序**可能**无关紧要，除非您尝试使用第二个插件解决的问题是由第一个插件引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:51:48.863

按顺序，您需要：

`<script`部分：

1.  引用 jQuery 核心和（如果使用）jQuery UI 库
2.  引用两个插件中的每一个

然后，将你的代码放入使用这两个插件（如文档准备调用）。

如果您提供了您的标记和您尝试过的代码，包括对每个包含的库和插件的引用，我们可以为您提供更多帮助。

# rdf - OutOfMemoryError using Pellet as Reasoner

> ID：10279894
> 
> 赞同：3
> 
> 时间：2012-04-23T11:44:54.923
> 
> 标签：rdf, jena, ontology, reasoning, pellet

I'm trying to infer data using Pellet, but my application always crashes during reasoning due to an "OutOfMemoryError: Java heap space".

As suggested elsewhere I have already tried to increase heap size and currently I am using these VM arguments: "-XX:MaxPermSize=256m -Xmx6144m". Furthermore I've to set 'PelletOptions.USE_CONTINUOUS = true', but so far I was only able delays the crashs for some minutes. (Longest run so far: 30 min.).

I am storing data in a Jena TDB triplestore. Its total size is 170 mb and consists of 962117 statements. The ontology has been modelled in Protege and there are no inconsistencies when reasoned with Hermit or Fact++ (of course no data is present at that point). The statements I'd like to infer have been modelled using equivalent classes (e.g.: A and (hasX some X)), inverse properties (hasX <--> isXOf) and some transitive properties. There are 55 classes: 14 root classes, 11 equivalent classes (all subtype of one root class). At the moment instances of 14 classes have been added to the tripestore.

I also used pellint to analyse my ontology, but I am not sure which conclusions to draw from this result:

```
[Untyped classes]
- http://www.w3.org/2002/07/owl#AllDisjointClasses

[Untyped object roles]
- http://www.w3.org/2002/07/owl#topObjectPriority
- http://www.w3.org/2002/07/owl#members

[Untyped datatype roles]
- http://www.w3.org/2002/07/owl#qualifiedCardinality

[Untyped individuals]
- 4 BNodes 
```

This is my code for creating the InfModel:

```
 Dataset dataset = TDBFactory.createDataset(..);
 Model model = dataset.getDefaultModel();

 OntModel ont = ModelFactory.createOntologyModel(PelletReasonerFactory.THE_SPEC,model);
 ont.read("file:.." , "RDF/XML");

 PelletOptions.USE_CONTINUOUS_RULES = true;
 Reasoner reasoner = PelletReasonerFactory.theInstance().create();
 reasoner = reasoner.bindSchema(ont);

 InfModel infModel = infModel = ModelFactory.createInfModel(reasoner, model); 
```

and this is essentially how I query the data:

```
 QueryExecution qe = QueryExecutionFactory.create("SELECT ...", infModel);
 Resultset rs = qe.execSelect();

 while(rs.hasNext())
 {
     QuerySolution sol = rs.nextSolution();
     ...
 }
 qe.close(); 
```

As you can see I have received various exceptions when either querying data, preparing or validating an InfModel. Do you have any idea, what else I could try to resolve this error?

```
 java.lang.OutOfMemoryError: Java heap space
 at java.util.Arrays.copyOf(Unknown Source)
 at java.lang.AbstractStringBuilder.expandCapacity(Unknown Source)
 at java.lang.AbstractStringBuilder.append(Unknown Source)
 at java.lang.StringBuilder.append(Unknown Source)
 at java.net.URLStreamHandler.parseURL(Unknown Source)
 at sun.net.www.protocol.file.Handler.parseURL(Unknown Source)
 at java.net.URL.<init>(Unknown Source)
 at java.net.URL.<init>(Unknown Source)
 at sun.misc.URLClassPath$FileLoader.getResource(Unknown Source)
 at sun.misc.URLClassPath.getResource(Unknown Source)
 at java.net.URLClassLoader$1.run(Unknown Source)
 at java.security.AccessController.doPrivileged(Native Method)
 at java.net.URLClassLoader.findClass(Unknown Source)
 at java.lang.ClassLoader.loadClass(Unknown Source)
 at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
 at java.lang.ClassLoader.loadClass(Unknown Source)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorCheck.warn(QueryIteratorCheck.java:114)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorCheck.dump(QueryIteratorCheck.java:95)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorCheck.checkForOpenIterators(QueryIteratorCheck.java:68)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorCheck.close(QueryIteratorCheck.java:50)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorWrapper.closeIterator(QueryIteratorWrapper.java:50)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorBase.close(QueryIteratorBase.java:184)
 at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorCloseable.close(QueryIteratorCloseable.java:39)
 at com.hp.hpl.jena.sparql.engine.QueryExecutionBase.close(QueryExecutionBase.java:180)

 java.lang.OutOfMemoryError: Java heap space
 at shared.SharedObjectFactory.build(SharedObjectFactory.java:303)
 at aterm.pure.PureFactory.makeAppl(PureFactory.java:191)
 at aterm.pure.PureFactory.makeAppl(PureFactory.java:185)
 at aterm.pure.PureFactory.makeAppl(PureFactory.java:228)
 at org.mindswap.pellet.utils.ATermUtils.makeLiteral(ATermUtils.java:245)
 at org.mindswap.pellet.ABox.addLiteral(ABox.java:1696)
 at org.mindswap.pellet.tableau.completion.rule.SomeValuesRule.applySomeValuesRule(SomeValuesRule.java:174)
 at org.mindswap.pellet.tableau.completion.rule.SomeValuesRule.apply(SomeValuesRule.java:64)
 at org.mindswap.pellet.tableau.completion.rule.AbstractTableauRule.apply(AbstractTableauRule.java:64)
 at org.mindswap.pellet.tableau.completion.SROIQStrategy.complete(SROIQStrategy.java:157)
 at org.mindswap.pellet.ABox.isConsistent(ABox.java:1423)
 at org.mindswap.pellet.ABox.isConsistent(ABox.java:1260)
 at org.mindswap.pellet.KnowledgeBase.consistency(KnowledgeBase.java:1987)
 at org.mindswap.pellet.KnowledgeBase.isConsistent(KnowledgeBase.java:2061)
 at org.mindswap.pellet.jena.PelletInfGraph.prepare(PelletInfGraph.java:247)
 at org.mindswap.pellet.jena.PelletInfGraph.prepare(PelletInfGraph.java:230)
 at com.hp.hpl.jena.rdf.model.impl.InfModelImpl.prepare(InfModelImpl.java:89)

 java.lang.OutOfMemoryError: Java heap space
 at org.mindswap.pellet.tableau.branch.DisjunctionBranch.tryBranch(DisjunctionBranch.java:197)
 at org.mindswap.pellet.tableau.branch.Branch.tryNext(Branch.java:117)
 at org.mindswap.pellet.tableau.completion.rule.ChooseRule.apply(ChooseRule.java:82)
 at org.mindswap.pellet.tableau.completion.rule.ChooseRule.apply(ChooseRule.java:56)
 at org.mindswap.pellet.tableau.completion.rule.AbstractTableauRule.apply(AbstractTableauRule.java:64)
 at org.mindswap.pellet.tableau.completion.SROIQStrategy.complete(SROIQStrategy.java:157)
 at org.mindswap.pellet.ABox.isConsistent(ABox.java:1423)
 at org.mindswap.pellet.ABox.isConsistent(ABox.java:1260)
 at org.mindswap.pellet.KnowledgeBase.consistency(KnowledgeBase.java:1987)
 at org.mindswap.pellet.KnowledgeBase.isConsistent(KnowledgeBase.java:2061)
 at org.mindswap.pellet.jena.PelletInfGraph.prepare(PelletInfGraph.java:247)
 at org.mindswap.pellet.jena.PelletInfGraph.prepare(PelletInfGraph.java:230)
 at org.mindswap.pellet.jena.PelletInfGraph.validate(PelletInfGraph.java:564)
 at com.hp.hpl.jena.rdf.model.impl.InfModelImpl.validate(InfModelImpl.java:111) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:25:45.003

Querying against `infModel` apparently caused Pellet to generate hundreds of thoundands of `owl:differentFrom` statements. The solution was to use `ModelExtractor`:

```
ModelExtractor ext = new ModelExtractor(inf); 
Model m = ext.extractModel();
QueryExecution qe = QueryExecutionFactory.create("SELECT ...", m); 
```

# sql - 可以在一个单独的表列上进行多个引用吗？

> ID：10279895
> 
> 赞同：1
> 
> 时间：2012-04-23T11:45:05.747
> 
> 标签：sql, database-design, foreign-keys

给定以下数据库结构：

**产品：**

```
- id
- model
- manufacturerID
- subcontractorID 
```

制造商ID 和分包商ID 是指同一张表，因为有些制造商也是分包商：

**制造商：**

```
- id
- name 
```

现在，如果我想选择这两列，我该怎么做？

我尝试过这样的事情......

```
SELECT p.model, m.name AS Manufacturer, m.name AS Subcontractor
FROM Product AS p
LEFT JOIN Manufacturers AS m ON p.manufacturerID = m.id
LEFT JOIN m ON p.subcontractorID = m.id 
```

...但我只能得到两个列值之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:47:59.660

关闭 - 您需要加入制造商表两次：

```
SELECT 
     p.model, manufacturer.name AS Manufacturer, 
     subcontractor.name AS Subcontractor
FROM Product AS p LEFT JOIN 
     Manufacturers AS manufacturer  
     ON p.manufacturerID = manufacturer.id LEFT JOIN 
     Manufacturers AS subcontractor 
     ON p.subcontractorID = subcontractor.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:49:45.373

试试这个：

```
LEFT JOIN Manufacturers AS mman ON p.manufacturerID = mman.id
LEFT JOIN Manufacturers AS msub ON p.subcontractorID = msub.id 
```

# events - jwplayer - 检测开始

> ID：10279897
> 
> 赞同：3
> 
> 时间：2012-04-23T11:45:19.663
> 
> 标签：events, click, jwplayer

我正在尝试检测 jwplayer 中的开始点击。我通过 swfobject 嵌入它，因此该方法与 api 中的示例略有不同，[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16024/listening-for -玩家事件](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16024/listening-for-player-events)

我努力了

```
var flashvars = {
    'file':'xxx',
    'streamer':'xxxxxx',
'image':'xxxxx',
'plugins':'xxxxx',
'gapro.accountid':'xxxx',
'gapro.trackstarts':'xxxx',
'gapro.trackpercentage':'xxxx',
'gapro.tracktime':'xxxx',
'logo.file':'xxxxx',
'logo.link':'xxxx',
'logo.hide':'xxxx',
'logo.position':'xxxx' 
```

};

```
jwplayer().onPlay(function() {alert('it has started'}); 
```

jwplayer() 没有定义，如何定义一个对象来检测点击？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T03:03:11.510

播放器可能未定义，因为它尚未创建。您应该将命令包装在来自 DOM 就绪侦听器的回调中。由于您使用的是 jQuery，您可以使用它的 .ready() 方法（[jQuery 文档](http://api.jquery.com/ready/)）：

```
$(document).ready(function(){
    jwplayer().onPlay(function() { alert('it has started'); });
}); 
```

只是关于 jwplayer onPlay() 的注释，它不一定发生在单击事件中，它会在播放视频时触发，这可能是通过单击播放或以编程方式播放视频。它告诉你的只是视频正在播放。（更正了语法错误）

# android - Android将xml从http响应解析为字符

> ID：10279902
> 
> 赞同：0
> 
> 时间：2012-04-23T11:45:38.557
> 
> 标签：android, parsing, httpresponse

我从 http post（一个 php 服务器）得到我的响应但是，我想将它解析为简单的字符。怎么做 。

这是我用于 HttpPost 的以下方法

```
public void postLoginData()
    {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();

    /* login.php returns true if username and password is equal to saranga */
   // HttpPost httppost = new HttpPost("http://www.sencide.com/blog/login.php");
     HttpPost httppost = new HttpPost("http://advanmind.com/adapi/user/add/");//username and password is xyz
    try {
        // Add user name and password
        EditText usermail = (EditText)findViewById(R.id.editText1);
        String email = usermail.getText().toString();

        EditText pword = (EditText)findViewById(R.id.editText2);
        String password = pword.getText().toString();

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("email", email));
        nameValuePairs.add(new BasicNameValuePair("password", password));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        Log.w("ADPORTAL", "Execute HTTP Post Request");
        HttpResponse response = httpclient.execute(httppost);

        String str = inputStreamToString(response.getEntity().getContent()).toString();
        Log.w("ADPORTAL", str);

        if(str.toString().equalsIgnoreCase("false") )
        {

            Log.w("ADPORTAL", "FALSE");
            Toast.makeText(getBaseContext(), str, 10000).show();
            result.setText("You are not registerd please register");

            //Intent AfterLogin = new Intent(this, AfterLogin.class);
            //startActivity(AfterLogin);
        }else
        {Log.w("SENCIDE", "TRUE");

      // Intent AfterLogin = new Intent(this,AfterLogin.class);
      // startActivity(AfterLogin);
        Toast.makeText(getBaseContext(), str, 10000).show();
        //result.setText(str+" loginsuccess");   

            // Intent registration  = new Intent(this, Registration.class);
          //startActivity(registration);
        }

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

输入流方法

```
private StringBuilder inputStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try {
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // Return full string
    return total;
} 
```

请告诉我将其解析为字符的详细代码。我正在使用 toast 来查看响应。在此先感谢。任何问题请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:58:16.820

我希望我能正确理解您的问题，但此代码会将响应作为字符串返回（：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://advanmind.com/adapi/user/add/");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("email", email));
nameValuePairs.add(new BasicNameValuePair("password", password));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
ResponseHandler<String> res = new BasicResponseHandler();
String response = httpclient .execute(postMethod, res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:13:04.177

目前尚不完全清楚您想要什么，但是在您的代码中，您似乎想通过`http://www.sencide.com/blog/login.php`url 登录。

该登录页面返回一个字符串“登录失败”因此您可以检查该字符串。

**这样做，取消注释登录 url 并注释添加用户行：**

```
 HttpPost httppost = new HttpPost("http://www.sencide.com/blog/login.php")
  //HttpPost httppost = new HttpPost("http://advanmind.com/adapi/user/add/"); 
```

**并更改此行：**

```
if(str.toString().equalsIgnoreCase("false") ) 
```

**对此：**

```
if(str.toString().equalsIgnoreCase("Login Failed")) 
```

# c# - 优化插入过程（我的过程需要 1h30 插入 100'000 行）

> ID：10279905
> 
> 赞同：2
> 
> 时间：2012-04-23T11:46:00.763
> 
> 标签：c#, oracle, bulkinsert

我有将数据插入 Oracle 数据库的 ac# 过程。我尝试使用批量插入，但性能非常糟糕，我不知道为什么。插入超过 100'000 行大约需要 1h30 ！

这是我的插入过程：

```
internal void InsertPublications(DateTime aDate, List<Model.Publication> aPublications, Action<int> aProgress, Action<int> aCallBack)
{
    List<List<Model.Publication>> _Publications = Split(aPublications, 128);

    int _InsertedCount = 0;

    var _Worker = new BackgroundWorker() { WorkerReportsProgress = true };

    _Worker.DoWork += (_Sender, _Args) =>
    {
        var           _TableName = string.Format("SRC_PUBLICATION_{0}", aDate.ToString("yyyyMMdd"));
        OracleCommand _Command;

        this.Connect();

        try
        {
            this.CreateOrReplaceTable(_TableName, SQL_CREATE_PULICATIONS_TABLE);

            foreach (var _PublicationSub in _Publications)
            {
                if (!DlgParamPublication.alive)
                {
                    break;
                }

                _Command = this.Connection.CreateCommand();
                _Command.CommandText = string.Format(SQL_INSERT_PULICATIONS, _TableName);
                _Command.CommandType = CommandType.Text;
                _Command.BindByName = true;
                _Command.ArrayBindCount = _PublicationSub.Count;

                _Command.Parameters.Add(":ANNEE", OracleDbType.NVarchar2, _PublicationSub.Select(_Item => _Item.Year).ToArray(), ParameterDirection.Input);
                _Command.Parameters.Add(":IDE_PUBLICATION", OracleDbType.NVarchar2, _PublicationSub.Select(_Item => _Item.Pid).ToArray(), ParameterDirection.Input);
                _Command.Parameters.Add(":IDE_TYPE_PUBLICATION", OracleDbType.NVarchar2, _PublicationSub.Select(_Item => _Item.IdePublicationType.ToString().ToLower()).ToArray(), ParameterDirection.Input);
                _Command.Parameters.Add(":IDE_TYPE_TRAVAIL", OracleDbType.NVarchar2, _PublicationSub.Select(_Item => _Item.IdeTypeOfWork.ToString().ToLower()).ToArray(), ParameterDirection.Input);
                _Command.Parameters.Add(":IDE_NIVEAU_ELEMENT_ORG", OracleDbType.NVarchar2, _PublicationSub.Select(_Item => _Item.UserRefType.ToString().ToLower()).ToArray(), ParameterDirection.Input);
                _Command.Parameters.Add(":IDE_ELEMENT_ORG", OracleDbType.NVarchar2, _PublicationSub.Select(_Item => _Item.UserRefValue).ToArray(), ParameterDirection.Input);
                _Command.Parameters.Add(":AUTEUR", OracleDbType.NClob, _PublicationSub.Select(_Item => _Item.Author).ToArray(), ParameterDirection.Input);

                _InsertedCount += _Command.ExecuteNonQuery();

                _Worker.ReportProgress(0, _InsertedCount);
            }
        catch (Exception _Exc)
        {
            ViewModel.DlgParamPublication.Logger.LogException("INSERT PUBLICATIONS", _Exc, false);
        }
        finally
        {
            this.Disconnect();
        }
    };

    _Worker.ProgressChanged    += (_Sender, _Args) => { aProgress((int)_Args.UserState); };
    _Worker.RunWorkerCompleted += (_Sender, _Args) => { aCallBack(_InsertedCount); };

    // Start background thread
    if (DlgParamPublication.alive)
    {
        _Worker.RunWorkerAsync();
    }
} 
```

知道为什么要花这么长时间吗？

## 更新

有人有其他建议吗？我无法解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:58:25.303

*这个想法是在单个*存储过程调用中为每个参数发送值数组。您实际上是在发送单个值的数组*n*次，其中*n*是`_Publications`.

删除外部循环并将您`_PublicationSub.Select`的 's替换为`_Publications.Select`.

您还需要更改绑定计数`_Command.ArrayBindCount = _Publications.Count;`

* * *

为了使它更容易，我相信这是可行的：

```
try
        {
            this.CreateOrReplaceTable(_TableName, SQL_CREATE_PULICATIONS_TABLE);

            if (!DlgParamPublication.alive)
            {
                break;
            }

            _Command = this.Connection.CreateCommand();
            _Command.CommandText = string.Format(SQL_INSERT_PULICATIONS, _TableName);
            _Command.CommandType = CommandType.Text;
            _Command.BindByName = true;
            _Command.ArrayBindCount = _Publications.Count;

            _Command.Parameters.Add(":ANNEE", OracleDbType.NVarchar2, _Publications.Select(_Item => _Item.Year).ToArray(), ParameterDirection.Input);
            _Command.Parameters.Add(":IDE_PUBLICATION", OracleDbType.NVarchar2, _Publications.Select(_Item => _Item.Pid).ToArray(), ParameterDirection.Input);
            _Command.Parameters.Add(":IDE_TYPE_PUBLICATION", OracleDbType.NVarchar2, _Publications.Select(_Item => _Item.IdePublicationType.ToString().ToLower()).ToArray(), ParameterDirection.Input);
            _Command.Parameters.Add(":IDE_TYPE_TRAVAIL", OracleDbType.NVarchar2, _Publications.Select(_Item => _Item.IdeTypeOfWork.ToString().ToLower()).ToArray(), ParameterDirection.Input);
            _Command.Parameters.Add(":IDE_NIVEAU_ELEMENT_ORG", OracleDbType.NVarchar2, _Publications.Select(_Item => _Item.UserRefType.ToString().ToLower()).ToArray(), ParameterDirection.Input);
            _Command.Parameters.Add(":IDE_ELEMENT_ORG", OracleDbType.NVarchar2, _Publications.Select(_Item => _Item.UserRefValue).ToArray(), ParameterDirection.Input);
            _Command.Parameters.Add(":AUTEUR", OracleDbType.NClob, _Publications.Select(_Item => _Item.Author).ToArray(), ParameterDirection.Input);

            _InsertedCount += _Command.ExecuteNonQuery();

            _Worker.ReportProgress(0, _InsertedCount);
        }
    catch (Exception _Exc)
    {
        ViewModel.DlgParamPublication.Logger.LogException("INSERT PUBLICATIONS", _Exc, false);
    }
    finally
    {
        this.Disconnect();
    } 
```

您可能希望删除后台工作人员的进度，因为这是一次性的、0-100% 的单次通话交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:20:33.840

我不确定，但问题可能是 BindByName。[我建议像这个例子](http://www.oracle.com/technetwork/issue-archive/2009/09-sep/o59odpnet-085168.html)中那样进行数字绑定 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:05:06.250

我将尝试在 foreach 循环之外创建 OracleCommand 和所有 OracleParameter。
在循环内部，我将添加当前迭代的值

```
_Command = this.Connection.CreateCommand();             
_Command.CommandText = string.Format(SQL_INSERT_PULICATIONS, _TableName);             _Command.CommandType = CommandType.Text;             
_Command.BindByName = true;             
_Command.Parameters.Add(":ANNEE", OracleDbType.NVarchar2, "", ParameterDirection.Input);             _Command.Parameters.Add(":IDE_PUBLICATION", OracleDbType.NVarchar2, "", ParameterDirection.Input);             
.....

foreach (var _PublicationSub in _Publications)             
{ 
     _Command.Parameters[":ANNEE"].Value = _PublicationSub.Select(_Item => _Item.Year).ToArray();
     ....
} 
```

# google-app-engine - 如何在谷歌应用引擎的父类中获取孩子的记录？

> ID：10279907
> 
> 赞同：1
> 
> 时间：2012-04-23T11:46:04.767
> 
> 标签：google-app-engine, jdo

我正在一个 Gwt 项目中工作，并在使用 Google 应用引擎的后端工作。我的要求是从谷歌应用引擎的父类中获取子表的记录。我有两个服务器端持久类 1）水果 2）苹果

水果课是这样的

@PersistenceCapable(identityType = IdentityType.APPLICATION, table = "fruit") 公共类 Fruit 实现 Serializable {

```
private static final long serialVersionUID = 2523048232286090409L;

public Fruit() {}

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Long id;

@Column(name="apple_id")
@Persistent(column="id")
private Apple apple;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public Apple getApple() {
    return apple;
}

public void setApple(Apple apple) {
    this.apple = apple;
} 
```

}

苹果班是这样的

@PersistenceCapable(identityType = IdentityType.APPLICATION, table = "apple") 公共类 Apple {

```
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Long id;

@Persistent
private String colour;

public Apple() {}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getColour(){
    return this.colour;
}

public String setColour(String colour){
    this.colour = colour;
} 
```

}

现在我想通过查询水果来命名颜色。

在 daoImpl 类中，我有获取数据的构建方法

```
fetchFruit(){

    Query query = pm.newQuery(Fruit.class);
    List<Fruit> list=null;
    try{        
        list = (List<Fruit>) query.execute();

    }finally{
        pm.close();
    }
} 
```

在我的 serviceImpl 类中，我已经这样做了

私有静态 FruitDAO fruitDAO = new FruitDAO();

```
 List<Fruit> fruitObj = fruitDAO.fetchFruit();

 for(Fruit fruit : fruitObj){
            FruitDTO dto = new fruitDTO();

            dto.setId(fruit.getId());               
            dto.setAppple(fruit.getApple());
    } 
```

我在fruit.getApple() 上得到空值

我的问题是，如果不是，我会走正确的路，那怎么可能？如何通过查询水果获得颜色名称。还有其他查询水果的方法吗？

请帮我。预先感谢。

# database - 为 Delphi 应用程序选择数据库和许可

> ID：10279908
> 
> 赞同：6
> 
> 时间：2012-04-23T11:46:07.947
> 
> 标签：database, delphi, firebird, embedded-database, firebird-embedded

我们有德尔福 XE2。我们正在为我们的应用程序寻找数据库。我们已经尝试过绝对数据库，它支持我们需要的大多数 SQL 命令。我看到大多数 Delphi 用户选择 Firebird，但它似乎很难使用。我对数据库和许可证感到非常困惑。这是我的问题：

1.  当我们选择一个数据库时，比如说绝对数据库、Firebird、MySql 嵌入式等，如果我们有 3.000 个客户，我们还需要向数据库开发人员付费吗？还是一次性收费？我很困惑，因为他们说当我们购买时，我们可以在我们的建筑物内使用它（[http://www.componentace.com/order/licenses.php](http://www.componentace.com/order/licenses.php)）。但是当我们发布我们的软件时，我们的客户当然需要使用相同的数据库。

2.  Absolute DB 易于安装并支持大多数 SQL 查询。Firebird 不支持大多数 SQL 查询。它是否正确？

3.  当我们尝试使用 Firebird 时，我们使用 FlameRobin 来设计数据库。但是当我们尝试使用 IB 组件进行连接时，它会显示“无法连接数据库”。

非常感谢你...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T12:07:23.490

1.  Firebird 完全没有许可费。但是，一旦您依赖它，帮助维护这个伟大的项目是明智的。有很多方法可以帮助 Firebird 项目：

    [http://www.firebirdsql.org/#consider-your-contribution](http://www.firebirdsql.org/#consider-your-contribution)

2.  不正确。Firebird 非常强大，支持大多数 SQL 标准以及用于存储过程和触发器的出色 SQL 扩展

3.  检查您的数据库连接字符串。这通常类似于`server_ip:full_db_path`您通过网络连接，或者只是`full_db_path`在本地连接。您始终可以使用 ALIAS 代替`full_db_path`. 确保您正在运行 Firebird 服务器，或者，如果使用嵌入式，则确保它已正确安装。Firebird 拥有出色且非常完整的文档，并且是开源项目的最佳支持团队之一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T12:02:45.370

1.  这取决于数据库。Absolute Database 是嵌入式数据库，一切都包含在您的 exe 中。然而，大多数数据库引擎都是独立的，因此它们作为应用程序安装。看起来如果您购买商业绝对数据库许可证，则不需要版税：[http ://www.componentace.com/order/order_product.php?id=8](http://www.componentace.com/order/order_product.php?id=8)

2.  Firebird 支持大多数 SQL 标准。根据这个答案，大多数符合 SQL 的嵌入式数据库是 Firebird：[哪个嵌入式数据库具有最大的 SQL 合规性和并发支持？](https://stackoverflow.com/questions/1438817/which-embedded-database-has-maximum-sql-compliance-and-concurrency-support)

3.  您必须对 IB 组件有一些配置问题，如果没有更多信息，很难说更多。另一方面，IB 组件适用于 Interbase，因此您可能会发现其他更好的东西，例如 UIB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T22:59:10.303

如果您选择 Firebird，请查看[IBExpert](http://www.ibexpert.net/ibe/index.php?n=Main.IBExpertFeatures)。这绝对是 Firebird 可用的最佳管理工具。但并不便宜。=(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:15:11.193

您还应该查看同样由 Delphi 供应商 Embarcadero 销售的 Interbase。Interbase 与 Firebird 不同，这可能就是您提到的 IB 组件不起作用的原因。

是的，每个客户通常都必须购买 IB 数据库。但是，Interbase 还有其他选择，具体取决于您构建应用程序的方式。检查它们是如何工作的，看看它们是否能更好地适应你正在尝试做的事情。

# nhibernate - NHibernate 拦截器澄清（删除/脏）

> ID：10279910
> 
> 赞同：0
> 
> 时间：2012-04-23T11:46:22.997
> 
> 标签：nhibernate, domain-driven-design, ddd-repositories

我可能正在尝试一些东西（坏的），只是想看看我想出了什么。对于初学者，我们以 DDD 方式构建了一个应用程序——我们的意见。该设计是“经典” DDD，这意味着我们有聚合根的存储库。我们确实有一个基础实体，我们在其中覆盖 Equals、GetHashCode 等。我们的实体只是逻辑删除，即我们使用 IsActive 字段。作为 ORM，我们使用 NHibernate >3。

我想尝试的事情：我希望能够使用如下语法从聚合根内的列表中删除一个实体：

```
aggregateRoot.Entities.Remove(entity); 
```

在持久层中，“entity”的默认 NHibernate 行为（“entity”具有对“aggregateRoot”的反向引用）是在“aggregateRoot”列上使用 NULL 更新“entity”。我们真正想做的是：

```
repository.Delete(entity); 
```

它只是将“实体”标记为不活动，而“实体”仍保留在“aggregateRoot”的集合中。

很可能我的想法很愚蠢（正如我再次说过的那样），但我想尝试教 NHibernate 不应该使用对“aggregateRoot”的空引用来更新“实体”，只需使其处于非活动状态。为什么？因为我想在需要的地方明确使用存储库。

我要问的是这是否可以通过 NHibernate 拦截器实现；我还没有尝试过它们，我想优先考虑我的积压。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:15:42.740

你为什么不在你的实体上实现一个 Delete 方法呢？您可以将其隐藏在核心界面后面。优点是完全不了解持久性的实现，不需要 NH 存在。

```
class Root
{
  // ...
  public void Remove(Entity entity)
  {
    IRootManaged managed = (IRootManaged)entity
    managed.Delete();
  }
}

class Entity : IRootManaged
{
  // ...
  public bool IsDeleted { get; private set; }

  public void IRootManaged.Delete()
  {
    this.IsDeleted = true;
  }
} 
```

对不起，如果我错过了这里的重点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:07:37.553

看看这个：[http ://ayende.com/blog/4157/avoid-soft-deletes](http://ayende.com/blog/4157/avoid-soft-deletes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:41:46.080

在经典的 DDD 中，`aggregateRoot.Entities.Remove(entity);`无论如何都是不好的做法。您最好在根实体上创建一个方法，例如`RemoveEntity(Entity e)`，然后您将封装*删除*机制，您将在其中将 Entity.IsActive 设置为 false。

# css - IE 中的 CSS firstchild

> ID：10279914
> 
> 赞同：0
> 
> 时间：2012-04-23T11:46:27.637
> 
> 标签：css, internet-explorer, css-selectors

我遇到了一些在 Chrome 和 Firefox 中正常工作的 CSS 问题，但在 IE 9 和 8 中却出现了意外。

这是一个示例（`user_info`表在哪里）：

```
.user_info td:first-child+td
{
    padding : 0px;
    background : #b8cce4;
} 
```

问题是 IE 没有附加这些属性。

如果我使用网站管理员工具 (F12) 并将 CSS 规则重命名`.user_info td:first-child+td`为，例如，然后再重新命名`.user_inf td:first-child+td`，那么它完美地应用了这些属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:53:35.993

如果您希望在 IE9 中工作的与 CSS 相关的东西不起作用，那么您应该做的第一件事是确保页面没有以[quirks mode](http://en.wikipedia.org/wiki/Quirks_mode)显示。

您应该能够在开发人员工具 (F12) 中检查这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:04:40.460

尝试检查您的 DOCTYPE 声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:47:43.230

简单地尝试

```
.user_info td + td {
    padding : 0px;
    background : #b8cce4;
} 
```

这相当于您的规则（除非您有嵌套表）或使用 :first-child

```
.user_info tr td:first-child + td {
    padding : 0px;
    background : #b8cce4;
} 
```

# android - 如何从Android中的电话号码中获取来电者的姓名

> ID：10279917
> 
> 赞同：1
> 
> 时间：2012-04-23T11:46:41.890
> 
> 标签：android, broadcastreceiver

我在 Android 中工作，我想知道如何找出电话号码的联系人姓名。

在`BroadcastReceiver`我有这个：

```
String phonenr=intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER); 
```

我需要此电话号码的联系人姓名（全名 - 名字 + 姓氏，如果有）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:51:34.280

你可以试试这个[链接](http://developer.android.com/reference/android/provider/ContactsContract.PhoneLookup.html)

```
 Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phoneNumber));
     resolver.query(uri, new String[]{PhoneLookup.DISPLAY_NAME} .....) 
```

像这样使用下面的函数：

```
 Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode("your receive phone number"));
  Cursor phones = getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},null,null,null);
        while (phones.moveToNext())
        {
            //it returns contact name
            String name=phones.getString(phones.getColumnIndex(PhoneLookup.DISPLAY_NAME));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:59:33.067

看看这个[检索联系信息](http://thinkandroid.wordpress.com/2010/01/19/retrieving-contact-information-name-number-and-profile-picture/)

```
 //query for the people in your address book
    Cursor cursor = getContentResolver().query(People.CONTENT_URI, null, null, null,People.NAME + " ASC");
    startManagingCursor(cursor);

    //bind the name and the number fields
    String[] columns = new String[] { People.NAME, People.NUMBER };
    int[] to = new int[] { R.id.name_entry, R.id.number_entry };
    SimpleContactAdapter mAdapter = new SimpleContactAdapter(this, R.layout.list_entry, cursor, columns, to);
    this.setListAdapter(mAdapter); 
```

# php - php setlocale 阿拉伯语 strftime

> ID：10279918
> 
> 赞同：5
> 
> 时间：2012-04-23T11:46:47.990
> 
> 标签：php, locale, arabic, strftime

我已经在我的服务器上运行了**locale -a**并且可以看到它安装了阿拉伯语语言环境设置：

*   ar_AE
*   ar_AE.iso88596
*   ar_AE.utf8

但是，如果我通过以下方式设置语言环境：

```
$locale = array('ar_AE', 'ar_AE.iso88596', 'ar_AE.utf8', 'ar');
setlocale(LC_TIME, $locale); 
```

并输出它：

```
strftime('%A %d %B', $current_date) 
```

显示的日期是英文，而不是阿拉伯文。

阿拉伯语是唯一不适用的语言：我正在使用的网站有 15 种语言，所有其他语言都显示翻译日期。

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T04:14:45.527

这对我来说完全没有问题。

```
setlocale(LC_ALL, 'ar_AE.utf8'); 
```

如果这不起作用，那么您的 PHP 文件中的另一个代码会干扰该语言。

# python - 具有评分和喜欢功能的评论/评论 django 应用程序

> ID：10279922
> 
> 赞同：5
> 
> 时间：2012-04-23T11:46:56.240
> 
> 标签：python, django, pinax, review

我正在寻找一个`Review & Rating and Vote on the Review`django 应用程序。我搜索了很多，但没有得到像 django 评论应用程序这样的东西。基本上，我需要一个可以执行以下操作的应用程序：

1.  审查和评价

2.  投票评论

我想要哪个有模板和模板标签，我可以根据要求定制。

我已经看到的：

1.  [https://github.com/danawoodman/django-reviews](https://github.com/danawoodman/django-reviews)：在这里，我得到了我想要的，但必须从头开始编写 template_tags 和模板。

2.  [http://pypi.python.org/pypi/django-reviews/](http://pypi.python.org/pypi/django-reviews/)：这里没有投票功能。

请纠正我，如果我在任何地方都错了，并给予同样的指导。

# symfony - 未使用 Symfony2 连接，触发了不必要的查询

> ID：10279923
> 
> 赞同：1
> 
> 时间：2012-04-23T11:46:57.417
> 
> 标签：symfony, doctrine, doctrine-orm, twig

我有以下问题：我的 Query with joins 包含所有必要的数据，但 symfony / twig 创建更多查询每个 {{ entity.group.name }} 产生一个新查询

控制器：

```
/**
 * @Route("/gameplan", name="game_plan")
 * @Template()
 * //@Secure(roles="ROLE_USER")
 */
public function indexAction()
{
    $em = $this->getDoctrine()->getEntityManager();
    $entities = $em->getRepository('OnemediaFeedFighterBundle:Game')->createQueryBuilder('q')
            ->leftJoin('q.group', 'g')
            ->leftJoin('q.teamGame', 'tg')
            ->leftJoin('tg.Team', 't')
            ->getQuery()->getResult();

    return array('entities' => $entities);
} 
```

模板：

```
{% extends "::layout.html.twig" %}
{% block content %}
<h1>Game plan</h1>

    {% for entity in entities %}
       {{ entity.place }}<br />{{ entity.group.name }}<br />
    {% endfor %}
{% endblock content %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:51:32.123

您可以通过添加`->select("q, g")`

# java - 项目 Java + hudson 的编码

> ID：10279926
> 
> 赞同：4
> 
> 时间：2012-04-23T11:47:05.323
> 
> 标签：java, encoding, utf-8, hudson

我的服务器 Hudson 有问题。

我的项目 java、我的工作区和所有类都有编码 UTF-8，但是在尝试生成构建时发生编码错误。

我使用 Ubuntu 服务器 11.04，并开发 Ubuntu 11.10。

发生的错误是：

```
/home/hudson/.hudson/jobs/SCUV/workspace/scuv.persistence/src/main/java/br/com/digitaldoc/scuv/abstracts/Bean.java:[29,18] error: unmappable character for encoding ASCII 
```

在这一行有“ã”

有谁知道如何解决这个问题？

这是控制台的输出：

```
Started by timer
Updating http://192.168.3.100/svn/SCUV/trunk revision: Apr 23, 2012 8:05:42 AM depth:infinity ignoreExternals: false
At revision 40
no change for http://192.168.3.100/svn/SCUV/trunk since the previous build
[workspace] $ mvn clean compile test
[INFO] Scanning for projects...
[INFO] Reactor build order: 
[INFO]   SCUV
[INFO]   SCUV Persistence Module
[INFO]   SCUV WebService Module
[INFO]   SCUV WebApp Module
[INFO] ------------------------------------------------------------------------
[INFO] Building SCUV
[INFO]    task-segment: [clean, compile, test]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean {execution: default-clean}]
[INFO] No goals needed for project - skipping
[INFO] No goals needed for project - skipping
[INFO] ------------------------------------------------------------------------
[INFO] Building SCUV Persistence Module
[INFO]    task-segment: [clean, compile, test]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean {execution: default-clean}]
[INFO] Deleting file set: /home/hudson/.hudson/jobs/SCUV/workspace/scuv.persistence/target (included: [**], excluded: [])
[debug] execute contextualize
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 15 source files to /home/hudson/.hudson/jobs/SCUV/workspace/scuv.persistence/target/classes
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

/home/hudson/.hudson/jobs/SCUV/workspace/scuv.persistence/src/main/java/br/com/digitaldoc/scuv/inject/ScuvPersistenceAPI.java:[14,33] error: unmappable character for encoding ASCII

/home/hudson/.hudson/jobs/SCUV/workspace/scuv.persistence/src/main/java/br/com/digitaldoc/scuv/inject/ScuvPersistenceAPI.java:[14,34] error: unmappable character for encoding ASCII

////has more classes with the same error

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8 seconds
[INFO] Finished at: Mon Apr 23 08:05:54 BRT 2012
[INFO] Final Memory: 22M/54M
[INFO] ------------------------------------------------------------------------
Recording test results
Performance: Percentage of errors greater or equal than 40% sets the build as unstable
Performance: Percentage of errors greater or equal than 60% sets the build as failure
Performance: Recording JUnit reports '**/TEST*.xml'
Sending e-mails to: asdasd@asdad.com
[DEBUG] Skipping watched dependency update for build: SCUV #7 due to result: FAILURE
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:26:10.243

尝试删除该`~/.hudson`文件夹并重新配置它。

告诉我它是否有效。

# c# - 通过 PageLoad() 保留文本框的文本；

> ID：10279928
> 
> 赞同：1
> 
> 时间：2012-04-23T11:47:08.753
> 
> 标签：c#, asp.net

我想知道即使我必须加载新页面，单击超链接，我如何才能保留文本框的文本。

它始终是一个空字符串。

有人能帮我吗 ？

```
 lkForgotten.NavigateUrl = string.Format("Logon.aspx?forgotten={0}", "");
            lkSend.NavigateUrl = string.Format("Logon.aspx?forgotten={0}&userEmail={1}", "submited", txtForgotten.Text);

            try
            {
                if (Request.QueryString["forgotten"].ToString() == "")
                {
                    txtForgotten.Visible = true;
                    lkSend.Visible = true;
                }

                if (Request.QueryString["forgotten"].ToString() == "submited")
                {
                    userEmail = txtForgotten.Text;
                    SendForgottenPassword(userEmail);
                }
            }
            catch { } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:54:20.473

如果您需要保留一些特定于该人的数据，您可以使用会话。这正是您需要的东西。

您可以随时设置它并获取所需的值。

[http://msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

**编辑：** 为了满足评论中提出的一些反对意见，如果会话本身还不够，您仍然可以使用不同的方法。使用 javascript 监视文本框，如果它们的值发生更改，请添加一个 cookie（或向现有 cookie 添加一个值，取决于需要）。仍然比对此类功能使用查询字符串更好的方法......至少在我看来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:53:57.820

**编辑**

使用

Javascript代码

```
function redirect()
{
   var val = document.getElementById('<%= txtForgotten.ClientID %>').value;
   location.href='Logon.aspx?forgotten=submitted&userEmail=' + val ;
}

<input type="button" VALUE="Visit Microsoft" OnClick="redirect();"> 
```

上面代码的问题是，当您在页面加载时创建忘记密码的 url 时，文本框值为空，并且当通过单击忘记密码链接进行重定向时，它只会获得空值，而不是您在代码中键入的内容......所以为了使它工作，使用上面的javascript进行重定向，或者使用为你做重定向的点击事件....

**组织**

像这样更改以下行

```
 if (Request.QueryString["forgotten"].ToString() == "submited")                 {                     
   userEmail = txtForgotten.Text = Request.QueryString["userEmail"].ToString() ;                         
    SendForgottenPassword(userEmail);                
 } 
```

因此，当您单击按钮时，它会从查询字符串中获取 userEmail 的值并在您的文本框中恢复值...这肯定会完成您的任务

或者

您可以使用其他客户端机制（如 cookie）来存储值，而不是在页面上检索它...

如果您想存储值并将其取回，服务器端选项是会话变量也很有帮助.....

# django - 当我更改站点的 url 域但保留相同的数据库时出现 Django openid 身份验证问题

> ID：10279930
> 
> 赞同：2
> 
> 时间：2012-04-23T11:47:12.323
> 
> 标签：django, authentication, openid, authorization, postgresql-9.1

我首先应该注意，我是 python/django 应用程序的新手，但我正在努力学习 :)

我正在开发一个支持通过 openid 提供程序登录的 django 项目。因此，我可以毫无问题地通过我的谷歌帐户登录。

最近，我决定**更改我网站的 url，**但同时我保留了当前数据库，因为我不想丢失我的数据、用户等。在那之后，我无法登录到应用程序。这是以下一直发生的情况：

*   尝试登录我的网站
*   网站不记得我了，我被重定向到谷歌服务器
*   我在谷歌服务器中填写我的凭据
*   我被重定向到抱怨用户已存在的网站

所以，我不知道如何处理这个问题。我可以对我的数据库执行任何解决方法或 hack 来解决这个问题吗？当我浏览到我的数据库时，我发现了几个可能相关的表：

django_authopenid_association，django_authopenid_nonce，django_authopenid_userassociation，django_authopenid_userpasswordqueu

我的数据库中的一张表（django_authopenid_association）包含以下数据。你相信如果我重置任何东西会有帮助吗？ ![在此处输入图像描述](../Images/1b043c889f56319b3db9226a7f464c91.png)

如果您有任何好的建议/提示，我们非常欢迎。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:30:40.117

我找到了一个对我有用的解决方案/临时黑客。当然，这并不意味着我的解决方案是最佳的，也不意味着我向其他人推荐这个。

我所做的是使用相同的 gmail 帐户但具有不同的用户名为我的应用程序创建第二个帐户。然后，我编辑**django_authopenid_association**表中的新条目，复制粘贴**openid_url**值并将其用于我的旧用户（我的问题截图中的数据库条目 1）。

之后，由于我能够使用旧用户登录，因此我从数据库中删除了新用户，直到现在一切似乎都很顺利。

# c# - 从 C++ 向后调用 C#

> ID：10279931
> 
> 赞同：1
> 
> 时间：2012-04-23T11:47:16.483
> 
> 标签：c#, c++, events, callback, marshalling

我正在使用 C# 中的 C++ 库，该库还没有完全开发用于从其他语言中使用，但现在很难改变一些东西。我正在使用 [DllImport] 调用，几乎一切正常。

但知道我需要使用从 C++ 到 C# 的“向后”调用。因此，在 C# 中，我需要订阅 C++ 函数。在 C++ 中，它是这样实现的：

```
INTF_API void __stdcall  Intf_InstallHandler(Intf_MailHdlPtrType Hdl)

typedef void (STDCALL  *Intf_MailHdlPtrType)(InstanceNoType instno, 
  const MailType* mail, rsuint16 mailsize); 
```

（我从方法中删除了一些参数以使其更简单。它们是两个字节 - 不重要）所以在 C# 中我有：

```
public delegate void MailEventHandler(byte Instance, MailType Mail, UInt16 MailLength);

 MailHandlerDef defHandler = (f) =>
                                        {
                                            var structure =
                                                (MailType)Marshal.PtrToStructure(f, typeof(MailType));
                                            handler(structure);
                                        };

        Externs.Intf_InstallMailHandler(defHandler);

 [DllImport(DLL_NAME, CallingConvention = CallingConvention.StdCall)]
    public static extern void Intf_InstallMailHandler(byte Instance, [MarshalAs(UnmanagedType.FunctionPtr)] MailHandlerDef MailHandler, PrimitiveType Primitive); 
```

我们有不同的原语（在 C++ dll 中，每个方法都是一个原语，每个方法都实现为调用和等待方法，或者作为异步方法，在计算结束时调用 mailHandler），并且所有原语都有效，除了一个。

如果调用此原语，则会抛出 NullRef 异常，而没有任何堆栈跟踪。我已经失去了理智，试图寻找造成这种情况的原因。有趣的是，这在我们的大型应用程序中不起作用（即使我尝试关闭所有功能，并在启动时调用它），但在我的小型测试应用程序中它可以工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:02:36.827

您可以使用 .Net CLI C++ 包装器，然后调用您的标准 C++ 代码。

# html - 我在哪里可以获得未使用的访问密钥的列表？

> ID：10279935
> 
> 赞同：0
> 
> 时间：2012-04-23T11:47:29.707
> 
> 标签：html, accessibility, access-keys

我想知道我的网站可以使用哪些访问密钥。有人知道我在哪里可以找到清单吗？另外，我知道英国有一个标准。是否有人熟悉列出其他国家（例如日本）的标准访问密钥的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:55:45.777

英国或英国标准实际上是唯一达到一定普及度的标准，并在世界范围内作为唯一标准使用。默认布局是

```
S - Skip navigation
1 - Home page
2 - What’s new
3 - Site map
4 - Search
5 - Frequently Asked Questions (FAQ)
6 - Help
7 - Complaints procedure
8 - Terms and conditions
9 - Feedback form
0 - Access key details 
```

除此之外，访问密钥本身可能是一个障碍，这就是为什么一些可用性专家建议不要使用它们的原因（搜索 John Foliot 的论点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:56:46.353

这是您可以使用的访问密钥列表： 。（“.”是结束句子的句号；它并不是指访问密钥。）

在某些浏览器中，您可以使用的任何键都是预先指定的用途。原因之一是浏览器的用户界面语言各不相同，因此任何字母键都可能用作某些浏览器命令的快捷方式。此外，辅助软件和使用浏览器时可能涉及的其他程序会使用访问密钥。

使用数字键作为访问键可能会最小化问题，因为数字键通常不用于浏览器，但它们可能会被其他软件使用，可能用于关键任务。

# string - 求字符串 S 的最短前缀 T，使得 S 是 T^n 的前缀

> ID：10279937
> 
> 赞同：1
> 
> 时间：2012-04-23T11:47:32.020
> 
> 标签：string, algorithm, prefix

我们使用的总体思路是使用贪心算法检查字符串的剩余部分并进行比较。

这个想法没有奏效，一般的想法可能是使用某种后缀树或 KMP 算法，但我尝试的一切都失败了。

有人可以帮忙吗？

PS：T^n 是前缀乘以 n，因为 n 是字符串的长度，字符串之间的字母是 [1..n]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:20:27.753

我会像在[Rabin karp algorithm](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)中一样使用滚动哈希。首先加倍 S，以便您确定 T^n 是 S*S 的前缀。

接下来迭代 T 的长度。对于每个长度，您可以以对数复杂度计算 T^n 的哈希码（非常类似于二进制求幂）。此外，在对 S*S 进行线性预计算之后，您可能会在恒定时间内找到其每个子字符串的哈希码（您需要一个包含所有前缀哈希的数组和一个包含您正在使用的素数的幂的数组用于散列）。所以你可以检查每个长度 if T^n == SUBSTRING(S^2, n * LENGTH_OG(T)) in O(log(n)) （在这里你应该考虑一下如何花时间计算哈希每次迭代的 t 常数）。因此，所提出的方法的总体复杂度将为 O(LENGTH(S) * Log(LENGTH(S)))。

希望这可以帮助。

编辑：我相信我已经找到了问题的线性解决方案。正如您所说，它基于KMP。在为您的字符串计算故障函数后，观察它的值。以案例为例：

```
string s = "abcdababcdababcdababcdababc"; 
```

值如下：

```
 a     b     c    d    a    b    a    b    c    d    a    b    a    b    c    d    a    b    a    b    c    d    a    b    a    b    c  
 -001  -001  -001  -001  000  001  000  001  002  003  004  005  006  007  008  009  010  011  012  013  014  015  016  017  018  019  020 
```

看看你在最终指数中的价值。我相信如果你从 S 的长度中减去它然后再减去一个，你会得到最短重复子串的长度。在此示例中，您有`27 - 20 - 1 = 6`. 在我上面展示的情况下更容易观察 - 当故障函数以 0 到 20 的值序列结束时。但事实上，如果你有一些以 20 结尾的其他值，那么 0 到 20 将再次成为有效值故障功能它只会跳过一些可能性。希望这是有道理的。该算法是线性的。

# hadoop - Apache Pig 和 Apache Hive 有什么区别？

> ID：10279942
> 
> 赞同：18
> 
> 时间：2012-04-23T11:47:46.903
> 
> 标签：hadoop, hive, apache-pig

Pig和Hive之间的确切区别是什么？我发现两者具有相同的功能含义，因为它们用于完成相同的工作。唯一的事情是对两者都不同的实施。那么何时使用以及使用哪种技术？两者是否有任何规范清楚地表明两者在适用性和性能方面的区别？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-23T12:44:43.810

Apache Pig 和 Hive 是位于 Hadoop 之上的两个项目，并为使用 Hadoop 的 MapReduce 库提供了更高级别的语言。Apache Pig 提供了一种脚本语言来描述读取、过滤、转换、连接和写入数据等操作——正是 MapReduce 最初设计的操作。与直接使用 MapReduce 的数千行 Java 代码表达这些操作不同，Pig 允许用户用与 bash 或 perl 脚本不同的语言表达它们。Pig 非常适合原型设计和快速开发基于 MapReduce 的作业，而不是在 Java 本身中编码 MapReduce 作业。

如果 Pig 是“Hadoop 脚本”，那么 Hive 就是“Hadoop 的 SQL 查询”。Apache Hive 提供了一种更具体、更高级的语言，用于通过运行 Hadoop 作业来查询数据，而不是直接在 Hadoop 上逐步编写多个 MapReduce 作业的操作脚本。从设计上讲，该语言非常类似于 SQL。Hive 仍然旨在作为针对海量数据进行长时间运行的面向批处理的查询的工具。它在任何意义上都不是“实时的”。Hive 对于习惯于类似 SQL 的查询和商业智能系统的分析师和业务开发类型来说是一个出色的工具；它将让他们轻松利用您闪亮的新 Hadoop 集群来执行临时查询或跨上述存储系统中存储的数据生成报告数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T16:05:59.187

从纯工程的角度来看，我发现 PIG 比类似 SQL 的语言更容易编写和维护。它是程序性的，因此您将一堆关系一个接一个地应用于您的数据，如果出现问题，您可以轻松地在中间步骤进行调试，甚至还有一个名为“illustrate”的命令，它使用算法对一些数据匹配进行采样你的关系。我想说对于具有复杂逻辑的工作，这绝对比 Hive 方便得多，但对于简单的东西，收益可能很小。

关于接口，我发现与 Hive 相比，PIG 提供了很大的灵活性。您在 PIG 中没有表格的概念，因此您可以直接操作文件，并且您可以定义加载程序以使用加载程序 UDF 轻松地将其加载到几乎任何格式，而无需在执行表格加载阶段之前完成您的转变。它们在最近版本的 PIG 中有一个很好的特性，您可以在其中使用动态调用程序，即直接在 PIG 脚本中使用几乎任何 Java 方法，而无需编写 UDF。

对于性能/优化，据我所知，您可以在 PIG 中直接控制要使用的连接和分组算法的类型（我相信每种算法有 3 或 4 种不同的算法）。我个人从未使用过它，但是当您编写要求苛刻的算法时，能够决定要做什么而不是像 Hive 中那样依赖优化器可能会很有用。所以我不会说它一定比 Hive 表现得更好，但在优化器做出错误决定的情况下，您可以选择使用哪种算法并对发生的事情有更多控制权。

我最近做的一件很酷的事情是拆分：您可以拆分执行流程并将不同的关系应用于每个拆分。因此，您可以拥有一个非线性数据集，根据字段对其进行拆分，并对每个部分应用不同的处理，最后可能将结果连接在一起，所有这些都在同一个脚本中。我认为您不能在 Hive 中执行此操作，您必须为每种情况编写不同的查询，但我可能错了。

还要注意的一件事是您可以在 PIG 中增加计数器。不过，目前您只能在 PIG UDF 中执行此操作。我认为您不能在 Hive 中使用计数器。

还有一些不错的项目允许您将 PIG 与 Hive 进行接口（例如 HCatalog），因此您基本上可以通过简单地更改您的加载器从配置单元表中读取数据，或将数据写入配置单元表（或两者）。脚本。也支持动态分区。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T20:46:48.800

Apache Pig 是一个用于分析大型数据集的平台。Pig 的语言 Pig Latin 是一种简单的查询代数，可让您表达数据转换，例如合并数据集、过滤它们以及将函数应用于记录或记录组。用户可以创建自己的函数来进行特殊用途的处理。

Pig Latin 查询在集群上以分布式方式执行。我们当前的实现将 Pig Latin 程序编译为 Map-Reduce 作业，并使用 Hadoop 集群执行它们。

[https://cwiki.apache.org/confluence/display/PIG/Index%3bjsessionid=F92DF7021837B3DD048BF9529A434FDA](https://cwiki.apache.org/confluence/display/PIG/Index%3bjsessionid=F92DF7021837B3DD048BF9529A434FDA)

Hive 是一个适用于 Hadoop 的数据仓库系统，有助于轻松进行数据汇总、即席查询以及对存储在 Hadoop 兼容文件系统中的大型数据集的分析。Hive 提供了一种机制来将结构投影到此数据上，并使用称为 HiveQL 的类似 SQL 的语言查询数据。同时，这种语言还允许传统的 map/reduce 程序员在 HiveQL 中表达这种逻辑不方便或效率低时插入他们的自定义映射器和化简器。

[https://cwiki.apache.org/Hive/](https://cwiki.apache.org/Hive/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-13T02:35:13.817

> Pig和Hive之间的确切区别是什么？我发现两者具有相同的功能含义，因为它们用于完成相同的工作。

从文章的[坚果壳](http://www.dezyre.com/article/difference-between-pig-and-hive-the-two-key-components-of-hadoop-ecosystem/79)中看一下**猪与蜂巢**的比较`dezyre`

**Hive**在**分区、服务器、Web 界面和 JDBC/ODBC 支持**方面的得分高于**PIG**。

 **一些区别：

1.  **Hive**最适合***结构化数据***，**PIG**最适合***半结构化数据***

2.  **Hive**用于***报告***和**PIG**用于***编程***

3.  **Hive**用作***声明性 SQL***和**PIG**用作***过程语言***

4.  **Hive**支持***分区*****而 PIG**不支持

5.  **Hive**可以启动一个可选***的基于节俭的服务器*****而**PIG不能

6.  **Hive 预先**定义表***（模式）*** + 将模式信息存储在数据库中，**PIG**没有数据库的专用元数据

7.  **Hive**不支持 Avro，但PIG**支持**

8.  **Pig**还支持用于执行外部连接的附加***COGROUP***功能，但 hive 不支持。但是**Hive 和 PIG**都可以动态***加入、排序和排序***

> 那么何时使用以及使用哪种技术？

上述差异澄清了您的查询。

`HIVE`：结构化数据、类似 SQL 的查询并用于报告目的

`PIG`：半结构化数据，对涉及 Map Reduce 作业的一系列活动的工作流程进行编程。

关于作业的性能，与传统的 Map Reduce 作业相比，两者`HIVE`都很`PIG`慢。`Reason`：最后必须将 Hive 或 PIG 脚本转换为一系列 Map Reduce 作业。

看看相关的 SE 问题：

[Pig vs Hive vs Native Map Reduce](https://stackoverflow.com/questions/17950248/pig-vs-hive-vs-native-map-reduce)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-12T06:39:02.897

主要区别在于 PIG 是一种数据流语言，而 Hive 是数据仓库。正如 PIG 可以使用类似的一步一步的程序语言。但是 HIVE 被用作声明性语言。PIG 可用于获取在线流式非结构化数据。但是HIVE只能访问结构化数据，也可以通过JDBC和ODBC驱动访问SQL、NOSQL等RDBMS数据库中的数据。PIG 可以将数据转换为 Avro 格式，但 PIG 不能。PIG 不能创建分区，但 HIVE 可以。由于 HIVE 位于 PIG 之上，因此 HIVE 只能在 PIG 处理数据后才能访问数据。这取决于我们何时必须使用 PIG 和 HIVE，如果您正在处理结构化的关系数据，那么我们可以使用 HIVE，否则我们可以使用 PIG。通过 PIG 我们可以与 ETL 工具进行通信，但与 hive 相比需要更多时间。**

# python-2.7 - 使用 Python 的文件、文件夹和符号链接递归计数

> ID：10279943
> 
> 赞同：0
> 
> 时间：2012-04-23T11:47:54.620
> 
> 标签：python-2.7

我需要 Python 代码递归搜索给定路径并返回传入位置内的文件、文件夹和符号链接的数量？它应该只搜索一次目录，然后在执行时增加文件数、目录数、符号链接数的值。它不应该是对每个值的目录树的 3 次单独搜索。帮助真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:04:35.407

从 os.walk 的 python 库文档中的示例开始，它接近您的需要。使用 os.path.islink 测试目录名和文件名，以将目录/文件与链接分开。在本地环境中保留三个计数器，一个用于您要计数的每一项。

# drupal-7 - Drupal 7 中每个分类术语的页面

> ID：10279950
> 
> 赞同：1
> 
> 时间：2012-04-23T11:48:07.600
> 
> 标签：drupal-7, taxonomy

由于我是drupal的新手，所以很抱歉我是个白痴。我创建了一个名为“品牌”的词汇表，在里面我有一个像这样的分类树

*   品牌1
    *   类别1
        *   产品1
    *   类别2
*   品牌2
    *   类别1
    *   类别2
        *   产品1
        *   产品2

我想为此分类创建一个单独的菜单，并使用“分类菜单”模块完成它。但我需要的是一个页面，列出了父术语中的所有术语。就像点击brand1时会加载一个页面，其中列出了其中的类别，并且类别内的产品也会发生同样的情况。默认情况下不会发生这种情况。单击父链接时，会显示一个空白页面。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:03:23.557

我对分类菜单模块的工作不多，但是您的“术语列表”需求听起来像是一个很好的视图候选者！

您是否使用过“视图”模块？ [http://drupal.org/project/views](http://drupal.org/project/views)

这里有一些视频教程可以让你开始使用视图：[http ://drupal.org/node/1351076](http://drupal.org/node/1351076)

# erlang - Erlang 的 FIPA ACL 实现

> ID：10279952
> 
> 赞同：1
> 
> 时间：2012-04-23T11:48:17.303
> 
> 标签：erlang, artificial-intelligence, agents-jade

希奥

我目前正在使用并发语言 erlang 准备对多代理系统的一些研究，我想问一下，FIPA ACL（代理通信语言）规范的实现/框架是否已经由万维网上的某个人发布类似于 JADE for JAVA。

那太好了。感谢您的任何提示。

FIPA：[http](http://www.fipa.org/about/index.html) ://www.fipa.org/about/index.html 翡翠：http: [//jade.tilab.com/](http://jade.tilab.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:21:41.057

[https://github.com/gleber/exat](https://github.com/gleber/exat) - eXAT 完全实现了你想要的东西。eXAT 是多代理平台的 FIPA ACL 兼容实现。我是该项目的积极维护者，我也将它用于我的研究。

# c++ - 打开文件 C++ 错误

> ID：10279959
> 
> 赞同：1
> 
> 时间：2012-04-23T11:48:48.973
> 
> 标签：c++, file

我正在尝试用 C++ 打开一个文件。

我的文件位于 /home/me/myproject/mydir/myfile.txt

我在我的文件系统中检查了该文件存在并且不为空。

我用 getcwd() 检查了我在 /home/me/myproject/

因此，我尝试使用以下命令打开它：

```
string myfilename;
ifstream myfile;
myfilename = "./mydir∕myfile.txt"; 
myfile.open(myfilename.c_str(), ios::in);
if (myfile.fail()) {
    // I always end up here.
} 
```

我真的不明白为什么 myfile.fail() 总是返回 true。知道为什么会这样，或者我可以执行哪些调试测试来理解它为什么会这样？

* * *

我找到了问题所在，谢谢大家。我正在使用远程控制软件，它显然认为“/”（正斜杠）与“/”（除号）不同。我仍然有一个问题困扰着我，但我会在另一篇文章中提出。errno 和 strerror() 帮助我理解出了什么问题。这些错误很难找到，很抱歉它与 c++ 代码没有严格的关系。

（注意：我在这里回答是因为显然我无法回答自己的问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:37.460

当您使用相对路径打开文件时，它是从执行目录计算的，这取决于您启动程序的方式。

假设你的程序位于`~/path/to/my/program`，如果你的当前目录是 ~ 当你启动它（所以你的命令是`./path/to/my/program/my_program`），执行目录是 ~。如果您的当前目录是 ~/path/to/my（并且您使用`./program/my_program`命令启动），则执行目录是 ~/path/to/my。您可以使用该功能确定您当前的工作目录`getcwd()`。

为避免此类问题，一个好的经验法则是始终在应用程序中使用绝对路径。

此外，您应该使用其中一个`errno`或`strerror`在您的`if (myfile.fail()) {...}`块中以获取有关该错误的更多信息。

# git - 部分提交 GIT

> ID：10279962
> 
> 赞同：0
> 
> 时间：2012-04-23T11:49:09.290
> 
> 标签：git

我对存储库的工作副本进行了一些更改。我很久没有承诺了，所有的变化都在跟踪中。

现在，我想先提交一部分更改，然后再提交另一部分更改，以便我可以恢复到每个更改。显然，这些部分的更改是在不同的文件上。我是 git 的新手，因此担心如果我尝试一些其他地方建议的 git rm --cache 之类的东西，我可能会撤消所有更改。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:52:20.313

你可以 git gui 和 'stage hunk for commit' 或 'stage line for commit'

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:58:24.987

在命令行上，您可以使用

```
$ git add -p 
```

选择提交的帅哥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T12:02:46.377

我建议使用`-p`选项来`git add`. 这告诉 git 以交互方式询问用户是否提交一个大块。

```
$ git add -p src_file.c
$ git commit
$ git add -p src_file.c
$ git commit
... 
```

使用此选项，您将收到如下提示：

```
Stage this hunk [y,n,q,a,d,/,s,e,?]? 
```

按`?`可获得以下帮助信息。

```
y - stage this hunk
n - do not stage this hunk
q - quit; do not stage this hunk nor any of the remaining ones
a - stage this hunk and all later hunks in the file
d - do not stage this hunk nor any of the later hunks in the file
g - select a hunk to go to
/ - search for a hunk matching the given regex
j - leave this hunk undecided, see next undecided hunk
J - leave this hunk undecided, see next hunk
k - leave this hunk undecided, see previous undecided hunk
K - leave this hunk undecided, see previous hunk
s - split the current hunk into smaller hunks
e - manually edit the current hunk
? - print help 
```

像这样添加，您可以轻松地将对同一文件或多个文件的更改拆分为多个提交。有关更详细的描述，请查看[`man (1) git-add`](http://linux.die.net/man/1/git-add)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T11:55:04.513

也许我不明白这个问题，但只需添加一些文件并进行提交，然后重复该过程。

```
git add file1 file2
git commit -m "Comment first commit comment"
git add file3 ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T11:53:29.470

`git add`您可以使用命令将文件添加到提交中。例如 type `git add file.c`，则将`file.c`与 next 一起提交`git commit`。任何未添加的文件都不会被提交。提交后只需添加其他文件并再次提交。

您可以通过键入来查看为提交暂存了哪些文件`git status`。要添加所有文件，请键入`git add .`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:00:28.823

如果要提交修改文件子集中的所有更改，请使用`git add <file1> ...`. 如果您想选择将文件中的哪些更改*添加*到索引中，请使用`git add -i [<file1> ...]`更有用的 IMHO 或 IMHO `git add -p [<file1> ...]`，它甚至允许您修改应用于索引的差异，*而无需*更改工作副本中的状态。

最后，如果你是[Vim](http://vim.org)用户，你绝对必须知道并使用[fugitive](https://github.com/tpope/vim-fugitive)。

# ruby-on-rails - 使用ajax请求设计会话销毁我应该如何处理

> ID：10279963
> 
> 赞同：0
> 
> 时间：2012-04-23T11:49:09.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, jquery, devise

我有一个表单，用户可以在其中填写包含**email_id**列的表单字段的详细信息

现在**，如果用户已登录，**则会**出现一个链接**说明

“ **NOT USER NAME** ”例如“ **NOT VIREN NEGI** ”反对那个电子邮件字段，这将是一个ajax请求。破坏设计会话

一旦用户单击链接，设计会话将被破坏，并且在 ajax 成功时，上述锚标记将消失

我已经通过 Moneypatching Devise 的 destroy 方法实现了这个解决方案，例如

```
class DeviseSessionsController < DeviseController

  def destroy
    .... DEVISE CODE ...
    .... DEVISE CODE ...
    .... DEVISE CODE ...

     respond_to do |format|
       if request.xhr? **## My Hack**
         format.js { render :partial => 'users/signout' } **## render signout partial on ajax request** 
       else 
         format.any(*navigational_formats) { redirect_to redirect_path }
        format.all do
          method = "to_#{request_format}"
          text = {}.respond_to?(method) ? {}.send(method) : ""
          render :text => text, :status => :ok
       end
     end 
    end
  end
end 
```

虽然这一切似乎都有效，但因为但我对此并不满意

1.  如果设计已更新，则不适合，并且将来的销毁方法可能看起来与当前不同
2.  我已经复制了 devise/sessions_controller 的所有其他操作方法，以使设计工作没有任何问题

谁可以帮我这个事

请避免回答monkeypatching 不好让我阅读有关monkeypatching 的所有内容（我知道），这就是为什么发布问题的原因。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:59:55.130

您可以使用设计辅助方法注销

在用户控制器中创建一个动作

```
def log_me_out 
   signed_out = (Devise.sign_out_all_scopes ? sign_out : sign_out(resource_name))
    respond_to do |format|
      format.js  { render :partial => 'log_me_out',:layout => false }
    end
end 
```

这将使您免于资金修补设计#sessions 控制器

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:13:20.477

您需要添加 csrf 元标记来请求。我认为这是问题所在，而不是在设计中。

这应该解决它

```
$.ajaxSetup({
  'beforeSend': function(xhr) { xhr.setRequestHeader('X-CSRF-Token', $("meta[name='csrf-      token']").attr('content')); }
}); 
```

# postgresql - 连接到 Heroku PostgreSQL 数据库时的身份验证错误

> ID：10279965
> 
> 赞同：31
> 
> 时间：2012-04-23T11:49:23.340
> 
> 标签：postgresql, node.js, authentication, node-postgres

我正在使用 PostgreSQL 开发 Node.js 应用程序并托管在 Heroku 上。我的问题是我收到这样的身份验证错误：

```
14:32:05 web.1     | { [error: no pg_hba.conf entry for host "193.40.244.196", user "username", database "database_name", SSL off]
14:32:05 web.1     |   length: 168,
14:32:05 web.1     |   name: 'error',
14:32:05 web.1     |   severity: 'FATAL',
14:32:05 web.1     |   code: '28000',
14:32:05 web.1     |   detail: undefined,
14:32:05 web.1     |   hint: undefined,
14:32:05 web.1     |   position: undefined,
14:32:05 web.1     |   internalPosition: undefined,
14:32:05 web.1     |   internalQuery: undefined,
14:32:05 web.1     |   where: undefined,
14:32:05 web.1     |   file: 'auth.c',
14:32:05 web.1     |   line: '483',
14:32:05 web.1     |   routine: 'ClientAuthentication' } 
```

这可能是 SSL 问题，但不应该像[这里](https://github.com/brianc/node-postgres/issues/25)提到的那样。开箱即用应支持 SSL。所以我很难过，只能问什么可能导致这个错误？

我不确定是否必须在我的系统上编辑 pg_hba.conf，但我什至找不到它。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-01-01T16:16:13.160

通过在 Heroku 上设置`PGSSLMODE`（[http://www.postgresql.org/docs/9.0/static/libpq-envars.html ）解决了这个问题。](http://www.postgresql.org/docs/9.0/static/libpq-envars.html)它告诉 PostgreSQL 默认使用 SSL。

```
$ heroku config:set PGSSLMODE=require 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-28T20:45:17.897

node-postgres 在它的 javascript 绑定中不支持 SSL，如果你这样做，你正在使用它：

```
var pg = require('pg'); 
```

要获得 SSL，您需要通过执行以下操作来使用本机绑定：

```
var pg = require('pg').native; 
```

当您的应用在 Heroku 中运行时，您**不需要**使用 SSL，您只需要使用 SSL 进行远程连接（当您的应用在本地运行时）。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-07-23T04:56:25.463

我添加了这些参数，现在可以从外部服务器连接到我的 heroku postgres 实例，特别是在节点 express 服务器中的 knex.js 配置中：

```
var knex = require('knex')({
  client: 'postgres',
  connection: 'postgres://username:password@host:5432/yourdbname?ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory'
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-09T09:26:43.937

遇到同样的问题。刚刚在 db 参数中启用了 ssl=true。

```
var pg = require('pg');
var params = { host: 'heroku_hostname',user: 'username',password: 'password',database: 'database',ssl: true };
var client = new pg.Client(params);
client.connect(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-09T22:53:30.860

我自己遇到了这个，这是一个简单的修复。只需通过 HTTPS 连接即可

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-14T22:58:55.280

我也在 2021 年 4 月在我的 Heroku PRODUCTION 实例中收到了`'ClientAuthentication'` `no pg_hba.conf entry`错误。我曾经并继续使用 Plan“Hobby Dev”免费帐户。

Heroku 于 2021 年 2 月开始对平台进行更改，为所有 Heroku Postgres 客户端连接强制实施 SSL。 [所有 Heroku Postgres 客户端连接都需要 SSL](https://devcenter.heroku.com/changelog-items/2035)。

`ssl: { rejectUnauthorized: false }`我通过在使用[node-postgres v8](https://node-postgres.com/features/ssl)时添加以下配置来修复我的 PRODUCTION 实例（我的 NextJS 应用程序连接到 Heroku Postgres 插件）：

```
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: {
    rejectUnauthorized: false
  }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-28T18:21:02.717

```
const db = new Pool({
   connectionString: process.env.DATABASE_URL,
   ...
   ssl: { rejectUnauthorized: false }
}); 
```

我刚刚通过添加`ssl: { rejectUnautorized: false }`到我的数据库配置解决了这个问题。另外，运行`heroku config:set PGSSLMODE=no-verify -a appName`

注意：“appName”应该是您托管的应用程序的名称

# objective-c - NSDocumentDirectory 中文件的创建日期

> ID：10279968
> 
> 赞同：1
> 
> 时间：2012-04-23T11:49:25.353
> 
> 标签：objective-c, ios, date, xcode4, nsdocumentdirectory

我需要执行以下操作：使用文件名和在线文件的创建日期创建一个数组 将此数组与 NSDocumentDirectory 中文件的文件名和创建日期数组进行比较。

如何从 NSDocumentDirectory 中的文件中读取创建日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:58:17.930

您可以使用[NSFileManager](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)`- (NSDictionary *)attributesOfItemAtPath:(NSString *)path error:(NSError **)error`中的方法。

`NSFileModificationDate`您可以从上述方法收到的字典中获取文件修改日期。

# iphone - iPhone GPS - 未收到有效的位置更新

> ID：10279976
> 
> 赞同：6
> 
> 时间：2012-04-23T11:50:02.167
> 
> 标签：iphone, objective-c, ios, core-location

我一直在开发一个车辆跟踪应用程序，它依赖于核心位置服务。应用程序处于测试阶段，上周五它突然停止工作，根本没有位置更新（好像 GPS 不工作），即使我在车上并以 30 英里/小时或更高的速度行驶。对于一整天的应用程序根本没有工作。

我检查了我的日志，一直没有一个位置更新。但是，当时 Maps 应用程序运行良好，这让我相信 iOS/GPS-Module/Signal 没有问题。在星期六早上（第二天），相同的应用程序再次开始工作，无需更改代码或设置或重新安装。

过去两个月我一直在开发这个应用程序，这是我第三次遇到这个问题，我无法追踪根本原因，因为没有任何类型的更改，相同的构建再次开始工作。我在两台设备 iPhone 3gs (ios 4.3) 和 iPhone 4 (ios 5.1) 上遇到了这个问题。

那么，是否还有其他人遇到过类似的问题，或者任何关于可能是根本原因的提示或跟踪此类问题的任何提示......

**...更新...** 一些更新：上面“我没有收到任何更新”的问题中的陈述变成了错误的，因为我收到的位置更新很少，位置精度最差，例如 +/-200m（速度=-1 和课程 =-1)。但在我的应用程序中，我需要至少 +/-50m 的精度。我有代码可以丢弃精度较差的位置更新，这使我认为根本没有更新。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:10:44.453

如果您使用的是“重大更改位置服务”，那么验证您没有获得任何更新的位置是否有电话信号可能会很有趣。我相信该服务正在使用小区更改而不是 GPS 来触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:39:15.290

该应用程序是否以某种方式失去了操作系统使用 GPS 硬件的权限？您是否通过检查来检查位置服务是否已启用`+[CLLocationManager authorizationStatus]`？我知道，如果您删除并重新构建设备上的应用程序，您必须重新批准位置访问权限。也许你不小心否认了一次？

# html - 如何使更大的背景不在页面上显示滚动

> ID：10279977
> 
> 赞同：0
> 
> 时间：2012-04-23T11:50:04.543
> 
> 标签：html, css

专门针对此页面：

[http://www.intimeahygieia.com/proizvodi/intimea-teen/](http://www.intimeahygieia.com/proizvodi/intimea-teen/)

我希望它不在浏览器的按钮上显示滚动条，如下所示：

[http://www.intimeahygieia.com/proizvodi/intimea/](http://www.intimeahygieia.com/proizvodi/intimea/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:56:44.030

按照 CSS 规则添加到`<div>`（或任何您使用的）的 CSS 样式作为*背景*（带有滚动条的元素）：

```
overflow-x: hidden; 
overflow-y: auto; 
```

请注意，它也可以应用于`<body>`元素（我想这是您的情况）。

# c# - 弹簧抛出错误找不到对象的定义

> ID：10279981
> 
> 赞同：0
> 
> 时间：2012-04-23T11:50:27.347
> 
> 标签：c#, spring, dictionary, spring.net

我用 Spring.Net 编写了应用程序。当我尝试调用 Spring.Net 的 GetObject("...") 时，我遇到了一个异常：

> 未定义名为“SystemConfiguration_Workspace_NewWorkspaceAction”的对象：找不到对象 [SystemConfiguration_Workspace_NewWorkspaceAction] 的定义

但是我的 XML 中有名为“SystemConfiguration_Workspace_NewWorkspaceAction”的对象。

```
<?xml version="1.0" encoding="utf-8" ?>
<spring>

<typeAliases>
<alias name="ContextMenuItemModelAlias" type="ElmoMotionControl.View.Model.ContextMenuItemModel, ElmoMotionControl.View.Model"/>
</typeAliases>

<objects xmlns="http://www.springframework.net" >

<!--<description>An example that demonstrates simple IoC features.</description>-->

<object id="WorkspaceTreeModel" type="ElmoMotionControl.View.Model.ContextMenuModel, ElmoMotionControl.View.Model" >
  <property name="ContextMenus" ref="WorkspaceTreeModelDicProp"/>
</object>

<!-- _______________________The dictionary item______________________ -->
<object id ="WorkspaceTreeModelDicProp" type="System.Collections.Generic.Dictionary&lt;string, System.Collections.Generic.Dictionary&lt;string, System.Collections.Generic.List&lt;ContextMenuItemModelAlias>>>">
    <constructor-arg>
      <dictionary key-type="string" value-type="System.Collections.Generic.Dictionary&lt;string, System.Collections.Generic.List&lt;ContextMenuItemModelAlias>>">
        <entry key="SystemConfiguration_Workspace" value-ref="SystemConfiguration_Workspace"/>
      </dictionary>
    </constructor-arg> 
</object>
.
.
.
</objects>
</spring> 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:48:50.170

谢谢，我成功解决了我的问题

我不知道是什么问题，但我上过各个级别的课程。

一类包括List，一类包括字符串字典和最后一类，一类包括字符串和最后一类。

为这些类创建 XML 很简单。

# java - JSF 弹出页面到父（开瓶器）页面

> ID：10279983
> 
> 赞同：0
> 
> 时间：2012-04-23T11:50:59.903
> 
> 标签：java, jsf

如何从弹出页面 backingbean 获取 backingbean 内容到父 Window.Opener 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:34:55.490

您需要`window.opener`通过 JavaScript 手动填充 ' 的输入字段。

更简单的方法是将一个完整的 JSF 模态对话框组件与一个视图范围的 bean 结合使用。为此，PrimeFaces 具有 a`<p:dialog>`和 RichFaces `<rich:popupPanel>`。这不需要您编写任何自定义 JS 代码。

# android - android：两指放大/缩小

> ID：10279988
> 
> 赞同：2
> 
> 时间：2012-04-23T11:51:21.067
> 
> 标签：android, opengl-es, zooming

我在屏幕上绘制了一个对象（矩形），现在我想在视口中添加两个手指缩放。我找到了一些用于放大图像的教程，我将其更改/添加到我的应用程序中，它运行但放大/缩小不起作用！也没有错误！你能帮我解决这个问题吗？这是放大/缩小视口的好方法吗？

```
public class android1 extends Activity implements OnTouchListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        GLSurfaceView view = new GLSurfaceView(this);
        view.setRenderer(new OpenGLRenderer());
        setContentView(view);
        view.setOnTouchListener(this);
    }

   private static final String TAG = "Touch";
   // These matrices will be used to move and zoom image
   Matrix matrix = new Matrix();
   Matrix savedMatrix = new Matrix();

   // We can be in one of these 3 states
   static final int NONE = 0;
   static final int ZOOM = 2;
   int mode = NONE;

   // Remember some things for zooming
   PointF start = new PointF();
   PointF mid = new PointF();
   float oldDist = 1f;

   public boolean onTouch(View v, MotionEvent event) {
      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(TAG, "mode=DRAG");

         break;
      case MotionEvent.ACTION_POINTER_DOWN:
         oldDist = spacing(event);
         Log.d(TAG, "oldDist=" + oldDist);
         if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
         }
         break;
      case MotionEvent.ACTION_UP:
      case MotionEvent.ACTION_POINTER_UP:
         mode = NONE;
         Log.d(TAG, "mode=NONE");
         break;
      case MotionEvent.ACTION_MOVE:

          if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
               matrix.set(savedMatrix);
               float scale = newDist / oldDist;
               matrix.postScale(scale, scale, mid.x, mid.y);
            }
         }
         break;
      }

      return true; // indicate event was handled
   }

   /** Show an event in the LogCat view, for debugging */
   private void dumpEvent(MotionEvent event) {
      String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
      StringBuilder sb = new StringBuilder();
      int action = event.getAction();
      int actionCode = action & MotionEvent.ACTION_MASK;
      sb.append("event ACTION_").append(names[actionCode]);
      if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
         sb.append("(pid ").append(
               action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
         sb.append(")");
      }
      sb.append("[");
      for (int i = 0; i < event.getPointerCount(); i++) {
         sb.append("#").append(i);
         sb.append("(pid ").append(event.getPointerId(i));
         sb.append(")=").append((int) event.getX(i));
         sb.append(",").append((int) event.getY(i));
         if (i + 1 < event.getPointerCount())
            sb.append(";");
      }
      sb.append("]");
      Log.d(TAG, sb.toString());
   }

   /** Determine the space between the first two fingers */
   private float spacing(MotionEvent event) {
      float x = event.getX(0) - event.getX(1);
      float y = event.getY(0) - event.getY(1);
      return FloatMath.sqrt(x * x + y * y);
   }

   /** Calculate the mid point of the first two fingers */
   private void midPoint(PointF point, MotionEvent event) {
      float x = event.getX(0) + event.getX(1);
      float y = event.getY(0) + event.getY(1);
      point.set(x / 2, y / 2);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:16:13.663

您正确设置了矩阵，但没有将其应用于您的视图。在 onTouch 事件结束时：

```
v.setImageMatrix(matrix); 
```

# java - Java 可执行 Jar 文件

> ID：10279990
> 
> 赞同：5
> 
> 时间：2012-04-23T11:51:28.130
> 
> 标签：java, eclipse, compiler-errors, executable-jar

我正在尝试从 eclipse 制作一个可执行的 jar 文件（使用 MySQL 作为数据库）。

如何制作可执行的 jar 文件？

我做了一个，但它显示了一些警告并且不起作用。我收到了一份很长的警告清单。这是警告：

* * *

```
 JAR export finished with warnings. See details for additional information.
  Exported with compile warnings: AngalTask/src/org/isf/accounting/gui/PatientBillEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/accounting/gui/BillBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/admission/gui/AdmissionBrowserOld.java
  Exported with compile warnings: AngalTask/src/org/isf/admission/gui/AdmittedPatientBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/admission/gui/AdmissionBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/disease/gui/DiseaseEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/disease/gui/DiseaseBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/exa/gui/ExamBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/exa/gui/ExamEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/help/gui/AboutWindow.java
  Exported with compile warnings: AngalTask/src/org/isf/lab/gui/LabNew.java
  Exported with compile warnings: AngalTask/src/org/isf/lab/gui/LabBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/lab/gui/LabEditExtended.java
  Exported with compile warnings: AngalTask/src/org/isf/lab/gui/LabPrintFrame.java
  Exported with compile warnings: AngalTask/src/org/isf/lab/gui/LabEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/lab/manager/Results.java
  Exported with compile warnings: AngalTask/src/org/isf/medicals/gui/MedicalBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/medicals/gui/MedicalEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/medicalstock/gui/MovStockBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/medicalstock/gui/MovStockInserting.java
  Exported with compile warnings: AngalTask/src/org/isf/medicalstockward/gui/WardPharmacy.java
  Exported with compile warnings: AngalTask/src/org/isf/medicalstockward/gui/WardPharmacyEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/UserEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/Menu.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/MainMenu.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/Login.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/UserBrowsing.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/SubMenu.java
  Exported with compile warnings: AngalTask/src/org/isf/menu/gui/SplashWindow3.java
  Exported with compile warnings: AngalTask/src/org/isf/opd/gui/OpdEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/opd/gui/OpdBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/opd/gui/OpdEditExtended.java
  Exported with compile warnings: AngalTask/src/org/isf/operation/gui/OperationEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/operation/gui/OperationBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/patient/gui/PatientInsertExtended.java
  Exported with compile warnings: AngalTask/src/org/isf/patvac/gui/PatVacEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/patvac/gui/PatVacBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/priceslist/gui/PricesBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/serviceprinting/print/MedicalStockSelection.java
  Exported with compile warnings: AngalTask/src/org/isf/serviceprinting/print/MedicalPrintSelection.java
  Exported with compile warnings: AngalTask/src/org/isf/stat/reportlauncher/gui/ReportLauncher.java
  Exported with compile warnings: AngalTask/src/org/isf/therapy/gui/TherapyEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/therapy/gui/TherapyEntryForm.java
  Exported with compile warnings: AngalTask/src/org/isf/utils/jobjects/JAgenda.java
  Exported with compile warnings: AngalTask/src/org/isf/utils/jobjects/ShadowBorder.java
  Exported with compile warnings: AngalTask/src/org/isf/utils/jobjects/FixedFrame.java
  Exported with compile warnings: AngalTask/src/org/isf/utils/time/TimeComboBox.java
  Exported with compile warnings: AngalTask/src/org/isf/vaccine/gui/VaccineBrowser.java
  Exported with compile warnings: AngalTask/src/org/isf/vaccine/gui/VaccineEdit.java
  Exported with compile warnings: AngalTask/src/org/isf/video/gui/VideoDevicesPanel.java 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:05:26.490

“它显示了一些警告并且不起作用”请记住，如果您不提供有关您遇到的错误的详细信息，我们将无法为您提供太多帮助：http: [//imgur.com/jacoj](http://imgur.com/jacoj)

Eclipse 可能会警告您已创建可执行 jar 文件并带有警告。这只是意味着您的课程有警告（黄色！）。这并不意味着生成的 jar 文件将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:57:19.613

1.  右键单击需要导出为 jar 的项目
2.  从列表中选择“导出”选项
3.  从新的弹出窗口中，选择“可运行的 jar 文件”
4.  单击“下一步”按钮
5.  在下一个窗口中为您的 jar 和启动配置（具有 main 方法的类）命名
6.  为所需的库选择适当的选项，然后单击完成按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:52:53.233

文件->导出->可运行的 JAR 文件

然后你可以选择，天气你想在 jar 中复制 jar 或者只是提取它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-16T13:42:43.533

当您有一个其内容被完全注释掉的 java 类时，就会发生这种情况。但是，创建的 jar 应该最有可能工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-23T12:20:02.177

警告很好，这不会导致可执行 jar 出现问题。

`<Your JAR name>.jar\META-INF\MANIFEST.MF`通过取消归档 jar 文件并找到`Main-Class: <your entry point class with main method>`.

如果这`Main-Class`不存在，那么在创建 jar 时出现了问题。

确保您遵循正确的步骤。请查看本[指南以创建 jar](http://viralpatel.net/blogs/2008/12/create-jar-file-in-java-eclipse.html)作为参考。

注意：您可以手动编辑`MANIFEST.MF`

# php - PHP - RegEx 匹配有或没有国家代码的电话号码

> ID：10279994
> 
> 赞同：5
> 
> 时间：2012-04-23T11:51:35.903
> 
> 标签：php, android, regex, cordova, mobile-country-code

我想在 php 中编写一个匹配方法，允许我匹配电话号码。

我的情况是，我想构建一个应用程序，从 Android 设备中提取电话联系人号码，在后端，它将电话联系人与当前应用程序用户匹配，如果匹配，则将这些用户添加为朋友，类似于 whatsapp 在将电话联系人与设备中装有 whatsapp 应用程序的用户匹配时所做的事情。

我现在遇到的问题是如何编写一个正则表达式，它可以匹配带有/不带有国家代码或前导零的电话号码。

在应用程序中，我要求输入用户国家和电话号码，例如我的一个朋友输入了这些值： 国家：约旦（+962）电话号码：799633999 这在后端将存储为 +962799633999

如果我们假设我将我的朋友号码设为 0799633999，那么我可以使用什么正则表达式将 0799633999 与 +96279963999 匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:05:12.707

你的正则表达式是`#(\+\d+|0)(\d{9})$#`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:07:49.993

你不要用正则表达式来做这件事。截断前导零和国家代码并进行常规字符串比较。

如果联系人可以来自不同的国家/地区，请添加您正在寻找朋友的国家/地区代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T08:27:37.873

请参阅[此](https://stackoverflow.com/a/12858073/3523778)链接，您可以使用此正则表达式：

```
^([0|\+[0-9]{1,5})?([7-9][0-9]{9})$ 
```

php代码：

```
$re = '/^([0|\+[0-9]{1,5})?([7-9][0-9]{9})$/';
$str = '+2529371208646';

preg_match_all($re, $str, $matches);

print_r($matches); 
```

# php - JQuery 表单 (html) POST 到 php 邮件 (html)

> ID：10279995
> 
> 赞同：0
> 
> 时间：2012-04-23T11:51:41.790
> 
> 标签：php, jquery, html, post

我的 JQuery Post 脚本遇到了一些问题。我使用 Jquery 提交（弹出）表单，当我禁用此功能时，一切运行顺利。（我只是不想离开我的表单页面）。

我的表单输入的一部分（一些单选按钮）

```
<label><input type="radio" name="algemene_rating" id="algemene_rating" value="zeer_slecht" />1</label>
<label><input type="radio" name="algemene_rating" id="algemene_rating" value="slecht" />2</label>
<label><input type="radio" name="algemene_rating" id="algemene_rating" value="matig" />3</label>
<label><input type="radio" name="algemene_rating" id="algemene_rating" value="goed" />4</label>
<label><input type="radio" name="algemene_rating" id="algemene_rating" value="zeer_goed" />5</label> 
```

我的表单输入的一部分（一些复选框）

```
<input type="checkbox" name="suggestie_dienstverlening" value="true" style="float:left; margin-bottom:5px;"/><div class="FeedbackCheckbox">Dienstverlening</div>
<input type="checkbox" name="suggestie_opmaak" value="true" style="float:left"/><div class="FeedbackCheckbox">Opmaak</div>
<input type="checkbox" name="suggestie_functionaliteit" value="true" style="float:left; margin-bottom:5px;"/><div class="FeedbackCheckbox">Functionaliteit</div>
<input type="checkbox" name="suggestie_site_inhoud" value="true" style="float:left; margin-bottom:5px"/><div class="FeedbackCheckbox">Site inhoud</div>
<input type="checkbox" name="suggestie_anders" value="true" style="float:left"/><div class="FeedbackCheckbox">Anders...</div> 
```

我的表单输入的一部分（文本（区域））

```
<input type="text" name="url_van_foutpagina" style="font-size:9px; width:275px">
<input id="e-mail" type="text" value="" name="email" /> 
```

* * *

没有 JQuery，有了这个 PHP 脚本，一切都会顺利进行：

```
<?php

//collect vals
$algemene_rating = htmlspecialchars($_POST['algemene_rating']);
if ($_POST['suggestie_dienstverlening'] == "true")  {$sugestie_onderwerp .= "<li> Dienstverlening </li>";}
if ($_POST['suggestie_opmaak'] == "true")           {$sugestie_onderwerp .= "<li> Opmaak </li>";}
if ($_POST['suggestie_functionaliteit'] == "true")  {$sugestie_onderwerp .= "<li> Functionaliteit </li>";}
if ($_POST['suggestie_site_inhoud'] == "true")      {$sugestie_onderwerp .= "<li> Site inhoud </li>";}
if ($_POST['suggestie_anders'] == "true")           {$sugestie_onderwerp .= "<li> Anders.. </li>";}
$url_van_foutpagina = htmlspecialchars($_POST['url_van_foutpagina']);

//Collect 'Emailadres'
$email = htmlspecialchars($_POST['email']);

// Collect: 'Attributes'
$tijd = time();
$datum = strftime("%d/%m/%y %H:%M", $tijd);
$ip = getenv("REMOTE_ADDR");

// Collect 'Mail info'
$headers = 'MIME-Version: 1.0' . "\r\n"; 
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

// Het bericht voor de ontvanger 
$message = '<html><body>';
$message .= '<table rules="all" style="background-color:#F8F8F8; width:600px; font-family:arial; font-size:11px; valign:top">';
$message .= '<table rules="all" border="1px solid #666666" style="background-color:#F8F8F8; width:600px; font-family:arial; font-size:11px;">';
$message .= '<td style="width:200px;"  /></td>';
$message .= "<tr><td><strong></strong> </td><td><h3>Feedbackformulier Multihout.nl</h3></td></tr>";
// 'Attributes'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Feedback datum:</strong> </td><td>        " . $datum . "</td></tr>";
$message .=  "<tr><td><strong>Feedback e-mailadres:</strong> </td><td>  " . $email . "</td></tr>";
$message .=  "<tr><td><strong>Feedback IP-adres:</strong> </td><td>     " . $ip . "</td></tr>";
// 'Algemeen'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Algemene rating van de site:</strong> </td><td>" . $algemene_rating . "</td></tr>";
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Feedback over URL:</strong> </td><td>" . $url_van_foutpagina . "</td></tr>";
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Onderwerp suggestie:</strong> </td><td>" . $sugestie_onderwerp . "</td></tr>";
$message .= "</table>";
$message .= "</body></html>"; 

// Gedeelte voor het verzenden van het bericht
$mailadres = "test@test.nl";
$message = str_replace ("<br>","\n", $message);
$headers .= "From: Test <test@test.nl>" . "\r\n";
mail("$mailadres", "Nieuw bericht via mailformulier", $message, $headers); 

?>
<!--Display a thankyou message in the callback -->
<div id="mail_response">
    <h3>Thank you <?php echo $name ?>!</h3><br />
    <p>I will answer your message soon as possible.</p><br /><br /><br />
    <h5>Message sent on: </h5>
    <p><?php echo $todayis ?></p>
</div> 
```

但是如果我使用这个 JS 脚本（提交/发布部分），我会在我的邮件、表格中得到未定义的值。

```
 //submission scripts
  $('.contactForm').submit( function(){
        //statements to validate the form   
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        var email = document.getElementById('e-mail');
        if (!filter.test(email.value)) {
            $('.email-missing').show();
        } else {$('.email-missing').hide();}
        //if (document.cform.name.value == "") {
        //  $('.name-missing').show();
        //} else {$('.name-missing').hide();}   
        //if (document.cform.message.value == "") {
        //  $('.message-missing').show();
        //} else {$('.message-missing').hide();}        
        if 
        //((document.cform.name.value == "") || 
        (!filter.test(email.value)) 
        //|| (document.cform.message.value == ""))
        {
            return false;
        } 

        if 
        //((document.cform.name.value != "") && 
        (filter.test(email.value)) 
        //&& (document.cform.message.value != "")) 
        {
            //hide the form
            $('.contactForm').hide();

            //show the loading bar
            $('.loader').append($('.bar'));
            $('.bar').css({display:'block'});

            //send the ajax request
            $.post('mail.php',{
                            algemene_rating:$('#algemene_rating').val(),
    url_van_foutpagina:$('#url_van_foutpagina').val(),
    sugestie_onderwerp:$('#sugestie_onderwerp').val(),
    email:$('#email').val()},

            //return the data
            function(data){
              //hide the graphic
              $('.bar').css({display:'none'});
              $('.loader').append(data);
            });

            //waits 2000, then closes the form and fades out
            setTimeout('$("#backgroundPopup").fadeOut("slow"); $("#contactForm").slideUp("slow")', 2000);

            //stay on the page
            return false;
        } 
  });
    //only need force for IE6  
    $("#backgroundPopup").css({  
        "height": document.documentElement.clientHeight 
    });  
}); 
```

我认为问题出在这里：

```
//send the ajax request
                $.post('mail.php',{
algemene_rating:$('#algemene_rating').val(), url_van_foutpagina:$('#url_van_foutpagina').val(),
sugestie_onderwerp:$('#sugestie_onderwerp').val(), email:$('#email').val()}, 
```

但我不知道如何正确地在 jquery 中发布。或者以正确的方式将其检索到 .html 邮件中。我尝试对整个表单进行 .serialize，但我不知道如何将其“反序列化”，以便正确填写 html 邮件。

我希望你们能帮助我..现在期待并试图自己解决这个问题..:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:13:49.963

我相信您正在寻找的是一个 ajax 请求。您想在不刷新页面的情况下发送数据。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# zend-framework - Zend Framework - 在视图 phtml 文件中不可用的引导程序中设置的视图对象

> ID：10279999
> 
> 赞同：1
> 
> 时间：2012-04-23T11:51:55.247
> 
> 标签：zend-framework, view, bootstrapping

我一直在尝试在 Bootstrap.php 文件中设置一个对象，并希望能够在所有视图 phtml 文件中使用它。

例如，我在 _init 函数中设置 Zend_Translate，如下所示：

```
function _initTranslations() {
    $this->bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();

    $translate = new Zend_Translate('gettext', 
                                    APPLICATION_PATH.'/languages',
                                    null,
                                    array('scan' => Zend_Translate::LOCALE_FILENAME));
    $session = new Zend_Session_Namespace('translation'); // get session to check if user set lang
    $locale = new Zend_Locale();
    if (isset($session->language)) {
        // if user has previously set the lang we use this setting
        $requestedLanguage = $session->language;
        $locale->setLocale($requestedLanguage);
    } else {
        // otherwise we use the browser's setting
        $locale->setLocale(Zend_Locale::BROWSER);
        $requestedLanguage = key($locale->getBrowser());
    }
    if (in_array($requestedLanguage, $translate->getList())) {
        $language = $requestedLanguage;
    } else {
        $language = 'en';
    }
    Zend_Registry::set('locale', $locale);
    $translate->setLocale($language);
    $view->translate = $translate;
} 
```

我会认为 $view->translate = $translate; 足以使 $translate 对象在我的视图中可用，但只能在我的 layout.phtml 中访问

我是 Zend 框架的相对新手，假设这个问题以前曾遇到过其他人，但我的互联网研究没有给我答案，所以我希望这里有人能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:19:41.783

您只需要在 Bootstrap 中将 Zend_Translate 设置为 Zend_Registry，您就可以在任何 phml 中使用翻译视图助手。

将此行放在最后：

```
Zend_Registry::set('Zend_Translate', $translate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:57:39.910

尽管您已经找到了答案，但您可以通过以下方式访问引导程序中的视图资源：

```
$this->bootstrap('view');
$view = $this->getResource('view'); 
```