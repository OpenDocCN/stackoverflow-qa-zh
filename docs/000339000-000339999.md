# StackOverflow 问答 000339000-000339999

# java - Java - 从配置文件中加密/解密用户名和密码

> ID：339004
> 
> 赞同：14
> 
> 时间：2008-12-03T22:39:10.060
> 
> 标签：java, encryption, configuration-files

我们正忙于为客户开发 Java Web 服务。有两种可能的选择：

*   将加密的用户名/密码存储在 Web 服务客户端上。从配置中读取。文件在客户端，解密并发送。

*   将加密的用户名/密码存储在 Web 服务器上。从配置中读取。Web 服务器上的文件，解密并在 Web 服务中使用。

Web 服务使用用户名/密码访问第三方应用程序。

客户端已经有提供此功能的类，但这种方法涉及以明文形式发送用户名/密码（尽管在 Intranet 中）。他们更喜欢存储信息。在网络服务中，但不想为他们已经拥有的东西付费。（安全性不是一个重要的考虑因素，因为它只在他们的 Intranet 中）。

所以我们需要在 Java 中快速和简单的东西。

有什么建议吗？

服务器是 Tomkat 5.5。Web 服务是 Axis2。

*   我们应该使用什么加密/解密包？
*   钥匙店呢？
*   我们应该使用什么配置机制？
*   这很容易部署吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-04T07:09:44.600

据我了解，为了调用第 3 方网络服务，您将密码作为纯文本传递，并且不涉及安全证书。

然后我会说最简单的方法是以加密格式（通过java加密机制）存储密码，而加密/解密密钥只是硬编码在代码中。

我肯定会将它存储在服务器端（文件系统或数据库），而不是在多个客户端上分发和维护它。

以下是如何使用“DES”加密：

```
// only the first 8 Bytes of the constructor argument are used 
// as material for generating the keySpec
DESKeySpec keySpec = new DESKeySpec("YourSecr".getBytes("UTF8")); 
SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES");
SecretKey key = keyFactory.generateSecret(keySpec);
sun.misc.BASE64Encoder base64encoder = new BASE64Encoder();
sun.misc.BASE64Decoder base64decoder = new BASE64Decoder();
.........

// ENCODE plainTextPassword String
byte[] cleartext = plainTextPassword.getBytes("UTF8");      

Cipher cipher = Cipher.getInstance("DES"); // cipher is not thread safe
cipher.init(Cipher.ENCRYPT_MODE, key);
String encrypedPwd = base64encoder.encode(cipher.doFinal(cleartext));
// now you can store it 
......

// DECODE encryptedPwd String
byte[] encrypedPwdBytes = base64decoder.decodeBuffer(encryptedPwd);

Cipher cipher = Cipher.getInstance("DES");// cipher is not thread safe
cipher.init(Cipher.DECRYPT_MODE, key);
byte[] plainTextPwdBytes = (cipher.doFinal(encrypedPwdBytes)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-12-03T23:09:07.610

在 Intranet 上当然不能证明忽略安全性是正当的。对信息造成的大多数损害是由内部人员造成的。查看受保护内容的价值，并适当考虑安全性。

听起来有一个第三方应用程序，您有一组凭据，并且一些客户端在使用第三方应用程序时有效地共享此身份。如果是这种情况，我推荐以下方法。

不要将第三方密码分发到您的 Web 服务器之外。

最安全的方法是以交互方式将其提供给 Web 应用程序。这可能是在应用程序启动时提示输入密码的 ServletContextListener，或者是应用程序中的一个页面，以便管理员可以通过表单输入它。密码存储在 ServletContext 中，用于验证对第三方服务的请求。

安全的一个步骤是将密码存储在服务器的文件系统上，以便只有运行服务器的用户才能读取它。这依赖于服务器的文件系统权限进行保护。

试图在客户端或服务器上存储加密形式的密码，只是倒退了一步。当你试图用另一个秘密保护一个秘密时，你会陷入无限倒退。

此外，客户端应向服务器验证自己的身份。如果客户端是交互式的，则让用户输入密码。然后服务器可以决定该用户是否被授权访问第三方服务。如果客户端不是交互式的，则下一个最佳安全措施是使用文件系统权限保护客户端的密码。

为了保护客户端的凭据，客户端和您的 Web 服务器之间的通道应该使用 SSL 保护。在这里，在 Intranet 上操作是有利的，因为您可以在服务器上使用自签名证书。

如果您确实将密码存储在文件中，请将它们自己放入文件中；它使仔细管理权限的需要更加明显，并最大限度地减少了许多用户编辑该文件并因此查看密码的需要。

# asp.net - ASP.NET MVP - 利用用户控件

> ID：339005
> 
> 赞同：9
> 
> 时间：2008-12-03T22:39:20.463
> 
> 标签：asp.net, design-patterns, mvp

我正在使用 ASP.NET MVP（尝试监督控制器）和单元测试（迟到总比没有好！）编写我的第一个应用程序，我遇到了一些困境。我已经编写了 3 个用户控件，全部经过测试和接口，演示者在拖。现在我来到一个采用这三个用户控件的页面并遇到以下问题：

用户控件 1 是 DateSelector，它是带有几个其他按钮/列表的日历控件。没有什么真正令人兴奋的。

用户控件 2 是 DailyList。猜猜它是什么。无论如何，您可以选择/删除等。如果您从网格视图中选择一个项目，它需要填充用户控件 3。

用户控件 3 是 ItemDetail。下面是 DropDownLists、TextBoxes 等......有些与其他人存在依赖关系（在 DropDown 中选择一个选项会影响 DropDown 2 中的选项）。

如果我从我的 DateSelector 中选择一个新日期，我是否会从 DateSelector Presenter 中引发事件？我必须以某种方式让其他用户控件知道选择了一个新日期，以便他们可以重新绑定他们的数据，但是如何？如果我使用页面的 Presenter 来订阅用户控制视图的 Presenter，我会不会公然违反 Demeter 法则（通过他们的 View 将 Presenter 暴露为属性）？我不是必须将页面的 Presenter 用作页面的全知控制器吗？有什么我想念的吗？

到目前为止我读到的所有内容都说，“MVP 很棒，即使使用用户控件也是如此”，但是当涉及到示例时，用户控件的使用很容易被遗忘。在我看来，MVC 会更符合我对此的思考模式，但目前，MVC 不是一种选择。任何帮助在这里都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T06:08:24.223

Page Presenter 必须是协调页面上控件之间交互的人。还有谁会这样做？我会让页面演示者监听 DateSelector 用户控件的事件。从页面演示者的角度来看，它可能不需要知道谁引发了事件（视图或演示者），因为它将 DateSelector 视为一个完全封装的控件。内部工作应该对页面的演示者隐藏。

它只知道 DateSelector 用户控件引发了一个事件，现在它需要通过引发自己的事件或通过显式调用演示者上的方法来通知页面上的其他控件。

# python - 如何将零填充到字符串？

> ID：339007
> 
> 赞同：1838
> 
> 时间：2008-12-03T22:39:51.883
> 
> 标签：python, string, zero-padding

什么是 Pythonic 的方法来用零填充数字字符串到左边，即数字字符串具有特定的长度？

* * *

## 回答 #1

> 赞同：2962
> 
> 时间：2008-12-03T22:42:04.750

字符串：

```
>>> n = '4'
>>> print(n.zfill(3))
004 
```

对于数字：

```
>>> n = 4
>>> print(f'{n:03}') # Preferred method, python >= 3.6
004
>>> print('%03d' % n)
004
>>> print(format(n, '03')) # python >= 2.6
004
>>> print('{0:03d}'.format(n))  # python >= 2.6 + python 3
004
>>> print('{foo:03d}'.format(foo=n))  # python >= 2.6 + python 3
004
>>> print('{:03d}'.format(n))  # python >= 2.7 + python3
004 
```

[字符串格式化文档](https://docs.python.org/3/library/string.html#format-string-syntax)。

* * *

## 回答 #2

> 赞同：431
> 
> 时间：2008-12-03T22:47:13.193

只需使用字符串对象的[rjust方法即可。](https://docs.python.org/3/library/stdtypes.html#str.rjust)

此示例将创建一个长度为 10 个字符的字符串，并根据需要进行填充。

```
>>> t = 'test'
>>> t.rjust(10, '0')
>>> '000000test' 
```

* * *

## 回答 #3

> 赞同：174
> 
> 时间：2008-12-03T22:41:49.867

此外`zfill`，您可以使用一般的字符串格式：

```
print(f'{number:05d}') # (since Python 3.6), or
print('{:05d}'.format(number)) # or
print('{0:05d}'.format(number)) # or (explicit 0th positional arg. selection)
print('{n:05d}'.format(n=number)) # or (explicit `n` keyword arg. selection)
print(format(number, '05d')) 
```

[字符串格式化](https://docs.python.org/3/library/string.html#string-formatting)和[f-strings 的](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)文档。

* * *

## 回答 #4

> 赞同：129
> 
> 时间：2014-06-24T12:31:08.417

对于使用 f 字符串的 Python 3.6+：

```
>>> i = 1
>>> f"{i:0>2}"  # Works for both numbers and strings.
'01'
>>> f"{i:02}"  # Works only for numbers.
'01' 
```

对于 Python 2 到 Python 3.5：

```
>>> "{:0>2}".format("1")  # Works for both numbers and strings.
'01'
>>> "{:02}".format(1)  # Works only for numbers.
'01' 
```

* * *

## 回答 #5

> 赞同：66
> 
> 时间：2013-01-10T23:19:37.190

```
>>> '99'.zfill(5)
'00099'
>>> '99'.rjust(5,'0')
'00099' 
```

如果你想要相反的：

```
>>> '99'.ljust(5,'0')
'99000' 
```

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2011-06-01T04:40:02.543

`str(n).zfill(width)`将与`string`s、`int`s、`float`s... 一起使用，并且与 Python 2.x*和*3.x*兼容*：

```
>>> n = 3
>>> str(n).zfill(5)
'00003'
>>> n = '3'
>>> str(n).zfill(5)
'00003'
>>> n = '3.0'
>>> str(n).zfill(5)
'003.0' 
```

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2018-07-02T02:47:52.763

> ## 在左边用零填充数字字符串的最pythonic方法是什么，即数字字符串具有特定长度？

[`str.zfill`](https://docs.python.org/3/library/stdtypes.html#str.zfill)专门用于执行此操作：

```
>>> '1'.zfill(4)
'0001' 
```

请注意，它专门用于按要求处理数字字符串，并将 a `+`or移动`-`到字符串的开头：

```
>>> '+1'.zfill(4)
'+001'
>>> '-1'.zfill(4)
'-001' 
```

这是关于的帮助`str.zfill`：

```
>>> help(str.zfill)
Help on method_descriptor:

zfill(...)
    S.zfill(width) -> str

    Pad a numeric string S with zeros on the left, to fill a field
    of the specified width. The string S is never truncated. 
```

### 表现

这也是替代方法中性能最高的：

```
>>> min(timeit.repeat(lambda: '1'.zfill(4)))
0.18824880896136165
>>> min(timeit.repeat(lambda: '1'.rjust(4, '0')))
0.2104538488201797
>>> min(timeit.repeat(lambda: f'{1:04}'))
0.32585487607866526
>>> min(timeit.repeat(lambda: '{:04}'.format(1)))
0.34988890308886766 
```

为了最好地将苹果与该`%`方法的苹果进行比较（注意它实际上更慢），否则将预先计算：

```
>>> min(timeit.repeat(lambda: '1'.zfill(0 or 4)))
0.19728074967861176
>>> min(timeit.repeat(lambda: '%04d' % (0 or 1)))
0.2347015216946602 
```

### 执行

经过一番挖掘，我发现了该`zfill`方法的实现[`Objects/stringlib/transmogrify.h`](https://github.com/python/cpython/blob/master/Objects/stringlib/transmogrify.h)：

```
static PyObject *
stringlib_zfill(PyObject *self, PyObject *args)
{
    Py_ssize_t fill;
    PyObject *s;
    char *p;
    Py_ssize_t width;

    if (!PyArg_ParseTuple(args, "n:zfill", &width))
        return NULL;

    if (STRINGLIB_LEN(self) >= width) {
        return return_self(self);
    }

    fill = width - STRINGLIB_LEN(self);

    s = pad(self, fill, 0, '0');

    if (s == NULL)
        return NULL;

    p = STRINGLIB_STR(s);
    if (p[fill] == '+' || p[fill] == '-') {
        /* move sign to beginning of string */
        p[0] = p[fill];
        p[fill] = '0';
    }

    return s;
} 
```

让我们来看看这个 C 代码。

它首先按位置解析参数，这意味着它不允许关键字参数：

```
>>> '1'.zfill(width=4)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: zfill() takes no keyword arguments 
```

然后它检查它的长度是否相同或更长，在这种情况下它返回字符串。

```
>>> '1'.zfill(0)
'1' 
```

`zfill`调用`pad`（此`pad`函数也由`ljust`、`rjust`和调用`center`）。这基本上将内容复制到一个新字符串中并填充填充。

```
static inline PyObject *
pad(PyObject *self, Py_ssize_t left, Py_ssize_t right, char fill)
{
    PyObject *u;

    if (left < 0)
        left = 0;
    if (right < 0)
        right = 0;

    if (left == 0 && right == 0) {
        return return_self(self);
    }

    u = STRINGLIB_NEW(NULL, left + STRINGLIB_LEN(self) + right);
    if (u) {
        if (left)
            memset(STRINGLIB_STR(u), fill, left);
        memcpy(STRINGLIB_STR(u) + left,
               STRINGLIB_STR(self),
               STRINGLIB_LEN(self));
        if (right)
            memset(STRINGLIB_STR(u) + left + STRINGLIB_LEN(self),
                   fill, right);
    }

    return u;
} 
```

在调用 之后`pad`，`zfill`将任何原来的前面`+`或`-`字符串的开头移动。

请注意，不需要原始字符串实际上是数字：

```
>>> '+foo'.zfill(10)
'+000000foo'
>>> '-foo'.zfill(10)
'-000000foo' 
```

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2016-07-13T13:59:00.273

对于那些来这里了解而不仅仅是快速回答的人。我特别为时间字符串做这些：

```
hour = 4
minute = 3
"{:0>2}:{:0>2}".format(hour,minute)
# prints 04:03

"{:0>3}:{:0>5}".format(hour,minute)
# prints '004:00003'

"{:0<3}:{:0<5}".format(hour,minute)
# prints '400:30000'

"{:$<3}:{:#<5}".format(hour,minute)
# prints '4$$:3####' 
```

> “0”符号用“2”填充字符替换什么，默认为空格
> 
> ">" 符号将所有 2 个 "0" 字符对齐到字符串的左侧
> 
> ":" 表示 format_spec

* * *

## 回答 #9

> 赞同：26
> 
> 时间：2019-08-05T14:28:24.603

使用 Python`>= 3.6`时，最简洁的方法是使用带有[字符串格式](https://docs.python.org/3/library/string.html#formatspec)[的 f](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)字符串：

```
>>> s = f"{1:08}"  # inline with int
>>> s
'00000001' 
```

```
>>> s = f"{'1':0>8}"  # inline with str
>>> s
'00000001' 
```

```
>>> n = 1
>>> s = f"{n:08}"  # int variable
>>> s
'00000001' 
```

```
>>> c = "1"
>>> s = f"{c:0>8}"  # str variable
>>> s
'00000001' 
```

我更喜欢使用 格式化`int`，因为只有这样才能正确处理符号：

```
>>> f"{-1:08}"
'-0000001'

>>> f"{1:+08}"
'+0000001'

>>> f"{'-1':0>8}"
'000000-1' 
```

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2008-12-03T22:44:58.377

```
width = 10
x = 5
print "%0*d" % (width, x)
> 0000000005 
```

有关所有令人兴奋的细节，请参阅印刷文档！

**Python 3.x 更新（7.5 年后）**

最后一行现在应该是：

```
print("%0*d" % (width, x)) 
```

ie`print()`现在是一个函数，而不是一个语句。请注意，我仍然更喜欢 Old School`printf()`风格，因为 IMNSHO，它读起来更好，而且因为，嗯，我从 1980 年 1 月起就一直在使用这种符号。一些东西......老狗......一些东西......新技巧。

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2021-08-10T16:59:26.983

对于数字：

```
i = 12
print(f"{i:05d}") 
```

输出

```
00012 
```

* * *

## 回答 #12

> 赞同：13
> 
> 时间：2020-07-25T15:08:26.377

我正在添加如何从 f 字符串中的字符串长度中使用 int，因为它似乎没有被覆盖：

```
>>> pad_number = len("this_string")
11
>>> s = f"{1:0{pad_number}}" }
>>> s
'00000000001' 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2011-06-01T04:27:15.210

对于保存为整数的邮政编码：

```
>>> a = 6340
>>> b = 90210
>>> print '%05d' % a
06340
>>> print '%05d' % b
90210 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-06-28T10:58:09.330

快速时序比较：

```
setup = '''
from random import randint
def test_1():
    num = randint(0,1000000)
    return str(num).zfill(7)
def test_2():
    num = randint(0,1000000)
    return format(num, '07')
def test_3():
    num = randint(0,1000000)
    return '{0:07d}'.format(num)
def test_4():
    num = randint(0,1000000)
    return format(num, '07d')
def test_5():
    num = randint(0,1000000)
    return '{:07d}'.format(num)
def test_6():
    num = randint(0,1000000)
    return '{x:07d}'.format(x=num)
def test_7():
    num = randint(0,1000000)
    return str(num).rjust(7, '0')
'''
import timeit
print timeit.Timer("test_1()", setup=setup).repeat(3, 900000)
print timeit.Timer("test_2()", setup=setup).repeat(3, 900000)
print timeit.Timer("test_3()", setup=setup).repeat(3, 900000)
print timeit.Timer("test_4()", setup=setup).repeat(3, 900000)
print timeit.Timer("test_5()", setup=setup).repeat(3, 900000)
print timeit.Timer("test_6()", setup=setup).repeat(3, 900000)
print timeit.Timer("test_7()", setup=setup).repeat(3, 900000)

> [2.281613943830961, 2.2719342631547077, 2.261691106209631]
> [2.311480238815406, 2.318420542148333, 2.3552384305184493]
> [2.3824197456864304, 2.3457239951596485, 2.3353268829498646]
> [2.312442972404032, 2.318053102249902, 2.3054072168069872]
> [2.3482314132374853, 2.3403386400002475, 2.330108825844775]
> [2.424549090688892, 2.4346475296851438, 2.429691196530058]
> [2.3259756401716487, 2.333549212826732, 2.32049893822186] 
```

我对不同的重复进行了不同的测试。差异并不大，但在所有测试中，`zfill`解决方案是最快的。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-04-30T07:38:40.923

它也可以：

```
 h = 2
 m = 7
 s = 3
 print("%02d:%02d:%02d" % (h, m, s)) 
```

所以输出将是：“02:07:03”

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-05-05T01:25:07.533

另一种方法是使用带有条件检查长度的列表推导。下面是一个演示：

```
# input list of strings that we want to prepend zeros
In [71]: list_of_str = ["101010", "10101010", "11110", "0000"]

# prepend zeros to make each string to length 8, if length of string is less than 8
In [83]: ["0"*(8-len(s)) + s if len(s) < desired_len else s for s in list_of_str]
Out[83]: ['00101010', '10101010', '00011110', '00000000'] 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-07-10T05:05:37.110

我做了一个功能：

```
def PadNumber(number, n_pad, add_prefix=None):
    number_str = str(number)
    paded_number = number_str.zfill(n_pad)
    if add_prefix:
        paded_number = add_prefix+paded_number
    print(paded_number)

PadNumber(99, 4)
PadNumber(1011, 8, "b'")
PadNumber('7BEF', 6, "#") 
```

输出 ：

```
0099
b'00001011
#007BEF 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-05-06T22:02:55.587

您也可以重复“0”，将其添加到`str(n)`并获得最右边的宽度切片。快速而肮脏的小表情。

```
def pad_left(n, width, pad="0"):
    return ((pad * width) + str(n))[-width:] 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-02T00:36:19.053

如果您要填充一个整数，并同时限制有效数字（使用 f 个字符串）：

```
a = 4.432
>> 4.432
a = f'{a:04.1f}'
>> '04.4' 
```

`f'{a:04.1f}'`这转换为 1 个小数/（浮点）点，左填充数字直到总共 4 个字符。

# ruby - 跨网站和 gem 客户端处理用户身份验证的最佳方法

> ID：339018
> 
> 赞同：2
> 
> 时间：2008-12-03T22:44:44.743
> 
> 标签：ruby, authentication, configuration, settings

我们正在开发一项服务，该服务可以访问网站以获取统计信息和其他任务，但大部分使用将通过客户端 gem 和 rake 任务。处理这两个部分的身份验证的最佳方法是什么。

看起来 Fiveruns_tuneup、getexceptional、New Relic 和其他网站都有用户名和密码，但使用存储在 ./config/serviceName.yml 中的 API 密钥任何原因最好在配置中使用与用户/密码相反的 API 密钥（做他们使用密钥是因为密钥通常被检入 SCM 并在整个项目中使用，而我们的密钥不会被检入并且将是每个用户的设置）

GitHub 已将您的公钥放在 github 服务器上并使用它，但我认为 git 默认支持公钥/私钥。

最好保留一个 ./config/serviceName.yml 还是因为我们必须创建一个包含其他信息的子目录有 ./serviceName/config.yml？（不存储在 SCM 中的每个用户是否意味着最好将其全部保存在一个排除目录中？）

只是在开始实施之前寻找一些关于最佳实践的想法和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T05:08:17.227

I recommend that you use username/password combos for website accounts, and API keys for any web services. Here are the advantages of this technique:

1.  By linking API keys to an account, you could have many API keys for the same user. Perhaps this could be used for many remote web servers that consume this data service, or to perform unique tracking.
2.  Attaching API keys to an account also lets you keep the user's username and password uncompromised since an API key will not contain them. Many users use the same username and password on many services, so you are helping to protect them.
3.  You could limit access to portions of functionality for each API key, but give their username access to everything their account should have access to. Additionally, you can even give them the ability to limit how much access an API key might have.

Most of the major services (Yahoo! API, Flickr, Google API, etc) use accounts with a username and password to login to the web account, and API keys for integration points.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-11T15:12:38.363

当您可以提供帮助时，切勿使用用户/通行证。安全问题太可怕了。如果用户/密码泄露，您必须更改密码，否则他们可以访问您的整个帐户。

API 密钥更好，因为它们更容易更改，并且可以仅限于您需要使用 API 访问的部分（即，如果有人有您的密码，他们可以更改您的密码。如果他们只有 API，他们就不能钥匙）。

每个客户端使用不同的 API 密钥或安全令牌交换（例如 OAuth）是最好的解决方案，如果您在 API 上拥有的不仅仅是您的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T22:33:17.600

github 方法是在现有 git 实践的基础上进行引导，但这不是一个坏主意，因为大概每个用户都有自己的私钥来匹配中央机构中已发布的公共密钥。由于密钥代理已经提供了一种安全身份验证的方法，这似乎是一种非常安全的方法。公钥/私钥是一种经过深思熟虑的身份验证方案，不幸的是，它已被多次改造，但成功有限。

API 密钥的问题在于，任何获得 API 密钥副本的人都可以做任何授权的事情。将 API 密钥存储在项目中的某处会请求用户共享密钥。如果您将公钥与用户相关联，则可以基于每个用户向客户端授予权限，并且适当的密钥代理方法建议这些不会存储在任何地方的 SCM 中。

我不确定我是否遵循 config/serviceName.yml 或 serviceName/config.yml 之间的区别。如果您将公钥/私钥作为客户端的身份验证方法，这似乎并不相关。

# exchange-server - 通过 Exchange 以编程方式将约会添加到日历

> ID：339027
> 
> 赞同：1
> 
> 时间：2008-12-03T22:48:25.797
> 
> 标签：exchange-server

如何通过 Exchange 2003 信息存储以编程方式将项目添加到用户日历。我需要知道接口或连接器才能研究。我拥有完整的 Exchange 权限，并且希望能够在没有最终用户交互或登录的情况下自动分配约会。我知道这是可能的，因为我有一个 3rd 方企业应用程序可以做到这一点。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T23:13:05.123

有[CDO（协作数据对象）](http://www.codeproject.com/KB/dotnet/Dot_Net_2005.aspx)和 Exchange Web 服务

# c# - 从 HTML LINK 标签中提取 RSS/ATOM URL

> ID：339035
> 
> 赞同：0
> 
> 时间：2008-12-03T22:50:34.560
> 
> 标签：c#, asp.net

从 HTML LINK 标签中提取 RSS/ATOM URL 的最佳方法是什么？我知道正则表达式不是做到这一点的最佳方法，所以我想知道我有什么替代方案。当然，在将 HTML 加载到字符串后使用 .Contains 进行某种可怕的字符串处理也不是最佳的。有人对此有一个不错的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-03T23:31:07.567

也许[Html Agility Pack](http://www.codeplex.com/htmlagilitypack/Release/ProjectReleases.aspx?ReleaseId=272)可以帮助你。没用过。但听到好的一面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T23:33:02.727

使用 XPath。

```
1\. Convert an HTML into an XHTML with Tidy
2\. With the XHTML, use XPath to search for the link
    /html/head/link[@type='application/rss+xml'] 
```

# c# - LINQ To SQL：使用一个查询删除实体（按 ID）

> ID：339041
> 
> 赞同：19
> 
> 时间：2008-12-03T22:52:54.320
> 
> 标签：c#, sql, linq

我使用 LINQ To SQL 已经有一段时间了，在从数据库中删除实体时，我总是调用表的 .DeleteOnSubmit 并传入实体。有时我发现自己写了类似的东西：

```
db.Users.DeleteOnSubmit(db.Users.Where(c => c.ID == xyz).Select(c => c).Single()); 
```

这当然会导致两个查询。一个获取符合条件的实体，然后另一个删除它。通常我有我需要删除的记录的 ID，我想知道是否有更直接的方法可以仅通过 ID 从表中删除一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T23:37:44.300

通过附加部分对象并将其删除，无需手动工具 SQL 即可执行此操作：

```
var myEntity = new MyEntityType { MyEntityId = xxx };
Context.MyEntityTypeTable.Attach(myEntity, false);
Context.MyEntityTypeTable.DeleteOnSubmit(myEntity);
Context.SubmitChanges(); 
```

简单的。您甚至可以将其编写为扩展方法，并使用动态对象类型来表示键，并使用反射来计算键属性，我将把它作为一个有趣的练习留给读者。例如实现 Context.Delete(new { MyEntityId = xxx });

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T00:04:14.380

这是一个解决方案...

```
public static void DeleteByPK<TSource, TPK>(TPK pk, DataContext dc)
  where TSource : class
{
  Table<TSource> table = dc.GetTable<TSource>();
  TableDef tableDef = GetTableDef<TSource>();

  dc.ExecuteCommand("DELETE FROM [" + tableDef.TableName
    + "] WHERE [" = tableDef.PKFieldName + "] = {0}", pk);
} 
```

这不是我的代码！请参阅解释 - [http://msmvps.com/blogs/omar/archive/2008/10/30/linq-to-sql-delete-an-entity-using-primary-key-only.aspx](http://msmvps.com/blogs/omar/archive/2008/10/30/linq-to-sql-delete-an-entity-using-primary-key-only.aspx)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T23:14:41.157

我不相信 Linq to Sql 可以原生地做到这一点，尽管编写一个存储过程会给你你想要的东西，语法如下：

```
db.spDeleteUserById(id); 
```

这将需要为每个表编写一个存储过程，但它是相当微不足道的 SQL 量。

* * *

查看[这篇博](http://www.aneyfamily.com/terryandann/post/2008/04/Batch-Updates-and-Deletes-with-LINQ-to-SQL.aspx)文，作者在其中创建了一个扩展方法，可以生成自己的删除语句。您也许可以采用此概念并使用它运行以创建不需要选择的删除例程。不利的一面是，您最终可能会得到一个特定于您自己架构的扩展方法。

我知道您希望将您的逻辑排除在数据库层之外，但在这种情况下，我认为使用存储过程路径会简单得多。它不会受到紧密耦合的数据访问逻辑的问题的影响，因为通过 id 删除一行不太可能需要重构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-11-04T19:00:05.107

我知道这个问题很老，但这是一个更新和（IMO）更好的解决方案。
当我遇到[PLINQO](http://www.codesmithtools.com/product/frameworks#plinqo)时，我试图完成同样的事情。非常好的一组 LINQ 扩展。[本页](http://www.codesmithtools.com/product/frameworks/plinqo/tour/performance)描述了如何使用 PLINQO 的扩展方法执行删除，这些方法只需要 1 次往返 db 服务器。
缺点是它需要[Codesmith](http://www.codesmithtools.com/)运行，这有点贵。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-08T00:02:21.107

我正在使用以下扩展方法，用法是：

```
context.Customers.DeleteEntity(c => c.CustomerId, 12);

public static class EntityExtensions
{
    public static EntityKey CreateEntityKey<T, TId>(this ObjectSet<T> entitySet, Expression<Func<T, TId>> entityKey, TId id)
        where T : class
    {
        var qEntitySet = entitySet.Context.DefaultContainerName + "." + entitySet.EntitySet.Name;
        var keyName = LinqHelper.PropertyName(entityKey);

        return new EntityKey(qEntitySet, keyName, id);
    }

    public static void DeleteEntity<T, TId>(this ObjectSet<T> entitySet, Expression<Func<T, TId>> entityKey, TId id) 
        where T : EntityObject, new()
    {
        var key = CreateEntityKey(entitySet, entityKey, id);

        var entityInstance = new T {EntityKey = key};

        var propertyName = LinqHelper.PropertyName(entityKey);
        var property = typeof (T).GetProperty(propertyName);
        if (property == null)
            throw new Exception("Property name " + propertyName + " does not exist on " + typeof(T).Name);
        property.SetValue(entityInstance, id, null);

        entitySet.Attach(entityInstance);
        entitySet.DeleteObject(entityInstance);
    } 
```

# c# - glProgramStringARB 导致 GL_INVALID_OPERATION....或片段程序帮助

> ID：339042
> 
> 赞同：0
> 
> 时间：2008-12-03T22:53:07.190
> 
> 标签：c#, opengl, shader

我正在尝试编写一个片段程序，该程序将采用纹理并将纹素固定在两个值之间。也就是说，如果最小值为 0.2，最大值为 0.6，则小于 0.2 的任何 texel 将变为 0，大于 0.6 的任何 texel 将变为 1.0，并且介于两者之间的所有值都将从 0 映射到 1.0。

我对 glProgramStringARB 的调用导致了 GL_INVALID_OPERATION。我似乎无法弄清楚为什么会这样。请帮忙。

这是我第一次尝试编写着色器，所以我不完全确定我在做什么。这是我的代码：

```
String str = 
   "!!ARBfp1.0\n"+            
   "TEMP R0;\n"+
   "MOV R0.x, fragment.texcoord[1];\n"+
   "ADD R0.w, fragment.texcoord[2].x, -R0.x;\n"+
   "TEX R0.xyz, fragment.texcoord[0], texture[0], 2D;\n"+
   "RCP R0.w, R0.w;\n"+
   "ADD R0.xyz, R0, -fragment.texcoord[1].x;\n"+
   "MUL_SAT result.color.xyz, R0, R0.w;\n"+
   "END\n";

int count = str.Length;

Gl.glEnable(Gl.GL_FRAGMENT_PROGRAM_ARB);
Gl.glGenProgramsARB(1, out mFragProg);            
Gl.glBindProgramARB(Gl.GL_FRAGMENT_PROGRAM_ARB, mFragProg);
Gl.glProgramStringARB(Gl.GL_FRAGMENT_PROGRAM_ARB,  Gl.GL_PROGRAM_FORMAT_ASCII_ARB, count, str);
GetGLError("glProgramStringARB");
Gl.glDisable(Gl.GL_FRAGMENT_PROGRAM_ARB); 
```

然后使用它，我执行以下操作：

```
Gl.glEnable(Gl.GL_FRAGMENT_PROGRAM_ARB);
Gl.glBindProgramARB(Gl.GL_FRAGMENT_PROGRAM_ARB, mFragProg);
float max = (mMiddle + (mRange / 2.0f))/65535.0f;
float min = (mMiddle - (mRange / 2.0f))/65535.0f;
Gl.glMultiTexCoord1f(Gl.GL_TEXTURE1_ARB, min);
Gl.glMultiTexCoord1f(Gl.GL_TEXTURE2_ARB, max);
GetGLError("Enable Program for Drawing");

/* 
 * Drawing Code
 */

Gl.glDisable(Gl.GL_FRAGMENT_PROGRAM_ARB); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T10:27:04.000

我还没有真正编写任何着色器，但着色器编译器可能无法识别新行？你试过放“\n\r”吗？

编辑：

您可能会问自己的另一个问题是您使用的是什么语言？字符串是 UNICODE，即 16 位/字符吗？我刚刚注意到您传递给 glProgramStringARB() 的格式设置为 ASCII。如果字符串真的是 UNICODE，那么就会出现问题。

例如，JAVA 和 C# 字符串采用 UNICODE。不是ASCII。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T09:59:01.857

首先：我对 ARB_fragment_program 了解不多，所以我在这里部分猜测。

您最好的选择是获取错误字符串 (glGetString(GL_PROGRAM_ERROR_STRING_ARB)) 并查看它告诉您的内容。

查看着色器后，您似乎在第 3 行和第 7 行中使用了错误数量的组件（可能还有更多）。例如，我认为您不能将 4 分量向量 (fragment.texcoord[1]) 分配给标量字段 (R0.x)。

# sql - 加入前未过滤数据

> ID：339044
> 
> 赞同：2
> 
> 时间：2008-12-03T22:54:42.883
> 
> 标签：sql, sql-server, sql-server-2005, tsql

来自同事的一个谜题，我无法弄清楚......

```
update  btd.dbo.tblpayroll
set     empname = ( select  b.Legal_Name
                    from    ( SELECT    Legal_Name,
                                        Employee_ID
                              FROM      Com.dbo.Workers
                              WHERE     isnumeric(Employee_ID) = 1
                            ) b
                    where   b.Employee_ID = empnum
                            and b.Legal_name is not NULL
                  )
where   empname is NULL 
```

* * *

消息 245，级别 16，状态 1，行 1 将 varchar 值“N0007”转换为数据类型 int 时转换失败。表别名 b 实际上是一个视图。

值“N0007”在 Workers 表中。我不明白为什么它没有从正在加入的结果中过滤出来。

编辑：

事实上，别名确实返回了正确的行 - 所以 isNumeric 正在完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T23:10:27.407

我怀疑优化器试图在内部选择之前应用外部选择的 where 子句。大概它认为它能够对 Employee_ID 进行索引查找，从而在这种情况下实现更快的查询。尝试：

```
update  btd.dbo.tblpayroll
set     empname = ( select Legal_Name
                    from Com.dbo.Workers
                    where  isnumeric(Employee_ID) = 1
                           and convert(varchar,Employee_ID)
                             = convert(varchar,empnum) 
                           and Legal_name is not NULL)
where   empname is NULL 
```

将它们全部转换为 varchar 应该会处理好它。我不认为它比你最初想要的效率低得多，因为如果先完成非数字，无论如何都会强制进行表扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T23:10:36.237

也许N被认为是货币符号？您可以尝试将 IsNumeric 替换为

```
LIKE REPLICATE('[0-9]',/*length of Employee_ID*/) 
```

要不就

```
LIKE '[0-9]%' 
```

如果字母不能在中间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T23:43:50.287

`ISNUMERIC()`众所周知，您正在尝试做的事情是不可靠的。您将需要[一个替代方案，我一直在这里要求](https://stackoverflow.com/questions/312054/efficient-isnumeric-replacements-on-sql-server)这样[一个](http://classicasp.aspfaq.com/general/what-is-wrong-with-isnumeric.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T21:46:36.653

显而易见的事情是强制比较的顺序，也许通过从只有数字 Employee_ID 的视图中获取名称，而不是完整的 Workers 表。

# perl - 为什么我的简单 fastCGI Perl 脚本会失败？

> ID：339045
> 
> 赞同：4
> 
> 时间：2008-12-03T22:55:48.137
> 
> 标签：perl, fastcgi, movabletype, mod-fcgid

我不属于 Perl 世界，所以其中一些对我来说是新的。我正在运行安装了 apache2 和 mod_fcgid 软件包的 Ubuntu Hardy LTS。我想让 MT4 在 fcgid 而不是 mod-cgi 下运行（它似乎可以在普通的旧 CGI 下运行）。

我似乎连一个简单的 Perl 脚本都无法在 fcgid 下运行。我创建了一个简单的“Hello World”应用程序，并包含[上一个问题](https://stackoverflow.com/questions/202578/perl-modfcgid-how-can-i-be-sure-its-working)的代码来测试 FCGI 是否正在运行。

我将脚本命名为 HelloWorld.fcgi（当前 fcgid 设置为仅处理 .fcgi 文件）。代码：

```
#!/usr/bin/perl

use FCGI;

print "Content-type: text/html\n\n";
print "Hello world.\n\n";
my $request = FCGI::Request();
if ( $request->IsFastCGI ) { 
    print "we're running under FastCGI!\n";
} else { 
    print "plain old boring CGI\n";
} 
```

从命令行运行时，它会打印“plain old bored ...”当通过对 apache 的 http 请求调用时，我收到 500 Internal Server 错误，并且脚本的输出会打印到 Apache 错误日志中：

```
Content-type: text/html

Hello world.

we're running under FastCGI!
[Wed Dec 03 22:26:19 2008] [warn] (104)Connection reset by peer: mod_fcgid: read data from fastcgi server error.
[Wed Dec 03 22:26:19 2008] [error] [client 70.23.221.171] Premature end of script headers: HelloWorld.fcgi
[Wed Dec 03 22:26:25 2008] [notice] mod_fcgid: process /www/mt/HelloWorld.fcgi(14189) exit(communication error), terminated by calling exit(), return code: 0 
```

当我运行相同代码的 .cgi 版本时，它运行良好。知道为什么脚本的输出会进入错误日志吗？Apache 配置是默认的 mod_fcgid 配置加上，在 VirtualHost 指令中：

```
 ServerName test1.example.com
  DocumentRoot /www/example

  <Directory /www/example>
    AllowOverride None
    AddHandler cgi-script .cgi
    AddHandler fcgid-script .fcgi
    Options +ExecCGI +Includes +FollowSymLinks
  </Directory> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-24T22:16:13.727

问题是“Content-Type”标头是在请求循环之外发送的。您必须为每个请求打印“Content-Type”标头。如果你搬家

> print "内容类型：text/html\n\n";

到请求循环的顶部，它应该可以解决问题。

此外，您需要遍历请求，否则您将得不到任何好处，因此请按照第一张海报的示例：

```
my $request = FCGI::Request();
while($request->Accept() >= 0) {
  print("Content-type: text/html\n\n");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T23:13:04.967

我使用 CGI::Fast 比 FCGI 多，但我认为想法是一样的。快速 cgi 的目标是加载程序一次，并为每个请求循环迭代。

FCGI 的手册页说：

```
use FCGI;

my $count = 0;
my $request = FCGI::Request();

while($request->Accept() >= 0) {
    print("Content-type: text/html\r\n\r\n", ++$count);
} 
```

这意味着，您必须先**`Accept`**提出请求，然后才能将任何内容打印回浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-24T15:46:13.450

Movable Type 将 CGI::Fast 用于 FastCGI。[如mat](https://stackoverflow.com/users/42083/mat)所述，典型的 FastCGI 脚本循环运行。使用 CGI::Fast 的循环如下所示：

```
#!/usr/bin/perl

use strict;
use CGI::Fast;

my $count = 0;
while (my $q = CGI::Fast->new) {
    print("Content-Type: text/plain\n\n");
    print("Process ID: $$; Count is: " . ++$count);
} 
```

我在安装了 FCGI 和 CGI​​::Fast 模块的服务器上测试了这个脚本，并按照您的预期计算增量。如果进程 id 发生变化，count 将返回 1，然后在该进程中递增。当然，每个进程都有自己的变量空间。

对于 MT，启用 FastCGI 只需将 cgi 脚本重命名（或符号链接）为“fcgi”（或将“cgi”脚本的处理程序设置为 fcgid，但这不适用于对 FastCGI 不友好的 mt-xmlrpc.cgi然而）。您还需要在`mt-config.cgi`文件中添加一些指令，以便它知道新的脚本名称。像这样：

```
AdminScript mt.fcgi
CommentsScript mt-comments.fcgi 
```

等等。更多关于 FastCGI 和 Movable Type 的文档可以在[Movingtype.org](http://movabletype.org/documentation/administrator/maintenance/fastcgi.html)上找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-25T00:45:01.787

无论如何，根据您服务器的错误日志，看起来 FCGI 正在工作，并且被正确调用，但是您的脚本只是没有在循环中运行，等待下一个请求出现。所以你的测试脚本确实完成了任务——报告是否配置了 FastCGI。所以现在您应该能够重新配置 MT 以使用 FastCGI。

# python - 你如何在python中解压缩非常大的文件？

> ID：339053
> 
> 赞同：20
> 
> 时间：2008-12-03T23:00:54.087
> 
> 标签：python, compression, zip, unzip

使用 python 2.4 和内置`ZipFile`库，我无法读取非常大的 zip 文件（大于 1 或 2 GB），因为它想将未压缩文件的全部内容存储在内存中。是否有另一种方法可以做到这一点（使用第三方库或其他黑客），或者我必须“掏空”并以这种方式解压缩（显然这不是跨平台的）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-04T03:08:28.377

下面是大文件解压的概要。

```
import zipfile
import zlib
import os

src = open( doc, "rb" )
zf = zipfile.ZipFile( src )
for m in  zf.infolist():

    # Examine the header
    print m.filename, m.header_offset, m.compress_size, repr(m.extra), repr(m.comment)
    src.seek( m.header_offset )
    src.read( 30 ) # Good to use struct to unpack this.
    nm= src.read( len(m.filename) )
    if len(m.extra) > 0: ex= src.read( len(m.extra) )
    if len(m.comment) > 0: cm= src.read( len(m.comment) ) 

    # Build a decompression object
    decomp= zlib.decompressobj(-15)

    # This can be done with a loop reading blocks
    out= open( m.filename, "wb" )
    result= decomp.decompress( src.read( m.compress_size ) )
    out.write( result )
    result = decomp.flush()
    out.write( result )
    # end of the loop
    out.close()

zf.close()
src.close() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-27T13:41:54.547

从 Python 2.6 开始，您可以使用[`ZipFile.open()`](https://docs.python.org/2/library/zipfile.html#zipfile.ZipFile.open)打开文件的文件句柄，并将内容有效地复制到您选择的目标文件中：

```
import errno
import os
import shutil
import zipfile

TARGETDIR = '/foo/bar/baz'

with open(doc, "rb") as zipsrc:
    zfile = zipfile.ZipFile(zipsrc)
    for member in zfile.infolist():
       target_path = os.path.join(TARGETDIR, member.filename)
       if target_path.endswith('/'):  # folder entry, create
           try:
               os.makedirs(target_path)
           except (OSError, IOError) as err:
               # Windows may complain if the folders already exist
               if err.errno != errno.EEXIST:
                   raise
           continue
       with open(target_path, 'wb') as outfile, zfile.open(member) as infile:
           shutil.copyfileobj(infile, outfile) 
```

这用于[`shutil.copyfileobj()`](https://docs.python.org/2/library/shutil.html#shutil.copyfileobj)有效地从打开的 zipfile 对象中读取数据，并将其复制到输出文件中。

# c# - 部分方法和覆盖基类中的虚拟方法之间有多大的性能差异？

> ID：339054
> 
> 赞同：1
> 
> 时间：2008-12-03T23:01:20.920
> 
> 标签：c#, oop

我正在更新我的代码生成器，并且可以选择将方法存根实现为基类中的虚拟方法或生成代码中的部分方法。两者之间有性能差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T23:21:00.987

如果您*实现*部分方法，那么我预计不会有明显的区别。C#总是用来`callvirt`调用实例方法，即使它们不是虚拟的，所以不会有太大的变化。

如果您*不*实现部分方法，则调用本身将被删除-因此永远不会准备堆栈等。这将*无限*快，这就是为什么生成的代码可以包含数量可笑的部分方法的原因存根：如果你不使用它们，它们就不存在。

使用部分方法的更大原因很简单，因为您不必对对象进行子类化。您不能在同一类中声明虚拟方法的“抽象”/“虚拟”和“覆盖”部分（即使是部分的）。部分方法解决了这个问题，以及广告扩展点的问题（无需使用反射）。

非常适合代码生成工具；-p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T23:19:34.657

可能存在细微差别，但应该可以忽略不计，除非在循环中重复调用该方法。

部分方法只是语法糖，允许跨多个文件拆分一个类。

编译后，它们与所有方法都在一个文件中完全相同。换句话说，您可能会看到使用部分方法的唯一“减速”是编译时间稍长:)

编辑：正如下面的答案所说，如果在编译过程中找不到它们，它们甚至都不在那里。

# asp.net - 允许危险的查询字符串

> ID：339056
> 
> 赞同：3
> 
> 时间：2008-12-03T23:02:04.630
> 
> 标签：asp.net

我需要能够允许包含诸如“<”和“>”之类的字符的查询字符串。但是，将 id=mi<ke 之类的内容放入 URL 将输出错误页面：

*从客户端 (id="mi<ke") 检测到潜在危险的 Request.QueryString 值。*

如果我首先对 url 进行 url 编码（以创建 id=mi%3Cke），我仍然会收到相同的错误。我可以通过将 ValidateRequest="false" 放入 Page 指令来解决这个问题，但如果可能的话，我宁愿不这样做。

那么无论如何允许在查询字符串中使用这些字符而不关闭ValidateRequest？

编辑：我想让用户也能够手动输入网址，因此以某种方式对它们进行编码可能不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T23:16:37.940

我遇到了类似的问题。我选择对查询字符串进行 base64 编码来解决它。使用

```
System.Text.ASCIIEncoding.ASCII.GetBytes 
```

将字符串作为字节获取，然后

```
System.Convert.ToBase64String 
```

把它变成一个“安全”的字符串。

要取回它，请使用：

```
System.Convert.FromBase64String 
```

进而：

```
System.Text.ASCIIEncoding.ASCII.GetString 
```

反转流动的极性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T23:21:08.507

有点谷歌搜索，我不这么认为。异常似乎发生在您的代码甚至运行之前，因此您无法捕获异常。我喜欢 base64 或其他想法的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T23:09:46.563

您可以加密您的 id 值来解决此问题，而不是 URL 编码。然后，您可能需要对加密字符串进行 URL 编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T23:20:11.647

我认为你有一些选择。您可以按照您的指示进行操作并关闭 ValidateRequest。然后，您需要自己处理任何输入清理。或者你可以只允许某些字符，或者让用户使用元语言来输入它们，即，而不是 '<' 使用 '[' 并将 '>' 替换为 ']' 或者在提交自己之前重新编码这些元语言（或 Base64）。自己进行重新编码需要 Javascript 可用于使用禁止字符的查询。您可能仍需要进行输入清理。

快速了解 jquery 实现：

```
 $(document).ready( function() {
    $('form').bind('submit', function() {
        $('form' > 'input[type=text]').each( function(i) {
           if (this.value) {
              this.value = encode(this.value);
           }
        });
    });
 });

 function encode(value) {
    return ...suitable encoding...
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-30T10:20:12.183

我正在处理同样的问题，但是我偶然发现了这种 javascript 编码方法：

```
<script type="text/javascript">  

 var unencodedText = "This is my text that contains whitespaces and characters like  and Ø";  
 var encodedText = "";  
 var decodedText = "";  
 alert('unencodedText: ' + unencodedText);  

 //To encode whitespaces and the 'Ø' character - use encodeURI  
 encodedText = encodeURI(unencodedText);  
 //We see that whitespaces and 'Ø' are encoded, but the '' is still there:  
 alert('encodedText: ' + encodedText);  

 //If we decode it we should get our unencodedText back  
 decodedText = decodeURI(encodedText);  
 alert('decodedText: ' + decodedText);  

 //To also encode the '' we use the encodeURIComponent  
 encodedText = encodeURIComponent(unencodedText);  
 //Now all the characters have been encoded:  
 alert('encodedText: ' + encodedText);  

 //To get our unencodedText back we now need to use the decodeURIComponent  
 decodedText = decodeURIComponent(encodedText);  
 alert('decodedText: ' + decodedText);  

</script> 
```

如果您正在处理更复杂的符号，那么您可能希望将 encodeURIComponent 用于 url。

我从[这个链接偷了这颗宝石。](http://roneiv.wordpress.com/tag/windowopen/)

# c# - C#/Java 可移植性

> ID：339057
> 
> 赞同：3
> 
> 时间：2008-12-03T23:02:07.827
> 
> 标签：c#, java, portability

您会选择哪些主流框架、模式和工具来并行开发两个项目，一个使用 C#，一个使用 Java，以最大限度地减少总工作量。（忽略可互换或等效工具的明显案例，如 SCC、单元测试等。还假设通用广泛的 RDBMS 支持。）

“主流”意味着市场一般不会忽视结果，因为它使用了他们从未听说过的未经测试的东西，或者需要神秘的技能来实施和支持它。

假设一个广泛适用的战术业务应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T23:56:46.953

[db4o](http://www.db4o.com/)使用一种名为[sharpen](http://developer.db4o.com/blogs/product_news/archive/2008/05/21/sharpen-your-java-app-now-java-to-c-converter-released-as-free-software.aspx)的内部工具来维护一个源存储库（我认为是Java）并将其自动转换为C#。

正如他们在博客文章中所说：

> 在你开始梦想之前：锐化不是“魔杖”。不要指望给它一个任意的 Java 应用程序并在按下按钮时接收一个正在运行的 .NET 版本。翻译过程需要在 Java 方面做出一些设计妥协，部分 .NET 代码仍然需要手工制作并集成到转换后的源代码中。

然而，它仍然是一个很酷的项目。另外，我认为它最适合新项目。在 GPL 下发布，但您必须在[developer.db4o.com](http://developer.db4o.com)注册才能下载它。

* * *

编辑：[这](http://developer.db4o.com/blogs/product_news/archive/2008/05/20/smart-java-to-c-conversion-for-the-masses-with-sharpen.aspx)也是一个示例博客文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T23:23:54.133

这很难。虽然有一些很好的库可以移植到这两个平台上，但在框架方面，似乎没有太多共同点。

我在这里得到的关于 SO 的偏差是，在 .NET 世界中与公司路线没有太大偏差。就好像 Java 中的每个人都只使用 EJB、JSF 和 JNDI，而从未提出过 Guice、Struts 或 Hibernate。

如果可以的话，我会采取不同的策略：与其并行开发相同的系统，不如开发一个系统，然后在其周围放置一个包装器以支持其他平台。这样做的缺点是其他平台注定要落后于主要平台，例如 Mono。这个缺点也适用于某些库本身的端口，例如 Spring.net 或 Guice.net。

或者你可以发明你自己的[芥末](http://www.joelonsoftware.com/items/2006/09/01b.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T00:23:50.143

我读过有关[Mainsoft](http://www.mainsoft.com/)应用程序的好东西，尽管我自己从来不用使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T14:02:10.497

为什么要并行开发 Java 和 C#？

你可以只使用 Java 和 J#。唯一的问题是，J# 停留在 Java 1.4 级别，因此您有两个选择：

*   不要使用这些花哨的东西，比如枚举、泛型、for-each
*   使用retroweaver之类的工具将1.5转换回1.4

我刚刚完成了一个中型应用程序（大约 80 个类/30.000 行），它以这种方式在 Java 和 .NET 上运行良好。

据我所知，J# 编译的 Java 类是 .NET 字节码，与任何其他 .NET 字节码一样，可以在 C# 中使用。但是您不必对核心类进行两次编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T17:49:56.453

根据项目的规模，我会建议以下技术和方法：

1.  由于 Java 和 C# 中的 UI 如此不同，我将为这两个项目构建 UI 的 XML 表示......然后决定两个选项之一 a) 两个项目的 UI 类源的静态和单代通用 XML（这可能以某种方式与您的构建过程集成，以便整个过程自动启动） b）在两种情况下动态生成 UI（可能更难实现）

2.  为了使两个项目的架构相似，我将使用 Spring 和 Spring.NET

3.  还要画出尽可能多的相似之处，我会决定使用 NHibernate 和 Hibernate

# c# - 在 C# 中使用 IDisposable 与析构函数有什么区别？

> ID：339063
> 
> 赞同：113
> 
> 时间：2008-12-03T23:04:22.083
> 
> 标签：c#, .net, dispose, destructor

我什么时候在类上实现 IDispose 而不是析构函数？我读[了这篇文章](http://www.dotnetspider.com/resources/1382-Understanding-IDisposable-pattern.aspx)，但我仍然没有抓住重点。

我的假设是，如果我在一个对象上实现 IDispose，我可以显式地“破坏”它，而不是等待垃圾收集器去做。它是否正确？

这是否意味着我应该始终明确地在对象上调用 Dispose？有哪些常见的例子？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2008-12-03T23:09:46.173

终结器（又名析构函数）是垃圾回收 (GC) 的一部分 - 它何时（甚至是否）发生是不确定的，因为 GC 主要是由于内存压力（即需要更多空间）而发生的。终结器通常仅用于清理*非托管*资源，因为托管资源将有自己的收集/处置。

因此`IDisposable`用于*确定性*地清理对象，即现在。它不收集对象的内存（仍然属于 GC） - 但用于例如关闭文件、数据库连接等。

以前有很多关于此的主题：

*   [确定性终结](https://stackoverflow.com/questions/188473/how-do-you-manage-deterministic-finalization-in-c)
*   [处置对象](https://stackoverflow.com/questions/245856/when-should-i-dispose-my-objects-in-net)
*   [使用块](https://stackoverflow.com/questions/212198/what-is-the-c-using-block-and-why-should-i-use-it)
*   [资源](https://stackoverflow.com/questions/117135/resources-that-have-to-be-manually-cleaned-up-in-c)

`IDisposable`最后，请注意对象也有终结器的情况并不少见。在这种情况下，`Dispose()`通常调用`GC.SuppressFinalize(this)`，这意味着 GC 不运行终结器 - 它只是将内存扔掉（便宜得多）。如果您忘记`Dispose()`了对象，终结器仍然会运行。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-12-03T23:10:59.667

该`Finalize()`方法的作用是确保 .NET 对象**在垃圾收集时**可以清理非托管资源。但是，应该尽快释放数据库连接或文件处理程序等对象，而不是依赖垃圾收集。为此，您应该实现接口，并在方法`IDisposable`中释放资源。`Dispose()`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-03T23:14:19.067

[MSDN](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)上有一个很好的描述：

> 该接口的主要用途是**释放非托管资源**。当不再使用该对象时，垃圾收集器**会自动释放分配给托管对象的内存。**但是，**无法预测何时会发生垃圾收集**。此外，垃圾收集器**不了解非托管资源** ，例如窗口句柄或**打开的文件**和流。
> 
> 使用此接口的 Dispose 方法与垃圾收集器一起**显式释放** 非托管资源。当不再需要对象时，对象的 **使用者可以调用此方法。**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-12-04T00:48:06.413

唯一应该在 C# 析构函数中的是这一行：

```
Dispose(False); 
```

就是这样。这种方法不应该有其他任何东西。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-09-09T15:21:23.297

你是否应该总是打电话`Dispose`的问题通常是一场激烈的辩论。请参阅[此](http://blogs.msdn.com/kimhamil/archive/2008/11/05/when-to-call-dispose.aspx)博客，了解 .NET 社区中受人尊敬的个人的有趣观点。

就个人而言，我认为 Jeffrey Richter 认为呼叫`Dispose`不是强制性的立场是非常薄弱的​​。他举了两个例子来证明他的观点。

在第一个示例中，他说`Dispose`在主流场景中调用 Windows 窗体控件是乏味且不必要的。但是，他没有提到`Dispose`实际上是在那些主流场景中由控制容器自动调用的。

在第二个示例中，他指出开发人员可能错误地认为`IAsyncResult.WaitHandle`应该积极处置实例 from，而没有意识到该属性会延迟初始化等待句柄，从而导致不必要的性能损失。但是，这个例子的问题在于它`IAsyncResult`本身并没有遵守微软自己发布的处理`IDisposable`对象的指南。也就是说，如果一个类拥有对某个`IDisposable`类型的引用，那么该类本身应该实现`IDisposable`。如果`IAsyncResult`遵循该规则，那么它自己的`Dispose`方法可以决定哪些组成成员需要处置。

因此，除非有人有更令人信服的论点，否则我将留在“总是调用 Dispose”阵营，并理解将有一些边缘案例主要是由于糟糕的设计选择而出现的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-03T23:19:49.273

这真的很简单。我知道它已被回答，但我会再试一次，但会尽量保持简单。

通常不应该使用析构函数。它只是运行.net 想要它运行。它只会在垃圾回收周期后运行。它可能永远不会在您的应用程序的生命周期中真正运行。出于这个原因，您不应该将任何代码放入“必须”运行的析构函数中。您也不能依赖类中的任何现有对象在运行时存在（它们可能已经被清理，因为不保证析构函数的运行顺序）。

只要您有一个创建需要清理的资源（即文件和图形句柄）的对象，就应该使用 IDisposible。事实上，许多人认为，由于上面列出的原因，你放入析构函数中的任何东西都应该放入 IDisposable。

大多数类在执行终结器时都会调用 dispose ，但这只是作为安全防护，永远不应依赖。完成后，您应该明确处置任何实现 IDisposable 的东西。如果你确实实现了 IDisposable，你应该在终结器中调用 dispose。有关示例，请参见[http://msdn.microsoft.com/en-us/library/system.idisposable.aspx 。](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-09T14:57:53.850

这是另一篇很好的文章，它清除了 IDisposable、GC 和 dispose 周围的一些迷雾。

[Chris Lyons WebLog 揭秘处置](http://blogs.msdn.com/clyon/archive/2004/09/21/232445.aspx)

# vsto - VSTO“值不在预期范围内。”

> ID：339088
> 
> 赞同：1
> 
> 时间：2008-12-03T23:11:45.140
> 
> 标签：vsto, build-error, vs-error

我在 VS 中编译我的 VSTO（Visual Studio Tools for Office）项目时出错。

它说**“价值不在预期范围内”。**和**“安装过程中出现错误”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T23:13:38.757

明白了。我的项目**路径****太深了。**

**Ans:**将它移动到上面的几个文件夹*（在 Windows Explorer 文件夹树中）*并尝试**重新构建**/重新运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-30T21:17:13.357

> 明白了。该项目的**路径****太深了。**
> 
> 将项目移动到上面的几个文件夹（在 Windows 资源管理器文件夹树中）并尝试**重新构建**/重新运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T16:19:11.537

在我捆绑安装文件之前，我遇到了同样的`vsto`问题`vsto`。

发布您的应用程序并安装设置，问题就消失了。

发布 =>*项目属性 / 发布 / 选择文件夹路径 / 立即发布*

# iphone - iPhone SDK能否获取当前连接的Wi-Fi SSID？

> ID：339089
> 
> 赞同：13
> 
> 时间：2008-12-03T23:12:21.893
> 
> 标签：iphone, ios, wifi

在 iPhone SDK 中，我没有看到`SCDynamicStore`在 Mac OS X 上使用相同的方法来获取无线网络当前连接的 SSID 名称不可用。

有没有办法获取 iPhone 当前连接的 SSID 名称？

我看到一些应用程序可以做到这一点（其中一个[是 AT&T 的 Easy Wi-Fi](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=296273148&mt=8)），但我在 iPhone SDK 文档中找不到它是如何完成的。私有或取消发布方法作为概念证明是可以接受的（尽管我知道这可能不会进入 AppStore）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T10:29:57.657

现在可以通过[Captive Network API](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)实现（iOS 4.1+） 。

在这个类似的问题上查看[如何使用它的示例](https://stackoverflow.com/questions/5198716/iphone-get-ssid-without-private-library)。

**这不是私有 API。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-17T21:15:13.247

在四处挖掘之后，我找到了这个问题的答案。Preferences 框架中有未发布的 API。有关此示例，可以查看托管在 Google Code 上的[Stumbler 代码。](http://code.google.com/p/iphone-wireless/source/browse/trunk/Stumbler/MSNetworksManager.m)

我向 Apple 提交了一份雷达（#6407431/ [OpenRadar 版本](http://openradar.appspot.com/radar?id=306)），该雷达被标记为 #5814810 的副本）。如果您希望得到官方支持，请同时在[bugreport.apple.com](http://bugreport.apple.com)上提交一份雷达文件。

更新：上面的 Stumbler 代码适用于 1.x 版本的 iPhone OS SDK。对于 iPhone OS 2.0 及更高版本，开发人员将不得不查看 PrivateFrameworks/Apple80211.Framework 以及所有暗示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-28T15:23:32.920

试试这个代码，

```
#import <SystemConfiguration/CaptiveNetwork.h>

CFArrayRef myArray = CNCopySupportedInterfaces();
CFDictionaryRef myDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));
NSDictionary *ssidList = (__bridge NSDictionary*)myDict;
NSString *SSID = [ssidList valueForKey:@"SSID"]; 
```

# sql-server - 如何摆脱 .. Replace(Replace(Replace(Replace(Replace( ...?

> ID：339100
> 
> 赞同：2
> 
> 时间：2008-12-03T23:15:04.760
> 
> 标签：sql-server, sql-server-2005

我正在选择具有滥用状态列的旧数据库上的数据。状态列中包含多条信息。值如“新联系人 YYYY”、“在线 YYYY”、“已更新 YYYY”、“已撤回 YYYY”等……。您可能已经猜到了，YYYY 代表年份……我需要它。

在过去我做过类似的事情

```
Rtrim( ltrim( Replace(Replace(Replace(Replace(Replace( … 
```

基本上，用空字符串替换所有文本值，所以唯一仍然存在的是年份。我仍然可以这样做，但我认为这很荒谬，必须有更好的方法。

有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T23:23:43.183

如果您只想从字符串中提取四位数年份，则可以使用 PATINDEX

```
SELECT SUBSTRING(FieldName, PATINDEX('%[0-9][0-9][0-9][0-9]%', FieldName), 4)
FROM TableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T23:45:33.670

如果年份总是最后 4 年：

```
SELECT right(FieldName,4) from table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T00:50:09.153

给出的所有答案都解决了您的问题，但**正确**的答案是更好地规范您的数据库。如果您需要将年份作为单独的项目，则应将其存储在单独的列中。

其他任何事情都只是去除疣上的毛发，就像我亲爱的老奶奶过去常说的那样（她实际上从未说过，我只是想起来，听起来很酷——一定是我很少出去的原因:-) .

# apache - 使用 SPNEGO/Kerberos 和委派的 Tomcat 身份验证

> ID：339101
> 
> 赞同：9
> 
> 时间：2008-12-03T23:15:33.603
> 
> 标签：apache, tomcat, kerberos, spnego

是否有实现 Tomcat 使用的 Kerberos 身份验证并且还支持 Kerberos 委派的 apache 模块？

我已经看过 mod_spnego 了，它丢弃了它创建的 SSPI 上下文，只保留了主体名称。相反，我正在寻找一个模块，该模块将允许委托发送到 Tomcat 的票证 - 也就是说，获取发送的服务票证以进行身份​​验证并使用它在服务器端代表用户访问另一个服务。

编辑：为了澄清，我需要在 Win32 下使用 GSS/SSPI 上下文进行模拟，因此当遗留代码连接到另一台服务器时，将使用委托凭据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-01-20T07:48:25.773

[WAFFLE](http://waffle.codeplex.com/)（Windows 身份验证功能框架）现在从 v1.4beta 开始提供该功能。

它提供了一个 ServletFilter，它使用本机 Windows API 对用户进行身份验证，使用 Basic 或 Negotiate 身份验证。然后可以模拟用户，并且将使用模拟用户的访问令牌执行本机 API 调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-19T20:44:15.490

使用 JAAS 领域和使用 kerberos 5 JAAS 模块怎么样？

[http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html#JAASRealm](http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html#JAASRealm)

[http://java.sun.com/j2se/1.4.2/docs/guide/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html](http://java.sun.com/j2se/1.4.2/docs/guide/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html)

看起来它可能需要一些编码，但应该在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-11-04T16:25:35.450

这是一个[http://spnego.sourceforge.net/credential_delegation.html](http://spnego.sourceforge.net/credential_delegation.html)教程。它将 Kerberos/SPNEGO 实现为 HTTP Servlet 过滤器并支持凭证委托。

# ruby-on-rails - RoR：FasterCSV 散列

> ID：339105
> 
> 赞同：2
> 
> 时间：2008-12-03T23:16:50.047
> 
> 标签：ruby-on-rails, ruby, hash, csv, fastercsv

我真的很难掌握如何有效地使用 FasterCSV 来完成我想要的。

我有一个 CSV 文件；说：

```
ID,day,site
test,tuesday,cnn.com
bozo,friday,fark.com
god,monday,xkcd.com
test,saturday,whatever.com 
```

我要通过这个文件并最终得到一个哈希值，该哈希值有一个计数器，用于记录第一列出现的次数。所以：

```
["test" => 2, "bozo" => 1, "god" => 1] 
```

我需要能够在不事先了解第一列中的值的情况下执行此操作。

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T00:34:30.403

简单的：

```
h = Hash.new(0)
FasterCSV.read("file.csv")[1..-1].each {|row| h[row[0]] += 1} 
```

CSV.read 也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T23:35:06.450

我面前没有代码，但我相信有（当前记录的在`row.to_hash`哪里）`row``FasterCSV::Row`

`row.headers`顺便说一句，应该给你一个标题数组。查看文档了解更多信息：http: [//fastercsv.rubyforge.org/classes/FasterCSV/Row.html](http://fastercsv.rubyforge.org/classes/FasterCSV/Row.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-30T11:10:30.270

我会使用 foreach，并尊重 nils - 否则我会冒“未定义的 nil.+ 方法”错误的风险......

```
counter = {}
FasterCSV.foreach("path_to_your_csv_file", :headers => :first_row) do |row|
  key=row[0]
  counter[key] = counter[key].nil? ? 1 : counter[key] + 1
end 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-12-03T23:35:44.593

哼，会：

```
File.open("file.csv").readlines[1..-1].inject({}) {|acc,line| word = line.split(/,/).first; acc[word] ||= 0; acc[word] += 1; acc} 
```

做 ？

[1..-1] 因为我们不希望标题行带有列名

然后，对于每一行，获取第一个单词，如果累加器不存在则将 0 放入累加器中，将其递增，返回

# visual-studio-2008 - 任何 MSI 安装项目上的“不可恢复的构建错误”

> ID：339106
> 
> 赞同：21
> 
> 时间：2008-12-03T23:16:57.220
> 
> 标签：visual-studio-2008, windows-installer, compiler-errors, vs-error

前段时间我在构建任何 Visual Studio 部署项目时遇到了这个错误。

**“不可恢复的构建错误”**

*我以为我的 VS 安装已损坏或我删除了一些重要文件，但是...*

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-12-03T23:18:46.657

...我所要做的就是。

**关闭**Visual Studio。

开始、**运行**或 WIN+R，输入**cmd**，确定。

```
regsvr32 "C:\Program Files\Common Files\Microsoft Shared\MSI Tools\mergemod.dll"
regsvr32 ole32.dll 
```

**对于 x64 位机器**

```
regsvr32 "C:\Program Files (x86)\Common Files\Microsoft Shared\MSI Tools\mergemod.dll"
regsvr32 ole32.dll 
```

警告：您**必须在****管理员模式下**运行命令提示符！

**关闭**命令提示符。

**打开**Visual Studio 并尝试**重新构建**您的部署项目！它对我有用！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-06-25T09:52:46.290

我们遇到了这个问题，上面的解决方案对我们不起作用。经过几天的摸索，我们发现我们的解决方案是从本地用户临时文件夹中删除所有 VSI*.TMP 文件：

C:\Documents and Settings\用户名\Local Settings\Temp

在我们的例子中，这在 Hudson 构建机器上出错了 - Visual Studio 似乎创建了临时文件并且没有正确清理它们。一旦它创建了 65536 个临时文件（VSI0000.tmp 到 VSIFFFF.tmp），它就无法再创建，MSI 项目将无法构建。

感谢这篇博客文章的解决方案：

[http://blog.richardadleta.com/2009/08/using-visual-studio-command-line.html](http://blog.richardadleta.com/2009/08/using-visual-studio-command-line.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T01:56:38.997

我在 Visual Studio 2010 Ultimate 中遇到了同样的问题。报名技巧：

```
regsvr32 "C:\Program Files\Common Files\Microsoft Shared\MSI Tools\mergemod.dll"
regsvr32 ole32.dll 
```

帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-23T14:21:43.003

如果您将项目输出包括为“发布项目”并且您没有指定将产生输出的 PublishProfilePath，也会发生这种情况。不幸的是，当您选择此输出类型时，系统不会提示您选择此关键信息。

要指定路径，请单击“文件系统”窗口右窗格中的“项目输出”项， [![文件系统选项卡](https://i.stack.imgur.com/uAjwD.png)](https://i.stack.imgur.com/uAjwD.png)

然后显示它的属性面板（Ctrl+W，P）。

[![属性面板](https://i.stack.imgur.com/5qc1J.png)](https://i.stack.imgur.com/5qc1J.png)

单击该字段，您应该能够为您的项目选择所需的发布配置文件（如果您尚未创建一个，则需要通过右键单击解决方案资源管理器中的主项目，然后单击发布；我创建了一个文件夹配置文件） . 进行干净的构建，就我而言，问题已解决。

请注意，我之前已经注册了上述 DLL，因此这也可能是问题的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-19T15:53:58.393

尝试了上面的那些解决方案......最后删除和添加 Visual Studio 安装程序项目扩展解决了这个问题。将其留在这里作为替代解决方案。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-03-13T08:50:21.823

重新安装（修复）Visual Studio 为我解决了这个问题。

# xml - xsl:for-each 循环计数器

> ID：339110
> 
> 赞同：10
> 
> 时间：2008-12-03T23:17:43.867
> 
> 标签：xml, xslt, for-loop

如何保存 xsl:for-each 中发生的迭代？（XSL 中的变量是不可变的）

我的目标是找到特定级别的任何节点的最大子节点数。

例如，我可能想打印此调查中任何问题的响应节点不超过 2 个：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="testing.xsl"?>
<Survey>
  <Question>
    <Response text="Website" />
    <Response text="Print Ad" />
  </Question>
  <Question>
    <Response text="Yes" />
  </Question>
</Survey>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="/">
  <html>
  <head>
  </head>
  <body>
    <xsl:for-each select="Survey">
      The survey has <xsl:value-of select="count(child::Question)"/> questions.  
      <br />
      <xsl:variable name="counter">0</xsl:variable>
      <xsl:for-each select="Question">
        <!-- TODO: increment the counter ??????? -->
      </xsl:for-each>
      No more than <xsl:value-of select="$counter"/> responses were returned for any question.
    </xsl:for-each>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-04T00:56:04.993

不会“保存 xsl:for-each 中发生的迭代”，因为[**XSLT 是一种函数式语言**](http://conferences.idealliance.org/extreme/html/2006/Novatchev01/EML2006Novatchev01.html)并且变量是不可变的。

**以下变换找到所需的最大值：**

```
<xsl:stylesheet 版本="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:输出方法="文本"/>

    <xsl:模板匹配="/">
      <xsl:call-template name="最大值">
        <xsl:with-param name="pNodes" select="*/Question"/>
      </xsl:调用模板>
    </xsl:模板>

    <xsl:template name="最大">
      <xsl:param name="pNodes"/>

      <xsl:variable name="vNumNodes" select="count($pNodes)"/>

      <xsl:选择>
        <xsl:when test="$vNumNodes = 1">
          <xsl:value-of select="count($pNodes[1]/Response)"/>
        </xsl:when>
        <xsl：否则>
          <xsl:变量名="vHalf"
               select="floor($vNumNodes div 2)"/>

          <xsl:变量名="vMax1">
           <xsl:call-template name="最大值">
            <xsl:with-param name="pNodes"
                 select="$pNodes[not(position() > $vHalf)]"/>
           </xsl:调用模板>
          </xsl:变量>

          <xsl:变量名="vMax2">
           <xsl:call-template name="最大值">
            <xsl:with-param name="pNodes"
                 select="$pNodes[位置() > $vHalf]"/>
           </xsl:调用模板>
          </xsl:变量>

          <xsl:value-of 选择=
           "$vMax1*($vMax1 >= $vMax2) + $vMax2*($vMax2 > $vMax1)"/>
        </xsl:否则>
      </xsl:选择>
    </xsl:模板>
</xsl:样式表>

```

应用于提供的 XML 文档时：

```
<调查>
    <问题>
        <响应文本="网站" />
        <响应文本="平面广告" />
    </问题>
    <问题>
        <响应文本=“是” />
    </问题>
</调查>

```

产生了想要的结果：

**2**

**请注意以下几点**：名为“ ”的*模板以*`maximum`递归方式调用自身*并实现*[**DVC（分治原则）**](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm) *以最小化递归堆栈深度*。节点列表被分成两个，计算两个列表的最大值（递归）并返回两者中较大的一个。

# c# - ASP.NET 会话 - 如何判断会话是否由于过期或初次访问而成为新会话？

> ID：339116
> 
> 赞同：2
> 
> 时间：2008-12-03T23:20:19.337
> 
> 标签：c#, asp.net, .net-3.5, session

我们有一个搜索结果页面，用户可以通过多种方式点击该页面。90% 的方式将设置一个“搜索条件”会话对象，结果页面将使用它来检索搜索结果。

当未找到会话对象时，我们通常会向用户显示“无效搜索”消息，并为他们提供指向主搜索页面的链接。

例外情况是用户点击一个将搜索结果页面作为默认页面的网页（我们使用 .NET 的主题为我们的网站提供私有标签，并使用我们的附属公司的颜色和徽标对其进行蒙皮）。如果搜索结果页面是站点的默认页面，则在没有会话条件时执行特殊搜索。

这在我们的测试中工作得相当好，但是我们想要处理一个边缘情况：当会话到期而某人在搜索结果页面上（来自搜索页面）然后他们点击下一页结果，他们将获得此特殊搜索，而不是“会话过期”消息。

这是我们使用的基本格式，其中 searchCriteria 是从会话中设置的。

```
if (searchCriteria == null)
{
    if (/*Check if this is the default url for this site*/)
    {
      //Preform special search
    }
    else
    {
      //Display 'session expired message'
    }
} 
```

有没有办法我们可以在内部 if 块中检查 Session 以查看用户的会话是否由于现有会话到期而成为新会话？或者浏览器是否只是在会话 cookie 过期时丢弃它们？

浏览器有区别吗？是否有些人将过期的会话 cookie 返回到服务器，而其他人则在过期时将其删除？还是一致的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T23:34:15.593

这是一篇基于[这篇](http://aspalliance.com/520)文章的优秀[文章](http://www.eggheadcafe.com/articles/20051228.asp)。我想你会在这里找到你的答案（第二篇文章的第2页）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T23:59:19.210

所有浏览器都将返回过期的会话 cookie。他们会这样做，直到浏览器重新启动或被服务器响应重写。

bnkdev 的答案使用这个事实通过查看 cookie 是否已经设置来检测新的和过期的。它简单易行，很可能对您有用，但仅在将 cookie 用于会话 id 时才有效。它不适用于无 cookie 会话。

此外，您应该从 sessionState 配置元素的 cookieName 属性中获取它，而不是硬编码“ASP.NET_SessionId”。

# ruby-on-rails - 如何在 Rails 中呈现不同格式的一部分？

> ID：339130
> 
> 赞同：120
> 
> 时间：2008-12-03T23:26:30.853
> 
> 标签：ruby-on-rails, format, render, partial, actionview

我正在尝试生成包含一些 HTML 的 JSON 响应。因此，我有`/app/views/foo/bar.json.erb`：

```
{
  someKey: 'some value',
  someHTML: "<%= h render(:partial => '/foo/baz') -%>"
} 
```

我希望它渲染`/app/views/foo/_baz.html.erb`，但它只会渲染`/app/views/foo/_baz.json.erb`。传球没用`:format => 'html'`。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-02-19T05:27:23.753

从 Rails 3.2.3 开始，调用 render :partial 时（仅在`respond_to`块外工作）。

```
render formats: [ :html ] 
```

代替

```
render format: 'html' 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2008-12-04T13:03:01.093

有什么问题

```
render :partial => '/foo/baz.html.erb' 
```

? 我只是尝试从 Atom 构建器模板中渲染 HTML ERB 部分，它工作正常。不需要弄乱全局变量（是的，我知道它们前面有“@”，但它们就是这样）。

不过，您的[`with_format &block`方法](https://stackoverflow.com/questions/339130/how-do-i-render-a-partial-of-a-different-format-in-rails#340432)很酷，并且具有您只指定格式的优点，而简单的方法也指定了模板引擎（ERB/builder/etc）。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-05-15T18:50:19.530

Rails 4 将允许您传递格式参数。所以你可以做

```
render(:partial => 'form', :formats => [:html])} 
```

请注意，您可以在 Rails 3 中执行类似的操作，但不会将该格式传递给任何子部分（如果表单调用其他部分）。

您可以通过创建 config/initializers/renderer.rb 在 Rails 3 中拥有 Rails 4 功能：

```
class ActionView::PartialRenderer
  private
  def setup_with_formats(context, options, block)
    formats = Array(options[:formats])
    @lookup_context.formats = formats | @lookup_context.formats
    setup_without_formats(context, options, block)
  end

  alias_method_chain :setup, :formats
end 
```

请参阅[http://railsguides.net/2012/08/29/rails3-does-not-render-partial-for-specific-format/](http://railsguides.net/2012/08/29/rails3-does-not-render-partial-for-specific-format/)

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2010-08-06T20:40:26.680

对于 Rails 3， with_format 块有效，但有点不同：

```
 def with_format(format, &block)
    old_formats = formats
    self.formats = [format]
    block.call
    self.formats = old_formats
    nil
  end 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2008-12-04T12:28:24.237

基于[roninek 的回应](https://stackoverflow.com/questions/339130/how-do-i-render-a-partial-of-a-different-format-in-rails#340335)，我发现最佳解决方案如下：

在 /app/helpers/application.rb 中：

```
def with_format(format, &block)
  old_format = @template_format
  @template_format = format
  result = block.call
  @template_format = old_format
  return result
end 
```

在 /app/views/foo/bar.json 中：

```
<% with_format('html') do %>
  <%= h render(:partial => '/foo/baz') %>
<% end %> 
```

另一种解决方案是重新定义`render`以接受`:format`参数。

我无法`render :file`与当地人一起工作，也没有一些道路迷茫。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2011-05-30T23:17:55.417

在 Rails 3 中，视图有一个格式数组，这意味着您可以将其设置为查找 [:mobile, :html]。设置将默认查找 :mobile 模板，但回退到 :html 模板。设置它的效果将级联到内部部分。

我能找到的最好但仍然有缺陷的设置方法是将此行放在每个完整移动模板（但不是部分模板）的顶部。

```
<% self.formats = [:mobile, :html] %> 
```

缺陷是您必须将该行添加到多个模板中。如果有人知道从 application_controller.rb 设置一次的方法，我很想知道。不幸的是，将该行添加到您的移动布局中不起作用，因为模板是在布局之前呈现的。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2011-02-22T04:49:00.847

只是详细说明 zgchurch 写的内容：

*   考虑到例外情况
*   返回被调用块的结果

认为它可能有用。

```
def with_format(format, &block)
  old_formats = formats
  begin
    self.formats = [format]
    return block.call
  ensure
    self.formats = old_formats
  end
end 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2008-12-04T11:54:01.920

你有两个选择：

1) 使用`render :file`

```
render :file => "foo/_baz.json.erb" 
```

2) 通过设置@template_format 变量将模板格式更改为html

```
<% @template_format = "html" %>
<%= h render(:partial => '/foo/baz') %> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-10-18T18:57:29.180

我有一个名为“api/item.rabl”的文件，我想从 HTML 视图中渲染它，所以我不得不使用：

`render file: 'api/item', formats: [:json]`

（`file`因为该文件的名称中没有下划线，`formats`而不是`format`（和传递和数组））

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-22T07:56:06.860

似乎传递一个`formats`选项将在较新的 Rails 版本中正确呈现它，至少 3.2：

```
{
  someKey: 'some value',
  someHTML: "<%= h render('baz', formats: :html) -%>"
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-06-23T09:42:39.793

当我试图在另一个 xml.builder 视图文件中呈现 XML 部分时，我遇到了这个线程。以下是一个很好的方法

```
xml.items :type => "array" do
    @items.each do |item|
        xml << render(:partial => 'shared/partial.xml.builder', :locals => { :item => item })
    end
end 
```

是的...完整的文件名也可以在这里使用...

# .net - 有没有办法以编程方式连接excel文件？

> ID：339133
> 
> 赞同：2
> 
> 时间：2008-12-03T23:28:20.163
> 
> 标签：.net, excel, automation

场景：我们有一个网络系统，可以“即时”自动生成 office 2003 excel 文件（使用 2003 XML 文件格式，而不是二进制格式。）这些文件确实保存在网络服务器上用于各种用途。

现在，我们遇到了这样一种情况，客户真的希望我们获取这个过程生成的 xls 文件，并将它们粘合在一起，形成一个大文件的单张。（主要是为了让他们只能按一次“打印”。）

我认为 .net 框架必须有某种方法可以做到这一点（以及类似的事情），但我似乎无法从 MSDN 中挑逗出我需要的东西。

备案：.net 2.0，使用 VB.net 和 ASP.net。如果需要，可以在服务器上安装 Excel，但是在每次 Web 用户点击时在后台打开 excel 的东西可能无法很好地扩展。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T23:40:39.577

我不知道 Excel 文件由什么组成，但至少可以从 Excel 可以读取的更简单的格式开始吗？IE，从 CSV 文件开始，将它们连接在一起，然后将其转换为 Excel 格式。

在我看来，在此过程中尽可能晚地转换为 Excel 格式会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T23:31:42.433

所以您的用户想附加每次生成的最新文件？还是在他们提出请求时将它们粘在一起？

编辑：

excel文件中有哪些数据？是否可以暂时转换为更简单的格式，例如 csv？

即使你不能，你也可以创建一个新文件，当你遍历每个文件中的每一行时，你可以将它写入新文件。这里的问题是，如果您在单元格中有任何功能，这些功能将会丢失，因为您基本上只是在复制数据。

除此之外，您将不得不使用 Excel 互操作。虽然我知道这很痛苦，而且它确实不支持 MS 的自动化，但我们已经设法创建了非常可靠的自动化系统作为 Web 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T23:44:00.147

很确定 .Net 框架没有您要查找的内容，您必须手动创建它。您可以通过 Excel 互操作执行此操作：

来自 MSDN 的[Microsoft.Office.Interop.Excel](http://msdn.microsoft.com/en-us/library/wss56bz7(VS.80).aspx)

**编辑：**只是为了让你有一些期待，与它一起工作可能会很痛苦！：X

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T23:50:41.943

1) 打开每个 XML 文件。
2) 获取每个工作表的工作表 XML。
3) 将所有 Worksheet XML 插入一个新的“包装”Excel 2003 XML 文档中。
4) 从 Web 请求中返回文档。

确保工作表具有唯一的名称。

我会避免使用 2007 XML 格式，因为您使用的是更容易处理的 2003 格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-04T00:16:03.467

也许ADO会适合？这是一个脚本示例。

```
strXLToOpen = "C:\Docs\ltd.xls" 
strXLToImport = "C:\Docs\ltd2.xls"

Set cn = CreateObject("ADODB.Connection")
''EDIT I not that MSDASQL is deprecated by Microsoft, so 
''Please see below.
With cn
    .Provider = "MSDASQL"
    .ConnectionString = "Driver={Microsoft Excel Driver (*.xls)};" & _
"DBQ=" & strXLToOpen & "; ReadOnly=False;"
    .Open
End With

strSQL = "INSERT INTO [Sheet2$] (H1, H2) " _
& "SELECT H1, H2 FROM [Sheet2$] IN '' " _
& "'Excel 8.0;database=" & strXLToImport & "';"       

cn.Execute strSQL 
```

更多信息： http: [//support.microsoft.com/kb/257819/EN-US/](http://support.microsoft.com/kb/257819/EN-US/)

[http://support.microsoft.com/kb/278973](http://support.microsoft.com/kb/278973)

编辑重新评论。

~~这适合吗？它来自： http: [//www.codemaker.co.uk/it/tips/ado_conn.htm#ODBCDriverForExcel](http://www.codemaker.co.uk/it/tips/ado_conn.htm#ODBCDriverForExcel)~~

 ~~```
cn.Open "Driver={Microsoft Excel Driver (*.xls)};" & _
           "DriverId=790;" & _
           "DBQ=" & strXLToOpen & "; ReadOnly=False;" & _
           "DefaultDir=c:\somepath" 
```~~ 

~~您还可以将 Jet 驱动程序与 Excel 一起使用。~~

编辑重新评论#2

我已经用.Net测试了这个连接字符串，它似乎工作：

```
"Provider=Microsoft.Jet.OLEDB.4.0;" & _
"Data Source=C:\Docs\Test.xls;" & _
"Mode=ReadWrite;Extended Properties=""Excel 8.0;HDR=No""" 
```

# html - 为什么 cellpacing 和 cellpadding 不是 CSS 样式

> ID：339146
> 
> 赞同：52
> 
> 时间：2008-12-03T23:34:40.697
> 
> 标签：html, css, html-table, cellpadding, cellspacing

我不知道为什么这让我如此困扰，但是当我创建网站时，我总是尝试使用 CSS 来完成我的所有样式设置。然而，当我使用表格时，我必须记住的一件事是添加 cellspacing="0" 和 cellpadding="0"

为什么没有 CSS 属性来覆盖这些过时的 HTML 4 属性？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-12-03T23:44:01.270

[单元格间距](http://www.w3schools.com/Css/pr_tab_border-collapse.asp)：

```
table { border-collapse: collapse; } 
```

至于[cellpadding](http://www.w3schools.com/css/css_padding.asp)，你可以做

```
table tr td, table tr th { padding: 0; } 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2008-12-07T00:06:38.163

垫子已经回答了，但只是为了完整性：

*   `padding`→`cellpadding`
*   `border-spacing`→`cellspacing`
*   `border-collapse`→ 没有 HTML 等价物

还值得记住的是，您可以为 CSS 设置单独的水平和垂直值，例如`border-spacing: 0 1px`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-24T23:55:20.420

Eric Myer 的[重置样式表](http://meyerweb.com/eric/tools/css/reset/)包含以下表格的“重置”样式：

```
/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

另外 TD, TR 被重置：

```
thead, tr, th, td {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
} 
```

我提到这一点的原因是他有一个评论'tables still need cellpadding=0'。我想他把它放在这里是有原因的——可能是一些旧浏览器需要的。从这是他所包含的极少数评论之一这一事实来看，我猜它很重要，并且有充分的理由。

基于此评论 - 仅此评论！- 我将继续在标记中使用 cellspacing="0" ，除非有人明确（如下）告诉我为什么我不需要。然而，在任何值得支持的现代浏览器中，这可能是不必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T23:37:49.347

```
table { border-collapse:collapse; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T23:49:46.327

我猜有人认为单元格间距是“不好的做法”。我如何理解它等同于包含在 CSS2 标准中，但 IE 不支持此属性。border-collapse 允许将间距设置为 0 值。单元格填充可以通过将填充属性设置为表格的 TD 元素来实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-18T00:52:46.977

遗憾的是，单元格不能从行 (tr) 的 CSS 属性继承其默认填充，否则如果不是“初始”，则从行组 (thead/tbdy/tfoot) 继承，如果不是“初始”，则从 colgroup 或整个桌子。

“cellspacing”没有这个问题（但实际上它们是单元格周围的边距，这些外边距与相邻单元格的边距以及表格/行组或行的内部填充一起折叠，它们被表格的填充“背景”设置（表格背景还包括表格的“边框”，该边框绘制在其顶部，并且还将此背景剪辑到表格边框的外边缘，特别是当此边框具有圆角时）。

但是对于单元格填充，将“单元格填充：n”定义为表格或组属性会更简单，而不是在每个单元格上单独并明确地使用自己的“边框：n”样式（只有在我们需要覆盖某些特定单元格中的填充）。

# c++ - 从浮点数中提取单个数字

> ID：339150
> 
> 赞同：2
> 
> 时间：2008-12-03T23:35:54.547
> 
> 标签：c++, floating-point, extract, digits

我整天都在敲这个头。我目前正在处理的 C++ 项目需要显示可编辑的值。当前选择的数字显示该数字上方的递增值和下方的递减值。能够将可编辑值作为数字和数字集合引用是很有用的。如果有某种可索引形式的浮点数，那就太棒了，但我一直找不到这样的解决方案。我把这个问题扔在那里，看看是否有明显的我遗漏的东西，或者我是否应该自己动手。

* * *

感谢您的建议！我希望有一个不会从 float -> string -> int 转换的解决方案，但我*认为*这是摆脱浮点量化问题的最佳方法。我最终选择了 boost::format 并仅引用了字符串的各个字符。与使用 modf 和 fmod 的组合尝试从浮点数中获取数字相比，我看不出这是一个巨大的性能差异（它可能只是在幕后做的，只比我的实现更强大）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T23:42:23.207

浮点数的内部表示与您看到的不同。你只能施法。

要投射，请执行以下操作：

```
char string[99];
sprintf(string,"%f",floatValue); 
```

或者看到这个： http: [//www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.1](http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.1)

维基百科文章可以解释更多关于表示：[http ://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T08:21:01.180

[哦，有很多方法可以转换为字符串。](https://stackoverflow.com/questions/303562/c-format-macro-inline-ostringstream#306053) （虽然我自己更喜欢 s **n** printf() 。）

或者您可以转换为 int 并使用模数和整数除法提取数字。您可以使用 log{base10} 计算位数。

（记住：log{baseA}_X / log{baseA}_B = log{baseB}_X。）

例子：

```
#define SHOW(X) cout << # X " = " << (X) << endl

int
main()
{
  double d = 1234.567;

  SHOW( (int(d)%10000) / 1000 );
  SHOW( (int(d)%1000)  / 100  );
  SHOW( (int(d)%100)   / 10   );
  SHOW( (int(d)%10)           );
  SHOW( (int(d*10)  % 10)     );
  SHOW( (int(d*100) % 10)     );
  SHOW( (int(d*1000)% 10)     );

  SHOW( log(d)/log(10) );
} 
```

虽然你应该使用 static_cast ...

注意指数符号。对于非常大或非常小的数字，您可能会遇到问题。

浮点数也有四舍五入的问题，可能会让您感到有些悲伤。（这与我们不在两个双精度之间使用 operator== 的原因相同。或者为什么您不能依赖 a*b == b*a。根据 a 和 b 的确切值，它们可能会略有不同大约 10^-25。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T09:52:42.243

您只能使用 boost::lexical_cast 在字符串和浮点数之间进行转换。但是，您不能直接索引浮点形式 - 它在内部不存储为十进制数字。这可能不是什么大问题。对于您的 UI，您很可能无论如何都会保留数字的字符串形式，并在 getter/setter 中与 float 进行转换。

# visual-studio - 你喜欢哪一个 - Visual SVN 或 Ankhsvn？

> ID：339151
> 
> 赞同：4
> 
> 时间：2008-12-03T23:35:55.543
> 
> 标签：visual-studio, svn

撇开一个是开源的这一事实不谈，该工具在 Visual Studio 中对 SVN 支持的功能更丰富且性能更高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T00:34:29.843

我最近从 VisualSVN 切换回 Ankhsvn (2.0)。在 VisualSVN 之前，我使用的是 Ankhsvn (1.0)。

我更喜欢 AnkhSVN 2.0，因为它作为源代码控制模块而不是插件与 Visual Studio 集成，因此感觉更像是使用 Visual SourceSafe（我在朝九晚五时被迫使用它）。基本上，它与 Visual Studio 的集成方式与 Microsoft 希望源代码控制与 Visual Studio 集成的方式相同。

对我来说，它简化了 Visual SourceSafe 和 Subversion 之间的来回切换，因为它们的行为方式基本相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T15:11:48.650

我喜欢 AnkhSVN 主要是因为它是免费的。但是，我喜欢 VisualSVN 服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T14:52:53.400

我不喜欢任何一个。使用贝壳/乌龟对我来说更可取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-02T12:56:12.577

我为 VisualSVN 付费，这很值得，尽管我通常支持免费（甚至劣质）软件。通过将实际的 SVN 内容交给 TortoisSVN 来分离关注点，您可以获得两全其美的效果。

归根结底，这取决于您的工作方式和习惯，并且由于我已经习惯了 TortoiseSVN，因此 VisualSVN 是轻而易举的事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T14:56:09.073

我喜欢 VisualSVN 让你更接近乌龟的方式。我也更喜欢它的差异工具。

我不确定他们是否更改了它，但是当我上次使用 Ankh 时，它不允许在 VS 中重命名文件。这对我来说是一个很大的痛苦，因为我有重构炎并且通常在第一次命名文件时非常糟糕。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T15:10:13.210

VisualSVN 适合我。我发现它比 Ankh 稳定得多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-02T13:32:21.737

+1 到 VisualSVN，因为：a）它将大部分工作委托给 TortoseSVN，并且 b）它处理我从解决方案资源管理器中抛出的所有移动/重命名恶作剧。

# apache-flex - Flex - 有没有人有使用 VideoDisplay 控件事件的示例

> ID：339152
> 
> 赞同：0
> 
> 时间：2008-12-03T23:36:19.723
> 
> 标签：apache-flex, flash, actionscript-3, videodisplay

Flex 3 文档相当基础。有人可以发布一个使用控件事件的更完整的示例吗？我仍在努力了解 ActionScript 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T01:22:53.987

[您可以在http://blog.flexexamples.com/2008/01/01/determining-a-videodisplay-controls-current-playback-state-using-the-state-property-](http://blog.flexexamples.com/2008/01/01/determining-a-videodisplay-controls-current-playback-state-using-the-state-property-and-statechange-event/)上找到有关 stateChange 和 playheadUpdate 事件的有趣文章[和状态改变事件/](http://blog.flexexamples.com/2008/01/01/determining-a-videodisplay-controls-current-playback-state-using-the-state-property-and-statechange-event/)

对于更复杂的示例，请查看[FXVideo 组件](http://www.fxcomponents.com/flex-video-player/)源代码（在主单元 FXVideo.as 中）。

# .net - Silverlight 网页架构

> ID：339156
> 
> 赞同：2
> 
> 时间：2008-12-03T23:38:44.120
> 
> 标签：.net, silverlight

银光新手。传统上，如果我要设计一个用户必须经过 3 或 4 个步骤的类似向导的流程，我会将每个步骤作为单独的 aspx 页面。使用 silverlight，您会在一个组件中完成所有操作，还是有 3 个单独的页面，每个页面都有不同的 silverlight 组件？这两种方法都有哪些优点/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T23:48:38.407

向导通常需要在屏幕之间维护状态，这在单个页面上比在多个页面上更容易做到。您还可以获得一次而不是多次初始化 SL 控件的好处。

在一页上加载整个向导的缺点是，一个 SL 控件可能比几个较小的控件大，这取决于您如何将其打包。这意味着更长的初始化时间。此外，我会担心用户使用浏览器中的后退和前进按钮来导航向导。我不知道您是否可以拦截来自 Silverlight 的这些点击，然后只需向后或向前导航 SL 控制屏幕，或者您是否甚至想要这样做。

如果向导只有几个屏幕，我会想象在一页上使用它的利大于弊。

# php - 有没有drupal函数可以跳出页面渲染过程，返回一个未找到的页面？

> ID：339169
> 
> 赞同：0
> 
> 时间：2008-12-03T23:46:52.417
> 
> 标签：php, drupal, drupal-6

我想在 variable_load 函数（用于从菜单参数加载变量）中进行选择，以规避页面呈现过程的其余部分并给用户一个“找不到页面”。

我可以使用 drupal_goto() 但我不希望重定向用户并更改其浏览器中的 url。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T00:10:28.500

您可以[`drupal_not_found()`](http://api.drupal.org/api/function/drupal_not_found/6)在不更改 URL 的情况下显示“找不到页面”消息。

# svn - 无法提交到 Subversion

> ID：339170
> 
> 赞同：33
> 
> 时间：2008-12-03T23:47:25.473
> 
> 标签：svn

我有一个客户必须重建他的自动构建服务器。他从我的 subversion 服务器检查了他的项目文件夹，但现在无法提交 - 他收到此错误：

```
Error: Commit failed (details follow):  
Error: Cannot write to the prototype revision file of transaction
'551-1' because a   
Error: previous representation is currently being written by another
process  
Finished!: 
```

我搜索了谷歌，但尽管经常报告此错误，但没有明确的解释 - StackOverflow 上的任何人都有解决方案吗？

更新：没有其他人提交到该存储库，所以它不是一个事务卡住（至少不是来自另一个用户）。最后我们发现权限设置不正确。并不是说您会从这条消息中知道它，而是解决了问题。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2010-03-11T20:38:03.240

您可以在不重新启动的情况下清除此错误：

1.  识别（或创建）根 SVN 存储库中不属于失败提交的目录。

2.  在步骤 1 的目录中创建一个新文件。

3.  提交新文件（和目录，如果在步骤 1 中创建）。因为文件是新的，它不会与之前的提交冲突，并且可以更新服务器上的修订号。

4.  提交原始文件/目录。

5.  删除新文件（和目录，如果在步骤 1 中创建）。

6.  提交整个树。

**步骤 5 和 6 不是必需的，但我喜欢保持我的存储库整洁......

我经常收到这个错误 b/c SVN 在提交我的大文件的过程中经常出现问题，这反过来又导致后续提交尝试写入被中断的修订版。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-12-05T15:19:06.683

我遇到了类似的问题，除了消息说“......以前的表示目前正在由这个进程编写”。

svnadmin lstxns 没有显示任何交易。

重新启动 Apache 为我解决了这个问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-04T00:32:57.020

您的存储库有一个卡住的事务。您可以使用 svnadmin 命令修复它。与所有其他 svn 实用程序一样，svnadmin 采用命令后跟选项（通常只是存储库目录）。svnadmin 必须在存储库的服务器上运行。

做这样的事情：

```
svnadmin lstxns /path/to/repository 
```

获取正在进行的交易列表（您应该在那里看到您的违规 551-1）。然后你可以决定如何最好地从这个错误中恢复... svnadmin 还有一个命令 rmtxns 来删除有问题的事务。如需更多信息，请发出：

```
svnadmin help 
```

或查看 tigris 网站：[http](http://subversion.tigris.org/) ://subversion.tigris.org/ 。您还可以通过在 help 命令后面加上您感兴趣的命令的名称来获得有关特定命令的更详细帮助。例如：

```
svnadmin help lstxns 
```

显然，您将需要对存储库服务器的 shell 访问权限和对存储库的写入权限才能使用 svnadmin。如果您的存储库格式是 Berkely DB，您应该暂停您的 svnserve 守护程序（如果您使用它）和任何 web_dav/web_svn 访问，以确保您在发出 svnadmin 命令时不会损坏数据库。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-07-12T08:38:05.097

对我来说，通过更改我的本地文件夹（而不是存储库）的权限来解决问题（如问题更新中所暗示的）。在 Windows Vista 中，您可以通过右键单击文件夹并在属性/安全中更改权限来执行此操作。

错误消息不是很好，也不容易找到答案，所以我希望我的回答能帮助其他人解决这个烦人的问题，但另一方面也很容易解决问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-01-19T16:57:44.470

有同样的问题，重启apache解决了这个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-03-31T18:48:38.267

在我取消正在进行的提交后遇到了同样的问题。使用要删除的事务号执行 svnadm rmtxns 后，我仍然收到消息。我正在使用 webdav 和 apache，所以我按照建议重新启动了 apache（/sbin/service httpd restart）。工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-18T15:31:11.473

我们不时会遇到同样的问题。我们试图：

本地：重试 svn clean svn update kill all svn processes

服务器：检查开放线程 Bounce SVN

目前我们唯一的解决办法是从文件中删除所有内容并提交。成功后，我们将文件的内容粘贴回去并再次提交。如果这得到相同的错误，我们一次慢慢地再次填充文件几个字节，直到我们可以提交整个事情。

通常这发生在提交中的一个文件上，我们单独提交每个文件，直到我们找出导致问题的文件。然后我们继续上面提到的过程。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-24T06:48:48.573

“无法写入事务的原型修订文件”重新启动 apache 也为我解决了这个问题。我发帖是为了让一些有用的东西真正登上谷歌的榜首。

祝你好运！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-04T00:03:26.737

我还没有看到它，但是继续显示错误消息，我猜有些东西在写入文件时被卡住了。我会尝试重新启动您的 svn 服务器进程/重新启动服务器。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-11-07T20:55:07.713

您必须更改 repos 目录的权限

```
sudo chown -R www-data:www-data /home/pi/repos/
sudo chown -R www-data:www-data /home/pi/repos/myProject 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-02T03:02:25.203

伊万

我在 Windows 2003 上安装 Visual SVN 服务器时遇到了完全相同的问题，我已更改默认安装以将存储库文件夹放置到单独的分区上，因为服务器 C 驱动器很小。我必须更改对该文件夹的权限（在本例中为 D:\Repository），作为一个快速而肮脏的 hack，我只是将“每个人”用户添加到该文件夹​​并选择“修改”权限（肯定不是最安全的，但一个肮脏的工作黑客仍然如此）。这解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-12-15T22:21:02.320

我对@DamianM 的回答投了赞成票。就我而言，这似乎是问题所在。文件损坏导致无法在服务器上写入。 [某些文件扩展名的 SVN 提交问题](https://stackoverflow.com/questions/1910503/issue-with-svn-commit-for-certain-file-extension)

但是我没有重新启动您的 svn 服务器进程/重新启动服务器，而是将 dlls[有问题的文件] 再次复制到工作文件夹并能够提交。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-24T12:33:20.570

可能只是所有权问题。尝试递归更改目录的所有权，如下所示：

```
chmod -R 777 /path/to/repo 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-20T16:20:25.470

我有相同的错误代码，但错误结果是由我最近安装在本地计算机上的 CNTLM 代理引起的。
为了解决这个问题，我必须在代理绕过例外列表中添加一个额外的域后缀，以便能够提交到现场托管的团队 svn 服务器。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-08-25T01:01:56.437

我记下同样的错误信息，当我“获取锁定”提交时，成功~

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-05-10T04:40:58.870

我最近遇到了这样的问题（eclipse 3.7 + svn插件）并重新启动我的电脑。它现在可以工作了！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-06-25T23:44:33.630

错误消息提供的信息最少。似乎是各种原因造成的。

对我来说，事实证明，我对本地机器上的当前目录没有写访问权限，Subversion 试图为提交消息创建一个临时文件，因为我试图直接在存储库中创建一个新目录。

将当前工作目录更改为我的 Documents 文件夹立即解决了问题。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2012-05-18T16:34:04.030

在我们的案例中，SubVersion 存储库的挂载点已满，增加了更多空间。

# delphi - Delphi RTTI 麻烦：GetPropInfo 返回 nil 且 {$METHODINFO ON}？

> ID：339172
> 
> 赞同：5
> 
> 时间：2008-12-03T23:47:59.547
> 
> 标签：delphi, rtti

即使给定的类是用正确的 {$METHODINFO} 指令声明的，GetPropInfo 是否有可能返回 nil。

```
 type 
  ... 
  ...
    {$METHODINFO ON}
    TMyClass = class
    private
      fField: integer;
    published
      property Field: integer read fField write fField;
    end;
    {$METHODINFO OFF}
  ...
  ...
  procedure TestRTTI;
  begin
    assert(assigned(GetPropInfo(TMyClass, 'Field')), 'WTF! No RTTI found!');
  end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T00:59:43.567

明白了！似乎问题隐藏在我忽略的前向声明中。不知道这个鬼鬼祟祟的功能。

似乎编译器只考虑类的第一个声明来生成 RTTI，如果你有这样的前向声明......

```
 type 
    TMyClass = class;   
    ...    
    ...
    {$METHODINFO ON}
    TMyClass = class
    private
      fField: integer;
    published
      property Field: integer read fField write fField;
    end;
    {$METHODINFO OFF}   
    ...   
    ...   
    procedure TestRTTI;   
    begin
      assert(assigned(GetPropInfo(TMyClass, 'Field')), 'WTF! No RTTI found!');   
    end; 
```

...你会得到断言错误。因此，为了获得正确的 RTTI，需要为前向声明打开 {$METHODINFO} 指令，如此处所示....

```
 type 
    {$METHODINFO ON}
    TMyClass = class;   
    {$METHODINFO OFF}   
    ...    
    ...
    TMyClass = class
    private
      fField: integer;
    published
      property Field: integer read fField write fField;
    end;
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-04T04:58:26.760

我很高兴您找到了解决方案。`$TypeInfo`指令也是一样的。德尔福 7 帮助说：

> 请注意，如果一个类是前向声明的，则该类的第一个声明必须使用`$M`switch 声明。

PS：`$M+/- = $TypeInfo On/Off`

# php - MySQL/PHP - 可能会减慢我的数据库速度（或使其意外执行）的转义字符

> ID：339180
> 
> 赞同：4
> 
> 时间：2008-12-03T23:51:14.703
> 
> 标签：php, mysql, security, sql-injection

我通过 a 运行所有整数，`(int)Integer`以使它们可以安全地用于我的查询字符串中。

我还通过这个函数代码运行我的字符串：-

```
if(!get_magic_quotes_gpc()) {
           $string = mysql_real_escape_string($string);
        }

$pattern = array("\\'", "\\\"", "\\\\", "\\0");
$replace = array("", "", "", "");
if(preg_match("/[\\\\'\"\\0]/", str_replace($pattern, $replace, $string))) $string = addslashes($string); 

$cleanedString = str_replace('%','',$string); 
```

我显然返回了 $cleanedString 变量。现在我替换 % 字符，因为它是 mySQL 的通配符，如果用户插入它们，它可能会减慢我的查询（或使它们返回不正确的数据）。我应该关注 mySQL 的任何其他特殊字符吗？

其次，在 ? 之后的搜索和替换有什么错误或多余的`mysql_real_escape_string`吗？我刚开始时从一个网站上得到它，并且（如果我没记错的话）它说除了转义字符串之外，您还必须使用此搜索/替换。看起来它正在尝试删除任何以前转义的注入字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-04T00:25:19.890

好的，我有几点意见：

*   魔术引号功能已[弃用](http://php.net/manual/en/security.magicquotes.php)，您的 PHP 环境不应该启用魔术引号。因此，检查它应该是不必要的，除非您正在设计可以部署到其他客户环境中的代码，这些客户环境（不明智地）启用了魔术引号。

*   `preg_match()`如果您正在搜索字符序列，则您的正则表达式不正确。正则表达式 like`[xyz]`匹配单个字符 x、y 或 z 中的任何*一个。*它与字符串 xy 或 yz 不匹配。无论如何，这是学术性的，因为我认为您根本不需要以这种方式搜索或替换特殊字符。

*   `mysql_real_escape_string()`足以转义您打算在 SQL 字符串中的引号内插入的字符串文字。无需对其他引号、反斜杠等进行字符串替换。

*   `%`并且*仅*在对表达式使用模式匹配时`_`才是 SQL 中的通配符。如果您只是与等式或不等式运算符或正则表达式进行比较，这些字符没有任何意义。即使您使用表达式，也无需为了防御 SQL 注入而对这些字符进行转义。如果您想将它们视为文字字符（在这种情况下使用反斜杠转义它们）或表达式中的通配符（在这种情况下只需将它们保留），这取决于您。*`LIKE``LIKE``LIKE`*

**   当您将 PHP 变量插入 SQL 表达式以代替文字字符串值时，上述所有内容都适用。[如果您使用绑定查询参数](http://php.net/manual/en/mysqli-stmt.bind-param.php)而不是插值，则根本不需要转义。绑定参数在普通的“mysql” API 中不可用，而仅在“mysqli” API 中可用。

    *   另一种情况是您插入 PHP 变量来代替 SQL 表名、列名或其他 SQL 语法。在这种情况下，您不能使用绑定参数；绑定参数*仅*代替字符串文字。如果您需要使列名动态化（例如`ORDER BY`用户偏好的列），则应使用反引号（在 MySQL 中）或方括号（Microsoft）或双引号（其他标准 SQL）[分隔列名](https://stackoverflow.com/questions/214309/do-different-databases-use-different-name-quote#214344).* 

 *所以我想说你的代码可以简单地简化为以下内容：

```
$quotedString = mysql_real_escape_string($string); 
```

那就是*如果*您要使用字符串进行插值；如果您要将其用作绑定参数值，则更简单：

```
$paramString = $string; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T23:59:54.077

是的，我认为您那里的情况有些奇怪。

首先，我会检查魔术引号并在打开时*删除*斜线。这样你就得到了一个字符串，它实际上代表了你想要的信息（而不是一个用斜杠处理的字符串）。

如果您特别想删除 % 通配符，那么您可以将其转义或完全删除。在将字符串插入 SQL 查询之前，最后通过 mysql_real_escape_string 运行它，一切都会好起来的。

```
$string = $_POST['searchTerm'];
if (get_magic_quotes_gpc()) {
    $string = stripslashes($string);
}
$string = str_replace("%", "", $string);
$safeString = mysql_real_escape_string($string); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T00:01:49.207

mysql_real_escape_string() 为您转义这些字符：

> \x00、\n、\r、\、'、" 和 \x1a

所以你不需要自己逃避它们。如果魔术引号打开，我建议删除斜杠，然后使用 mysql_real_escape_string()：

```
if(get_magic_quotes_gpc()) {
    $string = stripslashes($string);
}

$string = mysql_real_escape_string($string);

$cleanedString = str_replace('%','',$string); 
```

此外，MySQL 中的下划线是单个字符的通配符，因此您可能需要对此做一些事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T01:01:44.840

如果你真的担心 SQL 注入问题，你应该强烈考虑使用准备好的语句。因为在提供任何用户数据之前对 SQL 语句进行评估，所以您的代码更加安全。

参见 PDO 和 Mysqli

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-03T23:58:12.677

关于第二点：
它完全是多余的，如果您通过 mysql_real_escape_string() 运行它，所有字符都已正确转义

# ruby-on-rails - 是否可以在 ruby 中取消定义变量？

> ID：339181
> 
> 赞同：6
> 
> 时间：2008-12-03T23:51:31.817
> 
> 标签：ruby-on-rails, ruby

在 ruby​​ 中，一旦定义了变量或常量，有没有办法“取消定义”？

在我们的 Rails 环境中，我们`true`根据环境将三个常量之一定义为 ：`TESTING`、`DEVELOPMENT`或`PRODUCTION`。然后，在控制器代码中，我们使用`defined?`来查看我们所处的环境，即：`defined? PRODUCTION`.

现在，我想对一些特定于环境的行为进行单元测试。我最初的尝试是在我的测试中设置适当的常量，然后在拆解时重置它们。但是，我不知道如何重置`DEVELOPMENT`并且返回 false。`PRODUCTION``defined?`

显然，一个解决方案是除了检查它是否已定义之外，只检查适当的常量是否也为真，但这将导致不得不触及大量现有代码。

编辑：我意识到这绝对不是正确的做事方式。唉，改变它是一项不平凡的任务，所以我正在寻找一种简单的方法来对现在的内容进行单元测试。另外，我也只是对是否可以取消定义变量/常量的低级语言问题感到好奇。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-04T00:46:32.097

我找到[了这个答案](http://www.ruby-forum.com/topic/2530)

```
Object.send(:remove_const, "TESTING") 
```

如果我没记错的话，`send`在这里使用是一种 hack，因为 remove_const 实际上是一个私有方法。您想问自己为什么需要同时定义常量 PRODUCTION、DEVELOPMENT 和 TESTING，而它们实际上是互斥的；这就是为什么我赞成 grepsedawk 的回答。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T00:43:10.433

好吧，我猜是因为它被标记为 RubyOnRails，我们在这里谈论的是 Rails……环境已经存储在 RAILS_ENV 中，所以做类似的事情就可以了……

```
if (RAILS_ENV == "production") ... 
```

我想你也可以这样写：

```
RAILS_ENV.include?("development") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-04T00:38:17.213

对互斥的条件使用三个真/假变量没有什么意义。例如，如果同时设置 DEVELOPMENT 和 PRODUCTION 会发生什么。

相反，有一个变量来指示您所处的环境，设置`ENVIRON`为集合之一（`DEV`, `TEST`, `PROD`）或类似的东西。

然后，您可以`ENVIRON`针对要执行的每个操作与三个中的一个进行比较。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T00:20:28.247

与其检查每个常量，不如执行以下操作：

```
environment = :TESTING

if(environment == :TESTING) 
```

# c# - C# 语法 - Lambda 表达式示例 - ForEach() over Generic List

> ID：339199
> 
> 赞同：47
> 
> 时间：2008-12-04T00:05:06.733
> 
> 标签：c#, .net, syntax, lambda

首先，我知道`List<>`框架中已经有一些通用类的方法可以遍历`List<>`.

但是作为一个例子，编写 ForEach 方法来迭代 a 的每个对象`List<>`并在每个对象上执行 a的正确语法是什么`Console.WriteLine(object.ToString())`。将`List<>`λ 作为第一个参数，将 lambda 表达式作为第二个参数的东西。

我见过的大多数示例都是作为扩展方法完成的，或者涉及 LINQ。我正在寻找一个普通的方法示例。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-12-04T00:11:13.540

```
public void Each<T>(IEnumerable<T> items, Action<T> action)
{
    foreach (var item in items)
        action(item);
} 
```

...并这样称呼它：

```
Each(myList, i => Console.WriteLine(i)); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2011-11-25T21:47:56.583

这是你要求的吗？

```
int[] numbers = { 1, 2, 3 };
numbers.ToList().ForEach(n => Console.WriteLine(n)); 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2009-07-01T15:52:29.640

上面的代码也可以用更少的代码写成：

```
new List<SomeType>(items).ForEach(
    i => Console.WriteLine(i)
); 
```

这将创建一个通用列表并使用 IEnumerable 填充它，然后调用列表对象 ForEach。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-25T11:22:43.573

```
public static void Each<T>(this IEnumerable<T> items, Action<T> action) {
foreach (var item in items) {
    action(item);
} } 
```

...并这样称呼它：

```
myList.Each(x => { x.Enabled = false; }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-30T02:35:44.283

想要说明的是，如果有人将答案作为扩展方法提供，则不必担心，因为扩展方法只是调用实例方法的一种很酷的方法。我了解您在不使用扩展方法的情况下想要答案。无论该方法是定义为静态、实例还是扩展，结果都是一样的。

下面的代码使用接受的答案中的代码来定义扩展方法和实例方法，并创建一个单元测试以显示输出是相同的。

```
public static class Extensions
{
    public static void Each<T>(this IEnumerable<T> items, Action<T> action)
    {
        foreach (var item in items)
        {
            action(item);
        }
    }
}

[TestFixture]
public class ForEachTests
{
    public void Each<T>(IEnumerable<T> items, Action<T> action)
    {
        foreach (var item in items)
        {
            action(item);
        }
    }

    private string _extensionOutput;

    private void SaveExtensionOutput(string value)
    {
        _extensionOutput += value;
    }

    private string _instanceOutput;

    private void SaveInstanceOutput(string value)
    {
        _instanceOutput += value;
    }

    [Test]
    public void Test1()
    {
        string[] teams = new string[] {"cowboys", "falcons", "browns", "chargers", "rams", "seahawks", "lions", "heat", "blackhawks", "penguins", "pirates"};

        Each(teams, SaveInstanceOutput);

        teams.Each(SaveExtensionOutput);

        Assert.AreEqual(_extensionOutput, _instanceOutput);
    }
} 
```

从字面上看，将扩展方法转换为实例方法所需要做的唯一事情就是删除`static`修饰符和方法的第一个参数。

这种方法

```
public static void Each<T>(this IEnumerable<T> items, Action<T> action)
{
    foreach (var item in items)
    {
        action(item);
    }
 } 
```

变成

```
public void Each<T>(Action<T> action)
{
    foreach (var item in items)
    {
        action(item);
    }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-21T09:05:36.057

您可以遍历列表中的每个字符串，甚至可以使用单个语句在整个泛型中搜索，这使得搜索更容易。

```
public static void main(string[] args)
{
List names = new List();

names.Add(“Saurabh”);
names.Add("Garima");
names.Add(“Vivek”);
names.Add(“Sandeep”);

string stringResult = names.Find( name => name.Equals(“Garima”));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-27T18:59:31.850

标准：

```
foreach (Item i in allItems)
{
   i.FK_ItemStatus_CustomCodeID = itemStatuses.Where(
      x => x.CustomCodeID == i.ItemStatus_CustomCodeID).FirstOrDefault();                        
} 
```

拉姆达：

```
allItems.ForEach(
   i => i.FK_ItemStatus_CustomCodeID = 
      itemStatuses.Where(
         x => x.CustomCodeID == i.ItemStatus_CustomCodeID).FirstOrDefault()
      ); 
```

# c++ - 如何在 WM6 中创建圆角矩形按钮？

> ID：339200
> 
> 赞同：0
> 
> 时间：2008-12-04T00:05:25.783
> 
> 标签：c++, user-interface, windows-mobile

是的，就像 iPhone 上那些漂亮的按钮一样。;)

我已经搜索和阅读了好几天，每次我找到能让我接近的东西（比如 CreateRoundRectRgn），它就会爆炸，因为 Windows Mobile 6 GDI+ 不支持它。

我可以做整个主人画的事情等等。但是我如何弯曲那些硬角并重塑按钮？：/

注意可用工具：仅本机 Win32（无 MFC）

* * *

我有这个想法，但它留下了两个问题：

1) 带有圆边的位图不会仍然使按钮的角可见。

2) 位图非常适合固定屏幕尺寸。但是有多种分辨率，我的目标是在运行时在内存中动态创建按钮位图并以这种方式使用它。

我已经使用方形按钮了。然而，我见过其他软件使用的圆角按钮。***必须***有一种方法来重塑按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T00:18:09.593

获得这样漂亮的按钮通常是通过制作一个完整的所有者绘制的按钮并绘制一个图形设计师为其创建的图像来完成的，而不是让 GDI 进行任何控件绘制。您只需要一个“向上”的图像和一个“按下”的图像。您可以手动绘制焦点或使用另一个带有 ROP 蒙版的图像将其绘制在按钮上。要获得漂亮的“圆角”效果，您只需使用背景颜色创建图像，然后将其用作透明度颜色。

Tee 缩放问题是 WinMo 独有的，因为 iPhone 确实只有一种分辨率。如果您需要针对不同分辨率的 WinMo 设备，您可以执行以下两项操作之一（您使用的操作取决于您使用的图像）。Eitehr 只是绘制缩放的图像，或者包含不同大小的图像版本，并在运行时根据屏幕分辨率决定使用哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T13:28:48.607

您可以使用 RoundRect GDI 函数在所有者绘制的控件上执行此操作。

```
//Set up a brush and pen
HBRUSH brush = CreateSolidBrush(RGB(255, 0, 0));
HPEN pen = CreatePen(PS_SOLID, 1, RGB(0, 255, 0));

//Select it
HGDIOBJ old_brush = SelectObject(hdc, brush);
HGDIOBJ old_pen = SelectObject(hdc, pen);

//Draw your rectangle
RoundRect(hdc, m_rect.left, m_rect.top, m_rect.right, m_rect.bottom, 10, 10);

//restore the old state of your HDC
SelectObject(hdc, old_brush);
SelectObject(hdc, old_pen);

//Clean up
DeleteObject(brush);
DeleteObject(pen); 
```

如果你想做一些更高级的事情，比如用渐变填充它，你可以将渐变绘制到屏幕外缓冲区并使用 CreatePatternBrush 从中绘制。

# php - PHP包含需要的文件策略

> ID：339202
> 
> 赞同：11
> 
> 时间：2008-12-04T00:07:20.537
> 
> 标签：php

我正在建立一个 php 项目，但对如何正确使用 php 的 include/require 命令不是很熟悉。我的布局目前看起来像这样：

```
/public   --apache points into this directory  
/public/index.php  
/public/blah/page.php  
/utils/util1.php       -- useful classes/code are stored in other directories out here  
/dbaccess/db1.php  

dbaccess/db1.php  

require '../utils/util1.php 
```

公共/index.php

```
require '../dbaccess/db1.php' 
```

公共/blah/page.php

```
require '../../dbaccess/db1.php' 
```

问题是来自 php 'include' 文档：

> 如果文件名以 ./ 或 ../ 开头，则仅在当前工作目录中查找

所以 public/blah/page.php 失败了，因为它包含 dbaccess/db1.php，当它试图包含 util1.php 时它会爆炸。它失败了，因为它的相对路径来自 public/blah/ 中的原始脚本，而不是来自 dbaccess/

这似乎很愚蠢—— db1.php 只需要知道它是从哪里包含的，哪些是行不通的。

我见过这样的策略：

```
require_once dirname(__FILE__) . '/../utils/util1.php'); 
```

这显然有效，因为现在路径是绝对路径，但对我来说似乎真的很奇怪。

这正常吗？我应该继续沿着这条路走下去，还是我在这里遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-04T16:36:17.827

通常，标准约定是这样的：就像@grepsedawk 所说，您需要定义一个包含项目文件夹根目录的常量，如果可以的话，您可以定义包含文件夹的根目录：

```
define('APP_ROOT', dirname(__FILE__));
define('INCLUDE_ROOT', APP_ROOT . "/includes"); 
```

注意：常量名必须是字符串！

此外，您会注意到我正在使用`dirname(__FILE__);`. 如果将常量定义文件放在子目录中，则可以执行 a `dirname(dirname(__FILE__));`，这相当于 a `../`。

现在还有一些其他警告。虽然`PATH_SEPARATOR`是一个很酷的常数，但它不是必需的。Windows 在路径名中接受 / 或 \，并且由于 Linux 仅用户 / 作为路径分隔符，请继续并始终使用 / 而不是通过重复引用来混淆您的代码`PATH_SEPARATOR`。

现在您已经定义了根常量，当您需要包含配置文件时，您将做的事情很简单：

```
include INCLUDE_ROOT . '/path/to/some/file.php'; 
```

您可能希望`define(...)`在根目录的引导脚本中使用常量定义（上面的）：

> ```
> www_root/
>   index.php
>   bootstrap.php 
> ```

引导程序将包含定义（或`include`常量文件），以及`include`每个页面所需的任何文件。

最后一个您可能不会使用的标准约定，但是如果您开始进行面向对象编程，最常用的方法（PEAR 标准）是通过使用 _ 来分隔命名空间来命名您的类：

```
class GlobalNamespace_Namespace_Class
//... 
```

然后将您的文件结构映射名称空间组织到子目录（字面上用 / 替换所有 _）：

> ```
> include_dir/
>   GlobalNamespace/
>       Namespace/
>           Class.php 
> ```

并使用`__autoload()`函数来加载你的类，但这是另一个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-04T00:18:37.237

有一个配置脚本来设置项目的“安装根”，然后使用绝对路径。具有多个包含的相对路径在 php 中是一个令人头疼的问题。

DEFINE("INSTALL_ROOT", "/path/to/www/project")

require_once(INSTALL_ROOT . '/util1.php')

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T02:29:17.817

在我的配置/设置文件中，我做了类似的事情

`define('MYAPP_BASEDIR',realpath('.'));`

然后我引用与此相关的所有内容。

...如果您的包含目录与类文件特别相关，并且您能够命名它们以便包含文件名可以从类派生，您可能希望查看[`spl_autoload_register()`](http://php.net/spl_autoload_register).

后一部分不是您问题的直接答案，但如果您为使用的每个类都包含内容，它会非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T01:52:56.860

请记住，它从当前工作目录开始，然后查看包含路径。如果您想从某个中央根目录（或多个）引用所有路径，您可以将该目录添加到 php.ini 文件中，或者您可以通过编程方式使用`set_include_path( $path.PATH_SEPERATOR.get_include_path());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T02:10:59.290

我建议一种抽象策略。

1.  在您的应用程序页面区域中，有一个所有页面都包含的文件。

2.  这个“本地”包含文件有一项工作：找到应用程序页面区域之外的包含文件。然后它包括那个。它可能很简单`<?php include dirname(__FILE__).'/../include/include.php/'; ?>`

3.  第二个文件是您的库结构的*单一入口点。*它，或者它包含的其他东西，负责找到所有东西的位置并将其包括在内。

这种结构意味着您只有一个文件作为库的入口点，它如何找到库的其余部分不是应用程序页面的问题。这也意味着您的应用程序区域中只有一个文件知道如何找到您的库的入口点。

如果您需要一种方法让不同的应用程序页面加载不同的东西，我建议采用模块化方法。这可以是您在主包含之前设置的全局数组，也可以是您可以调用以按名称请求库的函数。是的，这是您的主库文件声明所有内容的常量的一种稍微花哨的方式——但它消除了这样做的诱惑，`include LIBRARY_DIR.'/utils/util.php';`这直接导致以后`util.php`移出`utils`和移入不必要的困难`misc/util`。

链接文件的另一个优点是使您的代码库可重定位变得更加容易，这使得多个版本可以运行成为可能。并且它可以为应用程序创建一棵树，为您的库创建另一棵树。这意味着另一个应用程序可以使用您的库。事实上，如果您想进一步帮助隔离，您可以进一步扩展链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T19:22:39.393

你是对的，你的脚本不必知道你包含的物理路径。

IMO 应在 PHP.INI 文件（或 .htaccess，如果您愿意）中配置包含的位置。

假设您的包含（实用程序和数据库存储在这里/home/scott/php_includes/）。

PHP.INI:

> include_path=.:/home/scott/php_includes/

现在您的脚本可以通过这种方式包含库：

dbaccess/db1.php：

> require_once 'utils/util1.php';

公共/index.php

> require_once 'dbaccess/db1.php';

公共/blah/page.php：

> require_once 'dbaccess/db1.php';

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-04T19:29:55.790

很多人都提供了很好的解决方案，但我在谈论 include 和 requires 时只得到了一个与性能相关的评论。

如果您开始包含并要求大量文件，则可能很容易使用 include_once 或 require_once。使用大量 _once 的脚本的缓存研究表明，它们确实会降低性能，因为脚本必须停止其扫描操作并确保文件尚未包含在内。尽可能多地消除 _once 会很有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-19T13:44:53.743

有一个完美的解决方案——pecl 扩展名为“pwee”——它允许用户使用 XML 文件定义他/她自己的外部超全局常量/变量。因此，您可以使用我推荐的绝对路径：

```
require_once APP_ROOT."/path/to/your/script.php"; 
```

这种解决方案的优点是：

*   从任何地方都可以访问
*   无服务器负载 - 服务器内存中的所有内容

包含的 XML 文件

```
 <Environments>
    <Application name="www.domain.com" namespace="">
      <Constants>
        <Constant name="APP_ROOT" value="/full/path/to/project/source" />
      </Constants>
      <Constants>
        <Constant name="WEB_ROOT" value="/full/path/to/project/public" />
      </Constants>
    </Application>
  </Environments> 
```

[pwee 项目的链接](http://pwee.sourceforge.net/)

您应该区分这些包含情况：

*   独立库 - 所有包含都应该是相对的 - 让用户轻松将其集成到他/她的项目中
*   公共目录中的可执行脚本 - 包含项目文件和独立库公共文件的绝对包含（其中包含相对包含 - 对用户透明）。使用 APP_ROOT 常量是一种优雅的方式。
*   a、链接、脚本、表单 html 元素和标头转发在深入树层次结构时应使用相对路径，在使用更高层次结构级别的公共文件时应使用绝对路径

如果是相对路径，请使用以下形式：

```
 require_once "./relative/path/to/script.php"; 
```

为什么我用过去时？因为该项目不受更多支持 - 仅适用于 Php4。如果有人知道支持的类似解决方案，请告诉我。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-27T23:24:14.177

最好的方法是构建灵活的自动加载系统。

类名和专有补丁的简单映射。然后不需要任何内部 require_* 或 include_* 。

自动加载器当然有相对/绝对路径的问题。好吧，absolute 是系统效率最高的，所以在我之前提到的数组中，你可以在前面添加某种变量 {我使用了 Phing 风格的变量}，例如

```
<map>
    <path classname="MyClass">${project_directory}/libs/my_classes/MyClass.php</path>
    <path classname="OtherClass">${project_directory}/libs/some_new/Other.php</path>
    <!-- its so flexible that even external libraries fit in -->
    <path classname="Propel">${project_directory}/vendors/propel/Propel.php</path>
    <!-- etc -->
</map> 
```

这是 xml（也可以考虑 ini 或 yaml）文件，需要在第一次启动时编译为 php，但之后任何路径都是绝对的。

哦，正如您所见，没有文件命名约定或文件布局是强制性的——它的巨大优势。

干杯，艾伦。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-05-12T23:25:57.257

似乎每次我将简单的脚本从一台服务器移动到另一台服务器时，我都必须重新定义事物的位置。

我在家里搭建了一个测试环境，搭建了一些东西，然后部署到一个共享主机上。结果是它`$_server['DOCUMENT_ROOT']`比一台服务器上的文件夹高两个文件`public_html`夹，而在另一台服务器上又高一个文件夹。

这扭曲了我所有的参考资料。所以我尝试`$_server['WEB_ROOT']`了一次，但又失败了。我以为 Web 根目录是对服务器上可公开访问的文件夹根目录的引用，但我错了。

我有一个可以做一些非常简单的事情而没有添加很多我不理解的代码（我也不理解很多代码，我只是在阅读规则并让它工作时不断添加）。

这让我参考了我尝试过的所有三台服务器上的可公开访问的 Web 根目录。现在我可以将我的文件夹移动到任何地方并且它可以正常工作，不需要配置文件！

pub-doc-root.php：

```
<?php

//You only need to paste the following line into your script once,
//and it must come before you reference the public document root of your website.
//Use $pubroot.'/path_from_public_document_root_to_file/filename.php

$pubroot = (str_replace(($_SERVER['PHP_SELF']), '', (str_replace('\\', '/', (realpath(basename(getenv("SCRIPT_NAME"))))))));

//uncomment the next line to show the calculated public document root
//relative to the document root.

//echo ("$pubroot");
?> 
```

我的测试环境：

*   php 5.3.1
*   Apache 2.2.14 (Win32) mod_ssl 2.2.14 OpenSSL 0.9.8k
*   ZendServer-CE-5.0.0GA_RC181-5.3.1-Windows_x86

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-12-04T00:17:34.447

为什么不根据它的完整路径来要求它？

例如，/sharedhost/yourdomain.com/apache/www 是您的文档根目录，那么为什么不使用

```
require('/sharedhost/yourdomain.com/apache/www/dbutils.php'); 
```

这还具有您能够将您的包含存储在您的 wwwroot**之外**的优势，因此它们不太可能通过网络无意中暴露。

您还可以设置一个与它的 /sharedhost/yourdomain.com/apache/ 部分相等的全局变量，以便您可以移动站点。

```
require(WWWROOT . '/dbutils.php'); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-12-04T00:42:44.567

我用

```
require '../path/to/file.ext'; 
```

没有问题。

还需要是一个语句而不是一个函数，所以它应该被用作

```
require '/path/to/file.ext'; 
```

不是

```
require('/path/to/file.ext'); 
```

# html - 另一个 div 与表格的问题：表格

> ID：339210
> 
> 赞同：12
> 
> 时间：2008-12-04T00:12:47.467
> 
> 标签：html, css, layout, html-table

[元注释：] 我正在浏览问题页面，真的厌倦了“DIVS 与表格”“何时使用表格与 DIVS”“Div 是否比表格更好”“表格与 CSS”以及所有提出*相同问题的问题天哪*，人们，但我想看看人们处理“为什么你应该放弃和使用表格”的规范示例的翻译的所有方式：

```
<table>
  <tr>
    <td> Name </td>
    <td> <input> </td>
  </tr>
  <tr>
    <td> Social Security Number </td>
    <td> <input> </td>
  </tr>
</table> 
```

**问题：**如何在没有表格的情况下最好地（语义上、简单地、稳健地、流畅地、便携地）实现上述内容。对于初学者，我猜一个幼稚的实现对第一列使用固定的列宽，但是对于动态生成的内容可能会产生不确定的结果。在答案中包含您方法的优势/劣势会很好。

PS 另一个我很想知道的是垂直居中，但在[jakpsatweb.cz上很好地涵盖了这方面的技巧](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

编辑： sculife 提出了一个很好的例子，说明为什么我没有仔细考虑这个问题。表格可以同时对齐多个列。问题仍然存在（我希望看到用于对齐/布局的不同 CSS 技术） - 尽管可以处理他的解决方案？更多涉及的例子肯定是首选。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-04T00:21:42.410

我通常做的是：

```
<form>
 <label for="param_1">Param 1</label>
 <input id="param_1" name="param_1"><br />
 <label for="param_2">Param 2</label>
 <input id="param_2" name="param_2"><br />
</form> 
```

在 CSS 中：

```
label,input { display: block; float: left; margin-bottom: 1ex; }
input { width: 20em; }
label { text-align: right; width: 15em; padding-right: 2em; }
br { clear: left; } 
```

当然，您必须根据实际数据定义宽度:-)

*   首先，给出 label 和 input `display: block`，这样它就可以被分配一个大小并被排列起来。
*   他们都得到了`float: left`因为 Explorer 做的事情有点不同
*   很好地格式化标签
*   破解`br`以便有一个`clear: left`地方，我记得把它放在标签上在某些浏览器上不起作用。

另外，`br`即使浏览器不支持 CSS，您也可以获得很好的格式:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T00:36:36.653

诀窍是当表单变得比您的示例更复杂时，您会意识到表格启用了其他元素无法做到的“灵活网格”。

例如，如果“输入”比文本框更复杂怎么办？例如一堆单选按钮，每个都有自己的标签：

```
Color: [____Red___][v]
 Hood: [*] 
 Size: (_) Small
       (_) Medium
       (_) Large
       (*) X-Large 
```

如果你只需要简单的表格，CSS 就很棒，但只要你需要一个网格，事情就会变得有趣......

如果您真的想这样做，我会查看[The Man In Blue 的解决方案](http://www.themaninblue.com/experiment/InForm/margin.htm)，它运行良好且非常干净。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T15:53:37.223

人们谈论表格让他们的表格以他们想要的方式显示，这是真的，只有当你想在列中显示你的表格并且愿意失去语义意义时。有了下面的 HTML，就可以在尽可能多的布局中显示此表单。

顺便说一句 - 不`<br />`

```
<form>
 <fieldset>
  <legend>Personal Info</fieldset>
  <div>
   <label for="name">Name</label>
   <input id="name" name="name" />
  </div>
  <div>
   <label for="ssn">Social Security Number</label>
   <input id="ssn" name="ssn" />
  </div>
 </fieldset>
</form> 
```

您可以清除`<divs>`或设置它们以`overflow: hidden`确保清除浮动。

来自上述 html 的选项：

```
Name |==============|    SSN |==============|

Name |==============|
SSN |==============|

Name     |==============|
SSN      |==============|

    Name |==============|
     SSN |==============|

   Name: |==============|
    SSN: |==============|

Name:
|==============|
SSN:
|==============| 
```

只需几行 css 即可完成上述所有操作。

当涉及到单选、复选框和提交按钮时，它会变得有点复杂，但是可以使用 css 以您想要的方式显示干净的语义 HTML。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-29T17:14:59.150

尽管其他建议可能更适合获得灵活的布局，但该问题的字面答案类似于：

> ```
> <form action="www.example.com">
>     <div class="table">
>         <div class="tbody">
>           <div class="tr">
>             <div class="td"> <label for="name">Name</label> </div>
>             <div class="td"> <input id="name"> </div>
>           </div>
>           <div class="tr">
>             <div class="td"> <label for="ssn">Social Security Number</label> </div>
>             <div class="td"> <input id="ssn"> </div>
>           </div>
>         </div>
>     </div>
> </form> 
> ```

和

> ```
>  <style type="text/css">
>         div.table { display:table; border-spacing:2px; }
>         div.tbody { display:table-row-group; }
>         div.tr { display:table-row; }
>         div.td { display:table-cell; vertical-align: middle; padding:1px; }
>     </style> 
> ```

这适用于最新版本的 Firefox、Chrome、Opera 和 Safari。它也适用于 IE8 Beta 2（标准模式）。它不适用于 IE7 或更早版本，但“渐进增强”等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T00:35:07.577

我在想类似的东西：

```
<div style="text-align:right; float:left;">
    Name: <input /> <br />
    Social Security Number: <input /> <br />
</div> 
```

其中，如果右列是固定长度的，则可以与可变文本长度对齐，但我想知道这种方法的缺点是什么？

# c# - .NET 中的表达式树 - 库？

> ID：339211
> 
> 赞同：6
> 
> 时间：2008-12-04T00:13:47.857
> 
> 标签：c#, .net, expression-trees

我最近使用表达式树编写了一个动态查询工具，随着我的使用，表达式树的力量开始显现。我的查询工具还可以构成报告工具、动态决策引擎以及可能需要以抽象方式处理动态对象的其他情况的基础。

这个过程很痛苦（通过反射递归调用泛型方法 - 呃）所以我想知道是否有人创建了一个可以利用表达式树的力量来完成其中一些任务的泛型库？我见过[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)但有人知道其他人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T05:08:52.690

[泛型运算符](http://www.pobox.com/~skeet/csharp/miscutil/usage/genericoperators.html)（在[MiscUtil](http://www.pobox.com/~skeet/csharp/miscutil/)中）是一种基于表达式树的很好利用的代码；非常简单，但用途广泛。其他一些想法：

*   [克隆对象](http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/d9722a51b04300a/0edae91abc1c0f1a#0edae91abc1c0f1a)
*   [动态排序](http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/9ca28e3f0205bb87/c5b6c43ef3f38ae9)
*   [动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

（很多其他的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T09:35:15.973

你看过DLR吗？我对它了解不多，但我的理解是，Linq-to-SQL 中幕后的表达式树机制已经有效地发布在 DLR 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T16:51:29.900

[NJection](http://www.njection.net/)是一个通过配置文件处理代码注入的库。
[NJection.LambdaConverter](https://github.com/sagifogel/NJection.LambdaConverter)是一个将委托转换为表达式树的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T00:47:08.723

你看过 LINQ 和 IQueryable 接口吗？这就是他们实现 LINQ to SQL 等的方式。

# python - 在 python 中为 DSL 编写编译器

> ID：339217
> 
> 赞同：6
> 
> 时间：2008-12-04T00:17:14.853
> 
> 标签：python, dsl, dsl-tools

我正在用 python 编写游戏，并决定为地图数据文件创建一个 DSL。我知道我可以用正则表达式编写自己的解析器，但我想知道是否有现有的 python 工具可以更容易地做到这一点，比如 PHP 引擎中使用的 re2c。

一些额外的信息：

*   是的，我*确实*需要 DSL，即使我不需要，我仍然想要在项目中构建和使用 DSL。
*   DSL 只包含数据（声明性的？），它不会被“执行”。大多数行看起来像：

    `SOMETHING: !abc @123 #xyz/123`

    我只需要读取数据树。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-04T01:02:53.107

我一直对[pyparsing](http://pyparsing.wikispaces.com/)印象深刻。作者 Paul McGuire 在[python 列表](http://mail.python.org/mailman/listinfo/python-list)/comp.lang.python上很[活跃](http://groups.google.com/group/comp.lang.python)，并且对任何有关它的查询都非常有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T01:09:56.947

这是一种非常有效的方法。

```
abc= ONETHING( ... )
xyz= ANOTHERTHING( ... )
pqr= SOMETHING( this=abc, that=123, more=(xyz,123) ) 
```

声明性的。易于解析。

和...

它实际上是 Python。一些类声明，工作就完成了。DSL 实际上是类声明。

重要的是 DSL 只是创建对象。定义 DSL 时，首先必须从对象模型开始。稍后，您围绕该对象模型添加了一些语法。您不是从语法开始，而是从模型开始。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-04T00:59:31.600

是的，有很多——太多了——解析工具，但标准库中没有。

据我所见，PLY 和 SPARK 很受欢迎。[PLY](http://www.dabeaz.com/ply/)就像 yacc，但你用 Python 做所有事情，因为你用文档字符串编写语法。

就个人而言，我喜欢解析器组合器的概念（取自函数式编程），我也非常喜欢[pyparsing](http://pyparsing.wikispaces.com/)：您可以直接在 python 中编写语法和操作，而且很容易上手。我最终生成了我自己的带有动作的树节点类型，而不是使用它们的默认`ParserElement`类型。

否则，您还可以使用现有的声明性语言，例如[YAML](http://www.dabeaz.com/ply/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T20:08:42.280

我在工作中编写了类似的东西来读取 SNMP 通知定义并从中自动生成 Java 类和 SNMP MIB 文件。使用这个小 DSL，我可以编写 20 行规范，它会生成大约 80 行 Java 代码和一个 100 行 MIB 文件。

为了实现这一点，我实际上只是使用了直接的 Python 字符串处理（split()、切片等）来解析文件。我发现 Python 的字符串功能足以满足我的大多数（简单）解析需求。

除了其他人提到的库之外，如果我正在编写更复杂的东西并且需要适当的解析功能，我可能会使用支持 Python（和其他语言）的[ANTLR 。](http://www.antlr.org/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-05T06:10:45.340

DSL 是个*好东西*，所以你不需要为自己辩护 :-) 但是，你考虑过内部 DSL 吗？与外部（解析的）DSL 相比，它们有很多优点，至少值得考虑。将 DSL 与本机语言的强大功能混合在一起确实可以为您解决很多问题，而且 Python 在内部 DSL 方面也不是很差，而且`with`声明很方便。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-11-02T12:00:47.817

对于您所描述的“小语言”，我使用简单的拆分、shlex（请注意 # 定义注释）或正则表达式。

```
>>> line = 'SOMETHING: !abc @123 #xyz/123'

>>> line.split()
['SOMETHING:', '!abc', '@123', '#xyz/123']

>>> import shlex
>>> list(shlex.shlex(line))
['SOMETHING', ':', '!', 'abc', '@', '123'] 
```

以下是一个示例，因为我不知道您在寻找什么。

```
>>> import re
>>> result = re.match(r'([A-Z]*): !([a-z]*) @([0-9]*) #([a-z0-9/]*)', line)
>>> result.groups()
('SOMETHING', 'abc', '123', 'xyz/123') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-18T10:15:42.693

在声明性 python 的行中，我编写了一个名为“bpyml”的辅助模块，它可以让你以一种更 XML 结构化的方式在 python 中声明数据，而不需要详细的标签，它也可以转换为 XML 或从 XML 转换，但它是有效的 python。

[https://svn.blender.org/svnroot/bf-blender/trunk/blender/release/scripts/modules/bpyml.py](https://svn.blender.org/svnroot/bf-blender/trunk/blender/release/scripts/modules/bpyml.py)

示例使用 [http://wiki.blender.org/index.php/User:Ideasman42#Declarative_UI_In_Blender](http://wiki.blender.org/index.php/User:Ideasman42#Declarative_UI_In_Blender)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-30T13:29:19.373

### 这是一个更简单的方法来解决它

如果我可以使用新的运算符扩展 python 语法以在语言中引入新的功能怎么办？例如，`<=>`用于交换两个变量值的 new 运算符。

我怎样才能实现这种行为？AST 模块来了。最后一个模块是处理抽象语法树的便捷工具。这个模块最酷的地方在于它允许我编写生成树然后将其编译为 python 代码的 python 代码。

假设我们想将超集语言（或类似 Python 的语言）编译为 Python：

从 ：

```
 a <=> b 
```

至：

```
 a , b = b , a 
```

1.  我需要将我的“python like”源代码转换为令牌列表。所以我需要一个分词器，一个 Python 源代码的词法扫描器。[标记模块](https://docs.python.org/3/library/tokenize.html)

2.  我可以使用相同的元语言来定义新的“类 Python”语言的语法，然后构建抽象语法树[AST的结构](https://docs.python.org/3/library/ast.html#node-classes)

为什么要使用 AST？

1.  在评估不受信任的代码时，AST 是一个更安全的选择
2.  在执行代码之前操作[树](https://greentreesnakes.readthedocs.io/en/latest/manipulating.html#modifying-the-tree)

```
from tokenize import untokenize, tokenize, NUMBER, STRING, NAME, OP, COMMA
import io
import ast

s = b"a <=> b\n" # i may read it from file
b = io.BytesIO(s)
g = tokenize(b.readline)
result = []
for token_num, token_val, _, _, _ in g:
    # naive simple approach to compile a<=>b to a,b = b,a
    if token_num == OP and token_val == '<=' and next(g).string == '>':
        first  = result.pop()
        next_token = next(g)
        second = (NAME, next_token.string)
        result.extend([
            first,
            (COMMA, ','),
            second,
            (OP, '='),
            second,
            (COMMA, ','),
            first,
        ])
    else:
        result.append((token_num, token_val))

src = untokenize(result).decode('utf-8')
exp = ast.parse(src)
code = compile(exp, filename='', mode='exec')

def my_swap(a, b):
    global code
    env = {
        "a": a,
        "b": b
    }
    exec(code, env)
    return env['a'], env['b']

print(my_swap(1,10)) 
```

其他使用 AST 的模块，其源代码可能是有用的参考：

*   [textX-LS](https://tomassetti.me/domain-specific-languages-in-python-with-textx/)：用于描述形状集合并为我们绘制的 DSL。

*   [pony orm](https://ponyorm.org/)：您可以使用 Python 生成器和 lambdas 编写数据库查询，并转换为 SQL 查询字符串——pony orm 在后台使用 AST

*   [osso](https://www.osohq.com)：基于角色的访问控制框架处理权限。

# delphi - Delphi Short Cut 添加日期和名称注释

> ID：339225
> 
> 赞同：4
> 
> 时间：2008-12-04T00:19:28.937
> 
> 标签：delphi, comments, delphi-7

有谁知道放置我的名字和光标所在日期的捷径，即

```
 //021208 DarkAxi0m 
```

所以我在添加评论时不会一直检查日期。

我使用的是 Delphi7，安装了 CnPack 和 GExperts。我认为它应该能够与其中一位专家一起完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T16:03:39.030

我使用 GExperts 来执行此操作，如下所示：

在里面

G专家\配置

选择编辑器专家选项卡。

在专家列表中，选择

插入日期\时间

单击配置，插入所需的文本：

'//' ddmmyy 'DarkAxi0m: ' //021208 DarkAxi0m:

之后，要插入新的日期名称注释，您需要做的就是：

ctrl+alt+a

我让大多数程序员从事这样的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T07:46:37.630

使用 GExperts 的扩展宏模板（可在编辑器专家中找到）也很简单。

我使用这个扩展在当前位置插入 yyyy-mm-dd：

%YEAR%-%MONTH%-%DAY%|

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-05T13:24:06.057

对于适用于 Windows 下的大多数应用程序的解决方案，不仅在 Delphi 中，您可以使用 Authotkey（免费，autohotkey.com）。它的众多功能之一是能够扩展您键入的字符串 - 通常用于自动更正拼写错误。

我以分号开头所有快捷方式字符串，因为它实际上从不引导我在现实生活中键入的字符串，因此在您的示例中，要插入评论日期用户名序列，我想键入分号、斜杠、斜杠：

```
;// 
```

Authotkey 脚本（您可以将其放入 .ahk 文本文件并将该文件添加到 Autostart）如下所示：

```
::;//::                             ; this means: when I type ";//", do what follows
FormatTime, curDate,, yyyy-MM-dd    ; the double comma is intended
SendInput // %curDate% %A_UserName% ; variable expansion
return 
```

这会产生以下输出：

```
// 2008-12-05 moodforaday 
```

AHK 语法有点密集，但有一个广泛的帮助文件。

编辑时：可以扩展此脚本以应用正确的注释语法，具体取决于您目前正在使用的 IDE。您将检测活动窗口标题，找到签名子字符串（“Delphi”）并选择正确的注释字符。这样，无论当前的 IDE 或语言如何，您都可以键入相同的热字串来插入您的评论。你也可以使用 SendInput 来定位插入符，就像 Delphi 模板一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T00:24:55.243

没关系在 CnPack/Soure 模板中找到一个 添加了模板

```
 //%Date% DarkAxi0m 
```

注意：我应该更仔细地查看菜单

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-04T01:44:12.963

您还可以查看 Live Templates 功能，该功能可以编写脚本来执行您想要的操作：

[http://cc.codegear.com/Item/24990](http://cc.codegear.com/Item/24990)

不要被名字吓到，它包括一个模板脚本，包括日期、时间，包括你想要的格式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-25T18:53:14.073

这是 GExperts (www.gexperts.org) 的一个变体，可以轻松搜索基于开发人员或日期的更改。

输出和注释示例：

```
 //07.25.2009 (SLB20090725) - Added 3rd optional parameter. 
```

除了易于阅读的日期外，我还可以轻松搜索评论程序员，按年、年+月等。例如，我可以搜索 (SLB200905 以查找我在 2009 年 5 月登录的任何评论。

要做的事情：在 GExperts 菜单下打开 Configuration...（在列表底部），然后选择 Editor Experts 选项卡。找到“插入日期/时间”并双击它。

//mm.dd.yyyy '(ABC'yyyymmdd') -'

其中 ABC 是程序员的姓名、姓名首字母、id 或其他。

然后在 Delphi 的 IDE 中使用 Ctrl-Alt-A 插入

这应该适用于 GExperts 支持的任何 Delphi 版本。

# vba - 将撤消构建到 Excel VBA 宏中

> ID：339228
> 
> 赞同：25
> 
> 时间：2008-12-04T00:21:05.453
> 
> 标签：vba, excel, undo

Excel 宏在运行后似乎不允许使用“撤消”。有没有办法将`undo`功能烘焙到 Excel 中的 VBA 宏中？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-04T00:39:28.130

Excel VBA 具有`Application.OnUndo`处理此问题的功能：

```
Public Sub DoSomething

    ... do stuff here

    Application.OnUndo "Undo something", "UnDoSomething"
End Sub

Public Sub UnDoSomething

    ... reverse the action here

End Sub
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-23T18:01:08.920

我的想法很简单，因为宏中的第一行将副本保存在备份目录中，然后关闭该工作簿并重新打开原始文件。如果您不喜欢宏运行的结果，请调出保存的工作簿。保持简单吧？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-04T00:25:36.130

我总是在运行宏之前立即保存（至少在测试期间）然后，如果一切都变成梨形，我可以直接退出而不保存并重新打开它。

将其烘焙到实际的宏中，您基本上必须在列表中记录所有更改的旧状态（单元格内容、公式、格式等），然后有一个撤消宏以相反的顺序播放该列表。

例如，如果您的宏将单元格 C22 的内容从“3”更改为“7”并将格式从“常规”更改为“数字，2 位小数），您的列表将是：

```
C22 value  3
C22 format general 
```

以相反的顺序播放（使用另一个宏）将还原更改。

您可以有一个完整的额外工作表来保存宏撤消信息，例如：

```
Step   Cell   Type    Value
----   ----   -----   -------
   1   C22    value         3
       C22    format  general
   2... 
```

不幸的是，它不能很好地与“真正的”撤消集成，但我认为没有任何方法可以解决这个问题。

# javascript - Javascript 表单验证

> ID：339230
> 
> 赞同：3
> 
> 时间：2008-12-04T00:22:02.597
> 
> 标签：javascript, validation

我试图弄清楚验证必填字段的最简单方法是什么，而不必为每个元素的名称执行 if 语句。也许只是用一个循环并验证它的类。

我想要完成的是只检查类名为“必需”的那些

```
<input name="a1" class="required" type="text" />
<input name="a2" class="" type="text" />
<input name="a3" class="required" type="text" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-04T01:41:43.950

我完全不反对其他人建议的库，但我认为您可能想要一些如何自己完成的示例，希望对您有所帮助。

这应该有效：

```
function validate() {
    var inputs = document.getElementsByTagName("input");

    for (inputName in inputs) {
        if (inputs[inputName].className == 'required' && inputs[inputName].value.length == 0) {
            inputs[inputName].focus();
            return false;
        }
    }

    return true;       
} 
```

还可以说您的输入采用名为“theForm”的形式：

```
function validate() {
    for (var i = 0; i < theForm.elements.length; i++) {
        if (theForm.elements[i].className == "required" && theForm.elements[i].value.length == 0) {
            theForm.elements[i].focus();
            return false;
        }
    }

    return true;
} 
```

当然，您会修剪该值和/或为应用程序添加适当的验证逻辑，但我相信您可以从示例中得到这个想法。

您还可以在输入本身上存储任意数据并使用`getAttribute()`元素上的方法读取它。例如，您可以在 html 中包含此元素（正则表达式需要 3 位数字）：

```
<input name="a1" validate="true" regex="[0-9]{3}" type="text" /> 
```

您可以使用此方法在验证例程中运行正则表达式。

```
function validate() {
    for (var i = 0; i < theForm.elements.length; i++) {
        var elem = theForm.elements[i];

        if (elem.getAttribute("validate") == "true") {
            if (!elem.value.match(elem.getAttribute("regex"))) {
                elem.select();
                return false;
            }
        }
    }

    return true;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T00:33:37.893

我使用 jQuery[验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件。效果非常好，符合您声明的只需要类属性的愿望。

```
 $(document).ready( function() {
     $('form').validate();
 }); 
```

标记必填字段后，是否只需要设置验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-10T18:38:09.587

我有点惊讶没有人提到 YUI。您可以通过以下方式轻松使用 Dom 类的 getElementsByClassName 方法：

```
var aElements = YAHOO.util.Dom.getElementsByClassName('required', 'input');
for (var i = 0; i < aElements.length; i++)
{
   // Validate
} 
```

更多方法信息可[在此处](http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_getElementsByClassName)获得，更多一般信息可[在此处获得](http://developer.yahoo.com/yui/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T02:10:22.207

我已经使用了很长时间并且对我很有帮助的一种模式是用`DIV`, or包装控件`P`并根据需要对其进行标记。

```
<div class="form-text required">
  <label for="fieldId">Your name</label>
  <input type="text" name="fieldName" id="fieldId" value="" />
</div> 
```

这意味着我可以使用 CSS 选择器轻松选择所需的字段进行验证。

```
.required input, .required select 
```

在 jQuery 中，您可以使用以下内容测试输入：

```
$('form').submit(function(){
  var fields = $(this).find('input, textarea, select'); // get all controls
  fields.removeClass('invalid'); // remove
  var inv = $(this).find('input[value=""], select[value=""]');  // select controls that have no value
  if (inv.length > 0) {
    inv.addClass('invalid'); // tag wrapper 
    return false; // stop form from submitting
  }
  // else we may submit
}); 
```

在普通的 Javascript 中，它比我想输入的要多，但大致如下：

```
var badfields = [];
var fields = theForm.getElementsByTagName('input');
for (var i=0; i< fields.length; i++ ) {
   if ( fields[i] && fields[i].parentNode && fields.value == '' &&
       /(^| )required( |$)/.test( fields[i].parentNode.className ) ) {
     badfields.push( fields[i] );
   }
}
// badfields.length > 0 == form is invalid 
```

以这种方式将标签和输入（以及可选的提示文本、错误...）包装为控件“集”的最直接好处是，您可以将 CSS 样式一起应用于输入和标签。

```
.required input, .required select {
  border : 1px solid red;
}
.required label {
  color : #800;
}
.invalid input, .invalid select {
  background-color : #f88;
} 
```

我建议使用现成的解决方案进行表单验证，因为可以快速添加：您将如何验证复选框？可以需要复选框吗？（EULA？）单选按钮呢，您将如何检查这些？

大多数验证解决方案还将提供糖分，例如验证正确的数据（例如，电子邮件地址），而不仅仅是检查它是否存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T00:25:14.307

我建议您使用[这个基于 javascript 的 css 选择器](http://www.openjs.com/scripts/dom/css_selector/)，它将获取特定类的所有元素。就像你提到的那样验证表格。

# c# - 关于从嵌套语句返回的快速问题

> ID：339231
> 
> 赞同：1
> 
> 时间：2008-12-04T00:22:47.853
> 
> 标签：c#, coding-style, function-exit, nested-statement

如果我有类似循环或一组 if/else 语句的东西，并且我想从嵌套中返回一个值（见下文），那么最好的方法是将值分配给字段或属性并返回那？

见下文：

```
bool b;

public bool ifelse(int i)
{
if(i == 5)
{
b = true;
}

else
{
b = false;
}
return b;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-04T00:27:02.430

关于什么

```
return i == 5; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T00:29:13.893

对此有多种看法。我认为大多数人（包括我）倾向于在您得到答案并且没有更多工作要做后立即返回。有些人会争辩说，你应该只在方法的最后一个语句处返回。但是，在某些情况下，它实际上会使事情变得更加复杂。

按照我的建议，你的例子会更短更简单：

```
public bool ifelse(int i)
{
if(i == 5)
{
return true
}
return false
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-04T00:34:46.457

如果 b 仅用于计算您的方法的返回值，那么您应该将其设为局部变量（在方法中定义）。

```
public bool ifelse(int i)
{
  bool b;
  /*
  Some code to calculate b
  */
  return b;
} 
```

正如其他人所建议的那样，如果您的方法很简单，我将完全避免使用临时变量并在知道结果后立即返回。一般规则是使用使代码最容易阅读的任何方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T00:33:23.947

我想说的是，您是否应该通常只在两个地方从方法返回 - 靠近开始（如在守卫条件下）和接近结束；如果该方法有任何长度，您应该使用您提到的临时变量，否则阅读代码的人可能难以理解它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T00:39:52.093

是的，这是很好的风格。

另一种选择（这会很**糟糕**）是这样做：

```
 public bool ifelse(int i) 
{ 
    if(i == 5) 
    { 
        return true; 
    }
    else 
    { 
        return false; 
    }
} 
```

多个返回点被认为是不好的风格的原因是，特别是对于较大的方法，很难跟踪方法内的程序流，因为它可能在**任何**时候退出。这可能是调试的噩梦。但是，如果您有一个要分配的返回变量，您可以观察该变量并确切知道它何时返回（从一个地方）。

情况并非*总是*如此，因为编程中的每一个风格点都有好的一面，也有不好的一面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T00:52:29.213

正如所指出的，拥有多个 return 语句的缺点是很难找到它们。OTOH 在某些情况下，转义到该 return 语句所需的附加逻辑比该样式正在解决的问题更糟糕。

我知道多次退货的主要问题是您可能很快忘记在新的退货点进行一些清理处理等。恕我直言，这与单一返回表单同样存在问题，因为转义路径必须记住包含该代码而不包含其他代码。一种解决方案（在某些语言（如 c#）中可用）是 finally 块，或者它更简洁地形成[范围声明，如此](http://www.digitalmars.com/d/2.0/statement.html#ScopeStatement)[处](http://www.digitalmars.com/d/2.0/exception-safe.html)所示。（好的，我现在就拿出我的肥皂盒）

# html - 如何禁用自动加载 ?

> ID：339243
> 
> 赞同：2
> 
> 时间：2008-12-04T00:29:43.487
> 
> 标签：html, embed

我使用以下 html 将默认媒体播放器嵌入到我的网页中

`<object height="20" width="200"> <embed src="url to music" autostart="false" loop="false" height="20" width="200"> </object>`

每次我访问网站时，这个对象都会自动下载音乐。如何禁用自动下载？我希望它仅在有人单击播放按钮时加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T23:47:34.337

我今天一直在环顾四周，我看不出有什么办法可以指示浏览器完全做到这一点。

我能想到的最好方法是`<object ...>`显示一个看起来像播放器的图像，然后向图像添加一个 onclick 属性，然后使用 javascript 将图像替换为真实对象，而不是使用 。就像是 ：

```
 <div><img src="player.png" onclick="this.parentNode.innerHTML = '<object height=\'20\' width=\'200\'> <embed src=\'url-to-music\' autostart=\'false\' loop=\'false\' height=\'20\' width=\'200\'> </object>'"></div> 
```

我应该补充一点，您必须保留`<div>`图像周围的 （或放置一个`<span>`，或您认为合适的任何标签），因为 onclick 操作替换`parentNode.innerHTML`，即包含在父级中的 HTML，在这种情况下，就是图像。

# apache - 跨多个子域使用 Apache 的 mod_auth 进行单点登录？

> ID：339244
> 
> 赞同：3
> 
> 时间：2008-12-04T00:31:21.923
> 
> 标签：apache, authentication, single-sign-on, mod-auth

我有一个域和一组需要身份验证才能访问的子域。我目前正在使用 mod_auth 在 domain.tld 级别对用户进行身份验证（mod_auth basic）。我的目标是在域和所有子域之间进行单点登录。

这些凭证会自动继续到子域，还是通过简单的虚拟主机配置更改，或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T01:05:06.473

## mod_auth_basic

浏览器通过 URL 根和身份验证领域的名称来区分需要 HTTP 身份验证的区域。

以两个域为例，每个域都有一个同名的域：

```
http://one.example.com/ with the realm "Please enter credentials!"
http://two.example.com/ with the realm "Please enter credentials!" 
```

首先，用户访问`one`，要求提供凭据并输入它们。然后用户访问`two`，浏览器识别出 URL 不同，因此再次向用户询问她的凭据。

这是一件好事，因为否则 www.badguy.com 可以设置它，以便您的浏览器通过您的网上银行登录发送。

简而言之：基本 HTTP 身份验证和标准 HTTP 客户端**无法解决您的问题。**

## mod_auth_digest

您可以改用 mod_auth_digest，因为这样您可以指定多个 URI 位于同一“保护空间”中。但是，使用这种身份验证方法存在两个新问题：

1.  它不能很好地扩展，因为您不能使用通配符域。
2.  浏览器兼容性不是很好。（请参阅有关如何使其与 IE 一起使用[的文档。）](http://httpd.apache.org/docs/2.2/mod/mod_auth_digest.html#msie)

# java - 关于Java内部类的两个问题（class A { class B { } }）

> ID：339245
> 
> 赞同：6
> 
> 时间：2008-12-04T00:31:34.497
> 
> 标签：java, class

抱歉标题不好，但我想不出更好的标题。

我有一个 A 类和一个 B 类，它是 A 的一个子类，如下所示：

（它实际上有正确的名称吗？“子类”不是为继承保留的吗？）

```
class A {
    int i = 0;
    class B {
        int j = 1;
    }
}

class Test {
    public static void main() {
        A a = new A();
        B b = a.new B();
        A c = ??? b ??? // get "a" back
    }
} 
```

从 B 可以访问 A 的每个属性，因此 ai 和 bi 都返回 0。现在，我想知道是否有可能从 b 中检索类型 A 的原始对象，因为 b 包含 a 包含的所有内容？简单的铸造显然不能解决问题。

第二个：

```
class A {

    void print() {
        System.out.println("This is class A.");
    }

    class B {
        void print() {
            // <--- How to access print() of class A (like this.A.print() or smth)? 
            System.out.println("This is class B.");
        }
    }
} 
```

你也可以为我提供一些关于这个主题的好资源，因为到目前为止我太笨了，找不到好的资源。

提前致谢。:)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-04T00:50:10.043

似乎没有办法从外部访问外部类。但你可以这样做：

```
class A {
    int i = 0;
    class B {
        final A outer = A.this;
        int j = 1;
    }
}

class Test {
    public static void main() {
        A a = new A();
        A.B b = a.new B();
        A c = b.outer // get "a" back
    }
} 
```

`ClassName.this`将是与内部类的实例关联的外部类的实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-04T00:52:24.097

您可以使用`ParentClass.this`内部类中的语法访问它。

例如

```
public class Outter
{
    class Inner {
        public Outter getOutter()
        {
            return Outter.this;
        }
    }

    public Inner getInner(){
        return new Inner();
    }
}

class Runner{
    public static void main(String[] args){
        Outter out = new Outter(); 
        Outter.Inner inner = out.getInner();

        System.out.println(inner.getOutter().toString());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T00:40:59.127

[编辑：我的回答适合 C# 程序员，但我不能保证它适用于 Java。]

B 是内部类，而不是 A 的子类。此外，B 不包含 A 的实例，因此您的代码*不能*返回 A 的任何实例。

您需要按如下方式重组您的类：

```
class A
{
    public class B
    {
       public A Parent;
       public B(A parent)
       {
          this.Parent = parent;
       }
    }
} 
```

现在你的 B 类有一个返回其父级的字段“父级”。您可以按如下方式使用这些类（这是 C# 语法，因为我不知道 Java 是否有用于实例化内部类的不同语法）：

```
public static void Main(String[] args)
{
    A parent = new A();
    A.B child = new A.B(child);
    A backToParent = child.Parent;
} 
```

当然，以这种方式创建你的 B 类似乎没什么好笑的：从技术上讲，你可以传入任何父级。使用返回 B 的方法重写 A 类可能会更好：

```
class A
{        
    public class B
    {
       public A Parent;
       public B(A parent)
       {
          this.Parent = parent;
       }
    }

    public B getChild()
    {
        return new B(this);
    }
}

public static void Main(String[] args)
{
    A parent = new A();
    A.B child = A.getChild();
    A backToParent = child.Parent;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T04:53:07.863

这似乎对我有用

```
class A {
    int i = 0;
    class B {
        int j = 1;
    }
}

class Test {
    public static void main() {
        A a = new A();
        A.B b = a.new B();
        A c = (A)b.getClass().getDeclaredField("this$0").get(b);
    }
} 
```

# algorithm - 如果该行或列包含 0，则将矩阵中的每个单元格设置为 0

> ID：339262
> 
> 赞同：153
> 
> 时间：2008-12-04T00:39:17.960
> 
> 标签：algorithm, optimization, puzzle

给定一个包含 0 和 1 的 NxN 矩阵。将包含 a 的每一行设置`0`为所有`0`s，并将包含 a 的每一列设置`0`为所有`0`s。

例如

```
1 0 1 1 0
0 1 1 1 0
1 1 1 1 1
1 0 1 1 1
1 1 1 1 1 
```

结果是

```
0 0 0 0 0
0 0 0 0 0
0 0 1 1 0
0 0 0 0 0
0 0 1 1 0 
```

一位 Microsoft 工程师告诉我，有一个解决方案不涉及额外的内存，只需要两个布尔变量和一个 pass，所以我正在寻找那个答案。

顺便说一句，想象它是一个位矩阵，因此矩阵中只允许 1 和 0。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2008-12-04T02:15:14.240

好的，所以我很累，因为这里是凌晨 3 点，但我第一次尝试就地，矩阵中的每个数字恰好有 2 次通过，所以在 O(NxN) 中，它在矩阵的大小上是线性的。

我使用第一列和第一行作为标记来知道只有 1 的行/列在哪里。然后，有 2 个变量 l 和 c 要记住，如果第一行/列也都是 1。因此，第一遍设置标记并将其余部分重置为 0。

第二遍将行和列标记为 1 的位置设置为 1，并根据 l 和 c 重置第一行/列。

我强烈怀疑我是否可以通过 1 次完成，因为一开始的方格取决于最后的方格。也许我的第二遍可以提高效率......

```
import pprint

m = [[1, 0, 1, 1, 0],
     [0, 1, 1, 1, 0],
     [1, 1, 1, 1, 1],
     [1, 0, 1, 1, 1],
     [1, 1, 1, 1, 1]]

N = len(m)

### pass 1

# 1 rst line/column
c = 1
for i in range(N):
    c &= m[i][0]

l = 1
for i in range(1,N):
    l &= m[0][i]

# other line/cols
# use line1, col1 to keep only those with 1
for i in range(1,N):
    for j in range(1,N):
        if m[i][j] == 0:
            m[0][j] = 0
            m[i][0] = 0
        else:
            m[i][j] = 0

### pass 2

# if line1 and col1 are ones: it is 1
for i in range(1,N):
    for j in range(1,N):
        if m[i][0] & m[0][j]:
            m[i][j] = 1

# 1rst row and col: reset if 0
if l == 0:
    for i in range(N):
        m [i][0] = 0

if c == 0:
    for j in range(1,N):
        m [0][j] = 0

pprint.pprint(m) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-04T02:03:49.333

这不能一次完成，因为单个位在任何排序中都会影响它之前和之后的位。IOW 无论您以何种顺序遍历数组，您稍后都可能遇到 0，这意味着您必须返回并将之前的 1 更改为 0。

*更新*

人们似乎认为通过将 N 限制为某个固定值（例如 8），您可以解决这个问题。好吧，那是a）错过了重点，b）不是原始问题。我不会发布关于排序的问题，并期待一个以“假设您只想对 8 件事情进行排序......”开头的答案。

也就是说，如果您知道 N 实际上被限制为 8，这是一种合理的方法。我上面的回答回答了没有这种限制的原始问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-04T03:04:15.857

所以我的想法是用最后一行/最后一列的值作为标志来表示对应的列/行中的所有值是否都是1。

使用[Zig Zag 扫描](http://www.cs.cf.ac.uk/Dave/Multimedia/node238.html)整个矩阵，除了最后一行/列。在每个元素处，将最后一行/列中的值设置为自身与当前元素中的值的逻辑与。换句话说，如果您点击 0，则最后一行/列将设置为 0。如果您输入 1，则仅当最后一行/列中的值已经为 1 时，它才会为 1。在任何情况下，将当前元素设置为 0。

完成后，如果相应的列/行填充了 1，则最后一行/列应该有 1。

对最后一行和最后一列进行线性扫描并寻找 1。在最后一行和最后一列都为 1 的矩阵主体中的相应元素中设置 1。

编码它会很棘手，以避免一个错误等，但它应该在一次通过。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-08T18:22:07.577

我在这里有一个解决方案，它一次运行，并且在没有额外内存的情况下“就地”完成所有处理（除了增加堆栈）。

它使用递归来延迟写入零，这当然会破坏其他行和列的矩阵：

```
#include <iostream>

/**
* The idea with my algorithm is to delay the writing of zeros
* till all rows and cols can be processed. I do this using
* recursion:
* 1) Enter Recursive Function:
* 2) Check the row and col of this "corner" for zeros and store the results in bools
* 3) Send recursive function to the next corner
* 4) When the recursive function returns, use the data we stored in step 2
*       to zero the the row and col conditionally
*
* The corners I talk about are just how I ensure I hit all the row's a cols,
* I progress through the matrix from (0,0) to (1,1) to (2,2) and on to (n,n).
*
* For simplicities sake, I use ints instead of individual bits. But I never store
* anything but 0 or 1 so it's still fair ;)
*/

// ================================
// Using globals just to keep function
// call syntax as straight forward as possible
int n = 5;
int m[5][5] = {
                { 1, 0, 1, 1, 0 },
                { 0, 1, 1, 1, 0 },
                { 1, 1, 1, 1, 1 },
                { 1, 0, 1, 1, 1 },
                { 1, 1, 1, 1, 1 }
            };
// ================================

// Just declaring the function prototypes
void processMatrix();
void processCorner( int cornerIndex );
bool checkRow( int rowIndex );
bool checkCol( int colIndex );
void zeroRow( int rowIndex );
void zeroCol( int colIndex );
void printMatrix();

// This function primes the pump
void processMatrix() {
    processCorner( 0 );
}

// Step 1) This is the heart of my recursive algorithm
void processCorner( int cornerIndex ) {
    // Step 2) Do the logic processing here and store the results
    bool rowZero = checkRow( cornerIndex );
    bool colZero = checkCol( cornerIndex );

    // Step 3) Now progress through the matrix
    int nextCorner = cornerIndex + 1;
    if( nextCorner < n )
        processCorner( nextCorner );

    // Step 4) Finially apply the changes determined earlier
    if( colZero )
        zeroCol( cornerIndex );
    if( rowZero )
        zeroRow( cornerIndex );
}

// This function returns whether or not the row contains a zero
bool checkRow( int rowIndex ) {
    bool zero = false;
    for( int i=0; i<n && !zero; ++i ) {
        if( m[ rowIndex ][ i ] == 0 )
            zero = true;
    }
    return zero;
}

// This is just a helper function for zeroing a row
void zeroRow( int rowIndex ) {
    for( int i=0; i<n; ++i ) {
        m[ rowIndex ][ i ] = 0;
    }
}

// This function returns whether or not the col contains a zero
bool checkCol( int colIndex ) {
    bool zero = false;
    for( int i=0; i<n && !zero; ++i ) {
        if( m[ i ][ colIndex ] == 0 )
            zero = true;
    }

    return zero;
}

// This is just a helper function for zeroing a col
void zeroCol( int colIndex ) {
    for( int i=0; i<n; ++i ) {
        m[ i ][ colIndex ] = 0;
    }
}

// Just a helper function for printing our matrix to std::out
void printMatrix() {
    std::cout << std::endl;
    for( int y=0; y<n; ++y ) {
        for( int x=0; x<n; ++x ) {
            std::cout << m[y][x] << " ";
        }
        std::cout << std::endl;
    }
    std::cout << std::endl;
}

// Execute!
int main() {
    printMatrix();
    processMatrix();
    printMatrix();
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-04T02:23:37.860

我不认为这是可行的。当您在第一个方格上并且它的值为 1 时，您无法知道同一行和同一列中其他方格的值是什么。所以你必须检查这些，如果有零，返回第一个方块并将其值更改为零。我建议分两遍进行——第一遍收集关于哪些行和列必须清零的信息（信息存储在一个数组中，所以我们使用了一些额外的内存）。第二遍更改值。我知道这不是您正在寻找的解决方案，但我认为这是一个实用的解决方案。您给出的约束使问题无法解决。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-04T00:55:56.537

我可以用两个整数变量和两次传递（最多 32 行和列......）

```
bool matrix[5][5] = 
{ 
    {1, 0, 1, 1, 0},
    {0, 1, 1, 1, 0},
    {1, 1, 1, 1, 1},
    {1, 0, 1, 1, 1},
    {1, 1, 1, 1, 1}
};

int CompleteRows = ~0;
int CompleteCols = ~0;

// Find the first 0
for (int row = 0; row < 5; ++row)
{
    for (int col = 0; col < 5; ++col)
    {
        CompleteRows &= ~(!matrix[row][col] << row);
        CompleteCols &= ~(!matrix[row][col] << col);
    }
}

for (int row = 0; row < 5; ++row)
    for (int col = 0; col < 5; ++col)
        matrix[row][col] = (CompleteRows & (1 << row)) && (CompleteCols & (1 << col)); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-07-15T09:25:43.967

问题可以一次性解决

将矩阵保存在 i X j 数组中。

```
1 0 1 1 0
0 1 1 1 0
1 1 1 1 1
1 0 1 1 1 
1 1 1 1 1

one each pass save the values of i and j for an element which is 0 in arrays a and b
when first row is scanned a= 1 b = 2,5
when second row is scanned a=1,2 b= 1,2,5
when third row is scanned no change
when fourth row is scanned a= 1,2,4 and b= 1,2,5
when fifth row is scanned no change . 
```

对于保存在 a 和 b 中的 i 和 j 的值，现在将所有值打印为 0，其余值为 1，即 (3,3) (3,4) (5,3) 和 (5,4)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-08T10:05:53.117

不错的挑战。这种解决方案仅使用在堆栈上创建的两个布尔值，但由于函数是递归的，因此在堆栈上会多次创建布尔值。

```
typedef unsigned short     WORD;
typedef unsigned char      BOOL;
#define true  1
#define false 0
BYTE buffer[5][5] = {
1, 0, 1, 1, 0,
0, 1, 1, 1, 0,
1, 1, 1, 1, 1,
1, 0, 1, 1, 1,
1, 1, 1, 1, 1
};
int scan_to_end(BOOL *h,BOOL *w,WORD N,WORD pos_N)
{
    WORD i;
    for(i=0;i<N;i++)
    {
        if(!buffer[i][pos_N])
            *h=false;
        if(!buffer[pos_N][i])
            *w=false;
    }
    return 0;
}
int set_line(BOOL h,BOOL w,WORD N,WORD pos_N)
{
    WORD i;
    if(!h)
        for(i=0;i<N;i++)
            buffer[i][pos_N] = false;
    if(!w)
        for(i=0;i<N;i++)
            buffer[pos_N][i] = false;
    return 0;
}
int scan(int N,int pos_N)
{
    BOOL h = true;
    BOOL w = true;
    if(pos_N == N)
        return 0;
    // Do single scan
    scan_to_end(&h,&w,N,pos_N);
    // Scan all recursive before changeing data
    scan(N,pos_N+1);
    // Set the result of the scan
    set_line(h,w,N,pos_N);
    return 0;
}
int main(void)
{
    printf("Old matrix\n");
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[0][0],(WORD)buffer[0][1],(WORD)buffer[0][2],(WORD)buffer[0][3],(WORD)buffer[0][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[1][0],(WORD)buffer[1][1],(WORD)buffer[1][2],(WORD)buffer[1][3],(WORD)buffer[1][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[2][0],(WORD)buffer[2][1],(WORD)buffer[2][2],(WORD)buffer[2][3],(WORD)buffer[2][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[3][0],(WORD)buffer[3][1],(WORD)buffer[3][2],(WORD)buffer[3][3],(WORD)buffer[3][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[4][0],(WORD)buffer[4][1],(WORD)buffer[4][2],(WORD)buffer[4][3],(WORD)buffer[4][4]);
    scan(5,0);
    printf("New matrix\n");
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[0][0],(WORD)buffer[0][1],(WORD)buffer[0][2],(WORD)buffer[0][3],(WORD)buffer[0][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[1][0],(WORD)buffer[1][1],(WORD)buffer[1][2],(WORD)buffer[1][3],(WORD)buffer[1][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[2][0],(WORD)buffer[2][1],(WORD)buffer[2][2],(WORD)buffer[2][3],(WORD)buffer[2][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[3][0],(WORD)buffer[3][1],(WORD)buffer[3][2],(WORD)buffer[3][3],(WORD)buffer[3][4]);
    printf( "%d,%d,%d,%d,%d \n", (WORD)buffer[4][0],(WORD)buffer[4][1],(WORD)buffer[4][2],(WORD)buffer[4][3],(WORD)buffer[4][4]);
    system( "pause" );
    return 0;
} 
```

这以如下模式扫描：

```
s,s,s,s,s
s,0,0,0,0
s,0,0,0,0
s,0,0,0,0
s,0,0,0,0 
```

```
0,s,0,0,0
s,s,s,s,s
0,s,0,0,0
0,s,0,0,0
0,s,0,0,0 
```

等等

然后在每个扫描函数返回时更改此模式中的值。（自下而上）：

```
0,0,0,0,c
0,0,0,0,c
0,0,0,0,c
0,0,0,0,c
c,c,c,c,c 
```

```
0,0,0,c,0
0,0,0,c,0
0,0,0,c,0
c,c,c,c,c
0,0,0,c,0 
```

等等

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-08T15:00:26.703

*另一种*需要两次通过的解决方案是水平和垂直累积 AND：

```
1 0 1 1 0 | 0
0 1 1 1 0 | 0
1 1 1 1 1 | 1
1 0 1 1 1 | 0
1 1 1 1 1 | 1
----------+
0 0 1 1 0 
```

我以为我可以使用[奇偶校验位](http://en.wikipedia.org/wiki/Parity_bit)、[汉明码](http://en.wikipedia.org/wiki/Hamming_code)或[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)来设计这样的算法，可能使用这两个布尔值作为 2 位数字，但我还没有成功。

您能否与您的工程师重新检查问题陈述并告知我们？如果*确实*有解决方案，我想继续解决这个问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-08T15:36:04.417

保留一个变量来跟踪所有行 AND 在一起的内容。

如果一行是 -1（全为 1），则使下一行成为对该变量的引用

如果一行不是任何东西，它就是 0。你可以一次完成所有事情。伪代码：

```
foreach (my $row) rows {
     $andproduct = $andproduct & $row;
     if($row != -1) {
        zero out the row
     }  else {
        replace row with a reference to andproduct
     }
} 
```

应该一次完成 - 但这里假设 N 足够小，CPU 可以在单行上进行算术运算，否则您将需要遍历每一行以确定是否全部1s与否，我相信。但是鉴于您询问的是算法而不是限制我的硬件，我只会以“构建支持 N 位算术的 CPU ...”开始我的回答。

这是如何在 C 中完成的一个示例。请注意，我认为 values 和 arr 一起表示数组，而 p 和 numproduct 是我的迭代器，AND product 变量用于实现问题。（我本可以用指针算法循环 arr 来验证我的工作，但一次就足够了！）

```
int main() {
    int values[] = { -10, 14, -1, -9, -1 }; /* From the problem spec, converted to decimal for my sanity */
    int *arr[5] = { values, values+1, values+2, values+3, values+4 };
    int **p;
    int numproduct = 127;

    for(p = arr; p < arr+5; ++p) {
        numproduct = numproduct & **p;
        if(**p != -1) {
            **p = 0;
        } else {
            *p = &numproduct;
        }
    }

    /* Print our array, this loop is just for show */
    int i;
    for(i = 0; i < 5; ++i) {
        printf("%x\n",*arr[i]);
    }
    return 0;
} 
```

这会产生 0、0、6、0、6，这是给定输入的结果。

或者在 PHP 中，如果人们认为我在 C 中的堆栈游戏在作弊（我建议你不是，因为我应该能够以任何我喜欢的方式存储矩阵）：

```
<?php

$values = array(-10, 14, -1, -9, -1);
$numproduct = 127;

for($i = 0; $i < 5; ++$i) {
    $numproduct = $numproduct & $values[$i];
    if($values[$i] != -1) {
        $values[$i] = 0;
    } else {
        $values[$i] = &$numproduct;
    }
}

print_r($values); 
```

我错过了什么吗？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-10T13:09:50.593

**好的，这是一个解决方案**

*   仅使用一个额外的长值用于工作存储。
*   不使用递归。
*   一次只有 N，甚至不是 N*N。
*   将适用于 N 的其他值，但需要新的#defines。

> ```
> #include <stdio.h>
> #define BIT30 (1<<24)
> #define COLMASK 0x108421L
> #define ROWMASK 0x1fL 
> ```

```
unsigned long long STARTGRID = 
((0x10 | 0x0 | 0x4 | 0x2 | 0x0) << 20) |
((0x00 | 0x8 | 0x4 | 0x2 | 0x0) << 15) |
((0x10 | 0x8 | 0x4 | 0x2 | 0x1) << 10) |
((0x10 | 0x0 | 0x4 | 0x2 | 0x1) << 5) |
((0x10 | 0x8 | 0x4 | 0x2 | 0x1) << 0);

void dumpGrid (char* comment, unsigned long long theGrid) {
    char buffer[1000];
    buffer[0]='\0';
    printf ("\n\n%s\n",comment);
    for (int j=1;j<31; j++) {
        if (j%5!=1)
            printf( "%s%s", ((theGrid & BIT30)==BIT30)? "1" : "0",(((j%5)==0)?"\n" : ",") );    
        theGrid = theGrid << 1;
    }
}

int main (int argc, const char * argv[]) {
    unsigned long long rowgrid = STARTGRID;
    unsigned long long colGrid = rowgrid;

    unsigned long long rowmask = ROWMASK;
    unsigned long long colmask = COLMASK;

    dumpGrid("Initial Grid", rowgrid);
    for (int i=0; i<5; i++) {
        if ((rowgrid & rowmask)== rowmask) rowgrid |= rowmask;
        else rowgrid &= ~rowmask;
        if ((colGrid & colmask) == colmask) colmask |= colmask;
        else colGrid &=  ~colmask;
        rowmask <<= 5;
        colmask <<= 1;
    }
    colGrid &= rowgrid;
    dumpGrid("RESULT Grid", colGrid);
    return 0;
    } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-06-21T16:15:39.807

实际上。如果您只想运行算法并打印出结果（即不恢复它们，那么这可以很容易地一次性完成。当您在运行算法时尝试修改数组时就会出现问题。

这是我的解决方案它只涉及对给定（i，j）元素的行/列值进行ANDing并将其打印出来。

```
#include <iostream>
#include "stdlib.h"

void process();

int dim = 5;
bool m[5][5]{{1,0,1,1,1},{0,1,1,0,1},{1,1,1,1,1},{1,1,1,1,1},{0,0,1,1,1}};

int main() {
    process();
    return 0;
}

void process() {
    for(int j = 0; j < dim; j++) {
        for(int i = 0; i < dim; i++) {
            std::cout << (
                          (m[0][j] & m[1][j] & m[2][j] & m[3][j] & m[4][j]) &
                          (m[i][0] & m[i][1] & m[i][2] & m[i][3] & m[i][4])
                          );
        }
        std::cout << std::endl;
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-12-31T14:24:27.283

我试图在 C# 中解决这个问题。

除了实际矩阵和表示其维度的 n 之外，我还使用了两个循环变量（i 和 j）

我尝试的逻辑是：

1.  为矩阵的每个同心正方形中涉及的行和列计算 AND
2.  将其存储在其角落单元格中（我已按逆时针顺序存储它们）
3.  在评估特定正方形时，两个布尔变量用于保留两个角的值。
4.  当外循环 (i) 处于中途时，该过程将结束。
5.  根据角单元（对于 i 的其余部分）评估其他单元的结果。在此过程中跳过角落单元格。
6.  当 i 达到 n 时，所有单元格都会有结果，除了角落单元格。
7.  更新角落单元格。这是对长度为 n/2 的额外迭代，而不是问题中提到的单遍约束。

代码：

```
void Evaluate(bool [,] matrix, int n)
{
    bool tempvar1, tempvar2;

    for (var i = 0; i < n; i++)
    {
        tempvar1 = matrix[i, i];
        tempvar2 = matrix[n - i - 1, n - i - 1];

        var j = 0;

        for (j = 0; j < n; j++)
        {
            if ((i < n/2) || (((n % 2) == 1) && (i == n/2) && (j <= i)))
            {
                // store the row and col & results in corner cells of concentric squares
                tempvar1 &= matrix[j, i];
                matrix[i, i] &= matrix[i, j];
                tempvar2 &= matrix[n - j - 1, n - i - 1];
                matrix[n - i - 1, n - i - 1] &= matrix[n - i - 1, n - j - 1];
            }
            else
            {
                // skip corner cells of concentric squares
                if ((j == i) || (j == n - i - 1)) continue;

                // calculate the & values for rest of them
                matrix[i, j] = matrix[i, i] & matrix[n - j - 1, j];
                matrix[n - i - 1, j] = matrix[n - i - 1, n - i - 1] & matrix[n - j - 1, j];

                if ((i == n/2) && ((n % 2) == 1))
                {
                    // if n is odd
                    matrix[i, n - j - 1] = matrix[i, i] & matrix[j, n - j - 1];
                }
            }
        }

        if ((i < n/2) || (((n % 2) == 1) && (i <= n/2)))
        {
            // transfer the values from temp variables to appropriate corner cells of its corresponding square
            matrix[n - i - 1, i] = tempvar1;
            matrix[i, n - i - 1] = tempvar2;
        }
        else if (i == n - 1)
        {
            // update the values of corner cells of each concentric square
            for (j = n/2; j < n; j++)
            {
                tempvar1 = matrix[j, j];
                tempvar2 = matrix[n - j - 1, n - j - 1];

                matrix[j, j] &= matrix[n - j - 1, j];
                matrix[n - j - 1, j] &= tempvar2;

                matrix[n - j - 1, n - j - 1] &= matrix[j, n - j - 1];
                matrix[j, n - j - 1] &= tempvar1;
            }
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-04-10T15:11:41.620

One Pass - 我只遍历了一次输入，但使用了一个新数组和两个额外的布尔变量。

```
public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        sc.nextLine();

        boolean rowDel = false, colDel = false;
        int arr[][] = new int[n][n];
        int res[][] = new int[n][n];
        int i, j;
        for (i = 0; i < n; i++) {

            for (j = 0; j < n; j++) {
                arr[i][j] = sc.nextInt();
                res[i][j] = arr[i][j];  
            }
        }

        for (i = 0; i < n; i++) {

            for (j = 0; j < n; j++) {
                if (arr[i][j] == 0)
                    colDel = rowDel = true; //See if we have to delete the
                                            //current row and column
                if (rowDel == true){
                    res[i] = new int[n];
                    rowDel = false;
                }
                if(colDel == true){
                    for (int k = 0; k < n; k++) {
                        res[k][j] = 0;
                    }
                    colDel = false;
                }

            }

        }

        for (i = 0; i < n; i++) {

            for (j = 0; j < n; j++) {
                System.out.print(res[i][j]);
            }
            System.out.println();
        }
        sc.close();

    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-04T02:33:03.283

虽然在限制条件下是不可能的，但最节省空间的方法是以重叠、交替的行/列方式遍历矩阵，这将形成类似于以之字形方式铺设砖块的模式：

```
-----
|----
||---
|||--
||||- 
```

使用它，您将按照指示进入每一行/列，如果您在任何时候遇到 0，请设置一个布尔变量，然后重新遍历该行/列，将条目设置为 0。

这将不需要额外的内存，并且只会使用一个布尔变量。不幸的是，如果“远”边缘设置为全部为 0，那是最坏的情况，您会遍历整个数组两次。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-04T02:36:30.627

创建一个结果矩阵并将所有值设置为 1。一旦遇到 0 就遍历数据矩阵，将结果矩阵行列设置为 0

在第一遍结束时，结果矩阵将有正确的答案。

看起来很简单。有没有我错过的技巧？您不允许使用结果集吗？

编辑：

看起来像一个 F# 函数，但这有点作弊，因为即使您正在执行单次传递，该函数也可以是递归的。

看起来面试官想弄清楚你是否知道函数式编程。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-12-09T18:16:42.830

好吧，我想出了一个使用 4 个布尔值和 2 个循环计数器的单次就地（非递归）解决方案。我没有设法将它减少到 2 个布尔值和 2 个整数，但如果可能的话，我不会感到惊讶。它对每个单元进行大约 3 次读取和 3 次写入，它应该是 O(N^2) 即。数组大小是线性的。

我花了几个小时才弄明白这个问题——我不想在面试的压力下想出它！如果我做了一个布布，我太累了，看不到它......

嗯...我选择将“单次通过”定义为对矩阵进行一次扫描，而不是触摸每个值一次！:-)

```
#include <stdio.h>
#include <memory.h>

#define SIZE    5

typedef unsigned char u8;

u8 g_Array[ SIZE ][ SIZE ];

void Dump()
{
    for ( int nRow = 0; nRow < SIZE; ++nRow )
    {
        for ( int nColumn = 0; nColumn < SIZE; ++nColumn )
        {
            printf( "%d ", g_Array[ nRow ][ nColumn ] );
        }
        printf( "\n" );
    }
}

void Process()
{
    u8 fCarriedAlpha = true;
    u8 fCarriedBeta = true;
    for ( int nStep = 0; nStep < SIZE; ++nStep )
    {
        u8 fAlpha = (nStep > 0) ? g_Array[ nStep-1 ][ nStep ] : true;
        u8 fBeta = (nStep > 0) ? g_Array[ nStep ][ nStep - 1 ] : true;
        fAlpha &= g_Array[ nStep ][ nStep ];
        fBeta &= g_Array[ nStep ][ nStep ];
        g_Array[ nStep-1 ][ nStep ] = fCarriedBeta;
        g_Array[ nStep ][ nStep-1 ] = fCarriedAlpha;
        for ( int nScan = nStep + 1; nScan < SIZE; ++nScan )
        {
            fBeta &= g_Array[ nStep ][ nScan ];
            if ( nStep > 0 )
            {
                g_Array[ nStep ][ nScan ] &= g_Array[ nStep-1 ][ nScan ];
                g_Array[ nStep-1][ nScan ] = fCarriedBeta;
            }

            fAlpha &= g_Array[ nScan ][ nStep ];
            if ( nStep > 0 )
            {
                g_Array[ nScan ][ nStep ] &= g_Array[ nScan ][ nStep-1 ];
                g_Array[ nScan ][ nStep-1] = fCarriedAlpha;
            }
        }

        g_Array[ nStep ][ nStep ] = fAlpha & fBeta;

        for ( int nScan = nStep - 1; nScan >= 0; --nScan )
        {
            g_Array[ nScan ][ nStep ] &= fAlpha;
            g_Array[ nStep ][ nScan ] &= fBeta;
        }
        fCarriedAlpha = fAlpha;
        fCarriedBeta = fBeta;
    }
}

int main()
{
    memset( g_Array, 1, sizeof(g_Array) );
    g_Array[0][1] = 0;
    g_Array[0][4] = 0;
    g_Array[1][0] = 0;
    g_Array[1][4] = 0;
    g_Array[3][1] = 0;

    printf( "Input:\n" );
    Dump();
    Process();
    printf( "\nOutput:\n" );
    Dump();

    return 0;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-12-09T19:30:38.420

您可以一次性完成 - 如果您不计算以随机访问顺序访问矩阵，这首先消除了单次执行的好处（缓存一致性/内存带宽）。

[编辑：简单，但错误的解决方案已删除]

通过分两次执行，您应该获得比任何单次通过方法更好的性能：一次用于累积行/列信息，另一次用于应用它。数组（按行优先顺序）被连贯地访问；对于超过缓存大小的数组（但其行可以放入缓存），数据应该从内存中读取两次，并存储一次：

```
void fixmatrix2(int M[][], int rows, int cols) {
    bool clearZeroRow= false;
    bool clearZeroCol= false;
    for(int j=0; j < cols; ++j) {
        if( ! M[0][j] ) {
            clearZeroRow= true;
        }
    }
    for(int i=1; i < rows; ++i) { // scan/accumulate pass
        if( ! M[i][0] ) {
            clearZeroCol= true;
        }
        for(int j=1; j < cols; ++j) {
            if( ! M[i][j] ) {
                M[0][j]= 0;
                M[i][0]= 0;
            }
        }
    }
    for(int i=1; i < rows; ++i) { // update pass
        if( M[i][0] ) {
            for(int j=0; j < cols; ++j) {
                if( ! M[j][0] ) {
                    M[i][j]= 0;
                }
            }
        } else {
            for(int j=0; j < cols; ++j) {
                M[i][j]= 0;
            }
        }
        if(clearZeroCol) {
            M[i][0]= 0;
        }
    }
    if(clearZeroRow) {
        for(int j=0; j < cols; ++j) {
            M[0][j]= 0;
        }
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-12-10T23:08:35.203

我希望你喜欢我的 1-pass c# 解决方案

您可以使用 O(1) 检索元素，并且只需要矩阵的一行和一列的空间

```
bool[][] matrix =
{
    new[] { true, false, true, true, false }, // 10110
    new[] { false, true, true, true, false }, // 01110
    new[] { true, true, true, true, true },   // 11111
    new[] { true, false, true, true, true },  // 10111
    new[] { true, true, true, true, true }    // 11111
};

int n = matrix.Length;
bool[] enabledRows = new bool[n];
bool[] enabledColumns = new bool[n];

for (int i = 0; i < n; i++)
{
    enabledRows[i] = true;
    enabledColumns[i] = true;
}

for (int rowIndex = 0; rowIndex < n; rowIndex++)
{
    for (int columnIndex = 0; columnIndex < n; columnIndex++)
    {
        bool element = matrix[rowIndex][columnIndex];
        enabledRows[rowIndex] &= element;
        enabledColumns[columnIndex] &= element;
    }
}

for (int rowIndex = 0; rowIndex < n; rowIndex++)
{
    for (int columnIndex = 0; columnIndex < n; columnIndex++)
    {
        bool element = enabledRows[rowIndex] & enabledColumns[columnIndex];
        Console.Write(Convert.ToInt32(element));
    }
    Console.WriteLine();
}

/*
    00000
    00000
    00110
    00000
    00110
*/ 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-12-11T01:33:14.507

好的，我意识到这并不完全匹配，但我使用一个布尔值和一个字节而不是两个布尔值一次性得到它......关闭。我也不会保证它的效率，但这些类型的问题通常需要的不是最佳解决方案。

```
private static void doIt(byte[,] matrix)
{
    byte zeroCols = 0;
    bool zeroRow = false;

    for (int row = 0; row <= matrix.GetUpperBound(0); row++)
    {
        zeroRow = false;
        for (int col = 0; col <= matrix.GetUpperBound(1); col++)
        {
            if (matrix[row, col] == 0)
            {

                zeroRow = true;
                zeroCols |= (byte)(Math.Pow(2, col));

                // reset this column in previous rows
                for (int innerRow = 0; innerRow < row; innerRow++)
                {
                    matrix[innerRow, col] = 0;
                }

                // reset the previous columns in this row
                for (int innerCol = 0; innerCol < col; innerCol++)
                {
                    matrix[row, innerCol] = 0;
                }
            }
            else if ((int)(zeroCols & ((byte)Math.Pow(2, col))) > 0)
            {
                matrix[row, col] = 0;
            }

            // Force the row to zero
            if (zeroRow) { matrix[row, col] = 0; }
        }
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-04-16T18:38:31.403

1 次通过，2 个布尔值。我只需要假设迭代中的整数索引不计算在内。

这不是一个完整的解决方案，但我无法通过这一点。

如果我只能确定 0 是原始 0 还是转换为 0 的 1，那么我就不必使用 -1，这将起作用。

我的输出是这样的：

```
-1  0 -1 -1  0
 0 -1 -1 -1  0
-1 -1  1  1 -1
-1  0 -1 -1 -1
-1 -1  1  1 -1 
```

我的方法的独创性是使用检查行或列的前半部分来确定它是否包含 0 和后半部分来设置值 - 这是通过查看 x 和 width-x 然后查看 y 和 height 来完成的-y 在每次迭代中。根据前半部分迭代的结果，如果在行或列中找到 0，我使用迭代的后半部分将 1 更改为 -1。

我刚刚意识到这可以通过只有 1 个布尔值将 1 留给 ... 来完成？

我发布这个希望有人可能会说，“啊，就这样做......”（我花了太多时间在它上面不发布。）

这是VB中的代码：

```
Dim D(,) As Integer = {{1, 0, 1, 1, 1}, {0, 1, 1, 0, 1}, {1, 1, 1, 1, 1}, {1, 1, 1, 1, 1}, {0, 0, 1, 1, 1}}

Dim B1, B2 As Boolean

For y As Integer = 0 To UBound(D)

    B1 = True : B2 = True

    For x As Integer = 0 To UBound(D)

        // Scan row for 0's at x and width - x positions. Halfway through I'll konw if there's a 0 in this row.
        //If a 0 is found set my first boolean to false.
        If x <= (Math.Ceiling((UBound(D) + 1) / 2) - 1) Then
            If D(x, y) = 0 Or D(UBound(D) - x, y) = 0 Then B1 = False
        End If

        //If the boolean is false then a 0 in this row was found. Spend the last half of this loop
        //updating the values. This is where I'm stuck. If I change a 1 to a 0 it will cause the column
        //scan to fail. So for now I change to a -1\. If there was a way to change to 0 yet later tell if
        //the value had changed this would work.
        If Not B1 Then
            If x >= (Math.Ceiling((UBound(D) + 1) / 2) - 1) Then
                If D(x, y) = 1 Then D(x, y) = -1
                If D(UBound(D) - x, y) = 1 Then D(UBound(D) - x, y) = -1
            End If
        End If

        //These 2 block do the same as the first 2 blocks but I switch x and y to do the column.
        If x <= (Math.Ceiling((UBound(D) + 1) / 2) - 1) Then
            If D(y, x) = 0 Or D(y, UBound(D) - x) = 0 Then B2 = False
        End If

        If Not B2 Then
            If x >= (Math.Ceiling((UBound(D) + 1) / 2) - 1) Then
                If D(y, x) = 1 Then D(y, x) = -1
                If D(y, UBound(D) - x) = 1 Then D(y, UBound(D) - x) = -1
            End If
        End If

    Next
Next 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-12-07T04:34:24.090

你可以做这样的事情来使用一次，但输入和输出矩阵：

```
output(x,y) = col(xy) & row(xy) == 2^n 
```

其中`col(xy)`是包含点的列中的位`xy`；`row(xy)`是包含点的行中的位`xy`。`n`是矩阵的大小。

然后只需循环输入。可能可扩展以提高空间效率？

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2011-06-20T21:50:48.320

没有人使用二进制形式？因为它只有 1 和 0。我们可以使用二进制向量。

```
def set1(M, N):
    '''Set 1/0s on M according to the rules.

    M is a list of N integers. Each integer represents a binary array, e.g.,
    000100'''
    ruler = 2**N-1
    for i,v in enumerate(M):
        ruler = ruler & M[i]
        M[i] = M[i] if M[i]==2**N-1 else 0  # set i-th row to all-0 if not all-1s
    for i,v in enumerate(M):
        if M[i]: M[i] = ruler
    return M 
```

这是测试：

```
M = [ 0b10110,
      0b01110,
      0b11111,
      0b10111,
      0b11111 ]

print "Before..."
for i in M: print "{:0=5b}".format(i)

M = set1(M, len(M))
print "After..."
for i in M: print "{:0=5b}".format(i) 
```

和输出：

```
Before...
10110
01110
11111
10111
11111
After...
00000
00000
00110
00000
00110 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2012-08-02T09:25:18.557

一次矩阵扫描，两个布尔值，没有递归。

如何避免第二关？当零出现在行或列的末尾时，需要第二遍清除行或列。

但是这个问题可以解决，因为当我们扫描第#i 行时，我们已经知道第#i-1 行的行状态。因此，当我们扫描第 #i 行时，如果需要，我们可以同时清除第 #i-1 行。

相同的解决方案适用于列，但我们需要同时扫描行和列，同时下一次迭代不会更改数据。

需要两个布尔值来存储第一行和第一列的状态，因为它们的值会在算法的主要部分执行期间发生变化。

为了避免添加更多布尔值，我们在矩阵的第一行和第一列中存储行和列的“清除”标志。

```
public void Run()
{
    const int N = 5;

    int[,] m = new int[N, N] 
                {{ 1, 0, 1, 1, 0 },
                { 1, 1, 1, 1, 0 },
                { 1, 1, 1, 1, 1 },
                { 1, 0, 1, 1, 1 },
                { 1, 1, 1, 1, 1 }};

    bool keepFirstRow = (m[0, 0] == 1);
    bool keepFirstColumn = keepFirstRow;

    for (int i = 1; i < N; i++)
    {
        keepFirstRow = keepFirstRow && (m[0, i] == 1);
        keepFirstColumn = keepFirstColumn && (m[i, 0] == 1);
    }

    Print(m); // show initial setup

    m[0, 0] = 1; // to protect first row from clearing by "second pass"

    // "second pass" is performed over i-1 row/column, 
    // so we use one more index just to complete "second pass" over the 
    // last row/column
    for (int i = 1; i <= N; i++)
    {
        for (int j = 1; j <= N; j++)
        {
            // "first pass" - searcing for zeroes in row/column #i
            // when i = N || j == N it is additional pass for clearing 
            // the previous row/column
            // j >= i because cells with j < i may be already modified 
            // by "second pass" part
            if (i < N && j < N && j >= i) 
            {
                m[i, 0] &= m[i, j];
                m[0, j] &= m[i, j];

                m[0, i] &= m[j, i];
                m[j, 0] &= m[j, i];
            }

            // "second pass" - clearing the row/column scanned 
            // in the previous iteration
            if (m[i - 1, 0] == 0 && j < N)
            {
                m[i - 1, j] = 0;
            }

            if (m[0, i - 1] == 0 && j < N)
            {
                m[j, i - 1] = 0;
            }
        }

        Print(m);
    }

    // Clear first row/column if needed
    if (!keepFirstRow || !keepFirstColumn)
    {
        for (int i = 0; i < N; i++)
        {
            if (!keepFirstRow)
            {
                m[0, i] = 0;
            }
            if (!keepFirstColumn)
            {
                m[i, 0] = 0;
            }
        }
    }

    Print(m);

    Console.ReadLine();
}

private static void Print(int[,] m)
{
    for (int i = 0; i < m.GetLength(0); i++)
    {
        for (int j = 0; j < m.GetLength(1); j++)
        {
            Console.Write(" " + m[i, j]);
        }
        Console.WriteLine();
    }
    Console.WriteLine();
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2013-04-08T07:31:28.620

似乎以下作品没有额外的空间要求：

首先请注意，将行的元素乘以元素所在的行的元素，得到所需的值。

为了不使用任何额外的空间（不创建新矩阵并填充它，而是直接对矩阵应用更改），从矩阵的左上角开始计算任何 ixi 矩阵（“开始”于 (0 ,0)) 在考虑任何索引 > i 的任何元素之前。

希望这有效（没有testet）

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-01-08T07:11:39.800

这是在 C++ 中针对不同的 N 进行测试的，并且是：**一次 PASS**，**两个 BOOLS** **，**没有**RECURSION**，没有额外的**内存**，保留任意大的**N** （到目前为止，这里的解决方案都没有做到所有这些。）

 ******更具体地说，我很有趣，两个循环计数器都可以。我有两个 const 无符号，它们只存在而不是每次都计算以提高可读性。外循环的区间是[0, N]，内循环的区间是[1, n - 1]。switch 语句在循环中的存在主要是为了非常清楚地表明它确实只是一次通过。

**算法策略：**

第一个技巧是我们从矩阵本身的一行和一列来累积矩阵的内容，通过将我们真正需要知道的从第一行和第一列卸载到两个布尔值中，这个内存变得可用。第二个技巧是通过使用子矩阵及其索引的对称性，从一个通道中获得两个通道。

**算法概要：**

*   扫描第一行并将它们全部存储在布尔值中，对第一列执行相同的操作，将结果存储在第二个布尔值中。
*   对于不包括第一行和第一列的子矩阵：迭代，从左到右，从上到下，就像阅读一个段落一样。在访问每个元素时，还访问如果反向访问子矩阵将访问的相应元素。对于每个访问的元素，将其值与它的行与第一列相交的位置进行 AND 运算，并将其值与它的列与第一行相交的位置进行 AND 运算。
*   一旦到达子矩阵的中心，继续如上同时访问这两个元素。但是，现在将访问元素的值设置为其行与第一列相交的位置以及其列与第一行相交的位置的 AND。在此之后，子矩阵就完成了。
*   使用在乞求时计算的两个布尔变量将第一行和第一列设置为正确的值。

**模板化 C++ 实现：**

```
template<unsigned n>
void SidewaysAndRowColumn(int((&m)[n])[n]) {
    bool fcol = m[0][0] ? true : false;
    bool frow = m[0][0] ? true : false;
    for (unsigned d = 0; d <= n; ++d) {
        for (unsigned i = 1; i < n; ++i) {
            switch (d) {
                case 0:
                    frow    = frow && m[d][i];
                    fcol    = fcol && m[i][d];
                    break;
                default:
                {
                    unsigned const rd = n - d;
                    unsigned const ri = n - i;
                    if (d * n + i < rd * n + ri)
                    {
                        m[ d][ 0] &= m[ d][ i];
                        m[ 0][ d] &= m[ i][ d];
                        m[ 0][ i] &= m[ d][ i];
                        m[ i][ 0] &= m[ i][ d];
                        m[rd][ 0] &= m[rd][ri];
                        m[ 0][rd] &= m[ri][rd];
                        m[ 0][ri] &= m[rd][ri];
                        m[ri][ 0] &= m[ri][rd];
                    }
                    else
                    {
                        m[ d][ i] = m[ d][0] & m[0][ i];
                        m[rd][ri] = m[rd][0] & m[0][ri];
                    }
                    break;
                }
                case n:
                    if (!frow)
                        m[0][i] = 0;
                    if (!fcol)
                        m[i][0] = 0;
            };
        }
    }
    m[0][0] = (frow && fcol) ? 1 : 0;
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2014-02-25T03:26:32.053

这是我的 Ruby 实现，其中包含测试，这将占用 O(MN) 空间。如果我们想要实时更新（比如在我们找到零时显示结果，而不是等待第一次寻找零的循环），我们可以创建另一个类变量，例如`@output`，每当我们找到零时，我们更新`@output`而不是`@input`。

```
require "spec_helper"

class Matrix
    def initialize(input)
        @input  = input
        @zeros  = []
    end

    def solve
        @input.each_with_index do |row, i|          
            row.each_with_index do |element, j|                             
                @zeros << [i,j] if element == 0
            end
        end

        @zeros.each do |x,y|
            set_h_zero(x)
            set_v_zero(y)
        end

        @input
    end

    private 

    def set_h_zero(row)     
        @input[row].map!{0}     
    end

    def set_v_zero(col)
        @input.size.times do |r|
            @input[r][col] = 0
        end
    end
end

describe "Matrix" do
  it "Should set the row and column of Zero to Zeros" do
    input =  [[1, 3, 4, 9, 0], 
              [0, 3, 5, 0, 8], 
              [1, 9, 6, 1, 9], 
              [8, 3, 2, 0, 3]]

    expected = [[0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0],
                [0, 9, 6, 0, 0],
                [0, 0, 0, 0, 0]]

    matrix = Matrix.new(input)

    expect(matrix.solve).to eq(expected)
  end
end 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-05-01T12:52:09.353

我能想到的最简单的解决方案粘贴在下面。逻辑是在迭代时记录将哪一行和哪一列设置为零。

```
import java.util.HashSet;
import java.util.Set;

public class MatrixExamples {
    public static void zeroOut(int[][] myArray) {
        Set<Integer> rowsToZero = new HashSet<>();
        Set<Integer> columnsToZero = new HashSet<>();

        for (int i = 0; i < myArray.length; i++) { 
            for (int j = 0; j < myArray.length; j++) {
                if (myArray[i][j] == 0) {
                    rowsToZero.add(i);
                    columnsToZero.add(j);
                }
            }
        }

        for (int i : rowsToZero) {
            for (int j = 0; j < myArray.length; j++) {
                myArray[i][j] = 0;
            }
        }

        for (int i : columnsToZero) {
            for (int j = 0; j < myArray.length; j++) {
                myArray[j][i] = 0;
            }
        }

        for (int i = 0; i < myArray.length; i++) { // record which rows and                                             // columns will be zeroed
            for (int j = 0; j < myArray.length; j++) {
                System.out.print(myArray[i][j] + ",");
            if(j == myArray.length-1)
                System.out.println();
            }
        }

    }

    public static void main(String[] args) {
        int[][] a = { { 1, 0, 1, 1, 0 }, { 0, 1, 1, 1, 0 }, { 1, 1, 1, 1, 1 },
                { 1, 0, 1, 1, 1 }, { 1, 1, 1, 1, 1 } };
        zeroOut(a);
    }
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-01-12T17:33:25.943

下面的代码创建了一个大小为 m,n 的矩阵。首先确定矩阵的维度。我想用 0..10 之间的数字随机填充矩阵 [m][n]。然后创建另一个相同尺寸的矩阵并用-1s（最终矩阵）填充它。然后遍历初始矩阵，看看你是否会命中 0。当你命中 location(x,y) 时，转到最终矩阵并用 0 填充 x 行，用 0 填充 y 列。最后读取最终矩阵，如果值为-1（原始值），则将初始矩阵相同位置的值复制到最终矩阵。

```
public static void main(String[] args) {
    int m = 5;
    int n = 4;
    int[][] matrixInitial = initMatrix(m, n); // 5x4 matrix init randomly
    int[][] matrixFinal = matrixNull(matrixInitial, m, n); 
    for (int i = 0; i < m; i++) {
        System.out.println(Arrays.toString(matrixFinal[i]));
    }
}

public static int[][] matrixNull(int[][] matrixInitial, int m, int n) {
    int[][] matrixFinal = initFinal(m, n); // create a matrix with mxn and init it with all -1
    for (int i = 0; i < m; i++) { // iterate in initial matrix
        for (int j = 0; j < n; j++) {
            if(matrixInitial[i][j] == 0){ // if a value is 0 make rows and columns 0
                makeZeroX(matrixFinal, i, j, m, n); 
            }
        }
    }

    for (int i = 0; i < m; i++) { // if value is -1 (original) copy from initial
        for (int j = 0; j < n; j++) {
            if(matrixFinal[i][j] == -1) {
                matrixFinal[i][j] = matrixInitial[i][j];
            }
        }
    }
    return matrixFinal;
}

private static void makeZeroX(int[][] matrixFinal, int x, int y, int m, int n) {
        for (int j = 0; j < n; j++) { // make all row 0
            matrixFinal[x][j] = 0;
        }
        for(int i = 0; i < m; i++) { // make all column 0
            matrixFinal[i][y] = 0; 
        }
}

private static int[][] initMatrix(int m, int n) {

    int[][] matrix = new int[m][n];
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            Random rn = new Random();
            int random = rn.nextInt(10);
            matrix[i][j] = random;
        }
    }

    for (int i = 0; i < m; i++) {
        System.out.println(Arrays.toString(matrix[i]));
    }
    System.out.println("******");
    return matrix;
}

private static int[][] initFinal(int m, int n) {

    int[][] matrix = new int[m][n];
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            matrix[i][j] = -1;
        }
    }
    return matrix;
}

// another approach
/**
 * @param matrixInitial
 * @param m
 * @param n
 * @return
 */
private static int[][] matrixNullNew(int[][] matrixInitial, int m, int n) {
    List<Integer> zeroRowList = new ArrayList<>(); // Store rows with 0
    List<Integer> zeroColumnList = new ArrayList<>(); // Store columns with 0
    for (int i = 0; i < m; i++) { // read through the matrix when you hit 0 add the column to zeroColumnList and add
                                  // the row to zeroRowList
        for (int j = 0; j < n; j++) {
            if (matrixInitial[i][j] == 0) {
                if (!zeroRowList.contains(i)) {
                    zeroRowList.add(i);
                }
                if (!zeroColumnList.contains(j)) {
                    zeroColumnList.add(j);
                }
            }
        }
    }

    for (int a = 0; a < m; a++) {
        if (zeroRowList.contains(a)) { // if the row has 0
            for (int b = 0; b < n; b++) {
                matrixInitial[a][b] = 0; // replace all row with zero
            }
        }
    }

    for (int b = 0; b < n; b++) {
        if (zeroColumnList.contains(b)) { // if the column has 0
            for (int a = 0; a < m; a++) {
                matrixInitial[a][b] = 0; // replace all column with zero
            }
        }
    }
    return matrixInitial;
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-10-28T12:03:28.450

这是我的解决方案。从代码中可以看出，给定一个 M * N 矩阵，一旦检查该行中的零，它将整行设置为零。我的解决方案的时间复杂度为 O(M * N) 。我正在共享整个类，该类具有用于测试的静态填充数组和用于在控制台中查看结果的显示数组方法。

```
public class EntireRowSetToZero {
    static int arr[][] = new int[3][4];
    static {

    arr[0][0] = 1;
    arr[0][1] = 9;
    arr[0][2] = 2;
    arr[0][3] = 2;

    arr[1][0] = 1;
    arr[1][1] = 5;
    arr[1][2] = 88;
    arr[1][3] = 7;

    arr[2][0] = 0;
    arr[2][1] = 8;
    arr[2][2] = 4;
    arr[2][3] = 4;
}

public static void main(String[] args) {
    displayArr(EntireRowSetToZero.arr, 3, 4);
    setRowToZero(EntireRowSetToZero.arr);
    System.out.println("--------------");
    displayArr(EntireRowSetToZero.arr, 3, 4);

}

static int[][] setRowToZero(int[][] arr) {
    for (int i = 0; i < arr.length; i++) {
        for (int j = 0; j < arr[i].length; j++) {
            if(arr[i][j]==0){
                arr[i]=new int[arr[i].length];
            }
        }

    }
    return arr;
}

static void displayArr(int[][] arr, int n, int k) {

    for (int i = 0; i < n; i++) {

        for (int j = 0; j < k; j++) {
            System.out.print(arr[i][j] + " ");
        }
        System.out.println("");
    }

} 
```

}

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-08-01T18:58:30.277

设置一个标志（一个不受约束的数字，我在这里使用-1）然后一旦我们更改所有匹配的行和 col ，将所有标志替换为零

```
public class Main {

        public static void main(String[] args) {

            //test case 1
            int[][] multi = new int[][]{
                    { 1, 2, 3 },
                    { 4, 0, 5 },
                    { 0, 6, 7 },
            };

            //test case 2
            int[][] multi2 = new int[][]{
                    { 1, 0, 1, 1, 0 },
                    { 0, 1, 1, 1, 0 },
                    { 1, 1, 1, 1, 1 },
                    { 1, 0, 1, 1, 1},
                    { 1, 1, 1, 1, 1},
            };

            TwoDArraySetZero(multi2);
        }

        static  void  TwoDArraySetZero(int[][] array){

            //iterate through all elements
            for(int i = 0 ; i <= array.length-1 ; i++){
                for (int j = 0; j <= array.length-1; j++) {

                    //checking if match with zero
                    if (array[i][j] == 0){

                        //set replace with -1 all matching zero row and col if not zero
                        for (int k = 0; k <= array.length-1 ; k++) {
                            if(array[i][k] != 0 )
                                array[i][k] = -1;
                            if(array[k][j] != 0)
                                array[k][j]= -1;
                        }
                    }
                }
            }

            //print array
            for(int i = 0; i <= array.length-1; i++)
            {
                for(int j = 0; j <= array.length-1; j++)
                {
                    //replace with zero all -1

                    if(array[i][j] == -1)
                        array[i][j] = 0;

                    System.out.printf("%5d ", array[i][j]);
                }
                System.out.println();
            }

        }

    } 
```

# c++ - c++ 在运行时修改资源

> ID：339265
> 
> 赞同：7
> 
> 时间：2008-12-04T00:40:36.693
> 
> 标签：c++, winapi, runtime, resources

是否可以在运行时以编程方式编辑可执行文件的资源？如果是这样，怎么做？如果没有，是否有其他程序可以轻松用于修改资源？

谢谢，德里克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-22T07:01:12.480

是的，这是可能的，虽然不是特别容易。它基本上需要编写一个资源编译器（至少对于您要修改的资源类型）。

例如，我曾经编写过一个菜单编译器，它在运行时将其输入从数据库中取出（然后将结果保存回数据库）。如果源表未更改，则使用现有资源，否则重建。

在菜单资源（我相信对话框）的情况下，棘手的一点是某些成员仅根据标志设置以及严格的对齐要求而存在。

在修改 .exe 中已经存在的资源的情况下，您需要将资源数据复制到内存缓冲区（如果要添加新元素，则需要额外的空间）（通过使用 FindResource、LockResource、内存副本然后 UnlockResource）。

进行更改后，您可以使用间接创建函数之一（即 CreateMenuIndirect）并传递缓冲区的地址。

资源 API 允许将这样的缓冲区写回应用程序二进制文件，但如果您使用代码签名，这会破坏签名，所以要非常小心。我也不知道该 API 是否适用于实际运行的程序。

# php - 基本的 php 表单帮助

> ID：339266
> 
> 赞同：0
> 
> 时间：2008-12-04T00:40:50.500
> 
> 标签：php, forms, calculator

我正在尝试制作一个计算器，该计算器将从用户那里获取输入，并为他们估算如果他们使用各种不同的 VoIP 服务将节省多少钱。

我已经这样设置了：

```
<form method="get" action="voip_calculator.php">
  How much is your monthly phone bill? 
    <input name="monthlybill" type="text" value="$" size="8">

  <p><input type="submit" name="Submit" value="Submit">
  </p>
</form> 
```

在我指向的页面 voipcalculator.php 上，我想调用“monthlybill”，但我不知道该怎么做。我也不知道如何让它对行中的数字进行减法。

这对您来说可能很简单，但对我来说非常令人沮丧，我谦虚地寻求一些帮助。谢谢！

这是来自 voip_calculator 的相关内容，您也可以单击 url 并提交一个数字以在 (in)action 中查看它。我尝试了很多次都没有成功：

```
<table width="100%;" border="0" cellspacing="0" cellpadding="0"class="credit_table2" >

<tr class="credit_table2_brd">
    <td class="credit_table2_brd_lbl" width="100px;">Services:</td>
    <td class="credit_table2_brd_lbl" width="120px;">Our Ratings:</td>
    <td class="credit_table2_brd_lbl" width="155px;">Your Annual Savings:</td>
</tr>

Your monthly bill was <?php echo 'monthlybill' ?>

<?php echo "$monthlybill"; ?>
<?php echo "monthlybill"; ?>
<?php echo '$monthlybill'; ?>
<?php echo 'monthlybill'; ?>

<?php
$monthybill="monthlybill";
$re=1;
$offer ='offer'.$re.'name';
$offername= ${$offer};
while($offername!="") {
    $offerlo ='offer'.$re.'logo';
    $offerlogo=${$offerlo};
    $offerli ='offer'.$re.'link';
    $offerlink=${$offerli};
    $offeran ='offer'.$re.'anchor';
    $offeranchor=${$offeran};
    $offerst ='offer'.$re.'star1';
    $offerstar=${$offerst};
    $offerbot='offer'.$re.'bottomline';
    $offerbottomline=${$offerbot};
    $offerca ='offer'.$re.'calcsavings';
    $offercalcsavings=${$offerca};

    echo '<tr >
            <td >
                <a href="'.$offerlink.'" target="blank">
                    <img src="http://www.nextadvisor.com'.$offerlogo.'" alt="'.$offername.'" />
                </a>
            </td>
            <td >
                <span class="rating_text">Rating:</span>
                <span class="star_rating1">
                    <img src="IMAGE'.$offerstar.'" alt="" />
                </span>
                <br />
                <div style="margin-top:5px; color:#0000FF;">
                    <a href="'.$offerlink.'" target="blank">Go to Site</a>
                    <span style="margin:0px 7px 0px 7px;">|</span>
                    <a href="'.$offeranchor.'">Review</a>
                </div>
            </td>
            <td >'.$offercalcsavings.'</td>  
        </tr>';
    $re=$re+1;
    $offer ='offer'.$re.'name';
    $offername= ${$offer};

}
?> 
```

offercal(1,2,3,4,5,6,7) Savings 调用一个名为 values.php 的文件，它们的定义如下：

```
$offer1calcsavings="24.99";
$offer2calcsavings="20.00";
$offer3calcsavings="21.95";
$offer4calcsavings="23.95";
$offer5calcsavings="19.95";
$offer6calcsavings="23.97";
$offer7calcsavings="24.99"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T01:05:08.190

我做的一件事是这个

```
echo "<pre>";
print_r($_GET);
echo "</pre>"; 
```

把它放在你的接收端的某个地方，你就会了解正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T01:22:15.347

没有为答案提供足够的详细信息，但让我们简化并假设您在数组中有“储蓄”数字，例如 companySavings 。那么，您需要从用户指定的值中减去这些值，对吗？你不需要打电话（如果你愿意，你可以......）

当用户单击“提交”并再次加载页面时，将月度账单拉到一个变量中，例如

```
$monthlyBill = $_GET['monthlybill']; //you should do some checking to prevent attacks but that's another matter 
```

然后，当您构建储蓄列表时，它看起来像这样

```
 <?php
     //...code for the rest of the page and starting your table

    foreach($companySavings as $savings){//insert each row into the table
      echo("<tr><td>".(comapnyName/Image whatever..)."</td><td>$".$monthlyBill-$savings."</td></tr>);
    }
   //... end the table and rest of code
   ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T00:58:35.067

您需要从 QueryString 中获取值并将其放入 PHP 变量中。

像这样：

```
$monthlyBill = $_GET['monthlybill']; 
```

现在变量 $monthlyBill 包含来自 QueryString 的值。

要显示它：

```
echo "Your monthly bill is: $monthlyBill"; 
```

# c# - TransactionScope 不回滚事务

> ID：339269
> 
> 赞同：13
> 
> 时间：2008-12-04T00:42:27.050
> 
> 标签：c#, .net, transactions, transactionscope

这是我的事务范围源代码的当前架构。第三个插入引发 .NET 异常（不是 SQL 异常），它不会回滚前两个插入语句。我做错了什么？

**编辑：** 我从 insert2 和 insert3 中删除了 try/catch。我还从 insert1 try/catch 中删除了异常处理实用程序并放入“throw ex”。它仍然不回滚事务。

**编辑 2：**我在 Insert3 方法中添加了 try/catch，并在 catch 语句中添加了一个“throw”。它仍然不回滚事务。

**更新：**根据我收到的反馈，“SqlHelper”类是使用SqlConnection 对象建立与数据库的连接，然后创建一个SqlCommand 对象，将CommandType 属性设置为“StoredProcedure”并调用SqlCommand 的ExecuteNonQuery 方法。

我也没有将 Transaction Binding=Explicit Unbind 添加到当前连接字符串。我将在下一次测试中添加它。

```
public void InsertStuff()
{
    try
    {
        using(TransactionScope ts = new TransactionScope())
        {
            //perform insert 1
            using(SqlHelper sh = new SqlHelper())
            {
                SqlParameter[] sp = { /* create parameters for first insert */ };

                sh.Insert("MyInsert1", sp);
            }

            //perform insert 2
            this.Insert2();

            //perform insert 3 - breaks here!!!!!
            this.Insert3();

            ts.Complete();            
        }
    }
    catch(Exception ex)
    {
        throw ex;
    }
}

public void Insert2()
{
    //perform insert 2
    using(SqlHelper sh = new SqlHelper())
    {
        SqlParameter[] sp = { /* create parameters for second insert */ };

        sh.Insert("MyInsert2", sp);
    }
}

public void Insert3()
{
    //perform insert 3
    using(SqlHelper sh = new SqlHelper())
    {
        SqlParameter[] sp = { /*create parameters for third insert */ };

        sh.Insert("MyInsert3", sp);
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-05T00:24:51.840

我也遇到了类似的问题。出现我的问题是因为我在 SqlCommands 中使用的 SqlConnection 在创建 TransactionScope 之前已经打开，因此它从未作为事务在 TransactionScope 中登记。

SqlHelper 类是否有可能重用在您进入 TransactionScope 块之前打开的 SqlConnection 实例？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T00:48:57.690

看起来您在 Insert3() 中捕获了异常，因此您的代码在调用后继续。如果您希望它回滚，您需要让异常冒泡到主例程中的 try/catch 块，以便永远不会调用 ts.Complete() 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T05:05:38.517

（基于不吞下异常的编辑版本）

手术需要多长时间？如果它们中的任何一个运行时间很长，则可能是[事务绑定](https://stackoverflow.com/questions/195420/transactionscope-bug-in-net-more-information#195427) ~~错误~~功能咬了你——即连接已断开。尝试添加`Transaction Binding=Explicit Unbind`到连接字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T00:51:56.267

只有在没有调用 ts.complete 的情况下退出 using 时才会发生隐式回滚。因为您正在处理 Insert3() 中的异常，所以异常永远不会导致 using 语句退出。

重新抛出异常或通知调用者需要回滚（将 Insert3() 的签名更改为 bool Insert3()？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:35:16.620

我没有看到您的帮助程序类，但如果您不调用完整语句，即使您从 .NET 代码中收到错误，事务范围也会回滚。我为你复制了一个例子。您可能在调试时做错了什么。此示例在 .net 代码中存在错误，并且与您的类似 catch 块。

```
 private static readonly string _connectionString = ConnectionString.GetDbConnection();

    private const string inserttStr = @"INSERT INTO dbo.testTable (col1) VALUES(@test);";

        /// <summary>
        /// Execute command on DBMS.
        /// </summary>
        /// <param name="command">Command to execute.</param>
        private void ExecuteNonQuery(IDbCommand command)
        {
            if (command == null)
                throw new ArgumentNullException("Parameter 'command' can't be null!");

            using (IDbConnection connection = new SqlConnection(_connectionString))
            {
                command.Connection = connection;
                connection.Open();
                command.ExecuteNonQuery();
            }
        }

        public void FirstMethod()
        {
            IDbCommand command = new SqlCommand(inserttStr);
            command.Parameters.Add(new SqlParameter("@test", "Hello1"));

                ExecuteNonQuery(command);

        }

        public void SecondMethod()
        {
            IDbCommand command = new SqlCommand(inserttStr);
            command.Parameters.Add(new SqlParameter("@test", "Hello2"));

                ExecuteNonQuery(command);

        }

        public void ThirdMethodCauseNetException()
        {
            IDbCommand command = new SqlCommand(inserttStr);
            command.Parameters.Add(new SqlParameter("@test", "Hello3"));

                ExecuteNonQuery(command);
            int a = 0;
            int b = 1/a;

        }

    public void MainWrap()
    {

        TransactionOptions tso = new TransactionOptions();
        tso.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
        //TransactionScopeOption.Required, tso
        try
        {
            using (TransactionScope sc = new TransactionScope())
            {
                FirstMethod();
                SecondMethod();
                ThirdMethodCauseNetException();
                sc.Complete();
            }
        }
        catch (Exception ex)
        {
            logger.ErrorException("eee ",ex);

        }
    } 
```

如果你想调试你的事务，你可以使用这个脚本来查看锁和等待状态等。

```
SELECT 
request_session_id AS spid,
CASE transaction_isolation_level 
WHEN 0 THEN 'Unspecified' 
WHEN 1 THEN 'ReadUncomitted' 
WHEN 2 THEN 'Readcomitted' 
WHEN 3 THEN 'Repeatable' 
WHEN 4 THEN 'Serializable' 
WHEN 5 THEN 'Snapshot' END AS TRANSACTION_ISOLATION_LEVEL ,
resource_type AS restype,
resource_database_id AS dbid,
DB_NAME(resource_database_id) as DBNAME,
resource_description AS res,
resource_associated_entity_id AS resid,
CASE 
when resource_type = 'OBJECT' then OBJECT_NAME( resource_associated_entity_id) 
ELSE 'N/A'
END as ObjectName,
request_mode AS mode,
request_status AS status
FROM sys.dm_tran_locks l
left join sys.dm_exec_sessions s on l.request_session_id = s.session_id
where resource_database_id = 24
order by spid, restype, dbname; 
```

在调用异常方法之前，您将看到两个方法调用的一个 SPID。

![异常前两次调用](https://i.stack.imgur.com/BliCu.png)

默认隔离级别是可序列化的。[您可以在此处阅读有关锁和事务的更多信息](http://omerc.blogspot.com/2010/04/transaction-and-locks-in-ms-sql-2008.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-29T03:05:40.367

当我在`TransactionScope`. 我注意到由于服务接口中的“TransactionFlow”属性，不允许事务流。因此，WCF 服务操作没有使用外部事务范围使用的事务。如下所示更改它以允许交易流解决了我的问题。

> [TransactionFlow(TransactionFlowOption.NotAllowed)]

至

> [TransactionFlow(TransactionFlowOption.Allowed)]

# asp.net-mvc - 使用 ASP.NET MVC 回发 + 同步回调的问题

> ID：339281
> 
> 赞同：4
> 
> 时间：2008-12-04T00:48:09.363
> 
> 标签：asp.net-mvc, model-view-controller, upload, progress-bar

我正在尝试使用 jQuery 进度条为 ASP.NET MVC 创建一个上传控件。在 ASP.NET 中，实现没有问题，但在 MVC 中，问题是服务器在文件上传之前不会响应我的回调。

上传控件是基于html文件上传元素的，我一辈子都无法理解MVC如何同步处理回发+回调？

我搜索了一大堆答案，但**我能找到的只是“回调+回调”解决方案，而不是回发+回调。**

有谁知道如何为 MVC 解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T01:08:04.423

嗯，

Thomas，MVC 根本不处理回传。因为 URL 直接路由到控制器上的 Action 方法，所以表单并不意味着实际回发到自身。此外，Asp.Net 必须在服务器上处理回发的所有回发处理都从 .Net MVC 框架中提取出来。

完成您尝试使用进度条执行的操作的更好方法是使用带有 AJAX 的 JQuery 来调用您的服务器，然后使用 Javascript/CSS（可能是灯箱方法）或弹出窗口来通知他们正在等待的用户。当 Ajax 调用完成它的工作时，您可以让 Javascript 触发重定向到您希望用户在执行操作后重定向到的 MVC 中的页面。使用 JQuery 进行 AJAX 调用是一件轻而易举的事，而且玩起来也很有趣！

[核实...](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=293)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:55:48.530

建议：

> 您可以使用[JQuery Uploadify 控件](http://www.uploadify.com/)来显示上传的状态。这个控件有flash和html 5个类型的控件。使用适用于您的任何一种。

# xml - 具有正确复制和粘贴功能的 XML 编辑器？

> ID：339286
> 
> 赞同：0
> 
> 时间：2008-12-04T00:50:27.343
> 
> 标签：xml, escaping

我正在寻找一个 XML 编辑器，它可以让我键入、复制和粘贴任意文本到 XML 元素或属性中，而无需我返回并转义任何必须使用保留的 XML 实体（和号、尖括号或引号）的字符）。XMLSpy 出现了短缺。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T01:22:37.997

~~您真的希望编辑器知道当您粘贴时`a<b`它应该转义`<`，但当您粘贴`a<b/>`时不应该？似乎是一个艰巨的任务...~~

考虑了一会儿，我认为可以通过**单独**的“特殊粘贴”命令或特殊的编辑器模式来实现您想要的。

[Google 搜索](http://www.google.com/search?q=xml+editor+paste+escape)显示[ExchangerXML](http://www.exchangerxml.com)似乎提供了所需的粘贴行为。

另一种选择可能是可编程文本或 XML 编辑器，它可以让您为“粘贴文本并使用以下字符串替换对其进行后处理”定义一个“宏”（或者，“对剪贴板中的文本执行替换，然后粘贴”）。我敢打赌 emacs 可以做到，但我不是 emacs 用户。

或者，您可以考虑使用 CDATA 部分并在其中粘贴未转义的文本。这适用于任何编辑器：

```
<![CDATA[a<b]]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T21:28:07.410

I just realized I have Visual Studio 2005 and it has the behavior I'm looking for.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T01:03:15.027

您可以使用[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)和[TextFX 插件](http://notepad-plus.sourceforge.net/commun/pluginsBin/NPPTextFX27-v0.24Release-NPP34.zip)。

Notepad++ 是一个不错的免费程序员编辑器，它执行 XML。添加 TextFX 插件，您将获得一个菜单项 TextFX | 编码 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-24T21:22:43.697

Firstobject[用于 Windows 可编辑树视图的免费 XML 编辑器](http://www.firstobject.com/video-demo-editing-rss-xml-in-tree-of-xml-editor.htm)允许您复制粘贴和编辑元素和属性值，而无需担心那些特殊字符（您将同时在右侧的文本视图中看到转义值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-21T13:47:50.873

知道这可能晚了五年，但 xmetal 做到了。

# c# - LINQ to XML 新手问题：返回节点值和后代值

> ID：339296
> 
> 赞同：1
> 
> 时间：2008-12-04T00:58:09.123
> 
> 标签：c#, xml, c#-3.0, linq-to-xml

问候！

我有一些这样的 XML：

```
<Root>
    <AlphaSection>
    .
    .
    .
    </AlphaSection>

    <BetaSection>
        <Choices>
            <SetA>
                <Choice id="choice1">
                    <Title>Choice 1 Title</Title>
                    <Body>Choice 1 Body</Body>
                </Choice> 
                <Choice id="choice2">
                    <Title>Choice 2 Title</Title>
                    <Body>Choice 2 Body</Body>                
                </Choice>
            </SetA>
            <SetB>
                <Choice id="choice3">
                    <Title>Choice 3 Title</Title>
                    <Body>Choice 3 Body</Body>
                </Choice> 
                <Choice id="choice4">
                    <Title>Choice 4 Title</Title>
                    <Body>Choice 4 Body</Body>                
                </Choice>
            </SetB>
        </Choices>
    </BetaSection>

    <GammaSection>
    .
    .
    .
    </GammaSection>
</Root> 
```

我目前正在执行以下操作来检索每个选项的 ID：

```
var choiceList = myXDoc.Root
                       .Element("BetaSection")
                       .Descendants("Choice")
                       .Select(element => new
                               {
                                  ID = element.Attribute("id").Value,
                                  // Title = ?
                                  // Body = ?
                               }); 
```

我还想获取每个选项的 Title 和 Body 子节点中的值。我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T01:12:17.300

```
element => new {
                ID = element.Attribute("id").Value,
                Title = element.Element("Title").Value,
                Body = element.Element("Body").Value
               }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T04:24:48.097

XElement 还提供了一堆类型转换重载，因此您可以执行以下操作...

```
element => new {
                 ID = (string)element.Attribute("id"),
                 title = (string)element.Element("Title"),
                 Body = (string)element.Element("Body")
               }); 
```

# security - 在 HTTP 标头中隐藏 Web 服务器信息是一种好习惯吗？

> ID：339312
> 
> 赞同：9
> 
> 时间：2008-12-04T01:03:43.137
> 
> 标签：security, http, web-applications

这个问题与编程相关的安全性更高，如果不应该在这里，抱歉。

我目前正在开发一个 Web 应用程序，我很好奇为什么大多数网站不介意在 HTTP 标头中显示其确切的服务器配置，例如 Apache 和 PHP 的版本，以及完整的“mod_perl，mod_python，...”列表等等。

从安全的角度来看，我希望无法确定我是在 Apache 上运行 PHP、在 IIS 上运行 ASP.NET 还是在 Lighttpd 上运行 Rails。

显然“默默无闻不是安全”，但我是否应该担心访问者知道我的服务器运行的是什么版本的 Apache 和 PHP？隐藏这些信息是好的做法还是完全没有必要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-04T02:39:06.750

流行的智慧是删除服务器 ID 和版本；更好的是，将它们更改为另一个合法的服务器 ID 和版本——这样攻击者就会开始尝试针对 Apache 的 IIS 漏洞或类似的东西。还不如误导攻击者。

但老实说，还有很多其他线索可供参考，我想知道这是否值得。我想它可以阻止攻击者使用搜索引擎来查找具有已知漏洞的服务器。

（就我个人而言，我并不关心我的 HTTP 服务器，但它是用 Java 编写的，并且更不容易受到典型类型的攻击。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T01:15:44.157

我认为您通常会看到这些标题，因为系统***默认***发送它们。

我经常删除它们，因为它们没有提供真正的价值，并且可以，正如你所建议的那样揭示有关服务器的信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-04T01:32:03.127

将信息隐藏在标题中通常只会减慢懒惰和无知的恶棍。有很多方法可以对系统进行指纹识别。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-04T01:29:41.370

针对 IP运行`nmap -O -sV`将为您提供具有相当高准确度的操作系统和服务版本。您通过让您的服务器宣传该信息而放弃的唯一额外信息是您加载了哪些模块。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-04T15:18:00.790

似乎有些答案缺少关闭标题的明显优势。

是的，你们都是对的；转动标题（以及出现在目录列表中的状态行）并不能阻止攻击者找出您使用的软件。

但是，关闭此信息可防止使用 google 查找易受攻击系统的恶意软件找到您。

tldr：不要将其用作（或什至用作）安全措施，而是作为驱走不需要的流量的措施。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-07T08:12:23.377

我通常用 ServerTokens 关闭 Apache 的长头版本信息；它没有增加任何有用的东西。

没有人知道的一点是，如果您从 Web 服务器提供的信息较少，那么对于潜在客户、渗透测试公司等来说，它看起来会更好的安全性。

因此，提供更少的信息会提高感知的安全性（即，它表明您实际上已经考虑过并做了一些事情）

# jquery - 'JQuery' 未定义

> ID：339314
> 
> 赞同：22
> 
> 时间：2008-12-04T01:04:02.717
> 
> 标签：jquery, asp.net-mvc, iis-7

我正在处理使用本地文件系统设置创建的 ASP.net 项目。我正在使用 MVC 和 Jquery。当我在调试模式下运行应用程序时，Jquery 工作正常，即在 ASP.net 开发服务器中。我正在尝试在 IIS 7 中托管应用程序。在托管模式下，它无法识别 Jquery 并给出脚本错误“Jquery 未定义”。脚本文件的位置在两种模式下都没有改变。任何人都可以知道可能是什么原因以及如何解决这个问题。

我的代码如下所示；

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<script src="../../Scripts/MicrosoftAjax.debug.js" type="text/javascript"></script>

<script src="../../Scripts/MicrosoftMvcAjax.debug.js" type="text/javascript"></script>

<script src="../../Scripts/jquery-1.2.6.js" type="text/javascript"></script>

<!-- YUI Styles -->
<link href="../../Content/reset.css" rel="stylesheet" type="text/css" />
<link href="../../Content/fonts.css" rel="stylesheet" type="text/css" />
<link href="../../Content/grids.css" rel="stylesheet" type="text/css" />
<!-- /YUI Styles -->
<link href="../../Content/knowledgebase.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
    //this hides the javascript warning if javascript is enabled
    (function($) {
        $(document).ready(function() {
            $('#jswarning').hide();
        });
    })(jQuery);
</script>

<asp:ContentPlaceHolder ID="ScriptContent" runat="server" /> 
```

……

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-08-31T13:49:44.363

0 我不知道你们是否找到了解决问题的方法。我遇到了同样的问题，并且想弄清楚为什么我使用的插件会出现“jQuery is undefined”错误。我尝试了从互联网上获得的所有解决方案，但一点运气都没有。

但是，突然间我的脑海中闪过一些东西，可能是脚本文件应该是有序的。所以，我将 jquery 引用移到了第一个位置，一切都开始像魅力一样工作。

请记住，如果您使用任何带有 jquery 的插件，请确保使用以下设置对这些字段的引用的顺序。

1.  对 jquery 库的引用
2.  参考其他后续插件（依赖）库等等……

例如：

1.  "脚本 src="js/jquery-1.3.2.min.js" 类型="文本/javascript"...
2.  "脚本 src="js/jqDnR.min.js" 类型="文本/javascript"...
3.  "脚本 src="js/jquery.jqpopup.min.js" 类型="文本/javascript"...
4.  "脚本 src="js/jquery.bgiframe.min.js" 类型="文本/javascript"...

始终确保您必须首先放置 jquery 引用，然后是后续库。

希望这可以解决您的问题，尤其是在您使用 MasterPages 时。非常奇怪的是，当您不使用 MasterPages 时，无论您使用什么顺序，它都能正常工作，但当您使用时，它会以某种方式要求正确的顺序。

祝你好运，编码愉快，

文森特·德索萨

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-12-04T01:10:34.387

尝试使用 Firebug 'Net' 选项卡来查看文件是否已加载。

您还可以将 Firebug 配置为在所有错误上都失败，并查看错误发生的时间与 jQuery 加载的时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-04T19:16:21.870

使用 FIrebug 后，我发现文件没有找到，因为文件的相对路径不起作用。为了解决这个问题，我们应该使用 Url.Content 方法来重新设置路径。例如：

```
<script src="<%= Url.Content("~/Scripts/jquery-1.2.6.js")%>" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-04T21:39:34.077

您也可以尝试让 Google 为您托管 jQuery：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script> 
```

这将避免担心脚本的相对路径，避免服务器上的负载，并且对于用户（可能已经在浏览器的缓存中某处）来说会更快。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-11-29T09:10:48.963

我通过页面中的 JavaScript 版本与项目中的版本不匹配而收到消息。

On the page: <script src="@Url.Content("~/Scripts/**jquery-1.4.4**.min.js")" type="text/javascript"></script>

Actual version in the project: **jquery-1.4.1**.min.js

Diagnosed by using Firebug, and setting it show all errors, as described in the accepted answer.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-04T01:11:43.790

`Jquery`？！
你的意思是`jQuery`？

Javascript 区分大小写。`Jquery`不一样`jQuery`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-03-31T15:35:56.370

为了详细说明“文本/javascript”的答案，“应用程序/javascript”将在 Firefox 中工作并很好地加载 jQuery。但是，它不会在 IE 中加载文件。使用“文本/javascript”：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" ></script> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-10T10:18:40.730

Raja 是对的，URL.Content 有效。

```
<script src="<%= Url.Content("~/Scripts/jquery-1.2.6.js")%>" type="text/javascript"></script> 
```

此外，为防止您在将应用程序迁移到 IIS 服务器时感到惊讶，请不要使用 Web 开发服务器，而应在开发时使用 IIS。

您可以通过编辑 Web 属性直接从 Visual Studio 使用 IIS：

*   转到“网络”标签
*   选中“使用本地 IIS Web 服务器”
*   单击“创建虚拟目录”
*   如果适用，请转到 IIS 管理器以禁用创建的虚拟目录中的匿名访问。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-02-10T14:23:08.483

如果您从 cdn 加载 jQuery 并从服务器加载本地脚本，我发现此错误的另一个原因。它们是独立加载的，所以如果本地脚本在 jQuery 之前完成，它也会在之前执行，这给了我们一个可爱的错误。如果 jQuery 不在浏览器缓存中，这尤其是一个问题，因此您可能会在第一次加载脚本时看到此错误并在稍后消失。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-04T16:25:35.787

对我来说，当我的某些代码中存在真正的 Javascript 错误时，通常会发生此错误。这可以防止 jQuery.js 文件被完全解析。在 Firebug、Safari 或其他调试友好型浏览器中查看错误控制台。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-24T03:04:15.017

常见的错误是在 Jquery.js 之前首先包含其他 Jquery 脚本（Jquery.validation.js）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-04T01:06:03.147

这通常发生在您的 HTML 或 JavaScript 格式不正确时。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-04T01:06:12.163

如果您的 javascript 中没有错误（例如：缺少括号），那么它要么不包括 jQuery 文件，要么您试图在该文件加载之前运行一些依赖 jQuery 的代码。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-03-31T23:38:03.053

如果一切都失败了，请确保该文件具有正确的权限集。这只是发生在我身上！

您可以右键单击目录中的文件并在那里设置权限，或者只是在 Visual Studio 中创建另一个 .js 文件并复制并粘贴内容。像魅力一样工作。:)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-07T20:50:49.257

尝试

```
<script src="<%= ResolveUrl("~/Scripts/jquery-1.2.6.js")%>" type="text/javascript"></script> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-08-05T13:57:04.643

路径不对。仔细检查一下。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2010-04-28T19:22:36.703

要将我的问题/解决方案添加到这个长长的列表中......

我使用 Windows 2003 在 IE7 中测试该站点。该站点运行良好，但 jQuery 根本没有运行。于是我直接去[http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js)**发现ajax.googleapis.com 不在安全站点列表中**。添加 *.googleapis.com 后一切正常。愚蠢的疏忽，但也许这会帮助处于类似情况的其他人。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2011-03-27T06:23:21.970

我通过取消注释 _Layout.cshtml 中的 jQuery 引用解决了这个问题。重新启动网站后，一切都刚刚开始工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-03-18T16:06:10.063

Correct! I have chased this down for days now, when you are using a new MVC project from scratch in VS, it has its own references to JQuery in the Layout.cshtml page. If you are attempting to reference JQuery within a page, it will get overwritten by the reference in the Layout.cshtml page. Comment the code in the masterpage (Layout.cshtml), and it will use your page references.

# excel - 有谁知道 excel 2003 的 xml 电子表格的 .net odbc 驱动程序连接字符串？

> ID：339325
> 
> 赞同：2
> 
> 时间：2008-12-04T01:08:37.433
> 
> 标签：excel, odbc, connection-string

我知道这具有一定的“向我发送代码”质量，但互联网确实让我失望了。我有一个 excel 2003 的 xml 格式的 excel 文件，我想附加一个 odbc 连接。

而且我似乎找不到正确的连接字符串。connectionstrings.com 让我失望了，这里关于 SO 的其他问题（例如[this](https://stackoverflow.com/questions/269876/what-is-the-connection-string-for-odbc-connections)）也没有涵盖这种文件类型。而且，当然，二进制 xls 连接和新的 xlsx 连接似乎都不起作用？

有没有人知道正确的语法？是否有适用于 excel 2003 xml 的 odbc 驱动程序？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T01:18:01.673

Driver={Microsoft Excel 驱动程序 (*.xls)};DriverId=790;Dbq=C:\MyExcel.xls;DefaultDir=c:\mypath;

# sql-server - SQL Server 事务复制和不同的主键

> ID：339335
> 
> 赞同：1
> 
> 时间：2008-12-04T01:11:34.807
> 
> 标签：sql-server, replication, constraints

使用 SQL Server 2005 和事务复制，我可以删除订阅者的主键约束，同时保留发布者的主键约束吗？

主要我想这样做是因为我想聚集在与现有聚集约束不同的列上。我不认为我可以在不首先删除它的情况下将约束从集群转换为非集群，并且复制已经发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T09:13:28.483

为什么不保留主键并在订阅者上创建额外的非聚集索引，否则这不能解决您的问题？如果在订阅者上索引其他列的原因是性能，那么这应该是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T04:36:36.560

直接，对于主键是不可能的。反之亦然：当您设置事务复制时，当您选择要复制的文章时，您可以选择不同的属性，例如“检查外键约束”。将该属性设置为 false。在 db1 中，将主键转换为外键，其中包含一些新表 tb1 作为主键。因此，最终，在您的复制数据库 db2 上，外键约束不会被复制，从而允许您做您想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T21:48:51.783

The basic of replication process is to maintain identical database organisation between different servers.

Your question here can be considered as asking if a replication process can be used to break this basic replication principle.

So the answer is no, but I am still interested in the reasons that let you formulate this question. Shall I say that this "dual primary key" option was seen as a way to solve another problem? I think you should go back to this initial issue and try to find another way to solve it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T02:53:17.767

这可能适用于快照复制，但我不确定它是否适用于事务复制。允许复制表的唯一要求是存在一个主键以允许唯一标识每一行。

您可以尝试暂停复制，然后尝试删除主键约束，将其重新创建为非集群 PK，然后取消暂停复制。如果 SQL Server 不允许您放弃 PK，您会在造成任何损害之前找出答案。

另一种方法是中断复制并重新初始化它。

无论哪种方式，您都希望在维护窗口期间进行更改。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-05T04:57:49.420

我做了自己的功课，得出的结论是你*可以*放弃对订阅者的限制。

我设置了一个简单的事务复制场景，删除了订阅者的主键，然后进行了一些插入、删除和更新，并验证了更改是否已复制到订阅者。

我想我应该一开始就这样做。我不知道它会那么容易:)。

# perl - 如何将会话添加到我的 Perl Web 应用程序？

> ID：339340
> 
> 赞同：4
> 
> 时间：2008-12-04T01:15:13.177
> 
> 标签：perl, web-applications, session

我想在我的 Perl Web 应用程序中维护状态。我怎样才能有效地做到这一点？我查看了 CGI::Session 但它说它不适用于 UTF-8 页面，这是一个要求。我还希望能够将一些基本信息传递给在 Glassfish 应用服务器上运行的另一个 Java 应用程序，这样人们就不会被迫同时登录这两个应用程序。如何管理这一切？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T05:12:30.640

会话的基础是您需要一个存放会话数据的地方（存储）以及一种存储和检索会话数据的方法。虽然一些框架称之为状态，但它实际上归结为拥有一个会话密钥（或会话 ID）并通过 cookie 或 URL 参数将其传递回您的应用程序。

您的商店可以是任何可以为您保存数据的东西。一些示例是：平面文件、dbm 文件、DBMS 或某种类型的内存缓存。

CGI::session 和 Apache::Session 使用的最常见的实现是在存储中的每条记录中具有三个字段：session_id、session_data、expires_time。

CPAN 上的会话模块负责在请求开始时加载会话，并在结束时将其存储回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T10:07:46.300

CGI::Session 文档中引用的错误标记为“已解决”。那个是关于数据库中的 utf-8 的。

看来您仍然不应该使用“使用编码 utf-8”。但是你为什么首先要这样做呢？“perldoc encoding”表示“允许您以非 ascii 或非 utf8 编写脚本”。怎么回事？

使用 CGI::Session 时，生成的 HTML utf8 编码似乎不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T22:25:36.717

找到一个为您处理会话的 Perl Web 框架。

例如[催化剂](http://www.catalystframework.org/)。它将完全抽象出用户会话，因此您甚至不必考虑它。请参阅[有关如何将会话与催化剂一起使用的教程。](http://search.cpan.org/dist/Catalyst-Plugin-Session/lib/Catalyst/Plugin/Session/Tutorial.pod)

如果您正在使用 Perl 编写网站，那么无论如何您都应该使用这个框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-27T21:10:11.280

嗯，如果还不算太晚的话。CGI::Session 适用于任何数据。这取决于您用于会话的序列化格式以及如何将它们存储在数据库中。我还建议与 CGI::Simple 结合使用，为此我添加了 UTF-8 表单数据处理。

您是否启用了与数据库 UTF-8 的连接？

对于 MySQL，您可以使用：SET NAMES UTF8；作为连接后的第一个语句；

您是否将会话存储在具有不同编码的文本字段中？

只要对这些事情多加小心，你就会没事的。

[您可以在此处](http://sourceforge.net/projects/bcc)查看一些使用示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-27T21:19:30.990

您最好的选择是生成某种会话密钥并将其存储在浏览器的 cookie 中。然后，使用该密钥将信息存储在两者都可以访问的数据库或[内存缓存中。](http://www.danga.com/memcached/)

# c# - 是否有与 Apache Hadoop 等效的 .NET？

> ID：339344
> 
> 赞同：100
> 
> 时间：2008-12-04T01:18:43.560
> 
> 标签：c#, .net, hadoop, mapreduce

所以，我一直怀着浓厚的兴趣关注[Hadoop](http://hadoop.apache.org/)，老实说，我很着迷，事情并没有变得更酷。

我唯一的小问题是我是一名 C# 开发人员，它使用 Java。

并不是说我不了解 Java，而是我正在寻找包含[Google MapReduce](http://en.wikipedia.org/wiki/MapReduce)方法的 Hadoop.net 或 NHadoop 或 .NET 项目。有人知道吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-12-04T01:53:33.597

你看过使用[Hadoop 的流式传输吗？](http://wiki.apache.org/hadoop/HadoopStreaming)

我一直在 python 中使用它:-)。

我开始看到异构方法通常是最好的，看起来其他人也在做同样的事情。

如果您查看诸如协议缓冲区或 facebook 的节俭之类的项目，您会发现有时最好使用用另一种语言编写的应用程序并以您喜欢的语言构建粘合剂。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-10-01T17:09:44.720

最近，MySpace 发布了他们的 .NET MapReduce 框架[Qizmt](http://code.google.com/p/qizmt/)作为开源，因此这也是该领域的潜在竞争者。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-04-12T11:24:23.060

请参阅[http://research.microsoft.com/en-us/projects/dryadlinq/default.aspx](http://research.microsoft.com/en-us/projects/dryadlinq/default.aspx)或[http://msdn.microsoft.com/en-us/library/dd179423.aspx](http://msdn.microsoft.com/en-us/library/dd179423.aspx)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2011-11-24T12:57:32.307

我在[这里的问题中回答了你的问题](https://stackoverflow.com/questions/8257324/net-and-hadoop)

在源代码中说：

微软[放弃](http://www.zdnet.com/blog/microsoft/microsoft-drops-dryad-puts-its-big-data-bets-on-hadoop/11226)了它的替代品（[Dryad](http://research.microsoft.com/en-us/projects/dryad/)），转而支持 Hadoop。明年他们将发布带有 Hadoop 集成的 MS SQL Server 2012。就在我们说话的时候，Azure 和 Windows Sever 支持正在开发中。

将于2012年上半年上市。

Hadoop 是排名第一的大数据平台，将得到开源和专有源（Java、.Net、Python 等）的支持，甚至 Oracle 也在采用它[。](http://en.wikipedia.org/wiki/Big_data)

如果您正在开发某些东西，那么如果您在.Net 平台上，您应该等待。

更多关于什么是可能的信息将在[这里提供](https://stackoverflow.com/questions/8257324/net-and-hadoop)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-01-27T15:59:51.743

我会说 DryadLinq 是我们 .NET 人员所拥有的最接近 Hadoop 的东西。但这取决于你想用 hadoop 做什么。如果您正在寻找优化的自维护分布式文件 (DFS) 系统，那么[DryadLINQ](http://research.microsoft.com/en-us/projects/dryadlinq/default.aspx)不是您想要的。它类似于 DFS，但您必须手动构建分区并分发每个分区。

话虽如此，如果您正在寻找的 Hadoop 的分布式执行方面比 DryadLINQ 真的很棒（不，我不隶属于 MS）。只要您有[Microsoft HPC](http://www.microsoft.com/hpc/)集群设置，就可以轻松使用 DryadLINQ。

您编写的代码实际上只是直接的 LINQ 代码，除了`IEnumerable<T>`您必须执行它而不是执行 LINQ `PartitionedTable<T>`（自构建分布式数据结构）。

DryadLINQ 真正酷的地方在于开发算法时的快速周转时间（尝试、测试、调整、重复）。您只需编写 LINQ 代码来进行计算，DryadLINQ 将负责整个分布式执行部分。这是我遇到的最自然的类比，它使得为分布式处理编写代码就像为单进程处理编写代码一样。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-03-21T11:45:11.397

您可以查看 RavenDb 之类的东西，它为相当大的数据量提供了对 MapReduce 的非常好的支持。因为它是在 .Net 中构建的，所以可以使用适当的 LINQ 客户端 API。

[http://ravendb.net/](http://ravendb.net/)

为了让你开始，你可以阅读我的[博客](http://therainandtheshade.wordpress.com/2011/07/27/why-i-like-ravendb-as-a-net-developer/)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-07-16T12:01:17.623

使用 Apache Hadoop 和流式传输可能会更好，因为 Apache Hadoop 正在由 Yahoo 和 Facebook 等行业巨头积极开发和维护。所以它可以做你期望它做的事情。

如果您需要 .NET 中的解决方案，请查看 Myspace implementation @ [MySpace Qizmt - MySpace 的开源 Mapreduce 框架](http://code.google.com/p/qizmt/ "MySpace Qizmt - MySpace 的开源 Mapreduce 框架")

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-16T20:06:21.047

微软正在推出[HDInsight](http://www.microsoft.com/en-us/sqlserver/solutions-technologies/business-intelligence/big-data.aspx)，它被称为“100% 与 Apache 兼容的 Hadoop 发行版”。

它既可以在 Windows Server 上使用，也可以作为 Windows Azure 服务使用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-12-29T01:49:36.520

微软研究院有 Daytona 项目 [http://research.microsoft.com/en-us/projects/daytona/](http://research.microsoft.com/en-us/projects/daytona/)

你可以下载它。C# 中有一个 WordCount 示例。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-19T07:12:35.520

您现在可以直接从 .NET 使用 Hadoop，Microsoft 已经发布了一个 SDK 来执行此操作。

[https://hadoopsdk.codeplex.com/](https://hadoopsdk.codeplex.com/)

当然，这意味着使用基于 java 的 Hadoop 网络。但是，如果服务器在 java 中运行，这有关系吗？我相信有人可能会尝试移植它，但我认为这不是一个好主意，因为公司已经在支持 java 版本，而且我认为 .NET 移植不会得到同样的关注。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-27T08:08:40.770

看看：

[http://www.windowsazure.com/en-us/services/hdinsight/](http://www.windowsazure.com/en-us/services/hdinsight/)

它是用于 Azure 的 Hadoop 实现，您可以使用 .NET 来访问它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-03-25T16:23:41.880

在内部，微软一直在使用 Cosmos。这已通过 Azure 在 Microsoft 之外提供。它被命名为[Azure Data Lake Analytics](https://azure.microsoft.com/en-us/documentation/services/data-lake-analytics/)和[Azure Data Lake Store](https://azure.microsoft.com/en-us/documentation/services/data-lake-store/)。Azure Data Lake 分析是一种 Yarn 即服务和 Azure Data Lake Store WebHDFS 即服务。Azure Data Lake Analytics 的第一个版本仅托管 U-SQL，这是一种基于 Transact-SQL + C# 的语言。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-17T22:43:48.883

.NET 有一个非常可爱的 MapReduce 实现：http: [//mapsharp.codeplex.com/](http://mapsharp.codeplex.com/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2011-10-12T09:50:17.547

Dryad/linq 正在产品化，即将发布：http: [//blogs.technet.com/b/windowshpc/archive/2011/07/07/announcing-linq-to-hpc-beta-2.aspx](http://blogs.technet.com/b/windowshpc/archive/2011/07/07/announcing-linq-to-hpc-beta-2.aspx) 结合使用使用 Microsoft HPC 提供强大的、基于集群的非结构化数据查询解决方案

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-04-25T18:28:47.323

正如其他人所提到的，[DryadLINQ](http://research.microsoft.com/en-us/projects/dryadlinq/)是一个编程框架，允许开发人员编写 LINQ 查询并在集群上执行它们，其方式类似于 MapReduce。DryadLINQ 项目最近在[GitHub 上](https://github.com/MicrosoftResearchSVC/Dryad/)根据 Apache 许可证发布，该版本包括对在 YARN 集群（包括 Azure HDInsight 集群）上运行的支持。

# c# - 删除单个反斜杠，将双精度转换为字符串中的单个

> ID：339353
> 
> 赞同：2
> 
> 时间：2008-12-04T01:25:33.593
> 
> 标签：c#, regex

如何最好地将双反斜杠的实例转换为字符串中的单个反斜杠，但删除任何出现的单反斜杠？

所以这：

```
\|测试|ABC:1234\\1000-1\|

```

应转换为：

```
|测试|ABC:1234\1000-1|

```

理想情况下，我想避免将 '\' 临时替换为另一个字符。首选使用 .NET 或正则表达式的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T01:40:24.793

```
Regex.Replace(input, @"\\(.|$)", "$1"); 
```

[编辑：模式与 OP 中指定的所有可能情况不匹配。感谢您的建议，GONeale 和 Alan M.]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T01:58:39.750

谢谢公主的回复，

但是在其他一些情况下它会失败。我正在使用这个输入：

```
Regex.Replace(@"\L\\A\", @"\\(.)", "$1") 
```

它正在返回：`L\A\` 它应该何时返回`L\A`。我了解您正在寻找带有“。”的任何其他字符，但不确定如何修复它，因为有时不会有其他字符。

我设法在 C# 中组合了一个可行的（但有点冗长）方法：

```
for (int i = 0; i < text.Length; i++)
{
    if (text[i] == '\\' && (i + 1 <= text.Length && text[i + 1] == '\\'))
        newText += '\\';
    else if (text[i] == '\\')
        newText += string.Empty;
    else
        newText += text[i];
} 
```

但更喜欢更优雅的东西。

# tag-cloud - 标记云网络服务？

> ID：339356
> 
> 赞同：4
> 
> 时间：2008-12-04T01:29:30.887
> 
> 标签：tag-cloud

是否有生成标签云的公共、免费 Web 服务？我正在寻找类似谷歌图表的东西——URL 输入，图像输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T01:44:09.437

我对此表示高度怀疑。用于此的 Web 服务没有任何意义。

虽然有大量的图书馆：

CodeIgniter：[http ://codeigniter.com/forums/viewthread/64498/](http://codeigniter.com/forums/viewthread/64498/)

Java： http: [//opencloud.sourceforge.net/](http://opencloud.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T16:06:26.747

这对我来说仍然有意义，但我还没有找到任何这样的服务。实际上，API 可以是文字输入、样式化文本输出或文字输入、图像输出。我将在 SWT 中实现我需要的东西，然后从那里开始。

[您可以在http://www.wordle.net/gallery/wrdl/359579/JUnit_Tests](http://www.wordle.net/gallery/wrdl/359579/JUnit_Tests)看到我想生成的那种东西的例子。这些是 JUnit 的自检名称中的单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-24T18:04:38.720

12 年后，我决定构建这个[World Cloud API](https://quickchart.io/documentation/word-cloud-api/)。您将文本发送给它，它会渲染一个 PNG 或 SVG 文字云，其中包含按频率缩放的文字标记。

这是一个使用著名演讲的简单 URL 示例：

```
https://quickchart.io/wordcloud?text=Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.But, in a larger sense, we can not dedicate—we can not consecrate—we can not hallow—this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us—that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion—that we here highly resolve that these dead shall not have died in vain—that this nation, under God, shall have a new birth of freedom—and that government of the people, by the people, for the people, shall not perish from the earth. 
```

[![词云 API 示例](https://i.stack.imgur.com/tibIP.png)](https://i.stack.imgur.com/tibIP.png)

请注意，GET 请求通常要求您对文本进行 URL 编码，尤其是当它包含特殊字符时。

有许多参数可让您自定义和缩放您的词云。一些值得注意的包括：

*   **text**：创建标签云的实际文本（必需）
*   **scale**：确定单词如何按频率缩放的函数。 `linear`（默认）`sqrt`、 或`log`。
*   **removeStopWords**：设置为`true`删除常用英文单词
*   **fontScale**：确定单词基线大小的乘数

对于较大的文本，您应该使用 POST 请求而不是在 URL 中对其进行编码。这是 Python 中的一个示例用法：

```
resp = requests.post('https://quickchart.io/wordcloud', json={
    'format': 'png',
    'width': 1000,
    'height': 1000,
    'fontScale': 15,
    'scale': 'linear',
    'removeStopwords': True,
    'minWordLength': 4,
    'text': 'To be or not to be, that is the question...',
})

with open('shakespeare.png', 'wb') as f:
    f.write(resp.content) 
```

[我在这里](https://quickchart.io/documentation/word-cloud-api/)记录了所有 API 选项和多个词云示例。

希望有人觉得这很有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T17:41:50.670

也许你可以利用这个：[http ://www.wordle.net/](http://www.wordle.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-02T01:44:50.483

意识到这是一篇旧帖子，但我认为 tagcrowd.com 可能在这里工作，尽管没有 API 访问权限。商业许可证便宜 19.95 美元。

# variables - 带有捕获变量的 Lambda

> ID：339366
> 
> 赞同：2
> 
> 时间：2008-12-04T01:38:46.123
> 
> 标签：variables, c#-3.0, subsonic, lambda

考虑以下代码行：

```
private void DoThis() {
    int i = 5;
    var repo = new ReportsRepository<RptCriteriaHint>();

    // This does NOT work
    var query1 = repo.Find(x => x.CriteriaTypeID == i).ToList<RptCriteriaHint>();      

    // This DOES work
    var query1 = repo.Find(x => x.CriteriaTypeID == 5).ToList<RptCriteriaHint>();    
} 
```

因此，当我将一个实际数字硬连接到 lambda 函数中时，它可以正常工作。当我在表达式中使用捕获的变量时，它会返回以下错误：

> 不存在从对象类型 ReportBuilder.Reporter+<>c__DisplayClass0 到已知托管提供程序本机类型的映射。

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T02:04:24.637

从技术上讲，解决这个问题的正确方法是让框架接受来自 lambda 的表达式树来评估`i`引用；换句话说，它是某些特定框架的 LINQ 框架限制。它目前正在尝试做的是将`i`数据库解释为对它已知的某种类型（提供者）的成员访问。由于 lambda 变量捕获的工作方式，`i`局部变量实际上是隐藏类上的一个字段，即提供者无法识别的具有有趣名称的字段。

所以，这是一个框架问题。

如果你真的必须通过，你可以手动构造表达式，如下所示：

```
ParameterExpression x = Expression.Parameter(typeof(RptCriteriaHint), "x");
var query = repo.Find(
    Expression.Lambda<Func<RptCriteriaHint,bool>>(
        Expression.Equal(
            Expression.MakeMemberAccess(
                x,
                typeof(RptCriteriaHint).GetProperty("CriteriaTypeID")),
            Expression.Constant(i)),
        x)).ToList(); 
```

...但这只是受虐狂。

您对此条目的评论促使我进一步解释。

Lambda 可以转换为以下两种类型之一：具有正确签名的委托或具有正确签名的委托`Expression<TDelegate>`。LINQ 到外部数据库（与任何类型的内存查询相反）使用第二种转换工作。

编译器将 lambda 表达式转换为表达式树，粗略地说，通过：

1.  语法树由编译器解析 - 所有代码都会发生这种情况。
2.  语法树在考虑变量捕获后被重写。捕获变量就像在普通委托或 lambda 中一样 - 因此会创建显示类，并将捕获的本地变量移入其中（这与 C# 2.0 匿名委托中的变量捕获行为相同）。
3.  新的语法树被转换为对类的一系列调用，`Expression`以便在运行时创建一个对象树，它忠实地表示已解析的文本。

LINQ to external data sources 应该获取这个表达式树并解释它的语义内容，并将树内的符号表达式解释为引用特定于其上下文的事物（例如数据库中的列），或者要转换的立即值。通常，System.Reflection 用于查找特定于框架的属性来指导这种转换。

但是，看起来 SubSonic 没有正确处理无法找到特定领域对应关系的符号引用；而不是评估符号引用，它只是下注。因此，这是一个亚音速问题。

# php - 如何从 url PHP 加载任意数据？

> ID：339370
> 
> 赞同：0
> 
> 时间：2008-12-04T01:40:49.753
> 
> 标签：php, url, scripting, load

这个问题很简单。我将在 PHP 脚本中使用什么函数将数据从 URL 加载到字符串中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T01:47:38.663

我想你正在寻找

```
$url_data = file_get_contents("http://example.com/examplefile.txt"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T15:10:41.743

CURL 通常是一个很好的解决方案：[http ://www.php.net/curl](http://www.php.net/curl)

```
 // create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// grab URL and pass it to the browser
$html = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T01:46:57.387

使用文件包装器，您可以使用 file_get_contents 访问 http 资源（几乎只是 GET 请求，没有 POST）。对于更复杂的 http 请求，如果您安装了 curl 包装器，则可以使用它们。检查 php.net 了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T21:04:23.837

查看[Snoopy](http://sourceforge.net/projects/snoopy/)，这是一个模拟 Web 浏览器的 PHP 类：

```
include "Snoopy.class.php";
$snoopy = new Snoopy;
$snoopy->fetchtext("http://www.example.com");
$html = $snoopy->results; 
```

# php - PHP mySQL - 你能返回一个带有数字索引的关联数组吗？

> ID：339371
> 
> 赞同：2
> 
> 时间：2008-12-04T01:40:56.040
> 
> 标签：php, mysql

我的数据库类中有这个方法

```
public function query($queryString)
    {

      if (!$this->_connected) $this->_connectToDb(); //connect to database

      $results = mysql_query($queryString, $this->_dbLink) or trigger_error(mysql_error());

      return mysql_num_rows($results) > 0 ? mysql_fetch_assoc($results) : false;            

    } 
```

这对于返回 1 行的查询非常有用，但是我怎样才能让数组返回这样的东西呢？

```
$array[0]['name'] = 'jim'
$array[0]['id'] =  120
$array[1]['name'] = 'judith' 
$array[1]['ID'] = 121 
```

现在我知道我可以使用 while 循环将这些数据插入到数组中，但是我想知道 PHP 是否可以使用内部函数来做到这一点？我无法在文档上找到我想要的东西。

我不想在方法中运行 while 的原因是因为我将在返回数组时重复返回数组，并且我宁愿不运行两次结果（出于性能原因）。

有没有办法做到这一点？我的一般查询方法设计有问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T01:48:01.457

```
public function query($queryString)
    {

        if (!$this->_connected) $this->_connectToDb(); //connect to database

        $results = mysql_query($queryString, $this->_dbLink) or trigger_error(mysql_error());

        $data = array();
        while($row = mysql_fetch_assoc($results))
         {
               $data[] = $row;
         }
        return $data;

    } 
```

这将始终返回一个数组。

编辑：我没有很好地阅读这个问题。如果您真的不想使用循环，那么我会这样做：

```
public function query($queryString)
    {

        if (!$this->_connected) $this->_connectToDb(); //connect to database

        return mysql_query($queryString, $this->_dbLink) or trigger_error(mysql_error());

    } 
```

然后循环它，但是我只会使用循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-10T09:17:22.217

您可能还想查看[PDO](http://www.php.net/manual/en/book.pdo.php)扩展。您可以将整个结果集加载到数组中，也可以使用 foreach 循环。

```
<?php
$db = new PDO($connection_string, $username, $password);
$result = $db->query($queryString);
foreach($result as $row) {
    // do something
}

// or

$result = $db->query($queryString);
$result_array = $result->fetchAll(PDO::FETCH_ASSOC);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T01:50:22.420

大多数人在查询中使用`while()`循环来完全执行您想要的操作，然后循环遍历数组来处理它。

但是，您是对的：它会浪费内存，这可能是大型数据集的问题。另一种方法是让您的查询方法返回结果集资源。然后你的 while 循环可以使用它来获取它需要的每一行。

为了把它抽象出来，我建议另一个类为你做这件事。然后，您的查询调用将返回该类的新实例，该类将 MySQL 结果集资源作为实例变量并将调用打包`mysql_fetch_assoc()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T02:25:47.853

查看[PEAR::MDB2](http://pear.php.net/package/MDB2)（[快速入门备忘单](http://codeschmie.de/archives/127-MDB2-Cheatsheet.html)）。它提供了许多不同的功能来做这样的事情。它也不会束缚您使用 MySQL 特定的功能，因为它是一个数据库抽象层。

$result = $db->queryRow($query, MDB2_FETCHMODE_ASSOC);

还有其他抽象层，例如 ADO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-19T05:54:35.560

感谢您的想法。我有一个从 sql 中返回关联数组的函数（在 Moodle 中使用）。

$results = get_records_sql($sql);

```
//to create a numerically indexed array:
$data = array();
foreach ($results as $row)
     {
           $data[] = $row;
     }
return $data; 
```

}

# python - 在 Django 表单上引发 ValidationError 的问题

> ID：339387
> 
> 赞同：5
> 
> 时间：2008-12-04T01:51:26.410
> 
> 标签：python, django, django-forms, cleaned-data

我正在尝试验证数据库中不存在提交的 URL。

Form 类的相关部分如下所示：

```
from django.contrib.sites.models import Site
class SignUpForm(forms.Form):
    # ... Other fields ...
    url = forms.URLField(label='URL for new site, eg: example.com')

    def clean_url(self):
        url = self.cleaned_data['url']
        try:
            a = Site.objects.get(domain=url)

        except Site.DoesNotExist:
            return url

        else:
            raise forms.ValidationError("That URL is already in the database.  Please submit a unique URL.")

    def clean(self):
        # Other form cleaning stuff.  I don't *think* this is causing the grief 
```

问题是，无论我提交什么值，我都无法提高`ValidationError`. 如果我在方法中做这样的事情`clean_url()`：

```
if Site.objects.get(domain=url):
    raise forms.ValidationError("That URL is already in the database.  Please submit a unique URL.") 
```

然后我得到一个`DoesNotExist`错误，即使是数据库中已经存在的 URL。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T18:30:40.107

IRC 中的 django 频道救了我。问题是 URLField.clean() 做了两件我没想到的事情：

1.  如果不存在 URL 方案（例如，http://），则该方法将“http://”添加到 url
2.  该方法还附加一个斜杠。

结果被返回并存储在表单的cleaned_data 中。所以我正在检查期待和实际得到的`cleaned_data['url']`东西。可以说，将我的方法更改为以下工作：`example.com``http://example.com/``clean_url()`

```
def clean_url(self):
        url = self.cleaned_data['url']        
        bits = urlparse(url)
        dom = bits[1]
        try:
            site=Site.objects.get(domain__iexact=dom)
        except Site.DoesNotExist:
            return dom
        raise forms.ValidationError(u'That domain is already taken.  Please choose another') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T02:38:01.963

我这样做。它稍微简单一些。

```
try:
    a = Site.objects.get(domain=url)
    raise forms.ValidationError("That URL is already in the database.  Please submit a unique URL.")
except Site.DoesNotExist:
    pass
return url 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T10:31:07.063

我认为，您可以返回 '' 并填写 _errors。

```
msg = u"That URL is already in the database.  Please submit a unique URL."
self._errors["url"]=ErrorList([msg])
return '' 
```

或者

```
from django.contrib.sites.models import Site
class SignUpForm(forms.Form):
    # ... Other fields ...

url = forms.URLField(label='URL for new site, eg: example.com')

def clean_url(self):
    url = self.cleaned_data['url']
    try:
        a = Site.objects.get(domain=url)
        raise forms.ValidationError("That URL is already in the database.  Please submit a unique URL.")
    except Site.DoesNotExist:
        return url
    return ''

def clean(self):
    # Other form cleaning stuff.  I don't *think* this is causing the grief 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-15T15:20:10.850

好吧，我登录了，因为我通过 Google 发现了类似的问题，并想在 Carl Meyers 帖子中添加评论，指出根据 Django 文档，使用 self._errors 是完全有效的：

[http://docs.djangoproject.com/en/1.2/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other](http://docs.djangoproject.com/en/1.2/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)

# asp.net - ASP.NET 数据访问层。使用 sqlhelper.cs 不好吗？

> ID：339394
> 
> 赞同：3
> 
> 时间：2008-12-04T01:57:51.750
> 
> 标签：asp.net, linq-to-sql, entity-framework, data-access-layer

我即将开始一个新的.net web 项目。Previsouly 对于我的 n 层 Web 应用程序，我使用“Microsoft 数据访问应用程序块”(sqlhelper.cs) 进行数据访问，然后使用接口类与对象类进行交互。我知道这种技术有点过时了，并且希望随着时代的发展而使用更多的东西。

我研究了 LINQ to SQL 以进行数据访问，但由于缺乏多对多关系而受到限制。实体框架是一种完全不同的方法，似乎有太大的学习曲线。

使用 sqlhelper.cs 类来处理我的数据访问会有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T04:03:26.567

一点也不。它支持创建多层层，将我们的数据访问与我们的逻辑分开。我通常将业务和数据类放在单独的文件夹中，并将 SqlHelper 类与我的 Data DALC 类一起包含。

我期待着转向 LINQ 和泛型的使用。这是我的下一步，我认为 SqlHelper 的使用同时促进了良好的编码实践。

当我从巨大的企业库中“借用”它时，我第一次开始使用它。我还没有在工作场所掌握的实体框架也是如此。但一切都很好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-14T03:35:55.960

[您可以在http://followprogrammers.blogspot.com/](http://followprogrammers.blogspot.com/)上获得简单而良好的 sql 助手类示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-25T08:43:43.503

过去 8 个月我一直在使用 Linq，它适用于所有的小工作。强大的打字和拖放开发使它非常容易和超级快速。

在此之前，当 Linq 看起来不正确时，我仍然使用 SQLHelper。它消除了 ADO.NET 的所有工作。我认为使用它没有任何问题。

# .net - VB.NET 和使用“Dim”的类型推断

> ID：339397
> 
> 赞同：2
> 
> 时间：2008-12-04T01:59:08.547
> 
> 标签：.net, vb.net

我来自 C# 背景，我非常喜欢 C# 3.0 的类型推断。我正在尝试在 VB.NET 中做类似的事情（其中一些似乎是可能的），但在某些情况下，编译器似乎不太擅长推断类型。

例如，我有一个返回 System.Guid 类型对象的方法。在 C# 中，我会这样做，并且变量“prop”将通过推理为 Guid 类型。

```
var prop = RegisterProperty<Guid>(...); 
```

但是，如果我在 VB.NET 中做类似的事情：

```
Dim prop = RegisterProperty(Of Guid(...) 
```

我得到了作为 System.Object 类型的*道具。*我已经使用了一些 VB.NET 项目设置，但它唯一改变的是当我稍后将其用作 Guid 时，是否会收到一个警告，指出该对象是 Object 类型。

有任何想法吗？我认为使用泛型应该允许编译器毫无疑问地告诉*prop*应该是什么类型。

* * *

@J Cooper：好的，我确实打开了该设置，但我只是重新阅读了该编译器选项的文档，它显示“指定是否允许在变量声明中进行局部类型推断”。我相信它对我不起作用的原因是我在课堂上声明了静态字段。我猜即使它们在声明时被初始化，编译器此时也不支持类型推断。真可惜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T02:03:05.217

我假设“使用 VB.NET 项目设置”你的意思是你已经这样做了：[Type Inference in VB.NET](http://www.emadibrahim.com/2007/07/28/type-inference-in-vbnet-90/)

如果没有，可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T03:51:50.973

您在下面提到您正在尝试在静态变量声明中执行此操作。这在 C# 中不起作用，并且会在 VB.NET 中为您提供对象（例如和静态）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-31T15:41:35.703

如果 VB 将类型推断为 Object，则至少需要在类文件的顶部打开 Option Strict On。一旦你这样做了，你应该会看到类字段不支持类型推断。以下引发编译器错误“Option Strict On 要求所有变量声明都具有 As 子句”。

```
Public Shared foo = "Test" 
```

通常，您应该在方法内部使用 Dim，在类/模块级别字段上使用 Public/Private/Friend。

# php - Code Igniter 中的缓存

> ID：339404
> 
> 赞同：0
> 
> 时间：2008-12-04T02:05:13.560
> 
> 标签：php, codeigniter, caching

我已经阅读了 CI Caching 的文档，但仍然不太了解它。它到底是做什么的，缓存动态网站有什么用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-04T02:23:02.883

来自[维基百科](http://en.wikipedia.org/wiki/Cache)：

> ...缓存是复制存储在其他地方或之前计算的原始值的数据集合，与读取缓存的成本相比，原始数据的获取或计算成本很高。

缓存允许您将相对昂贵的操作（例如复杂/多个查询）换成成本较低的操作（从内存中读取文件）。在动态网站中，缓存通常仅用于此目的（数据库 IO 到文件 IO）。

当经常读取特定数据但很少更新时，缓存很有用，并且可以在许多请求之间共享。博客文章就是一个很好的例子（创建一次，编辑多次，阅读多次）。

# java - 我如何确保使用 Hibernate 更新的值在我阅读它的同时没有被更改？

> ID：339409
> 
> 赞同：1
> 
> 时间：2008-12-04T02:08:57.763
> 
> 标签：java, sql, multithreading, hibernate, transactions

我有一个问题，我想使用 Hibernate 从数据库中读取一个对象，更改一个值，然后保存该对象。如果更改值需要一些时间，那么确保数据库中的基础对象没有更改的最佳方法是什么？我在一个事务（和一个会话）中执行此操作。

代码看起来像：

```
// Load from DB

Criteria crit = session.createCriteria( Dummy.class ).add( Restrictions.eq("id", 5) );

Dummy val = crit.uniqueResult();

// Processing time elapses.

// Update value of dummy.

val.x++;

// Save back to database. But what if someone modified the row with ID  = 5 in the meantime, and changed the value of x?

session.saveOrUpdate( val ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T04:28:40.867

我建议改为乐观锁定。您将“版本”属性添加到您的对象，然后休眠在最后执行更新操作并验证版本在您读取对象后没有更改。通常比悲观锁定更好的设计（没有什么比找到那些数据库死锁！）。

当然，问题仍然存在，如果对象发生了变化，你打算怎么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T02:31:29.823

您可以使用悲观锁虽然我不会这样做，但它可能对您的情况有用。

由于您的对象是从数据库中检索的，因此您必须锁定数据库，以便在您使用它时没有其他人修改您的对象。

为此，您应该**[锁定](http://www.hibernate.org/hib_docs/v3/api/org/hibernate/Session.html#lock(java.lang.Object,%20org.hibernate.LockMode))**您的对象。

```
session.lock( myObject , LockMode.UPGRADE ); 
```

试试看。

**编辑**

这可能是更多的你：

```
// Load from DB

Criteria crit = session.createCriteria( Dummy.class ).add( Restrictions.eq("id", 5) );

crit.setLockMode( LockMode.UPGRADE  ); // issues a SELECT ... for UPDATE... 

Dummy val = crit.uniqueResult();

 etc.etc 
```

[Criteria.setLockMode()](http://www.hibernate.org/hib_docs/v3/api/org/hibernate/Criteria.html#setLockMode(org.hibernate.LockMode))

# stored-procedures - 存储过程 - 通用或特定

> ID：339412
> 
> 赞同：3
> 
> 时间：2008-12-04T02:10:06.187
> 
> 标签：stored-procedures

在以下两种方法之间使用存储过程的首选方法是什么以及为什么：

一种通用 SP，例如“GetOrders”，它返回表 Order 的所有列。应用程序的几个不同部分将使用相同的 SP。

或者

一些更具体的 SP，例如“GetOrdersForUse1”和“GetOrdersForUse2”，它们返回所有列的子集。每个 SP 仅由应用程序的一部分使用。

在一般情况下，应用程序将仅使用 SP 返回的列的子集。出于性能原因，我正在考虑使用特定方法，但这真的值得额外的工作吗？我正在使用 ASP.NET 和 SQL 2005 开发一个网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T02:19:25.293

像所有伟大的事情一样，它取决于。您的变体中的逻辑有多么不同。例如，如果唯一的区别是返回列，那么您所节省的只是网络上的一些带宽和一些内存，这两者都便宜得多，然后创建变体测试和维护它们所花费的时间。

现在，如果有非常显着的不同选择逻辑（加入不同的表等），那么最好有专门的 SP。

最后一件事不要过早地优化。首先构建它简单且有效，然后当您发现需要额外的毫秒时，您可以查看调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T02:20:58.020

我会选择您的第二个选项，因为您**不**应该从数据库中提取不需要的数据（行或列） - 它会给 DBMS 带来不必要的压力，并通过网络传输无用的数据，浪费网络带宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T02:50:51.143

将它们视为函数，如果您要编写单独的函数，则可能使用单独的存储过程。如果仍有任何疑问，请使用单独的存储过程，因为：

*   它将节省带宽
*   它将节省内存

我发现单独的存储过程比一个巨大的存储过程更容易维护。

# .net - 解决 WCF AddressFilter 不匹配中的配置错误

> ID：339421
> 
> 赞同：18
> 
> 时间：2008-12-04T02:16:23.490
> 
> 标签：.net, xml, wcf

我收到以下错误，可以使用一些帮助来解决它。有人有想法么？

由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To ' [http://localhost:60078/BidService.svc/Query '的消息。](http://localhost:60078/BidService.svc/Query)检查发送方和接收方的 EndpointAddresses 是否一致。

客户端配置文件为：

```
<system.serviceModel>
    <bindings>
        <customBinding>
            <binding name="WebHttpBinding_IBidService">
                <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                    messageVersion="None" writeEncoding="utf-8">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" 
                                  maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                </textMessageEncoding>
                    <httpTransport manualAddressing="True" />
            </binding>
        </customBinding>
    </bindings>
    <client>
        <endpoint binding="customBinding" bindingConfiguration="WebHttpBinding_IBidService" 
                  behaviorConfiguration="IBidServiceBehavior"
            contract="myService.IBidService" name="WebHttpBinding_IBidService" />
    </client>
        <behaviors>
            <endpointBehaviors>
                <behavior name="IBidServiceBehavior">
                    <webHttp/>
                </behavior>
            </endpointBehaviors>
        </behaviors>
</system.serviceModel> 
```

我的服务合同是：

```
[ServiceContract(Namespace = "http://xxxx.com/services/bids")]
public interface IBidService
{
    [OperationContract(Action = "*")]
    [WebGet(RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Wrapped)]
    List<BidSummary> Query();
} 
```

我的服务配置如下：

```
<service name="xxx.Web.Services.Bids.BidService" 
          behaviorConfiguration="Cutter.Web.Services.Bids.BidServiceBehavior">
   <endpoint address="" binding="basicHttpBinding" 
             contract="xxx.Web.Services.Bids.IBidService" />                
   <endpoint address="mex" binding="mexHttpBinding" 
             contract="IMetadataExchange" />
</service>

<behavior name="Cutter.Web.Services.Bids.BidServiceBehavior">
   <serviceMetadata httpGetEnabled="true"  />
   <serviceDebug includeExceptionDetailInFaults="true" />
</behavior> 
```

我读到的一件事是您需要拥有我添加的 webHttp 行为。任何帮助，将不胜感激。我只想要一个简单的 POX 服务

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-04T02:54:40.993

我认为您还需要将 webHttp 行为添加到服务配置中。

# templates - 有没有关于在 grails 应用程序中使用 sitemesh 的好教程？

> ID：339424
> 
> 赞同：40
> 
> 时间：2008-12-04T02:19:17.947
> 
> 标签：templates, grails, groovy, gsp, sitemesh

我是一位经验丰富的 Grails 开发人员，但我的大部分经验是使用 grails 将 JSON/XML 提供给 flex 应用程序和一些相对简单的 HTML 网站。

我一直在深入研究在 grails 中使用 sitemesh 集成，我正在努力寻找一些更复杂配置的最佳实践，我很好奇是否有任何好的教程或示例。最初的[Sitemesh](http://www.opensymphony.com/sitemesh/)网站并没有那么有用，因为它所谈论的标签并未直接暴露在 grails 中。

谷歌搜索主要显示旧的邮件列表帖子和一些香草站点网格的东西，这有助于我走得更远，但它需要大量的试验和错误。

我完全理解基本的 g:layoutTitle、g:layoutHead 和 g:layoutBody 标签的工作原理。这些很容易并且有据可查。

我希望看到的示例如下：

*   g:applyLayout -这方面[的文档](http://grails.org/doc/1.0.x/ref/Tags/applyLayout.html)很薄弱，我不完全理解主要文档中建议的用途。这与设置`meta name='layout' content='foo'`属性有何不同？

*   g:pageProperty - 一些关于如何通过将值设置为正在修饰的页面中的元标记来将属性拉入和使用到主模板中的更好示例。[pageProperty 上](http://grails.org/doc/1.0.x/ref/Tags/pageProperty.html)的grails 文档仅显示来自正文的 onload 属性。我认为您也可以在这里使用元标记值，还有什么？

*   你可以使用多层次的站点网格布局吗？我的测试似乎让我认为我做不到，但这似乎降低了可重用性。我认为这里的答案是 g:applyLayout 的一些用法，但这是我最挣扎的地方。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-28T15:06:17.370

g:pageProperty 是一个非常强大但文档记录非常差的东西。假设在我的布局中，我指定了放置一些内容的位置，如下所示：

```
<html>
<body>
<g:pageProperty name="page.header" />
</body> 
```

现在在我的页面中，我可以指定一些内容：

```
<content tag="header">
<!-- header -->
</content> 
```

Sitemesh 将获取内容标签，无论页面 HTML 中的实际位置如何，并将其放置在布局流程中需要进入的位置。

更好的是，如果在我的页面中渲染一个模板，该模板还指定了一个带有“header”标签的内容区域，它将覆盖第一个声明，它将是模板的内容，将在最终布局中呈现。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-05T06:10:43.890

好吧，我可以稍微回答一下：

您的第一个和第三个问题是相关的，因为您不能使用元标记链接布局。

你的最终页面应该有你建议的元标记，但是如果你想在另一个布局之上分层布局，你把 ag:applyLayout 标记放在子布局的顶部，指向父布局。

在您的 edit.gsp 中，您将拥有：

```
<meta name="layout" content="editTemplate" /> 
```

在 editTemplate.gsp 中，您将拥有：

```
<g:applyLayout name="baseTemplate" >
<!-- the html for the editTemplate -->
</g:applyLayout> 
```

所以 edit.gsp 将使用 editTemplate.gsp，它将使用 baseTemplate.gsp 作为基本布局。您可以根据需要链接它们。

我根本没有使用过 g:pageProperty，所​​以我不能在那里给你提供更好的例子，抱歉。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-02-28T17:44:43.493

Sitemesh 与 Grails 一起是一个非常非常强大的功能。我用得越多——我就越喜欢它。您可以装饰我们网站的任何部分：您可以对错误消息、工具提示、新闻行、评论等进行布局。请注意，您甚至可以在您的页面中进行这些操作，并且可以进行多层次的装饰（没有<内容> 需要）：

/view/layout/inline-error-message.gsp

```
<span class="errorMessageInSomeFancyBox">
    <span class="errorIcon"></span>
    <g:layoutBody />
<span> 
```

/views/book/create.gsp

```
<%-- let's decorate our error message with some fancy box --%>
<g:applyLayout name="inline-error-message">${some.error.message}</g:applyLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T14:24:57.997

请参阅我们的[Rabbtor 展示应用程序](https://github.com/Rabbytes/rabbtor-examples)，了解一些非常好的示例

*   创建嵌套布局
*   渲染模板
*   将布局应用于页面的特定部分

. 这个应用程序实际上是我们工具 Rabbtor 的展示，它可以在 Grails 之外使用 GSP，但与 Sitmesh 相关的部分也适用于 Grails。

# ssh - 使用屏幕的多选项卡式 SSH 客户端

> ID：339429
> 
> 赞同：4
> 
> 时间：2008-12-04T02:21:51.107
> 
> 标签：ssh, gnu-screen

是否有 SSH 客户端可以向[屏幕](http://www.cyberciti.biz/tips/how-to-use-screen-command-under-linux.html)* 程序提供客户端 GUI 界面？

我正在考虑一个 SSH 程序，它将与屏幕的会话处理挂钩并将客户端操作（单击选项卡、ctrl-tab、滚动，甚至可能允许同时看到多个选项卡）映射到任何需要让另一端的屏幕做到这一点。

`*`在单个终端会话下允许多个虚拟控制台的[屏幕](http://www.cyberciti.biz/tips/how-to-use-screen-command-under-linux.html)程序，例如，您可以在单个 SSH 连接下运行多个应用程序并在它们之间切换以及其他很酷的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:25:45.993

一个有趣的想法，而且很有可能（vim7 的选项卡在 gnome-terminal 中显示为可点击的 GUI 选项卡），但我没有看到这样做的好处..

使用以下`~/.screenrc`显示“图形”选项卡：

```
startup_message off
vbell off
hardstatus alwayslastline
hardstatus string '%{gk}[ %{G}%H %{g}][%= %{wk}%?%-Lw%?%{=b kR}(%{W}%n*%f %t%?(%u)%?%{=b kR})%{= kw}%?%+Lw%?%?%= %{g}]%{=y C}[%d/%m %c]%{W}' 
```

.. 如下所示（使用以下命令重命名选项卡后`ctrl+a,a`：

[x http://img216.imageshack.us/img216/9401/picture4myi.png](http://img216.imageshack.us/img216/9401/picture4myi.png)

您可以使用“复制模式”在屏幕会话中滚动，方法是`ctrl+a,[`使用光标键（按`Esc`或`ctrl+c`退出）

`screen -x`您还可以使用标志（而不是）多次附加到同一屏幕会话`-r`，因此您可以使用任何选项卡式终端模拟器，并为每个屏幕窗口打开一个选项卡。

如果你真的想开始实现这个 - 一个选择是研究修改 gnome-terminal，用 vim 的选项卡复制行为。或者，编写你自己的屏幕客户端——你不需要做任何听起来像刮终端那样脆弱的事情——（通常）有一个 FIFO 文件`/tmp/uscreens/S-$USER/$PID.sessionname`，我认为这是 screen 的通信方式，记住 screen 是[开源的](http://directory.fsf.org/project/screen/)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T03:24:05.863

有趣的想法。我每天在本地机器和 SSH 会话上都使用 screen 。我认为您最大的问题是我怀疑大多数屏幕用户都是像我这样的命令行迷，他们不会看到为标签制作 gui 的好处。事实上，我的所有终端都在一个 gnome-terminal 窗口中的不同选项卡下，拥有 screen 的基于文本的选项卡是一种避免混淆两者的好方法。

我怀疑它可以完成，但是您将编写一个专门的终端仿真器来分析屏幕的输出（自定义 .screenrc）并改造 gui。

为了最小的收益而做很多工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T15:32:39.377

ctrl+shift+'

.. gui前端到屏幕？你在说什么？？

另外，因为我的代表太低了，我不能发表评论，我喜欢 LOL @ geoffc 对他在问题中的评论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T03:09:55.863

我从未见过，但以下内容可能会对您有所帮助。添加到您的 .screenrc

要在底部标题上显示一行“标签”，总是“%{.bW}%-Lw%{.rW}%n %t%{-}%+Lw %=%{..G} %{.. Y} %m/%d"

将当前程序显示为屏幕名称[假设您使用的是 bash 并且您的提示默认以“$”结尾；其他的壳是完全相同的想法]

shelltitle "$ |sh"

# html - HTML 背景图片

> ID：339455
> 
> 赞同：2
> 
> 时间：2008-12-04T02:34:08.853
> 
> 标签：html, css, image

当我在 DOM 元素上包含一个图像作为 <img> 标记以及背景图像时，浏览器有时会针对同一个图像发出两个请求。使用 hover 伪属性时有时也会发生这种情况。例如：

```
<html>
<head>
<style>
    div{
        background: transparent url(/img/stuff.png) no-repeat;
    }
    div:hover{
        background: transparent url(/img/stuff.png) no-repeat 25px 0px;
    }
</style>
</head>
<body>
    <img alt="" src="/img/stuff.png"/>
    <div>
    </div>
</body>
</html> 
```

为什么图像会被请求两次（或可能三次）？这是我可以避免的行为吗？如果有怎么办？

[编辑]

我在观看 Google appengine 本地服务器进程时注意到了这一点，所以我相当肯定它实际上并没有被浏览器缓存（如果我在 firebug 或 webkit 检查器中看到它可能是这样）。

我在 Google Chrome、IE7 和 Firefox 3 中看到了这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T02:38:17.737

这是IE6的一个已知问题，是您遇到问题的浏览器吗？

这里列出了几个原因和修复：

[http://www.fivesevensix.com/studies/ie6flicker/](http://www.fivesevensix.com/studies/ie6flicker/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-10T10:33:34.250

我在自己的使用大量图像的大型 Web 应用程序中看到了类似的行为。即使使用 JavaScript 预加载，有时也会请求第二次图像（尽管我没有仔细观察是否有任何请求超过两次。

我的结论是，浏览器的缓存可能已满，熵可能已经启动，删除了旧项目或当前未使用的项目。尝试增加浏览器的最大缓存大小并查看行为是否继续。此外，在 Firefox 中，您可以签出[about:cache](http://about:cache)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T02:36:40.983

对我来说，这似乎是一个浏览器缓存问题。

您可以尝试像这样预加载它：

```
<img alt="" src="/img/stuff.png" style="display: none;"/> 
```

但我不确定这是否可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T02:44:55.273

答案取决于您如何发现请求多次的图像。您是否在查看网络服务器日志或在客户端使用 Firebug 之类的东西？尝试在您的问题中发布更多详细信息。

无论如何，似乎浏览器应该从缓存中获取图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-10T10:22:04.953

我有同样的行为。图像请求了两次，它有两个来自服务器的请求，一个来自 css 文件作为请求引用者，另一个来自 aspx 或 htm 文件作为请求引用者。我用 firebug 1.5 和其他 HTTPparser 程序试过这个。

# svn - 如何找到我正在使用的 SVN 流量？

> ID：339462
> 
> 赞同：1
> 
> 时间：2008-12-04T02:37:54.163
> 
> 标签：svn, networking, monitoring, traffic

在我的办公室，我们设置了一个 SVN 服务器，我想知道它使用了多少流量。我对带宽不感兴趣，只对 SVN 服务发送/接收的 1 和 0 的总数感兴趣。

数据将全部通过`svn://`协议传输，服务器运行 XP pro。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T03:12:43.487

开始 | 我的电脑——右键管理

计算机管理 - 性能日志和警报。

添加一个新的日志，设置为每天监控一次SVN进程。选择“I/O Other Bytes/sec”作为要记录的计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T02:42:00.553

不能只使用任务管理器监控SVN服务器进程，并添加“I/O Other Bytes”列吗？

否则，[Sysinternal 的 Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)肯定可以做到这一点。

# ms-access - MS Access - 群发电子邮件？

> ID：339469
> 
> 赞同：3
> 
> 时间：2008-12-04T02:41:56.637
> 
> 标签：ms-access

我正在使用 MS Access 创建一个包含 5000 多个联系人的数据库。这些联系人被分成联系人所属的员工，然后再分成类别以便于搜索。我想要做的是创建一个按钮，它将以表格形式（简单）打开查询，然后有复选框，以便员工可以选择，例如，100 个联系人从表格中的 110 个联系人中发送电子邮件，然后发送大量电子邮件，例如时事通讯（不是那么简单！）。我一直在努力解决如何做到这一点，因为我不太了解编程（我是一个临时工，只是尽我所能），我能找到的只是一些东西关于循环（不知道！），我需要软件来做到这一点。

请问有什么解决方案吗？如果可能，我想避免购买/安装软件，如果您有答案，请尽可能简单...

提前致谢！

凯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T09:23:45.453

我刚刚在 MS Access 97 中创建了以下**工作示例。**

一个示例表（我用有效的电子邮件地址测试了代码）：

ID 姓名 电子邮件

1 Rics rics@stack.com

2 凯特 kate@stack.com

3 X x@stack.com

带有一个按钮的表单。单击按钮时正在执行以下代码：

```
Private Sub Mail_Click()

    Dim r As Recordset
    Dim email As String
    Set r = CurrentDb.OpenRecordset("select * from Addresses")
    Do While Not r.EOF
        email = r(2)
        DoCmd.SendObject acSendNoObject, Null, Null, email, Null, Null, "Test subject", "Message body of the test letter", False, Null
        r.MoveNext
    Loop
    r.Close

End Sub 
```

我希望你可以将它插入到你的应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-05T03:35:59.973

得到它的工作:)

代码很棒，但需要一些调整才能专门处理我的数据。在出现了很多错误之后，我终于想到了：

```
 Dim r As Recordset
Dim Email As String
Set r = CurrentDb.OpenRecordset("select Email from FranksFinanceBrokers")
Do While Not r.EOF
    Email = Email & r(0) & ";"
    r.MoveNext
Loop
r.Close

DoCmd.SendObject acSendNoObject, Null, Null, "", "", Email, "", "", True, Null

End Sub 
```

感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T15:00:08.177

rics 提供的答案将向记录集中的每个人发送一封电子邮件，但听起来您可能想要做的是向自定义分发列表发送一封电子邮件。为此，请调整 rics 的代码以构建地址字符串，如下所示：

私人子邮件_Click()

```
Dim r As Recordset
Dim email As String
Set r = CurrentDb.OpenRecordset("select * from Addresses")
Do While Not r.EOF
    email = email & r(2) & ";"
    r.MoveNext
Loop
r.Close

DoCmd.SendObject acSendNoObject, Null, Null, email, Null, Null, "Test subject", "Message body of the test letter", False, Null 
```

结束子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T21:35:08.143

Kate,

Sorry to say that there is no specific "magic" code for what you plan to to. You will have to write something. My solution would be:

1.  Create a form with 3 controls: 1 text control, 1 listbox control.,1 "send" button
2.  The text control contains the text to send
3.  The list control displays all my available emails (populated with a recordset)
4.  Multiselect will be enabled, so that I can select multiple items in the list
5.  By a click on the button, I will

    Concatenate all selected emails to get a "sendTo" string such as sendTo = "bla@bla.com;blo@blo.com". Call the doCmd.sendObject method using sendTo + the text string as an argument

Options could be to

*   Have an extra control for email subject
*   Keep a trace of sent mails in a table (subject, text, date, people reached). It could be as basic as "one record per mail" with a memo field to record the sendTo text string (Of course you could build something smarter with multiple tables to stick to the many-to-many relation that can be established between your people table and your mail table, but you might not need it)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-05T14:26:12.780

There are a couple of ways to get around the missing e-mail addresses. The easiest is to adjust your SQL to exclude them:

select Email from FranksFinanceBrokers WHERE (Email IS NOT NULL) AND (Email <> "")

The other approach would be to add an IF statement to the string building code:

IF Not IsNull(r(0)) AND r(0) <> "" THEN Email = Email & r(0) & ";"

I would just filter it at the SQL level -- more efficient and just easier.

Would it be easier to buy software to do this? Yes, but where's the challenge in that? :-) You are already most of the way there, so I'd stick with it.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-05T03:41:46.453

Emailing from Access has a number of pitfalls, not least of which is that doing so can make you look like a spammer and cause problems with your email host. Plus, there are a bunch of security issues. The best source for information on this is [Tony Toews's Email FAQ](http://www.granite.ab.ca/access/email.htm).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-04T03:11:34.330

我认为您需要学习一些 VBA 编码才能完成这项工作。本[教程](http://www.functionx.com/vbaccess/)可能有用。

这是一种[从 access 发送电子邮件](http://www.febooti.com/products/command-line-email/online-help/send-email-ms-access.html)的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-04T03:16:59.670

[这是通过 MS Access 发送电子邮件](http://www.granite.ab.ca/access/email.htm)的另一个资源

# performance - 何时/如何优化通用代码？

> ID：339472
> 
> 赞同：4
> 
> 时间：2008-12-04T02:42:28.773
> 
> 标签：performance, optimization

在编写应用程序代码时，人们普遍认为过早的**微**优化是邪恶的，首先进行概要分析是必不可少的，并且对于要预先进行多少更高级别的优化（如果有的话）存在一些争论。但是，我还没有看到任何关于何时/如何优化将成为库或框架的一部分的通用代码的指南，在这些代码中，您永远不知道将来如何使用您的代码。对此有哪些指导方针？过早的微优化仍然是邪恶的吗？性能应如何与其他设计目标（例如易用性、易于证明正确性、易于实施和灵活性）平衡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T02:47:45.593

我想说，优化必须让位于其他设计目标，例如易用性、易于证明正确性、易于实施和灵活性。

尝试使用良好实践智能地编写代码并避免明显的陷阱。不过，在您可以使用分析器和实际用例进行优化之前，请不要进行优化。

您仍然会遇到一些您从未想过的用例，但如果您从未想过它们，您将无法针对它们进行优化。

一个*设计良好*的框架通常也是一个性能*合理*的框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-04T02:49:18.900

“性能应该如何与其他设计目标相平衡……？”

1.  让它工作。

2.  优化它，直到它无法进一步优化。

注意顺序。避免*过早*优化意味着在它工作*后*对其进行优化。

优化仍然非常非常重要。过早的优化并不意味着没有优化。这意味着它工作后优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T04:15:29.473

我最近在一个播客上听到了关于著名的 knuth 引用的有趣且非常有启发性的讨论（认为它是油炸字节），我将尝试总结一下：

每个人都知道那句名言：*过早的优化是万恶之源。*.
然而，这只是其中的一半。完整的报价是：

[*我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源*](http://en.wikipedia.org/wiki/Optimization_(computer_science))。

仔细看看这个 -*说大约 97% 的时间*。
该陈述的另一面是*大约 3% 的时间，“小”效率至关重要*。

我的显示器显示大约 50 行代码。据统计，每个屏幕上至少有 1-2 行代码将包含一些性能敏感的东西！*当您认为在每个屏幕上*都可能存在性能问题时，遵循“现在做，以后再优化”的普遍智慧似乎并不是一个如此狡猾的计划。

恕我直言，您应该始终考虑性能。在通过分析/测试证明之前，您不应该为此付出大量努力或牺牲可维护性，但您绝对应该将它放在脑海中。

我个人会将此应用于这样的通用代码：
您肯定在某处有一些代码，当您编写它时，您认为“这会很慢”，或者“这是一个愚蠢的算法，但现在并不重要，所以我稍后会修复它。” 由于您在共享库中，并且您不能断言方法 A 只会被调用 5 个项目，因此您应该进去清理所有这些东西。

一旦你把这些事情整理好，我就不会再费心了。也许在你的单元测试中运行分析器以确保没有任何愚蠢的东西偷偷通过，否则等待你的库使用者的反馈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T07:07:08.193

我的经验法则是：

**不优化**

完整的规则实际上是：

**如果您没有指标，请不要优化**

这意味着，如果您没有测量性能并生成**具体的指标**，那么您不应该做任何事情来使代码性能更好。

毕竟：**没有指标，你怎么知道要优化什么？**

一旦您进行了一些分析，您实际上可能会对系统的性能瓶颈在哪里感到惊讶……根据我的经验，通常情况下，相对较小的更改可能会产生巨大的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T03:12:01.630

你是对的，你的时间在哪里最划算并不总是很清楚。你最好的选择是**成为你的框架的用户**以及它的设计者。

在不平凡的应用程序中使用您自己的框架，尝试使用所有功能。您使用它的次数越多，就会清楚哪些是您最需要优化的东西。

此外，尽可能频繁地从其他用户那里获得反馈和建议。您将不可避免地发现其他人想做您从未想过的与您的框架有关的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T03:32:36.097

我认为最好的方法是拥有一组非常好的用例来说明你的框架将如何被执行。只有这样，您才能清楚地了解性能是否足以满足其预期用途。

当然，你永远不会知道将来有人会如何使用你的框架（在我职业生涯的早期，用户使用我的软件的创造性方式总是让我感到惊讶——我会这样从未设想过！）但考虑过您认为它将如何使用它应该会让您大部分时间到达那里。

# asp.net - 如何从动态创建的用户控件中引发事件

> ID：339476
> 
> 赞同：1
> 
> 时间：2008-12-04T02:45:54.913
> 
> 标签：asp.net, events, user-controls

如何从动态创建的用户控件中引发事件？

这是我正在尝试的代码，其中 Bind 是一个公共 EventHandler

```
protected indDemographics IndDemographics;
protected UserControl uc;
override protected void OnInit(EventArgs e)
{
    uc = (UserControl)LoadControl("indDemographics.ascx");
    IndDemographics.Bind += new EventHandler(test_handler);
    base.OnInit(e);
} 
```

我得到一个 IndDemographics 的空对象。谁能指出我完整的代码示例？提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T03:20:05.157

首先，您需要确保在用户控件的代码中定义了事件。

例如：

```
public class MyUserControl
  Inherits UserControl

  Public Event Bind(sender as object, e as EventArgs)

  public sub SomeFunction()
     RaiseEvent Bind(me, new EventArgS())
  End Sub
End Class 
```

在此之后，您可以绑定到事件。现在，对于您的其他问题，您是动态加载此控件还是在您的 ASPX 端声明它？如果它在您的 ASPX 端，那么您不需要 LoadControl，因为在 ASPX 端将对象声明为**Runat=Server**会实例化所述类的实例。

如果没有，那么您需要确保使用虚拟路径作为 ASCX 文件的位置。（在您的示例中，如果 ASCX 位于网站的根目录，您将使用**“~/indDemographics.ascx” ）。**此时，您需要将其添加到页面（或占位符或其他容器对象）。

不管用哪种方式实例化 UserControl 的实例，然后将事件处理程序关联到类实例的事件。例如：

```
Dim btn As New Button;
AddHandler btn.Click, AddressOf MyButtonClickEventHandler 
```

现在，因为您在示例代码中获得了 NULL 引用。

当您使用 LoadControl 引用时，您的对象实例位于**UC**变量中。在示例中，您将两个对象声明为 UC 作为 UserControl 的类型，将 indDemographics 作为 indDemographics 的类型。

当您使用 LoadControl 时，您将实例化一个 indDemographics 实例并将其分配给 UC。当您尝试将事件处理程序分配给 IndDemographics 变量时，它实际上从未被实例化。

最终，您的代码应该看起来更像以下几行：

```
protected indDemographics IndDemographics;
override protected void OnInit(EventArgs e)
{
    indDemographics = LoadControl("~/indDemographics.ascx");
    IndDemographics.Bind += new EventHandler(test_handler);
    base.OnInit(e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T03:19:37.933

我看到它（IndDemographics）已声明但从未实际创建，因此我希望仅使用此代码它就为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-05T01:42:47.770

感谢斯蒂芬让我走上正轨。这是 C# 中的最终工作代码：

```
protected indDemographics IndDemo;
override protected void OnInit(EventArgs e)
{
    Control c = LoadControl("~/indDemographics.ascx");
    IndDemo = (indDemographics) c;
    IndDemo.Bind += new EventHandler(test_handler);
    place1.Controls.Add(IndDemo);
    base.OnInit(e);
} 
```

将通用控件转换为 indDemographics 类很重要。之后，其他一切正常。

# bash - 如何使用 bash/sed 脚本删除文本文件的第一行？

> ID：339483
> 
> 赞同：689
> 
> 时间：2008-12-04T02:50:16.447
> 
> 标签：bash, scripting, sed

我需要使用 bash 脚本从一个巨大的文本文件中反复删除第一行。

现在我正在使用`sed -i -e "1d" $FILE`- 但删除大约需要一分钟。

有没有更有效的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1243
> 
> 时间：2008-12-04T08:55:16.587

试试[尾巴](http://man7.org/linux/man-pages/man1/tail.1.html)：

```
tail -n +2 "$FILE" 
```

`-n x`: 只打印最后`x`几行。`tail -n 5`会给你输入的最后 5 行。`+`符号类型反转参数并`tail`打印除第一`x-1`行以外的任何内容。`tail -n +1`将打印整个文件，`tail -n +2`除第一行外的所有内容等。

GNU`tail`比`sed`. `tail`在 BSD 上也可以使用，并且`-n +2`标志在两个工具中是一致的。查看[FreeBSD](https://www.freebsd.org/cgi/man.cgi?query=tail)或[OS X](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/tail.1.html)手册页以获取更多信息。

不过，BSD 版本可能比`sed`. 我想知道他们是如何做到的；`tail`应该只逐行读取文件，同时`sed`执行非常复杂的操作，包括解释脚本、应用正则表达式等。

注意：您可能很想使用

```
# THIS WILL GIVE YOU AN EMPTY FILE!
tail -n +2 "$FILE" > "$FILE" 
```

但这会给你一个**空文件**。原因是重定向 ( `>`) 发生在`tail`shell 调用之前：

1.  Shell 截断文件`$FILE`
2.  壳牌创建了一个新进程`tail`
3.  Shell 将`tail`进程的标准输出重定向到`$FILE`
4.  `tail`从现在空的读取`$FILE`

如果要删除文件中的第一行，应使用：

```
tail -n +2 "$FILE" > "$FILE.tmp" && mv "$FILE.tmp" "$FILE" 
```

这`&&`将确保文件在出现问题时不会被覆盖。

* * *

## 回答 #2

> 赞同：264
> 
> 时间：2014-11-24T07:10:07.467

您可以使用 -i 来更新文件，而无需使用 '>' 运算符。以下命令将从文件中删除第一行并将其保存到文件中（在后台使用[临时文件）。](https://stackoverflow.com/a/12696224/32453)

```
sed -i '1d' filename 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2013-02-19T07:32:38.597

对于那些使用非 GNU 的 SunOS 的人，以下代码将有所帮助：

```
sed '1d' test.dat > tmp.dat 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-11-22T14:34:38.633

您可以通过以下方式轻松做到这一点：

```
cat filename | sed 1d > filename_without_first_line 
```

在命令行上；`-i`或者要永久删除文件的第一行，请使用带有标志的 sed 就地模式：

```
sed -i 1d <filename> 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2008-12-04T03:19:12.163

不，这与您将获得的效率差不多。您可以编写一个 C 程序，它可以更快地完成这项工作（更少的启动时间和处理参数），但随着文件变大，它可能会趋向与 sed 相同的速度（如果需要一分钟，我假设它们很大） ）。

但是您的问题与许多其他问题存在相同的问题，因为它预先假定了解决方案。如果您要详细告诉我们**您**要做什么而不是**如何**做，我们可能会提出更好的选择。

例如，如果这是其他程序 B 处理的文件 A，则一种解决方案是不删除第一行，而是修改程序 B 以不同方式处理它。

假设您的所有程序都附加到此文件 A 和程序 B 当前读取并处理第一行，然后再删除它。

您可以重新设计程序 B，以便它不会尝试删除第一行，而是在文件 A 中维护一个持久的（可能基于文件的）偏移量，以便下次运行时，它可以寻找该偏移量，处理那里的线，并更新偏移量。

然后，在安静的时间（午夜？），它可以对文件 A 进行特殊处理，以删除当前处理的所有行并将偏移量设置回 0。

程序打开和查找文件肯定比打开和重写更快。当然，此讨论假设您可以控制程序 B。我不知道是否是这种情况，但如果您提供更多信息，可能还有其他可能的解决方案。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-08-05T20:14:14.590

该[**`sponge`**实用](http://joeyh.name/code/moreutils/)程序避免了处理临时文件的需要：

```
tail -n +2 "$FILE" | sponge "$FILE" 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-05-15T18:57:22.533

如果你想修改文件，你总是可以使用原始文件`ed`而不是它**的 s**处理后继`sed`：

```
ed "$FILE" <<<$'1d\nwq\n' 
```

该`ed`命令是最初的 UNIX 文本编辑器，甚至还没有全屏终端，更不用说图形工作站了。编辑器，最广为人知的`ex`是您在冒号提示符下键入时使用的内容`vi`，它是 的*扩展*版本`ed`，因此许多相同的命令都可以工作。虽然`ed`旨在以交互方式使用，但它也可以通过向其发送一串命令以批处理模式使用，这就是此解决方案的作用。

该序列`<<<$'1d\nwq\n'`利用现代 shell 对 here-strings ( **)**`<<<`和 ANSI 引号 ( `$'`... ) 的支持，`'`将输入提供给`ed`由两行组成的命令：删除第**1**行，然后将文件**写**回输出到磁盘，然后**退出**编辑会话。`1d`****`wq`****

 ******* * *

## 回答 #8

> 赞同：10
> 
> 时间：2008-12-04T03:48:49.823

正如 Pax 所说，您可能不会比这更快。原因是几乎没有文件系统支持从文件开头截断，所以这将是一个 O( `n`) 操作，其中`n`文件的大小是多少。您可以更快地做*的*是用相同数量的字节（可能带有空格或注释）覆盖第一行，这可能对您有用，具体取决于您正在尝试做什么（顺便说一句？）。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-02-15T21:40:27.087

您**可以**就地编辑文件：只需使用 perl 的`-i`标志，如下所示：

```
perl -ni -e 'print unless $. == 1' filename.txt 
```

如您所问，这会使第一行消失。Perl 将需要读取和复制整个文件，但它会安排将输出保存在原始文件的名称下。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-09-29T07:42:01.580

应该显示除第一行以外的行：

```
cat textfile.txt | tail -n +2 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-10-17T14:29:25.173

可以使用 vim 来做到这一点：

```
vim -u NONE +'1d' +'wq!' /tmp/test.txt 
```

这应该更快，因为 vim 在处理时不会读取整个文件。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-03-04T16:08:02.983

使用 csplit 怎么样？

```
man csplit
csplit -k file 1 '{1}' 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-03-09T20:06:34.753

这一个班轮将做：

```
echo "$(tail -n +2 "$FILE")" > "$FILE" 
```

它可以工作，因为`tail`在之前执行`echo`然后文件被解锁，因此不需要临时文件。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-04T03:40:33.633

由于听起来我无法加快删除速度，我认为一个好的方法可能是像这样批量处理文件：

```
While file1 not empty
  file2 = head -n1000 file1
  process file2
  sed -i -e "1000d" file1
end 
```

这样做的缺点是，如果程序在中间被杀死（或者如果那里有一些错误的 sql - 导致“进程”部分死亡或锁定），则会有一些行被跳过或处理两次.

（file1 包含几行 sql 代码）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-11-14T01:42:44.770

如果您要做的是在失败后恢复，您可以构建一个包含您迄今为止所做的文件的文件。

```
if [[ -f $tmpf ]] ; then
    rm -f $tmpf
fi
cat $srcf |
    while read line ; do
        # process line
        echo "$line" >> $tmpf
    done 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-06T20:12:31.720

基于其他 3 个答案，我想出了在我的 Mac OSx bash shell 中完美运行的语法：

`line=$(head -n1 list.txt && echo "$(tail -n +2 list.txt)" > list.txt)`

测试用例：

```
~> printf "Line #%2d\n" {1..3} > list.txt
~> cat list.txt
Line # 1
Line # 2
Line # 3
~> line=$(head -n1 list.txt && echo "$(tail -n +2 list.txt)" > list.txt)
~> echo $line
Line # 1
~> cat list.txt
Line # 2
Line # 3 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-12-04T03:50:44.440

是否会在 N-1 行上使用 tail 并将其定向到文件中，然后删除旧文件，并将新文件重命名为旧名称来完成这项工作？

如果我以编程方式执行此操作，我将在读取每一行后通读文件并记住文件偏移量，因此我可以回到该位置以读取文件中少一行。

# apache-flex - 从 Flex 连接到 salesforce.com 的登录错误

> ID：339487
> 
> 赞同：1
> 
> 时间：2008-12-04T02:51:38.287
> 
> 标签：apache-flex, salesforce

是否有人突然遇到用户尝试使用 as3salesforce.swc 从 Flex 应用程序连接到 salesforce.com 的登录错误？

我收到以下错误...删除密码以保护无辜...

```
App Domain = null
Api Server name = na3.salesforce.com
_internalServerUrl = https://na3.salesforce.com/services/Soap/u/14.0
loading the policy file: https://na3.salesforce.com/services/Soap/cross-domain.xml
Your application must be running on a https server in order to use https to communicate with salesforce.com!
login with creds
loading the policy file: https://na3.salesforce.com/services/crossdomain.xml
Your application must be running on a https server in order to use https to communicate with salesforce.com!
invoke login
intServerUrl is null
intServerUrl = https://na3.salesforce.com/services/Soap/u/14.0
_invoke login
'5A5D3012-7717-E3C2-9B39-FFBBFF1F1B47' producer set destination to 'DefaultHTTPS'.
Method name is: login
'direct_http_channel' channel endpoint set to http://localhost/pm_server/pm/
'5A5D3012-7717-E3C2-9B39-FFBBFF1F1B47' producer sending message 'E32C7199-72C1-B258-B483-FFBC1641173D'
'direct_http_channel' channel sending message:
(mx.messaging.messages::HTTPRequestMessage)#0
  body = "<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/"><se:Header xmlns:sfns="urn:partner.soap.sforce.com"/><se:Body><login xmlns="urn:partner.soap.sforce.com" xmlns:ns1="sobject.partner.soap.sforce.com"><username>simon.palmer@dialectyx.com</username><password>******</password></login></se:Body></se:Envelope>"
  clientId = (null)
  contentType = "text/xml; charset=UTF-8"
  destination = "DefaultHTTPS"
  headers = (Object)#1
  httpHeaders = (Object)#2
    Accept = "text/xml"
    SOAPAction = """"
    X-Salesforce-No-500-SC = "true"
  messageId = "E32C7199-72C1-B258-B483-FFBC1641173D"
  method = "POST"
  recordHeaders = false
  timestamp = 0
  timeToLive = 0
  url = "https://na3.salesforce.com/services/Soap/u/14.0"
'5A5D3012-7717-E3C2-9B39-FFBBFF1F1B47' producer connected.
Method name is: login
Error: Ignoring policy file at https://na3.salesforce.com/crossdomain.xml due to meta-policy 'by-content-type'.

'5A5D3012-7717-E3C2-9B39-FFBBFF1F1B47' producer acknowledge of 'E32C7199-72C1-B258-B483-FFBC1641173D'.
responseType: Fault
Saleforce Soap Fault: sf:INVALID_LOGIN
INVALID_LOGIN: Invalid username, password, security token; or user locked out.
Comunication Error : sf:INVALID_LOGIN : INVALID_LOGIN: Invalid username, password, security token; or user locked out. : [object Object] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-06T21:15:52.687

显然没有其他人在 salesforce.com 之上构建 Flex 应用程序。

伊皮，我是第一个。

无论如何，我刚刚发现这是截至 2008 年 12 月 6 日在 salesforce.com 上的一个错误。问题是处理登录的脚本不能充分应对必要的重定向，因为 salesforce.com 服务器上的负载平衡。

应该可以通过 salesforce.com 的 api 的 www 前门使用 URL，例如...

```
"https://www.salesforce.com/services/Soap/u/13.0"; 
```

其中 13 代表您所针对的 API 版本。但是，所有用户实际上都分配到了特定的服务器，因此前门应该将登录请求重定向到适当的位置，如果您来自 Flex，则不会。

一种解决方法是在 URL 中指定您的服务器，例如...

```
"https://na5.salesforce.com/services/Soap/u/13.0"; 
```

...这就是我正在做的。如果您是单个用户不断访问相同的资源并且您的帐户仍然连接到该服务器，那很好。然而如果...

1.  您正在分发您的应用程序，因此任何拥有 salesforce.com 企业帐户的人都可以登录或
2.  由于某些内部负载平衡，您的帐户被移动（这就是发生在我身上的事情）

那么提供固定服务器的方法就行不通了。

该错误（据我所知）是 www 路由没有充分重定向到您的主机服务器。最后的情报是它将“很快”修复。

我希望我可以将此标记为答案...

# c# - 在 C# 中使用自定义分隔符和一些非常非常大的字段值解析文本的最快方法是什么？

> ID：339496
> 
> 赞同：3
> 
> 时间：2008-12-04T02:57:17.293
> 
> 标签：c#, parsing, bulk, csv

我一直在尝试处理一些具有非标准分隔符（不是逗号/引号或制表符分隔）的分隔文本文件。定界符是不经常出现在定界符之间的随机 ASCII 字符。在四处搜索之后，我似乎只发现 .NET 中没有任何解决方案可以满足我的需求，人们为此编写的自定义库在涉及巨大输入时似乎存在一些缺陷（4GB 文件，其中一些字段值具有很容易有几百万个字符）。

虽然这似乎有点极端，但它实际上是电子文档发现 (EDD) 行业的标准，某些审阅软件具有包含文档全部内容的字段值。作为参考，我之前在 python 中使用 csv 模块完成了这项工作，没有任何问题。

这是一个示例输入：

```
Field delimiter = 
quote character = þ

þFieldName1þþFieldName2þþFieldName3þþFieldName4þ
þValue1þþValue2þþValue3þþSomeVery,Very,Very,Large value(5MB or so)þ
...etc... 
```

编辑：所以我从头开始创建了一个分隔文件解析器。我有点厌倦使用这个解决方案，因为它可能容易出现错误。为这样的任务编写自己的解析器也不会让人觉得“优雅”或正确。我也有一种感觉，我可能不必为此从头开始编写解析器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T03:08:03.493

使用[文件助手 API](http://filehelpers.sourceforge.net/)。它是 .NET 和开源的。使用编译后的 IL 代码在强类型对象上设置字段具有极高的性能，并支持流式传输。

它支持各种文件类型和自定义分隔符；我用它来读取大于 4GB 的文件。

如果由于某种原因不适合您，请尝试使用 string.split 逐行阅读：

```
public IEnumerable<string[]> CreateEnumerable(StreamReader input)
{
    string line;
    while ((line = input.ReadLine()) != null)
    {
        yield return line.Split('þ');
    }
} 
```

这将为您提供简单的字符串数组，以流的方式表示行，您甚至可以将其 Linq 插入；）但是请记住，IEnumerable 是延迟加载的，因此在您迭代之前不要关闭或更改 StreamReader（或导致像 ToList/ToArray 之类的完全加载操作 - 但是考虑到您的文件大小，我假设您不会那样做！）。

这是一个很好的使用示例：

```
using (StreamReader sr = new StreamReader("c:\\test.file"))
{
    var qry = from l in CreateEnumerable(sr).Skip(1)
              where l[3].Contains("something")
              select new { Field1 = l[0], Field2 = l[1] };
    foreach (var item in qry)
    {
        Console.WriteLine(item.Field1 + " , " + item.Field2);
    }
}
Console.ReadLine(); 
```

这将跳过标题行，然后从文件中打印出前两个字段，其中第四个字段包含字符串“something”。它会在不将整个文件加载到内存的情况下执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-30T11:53:34.193

Windows 和高性能 I/O 意味着，使用[IO Completion](http://blogs.msdn.com/kavitak/archive/2003/12/15/Async-I_2F00_O-and-I_2F00_O-completion-ports.aspx)端口。你可能需要做一些额外的管道工作才能让它在你的情况下工作。

这是基于您想要使用 C#/.NET 的理解，并且根据[Joe Duffy的说法](http://www.bluebytesoftware.com/blog/PermaLink,guid,f8404ab3-e3e6-4933-a5bc-b69348deedba.aspx)

> 18) 不要在托管代码中使用 Windows 异步过程调用 (APC)。

我不得不以艰难的方式学习这一点；），但排除了 APC 的使用，IOCP 是唯一明智的选择。它还支持许多其他类型的 I/O，经常用于套接字服务器。

至于解析实际文本，请查看[Eric White 的](http://blogs.msdn.com/ericwhite/archive/2008/09/30/linq-to-text-and-linq-to-csv.aspx)博客以了解一些简化的流使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T03:15:37.490

我倾向于使用内存映射文件（[此处 msdn 指向 .NET 包装器](http://msdn.microsoft.com/en-us/vcsharp/aa336740.aspx)）和简单的增量解析的组合，返回到记录/文本行（或其他）的 IEnumerable 列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T05:46:58.290

您提到某些领域非常大，如果您尝试将它们全部阅读以记忆，您可能会遇到麻烦。我会以 8K（或小块）读取文件，解析当前缓冲区，跟踪状态。

你想用你正在解析的这些数据做什么？你在寻找什么吗？你在改造它吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-30T12:09:53.310

我认为您编写自定义解析器没有问题。这些要求似乎与 BCL 已经提供的任何内容都大不相同，所以请继续。

“优雅”显然是一个主观的东西。在我看来，如果你的解析器的 API 看起来和工作起来都像标准的 BCL“阅读器”类型的 API，那么这就是相当“优雅”的。

对于大数据量，通过一次读取一个字节来使您的解析器工作，并使用一个简单的状态机来确定要做什么。将流式传输和缓冲留给底层`FileStream`类。您应该对性能和内存消耗感到满意。

如何使用这样的解析器类的示例：

```
using(var reader = new EddReader(new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read, 8192)) {
    // Read a small field
    string smallField = reader.ReadFieldAsText();
    // Read a large field
    Stream largeField = reader.ReadFieldAsStream();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-04T03:04:04.533

虽然这无助于解决大输入问题，但解析问题的可能解决方案可能包括自定义解析器，该解析器用户使用策略模式来提供分隔符。

# c++ - OpenCV 示例程序 lkdemo

> ID：339508
> 
> 赞同：2
> 
> 时间：2008-12-04T03:09:11.900
> 
> 标签：c++, opencv, opticalflow

参考，OpenCv\samples\c\lkdemo.c

有人知道下面的代码片段是做什么的吗？

从 lkdemo.c 中提取的代码

```
 for( i = k = 0; i < count; i++ )
            {
                if( add_remove_pt )
                {
                    double dx = pt.x - points[1][i].x;
                    double dy = pt.y - points[1][i].y;

                    if( dx*dx + dy*dy <= 25 )
                    {
                        add_remove_pt = 0;
                        continue;
                    }
                }

                if( !status[i] )
                    continue;

                points[1][k++] = points[1][i];
                cvCircle( image, cvPointFrom32f(points[1][i]), 3, CV_RGB(0,255,0), -1, 8,0);
            }
            count = k; 
```

Q1。

粗线有什么作用？>> **点数[1][k++] = 点数[1][i];**

为什么是 k++ ？我很困惑，认为下一点被当前点覆盖

Q2。

随着框架循环绘制 cvCircle id，旧点在哪里清除并在哪里绘制新点？

我期待您的意见。

谢谢 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T04:10:16.410

Q1：

如果我重构代码可能会有所帮助：

```
if( status[i] ) {
    points[1][k++] = points[1][i];  // <---- Q1
    cvCircle( image, cvPointFrom32f(points[1][i]), 3, CV_RGB(0,255,0), -1, 8,0);
} 
```

所以在问题 1 的行中， i 总是递增（它由循环递增）但 k 仅在 status[i] 为真时递增。简而言之，它通过复制它们来消除数组中 status[i] 为假的任何点，然后将数组的长度（计数）设置为 k，即通过消除的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T04:11:23.430

它正在消除任何漂移超过 5 个像素 (5*5=25) 的点。k 用于在删除点时跟踪输出索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T05:51:52.587

我设法弄清楚点的清除完成的位置。随着帧循环，新点反映在新帧上，新帧刷新前一个帧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T17:51:45.077

让我看看我是否得到它。此块代码消除了 status[i] 为假的任何点，即在前一个图像中但在当前图像中未找到的点。但是这样做，我们在跟踪中失去了这些点，不是吗？我的意思是，如果我们正在跟踪一个具有 N px 的对象，那么每次迭代我们都会丢弃点。这是一个好方法吗？为什么要这样做？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-09T20:43:05.700

方式过时了，但为了协议 -

现在有一个适用于 iPhone 的开源 Lucas Kanade 应用程序 - [http://www.success-ware.com/150842/Lucas-Kanade-Detection-for-the-iPhone](http://www.success-ware.com/150842/Lucas-Kanade-Detection-for-the-iPhone)

它也使用 lkdemo 代码，并在其周围添加了一些附加功能。

您将在上面的链接中找到指向 AppStore 上的应用程序和项目源代码的链接。

HTH 任何人，干杯，

奥德

# html - HTML over flash 不停止与 flash 的交互

> ID：339510
> 
> 赞同：3
> 
> 时间：2008-12-04T03:10:23.147
> 
> 标签：html, css, flash, events

我在交互式 Flash 电影之上有一个 html div，但是当鼠标移到 div 上时，它不能与 Flash 交互（视图会随着鼠标移动或单击而改变）。有没有办法让闪光灯接收鼠标移动和点击但保持 html 可见？

我无法修改 Flash SWF 文件。

**编辑：**为了更清楚，这是位于谷歌街景（flash）之上的一层信息，问题是我不能在图层重叠的地方移动街景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T03:42:26.607

尝试这样的事情：

```
<object> 
    <param name="wmode" value="transparent" /> 
    <embed src="example.swf" wmode="transparent"></embed> 
</object> 
```

主要需要注意的是`<param />`带有透明属性的标签，以及`wmode="transparent"`嵌入标签中的。您还需要运行以下 javascript 代码以使其在所有浏览器中都能正常工作：

```
theObjects = document.getElementsByTagName("object");
for (var i = 0; i < theObjects.length; i++) {
    theObjects[i].outerHTML = theObjects[i].outerHTML;
} 
```

加载文档时应运行此代码。我从中获得此代码的网站声称它必须从外部文件运行才能工作（尽管我尚未对此进行测试）。

我从这里得到了这个答案，在那里你可以获得更多细节和一个工作示例：
[http ://www.cssplay.co.uk/menus/flyout_flash.html](http://www.cssplay.co.uk/menus/flyout_flash.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T22:20:49.777

我相信简短的回答是：**不**。

对不起。

但是，如果您可以完全控制 Flash 对象的创作方式 - 您可能能够向 javascript 公开公共 API - 允许它“手动”将实时鼠标坐标和鼠标按钮信息转发到 Flash，如您在 HTML 覆盖层上操作鼠标。

如果 Google 的街景 Flash 对象公开了一个公共 JavaScript API，它可能允许您根据 HTML 覆盖层拾取的鼠标事件对 Flash 进行一些控制，则可能值得检查。

如果你试试这个，预计天会塌下来。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T16:00:15.523

应该知道 wmode=transparent 将终止在 Firefox 中使用滚轮。即使在 FP10 中也是如此

# cocoa - JavaScript 开发人员从 cocoa 等框架中寻找灵感

> ID：339515
> 
> 赞同：1
> 
> 时间：2008-12-04T03:13:40.440
> 
> 标签：cocoa, user-interface, design-patterns

我是一名开发人员，主要构建单页客户端 Web 应用程序，其中状态在客户端维护。最近，一些应用程序变得非常复杂，客户端的领域模型非常丰富，UI 交互也越来越复杂。

随着我们的发展，我们已经实现了一些非常有用的设计模式，例如被动视图 MVC、观察者、绑定、键值观察者（可可）。我最近从 SproutCore 和 Cappuccino 的工作中获得了很多灵感，它们都是受 Cocoa 启发的 JavaScript Web 框架。

显然，开发人员现在在构建复杂的 Web 应用程序时遇到的所有问题都已在许多个月前由桌面开发人员解决了。几个月前，我对 Cocoa 的了解还只是 Apple 的东西，现在它对我开发 Web 应用程序的方式产生了重大影响。

我想知道是否有人在构建桌面 GUI 方面比我有更多经验，能否指出任何其他框架，这些框架也可能在设计模式和结构方面给我灵感，以用于我的 JavaScript Web 应用程序？

我真的不在乎这些框架驻留在什么语言或平台上，只要它们能教给我一些关于一般良好应用程序设计的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T04:25:57.800

[Fowlers GUI Architectures](http://martinfowler.com/eaaDev/uiArchs.html)似乎是在高层次上进行的合理调查，但是我不知道它有多完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T06:53:34.087

Have you taken a look at [Cappuccino](http://cappuccino.org/)? It's a Javascript client-side framework, very heavily inspired by Cocoa. The Cappuccino creators even wrote their own Objective-C runtime in JavaScript so that Cappuccino apps can be written in Objective-J, an Objective-C-like syntax for JavaScript.

# c# - 是否有人尝试将 Kigg asp.net mvc 示例移植到 MVC beta

> ID：339526
> 
> 赞同：0
> 
> 时间：2008-12-04T03:25:09.013
> 
> 标签：c#, asp.net-mvc, kigg

我已经从 codeplex 下载了 Kigg 示例，但它似乎已经过时了。

是否有 ASP.NET MVC Beta 版本？是否有人尝试移植它（我尝试过但由于缺乏知识而没有成功）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T05:58:04.027

我分两步将 Kigg 从 Preview 2 升级到 Beta。我在 6 月份从 Preview 2 升级到 Preview 3，然后在几周前从 Preview 3 升级到了 Beta。基本上，我只是按照预览版 3 自述文件发行说明的“将现有的预览版 2 应用程序升级到预览版 3”部分中的步骤进行操作，然后对 Beta 版发行说明的“将现有的预览版 3 应用程序升级到 Beta 版”部分执行相同操作. 下面是我描述的几个链接，但实际上并没有比我上面所说的更多。

*   [http://danhounshell.com/blogs/dan/archive/2008/06/21/upgrading-kigg-to-asp-net-mvc-preview-3.aspx](http://danhounshell.com/blogs/dan/archive/2008/06/21/upgrading-kigg-to-asp-net-mvc-preview-3.aspx)
*   [http://danhounshell.com/blogs/dan/archive/2008/11/24/looking-at-asp-net-mvc-following-my-own-lead.aspx](http://danhounshell.com/blogs/dan/archive/2008/11/24/looking-at-asp-net-mvc-following-my-own-lead.aspx)

# java - Java 会话变量

> ID：339531
> 
> 赞同：4
> 
> 时间：2008-12-04T03:30:45.243
> 
> 标签：java, session, servlets, variables, jakarta-ee

我听说有些人认为在会话中将信息存储在服务器上是一个坏主意，因为它不安全。

因此，在多页业务流程功能中，应用程序将数据写入数据库，然后在需要时检索信息。在会话中存储私人信息是否必然不安全？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-04T04:16:40.440

只要会话本身不被[劫持](http://www.owasp.org/index.php/Session_hijacking_attack)，在会话中存储属性就没有安全风险。

有一些涉及并发和会话的严重问题。由于多个线程同时为单个会话发出请求非常常见，因此您必须确保存储在 Session 中的对象是线程安全的。要么使它们不可变，要么通过同步等内存屏障使它们成为线程安全的。我强烈推荐[Brian Goetz 撰写的关于该主题的文章](http://www.ibm.com/developerworks/library/j-jtp09238.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-04T03:44:03.220

HTTP 会话本身并不是不安全的。但是，根据您的应用程序服务器/容器，将会话 cookie 传递回浏览器的机制（以及缺乏传输层安全性 - SSL）可能允许恶意方执行各种攻击（跨站点脚本、会话劫持） ， ETC。）。我会花一些时间研究这些东西以及 SQL 注入，以了解使用 HTTP 会话的全部后果。如果您的应用程序在防火墙内运行，则通常存在比这更大的安全风险，例如社会工程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T14:15:22.617

除了性能和并发问题，您还应该考虑可用性。多个打开的页面、后退按钮、书签、链接到您的网站等是否有效？由于他们糟糕的网站，我最终在错误的日期预订了航班，`aerlingus.ie`并且几乎预订了错误的酒店。`lastminute.com`

# c++ - 我可以使用 FindFirstChangeNotification 和 FindNextChangeNofication 而不是 ReadDirectoryChangesW 获取指定目录中的文件信息更改吗？

> ID：339533
> 
> 赞同：2
> 
> 时间：2008-12-04T03:31:47.113
> 
> 标签：c++, windows, readdirectorychangesw

当指定目录的文件或子目录发生任何更改时，我希望收到通知。我用以下简单的代码段实现了这个功能：

```
UINT myThreadFunc(LPVOID pParam)
{
  int changeCount = 0;

  while(true)
  {
    HANDLE changeHandle = FindFirstChangeNotification(L"C:\\", TRUE, FILE_NOTIFY_CHANGE_FILE_NAME);
    WaitForSingleObject(changeHandle, INFINITE);
    cout<<"A modifaction has occured"<<endl;
    changeCount++;

    if (changeCount >= 10)
        break;
    if ( FindNextChangeNotification( changeHandle ) == FALSE )
        break;
  }
  bIsExit = TRUE;
  return 0;
} 
```

如何在不使用的情况下获取操作类型或文件名等信息`ReadDirectoryChangesW`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T07:32:30.637

MSDN 状态：

此函数不指示满足等待条件的更改。要在通知中检索有关特定更改的信息，请使用 ReadDirectoryChangesW 函数。（检查[链接文本](http://msdn.microsoft.com/en-us/library/aa364417(VS.85).aspx)）

# python - 使用 Python 从文本文件中读取的行中的结束行字符

> ID：339537
> 
> 赞同：34
> 
> 时间：2008-12-04T03:39:07.783
> 
> 标签：python

使用 python 从文本文件中读取行时，通常需要在处理文本之前截断行尾字符，如下例所示：

```
f = open("myFile.txt", "r")
for line in f:
    line = line[:-1]
    # do something with line 
```

是否有一种优雅的方式或习惯用法来检索没有结束行字符的文本行？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-12-04T08:04:19.230

在 Python 中执行此操作的*惯用*方法是使用**rstrip('\n')**：

```
for line in open('myfile.txt'):  # opened in text-mode; all EOLs are converted to '\n'
    line = line.rstrip('\n')
    process(line) 
```

其他每个替代方案都有一个陷阱：

*   **file('...').read().splitlines()**必须一次将整个文件加载到内存中。
*   **如果最后一行没有 EOL，**line = line[:-1]将失败。****

 *** * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-04T04:13:21.693

简单的。使用**分割线（）**

```
L = open("myFile.txt", "r").read().splitlines();
for line in L: 
    process(line) # this 'line' will not have '\n' character at the end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-04T04:10:42.307

你的代码有什么问题？我觉得它非常优雅和简单。唯一的问题是，如果文件没有以换行符结尾，则返回的最后一行不会有 a`'\n'`作为最后一个字符，因此这样做`line = line[:-1]`会错误地删除该行的最后一个字符。

解决这个问题的最优雅的方法是定义一个生成器，它获取文件的行并从每行中删除最后一个字符，前提是该字符是换行符：

```
def strip_trailing_newlines(file):
    for line in file:
        if line[-1] == '\n':
            yield line[:-1]
        else:
            yield line

f = open("myFile.txt", "r")
for line in strip_trailing_newlines(f):
    # do something with line 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-07-13T09:39:48.930

很久以前，有可以在 16 kb 核心机器上运行的亲爱的、干净的、旧的 BASIC 代码：就像这样：

```
if (not open(1,"file.txt")) error "Could not open 'file.txt' for reading"
while(not eof(1)) 
  line input #1 a$
  print a$
wend
close 
```

现在，要使用更好的硬件和软件（Python）逐行读取文件，我们必须重新发明轮子：

```
def line_input (file):
    for line in file:
        if line[-1] == '\n':
            yield line[:-1]
        else:
            yield line

f = open("myFile.txt", "r")
for line_input(f):
    # do something with line 
```

我被诱导认为某些地方出了问题...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-08-08T07:29:15.877

你对这种方法有什么看法？

```
with open(filename) as data:
    datalines = (line.rstrip('\r\n') for line in data)
    for line in datalines:
        ...do something awesome... 
```

生成器表达式避免将整个文件加载到内存中并`with`确保关闭文件

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-04T04:18:14.727

您也可以考虑使用 line.rstrip() 删除行尾的空格。

# svn - SVN 存储库和元数据

> ID：339539
> 
> 赞同：1
> 
> 时间：2008-12-04T03:39:50.437
> 
> 标签：svn

目前，我们正在将我们的 php 生产代码直接检查到 www。有了这个，我们获得了站点所需的所有 Netbeans 元数据和项目文件，我们必须不断地从 www rm 元数据文件，这样它们就不能从浏览器访问，所有 svn 元数据和文件也是如此。有没有办法检查生产代码并将其与您不希望用户看到的所有文件分开？

而且，我们应该首先检查我们的 netbeans 项目文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T04:38:11.083

*svn 导出*它，而不是签出项目。这摆脱了任何 svn 元数据。除此之外，我必须同意 acrosman 的建议：构建脚本或手动清除文件。

我不知道 NetBeans 以及它会自动生成多少你可能已经包含在 svn 中的东西，但是在我们的项目中，我们*svn 忽略*了构建工具可重现的任何自动生成的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T03:49:49.947

对于大型项目，我通常编写一个脚本来签出项目，删除任何额外的文件（我通常从生产副本中删除任何不需要的文件，如 sql、安装脚本等），并创建一个 tarball。

然后我将 tarball 部署到登台服务器。一旦我们对临时服务器的状况感到满意，我们就会将相同的 tarball 部署到实时服务器。这使我们有机会清理树，测试生产副本，并且知道在生产环境中部署时不包括任何可能导致问题的后续更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T03:51:40.210

将项目文件/元数据提交到存储库是一个有争议的话题。纯粹主义者说存储库纯粹用于应用程序的源代码，因此任何人都可以在不依赖任何开发环境配置的情况下签出代码，正如其他人所说，它很有用并且可以节省时间。

如果您的团队使用相同的 IDE，并且将贯穿项目的整个生命周期，那么我认为是可行的。然而，就我个人而言，我的工作场所总是忽略来自 Eclipse 等 IDE 的元数据和构建过程的输出。

为了解决将源代码直接复制到生产环境的问题，我建议使用持续集成或构建服务器来执行此任务。然后，您可以提供一个构建文件来执行删除不需要的文件的重复工作。

接下来，您可能会在构建链中添加另一个工具来自动执行测试、语法检查、代码美化和部署到其他服务器等任务。

# xml - 如何使用 XSLT 展平这个 XML

> ID：339549
> 
> 赞同：1
> 
> 时间：2008-12-04T03:45:27.600
> 
> 标签：xml, xslt

输入

```
<logs>
<logentry revision="648">
<author>nshmyrev</author> 
<date>2008-09-21T19:43:10.819236Z</date> 
<paths>
<path action="M">/trunk/po/ru.pi</path> 
</paths>
<msg>2008-09-21 Nickolay V. Shmyrev nshmyrev@yandex.ru * ru.po: Updated Russian translation.</msg> 
</logentry>
<logentry revision="647">
<author>ckirbach</author> 
<date>2008-09-21T16:25:58.369324Z</date> 
<paths>
<path action="M">/trunk/po/de.po</path> 
<path action="M">/trunk/po/ChangeLog</path> 
</paths>
<msg>* de.po: Updated German translation.</msg> 
</logentry>
<logs> 
```

到

```
<logs>
<LogEntry revision="647" author = "ckirbach" action="M">/trunk/po/de.po</LogEntry>
<LogEntry revision="647" author = "ckirbach" action="M">/trunk/po/ChangeLog</LogEntry>
</logs 
```

此外，我想忽略所有扩展名为“.pi”的路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T05:50:22.857

怎么样

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl = "http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/logs">
    <xsl:copy>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()"/>

  <xsl:template match="path[substring(.,string-length()-2)!='.pi']">
    <LogEntry revision="{ancestor::logentry/@revision}"
              author="{preceding::author/text()}"
              action="{@action}">
      <xsl:copy-of select="text()"/>
    </LogEntry>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T06:40:36.530

*Alastair 的解决方案产生了错误的结果*：产生的“作者”属性的值是“nshmyrev”，但它必须是：“ckirbach”。

下面的解决方案经过测试可以正常工作。

**这是一个解决方案，它适用于必须忽略的不同扩展（在 global 中指定`<xsl:param/>`）。**

这种转变：

```
<xsl:stylesheet 版本="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pIgnExt" select="'.pi'"/>
 <xsl:变量名="vExtLen"
      select="字符串长度($pIgnExt)"/>

    <xsl:template match="logs">
      <日志>
        <xsl:apply-templates select="*/*/path"/>
      </日志>
    </xsl:模板>

    <xsl:template match="路径">
    <xsl:变量名="vthisLen"
         select="字符串长度(.)"/>
      <xsl:如果测试=
        “不是（子字符串（.,$vthisLen -$vExtLen +1）
            =
             $pIgnExt
             )">
        <LogEntry 修订=“{../../@revision}”
                  作者="{../../作者}"
                  动作="{@action}">
        <xsl:copy-of select="node()"/>
      </LogEntry>
      </xsl:if>
    </xsl:模板>
</xsl:样式表>

```

当应用于原始 XML 文档时（更正为格式正确！）：

```
<日志>
    <logentry 修订=“648”>
        <作者>nshmyrev</作者>
        <日期>2008-09-21T19:43:10.819236Z</日期>
        <路径>
            <path action="M">/trunk/po/ru.pi</path>
        </路径>
        <msg>2008-09-21 Nickolay V. Shmyrev nshmyrev@yandex.ru * ru.po：更新了俄语翻译。</msg>
    </logentry>
    <logentry 修订=“647”>
        <作者>ckirbach</作者>
        <日期>2008-09-21T16:25:58.369324Z</日期>
        <路径>
            <path action="M">/trunk/po/de.po</path>
            <path action="M">/trunk/po/ChangeLog</path>
        </路径>
        <msg>* de.po：更新了德语翻译。</msg>
    </logentry>
</日志>

```

产生想要的结果：

```
<日志>
   <LogEntry revision="647" author="ckirbach" action="M">/trunk/po/de.po</LogEntry>
   <LogEntry revision="647" author="ckirbach" action="M">/trunk/po/ChangeLog</LogEntry>
</日志>

```

**请注意，这可以用作函数[ends-with()](http://www.w3.org/TR/xpath-functions/#func-ends-with)**的 XPath 1.0 中的实现，该函数仅在 XPath 2.0 中可用。

# iphone - 将对象从控制器传递到视图

> ID：339559
> 
> 赞同：2
> 
> 时间：2008-12-04T03:54:48.407
> 
> 标签：iphone, objective-c, cocoa-touch, cs193p

我正在学习斯坦福开放大学的[iPhone 开发课程](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)，我在[assignment3](http://cs193p.stanford.edu/downloads/Assignment3.pdf)上被封锁了 2 天，也许有人可以在这里帮助我？

任务是：

1.  创建将显示您的 PolygonShape 对象的自定义 UIView 子类
2.  让您的视图类访问 PolygonShape 对象，以便它可以根据需要检索多边形的详细信息

问题是：**如何让视图类访问控制器中定义的多边形对象？**

如果有帮助，这是我的实现：

自定义视图.h：

```
#import "PolygonShape.h"

@interface CustomView : UIView {
    IBOutlet PolygonShape *polygon;
}
- (NSArray *)pointsForPolygonInRect:(CGRect)rect numberOfSides:(int)numberOfSides;

@end 
```

控制器.h：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import "PolygonShape.h"
#import "PolygonView.h"

@interface Controller : NSObject {
    IBOutlet UIButton *decreaseButton;
    IBOutlet UIButton *increaseButton;
    IBOutlet UILabel *numberOfSidesLabel;
    IBOutlet PolygonShape *polygon;
    IBOutlet PolygonView *polygonView;
}
- (IBAction)decrease;
- (IBAction)increase;
- (void)awakeFromNib;
- (void)updateInterface;
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T04:23:59.783

在你弄明白之后，补上一些objective-c基础知识可能不会有什么坏处：

[http://www.cocoacast.com/?q=node/103](http://www.cocoacast.com/?q=node/103)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T04:21:50.880

找到了我自己的答案，我错过了我的 CustomView 中的 setPolygon 方法来链接两者..​​....愚蠢......

在*CustomView.h*中：

```
#import "PolygonShape.h"

@interface CustomView : UIView {
    IBOutlet PolygonShape *polygon;
}

@property (readwrite, assign) PolygonShape *polygon;

- (NSArray *)pointsForPolygonInRect:(CGRect)rect numberOfSides:(int)numberOfSides;

@end 
```

在 CustomView.m 中：

```
@implementation CustomView

@synthesize polygon;

...

@end 
```

在*Controller.m*中：

```
- (void)awakeFromNib { 
    // configure your polygon here 
    polygon = [[PolygonShape alloc] initWithNumberOfSides:numberOfSidesLabel.text.integerValue minimumNumberOfSides:3 maximumNumberOfSides:12];
    [polygonView setPolygon:polygon];
    NSLog (@"My polygon:  %@", [polygon description]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T17:17:36.053

我昨晚刚完成作业3。我在 Interface Builder 中解决了这个连接。首先，我在 PolygonShape 的“PolygonView”UIView 子类上创建了一个插座，然后将其连接到 Polygon 模型的实例。根据我在 Google Group 和其他各种网站上阅读的内容，我认为没有一种正确的方法可以将此 UIView 连接到模型和控制器。但它起作用了，我认为 View 了解模型并没有错。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-04T16:01:33.607

那么为什么不将它们声明为类的属性呢？

# sql - T-SQL 查询优化

> ID：339560
> 
> 赞同：2
> 
> 时间：2008-12-04T03:58:00.570
> 
> 标签：sql, sql-server

我正在对我们为客户提供的内部网络分析系统进行一些升级（在没有首选供应商或谷歌分析的情况下），我正在处理以下查询：

```
select 
    path as EntryPage, 
    count(Path) as [Count] 
from 
    (
        /* Sub-query 1 */
        select 
            pv2.path
        from 
            pageviews pv2 
                inner join
                    (
                        /* Sub-query 2 */
                        select
                            pv1.sessionid,
                            min(pv1.created) as created
                        from
                            pageviews pv1 
                                inner join Sessions s1 on pv1.SessionID = s1.SessionID
                                inner join Visitors v1 on s1.VisitorID = v1.VisitorID
                        where
                            pv1.Domain = isnull(@Domain, pv1.Domain) and
                            v1.Campaign = @Campaign
                        group by
                            pv1.sessionid
                    ) t1 on pv2.sessionid = t1.sessionid and pv2.created = t1.created
    ) t2
group by 
    Path; 
```

我已经用 PageViews 表中的 200 万行测试了这个查询，运行大约需要 20 秒。我注意到执行计划中有两次聚集索引扫描，两次都命中 PageViews 表。该表的 Created 列上有一个聚集索引。

问题在于，在这两种情况下，它似乎都遍历了所有 200 万行，我认为这是性能瓶颈。有什么我可以做的来防止这种情况发生吗，或者我是否已经最大限度地优化了？

作为参考，查询的目的是查找每个会话的第一个页面视图。

**编辑：**经过很多挫折，尽管在这里得到了帮助，但我无法使这个查询工作。因此，我决定在会话表中简单地存储对入口页面（现在是退出页面）的引用，这样我就可以执行以下操作：

```
select
    pv.Path,
    count(*)
from
    PageViews pv
        inner join Sessions s on pv.SessionID = s.SessionID
            and pv.PageViewID = s.ExitPage
        inner join Visitors v on s.VisitorID = v.VisitorID
where
    (
        @Domain is null or 
        pv.Domain = @Domain
    ) and
    v.Campaign = @Campaign
group by pv.Path; 
```

此查询在 3 秒或更短的时间内运行。现在我要么必须在记录页面视图时实时更新进入/退出页面（最佳解决方案），要么在某个时间间隔运行批量更新。无论哪种方式，它都解决了问题，但不像我想要的那样。

编辑编辑：添加丢失的索引（从昨晚清理后）将查询减少到仅仅几毫秒）。呜呼！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T04:10:03.557

对于初学者，

```
 where pv1.Domain = isnull(@Domain, pv1.Domain) 
```

不会SARG。我记得，你不能优化一个函数的匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T04:20:35.783

从杜夫勒多夫继续。

试试这个：

```
where
   (@Domain is null or pv1.Domain = @Domain) and
   v1.Campaign = @Campaign 
```

好的，我有几个建议

1.  创建这个涵盖的索引：

    ```
     create index idx2 on [PageViews]([SessionID], Domain, Created, Path) 
    ```

2.  如果您可以修改 Sessions 表以便它存储入口页面，例如。EntryPageViewID 您将能够对此进行大量优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T04:26:11.980

您的内部查询 (pv1) 将需要 (Domain) 上的非聚集索引。

由于 Created 上的聚集索引，第二个查询 (pv2) 已经可以找到它需要的行，但是 pv1 可能返回太多行，以至于 SQL Server 决定表扫描比它需要占用的所有锁要快。作为 SessionID 上的 pv1 组（因此必须按 SessionID 排序），SessionID、Created 和包含路径上的非聚集索引应该允许发生 MERGE 连接。如果没有，您可以使用“SELECT .. FROM pageviews pv2 INNER MERGE JOIN ...”强制合并连接

上面列出的两个索引将是：

在 PageViews（域）上创建非集群索引 ncixcampaigndomain

创建非集群索引 ncixsessionidcreated ON PageViews(SessionID, Created) INCLUDE (path)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T04:38:04.110

我回来了。要回答您的第一个问题，您可能只需在这两个条件下进行联合，因为它们显然是不相交的。

实际上，您试图涵盖提供域和不提供域的情况。您需要两个查询。他们可能会完全不同地优化。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-04T04:52:15.080

这些表中数据的性质是什么？您是否发现大部分数据被定期插入/删除？

那是表的完整架构吗？查询计划显示不同的索引.. 编辑：抱歉，刚刚阅读了最后一行文本。我建议如果这些表经常被清除/插入，你可以考虑放弃聚集索引并将这些表用作堆表..只是一个想法

正如约翰建议的那样，绝对应该在 Campaign、Domain 上放置非聚集索引

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-04T05:14:25.953

```
SELECT  
    sessionid,  
    MIN(created) AS created  
FROM  
    pageviews pv  
JOIN  
    visitors v ON pv.visitorid = v.visitorid  
WHERE  
    v.campaign = @Campaign  
GROUP BY  
    sessionid 
```

这样就可以为您提供广告系列的会话。现在让我们看看你在做什么。

好的，这摆脱了您的分组：

```
SELECT  
    campaignid,  
    sessionid,   
    pv.path  
FROM  
    pageviews pv  
JOIN  
    visitors v ON pv.visitorid = v.visitorid  
WHERE  
    v.campaign = @Campaign  
    AND NOT EXISTS (  
        SELECT 1 FROM pageviews  
        WHERE sessionid = pv.sessionid  
        AND created < pv.created  
    ) 
```

# asp.net - 为什么在 ASP.NET 路由中将 [ ] 更改为 { }？

> ID：339566
> 
> 赞同：0
> 
> 时间：2008-12-04T04:04:27.623
> 
> 标签：asp.net, asp.net-mvc, routing

我注意到关于 ASP.NET 路由有一个变化。我不明白为什么会有这样的变化。

在 ASP.NET MVC Preview 中，Global.ascx 中的路由设置类似于“[controller]/[action]/[id]”。现在，它改为“{controller}/{action}/{id}”。为什么将 [] 更改为 {} ？有必要这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T05:52:31.370

哇，那是很久以前的事了。有一天，我希望字符串类本身可以增加命名格式。那么这个举动看起来会是一个非常有先见之明的举动。我们喜欢它与 string.format 的相似性和一致性。此外，它与 UriTemplate 格式字符串一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T04:06:43.017

我不确定这是为什么，但它确实具有更像 String.Format 的好处。约定/减少惊喜通常是一件好事。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-12-04T06:16:14.270

在路由中，您可以通过将占位符（称为 URL 参数）括在大括号（ { 和 } ）中来定义它们。解析 URL 时，/ 字符被解释为分隔符。

因此，现在为什么他们将用于解析占位符的代码从 [ ] 更改为 { } 是开发人员会更清楚的！

# debugging - 调试开发人员结构问题 - 服务未启动 Web 组件

> ID：339567
> 
> 赞同：0
> 
> 时间：2008-12-04T04:06:09.227
> 
> 标签：debugging, azure

我正在尝试在我的开发 PC 上启动并运行 Azure SDK，但遇到了一些问题。

我已经安装了 SDK、VS 工具并正在尝试运行示例。每次我尝试运行示例时，开发存储服务都会启动，然后 Developer Fabric 会尝试启动。这是停止的地方。无论出于何种原因，Developer Fabric 都无法运行任何网站。

我已按照他们的清单设置系统并且没有事件消息。我在安装了 IIS 7 的 Vista Home Premium 下运行。

如果您有任何建议，我很乐意听取他们的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-05T07:06:39.597

事实证明，我的问题比 Azure 无法在我的计算机上运行更深一些。

为了使用 windows vista（在项目设置下配置）本地调试 IIS 应用程序，您需要为 IIS 启用 windows 身份验证。无法安装此功能，更不用说以家庭用户想要此类功能为幌子在 Vista Home Premium 下启用了。

对于普通的 VS 2005 用户来说，这是可以的，有一个[修补程序](http://support.microsoft.com/default.aspx?scid=kb;EN-US;937523)，但对我和我喜欢的 VS 2008 SP1 来说，没有解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-19T03:40:25.903

在对这个问题感到非常沮丧之后，我将其发布为以下[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=387883)问题。

# javascript - Javascript 是否会针对未处理/未捕获的异常触发事件？

> ID：339580
> 
> 赞同：40
> 
> 时间：2008-12-04T04:13:32.240
> 
> 标签：javascript, exception, events, web-applications, try-catch

我正在寻找记录未处理的 javascript 异常。当未捕获异常时是否会触发事件？我希望在它们导致浏览器中的 javascript 错误之前捕获异常，但我不想在 try/catch 中运行我的整个应用程序。任何帮助，将不胜感激。谢谢！

更新：tvanfosson 指出 onerror 是一种可能性。它不是规范的一部分，仅在基于 IE 或 Gecko 的浏览器中可用。

欲了解更多信息 - [http://books.google.com/books?id=tKszhx-XkzYC&pg=PA386&lpg=PA386&dq=safari+onerror+javascript&source=web&ots=gQaGbpUnjG&sig=iBCtOQs0aH_EAzSbWlGa9v5flyo#PPA387,M1](http://books.google.com/books?id=tKszhx-XkzYC&pg=PA386&lpg=PA386&dq=safari+onerror+javascript&source=web&ots=gQaGbpUnjG&sig=iBCtOQs0aH_EAzSbWlGa9v5flyo#PPA387,M1)

OnError 支持表 - [http://www.quirksmode.org/dom/events/error.html](http://www.quirksmode.org/dom/events/error.html)

Mozilla 的文档 - [https://developer.mozilla.org/en/DOM/window.onerror](https://developer.mozilla.org/en/DOM/window.onerror)

WebKit 错误报告 - [https://bugs.webkit.org/show_bug.cgi?id=8519](https://bugs.webkit.org/show_bug.cgi?id=8519)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-17T22:32:59.567

看看这个小提琴：

[http://jsfiddle.net/xYsRA/1/](http://jsfiddle.net/xYsRA/1/)

```
window.onerror = function (msg, url, line) {
    console.log("Caught[via window.onerror]: '" + msg + "' from " + url + ":" + line);
    return true; // same as preventDefault
};

window.addEventListener('error', function (evt) {
    console.log("Caught[via 'error' event]:  '" + evt.message + "' from " + evt.filename + ":" + evt.lineno);
    console.log(evt); // has srcElement / target / etc
    evt.preventDefault();
});

throw new Error("Hewwo world.  I crash you!!!");

throw new Error("Hewwo world.  I can only crash you once... :("); 
```

哪个打印：

```
捕获[通过 window.onerror]：'未捕获的错误：Hewwo 世界。我让你崩溃！！！来自 http://fiddle.jshell.net/xYsRA/1/show/:32 fiddle.jshell.net:21
Caught[via 'error' event]: 'Uncaught Error: Hewwo world. 我让你崩溃！！！来自 http://fiddle.jshell.net/xYsRA/1/show/:32 fiddle.jshell.net:26
ErrorEvent {lineno: 32, filename: "http://fiddle.jshell.net/xYsRA/1/show/", message: "Uncaught Error: Hewwo world. I crash you!!!", clipboardData: undefined, cancelBubble:错误的…}
 fiddle.jshell.net:27\

```

笔记：

*   如果删除“return true”/“evt.preventDefault()”行，那么在记录错误后，它将以正常方式在 JS 控制台上打印。

*   与上面的陈述相反，window.onerror 在我测试的所有浏览器中都有效。但是，无论如何 addEventListener 方法可能更好，并提供更丰富的语义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-04T04:18:11.467

尝试使用 onerror 处理程序。 来自 MDN 的[文档。](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror)这将允许您在检测到错误时执行某些操作，但可能不会让您以 try/catch 块的优雅方式继续。请注意，浏览器之间的处理方式无疑存在差异。

# unix - 打破 HP-UX 中的“while read”循环正在读取的“tail -f”

> ID：339582
> 
> 赞同：0
> 
> 时间：2008-12-04T04:14:19.680
> 
> 标签：unix, shell, tail, hp-ux

我正在尝试编写一个（sh -bourne shell）脚本，在将行写入文件时对其进行处理。我试图通过将输出`tail -f`输入`while read`循环来做到这一点。根据我在 Google 的研究以及处理类似问题但使用 bash 的[这个问题，这种策略似乎是正确的。](https://stackoverflow.com/questions/157163/how-to-do-something-with-bash-when-a-text-line-appear-to-a-file)

从我读过的内容来看，当被跟踪的文件不再存在时，我似乎应该能够跳出循环。它没有。实际上，似乎我可以摆脱这种情况的唯一方法是在另一个会话中终止该进程。`tail`似乎确实可以正常工作，否则作为测试：

```
触摸文件
尾 -f 文件 | 而读线
做
  回声$线
完毕

```

我在另一个会话中附加的数据`file`只是来自上面编写的循环处理的文件。

这是在 HP-UX 版本 B.11.23 上。

感谢您提供的任何帮助/见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T06:10:42.283

If you want to break out, when your file does not exist any more, just do it:

```
 test -f file || break 
```

Placing this in your loop, should break out.

The remaining problem is, how to break the read line, as this is blocking.

This could you do by applying a timeout, like read -t 5 line. Then every 5 second the read returns, and in case the file does not longer exist, the loop will break. Attention: Create your loop that it can handle the case, that the read times out, but the file is still present.

EDIT: Seems that with timeout read returns false, so you could combine the test with the timeout, the result would be:

```
 tail -f test.file | while read -t 3 line || test -f test.file; do 
          some stuff with $line
  done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-10T01:51:48.900

除非您使用 GNU *tail*，否则它不会在跟随文件时自行终止。-f 选项实际上只用于交互式监控——事实上，我有一本书说 -f “不太可能在 shell 脚本中使用”。

但是对于问题的解决方案，我不完全确定这不是一种过度设计的方法，但我认为你可以将*尾部*发送到 FIFO，然后有一个函数或脚本来检查文件如果它没有链接，存在并杀死尾巴。

```
#!/bin/sh

哨兵（）
{
    虽然是真的
    做
        如果 [ ！-e $1]
        然后
            杀死 2 美元
            rm /tmp/$1
            休息
        菲
    完毕
}       

触摸 $1

mkfifo /tmp/$1

尾 -f $1 >/tmp/$1 &

哨兵$ 1 $！&

猫 /tmp/$1 | 而读线
做
    回声$线
完毕

```

做了一些幼稚的测试，它*似乎*工作正常，并且没有留下任何垃圾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T04:33:09.347

我不了解 HP-UX `tail`，但 GNU`tail`可以`--follow=name`选择按名称跟随文件（每隔几秒钟重新打开文件，而不是从不会检测文件是否未链接的相同文件描述符中读取）和当用于打开文件的文件名被取消链接时将退出：

```
tail --follow=name test.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-27T22:39:38.263

我从来没有对这个答案感到满意，但我也没有找到替代方案：

```
kill $(ps -o pid,cmd --no-headers --ppid $$ | grep tail | awk '{print $1}') 
```

获取当前进程的所有子进程，查找尾部，打印出第一列（尾部的 pid），然后将其杀死。确实丑陋的罪恶，这就是生活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T16:15:59.760

以下方法将`tail -f file`命令设置为背景，将其进程 ID 和自定义字符串前缀（此处 `tailpid:` ）回显到`while`循环中，其中带有自定义字符串前缀的行触发另一个（背景）`while`循环，该循环每 5 秒检查一次是否`file`仍然存在。如果不是，`tail -f file`则被杀死并且包含后台`while`循环的子shell 退出。

```
# cf. "The Heirloom Bourne Shell",
# http://heirloom.sourceforge.net/sh.html,
# http://sourceforge.net/projects/heirloom/files/heirloom-sh/ and
# http://freecode.com/projects/bournesh

/usr/local/bin/bournesh -c '
touch file
(tail -f file & echo "tailpid: ${!}" ) | while IFS="" read -r line
do
   case "$line" in
      tailpid:*) while sleep 5; do 
                       #echo hello; 
                       if [ ! -f file ]; then
                          IFS=" "; set -- ${line}
                          kill -HUP "$2"
                          exit
                       fi
                 done & 
                 continue ;;
   esac
   echo "$line"
done
echo exiting ...
' 
```

# iphone - 设置样式分组表

> ID：339583
> 
> 赞同：6
> 
> 时间：2008-12-04T04:14:22.237
> 
> 标签：iphone, objective-c, cocoa-touch

所以在 iPhone 上创建一个 Settings 样式表是微不足道的。问题是，它们添加了大量代码，因为您的设置有一系列选项/样式单元格。一个部分可能有一个检查列表，另一个可能有带有附件披露的单元格以进一步深入研究，另一个可能是带有 UITextFields 的标签。

我的问题是，创建这个表的最干净的方法是什么。您是否通常创建 UITableViewController 的子类，然后为每种不同类型的单元格创建子类 UITableViewCell，并为这些单元格编写支持类？这意味着如果您有一个包含 4 个部分的设置样式表，所有不同类型的单元格，您将在表中加载 4 个 nib 并导入 4 个类文件？以编程方式设置框架、视图、文本字段并标记它们以供以后访问？

对此的答案可能是主观的，但我想知道你们专家认为解决这个常见问题的最优雅的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-04T14:57:13.593

最简单的方法是在 tableView:cellForRowAtIndexPath: 方法中简单地添加控件。

我还推荐这个来帮助你整理代码： [一种使用 UITableView 和保持理智的技术](http://www.speirs.org/blog/2008/10/11/a-technique-for-using-uitableview-and-retaining-your-sanity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T16:18:50.810

我宁愿在 Interface Builder 中设置大部分设置，而不是编写一大堆代码来使视觉/布局恰到好处。可以想象，在 iPhone 模拟器中需要进行几轮“修改 - 构建 - 测试”才能让这个特殊的表格视图按照你想要的方式布局。

我觉得在 IB 中进行所有这些粗略的视觉更改可能会更容易一些，然后`UITableViewCell`通过代码中的标识符动态加载所有自定义。如果您想要的东西在 IB 中不可行，那么您可以对此代码进行最后一轮调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-09T15:18:56.190

Three20 库（从 Facebook iPhone 应用程序中提取）有一组现成的单元格，其中包含各种控件。

（但不确定你是否想使用它们。Three20 有点“未发明”的问题，并尝试子类化和扩展所有内容，因此添加它会给你的项目添加相当多的混乱。但至少你可以拿来做例子。）

PS 你的问题启发了我打开一个“<a href="https://stackoverflow.com/questions/843427/what-are-your-favourite-uitableview-uitableviewcell-tricks/">你最喜欢的 UITableView / UITableViewCell 技巧是什么？” Stack Overflow 上的线程，查看更多提示。

# mysql - 如何在 OS X 上从一个本地端口转发到另一个本地端口？

> ID：339591
> 
> 赞同：3
> 
> 时间：2008-12-04T04:23:11.753
> 
> 标签：mysql, networking

我有一个 MySQL 实例在 3306 端口上本地运行，但对于一些遗留应用程序，我也希望它在 3305 端口上可用（不要问）。在 OS X 上是否有一种简单的方法可以做到这一点，这样如果我尝试在 3305 或 3306 上进行连接，它们都会转到 3306 上的 MySQL 服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T04:30:09.337

可以使用 ipfw 为 3305 端口设置转发规则，将其发送到 3306 端口。

```
ipfw add fwd localhost,3306 tcp from any to any 3305 via en0 
```

我的语法可能有点偏离，您可能必须将其更改为实际 IP 地址或为其添加第二条规则。

# .net - .Net FileIOPermission & ApplicationData

> ID：339601
> 
> 赞同：2
> 
> 时间：2008-12-04T04:30:38.523
> 
> 标签：.net, file-io

在某些计算机上尝试在 Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 中创建文件夹时，我收到了 FileIOPermssion 异常。我已经确定有问题的计算机上运行了某种形式的防病毒软件，但我无法联系他们的 IT 部门以了解他们具体使用的是什么。

有没有其他人遇到过这样的问题？我已经尝试谷歌搜索了一段时间，并没有想出任何东西。我需要做些什么来保证对 ApplicationData 的写入权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T07:12:03.363

我在另一个论坛上收到了另一个答案，可能是答案，但我必须先验证它。基本上他们的建议是用户可能已经将应用程序安装在网络共享上，而不是直接安装在硬盘上，这意味着应用程序无法完全信任地运行。如果是这种情况，建议的解决方法是使用[隔离存储而不是 ApplicationData。](http://msdn.microsoft.com/en-us/library/3ak841sy(VS.80).aspx)

如果使用隔离存储解决了这个问题，我将验证这是否是问题并更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T04:41:07.143

Vista或XP。或者更重要的是，在 XP 上没有问题，但在 Vista 上却有问题？您可能与 UAC 发生冲突，它对检查各种操作所需的安全权限更为严格。我编写的打印机设置程序遇到了类似的问题——在 XP 上运行良好，但在 Vista 中从网络共享运行时需要强命名和一些 GPO 调整。

**编辑：**由于这似乎不是问题，您可以检查他们是否打开了文件夹重定向，如果是，它是如何配置的。写入网络共享而不是本地磁盘可能是一个问题。或者可能有一个 GPO 阻止对 ApplicationData 文件夹的写访问 - 或一般的软件安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-05T19:40:44.113

该问题肯定是由从网络驱动器上运行应用程序引起的。这会将应用程序置于部分信任状态，从而阻止写入 ApplicationData 目录。隔离存储应该可以解决这个问题，但我也没有任何运气。它产生与直接使用其他文件 IO 命令完全相同的错误。

确实有效的一件事是安装 .NET 3.5 框架，该框架会更改在网络共享上运行的应用程序的默认信任级别。

# php - 如何免费检查网站安全？

> ID：339603
> 
> 赞同：37
> 
> 时间：2008-12-04T04:32:20.737
> 
> 标签：php, security

我听说有一些免费的应用程序可以检查 PHP 网站的漏洞，但我不知道该使用什么。我想要一个适用于 Windows 的免费程序（最好带有 GUI），它可以分析我的网站并给我一份报告。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-12-04T04:51:42.397

[来自 Insecure.org 的10 大 Web 漏洞扫描程序](http://sectools.org/web-scanners.html)（从 2006 年开始列出）。他们的第一名 Nikto2 可以在[这里](http://www.cirt.net/nikto2)找到。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-04T15:08:08.050

您只能使用任何程序检查某些安全漏洞。您可以检查您的 PHP 配置、Apache 配置、密码、常见错误等，但您无法真正以编程方式检查可能导致安全漏洞的逻辑错误。

最好的办法是对网站进行彻底的代码审查。或者，更好的是，让其他几个人对网站进行彻底的代码审查，寻找安全漏洞。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-04-29T16:12:53.527

[Netsparker 社区版](http://www.mavitunasecurity.com/communityedition/)可以做到这一点，而且它是免费的（GUI + Windows）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-13T09:17:15.347

我最近发现[Detectify](https://detectify.com)似乎进行了不错的扫描并且具有漂亮的 UI。他们在捐赠的基础上工作，这意味着您应该决定可以花多少钱。

> 我们涵盖了 OWASP Top 10。这意味着我们发现了各种各样的缺陷，包括 SQL、LDAP、XPATH 和 NoSQL 注入、跨站点脚本缺陷、损坏的会话管理、远程代码和命令执行等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-04-26T21:02:31.840

我参加聚会有点晚了，但是由于您特别要求易于使用且技术含量不高的扫描仪，请查看[Golem Technologies 网站安全扫描仪](https://www.golemtechnologies.com)- 完整扫描不是免费的，但他们有一个演示扫描检查大约 10% 的站点，并会捕获许多常见漏洞。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-09-07T20:02:57.093

这是另一个，但如前所述，没有什么比专业的眼光更重要的了：

[http://www.websitedefender.com](http://www.websitedefender.com)

# latex - ps 中缺少章节标题，但 dvi 中没有

> ID：339611
> 
> 赞同：-1
> 
> 时间：2008-12-04T04:41:19.577
> 
> 标签：latex

A 有包含 23 个图形和 46 个表格的文件（期刊文章的附录）。以完全相同的方式创建了 23 个部分。查看已编译的 dvi 时一切正常，但在从 dvi 创建 ps 文件后，缺少部分标题之一。从 dvi 生成 pdf 没有帮助。可能是什么问题？如有必要，我可以提供源文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-04T04:51:20.417

部分标题附近是否有缺失的图像？图片是什么格式的？删除这些图像可以解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T05:07:02.333

谢谢 Alex :)
文档中的所有图像都是 eps 文件，位于每个 \section 标记之后。特定图像的“角度”选项设置为“270”。当我在inkscape中旋转图像并删除“角度”选项时，问题就消失了。
如何解释这种行为？

显然还有两个“角度= 270”的数字，但这没有问题。

问候
克里斯

# ruby-on-rails - 如何使用冷冻 Capistrano 第 2 部分？

> ID：339613
> 
> 赞同：0
> 
> 时间：2008-12-04T04:42:14.473
> 
> 标签：ruby-on-rails, ruby, rubygems, capistrano, gem

[几天前我提出了关于使用冷冻 Capistrano 的](https://stackoverflow.com/questions/333072/how-do-i-use-use-frozen-capistrano)问题，但在我的供应商文件夹中运行 Capistrano 时仍然遇到问题。

当我尝试运行我的冻结版本 cap

```
ruby -r rubygems ./vendor/gems/capistrano-2.5.2/bin/cap deploy-with-migrations 
```

我收到一个错误

```
... RubyGem version error: net-ssh(1.0.8 not >= 2.0.0) (Gem::LoadError) ... 
```

我将 net-ssh-2.0.4 冻结在我的供应商文件夹中，因为我知道它是一个依赖项，那么我该如何使用它呢？

我希望将我的供应商文件夹添加到 gempath 下的 .gemrc 文件中：会成功的，但它没有。“gem environment”显示供应商路径，但“gem list”不显示供应商文件夹中的 gem。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-10T22:56:56.367

最后，我决定不将 Capistrano 和依赖项冻结到我的供应商 gems 目录，因为它们不是我的应用程序使用的 gems——它们被用来部署我的应用程序。

相反，我将它们本地安装在我的主机帐户上并且一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T04:48:20.703

如果您想完全避免系统安装的 gem（如果您无法控制它们，这不是一个坏主意），我会将 ruby​​gems 的副本安装到供应商目录。

将 GEM_PATH 和 GEM_HOME 环境变量设置为 /path/to/your/vendor/gems 目录，然后安装 ruby​​gems 并从那里开始。

# asp.net - 如何将 VS2008 MVC 项目连接到 Vista IIS7 localhost 作为 Web 服务器？

> ID：339615
> 
> 赞同：1
> 
> 时间：2008-12-04T04:47:18.567
> 
> 标签：asp.net, asp.net-mvc, iis-7

我正在尝试将我的标准默认 ASP.NET MVC (web) 应用程序连接到 Vista IIS7 localhost web 服务器，而不是使用 Cassini。

我正在尝试找到一些步骤来设置它等。

我已经安装了 Vista IIS7，当然还有 MVC beta、VS2008 和 Sp1。

最后，我希望有多种解决方案将 Vista IIS7 用于他们自己的 Web 服务器（不同的、独立的网站）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-11T15:07:15.877

啊，现在我明白了你的问题......试试这个：右键单击项目 > 属性 > Web > 服务器 > 使用本地 IIS Web 服务器

选择之后，VS 应该在启动调试器等时使用 IIS 作为开发服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T14:42:46.243

这应该为您提供必要的步骤：http:
[//blogs.dovetailsoftware.com/blogs/kmiller/archive/2008/10/07/deploying-an-asp-net-mvc-web-application-to-iis7.aspx](http://blogs.dovetailsoftware.com/blogs/kmiller/archive/2008/10/07/deploying-an-asp-net-mvc-web-application-to-iis7.aspx)

# php - 在 PHP 中，何时评估 Include/Require？

> ID：339616
> 
> 赞同：1
> 
> 时间：2008-12-04T04:47:21.360
> 
> 标签：php, include

使用 Php 什么时候包含一个包含的文件？是在预处理阶段还是在脚本评估期间？

现在我有几个脚本共享相同的页眉和页脚代码，它们执行输入验证和异常处理。像这样：

```
/* validate input */
...
/* process/do task */
...
/* handle exceptions */
... 
```

所以我想做这样的事情

```
#include "verification.php"

/* process/do task */
...

#include "exception_handling.php" 
```

因此，如果包含作为预处理步骤发生，我可以执行 #include "exception_handling.php" 但如果没有，那么任何异常都会在脚本有机会评估包含之前终止脚本。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-04T04:56:06.710

[PHP.net: include](http://fi.php.net/include/)给出了一个基本的例子：

```
vars.php
<?php

$color = 'green';
$fruit = 'apple';

?>

test.php
<?php

echo "A $color $fruit"; // A

include 'vars.php';

echo "A $color $fruit"; // A green apple

?> 
```

所以包含在代码中执行时会发生。

编辑：固定网址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T04:58:17.517

PHP 没有预处理器。以“#”开头的行使该行成为注释。你必须这样做才能包含一个文件：

```
include ("exception_handling.php");
include 'exception_handling.php'; // or this, the parentheses are optional 
```

阅读本文以获取更多信息： http: [//php.net/include](http://php.net/include)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T04:54:08.303

include/require 像 'echo' 或其他语句一样按顺序执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T04:57:58.407

按照它在代码中出现的顺序。

# wpf - 如何从可调整大小的窗口中删除最小化和最大化按钮？

> ID：339620
> 
> 赞同：91
> 
> 时间：2008-12-04T04:51:11.400
> 
> 标签：wpf, user-interface, resize, pinvoke

WPF 不提供具有允许调整大小但没有最大化或最小化按钮的窗口的能力。我希望能够制作这样一个窗口，这样我就可以拥有可调整大小的对话框。

我知道解决方案将意味着使用 pinvoke，但我不确定该调用什么以及如何调用。搜索 pinvoke.net 并没有发现任何我需要的东西，主要是因为 Windows Forms 确实在其窗口上提供了`CanMinimize`and`CanMaximize`属性。

有人可以指点我或提供有关如何执行此操作的代码（首选 C#）吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2008-12-04T05:00:23.470

我偷了一些在 MSDN 论坛上找到的代码，并在 Window 类上做了一个扩展方法，如下所示：

```
internal static class WindowExtensions
{
    // from winuser.h
    private const int GWL_STYLE      = -16,
                      WS_MAXIMIZEBOX = 0x10000,
                      WS_MINIMIZEBOX = 0x20000;

    [DllImport("user32.dll")]
    extern private static int GetWindowLong(IntPtr hwnd, int index);

    [DllImport("user32.dll")]
    extern private static int SetWindowLong(IntPtr hwnd, int index, int value);

    internal static void HideMinimizeAndMaximizeButtons(this Window window)
    {
        IntPtr hwnd = new System.Windows.Interop.WindowInteropHelper(window).Handle;
        var currentStyle = GetWindowLong(hwnd, GWL_STYLE);

        SetWindowLong(hwnd, GWL_STYLE, (currentStyle & ~WS_MAXIMIZEBOX & ~WS_MINIMIZEBOX));
    }
} 
```

唯一要记住的另一件事是，由于某种原因，这在窗口的构造函数中不起作用。我通过将其放入构造函数中解决了这个问题：

```
this.SourceInitialized += (x, y) =>
{
    this.HideMinimizeAndMaximizeButtons();
}; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2011-10-06T01:44:46.823

一种方法是设置您的`ResizeMode="NoResize"`. 它会表现得像这样。 ![在此处输入图像描述](https://i.stack.imgur.com/EkuYp.jpg)

我希望这有帮助！

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-12-04T05:33:17.477

[![](https://lh4.ggpht.com/_nxgDpneh8yk/STdq2gFqU7I/AAAAAAAAAaQ/Z8QhGEVFyMg/s400/ResizableToolWindow.jpg)](http://picasaweb.google.com/lh/photo/ipEPHFLjK8qIAzcUsvHOaQ)

不知道这是否适用于您的要求。视觉上..这是

```
<Window x:Class="DataBinding.MyWindow" ...Title="MyWindow" Height="300" Width="300" 
    WindowStyle="ToolWindow" ResizeMode="CanResizeWithGrip"> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-28T09:52:13.093

如果有人使用 Devexpress 窗口 (DXWindow) 接受的答案不起作用。一种丑陋的方法是

```
public partial class MyAwesomeWindow : DXWindow
{
    public MyAwesomeWIndow()
    {
       Loaded += OnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        // hides maximize button            
        Button button = (Button)DevExpress.Xpf.Core.Native.LayoutHelper.FindElementByName(this, DXWindow.ButtonParts.PART_Maximize.ToString());
        button.IsHitTestVisible = false;
        button.Opacity = 0;

        // hides minimize button
        button = (Button)DevExpress.Xpf.Core.Native.LayoutHelper.FindElementByName(this, DXWindow.ButtonParts.PART_Minimize.ToString());
        button.IsHitTestVisible = false;
        button.Opacity = 0;

        // hides close button
        button = (Button)DevExpress.Xpf.Core.Native.LayoutHelper.FindElementByName(this, DXWindow.ButtonParts.PART_CloseButton.ToString());
        button.IsHitTestVisible = false;
        button.Opacity = 0;
    } 
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-05-10T19:33:04.190

这是我正在使用的解决方案。请注意，仍然显示最大化按钮。

标记：

```
<Window x:Class="Example"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Example"
        StateChanged="Window_StateChanged"> 
```

后面的代码：

```
// Disable maximizing this window
private void Window_StateChanged(object sender, EventArgs e)
{
    if (this.WindowState == WindowState.Maximized)
        this.WindowState = WindowState.Normal;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-09-15T04:38:58.653

如果要删除最小化和最大化按钮，可以设置窗口的 ResizeMode="NoResize"

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-18T13:05:04.610

[@MattHamilton提出](https://stackoverflow.com/a/339635/880990)的解决方案的这种变体可以（并且必须）在 Window 的构造函数中调用。`SourceInitialized`诀窍是在扩展方法中为事件订阅委托。

```
private const int GWL_STYLE = -16, WS_MAXIMIZEBOX = 0x10000, WS_MINIMIZEBOX = 0x20000;

[DllImport("user32.dll")]
extern private static int GetWindowLong(IntPtr hwnd, int index);

[DllImport("user32.dll")]
extern private static int SetWindowLong(IntPtr hwnd, int index, int value);

/// <summary>
/// Hides the Minimize and Maximize buttons in a Window. Must be called in the constructor.
/// </summary>
/// <param name="window">The Window whose Minimize/Maximize buttons will be hidden.</param>
public static void HideMinimizeAndMaximizeButtons(this Window window)
{
    window.SourceInitialized += (s, e) => {
        IntPtr hwnd = new System.Windows.Interop.WindowInteropHelper(window).Handle;
        int currentStyle = GetWindowLong(hwnd, GWL_STYLE);

        SetWindowLong(hwnd, GWL_STYLE, currentStyle & ~WS_MAXIMIZEBOX & ~WS_MINIMIZEBOX);
    };
} 
```

# c# - 为什么 c# 中的小数与其他 c# 类型不同？

> ID：339625
> 
> 赞同：8
> 
> 时间：2008-12-04T04:52:58.620
> 
> 标签：c#

有人告诉我，十进制是作为用户定义的类型实现的，而其他 c# 类型（如 int）具有专用于它们的特定操作码。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-04T05:17:57.350

`decimal`在这里并不孤单；`DateTime`, `TimeSpan`,`Guid`等也是自定义类型。我想主要原因是它们没有映射到 CPU 原语。`float`(IEEE 754),`int`等在这里非常普遍，但是`decimal`是为 .NET 定制的。

如果您想通过反射直接与运算符交谈，这只会真正引起问题（因为它们不存在于 int 等）。我想不出您会注意到差异的任何其他情况。

（实际上，仍然有结构等来代表其他结构 - 它们只是缺少您可能期望的大部分内容*，*例如运算符）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T06:17:50.710

> “这背后的原因是什么？”

十进制数学是在软件与硬件中处理的。目前，许多处理器不支持本机十进制（金融十进制与浮点数）数学。但随着 IEEE 754R 的采用，这种情况正在发生变化。

也可以看看：

*   [十进制与双倍速](https://stackoverflow.com/questions/329613/decimal-vs-double-speed)
*   [http://software.intel.com/en-us/blogs/2008/03/06/intel-decimal-floating-point-math-library/](http://software.intel.com/en-us/blogs/2008/03/06/intel-decimal-floating-point-math-library/)
*   [http://grouper.ieee.org/groups/754/](http://grouper.ieee.org/groups/754/)

# sql - 您如何管理和组织存储过程？

> ID：339627
> 
> 赞同：1
> 
> 时间：2008-12-04T04:54:57.553
> 
> 标签：sql, stored-procedures

您如何组织您的存储过程，以便您可以轻松找到它们并跟踪它们的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T06:03:06.217

我倾向于根据约定命名它们。通常是 {TableName}_{operation}{extra}，其中额外部分是可选的。

例如：Product_Get、Product_Add、Product_Delete、Product_Update、Product_GetByName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T06:10:45.123

我强烈考虑创建数据库项目，以便我可以对存储过程进行版本控制并避免从开发部署到生产时的混乱。一旦他们开始与大型项目不同步，事情就会很快变得困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T06:16:06.860

我尝试使名称尽可能接近 sp 的功能。例如 sp_Get* 、 sp_Set* 、 sp_Rep* 等。尽管在某些情况下 sp_ 是多余的，但由于 Sybase 中缺少源代码控制（我的宠儿）的集成，我使用此命名法在我的首选源中跟踪它们代码控制存储库。

# linq - 为什么以及何时使用 LINQ？

> ID：339639
> 
> 赞同：13
> 
> 时间：2008-12-04T05:06:49.853
> 
> 标签：linq, linq-to-sql

我从来没有在我的任何项目中使用过 LINQ，我一直在我的商业应用项目中使用 ado.net/OR 工具，所以我想知道 LINQ 有什么好处？为什么以及何时应该使用 LINQ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-04T05:23:54.720

**只是为了澄清LINQ**和**LINQ to SQL**的概念之间存在差异。

LINQ 是一种查询*语法*，而不是一种语言或 O/RM。您可以在 LINQ 提供的语法之上构建 O/RM。

因为我收集到您的问题实际上是*何时使用 LINQ to SQL*，所以我将解决这个问题。

LINQ to SQL 最适合在以下情况下使用：

*   只针对 MS SQL 2000+
*   做 RAD

我在几个商业产品和很多我自己的产品上使用了 LINQ to SQL，并发现了这些好处：

*   熟悉的编程语言（C#/ VB.NET）
*   更易于维护（我们拥有比 SQL 专家更多的 .NET）
*   生成的 SQL 结构良好且非常优化
*   允许将业务规则直接转换为 SQL，同时仍将所有业务逻辑保留在单个项目中

至于*LINQ*作为一个概念，我一直在使用它，*因为我了解它可以/不能做什么以及如何正确使用它*。像任何语言功能一样，如果人们不了解它是什么以及如何使用它，它很容易被误用。我推荐以下博客来了解一些 LINQ 的概念：

*   [Bart De Smet](http://blogs.bartdesmet.net/bart/) - 高级
*   [查理卡尔弗特](http://blogs.msdn.com/charlie/default.aspx)
*   [维尤](http://blogs.msdn.com/wriju/default.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T06:37:10.967

这是一个公平的问题，但已经被问过很多次了。请参阅这些较早的问题以获得更深入和更广泛的覆盖范围：

[关于 Linq](https://stackoverflow.com/questions/16322/all-about-linq)

[Linq 初学者指南](https://stackoverflow.com/questions/8050/beginners-guide-to-linq)

[Linq 最难或最容易被误解的方面是什么](https://stackoverflow.com/questions/215548/whats-the-hardest-or-most-misunderstood-aspect-of-linq)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T23:56:58.107

LINQ 是某种通用查询语言。如果您学习了它，您不必将自己限制在数据库中，但您也可以使用它来操作 XML 文件、JSON 文件或数组、Lists<> 和 dictionairies<,>。这很棒。

甚至还有 LinqToFlickr、LinqToExcel 和 LinqToGoogle。它不仅仅是一个 OR 映射器。请参阅：http: [//blogs.msdn.com/charlie/archive/2008/02/28/link-to-everything-a-list-of-linq-providers.aspx](http://blogs.msdn.com/charlie/archive/2008/02/28/link-to-everything-a-list-of-linq-providers.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T05:20:23.820

LINQ-to-SQL 通过 DMBL 设计器可以很好地发挥轻量级 ORM 的功能。它具有内置的语言支持，可以很容易地使用标准访问模式访问您的实体。我在所有新项目中都使用它，发现它在简单性和可测试性方面对我来说是一个重大改进。[这篇文章](https://stackoverflow.com/questions/16322/all-about-linq)有更多信息。

# c++ - 如何在 C++ 中添加非常大的数字？

> ID：339649
> 
> 赞同：3
> 
> 时间：2008-12-04T05:16:35.200
> 
> 标签：c++, biginteger, largenumber

如何在 C++ 中添加非常大的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T05:26:39.207

考虑一个“bignum”库，例如：[http://gmplib.org/](http://gmplib.org/)或[http://ttmath.slimaczek.pl/ttmath](http://ttmath.slimaczek.pl/ttmath)。看一个简单的 bignum 类：[http ://www.circlemud.org/~jelson/560/](http://www.circlemud.org/~jelson/560/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T05:52:04.757

在“Bigint C++”上做一个谷歌这将为您提供仲裁器精度整数算术库的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T05:24:50.253

[您可以在http://speleotrove.com/decimal/](http://speleotrove.com/decimal/)找到一个大十进制实现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T05:25:17.103

“非常大”有多大？有符号长整数可以达到 2,147,483,647，无符号长整数可以达到 4,294,967,295。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T08:26:36.613

GMP 有一个很好的 GMPXX C++ 包装器。GMP 支持整数和浮点数，并且是**L** GPL 的。

我用过。没关系，但要注意创建大量临时对象。（潜在的效率受到打击。）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-04T05:22:55.640

您可以将[LiDIA](http://www.cdc.informatik.tu-darmstadt.de/TI/LiDIA/)之类的库用于“大整数”类。

# iphone - 确定 UIViewController 已加载并具有有效视图的最佳方法？

> ID：339654
> 
> 赞同：15
> 
> 时间：2008-12-04T05:19:39.203
> 
> 标签：iphone, objective-c, cocoa-touch

当访问 UIViewController 的 view 属性时，它首先检查它是否有一个现有的视图，然后返回它。如果没有，它会加载它的 nib 或调用 -loadView。

当控制器收到 -didReceiveMemoryWarning 消息时，默认行为是删除该缓存视图（假设它当时未使用）。

如果我覆盖-didReceiveMemoryWarning，如何确定视图是否已被清除？我的理解是默认实现检查是否 self.view.superview == nil。如果是这样，它会清除缓存的视图。当然，它首先检查是否有*缓存*视图，如果没有，它什么也不做。但是，作为子类，我不能调用 self.view.superview，因为如果*没有*视图，它会生成一个。

那么，我如何确定 _view 是否存在？（我不能只看 _view；为设备构建时出现链接错误）。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-07-02T20:06:40.547

从 iPhone OS 3.0 开始，您可以使用该[`isViewLoaded`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/isViewLoaded)方法查看是否加载了视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T11:05:54.013

我认为在您的情况下，最好执行以下操作：

```
- (void)setView:(UIView *)view
{
    if (!view)
    {
         // Clean up code here
    }

    [super setView:view];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T10:37:41.420

您可以使用[object_getIvar()](http://developer.apple.com/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-SW1)来获取值，而无需通过访问器。从本质上讲，它让您无需链接即可访问 _view。另一方面，如果实际的 ivar 消失或重命名，它就有可能中断。传统上这从来不是一个真正的问题，但 iPhone 使用现代运行时不会受到脆弱的基类问题的影响，因此 Apple 可能更倾向于做出这些改变。

# emacs - CLISP 程序员使用哪个 IDE？

> ID：339662
> 
> 赞同：10
> 
> 时间：2008-12-04T05:25:47.430
> 
> 标签：emacs, ide, slime, clisp

我注意到 SLIME（Emacs 的 lisp 开发包）没有为 CLISP 提供 frame-source-location 功能，因此在调试器中您不能自动跳转到源位置。鉴于此，我认为 CLISP 用户必须使用其他一些 IDE（尽管我认为 IDE 在这里有点误导，也许他们只是使用不同的 Emacs 包）。

那么 CLISP 程序员使用的是什么 IDE/Emacs 包呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-09T23:11:56.567

我认为 Emacs 和 SLIME 仍然是那些人使用的。

# asp.net - 如何通过指向远程共享的虚拟文件夹访问数据库

> ID：339663
> 
> 赞同：0
> 
> 时间：2008-12-04T05:26:24.870
> 
> 标签：asp.net, database, virtual, unc, remote-server

我在访问位于远程服务器上的数据库时遇到问题。

我有一个试图连接到数据库的 ASP.NET 2.0 网页。
该数据库是通过一个虚拟文件夹（我在 IIS 中设置的）访问的。
虚拟文件夹指向包含数据库的远程共享。

虚拟文件夹（在 web 应用程序根目录中）通过 UNC 路径指向远程服务器上的共享：

```
\\databaseServerName\databaseFolder$\ 
```

虚拟文件夹的“读取”和“浏览”权限设置为“真”。

我将连接字符串存储在 web.config 的“appSettings”部分：

```
<add key="conStrVirtual" value="Provider=Microsoft.Jet.OleDb.4.0;Data Source=http://webAppServerName/virtualFolderName/databaseName.MDB;Jet OLEDB:Database Password=dumbPassword;"/> 
```

连接对象在我的 .aspx 页面上声明：

```
Dim objConnVirtual As New OleDbConnection(ConfigurationManager.AppSettings("conStrVirtual")) 
```

这是尝试使用连接对象的代码：

```
Public Sub Test()
    If objConnVirtual.State <> ConnectionState.Open Then
        objConnVirtual.Open()
    End If
    Dim cmd As OleDbCommand = New OleDbCommand("SELECT * FROM TableName", objConnVirtual)
    objDR = cmd.ExecuteReader()
    If objDR.Read() Then
        response.write("Shazaam! Data shows up here")
    End If
    objDR.Close()
    objConnVirtual.Close()
End Sub 
```

当我运行上面的代码时，我收到以下错误（在代码的这一行'objConnVirtual.Open（）'：
**异常详细信息：System.Data.OleDb.OleDbException：不是有效的文件名。**

我检查了数据库名称并且它是正确的（甚至复制/粘贴它以确保）

如果我将连接字符串的“数据源”部分放入浏览器的地址栏中，我可以成功地看到远程服务器上共享的内容。

不确定这是权限问题还是代码问题。
我已经用谷歌搜索了这个废话，但无法找到解决方案。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T06:25:24.610

访问远程 Access MDB 数据库时，您必须指定 UNC 路径，如 \\remoteMachine\Share\test.mdb。

确保您的应用程序池身份具有连接到远程共享的正确权限。默认情况下，在 IIS 6 上，您使用的是网络服务帐户，默认情况下不允许访问远程共享。

最好的方法是让 AppPool 与专门的服务用户一起运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T17:56:46.120

当您的 Web 应用程序尝试读取 db 文件时，您的服务器上使用的帐户是什么？无论此用户帐户是什么，它都需要具有读取该文件夹/文件的权限。在 IIS6 中，您可以将虚拟文件夹配置为使用任何用户帐户...在目录安全选项卡上，身份验证和访问控制下有一个编辑按钮。

您的错误消息似乎只是一般错误消息，而权限问题是您的真正问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T06:20:52.513

确保两台服务器具有相互内部访问权限，并在连接字符串中指定 db 服务器的 ip 和端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T06:27:12.360

**更新**

我还应该提到，如果我在 web.config 的“appSettings”部分中声明连接字符串，它[可以在我的机器上运行](http://jcooney.net/archive/2007/02/01/42999.aspx)（但不是一次加载到生产框），如下所示：

```
<add key="conStrVirtual" value="Provider=Microsoft.Jet.OleDb.4.0;Data Source=\\databaseServerName\databaseFolder$\databaseName.MDB;Jet OLEDB:Database Password=dumbPassword;"/> 
```

这使我认为需要使用本地 IUSER 帐户以外的域凭据可能是个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-05T05:17:58.910

**更新**

首先，感谢所有提交答案的人。

然而，我们最终*没有*使用“通过虚拟文件夹连接到远程数据库”方法，因为让它工作所需的权限的复杂性给我们带来了比其价值更多的问题。我们将 UNC 路径放回连接字符串中，这可能不是最好的方法，但对我们有用。

# workflow - 请确认：Windows Workflow Foundation 现在是一匹值得支持的好马吗？

> ID：339666
> 
> 赞同：12
> 
> 时间：2008-12-04T05:31:23.550
> 
> 标签：workflow, workflow-foundation, workflow-foundation-4

我们正在为一家端到端使用 Microsoft 产品的公司选择工作流解决方案。鉴于 WF4 的消息，它似乎本质上是对以前版本的重写，是否支持当前版本是明智之举，还是我们应该寻找其他地方？

即 - 当前版本是否如此糟糕以至于我们不明智地尝试使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-10T17:36:43.970

Haiving 刚刚启动了一个使用 .NET 3.5 和工作流的项目，我想说当前版本的 WF**足以**使用和运行。它帮助我们快速推出产品（我们通常每周都有功能变化和需求变化）。但是，我有一份投诉清单：

*   工作流设计器会让你发疯，因为它太慢（在某些情况下）并且会根据需要重新安排你的状态机。
*   发布错误修复后，没有内置的升级策略可让您的旧工作流程继续运行。如果您打算使用 WF，请仔细考虑如何尽早进行升级。
*   使用 WCF 进行迭代（发送和接收活动）对您隐藏 WorkflowRuntime，这使得很难理解引擎盖上发生了什么。
*   对它们进行单元测试并不容易。有一些想法，但当我们开始这个[WorkFlow 单元测试时，似乎没有一个特别容易](https://stackoverflow.com/questions/182740/workflow-unit-testing)

我喜欢基于工作流的开发的想法和潜力，但是我并不急于重复这种体验，并且可能会在长时间运行的过程中坚持不使用它。我会再次使用它的一个地方是在一个简短而复杂的过程中（例如用于计算价格的规则引擎）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-05T22:16:40.633

也许对你来说有点晚了，但现在 WF 4.0 发布了 beta 版，其他有同样问题的人可以考虑支持 4.0 的马而不是 3.5 的马。

这在某种程度上解决了以下问题：

• 工作流设计器会让你发疯，因为它太慢了（在某些情况下），并且会按照它认为合适的方式重新安排你的状态机。[设计师性能改进]

• 对它们进行单元测试并不容易。有一些想法，但当我们开始这个工作流[单元测试](https://stackoverflow.com/questions/182740/workflow-unit-testing)时似乎没有一个特别容易 [我认为现在更容易一些，工作流示例的一些介绍包括大量单元测试]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T06:10:53.563

我的理解是微软会为新的 WF 提供向后兼容性和/或迁移策略，所以我猜你可以安全地使用它。但是，我从组织​​中的其他开发人员那里听说，当前版本的 WF 使用起来非常痛苦。如果您有预算（并且取决于您的工作流程的复杂性），您可能需要考虑 K2：[http ://www.k2.com/en/index.aspx](http://www.k2.com/en/index.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-05T08:09:45.773

作为工作流开发人员，我认为当前版本使用起来很痛苦。这并不奇怪，因为这是来自 microsoft 的 v1.0 软件 :)

我认为您应该首先考虑您对工作流软件的期望。您是否有明确的 WF 期望清单？Acutally 我想知道这样一个列表的内容。也许我们可以在每个主题上提供更详细的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-15T13:14:23.367

我不知道为什么人们对WF有如此负面的印象。当然它有它的缺点，但我认为它非常有用。我遇到的一个主要问题是缺乏对升级现有工作流程的支持（gbanfill 列表中的bullent #2）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-30T11:14:00.020

使用当前版本的另一点是“都柏林”（Microsoft 新应用服务器）将构建在 WCF 和 WF .NET 4.0 之上，但很乐意托管 3.5 WF。因此，您无需重写即可迁移到该位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-17T14:18:06.243

简单提一下，Visual Studio 2010 CTP 包含一个新的更新的 WF 设计器，作为 Oslo 目标的一部分。

# configuration - web.xml 中的错误页面指令无法正确显示 UTF8

> ID：339667
> 
> 赞同：1
> 
> 时间：2008-12-04T05:32:22.253
> 
> 标签：configuration, tomcat, encoding, utf-8

我有一个包含以下条目的应用程序 web.xml：

```
<error-page>
    <error-code>404</error-code>
    <location>/system_files/error/p_notfound.jsp</location>
</error-page> 
```

但是，当显示此页面时，日文字符会出现乱码。

如果直接显示或什至通过 servlet 过滤器显示，相同的页面 (p_notfound.jsp) 会正确显示。

我尝试将过滤器添加到：

```
request.setCharacterEncoding("UTF8"); 
```

但这无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-04T21:58:11.530

我也遇到过这个问题。我通过升级解决了它。您使用的是最新版本的 Tomcat 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-14T23:21:40.437

使用 request.setCharacterEncoding() 对您没有帮助，因为它只是更改了用于解析请求参数的编码。

你应该检查这个：

*   JSP 内容真的是 UTF-8 编码的吗？
*   您是否为您的 JSP 页面设置了 pageEncoding 参数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T22:22:10.467

我尝试了上面的建议，但实际上我通过添加响应标头来强制它通过 servlet 过滤器来解决这个问题：

response.setHeader("Content-Type", "text/html; charset=UTF-8");

似乎工作得很好！

# asp.net - 新程序员应该先学习 ASP 还是 ASP.Net？

> ID：339671
> 
> 赞同：17
> 
> 时间：2008-12-04T05:48:25.980
> 
> 标签：asp.net, asp-classic

我的同事认为，新程序员必须先学习 ASP，然后再学习 ASP.Net。

我似乎同意他的观点，因为大多数从 ASP.Net 开始的新程序员都不了解网络获取、发布和状态管理:(

哪个最好学 Web 编程 Classic ASP 或 ASP.Net？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-12-04T06:00:05.050

我会选择 ASP.NET MVC 而不是经典的 ASP。经典 ASP 的问题在于它的支持级别。使用 MVC，您可以了解 Web 获取/发布和状态管理，同时获得使用您最喜欢的 OO 语言的优势。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-04T15:02:58.497

我想说不要先学习经典的 ASP，然后再学习 ASP.NET。经典的 ASP 已死。或者应该是。

为什么不学习 ASP.NET（MVC 和 WebForms），同时也涉足 PHP。查看 PHP 将有助于开发人员了解在较低抽象级别工作的感觉。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-04T06:59:04.027

我会说大多数新的 Web 开发人员最好先专门学习 HTTP，而不用混淆经典的 ASP 或 ASP.NET。

一旦他们掌握了基础知识，我建议直接转向 ASP.NET 和一种编译/面向对象的编码语言。

虽然经典的 ASP 更紧凑、更集中（要掌握的对象组更小），但不幸的是，大多数使用它编写的代码都是用 VB 脚本编写的。

我见过的一些最糟糕的代码是 VB 脚本中的经典 ASP 网站。虽然用 VB 脚本编写可维护且清晰的代码可能是可能的，但该语言本身似乎几乎鼓励完全相反。

此外，听起来 ASP.NET MVC 对您的环境来说是一个更好的选择，因为它对开发人员的 HTTP“隐藏”较少。对于某些类型的应用程序，它是比 ASP.NET Web 窗体更好的选择。

总结：跳过经典的 ASP 并避免它可能引入的所有坏习惯和问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-04T06:00:18.530

从 Classic ASP 开始不会有什么坏处，但我认为这不值得，因为只要稍加努力，您就可以理解 Webforms 正在从您那里抽象出什么。如果您想要两全其美，请从 ASP.NET MVC 开始。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-04T15:09:09.717

这是说类似的话的等效论点：

“在学习 C++ 之前，你必须先学习 pascal！”

您正在比较 2 种不同的语言和平台。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-04T22:33:54.780

我在这里同意其他人的观点，即学习 HTTP 请求/响应模型是关键。我还注意到许多 .NET 开发人员不了解 HTTP 模型。我是使用 ASP 学习的，但 .NET WebForms 使开发人员无需了解它就很容易。所以我同意 ASP.NET MVC 是一个很好的方式来做 .NET 和学习 HTTP 模型。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-07-17T08:45:10.790

从 ASP 开始几乎没有什么价值。如果您当时是一名 ASP 程序员，那么您会欣赏到 ASP.NET 中的一些概念。事实上，IIS 7 和更新版本的 Visual Studio 对 ASP 并不友好，这意味着作为一个新程序员学习它确实比它的价值更麻烦。从当前的开始是我所说的，因为这是每个人都在做的事情。

此外，要以解决方案为导向——语言应该是次要的。归根结底，您需要交付一些能让客户满意的东西。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-04T06:03:58.880

两种语言都有各自的优势。不过，我同意“Haacked”和“John Sheehan”的回复。每个人都会有自己的个人意见。所以最好开始学习你感兴趣的东西。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-02-17T09:40:21.440

我认为您需要比状态管理更深入地思考，而是考虑首先学习经典 asp 的其他含义。

与其学习经典的 ASP，不如确保您的开发人员将“状态管理”作为其培训过程的一部分。所有好的培训材料都将包括一个状态管理部分。

您可能会冒着在经典的 ASP 范式中思考并尝试将过时的设计模式应用于 ASP.net 的风险。而不是充分利用 ASP.net 的平台和技术。

话虽如此，我已经在 ASP.net 中开发多年。我目前正在维护企业级经典 ASP 系统。了解这些系统背后的框架是如何在 ASP.net 之前开发的非常有价值，并且已经改进了我的 ASP.net。

学习另一种语言总是很有价值：最近我用 Objective-C 开发了一个 iPhone 应用程序，它让我对 MVC 模式（XCode 中的默认范式）有了更好的理解——从长远来看，这将改善我的 ASP.net。

尽管查看企业系统会很有价值，但我不认为仅仅为了状态管理等目的而涉足经典 ASP（即小型一次性页面）是值得的，并且可能会产生不利影响。而是花时间学习 ASP.net “好”（即包括状态管理）。

nb 我发现不把它变成经典的 ASP / ASP.net 辩论很棘手。相反，他试图专注于学习。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-04T07:13:34.827

您并没有真正学习 ASP.NET，您将学习一门语言，例如 C# 或 VB.NET。但是是的 .NET > !.NET

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-04T23:02:27.530

为什么你应该学习经典的 ASP？它死了；没有做任何新的工作。

如果您想学习一种与 Web 工作方式相同的编程模型（Asp.net webforms 没有，它是对 windows 窗体的泄漏模仿），有像 ASP.Net MVC 这样的现代模型。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-01-07T06:54:47.137

首先通过编写静态页面来学习基础知识，并了解基本的 HTTP 请求/响应模型。
然后，继续使用服务器端技术。如果您的头脑还没有被 Asp.Net webforms 模型填满，我建议您使用 Asp.Net Mvc，但要了解权衡。很可能您迟早要处理网络表单，因为大多数 .Net 棕地网络应用程序都在使用该平台。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-03-24T12:37:37.330

我建议只使用 ASP.Net。ASP 是一项如此古老的技术，以至于他们必须学习很多解决常见问题的方法。

我也会直接使用 ASP.Net 而不是 MVC，因为对于 MVC 的真正价值尚无定论（无论如何对我来说）。它需要开发人员进行大量控制。

# websphere - IBM Websphere Studio Application Developer 安装错误

> ID：339673
> 
> 赞同：0
> 
> 时间：2008-12-04T05:50:23.137
> 
> 标签：websphere

在 WinXP Pro 中安装 IBMWebsphere Studio Application Developer 5.1.2 时出现以下错误。

" WebSphere Studio 的安装无法继续，因为电子图像中缺少以下必需部件。下载所需部件并再次运行安装程序。

C571ILML.bin"

我正在从安装程序的本地硬盘（d:/temp/disk1、disk2、disk3 和 disk4）安装。

任何人都可以帮助我可能是什么问题以及如何解决这个问题以安装 IBM WAS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-04T08:08:29.193

两个问题。

1.  该文件是否存在于您的安装树中的任何位置？

2.  请再次检查，大多数代码只有 7 个字符。我发现的最接近的是 C57I1ML，但它是 Websphere Studio Site Developer 5.1.2 的一部分。而且，最重要的是，WSAD 5.1.2 似乎有 C80 前缀。

顺便说一句，我可以看到 IBM 内部网上的**任何地方都**没有 C571ILML 。

编辑：

适用于 Windows 的标准 Websphere Studio Application Developer 5.1.2在 IBM 的 Xtreme Leverage 站点上有**五个磁盘映像，它们是 C802XML、C802YML、C802ZML、C8030ML 和 C804UML。**

我怀疑您丢失的文件是由于您只有其中四个磁盘映像的内容。

您需要返回源并获取其他磁盘映像（或内容）。

或者，您可能拥有集成版，在这种情况下，我需要再次查看 - 请说明您拥有的是哪一个。

# javascript - 使用 javascript 编辑文件

> ID：339679
> 
> 赞同：0
> 
> 时间：2008-12-04T05:57:13.480
> 
> 标签：javascript

我需要使用 javascript 编辑一个 xml 文件。现在我参与了一个在线测试项目。

question.xml 文件已经在项目文件夹中。

在那我想添加或编辑问题（仅使用 javascript）。我能够通过 ajax 带来特定的内容，但我无法编辑文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T06:26:39.333

Javascript can't write to a file. The best you'll be able to do is get Javascript to read and edit the XML then post that data to a server-side script to write to file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T17:53:37.573

到目前为止，谷歌浏览器是唯一具有 FileSystem API 功能实现的网络浏览器，因此，它可能允许您仅使用 Javascript 在本地保存文件。

显然，出于安全原因，在将文件写入本地文件系统时，用户必须明确允许。

工作教程：[http ://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T06:45:23.853

Nickf is correct. The reason Javascript can't write to a file is because it is a [Client-Side](http://en.wikipedia.org/wiki/Client-side_scripting) language. Javascript will never have permission to write a file because it has to operate inside the browser sandbox.

You will need to use a server-side script (.NET, PHP, ColdFusion, etc) to write the file.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T07:08:15.507

如果您愿意使用[Google Gears](http://gears.google.com/)，您可以在客户端机器上获得一个沙箱，您可以在上面写入文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T07:12:26.823

Javascript 没有内置的文件 I/O（也就是你不能单独使用 JS）

而是将某种服务器端语言（例如 PHP 或 ASP.NET）与 Javascript 的 AJAX 功能结合使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T07:37:58.800

查看 Adob​​e 的 Flex 开发系统。您可以通过多种方式使用它来构建在浏览器中运行（或不在浏览器中）并可以访问文件系统（Windows/Mac/Linux）的应用程序。它是用 JavaScript 的方言 ActionScript 编写的；并且可以与浏览器中的javascript进行互操作。

# java - Java generics type erasure: when and what happens?

> ID：339699
> 
> 赞同：265
> 
> 时间：2008-12-04T06:13:02.247
> 
> 标签：java, generics, type-erasure

I read about Java's type erasure [on Oracle's website](https://docs.oracle.com/javase/tutorial/java/generics/erasure.html).

**When does type erasure occur?** At compile time or runtime? When the class is loaded? When the class is instantiated?

A lot of sites (including the official tutorial mentioned above) say type erasure occurs at compile time. If the type information is completely removed at compile time, how does the JDK check type compatibility when a method using generics is invoked with no type information or wrong type information?

Consider the following example: Say class `A` has a method, `empty(Box<? extends Number> b)`. We compile `A.java` and get the class file `A.class`.

```
public class A {
    public static void empty(Box<? extends Number> b) {}
} 
```

```
public class Box<T> {} 
```

Now we create another class `B` which invokes the method `empty` with a non-parameterized argument (raw type): `empty(new Box())`. If we compile `B.java` with `A.class` in the classpath, javac is smart enough to raise a warning. So `A.class` *has* some type information stored in it.

```
public class B {
    public static void invoke() {
        // java: unchecked method invocation:
        //  method empty in class A is applied to given types
        //  required: Box<? extends java.lang.Number>
        //  found:    Box
        // java: unchecked conversion
        //  required: Box<? extends java.lang.Number>
        //  found:    Box
        A.empty(new Box());
    }
} 
```

My guess would be that type erasure occurs when the class is loaded, but it is just a guess. So when does it happen?

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2008-12-04T06:21:18.550

Type erasure applies to the *use* of generics. There's definitely metadata in the class file to say whether or not a method/type *is* generic, and what the constraints are etc. But when generics are *used*, they're converted into compile-time checks and execution-time casts. So this code:

```
List<String> list = new ArrayList<String>();
list.add("Hi");
String x = list.get(0); 
```

is compiled into

```
List list = new ArrayList();
list.add("Hi");
String x = (String) list.get(0); 
```

At execution time there's no way of finding out that `T=String` for the list object - that information is gone.

... but the `List<T>` interface itself still advertises itself as being generic.

EDIT: Just to clarify, the compiler does retain the information about the *variable* being a `List<String>` - but you still can't find out that `T=String` for the list object itself.

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2011-01-04T01:46:25.853

编译器负责在编译时理解泛型。*在我们称为类型擦除*的过程中，编译器还负责丢弃对泛型类的这种“理解” 。一切都发生在编译时。

**注意：**与大多数 Java 开发人员的看法相反，可以保留编译时类型信息并在运行时检索此信息，尽管方式非常有限。换句话说：**Java 确实以非常有限的方式提供了具体化的泛型**。

## 关于类型擦除

请注意，在编译时，编译器具有可用的完整类型信息，但*通常*在生成字节码时故意删除此信息，该过程称为*类型擦除*。这样做是因为兼容性问题：语言设计者的目的是提供完整的源代码兼容性和平台版本之间的完整字节码兼容性。如果以不同的方式实现，则在迁移到新版本的平台时，您将不得不重新编译旧应用程序。这样做的方式是保留所有方法签名（源代码兼容性），您不需要重新编译任何东西（二进制兼容性）。

## 关于 Java 中的具体化泛型

如果需要保留编译时类型信息，则需要使用匿名类。关键是：在匿名类的非常特殊的情况下，可以在运行时检索完整的编译时类型信息，换句话说，这意味着：具体化的泛型。这意味着当涉及匿名类时，编译器不会丢弃类型信息；此信息保存在生成​​的二进制代码中，运行时系统允许您检索此信息。

我写了一篇关于这个主题的文章：

[https://rgomes.info/using-typetokens-to-retrieve-generic-parameters/](https://rgomes.info/using-typetokens-to-retrieve-generic-parameters/)

关于上面文章中描述的技术的注意事项是，该技术对于大多数开发人员来说是模糊的。尽管它工作得很好，但大多数开发人员对这项技术感到困惑或不舒服。如果您有共享代码库或计划向公众发布您的代码，我不推荐上述技术。另一方面，如果您是您的代码的唯一用户，您可以利用这项技术为您提供的强大功能。

## 示例代码

上面的文章有示例代码的链接。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2008-12-04T06:50:05.373

If you have a field that is a generic type, its type parameters are compiled into the class.

If you have a method that takes or returns a generic type, those type parameters are compiled into the class.

This information is what the compiler uses to tell you that you can't pass a `Box<String>` to the `empty(Box<T extends Number>)` method.

The API is complicated, but you can inspect this type information through the reflection API with methods like [`getGenericParameterTypes`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Method.html#getGenericParameterTypes()), [`getGenericReturnType`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Method.html#getGenericReturnType()), and, for fields, [`getGenericType`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Field.html#getGenericType()).

If you have code that uses a generic type, the compiler inserts casts as needed (in the caller) to check types. The generic objects themselves are just the raw type; the parameterized type is "erased". So, when you create a `new Box<Integer>()`, there is no information about the `Integer` class in the `Box` object.

[Angelika Langer's FAQ](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ001) is the best reference I've seen for Java Generics.

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-12-04T06:17:20.383

[Generics in Java Language](https://www.oracle.com/technetwork/java/javase/generics-tutorial-159168.pdf) is a really good guide on this topic.

> Generics are implemented by Java compiler as a front-end conversion called erasure. You can (almost) think of it as a source-to-source translation, whereby the generic version of `loophole()` is converted to the non-generic version.

So, it's at compile time. The JVM will never know which `ArrayList` you used.

I'd also recommend Mr. Skeet's answer on [What is the concept of erasure in generics in Java?](https://stackoverflow.com/questions/313584/what-is-the-concept-of-erasure-in-generics-in-java)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-07-31T12:50:26.180

术语“类型擦除”并不是对 Java 泛型问题的正确描述。类型擦除本身并不是一件坏事，实际上它对于性能非常必要，并且经常用于 C++、Haskell、D 等多种语言中。

在你反感之前，请回忆一下[维基百科中类型擦除的正确定义](https://en.wikipedia.org/wiki/Type_erasure)

**什么是类型擦除？**

> 类型擦除是指加载时过程，在程序运行时执行之前，通过该过程从程序中删除显式类型注释

类型擦除意味着丢弃在设计时创建的类型标签或在编译时推断的类型标签，使得二进制代码中的编译程序不包含任何类型标签。对于编译为二进制代码的每种编程语言都是这种情况，除非在某些情况下您需要运行时标记。这些例外包括例如所有存在类型（可子类型的 Java 引用类型、许多语言中的任何类型、联合类型）。类型擦除的原因是程序被转换为某种单一类型的语言（二进制语言只允许位），因为类型只是抽象，并为其值断言结构和处理它们的适当语义。

所以这是作为回报，很自然的事情。

Java 的问题是不同的，并且是由它具体化的方式引起的。

关于 Java 没有具体化泛型的经常发表的声明也是错误的。

Java 确实实现了具体化，但由于向后兼容性而采用了错误的方式。

**什么是物化？**

来自[维基百科](https://en.wikipedia.org/wiki/Reification_(computer_science))

> 物化是将关于计算机程序的抽象概念转化为显式数据模型或以编程语言创建的其他对象的过程。

具体化是指通过专业化将抽象的东西（参数类型）转换为具体的东西（具体类型）。

我们通过一个简单的例子来说明这一点：

具有定义的 ArrayList：

```
ArrayList<T>
{
    T[] elems;
    ...//methods
} 
```

是一个抽象，详细来说是一个类型构造函数，当使用具体类型专门化时，它会被“具体化”，比如 Integer：

```
ArrayList<Integer>
{
    Integer[] elems;
} 
```

where`ArrayList<Integer>`真的是一个类型。

但这**正是**Java**没有的东西！！！**，相反，它们用它们的界限不断地具体化抽象类型，即产生相同的具体类型，而与传入的参数无关以进行专门化：

```
ArrayList
{
    Object[] elems;
} 
```

这里用隐式绑定对象（`ArrayList<T extends Object>`== `ArrayList<T>`）具体化。

尽管它使泛型数组无法使用并导致原始类型出现一些奇怪的错误：

```
List<String> l= List.<String>of("h","s");
List lRaw=l
l.add(new Object())
String s=l.get(2) //Cast Exception 
```

它会引起很多歧义，因为

```
void function(ArrayList<Integer> list){}
void function(ArrayList<Float> list){}
void function(ArrayList<String> list){} 
```

参考相同的功能：

```
void function(ArrayList list) 
```

因此泛型方法重载不能在 Java 中使用。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-12-04T06:29:35.210

Type erasure occurs at compile time. What type erasure means is that it will forget about the generic type, not about every type. Besides, there will still be metadata about the types being generic. For example

```
Box<String> b = new Box<String>();
String x = b.getDefault(); 
```

is converted to

```
Box b = new Box();
String x = (String) b.getDefault(); 
```

at compile time. You may get warnings not because the compiler knows about what type is the generic of, but on the contrary, because it doesn't know enough so it cannot guarantee type safety.

Additionally, the compiler does retain the type information about the parameters on a method call, which you can retrieve via reflection.

This [guide](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ001) is the best I've found on the subject.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-14T12:47:33.303

我在 Android 中遇到过类型擦除。在生产中，我们使用带有 minify 选项的 gradle。缩小后，我遇到了致命的异常。我制作了简单的函数来显示我的对象的继承链：

```
public static void printSuperclasses(Class clazz) {
    Type superClass = clazz.getGenericSuperclass();

    Log.d("Reflection", "this class: " + (clazz == null ? "null" : clazz.getName()));
    Log.d("Reflection", "superClass: " + (superClass == null ? "null" : superClass.toString()));

    while (superClass != null && clazz != null) {
        clazz = clazz.getSuperclass();
        superClass = clazz.getGenericSuperclass();

        Log.d("Reflection", "this class: " + (clazz == null ? "null" : clazz.getName()));
        Log.d("Reflection", "superClass: " + (superClass == null ? "null" : superClass.toString()));
    }
} 
```

这个函数有两个结果：

未缩小的代码：

```
D/Reflection: this class: com.example.App.UsersList
D/Reflection: superClass: com.example.App.SortedListWrapper<com.example.App.Models.User>

D/Reflection: this class: com.example.App.SortedListWrapper
D/Reflection: superClass: android.support.v7.util.SortedList$Callback<T>

D/Reflection: this class: android.support.v7.util.SortedList$Callback
D/Reflection: superClass: class java.lang.Object

D/Reflection: this class: java.lang.Object
D/Reflection: superClass: null 
```

缩小代码：

```
D/Reflection: this class: com.example.App.UsersList
D/Reflection: superClass: class com.example.App.SortedListWrapper

D/Reflection: this class: com.example.App.SortedListWrapper
D/Reflection: superClass: class android.support.v7.g.e

D/Reflection: this class: android.support.v7.g.e
D/Reflection: superClass: class java.lang.Object

D/Reflection: this class: java.lang.Object
D/Reflection: superClass: null 
```

因此，在缩小的代码中，实际的参数化类被替换为没有任何类型信息的原始类类型。作为我项目的解决方案，我删除了所有反射调用并用函数参数中传递的显式参数类型替换它们。

# ruby-on-rails - 参数名称和值（独立）作为 Rails Route 的一部分

> ID：339706
> 
> 赞同：1
> 
> 时间：2008-12-04T06:19:37.883
> 
> 标签：ruby-on-rails, routes

DocumentsController#common_query 可以处理多种不同的请求样式。

即第 4 批中的所有文档或所有标记为“快乐”的文档

我想要一条让它们漂亮的路线，所以：

/documents/common_query?batch=4

/documents/common_query?tag=happy

变得：

/文件/批次/4

/文件/标签/快乐

所以最终结果是调用了#common_query，但部分 url 被用作参数名称，部分被用作它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T11:20:46.247

第二个选项，有两个路由，几乎可以肯定是更好的方法，因为它只会匹配你想要支持的 URL 类型，而第一个选项也会“匹配”像 /documents/foo/bar 这样的 URL，这可能会导致您的 #common_query 方法最多返回 RecordNotFound (404) 响应。在最坏的情况下，如果您还没有准备好看不到任何预期的参数，那么您将收到 500 错误...

当然，如果你开始有很多变化，你最终会得到很多路线。如果您需要组合使用它们，例如/documents/batch/4/tag/happy，那么您需要使用通配符路由，并在控制器中进行参数处理。这可能看起来像：

```
map.connect 'documents/*specs', :controller => "documents_controller", :action => "common_query" 
```

URL 的各种元素将作为 params[:specs] 提供给您的控制器。你可以把它变成这样的发现：

```
@items = Item.find(:all, :conditions => Hash[params[:specs]]) 
```

Hash[] 技术将选项的一维数组转换为键值哈希，即使您不直接将其提供给 find()，这也可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T08:16:46.820

作为单一路线：

```
ActionController::Routing::Routes.draw do |map|
  map.connect "documents/:type/:id", :controller => "documents_controller", 
              :action => "common_query"
end 
```

那么`params[:type]`要么是`"batch"`or `"tag"`，`params[:id]`要么是`"4"`or `"happy"`。您必须确保`DocumentsController`路由中的其他操作在此之前，因为这将匹配任何看起来像`"documents/*/*"`.

但为什么它必须是单条路线？您可以像这样使用两条路线：

```
map.with_options(:controller => "documents_controller", 
                 :action => "common_query") do |c|
  c.connect "documents/batch/:page", :type => "batch"
  c.connect "documents/tag/:tag",    :type => "tag"
end 
```

这将具有相同的效果，但更具体，因此您不必担心路线的优先顺序。

# c# - What is the equivalent of Java's AbstractMap in C#?

> ID：339709
> 
> 赞同：3
> 
> 时间：2008-12-04T06:21:23.353
> 
> 标签：c#, java, collections, dictionary

I need to create an object which exposes an `IDictionary<K,V>` interface, but I don't want to fill in the entire interface implemntation.

It would be nice to have the equivalent of Java's AbstractDictionary, which leaves you very little to impelment a complete dictionary (HashMap, in Java):

*   If you don't need to iterate the collection, you have a single method to implement (TryGetValue)
*   If you want it to be writeable, you implement another entry (Add).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T08:00:15.450

Wintellect 的[PowerCollections 库](http://www.codeplex.com/PowerCollections)包括一个实现大部分标准 IDictionary<K, V> 接口的`DictionaryBase`类（[源代码）。](https://powercollections.svn.codeplex.com/svn/Source/PowerCollections/DictionaryBase.cs)从班级的文档评论中：

> DictionaryBase 是一个基类，可用于更轻松地实现泛型 IDictionary<T> 和非泛型 IDictionary 接口。
> 
> 要将 DictionaryBase 用作基类，派生类必须覆盖 Count、GetEnumerator、TryGetValue、Clear、Remove 和索引器集访问器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T07:09:45.363

`System.Collections.Generic`命名空间包含`IDictionary<K,V>`:`Dictionary<TKey, TValue>`和.`SortedDictionary<TKey, TValue>`的三个实现`SortedList<TKey, TValue>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T07:52:51.080

如果我正在构建自己的字典类，我会从 System.Collections.ObjectModel.KeyedCollection 继承。

为所有不了解 API 设计的人编辑。

您永远不应该从公共属性或函数返回通用列表或字典。Insead 你应该返回一个专门为此目的而构建的类。这样，您以后可以向其添加其他功能。

```
Dictionay<integer, Order> Orders() {get;}
CustomerOrders Orders() {get;} 
```

在第二个版本中，您可以添加 Total 属性并让用户实际找到它。

理论上，您可以返回添加 Total 属性的 Dictionary 的子类，但是用户必须 A. 知道您正在执行此操作，并且 B. 包含强制转换才能访问该属性。

# .net - 将样式应用于大量项目的最佳方法是什么？

> ID：339710
> 
> 赞同：3
> 
> 时间：2008-12-04T06:21:40.640
> 
> 标签：.net, wpf, styles

在我的 LOB 应用程序中，我通常使用包含大量不同文本块和文本框的容器来供用户输入数据。通常我需要对每个控件应用一定的边距或垂直/水平对齐。

假设我的表单上有 Grid，看起来像这样（为简洁起见，删除了很多标记）：

```
<Grid>
   <Grid.ColumnDefinitions.../>
   <Grid.RowDefinitions.../>

   <TextBlock Text="MyLabel" />
   <TextBox Text={Binding ...}/>
   .
   '
   <!-- Repated a bunch more times along with all of the Grid.Row, Grid.Column definitions -->
</Grid> 
```

现在假设我需要网格中包含的每个项目都具有 Margin="3,1" VerticalContentAlignment="Left" VerticalAlignment="Center"。有几种方法可以实现这一点：

1.  直接在每个控件上设置属性 - 糟糕！不允许蒙皮或集中样式。
2.  使用 x:Key="MyStyleName" 创建一个样式并将该样式应用于每个控件。更好...使集中样式和蒙皮更易于管理，但仍需要大量标记，并且可能变得笨拙。
3.  创建全局样式（即不指定 x:Key 并设置 TargetType={x:Type TextBox/TextBlock} - 不好！！这样做的问题是它会影响应用程序中未明确覆盖的所有控件这种风格。这对于菜单、网格和其他使用文本块和文本框的控件可能很糟糕。
4.  创建一个以 Grid 为目标的样式，并明确设置依赖属性值，例如`<Setter Property="Frameworkelement.Margin" Value="3,1" />`Not bad...它将样式正确应用于其内容中的每个元素，但也将其直接应用于 Grid 本身...不完全是我想要的。

那么你采取什么方法，为什么？什么效果最好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T16:36:28.137

您可以将“全局”样式放`Resources`入网格部分，从而限制其影响。要在不同位置重用“全局”样式，请将它们放入非默认资源字典并将其包含为`MergedDictionary`：

在`Styles.xaml`：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style x:Key="{x:Type ...}"> ... </Style>
</ResourceDictionary> 
```

形式：

```
<Grid>
   <Grid.ColumnDefinitions.../>
   <Grid.RowDefinitions.../>

    <Grid.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <!-- other resources here -->

        </ResourceDictionary>
    </Grid.Resources>

    ...
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T08:24:59.097

您可以使用#4，然后在 Grid 本身上显式覆盖这些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T16:19:24.567

看一下这个。

[http://karlshifflett.wordpress.com/2008/10/23/wpf-silverlight-lob-form-layout-searching-for-a-better-solution/](http://karlshifflett.wordpress.com/2008/10/23/wpf-silverlight-lob-form-layout-searching-for-a-better-solution/)

我发现它们对 LOB 应用程序有很大帮助。该源是可用的，因此即使您不使用该库，您也可以了解如何进行全局样式设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-11T02:44:08.357

这是我使用附加属性提出的解决方案：

[编码上下文文章](http://codingcontext.wordpress.com/2008/12/11/solution-styling-a-large-amount-of-controls/)

# zend-framework - 如何使用 Zend_Db_Select 创建 WHERE IN 子句

> ID：339714
> 
> 赞同：68
> 
> 时间：2008-12-04T06:26:24.703
> 
> 标签：zend-framework, zend-db

所以我试图完成这样的事情：

```
SELECT * FROM table WHERE status_id IN (1,3,4); 
```

使用 Zend_Db_Select... 找不到怎么做 :( 有可能吗？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2008-12-12T12:28:44.253

你也可以像这样使用它：

```
$data = array(1,3,4);
$select->where('status_id IN(?)', $data); 
```

你不需要内爆数组，而且更安全

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-27T09:45:22.693

第一个答案可能适用于 ZF1，但不适用于 Zend Framework 2：

```
$data = array(1,3,4);
$select->where('status_id IN(?)', $data); 
```

如果 Zend Framework2 我发现你必须使用：

```
$data = array(1,3,4);
$select->where(array('status_id' => $data)); 
```

结果：

```
WHERE `status_id` IN ('1', '3', '4') 
```

我在任何地方都找不到这个记录！ZF 文档通常不是最佳的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-04T06:28:45.290

显然它非常简单......愚蠢的我：

```
$select->where('status_id IN(1,3,4)'); 
```

:(

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-19T07:07:48.970

我们可以使用`Zend\Db\Sql\Predicate\In`with**在模型内部进行**`Zend\Db\Sql\Where`查询。

 **```
$this->status_ids = array(1,3,4);

// select attributes from db by where in 
$result = $this->select(function (Select $select) {
   $predicate = new In();
   $select->where(
      $predicate->setValueSet($this->status_ids)
                ->setIdentifier('status_id')
      );
})->toArray(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-02T12:58:06.373

```
This solution works well with zf2     
 $ids = array('1', '2', '3', '4', '5', '6', '7', '8');
 $select->where(array("app_post_id"=> $ids)); 
```

或者

```
 $ids = array('1', '2', '3', '4', '5', '6', '7', '8');
    $sql = new Sql($this->adapter);
        $select = $sql->select();
        $select->from('app_post_comments');
        $select->where(array("app_post_id"=> $ids));

//        echo $select->getSqlString($this->adapter->getPlatform());
//        exit;
        $statement = $sql->prepareStatementForSqlObject($select);
        $result = $statement->execute();
        $resultSet = new ResultSet();
        $resultSet->initialize($result);
        $resultSet->buffer()->toArray();
        echo '<pre>';
        print_r($resultSet);
        exit;
        return $resultSet; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T13:02:31.983

```
$completionNo = implode(",",$data);

$db = Zend_Db_Table_Abstract::getDefaultAdapter();
$select = $db->select()->from(array("p"=>PREFIX . "property_master"),array('id','completion_no','total_carpet_area'))->where("p.completion_no IN (?)", $completionNo); 
```

# haskell - quotRem 和 divMod 的区别在什么时候有用？

> ID：339719
> 
> 赞同：46
> 
> 时间：2008-12-04T06:29:33.743
> 
> 标签：haskell, division

从haskell报告中：

> 如果 y 不为零，则 quot、rem、div 和 mod 类方法满足这些定律：
> 
> ```
> (x `quot` y)*y + (x `rem` y) == x
> (x `div`  y)*y + (x `mod` y) == x 
> ```
> 
> `quot`是整数除法向零截断，而结果`div` 是向负无穷大截断。

例如：

```
Prelude> (-12) `quot` 5
-2
Prelude> (-12) `div` 5
-3 
```

有哪些例子可以说明截断结果的方式之间的差异很重要？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-12-04T07:52:36.930

许多语言都有一个“mod”或“%”运算符，它给出除法后的余数，并截断为 0；例如 C、C++ 和 Java，可能还有 C#，会说：

```
(-11)/5 = -2
(-11)%5 = -1
5*((-11)/5) + (-11)%5 = 5*(-2) + (-1) = -11. 
```

Haskell 的`quot`和`rem`旨在模仿这种行为。我可以想象在某些人为的情况下可能需要与某些 C 程序的输出兼容。

Haskell 的`div`and`mod`以及随后的 Python 的 / 和 % 遵循数学家（至少是数论家）的惯例，总是将除法截断*（*而不是朝向 0 - 朝向负无穷大），因此余数总是非负的。因此在 Python 中，

```
(-11)/5 = -3
(-11)%5 = 4
5*((-11)/5) + (-11)%5 = 5*(-3) + 4 = -11. 
```

Haskell`div`并`mod`遵循这种行为。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-12-04T22:53:20.357

这不完全是您问题的答案，但在 x86 上的 GHC 中，Int 上的 quotRem 将编译为单个机器指令，而 divMod 做了更多的工作。因此，如果您处于对速度至关重要的部分并且只处理正数，那么 quotRem 是要走的路。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-04T07:00:36.910

一个重要的简单示例是测试整数是偶数还是奇数。

```
let buggyOdd x = x `rem` 2 == 1
buggyOdd 1 // True
buggyOdd (-1) // False (wrong!)

let odd x = x `mod` 2 == 1
odd 1 // True
odd (-1) // True 
```

请注意，当然，您可以通过以这种方式定义奇数来避免考虑这些问题：

```
let odd x = x `rem` 2 /= 0
odd 1 // True
odd (-1) // True 
```

一般来说，请记住，对于`y > 0`，`x mod y`总是返回一些东西`>= 0`，而`x rem y`返回 0 或与 x 符号相同的东西。

# .net - Provide version to only the Prerequisites in clickonce

> ID：339721
> 
> 赞同：1
> 
> 时间：2008-12-04T06:30:25.457
> 
> 标签：.net, deployment, clickonce

I am deploying an application, where I need to add two prerequisites. My problme is that I need someway to provide version to the prerequisites so that in the future may be I could only update the prerequisites without updating the entire application.

Thank You Sunil Chaudhary

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T15:09:10.340

安装先决条件不是 ClickOnce 的一部分。ClickOnce 是关于将 .NET 应用程序部署到用户的配置文件。它无法运行 msi 文件、编辑注册表等。

由于部署过程在 Visual Studio 中的工作方式，对此存在很多混淆。在 VS 中，您可以选择先决条件，它将为您构建引导程序安装。但是，这整个功能实际上与 ClickOnce 无关，它只是捆绑您的先决条件的一种快速方法。它甚至没有对版本控制做任何智能。它所做的只是说：“请在为 .NET 应用程序运行 ClickOnce 安装之前安装它。” 这完全取决于用户。

一种选择是编写自定义代码以获得您想要的行为。我使用需要运行 msi 文件的第三方报告工具来执行此操作。在我的应用程序启动后，我检查了注册表以查看应用程序是否已安装，提示用户，在后台下载必要的文件，然后运行安装。一个主要的痛苦，但只要您的应用程序最初可以在没有先决条件的情况下启动，就可行。但是，请记住安全限制。许多安装要求用户成为管理员。ClickOnce 的一大优势是用户*不必*是管理员。

# gif - 如何在 vc++ 6.0 和 vc++ 2005 中获得 GIF Transparency 颜色

> ID：339722
> 
> 赞同：2
> 
> 时间：2008-12-04T06:31:05.567
> 
> 标签：gif

如何在 vc++ 6.0 和 vc++ 2005 中获得 GIF Transparency 颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T06:43:52.153

请参阅[GIF 规范](http://www.martinreddy.net/gfx/2d/GIF89a.txt)。GIF 有多达 256 种可能颜色的调色板。背景颜色的调色板索引位于文件开头的偏移量 11 处，由一个字节组成（值 0-255）。要找到它对应的实际颜色，请在全局颜色表中查找该颜色。有关如何解析全局颜色表的更多信息，请参阅规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T11:24:21.863

我刚刚实现了 GIF 解码器。以下是详细信息 - 万一

if(Graphics_Render_Block->transperencyflag) FrameInfo->transperencyindex=Graph_Renderblk.Transp_Clr_Index; 否则 FrameInfo->transperencyindex='\0';

逻辑很简单。在渲染到显示器上时，如果 transperencyindex == 该点的颜色，则不要渲染它。在面对，移动到下一个位置。

这是我的显示代码片段——我使用的是 Linux Framebuffer，但该逻辑也适用于 Microsoft VC。注意，这里我忽略了逻辑屏幕描述符。

```
void Display(FrameData *FrameInfo)
{

    /*short int ImageStartX = 0;
    short int ImageStartY = 0; */
    unsigned int ImageStartX = 0;
    unsigned int ImageStartY = 0;
    int Index = 0;

    printf("\r\n INFO: Display Called.\r\n");

    while(1)
    {

        Index = 0;
        ImageStartX = (FrameInfo->frameScreenInfo.LeftPosition);
        ImageStartY = (FrameInfo->frameScreenInfo.TopPosition);

        while(ImageStartY < ((FrameInfo->frameScreenInfo.ImageHeight)+(FrameInfo->frameScreenInfo.TopPosition)))
        {

            while(ImageStartX < ((FrameInfo->frameScreenInfo.ImageWidth)+(FrameInfo->frameScreenInfo.LeftPosition)))
            {
                if(FrameInfo->frame[Index] != FrameInfo->transperencyindex)
                {
                  #ifndef __DISPLAY_DISABLE
                  SetPixel(local_display_mem,ImageStartX,ImageStartY,((FrameInfo->CMAP)+(FrameInfo->frame[Index]))->Red,((FrameInfo->CMAP)+(FrameInfo->frame[Index]))->Green,((FrameInfo->CMAP)+(FrameInfo->frame[Index]))->Blue);
                  #endif

                   #ifdef DEBUG
                   count++;
                   #endif

                }

                Index++;
                ImageStartX++;
            }

            ImageStartY++;

            ImageStartX=(FrameInfo->frameScreenInfo.LeftPosition);

        }

        #ifdef DEBUG
        printf("INFO:..Dumping Framebuffer\r\n");
        printf("Pixel hit=%d\r\n",count);
        count = 0;
        printf("the Frameinfo.leftposition=%d FrameInfo->frameScreenInfo.topposition=%d\r\n",FrameInfo->frameScreenInfo.LeftPosition,FrameInfo->frameScreenInfo.TopPosition);
        printf("the Frameinfo.ImageWidth=%d FrameInfo->frameScreenInfo.ImageHeight=%d\r\n",FrameInfo->frameScreenInfo.ImageWidth,FrameInfo->frameScreenInfo.ImageHeight);
        #endif

       #ifndef __DISPLAY_DISABLE
       memcpy(fbp,local_display_mem,screensize);
       #endif

        /** Tune this multiplication to meet the right output on the display **/
        usleep((FrameInfo->InterFrameDelay)*10000);

        if( FrameInfo->DisposalMethod == 2)
        {
            printf("set the Background\r\n");
            #ifndef __DISPLAY_DISABLE
            SetBackground(FrameInfo);
            #endif
        }
        FrameInfo = FrameInfo->Next;

     }

} 
```

我使用的设计是解码所有帧，并制作一个单循环链接列表。现在，继续显示帧。您可以从以下链接下载解码器逻辑和详细信息 - [http://www.tune2wizard.com/gif-decoder/](http://www.tune2wizard.com/gif-decoder/)

# svn - SVN merge problem with "svn:mergeinfo" property

> ID：339724
> 
> 赞同：0
> 
> 时间：2008-12-04T06:34:58.320
> 
> 标签：svn, merge

I have one big problem with merging - it falls on start with strange message: "Server sent unexpected return value (401 Authorization Required) in responce to PROPFIND request for '/svn/autogroup_projects/.../Data.sln'".

Really that folder is not exists in the branch, but we had it in trunc (it modificated separately). And that file is only one with property "svn:mergeinfo" and value is blank. And of course I have access to the SVN - 401 error code is very strange for me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T06:37:15.337

Has the server been upgraded to SVN version 1.5.x? And more importantly, has the [repository format been upgraded to match](http://svnbook.red-bean.com/en/1.5/svn.ref.svnadmin.c.upgrade.html)?

# svn - 如何将 HEAD 更改为以前的版本

> ID：339727
> 
> 赞同：17
> 
> 时间：2008-12-04T06:39:25.020
> 
> 标签：svn, tortoisesvn

我们遇到了有人搞砸了对我们 SVN 服务器的提交的情况。很多文件被删除等等。

**问题：**使以前的（对错误的 Commit）修订成为 HEAD 修订的技术是什么？我在这里看到了关于 SO 为 1 个文件执行此操作的讨论，但我们想让它就像最后一次提交从未发生过一样。有任何想法吗？

所有这些答案似乎都是正确的。我将 abatishchev 的答案标记为正确答案只是因为我使用的是 Tortoise SVN，而且这是我实际使用的方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-04T06:47:47.780

最干净的方法是[撤消更改](http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.branchmerge.basicmerging.undo)

> 您可以使用 svn merge 来“撤消”工作副本中的更改，然后将本地修改提交到存储库。您需要做的就是指定反向差异。（您可以通过指定`--revision 303:302`或等效的 来做到这一点`--change -303`。）

我意识到它并没有“让它像最后一次提交从未发生过”，因为提交仍然是历史的一部分，但我相信最好将那个错误的提交保留在历史中。
它可能包括一些可以查询/比较的正在进行的工作，以便轻松地重新进行新的正确提交。

* * *

即使：

*   SVN（1.5）手册提到了一个未来的`obliterate`命令，它将完成永久删除信息的任务，并且
*   提到[`svndumpfilter`](http://svnbook.red-bean.com/en/1.0/ch05s03.html#svn-ch-5-sect-3.1.3)一个可能的解决方法（因为它提供了通过充当基于路径的过滤器来快速轻松地修改该转储文件数据的能力）

... 最好不要尝试将 SCM 工具扭曲成原本不打算做的事情。
历史化（以及带有分支的并行化）是 SCM 的两个主要特征。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-04T06:50:29.800

也许您可以显示日志，检查以前的修订版（n-1），在上下文菜单中选择恢复到此修订版并提交更改（它将变为 n+1，其中 n 是当前的坏头）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T06:42:57.960

您可以使用`svnadmin dump`和来做到这一点`svnadmin load`。这是一种蛮力的方法，但我相信这是唯一的方法。

这个问题的答案可能会有所帮助：[Nuking huge file in svn repository](https://stackoverflow.com/questions/80833/nuking-huge-file-in-svn-repository)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T06:53:55.677

您可以 svn cp 特定版本，因此如果没有要保存的干预操作，您可以 svn rm 有问题的目录，然后 svn cp 旧版本。请参阅[本书的 Peg 和 Operative Revision 部分](http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.advanced.pegrevs)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T07:42:22.447

使用 TortoiseSVN，如果您只想查看提交之前版本的存储库：

*   使用 TortoiseSVN 存储库浏览器打开 URL。
*   请注意该提交的修订号，然后通过单击右上角的按钮将 HEAD 更改为该数字 - 1。

[![在此处输入图像描述](https://i.stack.imgur.com/rlEQZ.png)](https://i.stack.imgur.com/rlEQZ.png)

# javascript - Transferring sensitive information from javascript to rails

> ID：339732
> 
> 赞同：1
> 
> 时间：2008-12-04T06:42:41.173
> 
> 标签：javascript, ruby-on-rails

I am currently writing a Firefox extension that will sync your tab sessions across different instances of the browser. I am using a Ruby on Rails web application to sync the different URLS for each user.

The Firefox extension is using Javascript to parse out the current websites that are open. I need to send a user's login name, password, and the list of open URLs to the Rails application securely from Javascript.

Is there a way to transfer this information to the Rails app from Javascript without compromising the password?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T06:54:08.920

Is there a reason it wouldn't work to use https?

# java - Possible to duplicate current java stack using JNI

> ID：339735
> 
> 赞同：2
> 
> 时间：2008-12-04T06:43:43.607
> 
> 标签：java, java-native-interface

I am trying to record the arguments passed to a method before it is called using bytecode instrumentation.

Currently while instrumenting using java code I have to first pop all the args into a locals, then push them again twice (once for my method which will record and in this case all primitive types have to be converted to their boxed types, and once for the actual method call).

What I would ideally like to do is just duplicate the entire stack for the num of args pushed for the method call. However the jvm bytecode's dup() instruction only allows duplicating the topmost value of the stack. Is it possible using JNI to somehow duplicate the entire stack in one go?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T14:09:33.893

不，当编译方法时堆栈有效地消失了。JVM 无法编译本机代码。因此，即使您确实尝试直接操作堆栈，它也会即时更改格式（并使用寄存器）。

您可以相当容易地复制堆栈的前四个插槽（使用 dup2_x2），但如果再进一步，您可能需要使用局部变量。

# sql - Split SQL statements blocks using Regular expression in C#

> ID：339739
> 
> 赞同：0
> 
> 时间：2008-12-04T06:45:50.980
> 
> 标签：sql, regex

Can we write an regular expression such that it splits the stored procedure in multiple SQL statements. It should split update, delete select etc statements.

Edit: my attempt to solve the problem [http://tsqlparsergdr.codeplex.com/](http://tsqlparsergdr.codeplex.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T07:12:32.330

如果您有存储过程语言的语法，则可以使用[ANTLR](http://www.antlr.org/)解析过程以获取语言的相关部分并进行必要的进一步处理。从头开始学习语法也应该相对容易。

需要一组正则表达式来处理整个过程。即一个正则表达式来马赫只是插入可能跨越多行的语句，并且可能有来自proc的局部变量等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T08:03:09.407

如果您正在使用一组已知的 SQL 过程，则应该很容易检查它们并提出一组正则表达式来根据需要拆分它们。

如果您正在寻找可以处理任何可能的 SQL 过程集的东西，那么正则表达式不会破解它！SQL 有一个复杂的递归语法，并且总会有一些子选择、分组依据或文字会破坏基于正则表达式的解析器。

正如之前的海报所建议的那样，您确实需要一个完整的解析器，例如可以由 ANTLR 或 Javacc 生成（是否有 C# 等效项？）。

网上有许多 SQL-92 语法定义可用于这些解析器生成器，因此大部分工作已经为您完成 - 其余部分 - 编写解析器应用程序逻辑 - 仍然远非微不足道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T08:24:11.640

要解析任意存储过程，最好使用 SQL 解析器。尝试使用正则表达式解析任意 SQL 相当于编写自己的解析器。

要解析一组特定的存储过程，正则表达式可能能够完成这项工作。如果您想要更详细的答案，您需要提供一些输入示例和所需输出。

# asp.net - 寻找将 Lucene.net 与 ASP.NET 结合使用的示例

> ID：339740
> 
> 赞同：19
> 
> 时间：2008-12-04T06:47:13.583
> 
> 标签：asp.net, lucene.net

在asp.net中如何实现Lucene.net的搜索功能？如果可能，请提供链接或示例代码。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2010-12-15T23:36:27.133

这里有一个很棒的博客系列：

1.  [Lucene.NET](https://web.archive.org/web/20131229052210/http://www.devatwork.nl/articles/lucenenet)
2.  [Lucene 简介](https://web.archive.org/web/20131031102410/http://www.devatwork.nl/articles/lucenenet/introduction-to-lucenenet-lucenenet/)
3.  [索引基础知识](https://web.archive.org/web/20131031102255/http://www.devatwork.nl/articles/lucenenet/indexing-basics-lucenenet/)
4.  [搜索基础知识](https://web.archive.org/web/20131031102439/http://www.devatwork.nl/articles/lucenenet/search-basics-lucenenet/)
5.  [替代品（你是说……）](https://web.archive.org/web/20131231031913/http://www.devatwork.nl/articles/lucenenet/alternatives-did-you-mean-lucenenet/)
6.  [分面搜索/向下钻取](https://web.archive.org/web/20131031102405/http://www.devatwork.nl/articles/lucenenet/faceted-search-and-drill-down-lucenenet/)
7.  [类参考](https://web.archive.org/web/20131031102400/http://www.devatwork.nl/articles/lucenenet/class-reference-lucenenet/)

我还发现了另一个名为[SimpleLucene](https://web.archive.org/web/20150428223648/http://blogs.planetcloud.co.uk/mygreatdiscovery/?tag=/lucenenet)的项目，您可以在需要更新或删除文档时使用它来维护 lucene 索引。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-05T12:26:17.437

我认为[mojoPortal](http://www.mojoportal.com/) (ASP.NET CMS) 使用 Lucene.NET。

另一个很好的例子[cuyahoga](http://www.cuyahoga-project.org/)也使用了 NHibernate。

你可以看看他们的来源...

[额外的代码项目链接](http://www.codeproject.com/KB/library/IntroducingLucene.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-05T17:06:14.283

请务必查看 LINQ to Lucene。它的功能并不完整，但它确实让入门变得容易得多：http: [//www.codeplex.com/linqtolucene](http://www.codeplex.com/linqtolucene)

# database - 存储过程比 SQL 更好的语言

> ID：339744
> 
> 赞同：10
> 
> 时间：2008-12-04T06:49:04.703
> 
> 标签：database, stored-procedures

使用诸如 Transact-SQL 或 PL/SQL 之类的语言将某些业务逻辑实际提交到存储过程所需的限制和冗长，我越来越感到沮丧。我很想将一些当前的数据库转换为 Oracle 并利用它对 Java 存储过程的支持，但该选项目前不可用。

对于支持其他语言的存储过程的数据库，您会推荐哪些替代方案？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-12-04T08:16:44.153

在数据库管理器中使用更智能的查询语言存在一些架构障碍。主要的是查询优化器。SQL 的设计限制之一是它只能使用查询优化器可以访问的结构。这意味着该语言及其功能与查询执行引擎和查询计划优化器的功能紧密耦合。

另一个主要的设计约束是数据库系统的机械性质——数据库编程几乎是独一无二的，因为它有一个机械组件。查询性能受到磁盘磁头寻道和旋转延迟（所需数据到达磁头下的等待时间）的机械约束。

这有效地排除了许多可能使 SQL 更强大或更易于使用的巧妙抽象。许多数据库管理系统通过可用于编写脚本的过程替代方案来补充 SQL。但是，它们通过执行由优化器单独处理的一系列 SQL 查询来与 DBMS 交互。各种 DBMS 平台附带的这种类型的一些语言是：

*   [Oracle 的](http://www.oracle.com) [PL/SQL](http://en.wikipedia.org/wiki/PL_SQL)和 [嵌入式 Java](http://www.developer.com/db/article.php/3337411)。PL/SQL 实际上是基于 Ada 的——按照现代标准，它是相当“老派”的，并且具有必须保持向后兼容的遗留代码库。它不一定是最令人愉快的编程环境，但它确实具有诸如并行性和相当灵活的类型系统等设施的构造。对 Oracle 上的 Java 存储过程的主要批评之一是，您在运行 JVM 的 CPU 上为 Oracle 基于容量的许可付费。

*   SQL Server [CLR 集成](http://msdn.microsoft.com/en-us/library/ms345136.aspx)。有点类似于 Oracle 的 Java 存储过程，这允许从 C#（或任何 .net 语言）编译的 CLR 模块加载到 SQL Server 实例中，并以与存储过程大致相同的方式执行。SQL Server 还具有 PostgreSQL 风格的 API，用于通过 CLR 集成和其他用于混合 SQL/CLR 代码库的挂钩来制作自定义聚合函数。

*   [PostgreSQL](http://www.postgresql.org/)实际上是最初开发后端语言集成的系统。该系统导出一个[本地 C API](http://www.postgresql.org/docs/8.3/static/server-programming.html)，具有用于自定义聚合函数、存储引擎、过程扩展和其他功能的设施。 [语言接口](http://www.postgresql.org/docs/8.3/static/xplang.html) 基于此 API，包括： [PL/pgSQL](http://www.postgresql.org/docs/8.3/static/plpgsql.html)（一种类似于 PL/SQL 的定制语言）、[Python](http://www.postgresql.org/docs/8.3/static/plpython.html)、[Perl](http://www.postgresql.org/docs/8.3/static/plperl.html) 和[Tcl](http://www.postgresql.org/docs/8.3/static/pltcl.html)。

    这通过[Illustra](http://en.wikipedia.org/wiki/Illustra)成为主流，这是 Postgres 的商业化版本，随后被 Informix 收购（随后被 IBM 收购）。主要功能已纳入 [Informix On-Line](http://www-01.ibm.com/software/data/informix/)，仍然由 IBM 出售。

这些语言的一个关键限制是它们与查询优化器的交互有限（尽管 PostgreSQL 的 C API 确实支持这一点）。作为一等公民参与查询计划要求查询优化器能够对您的操作将采取的资源做出合理的看法。在实践中，这种与查询优化器的交互主要用于实现存储引擎。

这种对存储引擎的深入挖掘是（a）如果功能完全可用（所以大多数人没有这样做的技能），并且（b）可能比仅在 SQL 中编写查询更麻烦. 查询优化器的局限性意味着您可能永远无法从（例如）Python 甚至 C# 或 Java 中获得的 SQL 抽象级别。

高效查询的阻力最小的路径可能是用 SQL 编写查询，并使用其他语言中的一些过程粘合。在某些情况下，计算确实适用于程序方法。

这可能会变得很麻烦，并导致大量样板 SQL 代码。唯一真正的选择是手工编码的 SQL 或代码生成系统。代码生成的一个简单示例是框架提供的 CRUD 功能，其中此 SQL 是从元数据生成的。更复杂的示例可以在 ETL 工具中看到，例如[Oracle Warehouse Builder](http://www.oracle.com/technology/products/warehouse/index.html)或[Wherescape Red](http://www.wherescape.com/products-getting-started/products-getting-started.aspx)，它们通过从模型中生成大量存储过程代码来工作。

正是出于这个原因，我发现自己在半定期的基础上构建了一种或另一种代码生成系统。任何模板系统都可以做到这一点 - 我从[CherryTemplate](http://cherrytemplate.python-hosting.com/)获得了相当好的里程，但周围有很多这样的项目。 [Code Generation in Action](http://www.codegeneration.net/cgia/)是一本关于这个主题的好书——作者使用了一个基于 ruby​​ 的系统，它的名字让我无法理解。

编辑：如果您查看程序代码块的“显示估计执行计划”，您会注意到每个语句都有自己的查询计划。查询优化算法只能在单个 SQL 语句上工作，因此一个过程将有一个查询计划森林。因为过程代码可能有“[副作用](http://en.wikipedia.org/wiki/Pure_function)”，所以您不能使用查询优化中使用[的算法类型](http://www.pgcon.org/2007/schedule/attachments/28-Execution_Plan_Optimization_Techniques_Stroffek_Kovarik.pdf)来推理代码。这意味着查询优化器无法全局优化程序代码块。它只能优化单个 SQL 语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-04T06:50:24.637

[PostgreSQL](http://www.postgresql.org/docs/8.3/interactive/server-programming.html)支持许多脚本语言过程。正式 Perl、Python 和 Tcl。作为插件，[PHP](http://projects.commandprompt.com/public/plphp)、[Ruby](http://raa.ruby-lang.org/project/pl-ruby)、[Java](http://pgfoundry.org/projects/pljava/)和可能还有许多其他的（只是谷歌的 pl<languagename>），它们现在可能处于工作状态，也可能不处于工作状态。

哦，SQL Server 2005 及更高版本还支持[CLR 存储过程](http://searchsqlserver.techtarget.com/generic/0,295582,sid87_gci1251388,00.html)，您可以在其中使用 .NET 语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T07:53:35.853

[Oracle](http://www.oracle.com/)、[HSQLDB](http://hsqldb.org/)和[Derby](http://db.apache.org/derby/)允许用 Java 编写存储过程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T08:24:47.397

Oracle 确实支持 CLR 存储过程，因此您可以使用任何 .NET 语言（如 C#、VB.NET 或 IronPython）编写存储过程。这仅在数据库服务器在 Windows 机器上运行时有效。当数据库在 Linux 或 Unix 上运行时，您不能这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-04T14:09:59.383

据我所知，DB2 for Z/OS 是支持大多数语言的数据库。它支持COBOL,C/C++,JAVA作为存储过程，当然也支持SQL过程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-20T02:37:15.027

还有一些支持[在 Perl](http://www.smashing.org/extproc_perl/)中编写 Oracle 存储过程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-08T21:00:19.333

因为 Oracle 有一个内置的 JVM，您可以使用 Java 开发存储过程，也可以使用使用 JVM 的非 Java 语言开发存储过程，这意味着像 JACL、JYTHON、SCHEME 和 GROOVY 这样的语言。请参阅此处：[http](http://db360.blogspot.com/2006/08/oracle-database-programming-using-java_01.html) ://db360.blogspot.com/2006/08/oracle-database-programming-using-java_01.html和[http://en.wikipedia.org/wiki/List_of_JVM_languages](http://en.wikipedia.org/wiki/List_of_JVM_languages)。

# php - 在 PHP (MySQL / XML / ?) 中使用的最好的表示 n/ 深度树的方法

> ID：339745
> 
> 赞同：3
> 
> 时间：2008-12-04T06:49:25.623
> 
> 标签：php, mysql, xml, search, tree

我目前正在重写一个应用程序，教师可以在线计划课程。

该应用程序指导教师完成为学生创建工作单元的过程。该工具目前在三个州使用，但我们计划扩大规模。

该应用程序的主要抽奖卡之一是所有学生的成绩都预加载到系统中。这允许教师搜索或浏览并选择每个工作单元将要达到的结果。

当我最初设计系统时，我假设所有学生的成绩都遵循类似的层次结构。也就是说，有命名的嵌套容器，然后是结果。

我输入的原始结果集是三层的。因此，我的数据库具有以下结构：

==========================

*粗体表*

**h1**

身份证，姓名

**h2**

id，父母___id（h1_id），姓名

**h3**

id, 父母___id (h2_id), 姓名

**结果**

id，父母___id（h3_id），姓名

==========================

除了明显无法添加 n/ 层次结构之外，这种方法还使得在不递归查询数据库的情况下难以显示所有标准的列表。

一旦添加了学生成绩（及其父类别），就几乎没有理由以任何方式对其进行修改。主要要求是它们易于阅读且高效。

到目前为止，来自不同学校/州/国家的所有学生成绩都大致遵循我的假设。情况可能并非总是如此。

当然，所有现有数据都必须从当前数据库传输过来。

鉴于上述情况，我存储所有不同的学生结果集的最佳方式是什么？下面列出了我的一些想法。

*   在使用数据库中使用4个表继续使用回收或大量连接时

*   使用嵌套集

*   XML（所有不同集合的全局 XML 文件或每个集合的 XML 文件）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-04T07:17:58.280

我不知道您实际上需要 4 张桌子。

如果您有一个跟踪 parent_id 的表和一个级别，您可以有无限的级别。

> **结果**
> 
> id、parent_id、级别、名称

您可以使用递归来跟踪任何特定元素的树（您实际上不需要级别，但使用它更容易查询）。

另一种方法是嵌套集。在这种情况下，您仍将合并到单个表，但使用设置的内容来跟踪级别。

使用哪一个取决于您的应用程序。

阅读密集型：嵌套集

写密集型：父树事物

这是因为使用嵌套集，您可以使用单个查询检索整个树，但每次插入新节点时都要重新排序整个树。

当您只跟踪 parent_id 时，您可以单独移动或删除节点。

PS：我对 XML 投反对票。您有相同的递归问题，加上解析数据以及将其存储在数据库或文件系统中的开销（这将导致并发问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T08:42:10.950

我同意另一张海报 - 我认为嵌套集是要走的路。

看这里：

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

它解释了理论并将其与您已经使用的理论进行了比较——这实际上是对邻接的一种扭曲。它显示了所有这些中的 +/-，并且应该可以帮助您根据项目的所有细微之处做出决定。

我看到的另一件事（在 CakePHP 的树行为中）实际上是同时使用两者。当然它的性能不是很好，但是在这个模型下，你可以像使用邻接一样插入/删除东西，然后有一种方法可以运行来重建左/右边缘值，以允许你在嵌套中进行选择集时尚。结果是您可以更轻松地插入/删除。

[http://book.cakephp.org/view/91/Tree](http://book.cakephp.org/view/91/Tree)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-04T17:15:13.143

还有另一种方法可以处理数据库中的树，它可能不如此处描述的嵌套集和其他模式“智能”，但这确实有效且简单：

您可以将完整路径存储在树中，而不是存储项目的级别（或深度），如下所示：

```
A
  B
  C
    D
  E 
```

将像这样存储：

```
item  |  parent  |  path
----------------------------
A     |  NULL    |  A
B     |  A       |  A--B
C     |  A       |  A--C
D     |  C       |  A--C--D
E     |  A       |  A--E 
```

那么你可以很容易地得到：

*   （纯 SQL）具有 where parent = '' 子句的项目的所有直接子项
*   （纯 SQL）所有带有 where path LIKE 'PARENT--%' 子句的直接和间接子代
*   (PHP) 节点的深度 (count(explode('--',$path))

只要您创建了良好的索引（PK、父级索引、路径索引），这些功能在大多数情况下都足够好，并且即使有多个子级别也非常高效。当然，这个解决方案在删除/移动节点以更新路径时要求很高......

我希望这有帮助！

# asp.net - Would ManualResetEvent/AutoResetEvent use workerthread or IO-thread in asp.net

> ID：339747
> 
> 赞同：0
> 
> 时间：2008-12-04T06:50:21.907
> 
> 标签：asp.net, web-services, multithreading, asynchronous

the web layer is coded in asp.net with pages marked as async. Yes, the recommended way to code for aync is using the RegisterAsyncTask

I have a problem now - there are a few pages that have used AutoResetEvent and ManualResetEvent for aync and not the standard RegisterAsyncTask.

Would these objects servicing the async calls, use up the worker threads from the threadpool? (not recommended, as this would exhaust the worker threads and the server would not be able to serve other client requests

OR

would they use the IO threads? (typically IO threads are used for async calls with the RegsterAsyncTask, this is desired)

I would need to propose change to these pages based on your insights. Any opinions please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T07:11:52.503

重置事件对象本身不使用不同的线程——它们只是根据当前状态和其他线程的活动阻塞/释放*当前线程。*

当您说还有其他页面“已将 AutoResetEvent 和 ManualResetEvent 用于 [s]ync”时，您到底是什么意思？这些是同步对象，并且不提供（本身）使操作异步的方法。其他必须启动线程或使用线程池。

# c# - How to use querystring as it look like below

> ID：339755
> 
> 赞同：0
> 
> 时间：2008-12-04T06:55:32.880
> 
> 标签：c#

Here is my code

```
var SearchUser = (from u in db.Users
                  join l in db.LoggedInUsers on u.UserID equals l.UserID
                  where u.Username==txtSearch.Text
                  select u).SingleOrDefault();

litUsers.Text = "<div style='background-color:#B0C4DE;color:red'>"
                + "<a href=\"ChatWindow.aspx\">" + SearchUser.Username + "</a></div>"; 
```

Now I would like to add some querystring to the anchor tag? like I would like to add

session variable

Is this possible...............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T07:08:33.010

查询字符串只是“？”之后的任何内容。例如：

```
litUsers.Text = "<div style='background-color:#B0C4DE;color:red'>"
            + "<a href=\"ChatWindow.aspx?user=" + SearchUser.UserId 
            + "\">" + SearchUser.Username + "</a></div>"; 
```

但是，在构建这样的 URL 时需要非常小心 - 你会得到相当于 SQL 注入攻击，但在 HTML 中。换句话说，您需要知道 UserId 不会包含任何需要在 URL 中转义的内容。（同样，在 HTML 转义方面，您需要小心 SearchUser.Username。）

# .net - RegularExpressionValidator 是否使用正则表达式以外的其他风格？

> ID：339763
> 
> 赞同：5
> 
> 时间：2008-12-04T07:05:47.180
> 
> 标签：.net, asp.net, regex, validation

我想初步检查输入的字符串是否看起来像[Vehicle Identification Number (VIN)](http://en.wikipedia.org/wiki/Vehicle_identification_number)。我知道它由 17 个字母和数字组成，但是 VIN 中不允许使用字母 I、O 和 Q，所以我使用这个正则表达式：

```
^[0-9A-Z-[IOQ]]{17}$ 
```

现在，如果我使用 RegularExpressionValidator 检查像 1G1FP22PXS2100001 这样的字符串，它会失败，但使用此 OnServerValidate 事件处理程序的 CustomValidator

```
Regex r = new Regex("^[0-9A-Z-[IOQ]]{17}$");
args.IsValid = r.IsMatch(TextBox1.Text); 
```

效果很好。

实验表明 RegularExpressionValidator 不支持[Character Class Subtraction](http://msdn.microsoft.com/en-us/library/ms994330.aspx)，但 Regex 类支持。

现在我很感兴趣，为什么这两个 .NET 类使用不同的正则表达式风格？它在某处有记录吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-04T07:13:02.440

不是直接的答案，而只是一个明显的评论：

如果由于某种原因不支持字符类减法，您始终可以使用以下解决方法：

```
^[0-9A-HJ-NPR-Z]{17}$ 
```

* * *

要记录我在这个问题的评论中的内容：

文章**[How to: Validate Against Patterns for ASP.NET Server Controls](http://msdn.microsoft.com/en-us/library/6xh899wy(VS.85).aspx)**确实提到 javascript 客户端正则表达式验证器不知道“字符类减法”

正如**[RegularExpressionValidator Class .Net 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)**中提到的那样：

> 除非浏览器不支持客户端验证或显式禁用客户端验证（通过将`EnableClientScript`属性设置为 false），否则会执行服务器端和客户端验证。
> 
> 客户端上的正则表达式验证实现与服务器上的略有不同。在客户端上，使用 JScript 正则表达式语法。
> 在服务器上，`System.Text.RegularExpressions..::.Regex`使用语法。
> **JScript 正则表达式语法是语法的子`System.Text.RegularExpressions..::.Regex`集**。
> 因此，建议使用**JScript 正则表达式语法**，以便在客户端和服务器上产生相同的结果。

[在RegularExpressionValidator woes](http://weblogs.asp.net/cosgood/archive/2003/05/06/6604.aspx)博客条目中提到了该副作用的另一个说明（服务器端和客户端之间的不同正则表达式风格） 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T07:15:18.503

RegularExpressionValidator 还支持使用 JavaScript 的客户端验证，其中使用了 JavaScript Regex 引擎。您看到的区别是 JavaScript 和 .NET 正则表达式实现之间的区别。您可以禁用客户端验证，从而强制验证器使用 .NET 正则表达式引擎，代价是额外的回发。

# c++ - 异步 ReadDirectoryChangesW()？

> ID：339776
> 
> 赞同：1
> 
> 时间：2008-12-04T07:13:21.957
> 
> 标签：c++, c, asynchronous, winapi

我想监视指定目录中的修改，并检索确切的更改信息。所以我决定使用[ReadDirectoryChangesW()](http://msdn.microsoft.com/en-us/library/aa365465(VS.85).aspx)函数。但是我想异步使用它，这意味着如果目录中没有更改，我不希望我的工作线程被阻塞。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T09:16:45.700

我倾向于使用`ReadDirectoryChangesW()`I/O 完成端口，这在您想要监视多个目录时非常有用，因为您可以让一个线程为 IOCP 提供服务并处理您对 ReadDirectoryChangesW() 的所有调用的结果。

首先通过调用创建一个 IOCP，一次`CreateIoCompletionPort()`。启动一个线程来调用`GetQueuedCompletionStatus()`和处理您的异步目录更改。

现在对于您要监视的每个目录。首先，正常打开您的目录句柄。接下来，通过调用并传入 IOCP 句柄将其与您的 IOCP 相关联`CreateIoCompletionPort()`（有关更多详细信息，请参阅文档）。最后，调用`ReadDirectoryChangesW()`并传递`OVERLAPPED`文档中详述的一个。调用将返回，如果成功，结果将作为`GetQueuedCompletionStatus()`您为 IOCP 服务而创建的线程中的结果可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T07:33:15.237

从[ReadDirectoryChnagesW() 的 MSDN 文档中](http://msdn.microsoft.com/en-us/library/aa365465(VS.85).aspx)：

> 对于异步完成，您可以通过以下三种方式之一接收通知：
> 
> *   使用 GetOverlappedResult 函数。要通过 GetOverlappedResult 接收通知，请不要在 lpCompletionRoutine 参数中指定完成例程。确保将 OVERLAPPED 结构的 hEvent 成员设置为唯一事件。
> *   使用 GetQueuedCompletionStatus 函数。要通过 GetQueuedCompletionStatus 接收通知，请不要在 lpCompletionRoutine 中指定完成例程。通过调用 CreateIoCompletionPort 函数将目录句柄 hDirectory 与完成端口相关联。
> *   使用完成例程。要通过完成例程接收通知，请不要将目录与完成端口相关联。在 lpCompletionRoutine 中指定完成例程。当线程处于警报等待状态时，只要操作完成或取消，就会调用此例程。OVERLAPPED结构的hEvent成员系统不使用，可以自己使用。

# linq-to-sql - linq2sql的缺点

> ID：339786
> 
> 赞同：1
> 
> 时间：2008-12-04T07:28:09.163
> 
> 标签：linq-to-sql

我听到很多谣言说 Linq2Sql 在 .net 的下一个版本中将不再受支持。我非常喜欢 Linq2Sql，并且发现它非常容易/轻量级的使用。我可以理解人们在使用它时遇到的一些问题（ppl 用于休眠...），但正确使用我认为大多数问题都可以解决。我现在在我的所有项目中都使用它，我不想看到它不再受支持。

所以列出你用 Linq2Sql 看到的缺点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T08:00:54.480

如果有其他版本的 Linq to SQL，这是我的功能愿望清单：

在构建我的最后一个 Linq-to-SQL 项目时我真正想要的东西（并且在大多数情况下必须手动解决）

1.  多对多关联
2.  更好的视觉设计师（包括“刷新表格”功能）
3.  控制不涉及破解 XML 的级联删除/更新/SET NULL
4.  文化/字符串比较到 SQL COLLATE 语句的特定映射（例如，指定密码是否应该区分大小写，而不是依赖于底层数据库的默认排序规则。）

我可能想要但实际上还不需要的东西：

1.  支持有序集合（将列表持久化到数据库，以便按照它们持久化的顺序自动检索它们）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T07:35:53.377

LINQ to SQL 当然可以修复。但只要 ADO.NET 团队负责它，我严重怀疑它会是。

如果它被开源，我认为这将是一股不可忽视的力量。但就目前而言，它是一项垂死的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T11:52:47.243

One of the biggest disadvantages I see in L2S is that it is a really hassle to use it in disconnected scenarios; send off a serialized version of an entity to another and try to "merge"/update it when you get it back and you will see it's shortcomings. If the .Attach() functionality had worked for such scenarioes, L2S would have been quite nice.

--larsw

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T07:33:17.390

首先，人们对它失去了兴趣，因为它不会被进一步开发，而实体框架将继续前进。

LinqToSQl 可以工作并且使用起来很愉快，但 EF 迟早会超越它。

如果更容易设置 LINQ to Sql 以使用 LINQ to SQL 数据层外部的对象模型，ORM 纯粹主义者会更喜欢。这可以在 Linq to SQl 中完成，但这是一个与默认配置相去甚远的手动过程。

# c# - C# VS 2005：如何在运行时获取类的公共成员列表？

> ID：339792
> 
> 赞同：2
> 
> 时间：2008-12-04T07:32:56.690
> 
> 标签：c#, reflection, typeof

我正在尝试在运行时获取类成员变量列表。我知道这可能使用 typeof 和反射。但找不到一个例子。请有人为我照亮。

这是伪代码示例：

```
Class Test01
{ 
 public string str01;
 public string str02;
 public int myint01;
} 
```

我想要这样的东西（伪代码）：

```
Test01 tt = new Test01();
foreach(variable v in tt.PublicVariableList)
{
   debug.print v.name;
   debug.print v.type;
} 
```

请帮我弄清楚如何在 C# VS2005 中执行此操作

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T07:35:09.633

如果您追求公共*领域*，只需使用[`tt.GetType().GetFields()`](http://msdn.microsoft.com/en-us/library/system.type.getfields.aspx)

如果您需要其他成员，请使用[GetProperties()](http://msdn.microsoft.com/en-us/library/system.type.getproperties.aspx)、[GetMethods()](http://msdn.microsoft.com/en-us/library/system.type.getmethods.aspx)、[GetEvents()](http://msdn.microsoft.com/en-us/library/system.type.getevents.aspx)等获取特定成员，或使用[GetMembers()](http://msdn.microsoft.com/en-us/library/system.type.getmembers.aspx)获取所有成员。

如果您想访问非公共成员，或者将搜索限制为静态成员（或仅限于实例成员），则每个方法都有一个接受 BindingFlags 的重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T07:36:05.857

```
foreach (MemberInfo mi in tt.GetType().GetMembers()) ... 
```

# inode - 读取超级块

> ID：339795
> 
> 赞同：5
> 
> 时间：2008-12-04T07:34:20.197
> 
> 标签：inode, superblock

我知道在 Unix（特别是 Mac OS X）中，超级块存储有关磁盘上数据布局的信息，包括索引节点开始和结束的磁盘地址。我想扫描程序中的 inode 列表以查找已删除的文件。如何找到 inode 开始的磁盘地址？我查看了 statfs 命令，但它没有提供此信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T07:43:00.880

由于您提到了 Mac OS X，我们假设您的意思是仅针对 HFS+ 执行此操作。[Wikipedia 页面](http://en.wikipedia.org/wiki/HFS_Plus)提供了一些关于可能的启动方式的信息，例如它说明了磁盘布局：

> 卷的扇区 0 和 1 是 HFS 引导块。这些与 HFS 卷中的引导块相同。它们是 HFS 包装器的一部分。
> 
> 扇区 2 包含相当于 HFS 卷中的主目录块的卷标头。卷标头存储有关卷本身的各种数据，例如分配块的大小、指示卷创建时间的时间戳或其他卷结构（如目录文件或扩展区溢出文件）的位置。卷标头始终位于同一位置。
> 
> 分配文件，它跟踪哪些分配块是空闲的，哪些正在使用中。它类似于HFS中的Volume Bitmap，每个分配块由一位表示。零表示该块是空闲的，一表示该块正在使用中。与 HFS Volume Bitmap 的主要区别在于，Allocation File 存储为常规文件，它不占用卷开头附近的特殊保留空间。分配文件也可以改变大小，并且不必连续存储在一个卷中。

在那之后，它变得更加复杂。例如，阅读[B* 树](http://en.wikipedia.org/wiki/B*-tree)。

我不是 Mac OS 用户，但如果还没有编写用于扫描已删除文件的工具，我会感到惊讶，也许有些是开源的，可以提供更具体的起点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-07T09:50:41.573

找到已删除的文件会很麻烦，因为当您删除文件时，磁盘上没有太多东西可以找到。

如果您删除 FAT（或 UDF）文件系统上的文件，其目录条目只会被标记为“已删除”，而大部分 dir 条目仍然完好无损。

在 HFS 卷上，由于它们使用 B-Tree，*必须*从目录中删除已删除的编辑，否则搜索项目将无法更有效地工作（好吧，这个论点可能有点弱，但事实是删除的条目被删除和覆盖）。

因此，除非通过意外写入目录扇区或重新初始化卷而发生删除，否则您将找不到太多内容。

# axapta - 如何使用 X++ 向 MS Dynamics 2009 AX 的警报消息添加更多信息？

> ID：339796
> 
> 赞同：3
> 
> 时间：2008-12-04T07:34:32.707
> 
> 标签：axapta, x++, ax, dynamics-ax-2009

有没有人有一些示例代码或者可以指导我到哪个类我可以修改以向 Dynamics AX (DAX) 中的警报消息添加更多信息。例如，我想在更改供应商名称时添加供应商编号和用户 ID。

编辑：有人告诉我，在设置警报时必须在描述面板中输入 HTML 代码。如果这是真的，并且任何人都对此有更多信息，那么如果您可以分享此信息，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-25T03:22:20.777

[Technet](http://technet.microsoft.com/en-us/library/aa834423.aspx "关于设置警报电子邮件模板")上有一篇文章展示了您可以在电子邮件模板中使用的合并数据元素。

要添加新的合并数据元素，您需要修改类`EventActionEmail`。该方法`createEmailParameterMap`返回一个包含元素和要替换它们的数据的地图。该`execute`方法将该映射传递`SysEmailTable::sendMail`给实际格式化和发送电子邮件。

# validation - 禁用 struts2 中的验证并使用我自己的自定义验证

> ID：339799
> 
> 赞同：0
> 
> 时间：2008-12-04T07:35:21.333
> 
> 标签：validation, struts2

我正在struts2中开发web项目，我希望通过禁用struts2验证在我自己的自定义验证中进行验证，因为如果一个字段被发回，它将检查所有字段，但我只想在提交时检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-31T04:30:31.813

我不完全明白这个想法，但是有一种东西叫做`@SkipValidation`你可以用它来注释方法。

# java - 需要：Tomcat + Axis2 + JAX-WS 傻瓜指南

> ID：339802
> 
> 赞同：3
> 
> 时间：2008-12-04T07:36:25.137
> 
> 标签：java, web-services, tomcat, jax-ws, axis2

我们正在使用 Tomcat + Axis2 + POJO 来实现 Web 服务，我们遇到了一些 POJO 和 Axis2 问题，这对我们来说是个大问题。似乎 Axis2 和 POJO 的 SOAP 解析实现忽略了 XML 元素的名称，只是根据 SOAP 消息中 XML 元素的顺序为参数赋值。这件事在复杂的 API 中引起了很多问题。

在 Axis2 的文档沼泽中畅游一番之后，我进入时更加困惑，所以我真的需要一些帮助。

我知道 JAX-WS 和 Axis2 没有这些问题（如果我错了，请纠正我），但我似乎不知道如何开发和部署这样的解决方案。

我编写了一个 POJO，并使用 JAX-WS 注释对其进行了注释，我在该类上执行了 wsgen，并将所有内容与该*services.xml*文件一起打包到一个 aar 文件中：

```
<service name="TESTService" >
    <description>
        TEST web service
    </description>
    <messageReceivers>
        <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only" class="org.apache.axis2.jaxws.server.JAXWSMessageReceiver" />
        <messageReceiver  mep="http://www.w3.org/2004/08/wsdl/in-out"  class="org.apache.axis2.jaxws.server.JAXWSMessageReceiver"/>
    </messageReceivers>
    <parameter name="ServiceClass">com.test.WsdlImpl</parameter>
</service> 
```

当我尝试执行 Web 服务调用时，在 Tomcat 中出现异常：

```
[错误] 找不到此 AxisService 的服务类。
java.lang.RuntimeException：找不到此 AxisService 的服务类。
    在 org.apache.axis2.jaxws.server.JAXWSMessageReceiver.receive(JAXWSMessageReceiver.java:95)
    在 org.apache.axis2.engine.AxisEngine.receive（AxisEngine.java:176）
    在 org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275)
    在 org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:133)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:233）
    在 org.apache.catalina.core.StandardContextValve.invoke（StandardContextValve.java:175）
    在 org.apache.catalina.core.StandardHostValve.invoke（StandardHostValve.java:128）
    在 org.apache.catalina.valves.ErrorReportValve.invoke（ErrorReportValve.java:102）
    在 org.apache.catalina.core.StandardEngineValve.invoke（StandardEngineValve.java:109）
    在 org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:286）
    在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    在 java.lang.Thread.run（未知来源）

```

请通过解释如何使用 Tomcat + Axis2 部署 JAX-WS 来帮助我（如果 CXF 与 Tomcat 一起使用，我也可以使用它），或者将我引导到涵盖 Tomcat+Axis2 的 GOOD 教程。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T07:59:57.727

直接来自 Axis2 网站，[这](http://ws.apache.org/axis2/1_4_1/jaxws-guide.html)是一个涵盖 Axis2 和 Jax-Ws 的教程。您收到上述错误可能是因为缺少axis2-jaxws-1.3.jar。检查你的类路径。

您当然可以将 CXF 与 Tomcat 一起使用，我个人的看法是使用它会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-20T16:02:53.267

我被建议使用 JAX-WS 层（Metro 1.4）的官方 Sun 实现，到目前为止它运行良好。主要的是它知道如何在运行时在网络服务器内根据需要生成工件。

当我在这里的产品达到生产质量时，我可能会写下所需的步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T11:01:01.293

与 CXF 一样，另一个不错的选择是[Apache Tuscany](http://tuscany.apache.org) - 将 POJO 转换为服务非常容易。

# html - IE中的列表元素渲染错误？

> ID：339803
> 
> 赞同：1
> 
> 时间：2008-12-04T07:36:59.927
> 
> 标签：html, css, internet-explorer, rendering

有没有人见过这个 - 可以做些什么吗？此链接指向 IE 中列表显示的 PNG 屏幕截图 - 如果您仔细观察，每个连续项目的每个元素的行高都会变大一点。网站外观完全由 CSS 控制。

~~截屏~~

这不是什么大不了的事，但肯定很奇怪。

另外，请注意白线和框边框之间的空间 - 在 FF 或 Chrome 中也不存在，只有 IE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T07:42:34.783

看起来像 IE7 中的一个错误。

我刚刚在 IE8 上进行了测试，在 IE8 模式下按预期工作，但在兼容模式下表现出相同的行为。

更新：搞砸了，似乎是`overflow:hidden`造成这种情况的风格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T08:17:50.797

我看到你的页面是 XHTML 并且它验证了......但是就像所有 XHTML 页面一样，它被用作`text/html`而不是`application/xhtml+xml`（如果它是 IE 将无法识别它，并询问你是否要保存文件）。因此，尽管使用 XHTML 是一个好主意，但每个浏览器都会获得 XHTML 并告诉它是 HTML，因此您漂亮的有效 XML 会被解析为 html tagoup。（如果你真的想要兼容性，并且你真的不需要将你的页面解析为 XML，那么“HTML 4.01 Strict”仍然是最好的选择）

我仍然不确定这会如何影响列表呈现（因为列表中的语法应该基本相同），但如果 IE 不理解标签，它可能无法获得结束标签。它让我想起了如果你忘记了 li 上的结束标签，并且在上面加了一点填充，你会得到什么效果......

永远不要试图在 IE 中获得完美的像素渲染，你会发疯的，你可能不会成功；学会忍受它。:P

# linux - 如何在 BSD 进程记帐文件中获取脚本名称？

> ID：339815
> 
> 赞同：1
> 
> 时间：2008-12-04T07:44:13.033
> 
> 标签：linux, bsd, process-accounting

我正在尝试编写一个程序来处理Linux下的BSD风格的进程记帐文件（/var/account/pacct）。

当我们使用`./script_name`或启动脚本时`bash script_name`，进程记帐记录实际上会被命令写出`bash`。大概是因为那是实际运行的程序。

我们希望看到的是 command `script_name`。有谁知道将脚本名称写入会计文件而不是 bash 可执行文件的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T08:27:29.090

[Linux：史努比的永恒 Bash 历史](http://www.hackosis.com/2007/12/09/linux-eternal-bash-history-with-snoopy/)。

**编辑**：作为 hack 替代方案，您可以定期运行`ps -eo args`

**由提问者编辑**（所以我可以接受唯一帮助过的 SO'er 的答案:-)：

我发现如果你真的`#!bin/bash`在文件中添加了“'”，它就会开始以脚本名称 ( `tst`) 而不是解释器 ( `bash`) 出现在 pacct 中。

我的脚本最初没有 hash-bang 标记，它可能必须`bash`重新执行自身或类似的东西。不管怎样，现在已经修好了。

# java - 在屏幕上查找复合位置

> ID：339821
> 
> 赞同：9
> 
> 时间：2008-12-04T07:49:58.417
> 
> 标签：java, swing, plugins, swt, awt

我正在用 Java 为 SWT 和 AWT 实现屏幕键盘。一件重要的事情是将键盘移动到所选文本字段可以显示并且不位于屏幕键盘后面的位置。

对于 AWT，我可以通过以下方式检测当前选定组件的位置

```
Component owner = KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
if (owner == null) {
    return;
}
Point ownerLocation = owner.getLocationOnScreen();
Dimension ownerSize = owner.getSize(); 
```

如何在 SWT 中实现相同的逻辑？我通过向 SWT 事件队列添加焦点侦听器来获取当前选定的小部件。但是当我打电话时

```
Point location = new Point(mTextWidget.getLocation().x, mTextWidget.getLocation().y);
Dimension dimension = new Dimension(mTextWidget.getSize().x, mTextWidget.getSize().y); 
```

我将获得相对于父复合材料的位置。

我怎样才能得到一个特殊的小部件相对于整个屏幕的位置？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-04T08:04:05.113

我相信[Control.toDisplay()](http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/class-use/Point.html)方法应该能够将您的坐标转换为相对于屏幕的坐标。

这个[片段](http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg34321.html)可以说明你所追求的：

```
package org.eclipse.jface.snippets;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Text;

public class Bla {
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);

        final Text t = new Text(shell,SWT.BORDER);
        t.setBounds(new Rectangle(10,10,200,30));
        System.err.println(t.toDisplay(1, 1));

        Button b = new Button(shell,SWT.PUSH);
        b.setText("Show size");
        b.setBounds(new Rectangle(220,10,100,20));
        b.addSelectionListener(new SelectionAdapter() {

            public void widgetSelected(SelectionEvent e) {
                System.err.println(t.toDisplay(1, 1)); 
            }

        });

        shell.open();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }

        display.dispose();
    }
} 
```

# javascript - 是否有内置的 Javascript 函数可以将一个月的文本字符串转换为等值的数字？

> ID：339829
> 
> 赞同：1
> 
> 时间：2008-12-04T07:57:30.447
> 
> 标签：javascript

是否有内置的 Javascript 函数可以将一个月的文本字符串转换为等值的数字？

前任。我有月份的名称“十二月”，我想要一个函数返回“12”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T08:11:13.133

您可以将一些虚拟的日期和年份附加到月份名称，然后使用[Date](http://www.cev.washington.edu/lc/CLWEBCLB/jst/js_datetime.html)构造函数：

```
var month = (new Date("December 1, 1970").getMonth() + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T08:09:40.127

开箱即用，本机 JS 不支持此功能。如前所述，您需要考虑语言环境和不同的日期约定。

你有任何可以使用的宽松假设吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T08:02:26.787

我推荐 jQuery 的[datepicker 实用函数](http://docs.jquery.com/UI/Datepicker/%24.datepicker.parseDate#formatvaluesettings)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T08:09:44.820

试试这个：

```
function getMonthNumber(monthName) { 

    // Turn the month name into a parseable date string.
    var dateString = "1 " + monthName;

    // Parse the date into a numeric value (equivalent to Date.valueOf())
    var dateValue = Date.parse(dateString);

    // Construct a new JS date object based on the parsed value.
    var actualDate = new Date(dateValue);

    // Return the month. getMonth() returns 0..11, so we need to add 1
    return(actualDate.getMonth() + 1);
} 
```

# emacs - Emacs 的最佳版本

> ID：339831
> 
> 赞同：5
> 
> 时间：2008-12-04T07:59:00.380
> 
> 标签：emacs

我想进入 Emacs 的奥秘——但要轻柔！请原谅缺乏男子气概，但是是否有适用于 Windows 的 Emacs-clone 支持鼠标和菜单的使用来帮助我入门——所以我可以延迟学习 ALT-META_CTRL-CC 一段时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-04T08:08:31.047

[下载](http://ftp.gnu.org/gnu/emacs/windows/)适用于 Windows 的最新版本的 GNU Emacs。默认情况下，它带有一个菜单，看起来像任何其他 Windows 菜单。您可以先使用菜单进行操作，因为它显示了快捷键是什么，您将很快学会。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T15:39:46.130

由于更好的 GUI 集成，在 Windows 和 Unix 上使用 XEmacs 很长时间后，我已经在我使用的所有平台（Windows、Mac OS X、Linux、Solaris）上切换回 GNU Emacs。

对于 Windows，我倾向于使用[EmacsW32](http://www.ourcomments.org/Emacs/EmacsW32.html) - 与 GNU Emacs 类似，它默认激活了菜单和工具栏（毕竟它是一个带有一些额外代码的 GNU Emacs），此外它还带有一些额外的代码以提供更好的 Windows 集成。

正如其他几位海报所提到的，您最好尽早学习基本的击键。使用诸如 GNU Emacs 之类的东西的一个重要方面是，当您“在区域内”时，您往往会更有效率，这仅仅是因为您不必把手放在键盘上。如果不断在鼠标和键盘之间跳转，你就失去了这个优势。

您可能想要查看以推迟手指上不可避免的结:) 是[CuaMode](http://www.emacswiki.org/emacs/CuaMode)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-07T17:47:27.843

我在使用 GNU Emacs for Windows 时遇到了一些恼人且神秘的问题（例如，一些附加软件包从未工作过）。我强烈建议安装 cygwin 并从 cygwin bash 提示符运行以下命令：

```
XWin - 多窗口 &
导出显示=：0.0
emacs

```

XWin 会显示一堆垃圾，希望不会失败。然后，Emacs 应该会弹出一个漂亮的 GUI 窗口。我已经使用了几个月，并且从未错过 Windows 的本机 emacs。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T08:13:30.960

或者 ntemacs。我多年来一直在使用它：http: [//ntemacs.sourceforge.net/](http://ntemacs.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T08:07:08.070

有一些选择：

[http://www.xemacs.org/index.html](http://www.xemacs.org/index.html)

[http://www.notgnu.org/](http://www.notgnu.org/)

恐怕更...

# binary - 在纯二进制产品中搜索我的源代码

> ID：339833
> 
> 赞同：0
> 
> 时间：2008-12-04T07:59:41.737
> 
> 标签：binary, reverse-engineering, gpl

假设我有一个在 GPL 下发布的项目，任何人都可以使用源代码。后来我发现了一个非常相似的产品，但是作为封闭源代码，仅由其他人分发二进制文件。

有没有一种好方法可以找出他们在他们的产品中使用我的源代码？

如果解决方案是以某种方式对二进制文件进行逆向工程，是否有可能以某种方式自动化它？

编辑：澄清。寻找错误是一种选择，但不是确定的，特别是如果项目是一个库并且二进制文件添加了自己的 GUI，例如。我感兴趣的情况是代码被解除的情况并不明显。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T08:05:30.353

错误。

如果封闭源版本与您的项目共享大部分错误，则可能已“解除”。

您也可以尝试使用封闭源二进制文件的反编译版本来反编译您自己的二进制文件……尽管这可能不可靠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T08:11:07.283

显然，如果可疑的二进制文件不是`stripped`，您可以只查找与您的代码同名的任何符号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T08:11:30.123

在反编译和逆向工程二进制代码方面有大量工作。世界专家大概是[克里斯蒂娜·西富恩特斯](http://research.sun.com/people/cristina/)。她在反编译方面做了很多工作。[写信给Alex Aiken](http://theory.stanford.edu/~aiken/)并询问他[的软件相似度测量](http://theory.stanford.edu/~aiken/moss/)工具是否可以适用于二进制代码也会很有趣。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T09:17:39.503

一个明显的方法是搜索字符串。运行 unix 字符串工具并查看二进制文件是否包含代码中的任何文字字符串。主要是消息框中的错误消息和文本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-07T10:59:13.040

寻找软件胎记。这种方法试图建立基于二进制代码或动态行为的软件之间的链接。Christian Collberg 是软件水印方面的专家，胎记就是由此而来。这一切都还在研究领域。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-04T08:05:46.950

您可以尝试反汇编这两个程序并比较程序集，但如果他们使用不同的编译器，那么他们的程序可能会有细微的差异。有一些免费的反汇编器或调试器也可以在汇编中逐步完成。

除此之外，真的没有一种简单的方法可以找出这种事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-05T00:23:00.317

我能想到的最可靠的方式类似于牛津词典中的[“Esquivalience”一词。](http://en.wikipedia.org/wiki/Esquivalience)
只需在代码的某处添加一些具有唯一内容的二进制数组，不要忘记对其进行一些简单的使用，这样链接器就不会对其进行优化。您可能应该对它进行一些混淆，以便不经意的读者不会明显看出它是多余的。
然后用十六进制编辑器打开编译后的二进制文件并查找它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-05T00:36:42.800

为什么不使用nm查看符号表？

```
$ nm a.out
... 
```

# delphi - Is it possible to access a 64-bit dll from a 32-bit application?

> ID：339848
> 
> 赞同：14
> 
> 时间：2008-12-04T08:06:59.973
> 
> 标签：delphi, 64-bit

I have a Delphi application similar to [Taskbar Shuffle](http://www.freewebs.com/nerdcave/taskbarshuffle.htm) that includes a hook dll.

**EDIT**: This hook DLL communicates with the main app by sending windows messages.

I want to add support to XP and Vista x64 and my initial idea was to convert the dll to 64-bit (compiling it with FreePascal) but keep the application 32-bit for now (Delphi).

Is it possible for a 32-bit application to access a 64-bit dll?

**EDIT2**: I'm loading the dll via LoadLibrary so I guess I'm stuck since a 32-bit process won't be able to load a 64-bit dll, according with what I read on the link pointed by Lars Truijens on one of the answers below.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T09:50:05.507

As long as the 64-bit DLL is being loaded by a separate 64-bit process, and all communication between 32-bit process and 64-bit DLL is via loose-coupled IPC-like mechanisms that the OS can marshall, then yes you can do that.

I've done something similar. A 32-bit application needed a custom Print Spooler add-in implemented in a DLL. The app and the spooler add-in communicated via IPC mechanisms (a fancy way of saying temporary files, in this case).

On 64-bit systems everything about the 32-bit application worked fine except that the Print Spooler refused to load the add-in DLL, because the Print Spooler was of course a 64-bit process.

The solution was as simple as rebuilding only the Spooler add-in in 64-bit. No need to change the entire 32-bit app.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T08:13:47.730

No. You'll have to compile two versions: 64-bit and 32-bit.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-05-27T06:32:14.370

I just found out this solution, from CodeCentral: [http://cc.embarcadero.com/Author/802978](http://cc.embarcadero.com/Author/802978)

It allows to call any 64 bit library from 32 bit code.

It's a complex solution, running an asm-written 64 bit executable in the background, then communicating with it using memory mapped files and windows GDI messages to launch some 64 bit functions from a 32 bit Delphi process.

There is a sample which is able to load any 64 bit library, then call any function of this library, from a 32 bit executable.

Seems to work well. In all cases, code is worth looking at it: it's technical, but well designed!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T08:19:07.220

No, but you might be able to get around that using COM. If you run the dll inside a COM object which is running as a stand-alone process, and communicate with marshallable interfaces (eg: automation-compatible interfaces), it should work. It's not always feasible, depending on what the dll does and how extensive the integration and call surfaces are, but it is an option which should be able to make that scenario possible.

# python - 我如何从这样的模式中提取时间？

> ID：339856
> 
> 赞同：3
> 
> 时间：2008-12-04T08:10:18.673
> 
> 标签：python, regex, datetime

我需要在文本上使用 datetime.strptime，如下所示。

“一些长度未定的随机文本 1986 年 1 月 28 日”

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T08:25:51.730

你可能会发现[这个](https://stackoverflow.com/questions/285408/python-module-to-extract-probable-dates-from-strings)问题很有用。我会给出我在那里给出的答案，即使用[dateutil](http://labix.org/python-dateutil)模块。这接受一个模糊参数，它将忽略任何看起来不像日期的文本。IE：

```
>>> from dateutil.parser import parse
>>> parse("Some Random text of undetermined length Jan 28, 1986", fuzzy=True)
datetime.datetime(1986, 1, 28, 0, 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T08:28:10.277

不要尝试使用 strptime 来捕获非日期文本。对于良好的模糊匹配，dateutil.parser 非常棒，但如果您知道日期的格式，则可以使用正则表达式在字符串中查找日期，然后使用 strptime 将其转换为 datetime 对象，如下所示：

```
import datetime
import re

pattern = "((Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]+, [0-9]+)"
datestr = re.search(, s).group(0)
d = datetime.datetime.strptime(datestr, "%b %d, %Y") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T08:25:07.067

使用结尾的 3 个单词，不需要正则表达式（使用`time`模块）：

```
>>> import time
>>> a="Some Random text of undetermined length Jan 28, 1986"
>>> datetuple = a.rsplit(" ",3)[-3:]
>>> datetuple
['Jan', '28,', '1986']
>>> time.strptime(' '.join(datetuple),"%b %d, %Y")
time.struct_time(tm_year=1986, tm_mon=1, tm_mday=28, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=1, tm_yday=28, tm_isdst=-1)
>>> 
```

使用`datetime`模块：

```
>>> from datetime import datetime
>>> datetime.strptime(" ".join(datetuple), "%b %d, %Y")
datetime.datetime(1986, 1, 28, 0, 0)
>>> 
```

# coldfusion - 如何将文件保存为 UTF-8 格式

> ID：339861
> 
> 赞同：4
> 
> 时间：2008-12-04T08:12:53.973
> 
> 标签：coldfusion, utf-8

我们需要在 ColdFusion 中发送包含英镑（货币）符号的电子邮件。在发送电子邮件之前，我们将数据转储到 html 文件中以供预览。

1.  如何在 ColdFusion 中使用 utf-8 编码发送电子邮件
2.  如何在 ColdFusion 中使用 utf-8 编码保存文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-04T08:22:05.640

电子邮件以在 ColdFusion 管理员中指定的编码发送。对于 ColdFusion MX (6.0) 及更高版本，默认为 UTF-8。

您可以像这样明确提及编码，但这不是必需的。

```
<cfmail type="text/html; Charset=UTF-8" ...><!--- body ---></cfmail> 
```

对于您转储到磁盘的 HTML 文件，以下内容适用：

```
<cffile action="write" charset="UTF-8" ...> 
```

并且您应该将编码作为 META 标记，因此您用于预览的浏览器不必猜测：

```
<meta http-equiv="Content-Type" content="text/html; Charset=UTF-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T08:14:41.223

尝试添加html 文件`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`的`<head>`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T20:38:35.560

除了将邮件标记为 UTF-8 之外，您可能需要指示 ColdFusion 让您正在运行的模板也应支持 unicode。将此标签粘贴在模板的顶部。如果你不这样做，你最终可能会在电子邮件中出现垃圾。

```
<cfprocessingdirective pageencoding="UTF-8">

```

Adobe 提供了一些关于此主题的相当好的信息：

[http://www.adobe.com/support/coldfusion/internationalization/internationalization_cfmx/internationalization_cfmx3.html](http://www.adobe.com/support/coldfusion/internationalization/internationalization_cfmx/internationalization_cfmx3.html)

# .net - SmartAssembly 内存管理

> ID：339862
> 
> 赞同：3
> 
> 时间：2008-12-04T08:13:20.260
> 
> 标签：.net, memory-management, obfuscation

刚看到[这个网站](http://www.smartassembly.com/product/index.aspx "智能组装产品概述")。功能 9 是内存管理，他们声称他们的产品“自动释放 [es] 不再需要的内存”。

这是一种营销策略，还是你认为他们有什么诡计？他们是否只是根据 .Net 运行时在任何情况下提供的内容提出声明（或者他们是否*喘不过气来*调用 GC.Collect()）？

对产品不是很感兴趣，DotFuscator 对我来说就足够了——我只是对如何实现这一点*很感兴趣。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T08:28:35.593

有趣的。

2007 年的[评论](http://neosmart.net/blog/2007/smartassembly/)包含以下内容：

> {smartassembly} 使用几种不同的技术来降低内存使用量。
> 
> 我们向 {smartassembly} 的开发人员询问了一些细节，他们告诉我们，默认情况下，CLR 会为 .NET 程序集保留大量内存——无论他们是否请求。因此，{smartassembly} 智能地检测 CPU 何时空闲（或空闲），并根据其要求增加或减少为您的程序集保留的内存量 - 从某种意义上说是“自动”GC，除了内存可能会或可能不会正在使用。
> 
> 同样，{smartassembly}（得益于 .NET 的设计方式，可以从字面上访问您的源代码）将任何和所有没有任何可检测的“子”类继承自它们的类标记为“密封”，从而减少 CLR 在运行时使用的内存和 CPU 量，以确定哪些函数应可供其他类和库使用。

同一篇评论有一对“之前/之后”的屏幕截图，显示应用程序从 8M 到 420K。这向我表明，它实际上只是减少了应用程序的工作集，而不是真正的内存需求。如果您最小化应用程序，则会出现相同的“优化”。它不会突然占用更少的内存。我不相信桌面 .NET 框架*真的*可以只用 420K 运行。

自动密封功能很有趣 - 除了查找虚拟方法外，我看不出它有什么帮助。我怀疑影响是否真的很大，但我当然没有对其进行基准测试。

所以，没有任何结论，但我怀疑它是否在做任何我特别想要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:55:20.107

我可能错了，但在我看来，SmartAssembly 将数据推送到页面文件。如果在任务管理器中选择 CommitSize 和 PF delta 列，您将看到虽然 WorkingSet 减小了大小，但提交大小几乎保持不变。如果您随后尝试访问应用程序中的某些内容，您会看到很多页面错误。

如果这是“内存优化”的行为，那么我认为该名称不适合该功能，应该简单地称为“去优化”，因为访问页面文件的成本可能会显着降低性能。

我对这种解释有误吗？

# .net - 进行 wiki 格式化 (.Net) 的完美正则表达式是什么？

> ID：339875
> 
> 赞同：2
> 
> 时间：2008-12-04T08:19:12.213
> 
> 标签：.net, regex, wiki

伙计们，我有这个 wiki 格式化算法，我在[Stacked](http://stacked.ra-ajax.org/)使用它来从“wiki 语法”创建 HTML，我不确定我当前使用的是否足够好、最优或包含错误，因为我是不是真正的“正则表达式大师”。这是我目前正在使用的；

```
// Body is wiki content...
string tmp = Body.Replace("&", "&amp;").Replace("<", "&lt;").Replace(">", "&gt;");
// Sanitizing carriage returns...
tmp = tmp.Replace("\\r\\n", "\\n");

// Replacing dummy links...
tmp = Regex.Replace(
" " + tmp,
"(?<spaceChar>\\s+)(?<linkType>http://|https://)(?<link>\\S+)",
"${spaceChar}<a href=\"${linkType}${link}\"" + nofollow + ">${link}</a>",
RegexOptions.Compiled).Trim();

// Replacing wiki links
tmp = Regex.Replace(tmp,
"(?<begin>\\[{1})(?<linkType>http://|https://)(?<link>\\S+)\\s+(?<content>[^\\]]+)(?<end>[\\]]{1})",
"<a href=\"${linkType}${link}\"" + nofollow + ">${content}</a>",
RegexOptions.Compiled);

// Replacing bolds
tmp = Regex.Replace(tmp,
"(?<begin>\\*{1})(?<content>.+?)(?<end>\\*{1})",
"<strong>${content}</strong>",
RegexOptions.Compiled);

// Replacing italics
tmp = Regex.Replace(tmp,
"(?<begin>_{1})(?<content>.+?)(?<end>_{1})",
"<em>${content}</em>",
RegexOptions.Compiled);

// Replacing lists
tmp = Regex.Replace(tmp,
"(?<begin>\\*{1}[ ]{1})(?<content>.+)(?<end>[^*])",
"<li>${content}</li>",
RegexOptions.Compiled);
tmp = Regex.Replace(tmp,
"(?<content>\\<li\\>{1}.+\\<\\/li\\>)",
"<ul>${content}</ul>",
RegexOptions.Compiled);

// Quoting
tmp = Regex.Replace(tmp,
"(?<content>^&gt;.+$)",
"<blockquote>${content}</blockquote>",
RegexOptions.Compiled | RegexOptions.Multiline).Replace("</blockquote>\n<blockquote>", "\n");

// Paragraphs
tmp = Regex.Replace(tmp,
"(?<content>)\\n{2}",
"${content}</p><p>",
RegexOptions.Compiled);

// Breaks
tmp = Regex.Replace(tmp,
"(?<content>)\\n{1}",
"${content}<br />",
RegexOptions.Compiled);

// Code
tmp = Regex.Replace(tmp,
"(?<begin>\\[code\\])(?<content>[^$]+)(?<end>\\[/code\\])",
"<pre class=\"code\">${content}</pre>",
RegexOptions.Compiled);

// Now hopefully tmp will contain perfect HTML 
```

觉得这里的代码很难看的朋友，也可以看[这里](http://code.google.com/p/stacked/source/browse/trunk/WebSite/App_Code/QuizItem.cs)...

这是完整的“wiki 语法”；

这里的语法：

```
Link; [http://x.com text]

*bold* (asterisk on both sides)

_italic_ (underscores on both sides)

* Listitem 1
* Listitem 2
* Listitem 3
(the above is asterixes but so.com also creates lists from it)

2 x Carriage Return is opening a new paragraph

1 x Carriage Return is break (br)

[code]
if( YouDoThis )
  YouCanWriteCode();
[/code]

> quote (less then operator) 
```

如果有一些“正则表达式大师”想回顾这个正则表达式逻辑，我会非常感激 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T08:32:24.510

不要在这个任务中使用正则表达式，这很危险，不会让你开心。用户输入可能会以超出想象的方式被破坏（故意或意外），没有正则表达式能够涵盖所有可能的情况。

具有上下文和嵌套概念的解析器在这里要好得多。

您能否发布您允许的语法的完整示例，以便人们可以开始告诉您如何解析它？

* * *

编辑：您可以研究为此使用（可能修改的）[Markdown](http://daringfireball.net/projects/markdown/)解析器的可能性。有一个可用的 .NET 开源变体：[Markdown.NET](http://aspnetresources.com/blog/markdown_announced.aspx)，至少查看源代码可能是值得的。也许修改它以满足您的需求并不太难。

# c - 在 C 中使用 void* 指针的缺点

> ID：339880
> 
> 赞同：0
> 
> 时间：2008-12-04T08:23:43.140
> 
> 标签：c, void-pointers

在 C中使用有很多缺点`void *`（内存相关、类型相关、效率方面......）。尽管它们提供了灵活性，但我们还是经常使用它们。

列出使用的缺点/缺点`void *`（以及 C 中的首选解决方案 - 如果可能）。

**编辑：** 请通过以下链接： [http ://attractivechaos.wordpress.com/2008/10/02/using-void-in-generic-c-programming-may-be-inefficient/](http://attractivechaos.wordpress.com/2008/10/02/using-void-in-generic-c-programming-may-be-inefficient/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-04T08:31:46.400

void 指针没有效率问题。void 指针的唯一限制是：

*   出于明显的原因，您不能取消引用 void 指针
*   `sizeof(void)`是非法的
*   您不能对 void 指针执行指针算术

然而 GCC 假定它`sizeof(void)`是 1 并允许对 void 指针进行指针算术 -[见这里](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Pointer-Arith.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-04T08:34:13.290

我不同意这个问题的前提。我们在 C 中使用 void* 是因为它是获得多态性的唯一方法。示例：库函数 qsort 和 bsearch。只有一个缺点，那就是基于 void * 的多态是不安全的：一旦你将一个指针强制转换为 void *，没有什么可以阻止你错误地将 void * 强制转换为**错误**的指针类型。我的学生经常犯这个错误。

可能存在效率成本，因为有时需要分配堆空间才能使用多态数据结构。

任何想了解使用 void * 的多态数据结构的优势和权衡的人都应该得到一份 Dave Hanson 的书[C 接口和实现](http://www.cs.princeton.edu/software/cii/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-04T08:29:29.180

呃......我不确定有那么多。当然，你不应该在不必要的`void*`时候使用。如果您可以使用定义明确的类型，那么就这样做。

以我的经验，`void*`最适合“匿名”指针（多么令人震惊！），如`malloc()`'s 返回值，以及仅处理不透明的位缓冲区时。通常，您希望在例如字节级别处理这些缓冲区，然后您`unsigned char *`当然会使用 .

只是在需要指针的地方随意使用`void*`就会被破坏、发臭的代码，当然要避免。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T20:24:47.817

链接到的帖子将操作与指向 C++ 模板操作的 void 指针进行了比较，并得出结论认为模板更有效。这并不奇怪，而且我见过的 C++ 代码很少或从不使用 void 指针。与其他 C++ 工具相比，它通常没有任何优势，并且可能是类型系统中的一个大漏洞。

但是，C 没有 C++ 样式的模板，并且 void 指针是实现必须独立于数据类型的功能所必需的。

因此，当您使用 C 编写并且需要泛型时，空指针是获得它的最有效方法（因为它们是唯一的方法）。当您使用 C++ 编写代码时，几乎所有 void 指针可以完成的事情都有更好的方法，所以不要使用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-04T14:46:51.837

您给定的链接部分正确。特别是，当您不处理对象（结构）时，或者通常不处理尚未分配的类型时。使用 int、double 等本机类型和 void-pointers（例如对于容器）几乎总是一件令人讨厌的事情，因为您可以选择将 int（对于 double 这不起作用）转换为指针或您需要为数据类型分配额外的内存。

第一选择很糟糕，因为它不可移植，0 可能不允许作为值，而且感觉很糟糕。第二种选择会浪费内存，并且由于额外的分配确实会（大量）减慢速度。

**但是**在大多数情况下，您不是在处理本机类型，而是在处理对象，最好是使用指向已经分配的对象的指针，至少我这样做。我从不需要哈希表或整数或双精度映射。仅仅为了指针的类型安全而使用不同的容器实现对我来说是错误的，因为每个实现都会增加你的二进制大小。因此，如果您只需要一个容器来存储指针，那么使用 void-pointers 不会减慢或浪费内存。

但请注意，这都是关于容器实现的，就像你提到的博客文章一样。一般来说，如果不使用 void-pointers，您将无法完成许多事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-21T05:46:21.790

我不知道，我发现 void 指针对于访问不同的抽象级别 (ABC) 非常有效。作为在不同抽象级别导航相互关联的类的一种方式。它是如此简单，它太棒了。就像 e 的公式或黄金比例一样，应该有一个崇拜虚空*的神秘学*它很棒:)

# c# - 从主线程调用函数并使其与主线程中的函数并行工作（第 2 部分）

> ID：339885
> 
> 赞同：-1
> 
> 时间：2008-12-04T08:25:41.717
> 
> 标签：c#, .net, multithreading

谢谢你所有的重播..我试过你的选择，我想问一下这是否正确，两个线程是否并行工作..

这是我的代码：

// 在 Form.Load() 中

```
 Timer1.Enabled = true;
        Timer1.Start();

        if (InvokeRequired)
        {
            Invoke(new GetFromServerHandler(GetFromServer));
            Invoke(new GetFromPCHandler(GetFromPC));
        }
        else
        {
            ServerQuranTreeView.Nodes.Clear();
            GetFromServer();
            GetFromPC();
        } 
```

// 另外 2 个函数，分别是委托和函数 (GetFromServer) 和 (GetFromPC)

```
 private delegate void GetFromServerHandler(); 
    private void GetFromServer()
    {
    }

    private delegate void GetFromPCHandler(); 
    private void GetFromPC()
    {
    } 
```

// 现在应用程序需要几秒钟才能启动（我解释说它需要这个时间才能从服务器获取数据）

是吗，还是我错过了什么？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T08:36:55.343

我真的不明白你在这里要做什么：S 请澄清。至少我可以说你通常不需要在 Form_Load 处理程序中调用。

而且您确实必须修复帖子的标签，它们应该对您的问题具有描述性，即：类似于 c# threading invoke。

你必须帮助我们帮助你。顺便说一句，如果您已经就该主题提出过问题，您至少可以包含指向该问题的链接。

# linux - 如何在bash中将密钥绑定到sigkill？

> ID：339887
> 
> 赞同：11
> 
> 时间：2008-12-04T08:25:53.697
> 
> 标签：linux, bash, sigkill

我正在开发我的应用程序（在 Linux 上），遗憾的是它有时会挂起。我可以`Ctrl+C`用来发送 sigint，但我的程序忽略了 sigint，因为它太远了。所以我必须做进程杀舞：

```
Ctrl+Z
$ ps aux | grep process_name
$ kill -9 pid 
```

当我按下 - 说 - 时，有没有办法配置 bash 将终止信号发送到当前进程`Ctrl+Shift+C`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T08:42:26.907

我认为没有任何密钥可以用来发送 SIGKILL。

SIGQUIT 会代替吗？如果你没有发现，默认是核心转储进程。默认情况下这是 ^\。你可以通过运行看到这一点：

```
$ stty -a 
```

在一个终端。它应该说：

```
quit = ^\ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-04T08:49:32.010

您可以通过按 ^\ 向当前前台进程发送 SIGQUIT 信号（默认情况下，您可以运行`stty -a`以查看 的当前值`quit`。）

您还可以通过运行从 shell 中终止最后一个后台进程

```
$ kill %% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T08:35:32.227

鉴于 SIGKILL 没有绑定键，您可以做的是创建一个别名来保存一些输入，如果 SIGQUIT 没有为您删除它。首先，

```
Ctrl+Z
$ ps aux | grep process_name
$ kill -9 pid 
```

dance 可以总结为（**如果只有一个你想杀死的进程实例**）为

```
Ctrl+Z
$ pkill -9 process_name 
```

如果您的用例总是挂起然后杀死，您可以创建一个别名来杀死最后一个运行的进程

```
$alias pks="pkill -9 !!:0" 
```

在 ~/.bash_profile 中添加该别名。

# ruby-on-rails - Representing a year with RoR?

> ID：339902
> 
> 赞同：4
> 
> 时间：2008-12-04T08:34:12.527
> 
> 标签：ruby-on-rails, ruby

Suppose you are implementing a publication database and creating migrations to represent different publications. Each publication has a "year" associated with it.

`t.column :year, ???`

Would this year be best represented as an integer, date, or datetime?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T09:22:36.937

I suggest using integer. Both `Date` and `DateTime` have more precision than you want, which could be misleading. Even if you initialize them w/only a year, they will store a default month and day (Jan, 1). For example, if you used `Date`, your output would look like this:

```
>> m = YourModel.create(:year => '2008')

>> m.year.to_s
=> "2008-01-01" 
```

If you use integer you get what you'd expect:

```
>> m = YourModel.create(:year => '2008')

>> m.year.to_s
=> "2008" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-04T16:07:06.153

I would recommend just going with Rails conventions and doing a `Date` data type. This way, if you ever *do* need the month and day, you can retrieve it. Plus, it's simple to do:

```
YourModel.date.year  # => "1999" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T09:04:04.150

Well, if you only care about the **year**, an integer will do just right. If you're not certain that you will never, ever, need month and day, then date, and if you also may need the hour/minute/second, then datetime, but if you need a datetime, it should not be called year :-)

# .net - 无法在 Atlas 更新面板中生成 Excel

> ID：339907
> 
> 赞同：1
> 
> 时间：2008-12-04T08:36:50.023
> 
> 标签：.net, asp.net, .net-2.0, updatepanel

我无法在 Atlas 更新面板中生成 excel。（由于无法在更新面板中结束/写入 [XML] 响应）**我不想使用 asp:updatepanel** .. 还有其他方法吗？

任何正确的答案将不胜感激......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-05T12:07:34.340

我想你不需要，因为你可以发送一个普通的请求来生成excel文件，而不离开当前页面，产生与使用AJAX相同的效果。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
    Response.clear()
    Response.ContentType = "application/ms-excel;"
    Response.AppendHeader("content-disposition", "attachment; filename=""excel-file.xml""")

    'write all the file to the response object

    Response.Flush()
    Response.End()

End Sub 
```

# design-patterns - 使用哈希函数进行文件存储？

> ID：339908
> 
> 赞同：7
> 
> 时间：2008-12-04T08:36:52.677
> 
> 标签：design-patterns, file-storage

在文件系统中存储大量文件/blob 的常用技术是使用散列函数来确定文件路径；例如 hash(identifier) -> "o238455789" -> o23/8455/789 （通常也有哈希冲突策略）

这种技术是否有名称（它是“模式”吗？），以便我可以通过搜索[ACM 数字图书馆](http://portal.acm.org/dl.cfm)或类似的在线计算文献数据库找到它。

有没有探讨问题/解决方案的书籍/论文？

PS感谢有用的注释-但没有一个解决上面给出的技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-06T14:47:30.290

我认为这是微软在 SQL Server 2008 中使用 FILESTREAM 存储所做的。它允许在 SQL Server 内部存储 BLOB 数据，但允许您直接从磁盘访问文件，从而为您提供出色的性能。

Microsoft 发布了一份关于管理您可能感兴趣的[非结构化数据的白皮书。还有一篇](http://www.microsoft.com/sqlserver/2008/en/us/wp-sql-2008-manage-unstructured.aspx)[MSDN 文章描述了 FILESTREAM](http://msdn.microsoft.com/en-us/library/cc949109.aspx)以及文件存储的优缺点以及是否为 BLOB 到 BLOB

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-11-12T09:53:09.727

美国专利 5742807 涉及此
[http://www.freepatentsonline.com/5742807.html](http://www.freepatentsonline.com/5742807.html)

> 用于管理开放文档库中的多个电子存储文档的系统和方法采用单向散列函数来计算存储文档的散列作为索引链接。文档管理索引将存储在存储库中的原始文档的属性映射到散列和文档。哈希到位置索引将哈希映射到存储库文件系统中文档的地址位置。属性指向散列，然后散列指向将属性链接到位置的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T13:42:17.660

@克里斯金普顿

这将被称为索引。分片或分区更多的是关于如何拆分文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T09:55:14.890

这种听起来像[sharding](http://en.wikipedia.org/wiki/Shard_(database_architecture))，但我可能错过了其中的微妙之处。

同样，我没有看到很多关于它[的文章——highscalability.com 上的一些文章](http://highscalability.com/tags/shard)

# database - 检索记录的唯一标识符键值

> ID：339910
> 
> 赞同：3
> 
> 时间：2008-12-04T08:37:16.590
> 
> 标签：database, uniqueidentifier

在 SQL Server 2005 的上下文中，我有一个表，其主键是唯一标识符 (GUID)，默认值由 newid() 函数生成。我想编写一个将新记录插入表中的存储过程。如何获取记录的PK值？对于身份声明的字段，这很容易——我调用 scope_identity()。我应该如何继续使用指南？

谢谢，卢锡安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T09:03:53.510

**在插入之前生成 GUID 会引入索引碎片。**

无需在插入前声明 GUID，

我会推荐：

1.  使用 NEWSEQUENTIALID 默认约束生成连续的 Guid。（这将消除索引碎片——Guids 作为主键的一个众所周知的问题）。

2.  使用新的 OUTPUT 子句（sql server 2005 中的新），这将使您能够获得新插入的 GUID。

下面的例子：

```
DECLARE @outputTblCustomer1 TABLE (CustomerID uniqueidentifier)

-- Customer1  

INSERT INTO dbo.Customer1 (CustomerNumber, LastName) OUTPUT INSERTED.CustomerID INTO @outputTblCustomer1 VALUES (-1, N'LastName')  

SELECT CustomerID FROM @outputTblCustomer1

-- Customer3 

INSERT INTO dbo.Customer3 (CustomerNumber, LastName) VALUES (-1, N'LastName')  

SELECT SCOPE_IDENTITY() AS CustomerID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T08:43:47.310

我会在插入记录之前生成一个新的 Guid，并明确使用这个新的 Guid 作为记录的 PK。然后，您在插入后使用该 guid，知道它指的是您刚刚插入的行，例如

```
DECLARE @newGuid uniqueidentifier
SET @newGuid = newid()

INSERT INTO myTable(id, stringval)
VALUES (@newGuid, "Hello")

SELECT * FROM myTable
WHERE id = @newGuid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T08:55:46.757

您必须在存储过程中创建唯一标识符并将其插入表中，然后在插入完成后返回值。

```
CREATE PROCEDURE insNewGuidIdRow 
    @newId  UNIQUEIDENTIFIER output,
    @otherData  NVARCHAR(10)
AS
BEGIN
    SET @newId = NEWID()

    INSERT INTO GuidIdTable(id, otherData)
    VALUES (@newId, @otherData)
END 
```

它只会使用插入的值，而不是创建一个新的 guid 作为默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T08:46:13.047

您可以使用`SELECT`语句将其作为行返回，`OUTPUT`如果一次是一行，则可以使用参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T08:48:39.033

如果您已经在存储过程中，则可以检索 newid()，执行插入并返回 guid：

```
CREATE PROCEDURE Insert_myTable(@values...) AS

DECLARE @pk GUID
SET @pk = NEWID()

INSERT INTO myTable(PKID, values...) VALUES (@pk, @values...)

SELECT @pk 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T08:57:20.247

对于查询：

如果您的主键列是第一列使用 executescalar() 执行您的插入 stmt...

它将返回查询返回的结果集中第一行的第一列。

对于过程： INSERT INTO tblBrowser (IDString) VALUES (@IDString) SET @ID = @@Identity 声明一个 ado 参数专门作为返回参数，它将接收 sproc 返回的值 Set par = .CreateParameter("intOutput", adVarChar，adParamOutput，30）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-07T19:44:38.177

使用如下表格：

```
CREATE TABLE [dbo].[TableName ](
    [Code] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
    [Name] [nvarchar](100) NOT NULL)

ALTER TABLE [dbo].[TableName ] ADD  CONSTRAINT [DF_Questionnaire_Code]  DEFAULT (newid()) FOR [Code] 
```

和一个插入 SQL 之类的：

```
INSERT INTO TableName (Name)
OUTPUT  Inserted.Code AS NewGUID
VALUES  ('TEST') 
```

您将获得新的 GUID 作为输出：

```
NewGUID
------------------------------------
F540C0F8-ADBC-4054-BAB6-1927DE59FA99 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-23T13:38:22.497

使用对我有用的这个

```
 DECLARE @id uniqueidentifier;
  SELECT @id=NEWID()    
  INSERT INTO MyTable(ID,other)
  VALUES(@id,'other'); 
```

# c# - 访问程序集范围之外的内部属性

> ID：339912
> 
> 赞同：2
> 
> 时间：2008-12-04T08:37:43.347
> 
> 标签：c#, oop, language-features

我有内部属性的类：

```
internal virtual StateEnum EnrolmentState  
{
    get { ..getter logic }
    set { ..setter logic }
} 
```

但是我希望能够在程序集之外访问此属性，因此我创建了仅返回此属性的方法：

```
public StateEnum GetCurrentState()
{
    return EnrolmentState;
} 
```

但是当我从这个程序集之外的类中调用这个方法时，我得到了一个异常

`(System.TypeLoadException: Method 'get_EnrolmentState' on type 'EnrolmentAopProxy' from assembly '44fe776f-458e-4c5d-aa35-08c55501dd43, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' is overriding a method that is not visible from that assembly.)`

所以可以以任何方式访问程序集之外的内部成员，或者我应该考虑一种不同的方法。

顺便提一下，这个类被用作 O/R 映射器实体 (NPersist)，它被 O/R 映射器覆盖以注入持久性代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T08:51:45.033

为什么财产首先是内部的？如果您想公开访问它，请将其设为公开。我假设您对此有一定的控制权，否则您将无法首先添加公共方法来访问它。

如果您只希望选定的其他程序集能够访问它，那`InternalsVisibleTo`是您的朋友（双关语不是故意的） - 但正如 Erik 所说，您应该在那时仔细考虑设计。

至于为什么您会收到该特定错误 - 看起来您的 AOP 代理仍在尝试覆盖内部属性，而不是使用您的公共方法。很难知道您是否可以在不了解您的特定设置的情况下更改它 - 但将属性公开可能是一个更简单的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T08:46:43.403

这听起来像你应该重新考虑你的设计选择。内部用于避免您尝试做的事情，因此请考虑使用某种对属性的公共访问。

可以使用 InternalsVisibleTo 属性使特定程序集能够访问内部属性，但从我的角度来看，这是一个糟糕的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T10:43:45.960

是的，我同意这是一个奇怪的设计。我将使用受保护的修饰符，因为`InternalVisibleTo`属性对我不起作用。

# html - 在 CSS 中设置 cellpadding 和 cellspacing？

> ID：339923
> 
> 赞同：3553
> 
> 时间：2008-12-04T08:45:47.323
> 
> 标签：html, css, html-table, alignment

在 HTML 表格中，`cellpadding`and`cellspacing`可以这样设置：

```
<table cellspacing="1" cellpadding="1"> 
```

如何使用 CSS 实现相同的功能？

* * *

## 回答 #1

> 赞同：3772
> 
> 时间：2010-07-09T02:34:02.337

**基本**

为了控制 CSS 中的“cellpadding”，您可以简单地`padding`在表格单元格上使用。例如对于 10px 的“cellpadding”：

```
td { 
    padding: 10px;
} 
```

对于“cellspacing”，您可以将`border-spacing`CSS 属性应用于您的表格。例如对于 10px 的“cellspacing”：

```
table { 
    border-spacing: 10px;
    border-collapse: separate;
} 
```

此属性甚至允许单独的水平和垂直间距，这是老式的“单元格间距”无法做到的。

**IE 中的问题 ≤ 7**

这将适用于几乎所有流行的浏览器，除了 Internet Explorer 到 Internet Explorer 7，你几乎不走运。我说“几乎”是因为这些浏览器仍然支持`border-collapse`合并相邻表格单元格边界的属性。如果您试图消除单元格间距（即 ），`cellspacing="0"`那么`border-collapse:collapse`应该具有相同的效果：表格单元格之间没有空格。但是，这种支持是有问题的，因为它不会覆盖`cellspacing`table 元素上的现有 HTML 属性。

简而言之：对于非 Internet Explorer 5-7 浏览器，`border-spacing`处理您。对于 Internet Explorer，如果您的情况恰到好处（您想要 0 个单元格间距并且您的表格尚未定义它），您可以使用`border-collapse:collapse`.

```
table { 
    border-spacing: 0;
    border-collapse: collapse;
} 
```

注意：有关可以应用于表格以及适用于哪些浏览器的 CSS 属性的详细概述，请参阅这个[奇妙的 Quirksmode 页面](http://www.quirksmode.org/css/tables.html)。

* * *

## 回答 #2

> 赞同：1003
> 
> 时间：2012-06-12T10:24:17.730

## 默认

浏览器的默认行为等价于：

```
table {border-collapse: collapse;}
td    {padding: 0px;} 
```

         ![在此处输入图像描述](https://i.stack.imgur.com/cukle.png)

## 单元格填充

设置单元格内容和单元格壁之间的空间量

```
table {border-collapse: collapse;}
td    {padding: 6px;} 
```

        ![在此处输入图像描述](https://i.stack.imgur.com/c0ght.png)

## 单元格间距

控制表格单元格之间的空间

```
table {border-spacing: 2px;}
td    {padding: 0px;} 
```

        ![在此处输入图像描述](https://i.stack.imgur.com/WNuBP.png)

## 两个都

```
table {border-spacing: 2px;}
td    {padding: 6px;} 
```

        ![在此处输入图像描述](https://i.stack.imgur.com/eyZQl.png)

## 两者（特殊）

```
table {border-spacing: 8px 2px;}
td    {padding: 6px;} 
```

        ![在此处输入图像描述](https://i.stack.imgur.com/gbJ3T.png)

> **注意：**如果有`border-spacing`设置，则表示`border-collapse`该表的属性为`separate`。

[自己试试吧！](http://jsfiddle.net/H4emK/3303/)

[在这里](http://www.htmlcodetutorial.com/tables/index_famsupp_29.html)，您可以找到实现此目的的旧 HTML 方法。

* * *

## 回答 #3

> 赞同：362
> 
> 时间：2009-08-24T15:17:36.447

```
table
{
    border-collapse: collapse; /* 'cellspacing' equivalent */
}

table td, table th
{
    padding: 0; /* 'cellpadding' equivalent */
} 
```

* * *

## 回答 #4

> 赞同：121
> 
> 时间：2008-12-04T09:18:10.377

据我所知，在表格单元格上设置边距并没有任何影响。真正的 CSS 等价物`cellspacing`是`border-spacing`- 但它在 Internet Explorer 中不起作用。

如前所述，您可以使用`border-collapse: collapse`可靠地将单元格间距设置为 0，但对于任何其他值，我认为唯一的跨浏览器方法是继续使用该`cellspacing`属性。

* * *

## 回答 #5

> 赞同：106
> 
> 时间：2011-12-05T04:30:39.990

此 hack 适用于 Internet Explorer 6 及更高版本、[Google Chrome](http://en.wikipedia.org/wiki/Google_Chrome)、Firefox 和[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)：

```
table {
    border-collapse: separate;
    border-spacing: 10px; /* cellspacing */
    *border-collapse: expression('separate', cellSpacing = '10px');
}

table td, table th {
    padding: 10px; /* cellpadding */
} 
```

该`*`声明适用于 Internet Explorer 6 和 7，其他浏览器将正确忽略它。

`expression('separate', cellSpacing = '10px')`返回`'separate'`，但两个语句都运行，因为在 JavaScript 中，您可以传递比预期更多的参数，并且所有这些都将被评估。

* * *

## 回答 #6

> 赞同：71
> 
> 时间：2011-08-20T03:32:59.350

对于那些想要非零单元格间距值的人，以下 CSS 对我有用，但我只能在 Firefox 中对其进行测试。

有关兼容性的详细信息，请参阅[其他地方发布的](https://stackoverflow.com/questions/339923/how-to-set-cellpadding-and-cellspacing-in-css/3209434#3209434)[Quirksmode](http://www.quirksmode.org/css/tables.html)链接。似乎它可能不适用于较旧的 Internet Explorer 版本。

```
table {
    border-collapse: separate;
    border-spacing: 2px;
} 
```

* * *

## 回答 #7

> 赞同：54
> 
> 时间：2011-12-08T16:04:01.137

这个问题的简单解决方案是：

```
table
{
    border: 1px solid #000000;
    border-collapse: collapse;
    border-spacing: 0px;
}
table td
{
    padding: 8px 8px;
} 
```

* * *

## 回答 #8

> 赞同：50
> 
> 时间：2008-12-04T09:06:50.307

另外，如果您愿意`cellspacing="0"`，不要忘记`border-collapse: collapse`在您`table`的样式表中添加。

* * *

## 回答 #9

> 赞同：45
> 
> 时间：2012-06-19T14:57:56.423

用 div 包裹单元格的内容，您可以做任何您想做的事情，但是您必须将每个单元格包裹在一列中以获得统一的效果。例如，要获得更宽的左右边距：

所以CSS将是，

```
div.cellwidener {
  margin: 0px 15px 0px 15px;
}
td.tight {
  padding: 0px;
}
```

```
<table border="0">
  <tr>
    <td class="tight">
      <div class="cellwidener">My content</div>
    </td>
  </tr>
</table>
```

是的，这很麻烦。是的，它适用于 Internet Explorer。事实上，我只用 Internet Explorer 对此进行了测试，因为这是我们在工作中被允许使用的全部内容。

* * *

## 回答 #10

> 赞同：24
> 
> 时间：2014-01-03T03:12:02.537

只需`border-collapse: collapse`用于您的桌子和`padding`用于`th`或`td`。

* * *

## 回答 #11

> 赞同：22
> 
> 时间：2014-04-28T15:08:06.587

此样式用于**完全重置表格**-**单元格填充**、**单元格间距**和**边框**。

我的 reset.css 文件中有这种风格：

```
table{
    border:0;          /* Replace border */
    border-spacing: 0px; /* Replace cellspacing */
    border-collapse: collapse; /* Patch for Internet Explorer 6 and Internet Explorer 7 */
}
table td{
    padding: 0px; /* Replace cellpadding */
} 
```

* * *

## 回答 #12

> 赞同：20
> 
> 时间：2010-02-26T11:25:10.620

待定。对于所有喜欢使用 CSS 的人，您不妨只使用`cellpadding="0"` `cellspacing="0"`它们，因为它们并未被弃用……

其他任何建议`<td>`'s 的边距的人显然都没有尝试过。

* * *

## 回答 #13

> 赞同：18
> 
> 时间：2014-01-08T18:16:33.287

```
table th,td {
    padding: 8px 2px;
}
table {
    border-collapse: separate;
    border-spacing: 2px;
} 
```

* * *

## 回答 #14

> 赞同：17
> 
> 时间：2014-03-15T22:33:41.310

**只需对表格数据使用 CSS 填充规则：**

```
td { 
    padding: 20px;
} 
```

对于边框间距：

```
table { 
    border-spacing: 1px;
    border-collapse: collapse;
} 
```

***但是，由于盒子模型的不同实现，它可能会在旧版本的浏览器（如 Internet Explorer）中产生问题。***

* * *

## 回答 #15

> 赞同：15
> 
> 时间：2012-07-02T13:43:15.890

根据我对 W3C 分类的理解，`<table>`s 仅用于显示数据。

基于此，我发现`<div>`使用背景和所有内容创建一个表格并使用`position: absolute;`和`background: transparent;`...

它适用于 Chrome、Internet Explorer（6 及更高版本）和 Mozilla Firefox（2 及更高版本）。

边距用于（或无论如何）在容器元素之间创建间隔，例如`<table>`,`<div>`和`<form>`, not `<tr>`, `<td>`, `<span>`or `<input>`。将它用于容器元素以外的任何东西都会让您忙于调整您的网站以适应未来的浏览器更新。

* * *

## 回答 #16

> 赞同：13
> 
> 时间：2014-02-27T09:03:37.853

CSS：

```
selector{
    padding:0 0 10px 0; // Top left bottom right 
} 
```

* * *

## 回答 #17

> 赞同：12
> 
> 时间：2017-08-02T09:52:32.293

您可以使用 CSS padding 属性轻松设置表格单元格内的填充。这是产生与表格的 cellpadding 属性相同的效果的有效方法。

```
table,
th,
td {
  border: 1px solid #666;
}

table th,
table td {
  padding: 10px;
  /* Apply cell padding */
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>Set Cellpadding in CSS</title>

</head>

<body>

  <table>
    <thead>
      <tr>
        <th>Row</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>Clark</td>
        <td>Kent</td>
        <td>clarkkent@mail.com</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Peter</td>
        <td>Parker</td>
        <td>peterparker@mail.com</td>
      </tr>
      <tr>
        <td>3</td>
        <td>John</td>
        <td>Rambo</td>
        <td>johnrambo@mail.com</td>
      </tr>
    </tbody>
  </table>

</body>
</html>
```

同样，您可以使用 CSS 边框间距属性来应用相邻表格单元格边框之间的间距，例如 cellspacing 属性。但是，为了使边框间距起作用，边框折叠属性的值必须分开，这是默认设置。

```
table {
  border-collapse: separate;
  border-spacing: 10px;
  /* Apply cell spacing */
}

table,
th,
td {
  border: 1px solid #666;
}

table th,
table td {
  padding: 5px;
  /* Apply cell padding */
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>Set Cellspacing in CSS</title>

</head>

<body>

  <table>
    <thead>
      <tr>
        <th>Row</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>Clark</td>
        <td>Kent</td>
        <td>clarkkent@mail.com</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Peter</td>
        <td>Parker</td>
        <td>peterparker@mail.com</td>
      </tr>
      <tr>
        <td>3</td>
        <td>John</td>
        <td>Rambo</td>
        <td>johnrambo@mail.com</td>
      </tr>
    </tbody>
  </table>

</body>
</html>
```

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2013-06-14T05:51:42.133

试试这个：

```
table {
    border-collapse: separate;
    border-spacing: 10px;
}
table td, table th {
    padding: 10px;
} 
```

或者试试这个：

```
table {
    border-collapse: collapse;
}
table td, table th {
    padding: 10px;
} 
```

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2013-02-14T15:41:57.637

我`!important`在边框折叠后使用

```
border-collapse: collapse !important; 
```

它在 IE7 中对我有用。它似乎覆盖了 cellspacing 属性。

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2016-07-03T13:33:59.523

```
<table>
    <tr>
        <th>Col 1</th>
        <th>Col 2</th>
        <th>Col 3</th>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
</table> 
```

`cell-padding`可以`padding`在 CSS 中给出，而`cell-spacing`可以通过设置`border-spacing`表来设置。

```
table {
    border-spacing: 10px;
}
td {
    padding: 10px;
} 
```

[小提琴](https://jsfiddle.net/8d93cd60/)。

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2014-12-24T13:33:01.780

```
td {
    padding: npx; /* For cellpadding */
    margin: npx; /* For cellspacing */
    border-collapse: collapse; /* For showing borders in a better shape. */
} 
```

如果`margin`不起作用，请尝试设置`display`为`tr`，`block`然后边距将起作用。

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2016-06-03T12:03:26.320

对于表格，单元格间距和单元格填充在 HTML 5 中已过时。

现在对于单元格间距，您必须使用边框间距。对于单元格填充，您必须使用边框折叠。

并确保不要在 HTML5 代码中使用它。始终尝试在 CSS 3 文件中使用这些值。

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2016-09-05T07:25:41.863

```
table {
    border-spacing: 4px; 
    color: #000; 
    background: #ccc; 
}
td {
    padding-left: 4px;
} 
```

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2016-11-02T06:58:13.523

在 HTML 表格中，`cellpadding`and`cellspacing`可以这样设置：

对于**单元格填充**：

只需调用简单的`td/th`单元格`padding`。

**例子：**

```
/******Call-Padding**********/

table {
    border-collapse: collapse;
}

td {
  border: 1px solid red;
  padding: 10px;
}
```

```
<table>
        <tr>
            <th>Head1 </th>
            <th>Head2 </th>
            <th>Head3 </th>
            <th>Head4 </th>
        </tr>
        <tr>
            <td>11</td>
            <td>12</td>
            <td>13</td>
            <td>14</td>
        </tr>
        <tr>
            <td>21</td>
            <td>22</td>
            <td>23</td>
            <td>24</td>
        </tr>
        <tr>
            <td>31</td>
            <td>32</td>
            <td>33</td>
            <td>34</td>
        </tr>
        <tr>
            <td>41</td>
            <td>42</td>
            <td>43</td>
            <td>44</td>
        </tr>
    </table>
```

```
table {
    border-collapse: collapse;
}

td {
  border: 1px solid red;
  padding: 10px;
} 
```

对于**单元格间距**

只需调用简单`table` `border-spacing`

**例子：**

```
/********* Cell-Spacing   ********/
table {
    border-spacing: 10px;
    border-collapse: separate;
}

td {
  border: 1px solid red;
}
```

```
<table>
        <tr>
            <th>Head1</th>
            <th>Head2</th>
            <th>Head3</th>
            <th>Head4</th>
        </tr>
        <tr>
            <td>11</td>
            <td>12</td>
            <td>13</td>
            <td>14</td>
        </tr>
        <tr>
            <td>21</td>
            <td>22</td>
            <td>23</td>
            <td>24</td>
        </tr>
        <tr>
            <td>31</td>
            <td>32</td>
            <td>33</td>
            <td>34</td>
        </tr>
        <tr>
            <td>41</td>
            <td>42</td>
            <td>43</td>
            <td>44</td>
        </tr>
    </table>
```

```
/********* Cell-Spacing   ********/
table {
    border-spacing: 10px;
    border-collapse: separate;
}

td {
  border: 1px solid red;
} 
```

更多 CSS 源链接的表格样式[在这里您可以通过 CSS 获得更多表格样式](http://quirksmode.org/css/css2/tables.html)。

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2021-02-27T19:06:16.000

假设我们想以 HTML5 兼容的方式为我们的表格分配一个 10px 的“cellpadding”和一个 15px 的“cellspacing”。我将在这里展示两种提供非常相似输出的方法。

两组不同的 CSS 属性适用于表格的相同 HTML 标记，但概念相反：

*   第一个使用`border-collapse`( `separate`) 的默认值并用于`border-spacing`提供单元格间距，

*   第二个切换`border-collapse`到`collapse`并将该`border`属性用作单元格间距。

在这两种情况下，单元格填充都是通过分配`padding:10px`给`td`s 来实现的，在这两种情况下，`background-color`分配给它们只是为了更清晰的演示。

**第一种方法：**

```
table{border-spacing:15px}
td{background-color:#00eb55;padding:10px;border:0}
```

```
<table>
<tr>
<td>Header 1</td><td>Header 2</td>
</tr>
<tr>
<td>1</td><td>2</td>
</tr>
<tr>
<td>3</td><td>4</td>
</tr>
</table>
```

**第二种方法：**

```
table{border-collapse:collapse}
td{background-color:#00eb55;padding:10px;border:15px solid #fff}
```

```
<table>
<tr>
<td>Header 1</td><td>Header 2</td>
</tr>
<tr>
<td>1</td><td>2</td>
</tr>
<tr>
<td>3</td><td>4</td>
</tr>
</table>
```

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2017-06-09T16:58:06.197

你可以简单地在你的 CSS 中做这样的事情，使用`border-spacing`and `padding`：

```
table {
  border-collapse: collapse;
}

td, th {
  padding: 1em;
  border: 1px solid blue;
}
```

```
<table>
  <tr>
    <th>head_1</th>
    <th>head_2</th>
    <th>head_3</th>
    <th>head_4</th>
  </tr>
  <tr>
    <td>txt_1</td>
    <td>txt_2</td>
    <td>txt_3</td>
    <td>txt_4</td>
  </tr>
</table>
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2020-03-05T09:24:39.397

**您可以检查以下代码，只需创建一个`index.html`并运行它。**

```
<!DOCTYPE html>
<html>

<head>
  <style>
    table {
      border-spacing: 10px;
    }

    td {
      padding: 10px;
    }
  </style>
</head>

<body>
  <table cellspacing="0" cellpadding="0">
    <th>Col 1</th>
    <th>Col 2</th>
    <th>Col 3</th>
    <tr>
      <td>1</td>
      <td>2</td>
      <td>3</td>
    </tr>
  </table>
</body>

</html>
```

**输出 ：**

[![在此处输入图像描述](https://i.stack.imgur.com/nzzTu.png)](https://i.stack.imgur.com/nzzTu.png)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-02-26T05:30:28.393

将样式直接添加到表格本身怎么样？这不是`table`在您的 CSS中使用，如果您的页面上有多个表格，这是一种**不好的方法：**

```
<table style="border-collapse: separate;border-spacing: 2px;">
    <tr>
        <td style="padding: 4px 4px;">Some Text</td>
    </tr>
</table> 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-11-17T05:09:20.190

我建议这样做，并且特定表格的所有单元格都会受到影响。

```
table.tbl_classname td, th {
    padding: 5px 5px 5px 4px;
 } 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-12-12T10:25:45.850

这对我有用：

```
table {border-collapse: collapse}
table th, table td {padding: 0} 
```

# css - Internet Explorer 提交按钮样式

> ID：339926
> 
> 赞同：1
> 
> 时间：2008-12-04T08:47:05.340
> 
> 标签：css, image, internet-explorer, button, css-selectors

我正在制作一个 Web 应用程序，我从一家分包设计公司获得了它的设计。设计非常好，我喜欢它，但我偶然发现了一件事，我不确定如何很好地实现。

问题是 - 他们重新设计了按钮的外观以匹配页面样式。所以现在我有两个图像 - 按钮向上和按钮向下。在 Opera 和 FF 中，我只是在 css 中这样说：

```
input[type="submit"]
{
    background-image: url(btn_up.png);
}
input[type="submit"]:active
{
    background-image: url(btn_down.png);
} 
```

它就像一个魅力。不幸的是，IE 不理解该`:active`部分。*与大多数 Web 应用程序一样，IE 人群是主要的目标受众，因此至少*在那里看起来不错是相当重要的。

目前我已经使用仅限 IE 的 JavaScript 做了一个庞大的解决方法，但我想知道 - 没有更优雅的方法吗？谷歌和 SO 搜索没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T08:59:49.947

据我所知，CSS 伪类仅用于 IE 中的链接。这可能在 IE8 中发生了变化，但我不知道。所以基本上我不认为有一种通过 CSS 实现它的优雅方式。

这不是一个有用的答案，所以我还要补充一点，我将使用图像和客户端脚本来实现它，这并不优雅，但如果客户端脚本是正确的，则应该允许在所有浏览器中完成这项工作。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-20T18:16:42.823

[http://www.quirksmode.org/css/contents.html#t16](http://www.quirksmode.org/css/contents.html#t16)

“IE 7 在所有元素上都支持 :hover，但不支持 :active。”

# javascript - window.unload 中的 Javascript 内存泄漏清理

> ID：339931
> 
> 赞同：2
> 
> 时间：2008-12-04T08:49:17.317
> 
> 标签：javascript, ajax, web-applications, memory-leaks

Javascript 客户端应用程序。

试图消除内存泄漏会导致丑陋的（至少可以说）代码。

我试图在 window.unload 中进行清理，而不是弄乱所有试图避免它们的代码。

我们主要使用`element.onevent=function(){..};`模式，这会导致关闭（主要是想要的）和内存泄漏。

我们不使用 javascript 框架。

关于如何在退出时正确清理有什么想法吗？

有没有人做同样的事情，或者你想避免他们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-11T17:25:22.487

最好的解决方案是让您推出自己的管理事件处理的方法。因此，在附加事件处理程序时，您的方法可以跟踪所有添加的事件。在卸载时，它可以注销所有处理程序。

我知道你说过你不使用库，但你可以使用他们的代码作为灵感。当您使用 Ext.EventMgr.addListener 时，Ext-js 会这样做。

这是一个简单的 EvtMgr obj，您可以使用它来开始。太简单了，这里没法给大家写完。随意询问有关您喜欢但不知道该怎么做的事情的问题。另请注意，我不会使用 element.onclick 方法，因为您只能添加一个处理程序。我这样做是因为你说你就是这样做的。

```
var EvtMgr = (function(){
  var listenerMap = {};

  // Public interface
  return {
    addListener: function (evtName, node, handler) {
      node["on" + evtName] = handler;
      var eventList = listenerMap[evtName];
      if (!eventList) {
        eventList = listenerMap[evtName] = [];
      }
      eventList.push(node);
    },

    removeAllListeners: function() {
      for (var evtName in listenerMap) {
        var nodeList = listenerMap[evtName];
        for (var i=0, node; node = nodeList[i]; i++) {
          node["on" + evtName] = null;
        }
      }
    }
  }
})(); 
```

另外，请注意带有闭包的处理程序并不是造成泄漏的唯一方法。请参阅我对这个问题的评论[卸载网页后 Javascript 内存泄漏](https://stackoverflow.com/questions/1077840/javascript-memory-leaks-after-unloading-a-web-page/1886359#1886359)

另外，我不明白为什么有些人害怕图书馆。jquery 很小，ext core 也是。如果您在不了解 js 的情况下使用它们，它们可能会很危险。但是如果你的 js 技能扎实，你可以通过重用他们的代码来节省很多工作。当我需要了解某事是如何完成的时，我每天都在使用 ext-js。这就是我给你这几行代码的方式。

管理内存泄漏时要考虑的另一个想法是确保在从 DOM 中删除元素时删除处理程序（node.innerHTML 或任何其他方式）。如果你这样做，你应该从你从 DOM 中删除的节点中删除处理程序。有一些工作可以让它发挥作用，但它应该成为你战略的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T09:18:00.970

避免事件内存泄漏的一种解决方案是委托。简而言之，您将事件处理程序附加到父对象而不是子对象。由于传播，对子项的单击也将注册为对父项的单击，从而触发您的处理程序。通过检查事件的目标属性，您可以决定如何处理它。

由于处理程序附加到父级，因此您可以添加或删除子级而不必担心泄漏。

更详尽的解释可以在这里找到：[http ://www.robertnyman.com/2008/05/04/event-delegation-with-javascript/](http://www.robertnyman.com/2008/05/04/event-delegation-with-javascript/)

这里有一个演示：[http ://www.robertnyman.com/test/event-delegation/event-delegation.html](http://www.robertnyman.com/test/event-delegation/event-delegation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T08:54:42.907

我不确定您对清理的含义是什么，因为 JavaScript 具有自动内存管理功能。但无论如何，据我了解，在卸载窗口后，与 JS 相关的所有内存也会被释放。毕竟 - 页面卸载后不再执行 JS，对吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T09:14:16.720

从我对此的大部分调查来看，没有好的方法可以做到这一点。每个浏览器都有自己的垃圾收集实现。

Firefox 还不错，但 IE6 就很糟糕了。尝试创建超过 60 个对象的任何东西，IE6 会变得非常缓慢。

只是其中一件事，我已经接受了。

# javascript - 脚本的可见性包含在 IFRAME 中

> ID：339935
> 
> 赞同：1
> 
> 时间：2008-12-04T08:51:29.777
> 
> 标签：javascript, html, iframe, include, visibility

例如：

脚本.js：

```
function functionFromScriptJS() {
    alert('inside functionFromScriptJS');
} 
```

iframe.html：

```
<html>
<head>
<script language="Javascript" src="script.js"></script>
</head>
<body>

<iframe>
  <body>
     <script language="JavaScript">
       functionFromScriptJS();
     </script> 
  </body> 
</iframe>

</body>
<html> 
```

上面对 functionFromScriptJS() 的调用不起作用。

第一个猜测 parent.functionFromScriptJS() 也不起作用。

当包含不在 iframe 本身而是在父文档中时，是否可以从 iframe 访问这样的外部函数？

**@Edit：**所以我的错误是我将文档放在 iframe 标签中，我应该将它放在一个单独的文件中并通过标签的 src 属性指定。在这种情况下*parent.functionFromScriptJS()*有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T09:06:54.003

iframe 不支持内联内容。您必须使用 src 属性来引用不同的文件。标签的内部文本`<iframe>`将显示给不支持 iframe 的浏览器。

例子：

```
<iframe src="someFile.html" width="100%" height="300px">
  <p>Your browser does not support iframes.</p>
</iframe> 
```

加载页面后，您应该可以使用`parent.functionFromScriptJS();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T09:17:11.987

我认为最好的解决方案是不使用 iframe（虽然没有正式弃用，但它没有出现在 XHTML 1.1 规范中）并使用 AJAX get 来抓取页面并将其加载到`<div>`

然后javascript函数将正常工作！

# layout - 将矩形堆叠成最方形的排列

> ID：339939
> 
> 赞同：0
> 
> 时间：2008-12-04T08:53:48.210
> 
> 标签：layout, stack, geometry

## 我的情况

*   我有 N 个矩形
*   矩形都具有相同的形状（例如 2 英寸宽 x 1 英寸高） - 让我们将此尺寸称为 Sw 和 Sh 的宽度和高度
*   我想将这些矩形放置在网格中，使矩形完全位于顶部并彼此相邻 - 就像您在电子表格中看到的一样
*   我需要的是：**给定 N、Sw 和 Sh，将这些矩形堆叠成可能的最方形排列的行数 (R) 和列数 (C) 是多少**
*   可以理解的是，R & C 可能提供比需要更多的单元格（例如，如果 N=15,Sw=1,Sh=1 则 R=4,C=4 为 15 个矩形产生 16 个“槽” - 这是可以的。
*   如果 Sw=Sh 那么我卑微的数学技能就足够了——当它们的矩形有不同的宽度和高度时——坦率地说，这超出了我的能力。

## 一些笔记

*   是的，我读过这个问题：[堆叠矩形以尽可能少地占用空间](https://stackoverflow.com/questions/251488/stacking-rectangles-to-take-as-little-space-as-possible)，不，它没有帮助。这也不是同一个问题。这个问题是关于可能具有不同大小的矩形，在这个问题中，矩形具有相同的大小
*   是的，我在 wolfram.com 等网站上搜索过，但没有运气
*   我没有很强的数学背景，所以我解决这个问题的方式本身可能会阻止我找到答案 - 我已经尝试过与平铺、剖析、分解相关的相关搜索，但在那里也没有任何成功

## 一些例子

```
the * indicates the edges of the rects
the | indicates that a cell is "filled-in"
Notice that not all R*C cells are filled in, but only and exactly N cells

IF N=1, Sw=2, Sh=1 THEN R=1, C=1

********
*||||||*
********

IF N=2, Sw=2, Sh=1 THEN R=2, C=1

********
*||||||*
********
*||||||*
********

IF N=3, Sw=2, Sh=1 THEN R=2, C=2

***************
*||||||*      *
***************
*||||||*||||||*
***************

IF N=4, Sw=2, Sh=1 THEN R=2, C=2

***************
*||||||*||||||*
***************
*||||||*||||||*
***************

IF N=5, Sw=2, Sh=1 THEN R=3, C=2

***************
*||||||*      *
***************
*||||||*||||||*
***************
*||||||*||||||*
*************** 
```

## AaronofTomorrow's answer的实现

```
# Implementation of AaronofTomorrow's answer
# implemented in python 2.6
# reasonable output
# works in constant time

import math

def f( N, Sw, Sh ) :
    cols = math.sqrt( float(N) * float(Sh) / float(Sw) )
    cols = round(cols)
    rows = float(N) / float(cols)
    rows = math.ceil(rows)
    return (int(cols),int(rows)) 
```

## 受 Will 的回答启发的另一个实现（2008-12-08 更新）——这是我最终使用的

```
# Another implementation inspired by Will's answer
# implemented in python 2.6
# reasonable output - a bit better in yielding more squarelike grids
# works in time proportional to number of rects
#
# strategy used it to try incrementaly adding a rect.
# if the resulting rect requires more space then two
# possibilities are checked - adding a new row or adding a new col
# the one with the best aspect ratio (1:1) will be chosen 

def g( N, Sw, Sh ) :
    slope = float(Sh)/float(Sw)
    cols = 1
    rows = 1
    for i in xrange( N ) :
        num_to_fit =i+1
        allocated_cells= cols* rows
        if ( num_to_fit <= allocated_cells ) :
            pass # do nothing
        else :
            hc,wc = float(Sh * rows), float(Sw * (cols+1))
            hr,wr = float(Sh * (rows+1)), float(Sw * cols)
            thetac = math.atan( hc/wc)
            thetar = math.atan( hr/wr)
            alpha = math.pi/4.0
            difr = abs(alpha-thetar)
            difc = abs(alpha-thetac)
            if ( difr < difc ) :
                rows = rows +1
            else:
                cols = cols + 1

    return (cols,rows) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T10:13:53.510

基于 Will Dean 的回答，找到他的公式的导数（关于 nCols）：

-N*Sh / nCols + Sw

然后将其设置为 0 并求解 nCols，得到：

nCols = sqrt(N * Sh / Sw)

四舍五入，你应该有最佳的列数：

cols = round(sqrt(N * Sh / Sw))
rows = ceil(N / cols)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T09:12:03.433

我想你会发现“最方形”是通往“最圆形”的一步，这是圆周（周长）最小的点。

你的周长是 2*nRows*Sh + 2*nCols *Sw。您知道 nRows* nCols >= N，我认为在下面将其简化为 nRows*nCols = N 就可以了。

如果不尝试它，我认为您可以有用地尝试找到函数的（最小）：

```
N/nCols*Sh + nCols*Sw 
```

不知道这是否可行，但它使我可以将工作日的开始时间推迟 5 分钟，所以这不是一个致命的损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T09:03:02.077

如果矩形的数量不受限制，则需要找到 Sw 和 Sh 的 LCD（最小公分母）。然后你可以将它除以 Sw 和 Sh 以找到水平和垂直计数。

既然是有限的，那就不一样了。我是否正确理解您必须用完所有矩形并且结果也必须是矩形？我会假设是这样。

在这种情况下，您对于如何排列矩形并没有太多选择。只有那么多整数对在相乘时给出 N。

在您的情况下，我会尝试找到所有可能的整数对（使用简单的 FOR 循环）并查看哪一个最接近正方形。在 FOR 循环中注意，您只需要检查 sqrt(N)，因为之后您找到的每个整数对都与您已经找到的相同，只是相反。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T09:44:56.830

首先，特殊情况的真正正方形矩形或维度为零的矩形。

否则，为了解释的简单，迭代地构建它：

```
    添加一个新行，直到高度大于宽度
    添加一个新列，直到宽度大于高度

```

在代码中可能如下所示：

```
    // 放置第一个图块作为初始化
    int 瓦片 = num_tiles - 1；
    整数行 = 1；
    整数列 = 1；
    整数宽度 = sx;
    int 高度 = sy;

    诠释我=1；// 只是因为我们好奇我们有多少次迭代

    // 构建近正方形
    而（瓷砖> 0）{
        而（（瓷砖> 0）
        && ((宽度 + sx) <= (高度 + sy))) {
            // 添加一列
            瓷砖-=行；
            列++；
            宽度 += sx;
        我++；
        }
        而（（瓷砖> 0）
        && ((height + sy) < (width + sx))) {
            // 添加一行
            瓷砖-=列；
            行++；
            高度 += sy;
        我++；
        }
    }

    // 完毕
    printf("%d = %d (%dx%d) = %dx%d (%dx%d) in %d\n",
    num_tiles,tiles,sx,sy,rows,columns,width,height,i);

```

和一些结果：

```
100 = -5 (10x20) = 7x15 (150x140) 在 21
1000 = -12 (10x20) = 22x46 (460x440) 在 67
10000000 = -1628 (10x20) = 2236x4473 (44730x44720) 在 6708
200 = 0 (7x13) = 10x20 (140x130) 在 29
2000 = -13 (7x13) = 33x61 (427x429) 在 93
9376 中的 20000000 = -3790 (7x13) = 3282x6095 (42665x42666)
400 = -14 (17x13) = 23x18 (306x299) 在 40
4000 = -15 (17x13) = 73x55 (935x949) 在 127
40000000 = -192 (17x13) = 7232x5531 (94027x94016) 在 12762

```

最坏情况 O(n)，对于非常薄的矩形或少量矩形。但是在一般情况下 O(sqrt(n)) ？

# c# - 设计架构，分离项目。我是不是“想多了”？

> ID：339951
> 
> 赞同：3
> 
> 时间：2008-12-04T09:01:18.837
> 
> 标签：c#, visual-studio, architecture

想象一下有以下场景：

您需要创建一个后端与前端分离的系统，这在编程时当然很重要。但是如果你希望能够完全改变后端而不改变前端呢？

例如，在创建一个大型网站时，我会使用以下项目：

**数据**- 处理所有数据连接，即 LINQ 生成的文件和其他部分覆盖。

**接口**——这一层很有趣，这是溢出吗？将接口分开是因为业务逻辑和数据层可能有很多共同的接口，而不是从前面引用数据层，您可以引用接口层，然后让业务逻辑向您发送一个接口，而不是了解数据层中数据对象的正确类和结构。

**业务逻辑**- 这本身就是应用程序的业务逻辑。

**前端**- Web、GUI 或任何需要的东西，当然是代码方面的。

我的问题是，这真的是层次和思维的溢出吗？接口层可能不重要吗？建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T09:17:24.903

接口层只是您将其与其他所有内容分开定义的层。然而，一个接口应该只定义一个服务的边界，所以它不会充满代码。

如果不定义接口传递接口，我看不出你将如何传递接口，我认为这有点过头了**。**

如果您想以设计为先，请从一组简单的接口开始，但如果您发现自己没有预先考虑所有可能性，请准备好扩展它们。

所以真的，你有

*   数据+数据接口
*   业务逻辑+接口
*   前端 + 图形用户界面

在某种程度上，每一层都使用和封装了前一层。接口实际上并没有单独的层，或者您会在层之间放置什么？接口只是意味着两个事物之间的边界，所以就这样使用它。

泛化和泛化是很诱人的，但你最终只是设计了一种新的编程语言或范式。大多数时候，这不是简报的一部分。

简要！当然，我们忘记了。从那开始，确定你的接口，然后开始编写最简单的用例。思维会随着你的前进而发展。

# c# - 升级到 C# 3.0 / VS2008 后，您的编码标准文档有何变化？

> ID：339952
> 
> 赞同：4
> 
> 时间：2008-12-04T09:02:08.303
> 
> 标签：c#, visual-studio-2008, visual-studio-2005, coding-style, upgrade

我们正在将我们的项目从 C# 2.0 / VS2005 升级到 C# 3.0 / VS2008。作为升级的一部分，我们在编码标准文档中添加了一些项目。

从 C# 2.0 / VS2005 升级到 C# 3.0 / VS2008 时，您将如何（或是否）更改您的编码标准文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-04T09:32:24.577

您可以/应该就以下方面提供建议：

*   何时使用查询表达式与点表示法
*   对使用 lambda 表达式的任何限制（例如“不要修改捕获的变量）。（这当然也适用于 C# 2 中的匿名方法。）
*   何时编写扩展方法
*   何时使用隐式类型变量 ( `var`)

其中最后两个引起了一些争议，尤其是`var`.

如果您的约定提供了任何设计指南，我建议您还建议程序员考虑在以前可能使用继承或接口的地方使用委托进行专业化。一个很好的例子是排序——使用投影来指定排序顺序比编写`IComparer<T>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T09:05:13.023

升级恰逢一个新项目，所以当我们搬家时，我们开始使用 StyleCop 和 FxCop 等工具，这些工具改变了我们的编码标准。它也很方便地执行它们：o）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T09:24:55.527

升级本身不会发生任何变化，尽管您可能需要查看围绕新功能的编码标准，例如 LINQ 表达式、布局、Lambda 与查询语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-04T17:42:46.927

我个人的烦恼是`var`“可能”的使用。

“可能”目前被定义为以下情况之一，主要是按照整洁度递减的顺序：

很明显，帮助 DRY：

```
var obj1 = new Something();
var obj2 = (Something)ObscureFunction();
var obj3 = ObscureStuff() as Something; 
```

谨慎，我不在乎，只要它编译：

```
var obj4 = ObscureFunction();
foreach(Something s in obj4) { ... } 
```

复杂泛型和几乎所有 LINQ 结果：

```
var obj5 = ctx.GetQuery<Something>()..ToList(..)..GroupJoin(..)...ToLookup(...); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T17:20:04.693

我对 2008 年新功能的标准：

*   仅对匿名类型谨慎使用 var。
*   鼓励在委托上使用 lambda 表达式。
*   仅当您无法控制源代码时才使用扩展方法

# forms - 输入出生日期的最佳 UI 是什么？

> ID：339956
> 
> 赞同：112
> 
> 时间：2008-12-04T09:03:15.680
> 
> 标签：forms, user-interface, usability

出生日期选择器的最佳方法是什么？

*   3 个文本输入（月/日/年）或一个掩码输入。用户必须使用键盘
*   3 选择框。用户可以使用键盘或鼠标。
*   一个不错的[日期选择器](http://jqueryui.com/demos/datepicker/)。

我想知道什么是最有用和无问题的解决方案，所以用户根本不会感到困惑。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2008-12-04T14:19:21.643

如果您的目标是确保“用户不会感到困惑”，我认为这是最好的选择。

![月、日、年的三个下拉菜单](https://farm4.static.flickr.com/3102/3081701077_ffe742fa2b.jpg?v=0)

我不推荐使用 datepicker 作为**date 的 date**。首先，您必须浏览到年份（单击、单击、单击……），然后浏览到月份（单击更多），然后找到并单击网格上的小数字。

当您不知道确切的日期时，日期选择器很有用，例如您计划在二月的第二周旅行。

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2014-10-16T09:59:54.597

虽然这是一个非常古老的问题，但正确输入出生日期非常重要，尤其是在注册表中。

我认为没有人比谷歌帐户注册做得更好：

![谷歌帐户注册](https://i.stack.imgur.com/zvBf8.png)

从选择框中首先选择月份，然后手动输入日期和年份。简单的。

易于验证。方便用户做对。从 1900 年到现在，选择框中没有回滚年份。无需根据月份输入更新“日”选择框。在网络上工作得很好。在移动设备上工作得很好。适用于所有地区，例如 2014 年 1 月 10 日 - 是 10 月 1 日还是 1 月 10 日？我希望我们将来会更多地看到这种生日选择器格式。

日期选择器只是一个糟糕的解决方案。这么多点击！在我看来，日期选择器只有在知道星期几很重要时才有用，例如订票。

**2016 年 2 月 6 日更新：**我来自英国，所以我更熟悉日/月/年格式，而不是月/日/年。但是，将使用光标选择月份的用户，我相信首先使用选择框要容易得多，而不是输入>选择框>输入。评论日期是 6 月 2 日，而不是 2 月 6 日；）

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-12-04T09:17:12.393

对于高级用户来说文本输入是最好的，如果用户知道日期格式，那是非常快的。对于不太高级的用户，我建议使用日期选择器。因为通常您也有高级和非高级用户，所以我建议结合使用文本输入和日期选择器。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2010-04-08T16:43:00.667

正如[这篇 Jakob Nielsen 文章中所提到的，](http://www.nngroup.com/articles/drop-down-menus-use-sparingly/)**对于用户熟知**的数据，应避免使用下拉列表：

> 用户熟知的数据菜单，例如他们的出生月份和年份。此类信息通常硬连线到用户的手指中，并且必须从菜单中选择此类选项破坏了输入信息的标准范例，甚至可以为用户创造更多的工作。

理想的解决方案可能*如下*所示：

*   为日、月和年提供 3 个单独的文本框（适当标记）
*   根据用户的文化对文本框进行排序。
*   日期和月份文本框的大小应假定为 2 位输入。
*   年份文本框的大小应假定为 4 位数年份。
*   允许用户输入 2 位或 4 位数字的年份。假设 2 位数的年份是 1900，并更新文本框以反映此 onBlur（或在以下确认步骤中）。
*   允许用户输入月份编号或月份名称。

* * *

编辑：这是我们实现 DOB 选择器的方式：使用 HTML5 正则表达式屏蔽文本输入字段以强制 iOS 设备上的数字键盘。

[http://www.huntercourse.com/usa/texas/](http://www.huntercourse.com/usa/texas/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2010-07-16T04:11:58.253

生日与其他日期不同，因为人们通常习惯于输入特定的生日。**带有示例**
的文本框清晰、快速且易于输入：

 **```
 _______
|_______| (example: 31/3/1970) 
```

这应该支持灵活的格式，例如 1/1/1970 或 20/07/70。

如果您必须支持具有不同日期约定的不同文化（例如美国和英国），那么对于不注意该示例的人来说，这可能很容易出错。为避免这种情况，您可以对月份使用
**选择列表，对日期和年份使用文本框**。

```
 _________   __   ____
|March  |V| |__| |____| 
```

这消除了日和月排序之间的歧义，但使用起来有点笨拙。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-12-03T16:34:28.943

你应该看看[**Datejs**](http://www.datejs.com/)。

> Datejs 是一个开源的 JavaScript 日期库。
> 
> 全面，但简单，隐蔽和快速。Datejs 已经通过了所有的考验，准备好出击了。Datejs 不只是解析字符串，它会将它们干净地分成两部分。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-11T11:52:20.467

我对解决方案而不是设计的优势感到困扰。OP 说：“我想知道什么是最有用且无问题的解决方案，这样用户就不会感到困惑了。” 因此，无论是 jQuery、JavaScript、C# 还是 FORTRAN，设计都很重要——这里重要的是 UX 设计，而不是 UI 设计。（另一个避免不正确和不合逻辑的构造“UX/UI”的请求）。

使用文本输入。使用三个单独的框，分别标有日、月和年（或月、日和年）。让用户键入日期。在同一交互中混合文本和列表是一件坏事（例如，不要使用文本输入来表示年份，而是使用日期选择器或列表来表示月份和日期）。

使用使用字段内格式提示的单个文本字段，例如 [ 日/月/年 ] 不要过于严格地要求格式。如果用户在您期望一个月的地方键入 JUN，则在后端使用 June。如果用户在您期望一个月的地方键入 6，则在后端使用 June。如果用户在您期望一个月的地方键入 06，则在后端使用 June。

使用 Occam's Razor 作为指导（实际上，大多数情况下数据将足够准确）。减少认知摩擦（不要让用户思考）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-04T09:25:14.747

我还推荐 DatePicker 和字段的组合

请参阅[此演示](http://www.pradosoft.com/demos/quickstart/?page=Controls.Samples.TDatePicker.Home)，其中日期选择器确实反映了用户在字段中输入的日期。
然而，它基于[使用 Prototype 和 Scriptaculous 的 DatePicker](http://ajaxian.com/archives/datepicker-using-prototype-and-scriptaculous)。我提到它是为了说明。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-04T10:06:38.970

我曾与我的用户一起尝试过 datePicker，但结果对他们来说是一个糟糕的 UI。我最终基于他们的要求是有 3 个文本框，他们可以在其中快速输入 [day] [month] [year] :(

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-04T09:22:42.053

把两者都放在一起，然后互相更新。如果用户从日期选择器中选择日期，则很容易修复文本字段中的小错误点击或可视化您在日期选择器的文本字段中键入的选择。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-04T10:00:43.770

你为什么不测试所有三个并选择表现最好的一个？这似乎是[Google 网站优化器](http://www.google.com/websiteoptimizer)测试的好候选。

可能是您拥有的用户类型或您正在运行的站点类型可能会决定您的解决方案应该不同于“规范”。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-04T09:29:23.850

我通常同时使用两者——一个以正确格式填充文本字段的日期选择器。高级用户可以直接编辑文本字段，喜欢鼠标的用户可以使用日期选择器进行选择。

如果您担心空间，我通常只有文本字段旁边有一个小日历图标。如果您单击日历图标，它会弹出日期选择器。

此外，我发现使用指示正确格式的文本（即：“DD/MM/YYYY”）预先填充文本字段是一种很好的做法。当用户关注文本消失的文本字段时，他们可以输入自己的文本。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-04T14:53:52.680

作为这里的老年人之一，并且在月末出生，我发现出生日期的下拉菜单令人沮丧。我通常必须在两个下拉菜单上向下滚动，这很尴尬。我宁愿输入它。

如果您可以设计一个控件，使其既可以接受下拉菜单也可以被输入，并清楚地表明两者都可以工作，那就太好了。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-08-21T15:43:24.810

我认为是否使用日期选择器取决于日期有多早。如果它们通常在当前月份，并且几乎不会超过几个月，并且您知道 Javascript 将会出现，那么日期选择器就很好。如果日期不是最近的（比如生日），我认为这是最好的选择：

[http://img411.imageshack.us/img411/6328/mockupg.png](http://img411.imageshack.us/img411/6328/mockupg.png)

请注意，这与 Patrick McElhaney 的回答不同，**因为 year 是一个文本框，而不是一个 dropdown**。从数百个元素长的下拉框中选择一个数字对用户来说非常烦人。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-11-25T05:05:36.067

我认为日期选择器只会使输入出生日期的动作更加复杂。

如前所述，对于用户来说，将日期和月份的下拉列表与年份的文本框相结合似乎是最有效的。以这种方式输入出生日期只需不到 10 秒，这比日期选择器要快得多：多亏了 Tab 键（所有用户都应该学会使用它来填写表格），从一个表格开始变得很快元素到下一个。

至少在 Macintosh 下（我不了解 Windows），您还可以使用键盘访问选择框内的日期：感谢 tab 键，您可以将焦点放在表单元素上，然后按箭头键下拉列表，然后输入例如 1967，你会在眨眼间到达那里......</p>

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-04T09:20:49.000

我会选择一个 DatePicker。它是唯一允许专家用户手动输入并引导新手轻松输入日期的组件。

如果您通过按 Tab 进入，但单击按钮，则不应弹出日历。因此，没有专家用户对此感到恼火。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-12-04T09:24:23.923

我更喜欢国际网站的日期选择器（以及带有文档格式的输入框作为后备）。

日期格式各不相同，如果您现在习惯了它们，有时很难阅读。太糟糕了，很多人对 ISO 8601 感到不舒服。:-(

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-12-04T09:45:01.073

我建议为每个字段使用下拉菜单，确保将每个字段标记为日、月和年。日期选择器也可能有帮助，但如果用户没有启用 JavaScript，它将无法工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-06-16T06:20:08.153

谁不使用 jQuery UI DatePicker？

它是可配置的，几乎可以满足任何需求。唯一的缺点是如果你将它包含在 jQuery UI 中，它的占用空间会很大。

## 更新

某些文件大小似乎已更改，因此在下面对其进行了更新。请记住，这些数字仅在上次更新时才是正确的。从那以后情况可能发生了变化。

*   CSS 主题 - 23kb
*   jQuery UI - 71kb 缩小
*   日期选择器 - 38kb
*   加上几张图片（下个月/上个月，我很确定是精灵）

但这还不算太糟糕...

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-01-30T10:46:26.610

JQueryUI 日期时间选择器是最好的选择，因为它允许专业用户在文本框中输入他们自己的值，或者他们可以从选择器中选择它。

设置选择器以允许轻松输入生日或未来日期也很容易：

```
$('#datepicker').datepicker({
    更改月份：真，
    更改年份：是的，
    年份范围：'-100:+50'
});

```

这显示了这样的内容（因为我是新用户，所以无法发布照片：http: [//klalex.com/wp-content/uploads/2009/07/picture-1.png](http://klalex.com/wp-content/uploads/2009/07/picture-1.png)）

和 yearRange 显示从 DateTime.Now.Year - 100 到 DateTime.Now.Year + 50 的日期

发现这个： http: [//klalex.com/2009/07/jquery-ui-datepicker-for-birth-date-input/](http://klalex.com/2009/07/jquery-ui-datepicker-for-birth-date-input/)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2012-11-12T16:46:59.207

我刚刚在 JSFiddle 上发现了一个插件。两种可能的选择：1 个单一输入或 3 个输入，但看起来像一个......（使用 Tab 键转到下一个输入）

[链接]http://jsfiddle.net/davidelrizzo/c8ASE/ 看起来很有趣！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-03-26T14:19:35.660

我想你可以试试插件[生日](http://abecoffman.com/stuff/birthdaypicker/)选择器，

![在此处输入图像描述](https://i.stack.imgur.com/hCVgf.jpg)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-03-26T14:51:03.350

你可以使用插件[cxcalendar](http://code.ciaoca.com/jquery/cxcalendar/)。它看起来像其他日期选择器。但是您可以在单击年月标题后选择年和月。

![在此处输入图像描述](https://i.stack.imgur.com/W9qFX.png)

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2014-07-16T18:53:57.593

我为出生日期选择创建了三个下拉列表，天数根据年份和月份选择动态变化。[http://jsfiddle.net/ravitejagunda/FH4VB/10/](http://jsfiddle.net/ravitejagunda/FH4VB/10/)

```
daysInMonth = new Date(year,month,1,-1).getDate(); 
```

# c# - 2个数字之间的差异

> ID：339961
> 
> 赞同：73
> 
> 时间：2008-12-04T09:06:29.513
> 
> 标签：c#, algorithm, math, numbers

我需要完美的算法或 C# 函数来计算 2 个十进制数之间的差异（距离）。

例如：
**100**和**25**之间的差异是**75**
**100**和**-25**是**125**
**-100**和**-115**是**15**
**-500**和**100**是**600**

是否有 C# 函数或非常优雅的算法来计算这个，或者我必须用*if* s 分别处理每个案例。

如果有这样的函数或算法，它是哪一个？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2008-12-04T09:11:32.573

你可以这样做

```
public decimal FindDifference(decimal nr1, decimal nr2)
{
  return Math.Abs(nr1 - nr2);
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-12-04T09:12:03.353

```
result = Math.Abs(value1 - value2); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-12-08T11:11:51.003

只是添加这个，因为没有人在这里写它：

虽然你肯定可以使用

```
Math.Abs(number1 - number2); 
```

这是最简单的解决方案（也是公认的答案），我想知道没有人写出 Abs 的实际作用。这是一个适用于*Java、C、C# 和其他所有具有类似 C 语法的语言*的解决方案：

```
int result = number1 - number2;
if (result < 0) {
    result *= -1;
} 
```

就是这么简单。你也可以这样写：

```
int result = number1 > number2 ? number1 - number2 : number2 - number1; 
```

最后一个编译后可能会更快；两者都有一个 if 和一个减法，但在某些情况下第一个有一个乘法，最后一个没有。为什么只在某些情况下？一些 CPU 有一个“交换符号”操作，编译器识别出什么`*= -1`，它只是交换符号，所以它不是乘法，而是为提供它的 CPU 发出一个交换符号操作，这个操作和 CPU 操作一样快可以得到（通常是一个时钟周期）。

第一个代码示例实际上是在做 Abs 在大多数实现中所做的事情，以在支持的情况下使用“交换符号”，最后一个代码示例在没有“交换符号”的 CPU 上会更快，并且乘法比加法更昂贵（在现代 CPU，它们通常同样快）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-04T09:18:43.590

我认为在 C# 中不可能，您可能需要查看在 Assembler 中实现它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-09T00:09:36.853

这就是我在企业项目中的做法：

```
namespace Extensions
{
    public class Functions
    {
        public static T Difference<T>(object x1, object x2) where T : IConvertible
        {
            decimal d1 = decimal.Parse(x1.ToString());
            decimal d2 = decimal.Parse(x2.ToString());

            return (T)Convert.ChangeType(Math.Abs(d1-d2), typeof(T));
        }
    }
} 
```

和测试：

```
namespace MixedTests
{
    [TestClass]
    public class ExtensionsTests
    {
        [TestMethod]
        public void Difference_int_Test()
        {
            int res2 = Functions.Difference<int>(5, 7);
            int res3 = Functions.Difference<int>(-3, 0);
            int res6 = Functions.Difference<int>(-3, -9);
            int res8 = Functions.Difference<int>(3, -5);

            Assert.AreEqual(19, res2 + res3 + res6 + res8);
        }

        [TestMethod]
        public void Difference_float_Test()
        {
            float res2_1 = Functions.Difference<float>(5.1, 7.2);
            float res3_1 = Functions.Difference<float>(-3.1, 0);
            double res5_9 = Functions.Difference<double>(-3.1, -9);
            decimal res8_3 = Functions.Difference<decimal>(3.1, -5.2);

            Assert.AreEqual((float)2.1, res2_1);
            Assert.AreEqual((float)3.1, res3_1);
            Assert.AreEqual(5.9, res5_9);
            Assert.AreEqual((decimal)8.3, res8_3);

        }
    }
} 
```

# silverlight-2.0 - 用正确的小数分隔符替换小数点键（来自小键盘）（在 Silverlight 中！）

> ID：339962
> 
> 赞同：0
> 
> 时间：2008-12-04T09:06:39.900
> 
> 标签：silverlight-2.0

当用户在文本框中（在 silverlight 2.0 中）时，我想要做什么：

*   **当用户按下数字键盘上**的小数点 (.)时，我希望将其替换为正确的小数分隔符（在很多国家/地区都是逗号 (,)）

我可以通过签入 keydown 事件来跟踪用户输入了小数点

```
void Cell_KeyDown(object sender, KeyEventArgs e)
{
     if (e.Key == Key.Decimal) 
```

但是如何在 Silverlight 中用另一个键替换该键。`e.Key`是只读的。有没有办法向控件“发送另一个密钥”？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:40:17.917

答案是在 MSDN 的网站上找到的： [Replace-numpad-decimalpoint](http://code.msdn.microsoft.com/Replace-numpad-decimalpoint-c1e0e6cd)

```
Imports System.Threading
Imports System.Windows.Forms

Namespace My

    ' The following events are available for MyApplication:
    ' 
    ' Startup: Raised when the application starts, before the startup form is created.
    ' Shutdown: Raised after all application forms are closed.  This event is not raised if the application terminates abnormally.
    ' UnhandledException: Raised if the application encounters an unhandled exception.
    ' StartupNextInstance: Raised when launching a single-instance application and the application is already active. 
    ' NetworkAvailabilityChanged: Raised when the network connection is connected or disconnected.

    Partial Friend Class MyApplication
        Private Sub MyApplication_Startup(ByVal sender As Object, ByVal e As Microsoft.VisualBasic.ApplicationServices.StartupEventArgs) Handles Me.Startup
            If Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator <> "." Then
                System.Windows.Forms.Application.AddMessageFilter(New CommaMessageFilter)

            End If
        End Sub

    End Class

    Friend Class CommaMessageFilter
        Implements IMessageFilter
        Private Const WM_KEYDOWN = &H100

        Public Function PreFilterMessage(ByRef m As System.Windows.Forms.Message) As Boolean Implements IMessageFilter.PreFilterMessage

            If m.Msg = WM_KEYDOWN Then
                Dim toets As Keys = CType(CType(m.WParam.ToInt32 And Keys.KeyCode, Integer), Keys)
                If toets = Keys.Decimal Then
                    SendKeys.Send(Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator)
                    Return True
                End If
            End If
            Return False
        End Function
    End Class

End Namespace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-08-31T13:44:57.503

```
public class NumericUpDown : System.Windows.Controls.NumericUpDown
{
    [DebuggerStepThrough]
    protected override double ParseValue(string text)
    {
        text = text.Replace(".", Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator);
        return base.ParseValue(text);
    }
} 
```

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:38:41.543

我有一个我在我的winforms应用程序中使用的解决方案，假设它也应该在silverlight中工作。它在 vb 中，但将其转换为 c# 应该不成问题。看看这里：[http ://code.msdn.microsoft.com/Replace-numpad-decimalpoint-c1e0e6cd](http://code.msdn.microsoft.com/Replace-numpad-decimalpoint-c1e0e6cd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T09:24:47.087

您可以在 _LostFocus 中进行更改，无论是将点更改为逗号，还是将正确的文化应用于输入。

它不会按照您的意愿立即进行更改，但会在用户离开文本框后立即进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T09:41:14.980

您可能会阅读“key up”事件而不是“key down”，并在每次按键时用（整个）首选替换字符串替换文本框的全部内容。

但是，我认为您的做法是错误的。键盘上有一个“，”键。我会假设如果您的用户打算输入“，”，因为这是他所在国家/地区的标准，那么这就是他会打的。屏幕上的键替换只会令人困惑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T10:32:19.980

使用 Alterlife 的答案作为替换内容的提示，我有以下工作技巧......但我不喜欢它:-(。

*   这意味着Text属性被设置了两次，一次设置错误的值，然后替换为正确的值
*   它仅适用于文本框
*   感觉就像是某天可能会停止工作的黑客

**因此，非常欢迎提出更好、更通用的解决方案的建议！**

*黑客：*

```
 void CellText_KeyUp(object sender, KeyEventArgs e)
    {
        var DecSep = System.Threading.Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator;

        if (e.Key == Key.Decimal && DecSep != ".")
        {
            if (e.OriginalSource is TextBox)
            {
                var TB = (TextBox)e.OriginalSource;
                string sText = TB.Text;

                int iPos = TB.SelectionStart - 1;
                if (iPos >= 0)
                {
                    System.Diagnostics.Debug.Assert(sText.Substring(iPos, 1) == ".");

                    TB.Text = sText.Substring(0, iPos) + DecSep + sText.Substring(iPos + 1);
                    TB.SelectionStart = iPos + 1; // reposition cursor
                }
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-07T09:14:17.090

您正在尝试覆盖系统的语言环境设置，这可能会使您的用户在他们输入的键得到错误响应时感到困惑......您可以做的是编写一个值转换器，这将确保值正确在写入绑定数据字段之前形成。假设您的文本框绑定到基础数据字段...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-11-13T04:06:27.210

它正在工作：

```
<html>
<heaD>
<script language="javascript">
function keypress1 ()
{
 var e=window.event || e
 unicode = e.charCode ? e.charCode : e.keyCode; 
 if (unicode==46)
   { return (e.charCode ? e.charCode=44 : e.keyCode=44); }
}
function keypress2 ()
{
 var e=window.event || e
 unicode = e.charCode ? e.charCode : e.keyCode; 
 if (unicode==46)
   { return (e.charCode ? e.charCode=46 : e.keyCode=46); }
}
function keyDown(e){
 if (!e){
   e = event
 }
 var code=e.keyCode;
 if(code==110)
   return document.onkeypress=keypress1
 else if(code=188)
   {  document.onkeypress=keypress2 }
}
document.onkeydown = keyDown
</script>
</head>
<body>
<input type=text>
</body>
</html> 
```

# .net - System.Transaction 隐式事务弄乱了我的其他连接

> ID：339963
> 
> 赞同：0
> 
> 时间：2008-12-04T09:06:45.563
> 
> 标签：.net, sql-server, transactions, msdtc

我正在尝试使用 System.Transaction.TransactionScope 创建一个事务来调用一些存储过程，但它似乎并没有自行清理。一旦事务完成（提交与否并且事务范围对象被释放），随后与数据库的连接将以可序列化的读取提交级别打开，而不是像通常那样进行读取提交。

我为每个调用打开和关闭一个连接（很好地关闭并返回到.NET 中的正常连接池），当我完成使用它进行事务处理时，我是否错过了一些显式重置连接的方法？我认为 System.Transaction.TransactionScope 背后的想法是隐藏所有复杂性。

所以我的代码如下所示：

```
 using (var scope = new TransactionScope())
            {
                ... make my 3 stored procedure calls ...

                scope.Complete();

                return returnCode;
            } 
```

我想这是正常的做法。但是，如果我查看 sqlserver profiler，我可以看到正在打开的连接

```
set transaction isolation level serializable 
```

这会扰乱随后的非事务相关数据库活动，而且显然也没有那么快。我可以通过设置一个事务选项来明确地使用 ReadCommited 进行事务来解决这个问题，但在我看来，这不是此操作的理想行为。

我还尝试显式创建一个 Commitabletransaction 对象，创建显式新事务而不是使用环境事务，但仍然没有运气。

任何有关如何解决此问题的想法都将不胜感激，因为如果他们尝试使用 readpast 锁定提示，任何使用可序列化连接的调用都会引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T19:57:18.030

使用[TransactionOptions.IsolationLevel](http://msdn.microsoft.com/en-us/library/system.transactions.transactionoptions.isolationlevel.aspx)

默认[情况下，它是可序列化的](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel.aspx)

```
TransactionOptions transactionoptions1 = new TransactionOptions();
transactionoptions1.IsolationLevel = IsolationLevel.ReadCommitted;
using (var scope = new TransactionScope(TransactionScopeOption.Required, transactionoptions1))
{
    ... make my 3 stored procedure calls ...

    scope.Complete();

    return returnCode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T09:39:46.903

您还应该看到`sp_reset_connection`池中同一连接的使用之间的重置（）；这不会重置隔离级别吗？您是否尝试过重现可序列化的问题（例如，锁升级死锁）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:06:36.877

这是 SQL Server 中已知的设计决策。

*   [sp_reset_connection 不重置隔离级别](http://connect.microsoft.com/SQLServer/feedback/details/243527/sp-reset-connection-doesnt-reset-isolation-level)（12/2006；MS Connect -“设计”）
*   [sp_reset_connection 有什么作用？](https://stackoverflow.com/questions/596365)（02/2009；所以问题）
*   [重用连接时不会重置事务隔离级别](http://support.microsoft.com/kb/972915)（07/2009；知识库文章）
*   [IsolationLevel 被转移到连接池中的连接](http://blogs.msdn.com/b/spike/archive/2009/08/17/isolationlevel-is-carried-over-to-connections-in-connectionpool.aspx)（08/2009；更多细节）
*   [Entity Framework 4.0 中的事务和连接](http://blogs.u2u.be/diederik/post/2010/06/29/Transactions-and-Connections-in-Entity-Framework-40.aspx)（06/2010；避免事务升级）
*   [关于池连接的几件事](http://www.sqlnotes.info/2012/02/01/few-things-about-pooled-connections/)（02/2012；几个连接池陷阱）
*   [SQL Server：跨池连接的隔离级别泄漏](https://stackoverflow.com/questions/9851415)（03/2012；SO 问题）

此外，[使用 new TransactionScope() 被认为是有害的](https://docs.microsoft.com/en-us/archive/blogs/dbrowne/using-new-transactionscope-considered-harmful)（06/2010；避免使用默认构造函数）

# django - Django 外键只读

> ID：339969
> 
> 赞同：1
> 
> 时间：2008-12-04T09:07:37.233
> 
> 标签：django, django-admin

我有两个模型，一个是 Employee，另一个是 Asset，Asset 和 Employee 之间存在多对一关系。并且资产作为 StackedInline 字段添加到员工管理界面，无论如何我可以将资产设置为员工管理中的只读字段。

我的目的是显示员工当前在 Admin 中持有的所有资产，这样他就不会意外删除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T12:32:06.103

编辑：实际上，我认为这不适用于内联模型..

Django 将在 Django 1.1 中添加本机只读字段，该字段应该在 3 月中旬左右发布。

[只读管理字段](http://www.djangosnippets.org/snippets/937/)( [http://www.djangosnippets.org/snippets/937/](http://www.djangosnippets.org/snippets/937/) )

此代码段将允许您在管理员中将字段设置为只读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-03T06:58:30.510

使用此代码并将其作为 ReadonlyAdmin 导入 admin.py。这是只读管理员的修改形式。

```
from django import forms
from django.utils.safestring import mark_safe
from datetime import datetime

class ReadOnlyWidget(forms.Widget):
    def __init__(self, original_value, display_value):
        self.original_value = original_value
        self.display_value = display_value
        super(ReadOnlyWidget, self).__init__()

    def render(self, name, value, attrs=None):
        if self.display_value is not None:
            return unicode(self.display_value)
        return unicode(self.original_value)

    def value_from_datadict(self, data, files, name):
        return self.original_value

#to make fields  foreignkey readonly

class ReadOnlyAdminFields(object):
    def get_form(self, request, obj=None):
        form = super(ReadOnlyAdminFields, self).get_form(request, obj)
        if hasattr(self, 'readonly') and obj is not None:
            for field_name in self.readonly:
                if field_name in form.base_fields:
                    if hasattr(obj, 'get_%s_display' % field_name):
                        display_value = getattr(obj, 'get_%s_display' % field_name)()
                    else:
                        display_value = None
                    if getattr(obj, field_name).__class__ in [unicode , long, int, float, datetime, list]:
                        form.base_fields[field_name].widget = ReadOnlyWidget(getattr(obj, field_name), display_value)
                    else:
                        form.base_fields[field_name].widget = ReadOnlyWidget(getattr(obj, field_name).id, display_value)
            form.base_fields[field_name].required = False
        return form 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T09:44:25.287

我不认为 django-admin 中有一个标志，请查看 Django 书的第 18 章了解更多详细信息，您需要手动破解模板

[http://www.djangobook.com/en/beta/chapter18/](http://www.djangobook.com/en/beta/chapter18/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T09:49:26.087

我认为也许您可以将自定义小部件添加到只是基本表单的字段，除了在所有元素上设置“禁用” - 我无法告诉您如何消除添加新记录的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-20T05:15:53.697

如果您只想显示员工的资产，您可以更改默认的 django admin change_form.html。（您可能还想先禁用内联）

要覆盖默认管理模板，请将管理模板文件夹复制到本地 django 模板文件夹（setting.py 中的 ${TEMPLATE_DIRS}）

而在change_form.html中，有这个块，

```
{% for inline_admin_formset in inline_admin_formsets %}
{% include inline_admin_formset.opts.template %}
{% endfor %} 
```

用于显示内联，在这里您可以做的是，将一些额外的信息，例如当前员工的资产列表，渲染到此模板，并将它们放在内联的原始位置上方。

现在的问题是：如何将这些额外信息呈现给这个模板？这可以通过覆盖员工管理模型中的 change_view() 函数来完成。

例如，在您的 admin.py

```
class EmployeeAdmin(admin.ModelAdmin):
    ...

    def change_view(self, request, object_id, extra_context=None):
        assets = Asset.objects.filter(employee=Employee.objects.get(id=object_id))
        context_data = {'inlines': assets, }
        return super(EmployeeAdmin, self).change_view(request, object_id, extra_context=context_data) 
```

现在回到管理员的 change_form.html，使用模板标签显示来自 EmployeeAdmin 的 extra_context。

例如，

```
{% for inline in inlines %}
    {{ inline }}
{% endfor %}

{% for inline_admin_formset in inline_admin_formsets %}
{% include inline_admin_formset.opts.template %}
{% endfor %} 
```

希望这会有所帮助，这是 django 1.2.4

# c++ - 如何在 Visual Studio 中包含子目录？

> ID：339971
> 
> 赞同：17
> 
> 时间：2008-12-04T09:09:22.750
> 
> 标签：c++, visual-studio, visual-studio-2005, include

我必须包含许多头文件，它们位于不同的子目录中。在 Visual Studio（我使用的是 2005 版）中有没有办法设置一个包含路径，Visual Studio 也会在子目录中搜索头文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-04T09:15:35.220

从设计的角度来看，在 Visual Studio 设置中设置文件夹搜索路径来修复包含问题通常不是一个好主意。您的代码对于具有不同目录布局的不同机器的可移植性会降低。

我的建议是确定您的代码组织，以便子目录的相对路径（相对于您的包含代码）是固定的：

*   将“基本文件夹”添加到项目中（*项目属性 -> 配置属性 -> C/C++ -> 附加包含目录，“附加包含目录”*）
*   将子目录添加到#include 语句，即`#include "subdirectory/somefile.h"`。

这具有额外的好处，即能够查看解决方案中的哪个文件夹包含该文件 - 当您试图找到自己的方式或试图找出文件的用途时，这通常是有用的信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T10:13:58.690

我们还没有找到在 Visual Studio 中设置递归文件夹搜索的方法（尽管 Xcode 设置和使用它们没有问题）。我们所做的是列出文件中的所有目录，并在 C/C++ 命令行附加选项中指定该文件：

@"IncludeFolders.rsp"

我们很少使用递归搜索发现问题，尽管一次意外包含 ``/'' 确实使事情变慢了一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-22T22:19:34.797

我发现在大多数情况下，包括在 MSVC 中，我可以通过使用 SUBST 命令的一些技巧来缩短路径长度。我将展示缩短默认继承的 C++ 包含路径的示例，但您可以为与项目相关的包含路径执行此操作。首先创建一个或多个这样的批处理文件（并从 Windows 资源管理器或命令行运行它们）：

```
MDrive.bat:
subst M: /D
subst M: "C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC"

WDrive.bat:
subst W: /D
subst W: "C:\Program Files (x86)\Windows Kits\8.1\Include"

... This is just and example.  You would do this for your
    project related include directories. 
```

您可以为更长的路径创建其中的一些。在上述情况下，我只是缩短了 MSVC 默认使用的标准继承路径。顺便说一句，Subst 命令在没有管理权限的情况下工作，但不要踩到现有的物理或映射驱动器号（我不确定会发生什么——我现在不想测试它）。

此步骤是可选的。我在 MSVS 2010+ 中添加了一个自定义属性表。 **顺便说一句，如果您不了解您应该了解的自定义属性表。** 请参阅[属性页 (Visual C++)](http://msdn.microsoft.com/en-us/library/675f1588.aspx)。 *VIEW-Other Windows-Property Window*，在Property manager中右键项目，*Add a New Project Properties Sheet*。在*User Macros*下，添加一个宏，例如*MyProjectIncludePaths*并将值（在本例中）设置为

```
M:; M:\atlmfc\include; W:\um; W:\shared; W:\winrt 
```

-- 在这个例子中只有 49 个字符，比默认的要短得多

```
$(VC_IncludePath); $(WindowsSKD_IncludePath) 
```

在宏扩展时转换为

```
C:\Program Files (x86)\Windows Kits\8.1\Include;C:\Program Files (x86)\Windows Kits\8.1\Include\atlmfc\include;C:\Program Files (x86)\Windows Kits\8.1\Include\um;C:\Program Files (x86)\Windows Kits\8.1\Include\shared;C:\Program Files (x86)\Windows Kits\8.1\Include\winrt 
```

根据我的统计，默认值为 270 个字符——即超过 260 个字符——有人能解释一下吗？

在*项目*的属性页（即不是自定义属性表）中，在我的示例中，我去了*Configuration Properties-VC++ Directories*并将*Include Directories*值更改为*$(MyProjectIncludePaths)*，但实际上你会去（在你的如果您创建了一个自定义属性表页面）*C/C++-General*并将*$(MyProjectIncludePaths)*添加到*Additional Include Directories*。

除了继承的 270 个字符路径之外，我还能够在*Additional Include Directories*下添加一些合理长度的路径。也许附加包含目录有自己的长度限制（？）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-04T09:17:41.453

我相信使用递归搜索包含文件会导致比它以错误文件或包含错误版本的形式解决的问题多得多。毕竟，您必须在设置项目时定义一次正确的目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T11:22:44.017

在包含路径中使用它来包含所有子目录

```
${workspaceFolder}
${workspaceFolder}/** 
```

# reporting-services - sql报2008错误

> ID：339987
> 
> 赞同：1
> 
> 时间：2008-12-04T09:14:33.113
> 
> 标签：reporting-services, parameters

大家好，我正在运行一些代码来设置我的报告参数，但在 Visual Studio 2008 中出现以下错误：

> 客户端发现响应内容类型为 ''，但预期为 'text/xml'。\r\n请求失败，响应为空。" System.Exception {System.InvalidOperationException}

这只是最近才发生的，我认为这是因为我在这里的其他机器上运行 sql 2008 而不是 2005？

这是发生错误的代码行：

```
ReportParameter[] expectedParameters = 
_ReportServerClient.GetReportParameters(report, null, false, null, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-04T09:41:28.333

将内容呈现给浏览器的参数错误（HTML 或 XML）类型应给出 MIME 类型。

# java - 一种更好的方式来做 Swing 应用程序

> ID：339995
> 
> 赞同：7
> 
> 时间：2008-12-04T09:17:50.283
> 
> 标签：java, swing, javafx

有没有更好的方法来开发 Java Swing 应用程序？

SWIXML？JavaFX？这里的开发人员还有什么喜欢和推荐的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-04T10:02:29.447

另一种“更好的方法”是通过使用更好的布局管理器：

**[MigLayout](http://www.miglayout.com)**：
一个非常灵活且易于使用的布局管理器，适用于 Swing 和 SWT。
它可以完成表格布局、表单布局和几乎所有 Swing 布局管理器可以通过简单易懂的字符串和/或基于 API 的编码来完成的工作。
它的目标是手动编码布局，就像 Matisse/Group Layout 用于 IDE。

```
JPanel panel = new JPanel(new MigLayout());

panel.add(firstNameLabel);
panel.add(firstNameTextField);
panel.add(lastNameLabel,       "gap unrelated");
panel.add(lastNameTextField,   "wrap");
panel.add(addressLabel);
panel.add(addressTextField,    "span, grow"); 
```

[![替代文字](https://i.stack.imgur.com/OPmug.png)](https://i.stack.imgur.com/OPmug.png)
[（来源：[miglayout.com](http://www.miglayout.com/images/Form.png)）]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T09:48:30.770

[JavaDesktop](http://community.java.net/javadesktop/)是此类问题的非常完整的信息来源。

最近，我发现（但我自己没有直接使用）[Flamingo swing 组件套件](https://flamingo.dev.java.net/)令人印象深刻。
尤其是因为它允许集成一个最新的 UI 设计：功能[区](http://www.pushing-pixels.org/?p=898)

（从某种意义上说，它仍然是经典的 Swing 组件，而不是基于 XML 的 Swing 规范，这不是一种新的开发方式，但我会查看[javadestop 的其他项目以](https://javadesktop.dev.java.net/)获取其他说明来解决您的问题）

![替代文字](https://flamingo.dev.java.net/release-info/4.0/ribbon-minimized-with-popup.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-04T10:49:17.027

我喜欢用[Groovy](http://groovy.codehaus.org/)构建 UI（HTML、SWT 或 Swing） 。[使用Groovy 构建器](http://groovy.codehaus.org/Swing+Builder)要简单得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-18T23:11:31.307

如果您喜欢使用 Groovy 而不是 Java 进行编程，请查看 Griffon： http: [//griffon.codehaus.org/](http://griffon.codehaus.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-04T14:20:22.890

[Swing 应用程序框架](https://appframework.dev.java.net/)是一个轻量级框架，可简化中小型 Java 桌面应用程序的创建和维护。该框架由一个 Java 类库组成，该类库支持以下内容的构造：

*   记住会话之间的状态。
*   更轻松地管理操作，包括作为后台任务运行和指定阻塞行为。
*   增强的资源管理，包括 bean 属性的资源注入。

这是[一篇](http://java.sun.com/developer/technicalArticles/javase/swingappfr/)关于它的文章。

它已与[Netbeans 6.0 及更高版本](http://www.netbeans.org/kb/60/java/gui-saf.html)集成。*******************