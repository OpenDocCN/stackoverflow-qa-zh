# StackOverflow 问答 10416000-10416999

# json - MVC3 / JSON：当我的属性名称通过 DataContract 重命名时，如何使用模型绑定？

> ID：10416000
> 
> 赞同：4
> 
> 时间：2012-05-02T14:39:15.893
> 
> 标签：json, asp.net-mvc-3, datacontract

在向客户端发送数据时，我使用[DataContractJsonSerializer](https://stackoverflow.com/a/6020931/72873)为我的模型数据创建 JsonResult。我的模型表示要在数据表中显示的数据，并且我希望仅更改 JSON 中模型属性的名称，以便通过线路为每个数据表行发送不那么冗长的属性名称。现在，我正在尝试通过 JSON 将数据表单元格值发送到服务器的控制器操作方法。被发回的字段名称仍然是短名称，模型绑定似乎不喜欢那样。我该怎么做才能使模型绑定正常工作并保留通过 JSON 发送备用属性名称的能力？

模型：

```
[DataContract()]
public class UsageListModel {

    [DataMember(Name = "results")]
    public IEnumerable<UsageModel> Usages { get; set; }
}

[DataContract()]
public class UsageModel {

    [DataMember(Name = "job")]
    public string JobId { get; set; }

    [DataMember(Name = "dt")]
    public DateTime UsageDate { get; set; }

    [DataMember(Name = "qty")]
    public int Quantity { get; set; }

    [DataMember(Name = "uom")]
    public string UnitOfMeasure { get; set; }

    [DataMember(Name = "nts")]
    public string Notes { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:54:01.567

它没有那么优雅，但我通常只通过创建一个具有这些短名称属性并且可以在它和实际模型之间来回转换的中间类（我将其称为 ViewModel）来做到这一点。虽然看起来工作很忙，但 ViewModel 可以在这段时间之外发挥作用——例如，如果需要，您可以使用它轻松缓存客户端信息，或者在测试中准确序列化/反序列化客户端的去往/来自客户端的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:10:58.820

[在浏览另一个问题](https://stackoverflow.com/questions/10760035/mvc-model-binding-to-a-collection-where-collection-does-not-begin-with-a-0-index)时，我偶然发现了这个问题的潜在答案。

直到现在我才意识到这一点，但显然你可以为方法参数添加属性。我们举一个简单的例子：

```
public ActionResult SomeMethod(string val) {
    return View(val);
} 
```

如果您调用此 URL -- /MyController/SomeMethod?val=mytestval -- 那么您将在模型中返回“mytestval”，对吗？所以现在你可以这样写：

```
public ActionResult SomeMethod([Bind(Prefix="alias")] string val) {
    return View(val);
} 
```

现在这个 URL 将产生相同的结果：/MyController/SomeMethod?alias=mytestval。

无论如何，我仍然不确定这是否会回答你的问题，但我认为这很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:16:58.660

我仍然不相信 MVC 没有提供一些更简单的方法来使用自定义属性（甚至 .NET 数据合同属性）进行绑定。鉴于它没有......你最好的选择是实现你自己的**IModelBinder**。使用反射获取属性的*DataMember*名称，并在绑定上下文中查找这些值。

这是关于模型绑定的一个很好的参考：http: [//msdn.microsoft.com/en-us/magazine/hh781022.aspx](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)

维护自定义活页夹的一个很好的通用方法：http: [//lostechies.com/jimmybogard/2009/03/18/a-better-model-binder/](http://lostechies.com/jimmybogard/2009/03/18/a-better-model-binder/)

**编辑**

处理已定义类型的通用模型绑定器。要将其添加到您的应用程序中，请在 global.asax 中添加以下行：

```
ModelBinders.Binders.Add(typeof(UsageModel), new CustomModelBinder<UsageModel>()); 
```

和粘合剂：

```
public class CustomModelBinder<T> : IModelBinder
{
    public override bool IsMatch(Type t)
    {
        return t == typeof(T);
    }

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        Type t = typeof(T);
        var entity = (bindingContext.Model ?? Activator.CreateInstance(t));

        // Cycle through the properties and assign values.
        foreach (PropertyInfo p in t.GetProperties())
        {
            string sourceKey;

            // this is what you'd do if you wanted to bind to the property name
            // string sourceKey = p.Name;

            // TODO bind sourceKey to the name in attribute DataMember

            Type propertyType = p.PropertyType;

            // now try to get the value from the context ...
            ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(sourceKey);
            if (valueResult != null)
            {
                bindingContext.ModelState.SetModelValue(sourceKey, valueResult);
                p.SetValue(entity, valueResult.ConvertTo(propertyType), null);
            }
        }
        return entity;
    }
} 
```

# grails - Grails 开发有没有好的 IntelliJ 配色方案？

> ID：10416006
> 
> 赞同：1
> 
> 时间：2012-05-02T14:39:36.423
> 
> 标签：grails, intellij-idea

我用 IntelliJ 搜索并为我的 Grails 项目尝试了十几种配色方案，但所有这些方案都非常不可用。有没有人使用不介意分享的纯色方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:52:53.733

有一个专门的网站：http: [//ideacolorschemes.com/shufflescheme/Groovy](http://ideacolorschemes.com/shufflescheme/Groovy)。我使用我自己上传的[方案](http://ideacolorschemes.com/scheme/Rxs-CJozsL0X8EbXxdLNaHZm86A/spoonman/1.0/Groovy)。

# ssis - 当给定的文件列表存在时执行 SSIS 任务

> ID：10416020
> 
> 赞同：0
> 
> 时间：2012-05-02T14:40:06.327
> 
> 标签：ssis

我有一个有效的 SSIS 任务，该任务每月执行一次并通过给定路径运行，遍历各种 XML 文件并将其内容插入 SQL Server 数据库。

在与确定该 SSIS 任务规则的区域的最后一次会议上，据说该任务只能在路径上存在所有预期文件后才能运行。**有问题的文件有 35 个。**它们的名称是**TUPSTATUS_SXX.xml**，其中**XX**代表从**01 到 35**的数字（巴西这里有 35 个电信部门）。这些文件是由运营这些部门的电信公司生成的。

所以，我的问题是：**只有在我们的目录中存在所有 35 个文件之后，如何运行 SSIS 任务？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:30:27.513

与其在 SSIS 进程连续运行的情况下忙于等待文件夹，不如设置一个 FileSystemWatcher 来触发文件系统条件。使用它来调用您的 SSIS 包。您可以在服务（如果需要更长的时间）或简单的应用程序中实现此观察程序。

另一种方法是使用一个简单的应用程序/脚本来检查计数，这将从任务调度程序中调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:47:41.090

您可以使用脚本任务来计算文件夹中的文件，并且仅在存在 35 个文件时才在管道中进一步执行。虽然如果文件很大并且通过 FTP 传输，最终文件可能存在，但此时尚未完全传输。

# javascript - Javascript表单验证失败

> ID：10416024
> 
> 赞同：0
> 
> 时间：2012-05-02T14:40:19.263
> 
> 标签：javascript, html, validation

我正在尝试使用 java 脚本验证表单.. 但 javascript 不输出任何内容，并且表单完成处理。

这是脚本标签：

这是表单标签：

```
<FORM  id="frm" name="newCustomer" METHOD="POST" ACTION="register.php" onsubmit="return      validateNewCustomer()"> 
```

我创建了这个标签，以便 java 脚本可以编写警告：

```
 <TH WIDTH="30%" NOWRAP> <Label>First Name</Label></TH>
      <TD WIDTH="70%"><INPUT TYPE="TEXT" NAME="f_name" 
                             SIZE="8" MAXLENGTH="8">
         <label class ="err" id="errname"></label> 
```

这是验证功能：

```
 function validateNewCustomer(){

var name = document.getElementById('f_name').value;
var okCustomer = true;

if(name == ""){
document.getElementById('errname').innerHTML = "Error Name";
okCustomer = okCustomer && false;
}

return okCustomer;

} 
```

我应该注意到我试图让函数返回 false ，但它仍然没有停止 php 处理。

我感谢您的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:42:56.310

```
var name = document.getElementByName('f_name').value; 
```

和

`okCustomer = false;`代替`okCustomer = okCustomer && false;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:42:00.107

采用

```
if(name.value == ""){ 
```

代替

```
if(name == ""){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:44:36.657

您的代码使用错误

`var name = document.getElementsByName('f_name').value;`

代替

`var name = document.getElementsById('f_name')[0].value;`

# javascript - 为所有浏览器处理 window.onpopstate 的理想方法是什么？

> ID：10416026
> 
> 赞同：0
> 
> 时间：2012-05-02T14:40:22.773
> 
> 标签：javascript, popstate

对于 chrome，该事件会在页面加载时触发，但在 Firefox 中，它只会在您按下后退或前进按钮时才会触发。那么如何编写一个适用于所有浏览器的脚本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:21:18.903

我会在这个上进行浏览器检测（事实上，我做过）。我正在使用 jquery 的 .data() 设置一个布尔标志来测试：

```
// chrome fires a popstack event on page load, so do a check before proceeding
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
if( is_chrome && !$('body').data('allow-popstate-action') ) {
    $('body').data('allow-popstate-action', true);
    return false;
} 
```

我在绑定到 popstate 事件的函数中添加了这个条件子句，所以第一次在 Chrome 中调用它（在页面加载时），它只是退出函数而不做任何事情。下一次（上一个/后退按钮），它将正常工作。

我在这个项目中使用旧版本的 jQuery，所以我不能使用 jQuery.browser.webkit，但你可能可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:19:51.943

稍微优雅一点的方法是在添加 popstate 侦听器之前添加 1ms 超时。由于初始 popstate 将在任何异步代码执行之前触发，因此您的 popstate 函数将正常工作（仅在前进/后退操作上）：

```
window.setTimeout(function(){
    $(window).on('popstate', function(event){
        // do things
    });
}, 1); 
```

# c# - 表单身份验证不适用于特定页面

> ID：10416027
> 
> 赞同：3
> 
> 时间：2012-05-02T14:40:22.733
> 
> 标签：c#, asp.net, .net, web-config, forms-authentication

我似乎无法隔离我的论坛来为它们设置与站点其他部分不同的权限。

这是我的网站的设置。

```
<location path=".">
  <system.web>
    <authentication mode="None" />
  </system.web>
</location> 
```

我需要隔离我的论坛。目前，出于测试目的，我进行了设置，以便所有用户都被拒绝访问。

```
<location path="~/public/public-forum.aspx">
  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="public/login.aspx" />
    </authentication>
    <authorization>
      <deny users="*" />
    </authorization>
  </system.web>
</location> 
```

我发现我仍然可以访问论坛页面。这向我表明这没有正确设置。

路径属性是否必须是相对的？它是否必须指向访问页面的 URL 或重写的路径？`~/public/public-forum.aspx`是一个被重写的虚拟路径，因此这些名称既不直接也不存在文件。为什么这目前不起作用？

我希望这是解决方案的足够详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:56:09.703

edit2：所以解决方案不仅在评论中：
据我所知，您无法为每个位置指定身份验证模式。
您可以在整个站点中设置表单身份验证模式，并且只需要在安全部分中登录用户。

编辑：
嗯，奇怪，你确定你只编辑了~吗？[他们在这里](http://forums.devarticles.com/net-development-43/section-registered-as-allowdefinition-machinetoapplication-beyond-application-level-10027.html)
讨论您的问题，但我无法想象更改 ~ 会如何触发它。 您能否发布您的整个 web.config？ 另外：您使用的是 iis 6 和虚拟目录吗？

不需要 ~ 符号，试试这个：

```
<location path="public/public-forum.aspx">
  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="public/login.aspx" />
    </authentication>
    <authorization>
      <deny users="*" />
    </authorization>
  </system.web>
</location> 
```

# c - 从C中的png文件中读取颜色值

> ID：10416031
> 
> 赞同：2
> 
> 时间：2012-05-02T14:40:33.043
> 
> 标签：c, image, png

我必须从 c 中的 *.png 文件加载颜色值。matlab中的imread之类的东西。我学习了 png 文件的构造，尝试将文件作为二进制文件打开并写入矩阵，但我可能做错了什么。我试图搜索，但我找不到合适的图书馆。

有什么建议我该怎么做或应该使用哪个库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:47:25.087

您需要先解压缩 PNG 上的 zlib 压缩（如果有），然后才能获得原始颜色值。最简单的方法是通过免费的[libpng](http://www.libpng.org/pub/png/libpng.html)。您会[在此处和其他地方找到](https://stackoverflow.com/search?q=png%20raw)[许多](https://stackoverflow.com/questions/2535528/decompress-png-using-zlib) 关于如何做到这一点的[示例。](https://stackoverflow.com/questions/738863/c-function-to-convert-a-raw-image-to-png)

# azure - 创建新服务命名空间时未列出 Azure 订阅

> ID：10416037
> 
> 赞同：0
> 
> 时间：2012-05-02T14:40:41.807
> 
> 标签：azure

我从 Windows Azure 开始。我尝试按照教程[https://www.windowsazure.com/zh-cn/develop/net/tutorials/multi-tier-application/](https://www.windowsazure.com/zh-cn/develop/net/tutorials/multi-tier-application/)创建一个新的服务命名空间 但是，组合中没有列出订阅，我没有不知道为什么。如图所示。对不起，我不允许发布图像。

ps 我是经理，不是联席经理。而且我在中国（这有关系吗？）

有小费吗？很多谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:45:18.797

您是否确保您使用的实时 ID 与有效订阅正确关联？

此外，中国目前不是 Windows Azure 支持的国家/地区。因此，我认为订阅可能是由第 3 方供应商（或朋友）为您创建的。因此，您需要与他们核实订阅是否已正确设置。此外，鉴于您在不支持购买的地区，您可能需要与该供应商合作以帮助解决问题。

# java - 阅读文本文件后如何打印完整的句子？

> ID：10416041
> 
> 赞同：1
> 
> 时间：2012-05-02T14:40:53.097
> 
> 标签：java, filtering, bufferedreader

我正在尝试阅读一篇技术论文，将所有句子分开，使用过滤器查找句子中的关键术语和短语，然后创建自己的摘要。

到目前为止，我有两个`BufferedReaders`读取一个带有段落的文本文件，然后读取我的过滤器。然后将每一行存储到一个`ArrayList`并打印到控制台以测试它们是否被正确读取。

我想知道我是否以正确的方式使用 a`BufferedReader`而不是 a `Scanner`。我只想能够打印出“。”之后的所有句子。（刀塔 '！' （感叹号）或“？” （问号）现在，所以我知道文件正在被正确读取。

到目前为止，这是我的代码：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.*;
import java.io.*;
import java.util.Scanner;

public class Filtering {

    public static void main(String[] args) throws IOException {
        ArrayList<String> lines1 = new ArrayList<String>();
        ArrayList<String> lines2 = new ArrayList<String>();

        try {
            FileInputStream fstream1 = new FileInputStream("paper.txt");
            FileInputStream fstream2 = new FileInputStream("filter2.txt");  
            DataInputStream inStream1 = new  DataInputStream (fstream1);
            DataInputStream inStream2 = new DataInputStream (fstream2);

            BufferedReader br1 = new BufferedReader(
                new InputStreamReader(inStream1));
            BufferedReader br2 = new BufferedReader(
                new InputStreamReader(inStream2));

            String strLine1;
            String strLine2;

            while ((strLine1 = br1.readLine()) != null) {
                lines1.add(strLine1);
            }

            while ((strLine2 = br2.readLine()) != null) {
                lines2.add(strLine2);
            }

            inStream1.close();
            inStream2.close();
        }   
        catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
        }

        System.out.println(lines1);
        System.out.println(lines2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:53:03.143

*   使用 BufferedReader 读取任何文件是一个好习惯，因为它将缓冲文件而不是逐个访问每个字节
*   不需要 DataInputStream
*   您应该在 InputStreamReader 中指定字符编码
*   您可以在 StringBuilder 中累积所有字符串，以便将整个文本放在一个引用中
*   您可能希望查看[BreakIterator](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)将您的文本拆分为句子。看看 getSentenceInstance()。

* * *

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.text.BreakIterator;

public class Filtering {

    public static void main(String[] args) throws IOException {
        File paperFile = new File("paper.txt");
        File filterFile = new File("filter2.txt");
        // If you want you could roughly initiate the stringbuilders to their
        // approximate future size
        StringBuilder paper = new StringBuilder();
        StringBuilder filter2 = new StringBuilder();

        FileInputStream fstream1 = null;
        FileInputStream fstream2 = null;
        try {
            fstream1 = new FileInputStream(paperFile);
            fstream2 = new FileInputStream(filterFile);

            BufferedReader br1 = new BufferedReader(new InputStreamReader(fstream1, "UTF-8"));
            BufferedReader br2 = new BufferedReader(new InputStreamReader(fstream2, "UTF-8"));

            String strLine1;
            String strLine2;

            while ((strLine1 = br1.readLine()) != null) {
                paper.append(strLine1).append('\n');
            }
            while ((strLine2 = br2.readLine()) != null) {
                filter2.append(strLine2).append('\n');
            }

        }

        catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
        } finally {
            if (fstream1 != null) {
                fstream1.close();
            }
            if (fstream2 != null) {
                fstream2.close();
            }
        }
        String paperString = paper.toString();
        String filterString = filter2.toString();
        System.out.println(paperString);
        System.out.println(filterString);

        // To break it into sentences
        BreakIterator boundary = BreakIterator.getSentenceInstance();
        boundary.setText(paperString);
        int start = boundary.first();
        for (int end = boundary.next(); end != BreakIterator.DONE; start = end, end = boundary.next()) {
            System.out.println(paper.substring(start, end));
        }
    }

} 
```

# c++ - 在 C++ 中枚举环境变量（跨平台）

> ID：10416043
> 
> 赞同：3
> 
> 时间：2012-05-02T14:41:04.920
> 
> 标签：c++, cross-platform, environment-variables

只是一个快速的问题，我希望以前没有被问过。我想知道一种列出进程的所有分配环境变量的方法。我需要它跨平台跨 Windows 和类 UNIX 操作系统。

我知道`getenv()`，但这只会检索变量的值。我需要生成它们的列表。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:46:03.270

似乎您只是在寻找 main 的第三个参数，一个进程环境变量的 char**。

给你：[主要功能](http://en.wikipedia.org/wiki/Main_function_%28programming%29)

该表格的原型是`int main(int argc,char** argv,char** env)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:50:20.997

您可能正在寻找全局变量[`environ`](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html)。

# cucumber - 无法从黄瓜水豚的下拉菜单中选择一个值

> ID：10416050
> 
> 赞同：3
> 
> 时间：2012-05-02T14:41:41.520
> 
> 标签：cucumber, capybara

我正在使用 cucumber 和 capybara 来自动化 Web 应用程序。我必须从下拉列表中选择一个值，但很多时候我都收到类似的错误；“错误的参数类型字符串（预期的数组）（TypeError）”

我试过：1。

```
second_option_xpath = ".//*[@id='selecttype']/option[2]"  
second_option = find(:xpath, second_option_xpath).text
select(second_option, :from => 'selecttype') 
```

2.

```
select "Selenium Core", :from => 'selecttype' 
```

3.

```
page.find_and_select_option("selecttype", 2) 
```

4.

```
select( "selecttype", {"Selenium Core" => 2}) 
```

页面来源类似于：

```
<select id="selecttype"> 
<option value="Selenium IDE">Selenium IDE</option> 
<option value="Selenium Code">Selenium Core</option> 
<option value="Selenium RC">Selenium RC</option> 
<option value="Selenium Grid">Selenium Grid</option> 
</select>" 
```

请建议我在哪里做错了？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:10:47.817

你有没有尝试过

```
page.select('Selenium Core', :from => 'selecttype') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:04:35.467

正如 RobertH 建议的那样，您应该使用类似 page.select 的东西，其中 page 是 Capybara::Session 实例。

当您在代码中调用 select 时，您正在调用内核模块的一个方法，该方法混合在基本 Object 类中，每个类都从该类继承。

该方法需要 4 个参数，其中 3 个是 IO 对象数组；这就是它抱怨错误论点的原因。

# xcode - 在 xcode 中查找隐藏的图像？

> ID：10416052
> 
> 赞同：0
> 
> 时间：2012-05-02T14:41:43.980
> 
> 标签：xcode

我正在尝试更改图像名称，我得到：

```
The file could not be renamed because a file with that name already exists 
```

我无法在其中找到该图像，（项目资产）它已被删除。

我怎么能确定它不在里面？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:57:06.197

Xcode 显示项目中的内容，而不是项目文件夹中的内容。

打开要重命名的文件所在的文件夹（在 Xcode 中右键单击该文件 -> 在 Finder 中显示），您可能会看到另一个名称与您尝试重命名的文件相同的文件。删除该其他文件（如果您确定不需要它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:06:52.090

我要做的就是离开 IDE：

1.  通过“删除”文件并选择“仅删除引用”从 Xcode 中删除文件，而不是文件系统
2.  重命名文件系统中的文件（查找器或终端）
3.  将其重新添加到项目文件中。

警告：确认您没有用相同的名称重命名文件，但只更改了大小写，这有点奇怪，主要是使用 SCM 工具，但 OSX 文件系统默认情况下不区分大小写，因此 File.m 和 file .m 是同一个文件。

# php - 基本 PHP 和表单

> ID：10416053
> 
> 赞同：0
> 
> 时间：2012-05-02T14:41:48.403
> 
> 标签：php, html

对，我是 PHP 和 mySQL 的新手，但我有几个问题希望你们中的一些人能回答，因为这让我很困惑。

（我仍然会尝试在谷歌上阅读更多内容，看看我是否可以在此过程中找到任何答案，所以如果我找到任何答案，我也会在这里发布我自己的答案）

1.  我想在我的网站上提供反馈表。我正在查看 PHP 电子邮件表单，但我在这里有点困惑——

在 API 上，它说要有人向我发送电子邮件，php 脚本需要输入并发送以下代码：

```
mail(to,subject,message,headers,parameters) 
```

但是，我意识到这个函数内部没有“from”参数。为什么会这样？在收到这样的反馈请求后，我如何才能找到对方的电子邮件并通过我自己的电子邮件回复他/她？

我还在阅读人们将发件人的电子邮件包含在“标题”参数本身中的部分。如果我将其包含在“标头”参数中，邮件系统将如何收集有发件人的电子邮件？（我问这部分是因为我的虚拟主机在我回复之前提供了自动回复，我希望它能够识别发件人的电子邮件是系统应该自动回复的电子邮件）

在网页上放一个 mailto:email@email.com 链接会更容易吗？

我认为这几乎就是我现在想要找出的所有问题，我有更复杂的问题，但我想我会先尝试解决更简单的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:44:47.963

[查看手册中的 php 邮件](http://php.net/manual/en/function.mail.php)

> **附加标题（可选）**
> 
> 要插入到电子邮件标题末尾的字符串。
> 
> 这通常用于添加额外的标题（发件人、抄送和密送）。多个额外的标头应该用 CRLF (\r\n) 分隔。

手册中的示例

```
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
           'Reply-To: webmaster@example.com' . "\r\n" .
           'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers); 
```

**更新：**

您还询问了将名称放在发件人地址中的问题。为此，只需将标头中的 From: 更改为`WEBMASTER NAME <webmaster@example.com>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:51:40.840

如果你在你的页面上放了一个 mailto 链接，当用户点击它时，它将打开用户的电子邮件客户端，他们可以向你发送电子邮件。缺点是页面上的电子邮件地址很容易被垃圾邮件发送者访问。

如果您使用 PHP 表单，那么您的电子邮件地址将保持隐藏状态 - 它隐藏在代码中。不利的一面是，设置它涉及更多。

正如上面提到的 Set Sail Media，您可以在 headers 参数中指定 From 地址。如果没有设置，那么它将使用网络服务器运行的进程的详细信息（例如 apache@example.com。）这不是最有用的，但通常不是问题。

如果您想知道用户的电子邮件地址是什么，唯一的方法就是在表单中询问他们。你不能自动捡起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:46:44.677

邮件功能仅用于通过本地配置或指定的远程邮件服务器向人们“发送”邮件，它不能“接收”邮件，为此您需要其他功能，例如从邮件服务器读取数据，这取决于该邮件服务器。

在网页上放置“mailto”链接更容易，但基本上使用“mail()”，您可以制作他们使用的一个完整的小表单，使您的 Web 服务器充当只能发送邮件的电子邮件客户端（除非你加入高级功能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:47:52.317

这是一个基本的表单处理脚本，您可能会觉得很有帮助。

```
<?php

if ( isset( $_POST ) && count( $_POST ) > 0 ){
    // Form was submitted, process it

    foreach ( $_REQUEST as $k=>$v ){ // Loop through values submitted and add them to a message to send to form owner
        $k = stripslashes( $k );
        $v = stripslashes( $v );
        $message .= "$k: $v\r\n";
    }

    $headers = "From: Name <email@domain.com>\r\n"; // This is the FROM address
    // Uncomment the following line to set From using the value passed to the form
    // $headers = "From: {$_POST['your_name']} <{$_POST['email']}>\r\n"; // This is the FROM address

    $ab = mail( 'recipient_email@domain.com', 'Contact Submission Form', $message, $headers ); // Send the email

    if ( $ab == true ){
        // Message sent!
        echo '<strong>Thank you, your message was received.</strong>';
    }

}

?>

<form action="" method="post" id="contactform">
<label for="your_name">Name:</label>
<input type="text" name="your_name" id="your_name" class="field" value="" />
<label for="email">Email:</label>
<input type="text" name="email" id="email" class="field" value="you@domain.com" />
<label for="phone">Phone:<span>(optional)</span></label>
<input type="text" name="phone" id="phone" class="field" value="(000) 000-0000" />
<label for="message">Message:</label>
<textarea name="message" id="message" class="field textarea" cols="20" rows="5"></textarea>

<input type="submit" value="Send Message" />

</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:51:23.777

发送电子邮件的 SMTP 服务器是您的（您的网站）（可以配置为远程服务器）。这就是为什么 From 字段通常取自表单中的文本字段。

# php - noty jquery 确认和 php 执行

> ID：10416055
> 
> 赞同：0
> 
> 时间：2012-05-02T14:41:52.923
> 
> 标签：php, jquery

我在我目前正在开发的一个应用程序中使用 noty jquery 通知[http://needim.github.com/noty/ 。](http://needim.github.com/noty/)它提供了“确认”功能，但我想在访问者按“确定”时在 php 中执行某些操作，并在访问者按“取消”时执行其他操作。如何将此功能添加到我的脚本中？到目前为止，我的代码（特定段）是以下代码：

```
<?php
    //add2cart section
if(isset($_POST['add2cart'])){
//$plus1 = +1;
$order_date = date("Y/m/d");
$img_name = $_POST['img_name'];
//$color = $_POST['color'];
$sqldata = "select * from orders where img_name = '$img_name' and 
sess_user = '$user and checkout= ' ' "; 
$dataselect = mysql_query($sqldata);
$sqlnum = mysql_num_rows($dataselect);
if($sqlnum >= 1){?>
    <script type="text/javascript">
noty({"text":"This item is already in your cart. 
Are you sure you want to add it one more time?","layout":"center","type":"confirm","textAlign":"center","easing":"swing","animateOpen":{"height":"toggle"},"animateClose":{"height":"toggle"},"speed":"500",buttons: [
  {type: 'button green', text: 'Ok', click: function($noty) {

      // this = button element
      // $noty = $noty element

      //$noty.close();
      noty({force: true, text: 'You clicked "Ok" button', type: 'success'});
    }
  },
  {type: 'button pink', text: 'Cancel', click: function($noty) {
      //$noty.close();
      noty({force: true, text: 'You clicked "Cancel" button', type: 'error'});
    }
  }
  ],
closable: false,
timeout: false});                        
    </script>
<?php          
}else{?>
    <script type="text/javascript">
        noty({"text":"Item added.","layout":"center","type":"success","textAlign":"center","easing":"swing","animateOpen":{"height":"toggle"},"animateClose":{"height":"toggle"},"speed":"500","timeout":"3000","closable":true,"closeOnSelfClick":true});                        
    </script>
<?php
$sizevalue = '5\" x 7\"(13 x 19 cm)';
$sql_order ="insert into orders(item_id, img_name, quantity, color, order_date, sess_user, size, unique_id) values(' ', '$img_name', '1', 'Color', '$order_date', '$user', '$sizevalue', '$unique_id')";
mysql_query($sql_order);    
}
}
?> 
```

我会很感激任何帮助，谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:55:16.233

您不能直接从 js 执行 PHP，您必须在 click 处理程序的某处执行 ajax 请求。

```
click: function($noty) {
    // do some ajax
    ...
} 
```

# android - 在 SQLite 中保存图像的优点和缺点

> ID：10416059
> 
> 赞同：3
> 
> 时间：2012-05-02T14:42:02.503
> 
> 标签：android, sqlite

现在我在为 byte[] 图像创建一个单独的文件夹而不是使用 SQLite 还是将图像 Blob 保存在 SQLite 中的问题上陷入两难境地。

在 SQLite 中保存 byte[] 图像的优缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:44:13.573

我相当确定最佳做法是将 URI 保存为 SQLite 中的文本，并将所有图像保存在内部/外部存储中。许多 Blob 会开始降低性能。

# firefox - 如何在 Mozilla Firefox 中调用播放、暂停 vlcplugin

> ID：10416060
> 
> 赞同：1
> 
> 时间：2012-05-02T14:42:03.763
> 
> 标签：firefox, vlc, browser-plugin

在 html 页面中，我可以像[videolan 页面](http://wiki.videolan.org/Documentation%3aWebPlugin)`vlcplugin`中提到的那样嵌入，并使用 jquery 获取对插件的引用。

但似乎`play(), pause()`只有`vlcplugin`upto 支持这些方法`0.8.5`。您如何播放和暂停最新版本的插件？

```
<embed id="vlcp"
  type="application/x-vlc-plugin" 
  pluginspage="http://www.videolan.org"
  name="VLC"
  autoplay="no"
  loop="no"
  volume="100"
  width="640"
  height="480" 
  target="test.flv">
</embed>
<a id="playbutton" href="#">Play</a>
<a id="pausebutton" href="#">Pause</a> 
```

我可以参考下面的插件

```
var player = document.getElementById("vlcp"); 
```

现在，我应该调用什么来让嵌入式插件播放剪辑？

我使用 firefox 作为浏览器，在 html 中嵌入 vlcplugin 是否可以在 chrome 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:49:45.573

您必须使用 VLC 播放器的播放列表对象，如此[处所示](http://wiki.videolan.org/Documentation%3aWebPlugin#Playlist_object)。

在您的特定示例中，您并没有真正创建一个实际的播放列表，而是隐含地向其中添加了一项（您的“test.flv”）。

以下是您现在可以如何控制电影（无论是 Mozilla、Chrome 还是 IE）- [CoffeeScript](http://coffeescript.org/)中的代码：

```
player = document.getElementById("vlcp")
if player and player.playlist
  // you could also check whether the playlist isn't empty using
  // player.playlist.items.count
  playlist = player.playlist

  // pick whichever action you need from below
  playlist.play()
  playlist.togglePause()
  playlist.stop() 
```

您还可以通过使用检查播放器当前是否正在播放或暂停/停止

```
// assuming you got the playlist like above
playlist.isPlaying 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:03:46.413

这是一个演示示例：

```
<html>
<head><title>Demo of VLC mozilla plugin</title></head>

<body>

<h1>Demo of VLC mozilla plugin - Example 1</h1>

<embed type="application/x-vlc-plugin"
         name="video1"
         autoplay="no" loop="yes" width="400" height="300"
         target="http://server.example.org/video1.vob" />
<br />
  <a href="javascript:;" onclick='document.video1.play()'>Play video1</a>
  <a href="javascript:;" onclick='document.video1.pause()'>Pause video1</a>
  <a href="javascript:;" onclick='document.video1.stop()'>Stop video1</a>
  <a href="javascript:;" onclick='document.video1.fullscreen()'>Fullscreen</a>

</body>
</html> 
```

其他有用的来源/链接：

[http://www.videolan.org/doc/play-howto/en/ch04.html](http://www.videolan.org/doc/play-howto/en/ch04.html)

[http://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

# clearcase - Clearcase 从脚本运行命令（错误：电话号码错误）

> ID：10416063
> 
> 赞同：1
> 
> 时间：2012-05-02T14:42:06.733
> 
> 标签：clearcase

希望有人可能对此有所了解。我有一个名为 xrunner.sh 的小 shell。

```
#!/bin/bash
ct checkout -nc parentFolder
cd parentFolder/
ct mkdir -nc directory
ct checkin -nc directory
cd ..
ct checkin -nc parentFolder
pwd 
```

当命令在 CLI 上单独运行时，它们都可以正常工作，但从 bash 运行时，会出现以下问题：

```
ct: bad phone number -- parentFolder
ct: bad phone number -- -nc
ct: bad phone number -- checkout
: No such file or directory
ct: bad phone number -- directory
ct: bad phone number -- -nc
ct: bad phone number -- mkdir
ct: bad phone number -- directory
ct: bad phone number -- -nc
ct: bad phone number -- checkin
: No such file or directory
ct: bad phone number -- parentFolder
ct: bad phone number -- -nc
ct: bad phone number -- checkin 
```

有人会碰巧知道为什么会这样，或者向我指出一些解释这一点的网络参考吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:53:16.840

这意味着您没有正确定义别名“ct”

添加：

```
alias ct=/path/to/cleartool 
```

注意：如果你想添加一个目录到源代码控制，不要忘记调用 mkelem

```
cleartool mkelem -mkpath dir1 -c "a comment" 
```

请参阅“[命令行添加到具有动态视图中的文件的目录的源代码控制返回错误](http://cleartool%20mkelem%20-mkpath%20dir1http://www-01.ibm.com/support/docview.wss?uid=swg21237733)”。

笔记：

*   正如[这个线程所暗示](http://objectmix.com/python/343454-re-why-chdir-command-doesnt-work-client-get_transport.html)的那样，即使已经定义了别名， a`ct setview`也不允许进一步的`ct`命令工作，因为会`setview`产生一个子外壳。有关更多信息，请参见例如“ [Python 和 ClearCase`setview`](https://stackoverflow.com/questions/10252436/python-and-clearcase-setview/10252612#10252612) ” `setview`。
    所以`ct`会起作用，除非您`ct`在`ct setview`.
*   仅供参考，这里是[命令的](http://nixdoc.net/man-pages/hp-ux/man1/ct.1.html)[手册页`/usr/bin/ct`](http://nixdoc.net/man-pages/hp-ux/man1/ct.1.html)

```
    ct(1)
    姓名
    ct - 将 getty 生成到远程终端（呼叫终端）

```

> UNIX 命令 " `/usr/bin/ct`" 拨打一个电话号码，连接到终端的调制解调器应该正在等待呼叫，然后向该终端生成一个 getty(1M) 进程。
> “getty”进程设置终端类型、模式、速度和线路规则，然后调用“login”进程，当用户正确验证时，该进程将执行shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:55:18.473

您遇到的问题`ct: bad phone number...`是因为实际上还有另一个名为`ct`. 您可以`type -p ct`在 bash 中运行以查找哪个（因为我遇到同样的问题已经很多年了，所以我不记得它在哪里（/usr/xpg4/bin ??））。

因此，正如 VonC 建议的那样，为 ct 创建一个别名。

# android - 为什么我的 jQuery Mobile 应用程序无法在 Android 4.0.3 浏览器中正确显示？

> ID：10416065
> 
> 赞同：4
> 
> 时间：2012-05-02T14:42:13.320
> 
> 标签：android, jquery-mobile, android-4.0-ice-cream-sandwich

我有一个 jQuery Mobile (1.1.0) 应用程序在使用 Chrome、FF、Mobile Safari 和 Android 2.2 上的浏览​​器查看时正在运行。但是，在 Android 4.0.3 模拟器的浏览器中查看时，会出现一系列问题。

这些包括：

1) 不显示页眉栏（它在节目中短暂显示，然后消失 - 固定页脚很好）。

2) 页面上的按钮未显示 - 但仍能正确接收和处理点击事件。

这也发生在同事的 ICS Android 手机 (Galaxy Nexus) 上。

标记对于 jQM 来说都是相当标准的。例如，主要按钮是标签。标题是：

```
<header data-role="header">
    <h1 data-bind="text: theTitle"></h1>

    <a id="waitButton" href="#" class="ui-btn-left" data-bind="click: wait">Wait</a>
    <a id="pollButton" href="#" class="ui-btn-right" data-bind="click: poll">Poll</a>
</header> 
```

[数据绑定属性用于 Knockout.js]

有谁知道我需要改变什么才能让它在 ICS 上运行？或者这是 jQuery Mobile 的“正在进行中的工作”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T19:01:24.740

发现了问题。这是我在 iOS 测试期间添加的 css 规则：

```
.ui-page 
{
    /* Supposed to reduce flickering, but screwed up Ice Cream Sandwich. */
    -webkit-backface-visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:19:49.243

确认这一点。

将 Galaxy 10.1 标签从 3.2 升级到 4.0.3。JQM 1.1 页面未加载，显示大部分为空白页面，并且没有标题。

上面的解决方案解决了所有这些问题。性能似乎也有所提高。但是，我们的页面不使用过渡。

顺便说一句，输入 type="date" 将正确激活本机日期选择器。type="number" 将允许小数点应该有，这在 3.2 上不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T07:00:55.723

在寻求救赎之后..我发现了一些对我有帮助的东西..

我补充说：

```
-webkit-transform: translate3d(0,0,0);
-webkit-transform: translateZ(0px); 
```

到了`<div data-role=content ..>`，它解决了问题！

尽管 jQuery 的弹出窗口仍然存在问题，尽管它的 z-index 很高，但它隐藏在其他元素下。

# c# - 这个通用工厂发生了什么

> ID：10416066
> 
> 赞同：0
> 
> 时间：2012-05-02T14:42:14.573
> 
> 标签：c#

我最近一直在研究一个通用工厂，它绕过了关于带参数的构造函数的“where”约束，由于一个错误，我遇到了一些我不太理解的东西，想知道是否有人能够发光在上面。

有问题的代码行是：

```
ITestInterface myObj = new GenericFactory<ITestInterface>(
    () => (new TestClass("username", "password"))
).CreateObject() as ITestInterface;

ITestInterface myNewObj = new GenericFactory<ITestInterface>(
    (string x, string y) => (new TestClass(x, y))
).CreateObject("username ", " password") as ITestInterface; 
```

这两行都做同样的事情，但我预计第一行会失败。

工厂代码如下：

```
public GenericFactory (Func<T> getNewT)
{
   _getNewObject = getNewT;
}

public GenericFactory(Func<string, string, T> getNewT)
{
   _getNewObjectTwoParams = getNewT;
}

public T CreateObject ()
{
   if (_getNewObject == null)
   {
      return default(T);
   }
   else
   {
       return _getNewObject();
   }
}

public T CreateObject (string username, string password)
{
   if (_getNewObjectTwoParams == null)
   {
      return default(T);
   }
   else
   {
      return _getNewObjectTwoParams(username, password);
   }
} 
```

TestClass 具有以下构造函数：

```
public TestClass (string name, string password)
{
   _name = name;
   _password = password;
} 
```

如果有人能阐明为什么第一次致电工厂有效，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:50:58.760

这当然看起来像是很多开销，相当于：

```
ITestInterface test = new TestClass("username", "password"); 
```

但是，它工作得很好的原因是因为您使用的是第一个构造函数覆盖：

```
public GenericFactory (Func<T> getNewT) 
```

您可以传入任何`Func<T>`返回`T`. 你可以在这个函数中做更多的事情：

```
ITestInterface myObj = new GenericFactory<ITestInterface>(
    () => {
    var username = GetMyUserName();
    var password = GetMyPassword();
    return new TestClass(username, password)
}).CreateObject() as ITestInterface; 
```

# javascript - 开发跨多个显示器的应用程序

> ID：10416072
> 
> 赞同：1
> 
> 时间：2012-05-02T14:42:26.703
> 
> 标签：javascript, actionscript-3, multiple-monitors

如果这不是这个问题的合适论坛，我深表歉意 - 但我正在寻找一个应用程序，它将自己分布在多个监视器上（不是在多个监视器上复制相同的图像，而是 1 个图像填充 4 个监视器）。我更喜欢用 as3 / php / javascript 编写它，但如有必要，我会考虑使用 C# 之类的东西。有没有人有任何开始这方面的提示？该平台可以是 PC 或 MAC，但最好有一些开箱即用的软件，以便将软件投影到多台显示器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:33:18.030

一般回答，希望对您有所帮助。

您可以使用 AIR 在不同的监视器上部署具有多个窗口的应用程序。通过使用多个窗口，您将不受 8191 像素宽度上限的限制。IMO 这是一种比跨多个显示器延伸的大窗口更好的方法。

使用[Screen](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Screen.html)类，您可以访问有关系统上当前可用的监视器的信息。此类允许您获取当前可用屏幕的数组`Screen.screens`以及屏幕边界`screen.bounds`

甚至还有一个包装类可以使这个过程更容易一些：

[http://www.joristimmerman.be/wordpress/2009/03/03/screenmanager-expand-your-air-application/](http://www.joristimmerman.be/wordpress/2009/03/03/screenmanager-expand-your-air-application/)

使用这个类看起来很简单

```
ScreenManager.openWindowCenteredOnScreen(new window, screen number); 
```

看起来它还有其他一些对您的情况有用的方法

```
ScreenManager.stretchWindowToAllScreens() //would be limited by the stage size cap
ScreenManager.openWindowFullScreenOn() 
```

`screen.visibleBounds`创建新窗口时，您可以使用它来获取正确的大小信息。

然后，您可以使用[NativeWindow](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeWindow.html)在另一个显示器上创建和打开一个新的应用程序窗口。此代码应该可以帮助您入门

```
var window:NativeWindow = new NativeWindow();
var content:Sprite = new Sprite(); //a container for some display objects to appear inside your new window
window.stage.addChild(content); //adding the content to the new window;
window.activate(); 
```

使用它，您将能够创建 4 个窗口，每个显示一个，并为每个窗口附加不同的图像。您还可以将这些屏幕中的每一个设置为每个显示器的全宽和全高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:13:08.620

对于固定设置/安装，我使用几种方法成功地做到了这一点：

**舞台尺寸为 QFHD（3840x2160 - 即 4 x HD，配置为 2x2）**的单个 Air 应用程序。**然后在 application.xml 中简单地设置以下内容，它将跨越它们**

 **```
<systemChrome>none</systemChrome>
<transparent>false</transparent>
<visible>true</visible>
<minimizable>false</minimizable>
<maximizable>false</maximizable>
<resizable>false</resizable>
<x>0</x>
<y>0</y>
<width>3840</width>
<height>2160</height> 
```

**或者**使用 ATI eyefinity 显卡，您可以从多个虚拟显示器中创建一个，并且只需使用：

```
stage.displayState = StageDisplayState.FULL_SCREEN;
stage.align = StageAlign.TOP_LEFT; 
```

Eyefinity 驱动器还使您能够补偿边框，这是一个**很棒的**功能。

我认为这两种方法都是最好的，因为它们在尝试跨多个`NativeWindow's`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:57:32.650

即使我没有测试过这个解决方案，我也会把它放在那里 - 似乎有一个纯粹的硬件解决方案 - 一个拼接墙控制器，它将接收一个视频源并在四个屏幕上均匀地解析它。像这样的东西：

[http://www.bhphotovideo.com/c/product/570090-REG/Smart_AVI_UXST4S_Stretcher_Pro.html](http://www.bhphotovideo.com/c/product/570090-REG/Smart_AVI_UXST4S_Stretcher_Pro.html)

似乎它可以做到这一点，而不必在编程方面想出任何花哨的东西，但显然它的成本可能会令人望而却步。**

# language-agnostic - 来自 PDF 的干净文本

> ID：10416077
> 
> 赞同：9
> 
> 时间：2012-05-02T14:42:31.503
> 
> 标签：language-agnostic, nlp, stanford-nlp

这更像是一个算法问题，而不是一个特定的语言问题，所以我很高兴收到任何语言的答案——甚至是伪代码，甚至只是一个想法。

这是我的问题：我需要处理来自 PDF 文章的大型论文数据集，这些论文被粗暴地复制/粘贴到 .txt 中。我只有这个可憎的结果，大约 16k 篇论文，3.5 GB 或文本（我使用的语料库是 ACL Antology Network，[http://clair.si.umich.edu/clair/aan/DatasetContents。 html](http://clair.si.umich.edu/clair/aan/DatasetContents.html) ).

“垃圾”来自公式、图像、表格等。它只是在运行文本的中间弹出，所以我不能使用正则表达式来清理它，我也想不出任何使用机器学习的方法。我已经花了一个星期的时间，然后我决定继续进行快速修复。我不再关心完全清理它，只要删除大部分文本区域，我就不关心错误的否定和肯定。

文本的一些示例：请注意，公式包含垃圾字符，但表格和标题不包含（但它们仍然使我的句子很长，因此无法解析）。垃圾粗体。

简单的一：

> 重复实验，同时抑制首先具有最多扩展的方案的专业化，然后是两个扩展最多的模式。覆盖和加速的措施很重要 1 只要我们对保留分配给句子的 f 结构感兴趣，覆盖的概念就比必要的更严格。事实上，同一个 f 结构可以通过不止一次的解析来分配，因此在某些情况下，即使专门的语法为它分配了正确的 f 结构，一个句子也会被认为超出了覆盖范围。 **2'VPv' 和 'VPverb[main]' 涵盖以主要动词为首的 VP。'NPadj' 涵盖带有形容词的 NP。205 原规则：l/Pperfp --+ ADVP* SE (t ADJUNCT) ($ ADV_TYPE) = t,padv ~/r { @M_Head_Perfp I@M_Head_Passp } @( Anaph_Ctrl $) { AD VP+ SE ('~ ADJUNCT) ($ ADV_TYPE) = vpadv 被以下替换： ADVP,[.E (~ ADJUNCT) (.l. ADV_TYPE) = vpadv l/'Pperfp --+ @PPadjunct @PPcase_obl {@M.Head_Pevfp [@M.. Head_Passp} @( Anaph_Ctrl ~ ) V { @M_Head_Perfp I@M_Head_Passp } @( Anaph_Ctrl ~) 图 1：从实际法语语法中修剪规则。** “*”和“+”符号具有正则表达式中的通常解释。括号中的子表达式是可选的。替代子表达式用大括号括起来并用“[”符号分隔。后跟标识符的“@”是宏扩展运算符，最终被进一步的功能描述所取代。 **Corpus --.. ,, 0.1[ Disambiguated Treebank treebank 人类专家 语法专业化 专业化语法 图 2：我们的语法专业化实验设置。通过这种形式的语法修剪可以实现的指标。** 但是，它们可能具有误导性，因为未发现句子的失败时间可能远低于其句子时间，

硬一：

> 表 4 总结了英语和罗马尼亚语共指的精度结果。结果表明，英语的共指比罗马尼亚语的共指更具有指示性，但 SNIZZLE 提高了两种语言的共指分辨率。有 64% 的情况下，英语共指由比罗马尼亚对应的相应启发式具有更高优先级的启发式解决。**这个结果解释了为什么英语罗马尼亚语 SWIZZLE 对罗马尼亚语名词代词**有更好的精度提高 73% 89% 66% 78% 76% 93% 71°/o 82% 表 4：共指精度 84% 72% 87% **76% 英语罗马尼亚语 SWIZZLE 英语 罗马尼亚语 SWIZZLE 名词 69% 63% 66% 61% 代名词 总计 89% 78% 83% 72% 87% 77% 80% 70% 表 5：共指回忆**英语共指。表 5 还说明了召回结果。与其他方法相比，数据驱动的共指分辨率的优势在于其更好的召回性能。这可以通过该方法捕获更多种类的共指模式这一事实来解释。尽管其他共指解析系统对某些特定形式的系统表现更好，但它们的召回结果却被系统方法所超越。与单语数据驱动的共指系统的召回相比，多语言共指反过来提高了精度。此外，表 5 显示英语的共指比罗马尼亚语的共指具有更好的召回率。然而，召回显示 SNIZZLE 的两种语言都有所减少，因为删除了不精确的共指链接。通常情况下，删除数据会降低召回率。所有结果都是通过使用为 MUC 评估开发的自动评分程序获得的。

请注意该表如何不包含奇怪的字符并位于句子的中间：“这个结果解释了为什么 -TABLE HERE- 英语共指有更好的精度增强。” 关于正在运行的文本，我不知道表格在哪里。它可能出现在句子之前，之后或在它内部，就像在这种情况下一样。另请注意，表格狗屎不会以句号结尾（论文中的大多数标题都没有......）所以我不能依靠标点符号来发现它。当然，我对不准确的边界感到满意，但我仍然需要对这些表做一些事情。其中一些包含单词而不是数字，在这些情况下我没有足够的信息：没有垃圾字符，什么都没有。只有人类很明显：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:47:34.057

（我讨厌蹩脚的复制和粘贴。）

一些你可能会觉得有帮助的想法（我自己在那一点上都使用了每一个）

1.  （非常蛮力）：使用标记器和字典（真正的字典，而不是数据结构） - 解析出单词和任何不是字典单词的单词 - 将其删除。如果您的文本包含很多公司/产品名称，这可能会出现问题 - 但这也可以使用正确的索引来解决（网上有一些 - 我使用了一些适当的索引，所以我不能分享它们，对不起）

2.  给定一组干净的文档（假设是 2K），为它们构建一个 tf/idf 索引，并将其用作字典 - 其他文档中未出现在索引中的每个术语（或以非常低的值出现） tf/idf) - 删除它。这应该给你一个相当干净的文件。

3.  使用亚马逊的机械土耳其人机制：设置一个任务，阅读文档的人需要标记没有意义的段落。对于机械土耳其人平台来说应该相当容易（16.5K 并不多） - 这可能会花费你几百美元，但你可能会得到相当不错的文本清理（所以如果它是公司的钱，这可能是你的出路——他们需要为自己的错误付出代价:)）。

4.  考虑到您的文档来自同一个领域（相同的主题，总而言之），并且问题完全相同（相同的表头，大致相同的公式）：将所有文档分解为句子，并尝试使用 ML 对句子进行聚类。如果表格标题/公式相对相似，它们应该很好地远离其余句子，然后您可以逐句清理文档（获取文档，将其分解为句子，对于每个句子，如果它是“奇怪”集群的一部分，删除它）

# web-services - 使用Linq to XML将XML导入SQL，有没有更高效的方法？

> ID：10416081
> 
> 赞同：0
> 
> 时间：2012-05-02T14:42:35.970
> 
> 标签：web-services, import, linq-to-xml

我有需要放入 SQL 数据库的 XML。我正在使用 LINQ to XML 从 XML 中获取我想要的数据。

在我看来，我浪费了很多时间，将 Linq 的变量映射到 XML，然后保存这些变量。我想知道我是否可以结合这些步骤。

这是一个示例查询。我多次执行此操作，并在类似数据上执行其他操作。

也许以某种方式使 LINQ to XML 直接创建我的 LINQ 对象，而不是 LINQ 在幕后创建自己的对象。

这是我的代码。

```
 HttpWebRequest request2 = (HttpWebRequest)WebRequest.Create(newURI);
        request2.AllowAutoRedirect = true;
        request2.PreAuthenticate = true;
        request2.Credentials = credentialCache;
        request2.AutomaticDecompression = DecompressionMethods.GZip;
        request2.Method = "GET";

        HttpWebResponse response2 = null;
        try
        {
            response2 = (HttpWebResponse)request2.GetResponse();
            HttpStatusCode statusCode2 = response2.StatusCode;

            using (Stream responseData2 = response2.GetResponseStream())
            {
                // TODO: Handle HTTP status code and response data here

                XDocument userInfo = XDocument.Load(responseData2);
                XNamespace userInfoNamespace = "http://www.digitalmeasures.com/schema/data";
                XNamespace dmdNamespace = "http://www.digitalmeasures.com/schema/data-metadata";

                var Records = from Record in userInfo.Descendants(userInfoNamespace + "Record")
                              select new
                              {
                                  college = Record.Element(dmdNamespace + "IndexEntry").Attribute("entryKey").Value,
                                  department = Record.Element(dmdNamespace + "IndexEntry").ElementsAfterSelf(dmdNamespace + "IndexEntry").FirstOrDefault().IsEmpty ? Record.Element(dmdNamespace + "IndexEntry").ElementsAfterSelf(dmdNamespace + "IndexEntry").FirstOrDefault().Attribute("entryKey").Value : "blank",
                                  prefix = (string)Record.Descendants(userInfoNamespace + "PREFIX").SingleOrDefault(),
                                  fname = (string)Record.Descendants(userInfoNamespace + "FNAME").SingleOrDefault(),
                                  pfname = (string)Record.Descendants(userInfoNamespace + "PFNAME").SingleOrDefault(),
                                  mname = (string)Record.Descendants(userInfoNamespace + "MNAME").SingleOrDefault(),
                                  lname = (string)Record.Descendants(userInfoNamespace + "LNAME").SingleOrDefault(),
                                  suffix = (string)Record.Descendants(userInfoNamespace + "SUFFIX").SingleOrDefault(),
                                  alt_name = (string)Record.Descendants(userInfoNamespace + "ALT_NAME").SingleOrDefault(),
                                  endpos = (string)Record.Descendants(userInfoNamespace + "ENDPOS").SingleOrDefault(),
                                  email = (string)Record.Descendants(userInfoNamespace + "EMAIL").SingleOrDefault(),
                                  building = (string)Record.Descendants(userInfoNamespace + "BUILDING").SingleOrDefault(),
                                  ophone1 = (string)Record.Descendants(userInfoNamespace + "OPHONE1").SingleOrDefault(),
                                  ophone2 = (string)Record.Descendants(userInfoNamespace + "OPHONE2").SingleOrDefault(),
                                  ophone3 = (string)Record.Descendants(userInfoNamespace + "OPHONE3").SingleOrDefault(),
                                  dphone1 = (string)Record.Descendants(userInfoNamespace + "DPHONE1").SingleOrDefault(),
                                  dphone2 = (string)Record.Descendants(userInfoNamespace + "DPHONE2").SingleOrDefault(),
                                  dphone3 = (string)Record.Descendants(userInfoNamespace + "DPHONE3").SingleOrDefault(),
                                  fax1 = (string)Record.Descendants(userInfoNamespace + "FAX1").SingleOrDefault(),
                                  fax2 = (string)Record.Descendants(userInfoNamespace + "FAX2").SingleOrDefault(),
                                  fax3 = (string)Record.Descendants(userInfoNamespace + "FAX3").SingleOrDefault(),
                                  website = (string)Record.Descendants(userInfoNamespace + "WEBSITE").SingleOrDefault(),
                                  gender = (string)Record.Descendants(userInfoNamespace + "GENDER").SingleOrDefault(),
                                  ethnicity = (string)Record.Descendants(userInfoNamespace + "ETHNICITY").SingleOrDefault(),
                                  citizen = (string)Record.Descendants(userInfoNamespace + "CITIZEN").SingleOrDefault(),
                                  bio = (string)Record.Descendants(userInfoNamespace + "BIO").SingleOrDefault(),
                                  teaching_interests = (string)Record.Descendants(userInfoNamespace + "TEACHING_INTERESTS").SingleOrDefault(),
                                  research_interests = (string)Record.Descendants(userInfoNamespace + "RESEARCHINTERETS").SingleOrDefault(),
                                  expertise = (string)Record.Descendants(userInfoNamespace + "EXPERTISE").SingleOrDefault(),
                                  upload_photo = (string)Record.Descendants(userInfoNamespace + "UPLOAD_PHOTO").SingleOrDefault(),
                                  upload_cv = (string)Record.Descendants(userInfoNamespace + "UPLOAD_CV").SingleOrDefault(),
                              };

                foreach (var recordItem in Records)
                {
                    PCI a = new PCI();
                    a.COLLEGE = recordItem.college;
                    a.DEPARTMENT = recordItem.department;
                    a.PREFIX = recordItem.prefix;
                    a.FNAME = recordItem.fname;
                    a.PFNAME = recordItem.pfname;
                    a.MNAME = recordItem.mname;
                    a.LNAME = recordItem.lname;
                    a.SUFFIX = recordItem.suffix;
                    a.ALT_NAME = recordItem.alt_name;
                    a.ENDPOS = recordItem.endpos;
                    a.EMAIL = recordItem.email;
                    a.BUILDING = recordItem.building;
                    a.OPHONE1 = recordItem.ophone1;
                    a.OPHONE2 = recordItem.ophone2;
                    a.OPHONE3 = recordItem.ophone3;
                    a.DPHONE1 = recordItem.dphone1;
                    a.DPHONE2 = recordItem.dphone2;
                    a.DPHONE3 = recordItem.dphone3;
                    a.FAX1 = recordItem.fax1;
                    a.FAX2 = recordItem.fax2;
                    a.FAX3 = recordItem.fax3;
                    a.WEBSITE = recordItem.website;
                    a.GENDER = recordItem.gender;
                    a.ETHNICITY = recordItem.citizen;
                    a.CITIZEN = recordItem.citizen;
                    a.BIO = recordItem.bio;
                    a.TEACHING_INTERESTS = recordItem.teaching_interests;
                    a.RESEARCH_INTERESTS = recordItem.research_interests;
                    a.EXPERTISE = recordItem.expertise;
                    a.UPLOAD_PHOTO = recordItem.upload_photo;
                    a.UPLOAD_CV = recordItem.upload_cv;

                    faimdc.PCIs.InsertOnSubmit(a);
                    faimdc.SubmitChanges();
                }
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:06:23.340

您可以直接创建 PCI 类，而不是投影到匿名类型，而不必复制所有内容。就像是：

```
var Records = from Record in userInfo.Descendants(userInfoNamespace + "Record")
              select new PCI
              {
                  COLLEGE = Record.Element(dmdNamespace + "IndexEntry").Attribute("entryKey").Value,
                  DEPARTMENT =  Record.Element(dmdNamespace + "IndexEntry").ElementsAfterSelf(dmdNamespace + "IndexEntry").FirstOrDefault().IsEmpty ? Record.Element(dmdNamespace + "IndexEntry").ElementsAfterSelf(dmdNamespace + "IndexEntry").FirstOrDefault().Attribute("entryKey").Value : "blank",
                  …
              } 
```

您可能还希望在循环之外而不是在循环中调用一次提交。

# android - Android 应用程序的哪些部分应该是片段？

> ID：10416083
> 
> 赞同：2
> 
> 时间：2012-05-02T14:42:42.470
> 
> 标签：android, android-fragments

我将开发一个具有以下结构的应用程序：

*   搜索：让用户搜索文章并在列表中显示搜索结果
*   文章：显示文章
*   UserList：显示用户选择添加到列表中的文章列表
*   UserListItem：代表上述列表中的一篇文章的项目，并允许用户通过某些`EditText`字段添加自定义信息。

*Search*、*Article*和UserList似乎可以作为片段实现*。*但是*UserListItem*呢？屏幕上当然会同时出现多个*UserListItem*，还能不能作为一个fragment来实现呢？如果没有，应该如何实施？

我在理解整个片段概念时遇到了一些麻烦。如何在标准场景中使用它似乎很明显，即*Search* -pane 和*Article* -pane。但是我有点不清楚它是否应该/可以用于您将同时显示同一片段的多个实例的场景。

我还没有写任何代码，因为我想在开始之前把整体结构搞清楚，这样我就不用回去改变一切了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:37:00.263

1.  如果您是初学者，这可能有点多，但如果您想在应用程序中添加搜索功能，请考虑[创建一个搜索界面](http://developer.android.com/guide/topics/search/search-dialog.html)。

2.  从关于`Fragment`s 的文档中：

    > 您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以在不同的活动中重复使用）。

    话虽如此，在屏幕布局中加入行为与将行为包装在`Fragment`. 在您的情况下，将每个列表项包装在 a 中确实没有意义，`Fragment`因为`Fragment`为您的`ListView`. 将每个列表项表示为 a`Fragment`会给每一行它自己的生命周期，这显然不是你想要的。相反，您可能想要做的是用 XML 表示每个列表项，并让保存您的`Fragment`（或）在必要时管理这些列表项。`Activity``ListView`

# nhibernate - 如何获取自引用表层次结构中的最后一个孩子？

> ID：10416089
> 
> 赞同：1
> 
> 时间：2012-05-02T14:43:07.780
> 
> 标签：nhibernate, fluent-nhibernate

我有一张像这样的桌子：

```
public class Cycle     
{
    public Guid Id 
    public int CycleNo 
    public Cycle ParentCycle 
} 
```

其中有数据：

```
Id  CycleNo  ParentId  
C1  1         null  
C2  2         C1  
C3  3         C2 
```

等等....
如果我有c1，如何获得最后一个孩子C3（在这种情况下）？感谢您的宝贵意见..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:00:07.133

获取节点的完整树：

```
session.CreateQuery(
    "select c from Cycle c join fetch c.ParentCycle where c.Id = 'C1'"
)
.SetResultTransformer(new DistinctRootEntityResultTransformer())
.List<Cycle>(); 
```

（或使用 Query 或 CreateCriteria 的等效项）

请参阅：[http ://ayende.com/blog/4151/nhibernate-tips-tricks-efficiently-selecting-a-tree](http://ayende.com/blog/4151/nhibernate-tips-tricks-efficiently-selecting-a-tree)

然后在内存中遍历它。

# php - 如何根据访问者的位置显示本地化时间？

> ID：10416093
> 
> 赞同：8
> 
> 时间：2012-05-02T14:43:24.187
> 
> 标签：php, javascript, localization, timezone

我们正在开发一个网站，它将被世界各地的人们使用。网站中有一个聊天部分，我们希望消息显示带有时间戳。我在数据库中存储每条消息的时间戳。

根据访问者的当地时间，向访问者显示每条消息的正确时间的方法是什么。

我不想向用户询问他的时区。有没有办法做到这一点，只使用 PHP？如果不是 - 根据访问者的当前时间，使用 javascript 显示当前时间的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T14:50:38.167

您可以使用地理 IP 对用户时区进行有根据的猜测

[http://php.net/manual/en/book.geoip.php](http://php.net/manual/en/book.geoip.php)

或者你可以使用 javascript：

[http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/](http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:53:24.410

如果您知道用户 IP 地址 ($_SERVER['REMOTE_ADDR'])，您可以使用 PHP 完成此操作。查看 Geo-IP ( [http://php.net/manual/en/book.geoip.php](http://php.net/manual/en/book.geoip.php) ) 以获取匹配位置<->ip-address

如果（例如）他/她在代理后面，则 IP 地址不一定反映用户的“真实”位置。在使用移动设备 (GPRS/edge/3G/HSDPA) 时，我还看到了一些奇怪的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:57:01.140

在用户 PC 上准确显示时间设置的唯一有保证的方法是使用 JavaScript。您可以尝试服务器端地理检测，但数据库从来都不是完美的，或者用户很可能是来自完全不同时区的某个提供商的远程客户端。以 Unix 纪元时间的秒数发送时间戳，然后用这个时间在 JavaScript 中初始化[`Date`对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)，并使用它的 .get（没有 UTC）方法以用户的本地表示形式检索相应的时间片段。为用户提供使用某些特定时区的选项，以防他出于某种原因想要覆盖本地时间也是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:52:21.840

我不知道如何在 PHP 中执行此操作，但是由于您也在询问 javascript，因此您可以使用该`Date`对象。

```
var d = new Date();  // creates a Date object and initializes it with
                     // user's current time

d.getTimezoneOffset();  // time zone offset in minutes

d.getDay();
d.getHours();

/* etc... gets information about the user's local time */ 
```

完整参考：[http ://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

另请注意，这当然是基于用户的计算机时间设置。它不会根据用户的网络地址检查用户的全球位置。如果您真的想这样做，请忽略我的回答:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:54:10.263

正如其他答案所说，Javascript 是正确的技术，但是如果您坚持使用 php，那么一种可能的方法是使用地理定位库或服务来定位猜测 IP 地址的时区。

然而，这将始终是最佳猜测解决方案，并且在许多情况下，访问者来自的 IP 地址可能与用户当前所在的时区不一致。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-12T12:23:15.977

如果有人想在访问者的系统时区显示 PHP 时间

```
<?php
$now = new DateTime();
$date_created=$now->format('Y-m-d H:i:s');
$contents = htmlentities("<script>var x=new Date('$date_created' +'+0000');document.write(x.getMonth() + '-' + x.getDate() + '-' + x.getFullYear()+ ' ' + x.getHours() + ':' + x.getMinutes());</script>");
echo html_entity_decode($contents);
?> 
```

这将在访问者的时区显示服务器时间。如果您将服务器时间设置为 UTC +00。如果有人想要更改格式，可以使用此 javascript 函数

```
 function detectAmPm(hours, min) {
        let time;
        if (hours >= 12) {
            time = "PM";
            hours = hours - 12
        } else {
            time = "AM";
        }

        if (hours < 10) {
            hours = "0" + hours;
        }
        if (min < 10) {
            min = "0" + min;
        }

        return {min: min, hours: hours, time: time};
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-02T23:22:43.330

最简单的方法是让浏览器告诉你的脚本用户的时间和区域是什么。例如：-

```
<input name=tz type-hidden id=tz><script>document.getElementById("tz").value=new Date;</script> 
```

然后，您的 PHP 将在下次他们向您的聊天发送任何内容时获取他们当前的时间和时区：例如

'2021 年 11 月 3 日星期三 09:21:01 GMT+1000（澳大利亚东部标准时间）'

然后，您可以使用 GMT+xxx 代码将您的服务器时间转换为 PHP 中的本地时间。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-02T14:47:53.003

PHP 是一种服务器端脚本语言，因此除非您使用 GeoIP，否则您无法获取访问者的本地时间。您应该改用 JavaScript。

# c# - 对用 C# 编写的多态性感到困惑

> ID：10416101
> 
> 赞同：1
> 
> 时间：2012-05-02T14:43:49.840
> 
> 标签：c#, class, inheritance, polymorphism

嗨，我的同事刚刚告诉我，可以通过隐藏基类方法并在派生类中实现具有相同签名的另一个方法来实现多态性，这是真的吗？在现实生活中如何需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:46:24.657

我猜你的朋友在谈论阴影。这不是真正的多态性，应该避免[C# 中的阴影和覆盖之间的区别？](https://stackoverflow.com/questions/392721/difference-between-shadowing-and-overriding-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:49:43.947

这几乎是反多态性。无论变量的类型如何，只要调用对象的“真实”方法，就应该执行多态性；如果所讨论的对象是派生类型，则无论您在基类变量还是派生类型变量上调用它，您都希望调用derived.Method()。

隐藏打破了这种期望。

# image - ExpressJS/节点：404 张图片

> ID：10416102
> 
> 赞同：2
> 
> 时间：2012-05-02T14:43:51.087
> 
> 标签：image, node.js, express, http-status-code-404, linode

我已经设置了一个基本的节点/快递服务器，可以很好地提供公共静态 javascript 和 css 文件，但是在尝试提供图像时返回 404 错误。

最奇怪的部分是在本地运行时一切正常。在我的远程服务器（linode）上运行时，出现图像问题。

这真的让我摸不着头脑......可能是什么问题？

这是服务器：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')

var app = module.exports = express.createServer();

// Configuration

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.compiler({ src: __dirname + '/public', enable: ['less'] }));
  app.use(express.static(__dirname + '/public'));
  app.use(app.router);
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
});

app.configure('production', function(){
  app.use(express.errorHandler()); 
});

// Globals

app.set('view options', {
  sitename: 'Site Name', 
  myname: 'My Name'
});

// Routes

app.get('/', routes.index);
app.get('/*', routes.fourohfour);

app.listen(3000);
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:42:26.113

如果它在本地运行良好，可能是区分大小写的问题，您的文件是否有大写字母等？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-13T16:25:29.457

我遇到了这个问题，但最终是我在结尾的 .JPG 扩展名中有大写字母，并且在 html 中调用了 .jpg 。Windows 对文件类型不区分大小写，CentOS 是...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:05:44.487

我有这个确切的问题。上传到的所有用户生成的图像`/static/uploads`都没有通过 express 呈现。奇怪的是`static/images`，`static/js`,中的一切`static/css`都很好。我确保这不是权限问题，但仍然得到 404。最后我配置 NGINX 以渲染我的*所有*静态文件（无论如何这可能更快）并且它起作用了！

我仍然很想知道为什么 Express 没有渲染我的图像。

如果有人遇到此问题，这是我的 NGINX conf：

```
server {

    # listen for connections on all hostname/IP and at TCP port 80
    listen *:80;

    # name-based virtual hosting
    server_name staging.mysite.com;

    # error and access outout
    error_log /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;

    location / {
            # redefine and add some request header lines which will be transferred to the proxied server
            proxy_set_header                X-Real-IP $remote_addr;
            proxy_set_header                X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header                 Host $http_host;
            proxy_set_header                X-NginX-Proxy true;

            #set the location of the web root
            root /var/www/mysite.com;

            # set the address of the node proxied server. port should be the port you set in express
            proxy_pass                      http://127.0.0.1:9001;

            # forbid all proxy_redirect directives at this level
            proxy_redirect                  off;
    }

    # do a case insensitive regular expression match for any files ending in the list of extentions
    location ~* ^.+\.(html|htm|png|jpeg|jpg|gif|pdf|ico|css|js|txt|rtf|flv|swf)$ {

            # location of the web root for all static files
            root /var/www/mysite.com/static;

            # clear all access_log directives for the current level
            #access_log off;

            # set the Expires header to 31 December 2037 23:59:59 GMT, and the Cache-Control max-age to 10 years
            #expires max;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:33:25.277

好的，我通过将图像文件夹从“/public/images”重命名为/public/image 解决了这个问题。我不知道为什么命名会引起问题，但我很高兴这就是所需要的。

# visual-studio - silverlight 在 MVC 中的设计仅在 Visual Studio 上显示，而不在 Blend 上显示

> ID：10416103
> 
> 赞同：0
> 
> 时间：2012-05-02T14:43:51.667
> 
> 标签：visual-studio, visual-studio-2010, silverlight, blend

我在 MVC 解决方案中添加了一个新的 silverlight 应用程序。
我在 MainPage.xaml 和 App.xaml 中输入了一些代码，在 VS 中似乎还不错。

但是，当我想在 Blend 中查看和编辑它时，我不能。我只看到代码。没有引用（在 VS 中可以看到），没有资产，没有状态，没有部件。

有谁知道如何解决它？也许有不同的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T00:06:21.783

已解决：已下载 Silverlight5 的 Expression Blend 5 Preview， [http://www.microsoft.com/en-us/download/details.aspx?](http://www.microsoft.com/en-us/download/details.aspx?id=9503) id=9503，与 Blend4 并排工作。似乎 Blend4 不知道如何处理 Silverlight 5。

# java - 返回点击按钮的索引？

> ID：10416104
> 
> 赞同：1
> 
> 时间：2012-05-02T14:44:00.277
> 
> 标签：java, arrays, swing, jbutton

我有一组 30 个按钮 []。我有一个变量 buttonClicked。当我按下按钮时，如何获取索引并将索引号存储在 buttonClicked 中？

谢谢 ：）

```
JButton [] buttons = new JButton[30]; 

        for(int i = 1; i <= 30; i++)
        {       
            int btnNumber = (i > 10 && i <= 20) ? (31 - i) : i;

            System.out.printf("i = %d, btnNumber = %d%n", i, btnNumber);
            buttons[btnNumber - 1] = new JButton("label " + btnNumber);
            //buttons[btnNumber - 1].setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
            buttons[btnNumber - 1].setBorder(BorderFactory.createEtchedBorder());
            buttons[btnNumber - 1].setOpaque(true);
            buttons[btnNumber - 1].setBackground(Color.white);

            //Puts the player 1 piece on button 1,3,5,7,9 and player 2 piece on button 2,4,6,8,10 
            if ((btnNumber - 1) < 10) 
            { 
                if (((btnNumber - 1) % 2) == 0) 
                { 
                    buttons[btnNumber - 1].setIcon(piece1); 
                } 
                else 
                { 
                    buttons[btnNumber - 1].setIcon(piece2); 
                } 
            } 
            centerPanel.add(buttons[btnNumber - 1]); 
        } 
```

//以下是我正在尝试做的事情，我知道这是不正确的。

```
public void move()
{
Move = dice.getDiceResult();
int buttonClicked = 0;

if(playerOneTurn =true)
{
buttonclicked + diceResult();
} 
```

//修改

```
public class MyActionListener implements ActionListener {
Dice dice;
private boolean playerOneTurn = true;
private boolean playerTwoTurn = false;
    @Override
    public void actionPerformed(ActionEvent e) 
{
    String num = e.getActionCommand();
    int index = Integer.parseInt(num);
    int move = dice.getDiceResult();
    int positionLanding = 0;

    if(playerOneTurn = true)
    {
        positionLanding = index + move;
        positionLanding.setIcon("piece1");//how can I set the image Icon to this position?
    }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:55:05.933

1)[放置客户端属性](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#putClientProperty%28java.lang.Object,%20java.lang.Object%29)

```
buttons[i][j].putClientProperty("column", i);
buttons[i][j].putClientProperty("row", j);
buttons[i][j].addActionListener(new MyActionListener()); 
```

和[getClientProperty](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getClientProperty%28java.lang.Object%29)

```
public class MyActionListener implements ActionListener {

@Override
public void actionPerformed(ActionEvent e) {
    JButton btn = (JButton) e.getSource();
    System.out.println("clicked column " + btn.getClientProperty("column")
            + ", row " + btn.getClientProperty("row"));
} 
```

2)[动作命令](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:48:08.430

最漂亮的方法是使用 Component.setName。然后你甚至不需要用你的组件维护变量 - 你可以直接使用名称

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:46:28.840

您可以在 中找到该按钮`ActionEvent.getSource()`。要找到索引，只需遍历数组，寻找那个特定的按钮。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T14:55:52.000

我更喜欢 aioobe 建议的策略，但这是另一种方式。

```
buttons[btnNumber - 1] = new JButton("label " + btnNumber);
buttons[btnNumber - 1].setActionCommand("" + btnNumber);
// ...

// ...later.. in the actionPerformed() method
String num = actionEvent.getActionCommand();
int index = Integer.parseInt(num);
// ..proceed.. 
```

# html - grails中的Html5 Mime类型错误

> ID：10416108
> 
> 赞同：1
> 
> 时间：2012-05-02T14:44:06.370
> 
> 标签：html, grails, cache-manifest

我正在尝试使用用于 iPad 的 grails 1.3.7 创建 Web 应用程序，并使用缓存清单离线保存数据。我的离线数据在 Chrome 中工作得很好，但在 Safari、iPad 和 Mozilla 中，它给出了一个错误，指出应用程序缓存清单的 MIME 类型不正确：`text/plain`. 我已将 mime 类型设置`Config.groovy`如下：

```
grails.mime.types = [ html: ['text/html','application/xhtml+xml'],
                      xml: ['text/xml', 'application/xml'],
                      text: 'text/plain',
                      js: 'text/javascript',
                      rss: 'application/rss+xml',
                      atom: 'application/atom+xml',    
                      css: 'text/css',
                      csv: 'text/csv',
                      all: '*/*',
                      json: ['application/json','text/json'],
                      form: 'application/x-www-form-urlencoded',
                      multipartForm: 'multipart/form-data',
                      manifest: 'text/cache-manifest' 
                    ] 
```

但是其他浏览器仍然不接受它。我真的很困惑这是一个 html5 问题还是 grails。它适用于铬。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:47:14.897

嘿，我得到了解决方案，我发现 grails 中没有设置 mime 类型...... .........要在 grails 中设置 mime 类型，我们必须创建一个 web.xml 并将以下代码添加到其中...

```
<mime-mapping>
    <extension>manifest</extension>
    <mime-type>text/cache-manifest</mime-type>
</mime-mapping> 
```

但在 grails web.xml 仅在构建战争时创建....所以要创建一个可以与原始 web.xml 合并的 web.xml，请执行以下操作

在命令行类型中

```
grails install-templates 
```

现在在您的项目文件夹中创建 src/templates/war。在war文件夹中创建web.xml并添加您需要的代码......希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:24:52.043

除了修改`web.xml`文件，您还可以通过`HTTPResponse`对象直接从控制器操作中简单地设置 HTTP 内容类型标头：

```
response.contentType = "text/cache-manifest" 
```

[在内容协商](http://grails.org/doc/latest/guide/single.html#contentNegotiation)期间使用阻塞`grails.mime.types`，以允许您更轻松地根据入站 Accepts 标头将不同的响应发送回请求。`Config.groovy`

# c# - 使 ListBox 项目进入下一行

> ID：10416113
> 
> 赞同：0
> 
> 时间：2012-05-02T14:44:28.750
> 
> 标签：c#, winforms, listbox

您好，我目前有一个列表框，当它到达列表框的末尾时，它会继续写入而不是溢出到下一行，我如何让它溢出到下一行？还是那不可能？

编辑：对不起，我忘了提到 Windows 窗体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:57:17.733

我假设您正在使用 WinForms。在这种情况下，您将不得不使用所有者绘制的 ListBox。

参见例如[.NET 的可编辑多行列表框](http://www.codeproject.com/Articles/2695/An-editable-multi-line-listbox-for-NET)。它让您了解如何做到这一点。

或者这个：[多行列表框](http://social.msdn.microsoft.com/Forums/da/winforms/thread/ecec25b5-389c-4200-b6cb-f8dcb9ebf030)

# command-line - 对于使用 devenv.exe 的命令运行太快

> ID：10416122
> 
> 赞同：20
> 
> 时间：2012-05-02T14:44:54.390
> 
> 标签：command-line, vdproj

所以我有一个要运行的命令，如下所示：

```
for /r %n in ("*.vdproj") do "C:/Program Files/Microsoft
 Visual Studio 10.0/Common7/IDE/devenv.exe" %n /build "BuildServer" 
```

它似乎可以在每个 .vdproj 文件上运行 devenv ；但是，它似乎并行运行它们并立即返回。这是个问题; 我需要等到它们都完成后，才能运行 .bat 文件中的下一步。我怎么能

1- 在运行下一个之前，在每个 devenv 上“等待”完成

或者

2- 等到 devenv.exe 完成后再继续？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-02T20:51:41.983

The trick is to use `devenv.com` instead of `devenv.exe`. `devenv.com` will return output to the console and achieve exactly the desired result.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T15:02:06.180

`start`使用例如调用 devenv.exe

```
start /wait "" "C:/Program Files/Microsoft Visual Studio 10.0/Common7/IDE/devenv.exe" %n /build "BuildServer" 
```

用于`start /?`使用。

# svn - 仅使用命令行中的 svn 合并特定修订

> ID：10416123
> 
> 赞同：1
> 
> 时间：2012-05-02T14:44:57.930
> 
> 标签：svn, version-control, svn-merge

如何合并我已提交到我的分支的主干的更改列表？

修订列表是*我*的所有更改，这些是我希望合并到分支的唯一修订 (.)

我试过这个，但无济于事。

> svn 合并 -r498,509,514,516,518,520,523,527,529,539,543,563,565,568,590,591,597 [https://svn.ayrshireminis.com/svn/MINI/trunk/](https://svn.ayrshireminis.com/svn/MINI/trunk/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:48:08.883

尝试使用`-c`而不是`-r`

# drupal - Drupal 主题“未选中”

> ID：10416131
> 
> 赞同：6
> 
> 时间：2012-05-02T14:45:40.083
> 
> 标签：drupal, drupal-7, drupal-theming

有时，每月至少 1 次 +-，当我访问我的网站时，没有选择主题并且我收到很多错误代码。

```
Notice: Undefined index: highlighted em include() (linha 120 de /var/www/novoportal.faccat.br/htdocs/portal/modules/system/page.tpl.php).
    Notice: Undefined index: sidebar_first em include() (linha 132 de /var/www/novoportal.faccat.br/htdocs/portal/modules/system/page.tpl.php).
    Notice: Undefined index: sidebar_second em include() (linha 138 de /var/www/novoportal.faccat.br/htdocs/portal/modules/system/page.tpl.php).
    Notice: Undefined index: genesis em drupal_theme_initialize() (linha 100 de /var/www/novoportal.faccat.br/htdocs/portal/includes/theme.inc).
    Notice: Trying to get property of non-object em _drupal_theme_initialize() (linha 145 de /var/www/novoportal.faccat.br/htdocs/portal/includes/theme.inc).
    Notice: Trying to get property of non-object em _theme_load_registry() (linha 321 de /var/www/novoportal.faccat.br/htdocs/portal/includes/theme.inc).
    Notice: Undefined index: genesis em theme_get_setting() (linha 1316 de /var/www/novoportal.faccat.br/htdocs/portal/includes/theme.inc). 
```

我总是需要再次选择主题并清除缓存。

我也使用了 Devel 主题重建工具，但我不断收到这些错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:35:20.610

这就是我的建议：

1) 首先检查 .info 文件并确保按照 page.tpl.php 的区域存在。您的错误是基于此。

2）如果上述情况属实，那么我接下来要做的就是进行全新安装，只将sites/all/themes/文件夹移动到它，然后我会测试它以确保错误不会发生.

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T11:58:12.267

根据您的描述，我认为这可能是 Drupals 主题发现中的一个奇怪错误 - 尝试调用：

```
_system_rebuild_theme_data() 
```

一次调用它就足够了，所以不要让它永久存在 - 因为它会削弱您的网站加载时间。

我已经提交了一个[错误和描述](http://drupal.org/node/1983244)。

**编辑**

以上可能不会永久解决您的问题，我只是在撰写本文时认为它会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T17:25:39.643

我也遇到过类似的问题，在安装了 nucleus [https://www.drupal.org/project/nucleus](https://www.drupal.org/project/nucleus)主题（在 drupal7 上安装任何自定义主题所必需的）之后，我删除了自定义主题的缓存条目（drupal_cache 表） ，然后解决了上述问题。我现在可以看到模块然后我转到外观选项卡并将我的自定义主题设置为默认主题。希望这会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T17:03:48.350

我相信这在某些情况下可能是由失败的 cron 运行引起的。

我在一个开发网站上观察到这个问题，基本上我是唯一一个与之交互的人。几个小时不活动后，问题就会浮出水面。日志中唯一的事件与 cron 运行有关。

我能够确定正常的、用户启动的 cron 运行不会导致问题。

一种类型的 cron 条目是“无效密钥”错误。我调查并确定有一个 cron 作业设置为在没有密钥的情况下运行。消除该 cron 作业后，我无法再观察到该错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T12:11:30.860

虽然我对这个问题没有答案，但我认为添加一些交叉链接可能会派上用场：

1.  drupal.org 上[的“主题被随机禁用”](https://www.drupal.org/node/1272328)
2.  drupal.org[上的“主题（自定义/派生/新）以随机间隔禁用”](https://www.drupal.org/node/1983244)

如果您发现更多链接，请在此处添加！

编辑（2014-10-22）：在多站点环境中，我们一开始没有安装默认站点。由于这个 Drush 偶尔会产生警告或错误，所以我们`settings.php`在默认站点的目录中添加了一个文件，其中包含测试站点数据库的数据库凭据。由于我们使用它自己的数据库安装了默认站点，幸运的是问题不再发生。:-)

它可能与同时在同一个数据库上执行的多个 crons 有关......？

# java - 是否有相当于 Java 的 Source Outliner？

> ID：10416137
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:45:54.987
> 
> 标签：java, eclipse, ide

我只是在学习 Java，所以这可能很明显。我想知道 Eclipse 中是否有相当于 Java 的 Source Code Outliner？或者它位于 IDE 中的什么位置？

其次，如何通过类似于 Visual Studio 右键单击​​>“转到定义”的键盘快捷键导航到对象/变量的声明语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:49:20.327

假设 Source Outliner 您的意思是[http://sourcecodeoutliner.codeplex.com/](http://sourcecodeoutliner.codeplex.com/)那么 Eclipse 中的等效视图是

**窗口 → 显示视图 → 大纲**或按`Alt`+ `Shift`+ `Q`,`O`

...但如果您在 Java 透视图中，默认情况下这应该在右侧可见。

还有一个快速弹出大纲，可以使用`Ctrl`+从编辑器中访问`O`

要转到变量的声明或方法的定义，只需将文本光标放在它上面并按`F3`。鼠标快捷方式是按住 Control 键单击代码中的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:50:41.963

Ctrl + Shift + Q 用于大纲视图。

第二个问题的答案，当鼠标悬停在方法上时按 ctrl，它会说“开放声明”和“开放实现”。另一个快捷方式是按 F3，它将带您进入声明或方法实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:50:58.817

去定义：

1.  按 F3
2.  右键单击并选择转到定义

大纲：

1.  当前源文件有一个快速大纲：点击 ctrl+O
2.  或者一个单独的窗口（我认为默认可见？）否则通过在菜单上选择 Window->Show View->Outline 来显示它
3.  在左侧的包资源管理器窗口中展开源文件。（单击文件名左侧的符号）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:52:02.773

除了大纲视图，还有一个快速大纲弹出窗口，可以在大多数编辑器中使用 Ctrl-O 快捷键调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:54:39.807

对于大纲：

*   弹出式样式：在 Java 文件中，按`Ctrl + O`（`Ctrl + O`再次按以显示继承的成员）。
*   查看风格：菜单`Window`> `Show View`>`Outline`

导航到声明语句：

*   `Ctrl + Click`（在元素中）；或者
*   将光标置于元素中，按`F3`。

# spring - 使用 Spring Integration Mail 连接到 Microsoft Exchange Server

> ID：10416142
> 
> 赞同：2
> 
> 时间：2012-05-02T14:46:18.413
> 
> 标签：spring, exchange-server, spring-integration

我想使用 Spring Integration Mail 通过 IMAP 连接到 Microsoft Exchange 2010。我的问题是连接字符串的样子。

比方说：

```
domain=earth
user=jdoe
email=jon.doe@earth.com
Folder=inbox 
```

据我所知，MS Exchange 仅支持 imap 进行连接。

我的 Spring 集成配置如下所示：

```
<util:properties id="javaMailProperties">
    <prop key="mail.imaps.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.imaps.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">imaps</prop>
    <prop key="mail.debug">true</prop>
</util:properties>

<mail:inbound-channel-adapter id="imapAdapter"
    store-uri="imaps://earth/jdoe/jon.doe:jdoespw@example.mailhost.com/inbox" channel="recieveEmailChannel"
    should-delete-messages="false" should-mark-messages-as-read="true"
    auto-startup="true" java-mail-properties="javaMailProperties">
    <int:poller fixed-delay="5"
        time-unit="SECONDS" />
</mail:inbound-channel-adapter>

<int:channel id="recieveEmailChannel" />

<int:service-activator input-channel="recieveEmailChannel"
    ref="mailReceiver" method="receive" />

<bean id="mailReceiver"
    class="com.earth.MailReceiver" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:00:06.050

现在发现了。它不必对连接字符串做任何事情。对于那些想要连接到 Exchange 的人，这里有一些提示。

这是我的配置：

```
<util:properties id="javaMailProperties">
    <prop key="mail.imaps.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.imap.starttls.enable">true</prop>
    <prop key="mail.imaps.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">imaps</prop>
    <prop key="mail.debug">true</prop>
</util:properties>

<mail:inbound-channel-adapter id="imapAdapter"
    store-uri="imap://<username>:<password>@<exchange-url>/INBOX" channel="recieveEmailChannel"
    should-delete-messages="false" should-mark-messages-as-read="false"
    auto-startup="true" java-mail-properties="javaMailProperties">
    <int:poller fixed-delay="5"
    time-unit="SECONDS" />
</mail:inbound-channel-adapter>

<int:channel id="recieveEmailChannel" />

<int:service-activator input-channel="recieveEmailChannel"
    ref="reviewMailService" method="receive" /> 
```

通常 Exchange 使用带有 STARTTLS 连接的 Imap。

要执行 SSL 握手，您可以使用 InstallCert Java 程序： [http://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert。爪哇](http://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:39:25.660

1.  imaps:// 之后的第一个节点需要是服务器的 fqdn，而不是域（例如 email.earth.com）。
2.  这里有一个关于交换凭证的常见问题[http://www.oracle.com/technetwork/java/faq-135477.html](http://www.oracle.com/technetwork/java/faq-135477.html)
3.  IIRC，IMAP默认情况下在 Exchange 上**未**启用，管理员必须启用它。

# spring - 在weblogic的spring上下文中覆盖全局jta超时

> ID：10416149
> 
> 赞同：5
> 
> 时间：2012-05-02T14:46:55.110
> 
> 标签：spring, hibernate, weblogic, jta

我们的 Weblogic 具有 30 秒的全局 JTA 超时，因为我们的服务器处于高负载状态，因此将全局超时设置为更大的值对于应用程序的性能至关重要。

所以我想在特定服务的上下文中用特定值覆盖这个 JTA 超时。

我有许多 web 服务的根上下文，它有自己的全局事务管理器：

```
<bean id="jtaTransactionManager" class="org.springframework.transaction.jta.WebLogicJtaTransactionManager">
    <property name="transactionManagerName" value="javax.transaction.TransactionManager"/>
  </bean> 
```

为此事务管理器驱动的注释已启用

```
<tx:annotation-driven proxy-target-class="true" transaction-manager="jtaTransactionManager"/> 
```

我有全局休眠会话工厂：

```
<bean id="parent.session.factory"
        abstract="true"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
        destroy-method="destroy"
        p:dataSource-ref="dataSource.schedules">
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.transaction.manager_lookup_class">
          org.hibernate.transaction.WeblogicTransactionManagerLookup
        </prop>
        <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</prop>
        <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
        <prop key="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
        <prop key="hibernate.cache.use_second_level_cache">false</prop>
        <prop key="hibernate.cache.use_query_cache">false</prop>
        <prop key="hibernate.show_sql">false</prop>
        <prop key="hibernate.connection.autocommit">false</prop>
      </props>
    </property>
  </bean> 
```

然后我有我想要覆盖 jta 超时的 web 服务的上下文：

继承的本地事务管理器：

```
 <bean id="localTransactionManager" parent="jtaTransactionManager">
    <property name="defaultTimeout" value="120"/>
  </bean> 
```

带有 javax TransactionManager 接口的 Bean 用于休眠：

```
 <bean id="localEETransactionManager" factory-bean="localTransactionManager"
        factory-method="getTransactionManager">
    <property name="transactionTimeout" value="120"/>
  </bean> 
```

Hibernate 的会话工厂，带有 EE 接口 (javax.transaction.TransactionManager) 的 lolcaly 覆盖 TransactionManager

```
 <bean id="sessionFactory" parent="parent.session.factory">
    <property name="jtaTransactionManager" ref="localEETransactionManager"/>
    <property name="annotatedClasses">
      <list>
        <value>com.example.City</value>
        <value>com.example.State</value>
        <value>com.example.Country</value>
      </list>
    </property>
  </bean> 
```

最后是本地覆盖 WebLogicJtaTransactionManager 的 DAO：

```
<bean id="addressDao"
        class="com.example.AddressDataAccessObjectImpl"
        p:entityClass="com.example.City"
        p:dataSource-ref="dataSource"
        p:sessionFactory-ref="sessionFactory"
        p:transactionManager-ref="localTransactionManager"/> 
```

但是当我运行我的应用程序休眠引发原因：weblogic.transaction.internal.TimedOutException：事务在 30 秒后超时

并回滚事务。

也许有人知道我对这些覆盖做错了什么？

PS如果我这样做，此覆盖仅适用于根上下文：

```
 <bean id="jtaTransactionManager" class="org.springframework.transaction.jta.WebLogicJtaTransactionManager">
    <property name="transactionManagerName" value="javax.transaction.TransactionManager"/>
    <property name="defaultTimeout" value="120"/>
  </bean> 
```

但这不是我想要的，因为它仍然适用于所有应用程序。

# c++ - C++ DLL 仅将第一个字符返回给 VB 应用程序

> ID：10416152
> 
> 赞同：2
> 
> 时间：2012-05-02T14:47:09.437
> 
> 标签：c++, .net, vb.net, pinvoke

我们的一位技术人员要求我编写一个小型库文件，他将在其中传递文件名和整数。该库将加载文本文件并在文件名引用的文本文件中查找整数，并将字符串返回给他的程序。他在使用 VB 作为其脚本语言的第三方应用程序中工作。

因此，不想担心他安装了他的设备的一些旧机器上的 .net 安装，我决定尝试 C++（VS 2010）。我正在用 C# 进行应用程序开发，最后一次编译任何 C++ 代码是在 VS 6 中，但我认为这有多难？好吧，我在这里打字，所以事情发生了明显的错误。我从 C++ 端开始。

```
#include <WTypes.h>
#include <comutil.h>
#include <string.h>

BSTR _stdcall regExConv(BSTR fileName, int modNumber);

BSTR _stdcall regExConv(BSTR fileName, int modNumber) {
    string inText;
    // open the file and read in the text from the file
    ifstream testFile;
    testFile.open("C:\\Test\\testFile.txt", ifstream::in);
    if(testFile.fail())
        MessageBox(NULL,L"Failed to Open", NULL, NULL);
    while (testFile.good())
        getline(testFile, inText);
    testFile.close();
    _bstr_t passString(inText.c_str());
    BSTR finalPass = passString.copy();
    return finalPass;
} 
```

这很好用。finalPass 给了我文本文件中的测试字符串。

```
Locals Window:

inText  "eeeeeeeee" std::basic_string<char,std::char_traits<char>,std::allocator<char> >

passString  {"eeeeeeeee" (1)}   _bstr_t

finalPass   0x00722214 "eeeeeeeee"  wchar_t * 
```

在 VB 方面，我有这个。

```
Public Class Form1
    Private Declare Function testFunc Lib "c:\Development\gTP3200\Debug\gTP3200.dll" (ByVal testVar As Integer) As Integer
    Private Declare Function stringTest Lib "c:\Development\gTP3200\Debug\gTP3200.dll" (ByVal Str As String) As String
    Private Declare Function regExConv Lib "c:\Development\gTP3200\Debug\gTP3200.dll" (ByVal fileString As String, ByVal faultedMod As Integer) As String
    Private Declare Function stringBack Lib "c:\Development\gTP3200\Debug\gTP3200.dll" () As String

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim retVal As String
        retVal = regExConv("file name pass", 3)
    End Sub
End Class 
```

两者说得很好，问题是返回到 VB 端的字符串只是`inText`.

```
Locals Window:

retVal  "e" String 
```

两天来，我试图阅读所有关于它的内容，但我开始觉得我在一个糟糕的 Monty Python 短剧中。似乎没什么用。我试图将字符串转换为其他各种类型，然后再转换回 BSTR。试过 SysAlloc，没用。

如果我将字符串作为参数传递给 BSTR，然后再次将其传回（如文件名），则 VB 端会读入整个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:00:38.800

你试过 MarshalAs 吗？

```
Private Declare Function stringBack Lib "c:\Development\gTP3200\Debug\gTP3200.dll" () As <MarshalAs(UnmanagedType.BStr)> String 
```

# windows - 创建安装脚本

> ID：10416153
> 
> 赞同：1
> 
> 时间：2012-05-02T14:47:11.500
> 
> 标签：windows, visual-studio-2010, installation

可能自 2000 年代初以来，我就没有搞砸过安装软件，但我想知道现在的理想方式是什么。我曾经使用 InstallShield，但我有点记得 VS.NET 有自己可以使用的安装服务？

我需要做的是复制/创建文件并根据安装文件的安装位置将路径/值插入配置文件。这可以用 VS.NET 完成还是我需要 3rd 方工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:54:24.240

我推荐 innosetup
[http://www.jrsoftware.org/isinfo.php](http://www.jrsoftware.org/isinfo.php)

它使用了一个相当容易学习的专有脚本，对我来说每次都有效

我不知道 MS 在 VS.NET 中是否有自己的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:57:46.747

使用 Visual Studio 2010 有设置项目，但它们在 VS 11 中将消失（http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will -not-ship-with-future-versions-of-vs.aspx）。

[Wix](http://wix.sourceforge.net/)是一种选择，但学习曲线相当陡峭。

InstallShield 也是一种选择。

# javascript - Jquery ui旋转图像调整大小问题

> ID：10416156
> 
> 赞同：5
> 
> 时间：2012-05-02T14:47:16.357
> 
> 标签：javascript, jquery-ui, resize, rotation

我有一个问题，我正在使用可调整大小的 jquery ui。当我在 chrome 中旋转元素时，控件也会旋转，但是当我使用句柄调整 div 的大小时，它们会被反转。我的意思是，如果我使用 sw 控制，它会以奇怪的方式运行，即我向顶部移动并且图像变大，而实际上它应该变小。这是旋转 div 的问题，而不是普通 div 的问题。

这是js小提琴

[http://jsfiddle.net/fahadnabbasi/2FLuf/11/](http://jsfiddle.net/fahadnabbasi/2FLuf/11/)

您将看到两张图像，一张是旋转的，一张是正常的。正常适用于调整大小，同时旋转一个调整大小，但方向相反。尝试从右下角控件调整旋转图像的大小，您将看到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:49:10.337

我认为您需要 jQuery UI Rotation [http://vremenno.net/js/jquery-ui-rotation-using-css-transform/](http://vremenno.net/js/jquery-ui-rotation-using-css-transform/)（它是俄语）。这里是直接下载：http: [//vremenno.net/examples/jquery-ui-rotation/jquery.ui.rotation.zip](http://vremenno.net/examples/jquery-ui-rotation/jquery.ui.rotation.zip)

这是我编写的实现插件的小提琴：http: [//jsfiddle.net/MadLittleMods/4Vfm5/](http://jsfiddle.net/MadLittleMods/4Vfm5/)

包含插件后，只需添加。您还可以添加父 div 并将其应用于`.parent()`：

```
$('.resizable').rotatable(); 
```

这是另一个谈论旋转的话题：[jquery rotation plugin - that works like jquery ui resize](https://stackoverflow.com/questions/4913622/jquery-rotation-plugin-that-works-like-jquery-ui-resize)

# asp.net - 元标记显示为 html 输出（aspx 页面）

> ID：10416157
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:47:19.303
> 
> 标签：asp.net, html, meta-tags

```
protected override void OnLoad(EventArgs e) {
    base.OnLoad(e);
    Literal lTags = new Literal();
    lTags.Text = "<meta name=\"MetaTagsDemo\" content=\"Meta demo tag\" />";
    this.Header.Controls.Add(lTags);
} 
```

我的 default.aspx.cs 中有上述代码。加载 Default.aspx 页面时，我确实看到控件被添加到部分中，但在页面顶部（页面中的第一行），html 显示为“”。

我在这里做错了什么？

我有另一个名为 Browse.aspx 的页面，其中我具有相同的功能，但此页面不显示 html 输出。

**更新**

元标签的来源是数据库，整个元标签存储在一个字段中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:57:16.120

您应该将元标记添加为 html 控件，如下所示：

```
HtmlMeta tag = new HtmlMeta();
tag.Name = "MetaTagsDemo";
tag.Content = "Meta demo tag";
Page.Header.Controls.Add(tag); 
```

更新：

是的，您应该解析数据库输入，使用 HtmlAgilityPack 这是一项简单的任务，例如：

```
 HtmlDocument doc = new HtmlDocument();
  doc.LoadHtml("<meta name=\"MetaTagsDemo\" content=\"Meta demo tag\" />");
  foreach (HtmlNode meta in doc.DocumentNode.SelectNodes("//meta"))
  {
    string metaName = meta.Attributes["Name"].Value;
    string content = meta.Attributes["Content"].Value;
    /// do something
  } 
```

更新 2

没有 HtmlAgilityPack，这是一个又快又脏的方法，你应该测试一下

```
 string meta = "<meta name=\"MetaTagsDemo\" content=\"Meta demo tag\" />";
  string[] splitted = meta.Split('"');
  string metaName = splitted[1];
  string metaContent = splitted[3]; 
```

# visual-studio-2010 - VS 无法加载 VSPerfControl.Interop

> ID：10416160
> 
> 赞同：2
> 
> 时间：2012-05-02T14:47:28.483
> 
> 标签：visual-studio-2010

尝试在 Visual Studio Ultimate 2010 中使用探查器时，IDE 会引发名义错误。我环顾四周，但我唯一能找到的就是将文件添加到 GAC，但这似乎并没有解决我的问题。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T02:39:47.013

下载并安装[带有 Service Pack 1 的 Visual Studio 2010 性能工具](http://www.microsoft.com/en-us/download/details.aspx?id=23205)

这为我解决了这个错误，但是 YMMV

# c# - Listview Binding SelectedItem Grids Image 如何获取

> ID：10416163
> 
> 赞同：0
> 
> 时间：2012-05-02T14:47:41.927
> 
> 标签：c#, wpf, silverlight, windows-runtime

您好需要一些关于以下问题的帮助

```
<ListView x:Name="listview1" MinWidth="250" MaxWidth="250"          SelectionChanged="listview1_SelectionChanged_1"
IsItemClickEnabled="True">
<ListView.ItemTemplate>
<DataTemplate>
<Grid Height="230" Width="220">-->
<Border x:Name="border" CornerRadius="20" BorderBrush="#C6A92F" BorderThickness="4" Width="220" Height="200">
<Image x:Name="propImage" Source="{Binding}" Height="200" Width="180"/>
</Border>
</Grid>
</DataTemplate>
</ListView.ItemTemplate>
</ListView>` 
```

我正在从后面的代码中绑定图像源。

我的查询是如何获取 selectedItem 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:36:09.397

这应该有效：

```
<Image Source="{Binding SelectedItem, ElementName=listview1}" Height="200" Width="180" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:05:05.373

也许挂钩 SelectionChanged 事件可能会对您有所帮助？

```
<ListView ItemsSource="{Binding Content}" SelectionChanged="ListView_SelectionChanged"> 
```

并在您的代码隐藏文件中编写如下处理程序：

```
private void ListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{

} 
```

如果您检查 e.AddedItems，您应该在 e.AddedItems[0].Image 中找到您的图像。

# extjs - ExtJS：datagrid：加载后重新应用排序/刷新

> ID：10416165
> 
> 赞同：2
> 
> 时间：2012-05-02T14:47:48.483
> 
> 标签：extjs, extjs4

我一直在寻找它很长时间，并且（从我自己的角度来看）这是很久以前应该完成的基本行为：您按列对网格进行排序，例如“ `NAME`”，你修改一条记录，名字“ `AAA`”变成“ `ZZZ`”，它被发送到服务器，服务器用“”回答“ok”，`ZZZ`所以值被更新但保持**在同一个地方**，即排序顺序没有被刷新。

有没有办法自动做到这一点？哪个事件，哪个代码？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:38:27.817

一旦从服务器获得“ok”，就可以显式调用 store 方法。就像是：

```
myStore.sort("name","ASC"); 
```

或者，如果您有一组排序列，则可以使用`sorters`商店提供的属性。喜欢：

```
myStore.sort(myStore.sorters); // this uses the existing sorting rules applied to the store 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:34:08.993

我在[Sencha 的论坛](http://www.sencha.com/forum/showthread.php?200412-ExtJS-datagrid-re-apply-sorting-refresh-after-loading)上问过，这是历史上第一次我在 stackoverflow 上得到了答案。因此，为了分享答案，这是我的有效代码：

```
Ext.define('Ext.data.StoreHandleErrors', {
    extend: 'Ext.data.Store',
    alias: 'data.storehandleerrors',

    constructor: function(config) {
        this.callParent([config]);

        this.on(
            'write',
            function(me, opts) {
                this.sort();
            },
            this
        );
    }
}); 
```

说明：我重写了构造函数，以便每次调用“写入”事件，即每次将记录发送到服务器时，都会重新排序存储，以便我们始终确保它已正确刷新。这是一种通用方法，可能“太多”（= 无需为*每次*写入再次重新排序）但（1）它适用于*所有*商店（2）无需像 Abdel 建议的那样制作自定义硬编码的东西（尽管 Abdel 的答案可能更适合在特定的代码中只使用一次）。

# delphi - 如何使用 Delphi 计算特定日期和位置的潮汐

> ID：10416167
> 
> 赞同：6
> 
> 时间：2012-05-02T14:47:51.510
> 
> 标签：delphi

刚刚在 Stack[如何使用 Delphi 计算当前日期的日出和日落时间中看到了这个问题](https://stackoverflow.com/questions/8616245/how-to-calculate-sunrise-and-sunset-time-for-current-date-with-delphi)

有什么方法可以计算潮汐吗？日期和地点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T15:09:32.120

不。日出和日落是基于一个简单的事实，即地球（几乎）是一个被太阳照亮的球体。

潮汐也基于土地上的地理特性。

例如，大不列颠岛影响荷兰和比利时海岸的潮汐，因为水需要时间才能流过加来的街道。

这就是当地政府发布世界大部分地区的潮汐表的原因。

另见[http://www.ehow.com/how_7705476_calculate-ocean-tides.html](http://www.ehow.com/how_7705476_calculate-ocean-tides.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:29:38.173

我不知道 Delphi 中有任何现有的解决方案，但这当然是可能的。
WxTide32 是最著名的自由潮程序。
做一些研究的好地方是 [http://www.wxtide32.com/links.html](http://www.wxtide32.com/links.html)

# mysql - 左连接返回重复值

> ID：10416171
> 
> 赞同：2
> 
> 时间：2012-05-02T14:47:59.390
> 
> 标签：mysql

我收到的结果：

```
id   sku           name                                                              GROUP_CONCAT(quantity_received)                                                                                                            GROUP_CONCAT(item_cost)                                      
4   00004   Antibacterial Wipes     50,14,25,309,50,14,25,309,50,14,25,309,50,14,25,309,50,14,25,309,50,14,25,309,50,14,25,309,50,14,25,309,50,14,25,309    3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49,3.29,3.29,3.29,3.49 
```

我想要的结果：

```
id   sku            name        GROUP_CONCAT(DISTINCT quantity_received)    GROUP_CONCAT(DISTINCT item_cost)
4   00004   Antibacterial Wipes             50,14,25,309                            3.29,3.49 
```

我解决此问题的方法是将 DISTINCT 放在 quantity_recieved 选择中。问题是，如果数量有两个相同的值，例如 50、50、14、25。结果将是 50、14、25。我只想摆脱重复的数字，只得到一次值.

这是查询：

```
SELECT `product`.`id`,`product`.`sku`,`product`.`name`,
    case when coalesce(stock1.`quantity`, '') = '' 
        then '0' 
        else stock1.`quantity` 
    end as qty_warehouse,
    case when coalesce(sum(distinct stock2.`quantity`), '') = '' 
        then '0' 
        else sum(distinct stock2.`quantity`) 
    end as qty_events,
    case when coalesce(stock1.`quantity`, '') = '' 
        then '0' 
        else stock1.`quantity` 
    end + 
    case when coalesce(sum(distinct stock2.`quantity`), '') = '' 
        then '0' 
        else sum(distinct stock2.`quantity`) 
    end as qty_total
GROUP_CONCAT(DISTINCT quantity_received) ,
GROUP_CONCAT(DISTINCT item_cost)
FROM (`product`)
LEFT JOIN`shipping_event` 
    ON `shipping_event`.`product_id` = `product`.`id`
LEFT JOIN `product_stock` as stock1 
    ON `product`.`id` = `stock1`.`product_id` and `stock1`.`location_id` = 112 
LEFT JOIN `product_stock` as stock2 
    ON `product`.`id` = `stock2`.`product_id` and `stock2`.`location_id` != 112  
LEFT JOIN `shipping_list` 
    ON `shipping_event`.`shipping_list_id` = `shipping_list`.`id` 
WHERE `shipping_list`.`type` = 'incoming' 
    AND `shipping_event`.`end_date` > '2004-01-01 01:01:01' 
GROUP BY `product`.`id` 
ORDER BY `sku` asc LIMIT 20 
```

在这种情况下，我使用 group concat 只是为了显示结果。实际上，我将 quantity_received 相加，然后将它们乘以项目成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:44:08.527

您可以使用 a`GROUP BY`然后`JOIN`对`product`表进行子查询。

相同的逻辑也可以应用于其他连接表。如果你这样做，你可以跳过`GROUP BY product.id`：

```
SELECT p.id
     , p.sku
     , p.name
     , COALESCE(stock1.quantity, 0)                  --- minor improvements on
         AS qty_warehouse                            --- the long CASE clauses
     , COALESCE(SUM(DISTINCT stock2.quantity), 0) 
         AS qty_events
     , COALESCE(stock1.quantity, 0) + COALESCE(SUM(DISTINCT stock2.quantity), 0)
         AS qty_total
     , grp.all_quantities_received
     , grp.all_item_costs
FROM product AS p
  LEFT JOIN 
      ( SELECT product_id
             , GROUP_CONCAT(se.quantity_received) AS all_quantities_received
             , GROUP_CONCAT(se.item_cost)         AS all_item_costs
        FROM shipping_event AS se
          LEFT JOIN shipping_list AS sl
            ON  se.shipping_list_id = sl.id 
        WHERE sl.type = 'incoming' 
          AND se.end_date > '2004-01-01 01:01:01' 
        GROUP BY se.product_id
      ) AS grp
    ON  grp.product_id = p.id
  LEFT JOIN `product_stock` AS stock1 
    ON  p.id = stock1.product_id 
    AND stock1.location_id = 112 
  LEFT JOIN product_stock AS stock2 
    ON  p.id = stock2.product_id 
    AND stock2.location_id <> 112  
GROUP BY p.id 
ORDER BY sku ASC
LIMIT 20 
```

# jaxb - 使用 Axis2 服务生成 CXF 客户端代码 (wsdl2java) 时遇到问题

> ID：10416174
> 
> 赞同：2
> 
> 时间：2012-05-02T14:48:02.847
> 
> 标签：jaxb, cxf, axis2, wsdl2java

所以我有一个供应商应用程序，它使用 Axis2 创建了他们的所有服务。无论出于何种原因，如果我使用 Axis2 的 WSDL2Java 生成客户端代码，它就可以正常工作，但是每当我使用 CXF 生成它时，我就会到处出错，而且我不知道如何使 CXF**工作**：

```
[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:2.6.0:wsdl2java (generate-sources) on project unitoffers: Thrown by JAXB:
[ERROR] Thrown by JAXB:
[ERROR] undefined simple or complex type 'xs:EJBException'
[ERROR] at line 1760 column 21 of schema file:/C:/Users/Me/myproject/src/main/resources/wsdl/ObjectHierarchy.wsdl
[ERROR]
[ERROR] undefined simple or complex type 'xs:EJBException'
[ERROR] at line 1831 column 21 of schema file:/C:/Users/Me/myproject/src/main/resources/wsdl/ObjectHierarchy.wsdl
[ERROR]
[ERROR] undefined simple or complex type 'xs:EJBException'
[ERROR] at line 1852 column 21 of schema file:/C:/Users/Me/myproject/src/main/resources/wsdl/ObjectHierarchy.wsdl
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
```

Axis2 是否在做一些 CXF 无法解释的真正时髦的事情？如前所述，我可以使用 Axis2 生成代码，但几乎所有其他服务都是 CXF，我不想在我的项目中混合搭配服务（更不用说有些项目需要同时拥有 Axis2 和CXF 才能工作，这样会让事情变得一团糟）。

# objective-c - iOS - 旋转时视图无法在 iPad 中正确加载

> ID：10416185
> 
> 赞同：1
> 
> 时间：2012-05-02T14:48:57.267
> 
> 标签：objective-c, ios, ipad, uiviewcontroller

我创建了一个支持旋转的简单 iPad 应用程序。它有*两个视图控制器*。从 开始`First View Controller`自动加载。它上面有一个按钮，单击该按钮时会将 的更改为。上面有一个按钮，它设置回。这项工作在人像模式下完美。但是当我将模拟器旋转到横向模式，并单击按钮加载时，它首先**根据设备显示（*****未旋转*****）**，然后在完成动画后将显示旋转到正常（横向）。出了什么问题？设置方法如下：`rootViewController``AppDelegate``rootViewController``AppDelegate``Second View Controller``Second View Controller``rootViewController``First View Controller``First View Controller``Second View Controller``Second View` *`AppDelegate``View Controllers`*

 *```
(void)loadSecondView 
{
    SecondView *secondViewController = [[SecondView alloc] initWithNibName:@"SecondView" bundle:nil];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.window cache:YES ];    
    self.window.rootViewController = secondViewController;
    [UIView commitAnimations];     
}

(void) removeSecondView 
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.window cache:YES ];
    self.window.rootViewController = self.firstViewController;
    [UIView commitAnimations];    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:29:58.060

基本上，您将两个操作包装在一个动画块中。

1.  制作一个新的视图控制器作为根视图
2.  在 curl 动画中显示该视图

因此，您会在动画期间看到两个操作。

1.  新视图被添加到窗口中，并根据设备的方向旋转
2.  curl 动画使新视图可见

您可以通过应用以下更改来解决此问题：

```
- (void)loadSecondView {
    SecondView *secondview = [[SecondView alloc] initWithNibName:@"SecondView" bundle:nil];
    self.window.rootViewController = secondview;
    self.window.rootViewController.view.hidden = YES;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.window cache:YES ];    
    self.window.rootViewController.view.hidden = NO;
    [UIView commitAnimations];
}

- (void)removeSecondView {
    self.window.rootViewController = self.viewController;
    self.window.rootViewController.view.hidden = YES;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.window cache:YES ];
    self.window.rootViewController.view.hidden = NO;
    [UIView commitAnimations];
} 
```

基本上，我们添加的视图没有任何动画效果，而对于过渡动画，我们使用视图的隐藏属性。

HTH。*

# google-maps-api-3 - 谷歌地图 API v3 - 平移工具是命中或错过

> ID：10416190
> 
> 赞同：2
> 
> 时间：2012-05-02T14:49:25.483
> 
> 标签：google-maps-api-3, pan

我对 Google Maps API v3 有一个奇怪的问题，我以前从未见过......

当用户在地图上移动光标时，大部分时间都是平移手，但偶尔会切换到箭头。它最常发生在地图上的特定地理区域（尽管它已经发生在其他地方）。当用户在“箭头”模式下单击地图时，地图图块显示为“已选中”并变为蓝色。只有当光标在地图上显示箭头时用户再次单击，它才会变为非蓝色。

奇怪的是，这只发生在 Firefox、Safari 和 Chrome 中。它不会在 IE9 中发生（我没有检查 IE8）。

[在http://maps.google.com](http://maps.google.com)上的标准谷歌地图产品中也不会发生这种情况。

我的页面还包括其他 html 内容、我与 jQuery 关联使用的特定其他 div 等。换句话说，它不仅仅是地图。我还有一些自定义 CSS，但我不认为 CSS 只会使一组特定的地图图块将箭头更改为可选。

这是我用来加载地图的 html 和 Javascript ......非常典型的东西：

```
 var myOptions = {
        center: new google.maps.LatLng(38.955, -94.798),
        zoom: 13,
        minZoom:13,
        maxZoom:23,
        scaleControl:true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };

      var map = new google.maps.Map(document.getElementById("map_canvas"),
                myOptions); 
```

有人有任何想法/意见/建议吗？

谢谢！

编辑：这是我正在谈论的蓝色行为的屏幕截图：

[截图 http://maps.lenexa.com/google_maps_blue.png](http://maps.lenexa.com/google_maps_blue.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:08:03.983

这是您`<div>s`的地图之一：

```
<div style="left: 50%; top: 50%; width: 10%; height: 10%; z-index: 4;" 
  id="activitySpinner"></div> 
```

我不完全确定它是如何定位的（在地图上），但 z-index 令人不安。上面的任何内容`0`都将其置于地图上方并获得鼠标悬停。

# php - TCPDF - 特殊字符（如： • ）显示为菱形问号

> ID：10416191
> 
> 赞同：2
> 
> 时间：2012-05-02T14:49:32.150
> 
> 标签：php, pdf, utf-8, fonts, tcpdf

我知道 TCPDF 支持特殊字符和多种语言。我已经尝试了所有提供的字体。我想以 UTF-8 生成 PDF。我知道包含的字体“freeserif”肯定包含有问题的字符。“•”

这是我当前的构造函数调用：

`$pdf=new MYPDF('P', 'mm', 'Letter', true, 'UTF-8', false);`

这是正在生成的字符的示例：

`$this->Cell(80,6.35,"• $POST[reportTitle]",0,0,'L',true);`

我也试过用它的 html 代码替换这个字符：

`&#8226;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:52:31.040

[如此处](https://stackoverflow.com/questions/5333702/tcpdf-utf-8-problem)所示：

将`$unicode`TCPDF 构造函数上的参数设置为`false`并将`$encoding`参数设置为`'ISO-8859-1'`或其他字符映射。

[这](http://www.krishnasunuwar.com.np/2011/05/tcpdf-html-to-pdf-conversion-encoding-problem-for-extended-chars/)将帮助您：

UTF-8 unicode 的默认值：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false); 
```

欧洲字符集的构造函数示例：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'ISO-8859-1', false); 
```

# javascript - 使用 KendoUI Charts，如何使 Legend 项成为超链接？

> ID：10416200
> 
> 赞同：2
> 
> 时间：2012-05-02T14:50:19.500
> 
> 标签：javascript, jquery, asp.net, telerik, kendo-ui

我正在使用 KendoUI，并创建了以下图表。在这种情况下，我需要能够使图例项“产品 1”成为超链接。我怎么做？

![](../Images/22814108c76f1037445f197fd6178ef7.png)

我的标记：

```
<div id='chart' ></div>​ 
```

我的脚本：

```
 jQuery('#chart').kendoChart({
seriesDefaults: {
    type: "line",
    missingValues: "interpolate"
},
legend: {
    position: "bottom"
},
valueAxis: [{
    title: {
        text: "Score"
    },
    min: 75,
    max: 90,
    },
{
    name: "hidden",
    visible: false,
    min: 75,
    max: 90},
{
    name: "ProductSurveys",
    min: 15,
    max: 55,
    title: {
        text: "Survey Count"
    },
    color: "#4c4c4c"}],
series: [{
    type: "line",
    name: "<a href='http://jsfiddle.net/rodneyhickman/wCB5a/' >Product 1</a>",
    color: "#004990",
    width: 1,
    markers: {
        background: "#004990"
    },
    tooltip: {
        visible: true,
        template: "<b>Product 1</b><br/>Current Score: #= value #<br/>#= category # "
    },
    data: [87.11, 87.27, 87.21, 86.84, 85.47, 84.87, 84.52, 85.19, 85.19, 85.2, 84.68, 83.78, 82.14]},
{
    type: "line",
    name: "Market Segment Average",
    color: "#da7633",
    width: 1,
    markers: {
        background: "#da7633"
    },
    tooltip: {
        visible: true,
        template: "<b>Market Segment Average</b><br/>Current Score: #= value #<br/>#= category # "
    },
    data: [77.73, 77.27, 77.22, 76.68, 76.19, 75.7, 75.86, 76.09, 76.33, 76.15, 75.75, 75.4, 75.9]},
{
    type: "column",
    data: [50, 48, 48, 46, 46, 48, 49, 46, 39, 37, 36, 34, 27],
    name: "Survey Count",
    color: "#e9eafe",
    axis: "ProductSurveys"}],
categoryAxis: {
    labels: {
        rotation: -45,
        step: 1,
        skip: 0
    },
    categories: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "Jan - 2012", "Feb", "Mar", "Apr"],
    axisCrossingValue: [0, 0, 100, 100]
} 
```

});​</p>

这是我尝试失败的 jsFiddle 项目：http: [//jsfiddle.net/wCB5a/1/](http://jsfiddle.net/wCB5a/1/)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:12:49.220

Telerik 让我知道 KendoUI（版本 2012.1.233）中当前不存在此功能，并且已注意到该功能，并且可能在未来的版本中。

我解决这个问题的方法是隐藏图例。使用超链接创建我自己的图例。

# sql-server - SQL如何显示一个月的'0'值，如果该月的表中不存在数据

> ID：10416201
> 
> 赞同：2
> 
> 时间：2012-05-02T14:50:20.410
> 
> 标签：sql-server, sql-server-2005

首先我的结果是这样的：

| 康顿 | 月 | 塞尔卡普斯科德 | 贝洛普 |
| --- | --- | --- | --- |
| 459611 | 1 | 巴加 | 156000 |
| 459611 | 2 | 巴加 | 73000 |
| 459611 | 4 | 巴加 | 217000 |
| 459611 | 5 | 巴加 | 136000 |
| 459611 | 1 | 西沃 | 45896 |
| 459611 | 3 | 西沃 | 32498 |
| 459611 | 4 | 西沃 | 9841 |
| 330096 | 1 | 巴加 | 42347 |
| 330096 | 3 | 巴加 | 3695 |

我正在尝试在多个帐户上显示 2 个月的预订，每个帐户 ( `KONTONR`) 有几个代码 ( `SELSKAPSKODE`) 记录了预订（预订总和为`BELOP`）。我想概述`BELOP`每个帐户 ( `KONTONR`) 每个代码 ( ) 每月的预订 ( ) 总和`SELSKAPSKODE`。我的问题是，如果没有对该代码进行预订，则该代码不会在一个月内显示。有没有办法解决这个问题？我理解为什么代码不显示，因为它们根本不在我要查询的表中。而且我怀疑解决方案是制作一个“假”表，然后将其与“另一个”表连接（左外连接？）。
我只是无法让它工作，我对 SQL 很陌生。有人可以帮忙吗？
我的查询看起来像这样（我只插入了“嵌套”查询来设置连接，如果这有意义吗？！）：

```
SELECT TOP (100) PERCENT KONTONR, Month, SELSKAPSKODE, BELOP
FROM (
    SELECT SELSKAPSKODE, KONTONR, SKIPS_KODE, MONTH(POSTDATO) AS Month, SUM(BELOP) AS BELOP
    FROM dbo.T99_DETALJ
    WHERE (POSTDATO >= '2012-01-01') AND (BILAGSART = 0 OR BILAGSART = 2)
    GROUP BY SELSKAPSKODE, KONTONR, SKIPS_KODE, MONTH(POSTDATO)
    ) AS T99_summary
GROUP BY KONTONR, SELSKAPSKODE, Month, BELOP
ORDER BY KONTONR, SELSKAPSKODE, Month 
```

所以最后我想“填补”缺失的月份（见开头的表格），例如账户 ( `KONTONR`) 459611 第 3 个月是“缺失的”。我想显示第 3 个月，预订总和 ( `BELOP`) 为“0”。非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:19:02.470

您可以使用值 1-12 查询表并左外连接您的结果。

这是一个使用表变量而不是您的查询和 CTE 来构建带有数字的表的示例。

```
declare @T table
(
  Month int
)

insert into @T values(1)
insert into @T values(1)
insert into @T values(1)
insert into @T values(3)
insert into @T values(3)

;with Months(Month) as
(
  select 1
  union all
  select Month + 1
  from Months
  where Month < 12
)
select M.Month,
       count(T.Month) Count,
       isnull(sum(T.Month), 0) Sum
from Months as M
  left outer join @T as T
    on M.Month = T.Month
group by M.Month 
```

结果：

```
Month       Count       Sum
----------- ----------- -----------
1           3           3
2           0           0
3           2           6
4           0           0
5           0           0
6           0           0
7           0           0
8           0           0
9           0           0
10          0           0
11          0           0
12          0           0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T19:10:19.033

如果你不想做所有这些你也可以修改这个： SUM(BELOP) 和这个： Sum （当 BELOP 不为空时的情况，然后 1 否则 0 结束）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-07T18:33:40.853

如果您有计算的交互的创建日期，您也可以添加年份，如果您的交互跨越多年，这可能会有所帮助。

```
with Months(Month) as
(
  select 1
  union all
  select Month + 1
  from Months
  where Month < 12
)
select M.Month, year(CreatedOn) as Year,
       count(amount) Count,
       isnull(sum(amount), 0) Sum
from Months as M
  left outer join Charge as C
    on M.Month = (month(CreatedOn))
group by M.Month, year(CreatedOn) order by year(CreatedOn) 
```

[![输出](../Images/c34c354a9e775686158ec521bcd45ced.png)](https://i.stack.imgur.com/mhzYM.png)

# c - C 指针中的查询

> ID：10416203
> 
> 赞同：0
> 
> 时间：2012-05-02T14:50:23.697
> 
> 标签：c

我正在尝试在 c 中打印一个 char 类型的指针，我能够看到这些值及其内存地址，如下所示

```
 char *ptr = "I am a string"; 

     printf("\n  value [%s]\n",ptr);
     printf("\n  address [%d]\n",&ptr); 
```

但是当我直接打印如下指针时，它显示错误为`Segmentation fault`

```
 char *ptr = "I am a string"; 

     printf("\n  value [%s]\n",*ptr); 
```

请告诉我这里出了什么问题

注意：如果我将 printf 中的格式更改为 [%d] 或 [%i] 它正在打印。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:53:01.690

`*ptr`是一个 char，而不是 char 指针，并且`%s`需要一个 char 指针（指向 C 字符串）。将 char 视为指针时，`printf`尝试访问无效的内存地址，您会遇到分段错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:54:05.897

`%s`格式说明符需要一个指向以 0 结尾的`char`数组的指针。如果对应的参数`printf`是`*ptr`a `char`，则 a) 未定义的行为和 b) 可能导致字符的值（提升为 a `int`）和可能的一些任意相邻字节，被解释为指针。遵循该假定指针可能会访问未分配给您的程序的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:53:30.730

当您将格式`"%s"`传入`printf`时，该函数需要一个指向 s 数组的指针`char`。

# windows-phone-7 - 如何在 Windows Phone 7 中获取应用程序最大内存限制

> ID：10416205
> 
> 赞同：0
> 
> 时间：2012-05-02T14:50:33.987
> 
> 标签：windows-phone-7

我正在尝试获取**应用程序最大分配的内存**详细信息，为此我使用过`DeviceExtendedProperties`这样

```
long maxBytes = (long)DeviceExtendedProperties.GetValue("ApplicationWorkingSetLimit"); 
```

但它会引发异常`Specified argument was out of the range of valid values.`并且堆栈跟踪是

```
at Microsoft.Phone.Info.ExtendedPropertiesHelper.GetValue(String propertyName, GetValueImplDelegate getValueImpl)
   at Microsoft.Phone.Info.DeviceExtendedProperties.GetValue(String propertyName) 
```

我可以`long currentBytes =(long)DeviceExtendedProperties.GetValue("ApplicationCurrentMemoryUsage");`正常得到但不会得到`ApplicationWorkingSetLimit`。

我浏览了一些博客并在谷歌上搜索了一些解决方案，我发现 DeviceExtendedProperties 已被**弃用**，并提供了`DeviceStatus`该类的位置。

有`DeviceStatus`一个名为的属性`ApplicationMemoryUsageLimit`，它给出了**应用程序最大内存限制**

但

使用此类应用程序时显示包中**未找到错误类**。我正在使用 Windows Phone 7.0 SDK。`DeviceStatus``Microsoft.Phone.Info`

WP7.0 中是否存在 DeviceStatus 类？

请帮助我解决以其他方式获取**ApplicationMaxMemoryLimit**的问题，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:15:12.093

`DeviceStatus`在 7.0 SDK 中不可用。您必须至少将您的应用程序更新到目标 7.1 - 所有其他版本都已弃用。请记住，Windows Phone Marketplace 将不再支持 7.0 应用程序。

# ruby-on-rails - 如何在 Heroku 上使用 Rails 3.2.2 实现 SPDY？

> ID：10416210
> 
> 赞同：12
> 
> 时间：2012-05-02T14:50:48.547
> 
> 标签：ruby-on-rails, spdy

我听说 SPDY 可能是事情的发展方向，我想尝试将它与我正在运行的 Rails 站点一起使用。但是，我找不到任何教程，而且我发现的一个 gem 似乎不起作用（每个人都在所有浏览器上报告相同的错误）。

目前是否可以使用 Rails 应用程序在 Heroku 上实现 SPDY？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T16:57:11.563

不，今天没有办法在 Heroku 上获得 SPDY，尽管我确实希望将来会改变。Heroku 有自己的 HTTP“路由结构”，其前端是 nginx 前端。nginx 团队正在开发一个 SPDY 模块，但它的发布日期还没有确定。此外，Heroku 需要将它安装在他们的前端等上——换句话说，它需要一些仔细的协调。

如果您对使用 Rails 测试 SPDY 感兴趣，我建议您查看 mod_spdy for Apache。您应该能够将Passenger 与mod_spdy 结合使用，尽管现在必须在Heroku 之外运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T13:31:44.223

尝试设置[CloudFlare](https://www.cloudflare.com/plans) SPDY CDN/代理服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T22:30:35.247

您可以在 Heroku 应用程序前设置反向代理。一种方法是使用 Dockhero 插件。

这是一个使用 Heroku 托管的 Rails 应用程序支持 SPDY/HTTP/2/QUIC 的示例 - [https://github.com/dockhero/quic-protocol-demo](https://github.com/dockhero/quic-protocol-demo)

截至 2016 年 9 月，Dockhero 插件处于 Private Alpha 阶段，通过在[https://dockhero.io/上注册免费试用](https://dockhero.io/)

# java - JavaScript 和 Java 在同一个 for 循环中，这可能吗？

> ID：10416211
> 
> 赞同：2
> 
> 时间：2012-05-02T14:50:50.637
> 
> 标签：java, javascript, jsp

在 JSP 文件中，我使用以下代码向属于特定类的元素添加属性：

```
 $($('.dhx_combo_input').get(0)).attr('style','width: 100%;<%=(highlight.get(0))?"background-color: #FF0000;":""%>');  
    $($('.dhx_combo_input').get(1)).attr('style','width: 100%;<%=(highlight.get(1))?"background-color: #FF0000;":""%>');  
    $($('.dhx_combo_input').get(2)).attr('style','width: 100%;<%=(highlight.get(2))?"background-color: #FF0000;":""%>'); 
```

`highlight`是一个`ArrayList<Boolean>`。

我得到了很多这样的行，只有索引不同。它不是很漂亮也不简洁，所以我尝试用 for 循环替换它，但我需要在 JS 和 Java 中使用索引。我不确定这是否可能。我会坚持使用这种语法还是有更好的解决方案？

**编辑 ：**

循环必须受到属于 class 的元素数量的限制`dhx_combo_input`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:55:45.367

除非我误解了你的问题，否则你可以这样做：

```
<%
    for(int i=0;...){
%>

$('.dhx_combo_input').eq(<%=i%>).attr('style','width: 100%;<%=(highlight.get(i))?"background-color: #FF0000;":""%>');

<%
    }
%> 
```

请注意，我稍微修改了您的 jquery 以使用`eq`而不是，`get`因此您不必调用`jquery`两次。

# android - 如何为 twitter.getAccountSettings() 实现 AsyncTask：Android

> ID：10416212
> 
> 赞同：1
> 
> 时间：2012-05-02T14:50:51.250
> 
> 标签：android, android-asynctask, twitter4j

我在我的应用程序中使用 twitter4j。我正在使用下面的代码来检查身份验证令牌是否已过期或用户尚未登录

```
public static boolean isAuthenticated(Context context) {

        TwitterPrefrences twitterPref = new TwitterPrefrences(context);     
        String token = twitterPref.getTwitterAuthToken();
        String secret = twitterPref.getTwitterAuthTokenSecrate();

        AccessToken a = new AccessToken(token,secret);
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.TWITT_CONSUMER_KEY, Constants.TWITT_CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);

        try {
            twitter.getAccountSettings();
            return true;
        } catch (TwitterException e) {
            return false;
        }

    } 
```

但我收到以下错误

```
 05-02 19:52:23.531: E/AndroidRuntime(1441): FATAL EXCEPTION: main
    05-02 19:52:23.531: E/AndroidRuntime(1441): android.os.NetworkOnMainThreadException
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:479)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at twitter4j.internal.http.HttpResponseImpl.<init>(HttpResponseImpl.java:45)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:178)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:75)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:103)
    05-02 19:52:23.531: E/AndroidRuntime(1441):     at 

twitter4j.Twitter.getAccountSettings(Twitter.java:1440) 
```

调用者代码为

```
chbTwOption.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked) {
                    boolean showTwlogin = false;
                    if ("No".equalsIgnoreCase(twitPref.getTwitterAuthToken())
                            || "No".equalsIgnoreCase(twitPref.getTwitterAuthTokenSecrate())) {
                        showTwlogin = true;
                    } else {                        
                        showTwlogin = TwitterUtils.isAuthenticated(AddSchedule.this);
                    }   

                    if(showTwlogin) {
                        showSocialMediaLoginMessage(Constants.TW_LOGIN_MESSAGE);
                    }
                }
            }
        }); 
```

很明显我必须实现`AsyncTask`，`twitter.getAccountSettings()` 但我怎样才能从方法中获得结果`AsyncTask`？有没有其他方法可以检查身份验证令牌是否过期？或者我怎样才能实现`AsyncTask`一个方法，它会`isAuthenticated()`像我使用的那样返回结果。

请指导我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:57:00.847

您可以查看[Zwitscher](https://github.com/pilhuhn/ZwitscherA)的源代码， 尤其是[TwitterLoginActivity](https://github.com/pilhuhn/ZwitscherA/blob/master/src/de/bsd/zwitscher/account/TwitterLoginActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:09:32.827

您很可能在 4.0 设备中遇到此错误，或者如果 http 连接响应时间过长。

如果您不知道 asynctask 那么简单的解决方案将是

```
 public static boolean isAuthenticated(Context context) {
        new Thread() {
        @Override 
        public void run() {
        TwitterPrefrences twitterPref = new TwitterPrefrences(context);     
        String token = twitterPref.getTwitterAuthToken();
        String secret = twitterPref.getTwitterAuthTokenSecrate();

        AccessToken a = new AccessToken(token,secret);
        Twitter twitter = new TwitterFactory().getInstance();
             twitter.setOAuthConsumer(Constants.TWITT_CONSUMER_KEY,Constants.TWITT_CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);

        try {
            twitter.getAccountSettings();
            return true;
        } catch (TwitterException e) {
            return false;
        }
      }
     }.start();

    } 
```

但更好的方法是实现异步任务。

谢谢桑图

# java - 上课不坚持？

> ID：10416213
> 
> 赞同：0
> 
> 时间：2012-05-02T14:50:51.787
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我试图在 GAE DB 中存储一个类，它的一些字段本身就是类。就在进入更多细节之前，我想说在我添加这些新的类字段之前它工作得很好。所以，我按照这里的文档：[https](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses) ://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses 我收到了这个错误：

> org.datanucleus.jdo.exceptions.ClassNotPersistenceCapableException: The class "The class "sportteam.web.client.User" is not persistable. 这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或被未增强的版本隐藏），或找不到该类的元数据/注释。” 是不可持久的。这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或被未增强的版本隐藏），或者找不到该类的元数据。

我尝试使用的主要类是用户：

```
@SuppressWarnings("serial")
@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class User implements Serializable 
{
    // data members

    // user unique facebook id
    @Persistent
    @PrimaryKey
    private String facebook_id;

    // users facebook code
    @Persistent
    private String facebook_code;

    // users device ID code
    @Persistent
    private String dev_id;

    // users registration ID code
    @Persistent
    private String reg_id;

    // user first name
    @Persistent
    private String first_name;

    // user last name
    @Persistent
    private String last_name;

    // user age, should be grater then 8
    @Persistent
    private int age;

    // user email, as setup in facebook
    @Persistent
    private String email;

    // user weight, should be greater then 40
    @Persistent
    private double weight;

    // user workout_level (0.8 is the highest(best shape) and 1 is the lowest)
    @Persistent
    private double workout_level;

    // user gender ("male"/"female"/"unknown")
    @Persistent
    private String gender;
    @Persistent
    @Embedded
    private UserTracks userTracks = null;

    // default constructor
    public User() 
    {
    }
    //....
} 
```

这是 UserTracks 类：

```
 @PersistenceCapable
    @EmbeddedOnly
    @SuppressWarnings("serial")
    public class UserTracks implements Serializable 
    {
        @Persistent
        @Embedded
        //@Element(embedded="true") 
        private List<Track> tracks = null;
        @Persistent
        private long date = 0;

        public UserTracks() 
        {
        }
    } 
```

这些是使用的其他 2 个类：

```
 @PersistenceCapable
    @EmbeddedOnly
    @SuppressWarnings("serial")
    public class Track implements Serializable 
    {

        /** running information **/
        @Persistent
        private double avgSpeed = 0;
        @Persistent
        private double distance = 0;
        @Persistent
        private double calories = 0;
        @Persistent
        private long time = 0;

        /************************/
        @Persistent
        private long date = 0;
        @Persistent
        private String name = null;
        @Persistent
        @Embedded
        private List<GeoPtr> track = null;

        public Track() 
        { // needed for Serializable
        }
    } 
```

地理坐标：

```
 @PersistenceCapable
    @EmbeddedOnly
    @SuppressWarnings("serial")
    public class GeoPtr implements Serializable 
    {

        /** the speed is in m/s **/
        @Persistent
        float speed;
        @Persistent
        long time;
        @Persistent
        double altitude;
        @Persistent
        double latitude;
        @Persistent
        double longitude;
        @Persistent
        double calorie = 0;

        public GeoPtr()
        {   //needed for Serializable
        }
    } 
```

据我所见，每个类都是 PersistenceCapable 并且所有字段都是 PersistenceCapable 本身或它的集合，根据上面的文档，它应该可以工作。

想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:54:51.503

您尝试使用嵌入式类 Track 将 GeoPtr 的集合存储到 UserTracks。DataStore 将如何处理它？当嵌入到 GeoPtr 的 UserTracks 字段时，添加到 DataStore 中的常见单个记录。你将会有：

avgSpeed, distance, ...., 速度, 时间

DataStore 在收集情况下应该做什么？

avgSpeed, distance, ...., speed_1, time_1, ..., speed_2, time_2, ... speed_N, time_N

？？？

这有什么意义吗？

不要使用嵌入式。使用主键创建三个单独的类。对 User - UserTracks 使用一对一关系，对 UserTracks - GeoPtr 使用一对多关系。[在此处](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships)阅读有关关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:27:07.243

显然，嵌入一组用户定义的类存在一些问题。我在某处读到它不可能嵌入一个本身具有嵌入式集合字段的集合字段。但是，您可以通过序列化这些字段来实现几乎相同的效果（您将无法对它们进行索引 - 这是序列化与嵌入式之间的区别，但我不需要这些字段上的索引供我使用，所以效果很好）你可以通过使用下一个符号来做到这一点：@Persistent(serialized = "true")

希望它可以拯救大家我所经历的痛苦。

酒吧。

# wordpress - 使用 get_posts 显示 wordpress 帖子 - 第一篇帖子不显示日期

> ID：10416214
> 
> 赞同：3
> 
> 时间：2012-05-02T14:50:53.627
> 
> 标签：wordpress

您好正在使用 get_posts 来获取所有标记为“新闻”的帖子并将它们显示在给定页面上。我正在使用 the_date() 来获取日期，但奇怪的是第一个帖子没有显示日期，而在此之后的所有帖子都显示日期正常。我也使用这个相同的代码在另一个页面上显示标记为“博客”的帖子，但它们工作正常。

这是页面： [http ://appshare.nsdesign7.net/news/](http://appshare.nsdesign7.net/news/)

这里也是使用相同代码但工作正常的另一个页面：http: [//appshare.nsdesign7.net/blog/](http://appshare.nsdesign7.net/blog/)

```
<? $pageTitle = wp_title('',false,'');
if ($pageTitle == "  News") { ?>

 <?php $appsharenewspage = array( 'numberposts' => 10, 'order'=> 'ASC', 'orderby'=>     'title', 'category' => 3 ); 
 $postslist = get_posts( $appsharenewspage ); foreach ($postslist as $post) :     setup_postdata($post); ?> 
     <article class="newsstyle">
        <span class="imagestyle"><?php the_post_thumbnail(array(120,120)); ?>    </span>
        <h3><?php the_title(); ?></h3>
        <span class="date"><?php the_date(); ?></span>
       <?php the_excerpt(); ?>
           <div class="clear"></div>
    </article>
<?php endforeach; ?>

  <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:04:52.367

该日期每天仅出现一次。即对于同一天的 2 个帖子，一个将没有日期。这是一个WP功能。为了得到你想要的东西，用 php 函数获取时间。尝试使用`the_time()`而不是`the_date()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:03:18.910

the_date() 仅限于每天仅显示一次日期。因此，如果您在同一天有多个帖子，它只会显示在其中一个帖子上。

请改用 the_time。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:04:17.087

尝试`<?php echo get_the_date(); ?>`改用。

如果帖子仅在同一天发布，则 the_date 显示日期。

参考：[http ://codex.wordpress.org/Function_Reference/get_the_date](http://codex.wordpress.org/Function_Reference/get_the_date)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:04:30.297

尝试使用：

```
echo get_the_date(); 
```

阅读**特别说明**：[http ://codex.wordpress.org/Template_Tags/the_date](http://codex.wordpress.org/Template_Tags/the_date)

# c# - WebBrowser 不重定向

> ID：10416218
> 
> 赞同：0
> 
> 时间：2012-05-02T14:51:04.723
> 
> 标签：c#, windows-phone-7, browser

我想知道为什么我的网络浏览器没有重定向到我的 html 页面。

我的 xaml 页面上有一个带有点击事件的链接按钮，当我第一次加载页面时，我正在创建我的对象 webbrowser。

这是我正在使用的代码：

```
 private void web_Tap(object sender, GestureEventArgs e)
    {

        wbbrowser.Navigate(new Uri("http://mywebsite.com/index.html", UriKind.Absolute));
    } 
```

这是我正在使用的 Xaml：

```
<controls:PanoramaItem Header="about me">
            <!--Double line list with text wrapping-->
            <StackPanel Margin="0,0,0,17" Width="432" Height="483" >
                <Rectangle Height="186" Width="150"  Margin="-250,0,9,10" >
                    <Rectangle.Fill>
                        <ImageBrush ImageSource="Img/id.jpg"></ImageBrush>
                    </Rectangle.Fill>
                </Rectangle>
                <TextBlock Text ="Name" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                <TextBlock Text="age" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextSubtleStyle}"/>
                <TextBlock Text="nationality" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextSubtleStyle}"/>
                <TextBlock Text="adress" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextSubtleStyle}"/>
                <TextBlock Text="phone" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextSubtleStyle}"/>
                <TextBlock Text="email" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextSubtleStyle}"/>
                <TextBlock Text="others" TextWrapping="Wrap" Margin="12,-6,12,10" Style="{StaticResource PhoneTextSubtleStyle}"/>
                <HyperlinkButton Name="web" Content="web version"  Margin="12,-6,12,10" Tap="web_Tap"></HyperlinkButton>

            </StackPanel>
        </controls:PanoramaItem> 
```

所以我实际上并没有声明 Phone:WebBrowser。我只是在加载的主页上创建我的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:12:02.907

首先，您以错误的方式使用**HyperlinkBut​​ton 。**您需要为其添加一个`TargetName="NAME_OF_TARGET"`导航。其次，使用`NavigateUri`属性导航到页面而不是处理点击。

这已在[MSDN 文档文章](http://msdn.microsoft.com/en-us/library/system.windows.controls.hyperlinkbutton%28v=VS.95%29.aspx)中进行了描述。

# rapidminer - rapidminer 一些概念

> ID：10416219
> 
> 赞同：0
> 
> 时间：2012-05-02T14:51:12.237
> 
> 标签：rapidminer

在rapidminer中是什么意思：

```
 - training cycles
    - learning rate
    - momentum 
```

我正在尝试使用 rapidminer，但我无法理解这个概念。任何帮助都将不胜感激，尽可能新鲜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:10:18.440

这是神经网络（以及 RapidMiner 正在使用的库）中使用的术语，尤其是 RapidMiner。

这是一个非常简短的解释。有关更多详细信息，您必须研究神经网络。

具有反向传播的多层感知器在称为**训练周期**的几次迭代中学习模型（即调整权重/反向传播误差） 。在每次迭代中，误差都会减少。

**学习率**指定了旧权重在每个循环中对学习的贡献程度。太大的速率会导致模型的灵活性较差，并且会产生局部最小值。值太小意味着模型的学习速度会非常慢。如果您的学习速度较慢，请使用较小的值并小心增加。

**动量**是另一个参数，它决定了你是否陷入局部最小值（小值）（大值，但学习不稳定）。

# ios - PhoneGap/Cordova 和外部 url 而不是 www/index.html

> ID：10416225
> 
> 赞同：1
> 
> 时间：2012-05-02T14:51:28.973
> 
> 标签：ios, cordova, appstore-approval

我即将使用 Cordova.js 构建和应用程序以在 iPhone 上启用文件上传。我只想使用常规的响应式网站并包含cordova.js 来访问相机等本机功能。

我在某处读到，Apple 可能会拒绝在这样的应用程序中加载外部 url 的应用程序。这是真的吗？真正的问题是什么？

如果应用默认包含本地页面并在用户交互时打开外部内容，会不会有所不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:13:28.977

好吧，如果您的应用程序可以被网站复制，那么 Apple 就会拒绝它。您将添加相机功能，这是一个好的开始。如果您不使用某些本机功能，他们会立即拒绝它。

其次，Apple 不喜欢从远程位置加载代码的应用程序。他们希望能够自己检查所有事情，并且不喜欢在没有他们能够首先验证的情况下改变事情的想法。因此，远程数据还可以，但远程代码不在他们的眼中。

# string - 我应该使用字符串而不是 TFilename 吗？

> ID：10416226
> 
> 赞同：17
> 
> 时间：2012-05-02T14:51:29.680
> 
> 标签：string, delphi, delphi-7, filenames

将文件名参数传递给过程/函数时，我应该使用`TFilename`or 吗`String`？

如果有区别，那是什么，如果使用 a ，那么潜在的后果是`String`什么？

例如

```
procedure TForm1.OpenFile(const AFilename : String);
begin
    //Open the file if it exists
    ...
end; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T14:57:58.880

我认为`TFilename`应该在开发组件时使用，因为这样 IDE 可以显示它的属性编辑器（在属性检查器中单击省略号时将显示 TOpenDialog）。

除此之外，使用哪一个基本上没有区别。请记住，如果您使用，则`TFilename`必须添加`SysUtils`到您的使用子句中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T15:22:35.233

纯代码中`string`和类型之间的唯一实际区别是通过引用传递参数。`TFileName`以下代码

```
procedure GetFileName(var FileName: TFileName);
begin
  FileName:= 'abcd.abc';
end;

procedure TForm1.Button2Click(Sender: TObject);
var
  S: string;

begin
  GetFileName(S);
end; 
```

不编译错误

```
[DCC Error] E2033 Types of actual and formal var parameters must be identical 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T09:41:48.457

也许这有点太明显了，但是使用`string`类型并不能传达任何关于变量预期用途的信息。但是当你遇到一个声明为 a 的变量时`TFileName`，那里会传达更多的细节。

相同的原则适用于其他基本类型，如`Integer`,等。相反`Cardinal`，`Double`您可能需要考虑为这些类型使用别名，如`TCustomerID`, `THashValue`,`TInterestRate`等，因为它们更清楚地传达了这些变量的预期用途。

这提高了可读性，并且还允许在需要时更改基本类型，而无需使用该类型触及任何代码......只需重新编译即可完成（但请注意二进制兼容性）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-13T16:15:13.967

嗯，我的强烈偏好是因为`const AFilename: String;` 特别是对于大型项目，如果您需要从其他编码器添加源代码，如果他们使用了许多自定义类型，如 TCustomerID、THashValue、TInterestRate，而不是 Integer、Cardinal、Double , 那么你有很多上面提到的 E2033 需要解决。

甚至很多源代码中内置的 delphi 也不使用 TFileName，例如：

```
 function MatchesMask(const Filename, Mask: string): Boolean; 
```

此外，如果我定义了一个变量，`AFileName: TFileName;`那么它显然是一个文件名和命名类型不会为我增加任何可读性，如果在某些情况下它会降低代码的可读性，因为你必须点击查看它的实际变量源自。

# spotify - Spotify 应用程序更新后死机？

> ID：10416228
> 
> 赞同：4
> 
> 时间：2012-05-02T14:51:36.667
> 
> 标签：spotify

我正在开发一个 Spotify 应用程序，突然 Spotify 重新启动并更新了。是的，太好了.. 我得到了 0.8.3.222.g317ab79d 版本......但是输入 spotify:app:the_app_name 不再起作用了。我收到元数据失败，抱歉我找不到这个应用程序。

谁知道我在哪里可以找到降级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:22:53.640

Spotify 0.8.3 稍微改变了应用查找。获取开发中应用程序的 URI 现在是`spotify:app:application-identifier-in-manifest`.

这改变了旧版本中的行为，旧版本使用应用程序的目录名称来加载应用程序。还值得注意的是，您的应用程序的`manifest.json`文件中必须有一个有效的标识符和版本。请记住在更改清单时重新启动客户端，以便它注意到更改！

您需要设置的键是`BundleIdentifier`（将用于查找应用程序）和`BundleVersion`. 可以在[此处](https://developer.spotify.com/technologies/apps/guidelines/#applicationmanifest)找到有关密钥的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:53:57.593

当您查看 spotify.com 时，您会看到一条即时消息，这表明服务器或应用程序故障仅持续几分钟/小时，并在消息消失后​​返回开发。

# http - SOAP 历史上是否专门将 HTTP POST 用于 HTTP？

> ID：10416233
> 
> 赞同：1
> 
> 时间：2012-05-02T14:51:50.037
> 
> 标签：http, post, soap

SOAP 历史上是否专门使用过 HTTP POST？换句话说，SOAP 主要使用 HTTP POST 来处理所有类型的请求吗？相比之下，RESTful 方法可能是使用与消息目的密切匹配的请求类型。我想知道 SOAP 的当前和历史立场是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:43:37.877

SOAP 从 1.1 版本开始主要考虑历史上使用 HTTP POST（尽管可以使用其他协议，例如 SMTP）来进行请求和响应。但是，从 1.2 版开始，它可以使用 GET 请求，而没有 SOAP 消息接收 SOAP 响应。（Papazoglou, Michael P. (2008)。Web 服务：原理和技术。Harlow：Pearson Education Limited。p140-143。）

# ruby-on-rails - Rails 嵌套模型表单在子对象上显示随机顺序

> ID：10416237
> 
> 赞同：1
> 
> 时间：2012-05-02T14:51:58.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我遵循并使用了[Ryan Bate 的嵌套模型表单教程](http://railscasts.com/episodes/196-nested-model-form-revised)来为我的版本创建轨道（在教程中是调查问题）。

这非常有效，直到我注意到轨道添加到数据库的顺序似乎是随机的，而不是它们出现或以我需要的形式输入。

轨道是使用发布模型中的以下定义构建的：

```
 def track_attributes=(track_attributes)
    track_attributes.each do |attributes|
      tracks.build(attributes)
    end
  end 
```

然后在 release _form partial 我有：

```
<%= f.fields_for :tracks do |builder| %>
<%= render 'track_fields', :f => builder %>
<% end %> 
```

这会引入 _track_fields 部分，其中包含：

```
<%= f.text_field :name, :class => "text" %>
<%= f.text_field :isrc, :class => "text" %>
<%= f.check_box :_destroy %>
etc 
```

任何想法为什么轨道阵列丢失了它们输入的顺序？

我在releases_tracks 中使用acts_as_list 有许多可以正常工作的直通模型，但它从错误添加到轨道表的内容中获取顺序。

编辑：

看来我的曲目正在保存：

```
accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true 
```

不像我想象的那样通过 track_attributes=(track_attributes) def。

有谁知道如何编写一个 before_save 方法，该方法将按我现在添加到表单中的位置字段对曲目进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:58:13.893

SQL 查询的执行顺序通常是随机的。这可以适用于批量插入和选择。如果您需要按特定顺序记录记录，则必须使用 ORDER BY 子句。根据记录的保存方式，您可能可以按 id 进行排序，否则考虑添加一个表示每个项目的列表位置的字段。

# vb.net - 如何在 VB.Net 中获取外部计算机的计算机名称？

> ID：10416247
> 
> 赞同：0
> 
> 时间：2012-05-02T14:52:47.553
> 
> 标签：vb.net, computer-name

如果我能够让外部计算机获得自己的名称并将其作为变量传递给 Web 服务，这将更容易，但我现在无法做到这一点。来自多个不同实体的不同数量的计算机定期访问我们其中一台服务器上的 Web 服务。仅更改服务器上的一些 VB.Net 代码，而在任何这些外部计算机上什么都没有更改，我如何能够在 VB.Net 中以编程方式获取它们的名称？谢谢！

编辑：一些答案看起来像是旨在获取服务器、服务器路由器或其他类似内容的 IP。也许我只是误读了代码或其他东西，但我说的是获取客户端的**名称**，尝试访问服务器上的 webmethod 的**外部计算机，使用 webmethod 的代码来这样做。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:19:25.337

如果没有地址转换并且计算机有 DNS 条目：

```
Dim ip As String = System.Web.HttpContext.Current.Request.UserHostAddress
Dim name as String = System.Net.Dns.GetHostEntry(ip).HostName() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T07:43:58.307

```
System.Net.Dns.GetHostAddresses(My.Computer.Name)(5).ToString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:13:25.730

VB.Net获取外部IP的快速解决方案

```
Dim sIp As String
Dim webClient As System.Net.WebClient = New System.Net.WebClient() 
sIp = webClient.DownloadString("http://lbb.ie/ip.php") 
```

就是这样 它是我自己服务器上的我自己的 php 文件，所以继续吧:) 享受

# jquery - 单击按钮时jquery杀死悬停规则

> ID：10416248
> 
> 赞同：2
> 
> 时间：2012-05-02T14:52:48.913
> 
> 标签：jquery, click, hover

我有 2 个 jquery 事件。

```
$('#thebutton').click( 
```

和.....

```
$('#thebutton').hover( 
```

显然，一旦您将鼠标悬停在按钮上，悬停事件就会激活。单击按钮后，我希望触发该事件，以便我可以操作按钮，但也可以终止 mouseoff 事件，以便保留更改。

或者当我即将提交时，点击事件是否应该在悬停内？如果是这样，我猜你仍然需要杀死mouseoff....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:01:44.583

当您单击按钮时，这将触发“mouseleave”事件......假设您希望执行关联的函数：

```
$('#thebutton').click(function(){
   $(this).trigger('mouseleave');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:01:58.520

我假设您希望`mouseleave`在单击按钮时停止执行悬停。

可能你可以使用一个简单的布尔值来检查它是否点击了..

```
var isClicked = false;
$('#thebutton').click(function () {
    isClicked = true;
    //Your code
});

$('#thebutton').hover(function () { //mouseenter
    isClicked = false;
    //Your code
}, function() { //mouseleave
    if (isClicked) return false;
    //Your code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:55:51.237

那么你不会使用[`hover()`](http://api.jquery.com/hover/)，你会使用[`mouseover()`](http://api.jquery.com/mouseover/)

```
 $('#thebutton').mouseover(function(){
        // do your mouse over here
   });

   $('#thebutton').click(function(){
       // do your click code here
    }); 
```

# javascript - YouTube 嵌入设置没有控件但全屏

> ID：10416253
> 
> 赞同：1
> 
> 时间：2012-05-02T14:53:02.930
> 
> 标签：javascript, flash, youtube, youtube-api

我需要嵌入具有以下属性的 YouTube 播放器：

*   不得让用户前进或后退（无进度条）
*   必须有权访问播放器事件（播放器消失并在视频结束时显示消息）
*   必须能够根据用户的要求进入全屏并恢复正常。

我希望 JS API 能让我轻松地做到这一点，但显然 Flash 安全性使得用户必须单击 Flash 元素本身的某个位置才能使用 Flash 进入全屏模式。

作为一种解决方法，现在我正在使用 HTML5 全屏 API，如下所示：http: [//blogs.sitepointstatic.com/examples/tech/full-screen/index.html](http://blogs.sitepointstatic.com/examples/tech/full-screen/index.html)

但这会导致跨浏览器的乐趣，甚至似乎会干扰我的播放器事件（当我请求全屏时，视频停止播放并回到开头）。我可以尝试更多地从这个角度工作，但我祈祷有更简单的方法。

如果有某种方法可以自定义嵌入式 YouTube 播放器以删除进度条但仍然允许带 Flash 的全屏，我会很高兴，因为它更加无缝。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:07:53.743

您的用户应该仍然可以通过双击视频来全屏显示。HTML5 全屏 api 应该可以正常工作，但是如果您在重新初始化 flash 插件时遇到问题，我会做两件事。首先向浏览器供应商报告错误，以便修复。两个第二次监听 onYouTubePlayerReady 并再次添加您的事件监听器。然后在全屏播放之前找到他们所在的视频点。

# java - 最快的字节数组连接方法

> ID：10416259
> 
> 赞同：3
> 
> 时间：2012-05-02T14:53:23.937
> 
> 标签：java, performance, bytearray, concatenation

我得到了一个包含消息的 n 部分作为字节数组的映射。在最后一块进入地图后，必须将消息连接起来。我找到了两个应该满足要求的解决方案。第一个是使用 System.arraycopy：

```
public byte[] getMessageBytes() throws IOException {
    byte[] bytes = new byte[0];
    for (final Map.Entry<Short,byte[]> entry : myMap.entrySet()) {
        byte[] entryBytes = entry.getValue();
        byte[] temp = new byte[bytes.length + entryBytes.length];
        System.arraycopy(bytes, 0, temp, 0, bytes.length);
        System.arraycopy(entryBytes, 0, temp, bytes.length, entryBytes.length);
        bytes = temp;
    }
    return bytes;
} 
```

第二个是使用 ByteArrayOutputStream：

```
public byte[] getMessageBytes() throws IOException {
    final ByteArrayOutputStream baos = new ByteArrayOutputStream();
    for (final Map.Entry<Short,byte[]> entry : myMap.entrySet()) {
        baos.write(entry.getValue());
    }
    baos.flush();
    return baos.toByteArray();
} 
```

从性能和内存使用的角度来看，更好的方法是什么？有没有更好的连接方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T14:56:23.573

由于您可以通过将片段的长度相加来找出消息的大小，因此我会：

1.  将片段的长度相加，并分配输出数组；
2.  使用循环将`arraycopy()`每个部分放入输出数组中的正确位置。

这可能是内存高效且快速的。然而，只有剖析才能讲述完整的故事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T14:58:12.000

这应该比你的第一个版本更好（未经测试）

```
public byte[] getMessageBytes() throws IOException {
    long amount = 0L;
    long offset = 0L;
    // no reason to use entrySet() if you just use the values
    for (byte[] arr : myMap.values()) {
        amount += arr.length;
    }
    byte[] dest = new byte[amount];
    for (byte[] arr : myMap.values()) {
        System.arraycopy(arr, 0, dest, offset, arr.length);
        offset += arr.length;
    }
    return dest;
} 
```

（这个答案大致相当于aix的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:56:14.617

正确的答案是针对您的特定情况进行测试和比较。

那是一个 SortedMap，比如 TreeMap，还是你实际上是在随机合并字节？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:03:37.793

您为每次迭代创建一个新数组的第一个解决方案是 O(n^2)，如果您有很多条目，这是一个问题。另外，它相当复杂。

使用 ByteArrayOutputStream 更好有两个原因：它在 O(n) 中运行，而且非常简单。

最有可能快一点的是：如果你先计算总大小，然后使用 System.arraycopy。但我只会在 ByteArrayOutputStream*真的*太慢的情况下这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T16:22:45.657

首先计算大小并分配一次结果应该是返回字节数组的最快解决方案。

如果您稍后使用生成的字节数组`InputStream`，并且根据数组的组合大小，最快的方法可能是根本不连接。在这种情况下，您可以创建一个[`SequenceInputStream`](http://docs.oracle.com/javase/6/docs/api/index.html?java/io/SequenceInputStream.html)包装几个`ByteArrayInputStreams`. 未经测试的示例代码：

```
Collection<byte[]> values = map.values();
List<ByteArrayInputStream> streams = new ArrayList<ByteArrayInputStream>(values.size());
for (byte[] bytes : values) {
    streams.add(new ByteArrayInputStream(bytes));
}
return new SequenceInputStream(Collections.enumeration(streams)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-22T13:09:40.177

**这是本机代码。**

```
 /*
     * public static void arraycopy(Object src, int srcPos, Object dest,
     *      int destPos, int length)
     *
     * The description of this function is long, and describes a multitude
     * of checks and exceptions.
     */
    static void Dalvik_java_lang_System_arraycopy(const u4* args, JValue* pResult)
    {
        ArrayObject* srcArray = (ArrayObject*) args[0];
        int srcPos = args[1];
        ArrayObject* dstArray = (ArrayObject*) args[2];
        int dstPos = args[3];
        int length = args[4];
        /* Check for null pointers. */
        if (srcArray == NULL) {
            dvmThrowNullPointerException("src == null");
            RETURN_VOID();
        }
        if (dstArray == NULL) {
            dvmThrowNullPointerException("dst == null");
            RETURN_VOID();
        }
        /* Make sure source and destination are arrays. */
        if (!dvmIsArray(srcArray)) {
            dvmThrowArrayStoreExceptionNotArray(((Object*)srcArray)->clazz, "source");
            RETURN_VOID();
        }
        if (!dvmIsArray(dstArray)) {
            dvmThrowArrayStoreExceptionNotArray(((Object*)dstArray)->clazz, "destination");
            RETURN_VOID();
        }
        /* avoid int overflow */
        if (srcPos < 0 || dstPos < 0 || length < 0 ||
            srcPos > (int) srcArray->length - length ||
            dstPos > (int) dstArray->length - length)
        {
            dvmThrowExceptionFmt(gDvm.exArrayIndexOutOfBoundsException,
                "src.length=%d srcPos=%d dst.length=%d dstPos=%d length=%d",
                srcArray->length, srcPos, dstArray->length, dstPos, length);
            RETURN_VOID();
        }
        ClassObject* srcClass = srcArray->clazz;
        ClassObject* dstClass = dstArray->clazz;
        char srcType = srcClass->descriptor[1];
        char dstType = dstClass->descriptor[1];
        /*
         * If one of the arrays holds a primitive type, the other array must
         * hold the same type.
         */
        bool srcPrim = (srcType != '[' && srcType != 'L');
        bool dstPrim = (dstType != '[' && dstType != 'L');
        if (srcPrim || dstPrim) {
            if (srcPrim != dstPrim || srcType != dstType) {
                dvmThrowArrayStoreExceptionIncompatibleArrays(srcClass, dstClass);
                RETURN_VOID();
            }
            if (false) ALOGD("arraycopy prim[%c] dst=%p %d src=%p %d len=%d",
                srcType, dstArray->contents, dstPos,
                srcArray->contents, srcPos, length);
            switch (srcType) {
            case 'B':
            case 'Z':
                /* 1 byte per element */
                memmove((u1*) dstArray->contents + dstPos,
                    (const u1*) srcArray->contents + srcPos,
                    length);
                break;
            case 'C':
            case 'S':
                /* 2 bytes per element */
                move16((u1*) dstArray->contents + dstPos * 2,
                    (const u1*) srcArray->contents + srcPos * 2,
                    length * 2);
                break;
            case 'F':
            case 'I':
                /* 4 bytes per element */
                move32((u1*) dstArray->contents + dstPos * 4,
                    (const u1*) srcArray->contents + srcPos * 4,
                    length * 4);
                break;
            case 'D':
            case 'J':
                /*
                 * 8 bytes per element.  We don't need to guarantee atomicity
                 * of the entire 64-bit word, so we can use the 32-bit copier.
                 */
                move32((u1*) dstArray->contents + dstPos * 8,
                    (const u1*) srcArray->contents + srcPos * 8,
                    length * 8);
                break;
            default:        /* illegal array type */
                ALOGE("Weird array type '%s'", srcClass->descriptor);
                dvmAbort();
            }
        } else {
            /*
             * Neither class is primitive.  See if elements in "src" are instances
             * of elements in "dst" (e.g. copy String to String or String to
             * Object).
             */
            const int width = sizeof(Object*);
            if (srcClass->arrayDim == dstClass->arrayDim &&
                dvmInstanceof(srcClass, dstClass))
            {
                /*
                 * "dst" can hold "src"; copy the whole thing.
                 */
                if (false) ALOGD("arraycopy ref dst=%p %d src=%p %d len=%d",
                    dstArray->contents, dstPos * width,
                    srcArray->contents, srcPos * width,
                    length * width);
                move32((u1*)dstArray->contents + dstPos * width,
                    (const u1*)srcArray->contents + srcPos * width,
                    length * width);
                dvmWriteBarrierArray(dstArray, dstPos, dstPos+length);
            } else {
                /*
                 * The arrays are not fundamentally compatible.  However, we
                 * may still be able to do this if the destination object is
                 * compatible (e.g. copy Object[] to String[], but the Object
                 * being copied is actually a String).  We need to copy elements
                 * one by one until something goes wrong.
                 *
                 * Because of overlapping moves, what we really want to do
                 * is compare the types and count up how many we can move,
                 * then call move32() to shift the actual data.  If we just
                 * start from the front we could do a smear rather than a move.
                 */
                Object** srcObj;
                int copyCount;
                ClassObject*   clazz = NULL;
                srcObj = ((Object**)(void*)srcArray->contents) + srcPos;
                if (length > 0 && srcObj[0] != NULL)
                {
                    clazz = srcObj[0]->clazz;
                    if (!dvmCanPutArrayElement(clazz, dstClass))
                        clazz = NULL;
                }
                for (copyCount = 0; copyCount < length; copyCount++)
                {
                    if (srcObj[copyCount] != NULL &&
                        srcObj[copyCount]->clazz != clazz &&
                        !dvmCanPutArrayElement(srcObj[copyCount]->clazz, dstClass))
                    {
                        /* can't put this element into the array */
                        break;
                    }
                }
                if (false) ALOGD("arraycopy iref dst=%p %d src=%p %d count=%d of %d",
                    dstArray->contents, dstPos * width,
                    srcArray->contents, srcPos * width,
                    copyCount, length);
                move32((u1*)dstArray->contents + dstPos * width,
                    (const u1*)srcArray->contents + srcPos * width,
                    copyCount * width);
                dvmWriteBarrierArray(dstArray, 0, copyCount);
                if (copyCount != length) {
                    dvmThrowArrayStoreExceptionIncompatibleArrayElement(srcPos + copyCount,
                            srcObj[copyCount]->clazz, dstClass);
                    RETURN_VOID();
                }
            }
        }
        RETURN_VOID();
    } 
```

# sql - 使用like搜索多个字段，没有任何参数顺序

> ID：10416261
> 
> 赞同：1
> 
> 时间：2012-05-02T14:53:25.317
> 
> 标签：sql, ruby-on-rails, autocomplete

我的控制器中有以下内容：

```
def autocomplete
  spots = Spot.where("name LIKE ?", "%#{params[:term]}%")
  render :json => spots.map(&:name)
end 
```

这是我的看法：

```
<%= label_tag :term, "Term" %> <%= search_field_tag :term %>
...
$("input#term").autocomplete({
  source: '<%= autocomplete_places_path %>',
  minLength: 2,
  delay: 500
}); 
```

假设我有这组记录：

```
| id |   name   |     address     |
|  1 |  Stall A |   Fruity Road   |
|  2 |  Stall B |  Chinky Street  |
|  3 | Restroom |  White Garden   | 
```

当我搜索`stall`时，记录`1`并`2`显示。

我想要实现的是，当我搜索时`stall fru`，只会`1`显示记录。目前，如果我搜索此术语，则不会显示任何记录。

我知道我必须重写查询，但我该怎么做呢？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:45:41.827

您尝试在新解决方案中实施的内容称为“全文搜索”。

有许多宝石可以帮助您实现这一目标，但它们目前超出了此答案的范围。这个 S/O 问题链接到可以完成这项工作的大量 gem：[Full Text Searching with Rails](https://stackoverflow.com/questions/1132284/full-text-searching-with-rails)

或者，我建议使用谷歌搜索“rails gems full text search”——你会得到很多不同的结果。

评论中提到的“将两列挤在一起”的方法既快捷又简单，适用于上面提到的两个例子，例如“stall fru”和“fruity”，但如果你尝试“fruity stall”，可能找不到任何东西”。这对你来说可能会也可能不会。

根据您使用的数据库，可能还有一种在您的数据库上执行此操作的本机方式。要了解更多信息，使用的谷歌搜索将是“全文搜索”

# hibernate - 带有额外列的多对多休眠映射？

> ID：10416263
> 
> 赞同：2
> 
> 时间：2012-05-02T14:53:43.563
> 
> 标签：hibernate, hibernate-mapping

嗨，我在连接表中有多对多的映射和额外的列。表结构看起来像这样。

```
table vendor{vendor_id, vendor_name, vendor_password, etc...}
table student{student_id, student_name, student_password, etc..}
table test{test_id, test_subject, test_price,test_level, etc..} 
```

关系如下

```
vendor to test --> many-to-many
student to test --> many-to-many 
```

关联

```
table vendor_student_test{vendor_id, student_id, test_id, purchasedDate, assignedDate, writtenDate, result} 
```

我创建了 POJO 类如下

1.  供应商.java

> ```
> public class Vendor {
> Long vendorId;
> Set<VendorStudentTest> tests;
> //set and get
> } 
> ```

1.  学生.java

> ```
> public class Student{
> Long studentId;
> Set<VendorStudentTest> tests;
> //set and get
> } 
> ```

1.  测试.java

> ```
> public class Test{
> Long test_id;
> double test_price;
> //set and get and remaining fields
> } 
> ```

1.  VendorStudentTest.java

> ```
> public class VendorStudentTest{
> public VendorStudentTestPK vendorStudentTestPK;
> Date purchasedDate;
> Date assignDate;
> Date writtenDate;
> double result;
> //set and get accordingly
> } 
> ```

1.  VendorStudentTestPK.java

> ```
> public class VendorStudentTestPK{
> Long vendor_id;
> Long student_id;
> Long test_id;
> } 
> ```

Hibernate映射文件如下

供应商.hbm.xml

```
<set name="tests" table="vendor_student_test"
                inverse="true" lazy="true" fetch="select">
            <key>
                <column name="vendor_id" not-null="true" />
            </key>
            <one-to-many class="VendorStudentTest" />
        </set> 
```

vendor_student_test.hbm.xml

```
 <composite-id name="vendorStudentTestPK"
        class="com.onlineexam.model.VendorStudentTestPK">

        <key-property name="vendor" column="vendor_id"
            type="java.lang.Long" />
        <key-property name="student" column="student_id"
            type="java.lang.Long" />
        <key-property name="test" column="test_id" type="java.lang.Long" />

    </composite-id> 
```

学生.hbm.xml

```
<set name="tests" table="vendor_student_test"
                inverse="true" lazy="true" fetch="select">
            <key>
                <column name="student_id" not-null="true" />
            </key>
            <one-to-many class="VendorStudentTest" />
        </set> 
```

测试.hbm.xml

```
//this is mapped to other table 
```

我是休眠新手，这是正确的映射吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:58:30.227

可以在这里找到带有注释案例的解决方案

[如何为连接表中的其他属性创建多对多 Hibernate 映射？](https://stackoverflow.com/questions/10294338/many-to-many-hibernate-mapping-for-additional-property-in-the-join-table/10301484#10301484)

使用 xml 文件的解决方案可以在这里找到： [映射相同的类关系](https://stackoverflow.com/questions/3813941/mapping-same-class-relation)

和这里：

[映射相同的类关系 - 继续](https://stackoverflow.com/questions/3845772/mapping-same-class-relation-continuation)

# ruby-on-rails - 使用 GET 插入 html 时如何捕获会话超时？

> ID：10416265
> 
> 赞同：0
> 
> 时间：2012-05-02T14:53:45.293
> 
> 标签：ruby-on-rails, ajax, jquery

我有一个使用大量 Ajax GET 调用的 JRuby on Rails 应用程序。结果被插入到 HTML 页面中。如果会话超时，生成的 html 就是登录页面。这个登录页面然后被插入到当前的 HTML 页面中。相反，应该重定向到登录页面......

这个问题一般是怎么解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:00:20.107

您无法捕获 302，因为浏览器对您隐藏了它 - 您的 ajax 请求只会看到最终请求。

当这是一个问题时，我通常会更改我的登录代码，以便如果未登录用户尝试访问受限页面，并且请求是 ajax 请求，我会呈现特殊状态代码（通常是 4xx 代码）。在您的 ajax 请求处理程序中检查该状态代码（取决于 jour ajax 库，您通常可以设置一个全局处理程序），如果您看到它，将用户重定向到登录页面。

# sql - 如何将日期（月/年）与另一个日期（月/年）进行比较

> ID：10416266
> 
> 赞同：2
> 
> 时间：2012-05-02T14:53:45.357
> 
> 标签：sql, datetime, informix

如何在 Informix DBMS 中比较部分日期：

我编写了以下查询，但出现语法错误：

```
select id,name from h_history 
 where ( h_date::DATETIME YEAR TO MONTH >= 2/2012 )
   and ( h_date::DATETIME YEAR TO MONTH <= 1/2013 ) 
```

我想与年份和月份进行比较

这该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:14:51.597

如果要使用 DATETIME 路由，则需要正确格式化值。事实上，你已经写了：

```
select id,name from h_history 
 where ( h_date::DATETIME YEAR TO MONTH >= 2/2012 )
   and ( h_date::DATETIME YEAR TO MONTH <= 1/2013 ) 
```

这`2/2012`是一个等于 0 的整数除法，并且没有从整数到日期时间的隐式转换，反之亦然。

你可以写：

```
-- Query 1
SELECT id, name
  FROM h_history 
 WHERE (h_date::DATETIME YEAR TO MONTH >= DATETIME(2012-02) YEAR TO MONTH)
   AND (h_date::DATETIME YEAR TO MONTH <= DATETIME(2013-01) YEAR TO MONTH) 
```

这是冗长但准确的。您可以使用捷径：

```
-- Query 2
SELECT id, name
  FROM h_history 
 WHERE (h_date::DATETIME YEAR TO MONTH >= '2012-02')
   AND (h_date::DATETIME YEAR TO MONTH <= '2013-01') 
```

但是，由于`h_date`是 DATE 而不是 DATETIME X TO Y 类型，因此还有其他可用选项。YEAR、MONTH、DAY 函数从 DATE 中提取明显的部分（并且，如果将 DATETIME 传递给函数，则 DATETIME 将被强制转换为 DATE，然后进行处理）。唯一完全独立于语言环境的 DATE 构造函数是 MDY 函数，它接受 3 个参数，即月、日和年。所有字符串表示都受语言环境的解释，因此不会一直在任何地方工作。

你也可以这样做：

```
-- Query 3
SELECT id, name
  FROM h_history 
 WHERE (h_date >= MDY(2,  1, 2012))
   AND (h_date <= MDY(1, 31, 2013)) 
```

或者：

```
-- Query 4
SELECT id, name
  FROM h_history 
 WHERE ((YEAR(h_date) = 2012 AND MONTH(h_date) >= 2) OR YEAR(h_date) >= 2013)
   AND ((YEAR(h_date) = 2013 AND MONTH(h_date) <= 1) OR YEAR(h_date) <  2013) 
```

或者：

```
-- Query 5
SELECT id, name
  FROM h_history 
 WHERE (YEAR(h_date) * 100 + MONTH(h_date)) >= 201202
   AND (YEAR(h_date) * 100 + MONTH(h_date)) <= 201301 
```

* * *

如果可以选择，我可能会使用查询 2 简洁但准确，或者可能使用查询 5，但所有查询 1-5 都是可用的。

如果`h_date`是某个 DATETIME 类型的列，并且您需要比较 DATETIME 的各个部分，则可以使用强制转换（如查询 1 中所示）或 EXTEND 函数。这往往是冗长的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:11:03.087

尝试以下

```
SELECT
  id,name 
FROM h_history 
WHERE
  h_date >= MDY(2, 1, 2012)
  AND h_date < MDY(2, 1, 2013) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:35:43.883

假设这`h_date`是一个正确的日期字段，为什么不

```
SELECT 
      id
    , name
FROM h_history 
WHERE h_date >= '02/01/2012' and h_date <= '01/31/2013' 
```

为你工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T16:29:10.580

```
select * from table t where MONTH(t.date) = 12 
```

# c - glibc的结构？

> ID：10416271
> 
> 赞同：4
> 
> 时间：2012-05-02T14:54:03.383
> 
> 标签：c, linux, gcc, x86

由于 glibc 在你用 gcc 编译程序时会自动链接，所以包括我在内的很多人都不太了解它。所以我的问题是，glibc 是由什么组成的。glibc 相关的对象、共享对象文件有哪些？它们放置在哪个目录中。其次，默认情况下，gcc 是只使用 glibc 的共享目标文件还是也需要目标文件？glibc 的哪些共享对象是由 gcc 自动链接的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:59:09.377

[glibc](http://www.gnu.org/software/libc/documentation.html)是标准 C 库的 GNU 实现，具有超出标准的额外功能。

[该手册](http://www.gnu.org/software/libc/manual/html_mono/libc.html)准确地告诉您它的组成以及如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:02:22.603

> 所以我的问题是，glibc 是由什么组成的

[GNU C 库功能](http://en.wikipedia.org/wiki/GNU_C_Library#Functionality)

> glibc 相关的对象、共享对象文件有哪些？

你的意思是哪些链接到glibc？或者哪个 glibc 链接到？前者是使用它提供的C库函数的一切（不一定是gcc生成的程序），而后者是内核库。

> 它们放在哪个目录中

AFAIK 它取决于发行版，可能是 /usr/local/glibc、/usr/lib/glibc 等。

> 其次，默认情况下，gcc 是只使用 glibc 的共享目标文件还是也需要目标文件？

只有 glibc 共享对象，但是有一些对象文件包含所有 gcc 生成的程序的启动代码，这些程序由 gcc 自动链接（当你告诉它链接时）。

# php - Opencart如何测试是否安装了vqmod？

> ID：10416274
> 
> 赞同：7
> 
> 时间：2012-05-02T14:54:05.237
> 
> 标签：php, xml, opencart, vqmod

我已经为 opencart 编写了一个使用 vqmod 的模块。如何检查是否从管理模块中安装了 vqmod？

我想在模块内显示一条警告，检查是否安装了 vqmod？更好的是检查它是否也具有正确的写入权限来生成缓存文件并写入 vamod.log

这样做的最佳方法是什么？

PS：如果你可以用 vqmod 标记问题，那就太酷了。我没有足够的声誉来创建新标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-04T19:07:57.627

```
/vqmod/install 
```

如果已安装，它将告诉您“vqmod 已安装”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:24:28.510

要通过代码检查，您需要执行

```
global $vqmod;
if(!empty($vqmod) && is_a($vqmod, 'VQMod')) {
    // INSTALLED
} else {
    //
} 
```

虽然@NADH 是正确的，但它只检查 vqmod 的类是否已包含在内，而不是它是否已设置为`$vqmod`变量

### 编辑

从 2.4.0 开始，这将不再有效，建议使用 NADH 的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T16:19:44.270

```
<?php
    if(class_exists('VQMod')) {
         // vqmod exists
    }
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T16:46:30.653

根据您@John 的评论，由于您正在寻找确认 VQmod 已安装**并**正确执行，因此最安全的做法是检查您希望出现在 vqmod/cache 目录中的文件名。如果您自己创建了 vqmod/xml 定义文件，您将知道文件名。

您还可以像@NADH 建议的那样检查现有的 VQMod 类，但这并不意味着它工作正常。有点像编写单元测试，总是断言所需的输出。在这种情况下，它是您正在创建的缓存文件。

# ajax - 使用 Ajax 将数据附加到 PrimeFaces 的 dataTable

> ID：10416280
> 
> 赞同：1
> 
> 时间：2012-05-02T14:54:27.483
> 
> 标签：ajax, jsf, datatable, primefaces, lazy-loading

我正在尝试在 PrimeFaces 的 DataTable 中使用另一种分页方式。

我想要做的是“垂直”显示新页面，因此必须将新加载的数据附加到上一个 DataTable 的末尾。

类似于 Facebook 的主页流，其中单击“加载旧帖子”将使它们出现在最新帖子下。

这可能吗？？

我已经尝试了几乎所有使用分页器的方法，但似乎没有办法构建“垂直”数据表。

如果不是 PrimeFaces，是否有任何组件可以满足我的需求？

加载应该是惰性的，因此，每次用户决定加载新数据时，都必须执行查询。没有清单什么的！

谢谢 ：）

编辑：

JSF 页面

```
<pou:dataTable scrollable="true" liveScroll="true" scrollHeight="400" scrollRows="100" value="#{postListBean_1.posts}" var="post">
    <pou:column>
        #{post.testo}
        <hr/>
    </pou:column>                        
</pou:dataTable> 
```

豆

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ManagedBeans;

import ejb.PostManagerLocal;
import entity.Post;
import java.io.Serializable;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

/**
 * La classe si occupa di gestire lo scambio di messaggi tra utenti. Da
 * implementare ancora i metodi per l'invio e per la segnalazione dell'avvenuta
 * lettura.
 *
 * @author stefano
 */
@ManagedBean
@RequestScoped
public class PostListBean_1 implements Serializable {

    @EJB
    private PostManagerLocal postManager;
    private List<Post> posts;
    private int limit = 0;

    /**
     * Get the value of posts
     *
     * @return the value of posts
     */
    public List<Post> getPosts() {
        limit+=4;
        makePosts();
        return posts;
    }

    /**
     * Set the value of posts
     *
     * @param posts new value of posts
     */
    public void setPosts(List<Post> posts) {
        this.posts = posts;
    }

    /**
     * Creates a new instance of PostListBean
     */
    public PostListBean_1() {
    }

    /**
     * Inizializza la lista dei posts, prendendoli in ordine inverso, in modo da
     * avere prima i più recenti
     */
    @PostConstruct
    public void makePosts() {
        int[] range = {0, limit};
        posts = postManager.findRangeReverse(range);
    }
} 
```

# sql - sas 中的等效 date_part 函数

> ID：10416282
> 
> 赞同：2
> 
> 时间：2012-05-02T14:54:36.603
> 
> 标签：sql, sas

我有一个 sql 语句来提取日期对象。它在 Postgres 中运行良好，但在 sas 中运行良好。部分查询是这样的：

```
(case when date_part('month',run_date)::integer < 10 
     THEN '0'||
          date_part('month',run_date)::varchar(1)||
          date_part('year',run_date)::varchar(4)
     else  date_part('month',run_date)::varchar(2)||date_part('year',run_date)::varchar(4)
     end) as our_date 
```

在 sas 中，没有 date_part 函数。我尝试了 datepart 功能。但它没有执行相同的功能。我怎样才能让那个 sql 语句在 sas 中运行？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T16:03:20.580

[日期部分](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000245883.htm)

```
data have;
 timestamp='01JAN2012:08:48'dt;
run;

proc sql;
 select datepart(timestamp) format=mmddyy10., 
 timepart(timestamp) format=time.,
 month(datepart(timestamp)),
 year(datepart(timestamp))
 into :date , :time, :month, :year
 from have;
quit;

%put DATE: &date;
%put TIME: &time;
%put MONTH: &month;
%put YEAR: &year; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:59:55.413

我想你可以使用

```
MONTH(run_date) 
```

和

```
YEAR(run_date) 
```

# android - 可以在android中获得每个应用程序的电池使用量吗？

> ID：10416285
> 
> 赞同：2
> 
> 时间：2012-05-02T14:54:57.863
> 
> 标签：android, statistics, power-management

如何从 android api 获取每个应用程序的电池使用率？我查看了 SO 和 google 并没有找到答案。

# bash - 如何理解 - 和 := 在 bash 中？

> ID：10416289
> 
> 赞同：1
> 
> 时间：2012-05-02T14:55:18.590
> 
> 标签：bash

```
JOBS=${JOBS:="-j2"}

dir=${1-/usr/src} 
```

`:=`这里是什么`-`意思？

我猜它们是某种默认值，那有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T18:26:39.417

对于`:=`（和相关的`=`），您可以使用内置的 ':' 命令来评估参数而无需将其分配给自身：

```
# Set JOBS=-j2 if JOBS is not set or equal to ""
: ${JOBS:='-j2'}

# Set JOBS=-j2 if JOBS is not set. Don't change if JOBS is already set to ""
: ${JOBS='-j2'} 
```

对于`:-`and `-`，不要改变变量的值；只需在其位置使用第二个值：

```
# Set dir to /usr/src if $1 is not set, but don't set $1 itself
dir=${1-/usr/src}

# Set dir to /usr/src if $1 is not set or set to "", but don't set or change $1
dir=${1:-/usr/src} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:04:10.393

`man bash`（该`Parameter Expansion`部分）将回答这些问题和相关问题。

摘抄：

```
 ${parameter:-word}
          Use Default Values.  If parameter is unset or null, the expansion of word is substituted.  Otherwise, the value of parame‐
          ter is substituted.
   ${parameter:=word}
          Assign  Default  Values.   If  parameter  is  unset or null, the expansion of word is assigned to parameter.  The value of
          parameter is then substituted.  Positional parameters and special parameters may not be assigned to in this way.
   ${parameter:?word}
          Display Error if Null or Unset.  If parameter is null or unset, the expansion of word (or a message to that effect if word
          is  not present) is written to the standard error and the shell, if it is not interactive, exits.  Otherwise, the value of
          parameter is substituted.
   ${parameter:+word}
          Use Alternate Value.  If parameter is null or unset, nothing is substituted, otherwise the expansion of  word  is  substi‐
          tuted. 
```

# c - C-程序：使用链表数组的哈希表内存溢出

> ID：10416297
> 
> 赞同：-2
> 
> 时间：2012-05-02T14:55:48.120
> 
> 标签：c, linked-list, hashtable

系统有 16GB RAM。我们用于存储在哈希表链表中的节点结构大小为 38 字节。这表明我们可以在哈希表中存储多达 4.52 亿个节点。但只有在 1300 万个节点（大约）之后才会发生内存溢出。

相关的代码段是这样的：

```
for (i=0;i<NO_OF_BUCKETS;i++)
  {  
    nextptr = hashtable[i];
    while (nextptr != NULL)
      {
        prevptr = nextptr;
        nextptr = nextptr->next;
        free(prevptr);
      }
    hashtable[i] = NULL;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:15:10.773

```
System has 16GB RAM. Our node structure for storing in the linked list of the hash table has a size of 38bytes. This tells that we can store up to 452million nodes in the hash table. 
```

现在这是一个错误的假设。您认为所有的 RAM 都会保留给应用程序中的数据吗？一点也不。有操作系统、其他用户态应用程序等也需要内存，你甚至无法准确说出它们需要多少内存。所以不要指望你可以计算出你的链表实现中的元素数量。

# java - 重绘前不清除面板

> ID：10416307
> 
> 赞同：0
> 
> 时间：2012-05-02T14:56:26.290
> 
> 标签：java, swing, jpanel

我有一个JPanel，上面画了一个三角形。当有人单击按钮时，应使用新参数重新绘制三角形。问题是旧三角形仍然存在，而新三角形与下面的部分文本字段弄乱了。

```
public class Vermessung {   

private static void eingabe(){
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setSize(screen.height/2, screen.height/4*3);
    JPanel jp = new JPanel();
    jp.setLayout(new BoxLayout(jp, BoxLayout.PAGE_AXIS));

    //Eingabebereich
    JPanel eingabebereich = new JPanel(new GridLayout(3, 1));
    JPanel abc = new JPanel(new GridLayout(4, 2));
    abc.add(new JLabel("Strecke"));
    abc.add(new JLabel("Gemessener Wert in [m]"));
    abc.add(new JLabel("a:"));
    abc.add(tfa);
    abc.add(new JLabel("b:"));
    abc.add(tfb);
    abc.add(new JLabel("c:"));
    abc.add(tfc);

    //AusgabeBereich
    JPanel ausgabe = new JPanel(new GridLayout(2, 3));
    ausgabe.add(new JLabel("p [m]"));
    ausgabe.add(new JLabel("q [m]"));
    ausgabe.add(new JLabel("h [m]"));
    ausgabe.add(P);
    ausgabe.add(Q);
    ausgabe.add(H);
    P.setEditable(false);
    Q.setEditable(false);
    H.setEditable(false);

    //Buttons mit Listenern
    JPanel buttons = new JPanel(new FlowLayout());
    JButton ok = new JButton("OK"); 
    JButton cancel = new JButton("beenden");

    ActionListener al = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {

            //Textfelder auslesen
            TextfelderAuslesen();

            //bei gueltiger Eingabe Höhe Berechnen
            if(berechenbar){
                berechnungPQ();
                berechnungH();
                P.setText(String.valueOf(p));
                Q.setText(String.valueOf(q));
                H.setText(String.valueOf(h));
                sketch.update(vec);
sketch.repaint();
            }else{

            }

        }
    };
    ok.addActionListener(al);

    ActionListener beenden = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            System.exit(0);

        }
    };
    cancel.addActionListener(beenden);

    buttons.add(ok);
    buttons.add(cancel);

    //Fensteraufbau
    sketch.setPreferredSize(new Dimension(screen.height/2, screen.height/2));
    jp.add(sketch);
    eingabebereich.add(abc);
    eingabebereich.add(ausgabe);
    eingabebereich.add(buttons);
    eingabebereich.setPreferredSize(new Dimension(screen.height/4, screen.height/4));
    jp.add(eingabebereich);
    f.add(jp);
    f.setVisible(true);
}

}

public class Zeichnung extends JPanel{

public void paint(Graphics g){
    zeichneDreieck(g);
}

private void zeichneDreieck(Graphics g){
    berechneLaengen();
    g.setColor(new Color(255,0,0));
    g.drawLine(30, 30, ca, 30);
    g.drawString("c", ca/2, 20);
    g.drawLine(ca, 30, qa, ha);
    g.drawString("a", (ca-pa/2), ha/2);
    g.drawLine(qa, ha, 30, 30);
    g.drawString("b", (qa/2), ha/2);
    g.setColor(new Color(0,0,0));
    g.drawLine(qa, ha, qa, 30);
    g.drawString("h", qa+5, ha/2);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:59:26.570

```
public void paintComponent(Graphics g){
    super.paintComponent(g);
    zeichneDreieck(g);
} 
```

对于，改为`JPanel`覆盖。`paintComponent()`作为第一行，调用`super`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:59:29.203

称呼

```
yourFrame.invalidate();
yourFrame.validate();
yourFrame.repaint(); 
```

[在此处](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#invalidate%28%29)查看有关`invalidate()`和的更多信息。`validate()`

根据文档：*validate**方法**用于使容器再次布置其子组件。在容器显示后修改此容器的子组件（添加到容器或从容器中删除，或更改布局相关信息）时，应调用它。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:02:33.347

`clear(Graphics g)`在您的类中创建一个新方法，`Zeichnung`并通过将主体添加为以下内容来清除其中的所有行：

```
super.paintComponent(g);
this.removeAll(); 
this.updateUI(); 
```

`zeichneDreieck`在第一行的方法中调用此方法。

# objective-c - 如何使用 Google Maps API 搜索地点和邮政编码？

> ID：10416310
> 
> 赞同：1
> 
> 时间：2012-05-02T14:56:41.030
> 
> 标签：objective-c, ios, google-maps, google-places-api, google-geocoding-api

我一直在使用 Google Maps Places API 为 iPhone 搜索地图，就像在 Maps 应用程序本身中一样。我使用这样的一行：

```
https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&rankby=distance&name=%@&sensor=true&key=%@ 
```

使用 NSString 输入缺失的信息。但是，与地图应用程序不同的是，此搜索仅适用于本地地点，不适用于邮政编码或其他信息。看来，如果我希望它接受邮政编码，我必须创建一个地理编码请求：

```
https://maps.googleapis.com/maps/api/geocode/json?address=W1A+1AA&sensor=true 
```

但是当然，这不会搜索地点信息。与地图应用程序一样，我希望我的应用程序能够无缝返回两者的最佳结果。

在我继续编写代码以便它使用两个单独的 API 之前，有没有更好的方法来做到这一点？我是否应该使用更类似于地图应用中的搜索的其他 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:08:41.480

我已经对此进行了调查，例如针对不想使用定位服务的人的邮政编码调查特定服务，比如说寿司。不幸的是，您似乎必须打两个电话，一个用于地理编码，另一个通过 Google Places 来获取在地理编码调用中给出的坐标半径内的位置。

请参阅： [使用谷歌地图查找给定邮政编码的所有公园](https://stackoverflow.com/questions/5753122/find-all-parks-for-a-given-zipcode-with-google-maps)

和

[https://groups.google.com/forum/?fromgroups#!msg/google-places-api/P3iDK5kO7OM/Cek4BzeXMA4J](https://groups.google.com/forum/?fromgroups#!msg/google-places-api/P3iDK5kO7OM/Cek4BzeXMA4J)

# vb.net - 我的 StreamReader ReadLine 正在读取每隔一行

> ID：10416315
> 
> 赞同：0
> 
> 时间：2012-05-02T14:56:48.443
> 
> 标签：vb.net

我正在遍历一个文本文件并读取然后解析每一行..然后，插入到 sql server 中。问题是，我每隔一条线。有什么想法吗？

我在这里阅读了另一篇类似的帖子，上面说那个人两次调用 ReadLine ......这是有道理的。我只是无法发现它发生在哪里。

```
Private Sub btnUpdateRSR_Click(sender As System.Object, e As System.EventArgs) Handles btnUpdateRSR.Click

        ' Get RSR File
        lblStatus.Text = "Getting RSR File"
        Application.DoEvents()

        If chkDLRSR.Checked = True Then
            ftpGetRSR()
        End If

        Application.DoEvents()
        lblStatus.Text = "Got RSR File"

        ' Whack existing data

        killRSRData()

        ' Run Update of Invnetory

        Dim sCmd As New SqlCommand()
        Dim fp As StreamReader
        Dim MyFile As String = String.Empty
        Dim dblRecordCount As Double

        Try
            'Open file with StreamReader
            fp = File.OpenText("c:\ct_info\rsr.txt")
        Catch err As Exception
            lblStatus.Text = "File Read Failed! Reason: " & err.ToString()
        End Try
        sCmd.Connection = New System.Data.SqlClient.SqlConnection("Data Source=vortx-sql01.vortx.com;Initial Catalog=expresspolicesupply;Persist Security Info=True;User ID=expresspolicesupply;Password=blahblah")
        sCmd.Connection.Open()
        Dim strArr() As String

        While String.IsNullOrEmpty(fp.ReadLine) = False ' fp.ReadLine.IsNullOrEmpty = False
            MyFile = fp.ReadLine

            strArr = MyFile.Split(";")
            'Show what is in the second position of the array.
            'MessageBox.Show(strArr(1))
            Try
                Dim RSRstocknumber As String = strArr(0)
                Dim UPCcode As String = strArr(1)
                Dim ProductDescription As String = Replace(strArr(2), "'", """")
                Dim DepartmentNumber As String = strArr(3)
                Dim ManufacturerID As String = strArr(4)
                Dim RetailPrice As String = strArr(5)
                Dim RSRRegularPrice As String = strArr(6)
                Dim Weight As String = strArr(7)
                Dim InventoryQuantity As String = strArr(8)
                Dim Model As String = Replace(strArr(9), "'", """")
                Dim FullManufacturerName As String = Replace(strArr(10), "'", """")
                Dim ManufacturerPartNo As String = strArr(11)
                Dim AllocatedCloseoutDeleted As String = strArr(12)
                Dim ExpandedProductDescription As String = Replace(strArr(13), "'", """")
                Dim ImageName As String = strArr(14)

                lblStatusPrevious.Text = "Previous one: " & lblStatus.Text
                lblStatus.Text = strArr(0)
                Application.DoEvents()

                With sCmd
                    .CommandText = "INSERT into rsr (rsrstocknumber, upccode, productDescription, departmentnumber, ManufacturerID, RetailPrice, RSRRegularPrice, Weight, InventoryQuantity, Model, FullManufacturerName, ManufacturerPartNo, AllocatedCloseoutDeleted, ExpandedProductDescription, ImageName) " & _
                        " Values('" & RSRstocknumber & "', '" & UPCcode & "', '" & ProductDescription & "', '" & DepartmentNumber & "', '" & ManufacturerID & "', '" & _
                RetailPrice & "', '" & RSRRegularPrice & "', '" & Weight & "', '" & InventoryQuantity & "', '" & Model & "', '" & FullManufacturerName & "', '" & ManufacturerPartNo & "', '" & _
                AllocatedCloseoutDeleted & "', '" & ExpandedProductDescription & "','" & ImageName & "');"
                    'MessageBox.Show(sCmd.CommandText.ToString)
                    .CommandType = CommandType.Text
                    .ExecuteNonQuery()

                    ' Update record counter

                    dblRecordCount = dblRecordCount + 1
                    lblRecordCount.Text = dblRecordCount
                    Application.DoEvents()

                End With
            Catch ex As Exception
                lblErrorLabel.Text = "Error on thown on " & lblRecordCount.Text
                'MessageBox.Show("Error occurred! Details: " & ex.Message)
            End Try
        End While
        fp.Close()          'Close file with StreamReader
        sCmd.Connection.Close()

        lblStatus.Text = "Updating website for RSR"
        lblStatusPrevious.Text = ""

        spUpdateRSR()

        lblStatus.Text = "Done"
        lblStatusPrevious.Text = ""

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:59:16.700

那是因为你打`ReadLine()`了两次电话。

每隔一行都会被`String.IsNullOrEmpty(fp.ReadLine) = False`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:59:47.637

您正在调用 ReadLine 两次。

```
 While String.IsNullOrEmpty(fp.ReadLine) = False ' fp.ReadLine.IsNullOrEmpty = False
        MyFile = fp.ReadLine 
```

一次`IsNullOrEmpty`检查一次`MyFile = fp.ReadLine`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:00:00.093

这一行正在读取文件，然后在 while 循环中读取下一行：

```
While String.IsNullOrEmpty(fp.ReadLine) = False 
```

你叫它两次:)

您需要使用它来检查它是否是文件的结尾：

```
While fp.EndOfStream = False 
```

# php - 带有php源和json问题的jquery自动完成

> ID：10416321
> 
> 赞同：1
> 
> 时间：2012-05-02T14:57:19.650
> 
> 标签：php, jquery, json

我想创建jquery自动完成和php，问题是自动完成的每条记录中显示的数据有两个值，我设法这样做（没有PHP），

```
$(function() {
        var authors = [
            {
                label: "jQuery",
                desc: "the write less, do more, JavaScript library"
            },
            {
                label: "jQuery UI",
                desc: "the official user interface library for jQuery"
            },
            {
                label: "Sizzle JS",
                desc: "a pure-JavaScript CSS selector engine"
            }
        ];

    $( "#authorname" ).autocomplete({
        minLength: 0,
        source: authors,
        focus: function( event, ui ) {
            $( "#authorname" ).val( ui.item.label );
            return false;
        },
        select: function( event, ui ) {
            $( "#authorname" ).val( ui.item.label );
            return false;
        }
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
            .appendTo( ul );
    };
}); 
```

现在我想将源代码更改为 php 页面（将作者更改为“getauthors.php”）

我不知道在“getauthors.php”中放什么，以便为标签和 desc 传递两件事。

我设法使用json传递了这样的一件事，

```
<?php
$json = array();
$json[]="test";
$json[]="test2";
$json[]="test3";

echo json_encode($json);
?> 
```

像这样输出，

![自动完成](../Images/e1e46624ca0afb47922472b4e4ec71ad.png)

您可以看到第二件事始终未定义，我如何使用 json（或任何其他方式）在 php 中将值传递给它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:02:58.240

```
<?php
$json = array();
$json[] = array ("label"=>"test", "desc"=>"description");
...

echo json_encode($json);
?> 
```

# c# - 如何使用相同的 linq 语句并行遍历 2 个向量

> ID：10416324
> 
> 赞同：3
> 
> 时间：2012-05-02T14:57:47.400
> 
> 标签：c#, linq

我有两个具有相同长度的双值列表。

是否可以使用 select 语句遍历两个列表并返回同一位置的元素之间差异的平均值？

例子 ： `{1 2 3 4}`

`{1 1 1 1}`

我想回来`( (1 - 1) + (2 - 1) + (3 - 1) + (4 - 1) ) / 4 = 6 / 4 = 1.5`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:03:39.747

尝试

```
listA.Zip(listB, (a, b) => a - b).Average(); 
```

如果没有 .NET 4.0 和 Zip，请尝试

```
listA.Select((n, index) => n - listB[index]).Average() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T15:04:00.577

```
List<int> list1 = new List<int> { 1, 2, 3, 4 };
List<int> list2 = new List<int> { 1, 1, 1, 1 };

double result = list1.Zip(list2, (a, b) => a - b).Average(); 
```

当我运行它时，结果为 1.5。

* * *

仅仅因为我喜欢它并且它出现在其他评论之一中，这是我`Zip`可以在 C# 3.5 上运行的实现。

```
public static IEnumerable<T> Zip<T>(this IEnumerable<T> first
    , IEnumerable<T> second, Func<T, T, T> resultSelector)
{
    if (first == null)
        throw new ArgumentNullException("first");
    if (second == null)
        throw new ArgumentNullException("second");
    if (resultSelector == null)
        throw new ArgumentNullException("resultSelector");

    return ZipImpl(first, second, resultSelector);
}

public static IEnumerable<T> ZipImpl<T>(IEnumerable<T> first
    , IEnumerable<T> second, Func<T, T, T> resultSelector)
{
    IEnumerator<T> firstIterator = first.GetEnumerator();
    IEnumerator<T> secondIterator = second.GetEnumerator();
    while (firstIterator.MoveNext() && secondIterator.MoveNext())
    {
        yield return resultSelector(firstIterator.Current, secondIterator.Current);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:10:47.580

我不知道您是否对技术（Zip 方法）或结果感兴趣，但您将从以下代码中得到相同的结果：

```
var arr1 = new[] {1, 2, 3, 4};
var arr2 = new[] {1, 1, 1, 1};
var res = (arr1.Sum() - arr2.Sum())/(double) arr1.Length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:10:04.170

使用`Enumerable.Range`生成索引就可以了（如果你没有 .NET 4.0's `Zip`）

```
var l1 = new List<int> { 1, 2, 3, 4 };
var l2 = new List<int> { 1, 1, 1, 1 };
double result = Enumerable.Range(0, l1.Count)
    .Select(i => l1[i] - l2[i])
    .Average(); 
```

# c++ - 对“png_read_info”的未定义引用

> ID：10416327
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:58:00.073
> 
> 标签：c++, png, libpng

我`m trying to compile source code, but receive: undefined reference to`png_read_info' 文件头：#include "PngImage.hh"

```
#include <png.h>

#include <cstdio>
#include <csetjmp>
#include <cstring> 
```

我的编译器设置： -I/usr/include/libxml2 -I/usr/include/osmpbf -O0 -g3 -Wall -c -fmessage-length=0 -lpng

我做错了什么？

更新：我正在尝试链接：-I/usr/include/libxml2 -I/usr/include/osmpbf -O0 -g3 -Wall -c -fmessage-length=0 -L/usr/include/libpng -lpng

库 libpng 已安装。我再次收到没有任何变化：未定义的对 png_read_info 的引用

固定的。我的大错。我在 Eclipse 中设置编译器设置而不是链接器设置。谢谢大家的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:05:19.663

您没有链接到`libpng`. 添加`-L/path/to/dir_containing/libpng -lpng`到您的链接步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:41:00.077

当编译器找不到指向对象的链接时，您会遇到“未定义的引用”问题，因此您错过了包含或设置库路径，因此请尝试 greg 所说的并检查您是否错过了一些包含

# c++ - 关于ipp镜像构建

> ID：10416328
> 
> 赞同：4
> 
> 时间：2012-05-02T14:58:01.793
> 
> 标签：c++, image, intel-ipp

我有一个图像存储在指向 char 的指针中，我想在它上面使用 ipp 函数。如何从这个指向 char 的指针在 ipp 中构建 Ipp8u* 图像？这是一个繁重的计算（建筑）吗？我可以做简单的铸造吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:33:20.890

是的，您需要做的就是转换指针：

```
Ipp8u *ipp_data = static_cast<Ipp8u*>(your_data); 
```

或者，如果您出于某种原因更喜欢 C 风格的演员表：

```
Ipp8u *ipp_data = (Ipp8u *)your_data; 
```

如[Intel 文档](https://software.intel.com/en-us/node/501992)中所述，`Ipp8u`它等同于 C 语言`unsigned char`——至少在`CHAR_BIT == 8`. 这不是必需的，但我相信[Intel-IPP 支持的大多数（如果不是全部）编译器/平台](http://software.intel.com/en-us/articles/intel-ipp-70-library-system-requirements/)都是这种情况。

# visual-studio-2010 - 为什么这个 Visual Studio 构建后事件没有触发？

> ID：10416337
> 
> 赞同：8
> 
> 时间：2012-05-02T14:58:39.783
> 
> 标签：visual-studio-2010

我正在尝试将我的所有输出文件从解决方案目标目录复制到共享 bin 文件夹，但由于某种原因，这些文件没有被复制。出于某种原因，看起来非常简单的构建后命令对我不起作用。

```
xcopy "$(TargetDir).*" "$(SolutionDir)..\..\..\bin" /Y/I 
```

这是我的目录树：

```
- Development
      - bin
      - Clients
          - Interface
              - Services
                  - bin
                      - Debug
                      - Release
              - Host
                  - bin 
```

在任何成功构建之后，我需要将输出从 Services -> bin -> Debug 或 Release 文件夹复制到 Development -> bin 文件夹。我尝试了各种“..\”组合，但似乎都没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T16:28:32.890

当我需要对构建后的事件进行故障排除时，我会添加一个 ECHO ON，并且通常会执行一个 DIR，这样我就可以看到我所在的目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-10T17:15:12.910

这些建议对我没有帮助。我正在使用 Microsoft Visual Studio Professional 2017 (VisualStudio/15.0.0-RTW+2622.4)。

无论我在构建后事件中输入什么命令，它们都被忽略了。当我关闭 Visual Studio 会话时，系统提示我保存我的解决方案文件，并接受此操作。

当我再次打开 Visual Studio 时，我的 Post-Build Event 命令消失了。当我重新输入他们工作的命令时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-23T06:05:48.910

就我而言，只是因为有人不小心将 PostBuildEventUseInBuild 节点设置为“假”。

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <PostBuildEventUseInBuild>false</PostBuildEventUseInBuild>
  </PropertyGroup> 
```

# iphone - 在 iOS 上通过本机 Facebook 应用打开 Facebook 链接

> ID：10416338
> 
> 赞同：65
> 
> 时间：2012-05-02T14:58:45.950
> 
> 标签：iphone, ios, xcode, facebook

如果 iPhone 上安装了原生 Facebook 应用程序。如何从我的应用程序中打开进入本机 Facebook 应用程序的 facebook 链接。Safari打开的情况下，链接同：

> [http://www.facebook.com/AlibabaUS](http://www.facebook.com/AlibabaUS)

谢谢你。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-05-02T15:02:29.753

以下是 Facebook 应用程序使用的一些方案，源链接上还有很多：

## 例子

```
NSURL *url = [NSURL URLWithString:@"fb://profile/<id>"];
[[UIApplication sharedApplication] openURL:url]; 
```

## 计划

> fb://profile – 打开 Facebook 应用到用户的个人资料
> 
> fb://friends – 打开 Facebook 应用到好友列表
> 
> fb://notifications – 打开 Facebook 应用程序到通知列表*（注意：此 URL 似乎存在错误。通知页面打开。但是，无法导航到 Facebook 应用程序中的其他任何地方）*
> 
> fb://feed – 将 Facebook 应用程序打开到新闻源
> 
> fb://events – 打开 Facebook 应用程序到事件页面
> 
> fb://requests – 打开 Facebook 应用到请求列表
> 
> fb://notes – 打开 Facebook 应用程序到 Notes 页面
> 
> fb://albums – 打开 Facebook 应用程序到相册列表

如果在打开此 url 之前您想检查用户是否使用 facebook 应用程序，您可以执行以下操作（如下面的另一个答案中所述）：

```
if ([[UIApplication sharedApplication] canOpenURL:nsurl]){
    [[UIApplication sharedApplication] openURL:nsurl];
}
else {
    //Open the url as usual
} 
```

## 来源

[http://wiki.akosma.com/IPhone_URL_Schemes#Facebook](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-20T09:53:31.287

Just use [https://graph.facebook.com/(your_username](https://graph.facebook.com/(your_username) or page name) to get your page ID and after you can see all the detain and your ID

after in your IOS app use :

```
 NSURL *url = [NSURL URLWithString:@"fb://profile/[your ID]"];
 [[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-07T09:35:19.440

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-14T01:42:32.087

I did this in MonoTouch in the following method, I'm sure a pure Obj-C based approach wouldn't be too different. I used this inside a class which had changing URLs at times which is why I just didn't put it in a if/elseif statement.

```
NSString *myUrls = @"fb://profile/100000369031300|http://www.facebook.com/ytn3rd";
NSArray *urls = [myUrls componentsSeparatedByString:@"|"];
for (NSString *url in urls){
    NSURL *nsurl = [NSURL URLWithString:url];
    if ([[UIApplication sharedApplication] canOpenURL:nsurl]){
        [[UIApplication sharedApplication] openURL:nsurl];
        break;
    }
} 
```

The break is not always called before your app changes to Safari/Facebook. I assume your program will halt there and call it when you come back to it.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-09-02T13:38:08.523

I know the question is old, but in support of the above answers i wanted to share my working code. Just add these two methods to whatever class.The code checks if facebook app is installed, if not installed the url is opened in a browser.And if any errors occur when trying to find the profileId, the page will be opened in a browser. Just pass the url(example, [http://www.facebook.com/AlibabaUS](http://www.facebook.com/AlibabaUS)) to openUrl: and it will do all the magic. Hope it helps someone!.

> NOTE: UrlUtils was the class that had the code for me, you might have to change it to something else to suite your needs.

```
+(void) openUrlInBrowser:(NSString *) url
{
    if (url.length > 0) {
        NSURL *linkUrl = [NSURL URLWithString:url];
        [[UIApplication sharedApplication] openURL:linkUrl];
    }
}
+(void) openUrl:(NSString *) urlString
{

    //check if facebook app exists
    if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"fb://"]]) {

        // Facebook app installed
        NSArray *tokens = [urlString componentsSeparatedByString:@"/"];
        NSString *profileName = [tokens lastObject];

        //call graph api
        NSURL *apiUrl = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@",profileName]];
        NSData *apiResponse = [NSData dataWithContentsOfURL:apiUrl];

        NSError *error = nil;
        NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:apiResponse options:NSJSONReadingMutableContainers error:&error];

        //check for parse error
        if (error == nil) {

            NSString *profileId = [jsonDict objectForKey:@"id"];

            if (profileId.length > 0) {//make sure id key is actually available
                NSURL *fbUrl = [NSURL URLWithString:[NSString stringWithFormat:@"fb://profile/%@",profileId]];
                [[UIApplication sharedApplication] openURL:fbUrl];
            }
            else{
                [UrlUtils openUrlInBrowser:urlString];
            }

        }
        else{//parse error occured
            [UrlUtils openUrlInBrowser:urlString];
        }

    }
    else{//facebook app not installed
        [UrlUtils openUrlInBrowser:urlString];
    }

} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-24T11:35:47.983

**swift 3**

```
if let url = URL(string: "fb://profile/<id>") {
        if #available(iOS 10, *) {
            UIApplication.shared.open(url, options: [:],completionHandler: { (success) in
                print("Open fb://profile/<id>: \(success)")
            })
        } else {
            let success = UIApplication.shared.openURL(url)
            print("Open fb://profile/<id>: \(success)")
        }
 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-20T10:23:43.840

If the Facebook application is logged in, the page will be opened when executing the following code. If the Facebook application is not logged in when executing the code, the user will then be redirected to the Facebook app to login and then after connecting the Facebook is not redirected to the page!

```
NSURL *fbNativeAppURL = [NSURL URLWithString:@"fb://page/yourPageIDHere"] [[UIApplication sharedApplication] openURL:fbNativeAppURL] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-22T01:57:16.307

Just verified this today, but if you are trying to open a Facebook **page**, you can use *"fb://page/{Page ID}"*

Page ID can be found under your page in the about section near the bottom.

Specific to my use case, in Xamarin.Forms, you can use this snippet to open in the app if available, otherwise in the browser.

`Device.OpenUri(new Uri("fb://page/{id}"));`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-06T05:33:05.803

Previous method `fb://profile/[ID]` is not working.

try `fb://profile?id=[ID]`

Example of usage:

```
// Open Profile or page
// To open in Application
if UIApplication.shared.canOpenURL(URL(string: "fb://profile?id=vikramchaudhary.ios")!) {
    UIApplication.shared.open(URL(string: "fb://profile?id=vikramchaudhary.ios")!, options: [:], completionHandler: nil)
} else {
    // To open in safari
    UIApplication.shared.open(URL(string: "https://facebook.com/vikramchaudhary.ios/")!, options: [:], completionHandler: nil)
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-02T15:04:17.987

这将在 Safari 中打开 URL：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.facebook.com/comments.php?href=http://wombeta.jiffysoftware.com/ViewWOMPrint.aspx?WPID=317"]]; 
```

对于 iphone，如果使用以 fb:// 开头的 url 安装，您可以启动 Facebook 应用程序

更多信息可以在这里找到：http: [//iphonedevtools.com/](http://iphonedevtools.com/?p=302) ?p=302也在这里：[http ://wiki.akosma.com/IPhone_URL_Schemes#Facebook](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)

从上述网站窃取：

```
fb://profile – Open Facebook app to the user’s profile
fb://friends – Open Facebook app to the friends list
fb://notifications – Open Facebook app to the notifications list (NOTE: there appears to be a bug with this URL. The Notifications page opens. However, it’s not possible to navigate to anywhere else in the Facebook app)
fb://feed – Open Facebook app to the News Feed
fb://events – Open Facebook app to the Events page
fb://requests – Open Facebook app to the Requests list
fb://notes - Open Facebook app to the Notes page
fb://albums – Open Facebook app to Photo Albums list 
```

要启动上述 URL：

```
NSURL *theURL = [NSURL URLWithString:@"fb://<insert function here>"];
[[UIApplication sharedApplication] openURL:theURL]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-29T10:57:53.497

2020 answer

Just open the url. Facebook automatically registers for deep links.

```
let url = URL(string:"https://www.facebook.com/TheGoodLordAbove")!
UIApplication.shared.open(url,completionHandler:nil) 
```

this opens in the facebook app if installed, and in your default browser otherwise

# c++ - 函数没有被执行

> ID：10416339
> 
> 赞同：3
> 
> 时间：2012-05-02T14:58:46.577
> 
> 标签：c++, linux, compiler-construction, linker

我想了解以下场景到底发生了什么。我有一个共享库（A），它通过动态加载加载另一个共享库（B）。库 A 也公开了一些方法（F1）。

主程序加载库 A，然后库 A 稍后加载库 B。现在，当库 B 尝试使用库 A 中的函数 F1 时，它无法加载其符号，并且编译会静默停止执行，而不会给出任何警告/错误或核心。即使我可以看到从库 A 中导出的这些符号（使用 nm 命令）。我不太确定到底发生了什么。我在 Linux.64 上观察到了这一点。Windows 上的相同场景工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:12:05.783

我的心理调试能力告诉我，因为您将其标记为 C++，所以您正在编译 C++ 代码。我还猜想您使用稍微不同的选项来编译库 A 和 B，导致它们的名称装饰和/或 ABI 不兼容，因此找不到方法。

您是否考虑过让链接器将所有共享对象应用到您的应用程序而不是使用`dlopen`? 然后您会立即知道存在问题，因为链接器无法匹配符号。

或者，Linux 可能只是不喜欢你的循环库引用：你能重构你的库以消除循环依赖吗？

# php - Facebook 连接很慢，我可以使用 AJAX 吗？

> ID：10416340
> 
> 赞同：3
> 
> 时间：2012-05-02T14:58:57.663
> 
> 标签：php, facebook, fbconnect

我正在实现 facebook php sdk 并将其用于用户登录/连接。一切都按预期工作，但是，在每个页面的顶部，我需要调用 $facebook->api('/me') 来确定用户是否登录..

这个调用很慢，有时需要 2 秒才能返回。

因此，用户的任何交互在任何页面加载之前总是有 1-2 秒的延迟。

我怀疑，这是因为 $facebook->api('/me') 调用正在使用 httpS ..

有什么建议么....

```
 $facebook = new Facebook(array( 'appId'  => 'xxxxxxxxxxxxxxx',  'secret' => 'xxxxxxxxxxxxxxxxx',));
          $user = $facebook->getUser();
          if ($user)
           {
           try                               {  $user_profile = $facebook->api('/me','GET'); }
           catch (FacebookApiException $e)   {  error_log($e);  $user = null;  }
           }
          $login_parms = array('scope' => 'user_birthday', 'redirect_uri' => 'http://xxx.com/login');
          $login_link  = $facebook->getLoginUrl($login_parms);

          if($user) 
           {
           /* logged in */
           }
          else
           {
           /* not */
           } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:16:18.247

您真的不应该在每个页面加载时执行 Facebook API 请求。仅在用户登录时执行一次。然后您可以将“登录”标志存储在会话中（或签名的 cookie）。

如果您需要存储一些用户的 facebook 个人资料信息，也可以将其放入会话或您的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:12:07.780

如果您不需要从 $facebook->api("/me") 获取“新鲜”值。然后我建议您缓存响应，如果您使用任何 PHP 框架（例如 Zend、Yii、Codeigniter），这应该非常简单。

如果您不使用 PHP 框架，我建议您仍然查看优秀的 ZF 文档以了解他们的缓存解决方案。

[Zend 框架 - 缓存](http://framework.zend.com/manual/en/zend.cache.html)

但是，如果您每次加载都需要新值，您可以创建一个仅返回 $facebook->api("/me") 部分并将其作为纯 HTML 返回的简单页面。然后简单地保留一个或类似的，当它完成时收到响应。一个简单的解决方案是使用 jQuery，只需编写：

```
$("#div-id").load("/page-that-returns-facebook-api-me-result"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:13:58.010

在登录表单所在的位置添加一些旋转轮，然后在准备好您的 php 脚本的文档上调用 ajax，脚本返回 false 或登录用户数据（或更多数据，如果您需要 - 重定向 url），然后根据结果显示表单登录或显示当前登录的用户。

我的意思是 Javascript 将根据服务器返回的内容、重定向、更改 UI 等处理所有逻辑。

另一种方法是缓存（会话到期）如果用户登录记住它首先调用 facebook。并检查该 Session 变量是否存在且尚未过期。仅在执行某些敏感任务或过期时再次调用。

# sentiment-analysis - 如何应对推特情绪分析？

> ID：10416343
> 
> 赞同：2
> 
> 时间：2012-05-02T14:59:05.803
> 
> 标签：sentiment-analysis

为了解决这个问题，我希望你给我一些建议。在大学里，我一直在解决意见挖掘任务，但在 Twitter 上，方法完全不同。例如，我使用集成学习方法对用户对西班牙某家酒店的看法进行分类。当然，我得到了一个包含正面和负面意见的训练集，然后我用测试集进行了测试。但是现在，有了推特，我发现这种分类非常困难。

1.  我需要训练集吗？如果这个问题的答案是肯定的，你不觉得 twitter 这么短暂，所以如果我有那个设置，我在未来主题上的表现会很差吗？

2.  我正在考虑获取一本字典（主要是形容词）并将我的推文与它交叉并获得一个术语文档矩阵，但我没有为任何推特分配类。此外，积极形容词和消极形容词可能会因主题和时间而异。那么，如何处理呢？

3.  如何处理语言问题？例如，我想研究用英语和西班牙语写的推文，但要分开研究。

4.  你建议用哪种编程语言来做这样的事情？我一直在尝试使用 R 包，例如 tm、twitteR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:03:32.450

1.  当然，我认为情绪的使用方式会在几个月内保持不变。最坏的情况是你重新贴标签并重新训练。根据我的经验，无监督学习在工业应用方面有着糟糕的记录。
2.  你需要一些情感/ adj 字典来处理情感——那里有一些数据集，但我忘记了它们在哪里。我可能已经用更好的信息回答了以前的问题。
3.  只做英文推文，构建语言分类器相当容易，但你想从小处着手，所以放轻松
4.  Python (NLTK) 如果您想用少量代码轻松完成。Java 有很好的 NLP 东西，但 Python 和它的库对用户更友好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T20:09:15.957

该站点：[https](https://sites.google.com/site/miningtwitter/questions/sentiment) ://sites.google.com/site/miningtwitter/questions/sentiment提供了 3 种使用 R 进行情绪分析的方法。

twitter 包现已更新，可与新的 twitter API 一起使用。我希望你下载包的源版本以避免重复推文。

我正在编写一本用于意见挖掘的西班牙语词典，并将在可访问的地方发布。

干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-20T07:48:04.940

如上所述，情绪分析只会给出 3 个结果 - 正面、负面和中性。我找到了一个关于 Twitter 情绪分析的教程，很简单。

我在这里找到了 - [https://www.ai-ml.tech/twitter-sentiment-analysis/](https://www.ai-ml.tech/twitter-sentiment-analysis/)

我只下载了 3 个依赖项，并且完成了较少的代码。只要通过它，你就会得到解决方案。

# wpf - WPF多个窗口，更改组合框影响两个绑定

> ID：10416350
> 
> 赞同：0
> 
> 时间：2012-05-02T14:59:31.500
> 
> 标签：wpf, binding, combobox

我有一个列表框，其中列出了用户详细信息，并且在选择时会在用户详细信息窗口的新实例中打开该用户详细信息

```
using UserDetailWin udw = new UserDetailWindow(); 
udw.show(); 
```

窗口中的组合框由共享的 CollectionViewSource 填充，SelectedValue 是通过 TwoWay 绑定完成的。

问题是当我打开多个 UserDetailWin 并在其中一个中更改组合框选择时，所有其他人都获得该选定的 id。

有人知道我在做什么错吗？

提前致谢

基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:18:33.580

这是正常行为。如果您了解对象引用，那么您自己应该很容易弄清楚。

`CollectionViewSource`要解决此问题，您应该为每个组合框创建新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:23:05.233

您对所有打开的窗口使用相同的 DataContext。使新窗口的选定用户DataContext 并直接绑定所有变量（通过设置UserDetailWin 的DataContext 属性）。

# c - 我们可以在没有 &&/|| 的情况下让 while 循环同时测试两个参数吗？

> ID：10416357
> 
> 赞同：3
> 
> 时间：2012-05-02T15:00:05.480
> 
> 标签：c, ipc

我正在查看 Beej 的[IPC](http://beej.us/guide/bgipc/output/html/multipage/fifos.html)指南，一行代码引起了我的注意。

在特定页面中，while 循环`speak.c`有两个条件要检查`while (gets(s), !feof(stdin))`。

所以我的问题是这怎么可能，正如我在大多数时候只测试一种情况时所看到的那样。

PS：我对这些不太陌生。将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T15:02:07.320

片段

```
while (gets(s), !feof(stdin)) 
```

使用*逗号运算符*，首先执行`gets(s)`，然后测试`!feof(stdin)`，这是条件的结果。

顺便说一句**，不要使用 gets**，这是非常不安全的。警惕使用它的资源，它们可能不是学习语言的好资源。

编码

```
while(gets(s), !feof(stdin)) {
    /* loop body */
} 
```

相当于

```
gets(s);
while(!feof(stdin)) {
    /* loop body */
    gets(s);
} 
```

更简洁，因为它避免了`gets`循环之前和循环体中的重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T15:23:41.673

一些人已经指出了其中的一些问题。我当然同意使用`gets`（完全）是一个糟糕的想法。

我认为值得一提的另一个细节是：由于这`feof(file)`用作退出循环的条件，因此如果您在文件结束之前遇到错误，它可能/也会出现错误行为。发生错误时，将设置错误标志，但（通常）不会设置 EOF 标志 - 并且由于您无法再从文件中读取（由于错误），它也永远不会设置，所以这个将进入无限循环。

完成这项工作的正确方法是使用`fgets`，并检查其返回值：

```
while (fgets(s, length_of_s, stdin))
    process(s); 
```

这将测试是否`fgets` *成功*读取文件，因此它将退出文件结尾*或*错误的循环。

另一个小细节：`fgets`读取字符串时，它通常会在行尾*保留*换行符（`gets`将其丢弃）。如果它存在，您可能需要添加更多代码才能将其剥离（并且如果换行符不存在，则可能处理比您分配的缓冲区更长的行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:04:43.407

此测试使用[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)，并已被用作获取下一行文本`gets(s)`并使用`!feof(stdin)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T15:05:17.433

此语法不计算两个表达式。它首先执行`gets(s)`然后评估`!feof(stdin)`可能被`gets()`函数调用修改的内容。

这不是一个很好的方法，因为它都使用`gets()`，这不是一个安全的功能，而且对于初学者来说很难阅读（因此你的问题）。

# algorithm - 如何确定最接近的纵横比

> ID：10416366
> 
> 赞同：8
> 
> 时间：2012-05-02T15:00:34.247
> 
> 标签：algorithm, image-processing

给定一个矩形 S，纵横比为 sx/sy，以及另外两个矩形 A（纵横比为 ax/ay）和 B（纵横比为 bx/by），我如何找出形状 A 或 B 中的哪一个具有最接近 S 的纵横比？形状的大小并不重要。

它只是 (sx/sy)/(ax/ay) 和 (sx/sy)/(bx/by) 中最接近 1 的那个吗？

我实际上想要做的是找出 PPTX 幻灯片上的哪个形状最适合将调整大小然后裁剪以适合该形状的图像。我想另一种方法是确定哪种形状导致丢失的像素最少，尽管在我的代码中，如果我可以通过比较纵横比来做到这一点会更容易。

最后我使用了下面的算法，实现如下（感谢 Matt Ball 的反馈）：

```
ShapeInPPTXLocation closest;
double imageAR = a_imageDim.getWidth()/a_imageDim.getHeight();
double aspectRatioCandidateA = a_candidateA.getWidth()/a_candidateA.getHeight();
double aspectRatioCandidateB = a_candidateB.getWidth()/a_candidateB.getHeight();
double closenessScoreA=1-(imageAR/aspectRatioCandidateA);
double closenessScoreB=1-(imageAR/aspectRatioCandidateB);

if (Math.abs(closenessScoreA) <= Math.abs(closenessScoreB))
{
    closest=a_candidateA;
}
else
{
    closest=a_candidateB;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:05:43.603

> 它只是 (sx/sy)/(ax/ay) 和 (sx/sy)/(bx/by) 中最接近 1 的那个吗？

这听起来很合理。您也可以将差异最小化：

```
let target_ratio = sx/sy
let a_ratio = ax/ay
let b_ration = bx/by

if |target_ratio - a_ratio| < |target_ratio - b_ratio|
    a_ratio is closer to target
else
    b_ratio is closer to target 
```

**更新**：此答案中的算法不太有效，如下面的评论中所述。OP 更新了他的问题以包括他使用的算法，该算法似乎工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-09T00:04:33.917

看了上面的建议，我不相信：

考虑以下示例：A = 1:2 B = 2:1 和

目标比率 = 1:1

显然 A 和 B 都应该同样合适，但比较

( 1 - GoalAR/CandiateAR) 如建议的那样，

aspectRatioCandidateA = 0.5 [ 1 : 2 ]

aspectRatioCandidateB = 2 [ 2 : 1 ]

你会得到

亲密度A = 1

亲密度B = 0.5

**比较纵横比的最佳方法是将它们视为定义一个角度：**

tan(o) = h/w

o = atan( h/w )

然后，您现在可以简单地比较角度的差异。

# c# - 使用 C# 使用 photobucket api 时出错。

> ID：10416367
> 
> 赞同：0
> 
> 时间：2012-05-02T15:00:38.770
> 
> 标签：c#, asp.net, visual-studio-2010, photobucket

我已经从 Photobucket api 复制了 C# 代码，我正在根据需要进行编辑，但我无法解决以下问题：

![在此处输入图像描述](../Images/d136353f24a45631a1c999dffd23ef64.png)

谁能建议我如何克服这个问题。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:05:44.703

很简单，timestampClient 在您看到带有下划线的变量和该消息的每个点都不存在（或无法访问）。

如果它需要实例化，则设置如下：

`TimestampClient timestampClient = new TimestampClient()`

为此，您需要确保在您的`DisplayMessage`方法可访问的某个地方声明 timestampClient

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:03:59.957

[其中一个人在这里](http://photobucket.com/developer/forum?read,3,1671)提到了一个类似的问题，他通过从[这里下载源代码解决了这个问题](https://github.com/dextrin21/Photobucket.NET)

# jquery - 通过视图访问另一个控制器中的变量

> ID：10416370
> 
> 赞同：0
> 
> 时间：2012-05-02T15:00:59.817
> 
> 标签：jquery, ruby-on-rails, ajax

我有一个 Ruby on Rails 项目，我正在使用 ajax 更新页面上的几个部分。我有一个 posts_controller 可以帮助显示一组帖子。每个帖子都可以通过 hides_controller “隐藏”和“取消隐藏”。此外，该页面还显示显示的帖子数。例如，当我最初加载页面时，它显示“显示 5 个帖子”。

一旦用户选择隐藏它，我已经设置了 ajax 来隐藏它；但是，视图（由 posts_controller 呈现）不会将“显示的 5 个帖子”位更新为“显示的 4 个帖子”。我在“”文件中写了以下ajax `create.js.haml`，并认为它会解决它：

```
:plain
  $(".post#{@post.id}_container").hide("drop", { direction: "up" }, 'fast');  
  $(".post_counter").html("#{escape_javascript(render('users/posts/hide'))}"); 
```

用户/帖子/hide.html.haml：

```
%h6= "#{@posts.size} posts shown" 
```

**我遇到的问题：** @posts 未在“hides_controller”“创建”操作中定义，而是在“posts_controller”中定义。显然，重复代码并不会使其非常干燥。

有没有办法告诉视图从另一个控制器引用变量？IE：从“posts_controller”而不是“hides_controller”中找到@posts 变量？

非常感谢您的帮助。感谢您的时间！

控制器结构：

```
**controllers (folder)**
  posts_controller.rb
  hides_controller.rb
  **users (folder)**
    posts_controller.rb 
```

`posts_controller.rb`（在父 [conrollers] 文件夹中）：

```
class PostsController < ApplicationController
  code
end 
```

`posts_controller.rb`（在子 [用户] 文件夹中）：

```
class Users::PostsController < PostsController
  def update
    @posts is defined here
  end
end 
```

hides_controller.rb：

```
class HidesController < ApplicationController
  def create
    code
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:47:45.987

您可以将 hides_controller 设为 posts_controller 的子类。IE

post_controller.rb：

```
class PostsController < ApplicationController
def create
   @posts = Post.all()
end 
```

hides_controller.rb：

```
class HidesController < PostsController
def create
  super
  #whatever
end 
```

所以现在@posts 将在您的隐藏视图中可用

更新以回应您的评论

我认为你有几个选择，一个是不要太沉迷于 Dryness，没有什么能阻止你重复@posts = ? 在 hides_controller 中。除非@posts = ? 比较复杂。

或者，您可以移动 @posts = 的定义？如果它们相同，则进入顶级posts_controller。

或者您可以从 Users::PostController 子类化 hides_controller，并创建一个特定于加载 @posts 的新操作

```
class PostController < ApplicationController
  before_filter :loadposts, :only=>[:update]
  def loadposts
    @posts = ?
  end
end
class Users::PostsController < PostController
end
class HidesController < Users::PostsController
  before_filter :loadposts, :only=>[:create]
end 
```

您可以决定为您想要的任何操作运行加载帖子，即

```
before_filter :loadposts, :only=>[:create,:update] 
```

或者

```
before_filter :loadposts , :except=>[:index,:new] 
```

# objective-c - 核心绘图图表轴位置

> ID：10416374
> 
> 赞同：3
> 
> 时间：2012-05-02T15:01:06.540
> 
> 标签：objective-c, ios, core-plot

我正在使用核心情节 1.0。目前，我通过将 Y 范围定义为略低于 0，使 X 轴在屏幕底部上方 20 点处绘制（因此标签可以显示）。

现在有人问我原点应该是 0.0 并且两个轴上都不应该低于 0，所以我现在正在查看核心绘图文档并用以下问题挠头：

我需要设置什么属性才能将轴移动到我想要的位置并继续显示点标签和轴标题？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:35:13.073

我找到了，所以我把它留在这里，以备其他人需要帮助。

这有点棘手，您需要调整绘图空间上的`xRange`和`yRange`，使其足够大以绘制标签、刻度和标题，然后调整`visibleRange`每个轴上的属性。此时，您可以获得所需的轴数量，并且仍然显示您需要的信息。

如果有人知道更好的方法，请分享:)

# php - 如何让 PHP 认为我的绝对路径会有所不同？

> ID：10416375
> 
> 赞同：0
> 
> 时间：2012-05-02T15:01:07.730
> 
> 标签：php, function, webserver

我的托管服务将我在 php 中的绝对路径设置为“/customers/12345/BASEPATHOFMYWEBSPACE”，因此，我必须输入“/customers/12345/BASEPATHOFMYWEBSPACE/MYFOLDER”才能进入 MYFOLDER，但在 html 中“/MYFOLDER”完全有效。

由于我的网站的结构方式，这对我来说是一个巨大的问题......

有没有办法我可以想出一个函数，然后我会在我所有的 php 文件中包含这会欺骗 php 接受“/MYFOLDER”作为 MYFOLDER 的绝对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:15:08.730

> 这对我来说是个大问题……

但这就是它的样子 - 它并不特定于您的托管服务提供商。如果您无法理解 URL 路径和文件系统路径之间的区别，那么您将遇到很多问题。

很可能网络服务器已经知道其中的区别 - 看看 phpinfo() 的输出。

如果您有自己的虚拟主机，我怀疑您会发现 "/customers/12345/BASEPATHOFMYWEBSPACE" = $_SERVER["DOCUMENT_ROOT"];

因此，如果要将 URL 映射到文件系统路径：

```
function to_file_path($url)
{
   $parts=parse_url($url);
   return $_SERVER["DOCUMENT_ROOT"] . $parts['path']
} 
```

反过来：

```
function to_url_path($file)
{
  $file=realname($file);
  if (substr($file, 0, strlen($_SERVER["DOCUMENT_ROOT"]))
        !==$_SERVER["DOCUMENT_ROOT"]) {
     return false;
  }
  return substr($file, strlen($_SERVER["DOCUMENT_ROOT"]));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:10:30.477

根据是否`safe_mode`启用了 php，您可以使用`ini_set()`或`set_include_path()`更改 include_path。

这将允许您在此之后使用相对路径。例如，在您网站的配置（或所有页面包含的其他文件）中，您可以这样做：

```
<?php
// This will allow all files to have relative path access to the
// "/customers/12345/BASEPATHOFMYWEBSPACE/MYFOLDER" directory.
set_include_path(get_include_path() . PATH_SEPARATOR . "/customers/12345/BASEPATHOFMYWEBSPACE/MYFOLDER");

// Eg: now you can write require('myfile.php') and
// it will search inside of "/customers/12345/BASEPATHOFMYWEBSPACE/MYFOLDER" 
```

# maven - XML maven工件不在类路径上

> ID：10416376
> 
> 赞同：1
> 
> 时间：2012-05-02T15:01:13.700
> 
> 标签：maven, dependencies

我有一些安装在 Maven 中的外部配置（XML 文件）。我需要将它们放在我的测试类路径中，但它们没有出现。

它们必须保留为 XML，我不能将它们打包在 Jar 中 - 但我愿意为此尝试其他任何东西，自定义插件等。

（请不要告诉我 Maven 仅适用于罐子 - 这根本不是真的（如果您提供参考反驳，我可以向您保证这是过时/错误信息）。

依赖项是这样指定的：

```
 <dependency>
        <groupId>some.group</groupId>
        <artifactId>some.artifact</artifactId>
        <version>${project.version}</version>
        <scope>test</scope>
        <type>xml</type>
        <classifier>some.classifier</classifier>
    </dependency> 
```

这些 XML 工件是由 build-helper 插件创建的（因此他们项目的 POM 中没有 1-2-1）。

我目前唯一的 hacky 解决方案是检查 M2_HOME 属性并从那里加载文件（因为它们被定义为依赖项 Maven 确实将它们拉下来） - 但我对此并不满意。

**编辑**：下一个最好的黑客可能是使用 maven-dependency-plugin 将这些复制到输出目录（目标/类）。如果我的配置适用于 Jars，那么这闻起来像 Maven 错误。

**编辑 2**：@khmarbaise 要求提供 build-helper-plugin 配置：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-artifacts</id>
                    <phase>package</phase>
                    <goals>
                        <goal>attach-artifact</goal>
                    </goals>
                    <configuration>
                        <artifacts>
                            <artifact>
                                <file>target/classes/ddl-seed.xml</file>
                                <type>xml</type>
                                <classifier>ddl-seed</classifier>
                            </artifact>
                            <!-- ... more definitions --> 
```

这将为所有 XML 工件生成正确的 maven-metadata-local.xml 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:27:32.797

不幸的是，我找不到强制 maven 将指定的测试依赖项添加到测试类路径的方法，除了这种将其复制到测试类路径上的目录的臭技巧。

这似乎是最快的方法（它用于测试依赖项），避免创建任何 JAR。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>unpack</id>
                    <phase>generate-test-resources</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>com.acme.gid</groupId>
                                <artifactId>com.acme.aid</artifactId>
                                <version>${project.version}</version>
                                <classifier>ddl</classifier>
                                <type>xml</type>
                                <outputDirectory>${project.build.directory}/test-classes</outputDirectory>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# java - ImageIO.read 非法参数异常 - 光栅带/色彩空间组件？

> ID：10416378
> 
> 赞同：17
> 
> 时间：2012-05-02T15:01:18.693
> 
> 标签：java, image, javax.imageio

为有点模糊的标题道歉，我无法弄清楚这里的关键字是什么。设置很简单，我打开一个图像

```
ImageIO.read(new File(filename)); 
```

这适用于大多数文件，但是对于一个我得到`IllegalArgumentException with the detail: "numbers of source Raster bands and source color space components do not match"`. 该图像是通过 wget 在有效的 Flickr URL 上获得的，并且我使用过以这种方式获得的其他图像，因此从原理上获取图像的方法似乎是合理的。我不确定是什么导致了异常。

一种解决方法是可以接受的——我并不`ImageIO`特别在意使用，而且图像在视觉上看起来很好。我只需要在不让 Java 吓坏的情况下阅读它！

这是有问题的图像，以防万一：

![在此处输入图像描述](../Images/f31a49c8eead82243d47c180ac76e452.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T00:19:15.063

所以我遇到了同样的问题，发现图像是灰度的，默认的 ImageIO.read 实现没有解决这个问题，因为图像元数据并不像预期的那样。我写了一个解决方法，如果主加载失败，则将加载重试为“BufferedImage.TYPE_BYTE_GRAY”。

```
 Iterator<ImageReader> iter = ImageIO.getImageReaders(stream);

        Exception lastException = null;
        while (iter.hasNext()) {
            ImageReader reader = null;
            try {
                reader = (ImageReader)iter.next();
                ImageReadParam param = reader.getDefaultReadParam();
                reader.setInput(stream, true, true);
                Iterator<ImageTypeSpecifier> imageTypes = reader.getImageTypes(0);
                while (imageTypes.hasNext()) {
                    ImageTypeSpecifier imageTypeSpecifier = imageTypes.next();
                    int bufferedImageType = imageTypeSpecifier.getBufferedImageType();
                    if (bufferedImageType == BufferedImage.TYPE_BYTE_GRAY) {
                        param.setDestinationType(imageTypeSpecifier);
                        break;
                    }
                }
                bufferedImage = reader.read(0, param);
                if (null != bufferedImage) break;
            } catch (Exception e) {
                lastException = e;
            } finally {
                if (null != reader) reader.dispose();               
            }
        }
        // If you don't have an image at the end of all readers
        if (null == bufferedImage) {
            if (null != lastException) {
                throw lastException;
            }
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T06:33:31.440

该错误消息提供信息，表明 ICC 颜色配置文件中提到的光栅带的数量似乎不正确。我使用[ImageMagick](http://www.imagemagick.org/script/index.php)从图像中剥离 ICC 配置文件。ImageIO 随后在读取图像时没有问题（~1k 坏图像）。希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-19T09:20:50.750

可以使用十二猴 ImageIO 读取此图像，它是 JRE 提供的原始 ImageIO 的更强大和更宽容的替代品。

见[https://github.com/haraldk/TwelveMonkeys/](https://github.com/haraldk/TwelveMonkeys/)

[我在 PDF Box Jira https://issues.apache.org/jira/browse/PDFBOX-3637](https://issues.apache.org/jira/browse/PDFBOX-3637)中找到了这个解决方案

为了使用十二猴子，将其添加为 maven 依赖项就足够了。然后它在默认图像处理器之前注册自己。

```
<dependency>
    <groupId>com.twelvemonkeys.imageio</groupId>
    <artifactId>imageio-jpeg</artifactId>
    <version>3.3.2</version> <!-- Alternatively, build your own version -->
</dependency> 
```

# android - Android 应用程序标签更改

> ID：10416379
> 
> 赞同：1
> 
> 时间：2012-05-02T15:01:23.730
> 
> 标签：android, android-manifest

我正在为此撕毁我的头发。我有一个应用程序，我使用短标题显示在启动器等中。我还有一个更长的字符串，用于从应用程序内部显示在屏幕顶部（有更多空间） . 细心的人会注意到我确实尝试设置 NoTitleBar 但并非所有设备似乎都遵循这种风格，这就是为什么必须保留长标题的原因。

我遇到的问题是，在 laucnher 和桌面中的应用程序图标上使用的标签似乎随机恢复为某些设备上的长字符串。在其他设备上一切都很好。我无法确定旧版本的应用程序中是否存在一些伪影，是我做错了什么还是某些设备存在错误。它发生在多个设备/供应商上的事实使我倾向于怀疑后者。

我的 AndroidManifest 包含标准的东西；包含各种活动的应用程序标签。由于我不明白的原因，我能够通过向我的所有 IntentFilters 添加一个 android:label 来解决某些设备上的问题。

这基本上就是我的 AndroidManifest 的样子：

```
 <application android:label="@string/global_app_short_name" android:icon="@drawable/app">
            <activity android:name=".HomeActivity"                  
                      android:launchMode="singleTask"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.MAIN"/>
                    <category android:name="android.intent.category.LAUNCHER"/>
                </intent-filter>
            </activity>

            <activity android:name=".A1"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.VIEW"/>
                </intent-filter>
            </activity>

            <activity android:name=".A2"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.VIEW"/>
                </intent-filter>
            </activity>

            <activity android:name=".A3"
                      android:launchMode="singleTask"
                      android:theme="@android:style/Theme.Black.NoTitleBar"
                      android:windowSoftInputMode="stateHidden">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.VIEW"/>
                </intent-filter>
            </activity>

            <activity android:name=".A4"
                      android:launchMode="singleTask"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.VIEW"/>
                </intent-filter>
            </activity>

            <activity android:name=".A5"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.VIEW"/>
                </intent-filter>
            </activity>

            <activity android:name=".A6"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                    <action android:name="android.intent.action.VIEW"/>
                </intent-filter>
            </activity>

            <activity android:name=".A7"
                      android:theme="@android:style/Theme.Black.NoTitleBar">
                <intent-filter android:label="@string/global_app_short_name">
                 ...some stuff...
                </intent-filter>

            </activity>
</application> 
```

# javascript - 我需要缓存localStorage吗？

> ID：10416384
> 
> 赞同：1
> 
> 时间：2012-05-02T15:01:39.800
> 
> 标签：javascript

如果我正在循环并引用一个保存在 localStorage 中的变量，我是否应该创建一个局部范围的变量（在循环外）并将其设置为等于 localStorage 变量以出于性能原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:05:47.677

除非您真的经常访问它并且它占用了循环的大部分，否则这可能会变成微优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:12:09.537

不，你不会得到那么多性能。Ofc 如果你查询太多次，你应该。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:32:58.037

如果您在一个函数中多次引用相同的本地存储值，则在该函数的持续时间内将其分配给一个局部变量。这与需要一些工作才能检索的任何其他值（例如 DOM 中输入字段的值）没有什么不同。如果您在同一个函数中多次需要该值，则将其值放在局部变量中并从那里使用它。您的代码可能会更紧凑，执行速度也更快。

没有理由将它全局缓存在一个持久的全局变量中，因为它已经可以从本地存储全局访问，所以真的没有理由为它添加一个新的全局变量。只需检索您需要的每个函数中的值。我能想象到的唯一例外是在极少数情况下进行微性能优化。一般来说，最好不要为已经在全球范围内可用的东西制作自己的全球副本。

# perl - Perl脚本修改文件

> ID：10416385
> 
> 赞同：1
> 
> 时间：2012-05-02T15:01:44.380
> 
> 标签：perl, jenkins

我有需要与 CVS 文件进行比较的 Oracle 文件，但问题是有很多文件我想忽略第一行作为差异的一部分。我想运行一个脚本来打开每个文件，并以最终输出替换`'CREATE OR REPLACE PACKAGE "TRON"."SOME_PACKAGE" IS'`为`'CREATE OR REPLACE PACKAGE SOME_PACKAGE IS'`. 我遇到的问题是该语句可以跨越多行，所以我必须考虑这样的情况。`'CREATE OR REPLACE "TRON"."SOME_PACKAGE"
IS'`

我的方法（因为这是 Jenkins 工作的一部分）是遍历工作区中的所有文件，修改任何符合此条件的文件。然后我可以使用我现有的 Perl 脚本，它正在使用`File::Compare`and `Text::Diff::Table`。

我一直在测试[Zaid 的解决方案](https://stackoverflow.com/questions/7821795/perl-to-remove-lines-from-file)，但收效甚微，因为它仍然无法处理命令字符串跨越多行的情况。（我的改变）：

```
use strict;
use warnings;
use Tie::File;
use Data::Dumper;

my @array;

tie @array, 'Tie::File', 'c:\cb_k_check_recon_mma.sps' or die "Unable to tie file";

my %unwanted = map  { $_ => 1 }
               map  { $_-1..$_-4, $_, $_+2 .. $_+4 }
               grep { $array[$_] =~ /^CREATE.*[IS|AS]$/ }
               0 .. $#array ;

print Dumper \%unwanted;

@array = map { $array[$_] } grep { ! $unwanted{$_} } 0 .. $#array;
print Dumper \@array;

untie @array; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:37:12.603

如果文本可以跨越多行，则要使单个正则表达式起作用，您需要将文件读入字符串，而不是逐行读取。

```
perl -0777 -pi.bak -e 's/CREATE\s+OR\s+REPLACE\s+PACKAGE\s+"TRON"\."SOME_PACKAGE"\s+IS/CREATE OR REPLACE PACKAGE SOME_PACKAGE IS/g' /path/*.pl 
```

这个`-0777`开关告诉 perl 去 slurp 文件，所以正则表达式只会运行一次。出于这个原因，我添加了全局`/g`修饰符，以防每个文件需要多个替换。

如您所见，我使用`\s+`而不是空格来匹配可能随机插入的换行符。`-pi`简而言之，意味着对目标文件执行就地编辑，`.bak`之后`-i`意味着使用该扩展名保存备份。建议保存备份，但不是必需的（Windows 除外）。

# python - 将 MySQL 查询转换为在 web2py DAL 中使用

> ID：10416388
> 
> 赞同：0
> 
> 时间：2012-05-02T15:01:56.753
> 
> 标签：python, mysql, data-access-layer, web2py

在测试（非 web2py）程序中，我正在使用调用 SELECT SUBSTRING_INDEX 的 MySQL 查询。在 web2py 的 DAL 规范中将其转换为正确用法的最简单方法是什么？

查询如下：

[http://pastie.textmate.org/3848916](http://pastie.textmate.org/3848916)

```
SELECT SUBSTRING_INDEX( ipaddress, '.', 3 ) AS first_three_octet, count( * ) AS ipCount, updated
            FROM ips
            GROUP BY SUBSTRING_INDEX( ipaddress, '.', 3 )
            HAVING ipCount = 254 
            ORDER BY ipCount DESC 
```

仅供参考 - 我同时将这段代码拼凑在一起以完成我需要的事情：

```
def ListFullRanges():
    import re
    f3o = '(\d{1,3}\.\d{1,3}\.\d{1,3})'
    fullrange = []

    rg1 = re.compile(f3o,re.IGNORECASE|re.DOTALL)
    for row in db(db.ips).select():
        m = rg1.findall(row.ipaddress)
        if not m[0] in fullrange:
            if db(db.ips.ipaddress.startswith(m[0])).count() == 254:
                fullrange.append(m[0])
    print fullrange

    return dict(fr=fullrange) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:05:23.020

有时会有像这样的非常复杂的查询，专门针对单个数据库引擎进行。虽然不是“完美”的解决方案，但您可以使用您已经为 MySQL 构建的查询：

```
db.executesql(
        "SELECT SUBSTRING_INDEX( ipaddress, '.', 3 ) AS first_three_octet, count( * ) AS ipCount, updated
        FROM ips
        GROUP BY SUBSTRING_INDEX( ipaddress, '.', 3 )
        HAVING ipCount = 254 
        ORDER BY ipCount DESC", as_dict=True
) 
```

这将返回一个字典列表，这将类似于您使用 DAL 查询获得的内容。使用 executesql 也更快。唯一的缺点是它可能只适用于 MySQL，而您不能将它与 SQLFORM 一起使用。但是如果你只打算使用 MySQL，那么这可能是最好的解决方案。

# java - SELECT * FROM mytable WHERE url IS NULL 语法错误异常

> ID：10416390
> 
> 赞同：-3
> 
> 时间：2012-05-02T15:02:01.033
> 
> 标签：java, jdbc

```
Connection conn = null;
conn = DriverManager.getConnection("jdbc:mysql://localhost/madb?&user=root&password=root");
PreparedStatement ps =
       conn.prepareStatement("SELECT * FROM mytable WHERE url IS NULL"); 
```

我越来越

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“null”附近使用正确的语法

如何使用 jdbc 和 mysql 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:12:36.933

我看不出这个查询为什么会失败，特别是考虑到它在查询浏览器中工作。

以下是一些可能解释这种行为的可能性：

1.  代码连接到错误的数据库。
2.  您正在查看错误的查询（即实际上失败的其他查询）。请注意错误消息中的单词`null`是小写的，而查询中的单词是大写的。这看起来很腥。
3.  您显示的 Java 代码不是您正在运行的代码（例如，由于某种部署失败）。

# php - PDO 查询致命错误：调用非对象上的成员函数 setFetchMode()

> ID：10416394
> 
> 赞同：0
> 
> 时间：2012-05-02T15:02:09.363
> 
> 标签：php, database, pdo, fetch

我一直在尝试提取我的 sql 数据库中 $user 等于subscriberID 的所有信息。我正在使用插入数据的 PDO 方法，并希望也使用查询功能。我从我的尝试条件中收到以下错误消息。

致命错误：在非对象上调用成员函数 setFetchMode()

我考虑过问题可能是由我用来提取数据的方法引起的，因为我对 PDO 来说是相当新的。（我包括一个 top.php，它建立了到数据库的链接）

谢谢你的建议

```
 <?php
 include "top.php";

    try{
        $user = $_SESSION['login'];
        echo "Welcome <strong>$user</strong> to your saved holidays";

        //$getSavedHolidays = $db->query("SELECT * FROM saved_holidays WHERE subscriberID='$user'");
        //preparing a PDO statment for accessing saved holidays when the logged in user matchs the subscriberID
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        $getSavedHolidays = $db->prepare("SELECT * FROM saved_holidays WHERE subscriberID=:user");
        //uses a bind valu as this makes the statment more secure
        $getSavedHolidays->bindValue(":user", $_SESSION['login']);
        $getsavedHolidays->setFetchMode(PDO::FETCH_ASSOC);
        $getSavedHolidays->execute();

        foreach ($Result as $row)
            {
                echo "<p><a href'".$row['link']."'>".$row['title']."</a><br \>" . 
                     $row['description'] . "<br \>" . 
                     $row['pubDate'] ."<br \></p>";
            }

        }

        catch (PDOException $e) 
            {
                 print_r($e->errorInfo);
                    die();
            } 
```

?>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:09:00.393

你应该准备你的陈述。它有一个很好的额外好处是更安全，而且它会解决你的问题。

```
$user = $_SESSION['login'];

try {
    $db = new PDO("mysql:host=localhost;dbname=database", "user", "pass");
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $getSavedHolidays = $db->prepare("SELECT * FROM saved_holidays WHERE subscriberID=:user");
    $getSavedHolidays->bindValue(":user", $_SESSION['login']);
    $getSavedHolidays->setFetchMode(PDO::FETCH_ASSOC);
    $getSavedHolidays->execute();
    $Result = $getSavedHolidays->fetchAll();

    foreach ($Result as $row) {/*...*/}

}
catch (PDOException $e) {
    print_r($e->errorInfo);
    die();
} 
```

## 编辑

您在上面粘贴的代码中有错误：

```
$$getSavedHolidays = $db->prepare("SELECT * FROM saved_holidays WHERE subscriberID=:user"); 
```

应该

```
$getSavedHolidays = $db->prepare("SELECT * FROM saved_holidays WHERE subscriberID=:user"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:05:11.063

存在显式语法错误。沉思结束单引号：

```
$getSavedHolidays = $db->query("SELECT * FROM saved_holidays WHERE subscriberID='$user'"); 
```

顺便说一句，由于您使用的是 PDO，因此使用[bindValue](http://php.net/manual/en/pdostatement.bindvalue.php)函数将值传递给 SQL 请求更安全。

# javascript - 清除值而不重新加载页面

> ID：10416396
> 
> 赞同：0
> 
> 时间：2012-05-02T15:02:18.500
> 
> 标签：javascript, jquery, html, forms

我有一系列文本框和下拉菜单，用户填写它们，点击“生成”，然后连接文本框中的字符串并在页面上显示结果值。

如果用户再次点击生成，我遇到的麻烦是清除这些“输出”。例如，如果有人更改了文本或类似的东西。

多行上有多组文本框，生成的字符串放在`<span>`页面末尾的 a 中。下面的示例代码：

HTML：

```
 <div id="activitytag">
      <h3>Activity Tags</h3>
      <a class="addActivityTag button blue">+</a> <a class="removeActivityTag button blue">-</a> 

  <form id="tag-form" class="tag-form">
  <input type="checkbox" class="checkbox nounderscore" name="tfcheck">
    <select class="page_type" title="Page Type">
      <option value="HPG">HPG – Homepage</option>
      <option value="LPG">LPG – Landing Page</option>
      <option value="CNT">CNT – Content</option>
      <option value="RES">RES – Research</option>
      <option value="ENG">ENG – Engagement</option>
      <option value="CNV">CNV – Sale Conversion</option>
    </select>
    <input type="text" class="pagedesc nounderscore" value="Page Description" title="Page Description" onfocus="clickclear(this, 'Page Description')" onblur="clickrecall(this,'Page Description')" />
    <input type="text" class="tagstartdate numberinput" value="Tag Start Date" title="Tag Start Date" maxlength="8" onfocus="clickclear(this, 'Tag Start Date')" onblur="clickrecall(this,'Tag Start Date')" />
    <span class="tag_span"></span>
  </form>
</div>

<div class="dfanames">
    <h4>Activity Group</h4>
    <span id="activitytaggrouptext"></span> 
</div> 
```

jQuery：

```
$(document).ready(function() {
    $('.gp').click(generateOutputs);
});

function clearAll() {
    $('.tag_span').each(function() {
        $('.tag_span').html("");
    });
} 
```

您可以从上面的 jQuery 中看到我尝试使用该`each()`函数（因为可以有多行）来清除跨度，但这不起作用。希望我在这篇文章中有意义。如果人们不明白这一点，将尝试更好地解释它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:05:28.800

尝试使用重置按钮

```
 <input type="reset"/> 
```

否则，如果您尝试在代码中执行此操作，您将执行以下操作：

```
function clear_form_elements(ele) {

    $(ele).find(':input').each(function() {
        switch(this.type) {
            case 'password':
            case 'select-multiple':
            case 'select-one':
            case 'text':
            case 'textarea':
                $(this).val('');
                break;
            case 'checkbox':
            case 'radio':
                this.checked = false;
        }
    });

}

 clear_form_elements('#tag-form'); 
```

[http://www.electrictoolbox.com/jquery-clear-form/](http://www.electrictoolbox.com/jquery-clear-form/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:32:36.267

试试这个......我在这里所做的是将按钮的输入放入表单中并将其类型设置为重置。这使我可以将代码放入表单的`onreset`属性中，以便清除当前表单（包含按钮）的跨度。

HTML

```
<div id="activitytag">
      <h3>Activity Tags</h3>
      <a class="addActivityTag button blue">+</a> <a class="removeActivityTag button blue">-</a> 

  <form id="tag-form" class="tag-form" onreset="clearAll()">
  <input type="checkbox" class="checkbox nounderscore" name="tfcheck">
    <select class="page_type" title="Page Type">
      <option value="HPG">HPG – Homepage</option>
      <option value="LPG">LPG – Landing Page</option>
      <option value="CNT">CNT – Content</option>
      <option value="RES">RES – Research</option>
      <option value="ENG">ENG – Engagement</option>
      <option value="CNV">CNV – Sale Conversion</option>
    </select>
    <input type="text" class="pagedesc nounderscore" value="Page Description" title="Page Description" onfocus="clickclear(this, 'Page Description')" onblur="clickrecall(this,'Page Description')" />
    <input type="text" class="tagstartdate numberinput" value="Tag Start Date" title="Tag Start Date" maxlength="8" onfocus="clickclear(this, 'Tag Start Date')" onblur="clickrecall(this,'Tag Start Date')" />
    <span class="tag_span">123</span>
    <input type="reset" value="ClearButton" />
  </form>
</div>

<div class="dfanames">
    <h4>Activity Group</h4>
    <span id="activitytaggrouptext"></span> 
</div> 
```

JavaScript

```
function clearAll() {
    $(".tag_span").each(function(index,element) {
        element.innerHTML="";
    });
}​ 
```

看一个活生生的例子：http: [//jsfiddle.net/VF2qG/2/](http://jsfiddle.net/VF2qG/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:11:34.247

这是我想出的：http: [//jsfiddle.net/Y2JRJ/](http://jsfiddle.net/Y2JRJ/)

您需要参考`$(this)`而不是再次参考 tag_span 。

```
$('.tag_span').each(function() {
    $(this).html("");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:18:08.970

如果不会有多个 .tag_span，那么就这样做

```
$('.tag_span').empty() 
```

这会删除元素内部的东西，但不会从 dom 中删除元素

# c# - 在 Windows 7 中分析文件的碎片

> ID：10416402
> 
> 赞同：6
> 
> 时间：2012-05-02T15:02:39.520
> 
> 标签：c#, c++, windows-7

有没有办法可以通过编程方式确定单个文件的碎片？例如，是否可以利用某种类型的文件系统 API 来检索此类信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T21:50:10.777

我只是从评论中复制并粘贴[Raymond 的回复](https://stackoverflow.com/questions/10416402/analyze-a-files-fragmentation-in-windows-7#comment13439839_10416402)，所以我将其标记为**社区 wiki 答案**。

对于 C/C++，使用[FSCTL_GET_RETRIEVAL_POINTERS](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364572%28v=vs.85%29.aspx)。对于 C#，使用[这些包装类](http://blogs.msdn.com/b/jeffrey_wall/archive/2004/09/13/229137.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T21:31:04.320

这是 FSCTL_GET_RETRIEVAL_POINTERS 的一个很好的 C# 包装器：http: [//blogs.msdn.com/b/jeffrey_wall/archive/2004/09/13/229137.aspx](http://blogs.msdn.com/b/jeffrey_wall/archive/2004/09/13/229137.aspx)

这个包装器调用控制代码返回一个对象列表，该对象定义每个文件在磁盘上的位置。

您可能希望 GetFileMap 方法检索此信息。

# java - 数据绑定到未知类型的容器

> ID：10416403
> 
> 赞同：2
> 
> 时间：2012-05-02T15:02:41.543
> 
> 标签：java, jface, eclipse-emf, emf, eclipse-databinding

我有以下类型的简单 EMF 模型：

```
EClass FooGroup {
    EString name;
    @Properties(containment=true, upper=-1)
    List<Node> nodes;
}
EClass BarGroup {
    EString name;
    @Properties(containment=true, upper=-1)
    List<Node> nodes;
}
EClass Node {
    EString name;
} 
```

我想在一个简单的 中显示所有节点`TableViewer`的名称，以及它们的父组的名称。不幸的是，`eContainer()`这是一项操作而不是一项功能。这意味着我不能使用 JFace 数据绑定框架将此属性链接到 GUI。

我怎么解决这个问题？我要创建派生特征吗？有什么技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:34:12.487

我想不出在 EMF 数据绑定中使用 eContainer 的方法，但是将指定的父引用添加到节点并在 eContainer 更改时以编程方式更新它并不难。

另一种解决方案是添加父级，然后更改生成的代码：

```
/*
 * @generated NOT
 */
public Group getParent() {
    if (eContainer() instanceof Group) {
        return (Group) eContainer();
    }
    return null;
} 
```

然后您可以使用 FeaturePath 来获取 EMFProperty，如下所示：

```
 IEMFProperty groupNameProperty = EMFProperties.value(
      FeaturePath.fromList(
        ModelPackage.Literals.NODE__PARENT,
        ModelPackage.Literals.GROUP__NAME
      )
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-01T07:58:28.867

如果您永远不需要将节点从一个容器移动到另一个容器，并且您永远不会将来自不同容器的节点混合在一起，那么您可以使用以下解决方案。

这个想法是为节点创建子类，为每个存储它们的位置创建一个子类。然后子类可以有一个正常的容器引用。

**编辑：**更仔细地阅读您的问题，我发现您必须能够统一处理对象，并且在这种情况下这是行不通的。但也许我的[第三个解决方案](https://stackoverflow.com/a/44858832/452775)会！

无论如何我都会把这个答案留在这里。也许它对其他人有用。

```
class FooGroup {
    String name
    contains FooNode[] nodes opposite group
}

class BarGroup {
    String name
    contains BarNode[] nodes opposite group
}

class Node {
    String name
}

class BarNode extends Node {
    container BarGroup group opposite nodes
}

class FooNode extends Node {
    container FooGroup group opposite nodes
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T21:11:59.417

有一种标准方法可以做到这一点：

**在子对象中创建对父对象的引用，并为其设置适当的`opposite`属性`container`。**

通过这种方式，类之间的关系在模型中是显而易见的，并且它是自动维护的，因此您不必编写任何自定义代码。

以下是 Xcore 中的一个示例：

```
class Master {
    contains Slave[] slaves opposite master
}

class Slave {
    container Master master opposite slaves
} 
```

当我们在这里时，为什么不在 Ecore 中也有同样的东西：

```
<eClassifiers xsi:type="ecore:EClass" name="Master">
  <eStructuralFeatures xsi:type="ecore:EReference" name="slaves" eType="#//Slave"
      containment="true" eOpposite="#//Slave/master"/>
</eClassifiers>
<eClassifiers xsi:type="ecore:EClass" name="Slave">
  <eStructuralFeatures xsi:type="ecore:EReference" name="master" eType="#//Master"
      eOpposite="#//Master/slaves"/>
</eClassifiers> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-01T08:18:40.637

可以创建解决此问题的自定义容器属性类。

这样您就不必修改模型类来绑定到容器。新属性将对所有电子对象有用。

```
public static IValueProperty containerProperty() {
    return new ContainerProperty();
}

public class ContainerProperty extends ValueProperty {
    @Override
    public IObservableValue observe(Realm realm, Object source) {
        return Observables.constantObservableValue(realm, 
            source == null ? null : ((EObject) source).eContainer(), 
            getValueType());
    }

    @Override
    protected Object doGetValue(Object source) {
        return ((EObject) source).eContainer();
    }

    @Override
    public Object getValueType() {
        return EObject.class;
    }
}; 
```

示例使用：

```
IObservableValue obs = containerProperty().observeDetail(node); 
```

* * *

这个类不监听容器的变化。但我认为有可能实现这样的属性。也许使用这个`SimpleValueProperty`类会适合那个。

# algorithm - 在通用哈希表中查找项目？

> ID：10416404
> 
> 赞同：23
> 
> 时间：2012-05-02T15:02:44.930
> 
> 标签：algorithm, language-agnostic, hashtable, conceptual

如果项目是随机组织的，表格如何知道从哪里开始查找？

在非随机表中，项目是根据某些特征组织的。（即名称）。因此，如果该表需要查找有关“John”的一些任意信息，它可以开始在“J”存储桶中查找。

但是，在通用哈希表中，项目是随机排列的。没有明确的特征。因此，要找到一些关于“John”的任意信息，表格不是必须查看每个存储桶吗？

这不是非常浪费时间吗？这就像在你家的每个橱柜中寻找一把勺子一样。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-05T03:50:34.570

虽然前面的答案基本上是正确的，但它们并没有直接解决通用散列算法的*随机*部分。通用散列算法在计算密钥的散列时不使用随机性。随机数仅在哈希表初始化期间用于从哈希函数族中选择哈希函数。这可以防止可以访问散列函数详细信息的对手设计最坏情况的密钥集。

换句话说，在哈希表的生命周期内，给定键的桶是一致的。但是，不同的实例（例如下次程序运行时）可能会将相同的密钥放在不同的存储桶中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T20:50:24.420

散列看起来或多或少是随机的，但它是确定性的——也就是说，特定的输入总是产生相同的散列值。

基于此，当您想在哈希表中插入一个项目时，您首先要为该输入生成哈希。然后，您使用它来索引表，并将您的项目插入表中的该位置。在典型情况下，您有一个部分被视为键，并且您有一些与此相关的更多信息（例如，您可能能够按姓名查找人员，并且每个姓名都有关于该人的信息）。

稍后，当您想要查找（相关的信息）特定键（在本例中为人）时，您输入并散列该键以在散列表中找到正确的位置来查找该信息。

这确实跳过了一些关键细节，例如您如何处理发生*相同*哈希值的两个或多个输入（这是不可避免的，除非您对允许的输入设置一些限制）。有多种方法可以处理此问题，例如仅按顺序查看表以找到下一个空闲位置，重新散列以在表中找到另一个位置，或者构建类似哈希到相同值的项目的链接列表。

无论如何，可能应该补充一点，在某些用例中，哈希表确实有点像您所推测的那样。仅举一个例子，当您想查看哈希表的*所有*内容（而不是一次仅查找一项）时，您通常确实会扫描整个表。即使您的哈希表几乎是空的，您通常也必须从一端扫描到另一端，寻找实际使用的每个条目。当你这样做时，你会以相当随机的顺序获得项目。

这指出了哈希表的另一个缺点——您通常需要与单个原始记录进行精确匹配才能使它们正常工作。例如，让我们考虑一些基于我姓氏的查询。假设您对整个姓氏进行了索引，找到“棺材”将是微不足道的——但至少对于大多数普通的哈希函数，搜索“以“Cof”开头的东西会慢得多，就像“找到所有的名字一样”在“棺材”和“戴明”之间。

因此，您有一半是正确的-虽然哈希表对于一些特定情况（主要是搜索完全匹配）通常非常快，但您概述的一般想法（扫描整个表以查找数据) 几乎是可用于其他目的的唯一选择，因此如果您想支持除完全匹配之外的任何内容，则可能需要使用不同的数据结构。

这主要处理哈希表的最典型用途/类型。可以创建至少在不同程度上弯曲（如果不是彻底破坏）这些规则的哈希函数。在大多数情况下，这些都涉及一些妥协。例如，给定地理信息作为输入，您可以通过简单地截断坐标（或其中一个坐标）来创建一个哈希（排序），以便以较低的精度获得相同的信息。这至少在一定程度上组织了信息，因此靠近的事物最终具有相似的哈希值，从而更容易找到相邻数据。然而，这通常会导致更多的冲突（例如，对于大城市的市中心，您会得到很多散列到相同值的项目）。

具体来看通用散列，这为难题增加了一个额外的元素：您拥有一系列散列函数，而不是单个散列函数，您可以从中“随机”选择。当使用通用哈希来实现哈希表时（并非总是如此——它也经常用于消息身份验证代码之类的事情），您通常*不会*在每次插入项目时随机选择哈希函数。相反，您通常会选择一个哈希，并继续使用它，直到遇到一些固定数量的冲突。然后你随机选择另一个哈希函数。

例如，在 Cuckoo 散列（可能是最常用的通用散列）中，您对密钥进行散列以查找位置。如果它已经被占用，你“踢出”那里的现有项目，并重新散列它以找到它的替代位置。它被插入那里。如果该插槽已被占用，它会“踢出”该插槽中已经存在的项目，并重复该模式。

当您搜索一个项目时，您对其进行哈希处理并查看该位置。如果那是空的，您会立即知道您的项目不存在。如果该插槽已被占用，但不包含您的项目，则您重新散列以找到备用位置。对尽可能多的散列函数继续这种模式（在布谷鸟散列的情况下通常只有两个，但您显然可以使用具有更多函数的其他类似算法）。

这可能会失败——进入一个无限循环，或者（几乎等同地）构建一个超过某个预设长度的链。在这种情况下，您重新开始，使用一对不同的哈希函数重新构建表。

当使用开放散列（其中通用散列是一种形式）时，删除往往是不平凡的。特别是，我们必须确保当我们在一个位置移除一个项目时，它不是在该位置发生碰撞的一系列项目的开始。在许多情况下，简单地为插槽添加第三个状态是最有效的：如果它从未被占用，则它只是空的。如果它当前被占用，则它正在使用中。如果一个项目在那里被删除，它就会被删除。这样，当您在搜索一个项目时，如果您遇到“已删除”的插槽，您会继续搜索您的项目（然而，如果您到达一个从未使用过的插槽，您可以立即停止搜索——您的项目清楚从未插入）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:20:15.840

哈希表不是随机组织的。它是按哈希值组织的。通过哈希值搜索该表以检索正确的哈希组。

# c# - 修剪数字功能

> ID：10416406
> 
> 赞同：0
> 
> 时间：2012-05-02T15:02:58.177
> 
> 标签：c#, regex, trim

我需要修剪包含数字的字符串的最后一部分。另外，我需要修剪不以零开头的部分

这就是我正在做的，我没有包括 0，因为我不确定如果数字以零开头，我应该如何忽略它。

```
 textBox13.Text = "A14C0681414010";
        //textBox13.Text = "A14C1381414010"; numbers will vary
        var first = textBox13.Text.TrimEnd("123456789".ToCharArray());
        var last = textBox13.Text.Substring(first.Length);
        // part 1 should contain A14C0
        // part 2 should contain 681414010 
```

我怎样才能实现它？我的功能不这样做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:08:22.943

让我们一步一步地看一下正则表达式：

*   以数字开头，但不是零：`[1-9]`
*   后跟任意位数（包括零）：（`[0-9]*`或缩写`\d*`：）
*   后跟“行尾”（仅获取“最后一部分”）：`$`.

    ```
    var input = "A14C0681414010"; 
    foreach (Match m in Regex.Matches(input, "[1-9][0-9]*$")) {
        Console.WriteLine("Found: " + m.Value);
    }

    // Outputs "Found: 681414010" 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:08:58.017

如果在你想要打破的点总是有一个零，你可以使用`string.IndexOf()`. 然后，您可以使用该索引将字符串分成 2 个子字符串。

# c++ - 如何从 QDeclarativeView 获取指向某个 qml 元素的指针？

> ID：10416408
> 
> 赞同：3
> 
> 时间：2012-05-02T15:03:00.407
> 
> 标签：c++, qt, qml

我们有一些 QDeclarativeView，我们加载并打开了 qml 文件。如何获取指向它的一些元素的指针（比如来自 qml 的 WebView 的 QWebView，带有一些 Id，放置在某个矩形内）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T18:10:18.837

我认为你需要阅读[这个](https://qt-project.org/doc/qt-4.7/qtbinding.html)

它解释了如何在名为“从 C++ 加载 QML 组件”的部分中获取对 qml 对象的引用

> QML 组件本质上是对象树，其子对象具有兄弟姐妹和自己的孩子。QML 组件的子对象可以使用 QObject::objectName 属性和 QObject::findChild() 来定位。例如，如果 MyItem.qml 中的根项有一个子 Rectangle 项：

因此，如果您需要获得参考，则必须编写类似

```
QObject *object = yourview.rootObject();
QObject *your_obj = object->findChild<QObject*>("yourobjName"); 
```

# android - 发送自动电子邮件的异常

> ID：10416409
> 
> 赞同：0
> 
> 时间：2012-05-02T15:03:18.657
> 
> 标签：android, android-intent, android-emulator

我正在尝试在后台发送一封自动电子邮件作为用户通知，我在下一行收到空指针异常，

```
Transport.send(message); 
```

任何人都可以帮忙吗？谢谢。

这是我的片段，

```
 public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
    try{

    MimeMessage message = new MimeMessage(session);   
    DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
    message.setSender(new InternetAddress(sender));   
    message.setSubject(subject);   
    message.setDataHandler(handler);   
    if (recipients.indexOf(',') > 0)   
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
    else  
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   

       //    Log.v("ziad", "wanna send...");
         Transport.send(message);   
      //   Log.v("ziad", "sent...");
    }catch(Exception e){

        Log.v("ziad",e.getMessage());
    }
} 
```

我也添加了互联网许可。

这是我的 logCat，

```
05-02 17:57:26.266: ERROR/SendMail(1220): println needs a message
05-02 17:57:26.266: ERROR/SendMail(1220): java.lang.NullPointerException: println needs a message
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.util.Log.println_native(Native Method)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.util.Log.v(Log.java:116)
05-02 17:57:26.266: ERROR/SendMail(1220):     at zaid.project.EmailSender.GmailSender.sendMail(GmailSender.java:74)
05-02 17:57:26.266: ERROR/SendMail(1220):     at zaid.project.EmailSender.EmailSenderActivity$1.onClick(EmailSenderActivity.java:33)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.view.View.performClick(View.java:2485)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.view.View$PerformClick.run(View.java:9080)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.os.Handler.handleCallback(Handler.java:587)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.os.Looper.loop(Looper.java:123)
05-02 17:57:26.266: ERROR/SendMail(1220):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-02 17:57:26.266: ERROR/SendMail(1220):     at java.lang.reflect.Method.invokeNative(Native Method)
05-02 17:57:26.266: ERROR/SendMail(1220):     at java.lang.reflect.Method.invoke(Method.java:507)
05-02 17:57:26.266: ERROR/SendMail(1220):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-02 17:57:26.266: ERROR/SendMail(1220):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-02 17:57:26.266: ERROR/SendMail(1220):     at dalvik.system.NativeStart.main(Native Method)
05-02 17:57:27.946: DEBUG/dalvikvm(324): GC_EXPLICIT freed 4K, 54% free 2538K/5511K, external 1625K/2137K, paused 254ms
05-02 17:57:32.875: DEBUG/dalvikvm(136): GC_EXPLICIT freed 38K, 51% free 2958K/5959K, external 4845K/5329K, paused 126ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:08:42.540

也许`MimeMessage`需要它的文本集？尝试像这样设置一个空白消息：

```
message.setText(""); 
```

看看这是否摆脱了你的 NPE。

编辑：实际上，我认为可能是这一行：

```
Log.v("ziad",e.getMessage()); 
```

尝试将其注释掉，看看是否有帮助。

# artifacts - 在工件存储库中存储第三方应用程序

> ID：10416411
> 
> 赞同：0
> 
> 时间：2012-05-02T15:03:24.537
> 
> 标签：artifacts

我正在学习诸如[jFrog Artifactory](http://www.jfrog.com/)和[Sonatype Nexus](http://www.sonatype.org/nexus/)之类的工件存储库。他们似乎提倡以[Maven](http://maven.apache.org/)方式组织工件，例如：

> /$groupId/$artifactId/$version/$artifactId-$version.$extension

除了构建输出之外，我还想在我的存储库中存储第三方应用程序。通过这种方式，员工可以集中存储对我们的软件构建过程至关重要的编译器和应用程序。

我应该为[Notepad++](http://notepad-plus-plus.org/)`$groupId`之类的东西使用什么？它的主要作者是 Don Ho，但如果我使用它，我认为它会使 Notepad++ 很难找到。

我宁愿保留从第三方下载的原始工件文件名，而不是将它们重命名为`$artifactId-$version.$extension`. 这种方法有什么优点或缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:58:33.410

1.  继续使用二进制存储库的方法！好动作！
2.  一旦 Maven 不会下载第 3 方应用程序（我猜 Notepad++ 不会，对吧？），`$groupId`这无关紧要。您可以选择任何您认为正确的内容，例如使用反向 url -`org.notepad-plus-plus`
3.  问题是 - 用户将如何使用它们。如果他们打算使用任何非 Maven 方式来检索它们（UI、REST 脚本、Ant、Gradle），那么您可以使用您喜欢的任何路径和名称，您将获得 Artifactory 的全面支持（上传、搜索等.) 对于更以 Maven 为中心的 Nexus，您最好坚持使用 Maven 表示法 ( `[$groupId]/[$artifactId]/[$version]/[$artifactId]-[$version].[$ext]`)

# ios - iOS：In-App-Purches 在测试设备上失败

> ID：10416418
> 
> 赞同：0
> 
> 时间：2012-05-02T15:03:52.503
> 
> 标签：ios, in-app-purchase, sandbox

我正在开发一个已经在 App Store 上发布的应用程序的新版本。该应用程序使用应用内购买来解锁其完整版功能，这些功能可以毫无问题地使用。

几天前，我在我的设备上测试了我的应用程序的新版本，并且 App Store 沙箱中的 IAP 运行没有任何问题。知道我想在将新版本提交给 Apple 之前进行最终测试，而 IAP 突然停止工作。

我使用 SKProductsRequest 从 App Store 请求产品数据。此请求在 productsRequest:didReceiveResponse: 方法中得到答复，我的 IAP 项目的 ID 列在 response.invalidProductIdentifiers 数组中。

App Store 中当前版本的应用程序仍然可以正常运行。那么产品标识符怎么会有问题呢？

起初我认为这可能只是 Apple 服务器端的一个时间错误，但问题现在出现了一天。我所有设备上的问题都是一样的。设备上的 Apple-ID 帐户没有任何区别。

只要问题没有解决，我就不想将新版本提交给 Apple。我怎样才能找出真正的问题是什么？

# javascript - Underscore.js：使用在对象中找到的键从对象列表中创建映射

> ID：10416424
> 
> 赞同：60
> 
> 时间：2012-05-02T15:04:16.450
> 
> 标签：javascript, underscore.js, javascript-objects

我正在使用优秀的[Underscore.js](http://underscorejs.org/)库。我有一个特定的任务，我可以使用 JavaScript 或 jQuery 完成，但我想知道在 Underscore 中是否有某种可用的抽象我错过了。

本质上我有一个像这样的对象-

```
var some_object_array = [{id: "a", val: 55}, {id: "b", val: 1}, {id: "c", val: 45}]; 
```

我想把它转换成 -

```
var some_map = {"a": {id: "a", val: 55}, "b": {id: "b", val: 1}, "c": {id: "c", val: 45}}; 
```

我知道我可以使用`_.groupBy(some_object_array, "id")`. 但这会返回一个像这样的地图 -

```
var some_grouped_map = {"a": [{id: "a", val: 55}], "b": [{id: "b", val: 1}], "c": [{id: "c", val: 45}]}; 
```

请注意，这是做广告所要做的。但我希望自己`some_map`不迭代对象。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-12T04:01:23.527

对于它的价值，因为 underscore.js 你现在可以使用[`_.object()`](http://underscorejs.org/#object)

```
var some_map = _.object(_.map(some_object_array, function(item) {
   return [item.id, item]
})); 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-06-02T12:43:46.130

对于您的情况，您应该使用以下`indexBy`功能：

```
var some_object_array = [{id: "a", val: 55}, {id: "b", val: 1}, {id: "c", val: 45}];

var some_grouped_map = _.indexBy(some_object_array, 'id'); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-10-08T21:58:26.260

还有这个方法

```
_.reduce(data, function (o, item) { o[item.key] = item.value; return o }, {}) 
```

这是一个在内部函数中有两个语句的语句。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-05-02T15:34:16.077

我认为没有什么比 groupBy 更能满足您的需求了。即使有，它也不会比简单的更好：

```
var some_map = {};
_.each(some_object_array, function(val) {
  some_map[val.id] = val;
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-16T10:46:09.817

在这种情况下，您不需要迭代数组。不是`map`，不是`reduce`，不是`transform`。你所需要的只是旧的`pluck`

```
_.object(_.pluck(some_object_array, 'id'), some_object_array); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-12T19:51:41.580

对于 ES6，它是

```
var some_map = _.chain(some_object_array)
                .map(item => [item.id, item])
                .object()
                .value() 
```

# c# - 如何通过 C# 运行我的 Entity Designer DDL 脚本？

> ID：10416427
> 
> 赞同：1
> 
> 时间：2012-05-02T15:04:20.080
> 
> 标签：c#, sql-server, entity-framework, tsql, ef-model-first

我尝试了几种方法来通过 C# 运行我的 Model-First Entity Designer SQL 文件，但没有运气。我有一个 SQL 文件，其中包含我加载和读取的所有代码。

下面是我的代码。**它在执行的每个命令上都会出错**。请注意，我正在通过我的模型容器的连接属性检索连接，该属性的类型为`DbConnection`，但我不确定这是否与它有关。

C#脚本：

```
var commandStrings = Regex.Split(Resources.DatabaseScript, "^\\s*GO\\s*$", RegexOptions.Multiline);

//container is my EDMX container.

container.Connection.Open();

var command = container.Connection.CreateCommand();
var transaction = container.Connection.BeginTransaction();
command.Connection = container.Connection;
command.Transaction = transaction;

foreach (string commandInput in commandStrings)
{
    var commandString = commandInput;
    if (commandString.Trim() != "")
    {
        Debug.Write("Executing SQL ... ");

        try
        {
            command.CommandText = commandString;
            command.Connection = container.Connection;
            command.CommandType = CommandType.Text;
            command.Prepare();
            command.ExecuteNonQuery();
            Debug.WriteLine("Success!");
        }
        catch (Exception exc)
        {
            Debug.WriteLine("Failed!");
            Debug.WriteLine("Exception: " + exc.Message);
            Debug.Write("Rolling back ... ");
            try
            {
                transaction.Rollback();
                Debug.WriteLine("Success!");
            } catch(Exception exce)
            {
                Debug.WriteLine("Exception: " + exce.Message);
            }
        }
        finally
        {
            Debug.WriteLine("SQL: " + commandString);
        }
    }
}
transaction.Commit();
container.Connection.Close(); 
```

收到错误。我收到的一些错误如下：

错误一：

```
IF OBJECT_ID(N'[dbo].[FK_UserStory]', 'F') IS NOT NULL
ALTER TABLE [dbo].[StorySet] DROP CONSTRAINT [FK_UserStory]; 
```

> 查询语法无效。靠近标识符“OBJECT_ID”，第 1 行，第 4 列。

错误2：

```
IF SCHEMA_ID(N'dbo') IS NULL EXECUTE(N'CREATE SCHEMA [dbo]'); 
```

> 查询语法无效。靠近标识符“SCHEMA_ID”，第 1 行，第 4 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:42:36.393

我不确定具体是什么问题，但是您的代码执行异常处理和事务控制的顺序有点奇怪，所以我在下面对其进行了一些修改。让我知道这是否对您有任何影响。

```
var commandStrings = Regex.Split(
    Resources.DatabaseScript,
    "^\\s*GO\\s*$",
    RegexOptions.Multiline | RegexOptions.Compiled);

// container is my EDMX container.

container.Connection.Open();
try
{
    using (var transaction = container.Connection.BeginTransaction())
    {
        try
        {
            foreach (var commandInput in commandStrings.Where(commandInput => !string.IsNullOrWhiteSpace(commandInput)))
            {
                Debug.Write("Executing SQL ... ");
                try
                {
                    using (var command = container.Connection.CreateCommand())
                    {
                        command.Connection = container.Connection;
                        command.Transaction = transaction;
                        command.CommandText = commandInput;
                        command.CommandType = CommandType.Text;
                        command.ExecuteNonQuery();
                    }

                    Debug.WriteLine("Success!");
                }
                finally
                {
                    Debug.WriteLine("SQL: " + commandInput);
                }
            }

            transaction.Commit();
        }
        catch (Exception exc)
        {
            Debug.WriteLine("Failed!");
            Debug.WriteLine("Exception: " + exc.Message);
            Debug.Write("Rolling back ... ");
            try
            {
                transaction.Rollback();
                Debug.WriteLine("Success!");
            }
            catch (Exception exce)
            {
                Debug.WriteLine("Exception: " + exce.Message);
            }
        }
    }
}
finally
{
    container.Connection.Close();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:37:58.747

我解决了这个问题。我的代码工作得很好。

`container.Connection`但是我不得不使用ModelContainer 的连接，而不是使用`(container.Connection as EntityConnection).StoreConnection as SqlConnection`.

# android - 视图未绘制在 GLSurfaceView 之上

> ID：10416434
> 
> 赞同：3
> 
> 时间：2012-05-02T15:04:41.723
> 
> 标签：android, glsurfaceview

当用户按下菜单按钮（暂停游戏）时，我试图让暂停菜单出现。游戏确实成功暂停，但没有任何东西绘制......也许它在我的 GLSurfaceView 下方绘制？这是我的代码。

```
public class GameActivity extends Activity {

private GLSurfaceView mGLSurfaceView;
private static final String TAG = "Game";
private MainGamePanel mGame;

private View mPauseMessage = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SharedPreferences prefs = getSharedPreferences("GameSettings", MODE_PRIVATE);

    setContentView(R.layout.main);
    mGLSurfaceView = (GLSurfaceView) findViewById(R.id.glsurfaceview);
    mPauseMessage = findViewById(R.id.pausedMessage);

    mGLSurfaceView.setEGLConfigChooser(false); // 16 bit, no z-buffer

    mGame = new MainGamePanel();
    mGame.setSurfaceView(mGLSurfaceView);

    ....
    mGLSurfaceView.setRenderer(mGame.getRenderer());

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    boolean result = true;
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        if (mGame.isPaused()) {
            this.resume();
            if (mPauseMessage != null) {
                mPauseMessage.setVisibility(View.GONE);
            }
        } else {
            this.pause();
            if (mPauseMessage != null) {
                mPauseMessage.setVisibility(View.VISIBLE);
            }
        }
    }
    return result;
}

protected void pause() {
    super.onPause();

    mGame.onPause();
    mGLSurfaceView.onPause();
}

protected void resume() {
    super.onResume();

    mGame.onResume();
    mGLSurfaceView.onResume();
} 
```

从我的 XML 中：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<android.opengl.GLSurfaceView xmlns:android="http://schemas.android.com/apk/res/android" 
            android:id="@+id/glsurfaceview"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
    />
    <LinearLayout
        android:id="@+id/pauseMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone">
    <ImageView 
    android:id="@+id/pausedMessage"
    android:src="@drawable/pause"
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:layout_gravity="center"/>
</LinearLayout>
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:09:12.997

也许你在某处有一句话说：

```
mGLSurfaceView.setZOrderOnTop(true); 
```

它会覆盖 OpenGL 以在任何内容之上绘制，即使您的 RelativeLayout 中有其他视图。如果你有的话，试着评论一下。

否则你可以试试这个：（谢谢user2610335）

```
mGLSurfaceView.setZOrderOnTop(false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:18:04.970

我有一个类似的问题。但在我的情况下，pauseMenu 是不可见的，但没有消失。当我将其更改为 GONE 时，一切正常。但这仅发生在某些设备上。也许试试 View.bringToFront()

# mysql - 在两个表中过滤结果

> ID：10416436
> 
> 赞同：1
> 
> 时间：2012-05-02T15:04:42.840
> 
> 标签：mysql, filtering, inner-join, create-table

我正在将带有 msSQL 和 VB2008 上的交货单的发票系统移植到 PHP + MySQL，除了要为客户开具发票外，我已经完成了所有工作。

我正在使用这些表：

表 1 是我添加每个交货单的地方

```
CREATE TABLE IF NOT EXISTS `delivery_note` (
  `id_delivery_note` int(11) NOT NULL AUTO_INCREMENT,
  `number_delivery_note` int(11) DEFAULT NULL,
  `id_product` int(11) NOT NULL,
  `qty_delivered` int(11) NOT NULL,
  `qty_received` int(11) DEFAULT NULL,
  `date` date DEFAULT NULL,
  `client_code` varchar(50) DEFAULT NULL,
  `active` int(1) DEFAULT NULL,
  `id_invoice` int(11) DEFAULT NULL,
  `invoiced` int(1) DEFAULT NULL,
  PRIMARY KEY (`id_delivery_note`)
) TYPE=MyISAM  ROW_FORMAT=DYNAMIC AUTO_INCREMENT=6 ;

INSERT INTO `delivery_note` (`id_delivery_note`, `number_delivery_note`, `id_product`, `qty_delivered`, `qty_received`, `date`, `client_code`, `active`, `id_invoice`, `invoiced`) VALUES
(2, 2, 13, 1, NULL, '2012-04-25', '1', 1, NULL, 0),
(3, 3, 24, 1, NULL, '2012-04-25', '1', 1, NULL, 0),
(5, 1, 13, 2, NULL, '2012-04-24', '2', 1, NULL, 0); 
```

表 2 是我为每个客户保留每个项目的价格（所有客户都有不同的价格）

```
CREATE TABLE IF NOT EXISTS `product_price` (
  `id_product_price` int(11) NOT NULL AUTO_INCREMENT,
  `client_code` int(11) DEFAULT NULL,
  `id_product` int(11) DEFAULT NULL,
  `price` decimal(15,2) DEFAULT NULL,
  PRIMARY KEY (`id_product_price`)
) TYPE=MyISAM  ROW_FORMAT=FIXED AUTO_INCREMENT=6 ;

INSERT INTO `product_price` (`id_product_price`, `client_code`, `id_product`, `price`) VALUES
(1, 1, 13, 1.51),
(2, 1, 24, 43.11),
(3, 1, 24, 11.00),
(4, 2, 13, 1.52),
(5, 2, 24, 43.12); 
```

我一直在使用的查询是：

```
SELECT number_delivery_note, delivery_note.id_product, qty_delivered, date, product_price.price
FROM delivery_note, product_price
WHERE(delivery_note.client_code = 1) AND (delivery_note.invoiced = 0) 
```

并给了我这一切：

[http://s14.postimage.org/rghvfmo9t/Sin_t_tulo_1.gif](http://s14.postimage.org/rghvfmo9t/Sin_t_tulo_1.gif)

当我只需要这些数据时：

[http://s15.postimage.org/8hnpv9qt7/propblema.jpg](http://s15.postimage.org/8hnpv9qt7/propblema.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:08:57.493

您可以“分组”前 3 个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:11:16.337

试试这个：

```
SELECT number_delivery_note, delivery_note.id_product, 
       qty_delivered, date, product_price.price
FROM   delivery_note, product_price
WHERE (delivery_note.client_code = 1) AND 
      (delivery_note.invoiced = 0) and
       delivery_note.id_product = product_price.id_product 
```

但为什么是

```
3        1          24        11.00 
```

不包括在表中`product_price`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:20:25.717

我想[这](http://sqlfiddle.com/#!2/65c79/7)可能是你想要的：

```
SELECT id_delivery_note, number_delivery_note, date, x.id_product, x.price,
qty_delivered FROM delivery_note d INNER JOIN product_price x
ON x.id_product = d.id_product
AND d.client_code = x.client_code WHERE d.client_code = 1 and d.invoiced = 0
GROUP BY id_product 
```

# android - 如何从 Google 搜索列表中获取链接的 *real* url？

> ID：10416438
> 
> 赞同：0
> 
> 时间：2012-05-02T15:04:43.997
> 
> 标签：android, browser, google-search

我正在 android 环境中开发一个网络浏览器，当我在 google 中执行搜索时，我得到了 google 搜索结果列表。这些结果的 url 是这样的：

[http://www.google.ca/url?sa=t&source=web&cd=1&ved=0CDUQFjAA&url=http%3A%2F%2Fwww.test.com%2F&ei=yTOhT7yIGcmu6AG29aSfCQ&usg=AFQjCNH21KLjC0CBkjon2DwD_CZ0HAp](http://www.google.ca/url?sa=t&source=web&cd=1&ved=0CDUQFjAA&url=http%3A%2F%2Fwww.test.com%2F&ei=yTOhT7yIGcmu6AG29aSfCQ&usg=AFQjCNH21KLjC0CBkjon2DwD_CZ0HAp)

这个 google url 将我发送到真实页面：[http ://www.test.com](http://www.test.com)

谷歌使用这种类型的 URL 来跟踪人们点击了哪些链接。但是，对我来说，我需要真正的网址，所以有没有办法从谷歌重定向网址（http://www.google.ca/url?sa=）获取真正的网址（http://www.test.com） t&source=web&cd=1&ved=0CDUQFjAA&url=http%3A%2F%2Fww ...)

我不希望从长字符串中对 url 进行子串化并进行一些替换以获取真实的页面 url，因为这不是一种可靠的方法，因为我将依赖 google url 结构，也许他们会更改其参数名称未来，所以我的方法在这种情况下不起作用......

所以，我想知道是否有办法知道什么网址有重定向链接发送给我

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:09:27.813

如果你仔细看，Google 会返回类似[http://www.google.ca/url?xxx=...&yyy=...&url=real_url&zzz=](http://www.google.ca/url?xxx=...&yyy=...&url=real_url&zzz=) ... 的内容，即真正的 URL 在`url`GET 参数中谷歌返回的网址。您需要做的就是解析 google 返回的 URL - 真正的 URL 将在`url`响应的 GET 参数中。不要忘记做`url_decode`它。

另一种方法是获取 google 返回的完整 URL 并在其上执行 HTTP GET。您应该会收到 301 或 302 重定向。从该响应中，读取`location`标头的值 - 这将是您的真实 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:11:57.183

请记住，谷歌可以更改它提供的链接，只需在搜索结果中使用网站的“真实”网址。

涵盖可预见的未来的稳健方法是：

1.  检查链接的**域**是否包含谷歌，如果没有，它可能是“真实”的 URL
2.  如果域包含*谷歌。**，尝试从 GET 参数中获取 URL 并取消转义值，然后检查它是否是有效的 URL。
3.  如果一切都失败了，那么一定要调用链接并检查`location`标题。

如果您能够在出现任何故障时进行记录，您可以检查出现了什么问题以及原因。

# java - 在 JSF 页面中单击行时如何打开新页面？

> ID：10416443
> 
> 赞同：0
> 
> 时间：2012-05-02T15:05:02.793
> 
> 标签：java, javascript, jsf, jsf-2

我有一个`h:datatable`带有数据行的 JSF：

```
 <h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                    <!-- Check box -->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Select" />
                        </f:facet>
                        <h:selectBooleanCheckbox  onclick="highlight(this)" value="#{SessionsController.selectedIds[dataItem.id]}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                <f:attribute name="№" value="№" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                <f:attribute name="sortField" value="Account Session ID" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.aSessionID}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                <f:attribute name="sortField" value="User ID" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.userID}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                <f:attribute name="sortField" value="Activity Start Time" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.activityStart}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                <f:attribute name="sortField" value="Activity End Time" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.activityEnd}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                <f:attribute name="sortField" value="Activity" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.activity}" />
                    </h:column>
                </h:dataTable> 
```

我想赋予用户在单击一行时打开新页面的能力。我发现 JavaScript 代码很有用：

```
 $("table#dataTable tbody tr").click(function () {
            window.location = $(this).find("a:first").attr("href");
        }); 
```

问题是我需要一个 JSF 标记，当单击该行并传递数据时，JavaScript 将使用该标记打开新页面。在此示例中，href 用于导航到新窗口。我需要可用于相同目的的 JSF 标记。有合适的 JSF 标签吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:12:21.050

您可以`<a>`在 JSF 中使用纯 HTML。

```
<a href="page.xhtml">link</a> 
```

或者`<h:link>`

```
<h:link value="link" outcome="page" /> 
```

* * *

**与具体问题无关**，至于您的 jQuery 选择器，不要忘记考虑到 JSF 在客户端 ID 前面加上父命名容器组件的 ID。检查生成的 HTML 输出以确保。

# android - Titanium [错误] 检测到 JDK 版本 1.7.0_03，但需要 1.6

> ID：10416445
> 
> 赞同：0
> 
> 时间：2012-05-02T15:05:10.647
> 
> 标签：android, titanium, java

我尝试使用钛 android 模拟器运行一个简单的“hello world”移动应用程序，但出现以下错误：

> [错误] 检测到 JDK 版本 1.7.0_03，但需要 1.6
> 
> 错误：找不到进程“2196”。

我已经下载并安装了 JDK 1.6，但它仍然发生。你知道我需要做什么吗？

ps：可以看到模拟器在运行，但是在应用列表中看不到我的应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:05:13.103

显然，不幸的是，对于同时安装了 JDK-6 和 JDK-7 的系统，系统上可能只会出现 JDK-6 路径`PATH`。

通常的做法是：

1.  定义环境变量`JAVA_HOME=G:\Program Files\java\jdk1.6.0_24`
2.  `%JAVA_HOME%\bin`在`PATH`变量中添加/设置

* * *

我尝试了不同的方法来说服 Titanium Studio 使用不同于为系统定义的 JDK，但我想出的只是将系统路径更改为 JDK-6。

更改环境变量后不要忘记重新启动 Titanium Studio/Eclipse。

# jquery - jQuery 验证除了一些选定的字符

> ID：10416453
> 
> 赞同：0
> 
> 时间：2012-05-02T15:05:36.143
> 
> 标签：jquery, validation

我需要创建一个验证器。

验证者只需要拒绝两个字符，这两个字符是唯一`" ,`的，并接受其余的字符。

这是我现在的代码

```
<input type="text"/>​

$(document).ready(function () {    
    $('input').keyup(function() {
        var $th = $(this);
        $th.val( $th.val().replace(/[^a-zA-Z0-9]/g, function(str) { alert('You typed " ' + str + ' ".\n\nPlease except.'); return ''; } ) );
    });
});​ 
```

**[演示](http://jsfiddle.net/sweetmaanu/ntywf/324/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:20:12.737

[http://jsfiddle.net/ntywf/325/](http://jsfiddle.net/ntywf/325/)

```
$(document).ready(function () {

    $('input').keyup(function() {
        var $th = $(this);
        if ((/[\"\,]/g).test($th.val())==true) 
        {

                $th.val( $th.val( ).replace(/[\"\,]/g,function(str) { alert('You typed " ' + str + ' ".\n\nPlease except.');return '';} )) ;
        }
    });
});​ 
```

# jquery - 使用 jquery-scrollTo 插件获取 o 是未定义的错误

> ID：10416455
> 
> 赞同：0
> 
> 时间：2012-05-02T15:05:38.377
> 
> 标签：jquery, google-maps, jquery-ui-map

我有一个包含谷歌地图的 div 和另一个包含一组带有滚动条的条目的 div。我希望能够单击出现在地图上的标记，并使条目集滚动到与单击的标记关联的条目。

但是，我不断收到 o is undefined 错误。除了以下之外，我不确定如何以另一种方式做到这一点：

我试过这样做：

```
$('.an_entry').each(function() {
  var id = $(this).attr('id');
  var lat = $(this).attr('lat');
  var lng = $(this).attr('lng');
  latlng = new google.maps.LatLng(lat, lng)
  $('#map').gmap('addMarker', {'position': latlng, 'bounds':true})
    .click(function() {
      $('#sideBar').scrollTo('#'+id);
    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:08:47.250

我看到 lat_pt 和 lng_pt 没有定义。应该是纬度和经度。

```
latlng = new google.maps.LatLng(lat, lng) 
```

# java - Play 框架和 DB2

> ID：10416457
> 
> 赞同：8
> 
> 时间：2012-05-02T15:05:44.310
> 
> 标签：java, database, playframework, db2, playframework-2.0

我正在通过 Play Framework 2.0 开发一个 Web 应用程序。

因为我需要访问 DB2 数据库，所以我在应用程序的 application.conf 文件中添加了以下几行：

```
db.mydb.driver=com.ibm.db2.jcc.DB2Driver
db.mydb.url="jdbc:db2://host:port/databaseName"
db.mydb.user=user
db.mydb.password=pass
db.mydb.jndiName=databaseName 
```

我成功连接到该数据库，但出现以下异常：

```
[info] play - datasource [jdbc:db2://host:port/databaseName] bound to JNDI as databaseName
[info] play - database [databaseName] connected at jdbc:db2://host:port/databaseName
[warn] application - play_evolutions table already existed
[error] application -

! @6a8ib4hd7 - Internal server error, for request [GET /] ->

play.api.UnexpectedException: Unexpected exception [SqlSyntaxErrorException: DB2
 SQL Error: SQLCODE=-204, SQLSTATE=42704, SQLERRMC=DB2ADMIN.PLAY_EVOLUTIONS, DRI
VER=4.12.55]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anon
fun$1.apply(ApplicationProvider.scala:134) ~[play_2.9.1.jar:2.0]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anon
fun$1.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply
(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply
(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0]
        at scala.Either$RightProjection.flatMap(Either.scala:277) ~[scala-librar
y.jar:0.11.2]
Caused by: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-2
04, SQLSTATE=42704, SQLERRMC=DB2ADMIN.PLAY_EVOLUTIONS, DRIVER=4.12.55
        at com.ibm.db2.jcc.am.hd.a(hd.java:676) ~[db2jcc4.jar:na]
        at com.ibm.db2.jcc.am.hd.a(hd.java:60) ~[db2jcc4.jar:na]
        at com.ibm.db2.jcc.am.hd.a(hd.java:127) ~[db2jcc4.jar:na]
        at com.ibm.db2.jcc.am.mn.c(mn.java:2621) ~[db2jcc4.jar:na]
        at com.ibm.db2.jcc.am.mn.d(mn.java:2609) ~[db2jcc4.jar:na]
        at com.ibm.db2.jcc.am.mn.a(mn.java:2085) ~[db2jcc4.jar:na] 
```

为了解决这个问题，我尝试禁用 Evolutions，在 application.conf 文件中设置以下行：

```
evolutions=disabled
evolutions.enable=false 
```

但我总是得到上述例外。

谁可以帮我这个事？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:45:42.420

OK... Finally found out the origin of the problem...

Like I said I am using Play Framework 2.0 and was working in the forms tutorial project that comes with this version of Play...

As it turns out the command to disable Evolutions is neither:

evolutions=disabled evolution=disabled

... But rather:

evolutionplugin=disabled

Thanks

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:27:09.433

# objective-c - WebViews 中的后退/前进滑动手势

> ID：10416459
> 
> 赞同：1
> 
> 时间：2012-05-02T15:05:46.413
> 
> 标签：objective-c, macos, cocoa, gesture

我在 Stack Overflow 上看过另一篇关于后退手势的帖子，但我的有点不同。

如何实现滑动手势以“返回”和“前进”，以对光标结束的 WebView 产生影响？例如，如果有多个，则手势会转到并影响相应的视图。

我想这将是以下代码，但我不知道如何让手势方法起作用：

```
- (void) backGesture {
    [(WebView *)self.theWebView goBack];
}

- (void) forwardGesture {
    [(WebView *)self.theWebView goForward];
} 
```

'theWebView' 是光标悬停在上面的 WebView。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:24:44.053

好吧，您可以使用 swipeWithEvent 方法向 webView 添加一个类别，以便每个视图处理自己的滑动（三指种类；两指滚动转换为 web 视图的鼠标操作）。

WebView+addSwipe.h：

```
#import <WebKit/WebKit.h>
@interface WebView (addSwipe)
@end 
```

WebView+addSwipe.m：

```
#import "WebView+addSwipe.h"

@implementation WebView (addSwipe)

- (void)swipeWithEvent:(NSEvent *)event {
    CGFloat deltaX = [event deltaX];
    if (deltaX > 0) {
        NSLog(@"goForward %@ ", self);
        [self goForward];
    } else if (deltaX < 0) {
        NSLog(@"goBack%@ ", self);
        [self goBack];
    }
}

@end 
```

而且，如果你是在 iOS 上，则将两个 UISwipeGestureRecognizers 附加到每个视图；每个方向一个，具有单独的操作：

```
-(void) backGesture:(UIGestureRecognizer *)sender {
    [sender.view goBack];
}

-(void) forwardGesture:(UIGestureRecognizer *) sender)
    [sender.view goForward];
} 
```

以您的 viewController 作为目标。每个手势动作都会交给一个发送者，所以 sender.view 会告诉你哪个视图中有滑动。

请注意，必须在运行程序的系统上的触控板控制面板中启用“三指滑动导航”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:11:03.733

您可以创建自己的自定义手势，但您必须实现触摸开始、触摸移动和触摸结束。最好的方法是有一个名为 startPoint 的 CGPoint 和一个名为 endPoint 的第二个 CGPoint。在触摸开始时，您将触摸的位置存储到 startPoint 中。在触摸结束时，您将结束点存储在 endPoint 中。要查看是否是向后滑动，请比较两个点的 x 值！这是接收触摸的链接：http: [//mobile.tutsplus.com/tutorials/iphone/ios-quick-tip-detecting-touches/](http://mobile.tutsplus.com/tutorials/iphone/ios-quick-tip-detecting-touches/)
希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T19:15:22.000

对于两次手指滑动，请查看[https://github.com/Kapeli/SwipableWebView](https://github.com/Kapeli/SwipableWebView)

# iphone - MDM 配置文件安装检查

> ID：10416461
> 
> 赞同：3
> 
> 时间：2012-05-02T15:05:51.370
> 
> 标签：iphone, ios, objective-c, ipad, mdm

我正在制作一个在设备上安装 MDM 配置文件的应用程序。配置文件已从服务器成功安装。但是，如果用户取消配置文件安装，那么我无法从应用程序中检查配置文件是否安装成功..

现在我需要一种方法来从应用程序中检查该配置文件是否已成功安装？我可以从我的应用程序中检查安装状态吗？

# java - 如何在黑莓上处理屏幕旋转

> ID：10416462
> 
> 赞同：0
> 
> 时间：2012-05-02T15:06:04.260
> 
> 标签：java, blackberry

在黑莓中处理屏幕旋转的正确方法是什么？我使用不同的分辨率，我所要做的就是在我的字段中处理位图和边距。我当前的项目中有一个管理屏幕旋转的要求，我不知道这方面的技术方法是什么。

为了记录，我做了一个快速的谷歌搜索，我发现的只是关于如何禁用旋转的信息，所以我开始认为旋转处理有点困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T00:42:08.353

首先，您需要覆盖子布局。您可以使用以下代码：

```
protected void sublayout(int width, int height)
{       
    SetLayout();
    super.sublayout(width, height);
} 
```

在设置布局中，您可以设置控件的大小和位置。你如何做到这一点将取决于`FieldManager`你使用什么。我使用`AbsoluteFieldManager`并根据屏幕宽度和高度的百分比来定位和调整所有字段的大小。例如：

```
private void SetLayout()
{
    int screenWidth = Display.getWidth();
    int screenHeight = Display.getHeight();
    cmdOk.SetSize((int) (screenWidth * 0.2), (int) (screenHeight * 0.1));
    manager.setPosChild(cmdOk, 0, screenHeight - cmdOk.getHeight());
} 
```

我希望这有帮助

# mysql - 尝试创建复杂 SQL 查询的 SQL 新手用户

> ID：10416464
> 
> 赞同：1
> 
> 时间：2012-05-02T15:06:20.017
> 
> 标签：mysql, sql, database, select

我正在尝试创建一个相当混乱的 SQL 查询，我似乎无法弄清楚它的代码。

在我的示例中，我正在查询四个表：

1.  用户
2.  文件
3.  网络
4.  网络_文档

在我的数据库中，有以下规则： 用户可以创建自己的文档 用户可以是网络的成员。他们可以选择将自己的一些文档分配给网络。文档和网络之间的链接存储在“Network_Documents”中，其中存储了 DocumentID 和 NetworkID。

我要做的是创建一个查询来检索分配给网络的所有文档。例如，假设以下是我的数据库数据：

```
userID userName userEmail 
  1     Adam     1@m.net 
  2     Greg     2@m.net
  3     Tony     3@m.net

docID    docName      docContents docCreator(FK)
  1     document01     dcmnt01A       1
  2     document02     dcmnt02B       2
  3     document03     dcmnt03C       3

networkID    networkName      networkCreator(FK)
   1          network01             1
   2          network02             2     
   3          network03             3

docnetID    netID(FK)   docID(FK)
    1          1           1
    2          1           3
    3          2           9999 
```

我现在需要做的是创建一个 SELECT 查询来获取与网络关联的所有文档。例如，通过查询 network01，我检索到以下两个文档。

> 文档网络：network01
> 文档名称：document01
> 文档创建者：Adam

* * *

> 文档网络：network01
> 文档名称：document03
> 文档创建者：Tony

我认为以下 SQL 查询将从特定网络中选择所有文档（及其创建者）：

```
SELECT users.userID, users.userName,
       documents.docID, documents.docName, documents.docContents, documents.docCreator
       networks.networkID, networks.networkName, networks.networkCreator,
       network_documents.netID, network_documents.docID
FROM users, documents, networks, network_documents
WHERE networkID = 1; 
```

上面的查询好像产生了几百！记录，它们几乎都是重复的。编写此类查询的正确方法是什么？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:09:29.743

使用`JOIN`：

```
SELECT  [...]
FROM    networks n
        INNER JOIN network_documents nd ON n.networkID = nd.networkID
        INNER JOIN documents d ON nd.docID = d.docID
        INNER JOIN users u ON d.docCreator = u.userID
WHERE   n.networkID = 1; 
```

我使用别名（简称）作为表名）以避免重复。您有时会看到这些用`AS`关键字指定（例如`networks as n`）。

（为清楚起见省略了列列表）

# performance - 测量程序的计算时间和 I/O 时间

> ID：10416468
> 
> 赞同：1
> 
> 时间：2012-05-02T15:06:32.233
> 
> 标签：performance, profiling, timing

是否有任何程序可以测量给定程序的总计算时间和总 I/O 时间（写入标准输出或文件）？

编辑：这是 Linux 64 位程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:21:57.153

*时间*：

```
$ time echo "hello world"
hello world

real    0m0.000s
user    0m0.000s
sys     0m0.000s 
```

*strace -c*：

```
$ strace -c echo "hello world"
hello world
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
   nan    0.000000           0         1           read
   nan    0.000000           0         1           write
   nan    0.000000           0        14        12 open
   nan    0.000000           0         3           close
   nan    0.000000           0        12         9 stat
   nan    0.000000           0         3           fstat
   nan    0.000000           0         8           mmap
   nan    0.000000           0         3           mprotect
   nan    0.000000           0         2           munmap
   nan    0.000000           0         3           brk
   nan    0.000000           0         1         1 access
   nan    0.000000           0         1           execve
   nan    0.000000           0         1           uname
   nan    0.000000           0         1           arch_prctl
------ ----------- ----------- --------- --------- ----------------
100.00    0.000000                    54        22 total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:17:32.707

您可以使用该`time`命令获取进程占用的总挂钟和总 CPU 时间。这将为您提供合理的估计，尤其是对于 I/O 繁重的进程。

# php - 如何计算mysql查询中的行数？

> ID：10416471
> 
> 赞同：0
> 
> 时间：2012-05-02T15:06:55.973
> 
> 标签：php, mysql, phpmyadmin

我想根据行号查询mysql？假设我想查询最后 10 行，如何在 mysql 查询中执行此操作？

这是我的 mysql 查询，但它按 6 天间隔查询，但我需要根据最后 10 行而不是 6 天间隔查询，

```
SELECT people_id, people_number 'people number', count(people_number) 'Occurs',
  (
   Select count(people_number) from people_history
   where people_id =  5486 and date > DATE_SUB(NOW(), INTERVAL 6 DAY)
  ) 'Total',
  count(people_number)/(
      Select count(people_number) from people_history
      where people_id = 5486 and date > DATE_SUB(NOW(), INTERVAL 6 DAY)
  )*100 'Percent'
FROM people_history
where people_id = 5486 and date > DATE_SUB(NOW(), INTERVAL 6 DAY)
group by people_id, people_number
order by Percent desc` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:08:55.787

使您的查询：

```
SELECT * FROM people_history ORDER BY id DESC LIMIT 10 
```

[限制](http://dev.mysql.com/doc/refman/5.5/en/select.html)允许您限制从查询中获得的结果数量。通过按 ID 排序，您可以获得表中的最后 20 个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:08:25.627

[`LIMIT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)：

```
SELECT 
    people_id,
    people_number 'people number',
    count(people_number) 'Occurs',
    (Select 
        count(people_number) 
    from 
        people_history 
    where 
        people_id = 5486 
        and date > DATE_SUB(NOW(), INTERVAL 6 DAY)) 'Total',            
    count(people_number) / 
        (Select 
            count(people_number) 
        from 
            people_history 
        where 
            people_id = 5486 
            and date > DATE_SUB(NOW(), INTERVAL 6 DAY)) *100 'Percent' 
FROM 
    people_history 
WHERE
    people_id = 5486 
    and date > DATE_SUB(NOW(), INTERVAL 6 DAY)
GROUP BY
    people_id, people_number 
ORDER BY 
    Percent desc
LIMIT 0, 10 
```

您可能想要稍微重写该查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:10:30.863

颠倒你的订单，所以最后 10 个是前 10 个，限制为 10。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T15:11:07.580

`LIMIT`将限制返回结果的数量。它在查询的末尾。[查看SELECT](http://dev.mysql.com/doc/refman/5.1/en/select.html)的文档，然后转到 LIMIT 部分。

对于您的查询，如果您`LIMIT 10`在最后添加，您将只获得您要查找的 10 个结果。将 LIMIT 与 ORDER BY（ASC 或 DESC）结合起来以获得第一个或最后一个结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T15:10:14.107

好吧，“last”必须指某种排序（order by ....）语句。你总是添加限制 N （在你的情况下 N = 10）

# servlets - 托管 Bean 类分离

> ID：10416474
> 
> 赞同：0
> 
> 时间：2012-05-02T15:07:07.713
> 
> 标签：servlets, jsf-2, java-ee-6, managed-bean

我有两个项目，我需要为其他项目重用相同的 jsf 托管 bean 类。有什么方法可以为 jsf 托管 bean 类 + util 类创建一个单独的项目，并在我将要做的所有项目中引用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:22:32.987

根据所使用的 IDE，创建一个简单的“Java 项目”或“Web 片段项目”，并确保它`/META-INF/faces-config.xml`在源文件夹中有一个 JSF 2.0 兼容文件。然后配置您的 Web 项目以将该项目作为 JAR 包含在中`/WEB-INF/lib`（同样，取决于使用的 IDE，在 Eclipse 中只需将模块项目添加到Web 项目属性中的*Deployment Assembly列表中）。*一旦 JSF 找到`/WEB-INF/lib`与 JSF 2.0 兼容的 JAR `/META-INF/faces-config.xml`，JSF 将自动扫描整个 JAR 以查找 JSF 工件。

### 也可以看看：

*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code)
*   [JSF facelets 模板打包](https://stackoverflow.com/questions/9290482/jsf-facelets-template-packaging/9473487#9473487)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:52:59.877

由于您使用的是 Java EE 6，如果您愿意使用 CDI，那将是一件很容易的事情。我自己做了几次。

将您的 Managed Beans 放在一个单独的 JAR 项目中，并将其导入您想要使用它们的项目中。您唯一需要做的就是在两个项目的 /META-INF 中使用`@Named`而不是使用`@ManagedBean`beans.xml。这样，您可以在 facelets 页面中引用启用 CDI 的 bean，并获得 CDI 模型的整体灵活性和强大功能。

# amazon-web-services - 创建 DynamoDB 表时如何指定可用区？

> ID：10416491
> 
> 赞同：1
> 
> 时间：2012-05-02T15:08:31.500
> 
> 标签：amazon-web-services, amazon-dynamodb

在使用适用于 Java 的 AWS 开发工具包创建 DynamoDB 表时，我无法弄清楚如何指定可用区。它默认在美国东部地区创建一个表。

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:18:49.743

在 AWS SDK for Java 1.3.8 中，它仍未实现。
相信会在下一次 SDK 更新中实现。

同时作为一种解决方法，您可以在使用该功能构建`AmazonDynamoDBClient`对象后手动设置它`setEndpoint`。

以欧盟为例：

```
AmazonDynamoDBClient dbClient = new AmazonDynamoDBClient(creds);
dbClient.setEndpoint("dynamodb.eu-west-1.amazonaws.com/"); 
```

# java - 使用 spring mvc 登录的 Base64 编码

> ID：10416493
> 
> 赞同：2
> 
> 时间：2012-05-02T15:08:33.313
> 
> 标签：java, encoding, jaxb

我正在尝试登录。我正在使用 Spring MVC 框架。我必须在服务器上实现一个提交密码和用户名的表单。我的表格如下：

该模型：

```
package org.client.log;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class InfoLogin{

private String username;
private String password;

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

} 
```

我使用 jaxb 技术来编组和解组与服务器端交换的 xml。问题是我需要使用 base64 编码对用户名和密码进行编码，然后在服务器端发送。编码应该在标题上添加一些东西。我阅读了很多教程，其中大多数人说我应该使用 Spring Security。我不知道该怎么做。有人有什么建议吗？

实际上我想做的是：对此（“用户名：密码”）进行base64编码并创建这个“QWxh784bjpvcG58VuIHNlc2FtZQ==”（例如），它将添加到标题中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T02:01:43.943

好的，我找到了以下解决方案：我只需要在 addPersonLogin 方法中的控制器中添加以下代码行：

```
 byte[] data = Base64.encodeBase64(datas.getBytes());
   String personheader=  new String(bytevalues);
   headers.set( "Authorization: Basic", personheader); 
```

# c# - ASP.Net C#：将图像/文档提交到网站

> ID：10416494
> 
> 赞同：-1
> 
> 时间：2012-05-02T15:08:35.173
> 
> 标签：c#, asp.net, sql-server-2008, linq-to-entities

我正在开发 RESTAURANT 网站。我有一个表格，允许餐厅老板提交有关他们餐厅的详细信息。我想允许他们向网站提交图像和文本文档（例如菜单）。我计划将图像作为 BLOB 存储在数据库中，但我不确定如何将大型文本文档存储在数据库中，我认为这些文档要么是 WORD 文档，要么是 PDF。

作为一个编程新手，我想知道捕获这些信息的最佳策略是什么？我应该先将提交的项目存储在目录中的文件中，然后将它们传递给数据库，还是有某种方法可以省略该步骤并将它们保持在某种控制之下，并在我将它们直接传递给数据库时将餐厅记录添加到数据库中？

提前感谢您提供有关最佳方法的任何指导！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:11:23.280

我建议将图像 / pdfs / 等保存到文件系统中，并简单地将文件的路径存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:49:55.850

如果您使用的是 SQL 2008 或更高版本，还可以考虑使用新的 FileStream 功能：http: [//msdn.microsoft.com/en-us/magazine/dd695918.aspx](http://msdn.microsoft.com/en-us/magazine/dd695918.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:26:50.340

您可以根据用户名或 id 创建文件夹并将图像/文档存储在那里，并将图像/文档的位置存储在数据库中。

# ios - 使用 ANE 时 Flash Mobile iOS 应用程序启动到空白/空白屏幕

> ID：10416496
> 
> 赞同：1
> 
> 时间：2012-05-02T15:08:36.613
> 
> 标签：ios, flash, mobile, air, air-native-extension

几周以来，我一直在为 Android 和 iOS 开发一个移动应用程序。直到本周我尝试添加第二个时，它才使用单个 ANE 构建。这个新的 ANE 具有适用于 iOS 平台的本机代码以及适用于 Android 和模拟器的纯 ActionScript（默认）实现。Android 和模拟器在新的 ANE 上运行良好，但是当我尝试在 iOS 上运行我的应用程序时，我看到的只是黑屏。

我能够在没有任何错误的情况下导出发布版本，并且能够执行快速调试版本，但两者都会导致相同的空白屏幕。（调试版本也无法连接到 Flash Builder 的调试器。）

我正在使用 Flash Builder 4.6 和 Flex SDK 4.6。我的 iOS SDK 是 5.0 版。

有人遇到过这种情况吗？我的想法不多了。:)

# .net - Custom Error Pages not working correctly in .NET

> ID：10416505
> 
> 赞同：0
> 
> 时间：2012-05-02T15:09:03.697
> 
> 标签：.net, web-config, custom-error-pages

i have the following piece of code my my web.config:

```
<customErrors mode="On" defaultRedirect="~/Exception.aspx" enableVersionHeader="false">
      <error statusCode="403" redirect="NoAccess.htm"/>
      <error statusCode="404" redirect="FileNotFound.htm"/>
    </customErrors> 
```

so, as far as i understand it should be redirecting me to an Exception.aspx page whenever there's an error however, when i try to test this by putting in some bad parameters in the url, i get the following message:

> Runtime Error
> 
> Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.
> 
> Details: To enable the details of this specific error message to be viewable on remote machines, please create a tag within a "web.config" configuration file located in the root directory of the current web application. This tag should then have its "mode" attribute set to "Off".
> 
> Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's configuration tag to point to a custom error page URL.

did i miss something? i thought it would redirect me to the error page i created?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:17:44.947

If you set the mode to ="Off" it should redirect correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:05:35.440

Something was wrong with the config and I had to delete and retype the statement to get it to work. Very strange!

# javascript - 使用 Javascript 在 HTML 页面上隐藏按钮的最佳方法

> ID：10416506
> 
> 赞同：4
> 
> 时间：2012-05-02T15:09:04.567
> 
> 标签：javascript, jquery, html, dom

一个简单的页面，带有按钮：

```
<button id="MyButton">Hello</button> 
```

问题是：

*   我需要这个按钮来显示 Javascript 是否被禁用
*   如果启用了 Javascript，我需要隐藏按钮

一个简单的jQuery：

```
$('#MyButton').hide(); 
```

按钮“闪烁”还不够，它会加载然后隐藏自己，而且非常明显。

我发现完成这项工作的一种方法是使用 JS 在之后立即隐藏它：

```
<button id="MyButton">Hello</button>
<script>
    document.getElementById('MyButton').style.visibility = 'hidden';
</script> 
```

这似乎有点丑陋并且违反了一些良好的标准规则，这是隐藏按钮而不产生闪烁效果的唯一方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T15:11:19.353

听起来像是 noscript 标签的工作！

```
<noscript>
    <button id="MyButton">Hello</button>
</noscript> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T15:11:36.707

```
<noscript>
    <button id="MyButton">Hello</button>
</noscript> 
```

> 如果页面上的脚本类型不受支持或当前在浏览器中关闭脚本，则 HTML NoScript Element () 定义要插入的一段 html。

[**MDN**](https://developer.mozilla.org/en/HTML/Element/noscript)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T15:11:55.527

使用`<noscript>`包含元素的`<style>`元素。`<noscript>`不会被具有活动 JavaScript 的浏览器解析。所以那是：

```
<style>#MyButton { display: none; }</style>
<noscript><style> button#MyButton { display: inline; }</style></noscript> 
```

或者更好：

```
<noscript><button id="MyButton">Button</button></noscript> 
```

请注意，我使用`button#MyButton`的是具有更高的特异性值，以便它将覆盖第一种方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T15:11:21.033

使用无 js 类：

```
<button id="MyButton" class="no-js">Hello</button> 
```

定义该类以隐藏元素：

```
.no-js { display: none; } 
```

然后，在您准备好的处理程序中，删除 no-js 类 - 如果未启用 javascript，它将保留在那里。

# java - Restlet消费post webservice，添加json-string作为表示

> ID：10416513
> 
> 赞同：0
> 
> 时间：2012-05-02T15:09:42.780
> 
> 标签：java, web-services, rest, restlet

我想使用 restlet 来消费一个休息网络服务。这将通过一个帖子来完成。我需要在以下代码中添加什么：

```
ClientResource resource = new ClientResource("url");      
resource.setChallengeResponse(ChallengeScheme.HTTP_BASIC, user, password); 
```

我有一个 Json 字符串，在实现我的 rest-webservice 的代码中，输入是一个表示对象。如果可能的话，我需要我的参数（作为 jsonstring）在 entity.gettext() 方法中。

```
public StartProcessInstanceResponse startProcessInstance(Representation entity)
jsonstring = entity.gettext(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:10:47.100

自己找到了答案......你应该像这样制作一个表示对象

```
Representation rep = new StringRepresentation(jsonString); 
```

然后你可以像这样发布：

```
resource.post(rep); 
```

而已...

# iphone - UITableView 在行数 >1 时崩溃

> ID：10416514
> 
> 赞同：1
> 
> 时间：2012-05-02T15:09:46.597
> 
> 标签：iphone, objective-c, uitableview, nsarray

我有一个 uitableview，当行大于一时会崩溃。这根本没有意义，因为它们是数组中的两个对象。它非常适用于对象一，但不适用于对象二。一探究竟：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"rigth not %i", [pro.matches count]);

    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //NSLog(@"%i", indexPath.row);
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // configure your cell here...
    if ([pro.matches count] >0) {
        cell.textLabel.text = [pro.matches objectAtIndex:1];
    }
    [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    return cell;
} 
```

错误：当我调用 [self.tableview 重新加载数据] 时，线程 1 sigabort 开启；

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]'
*** First throw call stack:
(0x13dc022 0x156dcd6 0x13c8644 0x44cea5 0x2591a8 0x204688 0x206862 0xb466d 0xb4167 0x2a42 0x9a5f 0xa2755e 0x96463e 0x95d1e7 0x95ceea 0x9ed0ad 0x3da2330 0x3da4509 0x1313803 0x1312d84 0x1312c9b 0x12c57d8 0x12c588a 0x26626 0x20ed 0x2055)
terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:13:36.213

您的应用程序崩溃，因为在`tableView:numberOfRowsInSection`

你只返回 1\. 你必须返回`[pro.matches count]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:15:30.587

在您的**if([pro.matches count] > 0)**语句中，您访问**objectAtIndex:1** - 如果匹配数组包含 1 个对象，它的索引为 0，访问索引 1 将使您的应用程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:13:26.797

利用 `return [pro.matches count]`

而不是在您的行数方法中返回 1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T15:18:12.677

在此处返回数组大小：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [pro.matches count];
} 
```

删除该`if`语句并将其替换为：

```
cell.textLabel.text = [pro.matches objectAtIndex:indexPath.row]; 
```

`indexPath.row`是当前行索引，从零开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T15:32:11.523

您是否检查过数组中的字符串是否已正确创建和初始化？我认为有几个地方需要检查：

1.  确保您的数组是好的，并且当您引用它们时，数组和数组内的对象都没有被释放。

2.  在你的 -numberOfRowsInSection 中，它应该是 return [pro.matches count]

3.  在您的 -cellForRowAtIndexPath 中，它应该是 cell.textLabel.text = [pro.matches objectAtIndex:indexPath.row];

我写了一个演示程序，试试看，你会明白的。我在 viewController.h 中创建了一个单视图应用程序：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>
{
    NSArray *list;
}

@property(nonatomic,retain) NSArray *list;
@end 
```

在 viewController.m 中，

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize list;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSArray *tempArray = [[NSArray alloc] initWithObjects:@"a",@"b", nil];
    self.list = tempArray;
    [tempArray release];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

/********************************************************************************
 ******************** UITableViewDataSource Protocol Methods ********************
 ********************************************************************************/

#pragma mark - UITableViewDataSource Protocol Functions

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //NSLog(@"%i", indexPath.row);
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // configure your cell here...
    if ([list count] >0)
    {
        cell.textLabel.text = [list objectAtIndex:indexPath.row];
    }

    [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    return cell;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return list.count;
}

/********************************************************************************
 ******************** UITableViewDelegate Protocol Methods **********************
 ********************************************************************************/

#pragma mark - UITableViewDelegate Protocol Functions

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{}
@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-27T20:50:09.830

你有没有想过这个？我遇到了同样的问题，最后我用这里发布的解决方案解决了这个问题：[https ://stackoverflow.com/a/8096988/810360](https://stackoverflow.com/a/8096988/810360)

简而言之，我只是将我的表从静态设置为动态：

![UITableView 属性](../Images/e24d262e5fd331e45e4bfbbfb05b5938.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T16:45:17.560

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"rigth not %i", [pro.matches count]);

    return  [pro.matches count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //NSLog(@"%i", indexPath.row);
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // configure your cell here...
    if ([pro.matches count] >0) {
        cell.textLabel.text = [pro.matches objectAtIndex:indexpath.row];
    }
    [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    return cell;
} 
```

如果它仍然崩溃，请在此处发布所有代码。

# asp.net - 相同的代码适用于 VS 2010，但不适用于 2005

> ID：10416515
> 
> 赞同：-2
> 
> 时间：2012-05-02T15:09:51.667
> 
> 标签：asp.net, ajax, visual-studio-2010, visual-studio-2005

现在我正在开发一个需要 Ajax 的 ASP.NET Web 应用程序。阅读[本教程](http://ajax.net-tutorials.com/basics/hello-world/)后，我尝试在 Visual Studio 2005 中运行以下代码，然后通过右键单击工具箱并单击“选择项目...”添加必要的控件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2" %>
<%@ Register Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server"/>

        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ContentTemplate>
        </asp:UpdatePanel>
    </form>
</body>
</html> 
```

* * *

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text += "<br/>" + DateTime.Now.ToString();
} 
```

但由于某种原因，该页面无法使用 Ajax。当我单击按钮时，页面刷新并显示带有更新值的标签。我找不到此代码有任何问题，因此我尝试在 Visual Studio 2010 中打开相同的项目并运行它。这次成功了！（标签用当前日期更新，没有刷新页面）

什么会阻止此代码在 Visual Studio 2005 中工作？

谢谢， 伊塔马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:13:07.057

可能是您的**UpdatePanel 的 UpdateMode**设置为`conditional`您必须指定一个`trigger`.

或者，您可以将属性定义`ChildrenAsTriggers`为`true`.

请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)

而且我在你的页面顶部没有找到任何寄存器？你有吗？如果没有尝试添加这个

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:30:01.087

我相信在 VS 2005 中对 AJAX 的支持是有限的。尝试使用`ToolkitScriptManager`，看看是否有帮助。

```
<cc1:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" EnablePartialRendering="true"></cc1:ToolkitScriptManager> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:17:30.117

4GuysFromRolla 指出 Visual Studio 2005 的目标是 2.0 .NET 应用程序，这可以解释为什么 v3.5 的 AJAX 程序集不起作用 (http://www.4guysfromrolla.com/articles/112107-1.aspx)。但查尔斯·杨反驳了这一点（http://geekswithblogs.net/cyoung/archive/2007/12/01/117279.aspx）。

# rally - 拉力赛：将相同的任务加载到多个故事中

> ID：10416518
> 
> 赞同：1
> 
> 时间：2012-05-02T15:09:59.603
> 
> 标签：rally

我的大多数用户故事最终都包含创建代码审查、执行代码审查、发布和部署等任务。有没有办法在某个地方设置这些故事，并在需要时将它们添加到新的美国？

干杯，帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:32:15.200

Rally 在任务页面上的操作下拉列表中添加了从...复制任务的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:28:28.290

一些有这种需求的客户设置“模板”故事，预先填充了必要的任务，让它们不被安排，并进行排名，使它们出现在积压工作的顶部。然后，他们在创建要编写的新故事时使用现有的 Story Deep Copy Catalog 应用程序制作模板故事的副本，然后进入 sprint。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:05:11.030

我们创建了一个通过 wsapi 加载它们的 Ruby 脚本

-查克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T03:14:29.870

编写一个应用程序来做到这一点并不难......在某个地方有一个模板故事，其中包含您的常见任务，然后您可以将其复制到选定的故事中......

# php - 对 .htaccess 感到困惑

> ID：10416519
> 
> 赞同：-2
> 
> 时间：2012-05-02T15:10:02.937
> 
> 标签：php, .htaccess, error-handling

我正在尝试使用 .htaccess 文件设置服务器错误处理。这是我的 .htaccess 文件的全部内容：

```
ErrorDocument 403 /errors.html
ErrorDocument 404 /errors.html
ErrorDocument 405 /errors.html
ErrorDocument 408 /errors.html
ErrorDocument 500 /errors.html
ErrorDocument 502 /errors.html
ErrorDocument 504 /errors.html 
```

.htaccess 文件位于根目录中。

问题是，这个文件根本不起作用。当我在 .htaccess 文件中输入 junk 时出现服务器错误，但这是我唯一一次得到结果。当我输入错误的 URL 时，它不会重定向到 errors.html 页面

我不知道这是否重要，但我使用 GoDaddy 作为我的主机，并通过他们将 404 错误处理设置为我的自定义页面。

请解释您对此可能有的任何答案或想法，因为我还没有真正找到任何可以很好地解释 .htaccess 的东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:11:53.720

要在 GoDaddy 主机上设置自定义 404 错误页面，请按照他们的说明进行操作：

[http://support.godaddy.com/help/article/1](http://support.godaddy.com/help/article/1)

1.  登录您的客户经理。
2.  单击虚拟主机。
3.  在您要使用的主机帐户旁边，单击启动。
4.  在主机控制中心的设置部分，单击 404 错误选项图标。
5.  要为您的主机帐户编辑 404 错误页面首选项，请选择错误页面选项之一。
6.  单击继续。
7.  查看并验证您的 404 错误页面首选项。如果一切正常，请单击提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:32:18.133

如果您尝试为 triadbarspecials.com（您的个人资料中列出的网站）执行此操作，它将无法正常工作。对 triadbarspecials.com 的评论显示错误“警告：mysql_num_rows()：提供的参数不是第 64 行 D:\Hosting\8274214\html\tracking\tracking.php 中的有效 MySQL 结果资源”，这表明您在Windows 主机帐户。.htaccess 文件的使用仅适用于 Go Daddy Linux 帐户。如果您愿意，您可以将您的主机迁移到 Linux 帐户。

**切换您的主机帐户操作系统**

1.  登录您的客户经理。
2.  单击虚拟主机。
3.  单击要使用的帐户旁边的选项。
4.  转到自定义选项卡。
5.  从计划菜单中，选择一个新的托管计划。

    注意：如果您没有看到计划菜单，请联系客户支持。

6.  单击保存更改或结帐，然后完成购买。

此更改可能需要长达 72 小时，具体取决于站点的大小、数据库的数量和其他可能增加迁移复杂性的因素。我们建议您在迁移期间不要尝试通过 FTP 连接到您的主机帐户。当我们完成升级后，您将收到一封电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:16:34.130

我也会 CHMOD 644，这可能是我猜的问题。

# integration - 在 Liferay 和 Alfresco 之间集成 WCM

> ID：10416522
> 
> 赞同：5
> 
> 时间：2012-05-02T15:10:09.247
> 
> 标签：integration, liferay, alfresco, wcm

我们的团队目前正在考虑集成 Liferay 6.1.0 CE 和 Alfresco 4.0 EE，并且想知道其他人如何在 Web 内容方面集成这两者。我搜索了网络，只找到案例研究或提到集成，但缺少实现细节。该死的咨询公司及其费用：P。

*   [企业内网 Liferay 或 Alfresco](https://stackoverflow.com/questions/9752235/entreprise-intranet-liferay-or-alfresco)
*   [如何显示内置文档和媒体存储库中的 Liferay 内容](https://stackoverflow.com/questions/9101704/how-do-i-display-liferay-content-from-the-built-in-documents-and-media-repositor)
*   [集成 Liferay 和 Alfresco](https://stackoverflow.com/questions/1997965/integrating-liferay-and-alfresco)
*   [https://www.liferay.com/community/forums/-/message_boards/message/12904684](https://www.liferay.com/community/forums/-/message_boards/message/12904684)

这些和其他来源似乎只利用 Alfresco 进行 DM。这是典型的方法吗？

我们遵循此设计，但它有一些注意事项，例如构建 LR OOTB 中已经可用的 portlet。

*   [http://www.cignex.com/articles/integrated-content-management-portal-based-alfresco-liferay](http://www.cignex.com/articles/integrated-content-management-portal-based-alfresco-liferay)

因此，LR 是 Web 内容的表示层并利用 portlet 支持。所有 Web 内容都将在 Alfresco 中进行管理，因为它具有更好的工作流程功能。例如，在 Liferay 中，所有 Web 内容都仅限于一个工作流程。在 Alfresco 中，用户可以根据内容类型选择不同的工作流程。我们仅限于让我们的内部用户使用单一工具来管理所有文档和内容，否则购买将失败。

障碍...

我们可以搜索 Alfresco 内容，但是将其映射回 LR 的友好 URL 的最佳方式是什么？创建一个自定义方面来在 Alfresco 中存储此引用将是维护的噩梦。

如何利用 LR 的 SEO 功能？

CMIS 集成仅适用于文档，并且在引用 Web 内容中的图像时存在问题 ( [https://www.liferay.com/community/forums/-/message_boards/message/12762396](https://www.liferay.com/community/forums/-/message_boards/message/12762396) )。

集成 LR 和 Alfresco 必须非常普遍。其他人如何克服这些类型的障碍？有没有一种简单的方法可以将内容从 Alfresco（不使用 Web 快速启动）直接发布到 Liferay？其他人是否只是强迫他们的用户同时使用这两种工具？

此外，我们的最终用户将使用 Alfresco 进行内部文档处理（在网络上不可用），这也推动了“将 Alfresco 用于一切”的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:37:35.060

To me it looks like you're asking multiple questions at once, but in the end it all comes down to the age old question of 'how do I integrate application X into my portal'. The only correct answer to this in a portal context is that you need to develop a portlet as that is the only good way to integrate an application into a portal (don't get me started about iframes and the iframe/proxy portlet...).

The next question of course is then are there any (good) Alfresco portlets available? Not really. So you'd really need to develop one, which opens a whole new can of worms: which technology to use to create the portlet (JSP, Struts, JSF, Vaadin, ...) and how to connect to Alfresco (web scripts, CMIS, ...).

Personally I have created some small portlets that connect to an Alfresco repository and I've used CMIS to do that, but in my case the Alfresco repository mostly is a 'dumb' repository, which isn't the case in your scenario. Which brings me to a question of my own: why do you want to use Liferay; why do you need it?

Liferay and Alfresco mostly have a common goal and so things that can be achieved in one product can usually also be done in the other - sometimes easy, sometimes a bit more difficult. So my recommendation would be that unless you really need a portal and a lot of the stuff Liferay offers (that isn't available in Alfresco or would be hard to develop for Alfresco) I'd stick with Alfresco as my collaboration platform and develop the necessary functionality in Alfresco Share for example as it does a lot of the stuff Liferay also does.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T05:37:10.337

我认为这个演示文稿可能对您有所帮助。

Rivet Logic 是 Alfresco 和 Liferay 的长期合作伙伴，在这两个领域都拥有丰富的经验。

[http://www.alfresco.com/events/webinars/ecm-and-portals-best-practices-integrating-alfresco-and-liferay](http://www.alfresco.com/events/webinars/ecm-and-portals-best-practices-integrating-alfresco-and-liferay)

# objective-c - 如何在情节提要上添加子视图？

> ID：10416530
> 
> 赞同：2
> 
> 时间：2012-05-02T15:10:52.943
> 
> 标签：objective-c, ios, xcode, storyboard, subview

我有一个`ViewController`并且我想在内容部分添加 3 个子视图。

在顶部我会放一些 3 行固定文本，然后是 tabBar（或段控件，我不知道什么是最好的），然后是子视图。

我想创建一些看起来像这个图像示例的东西：

[![上述问题的一个例子](../Images/c019ec932db8e5bcd325d8679d9c253f.png)](https://i.stack.imgur.com/7WkQd.jpg)

具体来说，我的问题是：

1.  如何在情节提要 3 子视图中添加 IB（带有标签和 textViews）
2.  如何在 TabBar 或段上切换它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:21:29.697

在你的头文件中创建一个 IBoutlet 并合成它。按住 conrtol 并将其拖到您的头文件中。选择 iboutlet 给它一个名字。你已准备好出发。然后使用你的插座

```
[self.myview addSubview:mysubview] 
```

[下载示例项目](http://dl.dropbox.com/u/21607631/addsubview.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T17:20:06.387

在主故事板视图对象中添加两个按钮。将按钮文本和背景颜色设置为绿色。您可以阅读 iOS Add Click Event To UIButton Swift Example 以了解如何添加按钮单击事件功能。

```
import UIKit
class ViewController: UIViewController {
       // Create the subview object.
       private let childView = UIView();
       // When click the second button will invoke this method.
       @IBAction func removeSubView(_ sender: UIButton, forEvent event: UIEvent) {
             // Remove the child view.
             childView.removeFromSuperview();
       }
       // Invoked when click the first button.
       @IBAction func addSubView(_ sender: UIButton, forEvent event: UIEvent) {
             // Add the child view.
             self.view.addSubview(childView);
       }        
       override func viewDidLoad() {
             super.viewDidLoad()
             // Set child view x y cordinate and size.
             childView.frame = CGRect(x: 80, y: 100, width: 200, height: 100)
             // Set child view background color.
             childView.backgroundColor = UIColor.green
       }
} 
```

# algorithm - 并行化串行算法

> ID：10416534
> 
> 赞同：3
> 
> 时间：2012-05-02T15:11:05.363
> 
> 标签：algorithm, mapreduce, parallel-processing, distributed-computing, text-mining

嘿，伙计们，

我正在将文本挖掘/自然语言应用程序从单核移植到 Map-Reduce 样式系统。其中一个步骤涉及类似于以下的 while 循环：

```
Queue<Element>;

while (!queue.empty()) {
    Element e = queue.next();
    Set<Element> result = calculateResultSet(e);

    if (!result.empty()) {
        queue.addAll(result);
    }
} 
```

每次迭代都取决于前一次的结果（种类）。无法确定此循环必须执行的迭代次数。

有没有一种方法可以并行化像这样的串行算法？我正在尝试考虑一种反馈机制，它能够提供自己的输入，但是如何将它并行化呢？

感谢您的任何帮助/评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:57:32.163

也许你可以分成`calculateResultSet`几个不同的函数来操作整个集合。这样，您可以为所有函数提供整个集合，并让每个函数执行单独的操作。所有函数完成后，您可以将所有结果提供给另一个函数以创建最终输出。这将允许您将数据发送到不同的节点，执行操作，最后使用分布式架构收集结果。

您还可以研究共享的概念。一个经典的例子是斐波那契数列，其中 xn 取决于 xn-1 和 xn-2。以下是使用 OpenMP 的并行化版本示例：http: [//myxman.org/dp/node/182](http://myxman.org/dp/node/182)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:37:54.067

Mstoeckli 的建议是一个很好的建议。或者，如果您的数据真的很大，也许可以分割数据集并对集合的各个部分进行循环，然后以预定的迭代次数（或在某种停止标准之后）重新组合数据.

您需要进行一些实验——即使有很多近似值，有些问题往往会很好，有些则根本不行。

# c# - Json Web 服务 - NULL 作为值

> ID：10416542
> 
> 赞同：0
> 
> 时间：2012-05-02T15:11:23.123
> 
> 标签：c#, json, web-services

我有具有以下定义的 ac# web 服务：

```
 [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "BCryptLogin")]
    LoginResponse BCryptLogin(LoginData logindata); 
```

实际功能是

```
 public LoginResponse BCryptLogin(LoginData logindata)
    {
        string login = logindata.login;
        string password = logindata.password;

        // code be here
    } 
```

**当尝试访问“logindata.login”时，我得到一个 NullReferenceException：**

```
System.NullReferenceException was unhandled by user code
Message=Object reference not set to an instance of an object.
Source=LoginService
StackTrace:
   at LoginService.LoginService.BCryptLogin(LoginData logindata) in C:\services\LoginService\LoginService\LoginService.svc.cs:line 74
   at SyncInvokeBCryptLogin(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 
```

这是我第一次尝试 POST 网络服务，但我很无知：S 出了什么问题？

我的测试请求如下所示：

```
{"login":"username","password":"password"} 
```

（也试过）

```
{"LoginData":{"login":"username","password":"password"}} 
```

LoginData 对象的定义如下：

```
[DataContract]
public class LoginData
{
    [DataMember]
    public string login { get; set; }
    [DataMember]
    public string password { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:36:19.937

您的函数需要一个对象，但您传递了两个值。

```
{"login":"username","password":"password"} 
```

您需要在 JavaScript 中创建一个对象并将其传递给您的函数。

```
var LoginData = {};
LoginData.login = "username";
LoginData.password = "password"; 
```

然后使用以下语法将此对象传递给您的 JSON 请求中的方法。

```
var jsonRequest = {logindata: LoginData}; 
```

**注意：** *方法“logindata”上的参数名称在 JSON 调用中必须相同，区分大小写。*

我建议您使用[JSON.org lib](https://raw.github.com/douglascrockford/JSON-js/master/json2.js)将您的对象转换为有效的 JSON 请求。

```
JSON.stringify(jsonRequest); 
```

# asp-classic - 在经典 ASP 中写出文件/页面名称

> ID：10416546
> 
> 赞同：2
> 
> 时间：2012-05-02T15:11:28.963
> 
> 标签：asp-classic

假设我有一个这样的 URL：[http ://website.com/folder/myfile.asp](http://website.com/folder/myfile.asp)

如何制作只写出的脚本：“myfile.asp”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T08:29:13.090

这是所需的代码。

```
<%

     Dim arrPath: arrPath = Split(Request.ServerVariables("SCRIPT_NAME"), "/")

     Dim fileName: fileName = arrPath(UBound(arrPath))
%> 
```

获取当前脚本 URL 路径中的元素数组，然后选择该数组中的最后一个元素，该元素将作为文件名。

现在，如果您希望在 ASP/VBScript 中做任何重要的工作，我建议您在这里花一些时间阅读[与VBScript 相关的](http://www.w3schools.com/Vbscript/default.asp)*所有*内容。那里没有大量的信息，但花费的时间会很快收回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:38:18.610

用这个：

```
<% = Request.ServerVariables("SCRIPT_NAME") %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:42:28.997

这里给你一个简单的功能

```
<%

 Function getFileName(lsPath)

  ' Obtain the virtual file path '
  lsPath = Request.ServerVariables("SCRIPT_NAME")

  ' Split the path along the /s. This creates a one-dimensional array '

  arPath = Split(lsPath, "/")

  ' The last item in the array contains the file name '

  GetFileName =arPath(UBound(arPath,1))

 End Function

%>

<%=getFileName(Request.ServerVariables("SCRIPT_NAME"))%> 
```

# java - 如何在 Java 中实现哈希函数 `h(k) = (A·k mod 2^w) >> (w – r)`

> ID：10416550
> 
> 赞同：3
> 
> 时间：2012-05-02T15:11:35.140
> 
> 标签：java, hash-function

重要的提醒：

这不是一个供人们向我发表他们对哈希的看法的讨论帖。我只需要知道如何使给定的函数在 java 中工作——最好有一个例子。

问题：

为了在即将到来的面试中磨练我对哈希函数的理解，我观看了麻省理工学院计算机科学教授的两场免费讲座 (http://videolectures.net/mit6046jf05_leiserson_lec08/)。所以讲座结束后，我尝试在java中实现以下哈希函数。

```
h(k) = (A·k mod 2^w) >> (w – r)
WHERE
r: m, the size of the array, is a power of 2 such that m=2^r
w: the computer has w-bit words, such as 32-bit or 64-bit computer
k: the value I am to find a key for
A: a random odd number (prime would be great) between 2^(w-1) and 2^w 
```

我认为这在java中很容易实现。但是当我在 w=32 处执行 2^w 时，我在 Java 中得到不准确的结果。在现实生活中`2^32 = 4294967296`但不是在 java 中，它会将结果截断为`2^31 - 1`or `2147483647`。

有谁知道如何解决这个问题以便在 Java 中实现该功能？

编辑：

我看到很多回复都集中在 32 上。如果我的电脑是 64 位的怎么办？`w = 32`因为我使用的是 Java ，所以我被设置困住了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:56:06.837

有些术语是多余的，因为 Java 无论如何都假定了这种行为。

```
A·k mod 2^w 
```

在 Java 中，整数乘法会溢出，因此会进行 mod `2^w`（带符号）。如果您随后移动至少一位，它有符号的事实并不重要。

Shift of与 Java`(w - r)`中的 shift of 相同`-r`（类型隐含 w）

```
private static final int K_PRIME = (int) 2999999929L;

public static int hash(int a, int r) {
   // return (a * K_PRIME % (2^32)) >>> (32 - r);
   return (a * K_PRIME) >>> -r;
} 
```

对于 64 位

```
private static final long K_PRIME = new BigInteger("9876534021204356789").longValue();

public static long hash(long a, int r) {
    // return (a * K_PRIME % (2^64)) >>> (64 - r);
    return (a * K_PRIME) >>> -r;
} 
```

* * *

我写了这个例子来说明你可以在 BigInteger 中做同样的事情，以及为什么你不这样做。;)

```
public static final BigInteger BI_K_PRIME = new BigInteger("9876534021204356789");
private static long K_PRIME = BI_K_PRIME.longValue();

public static long hash(long a, int r) {
    // return (a * K_PRIME % (2^64)) >>> (64 - r);
    return (a * K_PRIME) >>> -r;
}

public static long biHash(long a, int r) {
    return BigInteger.valueOf(a).multiply(BI_K_PRIME).mod(BigInteger.valueOf(2).pow(64)).shiftRight(64 - r).longValue();
}

public static void main(String... args) {
    Random rand = new Random();
    for (int i = 0; i < 10000; i++) {
        long a = rand.nextLong();
        for (int r = 1; r < 64; r++) {
            long h1 = hash(a, r);
            long h2 = biHash(a, r);
            if (h1 != h2)
                throw new AssertionError("Expected " + h2 + " but got " + h1);
        }
    }

    int runs = 1000000;
    long start1 = System.nanoTime();
    for (int i = 0; i < runs; i++)
        hash(i, i & 63);
    long time1 = System.nanoTime() - start1;

    long start2 = System.nanoTime();
    for (int i = 0; i < runs; i++)
        biHash(i, i & 63);
    long time2 = System.nanoTime() - start2;
    System.out.printf("hash with long took an average of %,d ns, " +
            "hash with BigInteger took an average of %,d ns%n",
            time1 / runs, time2 / runs);
} 
```

印刷

```
hash with long took an average of 3 ns, \
    hash with BigInteger took an average of 905 ns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:17:52.193

也`int`不会`long`足够大以容纳您在 2^(w-1) 中需要的所有值。你最好配上[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:25:44.213

让我们看看`number % 2^32`实际做了什么：它得到除以 2^32 的余数。如果你有一个从 0 到 2^32 的范围，计算机会自动为你做模，因为它会丢弃 2^32 以上的所有内容。

让我们取 8 而不是 32，并切换到二进制数系统：

```
 1000 1000 % 1 0000 0000 = 1000 1000
1 1000 1000 % 1 0000 0000 = 1000 1000 
```

所以你应该做的是将数量限制在计算机的范围内。如果你会使用例如 c++，它就像将值声明为一样简单`unsigned int`。上面第二个示例中的第一个`1`将被截断，因为它不适合变量。

在java中，你没有无符号整数。如果您计算`A * k`并导致溢出，您可能会得到一个有符号值。但是，由于您接下来要做的唯一事情就是进行右移，因此这无关紧要。

所以我的建议是简单地放弃模计算。试试吧，我不太确定它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:15:09.857

Java原语`int`的最小值为 -2,147,483,648，最大值为 2,147,483,647

查看此[链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)以获取有关原语的详细信息。

我建议使用 a`long`而不是`int`.

# javascript - 通过 javascript 从浏览器获取 Olson 时区 ID 信息

> ID：10416552
> 
> 赞同：4
> 
> 时间：2012-05-02T15:11:39.927
> 
> 标签：javascript, timezone

> **可能重复：**
> [Javascript/PHP 和时区](https://stackoverflow.com/questions/2319451/javascript-php-and-timezones)

可以从客户端机器上的 javascript 获取 Olson 时区 ID，例如（美国/纽约）。我知道 PHP 可以通过时区对象来做到这一点，就像这样。$timezone->getLocation(); JS 是否存在类似的功能？

我知道您可以获取客户端的时区偏移量，如下所示： var curdate = new Date(); var offset = curdate.getTimeZoneOffset();

但我需要 Olson ID 提供的更详细的信息。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:05:01.003

您不能直接在 JavaScript 中访问时区。但是，您可以测量在几个不同的特定日期报告的偏移量，通过将常规时间和夏令时时间与区域数据库进行比较，从而推断出正在使用的确切时区。有[一个 jsTimezoneDetect 库](https://bitbucket.org/pellepim/jstimezonedetect)可以为您完成大部分工作。

# c# - 字符串格式货币

> ID：10416553
> 
> 赞同：60
> 
> 时间：2012-05-02T15:11:41.393
> 
> 标签：c#, .net, globalization

我有这条线

```
@String.Format("{0:C}", @price) 
```

在我看来。我希望它在价格前显示一个美元符号，而是显示一个英镑符号。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-02T15:15:20.283

我强烈怀疑问题仅仅是处理请求的线程的当前文化设置不正确。

您可以为整个请求设置它，也可以在格式化时指定文化。无论哪种方式，我都建议*不要*使用`string.Format`复合格式，除非你真的有不止一个东西要格式化（或更广泛的信息）。相反，我会使用：

```
@price.ToString("C", culture) 
```

它只是让它更简单一些。

编辑：鉴于您的评论，听起来您可能很想使用英国文化，*而不管*用户的文化如何。再说一遍，要么将 UK 文化设置为整个请求的线程文化，要么可能引入您自己的带有“常量”的助手类：

```
public static class Cultures
{
    public static readonly CultureInfo UnitedKingdom = 
        CultureInfo.GetCultureInfo("en-GB");
} 
```

然后：

```
@price.ToString("C", Cultures.UnitedKingdom) 
```

根据我的经验，拥有这样的“命名”文化集会使使用它的代码更易于阅读，并且您不需要在多个位置正确获取字符串。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-03T09:36:09.560

正如其他人所说，您可以通过 IFormatProvider 实现这一点。但请记住，货币格式远远超出了货币符号。例如，在美国，格式正确的价格可能是“$ 12.50”，但在法国，这将写成“12,50 $”（小数点与货币符号的位置不同）。您不希望仅仅为了更改货币符号而丢失这种适合文化的格式。好消息是您不必这样做，正如这段代码所示：

```
var cultureInfo = Thread.CurrentThread.CurrentCulture;   // You can also hardcode the culture, e.g. var cultureInfo = new CultureInfo("fr-FR"), but then you lose culture-specific formatting such as decimal point (. or ,) or the position of the currency symbol (before or after)
var numberFormatInfo = (NumberFormatInfo)cultureInfo.NumberFormat.Clone();
numberFormatInfo.CurrencySymbol = "€"; // Replace with "$" or "£" or whatever you need

var price = 12.3m;
var formattedPrice = price.ToString("C", numberFormatInfo); // Output: "€ 12.30" if the CurrentCulture is "en-US", "12,30 €" if the CurrentCulture is "fr-FR". 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-05-02T15:13:53.867

您需要提供一个 IFormatProvider：

```
@String.Format(new CultureInfo("en-US"), "{0:C}", @price) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-09T11:04:50.027

我个人反对使用特定于文化的代码，我建议这样做：

```
@String.Format(CultureInfo.CurrentCulture, "{0:C}", @price) 
```

并在您的 web.config 中执行以下操作：

```
<system.web>
    <globalization culture="en-GB" uiCulture="en-US" />
</system.web> 
```

附加信息： [https ://msdn.microsoft.com/en-us/library/syy068tk(v=vs.90).aspx](https://msdn.microsoft.com/en-us/library/syy068tk(v=vs.90).aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-25T09:19:52.470

对于剃须刀，您可以使用：文化、价值

```
@String.Format(new CultureInfo("sv-SE"), @Model.value) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-25T10:32:22.097

```
decimal value = 0.00M;
value = Convert.ToDecimal(12345.12345);
Console.WriteLine(".ToString(\"C\") Formates With Currency $ Sign");
Console.WriteLine(value.ToString("C"));
//OutPut : $12345.12
Console.WriteLine(value.ToString("C1"));
//OutPut : $12345.1
Console.WriteLine(value.ToString("C2"));
//OutPut : $12345.12
Console.WriteLine(value.ToString("C3"));
//OutPut : $12345.123
Console.WriteLine(value.ToString("C4"));
//OutPut : $12345.1234
Console.WriteLine(value.ToString("C5"));
//OutPut : $12345.12345
Console.WriteLine(value.ToString("C6"));
//OutPut : $12345.123450
Console.WriteLine();
Console.WriteLine(".ToString(\"F\") Formates With out Currency Sign");
Console.WriteLine(value.ToString("F"));
//OutPut : 12345.12
Console.WriteLine(value.ToString("F1"));
//OutPut : 12345.1
Console.WriteLine(value.ToString("F2"));
//OutPut : 12345.12
Console.WriteLine(value.ToString("F3"));
//OutPut : 12345.123
Console.WriteLine(value.ToString("F4"));
//OutPut : 12345.1234
Console.WriteLine(value.ToString("F5"));
//OutPut : 12345.12345
Console.WriteLine(value.ToString("F6"));
//OutPut : 12345.123450
Console.Read(); 
```

输出控制台屏幕：
[![](../Images/8995852c73b9660605949808a3a8c6cc.png)](https://i.stack.imgur.com/SWpro.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-10T00:19:36.457

使用它就可以了，而且很简单：

```
 var price=22.5m;
  Console.WriteLine(
     "the price: {0}",price.ToString("C", new System.Globalization.CultureInfo("en-US"))); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-30T12:00:57.713

对于那些使用 C# 6.0 字符串插值语法的人：例如：`$"The price is {price:C}"`，[文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated#implicit-conversions-and-specifying-iformatprovider-implementation|)建议了几种应用不同 a 的方法`CultureInfo`。

我已经修改了示例以使用货币：

```
decimal price = 12345.67M;
FormattableString message = $"The price is {price:C}";

System.Globalization.CultureInfo.CurrentCulture = System.Globalization.CultureInfo.GetCultureInfo("nl-NL");
string messageInCurrentCulture = message.ToString();

var specificCulture = System.Globalization.CultureInfo.GetCultureInfo("en-IN");
string messageInSpecificCulture = message.ToString(specificCulture);

string messageInInvariantCulture = FormattableString.Invariant(message);

Console.WriteLine($"{System.Globalization.CultureInfo.CurrentCulture,-10} {messageInCurrentCulture}");
Console.WriteLine($"{specificCulture,-10} {messageInSpecificCulture}");
Console.WriteLine($"{"Invariant",-10} {messageInInvariantCulture}");
// Expected output is:
// nl-NL      The price is € 12.345,67
// en-IN      The price is ₹ 12,345.67
// Invariant  The price is ¤12,345.67 
```

# javascript - 做这个正则表达式替换的好方法

> ID：10416555
> 
> 赞同：1
> 
> 时间：2012-05-02T15:11:51.070
> 
> 标签：javascript, regex

我正在编写一个 javascript 函数，它接受一个正则表达式和一些元素，它将正则表达式与 name 属性相匹配。

假设我通过了这个正则表达式

```
/cmw_step_attributes\]\[\d*\]/ 
```

和一个结构像这样的字符串

```
"foo[bar][]chicken[123][cmw_step_attributes][456][name]" 
```

所有数字都可能不同或丢失。我想将正则表达式与字符串进行匹配，以便将 456 换成另一个数字（会有所不同），例如 789。所以，我想结束

```
"foo[bar][]chicken[123][cmw_step_attributes][789][name]" 
```

正则表达式将匹配字符串，但我不能将整个正则表达式换成 789，因为这会消除“[cmw_step_attributes][”位。必须有一种干净简单的方法来做到这一点，但我无法理解它。有任何想法吗？

谢谢，最大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:14:49.727

捕获第一部分并将其放回字符串中。

```
.replace(/(cmw_step_attributes\]\[)\d*/, '$1789');
// note I removed the closing ] from the end - quantifiers are greedy so all numbers are selected
// alternatively:
.replace(/cmw_step_attributes\]\[\d*\]/, 'cmw_step_attributes][789]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:15:02.830

要么从字面上重写在替换字符串中必须保持相同的部分，要么将其放在捕获括号中并在替换中引用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:15:12.840

见答案：[正则表达式匹配外括号](https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets)。

> 正则表达式对于这项工作来说是错误的工具，因为您正在处理嵌套结构，即递归。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T15:15:47.993

你有没有尝试过：

```
var str = 'foo[bar][]chicken[123][cmw_step_attributes][456][name]';
str.replace(/cmw_step_attributes\]\[\d*?\]/gi, 'cmw_step_attributes][XXX]'); 
```

# ruby - Windows 网络共享上的 Ruby Dir.glob

> ID：10416563
> 
> 赞同：3
> 
> 时间：2012-05-02T15:12:08.543
> 
> 标签：ruby, windows, glob, dir

我想在 Windows 机器上使用 Dir.glob 获得一个简单的文件列表，其中过滤器类似于`//hostname/share/folder/*.zip`.

唯一适用于 windows 上 glob 的是本地路径：`c:/folder/*.zip`

我尝试了不同的方法，但到目前为止没有运气：

```
\\\\hostname\\share\\folder\\*.zip
\\hostname\share\folder\*.zip
//hostname/share/folder/*.zip 
z:/folder/*.zip    # z: would be a network drive 
```

我正在使用 Ruby 1.8.7-p352 并在不同的 Windows 平台上进行了尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T18:35:01.210

这是 Windows7 和 Ruby 1.9.3 上的工作示例

```
def get_files(path)
  Dir.glob("#{path}/**/*").each {|e|puts e}
end

list_files("//USER-PC/SHARE/MAP") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T18:26:02.573

至少这是可能的，我过去做到了。

为了继续`c:\usr\*`我`hostname`使用：

```
Dir['\\\\hostname/c$/usr/*'] 
```

的组合

*   `'`和四个`\`
*   `/`作为分隔符（不适用于主机）
*   `c$`反而`c:`

对我的成功很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:23:40.293

感谢所有的投入。很遗憾地告诉你，这个问题与 ruby​​ 的关系不如 Windows 问题。通过 ruby​​ 控制台运行时，一切正常，问题是我安装了一个使用本地系统帐户的 mongrel 服务，这似乎无法说服正确连接到网络共享。它现在可以直接使用普通帐户。

# ms-access - 检测当前记录是否在访问绑定表单上被删除

> ID：10416567
> 
> 赞同：4
> 
> 时间：2012-05-02T15:12:11.027
> 
> 标签：ms-access, vba

如果用户 #1 删除了 Access 2007 数据库（SQL Server ODBC 链接表）中的一条记录，其他用户可能会在该记录中显示 #Deleted#（在数据表视图表单上）。在某些情况下，这可能会导致问题，因为我有在表单的当前事件上运行的代码，并且只是假设存在有效记录（或新记录）。

有没有可靠的方法来检测当前记录是否已被删除？我想将它包装在这样的函数中：

```
Public Function IsRecordDeleted(ByRef r As DAO.Recordset)
   'what goes here?
End Function 
```

我确实在 MSDN 的 DAO 参考中找到了 RecordStatus 属性，但该属性似乎仅在 RecordSet 配置为批量更新时才有效。当我尝试检查它的值时，我得到：运行时错误 3251 - 这种类型的对象不支持操作。

实际上，我在一两年前就在另一个论坛上发布过同样的问题。给出的建议不起作用：

*   计数（）
*   记录集的书签和 NoMatch
*   检查 PK 或 FK 字段中的#Deleted

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:27:18.210

对我来说，这看起来更像是一个通用的应用程序设计疏忽，而不是一个具有简单解决方法的简单问题。

如果您对重要位置的记录可用性做出假设，那么您必须考虑将删除记录作为数据的主要（和有效）状态的可能性。

有可能——但我认为不太可能——你会找到一种解决方法，但我认为你应该仔细看看你的整体设计本身。

解决此问题的一些方法可能对您的情况有用，也可能没有用，具体取决于用户包含和访问您的数据的方式：

*   如果您不能确定它们是否存在，请不要依赖记录的存在。
    基本上，重新设计您的假设并修改您现有的代码，以避免依赖于强制存在的记录。

*   职责分离
    不允许不同用户对相同数据拥有相同的创建/编辑/删除权限。例如，采购订单应该属于创建它的用户。不允许其他用户单独删除该订单或其商品。

*   不要实际删除实体，只允许用户将其标记为“已取消”或“已过时”并出于历史原因将其保留在数据库中（或稍后清除它们）。

*   或者，实际上不要删除记录，而是添加一个隐藏的布尔字段以在用户想要删除它们时将它们标记为“已删除”。然后你可以做一些清理工作，比如说每晚，然后实际删除标记的记录。
    当然，您必须从您的查询和表单等中排除这些“已删除”的记录，但将保留数据完整性。

*   将报告和记录列表设为只读，这样用户就不能随便在任何地方删除它们。例如，如果用户可以查看采购订单项目，则不允许他们删除该数据，除非他们实际打开采购订单详细信息表单。

*   在本地缓存记录，以便如果它们从后端数据库中消失，它们仍会显示给查看它们的用户，直到他们刷新列表。
    这对于只读报告通常很有用：将查询结果加载到本地表中并绑定该表，而不是使用实时数据进行查询。
    正在查看的数据可能有点陈旧，因为它不会实时更新（因为它是在本地缓存的），但对于报告，它通常没问题（只需在表单上提供一个“刷新”按钮以允许用户强制刷新） .

*   尝试各种锁定选项（请参阅[数据库选项](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HA010341491&lcid=1033&NS=MSACCESS&Version=14&tl=2&queryid=&respos=1&HelpID=134021#_Toc260343628)和[表单记录锁定](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HV080201782&lcid=1033&NS=MSACCESS%2EDEV&Version=14&tl=2&CTT=4)）以在其他人访问记录时禁止删除记录。

*   管理您自己的锁定方案。
    作为最后的手段，您可以在“LockingStatus”表中记录当前正在被其他人查看或编辑的 ID 和记录。例如：

    ```
    Table: LockStatus
    Field: LockNature:   Whether the record is being Edited or Viewed
    Field: LockedTable:  Name of the table of the record being locked
    Field: LockedRecord: ID of the record being locked
    Field: User:         Name of the user holding the lock
    Field: LockTime:     DateTime of the lock creation, so you can detect 
                         and remove stale locks 
    ```

    当用户查看或编辑记录时，首先检查表中是否存在该记录的现有条目。如果有，则告诉用户他们无法执行该操作，因为其他人正在查看数据。如果没有现有条目，则添加一个，允许编辑，并在编辑完成后删除记录。
    这充满了复杂性，因为您需要跟踪用户何时移动到另一条记录，以便您可以解锁前一条记录，如果您不小心，您最终可能会遇到很多过时的锁，但之前已经完成.

*   如果您仍然真的想规避删除记录问题，请查看在您的 VBA 代码中，当您从另一个位置删除记录时出现错误 3167“记录已删除”。
    一旦你知道它在你的代码中出现的位置，捕获那个错误`On Error 3167 Goto YourErrHandler`以优雅地处理那个特定的错误（这实际上取决于你的表单是如何设计的以及你如何使用你的数据）。

*   另一种选择是使用全局错误处理程序进行访问。
    我只知道[vbWatchdog](http://www.everythingaccess.com/vbwatchdog.htm)。它不是免费的，但效果非常好，并且很容易集成到应用程序中。
    此加载项集成在您的应用程序中，无需为每个用户单独安装。设置完成后，您的应用程序将能够在高级别捕获所有错误。因此，您将能够捕获“记录已删除”错误并在一处处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T02:02:19.963

我通过 Form_Current 事件中的代码遇到了同样的事情，并在这里结束。

错误处理是最好的（也是唯一的？）方法。为了我自己的目的，我只是在当前事件中运行了一些简单的控件更新，所以我编写了错误处理程序来从我得到的错误中恢复

```
Private Sub Form_Current()
    On Error GoTo handler

    'do intended things here, e.g. attempt to access the value
    'of a control even though the record may be deleted  

    Exit Sub

  handler:
    If Err.Number = 438 Or Err.Number = 13 Then 
        'type mismatch, probably due to deleted record, skip it
        Resume Next
    ElseIf Err.Number = 3167 Then 
        'record is deleted, skip it
        Resume Next
    Else
        Err.Raise Err.Number, Err.Source, Err.Description
    End If
End Sub 
```

我没有可靠地得到 3167（记录已删除），但是在尝试访问值属性时，我似乎只得到了上面困住的 3 个错误。

如果您当前的事件较长，或者运行这样的代码有风险，您可以使用类似的技术，但故意在方法开始时引发错误（dummyvalue = SomeBoundControl.Value 应该可以解决问题），然后更改“将错误处理程序中的 Next 恢复到“Exit Sub”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T23:19:39.250

您可以检查一个**非空白字段以确定**该记录是否仍然存在。

我使用日期更新或创建日期字段，一旦第一次打开表单，默认值 =Now() 就会自动填充该字段。

由于如果记录已被删除，它的值似乎会变为空字符串，我可以触发

```
If Me.DateUpdated = "" Then 
```

在表单本身上（例如跳过关闭过程中的操作）。此检查也可能适用于其他形式。

# jquery - jQuery 模板插件 / 不显眼的验证

> ID：10416568
> 
> 赞同：-1
> 
> 时间：2012-05-02T15:12:13.007
> 
> 标签：jquery, asp.net-mvc-3, jquery-plugins

我正在开发一个动态表单，用户可以在其中单击一个按钮，然后使用 jQuery 模板插件将一组新的控件添加到表单中。下面的代码：

```
@using (Html.BeginForm("Index2", "Home", FormMethod.Post, new { id = "EditForm" }))
{ 
@Html.ValidationSummary(false)

@Html.LabelFor(m => m.Title)
@Html.TextBoxFor(m => m.Title)

<p>
    <input type="button" name="Add Author", value="Add Author" />
</p>

<div id="myElements">
@for (int i = 0; i < @Model.Authors.Count; i++)
{
    <div class="myElement">
        @Html.LabelFor(m => m.Authors[i].Id)  
        @Html.TextBoxFor(m => m.Authors[i].Id)
    </div>
    <div class="myElement">
        @Html.LabelFor(m => m.Authors[i].Name)  
        @Html.TextBoxFor(m => m.Authors[i].Name)
    </div>
    <br style="clear:both;" />
}
</div>

<br />
<input type="submit" name="Submit" value="Submit" />
}

<script id="AuthorTemplate" type="text/x-jquery-tmpl">
<div class="myElement">
    <input 
            data-val="true" 
            data-val-number="The field Author Id must be a number." 
            data-val-required="Author Id is required!" id="Authors_${value}__Id" 
            name="Authors[${value}].Id" 
            type="text" value="" class="valid" />
</div>
<div class="myElement">
    <input 
            data-val="true" 
            data-val-required="Author Name is required!" 
            id="Authors_${value}__Name" 
            name="Authors[${value}].Name" 
            type="text" value="" />
</div>
<br style="clear:both;" />
</script>

<script type="text/javascript">
$(document).ready(function () {
    $('input[name="Add Author"]').click(function (evt) {
        evt.preventDefault();
        $('#AuthorTemplate').tmpl({ value: $('input[name^="Authors"]').length / 2 }).appendTo('#myElements');

// Re-register unobtrusive validation
    $.validator.unobtrusive.parse('#myElements');
    });
});
</script> 
```

该脚本工作正常，但是，尽管我重新初始化了不显眼的验证，但表单并未验证新添加的值。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:40:09.180

我认为你需要改变

```
$.validator.unobtrusive.parse('#myElements'); 
```

到

```
$.validator.unobtrusive.parse('.myElements'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:05:17.773

其实，正确的做法是：

```
$.validator.unobtrusive.parse('#myElements'); 
```

然而，以上还不够。我必须使用以下插件来确保 jQuery Validation 插件现在知道新的规则/消息：

[http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/](http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/)

祝你好运，

# java - 将 jconsole 与 ssl 一起使用时握手失败

> ID：10416571
> 
> 赞同：3
> 
> 时间：2012-05-02T15:12:24.863
> 
> 标签：java, ssl, jconsole

我正在尝试使用 jconsole 远程连接到应用程序。如果没有 SSL，我的配置可以正常工作。

我在要访问的服务器上创建了一个公钥：

```
sudo keytool -keystore broker.ks -alias broker -genkey -keyalg RSA 
```

然后我导出了证书：

```
sudo keytool -export -alias broker -keystore broker.ks -file broker_cert.crt 
```

客户端我创建一个信任库并导入证书：

```
-import -alias broker -keystore broker.ts -file broker_cert.crt 
```

然后我启动我的代理服务器端，如下所示：

```
java \
-Xms1024M \
-Xmx1024M \
-Dcom.sun.management.jmxremote.port=1099 \
-Dcom.sun.management.jmxremote.password.file=/etc/activemq/jmx.password \
-Dcom.sun.management.jmxremote.access.file=/etc/activemq/jmx.access \
-Dcom.sun.management.jmxremote \
-jar broker.jar \
-Djavax.net.ssl.keyStore=/etc/activemq/broker.ks \
-Djavax.net.ssl.keyStorePassword=password 
```

正如我所提到的，密码配置可以正常工作，因为我可以在将 jmxremote.ssl 设置为 false 时进行连接。

客户端然后我像这样启动 jconsole：

```
jconsole -J-Djavax.net.ssl.trustStore=/etc/activemq/broker.ts -J-Djavax.net.ssl.trustStorePassword=password -J-Djava.util.logging.config.file=/etc/activemq/logging.properties 
```

尝试连接到服务器时，日志给我以下错误：

```
failed to connect: java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

为了详细说明这一点，我的证书肯定设置正确。我可以在 /etc/activemq 中执行的服务器端：

```
keytool -list -keystore broker.ks 
```

并收到：

```
Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

broker, 01-May-2012, PrivateKeyEntry, 
Certificate fingerprint (MD5): 30:55:60:4A:B5:85:D0:C5:2C:E9:DD:AD:1E:92:BE:6E 
```

/etc/activemq 中的客户端我可以输入：

```
keytool -list -keystore broker.ks 
```

并收到：

```
Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

broker, May 3, 2012, trustedCertEntry,
Certificate fingerprint (MD5): 30:55:60:4A:B5:85:D0:C5:2C:E9:DD:AD:1E:92:BE:6E 
```

如您所见，证书指纹匹配。更令人沮丧的是，当我启动 jconsole 时，我可以输入一个完全虚假的路径，`-J-Djavax.net.ssl.trustStore=<boguspathhere>`但我收到的错误与我输入正确路径时完全相同 `/etc/activemq/broker.ts`- 我希望日志至少能告诉我它是否有找到信任商店与否！而不是仅仅给予

```
failed to connect: java.rmi.ConnectIOException: error during JRMP connection     establishment; nested exception is: 
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

呸呸呸

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:19:43.077

好吧，这个谜团已经解决了，而我一直是愚蠢的：

```
java \
-Xms1024M \
-Xmx1024M \
-Dcom.sun.management.jmxremote.port=1099 \
-Dcom.sun.management.jmxremote.password.file=/etc/activemq/jmx.password \
-Dcom.sun.management.jmxremote.access.file=/etc/activemq/jmx.access \
-Dcom.sun.management.jmxremote \
-jar broker.jar \
-Djavax.net.ssl.keyStore=/etc/activemq/broker.ks \
-Djavax.net.ssl.keyStorePassword=password 
```

最后两个系统属性参数被忽略，因为 -jar broker.jar 在它们之前运行。为了解决这个问题，我需要做的就是写：

```
java \
-Xms1024M \
-Xmx1024M \
-Dcom.sun.management.jmxremote.port=1099 \
-Dcom.sun.management.jmxremote.password.file=/etc/activemq/jmx.password \
-Dcom.sun.management.jmxremote.access.file=/etc/activemq/jmx.access \
-Dcom.sun.management.jmxremote \
-Djavax.net.ssl.keyStore=/etc/activemq/broker.ks \
-Djavax.net.ssl.keyStorePassword=password \
-jar broker.jar 
```

嗬！

# c# - 多个服务器中的事件和共享类

> ID：10416575
> 
> 赞同：1
> 
> 时间：2012-05-02T15:12:46.947
> 
> 标签：c#, events, architecture

我计划在游戏服务器项目中使用事件，我想知道最好的设计是什么。由于我找不到任何适合我的问题的好例子，所以我在这里问。

我习惯的服务器项目结构几乎是这样的：我有一个登录服务器、一个世界/频道服务器和一个共享库，用于服务器和客户端类之类的东西，它们都被两者使用。例如，所有通信代码都在这里。服务器派生自服务器类。客户端类是套接字的包装器。解析传入的数据，并将其传递给数据包处理程序方法。

现在我想添加一个事件，例如，如果客户端连接所有客户端都会收到通知。不像我以前那样遍历所有连接的客户端，连接的客户端必须订阅一个事件处理程序，该处理程序是从连接的客户端触发的。

我们终于解决了我的标准设计问题，我在哪里放置回调？通常我必须在客户端类中创建一个新方法，如 OnClientConnects 或其他东西，以用于事件。但是我的服务器使用相同的客户端类，并且将它们的事件处理程序放在那里似乎很脏。我不能把它放在其他地方，因为该方法需要来自订阅客户端的信息，比如套接字。

我想到的唯一其他解决方案是针对不同服务器的单独的客户端类，或者更确切地说是从它派生的类。虽然这有点棘手，所有网络代码都在共享类中，因为我必须在其中获取自定义客户端类，但应该可以通过重写方法以某种方式实现。我想这就是我能做的。

不过，这一切感觉有点不对劲，我想知道这是否真的是一个可以接受的设计，或者是否有更好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:28:54.597

在没有白板一堆问题的情况下获得清晰的图片有点棘手，但如果有任何帮助......

通常我会有一个在客户端和服务器之间共享的网络库。还有某种`Application`或`Framework`类，可能包含客户端和服务器共有的东西，包括配置读取、各种子系统（日志记录、线程等）的初始化。

然后，是的，我*会对*客户端和各种服务器类型进行派生（可能具有用于各种服务器的中间类，因为通常存在服务器共有但与客户端分开的功能）。

为了解决您的具体问题，我认为让客户端和服务器都可以使用该回调很好。当客户端连接时，服务器想要做某事是很合理的。即使你现在不需要它，我可以想象你将来会。至少，服务器可以将事件记录到日志文件中。但关键是回调的处理属于 client/genericServer/loginServer/worldServer 派生的应用程序类。

# java - Java 正态分布，平均差异小于 0，标准偏差小于 1

> ID：10416578
> 
> 赞同：1
> 
> 时间：2012-05-02T15:12:55.713
> 
> 标签：java, normal-distribution

我的教授正在模拟客户到银行。它表示客户遵循具有 3.5 均值和 1.3 标准偏差的正态分布到达。

问题是我在理解为什么使用此代码时遇到了一些困难。我相信他提供的代码是接收流、均值和标准来生成随机数

## 代码

```
public class Random {

    private static double second=0;

    static double normal(int stream, double mean, double std){
        double v1=0, v2=0, y1, y2, x1, x2, w=2;

        if (second!=0 ){
            return second;
        }

        while(w>1){
            v1=2*RandomGenerator.rand(stream)-1;
            v2=2*RandomGenerator.rand(stream)-1;
            w=Math.pow(v1,2)+Math.pow(v2,2);
        }

        y1=v1*Math.pow((-2*Math.log(w))/w, 0.5);
        y2=v2*Math.pow((-2*Math.log(w))/w, 0.5);
        x1=mean+y1*std;
        x2=mean+y2*std;
        second=x2;
        return x1;
    }

} 
```

我的数学课是很多年前的，所以理解这个正态分布有点困难，在网上搜索了如何计算正态分布后，我找不到任何类似于给定代码的公式。

所以，这些是我的问题。

1.  做什么`second`？是某种保护吗？
2.  这段代码如何使用正态分布？好像想不通...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:27:59.167

我将按相反的顺序回答问题。该方法的核心部分是一种标准技术，用于将从 [0, 1] 上的均匀分布中抽取的两个随机变量转换为从具有给定均值和标准差的正态分布中抽取的两个随机变量。（称为[Box-Muller 变换](http://en.wikipedia.org/wiki/Box-Muller_transform)。）`while`循环使用生成和测试技术从单位圆上的二维均匀分布生成随机点 (v1, v2)。从 (v1, v2) 到 (y1, y2) 的映射将均匀分布转换为具有零均值和单位标准偏差的二维正态分布。然后将其移动和缩放以获得具有所需均值和标准偏差的 (x1, x2)。

现在有了一种生成正态分布变量对的方法，其余代码的工作方式如下： if `second == 0`，这是一个需要生成新值的信号，因此它通过`if`并生成一对值。然后它保存其中一个值`second`并返回另一个。下次调用该方法时，它会注意到其中有一个有效值`second`并立即返回，而不是生成更多值。

代码中存在一个主要错误：在`second`返回值之前应该重置为零；否则它将始终继续返回第二个随机值（在第二次调用后看起来不会那么随机）。即使这个缺陷得到了纠正，还有第二个问题。每个其他返回值的值为 0 的概率为零。理论上这并不算太糟糕，因为正态分布的随机样本的值恰好为零的概率是……零！但是，这仍然是一个缺陷。

我将代码重写如下：

```
public class Random {

    private static double second;
    private static boolean secondValid = false;

    static double normal(int stream, double mean, double std) {
        double v1, v2, y1, y2, x1, x2, w;

        if (secondValid) {
            secondValid = false;
            return second;
        }

        do {
            v1 = 2 * RandomGenerator.rand(stream) - 1;
            v2 = 2 * RandomGenerator.rand(stream) - 1;
            w = v1 * v1 + v2 * v2;
        } while (w > 1);

        y1 = v1 * Math.sqrt(-2 * Math.log(w) / w);
        y2 = v2 * Math.sqrt(-2 * Math.log(w) / w);
        x1 = mean + y1 * std;
        x2 = mean + y2 * std;
        second = x2;
        secondValid = true;
        return x1;
    }

} 
```

# iphone - iPhone iOS 在后台运行的应用程序会生成和处理通知吗？

> ID：10416581
> 
> 赞同：2
> 
> 时间：2012-05-02T15:12:59.290
> 
> 标签：iphone, objective-c, ios, core-data, nsmanagedobjectcontext

当应用程序进入后台模式时，我的应用程序正在下载 JSON 对象。该应用程序将它们转换为核心数据实体。我遇到的问题是我需要将这些核心数据实体的托管对象上下文与主要托管对象上下文合并。

合并这些更改的方法是通过通知：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(contextHasChanged:) name:NSManagedObjectContextDidSaveNotification object:nil];

- (void)contextHasChanged:(NSNotification*)notification
{

    NSLog(@"received notification with object: %@",[[notification object] description]);
    if ([notification object] == [AppUser managedObjectContext]) return;

    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(contextHasChanged:) withObject:notification waitUntilDone:YES];
        return;
    }

    [[AppUser managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
} 
```

由于某种原因，我的代码在后台运行时没有收到这些通知。**应用程序在后台模式下运行时是否会继续生成通知？**还是我注册此类通知的位置/时间是错误的？

谢谢你的澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:17:35.563

应用程序继续在主或后台发送通知。在添加观察者和发布通知期间，您需要注意观察者不应该被释放。我认为在实施中可能存在一些错误阅读此

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:32:08.600

按下 Home 按钮后，您的应用程序将进入暂停模式。在您通过点击其图标“唤醒”它之前，它不会处理上述通知。

为确保您的应用程序继续执行其任务，您需要请求后台任务完成。然后，操作系统将给您最多 600 秒（10 分钟）的时间来完成您的应用程序正在执行的任何任务，然后再将其挂起。

您可以在此处阅读更多相关信息：[https ://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)

具体来说，在上面的链接中查找“后台执行和多任务处理”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:43:30.910

您在后台可以接收到的通知类型是有限制的。此外，通知的发送是您在进入后台之前安排的。

如果您需要在应用程序进入后台时继续工作，您也应该调用 beginBackgroundTaskWithExpirationHandler。

主要文档在这里：

[http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

向下滚动到后台执行和多任务处理部分

# python - 用另一个布局替换 QWidget 上的布局

> ID：10416582
> 
> 赞同：18
> 
> 时间：2012-05-02T15:13:02.850
> 
> 标签：python, layout, qt4, pyqt4

我有一个小部件，它会在切换选项时发生变化。这会使所有布局和小部件无效。我保留了所有布局的列表，因此我可以使用类似于[此答案](https://stackoverflow.com/a/9383780/761090)的内容删除它们：

```
class MyWidget(QFrame):
   # ...
   def reLayout(self):
      def deleteLayoutChilds(l):
         while l.count():
            item=l.takeAt(0)
            widget=item.widget()
            if widget: widget.deleteLater()
            else: deleteLayoutChilds(item.layout())
      for l in self.allLayouts: deleteLayoutChilds(l)

      # now install the new layout
      ##
      ## how to delete the old layout first?
      l=self.layout(); del l # no effect
      #
      layout=QGridLayout(self)
      ## warning: QLayout: Attempting to add QLayout "" to MyWidget "", which already has a layout. 
```

如何摆脱旧布局并设置新布局？

* * *

该文档[非常简洁](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#setLayout)，显然不直接适用于 python：

> QWidget.setLayout (self, QLayout)
> 
> QLayout 参数已将其所有权转移给 Qt。
> 
> 将此小部件的布局管理器设置为布局。
> 
> 如果这个小部件上已经安装了布局管理器，QWidget 不会让你安装另一个。您必须先删除现有的布局管理器（由 layout() 返回），然后才能使用新布局调用 setLayout()。
> 
> 如果 layout 是不同小部件上的布局管理器， setLayout() 将重新设置布局并使其成为该小部件的布局管理器。
> 
> 例子：
> 
> ```
>  QVBoxLayout *layout = new QVBoxLayout;
>  layout->addWidget(formWidget);
>  setLayout(layout); 
> ```
> 
> 调用此函数的另一种方法是将此小部件传递给布局的构造函数。
> 
> QWidget 将拥有布局的所有权。
> 
> 另请参阅 layout() 和布局管理。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-03T20:56:41.420

您可以简单地将布局重新设置为临时小部件：

```
def reLayout(self):
    QWidget().setLayout(self.layout())
    layout = QGridLayout(self)
    ... 
```

这将使所有子小部件重新成为该临时对象的父级，并且该对象连同其新子级立即被删除，因为我们不保留对它的引用。

但是，为单个小部件拥有多个布局并能够在它们之间切换的典型方法是使用`QStackedWidget`or `QStackedLayout`。

* * *

如果您仍然需要该次要问题的答案：

> 如何先删除旧布局？

似乎您不能直接删除`QObject`具有父级的 a，因为父级保留对该对象的引用。但是您可以将对象添加到一个临时对象`QObjectCleanupHandler`，就像上面的解决方案一样，它将立即与它包含的对象一起被删除：

```
QObjectCleanupHandler().add(self.layout()) 
```

# javascript - 画布中的图像高度错误

> ID：10416584
> 
> 赞同：0
> 
> 时间：2012-05-02T15:13:12.753
> 
> 标签：javascript, html, canvas

我有这样的画布

```
<canvas id="canvas" width="600px" height="300px"></canvas> 
```

现在我正在尝试在大约 260px 宽度和高度的画布内显示图像。但它在画布中全屏显示图像。我做错了什么？

```
img.onload = function(){
                var im = this;
                var imgWidth = im.width;
                var imgHeight = im.height;

                var imgScaledWidth = 0;
                var imgScaledHeight = 0;

                imgScaledHeight = self.conHeight - 40;
                imgScaledWidth = imgScaledHeight * (imgWidth/imgHeight);

                self.context.drawImage(this, 0,0,imgScaledWidth,imgScaledHeight);
            } 
```

它的显示是这样的 ![在此处输入图像描述](../Images/ac0b8fe0122d0ef308c9e14fbeb26146.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:54:17.687

根据您在问题中显示的内容，您的代码没有理由不工作。 [这是一个](http://jsfiddle.net/robertc/zvATq/2/)基于您给出的代码的示例，其中进行了一些小的更改以说明没有`self`变量。

```
<script>
    var img = document.getElementById("image");
    var c = document.getElementById("canvas");
    var con = c.getContext("2d");

    img.onload = function(){
        var im = this;
        var imgWidth = im.width;
        var imgHeight = im.height;

        var imgScaledWidth = 0;
        var imgScaledHeight = 0;
        var off=20;            

        imgScaledHeight = c.height - off;
        imgScaledWidth = imgScaledHeight * (imgWidth/imgHeight);

    con.drawImage(this, 0,0+(off/2),imgScaledWidth,imgScaledHeight);
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:15:36.653

*你正在*拉伸它。如果您不想显示拉伸的图像，请不要将任何大小传递给`drawImage`：

```
self.context.drawImage(this, 0, 0); 
```

# cocoa-touch - 有效的 SSL 证书被拒绝

> ID：10416586
> 
> 赞同：1
> 
> 时间：2012-05-02T15:13:14.123
> 
> 标签：cocoa-touch, ssl, ssl-certificate, restkit, ios5.1

我正在开发使用带有 SSL 的 REST Web 服务的应用程序。Web 服务已经到位，并使用 SSL 证书标识自己。即使证书似乎是有效的，它仍然被 iOS 拒绝。以下是详细信息：

*   Web 服务提供由 3 个证书组成的证书链，[此列表](http://support.apple.com/kb/HT5012)中的根证书，中间证书，最后是 Web 服务证书
*   `- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)space`每次我向 Web 服务发送请求时都会调用该方法。RestKit 代码中的注释说*“服务器正在使用操作系统无法验证的 SSL 证书”*，所以我想我永远不应该使用那种方法，对吧？
*   我尝试在测试设备上从 Safari 访问 Web 服务，并且证书被自动接受。桌面浏览器也是如此。
*   [Sslshopper](http://www.sslshopper.com/ssl-checker.html)说证书很好。

我可以通过将证书添加到应用程序包并以与自签名证书相同的方式处理它来连接到 Web 服务，但我想以正确的方式解决这个问题。非常感谢任何帮助，特别是如果有人能指出为什么 iOS 上的 Safari 接受证书，而我的应用程序不接受。

**编辑：** ~~原来我一直在使用旧的 RestKit 版本。我创建了概念证明，允许我向我的服务器发送一些请求，并且从今天（2012 年 5 月 3 日）开始使用 RestKit 主机，证书被接受。但是，我接到两个电话`connection:canAuthenticateAgainstProtectionSpace:`，在这两个电话中我都返回 NO，但无论如何它都能正确连接。所以，新的问题是，我现在可以正确连接的 RestKit 到底发生了什么变化。我需要知道这一点，因为我必须修补要用于发布的旧版本。之后我会更新 RestKit。~~

**编辑：**我需要把它还给 RestKit 人，这不是他们的错。我尝试连接的 Web 服务正在使用某种网关，这是问题的根源。当天早些时候，网关工作人员进行了一些修复，这就是为什么当我设法使用最新的 RestKit 版本执行测试时它可以正常工作的原因。

# c - 浏览结构数组

> ID：10416587
> 
> 赞同：0
> 
> 时间：2012-05-02T15:13:23.193
> 
> 标签：c, memory-management, segmentation-fault

我有一个结构数组，每个结构都描述了我所说的信号。我以这种方式声明了我的结构：

```
 /* Structure for keywords */
 struct varStruct
 {
    char* varName;
    int varOccurence;
 } signals[MAX_SIGNALS]; 
```

我正在一个循环中工作，该循环分析文件并动态查找信号声明，在我的例子中称为**newArrayName 。**我想做的是，仅当尚未包含读取信号时才将读取信号添加到数组中。否则，我应该增加 varOccurence 变量。

这是我的代码，但我有一个分段错误（所以没有更多信息）......

```
 // We are in the loop that get the signals sequentially
    char* newArrayName = TheValueOfTheReadSignal.

    int i;
    // We browse all the array...
    for(i=0; i < MAX_SIGNALS; i++)
    {
        // If a signal already has the name of the currently-read signal, we inc its occurence
        if(strcmp(signals[i].varName, newArrayName) == 0)
        {
            signals[i].varOccurence++;
        }
        // Otherwise, we add a new signal with the read-name and an occurence corresponding to the value of a static variable that's incremented after each signal-reading.
        else
        {
            signals[index_Array].varName = newArrayName;
            signals[index_Array].varOccurence = index_Array;

        }
    }
     // We increment index_Array, which is a static int variable
       index_Array ++;
    // End of the loop that gets the signals 
```

这会导致分段错误。我的C语言不是很好，我什至会说我很不擅长。我这里的猜测是信号数组还没有初始化，所以 signal[i] 对他没有任何意义，但是我不知道如何初始化一个结构体数组。也许是另一个原因，我不知道。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:22:35.203

一个问题是，在第一次迭代中，所有`varName`成员要么要么是未初始化的指针，要么`NULL`是未初始化的指针（取决于`signals`声明的位置）。确保它们被初始化为`NULL`：

```
struct varStruct
{
    char* varName;
    int varOccurence;
} signals[MAX_SIGNALS] = { {0} }; 
```

`NULL`并在传递给之前检查它是否是`strcmp()`：

```
if(signals[i].varName && strcmp(signals[i].varName, newArrayName) == 0) 
```

如果`varName`为 NULL，则表示没有填充其他元素，您可以填充它并从循环中中断。

另外确保：

*   分配给 的值`varName`是动态分配的（`malloc()`例如使用）并且只要需要就可以存在，记住`free()` `varName`何时不再需要。
*   `index_Array`小于`MAX_SIGNALS`填充 的元素之前`signals`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:23:12.190

1.  您正在搜索循环本身内创建一个“新”条目。几乎每次都会立即创建一个新条目。*只有在所有*现有条目都不匹配后，您才应该创建新条目；即在你完成循环之后。

2.  你不应该一直循环，`MAX_SIGNALS`因为一开始，你的大部分数组都是空的。只有第一个`index_Array`元素是真实的。这也使您无需使用 NULL 指针初始化结构并检查它们，因为无论如何您都不会遍历未初始化的条目。

3.  你在`index_Array`盲目地增加。仅在您*真正*添加条目时才增加。

一些变化：

```
// We are in the loop that get the signals sequentially
char* newArrayName = TheValueOfTheReadSignal.

int found_entry;
found_entry = FALSE; /* A flag that remembers if the entry has been found.  */

for(i=0; i < index_Array; i++)
{
    if(strcmp(signals[i].varName, newArrayName) == 0)
    {
        signals[i].varOccurence++;
        found_entry = TRUE;
        break;
    }
}
if (!found_entry)
{
    signals[index_Array].varName = newArrayName;
    signals[index_Array].varOccurence = index_Array++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:23:49.570

当您在记录中没有条目时`signals`，或者当`i`大于记录条目数减一时，`strcmp(signals[i].varName, newArrayName)`尝试取消引用无效（未初始化或`NULL`）指针`signals[i].varName`。

除此之外，一旦`index_Array`变得与`MAX_SIGNALS`（或更大）一样大，

```
// We browse all the array...
for(i=0; i < MAX_SIGNALS; i++)
{
    // If a signal already has the name of the currently-read signal, we inc its occurence
    if(strcmp(signals[i].varName, newArrayName) == 0)
    {
        signals[i].varOccurence++;
    }
    // Otherwise, we add a new signal with the read-name and an occurence corresponding to the value of a static variable that's incremented after each signal-reading.
    else
    {
        signals[index_Array].varName = newArrayName;
        signals[index_Array].varOccurence = index_Array;

    }
}
 // We increment index_Array, which is a static int variable
   index_Array ++; 
```

您写到数组的末尾，这是未定义的行为，可能会直接导致内存损坏和/或分段错误，或者作为内存损坏的结果。

`signals[index_Array]`在您的循环中，每次找到具有不同名称的信号时都会写入，并且`index_Array`每次循环运行后都会递增，无论您是否已经有一些具有该名称的信号。您应该检查是否已经记录了信号，并且只有在没有写入新条目和增量的情况下`index_Array`：

```
// Check for newArrayName == NULL and exit or otherwise handle the situation if it is
// We browse all the array...
for(i=0; i < index_Array && i < MAX_SIGNALS; i++)
{
    // If a signal already has the name of the currently-read signal, we inc its occurence
    if(signals[i].varName != NULL && strcmp(signals[i].varName, newArrayName) == 0)
    {
        signals[i].varOccurence++;
        break; // we already have that signal, can stop looping
    }
}
// Check if i == MAX_SIGNALS
// if it is, we have no more space in the array,
// that needs handling
if (i == index_Array && index_Array < MAX_SIGNALS) {
    // We haven't had that signal before, record it
    signals[index_Array].varName = newArrayName;
    signals[index_Array].varOccurence = index_Array;
    // And increment index_Array, which is a static int variable
    index_Array ++;
} 
```

# php - 如果列中存在值，则将日期添加到正在插入的 mysql 值

> ID：10416592
> 
> 赞同：0
> 
> 时间：2012-05-02T15:13:56.923
> 
> 标签：php, mysql, on-duplicate-key

我有一个这样的 MySQL 表，其结构如下：

```
|       uri       |   title     |
_________________  _____________
Latest-Update      Latest Update
                   Latest Update 
```

其中 uri 列是一个索引。我偶尔会在 mysql 表中执行注入，如果我有 1 个或多个同名 URI，则会出现 ERROR Duplicate Entry。所以我使用 PHP 进行插入，并希望`date("m-d-y")`在插入时将 a 附加到变量 $uri 的末尾。我的 INSERT 语句`INSERT INTO table(`uri `,`title `) values('$uri', '$title')`。我想看看是否在插入的表中，在 INSERT 发生之前，我是否可以判断该`$uri`值是否已经存在于`uri`表中，如果是，那么该变量将变为`$uri = $uri."-"date("m-d-y");`我如何判断？我做了一些研究并让我相信我应该使用`INSERT...ON DUPLICATE KEY UPDATE`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:57:08.457

Not sure if you are interested in Triggers but you can depend on `BEFORE INSERT` trigger. Trigger requires to check if new `uri` being inserted has a dup entry and if yes, append dateStringOfYourFormat and insert.

***Example***:

```
mysql> drop table mytable;
Query OK, 0 rows affected (0.03 sec)

mysql> create table mytable( uri varchar(128) );
Query OK, 0 rows affected (0.05 sec)

mysql> drop trigger uri_modifier;
ERROR 1360 (HY000): Trigger does not exist
mysql> delimiter //
mysql> create trigger uri_modifier before insert on mytable
    -> for each row
    -> begin
    ->  if ( select count(uri) from mytable where uri=NEW.uri ) > 0 then
    ->   set @modified_uri_string=concat(NEW.uri, '-', date_add(sysdate(), interval floor(rand()*1e6) microsecond));
    ->   set NEW.uri=@modified_uri_string;
    ->  end if;
    -> end//
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> delimiter ;
mysql>
mysql> set @my_new_uri_string = 'my_uri_string_to_search';
Query OK, 0 rows affected (0.00 sec)

mysql> set @modified_uri_string = @my_new_uri_string;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from mytable;
Empty set (0.00 sec)

mysql> insert into mytable values(@my_new_uri_string);
Query OK, 1 row affected (0.03 sec)

mysql> select @my_new_uri_string, @modified_uri_string;
+-------------------------+-------------------------+
| @my_new_uri_string      | @modified_uri_string    |
+-------------------------+-------------------------+
| my_uri_string_to_search | my_uri_string_to_search |
+-------------------------+-------------------------+
1 row in set (0.00 sec)

mysql> select * from mytable;
+-------------------------+
| uri                     |
+-------------------------+
| my_uri_string_to_search |
+-------------------------+
1 row in set (0.00 sec)

mysql> insert into mytable values(@my_new_uri_string);
Query OK, 1 row affected (0.03 sec)

mysql> select @my_new_uri_string, @modified_uri_string;
+-------------------------+----------------------------------------------------+
| @my_new_uri_string      | @modified_uri_string                               |
+-------------------------+----------------------------------------------------+
| my_uri_string_to_search | my_uri_string_to_search-2012-05-03 02:21:39.983405 |
+-------------------------+----------------------------------------------------+
1 row in set (0.00 sec)

mysql> select * from mytable;
+----------------------------------------------------+
| uri                                                |
+----------------------------------------------------+
| my_uri_string_to_search                            |
| my_uri_string_to_search-2012-05-03 02:21:39.983405 |
+----------------------------------------------------+
2 rows in set (0.02 sec)

mysql> insert into mytable values(@my_new_uri_string);
Query OK, 1 row affected (0.01 sec)

mysql> select @my_new_uri_string, @modified_uri_string;
+-------------------------+----------------------------------------------------+
| @my_new_uri_string      | @modified_uri_string                               |
+-------------------------+----------------------------------------------------+
| my_uri_string_to_search | my_uri_string_to_search-2012-05-03 02:21:39.412580 |
+-------------------------+----------------------------------------------------+
1 row in set (0.00 sec)

mysql> select * from mytable;
+----------------------------------------------------+
| uri                                                |
+----------------------------------------------------+
| my_uri_string_to_search                            |
| my_uri_string_to_search-2012-05-03 02:21:39.983405 |
| my_uri_string_to_search-2012-05-03 02:21:39.412580 |
+----------------------------------------------------+
3 rows in set (0.00 sec)

mysql>
mysql> 
```

Make sure that if `uri` inserted is different than what passed in, you have a handle to know what the modified value is.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:34:53.317

这很可能是由于您的 uri 是主键。为此，您可能应该创建一个代理键，这将允许重复。如果这确实是你需要的。

# google-chrome - ContentScript.js 与 Chrome 扩展程序之间的通信

> ID：10416594
> 
> 赞同：0
> 
> 时间：2012-05-02T15:13:58.120
> 
> 标签：google-chrome, google-chrome-extension

我只是想将当前标签 url 发送到我的扩展程序：

以下是我的 manifest.json

```
{
 "name": "DocUrlExtention",
 "version": "1.0",
 "manifest_version": 2,
 "description": "The first extension that I made.",
 "browser_action": {
 "default_icon": "icon.png",
 "default_popup": "popup.html"
},
 "content_scripts": [
 {
  "matches": ["http://*/*"],
  "js": ["contentscript.js"]
 }
 ]} 
```

以下是我的 contentscript.js

```
chrome.extension.sendRequest({url: window.location.href}, function(response) {
   console.log(response.farewell);
}); 
```

以下是我的 popup.html

```
<!doctype html>
<html>
<head>
<title>Getting Started Extension's Popup</title>

<script>
    chrome.extension.onRequest.addListener(
      function(request, sender, sendResponse) {
        console.log(sender.tab ?
                    "from a content script:" + sender.tab.url :
                    "from the extension");
      });
</script>

<!-- JavaScript and HTML must be in separate files for security. -->
<!--<script src="popup.js"></script>-->
</head>
<body>
<div id="mydiv">Doc Id:</div>
</body>
</html> 
```

我在控制台中看不到任何东西。我是 Chrome 扩展程序的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:20:32.487

您的清单文件包含[`"manifest_version": 2,`](http://code.google.com/chrome/extensions/manifest.html#manifest_version)，它启用[内容安全策略](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)。默认情况下，[内联 JavaScript 不会被执行](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H3-1)。而且，[没有办法放宽 CSP 以允许内联 JavaScript](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H2-3)。

你有两个选择：

1.  删除`"manifest_version": 2`（禁用默认 CSP）。
2.  将内联 JavaScript 移动到外部文件。

建议使用第二种方法，并且*在您的代码中也建议...*

```
...
<!--为了安全起见，JavaScript 和 HTML 必须位于不同的文件中。-->
<!-- <script src="popup.js"></script> -->
</head>
...

```

PS。**可以通过右键单击**浏览器操作图标并选择最后一个选项[“检查弹出窗口”](http://code.google.com/chrome/extensions/tut_debugging.html#inspect-popup)来打开弹出窗口的开发工具。

# java - 如何为 Java Swing MouseEvent 编写事件缓冲区？

> ID：10416597
> 
> 赞同：2
> 
> 时间：2012-05-02T15:14:10.387
> 
> 标签：java, swing, events, buffer, mouseevent

一段时间以来，我一直在努力寻找解决这个问题的方法。编写摆动事件缓冲区的最佳实践是什么？这个想法是当从鼠标手势触发动作时，例如'mouseMoved'，因为事件可能被触发多次，我只想触发最后一次调用 - 例如，

如果在执行第一个单击侦听器时单击了五次鼠标，并且有四个已排队，则下一个调用将是第五个调用-将跳过所有先前的调用。

看来我应该使用[Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html#remove%28java.lang.Runnable%29)类，因为它可以删除未提交的任务，但我仍然不太确定。感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:49:58.543

user1291492 是对的，这根本不应该发生。您*永远不*应该在事件处理程序中运行任何可能需要超过几毫秒才能完成的代码。[SwingWorker 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html "SwingWorker 文档")包含有关如何执行此操作的示例和说明。最重要的报价是

> 不应在事件调度线程上运行耗时的任务。否则应用程序变得无响应。

为了解决最初的问题，我通常采用两种模式：

1.  使用标志来标记应该在未来某个时间点执行的操作。当一段时间没有其他工作时，我检查所有标志，重置它们并执行适当的操作。

2.  在为工作线程安排工作时，请持有对它的引用。每次在安排新工作之前，取消之前安排的工作。最常与 C#/Async 中的 CancellationTokens 一起使用。

# php - CodeIgniter - 将 GIF 转换为 JPG？可能的？

> ID：10416599
> 
> 赞同：3
> 
> 时间：2012-05-02T15:14:11.317
> 
> 标签：php, codeigniter, imagemagick

我希望专门在 CodeIgniter 中实现这一点。

我正在编写的 PHP 应用程序允许用户上传 jpg 或动画 gif 图像。在下一步中，我想允许用户使用 jCrop 来裁剪一些不同大小的缩略图。这需要我将动画 gif 的新副本转换为 jpg。我的代码适用于上传的 jpg 图像，但会为 gif 文件创建损坏的图像。我正在尝试做的事情可能吗？

我的代码：

```
 // Create image to crop
            $config['image_library'] = 'ImageMagick';
            $config['library_path'] = '/usr/bin';
            $config['source_image'] = $this->config->item('upload_dir_path') . $file_path . 'original.' . $file_ext;
            chmod($config['source_image'], 0777);
            $config['new_image'] = $this->config->item('upload_dir_path') . $file_path . 'crop-me.jpg';
            $this->image_lib->initialize($config); 
            $this->image_lib->resize(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T00:06:21.240

对于那些对我的解决方案感兴趣的人，我只是使用了内置的 GD PHP 函数。我几乎没有处理 gif 文件的经验，所以我预计这会很困难。事实是 CodeIgniter Image_lib 和扩展库（我从来没有正常工作过）对此太过分了。

这是我使用的：

```
$image = imagecreatefromgif($path_to_gif_image);
imagejpeg($image, $output_path_with_jpg_extension); 
```

非常简单，非常适合我需要的东西。

# linux - bash 中的“#$”是什么意思？

> ID：10416600
> 
> 赞同：6
> 
> 时间：2012-05-02T15:14:14.557
> 
> 标签：linux, bash, syntax

比如说一个脚本是这样开始的

```
#!/bin/bash
#$ -S /bin/bash
#$ -l hostname=qn* 
```

然后在页面下方，实际脚本开始发挥作用。我的问题是“#$”符号是什么意思或做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T15:25:01.863

您是否在**批处理集群**上运行？像 Sun Grid Engine？在打算作为批处理作业运行的脚本中可能有特殊含义。

[https://www.wiki.ed.ac.uk/display/EaStCHEMresearchwik/How+to+write+a+SGE+job+submission+script](https://www.wiki.ed.ac.uk/display/EaStCHEMresearchwik/How+to+write+a+SGE+job+submission+script)

**更新：**

从 stackoverflow.com 使用时，上面的链接块（来自 google.com）

备择方案：

*   [http://www.cbi.utsa.edu/sge_tutorial](http://www.cbi.utsa.edu/sge_tutorial)
*   [http://web.njit.edu/all_topics/HPC/basement/sge/SGE.html](http://web.njit.edu/all_topics/HPC/basement/sge/SGE.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T15:18:08.540

`#`以注释开头的行。第一行可能以 开头`#!`，但它仍然是对文件的注释，`bash`并且仅用于指示要用于文件的解释器。以 开头的所有其他行`#`绝对不重要`bash`，无论下一个字符是`$`还是其他字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:30:22.523

它们似乎是 Oracle (ex-Sun) Grid Engine 的参数，请查看这个[SO question](https://stackoverflow.com/questions/3587053/timeout-jobs-on-sun-grid-engine)或[this one](https://stackoverflow.com/questions/2320976/sungridengine-condor-torque-as-resource-managers-for-pvm)。

他们大量使用这类评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T15:15:47.650

这些行对于像 sbatch 这样的队列系统很重要。

# .net - 如何配置 ninject 以返回 T 的动态代理？

> ID：10416605
> 
> 赞同：1
> 
> 时间：2012-05-02T15:14:33.503
> 
> 标签：.net, ninject, dynamic-proxy

我有一个类`UserModel`我想代理它进行缓存。所以我已经`public class UserModelCached:DynamicProxy<UserModel>`通过[http://greenicicleblog.com/2010/02/21/piece-of-proxy-cake/](http://greenicicleblog.com/2010/02/21/piece-of-proxy-cake/)

现在我希望 Ninject 仍然能够创建 a`UserModel`但是当`UserModel`要求 a 时，它会返回代理。

我能想到的一切似乎都会导致堆栈溢出，因为 ninject 会询问如何创建 UserModel 来创建代理；在哪里获取一个的内部字典将指向获取动态代理的相同方法。我不想硬编码实际`UserModel`类的参数。

**如果不创建接口**并将其添加到两个类中，这是否可能？

# c# - 通过 F# 绑定到 viewmodel 的接口实现期间的 BindingError

> ID：10416606
> 
> 赞同：3
> 
> 时间：2012-05-02T15:14:46.497
> 
> 标签：c#, wpf, mvvm, f#

大家好，很抱歉这么长的问题，但是......

我有一个像这样的 C# 接口：

```
public interface ISimpleViewModel
{
    string SimpleText { get; }
} 
```

然后我继承了一个 F# 类型：

```
type SimpleViewModel() = 
    interface ISimpleViewModel with
        member this.SimpleText
            with get() = "Hello again!" 
```

我还有一个 C# 继承者：

```
public class SimpleCSViewModel : ISimpleViewModel
{
    public string SimpleText
    {
        get { return "Just testing"; }
    }
} 
```

最终我有一个超级简单的 WPF 应用程序，其中 MainWindow ctor 以这种方式注入 ISimpleViewModel 实例：

```
public partial class MainWindow : Window
{
    public MainWindow(ISimpleViewModel viewModel)
    {
        ViewModel = viewModel;
        InitializeComponent();
    }

    public ISimpleViewModel ViewModel
    {
        get { return DataContext as ISimpleViewModel; }
        set { DataContext = value; }
    }
} 
```

当然，我的窗口上有一个 TextBlock，它的 Text 属性绑定到 SimpleText。

Everyting 在我注入 C# 实例时有效。但是我收到 BindingError ，在 F# 实例的情况下可以找到该属性。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:27:58.367

我不太了解 WPF 绑定的工作原理，但要记住的一件事是 F# 中的接口是*显式*实现的（这意味着实现方法实际上是非公共的），但默认情况下它们是隐式的在 C# 中。如果在 C# 中使用显式接口实现会发生什么？如果这确实是问题，那么最简单的解决方法就是在您的 F# 类型上创建一个公共属性，该属性复制接口实现的行为。

# wordpress - Wordpress 页面 - 我需要获取变量

> ID：10416621
> 
> 赞同：0
> 
> 时间：2012-05-02T15:15:25.170
> 
> 标签：wordpress

我不是 wordpress 人，客户需要我修改一些页面。其他人在 wordpress 中创建了整个网站。

我在处理包含变量的查询字符串时遇到问题。

wordpresssite.com/pages-using-template/?variable=something

这会导致页面被抛出到站点的默认 404 ..

关于我需要在哪个文件中解决这个问题以及如何解决的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:41:54.867

> wordpresssite.com/pages-using-template/?variable=something

这会给您一个 404 错误，可能是因为您试图将查询字符串变量添加到站点的主页。没有“文件”可以解决这个问题 - WordPress 是动态的。.htaccess 规则处理 URL 重写（“漂亮的永久链接”）

所以我想你需要提供更多关于你想要做什么的信息。在不破坏站点其余部分的情况下，实际上并没有一种方法可以“修复” URL（这是可能的，但我敢打赌，无论您尝试做什么，都需要一个更简单的解决方案）。

您要添加什么查询字符串？是什么原因？

例如，我最近做了一个 WordPress 网站，某人需要在该网站的一页上创建一个目录，其中有一个自定义搜索。我创建了一个函数，该函数将 $_GET 页面的 URL 并将搜索查询添加到其中，然后将最终用户返回到页面并在那里显示结果。

您还必须注意函数中的 $_GET - 您要确保通过使用 $wpdb->e​​scape($_GET['xxx']) 来保护它们免受注入攻击。

# ios - 如何为在 NSUserDefaults 中保存数据的 UITextField 设置默认值

> ID：10416625
> 
> 赞同：1
> 
> 时间：2012-05-02T15:15:41.790
> 
> 标签：ios, default, nsuserdefaults

我使用 NSUserDefaults 保存用户输入的值。一切正常，数据保存和检索。但是我怎样才能为那个 UITextField 设置一个默认值呢？当我使用

```
- (void)viewDidLoad
{
    textField.text = @"12345";
} 
```

或将文本放入 nib 文件不起作用，应用程序以空字段开头。

```
- (IBAction) saveBtnPresssed : (id) sender
{
    myString1 = [[NSString alloc] initWithFormat:textField.text];
    [textField setText:myString1];
    NSUserDefaults *stringDefault = [NSUserDefaults standardUserDefaults];
    [stringDefault setObject:myString1 forKey:@"stringKey"];
     NSLog(@"%@",myString1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:22:00.397

我不会自己设置这些值，XCode 提供了一种使用绑定更简单的方法。

它的工作方式是为您的文本字段设置一个绑定，并为其命名以便可以识别它，例如“intialTextField”。然后该值会自动存储在 NSUserDefaults 中，并在应用程序关闭时更新。

在 XCode 中，单击要绑定的 textField，然后打开 Inspector。然后单击右侧的第二个选项卡。这是“绑定”选项卡。

单击“值”字段上的下拉箭头并选中“绑定到用户默认值...”

在“模型键路径”中，设置您要用来识别文本字段的名称，这可以是您想要的任何名称。

然后，每当您在 TextField 中输入内容时，它将在应用程序退出时保存。如果您需要立即保存此值（仅在极少数情况下需要），您可以在应用程序中输入以下代码：

```
[yourTextField synchronize]; 
```

在应用程序启动时，您可以使用 NSUserDefaults 使用您之前设置的标识符重新设置文本字段的值。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T09:02:33.520

双击`UITextField`你的故事板并写下你的默认值。

这适用于 Xcode 5.1！

![故事板示例](../Images/49c31df20ef650b8e63fee040528f1fa.png)

# android - 以编程方式取消注册小部件

> ID：10416628
> 
> 赞同：1
> 
> 时间：2012-05-02T15:15:44.890
> 
> 标签：android, android-widget

我在我的应用程序中添加了 2 个小部件。但是，如果用户在某些 Android 版本上将应用程序移至 SD 卡，则小部件将不再可用。

作为解决方案，我创建了一个仅包含小部件的新小应用程序。因此，用户可以将主应用程序移动到 SD 卡并在内部存储中拥有 Widgets 应用程序，以便能够使用 Widgets。除了 2 个主要小部件外，小部件应用程序还有 2 个小部件（总共 4 个）。这 2 个额外的小部件是一种 beta 小部件。如果我看到一个 Widget 被大量使用，我会改进它并将其移动到主包中。

当用户没有将主应用程序移动到 SD 卡（或具有允许使用 SD 卡中的小部件的 Android 版本）并且如果用户安装小部件应用程序以访问这 2 个额外的小部件时，就会出现问题。在这种情况下，用户将获得 2 个主要小部件两次：一次来自主应用程序，另一次来自小部件应用程序。

如果我检测到也安装了小部件应用程序，我想要做的是从主应用程序中禁用这 2 个小部件。那是为了避免重复这两个小部件。

如果安装了小部件应用程序，我确实知道如何从主应用程序检查。我只是不知道如何以编程方式禁用小部件。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:28:35.267

使用`PackageManager`和按名称`setComponentEnabledSetting()`禁用`AppWidgetProvider`(s)，它们将不再显示在列表中。

但是，如果用户已经将这些应用小部件添加到他们的主屏幕，它们就会损坏，用户可能会感到困惑。

# mysql - MySQL 无法从备份中恢复表 - #1366 - 字符串值不正确

> ID：10416629
> 
> 赞同：1
> 
> 时间：2012-05-02T15:15:47.537
> 
> 标签：mysql, mysqldump

我最近工作的一个网站的数据库出现了问题，显然当他们恢复表时，它被损坏了任何带有奇怪符号（例如半符号和度数符号）的文本字段，文本字段在该符号之前的字符处停止）。我有一份表格，并将其提炼成以下代码：

```
 CREATE TABLE `products2` (
      `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
      `description` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
      PRIMARY KEY (`id`)
    ) DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

    insert  into products2 values  
(25, 0x5468652044504D203931322069732061206C617267652033BD204469676974204C434420566F6C746D657465722E20546865207369676E616C206265696E67206D6561737572656420697320616C736F207573656420746F20706F77657220746865206D657465722C20696E636C7564696E6720746865206261636B6C696768742E20546865206D657465722066656174757265732061203320746F20363056206D6561737572656D656E742072616E67652C20776974682061207265736F6C7574696F6E206F662031306D56206265747765656E20332E303020616E642031392E39395620616E64203130306D56206265747765656E2032302E3020616E642036302E30562E205768656E2074686520766F6C746167652064726F70732062656C6F772033562C204C4F20697320646973706C617965642028646F776E20746F20322E38562C207768656E2074686520646973706C61792077696C6C207475726E206F6666292E209148499220697320646973706C61796564207768656E2074686520766F6C7461676520676F65732061626F7665203630562E0D0A0D0A5363726577207465726D696E616C7320616C6C6F7720666F7220717569636B20616E64206561737920636F6E6E656374696F6E2E20546865206D6574657220697320686F7573656420696E206120726F6275737420636172726965722077686963682063616E20626520626F6C74656420696E20706C616365206F722070616E656C206D6F756E746564207573696E6720746865206C6F772070726F6669206C652062657A656C20616E6420636C6970732070726F76696465642E20416E2049503637202F204E454D412034582062657A656C20697320616C736F20617661696C61626C6520666F722070726F74656374696F6E20616761696E7374206475737420616E64206D6F6973747572652E0D0A0D0A417320746869732069732061206E65772064657369676E2077652073756767657374207468617420796F7520636F6E74616374204C617363617220666F7220757020746F2064617465206C6561642D74696D6520696E666F726D6174696F6E206265666F7265206F72646572696E67206F6E6C696E652E0D0A) 
```

这会引发错误：

```
#1366 - Incorrect string value: '\xBD Digi...' for column 'description' at row 1 
```

在stackoverflow和网络上查看这个问题似乎是编码问题，我尝试将描述字段上的排序规则更改为utf_unicode_ci，并将表的排序规则更改为utf_bin（以及这些的所有组合）全部到徒劳无功。

我无法重做转储，因为它是备份。我不明白系统如何输出转储但不接受它 - 大概备份是通过命令行（不确定）并且我正在使用 PHPMyAdmin 来恢复它我不知道这是否有区别。

如果无法导入数据，如果有人能告诉我如何将编码数据读入文本，然后我可以手动剪切和粘贴，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:48:23.863

将前 32 个字节解码为 ASCII，我们有（MySQL 抱怨`?`的字节在哪里）：`0xBD`

```
DPM 912 是大 3? 数字 

```

谷歌搜索“DPM 912”的一点点[向我](http://www.lascarelectronics.com/pdf-usb-datalogging/data-logger0652731001277711148.pdf)表明，字符应该是粗俗的二分之一分数，½。

[许多字符集](http://www.fileformat.info/info/unicode/char/00bd/charset_support.htm)使用 byte 对该字符进行编码`0xBD`，但有一个特别突出：[`windows-1252`](http://en.wikipedia.org/wiki/Windows-1252)——这不仅是（Unicode 之前的）Windows 世界中的默认代码页，而且还是[MySQL 的默认编码](http://dev.mysql.com/doc/en/charset-we-sets.html)。您的数据以`windows-1252`.

如[MySQL 手册中所述](http://dev.mysql.com/doc/en/charset-literal.html)，您可以通过在字符串前面加上编码名称来指定字符串文字的编码：

> 字符串文字可能有一个可选的字符集介绍器和`COLLATE`子句：
> 
> ```
> [_charset_name]'string' [COLLATE collat​​ion_name]
> ```

它接着说：

> `x'literal'`在标准十六进制文字和数字十六进制文字表示法（ and `0xnnnn`）之前或位域文字表示法（`b'literal'`and ）之前，介绍人也是合法的`0bnnnn`。

因此（并且因为 MySQL 引用`windows-1252`as `latin1`），您可以将`INSERT`命令更改为：

```
INSERT INTO products2 VALUES (25, _latin1 0x5468652044504D203931322069...); 
```

该文档还指出：

> 对于 simple statement `SELECT 'string'`，字符串具有由`character_set_connection`和`collation_connection`系统变量定义的字符集和排序规则。

也就是说，如果省略了这样的介绍器（就像在您的原始`INSERT`语句中一样），则假定字符集是由`character_set_connection`系统变量定义的字符集。

[如此处](http://dev.mysql.com/doc/en/charset-connection.html)所述，有多种设置该变量的方法（包括在客户端连接时指定它，在 phpMyAdmin 中，使用[`[DefaultCharset]`](http://wiki.phpmyadmin.net/pma/Config#DefaultCharset)配置选项设置，默认值`latin1`在 v3.4 之前，但`utf8`从那时起 -也许这种更改是您问题的根源；也可以使用[`[Import][charset]`](http://wiki.phpmyadmin.net/pma/Config#charset_2)) 指定导入文件的字符集。如果在连接时未指定所需的字符集，则在连接后但在您的`INSERT`命令修复之前发出这些命令中的任何一个（例如，您可以将其中一个添加到转储文件的顶部）：

```
SET NAMES 'latin1';
SET CHARACTER SET latin1;
SET character_set_connection = latin1; 
```

我的建议是让转储文件尽可能可移植，将其添加`SET NAMES 'latin1'`到它的顶部。

# java - Netbeans 平台和菜单

> ID：10416631
> 
> 赞同：6
> 
> 时间：2012-05-02T15:15:51.940
> 
> 标签：java, netbeans-platform

有谁知道如何编辑 Netbeans 平台创建的骨架中显示的菜单？

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T16:51:59.387

*序言：编辑平台中存在的菜单项的唯一方法是通过您自己的模块之一。这意味着为了删除或重命名另一个模块中的菜单项，您必须首先将一个模块添加到您的应用程序中。您的应用程序本身不是一个模块，而是一个（潜在的）模块集合。*

为基于 NB 平台的应用程序编辑菜单的最简单方法如下：

1.  在您的一个模块中，展开`Important Files`节点
2.  展开`XML Layer`节点（假设模块有层文件¹）
3.  展开`This layer in context`节点
4.  展开`Menu Bar`节点
5.  右键单击任何菜单（文件夹节点）或菜单项（文件节点）并选择`Delete`

这会将必要的条目添加到您的模块层文件（_hidden 条目）中，只要加载了此模块，这些菜单和菜单项就不会被加载。如果您想在将来恢复某个项目，您可以从图层文件中删除该条目或右键单击该项目并选择`Restore`。

**编辑**

这是重命名菜单项的方法：

1.  使用上述技术查找要重命名的条目
2.  右键单击该节点并选择“转到声明”
3.  `name`查找具有“SystemFileSystem.localizingBundle”的属性
4.  打开应用程序的品牌界面（右键单击应用程序的节点并选择`Branding...`）
5.  选择`Resource Bundles`标签
6.  查找具有您在步骤 3 中找到的值的 Bundle 节点

菜单项的名称将位于此 Bundle 的节点中。只需编辑它，它将在您的应用程序中更改。这里的关键是找到命名菜单项的 Bundle。

这是替换菜单项操作的方法：

1.  按照上一个大纲中的步骤 1 和 2
2.  获得声明后，搜索 (Ctrl + F) 相同文件中的`originalFile`值（您只是在寻找`.instance`声明）²
3.  找到定义动作的位置后，将结构复制到图层文件
4.  使用该`delegate`属性，您可以重新定义用于此菜单项的操作

这里的重点是覆盖层文件中菜单项的动作定义，将动作替换为您自己的动作。您还可以使用此技术覆盖操作的显示名称，但如果您不需要替换操作，则品牌技术更简单。

* * *

¹如果您的模块没有图层文件，则需要先创建一个图层文件，然后才能使用此技术。这要求您`layer.xml`在模块的一个包中创建一个文件。然后您需要使用以下命令在您的 Modules Manifest 文件中注册此文件`OpenIDE-Module-Layer: com/example/mymodule/layer.xml`

²对于这一步，您可以突出显示属性值的`.instance`名称，`originalValue`然后按 Ctrl + F。例如，如果`originalValue`属性的值是`Actions/Window/org-netbeans-core-windows-actions-RecentViewListAction.instance`您只想突出显示`org-netbeans-core-windows-actions-RecentViewListAction.instance`部分。这里的重点是找到动作定义的位置（这部分图层文件只是将动作添加到菜单中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T22:19:15.077

除了上面已经很好解释的内容之外，这里还有一个简单的技巧，可以添加您自己的全局菜单项，甚至无需查看 XML 文件内容：

1.  在你的模块树中找到名为**layers.xml的文件**
2.  单击**layers.xml**节点以展开其子节点，这是两个文件夹：
    *   **这一层**
    *   **上下文中的这一层**
3.  展开“**上下文中的这一层**”节点并转到子文件夹**菜单栏**
4.  **右键单击并在Menu Bar**中添加一个新文件夹（将其命名为**History** eg）。这个新文件夹的名称将用作主 GUI 窗口的全局菜单中的一个类别。
***   要将子菜单项添加到此全局菜单，请右键单击您的模块，选择***new->action*** action，当系统要求您选择要放置此子菜单的菜单时，请选择**History**。**

 **PS：您也可以像为**Menu Bar一样向****Toolbar**添加类别。谢谢

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:19:07.390

我不确定您到底想做什么，但 layer.xml 文件通常是进行此类更改的地方。****

# sencha-touch - 主屏幕图标

> ID：10416633
> 
> 赞同：0
> 
> 时间：2012-05-02T15:16:00.630
> 
> 标签：sencha-touch, sencha-touch-2

我刚刚将我的 Sencha Touch 更新为 Sencha Touch 2.0.1，我的主屏幕图标不再工作。以前我可以检查我的代码并查看`<link>`Sencha 生成的正确标签。我不再看到这些标签。我使用以下代码设置了主屏幕图标：

```
Ext.application({
    name: 'example',
    phoneIcon: '/example/resources/icons/app_icons/114x114.png', 
```

我也尝试将“phoneIcon”更改为“icon”，并且我还尝试在“icon”之后使用对象而不是字符串。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:08:49.400

该`icon`物业对我来说很好：

![截屏](../Images/d54fe18a56b2bbef6a7c827ad0da1cdc.png)

示例应用程序：[http ://www.senchafiddle.com/#f15tv](http://www.senchafiddle.com/#f15tv)

# c# - 在 JavaScript 中找不到“findbyelementID”的 ASP 按钮 ID

> ID：10416634
> 
> 赞同：-2
> 
> 时间：2012-05-02T15:16:00.760
> 
> 标签：c#, javascript, asp.net, .net, getelementbyid

试图在 JavaScript 中查找 ASP.Net 控件的 ID，但它说 ID 未找到，**我查看了其他其他相关问题，但它们都采用 ASP 形式或类似形式，但是这里我使用的是 DIV 标签**，它给了我错误在页面上，

代码 ：

```
<asp:Content ID="Content4" ContentPlaceHolderID="cphSubmit" runat="server">
<div id="divConfMessage" style="BORDER-RIGHT:black thin solid; BORDER-TOP:black thin solid; DISPLAY:none; Z-INDEX:200; BORDER-LEFT:black thin solid; BORDER-BOTTOM:black thin solid; background-color:white;">
    <br />
    <br />
    <div style="BACKGROUND-COLOR: white;TEXT-ALIGN: center" id="confirmText"></div>
    <div style="Z-INDEX: 105;HEIGHT: 22%;BACKGROUND-COLOR: white;TEXT-ALIGN: center"></div>
    <div style="Z-INDEX: 105;BACKGROUND-COLOR: white;TEXT-ALIGN: center">
        <asp:Button ID="btnConfOK"  Width="200px" Height="25px" CssClass="gradientbutton" OnClick="btDelete_Click" Runat="server" Text="Yes"></asp:Button>
        <asp:Button ID="btnConfCancel" Width="200px" Height="25px" CssClass="gradientbutton" Runat="server" Text="No"></asp:Button>
    </div>
</div>
 <script type="text/javascript" src="/_layouts/1033/jquery.js"></script>
 <script type="text/javascript" language="JavaScript" src="CustomDialog.js"></script>
 <script type="text/javascript" language="JavaScript">
        function ShowMessage()
        {
            DisplayConfirmMessage('Do you really want to delete this decision?',480,120);
            document.getElementById('<%=btnConfOK.ClientID%>').focus();
            //SetDefaultButton('btnConfOK');
            return false;
        }
 </script>
    <asp:Button ID="btDelete" runat="server" CausesValidation="False" CssClass="gradientbutton"
    UseSubmitBehavior="False"
    OnClientClick="this.disabled=true;this.value='Please Wait...';ShowMessage();"
    Text="Delete" Width="200px"  /> 
```

编辑：

**我进行了更改，然后对话框出现并消失了：|，我想我需要将控件添加到 DOM，但不知道在这种情况下我将如何做到这一点：|**

这是我遵循的教程链接 [对话框教程](http://aspalliance.com/1366_Building_a_Custom_Confirmation_Dialog_Box.all)

js脚本

```
var divWidth = '';
var divHeight = '';
var txtFirstButton = 'OK';
var txtSecondButton = 'Cancel'
    function DisplayConfirmMessage(msg,width,height)
    {
            // Set default dialogbox width if null
            if(width == null)
            divWidth = 180 
            else 
            divWidth = width;

            // Set default dialogBox height if null
            if(height == null)
            divHeight = 90 
            else 
            divHeight = height;

            // Ge the dialogbox object
            var divLayer = document.getElementById('divConfMessage');
            // Set dialogbox height and width
            SetHeightWidth(divLayer)
            // Set dialogbox top and left
            SetTopLeft(divLayer);

            // Show the div layer
            divLayer.style.display = 'block';
            // Change the location and reset the width and height if window is resized
            window.onresize = function() { if(divLayer.style.display == 'block'){ SetTopLeft(divLayer); SetHeightWidth(divLayer)}}
            // Set the dialogbox display message
            document.getElementById('confirmText').innerHTML = msg;
    }

    function SetTopLeft(divLayer)
    {
        // Get the dialogbox height
        var divHeightPer = divLayer.style.height.split('px')[0];

         // Set the top variable 
        var top = (parseInt(document.body.offsetHeight)/ 2) - (divHeightPer/2)
        // Get the dialog box width
        var divWidthPix = divLayer.style.width.split('px')[0];

        // Get the left variable
        var left = (parseInt(document.body.offsetWidth)/2) - (parseInt(divWidthPix)/2);
        // set the dialogbox position to abosulute
        divLayer.style.position = 'absolute';

        // Set the div top to the height 
        divLayer.style.top = top

        // Set the div Left to the height 
        divLayer.style.left = left;
    }
    function SetHeightWidth(divLayer)
    {
        // Set the dialogbox width
        divLayer.style.width = divWidth + 'px';
        // Set the dialogbox Height
        divLayer.style.height = divHeight + 'px'
    }

    function SetDefaultButton(defaultButton)
    {
            // Set the focus on the Cancel button
            document.getElementById(defaultButton).focus();
    } 
```

**如果我删除“UseSubmitBehavior =“False”，它可以正常工作，除非我单击“是”，它不会关闭对话框**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:18:23.583

getElementById 接受一个字符串，因此您需要引用 id，如下所示：

```
document.getElementById('<%=btnConfOK.ClientID%>').focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:19:59.053

你错过了语法`document.getElementById("<%=btnConfOK.ClientID%>").focus();`

阅读有关[document.getElementById的更多信息](https://developer.mozilla.org/en/DOM/document.getElementById)

**编辑**

```
function ShowMessage()
        {
            DisplayConfirmMessage('Do you really want to delete this decision?',480,120);
            document.getElementById("<%=btnConfOK.ClientID%>").focus();
            //SetDefaultButton('btnConfOK');
            return false;
        } 
```

如果您的删除按钮执行回发， 请在单击删除按钮 时使用[event.preventDefault 。](https://developer.mozilla.org/en/DOM/event.preventDefault)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:17:40.957

您必须将输出放在引号中：

```
document.getElementById(<%=btnConfOK.ClientID%>) 
```

应该

```
document.getElementById("<%=btnConfOK.ClientID%>") 
```

# javascript - 从.html（或innerHtml）将结果输入到inArray并使其工作

> ID：10416639
> 
> 赞同：0
> 
> 时间：2012-05-02T15:16:30.463
> 
> 标签：javascript, jquery

```
$("form").submit(function () {
if ($.inArray($("input:first").val().toUpperCase(), ["UNITED STATES", "USA", "AMERICA"]) > -1) {
//function here
});

<div class="answers">"UNITED STATES", "USA", "AMERICA"</div>

$("form").submit(function () {
if ($.inArray($("input:first").val().toUpperCase(),  [$(".answers").html()]) > -1) {  
//function here
}); 
```

在带有类答案的 div 中，我有需要验证的结果。当我使用 jquery 函数 .html 时，结果打印得很好，但是当它验证时，它需要验证整个句子：“UNITED STATES”，“USA”，“AMERICA” 并不是每个答案都像第一个函数那样单独. 我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:42:53.287

使用拆分将您的答案字符串转换为数组。如果答案没有间隔，可能会更好，例如 AMERICA,USA 不是 AMERICA, USA

```
$("form").submit(function () {
if ($.inArray($("input:first").val().toUpperCase(), $(".answers").html().split(',')) > -1)
{
    //function here
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:43:07.267

我不确定这些答案是什么格式。为什么将它们输出到 HTML 而不是 JS 变量中？

什么可以工作：

```
var answerarray = $(".answers").text().split(", "); 
```

或（我不确定你的报价）：

```
var answerarray = jQuery.parseJSON("[" + $(".answers").text() + "]"); // ugliest code I've ever written 
```

# php - 脚本不会在 Google Chrome 中调用函数

> ID：10416641
> 
> 赞同：0
> 
> 时间：2012-05-02T15:16:37.407
> 
> 标签：php, javascript, html, google-chrome

我有一个脚本，当单击锚标记时会弹出一个 div 元素

```
echo '<a href="javascript:void(0);" onclick="popup(\'yme-property-pop\'); loadproperties(\'open\', \''.$row['id'].'\');"><h2>' . $row['placename'] . '</h2></a>'; 
```

它来自 PHP 脚本，在 FF 和 IE(9) 中运行良好。但是chrome不会运行它，至少在ver。18.0.1025.168米

弹出窗口（除）；当我单击它时会触发事件，但它并没有完成函数所在脚本内的函数调用。

```
 var width_ratio = 0.4; // If width of the element is 80%, this should be 0.2 so that the element can be centered

    function toggle(div_id) {
        var el = document.getElementById(div_id);
        if ( el.style.display == 'none' ) { el.style.display = 'block';}
        else {el.style.display = 'none';}
    }
    function blanket_size(popUpDivVar) {
                    alert(popUpDivVar);
        if (typeof window.innerWidth != 'undefined') {
            viewportheight = window.innerHeight;
        } else {
            viewportheight = document.documentElement.clientHeight;
        }
        if ((viewportheight > document.body.parentNode.scrollHeight) && (viewportheight > document.body.parentNode.clientHeight)) {
            blanket_height = viewportheight;
        } else {
            if (document.body.parentNode.clientHeight > document.body.parentNode.scrollHeight) {
                blanket_height = document.body.parentNode.clientHeight;
            } else {
                blanket_height = document.body.parentNode.scrollHeight;
            }
        }
        var blanket = document.getElementById('blanket');
        blanket.style.height = blanket_height + 'px';
        var popUpDiv = document.getElementById(popUpDivVar);
        popUpDiv_height=0;
        popUpDiv.style.top = popUpDiv_height + 'px';
    }
    function window_pos(popUpDivVar) {
        if (typeof window.innerWidth != 'undefined') {
            viewportwidth = window.innerHeight;
        } else {
            viewportwidth = document.documentElement.clientHeight;
        }
        if ((viewportwidth > document.body.parentNode.scrollWidth) && (viewportwidth > document.body.parentNode.clientWidth)) {
            window_width = viewportwidth;
        } else {
            if (document.body.parentNode.clientWidth > document.body.parentNode.scrollWidth) {
                window_width = document.body.parentNode.clientWidth;
            } else {
                window_width = document.body.parentNode.scrollWidth;
            }
        }
        var popUpDiv = document.getElementById(popUpDivVar);
        window_width=window_width/2;
        window_width = window_width * width_ratio; 
        popUpDiv.style.left = window_width + 'px';
    }
    function popup(windowname) {
                    alert(windowname); // THIS WORKS
        blanket_size(windowname);
        window_pos(windowname);
        toggle('blanket');
        toggle(windowname);     
    } 
```

该脚本中的最后一个函数是第一个被调用的函数。我在里面放了一个警告框来验证它是否被解雇了。但是，我在它调用的下一个函数（blanket_size）中放置了一个警报框，它没有触发，因为我在函数的第一行有警报框。它没有开火。

我根本不知道为什么。奇怪的是，这些东西在其他浏览器中有效，但在 chrome 中无效。有任何想法吗？

谢谢！

**编辑：**而且我还验证了传递给 popup() 函数的参数值（“windowname”参数）是有效的/有一个值。它包含 HTML 文档中的 DIV 的 ID，它不是动态创建的。

**编辑 2：**好的，当且仅当我将带有参数值的警报框（窗口名称）添加到弹出（窗口名称）函数时，我才运行脚本。但是如果我删除那个盒子，它就会再次停止工作。

**编辑 3：** 调试器上完全没有错误。但现在我更加困惑了。经过大量尝试，它似乎在随机使用警报框！有时有效，有时无效。

**最终编辑** 将逻辑更改为 jQuery。早就应该这样做了！

```
 // Open property
$(".property-open-link", ".yme-propertyitem").live('click', function() { 
    $("#yme-property-pop").css({'display': 'block', 'z-index': '9999' });
    $("#blanket").css({'display': 'block', 'height', getBlanketHeight(), 'z-index': '1000' });
    loadproperties('open', $(this).closest(".yme-propertyitem").attr("id"));
});
// Close property button
$("#yme-property-close").live('click', function() { 
    $("#yme-property-pop").css('display', 'none');
    $("#blanket").css('display', 'none');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:07:16.307

首先要弄清楚几件事：

1.  如果您为我们创建[一种与您的代码交互的方式，](http://jsfiddle.net)这真的很有帮助，尤其是当您在此处粘贴 PHP 代码而不是纯 HTML 时

2.  您是否有理由[不使用库](http://jquery.com)来处理 DOM 交互？当涉及到跨浏览器代码时，它将使您的代码更加简洁并消除一些可能的故障点。

正确的，

我有点不确定为什么您的代码无法在 Chrome 中运行。我[在 jsfiddle 中设置了一个演示，](http://jsfiddle.net/Blink/TmNaW/)它似乎工作正常。

你会注意到我没有在元素的`onclick`属性中附加事件，`<a/>`你也不应该。这可能就是问题所在。

目前，jsfiddle 中的代码按预期发出警报，并且仅当在切换中找不到相关的 DOM 节点时才会失败。

笔记：

`addEventListener`在示例中不是跨浏览器，这是使用 DOM 库的另一个原因。

# xmlhttprequest - 那会是跨域 XMLHttpRequest 吗？

> ID：10416642
> 
> 赞同：1
> 
> 时间：2012-05-02T15:16:50.363
> 
> 标签：xmlhttprequest, cross-domain

如果我从 somesubdomain.example.com 向 someothersubdomain.example.com 发出 XMLHttpRequest，这会被视为跨域请求吗？我的意思是，我是否必须提供 Access-Control- 标头才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:34:06.320

`somesub.example.com`并且`someother.example.com`是**不同**的主机。因此，它们受[相同来源政策](http://www.w3.org/Security/wiki/Same_Origin_Policy)的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T10:51:50.347

如果两个页面的协议、端口（如果指定）和主机相同，则两个页面具有相同的来源。如果存在差异，则相同的将被视为跨源请求。参考： [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript)

# html - 使用正则表达式和 javascript 突出显示 html 中的单词 - 几乎就在那里

> ID：10416643
> 
> 赞同：0
> 
> 时间：2012-05-02T15:16:51.467
> 
> 标签：html, regex, replace

我正在编写一个 jquery 插件，它将执行浏览器样式的页面查找搜索。我需要改进搜索，但还不想完全解析 html。

目前，我的方法是获取整个 DOM 元素和所有嵌套元素，然后简单地为给定术语运行正则表达式查找/替换。在替换中，我将简单地围绕匹配的术语包裹一个跨度，并使用该跨度作为我的锚来进行突出显示、滚动等。**任何 html 标记中的字符都不能匹配，这一点至关重要。**

这和我得到的一样接近：

```
(?<=^|>)([^><].*?)(?=<|$) 
```

**它在捕获所有不在**html 标记中的字符方面做得非常好，但我无法弄清楚如何插入我的搜索词。

```
Input: Any html element (this could be quite large, eg <body>)    
Search Term: 1 or more characters    
Replace Txt: <span class='highlight'>$1</span> 
```

**更新**

当我使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)进行测试时，以下正则表达式可以满足我的需求...

```
Regex: (?<=^|>)(.*?)(SEARCH_STRING)(?=.*?<|$)
Replacement: $1<span class='highlight'>$2</span> 
```

但是我在我的javascript中使用它时遇到了一些麻烦。使用以下代码，chrome 给我错误“无效的正则表达式：/(?<=^|>)(. *?)(Mary)(?=.* ?<|$)/: Invalid group”。

```
var origText = $('#'+opt.targetElements).data('origText');
var regx = new RegExp("(?<=^|>)(.*?)(" + $this.val() + ")(?=.*?<|$)", 'gi');
$('#'+opt.targetElements).each(function() {
   var text = origText.replace(regx, '$1<span class="' + opt.resultClass + '">$2</span>');
   $(this).html(text);
}); 
```

它打破了组 (?<=^|>) - 这是笨拙的东西还是正则表达式引擎的差异？

**更新**

该正则表达式在该组中中断的原因是因为 Javascript 不支持正则表达式后视。供参考和可能的解决方案：http: [//blog.stevenlevithan.com/archives/mimic-lookbehind-javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:30:24.013

只需使用 jQuerys 内置[`text()`方法](http://api.jquery.com/text/)。它将返回选定 DOM 元素中的所有字符。

对于 DOM 方法（[接口](https://developer.mozilla.org/en/DOM/Node)[文档`Node`](https://developer.mozilla.org/en/DOM/Node)）：遍历元素的所有子节点。如果子节点是元素节点，则递归运行。如果它是一个文本节点，则在文本中搜索`node.data`（的文本。

示例代码（已调整，原点在[此处](http://de.wikipedia.org/wiki/Wikipedia%3aTechnik/Skin/Werkstatt/Archiv/2011#Gadget-Zeitzonenkonverter.js%3a_Schwesterprojektlinks_.28z.B._Commons.29_werden_missformatiert)）：

```
(function iterate_node(node) {
    if (node.nodeType === 3) { // Node.TEXT_NODE
        var text = node.data,
            pos = text.search(/any regular expression/g), //indexOf also applicable
            length = 5; // or whatever you found
        if (pos > -1) {
            node.data = text.substr(0, pos); // split into a part before...
            var rest = document.createTextNode(text.substr(pos+length)); // a part after
            var highlight = document.createElement("span"); // and a part between
            highlight.className = "highlight";
            highlight.appendChild(document.createTextNode(text.substr(pos, length)));
            node.parentNode.insertBefore(rest, node.nextSibling); // insert after
            node.parentNode.insertBefore(highlight, node.nextSibling);
            iterate_node(rest); // maybe there are more matches
        }
    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE
        for (var i = 0; i < node.childNodes.length; i++) {
            iterate_node(node.childNodes[i]); // run recursive on DOM
        }
    }
})(content); // any dom node 
```

还有[highlight.js](http://de.wikipedia.org/wiki/Benutzer%3aSchnark/js/highlight.js)，这可能正是您想要的。

# git - GIT 提交不推送到存储库？

> ID：10416645
> 
> 赞同：0
> 
> 时间：2012-05-02T15:16:57.807
> 
> 标签：git, version-control, bitbucket

我刚刚在 Visual Studio 中设置了 GIT 源代码控制，它将解决方案加载到链接到 BitBucket 上我的 GIT 存储库的文件夹中。

我仍然对此有所了解，并想知道是否有人可以对一些问题有所了解：

*   当我在 VS2010 中更改文件时，它会出现在“GIT Pending changes”窗口中。当我在这里单击“提交”并发表评论时，我是否认为这些更改将提交到我的本地版本的存储库，直到我使用“推送”。

*   **如果是这种情况，我可以在运行 PUSH 之前 UNDO 提交**吗？否则不自动运行推送似乎很愚蠢。

*   当我撤消文件更改“撤消文件的挂起更改”时，尽管与比较中的服务器版本相同，但它仍保留在列表中为“已修改”。它还会用相同的文件覆盖它吗？？！或者这只是 VS2010 插件中的一个错误？

感谢任何可以提供帮助的人，我真的很想尝试围绕 GIT 为我的下一个项目的 SCM！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:21:24.133

您是对的，`git commit`只需将更改提交到本地存储库，同时`git push`将更改发送到远程存储库。您可以自由地`git`跟踪本地目录中的更改，而无需将其链接到远程存储库。`git`这也是我喜欢其他发行版版本控制系统的原因之一。

在将本地存储库推送到远程存储库之前，您当然可以撤消提交。 [git book 的这一章](http://book.git-scm.com/4_undoing_in_git_-_reset,_checkout_and_revert.html)更详细地讨论了这个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:26:16.320

这个答案[https://stackoverflow.com/a/2745097/1073300](https://stackoverflow.com/a/2745097/1073300)有一个链接到一张很好的图片，解释了 git 数据传输命令，包括`git commit`和`git push`。

# salesforce - 默认 Salesforce 分类

> ID：10416646
> 
> 赞同：0
> 
> 时间：2012-05-02T15:17:01.987
> 
> 标签：salesforce, visualforce

我想将默认字母分页添加到我的 VF 页面，但我没有找到如何做到这一点，谁能帮助我！

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:35:08.447

我相信您正在寻找[**`<apex:enhancedlist>`**](http://www.salesforce.com/us/developer/docs/pages/index_CSH.htm#pages_compref_enhancedList.htm)组件。

[这是文档](http://www.salesforce.com/us/developer/docs/pages/index_CSH.htm#pages_compref_enhancedList.htm)中的一个示例：

```
<apex:enhancedList type="Account" height="300" rowsPerPage="10" id="AccountList" /> 
```

# cakephp - CakePHP 1.2 Number Helper - GDP £的货币方法格式

> ID：10416647
> 
> 赞同：0
> 
> 时间：2012-05-02T15:17:04.533
> 
> 标签：cakephp, cakephp-1.2

如何格式化此代码以显示大英镑货币 (£) 符号但仅在 $item['total'] 旁边？

```
<?php echo $id; ?>Total"><?php echo $number->currency (isset($item['total']) ? 
$item['total'] : $item['quantity'] * $item['price']); ?> 
```

我似乎无法正确使用语法。

这种尝试没有奏效：

```
<?php echo $id; ?>Total"><?php echo $number->currency (isset($item['total'], 'GDP') ? 
$item['total'] : $item['quantity'] * $item['price']); ?> 
```

文档在这里： [http ://api12.cakephp.org/class/number-helper#method-NumberHelpercurrency](http://api12.cakephp.org/class/number-helper#method-NumberHelpercurrency)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:17:12.913

尝试这个：

```
<?php echo $number->currency ((isset($item['total']) ? $item['total'] : $item['quantity'] * $item['price']),'GBP'); ?> 
```

希望这可以帮助

# vb.net - 在 Sub Main 外部调用时调用 Application.Run(New myForm()) 不起作用

> ID：10416648
> 
> 赞同：0
> 
> 时间：2012-05-02T15:17:06.217
> 
> 标签：vb.net, compact-framework

我在 Symbol MC50 上使用 Compact Framework 3.5。

在我的 Sub Main 中，它首先检查数据库是否存在。如果是这样，它将使用以下代码显示登录屏幕：

```
Dim login As frmLogin = New frmLogin()
    If login.ShowDialog() = DialogResult.OK Then            
        Application.Run(New frmMain())
    End If 
```

这一切正常，当我关闭 frmMain 时，它会按预期退出应用程序。

但是，如果 Sub Main 中的数据库检查失败，我会调用另一个表单的 ShowDialog() 方法，该表单用于从实时服务器创建和填充数据库。这是调用此表单的代码：

```
If Not File.Exists(SETTINGS_LOCALDB) Then
        databaseExists = False
        MessageBox.Show("Local DB does not exist. The database must be created before using the application.")
        Dim update As frmUpdateData = New frmUpdateData()
        update.ShowDialog()
Else
    .....
End If 
```

我遇到的第一个问题是，当 frmUpdateData 关闭时，Sub Main 中的其余代码没有执行，因此 Application.Run 从未被命中。

因此，在 frmUpdateData 上关闭按钮的单击事件中，我添加了以下代码：

```
If SystemUserSecurityId() = Nothing Then
        Dim login As frmLogin = New frmLogin()
        If login.ShowDialog() = DialogResult.OK Then
            DebugTrace("Init - login complete, starting application.")
            Application.Run(New frmMain())
        End If
    End If
    Me.Hide() 
```

所有这些代码都被命中并且 frmMain 确实加载了。但是，当我单击右上角的关闭按钮时，没有任何反应，也没有发生任何事件。就好像 Windows 事件没有发生一样。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:47:40.293

我看不出你的整个应用程序是如何组合在一起的，但我会通过删除“else”子句来提出这个小改动：

```
If Not File.Exists(SETTINGS_LOCALDB) Then
  databaseExists = False
  MessageBox.Show("Local DB does not exist. The database must be created before using the application.")
  Dim update As frmUpdateData = New frmUpdateData()
  update.ShowDialog() ' Is this what populates your database???
' Else (removed the else clause)
End If
If File.Exists(SETTINGS_LOCALDB) Then ' now it is OK to run, correct?
  If SystemUserSecurityId() = Nothing Then
    Dim login As frmLogin = New frmLogin()
    If login.ShowDialog() = DialogResult.OK Then
      DebugTrace("Init - login complete, starting application.")
      Application.Run(New frmMain())
    End If
  End If
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:18:21.793

您的主窗体不会关闭的原因是因为您的应用程序“卡”在对话框关闭事件的调用堆栈中，因为这是您为主窗体启动 Windows 消息循环的地方。

我建议您对代码进行一些重组。

不要在“主”子中进行有效性检查，而是加载主表单：

```
Application.Run(New frmMain()) 
```

在主窗体上放置一个计时器并设置一个非常快的间隔（比如 10 毫秒）。在主窗体的加载事件中启用它。像这样实现 Tick 事件处理程序（请注意，我的 VB 语法可能并不完美，我在此尝试）：

```
 Sub TmrOneShot_Tick(ByVal sender as Object, ByVal e as System.EventArgs)
    'prevent timer from firing again.
    tmrOneShot.Enabled = False;
    Dim bContinue as Boolean = False;

    If Not File.Exists(SETTINGS_LOCALDB) Then
      databaseExists = False
      MessageBox.Show("Local DB does not exist. The database must be created before using the application.")
      Dim update As frmUpdateData = New frmUpdateData()
      update.ShowDialog() ' Is this what populates your database???

      'analyze result of update form to determine if you should continue...
      bContinue = WasUpdateDataOperationSuccessful();

    End If

   If bContinue Then
      If SystemUserSecurityId() = Nothing Then
        Dim login As frmLogin = New frmLogin()
        bContinue = login.ShowDialog() = DialogResult.OK
        if bContinue Then
          DebugTrace("Init - login complete, starting application.")              
        End If
      End If
    End If

  If Not bContinue Then
     'can't continue, terminate app
     Application.Exit()
  End if
End Sub 
```

# java - 存储数据表的最佳方式

> ID：10416653
> 
> 赞同：4
> 
> 时间：2012-05-02T15:17:21.477
> 
> 标签：java

我有一个数据表（不同行的列数可能会有所不同）。我还需要能够删除或添加新的数据行。

存储这些数据的最佳方式是什么？

我的第一个猜测是`ArrayList`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T15:36:48.753

两种方法：

1.  将所有内容都转换为字符串并使用 ，`ArrayList<List<String>>`其中每个条目都是由 . 表示的行`ArrayList<String>`。

    *   优点：不需要创建自己的类来表示“行”。
    *   缺点：需要转换数据，不转换数据就无法进行数学运算，需要确保所有行的长度相同。

2.  正如dystroy所说，在表中创建一个代表a的类`Row`，并使用`ArrayList<Row>`

    *   优点：条目保持其实际类型，行没有可变长度（除非您希望它们），并且您可以使用有意义的方式访问列（例如`row.getDate()`，而不是`row.get(3)`）。
    *   缺点：创建附加类可能需要更多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:23:04.280

我会选择 LinkedList，特别是如果您希望您的列表作为堆栈工作。

ArrayList 的主要缺点是，当达到容量时，它会重新创建一个更大的表 => 表分配，并且复制会降低性能。

而对于 LinkedList，没有容量的概念，因为所有工作都是通过指针来工作的。

据我说，更喜欢 ArrayList 而不是 LinkedList 的主要（并且在大多数情况下可能是唯一的......）原因是当您主要想要访问（读取部分）特定索引时。ArrayList 是 O(1)，而 LinkedList 是 O(n)。

您可以阅读这篇文章以获取更多信息：

[何时在 ArrayList 上使用 LinkedList？](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)

# scala - 如何测试作为 AnyVal 的值？

> ID：10416658
> 
> 赞同：14
> 
> 时间：2012-05-02T15:17:36.017
> 
> 标签：scala

试过这个：

```
scala> 2.isInstanceOf[AnyVal]
<console>:8: error: type AnyVal cannot be used in a type pattern or isInstanceOf test
              2.isInstanceOf[AnyVal]
                            ^ 
```

和这个：

```
scala> 12312 match {
     | case _: AnyVal => true
     | case _ => false
     | }
<console>:9: error: type AnyVal cannot be used in a type pattern or isInstanceOf test
              case _: AnyVal => true
                      ^ 
```

该消息非常有用。我知道我不能使用它，但我该怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T16:02:19.020

我假设您想测试某些东西是否是原始值：

```
def testAnyVal[T](x: T)(implicit evidence: T <:< AnyVal = null) = evidence != null

println(testAnyVal(1))                    // true
println(testAnyVal("Hallo"))              // false
println(testAnyVal(true))                 // true
println(testAnyVal(Boolean.box(true)))    // false 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T16:34:08.970

我假设您的类型实际上是`Any`或者您已经知道它是否是`AnyVal`。不幸的是，当您的类型为 时`Any`，您必须分别测试所有原始类型（我在这里选择了变量名称以匹配原始类型的内部 JVM 名称）：

```
(2: Any) match {
  case u: Unit => println("Unit")
  case z: Boolean => println("Z")
  case b: Byte => println("B")
  case c: Char => println("C")
  case s: Short => println("S")
  case i: Int => println("I")
  case j: Long => println("J")
  case f: Float => println("F")
  case d: Double => println("D")
  case l: AnyRef => println("L")
} 
```

这有效，打印`I`，并且不会给出不完整的匹配错误。

# informatica-powercenter - 如何在iformatica中将多行转换为单行以获取大量数据，需要最佳解决方案

> ID：10416661
> 
> 赞同：0
> 
> 时间：2012-05-02T15:17:41.830
> 
> 标签：informatica-powercenter, informatica

我在表 A 中有如下数据

```
Assetid attribute value
1546    Ins_date   05062011
1546    status     active
1546    X          10.4567
1546    Y          27.56
1546    size       17
675     X          4.778
675     Y          53.676
675     depth      5
675     st_date    06092010 
```

我在表 A 中有上面的数据。这个表有很多 Assetids 1546,675,....等。资产的属性可能会有所不同。

我想要输出如下：

```
assetid  ins_date  status  X        Y       Size  depth  st_date
1546     05062011  active  10.4567  27.56   17    null   null
675      null      null    4.778    53.676  null  5      06092010 
```

我创建了存储过程，然后在 Informatica 中调用以实现此输出。但是，由于我有大量数据，因此加载需要很长时间。

请建议我其他简单和最佳的加载方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:44:38.363

使用**路由器**将行拆分为不同的组`attribute`，然后使用一组**连接**器合并具有相同`assetid`值的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:04:13.830

使用聚合器转换将记录压缩为每个资产标识一条记录。然后为每个属性创建一个端口，该端口返回属性匹配的 MAX(value)。请注意，此方法假定您提前知道所有可能的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:42:22.283

如上一个答案中所建议的，您可以使用聚合器。由于您的数据集很大，您可以在表达式中使用使用变量端口的技术，前提是数据在到达表达式之前进行排序。

[您可以从标题为“PowerCenter 映射：将行转换为列”](https://community.informatica.com/solutions/convert_rows_into_columns)的 Informatica Marketplace 应用程序中下载演示这两种技术的示例映射。

# c++ - 对VS2010文本编辑器的好奇

> ID：10416662
> 
> 赞同：1
> 
> 时间：2012-05-02T15:17:42.393
> 
> 标签：c++, visual-studio-2010, visual-c++, intellisense

给定`A.h`下面的文件（请注意，我故意没有`<iostream>`在此文件中包含标题）。VS2010 文本编辑器随后会在下方显示一条红线`std`，因为它无法识别此名称。

```
class A
{
    public;
    A() throw(std::bad_alloc);
}; 
```

但是，如果我`<iostream>`在文件中包含以下标题`A.cpp`，则红线会在`A.h`文件中消失，即使`A.cpp`关闭了也是如此。这怎么可能 ？

```
#include <iostream>
#include "A.h"
A::A() { throw std::bad_alloc(); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:23:08.733

`A.h`添加一个包含但不包含的新 C++ 文件`<iostream>`。下面的红色下划线`std`将重新出现。

VS2010 知道哪些文件包含那个头文件。如果他们中的任何一个不知道`std`，它会指出问题。

但是您是对的，如果您切换包含的顺序以使项目无法编译，它仍然会删除红色下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:49:05.460

Visual Studio 是为所有 C++ 程序员编写的。这意味着它不能假定头文件总是包含它们所需的所有内容。将红线放在标题未明确包含的所有内容下对于那些在严格环境中工作的开发人员来说意味着很多误报，其中标题以特定顺序包含并具有依赖关系。

因此，Visual Studio 试图弄清楚您的意思，而不是假设您的标题能够独立存在。

这可能不是您来源中的最佳实践，但他们必须考虑到这一点。

# c++ - 测量创建线程所需的时间

> ID：10416665
> 
> 赞同：0
> 
> 时间：2012-05-02T15:17:57.520
> 
> 标签：c++, linux, multithreading, boost, pthreads

如何测量创建和启动线程所需的时间？（Linux、pthreads 或 boost::thread）。

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:26:04.570

您可能应该指定您想要测量的确切内容，因为至少有两种可能的解释（原始线程内部“忙碌”`pthread_create`的时间与从调用`pthread_create`到另一个线程实际执行其第一条指令的时间）。

在任何一种情况下，您都可以在调用之前和之后或调用之前使用[`clock_gettime`](http://man7.org/linux/man-pages/man2/clock_gettime.2.html)with查询单调实时，并将其作为线程函数内的第一件事。然后，从第一个值中减去第二个值。`CLOCK_MONOTONIC``pthread_create`

要知道在内部花费了多少时间`phtread_create`，`CLOCK_THREAD_CPUTIME_ID`这是一种替代方法，因为这仅计算您的线程使用的实际时间。

然而，总而言之，衡量这种事情有点毫无意义。*它几乎不会*告诉您它在您的系统或另一个系统上的真实条件下将如何表现，具有未知的进程和未知的调度策略和优先级。
在另一台机器上，或者在另一天，您的线程可能只是在 100 或 200 毫秒后安排。如果你相信这不会发生，你就死定了。

**编辑：**
关于上述评论中添加的信息，如果您需要在“正常调度量”范围内“非常规地执行操作”，您可以只创建一个线程，`nanosleep`用于 15 或 30毫秒。当然，sleep 并不是非常准确或可靠，因此您可能希望例如阻塞 a `timerfd`（如果可移植性不是最高优先级，否则使用信号传递计时器）。
使用单个计时器/等待来安排不规则的时间间隔也不是什么大问题，您只需要跟踪*下一个*事件的到期时间。这也是现代操作系统的做法（阅读“计时器合并”）。

# iphone - iOS：导航到另一个控制器时，Webview 会导致闪烁

> ID：10416676
> 
> 赞同：0
> 
> 时间：2012-05-02T15:18:25.970
> 
> 标签：iphone, uiwebview, load, ios5.1

我在 UIVIewController 中使用 webview 并使用以下方法在其中加载本地 HTML 文件。

```
[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:filePath]]]; 
```

如果我将此方法放在 ViewDidLoad 中，我会在导航到看起来不太好的控制器时看到白色闪烁。

我尝试将此方法放在 ViewWillAppear 中，如下所示。我正在使用 webViewLoaded 标志来确保 webview 已加载，然后只显示当前视图，否则它正在等待，但它正在无限循环等待！

```
- (void)viewWillAppear:(BOOL)animated {
    webViewLoaded = NO;

    webView.scalesPageToFit = allowZoom;
    webView.dataDetectorTypes = UIDataDetectorTypeNone;
    webView.delegate = self;

   [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:filePath]]];

   int count = 0;

   while(webViewLoaded == NO) 
   {
        NSLog(@"Waiting...");
        [NSThread sleepForTimeInterval:0.1];
        if(count++ > 10) break;
   }
}

- (void)webViewDidFinishLoad:(UIWebView *)localwebView {
    webViewLoaded = YES;
} 
```

我也在 ViewDidLoad 中尝试过同样的事情，但它仍然处于无限循环中。

请注意，webViewLoaded 是“volatile BOOL”，但未调用 webview 委托方法。不知道发生了什么！

谁能帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:42:32.050

**首先**：您阻塞了主线程并且没有给 WebView 任何完成加载的机会。永远不要阻塞你的主线程。

**第二**：有两个 UIWebView 委托方法：webViewDidFinishLoad 和 webView:didFailLoadWithError: - 确保两者都听。

如果您试图等到 WebView 完成加载并且之后才显示您的控制器 - 使用委托或块。请注意，这不是一种正确的做事方式 - 我只是在修改您的示例以使其工作：

子控制器（带有 WebView）：

```
-(void)startLoadingWithParent:(id)_parent {
  self.parent = _parent;
  NSURL * url = [[NSBundle mainBundle] URLForResource:@"resource" withExtension:@"html"];
  [webView loadRequest:[NSURLRequest requestWithURL:url]];
}

-(void)webViewDidFinishLoad:(UIWebView *)webView {
  [parent showMe:self];
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
  [parent showError:error];
} 
```

主控制器：

```
-(void)doSomething {
   SecondController * ctrl; /// secondController should be created AND has its view loaded at this point
   /// ctrl = [SecondController new];
   /// ctrl.view;
   [ctrl startLoadingWithParent:self];
   /// show user that we're doing something - display activity indicator or something
 }

 -(void)showMe:(UIViewController*)me {
    [self.navigationController pushViewControllerAnimated:me];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:21:39.663

使用以下代码

```
[self performSelectorInBackground:@selector(webViewLoaded) withObject:nil]; 
```

这样它就不会影响您的用户界面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:01:37.923

尝试使用`[NSURL fileURLWithPath:filePath]`

# qt - 将 Qt 源添加到 QtCreator 2.4.1

> ID：10416677
> 
> 赞同：10
> 
> 时间：2012-05-02T15:18:27.667
> 
> 标签：qt, qt4, gdb, qt-creator

我目前正在将 QtCreator 2.4.1 与 Qt 4.7.4 开发库（在 Ubuntu 中）一起使用，并试图追踪一个在使用 valgrind 进行分析后似乎发生在 QGraphicsView::paintEvent(...) 方法内部的错误

为了帮助隔离这个问题，我想进入 Qt 源代码。通过 Qt 论坛和堆栈溢出进行了一些搜索，但无法找到将源代码与我的 QtCreator 版本集成的方法。

我目前尝试通过 QtSDK 管理器下载源代码，并在 Tools->Options->Debugger 中添加“Source Path Mapping”。我确信这一步是我犯错误的地方，因为在查看内部 Qt 头文件（即来自 QGraphicsView.h）时我什至无法切换到源代码

到目前为止，我已尝试添加以下源路径映射

`Source Path=/var/tmp/qt-src TargetPath=/home/paul/QtSDK/QtSources/4.7.4`

和

`Source Path=/var/tmp/qt-src TargetPath=/home/paul/QtSDK/QtSources/4.7.4/src`

两者都不起作用。

我还尝试直接从源代码构建 Qt，将其添加到 Qt Creator 中的“Qt 版本”列表中，并使用此版本创建新的项目配置。这也没有奏效。

同样，我尝试将 src 文件夹添加到我的 gdbinit 文件中。这也行不通。

我完全迷失了。

保罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T06:04:44.177

这里有人问了一个类似的问题：[Need to step into Qt sources (my IDE is Qt Creator)](https://stackoverflow.com/questions/5049578/need-to-step-into-qt-sources-my-ide-is-qt-creator)。

其他人在这里询问有关 Qt 的 Valgrind 错误：[Suppression files for Qt memory leaks with Valgrind](https://stackoverflow.com/questions/9174326/suppression-files-for-qt-memory-leaks-with-valgrind)

这里有一些关于[使用 Valgrind 和 Qt Creator](http://www.developer.nokia.com/Community/Wiki/Using_valgrind_with_Qt_Creator)的更多信息以及一些关于如何读取结果的解释。它有点过时于 2010 年末。

## 相关建议

*   我不会调试 QGraphicsView 类，只是因为努力让它工作或发现问题可能是徒劳的...... Qt 正在转向使用[SceneGraph](http://qt-project.org/videos/watch/scene_graph_a_different_approach_to_graphics_in_qt)作为 QML 的后端，而 QGraphicsView 的渲染引擎可能会过时.

*   更新到 Qt 库的最新稳定版本可能会对 QGraphicsView 产生重大影响。

*   如果您将 valgrind 错误发布到[Qt Trolls](https://bugreports.qt-project.org/secure/Dashboard.jspa)，有人可能会为您解释发生了什么。

*   除了传统的调试器，还有其他的调试技术。我一直在 Windows 中的 Qt 中编程（没有 valgrind）和一个大型多线程应用程序，它加载了一堆 Dll。我不得不对[对象树模型](http://qt-project.org/doc/qt-4.8/objecttrees.html)的清理工作抱有信心，并处理我输入的所有`new`调用。大多数时候我只是使用 QDebug 来查找错误。然后，我还结合使用[`qInstallMessageHandler()`](http://doc.qt.nokia.com/4.7-snapshot/qtglobal.html#qInstallMsgHandler)with[`QDebug`](http://doc.qt.nokia.com/4.7-snapshot/qdebug.html)来实现体面的日志记录，以解决难以跟踪的错误。

另请参阅[Qt 调试技术](http://qt-project.org/doc/qt-4.8/debug.html)。

# ruby-on-rails - 如何根据选择通过 ajax 扩展表单

> ID：10416680
> 
> 赞同：0
> 
> 时间：2012-05-02T15:18:42.377
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, forms

我有一个带有国家选择的表格。根据所选国家/地区，应使用新的输入字段扩展表单。

我在 google 上找到的大多数教程都是在填写论坛后提交的 ajax。

有人可以推荐一个关于如何在选择更改时通过 ajax 扩展表单的教程/操作方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:03:38.267

使用这样的东西。当然`url`, `country_data`, 和`custom_part`必须根据您的应用程序处理。并且返回的数据来自您的应用程序，最好没有布局，只有您要添加的部分。

```
$.get("url", country_data, function(returned_data){ $(".custom_part").html(returned_data) }) 
```

# ruby - 无法从 ruby 子进程通过管道进入 gvim

> ID：10416683
> 
> 赞同：1
> 
> 时间：2012-05-02T15:18:49.673
> 
> 标签：ruby, vim

我一直在尝试使用 PA_translator.vim 插件，但发现它在 Win32 Gvim 中不起作用。这似乎是因为在嵌入式 Vim Ruby 脚本中，无法使用从子进程传入的任何命令。原始进程动态构建命令，然后启动子进程以获取 JSON 片段，如下所示：

```
cmd = "require 'net/http'; p Net::HTTP.get('%s', '%s')"% [host, path]
response = `ruby -e "#{cmd}"` 
```

如果我在命令行 ruby​​ 脚本中运行它，它可以正常工作，但在 Vim 脚本中，管道似乎返回一个空字符串。

我还尝试了其他几种产生相同结果的方法：

```
response = ''
IO.popen("ruby.exe", "w+") do |f|
    f.write cmd
    f.close_write
    response = f.read
    p response
end 
```

乃至：

```
def redirect
    orig_defout = $stdout
    $stdout = StringIO.new
    yield
    $stdout.string
ensure
    $stdout = orig_defout
end

response = redirect { eval cmd } 
```

所有这些似乎都出于相同的原因而失败，无法从管道获取输出，我得到一个空字符串。GVim 是一个真正的 win32 进程，是否有某些原因导致子进程的管道不起作用？

**编辑**：如果我尝试从嵌入式 vim/perl 捕获管道输出，效果很好，所以我猜这是 vim -> win32 -> ruby​​ 组合的一些特殊问题：

```
fun! SayHello()
perl << EOF
    $bob = `ls`;
    VIM::Msg($bob);
EOF 
```

结束乐趣

# ios - AirPrint for ios Adob e 空气原生扩展 .ane

> ID：10416685
> 
> 赞同：1
> 
> 时间：2012-05-02T15:18:57.963
> 
> 标签：ios

我尝试创建一个本机扩展，以允许发送字节数组“png”并通过 AirPrint 打印。

有人试过吗？我的意思是字节数组。或者至少可以发送保存在文档中的本地图像的路径。

我刚开始时，我非常感谢任何具有良好 IOS 知识的人的帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T01:50:27.697

试试这个[https://github.com/janumedia/AirPrintANE/](https://github.com/janumedia/AirPrintANE/)可以从位图数据打印

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:52:20.823

从未尝试过任何打印，但您可以查看 [http://sugartin.info/2012/02/02/ios-print-functionality-to-print-using-airprinter/](http://sugartin.info/2012/02/02/ios-print-functionality-to-print-using-airprinter/) 其中有一个将 UIImage 发送到 airprinter 的示例. 要将位图数据从 as3 传递到 ios（并使用您的图形获取 uiimage），您可以在[https://github.com/memeller/ContactEditor/blob/master/ContactEditorXCode/ContactEditor.m](https://github.com/memeller/ContactEditor/blob/master/ContactEditorXCode/ContactEditor.m)上查看我的尝试 （查找 setContactImage 函数，行655)

# c++ - “记住牛奶”订阅日历的 Google 日历同步问题

> ID：10416687
> 
> 赞同：4
> 
> 时间：2012-05-02T15:19:02.377
> 
> 标签：c++, google-calendar-api

我们正在使用 Google Calendar API v2 将 Google 日历事件同步到我们的桌面应用程序。该应用程序检索所有日历事件并将其保存在本地以供将来参考。

我使用 Google 日历订阅的“Remember the Milk”日历存在同步问题。

这是我的申请流程：

1.  最初使用以下 HTTP 请求获取日历列表：https: [//www.google.com/calendar/feeds/default/allcalendars/full](https://www.google.com/calendar/feeds/default/allcalendars/full)

2.  使用在上一个请求中获得的日历 ID 从日历中获取所有事件：[http ://www.google.com/calendar/feeds/CalendarId/private/full?orderby=lastmodified&sortorder=descending&singleevents=true](http://www.google.com/calendar/feeds/CalendarId/private/full?orderby=lastmodified&sortorder=descending&singleevents=true)

3.  逐个处理每个日历并将日历更新的最小值标记值保存为上次日历同步，在下一次同步中使用此更新的最小值来检索更新的事件。

文档说它应该只提供更新的事件，但我的“记住牛奶”日历总是将所有事件作为更新的事件（每 20 到 30 分钟）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:14:33.233

查看您的查询字符串。您缺少更新的最小值。查询字符串应读取。

```
http://www.google.com/calendar/feeds/CalendarId/private/full?orderby=lastmodified&sortorder=descending&singleevents=true&updated-min=2005-08-09T10:57:00- 
```

# jquery - 使 jquery .on 函数与 AJAX 加载的内容一起工作

> ID：10416689
> 
> 赞同：24
> 
> 时间：2012-05-02T15:19:04.187
> 
> 标签：jquery, html, ajax

我无法让 .on 'click' 功能处理 AJAX 加载的内容。

我以前使用过 jquery .live，但这是第一次使用 .on 并且理解它以完全相同的方式工作，所以不确定我为什么会遇到问题。

下面是给出您单击的元素的 HTML

```
 <h1>Press &amp; Media</h1>
    <div id="back"></div>
    <div id="overlay-content">
        <span id="edocs" class="tab"></span>
        <span id="news" class="tab"></span>
        <span id="partners" class="tab"></span>
    </div> 
```

下面是加载 AJAX 内容的函数。

```
 $("#overlay-content").on('click','#news',function() {
        var active = 1;
        $("#loading").show();
        $("#overlay-content").fadeOut(1000, function() {
            $.get("http://<? echo ROOT; ?>includes/functions.php", { pressmediaNews: active }, function(data) {
                $("#loading").hide(400);
                $("#overlay-content").empty().append(data).fadeIn(1000);
            });
        });
    }); 
```

这应该加载以下 HTML

```
 <div id="news-left-panel">
        <h4>News Section</h4>
        <ul>
            <li id="newsID2" class="newsYear">
                <p>2012</p>
                <ul class="newsMonths" style="display:none">
                    <li>Jan
                        <ul class="newsArticles" style="display:none">
                            <li onClick="newsID(2)">test</li>
                        </ul>
                    </li>
                    <li>Feb</li>
                    <li>Mar</li>
                </ul>
            </li>
            <li id="newsID1" class="newsYear">
                <p>2011</p>
                <ul class="newsMonths" style="display:none">
                    <li>Dec
                        <ul class="newsArticles" style="display:none">
                            <li onClick="newsID(1)">Test</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </div> 
```

现在上面的代码根本不会执行，在萤火虫中显示任何错误等等。

所以我有点迷失为什么它不会执行，alert() 甚至没有执行。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-17T13:05:51.477

首先确保你击中了目标，试试这个，看看警报是否显示：

```
$(function() {
    $(document).on('click', '#news', function() {
       alert('ok');
    });
}); 
```

如果单击#news 元素时显示警报，则可以。

现在到这一行：

```
$.get("http://<? echo ROOT; ?>includes/functions.php", 
```

您正在使用速记 PHP 打开，需要打开，您可以尝试

```
<?php echo ROOT; ?> 
```

但是什么是ROOT，以前从未见过，并且在ROOT的PHP手册中找不到任何内容，所以我在自己的服务器上尝试使用最新版本的PHP，并得到一个错误，因为'ROOT'不存在，相反，它假设它是一个字符串，只是回显“ROOT”，所以你的链接看起来像：

```
$.get("http://ROOTincludes/functions.php", 
```

它是你自己在某处定义的变量，它应该以美元符号开头，如果它是你用 定义的东西`define()`，请确保它设置正确，如果它使用类似`$_SERVER['DOCUMENT_ROOT'];`的东西并不总是你可以在 javascript 中访问的东西，因为它会通常是比您的 webroot 更高的文件夹，并且不能在客户端访问，而只能在服务器端访问。

此外，您编写它的方式，从`http://`它开始应该是一个域名。尝试在浏览器中打开查看源代码并找到您的 ajax 函数并查看 ROOT 实际输出的内容，因为最终输出将在源代码中可见，并且如果在包含的配置文件等中使用 define() 进行设置，您可以看到它设置正确。

您的 javascript 还必须位于 PHP 文件中以供 PHP 执行，或者您必须修改服务器设置以通过 PHP 运行 JS 文件。

在我看来，只使用路径和文件名是正确的方法，试试这个并注意控制台（F12）：

```
$(document).on('click','#news',function() {
    var active = 1;
    var XHR = $.ajax({
                   type: 'GET',
                   url : '/actualpath/includes/functions.php',
                   data: { pressmediaNews: active }
              }).done(function(data) {
                   console.log(data);
              }).fail(function(e1, e2, e3) {
                   console.log('error : '+e1+' - '+e2+' - '+e3);
              });
    $("#loading").show();
    $("#overlay-content").fadeOut(1000, function() {
        XHR.done(function(data) {
            $("#overlay-content").empty().append(data).fadeIn(1000);
            $("#loading").hide(400);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T15:21:15.717

使用委托：

```
$('#overlay-content').on('click', '#newsID2', function() { }); 
```

这将绑定事件`#overlay-content`并检查冒泡事件是否源自`#newsID2`.

* * *

作为旁注：您的事件处理程序中有一个错字（`chikdren`应该是`children`），您应该真正摆脱这个丑陋的`onClick`内联事件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T15:21:12.517

应该更像：

```
$("#overlay-content").on('click', '#newsID2', function() {
    ....
}); 
```

或者换句话说：

```
$('.wrapper').on('event', '.target', function() {
    ...
}); 
```

where`.wrapper`是已经存在的元素（或文档），并且`.target`是要在其上运行事件的包装器内的元素。

该`live`功能基本上相当于：

```
$(document).on('event', '.target', function() { 
    ... 
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T18:09:56.440

[http://bugs.jquery.com/ticket/11203](http://bugs.jquery.com/ticket/11203)

关键句

> 如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

要处理这种情况，请尝试使用选择器参数绑定到文档对象：

```
$(document).on('click','#news',function() {...} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T05:33:02.703

## 新闻左面板

> **year_Month_newsID**您的新闻年、月、新闻 ID。例如**2012_5_16**、**2012_5_17**等

```
<div id="news-left-panel">
    <h4>News Section</h4>
    <ul>
        <li id="newsID2" class="newsYear">
            <p>2012</p>
            <ul class="newsMonths" style="display:none">
                <li>Jan
                    <ul class="newsArticles" style="display:none">
                        <li id="year_Month_newsID">test</li>
                    </ul>
                </li>
                <li>Feb</li>
                <li>Mar</li>
            </ul>
        </li>
        <li id="newsID1" class="newsYear">
            <p>2011</p>
            <ul class="newsMonths" style="display:none">
                <li>Dec
                    <ul class="newsArticles" style="display:none">
                        <li id="year_Month_newsID">Test</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

## jQuery 函数

```
$("#news-left-panel ul li").live("click", function(event) {
            var news=(this.id).split("_");
            var year=news[0];
            var month=news[1];
            var newsID =news[2];

            $.ajax({
                type: "POST",
                url: 'http://<? echo ROOT; ?>includes/functions.php',
                data: {
                    year: year,month:month,newsID :newsID
                },
                error: function(){
                    $('#news').html( "<p>Page Not Found!!</p>" );
                    // Here Loader animation
                },
                beforeSend: function(){
                    // Here Loader animation
                    $("#news").html('');
                },
                success: function(data) {
                    $('#news').html(data);

                }
            });
        });​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T16:03:55.807

既然您说您以前使用过 .live() ，那么这里的问题可能是您试图在附加之前绑定您对附加到文档的某些内容的点击？

当你使用 live 时，它​​会自动处理这类东西，但是当你不使用 live 时，通常必须在页面上存在这些东西，然后才能将任何事件绑定到它们。如果您使用 AJAX 添加内容，则在使用 AJAX 加载这些内容之前，您无法为这些内容设置点击事件。当您使用 .live() 时，您可以提前执行此操作。

我会这样做：

```
$("#overlay-content").on('click','#news',function() {
        var active = 1;
        $("#loading").show();
        $("#overlay-content").fadeOut(1000, function() {
            $.get("http://<? echo ROOT; ?>includes/functions.php", { pressmediaNews: active }, function(data) {
                $("#loading").hide(400);
                $("#overlay-content").empty().append(data).fadeIn(1000);

                //put your delegate/call/function,etc here

            });
        });
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T11:49:27.973

你确定你的 Ajax 调用是正确的/返回正确的 HTML 吗？

我在这里用 setTimeout() 替换了 $.get() （并简化了一点）：http: [//jsfiddle.net/q23st/](http://jsfiddle.net/q23st/)

它似乎有效，所以我怀疑您的 $.get() 没有返回预期返回的内容。

# ruby-on-rails - Rails I18n set_locale

> ID：10416691
> 
> 赞同：8
> 
> 时间：2012-05-02T15:19:08.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, i18n-gem

我想通过客户端浏览器区域设置`request.env['HTTP_ACCEPT_LANGUAGE']`和 URL 设置区域设置。

1.  如果用户访问一个 URL（例如：myapp.com），它应该检查`HTTP_ACCEPT_LANGUAGE`并重定向到正确的 URL（例如：myapp.com/en - 如果`browserlocale`是 en）

2.  如果用户随后通过语言菜单选择不同的语言，则应将 URL 更改为例如：myapp.com/de。

这是我到目前为止得到的：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :set_locale

private

  # set the language
  def set_locale
    if params[:locale].blank?
      I18n.locale = extract_locale_from_accept_language_header
    else
      I18n.locale = params[:locale]
    end
  end

  # pass in language as a default url parameter
  def default_url_options(options = {})
    {locale: I18n.locale}
  end

  # extract the language from the clients browser
  def extract_locale_from_accept_language_header
    browser_locale = request.env['HTTP_ACCEPT_LANGUAGE'].try(:scan, /^[a-z]{2}/).try(:first).try(:to_sym) 
    if I18n.available_locales.include? browser_locale
      browser_locale
    else
      I18n.default_locale
    end
  end
end 
```

在我的路线文件中，我得到：

```
Myapp::Application.routes.draw do
  # set language path
  scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do

    root :to => "mycontrollers#new"
    ...

  end

  match '*path', to: redirect("/#{I18n.locale}/%{path}"), constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }

  match '', to: redirect("/#{I18n.locale}")
end 
```

问题是路由文件首先被执行并且`HTTP_ACCEPT_LANGUAGE`没有效果，因为当涉及到控制器时，url-param 已经设置好了。

有没有人有解决方案？也许通过中间件解决它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T19:37:53.233

我会在你的路线上改变一些东西。

第一的：

```
scope :path => ":locale" do
  ... 
end 
```

第二：

我看到你在这里尝试做什么：

```
match '', to: redirect("/#{I18n.locale}") 
```

不过，这似乎是多余的。

我会摆脱那条线，只修改 set_locale 方法，如下所示：

```
# set the language
def set_locale
  if params[:locale].blank?
    redirect_to "/#{extract_locale_from_accept_language_header}"
  else
    I18n.locale = params[:locale]
  end
end 
```

# python - 如何使用 lxml 在 XML 元素名称中使用“：”？

> ID：10416693
> 
> 赞同：1
> 
> 时间：2012-05-02T15:19:19.417
> 
> 标签：python, lxml

如何使用以下方式生成和解析 XML `lxml`？

```
<s:Envelope xmlns:s="a" xmlns:a="http_//www.w3.org/2005/08/addressing">
....
</s:Envelope> 
```

我目前在解析和生成 XML 时在元素名称中使用 _ 交换 : ，但这似乎很愚蠢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:02:45.033

目前尚不清楚您要问什么，但也许这会有所帮助：

诸如`<s:Envelope>`使用 XML 命名空间前缀的元素。这用于表示`s:Envelope`该文档中的属性是在`a`命名空间中定义的。

LXML 使用大括号中的命名空间前缀表示 XML 命名空间，例如：`{a}Envelope`. 您的示例文档有点令人困惑，因为您还定义了`a:`命名空间前缀，所以：

*   `a:Element`等价于`{http://www.w3.org/2005/08/addressing}Element`, 并且
*   `s:Element`相当于`{a}Element`。

许多 LXML 命令允许您提供名称空间前缀映射。例如，要`Envelope`使用 XPATH 在文档中查找元素，您可以这样做：

```
import lxml.etree as etree
doc = etree.parse('mydocument.xml')
envelope = doc.xpath('//s:Envelope',
  namespaces={'s': 'a'}) 
```

请注意，这完全等同于：

```
envelope = doc.xpath('//x:Envelope',
  namespaces={'x': 'a'}) 
```

也就是说，名称空间*前缀*不必与源 XML 文档中使用的匹配；只有绝对命名空间很重要。

[您可以在此处](http://lxml.de/tutorial.html#namespaces)阅读有关 LXML 和名称空间的更多信息。

# java - (int)Math.pow(2,x) 和 1< 的 Java 结果不同 为什么以下两个操作在 Java 中会产生不同的结果，x = 31或者32会产生相同的结果x=3？ int x=3; int b = (int) Math.pow(2,x); int c = 1< <x; 0="" 1="" 2="" 3="" 4="" 5="" 7="" 9="" 20="" 31="" 32="" 13233="" 结果：="" 问问题="" 2012-05-02t15:19:20.020="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 为什么以下两个操作在="" java="" 中会产生不同的结果，x="31或者32会产生相同的结果x=3？" int="" x="3;" b="(int)" math.pow(2,x);="" c="1<<x;" ;="" 考虑="" 类型的限制。它可以容纳多大的数字？="" javabitwise-operatorsbit-shift="" 回答="" answer="" 有多个问题在起作用：="" anint只能存储="" 和="" 之间-2147483648的值2147483647。="" <<="" x仅使用="" 的最低五位x。因此，1="" 32根据定义，与="" 相同1="" 0。="" 对左操作数的值的二进制补码整数表示执行移位操作；这解释了为什么1="" 31是负面的。="" math.pow(2,="" 32)返回一个double。="" (int)(d)，其中dadouble大于2147483647返回2147483647（“类型的最大可表示值int”）。="" 这个面试问题的作用是表明(int)math.pow(2,="" x)并且对于超出...范围1="" x的值是不等价的。x030="" ps="" 有趣的是，使用longin="" place="" of="" int（和1lin="" 1）会给出另一组与其他两个不同的结果。即使最终结果转换为int.="" 于="" 2012-05-02t15:29:06.083="" 根据文档，math.pow将把它的两个参数都提升为双倍并返回双倍。显然，当返回的结果为="" double="" 并且您将其转换为="" 时，您将只获得最高的="" 位，其余的将被截断="" -="" 因此您始终会获得该(int)="" math.pow(2,x);值。当您进行位移时，您总是使用整数，因此会发生溢出。="" 2012-05-02t15:24:15.363="" 2012-05-02t15:22:31.803="" 这是一个长期案例的微基准。在我的笔记本电脑="" (2.8ghz)="" 上，使用="" shift="" 而不是math.pow快="" 倍以上。="" limit="50_000_000;" @test="" public="" void="" testpower()="" {="" random="" r="new" random(7);="" long="" t="System.currentTimeMillis();" for="" (int="" i="0;" <="" limit;="" i++)="" p="r.nextInt(63);" l="(long)Math.pow(2,p);" }="" t1="System.currentTimeMillis();" system.out.println((t1-t)="" 1000.0);="" 3.758="" s="" testshift()="" p;="" 0.523="" 2017-08-10t01:03:31.163="" 大小为="" 位，并且由于它是有符号的（默认情况下），因此第一位用于符号。当您向左移动="" 位时，您会得到two's="" compliment，即="" -(2^32)。当您向左移动="" 位时，它只会一直循环回到="" 1。如果您要使用="" 而不是="" 进行这种移动，您会得到您期望的答案（即直到您移动="" 63+="" 位）。="" 2012-05-02t15:35:07.487="" related="" android-webview="" android="" 在="" html="" 中附加数据="" sensormanager="" 奇怪如何重新映射coordinatesystem="" php="" 最简单的="" mysql="" 到="" mysqli="" 转换="" javascript="" 从输入文本中寻找有关下拉元素的="" 插件="" 使用带有="" jax-rs="" 的方法上的="" subpath="" turn.js="" 的鼠标单击和鼠标悬停效果不起作用="" firefox="" &="" ie="" 不运行内文="" 如果="" date_default_timezone_set()="" 已被调用，请检查="" 在android应用中显示rtsp流="" knockout.js="" 自定义绑定更新部分从="" ko="" 2.1.0="" 2.2.0="" 停止工作="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：10416694
> 
> 赞同：9
> 
> 时间：
> 
> 标签：java, bitwise-operators, bit-shift

为什么以下两个操作在 Java 中会产生不同的结果，`x = 31`或者`32`会产生相同的结果`x=3`？

```
int x=3;
int b = (int) Math.pow(2,x);
int c = 1<<x; 
```

结果：

```
x=32: b=2147483647; c=1;
x=31: b=2147483647; c=-2147483648;
x=3:  b=8         ; c=8 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T15:29:06.083

有多个问题在起作用：

*   An`int`只能存储 和 之间`-2147483648`的值`2147483647`。
*   `1 << x`仅[使用 的最低五位`x`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)。因此，`1 << 32`根据定义，与 相同`1 << 0`。
*   [对左操作数的值的二进制补码整数表示](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)执行移位操作；这解释了为什么`1 << 31`是负面的。
*   `Math.pow(2, 32)`返回一个`double`。
*   `(int)(d)`，其中`d`a`double`大于`2147483647`返回`2147483647`（[“类型的最大可表示值`int`”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)）。

这个面试问题的作用是表明`(int)Math.pow(2, x)`并且对于超出...范围`1 << x`的值是不等价的。`x``0``30`

PS 有趣的是，使用`long`in place of `int`（和`1L`in place of `1`）会给出另一组与其他两个不同的结果。即使最终结果转换为`int`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T15:24:15.363

根据文档，`Math.pow`将把它的两个参数都提升为双倍并返回双倍。显然，当返回的结果为 double 并且您将其转换为 int 时，您将只获得最高的 32 位，其余的将被截断 - 因此您始终会获得该`(int) Math.pow(2,x);`值。当您进行位移时，您总是使用整数，因此会发生溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:22:31.803

考虑 int 类型的限制。它可以容纳多大的数字？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-10T01:03:31.163

这是一个长期案例的微基准。在我的笔记本电脑 (2.8GHz) 上，使用 shift 而不是`Math.pow`快 7 倍以上。

```
int limit = 50_000_000;
@Test
public void testPower() {
    Random r = new Random(7);
    long t = System.currentTimeMillis();
    for (int i = 0; i < limit; i++) {
        int p = r.nextInt(63);
        long l = (long)Math.pow(2,p);
    }
    long t1 = System.currentTimeMillis();
    System.out.println((t1-t)/1000.0); // 3.758 s
}
@Test
public void testShift() {
    Random r = new Random(7);
    long t = System.currentTimeMillis();
    for (int i = 0; i < limit; i++) {
        int p = r.nextInt(63);
        long l = 1L << p;
    }
    long t1 = System.currentTimeMillis();
    System.out.println((t1-t)/1000.0); // 0.523 s
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T15:35:07.487

int 大小为 32 位，并且由于它是有符号的（默认情况下），因此第一位用于符号。当您向左移动 31 位时，您会得到[Two's Compliment](http://en.wikipedia.org/wiki/Signed_number_representations#Two.27s_complement)，即 -(2^32)。当您向左移动 32 位时，它只会一直循环回到 1。如果您要使用 long 而不是 int 进行这种移动，您会得到您期望的答案（即直到您移动 63+ 位）。</x;>

# ruby-on-rails - 如何将模块从 lib 目录包含到 ActionView 中？

> ID：10416699
> 
> 赞同：2
> 
> 时间：2012-05-02T15:19:41.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview

我正在尝试将自定义助手的新模块添加到 ActionView::Base 库。我能够从 config/initializers 目录加载模块，但是当我将它加载到库中时，不再找到该模块。我有：

```
# lib/my_templates/helper.rb
module MyTemplates
  module Helper
    def print_me
      return 'me'
    end
  end
end

ActionView::Base.send(:include, AtlasTemplates::Helper) 
```

在应用程序.rb

```
config.autoload_paths += Dir["#{config.root}/lib", "#{config.root}/lib/**/"] 
```

如果我将 helper.rb 放入 config/initializers 中就`<%= print_me -%>`可以了。如果我将它移动到它的库位置，那么我会得到`undefined local variable or method`print_me'`

我肯定在这里遗漏了一些东西。

# php - PHP： 我以前遇到过这个问题，但不记得是什么原因造成的。我有一个使用速记符号来打印变量的小应用程序，但它似乎没有被网络服务器解析？ 关于这里可能有什么问题的任何想法？这有点奇怪，因为其他一切都正常。 谢谢！ 问问题

> ID：10416700
> 
> 赞同：2
> 
> 时间：
> 
> 标签：php, apache

我以前遇到过这个问题，但不记得是什么原因造成的。我有一个使用速记符号来打印变量的小应用程序`<?=$myvar?>`，但它似乎没有被网络服务器解析？

关于这里可能有什么问题的任何想法？这有点奇怪，因为其他一切都正常。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T15:21:10.693

它是一个带有回显命令 (=) 的短打开标签。从 php 5.4 开始，它不再标记为短打开标记，因此即使 php.ini 设置**short_open_tags**从该版本开始设置为 off 也可以工作。对于早期版本，它取决于该选项。

更多信息：

[http://php.net/manual/en/ini.core.php#ini.short-open-tag](http://php.net/manual/en/ini.core.php#ini.short-open-tag)

您可以检查该选项，例如使用`$sot = ini_get('short_open_tags');`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:22:51.897

它可能在 PHP 配置中被关闭。您是否尝试将其添加到您的脚本中？

```
<?php
phpinfo();
?> 
```

无论如何，尽量避免使用短标签，因为它们除了造成可移植性问题之外没有任何用处。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T17:01:48.630

不仅要检查 short_opened_tags，还要确保它`AddHandler application/x-httpd-php .php`在您的 http.conf 文件中。如果它不存在，请添加它并重新启动您的 apache 服务器。

# php - 删除父元素，使用 saveHTML 将所有内部子元素保留在 DOMDocument 中

> ID：10416704
> 
> 赞同：9
> 
> 时间：2012-05-02T15:20:08.497
> 
> 标签：php, xpath, domdocument

我正在使用 XPath 处理一个简短的 HTML 片段；当我使用 $doc->saveHTML() 将更改的代码段输出回来时，`DOCTYPE`会被添加，并且`HTML / BODY`标签会包装输出。我想删除这些，但只使用 DOMDocument 函数将所有子项保留在里面。例如：

```
$doc = new DOMDocument();
$doc->loadHTML('<p><strong>Title...</strong></p>
<a href="http://www....."><img src="http://" alt=""></a>
<p>...to be one of those crowning achievements...</p>');
// manipulation goes here
echo htmlentities( $doc->saveHTML() ); 
```

这会产生：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" ...>
<html><body>
<p><strong>Title...</strong></p>
<a href="http://www....."><img src="http://" alt=""></a>
<p>...to be one of those crowning achievements...</p>
</body></html> 
```

我尝试了一些简单的技巧，例如：

```
# removes doctype
$doc->removeChild($doc->firstChild);

# <body> replaces <html>
$doc->replaceChild($doc->firstChild->firstChild, $doc->firstChild); 
```

到目前为止，这只删除了 DOCTYPE 并将 HTML 替换为 BODY。但是，此时剩下的是 body > 可变数量的元素。

我如何删除`<body>`标签但保留它的**所有**子标签，因为它们的结构是可变的，通过 PHP 的 DOM 操作以简洁干净的方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T18:09:20.363

# 更新

这是一个不扩展 DOMDocument 的版本，尽管我认为扩展是正确的方法，因为您正在尝试实现 DOM API 未内置的功能。

**注意：我将“干净”和“没有变通办法”解释为保持对 DOM API 的所有操作。一旦您进行字符串操作，这就是解决方法领域。**

就像在原始答案中一样，我正在做的是利用 DOMDocumentFragment 来操作都位于根级别的多个节点。没有进行字符串操作，对我来说这不是一种解决方法。

```
$doc = new DOMDocument();
$doc->loadHTML('<p><strong>Title...</strong></p><a href="http://www....."><img src="http://" alt=""></a><p>...to be one of those crowning achievements...</p>');

// Remove doctype node
$doc->doctype->parentNode->removeChild($doc->doctype);

// Remove html element, preserving child nodes
$html = $doc->getElementsByTagName("html")->item(0);
$fragment = $doc->createDocumentFragment();
while ($html->childNodes->length > 0) {
    $fragment->appendChild($html->childNodes->item(0));
}
$html->parentNode->replaceChild($fragment, $html);

// Remove body element, preserving child nodes
$body = $doc->getElementsByTagName("body")->item(0);
$fragment = $doc->createDocumentFragment();
while ($body->childNodes->length > 0) {
    $fragment->appendChild($body->childNodes->item(0));
}
$body->parentNode->replaceChild($fragment, $body);

// Output results
echo htmlentities($doc->saveHTML()); 
```

* * *

## 原始答案

这个解决方案相当冗长，但这是因为它通过扩展 DOM 来实现它，以使您的最终代码尽可能短。

`sliceOutNode`是魔法发生的地方。如果您有任何问题，请告诉我：

```
<?php

class DOMDocumentExtended extends DOMDocument
{
    public function __construct( $version = "1.0", $encoding = "UTF-8" )
    {
        parent::__construct( $version, $encoding );

        $this->registerNodeClass( "DOMElement", "DOMElementExtended" );
    }

    // This method will need to be removed once PHP supports LIBXML_NOXMLDECL
    public function saveXML( DOMNode $node = NULL, $options = 0 )
    {
        $xml = parent::saveXML( $node, $options );

        if( $options & LIBXML_NOXMLDECL )
        {
            $xml = $this->stripXMLDeclaration( $xml );
        }

        return $xml;
    }

    public function stripXMLDeclaration( $xml )
    {
        return preg_replace( "|<\?xml(.+?)\?>[\n\r]?|i", "", $xml );
    }
}

class DOMElementExtended extends DOMElement
{
    public function sliceOutNode()
    {
        $nodeList = new DOMNodeListExtended( $this->childNodes );
        $this->replaceNodeWithNode( $nodeList->toFragment( $this->ownerDocument ) );
    }

    public function replaceNodeWithNode( DOMNode $node )
    {
        return $this->parentNode->replaceChild( $node, $this );
    }
}

class DOMNodeListExtended extends ArrayObject
{
    public function __construct( $mixedNodeList )
    {
        parent::__construct( array() );

        $this->setNodeList( $mixedNodeList );
    }

    private function setNodeList( $mixedNodeList )
    {
        if( $mixedNodeList instanceof DOMNodeList )
        {
            $this->exchangeArray( array() );

            foreach( $mixedNodeList as $node )
            {
                $this->append( $node );
            }
        }
        elseif( is_array( $mixedNodeList ) )
        {
            $this->exchangeArray( $mixedNodeList );
        }
        else
        {
            throw new DOMException( "DOMNodeListExtended only supports a DOMNodeList or array as its constructor parameter." );
        }
    }

    public function toFragment( DOMDocument $contextDocument )
    {
        $fragment = $contextDocument->createDocumentFragment();

        foreach( $this as $node )
        {
            $fragment->appendChild( $contextDocument->importNode( $node, true ) );
        }

        return $fragment;
    }

    // Built-in methods of the original DOMNodeList

    public function item( $index )
    {
        return $this->offsetGet( $index );
    }

    public function __get( $name )
    {
        switch( $name )
        {
            case "length":
                return $this->count();
            break;
        }

        return false;
    }
}

// Load HTML/XML using our fancy DOMDocumentExtended class
$doc = new DOMDocumentExtended();
$doc->loadHTML('<p><strong>Title...</strong></p><a href="http://www....."><img src="http://" alt=""></a><p>...to be one of those crowning achievements...</p>');

// Remove doctype node
$doc->doctype->parentNode->removeChild( $doc->doctype );

// Slice out html node
$html = $doc->getElementsByTagName("html")->item(0);
$html->sliceOutNode();

// Slice out body node
$body = $doc->getElementsByTagName("body")->item(0);
$body->sliceOutNode();

// Pick your poison: XML or HTML output
echo htmlentities( $doc->saveXML( NULL, LIBXML_NOXMLDECL ) );
echo htmlentities( $doc->saveHTML() ); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-03T04:14:02.590

`saveHTML`可以输出文档的一个子集，这意味着我们可以要求它通过遍历body来一个一个地输出每个子节点。

```
$doc = new DOMDocument();
$doc->loadHTML('<p><strong>Title...</strong></p>
<a href="http://google.com"><img src="http://google.com/img.jpeg" alt=""></a>
<p>...to be one of those crowning achievements...</p>');
// manipulation goes here

// Let's traverse the body and output every child node
$bodyNode = $doc->getElementsByTagName('body')->item(0);
foreach ($bodyNode->childNodes as $childNode) {
  echo $doc->saveHTML($childNode);
} 
```

这可能不是一个最优雅的解决方案，但它确实有效。或者，我们可以将所有子节点包装在某个容器元素（例如 a `div`）中并仅输出该容器（但容器标签将包含在输出中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T18:21:09.450

这是我如何做到的：

-- 快速帮助函数，为您提供特定 DOM 元素的 HTML 内容

```
功能节点内容（$n，$outer=false）{
   $d = new DOMDocument('1.0');
   $b = $d->importNode($n->cloneNode(true),true);
   $d->appendChild($b); $h = $d->保存HTML();
   // 移除外部标签
   if (!$outer) $h = substr($h,strpos($h,'>')+1,-(strlen($n->nodeName)+4));
   返回 $h;
}

```

-- 在您的文档中查找正文节点并获取其内容

```
$query = $xpath->query("//body")->item(0);
如果（$查询）
{
    回显节点内容（$查询）；
}

```

**更新 1：**

一些额外信息：从 PHP/5.3.6 开始，DOMDocument->saveHTML() 接受一个可选的 DOMNode 参数，类似于 DOMDocument->saveXML()。你可以做

```
$xpath = 新 DOMXPath($doc);
$query = $xpath->query("//body")->item(0);
回声 $doc->saveHTML($query);

```

对于其他人，辅助功能会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-13T12:29:40.123

**tl;博士**

要求：`PHP 5.4.0`和`Libxml 2.6.0`

`$doc->loadHTML("<p>test</p>", LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD);`

**解释**

[http://php.net/manual/en/domdocument.loadhtml.php](http://php.net/manual/en/domdocument.loadhtml.php) "从 PHP 5.4.0 和 Libxml 2.6.0 开始，您还可以使用 options 参数来指定[额外的 Libxml 参数。](http://php.net/manual/en/libxml.constants.php) "

`LIBXML_HTML_NOIMPLIED`设置 HTML_PARSE_NOIMPLIED 标志，关闭隐含的 html/body... 元素的自动添加。

`LIBXML_HTML_NODEFDTD`设置 HTML_PARSE_NODEFDTD 标志，防止在找不到默认文档类型时添加默认文档类型。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-04T23:29:48.453

您有 2 种方法来完成此操作：

```
$content = substr($content, strpos($content, '<html><body>') + 12); // Remove Everything Before & Including The Opening HTML & Body Tags.
$content = substr($content, 0, -14); // Remove Everything After & Including The Closing HTML & Body Tags. 
```

或者更好的是这样：

```
$dom->normalizeDocument();
$content = $dom->saveHTML(); 
```

# c# - 收据预览的 WPF 自定义控件

> ID：10416705
> 
> 赞同：0
> 
> 时间：2012-05-02T15:20:12.223
> 
> 标签：c#, wpf, wpf-controls

![在此处输入图像描述](../Images/76316723596279efcb1ddb6978daa2b8.png)你好，

我需要将收据预览显示为 WPF 页面的一部分。附上收据样本。

收据上的每一行文本都可以有不同的对齐方式（一些居中，一些居右或居左）和颜色，具体取决于配置。此外，每种收据类型的行数可能会有所不同。我想知道要使用哪些控件来有效地实现这一点。我可以根据行数在后面的代码中动态创建标签，并使用不同的前景色以不​​同的方式对齐每个标签，但如果有的话，只是寻找一种有效的方法。收据的宽度不变，但长度可能。所有行和所有收据类型的字体都相同。任何想法都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:24:59.807

通常最好避免从后面的代码中动态添加标签或文本块等控件。这种类型的代码难以阅读，几乎不可能测试。相反，您应该使用视图模型类（查找 MVVM 模式）。您的视图模型可能具有返回 ReceiptItem 列表的属性，然后在您的视图（XAML 文件）中创建 ItemsControl 并将其绑定到您的 ReceiptItem 列表。现在您可以为 ReceiptItem 类创建一个模板，以便它们使用 Label、TextBlock 或您认为合适的任何内容显示所需的内容。

例如，在 C# 中，您需要两个类：

```
public class MyReceiptViewModel
{
    public List<ReceiptItem> ReceiptItems { get; set; }
}

public class ReceiptItem
{
    public string Content { get; set; }
    public bool IsHighlighted { get; set; }
} 
```

您的视图可能如下所示（假设您有一个 MyReceiptViewModel 实例作为数据上下文）：

```
<ItemsControl ItemsSource="{Binding ReceiptItems}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock 
                Text="{Binding Content}" 
                Foreground="{Binding IsHighlighted, Converter={StaticResource MyColorFromBooleanConverter}}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# java - 无法创建 LinkedList

> ID：10416707
> 
> 赞同：1
> 
> 时间：2012-05-02T15:20:14.827
> 
> 标签：java, list, map, linked-list

我想创建一个键是字符串并且值是整数的一对LinkedList？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T15:22:10.543

`LinkedList`没有*钥匙*。它是元素列表，*而不是*键/值映射。

如果你想要一个`LinkedList`每个元素都是一对`Integer`/`String`值的地方，你需要选择一个：

*   创建一个泛型`Pair`类
*   （Ab）使用现有的泛型类（例如`Map.Entry`）
*   为您的特定场景创建自定义类

我建议将最后一个选项作为最明智的选项 - 您将能够根据字符串和整数的*真正含义为其赋予适当的语义和名称。*哎呀，您还可以避免将整数装箱，因为您可以：

```
public class WhateverYouCallIt {
    private final int firstValue;
    private final String secondValue;

    // Constructor, properties
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:24:39.570

您只能在 LinkedList 中使用 Object，这意味着您不能使用 Java Primitives。但是，您似乎需要一个 Map 结构。

我推荐使用 java.util.HashMap，它允许你创建一个 Key、Value 对。

例子：

```
 HashMap<String,Integer> a = new HashMap<String,Integer>();
    a.put("one",1);
    a.put("two",2);

    System.out.println(a.get("one"));
    //prints 1
    System.out.println(a.get("two"));
    //prints 2 
```

编辑：根据您的评论，我看到您需要订单，然后使用以下示例：

```
 LinkedHashMap<String, Integer> b = new LinkedHashMap<String,Integer>();

    b.put("one",1);
    b.put("two",2);
    b.put("a",3);

    for (String key:b.keySet())
    {
        System.out.println(b.get(key));    // print 1 then 2 finally 3
    } 
```

希望这是您要问的（如果是，请修改您的问题）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T15:20:52.360

一个错误是您需要`Integer`而不是`int`，但正如其他人指出的那样，`LinkedList`它不采用键/值对。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T15:33:01.563

我想 HashMap 是你的追求。正如其他人所说，您不能在 LinkedList 或 ArrayList 等库存储类中使用诸如“int”之类的原始类型，而必须使用诸如“Integer”之类的对象。

HashMap hash = new HashMap();

阅读此内容以获取更多信息：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

# ruby - 包含嵌入式文档的 Mongoid 复杂查询

> ID：10416708
> 
> 赞同：0
> 
> 时间：2012-05-02T15:20:15.527
> 
> 标签：ruby, ruby-on-rails-3, mongoid

我有一个带有多个嵌入式模型的模型。我需要查询一条记录以查看它是否存在。问题是我必须包含对多个嵌入文档的引用，我的查询必须包含以下参数：

```
{
 "first_name"=>"Steve",
 "last_name"=>"Grove",
 "email_addresses"=>[
     {"type"=>"other", "value"=>"steve@stevegrove.com", "primary"=>"true"}
 ],
 "phone_numbers"=>[
     {"type"=>"work_fax", "value"=>"(720) 555-0631"},
     {"type"=>"home", "value"=>"(303) 555-1978"}
 ],
 "addresses"=>[
     {"type"=>"work", "street_address"=>"6390 N Main Street", "city"=>"Elbert", "state"=>"CO"}
 ],
} 
```

即使缺少某些字段（例如 _id 和关联），我如何查询所有嵌入式文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:46:27.530

有几件事要考虑。

1.  您确定查询必须包含所有这些参数吗？是否存在唯一标识记录的信息子集？说 ( `first_name`,`last_name`和 an `email_addresses.value`)。如果您可以用更少的工作完成同样的事情，那么查询所有条件将是愚蠢的。

2.  在 Mongoid 中，[where](http://mongoid.org/docs/querying/criteria.html#where)条件允许您直接使用 javascript，因此如果您知道如何编写 javascript 条件，您可以将一个 javascript 字符串传递给 where。

3.  否则你会写一个非常尴尬的 where 条件语句，幸好你可以使用点符号。

就像是：

```
UserProfile.where(first_name: "Steve", 
                   last_name: "Grove", 
                   :email_addresses.matches => {type: "other", 
                                                value: "steve@stevegrove.com", 
                                                primary: "true"}, 
                    ..., ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:42:19.113

响应嵌入式js的请求：

```
query = %{
  function () {
    var email_match = false;
    for(var i = 0; i < this.email_addresses.length && !email_match; i++){
      email_match = this.email_addresses[i].value === "steve@stevegrove.com";
    }
    return this.first_name === "Steve" &&
      this.last_name === "Grove" &&
      email_match;
  }
}
UserProfile.where(query).first 
```

它不漂亮，但它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T17:13:48.140

使用 Mongoid 3，您可以使用`elem_match` [http://mongoid.org/en/origin/docs/selection.html#symbol](http://mongoid.org/en/origin/docs/selection.html#symbol)

```
UserProfile.where(:email_addresses.elem_match => {value: 'steve@stevegrove.com', primary: true}) 
```

这假设

```
class UserProfile
  include Mongoid::Document
  embeds_many :email_addresses
end 
```

现在，如果您需要包含这些字段中的每一个，我建议您使用`UserProfile.collection.aggregate(query)`. 在这种情况下，您可以构建一个包含所有字段的巨大哈希。

```
query = { '$match' => {
  '$or' => [
    {:email_addresses.elem_match => {value: 'steve@stevegrove.com', primary: true}}
  ]
} } 
```

它开始变得有点疯狂，但希望这能让您对您的选择有所了解。[https://coderwall.com/p/dtvvha](https://coderwall.com/p/dtvvha)再举一个例子。

# javascript - 使用 Javascript 通过 Adob e Air App 访问 Sharepoint 2007

> ID：10416711
> 
> 赞同：1
> 
> 时间：2012-05-02T15:20:32.113
> 
> 标签：javascript, html, sharepoint, air

我需要在 Sharepoint 2007 服务器上签出、编辑和签入文档。文档为 XML 格式。我想在一个全是 HTML 和 Javascript 的 Adob​​e Air 应用程序中执行此操作。我试过`XMLHttpRequest()`没有运气。此时我只是想读取文件。

有没有办法通过客户端脚本来做到这一点？

这是我尝试过的：

```
function testGet(url){
     xmlhttp=new XMLHttpRequest();
     xmlhttp.open("GET",url,false);
     xmlhttp.setRequestHeader( 'Content-Type','text/xml; charset=utf-8');
     xmlhttp.send();
     if(xmlhttp.readyState == 4){
         xmlDoc=xmlhttp.responseText;
         alert(xmlDoc);
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:44:07.913

[如果您拥有 SharePoint 2010，则可以使用客户端对象模型](http://msdn.microsoft.com/en-us/library/ee535231.aspx)的 JavaScript (EMCScript) 版本来操作文档。

这显示使用托管客户端对象模型（.net 版本），但您应该能够使用 JavaScript 版本执行相同操作 -[使用带有 Open XML SDK 2.0 的 SharePoint Foundation 2010 托管客户端对象模型](http://msdn.microsoft.com/en-us/library/ee956524.aspx)

如果您使用的是 SharePoint 2007，那么您可以使用[SharePoint Web 服务](http://msdn.microsoft.com/en-us/library/dd878586%28v=office.12%29.aspx)- 这个 codeplex 项目应该让您开始使用来自 javascript 的 Web 服务 - [SPServices](http://spservices.codeplex.com/)

# tkinter - Tkinter：如何在不导致错误的情况下删除输入字段？

> ID：10416712
> 
> 赞同：0
> 
> 时间：2012-05-02T15:20:35.460
> 
> 标签：tkinter, python-2.7

在用户给出他/她的名字后，我试图删除一个条目字段，但是，使用此代码时出现错误：

```
from Tkinter import *
from random import randrange

class Application(Frame):
    def __init__(self):

        Frame.__init__(self)
        self.grid()

        self.nameEntry = Entry(self)
        self.nameEntry.grid(row=0, column=0, columnspan=4)

        self.setupBtn = Button(self, text = "Generate", command=self.setup)
        self.setupBtn.grid(row=4, column=0, columnspan=4)

        self.preText = Text(self, width=50, height=3, wrap=WORD)
        self.preText.grid(row=6, column=0, columnspan=4)
        self.preText.delete(0.0, END)
        self.preText.insert(0.0, "If you enter your name, i'll give you a random                         number each time!")

        self.statusLbl = Label(self, text="What's your name?", bg="white")
        self.statusLbl.grid(row=7, column=0, columnspan=4, sticky=W)

    def setup(self):        
        name = self.nameEntry.get()
        if name != "":
            self.nameEntry.destroy()
            self.setupBtn = Button(self, text = "Roll Again", command=self.setup)
            self.setupBtn.grid(row=4, column=0, columnspan=4)

        randomNumber = randrange(10, 100)
        if name == "":
            message = "Your name please!"

            self.preText.delete(0.0, END)
            self.preText.insert(0.0, message)
        else:
            self.preText.delete(0.0, END)
            self.preText.insert(0.0, str(randomNumber))

Application().mainloop() 
```

这是错误：

> Tkinter 回调 Traceback 中的异常（最近一次调用最后一次）：
> 
> ```
> File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__ return self.func(*args)   
> File "C:/Users/User/Desktop/app.py", line 25, in setup name = self.nameEntry.get()
> File "C:\Python27\lib\lib-tk\Tkinter.py", line 2391, in get return self.tk.call(self._w, 'get') 
> TclError: invalid command name ".45073096L.45073736L" 
> ```

我想在用户输入名称并单击滚动按钮后删除名称输入字段。但是我没有滚动，而是得到了那个错误。

有人可以帮助我吗？据我所知，这是因为`name = self.nameEntry.get()`用于存储名称，因此，当我删除它时，它会导致问题。你有解决方法吗？我不是很好，因此不确定如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:51:55.553

这里有两个选择：

（快速而肮脏）您可以将 setup() 中的第一个 if 更改为：

```
if name != "":
    self.nameEntry.grid_forget()
    self.setupBtn.config(text="Roll Again") 
```

grid_forget() 导致 Tk 删除小部件，但实际上并未销毁它。此外，您无需重新创建按钮，只需告诉它更改其文本即可。另一种方法是设置 self.name=None`__init__`并将 setup() 更改为：

```
def __init__(self):
    self.name=None
    # rest of __init__ the same

def setup(self):
    if not self.name:
        self.name = self.nameEntry.get()
        self.nameEntry.destroy()
        self.setupBtn.config(text="Roll Again")

    randomNumber = randrange(10, 100)
    if not self.name:
        message = "Your name please!"
        self.preText.delete(0.0, END)
        self.preText.insert(0.0, message)
    else:
        self.preText.delete(0.0, END)
        self.preText.insert(0.0, str(randomNumber)) 
```

不幸的是，我还没有为 Tkinter/ttk 找到一个好的中央信息来源，但这里是我找到的：

*   [http://www.tkdocs.com/](http://www.tkdocs.com/)（从这里开始，教程有一些很棒的东西）
*   [http://effbot.org/tkinterbook/tkinter-index.htm（Tkinter](http://effbot.org/tkinterbook/tkinter-index.htm)文档）
*   [http://docs.python.org/library/ttk.html#module-ttk（2.7](http://docs.python.org/library/ttk.html#module-ttk) Python ttk 模块）
*   [http://www.tcl.tk/man/tcl8.5/contents.htm](http://www.tcl.tk/man/tcl8.5/contents.htm)（用于真正深入挖掘 tcl/tk 8.5 文档）

尽可能使用 ttk 小部件，它们使您的应用程序看起来更像原生主机应用程序。至于 Tix，它主要是为了向后兼容。

# jira - 如何在jira小工具的编辑配置中更改“修改器”字段的名称-我想将“修改器”更改为“编辑标题”

> ID：10416714
> 
> 赞同：0
> 
> 时间：2012-05-02T15:20:54.640
> 
> 标签：jira, jira-plugin

如何在jira小工具的编辑配置中更改“修改器”字段的名称-我想将“修改器”更改为“编辑标题”

*   项目清单

    ![我想将修改器更改为我提供的屏幕截图中的编辑标题](../Images/2469a053259bbe20a1ac880d90f2c6a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:22:57.943

大概定义在

atlassian-gadgets-dashboard/plugin/src/main/resources/com/atlassian/gadgets/dashboard/internal/i18n_fr.properties

这将需要重建为 JIRA 提供标准小工具的插件。这不是一件容易的事，但有可能。

# android - android ndk 和 opengl-es 1.0/1.1 - 2D 图形

> ID：10416716
> 
> 赞同：0
> 
> 时间：2012-05-02T15:21:03.873
> 
> 标签：android, opengl-es, android-ndk

我正在开发一个使用 opengl 1.1 的游戏。我希望使用 opengl 将纹理直接打印到 2D 屏幕上。我才刚刚开始。我在这个位置关注博客文章：

[http://quirkygba.blogspot.com/2010/10/android-native-coding-in-c.html](http://quirkygba.blogspot.com/2010/10/android-native-coding-in-c.html)

不过，我无法让它工作。附上一大段代码，应该在屏幕上打印一些东西。什么都会好的。现在它只打印黑色。如果我取消注释“glClearColor”和“glClear”行，我可以获得屏幕颜色，所以我知道我可以调用 opengl 命令并让它工作。就好像“glDrawTexiOES”不起作用。我正在使用 ndk 7b，并且已经在模拟器以及 2.2 和 2.3 设备上进行了测试。任何帮助，将不胜感激。

```
// Android.mk file ////////////////////////

LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := something
LOCAL_CFLAGS    := -Werror 
LOCAL_SRC_FILES := something.c
LOCAL_LDLIBS    := -llog -lGLESv1_CM 

include $(BUILD_SHARED_LIBRARY)

// something.c ////////////////////////////////

//some other includes here.
#include <GLES/gl.h>
#include <GLES/glext.h>

#define  LOG_TAG              "something-jni"
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)
#define RGB565(r, g, b)  (((r) << (5+6)) | ((g) << 6) | (b))

#define TRUE 1
#define FALSE 0 

#define TEX_WIDTH   256
#define TEX_HEIGHT  256

#define TEX_DIMENSION   256

static uint16_t *pixbuf = NULL;
static GLuint   texture;
static int screen_width, screen_height;

static void check_gl_error(const char* op)
{
    GLint error;
    for (error = glGetError(); error; error = glGetError())
    LOGE("after %s() glError (0x%x)\n", op, error);
}

void init(void)
{
    int i;
    int tex_width, tex_height;

    tex_width = TEX_WIDTH;
    tex_height = TEX_HEIGHT;

    GLint crop[4] = { 0, tex_height, tex_width, - tex_height };

    pixbuf = malloc(tex_width * tex_height * 2);
        for (i = 0; i < TEX_DIMENSION * TEX_DIMENSION ; i ++ ) {
        pixbuf[i] = 0xffff;//RGB565(0xf,0,0);
    }

    glEnable(GL_TEXTURE_2D);

    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);

    glTexParameterf( GL_TEXTURE_2D,
        GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    check_gl_error("glTexParameteri");

    glTexParameterf( GL_TEXTURE_2D,
            GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    check_gl_error("glTexParameteri");

    glTexParameteriv(GL_TEXTURE_2D, GL_TEXTURE_CROP_RECT_OES, crop);
    check_gl_error("glTexParameteriv");

    glShadeModel(GL_FLAT);
    check_gl_error("glShadeModel");

    glTexImage2D(GL_TEXTURE_2D, 0, 
        GL_RGB, 
        tex_width, tex_height, 
        0, 
        GL_RGB,
        GL_UNSIGNED_SHORT_5_6_5, 
        pixbuf);
    check_gl_error("glTexImage2D");

    glDisable(GL_BLEND);
    glDisable(GL_DITHER);
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_FOG);
    glDisable(GL_LIGHTING);
    glDisable(GL_ALPHA_TEST);
    glDisable(GL_COLOR_LOGIC_OP);
    glDisable(GL_COLOR_MATERIAL);
    glDisable(GL_STENCIL_TEST);

    glDepthMask(GL_FALSE);
    check_gl_error("glDepthMask");

    glDisable(GL_CULL_FACE);
    check_gl_error("glDisable");

    //glClearColor(1.0f, 0.0f, 0.0f, 0.0f);
    //glClear(GL_COLOR_BUFFER_BIT);
    glDrawTexiOES(0, 0, 0, screen_width, screen_height);

    check_gl_error("glDrawTexiOES");

}

// JNI methods for something.c ////////////////

JNIEXPORT void JNICALL Java_org_..._Panel_JNIinit(JNIEnv * env, jobject  obj, jint w, jint h)
{
    //screen_width = w;
    //screen_height = h;
    init();

} 
```

正如我所说，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:23:23.627

你确定你的纹理尺寸是2的幂吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T16:42:57.330

除非您有一些未与我们共享的代码，否则我注意到的第一件事是您不会在任何地方创建 OpenGL 上下文或表面。您应该研究如何在 Android NDK 中使用 EGL。

# perl - 解析树和字节码一样吗？

> ID：10416727
> 
> 赞同：8
> 
> 时间：2012-05-02T15:21:31.023
> 
> 标签：perl

字节码和解析树之间到底有什么区别，特别是 Perl 使用的那个？它们实际上是指相同的概念，还是有区别？

我熟悉 Python 和 Java 中字节码的概念，但是在阅读 Perl 时，我了解到它应该在其解释器中执行解析树（而不是字节码）。

如果确实有区别，那么 Perl 不使用字节码（或 Python 不使用解析树）的原因是什么？主要是历史原因，还是需要不同编译/执行模型的语言之间存在差异？Perl（通过合理的努力和执行性能）可以通过使用字节码解释器来实现吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T15:35:42.903

Perl 使用的不是[解析树](http://en.wikipedia.org/wiki/Parse_tree)，至少不是 Wikipedia 如何定义它。这是一个操作码树。

```
>perl -MO=Concise -E"for (1..10) { say $i }"
g  <@> leave[1 ref] vKP/REFC ->(end)
1     <0> enter ->2
2     <;> nextstate(main 49 -e:1) v:%,{,2048 ->3
f     <2> leaveloop vK/2 ->g
7        <{> enteriter(next->c last->f redo->8) lKS/8 ->d
-           <0> ex-pushmark s ->3
-           <1> ex-list lK ->6
3              <0> pushmark s ->4
4              <$> const[IV 1] s ->5
5              <$> const[IV 10] s ->6
6           <#> gv[*_] s ->7
-        <1> null vK/1 ->f
e           <|> and(other->8) vK/1 ->f
d              <0> iter s ->e
-              <@> lineseq vK ->-
8                 <;> nextstate(main 47 -e:1) v:%,2048 ->9
b                 <@> say vK ->c
9                    <0> pushmark s ->a
-                    <1> ex-rv2sv sK/1 ->b
a                       <#> gvsv[*i] s ->b
c                 <0> unstack v ->d
-e syntax OK 
```

除了，尽管被称为树，它并不是真正的树。注意到箭头了吗？这是因为它实际上是一个类似列表的操作码图（就像任何其他可执行文件一样）。

```
>perl -MO=Concise,-exec -E"for (1..10) { say $i }"
1  <0> enter
2  <;> nextstate(main 49 -e:1) v:%,{,2048
3  <0> pushmark s
4  <$> const[IV 1] s
5  <$> const[IV 10] s
6  <#> gv[*_] s
7  <{> enteriter(next->c last->f redo->8) lKS/8
d  <0> iter s
e  <|> and(other->8) vK/1
8      <;> nextstate(main 47 -e:1) v:%,2048
9      <0> pushmark s
a      <#> gvsv[*i] s
b      <@> say vK
c      <0> unstack v
           goto d
f  <2> leaveloop vK/2
g  <@> leave[1 ref] vKP/REFC
-e syntax OK 
```

Perl 的操作码和 Java 的字节码之间的区别在于 Java 的字节码被设计为可序列化的（存储在文件中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T15:25:24.667

解析树是程序的标记，存储在显示其嵌套的结构中（哪些参数属于哪个函数调用，哪些语句在哪些循环中等），而字节码是转换为二进制符号的程序代码，以便更快地执行一个虚拟机。例如，如果您有以下虚构语言的代码：

```
loop i from 1 to 10 {
    print i
} 
```

解析树可能如下所示：

```
loop
    variable
        i
    integer
        1
    integer
        10
    block
        print
            variable
                i 
```

同时，为面向堆栈的虚拟机编译的原始和符号形式的字节码可能如下所示：

```
0x01 0x01    PUSH 1
             START:
0x02         DUP
0x03         PRINT
0x05         INCREMENT
0x02         DUP
0x01 0x0a    PUSH 10
0x04         LESSTHAN
0x06 0xf9    JUMPCOND START 
```

编译程序时，您首先需要解析源代码（通常生成解析树），然后将其转换为字节码。跳过第二步并直接从解析树执行会更容易。此外，如果语言语法非常复杂（例如它允许修改代码），那么生成字节码会变得更加复杂。如果有一个 eval 类型的函数来执行任何代码，则必须将整个编译器与应用程序一起分发，才能将虚拟机用于此类代码。只包括一个解析器更简单。

在 perl 的下一个版本 Perl 6 中，代码应该被编译为字节码并在 Parrot 虚拟机上运行。预计会提高性能。字节码可以相当简单地进一步编译为处理器的本机指令（这称为 JIT 编译器），以接近 C 等编译语言的速度。

# mysql - birt/pentaho 报告中 mysql 变量的可能错误

> ID：10416728
> 
> 赞同：1
> 
> 时间：2012-05-02T15:21:32.353
> 
> 标签：mysql, variables, pentaho, birt

birt 和 pentaho 3.9 出现奇怪的错误。我收到以下查询：

```
SELECT 
@med:=care_med_products_main_movements.medicament, 
@prc:=care_med_products_main_movements.price,
@exp_date:=care_med_products_main_movements.expiry_date, 
@pharma:=care_department.nr,
... 
```

在 Pentao @exp_date 下使用 Blob 数据类型，在 Birt 下使用 Date 数据类型。我的安装是pentaho 3.9 ce，birt web viewer 3.7.2安装在pentaho下。它们具有相同的 jdbc 驱动程序，并且所有与 birt 相关的内容都是相同的。

问候gj。

# facebook - 当我喜欢我的网站时，我的所有 og 属性都不会出现在新闻提要中。而是显示了一些 Facebook 默认文本

> ID：10416729
> 
> 赞同：0
> 
> 时间：2012-05-02T15:21:32.790
> 
> 标签：facebook, debugging, facebook-graph-api, facebook-like

我用[调试器](http://developers.facebook.com/tools/debug)验证了我的代码，但我的所有属性都没有像我希望的那样显示在新的提要上。相反，它似乎显示了 Facebook 默认文本：

> 美容与水疗研究所 | Facebook www.facebook.com Facebook 是一种社交工具，可将人们与朋友以及在他们周围工作、学习和生活的其他人联系起来。人们使用 Facebook 与朋友保持联系，上传无限数量的照片，发布链接和视频，并了解更多关于他们遇到的人的信息。

我怎样才能让它显示我的 og 属性？我网站上的所有代码都在下面。

```
<html xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<script src="//connect.facebook.net/en_US/all.js#xfbml=1" id="facebook-jssdk"></script>
<meta property="og:title" content="Cosmetology Schools and Beauty Salons" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://www.cosmetologyandspainstitute.com/facebook-tabs/CSI_Logo_2012-square.jpg" />
<meta property="og:url" content="http://www.cosmetologyandspainstitute.com/" />
<meta property="og:site_name" content="Cosmetology and Spa Institute" />
<meta property="fb:admins" content="1540268369" />
<meta property="og:description" content="The Cosmetology and Spa Institute has 2 of the best cosmetology and esthetician schools in Chicago. Our Illinois beauty schools, cosmetology and esthetics programs, provide results that truly matter." />
</head>

<body>

<script type="text/javascript">(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div style="margin-left:25px" class="fb-like" data-href="http://www.facebook.com/CosmetologySpaInstitute" data-send="false" data-layout="button_count" data-show-faces="false"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:33:42.360

刚刚测试它 - 找不到任何问题，您的描述和图像显示在元元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:45:11.363

这是因为`data-href`您的点赞按钮指向 Facebook (http://www.facebook.com/CosmetologySpaInstitute) 上的页面，而不是点赞按钮所在的页面，因此 opengraph 标记甚至都不会被读取。取而代之的是，Facebook 从 Facebook 的页面中抓取它所能提供的内容。

实际上，点击喜欢的不是您的网页，而是您的 Facebook 主页。

# regex - 简单的正则表达式在 htaccess 中不起作用

> ID：10416730
> 
> 赞同：0
> 
> 时间：2012-05-02T15:21:34.340
> 
> 标签：regex, .htaccess, url-rewriting

看起来像一个简单的问题。但我根本不明白：

这条 htaccess 规则确实有效：

```
RewriteEngine On
RewriteRule ^m(.+)$ ?s=$1 
```

但这不会：

```
RewriteEngine On
RewriteRule ^(.+)$ ?s=$1 
```

它返回一个**内部服务器错误**。那个正则表达式有什么问题？为了工作应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:30:49.760

我不知道“不起作用”的确切含义，但我认为它可能会陷入重写循环。

尝试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^?s=
RewriteRule ^(.+)$ ?s=$1 
```

我没有对此进行测试，但它应该做的只是在尚未添加 ?s 参数的情况下重写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:21:26.610

哦，我刚刚意识到您还可以在 RewriteConds 中查找实际的查询字符串。你可以试试：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !s=
RewriteRule ^(.+)$ ?s=$1 
```

# codeigniter - Codeigniter 上传不接受 .doc 文件

> ID：10416731
> 
> 赞同：0
> 
> 时间：2012-05-02T15:21:37.023
> 
> 标签：codeigniter, file-upload, mime-types

尝试上传时出现以下错误：

“您尝试上传的文件类型不允许。”。

**这是我为 .doc 制作的 mime：**

'doc' => array('application/msword','application/doc','appl/text','application/vnd.msword','application/word','application/winword','application/vnd. ms-word','application/x-msw6','application/x-msword'),

正如你所看到的，我已经尝试通过添加更多的哑剧来弥补它。我不知道问题可能是什么......文件是.doc。请注意，上传 pdf 确实有效！我也在用mac。

**这是我的代码：**

```
$sntError = $this->uploadFile($id,'notes','doc|pdf|docx');

private function uploadFile ($id,$input,$extensions) {
 $this->load->library('upload');
 $config['allowed_types'] = $extensions;
 $config['upload_path'] = './upload/sermon/'. $input;
 $config['file_name'] = $input .'-'. $id;
 $config['max_size'] = '10000';
 $config['overwrite'] = true;
 $this->upload->initialize($config);
 $uploaded = $this->upload->do_upload($input);

 $errors = $this->upload->display_errors('<div class="error">', '</div>');

 if (!$errors && $uploaded) {
  $fileData = $this->upload->data();
  $this->saveSermonAttachments($id,$input,$fileData['file_name']);
 } else {
  return $errors;
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:21:50.787

我做了 print_r($fileData); 找出 .doc file_type 是什么。它是“文本/纯文本”，所以我将它添加到我的 mimes.php 中，它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:48:34.863

更改扩展名的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:04:47.890

将此添加到 config---->mimes.php

```
 'doc'   =>  'application/msword',
            'docx'  =>  array('application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/zip'),
            'xlsx'  =>  array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip'),
            'word'  =>  array('application/msword', 'application/octet-stream'), 
```

# jquery - .show() .hide() 不能在 FIREFOX 中工作，在 IE 中工作

> ID：10416732
> 
> 赞同：0
> 
> 时间：2012-05-02T15:21:39.363
> 
> 标签：jquery, html, hide, show

我正在使用2个输入字段，第一个是真实的，另一个将被隐藏，就在它后面，使用`position:fixed;`，当用户提交表单时，会有一个表单验证，如果该原始字段为空，则不可见输入将显示为红色背景，并带有警告消息。这是有效的，通过使用`.show()`之后`display:none;` 我在jquery中编写了另一个代码，这使得这个警报输入消失了，当用户点击它时，意味着他正在尝试访问原始输入以便他可以在其中写入，并且这是工作，通过使用`.hide()`; 问题是，当我再次单击提交时，警报输入没有出现……再次，在 Firefox 中；但它在 IE 中运行良好。

这是 HTML 代码：

```
 <div style="   padding-top:2px; overflow:hidden; float:left  ">
<div style="float:left; ">
<label for="email">
E-mail
</label> 
<br>
<div style="position:relative;">
<input class="inputtext" type="text" id="email" name="email" maxlength="32" style=" width:140px; height:15px;" tabindex=1/>
<input class="inputtext" type="text" id="emailnotification" name="emailnotification" maxlength="32" style=" width:140px; background-color: rgb(220, 20, 60); color: white; z-index:20; display:none; height:15px; font-weight: bold; position:absolute; left:0px;"/>
</div>
</div> 
```

现在这是表单验证功能的一部分：

```
function validateForm()
{

    var xe;
    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
    var xemail=document.forms["signinForm"]["email"].value;
    if(xemail==null || xemail=="")
        {$("#emailnotification").val("Email is Required");  
        $("#emailnotification").show();

            xe=1;
        }
    else if (reg.test(xemail)==false)
        {   

            $("#emailnotification").val("Email is not Valid");
            $("#emailnotification").show();
            xe=1;
        } 
```

现在这是隐藏它的jquery代码：

```
 $("#emailnotification").click ( 
function() { 
$("#emailnotification").hide(); 
$("#email").focus(); 
$("#emailnotification").blur(); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:27:58.337

我猜问题出在`var xemail=document.forms["signinForm"]["email"].value` ...您是否检查过警报是否`xemail`在 IE 和 FF 中相同？我认为 FF 和 IE 使用形式不同。只是为了检查尝试给'email'一个id并用它来引用它，比如`var xemail = $("#email").val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:47:34.037

[在 Firefox 中工作](http://jsfiddle.net/sybSu/)

虽然我改变了一点代码......

`$("#emailnotification").blur();`是没用的，因为你先把注意力集中在其他地方。

（我也使用了鲁道夫的建议）

# java - 通过网络路径读取文件

> ID：10416736
> 
> 赞同：12
> 
> 时间：2012-05-02T15:21:43.650
> 
> 标签：java, file-io

我有这个奇怪的问题，当我使用

```
File FileToRead = new File("\\\\MYSERVER\\MYFOLDER\\MYFOLDER\\MYPICTURE.JPG"); 
```

通过网络读取文件，我得到的只是一个空指针异常。通常，本地路径适用于此，但在网络路径上时，我无法让它工作。有任何想法吗？

PS：哦，我的网络连接似乎可以正常工作，在 Windows 资源管理器中访问数据时没有问题...

更多代码：

```
File FileToRead = new File("file://DOKSERVICE/Somefolder/ProductImage/01001.JPG");
//File FileToRead = new File("c:\\dog.jpg"); local test
BufferedImage image = ImageIO.read(FileToRead);
BufferedImage resizedimage = new BufferedImage(260, 260,BufferedImage.TYPE_INT_RGB ); 
Graphics2D g = resizedimage.createGraphics();  
g.drawImage(image, 0, 0, 260, 260, null);  
g.dispose(); 
picture.setIcon(new ImageIcon(image)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T15:27:15.720

只需将文件路径指定为 URI：

```
File FileToRead = new File(new URI("file://MYSERVER/MYFOLDER/MYFOLDER/MYPICTURE.JPG")); 
```

**编辑**请注意，该字符串是一个 URI！它不能包含空格，因此您必须用“%20”替换它们才能使其工作。

# javascript - 如何检查 HTML5 视频是否在 Windows Phone 7 上结束？

> ID：10416737
> 
> 赞同：1
> 
> 时间：2012-05-02T15:21:53.560
> 
> 标签：javascript, html, events, video

我注意到，当 HTML5 视频结束时，Windows Phone 7 的默认浏览器不会触发“结束”事件。

所以我想我可以每 100 毫秒不断检查当前时间，然后计算：

`if (videolength - video.currentTime <= 0) alert("ended");`

这也不起作用，因为 Windows Phone 7 的本机浏览器总是这样：`"170 - 0"`

video.currentTime**始终**为0，无论我检查视频的哪个部分。

那么如何检查视频是否已在 Windows Phone 7 上结束？

**更新：**我刚刚检查了浏览器的用户代理，它说的是 ie9。那么，为什么它不想触发“结束”事件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:08:35.233

如果您尝试使用 addEventListener 或通过 jQuery 绑定来监听事件，则需要使用事件类型“end”而不是元素事件处理程序的名称“onended”。

[更新]

因此，IE 9 移动版似乎支持 HTML5 视频 API 的一个非常有限的子集。这个[W3 演示](http://www.w3.org/2010/05/video/mediaevents.html)对于测试它实际支持的 API 的哪些元素很有用。

根据您的要求，从问题中并不完全清楚，在我看来，您的选择非常有限。您可以：

1.  使用浏览器的本机播放器，接受无法检测到视频结尾的事实，并等待 Microsoft 采取行动，为您需要的 API 部分添加支持。
2.  使用 Flash 解决方案作为后备方案（如果您计划支持旧版浏览器，无论如何您都需要一个），并鼓励少量但不可否认的不断增长的 IE 9 移动用户安装[Metro 浏览器](http://www.windowsphone.com/en-US/apps/60aa8848-6cc8-4ec4-94b7-1d134550b57b)。它得到了褒贬不一的评价，并且不完全清楚它是否支持列出的 Flash 视频播放器以外的播放器，但确实声称支持 YouTube。这可能至少值得考虑。
3.  希望 Google 更新[Chrome 框架](http://www.google.com/chromeframe)以在 Windows 7 手机上运行。我不知道这种可能性有多大，但是用谷歌框架填充 IE 9 的想法让我很开心，到目前为止，这个答案的笑点很低。

哦，还有微软，如果你打算效仿 Apple 的做法，在你的移动设备上放弃对 Flash 的支持，至少要确保你的浏览器支持大量有用的 HTML5 视频 API。

# c++ - 编写用于日志记录的宏

> ID：10416738
> 
> 赞同：3
> 
> 时间：2012-05-02T15:21:53.660
> 
> 标签：c++

我现在正在写一个日志类。Logger 与流一起工作，还打印当前正在记录的对象。这是宏：

```
#define OBJLOG(DL, what) DL <= this->Logger->getDebugLevel() ? *this->Logger << DL << "[" << this->Name << "]: "<< what << std::endl : this->Logger->doNothing(); 
```

伪代码变体以获得更好的概述：

```
#define OBJLOG(debuglevel, what) debuglevel <= logger.debuglevel ? logger.log(what) : logger.doNothing() 
```

有没有办法绕过 doNothing 函数调用，比如什么都不做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:23:46.530

```
#define OBJLOG(DL, what) do { if(DL <= this->Logger->getDebugLevel()) *this->Logger << DL << "[" << this->Name << "]: "<< what << std::endl; } while(0) 
```

请参阅[为什么在宏中使用明显无意义的 do-while 和 if-else 语句？](https://stackoverflow.com/questions/154136/why-are-there-sometimes-meaningless-do-while-and-if-else-statements-in-c-c-mac)解释一下。（`do {} while(0)`这里不是绝对必要的，但我不希望泄漏`ostream`.）

此外，您应该始终将宏参数使用括在括号中，例如：

```
#define OBJLOG(DL, what) do { if((DL) <= this->Logger->getDebugLevel()) *this->Logger << (DL) << "[" << this->Name << "]: "<< (what) << std::endl; } while(0) 
```

最后，您应该将此代码移动到一个函数中并在您的宏中调用它（如果您真的坚持使用宏）以避免多次评估您的宏参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:28:57.383

1.  让您的 logger.log() 函数返回一个布尔值。

2.  用一个和这样的连接你的谓词：debuglevel <= logger.debuglevel && logger.log

这应该够了吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:32:45.453

如果您想要一个什么都不做的表达式，请尝试`(void)0`.

# c - 如何连接到宽带共享 IP 中的客户端

> ID：10416740
> 
> 赞同：1
> 
> 时间：2012-05-02T15:22:00.490
> 
> 标签：c, sockets, ip, connect, shared

我正在使用一个宽带路由器，在该路由器上，多台电脑使用与公共 IP 相同的共享 IP。其他远程客户端如何获得特定的 IP 地址来连接到我？我正在使用 C 开发客户端/服务器聊天程序。

感谢您考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:37:09.953

他们不能。宽带路由器是唯一具有公共 IP 地址的路由器。

这个问题的通常解决方案是让路由器将特定端口转发到您的一台经过 NAT 的内部机器。

如果这还不够，您可以调查“打孔”和[STUN](http://en.wikipedia.org/wiki/STUN)。

# c++ - winapi - 挂钩应用程序的任务栏选项卡事件

> ID：10416741
> 
> 赞同：2
> 
> 时间：2012-05-02T15:22:01.833
> 
> 标签：c++, windows

当用户左/右单击应用程序的 tackbar 选项卡时，我无法挂钩发送的事件消息。我已经尝试过实现`OnNcLButtonDown`等，但是当我单击应用程序的选项卡时没有触发任何事件。是否有可能的 COM 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:29:19.890

There is an undocumented windows message: code 0x0313 that is send when a user right clicks on the app's taskbar button. Dunno whether its stable to hook though.

# c++ - 隐式 new 和 delete 运算符杀死性能

> ID：10416743
> 
> 赞同：2
> 
> 时间：2012-05-02T15:22:07.713
> 
> 标签：c++, optimization, new-operator, profiler, delete-operator

我非常困倦地分析我的应用程序，它告诉我，我的函数花费的时间分别有 25% 和 23% 用于新建和删除。我不明白这是在哪里发生的。所以有人可以告诉我这在我的代码中发生在哪里。

```
inline FixParser(fixmessage& tokenMap, const std::string& str) {
  static seperator sep_delim("\x01");
  static seperator sep_equal("=");
  static std::string error("ERROR: ");
  static FixKey fix_Key;
  static tokenizer token_equal(error);
  static tokenizer token_delim(error);
  static tokenizer::iterator itr;
  token_delim.assign(str, sep_delim);
  int key;
  try {
    for(tokenizer::iterator it = token_delim.begin(); 
        it != token_delim.end(); ++it) {
      token_equal.assign(*it, sep_equal);
      itr = token_equal.begin();
      key = boost::lexical_cast<int>(*itr);
      if(fix_Key.keys.find(key) == fix_Key.keys.end()) continue;
      ++itr;
      const std::string& value(*itr);
      tokenMap.insert(std::pair<int, std::string>(key, value));
    }
  } catch(boost::bad_lexical_cast &) {
    std::cerr << error << str << std::endl;
    return;
  }
} 
```

![非常困的结果](../Images/756d7de748642fb446a94ea2a624665f.png)

我请求原谅`static`它们的使用，稍后将被删除并放置在`struct`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:41:09.637

注意：有*很多*字符串被复制。每个字符串都会导致调用来`new`获取内存并`delete`释放它。

如果性能很重要，并且您有能力保留副本`str`，那么您可能希望使用索引。也就是说，让标记成为索引对（开始、结束）而不是完整的字符串。这显然更容易出错。

此外，`tokenMap`在映射中为每个条目分配一个节点，如果您有很多条目，则会有很多节点（因此`new`要创建它们）。您可能希望使用 a`deque`代替，并在完成后对项目进行排序，除非您真的需要`map`提供什么（自动重复数据删除）。

* * *

Bikeshed 版本，删除了大多数静态变量（*我忍不住*）：

```
inline FixParser(fixmessage& tokenMap, const std::string& str) {
  static seperator sep_delim("\x01");
  static seperator sep_equal("=");
  static FixKey const fix_Key;

  try {
    tokenizer token_delim(str, sep_delim);

    // avoid computing token_delim.end() at each iteration
    for(tokenizer::iterator it = token_delim.begin(), end = token_delim.end(); 
        it != end; ++it)
    {
      tokenizer token_equal(*it, sep_equal);

      tokenizer::iterator itr = token_equal.begin();
      int const key = boost::lexical_cast<int>(*itr);
      if(fix_Key.keys.find(key) == fix_Key.keys.end()) continue;

      ++itr;
      tokenMap.insert(std::make_pair(key, *itr));
    }
  } catch(boost::bad_lexical_cast &) {
    std::cerr << error << str << std::endl;
    return;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:45:24.963

确保您正在测试 Release 版本，而不是 Debug 版本。Debug 构建使用不同版本的`new`and`delete`来帮助检测内存泄漏，但会牺牲速度，而 Debug 构建并没有进行太多优化（如果有的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:09:53.127

静力学可能是问题所在。您调用该函数多少次`FixParser`？

每次调用它时`token_delim`，`token_equal`对象都会调用分配方法，如果这些方法像向量分配一样实现，那么支持序列的内存将被销毁，然后在每次`FixParser`调用函数以分配新条目时分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:40:48.690

我会看看`boost::lexical_cast`。它最简单的形式只是使用流。它可能做了很多分配。

# compilation - 在 Go 中构建和引用我自己的本地包

> ID：10416752
> 
> 赞同：22
> 
> 时间：2012-05-02T15:22:31.863
> 
> 标签：compilation, package, go

我正在玩 Google Go，我玩得很开心（！），但我在包子系统方面遇到了一些问题。

我在 Mac OS X Lion 上运行**Go 1.0.1 。**我还构建了各种没有问题的单文件程序（我还使用 html/templates 构建了一个没有问题的小型 webapp，它编译和运行没有任何错误）。

我定义了一个“可重用”包（even.go）：

```
package even

func Even(i int) bool {
    return i % 2 == 0
}

func Odd(i int) bool {
    return i % 2 == 1
} 
```

和一个消费者程序（useeven.go）：

```
package main

import (
    "./even"
    "fmt"
)

func main() {
    a := 5
    b := 6

    fmt.Printf("%d is even %v?\n", a, even.Even(a))
    fmt.Printf("%d is odd %v?\n", b, even.Odd(b))
} 
```

但是当我使用编译“库”时

```
go build even.go 
```

我什么都没有……没有错误，没有消息……会发生什么？

我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T16:18:18.350

你的问题的答案，“我应该怎么做？” 在[如何编写 Go 代码中进行了解释。](http://golang.org/doc/code.html) 这真的是非常重要的东西，值得一看。

的行为`go build`可能看起来令人费解，但实际上对于命令行程序来说是常规的——没有输出意味着程序运行成功。那么它做了什么？为此，您的答案在`go help build`

> ...否则 build 编译包但丢弃结果，仅用作检查包是否可以构建。

什么，你想要更多？当然。“如何编写 Go 代码”解释了这样做的好方法。为了快速修复您的程序，我将解释 go 命令期望每个包和每个可执行程序位于单独的目录中。如果你只是在 useeven.go 的位置下创建一个名为 even 的目录，然后将 even.go 移动到它，那么`go run useeven.go`应该像你拥有它一样运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-28T22:19:16.567

`go build`仅在构建“单个主包”时生成输出文件。如果你想为你的其他包输出一个文件，你应该使用`go install`. 这将构建该软件包并将其安装到您的`pkgs`目录中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-07T01:06:54.263

正如 OP 在评论中指出的那样，一旦您放入自己的文件夹，`go build`就可以正常工作： . （在导入中）有一点**Go 魔法**，*它可以自动构建“本地包”，而无需将其安装在任何地方*。`go run useeven.go``even.go``./even/even.go`**`./`**

 ***```
useeven/
├── even
│   └── even.go
└── useeven.go 
```

* * *

如果您想在没有魔法的情况下完成这项工作`./`，则需要安装该库。使这项工作为您的项目工作的一种快速而肮脏的方法（冒着污染库名称空间的风险）是使用如下符号链接简单地注册库的源位置（在此示例`GOPATH`中为`~/go`）：

```
[ useeven ]
$ ln -s $(pwd)/even ~/go/src 
```

现在，当您构建程序时，它会自动执行`go get even`安装库的最新版本。

Note that this doesn't make `go install`[*](https://stackoverflow.com/q/18149601/86967) work for the library, it just makes doing that unnecessary.

* * *

There are more idiomatic ways of doing this, if you're not in a hurry: [How to import local packages in go?](https://stackoverflow.com/q/35480623)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-20T11:23:49.397

此处未生成输出的原因是因为您正在运行

```
go build even.go 
```

*包*上的命令，而不是*主要*的go 文件。对包执行此操作将检查包上的错误，但由于它不是带有输出的主程序，因此不会生成任何成功消息。如果包的内容有问题，则会显示错误，否则如果编译正常**则没有输出**

相反，您应该运行：

```
go build useeven.go 
```

要创建二进制文件，然后执行二进制文件并从程序中获取输出：

```
./useeven 
```***

# f# - FParsec 中的字符串和 CharStream<'a>

> ID：10416760
> 
> 赞同：1
> 
> 时间：2012-05-02T15:22:47.370
> 
> 标签：f#, fparsec

我想解析一个大句子，它可以包含 fsharp 中的名称。我假设名字的形式是名字+姓氏。在没有名字列表的情况下（找不到，稍后再做），我说名字是长度为 4 或更长的字符串，与姓氏相同。

当我尝试我非常聪明的解析器时

```
let firstorlastname x = (parray 4 letter)  x
firstorlastname "JEAN"
firstorlastname "CHRISTOPHE" 
```

所以，它对两者都有效，但问题是它只消耗 4 个字符，这不是 Christophe 想要的行为。我希望整个词都被消耗掉。

如何指示 FParsec 使用整个单词，但如果单词少于 4 个字符则失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:05:51.360

没有测试过，但我认为应该这样做：

```
let firstOrLastName = manyMinMaxSatisfy 4 Int32.MaxValue isLetter 
```

# sql - 四舍五入的准确性

> ID：10416762
> 
> 赞同：0
> 
> 时间：2012-05-02T15:22:55.297
> 
> 标签：sql, rounding

我有以下要求-

```
1\. Get the A_MINUTES column value from TableA for all rows 
2\. Sum the A_MINUTES. 
3\. Convert the summed minutes values to hours - divide by 60 
4\. Round off the final hours value to 2 decimal places. 
```

这需要用 SQL 编写。

你认为这个查询会有任何舍入错误吗？

```
SELECT ROUND ( (SUM(A_MINUTES)/60.0) , 2) FROM TABLEA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:44:13.100

它会有任何舍入错误吗？

这取决于您要实施的舍入方案。
您发布的 SQL 代码将实现您的目标，但 SQL 中的默认舍入方案不像 .NET 中的默认方案*那样*银行家舍入

[http://msdn.microsoft.com/en-us/library/ms175003.aspx](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

以下是 SQL 中不同舍入方法实现的简要介绍：http:
[//blogs.lessthandot.com/index.php/DataMgmt/DataDesign/sql-server-rounding-methods](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/sql-server-rounding-methods)

如果您想实现银行家的舍入方案（如 .NET 中的默认方案），那么有几个选项。这是关于该主题的一个很好的讨论（它适用于 Oracle，但应该适用）
[http://www.orafaq.com/forum/t/122001/2/](http://www.orafaq.com/forum/t/122001/2/)

# cvs - 如何从 CVS 备份目录恢复项目（没有服务器）

> ID：10416767
> 
> 赞同：3
> 
> 时间：2012-05-02T15:23:18.417
> 
> 标签：cvs, restore

我有一个在 CVS 中管理的项目的备份目录。

如何提取它以使文件再次“正常”？所有的扩展似乎都以 ,v 结尾，而且文件本身有 CVS 注释，这些注释使文件对我来说毫无用处。

不幸的是，原来的 CVS 服务器已经不存在了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:37:00.943

如果您拥有所有存储库文件，不仅是项目的文件，还有 CVSROOT 目录中的文件（与项目目录处于同一级别），您可以：

将文件恢复到临时目录。无需以 root 身份执行此操作，普通用户帐户的简单目录即可。

临时将 CVSROOT 环境变量设置为指向临时目录。

然后，您应该能够从存储库执行“cvs checkout”（小心地在另一个目录中执行此操作）。或出口，或任何你喜欢的。

事实上，如果您不需要远程/多用户访问 repo，您​​甚至可以通过这种方式继续使用 repo（包含所有修订信息）。

令人困惑的是，在 CVSROOT 环境变量中指定的目录将包含恰好名为 CVSROOT 的目录。对于存储在存储库中的每个项目，还应该有一个位于同一级别的目录。

因此，如果您将所有内容恢复到“/home/username/restored_root”，您希望变量指向“/home/username/restored_root”，其中将包含一个名为 CVSROOT 的目录，以及每个项目的一个目录那是在存储库中。

# regex - 用于删除 JSTL 标记中的特殊字符的正则表达式

> ID：10416774
> 
> 赞同：6
> 
> 时间：2012-05-02T15:23:49.650
> 
> 标签：regex, jsp, replace, jstl

我正在开发一个 Spring 应用程序，在 JSPX 页面中，我需要从属性页面动态加载一些值，并使用选项标签将它们设置为下拉列表。我需要对选项值和显示使用相同的文本，但对于选项值，我需要删除所有特殊字符。

例如，如果值是舅舅，那么我需要

```
<option value="MaternalUncle">Maternal Uncle</option> 
```

我得到的是

```
<option value="Maternal Uncle">Maternal Uncle</option> 
```

有 2 个应用程序可以使用该页面，加载哪个属性文件取决于应用程序。如果我为应用程序 1 加载值，则值会正确显示，应用程序 1 中的最后一个值是“其他”并且没有任何特殊字符。对于应用程序 2，它不会修剪最后一个值为“Maternal Uncle”的空格。代码中的 repOptions 是 ArrayList，其值从属性文件加载。这是我的代码：

```
<select name="person" id="person">
      <option value="na">Select the relationship</option>
  <c:forEach items="${repOptions}" var="repOption">
       <option value="${fn:replace(repOption, '[^A-Za-z]','')}">${repOption}</option>
  </c:forEach>
</select> 
```

第一个应用程序删除空格，因为此值在 9 列表中是第 4 个。对于 app2 ，这是最后一个值，正则表达式不起作用。如果我将 Maternal Uncle 作为 app2 的第一个属性，那么这可以正常工作，但要求是最后一个选项。

```
 <option value="${fn:replace(repOption, ' ','')}"> 
```

正在为空格工作，但可能有兄弟/姐妹之类的值，所以我还需要删除 /，因此我使用的是正则表达式。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-02T16:01:37.103

JSTL[`fn:replace()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/replace.fn.html)不使用基于正则表达式的替换。它只是一个精确的逐个字符序列的替换，就像它[`String#replace()`](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replace-java.lang.CharSequence-java.lang.CharSequence-)一样。

JSTL 没有为此提供另一个 EL 函数。您可以自己开发一个 EL 函数，该函数委托给基于正则表达式的[`String#replaceAll()`](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-).

例如

```
package com.example;

public final class Functions {

     private Functions() {
         //
     }

     public static String replaceAll(String string, String pattern, String replacement) {
         return string.replaceAll(pattern, replacement);
     }

} 
```

您在`/WEB-INF/functions.tld`文件中注册如下：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1">

    <display-name>Custom Functions</display-name>    
    <tlib-version>1.0</tlib-version>
    <uri>http://example.com/functions</uri>

    <function>
        <name>replaceAll</name>
        <function-class>com.example.Functions</function-class>
        <function-signature>java.lang.String replaceAll(java.lang.String, java.lang.String, java.lang.String)</function-signature>
    </function>
</taglib> 
```

最后使用如下：

```
<%@taglib uri="http://example.com/functions" prefix="f" %>

...

${f:replaceAll(repOption, '[^A-Za-z]', '')} 
```

或者，如果您已经使用 Servlet 3.0 / EL 2.2 或更新版本（Tomcat 7 或更新版本），其中 EL 开始支持使用参数调用方法，只需直接`String#replaceAll()`在字符串实例上调用方法即可。

```
${repOption.replaceAll('[^A-Za-z]', '')} 
```

### 也可以看看：

*   [如何使用 JSTL/EL 从 JSP 调用参数化方法](https://stackoverflow.com/questions/7121303/how-to-call-parameterized-method-from-jsp-using-jstl/)

# blackberry - 打包 BlackBerry 应用程序以供发布

> ID：10416777
> 
> 赞同：0
> 
> 时间：2012-05-02T15:24:03.433
> 
> 标签：blackberry, release, blackberry-eclipse-plugin

我目前正在使用 Eclipse 的 BB 插件，并试图生成一个没有任何 .debug 文件的包，并且只有一个 .cod 和一个 .jad 文件发送给客户端。

我有点坚持如何做到这一点，我找不到“发布构建”设置，并且找不到任何关于如何完成此操作的文档，或者我什至在正确的轨道上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:45:02.297

当我们成功签名`Blackberry Application`后，我们可以在设备中安装该应用程序，也可以上传到`our Server`或`Blackberry App world`。我们只需要`.cod & .jar`在 BB 应用程序世界和设备中上传文件。你走在正确的道路上.. 继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:55:52.433

对于 OTA 安装：

```
1\. unzip your COD file.
2\. now you got number of cod files like xyz.COD, xyz-1.COD, xyz-2.COD ... etc.
3\. open your .jad file and verify listed .COD fils are mentioned in .jad file or not
4\. upload all .COD files and .jad file in same location on web
5\. open the .jad location on mobile device 
```

注意：如果您的 .jad 文件列出了不正确的 .COD 或仍然出现错误，请首先删除您的 .jad 文件和 .COD 文件并清理您的项目，然后重建您的项目，然后按照上述步骤操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:41:42.560

首先对应用程序进行签名，签名后将项目上传到您的服务器，上传后获取 .jad 文件并创建上传项目路径的链接，然后将其提供给客户端，然后他可以从那里下载应用程序并安装它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:17:51.990

1.  右键单击您的项目，选择“BlackBerry -> Package Project(s)”
2.  如果它没有自动签名，请再次右键单击“BlackBerry -> Sign with signature tool”
3.  在项目包资源管理器中查找生成的“deliverables”文件夹，然后选择用于 OTA 部署的文件（在“Web”文件夹中）。在那里您会找到一个或多个同级鳕鱼和正确的 jad 描述符。
4.  利润

# objective-c - 从库调用类别方法时“发送到类的无法识别的选择器”

> ID：10416779
> 
> 赞同：10
> 
> 时间：2012-05-02T15:24:13.003
> 
> 标签：objective-c, cocoa, extension-methods, foundation, unrecognized-selector

# 问题

这个问题可能看起来有点长，但我尽量提供尽可能多的信息，因为我真的对此感到困惑。

我目前正在开发一个应该自动解析 XML 文档的[库。](https://github.com/hverr/CeasyXML)但是我现在第一次测试这个库时遇到了一个问题。

我有一个名为的库类`CSXDocumentLayout`，它代表文档的布局。此类包含`- (NSError *)readLayoutDocument:(NSString *)fpath`从 init 方法调用的私有方法。

```
/* MARK: Reading in Layouts */
- (NSError *)readLayoutDocument:(NSString *)fpath {
    CSXDocumentLayout *layout;
    CSXXMLParser *parser;
    BOOL state;

    layout = [CSXDocumentLayout layoutDocumentLayout];

    parser = [[CSXXMLParser alloc] initWithDocumentLayouts:
              [NSArray arrayWithObject:layout]];
    parser.file = fpath;

    state = [parser parse];

    if(state == NO || parser.error != nil) {
        return parser.error;
    }
    return nil;
} 
```

此方法将读入表示其他 XML 文档布局的 XML 文档。它由`CSXXMLParser`我要测试的类解析。

我创建了一个代表布局文档的对象`+[CSXDocumentLayout layoutDocumentLayout]`。这个方法在类中实现`CSXDocumentLayout (CSXLayoutObject)`。

下面是我的测试文件：

```
#import <Foundation/Foundation.h>
#import <CeasyXML.h>

int main(int argc, const char **argv) {
    NSAutoreleasePool *pool = [NSAutoreleasePool new];

    NSString *file;

    file = [NSString stringWithUTF8String:__FILE__];
    file = [file stringByDeletingLastPathComponent];
    file = [file stringByAppendingPathComponent:@"Layout.xml"];

    CSXDocumentLayout *layout;
    NSError *error;

    layout = [[CSXDocumentLayout alloc] initWithLayoutDocument:file 
                                                         error:&error];
    if(layout == nil) {
        NSLog(@"Could not create layout: %@", error);
        exit(0);
    }

    NSLog(@"Layout:\n%@", layout);

    [pool release];
    return 0;
} 
```

此文件编译为链接到我的静态库*libceasyxml.a*的单独可执行文件。一切都编译得很好，没有任何警告。

但是当我运行它时，我得到一个**无法识别的选择器发送到类**异常：

```
2012-05-02 16:59:47.620 TestApp[1887:a0f] +[CSXDocumentLayout layoutDocumentLayout]: unrecognized selector sent to class 0x1000064c8
2012-05-02 16:59:47.791 TestApp[1887:a0f] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[CSXDocumentLayout layoutDocumentLayout]: unrecognized selector sent to class 0x1000064c8'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x00007fff83e47784 __exceptionPreprocess + 180
    1   libobjc.A.dylib                     0x00007fff84604f03 objc_exception_throw + 45
    2   CoreFoundation                      0x00007fff83ea11a0 __CFFullMethodName + 0
    3   CoreFoundation                      0x00007fff83e198ef ___forwarding___ + 751
    4   CoreFoundation                      0x00007fff83e15a38 _CF_forwarding_prep_0 + 232
    5   TestApp                             0x0000000100001512 -[CSXDocumentLayout(Private) readLayoutDocument:] + 49
    6   TestApp                             0x00000001000010d4 -[CSXDocumentLayout initWithLayoutDocument:error:] + 96
    7   TestApp                             0x0000000100001017 main + 179
    8   TestApp                             0x0000000100000f5c start + 52
    9   ???                                 0x0000000000000001 0x0 + 1
) 
```

我发现我不能调用类方法非常令人不安`+[CSXDocumentLayout(CSXLayoutObject) layoutDocumentLayout]`，尽管我可以同时调用`-[CSXDocumentLayout initWithLayoutDocument:error:]`, 和`-[CSXDocumentLayout(Private) readLayoutDocument:]`.

# 研究

我通过运行检查了该方法是否在输出文件中定义`nm file`，并且部分是：

**在 libceasyxml.a 中定义*（nm libceasyxml.a）***

```
...
libceasyxml.a(CSXDocumentLayout+CSXLayoutObject.o):
0000000000000100 t +[CSXDocumentLayout(CSXLayoutObject) classAttributeLayout]
00000000000020e0 s +[CSXDocumentLayout(CSXLayoutObject) classAttributeLayout].eh
000000000000056b t +[CSXDocumentLayout(CSXLayoutObject) documentElementLayout]
0000000000002180 s +[CSXDocumentLayout(CSXLayoutObject) documentElementLayout].eh
0000000000000402 t +[CSXDocumentLayout(CSXLayoutObject) layoutDocumentLayout]
0000000000002148 s +[CSXDocumentLayout(CSXLayoutObject) layoutDocumentLayout].eh
0000000000000200 t +[CSXDocumentLayout(CSXLayoutObject) layoutElementLayout]
0000000000002110 s +[CSXDocumentLayout(CSXLayoutObject) layoutElementLayout].eh
0000000000000000 t +[CSXDocumentLayout(CSXLayoutObject) nameAttributeLayout]
00000000000020b0 s +[CSXDocumentLayout(CSXLayoutObject) nameAttributeLayout].eh
0000000000002098 s EH_frame1
0000000000001c49 s LC0
... 
```

**在 TestApp 中，它没有定义*(nm TestApp)***，实际上我找不到任何具有类别名称的方法`CSXLayoutObject`。

```
...
0000000100001271 t -[CSXDocumentLayout setDocumentClassString:]
00000001000013a8 t -[CSXDocumentLayout setElements:]
0000000100001490 t -[CSXDocumentLayout setName:]
00000001000014db t -[CSXDocumentLayout(Private) readLayoutDocument:]
0000000100004060 t -[CSXElementList dealloc]
00000001000040b0 t -[CSXElementList elements]
... 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-02T15:33:54.183

编辑：修复了断开的链接

我怀疑您遇到了[嵌入在静态库中的类别](https://developer.apple.com/library/archive/qa/qa1490/_index.html)的已知问题。

如果我是对的，请尝试使用链接器标志进行编译`-ObjC`（如果这还不够，也可以`-all_load`），您的问题应该会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-29T20:13:54.970

即使已经选择了答案，我希望我的问题的解决方案就在这里，尽可能简单。请务必检查您的班级是否在窗格`Target Membership`下的字段中正确检查。`File Inspector`如果您不这样做，那么收到`unrecognized selector sent to class`错误是很自然的。

# android - 构建可缩放/可平移的容器

> ID：10416780
> 
> 赞同：5
> 
> 时间：2012-05-02T15:24:13.377
> 
> 标签：android, zooming, viewgroup, android-framelayout, panning

我正在尝试制作一个支持平移和缩放其内容的 ViewGroup。我在网上只能找到在 ImageView 中执行此操作的想法和实现，但绝不是容器。我想显示一张地图，在它上面我想显示多个标记，这些标记是 ImageButtons，因此用户可以点击它们以获取更多信息。这是通过 UIScrollView 在 iOS 上实现的，但我在 Android 上找不到替代方案。

我决定使用 FrameView，所以我可以设置一个 ImageView 与图像作为背景，并在它的顶部添加一个 RelativeLayout，我可以在其上添加 ImageButtons 并使用边距定位它们。

[我在这里](https://github.com/MikeOrtiz/TouchImageView)借用了 TouchImageView 的部分实现，但遇到了麻烦。我已经开始平移，我部分成功了，它平移了容器，但是平移效果很糟糕，抖动很多。这是我的代码：

```
public class ScrollingViewGroup extends FrameLayout {

    private int x = 0;
    private int y = 0;

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF last = new PointF();
    PointF start = new PointF();

public ScrollingViewGroup(Context context) {
        super(context);
        sharedConstructing(context);
    }

    public ScrollingViewGroup(Context context, AttributeSet attrs) {
        super(context, attrs);
        sharedConstructing(context);
    }

    private void sharedConstructing(Context context) {
        super.setClickable(true);
        this.context = context;
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());

    setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                mScaleDetector.onTouchEvent(event);

                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    last.set(event.getX(), event.getY());
                    start.set(last);
                    mode = DRAG;
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        float deltaX = curr.x - last.x;
                        float deltaY = curr.y - last.y;
                        Log.d("ScrollingViewGroup", Float.toString(deltaX));
                        Log.d("ScrollingViewGroup", Float.toString(deltaY));
                        float scaleWidth = Math.round(origWidth * saveScale);
                        float scaleHeight = Math.round(origHeight * saveScale);

                        x += deltaX;
                        y += deltaY;

                        last.set(curr.x, curr.y);

                    }
                    break;

                case MotionEvent.ACTION_UP:
                    mode = NONE;
                    int xDiff = (int) Math.abs(curr.x - start.x);
                    int yDiff = (int) Math.abs(curr.y - start.y);
                    if (xDiff < CLICK && yDiff < CLICK)
                        performClick();
                    break;

                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
                }
                // setImageMatrix(matrix);
                setTranslationX(x);
                setTranslationY(y);
                invalidate();
                return true; // indicate event was handled
            }

        });
    } 
```

任何想法都非常感谢。

编辑：抖动似乎是原因，因为移动时，deltaX 和 deltaY 在正数和负数之间交替，检查 LogCat ......仍然不知道为什么。这是由 curr 变量引起的，该变量每次都给出不同的值，但不是一致的，它们看起来好像手指会前后移动而不是向前移动。例如，curr.x 不是 0,1,2,3,4 等，而是 0,1,0.5,2,1.5 等。也不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:19:24.987

我有一个适用于一些先决条件的解决方案：

*   容器中的项目需要是 ImageView 类型
*   所有图像都需要具有相同的大小才能同等缩放

容器中的项目可以缩放和平移（但不能同时）。该代码还能够确定用户是否单击而不是移动或缩放。ImageView 存储在 FrameLayout 中的 ArrayList 中，并一起缩放和移动。此代码的某些部分摘自 Ed Burnette 在 ZDNet 上的一篇非常好的文章（[链接](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2/1747)），该文章摘自一本非常好的 Android 书籍“ [Hello, Android](http://pragprog.com/book/eband3/hello-android) ”。

查看此代码。您可以在任何活动中使用此类作为布局。您甚至应该能够在 XML 中使用它。现在有一个在构造函数中调用的方法 initializeViews()，您可以在其中硬编码应该在创建布局时加载的图像视图。您应该在此方法中在“ArrayList sampleBitmaps = new ArrayList();”行之后添加一些位图 对于实际使用，最好实现一个方法 addImageView(ImageView item) ，您可以在其中动态添加视图。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.util.AttributeSet;
import android.util.FloatMath;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;

public class TouchContainer extends FrameLayout implements OnTouchListener {

    // constants
    private static final Config DEFAULT_COLOR_DEPTH = Bitmap.Config.ARGB_4444;
    private static final String TAG = "TouchContainer";

    // fields
    private ArrayList<ImageView> items;

    public TouchContainer(Context ctx) {
        this(ctx, null);
    }

    public TouchContainer(Context ctx, AttributeSet attrs) {
        super(ctx, attrs);

        initializeViews();  // initialize some sample Bitmaps
    }

    /**
     * This method is just to make an example 
     */
    protected void initializeViews() {
        ScaleType scaleType = ScaleType.MATRIX;

        // array needs to be created here if used in XML
        items = new ArrayList<ImageView>();

        ArrayList<Bitmap> sampleBitmaps = new ArrayList<Bitmap>();
        // here you should add some bitmaps to the Array that will then be displayed in the container
        // e.g. sampleBitmaps.add(blabla I'm a bitmap) :-)

        ImageView iv = null;
        boolean firstLoop = true;

        for (Bitmap bitmap : sampleBitmaps) {
            // Load the bitmaps into imageviews
            iv = new ImageView(getContext());
            iv.setImageBitmap(bitmap);
            iv.setScaleType(scaleType);
            if (firstLoop) {
                // add the touch listener to the first image view that is stored in the ArrayList
                iv.setOnTouchListener(this);
                firstLoop = false;
            }

            // add view to the FrameLayout
            this.addView(iv);

            // add the imageview to the array
            items.add(iv);
        }

    }

    protected void transformImages(Matrix matrix) {
        for (ImageView image : items) {
            image.setImageMatrix(matrix);
        }

    }

    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;
    static final int CLICK = 3;

    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    public boolean onTouch(View v, MotionEvent event) {

      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(TAG, "mode=DRAG");
         mode = DRAG;
         break;
      case MotionEvent.ACTION_POINTER_DOWN:
         oldDist = spacing(event);
         Log.d(TAG, "oldDist=" + oldDist);
         if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
         }
         break;
      case MotionEvent.ACTION_UP:
          // figure out if user clicked
          mode = NONE;
          int xDiff = (int) Math.abs(event.getX() - start.x);
          int yDiff = (int) Math.abs(event.getY() - start.y);
          if (xDiff < CLICK && yDiff < CLICK)
              performClick(); 
          break;
      case MotionEvent.ACTION_POINTER_UP:
         mode = NONE;
         Log.d(TAG, "mode=NONE");
         break;
      case MotionEvent.ACTION_MOVE:
         if (mode == DRAG) {

            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x,
                  event.getY() - start.y);
         }
         else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
               matrix.set(savedMatrix);
               float scale = newDist / oldDist;
               matrix.postScale(scale, scale, mid.x, mid.y);
            }
         }
         break;
      }

      transformImages(matrix);

      return true;
   }

       private float spacing(MotionEvent event) {
          float x = event.getX(0) - event.getX(1);
          float y = event.getY(0) - event.getY(1);
          return FloatMath.sqrt(x * x + y * y);
       }

       private void midPoint(PointF point, MotionEvent event) {
          float x = event.getX(0) + event.getX(1);
          float y = event.getY(0) + event.getY(1);
          point.set(x / 2, y / 2);
       }

} 
```

# visual-studio-2010 - 在 Visual Studio 2010 中向 SSIS 工具箱添加自定义工具时遇到问题

> ID：10416787
> 
> 赞同：1
> 
> 时间：2012-05-02T15:24:29.237
> 
> 标签：visual-studio-2010, ssis, bids

我在 Visual Studio 2010 中使用 SSIS 设计器，我最近下载了一套第三方工具。他们的安装后步骤说导航到*工具 > 选择工具箱项 > SSIS 控制流项*并将其项目添加到我的 SSIS 工具箱，但我安装的 Visual Studio 缺少*SSIS 控制流项*和*SSIS 数据流项*选项卡。第三方说这些标签应该在那里，这是微软的问题。有谁知道如何使这些标签出现？是不是配置错误？

# php - 常量定义在 PHP 5.4.x 中不再有效？

> ID：10416788
> 
> 赞同：1
> 
> 时间：2012-05-02T15:24:30.850
> 
> 标签：php, constants, notice

我正在尝试（以并行方式，就是这样，因为我们仍在为我们的主要应用程序开发 PHP 5.2.x）使我们当前的应用程序适应 PHP 5.4.x（使用 Apache 2.4.2 和 PHP 5.4.1在我们的测试服务器中）但是当我们在测试服务器中运行它们时，我在当前的应用程序中发现了一些警告。

例如......我们在当前应用程序中使用常量定义，该函数检测语言并加载包含定义的语言文件，如*idiomas/ **lang** .php*，是***lang***一个 2 位数的语言表示（es，us，德等）。

在每个语言文件中都有一些像这样的定义：

```
define("IDIOMA_AF", "Afrikaans");
define("IDIOMA_AR", "العربية");
define("IDIOMA_BG", "български език"); 
```

因此，当我们想要输出给定的翻译文本时，我们这样做：

```
<?php echo IDIOMA_AF; ?> 
```

当应用程序被抛出时，PHP 5.4.1 输出的消息如下：

```
Notice: Constant IDIOMA_AF already defined in D:\apache\htdocs\aplicacion\modulos\base\idiomas\es.php on line 34 
```

有没有人有同样的问题？我想了解一下您的经验，因为知道如何解决这些问题会很有用。我们正在考虑使用 gettext 实现一个更好的系统（我认为从长远来看它更有条理并且更容易处理，但仍然......），尽管我们希望在升级它们之前运行我们当前的应用程序一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:28:04.430

这意味着您尝试定义常量两次（这是不允许的）。

你可以试试：

```
if (!defined('IDIOMA_AF')) define('IDIOMA_AF', 'Afrikaans'); 
```

或者跟踪并修复为什么你要定义一个常量两次。

该函数`get_defined_constants()`也是解决此类问题的有用调试工具。

或者，忽略这些错误：`error_reporting(E_ALL & ~E_NOTICE);`

# sql - 如何重写 IS DISTINCT FROM 和 IS NOT DISTINCT FROM？

> ID：10416789
> 
> 赞同：63
> 
> 时间：2012-05-02T15:24:37.090
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, ansi-sql

在不支持它们的 SQL 实现（例如 Microsoft SQL Server 2008R2）中，如何重写包含标准`IS DISTINCT FROM`和运算符的表达式？`IS NOT DISTINCT FROM`

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-09-08T14:29:33.810

谓词作为 SQL:1999的`IS DISTINCT FROM`特征 T151 被引入，它的可读否定`IS NOT DISTINCT FROM`被添加为 SQL:2003 的特征 T152。这些谓词的目的是保证比较两个值的结果是*True*或*False*，绝不是*Unknown*。

这些谓词适用于任何可比较的类型（包括行、数组和多集），因此精确模拟它们相当复杂。但是，SQL Server 不支持这些类型中的大多数，因此我们可以通过检查空参数/操作数来获得相当大的帮助：

*   `a IS DISTINCT FROM b`可以改写为：

    ```
    ((a <> b OR a IS NULL OR b IS NULL) AND NOT (a IS NULL AND b IS NULL)) 
    ```

*   `a IS NOT DISTINCT FROM b`可以改写为：

    ```
    (NOT (a <> b OR a IS NULL OR b IS NULL) OR (a IS NULL AND b IS NULL)) 
    ```

* * *

您自己的答案是不正确的，因为它没有考虑`FALSE OR NULL`评估为*Unknown*。例如，`NULL IS DISTINCT FROM NULL`应该评估为*False*。同样，`1 IS NOT DISTINCT FROM NULL`应该评估为*False*。在这两种情况下，您的表达式都会产生*Unknown*。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-10-22T22:17:37.580

我喜欢的另一个解决方案是利用 EXISTS 与 INTERSECT 结合的真正的二值布尔结果。此解决方案应适用于 SQL Server 2005+。

*   `a IS NOT DISTINCT FROM b`可以写成：

    `EXISTS(SELECT a INTERSECT SELECT b)`

如文档所述，INTERSECT 将两个 NULL 值视为相等，因此如果两者都是 NULL，则 INTERSECT 会产生单行，因此 EXISTS 会产生 true。

*   `a IS DISTINCT FROM b`可以写成：

    `NOT EXISTS(SELECT a INTERSECT SELECT b)`

如果您需要在两个表中比较多个可为空的列，这种方法会更加简洁。例如，要返回 TableB 中 Col1、Col2 或 Col3 的值与 TableA 不同的行，可以使用以下命令：

```
SELECT *
FROM TableA A
   INNER JOIN TableB B ON A.PK = B.PK
WHERE NOT EXISTS(
   SELECT A.Col1, A.Col2, A.Col3
   INTERSECT
   SELECT B.Col1, B.Col2, B.Col3); 
```

Paul White 更详细地解释了这种解决方法：[https ://sql.kiwi/2011/06/undocumented-query-plans-equality-comparisons.html](https://sql.kiwi/2011/06/undocumented-query-plans-equality-comparisons.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-02T15:25:22.080

如果您的 SQL 实现未实现 SQL 标准`IS DISTINCT FROM`和`IS NOT DISTINCT FROM`运算符，则可以使用以下等效项重写包含它们的表达式：

一般来说：

```
a IS DISTINCT FROM b <==>
(
    ((a) IS NULL AND (b) IS NOT NULL)
OR
    ((a) IS NOT NULL AND (b) IS NULL)
OR
    ((a) <> (b))
)

a IS NOT DISTINCT FROM b <==>
(
    ((a) IS NULL AND (b) IS NULL)
OR
    ((a) = (b))
) 
```

在 UNKNOWN 和 FALSE 之间的区别很重要的上下文中使用时，此答案是不正确的。不过，我认为这并不常见。请参阅@ChrisBandy 接受的答案。

如果可以识别出数据中实际上并未出现的占位符值，则`COALESCE`可以使用另一种方法：

```
a IS DISTINCT FROM b <==> COALESCE(a, placeholder) <> COALESCE(b, placeholder)
a IS NOT DISTINCT FROM b <==> COALESCE(a, placeholder) = COALESCE(b, placeholder) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-10T19:43:59.733

只是为了扩展[约翰凯勒的](https://stackoverflow.com/a/19529391/5070879)答案。我更喜欢使用`EXISTS`和`EXCEPT`模式：

```
a IS DISTINCT FROM b
<=>
EXISTS (SELECT a EXCEPT SELECT b)
-- NOT EXISTS (SELECT a INTERSECT SELECT b) 
```

和

```
a IS NOT DISTINCT FROM  b
<=>
NOT EXISTS (SELECT a EXCEPT SELECT b)
-- EXISTS (SELECT a INTERSECT SELECT b) 
```

出于一个特定的原因。`NOT`是对齐的，而与之`INTERSECT`相反。

* * *

```
SELECT 1 AS PK, 21 AS c, NULL  AS  b
INTO tab1;

SELECT 1 AS PK, 21 AS c, 2 AS b
INTO tab2;

SELECT *
FROM tab1 A
JOIN tab2 B ON A.PK = B.PK
WHERE EXISTS(SELECT A.c, A.B
              EXCEPT
              SELECT B.c, B.b); 
```

**[DBFiddle 演示](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=03a846fde48ba9cb1256ebd53efe249e)**

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-05-24T19:30:26.907

重写 IS DISTINCT FROM 和 IS NOT DISTINCT FROM 的一个警告是不要干扰索引的使用，至少在使用 SQL Server 时是这样。换句话说，当使用以下内容时：

```
WHERE COALESCE(@input, x) = COALESCE(column, x) 
```

SQL Server 将无法使用任何包含*column*的索引。因此，在 WHERE 子句中，最好使用以下形式

```
WHERE @input = column OR (@input IS NULL AND column IS NULL) 
```

利用*column*的任何索引。（括号仅用于清楚起见）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-30T13:10:37.803

### 拼写出来使用`CASE`

作为参考，最规范（和可读）的实现`IS [ NOT ] DISTINCT FROM`将是格式良好的`CASE`表达式。对于`IS DISTINCT FROM`：

```
CASE WHEN [a] IS     NULL AND [b] IS     NULL THEN FALSE
     WHEN [a] IS     NULL AND [b] IS NOT NULL THEN TRUE
     WHEN [a] IS NOT NULL AND [b] IS     NULL THEN TRUE
     WHEN [a] =               [b]             THEN FALSE
     ELSE                                          TRUE
END 
```

显然，其他解决方案（特别是[John Keller 的](https://stackoverflow.com/a/19529391/521799), using `INTERSECT`）更简洁。

[更多细节在这里](http://blog.jooq.org/2012/09/21/the-is-distinct-from-predicate/)。

### `DECODE`如果可用，请使用

我知道这个问题是关于 SQL Server 的，但为了完整起见，Db2 和 Oracle 支持一个`DECODE()`功能，在这种情况下可以模拟以下内容：

```
-- a IS DISTINCT FROM b
DECODE(a, b, 1, 0) = 0

-- a IS NOT DISTINCT FROM b
DECODE(a, b, 1, 0) = 1 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-12T10:22:12.593

```
a IS NOT DISTINCT FROM b 
```

可以改写为：

```
(a IS NOT NULL AND b IS NOT NULL AND a=b) OR (a IS NULL AND b is NULL) 
```

* * *

```
a IS DISTINCT FROM b 
```

可以改写为：

```
NOT (a IS NOT DISTINCT FROM b) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-02T00:02:01.937

这些表达式可以很好地替代 IS DISTINCT FROM 逻辑，并且比前面的示例执行得更好，因为它们最终被 SQL Server 编译成单个谓词表达式，这将导致大约。过滤器表达式的运算符成本的一半。它们本质上与 Chris Bandy 提供的解决方案相同，但是它们使用嵌套的 ISNULL 和 NULLIF 函数来执行基础比较。

*（...如果您愿意，显然 ISNULL 可以用 COALESCE 代替）*

*   `a IS DISTINCT FROM b`可以改写为：

    `ISNULL(NULLIF(a, b), NULLIF(b, a)) IS NOT NULL`

*   `a IS NOT DISTINCT FROM b`可以改写为：

    `ISNULL(NULLIF(a, b), NULLIF(b, a)) IS NULL`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-21T15:27:06.517

这是一个老问题，有一个新的答案。它更容易理解和维护。

```
-- a IS DISTINCT FROM b
CASE WHEN (a = b) OR (a IS NULL AND b IS NULL) THEN 1 ELSE 0 END = 0

-- a IS NOT DISTINCT FROM b
CASE WHEN (a = b) OR (a IS NULL AND b IS NULL) THEN 1 ELSE 0 END = 1 
```

应该注意的是，这种替代语法`IS [NOT] DISTINCT FROM`适用于所有主要的 SQL 数据库（见最后的链接）。[此处](https://modern-sql.com/feature/is-distinct-from)详细说明了此方法和替代方法

# linux - 从 Linux 用户空间实现 i2c

> ID：10416791
> 
> 赞同：0
> 
> 时间：2012-05-02T15:24:45.060
> 
> 标签：linux, i2c

很抱歉对我的问题进行了冗长的描述:-)

我接到了一项任务，在我们新的基于 PC 的电路板设计上对 I2C 设备执行简单的读写操作。该板将使用 Portwell 的 Qseven 迷你 PC 构建，该 PC 使用 Intel Tunnel Creek (ATOM) 处理器（本质上是 x86 处理器）和 EG20T IOH 芯片。

I2C 从设备是 TI AIC3254 音频编解码器。操作系统是 Ubuntu 10.04 LTS 32 位。

```
uname -a
Linux Torchwood 2.6.32-41-generic #88-Ubuntu SMP Thu Mar 29 13:08:43 UTC 2012 i686 GNU/Linux 
```

该设备的 PC 部分本质上是通用 PC。

PC/OS 需要在系统初始化时通过 I2C 加载编解码器（寄存器）。之后，编解码器将由 Atmel 处理器控制，该处理器将成为 I2C 总线上的第二个主控器（在初始化完成之前保持静默）。ATOM 不会与 AIC3254 进行额外的直接交互。

据我所知，我需要做的就是通过 I2C 总线将编解码器的“程序”复制到它，然后将其读回（穷人的负载检查）。

似乎合乎逻辑的方法是使用用户空间程序与 AIC3254 对话，而不是尝试创建设备驱动程序。但是，在我**modprobe i2c-dev 之后；depmod -a** no I2C bus 出现在 /dev 和**i2c_tools**中的 i2cdetect 找不到总线（设备？）。

我需要的是对 Linux I2C 访问编码有所了解。在这里完成菜鸟。

毕竟我需要设备驱动程序吗？对于通用程序，我不需要任何花哨的界面，只需对总线/页面/寄存器进行一次简单的读/写操作。也许是一个简单的字符模式驱动程序？我读过一些暗示存在这种事情的东西。

我是否需要在**/sys/bus/i2c/devices/i2c-0/**中放置 *new_device* 和 *delete_device* 文件？

即使安装了 i2c-dev.ko，**/sys/bus/i2c/devices/**中也没有出现 i2c-x“文件” 我在这里缺少什么？

我可以假设或找出这个内核是否知道 EG20T IOH 芯片吗？或者这些芯片是否足够通用，**i2c-dev**可以处理它们？

我需要 i2c-core.ko 吗？在 Ubuntu 映像上找不到它。如果我需要它，我需要什么来获得它？

我对**i2c-algo_???.ko**有用吗？

很抱歉成为这样的菜鸟。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:15:11.150

我认为在为目标构建内核时，您需要在板支持文件中添加 i2c 支持。我们使用基于 Atmel 的板来执行 i2c，在内核初始化期间，它调用 i2c_register_board_info() 来注册 i2c 设备。然后，您可以使用 i2c 工具和用户空间应用程序访问它们。请注意，我们使用的是 3.2.6 内核，但 2.6 内核可能需要类似的调用

# php - 移除番茄购物车上的立即购买按钮

> ID：10416792
> 
> 赞同：0
> 
> 时间：2012-05-02T15:24:46.943
> 
> 标签：php, shop

在我的网站上，如果你去新产品 [http://www.lutari.net//products.php?new&sid=ea6d72cb65007bb0474d3ec708832882](http://www.lutari.net//products.php?new&sid=ea6d72cb65007bb0474d3ec708832882) 你可以看到你只能将一些项目添加到购物车（你不能添加的那些没有库存) 所以我对此很满意。

但是，如果你去一个像这样的分类 [http://www.lutari.net//index.php?cPath=13&sid=ea6d72cb65007bb0474d3ec708832882](http://www.lutari.net//index.php?cPath=13&sid=ea6d72cb65007bb0474d3ec708832882) （这些都没有库存）你可以点击立即购买。

我想禁用立即购买按钮。

有谁知道我是怎么做到的？

（我使用了一个补丁来添加到购物车按钮）

Products_listing.php（我扫描了带有“购买”一词的代码

```
 'PRODUCT_LIST_IMAGE' => PRODUCT_LIST_IMAGE,
                   'PRODUCT_LIST_BUY_NOW' => PRODUCT_LIST_BUY_NOW); 
```

和

```
 case 'PRODUCT_LIST_BUY_NOW':
              $lc_text = $osC_Language->get('listing_buy_now_heading'); 
```

还

```
case 'PRODUCT_LIST_BUY_NOW':
            $lc_align = 'center';
            if ($Qlisting->value('products_type') == PRODUCT_TYPE_SIMPLE) {
              $lc_text = osc_link_object(osc_href_link(basename($_SERVER['SCRIPT_FILENAME']), $Qlisting->value('products_id') . '&' . osc_get_all_get_params(array('action')) . '&action=cart_add'), osc_draw_image_button('button_buy_now.gif', $osC_Language->get('button_buy_now'), 'class="ajaxAddToCart" id="ac_productlisting_'. $Qlisting->value('products_id') . '"')) . '&nbsp;<br />';
            }else {
              $lc_text = osc_link_object(osc_href_link(basename($_SERVER['SCRIPT_FILENAME']), $Qlisting->value('products_id') . '&' . osc_get_all_get_params(array('action')) . '&action=cart_add'), osc_draw_image_button('button_buy_now.gif', $osC_Language->get('button_buy_now'))) . '&nbsp;<br />';
            } 
```

会是这样吗？还是我需要查看不同的页面？

对...

所以在 Product_listing.php 我改变了

```
$lc_text = osc_link_object(osc_href_link(basename($_SERVER['SCRIPT_FILENAME']), $Qlisting->value('products_id') . '&' . osc_get_all_get_params(array('action')) . '&action=cart_add'), osc_draw_image_button('button_buy_now.gif', $osC_Language->get('button_buy_now'))) . '&nbsp;<br />'; 
```

到

```
$lc_text = osc_link_object(osc_href_link(basename($_SERVER['SCRIPT_FILENAME']), $Qlisting->value('products_id') . '&' . osc_get_all_get_params(array('action')) . '&action=cart_add'), osc_draw_image_button('button_add_to_cart.png',  $osC_Language->get('button_add_to_cart'))) . '&nbsp;<br />'; 
```

现在，在 new.php 中有一个补丁可以在产品缺货时禁用添加到购物车按钮。这是哪个代码

```
 if($osC_Product->getQuantity() > 0) {
            echo osc_link_object(osc_href_link(FILENAME_PRODUCTS, $Qproducts->value('products_id') . '&action=cart_add'), osc_draw_image_button('button_in_cart.gif', $osC_Language->get('button_add_to_cart'), 'class="ajaxAddToCart" id="ac_productsnew_' . $Qproducts->value('products_id') . '"'));
                        } else { 
                        //echo '<span><font color="#990000" size="2">Out of stock</font></span>';
                        echo osc_draw_image_disabled_button('button_in_cart_disabled.gif', 'No Stock', 'id="ac_no_product"');
                        }
          ?> 
```

所以我尝试将它放入 products_listing.php 并且它有效..但是按钮出现在页面顶部，而不是项目旁边..

任何人有任何想法下一步该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:28:27.467

你有你的代码吗？也许如果我能看到它，我应该能够提供帮助。但一般来说，您可以尝试这样做。

```
if quantity != 0
{
    print buy now button
} 
```

让我知道这是否有帮助。

# mobile - 如何增加手机上 Sencha Touch 2.0 选择器显示的行数？

> ID：10416793
> 
> 赞同：1
> 
> 时间：2012-05-02T15:24:48.177
> 
> 标签：mobile, sencha-touch, extjs, sencha-touch-2

有谁知道如何增加 Sencha Touch 2.0 中日期选择器和一般选择器在某一时刻显示的行数？

例如，默认情况下，[日期选择器](http://docs.sencha.com/touch/2-0/#!/api/Ext.picker.Date)一次显示 3 行，但我想显示 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:58:20.207

您的问题的解决方案在这里

*   [Sencha Touch 自定义选择器表单字段](http://sree.cc/sencha/sencha-touch-custom-picker-form-field)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:37:42.080

我最近再次研究了这个问题并提出了一个使用 css 的解决方案（这将在选择器上显示 5 行而不是正常的 3 行）：

```
.x-sheet.x-picker {
  min-height: 305px !important;
} 
```

这适用于 Sencha Touch 2.0.1。“！重要”的事情不是必需的。只需将这个 css 放在其他所有内容之后......就我而言，我有一个使用 sass 创建的 application.css，但我也有一个 app.css 应用在之后进行任何调整。我只会设置高度，但它会被如下所示的元素样式覆盖：

```
element.style {
bottom: 0px !important;
height: 220px !important;
left: 0px !important;
right: 0px !important;
z-index: 8 !important;
} 
```

因此，通过设置最小高度，它将优先于高度......我不确定这是否是最好的方法，我愿意接受建议/改进。

# javascript - 是否可以在一段时间后关闭确认框？

> ID：10416798
> 
> 赞同：7
> 
> 时间：2012-05-02T15:25:18.207
> 
> 标签：javascript

我需要向用户显示此消息，用户可以单击“是”或“否”。如果用户在 2 分钟内没有响应，则需要关闭窗口。打开新页面是一种方法。我的问题是，是否可以使用确认框来执行此操作？2分钟后可以自动关闭确认框吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T15:26:49.007

您不能使用本机来执行此操作，`confirm()`因为它会阻止该页面上的 JavaScript 执行，直到用户“回答”，但是有很多基于 HTML/JavaScript 的实现，您可以轻松地添加此类行为。
而且它们通常看起来也更好。:)

以[https://stackoverflow.com/a/972832/298479](https://stackoverflow.com/a/972832/298479)为例。要创建超时，您只需`window.setTimeout(function() { $('#dialog').dialog('close'); }, 120000);`在打开对话框时即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:26:52.580

`Alert`并且`Confirm`盒子不能被脚本关闭。请改用模态对话框。这通常由一个绝对定位的 DIV 和一个覆盖整个页面的半透明覆盖层组成。

# objective-c - 视图外的 addSubview

> ID：10416800
> 
> 赞同：0
> 
> 时间：2012-05-02T15:25:23.617
> 
> 标签：objective-c, xcode, uiviewcontroller

我有一个视图控制器，它通过“[self.view addSubview: secondView.view]”添加第二个视图。问题是第二个视图被添加到一半之外。

```
secondView = [[SecondView alloc] initWithFrame: CGRectMake (-160, 0, 320, 460)];
[self.view addSubview: secondView.view]; " 
```

但是，我注意到 0 (-160) 之前的部分不是互兼容的。这是正常的吗？有没有办法解决？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T18:51:47.360

您可以通过覆盖父视图来允许子视图接收父视图之外的触摸`pointInside:withEvent:`。

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    BOOL pointInside = NO;

    // step through our subviews' frames that exist out of our bounds
    for (UIView *subview in self.subviews)
    {
        if(!CGRectContainsRect(self.bounds, subview.frame) && [subview pointInside:[self convertPoint:point toView:subview] withEvent:event])
        {
            pointInside = YES;
            break;
        }
    }

    // now check inside the bounds
    if(!pointInside)
    {
         pointInside = [super pointInside:point withEvent:event];
    }

    return pointInside;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:46:13.273

我担心鉴于`UIResponder`链的工作方式，您想要的不是直接可能的（超级视图只会将它认为影响自身的事件传递给它的子视图）。

另一方面，如果您确实需要在其父框架之外拥有此视图，则可以将手势识别器（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)）关联到子视图。实际上，手势识别器是在正常的触摸事件调度之外处理的，它应该可以工作。

试试这个：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[secondView addGestureRecognizer:singleTap]; 
```

# php - 如果提交不成功，如何防止 html 表单重置

> ID：10416805
> 
> 赞同：0
> 
> 时间：2012-05-02T15:25:37.190
> 
> 标签：php, html, forms, reset

我正在使用一种表格在我的网站上注册用户，并且上面有验证码安全性。一切都运行良好，但我面临的唯一问题是，如果我输入了错误的验证码或以某种方式刷新页面，用户输入的所有数据都会被清除。

我希望实现的是，即使输入的验证码错误并且提交了表单，表单也应该具有完整的用户填写的所有字段，不包括验证码字段。

如何才能做到这一点？我的表单是html，处理页面是php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:27:39.190

您可以填充`value`表单输入的属性；

```
<input type="text" name="username" value="<?php 
  if (!empty($_POST['username'])) { 
    echo htmlspecialchars($_POST['username']); 
  }?>" 
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:31:53.020

您需要将表单操作设置为当前页面。只要有错误，就会调用相同的脚本，并且该脚本可能会填写其他答案中描述的表单值。只有在成功时，您才会将用户重定向到另一个页面。

# c# - ASP.Net c# Membership provider web.config 中的属性

> ID：10416807
> 
> 赞同：0
> 
> 时间：2012-05-02T15:25:42.933
> 
> 标签：c#, asp.net, web-config, membership-provider

我试图将属性添加到成员资格提供程序的“**添加名称**”部分，但 Intellisenxe 似乎不支持它们> 我想添加的一些属性是：

1.  minReqired非字母数字字符
2.  maxInvalidPasswordAttempts
3.  需要唯一的电子邮件

下面是web.config。提前致谢。

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />

      <roleManager enabled="true"
                 defaultProvider="CustomizedRoleProvider">
        <providers>
          <add name="CustomizedRoleProvider"
               type="System.Web.Security.SqlRoleProvider"
               connectionStringName="RestaurantDB" />
        </providers>
      </roleManager>

      <membership defaultProvider="CustomizedMembershipProvider">
        <providers>
          <add name="CustomizedMembershipProvider" 
               minRequiredPasswordLength="6" 
               type="System.Web.Security.SqlMembershipProvider"
               connectionStringName="RestaurantDB" />
        </providers>
      </membership>      
    </system.web>

  <appSettings>

  </appSettings>

  <connectionStrings>
    <add name="RestaurantDB" connectionString="data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;Integrated Security=SSPI;"/>
    <add name="RestaurantsEntities" connectionString="metadata=res://*/Restaurant.csdl|res://*/Restaurant.ssdl|res://*/Restaurant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:27:34.703

尝试这个：

```
<configuration>
        ...
        <system.web>
            ...

                <membership 
                 defaultProvider="SqlProvider" userIsOnlineTimeWindow="20">
                 <providers>
                    <clear/>
                    <add name="SqlProvider"
                        type="System.Web.Security.SqlMembershipProvider"
                        connectionStringName="LocalSqlServer"
                        enablePasswordReset="true"
                        requiresQuestionAndAnswer="false"
                        requiresUniqueEmail="false"
                        maxInvalidPasswordAttempts="5"
                        passwordAttemptWindow="10"
                        passwordFormat="Hashed"
                        minRequiredPasswordLength="7"
                        minRequiredNonAlphanumericCharacters="0"
                        passwordStrengthReqularExpression="0"
                        enablePasswordRetrieval="false"
                        applicationName="/" />
                </providers>
            </membership>
            ...
        </system.web>
        ...
    </configuration> 
```

# c# - 查找重新抛出的未通过 RegEx 设置内部异常的 catch 语句

> ID：10416808
> 
> 赞同：0
> 
> 时间：2012-05-02T15:25:43.427
> 
> 标签：c#, regex

我试图找到我们所有重新抛出异常的代码，其中抛出的新异常不包含作为内部异常的原始异常。这是一个例子：

```
 catch(DBApplicationException dbEx) 
        {
            BaseApplicationException bEx = new BaseApplicationException(dbEx.Message, dbEx);
            bEx.MethodName = System.Reflection.Assembly.GetExecutingAssembly().FullName + "::" + System.Reflection.MethodBase.GetCurrentMethod().Name.ToString();
            bEx.Severity = ExceptionSeverityLevel;
            PublishingManager.Publish(bEx,"");
            throw bEx;
        }
        catch(Exception e) 
        {
            BaseApplicationException bEx = new BaseApplicationException(e.Message);
            bEx.MethodName = System.Reflection.Assembly.GetExecutingAssembly().FullName + "::" + System.Reflection.MethodBase.GetCurrentMethod().Name.ToString();
            bEx.Severity = ExceptionSeverityLevel;
            PublishingManager.Publish(bEx,"");
            throw bEx;
        } 
```

第一个 catch (catch (DBApplicationException dbEx) 被重新抛出为 BaseApplicationException，但如您所见，它将消息设置为 dbEx.Message，然后将 InnerException 指定为 dbEx，但第二个 catch 段重新抛出没有 InnerException , 它只包含 e.Message。

因此，对于我的正则表达式模式，我只想找到不包含内部异常的整个 catch 块，现在，我使用的模式将这两个 catch 块一起返回。

这是我的正则表达式模式：

```
catch((.|\n|\r)*){((.|\n|\r)*)Exception\(((?!,).)+\);((.|\n|\r)*)} 
```

这是我测试这种情况的方法块：

```
public static DataSet SearchUserSessions(string username, string first, string last, string startDate, string endDate) 
    {
        DataSet ds = null;
        try 
        {
            SqlParameter [] arParms = new SqlParameter[]
            {
                new SqlParameter("@UserName", username),
                new SqlParameter("@FirstName", first),
                new SqlParameter("@LastName", last),
                new SqlParameter("@SessionStart", startDate),
                new SqlParameter("@SessionEnd", endDate)
            };

            DB db = new DB();
            ds = db.ExecuteDataset(SecurityConfig.ConnectionString, CommandType.StoredProcedure, 
                SPSearchUserSessions, (DB.Provider)SecurityConfig.ConnectionProviderType, 
                arParms); 
        }
        catch(DBApplicationException dbEx) 
        {
            BaseApplicationException bEx = new BaseApplicationException(dbEx.Message, dbEx);
            bEx.MethodName = System.Reflection.Assembly.GetExecutingAssembly().FullName + "::" + System.Reflection.MethodBase.GetCurrentMethod().Name.ToString();
            bEx.Severity = ExceptionSeverityLevel;
            PublishingManager.Publish(bEx,"");
            throw bEx;
        }
        catch(Exception e) 
        {
            BaseApplicationException bEx = new BaseApplicationException(e.Message);
            bEx.MethodName = System.Reflection.Assembly.GetExecutingAssembly().FullName + "::" + System.Reflection.MethodBase.GetCurrentMethod().Name.ToString();
            bEx.Severity = ExceptionSeverityLevel;
            PublishingManager.Publish(bEx,"");
            throw bEx;
        }
        return ds;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:57:52.670

如果我了解您要做什么，这将非常困难。主要原因是您试图返回整个`catch`块，这意味着您必须（至少部分地）解析 C#。这是因为 catch 块由`{...}`结构表示，并且它们可以`{...}`在其中嵌套其他块：

```
catch (Exception e)
{
    if (condition)
    {
        doSomething();
    }    
} 
```

为了使正则表达式识别 catch 块的结尾，它必须平衡 { 和 } 符号以确保它们匹配。这在带有平衡组的 .NET 正则表达式中是可能的，但它会比您想象的要复杂得多。

我还注意到您的正则表达式非常宽松。你已经使用`(.|\n|\r)`了你不想匹配每个字符的地方，并且你所有的量词都是[greedy](http://www.regular-expressions.info/repeat.html)。这里的一点...

```
{((.|\n|\r)*)Exception\(((?!,).)+\);((.|\n|\r)*)} 
```

...实际上将匹配单词的第一个实例`catch`直到`}`文件中的最后一个实例之间的所有内容，只要它在`Exception(blah)`任何地方找到类似的东西。事实上，`blah`可以是任何没有逗号的东西，甚至是另一个语句。`Exception(); DoStuff();`理论上会匹配它！

IMO 最好的选择是在课堂上使用 Visual Studio 的**Find Usages**功能`BaseApplicationException`。您可以找到整个类的所有用法，然后将其与`BaseApplicationException.InnerException`. 如果您必须使用正则表达式，这应该至少获得 99% 的没有嵌套`{...}`块的 catch 块（为清晰起见进行了扩展）：

```
^\s*                          #Beginning of a line, possibly followed by whitespace
catch[\s\n]*                  #catch, possibly followed by whitespace
\(\w*Exception\s+\w+\)[\s\n]* #Some type of Exception declaration, possibly followed by whitespace
\{                            #An opening brace
(:?(?!\.InnerException)[^}])* #Anything except a closing brace, without the term `.InnerException` appearing anywhere
\}                            #The closing brace of the block 
```

正如我上面提到的，这会阻塞嵌套`{...}`块。你可以通过平衡组来解决这个问题，但我想保持简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:41:47.737

这不利于您的示例：

```
catch\((([^)]|\n|\r)*)\)\s*{(([^}]|\n|\r)*?)Exception\(([^,](?!\n))+?\);(([^}]|\n|\r)*)} 
```

但我同意这不是解决此问题的可维护方式——除非这是一次性检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:33:50.750

听起来非常困难且难以维护。您可以在您的项目中强制 BaseApplicationException*仅*作为“包装器”异常抛出吗？然后，您可以删除只接受一个字符串的构造函数，并在剩下的一个构造函数中测试内部异常是否为 null。

# oracle - 如何从 Unix 批处理文件中一一运行两个 Oracle 存储过程

> ID：10416813
> 
> 赞同：1
> 
> 时间：2012-05-02T15:26:05.630
> 
> 标签：oracle, shell, unix, stored-procedures, sqlplus

我在批处理文件中运行存储的 Oracle 过程并执行。现在我想执行第二个过程，但脚本只执行第一个。我在哪里犯错了？

```
#!/bin/bash

sqlplus -s my_scheme@database/pass<<end
execute first_procedure();
commit;
exit;
END

execute second_procedure(); 
commit;
exit;
END 
```

我阅读了一些互联网 =) 但仅找到有关运行一个程序的信息。需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:27:28.960

将其更改为：

```
#!/bin/bash

sqlplus -s my_scheme@database/pass<<END
execute first_procedure();
commit;

execute second_procedure(); 
commit;
exit;
END 
```

# sql - 具有 T-SQL 语言访问权限的“轻量级”无服务器 SQL 引擎

> ID：10416818
> 
> 赞同：0
> 
> 时间：2012-05-02T15:26:30.057
> 
> 标签：sql, sqlite

我想为将在生产中连接到 SQL Server 的程序创建集成测试。

但我希望单元测试是可交付和可加载的，而不需要运行 SQL Server ......

*   我愿意写一个存根来适应交替的 SQLServer /“用于测试的 Light SQL”
*   我想保持现有的 T-SQL 查询不变。不改变其中的一个点。

你会建议一个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:30:29.777

除非您使用高级 T-SQL 功能，否则 SQL CE 应该就足够了。

# javascript - 通过 JavaScript 根据用户输入更新信用卡徽标

> ID：10416820
> 
> 赞同：0
> 
> 时间：2012-05-02T15:26:33.433
> 
> 标签：javascript, javascript-events

我正在为我的移动网站创建一个信用卡页面。我希望一旦我输入数字，比如 5，输入框中的图像应该是大师卡，输入 4 将图像更改为其他卡的图像，依此类推。就像 Clear Trip 移动网站一样。

我使用了 JavaScript 的 onkeypress 事件，但是当文本框中没有值时它会收到一个动作。

```
 <input type="text" size="20" autocomplete="off" style="width:80%"  onkeypress="func();"/> <div class="card-img"></div> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:35:35.180

jsFiddle：http: [//jsfiddle.net/ksHa2/12/](http://jsfiddle.net/ksHa2/12/)

```
<div class="card-img"><img id="img" src="http://www.google.com/logos/2012/laborday12-hp.jpg"/></div>

<input type="text" size="20" autocomplete="off" style="width:80%" onkeydown="update(this);" onchange="update(this);"/>

<script>
    function update( object )
    {
        if ( object.value.length == 1 )
        {
            document.getElementById('img').src = "http://www.google.com/logos/2012/ramon_y_cajal-2012-hp.jpg";
        }
        else if ( object.value.length == 2 )
        {
            document.getElementById('img').src = "http://www.google.com/logos/2012/queensday12-hp.jpg";
        }
        else if ( object.value.length == 3 )
        {
            document.getElementById('img').src = "http://www.google.com/logos/2012/queensday12-hp.jpg";
        }
        else
        {
            document.getElementById('img').src = "http://www.google.com/logos/2012/laborday12-hp.jpg";
        }
    }
</script>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:29:51.337

您应该处理`keyup`and`input`事件。

# java - JTextField.getText() 即使里面有内容也返回空值

> ID：10416821
> 
> 赞同：1
> 
> 时间：2012-05-02T15:26:40.780
> 
> 标签：java, swing, null, jtextfield, file-read

我有一部分代码获取 TextField 的文本（实际上有两个 TextField，但用户一次只能使用一个）并将其搜索到存储在终端中的文件中。问题是我总是得到一个空字符串，即使其中一个 TextField 中有文本......这是代码（分配在方法 actionPerformed() 上：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;

public class Search implements ActionListener{
JFrame frame;
JButton click;
JLabel comando, carico;
JTextField textv, text;
JTextArea res;
String pathFile = "C:\\Log.txt";
String str= new String();

Search(){

    frame = new JFrame("Search");
    frame.setSize(400, 200);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new GridLayout(1,2));
    frame.setResizable(false);
    JPanel panel = new JPanel();
    panel.setLayout(new GridLayout(7,1));
    click = new JButton("Cerca");
    comando = new JLabel("Comando");
    carico = new JLabel("A carico di:");
    textv = new JTextField("");
    text = new JTextField("");
    res = new JTextArea("");
    panel.add(comando);
    panel.add(textv);
    panel.add(carico);
    panel.add(text);
    panel.add(click);
    res.setLineWrap(true);
    res.setWrapStyleWord(true);
    res.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));

    JScrollPane scroller = new JScrollPane(res);
    scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    panel.add(scroller);
    frame.add(panel);
    click.addActionListener(this);      
    click.setSize(70, 35);      
    frame.setVisible(true);

}

public void actionPerformed (ActionEvent e){
    if(e.getSource()==click){
        res.setText(null);
        if(textv != null) {cercaStringa(pathFile, textv.getText().toString());}
        else {cercaStringa(pathFile, text.getText().toString());}
    }
}

public void cercaStringa(String pathFile, String stringa){
    try {
        BufferedReader in = new BufferedReader(new FileReader(pathFile));
        String line = new String();
        while((line = in.readLine())!=null) {   
            if(line.contains(stringa)){
                res.append(line);
                res.append("\n");
                }
        }
    }
    catch(IOException ex) { ex.printStackTrace();}
    }

public static void main (String[] args){
    new Search();
} 
```

}

我真的要把所有东西都扔到窗外，因为我知道解决方案很简单，但我做不到......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:26:54.190

正如以下测试所证实的，您的字段与***通话`null`***`actionListener`时不同。例如，输入`"Comando"`和`"Carico"`输出`"Test: Comando"`后跟`"Test: Carico"`，正如预期的那样：

```
@Override
public void actionPerformed(ActionEvent e) {
  if (e.getSource() == click) {
    res.setText(null);
    System.out.println("Test: "+textv.getText());
    System.out.println("Test: "+text.getText());
    if (textv != null) {
      cercaStringa(pathFile, textv.getText().toString());
    } else {
      cercaStringa(pathFile, text.getText().toString());
    }
  }
} 
```

* * *

问题是`if (textv != null)`在第一次运行时永远不会到达“else”（据我在快速查看我给出的代码中可以看出，它永远不会在***任何***运行中，因为`textv`从未设置过`null`），因为`textv = new JTextField("");`不等于`textv = null`，并且`textv`仍然会持有一个字符串，尽管它是一个空的。

修复是这样的：

```
public void actionPerformed(ActionEvent e) {
  if (e.getSource() == click) {
    res.setText("");
    if (!textv.getText().isEmpty()) {
      cercaStringa(pathFile, textv.getText().toString());
    } else {
      cercaStringa(pathFile, text.getText().toString());
    }
  }
} 
```

* * *

您还缺少对 存在的验证`C:\Log.txt`，并且很容易触发异常。

这是 Main 中的快速修复：

```
public static void main(String[] args) {
  File log = new File("C:\\Log.txt");
  if (!log.exists()) {
    try {
      /*
       * mkdirs() is not really needed when using the C root,
       * but I like to do this because the path might be changed.
       */
      if (!log.getParentFile().exists()) {
        log.getParentFile().mkdirs();
      }
      log.createNewFile();
    } catch (IOException ex) {
      Logger.getLogger(Search.class.getName()).log(Level.SEVERE, null, ex);
    }
  }
  Search search = new Search();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:17:14.600

使用[JTextArea#read(Reader in, Object desc) throws IOException](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)，此方法接受行分隔符 ei

# php - 处理未付订单

> ID：10416823
> 
> 赞同：0
> 
> 时间：2012-05-02T15:26:44.923
> 
> 标签：php, mysql, paypal, paypal-ipn

你好，

对于我的电子商务应用程序，我总是使用 PayPal 和一个`ipn.php`文件来处理自定义变量为`orderid`.

因为 PayPal 系统无法处理网站表单的计费和发货，所以我在数据库中预先插入订单，并在 IPN 获得交易已付款时更新状态。

有时用户点击 PayPal 选项但可以关闭浏览器：自愿、意外、停电等。结果是一个未付款的订单永久存储在数据库中。

有没有办法避免这种情况？

PS对不起我的英语不好；我希望一切都清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:34:19.467

通常我在每个订单的数据库中设置一个标志。

因此，当您将其保存到数据库时，订单支付变量设置为 false。然后在您的回调 URL 中，将订单支付字段设置为 true。

然后，如果您想将它们用于任何事情，您可以将它们保存在数据库中，或者编写脚本将它们从数据库中删除并在 cron 作业上运行。

# php - 当另一个表中的值更改时更新表中列的值

> ID：10416827
> 
> 赞同：0
> 
> 时间：2012-05-02T15:26:55.947
> 
> 标签：php, mysql

我有两张桌子，`TABLE_1`和`TABLE_2`。

`TABLE_1`包含`ID`和`NAME`，其中`ID`是主键。

`TABLE_2`包含`ID`and `DATA`，其中`ID`and`DATA`形成复合主键。

1.  我正在寻找一个 SQL 查询，`ID`当`TABLE_2`它们被更改时更新它们`TABLE_1`。

2.  我怎样才能创建这个表结构？

**表格1**

```
ID      NAME
100     LLL
101     KKK
102     JJJ 
```

**表_2**

```
ID      DATA
100     HHHHHHH
100     MMMMMMM
100     ZZZZZZZ
101     IIIIIII
101     FFFFFFF
102     EEEEEEE 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:06:13.077

不知道为什么你需要这样做，但无论如何。

一种方法是使用InnoDB 存储引擎中可用的[外键约束](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)：

```
CREATE TABLE `TABLE_1` (
  `ID` int NOT NULL,
  `NAME` varchar(255) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB;

CREATE TABLE `TABLE_2` (
  `ID` int(11) NOT NULL,
  `DATA` varchar(255) NOT NULL,
  PRIMARY KEY (`ID`,`DATA`),
  CONSTRAINT `FK_ID` FOREIGN KEY (`ID`) 
    REFERENCES `TABLE_1` (`ID`) 
    ON UPDATE CASCADE
    ON DELETE CASCADE
) ENGINE=InnoDB; 
```

上面的表结构将在修改 in时更新所有匹配`ID`项( )。此外，每当您删除from时，所有匹配的条目 from也将被删除 ( )。由于这个限制，from必须存在才能成功完成。`TABLE_2``ID``TABLE_1``ON UPDATE CASCADE``ID``TABLE_1``TABLE_2``ON DELETE CASCADE``ID``TABLE_2``TABLE_1``INSERT`

还要记住，外键会影响性能，但在不知道你为什么想要这样的东西的情况下，我不能提出任何更好的解决方案。

# java - 带有 AES/ECB128/PKCS5Padding 的密码不断抛出“没有这样的算法”异常

> ID：10416828
> 
> 赞同：1
> 
> 时间：2012-05-02T15:26:56.393
> 
> 标签：java, encryption, cryptography, padding, ecb

有谁知道这段代码有什么问题？

```
Cipher cipher = Cipher.getInstance("AES/ECB128/PKCS5Padding", "SunJCE"); 
```

*   算法：AES
*   操作模式：ECB（附加128指定块大小）
*   填充方案：PKCS5Padding

这对我来说似乎是正确的，但它在实例化过程中不断抛出“没有这样的算法”异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:09:52.820

在我的类路径中除了股票 JDK 之外什么都没有，我运行了这个代码片段并在输出中为 AES 进行了 grep：

```
for (Provider provider: Security.getProviders()) {
  System.out.println(provider.getName());
  for (String key: provider.stringPropertyNames())
    System.out.println("\t" + key + "\t" + provider.getProperty(key));
} 
```

我看到了这一行：

```
 Cipher.AES SupportedPaddings    NOPADDING|PKCS5PADDING|ISO10126PADDING 
```

这向我表明您的填充是受支持的。

我也看到了这一行：

```
 Cipher.AES SupportedModes       ECB|CBC|PCBC|CTR|CTS|CFB|OFB|CFB8|CFB16|CFB24|CFB32|CFB40|CFB48|CFB56|CFB64|OFB8|OFB16|OFB24|OFB32|OFB40|OFB48|OFB56|OFB64|CFB72|CFB80|CFB88|CFB96|CFB104|CFB112|CFB120|CFB128|OFB72|OFB80|OFB88|OFB96|OFB104|OFB112|OFB120|OFB128 
```

我注意到这里出现了 ECB，但 ECB128 没有出现，所以我想知道这是否是问题所在。我要承认我不知道这些信息是否在正确的轨道上。

编辑添加：我可以使用 ECB 而不是 ECB128 调用 Cipher.getAlgorithm("AES/ECB/PKCS5Padding")。在我看来，对于 ECB，您无法指定块大小，至少对于此处可用的内容。不确定这对您是否足够。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:51:24.337

AES 具有 128 位（或 16 字节）的静态块大小。Rijndael，用于创建 AES 的密码确实有多个块大小。在调用方法期间配置密钥时，会自动获取密钥大小`init`。

模式后面的位不用于配置密码的块大小。它们更用于配置[密码反馈 (CFB) 操作模式](https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Feedback_.28CFB.29)的反馈大小。不过，这现在是一种相当模糊的模式，尤其是在没有使用块加密的所有位的情况下。尽管它们也可以正式用于 OFB 模式，但[在指定较小的反馈大小时可能会出现安全问题](https://crypto.stackexchange.com/questions/25076/is-mcrypts-8-bit-ofb-mode-secure)。可能应该保留这两种模式以提供对遗留协议的支持。

`"CFB"`如果使用，或字符串后面的值`"OFB"`应大于 0，并且不大于块大小，增量为 8。该数字指定为反馈位数，并且 - 与大多数加密 API 一样 - Java 的 JCE 仅限于处理字节.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:31:26.673

Sun JCE 提供程序有些受限。尝试改用 BouncyCastle JCE 提供程序 (http://www.bouncycastle.org/)。

# c - 评估枚举

> ID：10416830
> 
> 赞同：0
> 
> 时间：2012-05-02T15:27:13.133
> 
> 标签：c

有没有办法评估一个枚举？我有一个合并到结构中的枚举：

```
typedef enum {MW, TR} days;

typedef struct {
  int hour, min;
} Time;

typedef struct {
  char Dept[5];
  int course, sect;
  days meet_days;
  Time start, end;
  char instr[20];
} sched_record; 
```

我的枚举打印语句是：

```
 data[i].meet_days == MW ? "MW" : "TR" 
```

我想要做的是让我的 sched_record 的 typedef 结构只打印其中包含 MW 的记录。我的程序“菜单”如下：

```
 fread(data, sizeof(sched_record), MAX_RECORD, filePointer);
        fclose(filePointer);
        printf("Enter the Department or A for any Department: ");
        scanf("%s", tempDept);
        printf("Enter the Course or 0 for any course: ");
        scanf("%d", &tempCourse);
        printf("Enter the Days; M = MW, T = TTH or D=Don't Care: ");
        scanf("%s", tempDay);
        printf("Enter the Time; A=Mornings, P=Afternoons or D=Don't Care: ");
        scanf("%s", tempTime); 
```

我用一个简单的语句让我的 sched_records 按时间打印出来：

```
 else if ((strcmp(tempDept, "A")==0) && tempCourse == 0 && (strcmp(tempDay, "D")==0) && (strcmp(tempTime, "P")==0)) {
                            if (data[i].start.hour >= 12) {  // <---Time comparison
                                printf("%s %d %d %2s %02d%02d %02d%02d %s\n", data[i].Dept, data[i].course, data[i].sect, data[i].meet_days == MW ? "MW" : "TR",
                                   data[i].start.hour, data[i].start.min, data[i].end.hour, data[i].end.min, data[i].instr);
                     }
                }

                else if ((strcmp(tempDept, "A")==0) && tempCourse == 0 && (strcmp(tempDay, "M")==0) && (strcmp(tempTime, "D")==0)) {
                        printf("\n%s %d", data[i].Dept, data[i].course); 
```

我想知道是否有像时间比较这样的简单方法对枚举做同样的事情。如果是这样，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:38:35.400

您可以像任何其他整数变量一样比较枚举值：

```
if (data[i].meet_days == MW)
  ..... 
```

或者，如果说你有一个枚举所有天：

```
enum days {Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday}; 
```

然后你可以像这样测试范围：

```
if (day >= Monday || day <= Friday)
  printf ("It's a weekday!\n"); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:05:42.983

另一种方法是定义您的枚举值以设置某个位。例如，确保“星期一”到“星期五”的日子都设置了特定的位：

因此：

```
#define WEEKDAY 0x100
typedef enum {
 SUNDAY   = 1,
 MONDAY   = 2 | WEEKDAY,
 TUESDAY  = 3 | WEEKDAY,
 WEDNESDAY= 4 | WEEKDAY,
 THURSDAY = 5 | WEEKDAY,
 FRIDAY   = 6 | WEEKDAY,
 SATURDAY = 7
} days; 
```

然后，在检查这一天是否是工作日时：

```
if (day & WEEKDAY) {
 printf("Day %d is a weekday!\n", day);
} 
```

你可以通过使用 XMACRO 来获得更棒的效果.. 但我会把它作为 OP 的练习 :)

使用 bitflag 方法，您可以为您的日子添加额外的任意分类，而无需一直进行范围比较

# windows-services - 任务计划程序中的 Windows 服务 - 无法启动服务。服务进程无法连接到服务控制器

> ID：10416835
> 
> 赞同：5
> 
> 时间：2012-05-02T15:27:20.177
> 
> 标签：windows-services

我有一个简单的 Windows 服务项目。我已按照[http://msdn.microsoft.com/en-us/library/zt39148a.aspx](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)上的说明进行操作，包括添加自定义操作。

当在安装项目的发布模式下运行我的构建时。我将 .msi 运行到我希望服务运行的服务器上。当我打开服务管理器时，会出现该服务。我什至可以手动启动服务，它完全按照我的需要运行。

但是，我希望此服务每 5 分钟运行一次，因此我在任务计划程序中设置了一个任务，并将我的 Windows 服务的 .exe 指向该任务。但是，当任务计划程序运行我的 Windows 服务时，我收到以下错误：

**无法启动服务。服务进程无法连接到服务控制器**

我对此进行了很多研究，但没有提出任何建议。有没有人对可能导致这种情况的原因有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:02:26.353

好吧，那行不通。您不能像从任务计划程序中那样直接运行服务的 exe。您应该[使用“Net start”命令](http://www.coretechnologies.com/WindowsServices/FAQ.html#StartStopFromCommandLine)来启动服务。

如果您使用的是 Windows Vista 或更高版本，请务必选中计划任务中的“以最高权限运行”框以避免 UAC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:22:35.610

我的答案在评论中的格式不正确，所以我想让大家知道，如果他们遇到这个问题。基本上，我只是创建了一个 .bat 文件，然后在该 .bat 文件中，我放置了以下两行：

网络开始我的服务名称
网络停止我的服务名称

NET STOP 命令是同步的，将在停止服务之前等待服务完成。

谢谢您的帮助！

# selenium - 使用 selenium Webdriver 如何检查 webelement 是否在屏幕的可见区域之外？

> ID：10416836
> 
> 赞同：3
> 
> 时间：2012-05-02T15:27:27.307
> 
> 标签：selenium, webdriver, selenium-webdriver

我需要在滚动网页之前检查该元素是否不可见。该元素实际上存在于网页上，但在屏幕上不可见。滚动网页后，该元素对用户可见。

如何自动化上述场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:54:09.650

我找到了一种检查元素是否可见的方法。

思路是获取页面的1.滚动位置；2\. 浏览器可见区域的高度，以及 3\. 元素的 y 位置。

```
 scroll_position_script = """
        var pageY;
        if (typeof(window.pageYOffset) == 'number') {
            pageY = window.pageYOffset;
        } else {
            pageY = document.documentElement.scrollTop;
        }
        return pageY;
    """

    yOffset = self.browser.execute_script(scroll_position_script)

    js_client_height = "return document.documentElement.clientHeight;"
    browser_height = self.browser.execute_script(js_client_height)

    elem_yloc = int(element.location['y'])
    self.assertTrue(elem_yloc>=yOffset and elem_yloc<=yOffset+browser_height) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:52:12.507

我不建议您使用任何测试自动化工具来自动化这些类型的测试，因为该测试不可靠并且由于以下主要原因而无法始终如一地通过。

1.  您将如何确保特定元素在不同的浏览器中不可见？

2.  在不同的屏幕分辨率上运行相同的测试怎么样？

3.  同样在不同尺寸的显示器上运行相同的测试？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:01:36.013

@haroonzone 说了什么。它不能可靠地完成。

也就是说，我会在 WebElement 上尝试一下[`getLocation()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getLocation%28%29)和方法。[`getSize()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getSize%28%29)

与`driver.manage().window().`[`getSize()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Window.html#getSize%28%29).

或者也许玩一些 JavaScript [`window`](https://developer.mozilla.org/en/DOM/window)。即[`innerHeight`](https://developer.mozilla.org/en/DOM/window.innerHeight)and [`innerWidth`](https://developer.mozilla.org/en/DOM/window.innerWidth)on `window`, `document`, 或者可能是`document.body`DOM 元素。如果您不想将滚动条计入视口，请使用[`clientWidth`](https://developer.mozilla.org/en/DOM/element.clientWidth)and [`clientHeight`](https://developer.mozilla.org/en/DOM/element.clientHeight)。

[此链接](http://www.programmersheaven.com/mb/html/288284/288284/how-to-get-inner-window-widthheight-not-screen/)为 IE 提供了一些高级建议，因为 IE 的工作方式显然不同。

试一试，看看效果如何。

# objective-c - “实施不完整”的警告

> ID：10416840
> 
> 赞同：-2
> 
> 时间：2012-05-02T15:27:35.193
> 
> 标签：objective-c

我收到“不完整实现”的警告，但无法找出原因，将其与源文件进行比较。已将警告注释掉。

我的 ItemsViewController.m 版本

```
 #import "ItemsViewController.h"
    #import "BNRItemStore.h"
    #import "BNRItem.h"

    @implementation ItemsViewController //Incomplete implementation

    - (id)init 
    {
      // Call the superclass's designated initializer
      self = [super initWithStyle:UITableViewStyleGrouped];
      if (self) {
        UINavigationItem *n = [self navigationItem];

        [n setTitle:@"Homepwner"];

        // Create a new bar button item that will send
        // addNewItem: to ItemsViewController
        UIBarButtonItem *bbi = [[UIBarButtonItem alloc] 
                                initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
                                target:self 
                                action:@selector(addNewItem:)];

        // Set this bar button item as the right item in the navigationItem
        [[self navigationItem] setRightBarButtonItem:bbi];

        [[self navigationItem] setLeftBarButtonItem:[self editButtonItem]];
      }
      return self;
    }

    - (IBAction)addNewItem:(id)sender
    {
      // Create a new BNRItem and add it to the store
      BNRItem *newItem = [[BNRItemStore defaultStore] createItem];//No known class method for selector 'defaultStore'
      // Incompatible pointer types initializing 'BNRItem*__strong' with an expression of 'NSArray'

      // Figure out where that item is in the array 
      int lastRow = [[[BNRItemStore defaultStore] allItems] indexOfObject:newItem]; //No known class method for selector 'defaultStore'

      NSIndexPath *ip = [NSIndexPath indexPathForRow:lastRow inSection:0];

      // Insert this new row into the table.
      [[self tableView] insertRowsAtIndexPaths:[NSArray arrayWithObject:ip]
                              withRowAnimation:UITableViewRowAnimationTop];
    } 

    - (id)initWithStyle:(UITableViewStyle)style
    {
      return [self init];
    }

    - (void)viewWillAppear:(BOOL)animated
    {
      [super viewWillAppear:animated];
      [[self tableView] reloadData];
    }

    - (void)tableView:(UITableView *)tableView 
    moveRowAtIndexPath:(NSIndexPath *)fromIndexPath 
          toIndexPath:(NSIndexPath *)toIndexPath 
    {
      [[BNRItemStore defaultStore] moveItemAtIndex:[fromIndexPath row] //No known class method for selector 'defaultStore'
                                           toIndex:[toIndexPath row]];
    }

    - (void)tableView:(UITableView *)aTableView 
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
      DetailViewController *detailViewController = [[DetailViewController alloc] init];

      NSArray *items = [[BNRItemStore defaultStore] allItems];//No known class method for selector 'defaultStore'
      BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

      // Give detail view controller a pointer to the item object in row
      [detailViewController setItem:selectedItem];

      // Push it onto the top of the navigation controller's stack
      [[self navigationController] pushViewController:detailViewController
                                             animated:YES];
    }

    -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)io
    {
      if ([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPad) {
        return YES;
      } else {
        return (io==UIInterfaceOrientationPortrait);
      }
    }

    - (void)tableView:(UITableView *)tableView 
    commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
    forRowAtIndexPath:(NSIndexPath *)indexPath 
    {
      // If the table view is asking to commit a delete command...
      if (editingStyle == UITableViewCellEditingStyleDelete)
      {
        BNRItemStore *ps = [BNRItemStore defaultStore];//No known class method for selector 'defaultStore'
        NSArray *items = [ps allItems];
        BNRItem *p = [items objectAtIndex:[indexPath row]];
        [ps removeItem:p];

        // We also remove that row from the table view with an animation
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
      }
    }

    - (NSInteger)tableView:(UITableView *)tableView
     numberOfRowsInSection:(NSInteger)section
    {
      return [[[BNRItemStore defaultStore] allItems] count];//No known class method for selector 'defaultStore'
    }
    - (UITableViewCell *)tableView:(UITableView *)tableView
             cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
      // Create an instance of UITableViewCell, with default appearance
      // Check for a reusable cell first, use that if it exists
      UITableViewCell *cell =
      [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

      // If there is no reusable cell of this type, create a new one
      if (!cell) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:@"UITableViewCell"];
      }
      // Set the text on the cell with the description of the item
      // that is at the nth index of items, where n = row this cell
      // will appear in on the tableview
      BNRItem *p = [[[BNRItemStore defaultStore] allItems]//No known class method for selector 'defaultStore'
                    objectAtIndex:[indexPath row]];
      [[cell textLabel] setText:[p description]];
      return cell;
    }

    @end

Original source version of ItemsViewController.m

#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController
- (id)init 
{
    // Call the superclass's designated initializer
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        UINavigationItem *n = [self navigationItem];

        [n setTitle:@"Homepwner"];

        // Create a new bar button item that will send
        // addNewItem: to ItemsViewController
        UIBarButtonItem *bbi = [[UIBarButtonItem alloc] 
                        initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
                                             target:self 
                                             action:@selector(addNewItem:)];

        // Set this bar button item as the right item in the navigationItem
        [[self navigationItem] setRightBarButtonItem:bbi];

        [[self navigationItem] setLeftBarButtonItem:[self editButtonItem]];
    }
    return self;
}
- (IBAction)addNewItem:(id)sender
{
    // Create a new BNRItem and add it to the store
    BNRItem *newItem = [[BNRItemStore defaultStore] createItem];

    // Figure out where that item is in the array 
    int lastRow = [[[BNRItemStore defaultStore] allItems] indexOfObject:newItem];

    NSIndexPath *ip = [NSIndexPath indexPathForRow:lastRow inSection:0];

    // Insert this new row into the table.
    [[self tableView] insertRowsAtIndexPaths:[NSArray arrayWithObject:ip]
                            withRowAnimation:UITableViewRowAnimationTop];
}  
- (id)initWithStyle:(UITableViewStyle)style
{
    return [self init];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[self tableView] reloadData];
}

- (void)tableView:(UITableView *)tableView 
    moveRowAtIndexPath:(NSIndexPath *)fromIndexPath 
           toIndexPath:(NSIndexPath *)toIndexPath 
{
    [[BNRItemStore defaultStore] moveItemAtIndex:[fromIndexPath row]
                                         toIndex:[toIndexPath row]];
}

- (void)tableView:(UITableView *)aTableView 
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detailViewController = [[DetailViewController alloc] init];

    NSArray *items = [[BNRItemStore defaultStore] allItems];
    BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

    // Give detail view controller a pointer to the item object in row
    [detailViewController setItem:selectedItem];

    // Push it onto the top of the navigation controller's stack
    [[self navigationController] pushViewController:detailViewController
                                           animated:YES];
}

- (void)tableView:(UITableView *)tableView 
    commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
     forRowAtIndexPath:(NSIndexPath *)indexPath 
{
    // If the table view is asking to commit a delete command...
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        BNRItemStore *ps = [BNRItemStore defaultStore];
        NSArray *items = [ps allItems];
        BNRItem *p = [items objectAtIndex:[indexPath row]];
        [ps removeItem:p];

        // We also remove that row from the table view with an animation
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
    }
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    return [[[BNRItemStore defaultStore] allItems] count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Create an instance of UITableViewCell, with default appearance
    // Check for a reusable cell first, use that if it exists
    UITableViewCell *cell =
        [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    // If there is no reusable cell of this type, create a new one
    if (!cell) {
        cell = [[UITableViewCell alloc]
                    initWithStyle:UITableViewCellStyleDefault
                  reuseIdentifier:@"UITableViewCell"];
    }
    // Set the text on the cell with the description of the item
    // that is at the nth index of items, where n = row this cell
    // will appear in on the tableview
    BNRItem *p = [[[BNRItemStore defaultStore] allItems]
                                    objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:[p description]];
    return cell;
}
@end 
```

ItemsViewController.h

```
#import <Foundation/Foundation.h>
#import "DetailViewController.h"

@interface ItemsViewController : UITableViewController
{
  IBOutlet UIView *headerView;
}

-(UIView *)headerView;
-(IBAction)addNewItem:(id)sender;
-(IBAction)toggleEditingMode:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:39:46.863

您没有在 .m 文件中实现两种方法（如果我没有读错的话）：

```
-(UIView *)headerView;
-(IBAction)toggleEditingMode:(id)sender; 
```

这就是您收到警告的原因。

在任何情况下，在您的构建结果窗口中，在您看到带有包含数字的黄色图标的警告的右侧，您可以单击黄色图标，将显示更多信息，详细说明您在实现文件中缺少哪些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:41:18.150

您似乎没有实现以下两种方法：

```
-(UIView *)headerView;
-(IBAction)toggleEditingMode:(id)sender; 
```

# javascript - 如何获取详细的地理编码信息？

> ID：10416847
> 
> 赞同：0
> 
> 时间：2012-05-02T15:27:54.347
> 
> 标签：javascript, google-maps-api-3, geocoding, google-geocoder

```
function geocodePosition(pos) {
    geocoder.geocode({
        latLng: pos
    }, function (responses) {
        if (responses && responses.length > 0) {
            updateMarkerAddress(responses[0].formatted_address);
        } else {
            updateMarkerAddress('Cannot determine address at this location.');
        }
    });
} 
```

我可以使用此代码获取“formatted_address”。如何获取城市、国家和其他信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:37:33.213

这一切都在从 Maps API 返回的响应对象中。

以下是您正在使用的响应对象的属性 - [GeocoderResult](https://developers.google.com/maps/documentation/javascript/reference#GeocoderResult)

通过查看[地理编码页面上的扩展 JSON 可以更轻松地可视化结果](https://developers.google.com/maps/documentation/geocoding/#JSON)

例如：

`responses[0].address_components`会给你一个包含地址部分的对象数组。

# c# - 将 C# 转换为 VB.NET 时出错

> ID：10416848
> 
> 赞同：0
> 
> 时间：2012-05-02T15:27:55.230
> 
> 标签：c#, vb.net, c#-to-vb.net, code-conversion

我正在尝试将此方法转换为 VB.NET，但在线转换器似乎将其转换为一团糟。有人可以帮忙吗：

C# 原文：

```
private IEnumerable<IGrouping<string, Reference>> FindReferencesWithTheSameShortNameButDiffererntFullNames(List<Reference> references)
        {
            return from reference in references
                   group reference by reference.ReferencedAssembly.Name
                       into referenceGroup
                       where referenceGroup.ToList().Select(reference => reference.ReferencedAssembly.FullName).Distinct().Count() > 1
                       select referenceGroup;
        } 
```

VB.NET 使用在线转换器：

```
Private Function FindReferencesWithTheSameShortNameButDiffererntFullNames(references As List(Of Reference)) As IEnumerable(Of IGrouping(Of String, Reference))
        Return _
            Where referenceGroup.ToList().[Select](Function(reference) reference.ReferencedAssembly.FullName).Distinct().Count() > 1
End Function 
```

`Where`未声明此错误。

我不会想到 VB 不会像这样的 C# 那样不同：

```
Private Function FindReferencesWithTheSameShortNameButDiffererntFullNames(references As List(Of Reference)) As IEnumerable(Of IGrouping(Of String, Reference))
            Return From reference In references
                   Group reference By reference.ReferencedAssembly.Name
                   Into referenceGroup()
                   Where referenceGroup.ToList().Select(Function(reference) ReferencedAssembly.FullName).distinct().count() > 1
                                                        Select referenceGroup

        End Function 
```

但我得到：在这种情况下无法访问方法 referenceGroup 的定义......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:57:14.803

VB.Net 的语法略有不同。该`Group`关键字还指示当前分组，可以直接使用或分配给命名变量。

```
 Private Function FindReferencesWithTheSameShortNameButDiffererntFullNames(references As List(Of Reference)) As IEnumerable(Of IGrouping(Of String, Reference))
    Return From referenceGroup In references.GroupBy(Of String, Reference)(Function(reference) reference.ReferencedAssembly.Name, Function(reference) reference)
           Where (referenceGroup.ToList().Select(Function(reference) As String
                                                     Return reference.ReferencedAssembly.FullName
                                                 End Function).Distinct().Count() > 1)
           Select referenceGroup
End Function 
```

**更新**

我刚刚注意到你正在返回一个`IGrouping`. 查询理解语法在这种情况下不起作用，您必须显式调用`GroupBy()`. 代码示例已更新以反映这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:29:58.563

原始 C# 代码做了一些不必要的操作，所以让我们先清理它并做一些优化。

调用是不必要的`ToList()`，删除它。调用`Count()`枚举所有项目以获取计数，但您只想检查是否有多个。最好跳过第一个结果，看看是否还有其他结果，并且在逻辑上是等价的。

```
private IEnumerable<IGrouping<string, Reference>>
    FindReferencesWithTheSameShortNameButDiffererntFullNames(
        List<Reference> references)
{
    return
        from reference in references
        group reference by reference.ReferencedAssembly.Name into referenceGroup
        where referenceGroup
            .Select(reference => reference.ReferencedAssembly.FullName)
            .Distinct()
            .Skip(1)
            .Any()
        select referenceGroup;
} 
```

所以翻译这个：

```
Private Function FindReferencesWithTheSameShortNameButDiffererntFullNames(references As List(Of Reference)) As IEnumerable(Of IGrouping(Of String, Reference))
    Return
        From referenceGroup In references.GroupBy(Function(reference) reference.ReferencedAssembly.Name)
        Where referenceGroup.Select(Function(reference) reference.ReferencedAssembly.FullName).Distinct.Skip(1).Any
        Select referenceGroup
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:00:04.543

是否像从 referenceGroup 中删除括号一样简单？我想知道 vb 是否认为这是一种方法而不是标识符。

# magento - Magento API：如何在不重新上传的情况下将图像分配给多个产品

> ID：10416852
> 
> 赞同：0
> 
> 时间：2012-05-02T15:27:59.540
> 
> 标签：magento, magento-1.5, magento-1.6

我工作的站点（Magento 1.5 和 1.6）目前使用手动放置图像然后使用 MySQL 查询关联它们的脚本。我的任务是尝试转向以 API 为中心的方法，以简化事物并与其他流程集成，并摆脱直接的数据库操作（以防字段更改等）。
我们产品的结构方式是，我们有一个可配置的项目，然后它为每种颜色/尺寸组合提供简单的项目。对于每种颜色，无论尺寸如何，都只需要一组图像。

示例：产品 A 是一个可配置的产品，有六个相关的简单产品代表它的两种颜色，黑色和红色，每种颜色都有小号、中号和大号。假设我上传了一组中等大小的红色图像。然后我想将这些相同的图像用于大小大小的红色，而不是重新上传。黑色的过程相同。

就目前而言，看起来我必须为每个简单的产品上传图片。有什么方法可以做我想做的事，还是我必须坚持旧方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:14:28.920

我用 Magento API 玩了很多。我可以确认“catalog_product_attribute_media.create”是将图像与产品相关联的唯一函数。使用此功能，您必须为您需要的每个产品“上传”图像。

最好的问候吉苏佩

（对不起我的英语不好）

# google-maps - 如何在“我的地图”上使用 Google 地图样式

> ID：10416855
> 
> 赞同：0
> 
> 时间：2012-05-02T15:28:06.907
> 
> 标签：google-maps, styles

我是使用谷歌地图 API 的新手，并且有一个简单的问题，但经过数小时的谷歌搜索后我找不到简单的答案。我是一名小说作家，我正在编写的一个超文本项目设置在威斯康星州密尔沃基的虚构版本中。我想嵌入一个样式化的 Google 地图，其中包含指向基于虚构世界的 wiki 的链接。

所以我可以创建一个带有标记和链接的“我的地方”地图：http: [//trenthergenrader.com/calypsis/rivertown%20googlemap/mymap.html](http://trenthergenrader.com/calypsis/rivertown%20googlemap/mymap.html)

我可以创建一个风格化的密尔沃基谷歌地图：http: [//trenthergenrader.com/calypsis/rivertown%20googlemap/styled.html](http://trenthergenrader.com/calypsis/rivertown%20googlemap/styled.html)

但我看不到如何创建“我的地点”地图的样式版本。我到处寻找有关如何执行此操作的说明，它只是说在 Google 地图中使用链接和嵌入功能，但是当我得到的只是 iframe 标签中的长链接时，我不知道如何/在哪里添加样式。

这一定是可能的，对吧？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:06:47.303

不，不可能。您可以获得 My Map 的 KML 输出并将其作为 KMLLayer 添加到您的 Google Maps API 站点上。查看“我的地图”时，获取标有“KML”的复制链接。这是 KMLLayer 文档： [https ://developers.google.com/maps/documentation/javascript/layers#KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

# ibm-mq - 使用 websphere MQ 作为 XA 事务协调器

> ID：10416856
> 
> 赞同：5
> 
> 时间：2012-05-02T15:28:14.343
> 
> 标签：ibm-mq, xa

我正在尝试使用 Websphere MQ（没有 WAS）作为我在 MQ 和 Oracle 11g 之间的 java 应用程序的 XA 事务协调器。

可能吗？这是一个好习惯吗？

我已经在我的 Windows（64 位 win7）上安装了 MQ V7.0.1 服务器并正确配置了 XA 资源管理器。但是，当我的简单 java 代码启动事务并将其中断时，只有队列上的消息可以回滚，而数据库操作不能回滚。我希望他们两个可以一起回滚。

我的简单java代码如下
QueueManager qmgr = new QueueManager(QM_NAME, properties);
.....
JdbcConnection conn = qmgr.getJdbcConnection(xads);
qmgr.begin();
// 进行数据库操作并将消息放入队列
qmgr.backout();
conn.close();

但是只有“put message”可以回滚，而数据库操作不能。

我是 MQ 的新手，您有解决此问题的想法吗？任何输入都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:46:51.857

# git - 为什么我 git 克隆这个目录时没有得到所有文件？

> ID：10416858
> 
> 赞同：0
> 
> 时间：2012-05-02T15:28:15.393
> 
> 标签：git, open-source, github

我做了

```
git clone https://github.com/niltsh/MPlayerX 
```

它似乎正在下载所有内容。但是当它完成时，我进入文件夹，我发现很多东西都不见了。

为什么没有得到一切？是因为这些文件夹来自其他项目吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:38:20.140

子模块丢失是因为您没有下载它们。以下命令应该可以获取它们。

```
$ git submodule init
$ git submodule update 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:48:03.707

您也可以通过以下方式一步完成：

```
$ git clone --recursive RepoURLHere 
```

:)

# xcode - XCode 4.3“由于未知原因无法在'项目路径'加载项目”

> ID：10416859
> 
> 赞同：0
> 
> 时间：2012-05-02T15:28:16.427
> 
> 标签：xcode, xcode4

当我尝试在 Xcode 4.3 中打开我的项目时，我不断收到上述错误。

“由于未知原因，无法在‘项目路径’加载项目”

我最终创建了一个新项目，然后将源文件复制到新项目中，但是在关闭项目后 - 当我再次打开它时，我得到了同样的错误。它只发生在这个项目中。

这有发生在其他人身上吗？关于可能导致它的原因以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:57:17.530

我重新编写了项目，一次将源代码文件复制到一个文件中，以找出导致问题的原因。事实证明，它是一个图像文件，文件路径中有一个 unicode 文本对象。显然，如果文件路径包含新的 unicode (6.1) 字符，Xcode 将不会重新打开。我刚刚重命名了图像，一切都很棒。

# antlr - 为什么这条规则会出现递归溢出？

> ID：10416860
> 
> 赞同：1
> 
> 时间：2012-05-02T15:28:17.187
> 
> 标签：antlr

这是这个问题的“后续”：[如何解析带括号的层次结构根？](https://stackoverflow.com/questions/10405668/how-to-parse-a-parenthesized-hierarchy-root)（知道`root`规则现在已重命名`atom`）。

在我的 ANTLR 语法中，我现在尝试添加对强制转换的支持：

```
cast : '(' type ')' atom -> ^(CAST type atom); 
```

现在，我需要让它成为价值树的一部分。由于演员表本身是原子的，可以作为层次结构的基础，并且可以用于任何二元运算（因子、求和、比较），我认为它必须符合`atom`（以前的`root`）规则。

```
cast : '(' type ')' atom -> ^(CAST type atom);

atom : cast | IDENTIFIER | SELF | literal | constructor | call | indexer | '('! value ')'!;

hierarchy : atom (SUB^ (IDENTIFIER | call | indexer))*;

factor : hierarchy ((MULT^ | DIV^ | MODULO^) hierarchy)*;

sum : factor ((PLUS^ | MINUS^) factor)*;

comparison : sum (comparison_operator^ sum)*;

value : comparison; 
```

幸运的是，这次似乎一切都足够了 LL(*)。`type`但是，我从to得到无限递归`type`：

```
type : name=IDENTIFIER (LESSER (generics+=type (SEPARATOR generics+=type)*) GREATER)? -> ^(TYPE $name ^(GENERICS $generics*)); 
```

> [rule **atom** ] Alternative 1 [ *cast* ]：在匹配输入后，例如 PAREN_OPEN IDENTIFIER LESSER IDENTIFIER LESSER IDENTIFIER LESSER IDENTIFIER LESSER IDENTIFIER {LESSER, SEPARATOR} 决策无法预测接下来会发生什么，因为从*类型到**类型的递归溢出*

 *这种情况反映了诸如`(x<x<x<x<x[</,]`.

ANTLR 的错误非常难以理解。我重新阅读了解释这个确切错误的章节，但我仍然不明白。我也不明白的是，在独立的基础上，该`type`规则从未触发任何无限递归警告。

我该如何解决？请根据我对 ANTLR 的理解，您能解释一下为什么它现在会触发吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:50:07.043

我不会说 ANTLR 的错误消息是（全部）难以理解的，但是，是的，*这个*错误是......

在这种情况下，ANTLR 在区分关系表达式`IDENTIFIER < atom`和`IDENTIFIER < ...`它是 a 的一部分时存在问题`type`。这两种选择都可以作为`atom`规则的开始。

您可以通过更改泛型类型的开头来验证这一点，使其与关系 LT 表达式的开头不同：

```
type
 : IDENTIFIER ('@' (type (',' type)*) '>')?
 ; 
```

或将 LT 符号保留在泛型类型中，但从规则中`IDENTIFIER`删除`atom`：

```
type
 : IDENTIFIER ('<' (type (',' type)*) '>')?
 ;

atom
 : cast 
 //| IDENTIFIER
 | SELF
 | literal
 | constructor
 | call
 | indexer
 | '('! value ')'!
 ; 
```

当然，我知道这两种选择都不现实。

`cast`为了使 ANTLR 对语法感到满意，您可以在规则中的替代项前面添加一个语法谓词`atom`（并保留`type`您当前拥有的规则）：

```
atom
 : (cast)=> cast 
 | IDENTIFIER
 | SELF
 | literal
 | constructor
 | call
 | indexer
 | '('! value ')'!
 ; 
```

这迫使解析器首先向前看，并确保确实存在*要*匹配的`cast`替代方案，当没有匹配时，它会落入`atom`规则中的后续替代方案。

但这里更好的选择是你不允许你的语法匹配关系表达式，如：

```
a < b < c 
```

这没有多大意义：关系表达式`a < b`通常计算为布尔值，不能与 比较`c`，对吧？此外，您现在将所有逻辑运算符、关系运算符和相等运算符分组到一个规则中，使它们*都*具有相同的优先级：而在大多数情况下，`OR`具有最低的优先级，然后是`AND`，然后是相等，然后是关系运算符。

所以，而不是：

```
value      : comparison;
comparison : sum (comparison_operator^ sum)?;
...

comparison_operator : EQUAL | NOT_EQUAL | GREATER | LESSER
                    | GREATER_OR_EQUAL | LESSER_OR_EQUAL 
                    | AND | OR
                    ; 
```

做：

```
value : or;
or    : and (OR^ and)*;
and   : eq (AND^ eq)*;
eq    : rel ((EQUAL | NOT_EQUAL)^ rel)?; // note the '?' and no '*'
rel   : sum ((GREATER | LESSER | GREATER_OR_EQUAL | LESSER_OR_EQUAL)^ sum)?; // note the '?' and no '*'
sum   : factor ((PLUS | MINUS)^ factor)*;
... 
```

然后你不需要规则前面`type`的谓词，*并且*你有正确顺序的运算符优先级。`atom`*

# php - PHP调整图像大小，有点工作

> ID：10416862
> 
> 赞同：0
> 
> 时间：2012-05-02T15:28:21.710
> 
> 标签：php, resize

这段代码已经给我带来了几个星期的问题，但还没有接近解决它......

```
function create_thumbnail($source, $destination, $thumb_width){
    $extension = get_image_extension($source);
    $size = getimagesize($source);
    $imageWidth  = $newWidth  = $size[0];
    $imageHeight = $newheight = $size[1];

    if ($imageWidth > $thumb_width || $imageHeight > $thumb_width)
    {
        // Calculate the ratio
        $xscale = ($imageWidth/$thumb_width);
        $yscale = ($imageHeight/$thumb_width);
        $newWidth  = ($yscale > $xscale) ? round($imageWidth * (1/$yscale)) : round($imageWidth * (1/$xscale));
        $newHeight = ($yscale > $xscale) ? round($imageHeight * (1/$yscale)) : round($imageHeight * (1/$xscale));
    }

    $newImage = imagecreatetruecolor($newWidth, $newHeight);

    switch ($extension)
    {
        case 'jpeg':
        case 'jpg':
            $imageCreateFrom = 'imagecreatefromjpeg';
            $store = 'imagejpeg';
            break;

        case 'png':
            $imageCreateFrom = 'imagecreatefrompng';
            $store = 'imagepng';
            break;

        case 'gif':
            $imageCreateFrom = 'imagecreatefromgif';
            $store = 'imagegif';
            break;

        default:
            return false;
    }

    $container = $imageCreateFrom($source);
    imagecopyresampled($newImage, $container, 0, 0, 0, 0, $newWidth, $newHeight, $imageWidth, $imageHeight);
    return $store($newImage, $destination);
} 
```

现在它工作正常，但是这些调整大小的图像要进入的空间是 200（高度）乘 225（宽度），有时我会得到一个又高又瘦的图像和一些又短又宽的图像，这使得它很难将它们放入空间中，理想情况下，如果我可以调整这些图像的大小并将它们压扁或切断，但我不确定这是否可能......是吗？

如果这是不可能的，我想我正在寻找调整此代码，所以如果它的图像又高又瘦，可以调整为 200 的高度，如果图像又宽又短，可以调整为 225 的宽度......我希望这个说得通。

无论如何，任何提示、建议或任何东西都将不胜感激。

我试图运行 mschr 代码（在答案下面）并得到了这些错误

```
Warning: imagecreatetruecolor() [function.imagecreatetruecolor]: Invalid image dimensions in /home/content/44/8713044/html/admin/Home.php on line 321

Warning: imagecopyresampled(): supplied argument is not a valid Image resource in /home/content/44/8713044/html/admin/Home.php on line 323

Warning: Cannot modify header information - headers already sent by (output started at /home/content/44/8713044/html/admin/include/header.php:7) in /home/content/44/8713044/html/admin/Home.php on line 325

Warning: imagejpeg(): supplied argument is not a valid Image resource in /home/content/44/8713044/html/admin/Home.php on line 329

Warning: imagedestroy(): supplied argument is not a valid Image resource in /home/content/44/8713044/html/admin/Home.php on line 334 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:39:17.627

我是这样做的；$w 和 $h 是请求的尺寸，$nHeight 和 $nWidth 导致暗淡 - 坚持纵横比

```
function thumb($img, $w = 100, $h = 100, $fill = true) {
    if (!extension_loaded('gd') && !extension_loaded('gd2')) {
        trigger_error("No dispones de la libreria GD para generar la imagen.", E_USER_WARNING);
        return false;
    }

    $imgInfo = getimagesize($img);
    switch ($imgInfo[2]) {
        case 1: $im = imagecreatefromgif($img); break;
        case 2: $im = imagecreatefromjpeg($img);  break;
        case 3: $im = imagecreatefrompng($img); break;
        default:  trigger_error('Tipo de imagen no reconocido.', E_USER_WARNING);  break;
    }
    // note, how the lesser ratio is chosen
    if ($imgInfo[0] <= $w && $imgInfo[1] <= $h && !$fill) {
        $nHeight = $imgInfo[1];
        $nWidth = $imgInfo[0];
    }else{
        if ($w/$imgInfo[0] < $h/$imgInfo[1]) {
            $nWidth = $w;
            $nHeight = $imgInfo[1]*($w/$imgInfo[0]);
        }else{
            $nWidth = $imgInfo[0]*($h/$imgInfo[1]);
            $nHeight = $h;
        }
    }

    $nWidth = round($nWidth);
    $nHeight = round($nHeight);

    $newImg = imagecreatetruecolor($nWidth, $nHeight);

    imagecopyresampled($newImg, $im, 0, 0, 0, 0, $nWidth, $nHeight, $imgInfo[0], $imgInfo[1]);

    header("Content-type: ". $imgInfo['mime']);

    switch ($imgInfo[2]) {
        case 1: imagegif($newImg); break;
        case 2: imagejpeg($newImg);  break;
        case 3: imagepng($newImg); break;
        default:  trigger_error('Imposible mostrar la imagen.', E_USER_WARNING);  break;
    }

    imagedestroy($newImg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:27:59.340

啊，我明白了.. 您希望使用您的图像数据设置 $destination，上面的帖子显示了一个函数，该函数将通过 GET 请求提供图像，如下所示：

[http://localhost/thumbnail.php?w=500&h=300&file=./images/bigimage.png](http://localhost/thumbnail.php?w=500&h=300&file=./images/bigimage.png)

而 thumbnail.php 包含函数 'thumb' 并调用它

```
<? thumb($_GET['file'], $_GET['w'], $_GET['h']); ?> 
```

你想要的是 1) 修改 thumb 接受 $destination 的参数 2) 删除 header("Content-type...") 行 3) 在最后一个 switch-case 中重写为：

```
switch ($imgInfo[2]) {
    case 1: return imagegif($newImg, $destination);
    case 2: return imagejpeg($newImg, $destination);
    case 3: return imagepng($newImg, $destination);
    default:  trigger_error('Imposible mostrar la imagen.', E_USER_WARNING);  break;
}
 return false; 
```

# apache - 开发和测试 Web 客户端应用程序

> ID：10416863
> 
> 赞同：0
> 
> 时间：2012-05-02T15:28:26.900
> 
> 标签：apache, deployment, web, client-side

这是一个菜鸟问题。

我正在开发一个网络（客户端）应用程序。我有一个*开发*目录，其中包含 Web 内容：HTML、CSS 和 JS 文件。

现在我想测试一下。我正在运行`apache`，它`/var/www`用作默认的 Web 目录。我可以将我的*开发*目录作为一个整体复制到`/var/www`并在浏览器中测试应用程序。

另一种选择是配置`apache`为直接映射`/my-app`到我的*开发*目录`~/dev/my-app`。

您更喜欢哪个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:41:57.397

通常的方法是在您的 /var/www 目录中添加一个指向您的开发（或构建）目录的软链接。因此，您不必更改 apache 设置，而是将您正在制作的代码放在您的主目录中。

（当然，这是用于开发计算机，从互联网上看不到）

# sql-server-2008 - tsql - 匹配查找中最接近的数字

> ID：10416865
> 
> 赞同：0
> 
> 时间：2012-05-02T15:28:28.857
> 
> 标签：sql-server-2008, tsql, lookup

我有一个返回持续时间值的选择。我想做的是在查找表中查找该值并返回最接近该持续时间值的产量值。

例如

我的美元持续时间为 0.20，因此从下面的查找表中得出，该表源自此代码：

```
select fld1_val, mrkt_cap_wght from dw_iss_indx_cnstnt AS ai WITH (NOLOCK)

INNER JOIN  dw_issue_dg AS i WITH (NOLOCK)
  ON ai.indx_instr_id = i.instr_id 
  AND ai.as_of_dte > getdate()-2

INNER JOIN dw_issue_alt_id AS ia WITH (NOLOCK)
  on ia.instr_id = ai.indx_instr_id
  AND id_ctxt_typ = 'Bloomberg ID'
  AND denom_curr_cde = 'USD' 
```

这返回：

```
fld1_val    mrkt_cap_wght
0.08        5.0168
0.25        5.03
0.5         5.09
1           5.21
2           5.2
5           5.51
10          5.67
12          5.69
15          5.7
20          5.71 
```

所以我要做的是对此进行查找，因为 0.20 最接近 0.25，我将返回 5.03 作为我的收益。

但是我不确定如何做到这一点，因为查找不是在寻找精确匹配，只是最接近值。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:35:11.537

我现在无法测试/验证这一点，但您似乎可以`min`通过选择前 1 个来对抗给定值和表值之间的绝对差值来使用或排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:06:11.403

```
DECLARE @Dur decimal(5,2)=0.20;

select TOP 1 fld1_val, mrkt_cap_wght from dw_iss_indx_cnstnt AS ai WITH (NOLOCK)

INNER JOIN  dw_issue_dg AS i WITH (NOLOCK)
  ON ai.indx_instr_id = i.instr_id 
  AND ai.as_of_dte > getdate()-2

INNER JOIN dw_issue_alt_id AS ia WITH (NOLOCK)
  on ia.instr_id = ai.indx_instr_id
  AND id_ctxt_typ = 'Bloomberg ID'
  AND denom_curr_cde = 'USD'
ORDER BY ABS(@Dur-fld1_val) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:37:02.603

一种快速而肮脏的方法：

```
SELECT fld1_val
FROM table
WHERE (abs(mrkt_cap_wght - 0.25)) = (SELECT MIN(abs(mrkt_cap_wght - 0.25)) FROM table); 
```

我已经在另一张桌子上对其进行了测试，它确实有效，但确实感觉有点笨拙。

# string - 以符合现有代码期望的方式迭代可能的空行

> ID：10416869
> 
> 赞同：2
> 
> 时间：2012-05-02T15:28:42.817
> 
> 标签：string, iterator, lua, pattern-matching

我曾经用一个简单的方法迭代字符串中的行

```
for line in s:gmatch("[^\r\n]+") do 
```

效果很好！然后现实生活发生了......

**.... 现在我的要求发生了变化：我也**需要匹配空行。这就是问题所在：由于这种迭代形式在几个本身都是丛林的地方使用，我想尽可能避免更改周围的代码。由于对上述功能无法匹配的微妙预期，到目前为止，我对`gmatch`/的尝试无法为上述模式创建一个“插入式”替代品。`find`

我寻求的构造 ( `for line in some_matcher(s) do`) 符合以下要求，我相信这些要求涵盖了我担心的所有边缘情况：

```
 INPUT            EXPECTATIONS

1\. ''            -- match once   ('')
2\. '\r\n'        -- match twice  ('', '')
3\. '\r\n\r\n'    -- match thrice ('', '', '')
4\. 'aaa'         -- match once   ('aaa')
5\. 'aaa\r\n'     -- match twice  ('aaa', '')
6\. 'aaa\r\nbbb'  -- match twice  ('aaa', 'bbb')
7\. '\r\nbbb'     -- match twice  ('', 'bbb') 
```

我的旧解决方案假设只`\r\n`发生行尾，如果新解决方案只处理这种情况，那就完全没问题了。

但是，由于在我的商店中讨论了 Linux 支持计划，因此非常感谢一个也处理更简单的`\n`行尾（为了未来的 unix 兼容性）的答案，并在几个月后重新访问这个问题. 然而，问题**在于**，在许多情况下，我需要在原始字符串输入中使用**此匹配项的起始列。**如果上面的构造 ( `for ... do`) 可以输出它作为额外的好处，那将特别棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:53:24.207

如果您需要准确检测换行符边界而不是跳过/丢弃它们，以跨平台方式，您不能使用同时包含`\r`and的集合`\n`，因为它将匹配换行符序列`\r\n`两次而不是一次（CRLF 是单个换行符在 DOS/Windows 上）。你可以使用足够强大的正则表达式引擎（例如支持交替）来处理这个问题，但是 Lua 的模式匹配库非常少。

最好的办法是在处理文本之前规范化换行符，如下所示：

```
function normalize_eols(s)
    return s
        :gsub('\r\n','\n')
        :gsub('\r', '\n')
end 
```

至于您的 input=>output 网格，如果我们将换行符视为行*分隔符*，那么我希望`[^\n]*`（零个或多个非换行符）可以工作，但我们得到以下结果：

```
''         => ('')
'\n'       => ('', '')
'\n\n'     => ('', '', '')
'aaa'      => ('aaa', '')
'aaa\n'    => ('aaa', '', '')
'aaa\nbbb' => ('aaa', '', 'bbb', '')
'\nbbb'    => ('', 'bbb', '') 
```

坦白说，我不知道为什么。

但是，如果我们将换行符视为行*终止符*，那么我们可以通过将换行符附加到输入并使用模式`[^\n]*\n`（零个或多个非换行符后跟换行符）来获得所需的结果：

```
'\n'         => ('')
'\n\n'       => ('', '')
'\n\n\n'     => ('', '', '')
'aaa\n'      => ('aaa')
'aaa\n\n'    => ('aaa', '')
'aaa\nbbb\n' => ('aaa', 'bbb')
'\nbbb\n'    => ('', 'bbb') 
```

所以你的代码会变成这样：

```
s = normalize_eols(s) .. '\n'
for line in s:gmatch('([^\n]*)\n') do
    ... 
```

# node.js - Node.js + Express + Socket.io：没有触发客户端套接字事件

> ID：10416870
> 
> 赞同：1
> 
> 时间：2012-05-02T15:28:44.080
> 
> 标签：node.js, express, socket.io

我在这些文件中有以下代码：

应用程序.js：

```
/**
 * Module dependencies.
 */

var io = require('socket.io')
  , express = require('express')  
  , mongoose = require('mongoose')
  , models = require('./models')(mongoose)
  , routes = require('./routes')(models);
var app = module.exports = express.createServer();

// Configuration

app.configure(function(){
  app.use(express.cookieParser());
  app.use(express.session({secret:'123abc',key:'express.sid'}));
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes

app.get('/', routes.index);

var sio = io.listen(app);
app.listen(3000);

sio.sockets.on('connection', function(socket) {
    socket.send('this is a test');
    console.log('socket connected, sessionID ' + socket.handshake.sessionID);
    socket.emit('welcome', {msg: 'welcome'});
});

var parseCookie = require('connect').utils.parseCookie;

sio.set('authorization', function (data, accept) {
        if (data.headers.cookie) {
                data.cookie = parseCookie(data.headers.cookie);
                data.sessionID = data.cookie['express.sid'];
        } else {
                return accept('No cookie transmitted.', false);
        }

        accept(null, true);
});

console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

/javascripts/socket.js：

```
var socket = io.connect('http://173.255.229.76', {port:3000});
            socket.on('connect', function(data) {
                console.log('connected');
            });
            socket.on('message', function(data) {
                    console.log(data);
            });

            socket.on('welcome', function(data) {
                    console.log(data);
            }); 
```

布局.jade：

```
!!!
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(src="/socket.io/socket.io.js")
    script(src="/javascripts/socket.js")
  body!= body 
```

当客户端连接时，我在控制台中获得调试信息，显示我期望的所有输出，但客户端上没有任何内容。没有任何事件被调用，并且没有数据记录到控制台。我究竟做错了什么？随意访问网址： http: [//173.255.229.76](http://173.255.229.76:3000) :3000并亲自查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:15:27.287

对于 express 3，您需要创建一个 http 服务器实例才能使用 socket.io

```
var express = require('express'),
app = express(),
io = require('socket.io'),
http = require('http');
//routes and config ...

var s = http.createServer(app);
var sio = io.listen(s);
s.listen(8080)
//do whatever 
```

让我知道这是否有帮助

# android - 如何在从 url 加载的 ImageView 中淡入图片

> ID：10416871
> 
> 赞同：5
> 
> 时间：2012-05-02T15:28:53.733
> 
> 标签：android, android-animation, android-imageview

我想将淡入动画应用到 ImageView 以创建从 url 加载的图像在下载完成时淡入的效果。

我知道如何将图像从 url 下载到 ImageView，就像在[这个答案](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)中一样，我知道如何将淡入动画应用到[像这里这样](https://stackoverflow.com/questions/2597329/how-to-do-a-fadein-of-an-image-on-an-android-activity-screen)的 imageView 。

这次尝试

```
Drawable d = ImageUtils.fetchDrawable("the url");
imageView.setImageDrawable(d);
imageView.startAnimation(fadeInAnimation); 
```

导致闪烁效果（看，看不到，淡入看）。颠倒最后两行的顺序也会导致闪烁。

我已经用谷歌搜索并搜索了一个回调/监听器形式的解决方案 - 像这样：

```
imageView.setOnLoadCompleteListener... 
```

在 ImageView 中注册加载完成事件，但我没有找到任何类似的内容。

对于如何实现此效果的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-04T11:55:46.873

可以使用：TransitionDrawable，简单代码如下：

```
 // Transition drawable with a transparent drwabale and the final bitmap
        final TransitionDrawable td =
                new TransitionDrawable(new Drawable[] {
                        new ColorDrawable(Color.TRANSPARENT),
                        new BitmapDrawable(mResources, bitmap)
                });
        // Set background to loading bitmap
        imageView.setBackgroundDrawable(
                new BitmapDrawable(mResources, mLoadingBitmap));

        imageView.setImageDrawable(td);
        td.startTransition(FADE_IN_TIME); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:34:33.593

设置动画的 `ImageView`可见性`INVISIBLE`或`GONE` 设置`setAnimationListener`。以及何时`onAnimationEnd` 更改`ImageView`.

```
fadeInAnimation.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationEnd(Animation arg0) {

           // let make your image visible

        }

        @Override
        public void onAnimationRepeat(Animation animation) {}
        @Override
        public void onAnimationStart(Animation animation) {}
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-15T20:13:50.510

只需使用您提到的答案的 onPostExecute 方法并在那里触发动画（当图像实际加载并准备好时）：

```
 protected void onPostExecute(Bitmap result) {

    bmImage.setImageBitmap(result);
    Animation myFadeInAnimation = AnimationUtils.loadAnimation(context, R.anim.fadein);
    bmImage.startAnimation(myFadeInAnimation);
} 
```

# oracle - 0x80040e51 描述：“提供程序无法派生参数信息，并且尚未调用 SetParameterInfo。”

> ID：10416875
> 
> 赞同：5
> 
> 时间：2012-05-02T15:29:12.047
> 
> 标签：oracle, ssis

我正在尝试使用 where 子句对 oracle 执行查询，包括

```
BETWEEN date AND date2 
```

第一轮研究表明，oracle OLEDB 提供者不允许参数化查询，这些应该设置在变量中。所以我创建了 3 个变量。2 保存我正确填充的日期，一个保存以表达式结尾的查询：

```
 BETWEEN to_date('" + (DT_WSTR, 30)@[User::lastRun]  + "','DD/MM/YYYY HH:MI:SS AM') AND to_date('" + (DT_WSTR, 30) @[User::thisRun] + "','DD/MM/YYYY HH:MI:SS AM')" 
```

当我在表达式生成器中单击“评估表达式”时，它会正确评估为

```
BETWEEN to_date('1/1/1900','DD/MM/YYYY HH:MI:SS AM') AND
to_date('1/1/2010','DD/MM/YYYY HH:MI:SS AM') 
```

而且我可以使用其他工具成功地针对 oracle 运行它。

但是当我尝试运行包时，我收到：

> [mySource [1](https://i.stack.imgur.com/0PjKy.png) ] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E51。OLE DB 记录可用。来源：“OraOLEDB” Hresult：0x80040E51 描述：“提供程序无法派生参数信息，并且尚未调用 SetParameterInfo。”。

其中 mySource 是 OLE DB 源。它将 AccessMode 设置为“来自变量的 SQL 命令”，并将 SQLCommandVariable 设置为我的查询变量。

我还尝试手动设置所有输出外部列，并更改我在查询中选择的一些值以抛弃 oracle DATE 数据类型：

```
to_char(PT.CREATED_DTTM,'DD/MM/YYYY HH:MI:SS AM') 
```

我对 SSIS 还是很陌生，所以我什至不确定我是否在正确的位置寻找这个错误的根源。任何人都有想法从这里去哪里？

按要求截图。如您所见，“来自变量”查询在预览模式下按预期工作，但是当我尝试执行它时出现错误。

![控制流](../Images/ac27a1ccacfeac484810b50633bd7b15.png) ![数据源](../Images/8182d4aa57e95acc266089138c5571c1.png) ![调试错误](../Images/a242461eb2bd0811720c6a2b7b49e565.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:02:20.323

我最终在 DataFlow 的“表达式”中设置了这个，而不是在 OLD DB 源上，确保变量仍然具有“EvaluateAsExpression”= True。

您还可以看到我已经从 OLE DB 更新为使用[Attunity Oracle 连接器](http://msdn.microsoft.com/en-us/library/ee470675%28SQL.100%29.aspx)。

![数据流源](../Images/d3714bc64f3f076c5d9ee44e1a358b2e.png)

# asp.net - asp.net web api - 接口成员的 json 序列化导致神秘错误

> ID：10416877
> 
> 赞同：2
> 
> 时间：2012-05-02T15:29:26.133
> 
> 标签：asp.net, json, asp.net-web-api

我正在使用 ASP.NET Web API，我正在尝试返回一个如下所示的类的实例：

```
public class Whatever
{
  public int MyInt {get; set;}
  public IFoo MyFoo {get; set;}
} 
```

当这个实例被序列化为 JSON 时，`IFoo`成员（可能是实现的多个类中的任何一个的实例`IFoo`）会奇怪地被序列化。属性名称已写入，但其值是一大段 HTML，其中包含如下错误消息：

```
You must write an attribute 'type'='object' after writing the attribute with local name '__type'. 
```

这是框架告诉我它不知道如何将实例转换为接口吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:05:13.763

每当框架尝试序列化类型为接口的成员时，似乎都会发生此错误。除了更改成员以使其类型具体之外，我找不到解决此问题的其他方法。

# ruby-on-rails - Rake Aborted：参数数量错误（0 代表 1）

> ID：10416878
> 
> 赞同：2
> 
> 时间：2012-05-02T15:29:28.507
> 
> 标签：ruby-on-rails, database, rake

我试图将 twitter 身份验证集成到我的 Ruby on Rails 应用程序中（来自 Ruby on Rails 教程）。

结果，我删除了一个表（用户表）并不得不重新创建它。我现在想填充数据库，我有这个代码来填充表

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
    User.create!(name: "Example User",
                 email: "example@railstutorial.org",
                 password: "foobar",
                 password_confirmation: "foobar")
    99.times do |n|
      name  = Faker::Name.name
      email = "example-#{n+1}@railstutorial.org"
      password  = "password"
      User.create!(name: name,
                   email: email,
                   password: password,
                   password_confirmation: password)
    end
  end
end 
```

以下命令有效：

```
$bundle exec rake:db migrate
$bundle exec rake:db reset 
```

但是 $bundle exec rake:db populate 不起作用。

我遇到了以下错误：

```
 $ bundle exec rake db:populate --trace
    ** Invoke db:populate (first_time)
    ** Invoke environment (first_time)
    ** Execute environment
    ** Execute db:populate
    rake aborted!
    wrong number of arguments (0 for 1)
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/devise-2.0.4/lib/devise/models/database_auth
    enticatable.rb:105:in `password_digest'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/errors.rb
    :254:in `block in add_on_blank'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/errors.rb
    :253:in `each'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/errors.rb
    :253:in `add_on_blank'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/validatio
    ns/presence.rb:9:in `validate'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:310:in `_callback_before_39'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:484:in `_run__584816360__validate__204154762__callbacks'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:405:in `__run_callback'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:385:in `_run_validate_callbacks'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:81:in `run_callbacks'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/validatio
    ns.rb:212:in `run_validations!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/validatio
    ns/callbacks.rb:53:in `block in run_validations!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:425:in `_run__584816360__validation__204154762__callbacks'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:405:in `__run_callback'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:385:in `_run_validation_callbacks'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.0/lib/active_support/callb
    acks.rb:81:in `run_callbacks'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/validatio
    ns/callbacks.rb:53:in `run_validations!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/validatio
    ns.rb:179:in `valid?'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/validat
    ions.rb:69:in `valid?'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/validat
    ions.rb:77:in `perform_validations'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/validat
    ions.rb:56:in `save!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/attribu
    te_methods/dirty.rb:33:in `save!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/transac
    tions.rb:246:in `block in save!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/transac
    tions.rb:295:in `block in with_transaction_returning_status'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/connect
    ion_adapters/abstract/database_statements.rb:190:in `transaction'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/transac
    tions.rb:208:in `transaction'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/transac
    tions.rb:293:in `with_transaction_returning_status'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/transac
    tions.rb:246:in `save!'
    c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.0/lib/active_record/validat
    ions.rb:41:in `create!'
    c:/tuffy/shopgodt/lib/tasks/sample_data.rake:4:in `block (2 levels) in <top (req
    uired)>'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `call'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `each'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
    c:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
    c:/Ruby193/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_lev
    el'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `each'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handlin
    g'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handlin
    g'
    c:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
    c:/Ruby193/bin/rake:32:in `<main>'
    Tasks: TOP => db:populate 
```

对此问题的任何帮助表示赞赏。再次感谢！

==================================================== ==========

2012 年 5 月 2 日更新：因为我想添加第三方登录（facebook、twitter），所以我添加了 Devise gem，但我不确定我运行的哪个命令导致这两行被添加到我的应用程序/模型中/User.rb 文件

```
:token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
 devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable 
```

一旦我将它们注释掉，一切都运行良好。我想了解这两行在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:55:15.157

有两个提示说明出了什么问题

`c:/tuffy/shopgodt/lib/tasks/sample_data.rake:4:in 'block (2 levels) in <top (required)>'`

告诉你它在第 4 行，这是调用`create!`

再加上

`c:/Ruby193/lib/ruby/gems/1.9.1/gems/activemodel-3.2.0/lib/active_model/validations/presence.rb:9:in 'validate'`

表示验证失败。是否存在期望存在您未提供的某些字段的验证？检查您的`User`模型`validates :some_field_name, :presence => true`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:47:50.353

看起来它可能是`User`类本身的东西。可能在验证中。

您是否有任何自定义验证或任何其他自定义回调？值得检查这些。

您可以`User.create!`在控制台中独立于 rake 任务来确认这是否是问题所在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T23:18:06.670

好的 - 我遇到了同样的问题。我刚刚完成了相同的教程，并且在过去的 3 个小时里把我的头发拉了出来。浏览 Gem 的代码，一切都让我意识到发生了什么。

这是怎么回事：

在第 6 章中，本教程要求您添加`'has_secure_password'`到您的用户模型中。将此助手从您与 Devise 一起使用的任何模型中删除。虽然 Devise 没有在 Gem 中明确调用该助手，但它的代码几乎模仿了“has_secure_password”的作用。

在你这样做之后，杀死你的服务器、rails 控制台等。重新开始，生活应该会再次快乐起来。

# javascript - .done 不是函数

> ID：10416879
> 
> 赞同：11
> 
> 时间：2012-05-02T15:29:32.197
> 
> 标签：javascript, jquery

我还有一个问题。我在 FireFox 中遇到错误，我不知道我的错是什么。我总是这样做，我从来没有出错。我已经检查了小写/大写错误，但我找不到任何东西。

谢谢

> $.ajax({type: "POST", url: "ajax/check_username.php", data: {username: username}}).done 不是函数

```
<script type="text/javascript">
$(document).ready(function(){
    $("#username").keyup(function(){
        var username = $("#username").val();
        $(".usernameFeedback").fadeIn("fast");

        $.ajax({
            type: "POST",
            url: "ajax/check_username.php",
            data: { username: username }
        }).done(function( msg ) {
            $("#loadingImage").hide();
            if(msg.status != "error")
                {
                    if(msg.available == "yes")
                    {
                        $(".usernameFeedback span").text(msg.message);
                        $(".usernameFeedback span").removeClass("notok");
                        $(".usernameFeedback span").addClass("ok");
                    }
                    else
                    {
                        $(".usernameFeedback span").text(msg.message);
                        $(".usernameFeedback span").addClass("notok");
                    }
                }
        });
        return(false);
    })
});
</script> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T15:31:19.800

可能您的 jQuery 版本太旧了。对于 jqXHR 对象，您至少需要 jQuery 1.5 才能实现您正在使用的*Promise*接口。

如果由于某种原因无法升级，只需使用以下`success`选项：

```
$.ajax({
    type: "POST",
    url: "ajax/check_username.php",
    data: { username: username },
    success: function(msg) {

    }
}); 
```

# css - 添加边框到 在下拉菜单中

> ID：10416880
> 
> 赞同：0
> 
> 时间：2012-05-02T15:29:34.660
> 
> 标签：css

我正在尝试配置基于 CSS 的下拉菜单。

我在周围添加了一个边框，`<UL>`并希望它成为所有元素的容器`<li>`。它工作正常，直到其中一个`<li>`比其他的长。它推到外部`<UL>`边界之外。

我该如何解决？

此外，文本withing`<li>`在 IE 中消失了，而在 FF 中一切正常。

这是一个[演示](http://jsfiddle.net/DqTyh/4/)。*（将鼠标悬停在项目上）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:35:34.297

您当前已设置`width:100%`为您的子菜单下拉列表，这将仅是`100%`父容器，它小于您的子菜单列表项，由于您的`white-space:nowrap`属性而溢出您的容器。只需删除该宽度声明，您的子菜单就会随着其内部内容展开。

```
#nav ul {
    left: 0;
    position: absolute;
    top: 100%;
    visibility: hidden;
    z-index: 598;
} 
```

此外，您不希望将子菜单项向左浮动，以便可以将该属性移动到使用子选择器的位置。

演示：http: [//jsfiddle.net/DqTyh/8/](http://jsfiddle.net/DqTyh/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:34:40.423

除了`float`,`display`和`postion`，将所有样式从`LI`标签移动到`A`标签并`display:block`在`A`标签上使用。

请参阅我的教程： http: [//preview.moveable.com/JM/ilovelists/](http://preview.moveable.com/JM/ilovelists/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:38:03.703

好吧，你在你的菜单项上声明了一个设定的宽度。这会导致任何内部元素的约束。由于他们更宽，他们别无选择，只能推出边界。

去掉设置的宽度，你应该没问题。

# php - 创建无需登录即可保存内容的购物车的方法？

> ID：10416882
> 
> 赞同：0
> 
> 时间：2012-05-02T15:29:47.477
> 
> 标签：php, codeigniter

我可能对 cookie 和会话有点困惑，所以我只会告诉你我想做的事情。

从本质上讲，我希望在没有用户登录的情况下构建一个购物车。即使浏览器关闭，我也看到一些购物车仍然包含内容。那是使用会话还是 cookie？另外，这是否意味着我必须为每个访问者创建一个会话？

最后，我将在 codeigniter 中构建它，所以也许有帮助者或处理它的东西。有小费吗？

谢谢

# c++ - 在 gstreamer 元素中打开 OpenCV 窗口

> ID：10416886
> 
> 赞同：1
> 
> 时间：2012-05-02T15:29:54.613
> 
> 标签：c++, opencv, gstreamer

我正在尝试做一个非常基本的 Gstreamer 元素，它打开一个带有图像的 OpenCV 窗口。

在我的元素中，我有一个仅调用名为 select_points() 的开窗函数的链函数，该函数位于 select_points.cpp 中。

链函数：

```
static GstFlowReturn
gst_georeg_chain (GstPad * pad, GstBuffer * buf)
{
  GstGeoreg *filter;

  georeg_val gvals;

  filter = GST_GEOREG (GST_OBJECT_PARENT (pad));

  get_data(&gvals);

  select_points(&gvals);

  return gst_pad_push (filter->srcpad, buf);
} 
```

现在在我的 select_points.cpp 中，我有以下代码

```
#include <stdio.h>
#include "datasetup.h"
#include <opencv/cv.h>
#include <opencv/highgui.h>

using namespace cv;

extern "C" void select_points(georeg_val *gvals) //plugin is in C
{
  IplImage* img=0; 
  img=cvLoadImage(gvals->imageName,1);
  if(!img) 
  {
    printf("Could not load image file: \n$%s$\n",gvals->imageName);
  }
  else
  {        
    printf("Image was loaded\n");
    cvNamedWindow("Select", CV_WINDOW_AUTOSIZE); 

    cvMoveWindow("Select", 200, 200); // offset from the UL corner of the screen

    cvShowImage("Select",img);

    cvDestroyWindow("Select");
    cvReleaseImage(&img); 

  }

} 
```

问题是当我使用我的元素运行管道时，它在调用 cvNamedWindow 时挂起。有什么建议么？如果我注释掉 select_points()，其他一切都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:08:32.813

**首先**， 在激活 gstreamer 管道之前`cvNamedWindow()`移出`select_points()`和移入函数。`main()`

**其次**，如果你想看到这个窗口，你必须在被调用`cvWaitKey(0);`之后添加一个调用`cvShowImage()`。否则，您最终将显示图像并立即破坏窗口，使其不显示任何内容。

:)

# java - 从另一个 Java 控制台应用程序运行 Java 控制台应用程序

> ID：10416887
> 
> 赞同：0
> 
> 时间：2012-05-02T15:29:57.103
> 
> 标签：java, runtime

我需要从 Java 控制台应用程序运行此命令：

```
 /usr/bin/java -Xms512m -Xmx3072m -jar /Users/ivan/Desktop/market/market.jar 500 500 1 1 0.1 true true /Users/ivan/Desktop/market/files/simulationResult/ 
```

我试过了，但没有用：

```
 Process child = Runtime.getRuntime().exec(new String[]{command}); // command is the string written above 
```

我尝试了很多其他的东西，但我没有得到它。有什么帮助吗？

顺便说一句，我正在使用 Mac（如果重要的话）。

编辑：使用上面的代码，我收到以下错误：

```
Exception in thread "main" java.io.IOException: Cannot run program "java -Xms512m -Xmx3072m -jar /Users/ivan/Desktop/market/market.jar 500 500 1 1 0.1 true true /Users/ivan/Desktop/market/files/simulationResult/": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:466)
    at SimulationStarter.main(SimulationStarter.java:59)
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
... 3 more 
```

编辑#2：我现在发送这个而不是字符串“command”：

```
 String[] commands = new String[]{
                    "/bin/bash", "-c",
                    "\"/usr/bin/java -Xms512m -Xmx3072m -jar " + simulatorPath + " "
                    + var1 + " "
                    + var2 + " "
                    + var3 + " "
                    + var4 + " "
                    + var5 + " "
                    + var6 + " "
                    + var7 + " "
                    + var8 + " "
                    + "\""          
            }; 
```

但我还是得到了`/bin/bash: /usr/bin/java -Xms512m -Xmx3072m -jar /Users/ivan/Desktop/market/market.jar 500 500 2 1 0.1 true true /Users/ivan/Desktop/market : No such file or directory`。

`child.waitFor()`返回数字 127。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:36:40.997

如果命令是上面的字符串，那么

```
new String[]{command} 
```

将为您提供一个包含一项的字符串数组。你应该尝试类似的东西

```
command.split(' ') 
```

其中 command 是包含上述命令的字符串变量。

# spring - Spring中使用注解的包装类

> ID：10416891
> 
> 赞同：0
> 
> 时间：2012-05-02T15:30:04.540
> 
> 标签：spring, controller, annotations, base

如果我使用注释，是否可以有一个基础包装类来包装我在 Spring 中的所有控制器？基本上在所有页面上，我需要在显示 HTML 之前进行一些检查，并且还包括一些配置，例如站点的 BASE_URL 等。

我知道我可以使用 Spring 安全性来验证用户及其登录状态/权限以查看页面，但是我还需要根据他们的权限级别等设置变量。那么有没有一种方法可以为每个页面进行基本设置，而不必在每个方法中添加相同的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:06:06.660

我会使用 AOP 或（更符合 Spring MVC）使用[HandlerInterceptor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)来执行此操作，它是 Spring 对 servlet 过滤器的模拟。

# jquery - jQuery AJAX 成功设置中的 switch 语句

> ID：10416893
> 
> 赞同：1
> 
> 时间：2012-05-02T15:30:12.537
> 
> 标签：jquery, ajax, switch-statement

我正在使用此脚本来更新`select`表单中的数据库更改：

```
$(document).ready(function() {
        $('select.changeStatus').change(function(){
                $.ajax({
                        type: 'POST',
                        url: 'Change-status.php',
                        data: {selectFieldValue: $('select.changeStatus').val(), projectId: $('input[name$="projectId"]').val()},
                        success: function(data){},
                        dataType: 'html'
                 });
        });
}); 
```

我想在设置中插入一个 switch 语句，以便根据某些条件`success`修改包含我的表单的 CSS 类。`<div/>`我们的想法是这样做：

如果 selectFieldValue 为 0，则将我的`<div/>`背景设为红色，如果为 1，则将背景设为橙色，如果为 2，则将背景设为绿色。

我实际上正计划使用它：`$("#mydiv").css({'background-color': "red"})`，我只是无法将它嵌套在成功设置中的开关中。

我该怎么做？或者，有没有更好的方法来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:35:49.253

`switch`声明会有点冗长。如果值是 0、1 或 2，您可以使用它们作为索引从值数组中查找值：

```
success: function(data){
  var colors = [ "red", "orange", "green" ],
      _value = $('select.changeStatus').val();
  $("#mydiv").css("background", colors[ _value ]);
} 
```

### 更新：

> OP问：太好了，非常感谢。对于范围（红色为 0-1，橙色为 2-3，绿色为 4-5），是否有比以下更好的方法？
> 
> `var colors = [ "red", "red", "orange", "orange", "green", "green" ]`

如果您想形成数字集合，其中 0 和 1 产生一种颜色，2 和 3 产生另一种颜色，而 4 到 5 产生另一种颜色，我会稍微不同地处理这个问题。我们知道，如果数字是奇数，它就属于集合的高端。毕竟，2-3 和 4-5 的高端都有奇数。这意味着，如果数字是奇数，它的行为应该与其先前的连续伙伴相同。因此，如果数字是五或四，我们使用四。如果是三个或两个，我们使用两个。

```
success: function(data){
  var colors = [ "red", "orange", "green" ],
      _value = $('select.changeStatus').val();

  if ( _value % 2 != 0 ) _value--; // Converts 1 to 0, 3 to 2, 5 to 4, etc.

  $("#mydiv").css("background", colors[ _value ]);
} 
```

# javascript - 将一个 div 拖到另一个 div 并在我在它上面时更改另一个 div 的大小

> ID：10416896
> 
> 赞同：0
> 
> 时间：2012-05-02T15:30:19.750
> 
> 标签：javascript, jquery, html, css

我有 3 个用于存储约会的小 div。这一切都有效。我只想在我将带有约会的 div 拖动到那些小 div 以更改这些小 div 的大小时进行存储。当我将鼠标悬停时我取得了成功，但是当我拖动另一个 div 时它不起作用。有没有人知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:35:27.860

我认为您所追求的是`droppable`jQuery UI 库，更具体地说是`hoverClass`属性。

以下直接取自[jQuery UI Droppable Demo](http://jqueryui.com/demos/droppable/#accepted-elements)

```
$("#draggable, #draggable-nonvalid" ).draggable();
$("#droppable").droppable({
    accept: "#draggable",
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    drop: function( event, ui ) {
        $( this )
            .addClass( "ui-state-highlight" )
            .find( "p" )
                .html( "Dropped!" );
    }
}); 
```

# c# - 访问 API 时出现 401 错误

> ID：10416901
> 
> 赞同：0
> 
> 时间：2012-05-02T15:30:37.450
> 
> 标签：c#, xml, json, api, xmlhttprequest

我看到对这个问题的几个回应，但在我的情况下似乎没有一个。这是情况。

我正在使用来自 thetvdb.com 的 API。

我正在通过 API 加载 XML。如果我运行该应用程序，它会给我一个 401 错误。如果我先在 IE 中加载 URL，然后运行它加载的应用程序就很好。

我怀疑这是一个 cookie 问题，但我不确定在下面的请求期间如何传递该 cookie。

```
var _doc = new XmlDocument();
_doc.Load(_url); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:32:36.610

[HTTP 错误 401 表示“未经授权”。](http://en.wikipedia.org/wiki/HTTP_401#4xx_Client_Error)

这意味着您需要联系提供 API 的人员并询问他们如何进行身份验证。

***每个提供商都不同。***
合适的人是那些提供 Web 服务/API 的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:48:49.520

经过大量阅读和反复试验，我已经弄清楚了。我已经在几个站点上对此进行了测试。

```
WebRequest _wr = WebRequest.Create(_url);
_wr.UseDefaultCredentials = true;
_wr.PreAuthenticate = true;
_wr.GetResponse();
//do your stuff
_wr.Dispose(); 
```

这似乎复制了我手动打开浏览器并导航到页面以防止启动应用程序时出现 401 错误的步骤。我希望这对其他人有所帮助，因为我理解这种挫败感。

# c - 在 Ansi C 中——“衰变”的定义在哪里，所有发生这种情况的案例都记录在哪里？

> ID：10416904
> 
> 赞同：3
> 
> 时间：2012-05-02T15:30:42.943
> 
> 标签：c

我不时遇到“衰减”一词，例如当作为函数参数传入的数组衰减为指针时，或者当函数衰减为函数指针时。如果我正在编写 ac 编译器，我在哪里可以找到正式定义的“衰减”一词，以及它发生的所有情况都将在哪里记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:14:40.040

标准中的官方术语是“左值转换”。在当前版本的标准 (C11) 中，您可以在 6.3.2.1 p3 中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:35:02.383

第二次谷歌搜索结果如下：

```
The K&R method of reducing arrays to pointers
 ---------------------------------------------
 K&R tried to create a unified treatment of arrays and pointers, one that 
 would expose rather than hide the array equation in the compiler's code. 
 They found an elegant solution, albeit a bit complicated. The "ugly" 
 array equation is replaced in their formulation by four rules:

    1) An array of dimension N is a 1D array with
       elements that are arrays of dimension N-1.

    2) Pointer addition is defined by:

          ptr # n = ptr + n * size(type-pointed-into)

       "#" denotes here pointer addition to avoid 
       confusion with ordinary addition.
       The function "size()" returns object's sizes.

    3) The famous "decay convention": an array is 
       treated as a pointer that points to the 
       first element of the array.

       The decay convention shouldn't be applied
       more than once to the same object.

    4) Taking a subscript with value i is equivalent 
       to the operation: "pointer-add i and then 
       type-dereference the sum", i.e.

          xxx[i] = *(xxx # i)

        When rule #4 + rule #3 are applied recursively 
        (this is the case of a multi-dimensional array), 
        only the data type is dereferenced and not the 
        pointer's value, except on the last step. 
```

[资源](http://www.ibiblio.org/pub/languages/fortran/append-c.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:00:59.237

数组名称*衰减*意味着它的值被视为（=具有类型和值）作为指向其第一个元素的指针。请注意，数组名称并不总是衰减（例如，不作为 sizeof 运算符的操作数）。不完美的同义词可能被*视为*或*重写为*或简单地*用作*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:44:24.523

C 标准是回答此类问题的唯一方法。

如果你想购买官方文件，那么你需要寻找*ISO/IEC 9899:2011*。或者可能更喜欢 1999 年或 1989 年的旧标准。

或者，2011 标准的最终草案可在此处获得，并且应该足够接近： [http ://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

# android - 关机/重启统计跟踪 Android

> ID：10416907
> 
> 赞同：0
> 
> 时间：2012-05-02T15:31:12.413
> 
> 标签：android, shutdown, restart

不确定这是否可行，但我想知道有没有办法跟踪你关闭或重启安卓手机的次数。我很想编写一个应用程序来记录手机关机的次数，并记录手机关机的时间和日期以及运行时间。对此有何建议？

谢谢

# c# - 使用 FileUpload 从 .CSV 导入数据到 SQL？

> ID：10416909
> 
> 赞同：-2
> 
> 时间：2012-05-02T15:31:17.187
> 
> 标签：c#, asp.net, sql

我有一个包含评论的 .CSV 文件，我将以编程方式将内容从 FileUpload 控件传输到 SQL 数据库。我遇到的问题是我的控件正在工作，但我没有看到我的数据库中填充了任何数据。这是我的代码：

标记

```
<asp:FileUpload ID="FileUpload1" runat="server" />
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<asp:Button ID="Button1" runat="server"onclick="Button1_Click"                                                               Text="Button" />
<asp:Label ID="Label1" runat="server"></asp:Label>

Code Behind

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.OleDb;
using System.Data.SqlClient;
using System.Data.SqlTypes;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {

            string fileExt = System.IO.Path.GetExtension(FileUpload1.FileName);

            if (fileExt == ".csv")
            {
                OleDbConnection oconn = new     OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + FileUpload1 + ";     Extended Properties=Excel 8.0");

                try
                {
                    OleDbCommand ocmd = new OleDbCommand("SELECT * FROM [AudioPR$]",     oconn);
                    oconn.Open();

                    OleDbDataReader odr = ocmd.ExecuteReader();
                    string Device = "";
                    string Source = "";
                    string Reviewer = "";
                    string Datetime = "";
                    string Links = "";
                    string Content = "";
                    string Subject = "";

                    while (odr.Read())
                    {

                        Device = valid(odr, 0);
                        Source = valid(odr, 1);
                        Reviewer = valid(odr, 2);
                        Datetime = valid(odr, 3);
                        Links = valid(odr, 4);
                        Content = valid(odr, 5);
                        Subject = valid(odr, 6);

                        InsertDataIntoSql(Device, Source, Reviewer, Datetime, Links,     Content, Subject);

                    }

                    oconn.Close();

                 }

                 catch (Exception ee)
                {
                    Label1.Text = ee.Message;
                    Label1.ForeColor = System.Drawing.Color.Red;
                }
                finally
                {
                    Label1.Text = "Data Inserted Successfully";
                    Label1.ForeColor = System.Drawing.Color.Green;

                }

            }

            else
            {
                Label1.Text = "Only .csv files allowed!";

            }

        }

         else
            {

            Label1.Text = "You have not specified a file!";

            }

       }

    protected string valid(OleDbDataReader myreader, int stval)

    {
        object val = myreader[stval];
        if (val != DBNull.Value)
        {

            return val.ToString();
        }
        else
        {
            return Convert.ToString(0);
        }

    }

    public void InsertDataIntoSql(string Device, string Source, string Reviewer, string     Datetime, string Links, string Content, string Subject)

    {
        SqlConnection conn = new SqlConnection("Data Source=CI0000000879107\\BENSON;    Initial Catalog=PRClips Mail;Integrated Security=True");
        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = "INSERT INTO AudioPR(Device, Source, Reviewer, Datetime,     Links, Content, Subject) VALUES(@Device, @Source, @Reviewer, @Datetime, @Links, @Content,     @Subject)";
        cmd.Parameters.Add("@Device", System.Data.SqlDbType.NVarChar).Value = Device;
        cmd.Parameters.Add("@Source", System.Data.SqlDbType.NVarChar).Value = Source;
        cmd.Parameters.Add("@Reviewer", System.Data.SqlDbType.NVarChar).Value =     Reviewer;
        cmd.Parameters.Add("@Datetime", System.Data.SqlDbType.Date).Value = Datetime;
        cmd.Parameters.Add("@Links", System.Data.SqlDbType.NVarChar).Value = Links;
        cmd.Parameters.Add("@Content", System.Data.SqlDbType.NVarChar).Value = Content;
        cmd.Parameters.Add("@Subject", System.Data.SqlDbType.NVarChar).Value = Subject;
        cmd.CommandType = System.Data.CommandType.Text;
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close();

   }
} 
```

我意识到，当我可以从 FileUpload 中读取内容时，建立连接有点毫无意义，但是如果有人知道我做错了什么或者可以指导正确的方向，我将不胜感激。谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:46:13.530

好吧，我想我是为那些追求与我相同的目标的人想出来的……首先要做几件事

*   我正在导入一个 .CSV 文件，因此您的连接字符串将与大多数 excel 连接字符串不同

*   其次，确保你处理你的文件，因为即使文件关闭，它也会给你使用中的文件带来问题，但如果它打开它会崩溃（我还没有处理那部分代码）

*   第三，如果您将数据导入数据库，请确保您的数据类型是正确的..例如，我有很多数据来了，并且正在被处理，所以我不得不将我的数据类型更改为正确的格式。

标记：

```
<asp:FileUpload ID="FileUpload1" runat="server" />
       <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
              <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
                       <asp:Label ID="Label1" runat="server"></asp:Label> 
```

这里没有做太多，只是基本的控制

C#代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.OleDb;
using System.Data.SqlClient;
using System.Data.SqlTypes;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)   //Upload file here
        {

            string fileExt = System.IO.Path.GetExtension(FileUpload1.FileName);  //Get extension

            if (fileExt == ".csv")   //check to see if its a .csv file
            {

                FileUpload1.SaveAs("C:\\FolderName\\" + FileUpload1.FileName);        //save file to the specified folder
                OleDbConnection oconn = new     OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\AudioPRFiles\\; Extended     Properties='text; HDR=Yes; FMT=Delimited'");   //string connection for .CSV     OR Text file

                try
                {
                    OleDbCommand ocmd = new OleDbCommand("SELECT * FROM [" +     FileUpload1.FileName + "]", oconn);    //Select statement, if your using .CSV...put the name of the file NOT the excel tab

                oconn.Open();

                OleDbDataReader odr = ocmd.ExecuteReader();  

                string Device = "";
                string Source = "";
                string Reviewer = "";
                string Datetime = "";
                string Links = "";
                string Content = "";
                string Subject = "";

                while(odr.Read())

                {

                    Device = valid(odr, 0);     //Call the valid method...see below
                    Source = valid(odr, 1);
                    Reviewer = valid(odr, 2);
                    Datetime = valid(odr, 3);
                    Links = valid(odr, 4);
                    Content = valid(odr, 5);
                    Subject = valid(odr, 6);

                    InsertDataIntoSql(Device, Source, Reviewer, Datetime, Links, Content, Subject);  //Call the InsertDataIntoSql method...see below

                    FileUpload1.Dispose();  //Dispose the file

                }

                oconn.Close();   //Close connection

            }

            catch (Exception ee)
            {
                Label1.Text = ee.Message;
                Label1.ForeColor = System.Drawing.Color.Red;
            }
            finally
            {
                Label1.Text = "Data Inserted Successfully";
                Label1.ForeColor = System.Drawing.Color.Green;

            }

        }

        else
        {
            Label1.Text = "Only .csv files allowed!";

        }

    }

    else
    {

        Label1.Text = "You have not specified a file!";

    }    
 }

protected string valid(OleDbDataReader myreader, int stval)  //this method checks for null values in the .CSV file, if there are null replace them with 0

{
    object val = myreader[stval];
    if (val != DBNull.Value)
    {

        return val.ToString();
    }
    else
    {
        return Convert.ToString(0);
    }

}

public void InsertDataIntoSql(string Device, string Source, string Reviewer, string Datetime, string Links, string Content, string Subject) //method to insert data into database

{
    SqlConnection conn = new SqlConnection("Server=ServerAddress; Database=MyDatabaseName; Trusted_Connection=True");                        //SQL connection
    SqlCommand cmd = new SqlCommand();                           //SQL command
    cmd.Connection = conn;
    cmd.CommandText = "USE [MyDataBase] INSERT INTO Table_Name(Device, Source, Reviewer, Datetime, Links, Content, Subject) VALUES(@Device, @Source, @Reviewer, @Datetime, @Links, @Content, @Subject)";
    cmd.Parameters.Add("@Device", System.Data.SqlDbType.Int).Value = Device;
    cmd.Parameters.Add("@Source", System.Data.SqlDbType.NVarChar).Value = Source;
    cmd.Parameters.Add("@Reviewer", System.Data.SqlDbType.NVarChar).Value = Reviewer;
    cmd.Parameters.Add("@Datetime", System.Data.SqlDbType.Date).Value = Datetime;
    cmd.Parameters.Add("@Links", System.Data.SqlDbType.NVarChar).Value = Links;
    cmd.Parameters.Add("@Content", System.Data.SqlDbType.NVarChar).Value = Content;
    cmd.Parameters.Add("@Subject", System.Data.SqlDbType.NVarChar).Value = Subject;
    cmd.CommandType = System.Data.CommandType.Text;
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();

   }
}

Hope this helps..Thanks 
```

# php - 即使在zend框架中刷新页面后如何在其他页面中保留发布变量值

> ID：10416912
> 
> 赞同：0
> 
> 时间：2012-05-02T15:31:24.550
> 
> 标签：php, zend-framework

即使刷新页面后，我也无法弄清楚是否保留数据；

**我的情况;**

我有一个表单，在单击提交后直接到另一个操作，即使在刷新页面后您也必须保留此数据；我正在使用 POST 方法传递数据

即使在 zend 框架中刷新页面后，有没有办法保留发布数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:40:26.423

```
//In bootstrap
Zend_Session::start();

//in post page
$request = new Zend_Session_Namespace('request');
$request->post = $_POST;

//some other xyz page visited after posting data
$request = new Zend_Session_Namespace('request');
$post = $request->post ; //noew $post is equal to wat were posted in previous request 
```

# javascript - JSON：.NET MVC3 中的 500（内部服务器服务器错误）

> ID：10416916
> 
> 赞同：0
> 
> 时间：2012-05-02T15:31:29.457
> 
> 标签：javascript, jquery, json, asp.net-mvc-3, post

我试图让一些 JSON 功能正常工作，它基本上尽可能简单，但由于某种原因，我的控制台上出现 500 内部服务器错误，并且应用程序永远不会到达控制器。我几乎尝试了所有方法，但代码非常简单，我已经放弃尝试通过一遍又一遍地读取相同的几行来查找错误。

这是我的脚本：

```
 $("#saveAdvisorOption").click(function () {
            // Create a JSON object:
            alert("OK");
            var OptionsModel = { "AdvisorNewsFeed": $("#advisorCheckBox").val() };
            alert($(OptionsModel.AdvisorNewsFeed));
            $.post("/Account/ChangeOptionForAdvisor", OptionsModel, function (data) {

            });
        }); 
```

这是我的模型：

```
 public class OptionsModel
{
    public string AdvisorNewsFeed { get; set; }

    public OptionsModel(string AdvisorNewsFeed)
    {
        this.AdvisorNewsFeed = AdvisorNewsFeed;

    }
} 
```

}

这是我的控制器：

```
 public class AccountController : Controller
{
    [HttpPost]
    public ActionResult ChangeOptionForAdvisor( OptionsModel option)
    {

        //Return something
        return Json(option, JsonRequestBehavior.AllowGet);
    } 
```

我在 return 语句上有一个断点，但它永远不会运行。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:34:13.607

您可能只需要向`OptionsModel`该类添加一个空构造函数。MVC 无法实例化没有空构造函数的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:33:15.213

@scottm 遇到了主要问题。

那说：

你可能需要告诉 jQuery 你期望得到一个`json`对象：

```
$.post("/Account/ChangeOptionForAdvisor", OptionsModel, function (data) {...}); 
```

对此：

```
$.post("/Account/ChangeOptionForAdvisor", OptionsModel, function (data) {
    ...}, 'json'); //<====== 
```

# image - 计算图像的梯度向量场

> ID：10416918
> 
> 赞同：16
> 
> 时间：2012-05-02T15:31:31.273
> 
> 标签：image, matlab, image-processing

我想读入一幅图像——一张圆的图片，并计算该图像的梯度向量场（即均匀地指向圆并垂直于圆的向量）。我的逻辑有点让我失望，但我有：

```
clear all;
im = im2double(imread('littlecircle.png'));
im = double(im);
[nr,nc]=size(im);
[dx,dy] = gradient(im);
[x y] = meshgrid(1:nc,1:nr);
u = x;
v = y;
quiver(x,y,u,v) 
```

如果我只是简单地执行上述操作，我会得到一个向量场，但它只是一个空网格的梯度（即只是一个梯度 y=x 的向量场）。我真正想要的是使用

```
[dx,dy] = gradient(im); 
```

检测图像中圆的边缘，然后计算由于图像中的圆而产生的梯度向量场。显然，分配 u=x 和 v=y 只会给我一条直线的向量场 - 所以基本上，我想将图像的梯度嵌入到向量 u 和 v 中。我该怎么做？

![我的结果](../Images/2deeed37b52bcfca76c60291dc388246.png)

![我遇到错误的图像](../Images/9bfd93d78eacd71a2af4644b950b54eb.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T18:20:03.047

您在代码中犯了一个错误（除此之外，它工作正常）。您应该替换以下内容：

```
u = dx;
v = dy; 
```

不是

```
u = x;
v = y; 
```

它与[这个](http://altreligion.about.com/od/symbols/ig/Geometric-Shapes/Circles.htm)图像一起工作就像一个魅力！

编辑：如果您想在图像上叠加矢量，请执行以下操作：

```
clear all;
im = imread('littlecircle.png');
[nr,nc]=size(im);
[dx,dy] = gradient(double(im));
[x y] = meshgrid(1:nc,1:nr);
u = dx;
v = dy;
imshow(im);
hold on
quiver(x,y,u,v) 
```

请注意，我没有将 im 转换为 double，因为 imshow 无法正确显示（需要 uint8）。根据您的图像尺寸，您可能需要放大以查看渐变向量。

您可以看到叠加在图像上的矢量的放大区域，如下所示：

![图像中圆的梯度向量](../Images/20ca8a7ed40cf48c56ad45d4e3a81c21.png)

更高质量的图像位于[http://i.stack.imgur.com/fQbwI.jpg](https://i.stack.imgur.com/fQbwI.jpg)

# javascript - 使用 Javascript SDK，当用户尚未授权我的应用程序时，如何获取 Facebook 用户 ID？

> ID：10416919
> 
> 赞同：0
> 
> 时间：2012-05-02T15:31:31.610
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

现在，我可以使用 Javascript SDK getLoginStatus 方法检测用户的登录状态。如果用户未按预期授权我的应用程序，我会收到以下响应：

authResponse：空，状态：“not_authorized”

我想通过图形 api（https://graph.facebook.com/USER_ID）访问登录用户的公开信息。我的目标是显示一些内容，只是说“你好（人名），单击此处连接到我们的 facebook 应用程序！”，或类似的内容。有没有办法获取尚未授权您的应用程序的登录用户的用户 ID？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:37:12.090

有没有办法获取尚未授权您的应用程序的登录用户的用户 ID？

不，没有授权您的应用程序就无法获取用户 ID。

# php - 在 Wordpress 3.3.2 的菜单中隐藏/显示孙子页面

> ID：10416920
> 
> 赞同：0
> 
> 时间：2012-05-02T15:31:33.560
> 
> 标签：php, wordpress, menu, children

我有一个菜单问题，我需要一些帮助。

我正在使用主题为 211 的 wordpress 3.3.2。

我正在使用两个模板，默认的 wordpress 展示和一个名为 products 的自定义页面模板。

我目前有这个子导航树（展示模板）：

*   -市场和产品
    *   农业
    *   航天
    *   防御
    *   工业的

我用来获得上述结果的代码是：

```
 <?php

        //$children = wp_list_pages('title_li=&child_of='.$post->ID.'&echo=1&depth=1');

if($post->post_parent && $post->post_parent!=0){
        $children = wp_list_pages("title_li=&sort_column=menu_order&child_of=".$post->post_parent."&echo=0&depth=2");

}else{
          $children = wp_list_pages("title_li=&sort_column=menu_order&child_of=".$post->ID."&echo=0&depth=1");
     }
 if ($children) { ?>
    <div id="subNav">
        <ul>        
        <?php echo $children; ?>
        </ul>
    </div>
    <?php } ?> 
```

当我选择农业页面（产品模板）时，我会看到以下结构：

*   营销与产品
    *   农业
        *   孙子第 1 页
        *   孙子第 2 页
    *   航天
        *   孙子第 1 页
        *   孙子第 2 页
    *   防御
    *   工业的

农业孙子页面正在展示，但航空孙子页面应隐藏。

我正在使用的当前代码是：

```
 <?php

       //$children = wp_list_pages('title_li=&child_of='.$post->ID.'&echo=1&depth=1');
    // && $post->post_parent!=0
    if($post->post_parent){
    //siblings
    $textTest = 'siblings';
            $children = wp_list_pages("title_li=&sort_column=menu_order&child_of=".$post->post_parent."&echo=0&depth=2");
     }else{
            $textTest =  'children';
                    $children = wp_list_pages("title_li=&sort_column=menu_order&child_of=".$post->ID."&echo=0&depth=1");
          }
       if ($children) { ?>
        <div id="subNav">
            <? echo $textTest;?>
            <ul>        
               <?php echo $children; ?>
            </ul>
        </div>
    <?php } ?> 
```

所以我想知道的是；给定：营销页面的父项为 0 它有孩子 航空航天和农业 他们也有孩子（营销的孙子）

有没有一种方法可以显示：营销的孩子在那个页面上农业的孩子（例如）在那个页面上，或者在它的一个孩子页面上 - 这样只有这些孙子和农业的兄弟姐妹才会显示（营销的孩子），但不是它的兄弟姐妹的孩子？

任何帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:43:21.610

您使用的**if else**会导致冲突。

为每一页使用一个`meta value`。它决定了要在屏幕上显示的菜单类型。

**别的：**

使用此代码，菜单将显示它将始终显示完整菜单。

当你在 `Agriculture`页面上时，它会检查它是否有父页面，在这种情况下，你的页面的父`Agriculture`页面是`Marketing & products`页面，然后它会选择父页面。

并且所有的子页面`Marketing & products`都显示在链接中。

# objective-c - 从 NSTableView 读取数据

> ID：10416925
> 
> 赞同：1
> 
> 时间：2012-05-02T15:31:54.037
> 
> 标签：objective-c, cocoa, nstableview

在获取选定的 NSTableView 的数据时，获取选定的行，并将其与数据源中相同位置的项目进行比较。

但是，我正在从不同的 XML 文件中读取数据并根据屏幕上的某些选择显示它。

我想直接从 NSTableView 中获取用户选择的数据。

我知道这与 MVC 模型和所有这些背道而驰，但我希望得到有关如何执行此操作的答案或一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:38:34.460

表视图没有数据的内部缓存。数据源就是那个缓存。这就是重点。您必须从数据源获取数据。不过，这样做应该没有问题：`[[tableView dataSource] tableView:tableView objectValueForTableColumn:theColumn row:theRow]`.

但是，当您说“即使没有定义正式（单个）数据源，也不知道 [it] 负责跟踪数据源”是什么意思？您的意思是您正在使用绑定而不是设置数据源？在那种情况下，我不会使用这种技术。在这种情况下，数据源的存在将是一个实现细节。对于绑定情况，您应该直接访问数组控制器。

# java - JSTL - 使用带有 java.sql.Timestamp 的 formatDate

> ID：10416926
> 
> 赞同：7
> 
> 时间：2012-05-02T15:31:54.590
> 
> 标签：java, servlets, timestamp, jstl, jsp-tags

我有一个带有以下内容的标签：

```
<%@ tag body-content="empty"%>
<%@ attribute name="timestamp" required="true" type="java.sql.Timestamp"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<jsp:useBean id="dateValue" class="java.util.Date" />
<c:if test="${not empty timestamp}">
    <jsp:setProperty name="dateValue" property="time" value="${timestamp}" />
    <span title="${timestamp}"> <fmt:formatDate value="${dateValue}"
            pattern="MM/dd/yyyy HH:mm" /> </span>
</c:if> 
```

但是，我收到以下错误：

> 错误 500：com.ibm.ws.jsp.JspCoreException：java.lang.IllegalArgumentException：无法将 java.sql.Timestamp 类型的 5/1/12 上午 10:36 转换为 long

我试图按照[这个答案](https://stackoverflow.com/a/2628641/38743)将时间戳转换为 JSTL 中的日期，所以我不会更改我的 servlet 中的任何内容。如何使用 JSTL 将 a 转换`java.sql.Timestamp`为日期以便`formatDate`可以使用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T15:35:32.930

你需要传入[`Timestamp#getTime()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html#getTime%28%29)。

```
<jsp:setProperty name="dateValue" property="time" value="${timestamp.time}" /> 
```

但这一切都毫无意义。[`java.sql.Timestamp`](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)已经是 的子类[`java.util.Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)。所以这也应该这样做：

```
<%@ attribute name="timestamp" required="true" type="java.sql.Timestamp"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<c:if test="${not empty timestamp}">
    <span title="${timestamp}"><fmt:formatDate value="${timestamp}"
            pattern="MM/dd/yyyy HH:mm" /></span>
</c:if> 
```

顺便说一句，我还会更改您的模型以将属性声明为`java.util.Date`。您不应该`java.sql.Timestamp`在模型和视图中使用，而只能在数据层中使用。您不需要通过解析/格式化转换`ResultSet#getTimestamp()`为。`java.util.Date`只需向上转换就足够了。

例如

```
import java.util.Date;

public class SomeModel {

    private Date somefield;

    // ...
} 
```

和

```
someModel.setSomefield(resultSet.getTimestamp("somefield")); 
```

# android - android EditText用什么inputType来避免文字建议

> ID：10416931
> 
> 赞同：0
> 
> 时间：2012-05-02T15:32:11.283
> 
> 标签：android, text, android-edittext, autosuggest

我最大的烦恼之一是一些 android 键盘如何使文本建议无法隐藏键盘。我认为这与正在关注的可编辑字段类型有关。

什么 inputType 会让这永远不会发生？例如，当我试图让用户登录时，我从不想看到 android 单词建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:33:36.593

TYPE_TEXT_FLAG_NO_SUGGESTIONS

[http://developer.android.com/reference/android/text/InputType.html#TYPE_TEXT_FLAG_NO_SUGGESTIONS](http://developer.android.com/reference/android/text/InputType.html#TYPE_TEXT_FLAG_NO_SUGGESTIONS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-27T07:36:13.553

如果您想以编程方式执行此操作，则可以使用以下代码来避免所有键盘类型上的文本建议。

```
//assume an EditText object with name myEditText
myEditText.setInputType(myEditText.getInputType() | InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

> InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS 似乎无法在所有键盘上按预期工作，而 InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD 的缺点是它还禁用了在键盘中切换语言和滑动手势以添加文本。

# tsql - 如何防止在此 SQL 中发生死锁

> ID：10416933
> 
> 赞同：2
> 
> 时间：2012-05-02T15:32:15.267
> 
> 标签：tsql, database-deadlocks

首先，我不需要 100% 防止死锁，但我能做的任何事情来减少它们都会很好。

我有两张桌子`Source`和`Dest`. Source 中有许多唯一值，我需要从中请求一个新值，`Source`并在这样做时将其移动到`Dest`.

我有以下sql：

```
begin tran
    declare @value
    select top 1 @value = [value] from [source]
    delete from [Source] where [value]=@value
    insert into [Dest] ([Value]) values (@value)
    select @value
commit tran 
```

当多个用户获得同一`value`行时，这偶尔会引发死锁。我该如何预防/减少这种情况？

我正在使用 SQL Server 2008

顺便说一句，还有其他列`Source`，`Dest`我正在阅读/写入。为了简洁起见，这是一个简化。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:42:26.857

[您可以通过在 DELETE 命令中使用OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句来避免这种竞争条件，因为它将从源中删除值并在单个原子操作中返回它。我制作了以下脚本来演示这个概念：

```
-- dummy data
CREATE TABLE #source (mycolumn INT);
CREATE TABLE #destination (mycolumn INT);

INSERT #source VALUES (1);
INSERT #source VALUES (2);
INSERT #source VALUES (3);
GO

-- stored procedure to demonstrate concept
CREATE PROCEDURE move
AS BEGIN
    BEGIN TRANSACTION;

    DECLARE @tmp TABLE (mycolumn INT);
    DELETE TOP(1) #source OUTPUT DELETED.mycolumn INTO @tmp(mycolumn);

    INSERT #destination (mycolumn) OUTPUT INSERTED.mycolumn
    SELECT mycolumn
    FROM @tmp;

    COMMIT;
END
GO

-- testing
EXEC move;
GO -- remove from 1 from #source, insert 1 into #destination, returns 1

EXEC move;
GO -- remove from 2 from #source, insert 2 into #destination, returns 2

EXEC move;
GO -- remove from 3 from #source, insert 3 into #destination, returns 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:38:57.847

`XLOCK`你可以用`SELECT`语句抓住一个

```
begin tran
    declare @value
    select top 1 @value = [value] from [source] with (XLOCK)
    delete from [Source] where [value]=@value
    insert into [Dest] ([Value]) values (@value)
    select @value
commit tran 
```

# trial - 我可以在没有信用卡的情况下试用 Windows azure 免费试用版吗？

> ID：10416934
> 
> 赞同：39
> 
> 时间：2012-05-02T15:32:18.107
> 
> 标签：trial

我正在尝试创建一个 Windows Azure 的免费帐户来发现它，我提供了验证码并通过了，但它随后要求提供信用卡号。这真的很重要吗……那不是“3个月免费”帐户吗，为什么需要信用卡？如果是，如果没有这样的信用卡，我还有什么其他选择？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T19:05:17.077

我将添加更多信息以订阅 Windows Azure 试用版：

1.  是的，您只需要一个 Windows Live 帐户和信用来验证您的身份。
2.  只要您将帐户设置为支出限额，您就不会为此试用帐户从您的信用卡中收取费用。
3.  Windows Azure 试用帐户的成本设置为零，并且通过设置启用的支出限制不会让您越过帐户使用限制来确保这一点。此处描述了支出限制： [https ://www.windowsazure.com/en-us/pricing/spending-limits/](https://www.windowsazure.com/en-us/pricing/spending-limits/)
4.  启用支出限制意味着，如果您超出有限资源配额，您的帐户将在该月被禁用，因为资源是按月提供的。
5.  在您的试用期结束或在试用期内，您可以转为定期订阅，然后您的信用卡将被收取定期订阅帐户的费用。
6.  如果您决定获得常规 Windows Azure 帐户，您将获得一个新的当新订阅时，这将根据您的使用产生费用

所以最重要的是，您需要信用卡来提供您的身份证明，但是在使用您的 Windows Azure 试用帐户时，您根本不会被收取任何费用。一旦你设置了你的消费限额，这样你就可以在晚上睡觉时不用担心信用卡的任何费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:35:02.697

可能你不能。如果您超过试用期内提供给您的免费配额，仍需收费。

# javascript - 如何调试这个nodejs代码？

> ID：10416935
> 
> 赞同：2
> 
> 时间：2012-05-02T15:32:19.103
> 
> 标签：javascript, debugging, node.js

我正在尝试学习带有节点的“q”库。

```
$ node -v // -> v0.6.6 
```

我现在正在使用`q.js`来自[https://github.com/kriskowal/q/blob/master/q.js](https://github.com/kriskowal/q/blob/master/q.js)的最新版本。我将代码复制到一个`q.js`文件中，该文件是我的`testq.js`文件的兄弟。

的代码`testq.js`是：

```
function step1(callback) { console.log("step1"); callback("abc"); };

var Q = require("./q");

Q.fcall(step1).end(); 
```

当我运行它时：

```
node testq.js 
```

它报告：

```
E:\WORKSPACE_NODE\TestNodeJs\q>node testq.js
step1

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
          ^
TypeError: undefined is not a function
    at step1 (E:\WORKSPACE_NODE\TestNodeJs\q\testq.js:1:112)
    at makePromise.<anonymous> (E:\WORKSPACE_NODE\TestNodeJs\q\q.js:541:27)
    at makePromise.promiseSend (E:\WORKSPACE_NODE\TestNodeJs\q\q.js:325:41)
    at Array.0 (E:\WORKSPACE_NODE\TestNodeJs\q\q.js:787:28)
    at EventEmitter._tickCallback (node.js:192:40) 
```

我[为 eclipse 安装了 v8 调试器插件](http://chromedevtools.googlecode.com/svn/update/dev/)，逐行调试。不幸的是，我找不到错误开始。

我是nodejs的新手，请帮我调试。例如，我应该使用什么工具？或者我应该尝试任何其他有用的方法？

* * *

**更新**

根据霍根的回答，代码：

```
function step1(callback) { console.log("step1"); };

var Q = require("./q");

Q.fcall(step1).end(); 
```

可以成功运行，没有任何错误。

但是当我尝试时：

```
function step1(callback) { console.log("step1"); };

var Q = require("./q");

Q.fcall(step1)
.then(function(v) {
    console.log("finished: " +v);
}, function(err){
    console.log(err);
})
.end(); 
```

它打印：

```
E:\WORKSPACE_NODE\TestNodeJs\q>node testq.js
step1
finished: undefined 
```

我仍然想要一个演示，`step1`它将某些东西传递给`function(v) {console.log("finished: " +v);}`，其中`v`不是`undefined`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:39:21.110

让你的 step1 看起来像这样（修改为最后一个版本）：

```
 function step1() { console.log("step1"); return "abc" }; 
```

然后你会很开心。

* * *

查看 Q 文档，我相信您想要 'Q.node(...) 或 Q.ncall(...) 或 Q.fcall(...)

我会阅读更多关于 Q 的内容，或者如果您描述了您想做什么，我可能会提供帮助。

* * *

step1 接受一个参数——一个函数。

但是当你调用它时你没有定义它`callback("abc");`是未定义的。

当你摆脱所有无关紧要的东西时，也许会更清楚：

```
 function step1(callback) { console.log("step1"); callback("abc"); };

 var Q = require("q");

 Q.call(step1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T00:17:02.380

Q 文档在这一点上不是很清楚 - Q.call/Q.fcall/Q.ncall 所做的是采用*同步*函数（即返回值的函数）并将其转换为承诺。

在文档中有这样的情况：

```
function step1 () {
    var result = 10;
    console.log('step1');
    callback(result);
}

function step2 (result) {
    result += 5;
    console.log('step2');
    callback(result);
}

step1 ( function(result) {
    step2 (result, function(result) {
        result += 5;
        console.log(result);
    });
}); 
```

然后医生说你可以像这样转换它以获得相同的结果

```
(***)
Q.fcall(step1)
  .then(step2)
  .then( function(result) {
    result += 5;
    console.log(result);
  }).end(); 
```

我在这里感到困惑的是，两个“step1”和“step2”函数并不相同：他在“promisified”版本中使用的“step1”和“step2”看起来像这样：

```
function step1 () {
    var result = 10;
    console.log('step1');
    return result;
}

function step2 (result) {
    result += 5;
    console.log('step2');
    return result;
} 
```

使用这些同步版本的 step1 和 step2，您会看到上面的 ( *** ) 现在可以工作了

* * *

所有这一切都很有趣（对我来说）的原因是你可以使用相同的配方来做到这一点

```
function step1 () {
    var result = 10;
    var deferred = Q.defer();
    console.log('step1');
    setTimeout(deferred.resolve, 2000, result);
    return deferred.promise;
}

function step2 (result) {
    result += 5;
    console.log('step2');
    return result;
}

​Q.fcall(step1)
    .then(step2)
    .then(function(result) {
        result += 5;
        console.log(result);
    }).end(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:44:41.913

您需要使用[fcall](https://github.com/kriskowal/q)而不是 call。`call`是一个保留的 javascript 函数。

# magento - 如何在magento的产品页面中显示最近比较的产品？

> ID：10416940
> 
> 赞同：0
> 
> 时间：2012-05-02T15:32:38.263
> 
> 标签：magento

我同时显示了“比较产品”和“最近查看的产品”，但无法显示“最近比较的产品”。

我该怎么做..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:11:41.000

我没有尝试过这段代码，但希望它会对你有所帮助。

```
$items = Mage::getResourceModel('catalog/product_compare_item_collection')
            ->useProductItem(true)
            ->setStoreId(Mage::app()->getStore()->getId());
if (Mage::getSingleton('customer/session')->isLoggedIn()) {
            $items->setCustomerId(Mage::getSingleton('customer/session')->getCustomerId());
        }
        else {
            $items->setVisitorId(Mage::getSingleton('log/visitor')->getId());
        } 
```

# c# - 通用参数错误

> ID：10416944
> 
> 赞同：-3
> 
> 时间：2012-05-02T15:33:00.813
> 
> 标签：c#, reflector, betfair

嗨，我正在尝试修复此代码以进行编译但找不到方法

错误：

> Pro\AGeeksToy\Controls\LadderHeader.cs(218,98)：错误 CS0426：类型名称 'menuData' 不存在于类型 'AGeeksToy.CoreDataTypes.AGeeksToyToolStripMenuItem>'

这是错误。

```
 private void ChangeStakingType(AGeeksToyToolStripMenuItem<EnhancedType<StakingTypeEnum>>.menuData newType)
    {
        this.StakeBox.StakingType.Value = newType.Data.Value;
    } 
```

AGeeksToyToolStripMenuItem 类代码：

```
 namespace AGeeksToy.CoreDataTypes
{
    using System;
    using System.Windows.Forms;

    public abstract class AGeeksToyToolStripMenuItem<T> : ToolStripMenuItem, AGeeksToyMenu
    {
        public MouseButtons LastMouseButton;
        public MenuData<T> menuData;
        public static readonly VoidEventWithParam<MenuData<T>> RightClicked;

        static AGeeksToyToolStripMenuItem()
        {
            AGeeksToyToolStripMenuItem<T>.RightClicked = new VoidEventWithParam<MenuData<T>>();
        }

        protected AGeeksToyToolStripMenuItem(T obj, string text) : this(obj, text, null)
        {
        }

        protected AGeeksToyToolStripMenuItem(T obj, string text, Control ctrl)
        {
            base.DropDown.ImageList = IconManager.m_ImageList;
            this.menuData = new MenuData<T>(obj, ctrl);
            this.Text = text;
        }

        protected override void Dispose(bool disposing)
        {
            base.DropDown.ImageList = null;
            base.Dispose(disposing);
        }

        protected override void OnClick(EventArgs e)
        {
            if (this.MenuControl != null)
            {
                this.MenuControl.Refresh();
            }
            base.OnClick(e);
            if (this.LastMouseButton == MouseButtons.Right)
            {
                AGeeksToyToolStripMenuItem<T>.RightClicked.TriggerEvent(this.menuData);
            }
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            this.LastMouseButton = e.Button;
            base.OnMouseDown(e);
        }

        public virtual void SetMenu()
        {
            this.LastMouseButton = MouseButtons.Left;
            if (this.MenuControl != null)
            {
                base.Visible = this.MenuControl.Visible;
                this.Enabled = this.MenuControl.Enabled;
            }
            foreach (ToolStripItem item in base.DropDownItems)
            {
                if (item is AGeeksToyMenu)
                {
                    (item as AGeeksToyMenu).SetMenu();
                }
            }
        }

        public T Menu_Data
        {
            get
            {
                return this.MenuObject;
            }
        }

        protected Control MenuControl
        {
            get
            {
                return this.menuData.Control;
            }
        }

        protected T MenuObject
        {
            get
            {
                return this.menuData.Data;
            }
            set
            {
                this.menuData.Data = value;
            }
        }

        public class MenuData<T>
        {
            public System.Windows.Forms.Control Control;
            public T Data;

            public MenuData(T obj, System.Windows.Forms.Control ctrl)
            {
                this.Data = obj;
                this.Control = ctrl;
            }
        }
    }
} 
```

[http://i.stack.imgur.com/XfUIA.png](http://i.stack.imgur.com/XfUIA.png)

编译错误。

如果有人可以下载该项目或在此处查看可用的源代码

[下载链接谷歌代码](http://code.google.com/p/agt-betfair-bot/downloads/list)

中继也可用，但还不能发布直接链接。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T15:37:22.700

您是说您有一个名为 ChangeStakingType 的私有 void 返回方法，该方法采用一个参数。参数名称为“newType”，参数类型为`AGeeksToyToolStripMenuItem<EnhancedType<StakingTypeEnum>>.menuData`。`menuData`但是您的程序中没有命名类型。有一个名为的字段`menuData`和一个名为的类型，`MenuData<T>`但没有名为的类型`menuData`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:36:06.330

C# 区分大小写。

`menuData`当调用实际类时，您正在尝试使用该类`MenuData`。把那个`M`大写

# asp.net-mvc - 在 OnActionExecuting 事件中更改模型

> ID：10416951
> 
> 赞同：11
> 
> 时间：2012-05-02T15:33:30.860
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, action-filter

我在 MVC 3 中使用动作过滤器。

我的问题是我是否可以在将模型传递给 OnActionExecuting 事件中的 ActionResult 之前制作模型？

我需要在那里更改其中一个属性值。

谢谢，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-03T07:26:42.677

活动中还没有模型`OnActionExecuting`。模型由控制器操作返回。所以你在`OnActionExecuted`事件中有一个模型。那是您可以更改值的地方。例如，如果我们假设您的控制器操作返回一个 ViewResult 并传递给它一些模型，那么您可以如何检索这个模型并修改一些属性：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var result = filterContext.Result as ViewResultBase;
        if (result == null)
        {
            // The controller action didn't return a view result 
            // => no need to continue any further
            return;
        }

        var model = result.Model as MyViewModel;
        if (model == null)
        {
            // there's no model or the model was not of the expected type 
            // => no need to continue any further
            return;
        }

        // modify some property value
        model.Foo = "bar";
    }
} 
```

如果您想修改作为操作参数传递的视图模型的某些属性的值，那么我建议您在自定义模型绑定器中执行此操作。但也有可能在以下情况下实现`OnActionExecuting`：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var model = filterContext.ActionParameters["model"] as MyViewModel;
        if (model == null)
        {
            // The action didn't have an argument called "model" or this argument
            // wasn't of the expected type => no need to continue any further
            return;
        }

        // modify some property value
        model.Foo = "bar";
    }
} 
```

# asp.net-mvc - 如何在 asp.net mvc 的 url 中的 {controller} 位置之前添加诸如“en-gb”之类的文化字符串？

> ID：10416953
> 
> 赞同：1
> 
> 时间：2012-05-02T15:33:41.900
> 
> 标签：asp.net-mvc, multilingual, currentculture

所以基本上我想实现一个具有以下场景的多语言网站：

*   使用 ASP.NET MVC 3
*   大多数语言都使用资源文件，因此它们使用相同的视图，但是也有许多特定于国家/地区的视图（即特定于语言文化）并且并非对所有人都可用。
*   **示例网址：http://localhost/en-us/{area}/{controller}/{action}/{id}**

MVC 文件夹结构如下：

```
- Areas
    - Channel1
        - Controllers
        - Content
        - Views
            - en-us
                - View1.cshtml
                - View2.cshtml
            - zh-cn
                - View1.cshtml
                - View2.cshtml
                <b>- Special.cshtml</b>

    - Channel2
       ....(similar folder structure)
- .... 
```

我认为必须有一种方法可以将“en-us”定义为像 {lang} 这样的参数并在区域外的默认控制器中做出决定 - 但是我是 asp.net MVC 新手，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:21:45.847

这是一篇很棒的文章，其中包含有关如何在 ASP.NET MVC 3 上实现全球化的实用建议

[http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:24:08.480

没有很好的方法可以做到这一点，但这是可能的。首先，您需要稍微重新排列您的视图——它们仍然必须有一个控制器。假设您拥有 (`View1.cshtml`和`View2.cshtml`) 的文件存在于您的家庭控制器中。把它们放在这里：

```
- Views
  - Home
    - en-us
      - View1.cshtml
      - View2.cshtml
    - zh-cn
      - View1.cshtml
      - View2.cshtml 
```

然后，为以下视图创建自定义路由`Global.asax.cs`：

```
routes.MapRoute(
    "MultiLingual",
    "{lang}/{controller}/{action}/{id}",
    new {  controller = "Home", action = "Index", lang="en-us", id = UrlParameter.Optional }
); 
```

最后，在您的主控制器（或您想要放置视图的任何控制器）中，使用`lang`参数来确定要使用的视图：

```
public ActionResult View1( string lang, int? id ) {
    return View( lang + "/View1" );
}

public ActionResult View2( string lang, int? id ) {
    return View( lang + "/View2" );
} 
```

我试过这个并且它有效，但感觉非常笨重，而且不是很干燥（至少在动作中）。有人有更好的方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:38:32.573

您始终可以编写自己的视图引擎来根据进来的内容查看文件夹。ThemedViewengine 的代码可以[做到这一点](http://cgeers.com/2010/02/25/asp-net-mvc-themed-view-engine/)。

# java - NoClassDefFounderError 外部 jar 文件

> ID：10416954
> 
> 赞同：2
> 
> 时间：2012-05-02T15:33:49.133
> 
> 标签：java, android, jar, noclassdeffounderror

嘿，我在 android 项目中遇到了这个问题！我已经阅读了很多主题，但没有一个有帮助！

我离你想自杀但你没有合适的工具的尴尬时刻太近了！请有人帮忙

我正在使用 Eclipse

我已经在 libs forder 中添加了 jar 文件。

我已经在构建路径中添加了 lib 文件夹中的 jar。

我已经完成了所有提到的事情！

但是当我使用 jar 文件中的类时，我仍然得到 NoClassDefFounderError ！

如果您有任何事情，请告诉我，我们将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:44:28.000

您的 jar 文件必须在 libs 文件夹中或在您的构建路径中，但不能同时在两者中。

当您转到项目的属性并转到构建路径选项时，是否检查了“订购和导出”中的库（如果您的 jar 被添加到构建路径中）。

此外，您是否在代码中导入了类（CTRL+SHIFT+O 或 CMD+SHIFT+O）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:47:22.397

检查您使用的 JVM 版本是否比用于编译 jar 文件中的类文件的 java 编译器版本旧。

# css - 当前项目的 CSS 设计（wordpress 多页帖子）

> ID：10416957
> 
> 赞同：0
> 
> 时间：2012-05-02T15:33:59.853
> 
> 标签：css, wordpress

所以我为wordpress中的多页帖子制作了一些css，但不知道如何更改当前页面的背景。我的 css 属性是 POSTPAGES，所以我尝试了

* * *

.postpages:active 和 .postpages.active

* * *

.postpages:current 和 .postpages.current

* * *

但一切都没有奏效......

请帮我解决这个问题。谢谢

-- 编辑：更多信息参考这个链接： [http ://codex.wordpress.org/Styling_Page-Links](http://codex.wordpress.org/Styling_Page-Links)

我在我的帖子中使用了这个多页页面系统。所以，如果我的帖子有多个页面，那么它会显示帖子被分成的页数。

现在，我想要的是，当有人在帖子的第一页时，页码的背景应该是别的东西。为此，我需要一些 CSS 代码，以便我可以为**CURRENT**或**ACTIVE**页面定义不同的 CSS 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:58:11.983

通过使任何 CSS 选择器更具体，您可以覆盖任何其他样式。在这种情况下，在声明之前指定“body”将覆盖除内联样式之外的所有其他内容。

```
body .postpages {
   ...
} 
```

# sql - SYS_CONNECT_BY_PATH 导致“ORA-01489：字符串连接的结果太长”

> ID：10416959
> 
> 赞同：3
> 
> 时间：2012-05-02T15:34:06.020
> 
> 标签：sql, oracle

我正在使用 SYS_CONNECT_BY_PATH 进行字符串聚合。查询的一般形式是这样的：

```
select /*a bunch of fields unrelated to the problem*/,
--Use SYS_CONNECT_BY_PATH to glue together all the chunks of XML. 
--The XSL header and footer are prepended and appended here.
 , XMLType(to_clob('<?xml version="1.0"?><!-- begining of XSL file -->,'<!-- Next Section -->'))||'</xsl:stylesheet>')) AS XSL
from (
  select /*a bunch of fields unrelated to the problem*/
    case when x = 1 then to_clob('
    /*a bunch of XSL*/
     <xsl:text>'||subq.new_c_value||'</xsl:text>
    /*a whole bunch more xsl*/')
    else
     to_clob('/*a bunch of different XSL*/             
     <xsl:text>'||subq.new_f_value||'</xsl:text>
    /*a whole bunch more xsl*/')
    end as xsl,
  --curr and prev are to help with using sys_connect_by_path do string aggregation.
    rownum AS curr,
    rownum -1 AS prev
  from (Select /* details of subq not relevant */ ) as subq
)
CONNECT BY prev = PRIOR curr 
START WITH curr = 1; 
```

基本上，我正在运行一个查询来生成用于更正 XML 文件的 XSL。我正在使用 sys_connect_by_path 将字符串组合成一个块，这比从多行复制和粘贴许多值更容易。我不能使用任何自定义字符串聚合函数，因为此查询在生产数据库上运行，我不能随心所欲地创建函数。

问题是运行我的查询将返回：

```
ORA-01489: 字符串连接的结果太长
01489\. 00000 - “字符串连接的结果太长”
*原因：字符串连接结果超过最大大小。
*行动：确保结果小于最大大小。

```

...在数据过多的情况下。如您所见，我一直在将该`to_clob()`功能应用到我认为可能有帮助的任何地方，但似乎并没有太大的不同。除了使用 PL/SQL 之外，还有其他方法可以解决这个问题吗？我更愿意将其保留为查询，因为此查询的结果被导出到报告模板中，该模板与 XSL 并排显示了许多有用的信息。如果能够在一个步骤中完成所有这些操作，而不是几个步骤，那就太好了。

（甲骨文 10g）

* * *

最后，我找到了这个页面：

[http://www.sqlsnippets.com/en/topic-11787.html](http://www.sqlsnippets.com/en/topic-11787.html)

关于 Oracle 中的字符串聚合技术。我怀疑在我的情况下唯一可以使用的是 XML 方法和 Model 方法。我无法让模型方法正常工作，所以我只使用了 XML 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:50:07.940

```
select
    xmlroot
    (
        xmlelement
        (
            "xsl:stylesheet"
            ,XMLAttributes
            (
                '1.0' as version
                ,'http://www.w3.org/1999/XSL/Transform' as "xmlns:xsl"
                ,'http://test' as "xmlns:ns0"
            )
            ,(
                xmlagg(xmlelement("xsl:text", val))
            )
        )
        ,version '1.0'
    )
from
(
    --Test >4000 characters
    select 1 id, cast(rpad('a',4000,'a') as varchar2(4000)) val from dual union all
    select 1 id, cast(rpad('b',4000,'b') as varchar2(4000)) val from dual union all
    select 1 id, cast(rpad('c',4000,'c') as varchar2(4000)) val from dual union all
    select 1 id, cast(rpad('d',4000,'d') as varchar2(4000)) val from dual
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:13:16.193

抱歉，我的回答依赖于创建字符串聚合包，但从长远来看可能很有用您可以使用 Stragg 包而不是以下链接中 AskTom 中提到的 sys_connect_by_path

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2196162600402](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2196162600402)

在那个包中有一个声明和一些处理 long 的逻辑，您可以根据需要更改以处理 CLOB

# asp.net - 具有多个重定向选项的 Asp.net MVC 取消按钮

> ID：10416967
> 
> 赞同：1
> 
> 时间：2012-05-02T15:34:26.377
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我目前有一个带有提交和取消按钮的表单。根据某些逻辑，每次页面加载时，我都希望相同的取消按钮重定向到应用程序中的不同其他页面。这是我目前在我的 aspx 视图中的代码，它根据我的属性更改 location.href

```
 <% if (Model.MyProperty.Equals("something"))
      { %>
       <input class="btnCancel" type="button" value="" onclick="location.href='<%: Url.Action("MyAction","MyController", new {Area="MyArea"},null)%>'" />
   <% } %>
   <% else if (Model.MyProperty.Equals("somethingelse"))
      { %>
       <input class="btnCancel" type="button" value="" onclick="location.href='<%: Url.Action("MyOtherAction","MyOtherController", new {Area="SomeOtherArea"},null)%>'" />
   <% } %> 
```

这是正确而优雅的方法吗？如果有办法，我宁愿减少多个 IF-ELSE 条件。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:40:17.863

我一直处理多个重定向选项的方式是在控制器操作中设置 href 值。

View 是通用的，但控制器操作特定于您呈现的页面的上下文。因此，在您的模型中，创建一个名为 CancelUrl 的属性。现在，在控制器操作中，将其设置为您希望它转到的链接。

```
model.CancelUrl = Url.Action("action", "controller"); 
```

这样，您在视图中所要做的就是说

```
<a href="@Model.CancelUrl">Text</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:40:15.120

您可以创建一个取消方法，将您的属性作为参数并在控制器中适当地重定向。无论如何，此逻辑可能不应该出现在您的视图中，因为视图应该具有几乎为 0 的逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T18:43:37.677

我会将用于决定取消操作的属性放在视图模型中（正如您已经拥有的那样），以及任何其他必需的属性。

例如：

```
public class IndexModel
{
    //any other properties you need to define here
    public string MyProperty { get; set; }
} 
```

那么您的视图将类似于：

```
@model IndexModel

@using (Html.BeginForm())
{
    //other information you may want to submit would go here and in the model.

    @Html.HiddenFor(m => m.MyProperty)
    <button type="submit" name="submit" value="submit">submit</button>
    <button type="submit" name="cancel" value="cancel">cancel</button>
} 
```

最后，您的 post 操作应该决定应该返回的下一个操作：

```
[HttpPost]
public ActionResult Index(IndexModel model)
{
    if (!string.IsNullOrEmpty(Request["submit"]))
    {
        if (ModelState.IsValid)
        {
            //any processing of the model here
            return RedirectToAction("TheNextAction");
        }
        return View();
    }

    if (model.MyProperty.Equals("something"))
    {
        return RedirectToAction("MyAction", "MyController", new { area = "MyArea" });
    }
    else //assumes the only other option is "somethingelse"
    {
        return RedirectToAction("MyOtherAction", "MyOtherController", new { area = "SomeOtherArea" });
    }
} 
```

# android - Android AudioManager setMode() 权限被拒绝

> ID：10416974
> 
> 赞同：2
> 
> 时间：2012-05-02T15:34:44.947
> 
> 标签：android, android-audiomanager

我尝试 setMode(mode_in_call) 在播放媒体时更改音频模式。所以，我确定我添加了权限
，我写了这样的代码： AudioManager mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE); mAudioManager.setMode(AudioManager.MODE_IN_CALL);

这是问题所在：我使用 Sumsung i9000 i9023 它不起作用，并且日志电话相关音频设置权限被拒绝：setMode（）但我尝试索尼 x10 LT15i，它可以正确修改模式。为什么这不会发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T14:40:28.637

我没有看到你说你添加了什么权限，但请确保它是：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-18T09:23:33.420

请注意，MODE_IN_CALL 只能由具有 Manifest.permission.MODIFY_PHONE_STATE 权限的主电话应用程序选择。

“Manifest.permission.MODIFY_PHONE_STATE” - 允许修改电话状态 - 开机、mmi 等。不包括拨打电话。不供第三方应用程序使用。

参考链接： [https://developer.android.com/reference/android/media/AudioManager#setCommunicationDevice(android.media.AudioDeviceInfo)](https://developer.android.com/reference/android/media/AudioManager#setCommunicationDevice(android.media.AudioDeviceInfo))

[https://developer.android.com/reference/android/Manifest.permission#MODIFY_PHONE_STATE](https://developer.android.com/reference/android/Manifest.permission#MODIFY_PHONE_STATE)

# java - 从哪里获得 JavaFX 源代码？

> ID：10416981
> 
> 赞同：8
> 
> 时间：2012-05-02T15:35:05.270
> 
> 标签：java, open-source, javafx

我在几个月前读到过，甲骨文同意让 JavaFX 开源。我想参与开发过程，但不知道从哪里获得开发资源。

我会很感激一些帮助:)

最好的祝福，

大卫

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T15:41:40.030

在： [http ://hg.openjdk.java.net/](http://hg.openjdk.java.net/)

搜索“openjfx”。

使用“master/rt”存储库之一，例如

对于 v2.1：

[http://hg.openjdk.java.net/openjfx/2.1/master/rt/](http://hg.openjdk.java.net/openjfx/2.1/master/rt/)

对于 v2.2：

[http://hg.openjdk.java.net/openjfx/2.2/master/rt/](http://hg.openjdk.java.net/openjfx/2.2/master/rt/)

对于 v8：

[http://hg.openjdk.java.net/openjfx/8/master/rt/](http://hg.openjdk.java.net/openjfx/8/master/rt/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:36:43.147

看起来发展在这里：

[http://openjdk.java.net/projects/openjfx/](http://openjdk.java.net/projects/openjfx/)