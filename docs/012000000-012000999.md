# StackOverflow 问答 12000000-12000999

# c - sed 将 // 替换为 /* */ 注释，除非// 注释出现在 /* */ 中

> ID：12000001
> 
> 赞同：2
> 
> 时间：2012-08-17T04:55:54.780
> 
> 标签：c, sed, comments

我面临的问题是需要 C 样式注释的 ANSI 编译器。

所以我试图将我现有的评论转换为符合 C 标准 ISO C89。

我正在寻找一个 SED 表达式来用 /* 评论替换 // 评论，除非// 评论出现在 /* */ 评论中（这会破坏评论）。

我试过这个（范围表达式）无济于事：

```
sed -e '/\/*/,/*\//! s_//\(.*\)_/*\1 */_' > filename 
```

是否可以忽略这样的评论中的 1 行评论，但会改变其他所有内容？

```
/**********************************
* Some comment
* an example bit of code within the comment followed by a //comment
* some more comment
***********************************/
y = x+7; //this comment must be changed 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:26:00.613

这是一个用 C 编写的经过轻微测试的过滤器，它应该执行您想要的转换。关于这个过滤器的一些评论，即使不是不可能，也很难用正则表达式处理：

*   它忽略用引号括起来的类似评论的序列（因为它们不是评论）
*   如果正在转换的 C99 注释包含将开始或结束 C89 注释的内容，它会调整该序列，因此不会有嵌套注释或注释过早结束（嵌套的`/*`or`*/`更改为`/+`or `/|`）。我不确定你是否需要这个（如果你不需要，它应该很容易删除）
*   上述嵌套注释的修改仅发生在正在转换的 C99 注释中 - 已经是 C89 样式的注释内容不会更改。
*   它不处理 trigraphs 或 digraphs（我认为这只允许丢失由 trigraph 启动的转义序列或行尾延续的可能性`??/`）。

当然，您需要执行自己的测试以确定它是否适合您的目的。

```
#include <stdio.h>

char* a = " this is /* a test of \" junk // embedded in a '\' string";
char* b = "it should be left alone//";

// comment /* that should ***////  be converted.
/* leave this alone*/// but fix this one

// and "leave these \' \" quotes in a comment alone*
/****  and these '\' too //
*/

enum states {
    state_normal,
    state_double_quote,
    state_single_quote,
    state_c89_comment,
    state_c99_comment
};

enum states current_state = state_normal;

void handle_char( char ch)
{
    static char last_ch = 0;

    switch (current_state) {
        case state_normal:
            if ((last_ch == '/') && (ch == '/')) {
                putchar( '*');  /* NOTE: changing to C89 style comment */
                current_state = state_c99_comment;
            }
            else if ((last_ch == '/') && (ch == '*')) {
                putchar( ch);
                current_state = state_c89_comment;
            }
            else if (ch == '\"') {
                putchar( ch);
                current_state = state_double_quote;
            }
            else if (ch == '\'') {
                putchar( ch);
                current_state = state_single_quote;
            }
            else {
                putchar( ch);
            }
            break;

        case state_double_quote:
            if ((last_ch == '\\') && (ch == '\\')) {
                /* we want to output this \\ escaped sequence, but we */
                /* don't want to 'remember' the current backslash -   */
                /* otherwise we'll mistakenly treat the next character*/
                /* as being escaped                                   */

                putchar( ch);
                ch = 0;
            }
            else if ((ch == '\"') && (last_ch != '\\')) {
                putchar( ch);
                current_state = state_normal;
            }
            else {
                putchar( ch);
            }
            break;

        case state_single_quote:
            if ((last_ch == '\\') && (ch == '\\')) {
                /* we want to output this \\ escaped sequence, but we */
                /* don't want to 'remember' the current backslash -   */
                /* otherwise we'll mistakenly treat the next character*/
                /* as being escaped                                   */

                putchar( ch);
                ch = 0;
            }
            else if ((ch == '\'') && (last_ch != '\\')) {
                putchar( ch);
                current_state = state_normal;
            }
            else {
                putchar( ch);
            }
            break;

        case state_c89_comment:
            if ((last_ch == '*') && (ch == '/')) {
                putchar( ch);
                ch = 0; /* 'forget' the slash so it doesn't affect a possible slash that immediately follows */
                current_state = state_normal;
            }
            else {
                putchar( ch);
            }
            break;

        case state_c99_comment:
            if ((last_ch == '/') && (ch == '*')) {
                /* we want to change any slash-star sequences inside */
                /* what was a C99 comment to something else to avoid */
                /* nested comments                                   */
                putchar( '+');
            }
            else if ((last_ch == '*') && (ch == '/')) {
                /* similarly for star-slash sequences inside */
                /* what was a C99 comment                    */
                putchar( '|');
            }
            else if (ch == '\n') {
                puts( "*/");
                current_state = state_normal;
            }
            else {
                putchar( ch);
            }
            break;
    }

    last_ch = ch;
}

int main(void)
{
    int c;

    while ((c = getchar()) != EOF) {
        handle_char( c);
    }

    return 0;
} 
```

一些放纵的评论：很多年前，我工作的一家商店想要强加一个编码标准，禁止 C99 风格的注释，理由是即使我们当时使用的编译器没有问题，但代码可能必须是移植到不支持它们的编译器。我（和其他人）成功地论证了这种可能性是如此遥远，以至于基本上不存在，即使它确实发生了，也可以很容易地编写一个使注释兼容的转换程序。我们被允许使用 C99/C++ 风格的注释。

我现在认为我的誓言已经兑现，可能对我施加的任何诅咒都将被解除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:13:14.030

如果您不能使用@ephemient 的建议，那么您需要在多行中应用您的正则表达式，这不是 sed 的默认行为。sed 有一个保持缓冲区，它允许您将多个字符串附加在一起并将正则表达式应用于连接的字符串。

sed 表达式如下所示：

```
sed '1h;1!H;${;g;s/your-matcher-regex/replacement-regex/g;}' 
```

`1h`- 如果是第一行，则将该行放入保持缓冲区（先清空）

`1!H`- 如果不是第一行，追加到保持缓冲区

`$ {...}`- 如果是最后一行，执行这个 sed 命令

现在，即使 /* 和 */ 在不同的行上，您的匹配器表达式也将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:37:02.330

`/*`使用任何可以输出不同标记和注释的转换器将代码转换为彩色 HTML，`//`使用 perl/awk/sed/whatever 处理输出，然后剥离标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:35:38.193

```
awk '{if($0~/\/\//){sub(/\/\//,"\/\*");$0=$0"*/"};print}' temp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T06:59:14.950

您可以（几乎）完全在 sed 中执行此操作，您只需要一次调用`tr`：

### translate_comments_prepare.sed

```
s/\\/\\\\/g  # escape current escape characters
s/\$/\\S/g   # write all occurrences of $ as \S
s/(/\\o/g    # replace open braces with \o
s/)/\\c/g    # replace closing braces with \c
s/$/$/       # add a $ sign to the end of each line
s_/\*_(_g    # replace the start of comments with (
s_\*/_)_g    # replace the end of comments with ) 
```

然后我们通过管道将“预处理”步骤的结果`tr -d '\n'`连接到所有行（我还没有找到从内部执行此操作的好方法`sed`）。

然后我们做真正的工作：

### translate_comments.sed

```
s_//\([^$]*\)\$_(\1)$_g  # replace all C++ style comments (even nested ones)
:b                       # while loop
                         # remove nested comment blocks:
                         #   (foo(bar)baz) --> (foobarbaz)
s/(\([^()]*\)(\([^()]*\))\([^()]*\))/(\1\2\3)/
tb                       # EOF loop
s_(_/*_g                 # reverse the steps done by the preparation phase
s_)_*/_g                 # ...
s/\$/\n/g                # split lines that were previously joined
s/\\S/$/g                # replace escaped special characters
s/\\o/(/g                # ...
s/\\c/)/g                # ...
s/\\\(.\)/\1/g           # ... 
```

然后我们基本上把所有东西放在一起

```
sed -f translate_comments_prepare.sed | tr -d '\n' | sed translate_comments.sed 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T07:31:30.637

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;ba};s/^/\x00/;tb;:b;s/\x00$//;t;s/\x00\(\/\*[^*]*\*\+\([^/*][^*]*\*\+\)*\/\)/\1\x00/;tb;s/\x00\/\/\([^\n]*\)/\/*\1\*\/\x00/;tb;s/\x00\(.\)/\1\x00/;tb' file 
```

解释：

*   `:a;$!{N;ba}`将文件 slurp 到模式空间中
*   `s/^/\x00/`设置一个标记 NB 这可以是文件中找不到的任何字符
*   `tb;:b`通过跳转到占位符来重置替换开关`b`
*   `s/\x00$//;t`标记已到达文件末尾。全部完成。
*   `s/\x00\(\/\*[^*]*\*\+\([^/*][^*]*\*\+\)*\/\)/\1\x00/;tb`此正则表达式匹配 c 样式的注释，如果为真，则标记传递给它们的标记。
*   `s/\x00\/\/\([^\n]*\)/\/*\1\*\/\x00/;tb`此正则表达式匹配单行注释，替换为 c 样式注释，如果为真，则颠簸传递它们的标记。
*   `s/\x00\(.\)/\1\x00/;tb`此正则表达式匹配任何单个字符，如果为真，则标记通过它。

# java - Java 打印 API。MS Word 文件

> ID：12000002
> 
> 赞同：0
> 
> 时间：2012-08-17T04:55:58.000
> 
> 标签：java, printing

如果打印机本身不支持“应用程序/msword”类型，如何使打印机打印 MS Words 文件？我想我需要`SimpleDoc`使用 2D 图形等创建...但找不到任何示例。

PS我使用`javax.print`（JPS），而不是`java.awt`......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:12:43.607

此链接可能对[您有用](http://wiki.openoffice.org/wiki/API/Samples/Java/Office/DocumentHandling#DocumentPrinter)

[资源](http://www.openoffice.org/api/)

# validation - 如何获取 isValid() 链生成的所有错误消息？

> ID：12000003
> 
> 赞同：1
> 
> 时间：2012-08-17T04:55:59.060
> 
> 标签：validation, zend-framework, file-transfer

我使用验证器`Count`检查文件。`isImage`我明确上传了错误数量的文件和错误的 mime 类型文件，但它只显示一条错误消息，表明只有一个文件是错误的。但我想查看所有无效的文件。如何设置此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:36:32.697

You can use [getMessages()](http://www.tig12.net/downloads/apidocs/zf/Zend_Form.class.html#det_methods_getMessages) method of Zend_Form. It retrieves error messages from elements failing validations.

# c++ - 指针值丢失

> ID：12000004
> 
> 赞同：3
> 
> 时间：2012-08-17T04:56:02.940
> 
> 标签：c++, pointers

每次我从插入函数中退出时，根值都会返回 NULL 我无法真正理解为什么指针不保持它的值。

```
int main(int argc, char *argv[])
{
    int input;
    node* root = NULL;
    while (input >0 ) {
          cout<< "Enter a Number:";
          cin>> input;
          insert (root,input);
    }
    printall(root);
    system("PAUSE");
    return 0;
}

void insert(node* _node,int val)
{

    //#if 0
    cout << "In insert before" << _node;
    if (_node == NULL) {
            _node = new node;
            _node->val = val;
            _node->left = NULL;
            _node->right = NULL;
            return;
    }
    //#endif
    if(_node->val > val) {
        insert(_node->left,val);
    } else if (_node->val < val) {
        insert(_node->right,val);
    }
    return;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:59:37.287

您正在`root`按值传递，因此被调用者无法修改它，您必须通过引用传递它

```
void insert(node** _node,int val);
insert (&root,input); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T04:58:25.160

指针并没有“失去”它的价值。您需要将指向节点的指针传递给`insert`-- 然后它可以通过参数“返回”指向节点的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:31:29.663

简短回答：您正在使用 C++，但您忘记输入字符或您的键盘有缺陷......正确的代码是

```
void insert(node *& _node, int value) // note '&'
{
    ...
} 
```

长答案：

通常 C 和 C++ 函数参数是“按值”的，这意味着被调用的函数将收到您传递给它们的内容**的副本......**

```
void foo(int x)
{
    x = 42;
}

void bar()
{
    int k = 12;
    foo(k);
    // Here k is still 12, not 42
} 
```

然而，C++ 具有“引用”的概念，它允许您在不复制的情况下传递参数，然后该函数可以例如更改调用者变量。调用后更改`foo(int x)`为`foo(int& x)`和`k`in的值`bar`将变为 42。

如果您使用 C++，该`&`字符会告诉编译器`node`参数应该通过引用而不是值传递（即您不想复制指针，但函数应该直接使用您的变量。

如果您来自 Visual Basic，那么请记住所有参数都`byval`在 C 和 C++ 中，除非另有说明（在大多数其他现代语言中也是如此）。

实际上，在 C 和大多数其他现代语言中，根本没有办法通过引用传递参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T04:59:56.783

如果要更改`root`函数中的指针（或任何指针），则需要将指针传递给该指针（或者如果您使用 C++，则更可能是引用，我很确定您是，因为您是使用`new`）。就像是：

```
void fn (node **pRoot) {
    *pRoot = new node;
} 
```

C 和 C++ 都是默认的按值传递，因此更改不会回显到更高级别。

考虑以下代码：

```
void changeVals (int x, int *py, int &z) {
    x = 1;
    *py = 2;
    z = 3;
}

int X = 0;
int Y = 0;
int Z = 0;
changeVals (X, &Y, Z); 
```

此时，两者`Y`和`Z`都将发生变化，但`X`仍为零。

这与指针没有什么不同。如果要在函数中更改指针*本身*，则必须将其作为指向它的指针（并在函数中取消引用）或作为引用类型传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T05:01:37.777

除了`pointers to pointers`这里的所有答案之外，我想指出您的`insert`函数正在分配永远不会被删除的内存。

您需要设计同时处理`allocations`和的系统`deallocations`。

# jsf - 如何使用带有 JSF 组件的非值属性的参数化消息格式

> ID：12000006
> 
> 赞同：10
> 
> 时间：2012-08-17T04:56:06.140
> 
> 标签：jsf, jsf-2

我有一个用例，我必须使用资源包在 UI 上显示各种文本。其中一些资源包条目带有参数（例如 {0}），对于这些我使用 h:outputFormat 但有时这还不够。

例如

```
someMessage=Display this message with param {0} 
```

在资源包中。

要在 xhtml 上显示它，我通常会这样做：

```
<h:outputFormat value="#{msg['someMessage']}"><f:param value="#{someBean.value}"/></h:outputFormat> 
```

当它是一个简单的案例时，这很有效，但对于更复杂的用例，这还不够。例如，如果我希望 commandLink 的“标题”属性使用上述资源包条目：

```
 <h:commandLink action="logout" title="#{msg['someMessage']}">
        <f:param value="#{someBean.value}" />
        <h:graphicImage library="images" name="image.png" />
    </h:commandLink> 
```

这是行不通的。我也试过：

```
 <h:commandLink action="logout">
        <f:attribute name="title">
            <h:outputFormat value="#{msg['someMessage']}"><f:param value="#{someBean.value}"/></h:outputFormat>
        </f:attribute>
        <h:graphicImage library="images" name="image.png" />
    </h:commandLink> 
```

这也不起作用，因为 f:attibute 不允许孩子。

即使有绕过这个的技巧（例如使用 primefaces 中的悬停组件），也有其他字段可能需要参数化消息。

有谁知道使用 MessageFormat 的方法，该方法在 JSF 组件的非值字段中接受参数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T17:13:26.313

您可以为此创建[一个自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function)，最终可以像这样结束：

```
<h:commandLink ... title="#{my:format(msg['someMessage'], someBean.value)}" /> 
```

您可以使用[`MessageFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)API 来执行这项工作，就像在`<h:outputFormat>`幕后所做的那样。

另一种方法是创建一个自定义组件，该组件与 JSTL 的 good 'ol 一样[`<fmt:message>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/message.html)，它支持`var`将格式化消息导出到 EL 范围的属性。

```
<my:outputFormat ... var="linkTitle">
    ...
</my:outputFormat>
<h:commandLink ... title="#{linkTitle}" /> 
```

* * *

**更新**：JSF 实用程序库[OmniFaces](http://omnifaces.org)具有用于此目的的[`#{of:formatX()}`](http://showcase.omnifaces.org/functions/Strings)功能和[`<o:outputFormat>`](http://showcase.omnifaces.org/components/outputFormat)组件。

# javascript - bootstrap：仅针对特定模态更改模态背景不透明度

> ID：12000011
> 
> 赞同：25
> 
> 时间：2012-08-17T04:57:16.003
> 
> 标签：javascript, jquery, css, jquery-plugins, twitter-bootstrap

我有一个包含多个模式的菜单。当我打开一个在另一个上时，它会将背景变成黑色，这很难看。我知道我需要`filter: alpha(opacity=80);`在`.modal-backdrop.fade.in`bootstrap.css 中进行更改。但我需要更改它不是针对所有模态，仅针对其中一些模态。这是第一个模态的 html 代码

```
 <div class="modal hide" id="mbusModal">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>MBUS</h3>
        </div>
        <div class="modal-body">
            <form class="form-horizontal">
                <form class="well form-inline">
                    <input type="button" class="btn" onclick="$('#dinMbusModal').modal('show'); $('#tabsMbusDin a:last').tab('show');" value="din">
                </form>
            </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Закрыть</a>
            <a href="#" class="btn btn-primary" onclick="addPort('mbus',$('#mbusDev').val(),$('#mbusSpeed').val()); $('#mbusModal').modal('hide')">Применить</a>
        </div> 
```

这个模态需要改变他的背景：

```
 <div class="modal hide" id="dinMbusModal" style="width: 500px; margin: -250px 0 0 -250px;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>DIN</h3>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Закрыть</a>
            <a href="#" class="btn btn-primary" onclick="addPort('din_mbus',,); $('#dinMbusModal').modal('hide')">Применить</a>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-17T05:54:36.640

由于背景是由 Modal 插件动态生成的，所以有点复杂。**一种可能的方法是在收到show**事件时向 body 添加一个类，然后在**hidden**上将其删除。

就像是：

## CSS

```
.modal-color-red .modal-backdrop {
  background-color: #f00;
}
.modal-color-green .modal-backdrop {
  background-color: #0f0;
}
.modal-color-blue .modal-backdrop {
  background-color: #00f;
} 
```

## JS

```
$('.modal[data-color]').on('show hidden', function () {
  $('body').toggleClass('modal-color-'+ $(this).data('color'));
}); 
```

## HTML

```
<div class="modal hide fade" id="redModal" data-color="red">...</div>
<div class="modal hide fade" id="greenModal" data-color="green">...</div>
<div class="modal hide fade" id="blueModal" data-color="blue">...</div> 
```

### [JSFiddle](http://jsfiddle.net/mmfansler/axhfF/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-19T15:29:03.290

**只有 CSS / HTML**

JSFiddle：http: [//jsfiddle.net/szoys6d7/](http://jsfiddle.net/szoys6d7/)

**HTML**

```
<div class="modal hide fade modal2">...</div> 
```

**CSS**

```
.modal2.fade.in ~ .modal-backdrop.fade.in {
background-color: #f00; } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-24T08:43:47.977

这是您的模态的 html 标记

```
<div id="my-modal" class="modal hide fade">
    ....
</div> 
```

在 html 文件的样式元素中使用此样式

```
<style>
    #my-modal>.modal-backdrop.fade.in
    {
        opacity: .1; 
    }
</style> 
```

和脚本

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#my-modal").modal({
            show: true
        });
    });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-17T10:10:59.317

对于角度 ui 引导程序：

`backdropClass` 初始化时使用：

```
$modal.open({templateUrl:'',
controller:'',
backdropClass:''
}); 
```

[http://angular-ui.github.io/bootstrap/versioned-docs/0.12.0/](http://angular-ui.github.io/bootstrap/versioned-docs/0.12.0/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-07T19:41:14.790

带了我一辈子，但我找到了一条线。

```
$(window).load(function(){
    // remove greying background bootstrap modal effect
    $(".modal-backdrop ").attr('class', 'someClass');

}); 
```

删除类删除了模态。但是重命名它会保留功能，但会消除背景变灰。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-02-25T21:24:37.433

给你的模态一个单独的类

你所需要的只是：

.yourclass { 背景：rgba(0, 0, 0, 0.8); }

# javascript - 图像加载不适用于 IE 8 或更低版本

> ID：12000016
> 
> 赞同：6
> 
> 时间：2012-08-17T04:58:13.417
> 
> 标签：javascript, image, internet-explorer

我的目标是检查图像是否已成功加载。它在现代浏览器中运行良好，但 IE8 或 7 这是一个可怕的问题。这是一个示例代码：

```
var img = new Image(),
    url = 'http://something.com/images/something.gif';

    $(img).attr('src', url).load(function() {
        if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
            alert('broken image!');
        } 
        else {
            alert('successfully loaded');
        }
    } 
```

任何人都知道解决这个问题吗？提前感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T05:12:29.530

您必须`onload`在设置值之前设置处理程序`.src`。

`.src`在某些版本的 IE 中，如果图像在浏览器缓存中，则在设置值时会立即触发 load 事件。如果您的负载处理程序尚未到位，您将错过该事件。

此外，旧版本的 IE 不支持`naturalWidth`并且`naturalHeight`它们将始终未定义。而且，您应该使用`onerror`and`onabort`来捕获错误情况。

没有必要为此使用 jQuery。你可以这样做：

```
var img = new Image(),

img.onload = function() {
    alert("loaded successfully");
}
img.onerror = img.onabort = function() {
    alert("broken image");
}
// only set .src AFTER event handlers are in place
img.src = 'http://something.com/images/something.gif'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T05:07:18.130

如果图像损坏，则`onload`不会触发`onerror`事件，而是触发事件。所以你需要这样做：

```
var img = new Image(),
url = 'http://something.com/images/something.gif';

img.onload = function() {
  alert('successfully loaded');
};

img.onerror = function() {
  alert('broken image!');
};

$(img).attr('src', url); 
```

或者使用 jQuery：

```
$(img).load(function() {
  alert('successfully loaded');
}).error(function() {
  alert('broken image!');
}).attr('src', url); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:15:45.787

```
var url="http://something.com/images/something.gif",
    img=new Image;
img.onload=img.onerror=function(ev){
  if(ev.type=="load")alert("successfully loaded");
  else if(ev.type=="error")alert("error loading");
}
img.src=url;
// If image is cached then no `onload` or `onerror` can occur.
if(img.complete){
  alert("successfully loaded");
  img.onload=img.onerror=null;
} 
```

# xpages - 阻止用户在 xpages 中使用分页器导航到另一个文档

> ID：12000021
> 
> 赞同：0
> 
> 时间：2012-08-17T04:58:36.567
> 
> 标签：xpages

我有一个重复控件和一个与之链接的寻呼机。该页面一次显示来自重复控件的一条记录，用户使用寻呼机导航到上一个/下一个文档。用户可以修改文档并单击保存和下一个按钮以保存并导航到下一个文档。

如果他更改表单中的任何字段并单击寻呼机进行导航而不保存更改，我想提醒用户。

有人可以告诉我我该怎么做吗？

问候，

普拉尚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:27:59.540

查看 XPage 的 enableModifiedFlag 属性。更多详细信息，请访问[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.ui.doc/wpd_controls_pref_enablemodifiedflag.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.ui.doc/wpd_controls_pref_enablemodifiedflag.html)

--

您可能需要使用 CSJS 自己触发警告消息。看看这个相关问题的答案：[https ://stackoverflow.com/a/10428881/785061](https://stackoverflow.com/a/10428881/785061)

# java - import com.google.android.maps.geopoint 无法解析

> ID：12000024
> 
> 赞同：13
> 
> 时间：2012-08-17T04:58:54.623
> 
> 标签：java, google-maps, google-maps-api-3, map

我有 Java GoogleMAP 项目。这不是 android 项目。我之前使用 KML 完成了这个项目。现在 Google 已更改为 JSON/XML。我需要将坐标保存在数据库-postgresql 中的 2 个位置内。然后据此，我将在 MAP 中绘制路径。

现在的问题是：`GeoPoint cannot be resolved to a type`。我也这样导入`import com.google.maps.GeoPoint;`。这也显示为红色标记。请让我知道什么是问题或问题？

我谷歌它。没运气。都提到了 android google api 设置。

不是安卓项目...

请帮我..

提前致谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-07T12:43:59.627

转到项目属性，然后转到 Android。选择“Google API”而不是 Android xx 它适用于我，理想情况下也适用于您。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-16T06:26:48.927

您需要使用 Google API 编译您的项目。

1.  安装 Google APIs SDK

[![在此处输入图像描述](../Images/8ac69541eecd6d819851095612231857.png)](https://i.stack.imgur.com/oDM1s.png)

2.  使用 Google API 编译项目项目

[![在此处输入图像描述](../Images/232c006b3cfa0cae0e5aeb685cad3bd8.png)](https://i.stack.imgur.com/954uO.png)

3.  您需要将 Google APIs Add-On 添加到您的项目中。请参阅此文档：[https ://developers.google.com/android/add-ons/google-apis/installing](https://developers.google.com/android/add-ons/google-apis/installing)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-21T06:30:54.417

完全适合我项目属性> android > 平台> Google API 10

和清洁 :) 。首先使用 SDK 管理器下载您需要的 Google API 版本！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T08:45:42.197

确保您`manifest`在应用程序标记内的文件中定义了以下行：

```
<uses-library android:name="com.google.android.maps"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-10T01:54:16.633

我通过“使用 Gradle 文件同步项目”解决了问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T05:00:19.457

您需要在 lib 和 classpath 中添加所需的 jar。因为这些 jar 不在类路径中，所以您的 IDE 无法解析您尝试导入的类的位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-24T16:52:37.250

您需要将 Google APIs Add-On 添加到您的项目中。请参阅此文档：[https ://developers.google.com/android/add-ons/google-apis/installing](https://developers.google.com/android/add-ons/google-apis/installing)

就这样。

# adobe-illustrator - 检测 Adob e AI 和/或 EPS 文件中的不透明度

> ID：12000026
> 
> 赞同：2
> 
> 时间：2012-08-17T04:59:33.537
> 
> 标签：adobe-illustrator, eps

我正在寻找一个非常简单的程序，它可以读取 EPS 和/或 AI 文件，并检测是否正在使用不透明蒙版以及文件中它们的数量（如果可能）。深入研究 EPS 文件规范，如果我可以在 EPS 或 AI 代码中搜索特定指令，我将无法确定。

起初我在想`<xmpTPg:HasVisibleTransparency>True</xmpTPg:HasVisibleTransparency>` ，但即使不存在不透明蒙版，也可以将其设置为 true。

任何熟悉 EPS 或 AI 格式的人都可以为我指明正确的方向吗？

**注意**：我不想操纵这些文件，我只想检测不透明蒙版的存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:47:52.423

您在这个问题上遇到的最根本问题是 Adob​​e 不使用声明性形式（例如，SVG 是），而是使用命令性形式。Postscript 本质上是一种编程语言，用于描述如何绘制图像，而不是描述要绘制什么图像。因此，作为格式本身的一部分，没有一种完全规范的方法来检测是否存在掩码。

也就是说，特定的软件将以一致的方式使用该格式。在这种情况下，您可以将显式规范视为正在发生的事情的一部分，并将观察到的软件行为作为其余部分。因此，假设您想找到*Illustrator 中出现的*不透明蒙版，我想说解决此问题的最佳方法是查看 AI 如何通过观察其行为来保存此类蒙版。也就是说，获取一些没有掩码的现有 AI 文件并制作副本。在 AI 中打开副本，只需执行一项操作即可创建蒙版。节省。现在比较文件的前后版本。在简要查看了 AI 文件格式规范之后，我认为无论如何你都必须做这样的事情，因为 AI 似乎有不止一种方法可以在其保存的文件中实现此类掩码。

# c# - 无法从文本文件中读取一行损坏的文本 - C#

> ID：12000028
> 
> 赞同：0
> 
> 时间：2012-08-17T04:59:42.540
> 
> 标签：c#, regex, winforms, sms, multiline

我将收到的消息添加到通过串行端口从 GSM 调制解调器读取的**文本文件中。****稍后我使用正则表达式**解析这些消息并将它们显示在列表视图中。接收**单行**消息并显示它们都很好，但是当我收到**多行**消息时，我无法阅读它们。我想我应该改变我用来解析的正则表达式。建议请..

```
 public ShortMessageCollection ParseMessages(string input)
    {
        ShortMessageCollection messages = new ShortMessageCollection();
        Regex r = new Regex(@"\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\r\n(.+)\r\n");
        Match m = r.Match(input);
        while (m.Success)
            {
                ShortMessage msg = new ShortMessage();
                msg.Index = m.Groups[1].Value;
                msg.Status = m.Groups[2].Value;
                msg.Sender = m.Groups[3].Value;
                msg.Alphabet = m.Groups[4].Value;
                msg.Sent = m.Groups[5].Value;
                msg.Message = m.Groups[6].Value;
                messages.Add(msg);
                m = m.NextMatch();
            }

        return messages;
     } 
```

`input`是一个字符串变量，它包含从文件中读取的数据。单行消息`input`是这样的：

```
+CMGL: 1,\"REC UNREAD\",\"IA-612345\",\"\",\"2012/08/14 12:56:46+22\"\r\nRecharge with RC45 & get 100 local minutes valid for 15days.For details call 53640 (Toll Free)\r\n\r\n 
```

多行消息是这样的：

```
+CMGL: 1,\"REC READ\",\"+919909965834\",\"\",\"2012/08/17 09:55:29+22\"\r\nHai helo\nthis is a\ntest mesg\r\n\r\nOK\r\n 
```

如何正确完整地阅读多行消息中的消息部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:24:21.980

如果要将 .Net`Regex`与多行文本进行匹配，则需要提供`RegexOptions.Multiline`构造函数参数：

```
public ShortMessageCollection ParseMessages(string input)
{
    ShortMessageCollection messages = new ShortMessageCollection();
    Regex r = new Regex(
        @"\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\r\n(.+)\r\n",
        RegexOptions.Multiline);
    Match m = r.Match(input);
    while (m.Success)
    {
        ShortMessage msg = new ShortMessage();
        msg.Index = m.Groups[1].Value;
        msg.Status = m.Groups[2].Value;
        msg.Sender = m.Groups[3].Value;
        msg.Alphabet = m.Groups[4].Value;
        msg.Sent = m.Groups[5].Value;
        msg.Message = m.Groups[6].Value;
        messages.Add(msg);
        m = m.NextMatch();
    }

    return messages;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:53:55.210

尝试使用这个正则表达式。它包括 \r 和 \n 作为最后一组中的可匹配字符。这样做的一个问题是它过滤掉了 \n 和 \r 字符。如果您还想捕获这些，您可以`?:`从表达式中删除 以使该捕获也有效。

```
"\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\r\n([^\r]+)\r\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:29:54.403

您可能会考虑不尝试使用正则表达式来解决整个问题。看起来您的数据至少有*一部分*是结构化的，因此您可以为此使用正则表达式。对于消息的实际正文，您可以只阅读行直到没有更多行，然后再次匹配标题。

尝试类似：

```
var r = new Regex(@"\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""",
                  RegexOptions.Compiled);
var messages = new ShortMessageCollection();
using (var sw = new StringReader(input))
{
    string currentLine = sw.ReadLine();
    while (currentLine != null)
    {
        var m = r.Match(currentLine);
        if (m.Success)
        {
            // read the first line of the message
            string message = string.Empty;
            currentLine = sw.ReadLine();

            // Append any extra lines to our message, unless it's a new record
            while (currentLine != null && !r.IsMatch(currentLine))
            {
                message += Environment.NewLine;
                message += currentLine;

                currentLine = sw.ReadLine();
            }

            messages.Add(new ShortMessage
                             {
                                 Index = m.Groups[1].Value,
                                 Status = m.Groups[2].Value,
                                 Sender = m.Groups[3].Value,
                                 Alphabet = m.Groups[4].Value,
                                 Sent = m.Groups[5].Value,
                                 Message = message,
                             });
        }
        else
        {
            // TODO: Log that a line didn't match
            // it could be empty or otherwise invalid
            currentLine = sw.ReadLine();
        }
    }
} 
```

这只是您可以做什么的粗略概述。如果您想处理大量数据，我强烈建议您在单个正则表达式上使用这样的方法（不一定是此代码）。这使用了 TextReader，因此如果您从几 GB 大的文件中逐行读取，它将立即起作用。

# flash - 无法解决 到组件实现

> ID：12000031
> 
> 赞同：0
> 
> 时间：2012-08-17T05:00:03.290
> 
> 标签：flash, apache-flex, compiler-errors, adobe, xml-namespaces

我的 flex 源文件夹 'src' 有这些文件：

```
src/
  chatters.as
  chatters.mxml
  main.as
  main.mxml 
```

这是“chatters.mxml”的来源：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"  
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" 
         width="250" height="200"
         contentBackgroundColor="#abcdef">
</s:Group> 
```

这是'main.mxml'的来源：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       xmlns:local="*"
                       applicationComplete="run();">    
    <local:chatters>        
    </local:chatters>
</s:WindowedApplication> 
```

所有文件 chatters.as、chatters.mxml、main.as、main.mxml 都在默认包下，默认包的 XML 命名空间在 main.mxml 中设置为 xmlns:local="*"。

但是，我收到错误消息：在 main.mxml 中创建“chatters”组件时，**无法将 <local:chatters> 解析为组件实现。**

一切都在默认包中，xmlns 已经定义，flash builder 怎么会显示这样的错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:26:08.107

也许它对使用哪个类感到困惑。您的`src/`目录似乎有一个`chatters.as`and `chatters.mxml`。其中每一个都定义了一个名为`chatters`.

我只是尝试创建一个与 MXML 文档同名的 Actionscript 类，但 Flash Builder 不允许我这样做。希望有一个关于你是如何做到这一点的有趣故事:)

当 2 个文件 .as 和 .mxml 在同一个文件夹中具有相同的名称时，Flash builder 会感到困惑。

# php - 使用 thumb.php 时缺少图像质量

> ID：12000035
> 
> 赞同：0
> 
> 时间：2012-08-17T05:00:15.957
> 
> 标签：php

我正在使用 thumb.php 来限制图像大小。

```
<img src="thumb.php?src=<?php echo $imgurl; ?>&h=150&w=180&z=0" alt="<?php the_title(); ?>" width="180" height="150" /> 
```

问题是图像质量。如果我不使用 thumb.php 并直接在图像标签中提及宽度和高度属性，质量很好，但使用 thumb.php 时，图像看起来有点模糊。

如何克服这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:26:10.180

我在您的脚本上看到了 quality 参数，它是**q**，将其附加到 url

```
<img src="thumb.php?src=<?php echo $imgurl; ?>&h=150&w=180&z=0&q=100" alt="<?php the_title(); ?>" width="180" height="150" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:50:02.180

我已经使用锐化参数解决了这个问题。

&h=150&w=180&z=0&q=100&s=100" alt="" width="180" height="150" />

谢谢。

# android - 无法在 Android 中加载 JSON 数据

> ID：12000039
> 
> 赞同：0
> 
> 时间：2012-08-17T05:00:30.297
> 
> 标签：android, json

我是 JSON Parsing 的新手，在从 JSON URL 检索数据时需要一些帮助......我已经阅读了许多关于 JSON Parsing 的教程，它们都对我有很大帮助，但我没有被卡住......我正在尝试从一个

```
URL = "http://mygogolfteetime.com/iphone/topfive/155" 
```

但我在日志中`Json object`返回**空值。**

但是我可以从另一个检索相同的数据

```
URL = "http://api.mygogolfteetime.com/top_5.php?id=155&apikey=eart3562@#bety7*&6b12zAf*&etrqvbn*&LMQW" 
```

我还附上了我的代码，以便可以帮助我解决我的问题..

我的测试活动的代码：

```
public class TestActivity extends Activity {

private static final String url = "http://mygogolfteetime.com/iphone/topfive/155";
private static final String TAG = "Top5";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.v(TAG, "URL: "+String.valueOf(url));
    JsonParser jParse = new JsonParser();
    JSONObject json = jParse.getJSONfromUrl(url);
    Log.v(TAG, "Json: "+String.valueOf(json));
    }
} 
```

这是我的 JsonParser 活动的代码：

```
public class JsonParser {

    static InputStream is;
    static JSONObject jObj;
    static String json = null;
    private static final String TAG = "Top5";

    public JSONObject getJSONfromUrl(String url)
    {
        try
        {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }
        catch(UnsupportedEncodingException e)
        {
            e.printStackTrace();
        }
        catch(ClientProtocolException e)
        {
            e.printStackTrace();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }

        try
        {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

        try
        {
            jObj = new JSONObject(json);
        }
        catch(JSONException e)
        {
            e.printStackTrace();
        }
        return jObj;
    }
} 
```

我还在 Manifest 文件中添加了 Internet 权限...

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

提前致谢...

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:19:59.000

您可以使用以下函数来获取 JSON 响应 JSONArray/JSONObject

```
public Object request(String url) {

            try {
                DefaultHttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(url);
                HttpResponse response = client.execute(get);

                if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                    String strRes = EntityUtils.toString(response.getEntity());
                    Object resObj = strRes.startsWith("[") ? new JSONArray(
                            strRes) : new JSONObject(strRes);
                    return resObj;
                }

                return response;
            } catch (Exception e) {
                return null;
            }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:41:00.713

请检查这个...

```
public class Top5  extends Activity {

    private static final String TAG = "Top5";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //    Log.v(TAG, "URL: "+String.valueOf(url));
        //    JsonParser jParse = new JsonParser();
        //    JSONObject json = jParse.getJSONfromUrl(url);
        //    Log.v(TAG, "Json: "+String.valueOf(json));

        try {

            System.setProperty("http.keepAlive", "false");
//          URL url = new URL(url .toString());
            URL url = new URL("http://mygogolfteetime.com/iphone/topfive/155");
            HttpURLConnection connection = (HttpURLConnection)url.openConnection();
            connection.setUseCaches(false); 
            connection.setRequestMethod("GET");
            connection.setDoOutput(true);
            connection.setDoInput(true);
            connection.setConnectTimeout(10000);
            connection.connect();
            System.out.println("Connection :"+connection.getResponseCode());

            String rawObjects = readZipStream(connection.getInputStream());

            Log.i("ROW OBJECT::::::::::::","************"+rawObjects);
        } catch (Exception exception) {

            exception.printStackTrace();
        }
    }

    private static String readZipStream(InputStream is) throws IOException,
    ParseException {

        StringBuilder rawObjects = new StringBuilder();

        InputStream zis = new BufferedInputStream(is);
        BufferedReader br = new BufferedReader(new InputStreamReader(zis));
        try {

            String readedLine;
            while ((readedLine = br.readLine()) != null) {
                System.out.println("readedLine :"+readedLine);
                if (readedLine != null && readedLine.trim().length() > 0) {
                    rawObjects.append(readedLine);
                }
            }

        } catch (IOException e) {
            throw new IOException(e.getMessage());
        } finally {
            close(br);
            close(zis);
        }
        return rawObjects.toString();

    }
    private static void close(InputStream inputStream) {
        try {
            if (inputStream != null) {
                inputStream.close();
            }
        } catch (Exception exception) {

        }
    }

    private static void close(Reader reader) {
        try {
            if (reader != null) {
                reader.close();
            }
        } catch (Exception exception) {

        }
    }
} 
```

结果是这样的::

```
08-17 11:07:20.828: INFO/System.out(455): readedLine :{"top5":[{"course_id":"127","member_id":"155","created_date":"1345098492","status":"1","golfcourse_name":"SilverHorn Golf Club","facilities":"","holes":"0"},{"course_id":"93","member_id":"155","created_date":"1345098472","status":"1","golfcourse_name":"sonu","facilities":"4","holes":"0"},{"course_id":"89","member_id":"155","created_date":"1344838832","status":"1","golfcourse_name":"ranjeet golf course","facilities":"4","holes":"9"}]} 
```

# javascript - 使用 JavaScript 读取 xml 中的 UTF-8 十六进制代码

> ID：12000040
> 
> 赞同：0
> 
> 时间：2012-08-17T05:00:31.153
> 
> 标签：javascript, utf8-decode

我有一个 xml 文件，其中包含 En Dash 和 Em Dash 字符作为元素文本的一部分。它们正在转换为 UTF-8 代码，如下所示。

```
<TextValue>This is an En Dash:  \xE2\x80\x93    This is an Em Dash: \xE2\x80\x94.</TextValue> 
```

我想使用 JavaScript 处理那些 UTF-8 十六进制代码，并用我想要的任何自由文本替换它们。

任何人都可以建议这样做的方法吗？我尝试使用 RegEx，但无法解析这些代码。不过，我可以使用 RegEx 处理任何其他文本。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:21:44.283

[演示](http://jsfiddle.net/mplungjan/EBTCp/)

```
var text = "<TextValue>This is an En Dash:  \xE2\x80\x93    This is an Em Dash: \xE2\x80\x94.</TextValue>"

var fromArr = ["\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"],
    toArr = ["'", "'", '"', '"', '-', '--', '...'];

    for (var i=0;i<fromArr.length;i++) {
        text = text.replace(fromArr[i],toArr[i],"g")
    }
        alert(text) 
```

改成

```
 var fromArr = ["\xe2\x80\x93", "\xe2\x80\x94"], toArr = [ '-', '--']; 
```

如果您不需要*智能引号*和*省略号*

结果：

![在此处输入图像描述](../Images/40e87dd42e4b0cf75feecb29635a8f98.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:53:22.313

我终于通过阅读 UTF-8 中的消息正文并使用以下几行替换 unicodes 而逃脱了。

```
body = body.replace(/\u00E1/g,"a");  //LATIN SMALL LETTER A WITH ACUTE
body = body.replace(/\u00E2/g,"a");  //LATIN SMALL LETTER A WITH CIRCUMFLEX
body = body.replace(/\u00E3/g,"a");  //LATIN SMALL LETTER A WITH TILDE
body = body.replace(/\u201D/g,"\"");  //RIGHT DOUBLE QUOTATION MARK
body = body.replace(/\u201C/g,"\"");  //LEFT DOUBLE QUOTATION MARK
body = body.replace(/\u2424/g," ");  //NEW LINE \n
body = body.replace(/\u000D/g," ");  //CARRIAGE RETURN \r 
```

# c++ - C++ 运算符编译错误

> ID：12000043
> 
> 赞同：1
> 
> 时间：2012-08-17T05:01:19.267
> 
> 标签：c++, xcode, operator-overloading, llvm

我正在尝试编译一个在 Xcode 中使用 OpenCV C++ 代码的项目。

```
template<typename _Tp> inline MatND_<_Tp>& MatND_<_Tp>::operator = (const MatND& m)
{
    if( DataType<_Tp>::type == m.type() )
    {
        Mat::operator = (m);
        return *this;
    }
    if( DataType<_Tp>::depth == m.depth() )
    {
        return (*this = m.reshape(DataType<_Tp>::channels));
    }
    CV_DbgAssert(DataType<_Tp>::channels == m.channels());
    m.convertTo(*this, DataType<_Tp>::type);
    return *this;
} 
```

在这里，它在“Mat::operator = (m);”行上给了我一个编译器错误“调用没有对象参数的非静态成员函数”

代码没有损坏，我[在这里](https://code.ros.org/trac/opencv/browser/trunk/opencv/include/opencv/cxmat.hpp?rev=2264#L590)验证了它。

另一个有趣的是，如果我选择编译器为 LLVM GCC 4.2，那么代码可以正常工作，但是在使用 Apple LLVM 编译器 3.2 编译时出现此错误。我需要使用 Apple LLVM 编译器进行编译，因为使用 GCC 编译会产生其他问题。

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:04:58.473

你需要使用

this->Mat::operator = (m);

当您在模板化成员函数中时，编译器不知道您的基类是什么。看起来您正在尝试调用静态成员函数，但 Mat::operator=() 不是静态的，因此它会给您该错误。通过使用 this->Mat::operator=(m)，编译器现在知道您实际上是在尝试调用非静态成员函数。

使用较旧的编译器，第一次遇到模板时检查的次数较少。它们在很大程度上只是存储为一个大的标记序列，并且只有在模板被实例化时才进行任何检查。C++ 标准现在要求模板在实例化之前完成一定数量的检查，这使得像这样的某些技巧是必要的。

# java - 将对象添加到查找

> ID：12000044
> 
> 赞同：0
> 
> 时间：2012-08-17T05:01:22.280
> 
> 标签：java, netbeans-platform

我想在模块中创建一个对象，然后通过查找将其提供给其他模块。我知道如何从查找中检索对象，但我不知道如何将对象放入其中。

谁能告诉我程序？

让我更具体地说明我真正想做的事情：

我已经知道如何在 Netbeans 平台应用程序中选择（通过使用“收藏夹”模块）和编辑（在“多视图”中）文件。但不是在资源管理器对象中选择要编辑的文件，而是希望能够通过“文件/打开”菜单项来选择它。此菜单项将调用打开文件对话框，并且用户选择的文件将添加到查找以供视图使用。有可能吗？如果有，怎么做？

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:39:54.290

你可以添加到你自己`AbstractLookup`的`InstanceContent`，你只能做......

```
final InstanceContent content = ...;
content.add(instance);
final Lookup lookup = new AbstractLookup(content); 
```

通常，在使用时`AbstractLookup`，我**认为**您可以实现自己的在创建时间*后*`AbstractLookup.Pair`添加。

 *```
final AbstractLookup lookup = ...;
lookup.addPair(new AbstractLookup.Pair<MyObject>() {

  final MyObject inst = ...;

  protected boolean creatorOf(final Object inst) {
    return this.inst == inst;
  }

  protected boolean instanceOf(final Class<?> cls) {
    return cls == MyObject.class;
  }

}); 
```*

# java - Servlet POST 数据根据调用者进行裁剪

> ID：12000048
> 
> 赞同：0
> 
> 时间：2012-08-17T05:01:45.390
> 
> 标签：java, tomcat, servlets, ubuntu, apache2

我编写了一个 Servlet，它只是将 POST-Request 的整个原始流记录到一个文件中。很简单。在我的开发机器上工作正常。如果我使用 Tomcat 5.5 和 Apache2 在我的 UBUNTO-Server 上部署它，我会得到以下奇怪的结果：

如果我将某些内容从 localhost 直接发布到“tomcat”，一切正常。

如果我通过本地 apache 从 localhost 发布一些内容，则只有 8K 的数据进来。

如果我从外部发布一些东西，只有 1.5K 进来。

我检查了每个配置文件是否有任何可以通过研究找到的限制，但没有任何限制。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:43:13.083

我承认我不确定是哪个限制导致了这种行为，但我建议明确设置 LimitRequestFieldSize（比如说 9K）和 LimitRequestLine（比如说 12K），因为两者都默认为 8190（大约你8K），因为您的检查已经表明，Apache WS 似乎导致了问题。（另请参阅[HTTPD 文档](http://httpd.apache.org/docs/current/mod/core.html#limitrequestbody)）

提议的新值完全是任意的，但应该有所不同，以便找出两者中的哪一个真正导致问题 8-)。

当您说“来自外部”时，我想还有一个额外的 WebServer 涉及。

希望有帮助！

# performance - expressjs压力测试

> ID：12000049
> 
> 赞同：1
> 
> 时间：2012-08-17T05:02:00.033
> 
> 标签：performance, node.js, express

我很难确定我的网络服务器（Cherokee）和 expressjs 网站之间的性能瓶颈。

由于 POST 流量的增加，我们开始时不时地看到性能问题。所以我设计了一个测试，看看网站的 1、2、3 和 4 个实例的断点是什么，并对糟糕的性能感到震惊（每秒 5 个运行良好，每秒 10 个运行非常差）。

根据我的性能记录，一个完整的请求从开始到结束需要在 1000-4000 毫秒之间开始，并且在短时间内开始以线性趋势增加，因此大约 5 分钟后请求需要 40,000-60,0000 毫秒。expressjs 网站记录中从开始到结束请求的性能日志记录需要 100-400 毫秒（其中大部分时间 90-390 毫秒用于等待 Java API 响应）。

我已经研究了连接池/最大套接字，但是不明白如何使用 express 配置它，并且随着流量的不断增长，我开始感受到网站每次性能下降带来的热量。

现在我有两个理论： 1.压力测试代码确实有问题；2\. 压测app或者expressjs发送请求时，连接池很小。

如果以上任何一个都是真的，我不知道如何解决这些问题。

-- 压力测试应用 --

```
/*
 * POST stress testing
 */
var rest            = require( "restler");
var u               = require( "../underscore")._;
var uuid            = require( "node-guid" );
var fs              = require( "fs" );
var quoteContent    = fs.readFileSync( __dirname + "/data/quoteList.json" );
var quotes          = JSON.parse( quoteContent ).quotes;
var feedListContent = fs.readFileSync( __dirname + "/data/feedList.json" );
var feeds           = JSON.parse( feedListContent ).feeds;
var feedLength      = feeds.length;

var experiment      = { "users": 2, "frequency": 1000 };

// Clear memory out  bit
quoteContent        = null;
feedListContent     = null;

console.log("Concurrent users:", experiment.users);
console.log("Every          :", (experiment.frequency / 1000) + " seconds" );

setInterval(
    function()
        {
            var rndQuote;

            for(i=0;i<experiment.users;i++)
                {
                    delayPost( (experiment.frequency) / (experiment.users + 1) );
                }
        }
, experiment.frequency);

function delayPost( delay )
    {
        setTimeout(
            function()
                {
                    rndQuote = getRandomQuote();
                    postToRandomFeed( rndQuote );
                }
        , delay );
    }

function getRandomQuote()
    {
        var n = Math.floor( Math.random() * feedLength );
        return quotes[n];
    }

function postToRandomFeed( theQuote )
    {
        var n           = Math.floor( Math.random() * feedLength );
        var feed        = feeds[n];

        var     kloudId = feed.kloudId
            ,   feedId  = feed._id
            ,   uid     = feed.owner["$oid"]
            ,   url     = "quote://" + uuid.new() // Generate random URL
            ,   quote   = theQuote.quote
            ,   author  = theQuote.author;

        var     data    = { "url" : url, "title": quote, "text": quote, "tags": [author], "feeds": [ feedId ] }
            ,   postTo  = [ "http://127.0.0.1:4100/api/content/post/" + uid + "/wintermead" /*, "http://127.0.0.1:4101/api/content/post/" + uid + "/wintermead"*/ ]
            ,   ports = [ 4100 ];

        var st = gt();

        var postUrl = postTo[ Math.floor(Math.random()*postTo.length) ];

        console.log( postUrl );

        rest.post( postUrl,
            {
                  "data": data
                , "headers":
                    { "kloudid": kloudId, 'Connection':'close', 'Connection-Timeout': 10 }
            }
        ).on('complete',
            function( data, response )
                {
                    gt( "end: ",st );
                    if (response.statusCode == 202 ||response.statusCode == 201 || response.statusCode == 200)
                        {
                            try {
                                data =JSON.parse( data );
                            } catch(e) {}

                            if( data && data.error )
                                console.log( "1", data.message );
                            else
                                console.log( "2", data._id );
                            // you can get at the raw response like this...
                        }
                    else
                        {
                            console.log( "! Error ", response.statusCode, data );
                        }
                }
        );
    }

function gt( name, lastTime )
    {
        if( !name || name=="start" )
            {
                var d = new Date().getTime();
                var uu = uuid.new();
                return (d + "|" + uu);
            }
        else if( lastTime )
            {
                var props   = lastTime.split("|");
                var time    = parseInt(props[0]);
                var uu      = props[1];
                console.log( uu, name, ( new Date().getTime() - time ));
            }
        else
            {
                console.log( "logging: invalid start time  " + name);
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:28:34.870

您是否考虑过使用现有的压力测试工具，例如[ab (apache bench)](http://httpd.apache.org/docs/2.2/programs/ab.html)或[siege](http://www.joedog.org/siege-home/)？

我知道自己编写很诱人，但现有的很可靠，您可以专注于修复您的网站而不是负载测试工具。

# excel - Excel：使用 vba 添加评论作者

> ID：12000052
> 
> 赞同：0
> 
> 时间：2012-08-17T05:02:12.413
> 
> 标签：vba, excel, comments, vba

当我手动向单元格添加评论时（使用插入评论命令），文本前面是我的粗体用户名。

是否可以使用（对于运行宏的任何用户）为在[vba](/questions/tagged/vba "显示标记为“vba”的问题")中创建的评论复制此特性？`Range.AddComment()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T05:21:38.263

您可以像这样添加登录的用户名（用户名以粗体显示） - 此示例适用于单元格 A1：

```
Sub EasyTest()
Dim shCmt As Comment
On Error Resume Next
Set shCmt = [a1].Comment
On Error GoTo 0
If shCmt Is Nothing Then
Set shCmt = [a1].AddComment
shCmt.Text Text:=Environ$("UserName") & Chr(10) & "TestMe"
shCmt.Shape.TextFrame.Characters(1, Len(Environ$("UserName"))).Font.Bold = True
Else
MsgBox "cell already has a comment"
End If
End Sub 
```

# iphone - 如何在 iPhone 中以无符号字节格式传递 UIIImage

> ID：12000053
> 
> 赞同：0
> 
> 时间：2012-08-17T05:02:23.383
> 
> 标签：iphone, uiimage, nsdata

我正在制作一个应用程序，其中用户从照片库中选择一张图像，然后该图像需要使用肥皂在 Web 服务器上传递，图像以无符号字节传入肥皂的格式，我已将 UIImage 转换为 NSData，现在我该怎么做在 Web 服务器中将该 NSData 作为无符号字节格式传递。

请帮助我，因为我真的被这个问题困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:37:51.027

**编辑：** uint8 的标识符将是 %s

做这个：

```
NSData *data = UIImagePNGRepresentation(yourImage);
if(data)
{
  Byte *byteData = (Byte*)malloc([data length]); // unsigned byte
  memcpy(byteData, [data bytes], [data length]);
} 
```

# asp.net-mvc-3 - chrome中的TempData问题

> ID：12000055
> 
> 赞同：0
> 
> 时间：2012-08-17T05:02:41.987
> 
> 标签：asp.net-mvc-3

我以下列方式使用了 TempData：

```
Controller:
TempData["Error"]="First error";

View:
var error=TempData["Error"];
@error 
```

上面的代码与 IE 完美配合。但在 chrome 中，不会显示 TempData。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:46:38.953

通常应避免使用 Tempdata 和 Viewdata，因为它不是强类型的，并且会在不好的地方潜入代码中。避免它并使用视图模型将数据传递给您的视图。

在您的控制器中：

```
var model = new YourViewModel();
model.Error = "你的消息";
返回视图（模型）；

```

但是，在不知道您使用它的目的的情况下，可能会有更好的方法。你吃的东西试图设计的更大的图景是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:07:44.760

首先，我认为您不应该`TempData`为此使用。

对于您的问题，以下是您应该使用的。

**控制器**

```
ViewBag.Error="First error"; 
```

**看法：**

```
@ViewBag.Error 
```

希望这可以帮助。

**更新**：[请参阅这篇文章](http://yassershaikh.com/how-to-pass-values-from-controller-to-view-using-viewbag-in-mvc-3/) 理想情况下，上面的代码应该可以工作，但你说它没有。我可以看看你是怎么称呼你的观点的吗？以及更多您的代码。

# c# - 对“CheckBoxList”中的项目进行排序

> ID：12000060
> 
> 赞同：1
> 
> 时间：2012-08-17T05:03:16.790
> 
> 标签：c#, asp.net

我有一个`DropDownList`，列表中的项目如下：

```
Bedroom
Kitchen
Garden 
```

因此，在从上面的列表中选择任何一项后，我有一个`TextBox`，其中给出了一个数字。因此，根据 中给出`TextBox`的数字，位置的数量将被添加到`CheckBoxList`.

例如，如果我选择“卧室”并将数字设为“3”，则`CheckBoxList`项目将如下所示：

```
Bedroom1
Bedroom2
Bedroom3 
```

我面临的问题是，由于可以从 中删除任何随机项目`CheckBoxList`，因此项目没有排序。例如，如果我删除“Bedroom2”，列表项将是：

```
Bedroom1  
Bedroom3 
```

如果再次从中选择“卧室”`DropDownList`并给出一个数字，例如“2”，则其中的项目`CheckBoxList`将是：

```
Bedroom1
Bedroom3
Bedroom1
Bedroom2 
```

无论我从`DropDownList`.

所以有人可以帮助我对这些项目进行排序，无论它们是如何添加的。它应该根据 wrt 中的每个位置进行排序`DropDownList`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T05:21:31.993

尝试这个

```
 var items = CheckBoxList1.Items
            .Cast<ListItem>()
            .OrderBy(i=>i.Text)
            .ToArray();
        CheckBoxList1.Items.Clear();
        CheckBoxList1.Items.AddRange(items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:22:58.153

您可以在将项目添加到 CheckBoxList 之前将它们添加到**ArrayList 。**然后对数组列表进行排序，然后将 DataSource 提供给 CheckBoxList 和 DataBind()

```
 if(!Page.IsPostBack)
 {  
        //Create two ArrayLists for sorting items
        ArrayList listItems1 = new ArrayList();
        ArrayList listItems2 = new ArrayList();

        int q1=Convert.ToInt16(TextBox1.Text);
        for (int i = 1; i <= q1; i++)
        { 
            string t1 = DroDownList1.SelectedItem.ToString().Trim();
            //Add items hereusing .Add() method of ArrayList
            listItems1.Add(string.Concat(t1, i));
            listItems2.Add(DropDownList1.SelectedItem.Text);
        }

        //Sort your items using .Sort() method of ArrayList
        listItems1.Sort()
        listItems2.Sort()

        //Bind your items to your CheckBoxLists
        CheckBoxList1.DataSource = listItems1;
        CheckBoxList2.DataSource = listItems2;  
        CheckBoxList1.DataBind();
        ChackBoxList2.DataBind();  
    } 
```

这是原始[链接](http://asp-net-example.blogspot.com/2008/12/aspnet-arraylist-and-checkboxlist.html)。

# dependency-injection - @EJB 依赖注入失败

> ID：12000061
> 
> 赞同：0
> 
> 时间：2012-08-17T05:03:37.663
> 
> 标签：dependency-injection, ejb-3.0, java-ee-5

我正在尝试使用`@EJB annotation`无状态 bean 来调用。当我打印引用的值时，它是**NULL**。请帮助我，我完全不知道下一步该怎么做......

代码 ：

```
@Local
public interface BatcRunLocal {
    public void call(Map batc);
}

@stateless
public class batcRunBean implements BatcRunLocal {
    public void call(Map batc) {
        //Some code here . 
    }
} 
```

在 Struts2 Action Class 中， **我是这样调用的：**

```
 @EJB
package.BatcRunLocal batchRun;

batchRun.call(Map batc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:36:04.053

> 在 Struts2 Action Class 中，我是这样调用的：

对不起，但我不认为容器可以注入 Struts2 动作。只有容器管理的资源才能注入资源。例如，servlet、CDI bean、EJB、JAX-RS 等等。

所以，我会尝试创建一个简单的 servlet 来注入 EJB。如果它确实被注入，那么一切正常，只是 Struts2 Action 类不是由容器管理的。如果它仍然为空，那么您确实有问题，我建议您查看日志以查看部署失败的位置。

如果您使用的是 JBoss AS，您会在日志中注意到是否部署了 EJB：JBoss AS 对此非常直言不讳 :-)

我同意@Richard Sitze 的观点：阅读一些关于 Java 命名约定的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:08:37.020

更改`@stateless`为`@Stateless`。

* * *

此外，您可能会更加关注代码风格。在这种情况下，类名 (batcRunBean) 应该以大写字母开头：`BatcRunBean`.

# android - 如何使用 Twitter4j api 回复推文？

> ID：12000063
> 
> 赞同：8
> 
> 时间：2012-08-17T05:03:59.567
> 
> 标签：android, twitter4j

我在推特上工作，我有访问令牌，现在我也收到了推文我想像我们在推特网站上所做的那样回复推文状态请帮我解决这个问题谢谢..

```
public void tweetReply() {
    try {
        // System.out.println("Post Id= " + itemsObj.postId);
        AccessToken a = new AccessToken(twittertokens[0], twittertokens[1]);
        Twitter twitter = new TwitterFactory().getInstance();

        twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);
        Long id = new Long("236178766597087234");
        twitter.updateStatus(new StatusUpdate("@lalitrajput024  this is to test For reply option ").inReplyToStatusId(id));

    } catch (Exception e) {
        // TODO: handle exception
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T08:23:47.400

我也遇到了这个问题，然后我尝试在文本本身中使用处理程序。现在它似乎正在工作。

```
public static void reply(long inReplyToStatusId,String text,double latitude,double longitude,TwitterFactory factory) throws TwitterException
{   AccessToken accessToken = loadAccessToken();
    Twitter twitter = factory.getInstance();
    twitter.setOAuthConsumer(consumerKey, consumerSecrate);
    twitter.setOAuthAccessToken(accessToken);

    StatusUpdate stat= new StatusUpdate(text);

    stat.setInReplyToStatusId(inReplyToStatusId);

    GeoLocation location= new GeoLocation(latitude, longitude);
    stat.setLocation(location);

    twitter.updateStatus(stat);
 }' 
```

我称它为

```
 reply(238912922250792960l, "@praveena_kd testing reply", 12.787, 77.7578, factory); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-20T12:30:03.057

我没有足够的声誉来发表评论，所以我把它作为答案，因为我坚持了一段时间。@praveena_kd 所述的此代码有效。

```
String answer = "replying to @" + userNick + ": ...";
StatusUpdate statusReply = new StatusUpdate(answer);
  statusReply.setInReplyToStatusId(statusId);
  try {
    twitter.updateStatus(statusReply);
      } catch (TwitterException ex) {
      // handle exception
  } 
```

但是您必须注意将*@UserScreenName*放在回复中，否则它不会出现在发件人时间线上！在哪里

```
String userNick = status.getUser().getScreenName(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-22T16:07:20.380

您需要将用户名添加到响应中，在***Twitter4j***中，这称为`screenName`

### 例如：

`String username = status.getUser().getScreenName();`

`String answer = "@".concat(username).concat(" Here goes your response ");`

# java - Java servlet java.lang.UnsupportedClassVersionError

> ID：12000064
> 
> 赞同：0
> 
> 时间：2012-08-17T05:04:00.750
> 
> 标签：java, debugging, servlets

我得到以下堆栈跟踪

```
java.lang.UnsupportedClassVersionError: Bad version number in .class file
java.lang.ClassLoader.defineClass1(Native Method)
java.lang.ClassLoader.defineClass(ClassLoader.java:620)
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
             org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1634)
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:860)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1307)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1189)
java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
Server$Connector.<init>(Server.java:137)
Server$Connector.<init>(Server.java:134)
Server.<init>(Server.java:79)
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
java.lang.reflect.Constructor.newInstance(Constructor.java:494)
java.lang.Class.newInstance0(Class.java:350)
java.lang.Class.newInstance(Class.java:303)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)
org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
java.lang.Thread.run(Thread.java:595) 
```

相关线路是

```
connector = new Connector(); // Server.java line 79 (constructor)
private class Connector { // Server.java line 134
    private List<GameParticipant> activePlayers = new    ArrayList<GameParticipant>();
    private List<GameParticipant> observers = new ArrayList<GameParticipant>();
    private SquareValue nextPlayerToBeAssigned = SquareValue.BLACK; // Server.java line 137 
```

附带说明一下，我在本地机器上编译了所有内容，然后在服务器上复制了 .class 文件。这可能是问题的根源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:09:13.480

```
java.lang.UnsupportedClassVersionError: Bad version number in .class file 
```

似乎您的类是用比您的运行时版本更高的版本编译的。如果您使用的是 eclipse，请查看此[讨论](https://stackoverflow.com/questions/2466828/java-lang-unsupportedclassversionerror-bad-version-number-in-class-file)。

# symfony1 - symfony 在哪里包含内核类？

> ID：12000067
> 
> 赞同：0
> 
> 时间：2012-08-17T05:04:22.460
> 
> 标签：symfony1

symfony 在哪里包含 AppKernel 类中使用的内核类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:40:18.097

在控制器中：[https ://github.com/symfony/symfony-standard/blob/master/web/app.php#L15](https://github.com/symfony/symfony-standard/blob/master/web/app.php#L15)

# reporting-services - SSRS 管理站点的 SSO

> ID：12000068
> 
> 赞同：4
> 
> 时间：2012-08-17T05:04:23.887
> 
> 标签：reporting-services, ssrs-2008, single-sign-on, ntlm

我们的 Web 应用程序使用 NTLM 身份验证并且它正在工作。是否可以使用相同的登录凭据自动登录到报表管理器，实际上我们希望能够从我们的 Web 应用程序导航到报表管理器而无需再次登录。任何解决方案。非常感谢。有人可以帮我添加正确的标签吗？我已经加了一些，但怕不合适。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T17:29:57.670

如果您想对报表管理器执行单点登录，那么实现此目的的方法是实施 Microsoft 提供的自定义安全扩展。这是标准解决方案。您可以在此处获取实施详细信息[http://www.codeproject.com/Articles/675943/SSRS-2012-Forms-Authentication](http://www.codeproject.com/Articles/675943/SSRS-2012-Forms-Authentication)

此外，正如您提到的，如果您不想包含复杂性并保持简单，只需通过获取验证页面的 DOM 并处理点击来实现登录。但是，该方案仅在您确定网页中标签的命名时才有效。

检查下面的示例

```
public MainWindow()
{
InitializeComponent()
WinFormWebBrowser.Navigate(Url);
WinFormWebBrowser.DocumentCompleted += WinFormWebBrowser_DocumentCompleted;
}

void WinFormWebBrowser_DocumentCompleted(object sender, System.Windows.Forms.WebBrowserDocumentCompletedEventArgs e)
        {
            try
            {
                    HtmlElement ele = WinFormWebBrowser.Document.GetElementById("email");
                    if (ele != null)
                        ele.InnerText = "username";

                    ele = WinFormWebBrowser.Document.GetElementById("pass");
                    if (ele != null)
                        ele.InnerText = passWord;

                    ele = WinFormWebBrowser.Document.GetElementById("loginbutton");
                    if (ele != null)
                        ele.InvokeMember("click");
                WinFormWebBrowser.DocumentCompleted -=WinFormWebBrowser_DocumentCompleted;

            }
            catch
            {

            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T18:05:29.613

Reporting Services 主要是一个 Intranet 应用程序，因此默认安全性是 Windows Auth。当然，Reporting Services 是可扩展的，也可以通过 Internet 访问，但为此，用户要么必须输入 Windows 凭据（NTLM 或 Basic），要么必须重写 RS 的身份验证机制。如果您的应用程序在 Forms Auth 上，您可以在 RS 上进行类似的身份验证，同时将身份验证 cookie 从您的应用程序传递到 RS 的身份验证扩展。Alex 分享的来自 codeplex 的 FBA 示例可能是您的起点。

您可能还想知道，您可以将 RS 的功能封装在您的应用程序中，用户永远不会直接访问 RS，但您的应用程序会通过 RS 的[SOAP API](http://msdn.microsoft.com/en-us/library/ms153968%28v=SQL.90%29.aspx)调用 RS 及其报告。

# c++ - 循环生成集合

> ID：12000071
> 
> 赞同：0
> 
> 时间：2012-08-17T05:04:52.673
> 
> 标签：c++, set

是否可以在循环中生成集合，其中循环为集合提供新名称？我正在尝试执行以下操作：

```
//create storage structure for options according to hops
int lengthOfStart = start.length();
for (int i = 0; i<start.length();++i) {
    string nameOfSet = "Hop" + i;
    Set<string> nameOfSet;        
    wordLadderOptions.enqueue(nameOfSet);

} 
```

我使用的是传统 c++ 集合的略微修改版本，它只是提供了更多数据操作功能，但除此之外，该集合与内置于 c++ 标准库的集合相同。当我说`Set<string> nameOfSet;`编译器将此视为集合的实际名称而不是变量时...

我怎样才能让它把它看作一个变量，以便根据变量 i 的值在 for 循环中创建集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:09:33.193

编译后 C++ 中不存在变量名（调试信息除外）。所以你的要求不是很有意义。也许您想将每个集合与一个名称相关联并将它们粘贴在一个`map<string, Set>`?

在像 Python 这样的语言中，它确实可以让你做到这一点，这就是幕后发生的事情。唯一的区别是变量名称在运行时在字典中隐式查找。

# java - JAVA JAI：在 Jai Jars 和 Jai Setups 之间，我应该使用什么来获得更快、更有效的结果？

> ID：12000074
> 
> 赞同：2
> 
> 时间：2012-08-17T05:05:02.453
> 
> 标签：java, jar, installation, jai

我在我的应用程序中使用了 jai（Java Advance Imaging）。

当我使用 jai 设置时，我觉得我的图像处理速度更快，但它需要将这些设置安装在用户计算机中。

而且当我使用 jai 的罐子时，它不需要任何安装，但图像处理有点慢。

那么我应该使用什么方法来获得更快和更有效的结果？

有什么方法可以静默安装 jai 设置，在灌输时不需要任何用户交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:49:17.433

我认为您看到的性能差异是由 JAI 在有或没有硬件加速的情况下运行引起的。要获得硬件加速，您必须：

*   或将 JAI 安装到 JRE（然后将正确的 JAR/DLL/SO 文件复制到 JRE，然后可供任何 Java 应用程序使用）
*   或为您的 java 应用程序提供 JAR/DLL/SO 文件。在这种情况下**不需要安装！**

要实施第二个选项，您必须：

*   包含 `jai_codec-1.1.3.jar jai_core-1.1.3.jar mlibwrapper_jai.jar` 到您的应用程序并将它们添加到类路径中
*   放入 `libmlib_jai.so mlib_jai.dll mlib_jai_mmx.dll mlib_jai_util.dll` 应用程序的工作文件夹

如果您在 Lynux 上运行，您可能需要`LD_LIBRARY_PATH`使用工作目录进行扩展，以告诉 java 在哪里可以找到 SO 文件：

```
#!/bin/bash

ROOT=`dirname $0`
cd $ROOT

# allow JINI to load libraries from working directory 
# (e.g. libmlib_jai.so - JAI hardware acceleration library) 
export LD_LIBRARY_PATH=$ROOT:$LD_LIBRARY_PATH 
```

**例子：**

您的应用程序结构可能是：

```
YourApplication
    lib
        jai_codec-1.1.3.jar 
        jai_core-1.1.3.jar 
        mlibwrapper_jai.jar        
        ...
    libmlib_jai.so 
    mlib_jai.dll 
    mlib_jai_mmx.dll 
    mlib_jai_util.dll
    ...
    run.cmd
    run.sh
    ... 
```

因此，JAR 包含在 CLASSPATH 中，而 SO/DLL 位于工作文件夹中（`run.cmd/.sh`执行的位置）。

# c++ - 我怎样才能得到中文字符串？

> ID：12000075
> 
> 赞同：0
> 
> 时间：2012-08-17T05:05:12.203
> 
> 标签：c++, visual-studio, mfc, dialog

我想把它转换成中文。

我使用了 MFC 对话框。

* * *

\u5DF4\u62C9\u9547

\u73FE\u4EE3\u57CE

* * *

我能怎么做？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:27:49.690

MFC 本身支持 Unicode，使用 UTF-16。您的字符都在 BMP 中，因此代理字符没有问题。您可以只将文字字符串传递`L"\u5DF4\u62C9\u9547\u73FE\u4EE3\u57CE"`给 MFC。当然，在构建中文应用程序时，不要使用 MFC 的 ANSI 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:19:36.890

```
 // declare unicode text in hex code 
 LPCWSTR pszText = (LPCWSTR)"\xF4\x5D\xC9\x62\x47\x95\xFE\x73\xE3\x4E\xCE\x57";

 // display unicode in UNICODE build dialog
 SetDlgItemText(IDC_EDIT1, pszText);

 // display unicode text in in MCBS build dialog
 SetDlgItemTextW(this->m_hWnd, IDC_EDIT1, pszText); 
```

# facebook - 从用户帐户中删除应用程序

> ID：12000078
> 
> 赞同：1
> 
> 时间：2012-08-17T05:06:15.340
> 
> 标签：facebook, authentication

这是一个有趣的困境。我的网站允许用户通过连接 Facebook 进行注册。当用户连接时，我们为他们创建一个帐户，向他们发送欢迎电子邮件等......我们还为他们提供了完全删除他们的帐户和所有内容的功能。但是，当他们这样做时，它不会从 Facebook 中删除该应用程序。

当用户访问该站点时，它会检查他们是否已连接并已授予权限，如果是，它会自动将他们登录，或者如果它没有为他们提供用户帐户，则会创建一个。我网站上的删除操作会删除所有内容，但如果用户没有从他们的 Facebook 帐户中删除该应用程序，他们会回来并在我们的网站上获得一个新帐户。

有没有办法通过 API 调用从用户的 facebook 帐户中删除该应用程序，以便当他们在我的网站上删除他们的帐户时，我也可以删除该应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:31:16.137

是的，这在 API 中相当简单。

使用您的应用访问令牌或该用户的访问令牌，向[https://graph.facebook.com/](https://graph.facebook.com/) {USER ID}/permissions发出 HTTP DELETE 请求

这将从该用户的个人资料中卸载该应用程序。但它不会阻止他们重新添加它，在这种情况下，您将处于同样的情况，需要在用户返回时为用户创建一个新帐户。

# postgresql - 将日志文件中的行号与函数代码匹配

> ID：12000080
> 
> 赞同：4
> 
> 时间：2012-08-17T05:07:09.880
> 
> 标签：postgresql, plpgsql, pgadmin

我尝试在触发函数中调试时出错。在 Postgres 日志中，我有以下内容：

```
2012-08-16 21:41:23 PDT ERROR:  Unknown period: D
2012-08-16 21:41:23 PDT CONTEXT:  PL/pgSQL function "handle_promotion_update" 
    line 60  at assignment
SQL statement "UPDATE promotion SET some_column = foo + 1
    WHERE id = NEW.promotion_id"
PL/pgSQL function "handle_new_reward" line 94 at SQL statement 
```

所以，看来我的问题可能从“第 60 行”开始

我的问题是，行号从哪里开始？如果我进入 pgAdmin 并查看函数声明，它的顶部有“帮助器”（如删除函数）。所以，我不认为它来自那里。但是，它是否包括函数声明？或者它只是从线`BEGIN`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:10:01.153

您在 PostgreSQL 服务器日志中看到的行号从函数体的*左引号行开始。*您必须在此之前添加行才能在 pgAdmin SQL 编辑器中获得绝对行号。

不要混淆：如果您在尝试创建函数时遇到错误，您会得到不同的行号：它们指的是整个执行的脚本，而运行时错误中的行号指的是函数体。

# sql-server - 如何从没有表之间公共字段的两个表中获取结果表？

> ID：12000088
> 
> 赞同：0
> 
> 时间：2012-08-17T05:08:03.260
> 
> 标签：sql-server

我有两个表，如下所示。

![第一个表](../Images/25cfb5edc456d06a17d510e120cf9063.png)

![在此处输入图像描述](../Images/f9d0cb5386b2aca90056ee2266409b77.png)

考虑到表之间没有这种关系。

所以我需要我的结果表应该如下所示。

![在此处输入图像描述](../Images/33eda03660e927fad312a150d9a812a1.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:13:26.770

“AcctRef”，在您的 DebitNoteTable 中，是一个[“重复列”](http://rogersaccessblog.blogspot.com/2011/05/normalizing-repeated-columns-simple-pc.html)。

那是一个很大的，巨大的，不可以:)

您的借记表应如下所示：

```
Debit No  AcctRef
--------  -------
DN1       CMP1
DN1       CMP3
DN1       CMP6
... 
```

然后你可以做一个简单的“加入”；）

这是规范化的一个很好的概述。如果可能的话，我绝对鼓励您重新访问您的架构：

*   [http://databases.about.com/od/specificproducts/a/normalization.htm](http://databases.about.com/od/specificproducts/a/normalization.htm)

如果你*不能*，那么我猜“Plan B”会写一个程序：

*   读取所有价格并将它们存储在表格中

*   读取所有借方的所有 AcctRef

*   将每个 AcctRef 解析为单独的应计项目

*   打印每个应计项目的价格和每个借方

这实际上意味着读取整个数据库中的所有数据，然后手动重新组织它。如果您要这样做，为什么首先要使用数据库呢？

PS：不幸的是，您为表格使用了位图。文字会更好;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:38:22.047

尝试这个：

由于该表未标准化，因此您必须执行以下步骤。在列中保留逗号分隔值是一个坏主意。对于表上的任何类型的操作，您都必须拆分它..

**第 1 步：**您必须创建以下函数来拆分 accRef 列

```
create FUNCTION [dbo].[SDF_SplitString]
(
    @sString varchar(2048),
    @cDelimiter char(1)
)
RETURNS @tParts TABLE ( part varchar(2048) )
AS
BEGIN
    if @sString is null return
    declare     @iStart int,
                @iPos int
    if substring( @sString, 1, 1 ) = @cDelimiter 
    begin
        set     @iStart = 2
        insert into @tParts
        values( null )
    end
    else 
        set     @iStart = 1
    while 1=1
    begin
        set     @iPos = charindex( @cDelimiter, @sString, @iStart )
        if @iPos = 0
                set     @iPos = len( @sString )+1
        if @iPos - @iStart > 0                  
                insert into @tParts
                values  ( substring( @sString, @iStart, @iPos-@iStart ))
        else
                insert into @tParts
                values( null )
        set     @iStart = @iPos+1
        if @iStart > len( @sString ) 
                break
    end
    RETURN

END 
```

**第2步：**

使用此查询获取结果

```
with cte as(
select * from DebitNote cross apply dbo.SDF_SplitString(AccRef,','))
select part,price,[Debit No]=STUFF((SELECT ', ' + DebitNo
           FROM cte b 
           WHERE b.part = a.part 
          FOR XML PATH('')), 1, 2, '')
FROM cte a join AccrualNote
on part=AccrualNo
GROUP BY part,price 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/84910/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T05:23:58.360

我想它应该是这样的：

```
SELECT a.Accrual_No, a.Price, d.Debit_no FROM AccrualNote AS a, DebitNote as d
WHERE a.Accrual_No IN d.AccRef 
```

接下来，您需要为使用此查询获得的记录创建一个循环（只需使用 phpMyAdmin

（当然 paulsm4 是绝对正确的，但也许你不能改变表结构）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:49:29.767

```
CREATE FUNCTION [dbo].[F_Get_DebitNo] ( @AccrualNo VARCHAR(20) )
RETURNS VARCHAR(100)
AS 
BEGIN 
    DECLARE @DebitNo VARCHAR(100)
    SET @DebitNo = ''
    SELECT  @DebitNo = @DebitNo + ',' + DebitNo
    FROM    DebitNote
    WHERE   CHARINDEX(@AccrualNo, AccRef) > 0
    SELECT  @DebitNo = RIGHT(@DebitNo, LEN(@DebitNo) - 1)
    RETURN @DebitNo
END 
```

sql 运行良好，我已经测试过了，您只需要创建一个标量值函数，如下所示。

```
SELECT  AccrualNo ,
    Price ,
    dbo.F_Get_DebitNo(AccrualNo) FROM    AccrualNote 
```

# jquery - 如何开发一个用于视网膜显示的网站？

> ID：12000091
> 
> 赞同：-2
> 
> 时间：2012-08-17T05:08:29.603
> 
> 标签：jquery, html, css, retina-display

我必须开发一个具有 4 种设计的响应式网站 [台式机、移动设备、平板电脑和视网膜显示器]。

前三个很好，可以完成，但视网膜显示是一个新事物。因此，如果有人能分享为它开发 HTML 的正确方法，那将非常有帮助。

Jquery 的任何插件，HTML/CSS 的 Hack 都会有所帮助！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:27:03.547

您可以使用一些 CSS 框架，例如

1.  [骨骼](http://www.getskeleton.com/)
2.  [基础](http://foundation.zurb.com/)

并在 Google 中搜索响应式网页设计

对于视网膜显示和移动布局使用媒体查询

这是一个来自 CSS-tricks 的链接，这将是有帮助的 [Css-tricks](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:15:45.987

在 iPhone/iPad 上，iOS 非常聪明，无需您的帮助就可以让事物看起来不错。虽然我没有尝试过，但我确信 OSX 对配备 Retina 的台式机/笔记本电脑也是如此。

但是，您绝对应该考虑/用户有几件事：

*   [视口元信息](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

*   使用矢量图形来避免看起来模糊的图像（由于 Retina 具有更高的 PPI，因此必须缩放光栅图形）

*   保持页面轻巧快速（移动设备的一般良好规则）

*   [CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)（响应式开发的一般良好规则）

*   熟悉`-webkit`前缀专有的 CSS 属性，这些属性可以对许多事情进行细粒度控制。

*   经常测试！大多数时候，我对“正常工作”的效果（以及在高 PPI 下它们看起来有多棒）感到惊喜，但它并不总是按您期望的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T21:31:31.037

每当我创建网站时，我都会使用[Retina.js](http://retinajs.com)。如果用户有视网膜显示器，它会自动用服务器上的高分辨率替换页面上的低分辨率图像。

# c# - 如何简化多个构造函数？

> ID：12000096
> 
> 赞同：7
> 
> 时间：2012-08-17T05:09:02.960
> 
> 标签：c#, constructor, visual-studio-2005, multiple-constructors

我想为一个类有两个构造函数，如下所示：

```
public MyClass()
{
    // do stuff here
}

public MyClass(int num)
{
    MyClass();
    // do other stuff here
} 
```

以上是实现我的目的的正确方法吗？有没有更好的速记？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T05:12:30.717

```
public MyClass()
{
    // do stuff
}

public MyClass(int num)
    : this ()
{
    // do other stuff with num
} 
```

该`: this()`位称为**Constructor Initialiser**。C# 中的每个构造函数都有一个初始化程序，它在构造函数本身之前运行。默认情况下，初始化程序是基类的无参数构造函数（或者`Object`如果该类不是从另一个类显式派生的）。这可确保在构造派生类的其余部分之前正确初始化基类的成员。

每个构造函数的默认构造函数初始化程序可以通过两种方式覆盖。

1.  该`: this(...)`构造指定同一类中的另一个构造函数作为它所应用的构造函数的初始化程序。
2.  该`: base(...)`构造在基类中指定了一个构造函数（通常不是无参数构造函数，因为无论如何这是默认值）。

有关您可能想要的更多详细信息，请参阅 C# 4.0 语言规范第 10.11 节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T05:12:40.730

正确的语法如下所示：

```
public MyClass() 
{ 
    // do stuff here 
} 

public MyClass(int num) : this()
{ 
    // do other stuff here 
} 
```

注意`this()`在第二个构造函数。这将调用同一个类中的构造函数，不带参数。

你也可以反过来：

```
public MyClass() : this(someReasonableDefaultValueForNum)
{ 
} 

public MyClass(int num)
{ 
    // do all stuff here 
} 
```

您只能使用一个“功能”而不是`this`在这个地方`base`：

```
public MyClass(int num) : base(someParameterOnTheBaseClassConstructor)
{
} 
```

如果您不想调用基类中的默认无参数构造函数，而是调用带参数的构造函数之一，这将很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T05:12:25.833

你可以这样做：

```
public MyClass()
{
    // do stuff here
}

public MyClass(int num) : this()
{

    // do other stuff here
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T05:12:35.613

也许使用一个构造函数，其参数具有默认值：

```
public MyClass(int num = 0)
{
    MyClass();
    // do other stuff here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T05:14:09.477

您可以执行以下操作：

```
public MyClass()
   : this(1) { }

public MyClass(int num)
{
   //do stuff here
} 
```

# mysql - 在使用 Mysql LOAD DATA LOCAL INFILE 时获取整行

> ID：12000103
> 
> 赞同：0
> 
> 时间：2012-08-17T05:09:53.233
> 
> 标签：mysql, stored-procedures

需要专家帮助使用 LOAD DATA LOCAL INFILE 获取整个原始行并放入我的数据库列

## 样本

**桌子**

```
DROP TABLE IF EXISTS `syslog`;
CREATE TABLE `syslog` (
  `the_time` VARCHAR(80) NOT NULL,
  `the_key` VARCHAR(30) NOT NULL,
  `the_log` VARCHAR(1024) NOT NULL
)
ENGINE = MyISAM; 
```

**文件：D:/rnd/syslog.csv**

```
"device","date_time","src_ip","dst_ip","log_type","message"
"Fortigate","2012-05-02 12:02:03","192.168.1.1","192.168.1.11","vpn","Sample message1"
"Fortigate","2012-05-02 12:02:04","192.168.1.2","192.168.1.12","vpn","Sample message2"
"Fortigate","2012-05-02 12:02:05","192.168.1.3","192.168.1.13","traffic","Sample message3"
"Fortigate","2012-05-02 12:02:06","192.168.1.4","192.168.1.14","traffic","Sample message4"
"Fortigate","2012-05-02 12:02:07","192.168.1.5","192.168.1.15","vpn","Sample message5"
"Fortigate","2012-05-02 12:02:08","192.168.1.6","192.168.1.16","vpn","Sample message6" 
```

**mysql语句**

```
SET @delimeter = ",";
LOAD DATA LOCAL INFILE
"D:/rnd/syslog.csv"
INTO TABLE syslog
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 LINES
( @device,
  @date_time,
  @src_ip,
  @dst_ip,
  @log_type,
  @message) 
SET the_time = @date_time, 
the_key=CONCAT(@src_ip, "~" , @dst_ip), 
the_log=CONCAT(@device,@delimeter,@date_time,@delimeter,@src_ip,@delimeter,@dst_ip,@delimeter,@log_type,@delimeter,@message); 
```

目前只是使用手动设置，如

```
the_log=CONCAT(@device,@delimeter,@date_time,@delimeter,@src_ip,@delimeter,@dst_ip,@delimeter,@log_type,@delimeter,@message) 
```

由于实际列是 60，因此有没有其他方法可以获得整行，并且在代码中手动执行它不是一个好主意 + 以后不容易维护。

*   目标：使用 csv 数据并将其操作到我自己的表中（意味着该列与 csv 不同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:08:54.820

另一种方法是将表结构创建为 CSV 文件，按原样存储数据，并且仅在从日志表中选择数据时使用 CONCAT。

# python - 将大型 python 字典存储在文件中的最佳方法

> ID：12000106
> 
> 赞同：2
> 
> 时间：2012-08-17T05:10:01.040
> 
> 标签：python, python-2.7

我有一个生成大型 python 字典的 python 脚本（脚本 1）。这本字典必须由另一个脚本（脚本 2）读取。任何人都可以建议我编写由脚本 1 生成并由脚本 2 读取的 python 字典的最佳方法。过去我使用 cPickle 来编写和读取如此大的字典。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T05:11:55.397

[`shelve`](http://docs.python.org/library/shelve.html)将让您分别访问每个项目，而不是要求您每次都序列化和反序列化整个字典。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T05:25:43.377

如果您希望您的字典可以被不同类型的脚本（即不仅仅是 Python）读取，那么[JSON](http://docs.python.org/library/json.html)也是一个不错的选择。

它不如`shelve`.

* * *

```
import json
with open("/tmp/test.json", "w") as out_handle:
    json.dump(my_dict, out_handle)  # save dictionary

with open("/tmp/test.json", "r") as in_handle:
    my_dict = json.load(in_handle)  # load dictionary 
```

# tsql - 关键字“截断”附近的语法不正确。在一个视图内

> ID：12000108
> 
> 赞同：0
> 
> 时间：2012-08-17T05:10:14.813
> 
> 标签：tsql

我收到错误“关键字 'truncate' 附近的语法不正确”。并且不确定这里的语法有什么问题，这对我来说并不明显......可能有些愚蠢但我需要另一双眼睛：

```
ALTER VIEW [dbo].[vw_All_Events]
AS

truncate table Event

Select [event_id]
      ,[site_id]
      ,[autogenerated]
      ,[creation_date]
      ,[last_update_date]
from Event

GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:16:24.257

视图只允许在 之后的单个语句，`AS`并且它必须是数据检索（返回一个行集）。它不能是不同的类型，包括数据定义、数据修改、程序、声明或任何其他类型。

您*可以*使用存储过程或用户定义的函数来执行这些操作（但不能在函数中执行 DDL 和 DML）。

详细地说，存储过程允许控制流语句，如 IF THEN ELSE BEGIN END WHILE RETURN。您可以使用 DML 来更新、删除和插入。您可以使用 DDL 创建和删除表和索引、添加列和约束等。您可以返回多个行集。您可以执行动态 SQL。

你想达到什么目的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:23:22.917

更好的方法是使用存储过程而不是视图。

您可以编写多个语句并获得输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T05:16:09.157

您只能在视图中有选择语句。因此，“截断”是一个无效的命令。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-17T05:19:21.403

`TRUNCATE`不适用于视图。

看看这个[链接](http://lists.mysql.com/commits/24323)

# android - 如何在拉取中仅加载新项目以刷新自定义列表视图？

> ID：12000110
> 
> 赞同：4
> 
> 时间：2012-08-17T05:10:30.287
> 
> 标签：android, android-listview

我只需要在拉动时加载新项目以刷新，加载新项目后剩余的加载项目应该向下移动。如果我确实拉动刷新，我将再次加载 10,10 个项目，我希望所有加载的项目都放在新更新的项目的顶部。

怎么做？

```
((PullAndLoadListView)getListView()).setOnRefreshListener(new OnRefreshListener(){public void onRefresh(){}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T05:24:25.413

我肯定会看看[Chris Banes 的 pull-to-refresh 实现](https://github.com/chrisbanes/Android-PullToRefresh)。他的代码不仅包含了ListView的这种交互风格，还包含了GridView和WebView。

尤其是后者对您的情况很感兴趣，因为它是不使用适配器作为其内容的视图的拉动刷新的示例实现。如果查看源代码，您会发现 Banes 项目中的每个具体的 pull-to-refreh 视图都从通用的 PullToRefreshBase 扩展而来，其中包含动画和刷新的大部分逻辑。拥有该基类的好处是对任何其他类型的视图（例如 TextView）执行相同的操作应该非常简单。

这种方法的唯一缺点是该实现是其他视图的包装器，这意味着您将需要编写几行额外的代码来获取实际视图。所以它不是一个完整的替代品。但是，它的功能和特性远远超过了那个小小的不便。

**编辑：**

看看我已经实现的下面的代码

**在您的主 JAVA 文件中：**

```
PullToRefreshListView listview;

listview = (PullToRefreshListView) findViewById(R.id.airpost_listView);

    listview.setOnRefreshListener(new OnRefreshListener() {
        public void onRefresh() {
            // TODO Auto-generated method stub
            new GetPost().execute(); // AsyncTask where you can put your  logic when to call the listview for getting new data or let it be same as before
        }
    }); 
```

**Listview在xml文件中定义：**

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bhavesh"
        android:padding="5dp" >

        <com.FlightMate.AirpostTab.PullToRefreshListView
            android:id="@+id/airpost_listView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#ffffff"
            android:cacheColorHint="@android:color/transparent"
            android:divider="#00000000" />
    </LinearLayout> 
```

**这是 PullToRefreshListView ：**

```
 package com.FlightMate.AirpostTab;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.ListView;

public class PullToRefreshListView extends PullToRefreshBase<ListView> {

    public PullToRefreshListView(Context context) {
        super(context);
    }

    public PullToRefreshListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected final ListView createAdapterView(Context context,
            AttributeSet attrs) {
        ListView lv = new ListView(context, attrs);
        // Set it to this so it can be used in ListActivity/ListFragment

        lv.setId(android.R.id.list);
        return lv;
    }

} 
```

**这是 PullToRefreshBase ：**

```
 package com.FlightMate.AirpostTab;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Color;
import android.os.Handler;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Interpolator;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.LinearLayout;

import com.FlightMate.R;

public abstract class PullToRefreshBase<T extends AbsListView> extends
        LinearLayout implements OnTouchListener, OnScrollListener {

    private final class SmoothScrollRunnable implements Runnable {

        static final int ANIMATION_DURATION_MS = 190;
        static final int ANIMATION_FPS = 1000 / 60;

        private final Interpolator interpolator;
        private final int scrollToY;
        private final int scrollFromY;
        private final Handler handler;

        private boolean continueRunning = true;
        private long startTime = -1;
        private int currentY = -1;

        public SmoothScrollRunnable(Handler handler, int fromY, int toY) {
            this.handler = handler;
            this.scrollFromY = fromY;
            this.scrollToY = toY;
            this.interpolator = new AccelerateDecelerateInterpolator();
        }

        // @Override
        public void run() {

            /**
             * Only set startTime if this is the first time we're starting, else
             * actually calculate the Y delta
             */
            if (startTime == -1) {
                startTime = System.currentTimeMillis();
            } else {

                /**
                 * We do do all calculations in long to reduce software float
                 * calculations. We use 1000 as it gives us good accuracy and
                 * small rounding errors
                 */
                long normalizedTime = (1000 * (System.currentTimeMillis() - startTime))
                        / ANIMATION_DURATION_MS;
                normalizedTime = Math.max(Math.min(normalizedTime, 1000), 0);

                final int deltaY = Math
                        .round((scrollFromY - scrollToY)
                                * interpolator
                                        .getInterpolation(normalizedTime / 1000f));
                this.currentY = scrollFromY - deltaY;
                setHeaderScroll(currentY);
            }

            // If we're not at the target Y, keep going...
            if (continueRunning && scrollToY != currentY) {
                handler.postDelayed(this, ANIMATION_FPS);
            }
        }

        public void stop() {
            this.continueRunning = false;
            this.handler.removeCallbacks(this);
        }
    };

    // ===========================================================
    // Constants
    // ===========================================================

    static final int PULL_TO_REFRESH = 0;
    static final int RELEASE_TO_REFRESH = PULL_TO_REFRESH + 1;
    static final int REFRESHING = RELEASE_TO_REFRESH + 1;
    static final int EVENT_COUNT = 3;

    public static final int MODE_PULL_DOWN_TO_REFRESH = 0x1;
    public static final int MODE_PULL_UP_TO_REFRESH = 0x2;
    public static final int MODE_BOTH = 0x3;

    // ===========================================================
    // Fields
    // ===========================================================

    private int state = PULL_TO_REFRESH;
    private int mode = MODE_PULL_DOWN_TO_REFRESH;
    private int currentMode;
    private boolean disableScrollingWhileRefreshing = true;

    private T adapterView;
    private boolean isPullToRefreshEnabled = true;

    private LoadingLayout headerLayout;
    private LoadingLayout footerLayout;
    private int headerHeight;

    private final Handler handler = new Handler();

    private OnTouchListener onTouchListener;
    private OnRefreshListener onRefreshListener;
    private OnScrollListener onScrollListener;

    private OnLastItemVisibleListener onLastItemVisibleListener;
    private int lastSavedFirstVisibleItem = -1;

    private SmoothScrollRunnable currentSmoothScrollRunnable;

    private float startY = -1;
    private final float[] lastYs = new float[EVENT_COUNT];

    // ===========================================================
    // Constructors
    // ===========================================================

    public PullToRefreshBase(Context context) {
        this(context, null);
    }

    public PullToRefreshBase(Context context, int mode) {
        this(context);
        this.mode = mode;
    }

    public PullToRefreshBase(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    /**
     * Get the Wrapped AdapterView. Anything returned here has already been
     * added to the content view.
     * 
     * @return The AdapterView which is currently wrapped
     */
    public final T getAdapterView() {
        return adapterView;
    }

    /**
     * Whether Pull-to-Refresh is enabled
     * 
     * @return enabled
     */
    public final boolean isPullToRefreshEnabled() {
        return isPullToRefreshEnabled;
    }

    public void setDisableScrollingWhileRefreshing(
            boolean disableScrollingWhileRefreshing) {
        this.disableScrollingWhileRefreshing = disableScrollingWhileRefreshing;
    }

    /**
     * Mark the current Refresh as complete. Will Reset the UI and hide the
     * Refreshing View
     */
    public final void onRefreshComplete() {
        resetHeader();
    }

    public final void setOnLastItemVisibleListener(
            OnLastItemVisibleListener listener) {
        onLastItemVisibleListener = listener;
    }

    public final void setOnRefreshListener(OnRefreshListener listener) {
        onRefreshListener = listener;
    }

    /**
     * A mutator to enable/disable Pull-to-Refresh for the current AdapterView
     * 
     * @param enable
     *            Whether Pull-To-Refresh should be used
     */
    public final void setPullToRefreshEnabled(boolean enabled) {
        this.isPullToRefreshEnabled = enabled;
    }

    public final void setReleaseLabel(String releaseLabel) {
        if (null != headerLayout) {
            headerLayout.setReleaseLabel(releaseLabel);
        }
        if (null != footerLayout) {
            footerLayout.setReleaseLabel(releaseLabel);
        }
    }

    public final void setPullLabel(String pullLabel) {
        if (null != headerLayout) {
            headerLayout.setPullLabel(pullLabel);
        }
        if (null != footerLayout) {
            footerLayout.setPullLabel(pullLabel);
        }
    }

    public final void setRefreshingLabel(String refreshingLabel) {
        if (null != headerLayout) {
            headerLayout.setRefreshingLabel(refreshingLabel);
        }
        if (null != footerLayout) {
            footerLayout.setRefreshingLabel(refreshingLabel);
        }
    }

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    public final void setOnScrollListener(OnScrollListener listener) {
        onScrollListener = listener;
    }

    @Override
    public final void setOnTouchListener(OnTouchListener listener) {
        onTouchListener = listener;
    }

    public final void onScroll(final AbsListView view,
            final int firstVisibleItem, final int visibleItemCount,
            final int totalItemCount) {

        if (null != onLastItemVisibleListener) {
            // detect if last item is visible
            if (visibleItemCount > 0 && visibleItemCount < totalItemCount
                    && (firstVisibleItem + visibleItemCount == totalItemCount)) {
                // only process first event
                if (firstVisibleItem != lastSavedFirstVisibleItem) {
                    lastSavedFirstVisibleItem = firstVisibleItem;
                    onLastItemVisibleListener.onLastItemVisible();
                }
            }
        }

        if (null != onScrollListener) {
            onScrollListener.onScroll(view, firstVisibleItem, visibleItemCount,
                    totalItemCount);
        }
    }

    public final void onScrollStateChanged(final AbsListView view,
            final int scrollState) {
        if (null != onScrollListener) {
            onScrollListener.onScrollStateChanged(view, scrollState);
        }
    }

    // @Override
    public final boolean onTouch(View view, MotionEvent ev) {
        if (isPullToRefreshEnabled) {
            // Returning true here stops the ListView being scrollable while we
            // refresh
            if (state == REFRESHING && disableScrollingWhileRefreshing) {
                return true;
            } else if (onAdapterViewTouch(view, ev)) {
                return true;
            }
        }

        if (null != onTouchListener) {
            return onTouchListener.onTouch(view, ev);
        }

        return false;
    }

    /**
     * This is implemented by derived classes to return the created AdapterView.
     * If you need to use a custom AdapterView (such as a custom ListView),
     * override this method and return an instance of your custom class.
     * 
     * Be sure to set the ID of the view in this method, especially if you're
     * using a ListActivity or ListFragment.
     * 
     * @param context
     * @param attrs
     *            AttributeSet from wrapped class. Means that anything you
     *            include in the XML layout declaration will be routed to the
     *            AdapterView
     * @return New instance of the AdapterView
     */
    protected abstract T createAdapterView(Context context, AttributeSet attrs);

    // ===========================================================
    // Methods
    // ===========================================================

    protected final void resetHeader() {
        state = PULL_TO_REFRESH;
        initializeYsHistory();
        startY = -1;

        if (null != headerLayout) {
            headerLayout.reset();
        }
        if (null != footerLayout) {
            footerLayout.reset();
        }

        smoothScrollTo(0);
    }

    private void init(Context context, AttributeSet attrs) {

        setOrientation(LinearLayout.VERTICAL);

        // Styleables from XML
        final TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.PullToRefresh);
        mode = a.getInteger(R.styleable.PullToRefresh_mode,
                MODE_PULL_DOWN_TO_REFRESH);

        // AdapterView
        // By passing the attrs, we can add ListView/GridView params via XML
        adapterView = this.createAdapterView(context, attrs);
        adapterView.setOnTouchListener(this);
        adapterView.setOnScrollListener(this);
        addView(adapterView, new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, 0, 1.0f));

        // Loading View Strings
        String pullLabel = context
                .getString(R.string.pull_to_refresh_pull_label);
        String refreshingLabel = context
                .getString(R.string.pull_to_refresh_refreshing_label);
        String releaseLabel = context
                .getString(R.string.pull_to_refresh_release_label);

        // Add Loading Views
        if (mode == MODE_PULL_DOWN_TO_REFRESH || mode == MODE_BOTH) {
            headerLayout = new LoadingLayout(context,
                    MODE_PULL_DOWN_TO_REFRESH, releaseLabel, pullLabel,
                    refreshingLabel);
            addView(headerLayout, 0, new LinearLayout.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            measureView(headerLayout);
            headerHeight = headerLayout.getMeasuredHeight();
        }
        if (mode == MODE_PULL_UP_TO_REFRESH || mode == MODE_BOTH) {
            footerLayout = new LoadingLayout(context, MODE_PULL_UP_TO_REFRESH,
                    releaseLabel, pullLabel, refreshingLabel);
            addView(footerLayout, new LinearLayout.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            measureView(footerLayout);
            headerHeight = footerLayout.getMeasuredHeight();
        }

        // Styleables from XML
        if (a.hasValue(R.styleable.PullToRefresh_headerTextColor)) {
            final int color = a.getColor(
                    R.styleable.PullToRefresh_headerTextColor, Color.BLACK);
            if (null != headerLayout) {
                headerLayout.setTextColor(color);
            }
            if (null != footerLayout) {
                footerLayout.setTextColor(color);
            }
        }
        if (a.hasValue(R.styleable.PullToRefresh_headerBackground)) {
            this.setBackgroundResource(a.getResourceId(
                    R.styleable.PullToRefresh_headerBackground, Color.WHITE));
        }
        if (a.hasValue(R.styleable.PullToRefresh_adapterViewBackground)) {
            adapterView.setBackgroundResource(a.getResourceId(
                    R.styleable.PullToRefresh_adapterViewBackground,
                    Color.WHITE));
        }
        a.recycle();

        // Hide Loading Views
        switch (mode) {
        case MODE_BOTH:
            setPadding(getPaddingLeft(), -headerHeight, getPaddingRight(),
                    -headerHeight);
            break;
        case MODE_PULL_UP_TO_REFRESH:
            setPadding(getPaddingLeft(), getPaddingTop(), getPaddingRight(),
                    -headerHeight);
            break;
        case MODE_PULL_DOWN_TO_REFRESH:
        default:
            setPadding(getPaddingLeft(), -headerHeight, getPaddingRight(),
                    getPaddingBottom());
            break;
        }

        // If we're not using MODE_BOTH, then just set currentMode to current
        // mode
        if (mode != MODE_BOTH) {
            currentMode = mode;
        }
    }

    private void measureView(View child) {
        ViewGroup.LayoutParams p = child.getLayoutParams();
        if (p == null) {
            p = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);
        }

        int childWidthSpec = ViewGroup.getChildMeasureSpec(0, 0 + 0, p.width);
        int lpHeight = p.height;
        int childHeightSpec;
        if (lpHeight > 0) {
            childHeightSpec = MeasureSpec.makeMeasureSpec(lpHeight,
                    MeasureSpec.EXACTLY);
        } else {
            childHeightSpec = MeasureSpec.makeMeasureSpec(0,
                    MeasureSpec.UNSPECIFIED);
        }
        child.measure(childWidthSpec, childHeightSpec);
    }

    private boolean onAdapterViewTouch(View view, MotionEvent event) {

        switch (event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            updateEventStates(event);

            if (isPullingToRefresh() && startY == -1) {
                startY = event.getY();

                // Need to set current Mode if we're using both
                if (mode == MODE_BOTH) {
                    if (isUserDraggingDownwards()) {
                        currentMode = MODE_PULL_DOWN_TO_REFRESH;
                    } else if (isUserDraggingUpwards()) {
                        currentMode = MODE_PULL_UP_TO_REFRESH;
                    }
                }
                return false;
            }

            if (startY != -1 && !adapterView.isPressed()) {
                pullEvent(event, startY);
                return true;
            }
            break;
        case MotionEvent.ACTION_UP:
            initializeYsHistory();
            startY = -1;

            if (state == RELEASE_TO_REFRESH) {
                setRefreshing();
                if (onRefreshListener != null) {
                    onRefreshListener.onRefresh();
                }
            } else {
                smoothScrollTo(0);
            }
            break;
        }

        return false;
    }

    private void pullEvent(MotionEvent event, float firstY) {
        float averageY = average(lastYs);

        final int height;
        switch (currentMode) {
        case MODE_PULL_UP_TO_REFRESH:
            height = (int) Math.max(firstY - averageY, 0);
            setHeaderScroll(height);
            break;
        case MODE_PULL_DOWN_TO_REFRESH:
        default:
            height = (int) Math.max(averageY - firstY, 0);
            setHeaderScroll(-height);
            break;
        }

        if (state == PULL_TO_REFRESH && headerHeight < height) {
            state = RELEASE_TO_REFRESH;
            if (null != headerLayout) {
                headerLayout.releaseToRefresh();
            }
            if (null != footerLayout) {
                footerLayout.releaseToRefresh();
            }
        } else if (state == RELEASE_TO_REFRESH && headerHeight >= height) {
            state = PULL_TO_REFRESH;
            if (null != headerLayout) {
                headerLayout.pullToRefresh();
            }
            if (null != footerLayout) {
                footerLayout.pullToRefresh();
            }
        }
    }

    private void setHeaderScroll(int y) {
        scrollTo(0, y);
    }

    private void setRefreshing() {
        state = REFRESHING;
        if (null != headerLayout) {
            headerLayout.refreshing();
        }
        if (null != footerLayout) {
            footerLayout.refreshing();
        }

        switch (currentMode) {
        case MODE_PULL_DOWN_TO_REFRESH:
            smoothScrollTo(-headerHeight);
            break;
        case MODE_PULL_UP_TO_REFRESH:
            smoothScrollTo(headerHeight);
            break;
        }
    }

    private float average(float[] ysArray) {
        float avg = 0;
        for (int i = 0; i < EVENT_COUNT; i++) {
            avg += ysArray[i];
        }
        return avg / EVENT_COUNT;
    }

    private void initializeYsHistory() {
        for (int i = 0; i < EVENT_COUNT; i++) {
            lastYs[i] = 0;
        }
    }

    private void updateEventStates(MotionEvent event) {
        for (int i = 0, z = event.getHistorySize(); i < z; i++) {
            this.updateEventStates(event.getHistoricalY(i));
        }

        this.updateEventStates(event.getY());
    }

    private void updateEventStates(float y) {
        for (int i = 0; i < EVENT_COUNT - 1; i++) {
            lastYs[i] = lastYs[i + 1];
        }

        lastYs[EVENT_COUNT - 1] = y;
    }

    private boolean isPullingToRefresh() {
        if (isPullToRefreshEnabled && state != REFRESHING) {
            switch (mode) {
            case MODE_PULL_DOWN_TO_REFRESH:
                return isFirstItemVisible() && isUserDraggingDownwards();
            case MODE_PULL_UP_TO_REFRESH:
                return isLastItemVisible() && isUserDraggingUpwards();
            case MODE_BOTH:
                return (isFirstItemVisible() && isUserDraggingDownwards())
                        || (isLastItemVisible() && isUserDraggingUpwards());
            }
        }
        return false;
    }

    private boolean isFirstItemVisible() {
        if (this.adapterView.getCount() == 0) {
            return true;
        } else if (adapterView.getFirstVisiblePosition() == 0) {
            return adapterView.getChildAt(0).getTop() >= adapterView.getTop();
        } else {
            return false;
        }
    }

    private boolean isLastItemVisible() {
        final int count = this.adapterView.getCount();
        if (count == 0) {
            return true;
        } else if (adapterView.getLastVisiblePosition() == count - 1) {
            return true;
        } else {
            return false;
        }
    }

    private boolean isUserDraggingDownwards() {
        return this.isUserDraggingDownwards(0, EVENT_COUNT - 1);
    }

    private boolean isUserDraggingDownwards(int from, int to) {
        return lastYs[from] != 0 && lastYs[to] != 0
                && Math.abs(lastYs[from] - lastYs[to]) > 10
                && lastYs[from] < lastYs[to];
    }

    private boolean isUserDraggingUpwards() {
        return this.isUserDraggingUpwards(0, EVENT_COUNT - 1);
    }

    private boolean isUserDraggingUpwards(int from, int to) {
        return lastYs[from] != 0 && lastYs[to] != 0
                && Math.abs(lastYs[to] - lastYs[from]) > 10
                && lastYs[to] < lastYs[from];
    }

    private void smoothScrollTo(int y) {
        if (null != currentSmoothScrollRunnable) {
            currentSmoothScrollRunnable.stop();
        }

        this.currentSmoothScrollRunnable = new SmoothScrollRunnable(handler,
                getScrollY(), y);
        handler.post(currentSmoothScrollRunnable);
    }

    // ===========================================================
    // Inner and Anonymous Classes
    // ===========================================================

    public static interface OnRefreshListener {

        public void onRefresh();

    }

    public static interface OnLastItemVisibleListener {

        public void onLastItemVisible();

    }

} 
```

希望它能帮助您解决问题。如果您仍然发现任何困难，请告诉我。

# openid - OpenId“发现”过程中的错误

> ID：12000114
> 
> 赞同：0
> 
> 时间：2012-08-17T05:11:13.287
> 
> 标签：openid

我正在尝试为我的应用程序实现 yahoo openid。但我明白了

org.xml.sax.SAXParseException：s4s-att-invalid-value：元素“schema”中“targetNamespace”的属性值无效。记录的原因：cvc-datatype-valid.1.2.1：“xri://$xrd*($v*2.0)”不是“anyURI”的有效值。

“发现”过程中的错误。我使用“http://me.yahoo.com/rpriyanka_1011”作为 openid url 进行测试。此外，我正在从 localhost 运行我的应用程序，目前它没有域名。这可能是“发现”过程失败的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:33:01.993

这个问题已经解决。我正在使用 jopenid 库来实现 Openid。对于 Yahoo，我使用以下 url 来执行发现，现在一切正常。 [http://open.login.yahooapis.com/openid20/www.yahoo.com/xrds](http://open.login.yahooapis.com/openid20/www.yahoo.com/xrds)

# android - 无法从读卡器读取数据

> ID：12000121
> 
> 赞同：0
> 
> 时间：2012-08-17T05:12:31.527
> 
> 标签：android

我正在使用读卡器从卡中读取特定信息。我在 3 台设备上工作，即 Galaxy Ace-5830、Galaxy Y-5360 和摩托罗拉的设备，不完全知道它的名称。当应用程序部署在 5360 上时，它可以正常工作并正确读取所有信息。部署在 5830 上时，未检测到阅读器，在摩托罗拉上检测到阅读器，但无法读取所有信息。请帮助。自定义应用程序（我制作的那个）和制造商提供的演示程序会出现上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:50:58.320

伙计们，问题已经解决了。该 API 支持摩托罗拉设备。集成了新的 API，它已经开始工作了。:)

# java - JDBC 显示来自 MySQL DB 的用户信息

> ID：12000123
> 
> 赞同：0
> 
> 时间：2012-08-17T05:12:34.997
> 
> 标签：java, database, jsp, jdbc

我在阅读/显示用户信息时遇到了另一个问题。插入完成后，我有另一个提交按钮，应该向用户显示他的信息（注册）。我什至朝着正确的方向前进吗？

```
<%@page import="java.sql.*, java.util.*, javax.servlet.*, java.io.*, javax.servlet.http.*,     business.*"%>

<% 
Connection conn = null; 

try { 
    String email=request.getParameter("emailAddress");
    String dbURL = "jdbc:mysql://localhost:3306/Users"; 
    String user = "root"; 
    String pwd = "password"; 
    String driver = "com.mysql.jdbc.Driver"; 

    String query = ("SELECT * FROM User WHERE EmailAddress = '" +email+ "'");
    Class.forName(driver); 
    conn = DriverManager.getConnection(dbURL, user, pwd); 
    Statement statement = conn.createStatement(); 
    ResultSet rs = statement.executeQuery(query);
    User userObj;
    ArrayList<User> users = new ArrayList<User>();
    statement.close();

    while(rs.next())
                   {
    userObj = new User(rs.getString(2), rs.getString(3), rs.getString(4), rs.getString(5),     rs.getString(6));
    users.add(userObj);
           }
    Iterator it = users.iterator();
    User tempUser;

    while(it.hasNext())
                   {
        tempUser = (User) it.next();

        %>
        Username: <%= tempUser.getUserName() %><br>
        Password: <%= tempUser.getUserPass() %><br>
        First Name: <%= tempUser.getFirstName() %><br>
        Last Name: <%= tempUser.getLastName() %><br>
        Email: <%= tempUser.getEmailAddress() %><br>
        <%
    }

} catch( ClassNotFoundException e ){ 
    System.err.println( "Database Driver class not Found!" ); 
    e.printStackTrace(); 
} catch( SQLException e ){ 
    e.printStackTrace(); 
} finally { 
    try { 
        if ( conn != null ) { 
            conn.close(); 
        } 
    } catch ( SQLException e ) { 
        System.err.println( "Problems when closing connection" ); 
        e.printStackTrace(); 
    } 
} 
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:30:11.120

您也必须关闭 ResultSet。您可以使用 PreparedStatement 而不是 Statement 来避免 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:11:29.333

在 jsp 页面中编写 java 代码并不是一个好习惯。将您的 JDBC 代码放入 java bean。这里是来自oracle（原sun）[的jsp页面中JavaBeans组件的解释。](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPBeans.html)

# php - 升级到 XE2 后，使用 DCPcrypt 的 Delphi 程序无法从 PHP 解密

> ID：12000124
> 
> 赞同：5
> 
> 时间：2012-08-17T05:12:37.323
> 
> 标签：php, delphi, rijndael

我有一个在 Delphi 2007 中开发的应用程序，其中一个值由 PHP 加密并在应用程序中解密。加密算法是 RIJNDAEL 128。当我移动 XE2 并安装最新版本的 DCPcrypt 应用程序运行但不再能够从 PHP 解密加密字符串。结果看起来像中文字符，所以我想知道是否需要修改我对加密密钥、向量或加密字符串的处理以解释 XE2 使用 Unicode 字符的事实。

PHP 加密由以下命令执行： (mcrypt_cbc(MCRYPT_RIJNDAEL_128,$key,$date_str,MCRYPT_ENCRYPT,$iv))

两个相关的 Delphi 函数在这里：

```
function PadWithZeros(const str : string; size : integer) : string;
var
  origsize, i : integer;
begin
  Result := str;
  origsize := Length(Result);
  if ((origsize mod size) <> 0) or (origsize = 0) then
  begin
    SetLength(Result,((origsize div size)+1)*size);
    for i := origsize+1 to Length(Result) do
      Result[i] := #0;
  end;
end;

procedure TfrmMain.btnDecryptClick(Sender: TObject);
var
  Cipher : TDCP_rijndael;
  Data, Key, IV : string;
begin
  // Pad Key and IV with zeros as appropriate
  Key := PadWithZeros(boxKey.Text,KeySize);
  IV := PadWithZeros(boxIV.Text,BlockSize);
  // Decode the Base64 encoded string
  Data := Base64DecodeStr(boxCipherTextIn.Text);
  // Create the cipher and initialise according to the key length
  Cipher := TDCP_rijndael.Create(Self);
  if Length(boxKey.Text) <= 16 then
    Cipher.Init(Key[1],128,@IV[1])
  else if Length(boxKey.Text) <= 24 then
    Cipher.Init(Key[1],192,@IV[1])
  else
    Cipher.Init(Key[1],256,@IV[1]);
  // Decrypt the data
  Cipher.DecryptCBC(Data[1],Data[1],Length(Data));
  // Free the cipher and clear sensitive information
  Cipher.Free;
  FillChar(Key[1],Length(Key),0);
  // Display the result
  boxPlainTextOut.Text := Data;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T08:44:17.133

该问题与字符编码有关，但并不是 DCPCrypt 无法处理 UTF-16。

PHP 字符串是 UTF-8。所以你将密码（'Key'）从 PHP 传递给 Dephi 作为 base64 编码的字符串。奇怪的是，您将解码的密钥存储在 UTF-16LE 字符串中。更合适的是 rawbytestring 或 TBytes 或 TMemoryStream。Key 有效负载的二进制布局现在与编码端的二进制布局不同，因为它被键入为 UTF16-LE（在不正确的 Delphi 术语中，'unicode string' - Microsoft 和 Embarcadero 恶意使用）。

由于显而易见的原因，这行代码在“unicode”（原文如此）编译器中也是错误的......

```
FillChar(Key[1],Length(Key),0); 
```

## 边注

我是 TurboPower LockBox 3 的作者，我在论坛上遇到的第一个问题源于 ansistrings、utf-8 字符串和 utf-16le 字符串之间的混淆。很多人认为 PHP 理解的密码“abc”与 Delphi 2010 中的“abc”密码相同。密码库从密码字符串中使用的是字符串编码产生的二进制有效负载，而不是其语义作为字符串的意思。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T01:25:51.560

该应用程序现在可以在 XE2 中正确编译，并且能够从使用 Delphi 2007 编译的版本中解密记录。感谢大家的评论。不同的视角有助于明确何时需要将变量定义为 ANSI 字符串。

如果其他人正在尝试类似的更新并需要解密 PHP 中生成的密文，我的解密函数和支持的 padWithZeros() 函数来自 DCPcrypt 站点，因此我将修改后的代码发布在这里。我也不应该在以下位置安装 2012 年 7 月 21 日更新到 DCPcrypt 的 XE2：[http](http://www.pepak.net/files/tools/dcpcrypt.zip) ://www.pepak.net/files/tools/dcpcrypt.zip 。

```
function TForm1.AESDecrypt(const DecKeyStr: AnsiString;
                              const DecIVStr: AnsiString;
                              const CypherTextIn: AnsiString): String;
var
  Cipher : TDCP_rijndael;
  Data, Key, IV : AnsiString;
begin
  // Pad Key and IV with zeros as appropriate
  Key := PadWithZeros(DecKeyStr,KeySize);
  IV := PadWithZeros(DecIVStr,BlockSize);
  // Decode the Base64 encoded string
  Data := Base64DecodeStr(CypherTextIn);
  // Create the cipher and initialise according to the key length
  Cipher := TDCP_rijndael.Create(nil);
  if Length(DecKeyStr) <= 16 then
    Cipher.Init(Key[1],128,@IV[1])
  else if Length(DecKeyStr) <= 24 then
    Cipher.Init(Key[1],192,@IV[1])
  else
    Cipher.Init(Key[1],256,@IV[1]);
  // Decrypt the data
  Cipher.DecryptCBC(Data[1],Data[1],Length(Data));
  // Free the cipher and clear sensitive information
  Cipher.Free;
  FillChar(Key[1],Length(Key),0);
  // Display the result
  Result := String(Data);
(* *)
end;

function TForm1.PadWithZeros(const str:AnsiString; size:integer):AnsiString;
var
  origsize, i : integer;
begin
  Result := str;
  origsize := Length(Result);
  if ((origsize mod size) <> 0) or (origsize = 0) then
  begin
    SetLength(Result,((origsize div size)+1)*size);
    for i := origsize+1 to Length(Result) do
      Result[i] := #0;
  end;
end; 
```

# ruby-on-rails - Rails 3：更改输入框长度

> ID：12000126
> 
> 赞同：0
> 
> 时间：2012-08-17T05:12:49.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, twitter-bootstrap, simple-form

使用带有 Twitter Bootstrap 和 Simple_form 的 Rails 3，我在更改此字段中输入框的长度时遇到问题：

```
<div class="input-prepend input-append">
   <%= f.input :price, :wrapper => :append do %>
      <span class="add-on">$</span>
      <%= f.input_field :price %>
      <span class="add-on">.00</span>
   <% end %>
</div> 
```

其他人说在 :price 变量之后添加：

```
:input_html => {:size => 15} 
```

“do”循环似乎改变了规则，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:31:32.503

尝试

```
:style => "width: 100px;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:35:44.173

Twitter 引导程序为此提供了 css 类。根据您想要的大小，您可以添加类`input-min`、、`input-small`等等[。](http://twitter.github.com/bootstrap/base-css.html#forms)您还可以使用跨度类，例如,等。`input-large``span1``span2`

```
<div class="input-prepend input-append">
   <%= f.input :price, :wrapper => :append do %>
      <span class="add-on">$</span>
      <%= f.input_field :price, :class => 'input-medium' %>
      <span class="add-on">.00</span>
   <% end %>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T21:23:00.963

我正在使用表单在`f.input`表单中创建带有标签的控件`:class => 'form-horizontal'`，使用类属性或样式属性（直接或作为哈希，我尝试过的任何方式）对我不起作用，并且对生成的 HTML 的影响为零。

这对我有用：

```
<%= f.input :description, input_html: { class: 'span12' } %> 
```

这适用于 Bootstrap 列布局类（“span1”、“span2”等）、输入大小调整类（“input-large”、“input-xxlarge”等）或您想要的任何自定义类。诀窍是使用`input_html`密钥。您也可以使用`label_html`键弄乱标签，但这可能会弄乱表单水平布局。

看起来`:input_html => {**:size** => 15}`SimpleForm 忽略了 size 键...当我厌倦了它时，它并没有影响 HTML 输出。

我在 SimpleForm 文档中找到了这个： [https ://github.com/plataformatec/simple_form#usage](http://github.com/plataformatec/simple_form#usage)

# maven - 在 Maven 中使用通用配置文件和过滤器

> ID：12000129
> 
> 赞同：0
> 
> 时间：2012-08-17T05:13:25.857
> 
> 标签：maven, maven-assembly-plugin

我有 3 个模块链接到与此类似的父项目。

```
root (pom.xml)
   +--- mod1 (pom.xml)
   +--- mod2 (pom.xml)
   +--- mod3 (pom.xml) 
```

Mod3 是用于打包目的的模块。我在 mod1 和 mod2 的 config 文件夹中有一些配置文件。我需要使用配置文件和过滤器更新这些属性文件中的一些值。是否可以为这两个模块提供通用配置文件和过滤器。如果是这样，我应该在哪个 pom.xml 中包含配置文件和过滤器详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:02:38.277

您可以在所有模块中定义相同的配置文件（具有相同的 id），当您从 paren 模块调用此配置文件时，此配置文件将在子模块中激活。

如果您从父模块执行

```
mvn -P test clean package 
```

它在树调用模块中产生相同的调用。所以在每个 pom.xml 中你指定你需要什么过滤。

希望这有帮助。

# c# - 使用语句 FileStream 和/或 StreamReader - Visual Studio 2012 警告

> ID：12000136
> 
> 赞同：39
> 
> 时间：2012-08-17T05:15:13.353
> 
> 标签：c#, .net, dispose, using, visual-studio-2012

新的 Visual Studio 2012 抱怨我一直使用的常见代码组合。我知道这似乎有点矫枉过正，但我​​在我的代码中做了以下“只是为了确定”。

```
using (var fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
    using (var sr = new StreamReader(fs))
    {
        // Code here
    }
} 
```

Visual Studio 正在“警告”我，我不止一次处理 fs。所以我的问题是，写这个的正确方法是：

```
using (var fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
    var sr = new StreamReader(fs);
    // do stuff here
} 
```

或者我应该这样做（或其他未提及的变体）。

```
var fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

using (var sr = new StreamReader(fs))
{
    // Code here
} 
```

我在 StackOverflow 中搜索了几个问题，但没有找到直接解决此组合最佳实践的内容。

谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-17T05:29:46.723

以下是[微软推荐](http://msdn.microsoft.com/en-us/library/ms182334.aspx)的做法。它又长又笨重，但很安全：

```
FileStream fs = null;
try
{
    fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    using (TextReader tr= new StreamReader(fs))
    {
        fs = null;
        // Code here
    }
}
finally
{
    if (fs != null)
        fs.Dispose();
} 
```

此方法将始终确保处理应该处理的所有内容，尽管可能会引发什么异常。例如，如果`StreamReader`构造函数抛出异常，`FileStream`仍然会被正确处理。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-18T20:37:46.737

> Visual Studio 正在“警告”我，我不止一次处理 fs。

你是，但这很好。[IDisposable.Dispose](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)的文档内容如下：

> 如果多次调用对象的**Dispose方法，则对象必须忽略第一次调用之后的所有调用。**如果多次调用其**Dispose**方法，则该对象不得引发异常。

基于此，警告是虚假的，我的选择是保留代码原样，并禁止警告。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-17T18:24:34.393

由于 Dan 的答案似乎只适用于 StreamWriter，我相信这可能是最可接受的答案。（Dan 的回答仍然会使用 StreamReader 给出两次已处理的警告 - 正如 Daniel Hilgarth 和 exaceratedexpert 所提到的，StreamReader 会处理文件流）

```
using (TextReader tr = new StreamReader(new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)))
{
    string line;
    while ((line = tr.ReadLine()) != null)
    {
        // Do work here
    }
} 
```

这与 Daniel Hilgarth 的回答非常相似，修改为通过 StreamReader 上的 Using 语句调用 dispose，因为现在很清楚 StreamReader 将在 FileStream 上调用 dispose （根据所有其他帖子，参考的文档）

更新：

我找到了这篇文章。为了它的价值。 [处理流阅读器会关闭流吗？](https://stackoverflow.com/questions/1065168/does-disposing-streamreader-close-the-stream)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T05:17:19.267

是的，正确的方法是使用您的第一个替代方法：

```
using (FileStream fs = new FileStream(filePath, FileMode.Open,
                                      FileAccess.Read, FileShare.ReadWrite)) 
{ 
    TextReader tr = new StreamReader(fs); 
    // do stuff here 
} 
```

原因如下：
处理`StreamReader`only 会处理 the ，`FileStream`所以这实际上是您需要处理的唯一事情。

您的第二个选项（只是内部“使用”）不是解决方案，因为`FileStream`如果`StreamReader`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T16:06:56.997

这是因为您使用的方式在`StreamReader`处理流时会对其进行处理。所以，如果你也处理流，它会被处理两次。有些人认为这是一个缺陷——`StreamReader`但它仍然存在。在 VS 2012 (.NET 4.5) 中，可以选择`StreamReader`不处理流，使用新的构造函数：http: [//msdn.microsoft.com/en-us/library/gg712952](http://msdn.microsoft.com/en-us/library/gg712952)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-18T16:52:36.827

两种解决方案：

**A** ) 您信任 Reflector 或 Documentation，并且您知道`*Reader`并将`*Writer`关闭底层证券`*Stream`。但是警告：如果抛出异常，它将不起作用。所以这不是推荐的方式：

```
using (TextReader tr = new StreamReader(new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)))
{
    // Code here
} 
```

**B**）您忽略了文档状态的警告`The object must not throw an exception if its Dispose method is called multiple times.`这是推荐的方法，因为它是始终使用的好习惯`using`，并且在抛出异常的情况下是安全的：

```
[SuppressMessage("Microsoft.Usage", "CA2202:Do not dispose objects multiple times")]
internal void myMethod()
{
    [...]
    using (FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
    using (TextReader tr = new StreamReader(fs))
    {
        // Code here
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T19:08:33.890

考虑到这个（完全合法的！）问题产生的所有废话，这将是我的偏好：

```
FileStream fs = null;
TextReader tr= null;
try
{
    fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    tr= new StreamReader(fs);
    // Code here
}
finally
{
    if (tr != null)
        tr.Dispose();
    if (fs != null)
        fs.Dispose();
} 
```

下面的链接说明了完全合法的语法。IMO，这种“使用”语法比嵌套的“使用”要好得多。但我承认 - 它*不能解决*原来的问题：

*   [http://blogs.msdn.com/b/ericgu/archive/2004/08/05/209267.aspx](http://blogs.msdn.com/b/ericgu/archive/2004/08/05/209267.aspx)

*   [.NET - 用单个 using 语句替换嵌套 using 语句](https://stackoverflow.com/questions/3973553/net-replacing-nested-using-statements-with-single-using-statement)

恕我直言...

# javascript - 在 Jquery 的 Switchify Api 中更改颜色

> ID：12000138
> 
> 赞同：1
> 
> 时间：2012-08-17T05:15:21.387
> 
> 标签：javascript, jquery, css

我正在使用此处找到的**jquery的****switchify api** ....[链接](http://rawnet.github.com/jquery-switch/)

 **我已成功实现代码，但我只关心在哪里可以更改**开**和**关**位置的背景颜色。在这里你可以看到**打开**位置是绿色，**关闭**位置是白色（一些白色的阴影:)）。我想将**关闭**位置的颜色更改为**绿色**、**红色**、**蓝色**或任何东西..请照亮...

![在此处输入图像描述](../Images/b469596ab97a71f3788f40d89cbb1561.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:32:07.480

你有 css 文件名 jquery.switch.css 他们你可以编辑并指定你想要的颜色

```
.ui-switch-on{
   background: green;
   border-bottom-right-radius: 0;
   border-color: #006600;
   border-right: medium none #006600;
   border-top-right-radius: 0;
   padding-right: 20px;
}
.ui-switch-off{
   background:yellow;
   border-bottom-left-radius: 0;
   border-color: #660000;
   border-left: medium none #660000;
   border-top-left-radius: 0;
   padding-left: 20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:21:51.153

用萤火虫检查有两个类。**ui-开启**& . **ui-switch-off**就可以了。只需覆盖您的样式即可。例如这样写：

```
.ui-switch-on{
    background:red !important;
}
.ui-switch-off{
    background:yellow !important;
} 
```**

# php - 使用 php Query_String 的结果

> ID：12000145
> 
> 赞同：0
> 
> 时间：2012-08-17T05:15:59.647
> 
> 标签：php, wordpress

我必须在我的 URL 末尾添加一个查询，如下所示：

[http://www.somewordpressite.com/?page_id=57?login=failed](http://www.somewordpressite.com/?page_id=57?login=failed)

现在我需要检查 '?login=failed' 是否存在，以便加载正确的模板。

我尝试了很多变化，但我似乎无法抓住它。

```
<?php

$checkurlquery[] = $_SERVER['QUERY_STRING'];
//echo json_encode($_GET, JSON_HEX_TAG);

foreach($checkurlquery as $key => $v){
  $dice = $checkurlquery[$key];
  echo ($dice);
} 
?> 
```

**结果**：page_id=57?login=failed

最终，我只是想到达这里：

```
if ( //LOGIN failed )) {
        get_template_part( 'login', 'failed' );
} else {
    get_template_part( 'login', 'form' );
} 
```

如何检查 login=failed，以便我可以使用它来加载正确的模板部分？谢谢。

**编辑**：是的，我能够更改 URL，所以它可以是：[http://www.somewordpressite.com/?page_id=57&login=failed](http://www.somewordpressite.com/?page_id=57&login=failed)，但它产生了一个问题。因为 Wordpress 使用那个“？”，所以如果我在主页上，并且登录失败，我会收到 404 错误：

这个网址没问题，抓取索引页：
www.site.com/ ?login=failed

此 URL 是 404 错误：
www.site.com/&login=failed

**编辑**：这是 Wordpress functions.php 中必要的更新功能： [登录后重定向，Wordpress URL](https://stackoverflow.com/questions/12001188/redirect-after-login-wordpress-urls)

然后在 header.php（或您选择的位置）中，添加：

```
 <?php

if(isset($_GET['login']) === true and $_GET['login'] === 'failed')
{
   get_template_part( 'login', 'failed' );
} else {
   get_template_part( 'login', 'form' );
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:21:23.993

你不能使用普通的查询字符串吗

```
http://www.somewordpressite.com/?page_id=57&login=failed 
```

并使用类似的东西

```
if ($_GET['login'] == 'failed') {
        get_template_part( 'login', 'failed' );
} else {
    get_template_part( 'login', 'form' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:23:18.637

如果要测试查询字符串参数是否存在

```
if(isset($_GET['LOGIN']) === true)
{
 // it has at least been set
} 
```

此外，如果您还想测试特定值

```
if(isset($_GET['login']) === true and $_GET['login'] === 'failed')
{
 // it been set and it equals a specific value
} 
```

# jquery - Twitter引导日期选择器克隆

> ID：12000146
> 
> 赞同：3
> 
> 时间：2012-08-17T05:16:00.760
> 
> 标签：jquery, twitter-bootstrap, datepicker, clone

我使用漂亮的简单日期选择器进行 twitter 引导[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

```
<div class="input-append datepick">
    <input size="16" type="text">
    <span class="add-on"><i class="icon-th"></i></span>
</div> 
```

我试图用 datepicker 克隆 div：

```
 $('#addButton').click(function() {

        var newStr = $("#makeList").find(".additem-block").last().clone(true).appendTo("#makeList");

        newStr.find(".datepick").each(function() {
            $(this).attr("id", "").removeData('datepicker').unbind();
            $(this).val('');
            $(this).datepicker();
       });
   }); 
```

当我单击 datepicker 按钮时，它会在两个位置打开 datepicker div：原始按钮上方和克隆按钮上方。

如何正确克隆它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T08:25:21.320

3小时的实验得出了结果：

```
newStr.find(".datepick").each(function() {
    $(this).attr("id", "").removeData().off();
    $(this).find('.add-on').removeData().off();
    $(this).find('input').removeData().off();
    $(this).datepicker();
}); 
```

不漂亮，但有效。

# email - 哪个文件包含magento中的核心/会话功能？

> ID：12000161
> 
> 赞同：1
> 
> 时间：2012-08-17T05:18:33.653
> 
> 标签：email, session, magento

我需要自定义别人的代码，

所以我发现他们用

```
 Mage::getSingleton('core/session')->getMyCustomBlockInfo(); 
```

在 Order.php 文件中用于自定义订单电子邮件

所以我找不到这个功能 `getMyCustomBlockInfo();`

谁能告诉我这个函数在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:50:14.027

这些是魔术函数 get() 和 set() 并且您在此处询问设置为的会话变量

```
Mage::getSingleton('core/session')->setMyCustomBlockInfo(); 
```

在您的代码中的某处。如果您使用终端，您可以通过以下 grep 轻松找到：

```
grep '>setMyCustomBlockInfo(' . -rsni 
```

它将列出您的变量设置为会话的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:37:21.320

**例子 ：**

```
Mage::getModel('catalog/product'); //or
Mage::getSingleton('catalog/product'); 
```

代码必须在“ **../app/core/Mage/Catalog/Model/Product.php** ”文件中

**然后**

```
Mage::getSingleton('core/session'); 
```

代码必须在“ **../app/core/Mage/Core/Model/Session.php** ”文件中

* * *

因为**Mage_Core_Model_Session 类**的 parent::parent 是**Varien_Object**，所以你可以做所有的魔法功能，你可以**->getData()**看到里面的**数据**。

```
Mage::getSingleton('core/session')->getData(); 
```

关于你的问题，当你打电话时 ->getData() 你可以看到数据：[my_custom_block_info]

你可以用 call 设置它

```
Mage::getSingleton('core/session')->setMyCustomBlockInfo('what');

Mage::getSingleton('core/session')->getMyCustomBlockInfo();
// will return 'what' 
```

# css - 为什么没有规则取消折叠边距

> ID：12000166
> 
> 赞同：1
> 
> 时间：2012-08-17T05:19:19.233
> 
> 标签：css, margin

在某些情况下，元素的垂直边距会塌陷。有时作者不希望这种情况发生，我知道“取消折叠”边距的唯一方法是：

*   设置`border`大小 >=`1px`
*   设置`padding`大小 >=`1px`

这些变通方法对我来说很有意义，但它们只是：*变通方法*，并且它们有缺点。我很惊讶没有某种 css3 属性，例如`margin-collapse: none;`，类似于`border-collapse`.

设置边框/填充是展开边距的唯一方法真的是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:33:39.460

不，还有许多其他方式，包括浮动、清除、绝对定位、设置`overflow`为 以外的值`visible`、设置某个`min-height`等，您可以根据[规范说明](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)来确定。

但是你是对的，所有这些都是具有各种副作用和缺点的解决方法，并且在 CSS like 中没有真正的“关闭开关” `margin-collapse`，甚至在 CSS3 盒模型模块中也没有。一个可能的理由是保证金崩溃应该自然发生，因此可以防止它的唯一方法是作为副作用，但这只是我的猜测，因为我同意有几种情况不直观或不合适。

也就是说，如果您喜欢冒险，可以在[www-style mailing list](http://lists.w3.org/Archives/Public/www-style)上提出建议，看看他们怎么说。不过，我认为你不会有太多的运气。

# linux - Linux/x86_64 上的跨进程共享内存

> ID：12000168
> 
> 赞同：1
> 
> 时间：2012-08-17T05:19:29.987
> 
> 标签：linux, shared-memory, mmap

关于将共享内存与进程一起使用，我有几个问题。我查看了之前的几篇帖子，但无法准确地收集到答案。在此先感谢您的帮助。

1.  我正在使用 shm_open + mmap，如下所示。此代码按预期工作，父子交替递增 g_shared->count（同步不可移植；它仅适用于某些内存模型，但对于我现在的情况来说已经足够了）。但是，当我将 MAP_SHARED 更改为 MAP_ANONYMOUS | MAP_SHARED，内存不共享，程序挂起，因为“标志”没有翻转。删除该标志可以确认每个进程从 0 到 10 的计数发生了什么（意味着每个进程都有自己的结构副本，因此有“计数”字段）。这是预期的行为吗？我不希望内存由文件支持；我真的很想模拟如果这些是线程而不是进程可能会发生什么（出于其他原因，它们需要是进程）。

2.  我真的需要 shm_open 吗？由于进程属于同一层次结构，我可以单独使用 mmap 吗？我知道如果没有“执行人员”，这将是相当简单的，但是当“分叉”后面有一个“执行人员”时，我该如何让它工作？

3.  我在 x86_64 (Intel i7-2600) 上使用内核版本 3.2.0-23。对于此实现，mmap 是否提供与共享内存相同的行为（正确性和性能），而 pthread 共享相同的全局对象？例如，MMU 是否将段映射为“可缓存”MTRR/TLB 属性？

4.  cleanup_shared() 代码是否正确？它是否泄漏了任何内存？我怎么查？例如，是否有 System V 的“ipcs”等价物？

谢谢，/Doobs

shmem.h：

```
#ifndef __SHMEM_H__
#define __SHMEM_H__

//includes

#define LEN 1000
#define ITERS 10

#define SHM_FNAME "/myshm"

typedef struct shmem_obj {
    int count;
    char buff[LEN];
    volatile int flag;
} shmem_t;

extern shmem_t* g_shared;
extern char proc_name[100];
extern int fd;

void cleanup_shared() {
    munmap(g_shared, sizeof(shmem_t));
    close(fd);
    shm_unlink(SHM_FNAME);
}

static inline 
void init_shared() {
    int oflag;

    if (!strcmp(proc_name, "parent")) {
        oflag = O_CREAT | O_RDWR;
    } else {
        oflag = O_RDWR;
    }

    fd = shm_open(SHM_FNAME, oflag, (S_IREAD | S_IWRITE));
    if (fd == -1) {
        perror("shm_open");
        exit(EXIT_FAILURE);
    }

    if (ftruncate(fd, sizeof(shmem_t)) == -1) {
        perror("ftruncate");
        shm_unlink(SHM_FNAME);
        exit(EXIT_FAILURE);
    }

    g_shared = mmap(NULL, sizeof(shmem_t), 
                    (PROT_WRITE | PROT_READ), 
                    MAP_SHARED, fd, 0);
    if (g_shared == MAP_FAILED) {
        perror("mmap");
        cleanup_shared();
        exit(EXIT_FAILURE);
    }
}

static inline 
void proc_write(const char* s) {
    fprintf(stderr, "[%s] %s\n", proc_name, s);
}

#endif // __SHMEM_H__ 
```

shmem1.c（父进程）：

```
#include "shmem.h"

int fd;
shmem_t* g_shared;
char proc_name[100];

void work() {
    int i;
    for (i = 0; i &lt ITERS; ++i) {
        while (g_shared->flag);
        ++g_shared->count;
        sprintf(g_shared->buff, "%s: %d", proc_name, g_shared->count);
        proc_write(g_shared->buff);
        g_shared->flag = !g_shared->flag;
    }
}

int main(int argc, char* argv[], char* envp[]) {
    int status, child;
    strcpy(proc_name, "parent");
    init_shared(argv);
    fprintf(stderr, "Map address is: %p\n", g_shared);

    if (child = fork()) { 
        work();
        waitpid(child, &status, 0);
        cleanup_shared();
        fprintf(stderr, "Parent finished!\n");
    } else { /* child executes shmem2 */
        execvpe("./shmem2", argv + 2, envp);
    } 
} 
```

shmem2.c（子进程）：

```
#include "shmem.h"

int fd;
shmem_t* g_shared;
char proc_name[100];

void work() {
    int i;
    for (i = 0; i &lt ITERS; ++i) {
        while (!g_shared->flag);
        ++g_shared->count;
        sprintf(g_shared->buff, "%s: %d", proc_name, g_shared->count);
        proc_write(g_shared->buff);
        g_shared->flag = !g_shared->flag;
    }
}

int main(int argc, char* argv[], char* envp[]) {
    int status;
    strcpy(proc_name, "child");
    init_shared(argv);
    fprintf(stderr, "Map address is: %p\n", g_shared);
    work();
    cleanup_shared();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:37:51.703

1.  传递 MAP_ANONYMOUS 会导致内核忽略您的文件描述符参数并给您一个私有映射。那不是你想要的。

2.  是的，您可以在父进程中创建匿名共享映射，派生并让子进程继承映射，与父进程和任何其他子进程共享内存。这显然无法在 exec() 中幸存下来。

3.  我不明白这个问题；pthreads 不分配内存。可缓存性将取决于您映射的文件描述符。如果它是磁盘文件或匿名映射，那么它就是可缓存内存。如果它是视频帧缓冲设备，则可能不是。

4.  这是调用 munmap() 的正确方法，但我没有验证除此之外的逻辑。所有进程都需要取消映射，只有一个应该调用 unlink。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T22:09:20.557

2b）作为一种中间立场，可以调用：

```
int const shm_fd = shm_open(fn,...);
shm_unlink(fn); 
```

在父进程中，然后通过 argp 或 envp 将 fd 传递给由 fork()/execve() 创建的子进程。由于这种类型的打开文件描述符将在 fork()/execve() 中继续存在，因此您可以在父进程和任何衍生进程中映射 fd。这是从我在 Ubuntu 12.04 / linux kernel 3.13 / glibc 2.15 下成功运行的代码复制和简化/清理的更完整的代码示例：

```
int create_shm_fd( void ) {
    int oflags = O_RDWR | O_CREAT | O_TRUNC;
    string const fn = "/some_shm_fn_maybe_with_pid";
    int fd;
    neg_one_fail( fd = shm_open( fn.c_str(), oflags, S_IRUSR | S_IWUSR ), "shm_open" );
    if( fd == -1 ) { rt_err( strprintf( "shm_open() failed with errno=%s", str(errno).c_str() ) ); }
    // for now, we'll just pass the open fd to our child process, so
    // we don't need the file/name/link anymore, and by unlinking it
    // here we can try to minimize the chance / amount of OS-level shm
    // leakage.
    neg_one_fail( shm_unlink( fn.c_str() ), "shm_unlink" );
    // by default, the fd returned from shm_open() has FD_CLOEXEC
    // set. it seems okay to remove it so that it will stay open
    // across execve.
    int fd_flags = 0;
    neg_one_fail( fd_flags = fcntl( fd, F_GETFD ), "fcntl" );
    fd_flags &= ~FD_CLOEXEC;
    neg_one_fail( fcntl( fd, F_SETFD, fd_flags ), "fcntl" );
    // resize the shm segment for later mapping via mmap()
    neg_one_fail( ftruncate( fd, 1024*1024*4 ), "ftruncate" );
    return fd;
  } 
```

我不是 100% 清楚是否可以按规范删除 FD_CLOEXEC 和/或假设这样做之后 fd 真的会在 exec 中存活下来。exec 的手册页不清楚；它说：“POSIX 共享内存区域未映射”，但对我来说，这与前面的一般评论是多余的，即不保留映射，也没有说 shm_open() 的 fd 将被关闭。当然，正如我所提到的，代码似乎在至少一种情况下确实有效。

我可能使用这种方法的原因是它似乎减少了泄漏共享内存段/文件名的机会，并且清楚地表明我不需要内存段的持久性。

# java - ListActivity 自定义 BaseAdapter；仅在重新排序原始列表时复制列表

> ID：12000169
> 
> 赞同：0
> 
> 时间：2012-08-17T05:19:32.663
> 
> 标签：java, android, duplicates, baseadapter, listactivity

我正在使用带有自定义 BaseAdapter 的 ListActivity。实现的`clear()`方法只清除列表`onResume()`，但如果我重新填充适配器并通知数据已更改，它会保持清晰。

我认为不需要任何代码，但是...

```
ArrayList<String> thisWorks = DatabaseMethods.retrieveData();
populateAdapter();

---------------------------
ArrayList<String> thisAddsSameDataWithEveryIntentCall = sortByDate(DatabaseMethods.retrieveData());
populateAdapter(); 
```

我的理解是，它很可能与内存地址更改有关。但是，SQLite 给我的数据不是按顺序排列的，每次都必须重新排序，因为我想要连续的日期。

我认为通过对数据进行排序，它每次都使用不同的内存地址，而恢复活动时，它正在查找旧地址。

调用 Activity 时防止数据重复的技巧？

* * *

## **编辑**

上面的 ArrayList thisWorks 将包含以下数据：

*   2013 年 1 月 9 日
*   2012 年 8 月 22 日
*   2012 年 7 月 26 日

如果我调用此活动，这些项目将填充 CustomAdapter。调用活动时，再次调用数据库函数（因为用户可能添加了数据），如果它没有更改，则使用相同的列表填充 CustomAdapter....一切都很好

上面的 ArrayList thisAddsSameDataWithEveryIntentCall 将在 SORTING 之前包含以下**数据**：

*   2013 年 1 月 9 日
*   2012 年 8 月 22 日
*   2012 年 7 月 26 日

排序后：

*   2012 年 7 月 26 日
*   2012 年 8 月 22 日
*   2013 年 1 月 9 日

如果我调用此活动，这些项目通常会在第一次填充 CustomAdapter。点击后退按钮，从堆栈中删除 Activity。点击按钮再次调用Activity：

*   2012 年 7 月 26 日
*   2012 年 8 月 22 日
*   2013 年 1 月 9 日
*   2012 年 7 月 26 日
*   2012 年 8 月 22 日
*   2013 年 1 月 9 日

重复。

有些东西没有被破坏。在选择日期选项后，我使用稍微修改过的列表版本，因为这次我不对数据进行排序，所以没有数据重复**。**

# phing - 检查属性是否已在 phing 中设置

> ID：12000185
> 
> 赞同：8
> 
> 时间：2012-08-17T05:21:54.630
> 
> 标签：phing

如何检查属性`${foo}`是否已设置？

奖励问题：如何*转义* `$`登录`<echo>`以便我可以输出`${foo}`字符串（不是`foo`变量替换）？

PS：尝试谷歌并阅读文档，但找不到答案。我很可能错过了什么

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T09:00:27.717

您需要在`isset`元素内放置一个`if`元素。

```
<if>
    <isset property="foo" /> 
```

该手册可[在此处](https://www.phing.info/docs/guide/trunk/conditions.html)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T16:29:19.607

如果您只需要在定义或未定义属性的情况下使构建失败，请查看`fail`任务：

[http://www.phing.info/docs/guide/stable/FailTask​​.html](http://www.phing.info/docs/guide/stable/FailTask.html)

# ruby - Rails 3.2.8 - 使用具有不同 primary_key 的旧系统

> ID：12000187
> 
> 赞同：0
> 
> 时间：2012-08-17T05:22:13.143
> 
> 标签：ruby, sql-server, ruby-on-rails-3, auto-increment

我正在创建一个与旧 SQL 数据库通信的 Rails 应用程序，我需要设置 primary_key。

最初我是这样做的：

```
class Post < ActiveRecord::Base
  attr_accessible :body, :title, :incrementer_id

  self.primary_key = "incrementer_id"

  before_create :next_seq, on: :create

  private

  def next_seq
    p = Post.last
    self.incrementer_id = p.blank? ? 1 : (p.incrementer_id.to_i + 1)
  end

end 
```

我需要创建 next_seq 因为 Rails 不会自动增加“incrementer_id”。

我不得不制作三元，因为第一项的 incrementer_id 是 nil 并且它给出了错误。我很想避免每次都做这个检查。

我想知道是否有最佳方法来执行 next_seq。更好的是，使其与数据库类型无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:08:39.237

首先，我不会指望该`Post.last`方法为您提供具有最高编号 ID 的项目。为此，您将`Post.maximum(:id)`. 在 Ruby 中，因为`&&`and`||`使用任何类型的值，而不仅仅是布尔值，并且`nil`被视为虚假，你可以说......

```
self.incrementer_id = (Post.maximum(:id) || 0) + 1 
```

这样做需要为每次保存额外往返数据库，并且找到最大的现有 ID 可能不是非常有效。如果你写了很多这样的记录，你可能会考虑在内存中使用一个 ID 池。为此，您需要在另一个表中存储下一个可用 ID 的行，并且当您的应用第一次需要一个新 ID 时，将其增加某个值，例如 10 或 100，实际上保留了许多 ID 供您使用应用实例。从该范围分配 ID 值，直到用完为止，然后像以前一样获取一个新的 ID 池。

如果您使用池化策略并且数据库由另一个应用程序共享，该应用程序通过将最大现有 ID 加 1 来计算新 ID，您可以通过从池中按降序分配 ID 来使您的策略与该策略兼容。

# c# - 应用程序在 FG 上时的 Toast 通知

> ID：12000193
> 
> 赞同：0
> 
> 时间：2012-08-17T05:22:50.600
> 
> 标签：c#, background, notifications, windows-phone-7.1, foreground

我有一个带有 BG 代理实现的应用程序。如果 BG 代理识别出任何升级可用性，那么它将通过 toast 通知通知用户。我对此有一个疑问。场景是这样的，如果应用程序退出并在 BG 中运行，则会显示 toast 通知（TN），一切都很顺利。但是，如果应用程序在 FG 和 BG 中运行，并且 BG 需要通知用户，则不会显示 TN，尽管所有内容都记录在日志文件中，但设备的 UI 上不会显示任何内容。这是正常的吗？还是应该做点什么？另外，有没有办法检测我的应用程序是否在 FG 中运行？如果是这样我不想启动 BG 任务，这可以实现吗？

所有答案和建议表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:36:43.960

您可以使用`Thread.CurrentThread.IsBackground`它来检查它是在后台还是前台，并相应地进行工作。您也可以`Thread.CurrentThread.IsAlive`根据自己的要求使用。您可以在这里找到有用的信息：http: [//msdn.microsoft.com/en-us/library/h158zycw](http://msdn.microsoft.com/en-us/library/h158zycw)

如果应用程序在后台使用，则`Toast Notifications`使用`Raw Notifictions`. 您可以从这里了解原始通知：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202977 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202977(v=vs.92).aspx)

总结一下，当应用程序是 BG 时，您可以使用 toast 通知，而当应用程序在 FG 中时，您可以使用原始通知

我还没有尝试过，但我想如果我没有错的话它应该可以工作。在[如何检测主应用程序是否从后台代理运行时也有一个类似的问题](https://stackoverflow.com/questions/7817094/how-to-detect-if-the-main-app-is-running-from-a-background-agent)

如果线程选项有效，那么它很好，否则您也可以尝试使用[http://www.windowsphonegeek.com/articles/WP7-Application-Lifecycle-and-Tombstoning](http://www.windowsphonegeek.com/articles/WP7-Application-Lifecycle-and-Tombstoning)上提到的应用程序状态属性来检查和跟踪您的状态应用程序，即如果它的 BG 或 FG。

# visual-studio-2012 - Visual Studio 2012 的注册表权限

> ID：12000194
> 
> 赞同：4
> 
> 时间：2012-08-17T05:22:54.117
> 
> 标签：visual-studio-2012

在创建 Web 应用程序期间，我收到以下弹出消息：

“Visual Studio 没有权限从注册表中读取模板信息，这通常是由注册表权限问题引起的。”

任何人有任何解决方案？请帮我。我想看看 Visual Studio 的新功能。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T17:44:35.593

这可能是一个很晚的答案，但我遇到了同样的问题，我在 msdn 页面上找到了解决方案：这是原始解决方案消息：

我在 Visual Studio 2010 和 Windows 7 中遇到了这个问题。我还没有找到这个问题的根源，但是我发现很多 Visual Studio 用户都遇到了它。我尝试了迈克尔的解决方案来解决这个问题，但它造成的伤害比其他任何事情都大。它甚至让 Visual Studio 启动到“Shell 模式”并告诉我注册无效。使用系统还原我回滚了 subinacl 工具和 Michaels 脚本所做的更改（它可能不适用于 Windows 7，首先导致错误）。作为一个长期的 V​​isual Studio 用户和一个很好的故障排除者，我知道 subinacl 是解决问题的正确工具，但脚本对于我的特定设置是不正确的。我将脚本调整如下：（这是一个批处理脚本）

```
 cd /d "%programfiles% (x86)\Windows Resource Kits\Tools"
    subinacl /subkeyreg HKEY_CLASSES_ROOT\VisualStudio* /setowner=domain\user
    subinacl /subkeyreg HKEY_CLASSES_ROOT\VisualStudio* /grant=everyone=f         
    /grant=administrators=f /grant=system=f
    pause 
```

我试图在授权命令中包含“setowner”命令（在同一行），但它会一直抛出错误。此脚本修复了我在 Windows 7 和 Visual Studio 2010 中的“请求的注册表访问权限”。如果您想尝试此脚本：按照 Michael 的说明操作，但使用本文中提供的脚本并将“域\用户”替换为适当的凭据。如果您将其安装在不同的地方或未使用 64 位操作系统，您可能还需要更改 Windows 资源工具包的路径。在使用此脚本之前，请备份您的注册表。

我希望这有帮助！

*原始网页是：[http ://social.msdn.microsoft.com/Forums/en-US/c273b0e1-7f46-4065-afaf-4edf285d2531/vista-wpfapplication-requested-registry-access-is-not-allowed](http://social.msdn.microsoft.com/Forums/en-US/c273b0e1-7f46-4065-afaf-4edf285d2531/vista-wpfapplication-requested-registry-access-is-not-allowed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T11:26:23.247

我也有这个问题。关注了 user2698666 的帖子，但没有成功。卡住进程监视器，发现有更多的注册表项导致了一个名为 WDExpress 的问题。以为我会发布我的修复以防其他人有同样的问题：

> subinacl /subkeyreg HKEY_CLASSES_ROOT\VisualStudio* /setowner=domain\user
> 
> subinacl /subkeyreg HKEY_CLASSES_ROOT\VisualStudio* /grant=everyone=f /grant=administrators=f /grant=system=f
> 
> subinacl /subkeyreg HKEY_CLASSES_ROOT\WDExpress* /setowner=domain\user
> 
> subinacl /subkeyreg HKEY_CLASSES_ROOT\WDExpress* /grant=everyone=f /grant=administrators=f /grant=system=f

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-09T10:28:40.780

我遇到了 Visual Studio 13 的问题，我想在其中为我新创建的解决方案添加一个 webtest 项目。尝试了上述技巧来设置 ACL，但没有奏效。

最后使用 Procmon.exe 找到 Visual Studio 正在执行的操作（仅包括进程名称 devenv.exe）并查找结果 Access Denied。它会告诉您哪些注册表项不可访问。

就我而言，是导致问题的 regkey HKCR.webtest (HKEY_CLASSES_ROOT.webtest)。获得所有权并分配访问权解决了我的问题。

我不知道问题的根源是怎么回事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-25T10:07:22.250

以上对我没有用，因为即使我是管理员，我也一直被 regedit 拒绝。

我在另一个网站上找到了这个：

```
psexec -i -d -s c:\windows\regedit.exe 
```

psexec 可在此处从 Microsoft 获得

[http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

这给了我完整的注册表访问权限。我试图为管理员所有者提供上述特定键，但 VS 2012 express 仍然抛出该注册表权限错误。所以我最后只是将Administrator添加到regedit中整个HKEY_LOCAL_MACHINE\SOFTWARE\Classes\目录的权限列表中。然后让管理员完全控制。

这行得通。我现在可以创建一个没有该地狱般错误的项目！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-16T20:28:56.117

这个问题与所讨论的上下文中的权限无关。该问题是由于 Microsoft 的安装程序测试马虎导致注册表中的模板文件路径不正确引起的。当用户尝试启动新项目时，不正确的路径会引发错误，并且按照 Microsoft 的风格，会显示关于权限的通用且无意义的错误消息。

这里是具体的问题。在某些机器中（假设`C:`是主驱动器并且`user1`是用户的登录名和版本 2013）模板文件的位置是`C:\users\user1\my documents\visual studio 2013\projects`. 不幸的是，安装程序在注册表中写入的安装路径是`C:\users\user1\documents\visual studio 2013\projects`. 因此，它指向`\documents`而正确的位置是`\my documents`。可以肯定的是，查看您的`visual studio 2013\projects`文件夹所在的位置 - 文档或我的文档 - 并将注册表项更改为正确的位置。

对于我的示例，密钥`HKEY_CURRENT_USER\software\Microsoft\VisualStudio\12.0\NewProjectDialog\MRUSettingsLocalProjectLocationEntries`位于路径中的`Value0`条目中。检查并更改以使其准确指向您的项目文件夹所在的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-09T01:00:22.157

Lars Meldgard 对 ProcMon 的使用是一个很好的提示，对我很有帮助。我只是想在 ProcMon 中包含一张拒绝访问的图片。我必须一次完成一个注册表项——这不是唯一的一个。这是非常麻烦和缓慢的，但我能够将它们一一敲掉，并赋予每一个完整的权利。（这部分也很麻烦，因为我必须取得所有权，然后关闭 regedit，然后再返回，这样我就可以设置权限；你不能一举搞定。）

[![在此处输入图像描述](../Images/51d39a96cafe956f66730dd4fadea6bf.png)](https://i.stack.imgur.com/1lolx.png)

# javascript - 水平条形图忽略 tickInterval、min 和 max 选项

> ID：12000202
> 
> 赞同：1
> 
> 时间：2012-08-17T05:23:22.913
> 
> 标签：javascript, jquery, jquery-mobile, jqplot

我一直在将 jqPlot 用于我参与的项目，到目前为止我对它非常满意。很齐全。但是，我现在正在开发的功能需要一个水平条形图。我的问题是我的图表当前显示 xaxis 刻度为十进制数增加 0.5。我不需要十进制值。我需要整数加 1。我的配置有点像这样：

```
var chartConfig = {
    seriesDefaults: {
        showMarker: false,
        shadowAngle: 135,
        pointLabels: {
            show: true,
            labelsFromSeries: true,
            seriesLabelIndex: 2,
            edgeTolerance: -50
        },
        renderer: $.jqplot.BarRenderer,
        rendererOptions: {
            barWidth: 25,
            barPadding: 0,
            barDirection: 'horizontal'
        }
    },
    axes: {
        xaxis: {
            min: 0,
            max: 4,
            tickInterval: 1
        },
        yaxis: {
            showTicks: true,
            renderer: $.jqplot.CategoryAxisRenderer,
            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
            tickOptions: {
                angle: -50,
                labelPosition: 'middle'
            }
        }
    }
}; 
```

但是，看起来 jqPlot 完全忽略了 xaxis tickInterval、min 和 max 选项值。我的输出图表如下所示：

![坏图表](../Images/01abc7c7e354073a9616b425b54bcbb1.png)

我需要知道我在这里做错了什么。我的配置看起来没问题，但我无法让 jqPlot 使用我为 X 轴传递的值。非常感谢您对此事的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T23:42:25.437

我也遇到了水平条上的 tickInterval 的问题。我发现您必须同时指定最小值和最大值以及所需轴的刻度间隔。

你已经这样做了，但我想在某个地方说明这一点，因为我花了很长时间试图找出为什么滴答间隔不起作用，并且这篇文章不断出现在我的搜索中，所以希望它可以帮助其他人。

对于您的问题，可能与您的数据集有关。

如果这仍然导致您出现问题，则可以使用您的值发布完整的脚本，因为代码只是部分 atm。

谢谢

理查德

# database - 狮身人面像。随机结果有多快？

> ID：12000209
> 
> 赞同：0
> 
> 时间：2012-08-17T05:23:54.423
> 
> 标签：database, database-design, sphinx

有没有人有从具有+100,000,000（1 亿）条记录的索引中获取随机结果的经验。

目标是获得 30 个随机排序的结果，每秒至少 100 次。

实际上我的记录在 MySQL 中，但是从大表中选择 ORDER BY RAND() 是杀死 MySQL 的最简单方法。

Sphinxsearch 或任何你推荐的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:03:02.827

我没有那么大的索引可以尝试。

```
barry@server:~/modules/sphinx-2.0.1-beta/api# time php test.php -i gi_stemmed --sortby @random --select id
Query '' retrieved 20 of 3067775 matches in 0.081 sec.
Query stats:

Matches:
<SNIP>

real    0m0.100s
user    0m0.010s
sys     0m0.010s 
```

这是在一个相当强大的专用服务器上 - 提供实时查询（~20qps）

* * *

但老实说，如果您不需要过滤（即每个查询都有一个“WHERE”子句），您可以设置一个返回随机结果的系统 - 可以使用 mysql 执行此操作。仅使用 ORDER BY RAND() 是邪恶的（虽然 sphinx 在排序方面比 mysql 更好，但仍然在做基本相同的事情）。

您的数据有多“稀疏”？如果你的大部分 id 都被使用了，可以做类似的事情

```
$ids = array();
$max = getOne("SELECT MAX(id) FROM table");
foreach(range(1,30) as $idx) {
   $ids[] = rand(1,$max);
}
$query = "SELECT * FROM table WHERE id IN (".implode(',',$ids).")"; 
```

（可能想在 php 中使用 shuffle() 之后的结果，因为您很可能按 id 顺序从 mysql 中获取结果）

这将更有效率。如果您确实有漏洞，也许只需查找 33 行。有时会得到比需要更多的东西，（只是丢弃），但大多数时候你仍然应该得到 30 个。

（当然，您可以将“$max”缓存在某处，因此不必一直查找它。）

否则，您可以设置一个专用的“洗牌”列表。基本上是一个 FIFO 缓冲区，有一个线程，用随机结果填充它（可能使用上述系统，一次使用 3000 个 id），然后消费者直接从这个队列中读取随机结果。

FIFO，用 mysql 实现并不特别容易，所以可能使用不同的系统 - 可能是 redis，甚至只是 memcache。

# c - 使 C 库线程安全

> ID：12000211
> 
> 赞同：6
> 
> 时间：2012-08-17T05:24:00.273
> 
> 标签：c, multithreading, concurrency, shared-libraries

我正在用 C 编写一个共享库。我知道 C 函数不是线程安全的。

我的图书馆例程看起来像，

```
struct lib_handle {
....
};

int lib_init(lib_handle **handle);
int lib_process(lib_handle *handle);
....
.... 
```

每个方法都有一个指向`lib_handle`对象的指针。所有状态都存储在这个结构中。不使用全局变量。

我假设如果每个线程都创建自己的`lib_handle`实例，多个线程可以使用库函数。由于每个线程都有自己的句柄，所以everythibg 应该可以工作。

我还没有验证这个假设。我想知道你们对这个设计的看法，你们认为我可以将我的库声明为线程安全的，因为每个线程都有自己的句柄吗？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:27:57.510

这将使库线程的数据/状态安全。

但是您还必须确保您的库使用来自其他库的线程安全函数，例如 use`strtok_r`而不是`strtok`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:36:04.747

线程在共享内存空间中工作。不安全对象是可以被多个线程同时访问的对象。因此，如果每个线程都有一个 lib_handle 对象，就不会有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:06:16.323

如果每个线程都有一个私有的 lib_handle 对象，那么你的库应该是完全线程安全的；如果您让多个线程共享 lib_handle 对象，那么使用您的库的人在正确使用您的库的情况下仍然可以创建一个线程安全的程序（即，如果您使用全局变量，您的库本质上不是线程不安全的）。

如果这种操作模式（共享 lib_handle）很有趣，您应该清楚地将只读取 lib_handle 状态的函数和操纵 lib_handle 状态的函数分开。前者需要读锁，后者需要写锁（调用范围必须处理）。

对于它的价值，我已经使用了很多你描述的模式，并且喜欢它。

# jquery - 无法理解咖啡脚本

> ID：12000213
> 
> 赞同：-1
> 
> 时间：2012-08-17T05:24:19.330
> 
> 标签：jquery

这一行出现在我的代码中

```
search.court_type_popover = new ObjectListPopover(
  $('#pacer-flyout .jurisdiction-selector'), 
  'Jurisdiction', data, true, false, 
   $('#pacer-flyout input[name=pacersites]').val().split('|')) 
```

谁能解释我这段代码？它会返回什么？以及它将如何产生结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:32:20.807

除了末尾缺少分号外，这几乎是普通的 JavaScript：

```
search.court_type_popover = new ObjectListPopover(...); 
```

据我所知，这段代码指定`search.court_type_popover`为一个新`ObjectListPopover`对象并传入一些参数。

# python - Eclipse 有缩进指南吗？

> ID：12000219
> 
> 赞同：10
> 
> 时间：2012-08-17T05:25:01.070
> 
> 标签：python, eclipse-plugin, pydev

最近，我使用 Eclipse 来编辑我的 python 代码。但是缺少缩进指南，感觉不太好。那么如何为 Eclipse 添加自动缩进指南呢？有特定的插件吗？更重要的是，我尝试过EditBox。但是，你知道，在某些主题下这不是很自然......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-05T13:07:42.760

有一个插件可以很好地完成这项工作，称为**Indent Guide**

更新站点是[http://sschaef.github.io/IndentGuide/](http://sschaef.github.io/IndentGuide/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T11:13:02.053

我也使用 EditBox，并且通过正确的选项，它非常有用，并且不会过多地改变编辑器的外观。

如果您只想要像这样显示缩进/块的垂直灰线

![在此处输入图像描述](../Images/7444425f26063b2cb0403fc426e4b753.png)

这些是选项： ![在此处输入图像描述](../Images/f965166dd7ab90f0fa9c52bff5bd4b4f.png)

或者，如果您只想导入选项，请将其粘贴到文本文件中并导入。（您可能需要添加文件扩展名 .eb 才能正常工作）

```
#Editbox Eclipse Plugin Settings
#Fri Aug 17 12:58:32 CEST 2012
HighlightOne=true
FillGradient=false
FillSelected=true
RoundBox=true
BorderColorType=1
Name=Default
ExpandBox=false
BorderDrawLine=true
FillOnMove=true
Alpha=0
HighlightWidth=1
BorderWidth=1
HighlightColor=000000
BorderColor=00bbbb
FillKeyModifier=Alt
HighlightColorType=3
FillGradientColor=e1e1d0
Builder=Text2
HighlightDrawLine=true
FillSelectedColor=e1e1d0
BorderLineStyle=0
Colors=ffffff
HighlightLineStyle=0
NoBackground=false
CirculateLevelColors=false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T05:30:03.110

这里有两个使用 Eclipse 和 Python 的教程：

*   [http://blogs.msdn.com/b/ericgu/archive/2004/08/05/209267.aspx](http://blogs.msdn.com/b/ericgu/archive/2004/08/05/209267.aspx)

*   [http://www.caktusgroup.com/blog/2011/08/31/getting-started-using-python-eclipse/](http://www.caktusgroup.com/blog/2011/08/31/getting-started-using-python-eclipse/)

至于缩进，您应该能够简单地更改“编辑器”首选项。

关键是要确保“Pydev，编辑器”设置符合您的要求，并且任何其他 Eclipse“编辑器”设置都不会妨碍 :) 第二个链接更详细地讨论了这一点。

'希望有帮助！

PS：

您还可以在 Eclipse 中使用 Ctrl+Shift+P 进行“大括号匹配”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T10:18:21.150

至于我，我在 Eclipse 中使用 Python 所做的一切：

1.  安装 pydev
2.  将制表符设置为空格
3.  将标签长度设置为 4

    *   您可以通过显示不可打印的符号来使制表符和空格*可视化。*希望这就是你的意思。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T11:00:26.553

这在最新版本的 PyDev 中是开箱即用的（您可以在 处启用它`PyDev > Editor > Vertical Indent Guide`）。

如果您使用 LiClipse（[http://www.liclipse.com](http://www.liclipse.com) -- 这是 Eclipse+PyDev 和其他一些好东西），它还为其他编辑器提供缩进指南（它是使 PyDev 继续开发的商业对应物）。

# python - 如何在 Python 中为多个进程启动和共享一个且只有一个单独的进程？

> ID：12000220
> 
> 赞同：2
> 
> 时间：2012-08-17T05:25:09.230
> 
> 标签：python, multiprocessing

我知道如何使用[多处理](http://docs.python.org/library/multiprocessing.html)来启动一个单独的进程并进行并发数据处理。

我现在想知道的是，如果我有几个主进程（比如说几个 wsgi 进程），我怎样才能为所有主进程只创建一个单独的进程？

每个主进程都应该能够使用队列与单独的进程进行通信，但每个主进程都是在不同的 Python VM 中单独启动的。

例如：

*   进程 1 -> 启动单独的进程 -> 与单独的进程交谈
*   进程2->注意单独的进程已启动并且不要启动另一个->与单独的进程交谈
*   进程 3 -> 注意单独的进程已启动，不要启动另一个 -> 与单独的进程交谈

如果一个进程注意到该进程已经死亡，它可以重新启动它。

那可能吗 ？如何 ？

如果是，假设它必须涉及使用 PID 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:49:24.213

是的，这是可能的。您可以使用 pidfile 或者（如果您使用的是 Linux），您可以使用这样的套接字：[https](https://stackoverflow.com/a/7758075/639295) ://stackoverflow.com/a/7758075/639295 。

您可能还会考虑使用类似 redis 的东西来进行进程间通信。它有一个简单的 Python api，可以很容易地让多个进程监听另一个进程。

这是双方的一个例子，更大的类上的方法。

```
def redis_listener(self):
    r = redis.Redis(host='localhost', db=0)
    pubsub = r.pubsub()
    pubsub.psubscribe('a.channel')
    for message in pubsub.listen():
        logging.info('Received message: %s' % (message,))
        self.parse_message(message)

def redis_broadcaster():
    r = redis.Redis(host='localhost', db=0)
    pubsub = r.pubsub()
    pubsub.psubscribe('a.*')
    for message in pubsub.listen():
        if message['pattern'] == None:
            continue
        symbol = message['pattern'].split('.')[1]
        for listener in WATCHERS[symbol]:
            listener.write_message(unicode(message['data'])) 
```

# c++ - For循环中奇怪的LLVM无符号到有符号转换

> ID：12000223
> 
> 赞同：0
> 
> 时间：2012-08-17T05:25:34.970
> 
> 标签：c++, for-loop, llvm, unsigned, signed

我不确定这是否只发生在**Apple 的 LLVM Compiler 4.0 (XCode 4.4.1)**上，但我注意到以下行为：

```
NSUInteger currentIndex = 0;
NSUInteger sideSize = 2;

// Method A
for (NSInteger i = currentIndex-sideSize; i < currentIndex+sideSize; i++)
{
    printf("In the loop\n"); // WON'T be executed
}

// Method B
for (NSInteger i = (NSInteger)(currentIndex-sideSize); i < currentIndex+sideSize; i++)
{
    printf("In the loop\n"); // WON'T be executed
}

// Method C
for (NSInteger i = (NSInteger)(currentIndex-sideSize); i < (NSInteger)(currentIndex+sideSize); i++)
{
    printf("In the loop\n"); // WILL be executed
}

// Method D
NSInteger initialIndex = currentIndex-sideSize;
NSInteger finalIndex = currentIndex+sideSize;
for (NSInteger i = initialIndex; i < finalIndex; i++)
{
    printf("In the loop\n"); // WILL be executed
} 
```

方法 B 和方法 C 几乎相同，只是我们没有将加法运算符的结果显式转换为有符号值。

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:32:49.480

问题是，如果在表达式中存在有符号和无符号操作数，根据 C 标准，有符号操作数将被提升为**无符号**整数。然后发生的情况是，如果从 0 中减去 2，则结果为 -2，但由于它被视为无符号整数（在比较值时），它会溢出并最终成为一个大数。这就是为什么方法 B 中的循环不执行而方法 C 中的循环执行的原因（当您将结果和/或操作数显式转换为有符号时，不会发生溢出并且循环正确地从 -2 变为 2） .

这在 C 标准中是一件奇怪的事情，而不是在 LLVM 中。LLVM 完全遵循这里的标准。

# c# - 如何判断对象引用是否为空？

> ID：12000228
> 
> 赞同：13
> 
> 时间：2012-08-17T05:26:08.203
> 
> 标签：c#, object, null, visual-studio-2005, object-reference

确定对象引用变量是否为 的最佳方法是`null`什么？

是以下吗？

```
MyObject myObjVar = null;
if (myObjVar == null)
{
    // do stuff
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T05:29:10.330

是的，你是对的，如果你想执行任意代码，下面的代码片段是要走的路：

```
MyObject myObjVar; 
if (myObjVar == null) 
{ 
    // do stuff 
} 
```

顺便说一句：你的代码不会像现在这样编译，因为`myObjVar`在它被初始化之前就被访问了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T05:45:38.657

您可以使用 Object.ReferenceEquals

```
if (Object.ReferenceEquals(null, myObjVar)) 
{
   ....... 
} 
```

如果 myObjVar 为空，这将返回 true。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-17T05:29:58.333

你正在做的方式是最好的方式

```
if (myObjVar == null)
{
    // do stuff
} 
```

但是您可以使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224%28v=vs.100%29.aspx) `??`进行检查以及**分配某些内容**

```
var obj  = myObjVar ?? new MyObject(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T05:34:01.200

你可以：

```
MyObject myObjVar = MethodThatMayOrMayNotReturnNull();
if (if (Object.ReferenceEquals(null, myObjVar)) 
{
    // do stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-14T20:25:59.497

在`C# 7.0`你可以使用`is null`：

```
MyObject myObjVar = null;
if (myObjVar is null)
{
    // do stuff
} 
```

# jquery - 基于 Java 网络的聊天应用程序

> ID：12000230
> 
> 赞同：2
> 
> 时间：2012-08-17T05:26:15.080
> 
> 标签：jquery, jsp, gwt

我想开发一个基于 Web 的小型聊天应用程序。目前我已经使用 Applets 进行开发。那么我可以通过使用 JSP 和 servlet 来创建应用程序而不包括小程序。可能我想在我的 Web 应用程序中使用 JQuery 或 GWT。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:36:19.740

当然，您可以使用 JSP 和 jQuery 库实现聊天。jQuery 为 AJAX功能提供了一组丰富[的方法。](http://api.jquery.com/category/ajax/)但在我看来，GWT 最适合实现多功能聊天。它非常适合基于 AJAX 并具有丰富用户界面的应用程序。使用非常方便的客户端和服务器端之间的[远程过程调用](https://developers.google.com/web-toolkit/doc/2.1/tutorial/RPC)通信功能，您可以极大地简化应用程序的开发和 AJAX 实现。

[在这里](http://code.google.com/p/google-web-toolkit-incubator/wiki/ServerPushFAQ)，您可以找到有关服务器推送、线程处理和服务器端安全问题的一些问题的答案。这必然需要您开发一个聊天应用程序。

这里有一个关于 GWT 实现聊天的有趣示例：[第一](http://tcninja.blogspot.com/2009/07/how-to-create-simple-chat-using-gwt-and.html)部分和[第二](http://tcninja.blogspot.com/2009/07/how-to-create-simple-chat-using-gwt-and_15.html)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:54:22.930

是的，您可以使用 jsp 和 servlet 创建基于 Web 的聊天应用程序，而无需使用 applet。[这](http://www.web-tech-india.com/software/jsp_chat.php)是一个例子。您也可以下载应用程序和[源代码](http://www.web-tech-india.com/software/validate.php?fileName=chatsrc.zip)。看看它并在必要时使用 JQuery。

# c++ - 如何获取文件的字节数？

> ID：12000231
> 
> 赞同：1
> 
> 时间：2012-08-17T05:26:22.863
> 
> 标签：c++, c, bitarray

我知道一个简单的问题，我想做的是能够获取文件的字节以用于将这些字节添加到位数组中，然后我可以使用它来写入名为`bytes.exe`并启动它的文件。我知道如何在运行时读取现有文件的字节。但我不知道如何`bitarray[]`在设计时将文件的字节复制并粘贴到我的文件中。

目标是能够在运行时写入`bitarray[]`to `myfile.exe`，然后启动所述文件。`bitarray[]'s`基于许多不同的文件类型，我将使用很多，所以我正在寻找一种简单的方法。

是否应该使用某种反编译器？我只是查看了资源脚本，但我不想将任何依赖项附加到我的主 .exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:56:53.083

如果您的目标是 Windows，最简单的方法是嵌入`myfile.exe`为资源，然后在运行时加载资源并创建文件并将资源的内容写入新文件。

如果您不能使用资源，那么您需要创建一个源文件（.c 或 .h），该文件使用 的内容初始化一个字节数组，`myfile.exe`并将其作为构建的一部分。查看此答案以了解一种可能的方法：

[https://stackoverflow.com/a/73653/333127](https://stackoverflow.com/a/73653/333127)

**编辑**：经过进一步审查，我认为我上面引用的链接中的源代码不适用于二进制输入文件。这是我刚刚拼凑起来的一个快速替代方案：

```
#include <stdio.h>
#include <stdlib.h>

#define BYTES_PER_LINE 70

int main(int argc, char* argv[])
{
    FILE* fp;
    int ch;
    int numBytes = 0;

    if (argc < 2) {
        printf("Usage: tobytes <file>\n");
        exit(1);
    }

    fp = fopen(argv[1], "rb");
    if (fp == NULL) {
        printf("Cannot open file %s\n", argv[1]);
        exit(1);
    }

    printf("char fileContents[] = {\n");
    while ((ch = fgetc(fp)) != EOF) {
        if (numBytes > 0)
            printf(",");

        ++numBytes;
        if (numBytes % BYTES_PER_LINE == 0)
            printf("\n");

        printf("0x%x", ch);
    }
    printf("\n};\n");

    fclose(fp);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:10:55.273

不是 100% 清楚你想做什么，但为什么不写一个小程序来读取文件并将其转换为 C 数组。

也就是说，如果文件数据是：

```
01 02 03 04 (binary) 
```

该程序将生成一个文件：

```
char data[] = {0x01, 0x02, 0x03, 0x04}; 
```

然后将此程序作为应用程序的预构建步骤运行（在您的 Makefile 或您正在使用的任何构建系统中），并将输出生成到您的源代码树中。

这样，数据将被编译到您的应用程序中并静态可用。

正如我所说，我不清楚这是否是您要解决的问题。

# javascript - 来自 html 元素的 Javascript 调用函数

> ID：12000233
> 
> 赞同：-3
> 
> 时间：2012-08-17T05:26:33.787
> 
> 标签：javascript, jquery, html

假设我有一个这样的字符串

```
var methodString =  "<script>
var a;
var b;

function func1(v1, v2)
{
 ..///DO random stuff
}
</script>"; 
```

然后，在页面某处单击按钮后，我将此代码附加到正文的末尾

```
 $(body).append(methodString); 
```

**如何调用我刚刚附加的这个新函数**

```
$("button1").click(function() { func1(a,b); }); //This doesn't seem to recognize the new method. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:28:44.380

简单的 HTML

```
<button onclick="func1(a,b);">Click me</button> 
```

使用 jQuery

```
<script type="text/javascript">
    $('#myButton').click(function(){
        func1(a,b);
    });
</script>
<button id="myButton">Click me</button> 
```

# entity-framework - Microsoft 对实体框架中的二级缓存有什么建议？

> ID：12000240
> 
> 赞同：12
> 
> 时间：2012-08-17T05:27:24.680
> 
> 标签：entity-framework, caching, entity-framework-5, data-access-layer

我使用了 Jarek Kowalski 制作的“ [EF Provider Wrappers ”。](http://code.msdn.microsoft.com/EFProviderWrappers/Release/ProjectReleases.aspx?ReleaseId=4747)它工作正常，但我注意到“限制和免责声明”部分说：

> *除了示例代码中包含的内容之外，这些提供程序还没有经过广泛的测试，因此**您应该自担风险使用它们。***
> 
> *与任何其他示例一样，**Microsoft 不为其提供任何形式的支持**，但如果您发现错误或有功能建议，请使用此博客的联系表并让我知道。*

我在这里有点困惑，微软真的希望开发人员在没有任何官方支持（或推荐）的情况下在生产网站上使用 EnityFramework 进行二级缓存吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T07:04:02.560

没有官方的二级缓存支持。我什至不确定 EF Provider 包装器是否与 .NET 4.5 兼容。二级缓存在 EF 的未来版本[中积压](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015353-support-for-second-level-cache)。

您还可以实现自己的解决方案，因为[EF 是完全开源的](http://entityframework.codeplex.com/)。

顺便提一句。我见过几十个相当复杂的网站在生产中运行，没有任何缓存......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-18T16:18:27.413

现在有一个可用于 EF 6.x 的二级缓存提供程序

> Entity Framework 当前不支持查询结果的缓存。示例 EF 缓存提供程序可用于 Entity Framework 版本 5 和更早版本，但由于提供程序模型的更改，此示例提供程序不适用于 Entity Framework 6 和更高版本。该项目通过为 Entity Framework 6.1 应用程序启用查询结果缓存来填补空白。

[https://github.com/moozzyk/EFCache](https://github.com/moozzyk/EFCache)

并在其之上实现了 Redis 提供程序：

> 通过添加 Redis 支持来扩展 EFCache
> 
> 我想使用 Redis 将 L2 缓存添加到 EF - 当时没有可用的东西。
> 
> 我在 CodePlex 上找到了 Pawel Kadluczka (moozzyk) 编写的 EFCache

[https://github.com/silentbobbert/EFCache.Redis](https://github.com/silentbobbert/EFCache.Redis)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-09T09:55:59.580

Apache Ignite.NET 为实体框架提供分布式内存二级缓存：[https ://apacheignite-net.readme.io/docs/entity-framework-second-level-cache](https://apacheignite-net.readme.io/docs/entity-framework-second-level-cache)

# iphone - 为什么我的 tableView 不显示对象？

> ID：12000246
> 
> 赞同：0
> 
> 时间：2012-08-17T05:28:09.663
> 
> 标签：iphone, objective-c, search, tableview

首先，我想从我 100% 的 iPhone 开发新手开始。我相信对于有经验的人来说，这是一个非常简单的问题。无论如何，我想做的是：

用户应该能够通过 SearchUI 从我的数据库中搜索对象。如果对象存在，则将其显示在将显示搜索对象的 tableView 中。我设法从数据库中获取对象，但没有将它们实例化到 tableview 中并显示它们。

老实说，我不知道我做错了什么。所有的帮助都将不胜感激，如果可能的话，还会进行一些解释。根据方法 `- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects`- 我尝试将对象移动到 tableView 中但没有任何成功。您可以在TableView 数据源方法`FirstViewController.m`的末尾找到该方法。`pragma mark`这是我的代码：

FirstViewController.h 类

```
#import <UIKit/UIKit.h>
#import <RestKit/RestKit.h>

@interface FirstViewController : UIViewController <UITableViewDataSource,           RKObjectLoaderDelegate>
{ 
UISearchDisplayController *searchDisplayController;
UISearchDisplayController *searchBar;
UITableView *table;
NSArray *allItems;
NSArray *searchResults;

}

@property (nonatomic, retain) IBOutlet UISearchDisplayController     *searchDisplayController;
@property (nonatomic, retain) IBOutlet UISearchDisplayController *searchBar;
@property (nonatomic, retain) IBOutlet UITableView *table;
@property (nonatomic, copy) NSArray *allItems;
@property (nonatomic, copy) NSArray *searchResults;
@end 
```

FirstViewController.m 类

```
#import "FirstViewController.h"
#import "Task.h"

interface FirstViewController ()

end

implementation FirstViewController

@synthesize searchDisplayController;
@synthesize searchBar;
@synthesize allItems;
@synthesize searchResults;
@synthesize table;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
//self.listContent = [[NSArray alloc] initWithObjects:@"John", @"Paul", nil];

//self.filteredListContent = [NSMutableArray arrayWithCapacity:10];

[super viewDidLoad];    // Do any additional setup after loading the view, typically  from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
else
{
    return YES;
}
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller   shouldReloadTableForSearchString:(NSString *)searchString
{
return NO;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller  shouldReloadTableForSearchScope:(NSInteger)searchOption
{
return NO;
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)pSearchBar
{
[[RKObjectManager sharedManager].mappingProvider setMapping:[Task getMapping]  forKeyPath:@"tasks"];

NSString *path = [NSString stringWithFormat:@"%@/%@/%@", @"/book/1/tasks/", pSearchBar.text, @".json"];
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:path delegate:self];
NSLog(@"Search: %@", pSearchBar.text);  
}

#pragma mark - TableView Data Scource methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.searchResults count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
UITableViewCell *cell = nil;

cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

if(cell == nil)
{
    cell =  [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:@"MyCell"];
}

cell.textLabel.text = [self.searchResults objectAtIndex:indexPath.row];
return cell;
}

- (void) deselect { 
//[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow]  animated:YES];
 }

// Respond to user selection tap by coloring the navigation bar
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)newIndexPath
{

}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
self.searchResults = objects;

[self.table reloadData];

for(Task *task in objects)
{
    if ([task isKindOfClass:[Task class]])
    {
        NSLog(@"Loaded Book ID: %@ ; Name: %@ ; Book: %@", task.id, task.name,  task.book.name);  
    }
}

}

- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
NSLog(@"Encountered an error: %@", error);  
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:35:12.780

第1步。由于您的 TableView 是一个 IBOutlet，因此请检查该视图控制器的 .xib 文件中的 tableView 数据源和委托映射。我的怀疑是挂钩不正确。

第2步。如果 .xib 文件中的连接是正确的，那么你应该这样做

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
   self.searchResults = objects;
   NSLog(@"%@", searchResults)
   [self.table reloadData];

....
} 
```

并检查 NSLog 是否正在记录 searchResults 数组。如果由于某种原因为空，您的 numberOfRowsInSection 委托方法将返回 0，因此您的 tableView 将为空。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:18:25.353

在第一行

```
@interface FirstViewController : UIViewController <UITableViewDataSource,           RKObjectLoaderDelegate>
 { 
UISearchDisplayController *searchDisplayController;
UISearchDisplayController *searchBar;
UITableView *table;
NSArray *allItems;
NSArray *searchResults;
} 
```

用下面的代码替换这一行

```
@interface FirstViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, RKObjectLoaderDelegate>
 { 
UISearchDisplayController *searchDisplayController;
UISearchDisplayController *searchBar;
IBOutlet UITableView *table;
NSArray *allItems;
NSArray *searchResults;
} 
```

并在界面生成器中连接 tableview 委托和 tableview 数据源。

希望能帮助到你。

# actionscript-3 - MovieClip 没有反应我在翻转时的意图

> ID：12000247
> 
> 赞同：0
> 
> 时间：2012-08-17T05:28:09.953
> 
> 标签：actionscript-3, flash, event-listener

我以为我拥有它，但我仍然无法让我的电影剪辑播放（）。我得到了它在翻转时进入“updateBomb”功能的跟踪，但我的 currentBomb 不会进入第 2 帧并播放。任何想法为什么会发生这种情况？可能是因为我的影片剪辑在容器 MC 中吗？

```
 function getStarted(event:MouseEvent){
         startClip.removeEventListener(MouseEvent.ROLL_OVER, getStarted);

         for (var i:int = 1; i < 11; i++) {

             var currentBomb:MovieClip = bombClip["bomb_" + i];

             trace(currentBomb);
            currentBomb.addEventListener(MouseEvent.ROLL_OVER, function (evt:MouseEvent):void { updateBomb(currentBomb); });
            }

            bombClip.play();

     }

function updateBomb(currentBomb:MovieClip):void {
    trace("in update bomb");
    trace(currentBomb);
    currentBomb.gotoAndPlay(2);
} 
```

我在 updateBomb 中添加了一个跟踪 currentBomb，这就是我得到的

```
[object bombNum1_5]
in update bomb
[object bombNum1_5]
in update bomb
[object bombNum1_5]
in update bomb
[object bombNum1_5]
in update bomb
[object bombNum1_5]
in update bomb
[object bombNum1_5] 
```

当我翻转不同的炸弹时。我需要按名称引用炸弹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:48:39.593

您正在使用匿名函数添加事件侦听器，通过将 currentBomb 存储在鼠标悬停处理程序中来创建闭包。

但是，currentBomb 变量正在循环中被更改。每个匿名函数都有一个对它的引用。因此，当您将鼠标悬停在每个影片剪辑上时，它们都指向同一个炸弹（循环中的最后一个）。

而不是使用匿名函数，只需添加一个如下所示的事件侦听器。事件处理程序可以依赖事件来自 a 的事实`MovieClip`并调用它的`gotoAndPlay()`方法：

```
// inside the for loop...
currentBomb.addEventListener(MouseEvent.ROLL_OVER, updateBomb);

// roll over event handler
function updateBomb(event:MouseEvent):void
{
    var currentBomb:MovieClip = event.target as MovieClip;
    if (currentBomb) // is null if above line fails
        currentBomb.gotoAndPlay(2);
} 
```

# iphone - Uitableview 在情节提要中调整大小

> ID：12000262
> 
> 赞同：0
> 
> 时间：2012-08-17T05:30:05.910
> 
> 标签：iphone, ios, uitableview, storyboard

我在故事板中使用 uitableview 和导航控制器，在添加 tableview 单元格时，最后一行数据隐藏在工具栏中。我如何显示最后一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:48:26.913

将以下内容添加到`viewDidLoad`

```
UIEdgeInsets myInsets = {0, 0, 44, 0};
self.tableView.contentInset = myInsets; 
```

# java - 排序时从 JTable 中排除列

> ID：12000263
> 
> 赞同：0
> 
> 时间：2012-08-17T05:30:05.947
> 
> 标签：java, sorting, jtable

所以我基本上不希望在我的 JTable 中排序时显示第二列，反之亦然。一张图片胜过千言万语，所以这里有一张图片向您展示我的意思。[http://i48.tinypic.com/2rzpfe9.jpg](http://i48.tinypic.com/2rzpfe9.jpg) 所以当我在我的 JTable 中搜索“apple”这个词时，你可以看到，第二列仍然存在，它不应该存在，因为第一列有这个词“苹果”，而不是第二列。那么我怎样才能使另一列不显示，反之亦然？

**编辑：**我已经编辑了下面的代码以匹配 MadProgrammer 所说的，但它仍然无法正常工作。新图片[http://i48.tinypic.com/2rzpfe9.jpg](http://i48.tinypic.com/2rzpfe9.jpg) 这次文字没有了，但专栏还在。这次我做错了什么？

```
 import java.awt.Color;
    import java.awt.Component;
    import java.awt.Dimension;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import javax.swing.ImageIcon;
    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.JScrollPane;
    import javax.swing.JTable;
    import javax.swing.JTextArea;
    import javax.swing.JTextField;
    import javax.swing.RowFilter;
    import javax.swing.UIManager;
    import javax.swing.border.EmptyBorder;
    import javax.swing.table.DefaultTableModel;
    import javax.swing.table.TableCellRenderer;
    import javax.swing.table.TableColumn;
    import javax.swing.table.TableModel;
    import javax.swing.table.TableRowSorter;

public class sorter extends JFrame {
/**
     * 
     */
private static final long serialVersionUID = 1L;
public sorter() {
initComponents();
panel.setLayout(null);
search.setBounds(30,10,400,25);
search_button.setBounds(430,10,30,25);
}
public class FilterEntry extends RowFilter.Entry<TableModel, Integer> {

    private final TableModel model;
    private final Object value;
    private final int rowIndex;

    public FilterEntry(TableModel model, Object value, int rowIndex) {

        this.model = model;
        this.value = value;
        this.rowIndex = rowIndex;

    }

    @Override
    public TableModel getModel() {

        return model;

    }

    @Override
    public int getValueCount() {

        return getModel().getColumnCount();

    }

    @Override
    public Object getValue(int index) {

        return value;

    }

    @Override
    public Integer getIdentifier() {

        return rowIndex;

    }

}

private void initComponents() {
panel = new JPanel();
logo = new JLabel();
pane = new JScrollPane();
search = new JTextField();
search_button = new JButton();
setDefaultCloseOperation(EXIT_ON_CLOSE);
setBackground(new Color(255, 255, 204));
setResizable(false);
panel.setBackground(new Color(51, 51, 51));
panel.setPreferredSize(new Dimension(290, 40));
javax.swing.GroupLayout panelLayout = new javax.swing.GroupLayout(panel);
panel.setLayout(panelLayout);
panelLayout.setHorizontalGroup(
panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addGroup(panelLayout.createSequentialGroup()
.addGap(198, 198, 198)
.addComponent(logo)
.addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
);
panelLayout.setVerticalGroup(
panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelLayout.createSequentialGroup()
.addContainerGap(0, Short.MAX_VALUE)
.addComponent(logo)
.addContainerGap())
);
search.setText("");
search.setToolTipText("");
search.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.LOWERED));
search.setPreferredSize(new java.awt.Dimension(30, 15));
search_button.setIcon(new javax.swing.ImageIcon(getClass().getResource("/search.JPG"))); // NOI18N
search_button.setAlignmentY(0.0F);
search_button.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
search_button.setContentAreaFilled(false);
search_button.setIconTextGap(1);
search_button.setMargin(new java.awt.Insets(1, 4, 1, 4));
search_button.setMaximumSize(new java.awt.Dimension(5, 30));
search_button.setMinimumSize(new java.awt.Dimension(5, 30));
search_button.setPreferredSize(new java.awt.Dimension(30, 20));
javax.swing.GroupLayout panelLayout1 = new javax.swing.GroupLayout(panel);
panel.setLayout(panelLayout1);
panelLayout1.setHorizontalGroup(
panelLayout1.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addGroup(panelLayout1.createSequentialGroup()
.addGroup(panelLayout1.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addGroup(panelLayout1.createSequentialGroup()
.addGap(25, 25, 25)
.addComponent(search, javax.swing.GroupLayout.PREFERRED_SIZE, 400, javax.swing.GroupLayout.PREFERRED_SIZE)
.addGap(0, 0, 0)
.addComponent(search_button, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
.addGroup(panelLayout1.createSequentialGroup()
.addGap(174, 174, 174)
.addComponent(logo)))
.addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
);
panelLayout1.setVerticalGroup(
panelLayout1.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addGroup(panelLayout1.createSequentialGroup()
.addGap(5, 5, 5)
.addComponent(logo)
.addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
.addGroup(panelLayout1.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addComponent(search, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
.addComponent(search_button, javax.swing.GroupLayout.PREFERRED_SIZE, 26, Short.MAX_VALUE))
.addContainerGap())
);
ImageIcon Icon1 = getImage("lemon.jpg");
ImageIcon Icon2 = getImage("az.jpg");
ImageIcon Icon3 = getImage("aaa.jpg");
ImageIcon Icon4 = getImage("ba.jpg");
ImageIcon Icon5 = getImage("bas.jpg");
ImageIcon Icon6 = getImage("cookies.jpg");
String[] columnNames = {"A", "Section 1","B", "Section 2"};
Object[][] data =
{
{Icon1, "Lemon", Icon2, "Grapes"},
{Icon3, "Apple", Icon4, "Banana"},
{Icon5, "Orange", Icon6, "Cookies"},
};
DefaultTableModel model = new DefaultTableModel(data, columnNames);
JTable table = new JTable(model)
{
/**
     * 
     */
    private static final long serialVersionUID = 1L;
@SuppressWarnings({ "unchecked", "rawtypes" })
public Class getColumnClass(int column)
{
return getValueAt(0, column).getClass();
}
public boolean isCellEditable(int row, int col) {
return false;
}
};
class MultiLineCellRenderer extends JTextArea implements TableCellRenderer {
/**
     * 
     */
private static final long serialVersionUID = 1L;
public MultiLineCellRenderer() {
setLineWrap(true);
setWrapStyleWord(true);
setOpaque(true);
}

public Component getTableCellRendererComponent(JTable table, Object value,boolean isSelected, boolean hasFocus, int row, int column) {
RowFilter rowFilter = ((TableRowSorter) table.getRowSorter()).getRowFilter();
if (rowFilter != null) {
if (!rowFilter.include(new FilterEntry(table.getModel(), value, row))) {
value = null;
}         
} else {
setForeground(table.getForeground());
setBackground(table.getBackground());
}
setFont(table.getFont());
if (hasFocus) {
setBorder(UIManager.getBorder("Table.focusCellHighlightBorder"));
if (table.isCellEditable(row, column)) {
setForeground(UIManager.getColor("Table.focusCellForeground"));
setBackground(UIManager.getColor("Table.focusCellBackground"));
}
} else {
setBorder(new EmptyBorder(1, 2, 1, 2));
}
setText((value == null) ? "" : value.toString());
return this;
}
}

// Sorter Code. 
table = new JTable(model);
final TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);

table.setRowSorter(sorter);
search_button.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e) {
String text = search.getText();
if (text.length() == 0) {
sorter.setRowFilter(null);
} else {
sorter.setRowFilter(RowFilter.regexFilter("(?i)"+ text));
}
}
});
// sorter code ends here.

table.setRowHeight(50);
pane.setViewportView(table);
table.setBackground(new Color(255, 255, 204));
table.setDefaultRenderer(String.class, new MultiLineCellRenderer());

table.getColumnModel().getColumn(1).setCellRenderer(new MultiLineCellRenderer());
table.getColumnModel().getColumn(3).setCellRenderer(new MultiLineCellRenderer());

table.getColumnModel().getColumn(0).setResizable(false);
table.getColumnModel().getColumn(1).setResizable(false);
table.getColumnModel().getColumn(2).setResizable(false);
table.getColumnModel().getColumn(3).setResizable(false);
table.setFocusable(false);
table.setRowSelectionAllowed(false);
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
int vColIndex = 0;
TableColumn col = table.getColumnModel().getColumn(vColIndex);
int width = 33;
col.setPreferredWidth(width);
int vColIndex1 = 1;
TableColumn col1 = table.getColumnModel().getColumn(vColIndex1);
int width1 = 216;
col1.setPreferredWidth(width1);
int vColIndex11 = 2;
TableColumn col11 = table.getColumnModel().getColumn(vColIndex11);
int width11 = 33;
col11.setPreferredWidth(width11);
int vColIndex111 = 3;
TableColumn col111 = table.getColumnModel().getColumn(vColIndex111);
int width111 = 216;
col111.setPreferredWidth(width111);
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
getContentPane().setLayout(layout);
layout.setHorizontalGroup(
layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, 500, Short.MAX_VALUE)
.addComponent(pane)
);
layout.setVerticalGroup(
layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
.addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
.addComponent(panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
.addGap(0, 0, Short.MAX_VALUE)
.addComponent(pane, javax.swing.GroupLayout.PREFERRED_SIZE, 250, javax.swing.GroupLayout.PREFERRED_SIZE)
.addGap(0, 0, Short.MAX_VALUE)
.addGap(0, 0, Short.MAX_VALUE))
);
pack();
}
private ImageIcon getImage(String path)
{
java.net.URL url = getClass().getResource(path);
if (url != null)
return (new ImageIcon(url));
else
{
System.out.println(url);
return null;
}
}
public static void main(String args[]) {
try {
for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
if ("Windows".equals(info.getName())) {
javax.swing.UIManager.setLookAndFeel(info.getClassName());
break;
}
}
} catch (ClassNotFoundException ex) {
java.util.logging.Logger.getLogger(sorter.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
} catch (InstantiationException ex) {
java.util.logging.Logger.getLogger(sorter.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
} catch (IllegalAccessException ex) {
java.util.logging.Logger.getLogger(sorter.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
} catch (javax.swing.UnsupportedLookAndFeelException ex) {
java.util.logging.Logger.getLogger(sorter.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
}
java.awt.EventQueue.invokeLater(new Runnable() {
public void run() {
new sorter().setVisible(true);
}
});
}
private JLabel logo;
private JScrollPane pane;
private JPanel panel;
private JTextField search;
private JButton search_button;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:53:03.380

您可以修改渲染器，使其仅在与过滤器匹配时才显示该值。

鉴于您正在使用它，这`TableRowSorter`使得它更容易。

```
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

    RowFilter rowFilter = ((TableRowSorter) table.getRowSorter()).getRowFilter();
    if (rowFilter != null) {

        if (!rowFilter.include(new FilterEntry(table.getModel(), value, row))) {

            value = null;

        }

    }

    // The rest of the code...

} 
```

现在，您将需要实现自己的`FilterEntry`：P

```
public class FilterEntry extends RowFilter.Entry<TableModel, Integer> {

    private final TableModel model;
    private final Object value;
    private final int rowIndex;

    public FilterEntry(TableModel model, Object value, int rowIndex) {

        this.model = model;
        this.value = value;
        this.rowIndex = rowIndex;

    }

    @Override
    public TableModel getModel() {

        return model;

    }

    @Override
    public int getValueCount() {

        return getModel().getColumnCount();

    }

    @Override
    public Object getValue(int index) {

        return value;

    }

    @Override
    public Integer getIdentifier() {

        return rowIndex;

    }

} 
```

为了使示例正常工作，我必须添加

```
table.getColumnModel().getColumn(1).setCellRenderer(new MultiLineCellRenderer());
table.getColumnModel().getColumn(3).setCellRenderer(new MultiLineCellRenderer()); 
```

在您设置默认单元格渲染器的位置下

**使用可变列模型更新**

您面临的更大问题是能够打开和关闭列。Trashgod 提供了一个[例子](https://stackoverflow.com/questions/10088853/could-not-set-the-column-width-to-zero-i-e-not-made-column-invisible/10089138#10089138)，我已经包含了一个示例模型。

接下来您需要做的是，每次过滤器更改时，您都需要遍历整个模型并决定应该包含哪些内容和不应该包含哪些内容。

这就是我实现它的方式...

首先，您需要提供自己的`ColumnModel`

```
// Changing the column model effects the data model as well...
TableModel model = table.getModel();
table.setColumnModel(new MutableColumnModel());
table.setModel(model); 
```

在您的动作侦听器中，应用过滤器后，您需要调用`updateColumns`

```
protected void updateColumns() {

    RowFilter rowFilter = ((TableRowSorter) tblSearch.getRowSorter()).getRowFilter();

    MutableTableColumnModel columnModel = (MutableTableColumnModel) tblSearch.getColumnModel();
    // Want to reset the columns, otherwise we run into problems doing the value
    // lookup, as the table doesn't think it exists.
    // You might be able to get around it with this instead, but we need
    // to rest the view any way...
    // columnModel.getColumnByModelIndex(col);
    columnModel.setColumnVisible(0, true);
    columnModel.setColumnVisible(1, true);
    columnModel.setColumnVisible(2, true);
    columnModel.setColumnVisible(3, true);

    if (rowFilter != null) {

        Map<Integer, Boolean> mapColumns = new HashMap<Integer, Boolean>(tblSearch.getColumnCount());
        for (int row = 0; row < tblSearch.getRowCount(); row++) {

            boolean include = includeValue(row, 1, rowFilter);
            mapColumns.put(0, include);
            mapColumns.put(1, include);

            include = includeValue(row, 3, rowFilter);
            mapColumns.put(2, include);
            mapColumns.put(3, include);

        }

        for (Integer col : mapColumns.keySet()) {

            columnModel.setColumnVisible(col, mapColumns.get(col));

        }

    }

}

protected boolean includeValue(int row, int col, RowFilter filter) {

    Object value = tblSearch.getValueAt(row, col);

    boolean include = filter.include(new FilterEntry(tblSearch.getModel(), value, row));

    System.out.println("include " + value + "; include = " + include);

    return include;

} 
```

这`MutableColumnModel`

```
public class MutableTableColumnModel extends DefaultTableColumnModel {

    private List<TableColumn> allTableColumns;

    public MutableTableColumnModel() {

        allTableColumns = new ArrayList<TableColumn>(10);

    }

    public void setColumnVisible(int index, boolean visible) {

        setColumnVisible(getColumnByModelIndex(index), visible);

    }

    /**
     * Sets the visibility of the specified TableColumn.
     * The call is ignored if the TableColumn is not found in this column model
     * or its visibility status did not change.
     * <p>
     *
     * @param aColumn        the column to show/hide
     * @param visible its new visibility status
     */
    // listeners will receive columnAdded()/columnRemoved() event
    public void setColumnVisible(TableColumn column, boolean visible) {

        if (column != null) {

            if (!visible) {

                if (isColumnVisible(column)) {

                    super.removeColumn(column);

                }

            } else {

                // find the visible index of the column:
                // iterate through both collections of visible and all columns, counting
                // visible columns up to the one that's about to be shown again
                int noVisibleColumns = tableColumns.size();
                int noInvisibleColumns = allTableColumns.size();
                int visibleIndex = 0;

                for (int invisibleIndex = 0; invisibleIndex < noInvisibleColumns; ++invisibleIndex) {
                    TableColumn visibleColumn = (visibleIndex < noVisibleColumns ? (TableColumn) tableColumns.get(visibleIndex) : null);
                    TableColumn testColumn = (TableColumn) allTableColumns.get(invisibleIndex);

                    if (testColumn == column) {
                        if (visibleColumn != column) {
                            super.addColumn(column);
                            super.moveColumn(tableColumns.size() - 1, visibleIndex);
                        }
                        return; // ####################
                    }
                    if (testColumn == visibleColumn) {
                        ++visibleIndex;
                    }
                }
            }

        }
    }

    /**
     * Makes all columns in this model visible
     */
    public void showAllColumns() {
        int noColumns = allTableColumns.size();

        for (int columnIndex = 0; columnIndex < noColumns; ++columnIndex) {
            TableColumn visibleColumn = (columnIndex < tableColumns.size() ? (TableColumn) tableColumns.get(columnIndex) : null);
            TableColumn invisibleColumn = (TableColumn) allTableColumns.get(columnIndex);

            if (visibleColumn != invisibleColumn) {
                super.addColumn(invisibleColumn);
                super.moveColumn(tableColumns.size() - 1, columnIndex);
            }
        }
    }

    /**
     * Maps the index of the column in the table model at
     * <code>modelColumnIndex</code> to the TableColumn object.
     * There may me multiple TableColumn objects showing the same model column, though this is uncommon.
     * This method will always return the first visible or else the first invisible column with the specified index.
     * @param modelColumnIndex index of column in table model
     * @return table column object or null if no such column in this column model
     */
    public TableColumn getColumnByModelIndex(int modelColumnIndex) {
        for (int columnIndex = 0; columnIndex < allTableColumns.size(); ++columnIndex) {
            TableColumn column = (TableColumn) allTableColumns.get(columnIndex);
            if (column.getModelIndex() == modelColumnIndex) {
                return column;
            }
        }
        return null;
    }

    /** Checks wether the specified column is currently visible.
     * @param aColumn column to check
     * @return visibility of specified column (false if there is no such column at all. [It's not visible, right?])
     */
    public boolean isColumnVisible(TableColumn aColumn) {
        return (tableColumns.indexOf(aColumn) >= 0);
    }

    /** Append <code>column</code> to the right of exisiting columns.
     * Posts <code>columnAdded</code> event.
     * @param column The column to be added
     * @see #removeColumn
     * @exception IllegalArgumentException if <code>column</code> is <code>null</code>
     */
    public void addColumn(TableColumn column) {
        allTableColumns.add(column);
        super.addColumn(column);
    }

    /** Removes <code>column</code> from this column model.
     * Posts <code>columnRemoved</code> event.
     * Will do nothing if the column is not in this model.
     * @param column the column to be added
     * @see #addColumn
     */
    public void removeColumn(TableColumn column) {
        int allColumnsIndex = allTableColumns.indexOf(column);
        if (allColumnsIndex != -1) {
            allTableColumns.remove(allColumnsIndex);
        }
        super.removeColumn(column);
    }

    /** Moves the column from <code>oldIndex</code> to <code>newIndex</code>.
     * Posts  <code>columnMoved</code> event.
     * Will not move any columns if <code>oldIndex</code> equals <code>newIndex</code>.
     *
     * @param    oldIndex            index of column to be moved
     * @param    newIndex            new index of the column
     * @exception IllegalArgumentException    if either <code>oldIndex</code> or
     *                         <code>newIndex</code>
     *                        are not in [0, getColumnCount() - 1]
     */
    public void moveColumn(int oldIndex, int newIndex) {
        if ((oldIndex < 0) || (oldIndex >= getColumnCount())
                || (newIndex < 0) || (newIndex >= getColumnCount())) {
            throw new IllegalArgumentException("moveColumn() - Index out of range");
        }

        TableColumn fromColumn = (TableColumn) tableColumns.get(oldIndex);
        TableColumn toColumn = (TableColumn) tableColumns.get(newIndex);

        int allColumnsOldIndex = allTableColumns.indexOf(fromColumn);
        int allColumnsNewIndex = allTableColumns.indexOf(toColumn);

        if (oldIndex != newIndex) {
            allTableColumns.remove(allColumnsOldIndex);
            allTableColumns.add(allColumnsNewIndex, fromColumn);
        }

        super.moveColumn(oldIndex, newIndex);
    }

    /**
     * Returns the total number of columns in this model.
     *
     * @param   onlyVisible   if set only visible columns will be counted
     * @return    the number of columns in the <code>tableColumns</code> array
     * @see    #getColumns
     */
    public int getColumnCount(boolean onlyVisible) {
        List<TableColumn> columns = (onlyVisible ? tableColumns : allTableColumns);
        return columns.size();
    }

    /**
     * Returns an <code>Enumeration</code> of all the columns in the model.
     *
     * @param   onlyVisible   if set all invisible columns will be missing from the enumeration.
     * @return an <code>Enumeration</code> of the columns in the model
     */
    public Iterator<TableColumn> getColumns(boolean onlyVisible) {

        List<TableColumn> columns = (onlyVisible ? tableColumns : allTableColumns);
        return columns.iterator();

    }

    /**
     * Returns the position of the first column whose identifier equals <code>identifier</code>.
     * Position is the the index in all visible columns if <code>onlyVisible</code> is true or
     * else the index in all columns.
     *
     * @param    identifier   the identifier object to search for
     * @param    onlyVisible  if set searches only visible columns
     *
     * @return        the index of the first column whose identifier
     *            equals <code>identifier</code>
     *
     * @exception       IllegalArgumentException  if <code>identifier</code>
     *                is <code>null</code>, or if no
     *                <code>TableColumn</code> has this
     *                <code>identifier</code>
     * @see        #getColumn
     */
    public int getColumnIndex(Object identifier, boolean onlyVisible) {
        if (identifier == null) {
            throw new IllegalArgumentException("Identifier is null");
        }

        List columns = (onlyVisible ? tableColumns : allTableColumns);
        int noColumns = columns.size();
        TableColumn column;

        for (int columnIndex = 0; columnIndex < noColumns; ++columnIndex) {
            column = (TableColumn) columns.get(columnIndex);

            if (identifier.equals(column.getIdentifier())) {
                return columnIndex;
            }
        }

        throw new IllegalArgumentException("Identifier not found");
    }

    /**
     * Returns the <code>TableColumn</code> object for the column
     * at <code>columnIndex</code>.
     *
     * @param    columnIndex    the index of the column desired
     * @param    onlyVisible    if set columnIndex is meant to be relative to all visible columns only
     *                          else it is the index in all columns
     *
     * @return    the <code>TableColumn</code> object for the column
     *                at <code>columnIndex</code>
     */
    public TableColumn getColumn(int columnIndex, boolean onlyVisible) {
        return (TableColumn) tableColumns.elementAt(columnIndex);
    }

    /**
     * Returns all the columns
     * @return
     */
    public TableColumn[] getAllColumns() {

        return allTableColumns.toArray(new TableColumn[allTableColumns.size()]);

    }

    public TableColumn[] getHiddenColumns() {

        ArrayList<TableColumn> lstColumns = new ArrayList<TableColumn>(10);

        for (TableColumn column : getAllColumns()) {

            if (!isColumnVisible(column)) {

                lstColumns.add(column);

            }

        }

        return lstColumns.toArray(new TableColumn[lstColumns.size()]);

    }

} 
```

# php - 插入订单总价值，还是每次都计算？

> ID：12000269
> 
> 赞同：2
> 
> 时间：2012-08-17T05:30:59.960
> 
> 标签：php, database, database-design, e-commerce

我正在建立一个简单的电子商务网站，我对订单确认和创建有一些疑问......

这更像是`good practices`一个真正的问题......

我应该：计算总订单价值，然后插入数据库，还是应该在每次阅读/处理订单时计算它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:42:37.487

数据库领域的最佳实践意味着标准化数据，而存储可以计算的值违反了这一点。

除非您*绝对*确定这两个值之间不会存在差异，否则您*永远不*应该存储您可以计算的东西。

 *例如，如果您的订单包含两个 100 美元的商品，但订单设置为 150 美元，您认为会发生什么？

有时，存储可以通过其他方式计算的值是有理由的（通常与性能相关），但性能增益必须既*重要*又*必要，*并且消除或计划出现不一致的可能性。

您可以使用触发器或物化视图之类的东西来消除这种可能性，或者您可以通过更改业务逻辑来检测和修复问题或通过其他方式来规划它们。

但通常，性能提升不值得为减轻潜在问题而付出额外努力。毕竟，您看到多少个订单，上面*有数百万*个单独的项目？当然，除了美国国防部：-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T05:45:29.477

在您的事务数据库（即主数据库）中，您不应存储计算值。总结十几行是什么。

但是，在您的分析数据库（又名商业智能 db-，数据仓库）中，您绝对应该存储计算的总数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:54:08.357

作为一种好的做法，您不应该存储可以从表中现有列派生的值。

不这样做的原因有很多，例如

1.  如果要更新任何基础列，则还必须更新派生列。

2.  表的大小将增加

等等……等等……*

# opengl-es - 纹理上的 Opengl 渲染纹理使透明部分变为黑色（见图）

> ID：12000270
> 
> 赞同：0
> 
> 时间：2012-08-17T05:31:10.083
> 
> 标签：opengl-es

顶部纹理的黑色部分是透明的，但在 opengl es 中呈现为黑色。我在没有任何混合的情况下渲染，不知道这是我需要的

我该如何解决这个问题？谢谢

这是我的着色器：

```
 precision mediump float;                           
    varying vec2 v_texCoord;                            
    uniform sampler2D s_texture;
    uniform lowp float distance;
    uniform lowp float slope;     

    void main() 
    {
        highp vec4 color = vec4(1.0);

        highp float d = v_texCoord.y * slope + distance;

        highp vec4 c = texture2D(s_texture, v_texCoord);

        c = (c - d * color) / (1.0 -d);

        //vec4 textureColor =  texture2D( s_texture, v_texCoord );

        //gl_FragColor =  textureColor;
        gl_FragColor =  c;
    } 
```

![图片](../Images/d5ea5d79807a22b5de2320ca29864def.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:35:51.490

> 我在没有任何混合的情况下渲染，不知道是不是我需要的

是的，如果您希望某些东西是透明的，您需要根据 alpha 值进行[混合](http://www.opengl.org/wiki/Blending)或丢弃片段。

# java - Java 邮件正在显示

> ID：12000274
> 
> 赞同：0
> 
> 时间：2012-08-17T05:31:27.673
> 
> 标签：java, jakarta-mail

我是这个社区的新手，我正在尝试通过我的应用程序发送电子邮件，邮件内容正在显示

```
<h2>New User Request for <FONT style='color:#4649FE;'> Applicaiton </FONT></h1><br/><b>Requested By : 
```

它不应该显示标题，我正在使用`mail1.4 jar`邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:42:23.500

你有一个开场`<h2>`，但你有一个收场`</h1>`。

尝试将其更改为相同的标签。

# c - 我正在使用 CodeWarrior 的 MC9S08DZ60.h 创建 Visual Studio 项目我收到错误 C2054: expected '(' to follow '_PTDD'

> ID：12000278
> 
> 赞同：0
> 
> 时间：2012-08-17T05:31:49.653
> 
> 标签：c, visual-studio, microcontroller, codewarrior

我正在使用`MC9S08DZ60.h`CodeWarrior[创建](http://en.wikipedia.org/wiki/CodeWarrior)一个 Visual Studio 项目。我正进入（状态：

> 错误 C2054：预期 '(' 跟随 '_PTDD'`。

`MC9S08DZ60.h`是[微控制器](http://en.wikipedia.org/wiki/Microcontroller)MC9S08DZ60（来自[飞思卡尔半导体](http://en.wikipedia.org/wiki/Freescale_Semiconductor)）的头文件：

```
typedef union {
    byte Byte;
    struct {
        byte PTDDD0  :1;  /* Data Direction for Port D Bit 0 */
        byte PTDDD1  :1;  /* Data Direction for Port D Bit 1 */
        byte PTDDD2  :1;  /* Data Direction for Port D Bit 2 */
        byte PTDDD3  :1;  /* Data Direction for Port D Bit 3 */
        byte PTDDD4  :1;  /* Data Direction for Port D Bit 4 */
        byte PTDDD5  :1;  /* Data Direction for Port D Bit 5 */
        byte PTDDD6  :1;  /* Data Direction for Port D Bit 6 */
        byte PTDDD7  :1;  /* Data Direction for Port D Bit 7 */
    } Bits;
} PTDDDSTR;
#ifndef MXVDEV //sri
extern volatile PTDDDSTR _PTDDD @0x00000007;
#else
PTDDDSTR _PTDDD;
#endif
#define PTDDD             _PTDDD.Byte
#define PTDDD_PTDDD0      _PTDDD.Bits.PTDDD0
#define PTDDD_PTDDD1      _PTDDD.Bits.PTDDD1
#define PTDDD_PTDDD2      _PTDDD.Bits.PTDDD2
#define PTDDD_PTDDD3      _PTDDD.Bits.PTDDD3
#define PTDDD_PTDDD4      _PTDDD.Bits.PTDDD4
#define PTDDD_PTDDD5      _PTDDD.Bits.PTDDD5
#define PTDDD_PTDDD6      _PTDDD.Bits.PTDDD6
#define PTDDD_PTDDD7      _PTDDD.Bits.PTDDD7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:12:37.537

Codewarrior 寄存器映射不遵循 C 标准。用于在特定地址分配变量的 @ 运算符不是标准的，除 int 之外的任何类型的位域也不是标准的。

他们使用非标准语法的原因是因为他们想为寄存器生成调试信息，以便用户可以在调试器中查看它们。您可以使用标准 C 手动定义它们：

```
#define PTDDD (*(volatile unsigned char*)0x0007) 
```

但是，如果您打算在寄存器映射中定义所有寄存器，这将需要相当多的工作。

就个人而言，我讨厌非标准的语法，所以我使用自己编写的一个小程序来解析 pdf 手册并根据手册中的名称生成与上述相同语法的寄存器映射。

* * *

但是...为什么要在 Windows 中编译 MCU 寄存器映射？这没有任何意义。Visual Studio 对飞思卡尔微控制器一无所知，因此无法为它们生成任何二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:47:15.177

如果`MXVDEV`未由预处理器定义，您将拥有声明

```
extern volatile PTDDDSTR _PTDDD @0x00000007; 
```

该`@0x00000007`部分可能是 CodeWarrior 编译器的扩展，它不在 Visual Studio 编译器中，这意味着您会收到错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T09:47:53.103

CodeWarrior 中的大量内容不遵循 C 标准。Lundin 100% 正确地说这样做是为了调试器可以查看 HIWAVE 中的寄存器。

位寄存器定义也是非标准的，并且在将代码移植到其他处理器时在某些情况下给我带来了问题。许多其他工具链遵循严格的 ANSI C 规则。

我能想到的唯一原因是，为什么将其拉入 Visual Studio 是因为提出问题的人要么为该处理器开发工具，要么可能是模拟器，甚至是完整的 IDE/开发工具。考虑到 Codewarrior 现在有多糟糕，这并非完全不可能。

向飞思卡尔抱怨是徒劳的。我已经为我的地区一路跑到联合GM，甚至在他们的论坛上抱怨，他们不听。

# javascript - JavaScript 不会替换字符串的最后一个符号

> ID：12000283
> 
> 赞同：1
> 
> 时间：2012-08-17T05:32:31.337
> 
> 标签：javascript, jquery

我尝试替换 JavaScript 中的符号，但不知何故，这总是只替换字符串的第一个符号，而不是替换所有符号。

**JavaScript**：

```
var note = "test'test'test'";
note = note .replace("'", "&#39;"); 
```

**输出**：

```
test&#39;test'test' 
```

有谁知道如何`'`用 ? 替换所有符号`&#39;`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T05:35:17.937

使用正则表达式替换并添加一个`g`标志以使其成为全局：

```
> "test'test'test'".replace(/'/g, '&#39;');
"test&#39;test&#39;test&#39;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:42:07.317

使用`g`全局替换的后缀。

这是正确的方法：

```
note = "test'test'test'";
note.replace(/\'/g,"&#39;") 
```

检查这个：[jsfiddle](http://jsfiddle.net/kQnXL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T05:42:46.080

试试这个 note.replace(/\'/g, ''');

# android - 适用于 Android 版本 2.3+ 的 WiFi Direct

> ID：12000286
> 
> 赞同：2
> 
> 时间：2012-08-17T05:32:52.850
> 
> 标签：android, wifi-direct

我在官方 Android 博客上注意到，具有 4.0 或更高版本的谷歌手机支持 WiFi Direct API。我还看到了访问 WiFi Direct API 的代码。但我怀疑在一些博客上有人写过一些 2.3 版本的 android 设备也支持 WiFi Direct。因此，我们为 4.0 或更高版本编写的相同代码将适用于支持 WiFi Direct 的 2.3 版本的 android 设备？我找不到与 android 2.3 版兼容的代码

我再次注意到，对此的替代解决方案是“AllJoyn”（https://www.alljoyn.org/），但不知道这是使用 WiFi Direct 的正确方法吗？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T07:54:53.380

设备支持 WiFi Direct（例如：2.3 版）这一事实并不一定意味着您可以访问 WiFi Direct API（从 4.0 开始提供）

在 2.3 版示例中，请考虑该功能存在但应用程序开发人员无法直接与其交互。我认为在您谈论的博客上，这些人刚刚在 2.3 上启用了 WiFi Direct，但没有通过代码执行任何操作。如果您想使用 WiFi Direct 通过代码执行某些操作，您需要启用 WD 并且至少在 4.0 上运行的设备，以便您可以访问 API。

AllJoyn 不会解决您的问题。AllJoyn 在传输 API 之上提供了一个层，因此开发人员不必关心数据是否将通过蓝牙、WIFI 传统或 WiFi Direct 传输。

# c++ - Visual Studio 2010 中“getline”的无限循环

> ID：12000288
> 
> 赞同：0
> 
> 时间：2012-08-17T05:32:54.420
> 
> 标签：c++, visual-studio-2010, visual-c++, infinite-loop, getline

`getline()`我正在 Visual Studio 2010 中完成一些 C++ 练习，并且在使用该函数时，当我尝试使用“CTRL-Z”终止流中的标准时，我一直遇到无限循环问题。这是相关的代码....

```
// find all the lines that refer to each word in the input
map<string, vector<int> >
    xref(istream& in,
         vector<string> find_words(const string&) = split)
{
    string line;
    int line_number = 0;
    map<string, vector<int> > ret;

    // read the next line
    while (getline(in, line)) {
        ++line_number;

        // break the input line into words
        vector<string> words = find_words(line);

        // remember that each word occurs on the current line
        for (vector<string>::const_iterator it = words.begin();
             it != words.end(); ++it)
            ret[*it].push_back(line_number);
    }
    return ret;
} 
```

...程序没​​有将我踢出 while 循环，而是进入了打印随机整数的无限循环。我很确定这是我所缺少的 Windows 环境特有的东西。这是整个代码...

```
#include <algorithm>
#include <cctype>
#include <string>
#include <vector>

#include "split.h"

using std::find_if;
using std::string;
using std::vector;

using std::isspace;

// `true' if the argument is whitespace, `false' otherwise
bool space(char c)
{
    return isspace(c);
}

// `false' if the argument is whitespace, `true' otherwise
bool not_space(char c)
{
    return !isspace(c);
}

vector<string> split(const string& str)
{
    typedef string::const_iterator iter;
    vector<string> ret;

    iter i = str.begin();
    while (i != str.end()) {

        // ignore leading blanks
        i = find_if(i, str.end(), not_space);

        // find end of next word
        iter j = find_if(i, str.end(), space);

        // copy the characters in `[i,' `j)'
        if (i != str.end())
            ret.push_back(string(i, j));
        i = j;
    }
    return ret;
}

#include <map>
#include <iostream>
#include <string>
#include <vector>

#include "split.h"

using std::cin;            using std::cout;
using std::endl;           using std::getline;
using std::istream;        using std::string;
using std::vector;         using std::map;

// find all the lines that refer to each word in the input
map<string, vector<int> >
    xref(istream& in,
         vector<string> find_words(const string&) = split)
{
    string line;
    int line_number = 0;
    map<string, vector<int> > ret;

    // read the next line
    while (getline(in, line)) {
        ++line_number;

        // break the input line into words
        vector<string> words = find_words(line);

        // remember that each word occurs on the current line
        for (vector<string>::const_iterator it = words.begin();
             it != words.end(); ++it)
            ret[*it].push_back(line_number);
    }
    return ret;
}

int main()
{
    // call `xref' using `split' by default
    map<string, vector<int> > ret = xref(cin);

    // write the results
    for (map<string, vector<int> >::const_iterator it = ret.begin();
         it != ret.end(); ++it) {
        // write the word
        cout << it->first << " occurs on line(s): ";

        // followed by one or more line numbers
        vector<int>::const_iterator line_it = it->second.begin();
        cout << *line_it;   // write the first line number

        ++line_it;
        // write the rest of the line numbers, if any
        while (line_it != it->second.end()) {
            cout << ", " << *line_it;
            ++line_it;
        }
        // write a new line to separate each word from the next
        cout << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:54:10.357

我认为与其试图完成这项工作，不如从编写我能理解的代码开始（为了理解它，代码必须相当简单）：

```
#include <map>
#include <iostream>
#include <string>
#include <vector>
#include <sstream>
#include <iterator>
#include "infix_iterator.h"

typedef std::map<std::string, std::vector<unsigned> > index;

namespace std {
ostream &operator<<(ostream &os, index::value_type const &i) { 
    os << i.first << ":\t";
    std::copy(i.second.begin(), i.second.end(),
        infix_ostream_iterator<unsigned>(os, ", "));
    return os;
}
}

void add_words(std::string const &line, size_t num, index &i) { 
    std::istringstream is(line);
    std::string temp;

    while (is >> temp)
        i[temp].push_back(num);
}

int main() { 
    index i;
    std::string line;
    size_t line_number = 0;

    while (std::getline(std::cin, line))
        add_words(line, ++line_number, i);

    std::copy(i.begin(), i.end(), 
        std::ostream_iterator<index::value_type>(std::cout, "\n"));
    return 0;
} 
```

与（或多或少）通常一样，这需要`infix_ostream_iterator`我在[其他地方](https://codereview.stackexchange.com/questions/13176/infix-iterator-code)发布的内容。

# button - 在单击的按钮上显示子表单 - LOTUS NOTES 6.5

> ID：12000290
> 
> 赞同：0
> 
> 时间：2012-08-17T05:33:08.033
> 
> 标签：button, lotus-notes, subform

我是 Lotus 编程新手，我有一个“问题”。如果您能帮助我，我将不胜感激。: - )

因此，我在表单上创建了一个按钮（称为 Form3），按钮名称为 Click。我想要做的就是当我单击按钮时会出现一个子表单。我创建了子表单并将其命名为 Subform3。我想我必须在按钮的方法中编写代码：单击。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:11:33.627

1.  将 subform3 添加到您的 form3
2.  向 Form3 添加一个按钮以控制显示子窗体
3.  设置按钮的公式以将值切换到变量：
    FIELD SubformToggle := @If(SubformToggle = 1; 0; 1);
4.  将子窗体的 HideWhen 公式设置为 SubformToggle = 0

# ruby-on-rails - Ruby 的 RVM 版本与 Ruby -v 不同

> ID：12000293
> 
> 赞同：0
> 
> 时间：2012-08-17T05:33:38.950
> 
> 标签：ruby-on-rails, ruby, paperclip, rvm

我正在尝试安装回形针 gem，但系统提示我它需要 Ruby 版本 >=1.9.2

当我在 RVM 上检查我的版本时，我得到 1.9.3，而当我通过 ruby​​ -v 命令检查它时，我得到 1.8.7 如何让我的 rails 应用程序改为使用最新版本的 RUby？

```
@ubuntu:~$ rvm list

rvm rubies

=* ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

@ubuntu:~$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:43:03.380

作为一个基本步骤，您可以设置默认的 ruby​​ rvm 使用如下。

```
$ rvm use 1.9.3 --default 
```

您还可以通过将包含`.rvmrc`以下内容的文件添加到项目根目录来在项目级别进行设置。您应该将其提交给 repo。

```
rvm 1.9.3 
```

作为最后的措施，您应该停止使用 rvm 并切换到[rbenv](https://github.com/sstephenson/rbenv/)。它好多了，我们需要停止覆盖 cd。

# java - Mongodb java查询生成器

> ID：12000297
> 
> 赞同：1
> 
> 时间：2012-08-17T05:34:27.200
> 
> 标签：java, mongodb, query-builder, mongo-java

我是java新手。如何在 java 中构建这个 mongo 查询。任何帮助/提示将不胜感激。

```
db.places.find({loc : { $near :[ -122.934326171875,37.795268017578] , $maxDistance : 50 } ,$or:[{"uid":"at"},{"myList.$id" :ObjectId("4fdeaeeede2d298262bb80") } ] ,"searchTag" : { $regex : "Union", $options: "i"} } ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:36:49.550

通过使用[QueryBuilder](http://api.mongodb.org/java/2.2/com/mongodb/QueryBuilder.html)，您可以创建您想要的查询。我创建它如下。

```
QueryBuilder query = new QueryBuilder();
query.put("loc").near(-122.934326171875, 37.795268017578, 50);
query.or(
        QueryBuilder.start("uid").is("at").get(),
        QueryBuilder.start("myList.$id").is(new ObjectId("5024f2f577a59dd9736ddc38")).get()
            );
query.put("searchTag").regex(Pattern.compile("Union",Pattern.CASE_INSENSITIVE)); 
```

当我将查询打印到控制台时，它看起来像：

```
{ "loc" : { "$near" : [ -122.934326171875 , 37.795268017578 , 50.0]} , 
  "$or" : [ { "uid" : "at"} , { "myList.$id" : { "$oid" : "5024f2f577a59dd9736ddc38"}}] , 
  "searchTag" : { "$regex" : "Union" , "$options" : "i"}
} 
```

我没有尝试过，但希望它会起作用。

# c# - 使用 Excel 更新 SQL Server 数据库

> ID：12000298
> 
> 赞同：0
> 
> 时间：2012-08-17T05:34:29.697
> 
> 标签：c#, sql-server, winforms, excel, interop

我想要做的是将一堆行从数据库导入 Excel（这部分已经实现并且可以工作），然后在 Excel 中编辑该数据，然后单击按钮更新数据库中的行，这应该出现在每行的最后一个单元格。

这可能吗？我目前正在使用 VS 2008 C# 和 Excel interop v14。数据库服务器是 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:44:17.333

将 Access 与数据表一起使用。你所要求的是可能的，但需要大量的摆弄。

如果您坚持使用 Excel，请查看查询加载项工具（Excel 2003 或更早版本）或数据功能区（Excel 2007 或更高版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:10:51.060

不参考你会遇到的很多很多问题：

```
''Reference: Microsoft ActiveX Data Objects x.x Library

Dim cn As New ADODB.Connection
Dim cmd As New ADODB.Command
cn.Open ServerCon

cmd.ActiveConnection = cn

cmd.CommandText = "insert_user"
cmd.CommandType = adCmdStoredProc
cmd.Parameters("@username").Value = Worksheets("Sheet1").Cells(2, 2)
cmd.Execute 
```

# ipad - Safari 中未聚焦的选项卡上的 iPad 缩放问题

> ID：12000299
> 
> 赞同：0
> 
> 时间：2012-08-17T05:34:32.230
> 
> 标签：ipad, orientation, mobile-safari, zooming

我有一个不允许（也不应该）在 iPad 上缩放的网页。一切都很好，除了在 Safari 中打开多个选项卡的情况下：

```
 1\. have focus on my application's tab
    2\. change to a different tab
    3\. switch the iPad's orientation (i.e. portrait to landscape or vice versa)
    4\. switch back to my web apps tab 
```

在许多情况下，iPad 会放大，我无法重置缩放。由于我通过视口元标记禁用了缩放，因此缩放不应该改变。让事情变得更奇怪：如果我刷新页面或什至导航到其他一些网站，Zoom 将不会刷新。

我也注意到这发生在其他网站上。我已经尝试了所有可以想象的元标记组合（禁用缩放）。我正在使用 iPad 3 进行测试。如果我在 Safari 中只打开一个选项卡，我没有任何问题。

这似乎与“著名”方向问题无关，因为当应用程序没有焦点时会发生不希望的缩放 [如何在 iPhone 上的方向更改时重置 Web 应用程序的缩放/缩放？](https://stackoverflow.com/questions/2557801/how-do-i-reset-the-scale-zoom-of-a-web-app-on-an-orientation-change-on-the-iphon)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:08:19.020

这是我解决此问题的方法：

```
1\. use the onorientationchange event to detect if the zoom is changed
2\. if the zoom has changed change the viewport meta tag to: user-scalable=yes
3\. on $(window).resize or onorientationchange change viewport back to user-scalable=no if the user has changed the zoom back to fit the screen 
```

# backbone.js - 使用backbone.marionette获取“NoTemplateError：找不到模板”

> ID：12000301
> 
> 赞同：3
> 
> 时间：2012-08-17T05:34:46.793
> 
> 标签：backbone.js, coffeescript, marionette

在我尝试编写的这个coffeescript+backbone.marionette 应用程序中，当我尝试在我的内容区域中显示不同的视图时，我得到一个“NoTemplateError：找不到模板：'#second-template'。

这是基于[David Sulc 的 Backbone Books 教程](http://davidsulc.com/blog/2012/05/06/tutorial-a-full-backbone-marionette-application-part-1/)的两段代码。WelcomeApp 显示正常，但是当我单击然后调用 MyApp.SecondApp.display() 的菜单项时，我得到 NoTemplateError。

```
window.MyApp = MyApp = new Backbone.Marionette.Application()

MyApp.addRegions
  menu: '#menu'
  content: '#content'

class MyApp.MenuView extends Backbone.Marionette.View
  el: '#menu'

  events:
    'click #get-second': 'showSecond'

  showSecond: ->
    MyApp.SecondApp.display()

MyApp.vent.on 'welcome:rendered', ->
  menu = new MyApp.MenuView()
  MyApp.menu.attachView(menu)

MyApp.WelcomeApp = do ->
  WelcomeApp = {}

  class WelcomeLayout extends Backbone.Marionette.Layout
    template: '#content_welcome-template'

  WelcomeApp.display = ->
    WelcomeApp.layout = new WelcomeLayout()

    WelcomeApp.layout.on 'show', ->
      MyApp.vent.trigger 'welcome:rendered'

    MyApp.content.show MyApp.WelcomeApp.layout

  return WelcomeApp

MyApp.SecondApp = {}

class MyApp.SecondApp.WelcomeView extends Backbone.Marionette.ItemView
  template: '#second-template'

MyApp.SecondApp.display = ->
  welcomeView = new MyApp.SecondApp.WelcomeView()
  MyApp.content.show welcomeView

MyApp.addInitializer ->
  MyApp.WelcomeApp.display() 
```

我的模板只是 index.html 中的脚本块。实际上，我将 WelcomeApp 使用的模板与 SecondApp 使用的模板进行了交换，当我这样做时，WelcomeApp 可以很好地找到“#second-template”。

我用backbone.marionette 0.9.10和0.9.11都试过了。

这里的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:24:30.830

感谢两位评论者对我的问题。在删除 HTML 和 coffeescript 代码时，我注意到我的 HTML 中的一个 div 使用`<div>`. 一旦我将其修复为`</div>`一切正常。愚蠢的错误，但直到我将 HTML 剥离到足以让它出现在我面前时，我才看到它。我需要更好的语法检查。

# asp.net - MS 图表分组

> ID：12000308
> 
> 赞同：0
> 
> 时间：2012-08-17T05:35:57.773
> 
> 标签：asp.net, mschart

我是使用 MS Chart 控件的新手。我需要自定义饼图以将数据显示为组。假设我有 15 个人的工资数据。我需要使用组显示这些数据。就像 2 或 3 人的薪水在 10K 和 5 人的 16K 之间，可以想到类似的情况。我只需要显示工资范围。我怎样才能使用普通的 asp.net 来实现这一点。我不应该使用任何其他支持，例如 MVC 或 google api 之类的东西。请帮助我。预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:00:46.857

您可以通过 SQL Query Dear 来完成。

by group by 子句和 where 条件

从 [table_name] 中选择员工，其中薪水在 10k 到 20k 之间按薪水分组。

使用存储过程或用例语句制作字符串，然后您可以轻松地在查询中使用它。也许对您有帮助。

# java - 从 N 中创建 M 的随机样本

> ID：12000309
> 
> 赞同：0
> 
> 时间：2012-08-17T05:36:02.057
> 
> 标签：java, random-sample

目标是创建从 0 到 N-1 的 M 个整数的随机样本。

我在网上找到了这段代码（http://introcs.cs.princeton.edu/java/14array/Sample.java.html）

```
int M = Integer.parseInt(args[0]);    // choose this many elements
int N = Integer.parseInt(args[1]);    // from 0, 1, ..., N-1

int[] perm = new int[N];
for (int i = 0; i < N; i++)
    perm[i] = i;

// create random sample in perm[0], perm[1], ..., perm[M-1]
for (int i = 0; i < M; i++)  {

    int r = i + (int) (Math.random() * (N-i));

    int t = perm[r];
    perm[r] = perm[i];
    perm[i] = t;
}

for (int i = 0; i < M; i++)
    System.out.print(perm[i] + " ");
System.out.println(); 
```

当您只需 4 行就可以做到这一点时，我不明白使用数组的必要性。

```
 int M = Integer.parseInt(args[0]);    // choose this many elements
    int N = Integer.parseInt(args[1]);    // from 0, 1, ..., N-1

    for(int i=0; i<M; i++)
        System.out.println(i + (int) (Math.random() * (N-i))); 
```

# ios - sqlite ios：尝试写入只读数据库

> ID：12000311
> 
> 赞同：2
> 
> 时间：2012-08-17T05:36:17.877
> 
> 标签：ios, database, sqlite

我为一个项目使用了一个 sqlite 数据库。我可以执行 SELECT 之类的查询，但无法执行 INSERT！在模拟器上，INSERT 工作正常。一旦我在我的 iPod 上编译，就会出现此错误消息：*“尝试写入只读数据库”*。

以为是对的文件我做了一个：`chmod 777 mydatabase.sqlite` 但那不改变！

我也尝试过，因为我在其他网站上阅读过并复制文件以使用他的副本来解决问题，但无济于事。

你有解决办法吗？亲切地。

PS：这是我的代码：

```
for(NSDictionary *q in quotes) {
    sqlite3_stmt    *statement;
    sqlite3 *contactDB;
    const char *dbpath = [dbPath UTF8String];

    if (sqlite3_open_v2(dbpath, &contactDB, SQLITE_OPEN_READWRITE, NULL) == SQLITE_OK)
    {
        NSInteger identifiant = [[q objectForKey:@"id"] integerValue];
        NSString *texte = [q objectForKey:@"texte_english"];
        NSString *auteur = [q objectForKey:@"auteur"];
        NSString *date = [q objectForKey:@"date"];
        NSInteger auteurId = [[q objectForKey:@"auteur_id"] integerValue];
        NSInteger nbComments = [[q objectForKey:@"nb_comments"] integerValue];

        NSString *insertSQL = 
                [NSString stringWithFormat:@"INSERT INTO quotes (id, texte_english, auteur, date, auteur_id, nb_comments) VALUES (%d, \"%@\", \"%@\", \"%@\", \"%d\", \"%d\")", 
                                          identifiant, 
                                          texte, 
                                          auteur, 
                                          date, 
                                          auteurId, 
                                          nbComments];

        const char *insert_stmt = [insertSQL UTF8String];
        sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);

        if (sqlite3_step(statement) != SQLITE_DONE)
        {
            NSLog(@"ERREUR1: %s",sqlite3_errmsg(contactDB));
        }
        sqlite3_finalize(statement);
        sqlite3_close(contactDB);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T12:49:19.463

您需要做的就是更改您在手机中保存 SQLite 文件的根目录，该文件目前是只读的。进行这些更改：

将这些代码添加到您的`AppDelegate`：

.h 文件：

```
@property (nonatomic,retain) NSFileManager *fileMgr;
@property (nonatomic,retain) NSString *homeDir;
@property (nonatomic,retain) NSString *title; 
```

.m 文件：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self checkAndCreateDatabase];
    return YES;
}

-(NSString *)GetDocumentDirectory{
    fileMgr = [NSFileManager defaultManager];
    homeDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    return homeDir;
}

    -(void) checkAndCreateDatabase{
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *databasePath = [self.GetDocumentDirectory stringByAppendingPathComponent:@"YOUR DATABASE NAME.sqlite"];
    success = [fileManager fileExistsAtPath:databasePath];
    if(success) {
        NSLog(@"working");
        return;}
    else{
        NSLog(@"notworking");
    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"YOUR DATABASE NAME.sqlite"];
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
    }
} 
```

同样在你`SQLite class`添加这些行：

.h 文件：

```
@property (nonatomic,retain) NSFileManager *fileMgr;
@property (nonatomic,retain) NSString *homeDir; 
```

.m 文件：

```
-(NSString *)GetDocumentDirectory{
    fileMgr = [NSFileManager defaultManager];
    homeDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    return homeDir;
} 
```

并在 INSERT 和 SELECT 中进行这些更改：

```
NSString *dbPath = [self.GetDocumentDirectory stringByAppendingPathComponent:@"YOUR DATABASE NAME.sqlite"];
    const char *dbpath = [dbPath UTF8String]; 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T09:44:11.617

```
-(void)createEditablecopyofDatabaseifneeded
{
    BOOL success;
    NSError *error;
    NSFileManager *filemanagr = [NSFileManager defaultManager];

    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *dbPath = [path objectAtIndex:0];
    NSString *finalDBPath = [dbPath stringByAppendingPathComponent:mDataBaseName];
    self.mDataBasePath=finalDBPath;
    success = [filemanagr fileExistsAtPath:finalDBPath];
    if (success) {

    }
    else
    {
        NSString *writableDBPath = [[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:mDataBaseName];
        success = [filemanagr copyItemAtPath:writableDBPath toPath:finalDBPath error:&error];
        self.mDataBasePath=writableDBPath;
    }
    if (!success) {

    }
} 
```

在文档目录中创建数据库之前检查这一点希望这会对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:46:44.753

我找到了解决方案：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *dbPath = [documentsDirectory stringByAppendingPathComponent:@"tq.sqlite"]; 
```

所以，我有这个错误：“没有这样的表：引号”有什么想法吗？

我希望它会有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T17:26:58.363

万一其他人看到这个......升级到 Xcode 5.2 后，我开始在我的一台设备（iPhone 4s/iOS7）上收到此错误。这在我的 iPhone 5 (iOS 6) 上没有发生。从商店获取元数据时发生：

```
NSDictionary *storeMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:storeURL error:&error]; 
```

删除我的应用程序并重新安装它可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-27T16:34:00.680

使用 GRDB 的 Swift 3

```
var dbQueue: DatabaseQueue!

func setUpDatabasePath()
{
    let documentsPath = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first! as NSString
    let databasePath = documentsPath.appendingPathComponent("your_database.sqlite")
    print("DATABASE PATH !!!!")
    print(databasePath)
    let fileManager:FileManager = FileManager.default
    var success = fileManager.fileExists(atPath: databasePath)
    if (success)
    {
        dbQueue = try! DatabaseQueue(path: databasePath)
        print("writing to documents directory")
        print(databasePath)
        //break
        return
    }
    if (!success)
    {
        let bundlePath = Bundle.main.path(forResource: "your_database", ofType: "sqlite")
        success = fileManager.fileExists(atPath: bundlePath!)
        print("writing from app bundle")
        if (success)
        {
            try! fileManager.copyItem(atPath: bundlePath!, toPath: databasePath)
            dbQueue = try! DatabaseQueue(path: databasePath)
        }
        else
        {
            print("Could not find database")
        }
        return
    }
} 
```

# android - android中的索引滚动？

> ID：12000312
> 
> 赞同：0
> 
> 时间：2012-08-17T05:36:38.517
> 
> 标签：android, listview, android-scrollview

我想按字母顺序显示 ListView 项目。我还想用分隔符显示项目。

如果有人知道你能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T05:10:26.947

订购 ListView 有两种基本方法：

1.  使用[Collections.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)并让您的对象实现[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)接口。
2.  如果您使用游标加载数据（例如从 ContentProvider 或数据库），您可以使用 SQL 对返回的数据进行排序。

至于向您的 ListView 添加部分，也有两种基本方法可以做到这一点。[Cyril Mottier 在这篇博客文章](http://cyrilmottier.com/2011/07/05/listview-tips-tricks-2-section-your-listview/)中对这两种方法都有很好的记录。

# entity-framework - 使用 ExecuteStoreQuery / esql 强制实体框架加载相关端

> ID：12000313
> 
> 赞同：0
> 
> 时间：2012-08-17T05:36:51.953
> 
> 标签：entity-framework, entity-sql

我的数据库中有一个 1-1 关系，当我使用`.Include()`EF 时会生成一个可怕的查询，该查询需要很长时间才能执行（多重连接）。所以我想 - 我会编写自己的查询来加载这些实体。我尝试了什么：

*   我尝试使用 ExecuteStoreQuery，但这是浪费时间，因为它无法实现复杂的属性
*   我尝试使用带有 ESQL 的对象查询，但即使我在那里添加连接，也不会加载相关属性。并且（显然）如果我添加一个`.Include()`then EF 会生成同样可怕的查询。

所以，问题是 - 有没有办法绕过 EF 生成的 SQL 查询来实现实体？

更新：只是 EF 查询的一个例子。

编码：

```
var query = ctx.EntitySet
               .Include("RelatedProperty")
               .Where("it.SomeFilter=@param", new ObjectParameter(...));
var sql = query.ToTraceString(); 
```

这会产生以下 SQL（我编辑了查询以使其更具可读性）：

```
SELECT
    [Extent1].[SomeField] AS [SomeField],
    /* All remaining Extent1 fields */

    [Join1].[Id1] AS [Id1],
    /* All remaining Join1 fields */

    [Join3].[Id2] AS [Id2]
FROM   [OrderSet] AS [Extent1]
LEFT OUTER JOIN  (
    SELECT
        [Extent2].[SomeField] AS [SomeField],
        /* All remaining Extent2 fields */

        [Extent3].[SomeField] AS [SomeField],
        /* All remaining Extent3 fields */

    FROM  [CustomerSet] AS [Extent2]
    LEFT OUTER JOIN [OrderSet] AS [Extent3] 
        ON [Extent2].[Id] = [Extent3].[Customer_Id] ) AS [Join1] 
        ON [Extent1].[Customer_Id] = [Join1].[Id1]
LEFT OUTER JOIN  (
    SELECT 
        [Extent4].[SomeField] AS [SomeField],
        /* All remaining Extent2 fields */

        [Extent5].[SomeField] AS [SomeField],
        /* All remaining Extent3 fields */

    FROM  [CustomerSet] AS [Extent4]
    LEFT OUTER JOIN [OrderSet] AS [Extent5] 
        ON [Extent4].[Id] = [Extent5].[Customer_Id] ) AS [Join3] 
        ON [Extent1].[Customer_Id] = [Join3].[Id4]
WHERE [Extent1].[SomeFilter] = 'blah' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:53:18.400

> 有没有办法绕过 EF 生成的 SQL 查询来实现实体？

在大多数情况下没有，因为：

*   `ExceuteStoreQuery`无法加载关系
*   ESQL 无法加载关系而不使用`Include`

实际的选项是：

*   使用两个单独的查询 - 一个用于主体实体，一个用于依赖实体（您可以`where`从主体实体构造正确的子句）。如果您已正确配置所有内容并关闭延迟加载 EF 将在加载相关实体时自动修复关系
*   使用 .NET 4.5 并映射手写 SQL/存储过程，返回两个结果集 - 一个用于主体实体，一个用于相关实体。这需要手动修改（和手动维护）EDMX 文件。

# ios - iOS - 除了内存不足之外，应用程序崩溃的原因是什么？

> ID：12000314
> 
> 赞同：3
> 
> 时间：2012-08-17T05:36:59.303
> 
> 标签：ios, memory-management, crash, crash-reports

试图弄清楚为什么我的应用程序有时会崩溃。我刚刚在 Leaks 中运行它，即使 Live Bytes 只有 3.09 MB，它也崩溃了。所以看起来我没有使用太多的内存。通过 Xcode 在设备上运行时发生崩溃时，没有错误记录到控制台。设备上也没有崩溃日志。

我还能做些什么来排除故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:45:40.560

应用程序崩溃可能有多种原因。这里有几个最常见的。

*   错误的内存访问。

    当您访问过度释放的内存对象时发生。要解决问题，请使用模拟器使用 NSZombies。有时崩溃不是在模拟器中模拟的，在这种情况下，你只能靠自己了。

*   无效参数异常

    如果您访问一个属性或调用它不具有的对象的方法调用，通常会发生这种情况。通常是由于对象的无效转换，例如转换`NSArray`为`NSMutableArray`from`id`类型并尝试向其添加对象。

    解决方案是使用断点进行调试，并使用以下命令查看对象的实际类并将对象转换为适当的类型。

    ```
    po [object class] 
    ```

*   `UIViewController`问题

    使用不存在的 xib 文件创建视图控制器。

    使用未在 IB 中设置的视图出口创建视图控制器。

    `UIControl`在 XIB 文件中设置类似`UITextField`的IBOutlet，`File Owner`然后意外地将其从`File Owner`XIB 文件中删除，而不是重置。

还有更多.. !!

# github - jekyll 和 github - 如何更新博客文章？

> ID：12000316
> 
> 赞同：14
> 
> 时间：2012-08-17T05:37:06.120
> 
> 标签：github, jekyll

再会。

你能帮我解决我遇到的一个小问题吗？

我在 github 上有一个 jekyll 博客。问题是在我更新旧帖子，提交并推送后，博客帖子没有显示任何更改，但我看到提交已成功推送。

如果我在本地运行 jekyll --server，它会显示更新的博客文章并且不会报告任何错误。我没有安装 jekyll 插件。

我在做什么错或误解？非常感谢。

* * *

由[纳瓦兹](https://stackoverflow.com/users/415784/nawaz)添加：

我面临着完全相同的问题。我推添加了一个降价帖子和几个 css，并修改了布局和包含，然后我将它们推到了 github。它已成功完成。我的 github 显示了存储库中的所有更改，但 github 博客（即从 markdown 生成的 html 帖子）仍然相同。对他们完全没有任何改变。它显示了一些甚至不存在于存储库中的帖子。但是当我在`jekyll --server`本地进行时，每个更新都会显示在我托管的（本地）博客上`http://localhost:4000`。

请帮我！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T16:39:29.207

如果您的 Jekyll 站点在将其推送到 GitHub 后未正确呈现，则在本地运行 Jekyll 很有用，这样您就可以看到任何解析错误。为此，您需要使用我们使用的相同版本。
GitHub 的 Pages 服务器当前使用**Jekyll 0.11.0**和**Liquid 2.2.2**，并使用以下命令运行它：
`$ jekyll --pygments --safe`

[更多信息](https://help.github.com/articles/using-jekyll-with-pages)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:05:21.133

我现在正在尝试解决我的 pygments 突出显示的问题（在本地工作，根本不显示在 github 上，即使我收到有关成功构建的邮件）。迄今为止的发现：

*   确保您的存储库的默认分支是“master”（转到您的存储库管理页面）。
*   将 Jekyll 源文件放在其他分支中，并将`_site`内容放在主分支中。不会有`_config.yml`，没有 YAML 前端问题，因此 github 将按原样呈现您的内容，并且您将在其他分支上本地构建它。这实际上对我有用。将 _site 从另一个分支移动到您的 master 时需要一些体力劳动，但我对此很好 - 至少我不必依赖似乎有点错误的 github 构建过程，另外，我可以拥有任何东西我希望的插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T23:29:36.253

当您在本地生成 jekyll 站点进行测试时，请始终运行`jekyll --no-auto --server`. 如果在您的网站生成过程中遇到任何错误，这将显示。此外，在生成站点之前删除`_site`目录，然后运行上述命令。

如果您看到任何错误，请告诉我。我们可以进一步调试

# java - 关于构造函数与静态工厂方法

> ID：12000317
> 
> 赞同：1
> 
> 时间：2012-08-17T05:37:12.110
> 
> 标签：java

我有一个查询，如果我们在下面的类中有构造函数..

```
class A
{
  A{}

} 
```

现在构造函数的替代方法是什么，我已经采用了静态工厂方法的方法

```
class A
{
  public staic A getinstance()
  {
return new A();
}

} 
```

在上述方法中，根据分析，它将返回不可变对象，但我对此分析表示怀疑，因为该对象可以使用静态工厂方法返回并且以后可以更改，如何使其完全不可变..!! 请指教..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:53:35.580

*不变性*与您创建对象的方式无关。即来自*构造函数*或*工厂方法*。

JDK 为 Collections 提供了一些方法来做到这一点，使用`Collections.unmodifiableCollection`和相关的方法。

您还可以将它合并到您的设计中，这在处理*并发*应用程序时会变得很有用。

这里给出了一个完整的策略：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:42:18.533

构造函数的替代方案：`static factory methods`不是构造函数的替代方案。但是你可以拥有`block intialization`它相当于构造函数，但缺点是你不能像这样向它传递参数：

```
class B {
  private int i;
  //intialization block, can not pass arguments like constructor
  {
    i=2;
  }
  //getter and setters
} 
```

.

```
class A
{
  public staic A getinstance()
  {
    return new A();
  }

} 
```

--> 这个类不会返回不可变对象。为了使类不可变，使类最终，所有成员私有和最终，仅提供 getter 方法和参数化构造函数。见下面的例子：

```
final class A
{
   final private int b;
  public A(int b)
  {
    this.b = b;
  }

   public int getB() {
       return this.b;
   }

} 
```

# android - Android 捕获方向更改

> ID：12000319
> 
> 赞同：1
> 
> 时间：2012-08-17T05:37:41.500
> 
> 标签：android, orientation

我有两个背景图片。我希望图像 A 在屏幕水平时显示，而图像 B 在屏幕垂直时显示。有什么简单的方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:47:40.793

做这个

```
Oreintations 的结果值将是：-  
肖像 == 1  
风景 == 2    

```

```
int i = context.getResources().getConfiguration().orientation;
if (i == Configuration.ORIENTATION_PORTRAIT) {
   yourimg.setBackground(yourAimage);
} else {
   yourImg.setBackground(yourBimage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:41:42.227

您可以在此处创建两种 xml 布局，一种用于横向，另一种用于纵向。在纵向 xml 中，您可以为背景添加不同的图像。这样，我们可以为单个活动的两个方向使用两种不同的布局。请看下图，希望对您有所帮助。

![图片](../Images/6d717821de793d36d6ca7dd8110a106b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:44:48.730

拍摄两张图像 A 和 B。将图像 A 保存在可绘制区域中，将图像 B 保存在可绘制端口中

请注意，图像以相同的名称保存..

你也可以在图形布局中检查这个..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:44:47.377

为水平和垂直创建每个 XML

再创建一个文件夹名称“layout-land”，只需粘贴并粘贴 main.xml（您的布局文件），然后相应地更改背景即可。

你会做...

# java - 测验应用程序的倒数计时器

> ID：12000323
> 
> 赞同：0
> 
> 时间：2012-08-17T05:38:20.107
> 
> 标签：java, jsf

我正在使用 jdev 11.1.2.2 构建一个测验 Web 应用程序。所以我想在 jsf 页面上设置一个倒数计时器，它显示测验器用完时间之前的剩余时间。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:01:58.047

你可以有一个简单的javascript：

```
<form name="TIMER"><input type="text" size="8" 
name="d2"></form> 

<script> 
<!-- 
// 
 var milisec=0 
 var seconds=30 
 document.counter.d2.value='30' 

function display(){ 
 if (milisec<=0){ 
    milisec=9 
    seconds-=1 
 } 
 if (seconds<=-1){ 
    milisec=0 
    seconds+=1 
 } 
 else 
    milisec-=1 
    document.counter.d2.value=seconds+"."+milisec 
    setTimeout("display()",100) 
} 
display() 
--> 
</script> 
```

[或者你可以尝试这样的事情。](http://livedemo.exadel.com/richfaces-demo/richfaces/poll.jsf)

# iphone - Xcode中Subversion的配置

> ID：12000326
> 
> 赞同：4
> 
> 时间：2012-08-17T05:39:12.853
> 
> 标签：iphone, ios, ipad, xcode4.2

我想在我的电脑上配置 SVN。为此，我将如何创建存储库？如何给出所有需要的路径？我正在使用 Mac os 10.7.3 Lion 和 Xcode 4.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T06:00:26.953

要在 XCode 4 中设置您的 Subversion 存储库，请转到 File → Source Control → Manage Repositories。在那里，您将看到一个添加存储库的选项： ![在此处输入图像描述](../Images/9c843f9324be673929c03d57e53413dd.png)

选择添加存储库选项后，您需要输入您的 Subversion 存储库 URL 和您希望添加到存储库的名称：

![在此处输入图像描述](../Images/061b135760d13bfb048e85d55a1ab6b9.png)

单击下一步，在下一步中，您应该会看到一个选项，用于设置 svn 存储库中文件夹的路径。使用 svn 时通常会默认创建三个文件夹，它们分别称为 /trunk、/tags、/branches。如果您没有此文件夹，则可以跳过此步骤，这是可选的。

![在此处输入图像描述](../Images/3fcfdf4965463a67beca071f8556001f.png)

现在您应该在 XCode 管理器的侧边栏中看到您的存储库。我们想做的是将我们的项目之一添加到 Subversion，以便我们可以对项目使用版本控制。我们想将项目添加到我们存储库的 /trunk 文件夹中。为此，请单击 /trunk 文件夹，然后单击导入按钮。

![在此处输入图像描述](../Images/a291b0c40d4fb66a44cf45b9295be9e8.png)

单击导入时，选择要导入的文件所在的文件夹。然后将提示您输入提交消息。在此之后，单击刷新，您应该会看到新文件已添加到您的存储库中。

![在此处输入图像描述](../Images/7fbbab70d0fe808a4a6a6b7fc8a15193.png)

现在您的项目处于版本控制之下，您应该能够在您的存储库中的 Beanstalk 帐户中看到它。您现在需要做的就是将文件签出到您喜欢的位置，然后从该位置打开项目。

当您打开项目时，您将在您修改、添加或删除的所有文件旁边看到标志，并且您将看到提交文件的选项。

![在此处输入图像描述](../Images/1c2e8076a6c972815eb3fa91e1e52c09.png) 愿这对你有帮助

快乐编码。

# java - 如何按照放置 int map 的顺序从 hashmap 中获取键和值

> ID：12000327
> 
> 赞同：1
> 
> 时间：2012-08-17T05:39:12.030
> 
> 标签：java, hashmap

> **可能重复：**
> [有序地图实现](https://stackoverflow.com/questions/3288860/ordered-map-implementation)

我正在使用哈希图来存储值，如下所示 -

```
 Map<String,String>         propertyMap=new HashMap<String,String>();

 propertyMap.put("Document Type", dataobject.get("dDocType"));
 propertyMap.put("Document Title", dataobject.get("dDocTitle"));
 propertyMap.put("Revision Label", dataobject.get("dRevLabel"));
 propertyMap.put("Security Group", dataobject.get("dSecurityGroup")); 
```

之后，我在 List 中获取 hashmap 键和值

```
 documentProperties = new ArrayList(propertyMap.entrySet()); 
```

但是当我遍历列表时，我没有按照我将其放入地图的顺序获取键和值。

无论如何，我可以通过它获取订单中的值，我将其放入地图中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:42:47.090

我相信您正在寻找的是[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html).

> 这个链表定义了迭代顺序，通常是键插入映射*的顺序（插入顺序*）。

按为什么，为什么需要单独的`ArrayList`？您可以直接迭代`Map.entrySet`：

```
for (final Map.Entry<String, String> entry : propertyMap.entrySet()) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:40:20.733

`propertyMap.entrySet()`你得到的结果为`Set`。`Set`是无序的。

`new ArrayList(propertyMap.entrySet());`使用您在 Set 中的顺序构造一个列表（这可能不是您放入 map 的顺序）。

如果您正在寻找订单地图，您可以使用[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

[这是关于这个主题](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)的有趣讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T05:43:18.597

您必须使用[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)。有关更多详细信息，请查看迈克尔给出的[这个问题和答案](https://stackoverflow.com/questions/2889777/difference-between-hashmap-linkedhashmap-and-sortedmap-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:59:17.523

试试这个..

```
for(Map.Entry<String, String> m : map.entrySet()){

       // Use m.getKey() to get the Key.
       // Use m.getValue() to get the Value.
} 
```

# maven - maven 多模块数据聚合器

> ID：12000328
> 
> 赞同：2
> 
> 时间：2012-08-17T05:39:14.433
> 
> 标签：maven, maven-plugin, multi-module

我需要开发一个 maven 插件，它基本上必须执行以下操作。

多模块项目结构如下所示，

**示例项目**

```
-  Module X
    o   Review (a folder)
           x.xml
    o   Pom.xml
-  Module Y
    o   Review 
           Y.xml
    o   Pom.xml
-  Module Z
    o   Review 
           z.xml
    o   Pom.xml
-  Pom.xml (aggregate pom) 
```

**聚合 POM**

```
<modules>
    <module>Module X</module>
    <module> Module Y </module>
    <module> Module XZ</module>
   </modules> 
```

每个模块中的 review 文件夹都有 XML 文件。现在，插件应该计算这些 XML 中某些条目的数量，并生成包含计数详细信息的文本文件。应该为每个模块生成文本文件，其中包含该特定模块的计数。此外，还应该生成一个包含所有模块总数的文本文件（累积报告）。我得到了这个工作，但插件为所有模块运行一次，然后在根级别运行，它再次扫描所有模块以查找此类 XML。我需要一种方法来从已经可用的每个模块的计数中获取总计数。我不希望这个过程再次发生。我尝试使用@aggregator，但似乎没有帮助。

有没有更好的解决方案？

# python - python对象保存和重新加载

> ID：12000329
> 
> 赞同：2
> 
> 时间：2012-08-17T05:39:14.787
> 
> 标签：python, save

我一直在研究一个 python 程序，它基本上创建了 5 种不同类型的层次结构的对象。例如，我的程序可能会创建 1 个 Region 对象，其中包含 2000 个 Column 对象，其中包含 8000 个 Cell 对象（每列中有 4 个 Cell），其中所有对象都基于视频输入相互交互。

现在，我希望能够在视频输入在一段时间内更改它们的每个状态后保存所有对象状态。所以我的问题是如何有效地保存和重新加载 Python 中的数千个对象？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:56:01.617

不确定 pickle 对于大规模的效率如何，但我认为您正在寻找的是[object serialization](http://docs.python.org/release/3.1.5/library/pickle.html#pickle-inst)。但是您是在尝试“刷新”这些对象中的信息还是保存并加载它们？另请阅读“[外部对象的持久性](http://docs.python.org/release/3.1.5/library/pickle.html#persistence-of-external-objects)”部分，因为您需要为关系/关联创建与每个对象关联的字母数字 ID。

一种完全 hacky 的方法也可能是对对象进行 json 化并存储。您仍然需要字母数字 id 或某种可用的标识符来关联每个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:05:50.450

你看过 Shelve、Pickle 或 cPickle 吗？ [http://docs.python.org/release/2.5/lib/persistence.html](http://docs.python.org/release/2.5/lib/persistence.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:37:17.300

我认为您需要查看[ZODB](http://www.zodb.org/)。

ZODB是一个对象数据库，使用pickle序列化数据，非常擅长处理对象的层次结构，如果你的对象使用包含的`persistent.Persistent`基类，将检测并只保存在你提交时更改的对象；例如，没有必要在每一个微小的变化上写出整个层次结构。

ZODB 项目中包含一个名为 的包`BTrees`，该包支持 ZODB，可高效地将数千个对象存储在一个地方。将这些用于您的区域对象来存储列。我们有时使用 BTree 来存储数百万个数据点。

# php - 如何根据第一个数组列名在数据库表中插入数组值

> ID：12000332
> 
> 赞同：1
> 
> 时间：2012-08-17T05:39:44.700
> 
> 标签：php, mysql, arrays

我正在从 csv 文件导入数据，所以我使用了该代码

```
<?php
$path = "Export.csv";
$row = 1;
if (($handle = fopen($path, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $row++;
        $data_entries[] = $data ;

    }
    fclose($handle);
}
 echo"<pre>";
 print_r($data_entries);
 echo"</pre>";
?> 
```

我的数组输出就像我的第一个数组显示列名之后所有数组都显示值所以我想根据第一个数组列名插入值

```
 Array
 (
  [0] => Array
    (
        [0] => Type
        [1] => PinCode
        [2] => APN
        [3] => County
    )
  [1] => Array
    (
        [0] => Auction
        [1] => 503082537
        [2] => 502-052-002
        [3] => United States of America
    )
  [2] => Array
    (
        [0] => Auction
        [1] => 21596378
        [2] => 628-202-038
        [3] => Australia
     )
 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:09:48.190

试试下面的代码：

```
//extract the column names
$fields = array_shift($data_entries);
$values = array();

// Append the values
foreach($data_entries as $value){
   $values[]="('{$value[0]}', '{$value[1]}', '{$value[2]}', '{$value[3]}' )";
}

// Build the SQL
$sql = "INSERT INTO `TABLE_NAME` (" . implode(',' , $fields) . ") values " . implode(',', $values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:06:22.977

您可以尝试不同的方法，因为您的数据来自 CSV 文件。

```
LOAD DATA LOCAL INFILE 'Export.csv' INTO TABLE YourTable; 
```

有很多选项，请阅读手册：[http ://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

# php - 我可以使用 iframe 在 ruby on rails 框架上加载 php 网站吗？

> ID：12000333
> 
> 赞同：0
> 
> 时间：2012-08-17T05:39:49.703
> 
> 标签：php, ruby, iframe, integrate

我有一位客户希望将我们的网站用作他网站上的插件。他的网站正在使用 Ruby on Rails 开发。虽然我们的网站是一个 PHP 网站。我正在考虑使用 iframe 将我的网站加载到他们的网站中。但是我不确定这是否可行，因为我对 Ruby 框架一无所知。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:44:47.543

是的你可以。提供给 Web 浏览器的 HTML 独立于服务器端使用的 Web 框架。如果生成的 HTML 相同，浏览器将无法区分 PHP/Python/Rails Web 应用程序生成的 HTML。对于浏览器，它只是 HTML，它将相应地解析和显示内容。

在您客户的 Ruby on Rails 站点中，您可以`iframe`像这样嵌入

```
<iframe src="http://www.yourphpsite.com/php_page.php"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:43:12.103

iframe 独立于您正在使用的框架，因为它们是纯 HTML 并且可以显示访问者可以访问的任何页面。它可能不是最优雅的解决方案，但可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T05:44:21.387

iframe 是浏览器端的 HTML 元素，可以包含 URL 可以指向的任何内容，所以是的。您可以在 Rails 网站或 .NET 网站或 Java 网站或 Python 网站或任何其他网站上包含 PHP 网站。请了解什么在哪里运行以及什么在哪里存在的总体拓扑/景观。

# facebook - Facebook Graph API 视频上传隐私设置

> ID：12000341
> 
> 赞同：3
> 
> 时间：2012-08-17T05:40:59.363
> 
> 标签：facebook, facebook-graph-api

是否可以使用 Graph API 为每个视频上传设置“隐私”？我有一个小画廊，可以展示人们的不同视频。但目前，如果我不是上传者的“朋友”，我只能显示缩略图并且无法观看视频。

仅供参考：我已将身份验证对话框中 Facebook 应用程序设置中的“默认活动隐私”设置为“所有人”。

任何输入都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:43:48.887

如果你去**Account Settings** >> **Apps**，找到你的应用，有一个设置叫做

> 谁可以在您的 Facebook 个人资料上看到此应用为您发布的帖子？

虽然您的*默认活动隐私***现在**可能设置为*所有人* ，但用户在授权应用程序时可能更改了隐私模式。或者，在您更改默认设置*之前，用户可能使用默认隐私授权您的应用。*

 **** * *

通过 Facebook：[“我在哪里可以控制我的应用隐私和设置？”](http://www.facebook.com/help/?faq=218345114850283)

... Facebook 从未说过应用程序可以覆盖用户的隐私设置。那是因为不可能。如果可能的话，这将严重阻碍人们使用应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T21:49:11.573

@Gil Birman 的回答是错误的。

尝试使用 name`privacy`和 value添加到 http 实体参数`{"value":"SELF"}`。结果，上传的视频可以访问：只有我。Facebook 还支持其他隐私。***

# java - 为控制器spring mvc3定义默认url

> ID：12000343
> 
> 赞同：0
> 
> 时间：2012-08-17T05:41:04.183
> 
> 标签：java, spring-mvc, request, url-mapping

我是 spring mvc3 开发的新手，遇到了一个小问题（我没有遇到 ASP.Net MVC3）。我想知道为控制器定义默认（或登陆）URL 的过程。

我有一个帐户控制器，我负责所有与帐户管理相关的工作。所以我所有的网址都映射到这个控制器。我想知道如何将我的“/accounts”url 请求映射到 hit`openAccountsDashboard`方法？

代码 -

```
.... imports...

@Controller
@RequestMapping(value = "/accounts/*")
public class AccountController {

      @RequestMapping( value = "/", method = RequestMethod.GET)
      public ModelAndView openAccountsDashboard(HttpServletRequest request) {
           .....
           return new ModelAndView("accounts/landing");
      }

      @RequestMapping( value = "/change-password", method = RequestMethod.GET)
      public ModelAndView openPasswordChangePage(HttpServletRequest request) {
           .....
           return new ModelAndView("accounts/passwordChange");
      }
... other actions...

} 
```

任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:55:59.537

尝试这样的事情：

```
 .... imports...

@Controller
@RequestMapping(value = "/accounts/")
public class AccountController {

      @RequestMapping( value = "", method = RequestMethod.GET)
      public ModelAndView openAccountsDashboard(HttpServletRequest request) {
           .....
           return new ModelAndView("accounts/landing");
      }

      @RequestMapping( value = "/change-password", method = RequestMethod.GET)
      public ModelAndView openPasswordChangePage(HttpServletRequest request) {
           .....
           return new ModelAndView("accounts/passwordChange");
      }
... other actions...

} 
```

然后你可以像这样使用url：

```
http://localhost:8080/yourwebapp/accounts/ 
```

点击 openAccountsDashboard 方法。问候， 阿雷克

# python - 从 django 视图返回响应时，“str”对象没有属性“csrf_exempt”？

> ID：12000344
> 
> 赞同：1
> 
> 时间：2012-08-17T05:41:04.327
> 
> 标签：python, django, django-nonrel, gunicorn

我的视图有一个奇怪的问题，它以 json 格式返回响应。我的视图如下所示：

```
def CheckPlayer(request,client_id):
    if request.method == 'GET':
        try:
            user = User.objects.get(id = client_id)
        except:
            return Error(message = "User doesnot exists.")
        message = request.GET.get('message','')
        if not message:
            return Error(message = "Argument Missing.")
        response = {}
        result = MakingRequest(message)
        result = json.loads(result)
        if result['failure'] == '0':
            response['failure'] = '0'
        else:
            response['failure'] = '1'
        return HttpResponse(json.dumps(response), mimetype="application/javascript")
    else:
        return Error()

def MakingRequest(message):
    values = {'message':message}
    rObjects =  Ram.objects.all()
    temp = []
    for i in rObjects:
        temp.append(i.appId)
    values['registration_ids'] = temp
    param = json.dumps(values)
    req = urllib2.Request("https://android.googleapis.com/gcm/send", param)
    req.add_header( 'Content-Type' , 'application/json' )
    req.add_header( 'Authorization' , 'key=7FcEMnl0FRTSBjhfjfhjfHi1Rmg04Ns' )
    response = urllib2.urlopen(req)
    return response.read() 
```

我已经在我的本地服务器上对其进行了测试，它运行良好，但是如果我在我的服务器（nginx、gunicorn、django-mongoDB、mongoDB）上运行它，那么它会给我这个错误。我知道这个错误，如果视图不返回 HttpResponse从一个视图然后它 djangi 引发错误**“Nonetype object has no attribute csrf_exempt'”**但在我的情况下，我返回的是 json 格式的响应，但它仍然给我错误。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:28:49.993

当您返回 Error() 时，您没有返回 HttpResponse，因此 Django 无法将装饰器应用于它。

# php - 从数组中提取值

> ID：12000346
> 
> 赞同：0
> 
> 时间：2012-08-17T05:41:14.793
> 
> 标签：php, arrays, foreach

我试图从一个充满新闻项目及其参数的数组中获取特定值。

我的数组有 25 个项目，来自 6 个不同的类别，我只需要获取类别名称而不是 25 次。如果我不完全清楚，就这么说吧

这是`print_r($this->primary)`：

```
Array(
    [0] => stdClass Object
        (
         [title]=> Title 1
         [categoryname]=> Cat1
         [categoryid]=> 2
        )
   [1] => stdClass Object
        (
         [title]=> Title 2
         [categoryname]=> Cat1
         [categoryid]=> 2
        )

   [2] => stdClass Object
        (
         [title]=> Title 3
         [categoryname]=> Cat2
         [categoryid]=> 3
        )
   [3] => stdClass Object
        (
         [title]=> Title 4
         [categoryname]=> Cat2
         [categoryid]=> 3
        )
) 
```

我的循环是：

```
for each ($getids->categories as $key=>$mycategory)
{
    echo ' <h2> CAT NAME SHOULD GO HERE</h2> ';
    for each ($this->primary as $key=>$item){
        if ($mycategory == $item->categoryid){
            echo $item->title;
        }
    }
} 
```

问题是我在开始***之前***需要类别名称`for each`。愚蠢的是，`$getids->categories`除了类别 ID 之外，没有给我任何其他信息。我无法获取它，`$this->primary[0]`因为这些项目不是按类别分组的，而是如您在上面看到的那样滚入数组中，

任何帮助表示赞赏。谢谢！

**编辑**：这是`print_r($getids->categories)`：

```
 Array
 (
     [0] => 11
     [1] => 14
     [2] => 12
     [3] => 13
     [4] => 15
     [5] => 21
     [6] => 20
     [7] => 29
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:59:06.750

使用您当前的设置，您别无选择，只能调用 categoryName 25 次。如果您想避免这样做，我会考虑重构您的代码，以便 $this->primary 不会填充所有内容。假设您从模型中获取这些值，您可以将模型函数更改为按类别名称进行限制。

```
foreach($categoryNames as $categoryName) {
    $this->primaryArray[$categoryName] = Foo.getByCategoryName($categoryName);
}

foreach($this->primaryArray as $categoryName => $primary) {
    echo '<h2>' . $categoryName . '</h2>';
    foreach($primary as $key=>$item){
        echo $item->title;
    }
} 
```

编辑

按类别排序（尽管您仍将调用 25 次）：

```
$primaryArray = array();

// sort array by category
foreach($this->primary as $value) {
    $primaryArray[$value->categoryName] = $value;
}

foreach($primaryArray as $categoryName => $primary) {
    echo '<h2>' . $categoryName . '</h2>';
    foreach($primary as $key=>$item){
        echo $item->title;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:10:33.170

假设您想保留 $getids->categories 返回的类别顺序，您可以尝试以下操作：

```
//Group items by category.
$itemsByCategory = array()
foreach($this->primary as $item) {
    if ( !isset($itemsByCategory[$item->categoryid] ) {
        $itemsByCategory[$item->categoryid] = array();
    }
    $itemsByCategory[$item->categoryid][] = $item;
}

//Print items in each category.
foreach($getids->categories as $mycategory):
    if ( isset($itemsByCategory[$mycategory]) ) {
        $categoryName = $itemsByCategory[$mycategory][0]->categoryname;
        echo '<h2>', $categoryName ,'</h2>';
        foreach($$temsByCategory[$mycategory] as $key=>$item){
           echo $item->title;
        }
    }

endforeach; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T06:20:52.487

看看这是否适合你，

```
foreach($this->primary as $key=>$item)
{
    $headingPrinted = false;
    foreach($getids->categories as $key=>$catID) {
        if($catID == $item->categoryid){
            if (!$headingPrinted) {
                echo '<h2>'.$item->categoryname.'</h2>';
                $headingPrinted = true;
            }
            echo $item->title;
        }
    }
} 
```

# database - 与条形码结合使用的数据库

> ID：12000347
> 
> 赞同：0
> 
> 时间：2012-08-17T05:41:16.587
> 
> 标签：database, barcode-scanner

这是一个广泛的问题-希望我在正确的板上发帖....

我怎样才能分开设置数据库（我正在考虑在这里访问？）

我想为我的公司设置一些字段 - 例如名称、号码、地址、电子邮件地址等。

我有一台 dymo 标签打印机来打印条形码。我尝试在条形码本身上输入信息，但条形码变得“太大而无法打印”，所以我希望能够将数据库链接到条形码，以便在扫描时加载所有信息。

对不起，我没有代码 - 我只是没有地方开始）：

为帮助干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:18:06.190

如果条码太大，您可以在 DYMO 标签的属性中更改其大小。

DYMO Label 中有一个名为 Import Data and Print 的功能。您可以设计带有条形码和文本对象的标签，然后选择一个文件并将列链接到对象（基本拖放）。我希望这能回答这个问题。

# android - 使用 AlertDialog 在 DialogFragment 上未正确应用主题

> ID：12000350
> 
> 赞同：0
> 
> 时间：2012-08-17T05:41:50.200
> 
> 标签：android, android-alertdialog

我似乎无法在我的 DialogFragment/AlertDialog 上正确应用主题。

这是代码：

```
protected static class TabRenameDialogFragment extends DialogFragment
{

    public static TabRenameDialogFragment newInstance(long tabId, CashierActivity ca) {

        // create new dialogfragment and initialize items
        TabRenameDialogFragment trdf = new TabRenameDialogFragment();

        Bundle b = new Bundle();
        b.putLong("TAB_ID", tabId);

        trdf.setArguments(b);

        return trdf;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final DialogFragment fm = this;

        // set data
        final long id = getArguments().getLong("TAB_ID");

        return new AlertDialog.Builder(getActivity(), R.style.Theme_Styled_Dialog)
                // .setIcon(R.drawable.alert_dialog_icon)
                .setTitle("Rename " + cTabName)
                .setView(view)
                .setCancelable(true)
                .setPositiveButton("Set",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                        }
                    }
                ).setNegativeButton("Cancel", 
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            // nothing!
                        }
                    })
                .create();
    }

} 
```

我正在使用 AlertDialog.Builder() 的 2 参数构造函数来设置主题；它正确设置了主题，但对话框片段本身周围出现了一个奇怪的边框。我认为这是因为我在 DialogFragment 中设置了 AlertDialog 的主题，但我不知道如何摆脱外部部分。我已经尝试将 DialogFragment 上的样式设置为 STYLE_NO_FRAME 等。

![对话框错误](../Images/c6053c10750bd2b2a6ce3c29887ab681.png)

提前致谢。

**编辑：**

以下是我正在应用的样式：

```
<style name="Theme.Styled.Dialog" parent="@style/Theme.Sherlock.Light.Dialog">
    <item name="dropDownListViewStyle">@style/Widget.Styled.DropDownListStyle</item>
    <item name="android:dropDownListViewStyle">@style/Widget.Styled.DropDownListStyle</item>

    <item name="android:windowTitleStyle">@style/DialogWindowTitle.Styled</item>

    <item name="android:textColorPrimary">@color/bg_color_main</item>
    <item name="android:textColorPrimaryInverse">@color/bg_color_main_dark</item>
</style>

<style name="DialogWindowTitle.Styled" parent="@style/DialogWindowTitle.Sherlock.Light">
    <item name="android:textAppearance">@style/TextAppearance.Styled.DialogWindowTitle</item>
</style>

<style name="TextAppearance.Styled.DialogWindowTitle" parent="@style/TextAppearance.Sherlock.Light.DialogWindowTitle">
    <item name="android:textColor">@color/bg_color_main</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:50:57.710

一种选择是像这样覆盖 windowBackground 样式：

```
<item name="android:windowBackground">@drawable/dialog_background</item> 
```

颜色定义如下：

```
<color name="transparent_white">#00FFFFFF</color> 
```

这仍然不理想，因为如果您使用默认样式，生成的窗口仍然有点窄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T16:39:11.670

不要返回从 AlertDialog.builder 获得的 Dialog，而是获取 DIAlog 并删除背景：

```
Builder builder = new AlertDialog.Builder(...);
Dialog dialog = builder.create();
dialog.requestWindowFeature(STYLE_NO_TITLE);
return dialog; 
```

我没有测试过，但它应该可以工作（如果没有，请告诉我）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T13:32:50.937

尝试以下操作；

```
ContextThemeWrapper context = new ContextThemeWrapper(getActivity(), android.R.style.Theme_Holo_Light_Dialog);
AlertDialog.Builder builder = new AlertDialog.Builder(context); 
```

# android - android中TabHost内的进度条

> ID：12000359
> 
> 赞同：1
> 
> 时间：2012-08-17T05:42:33.977
> 
> 标签：android, android-tabhost, android-progressbar

![我想在tabhost中显示一个进度条，而tabhost中的图像正在加载，这可能吗，我在Paint中制作了这个示例图像只是为了让我对标签主机的UI有所了解..](../Images/701b6b3e76c082f122317488c42eb49b.png) 我想在tabhost中显示一个进度条，而tabhost中的图像正在加载，这可能吗，我在Paint中制作了这个示例图像只是为了让我对标签主机的UI有所了解..

我怎样才能做到这一点，进度条应该出现在tabhost中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:24:02.127

试试这个。在加载选项卡时查看您需要进度条。您可以`AsyncTask`在加载视图时使用它，因此在未加载完整视图之前，如果您在代码中的适当位置定义进度条，它将显示进度条。

另一件事是你可以使用`selector`。这是我的帮助。请阅读这篇文章[http://www.mkyong.com/android/android-imagebutton-selector-example/](http://www.mkyong.com/android/android-imagebutton-selector-example/)并让我知道它是否有效。

希望这对您有所帮助。:)

# symfony - symfony 2 中的奇怪错误加载装置

> ID：12000368
> 
> 赞同：0
> 
> 时间：2012-08-17T05:43:17.657
> 
> 标签：symfony, doctrine-orm, fixtures

在 Symfony2 中加载固定装置时，我遇到了一个非常奇怪的错误。我已经使用了netbeans调试器并检查了错误中提到的变量的值，这就是它应该是的！！！因为我真的不知道错误可能是什么，所以我发布了整个夹具类。输出的错误是：

> PHP 致命错误：在第 77 行的 /home/victor/projects/elcuadre/src/ElCuadre/OffersBundle/DataFixtures/ORM/LoadOfferData.php 中的非对象上调用成员函数 setGeolocation()

代码是：

```
<?php

namespace ElCuadre\OffersBundle\DataFixtures\ORM;

use Doctrine\Common\Persistence\ObjectManager;
use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\Common\DataFixtures\AbstractFixture;
use ElCuadre\OffersBundle\Entity\GeoLocation;
use ElCuadre\OffersBundle\Entity\LatLng;
use ElCuadre\OffersBundle\Entity\Offer;
use ElCuadre\OffersBundle\Entity\Availability;
use ElCuadre\OffersBundle\Entity\Picture;
use ElCuadre\OffersBundle\Entity\Experience;

class LoadOfferData extends AbstractFixture implements FixtureInterface {

    public function buildLatLngs($points) {
        $result = new ArrayCollection();
        foreach ($points as $point) {
            $result[] = new LatLng($point["x"], $point["y"]);
        }
        return $result;
    }

    public function buildGeoLocation($centerLat, $centerLong, $mapType, $type, $zoom) {
        $geoloc = new GeoLocation();
        $geoloc->setCenterLat($centerLat);
        $geoloc->setCenterLong($centerLong);
        $geoloc->setMapType($mapType);
        $geoloc->setType($type);
        $geoloc->setZoom($zoom);
        return $geoloc;
    }

    public function loadGeoLocation(ObjectManager $manager, $centerLat, $centerLong, $mapType, $type, $zoom, $points) {
        $geoloc = $this->buildGeoLocation($centerLat, $centerLong, $mapType, $type, $zoom);
        $latlngs = $this->buildLatLngs($points);
        $geoloc->setLatLngs($latlngs);
        $manager->persist($geoloc);
        foreach ($latlngs as $latlng) {
            $latlng->setGeolocation($geoloc);
            $manager->persist($latlng);
        }
        return $geoloc;
    }

    public function buildExperience($title,$location,$type){
        $exp = new Experience();
        $exp->setTitle($title);
        $exp->setDescription($title);
        $exp->setLocation($location);
        $exp->setType($type);
    }

    public function load(ObjectManager $manager) {
        $geoloc = $this->loadGeoLocation($manager, 
                5.968144043645581, -62.53726971960451,
                'HYBRID', 'Marker', 14,
    array("x" => 5.968144043645581, "y" => -62.53726971960451));
        $pictures = new ArrayCollection();
        $pictures[] = Picture::newPicture('Salto Angel A', 'Salto Angel A', 
                'Salto Angel', "imgs/content/salto angel/A.jpg");
        $pictures[] = Picture::newPicture('Salto Angel 1', 'Salto Angel 1', 
                'Salto Angel', "imgs/content/salto angel/1.jpg");
        $pictures[] = Picture::newPicture('Salto Angel 2', 'Salto Angel 2', 
                'Salto Angel', "imgs/content/salto angel/2.jpg");
        $pictures[] = Picture::newPicture('Salto Angel 3', 'Salto Angel 3', 
                'Salto Angel', "imgs/content/salto angel/3.jpg");
        $pictures[] = Picture::newPicture('Salto Angel 4', 'Salto Angel 4', 
                'Salto Angel', "imgs/content/salto angel/4.jpg");
        $pictures[] = Picture::newPicture('Salto Angel 5', 'Salto Angel 5', 
                'Salto Angel', "imgs/content/salto angel/5.jpg");

        $exp = $this->buildExperience('Salto Angel 3 días y 2 noches',
                'Salto Angel - Bolivar - Venezuela','P');
        $exp->setGeolocation($geoloc);
        foreach ($pictures as $picture) {
            $picture->setExperience($exp);
            $manager->persist($picture);
        }

        $offer = new Offer();
        $offer->setTitle('Salto Angel 3 días y 2 noches');
        $offer->setDescription('Salto Angel 3 días y 2 noches');
        $offer->setPrice(1233.43);
        $offer->setDiscount(.12);
        $offer->setStart(new \DateTime('07-04-2012'));
        $offer->setEnd(new \DateTime('09-04-2012'));
        $offer->setDescription('3 dias y 2 noches para dos personas en habitacion Suite con desayuno incluido');
        $offer->setLocation('Caracas');
        $offer->setMaxPerUser(2);
        $offer->setIsFeatured(true);
        $availabilities = new ArrayCollection();
        $availabilities[] = new Availability(new \DateTime('07-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('08-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('09-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('10-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('11-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('12-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('13-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('14-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('15-04-2012'), 5);
        $availabilities[] = new Availability(new \DateTime('16-04-2012'), 5);
        foreach ($availabilities as $aval) {
            $offer->addAvailability($aval);
            $aval->setOffer($offer);
            $manager->persist($aval);
        }

        $manager->flush();
    }

}

?> 
```

我在调试器中检查了变量的值，`$geoloc`它应该是（`ElCuadre\OffersBundle\Entity\GeoLocation`）。

那么，夹具包中是否存在错误？或者，我做错了吗？我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:21:34.200

在 buildExperience 方法的最后，添加：

```
return $exp; 
```

# facebook - 需要在 Symfony2 中连接 Facebook 连接

> ID：12000370
> 
> 赞同：1
> 
> 时间：2012-08-17T05:43:18.970
> 
> 标签：facebook, symfony

我是 Symfony 2 的新手，想集成 facebook Connect。谁能一步步指导我如何在 Symfony2 中集成 facebook 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:36:55.547

看看[FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)，它做得很好，并且有一个很好的自述文件来设置它。

# hadoop - ElasticMapReduce：是否可以重用已分配的 EMR 集群？

> ID：12000372
> 
> 赞同：1
> 
> 时间：2012-08-17T05:43:51.857
> 
> 标签：hadoop, elastic-map-reduce

我在创建新集群时在 EMR CLI 中指定了 --alive 选项，我想知道是否可以在启动另一个作业时重用集群？我找不到任何相关选项来获取集群的某种 ID？那么这是否意味着不可能这样做呢？

# c# - 如果访问文件被拒绝，线程 try catch 继续

> ID：12000373
> 
> 赞同：2
> 
> 时间：2012-08-17T05:43:56.893
> 
> 标签：c#, .net-2.0, file-permissions, permission-denied

使用系统线程循环浏览文件夹，如果访问文件被拒绝，如何忽略并继续。

```
// Start thread.  
System.Threading.ThreadStart start = delegate { scanner(@"C:\", "*.html;*.txt"); };
System.Threading.Thread thread = new System.Threading.Thread(start);
thread.Start();

private static string scanstatus = string.Empty;
private static void scanner(string folder, string patterns) 
{
    try
    {  
        // Get the patterns.
        string[] pattern_array = patterns.Split(';');

        // Search.
        foreach (string pattern in pattern_array)
        {
            foreach (string path in System.IO.Directory.GetFiles(folder, pattern, System.IO.SearchOption.AllDirectories))
            {
                // trim path
                scanstatus = (path.Length > 60) ? "../" + path.Substring(path.Length - 59, 59) : path;

                System.Threading.Thread.Sleep(5000);
            }
        }

    }
    catch (System.Exception excpt)
    {
        Console.WriteLine(excpt.Message);
    }
    finally
    {
        Console.WriteLine("*************DONE*************");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:50:02.977

正如 Daniel 在评论中提到的，基本上当您想继续进行下一次迭代时，您需要将 try/catch 移动到循环内部。目前您的捕获*位于外部*循环之外，因此如果抛出异常，则无法继续执行。在 C# 中没有“从你要去的地方继续”的概念。

我强烈建议您*也*限制您捕获的内容。例如：

```
foreach (string pattern in patternArray)
{
    try
    {
        foreach (string path in Directory.GetFiles(...))
        {
            // ...
        }
    }
    catch (IOException e)
    {
        // Log it or whatever
    }
    // Any other exceptions you want to catch?
} 
```

笔记：

*   捕获`Exception`几乎总是一个坏主意，除非作为请求（或其他）处理顶层的最终支持
*   变量名中的下划线在 .NET 中不是常规的；通常你会使用 camelCase 来表示变量（以及 PascalCase 来表示方法、类等）
*   使用`using`指令，您可以避免将完全限定的类型名称放入代码中，这将使其更易于阅读
*   这种方法最终会很长——我建议提取内部循环；可能包括 try/catch，也可能不包括。

# php - 生成 Excel 文件时出错

> ID：12000377
> 
> 赞同：0
> 
> 时间：2012-08-17T05:44:22.840
> 
> 标签：php, excel

如果单击提交按钮，我在这里有一个代码可以生成一个 excel 文件。该文件填充了来自 mysql 的数据，当然也基于 mysql 查询。这里是：

```
<?php
require("aacfs.php");

header("Content-type: application/ms-excel");
header("Content-Disposition: attachment; filename=Reservation Summary_sortbydate.xls");
header("Pragma: no-cache");
header("Expires: 0");

$head1="Ayala Aviation Corporation";
$head2="RESERVATION SUMMARY";
$head3="For the period ___________";

$heads="$head1\n$head2\n$head3\n";

$query = "select bdate as 'Date', cliename as 'Client', grpcode as 'Group Code', bperson as 'Contact', reservno as 'Reservation No.', acode as 'Aircraft', fdate as 'Flight Date', itinerary as 'Itinerary', etd as 'ETD', eta as 'ETA', pname as 'Passengers', status as 'Status', cutoff as 'Confirmation Cut-off', adminid as 'Reserved by' from reservation order by bdate";

$result = mysql_query($query);
if($result) {
    $count = mysql_num_rows($result);
   for($i=0; $i<$count; $i++) {
   for ($i = 0; $i < mysql_num_fields($result); $i++) 
    { 
    $schema_insert_rows.=mysql_field_name($result,$i) . "\t"; 
    } 
    $schema_insert_rows.="\n"; 

        while($row = mysql_fetch_row($result)) {
            $line = '';
            foreach($row as $value) {
                if((!isset($value)) OR ($value == "")) {
                    $value = "\t";
                } else {
                    $value = str_replace('"', '""', $value);
                    $value = '"'.$value.'"'."\t";
                }
                $line .= $value;
            }
            $data .= trim($line)."\n";
        }
        $data = str_replace("\r", "", $data);
        if($data == "") {
            $data = "\n(0) Records Found!\n";
        }
    }
    print mb_convert_encoding("$heads\n$schema_insert_rows\n$data", 'UTF-16LE', 'UTF-8');
} else die(mysql_error());
?> 
```

它执行需要很长时间，当它最终下载到我的计算机上时，该文件显示一条错误消息：“超过 60 秒的最大执行时间”。我尝试像这样设置时间限制：`set_time_limit(0)`但仍然需要很长时间才能下载文件，当我打开下载的文件时，文件本身再次显示另一个错误：'允许的内存大小为 134217728 字节已用尽（试图分配 133693422 字节）'

我有这个确切的代码，但是在另一个 php 文件上运行了不同的 mysql_query，所以我真的很沮丧为什么这不起作用。前几天我的工作很顺利，但是当我今天再次检查时，它显示了这个错误。我究竟做错了什么？任何帮助，将不胜感激。先感谢您！上帝保佑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:52:00.527

您是否尝试获取 10 个数据并查看它们是否具有相同的结果或错误？我认为您尝试导出的数据有点重，这就是您遇到执行超时的原因。

用这个更新你的查询。

```
$query = "
select 
    bdate as 'Date', 
    cliename as 'Client', 
    grpcode as 'Group Code', 
    bperson as 'Contact', 
    reservno as 'Reservation No.', 
    acode as 'Aircraft', 
    fdate as 'Flight Date', 
    itinerary as 'Itinerary', 
    etd as 'ETD', 
    eta as 'ETA', 
    pname as 'Passengers', 
    status as 'Status', 
    cutoff as 'Confirmation Cut-off', 
    adminid as 'Reserved by' 
from 
    reservation 
group by 
    bdate 
LIMIT 10"; 
```

更新你的 php.ini

```
 post_max_size = 8M
     default_socket_timeout = 60 
```

# cocos2d-iphone - Cocos2d：如何在 CCLayer 的后台播放视频

> ID：12000379
> 
> 赞同：3
> 
> 时间：2012-08-17T05:44:38.683
> 
> 标签：cocos2d-iphone, mpmovieplayercontroller, ccvideoplayer

我想让视频在后台播放，文字标签在前面，运行以下代码，视频正在播放，但文字标签不显示！

```
-(id) init {
    if(!(self=[super init])) {
        return nil;
    }

    CGSize size = [[CCDirector sharedDirector] winSize];

    // MP4
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"m4v"]];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [moviePlayer respondsToSelector:@selector(setFullscreen:animated:)];
    moviePlayer.controlStyle = MPMovieControlStyleNone;
    moviePlayer.shouldAutoplay = YES;
    moviePlayer.repeatMode = MPMovieRepeatModeOne;
    moviePlayer.view.frame = CGRectMake(0, 0, size.height, size.width);
    [viewController.view  addSubview:moviePlayer.view];
    [viewController.view  sendSubviewToBack:moviePlayer.view];

    // create and initialize a Label
    CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello World" fontName:@"Marker Felt" fontSize:64];
    label.position =  ccp( size.width /2 , size.height/2 );
    [self addChild: label];

    return self;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:11:17.130

我找到了答案：

首先在 AppDelegate.m 中将 kEAGLColorFormatRGB565 替换为 kEAGLColorFormatRGBA8，其次，如以下代码，最后 4 行很重要：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"video" ofType:@"mp4"]];
_moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:_moviePlayer];

[_moviePlayer respondsToSelector:@selector(setFullscreen:animated:)];
_moviePlayer.controlStyle = MPMovieControlStyleNone;
_moviePlayer.shouldAutoplay = YES;
_moviePlayer.repeatMode = MPMovieRepeatModeOne;
_moviePlayer.view.frame = CGRectMake(0, 0, 300, 300);

UIView* glView = [CCDirector sharedDirector].openGLView; // attention
[glView.superview insertSubview:_moviePlayer.view atIndex:0]; // attention
glView.opaque = NO; // attention
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); // attention 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:21:43.187

CCVideo 播放器是 cocos2D 项目中播放视频的最佳选择之一

```
[CCVideoPlayer setDelegate: self];
[CCVideoPlayer playMovieWithFile: @"bait.m4v"]; 
```

# coding-style - 如何配置 PyCharm 以合理的方式换行

> ID：12000384
> 
> 赞同：3
> 
> 时间：2012-08-17T05:44:54.070
> 
> 标签：coding-style, pycharm

我不能确定，但​​似乎我无意中重置了某些设置（或者 PyCharm 的更新中有一个错误功能），但似乎当前版本似乎以一种不受欢迎的方式换成了长行：

例如，考虑一下：

```
this.trainwreck.is.too.long.to.fit.on.a.single.line.foo.bar.do_something\
    (snakes, 
     planes,
     samuel,
     jackson) 
```

这只是，好吧，几乎是脑死亡，因为两者

```
this.trainwreck.is.too.long.to.fit.on.a.single.line.foo.bar.do_something(
    snakes, planes, samuel, jackson) 
```

和

```
this.trainwreck.is.too.long.to.fit.on.a.single.line.foo.bar.do_something(
    snakes,
    planes,
    samuel,
    jackson) 
```

会更有意义。是否有解决此问题的设置，因为我很确定在运行版本 2.5.1 时这没有被破坏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:05:36.357

看起来像一个错误，[已在 YouTrack 报告](http://youtrack.jetbrains.com/issue/PY-7230)，请加注星标/投票以接收有关进度的通知。

# codeigniter - 将此代码放在 codeigniter 中的哪个位置

> ID：12000387
> 
> 赞同：0
> 
> 时间：2012-08-17T05:45:27.503
> 
> 标签：codeigniter

我将以下代码放在 public 下的每个控制器中`function index()`。到目前为止，我有 3 个控制器，它会增加，直到我的网站完成。我需要所有页面（即视图）中的以下代码。

```
$type = $this->input->post('type');
$checkin = $this->input->post('sd');
$checkout = $this->input->post('ed'); 
```

我的问题是我在哪里可以将上面的代码放在一个位置，这样它就可以在所有页面（即视图）上使用，并且避免将它放在每个控制器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:01:01.197

您可以创建自己的控制器（例如 MY_cotroller）扩展 CI_controller，将共享代码放在那里，然后您的三个控制器应该扩展 MY_controller。然后，您可以在需要它的任何地方调用它（如果您在任何地方都需要它，甚至可以将它放入构造函数）。

这是我承诺的示例（假设您有默认的 codeigniter 设置）

在*核心*文件夹中创建名为 MY_Controller.php的文件

```
class MY_Controller extends CI_Controller{

   protected $type;
   protected $checkin;
   protected $checkout;

   protected $bar;

     public function __construct()
    {
        parent::__construct();
        $this->i_am_called_all_the_time();
    }

    private function i_am_called_all_the_time() {
       $this->type = $this->input->post('type');
       $this->checkin = $this->input->post('sd');
       $this->checkout = $this->input->post('ed');
    }

    protected function only_for_some_controllers() {
       $this->bar = $this->input->post('bar');
    }

    protected function i_am_shared_function_between_controllers() {
       echo "Dont worry, be happy!";
    }
} 
```

然后在控制器文件夹中创建您的控制器

```
class HelloWorld extends MY_Controller {

    public function __construct() {
       parent::__construct();
    }

    public function testMyStuff() {
       // you can access parent's stuff (but only the one that was set), for example:
       echo $this->type;

       //echo $this->bar; // this will be empty, because we didn't set $this->bar
    }

    public function testSharedFunction() {
       echo "some complex stuff";
       $this->i_am_shared_function_between_controllers();
       echo "some complex stuff";
    }
} 
```

然后例如，另一个控制器：

```
class HappyGuy extends MY_Controller {

    public function __construct() {
       parent::__construct();
       $this->only_for_some_controllers(); // reads bar for every action
    }

    public function testMyStuff() {
       // you can access parent's stuff here, for example:
       echo $this->checkin;
       echo $this->checkout;

       echo $this->bar; // bar is also available here
    }

    public function anotherComplexFunction() {
       echo "what is bar ?".$this->bar; // and here
       echo "also shared stuff works here";
       $this->i_am_shared_function_between_controllers();
    }
} 
```

这些只是例子，当然你不会回显这样的东西，而是将它传递给视图等，但我希望它足以说明。也许有人有更好的设计，但这是我用过几次的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:21:10.047

例如，如果您有一个主视图文件，并且每个页面都需要该代码，那么我建议您放入主视图文件（view/index.php）

我认为，通过@KadekM 的回答，您应该每次在每个控制器中调用一个函数，因为您很难过，您希望在每个控制器的每个函数中都使用此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:29:44.970

id 建议，将其添加到库中，然后自动加载库，以便您网站上的每个页面都可以访问相同的页面。

用于自动加载参考：[codeigniter中的自动加载](http://codeigniter.com/user_guide/general/autoloader.html)

# javascript - jQuery删除除粗体之外的所有内容

> ID：12000389
> 
> 赞同：5
> 
> 时间：2012-08-17T05:45:32.247
> 
> 标签：javascript, jquery, html, selector, jsoup

我有这样的html：

```
<div id="divTestArea1">
    <b>Bold text</b>
    <i>Italic text</i>
    <div id="divTestArea2">
            <b>Bold text 2</b>
            <i>Italic text 2</i>
            <div>
                    <b>Bold text 3</b>
            </div>
    </div> 
```

我想删除所有非粗体的元素。我试过这段代码：

```
$('*:not(b)').remove(); 
```

和其他几个变体，但它们要么出错要么删除所有内容。顺便说一句，jquery 选择器和 jsoup 选择器 100% 兼容吗？我也想在 jsoup 中使用这个答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:56:29.473

您当前的代码删除了文档`<body>`以及`<div>`包含`<b>`标签的所有 s。如果您只想保存粗体文本，那么 Shih-En Chou 的解决方案效果很好。如果你想保存标签所在的`<div>`结构，`<b>`你可以这样做：

```
$("body *:not(div, b)")​​​​.remove();​ 
```

[**演示**](http://jsfiddle.net/Snowsickle/UfUPp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T05:51:52.150

我的解决方案：

我克隆`<b>` 并将其保存到内存中。-> 全部删除 ->`<b>`插入`<body>`

这是我的代码：http: [//jsfiddle.net/sechou/43ENq/](http://jsfiddle.net/sechou/43ENq/)

```
$(function(){
   var tmpB = $("b").clone();
   $('body').remove();
   $("body").append(tmpB);
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T06:05:14.660

将所有元素按`#divTestArea2`原样移入 a`div`并将被删除到`#divTestArea1`，然后过滤掉任何不是 a 的元素`<b>`并将其删除：

```
$("#divTestArea1").append($("*", "#divTestArea2")).find('*').filter(function() {
    return this.tagName !== 'B';
}).remove(); 
```

[**小提琴**](http://jsfiddle.net/ZmXDr/)

以上保持`#divTestArea1`元素完整，删除除*元素*之外的所有`<b>`内容，例如：

```
$('body')​.append($('b'))​.find('*')​.not('b')​.remove();​ 
```

[**小提琴**](http://jsfiddle.net/ZmXDr/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T06:13:25.567

我更喜欢[`.detach()`](http://api.jquery.com/detach/).

```
var $body = $("body");
var $b = $("b", $body).detach();
$(":not(b)", $body).remove();​​​​​​​​​​​
$body.append($b); 
```

这样您就不需要移动或克隆任何东西来克服删除包装`<b/>`元素的对象的问题。

[（演示）](http://jsfiddle.net/BJK2x/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T06:07:11.917

试试这个：

```
// Find all the <b> tags and unwrap them so they all become siblings and finally 
// remove non <b> siblings
$('body').find('b').unwrap().siblings('*:not(b)').remove(); 
```

演示：http: [//jsfiddle.net/3f2Hu/](http://jsfiddle.net/3f2Hu/)

# sql-server - 如何使用 TSQL 将序列号列排列成范围为 1000 或更少的组？

> ID：12000393
> 
> 赞同：0
> 
> 时间：2012-08-17T05:45:40.960
> 
> 标签：sql-server, tsql

我如何编写一个 SQL 语句来排列一列序列号，以便它们分组，范围为 1000 或更少（基于它们的序列号）？这些数字当前未排序，但最终会像下面的示例一样。第一个示例组中只有两个数字（相差 31）。第三个数字与第二个数字相差 6443，将其放在单独的分组中 (>1000)。接下来的 4 个数字根据 ...4015 到 ...4865 的范围（差异为 850）进行分组。

我仍然是 TSQL < 6 个月的菜鸟。我什至不知道从哪里开始。

```
serial_num
----------  
33XG547909  
33XG547940  

33XG554383  

33XG564015 
33XG564282 
33XG564289  
33XG564308  
33XG564314  
33XG564353  
33XG564865  

33XG569023       

34LT242788  
34LT242812 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:58:44.973

好的，如果我理解正确，您可以尝试类似

```
SELECT  SerialNumber,
        FLOOR(RIGHT(SerialNumber,6) / 1000) GroupNumber
FROM    YourTable
ORDER BY 2, 1 
```

结果应该是

```
SerialNumber    GroupNumber
34LT242788      242
34LT242812      242
33XG547909      547
33XG547940      547
33XG554383      554
33XG564015      564
33XG564282      564
33XG564289      564
33XG564308      564
33XG564314      564
33XG564353      564
33XG564865      564
33XG569023      569 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:37:23.870

如果您希望以滑动比例对项目进行分组，其中每个项目都可以与最近的一千个项目进行分组，那么您将遇到很多麻烦，因为会有很多组合。除非您正在查看特定项目并试图找到与该项目最接近的一千个，否则它们可能也不会有帮助。

我认为 Astander 有一个很好的解决方案，但它没有涵盖连续剧的开头部分。看起来您的解决方案很简单：

```
SELECT  SerialNumber,
        LEFT(SerialNumber, LEN(SerialNumber) - 3) GroupNumber
FROM    YourTable
ORDER BY 2, 1 
```

结果是

```
SerialNumber GroupNumber
------------ -----------
33XG547909   33XG547
33XG547940   33XG547
33XG554383   33XG554
33XG564015   33XG564
33XG564282   33XG564
33XG564289   33XG564
33XG564308   33XG564
33XG564314   33XG564
33XG564353   33XG564
33XG564865   33XG564
33XG569023   33XG569
34LT242788   34LT242
34LT242812   34LT242 
```

# php - wamp server 500 内部服务器错误

> ID：12000398
> 
> 赞同：3
> 
> 时间：2012-08-17T05:46:36.330
> 
> 标签：php, apache, wamp, internal-server-error

我有一个在 XAMPP 上运行的网站。

我不知道该网站由其编写的 php 版本和 apache 版本。

我想在 Windows 上移动它，但收到了消息`00-Internal server error occurs`。

我也这样做了（ wamp->apache->apache modules->rewrite-modules ）并重新启动我的 wamp 但什么也没发生。

这是我看到的错误：

> 内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。请通过 admin@localhost 联系服务器管理员，告知他们此错误发生的时间，以及您在此错误之前执行的操作。服务器错误日志中可能提供有关此错误的更多信息。

解决办法是什么！

我会很感激

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T22:34:51.447

您应该激活文件中的重写模块`httpd.conf`。

更改此行：

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

至 ：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-22T16:56:42.883

remove (or move) .htaccess file from your www wamp folder...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-23T07:11:47.080

回复：500 内部服务器错误

检查您是否已加载 apache 重写模块。

转到 wamp_manager -> apache -> 模块并在列表中查找 rewrite_module。

如果它旁边没有 TICK，请单击它。Apache 将被反弹（停止，启动）。再试一次。

如果没有加载所需的模块，重写引擎将无法工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-15T22:01:05.960

使用 deflate 标签调用一些过滤器是很常见的。像这样：

```
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/x-javascript application/javascript image/svg+xml
</IfModule> 
```

如果启用了**Deflate 模块**，但未启用**Filter Module**，您也会收到错误 500。

# iphone - 如何在 iPhone 中将 NSDate 打印为儒略历格式的日期？

> ID：12000399
> 
> 赞同：0
> 
> 时间：2012-08-17T05:46:37.627
> 
> 标签：iphone, ios5, nsdate

我想显示儒略历格式的日期。如何使用 NSLog 做到这一点？我只得到格鲁吉亚日历值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:17:47.823

您可以使用[此公式](http://aa.usno.navy.mil/faq/docs/JD_Formula.php)将公历日期转换为儒略日期。

# perl - 如何在 Perl 中获取文件的最后修改日期？

> ID：12000401
> 
> 赞同：0
> 
> 时间：2012-08-17T05:46:41.610
> 
> 标签：perl, date, ls

如何在[Perl](http://en.wikipedia.org/wiki/Perl)中获取文件的最后修改日期？

我能够获取最后修改的文件，但我需要使用 Perl 从目录中获取相同日期的文件。我有在 Stack Overflow 问题*[How to find/cut for only the filename from an output of ls -lrt in Perl](https://stackoverflow.com/questions/11840171)*中获取最后修改文件的解决方案。

但是如何获取`ls -lrt`最新日期而不是时间的输出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T05:52:51.760

这是[`stat Function`](http://perldoc.perl.org/functions/stat.html)Perl 中的一种情况——从 shell 命令解析输出有点不可移植，效率非常低，而且完全是错误的。

```
my $mtime = (stat $file)[9]; 
```

如果你真的很绝望，你应该使用`split function`，当然：

```
my $mtimeAsString = join "" (split /\s+/, (`ls -lrt $file`)[0], 8)[5,6];
    # using only the first line of input 
```

随意比较可读性……</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T05:52:34.797

如果你用`ls -lrt`Perl 来获取文件的最后修改日期......你做错了。

正确的解决方案是使用[`stat`](http://perldoc.perl.org/functions/stat.html)函数或[`File::Stat`](http://perldoc.perl.org/File/stat.html)包装它的模块。两者都会为您提供文件上的一堆数据，包括所有三个 utime。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T10:36:03.657

`stat`是传统的。要么使用标准内置

```
my $mtime = (stat $filename)[9]; 
```

或者使用[`File::stat`](http://metacpan.org/module/File%3a%3astat)提供更难忘访问的便利包装器

```
use File::stat;

my $mtime = stat($filename)->mtime; 
```

# amazon-web-services - 如何管理 AWS 云搜索版本 ID？

> ID：12000404
> 
> 赞同：4
> 
> 时间：2012-08-17T05:47:06.727
> 
> 标签：amazon-web-services, cloud, amazon

我正在编写一个库来帮助每个使用亚马逊云搜索的人。

使用云搜索更新文档时，您需要指定文档的 ID（当然）和要升级到的文档版本。

**如果指定的版本号小于当前版本，则不附加更新。**

那么如何确保每次更新时都更新我的记录？

Ruby 项目[aws_cloud_search](https://github.com/aaronbrethorst/aws_cloud_search/blob/master/lib/aws_cloud_search/document.rb)使用时间戳来保持版本号始终更高，但是：

*   由于 AWS 云搜索的最大版本号为 4294967295。所以它在 2106 年 2 月 7 日之后将不再起作用
*   如果您在同一秒内运行两次更新，则最后一次更新（更重要的更新）将被忽略

任何想法 ？

马丁马加基安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T17:28:43.147

除了时间戳方法（这似乎是每个人（包括文档）的标准答案）之外，我发现唯一可行的方法是跟踪其他地方的版本号，并在发生更改时增加它。

当然，这种方法只有在您试图在云搜索文档中表示的对象可以从其他可能具有某种原子性的地方访问时才有效。

# c# - UI 有时会挂起（Windows 窗体 C#）

> ID：12000408
> 
> 赞同：0
> 
> 时间：2012-08-17T05:47:20.153
> 
> 标签：c#, .net, windows, winforms

我创建了一个 winforms 多线程应用程序。一旦主线程启动，就会在另一个新生成的后台线程上创建一个启动屏幕表单。

```
Code: 
static SplashForm sf = new SplashForm ();
 main()
{
...
    Thread t = new Thread(new ThreadStart(runSplash));
    t.IsBackground = true;
    t.start();
Application.Run(new MainForm());
...
}

void runSplash()
{
Application.Run(sf);
} 
```

稍后在主线程上创建一个 MainForm，在 mainform 的加载事件处理程序中关闭启动表单。

有时 UI 挂起。

即它不响应键盘或鼠标操作。但是主线程和其他线程正在优雅地运行。

> 使用 spy++ 得到以下日志消息

```
<00001> 000103A6 S WM_WINDOWPOSCHANGING lpwp:003DF0DC
<00002> 000103A6 R WM_WINDOWPOSCHANGING
<00003> 000103A6 S WM_NCPAINT hrgn:00000001
<00004> 000103A6 S WM_GETTEXT cchTextMax:510 lpszText:003DDBAC
<00005> 000103A6 R WM_GETTEXT cchCopied:37 lpszText:003DDBAC ("I")
<00006> 000103A6 R WM_NCPAINT
<00007> 000103A6 S WM_ERASEBKGND hdc:D5010AC2
<00008> 000103A6 R WM_ERASEBKGND fErased:True
<00009> 000103A6 S WM_WINDOWPOSCHANGED lpwp:003DF0DC
<00010> 000103A6 R WM_WINDOWPOSCHANGED
<00011> 000103A6 S WM_ACTIVATEAPP fActive:True dwThreadID:000008A8
<00012> 000103A6 R WM_ACTIVATEAPP
<00013> 000103A6 S WM_NCACTIVATE fActive:True
<00014> 000103A6 R WM_NCACTIVATE
<00015> 000103A6 S WM_ACTIVATE fActive:WA_ACTIVE fMinimized:False hwndPrevious:(null)
<00016> 000103A6 R WM_ACTIVATE
<00017> 000103A6 S WM_IME_SETCONTEXT fSet:1 (LONG)iShow:C000000F
<00018> 000103A6 S WM_IME_NOTIFY dwCommand:00000002 dwData:00000000
<00019> 000103A6 R WM_IME_NOTIFY
<00020> 000103A6 R WM_IME_SETCONTEXT
<00021> 000103A6 S WM_SETFOCUS hwndLoseFocus:(null)
<00022> 000103A6 R WM_SETFOCUS
<00023> 000103A6 P WM_PAINT hdc:00000000
<00024> 000103A6 S WM_SETCURSOR hwnd:000103A6 nHittest:FFFE wMouseMsg:WM_MOUSEMOVE
<00025> 000103A6 R WM_SETCURSOR fHaltProcessing:False
<00026> 000103A6 S WM_SETCURSOR hwnd:000103A6 nHittest:FFFE wMouseMsg:WM_MOUSEMOVE
<00027> 000103A6 R WM_SETCURSOR fHaltProcessing:False
<00028> 000103A6 S WM_NCACTIVATE fActive:False
<00029> 000103A6 S WM_GETTEXT cchTextMax:510 lpszText:003DDBAC
<00030> 000103A6 R WM_GETTEXT cchCopied:37 lpszText:003DDBAC ("I")
<00031> 000103A6 R WM_NCACTIVATE fDeactivateOK:True
<00032> 000103A6 S WM_ACTIVATE fActive:WA_INACTIVE fMinimized:False hwndPrevious:(null)
<00033> 000103A6 R WM_ACTIVATE
<00034> 000103A6 S WM_ACTIVATEAPP fActive:False dwThreadID:00000BB0
<00035> 000103A6 R WM_ACTIVATEAPP
<00036> 000103A6 S WM_KILLFOCUS hwndGetFocus:(null)
<00037> 000103A6 R WM_KILLFOCUS
<00038> 000103A6 S WM_IME_SETCONTEXT fSet:0 (LONG)iShow:C000000F
<00039> 000103A6 S WM_IME_NOTIFY dwCommand:00000001 dwData:00000000
<00040> 000103A6 R WM_IME_NOTIFY
<00041> 000103A6 R WM_IME_SETCONTEXT
<00042> 000103A6 P message:0xC185 [Registered:"WindowsForms12_ThreadCallbackMessage"] wParam:00000000 lParam:00000000
<00043> 000103A6 P message:0xC185 [Registered:"WindowsForms12_ThreadCallbackMessage"] wParam:00000000 lParam:00000000
<00044> 000103A6 P message:0xC185 [Registered:"WindowsForms12_ThreadCallbackMessage"] wParam:00000000 lParam:00000000
<00045> 000103A6 P message:0xC185 [Registered:"WindowsForms12_ThreadCallbackMessage"] wParam:00000000 lParam:00000000
<00046> 000103A6 P message:0xC185 [Registered:"WindowsForms12_ThreadCallbackMessage"] wParam:00000000 lParam:00000000
<00047> 000103A6 P message:0xC185 [Registered:"WindowsForms12_ThreadCallbackMessage"] wParam:00000000 lParam:00000000 
```

是什么导致了这个问题以及如何摆脱这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:55:26.047

为什么是间谍++？您需要创建一个内存转储（使用 winDBG 等）并对其进行分析。

> 有时 UI 挂起，即它不响应键盘或鼠标操作。但是主线程和其他线程正在优雅地运行。

GUI 需要在主线程上。此代码显示您在另一个线程中有启动画面：

```
Thread t = new Thread(new ThreadStart(runSplash)); 
t.IsBackground = true; 
t.start(); 
```

Windows 窗体控件本质上不是线程安全的，您可以到处阅读有关此内容的信息，例如：
[在 WinForms 中，为什么不能从其他线程更新 UI 控件？](https://stackoverflow.com/questions/10349/in-winforms-why-cant-you-update-ui-controls-from-other-threads)

将所有 UI 内容放回主线程，如果问题仍然存在，请告诉我们。

# magento - 覆盖 adminhtml sales_order_create 模型

> ID：12000409
> 
> 赞同：2
> 
> 时间：2012-08-17T05:47:25.457
> 
> 标签：magento, overwrite, adminhtml

我无法覆盖 adminhtml 模型，谁能帮我找出我做错的地方...

模块 XML

```
<?xml version="1.0"?> 
   <config> 
      <modules> 
        <Cc_Adminhtml> 
            <active>true</active> 
            <codePool>local</codePool> 
        </Cc_Adminhtml> 
      </modules> 
   </config> 
```

配置 XML

```
<?xml version="1.0"?>
<config>
    <modules>
        <Cc_Adminhtml>
            <version>0.1.0</version>
        </Cc_Adminhtml>
    </modules>
    <global>
        <models>            
            <adminhtml>
                    <rewrite>
                        <sales_order_create>Cc_Adminhtml_Model_Create</sales_order_create>
                    </rewrite>
            </adminhtml>
        </models>
    </global>
</config> 
```

PHP 文件：

```
类 Cc_Adminhtml_Model_Create 扩展了 Mage_Adminhtml_Model_Sales_Order_Create
{
    /**
     * 创建新订单
     *
     * @return Mage_Sales_Model_Order
     */
    公共函数 createOrder()
    {
       // 想要覆盖这个方法/函数
    }
}
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:14:48.100

如果您的文件命名中没有拼写错误并且不是缓存问题，您需要检查您是否有覆盖相同模型的扩展名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:18:02.850

我用 1.7 ce 版本检查了你的代码。并且它按预期工作。只需确保您具有以下文件夹结构。

```
-app/code/local/Cc/Adminhtml/etc/config.xml
-app/code/local/Cc/Adminhtml/Model/Create.php
-app/etc/modules/Cc_Adminhtml.xml 
```

我试图在 createOrder() 方法中退出并打印一些消息，当我尝试单击提交订单按钮时​​，它在从管理面板创建新订单时显示消息。

我可以确认上面的代码工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T16:47:14.770

你的代码太棒了。您的重写步骤没有**任何问题**。

如果您在 PHP 文件中显示所有文件内容，请不要忘记添加

```
<?php 
```

在最开始的 PHP 文件上。

如果已添加，请尝试刷新所有**Magento Cache**。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-08-15T02:54:12.160

重写标记应如下：Cc_Adminhtml_Model_Sales_Order_Create

# actionscript-3 - 使用 AS3 在 MovieClip 中播放随机帧

> ID：12000410
> 
> 赞同：0
> 
> 时间：2012-08-17T05:47:30.700
> 
> 标签：actionscript-3, random, frame, movieclip

我有一个在不同帧（内部）中有不同位置的电影剪辑（守门员），我想在执行一个函数后播放一个随机帧以使守门员移动到一个确定的位置，有 6 个帧有 6 个不同的位置所以我需要随机打1个位置，这是踢球后应该去随机数的代码：

```
 function moveBall()
  { 
var targetX:Number = mouseX;
var targetY:Number = mouseY;
var angle = Math.atan2(targetY,targetX);
ball.x =  mouseX + Math.cos(angle);
ball.y =  mouseY + Math.sin(angle) ;
ballRotation = true;

if (ballRotation==true)
{

    goalkeeper_mc.gotoAndStop( Random Frame);//Here is when I need to go and play the random frame everytime function is executed

} 
```

非常感谢你们的帮助，很抱歉再次打扰，我在网上搜索了一些例子，但我发现其中很多对于像我这样的新手来说真的很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:55:10.710

参考以下代码。

您必须从 1 帧到最后一帧随机化。

`Math.random ()`范围大于 0 且小于 1（浮点值）。通过使用它实现可用。

* * *

```
function moveBall()
{ 
    var targetX:Number = mouseX;
    var targetY:Number = mouseY;
    var angle = Math.atan2(targetY,targetX);
    ball.x =  mouseX + Math.cos(angle);
    ball.y =  mouseY + Math.sin(angle) ;
    ballRotation = true;

    if (ballRotation==true)
    {
        goalkeeper_mc.gotoAndStop(int(Math.random * (goalkeeper_mc.totalFrames)+1));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:14:00.267

```
goalkeeper_mc.gotoAndStop(1 + Math.floor(Math.random() * goalkeeper_mc.totalFrames)); 
```

# android - 由于致命异常，应用程序无法运行

> ID：12000413
> 
> 赞同：0
> 
> 时间：2012-08-17T05:48:22.030
> 
> 标签：android, dropbox

我正在使用 Froyo 版本来运行应用程序。运行项目时出现**致命异常**，应用程序也意外关闭。我在 activity_main.xml 文件中有 3 个按钮。

**主要活动代码**

```
 public class Main extends Activity {
private DropboxAPI<AndroidAuthSession> mDBApi;
final static String APP_KEY = "707tr8wwfpqrl7z";
final static String APP_SECRET = "mhyp3cxb8eeiyb6";
final static AccessType ACCESS_TYPE = AccessType.APP_FOLDER;

SharedPreferences prefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    prefs = PreferenceManager.getDefaultSharedPreferences(this);

    String dropbox_key = prefs.getString("dropbox_key", "");
    String dropbox_secret = prefs.getString("dropbox_secret", "");

    if (dropbox_key.length() > 0 && dropbox_secret.length() > 0) {
        AccessTokenPair access = new AccessTokenPair(dropbox_key, dropbox_secret);
        AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
        AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
        session.setAccessTokenPair(access);
        mDBApi = new DropboxAPI<AndroidAuthSession>(session);
    }

    Button link = (Button) findViewById(R.id.button1);
    Button upload = (Button) findViewById(R.id.button2);
    Button download = (Button) findViewById(R.id.button3);

    link.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
            AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
            if (mDBApi == null) {
                mDBApi = new DropboxAPI<AndroidAuthSession>(session);
            }
            mDBApi.getSession().startAuthentication(Main.this);
        }
    });

    upload.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            File dir = new File(getFilesDir().getAbsolutePath());
            try {
                PrintWriter out = new PrintWriter(new FileWriter(dir + "/test.txt"));
                for (int i = 0; i < 20; i++) {
                    out.println("omg");
                }
                out.close();
                File file = new File(getFilesDir().getAbsolutePath(), "/test.txt");
                FileInputStream in = new FileInputStream(file);
                mDBApi.putFileOverwrite("/test.txt", in, file.length(), null);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (DropboxException e) {
                e.printStackTrace();
            }
        }
    });

    download.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                File output = new File("/mnt/sdcard/test.txt");
                OutputStream out = new FileOutputStream(output);
                mDBApi.getFile("/test.txt", null, out, null);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (DropboxException e) {
                e.printStackTrace();
            }
        }
    });
}

@Override
protected void onResume() {
    super.onResume();
    if (mDBApi != null && mDBApi.getSession().authenticationSuccessful()) {
        try {
            mDBApi.getSession().finishAuthentication();
            AccessTokenPair tokens = mDBApi.getSession().getAccessTokenPair();
            Editor editor = prefs.edit();
            editor.putString("dropbox_key", tokens.key);
            editor.putString("dropbox_secret", tokens.secret);
            editor.commit();
        } catch (IllegalStateException e) {
            Log.i("DbAuthLog", "Error authenticating", e);
        }
    }
  }
} 
```

**清单代码**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.dropboxdemo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application 
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity 
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
            <data android:scheme="db-707tr8wwfpqrl7z" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.dropbox.client2.android.AuthActivity"
        android:configChanges="orientation|keyboard"
        android:launchMode="singleTask" >
        <intent-filter>
            <data android:scheme="db-707tr8wwfpqrl7z" />
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

**LogCat 错误**

```
 08-17 10:47:43.935: E/AndroidRuntime(346): FATAL EXCEPTION: main
 08-17 10:47:43.935: E/AndroidRuntime(346): java.lang.ExceptionInInitializerError
 08-17 10:47:43.935: E/AndroidRuntime(346): atjava.lang.Class.newInstanceImpl(Native Method)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at java.lang.Class.newInstance(Class.java:1409)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 10:47:43.935: E/AndroidRuntime(346):  at android.os.Looper.loop(Looper.java:123)
 08-17 10:47:43.935: E/AndroidRuntime(346):     at android.app.ActivityThread.main(ActivityThread.java:3683) 
```

有什么办法可以清除这个**错误** ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:51:57.640

Minsdk 版本是 10，即，gingerbread。

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" /> 
```

您需要为 Froyo 将其设置为 8

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:55:22.553

将 minSdkVersion 更改为 8 而不是 10。

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

# php - 使用php在mysql db中插入一条记录

> ID：12000420
> 
> 赞同：0
> 
> 时间：2012-08-17T05:48:55.233
> 
> 标签：php, android, mysql, database, logcat

我正在做一个关于 android 的调查项目，它是关于登录（这部分工作）和插入数据这部分不起作用是调查问卷，当调查人员登录到应用程序时，有一个调查要做，在这个项目我以 5 个问题作为原型开始，回答是或否，他必须回答问题，并且在单击保存按钮时，必须将它们添加到 mysql 数据库中。但这不起作用（logcat在下面）这是类问卷调查.java：

```
public class Questionnaire extends Activity implements LocationListener {
// Progress Dialog
    private ProgressDialog pDialog;
//latitude et longitude
    private LocationManager lm;
    Location location;
    double longitude = 0;
    double latitude = 0;
    private double altitude;
    private float accuracy;
    int i;
    JSONParser jsonParser = new JSONParser();
    Button enregistrer;
    EditText zone;
    RadioGroup mRadioGroup1, mRadioGroup2, mRadioGroup3, mRadioGroup4, mRadioGroup5;
    RadioButton b1, b2, b3, b4, b5;
// url to create new product
    private static String url_insertion = "http://10.0.2.2/android/insertion.php";
// JSON Node names
    private static final String TAG_SUCCESS = "success";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questions);
        Bundle params = getIntent().getExtras();
        i = params.getInt("compteur");
        i++;

        // Edit zone text
        EditText zone1 = (EditText) findViewById(R.appreciation.zone);

        // edit latitude longitude
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        // edit radiogroup
        mRadioGroup1 = (RadioGroup) findViewById(R.appreciation.rep1);
        mRadioGroup2 = (RadioGroup) findViewById(R.appreciation.rep2);
        mRadioGroup3 = (RadioGroup) findViewById(R.appreciation.rep3);
        mRadioGroup4 = (RadioGroup) findViewById(R.appreciation.rep4);
        mRadioGroup5 = (RadioGroup) findViewById(R.appreciation.rep5);

        //edit radio button
        b1 = (RadioButton) findViewById(mRadioGroup1.getCheckedRadioButtonId());
        b2 = (RadioButton) findViewById(mRadioGroup2.getCheckedRadioButtonId());
        b3 = (RadioButton) findViewById(mRadioGroup3.getCheckedRadioButtonId());
        b4 = (RadioButton) findViewById(mRadioGroup4.getCheckedRadioButtonId());
        b5 = (RadioButton) findViewById(mRadioGroup5.getCheckedRadioButtonId());

        // Create button
        Button enregistrer = (Button) findViewById(R.appreciation.enregistrer);

        // button click event
        enregistrer.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {
                new InsertAppreciation().execute();
            }
        });
    }

    class InsertAppreciation extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Questionnaire.this);
            pDialog.setMessage("Creating Product..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating appreciation
         * */
        protected String doInBackground(String... args) {
            String zone1 = zone.getText().toString();
            //  String latitude = String.valueOf(latitude).toString();
            //  String longitude = String.valueOf(longitude).toString();
            String rep1 = b1.getText().toString();
            String rep2 = b2.getText().toString();
            String rep3 = b3.getText().toString();
            String rep4 = b4.getText().toString();
            String rep5 = b5.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("zone", zone1));
            //  params.add(new BasicNameValuePair("latitude", latitude));
            //   params.add(new BasicNameValuePair("longitude", longitude));
            params.add(new BasicNameValuePair("rep1", rep1));
            params.add(new BasicNameValuePair("rep2", rep2));
            params.add(new BasicNameValuePair("rep3", rep3));
            params.add(new BasicNameValuePair("rep4", rep4));
            params.add(new BasicNameValuePair("rep5", rep5));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_insertion,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created appreciation
                    Toast.makeText(getBaseContext(), "Successful insertion", Toast.LENGTH_SHORT).show();
                    if (i < 5) {
                        Intent intent1 = new Intent(Questionnaire.this, Questionnaire.class);
                        intent1.putExtra("compteur", i);
                        startActivity(intent1);
                    } else {
                        Intent intent2 = new Intent(Questionnaire.this, Endsurvey.class);
                        startActivity(intent2);
                    }

                } else {
                    // failed to create appreciation
                    Toast.makeText(getBaseContext(), "failed insertion", Toast.LENGTH_SHORT).show();
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();

        }
    }
} 
```

抱歉，我知道它太长了，但我别无选择。这是日志猫：

```
08-15 22:15:31.620: D/AndroidRuntime(241): Shutting down VM
08-15 22:15:31.630: W/dalvikvm(241): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-15 22:15:31.640: E/AndroidRuntime(241): Uncaught handler: thread main exiting due to uncaught exception
08-15 22:15:31.671: E/AndroidRuntime(241): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.stage.sondage/com.stage.sondage.Questionnaire}: java.lang.NullPointerException
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.os.Looper.loop(Looper.java:123)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-15 22:15:31.671: E/AndroidRuntime(241):  at java.lang.reflect.Method.invokeNative(Native Method)
08-15 22:15:31.671: E/AndroidRuntime(241):  at java.lang.reflect.Method.invoke(Method.java:521)
08-15 22:15:31.671: E/AndroidRuntime(241):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-15 22:15:31.671: E/AndroidRuntime(241):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-15 22:15:31.671: E/AndroidRuntime(241):  at dalvik.system.NativeStart.main(Native Method)
08-15 22:15:31.671: E/AndroidRuntime(241): Caused by: java.lang.NullPointerException
08-15 22:15:31.671: E/AndroidRuntime(241):  at com.stage.sondage.Questionnaire.onCreate(Questionnaire.java:73)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-15 22:15:31.671: E/AndroidRuntime(241):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
08-15 22:15:31.671: E/AndroidRuntime(241):  ... 11 more
08-15 22:15:31.730: I/dalvikvm(241): threadid=7: reacting to signal 3
08-15 22:15:31.730: E/dalvikvm(241): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
08-15 22:15:35.341: I/Process(241): Sending signal. PID: 241 SIG: 9
08-15 22:15:36.380: E/ActivityThread(282): Failed to find provider info for com.google.settings
08-15 22:15:36.390: E/ActivityThread(282): Failed to find provider info for com.google.settings
08-15 22:15:36.430: E/ActivityThread(282): Failed to find provider info for com.google.settings
08-15 22:15:36.982: D/dalvikvm(282): GC freed 1983 objects / 133688 bytes in 137ms
08-15 22:15:37.110: D/LocationManager(282): Constructor: service = android.location.ILocationManager$Stub$Proxy@44ea4f80
08-15 22:15:37.212: D/LocationManager(282): removeUpdates: listener = com.google.android.maps.MyLocationOverlay@44e9db00
08-15 22:15:37.222: I/Maps.MyLocationOverlay(282): Request updates from gps
08-15 22:15:37.360: D/SensorManager(282): found sensor: Goldfish 3-axis Accelerometer, handle=0
08-15 22:15:37.520: D/SensorManager(282): found sensor: Goldfish 3-axis Magnetic field sensor, handle=1
08-15 22:15:37.672: D/SensorManager(282): found sensor: Goldfish Orientation sensor, handle=2
08-15 22:15:37.830: D/SensorManager(282): found sensor: Goldfish Temperature sensor, handle=3
08-15 22:15:37.970: I/MapActivity(282): Handling network change notification:CONNECTED
08-15 22:15:37.980: E/MapActivity(282): Couldn't get connection factory client
08-15 22:15:38.460: D/dalvikvm(282): GC freed 5048 objects / 299360 bytes in 90ms
08-15 22:16:00.971: D/dalvikvm(282): GC freed 13338 objects / 892160 bytes in 200ms 
```

这是php文件：

```
 <?php
    //turn off error reporting
     error_reporting(E_ALL ^ E_NOTICE ^ E_WARNING);

    //Create fields for the database
    //server, username, password, database

    $dbhost = "localhost";
    $dbuser = "root";
    $dbpass = "";
    $dbdb = "survey";

    //connect to mySQL
    $connect = mysql_connect($dbhost, $dbuser, $dbpass) or die("connection error");

    //Select the database
    mysql_select_db($dbdb)or die("database selection error");

    //Retrieve the login details via POST
    $zone = $_POST['zone'];
    $latitude = $_POST['latitude'];
    $longitude = $_POST['longitude'];
    $rep1 = $_POST['rep1'];
    $rep2 = $_POST['rep2'];
    $rep3 = $_POST['rep3'];
    $rep4 = $_POST['rep4'];
    $rep5 = $_POST['rep5'];

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO appreciation(id, zone, latitude, longitude,                    rep1, rep2, rep3, rep4, rep5) VALUES('', '$zone1', '', '', '$rep1', '$rep2', '$rep3',  '$rep4', '$rep5' )");

    // check if row inserted or not
    if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Product successfully created.";

    // echoing JSON response
    echo json_encode($response);
    } else {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Oops! An error occurred.";

    // echoing JSON response
    echo json_encode($response);
     }
    } else {
     // required field is missing
      $response["success"] = 0;
      $response["message"] = "Required field(s) is missing";

        // echoing JSON response
        echo json_encode($response);
    //close the connection
    mysql_close();

         }

          ?> 
```

请帮助它真的很紧急。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:10:00.333

首先，正如其他人在评论中所说，请查看 PDO，因为您的数据库交互非常不安全。

您提供的异常跟踪表明活动的方法中发生了未捕获的（开始使用[try/catch](http://www.google.co.uk/search?sourceid=chrome&ie=UTF-8&q=java%20try%20catch)）异常。我希望（请通过调试检查）当您第二次查看意图包时会引发错误（您正在从活动开始）。`onCreate``Questionnaire``compteur``Questionnaire``Questionnaire`

我可以看到您在触发意图时正在将一个对象放入包中，但是在处理它之前您没有检查它是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:32:15.387

```
Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

您是否在清单 xml 文件中添加了从您的 sd 卡读取的权限？

```
<uses-permission  android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# visual-c++ - ADODB OutOFMemory 错误

> ID：12000421
> 
> 赞同：0
> 
> 时间：2012-08-17T05:49:05.067
> 
> 标签：visual-c++

在 C++ 应用程序`E_OUTOFMEMORY`中，在 windows 2012 服务器的以下行中出现错误。

下面的代码

```
STDMETHODIMP 
CADORequest::GetServerDescription(
    wchar_t wcProvider[],
    size_t dwProvider,
    CServer& ServerData
                            )
{
    HRESULT hrSQL = E_FAIL;   

    ::CoInitialize(0);

    IADORecordBinding *picRs = NULL;
      _RecordsetPtr pRs("ADODB.Recordset");
      _CommandPtr pCmd("ADODB.Command"); 
```

并进入下一行

```
_RecordsetPtr pRs("ADODB.Recordset"); 
```

相同的应用程序在 2003 Server 中运行。但是当我迁移到 2012 年的服务器时，我得到了这台服务器。

当我分析 2003 服务器具有 adodb 2.8 和 2012 服务器具有 Adodb 6.0

有关如何解决此问题的任何想法都会有所帮助。谢谢

# jquery - $.post('@Url.Action( 在 IIS 上部署时不适用于 Safari 浏览器

> ID：12000424
> 
> 赞同：1
> 
> 时间：2012-08-17T05:49:27.690
> 
> 标签：jquery, asp.net-mvc-3

您好我在 MVC 3 应用程序中工作。我在 Ready 中的一个 Jquery 代码是

```
var Isprod = false;
$.post('@Url.Action("TabIndex", "Primary")', {
                value: Isprod
            }, function (data) {
                $("div#divonecomm").html(data);
            }); 
```

Primary 是控制器，TabIndex 是动作值是在 TabIndex 方法中声明的 bool 变量。

此代码在本地运行 IE、FireFox、Crome 和 Safari 时运行良好。当部署在 IIS 代码上时，除了 Safari 浏览器之外，IE、FireFox、Crome 运行良好。

我不知道是什么问题？

请建议我到底缺少什么。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:54:30.003

查看呈现的 html 中的 @Url.Action。它可能已添加 & 以链接并删除它

编辑：

尝试这个：

```
$.post('@Url.Action("TabIndex", "Primary")', {
            value: "False"
        }, function (data) {
            $("div#divonecomm").html(data);
        }); 
```

或这个：

```
$.post('@Url.Action("TabIndex", "Primary")', {
            value: "false"
        }, function (data) {
            $("div#divonecomm").html(data);
        }); 
```

# java - Java 序列化效率

> ID：12000426
> 
> 赞同：0
> 
> 时间：2012-08-17T05:49:33.400
> 
> 标签：java, serialization

假设我们有一个启用远程处理的应用程序，它带有服务器和客户端组件，可以在不同的机器上运行。

现在我们有一组文件，其中包含需要通过服务器保存到数据库的数据。我们可以有两种方法：

1）。将数据转换为对象列表，将它们序列化并将它们发送到服务器

2）。序列化文件并将它们发送到服务器

这两种方法有区别吗？我该如何测试它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:46:02.197

按原样发送文件总是比在两端将它们转换为不同的格式更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:54:38.403

您可能应该为服务器定义一个小 API（它期望的文件格式，例如带有某种模式的 CSV 或 JSON），并将该格式的文件发送给它。如果您只需要与一个客户端交互，那么格式也可能是文件已经存在的任何格式。否则，使其更通用，客户端必须将文件转换为该格式。我不会使用 Java 序列化，因为它非常脆弱 - 通常客户端和服务器必须具有相同版本的所涉及的类（您可以使用 readObject 和 writeObject 以及版本号来解决这个问题，但它不值得麻烦） .

# objective-c - 我想在单击按钮时设置 CATextLayer 的文本。如何实现？

> ID：12000428
> 
> 赞同：0
> 
> 时间：2012-08-17T05:49:40.340
> 
> 标签：objective-c, ios, calayer, catextlayer

我做了一个`CALayer *sublayer`over 主视图，然后我添加`CATextLayer`了 over `sublayer`。

现在我想`CATextLayer`通过单击主视图上的按钮来显示文本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:11:52.153

使用 设置按钮操作`-[UIButton addTarget:selector:forControlEvents:]:`，然后在该函数中将`CATextLayer`s 字符串属性设置为 an`NSString`或 an `NSAttributedString`。

我提醒你，`CATextLayer`不尊重属性字符串上的段落设置，所以行高有点偏离，看起来不太好。

# javascript - 如何在 kineticjs 中移动图像

> ID：12000430
> 
> 赞同：0
> 
> 时间：2012-08-17T05:49:52.743
> 
> 标签：javascript, image, move, kineticjs

如何在 KineticJS 中反复从左到右移动图像？

另外，如何更改动画循环的速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:38:01.467

如果您使用的是 Kinetic.Image，则可以使用 yourImage.move(yourNewXCoordinate, yourNewYCoordinate)。为了速度，我建议您使用 greensock 的 TweenMax。这是链接[http://www.greensock.com/gsap-js/](http://www.greensock.com/gsap-js/)

# python - 从 os.system 调用的脚本调用 pdb.set_trace

> ID：12000436
> 
> 赞同：0
> 
> 时间：2012-08-17T05:50:34.630
> 
> 标签：python, pdb

我想调试一个`os.system()`从另一个 python 脚本调用的 python 脚本。我尝试`pdb.set_trace`从调用的代码中调用，但它不起作用。我看不到 Python pdb 提示符。

* * *

它是一种自动化框架。我要放置 set_trace 的最终 python 脚本如下所示：

`python script1.py --invokes--> script2.py --invokes--> script3.py (Here, in script3.py my set_trace is )`

我正在使用 python 2.4 在 linux 上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:55:04.387

如果您使用输出重定向，pdb 提示符也将被重定向。

# algorithm - 沿方位角指定的方向遍历矩阵

> ID：12000440
> 
> 赞同：1
> 
> 时间：2012-08-17T05:51:05.863
> 
> 标签：algorithm, matrix, traversal, azimuth

沿方位角指定的方向遍历矩阵。

所以我有一个二维矩阵和一个方位角。我想要做的是在那个方向遍历矩阵。从那个方位角我可以得出一个线方程。

现在我想沿该线的方向遍历矩阵。所以在这种情况下，我想从中读取信息的第一个块是市场，然后是 1，然后是 2，依此类推。（现在矩阵中的值只是代表它们被访问的顺序）

![http://i.stack.imgur.com/DPI9v.png](../Images/a6d6964df430d90133d7c42287ec70a7.png)

假设如果从方位角导出的线如下图所示，那么矩阵应该从左到右遍历。

![http://i.stack.imgur.com/0D63q.png](../Images/1051a1a02e3f8c7fad41687b82f87ac6.png)

如果问题不清楚，请提出任何问题，我会进一步解释。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:15:16.963

通过标记行列中`i`的`j`单元格`i * sin(a) + j * cos(a)`。然后按照这些标签的升序遍历。假设在您的第一个示例中`a`= 45°，而在第二个示例中`a`= 0°。

因此，对于您的第一个示例， sin(a) = cos(a) = sqrt(0.5)。计算出的标签是图中的值乘以 sqrt(2)。

对于第二个示例， sin(a) = 0; cos(a) = 1 并且您得到与图中相同的值。

# javascript - 寺庙运行故障

> ID：12000442
> 
> 赞同：3
> 
> 时间：2012-08-17T05:51:11.527
> 
> 标签：javascript, html, canvas

这个问题是关于了解如何在 HTML 中使用/不使用`canvas`. 我对如何实现等有一个模糊的`swipeLeft`想法`swipeRight` 。但我无法衡量如何开发环境。

我不是在这里寻求代码方面的任何帮助。我只是想听听您对实现环境的意见。它只是一个巨大的精灵吗？如果是这样，用户每次生成时如何在游戏中看到随机环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:36:04.313

它不是一个单一的精灵。假设我们谈论的是同一个 Temple Run，它是一个 3D 游戏，可能使用 OpenGL。雾效果意味着游戏不必渲染远处的物体。如果您想制作类似的游戏，我建议您查看适用于 Android 和/或 iOS 的优秀 3D 游戏平台之一。

您可以在 HTML 中制作 3D 游戏，并且有一些库可以提供帮助，但除非您制作的是网站而不是移动应用程序，否则最好使用本机制作。

# database - postgresql中的指数问题

> ID：12000443
> 
> 赞同：2
> 
> 时间：2012-08-17T05:51:19.577
> 
> 标签：database, postgresql, postgresql-9.1, postgresql-9.0

我在 postgresql 中遇到了指数函数的问题。如果我使用这个 select 语句`select exp(5999)`，我会得到：

```
ERROR: value out of range: overflow 
SQL state: 22003 
```

如果我使用这个 select statement `select exp(5999.1)`，我会得到指数结果。

在其他情况下，如果我使用此语句`select exp(9999.1)`，则会收到以下错误：

```
ERROR: argument for function "exp" too big
SQL state: 22003 
```

请让我知道为什么会发生此问题以及此类问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T05:55:41.680

我认为您的第一个问题是由于输出类型`exp()`与输入类型相同。因为您使用的是整数值，所以它抱怨结果不适合整数。

这可能是浮点类型具有更大范围的原因`exp(5999.1)`，并且可能有效。`exp(5999.0)`

你的第二个错误略有不同，它不是在计算过程中抱怨溢出，而是*输入*参数太大。它可能在某处对输入进行了一些完整性检查。

即使是浮点值最终也会超出范围。e ^(9999)大约是 10 ^(4300)，这是一个相当大的数字，可能远远超出您在数据库应用程序中所期望的范围。

事实上，我会对数据库应用程序中如此大量的用例感兴趣。这听起来更适合像 MPIR 这样的 bignum[包](http://www.mpir.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:48:56.613

如果您传递一个`INTEGER`参数，该`exp()`函数将尝试返回`double precision`值。刚好在值 n=709 之上，它将达到 64 位浮点数的限制（大约 10^308）并且无法计算 e^n。解决方案是使用`NUMERIC`类型传递您的参数：

```
SELECT EXP(710); -- failure!
SELECT EXP(710::NUMERIC); -- OK
SELECT EXP(5999.1::NUMERIC); -- huge but OK 
```

* * *

编辑！

至于**ERROR: argument for function "exp" too big SQL state: 22003**。我试图写一个解决方法。运行这个：

```
SELECT n, POWER(EXP(1::NUMERIC), n) FROM (VALUES(9998), (9999), (10000)) AS foo (n) 
```

它会起作用。但是然后将 9999 更改为 9999.1，您将再次遇到那个愚蠢的错误。这是荒唐的！9999.1*太大*但 10000 很好 :D 看起来 Postgres 不喜欢 的参数中的小数点`POWER()`。抱歉，我无法解决这个问题。

一种解决方案是使用 power 和 write 的算术属性，`POWER(POWER(EXP(1::NUMERIC), n*10), 0.1)`但是对于 Postgres 的 power 实现来说，值组合仍然太大。祝你战斗顺利。

# heroku - 随着 Heroku 最近的协作者权限更改：协作者如何扩展应用程序？

> ID：12000450
> 
> 赞同：1
> 
> 时间：2012-08-17T05:52:03.770
> 
> 标签：heroku

我像往常一样去扩展我的 Heroku rails 应用程序，但是 WHAM！Heroku 更改了我的权限：

```
Scaling worker processes... done, now running 1
!    Scaling an app as a collaborator is not supported; it’ll be removed soon. Please see: http://bit.ly/PWf1tR. 
```

根据[Heroku 的合作者权限页面](https://devcenter.heroku.com/articles/sharing#collaborator-privileges)：

> ## 合作者特权
> 
> 协作者支持所有操作，就像应用程序所有者一样，除了：
> 
> *   缩放测功机
> *   添加或删除付费插件
> *   删除或重命名应用程序
> *   查看发票
> 
> 只有应用所有者支持这些操作。

好的，那现在呢？我团队中的每个人都需要扩展应用程序，我对每个人都共享所有者凭据并不感到兴奋。

有没有办法*——Heroku 功能、第 3 方工具、total hack 等等——*协作者可以在最近的权限更改后扩展 Heroku 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T02:39:12.540

解决了！Heroku 对我的问题的回答：

> 根据您和其他用户的反馈，我们决定避免对协作者语义进行任何更改，直到我们能够提供更强大的替代路径来管理访问控制。弃用通知将很快被删除。

他们非常乐于助人，也为给您带来的不便深表歉意。

# php - 如何使用 PHP PDO 和 MySQL 对数组中的对象进行分组？

> ID：12000456
> 
> 赞同：1
> 
> 时间：2012-08-17T05:52:47.437
> 
> 标签：php, mysql, pdo, logic

我有这个类别表

```
Category
============
id    name    ref_id
1     cat1    0
2     cat2    0
3     subCat1 1
4     subCat2 1
5     subCat3 2
6     subCat4 2 
```

我想要一个看起来像这样的结果：

```
{items: [
    {catId: 1, subCat:[{name: subCat1}, {name:subCat2}]},
    {catId: 2, subCat:[{name: subCat2}, {name:subCat4}]}
]} 
```

我试图通过以下方式解决这个问题：

```
$db = new PDO('mysql:host=localhost;dbname=test;charset=UTF-8', '', '');

$categories = $db -> query('SELECT * FROM category');

$results = array('items' => array());

foreach($categories as $row) {
    $subCategories = array();
    $results['items'][] = array('id' => $row['video_id'], 'subCat' => $subCategories);
}

echo json_encode($results); 
```

在这种情况下，我不知道如何处理子类别。或者我做了什么来修复 $categories 的查询？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:16:07.363

获取根类别，您需要添加`where ref_id=0`到您的查询中。然后在您的`foreach`循环中，您需要再次查询以获取当前行的子类别（`"where ref_id=".$row['id']`在第二个查询中使用）。您使用另一个循环编译`$subCategories`数组。`foreach`O，我`'id' => $row['video_id']`从你的代码中替换，`'catId' => $row['id']`以获得你需要的结果。

如下：

```
<?php
$db = new PDO('mysql:host=localhost;dbname=test', '', '');

$categories = $db->query('SELECT * FROM category where ref_id=0');

$results = array('items' => array());

foreach($categories as $row) {
  $subCategories = array();

  $sCategories = $db->query('SELECT * FROM category where ref_id='.$row['id']);
  foreach($sCategories as $subCat){
    $subCategories[] = array('name'=>$subCat['name']);
  }

  $results['items'][] = array('catId' => $row['id'], 'subCat' => $subCategories);
}

echo json_encode($results); 
```

我已经在我身边重新创建了您的数据库，当我运行它时，我得到了

```
{"items":[
   {"catId":"1","subCat":[{"name":"subcat1"},{"name":"subcat2"}]},
   {"catId":"2","subCat":[{"name":"subcat3"},{"name":"subcat4"}]}
]} 
```

# winapi - 如何处理 CWnd 中的 wm_print 消息（使用 MFC）？

> ID：12000458
> 
> 赞同：2
> 
> 时间：2012-08-17T05:53:00.937
> 
> 标签：winapi, visual-c++, mfc

有没有办法在 CWnd（使用 MFC）中处理 wm_print 消息？我正在尝试拦截此消息并阻止打印子控件。将 ON_WM_PRINT() 添加到我的消息映射会引发编译错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:27:31.197

MFC 只为最常见的消息定义了 ON_WM_XXXX() 宏，但也有一个通用的 ON_MESSAGE() 宏允许您处理其他情况。添加

```
ON_MESSAGE(WM_PRINT, OnPrint) 
```

到你的消息映射，然后声明并实现一个成员函数

```
afx_msg LRESULT OnPrint(WPARAM, LPARAM); 
```

设备上下文在 WPARAM 中传递，因此您在实现中需要这样的东西：

```
LRESULT MyWindowClass::OnPrint(WPARAM wp, LPARAM)
{
  CDC* dc = CDC::FromHandle((HDC)wp);

  // Do custom logic here ...

  // Only call Default() if you want the default processing for this message too ...
  return Default();
} 
```

# java - 如何在 Eclipse 中导出或保存已检查的对象结构？

> ID：12000462
> 
> 赞同：6
> 
> 时间：2012-08-17T05:53:12.117
> 
> 标签：java, eclipse, debugging, object, inspection

有没有办法保存/导出（也需要能够稍后查看）检查的对象结构？

![eclipse中的样本检查窗口](../Images/3df504ac7c539342ef684c4ef1c44e58.png)

可能导出到 XML 或 JSON 结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:17:26.043

您可以使用[xstream](http://xstream.codehaus.org/)，例如

Java 对象：

```
 public class Person {
      private String firstname;
      private String lastname;
      private PhoneNumber phone;
      private PhoneNumber fax;
      // ... constructors and methods
    }

public class PhoneNumber {
  private int code;
  private String number;
  // ... constructors and methods
}' 
```

只需实例化 XStream 类：

```
XStream xstream = new XStream(); 
```

创建一个 Person 实例并填充其字段：

```
Person joe = new Person("Joe", "Walnes");
joe.setPhone(new PhoneNumber(123, "1234-456"));
joe.setFax(new PhoneNumber(123, "9999-999")); 
```

将其转换为 XML

```
String xml = xstream.toXML(joe);' 
```

结果

```
<person>
  <firstname>Joe</firstname>
  <lastname>Walnes</lastname>
  <phone>
    <code>123</code>
    <number>1234-456</number>
  </phone>
  <fax>
    <code>123</code>
    <number>9999-999</number>
  </fax>
</person> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T17:37:19.163

我认为 tostao 的回复是正确的，只需创建一个带有静态方法的帮助程序类，您将在调试期间调用该方法将 XML 持久化到系统上的某个文件中。

然后使用 Eclipse 的“表达式”视图来执行命令。例如：

```
FileUtils.persistObjToXml(obj,path) 
```

# c# - Automapper，INamingConvention Camelcase 属性转为大写，带下划线

> ID：12000466
> 
> 赞同：5
> 
> 时间：2012-08-17T05:53:38.327
> 
> 标签：c#, .net, automapper

我有两个类，一个是由实体框架生成的，另一个是我到处使用的类。

我的课 ：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

EF类：

```
public class PERSON
{
    public string FIRST_NAME { get; set; }
    public string LAST_NAME { get; set; }
} 
```

当源为`PERSON`to时我找到了解决方案`Person`，**但**我没有找到 to 的解决方案`Person`（`PERSON`属性为大写和下划线分隔符）。

```
The solution for PERSON to Person :

Mapper.Initialize(x => x.AddProfile<Profile1>());
var res = Mapper.Map<PERSON, Person>(person);

public class UpperUnderscoreNamingConvention : INamingConvention
{
    private readonly Regex _splittingExpression = new Regex(@"[p{Lu}0-9]+(?=_?)");
    public Regex SplittingExpression
    {
        get { return _splittingExpression; }
    }

    public string SeparatorCharacter
    {
        get { return "_"; }
    }
}

public class Profile1 : Profile
{
    protected override void Configure()
    {
        SourceMemberNamingConvention = new UpperUnderscoreNamingConvention();
        DestinationMemberNamingConvention = new PascalCaseNamingConvention();
        CreateMap<PERSON, Person>();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-25T16:32:27.907

这适用于 AutoMapper 7.0.1 版：

```
using AutoMapper;
using System.Text.RegularExpressions;

namespace Data.Service.Mapping
{
    public class UpperUnderscoreNamingConvention: INamingConvention
    {
        public Regex SplittingExpression { get; } = new Regex(@"[\p{Ll}\p{Lu}0-9]+(?=_?)");

        public string SeparatorCharacter => "_";

        public string ReplaceValue(Match match) => match.Value.ToUpper();
    }
} 
```

# php - css 和 js 文件被 iframe 缓存

> ID：12000468
> 
> 赞同：2
> 
> 时间：2012-08-17T05:53:55.657
> 
> 标签：php, javascript, jquery, facebox

我正在使用一个名为 facebox 的 jquery 插件。它工作得很好，但我面临着！有问题。看起来它的 iframe 方法导致我的浏览器缓存正在加载到目标页面中的 css。

这就是我在 jquery 就绪状态的页面中调用它的方式。

```
$('a.participate').click( function(){
            $.facebox({
                iframe: '" . $urlparticipate . "',
                rev: 'iframe|550|550'
            });
            return false ;
        }); 
```

其中 $urlparticipate 是将在 iframe 中打开的 url。我仔细查看了 facebox.js，发现插件似乎使用了以下方法来创建 iframe。

```
function fillFaceboxFromIframe(href, klass, height, width) {
    $.facebox.reveal('<iframe scrolling="auto" marginwidth="0" width="'+width+'" height="' + height + '" frameborder="0" src="' + href + '" marginheight="0"></iframe>', klass)
  } 
```

如何防止css被缓存？我知道它正在被缓存，因为我更改了元素的 css 样式。我什至更改了一些正在加载的 js 代码，但它仍在加载旧代码。

我还尝试了以下方法：

1.  在头部前端添加目标页面

    元 http-equiv="缓存控制" 内容="无缓存"

    元 http-equiv="Pragma" 内容="无缓存"

    元 http-equiv="过期" 内容="0"

2.  我试图从后面的代码中添加一些标题（php）

    header("缓存控制：无缓存");

    header("Pragma: no-cache");

一切都没有成功..我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:03:57.127

您可以随时尝试对页面上的 CSS 参考进行“版本控制”。有好方法和不太好的方法：每次进行更改时都附加一个静态版本号，或者使用随机生成的 GUID，这将有效地强制对页面的每个请求以检索 CSS 文件（ s)。更好的选择是静态的，像这样：

```
<link type="text/css" rel="stylesheet" href="cssfile.css?1.12" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:02:51.167

尝试使用 CSS 文件名（通常是版本号）抛出一个 var，这样浏览器就无法缓存它。类似 foo.css?ver=bar

# php - 在 WAMP 上安装 PHP OAuth 扩展

> ID：12000470
> 
> 赞同：4
> 
> 时间：2012-08-17T05:54:07.827
> 
> 标签：php, oauth, wamp

这行 PHP 代码：

```
$oauthClient = new OAuth($consumerKey, $consumerSecret, ... etc. 
```

结果错误：

> 致命错误：找不到类“OAuth”

我正在运行 WampServer 2.1、PHP 版本 5.3.4、Windows Server 2008 R2（相当于 Windows 7）

我已经按照以下说明仔细检查了 php_oauth.dll 是否已安装：[PHP OAUTH class api](https://stackoverflow.com/questions/11242922/php-oauth-class-api)

如何成功加载 oauth 扩展并修复此 PHP 错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-21T11:41:15.950

[从这里](http://pecl.php.net/package/oauth/1.2.3/windows)下载正确的 oauth DLL

将 php_oauth.dll 粘贴到`\wamp\bin\php\php5.5.12\ext`

将这些行添加到您的两个 php.ini **extension=php_oauth.dll**

```
1.\wamp\bin\php\php5.5.12
2.\wamp\bin\apache\apache2.4.9\bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T20:23:50.933

这是因为您没有启用 php_OAuth.dll

为此，您首先需要启用

[您可以从这里](http://www.easysolutionweb.com/php-tutorials-programming-concepts/install-php-oauth-authentication-in-localhost)找到 Windows 的逐步说明

# matlab - 如何制作随机矩阵，其行必须全部和 <= 11 并且不能在任何行中包含 0-0-0 的连续三元组

> ID：12000476
> 
> 赞同：1
> 
> 时间：2012-08-17T05:54:33.270
> 
> 标签：matlab, matrix

我想创建一个名为 的数组`result`，它有维度`(14,12,10)`和值`random[0 2]`，但每行（维度 2）中不应包含`0`超过三个连续时间，并且每行中所有值的总和必须为`<= 11`.

这是我目前的做法：

```
jum_kel = 14;
jum_bag = 12;
uk_pop = 10;

for ii = 1:uk_pop,
  libur(:,:,ii) = randint(jum_kel,jum_bag,[0 2]); %#initialis
  sum_libur(1,:,ii) = sum(libur(:,:,ii),2); %#sum each row
end

for jj = 1:jum_kel
  while sum_libur(1,jj,ii) > 11, %# first constraint : sum each row should be <=11,
    libur(jj,:,ii) = randint(1,jum_bag,[0 2])
    sum_libur(1,:,ii)=  sum(libur(:,:,ii),2);
    for kk = 1:jum_bag
      if kk>2
        o = libur(jj,kk,ii)+libur(jj,kk-1,ii)+libur(jj,kk-2)
        while kk>2 && o==0 %# constraint 2: to make matrix will not contain consecutive triplets (0-0-0) in any row.
          libur(jj,:,ii) = randint(1,jum_bag,[0 2]); 
          sum_libur(1,:,ii)=  sum(libur(:,:,ii),2);
        end
      end
    end
  end
end 
```

但这非常慢......有人看到更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:58:14.847

（旁注：矩阵没有 3 维：那将是一个张量，在这种情况下，“行”的概念没有明确定义。）

最简单的方法是使用[拒绝采样](http://en.wikipedia.org/wiki/Rejection_sampling)。通常这可能会很慢，即使您没有提及它，我也会担心此代码可能会出现在程序的性能关键部分中。尽管如此，一切都很好，因为包含子字符串 0-0-0 的行中出现 14 次 3 面硬币翻转的机会相当小。即使这是一个问题，由于矩阵（假设）是均匀分布的，它的元素也必须是独立分布的，因此您可以分别对**每一行进行采样**，*拒绝并重新创建一行中包含 0-0-0 或总和的任何行<= 11*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:16:56.413

正如@ninjagecko 所指出的，拒绝和重新创建是最明显（如果不是唯一）的方式。有鉴于此，我认为这会做得很好：

```
R = 14;
C = 12;
T = 10;

result = zeros(C,R*T);

for ii = 1:(R*T)
    done = false;
    while ~done
        newRow = randi([0 2],C,1);
        done = ...
            (sum(newRow)<12) && ...
            (~any(diff([0;find(newRow);C+1])>3));
    end
    result(:,ii) = newRow;
end

result = permute(reshape(result,C,R,T), [2 1 3]); 
```

请注意，`<12`equals`<=11`用于整数数学（和`>3`equals `>=4`），但需要少检查一次，因此速度更快。该变量`newRow`被创建为列向量，因为这些东西在内存中组织得更好并且可以更快地检查。分配 3D 数组的速度通常比 2D 矩阵慢，因此在所有操作完成之前，一切都保持 2D。计算强度最高的检查 ( `~any(diff(find(newRow))>3)`)*最后*完成，因此短路 ( `&&`) 可能使其评估变得不必要。两个循环都很小，满足所有条件，由 Matlab 的 JIT 编译为机器代码。

所以这非常接近优化，并且会非常快。除非有人为此提出完全不同的算法，否则我相信这非常接近 Matlab 中的理论最大速度。如果您需要更快，则必须切换到 C（这将允许优化约束检查）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:19:55.703

为了简单地在数组中查找一系列数字，您可以（ab）使用[strfind](http://www.mathworks.nl/help/techdoc/ref/strfind.html)。索引到多维数组时，您还可以将子索引和线性索引组合到其余维度（在 assignment 中使用`result(:,ii) = newRow`）：

```
result = NaN(12,14,10);
for ii = 1:14*10
    while 1
        newRow = randi([0 2],12,1);
        if isempty(strfind(newRow',[0 0 0])) && sum(newRow)<=11
            result(:,ii) = newRow; 
            break;
        end
    end
end
result = permute(result, [2 1 3]); 
```

# android - 启动模拟器时的问题

> ID：12000480
> 
> 赞同：1
> 
> 时间：2012-08-17T05:55:06.327
> 
> 标签：android, eclipse, graph

现在我正在尝试通过自学在 android 中创建图形。在 Google 上进行了一些搜索后，我得到了一些想法。它建议我使用一些库或 jar 文件在 android 上创建图形或图表。明智地我得到了 kichart WinRAR来自此[链接](http://www.kidroid.com/kichart/)的文件。

模拟器运行后，它只是**“抱歉您的应用程序已意外停止。请重试。强制关闭”**

有人可以帮我解决这个问题吗？请找到我的来源以供参考。

**MainActiviy.java**

```
package com.example.z_chart;

import com.kidroid.kichart.ChartActivity;
import com.kidroid.kichart.model.Aitem;
import com.kidroid.kichart.view.LineView;
import android.graphics.Color;
import android.os.Bundle;

public class MainActivity extends ChartActivity 
{
LineView lv = null;

@Override
public void onCreate(Bundle savedInstanceState) 
{

super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

String[] arrX = new String[4];
arrX[0] = "2010.1";
arrX[1] = "2010.2";
arrX[2] = "2010.3";
arrX[3] = "2010.4";

float[] arr = new float[4];
arr[0] = 100;
arr[1] = 150;
arr[2] = 380;
arr[3] = 300;

Aitem[] items = new Aitem[1];
items[0] = new Aitem(Color.RED, "Payout", arr);

lv = new LineView(this);
lv.setTitle("Money balance in four months");
lv.setAxisValueX(arrX);
lv.setItems(items);
setContentView(lv);
}} 
```

**LOGCAT**

```
08-17 11:08:53.473: W/dalvikvm(345): Unable to resolve superclass of Lcom/example/z_chart/MainActivity; (414)
08-17 11:08:53.473: W/dalvikvm(345): Link of class 'Lcom/example/z_chart/MainActivity;' failed
08-17 11:08:53.523: D/AndroidRuntime(345): Shutting down VM
08-17 11:08:53.523: W/dalvikvm(345): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-17 11:08:53.604: E/AndroidRuntime(345): FATAL EXCEPTION: main
08-17 11:08:53.604: E/AndroidRuntime(345): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.z_chart/com.example.z_chart.MainActivity}: java.lang.ClassNotFoundException: com.example.z_chart.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.z_chart-1.apk]
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.os.Looper.loop(Looper.java:123)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-17 11:08:53.604: E/AndroidRuntime(345):  at java.lang.reflect.Method.invokeNative(Native Method)
08-17 11:08:53.604: E/AndroidRuntime(345):  at java.lang.reflect.Method.invoke(Method.java:521)
08-17 11:08:53.604: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-17 11:08:53.604: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-17 11:08:53.604: E/AndroidRuntime(345):  at dalvik.system.NativeStart.main(Native Method)
08-17 11:08:53.604: E/AndroidRuntime(345): Caused by: java.lang.ClassNotFoundException: com.example.z_chart.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.z_chart-1.apk]
08-17 11:08:53.604: E/AndroidRuntime(345):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-17 11:08:53.604: E/AndroidRuntime(345):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-17 11:08:53.604: E/AndroidRuntime(345):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-17 11:08:53.604: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-17 11:08:53.604: E/AndroidRuntime(345):  ... 11 more 
```

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.z_chart"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 </application>
</manifest> 
```

提前致谢！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:57:15.017

尝试清理您的项目，然后再次检查。

在 Eclipse 中单击项目 -> 清理。

清理项目并再次构建它，以便更新 R.java 并且不使用任何缓存文件

[在这里](https://stackoverflow.com/q/4688277/614807)您可以找到不同的不同解决方案。

## 或者

从您的代码中删除这一行。

```
setContentView(R.layout.activity_main); 
```

# css - IE 10 CSS 超链接样式

> ID：12000486
> 
> 赞同：0
> 
> 时间：2012-08-17T05:55:27.423
> 
> 标签：css, internet-explorer-10

我正在开发一个将 IE6 应用程序转换为 IE10/标准兼容浏览器的项目。

该项目具有使用 css 呈现为图像的超链接

```
<a href="somelink.htm" class="Icon_Page">

.Icon_Page
{
    background-image: url('../images/icons/page.png') ; 
        background-repeat: no-repeat;
    padding:0px 16px 0px 0px;
} 
```

图标为 16 平方像素。我已将 CSS 更新为以下内容，它们现在在 Chrome 和 Safari 中或多或少地正确呈现。在标准模式下的 IE 9/10 中，不渲染图像。为了在 IE 中渲染图像，css 需要显示什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:05:11.890

您应该为标签 css 分配高度和宽度，并且可以设置`display: block;`

# microsoft-metro - 如何在 C# 中创建自定义转义序列？

> ID：12000488
> 
> 赞同：1
> 
> 时间：2012-08-17T05:55:55.487
> 
> 标签：microsoft-metro

我正在为 windows 8 开发一个文本编辑器，所以我需要为各种功能创建自定义转义序列，如换行符、制表符。

# blackberry - 自定义 Horizo ntalFieldManager 黑莓的 wrapContent

> ID：12000495
> 
> 赞同：1
> 
> 时间：2012-08-17T05:56:33.193
> 
> 标签：blackberry, java-me

我正在开发一个应用程序，我需要在可扩展列表中显示产品。所以我尝试了一个在stackoverflow中给出的例子......所以，它工作得很好，但我的问题是不会根据内容扩展包装（扩展）的分隔符，就像在屏幕中......

![在此处输入图像描述](../Images/0ccca35ace0f870462aedb4e5aaa5af2.png)

如您所见，在屏幕中**date2**字段未正确显示..为此，是否有任何滚动功能或者可以自动扩展？

**这是我的代码**

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.FontFamily;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.Touchscreen;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.NullField;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

class UiMainscreen extends MainScreen implements FieldChangeListener
{
    private CustomListField cu_field[];
    private Bitmap image=null;
    int size=8;
    public UiMainscreen() {
        VerticalFieldManager vmanager=new VerticalFieldManager(VERTICAL_SCROLL|VERTICAL_SCROLLBAR){
            protected void sublayout(int maxWidth, int maxHeight) {

                super.sublayout(Display.getWidth(),Display.getHeight());
                setExtent(Display.getWidth(),Display.getHeight());
            }
        };
        cu_field=new CustomListField[size]; 
        for(int i=0;i<size;i++){
            image=Bitmap.getBitmapResource("sample_"+i+".jpg");
            cu_field[i]=new CustomListField("BlackBerry models that had a built-in mobile phone, were the first models that natively ran Java, and transmitted data over the normal 2G cellular network. RIM began to advertise these devices as email-capable mobile phones rather than as 2-way pagers.", image, "jan2011", 100, 100,Color.LIGHTGREEN);
            cu_field[i].setChangeListener(this);
            vmanager.add(new SeparatorField());
            vmanager.add(cu_field[i]);
        }
        add(vmanager);
    }

    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
        for(int i=0;i<size;i++){
            if(field==cu_field[i]){
                final int k=i;
                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        Dialog.alert("You click on Item No "+k);
                    }
                });
            }
        }
    }
}

class CustomListField extends HorizontalFieldManager{

    private Bitmap scale_image;
    private int width=0;
    private int height=0;
    private int background_color=0;
    private BitmapField bitmap_field;
    private boolean flag=false;
    Bitmap logingBg;
    public CustomListField(String title, Bitmap image, String date,int image_width,int image_height,int background_color){
        super(NO_HORIZONTAL_SCROLL|USE_ALL_WIDTH);
        this.background_color=background_color;
        width=image_width;
        height=image_width;
        if(image!=null){
            scale_image=new Bitmap(image_width, image_height);
            image.scaleInto(scale_image, Bitmap.FILTER_LANCZOS);
            bitmap_field=new BitmapField(scale_image);
            flag=false;
            bitmap_field.setMargin(5, 5, 5, 5);
            add(bitmap_field);
        }

        VerticalFieldManager vmanager=new VerticalFieldManager(USE_ALL_WIDTH|Field.FIELD_VCENTER){
            protected void sublayout(int maxWidth, int maxHeight) {
                super.sublayout(Display.getWidth(), height);
                setExtent(Display.getWidth(), height);
            }
        };
        ///////////////////////////////////////////
       /* Bitmap logingBg = Bitmap.getBitmapResource("myorderdatebackground.png");
        HorizontalFieldManager hfm = new HorizontalFieldManager(USE_ALL_WIDTH);
        HorizontalFieldManager hfm2 = new HorizontalFieldManager(Field.FIELD_HCENTER);
        ButtonField btnext = new ButtonField("btn");
        CustomButtonField btnSignIn = new CustomButtonField(0, "", logingBg,
                logingBg, Field.FOCUSABLE, Color.WHITE);
        hfm2.add(btnext);
        hfm.add(btnSignIn);

        hfm.add(hfm2);
        vmanager.add(hfm);*/
         logingBg = Bitmap.getBitmapResource("myorderdatebackground.png");

        HorizontalFieldManager HFM = new HorizontalFieldManager(USE_ALL_WIDTH) {
            public void paint(Graphics g) {
                //g.setBackgroundColor(Color.BLUE);
                g.clear();
                g.drawBitmap(0, 0, Display.getWidth(),            
                        logingBg.getHeight(), logingBg, 0, 0);  
                super.paint(g);
            }
        };

        HorizontalFieldManager lableRegistHFM = new HorizontalFieldManager(
                FIELD_VCENTER);
        LabelField RegistrationLbl = new LabelField("My Orders",Field.FIELD_HCENTER);
        FontFamily fontFamily[] = FontFamily.getFontFamilies();
        Font font11 = fontFamily[1].getFont(FontFamily.CBTF_FONT, 12);
        font11 = fontFamily[1].getFont(Font.BOLD, 18);
        RegistrationLbl.setFont(font11);
        RegistrationLbl.setMargin(0, 0, 0, (Display.getWidth() / 3));

        lableRegistHFM.add(RegistrationLbl);

        HFM.add(lableRegistHFM);
        vmanager.add(HFM);

        /**************************************************************/

        LabelField title_lbl=new LabelField("Title: "+title,Field.NON_FOCUSABLE|DrawStyle.ELLIPSIS);
        vmanager.add(title_lbl);

        LabelField date_lbl=new LabelField("Date: "+date,Field.NON_FOCUSABLE);
        vmanager.add(date_lbl);

        LabelField date_lbl3=new LabelField("Date2: "+date,Field.NON_FOCUSABLE);
        vmanager.add(date_lbl3);

        LabelField date_lbl4=new LabelField("Date2: "+date,Field.NON_FOCUSABLE);
        vmanager.add(date_lbl4);

        Font fon=title_lbl.getFont();
        int title_height=fon.getHeight();

        Font font=date_lbl.getFont();
        int date_height=font.getHeight();
        int pad=title_height+date_height;
        title_lbl.setPadding((height-pad)/2, 0, 0, 0);
        add(vmanager);
        add(new NullField(FOCUSABLE));
    }

    protected void sublayout(int maxWidth, int maxHeight) {
        super.sublayout(Display.getWidth(), height);
        setExtent(Display.getWidth(), height);
    }
    protected void paint(Graphics graphics) {
        if(flag)
        graphics.setBackgroundColor(background_color);
        graphics.clear();
        super.paint(graphics);
    }
    protected void onFocus(int direction) {
        super.onFocus(direction);
        flag=true;
        invalidate();
    }
    protected void onUnfocus() {
        invalidate();
        flag=false;
    }
    protected boolean navigationClick(int status, int time) {

        if(Touchscreen.isSupported()){
            return false;
        }else{
            fieldChangeNotify(1);
            return true;
        }

    }
    protected boolean touchEvent(TouchEvent message) 
    {
        if (TouchEvent.CLICK == message.getEvent()) 
        {

            FieldChangeListener listener = getChangeListener();
            if (null != listener)
                this.setFocus();
                listener.fieldChanged(this, 1);
        }
        return super.touchEvent(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:30:34.637

问题在这里：

```
protected void sublayout(int maxWidth, int maxHeight) {
    super.sublayout(Display.getWidth(), height);
    setExtent(Display.getWidth(), height);
} 
```

您给予经理的高度低于内容所需的高度（仅限`image_width`）。

这里也可能出现错误：

```
width=image_width;
height=image_width; 
```

您应该`image_height`使用`height`.

并且确保您可以使用滚动`VerticalManager`- 将样式添加`VERTICAL_SCROLL`到构造函数。但作为用户，在这种情况下，我会发现用户体验 (UX) 很奇怪。

# android - 如何添加打开按钮而不是选项卡的 onclick 的 TabHost 活动？

> ID：12000496
> 
> 赞同：0
> 
> 时间：2012-08-17T05:56:37.653
> 
> 标签：android

我在我的应用程序中添加 TabHost（它就像 iphone），当单击任何 TabHost 移动到其他活动时，它很酷，而 Tabhost 像往常一样在 Botton 中。但问题是当我单击 Activity 顶部的按钮时，将其他 Activity 移动到这种情况下 TabHost Not Visible on bottom flow 就是这样

假设有 5 个 tabhost A、B、C、D、E 每个 tabhost 都有一个活动。

案例A（点击第一个tabhost）：

打开 Activity 中的 Activity TabHost 位于底部，并且此 Activity 顶部有按钮。

当单击该按钮时，打开其他活动，但在这种情况下，此活动的底部没有标签主机。但需要的是任何人建议我都应该有标签主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:05:17.100

看到这个

[http://www.mkyong.com/android/android-tablayout-example/](http://www.mkyong.com/android/android-tablayout-example/)

还有这个

[http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

# php - 如何在 jquery 中检索 curl 和 Json 值？

> ID：12000499
> 
> 赞同：0
> 
> 时间：2012-08-17T05:56:53.520
> 
> 标签：php, jquery, json, curl

我的 jquery 代码如下，这是通过 API 转换的货币。在 json 中的 API 数据中。我想通过 AJax 检索数据。

```
Im geting the error : Fatal error:  Cannot access empty property in C:\xampp\htdocs\mvc\converter\ajax.php on line 25

<script type="text/javascript">
    $(document).ready(function(){
        $("#currency").change(function(){
            var currency= $("#currency").val();
            $.ajax({
                type: "GET",
                url: "ajax.php", 
                cache: false,
                data: currency,
                dataType: "text",
                success: function(data){
                    alert(data);
                    $("#quantity").keyup(function(){
                        //var local_rate= $("#local_rate").val();
                        var quantity= $("#quantity").val();
                        var us_rate= quantity / cur;
                        $('.listprice').html(us_rate);      
                    });
                }
            });

        });
    });
</script> 
```

这是我的 php (ajax.php) 代码

```
<?php
$currency =$_GET['currency'];

$file = 'latest.json';
$appId = '306bdd0f71fe465280e48188846534af';

// Open CURL session:
$ch = curl_init("http://openexchangerates.org/api/{$file}?app_id={$appId}");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// Get the data:
$json = curl_exec($ch);
curl_close($ch);

$exchangeRates = json_decode($json);

echo $rate= $exchangeRates->rates->$currency;

?> 
```

我坚持检索数据，而不使用 jquery，它工作得很好......在这里我想通过 Ajax 加载..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:00:49.027

更改`data: currency,`为，`data: {currency: currency},`以便货币可以通过`$_GET['currency']`

# php - 使用标题的好处？

> ID：12000501
> 
> 赞同：-3
> 
> 时间：2012-08-17T05:57:22.847
> 
> 标签：php, json, jsonp

在 php 中使用 headers 有什么好处？我正在研究基于休息的网络服务。

对于 JSON，需要哪些标头？标头的优点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:59:36.157

> 对 JSON 使用标头有什么好处？

JSON 没有任何称为“标头”的概念

> 我正在研究基于休息的网络服务。那么为此是否需要标头？

REST 是 HTTP。HTTP 请求和响应必须有标头。没有它们，HTTP 就无法工作。

> 使用它有什么好处？

没有它们，您就无法拥有一个正常工作的 HTTP 系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:11:14.563

一种用途是告诉浏览器响应是什么类型的媒体。在您的情况下，您可以告诉浏览器不要缓存响应以及它是什么类型的媒体。

例如：

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); 
```

您还可以使用标头来了解请求是否为 ajax。在您的情况下真正重要的另一个用途是了解请求类型 post、get、delete 或您有什么。

# javascript - 如何根据用户输入的数字向表单动态添加文本字段

> ID：12000504
> 
> 赞同：1
> 
> 时间：2012-08-17T05:58:01.210
> 
> 标签：javascript, jquery

我正在尝试制作一个表单，向用户询问一些单位，然后询问他们是否希望提供这些单位，并根据答案生成与输入的单位数量相对应的文本字段，以及要求提供帐号的文本字段。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">

</script>

<script type="text/javascript">

function Getunits(value) {
var units = document.getElementById('units');
for(count=0; count<=units; count++) {
$("<input type='text'>").appendTo("inpane");
 }
document.getElementByTag('futureacc').InnerHTML='What is your account number? <input type="text" value="accountnum">';

}
</script>
</head>
<body>
<div id="container">
<form method="post" action="sendcontact.php">
<div id="unitammount" class="inpane">
Number of units ordered: <input type="text" name="units" id="units"/><br />
</div>

<div id="futureacc" class="inpane">
Are these units to be provisioned? <input type="radio" name="select" value="yes" onClick="Getunits('units.value')"/> Yes <input type="radio" name="select" value="no"/> No
</div> 
```

显然，我希望新的文本字段分别出现在 futureacc div 和 inpane div 中。

我不知道是循环没有做任何事情还是我没有正确附加，但正如我目前拥有的那样，这什么都不做......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:19:11.423

您的代码有许多错误。这很令人困惑，因为您将 jQuery 和纯 Javascript 混合在一起。如果您决定使用它，通常最好只使用 jQuery。您的循环应该在小于 时进行迭代，而`units.val()`不是在小于或等于时进行迭代`units`。 `innerHTML`拼写为小写“i”，并且您的`appendTo`选择器需要在类名前加一个句点。我继续清理了你的代码，所以它现在应该可以工作了！

HTML：

```
<div id="container">
    <form method="post" action="sendcontact.php">
        <div id="unitammount" class="inpane">
              Number of units ordered: <input type="text" name="units" id="units"/>
        </div><br>

        <div id="futureacc" class="inpane">
            Are these units to be provisioned? <input type="radio" name="select" value="yes" onClick="getUnits()"/> Yes <input type="radio" name="select" value="no"/> No <br>
        </div>
    </form>
</div>​ 
```

Javascript：

```
function getUnits() {
    var units = $("#units").val();
    for (var count = 0; count < units; count++) {
        $("<input type='text' /><br>").appendTo("#futureacc");
    }
    $("#futureacc").append('<br>What is your account number? <input type="text" placeholder="accountnum">');
}​ 
```

# [**工作演示**](http://jsfiddle.net/Snowsickle/JL4VB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:01:34.560

```
var units = document.getElementById('units'); 
```

需要是

```
var units = document.getElementById('units').value; 
```

您正在将值传递给 onclick，但它是一个字符串，无论如何您都没有在函数中使用它，因此它不会给您确切的值，因此它没有任何副作用。

您还需要进行一些错误检查以确保用户输入了一个数字

和

```
for(count=0; count<=units; count++) 
```

您添加的文本框比用户输入的值多 1 个。所以如果用户输入了 4 你正在创建 5 <= 应该更改为 <

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:02:24.410

这是错误的

```
onClick="Getunits('units.value')" 
```

而是使用这个：

```
onClick="Getunits(units.value)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:09:36.507

尝试这个

```
$(document).ready(function(){
  $('input[name=select]').click(function(){
    if($(this).val() ==='yes'){
        var numberOfTextboxes = $('#units').val();
        for(var i =0; i<numberOfTextboxes; i++){
            $('#unitammount').append('<input type="text" />');
        }
    }
  });
}); 
```

看[小提琴](http://jsfiddle.net/E4cNb/)

# ruby-on-rails - Rails：使用 Nokogiri 插入 Rake 任务解析：--- !ruby/object:Nokogiri::XML::Element {} 到 DB

> ID：12000505
> 
> 赞同：0
> 
> 时间：2012-08-17T05:58:07.130
> 
> 标签：ruby-on-rails, ruby, xml, rake, nokogiri

设置 Rake 任务时遇到问题。这是代码：

```
 task :fetch_games => :environment do

require 'nokogiri'

require 'open-uri'

doc = Nokogiri::XML(open(url))

  games = doc.xpath('//game')

    games.each do |game|
      @data = Game.new(
        :name            => game.at('name').text,
        :publisher       => game.at('publisher').text,)

    @data.save

    if @data.save
        puts "Success"
    else
        puts "Didn't work"
    end
    end
end 
```

它运行没有错误，但在数据库中的条目显示：“--​​- !ruby/object:Nokogiri::XML::Element {}”

任何帮助都是极好的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:14:07.810

自己弄清楚xpath语法不正确。我需要使用：

```
/game 
```

代替

```
//game 
```

# android - 菜单中的子菜单

> ID：12000507
> 
> 赞同：0
> 
> 时间：2012-08-17T05:58:17.410
> 
> 标签：android, menu

我试图通过单击菜单按钮来显示一个名为“共享”的菜单项。现在我需要为此共享菜单项创建一个子菜单项。当单击共享菜单项时，子菜单项应该是可见的（第一次单击时变为可见，下次不可见，依此类推）。我发现很少有显示子菜单项的解决方案，但这些解决方案与菜单项一起显示。

这是我创建菜单的代码

```
public boolean onCreateOptionsMenu(Menu m) {

    m.add(1,1,0,"one").setIcon(R.drawable.icon);
    m.add(1,2,0,"two").setIcon(R.drawable.icon);
    m.add(1,3,0,"three").setIcon(R.drawable.icon);
    m.add(1,4,0,"four").setIcon(R.drawable.icon);
    m.getItem(0).setVisible(false);
    m.getItem(1).setVisible(false);
    return true;
} 
```

和我的 onPrepareOptionsMenu()

```
public boolean onPrepareOptionsMenu(Menu m) {
    if(isvisible)
    {
    isvisible = false;
     m.getItem(0).setVisible(true);

    m.getItem(1).setVisible(true);

}
else{
    isvisible = true;
    m.getItem(0).setVisible(false);

    m.getItem(1).setVisible(false);

}

    return super.onPrepareOptionsMenu(m);

} 
```

当我单击菜单项而不是菜单按钮时，我需要显示剩余的两项。任何人都可以建议我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:07:04.450

覆盖以下方法：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    return super.onPrepareOptionsMenu(menu);
} 
```

**每次显示菜单之前都会调用上述方法。**

```
Here you can maintain a bool and hide the submenu depending upon the condition of your check. 
```

**编辑：**

默认情况下`set bool to false`，`on false show the menu and set the bool to true`并且在下次调用时检查此布尔值，如果为真，则将其设置为假并使菜单不可见。使用此行使菜单可见或不可见：

`menu.getItem(index).getSubMenu().getItem(index).setVisible(true);` 将布尔值存储在`sharedpreference`.

# objective-c - 保存包含用户更新的新 PDF

> ID：12000508
> 
> 赞同：0
> 
> 时间：2012-08-17T05:58:27.177
> 
> 标签：objective-c, ios, pdf, pdf-generation

在我的 iOS 应用程序中，我想在用户完成对现有 pdf 的注释后将现有 pdf 重新生成为另一个 pdf。

我重新生成的 pdf 应该是现有 pdf 的精确副本，但应该嵌入注释和突出显示等，也可以在桌面上打开和查看。

我对此进行了一些研究，包括在其他 SO 帖子中提出的解决方案。我试过 libharu 等。

但不知何故，我无法将现有的 pdf 转换为副本 pdf。我可以为使用 libharu 创建的新 pdf 添加注释。

现在我的问题是将现有的pdf原样复制到我重新生成的pdf中。任何指针都会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:45:02.023

我的理解是，可以使用“真实”注释（例如可以隐藏在 Acrobat 中的注释）保存回 PDF 的库不是 FOSS 解决方案中存在的东西。

例如，LibHaru**仅**支持创建新的 PDF，不支持编辑或附加现有的 PDF。从他们的主页：

> 目前，libHaru 不支持阅读和编辑现有的 PDF 文件，而且这种支持不太可能出现。

您可以逐页呈现 PDF，然后使用一些附加信息重新保存它。[这个 SO question](https://stackoverflow.com/questions/1333710/how-to-edit-a-pdf-in-objective-c)有一段看起来很合理的代码。不过，这会将任何“注释”更多地保存为 PDF 本身中的图像。

你可以试试[PDFNet 之](http://www.pdftron.com/pdfnet/mobile/ios_pdf_library.html)类的付费图书馆。

# google-app-engine - 如何在 Google App Engine 的应用日志中显示异常的完整堆栈跟踪？

> ID：12000509
> 
> 赞同：1
> 
> 时间：2012-08-17T05:58:34.660
> 
> 标签：google-app-engine, logging, exception-handling

在 Google App Engine 上的已部署应用程序中从数据存储区分离对象时，我收到“无法分离”异常，我无法在我的开发盒上重现该异常。分离操作是服务器端的，所以我掌握的唯一信息是应用程序日志文件中的异常日志。但是，堆栈跟踪被省略了：例如，最深的内部异常以“... 36 more”结尾。

如何调整应用程序日志记录的详细程度以包含完整的、非省略的堆栈跟踪？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T08:23:48.750

您可以做的是在记录异常时添加 Throwable 作为参数。IE：

```
 Logger log = Logger.getLogger(YourClass.class.getName());
 .....
 }catch (final Throwable e){
       log.log(Level.SEVERE, e.toString(), e);
 } 
```

这将在 GAE 的日志上打印一个很好的堆栈跟踪。

这样您就不必更改全局日志级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:18:41.797

您可以调整的东西很少：

1) 在`war\WEB-INF\logging.properties`文件中。将 .level 值更改为更低的级别，例如 DEBUG。

2）在您的Java代码中，查看将问题代码封装在 a`try/catch`中，以便您可以控制它。

3) 在`catch`块中，查看通过 记录异常数据`ex.printStackTrace()`，其中 ex 是异常对象。

# iphone - 保存增量 int 变量

> ID：12000510
> 
> 赞同：0
> 
> 时间：2012-08-17T05:58:37.050
> 
> 标签：iphone, objective-c, ios, nsuserdefaults

我需要保存一个每次用户点击应用程序中的按钮时递增的变量。我一直在尝试这样做，`NSUserDefaults`但没有成功。这是我正在使用的代码：

```
[[NSUserDefaults standardUserDefaults] setInteger:i++ forKey:@"AppCount"]; 
```

但是，当我在日志中输出它时，我不断得到`0`.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:11:36.647

尝试添加：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

每次更改整数值后。

引用 Apple 的文档`synchronize`：

> 将对持久域的任何修改写入磁盘，并将所有未修改的持久域更新到磁盘上的内容。

[http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/synchronize](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/synchronize)

因此，通过此修改，您的最终代码应如下所示：

```
[[NSUserDefaults standardUserDefaults] setInteger:i++ forKey:@"AppCount"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

**编辑：**实际上再三考虑，试一试：

我认为问题在于使用 i++ 假设应用程序将始终能够跟踪计数，并且每次您重新进入应用程序时，我都会重置。

以下作品，我刚刚测试过。

```
if (![[NSUserDefaults standardUserDefaults] integerForKey:@"AppCount"]) {
    [[NSUserDefaults standardUserDefaults] setInteger:i forKey:@"AppCount"];
}else{
    [[NSUserDefaults standardUserDefaults] setInteger:[[NSUserDefaults standardUserDefaults] integerForKey:@"AppCount"] + 1 forKey:@"AppCount"];
}
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:01:03.863

您可以使用静态 NSUIInteger appCount=0; 在用户点击的函数中增加它的值 appCount++；将值保留在应用程序内的函数调用中。应用程序关闭后，您将其写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T11:15:21.233

```
- (void)viewDidLoad {

    [super viewDidLoad];

   countFirst= [[NSUserDefaults standardUserDefaults]integerForKey:@"Counter"];

    countFirst++;

} 
```

**把它写在你想增加的地方。**

```
[[NSUserDefaults standardUserDefaults] setInteger:countFirst++ forKey:@"Counter"]; 
```

# android - CustomSimpleCursorAdapter vs ViewBinder？

> ID：12000514
> 
> 赞同：1
> 
> 时间：2012-08-17T05:59:03.863
> 
> 标签：android, android-listview, simplecursoradapter, custom-adapter, android-viewbinder

我有一个从本地数据库中获取的项目列表。每个项目都有属性`isNew`。我想`TextView`仅对匹配的项目显示文本“新” `isNew = true`。我用两种方法解决了这个问题，现在我想知道哪种方法最好。

# 方法一：

我写了一个类`MyViewBinder`，它用我的逻辑实现`SimpleCursorAdapter.ViewBinder`和覆盖`public boolean setViewValue(view, cursor, columnIndex)`方法。

# 方法二：

创建`MySimpleCursorAdapter`which extends `SimpleCursorAdapter`，覆盖`getView`方法并在那里编写逻辑。

现在我正在使用第二种方法。任何人都可以建议我哪个是最好的方法，或者是否有其他最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:40:58.160

如果需要根据列的值对列表中的项进行多次更改，则第二种方法更方便。

# prolog - Prolog - 从 f0 到 fN 的序列列表

> ID：12000522
> 
> 赞同：2
> 
> 时间：2012-08-17T05:59:30.103
> 
> 标签：prolog

这个问题要求我写一个谓词`seqList(N, L)`，当 L 是列表时满足`[f0, . . . , fN]`。

在哪里`fN = fN-1 + fN-2 + fN-3`

我的代码是比较给定列表的头部，比较时将返回真或假。

```
seqList(_,[]).
seqList(N,[H|T]) :-
    N1 is N - 1,
    seq(N,H),
    seqList(N1,T). 
```

但是，它仅在值反转时有效，例如 seqList(3,[1,1,0,0]) 将返回 true，但对于 seqList(3,[0,0,1,1，列表应该返回 true ]）。有什么方法可以让我反转列表并正确验证它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:27:31.193

似乎您想要生成`N`序列的元素，`f`使得序列列表的第 -th 元素在哪里`f(N) = f(N-1) + f(N-2) + f(N-3)`，-based。三个起始元素也必须作为规范的一部分预先设置。你似乎从.`f(X)``X``0``[0,0,1, ...]`

使用[Prolog 中的惰性列表中的方法？](https://stackoverflow.com/a/8882745/849891)：

```
seqList(N,L):- N >= 3, !,
   L=[0,0,1|X], N3 is N-3, take(N3, seq(0,0,1), X-[], _).

next( seq(A,B,C), D, seq(B,C,D) ):- D is A+B+C. 
```

现在，所有这些函数都可以融合和内联，以得出一个递归定义。

* * *

但是你可以直接做。您只需要写下问题，即可获得解决方案。

```
question(N,L):- 
```

既然你从 0,0,1 开始，...*把它写下来：*

```
 L = [0, 0, 1 | X], 
```

既然给出了三个要素，我们只需要了解`N-3`更多。***写下来：***

```
 N3 is N-3, 
```

你现在已经在一定程度上减少了这个问题。您现在需要找到`N-3`元素并将它们放入`X`列表中。为此使用*工作者*谓词。它还必须知道每一步的前三个数字：

```
 worker( N3, 0, 0, 1, X). 
```

因此，只需**写下***工人*必须知道的内容：

```
worker(N, A, B, C, X):- 
```

如果`N`为0，我们必须停止。`X`然后是一个空列表。***写下来。***

```
 N = 0, X = [] . 
```

添加另一个子句，for when`N`大于 0。

```
worker(N, A, B, C, X):-
    N > 0, 
```

我们知道下一个元素是前面三个数字的总和。***把它写下来***。

```
 D is A + B + C, 
```

列表中的下一个元素是我们的参数列表的顶部元素（最后一个参数）。***写下来：***

```
 X = [D | X2 ], 
```

现在要添加的元素少了。***写下来：***

```
 N2 is N - 1, 
```

要查找列表的其余部分，最后三个数字是`B, C,`和`D`。***然后以完全相同的方式***找到其余部分：`worker`

 *```
 worker( N2, B, C, D, X2). 
```

而已。`question`谓词是您的解决方案。根据自己的喜好重命名。*

# java - 删除特定字符之后的所有字符

> ID：12000524
> 
> 赞同：2
> 
> 时间：2012-08-17T05:59:37.367
> 
> 标签：java

我有这样的话：

```
Sams – like costco
Jecy penny ? like sears 
```

在 Java 中，我想获取这个字符串并得到输出：

```
Sams 
Jecy penny 
```

有什么办法可以删除`-`and之后的所有字符`?`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T06:03:03.017

三个选项：

*   使用`indexOf`然后`substring`
*   使用`split`然后取第一个返回值
*   使用正则表达式替换第一部分之后的所有内容

这是拆分选项 - 请记住，`split`它采用正则表达式：

```
public class Test {

    public static void main(String[] args) {
        showFirstPart("Sams - like costco");
        showFirstPart("Jecy penny ? like sears");
    }

    private static void showFirstPart(String text) {
        String[] parts = text.split("[-?]", 2);
        System.out.println("First part of " + text
                           + ": " + parts[0]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:04:52.043

**1.** `Sams - like costco`

**回答：**

```
String s = "Sams - like costco";

String[] arr = s.split("-");

String res = arr[0]; 
```

**2.** `Jecy penny ? like sears`

**回答：**

```
String s = "Jecy penny ? like sears";

String[] arr = s.split("\\?");  

Added \\ before ?, as ? has a special meaning

String res = arr[0]; 
```

**虽然上面的 2 个例子是针对只有一个“-”和“?”的，但是你可以对多个“-”和“?”执行此操作。也**

![输出](../Images/edaa033106e5ddc0428ee80e0a2497b9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:06:44.410

使用`String.split()`方法

```
String str = "Sams – like costco";
    String str1 = "Jecy penny ? like sears";

    String[] arr = str.split("–");
    String arr1[] = str1.split("\\?");
    System.out.println(arr[0]);
    System.out.println(arr1[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:07:13.360

我假设您要删除or`"like"`之后的单词和以下单词...`"-"``"?"`

以下是您如何在一行中执行此操作：

```
String output = input.replaceAll( "(?i)[-?]\\s*like\\s+\\b.+?\\b", "" ); 
```

下面是一些测试代码：

```
public static void main( String[] args ) {
    String input = "Sams - like costco Jecy penny ? like sears";
    String output = input.replaceAll( "(?i)[-?]\\s*like\\s+\\b.+?\\b", "" );
    System.out.println( output );
} 
```

输出：

```
Sams  Jecy penny 
```

# asp-classic - IIS7.5 问题上的 ASP 经典导致响应标头出现在正文中

> ID：12000525
> 
> 赞同：1
> 
> 时间：2012-08-17T05:59:40.687
> 
> 标签：asp-classic, iis-7.5

我最近在 Windows 2008 R2 上将一个经典的 ASP Web 应用程序从 IIS 6 移到了 IIS 7.5。这个网站在 IIS 6 上运行了 4 年多。在大多数情况下，该站点在 IIS 7.5 上运行良好，但是，当您加载页面时，有时会发生浏览器未正确处理响应的情况。结果，实际的响应标头在响应正文中返回，在`<html>`标记之前或标记之后`</html>`。当响应位于标记之前的顶部时`<html>`，最终用户可以在浏览器中看到它。

标头位于标签上方的示例响应`<html>`：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 9714
Content-Type: text/html
Server: Microsoft-IIS/7.5
P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"
Set-Cookie: CSB=UserType=3&Client=805157&FNAME=John+Doe&CAMS=False&Client%5FUser%5FMode=Online&Session=650680780&User=1&LastViewed=https%3A%2F%2Fsite%2Edomain%2Ecom%2Fcsb%2Fclient%2Fdefault%2Easp%3FClient%3D123456%26PBAT%3D654321%26BAT%3D654321&Username=jjd; path=/
X-Powered-By: ASP.NET
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
        <title>some page</title>
        <script>...</script>
    </head>
    <body>
    </body>
</html> 
```

响应标头的内容按字面意思呈现在浏览器的屏幕上。并非每个请求都会出现此问题。我已经成功地在 IE 和 Chrome 中重现了这个问题，但它是随机的，所以我一直在努力寻找根本原因。

有时标头会打印在`</html>`标签下方，并且不会在浏览器中呈现。

IIS 或 ASP 没有引发错误。我发现[了这一点](http://learn.iis.net/page.aspx/565/using-failed-request-tracing-to-troubleshoot-classic-asp-errors/)，并尝试在 IIS 中使用跟踪失败的请求模块，但它没有帮助，因为请求实际上并没有失败，所以没有什么可跟踪的。

我试过在 Fiddler 中查看流量，但我得到的只是响应大小大于标头声明的警告，这是因为实际的响应标头文本与响应正文一起返回。

服务器正在运行 Windows 防火墙和 eset 防病毒软件 - 但两者也在旧的 IIS 6 机器上运行。

在配置 IIS 方面，我已经完成了人们推荐的运行经典 ASP 的所有基础知识。

在 IIS 配置方面，我不是初学者，但这是我真正使用的唯一 ASP 站点，我要做的就是让它在新设置上正常运行。

我被卡住了，有没有人以前见过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:55:16.270

事实证明，这是一个 ISAPI 过滤器的问题，该过滤器是由我们安装的存在错误的 Web 应用程序防火墙引入的。尽管我们在禁用 ISAPI 过滤器的情况下进行了测试，但事实证明我们必须完全删除 ISAPI 才能发现问题。供应商已经给了我们一个补丁来修复这个错误。谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:22:43.067

试试这个：

```
Response.Buffer=True 
```

请让我知道这对你有没有用...

了解更多信息。关于 Response.Buffer 见[http://www.w3schools.com/asp/met_clear.asp](http://www.w3schools.com/asp/met_clear.asp)

或尝试以下代码之一。（一个一个看他们是否有效）

```
Response.Clear()
Response.ClearHeaders()
Response.Flush()
Response.End()
Response.AddHeader "Content-Length", "838100" 
```

祝你好运...

# visual-studio-2010 - qt 头文件与 2010 中的编译错误

> ID：12000527
> 
> 赞同：1
> 
> 时间：2012-08-17T06:00:18.227
> 
> 标签：visual-studio-2010, qt

我正在尝试用 cppunit 测试我的 qt 项目。测试项目使用 MFC。我正在使用 Visual Studio 2010。

我已经包含了 qt 库、dll 并在项目设置中进行了其他更改，例如添加预处理器定义来编译我想要测试的 cpp 文件。但是当我编译这个cpp文件时，我得到了很多语法错误，位于qt头文件中。编译输出如下：

```
1>------ Build started: Project: my_tests, Configuration: Debug Win32 ------
1>cl : Command line warning D9025: overriding '/ZI' with '/Zi'
1>cl : Command line warning D9025: overriding '/GS' with '/GS-'
1>cl : Command line warning D9025: overriding '/Zc:wchar_t' with '/Zc:wchar_t-'
1>  CSetting.cpp
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qiodevice.h(247): error C2143: syntax error : missing ')' before 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qiodevice.h(247): error C2143: syntax error : missing ';' before 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qiodevice.h(247): error C2805: binary 'operator <<' has too few parameters
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qiodevice.h(247): error C2059: syntax error : ')'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2143: syntax error : missing ')' before 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2143: syntax error : missing ';' before 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2805: binary 'operator <<' has too few parameters
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2988: unrecognizable template declaration/definition
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2059: syntax error : 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2065: 'T' : undeclared identifier
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(160): error C2059: syntax error : ')'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(178): error C2065: 'T' : undeclared identifier
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(180): error C2143: syntax error : missing ';' before '{'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(180): error C2447: '{' : missing function header (old-style formal list?)
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(190): error C2143: syntax error : missing ')' before 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(190): error C2143: syntax error : missing ';' before 'constant'
1>c:\qt\4.8.2\include\qtcore\../../src/corelib/io/qdebug.h(190): fatal error C1903: unable to recover from previous error(s); stopping compilation 
```

请帮我解决这些错误..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T19:52:11.800

You must be using QT 4.8.x or older. All version before QT 5.x are compiled with

```
/Zc:wchar_t- 
```

(it means: DO NOT treat WChar_t as built in type) which is not compatible with MFC, BOOST or CUDA libraries. You need to switch to QT 5.x in which the flag changed to

```
/Zc:wchar_t 
```

(without "minus" on the end) - it is compiled this way (they considered this as a flaw).

Or compile older version with /Zc:wchar_t, by changing it in source file:

```
QTSRC\mkspecs\win32-msvc2010\qmake.conf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:31:58.273

我只能猜测，但是如果您在类定义之后缺少最后一个分号，或者在任何时候缺少右括号，您有时会遇到此类错误。

```
class XXX
{
};  // <- this one could be missing 
```

在您的 CSettings.cpp 中，检查您在 QIODevice 或 QDebug 之前直接包含的文件。这通常是错误的类（可能是 CSettings.h）

# javascript - 调用 foo() 后的 x 和 y 值是多少？

> ID：12000529
> 
> 赞同：-1
> 
> 时间：2012-08-17T06:00:24.550
> 
> 标签：javascript

```
var x = 'hello';
var x = 'world';

function foo(){
    var y = x = 'hello from foo';
}
foo(); 
```

是 x = '来自 foo 的你好'，y = '来自 foo 的你好'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:02:35.800

使用您的代码，`x`is `'hello from foo'`，`y`is `undefined`。

在`foo`中，你先赋值`'hello from foo'`给全局变量`x`，然后再赋值`x`给局部变量`y`。

# android - 具有三个活动的广播接收器

> ID：12000531
> 
> 赞同：-2
> 
> 时间：2012-08-17T06:00:27.843
> 
> 标签：android

我有三个活动都注册到同一个广播接收器。哪个活动将获得第一个广播接收器？任何源代码片段都将有助于解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:10:05.873

broadcastreceiver 将随机接收正常广播。如果您希望您的广播接收器按顺序接收广播，请使用 AndroidSDK 提供的有序广播。去谷歌上查询。

# ruby-on-rails-3 - 在不影响现有路线的情况下更改拐点 -Rails

> ID：12000532
> 
> 赞同：1
> 
> 时间：2012-08-17T06:00:34.937
> 
> 标签：ruby-on-rails-3

我有一个 rails3 应用程序。我发现了一个问题，即 rails 对我的一个模型创建了不正确的单数化。

```
rails generate model tradie 
```

产生传统（单数）和（传统）复数。

我已经通过添加变形来解决这个问题。

config/initializers/inflection.rb

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'tradie', 'tradies'
end 
```

现在我的路线已经从

new_trady_path 到 new_tradie_path

打破我现有的观点。

我可以覆盖保留 trady_path 的路线，这样我就不需要遍历并更新我的所有视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:17:20.693

将其添加到您的 app/helpers/application_helper.rb

```
def new_trady_path
  new_tradie_path
end 
```

这会将这个方法添加到您的所有视图中，您可以使用新方法来获取路径。

或者，我会做

```
find app/views/ -print | xargs sed -i 's/new_trady_path/new_tradie_path/g' 
```

或类似的。

# wpf - 在 WPF 中按下垂直滚动条向下重复按钮时，ComboBoxItem 会突出显示

> ID：12000536
> 
> 赞同：1
> 
> 时间：2012-08-17T06:00:54.783
> 
> 标签：wpf, combobox

我有 ComboBox，它是绑定到集合的数据。

我已经自定义了 ScrollViewer 的垂直滚动条，它将位于中心而不是内容呈现器的正常右侧。它工作正常。

我为 IsHighlighted 触发器定制了样式。

问题：如果我按下向下重复按钮，它会向下，这是意料之中的，但即使我禁用向下重复按钮，按下向下重复按钮也会突出显示该项目。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:26:28.147

我不完全了解布局，屏幕截图或示意图会有所帮助。

我的猜测是您使用“鼠标悬停”而不是“鼠标直接悬停”属性来确定鼠标下方的元素，因此有多个元素响应，但这确实是在黑暗中拍摄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:49:24.630

实际上问题出在 ComboBox 的 ControlTemplate 中。

在 ComboBox 的控件模板中我使用了 ScrollViewer，在 ScrollViewer 中我使用了 StackPanel。这就是问题所在。

后来我改成ItemPresenter，现在它工作正常。

# mysql - 根据孙子显示父计数

> ID：12000537
> 
> 赞同：1
> 
> 时间：2012-08-17T06:00:57.530
> 
> 标签：mysql

我有两张桌子

```
Table1 : Categories , 
Columns : id , parent_id , name 
Table2 : products ,   
Columns : id , product_name , category_id , subcategory_id , sale_wanted 
```

这是详细信息
一个类别可以有多个子类别ID。Parent id 0 表示它是一个类别，而 parent id != 0 表示它是一个子类别。现在每个产品都与一个子类别相关。我需要显示与每个类别相关的类别名称和子类别总数。sale 0 表示该产品正在销售，1 表示它是必需的。现在我需要这个。
1.显示与该类别相关的产品在售的每个类别的所有类别和子类别的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:28:40.003

问题在于您的结构是递归的。我认为您可以搜索有关区间表示的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:47:03.680

好吧，我找到了这个解决方案

```
select 
    dc.category_id,
    dc.name ,
    count(ldc.name) as total
from default_category as dc
inner join default_category as ldc on ldc.parent_id= dc.category_id 
inner join(select * from default_products where sale_wanted = 1) as dp on dp.subcategory_id = ldc.category_id
where dc.parent_id = 0
group by dc.category_id 
```

这很好用。

# php - 存储密码的正确代码过程 在 MYSQL 中保护密码

> ID：12000541
> 
> 赞同：5
> 
> 时间：2012-08-17T06:01:04.647
> 
> 标签：php, mysql, codeigniter, passwords, password-protection

所以目前我的代码正在使用一个标准`sha1`来散列数据库实现的密码。

有什么更好的、更安全的密码存储方式？ **也许是 MD5（是的，我在开玩笑）**

例如，我使用 Codeigniter 作为我的框架，加密密码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:18:44.323

我会这样做。

```
salt = For each user generate a random seed with a random length. 

iterations = Select a random number

while(iterations  != 0)  {

hashed_password = hash_function(password.salt) . salt;    iterations-- } 
```

在密码字段中保存它们，如下所示：

```
hashed_password:salt:hash_function:iterations. 
```

并在登录时使用新密码结合盐、hash_function 和迭代对其进行散列并将结果与​​ hashed_pa​​ssword 进行比较。

当然，您可以使用多个哈希函数来喜欢 sha_x(md5(salt.password).salt).salt 或任何您想要的东西，但请确保以某种方式保存它以便在登录时进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:48:59.643

这个库非常好：[http](http://www.openwall.com/phpass/) ://www.openwall.com/phpass/ 它使用 crypt 方法和各种算法，也有它自己的基于 md5 的但有很多迭代和盐，它是“安全的”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:46:54.527

你真的应该使用**bcrypt**来散列你的密码，它是专门为散列密码而设计的。

密码的哈希函数应该很**慢**（需要一些计算时间）。大多数哈希算法（如 SHA-1 和 MD5 甚至 SHA-256）都被设计为速度很快，但这使得它很容易成为暴力攻击的目标。

不要害怕使用 bcrypt！它不仅适用于高安全性站点，而且使用起来就像使用 md5 哈希一样简单。建议使用像[phpass](http://www.openwall.com/phpass/)这样完善的库，如果你想了解它的工作原理，可以阅读这篇[文章](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)，我试图解释最重要的点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:07:16.740

[SHA1 在 2005 年被破坏](http://www.schneier.com/blog/archives/2005/02/sha1_broken.html)

> 2005 年 2 月 15 日
> 
> **SHA-1 损坏**
> 
> SHA-1 已损坏。不是减少轮次的版本。不是简化版。真实的东西。
> 
> Xiaoyun Wang、Yiqun Lisa Yin 和 Hongbo Yu（主要来自中国山东大学）的研究团队一直在悄悄地传播一篇描述他们结果的论文：2* *69 哈希运算中完整 SHA-1 中的碰撞，远少于*基于哈希长度*的 2 * 80 次操作的蛮力攻击。*
> 
> 2**39 次操作中 SHA-0 中的冲突。
> 
> 2**33 次操作中 58 轮 SHA-1 的碰撞。

看看这个[比较列表](http://en.wikipedia.org/wiki/Comparison_of_cryptographic_hash_functions)。

# html - 如何仅从 HTML 表格中提取文本并忽略标签？

> ID：12000552
> 
> 赞同：1
> 
> 时间：2012-08-17T06:02:53.603
> 
> 标签：html, regex, perl

我有带有 HTML 表格的文档。有些单元格只有数字。其他单元格有数字和单词。

有没有办法只保留有单词的单元格的内容而不保留只有数字的单元格的内容？

是否有任何人都知道我可以用来执行此操作的模块？或者，无论如何我可以使用正则表达式吗？

```
<table>
<tr>
<td>WORDS WORDS WORDS WORDS WORDS WORDS 123</td>
<td> 789</td>
</tr>
<tr>
<td> 123 </td>
<td>WORDS WORDS</td>
</tr>
</table> 
```

我对 perl 还是很陌生，所以如果它很简单，请原谅我的问题。此外，我已经被警告过使用正则表达式解析 HTML 文本的潜在问题。

非常感谢！

最后，顺便说一句，我将使用一个模块来杀死所有的 HTML 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:16:36.510

正如您已经说过的，不应使用正则表达式解析 HTML。像这样的专门解析模块[`HTML::Parser`](https://metacpan.org/module/HTML%3a%3aParser)会有所帮助：

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::Parser;

my $p = HTML::Parser->new( 'text_h' => [ \&text_handler, 'dtext' ] );
$p->parse_file(\*DATA);

sub text_handler {
    my $text = shift;
    $text =~ s/^\s*|\s*$//g;         # Trim leading and trailing whitespaces
    return if !$text || $text =~ /^[\d\s]+$/;

    print "$text\n";
}

__DATA__
<table>
<tr>
<td>WORDS WORDS WORDS WORDS WORDS WORDS 123</td>
<td> 789 558 </td>
</tr>
<tr>
<td> 123 </td>
<td>WORDS WORDS</td>
</tr>
</table> 
```

输出：

```
WORDS WORDS WORDS WORDS WORDS WORDS 123
WORDS WORDS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:27:55.430

您可以使用几个模块来执行此操作，我会[`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)自己去。

```
#!/usr/bin/env perl

use v5.12;
use HTML::TreeBuilder::XPath;

my $tree = HTML::TreeBuilder::XPath->new;
$tree->parse_file("data.html");

my @cells = $tree->findnodes('//td');
foreach my $cell (@cells) {
    if ($cell->as_text =~ /^[0-9 ]+$/) {
        $cell->delete_content;
    }
}
print $tree->as_HTML; 
```

使用的 XPath 引擎应该支持允许正则表达式的 XPath 扩展（这将允许我们消除下面循环中的测试）。不过，我的 XPath 能力无法在我现在可用的时间内让它工作。

```
#my @cells = $tree->findnodes( '//td[text() =~ /^[0-9 ]$/')->[0]; 
```

# c# - 异步套接字客户端设计

> ID：12000555
> 
> 赞同：0
> 
> 时间：2012-08-17T06:03:24.700
> 
> 标签：c#, sockets, asynchronous

全部，

有以下问题。首先，这是我的代码：

```
class InternetConnector
{
    private static ManualResetEvent receiveDone = new ManualResetEvent( false );
    public static ManualResetEvent processingDone = new ManualResetEvent( false );
    public static ConcurrentQueue<string> messages = new ConcurrentQueue<string>();
    public static bool Connected;

    public bool ReceiveMessage(Action<Socket> successHandler, Action<Exception> errorHandler)
    {
        bool receive = false;
        ClientStateObject obj = new ClientStateObject();
        obj.server = client;
        var connectionData = new ConnectionData
        {
            ErrorHandler = errorHandler,
            SuccessHandler = successHandler,
            Socket = client,
            clientObj = obj
        };
        if (Connected)
        {
            client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
            receive = true;
            receiveDone.WaitOne();
        }
        return receive;
    }

    private static void ReceiveCallback(IAsyncResult ar)
    {
        ConnectionData connectionData = new ConnectionData();
        bool complete = false;
        try
        {
            connectionData = (ConnectionData)ar.AsyncState;
            Socket client = connectionData.Socket;
            int num = client.EndReceive(ar);
            {
                connectionData.clientObj.stringBuffer.Append(Encoding.ASCII.GetString(connectionData.clientObj.buffer, 0, num));
                string response = connectionData.clientObj.stringBuffer.ToString();
                if (response.EndsWith("&"))
                    complete = true;
                string[] msgs = response.Split('&');
                int j = 0;
                if (!complete)
                    j++;
                for (int i = 0; i < msgs.Count() - j; i++)
                {
                    string sts = msgs[i];
                    if (i == 0 && receivingMessage != String.Empty)
                    {
                        sts = receivingMessage + sts;
                        messages.Enqueue(sts + "&" );
                        receivingMessage = String.Empty;
                    }
                    else
                        messages.Enqueue(sts + "&");
                }
                if (!complete)
                    receivingMessage += msgs[msgs.Count() - 1];
                else
                    receivingMessage = String.Empty;
                receiveDone.Set();
                if (connectionData.SuccessHandler != null)
                {
                    connectionData.SuccessHandler(client);
                    processingDone.WaitOne();
                    client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
                }
            }
        }
        catch (Exception e)
        {
            if (connectionData.ErrorHandler != null)
                connectionData.ErrorHandler(e);
        }
    }
} 
```

这是成功处理程序：

```
public partial class Form1 : Form
{
    private void AsyncSuccessHandler(Socket socket)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new Action( () => AsyncSuccessHandler( socket ) ));
            return;
        }
        if (InternetConnector.messages.Count() == 0)
        {
            status.Text = "Signals Receiver: Connected";
            status.ForeColor = Color.Green;
            startStop.Text = "Stop";
            isRunning = true;
            create.Enabled = true;
            SetGUIColorsAndValues();
            client.SendMessageToConnector("First Signal Pass4&");
            client.ReceiveMessage(AsyncSuccessHandler, AsyncErrorHandler);
        }
        else
        {
            SetGUIColorsAndValues();
            GUIChangeOnConnection();
            InternetConnector.processingDone.Set();
        }
    }

    private void GUIChangeOnConnection()
    {
        for( int i = 0; i < InternetConnector.messages.Count; i++ )
        {
            string message;
            InternetConnector.messages.TryDequeu( out message );
            // process message
        }
    }
} 
```

问题：我需要不断地从服务器读取数据并在 GUI 中显示它们。我还需要 GUI 来响应按钮点击。当 n-1 次读取迭代已完成处理并且我的代码中的并发队列对象为空时，我还需要启动 n 次读取迭代。

但是通过调试器中的代码，我可以看到读取回调中的 BeginReceive() 调用不会等到成功处理程序结束并且队列不为空。

我错过了什么？有没有更好的方法来实现这一目标？

我也知道 SignalR 库，但在这个桥上我不想使用任何 3rd 方库。

对此问题的任何帮助表示赞赏。

谢谢你。

[编辑]

我是否正确理解 Amit 的回复：

```
class InternetConnector
{
    private static ManualResetEvent processingDone = new ManualResetEvent( false );

    private static void ReceiveCallback(IAsyncResult ar)
    {
        ConnectionData connectionData = new ConnectionData();
        bool complete = false;
        try
        {
            connectionData = (ConnectionData)ar.AsyncState;
            Socket client = connectionData.Socket;
            int num = client.EndReceive(ar);
            {
                connectionData.clientObj.stringBuffer.Append(Encoding.ASCII.GetString(connectionData.clientObj.buffer, 0, num));
                string response = connectionData.clientObj.stringBuffer.ToString();
                if (response.EndsWith("&"))
                    complete = true;
                string[] msgs = response.Split('&');
                int j = 0;
                if (!complete)
                    j++;
                for (int i = 0; i < msgs.Count() - j; i++)
                {
                    string sts = msgs[i];
                    if (i == 0 && receivingMessage != String.Empty)
                    {
                        sts = receivingMessage + sts;
                        messages.Enqueue(sts + "&" );
                        receivingMessage = String.Empty;
                    }
                    else
                        messages.Enqueue(sts + "&");
                }
                if (!complete)
                    receivingMessage += msgs[msgs.Count() - 1];
                else
                    receivingMessage = String.Empty;
                receiveDone.Set();
                if (connectionData.SuccessHandler != null)
                {
                    processingDone.WaitOne();
                    connectionData.SuccessHandler(client);
                    processingDone.Set();
                    client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
                }
            }
        }
        catch (Exception e)
        {
            if (connectionData.ErrorHandler != null)
                connectionData.ErrorHandler(e);
        }
    }
} 
```

?

[/EDIT] [EDIT 2] 请查看更新的代码。当我在 GUIChangeOnConnection() 的最后设置断点时 - 与“}”行 - 我看到队列确实有一些项目。同时，我将尝试更改 ManualResetEvent。[/编辑 2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:57:52.537

如果我正确理解了这个问题，那么您指的是以下代码点的问题：

```
if (connectionData.SuccessHandler != null)
{
    connectionData.SuccessHandler(client);
    client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
} 
```

如果您的意图是仅在完成处理以前的数据时才访问服务器，那么`SuccessHandler`必须是阻塞的（从您的问题陈述中也很明显）。

现在看看你的以下几行`SuccessHandler`

```
if (InvokeRequired)
{
    BeginInvoke(new Action( () => AsyncSuccessHandler( socket ) ));
    return;
} 
```

上面的代码推迟了你的执行，`SuccessHandler`以便 UI 保持响应。或者换句话说，你`SuccessHandler`没有阻塞。

由于您正在从 更新 GUI `SuccessHandler`，因此从 UI 线程运行它也很重要（它现在正在正确执行）。

因此，为了进行阻塞，您可以使用机制`SuccessHandler`使以下代码本身在 UI 线程上运行`InvokeRequired`

```
if (connectionData.SuccessHandler != null)
{
    connectionData.SuccessHandler(client);
    client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
} 
```

由于`client.BeginReceive`是异步的，它不会阻塞 UI 线程，而且您无论如何都想`SuccessHandler`在 UI 线程上运行..

如果您无权访问 中的表单`ReceiveCallback`，则可以使用等待句柄来阻止对`client.BeginReceive`直到`SuccessHandler`完成的调用。

```
private static AutoResetEvent _processingDone = new AutoResetEvent( false );
//Introduce an internal property ProcessingDone to access _processingDone 
//This should be in a class which you can access both from 'Form1' and the class containing ReceiveCallBack

//In ReceiveCallBack
if (connectionData.SuccessHandler != null)
{
    connectionData.SuccessHandler(client);
    ProcessingDone.WaitOne();
    client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
} 
```

ProcessingDone.Set() 必须`SuccessHandler`在您可以确定`SuccessHandler`已完成并`client.BeginReceive`需要调用的点从内部完成。这是你的逻辑内部的。从您共享的代码中，很难确定需要放置 ProcessingDone.Set() 的位置。

# java - 如何链接 JSP、servlet 和 Java 视图 bean？

> ID：12000557
> 
> 赞同：1
> 
> 时间：2012-08-17T06:03:36.870
> 
> 标签：java, jsp, servlets

如何链接 JSP、servlet 和 Java 视图 bean？我不想在 JSP 中有任何脚本。我如何要求我的 JSP 调用 servlet 来设置隐式请求和响应对象，然后在 jsp 上显示来自视图 bean 的属性。

我需要将请求和响应对象从 jsp 传递到 servlet，然后我想将视图 bean 中定义的属性显示到 JSP 页面。

JSP -> Servlet -> 查看 Bean -> JSP

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:31:25.477

无需向 bean/model 传递请求*和**响应*，*因为*您的模型类是在或中实例化的。*`JSPs``Servlets`*

 *您必须选择*以 servlet 为中心的*方法。

ViewBean.java

* * *

```
package in.abc.model;

public class Employee{
     private Integer id;
     private String  name;
     public Employee() { id=0; name="";}
     public Employee(Integer id, String name) { this.id=id; this.name=name;}
     public Integer getId()  { return id;}
     public String getName() { return name;}
     public void setId(Integer id) { this.id=id;}
     public void setName(String name) { this.name=name;}
} 
```

ViewServlet.java

* * *

```
package in.abc.servlets;

@WebServlet(name = "ViewServlet", urlPatterns = {"/view"})
public class ViewServlet extends HttpServlet{
  public doGet(HttpServletRequest request,
               HttpServletResponse response) 
                 throws ServletException, IOException {

         //Instantiate the model 
         Employee emp=new Employee(10,"Mr.A");

         //Insert "model" object to request
         request.setAttribute("emp",emp);

         //forward the request to view.jsp
         request.getRequestDispatcher("/view.jsp").
                  forward(request,response);
  }

 public doPost(HttpServletRequest request,
               HttpServletResponse response) 
                 throws ServletException, IOException {

         //Instantiate the model 
         Employee emp=new Employee();

         //Read the request
         try{
             emp.setId(Integer.parseInt(request.getParameter("id"));
         }catch(Exception ex) {}
         emp.setName(request.getParameter("name"));

         //Insert "model" object to request
         request.setAttribute("emp",emp);

         //forward the request to view.jsp
         request.getRequestDispatcher("/view.jsp").
                  forward(request,response);
  }
} 
```

视图.jsp

* * *

```
<h3>Employee info</h3>
<p>ID : ${emp.id}</p>
<p>Name : ${emp.name}</p>

<form method="post" action="view">
   <br/> <input type="text" name="id"/> 
   <br/> <input type="text" name="name"/>
   <br/> <input type="submit"/>
</form> 
```

索引.jsp

* * *

```
<h1>
  <a href="view">View Employee details</a>
</h1> 
```*

# php - mapserver 无法打开 .map 文件

> ID：12000558
> 
> 赞同：-1
> 
> 时间：2012-08-17T06:03:56.377
> 
> 标签：php, html, qgis, mapserver

```
Warning: [MapServer Error]: msLoadMap(): in D:\ms4w\apps\seri\htdocss\common\wrapper\map_session.php on line 215

Warning: Failed to open map file D:\ms4w\apps\seri\htdocs/../map/bandi.map in D:\ms4w\apps\seri\htdocss\common\wrapper\map_session.php on line 215

Notice: Trying to get property of non-object in D:\ms4w\apps\seri\htdocss\widgets\KeyMapDHTML\KeyMapDHTML.widget.php on line 115

Fatal error: Call to a member function set() on a non-object in D:\ms4w\apps\seri\htdocss\widgets\KeyMapDHTML\KeyMapDHTML.widget.php on line 115 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T06:07:17.163

(1) 确保您的 bandi.map 存在于路径 D:\ms4w\apps\seri\map/bandi.map 因为那是 php Mapscript 正在寻找您的地图文件的地方。

(2) 如果对第 (1) 点的回答为“是”，那么请仔细检查您的 mapfile 的语法是否不会导致问题，这可以通过转到您的浏览器并将 URL 设置为`http://localhost/cgi-bin/mapserv.exe?map=D:\ms4w\apps\seri\map\bandi.map`.... 查看它返回的消息来完成在您的浏览器窗口中。

# css - CSS 相对链接正在播放

> ID：12000561
> 
> 赞同：1
> 
> 时间：2012-08-17T06:04:14.967
> 
> 标签：css, background-image, relative-path

我正在尝试使用 css 中的相对链接包含背景图像。

我的树看起来像这样

```
/_css
/_css/gcrm.css
/_images
/_images/bg-grad1.gif 
```

我用来调用它的css是这样的

```
background-image: url(../_images/bg-grad1.gif); 
```

它在 Visual Web Developer 中按预期显示，但是当我将它放在网络上时，没有背景。当我在 Chrome 中检查元素时，这是链接文件

```
mysite.com/_css/../_images/bg-grad.gif 
```

不幸的是，我无法使用`/`根链接到它，因为我正在尝试设置 SSL，并且我的托管公司允许我们将其用作共享证书，以反映域树中第 1 级的站点。

我一定错过了一些非常简单的东西，但我不知道是什么让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:36:38.553

使用以下代码：

```
background-image: url(../../_images/bg-grad1.gif); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:42:33.630

关于文件结构，您的 url 看起来不错。假设这是您的文件结构：

```
/_css/
    ...
    gcrm.css
    ...

/_images/
    ...
    bg-grad1.gif
    ... 
```

从它实际上`..`在代码中输出 url 的事实来看，也许您需要将 url 括在引号中：

`background-image: url("../_images/bg-grad1.gif");`

# android - 如何在 ActionBar 中同时显示图标和动作标题？

> ID：12000562
> 
> 赞同：77
> 
> 时间：2012-08-17T06:04:14.687
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-ui

我需要在里面显示`icon`和`title`操作`ActionBar`。

我试过“ `withText`”选项，但没有效果。

![在此处输入图像描述](../Images/c3d2b61c1b437b6f998b75d0c526b70d.png)

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-05-25T22:49:22.083

如果有足够的空间， ' **always|withText** ' 将起作用，否则它只会放置图标。您可以通过旋转在手机上对其进行测试。

```
<item android:id="@id/menu_item"
android:title="text"
android:icon="@drawable/drawable_resource_name"
android:showAsAction="always|withText" /> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-17T06:37:35.353

您可以通过 2 种方式使用文本创建操作：

**1-来自 XML：**

```
<item android:id="@id/resource_name"
      android:title="text"
      android:icon="@drawable/drawable_resource_name"
      android:showAsAction="withText" /> 
```

膨胀菜单时，您应该调用，`getSupportMenuInflater()`因为您正在使用`ActionBarSherlock`.

**2-以编程方式：**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuItem item = menu.add(Menu.NONE, ID, POSITION, TEXT);
    item.setIcon(R.drawable.drawable_resource_name);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return true;
} 
```

确保您导入`com.actionbarsherlock.view.Menu`和`com.actionbarsherlock.view.MenuItem`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-05T17:12:41.603

对我有用的是使用' **always|withText** '。如果您有很多菜单，请考虑使用“ifRoom”而不是“always”。

```
<item android:id="@id/resource_name"
android:title="text"
android:icon="@drawable/drawable_resource_name"
android:showAsAction="always|withText" /> 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-09-02T10:06:49.367

我找到的解决方案是使用自定义操作布局：Here is XML for menu。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:Eventapp="http://schemas.android.com/apk/res-auto">
<!-- This is a comment. -->
    <item
        android:id="@+id/action_create"
        android:actionLayout="@layout/action_view_details_layout"
        android:orderInCategory="50"
        android:showAsAction = "always"/>
</menu> 
```

布局是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<TextView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="5dp"
    android:gravity="center"
    android:text="@string/create"/>

<ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:gravity="center"
    android:src="@drawable/ic_action_v"/>

</LinearLayout> 
```

这将同时显示图标和文本。

要获取 clickitem 片段或活动：

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    //super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.menu_details_fragment, menu);
    View view = menu.findItem(R.id.action_create).getActionView();
    view.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(getActivity(), "Clicked", Toast.LENGTH_SHORT).show();
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-14T14:44:51.620

如果 2017 年的任何 1 想知道如何以编程方式执行此操作，那么有一种我在答案中看不到的方法

```
.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-13T14:51:09.300

您可以在工具栏中添加按钮

```
<android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        app:popupTheme="@style/AppTheme.PopupOverlay"
        app:title="title">

        <Button
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_marginRight="16dp"
            android:background="@color/transparent"
            android:drawableRight="@drawable/ic_your_icon"
            android:drawableTint="@drawable/btn_selector"
            android:text="@string/sort_by_credit"
            android:textColor="@drawable/btn_selector"
            />

    </android.support.v7.widget.Toolbar> 
```

在drawable中创建文件**btn_selector.xml**

```
<?xml version="1.0" encoding="utf-8" ?> 
```

`<selector xmlns:android="http://schemas.android.com/apk/res/android">`

```
<item
    android:state_selected="true"
    android:color="@color/white"
    />
<item
    android:color="@color/white_30_opacity"
    /> 
```

**爪哇：**

私有布尔 isSelect = false;

按钮的 OnClickListener：

```
private void myClick() {
    if (!isSelect) {
       //**your code**//
        isSelect = true;
    } else {//**your code**//
        isSelect = false;
    }
    sort.setSelected(isSelect);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-10T19:24:33.843

尝试先将 TextView 添加到菜单栏，然后​​使用`setCompoundDrawables()`将图像放置在您想要的任何一侧。最后将点击活动绑定到文本视图。

```
MenuItem item = menu.add(Menu.NONE, R.id.menu_item_save, 10, R.string.save);
item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS|MenuItem.SHOW_AS_ACTION_WITH_TEXT);
TextView textBtn = getTextButton(btn_title, btn_image);
item.setActionView(textBtn);
textBtn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
           // your selector here   }
    }); 
```

您可以在这里自定义所有内容：

```
public TextView getTextButton (String btn_title, Drawable btn_image) {
    TextView textBtn = new TextView(this);
    textBtn.setText(btn_title);
    textBtn.setTextColor(Color.WHITE);
    textBtn.setTextSize(18);
    textBtn.setTypeface(Typeface.create("sans-serif-light", Typeface.BOLD));
    textBtn.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
    Drawable img = btn_image;
    img.setBounds(0, 0, 30, 30);
    textBtn.setCompoundDrawables(null, null, img, null); 
    // left,top,right,bottom. In this case icon is right to the text

    return textBtn;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-16T19:20:42.523

你们中的一些人有很好的答案，但我发现了一些额外的东西。如果您想以编程方式创建带有某些 SubMenu 的 MenuItem：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        SubMenu subMenu = menu.addSubMenu(0, Menu.NONE, 0, "Menu title");
        subMenu.getItem().setIcon(R.drawable.ic_action_child);
        subMenu.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        subMenu.add(0, Menu.NONE, 0, "Subitem 1");
        subMenu.add(0, Menu.NONE, 1, "Subitem 2");
        subMenu.add(0, Menu.NONE, 2, "Subitem 3");

        return true;
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-07-12T07:32:41.053

使用 app:showAsAction="always|withText"。我使用的是 Android 4.1.1，但无论如何它都应该适用。我的看起来像下面

```
<item
        android:id="@+id/action_sent_current_data"
        android:icon="@drawable/ic_upload_cloud"
        android:orderInCategory="100"
        android:title="@string/action_sent_current_data"
        app:showAsAction="always|withText"/> 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-08-17T06:12:15.440

按着这些次序：

1.  在 Java 代码中添加 Action Bar 实例`final ActionBar actionBar = getActionBar();`
2.  启用主页显示选项 `actionBar.setDisplayShowHomeEnabled(false);`
3.  在相应活动的清单文件中添加以下代码 `android:logo=@drawable/logo and android:label="@string/actionbar_text"`

我想这会对你有所帮助

# c - c：风格：就地改变变量

> ID：12000563
> 
> 赞同：1
> 
> 时间：2012-08-17T06:04:49.247
> 
> 标签：c, variables, coding-style, in-place

假设我们有一些类似的东西

```
int f(int n); 
```

……

```
do{
    int a = b;
    int b = f(a);
} 
```

有没有风险说

```
do{
    int b = f(b);
} 
```

相反，假设 a 没有在其他地方使用？做前者在风格上会更可取吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:28:24.713

重要的是要了解，您不是在此处“更改”任何变量，而只是更改名称的含义。

重要的概念称为[声明点](http://msdn.microsoft.com/en-us/library/179x7xb9%28v=vs.80%29.aspx)。

让我们看看你的例子：

```
int b = 42;
{ 
   int a = b; 
   int b = 23 * a;
   printf("%d\n", b);
}
printf("%d\n", b); 
```

或者

```
int b = 42;
{ 
   int b = 23 * b;
   printf("%d\n", b);
}
printf("%d\n", b); 
```

名称 b 引用两个对象，具体取决于您在代码中的位置，我们称它们为 b1 和 b2。这在案例 1 中并不令人惊讶：

```
int b1 = 42;
{ 
   int a = b1; 
   int b2 = 23 * a;
   printf("%d\n", b2);
} 
printf("%d\n", b1); 
```

由于在 C 中声明点*位于初始化器之前*，因此第二个示例的解析方式不同：

```
int b1 = 42;
{ 
   int b2 = 23 * b2; 
   printf("%d\n", b2);
} 
printf("%d\n", b1); 
```

请注意，这里 b1 和 b2 之间没有链接，您正在使用其自己的（未定义的）值初始化 b2。勤奋的编译器会对此发出警告，例如

```
x.c:7:13: warning: 'b' is used uninitialized in this function [-Wuninitialized] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:30:21.907

当编译器解析 C 代码时，它会填充一个符号表，该表包含有关所有不同符号的信息，符号是指标识符，例如您为变量、函数等命名的名称......

大多数 C 程序都是由嵌套范围构成的，全局 -> 函数 -> component_statements 等等，每个范围通常都有自己的符号表，因此编译器使用一堆符号表来跟踪所有内容，当查看变量时up 但未在当前符号表中定义它通过向上堆栈开始搜索，直到它到达全局或通常是最后一个表......但是一旦在当前范围内定义了一个条目，就会使条目“遮蔽”前一个.

这是一个简单的程序来说明。

```
#include <stdio.h> 
/* global accessable by most things ... */
int a = 5;
int main()
{ /* function scope */
    int a = 4; /* shadowing global */
    { /* nested scope within function scope */
        int b = a;
        int a = b; /* shadowing function  */
        printf("%i\n", a);
    }
    return 0;
 } 
```

如果您运行此程序，您会得到`4`预期结果，但是任何遵循您的代码的人都必须牢记，这与全局、函数 main`a`中的所有其他人都不同`a`……如果维护代码的程序员不是不知道这些事情或者你自己忘记了，那么你可能会有一些很难调试的微妙的运行时错误......

还要注意，如果你运行这个：

```
#include <stdio.h> 
/* global accessable by most things ... */
int a = 5;
int main()
{ /* function scope */
    int a = 4; /* shadowing global */
    { /* nested scope within function scope */            
        int a = a; /* shadowing function, but not actually accessing outer scope */
        printf("%i\n", a);
    }
    return 0;
 } 
```

你不会得到 4 但我的机器上有一些大的随机 int`1606422610`因为变量被分配给它本身只是影子，并且 c 不初始化变量。

# cakephp - CakePHP如何显示相关信息

> ID：12000566
> 
> 赞同：2
> 
> 时间：2012-08-17T06:04:59.700
> 
> 标签：cakephp

我的订单表包括客户字段，添加新订单时，从下拉列表中选择客户名称后，我希望在同一页面显示客户信息，例如客户表中的地址，电话号码

怎么做？提前致谢...

你能给我一个例子或相关链接吗？我对AJAX一无所知，不知道从哪里开始。

也许这个链接：[http://www.w3schools.com/ajax/ajax_database.asp](http://www.w3schools.com/ajax/ajax_database.asp)，但它使用 php 而不是 cakephp ......

示例中的代码是： xmlhttp.open("GET"," **getuser.php?q="+str** ,true); 我不知道如何将 customer_id(q=str) 传递给 orderscontroller/getuser 函数。需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:21:14.593

您可以使用[JsHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#jshelper)来实现您提到的相同功能。请在您的最后尝试，并提供一些原始代码，以便同行可以帮助您做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:38:42.757

你的代码应该是这样的

```
function showCustomer(str)
{
 var xmlhttp;
 if (str=="")
 {
   document.getElementById("divtoDisplayInfo").innerHTML="";
  return;
 }
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("divtoDisplayInfo").innerHTML=xmlhttp.responseText;
}
}
 xmlhttp.open("GET","/yoursite/controllername/action/str,true); //if you use redirect and windows environment
 xmlhttp.send();
} 
```

您应该期待该操作的视图，因此进行正常的蛋糕处理，在控制器中获取数据，渲染视图，如果有错误将操作自动渲染设置为 false。

但我只是建议你下载 Jquery 添加到你的 cakephp 框架这个简单的行

```
$("divToDisplayInfo's_ID").load("Controllername/action") 
```

解决你的问题。

# batch-file - 是他们的安全文件分机列表，我可以从我的电脑上删除

> ID：12000567
> 
> 赞同：-1
> 
> 时间：2012-08-17T06:05:00.797
> 
> 标签：batch-file

我刚给我儿子买了一台二手电脑，但上面有超过 28,000 个文件我已经知道像*.log，* .tmp 是他们的了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:08:40.997

如果您不是 100% 确定计算机的历史记录（即使您是），我**强烈**建议您格式化磁盘并从头开始重新安装 Windows。一台二手电脑可能有各种你不知道的恶意软件。而且，如果板载任何根工具包，您无论如何都不会在文件列表中看到它们。

即使没有恶意软件，一个干净安装的系统通常也会比一个刚刚移除一堆垃圾的系统运行得更好。

# iphone - 我怎样才能使它成为类的私有成员或方法，以便可以在静态库本身而不是在库外部访问它？

> ID：12000571
> 
> 赞同：4
> 
> 时间：2012-08-17T06:05:15.067
> 
> 标签：iphone, objective-c, ios, static-libraries

我想为objective-c中的以下类准备小型静态库：A类，B类，C类。我想将这些类包含在静态库中。现在 A 类可以访问 B 类或 C 类方法的公共成员。

现在，当我将上述库集成到其他项目中时，我准备了只能访问 A 类和 B 类而不是 C 类的 D 类。我该怎么做？

我的另一个疑问是假设 NSString *isValid 在 B 类中声明。

我希望可以从 A 类和 C 类访问上面的变量我的意思是库的包含文件可以访问上面的变量。

但是无法从外部库访问上面的变量。如何将其设为私有，以便可以在图书馆本身内部而不是在图书馆外部访问它？

感谢帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:47:12.827

您可以使公共方法仅对您的静态库可见，但在其外部不可见。

这是如何做到的。

1) 创建一个在你的库之外使用的头文件

```
#import <Foundation/Foundation.h>

@interface ClassA : NSObject 

@property(nonatomic,readwrite)BOOL publicProperty;

-(void)publicMethod;

@end 
```

2）创建一个仅由静态库内部使用的类别

```
#import "ClassA.h"

@interface ClassA (Internal)

@property(nonatomic,readwrite)BOOL privateProperty;

-(void)privateMethod;

@end 
```

**注意**将此文件命名为：“ClassA+Internal.h”

3) 在 .m 文件中再次声明你的私有属性和方法

```
#import "ClassA.h"

@interface ClassA ()

@property(nonatomic,readwrite)BOOL privateProperty;

-(void)privateMethod;

@end

@implementation ClassA

@synthesize publicProperty;
@synthesize privateProperty;

//...

@end 
```

**在静态库中使用私有属性和方法**

在您的 ClassB.m 文件中导入 ClassA 类别的头文件

```
#import "ClassB.h"
#import "ClassA.h"
#import "ClassA+Internal.h" 
```

现在您可以访问 ClassA 的私有属性和方法

**创建没有私有属性和方法的静态库**

创建静态库时，将“ClassA+Internal.h”类别头文件保留在“Build Phases”、“Copy Headers”的“private”或“project”头文件部分

这样，当您构建静态库时，外部将无法访问 ClassA+Internal.h 类别。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T07:10:48.033

据我所知，在 Obj-C 中没有办法像您需要的那样保护对公共成员的访问。一种常见的方法是不将方法和 ivars 包含在随静态库一起提供的头文件中。要自己编译库，您当然必须使用完整的私有标头。

请注意，这不适用于 Objective-C++，其中类结构必须在编译时为库的客户端所知。

# c# - 格式化ip地址范围

> ID：12000573
> 
> 赞同：0
> 
> 时间：2012-08-17T06:05:22.990
> 
> 标签：c#, asp.net, ipv6, ipv4

我不知道如何开始，所以我希望能指出正确的方向。假设我在 ipv4 或 ipv6 中有一个 iprange。

```
 1.0.32.0 - 1.0.63.255
   2620:0:860:: - 2620:0:860:ffff:ffff:ffff:ffff:ffff 
```

我想将其格式化为

```
 a.b.c.d/ee
   a:b:c:d:e:f:g:h:i/jj 
```

通过 C#。我不知道如何开始。是否有任何 c# 类可以将这些范围转换为给定格式。关于如何做到这一点的任何指示？

非常感谢。

# php - 寻找适用于 Windows 7 的 OAuth DLL（需要从 WAMP 服务器上的 PHP 使用）

> ID：12000575
> 
> 赞同：6
> 
> 时间：2012-08-17T06:05:48.190
> 
> 标签：php, windows-7, oauth, 64-bit, wamp

我已经为这个问题苦苦挣扎了好几个星期了，非常感谢任何帮助。

我需要一个与安装在 Windows 7（64 位）环境中的 WAMP 服务器一起使用的 OAuth 库。我想从 PHP 访问这个库。

[在http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)有 2 个可用于 Windows 的 OAuth 库（即 DLL），但它们都不适合我，因为它们只能在 32 位 Windows 环境中使用。

[http://in2.php.net/oauth](http://in2.php.net/oauth)中提到的更多指针也没有帮助，因为它们只谈论 UNIX 环境。

有人可以帮助我在 64 位 Windows 环境中使用 64 位版本的 OAuth 库吗？

谢谢一堆。苏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:45:01.980

我有几个建议：

*   如果“目标”架构不是 Windows 架构；为什么不直接使用相同的架构进行开发？因此，您将避免浪费大量时间来尝试在您的计算机上编译此 dll，不是吗？
*   如果目标是 Windows，您可能可以检查此处和那里提供的所有现有 PHP OAuth 类，例如：
    *   [https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)
    *   [http://framework.zend.com/manual/en/zend.oauth.introduction.html](http://framework.zend.com/manual/en/zend.oauth.introduction.html)

希望这可以帮助

问候

# iphone - 如何在 iOS 上整合社交媒体进行照片分享？

> ID：12000577
> 
> 赞同：1
> 
> 时间：2012-08-17T06:05:55.493
> 
> 标签：iphone, social-networking, photolibrary

我需要集成社交媒体以在我的应用程序中共享照片。我的应用程序将有一个带有一些图像的 UIImageView 和一个用于共享图像的按钮。一旦我点击按钮，我应该会得到安装在我的 iPhone 上的社交网络应用程序列表，并且我应该能够在选择其中任何一个时共享图像，如下图所示。

![在此处输入图像描述](../Images/d1d84ccc1aa97aaf7ce7c1f22f559890.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:33:47.857

试试 ShareKit ( [https://github.com/ShareKit](https://github.com/ShareKit) )

# asp.net-mvc - MissingManifestResourceException 在一台服务器上，而不是在其他服务器上

> ID：12000583
> 
> 赞同：2
> 
> 时间：2012-08-17T06:07:06.277
> 
> 标签：asp.net-mvc, iis-7

我一直在把头发拉出来。

我们的暂存服务器（Windows Server 2008 R2 Standard）最近停止了合作。更具体地说，当我们的 ASP.NET MVC 3 站点启动时，它给出了异常

> MissingManifestResourceException：找不到适合指定区域性或中性区域性的任何资源。确保“Resources.TranslatedUrl.resources”在编译时被正确嵌入或链接到程序集“App_GlobalResources”中，或者所有所需的附属程序集都是可加载的并且是完全签名的。

这意味着该站点正在启动，但在尝试使用 GlobalResources 注册我们的（自定义）可翻译路线时遇到错误。相同的代码库可以在我们的演示服务器、虚拟机服务器和 Visual Studio 的开发服务器上完美运行。我什至将代码库恢复到网站可以正常工作的时间点，但没有运气。这使我相信问题出在服务器本身或站点运行的 IIS 7 上。

问题是，没有人（据我所知）对 IIS 或服务器进行任何重新配置​​。我一直在将我们的 CI 从 CruiseControl.net 移动到 TeamCity，但编译和设置是在单独的服务器上完成的，一旦完成所有编译和配置，就会使用 Web Deploy 将文件移动到登台服务器。Web Deploy 是否有可能以某种方式改变了 IIS 或服务器的配置？

我想我们的托管服务提供商也有可能做出一些我不知道的改变，但这似乎不太可能。

有任何想法吗？我自己都摆脱了他们。

# javascript - 获取文件的完整路径

> ID：12000585
> 
> 赞同：0
> 
> 时间：2012-08-17T06:07:12.650
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3.1

我想上传多个文件，我有这样的形式：

**在视图中**

```
 = simple_form_for(@subcategory_image,:url => post_images_image_uploads_path(:domain_name => @domain_name), :html => { 
     %input{:multiple => "", :name => "files[]", :type => "file", :id => "files"}
     %button.btn.btn-primary.start{:type => "submit", :id => "submit"} 
```

**在控制器中**

```
 def post_images
     files = params[:files]

 end 
```

**如何获取图像或文件的完整路径？**

# c# - 使用正在运行的进程打开文件

> ID：12000591
> 
> 赞同：0
> 
> 时间：2012-08-17T06:07:42.837
> 
> 标签：c#

我正在制作一个可以打开自定义文档的应用程序。我将文档扩展名连接到应用程序（使用注册表），但是当我打开文档时，它总是以应用程序的新实例打开。

我想要一些可以打开运行当前进程的文档（如果存在）的逻辑。我不是指单个实例。它应该能够由多个实例运行。与 IE 或 chrome 一样，它应该能够在进程运行时使用 tab 打开 HTML 文件，但它也可以运行新实例。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:51:30.757

[这篇文章](http://blogs.microsoft.co.il/blogs/maxim/archive/2010/02/13/single-instance-application-manager.aspx)包含一个很好的描述（图片也是从那里拍摄的）。

该方法使用带有对象的[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)`EventWaitHandle`对象在进程之间传递消息（对象）（ . [Net Remoting](http://msdn.microsoft.com/en-us/library/kwdt6w2k(VS.71).aspx)）。
当应用程序启动时，它使用`CreateSingleInstance()`调用现有实例**或**将自己注册为单实例应用程序。

![流程图](../Images/01153ca5bb982980ce245bfea118661b.png)

```
public static bool CreateSingleInstance( string name, EventHandler<InstanceCallbackEventArgs> callback )
{
    EventWaitHandle eventWaitHandle = null;
    int curSessionId = System.Diagnostics.Process.GetCurrentProcess().SessionId;
    name += curSessionId;

    string eventName = string.Format( "{0}-{1}", Environment.MachineName, name );

    // If there is another instance
    InstanceProxy.IsFirstInstance = false;

    InstanceProxy.CommandLineArgs = Environment.GetCommandLineArgs();

    try
    {
        //try to open a handle with the eventName
        eventWaitHandle = EventWaitHandle.OpenExisting( eventName );
    }
    catch
    {
        InstanceProxy.IsFirstInstance = true;
    }

    if( InstanceProxy.IsFirstInstance )
    {
        eventWaitHandle = new EventWaitHandle( false, EventResetMode.AutoReset, eventName );

        // register wait handle for this instance (process)               
        ThreadPool.RegisterWaitForSingleObject( eventWaitHandle, WaitOrTimerCallback, callback, Timeout.Infinite, false );

        eventWaitHandle.Close();

        // register shared type (used to pass data between processes)          
        RegisterRemoteType( name );
    }
    else
    {
      // here will be the code for the second instance/
    }

    return InstanceProxy.IsFirstInstance;
}
private static void RegisterRemoteType( string uri )
{
    // register remote channel (net-pipes)
    var serverChannel = new IpcServerChannel( Environment.MachineName + uri );
    ChannelServices.RegisterChannel( serverChannel, true );

    // register shared type
    RemotingConfiguration.RegisterWellKnownServiceType(
        typeof( InstanceProxy ), uri, WellKnownObjectMode.Singleton );

    // close channel, on process exit
    Process process = Process.GetCurrentProcess();
    process.Exited += delegate
    {
        ChannelServices.UnregisterChannel( serverChannel );
    };
}
[Serializable]
[System.Security.Permissions.PermissionSet( System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust" )]
internal class InstanceProxy : MarshalByRefObject
{
    private static bool firstInstance;
    private static string[] arrCommandLineArgs;       
    public static bool IsFirstInstance
    {
        get
        {
            return firstInstance;
        }

        set
        {
            firstInstance = value;
        }
    }     
    public static string[] CommandLineArgs
    {
        get
        {
            return arrCommandLineArgs;
        }
        set
        {
            arrCommandLineArgs = value;
        }
    }

    public void SetCommandLineArgs( bool isFirstInstance, string[] commandLineArgs )
    {
        firstInstance = isFirstInstance;
        arrCommandLineArgs = commandLineArgs;
    }
}
public class InstanceCallbackEventArgs : EventArgs
{
    private  bool firstInstance;
    private  string[] arrCommandLineArgs;

    internal InstanceCallbackEventArgs( bool isFirstInstance, string[] commandLineArgs )
    {
        firstInstance = isFirstInstance;
        arrCommandLineArgs = commandLineArgs;
    }

    public bool IsFirstInstance
    {
        get
        {
            return firstInstance;
        }

        set
        {
            firstInstance = value;
        }
    }

    public string[] CommandLineArgs
    {
        get
        {
            return arrCommandLineArgs;
        }
        set
        {
            arrCommandLineArgs = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:06:00.417

这里有很多选择，其中一些是：

1.  尝试使用历史悠久的 DDE，但它仍然被 MS Office 等许多应用程序使用。DDE 命令在文件扩展名的打开命令上注册（`HKEY_CLASSES_ROOT\Excel.Sheet.8\shell\Open`例如）。如果应用程序尚未启动，则由操作系统启动，并提交 DDE 命令。如果启动，DDE 命令将提交给注册为 DDE 服务器的运行实例。

2.  当您的进程开始时，尝试创建一个具有预定义名称的 IpcChannel。如果您的进程使用文件参数启动，请通过 IpcChannel 将文件名传递给正在运行的进程。问题是只有一个进程可以创建同名的 IpcChannel。如果该进程退出，则其他进程将没有开放通道。

3.  每个进程都使用进程 ID 创建一个 IpcChannel。当您的进程以文件参数开头时，您枚举进程路径与您的路径相同的进程，然后使用 IpcChannel 连接到该进程（其中名称可以通过查看进程 id 获得），然后将文件名传递给它。

4.  枚举进程路径与您的路径相同的进程，并发送包含您的文件名的 WM_COPYDATA 消息。

# ruby-on-rails - 日期没有保存在 ruby on rails 中

> ID：12000596
> 
> 赞同：1
> 
> 时间：2012-08-17T06:08:13.523
> 
> 标签：ruby-on-rails

我在 _form.html.erb 页面中添加了 datepicker 以在创建时选择日期。但是当我单击创建按钮时，它显示字段不能为空。当我看到参数时，它显示“dob”=>“08/17/2012”，但它没有通过验证。我不确定天气是格式问题。谁能帮我解决这个问题。谢谢

我的 application.html.erb 文件包含：-

```
<%= javascript_include_tag "jquery-1.8.0.min" %>
<%= javascript_include_tag "jquery-ui-1.8.23.custom.min" %>
<!--%= javascript_include_tag "application" %-->
<script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });
</script> 
```

_form.html.erb 包含：-

```
<div class="span10 date-wid">
  <%= f.text_field :dob, :id => 'datepicker' %>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:46:59.173

这可能是你的格式。节省数据库时间的正确格式是这样的

对于日期，2012 年 3 月 1 日或 2012 年 3 月 1 日：

```
20120301 
```

所以顺序是 4 位、2 位、2 位的结构中的年、月、日。Protip，您可以添加更多内容，也可以是您的小时分钟和秒数。

因此，请确保您的日期选择器也在生成它：

```
 $(".date-single-view").datepicker({
      dateFormat: "yyyy-mm-dd"
    }); 
```

这将添加`-`，但它仍然应该工作。您还可以执行其他操作，例如让选择日期选择器将数据格式拖放到隐藏的输入 div，而输入字段仅用于显示。

您还可以使用 Chronic gem 正确解析各种不同的时间方式。

[https://github.com/mojombo/chronic](https://github.com/mojombo/chronic)

# java - Java 反射 - 编辑数组长度

> ID：12000604
> 
> 赞同：2
> 
> 时间：2012-08-17T06:09:19.657
> 
> 标签：java, reflection

我想知道是否可以使用 Java Reflection API 更改类的整数数组的长度。如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:16:11.190

没有; 创建一个固定长度的数组。

您*可以做的是通过使用***较大**数组中的*副本*（使用）修改字段的值来接近，只要您知道这样的修改不会导致任何不一致。**[`Arrays.copyOf`](http://goo.gl/O3Xga)**

 **```
/* desired length */
final int desired = ...;
/* the instance of the object containing the int[] field */
final Object inst = ...;
/* the handle to the int[] field */
final Field field = ...;
field.set(inst, Arrays.copyOf((int[]) field.get(inst), desired)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:19:45.247

我认为即使使用反射也无法更改数组长度。

这是java教程的参考。

> 数组是一个容器对象，它包含固定数量的单一类型的值。数组的长度是在创建数组时确定的。创建后，它的长度是固定的。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T06:34:22.380

数组是一个固定长度的数据结构，所以它的长度是不可能被修改的。尽管如此，人们可以创建一个具有新固定长度的新数组，这样它可以容纳新成员使用

> System.arrayCopy()

就像你有一个 T 类型的数组，大小为 2，

> T[] t1 = 新 T[2]

它的长度固定为2。所以它不能存储超过2个元素。但是通过创建具有新的固定长度的新数组，比如 5，

> T[] t2 = 新 T[5]

所以它现在可以容纳 5 个元素。现在将 t1 的内容复制到 t2 使用

> System.arraycopy（对象 src，int srcPos，对象 dest，int destPos，int 长度）

在本例中，

> System.arraycopy(t1, 0, t2, 0, t1.length)

现在在新数组中，你有位置

> 从 t1.length 到 t2.length-1

可供您使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:21:06.620

我猜java不允许你改变数组长度，但是你可以使用反射在索引处设置值。

```
 import java.lang.reflect.*;

 public class array1 {
  public static void main(String args[])
  {
     try {
        Class cls = Class.forName(
          "java.lang.String");
        Object arr = Array.newInstance(cls, 10);
        Array.set(arr, 5, "this is a test");
        String s = (String)Array.get(arr, 5);
        System.out.println(s);
     }
     catch (Throwable e) {
        System.err.println(e);
     }
  }
 } 
```**

# sphinx - Sphinx SE 获取记录问题？

> ID：12000605
> 
> 赞同：0
> 
> 时间：2012-08-17T06:09:22.140
> 
> 标签：sphinx

在 SphinSE 中，我可以从 sphinx 服务器获取任何记录。

示例：我有以下记录：

编号 名称 商品 价格

1 辆自行车 1000 1000

2 车 200 200

要获取记录，我使用了以下查询

select * from indexname WHERE query='1000;mode=any';

它有返回 2 条记录。我如何获得记录，该记录具有 Item AS 1000。

select * from indexname WHERE query='@Item 1000;mode=extended';

它有返回空集。请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:32:41.130

```
 select * from indexname WHERE query='@Item 1000;mode=extended'; 
```

Taht 应该可以工作，如果 Item 是一个字段（即你还没有将它定义为一个属性）

如果一个属性类似于

```
 select * from indexname WHERE query=';filter=Item,1000'; 
```

应该这样做。

# oracle - 插入数据库时 出现无效的列索引异常

> ID：12000609
> 
> 赞同：0
> 
> 时间：2012-08-17T06:09:50.600
> 
> 标签：oracle

我在插入数据库时​​遇到了这个异常。已附上痕迹。

引起：java.sql.SQLException：
在 oracle.jdbc.driver.OraclePreparedStatement.setTimestamp(OraclePreparedStatement.java:7240) 的
oracle.jdbc.driver.OraclePreparedStatement.setTimestampInternal(OraclePreparedStatement.java:7256)的列索引无效。
.driver.OraclePreparedStatementWrapper.setTimestamp(OraclePreparedStatementWrapper.java:302)
at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.setTimestamp(WrappedPreparedStatement.java:554)

我的查询是

```
INSERT INTO SP_OPS_TEAM(
PERSON_ID
,FROM_DT
,THRU_DT
,REPORTS_TO
,CASE_MAX_ALLOWED
,PAY_AUTH_MAX
,LUMP_SUM_MAX,DAYS_MAX
,HAS_DENIAL_AUTH_IND
,HAS_MEDICAL_AUTH_IND
,OPS_PERS_TYPE_CD
,CR_TS
,CR_USER
,LST_UPDT_TS
,LST_UPDT_USER) 
VALUES (
?
,to_date(to_char(sysdate,'yyyy/MM/dd'),'yyyy/MM/dd')
,to_date('12/31/2099','MM/DD/YYYY')
,?
,?
,?
,?
,?
,?
,?
,?
,CURRENT_DATE
,?
,CURRENT_DATE
,?) 
```

参数如下

```
[6804
, Fri Aug 17 10:59:24 IST 2012
, Fri Aug 17 10:59:24 IST 2012
, 6803
, null
, null
, null
, null
, N
, N
, TM
, Fri Aug 17 10:59:24 IST 2012
, 6803
, Fri Aug 17 10:59:24 IST 2012
, 6803] 
```

我在第 14 个索引 LST_UPT_TS 处遇到此异常，db 中此列的数据类型是 SYSTIMESSTAMP。

```
desc SP_OPS_TEAM
Name                 Null     Type              
-------------------- -------- ----------------- 
PERSON_ID            NOT NULL NUMBER            
FROM_DT              NOT NULL DATE              
THRU_DT              NOT NULL DATE              
REPORTS_TO           NOT NULL NUMBER(22)        
CASE_MAX_ALLOWED              NUMBER(5)         
PAY_AUTH_MAX                  NUMBER(10,4)      
LUMP_SUM_MAX                  NUMBER(10,4)      
DAYS_MAX                      NUMBER(5)         
HAS_DENIAL_AUTH_IND  NOT NULL CHAR(1 CHAR)      
HAS_MEDICAL_AUTH_IND NOT NULL CHAR(1 CHAR)      
OPS_PERS_TYPE_CD     NOT NULL VARCHAR2(25 CHAR) 
CR_TS                NOT NULL TIMESTAMP(6)      
CR_USER              NOT NULL NUMBER(22)        
LST_UPDT_TS          NOT NULL TIMESTAMP(6)      
LST_UPDT_USER        NOT NULL NUMBER(22) 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:57:52.677

你说你'在第 14 个索引处得到这个异常'，它似乎来自类似`stmt.setTimestamp(14, ...)`. 您要插入 15 列，但只有 11 个位置参数 ( `?`)，另外 4 个是在查询中设置的 - 使用`to_date()`and`CURRENT_DATE`子句。所以，14 确实不是一个有效的索引，超过 11 的任何东西都会出现该错误，并且您可能会遇到与其他人的一些数据转换问题。

根据您显示的内容，您不需要尝试设置任何日期/时间戳值，因此您根本不应该有任何`stmt.setDate()`或`stmt.setTimestamp()`调用。

此外，正如 APC 指出的那样，您正在使用`CURRENT_DATE`两`TIMESTAMP`列；`CURRENT_TIMESTAMP`如果您需要精度，您可以改用。如果背后的想法`to_date(to_char(sysdate,...),...)`只是失去时间部分，您可以使用`trunc(sysdate)`它来使其更清晰和更简单。

不过，这些并没有引起任何直接的问题。`12/31/2099`我对用作魔术约会有更多的问题；这总有一天会让人头疼，看起来就像千年虫的重复等待发生。（当然，我们都希望在它成为问题之前退休，但仍然......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:08:43.277

CURRENT_DATE 是[日期数据类型](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions037.htm#i999792)而不是时间戳。但是，它们应该可以自由转换。

我对您的参数如何与`?`您的查询中的一致感到有点困惑。为什么在使用系统内置值填充数据值时要传递数据值？

无论如何`Fri Aug 17 10:59:24 IST 2012`，它不是 Oracle 的默认格式之一。因此，除非您的 NLS 设置不同，否则您将需要包含显式格式掩码。

而且您不需要带有 sysdate 的 TO_DATE(TO_CHAR()) hoopla。所有日期都以 Oracle 的规范格式存储：掩码仅用于格式化输入或输出。

# c - 假设线程的执行顺序 - 陷阱和更正

> ID：12000616
> 
> 赞同：0
> 
> 时间：2012-08-17T06:10:13.827
> 
> 标签：c, linux, multithreading, pthreads

我遇到了示例代码。

**假设_order_of_execution_pitfall.c**

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>

#define N 4

void* hello(void* arg)
{
   printf("Hello World from Thread%d\n", *(int*)arg);
   return NULL;
}

int main()
{
   pthread_t tid[N];
   int i;

   for(i = 0; i < N; i++)
   {
      pthread_create(&tid[i], NULL, hello, (void*)&i); //&i points to same address
   }

   for(i = 0; i < N; i++)
   {
      pthread_join(tid[i], NULL);
   }

   return 0;
} 
```

在这里，它错误地假设线程在创建时就开始执行。printf() 语句确实可以在下一次调用 pthread_create() 之前执行，但是操作系统可以自由地以任何顺序调度线程。有可能所有线程都在它们中的任何一个实际开始执行之前创建。由于 的所有副本都`arg`指向相同的地址，该地址在 中发生变化`main()`，因此线程可以打印相同的`identification number`。

我试图通过`using a unique address`保存每个线程的标识号来更正上面的代码，如下所示

**假设_order_of_execution_workaround.c**

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>

#define N 4

void* hello(void* arg)
{
   printf("Hello World from Thread%d\n", *(int*)arg);
   return NULL;
}

int main()
{
   pthread_t tid[N];
   int tno[N];
   int i;

   /* Added code */   
   for(i = 0; i < N; i++)
   {
      tno[i] = i + 1;
   }/* Added code */

   for(i = 0; i < N; i++)
   {
      pthread_create(&tid[i], NULL, hello, (void*)(tno+i)); // providing unique address for each thread
   }

   for(i = 0; i < N; i++)
   {
      pthread_join(tid[i], NULL);
   }

   return 0;
} 
```

我的修正是正确的方法吗？如果有的话，有人可以建议我一种更正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:19:16.537

是的，这是正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:21:18.740

是的 - 这对我来说是正确的。

# javascript - 使用 prettyphoto onclick 另一个元素显示图像

> ID：12000622
> 
> 赞同：0
> 
> 时间：2012-08-17T06:10:48.757
> 
> 标签：javascript, jquery, prettyphoto

我有一个 ul 图像列表，如下所示：

```
<ul class="thumbs">
    <li><a href="#" rel="prettyPhoto[pp_gal]"><img src="images/thumb.jpg" alt=""/></a>
    <li><a href="#" rel="prettyPhoto[pp_gal]"><img src="images/thumb.jpg" alt=""/></a>
</ul> 
```

我按如下方式绑定漂亮照片事件，这对画廊来说很好。

```
 $("a[rel='prettyPhoto[pp_gal]']").prettyPhoto({ social_tools: false, slideshow: false }); 
```

我的页面上有另一个锚标记，如下所示：

```
 <a href="#">View all images</a> 
```

我如何绑定漂亮的照片事件，以便在点击 viewall 时，来自 ul 的图像会显示出来，就像在点击 ul 列表中的任何图像时出现的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:32:54.793

我在本地主机上试过，这对我有用：（根据你的例子）

```
 <a href="#" rel="prettyPhoto[pp_gal]">View all images</a> 
```

诅咒，href应该指向一些图像。

# php - 如何将表格特定行的特定 Td 转换为文本框，以便可以编辑它们的值

> ID：12000633
> 
> 赞同：1
> 
> 时间：2012-08-17T06:11:36.850
> 
> 标签：php, jquery, html, css, onclick

所以，我有一个如下表：

```
<table border='1' id="table" style="color: #004080;">
  <tr>
    <th >EmpID</th>
    <th >EmpName</th>
    <th >EmpDesignation</th>
    <th >Edit</th>
    <th >Del</th>
    </tr>

   <?php
        foreach($result->result() as $row)
        { 
   ?>          
            <tr  >
                <td >
                    <?php 
                        echo $row->EmpID
                    ?>
                </td >
                <td  >
                    <?php
                        echo $row->EmpName;
                    ?>
                </td> 
                <td >
                    <?php
                        echo $row->EmpDesignation;
                    ?>
                </td>
                <td >
                   <img src="editicon.png" id="Edit" /> 
                </td>
                <td >
                    <img src="Delicon.png" onclick="Del(this)" /> 
                </td>
         </tr>  
    <?php 
        }
    ?>
</table> 
```

现在我想做的是针对编辑图像的单击事件编写一个 jQuery 函数，我将其放在第 4 列的每一行

我成功弹出警报，但我希望相应的 jQuery 将位置 2 和 3 的 tds 针对单击的编辑图像（对于特定行、this.row 等）变成一个文本框，以便我可以更改它们的值
My jQuery func。下面给出

```
$('#Edit').live('click', function () {
    alert('inside edit image click func');      
    // write Jquery Func here
}); 
```

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:16:28.880

HTML ID 必须是唯一的，因此您不能使用 id 复制元素`#Edit`；改为类`class='Edit'`：

```
$(document).ready(function() {

    /* Older version: $('#table').delegate('.Edit', 'click', function() { */
    $('#table').on('click', '.Edit', function() {
        $(this).closest('tr').find('td:eq(1), td:eq(2)').each(function() {
            // replace the existing text with a textbox containing that text
            var existingVal = $(this).text();
            $(this).html('<input type="text" value="' + existingVal + '" >');
        });
    });

    // when the user is finished editing, change the value and remove the textbox
    /* Older version: $('#table').delegate('td input', 'focusout', function() {*/
    $('#table').on('focusout', 'td input', function() {
        $(this).parent().html( this.value );
    });
}); 
```

[`.live()`](http://api.jquery.com/live/)已弃用；请注意，我[`.on()`](http://api.jquery.com/on/)改用

您必须将图像的 html 更改为：

```
<img src="editicon.png" class="Edit" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:29:06.257

有两种方法可以做到这一点：

1.  使用 jQuery 将 td 值替换为输入，或
2.  输入已经存在（但隐藏）。

虽然它使页面更大，但我发现方法 #2 更快更稳定。它是这样工作的：

**CSS：**

```
.inputs { display: none; } 
```

**Javascript：**

```
$('.edit').click(function(){
    $(this).parent('tr').find('.values').hide();
    $(this).parent('tr').find('.inputs').show();
}); 
```

**PHP：**

```
<table><?
foreach ($result->result() as $row) {
echo '
    <tr id="row_'. $row->id .'">
        <td><span class="values">'. $row->EmpID .'</span>
            <span class="inputs"><input name="EmpID" value="'. $row->EmpID .'"></span>
            </td>
        <td><span class="values">'. $row->EmpName .'</span>
            <span class="inputs"><input name="EmpName" value="'. $row->EmpName .'"></span>
            </td>
        <td><img class="edit" src="editicon.png"></td>
        <td><img class="del" src="delicon.png"></td>
    </tr>';
?></table> 
```

然后我使用另一个 jQuery 调用来查找 .inputs 中的更改，从 .inputs 中获取行 id `<tr>`，并通过 ajax 更新 db。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:24:36.020

回答你的

> 我想...将位置 2 和 3 的 tds 变成一个文本框，这样我就可以更改它们的值

尝试使用[Jeditable](http://www.appelsiini.net/projects/jeditable)插件。[演示页面](http://www.appelsiini.net/projects/jeditable/default.html)应该让您了解这是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:25:47.720

首先，使用`.on()`方法（或者`.delegate()`，特别是对于 1.7 之前的 jQuery），而不是`.live()`方法，因为后者已被弃用。

其次，不要为编辑图标使用 id。改变是这样，而不是说`id="Edit"`，说`class="Edit"`。就目前而言，您的代码会生成多个 id，这违反了 HTML DOM 并导致浏览器出现不可预测的行为。

```
<table border='1' id="table" style="color: #004080;">
  <tr>
    <th>EmpID</th>
    <th>EmpName</th>
    <th>EmpDesignation</th>
    <th>Edit</th>
    <th>Del</th>
  </tr>

  <?php foreach($result->result() as $row) { ?>          
    <tr>
      <td><?php echo $row->EmpID ?></td> 
      <td><?php echo $row->EmpName; ?></td> 
      <td><?php echo $row->EmpDesignation; ?></td>
      <td><img src="editicon.png" class="Edit" /></td>
      <td><img src="Delicon.png" onclick="Del(this)" /></td>
    </tr>  
  <?php } ?>

</table> 
```

也就是说，您知道被点击的项目，所以只需向上遍历`tr`，然后向下遍历相关`td`的 s，并将 html 内的 html 更改`td`为输入框：

```
$('#table').delegate('.Edit','click', function () {
    $(this).parent('tr').find('td:eq(1), td:eq(2)').each(function () {
        $(this).html("<input type='text' value='" + $(this).html() + "' />");
    }
}); 
```

这会将该行上的列更改为输入框，并使用单元格中已经存在的信息预先填充它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T06:50:57.167

试试这个

```
$('#Edit').click(function () {
  $(this).parent().parent().find('.editable').each(function(){

    var currentVal = $(this).text();
    $(this).html("<input type='text' value='"+ currentVal +"'>")
  });
}); 
```

检查[小提琴](http://jsfiddle.net/hsalama/E4cNb/1/)

# c# - 高性能开发

> ID：12000635
> 
> 赞同：10
> 
> 时间：2012-08-17T06:11:55.930
> 
> 标签：c#, performance, design-patterns

**背景**

我们一直在努力尝试为“高性能”应用程序提供解决方案。该应用程序基本上是一个高吞吐量的内存管理器，可以同步回磁盘。“读取”和“写入”非常高，每秒大约 3000 个事务。我们尝试在内存中做尽可能多的事情，但最终数据会变得陈旧，需要刷新到磁盘，这就是一个巨大的“瓶颈”接踵而至的地方。该应用程序是多线程的，大约有 50 个线程。没有IPC（进程间通信）

**尝试**

我们最初是用 Java 编写的，它工作得很好，直到达到一定的负载，遇到瓶颈并且无法跟上。然后我们在 C# 中进行了尝试，也遇到了同样的瓶颈。我们使用非托管代码 (C#) 进行了尝试，尽管在初始测试中使用 MMF（内存映射文件）非常快，但在生产中，读取速度很慢（使用视图）。我们确实尝试了 CouchBase，但我们偶然发现了围绕高网络利用率的问题。这对我们来说可能是糟糕的配置！

**额外信息：**在我们的 Java 尝试（非 MMF）中，我们的线程与需要刷新到磁盘的信息队列构建到无法跟上“写入”磁盘的程度。在我们的 C# 内存映射文件方法中，问题是 READS 非常慢，而 WRITES 工作完美。由于某种原因，视图很慢！

**问题**

所以问题是，您打算传输大量数据的情况；有人可以提供一种可能的方法或架构设计来提供帮助吗？我知道这似乎有点宽泛，但我认为高性能、高吞吐量的具体性质应该缩小答案的范围。

谁能保证在这样的水平上使用 Couchbase、MongoDB 或 Cassandra？其他想法或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:33:16.700

首先，我想明确一点，我几乎没有（如果有的话）构建高性能、可扩展的应用程序的经验。

Martin Fowler 对 LMAX 架构进行了描述，该架构允许应用程序在单个线程上每秒处理大约 600 万个订单。我不确定它是否可以帮助您（因为您似乎需要移动大量数据），但也许您可以从中获得一些想法：[http ://martinfowler.com/articles/lmax.html](http://martinfowler.com/articles/lmax.html)

该架构基于[事件溯源](http://martinfowler.com/eaaDev/EventSourcing.html "事件溯源")，通常用于提供（相对）简单的可扩展性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:01:30.783

海量数据和磁盘访问。我们在谈论什么样的磁盘？如果您处理多个文件，HDD 往往会花费大量时间来移动磁头。（不过，如果您使用 SSD，这应该不是问题。）此外，您应该利用内存映射文件以页面大小的块进行管理的事实。如果可能，数据结构应与页面边界对齐。

但无论如何，你必须确保你知道*瓶颈*是什么。例如，如果您实际上由于线程同步而浪费时间，那么优化数据结构就没有多大帮助。而且，如果您使用的是 HDD，页面对齐可能不会像将所有内容以某种方式填充到单个文件中那样有帮助。因此，请使用适当的工具来确定哪些制动器仍在阻碍您。

使用通用数据库实现可能不会像您希望的那样帮助您。毕竟，它们是通用的。如果性能确实是一个很大的问题，那么考虑到您的要求的特殊实现可能会胜过这些更通用的实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T08:55:43.837

如果您想快速避免持久性和尽可能多的写入队列，并在读取时使用内存疮/缓存。

语言与它无关。\

# ios - iOS使用GSEventSetBacklightLevel，但我锁定或解锁iPhone，会变成过去的亮度

> ID：12000637
> 
> 赞同：2
> 
> 时间：2012-08-17T06:12:05.837
> 
> 标签：ios

这就是我以编程方式设置亮度的方式，但如果我锁定然后解锁 iPhone，亮度级别将重置为原始级别：

```
GSEventSetBacklightLevel(BrightnessSlider.value);
[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

所以我想问你，如何设置亮度，而且在屏幕锁定和解锁时也保留它的新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:15:30.103

在 iOS 5 上，您可以使用 UIScreen 的亮度属性：

```
[UIScreen mainScreen].brightness = slider.value; 
```

# java - 在java swing中的一个按钮上执行多个动作

> ID：12000641
> 
> 赞同：2
> 
> 时间：2012-08-17T06:12:29.560
> 
> 标签：java, swing

我正在尝试以编程方式在 java swing 中创建一个向导。

在向导窗格上，我有一个下一步按钮，它必须根据向导上显示的面板执行多个操作。

是否可以使用 java 命令模式？我可以知道怎么做吗？提前致谢。

我用于向导的代码是

```
this.mainPanel.add(fileSelectionPane,"SELECT FILE");
this.mainPanel.add(sqlConnectionPane,"SQL CONNECTION");           
this.mainPanel.add(devicePane,"PARSER");    
this.mainPanel.add(detailsPane,"DISPLAY");      
thisLayout.show(this.mainPanel,"SELECT FILE");    
this.finishButton.setEnabled(false);
this.backButton.setEnabled(false);
if(newValue==1)    {     
    this.thisLayout.show(this.mainPanel, "SQL CONNECTION");   
    this.nextButton.setEnabled(true);    
    this.nextButton.setText("Connect..");  
    this.cancelButton.setEnabled(true);    
    this.backButton.setEnabled(true);
}  

if(newValue==2)    {    
    this.thisLayout.show(this.mainPanel, "PARSER");  
    this.nextButton.setEnabled(true);    
    this.nextButton.setText("Parse..");  
    this.cancelButton.setEnabled(true);    
    this.backButton.setEnabled(true);    
} 
```

我希望下一个按钮对 SELECT FILE 和 SQL CONNECTION 执行特定操作。

是否可以使用命令模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:23:10.990

好的，所以，您将动作侦听器添加到按钮。当事件发生时，这些动作监听器会做一些事情。

您想根据显示的面板更改按钮的功能吗？为什么不设置一个反映向导状态的实例变量呢？

例如（大致），

整数状态 = 0；// 主面板

将面板更改为帮助页面，事件侦听器被触发，将“状态”设置为 1。您现在正在跟踪正在显示的面板。

现在，在您最初的问题中，当按钮（您想要具有多种功能的按钮）触发时，您可以根据“状态”变量选择它将采取的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:54:41.403

试试下面的按钮代码：

```
JButton btn1;
btn1= new javax.swing.JButton();
btn1.setToolTipText("Submit");
btn1.setContentAreaFilled(false);
btn1.setBorderPainted(false);
btn1.setMargin(new java.awt.Insets(2, 2, 2, 2));
btn1.addActionListener(this);
btn1.setIcon(this.getIcons()[21]);
add(btn1); // add to Jpanel
btn1.setBounds(250,10, 12, 12);

public void actionPerformed(java.awt.event.ActionEvent evt) {
   Object obj = evt.getSource();
   if (obj == btn1) {
      // your function on on click of button
      return;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T06:22:06.160

1.  看看[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

2.  那些放在[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)中的卡片（`JDialog`默认情况下已预先实现[BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)）到 CENTER 区域

3.  创建一个新的[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)并在那里放置[JButtons](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

4.  `JPanel`放在`JButtons`该`SOUTH`地区

5.  在这里搜索，在这个论坛上，有一些基于向导或图像预览的优秀示例`CardLayout`

# sql-server - SQL Server 2005：“=”附近的语法不正确

> ID：12000646
> 
> 赞同：0
> 
> 时间：2012-08-17T06:13:18.873
> 
> 标签：sql-server, sql-server-2005, syntax-error

`+=`使用字符串连接运算符时，是否有任何正文在 SQL Server 2005 中遇到上述错误。

根据在线 SQL Server 2005 书籍，它应该可以工作，即使 MSDN 中显示的示例也无法在 SQL Server Management Studio 2005 中编译。

在 SQL Server 2008 中它工作正常。

我认为它在 SQL Server 2005 中的错误。

解决方法是使用`+`运算符实现连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T06:16:20.423

这不是错误，直到 SQL Server 2008 才实现增强的运算符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:16:50.877

使用类似 c 的短赋值运算符（如`+=`等`-=`）仅从 SQL Server 2008 开始有效。您不能将它与 SQL Server 2005 一起使用。

# video - “视频录制已停止，已达到此视频的最大长度”Xcode iPhone

> ID：12000648
> 
> 赞同：8
> 
> 时间：2012-08-17T06:13:39.210
> 
> 标签：video, uiimagepickercontroller, duration

我正在使用 ImagePickerController 进行 iPhone 视频捕获。我已经为图像选择器控制器设置了属性。我用它来将视频的最大长度设置为 60 秒。

```
imagePicker.videoMaximumDuration=60; 
```

我收到默认警报：

> “视频录制已停止，已达到此视频的最大长度”

我不想在时间达到 60 秒时看到此警报，我怎样才能让它不出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-28T13:40:24.230

正如苹果所说：

“此属性的默认值为 10 分钟（600 秒）”

所以使用：

```
 let picker = UIImagePickerController()
    picker.sourceType = .camera
    picker.mediaTypes = [kUTTypeMovie as String]
    picker.videoQuality = .typeMedium // .typeHigh
    picker.videoMaximumDuration = 20 * 60  // is in secs., here 20 minutes 
```

# vba - Range 中的非相交地址

> ID：12000654
> 
> 赞同：3
> 
> 时间：2012-08-17T06:14:09.190
> 
> 标签：vba, excel

我有两个范围`A2:E2`和`B1:B5`. 现在，如果我执行 intersect 操作，它将返回 me `B2`。我想要某种方式来获得我的输出，`B2`以便在任何一个范围内考虑`A2:E2`和`B1:B5`。即，如果有重复的单元格，那么应该避免。

**预期输出：**

`A2,C2:E2,B1:B5`

或者

`A2:E2,B1,B3:B5`

谁能帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:25:56.550

像这样？

```
Sub Sample()
    Dim Rng1 As Range, Rng2 As Range
    Dim aCell As Range, FinalRange As Range

    Set Rng1 = Range("A2:E2")
    Set Rng2 = Range("B1:B5")

    Set FinalRange = Rng1

    For Each aCell In Rng2
        If Intersect(aCell, Rng1) Is Nothing Then
            Set FinalRange = Union(FinalRange, aCell)
        End If
    Next

    If Not FinalRange Is Nothing Then Debug.Print FinalRange.Address
End Sub 
```

**输出**：

```
$A$2:$E$2,$B$1,$B$3:$B$5 
```

**说明**：我在这里所做的是将温度范围声明为`FinalRange`并将其设置为`Range 1`. 之后，我检查每个单元格`Range 2`是否存在于`Range 1`. 如果是，那么我将忽略它，否则将其添加`Union`到`Range 1`

**编辑**问题也在[这里交叉发布](http://social.msdn.microsoft.com/Forums/en-US/exceldev/thread/e84dc168-d98d-4fd1-9e1b-c9a983aac27b)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:35:08.947

来自我的文章[在 Union & Intersect 旁边添加“减去范围”方法](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2974-Adding-a-Subtract-Range-method-alongside-Union-Intersect.html)

此代码可用于

*   从第二个范围减去一个范围的交集
*   返回两个独立范围的*反联合*（即仅排除相交的单元格）

[我在Mappit](http://www.experts-exchange.com/A_2613.html)中使用此代码！识别隐藏的单元格（即`Hidden Cells = UsedRange - SpecialCells(xlVisible)`）。

虽然这段代码相对冗长，但它被编写为在更大范围内非常快，避免了单元格循环

```
 Sub TestMe()
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = [a2:e2]
Set rng2 = [b1:b5]
MsgBox RemoveIntersect(rng1, rng2) & " " & rng2.Address(0, 0)
End Sub

Function RemoveIntersect(ByRef rng1 As Range, ByRef rng2 As Range, Optional bBothRanges As Boolean) As String
    Dim wb As Workbook
    Dim ws1 As Worksheet
    Dim rng3 As Range
    Dim lCalc As Long

    'disable screenupdating, event code and warning messages.
    'set calculation to Manual
    With Application
        .ScreenUpdating = False
        .EnableEvents = False
        .DisplayAlerts = False
        lCalc = .Calculation
        .Calculation = xlCalculationManual
    End With

    'add a working WorkBook
    Set wb = Workbooks.Add(1)
    Set ws1 = wb.Sheets(1)

    On Error Resume Next
    ws1.Range(rng1.Address).Formula = "=NA()"
    ws1.Range(rng2.Address).Formula = vbNullString
    Set rng3 = ws1.Cells.SpecialCells(xlCellTypeFormulas, 16)
    If bBothRanges Then
        ws1.UsedRange.Cells.ClearContents
        ws1.Range(rng2.Address).Formula = "=NA()"
        ws1.Range(rng1.Address).Formula = vbNullString
        Set rng3 = Union(rng3, ws1.Cells.SpecialCells(xlCellTypeFormulas, 16))
    End If
    On Error GoTo 0
    If Not rng3 Is Nothing Then RemoveIntersect = rng3.Address(0, 0)

    'Close the working file
    wb.Close False
    'cleanup user interface and settings
    'reset calculation
    With Application
        .ScreenUpdating = True
        .EnableEvents = True
        .DisplayAlerts = True
        lCalc = .Calculation
    End With

End Function 
```

# java - 关于不可变类防御性复制

> ID：12000655
> 
> 赞同：3
> 
> 时间：2012-08-17T06:14:17.547
> 
> 标签：java, immutability, defensive-copy

我有一个关于创建不可变类的查询。以下是我考虑的几点：

1.  使课程最终
2.  使所有成员成为最终成员，在静态块中或在构造函数中显式设置它们
3.  将所有成员设为私有
4.  没有修改状态的方法
5.  要非常小心地限制对可变成员组件的访问（记住该字段可能是最终的，但对象仍然可以是可变的。即私有最终日期 imStillMutable） - 请参阅防御性复制或其表亲复制构造函数以获取更多信息。

但是我根本没有完全理解 5 点，您能否建议或给我看一个例子，其中 5 点在那个例子中很清楚？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T06:21:00.723

第 5 点表明，任何时候你有任何方法会*返回*与可变对象有关的东西，你会想要创建一个独立于私有状态的副本。例如：

```
public final class Foo
{
    private final List<String> strings;

    public Foo(List<String> strings)
    {
        // Defensive copy on construction. Protects from constructing
        // code mutating the list.
        this.strings = new ArrayList<String>(strings);
    }

    public List<String> getStrings()
    {
        // Defensive copy on read. Protects from clients mutating the list.
        return new ArrayList<String>(strings);
    }
} 
```

请注意，仅当状态可变时才需要防御性复制。例如，如果您`ImmutableList`在上述类中使用 an（例如来自 Guava）作为状态，则需要在构造时创建一个新列表（除非输入也是 an `ImmutableList`）而*不是*in `getStrings`。

另请注意，在这种情况下`String`是不可变的，因此我们不需要复制每个字符串。如果这是`List<StringBuilder>`我们需要创建一个新列表*和每个元素的新副本*作为防御副本的一部分。如您所见，当您的所有状态也是不可变的时，生活会变得更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:17:25.197

`final`意味着指针不能指向另一个引用。例如：

```
final Object obj = new Object();
obj = new Object(); //Invalid 
```

但`final`不妨碍修改对象：

```
obj.setWhatever("aaa"); //Perfectly valid 
```

如果您没有限制对成员的访问，那么任何人都可以获取对象并对其进行修改。

例如：`yourClass.getObject().setWhatever("aaa").`

防御性复制意味着`getObject()`不会直接返回对象，但会对其进行复制然后返回。这样，如果调用者修改了返回的对象，它就不会修改类的原始成员。

# javascript - 在 IE8 中接收无效参数

> ID：12000657
> 
> 赞同：2
> 
> 时间：2012-08-17T06:15:14.307
> 
> 标签：javascript, internet-explorer-8

我已经盯着这个几个小时了，真的可以使用一些帮助。我正在使用电影院网站的一些现有代码，以下内容应填写一个选择列表，其中包含从今天到 xml 文件中的最大日期的日期。

```
function populateSelect(xmlDoc, elSel) {
    var dmindate = new Date();
    var showings = xmlDoc.getElementsByTagName('Session');
    fmaxdate = "";
    for (var showing = 0; showing < showings.length; showing++) {
        if (retText(showings[showing].getElementsByTagName('Date_time')[0]) > fmaxdate) {
            fmaxdate=retText(showings[showing].getElementsByTagName('Date_time')[0]);//get the Max Date
        }
    }

    var dmaxdate = new Date.parseString(fmaxdate, "yyyyMMddHHmmss");
    while(dmindate <= dmaxdate){ //Fill in the Select List
        var elOptNew = document.createElement('option');
        elOptNew.text = dmindate.format("EE NNN d, yyyy");
        elOptNew.value = dmindate.format("MM/dd/yyyy");
        dmindate.setDate(dmindate.getDate()+1);
        try {
            elSel.add(elOptNew, null); // standards compliant doesn't work in IE
        }
        catch(ex) {
            elSel.add(elOptNew); // IE only
        }
    }
} 
```

这在 FF、Chrome 和 Safari 中工作得非常好，但 IE8 不显示带有日期的下拉列表，并且它显示 Invalid Argument 与 try 的右括号在同一行。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:54:30.857

我不知道来自哪里`Date.prototype.parseString`或`format`方法来自哪里，想必您正在添加一些日期库。它们不是 ECMAScript ed 3 或 5 的一部分。

您可以替换这些行：

```
> var elOptNew = document.createElement('option'); 
> elOptNew.text =dmindate.format("EE NNN d, yyyy");
> elOptNew.value = dmindate.format("MM/dd/yyyy"); 
```

和：

```
var elOptNew = new Option(dmindate.format("EE NNN d, yyyy"), // option text
                          dmindate.format("MM/dd/yyyy"));    // option value 
```

然后将其添加到选择中：

```
elSel.appendChild(elOptNew); 
```

以上将适用于所有版本的 IE 和其他浏览器。有关 Option 构造函数的详细信息，请参阅[http://dev.w3.org/html5/spec/single-page.html#the-option-element](http://dev.w3.org/html5/spec/single-page.html#the-option-element)。

### 编辑

在[add 方法](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-14493106)的 DOM 2 HTML 规范中，它说：

> 如果 before 参数为 null，则此方法等效于 Node 接口的 appendChild 方法。

这并不意味着传递 ECMAScript`null`对象，它意味着“如果没有第二个参数”。该规范是语言中立的，它不是特定于 javascript 的。HTML5 OptionsCollection[添加方法](http://dev.w3.org/html5/spec/single-page.html#dom-htmloptionscollection-add)是相同的（即“null”表示没有参数，不是javascript`null`对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:45:21.853

从[我可以找到的文档](http://msdn.microsoft.com/en-us/library/ie/ms535921%28v=vs.85%29.aspx)中，使用 null 参数没有任何意义。但是，很明显，不同浏览器中的 JavaScript 引擎对这个方法的处理方式不同，IE 不喜欢`null`作为第二个参数。

因此，按照口头禅，[您应该使用 jQuery。它很好，可以做所有事情。](http://www.doxdesk.com/img/updates/20091116-so-large.gif)它确实有助于保护您免受 DOM 的浏览器实现之间的差异，因为它具有[相当广泛的兼容性](http://docs.jquery.com/Browser_Compatibility)。无论如何，它解决了[这个人的问题。](https://stackoverflow.com/questions/11231543/javascript-error-in-add-method-using-ie8)

您可能想要使用[`append()`](http://api.jquery.com/append/)而不是`add()`. 例如：

```
var elOptNew = $('<option></option>');
...
elSel.append(elOptNew); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:20:35.803

尝试使用

```
elSel.options.add(elOptNew) 
```

这必须适用于所有浏览器。[**见例子**](http://msdn.microsoft.com/en-us/library/ie/ms535921%28v=vs.85%29.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:20:59.983

还有另一种方法可以将新选项添加​​到选择中，即

```
var opts = elSel.options;
opts[opts.length] = new Option(dmindate.format("EE NNN d, yyyy"), dmindate.format("MM/dd/yyyy")); 
```

[**适用于所有主流浏览器的示例**](https://stackoverflow.com/questions/12000657/receiving-invalid-argument-in-ie8#12001087)。

# jquery - 使用 Jquery 添加记录

> ID：12000660
> 
> 赞同：0
> 
> 时间：2012-08-17T06:15:21.893
> 
> 标签：jquery

我想知道

我目前正在开发一个程序，我需要我的用户能够按 (+) 将新记录添加到表中，或者如果它是表中的最后一条记录并且用户按下它应该添加的向下箭头键一个新的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:42:02.057

如果要添加 html，可以使用 jquery，在表的最后一个位置添加一行，使用这个

```
$('#Table tr:last').after('<tr><td></td></tr>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:46:31.223

首先您应该添加一个 Addnew 按钮或行，然后将此代码写入 onclick

```
$("#hidden_add_form").show(); 
```

使用 jquery 发布表单

```
$("#hidden_add_form").submit(function(){
    $.post("save.php",$("#hidden_add_form").serialize(),function(){
          alert('saved');
     })
} 
```

# actionscript-3 - gotoAndPlay 问题

> ID：12000664
> 
> 赞同：0
> 
> 时间：2012-08-17T06:15:48.783
> 
> 标签：actionscript-3, flash, switch-statement, goto

任何人都可以帮助我使用 AS3 gotoAndPlay()。我研究了 AS3 中这个函数的用法，但由于某种原因我的代码不起作用。

```
import flash.display.MovieClip;
function disInfo(event:MouseEvent):void
{
switch (event.currentTarget.name)
{
    case "one_mc" :
    Object(this).top_mc.one_mc.gotoAndPlay(2);
        break;
    case "two_mc" :
        gotoAndPlay(2);
        break;
}
};
Object(this).top_mc.two_mc.addEventListener(MouseEvent.CLICK, disInfo); 
```

这是否与我将它与 switch 语句结合使用的方式有关。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:22:53.977

我想，你的代码有点意大利面。

你的代码很奇怪..不是 addEventListener `top.one_mc`。

参考以下代码。

```
import flash.display.MovieClip;

function disInfo(event:MouseEvent):void
{
    var mc:MovieClip = event.currentTarget as MovieClip;

    mc.gotoAndPlay(2);
};

top.one_mc.addEventListener(MouseEvent.CLICK, disInfo);
top.two_mc.addEventListener(MouseEvent.CLICK, disInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:27:37.303

你能告诉我们更多关于你正在尝试做的事情吗？我们需要知道你的元素叫什么，你想做什么，才能给你一个明确的答案。

使用以下代码确定您的交换机是否正常工作。**让我们知道跟踪的内容**：

```
 import flash.display.MovieClip; 
    function disInfo(event:MouseEvent):void {  
    trace(event.currentTarget.name); 
    switch (event.currentTarget.name) {
        case "one_mc" :
        Object(this).top_mc.one_mc.gotoAndPlay(2);
            break;
        case "two_mc" :
            gotoAndPlay(2);
            break; } 
}; 
    Object(this).top_mc.two_mc.addEventListener(MouseEvent.CLICK, disInfo); 
```

# c# - 管道通讯

> ID：12000667
> 
> 赞同：0
> 
> 时间：2012-08-17T06:16:09.553
> 
> 标签：c#, c

我正在创建一个应用程序，其中包含三个组件：

*   EXE1
*   WCF 服务
*   EXE2

EXE1 将数据写入管道，然后 WCF 读取数据并将其发送到 EXE2。但情况是，EXE1 在 for 循环中将数据写入管道。所以我只想知道，假设 EXE1 已将数据写入管道但 wcf 正在做一些其他工作并且尚未读取该数据。现在 EXE1 试图写入第二个数据。所以在这种情况下，无论是先前的数据被覆盖还是 EXE1 等待 wcf 服务一段时间。

我想控制这种情况，直到 wcf EXE1 没有读取第一个数据之前必须等待一段时间。我想将数据同步发送到 EXE2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:30:30.320

因为它被命名为*PIPE*数据先进来先出来，管道中的数据不会被覆盖。

在另一端读取它之前等待写入：您最好控制在另一端读取多少（例如，将消息长度作为第一个字节传递）。所以读者知道它应该读多少，并且一次只能从管道中读取那么多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:27:35.313

您必须让服务确认其将要接收`WCF`的一组特定内容。`bytes`

所以`Exe1`发送 10 个字节并等待 WCF 确认它。

如果`WCF`不承认，`Exe1`将重新发送它（超时）！

如果`WCF`确认，您将发送接下来的 10 个字节，依此类推......

# php - 在 PHP 中使用 SOAP 寻求帮助

> ID：12000670
> 
> 赞同：-3
> 
> 时间：2012-08-17T06:16:26.633
> 
> 标签：php, soap

我在 PHP 中工作，但从未使用过 SOAP 之类的东西。但是今天我的经理告诉我从以下 SOAP 请求中获取请求。因为我不知道 SOAP 是什么，它的用途是什么，甚至不知道如何在我的页面中使用它。有人可以告诉我如何从这个示例请求中提出请求吗？谢谢。我尝试搜索谷歌，但没有找到相关结果。

```
POST /TestService/Service.asmx HTTP/1.1
Host: 123.12.12.123
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://abc.com/Mobile"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Mobile xmlns="http://abc.com/">
      <str>string</str>
    </Mobile>
  </soap:Body>
</soap:Envelope> 
```

**长度**和**字符串**是占位符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:23:41.527

这是 SOAP [http://en.wikipedia.org/wiki/SOAP](http://en.wikipedia.org/wiki/SOAP)

这是带有 PHP 的 SOAP [http://php.net/manual/de/book.soap.php](http://php.net/manual/de/book.soap.php)

这些链接首先出现在 Google 上。想念他们一定很难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:01:09.183

这是一个非常有用的库，到这个页面下载它：http: [//sourceforge.net/projects/nusoap/files/](http://sourceforge.net/projects/nusoap/files/)

这是开发人员提供的示例之一：

```
require_once('lib/nusoap.php');
$proxyhost = isset($_POST['proxyhost']) ? $_POST['proxyhost'] : '';
$proxyport = isset($_POST['proxyport']) ? $_POST['proxyport'] : '';
$proxyusername = isset($_POST['proxyusername']) ? $_POST['proxyusername'] : '';
$proxypassword = isset($_POST['proxypassword']) ? $_POST['proxypassword'] : '';
$client = new soapclient('http://www.xignite.com/xquotes.asmx?WSDL', true,
                        $proxyhost, $proxyport, $proxyusername, $proxypassword);
$err = $client->getError();
if ($err) {
    echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
}
// Doc/lit parameters get wrapped
$param = array('Symbol' => 'IBM');
$result = $client->call('GetQuickQuotes', array('parameters' => $param), '', '', false, true);
// Check for a fault
if ($client->fault) {
    echo '<h2>Fault</h2><pre>';
    print_r($result);
    echo '</pre>';
} else {
    // Check for errors
    $err = $client->getError();
    if ($err) {
        // Display the error
        echo '<h2>Error</h2><pre>' . $err . '</pre>';
    } else {
        // Display the result
        echo '<h2>Result</h2><pre>';
        print_r($result);
        echo '</pre>';
    }
}
echo '<h2>Request</h2><pre>' . htmlspecialchars($client->request, ENT_QUOTES) . '</pre>';
echo '<h2>Response</h2><pre>' . htmlspecialchars($client->response, ENT_QUOTES) . '</pre>';
echo '<h2>Debug</h2><pre>' . htmlspecialchars($client->debug_str, ENT_QUOTES) . '</pre>'; 
```

# java - 以纳秒为单位的字符串日期转换

> ID：12000673
> 
> 赞同：17
> 
> 时间：2012-08-17T06:16:41.953
> 
> 标签：java, android, simpledateformat, datetime-format, date-parsing

我一直在为 Android 应用程序的这段代码苦苦挣扎，但我无法掌握它。我已经阅读并尝试了在 stackoverflow 和其他地方找到的所有解决方案，但仍然没有运气。

我想要做的是有一个函数可以将字符串转换`"17.08.2012 05:35:19:7600000"`为 UTC 日期和一个函数，该函数接受一个`UTC date`并将其转换为这样的字符串。

```
String value = "17.08.2012 05:35:19:7600000";
DateFormat df = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss:SSSSSSS");
try
{
  Date today = df.parse(value);
  System.out.println("Today = " + df.format(today) + " " + today.toGMTString());
} 
catch (ParseException e)
{
  e.printStackTrace();
} 
```

这导致 :`Today = 17.08.2012 07:41:59:0000000 17 Aug 2012 04:41:59 GMT`这两个都是错误的。

我尝试设置`SDF's timezone`为`UTC`，没有运气。
我注意到的另一件事：如果我这样做`df.setLenient(false);`
，它给了我：`java.text.ParseException: Unparseable date: "17.08.2012 05:35:19:7600000"`。

如果有人能给我一些解释/示例代码，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T06:25:31.243

你得到的结果是绝对正确的。

我们来分析一下：

```
17.08.2012 05:35:19:7600000 
```

*   17：一个月中的某天（17 日）
*   08：一年中的月份（八月）
*   2012：年（2012）
*   05：一天中的时间（早上 5 点）
*   35: 分钟 (:35)
*   19：分秒 (:19)
*   7600000：毫秒（7,600,000）

现在，VM 看到这一点的方式是，您将一天中的时间声明为上午 5:35:19，然后添加 7,600,000 毫秒。7,600,000 毫秒 = 7,600 秒 = 2 小时 6 分钟 40 秒。上午 5:35:19 + 02:06:40 = 上午 7:41:59（和 0 毫秒）。这就是你得到的结果。（您似乎也没有正确设置时区，因此 GMT 字符串比您的结果晚 3 小时。）

如果你想保留`:7600000`，据我所知这是不可能的。由于这可以简化为秒，VM 会自动将其减少为其他时间增量。毫秒 (the `SSSS`) 应该用于存储 <1000 的值。

我建议你`SimpleDateFormat`为你的输出创建一个新的；但请记住，毫秒将被吸收到其他时间（因为它们都作为单个存储`long`在`Date`对象中）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T06:22:25.887

```
 private String convertDate(String cdate)
{
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss:SSSSSSS");
    SimpleDateFormat postFormater = new SimpleDateFormat("yyyy-MM-dd");
    Date convertedDate;
    try
    {
        convertedDate = dateFormat.parse(cdate);
        cdate = postFormater.format(convertedDate);
    }
    catch (ParseException e)
    {
        Toast.makeText(getApplicationContext(),e.toString(),Toast.LENGTH_SHORT).show();
    }
    return cdate;
} 
```

试试这个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-12T15:56:20.793

这是您需要的（但它会丢失毫秒信息）：

```
"dd.MM.yyyy HH:mm:ss.'000000'" 
```

如果您使用`"dd.MM.yyyy HH:mm:ss.SSSSSS"`，那么您的毫秒内将获得三个前导零。

如果您使用`"dd.MM.yyyy HH:mm:ss.SSS'000'"`，那么您可以格式化日期，但不解析任何日期。

试试看：

```
public static void main(String[] args) throws ParseException {
    printDate("dd.MM.yyyy HH:mm:ss.SSS");//02.05.2010 21:45:58.073
    printDate("dd.MM.yyyy HH:mm:ss.SSSSSS");//02.05.2010 21:45:58.000073
    printDate("dd.MM.yyyy HH:mm:ss.SSS'000'");//02.05.2010 21:45:58.073000
    printDate("dd.MM.yyyy HH:mm:ss.'000000'");//02.05.2010 21:45:58.000000

    tryToParseDate("dd.MM.yyyy HH:mm:ss.SSS");//good
    tryToParseDate("dd.MM.yyyy HH:mm:ss.SSSSSS");//good
    tryToParseDate("dd.MM.yyyy HH:mm:ss.SSS'000'");//bad
    tryToParseDate("dd.MM.yyyy HH:mm:ss.'000000'");//good
}

private static void printDate(String formatString) {
    Date now = new Date();
    SimpleDateFormat format = new SimpleDateFormat(formatString);
    String formattedDate = format.format(now);

    // print that date
    System.out.println(formattedDate);
}

private static void tryToParseDate(String formatString) {
    Date now = new Date();
    SimpleDateFormat format = new SimpleDateFormat(formatString);
    String formattedDate = format.format(now);

    // try to parse it again
    try {
        format.parse(formattedDate);
        System.out.println("good");
    } catch (ParseException e) {
        System.out.println("bad");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-10T17:46:35.320

要减少纳秒，请使用：

```
new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.") 
```

# c# - 通过 WebClient.DownloadFile 获取的文件立即消失

> ID：12000677
> 
> 赞同：2
> 
> 时间：2012-08-17T06:17:10.427
> 
> 标签：c#, .net

我遇到了一个奇怪的问题，我有一个更新程序的简单服务，它可以很好地下载文件，资源管理器显示它，但是下载后一两秒钟它就从资源管理器中消失了；并且下载后刚刚运行exe的服务无法启动它，因为它显然不存在。

```
protected override void OnStart(string[] args)
{
    Update();           
}

public void Update()
{          
    WebClient WebClient = new WebClient();
    WebClient.DownloadFile("http://xxxxxxx/xx/test.exe", @"C:\test.exe");
    Load(); //Just runs the exe file.            
} 
```

我检查了我的 AV，它没有阻止它，在没有下载部分的情况下测试了加载代码，工作正常，只有当我尝试下载它时才会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:52:52.537

我发现是我的服务器有问题，文件名应该是改的，但是没有，所以当我调用 WebClient.DownloadFile 时，它​​找不到要下载的文件，所以它有一个 0 字节删除它之前在磁盘上的文件，因为没有什么可下载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:35:21.880

您向 root 写入文件`C`非常有说服力。

您的程序可能没有正确的写入权限，`C:`而不是获得异常，File VirtualStore 启动并`virtualized`访问您的文件。

尝试搜索它`test.exe`，您可能会在某个不起眼的位置找到它，例如

```
C:\Users\User_name\AppData\Local\VirtualStore. 
```

# node.js - node.js 上的 node.js 响应缓冲

> ID：12000678
> 
> 赞同：0
> 
> 时间：2012-08-17T06:17:14.610
> 
> 标签：node.js, nginx

我正在开发一个 node.js 服务，该服务每秒将有多个请求 - 比如 1000。让我们想象一下响应数据的权重，与我们的客户端的连接非常慢，并且需要大约 1 秒才能将响应发送回给客户。

问题 #1 - 我想如果没有代理缓冲，node.js 需要 1000 秒才能发回所有响应，因为这是阻塞操作，不是吗？

问题 #2 - nginx 缓冲区（以及一般的缓冲区）如何工作？我是否能够接收到所有 1000 个对缓冲区的响应（前提是 RAM 不是问题），然后才将它们刷新到客户端？proxy_buffers 的限制是什么？我可以将多个缓冲区设置为每个 1000 1K 吗？

目标是尽快从 node.js 中清除所有响应，以免阻塞它并让其他系统来传递它们。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:41:38.857

当然，发送响应是非阻塞操作。Node 只是将一个块提供给网络驱动程序，将所有其他工作留给您的操作系统。

如果发送响应是一个阻塞操作，它只需要一台个人电脑，其网络被人为地瘫痪到 DoS 任何基于节点的服务。

# c# - 原生 SQL 和实体 SQL 的区别

> ID：12000683
> 
> 赞同：2
> 
> 时间：2012-08-17T06:17:41.613
> 
> 标签：c#, sql, entity-framework

我已经阅读了一篇关于使用 EntityConnection、EntityCommands 执行 Entity sql 查询的文章。但我无法理解为什么我们使用实体 sql？为什么不直接使用类和对象来处理数据库上的 CRUD 操作？

或者，如果我们想执行 sql 查询，那么为什么我们使用 Entity Sql，为什么不直接使用 Ado.net？

是否有任何性能差异或其他？我已经浏览了[http://msdn.microsoft.com/en-us/library/bb738573.aspx](http://msdn.microsoft.com/en-us/library/bb738573.aspx)页面。但我想以更简单的方式回答。你能回答我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:45:04.073

> 为什么不直接使用类和对象来处理数据库上的 CRUD 操作？

那是（应该是）几乎所有操作的方式。但有时需要更直接、更精确地访问数据库。

> 如果我们想执行 sql 查询，那么为什么我们使用 Entity Sql，为什么不直接使用 Ado.net 呢？

E-SQL 仍然允许您使用实体（而不是行）。这更容易也更强大，例如考虑继承。

E-SQL 也应该独立于实际数据库，即 Oracle 等。我还没有这方面的经验。

> 是否有任何性能差异或其他？

它可以用来提高性能，是的。但不是自动的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:46:43.830

主要区别

*   SQL 是处理存储（关系）对象 - 表/行的数据库相关查询语言
*   ESQL 是处理概念 (EDMX) 对象 - 实体的独立于数据库的查询语言

ESQL 是在 LINQ 之前创建的。在某些情况下，ESQL 提供了比 LINQ 更多的功能。

# r - 对 commandArgs 的写访问权限？

> ID：12000685
> 
> 赞同：1
> 
> 时间：2012-08-17T06:18:06.480
> 
> 标签：r

我知道我可以`commandArgs`用来读取传递给 R 中脚本的命令行参数，但我想通过在 R 中对其进行调试`source`并使用自定义命令行参数使其运行来调试命令行脚本。有没有办法在不修改脚本文件的情况下修改命令行参数？

如果有帮助，我的脚本通常使用该`optparse`包进行实际参数解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:03:48.333

我将尝试扩展我在评论中所说的内容。

python 编写脚本的方式通常包括检测文件是否作为脚本运行，处理参数，然后调用文件中定义的函数。就像是：

```
def foo(x):
    return x*2

if __name__=="__main__":
    v = sys.argv[1]
    print foo(v) 
```

这样做的好处是您可以将文件导入交互式 python 会话，并且“if”块中的代码不会运行。`foo`然后，您可以交互地测试该功能。

现在有没有一种方法可以检查 R 文件是作为脚本运行，还是来自交互式会话？

```
foo=function(x){
 return(x*2)
}

if(!interactive()){
 x = as.numeric(commandArgs(trailingOnly=TRUE)[1])
 print(foo(x))
} 
```

如果 run with`Rscript argtest.R 22`将打印 44，如果您以交互方式运行 R 并执行`source("argtest.R")`它将不会运行 if 块中的代码。这是一个很好的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:31:54.980

如何简单地用您自己的定义覆盖它，例如

```
commandArgs <- function(trailingOnly=FALSE) { 
    args<- c("/foo/bar", "baz") 
    # copied from base:::commandArgs
    if (trailingOnly) {
        m <- match("--args", args, 0L)
        if (m) 
            args[-seq_len(m)]
        else character()
    }
    else args
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T22:22:13.820

最简单的解决方案是替换`source()`为`system()`. 尝试

```
system("Rscript file_to_source.R 1 2 3") 
```

# haskell - GHC 无法加载 fftw 绑定，这是什么问题？

> ID：12000690
> 
> 赞同：0
> 
> 时间：2012-08-17T06:18:46.073
> 
> 标签：haskell, linker, ghc, fftw

我正在尝试在 Math.FFT 中使用 fftw haskell 绑定。尝试编译 ghc 时会吐出以下内容

：/usr/local/lib/libfftw3.a：坏魔法。预期：feedface，得到：feedfacf。

ghc：恐慌！（发生了“不可能”）（i386-apple-darwin 的 GHC 版本 7.4.1）：loadArchive “/usr/local/lib/libfftw3.a”：失败

请将此报告为 GHC 错误： [http ://www.haskell.org/ghc/reportabug](http://www.haskell.org/ghc/reportabug)

我已经重新安装了 fftw3 但没有任何变化，有什么建议可以解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:38:09.343

坏魔法意味着目标文件已损坏，或者您的机器格式错误。

由于您在 i386-darwin 上并尝试链接，这表明您的 .a 或 .o 或 .so 文件不适合您的架构。

# excel - 如何从Excel中获取特定日期范围内的数据

> ID：12000691
> 
> 赞同：2
> 
> 时间：2012-08-17T06:18:53.500
> 
> 标签：excel, c#-4.0

我正在尝试使用 C# 从 Excel 获取数据。我的 Excel 数据包含多条记录，但我需要两个日期之间的数据。

我尝试使用以下代码：

```
OleDbCommand cmd=new OleDbCommand("select field1,field2,joiningdate from [Sheet1$] where joiningdate >=to_date('"+startDate+"','MM/DD/YYYY') and joiningdate <=to_date('"+endDate+"','MM/DD/YYYY')", con); 
```

我可以通过 DateTimePicker 控件获取 startDate 和 endDate 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:07:02.457

尝试以下查询：

```
select field1,field2,joiningdate from [Sheet1$] 
where joiningdate between CDate(startDate) and CDate(endDate) 
```

这是假设您的加入日期列被格式化为日期类型。

# c# - 如何通过分页将gridview导出到excel工作表

> ID：12000694
> 
> 赞同：1
> 
> 时间：2012-08-17T06:19:44.217
> 
> 标签：c#, asp.net, export-to-excel

我尝试使用单选按钮列表让用户选择是否要将gridview的当前页面或整个gridview导出到excel工作表，但只有当前页面在工作，至于将整个gridview导出到一个excel表，它只显示标题行。这里有什么问题，与radiobuttonlist的selectedindex有关吗？

```
protected void btnExport_Click(object sender, EventArgs e)
{
    if (this.RadioButtonList1.SelectedIndex == 1)
    {
        //  the user wants all rows in the current page, set pagesize and rebind
        this.GridView1.PageSize = 10;
        this.GridView1.DataBind();
    }
    else if (this.RadioButtonList1.SelectedIndex == 2)
    {
        //  the user wants all rows exported, have to turn off paging and rebind
        this.GridView1.AllowPaging = false;
        this.GridView1.DataBind();
    }
    GridViewExportUtil.Export("ContactsInformation.xls", this.GridView1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:32:37.103

只是一个想法

```
protected void btnExport_Click(object sender, EventArgs e)
{
    var collection = GetTheDataSource(); // Get the source.

    if (this.RadioButtonList1.SelectedIndex == 1)
    {
        //  take first 10 items from the collection     
        collection = collection.Take(10); 
    }
    //set the grid source followed by binding it
    this.GridView1.DataSource = collection;
    this.GridView1.DataBind();

    //Export the grid record to excel
    GridViewExportUtil.Export("ContactsInformation.xls", this.GridView1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:09:16.640

您可以使用以下代码...使用 Linq 将特定记录从 Datasource 绑定到 Grid 视图，同时分页绑定整个 Datasource ..然后使用 Gridview 到您的 Export 方法.. 这应该可以工作...

```
protected void btnExport_Click(object sender, EventArgs e) 
        {    
              var datasource;
              if (this.RadioButtonList1.SelectedIndex == 1)     
               {         
                  int pageSize = 10; 
                  datasource= GridViewDatasourceCollection.Skip(pageSize * pageNumber).Take(pageSize);    
                  this.GridView1.DataSource= datasource;    
                  this.GridView1.DataBind();     
               }     
               else if (this.RadioButtonList1.SelectedIndex == 2)     
               {         
                  //  the user wants all rows exported, have to turn off paging and rebind                
                  this.GridView1.AllowPaging = datasource;         
                  this.GridView1.DataBind();     
               }     
               GridViewExportUtil.Export("ContactsInformation.xls", this.GridView1); 
           } 
```

# mysqldump - 复制 mysql 数据库在导入时生成“错误：未知命令”

> ID：12000697
> 
> 赞同：2
> 
> 时间：2012-08-17T06:20:23.363
> 
> 标签：mysqldump

我在使用 xampp 的日文系统上。这是我用来转储数据库的行。

```
c:\xampp\mysql\bin>mysqldump.exe -uroot wp_newsja > dump.sql 
```

然后我在另一台服务器上创建一个数据库。

```
c:\xampp\mysql\bin>mysqladmin -uroot create db 
```

但是当我尝试执行 sql...

```
c:\xampp\mysql\bin>mysql -uroot db < dump.sql 
```

...我收到以下错误。

```
ERROR at line 145: Unknown command '￥''. 
```

在日本计算机 Windows 路径斜杠 / 用“￥”表示。这让我相信这是一个 utf8 问题。也许有一种方法可以用一些 utf8 标志进行 mysqldump？感谢您的帮助！导出的 sql 在这里：http: [//goo.gl/7MPVG](http://goo.gl/7MPVG) - 第 145 行出错：

编辑：问题已解决：

```
mysql --default-character-set=utf8 db < dump.sql 
```

对不起，如果我浪费了任何人的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:38:37.803

```
mysql --default-character-set=utf8 db < dump.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T11:26:17.697

您可以在命令中添加此参数 --default-character-set=utf8 ：

mysql -u USERNAME -p my_database --default-character-set=utf8 < "C:/My Document Names Have Spaces/my_dump.sql"

我终于找到了这个解决方案，它适用于我新安装的 WampServer 2.5。我也尝试在 my.ini 中添加默认字符设置，但没有用。直到我尝试将上述参数添加到我的 DOS 批处理文件中。

我的批处理文件执行命令，像这样： 7zip x -so %1.%2.7z|%mysql% -uxxxx -pyyyyy %2 --default-character-set=utf8

例如7zip文件名为20141231.google.7z，其中包含“google.sql”，数据库名称为google

我在 Linux 系统上的备份过程是 7zip 压缩的。在 Winodws 中，我使用了一个自动批处理文件来恢复相同的内容，这样我就可以在我的商务旅行中共享同一个数据库并从服务器脱机工作。

希望这个方法对你有帮助。

# iphone - 如何在邮件编辑器中附加两个图像

> ID：12000698
> 
> 赞同：1
> 
> 时间：2012-08-17T06:20:42.873
> 
> 标签：iphone, email, ios5

我正在制作一个用于在邮件中插入两个图像的 iPhone 项目。这些图像是从照片库中选择的，它们存储在两个单独的图像视图中。当我在电子邮件中附加图像时，它没有正确附加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:15:10.393

您可以创建一个 html 页面代码并将该图像作为标记插入，并将整个 html 作为字符串传递到 MFMailComposer for Body。它看起来很酷。你需要写下这一行

```
MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
        controller.mailComposeDelegate = self;
        if ([recipentArray count]>0) 
        {
            [controller setToRecipients:self.recipentArray];
        }
        [controller setSubject:self.emailSubject];
        [controller setMessageBody:self.messageBody isHTML:YES]; // isHTML -> YES/NO depending the message body
        [object presentModalViewController:controller   animated:YES];
        RELEASE_SAFELY(controller); 
```

实现**MFMailComposer**后，如果您在正文中使用 html 页面，则需要设置**bool**。如果您有任何疑问，请告诉我。

# android - 在 android 应用程序包中包含 OpenCV

> ID：12000710
> 
> 赞同：7
> 
> 时间：2012-08-17T06:21:25.130
> 
> 标签：android, image, image-processing, opencv

我需要从图像中检测边缘，为此我使用 Canny 算法。由于 OpenCV for android 在我尝试运行它说的示例时可用 2.4.2。“OpenCV Manager 未安装，请尝试安装。” 从市场上安装后，它工作正常。

但是，如果我希望用户安装我的应用程序，这样他们就不必安装另一个 .apk 来使用我的应用程序。

-> 如何在不要求另一个应用程序的情况下使用openCV，即应该预先安装管理器。？

-> 有什么方法可以在没有 OpenCV 的情况下使用 Canny 算法进行边缘检测，任何好的算法教程可以在 android 中实现。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:54:43.453

[您可以在OpenCV 网页](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)上找到有关这方面的信息。这就是说，这已被弃用，OpenCV 建议不要在生产中这样做。管理器实际上允许用户一次性下载 OpenCV 库。然后，您的应用程序将小得多！

关于不使用 OpenCV，您可以尝试 FastCV（如 Aaron 建议的那样），但这对您的应用程序来说似乎有点过分（并且需要您熟悉 NDK 开发）。另一方面，使用 OpenCV，您可以在 java 中编码（顺便看看[JavaCV](https://code.google.com/p/javacv/)）或使用 NDK。

最后，如果你只需要一个 Canny Edge 检测器并且不想使用库，你可以尝试自己编写它。[维基百科](http://en.wikipedia.org/wiki/Canny_edge_detector)上的相关页面应该足够了（几年前我可以作为练习来做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:52:33.260

你看过高通的 FastCV 吗？它提供了一些在 OpenCV 等库中提供的更常见的图像处理算法。他们还有一个非常酷的增强现实 API，称为 Vuforia。

公平警告，支持文档不是很好，它要求您熟悉 NDK 开发。

[https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv)

# android - 如何在android中检索当前系统屏幕亮度值？

> ID：12000711
> 
> 赞同：3
> 
> 时间：2012-08-17T06:21:28.133
> 
> 标签：android, brightness

我正在尝试创建一个应用程序，它将以编程方式设置 android 设备的亮度。我已经设法使用以下代码更改设备亮度：

```
BackLightValue = (float)arg1/100;
BackLightSetting.setText(String.valueOf(BackLightValue));

WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
layoutParams.screenBrightness = BackLightValue;
getWindow().setAttributes(layoutParams); 
```

我已使用以下代码检索当前系统亮度值：

```
try {
    BackLightValue = android.provider.Settings.System.getInt(getContentResolver(), android.provider.Settings.System.SCREEN_BRIGHTNESS);
} catch(Exception e) {} 
```

上面的代码应该给我当前的亮度设置值，但是当我启动一个应用程序时，它显示的默认值是 50%。

出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T06:27:58.340

这是正确的行为，因为将 screenBrightness 设置为 -1 会将亮度设置为当前系统亮度级别。

```
int curBrightnessValue = android.provider.Settings.System.getInt(getContentResolver(), android.provider.Settings.System.SCREEN_BRIGHTNESS,-1); 
```

清单文件中的权限。

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

# javascript - 如何使 Ajax 文件上传与 Jqgrid 同步工作

> ID：12000715
> 
> 赞同：1
> 
> 时间：2012-08-17T06:22:04.110
> 
> 标签：javascript, jquery, jqgrid

我正在使用来自[http://www.phpletter.com/Demo/AjaxFileUpload-Demo/](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)的 AjaxFileUpload 插件。

我正在尝试从 Jqgrid 中的表单编辑框上传文件。由于我在一个编辑表单（Jqgrid 表单编辑）中进行文件上传，它还会更新其他字段，我将对**AjaxFileUpload**函数的调用链接到 Jqgrid 上的**beforeSubmit**事件。这使我能够在提交其他表单数据之前将来自 AjaxFileUpload 的响应返回给 Jqgrid。因此，如果文件上传出错，我可以将错误返回给 Jqgrid，它不会提交表单。（只有文件上传成功才会提交表单。）

但是，为了使上述内容正常工作，我需要 AjaxFileUpload 同步工作，而不是默认异步工作。我设置了 async:false 但它似乎仍在异步工作。我知道这一点是因为如果在 Firebug 中我向成功函数和错误函数添加断点（以便执行暂停几秒钟以完成文件上传），那么一切都按预期工作 100%。但是，当我删除断点以便实时执行时，成功或错误函数返回的响应仍未定义。

如何使 AjaxFileUpload 同步运行？我的代码摘录如下：

```
function ajaxFileUpload(formid)
{
    var uploadresponse = [false, "by default"];

    $.ajaxFileUpload(
        {
            url:'EditData.aspx?MyIdentifier=' + $("#MyIdentifier").val(),
            secureuri:false,
            fileElementId:'filename',
            dataType: 'JSON',
            data: {id: formid},
            async:false,                
            success: function (dataIn, status)
            {
                var errorResponse = $.parseJSON(dataIn);
                if((errorResponse != null)&&(typeof(errorResponse.error) != 'undefined'))
                {
                    if(errorResponse.error != '')
                    {
                        uploadresponse = [false, errorResponse.explanation];
                    }
                }
                else
                {
                    uploadresponse = [true, "Successfully uploaded file"];
                }
            },
            error: function (datain, status, e)
            {
                uploadresponse = [false, e];
            }
        }
    );
    return uploadresponse;
} 
```

（在上面的代码中，如果我没有设置断点，那么 uploadresponse 中的响应始终是 [false, "by default"] 但如果我设置了断点，则根据成功和错误函数正确设置了 uploadresponse。）

# php - 根据多维数组中的匹配值返回一个值

> ID：12000717
> 
> 赞同：1
> 
> 时间：2012-08-17T06:22:10.217
> 
> 标签：php, multidimensional-array

我有一个由（a）描述，（b）最小年数和（c）最大年数组成的多维数组：

```
$years_array = array( 
 array("Any", 0, 255),
 array("New", 0, 1),
 array("5 - 10yrs", 5, 10),
 array("10 - 20yrs", 10, 20)
); 
```

给定最小`$min`和最大`$max`年数，我如何匹配它以给出`$description`数组中的描述？

例子：

```
$min = 5, $max = 10 => $description = "5 - 10yrs"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:33:10.743

```
function match_desc($arr,$min,$max) { 
    // first filter an array to match $min and $max
    $filtered = array_filter($arr, function($v) use ($min,$max) { 
        list($desc,$miny,$maxy) = $v; 
        return $min == $miny && $max == $maxy; 
    });
    // return only descriptions
    return array_map(function($v) { return $v[0]; },$filtered);
}

match_desc(array( 
 array("Any", 0, 255),
 array("New", 0, 1),
 array("5 - 10yrs", 5, 10),
 array("10 - 20yrs", 10, 20)
), 0,1); 
```

将返回`array(0 => "New");`

这个函数认为你可能有一个像

```
$years_array = array( 
 array("Desc1", 0, 255),
 array("Desc2", 0, 255),
); 
```

因此，`return array(0 => "Desc1", 1 => "Desc2");` 如果函数与传递的 min 和 max 不匹配，则将 0 和 255 作为 min 和 max 输入，它将返回一个空数组，并且可以很容易地用[`empty`](http://php.net/manual/ru/function.empty.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:30:44.153

尝试这样的事情：

```
function getDescription($min,$max) 
{
  // source
  $years_array = array( 
    array("Any", 0, 255),
    array("New", 0, 1),
    array("5 - 10yrs", 5, 10),
    array("10 - 20yrs", 10, 20)
  );
  foreach ($years_array as $yearRecord) {
    if ($min == $yearRecord[1] && $max == $yearRecord[2])) {
      return $yearRecord[0];
    }
  }
  return false;
}

getDescription(0, 255); // == "Any" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T06:30:56.077

```
function searchArray($min, $max, $years_array)
{
  foreach($years_array as $years)
  {
    if($years[1] == $min && $years[2] == $max) return $years[0];
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T06:31:06.420

快速，肮脏，只是为了展示一种可能性......

```
<?php
$years_array = array( 
 array("Any", 0, 255),
 array("New", 0, 1),
 array("5 - 10yrs", 5, 10),
 array("10 - 20yrs", 10, 20)
);

function getYearDescription(&$years, $min, $max) {
 foreach($years as $year) {
  if($year[1] == $min && $year[2] == $max) {
    return $year[0];
  }
 }

 return "n/a";
}

echo(getYearDescription($years_array, 5, 10));
?> 
```

我想你需要一个完全匹配

# cocoa - NSSegmentedCell 子类绘图

> ID：12000720
> 
> 赞同：2
> 
> 时间：2012-08-17T06:22:28.610
> 
> 标签：cocoa, subclass, nssegmentedcontrol

我创建了 NSSegmentedCell 的子类并实现了 drawWithFrame，如下所示：

```
#import "CustomSegmentedCell.h"

@implementation CustomSegmentedCell

- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView {

    int i=0, count=[self segmentCount];
    NSRect segmentFrame=cellFrame;

    for(i=0; i<count; i++) {
        segmentFrame.size.width=[self widthForSegment:i];
        [NSGraphicsContext saveGraphicsState];
        // Make sure that segment drawing is not allowed to spill out into other segments
        NSBezierPath* clipPath = [NSBezierPath bezierPathWithRect: segmentFrame];
        [clipPath addClip];
        [self drawSegment:i inFrame:segmentFrame withView:controlView];
        [NSGraphicsContext restoreGraphicsState];
        segmentFrame.origin.x+=segmentFrame.size.width;
    }

    _lastDrawRect=cellFrame;

}

@end 
```

问题是在第一次启动应用程序时没有绘制分段，只有当我用鼠标单击分段控件假设绘制的空白区域时，它才会可见。请告诉我，我在这里缺少什么。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:07:59.130

子类化和实现`drawSegment:inFrame:withView:`

```
- (void)drawSegment:(NSInteger)segment inFrame:(NSRect)frame withView:(NSView *)controlView
{
    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:frame xRadius:8 yRadius:8];
    [path setClip];
    [path setLineWidth:2.5];
    [[NSColor grayColor] setStroke];
    NSColor* bgColr;
    if (segment%2) {
        bgColr = [NSColor blackColor];
    }
    else {
        bgColr = [NSColor redColor];
    }

    [bgColr setFill];
    [NSBezierPath fillRect:frame];  

} 
```

# svn - 如何为文件夹设置 Tortoise svn-property 以应用于其中的所有新文件

> ID：12000721
> 
> 赞同：1
> 
> 时间：2012-08-17T06:22:46.330
> 
> 标签：svn, version-control, properties, tortoisesvn

通常我们需要为我们使用 Tortoise 颠覆在我们的存储库中提交的文件设置以下属性

```
svn:eol-style as native
svn:executable as ON 
```

但是每当我`commit`向存储库**添加新**文件时，我都需要**重新设置**属性。这是一种**永久**设置这些的方法，这样我就不需要在每次签到后重复该过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:43:17.027

如此[处所述](http://svnbook.red-bean.com/en/1.5/svn.advanced.props.html#svn.advanced.props.auto)，

> 每当您使用 svn add 或 svn import 命令将文件引入版本控制时，Subversion 会尝试通过自动设置一些常用文件属性来提供帮助。

如果您想在此之上做一些事情，您需要[适当地](http://svnbook.red-bean.com/en/1.5/svn.advanced.confarea.html#svn.advanced.confarea.opts.config)配置您的 subversion 服务器- 本质上是编辑 subversion`config`文件并更新该`auto-props`部分。

[TortoiseSVN](http://tortoisesvn.tigris.org/)是一个颠覆客户端，只能做这么多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:33:24.817

**归功于 Raghuram 的答案提示**（这就是我接受他的答案的原因）

甚至`TortoiseSVN`提供了一种设置此类属性的方法

```
tsvn:autoprops 
```

[如此](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html)处所引

Subversion 允许您根据文件扩展名设置将应用于新添加或导入的文件的自动**属性。**这取决于每个客户端都在其 subversion 配置文件中设置了适当的 autoprops。`tsvn:autoprops`可以在文件夹上设置，并且在导入或添加文件时这些将与用户的本地 autoprops 合并。格式与 subversion 相同`autoprops`，例如

```
*.sh = svn:eol-style=native;svn:executable 
```

在扩展名为 .sh 的文件上设置两个属性。

# iphone - iOS 内存管理错误 - 消息发送到解除分配的实例

> ID：12000730
> 
> 赞同：0
> 
> 时间：2012-08-17T06:23:22.790
> 
> 标签：iphone, ios, button, uibutton

我之前创建了许多按钮，但由于某种原因，我无法创建一个简单的按钮。

在我的`viewDidLoad`方法中，我创建了一个非常基本的按钮：

```
_button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
_button.frame = CGRectMake(0, 0, 100, 25);
[_button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:_button];

- (void)buttonClicked:(id)sender
{
    NSLog(@"%@", sender);
    NSLog(@"Download issue");
} 
```

但是由于某种原因，当我单击它时，我只是收到了一个错误

> *** -[DownloadButtonViewController performSelector:withObject:withObject:]: 消息发送到释放的实例 0x6ac2af0

我不知道出了什么问题，因为代码与我之前创建的每个按钮完全相同......（可能只是度过了糟糕的一天......）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T06:27:29.540

您的视图控制器本身正在被释放。也许您正在使用 ARC 并且您没有对视图控制器的强引用，因此它在创建后立即被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:49:03.200

我刚刚复制粘贴了您的代码，它在这里工作正常，您可能会错误地在某个地方重新释放它，因为该对象是自动释放的，并且如上所述的 H2CO3 也是如此。

# junit - 如何在 Junit 3 中对我们的测试用例进行分组

> ID：12000731
> 
> 赞同：4
> 
> 时间：2012-08-17T06:23:23.797
> 
> 标签：junit

我需要从我的测试套件中运行一些选定的测试用例。测试用例在不同的测试类中可用。是否可以创建一些自定义注释并将 junit 配置为仅使用该注释运行测试用例？

如果您有任何建议，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:14:00.790

测试套件是测试的组合。它运行一组测试用例。这是一个使用动态测试定义的示例。

```
 TestSuite suite= new TestSuite();
 suite.addTest(new MathTest("testAdd"));
 suite.addTest(new MathTest("testDivideByZero")); 
```

或者，TestSuite 可以提取要自动运行的测试。为此，您将 TestCase 类的类传递给 TestSuite 构造函数。

```
 TestSuite suite= new TestSuite(MathTest.class); 
```

此构造函数创建一个套件，其中包含所有以“test”开头且不带参数的方法。

最后一个选择是对大量测试类执行相同的操作。

```
 Class[] testClasses = { MathTest.class, AnotherTest.class }
 TestSuite suite= new TestSuite(testClasses); 
```

来源：[http ://www.junit.org/apidocs/junit/framework/TestSuite.html](http://www.junit.org/apidocs/junit/framework/TestSuite.html)

# ruby-on-rails - 如何避免在rails中自动转换时间？

> ID：12000739
> 
> 赞同：0
> 
> 时间：2012-08-17T06:24:13.133
> 
> 标签：ruby-on-rails, xml

我正在使用 rails 2.3.9、ruby 1.9.3、rubygems 1.8.24、MS SQL Server 2008 R2 和 Ubuntu Server 11.04。

这是我的问题：

我通过 curl 将 xml 文件传递​​给我和我的老板开发的 web api，但是当文件得到处理时，时间似乎减去了八个小时。我的时区设置为 GMT+8，这意味着系统会自动将我的时间转换为 UTC。我该如何解决这个问题，以便我的时间设置为 GMT+8？

这是 XML 文件：

```
<pos-activity>
<siteId>3</siteId>
<transCode>DEP</transCode>
<supervisorCode>1235</supervisorCode>
<amount type="decimal">5000.0</amount>
<data></data>
<date type="datetime">2012-8-16 20:40:04</date>
</pos-activity> 
```

在此示例中，处理此文件时，结果时间将为 12:40:04 Z

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:32:42.803

将 config.time_zone 更改为您在 environment.rb 中想要的任何时区

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:27:10.240

```
@sometime.in_time_zone("your time zone") 
```

要查看时区列表，请运行`rake -D time`

# python - 从字符串 python 中删除 \xe2\x80\xa6

> ID：12000742
> 
> 赞同：2
> 
> 时间：2012-08-17T06:24:35.300
> 
> 标签：python, string, replace, ascii

我有很多 txt 文件，我需要替换其中的一些文本。几乎所有人都有这个`non-ascii`角色（我以为是`"..."`，但是……不一样）我试过`replace()`但我做不到，我需要一些帮助！提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:27:57.103

如果您使用[`codecs.open()`](http://docs.python.org/library/codecs.html#codecs.open)打开文件，那么您将获得所有字符串为`unicode`s，这[更容易处理](http://farmdev.com/talks/unicode/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:30:01.803

使用 unicode 类型的字符串。例如，

```
>>> print u'\xe2'.replace(u'\xe2','a')
a 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T06:34:08.137

问题是这些字符无效`str`，它们是`unicode`.

```
import re
re.sub(r'<string to repleace>','',text,re.U) 
```

大多数其他答案也可以

# powershell - 如何将powershell模块运送到生产环境？

> ID：12000745
> 
> 赞同：1
> 
> 时间：2012-08-17T06:25:07.173
> 
> 标签：powershell, powershell-2.0, powershell-module

我已经在 ps1 文件中编写了所有的 powershell 函数。

在另一个 ps1 文件中，它是点源文件，并且正在调用函数。

当我寻找更好的方法时，我开始知道将所有功能作为模块 (.psm1) 是更好的选择。

但是对于 .ps1 文件，我可以简单地将它放在一个文件夹中并发送它。

使用 .psm1 文件，它说我必须将其添加到特定位置以便可以导入。

那么如何向客户提供.psm1 文件呢？我们应该指示他们在使用之前复制到提到的位置吗？（如果我们不通过微星发货）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:03:25.993

从技术上讲，您可以通过路径导入 psm1 文件，但这并不是最好的用户体验。如果将文件放在 $home\documents\WindowsPowerShell\Modules 或 $pshome\Modules 下的文件夹中，则用户可以仅根据 psm1 文件的名称进行导入。最后，您可以将 psm1 文件放在您想要的任何位置，如果您修改 PSModulePath 环境变量以包含该目录，PowerShell 将在该目录中搜索模块。

# mysql - 在rails 3应用程序中将excel表转储到mysql数据库时不显示前导撇号

> ID：12000746
> 
> 赞同：0
> 
> 时间：2012-08-17T06:25:07.610
> 
> 标签：mysql, ruby-on-rails-3, csv, rubygems, spreadsheet

我正在使用脚本将数据转储到 rails 3 应用程序中的 mysql 数据库。

我在excel表中有一个单元格数据

'ABC

在将其转储到数据库时，它仅显示为

美国广播公司

我在 Fedora 15 上执行此操作，并在脚本中使用“电子表格 gem”来转储数据。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:56:50.663

解决，

`'`我已将脚本插入到`'`不存在的记录中

谢谢

# c++ - 如何在 C++ 中获取 put() 流指针的值

> ID：12000750
> 
> 赞同：0
> 
> 时间：2012-08-17T06:25:38.283
> 
> 标签：c++, file, pointers

如何获得 put() 流指针的值...（在 c++ 中）我的意思是必须写入下一个元素的位置的地址。

tellp() 只给出相对位置而不是绝对位置..

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:26:55.103

`seekp()`设置位置，没有得到它。

`tellp()`获取 put 指针的绝对位置。

# ruby - 使用 EOT、SOH、STX 等字符读取套接字

> ID：12000751
> 
> 赞同：0
> 
> 时间：2012-08-17T06:25:41.940
> 
> 标签：ruby, regex, sockets, celluloid

我正在使用赛璐珞 IO 从套接字读取。传入消息具有以下语法

一些文本一些文本一些文本

在哪里

```
SOH = Hex 1
FS  = Hex 1C
STX = Hex 2
ETX = Hex 3
EOT = Hex 4 
```

我的阅读代码是这样的 -

```
message = ""
begin
  data = socket.readpartial(4096)
  message << data
end until message =~ /not sure what goes here/ 
```

我正在寻找一种可靠的方式从套接字读取直到 EOT。阅读消息后，我将正则表达式输出相关部分。

在套接字读取流和正则表达式中检测上述十六进制字符的一些指导将非常有帮助。指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:12:23.743

这对我有用，谢谢

```
def parse(message)
  if message =~ /\001(.*)\01C(.*)\002(.*)\003\004/
    return ($1,$2,$3)
  end
end

def read_until_eot(socket)
  eot_found = false
  message = ''
  begin
    data = socket.read()
    eot_found = !!data['\004']
    message << data
  end until eot_found
  message.chomp!
end

def handle_connection(socket)
  # read from socket until EOT
  message = read_until_eot(socket) # <-- need help with
  if (origin,target,payload) = parse(message) #message can be parsed
    #   process message
    output_message = process(payload)
  end
  # write to socket
  socket.write output_message
  # close socket
  socket.close
end 
```

# c - 分配内存时内存泄漏

> ID：12000766
> 
> 赞同：1
> 
> 时间：2012-08-17T06:27:22.467
> 
> 标签：c, memory-management, memory-leaks, dynamic-arrays

我有一个创建二维数组的函数：

```
float** createMatrix(int x, int y){
    float** array= malloc(sizeof(float*) * y);
    for(int i=0; i<y; i++)
        array[i] = malloc(sizeof(float) * x);
    return array;
} 
```

现在我可以创建一个二维数组：

```
 float** temp=createMatrix(2,2); 
```

我还有一个函数，例如，它可以转置我的“矩阵”（二维数组）：

```
float** matrixTranspose(float** m, int x, int y){
    float** result=createMatrix(y, x);
    for(int i=0; i<y; i++){
        for(int j=0;j<x; j++) result[j][i]=m[i][j];
    }
    return result;
} 
```

现在，如果我这样做：

```
temp=matrixTranspose(temp,2,2); 
```

以前分配给 temp 的旧内存会发生什么？我的转置函数分配了新的内存块。显然，在换位之后我必须以某种方式释放“旧温度”，但是如何（优雅地）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:30:00.203

您`free`可以镜像您的分配：

```
int i;
for(i = 0; i < y; i++)
    free(array[i]);
free(array); 
```

但是，如果您分配给`temp`由 创建的新矩阵`matrixTranspose`，那么您将丢失指向该内存的指针。所以用另一个指针跟踪它，或者将结果分配`matrixTranspose`给另一个指针：

```
float **transposedMatrix = matricTranspose(...); 
```

如果您认为您的矩阵是可变的，您也可以将它们转置到位：而不是在`matrixTranspose`函数中分配新矩阵，而是在现有数组中移动数字。您可以使用一个`float temp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:29:51.267

调用时使用另一个变量（指针）`matrixTranspose`。然后，编写一个函数来`free`记忆矩阵。

像这样：

```
float** newTemp = matrixTranspose(temp,2,2);
freeMatrix( temp );
temp = newTemp; 
```

否则，您将丢失由 指向的内存，`temp`从而导致内存泄漏。

`freeMatrix`应该与分配内存对称：

```
for(int i=0; i<y; i++)
    free( array[i] );
free( array ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T06:32:41.513

你不这样做。为此，您将需要两个变量。

```
float **tmp2 = matrixTranspose(temp, 2, 2); 
```

并为矩阵编写一个释放函数：

```
void freeMatrix(float **m, int x) {
    int i;
    for (i = 0; i < x; i++) {
      free(m[i]);
    }
    free(m);
} 
```

只有**这样**你才能分配

```
temp = tmp2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:27:18.953

```
int FreeMatrix(char **matrix, int x, int y) {
  int i;
  for(i=0; i<y; i++) {
    free(matrix[i]);
  }
  free(matrix);
} 
```

这里不太优雅的部分是您必须跟踪分配的范围。有多种方法可以处理这个问题，大多数涉及跟踪它们，例如通过包装 malloc 和 free。谷歌的“无 malloc 多维数组”。

# sql - 用于显示月报表的 SQL 查询

> ID：12000770
> 
> 赞同：0
> 
> 时间：2012-08-17T06:27:36.483
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个包含以下列的表格

```
toolid, Quantity, dtfrom, dtto, projectid etc. 
```

我们有工具和项目的主表。这些工具具有特定时期的许可证，例如`dtfrom`2012 年 1 月 1 日和 2012 年 3 月 30 日`dtto`。

我必须显示特定月份购买的工具数量的月度报告。报告看起来像

```
sno  toolname projectname quantity jan feb mar apr ...... 
```

请帮助编写 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:58:41.813

如果出现任何性能问题，您可以尝试使用 PIVOT

```
select * from (
select sum(quantity) quantity,left(DATENAME(MM, dtfrom),3) month,projectid from test
group by DATENAME(month, dtfrom),projectid
) as p
PIVOT(
  MAX(quantity) for month in ([Jan],[Feb],[Mar],[Apr],[May],[Jun],[Jul],[Aug],[Sep],[Oct],[Nov],[Dec])
)as pvt 
```

[小提琴](http://sqlfiddle.com/#!3/7f6c6/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:35:25.227

你必须做这样的事情：

```
select 
  sno,
  toolname,
  projectname, 
  year(dtfrom) as year,
  jan=sum(case when month(dtfrom) =1 and month(dtto)=1 then quantity else 0 end),
  feb=sum(case when month(dtfrom) =2 and month(dtto)=2 then quantity else 0 end)
       .....
from <table>
group by toolname,
  projectname,
  dtfrom 
```

# java - 从 Cloud Foundry 节点应用程序调用 java 命令

> ID：12000775
> 
> 赞同：1
> 
> 时间：2012-08-17T06:27:50.197
> 
> 标签：java, node.js, cloud-foundry

在我的应用程序中，我想将 PDF 文件转换为图像，但看起来 node.js 中没有模块。所以我想使用java应用程序来完成这项工作。

我们可以在 Cloud Foundry 节点应用程序中调用 java 命令吗？

谢谢。

洪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:15:00.977

好的，所以我已经构建了一个可以完成这项工作的快速应用程序；

app.js 看起来像这样；

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , util = require('util')
  , fs = require('fs')
  , exec = require('child_process').execFile
  , http = require('http');

process.env.MAGICK_TMPDIR = __dirname + '/tmp'

var app = express();

app.configure(function(){
  app.set('port', process.env.VCAP_APP_PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser({uploadDir:__dirname + "/uploads"}));
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

app.post('/convert', function(req, res) {

  var pdf_file = req.files.pdf.path;
  var uploadsPath = __dirname + "/uploads"

  var filename = pdf_file.split("/")[pdf_file.split('/').length - 1]
  var out =  __dirname + '/public/images/' + filename + '.png';

  exec('convert', [pdf_file, '-append', out], function(err, stdout, stderr) {  

    res.redirect('/images/' + filename + '.png');

  });

});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

索引视图看起来像这样（只是一个简单的多部分表单）；

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <form action="/convert" method="post" enctype="multipart/form-data">
      <label>PDF File</label>
      <input type="file" name="pdf" />
      <input type="submit" />
    </form>
  </body>
</html> 
```

这一切都适用于我的 Cloud Foundry (VCAP) 私有实例，但不适用于 CloudFoundry.com，我认为这是由于权限问题。我将与工程团队一起追查这个问题，看看是否可以使用正确的权限调用 ImageMagick。

=========

# 更新

我已经解决了 CloudFoundry.com 的问题，它似乎阻止 ImageMagick 使用 /tmp 作为临时目录，必须设置 env var MAGICK_TMPDIR，你现在可以在 app.js 文件的顶部看到这个。

我现在也重定向到图像而不是阅读它，就像一个魅力！- [http://pdf2png.cloudfoundry.com](http://pdf2png.cloudfoundry.com)

====

# algorithm - “移动”值的排序向量的排序算法

> ID：12000776
> 
> 赞同：0
> 
> 时间：2012-08-17T06:27:54.593
> 
> 标签：algorithm, sorting

这个问题与[哪种排序算法对大多数排序数据最有效？](https://stackoverflow.com/questions/220044/which-sort-algorithm-works-best-on-mostly-sorted-data)

不同之处在于我还有其他非常重要的限制：**每次排序后值都会少量更改。**

这意味着向量几乎保持排序，并且移位的值几乎在它们的位置。在进行了一些测试之后，似乎相同的答案适用于我的案例。

你知道在这种情况下可能更好的其他算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:09:55.157

考虑 timsort 或 smoothsort。这些设计考虑了大部分排序的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:37:40.117

如果是频繁更新的情况，维护一个索引结构（即二叉搜索树）可能比一遍又一遍地对向量进行排序更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:14:29.253

插入排序和冒泡排序对于已经排序的输入都具有线性最佳情况复杂度（这是最佳的，因为值不断变化，即您必须查看输入向量的每个元素），它们是稳定（考虑到您的问题描述，这似乎是一个有用的属性）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:51:13.750

比较所有对 a[i] <= a[i+1]。如果这是错误的，则将第二个元素移动到新数组中。

对新数组进行排序（合并排序、堆排序或任何其他 O(n*log n) 算法），然后再次合并新旧数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T18:14:33.157

这个怎么样：

```
Def CheckedMergeSort(L)

    Count = 0
    S(1) = 0

    For I in 2 to |L|
       If (L(I-1) < L(I))
           Count = Count + 1
           S(I) = Count

    Def MergeSort(A, B)
        If (A != B and S(B)-S(A) != B-A)
            C = (B + A) / 2
            MergeSort(A,C)
            MergeSort(C+1,B)
            InplaceMerge(L(A..C), L(C+1..B))

    MergeSort(1, |L|) 
```

对输入进行线性时间预传递以填充 S(i)，它跟踪 i 之前有多少对已按排序顺序排列。

然后通过减去两个边界 S(j)-S(i) 并将其与 j-1 进行比较，我们可以确定任何子序列 L(i..j) 是否按排序顺序。

然后，合并排序可以跳过它在恒定时间内递归中找到的任何排序序列。

（例如，如果数组在入口处排序，则 MergeSort(1, |L|) 变为 noop。）

# escaping - Sublime Text 2 Snippet：如何转义双右方括号？

> ID：12000781
> 
> 赞同：2
> 
> 时间：2012-08-17T06:28:06.820
> 
> 标签：escaping, sublimetext2

为了加快速度，我想创建一个输出以下代码的 Sublime Text 2 片段（取自[这个 Stack Overflow 答案](https://stackoverflow.com/a/10988805/937084)）：

```
/* <![CDATA[ */
/* ]]> */ 
```

我试过这个：

```
<snippet>
    <content><![CDATA[
/* <![CDATA[ */
/* ]]> */
]]></content>
    <description>JavaScript: CDATA</description>
    <tabTrigger>jsc</tabTrigger>
</snippet> 
```

但是当我使用上面的代码时，这是我得到的输出：

```
/* <![CDATA[ */
/* 
```

请注意，该`]]> */`部分丢失了。我试过逃避它，但无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:07:56.460

没有想法，但我可以建议一个技巧：

```
<snippet>
    <content><![CDATA[
/* <![CDATA[ */
/*  ${1:]]}> */
]]></content>
    <description>JavaScript: CDATA</description>
    <tabTrigger>jsc</tabTrigger>
</snippet> 
```

需要一个额外的 TAB，但它可以工作。

# android - ArrayList 中的 ArrayList

> ID：12000782
> 
> 赞同：1
> 
> 时间：2012-08-17T06:28:22.040
> 
> 标签：android

```
ArrayList<ArrayList<String>> mainlist = new ArrayList<ArrayList<String>>();
ArrayList<String> childlist = new ArrayList<String>();

for (int i = 0; i < 3 i++){
   String chlidtext = chlidlist + String.valueof(i);
   String maintext = mainlist +String.Valueof(i);
   childlist.add(chlidtext);
   mainlist.add(maintext);
} 
```

> ```
>  return mainlist; 
> ```

我不知道如何在每个 chlidlist 中获取第三个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:34:39.020

您可以通过以下方式访问 childList 的第三个元素：

```
mainList.get(index).get(2); // Here 1st get() will get the 1st element of mainList which conatins 1st child element and 2nd get() will get the 3rd element of childlist. 
```

# python - pygtk : 保存后缀为“.xyz”的项目文件

> ID：12000788
> 
> 赞同：1
> 
> 时间：2012-08-17T06:29:28.243
> 
> 标签：python, gtk, pygtk

我创建了一个`filechooserdialog`来保存文件，

```
filechooserdialog = gtk.FileChooserDialog("Save Project", None,
 gtk.FILE_CHOOSER_ACTION_SAVE, (gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL,
 gtk.STOCK_OK, gtk.RESPONSE_OK)) 
```

现在我想用默认扩展名保存文件，比如`*.xyz`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:11:20.947

查看 上的文档[`gtk.FileFilter`](http://www.pygtk.org/docs/pygtk/class-gtkfilefilter.html)。为 *.xyz 创建一个过滤器并将其添加到带有 .xyz 的对话框中`filechooserdialog.add_filter()`。

* * *

**编辑**：如果要确保文件具有正确的扩展名，只需执行以下操作：

```
filename = filechooserdialog.get_filename()
if not filename.endswith('.xyz'):
    filename += '.xyz' 
```

# php - php mysql日期提取与不同

> ID：12000789
> 
> 赞同：4
> 
> 时间：2012-08-17T06:29:36.573
> 
> 标签：php, mysql, sql, select

在 mysql 表中，我有字段“日期”，其数据为

```
2012-08-02 02:33:26
2012-08-02 05:33:26
2012-07-02 06:33:26
2012-06-02 01:33:26 
2012-06-10 09:33:26 
2011-05-10 10:33:26 
2011-04-10 02:33:26 
```

像那样

我想得到输出

```
2012-08
2012-07
2012-06
2011-05
2011-04 
```

即获取唯一的年份和月份（日期字段的年份和月份不同）

我使用了以下查询

```
SELECT  distinct(YEAR(date)) FROM table 
```

它只返回年份。我想得到上面定义的输出。有没有可能得到这样的输出。我如何编写选择查询。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T06:32:48.847

你可能想试试这个：

```
SELECT DISTINCT DATE_FORMAT(colName, '%Y-%m')
FROM tableName 
```

**[请参阅此处：Date_Format()](http://davidwalsh.name/format-date-mysql-date_format)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:38:59.520

```
SELECT DISTINCT DATE_FORMAT(`date`, '%Y-%m') FROM table 
```

你可以从这里获得全面的帮助[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T07:03:50.853

假设您从数据库中得到这样的结果：-

```
$row['date']=2012-08-02 02:33:26; 
```

然后你可以使用爆炸功能： -

```
$var=explode(" ",$row['date']);
$date=$var[0];//here you will get  2012-08-02

$res=explode("-",$date);
$res1=$res[0];//you will get 2012
$res2=$res[1];//you will get 08
$res3=$res[2];//you will get 02 
```

现在是最终结果：-

```
$final=$res1."-".$res2;//you will get 2012-08 
```

如果您不想在 MySQL 端处理此问题，这是一个替代答案，因此您可以使用 PHP 概念来处理此问题。

# php - 如何使用 php 获取 youtube 和 vimeo 嵌入代码的视频缩略图？

> ID：12000791
> 
> 赞同：4
> 
> 时间：2012-08-17T06:29:44.987
> 
> 标签：php, wordpress, video, youtube, embed

我有一个*WordPress*网站，我在其中在帖子编辑器中插入视频嵌入代码。在前端，我需要在点击它们时显示视频缩略图，它将在灯箱中显示视频。

要求是，我需要显示我在编辑器中提供的视频的视频缩略图。

我将使用 YouTube 和 vimeo 嵌入代码，如果是其他视频，我将显示帖子缩略图或默认图像。

我将在每个帖子中使用一个视频嵌入代码。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T06:55:12.477

使用[Youtube API](https://developers.google.com/youtube/2.0/developers_guide_protocol)

```
http://img.youtube.com/vi/VIDEO_ID/#.jpg
where,
VIDEO_ID = bQVoAWSP7k4
# = 1,2, or 3 
```

使用[Vimeo API](http://developer.vimeo.com/apis/simple)

```
Making Video Request

http://vimeo.com/api/v2/video/video_id.output

where, 
video_id :  The ID of the video you want information for.
output  :  Specify the output type. It currently offer JSON, PHP, and XML formats. 
```

vimeo 的 php 代码：

```
$imgid = 6825415;
$image = unserialize(file_get_contents("http://vimeo.com/api/v2/video/$imgid.php"));
echo $image[0]['thumbnail_medium']; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T06:48:29.680

您可以从视频网址加载的缩略图。

视频网址

```
http://www.youtube.com/watch?v=Xzf0rvQa4Mc 
```

缩略图网址

```
http://i1.ytimg.com/vi/Xzf0rvQa4Mc/default.jpg

http://i2.ytimg.com/vi/Xzf0rvQa4Mc/default.jpg

http://i3.ytimg.com/vi/Xzf0rvQa4Mc/default.jpg

http://i4.ytimg.com/vi/Xzf0rvQa4Mc/default.jpg 
```

将图像复制到新视频的所有缩略图 url（可能是服务器）需要一些时间。

如果没有缩略图，则返回带有相机的图像（长度为 893 字节）。

例子

```
 http://i4.ytimg.com/vi/Xzf0rvQa4Md/default.jpg 
```

**如果您想获得这样的 youtube 视频 ID**

这个更好

```
regexp (youtube\.com\/(watch\?v=)?(v\/)?([\w\-]+)) 
```

它可以处理两个网址`(with /v/ and with watch?v=)`

```
preg_match('/youtube\.com\/v\/([\w\-]+)/', $code, $match);

echo $match[3]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T20:37:12.377

如果您想通过纯 js/jquery no api 使用缩略图，您可以使用此工具从视频中捕获帧，瞧！

> [http://video.depone.eu/](http://video.depone.eu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T04:35:56.033

试试这个[插件](http://wordpress.org/extend/plugins/video-thumbnails/)，它简化了在 WordPress 模板中自动显示视频缩略图的过程。

# idl - 编译 IDL 文件错误

> ID：12000793
> 
> 赞同：0
> 
> 时间：2012-08-17T06:29:52.710
> 
> 标签：idl

我正在使用 VS 2008 Pro。我有 1 个 idl 文件，其中包含：

```
module views {

    // Introduced in DOM Level 2:
    interface [
        ObjCCustomImplementation,
        OmitConstructor
    ] AbstractView {
        readonly attribute Document document;
        readonly attribute Media styleMedia;
    };

} 
```

（仅此而已，文件中没有更多内容。）当我构建文件时（右键单击文件并按编译，出现以下错误：

AbstractView.idl ..\page\AbstractView.idl(30) : 错误 MIDL2025 : 语法错误 : 期望“接口”附近的类型规范 ..\page\AbstractView.idl(31) : 错误 MIDL2026 : 无法从早期的语法错误中恢复; 中止编译

问题是什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:42:06.930

也许它应该是其他方式。据我记得，首先你必须定义属性，然后是接口本身。此[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378712%28v=vs.85%29.aspx)可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T08:30:10.210

这可能是 CORBA IDL 文件而不是 MIDL 文件。

# java - Android：Collection.sort() 使用 Comparator 不匹配

> ID：12000798
> 
> 赞同：1
> 
> 时间：2012-08-17T06:30:04.993
> 
> 标签：java, android, sorting, arraylist

我正在尝试按字母顺序排列一系列电影，忽略大小写。我的应用程序允许用户将他/她自己的条目添加到 ListView 中已经初始化的电影数组中。这是片段：

```
 Lab7_082588FetchDetails newMovie = new Lab7_082588FetchDetails();
            IgnoreCaseComparator ignoreCase = new IgnoreCaseComparator();
            newMovie.setTitle(data.getStringExtra(Lab7_082588Edit.TITLE_STRING));
            newMovie.setGross(data.getStringExtra(Lab7_082588Edit.GROSS_STRING));
            newMovie.setDate(data.getStringExtra(Lab7_082588Edit.DATE_STRING));
            results.add(newMovie);
            adapter.notifyDataSetChanged();
            Collections.sort(results, ignoreCase); 
```

但是最后一行的 .sort 部分给出了错误消息：

```
The method sort(List<T>, Comparator<? super T>) in the type Collections is not applicable for the arguments (ArrayList<Lab7_082588FetchDetails>, IgnoreCaseComparator) 
```

另外，这是我的 IgnoreCaseComparator：

```
import java.util.Comparator;

class IgnoreCaseComparator implements Comparator<String> {
    public int compare(String strA, String strB) {
        return strA.compareToIgnoreCase(strB);
    }  
} 
```

还有我的 Fetch Details 类：

```
public class Lab7_082588FetchDetails implements Comparable<Lab7_082588FetchDetails> {

private String title;
private String gross;
private String date;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getGross() {
    return gross;
}

public void setGross(String gross) {
    this.gross = gross;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

@Override
public int compareTo(Lab7_082588FetchDetails another) {
    // TODO Auto-generated method stub
    return title.compareTo(another.title);
}

} 
```

我该如何补救？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:32:31.927

```
implements Comparator<String> 
```

您的比较器仅接受字符串，但您的列表有`Lab7_082588FetchDetails`对象。

将其更改为实现`Comparator<Lab7_082588FetchDetails>`

并将比较方法更改为

```
public int compare(Lab7_082588FetchDetails objA, Lab7_082588FetchDetails objB) {
        return objA.getTitle().compareToIgnoreCase(objB.getTitle());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:37:12.937

使用比较器或可比较

Comparable ：当您可以更改类结构以添加 compareTo 方法时

比较器：如果你不能改变类结构。

两者都应该与需要比较的对象一起传递。在您的情况下，比较器是为您编写的`String`并且您正在通过`Lab7_082588FetchDetails`

# mysql - SELECT子句中的MySQL IF？

> ID：12000801
> 
> 赞同：0
> 
> 时间：2012-08-17T06:30:09.423
> 
> 标签：mysql, conditional-statements

我一直在使用 mysql 一段时间，但到目前为止我从未遇到过必须使用条件的问题。基本上我需要这样做（对我来说最好的解释方法是把它写成mysql支持类似php的条件）：

```
SELECT `Gender`=='male' ? '0.5' : '1' AS Col1 FROM Users 
```

基本上我想为所有“男性”设置 0.5 AS Col1，为所有“女性”设置 1。

例如：

```
UID Gender
1   male
2   female
3   male 
```

应该返回：

```
UID Col1
1   0.5
2   1
3   0.5 
```

如果您想知道实施。我想根据用户的共同习惯向他们推荐“要关注的人”。（男性为 0.5 意味着他们关注的女性人数是男性的两倍）。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:31:44.097

您可以使用

```
SELECT if(`Gender`='male','0.5','1') AS Col1
FROM Users 
```

或者

```
SELECT case when `Gender`='male'
            then '0.5'
            else '1'
       end AS Col1
FROM Users 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:32:15.580

```
select uid,
    case gender
        when 'male' then '0.5'
        when 'female' then '1'
    end as genderindigit
from
    users 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T06:34:52.650

尝试

```
SELECT IF(`Gender` = 'male', '0.5', '1') AS Col1
FROM Users 
```

# windows-phone-7 - 在代码 wp7 中动态创建自定义按钮

> ID：12000808
> 
> 赞同：1
> 
> 时间：2012-08-17T06:30:52.313
> 
> 标签：windows-phone-7

我在代码中有一个按钮控件

```
Button>
                <Button.Content>

                        <StackPanel Orientation='Horizontal' >
                            <TextBlock Text='{Binding ramDay, Mode=TwoWay}' Margin='0,-18,0,0' Style='{StaticResource PhoneTextTitle1Style}'/>
                        <TextBlock Text='{Binding enDay, Mode=TwoWay}' Margin='15,10,0,0' Style='{StaticResource PhoneTextTitle2Style}'/>

                    </StackPanel>

                </Button.Content>
            </Button> 
```

但我想根据用户的需要创建尽可能多的按钮，并使用不同的文本框值。但我找不到任何方法，请帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:39:17.923

`custom user control`使用此代码在您的项目中创建一个。此后，在您的 mainPage 后面的代码中，以 for 循环或您认为适合您情况的任何其他方法将 userControl 动态添加到 UI 上的网格中。

# sql - 如何来回链接数据库行？

> ID：12000812
> 
> 赞同：1
> 
> 时间：2012-08-17T06:31:08.247
> 
> 标签：sql, asp.net-mvc, database, database-design

我有一个关于数据库表结构的查询。SQL Server 2008 数据库中的“我的患者详细信息”表如下所示：

> --PatientId(PK)-- --PatientType-- --DoctorId(FK)-- --DateOfVisit-- --PrescriptionId(FK)--

每位患者可能多次到医院就诊。我需要链接患者的所有访问并以链接的方式显示它们，以便管理员可以导航之前和下一次访问..

所以我认为我只能通过使用 VisitId 记录每次访问来做到这一点。

我需要小心不要在数据库中加载不必要的字段。它也不应该严重影响提取时间。

我认为这些是可用的方法。如果有的话建议我。

> --PatientId(PK)-- --PatientType-- --DoctorId(FK)-- --DateOfVisit-- --PrescriptionId(FK)-- --VisitId-- --PrevVisitId-- NextVisitId--

或者

有一个单独的表作为访问

> --VisitId(PK)---PrevVisitId(FK)-- --NextVisitId(FK)--

抱歉，如果我的帖子重复。请纠正我，将我重定向到任何需要的地方/时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:44:18.027

> 所以我认为我只能通过使用 VisitId 记录每次访问来做到这一点。

每次访问都需要一行。每行都需要一个键。密钥不需要是单个 ID 号。我认为您每次访问至少需要记录的是

```
create table visits (
  patient_id integer not null, -- references patients (patient_id), not shown
  doctor_id integer not null,  -- references doctors (doctor_id), not shown
  office_visit_start timestamp not null default current_timestamp,
  primary key (patient_id, office_visit_start)
);

insert into visits values (1, 1, '2012-02-01 08:00');
insert into visits values (1, 1, '2012-02-01 15:00');
insert into visits values (1, 1, '2012-03-01 09:33');
insert into visits values (2, 1, '2012-02-01 09:00'); 
```

（具体语法因您的 dbms 平台而异。）您可以通过相当简单的查询找到上一次和下一次就诊——“office_visit_start”将为您提供患者就诊的顺序。

示例查询。. .

```
-- Previous visit for patient # 1 (before 2012-02-01 15:00)
select patient_id, max(office_visit_start)
from visits 
where patient_id = 1
  and office_visit_start < '2012-02-01 15:00'
group by patient_id

-- Next visit for patient # 1 (after 2012-02-01 15:00)
select patient_id, min(office_visit_start)
from visits 
where patient_id = 1
  and office_visit_start > '2012-02-01 15:00'
group by patient_id 
```

# mysql - 如何在hibernate中映射数据库mysql中的树类型关系

> ID：12000814
> 
> 赞同：0
> 
> 时间：2012-08-17T06:31:14.667
> 
> 标签：mysql, sql, database, hibernate, orm

我有以下情况

`GroceryList`取决于`AgeGroup`

并且`GroceryList`属于`Categories`

在我的页面中，我想显示

```
Agegroup

----------Catgeory

------------------------List1
------------------------List2 
```

年龄组2

```
----------Catgeory2

------------------------List12
------------------------List22 
```

我很困惑我是否应该与 Category 有类 AgeGroup 关系。因为如果是，那么它将很容易导航。但所有类别都属于所有年龄组

# android - Textview没有在android中以编程方式显示到另一个textView的右边

> ID：12000815
> 
> 赞同：0
> 
> 时间：2012-08-17T06:31:21.300
> 
> 标签：android, textview, android-relativelayout

我正在尝试将 textview 动态添加到 textView 的右侧，但 textView 未显示。

语句“ **params2.addRule(RelativeLayout.RIGHT_OF, 1);”** 如果我删除该行，则在下面的代码中会产生问题，textview 将显示在随机位置。

需要动态实现这个xml

```
<TextView
            android:id="@+id/stationnameVal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="KANYAKUMARI (CAPE)"
            android:textColor="@color/black"
            android:textSize="12sp" />

        <TextView
            android:id="@+id/arrivaltimeVal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="45dp"
            android:layout_toRightOf="@+id/stationnameVal"
            android:text="SRC"
            android:textColor="@color/black"
            android:textSize="12sp" /> 
```

代码是：

```
 RelativeLayout rel = new RelativeLayout(this);
    // first TextView
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);

        TextView stateName = new TextView(DisplayActivity.this);
        stateName.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
        params.setMargins(0, 5, 0, 0);
        stateName.setText("KANYAKUMARI (CAPE)");
        stateName.setId(1);
        stateName.setTextColor(R.color.black);
        stateName.setTextSize(12);
        rel.addView(stateName, params);

    // Adding Second TextView
       RelativeLayout.LayoutParams params2 = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

       TextView arr = new TextView(DisplayActivity.this);
       arr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
       arr.setText("SRC");
       arr.setTextColor(R.color.white);
       arr.setTextSize(12);
       params2.addRule(RelativeLayout.ALIGN_PARENT_TOP, stateName.getId());
       params2.addRule(RelativeLayout.RIGHT_OF, 1);
       params2.setMargins(45, 0, 0, 0);
       rel.addView(arr, params2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:34:02.133

change this:

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

or this:

```
rel.addView(stateName, params); 
```

to

```
rel.addView(stateName); 
```

and also change this:

```
params2.addRule(RelativeLayout.ALIGN_PARENT_TOP, stateName.getId()); 
```

to

```
params2.addRule(RelativeLayout.ALIGN_PARENT_TOP); 
```

and do the same for param:

```
params.addRule(RelativeLayout.ALIGN_PARENT_TOP); 
```

otherwise remove it, because Kanyakumari and src are not aligned properly.

actually do this to align them:

```
params2.addRule(RelativeLayout.ALIGN_TOP, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:32:03.057

将“LayoutParams.FILL_PARENT”更改为“LayoutParams.WRAP_CONTENT”怎么样？

问候

陈子腾

# android - 应用程序第一次运行良好，但第二次崩溃

> ID：12000819
> 
> 赞同：0
> 
> 时间：2012-08-17T06:31:26.640
> 
> 标签：android, android-activity

我的标题是不言自明的。这是我的代码：

```
 public class MainActivity extends Activity {

    private WebView browse;
    private TextView t;
    private String address="http://www.google.com";
    private int refresh, clearcache, time, refreshTime, cacheTime;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SharedPreferences gPrefs = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());
        address = gPrefs.getString("Address", "http://www.google.com");
        refresh = gPrefs.getInt("Refresh", 1);
        clearcache = gPrefs.getInt("ClearCache", 1);
        time = gPrefs.getInt("Time", 0);

        switch (time) {
        case 0:
            refreshTime = refresh * 60 * 60 * 1000;
            break;
        case 1:
            refreshTime = refresh * 60 * 1000;
            break;
        case 2:
            refreshTime = refresh * 1000;
            break;
        }

        switch (time) {
        case 0:
            cacheTime = clearcache * 60 * 60 * 1000;
            break;
        case 1:
            cacheTime = clearcache * 60 * 1000;
            break;
        case 2:
            cacheTime = clearcache * 1000;
            break;
        }

        browse = (WebView) findViewById(R.id.webView1);
        t = (TextView) findViewById(R.id.t);

        browse.getSettings().setJavaScriptEnabled(true);
        browse.getSettings().setPluginsEnabled(true);
        browse.getSettings().setLoadWithOverviewMode(true);
        browse.getSettings().setUseWideViewPort(true);
        browse.getSettings().setBuiltInZoomControls(true);
        browse.getSettings().setSupportZoom(true);
        browse.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        browse.setScrollbarFadingEnabled(true);
        browse.getSettings().setLoadsImagesAutomatically(true);
        browse.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
        browse.getSettings().setAppCacheMaxSize(1024 * 1024 * 8);

        browse.setWebViewClient(new WebViewClient() {

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                // TODO Auto-generated method stub
                super.onPageStarted(view, url, favicon);
                t.setVisibility(TextView.VISIBLE);
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                // do your stuff here
                super.onPageFinished(view, url);
                t.setVisibility(TextView.GONE);
            }
        });

        try {
            browse.loadUrl(address);
        } catch (Exception e) {
            e.printStackTrace();
        }

        refreshRRryan();
        cacheRRryan();
    }

    final Handler refreshhandler = new Handler();
    final Timer refreshtimer = new Timer();
    final Runnable refreshdoA = new Runnable() {
        @Override
        public void run() {
            browse.reload();
        }
    };

    public void refreshRRryan() {
        TimerTask refreshtask = new TimerTask() {
            @Override
            public void run() {
                refreshhandler.post(refreshdoA);
            }
        };
        refreshtimer.scheduleAtFixedRate(refreshtask, refreshTime, refreshTime);
    }

    final Handler cachehandler = new Handler();
    final Timer cachetimer = new Timer();
    final Runnable cachedoA = new Runnable() {
        @Override
        public void run() {
            browse.clearCache(true);
            getApplicationContext().deleteDatabase("webview.db");
            getApplicationContext().deleteDatabase("webviewCache.db");
        }
    };

    public void cacheRRryan() {
        TimerTask cachetask = new TimerTask() {
            @Override
            public void run() {
                cachehandler.post(cachedoA);
            }
        };
        cachetimer.scheduleAtFixedRate(cachetask, cacheTime, cacheTime);
    }

    @Override
    public File getCacheDir() {
        // NOTE: this method is used in Android 2.1

        return getApplicationContext().getCacheDir();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu);
        MenuInflater blowUp = getMenuInflater();
        blowUp.inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.aboutUs:
            Intent i = new Intent("ABOUT");
            startActivity(i);
            break;
        case R.id.preferences:
            Intent p = new Intent("PREFS");
            startActivityForResult(p, 101);
            break;
        }
        return false;
    }

} 
```

这是logcat：

```
08-17 11:08:05.997: E/AndroidRuntime(1197): FATAL EXCEPTION: main
08-17 11:08:05.997: E/AndroidRuntime(1197): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fit.world.browser/com.fit.world.browser.MainActivity}: java.lang.ClassCastException: java.lang.String
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.os.Looper.loop(Looper.java:123)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at java.lang.reflect.Method.invoke(Method.java:507)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at dalvik.system.NativeStart.main(Native Method)
08-17 11:08:05.997: E/AndroidRuntime(1197): Caused by: java.lang.ClassCastException: java.lang.String
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ContextImpl$SharedPreferencesImpl.getInt(ContextImpl.java:2817)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at com.fit.world.browser.MainActivity.onCreate(MainActivity.java:37)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-17 11:08:05.997: E/AndroidRuntime(1197):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-17 11:08:05.997: E/AndroidRuntime(1197):     ... 11 more 
```

而且我很确定我的清单很好，因为活动第一次运行。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:43:08.503

```
refresh = gPrefs.getInt("Refresh", 1);
clearcache = gPrefs.getInt("ClearCache", 1);
time = gPrefs.getInt("Time", 0); 
```

应用程序第一次运行时，它使用您在上面使用的默认值 (1,1,0)。

但是第二次，它肯定会使用您从用户输入中保存的数据。

您必须将其保存为字符串并尝试将其检索为 int ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:39:47.780

错误很明显：java.lang.String cannot be cast to java.lang.Integer 您正在尝试将 String 对象转换为 Integer。那是做不到的。它们不是同一类型。

该错误会告诉您发生在文件的哪一行，因此您可以更正它。 **MainActivity.java:37**

# c# - 查找匹配“a”的模式，忽略位于“b”和“c”之间的“a”

> ID：12000821
> 
> 赞同：1
> 
> 时间：2012-08-17T06:31:32.583
> 
> 标签：c#, regex, pattern-matching

**需要复合表达式**

```
" from" such that " from" is not within parenthesis 
```

（忽略括号中的）这里`a=" from"; b="("; and c=")";`

**我能写的最接近（但无效）的模式是**

```
string pat = @"^((?!\(.* from.*\)).)* from((?!\(.* from.*\)).)*$"; 
```

我的表达否认括号中是否存在任何“来自”，但我想严格忽略这样的“来自”

**应在以下位置找到匹配项：**

```
1: " from" 2:select field1 from t1 (select field1 from t1)   ---- 1 time in both
3: select field1 from t1 (select field1 from t1)select field1 from t1  ---2 times 
```

**不包含匹配项的字符串：（因为我想忽略括号内的“from”）**

```
1: select field1 no_f_rom_OutOf_Parenthesis t1 (select field1 from t1)
2: (select field1 from t1)  3: "" (Empty String) 4\. No word as form
0 times in all four strings 
```

**相关材料：（**没有太多必要阅读）

最接近我的问题的最有用的链接告诉如何匹配“模式”而不是“常规”是 stanav 在 2009 年 7 月 31 日上午 8:05 在以下链接中的回复...

[http://www.vbforums.com/archive/index.php/t-578417.html](http://www.vbforums.com/archive/index.php/t-578417.html)

另外：[C# 中的正则表达式包含“this”但不包含“that](https://stackoverflow.com/questions/4402811/regex-in-c-sharp-that-contains-this-but-not-that)

另外：[正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

我已经学习/搜索了大约一周，但对我来说仍然很复杂:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:17:14.737

即使使用任意嵌套的括号，以下内容也应该有效：

```
if (Regex.IsMatch(subjectString, 
    @"\sfrom           # Match ' from'
    (?=                # only if the following regex can be matched here:
     (?:               # The following group, consisting of
      [^()]*           # any number of characters except parentheses,
      \(               # followed by an opening (
      (?>              # Now match...
       [^()]+          #  one or more characters except parentheses
      |                # or
       \( (?<DEPTH>)   #  a (, increasing the depth counter
      |                # or
       \) (?<-DEPTH>)  #  a ), decreasing the depth counter
      )*               # any number of times
      (?(DEPTH)(?!))   # until the depth counter is zero again,
      \)               # then match the closing )
     )*                # Repeat this any number of times.
     [^()]*            # Then match any number of characters except ()
     \z                # until the end of the string.
    )                  # End of lookahead.", 
    RegexOptions.IgnorePatternWhitespace)) 
```

作为单行正则表达式（“恐怖！恐怖！”），如果您坚持：

```
if (Regex.IsMatch(subjectString,@"\sfrom(?=(?:[^()]*\((?>[^()]+|\((?<DEPTH>)|\)(?<-DEPTH>))*(?(DEPTH)(?!))\))*[^()]*\z)")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:10:32.037

这可能是你想要的。

```
string s="select field1 dfd t1 (select field1 from t1)select field1 from t1";
Regex r=new Regex(@"(?<=\)|^)\bselect\b.*?\bfrom\b.*?(?=\()",RegexOptions.RightToLeft);
r.Replace(s,"HELL yeah"); 
```

# node.js - Node.js express：对 ejs 模板感到困惑

> ID：12000824
> 
> 赞同：3
> 
> 时间：2012-08-17T06:31:37.660
> 
> 标签：node.js, express, ejs

我将`ejs`模板文件放在如下文件`views`夹中：

```
views
|
|--foo.html
|
|--layout.html 
```

所以我配置了我的 ejs 模板：

```
app.set('views', __dirname + '/views');
app.engine('html', require('ejs').renderFile); 
```

我通过以下方式渲染我的`foo`模板：

```
res.render('foo.html', {title: 'test'}); 
```

我想用`layout.html`作主布局模板，我也在 中添加`<%- body%>`标签`layout.html`，但不起作用，我看到的只是返回 end `foo.html`。

为什么`layout.html`不能是主布局？或者我怎样才能将它设置为主布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:37:36.027

啊，你刚刚被 Express 3 在布局管理中的更改所欺骗。官方示例：[https](https://github.com/visionmedia/express/tree/master/examples/ejs) ://github.com/visionmedia/express/tree/master/examples/ejs 尚未更新。

在 Jade 中，您现在必须使用块并扩展布局。 [http://www.devthought.com/code/use-jade-blocks-not-layouts/](http://www.devthought.com/code/use-jade-blocks-not-layouts/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T18:37:03.853

尝试使用 ejs-locals 然后您可以在 login.ejs 文件中执行此操作：

```
<% layout('layout') -%>
<form></form> 
```

# iphone - 如果一个 UIWebView 消耗内存，则来自不同控制器的其他 UIWebView 变为空白

> ID：12000828
> 
> 赞同：0
> 
> 时间：2012-08-17T06:31:57.503
> 
> 标签：iphone, ios, ipad, memory-management, uiwebview

我将标签栏作为我的启动视图。

我有三个标签。所有三个选项卡都有 UIWebViews。现在，在第三个选项卡中，我确实展示了一个 modalViewController，其中再次包含一个 UIWebView。如果我尝试在第四个 UIWebView 中观看 youtube 视频，一段时间后，来自其他选项卡的其他视图会变为空白。

内存问题？还是别的什么？

我想知道。你能给我一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:50:41.820

我没有显示模态视图控制器，而是在所有三个选项卡中使用了 NavigationControllers，并推送了第四个视图，它似乎可以解决问题。

# asp.net - 所见即所得编辑器的必填字段验证

> ID：12000836
> 
> 赞同：0
> 
> 时间：2012-08-17T06:32:48.400
> 
> 标签：asp.net, validation, wysiwyg

我在 asp.net 网络表单中使用第三方所见即所得编辑器及其注册

```
<%@ Register TagPrefix="editor" Assembly="WYSIWYGEditor" Namespace="InnovaStudio" %> 
```

这是返回的代码

```
<editor:WYSIWYGEditor runat="server" ID="txtDesc" /> 
```

在cs文件中，这是所见即所得的设置

```
 //'***************************************************
    //'   SETTING EDITOR DIMENSION (WIDTH x HEIGHT)
    //'***************************************************

    //'***************************************************
    //'   SETTING EDITING MODE
    //'   
    //'   Possible values: 
    //'       - "HTMLBody" (default) 
    //'       - "XHTMLBody" 
    //'       - "HTML" 
    //'       - "XHTML"
    //'***************************************************

    txtDesc.EditMode = "XHTMLBody";

    //'***************************************************
    //'   SETTING EDITOR DIMENSION (WIDTH x HEIGHT)
    //'***************************************************

    txtDesc.EditorWidth = 750.ToString(); //'You can also use %, for example: oEditSummary.EditorWidth = "100%"
    txtDesc.EditorHeight = 450.ToString();

    //'***************************************************
    //'   SHOWING DISABLED BUTTONS
    //'***************************************************

    txtDesc.btnPrint = true;
    txtDesc.btnPasteText = true;
    txtDesc.btnFlash = true;
    txtDesc.btnMedia = true;
    txtDesc.btnLTR = true;
    txtDesc.btnRTL = true;
    txtDesc.btnSpellCheck = true;
    txtDesc.btnStrikethrough = true;
    txtDesc.btnSuperscript = true;
    txtDesc.btnSubscript = true;
    txtDesc.btnClearAll = true;
    txtDesc.btnStyles = true; //'Show "Styles/Style Selection" button

    //'***************************************************
    //'   SPECIFY onSave EVENT COMMAND
    //'***************************************************

    //oEditSummary.onSave="document.forms.Form1.elements.btnSubmit.click();"

    //'***************************************************
    //'   APPLYING STYLESHEET 
    //'   (Using external css file)
    //'***************************************************

    txtDesc.Css = "style/test.css"; //'Specify external css file here

    //'***************************************************
    //'   APPLYING STYLESHEET 
    //'   (Using predefined style rules)
    //'***************************************************

    //'oEditSummary.StyleList = New String(,){ _
    //'       {"BODY",false,"","font-family:Verdana,Arial,Helvetica;font-size:x-small;"}, _
    //'       {".ScreenText",true,"Screen Text","font-family:Tahoma;"}, _
    //'       {".ImportantWords",true,"Important Words","font-weight:bold;"}, _
    //'       {".Highlight",true,"Highlight","font-family:Arial;color:red;"}}

    //'If you'd like to set the default writing to "Right to Left", use:

    //'oEditSummary.StyleList = New String(,){{"BODY",false,"","direction:rtl;unicode-bidi:bidi-override;"}}

    //'***************************************************
    //'   ENABLE ASSET MANAGER ADD-ON
    //'***************************************************

    txtDesc.AssetManagerWidth = 570.ToString();
    txtDesc.AssetManagerHeight = 510.ToString();
    txtDesc.AssetManager = System.Configuration.ConfigurationManager.AppSettings["EditorPath"].ToString() + "/Editor/assetmanager/assetmanager.aspx";
    txtDesc.scriptPath = System.Configuration.ConfigurationManager.AppSettings["EditorPath"].ToString() + "/Editor/scripts/";
    //'Use relative to root path (starts with "/")

    //'***************************************************
    //'   USING CUSTOM TAG INSERTION FEATURE
    //'***************************************************

    txtDesc.CustomTagList = new String[,]{{"First Name","{%first_name%}"},
                                            {"Last Name","{%last_name%}"},
                                            {"Email","{%email%}"}};

    //'***************************************************
    //'   SETTING COLOR PICKER's CUSTOM COLOR SELECTION
    //'***************************************************
    txtDesc.CustomColors = new String[] { "#ff4500", "#ffa500", "#808000", "#4682b4", "#1e90ff", "#9400d3", "#ff1493", "#a9a9a9" };

    //'***************************************************
    //'   SETTING EDITING MODE
    //'   
    //'   Possible values: 
    //'       - "HTMLBody" (default) 
    //'       - "XHTMLBody" 
    //'       - "HTML" 
    //'       - "XHTML"
    //'***************************************************

    txtDesc.EditMode = "XHTMLBody"; 
```

我想提供必填字段验证。那么它怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:57:19.450

我已经对此进行了一些阅读，看来您最好的解决方案是为您的控件实现自定义验证器，您可以毫无问题地提供客户端和服务器端实现 - 这是有关如何执行此操作的快速指南：

[http://www.codeproject.com/Articles/3882/ASP-NET-Validators-Unclouded](http://www.codeproject.com/Articles/3882/ASP-NET-Validators-Unclouded)

请参阅自定义验证器部分。

# iis-7 - 跨两个应用服务器同步 IIS 7

> ID：12000841
> 
> 赞同：0
> 
> 时间：2012-08-17T06:33:12.863
> 
> 标签：iis-7

我正在使用 IIS7 的共享 IIS 功能，我已经获取了一台服务器的配置文件并将其放在共享位置..在第二台服务器中，我使用来自共享位置的这些配置文件。我能够同步这个但是问题每当我在第一台服务器的 IIS 服务器中添加新应用程序时，另一台服务器不会显示最新的应用程序...在第二台服务器中，我只能看到虚拟目录而不是应用程序。any1 可以帮助我同步两台服务器，即当我在第一台服务器中添加任何新应用程序时，另一台服务器应自动显示更改。

我的业务需求需要在 IIS 中运行时生成应用程序（我已经完成），唯一的问题是同步。

谢谢，萨杰什·南比亚尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:24:18.673

您需要 MS WebDeploy 隐式执行此操作。

[http://www.iis.net/download/WebDeploy](http://www.iis.net/download/WebDeploy)

# ios - IOS选项框

> ID：12000844
> 
> 赞同：-1
> 
> 时间：2012-08-17T06:33:42.480
> 
> 标签：ios

我试图搜索，但找不到这个“选项框”的正确术语。有没有像[这个链接](http://www.google.com/imgres?hl=en&sa=X&rlz=1C1CHFA_enUS489US489&biw=997&bih=682&tbm=isch&prmd=imvnsfd&tbnid=NpobLXMpNnZp6M%3a&imgrefurl=http://support.twitter.com/articles/20169494&docid=PFLoLacM63iZCM&imgurl=https://lh4.googleusercontent.com/Ofl8I3sHVnMKZ3V0HfasXH39YJZoqYA69wwcvzM6XtNidQnIQfobUDbXQB8cS02opHsgLxIjsZmxoNVUuL72ThIRhFXLzp0UXfNPV0KgPmkqLK-FwVU&w=404&h=297&ei=HuUtUKTVHeOqywGF-oCgDg&zoom=1&iact=hc&vpx=595&vpy=163&dur=20&hovh=192&hovw=262&tx=216&ty=71&sig=108774509989666883697&page=1&tbnh=160&tbnw=215&start=0&ndsp=14&ved=1t:429,r:3,s:0,i:85)这样的选项框的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:41:02.640

它被称为`UIActionSheet`.

这是类参考的链接：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)

这是它如何工作的一个基本示例：

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"title" delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:@"delete" otherButtonTitles:@"other 1", @"other 2", nil];
[actionSheet showInView:self.view]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:51:01.500

@NSNSPostWhenIdle：是正确的，您也可以创建 alertView 如下...

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"message" delegate:self cancelButtonTitle:@"cancel" otherButtonTitles:@"button",@"button1", nil];
    [alert show]; 
```

如果你想要一些自定义按钮，你可以创建 UIButtons 并添加为 alertView 的子视图。

我想这会对你有所帮助。

# objective-c - iOS Google Drive SDK 集成

> ID：12000846
> 
> 赞同：2
> 
> 时间：2012-08-17T06:33:50.207
> 
> 标签：objective-c, ios, google-drive-api

我正在我的 iPhone 应用程序中集成 google drive SDK。我正在尝试使用以下方法将文件上传到文件夹中

```
-(void)uploadFileAtPath:(NSString *)path atIndexid:(int)indexId{

   GTLDriveFile *parentRefFile=[driveFilesArray objectAtIndex:indexId];
   if ([parentRefFile.mimeType isEqualToString:@"application/vnd.google-apps.folder"]) {

    NSFileHandle *fileHandle = [NSFileHandle fileHandleForReadingAtPath:path];
    NSLog(@"path--str------%@",path);

    if (fileHandle) {
        GTLServiceDrive *service = [self createServiceDriveObj];

        GTLDriveChildReference *childRef=[GTLDriveChildReference object];
        childRef.childLink=path;
        childRef.kind=@"drive#childReference";
        GTLQueryDrive *query = [GTLQueryDrive queryForChildrenInsertWithObject:childRef folderId:parentRefFile.identifier];

        ticket= [service executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                        GTLDriveFile *uploadedFile,
                                                        NSError *error) {
            // Callback
            if (error == nil) {
                [_delegate didFinishUploadingFileAtPath:path ForTheObject:_delegate];

            } else {
                [_delegate didFailedToUploadFileAtPath:path withError:error ForTheObject:_delegate];
            }
        }];

    } else {
        // Could not read file data.
        [self displayAlert:@"No Upload File Found" format:@"Path: %@", path];
    }
}
else {
    [self displayAlert:@"File type you have choosen is not a folder" format:nil];
} 
```

}

当我调用上述方法上传时，我收到以下错误消息 **操作无法完成。（需要资源元数据）**。我不确定我错过了什么。如果我想设置 GTLChildReference 对象的标识符属性，我不确定为该属性设置什么。请帮助我

# ruby - 如何使用 sunspot_mongo

> ID：12000847
> 
> 赞同：0
> 
> 时间：2012-08-17T06:33:54.013
> 
> 标签：ruby, sunspot-solr

在我的应用程序中，我在 mongoDB 下创建了一个模型，然后我使用 sunspot_mongo 将其重新索引到 solr。我想从 solr 中搜索，我的模型是，

```
`require 'sunspot_mongo'
 class Post
 include Mongoid::Document
 include Sunspot::Mongo

 field :title
 field :content
 field :author, type: String

 searchable do 
  text :title, :stored => true
  text :content
end
end` 
```

我的控制器索引方法是，

```
def index
#@posts = Post.all

search=Post.search do
   fulltext 'hello'
end
@posts = search.results

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @posts }
end 
```

结束，但它显示错误，未初始化常量 Sunspot::Mongo::DataAccessor::BSON

我无法修复此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:44:28.103

我在 gem 文件中使用了这个

```
gem "sunspot_mongo", :git => "git://github.com/balexand/sunspot_mongo.git", :branch => "fix_rake_sunspot_reindex" 
```

你的模型看起来不错

更改您的控制器代码如下

```
def index
  search=Post.solr_search do
    fulltext params[:search]
  end
  @posts = search.results

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @posts }
  end
end 
```

# android - Android 媒体播放器不播放 RTSP 链接 Errror error (100, 0) E/MediaPlayer(1170): Error (100,0)

> ID：12000854
> 
> 赞同：1
> 
> 时间：2012-08-17T06:34:26.587
> 
> 标签：android, media-player, android-videoview

我正在尝试在 micromax 平板电脑 android 版本 4.0.3、内核版本-3.0.8+inet-soft@inet#1 中播放 RTSP 链接。相同的链接正在另一部手机（如熔岩和戴尔）中播放，但在 micromax 选项卡中时我们想玩它会抛出错误............

**代码：**

```
myVideoView.setVideoURI(Uri.parse(url));
        progressDialog.setCancelable(true);
        myVideoView.setMediaController(new MediaController(this));
        myVideoView.requestFocus(); 
```

**错误：**

```
W/AudioSystem( 1170): AudioFlinger server died!
W/IMediaDeathNotifier( 1170): media server died
E/MediaPlayer( 1170): error (100, 0)
E/MediaPlayer( 1170): Error (100,0)
D/VideoView( 1170): Error: 100,0
W/IMediaDeathNotifier(  145): media server died
I/ServiceManager(   80): service 'media.audio_flinger' died
I/ServiceManager(   80): service 'media.player' died
I/ServiceManager(   80): service 'media.camera' died
I/ServiceManager(   80): service 'media.audio_policy' died
W/AudioSystem(  145): AudioFlinger server died!
W/AudioSystem(  145): AudioPolicyService server died!
I/ServiceManager(  145): Waiting for service media.player... 
```

# java - 使用 AppGameContainer 时 java slick2D 项目中的运行时错误

> ID：12000859
> 
> 赞同：0
> 
> 时间：2012-08-17T06:34:54.270
> 
> 标签：java, jar, lwjgl, slick2d

您好我正在尝试使用 slick2D 和 lwjgl 2.8.4 制作 Java 游戏。但我无法实现 AppGameContainer 类。它会导致运行时错误。我的代码如下：

 **```
 import org.newdawn.slick.AppGameContainer;
  import org.newdawn.slick.BasicGame;
  import org.newdawn.slick.GameContainer;
  import org.newdawn.slick.Graphics;
  import org.newdawn.slick.SlickException;

  public class Main extends BasicGame{

   public Main(String title) {
    super(title);
    // TODO Auto-generated constructor stub
   }

   public static void main(String args[]) throws SlickException{
    AppGameContainer app = new AppGameContainer(new Main("Tower Defence"));
    app.setDisplayMode(800, 600, false);
        app.start();

   }

   @Override
   public void render(GameContainer container, Graphics g)
        throws SlickException {
    // TODO Auto-generated method stub

   }

   @Override
   public void init(GameContainer container) throws SlickException {
    // TODO Auto-generated method stub

   }

   @Override
   public void update(GameContainer container, int delta)
        throws SlickException {
    // TODO Auto-generated method stub

   }

  } 
```*  *然后我得到以下运行时错误： ![在此处输入图像描述](../Images/30706ee88ab13e13168a96e0ab78eb1a.png)

我在 Eclipse 中的包资源管理器如下所示：

![在此处输入图像描述](../Images/7d5261cbaea3bdc09e5ceda416396222.png)

我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:05:20.893

显卡驱动没有安装。安装显卡驱动解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T18:39:03.807

试试这个：

```
public static void main(String[] args) {

    AppGameContainer app;

    try {

        app = new AppGameContainer(new Main("Tower Defence"));
        app.setDisplayMode(800, 600, false);
        app.start();

    } catch (SlickException e) {

        e.printStackTrace();

    }

} 
```

这就是我的结构。**

# debian - postgresql.conf 优化

> ID：12000860
> 
> 赞同：1
> 
> 时间：2012-08-17T06:34:56.810
> 
> 标签：debian, postgresql-8.4, dedicated-server, database-tuning

我的 postgresql 服务器非常慢。特别是当我在不同的线程中同时执行多个查询时，有时会导致 postgresql 服务器在 5 到 15 秒内无响应。我想知道我是否在 postgresql.conf 中犯了错误。

我的专用服务器有 2 个内核和 4 GB 内存，以及一个标准 SATA-2 磁盘。postgres db（8.4版）中有6gb的数据，同时连接了几百个用户。我正在使用 JDBC 访问 postgress，同时运行 1 到 10 个访问数据库的线程。我的服务器是 debian lenny。Cpu 没有 100% 使用，内存也没有。

感谢您提供任何帮助。

```
 # -----------------------------
    # PostgreSQL configuration file
    # -----------------------------
    #
    # This file consists of lines of the form:
    #
    #   name = value
    #
    # (The "=" is optional.)  Whitespace may be used.  Comments are introduced with
    # "#" anywhere on a line.  The complete list of parameter names and allowed
    # values can be found in the PostgreSQL documentation.
    #
    # The commented-out settings shown in this file represent the default values.
    # Re-commenting a setting is NOT sufficient to revert it to the default value;
    # you need to reload the server.
    #
    # This file is read on server startup and when the server receives a SIGHUP
    # signal.  If you edit the file on a running system, you have to SIGHUP the
    # server for the changes to take effect, or use "pg_ctl reload".  Some
    # parameters, which are marked below, require a server shutdown and restart to
    # take effect.
    #
    # Any parameter can also be given as a command-line option to the server, e.g.,
    # "postgres -c log_connections=on".  Some parameters can be changed at run time
    # with the "SET" SQL command.
    #
    # Memory units:  kB = kilobytes        Time units:  ms  = milliseconds
    #                MB = megabytes                     s   = seconds
    #                GB = gigabytes                     min = minutes
    #                                                   h   = hours
    #                                                   d   = days

    #------------------------------------------------------------------------------
    # FILE LOCATIONS
    #------------------------------------------------------------------------------

    # The default values of these variables are driven from the -D command-line
    # option or PGDATA environment variable, represented here as ConfigDir.

    data_directory = '/home/keyja/dbdata'       # use data in another directory
                        # (change requires restart)
    hba_file = '/etc/postgresql/8.4/main/pg_hba.conf'   # host-based authentication file
                        # (change requires restart)
    ident_file = '/etc/postgresql/8.4/main/pg_ident.conf'   # ident configuration file
                        # (change requires restart)

    # If external_pid_file is not explicitly set, no extra PID file is written.
    external_pid_file = '/var/run/postgresql/8.4-main.pid'      # write an extra PID file
                        # (change requires restart)

    #------------------------------------------------------------------------------
    # CONNECTIONS AND AUTHENTICATION
    #------------------------------------------------------------------------------

    # - Connection Settings -

    listen_addresses = '*'      # what IP address(es) to listen on;
                        # comma-separated list of addresses;
                        # defaults to 'localhost', '*' = all
                        # (change requires restart)
    port = 5432             # (change requires restart)
    max_connections = 100           # (change requires restart)
    # Note:  Increasing max_connections costs ~400 bytes of shared memory per 
    # connection slot, plus lock space (see max_locks_per_transaction).
    #superuser_reserved_connections = 3 # (change requires restart)
    unix_socket_directory = '/var/run/postgresql'       # (change requires restart)
    #unix_socket_group = ''         # (change requires restart)
    #unix_socket_permissions = 0777     # begin with 0 to use octal notation
                        # (change requires restart)
    #bonjour_name = ''          # defaults to the computer name
                        # (change requires restart)

    # - Security and Authentication -

    #authentication_timeout = 1min      # 1s-600s
    ssl = true              # (change requires restart)
    #ssl_ciphers = 'ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH'  # allowed SSL ciphers
                        # (change requires restart)
    #ssl_renegotiation_limit = 512MB    # amount of data between renegotiations
    #password_encryption = on
    #db_user_namespace = off

    # Kerberos and GSSAPI
    #krb_server_keyfile = ''
    #krb_srvname = 'postgres'       # (Kerberos only)
    #krb_caseins_users = off

    # - TCP Keepalives -
    # see "man 7 tcp" for details

    #tcp_keepalives_idle = 0        # TCP_KEEPIDLE, in seconds;
                        # 0 selects the system default
    #tcp_keepalives_interval = 0        # TCP_KEEPINTVL, in seconds;
                        # 0 selects the system default
    #tcp_keepalives_count = 0       # TCP_KEEPCNT;
                        # 0 selects the system default

    #------------------------------------------------------------------------------
    # RESOURCE USAGE (except WAL)
    #------------------------------------------------------------------------------

    # - Memory -

    shared_buffers = 1024MB         # min 128kB
                        # (change requires restart)
    #temp_buffers = 8MB         # min 800kB
    #max_prepared_transactions = 0      # zero disables the feature
                        # (change requires restart)
    # Note:  Increasing max_prepared_transactions costs ~600 bytes of shared memory
    # per transaction slot, plus lock space (see max_locks_per_transaction).
    # It is not advisable to set max_prepared_transactions nonzero unless you
    # actively intend to use prepared transactions.
    work_mem = 100MB                # min 64kB
    maintenance_work_mem = 160MB        # min 1MB
    #max_stack_depth = 2MB          # min 100kB

    # - Kernel Resource Usage -

    #max_files_per_process = 1000       # min 25
                        # (change requires restart)
    #shared_preload_libraries = ''      # (change requires restart)

    # - Cost-Based Vacuum Delay -

    #vacuum_cost_delay = 0ms        # 0-100 milliseconds
    #vacuum_cost_page_hit = 1       # 0-10000 credits
    #vacuum_cost_page_miss = 10     # 0-10000 credits
    #vacuum_cost_page_dirty = 20        # 0-10000 credits
    #vacuum_cost_limit = 200        # 1-10000 credits

    # - Background Writer -

    #bgwriter_delay = 200ms         # 10-10000ms between rounds
    #bgwriter_lru_maxpages = 100        # 0-1000 max buffers written/round
    #bgwriter_lru_multiplier = 2.0      # 0-10.0 multipler on buffers scanned/round

    # - Asynchronous Behavior -

    #effective_io_concurrency = 1       # 1-1000\. 0 disables prefetching

    #------------------------------------------------------------------------------
    # WRITE AHEAD LOG
    #------------------------------------------------------------------------------

    # - Settings -

    fsync = off             # turns forced synchronization on or off
    #synchronous_commit = on        # immediate fsync at commit
    #wal_sync_method = fsync        # the default is the first option 
                        # supported by the operating system:
                        #   open_datasync
                        #   fdatasync (default on Linux)
                        #   fsync
                        #   fsync_writethrough
                        #   open_sync
    full_page_writes = off          # recover from partial page writes
    #wal_buffers = 64kB         # min 32kB
                        # (change requires restart)
    #wal_writer_delay = 200ms       # 1-10000 milliseconds

    #commit_delay = 0           # range 0-100000, in microseconds
    #commit_siblings = 5            # range 1-1000

    # - Checkpoints -

    checkpoint_segments = 20        # in logfile segments, min 1, 16MB each
    #checkpoint_timeout = 5min      # range 30s-1h
    checkpoint_completion_target = 0.9  # checkpoint target duration, 0.0 - 1.0
    #checkpoint_warning = 30s       # 0 disables

    # - Archiving -

    #archive_mode = off     # allows archiving to be done
                    # (change requires restart)
    #archive_command = ''       # command to use to archive a logfile segment
    #archive_timeout = 0        # force a logfile segment switch after this
                    # number of seconds; 0 disables

    #------------------------------------------------------------------------------
    # QUERY TUNING
    #------------------------------------------------------------------------------

    # - Planner Method Configuration -

    #enable_bitmapscan = on
    #enable_hashagg = on
    #enable_hashjoin = on
    #enable_indexscan = on
    #enable_mergejoin = on
    #enable_nestloop = on
    #enable_seqscan = on
    #enable_sort = on
    #enable_tidscan = on

    # - Planner Cost Constants -

    #seq_page_cost = 1.0            # measured on an arbitrary scale
    #random_page_cost = 4.0         # same scale as above
    #cpu_tuple_cost = 0.01          # same scale as above
    #cpu_index_tuple_cost = 0.005       # same scale as above
    #cpu_operator_cost = 0.0025     # same scale as above
    effective_cache_size = 256MB

    # - Genetic Query Optimizer -

    #geqo = on
    #geqo_threshold = 12
    #geqo_effort = 5            # range 1-10
    #geqo_pool_size = 0         # selects default based on effort
    #geqo_generations = 0           # selects default based on effort
    #geqo_selection_bias = 2.0      # range 1.5-2.0

    # - Other Planner Options -

    #default_statistics_target = 100    # range 1-10000
    #constraint_exclusion = partition   # on, off, or partition
    #cursor_tuple_fraction = 0.1        # range 0.0-1.0
    #from_collapse_limit = 8
    #join_collapse_limit = 8        # 1 disables collapsing of explicit 
                        # JOIN clauses

    #------------------------------------------------------------------------------
    # ERROR REPORTING AND LOGGING
    #------------------------------------------------------------------------------

    # - Where to Log -

    log_destination = 'stderr'      # Valid values are combinations of
                        # stderr, csvlog, syslog and eventlog,
                        # depending on platform.  csvlog
                        # requires logging_collector to be on.

    # This is used when logging to stderr:
    logging_collector = ON      # Enable capturing of stderr and csvlog
                        # into log files. Required to be on for
                        # csvlogs.
                        # (change requires restart)

    # These are only used if logging_collector is on:
    log_directory = 'pg_log'        # directory where log files are written,
                        # can be absolute or relative to PGDATA
    log_filename = 'postgresql_%A.log'  # log file name pattern,
                        # can include strftime() escapes
    log_truncate_on_rotation = on       # If on, an existing log file of the
                        # same name as the new log file will be
                        # truncated rather than appended to.
                        # But such truncation only occurs on
                        # time-driven rotation, not on restarts
                        # or size-driven rotation.  Default is
                        # off, meaning append to existing files
                        # in all cases.
    log_rotation_age = 1d           # Automatic rotation of logfiles will
                        # happen after that time.  0 disables.
    #log_rotation_size = 10MB       # Automatic rotation of logfiles will 
                        # happen after that much log output.
                        # 0 disables.

    # These are relevant when logging to syslog:
    #syslog_facility = 'LOCAL0'
    #syslog_ident = 'postgres'

    silent_mode = on            # Run server silently.
                        # DO NOT USE without syslog or
                        # logging_collector
                        # (change requires restart)

    # - When to Log -

    #client_min_messages = notice       # values in order of decreasing detail:
                        #   debug5
                        #   debug4
                        #   debug3
                        #   debug2
                        #   debug1
                        #   log
                        #   notice
                        #   warning
                        #   error

    #log_min_messages = warning     # values in order of decreasing detail:
                        #   debug5
                        #   debug4
                        #   debug3
                        #   debug2
                        #   debug1
                        #   info
                        #   notice
                        #   warning
                        #   error
                        #   log
                        #   fatal
                        #   panic

    #log_error_verbosity = default      # terse, default, or verbose messages

    #log_min_error_statement = error    # values in order of decreasing detail:
                        #   debug5
                        #   debug4
                        #   debug3
                        #   debug2
                        #   debug1
                        #   info
                        #   notice
                        #   warning
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)

    log_min_duration_statement = 1000   # -1 is disabled, 0 logs all statements
                        # and their durations, > 0 logs only
                        # statements running at least this number
                        # of milliseconds

    # - What to Log -

    #debug_print_parse = off
    #debug_print_rewritten = off
    #debug_print_plan = off
    #debug_pretty_print = on
    #log_checkpoints = off
    #log_connections = off
    #log_disconnections = off
    log_duration = off
    #log_hostname = off
    log_line_prefix = '%t [%p]: [%l-1] '            # special values:
                        #   %u = user name
                        #   %d = database name
                        #   %r = remote host and port
                        #   %h = remote host
                        #   %p = process ID
                        #   %t = timestamp without milliseconds
                        #   %m = timestamp with milliseconds
                        #   %i = command tag
                        #   %c = session ID
                        #   %l = session line number
                        #   %s = session start timestamp
                        #   %v = virtual transaction ID
                        #   %x = transaction ID (0 if none)
                        #   %q = stop here in non-session
                        #        processes
                        #   %% = '%'
                        # e.g. '<%u%%%d> '
    #log_lock_waits = off           # log lock waits >= deadlock_timeout
    log_statement = 'all'           # none, ddl, mod, all
    #log_temp_files = -1            # log temporary files equal or larger
                        # than the specified size in kilobytes;
                        # -1 disables, 0 logs all temp files
    #log_timezone = unknown         # actually, defaults to TZ environment
                        # setting

    #------------------------------------------------------------------------------
    # RUNTIME STATISTICS
    #------------------------------------------------------------------------------

    # - Query/Index Statistics Collector -

    #track_activities = on
    track_counts = on
    #track_functions = none         # none, pl, all
    #track_activity_query_size = 1024
    #update_process_title = on
    #stats_temp_directory = 'pg_stat_tmp'

    # - Statistics Monitoring -

    #log_parser_stats = off
    #log_planner_stats = off
    #log_executor_stats = off
    #log_statement_stats = off

    #------------------------------------------------------------------------------
    # AUTOVACUUM PARAMETERS
    #------------------------------------------------------------------------------

    autovacuum = on         # Enable autovacuum subprocess?  'on' 
                        # requires track_counts to also be on.
    log_autovacuum_min_duration = -1    # -1 disables, 0 logs all actions and
                        # their durations, > 0 logs only
                        # actions running at least this number
                        # of milliseconds.
    autovacuum_max_workers = 3      # max number of autovacuum subprocesses
    autovacuum_naptime = 1min       # time between autovacuum runs
    autovacuum_vacuum_threshold = 50    # min number of row updates before
                        # vacuum
    autovacuum_analyze_threshold = 50   # min number of row updates before 
                        # analyze
    autovacuum_vacuum_scale_factor = 0.2    # fraction of table size before vacuum
    autovacuum_analyze_scale_factor = 0.1   # fraction of table size before analyze
    autovacuum_freeze_max_age = 200000000   # maximum XID age before forced vacuum
                        # (change requires restart)
    autovacuum_vacuum_cost_delay = 20ms # default vacuum cost delay for
                        # autovacuum, in milliseconds;
                        # -1 means use vacuum_cost_delay
    autovacuum_vacuum_cost_limit = -1   # default vacuum cost limit for
                        # autovacuum, -1 means use
                        # vacuum_cost_limit

    #------------------------------------------------------------------------------
    # CLIENT CONNECTION DEFAULTS
    #------------------------------------------------------------------------------

    # - Statement Behavior -

    #search_path = '"$user",public'     # schema names
    #default_tablespace = ''        # a tablespace name, '' uses the default
    #temp_tablespaces = ''          # a list of tablespace names, '' uses
                        # only default tablespace
    #check_function_bodies = on
    #default_transaction_isolation = 'read committed'
    #default_transaction_read_only = off
    #session_replication_role = 'origin'
    #statement_timeout = 0          # in milliseconds, 0 is disabled
    #vacuum_freeze_min_age = 50000000
    #vacuum_freeze_table_age = 150000000
    #xmlbinary = 'base64'
    #xmloption = 'content'

    # - Locale and Formatting -

    datestyle = 'iso, dmy'
    #intervalstyle = 'postgres'
    #timezone = unknown         # actually, defaults to TZ environment
                        # setting
    #timezone_abbreviations = 'Default'     # Select the set of available time zone
                        # abbreviations.  Currently, there are
                        #   Default
                        #   Australia
                        #   India
                        # You can create your own file in
                        # share/timezonesets/.
    #extra_float_digits = 0         # min -15, max 2
    #client_encoding = sql_ascii        # actually, defaults to database
                        # encoding

    # These settings are initialized by initdb, but they can be changed.
    lc_messages = 'en_GB'           # locale for system error message
                        # strings
    lc_monetary = 'en_GB'           # locale for monetary formatting
    lc_numeric = 'en_GB'            # locale for number formatting
    lc_time = 'en_GB'               # locale for time formatting

    # default configuration for text search
    default_text_search_config = 'pg_catalog.english'

    # - Other Defaults -

    #dynamic_library_path = '$libdir'
    #local_preload_libraries = ''

    #------------------------------------------------------------------------------
    # LOCK MANAGEMENT
    #------------------------------------------------------------------------------

    #deadlock_timeout = 1s
    #max_locks_per_transaction = 64     # min 10
                        # (change requires restart)
    # Note:  Each lock table slot uses ~270 bytes of shared memory, and there are
    # max_locks_per_transaction * (max_connections + max_prepared_transactions)
    # lock table slots.

    #------------------------------------------------------------------------------
    # VERSION/PLATFORM COMPATIBILITY
    #------------------------------------------------------------------------------

    # - Previous PostgreSQL Versions -

    #add_missing_from = off
    #array_nulls = on
    #backslash_quote = safe_encoding    # on, off, or safe_encoding
    #default_with_oids = off
    #escape_string_warning = on
    #regex_flavor = advanced        # advanced, extended, or basic
    #sql_inheritance = on
    #standard_conforming_strings = off
    #synchronize_seqscans = on

    # - Other Platforms and Clients -

    #transform_null_equals = off

    #------------------------------------------------------------------------------
    # CUSTOMIZED OPTIONS
    #------------------------------------------------------------------------------

    #custom_variable_classes = ''       # list of custom variable class names 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:54:43.613

> 数百个用户同时连接

```
最大连接数 = 100

```

你在使用连接池吗？如果是这样，是哪一个，它是如何*配置*的？

> 我正在使用 JDBC 访问 postgress，同时运行 1 到 10 个访问数据库的线程。

... 或者您的 Java 应用程序是否有效地处理了连接池？如果是这样，10 是其数据库连接的硬限制吗？

> 2 个内核和 4 GB 内存，以及一个标准 SATA-2 磁盘

多少并发查询往往会导致问题？你没有很多资源可以分享。您可能应该[将活动数据库事务限制](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)为大约 5 个。

```
共享缓冲区 = 1024MB
工作内存 = 100MB

```

由于每个连接可以为每个计划节点分配`work_mem`一次空间，因此不需要很多并发查询就可以完全降低性能。

```
fsync = 关闭
full_page_writes = 关闭

```

通过这些设置，你告诉 PostgreSQL 如果操作系统、硬件或虚拟机崩溃，丢失数据库中的所有数据是可以的——你要么不关心数据库中的数据，要么你愿意去您最新的已知良好备份。如果您关闭这些`on`并关闭，`synchronous_commit`您的性能将几乎相同，但您不会在操作系统崩溃时冒不可恢复的数据库损坏的风险；只是在提交事务时，数据实际上可能不会在短时间内持久化，通常不到一秒。

> 8.4版

从那以后的每个版本都包括对检查点处理的改进，这可能会降低您描述的问题类型的频率和严重性。你应该考虑升级。

# android - 谷歌地图密钥（SHA1）证书

> ID：12000861
> 
> 赞同：0
> 
> 时间：2012-08-17T06:34:56.853
> 
> 标签：android

我正在使用以下命令生成 MD5 证书。但我正在获得 SHA1 证书。生成证书时指纹无效。我在哪里做错了。

`keytool -list -alias androiddebugkey -keystore ./.android/debug.keystore`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T06:43:41.493

试试这个。几天前我遇到了同样的问题。如果您使用`JDK 1.7`它，它将生成`SHA1`而不是`MD5`指纹`MD5`。生成使用中的指纹`JDK 1.7`（-v）选项的keytool。

例如 ：`keytool -v -list -keystore [your keystore path]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:46:51.650

试试这个它也会显示MD5

```
keytool -v -list -alias androiddebugkey -keystore ./.android/debug.keystore 
```

在 keytool 和 -list 之间添加了 -v。

# c# - 如何使用 JavaScript 连接到 sqlserver 2008 R2

> ID：12000862
> 
> 赞同：0
> 
> 时间：2012-08-17T06:35:00.570
> 
> 标签：c#, javascript, asp.net, sql-server

我需要使用 JavaScript 连接到数据库，并且我使用了以下代码

```
function Accept() {
             var connection = new ActiveXObject("ADODB.Connection");
             var connectionstring = "Data Source=mydatasource;Initial Catalog=DJ;User ID=sa;Password=mypass;Provider=SQLOLEDB;Persist Security Info=True";
             connection.Open(connectionstring);
             var rs = new ActiveXObject("ADODB.Recordset");
             rs.Open("SELECT username FROM tbl_login where username='aby'", connection);
             rs.MoveFirst
             while (!rs.eof) {
                 document.write(rs.fields(1));
                 rs.movenext;
             }
             rs.close;
             connection.close; 
        } 
```

但我收到这样的错误

Microsoft JScript 运行时错误：`[DBNETLIB][ConnectionOpen (Connect()).]SQL Server does not exist or access denied.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:48:01.993

您的 JavaScript 代码正在访问客户端 PC 上的本地资源。

因此，它正在客户端 PC 上搜索数据库服务器。

您最好使用 JQuery 或[ASP.Net PageMethods](http://www.dotnetcurry.com/ShowArticle.aspx?ID=109&AspxAutoDetectCookieSupport=1)向将处理数据库访问逻辑的服务器发出 Ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:10:03.793

尝试使用 sql 身份验证连接到您的数据库，因为我认为您的帐户无法正常工作

# javascript - Backbone：集合中模型的顺序

> ID：12000864
> 
> 赞同：1
> 
> 时间：2012-08-17T06:35:10.820
> 
> 标签：javascript, backbone.js

我们从一个数组创建了一个模型集合，如下所示。我们的问题是：集合是否会保留与原始数组中相同的元素/模型顺序？换句话说，Collection 中是否保证（源数组的）相同顺序？

```
 var colorsData = [
    {
        name: 'red'
    },
    {
        name: 'blue'
    },
    {
        name: 'green'
    },
    .....
    .....
    .....
    //other colors
];

    var Color = Backbone.Model.extend({
        defaults: {
            name: 'white'
        }
    });

    var ColorCollection = Backbone.Collection.extend({
        model: Color
    });

    var colorCollection1 = new ColorCollection(colorsData); //creating a collection from the source array colorsData. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:25:50.543

从我能收集到的所有信息来看，是的 a`Collection`保留了元素的原始顺序。

您可以阅读带注释的[收藏](http://backbonejs.org/docs/backbone.html#section-75)源，以亲眼看看它不是不时地神奇地洗牌。`at`, `unshift`, `pop`,等函数`push`非常清楚地表明了这一点。

您可以阅读带注释的源代码`parse`，用于在例如`fetch`-oprations 之后解析来自服务器的响应：

```
parse: function(resp, xhr) {
  return resp;
}, 
```

确定传递给您的收藏的任何内容都不会在任何地方洗牌。resp 将被传递给`add`-function 以自然顺序处理响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:43:10.537

如[http://backbonejs.org/#Collection中所述](http://backbonejs.org/#Collection)

`collection.at(index)`按插入顺序检索模型。

# iphone - cocos2D 和 Box2D：如何获得精确触摸的精灵？

> ID：12000865
> 
> 赞同：1
> 
> 时间：2012-08-17T06:35:15.003
> 
> 标签：iphone, cocos2d-iphone, box2d

我正在尝试在触摸移动时移动精灵。但是当有两个精灵时，我会接触到两个精灵。这就是精灵不能正常移动的原因。

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
{

if (_mouseJoint != NULL) return;

    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

    for(int i=0;i<[mutArrFixtures count];i++)
    {
        b2Fixture *fixture;
        [[mutArrFixtures objectAtIndex:i] getValue:&fixture];

        if (fixture->TestPoint(locationWorld)){

            for(int j=0; j<[mutArrPaddleBody count]; j++)
            {
                b2Body *body;
                [[mutArrPaddleBody objectAtIndex:j] getValue:&body];
                b2MouseJointDef md;
                if(body == fixture->GetBody())
                {
                    md.bodyA = _groundBody;
                    md.bodyB = body;
                    md.target = locationWorld;
                    md.collideConnected = true;
                    md.maxForce = 1000.0f * body->GetMass();

                    _mouseJoint = (b2MouseJoint *)_world->CreateJoint(&md);
                    body->SetAwake(true);
                }
            }
        }
    }
} 
```

我有一个 b2Fixture 数组`mutArrFixtures`和一个 b2body 数组`mutArrPaddleBody`。但是在这里，如果我触摸第二个精灵，我会触摸到第一个精灵和第二个精灵..两个精灵的位置是相同的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:19:19.500

在触摸功能中，检查精灵的标签。如果那是您的正确精灵，请移动。给我看一些你用于触摸移动的代码。

…………

用下一个替换这些代码

```
 b2Body *body;
            [[mutArrPaddleBody objectAtIndex:j] getValue:&body];
            b2MouseJointDef md;
            if(body == fixture->GetBody()) 
```

和

```
b2Body* body = fixture->GetBody();

CCSprite *sprite = (CCSprite*)body->GetUserData();

if( sprite && sprite.tag == kTagHero) 
{

} 
```

确保你为你的移动精灵添加了标签 kTagHero。

……

```
enum gameTag {
  kTagHero = 1001
}; 
```

并分配 sprite.tag = kTagHero ......

# vbscript - 需要在 VB 脚本中进行澄清以执行某些天的计算

> ID：12000875
> 
> 赞同：0
> 
> 时间：2012-08-17T06:36:05.953
> 
> 标签：vbscript, editor, workflow, hp-quality-center

我目前正在使用 VB 脚本在 HP Application Lifecycle 管理工具中定义工作流脚本。

我的问题是我必须生成一个 Excel 图表来计算各个开发人员在特定 Sprint（时间范围）中所做的努力。在生成相同的过程中，我的条件是从图表中消除周末日期（即周六和周日）。如果 Sprint 开始日期在周末，则应自动将日期初始化为下一个紧接的星期一，如果 Sprint 结束日期在周末，则结束日期应显示为刚刚过去的星期五。我已经验证了这两个条件。我正在努力减少这两天之间的周六和周日。请帮助我。如果您需要我方面的任何意见，也请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:58:20.007

@Sabaresh，我相信这就是你要找的。

提示：有关将 Microsoft 的权威 WSH 参考下载为 Windows 帮助文件的信息，请参阅[此答案。](https://stackoverflow.com/a/11371416/1497596)

```
Option Explicit

Dim dCandidateDate, dActualStartDate, dActualEndDate

dCandidateDate = CDate("2012/08/18")
dActualStartDate = SprintStartDate(dCandidateDate)

dCandidateDate = CDate("2012/09/16")
dActualEndDate   = SprintEndDate(dCandidateDate)

WScript.Echo "Sprint date range: " _
       & dActualStartDate & " through " & dActualEndDate

'
' Return following Monday if dCandidateDate is
' Saturday or Sunday.
'
Function SprintStartDate(dCandidateDate)
    Dim nWeekday : nWeekday = DatePart("w", dCandidateDate)
    Select Case nWeekday
        Case 7  ' Saturday
            SprintStartDate = DateAdd("d", 2, dCandidateDate)
        Case 1  ' Sunday
            SprintStartDate = DateAdd("d", 1, dCandidateDate)
        Case Else
            SprintStartDate = dCandidateDate
    End Select
End Function

'
' Return previous Friday if dCandidateDate is
' Saturday or Sunday.
'
Function SprintEndDate(dCandidateDate)
    Dim nWeekday : nWeekday = DatePart("w", dCandidateDate)
    Select Case nWeekday
        Case 7  ' Saturday
            SprintEndDate = DateAdd("d", -1, dCandidateDate)
        Case 1  ' Sunday
            SprintEndDate = DateAdd("d", -2, dCandidateDate)
        Case Else
            SprintEndDate = dCandidateDate
    End Select
End Function 
```

# c - 使用 ShellExecuteEx 在已启动的实例中调用 iexplore.exe

> ID：12000876
> 
> 赞同：4
> 
> 时间：2012-08-17T06:36:20.477
> 
> 标签：c, windows, winapi, sdk

我曾经`ShellExecuteEx`调用过`iexplore.exe`，每当我启动应用程序时，都会创建一个新的 Internet Explorer 实例，无论 Internet Explorer 是否已打开。

我想更改这一点，如果 Internet Explorer 的实例已经存在，我需要在该实例中打开一个新选项卡，其中包含我传递给 的地址`ShExecInfo.lpParameters`，因此无需创建新窗口。有没有办法做到这一点？请指教..

更新：在下面的答案中，我遇到了一个问题，当我将 lpFile 参数设置为“iexplore.exe”并将 lpParameters 设置为“www.google.com”时，会打开两个窗口。如果我忽略 lpfile 参数，那么下面的代码会在某些机器上打开默认浏览器。我只想打开 Internet Explorer。请帮忙..

```
int WINAPI WinMain ( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow ) { 

 ShellExecute(0,L"open",L"iexplore.exe", L"http://www.google.com",0,SW_SHOWDEFAULT );       

 ShellExecute(0,L"open", L"iexplore.exe", L"http://www.yahoo.com",0,SW_SHOWDEFAULT );        

 return 0;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T07:01:16.240

它适用于`ShellExecute`.

```
#include <stdio.h>
#include <tchar.h>
#include <Windows.h>

int _tmain(int argc, _TCHAR* argv[])
{
    ShellExecute(0,L"open",L"http://www.google.com",0,0,SW_SHOWDEFAULT );   
    ShellExecute(0,L"open",L"http://www.yahoo.com",0,0,SW_SHOWDEFAULT );    
    return 0;
} 
```

# java - Struts2+ Spring：请求参数不会在动作对象中重置？

> ID：12000881
> 
> 赞同：0
> 
> 时间：2012-08-17T06:36:50.320
> 
> 标签：java, spring, struts2, httprequest

我正在开发 Spring 3 + Struts2 应用程序，我在 Spring 中配置我的动作如下：

```
 <bean id="patientSearchAPIClass" class="com.axiohelix.nozoki.web.action.api.PatientSearch">     
       <property name="searchService" ref="searchService"/>        
    </bean> 
```

但是在我的 Action 类中，我保留字段来存储请求参数，

```
public class PatientSearch extends ActionSupport {

        public String getPharumoId() {      
        return pharumoId;
        }

        public void setPharumoId(String pharumoId) {
        this.pharumoId = pharumoId;
         }

        public String getName() {
        return name;
        }
        public void setName(String name) {
        this.name = name;
        }

        private String name;
        private String pharumoId;
        ..

        public String execute(){        
        searchResults=searchService.searchPatients(pharumoId,                                                  name,
                                                   birthday,
                                                   pharmacyId,
                                                   clinic,
                                                   doctorName,
                                                   drugName,
                                                   supplyDate,                                                 
                                                   offset, 
                                                   pageSize);       

        return Action.SUCCESS;
    } 
```

此操作返回 JSON 输出，我使用以下 URL 访问它：

**http://localhost/app/searchAPI.action?name=UserName**

那么下次如果我使用 URL 访问：

**http://localhost/app/searchAPI.action**

“名称”字段设置为之前的“用户名”值。

1.如何根据请求重置这些值？

2.我认为动作类是根据请求实例化的，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:14:33.390

问题在于 Spring 创建 Action 类的方式。默认情况下，Spring 创建单例实例，对于 Struts2，Action 类也可以作为模型工作，因为这个框架创建了一个新的 Action 实例并将其放入值堆栈中。

在使用 Spring 创建动作类时，请确保将范围定义为原型

```
<bean id="patientSearchAPIClass" 
 class="com.axiohelix.nozoki.web.action.api.PatientSearch" scope=prototype> 
```

因此，Spring 应该为每个请求创建新的 Action 实例。

# android-activity - 将项目列表中单击项目的值传递给新活动

> ID：12000884
> 
> 赞同：1
> 
> 时间：2012-08-17T06:36:57.810
> 
> 标签：android-activity

我试图让在我的 listactivity 上单击的值显示在third.xml 上。它有 4 个 editText 字段。我想在 4 个 ET 字段上显示 4 列。帮助！！！这是在我的 DBAdapter 中获取特定记录的代码：

```
public Cursor getRecord(long rowId) throws SQLException
 {
 Cursor mCursor =
 db.query(true, DATABASE_TABLE, new String[] {ROW_ID,
 KEY_FIRSTNAME, KEY_LASTNAME, KEY_CITY, KEY_STATE},
 ROW_ID + "=" + rowId, null, null, null, null, null);
 if (mCursor != null) {
 mCursor.moveToFirst();
 }
 return mCursor;
    } 
```

然后这里是我的 Second.java 列表活动包 com.dtan.testcontacts；

```
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;

import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View.OnLongClickListener;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.AdapterView.AdapterContextMenuInfo;

public class Second extends ListActivity {
public final static String ID_EXTRA="com.dtan.testcontacts._ID";
DBAdapter db = new DBAdapter(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    db.open();
    Cursor c = db.getAllContacts();
    ArrayList<String> columns = new ArrayList<String>();

    int iFirstName = c.getColumnIndex(DBAdapter.KEY_FIRSTNAME);
    int iLastName = c.getColumnIndex(DBAdapter.KEY_LASTNAME);

                for(c.move(0); c.moveToNext(); c.isAfterLast()){
                    String columnstring = c.getString(iFirstName)+ " " + c.getString(iLastName)+"\n";
                    columns.add(columnstring);
                }
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, columns);
            setListAdapter(adapter);
            final ListView lv = getListView();
            registerForContextMenu(lv);

                }

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.contextmenu, menu);
    }

@Override
public boolean onContextItemSelected(MenuItem item) {
     final AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch(item.getItemId()){
    case R.id.delete:
        AlertDialog.Builder abuilder = new AlertDialog.Builder(Second.this);
        abuilder.setMessage("Are you sure you want to delete?");
        abuilder.setCancelable(false);
        abuilder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Cursor c = db.getAllContacts();
                c.moveToPosition(info.position);
                String id = c.getString(c.getColumnIndex(DBAdapter.ROW_ID));
                db.open();
                db.deleteContact(Long.parseLong(id)); 
                c.close();
                Toast toast = Toast.makeText(Second.this, "Contact Deleted Successfully", 5000);
                toast.show();
                Intent i = new Intent(Second.this, Second.class);
                startActivity(i);

            }
        }); 
        abuilder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
            });
        AlertDialog alert = abuilder.create();
        alert.show();

        return true;

    case R.id.edit:

        getListView().setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> lv, View cell,
                        int position, long id) {
                    Intent i = new Intent(Second.this, Third.class);
                    i.putExtra("entry_id", position);
                    startActivity(i);
                }
                });
        }
    return super.onContextItemSelected(item);

} 
```

}

最后，这是第三个活动，我想在其中显示单击列表活动的值以显示在每个编辑文本上。首先是xml，然后是java代码：

```
 <EditText
    android:id="@+id/editText1Third"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="20dp"
    android:clickable="false"
    android:ems="10"
    android:hint="Firstname"
    android:inputType="text"
    android:text="@string/none" />

 <TextView
    android:id="@+id/textView1"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:text="@string/fname" />

 <EditText
    android:id="@+id/editText2Third"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="20dp"
    android:ems="10"
    android:hint="Lastname"
    android:inputType="text"
    android:text="@string/none" />

 <TextView
    android:id="@+id/textView2"
    android:layout_width="74dp"
    android:layout_height="wrap_content"
    android:text="@string/lastname" />

 <EditText
    android:id="@+id/editText3Third"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="20dp"
    android:ems="10"
    android:hint="City"
    android:inputType="text"
    android:text="@string/none" />

 <TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/city" />

 <EditText
    android:id="@+id/editText4Third"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="20dp"
    android:ems="10"
    android:hint="State"
    android:inputType="text"
    android:text="@string/none" >

    <requestFocus />
 </EditText>

 <TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/state" />

 <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="64dp" >

    <Button
        android:id="@+id/ButtonUpdateThird"
        android:layout_width="100dp"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:text="@string/update" />

 </RelativeLayout>

     </LinearLayout> 
```

第三个.java

```
package com.dtan.testcontacts;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.EditText;

public class Third extends Activity {

private DBAdapter db;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.third);
int b = this.getIntent().getExtras().getInt("entry_id");
EditText firstname = (EditText) findViewById(R.id.editText1Third);

db.open();
Cursor c = db.getRecord(b);
firstname.setText(c.getString(1));
db.close();

}
} 
```

# jquery - 更改当前 URL 上的 css

> ID：12000885
> 
> 赞同：1
> 
> 时间：2012-08-17T06:36:58.523
> 
> 标签：jquery, css

我想更改当前 URL 上的 div 样式。

如果我在我的主页上。

```
div.layout-column.column-main.with-column-1.with-column-2{
width:790;
} 
```

如果我在除主页之外的其他页面上，那么我希望我的课程是这样的。

```
div.layout-column.column-main.with-column-1.with-column-2{
width:590;
} 
```

我试过了，但我没有得到正确的输出。

```
if (window.location.href == 'http://easyapuestas.com/')
{
  // alert("hiiii");
document.write("<style>" +
"div.layout-column.column-main.with-column-1.with-column-2{" +
" width: 790px;" +
"}" +
"</style>");
}
if (window.location.href !== 'http://easyapuestas.com')
{
// alert(window.location.href);
   document.write("<style>" +
 "div.layout-column.column-main.with-column-1.with-column-2{" +
 " width: 590px;" +
 "}" +
 "</style>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:41:09.567

尝试这样的事情：

```
$(document).ready(function() { 
   var width = window.location.href == 'http://easyapuestas.com/' ? '790px' : '590px';
   $('div.layout-column.column-main.with-column-1.with-column-2').css('width', width);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:48:17.450

如果您为主页的 body 元素提供类或 id，您应该能够在没有 JS 的情况下在样式表中执行此操作：

```
<body class="home"> 
```

接着：

```
div.layout-column.column-main.with-column-1.with-column-2{
   width:590px;
}

body.home div.layout-column.column-main.with-column-1.with-column-2{
   width:790px;
} 
```

这是因为在正文*没有*“home”类的页面上，只有第一个选择器与您的 div 匹配，但在正文*确实*具有“home”类的页面上，*两个*选择器都与您的 div 匹配，在这种情况下第一个被第二个覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:40:50.647

我认为您尝试使用此检查主页以外的页面

```
if (window.location.href == 'http://easyapuestas.com/') 
```

{

那是错误，最好使用 split(url) 函数将其拆分为“/”，它将返回一个数组。然后你可以检查该数组的元素数量，使用我认为你可以使用它

```
var url=window.location.href == 'http://easyapuestas.com/';
var split_arr=url.split("/"); 
```

// 现在你可以检查这个数组的计数，如果它大于 3，它就不是主页

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:07:31.230

谢谢大家。我得到了我的解决方案。

我通过 php 管理它。我通过 PHP 获取我当前的 URL，然后将 CSS 应用到那个特定的类，它工作得很好。

# android - 带有模拟器的移动 web 编程 ide

> ID：12000886
> 
> 赞同：0
> 
> 时间：2012-08-17T06:36:59.417
> 
> 标签：android, iphone, mobile, web

我完成了一个 android 应用程序的创建，并且已经在 google play 上发布了它。我现在想要的是为移动设备创建一个网站。我想我会使用 PHP、HTML5、CSS 和一些 javascript。但我不知道我应该使用什么 IDE。在桌面上创建网站很容易，因为您可以在 Firefox 中查看它。但是手机呢？是否有**模拟器**可以像 wamp 一样运行 php 文件？我想先通过 localhost 运行我的网站，然后再将其上传到网络中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:40:15.540

您可以在实际设备上查看和测试，而无需“上传到网络”。

为此，请将您的开发计算机上的服务器配置为使用您的本地 IP 地址（它可能以 10.xxx 或 192.168.xx 开头），并确保您的手机或移动设备与计算机在同一无线网络上（这适用于家庭网络，但可能不适用于托管的公司网络）。

您可以直接在手机的浏览器中输入您计算机的 IP 地址（可能还加上端口号），从而测试从您的计算机发送到您手机的网站，而无需将其打开到互联网上。

如果需要，我建议您阅读[DNS](http://en.wikipedia.org/wiki/Domain_Name_System)和 IP 地址以了解您在这里所做的事情，但基本上您的计算机有一个 IP 地址，它是 4 个数字 - 可能看起来像 192.168.xx - 用于识别它在网络上。“本地主机”本质上是“我”的昵称/快捷方式（就像“google.com”是 Google 服务器 IP 地址的昵称/快捷方式一样）。

要查找计算机的地址，请打开终端（使用 run => cmd）并键入

```
ifconfig /all 
```

查找如下所示的行：

```
IP Address. . . . . . . . . . . . : 192.168.0.1 
```

根据您使用的软件及其配置方式，您可以在手机浏览器上直接访问 192.168.xx（替换为您的实际地址）。

如果这不起作用，那么您将不得不配置您的网络服务器以接受不是来自同一台计算机的连接。您正在使用的任何软件（例如 Apache）的自述文件/配置文档都应该提供有关如何执行此操作的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:54:41.570

在这里试试这个

[http://sixrevisions.com/tools/10-excellent-tools-for-testing-your-site-on-mobile-devices/](http://sixrevisions.com/tools/10-excellent-tools-for-testing-your-site-on-mobile-devices/)

# python - 将 tuple of tuples 转换为 dict ---- 当 key 已经存在时不要忽略 value

> ID：12000890
> 
> 赞同：0
> 
> 时间：2012-08-17T06:37:12.303
> 
> 标签：python, dictionary, tuples

输入：

```
a = (("s", 3), ("c", 6), ("s", 8))
dict(a) 
```

输出：

```
{"s": 3, "c": 6} 
```

我怎样才能得到以下结果？

```
{"s": (3, 8), "c": 6} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:44:09.143

```
>>> from collections import defaultdict
>>> a = (("s", 3), ("c", 6), ("s", 8))
>>> d = defaultdict(list)
>>> for c, num in a:
        d[c].append(num)

>>> d
defaultdict(<type 'list'>, {'s': [3, 8], 'c': [6]}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:40:28.383

使用`setdefault()`并且`c`应该是一个列表：

```
>>> a = (("s",3), ("c",6), ("s",8))
>>> dic={}
>>> for x in a:
    dic.setdefault(x[0],[]).append(x[1])

>>> dic
{'s': [3, 8], 'c': [6]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T07:11:53.047

另一种选择是使用`groupby`（虽然我会去`defaultdict`），这意味着如果你需要它们，你可以很容易地留下元组：

```
from itertools import groupby
from operator import itemgetter as ig

a = (("s", 3), ("c", 6), ("s", 8))    
newdict = { k:tuple(map(ig(1), v)) for k, v in groupby(sorted(a), ig(0)) } 
```

# textmate - 使用 Textmate 2 时如何在一个窗口中打开文件

> ID：12000897
> 
> 赞同：1
> 
> 时间：2012-08-17T06:37:37.903
> 
> 标签：textmate, textmate2

当我想打开许多不在同一路径或项目中的文件时，我希望它们在选项卡中而不是在单独的窗口中打开。

有什么设置或配置项可以做到吗？</p>

我正在使用 Textmate 2。

感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:35:15.930

您可以简单地列出要打开的所有文件，并用空格分隔。例如，

`mate .zshrc .dotfiles/aliases Projects/scala/hello/src/greeter/Hello.scala`

在同一个 TextMate 窗口中打开三个选项卡，上面列出的三个文件各一个。您还可以使用`mate .`打开当前目录中的所有文件。

# javascript - 使用键码在可滚动的 div 中上下导航

> ID：12000900
> 
> 赞同：4
> 
> 时间：2012-08-17T06:37:53.187
> 
> 标签：javascript, jquery

我有一个可搜索的文本框，它用搜索结果填充 div。div 是可滚动的。我想要实现的是通过上下翻页（键码 38 和 40）浏览结果项。但是一旦我尝试这个，整个 div 就会滚动，结果项本身不会采用新选择的 css 类。

下面是我的一些代码

```
this.TagNavigation = function (event) {
    var div = $("#TagSearchResults");
    var anchors = $("#TagSearchResults a");
    var selectedAnchor = $("#TagSearchResults a.selected");
    var position = anchors.index(selectedAnchor);

        if (event.keyCode == "13" && anchors.length > 0) {
            FRAMEWORK.AddUpdateInterventionTags(selectedAnchor.attr("id").split("-")[1] + "|" + selectedAnchor.text(), "add");
        }
        if (event.keyCode == "13" && anchors.length == 0 && $("#txtTagSearch").val() != "Start typing to search Tags") {
            FRAMEWORK.AddNewTag($("#txtTagSearch").val());
        }
        else if (event.keyCode == "38") {

            if (position > 0) {
                canClose = false;
                selectedAnchor.removeClass("selected");
                var newSelectedAnchor = $(anchors.get(position - 1));
                newSelectedAnchor.addClass("selected");
                $("#txtTagSearch").val(newSelectedAnchor.text());
            }
        }
        else if (event.keyCode == "40") {

            if (position <= anchors.length) {
                canClose = false;
                selectedAnchor.removeClass("selected");
                var newSelectedAnchor = $(anchors.get(position + 1));
                newSelectedAnchor.addClass("selected");
                $("#txtTagSearch").val(newSelectedAnchor.text());
                //newSelectedAnchor.focus();
            }
        }
    };

    this.AjaxSearch = function (text) {
        var div = $("#TagSearchResults");
        var anchors = $("#TagSearchResults a");
        var selectedAnchor = $("#TagSearchResults a.selected");
        var position = anchors.index(selectedAnchor);

        if (event.keyCode == "13") {
            FRAMEWORK.TagNavigation(event);
        }
        else if (event.keyCode == "38") {
            FRAMEWORK.TagNavigation(event);
        }
        else if (event.keyCode == "40") {
            FRAMEWORK.TagNavigation(event);
        }
        else if (text.length >= 3) {
            FRAMEWORK.RenderSearchResults(text);
        }
        else {
            $("#TagSearchResults").html("");
            $("#TagSearchResults").hide();
        }
    }; 
```

正如您在 TagNavigation 函数（键码 40）中看到的那样，我尝试将焦点设置在活动元素上，但仍然没有成功。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:37:30.723

您需要检查天气，新选择的元素的 Y 值高于包含 div 的底部。如果是这样，则将 div 滚动新元素的高度。将您的 'if (event.keyCode == "40")' 语句更改为以下内容：

```
this.TagNavigation = function (event) {
        var div = $("#TagSearchResults");
        var anchors = $("#TagSearchResults a");
        var selectedAnchor = $("#TagSearchResults a.selected");
        var position = anchors.index(selectedAnchor);

        if (event.keyCode == "13" && anchors.length > 0) {
            FRAMEWORK.AddUpdateInterventionTags(selectedAnchor.attr("id").split("-")[1] + "|" + selectedAnchor.text(), "add");
        }
        if (event.keyCode == "13" && anchors.length == 0 && $("#txtTagSearch").val() != "Start typing to search Tags") {
            FRAMEWORK.AddNewTag($("#txtTagSearch").val());
        }
        else if (event.keyCode == "38") {

            if (position > 0) {
                canClose = false;
                selectedAnchor.removeClass("selected");
                var newSelectedAnchor = $(anchors.get(position - 1));
                newSelectedAnchor.addClass("selected");
                $("#txtTagSearch").val(newSelectedAnchor.text());
                var newSelectedAnchorPosistion = newSelectedAnchor.offset();
                var divPosition = div.offset();
                divPosition = divPosition.top;
                if (newSelectedAnchorPosistion.top + 1 > divPosition) {
                    var newPos = div.scrollTop() - newSelectedAnchor.outerHeight();
                    div.scrollTop(newPos);
                }
            }
        }
        else if (event.keyCode == "40") {
            if (position < anchors.length - 1) {
                canClose = false;
                selectedAnchor.removeClass("selected");
                var newSelectedAnchor = $(anchors.get(position + 1));
                newSelectedAnchor.addClass("selected");
                $("#txtTagSearch").val(newSelectedAnchor.text());
                var newSelectedAnchorPosistion = newSelectedAnchor.offset();
                var divPosition = div.offset();
                divPosition = divPosition.top + div.outerHeight();
                if (newSelectedAnchorPosistion.top + 1 >= divPosition) {
                    var newPos = div.scrollTop() + newSelectedAnchor.outerHeight();
                    div.scrollTop(newPos);
                }
            }
        }
    }; 
```

# java - java过滤器阻塞文件请求？

> ID：12000901
> 
> 赞同：-3
> 
> 时间：2012-08-17T06:37:58.170
> 
> 标签：java, jsp, tomcat, servlets, servlet-filters

我在 Tomcat 7 中的过滤器实现存在问题。我有欢迎页面`index.jsp`。没有过滤器它工作正常。但是当我向它添加一个小过滤器时，我得到了`404-Not Found`错误。
我有一个过滤器类（在 /WEB-INF/classes/filt/Background.java 中），如下所示：

```
package filt;
import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import java.io.*;
import java.util.*;
import java.net.*;

public class Background implements Filter {

    private FilterConfig filterConfig;

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)
        throws IOException, ServletException {
try
{
FileWriter fstream = new FileWriter("out.txt");
BufferedWriter out = new BufferedWriter(fstream);
out.write("Hello Java");
out.close();
}
catch(Exception e)
{
System.out.println(e);
}
filterChain.doFilter(request, response);
}

public FilterConfig getFilterConfig() {
return filterConfig;
}

public void init(FilterConfig filterConfig) {
this.filterConfig = filterConfig;
}

public void destroy() {}

} 
```

我的 web.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee">
  <application>insights</application>
  <version>1</version>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <filter>
    <filter-name>Backgd</filter-name>
    <filter-class>filt.Background</filter-class>
</filter>
<filter-mapping>
    <filter-name>Backgd</filter-name>
    <url-pattern>/index.jsp</url-pattern>
</filter-mapping>
</web-app> 
```

来自日志的错误：

```
SEVERE: Exception starting filter Backgd
java.lang.ClassNotFoundException: filt.Background 
```

即使现在，如果我删除 web.xml 中的过滤器部分，它也能正常工作。问题出在过滤器上。
是什么导致错误？过滤器实现中的任何错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:50:37.803

您的过滤器代码很奇怪，它只是将 hello world 写入文件并让请求继续它的方式。

在 catalina.out 上搜索，看看您是否有任何消息。还要检查您的过滤器生成的文件是否已写入。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T01:19:12.333

我不确定这如何特别适用于 Tomcat 7，但这甚至无法在 Google App Engine 中编译。原因很简单，您在任何情况下都不能写入输出文件并将其存储到 HDD ......运行时环境不支持的 FileWriter 类，因此 java.lang.ClassNotFoundException。不知道为什么它让你首先编译。原因很简单，您可以从文件中读取，但不能写入文件，否则，您可能拥有一个解释和生成另一种语言的应用程序。

我没有看到您过滤器的任何其他问题，除了...如果您想测试其工作和匹配是否正确，请改用它

```
System.out.println("Hello Java"); 
```

否则，它是您的数据库

# gcc - 在 printf 函数中找不到错误

> ID：12000912
> 
> 赞同：0
> 
> 时间：2012-08-17T06:39:37.523
> 
> 标签：gcc, printf

以下是功能代码

```
void printf(char *ch,void *num,...)
         {
    int i;
    va_list ptr;    //to store variable length argument list
    va_start(ptr,num); // initialise ptr

    for(i=0;ch[i]!='\0';i++)
        {

            if(ch[i]=='%')  // check for % sign in print statement
                { i++;

                    if( ch[i]=='d')
                        {  
                          int *no = (int *)va_arg(ptr,int * );
                          int value=*no;  // just used for nothing 
                          printno(value);  //print int number

                        }
                    if( ch[i]=='u')
                        {

                           unsigned long *no =(unsigned long *) va_arg(ptr,unsigned long *);
                           unsigned long value=*no;
                           printuno(value);  //print unsigned long

                        }
                }
            else    // if not % sign then its regular character so print it
                {
                    printchar(ch[i]);
                }
        }

} 
```

* * *

这是我的 printf() 代码以打印整数值和 uint 值

它对于参数中的字符串部分工作正常，但对于 %d %u 它显示所有变量的相同值。该值为 405067 - 即使变量的值不同。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:44:44.020

为什么将参数解释为指针？我很惊讶你没有崩溃。你应该只是使用

```
int num = va_arg(ptr,int);
printno(num); 
```

和

```
unsigned int num = va_arg(ptr,unsigned int);
printuno(value); 
```

（注意，，`unsigned int`不是`unsigned long`，因为那实际上是`%lu`）

另外，摆脱`num`参数。这是错的。你`va_list`应该被初始化为

```
`va_start(ptr, ch);` 
```

`va_start()`接受可变参数之前的最后一个参数，而不是第一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:31:55.693

如评论中所述，C99 原型`printf()`是：

```
int printf(const char * restrict format, ...); 
```

因此，如果您正在调用您的函数`printf()`，您可能应该遵循它的设计。我将忽略标志、字段宽度、精度和长度修饰符，假设每个转换说明符只是两个字符，例如`%d`or `%%`。

```
int printf(const char * restrict format, ...)
{
    va_list args;
    va_start(args, format);
    char c;
    int len = 0;

    while ((c = *format++) != '\0')
    {
        if (c != '%')
        {
            putchar(c);
            len++;
        }
        else if ((c = *format++) == '%')
        {
            putchar(c);
            len++;
        }
        else if (c == 'd')
        {
            int value = va_arg(args, int);
            len += printno(value);
        }
        else if (c == 'u')
        {
            unsigned value = va_arg(args, unsigned);
            len += printuno(value);
        }
        else
        {
            /* Print unrecognized formats verbatim */
            putchar('%');
            putchar(c);
            len += 2;
        }
    }
    return len;
} 
```

处理全套格式说明符（特别是如果您添加[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fprintf.html) `n$`表示法以及标志、字段宽度、精度和长度修饰符）要困难得多，但这应该会让您朝着正确的方向前进。请注意，我假设`printno()`and`printuno()`函数都报告为转换说明符写入了多少字符。该函数返回写入的字符总数。还要注意，生产代码需要允许被调用的函数失败，因此可能不会使用该`len += printno(value);`表示法，但会将返回值捕获`printno()`到一个单独的变量中，该变量可以在将其添加到总数之前进行错误测试长度输出。

# c++ - 如何在 Gnu C++ (g++) 中使用十进制浮点数？

> ID：12000915
> 
> 赞同：7
> 
> 时间：2012-08-17T06:40:02.313
> 
> 标签：c++, gcc, decimal, powerpc

GCC 4.5 在运行时库 (http://gcc.gnu.org/gcc-4.5/changes.html) 中增加了对十进制浮点的支持。我能够编译代码，包括使用命名空间std::decimal，然后在代码中使用decimal64等等。

不幸的是，我缺少一些用于链接代码的库。我无法找出应该需要哪些库。在 gcc 中启用了 DFP 支持（--enable-decimal-float=dpd）

此外，是否应该有一些在代码中提供十进制文字的快速方法？快速，我的意思是用户定义的文字，由模板处理并在编译时翻译。我不想提供在运行时转换的双打（尽管性能和我真的无法忍受将评估从编译时移动到运行时仍然存在舍入问题......）。我已经找到了后缀“df”，但编译器似乎无法识别。

我在目标 powerpc-ibm-aix7.1.0.0 上使用 gcc 版本 4.7.1。

链接器错误消息：

```
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatsisd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatsidd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatsitd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_mulsd3
ld: 0711-317 ERROR: Undefined symbol: .__dpd_muldd3
ld: 0711-317 ERROR: Undefined symbol: .__dpd_multd3
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatdisd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatunsdisd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatdidd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatunsdidd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatditd
ld: 0711-317 ERROR: Undefined symbol: .__dpd_floatunsditd 
```

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:23:19.693

我最近从源代码编译了 gcc4.7.1，但遇到了缺少符号 __floatunsidf 的问题。结果证明这是 libstdc++.so 所需的符号，并在 libgcc_s.so 中定义。鉴于这两个库都是由 gcc 提供的，它们应该是兼容的。在我的情况下，我仍然有一个链接器包含到我从目标平台提升的旧版本的 libgcc_s。它可能值得做

```
# to find out where libstdc++.so is:
gcc -print-file-name=libstdc++.so

# see if it references the symbol you're missing
readelf -a "path to libstdc++.so" | grep "symbol name" 
```

然后对 libgcc_s 执行相同的操作，以查看它们是否都定义了您缺少的符号。Nb 会将符号标记为未定义 - 这就是链接器如何知道它的要求。

# c# - 如何在 c# Windows8 中实现自定义转义序列相关的换行符？

> ID：12000917
> 
> 赞同：3
> 
> 时间：2012-08-17T06:40:18.087
> 
> 标签：c#, escaping, windows-8

我正在使用只读模式文本框在此应用程序中实现 Windows8 C# 应用程序。

我正在使用一些自定义转义序列识别下一行。

如何在 C# Metro 应用程序中实现自定义转义序列？

问候纳拉辛哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:04:58.327

我不确定这是否能回答您的问题，但以下内容将允许您在文本框中创建换行符：

```
myTextBox.Text += Environment.NewLine; 
```

或者：

```
myTextBox.Text = "This is\nA Multi line\nText Box"; 
```

# java - android中的sqlite3_open错误

> ID：12000919
> 
> 赞同：0
> 
> 时间：2012-08-17T06:40:29.130
> 
> 标签：java, android, sqlite

```
 public class DataBaseHelper extends SQLiteOpenHelper
          {
              private static String DB_NAME;
              private static String DB_PATH = "/data/data/com.muthu.tamil/databases/";
              private final Context myContext;
              private SQLiteDatabase myDataBase;

             static
              {
                  DB_NAME = "aathichudi.db";
              }

  public DataBaseHelper(Context paramContext)
  {
    super(paramContext, DB_NAME, null, 1);
    DB_PATH = "/data/data/" + paramContext.getPackageName() + "/databases/";
    this.myContext = paramContext;
  }

  private boolean checkDataBase()
  {
    return new File(DB_PATH + DB_NAME).exists();
  }

  private void copyDataBase()
    throws IOException
  {
    InputStream localInputStream = this.myContext.getAssets().open(DB_NAME);
    FileOutputStream localFileOutputStream = new FileOutputStream(DB_PATH + DB_NAME);
    byte[] arrayOfByte = new byte[1024];
    while (true)
    {
      int i = localInputStream.read(arrayOfByte);
      if (i <= 0)
      {
        localFileOutputStream.flush();
        localFileOutputStream.close();
        localInputStream.close();
        return;
      }
      localFileOutputStream.write(arrayOfByte, 0, i);
    }
  }

  public void createDataBase()
    throws IOException
  {
    if (checkDataBase())
      new File(DB_PATH + DB_NAME).delete();
    getReadableDatabase();
    close();
    try
    {
      copyDataBase();
      return;
    }
    catch (IOException localIOException)
    {
    }
    throw new Error("Error copying database");
  }

  public Cursor getData(String paramString)
  {
    return this.myDataBase.rawQuery(paramString, null);
  }

  public void onCreate(SQLiteDatabase paramSQLiteDatabase)
  {
  }

  public void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
  }

  public void openDataBase()
    throws SQLException
  {
    this.myDataBase = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null, 1);
  } 
```

我在android中为db连接编写代码，但我得到这样的ERROE：

> sqlite3_open_v2("/data/data/com.muthu,tamil/databases/aathichudi.db", &handle, 1, NULL) 失败 sqlite3_open_v2("/data/data/com.muthu,tamil/databases/aathichudi.db", &handle , 1, NULL) 失败的 sqlite 返回：错误代码 = 14，msg = 无法在源代码行 25467 打开文件 sqlite3_open_v2("/data/data//data/data/com.muthu.tamil/files/databases/aathichudi.db" , &handle, 1, NULL) 失败关闭 VM threadid=1: 线程退出未捕获异常 (group=0x4001d800) 致命异常: main java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.muthu.tamil/com.muthu .tamil.HomeActivity}：android.database.sqlite.SQLiteException：无法在 android.app.ActivityThread 的 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 打开数据库文件。handleLaunchActivity(ActivityThread.java:2679) 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 在 android.os.Handler.dispatchMessage( Handler.java:99) 在 android.os.Looper.loop(Looper.java:123) 在 android.app.ActivityThread.main(ActivityThread.java:4627) 在 java.lang.reflect.Method.invokeNative(Native Method)在 java.lang.reflect.Method.invoke(Method.java:521) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:626) at dalvik.system.NativeStart.main(Native Method) 原因：android.database.sqlite.SQLiteException：无法在 android.database.sqlite.SQLiteDatabase 打开数据库文件。dbopen(Native Method) at android.database.sqlite.SQLiteDatabase.(SQLiteDatabase.java:1812) at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817) at com.muthu.tamil.sql.DataBaseHelper.openDataBase (DataBaseHelper.java:112) 在 com.muthu.tamil.HomeActivity.onCreate(HomeActivity.java:41) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread. java:2627) ... 11 更多Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) ... 11 更多Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) ... 11 更多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:29:56.130

```
sqlite3_open_v2("/data/data/com.muthu,tamil/databases/aathichudi.db", &handle, 1, NULL)
failed sqlite returned: error code = 14, msg = cannot open file at source line 25467 
```

仅当您的数据库未在模拟器或设备中创建时才会产生此错误。您可以检查您的数据库是否在您的 IDE DDMS/file_explorer (/data/data/Ur_pkg_name/databases/ur_db_name) 中创建。

报告了与此问题相关的错误：[http ://code.google.com/p/android/issues/detail?id=949](http://code.google.com/p/android/issues/detail?id=949)

我遇到了人们提出的几种解决方案/解决方法，包括以下内容：

如果您在 Manifest 文件中使用 sharedUserId，则更改应用程序的 sharedUserId 并重新安装该应用程序可能会起作用，因为它没有写入 SQLite 数据库所需的所有权。

编辑清单文件可以再次消除错误。在清单中，确保您输入了正确的 min sdk 版本。您可以通过检查清单文件来确保您的最小 SDK 版本正常，如果代码的左列中有一个感叹号指示您的错误。

我希望这些解决方案之一也对您有用。

# java - java中的序列是什么意思？

> ID：12000925
> 
> 赞同：-3
> 
> 时间：2012-08-17T06:41:03.903
> 
> 标签：java, multithreading

Java线程可以有开始，结束和序列，这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:57:45.157

我认为这意味着一个线程执行一系列动作。老实说，它非常糟糕地表达了这个概念。

换句话说：

*   您创建一个`Thread`，理想情况下将它传递给一个`Runnable`. `Thread`（您可以改为扩展并覆盖它的`run`方法，但这通常是不受欢迎的。）
*   你呼唤`start`它
*   调用的线程`start`继续执行其程序中的下一条语句
*   该`run`方法在单独的线程中执行，独立于启动它的线程。我认为这里的行为是“序列”的意思
*   由于以下情况之一，新线程最终会结束：
    *   其`run`方法正常完成
    *   它的`run`方法以异常完成
    *   如果它是一个*守护*线程，它可以作为 JVM 终止的一部分而终止，因为所有*非守护*线程都退出了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:36:45.177

In Java program, you create threads but they are not executed by Java alone. Java takes the help of the underlying OS to execute them. To allocate microprocessor time and to supervise all the threads' execution, the OS comes with **Thread Scheduler**. The entire responsibility of maintaining the sequence of execution of threads, where which thread should be given first preference than the other, lies with the thread scheduler. The scheduling depends on the algorithm of the scheduler. Many types of **algorithms** exist like **preemptive** and **time slicing** with **round robin** etc. It is a very complex algorithm that executes many times in a given time.
The scheduler maintains a pool of threads. When Java thread is started calling `start()` method, it joins the pool of waiting threads.

**State of Thread**
**1\. New state:** After the creations of Thread instance the thread is in this state but before the start() method invocation. At this point, the thread is considered not alive.

**2\. Runnable (Ready-to-run) state :** A thread start its life from Runnable state. A thread first enters runnable state after the invoking of `start()` method but a thread can return to this state after either running, waiting, sleeping or coming back from blocked state also. On this state a thread is waiting for a turn on the processor.

**3\. Running state :** A thread is in running state that means the thread is currently executing. There are several ways to enter in Runnable state but there is only one way to enter in Running state: the scheduler select a thread from runnable pool.

**4\. Dead state :** A thread can be considered dead when its `run()` method completes. If any thread comes on this state that means it cannot ever run again.
**5\. Blocked :** - A thread can enter in this state because of waiting the resources that are hold by another thread

![enter image description here](../Images/93395a33219eed55a4b84e919dbf4a3b.png)

# cdn - Microsoft ASP.NET Web Optimization Framework 1.0.0 调试模式错误

> ID：12000935
> 
> 赞同：4
> 
> 时间：2012-08-17T06:42:22.347
> 
> 标签：cdn, asp.net-optimization, bundling-and-minification

我有两个问题，一个关于错误，一个关于 cdn

**问题1：（错误）**

我刚刚添加了新的 NuGet 包：Microsoft ASP.NET Web Optimization Framework 1.0.0。我正在使用 ASP.NET MVC 3，除了一个主要错误之外，一切似乎都在工作。

如果我在 web.config 中使用**debug="true"**，则不会输出任何脚本标签。我检查了视图源，根本没有那个包的标签。

如果我设置**debug="false"**然后我得到指向我的缩小文件的脚本标签。

***这是一个错误吗？有其他人经历过吗？***

作为一种解决方法，以便我至少能够调试我的应用程序，无论我是否处于调试模式，我都强制优化 BundleTable.EnableOptimizations = true;

**问题 2：（CDN）**

我还有一个关于 CDN 支持的问题：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery", 
                jqueryCdnPath).Include(
                 "~/Scripts/jquery-{version}.js")); 
```

如果我想添加另一个支持 CDN 的脚本，那么我必须添加另一个包，因此如果 UseCdn="false"，那么它将尝试分别加载 2 个脚本，这意味着 2 个请求。有没有办法让 CDN 支持多个脚本，以便在 UseCdn="false" 时将它们组合成 1 个请求？

像这样的东西：

```
bundles.Add(new ScriptBundle("~/bundles/multiple").Include(
                "~/Scripts/jquery-{version}.js", jqueryCdnPath,
                "~/Scripts/jquery-ui-{version}.js", jqueryUICdnPath,
)); 
```

问候 DotnetShadow

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:35:51.100

您能否详细说明您的 MVC3 应用程序中的哪些问题，即您如何使用 Scripts/Styles.Render 方法？

关于 #2，目前 CDN 支持仅基于每个捆绑包。因此，您将无法进行所需的条件捆绑并使用 cdn（除非您有权访问可以将新内容上传到的 CDN，否则您可以将捆绑包上传到 CDN）

# android - android 活动已泄露窗口 com.android.internal.policy.impl.phonewindow$decorview 问题

> ID：12000940
> 
> 赞同：71
> 
> 时间：2012-08-17T06:42:33.153
> 
> 标签：android, android-layout, memory-leaks, android-alertdialog

我正在使用 Android 应用程序来显示网络错误。

**NetErrorPage.java**

```
package exp.app;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class NetErrorPage extends Activity implements OnClickListener {    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.neterrorlayout);
        Button reload=(Button)findViewById(R.id.btnReload);
        reload.setOnClickListener(this);    
        showInfoMessageDialog("Please check your network connection","Network Alert"); 
    }

    public void onClick(View arg0)             
        {
            if(isNetworkAvailable())
            {                   
                Intent myIntent = new Intent((Activity)NetErrorPage.this, MainActivity.class);   
                myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);              
                ((Activity)NetErrorPage.this).startActivity(myIntent);
                finish();
            }
            else
                showInfoMessageDialog("Please check your network connection","Network Alert");
    }

    public void showInfoMessageDialog(String message,String title)
       {
        AlertDialog alertDialog = new AlertDialog.Builder(NetErrorPage.this).create();
        alertDialog.setTitle("Network Alert");
        alertDialog.setMessage(message);
        alertDialog.setButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int which) 
                    {   
                        dialog.cancel();
                    }
                });            
        alertDialog.show();
    }

 private boolean isNetworkAvailable()
    {
        NetworkInfo ActiveNetwork;
        @SuppressWarnings("unused")
        String IsNetworkConnected;
        @SuppressWarnings("unused")
        String ConnectionType;
        ConnectivityManager connectivitymanager;
        connectivitymanager=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);        
        try
        {           
            ActiveNetwork=connectivitymanager.getActiveNetworkInfo();
            ConnectionType=ActiveNetwork.getTypeName(); 
            IsNetworkConnected=String.valueOf(ActiveNetwork.getState());
            return true;                        
        }
        catch(Exception error)
        {
                return false;
        }
    }    
} 
```

但我收到如下错误，

```
08-17 11:59:08.019: E/WindowManager(16460): Activity exp.app.NetErrorPage has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40534a18 that was originally added here
08-17 11:59:08.019: E/WindowManager(16460): android.view.WindowLeaked: Activity exp.app.NetErrorPage has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40534a18 that was originally added here
08-17 11:59:08.019: E/WindowManager(16460):     at android.view.ViewRoot.<init>(ViewRoot.java:263)
08-17 11:59:08.019: E/WindowManager(16460):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-17 11:59:08.019: E/WindowManager(16460):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-17 11:59:08.019: E/WindowManager(16460):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.Dialog.show(Dialog.java:241)
08-17 11:59:08.019: E/WindowManager(16460):     at sync.directtrac.NetError.showInfoMessageDialog(NetErrorPage.java:114)
08-17 11:59:08.019: E/WindowManager(16460):     at sync.directtrac.NetError.onCreate(NetErrorPage.java:26)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-17 11:59:08.019: E/WindowManager(16460):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 11:59:08.019: E/WindowManager(16460):     at android.os.Looper.loop(Looper.java:130)
08-17 11:59:08.019: E/WindowManager(16460):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-17 11:59:08.019: E/WindowManager(16460):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 11:59:08.019: E/WindowManager(16460):     at java.lang.reflect.Method.invoke(Method.java:507)
08-17 11:59:08.019: E/WindowManager(16460):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-17 11:59:08.019: E/WindowManager(16460):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-17 11:59:08.019: E/WindowManager(16460):     at dalvik.system.NativeStart.main(Native Method) 
```

我已经搜索了更多......但我没有任何正确的想法来清除这个。

我想要的是，在加载此页面时，应添加布局并显示对话框。

请帮我清除此错误

**注意：**我也试过这个

```
@Override
    protected void onResume() {
    super.onResume();
        runOnUiThread(new Runnable() {
            public void run() {
                showInfoMessageDialog("Please check your network connection","Network Alert");
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-17T08:52:48.247

**谢谢你们给我很多建议**。最后我得到了解决方案。那就是我已经两次启动了 NetErrorPage 意图。有一次，我检查了网络连接的可用性并在页面启动事件中启动了意图。第二次，如果页面有错误，那么我已经在 OnReceivedError 事件中启动了意图。所以第一次对话框没有关闭，在此之前第二个对话框被调用。所以我得到了一个错误。

> **错误原因**：我在关闭第一个之前调用了 showInfoMessageDialog 方法两次。

现在我已经删除了第二个电话并清除了错误:-)。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-08-17T06:47:32.463

将此更改`dialog.cancel();`为`dialog.dismiss();`

解决方案是在退出之前调用您在**NetErrorPage.java:114**`dismiss()`中创建的，例如在.`Dialog`**`Activity``onPause()`**

 **视图具有对其父级的引用`Context`（取自构造函数参数）。如果您留下 an`Activity`而不破坏`Dialog`s 和其他动态创建`View`的 s，它们仍然持有对您的引用`Activity`（如果您使用 this 创建为`Context`:like `new ProgressDialog(this)`），因此它无法被 GC 收集，从而导致内存泄漏。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-20T14:53:44.027

在我的情况下`finish()`，在显示对话框后立即执行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-17T06:54:41.297

请尝试这种方式，让我知道：

```
Context mContext;
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.neterrorlayout);

   mContext=NetErrorPage.this;
   Button reload=(Button)findViewById(R.id.btnReload);
   reload.setOnClickListener(this);    
   showInfoMessageDialog("Please check your network connection","Network Alert"); 
}
public void showInfoMessageDialog(String message,String title)
{
   new AlertDialog.Builder(mContext)
   .setTitle("Network Alert");
   .setMessage(message);
   .setButton("OK",new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog,int which) 
       {   
          dialog.cancel();
       }
   })
   .show();
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-17T07:10:43.540

只有在初始化Activity的窗口状态后才需要启动对话框。只有在onresume之后才会发生这种情况。

所以打电话

```
runOnUIthread(new Runnable(){

    showInfoMessageDialog("Please check your network connection","Network Alert");
}); 
```

在您的 OnResume 函数中。不要在 OnCreate
**Edit 中创建对话框：**

用这个

```
Handler h = new Handler();

h.postDelayed(new Runnable(){

        showInfoMessageDialog("Please check your network connection","Network Alert");
    },500); 
```

在你的 Onresume 而不是 showonuithread

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-01T04:36:18.713

```
 @Override
    protected void onPostExecute(final Boolean success) {
        mProgressDialog.dismiss();
        mProgressDialog = null; 
```

将值设置为 null 对我有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-14T15:22:19.063

我收到了这个错误，但它的解决很有趣。首先，我在 api 级别 17 遇到此错误。当我在没有进度对话框的情况下调用线程（AsyncTask 或其他）然后我使用进度对话框再次调用另一个线程方法时，我遇到了崩溃，原因是关于进度对话框的使用.

就我而言，有两个结果；

*   我`show();`在第一个线程开始之前采用了进度对话框`dismiss();`的方法，然后我在最后一个线程结束之前采用了进度对话框的方法。

所以 ：

```
ProgresDialog progressDialog = new ...

//configure progressDialog 

progressDialog.show();

start firstThread {
...
}

...

start lastThread {
...
} 

//be sure to finish threads

progressDialog.dismiss(); 
```

*   这太奇怪了，但至少对我来说，这个错误有一种自我毁灭的能力:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-19T20:57:23.423

我解决这个问题的方法是不在对话中调用意图。**** 相应地使用适用于活动或片段的语法

```
@Override
public void onClick(DialogInterface dialog, int which) {
    checkvariable= true;
    getActivity().finish();
}

@Override
public void onStop() {
    super.onStop();
    if (checkvariable) {
        startActivity(intent); 
    }
} 
```**

# c# - 如何禁用为控件设置属性的可能性？

> ID：12000941
> 
> 赞同：1
> 
> 时间：2012-08-17T06:42:50.463
> 
> 标签：c#, wpf, xaml

在我的应用程序中，我想防止其他程序员为我的用户控件设置属性，这可能会导致一些麻烦。

一个简单的例子是我不想让某人设置`UseLayoutRounding`为真。

```
<Button UseLayoutRounding="True"/> 
```

我想禁用它`Intelisense`显示我`UseLayoutRounding`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:40:03.710

`OnPropertyChanged`当有人试图改变它时，你可以重写方法并抛出异常：

```
protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
{
    if (e.Property == UseLayoutRoundingProperty && (bool)e.NewValue)
    {
        throw new PropertyIsImmutableException("UseLayoutRounding");
    }
    //....
    base.OnPropertyChanged(e);
} 
```

或者您可以使用`new`关键字：

```
public new bool UseLayoutRounding
{
    get { return (bool)GetValue(UseLayoutRoundingProperty); }
} 
```

但是，在没有第一个的情况下使用第二种方法仍然可以像这样改变值：

```
yourSuperControl.SetValue(SuperControlType.UseLayoutRoundingProperty, true); 
```

# iphone - UITableView 复选标记计数

> ID：12000943
> 
> 赞同：0
> 
> 时间：2012-08-17T06:43:04.200
> 
> 标签：iphone, ios, uitableview

我正在使用带有复选标记的 UITableView，并且我想设置一个标签计数，以显示在表格视图中选中了多少项目。例如，如果表包含 18 个项目和 2 个检查，则显示 2/18。谁能帮我写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:49:07.107

假设这意味着将选择这些单元格，您可以尝试以下操作：

```
NSArray *array = [[NSArray alloc] initWithArray:tableView.indexPathsForSelectedRows];
myCount = [array count]; 
```

或者，您可以保留一个整数的运行计数，并在每次选择或取消选择单元格时添加或减去它。

# shell - KSH 中的变量范围

> ID：12000949
> 
> 赞同：11
> 
> 时间：2012-08-17T06:43:34.547
> 
> 标签：shell, unix, scripting, ksh

我编写了一个示例 KornShell 函数来拆分字符串，将其放入数组中，然后打印出值。代码如下

```
#!/usr/bin/ksh

splitString() {

    string="abc@hotmail.com;xyz@gmail.com;uvw@yahoo.com"

    oIFS="$IFS"; 
    IFS=';' 
    set -A str $string
    IFS="$oIFS"
}

splitString
echo "strings count = ${#str[@]}"
echo "first : ${str[0]}";
echo "second: ${str[1]}";
echo "third : ${str[2]}"; 
```

现在`echo`不会打印出数组的值，所以我认为它与定义的数组的范围有关。

我是 Shell 脚本的新手，谁能帮我理解上面示例中的变量范围？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T10:28:55.083

变量的默认范围是整个脚本。

但是，当您在函数内声明变量时，该变量将成为声明它的函数的局部变量。Ksh 具有[动态作用域](http://en.wikipedia.org/wiki/Dynamic_scoping#Dynamic_scoping)，因此该变量也可以在由声明该变量的函数调用的函数中访问。这[在手册中有关功能的部分中进行了](http://www2.research.att.com/sw/download/man/man1/ksh.html#Functions)简要记录。请注意，在 AT&T ksh 中（相对于 pdksh 和衍生产品，以及 bash 和 zsh 的类似功能），这仅适用于使用`function`关键字定义的函数，而不适用于使用传统`f () { … }`语法定义的函数。在 AT&T ksh93 中，使用传统语法定义的函数中声明的所有变量都是全局变量。

声明变量的主要方法是使用`typeset` [builtin](http://www2.research.att.com/sw/download/man/man1/ksh.html#Built-in%20Commands)。它总是使变量成为本地变量（在 AT&T ksh 中，仅在用 声明的函数中`function`）。如果您分配给一个变量而没有用 声明它`typeset`，它是全局的。

ksh 文档没有指定是`set -A`使变量成为局部变量还是全局变量，并且不同的版本也可以。在 ksh 93u、pdksh 或 mksh 下，该变量是全局变量，您的脚本会打印出该值。您似乎拥有 ksh88 或更旧版本的 ksh，其范围是本地的。我认为在函数`str`外部初始化会创建一个全局变量，但我不确定。

请注意，您应该使用局部变量来覆盖`IFS`: 的值，保存到另一个变量不仅笨拙，而且很脆弱，因为`IFS`如果未设置它就无法正确恢复。此外，您应该关闭 globbing，否则如果字符串包含 shell globbing 字符`?*\[`并且其中一个单词恰好匹配系统上的一个或多个文件，它将被扩展，例如`set -A $string`where `string`is`a;*`将导致`str`包含文件名列表当前目录。

```
set -A str
function splitString {
  typeset IFS=';' globbing=1
  case $- in *f*) globbing=;; esac
  set -f
  set -A str $string
  if [ -n "$globbing" ]; then set +f; fi
}
splitString "$string" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T08:33:46.797

变量通常是全局的，从它们被定义的那一刻起，它们就被定义在其中。

该`typeset`命令可以使它们在定义它们的函数中本地化，或者使它们自动导出（即使它们已更新）。

在联机帮助页或 Korn 的书中阅读“排版”和“整数”。

# javascript - 在新页面中打开 url 的 Javascript

> ID：12000952
> 
> 赞同：-2
> 
> 时间：2012-08-17T06:43:52.813
> 
> 标签：javascript, html, forms

我正在尝试做一个在新页面中打开 URL 的 javascript 函数，但我需要从 from 获取相同的数据，例如：我有一个文本字段，我输入了 234543256 之类的数字，当我点击提交时，我需要拥有像这样的网址

> [http://somepage.com/somefile.php?=234543256&someotherthings](http://somepage.com/somefile.php?=234543256&someotherthings)

所以它应该是一些 url + 文本字段数据 + 一些 url

在新页面中打开。任何人都可以帮忙吗？

到目前为止，我已经这样做了：

```
<html>
<head></head>
<body>
        <script type="text/javascript" > 

function tracking() {
var url="http://somepage.com/somefile.php?=";
var nr="022300134609";
var endurl="&someotherthings";

var fullurl=url + nr + endurl;
window.open(fullurl);
}
</script>
<form id="test">
<input type="textfield" id="nr" name"test">
<input type="submit" name="submit" onclick="tracking();">
</form>

</body>
</html> 
```

但我需要从要添加的表单中获取“nr”的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:49:06.513

您可以将**target="_blank"**添加到您的表单标签。并使用**get**作为**方法**。IE：

```
<form method="get" target="_blank" name="myform" action="........">

</form> 
```

我假设在新页面中提交表单意味着新标签..

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:02:58.330

试试这个.....它适合你

```
 <html>
<head></head>
<body>
        <script type="text/javascript" > 

function tracking() {
var url="http://somepage.com/somefile.php?=";
var nr=$("#nr").val();
var endurl="&someotherthings";

var fullurl=url + nr + endurl;
window.open(fullurl);
}
</script>
<form id="test">
<input type="textfield" id="nr" name"test">
<input type="button" name="submit" onclick="tracking();">
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:06:14.640

您可以创建一个 javascript 函数来更改您的表单操作：就像在 Javascript 中一样，它会将您当前的表单操作更改为提交。

```
function ChnageUrl(targetForm)
{
     var url = targetForm.action;
     var someOtherThings = "someOtherThings";

     var textValue = document.getElmentById('textboxId').value;

     if(url.indexOf("?")>0)
     {
           url = url + "="+textValue+"&"+someOtherThings ;
     }
     else
     {
           url = url + "?="+textValue+"&"+someOtherThings ;
     }
     targetForm.action = url;
} 
```

在 Html 中，target="_blank" 会将您的操作网址打开到新选项卡。

```
<from method="get" target="_blank" name="myform" action="url" onsubmit="ChangeUrl(this);">
   <input type="text" id="textboxId" name = "textboxId" />
   <input type="submit" value="submit"/>
</from> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:07:42.003

使用 window.open() 方法。测试.html

```
<!DOCTYPE html>
        <html>
        <head>
            <script type="text/javascript">
            function hello()
            {
                var name = document.getElementById("txtName").value;
                // Set url.
                var url = "file:///C:/Documents%20and%20Settings/Swe%20Mon/Desktop/test2.html"; // your url string
                // Prepare for parameter.
                var params = "userName=" + name;

                window.open(url + "?" + params); 
                return false;
            }
            </script>
        </head>

        <body>
            Name:<input type="text" id="txtName">
            <button onclick="hello()">Try it</button>
        </body>
        </html> 
```

test2.html

```
 <!DOCTYPE html>
    <html>
    <head>
    </head>

    <body>

      Test 2 page
    </body>
    </html> 
```

# webserver - 在服务器的本地机器上部署项目

> ID：12000957
> 
> 赞同：0
> 
> 时间：2012-08-17T06:44:23.917
> 
> 标签：webserver, symfony-1.4, virtualhost

我正在使用 Fedora，并使用虚拟主机在本地机器上部署 Symfony 项目。如何将我的项目在服务器中部署到公共，其他人可以通过他们的机器查看它？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:31:51.073

你有几种方法来部署你的 symfony 项目。我会避免 ftp、svn up on prod 等。所以，这里有 2 种好方法。

**内置部署任务**

Symfony 带有一个[内置的 depoy 任务](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/22#chapter_22_deploying)，它在 symfony 1.4 发布时已经使用过。我认为它现在越来越少使用（因为有更好的工具）。

> 部署网站的最简单方法是使用内置`project:deploy`任务。它使用`SSH`and`rsync`将文件从一台计算机连接和传输到另一台计算机。

**使用 capifony，它使用 Capistrano**

> *[Capistrano](https://github.com/capistrano/capistrano)*是一个开源工具，用于在多个服务器上运行脚本。它的主要用途是轻松部署应用程序。
> 
> *[capifony](http://capifony.org/)*是一个部署配方集合，适用于 symfony 和 Symfony2 应用程序。

这种方式比前一种方式要好得多，因为您可以在部署时自动化许多脚本（例如测试代码、启动新构建的库、升级数据库、共享配置文件）。但最重要的一点（来自我的 POV）是您可以轻松回滚错误的部署。这很容易。

# android - 不在我的应用程序中从 Web 加载图像

> ID：12000958
> 
> 赞同：1
> 
> 时间：2012-08-17T06:44:24.777
> 
> 标签：android, android-imageview, image-loading, android-image

您好，我使用[加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)来加载图像。但是我的图像没有加载。我为此工作并开发了一个演示程序，如下所示。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    new DownloadImageTask((ImageView) findViewById(R.id.my_image))
            .execute("http://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Raw_Conditioner_500835f701532_175x175.jpg");
}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = new ProgressDialog(ImageLoadExampleActivity.this);
        pd.show();
    }

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
        pd.dismiss();

    }
} 
```

这没用。但是，如果我当时更改了图像的 URL，图像就会成功加载。我的问题是这个特定的 url 没有加载到我的 android 应用程序中。请帮我找到这个。我花了一天时间。提前致谢。

-哈迪克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:16:33.420

我使用以下内容从端点获取图像

```
URL url = new URL(imageUrl);
InputStream content = (InputStream)url.getContent();
Drawable image = Drawable.createFromStream(content , "src"); 
```

也许你可以适应这个

* * *

好的，我下载了示例并查看了 URL - 问题似乎是 HTTP => HTTPS 重定向（我提到我必须在示例中更改它们 - 我还注意到当我尝试加载时我的浏览器被迫切换到 https您提供的字符串中的图像）。该示例似乎无法正确处理该问题，但是如果我将 ImageLoader.getBitmap 更改为此，则可以

```
private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;

        HttpURLConnection conn;
        URL imageUrl = new URL(url);
        int rc = -1;
        do {
            conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            rc = conn.getResponseCode();
            imageUrl = conn.getURL();
        } while (rc == -1); // hmmm - perhaps a http => https

        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:46:21.400

```
public String loadImageFromWebOperations(String url, String path) {
    try {
        is = (InputStream) new URL(url).getContent();
        System.out.println(path);
        File f = new File(path);
        f.createNewFile();
        FileOutputStream fos = new FileOutputStream(f);
        try {
            byte[] b = new byte[100];
            int l = 0;
            while ((l = is.read(b)) != -1)
            fos.write(b, 0, l);
        } catch (Exception e) {
            Log.e("Error in creating file", "", e);
        }
        Log.e("created file path is :", "" + f.getAbsolutePath());
        return f.getAbsolutePath();
    } catch (Exception e) {
        System.out.println("Exc=" + e);
        return null;
    }
}

If any issue let me know... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:30:08.777

花了2天后，我终于来这里回答我自己的问题。主要问题是文件名。我更改了文件的文件名和文件位置，我的问题得到了解决。谢谢所有给我想法的人。

**还有一件事我知道我用 https:// 修改了我的 http://**

# javascript - 如何在 iBooks 中调试脚本 ePub3？

> ID：12000962
> 
> 赞同：8
> 
> 时间：2012-08-17T06:44:52.663
> 
> 标签：javascript, debugging, cross-platform, ibooks, epub3

我有一本涉及脚本的 ePub3 书，它适用于 Readium，但仅部分适用于 iBooks。我的猜测是 JavaScript 有时会出错（尽管作为标准的网络应用程序，完全相同的代码在 Safari 中运行良好）。关于如何进行调试的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-01T20:53:34.197

您可以在终端应用程序中使用此行启用 iBooks 中的 Webkit Web Inspector 以更改其设置：

```
defaults write com.apple.iBooksX WebKitDeveloperExtras -bool YES 
```

重新启动 iBooks 后，您会在上下文菜单（更多 > 显示检查器）中找到检查器。所有检查器工具都可用，包括控制台等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:09:17.390

Azardi Online 可用于使用浏览器读取文件。可以从那里使用内置或附加控制台进行调试。或者可以创建一个控制台垫片：

```
if(!console) {
  console = {
    "_log" : [],
    "log" : function() {
      var arr = [];
      for ( var i = 0; i < arguments.length; i++ ) {
        arr.push( arguments[ i ] );
      }
      this._log.push( arr.join( ", ") );
    },
    "trace" : function() {
      var stack;
      try {
        throw new Error();
      } catch( ex ) {
        stack = ex.stack;
      }
      console.log( "console.trace()\n" + stack.split( "\n" ).slice( 2 ).join( "  \n" ) );
    },
    "dir" : function( obj ) {
      console.log( "Content of " + obj );
      for ( var key in obj ) {
        var value = typeof obj[ key ] === "function" ? "function" : obj[ key ];
        console.log( " -\"" + key + "\" -> \"" + value + "\"" );
      }
    },
    "show" : function() {
      alert( this._log.join( "\n" ) );
      this._log = [];
    }
  };

  window.onerror = function( msg, url, line ) {
    console.log("ERROR: \"" + msg + "\" at \"" + "\", line " + line);
  }

  window.addEventListener( "touchstart", function( e ) {
    if( e.touches.length === 3 ) {
      console.show();
    }
  } );
} 
```

**参考**

*   [阿扎尔迪在线](http://azardi.infogridpacific.com/AZARDIOnlineHelp.html)

*   [事件处理程序属性](http://www.w3.org/wiki/HTML/Attributes/_Global#Event-handler_Attributes)

*   [在 Android 和 iOS 上调试 JavaScript](http://eclipsesource.com/blogs/2012/08/14/debugging-javascript-on-android-and-ios/)

# winbugs14 - 如何在 WinBUGS 中编写差分项功能 (DIF) 的语法？

> ID：12000963
> 
> 赞同：1
> 
> 时间：2012-08-17T06:44:52.640
> 
> 标签：winbugs14, winbugs

如何在 WinBUGS 14 的语法中为[差异项功能](http://en.wikipedia.org/wiki/Differential_item_functioning)(DIF) 添加数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:12:28.177

尝试搜索“差分项功能贝叶斯”以找到一些资源。根据我的发现，很明显该模型看起来像：

```
y[i,j,k] ~ Bernoulli(p[i,j,k])
logit(p[i,j,k]) <- .... 
```

即逻辑回归。查看资源：

*   [用于检测 IRT 模型中差异项目功能的非参数贝叶斯诊断](http://www.glicko.net/research/dif.pdf)
*   [一种贝叶斯方法，用于拟合跨组单元运行的随机效应差分项](http://www.news.mot.go.th/mot/exec/TSA/Journal_onweb%5Cvol4%5Cabstractv4_3.pdf)
*   [使用多级逻辑回归模型对差分项目功能 (DIF) 建模：贝叶斯视角](http://digitool.fcla.edu/R/QVB5D1X4LIKYNY7CEFRYTJ7MAFTJT1A56E2VH6D3IQQQI6EDPY-00001?func=dbin-jump-full&object_id=121786&local_base=GEN01&pds_handle=GUEST)

如需更多资源，请在 Google 中输入“差分项功能贝叶斯”。

# c# - 如何在 selenium webdriver c# 中从文件中获取输入

> ID：12000967
> 
> 赞同：1
> 
> 时间：2012-08-17T06:45:06.807
> 
> 标签：c#, selenium, selenium-webdriver

我是 Selenium Webdriver 的新手。我需要自动化测试用例，其中我从文件中为字段提供输入。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:17:13.343

如果您想使用 selenium-webdriver 为应用程序创建自动化测试用例，请管理 xml 配置文件。使用 xml 配置文件，您可以轻松地管理您的测试用例。示例配置：

```
<test browser-name="firefox" domain="...">
    <!-- browser parameters -->
    <url-config>
        <!-- Test case..1 -->
        <!-- Test case..2 -->
        <!-- Test case..n -->
    </url-config>
    <forms>
        <!-- form 1 -->
        <!-- form 2 -->
        <!-- form n -->
    </forms>
</test> 
```

您还可以包含 .xsd 以验证您的驱动程序设置。

希望这能给你一些想法。

# iphone - 如何在 Objective-C 中解析 iframe 标签的 src 属性？

> ID：12000970
> 
> 赞同：2
> 
> 时间：2012-08-17T06:45:22.810
> 
> 标签：iphone, objective-c, cocoa, iframe, nsstring

我有以下字符串：

```
<iframe width="1280" height="720" src="http://www.youtube.com/embed/Pb55ep-DrSo?wmode=opaque&autoplay=1&fs=1&feature=oembed&showinfo=0&autohide=1&controls=0" frameborder="0" allowfullscreen></iframe> 
```

我想提取 src 属性，但不确定如何在 Objective-C 中解析它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:18:23.027

这很丑陋，但它有效：

```
NSString* str = @"<iframe width=\"1280\" height=\"720\" src=\"http://www.youtube.com/embed/Pb55ep-DrSo?wmode=opaque&autoplay=1&fs=1&feature=oembed&showinfo=0&autohide=1&controls=0\" frameborder=\"0\" allowfullscreen></iframe>";
str = [str substringFromIndex:[str rangeOfString:@"src=\""].location+[str rangeOfString:@"src=\""].length];
str = [str substringToIndex:[str rangeOfString:@"\""].location ];
NSLog(@"Str %@",str); 
```

我测试了它，它输出：

```
2012-08-17 09:16:55.285 TEST[24413:c07] Str http://www.youtube.com/embed/Pb55ep-DrSo?wmode=opaque&autoplay=1&fs=1&feature=oembed&showinfo=0&autohide=1&controls=0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:06:09.407

这是获取 src 属性的正则表达式，如果您需要使用一些正则表达式生成器来验证它

```
src[\s]*=[\s]*"([^"]*)" 
```

这是您可以在程序中使用的完整代码，

```
NSString *searchedString = @"<iframe width=\"1280\" height=\"720\" src=\"http://www.youtube.com/embed/Pb55ep-DrSo?wmode=opaque&autoplay=1&fs=1&feature=oembed&showinfo=0&autohide=1&controls=0\" frameborder=\"0\" allowfullscreen></iframe>";
NSError* error = nil;

NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:@"src[\s]*=[\s]*\"([^\"]*)\"" options:0 error:&error];
NSArray* matches = [regex matchesInString:searchedString options:0 range:NSMakeRange(0, [searchedString length])];
for ( NSTextCheckingResult* match in matches )
{
    NSString* matchText = [searchedString substringWithRange:[match range]];
    NSLog(@"match: %@", matchText);
    NSRange group1 = [match rangeAtIndex:1];
    NSLog(@"group1: %@", [searchedString substringWithRange:group1]);
} 
```

希望这可以帮助！

# objective-c - 嵌套块中的内存管理

> ID：12000971
> 
> 赞同：1
> 
> 时间：2012-08-17T06:45:48.397
> 
> 标签：objective-c, memory-management, objective-c-blocks

对块内的局部变量（包括 ivars）的引用会自动保留，以确保它在整个块的执行过程中保持有效。

也就是说，这段代码是否会导致 的过早释放`self.message`，因为第一个块没有引用它，即使第二个块引用它？还是它足够聪明，知道应该保留它？

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    /* snip */
    dispatch_async(dispatch_get_main_queue(), ^{
        if ([self.message.ID isEqualToString:@"foobar"]) {
            /* snip */
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:07:40.320

块捕获其中的所有变量，包括嵌套块。简而言之：它做了“正确”的事情。

在这种特殊情况下，请注意它`self`正在被捕获，而不是`self.message`.

# android - 如何在Android中同时实现平移、旋转、捏合、双击手势？

> ID：12000972
> 
> 赞同：1
> 
> 时间：2012-08-17T06:45:48.893
> 
> 标签：android, image-processing, touch, gesture-recognition

我正在做一个图像处理项目，我需要通过平移拖动图像，通过旋转旋转图像并通过捏合手势使图像越来越小，通过双击禁用所有手势。如何实现这一点，因为我对 android 开发非常陌生。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:32:51.753

检查[这个](http://vivin.net/2011/12/04/implementing-pinch-zoom-and-pandrag-in-an-android-view-on-the-canvas/)

捏缩放教程，在画布上拖放。可以帮助你。

# asp.net-mvc - 具有不同索引数据的不同 Solr 实例？

> ID：12000976
> 
> 赞同：0
> 
> 时间：2012-08-17T06:46:09.433
> 
> 标签：asp.net-mvc, solr, solrnet

我正在开发基于 ASP.NET MVC3 的电子商务网站。我已经实现了 SolrNet 3.6 来改进搜索。

为此，只有一个 solr 实例正在运行，它由 Tomcat Apache 7.0 提供服务。

我的客户要求使用 SolrNet 开发另一个电子商务站点，该站点应该由同一个 Tomcat 服务器提供服务。

那么是否可以调用具有不同数据的多个 solr 实例？如果是，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:38:44.617

为此，您需要将设置更改为具有多个内核。您的 Solr 安装应该在`example/multicore`. 如果找不到，请查看[Solr svn 存储库](http://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_6_1/solr/example/multicore/)。

另请参阅 [Tomcat SOLR 多核设置](https://stackoverflow.com/questions/2714046/tomcat-solr-multiple-cores-setup)

# javascript - 使用 javascript 和本地存储缩放

> ID：12000977
> 
> 赞同：1
> 
> 时间：2012-08-17T06:46:17.530
> 
> 标签：javascript, zooming, local-storage

我正在尝试编写缩放脚本，但实际上我想将用户的所有偏好保存在内存中，我还想使用 localstorage 来保存缩放级别的参数。

这是我写的代码：

```
 <script language=javascript1.2 type=text/javascript><!-- 
var windowToAdjust = ( window.external && window.external.menuArguments ) ? window.external.menuArguments.top : window; 

function focusNorm() { if( window.document.forms[0]['N'+windowToAdjust.screen.width+''] ) { window.document.forms[0]['N'+windowToAdjust.screen.width+''].focus(); } } 

function setZoom(oSelect) { 
if( oSelect.selectedIndex ) { 
if( windowToAdjust.document.body ) { 
if( windowToAdjust.document.body.style ) { 
if( parseInt( oSelect.options[oSelect.selectedIndex].value ) > 100 ) { 
if( !window.confirm( 'All \'drop-down\' select inputs on the page you are adjusting will no longer operate correctly. Resize anyway?' ) ) { oSelect.options[0].selected = true; return; } 
} 
windowToAdjust.document.body.style.zoom = oSelect.options[oSelect.selectedIndex].value + '%'; 
if( window.external && window.external.menuArguments ) { window.close(); } 
} 
} 
} 
} 
//--></script> 
<script language=javascript type=text/javascript><!-- 
// Par DAVID HOUSTIN www.houstin.info // 
var initiale=100; 
function Loupe(plusoumoins) { 
var add=10; 
if (plusoumoins==1) { 
initiale=initiale + add; 
localStorage['zoom'] = initiale + add; 
} 
if (plusoumoins==0) { 
initiale=initiale - add; 
localStorage['zoom'] = initiale + add; 
} 
window.setZoom; 
if( windowToAdjust.document.body ) { 
if( windowToAdjust.document.body.style ) { 
windowToAdjust.document.body.style.zoom = localStorage.getitem['zoom'] + '%'; 
if( window.external && window.external.menuArguments ) { window.close(); } 
} 
} 
} 
//--></script> 
```

对于本地存储，以保存缩放的值，我已经这样做了

```
 initiale=initiale + add; 
    localStorage['zoom'] = initiale + add; 
```

但是当我尝试接收本地存储值时，我已经这样做了：

```
 windowToAdjust.document.body.style.zoom = localStorage.getitem['zoom'] + '%'; 
```

但它对我说`Uncaught TypeError: Cannot read property 'zoom' of undefined`

我正在寻找一个问题，但我不知道如何解决它。

此致。

SP/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:01:29.627

getItem 是一个函数，所以你应该这样称呼它

```
localStorage.getItem('zoom') 
```

注意 () 而不是 [] 以及 getItem 的 camelCase。

# c# - 当我强制从页面下载文件时，它会按 SPACE /C# 拆分文件名？

> ID：12000978
> 
> 赞同：3
> 
> 时间：2012-08-17T06:46:26.243
> 
> 标签：c#, asp.net, http, http-headers, force-download

这是我的强制下载代码：

```
 // URL = Download.aspx?Url=How to use the Application.txt    

        string q = Request.QueryString["Url"].ToString();

        Response.Clear();
        Response.AddHeader("Content-disposition", "Attachment; Filename=" + file);
        Response.ContentType = "Text/Plain";
        Response.WriteFile(Server.MapPath("Directory/" + q));
        Response.End(); 
```

Firefox 中出现的对话框显示：您将打开文件：并且文件名显示为如何（名称应为：如何使用 Application.txt）。如果我尝试为自己编写文件名，我提到的 sama：

```
Response.AddHeader("Content-disposition", "Attachment; Filename=How to use the Application.txt"); 
```

同样的出现。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:49:01.750

Mime 文件名应该用双引号引起来。

```
Response.AddHeader("Content-disposition", 
                   "Attachment; Filename=\"" + file + "\""); 
```

这可以在[RFC 2616(HTTP 1.1)中找到](https://www.rfc-editor.org/rfc/rfc2616)

> 内容处置：附件；文件名="fname.ext"

[在RFC 6266](https://www.rfc-editor.org/rfc/rfc6266)中进行了修订，如果文件名不包含空格等不允许的字符，则也允许不带引号的文件名。

> 内容处置：附件；文件名=example.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:56:25.863

您应该在文件名周围加上双引号。以下是如何做到这一点：

```
 string q = Request.QueryString["Url"].ToString();

    Response.Clear();
    Response.AddHeader("Content-Disposition", "attachment; filename=\""
        + file + "\"");
    Response.ContentType = "text/plain";
    Response.WriteFile(Server.MapPath(d + q));
    Response.End(); 
```

请注意，我还将您的字符串大写/小写更改为现在的“Content-Disposition”、“attachment”、“filename”、“text/plain”。您应该以这种方式使用它们，以免在处理非常严格的浏览器时遇到麻烦。

如果这不能正常工作，请尝试：

```
 Response.AddHeader("Content-Disposition", "Attachment;
        Filename=\"" + HttpUtility.UrlEncode(file) + "\""); 
```

然后文件名中的空格是 URL 编码的。

# php - PHP中的字母数字递增字符串（到一定长度）

> ID：12000979
> 
> 赞同：3
> 
> 时间：2012-08-17T06:46:27.180
> 
> 标签：php

我需要使用字母数字增量器生成一个序列（或获取“下一个 id”的函数）。

字符串的长度必须是可定义的，字符必须是0-9，AZ。

例如，长度为 3：

```
000
001
002
~
009
00A
00B
~
00Z
010
011
etc.. 
```

所以我想这个函数可能会这样使用：

```
$code = '009'
$code = getNextAlphaNumeric($code);
ehco $code; // '00A' 
```

我自己正在研究解决方案，但很好奇是否有人以前解决过这个问题并提出比我自己的更智能/更强大的解决方案。

有没有人有一个很好的解决这个问题的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T06:54:24.823

像 base_convert 这样的东西会起作用吗？也许沿着这些思路（未经测试）

```
function getNextAlphaNumeric($code) {
   $base_ten = base_convert($code,36,10);
   return base_convert($base_ten+1,10,36);
} 
```

这个想法是您的代码实际上都只是一个以 36 为底的数字，因此您将该以 36 为底的数字转换为以 10 为底的数字，将其加 1，然后将其转换回以 36 为底的数字并返回它。

编辑：刚刚意识到代码的字符串长度可能是任意的，但这种方法可能仍然可行——如果你先捕获所有前导零，然后将它们去掉，进行 base 36 -> base 10 转换，添加一，并添加回任何需要的前导零...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:36:18.820

I was interested in the more general solution to this problem - i.e. dealing with arbitrary character sets in arbitrary orders. I found it easiest to first translate to alphabet indexes and back again.

```
function getNextAlphaNumeric($code, $alphabet) {

  // convert to indexes
  $n = strlen($code);
  $trans = array();
  for ($i = 0; $i < $n; $i++) {
     $trans[$i] = array_search($code[$i], $alphabet);
  }

  // add 1 to rightmost pos
  $trans[$n - 1]++;

  // carry from right to left
  $alphasize = count($alphabet);
  for ($i = $n - 1; $i >= 0; $i--) {
     if ($trans[$i] >= $alphasize) {
       $trans[$i] = 0;
       if ($i > 0) {
         $trans[$i -1]++;
       } else {
         // overflow
       }
     }
  }

  // convert back
  $out = str_repeat(' ', $n);
  for ($i = 0; $i < $n; $i++) {
     $out[$i] = $alphabet[$trans[$i]];
  }

  return $out;
}

$alphabet = array();
for ($i = ord('0'); $i <= ord('9'); $i++) {
  $alphabet[] = chr($i);
}
for ($i = ord('A'); $i <= ord('Z'); $i++) {
  $alphabet[] = chr($i);
}

echo getNextAlphaNumeric('009', $alphabet) . "\n";
echo getNextAlphaNumeric('00Z', $alphabet) . "\n";
echo getNextAlphaNumeric('0ZZ', $alphabet) . "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T07:42:28.033

```
<?php
define('ALPHA_ID_LENGTH', 3);

class AlphaNumericIdIncrementor {
 // current id
 protected $_id;

 /**
  * check if id is valid
  *
  * @param  string  $id
  * @return bool
  **/
 protected static function _isValidId($id) {
  if(strlen($id) > ALPHA_ID_LENGTH) {
   return false;
  }

  if(!is_numeric(base_convert($id, 36, 10))) {
   return false;
  }

  return true;
 }

 /**
  * format $id
  * fill with leading zeros and transform to uppercase
  *
  * @param  string  $id
  * @return string
  **/
 protected static function _formatId($id) {
  // fill with leading zeros
  if(strlen($id) < ALPHA_ID_LENGTH) {
   $zeros = '';

   for($i = 0; $i < ALPHA_ID_LENGTH - strlen($id); $i++) {
    $zeros .= '0';
   }

   $id = strtoupper($zeros . $id);
  } else {
   $id = strtoupper($id);
  }

  return $id;
 }

 /**
  * construct
  * set start id or null, if start with zero
  *
  * @param  string  $startId
  * @return void
  * @throws Exception
  **/
 public function __construct($startId = null) {
  if(!is_null($startId)) {
   if(self::_isValidId($startId)) {
    $this->_id = $startId;
   } else {
    throw new Exception('invalid id');
   }
  } else {
   $this->_generateId();
  }
 }

 /**
  * generate start id if start id is empty
  *
  * @return void
  **/
 protected function _generateId() {
  $this->_id = self::_formatId(base_convert(0, 10, 36));
 }

 /**
  * return the current id
  *
  * @return string
  **/
 public function getId() {
  return $this->_id;
 }

 /**
  * get next free id and increment $this->_id
  *
  * @return string
  **/
 public function getNextId() {
  $this->_id = self::_formatId(base_convert(base_convert($this->_id, 36, 10) + 1, 10, 36));

  return $this->_id;
 }
}

$testId = new AlphaNumericIdIncrementor();
echo($testId->getId() . '<br />'); // 000
echo($testId->getNextId() . '<br />'); // 001

$testId2 = new AlphaNumericIdIncrementor('A03');
echo($testId2->getId() . '<br />'); // A03
echo($testId2->getNextId() . '<br />'); // A04

$testId3 = new AlphaNumericIdIncrementor('ABZ');
echo($testId3->getId() . '<br />'); // ABZ
echo($testId3->getNextId() . '<br />'); // AC0
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T07:03:18.440

我会做这样的事情：

```
getNextChar($character) {
    if ($character == '9') {
        return 'A';
    }
    else if ($character == 'Z') {
        return '0';
    }
    else {
        return chr( ord($character) + 1);
    }
}

getNextCode($code) {
    // reverse, make into array
    $codeRevArr = str_split(strrev($code));

    foreach($codeRevArr as &$character) {
        $character = getNextChar($character);
        // keep going down the line if we're moving from 'Z' to '0'
        if ($character != '0') {
            break;
        }
    }

    // array to string, then reverse again
    $newCode = strrev(implode('', $codeRevArr));
    return $newCode;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T10:32:48.363

```
function formatPackageNumber($input)
 { 
  //$input = $_GET['number'];

  $alpha_array = array("A", "B" , "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z");
  $number_array = array("0", "1" , "2", "3", "4", "5", "6", "7", "8", "9");
  $output = "";

  for($i=0; $i<=5; $i++){
     if($i>=4) {
      $divisor = pow(26,$i-3)*pow(10,3);
    } else {
      $divisor = pow(10,$i);
    }
    $pos = floor($input/$divisor);

    if($i>=3) {
      $digit = $pos%26;
      $output .= $alpha_array[$digit];
    } else {
      $digit = $pos%10 ;
      $output .= $number_array[$digit];
    }
  } 
return  strrev($output); 
```

}

# c# - 实体框架 4.1：按多个条件选择？

> ID：12000981
> 
> 赞同：2
> 
> 时间：2012-08-17T06:46:30.680
> 
> 标签：c#, linq, entity-framework-4

我有一个带有 OrderID、OrderName、CreateTime、EndTime 等的 Orders 类……现在，这是一个方法：

```
private TmpContext context = new TmpContext();
public List<Order> GetOrders(string id,string name,DateTime createTime)
{
      var list= context.Orders.AsEnumerable();
      if(!string.isNullOrEmpty(id))
           list = list.Where(l=>l.OrderID.Contains(id));
      if(!string.isNullOrEmpty(name))
           list = list.Where(l=>l.OrderName.Contains(name));
      // other conditions 

      return list.ToList();
} 
```

## 我用Linqpad,GetOrders(2124,"Cloth"，DateTime.Now);发现sql是“select --- from Orders”。这意味着所有订单都是选择的。

这种情况我该怎么办。:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:55:54.697

删除`.AsEnumerable()`呼叫。

`AsEnumerable`将您的 ObjectQuery 强制转换为`IEnumerable<Order>`，这会阻止编译器找到正确的重载（它将使用`Enumerable.Where`而不是`Queryable.Where`，因为`list`它的类型是`IEnumerable<Order>`）。这就是为什么只有查询的第一部分将被发送到服务器（`"select * from Orders"`），其余部分将在内存中执行。

如果您删除对 的调用`AsEnumerable`，您的条件将正确应用于您的 ObjectQuery，从而允许它们在服务器上执行。

# c++ - 从 boost::adjacency_list 获取边属性（包括相关顶点）

> ID：12000987
> 
> 赞同：6
> 
> 时间：2012-08-17T06:46:43.257
> 
> 标签：c++, boost, graph, boost-graph

所以，我今天一定已经阅读了 Boost 文档一个小时。我一定是个盲人。我希望有一个简单的问题：

如何使用 boost::adjacency_list 获得一条边的相应顶点？

我有以下代码，我想弄清楚：

```
typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS> Graph;
typedef boost::graph_traits<Graph>::edge_iterator EdgeIterator;
typedef std::pair<EdgeIterator, EdgeIterator> EdgePair;

EdgePair ep;
for (ep = edges(g); ep.first != ep.second; ++ep.first)
{
    // Get the two vertices that are joined by this edge...
} 
```

有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T06:58:36.547

您可以在[此页面](http://www.boost.org/libs/graph/doc/adjacency_list.html)中找到您需要的功能（在名为“非成员功能”的部分中）。你需要的是`source`和`target`。

```
typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS> Graph;
typedef boost::graph_traits<Graph>::edge_iterator EdgeIterator;
typedef std::pair<EdgeIterator, EdgeIterator> EdgePair;
typedef boost::graph_traits<Graph>::vertex_descriptor VertexDescriptor;

EdgePair ep;
VertexDescriptor u,v;
for (ep = edges(g); ep.first != ep.second; ++ep.first)
{
    // Get the two vertices that are joined by this edge...
    u=source(*ep.first,g);
    v=target(*ep.first,g);
} 
```

# g++ - g++ 可执行文件找不到共享库

> ID：12000990
> 
> 赞同：4
> 
> 时间：2012-08-17T06:46:53.103
> 
> 标签：g++, shared-libraries

我在办公室使用 libevent 2.X。在家里我有提供 libevent 1.4 的 Ubuntu 10.4，所以我下载并编译了最新版本的 libevent。现在我在 /usr/local/include 中有头文件，在 /usr/local/lib 中有库文件。但我的问题是可执行文件似乎没有找到正确的库。

我试过这个

```
vickey@home:~/development/Server/test$ g++ Server.cpp -L /usr/local/lib -levent -I /usr/local/include/

vickey@home:~/development/Server/test$ ./a.out 
./a.out: error while loading shared libraries: libevent-2.0.so.5: cannot open shared object file: No such file or directory 
```

编译的详细输出如下

```
vickey@home:~/development/Server/test$ g++ Server.cpp -L /usr/local/lib -levent -I /usr/local/include/ -v
Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 4.4.3-4ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i486 --with-tune=generic --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
Thread model: posix
gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) 
COLLECT_GCC_OPTIONS='-L' '/usr/local/lib' '-I' '/usr/local/include/' '-v' '-shared-libgcc' '-mtune=generic' '-march=i486'
 /usr/lib/gcc/i486-linux-gnu/4.4.3/cc1plus -quiet -v -I /usr/local/include/ -D_GNU_SOURCE Server.cpp -D_FORTIFY_SOURCE=2 -quiet -dumpbase Server.cpp -mtune=generic -march=i486 -auxbase Server -version -fstack-protector -o /tmp/cceeQ3Uc.s
GNU C++ (Ubuntu 4.4.3-4ubuntu5) version 4.4.3 (i486-linux-gnu)
    compiled by GNU C version 4.4.3, GMP version 4.3.2, MPFR version 2.4.2-p1.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "/usr/local/include/i486-linux-gnu"
ignoring nonexistent directory "/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../i486-linux-gnu/include"
ignoring nonexistent directory "/usr/include/i486-linux-gnu"
ignoring duplicate directory "/usr/local/include/"
  as it is a non-system directory that duplicates a system directory
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.4
 /usr/include/c++/4.4/i486-linux-gnu
 /usr/include/c++/4.4/backward
 /usr/local/include
 /usr/lib/gcc/i486-linux-gnu/4.4.3/include
 /usr/lib/gcc/i486-linux-gnu/4.4.3/include-fixed
 /usr/include
End of search list.
GNU C++ (Ubuntu 4.4.3-4ubuntu5) version 4.4.3 (i486-linux-gnu)
    compiled by GNU C version 4.4.3, GMP version 4.3.2, MPFR version 2.4.2-p1.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 35224f2c24023afb0a5be7befe8d5f3f
COLLECT_GCC_OPTIONS='-L' '/usr/local/lib' '-I' '/usr/local/include/' '-v' '-shared-libgcc' '-mtune=generic' '-march=i486'
 as -V -Qy -o /tmp/cclpymAs.o /tmp/cceeQ3Uc.s
GNU assembler version 2.20.1 (i486-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.20.1-system.20100303
COMPILER_PATH=/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/:/lib/../lib/:/usr/lib/../lib/:/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../:/lib/:/usr/lib/:/usr/lib/i486-linux-gnu/
COLLECT_GCC_OPTIONS='-L' '/usr/local/lib' '-I' '/usr/local/include/' '-v' '-shared-libgcc' '-mtune=generic' '-march=i486'
 /usr/lib/gcc/i486-linux-gnu/4.4.3/collect2 --build-id --eh-frame-hdr -m elf_i386 --hash-style=both -dynamic-linker /lib/ld-linux.so.2 -z relro /usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/crt1.o /usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/crti.o /usr/lib/gcc/i486-linux-gnu/4.4.3/crtbegin.o -L /usr/local/lib -L/usr/lib/gcc/i486-linux-gnu/4.4.3 -L/usr/lib/gcc/i486-linux-gnu/4.4.3 -L/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc/i486-linux-gnu/4.4.3/../../.. -L/usr/lib/i486-linux-gnu /tmp/cclpymAs.o -levent -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/i486-linux-gnu/4.4.3/crtend.o /usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/crtn.o 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T06:49:24.423

在运行时，动态可执行文件由动态链接器再次链接[`ld.so`](http://linux.die.net/man/8/ld.so)。正如您必须在编译时传递`-L/usr/local/lib`给`gcc`链接器以找到您的库一样，您必须告诉 ld.so 您不寻常的搜索路径，无论是通过 ld.so.conf 永久还是通过环境变量 LD_LIBRARY_PATH，例如

```
LD_LIBRARY_PATH=/usr/local/lib ./a.out 
```

TL；手册的 DR：`ldd`将为您概述动态链接器将执行的操作，并且不要忘记`ldconfig`在更改`ld.so.conf`.

# bash - 使用 bash、awk 或 sed 从多个文件中提取多个列

> ID：12000992
> 
> 赞同：1
> 
> 时间：2012-08-17T06:46:55.747
> 
> 标签：bash, sed, awk

我正在尝试从两个不同目录的文本文件中提取 column1 和 column7。这些目录中的文件名相同。我需要将输出保存到另一个目录。

```
file1.txt in D1 directory

column1  column2  column3  column7
david    45.2       14.6   45.0
grecy    12.0       0.0    12.0
anjal    23.2       321.0  34.5

file1.txt in D2 directory

column1  column2  column3  column7
david    45.2       14.6   56.0
grecy    10.0       0.0    12.0
moha     23.1       321.0  334.5

output format (save the output as file1.txt in D3 directory)

column1  column1  column7  column7
david      david    45.0   56.0
grecy      grecy    12.0   12.0
anjal      moha     34.5   334.5 
```

您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:53:34.167

使用`paste`and的快速方法`awk`：

```
paste D1/file1.txt D2/file1.txt | awk '{ printf "%s\t%s\t%s\t%s\n", $1, $5, $4, $8 }' > D3/file1.txt 
```

结果：

```
column1 column1 column7 column7
david   david   45.0    56.0
grecy   grecy   12.0    12.0
anjal   moha    34.5    334.5 
```

编辑：要处理多个文件，您可以使用 bash 循环：

```
for i in D1/*.txt; do paste "$i" D2/${i/D1\//} | awk '{ printf "%s\t%s\t%s\t%s\n", $1, $5, $4, $8 }' > D3/${i/D1\//}; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:50:04.777

```
awk '{
     a1=$1;b1=$4;
     getline <"D2/file1.txt";
     print a1,$1,b1,$4
}' D1/file1.txt >D3/file1.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:54:35.083

```
join -j 1 -o 1.1,2.1,1.7,2.7 <(D1/file1.txt | sort -k1,1) <(sort -k1,1 D2/file1.txt) > D3/file1.txt 
```

# javascript-events - 在选择标签中调用函数onclick选项？

> ID：12000993
> 
> 赞同：0
> 
> 时间：2012-08-17T06:46:59.650
> 
> 标签：javascript-events

我正在制作网页，页面中有选择标签，选择标签中有选项。我想在点击选项时调用一些javascript函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:15:41.247

欢迎来到 stackoverflow，我们很乐意看到您的一些源代码，以便为您提供更好的答案。:)
无论如何，我假设您的选择标签有一个 id `selector`，并且您想调用该方法`doSomeStuff`，以便您可以使用它：

```
document.getElementById("selector").addEventListener("click", doSomeStuff, false ); 
```

要进一步阅读有关添加 EventListeners 的信息，我建议您阅读[MDN 页面](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。

# http - 使用 REST API 获取 UStream 视频的当前观众数量？

> ID：12000994
> 
> 赞同：0
> 
> 时间：2012-08-17T06:47:01.233
> 
> 标签：http, rest

每当您观看 UStream 视频时，屏幕底部都会有一个小计数器，告诉您当前有多少用户正在观看该视频以及总共有多少用户观看了该视频。我想使用 REST API 获取当前的查看者数量，但到目前为止，我只知道如何获取总视图数量，我尝试了一堆不同的查询（UStreams 端缺少文档无济于事）但到目前为止还没有弄清楚这一点。我需要什么属性/查询来获取当前的观众人数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:19:46.273

想通了，感谢[blizztv 项目](http://code.google.com/p/blizztv/)，您必须使用 listAllChannels（它获取创建相关频道的用户拥有的所有频道）命令来获取信息，因为它奇怪地不在 getInfo 命令中。 ...

无论如何，您的请求将如下所示：

```
http://api.ustream.tv/json/channel/(channel #)/listAllChannels?key=yourkey 
```

# objective-c - 滑动 UIView 以部分覆盖另一个 UIView

> ID：12000995
> 
> 赞同：5
> 
> 时间：2012-08-17T06:47:20.693
> 
> 标签：objective-c, ios

自从我一直在寻找如何制作上述动画以来已经有几个小时了。到目前为止，我找到了honcheng的这个[折叠导航，非常酷。](http://www.honcheng.com/2012/02/Playing-with-folding-navigations)但是，我想要的比这简单一点。谷歌地图从右侧被带出的方式，这就是我希望减去翻页效果的方式。不知何故，就像 iPad 的[Pulse](http://imageshack.us/photo/my-images/411/pulsenewshighlighted.png/)新闻一样，这也很棒。

所以，是的，如果有人这样做过，你能否就我如何学习这个提出一些想法。或者也许是我可以查看的开源代码，然后进行逆向工程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:11:02.027

这应该对您有所帮助，但请记住，我对 Pulse 中使用的动画不是很熟悉。

.h 声明一个`UIView`名为 secondView。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    secondView = [[UIView alloc] initWithFrame:CGRectMake(320, 0, 320, 480)];
    [secondView setBackgroundColor:[UIColor redColor]];
    [self.view addSubview:secondView];
}

- (IBAction)myAction:(id)sender
{
    [UIView animateWithDuration:0.45 animations:^{
        if (secondView.transform.tx == 0) {
            [secondView setTransform:CGAffineTransformMakeTranslation(-200, 0)];
        }else{
            [secondView setTransform:CGAffineTransformMakeTranslation(0, 0)];
        }

    }];
} 
```

然后只需将此操作链接到不会被新传入视图阻止的按钮！

# sql - 如何列出 VIEW 中列的源表名 (SQL Server 2005)

> ID：12000999
> 
> 赞同：6
> 
> 时间：2012-08-17T06:47:41.887
> 
> 标签：sql, tsql, sql-server-2005, view

只是想知道如何在一个视图查询中列出列名和表名。

例如：

一个名为`viewC`create by的视图`tbl1 inner join tbl2`，包含`a,b,c,d`列（`a,b`from`tbl1`和`c,d`from `tbl2`）。

如何

```
Select COLUMN_NAME, DATA_TYPE, column_default, character_maximum_length, sourceTableNAME 
FROM information_schema.columns 
where table_name='viewC' 
```

一起？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T07:44:22.737

此信息可从`INFORMATION_SCHEMA`视图中获得：

```
SELECT * 
FROM    INFORMATION_SCHEMA.VIEW_COLUMN_USAGE AS cu
JOIN    INFORMATION_SCHEMA.COLUMNS AS c
ON      c.TABLE_SCHEMA  = cu.TABLE_SCHEMA
AND     c.TABLE_CATALOG = cu.TABLE_CATALOG
AND     c.TABLE_NAME    = cu.TABLE_NAME
AND     c.COLUMN_NAME   = cu.COLUMN_NAME
WHERE   cu.VIEW_NAME    = '<your view name>'
AND     cu.VIEW_SCHEMA  = '<your view schema>' 
```

如果您的视图包含来自多个数据库的表，则查询将变得相当复杂

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:14:28.653

试试这个：

```
SELECT * FROM INFORMATION_SCHEMA.VIEW_COLUMN_USAGE AS VCU
JOIN INFORMATION_SCHEMA.COLUMNS AS COL
ON  COL.TABLE_SCHEMA  = VCU.TABLE_SCHEMA
AND COL.TABLE_CATALOG = VCU.TABLE_CATALOG
AND COL.TABLE_NAME    = VCU.TABLE_NAME
AND COL.COLUMN_NAME   = VCU.COLUMN_NAME
WHERE VCU.VIEW_NAME   = 'ViewName' 
```

# [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!3/95cd3/30)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T08:28:13.633

我有一个从另一个数据库读取的视图（SQL Server 2012），也有一个 UNION。上面的查询对我不起作用，所以我决定使用 Profiler 来检查 SSMS 如何检索信息。这就是我最终的结果：

```
SELECT
     clmns.name AS [Name]
    ,usrt.name AS [DataType]
    ,CAST(CASE WHEN baset.name IN (N'nchar', N'nvarchar') AND clmns.max_length <> -1 THEN clmns.max_length/2 ELSE clmns.max_length END AS int) AS [Length]
    ,CAST(clmns.precision AS int) AS [NumericPrecision]
    ,CAST(clmns.scale AS int) AS [NumericScale]
    ,clmns.column_id AS [ID]
FROM    sys.all_views AS v
INNER JOIN sys.all_columns AS clmns 
    ON clmns.object_id=v.object_id
LEFT OUTER JOIN sys.indexes AS ik 
    ON ik.object_id = clmns.object_id 
    AND 1=ik.is_primary_key
LEFT OUTER JOIN sys.types AS usrt 
    ON usrt.user_type_id = clmns.user_type_id
LEFT OUTER JOIN sys.types AS baset
    ON (baset.user_type_id = clmns.system_type_id AND baset.user_type_id = baset.system_type_id) 
    OR ((baset.system_type_id = clmns.system_type_id) AND (baset.user_type_id = clmns.user_type_id) AND (baset.is_user_defined = 0) AND (baset.is_assembly_type = 1)) 
LEFT OUTER JOIN sys.xml_schema_collections AS xscclmns
    ON xscclmns.xml_collection_id = clmns.xml_collection_id
WHERE v.[type] = 'V'
    AND  v.name ='<your view name>' 
    AND SCHEMA_NAME(v.schema_id)='<your schema name>'
ORDER BY [ID] ASC 
```