# StackOverflow 问答 11766000-11766999

# c# - 从 IGrouping 检索所有值

> ID：11766001
> 
> 赞同：2
> 
> 时间：2012-08-01T19:16:33.377
> 
> 标签：c#, linq, list, fileinfo, igrouping

我目前有：

```
UIEnumerable <IGrouping<PortableKey, FileInfo>> 
```

从这段代码：

```
var queryDupFiles = from file in fileList
    group file by new PortableKey { Name = file.Name, Length = file.Length } 
    into g
    where g.Count() > 1
    select g; 
```

PortableKey 的代码是：

```
 public class PortableKey
    {
        public string Name { get; set; }
        public long Length { get; set; }
    } 
```

基本上过滤和抓取所有重复的文件。我如何得到它，以便我以这种方式拥有所有 FileInfo？

```
List<FileInfo> list 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:18:58.433

您需要使用附加`from`条款：

```
from f in g
select f 
```

这转化为`.GroupBy(...).SelectMany(g => g)`

# f# - F# 从文件读取与下载字符串并按换行符拆分

> ID：11766002
> 
> 赞同：1
> 
> 时间：2012-08-01T19:16:37.840
> 
> 标签：f#, webclient, sequences

我是 F# 新手，正在尝试解决这个[Kata](http://codekata.pragprog.com/2007/01/kata_four_data_.html)

*文件[football.dat](http://pragdave.pragprog.com/data/football.dat)包含 2001/2 赛季英超联赛的结果。标有“F”和“A”的列包含该赛季每支球队的总进球数（因此阿森纳对阵对手打进 79 球，对阵对手打进 36 球）。编写一个程序，打印出“支持”和“反对”目标差异最小的团队的名称。*

保存文件并使用 File.ReadAllLines 读取文件时，我的解决方案有效：

```
open System.IO
open System

let split (s:string) =
    let cells = Array.ofSeq(s.Split([|' '|],StringSplitOptions.RemoveEmptyEntries))    
    (cells.[1], int cells.[6], int cells.[8])

let balance t = 
    let (_,f,a) = t
    -(f-a)

let lines = List.ofSeq(File.ReadAllLines(@"F:\Users\Igor\Downloads\football.dat"));;

lines      
    |> Seq.skip 5       
    |> Seq.filter (fun (s:string) -> s.Split([|' '|],StringSplitOptions.RemoveEmptyEntries).Length = 10)    
    |> Seq.map split    
    |> Seq.sortBy balance    
    |> Seq.take 1
    |> Seq.map (fun (n,_,_) -> printfn "%s" n) 
```

但是当我不阅读文件时，我使用 WebClient 下载它并拆分行，其余代码不起作用。序列长度相同，但 F# Interactive 不显示元素并且不打印输出。代码是

```
open System.Net
open System

let split (s:string) =
    let cells = Array.ofSeq(s.Split([|' '|],StringSplitOptions.RemoveEmptyEntries))    
    (cells.[1], int cells.[6], int cells.[8])

let balance t = 
    let (_,f,a) = t
    -(f-a)

let splitLines (s:string) = 
    List.ofSeq(s.Split([|'\n'|]))

let wc = new WebClient()
    let lines = wc.DownloadString("http://pragdave.pragprog.com/data/football.dat")

lines   
    |> splitLines   
    |> Seq.skip 5       
    |> Seq.filter (fun (s:string) -> s.Split([|'     '|],StringSplitOptions.RemoveEmptyEntries).Length = 10)    
    |> Seq.map split        
    |> Seq.sortBy balance   
    |> Seq.take 1
    |> Seq.map (fun (n,_,_) -> printfn "%s" n) 
```

有什么区别？List.ofSeq(File.ReadAllLines..) 重新调整序列并从互联网下载文件并将其拆分为 \n 返回相同的序列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:30:59.583

最后一行应该使用 Seq.iter 而不是 Seq.map 并且分割每一行的表达式中有太多空格。

通过这些更正，它可以正常工作：

```
open System.Net
open System
open System.IO

let split (s:string) =
    let cells = Array.ofSeq(s.Split([|' '|],StringSplitOptions.RemoveEmptyEntries))    
    (cells.[1], int cells.[6], int cells.[8])

let balance t = 
    let (_,f,a) = t
    -(f-a)

let splitLines (s:string) = 
    List.ofSeq(s.Split([|'\n'|]))

let wc = new WebClient()
let lines = wc.DownloadString("http://pragdave.pragprog.com/data/football.dat") |> splitLines 

let output =
  lines   
    |> Seq.skip 5   
    |> Seq.filter (fun (s:string) -> s.Split([|' '|],StringSplitOptions.RemoveEmptyEntries).Length = 10)    
    |> Seq.map split        
    |> Seq.sortBy balance   
    |> Seq.take 1
    |> Seq.iter (fun (n,_,_) -> Console.Write(n))

let stop = Console.ReadKey() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:09:17.827

该 URL 返回一个 HTML 页面，而不是原始数据文件，这可能是导致您的问题的原因吗？

此外，通常最好验证页面用于换行符的分隔符。那个是用`0x0A`which is `\n`，但有时你会发现`\r\n`还是很少`\r`。

编辑：

此外，您似乎正在使用`map`处理打印，这不是一个好方法。我知道我一般很难让您的样本在一次执行时显示输出。

我建议映射到`n`并以其他方式打印，例如使用`Seq.head`.

# facebook - 如何将FB Like按钮转换为haml

> ID：11766004
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:16:50.770
> 
> 标签：facebook, ruby-on-rails-3, haml

刚开始使用 HAML，我该如何转换？

`<div class="fb-like" data-href="http://localhost:3000" data-send="true" data-width="450" data-show-faces="false"></div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:24:25.233

[文档链接](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#attributes)

回答：

.fb-like{"data-href" => "http://localhost:3000", "data-send" => "true", "data-show-faces" => "false", "data-width " => "450"}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T04:48:28.650

.fb-like{:data => {:href => 'http://localhost:3000', :send => 'true', :show-faces => 'false', :width => '450'} }

# grails - 在 Grails 中创建域类

> ID：11766007
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:17:13.300
> 
> 标签：grails

我是 Grails 的新手，有一个问题：我将环境设置为生产环境并希望创建“新”域变量。我想知道它将存储在数据库或内存中的什么位置？如果在数据库中，我如何将其存储在内存中，反之亦然（在运行时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:03:03.600

看看这里：

[http://grails.1312388.n4.nabble.com/Non-persistent-domain-class-td2336815.html](http://grails.1312388.n4.nabble.com/Non-persistent-domain-class-td2336815.html)

[http://grails.1312388.n4.nabble.com/Best-practice-for-quot-transient-domain-objects-quot-td1389709.html](http://grails.1312388.n4.nabble.com/Best-practice-for-quot-transient-domain-objects-quot-td1389709.html)

[我应该将瞬态域类放在 grails 应用程序中的什么位置？](https://stackoverflow.com/questions/5051720/where-should-i-place-a-transient-domain-class-in-a-grails-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:17:31.433

默认 grails 应用程序将其存储在“内存”中（在开发模式下运行时），它取决于 DataSource.groovy 设置 url = "jdbc:h2: **file** :~/data/.h2Dev"

如果是文件，它将存储在文件中。如果是mem，它将存储在内存中

# java - 阅读以下 xml 的最简单和最好的方法是什么？

> ID：11766011
> 
> 赞同：0
> 
> 时间：2012-08-01T19:17:56.820
> 
> 标签：java, xml

我是 XML 新手。

请让我知道在 java 中阅读下面的 xml 的简单和最佳方法。在我的 xml 中，我将查询作为根元素并将查询作为子元素。

```
<queries>
    <query id="getUserByName">
        select * from users where name=?
    </query>
    <query id="getUserByEmail">
        select * from users where email=?
    </query>
</queries> 
```

我将传递查询 id，基于我们需要获取相应的查询。请帮助我更好地理解代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:00:12.140

使用 XPath，这很简单。

```
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathFactory;
import org.xml.sax.InputSource;

public class Test {

  public static final String xml = 
    "<queries>"
    + "  <query id=\"getUserByName\">"
    + "    select * from users where name=?"
    + "  </query>"
    + "  <query id=\"getUserByEmail\">"
    + "    select * from users where email=?" 
    + "  </query>"
    + "</queries>"; 

  public static void main(String[] args) throws Exception {
    System.out.println(getQuery("getUserByName"));
    System.out.println(getQuery("getUserByEmail"));

  }

  public static String getQuery (String id) throws Exception {
    InputStream is = new ByteArrayInputStream(xml.getBytes("UTF8"));
    InputSource inputSource = new InputSource(is);
    XPath xpath = XPathFactory.newInstance().newXPath();
    return xpath.evaluate("/queries/query[@id='" + id +"']", inputSource);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:19:41.427

一个非常容易实现的代码是 JAXB 解析器。我个人喜欢这个，因为它使用简单的注释来建立一切。

脚步。

1.  使用 xml 的结构创建几个 bean 类。在您的情况下，查询类包含`List<Query>`. 定义 Query 以包含一个字符串变量。如果您花时间浏览注释，我相信您甚至可以使用单个 bean 类但使用多个注释来执行此操作。

2.  将您的 XML 字符串传递给 Queries 类的 JAXB 上下文，您就完成了。

3.  您将为每个 Query 标记获得一个 Java 对象。一旦你获得了 bean 类，操作就变得容易了。

参考：

[JAXB Hello World 示例](http://www.mkyong.com/java/jaxb-hello-world-example/)

[JAXB 教程](http://jaxb.java.net/tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:45:58.277

一个好的解决方案是先将这些查询加载到地图，然后再根据地图访问它。要将查询加载到地图，您可以执行以下操作：

```
Map<String, String> queriesMap = new HashMap<String, String>();
DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();

DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
ByteArrayInputStream inputStream = new ByteArrayInputStream("<queries>    <query id=\"getUserByName\">        select * from users where name=?    </query>    <query id=\"getUserByEmail\">        select * from users where email=?    </query></queries>".getBytes());
// you could use something like: new FileInputStream("queries.xml");

Document doc = documentBuilder.parse(inputStream);

// get queries elements
NodeList queriesNodes = doc.getElementsByTagName("queries");

// iterate over it
for (int i = 0; i < queriesNodes.getLength(); i++) {

    // get queries element
    Node node = queriesNodes.item(i);

    // get query elements (theoretically)
    NodeList queryNodes = node.getChildNodes();
    for (int j = 0; j < queryNodes.getLength(); j++) {
        Node queryNode = queryNodes.item(j);

        // if not element just skip to next one (in case of text nodes for the white spaces)
        if (!(queryNode.getNodeType() == Node.ELEMENT_NODE)) {
            continue;
        }
        // get query
        Node idAttr = queryNode.getAttributes().getNamedItem("id");

        if (idAttr != null) {
            queriesMap.put(idAttr.getTextContent(), StringUtils.trim(queryNode.getTextContent()));
        }
    }
}

System.out.println(queriesMap); 
```

# php - PHP 浏览器条件

> ID：11766012
> 
> 赞同：0
> 
> 时间：2012-08-01T19:17:57.353
> 
> 标签：php, internet-explorer, browser, internet-explorer-9, conditional

我想要做的是专门为 IE9 制作一个 PHP Conditional。到目前为止我尝试过的是这两个 PHP 浏览器条件

```
if(preg_match('/(?i)msie [9]/',$_SERVER['HTTP_USER_AGENT'])) 
{ 
   //my code here 
   exit; 
}

if(strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false) 
{
   //my code here 
} 
```

我写错了吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:25:44.277

```
if(strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 9.') !== false) { 
  //my code here 
   exit; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:36:14.390

您不应出于任何原因过滤浏览器。相反，请使用功能检测来查看浏览器是否能够执行您尝试执行的操作。

除此之外，User-Agent 字符串是不可靠的，可以从字面上设置为任何内容，甚至根本不发送。

# javascript - 循环遍历表以生成 json

> ID：11766014
> 
> 赞同：1
> 
> 时间：2012-08-01T19:18:06.010
> 
> 标签：javascript, jquery, json

如果我遍历我的 html 表中的所有单元格并将每个 rowOBj 添加到 tableOBJ 中的一个新属性，它看起来像下面这样但是......

```
 var tableOBJ = {};
        $("table tr").each(function (index, value) {

            var r = new rowOBJ(
                                    $(this).find('td').eq(0).text(),
                                    $(this).find('td').eq(1).text()
                                    );

            tableOBJ[index] = r;

        });

        var p = JSON.stringify(tableOBJ);

p =
    {
    "0":{"name":"fdgd","surname":"ssdt"},
    "1":{"name":"fdsf","surname":"vn"},
    "2":{"name":"dfsb","surname":"mry"},
    "3":{"name":"hsdsdfry","surname":"smh"}
    } 
```

如何使以前的外观使 json 看起来像这样

```
 {
    {"name":"fdgd","surname":"ssdt"},
    {"name":"fdsf","surname":"vn"},
    {"name":"dfsb","surname":"mry"},
    {"name":"hsdsdfry","surname":"smh"}
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:24:06.333

如果 tableOBJ 是一个数组会有帮助吗？

```
var tableOBJ = []; 
```

然后在你的循环中而不是设置对象的索引推送数组：

```
tableOBJ.push(r); 
```

# regex - Word 2010：排序时忽略或移动无关紧要的单词，如“the”

> ID：11766016
> 
> 赞同：0
> 
> 时间：2012-08-01T19:18:15.850
> 
> 标签：regex, sorting, ms-word

我有一张要排序的表，但我要排序的一些项目以“The”开头。我的第一个想法是进行查找和替换以将“the”移动到该单元格内容的末尾，进行排序，然后将其移回。`The (?)*`我在 Find What 然后尝试了一个基本的`\1, The`在替换为，认为？将匹配任何字符， * 将匹配任意数量的任何字符。我尝试了其他变体但没有成功。该表达式似乎默认为非贪婪，仅匹配以下单词的第一个字母。我可以通过使用单词标记 > 的结尾来强制它匹配更多，果然，然后它开始匹配整个下一个单词。但我想要“The”之后的单元格的其余内容，而不仅仅是一个词。无法创建正则表达式来匹配所有列表项，因为它们的结构并不统一。

那么，有什么方法可以使 Find and Replace 变得贪婪，或者是否有我找不到的 ^ 和 $ （或匹配表格单元格开头和结尾的另一种方法）？或者也许 2010 年的排序机制现在更复杂，可以处理像“the”这样无关紧要的词？

注意：我宁愿远离 VBA——这应该是一个快速的过程。我对这门语言一无所知，现在也不想学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:32:52.770

在正则表达式中，`.`（句点）符号表示“任何字符”，因此请尝试一下。（该`?`符号表示“匹配一或零”。）

此外，您希望`*`括号内的（匹配任何数字）符号，否则括号子句可能只匹配它在“The”之后找到的第一个字符。

所以试试：

```
^The (.*)$ 
```

# ruby - Ruby - divmod 返回正确的值，但我不明白为什么

> ID：11766021
> 
> 赞同：1
> 
> 时间：2012-08-01T19:18:23.213
> 
> 标签：ruby, integer, roman-numerals

我正在处理[此处](http://vimeo.com/channels/katacasts/7253727)定义的编码 kata Roman Numerals 。虽然我已经完成并且没有被卡住，但我确实有一个问题需要帮助回答。

这是我的问题所在：

```
class Fixnum
  NUMERALS = [
    ['V', 5], ['IV', 4], ['I', 1]
  ]
  def to_roman
    roman = ""
    number = self
    for key, value in NUMERALS
      count, number = number.divmod(value)
      roman << (key * count)
    end
    roman
  end
end 
```

当我对数字 5 执行 divmod 时，就像这样

```
5.to_roman 
```

它返回 V。这是有道理的，因为

```
5.divmod(5) => 1, 0 
```

但是上面的代码如何与

```
5.divmod(1) => 5, 0 
```

那么它如何返回 V 而不是 IIIIII，因为它只是将键 (I) 与计数 (5) 相加。不知何故，它显然正确地返回了 V 而不是 IIIIII，但我不确定该逻辑在哪里。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:24:54.800

您的代码永远不会执行`5.divmod(1)`。它第一次执行循环时，`key`是 'V' 并且`value`是 5。然后它执行`5.divmod(5)`，然后，`number == 0`. 因此，在循环的下一次迭代中，当`key`是 'IV' 并且`value`是 4 时，它会执行`0.divmod(4)`，导致`count == 0`字符串中没有添加任何内容。

但是这段代码很奇怪，因为`9.to_roman`返回“VIV”。

# c# - DateTime.ParseExact 给出的 String 未被识别为有效的 DateTime。

> ID：11766022
> 
> 赞同：23
> 
> 时间：2012-08-01T19:18:26.483
> 
> 标签：c#, asp.net, parsing, datetime

我正在尝试将日期字符串解析为`DateTime`变量。我发现这`ParseExact`是这样做的方法，但我尝试这个我得到了错误：

**字符串未被识别为有效的日期时间。**

```
string timeFormat = "dd-MM-yyyy hh:mm:ss";
DateTime startDate = DateTime.ParseExact(reader["startdate"].ToString(), timeFormat, CultureInfo.InvariantCulture);
DateTime nextDate = DateTime.ParseExact(reader["nextdate"].ToString(), timeFormat, null); 
```

我已经尝试过`null`（恰好在另一个页面上工作）和`CultureInfo.InvariantCulture`.

`reader["startdate"].ToString()`输出：01-08-2012 15:39:09

和

`reader["nextdate"].ToString()`输出：01-08-2012 15:39:09

我认为它应该工作，但它没有。

有人知道出了什么问题吗？:)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-01T19:19:46.013

您正在使用`hh`格式字符串。这是一个 12 小时的“一天中的小时”字段。值 15 不在范围内...

相反，您需要`HH`的是 24 小时说明符。

有关详细信息，请参阅[MSDN 自定义日期和时间格式字符串文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:01:14.233

很可能是由于您的服务器语言环境和 UI 语言环境之间的差异

一种更简单的方法是在 web.config 中指定全球化细节

喜欢

```
<configuration>
   <system.web>
      <globalization culture="en-GB"/>
   </system.web>
</configuration> 
```

或者更详细

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB" /> 
```

但请确保这不会与您的应用程序发生冲突

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:10:39.910

我不确定这是否有帮助，但我使用了本文中的确切代码，它对我有用，因为 DateTime.ParseExact(dat, "dd/MM/yyy HH:MM", CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles。无）对我不起作用。

阅读这个我刚刚在网上发布： [http ://rochcass.wordpress.com/2012/08/27/error-string-was-not-recognized-as-a-valid-datetime-solution/#more-350](http://rochcass.wordpress.com/2012/08/27/error-string-was-not-recognized-as-a-valid-datetime-solution/#more-350)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T19:33:06.977

试试这个它有效

```
DateTime.ParseExact("01-08-2012 15:36:25", "dd-MM-yyyy HH:mm:ss", null); 
```

# mysql - 分组和总计

> ID：11766029
> 
> 赞同：0
> 
> 时间：2012-08-01T19:19:07.357
> 
> 标签：mysql, grouping

好的。我有一张桌子，我需要我的结果看起来像这样。

```
Month  Active_Total  SIHO_Total Active_Paid SIHO_Paid
2004-02   317            315       2620.19   1503.56 
```

但是我有一个问题......上述表格已分组。这是一个医疗保健类型的 innoDB 数据库，有几个不同的模式和表。在我尝试隔离 SIHO 成员（这是我真正关心的全部）时，我隔离了不属于 SIHO 的成员并创建了一个仅包含我关心的成员的表。该表如下所示：

```
SCC PHID SID Care_Program Month Total_Paid
B11  abc  01   null      2004-02  120.76
B11  bcd  00   null      2004-02  98.40 
```

SCC 是静态的，PHID 和 SID 一起构成一个唯一键，Care_Program 无关紧要，仅用于我的测试，月份 - 所有内容都需要按月份分组，因此对于所有具有总支付值的记录，它们应该是总结并显示如下：

```
 Month SIHO_Total SIHO_Paid
2004-02   2           219.16 or whatever 
```

我基本上需要第二张桌子看起来像这样。

我如何将这些 PHID 分组以计算该成员在该月的位置？？？

如果您需要更多信息，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:06:53.680

所以我的第一步是聚合这些表。我将问题分解为两部分，以获得我的最终结果表。第一部分是 ActiveMembersPerMonth，它反映了：

```
month    total
2004-02    5 
```

为此，我创建了一个例程来处理分组，这就是我的存储过程的样子：

```
DELIMITER $$

CREATE PROCEDURE `ActiveMembersPerMonth`(sStartMonth VARCHAR(10), sEndMonth VARCHAR(10))
BEGIN
DECLARE dStartMonth DATE DEFAULT DB.ConvertYearMonthDate(sStartMonth,False);
DECLARE dEndMonth DATE DEFAULT DB.ConvertYearMonthDate(sEndMonth,True);
DECLARE curMonthStart DATE;
DECLARE curMonthEnd DATE;
    DECLARE curMonthStr CHAR(7);

TRUNCATE DB.ActiveMembersPerMonth_;

SET curMonthStart = dStartMonth;
WHILE curMonthStart<=dEndMonth DO
    SET curMonthEnd = LAST_DAY(curMonthStart);
SET curMonthStr = date_format(curMonthStart,'%Y-%m');

    INSERT INTO DB.ActiveMembersPerMonth
        SELECT eh.SCC, eh.PHID, eh.SID, eh.CID, eh.CGID, curMonthStr,count(*),sum(IF(m.membership='Employee',1,0)),
        sum(IF(m.membership<>'Employee',1,0)),null 
  from DB.table_SIHO eh
  join DB.Membership m on eh.SCC=m.SCC and eh.PHID=m.PHID
        and eh.SID=m.SID
  WHERE eh.Enroll_Date<=curMonthStart AND (eh.Disenroll_Date>curMonthEnd OR eh.Disenroll_Date IS NULL)
  GROUP BY SCC, CID, CGID, curMonthStr;

    SET curMonthStart = curMonthStart + INTERVAL 1 MONTH;
END WHILE;
END;

call ActiveMembersPerMonth_SIHO('2006-01-01', '2012-05-31') 
```

问题的下一部分是让 total_Paid 和相关的月份与我现在拥有的相匹配......这是：

```
Active_Total     Month
     5           2006-02 
```

现在我有另一个表聚合，其中包含月份和 total_paid 所以我将把这些与从我的存储过程创建的月份和 active_Total 结合起来......

```
CREATE TABLE Rx_Paid_
SELECT CGID, date_format(DOS, '%Y-%m') as Month, SUM(Amt_Paid) as Rx_Paid FROM    DB.Prescriptions
WHERE concat(Policy_HoldeR_ID, Suffix_ID) not in 
('M000560838','M000029518','M00002699','M00002769') and DOS between '2006-01-01'   and '2012-05-31'
group by CGID, Month; 
```

服务也是如此 -

```
CREATE TABLE Services_Paid;
SELECT CGID, date_format(Serv_Beg_Date, '%Y-%m') as Month, SUM(Amt_Paid) as    Services_Paid FROM DB.Services
WHERE concat(PHID, SID) not in    ('M000560838','M000029518','M00002699','M00002769') and Beg_Date between '2006-01- 01' and '2012-05-31'
group by CGID, Month; 
```

基本上我在我的小组中达到了我想要的结果。我在第一个提到的表中有 total_paid。我所要做的就是按月分组和一个标识符（ClientGroupID）（组级标识符）

```
CGID   Month  Active  Service_Paid Rx_Paid
128 2006-01 314    2620.19      0.00
128 2006-02 330    4880.46      0.00
128 2006-03 344    29312.00      0.00
128 2006-04 359    15177.99      0.00
128 2006-05 386    774.58       0.00
128 2006-06 421    5966.52      0.00 
```

# c# - Booksleeve redis客户端上的空字符串是否应该导致超时？

> ID：11766033
> 
> 赞同：1
> 
> 时间：2012-08-01T19:19:15.413
> 
> 标签：c#, redis, booksleeve

所以我有这个单元测试：

```
[TestMethod]
public void TestNullString()
{
    String expectedTestValue = null;
    var uid = Guid.NewGuid().ToString();

    redis.Wait(redis.Strings.Set(db, uid, expectedTestValue));
    var testValue = redis.Wait(redis.Strings.GetString(db, uid));

    Assert.AreEqual(expectedTestValue, testValue);
} 
```

结果是超时。这是应该发生的还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:02:47.393

Redis 没有`null`. 字符串要么*是*（即`"abc"`或`""`- 零长度字符串很好），要么*不是*（即密钥不存在）。

这里的“错误”是 BookSleeve 不检查`null`值`.String.Set`并抛出异常。这将很快得到纠正。

当前发生的情况是代码在将命令写入流时失败 - 特别是，redis二进制协议意味着您在发送数据**之前**声明参数的数量，即（简化）“SET”，“2”， “key”、“value”——因为它从不写入值，服务器甚至没有机会发送“无效”回复；就服务器而言，它仍在等待一个额外的参数。

# c++ - C++、带参数的模板、重新定义的运算符 = 和指针赋值

> ID：11766034
> 
> 赞同：2
> 
> 时间：2012-08-01T19:19:18.323
> 
> 标签：c++, templates, pointers, assignment-operator

有一个类测试：

```
typedef enum
{
    AA, BB
} TType;

template <typename T>
struct TVector
{
    typedef std::vector <T> Type;
};

template < typename T, const TType type >
class Test
{
private:
            typename TVector <T>::Type it; 
}; 
```

及其重新定义运算符 = 的特化（没有附加功能）：

```
template < typename T, const TType type >
class Test <T *, type> 
{
public:
    Test <T *, type > & operator = ( const Test <T*, type > &source ) {return *this;}

            template <TType type2>
    Test <T *, type > & operator = ( const Test <T*, type2 > &source ){return *this;}

            template <TType type2>
    Test <T *, type > * operator = ( const Test <T*, type2 > *source ) {return *this;}
}; 
```

我正在尝试相互分配具有不同 TType 参数的对象，并且此步骤可以正常工作。

```
int _tmain(int argc, _TCHAR* argv[])
{
Test <double *, AA> a1;
Test <double *, BB> b1;

a1=b1;  //Correct

Test <double *, AA> *a2;
Test <double *, BB> *b2;

a2 = b2;  //Error

return 0;
} 
```

但是与指针相同的步骤不起作用，请参阅错误代码：

```
Error   1   error C2440: '=' : cannot convert from 'Test<T,type> *' to 'Test<T,type> *' 49 
```

是否可以相互分配具有不同 TType 参数的指针（如何？）？

**更新的问题：**

那么指针和对象之间的赋值呢？

```
a2 = &b1;  //Error
*a2 = b1;  //Unitialized memory 
```

我可以要求一个代码示例吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:23:05.843

第二个示例不起作用，因为您没有分配*给对象*，而是分配*给指针*。这不起作用的原因相同：

```
int * a;
float * b;

b = a; 
```

即使 a`float`可以从 an 赋值`int`，*指针 to`float`也不能从指向 的指针赋值`int`*。

尝试`*a2 = b2`或`*a2 = *b2`代替 - 您的运营商应该抓住这两个。

另请注意，此实现似乎是错误的：

```
template <TType type2>
Test <T *, type > * operator = ( const Test <T*, type2 > *source )
{
    return *this;
} 
```

`this`隐式变量已经是指针类型，所以你需要，而`return this`不是`return *this`。我建议完全消除赋值运算符的这种重载，因为它肯定会比它有用的更令人困惑。

# ruby - 条件逻辑在haml中不起作用

> ID：11766035
> 
> 赞同：1
> 
> 时间：2012-08-01T19:19:19.240
> 
> 标签：ruby, if-statement, sinatra, haml

我有一个 HAML 模板，如下所示（也使用 Sinatra，不确定这是否重要）：

```
- @email = params[:email]
EMAIL: x#{@email}#{params[:email]}#{@email.to_s.empty?}x

-if #{@email.to_s.empty?}
  %form{ :action => "/", :method => "post"}
    %fieldset
      %input{:type => "text", :name => "email", :class => "text"}           
      %input{:type => "submit", :value => "Notify me!", :class => "button"}
-else
  Thank you for your interest! 
```

我在那里有用于调试的最高输出。当我最初加载页面时，我看到“EMAIL：xtruex”和表单，表明参数为空......一切都按计划工作。

现在，当我在表格中填写“testing@gmail.com”并单击按钮时，它会重定向回“/”，我看到“EMAIL：xtesting@gmail.comtesting@gmail.comfalsex”告诉我我的条件逻辑应该管用。

但是我仍然看到表单，我的 else 语句没有被执行...... if 语句仍在被触发。

我猜这是一个简单的格式问题。有人可以帮忙吗？

以防万一，我的 Sinatra 应用程序文件很简单：

```
get '/' do
  haml :index
end

post '/' do
  User.create(:email => params["email"])
  haml :index
end 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:32:23.510

这个 if 语句将永远为真

```
-if #{@email.to_s.empty?} 
```

那是因为你正在创建一个字符串，`#{}`只有 nil 和 false 会翻转 if。

所以你需要写一些像

```
-if @email.blank? 
```

更新：

这不太对，看看@matt 的评论

# php - SQL 错误：未找到数据源名称且未指定默认驱动程序

> ID：11766036
> 
> 赞同：0
> 
> 时间：2012-08-01T19:19:21.333
> 
> 标签：php, sql-server-2005, odbc

我已经在（64 位）Windows 上安装了带有 php 5.3.5 的 Xampp，我想在（32 位）SQL Server 2005 中使用第 3 方 ODBC 驱动程序连接到数据库，但它总是带来同样的错误“SQL 错误：数据源未找到名称且未指定默认驱动程序”。我创建了一个系统 DSN，并尝试使用 odbc_connect 进行连接。我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T17:34:25.937

我们发现问题通常是`sqlncli.dll`由于某种原因没有正确注册。这可能是因为`dll`文件本身的问题、对注册表的权限等。

以下是我们解决此错误的方法：

```
Open Regedit
Navigate to H_KEY_LOCAL_MACHINE\Software\ODBC\ODBCINST
NOTE: If it is a 64 bit computer and you are working with a 32-bit SQL install, the path will probably actually be H_KEY_LOCAL_MACHINE\Software\WOW6432Node\ODBC\ODBCINST 
```

在 ODBCINST 键中，验证 SQL Native Clent regkey 是否存在。单击它并验证它的所有值是否填充在屏幕右侧。它应该是这样的：

```
(Default)            REG_SZ   (value not set)
APILevel             REG_SZ   2
Connectfunctions     REG_SZ   YYY
CPTimeout            REG_SZ   60
Driver               REG_SZ   c:\windows\system32\slncli.dll 
DriverODBCVer        REG_SZ   09.00
FileUsage            REG_SZ   0
Setup                REG_SZ   c:\Windows\System32\sqlncli.dll
SQLLevel             REG_SZ   1
Usagecount           REG_DWORD 0x00000001 (1) 
```

如果您看到的只是 (Default) 条目，则 slncli.dll 未正确注册，这意味着 SQL Native Client ODBC 驱动程序未正确注册。

**进行如下操作：**

确保您以管理员身份登录。授予当前登录用户对 regkey 的完全控制权限。请注意，您可能必须获得密钥的所有权才能为其设置权限。有很多资源描述了如何获得 regkey 的所有权并为其设置权限，所以我不会在这里详细介绍。

一旦您拥有对密钥的完全控制权限，值可能会简单地显示在屏幕的右侧。这意味着它只是一个权限问题。

如果这些值仍未出现，下一步将验证该文件夹或文件夹中`sqlncli.dll`是否存在该值（对于 64 位系统）。如果它不存在，您将必须从另一台 PC 获取副本，确保您从中检索它的 PC 与丢失文件的 PC 具有相同的操作系统。`Windows\System32``Windows\SysWow64`

如果文件存在，请检查文件的版本。SQL 2005 使用版本 9.00.4035.00。如果没有列出该文件的版本，则它已损坏，您将需要从另一台 PC 中提取副本。

如果文件存在并且列出了版本，请使用 regsvr32 从命令行手动注册它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:05:02.727

Windows 64 位上有 2 个 ODBC 驱动程序管理器。我怀疑你用错了。您需要确定您的 xampp 是 32 位还是 64 位，然后您需要在正确的 ODBC 管理器中定义 DSN。请参阅[64-bit ODBC](http://www.easysoft.com/developer/interfaces/odbc/64-bit.html)，它详细解释了这一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T19:10:46.303

也许您没有明确说明的驱动程序 :) 下载 x32 和 x64。- 这里

```
 https://www.microsoft.com/en-us/download/details.aspx?id=13255 
```

欢迎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-02T19:22:28.487

我只花了半天时间解决这个问题，终于弄明白了——至少就我的情况而言。我知道这个线程有点旧，但它仍然是相关的。

您需要确保 osql.exe 的版本与您使用的本机客户端的版本相匹配。我有 2005 年的 osql.exe 和 2008 R2 的本机客户端。一旦我使用了'08 R2 osql.exe，一切都按预期工作。

# ruby-on-rails - 在不更改 updated_at 字段的情况下更新属性

> ID：11766037
> 
> 赞同：3
> 
> 时间：2012-08-01T19:19:31.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, timestamp

我正在运行rails 3.0。我有一个对象，我想更改一个布尔字段，但不想更改 updated_at 时间戳。我们不会很快升级 rails，所以 update_column 是不可能的。我宁愿不进行模型级别的更改来支持这一点（例如在这篇文章中：http: [//blog.bigbinary.com/2009/01/21/override-automatic-timestamp-in-activerecord-rails.html](http://blog.bigbinary.com/2009/01/21/override-automatic-timestamp-in-activerecord-rails.html)），因为许多这种类型的对象可能同时调用它们的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T19:23:40.830

您可以在更新之前将 record_timestamps 属性设置为 false。

```
User.record_timestamps=false
User.first.update_attributes(:field1 => "Test")
User.record_timestamps=true 
```

更多信息：http: [//blog.bigbinary.com/2009/01/21/override-automatic-timestamp-in-activerecord-rails.html](http://blog.bigbinary.com/2009/01/21/override-automatic-timestamp-in-activerecord-rails.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T19:25:37.280

您可以使用 .update_all：

```
User.where(:id => @user.id).update_all(:your_bool_field => true) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-12T16:59:12.393

Rails 5 允许在不更新时间戳的情况下更新记录。

在 Rails 4.x 中，当我们保存 ActiveRecord 对象时，Rails 会自动更新字段`updated_at`或`updated_on`

中添加触摸选项`ActiveRecord::Base#save`。

在 Rails 5 中，通过`touch: false`作为保存选项传递，我们可以在不更新时间戳的情况下更新对象。的默认选项`touch`是`true`。

```
>> user = User.new(name: 'David', email: 'david@example.com')
>> user.save
   INSERT INTO "users" ("name", "created_at", "updated_at", "email") VALUES (?, ?, ?, ?) 
   [["name", "John"], ["created_at", 2016-05-12 05:10:22 UTC], ["updated_at", 2016-05-12 05:10:22 UTC], ["email", "john@example.com"]]
=> true

>> user.updated_at
=> Thu, 12 May 2016 05:10:22 UTC +00:00
>> user.name = "John"
>> user.save(touch: false)
  UPDATE "users" SET "name" = ? WHERE "users"."id" = ?  [["name", "John"], ["id", 12]]
=> true

>> user.updated_at
=> Thu, 12 May 2016 05:10:22 UTC +00:00 
```

# java - SQLJet 表插入参数

> ID：11766043
> 
> 赞同：0
> 
> 时间：2012-08-01T19:19:46.427
> 
> 标签：java, sql, eclipse, eclipse-jet

我想我在 SQLJet 数据库中插入记录时遇到了一个奇怪的错误。我打开数据库连接并使用以下代码插入测试记录。

```
ISqlJetTable tbl = db.getTable("file");
tbl.insert("filename"); 
```

Eclipse 向我显示了一个带有信息消息的红色图标

> ISqlJetTable 类型中的方法 insert(Object[]) 不适用于参数 (String)。

什么地方出了错？如果我在我的 Mac 上没记错，我不会收到此错误消息。很抱歉，我目前无法访问我的 mac。如何解决这个问题？本[教程](http://sqljet.com/tutorial.html)使用相同的方法。格雷茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:21:17.130

> ISqlJetTable 类型中的方法 insert(Object[]) 不适用于参数 (String)。

您需要传递 String[]/Object[] 而不仅仅是 String。基于插入方法的文档语法是`insert(Object[] arr)`

# jsf - 如何在 JSF 页面中创建选择菜单以更改 div

> ID：11766045
> 
> 赞同：0
> 
> 时间：2012-08-01T19:19:53.697
> 
> 标签：jsf, jsf-2

我想创建简单的选择菜单来更改`<div>`JSF 页面中的图层。我测试了这段代码：

```
<div id="test" style="width:850px; height:800px; position:absolute;  background-color:transparent; top:700px; left:10px">
                    <h:form>
                    <h:panelGroup layout="block">
                        <h:selectOneListbox size="0" id="selectedMenu" value="#{DashboardController.selectedMenu}">
                            <f:selectItem itemLabel="first" itemValue="0" />
                            <f:selectItem itemLabel="second" itemValue="1" />
                            <f:selectItem itemLabel="third" itemValue="2" />

                            <f:ajax event="change" execute="@this" render="loadMenu" />
                        </h:selectOneListbox>
                    </h:panelGroup>

                    <h:panelGroup layout="block" id="loadMenu">
                        <h:panelGroup rendered="#{DashboardController.selectedMenu=='0'}">
                            MENU 0
                        </h:panelGroup>

                        <h:panelGroup rendered="#{DashboardController.selectedMenu=='1'}">
                            MENU 1
                        </h:panelGroup>

                        <h:panelGroup rendered="#{DashboardController.selectedMenu=='2'}">
                            MENU 2
                        </h:panelGroup>
                    </h:panelGroup> 
                    </h:form>    
                </div> 
```

```
private String selectedMenu;

@PostConstruct
public void init() {
    if (selectedMenu==null || selectedMenu.trim().isEmpty()) {
        this.selectedMenu="0";
    }
}

public String getSelectedMenu() { 
    return selectedMenu; 
}

public void setSelectedMenu(String selectedMenu) { 
    this.selectedMenu = selectedMenu;
} 
```

但由于某种原因，它不起作用。你能帮我纠正我的错误吗？

PS 完整的页面源码

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <script type="text/javascript">
            $.noConflict();
        </script>
        <style type="text/css">
            .jqplot-title{
                color:#FFFFFF;
            }
            .jqplot-xaxis-label{
                color:#FFFFFF; 
            }
            .jqplot-yaxis-label{
                color:#FFFFFF;
            }
            .jqplot-xaxis-tick{
                color:#FFFFFF;
            }
            jqplot-yaxis-tick{
                color:#FFFFFF;
            }
        </style>
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> Account Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:100%; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_dashboard.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="datachart" style="margin: 0 auto; width:850px; height:400px; position:relative">
                    <h:form prependId="false">  
                        <p:growl id="growl" showDetail="true" />  

                        <p:barChart id="basic" value="#{DashboardController.categoryModel}"   
                                    title="Accounts and Groups" min="0" max="#{DashboardController.chartMaxSize}" style="height:400px"
                                    shadow="true" barPadding="90" seriesColors="4D94FF, 1975FF, 005CE6, 0047B2" 
                                    yaxisLabel="Size" > 
                            <p:ajax event="itemSelect" listener="#{DashboardController.itemSelect}" update="growl" />
                        </p:barChart>
                    </h:form>
                </div>

                <div id="test" style="width:850px; height:800px; position:absolute;  background-color:transparent; top:700px; left:10px">
                    <h:form>
                    <h:panelGroup layout="block">
                        <h:selectOneListbox size="0" id="selectedMenu" value="#{DashboardController.selectedMenu}">
                            <f:selectItem itemLabel="first" itemValue="0" />
                            <f:selectItem itemLabel="second" itemValue="1" />
                            <f:selectItem itemLabel="third" itemValue="2" />

                            <f:ajax event="change" execute="@this" render="loadMenu" />
                        </h:selectOneListbox>
                    </h:panelGroup>

                    <h:panelGroup layout="block" id="loadMenu">
                        <h:panelGroup rendered="#{DashboardController.selectedMenu=='0'}">
                            MENU 0
                        </h:panelGroup>

                        <h:panelGroup rendered="#{DashboardController.selectedMenu=='1'}">
                            MENU 1
                        </h:panelGroup>

                        <h:panelGroup rendered="#{DashboardController.selectedMenu=='2'}">
                            MENU 2
                        </h:panelGroup>
                    </h:panelGroup> 
                    </h:form>    
                </div>  
            </div>  
        </div>
    </h:body>
</html> 
```

PS 2 我发现了一个问题。我只能更改一次 div。当我尝试更多次时，图层不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T06:50:02.670

我使用以下代码对其进行了测试并且它有效：请创建并清空项目并测试以下代码。

```
<h:head>

</h:head>
<h:body>
    <div id="test" style="width:850px; height:800px; position:absolute;  background-color:transparent; ">

        <h:form>
            <h:panelGroup layout="block">
                <h:selectOneListbox size="0" id="selectedMenu" value="#{dashboardController.selectedMenu}">
                    <f:selectItem itemLabel="first" itemValue="0" />
                    <f:selectItem itemLabel="second" itemValue="1" />
                    <f:selectItem itemLabel="third" itemValue="2" />

                    <f:ajax event="change" execute="@this" render="loadMenu" />
                </h:selectOneListbox>
            </h:panelGroup>

            <h:panelGroup layout="block" id="loadMenu">
                <h:panelGroup rendered="#{dashboardController.selectedMenu=='0'}">
                    MENU 0
                </h:panelGroup>

                <h:panelGroup rendered="#{dashboardController.selectedMenu=='1'}">
                    MENU 1
                </h:panelGroup>

                <h:panelGroup rendered="#{dashboardController.selectedMenu=='2'}">
                    MENU 2
                </h:panelGroup>
            </h:panelGroup> 
        </h:form>    
    </div> 
</h:body> 
```

```
@ManagedBean
@ViewScoped
public class DashboardController implements Serializable{

private String selectedMenu;

@PostConstruct
public void init() {
    if (selectedMenu == null || selectedMenu.trim().isEmpty()) {
        this.selectedMenu = "0";
    }
}

public String getSelectedMenu() {
    return selectedMenu;
}

public void setSelectedMenu(String selectedMenu) {
    this.selectedMenu = selectedMenu;
} 
} 
```

确保输入正确。检查你的萤火虫，看看是否有任何客户端错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T22:26:08.763

您可以尝试通过以下方式呈现整个表单：

```
<f:ajax event="change" execute="@this" render="@form" /> 
```

希望能帮助到你。

# php - 搜索这个json数组的有效方法？

> ID：11766046
> 
> 赞同：0
> 
> 时间：2012-08-01T19:20:08.697
> 
> 标签：php, arrays, json

我的程序员无法`location`从此 json 数组中获取数据（纬度和经度）。`foreach`一个能找到纬度/经度`location:`并回显它们的循环是什么？谢谢

`$jsonArray = json_decode($jsondata, true);`

```
$jsondata =  {
       "results" : [
          {
             "address_components" : [
                {
                   "long_name" : "2340",
                   "short_name" : "2340",
                   "types" : [ "postal_code" ]
                },
                {
                   "long_name" : "New South Wales",
                   "short_name" : "NSW",
                   "types" : [ "administrative_area_level_1", "political" ]
                },
                {
                   "long_name" : "Australia",
                   "short_name" : "AU",
                   "types" : [ "country", "political" ]
                }
             ],
             "formatted_address" : "New South Wales 2340, Australia",
             "geometry" : {
                "bounds" : {
                   "northeast" : {
                      "lat" : -30.79897870,
                      "lng" : 151.394080
                   },
                   "southwest" : {
                      "lat" : -31.661670,
                      "lng" : 150.334880
                   }
                },
                "location" : {
                   "lat" : -31.28146910,
                   "lng" : 151.04713550
                },
                "location_type" : "APPROXIMATE",
                "viewport" : {
                   "northeast" : {
                      "lat" : -30.79897870,
                      "lng" : 151.394080
                   },
                   "southwest" : {
                      "lat" : -31.661670,
                      "lng" : 150.334880
                   }
                }
             },
             "types" : [ "postal_code" ]
          }
       ],
       "status" : "OK"
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:24:27.657

为什么需要循环？您可以通过以下方式直接访问它：

```
echo $jsonArray['results'][0]['geometry']['location']['lat']; 
```

有多个结果，这将是

```
foreach( $jsonArray['results'] as $row) { 
    $lat = $row['geometry']['location']['lat'];
    $long = $row['geometry']['location']['lng'];
    echo $lat . ' ' . $long . "\n";
} 
```

# c# - 延迟执行与延迟**数据源**评估

> ID：11766047
> 
> 赞同：0
> 
> 时间：2012-08-01T19:20:09.807
> 
> 标签：c#, .net, linq-to-objects, deferred-execution

我是延迟执行和所有爵士乐的忠实粉丝，但现在我遇到了稍微不同的问题。

考虑以下第一个简单的进程监视器实现，它简单地显示当前机器上运行的所有进程，按 StartTime 排序：

```
public partial class ProcessesByStartTimeForm : Form {

    // ... init stuff

    public static readonly IEnumerable<object> ProcessQuery
        = from p in Process.GetProcesses()
          let startTime = Eval.TryEvalOrDefault<DateTime?>(() => p.StartTime)
          orderby startTime
          select new {
              Process = p.ProcessName,
              StartTime = startTime, // could be null
              Title = p.MainWindowTitle
          };

    private void ProcessesByStartTimeForm_Load(object sender, EventArgs e) {
        this.RefreshDataSource();
    }

    private void refreshToolStripMenuItem_Click(object sender, EventArgs e) {
        this.RefreshDataSource();
    }

    private void RefreshDataSource() {
        this.gridView.DataSource = ProcessQuery.ToList();
    }
} 
```

（注意：这`Eval.TryEvalOrDefault<T>(Func<T> f)`只是我用来评估可能引发异常并返回的东西的辅助方法`default(T)`）。

现在的问题是，数据源只被评估一次，正是在查询形成时。

是的，我知道，我可以将这个查询定义包装在一个不断重新创建它的方法中，但我认为你可以理解我的意思是获得某种巧妙的技巧来评估数据 -源动态，每次执行查询时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:28:42.817

哈...我认为我们几乎可以应用与 let 子句中相同的技巧...定义一个`Func<IEnumerator<T>>`在运行时也评估 a 的包装器！

```
public partial class ProcessesByStartTimeForm : Form {

    // ... init stuff

    public static readonly IEnumerable<object> ProcessQuery
        = from p in new DeferredEnumerable<Process>(() => Process.GetProcesses())
          let startTime = Eval.TryEvalOrDefault<DateTime?>(() => p.StartTime)
          orderby startTime
          select new {
              Process = p.ProcessName,
              StartTime = startTime, // could be null
              Title = p.MainWindowTitle
          };

    class DeferredEnumerable<T> : IEnumerable<T> {
        readonly Func<IEnumerable<T>> f;

        public DeferredEnumerable(Func<IEnumerable<T>> f) {
            this.f = f;
        }

        public IEnumerator<T> GetEnumerator() {
            return this.f().GetEnumerator();
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() {
            return this.GetEnumerator();
        }
    }
} 
```

# wpf - 用户可调整大小的 WPF 控件？

> ID：11766049
> 
> 赞同：18
> 
> 时间：2012-08-01T19:20:13.843
> 
> 标签：wpf, xaml

在 XAML 中，如何调整控件或显示部分的大小，就像可以抓取和调整 Visual Studio 中不同面板（如工具箱、解决方案资源管理器或错误列表）的方式？

在这个虚构的例子中。. .

```
<Window x:Class="UI_Experiments_1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <DockPanel x:Name="Tab3DockPanel" Background="#FFA0FFA0" LastChildFill="True">
        <ScrollViewer DockPanel.Dock="Left" Background="Lavender">
            <TextBlock Height="60" TextWrapping="Wrap" Background="#FFFFDDDD" Width="140">
                  ScrollViewer - DockPanel.Dock="Left"
            </TextBlock>
        </ScrollViewer> 
        <TextBlock DockPanel.Dock="Top" HorizontalAlignment="Center" 
               TextWrapping="Wrap" Background="LemonChiffon">
               DockPanel.Dock="Top" HorizontalAlignment="Center"
        </TextBlock>
        <ListBox DockPanel.Dock="Right" Background="#FFCCEEFF">
               ListBox DockPanel.Dock="Bottom" 
        </ListBox>
    </DockPanel>
</Window> 
```

. . . 我有一个 DockPanel，其中 ScrollView 停靠在左侧，ListBox 停靠在底部，TextBlock 停靠在顶部。有没有办法将调整大小的句柄附加到这些控件以达到相同的效果，或者是否有其他控件可以嵌入这些控件？正如我所说，上面只是一个虚构的实验示例——我不在乎我是否使用那些精确的控件。

我确实在 MSDN 上找到了一个使用 Adorner 添加调整大小句柄的示例，但它涉及超过 170 行 C# 代码，因此在采用之前，我想确定在 XAML 中没有内在的方法来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T19:30:52.787

您可能会使用[GridSplitter](https://msdn.microsoft.com/en-us/library/system.windows.controls.gridsplitter.aspx) 您需要做的是使用 Grid 进行布局，然后使用 GridSplitter 调整列或行的大小。

以下是有关[如何：使用 GridSplitter 创建用户可调整大小的应用程序的示例](https://docs.microsoft.com/en-us/previous-versions/windows/silverlight/dotnet-windows-silverlight/ff382751(v=vs.95))

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-01T20:08:24.970

不是您要求的确切控件，而是一个示例。需要一个分离器，两边都有什么 * 和包含的控制伸展。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="auto" />
        <ColumnDefinition Width="*" />     
    </Grid.ColumnDefinitions>
    <TextBox Grid.Row="0" Grid.Column="0" 
             HorizontalAlignment="Stretch" 
             VerticalAlignment="Stretch" 
             Text="TexBox" />      
    <GridSplitter Grid.Row="0" Grid.Column="1" Margin="2,0,2,0"
                  Width="3" Background="Purple" 
                  VerticalAlignment="Stretch" 
                  HorizontalAlignment="Center" />
    <ListView Grid.Row="0" Grid.Column="2" Background="Aqua" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch"/>
</Grid> 
```

# php - iCal/ics 提要出错

> ID：11766050
> 
> 赞同：0
> 
> 时间：2012-08-01T19:20:15.513
> 
> 标签：php, calendar, icalendar

我正在尝试从我的网站创建事件提要，但在尝试导入时 iCal 中出现错误。我希望它成为订阅用户的订阅源，以便将事件自动添加到 iCal 或 Outlook。

我正在发送这些标头：

```
Content-Type: text/Calendar
Content-Disposition: inline; filename=ical.ics 
```

这是正在生成的文件的内容。现在它只有一个事件，但最终它将有多个 BEGIN:VEVENT。

```
TZ: America/New_York
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
X-WR-CALNAME:Calendar Feed
PRODID:-//Herkimer//iCal 5.0//EN
CALSCALE:GREGORIAN
BEGIN:VEVENT
CLASS:PUBLIC
CREATED:20120801T141628Z
DESCRIPTION:
DTEND:20120926T220000Z
DTSTAMP:20120926T220000Z
DTSTART:20120926T220000Z
LAST-MODIFIED:20120801T141628Z
LOCATION:Building
PRIORITY:5
SEQUENCE:0
SUMMARY;LANGUAGE=en-us:Test Event
TRANSP:OPAQUE
UID:5577
X-MICROSOFT-CDO-BUSYSTATUS:BUSY
X-MICROSOFT-CDO-IMPORTANCE:1
X-MICROSOFT-DISALLOW-COUNTER:FALSE
X-MS-OLK-ALLOWEXTERNCHECK:TRUE
X-MS-OLK-AUTOFILLLOCATION:FALSE
X-MS-OLK-CONFTYPE:0
END:VEVENT
END:VCALENDAR 
```

你知道为什么会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:36:07.440

第一行无效，

> TZ：美国/New_York

您还可以进一步验证：[this online ical validator](http://icalvalid.cloudapp.net)

# php - php追加/写入文件

> ID：11766053
> 
> 赞同：0
> 
> 时间：2012-08-01T19:20:23.790
> 
> 标签：php, append, fwrite

我正在使用以下脚本写入文件 include.php 此脚本在 files 和 images 文件夹中搜索文件并写入 include.php files 目录包含文件

```
*sintel_trailer1.mp4
*sintel_trailer2.mp4 
```

图像目录包含以下文件

```
*sintel_trailer1.jpg
*sintel_trailer2.jpg 
```

php代码

```
$path = array("./files/","./images/");
$path2=      array("http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/files/","http://".$_SERVER['S ERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/images/");
$start="";
$Fnm = "./include.php";
$inF = fopen($Fnm,"w");
fwrite($inF,$start."\n");

$folder = opendir($path[0]);
while( $file = readdir($folder) ) {
       if (($file != '.')&&($file != '..')&&($file != 'index.htm')) {
            $folder2 = opendir($path[1]);
            $imagename ='';
            while( $file2 = readdir($folder2) ) {
                if (strstr($file2, '.', true) == strstr($file, '.', true)){
                    $imagename = $file2;
                }
            }
            closedir($folder2);
        $result="{\nlevels: [\n{ file: \"$path2[$key]$file\" }\n],\nimage: \"$imagename\"\ntitle: \"$file\"\n},\n";
        fwrite($inF,$result);
       }
}
fwrite($inF,"");
closedir($folder);

fclose($inF); 
```

我得到以下结果

```
{
levels: [
{ file: "sintel_trailer1.mp4" }
],
image: "sintel_trailer2.jpg"
title: "sintel_trailer1.mp4"
},
{
levels: [
{ file: "sintel_trailer2.mp4" }
],
image: "sintel_trailer2.jpg"
title: "sintel_trailer2.mp4"
}, 
```

但我需要这个结果

```
{
levels: [
{ file: "sintel_trailer1.mp4" }
],
image: "sintel_trailer1.jpg"
title: "sintel_trailer1.mp4"
},
{
levels: [
{ file: "sintel_trailer2.mp4" }
],
image: "sintel_trailer2.jpg"
title: "sintel_trailer2.mp4"
}, 
```

**更新**

错误日志显示警告：第 15 行 index.php 中 strstr() 的参数计数错误

**第 15 行** if (strstr($file2, '.', true) == strstr($file, '.', true)){

# mysql - MySQL - 将字符串添加到文本列

> ID：11766055
> 
> 赞同：0
> 
> 时间：2012-08-01T19:20:25.833
> 
> 标签：mysql, sql

我正在尝试将文本字符串添加到某些列。这是我尝试过的一个查询，虽然失败得很惨，但它解释了我想要做什么。

```
SET @NAME = (Select name from item_template where itemset = 801);
SET @NEWNAME = ('|cFFFF0000'+@NAME);
Update item_template set name = @NEWNAME where itemset = 801; 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:26:32.617

为什么不只是

```
update item_template set name = concat('|cFFFF0000',name) where itemset = 801; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:22:05.703

```
SET @NEWNAME = ('|cFFFF0000'+@NAME); 
```

使用连接

```
SET @NEWNAME := CONCAT('|cFFFF0000',@NAME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:25:17.143

尝试

```
Update item_template
set name = (select * from (select concat('|cFFFF0000', name) 
                           from item_template
                           where itemset = 801) x
           ) 
where itemset = 801; 
```

甚至更短

```
Update item_template
set name = concat('|cFFFF0000', name) 
where itemset = 801; 
```

# ms-access - DoCmd.OpenQuery ("myQueryName") 不是在代码中执行而是手动工作

> ID：11766057
> 
> 赞同：1
> 
> 时间：2012-08-01T19:20:27.807
> 
> 标签：ms-access, vba, ms-access-2007

我继承了一个我试图解开的 Access 数据库，这样我就可以让它完成它的预期目的。我似乎遇到了一个相对简单的障碍，但我以前从未见过这个问题，所以它让我抛出一个循环。

有几种说法是徒劳的：

```
DoCmd.OpenQuery ("myQueryName") 
```

当我在代码中单步执行这些代码时，代码会执行，但不会执行查询操作（APPEND、UPDATE 等）。当我手动运行它们时，它们会执行必要的操作。

任何人都可以提供一些见解，因为这似乎真的是导致数据库无法准确完成其预期目的的障碍？

还有两点可能有用的信息。构建是 Access 2003，但我在 Access 2010 中作为 2003 数据库文件运行。此外，原作者在查询中放置了注释以不手动运行它们。我认为这是为了帮助提醒用户不要搞砸事情（尽管阻止手动运行查询是一项糟糕的工作！！！），但我认为这可能有助于触发解决方案。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:43:25.193

你知道吗，我在发布这个问题后找到了答案。这就是我一直以来的想法。`DoCmd.OpenQuery`通常不会打开查询，但不会执行它。对于操作查询，您需要`db.Execute "myQueryName"`一个带有`DoCmd.RunSQL`.

# python - 在 sqlalchemy 中检查 sqlite 连接错误

> ID：11766059
> 
> 赞同：4
> 
> 时间：2012-08-01T19:20:44.577
> 
> 标签：python, sqlite, sqlalchemy

我正在使用 sqlalchemy 连接到本地 sqlite 数据库。

这是我正在使用的代码 -

```
db = sqlalchemy.create_engine('sqlite:///Latencydb.db')
metadata = sqlalchemy.MetaData(db) 
```

即使文件不存在，也不会引发异常。甚至`db.connect()`不抛出任何异常。

有没有办法检查数据库连接是否成功？（除了检查数据库中是否存在特定表？）

我在 Python 2.7.2 (Ubuntu) 上使用 sqlite 3.7.7 和 sqlalchemy 0.6.8

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T19:48:37.697

在 Python 版本 < 3.4（包括 Python 2.7）上，当您连接到尚不存在的 SQLite 数据库文件时，您无法阻止 SQLite 为您创建文件。

因此，在较旧的 Python 版本上，您必须首先使用不同的方法来测试文件是否存在。一个简单的[`os.path.exists`](http://docs.python.org/library/os.path.html#os.path.exists)就足够了：

```
import os.path

database = '/path/to/database.db'
if not os.path.exists(database):
    raise ValueError('Invalid database path: %s' % (database,)
db = sqlalchemy.create_engine('sqlite:///' + database) 
```

在较新的 Python 版本上，该`sqlite3`库支持[SQLite URI 语法](https://www.sqlite.org/uri.html)，因此您可以指定一个`mode=rw`参数来禁用默认`rwc`（读写创建）模式，前提是您`uri=True`在`sqlite3.connect()`调用时进行了设置。

SQLAlchemy 不支持 SQLite URI 参数（目前），但您可以使用该[`creator`参数](https://docs.sqlalchemy.org/en/latest/core/engines.html#sqlalchemy.create_engine.params.creator)传入 URI 标志和您自己的连接字符串：

```
import sqlite3

uri = 'file:/path/to/database.db?mode=rw'

creator = lambda: sqlite3.connect(uri, uri=True)

db = sqlalchemy.create_engine('sqlite:////', creator=creator) 
```

# c# - F# 编码风格 - 静态与实例方法

> ID：11766061
> 
> 赞同：7
> 
> 时间：2012-08-01T19:20:49.187
> 
> 标签：c#, coding-style, f#

我注意到静态方法在 F# 中似乎比 C# 更受欢迎。在 C# 中，您总是通过调用实例方法将元素添加到集合中：

```
mySet.Add(elem); 
```

但在 F# 中通常有一个等效的静态方法：

```
mySet.Add(elem)
// OR
Set.Add elem mySet 
```

我经常在样本中看到后一种形式。在我看来，两者在语义和功能上都完全相同，但来自 C# 背景，使用实例方法感觉更自然。F# 中哪种风格更好，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T19:59:46.837

除了该答案中提到的与类型推断相关的原因之外，在功能样式中，将函数作为参数发送更自然。如果它是实例方法，则必须编写如下内容：

```
myHigherOrderFunction (fun (x:MyType) -> x.myFunctionAsMethod) 
```

但如果它被定义为静态方法，您可以编写：

```
myHigherOrderFunction MyType.myFunctionAsMethod 
```

它更优雅，更易于编写（也易于阅读），并且与发送常规 let 绑定函数时的语法几乎相同。

实例方法需要类型的实例才能访问函数（方法），在 OOP 中这不是问题，因为您认为在向对象发送消息时，但在 FP 中，函数本身（没有实例）是一等公民。

要访问静态方法，您需要指定 Class，您可以将 Class 视为一种具有函数的容器（如模块或命名空间）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T20:55:34.337

大多数标准 F# 类型都是不可变的。在使用不可变对象时，静态方法可以更好地描述正在发生的事情，例如：

```
mySet.Add(elem); 
```

当F# 集返回一个新`mySet`的. 幸运的是，F# 无法编译以确保您不会犯此错误，它仍然会导致代码混乱。相比之下：`elem``mySet`

```
mySet |> Set.Add elm 
```

形式独特，看起来会返回一些新的东西，而不会与原来的距离太远。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T23:57:50.043

虽然 F# 中的静态方法很常见，但我发现实例方法对于组件开发很有意义。

原因？F# 模块系统缺少函子。在其他类型的 ML（例如 SML 或 OCaml）中，您将组件开发为简单的模块。如果您稍后决定参数化模块，则可以将其提升为仿函数，而无需重写太多源代码。在 F# 中你不能。

要在 F# 中创建参数化“模块”，您必须借助类并将方法转换为实例方法，并在实例构造期间传入参数。不幸的是，从一个模块到一个类涉及相当多的机械但烦人的源代码更改。因此，核心组件程序员可能会选择默认使用类和实例方法，就像在 C# 中一样。这让人想起有时在 SML 中使用的“仅函子”风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T19:43:19.443

在 f# 中，作为函数式语言，它更原生地分离不可变的变量和作为操作的函数。这个函数类似于 c# 中的静态方法，但是函数比 c# 方法有一个优点。是部分应用。您可以将一些（不是全部）参数传递给函数，这个带有部分参数的函数将是需要其他参数的新函数。

# java - JAR 文件的 Proguard 混淆

> ID：11766063
> 
> 赞同：4
> 
> 时间：2012-08-01T19:20:54.173
> 
> 标签：java, obfuscation, proguard

我知道如何混淆可执行 jar 文件，因为它有一个主类。但我正在尝试创建我的 API（它已经完成），我只需要混淆代码。问题是，每当我尝试使用 Proguard（一个众所周知的 java 混淆器）混淆 jar 文件时，它都会给我一个与“keep”有关的错误。我正在从 Proguard 运行 proguard-gui，在 Eclipse 中，我将项目导出为普通的 jar 文件（不可执行），并且试图混淆该 jar 文件。另外，我的 jar 文件中也不包含 .classpath 和 .project 文件。如果有人可以帮助/指导我在 Proguard 中混淆不可执行的 jar 文件，那将非常有用和感激。谢谢你。

注意：我使用 Proguard 的 GUI 进行混淆处理，与命令行无关。

问题图片： ![在此处输入图像描述](../Images/f99edbef7738ad5ce940f4a9d5ee008f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:02:21.877

Cfr ProGuard 手册 > 示例 >[一个典型的库](http://proguard.sourceforge.net/manual/examples.html#library)

GUI 有一个用于处理库的复选框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T20:01:24.300

在 Proguard 的配置文件中，您需要指定要保留的类，否则 Proguard 只会减少所有内容。最常见的保持线如下所示：

```
-keep my.applications.package.* 
```

或者

```
-keep my.applications.package.MainClass 
```

[您可以在Proguard 网页](http://proguard.sourceforge.net/index.html#manual/examples.html)上找到配置文件的示例

# android - 当我直接调用方法时活动工作正常，但在尝试通过按钮单击调用该方法时给出致命异常

> ID：11766064
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:20:54.023
> 
> 标签：android, android-intent

这是我试图通过按钮单击来启动该方法的方法。我想做的是从用户界面提供信息并创建 XMl 此方法创建 xml 文档，您可以看到字段 addcity addname addstate 所有这些都是静态给出的，现在我试图将它们提供给 edittext 并将该字符串传递给相应的字段，对如何做感到困惑，我试图将这个 CCD_produce 作为服务来做，但无法理解该服务如何独立于活动运行并从 UI（这又是活动）获取值有什么想法？
公共无效CCD_Produce（）{

```
 //create a CCD document and save it to a file
    CCDPackage.eINSTANCE.eClass();

ContinuityOfCareDocument ccdDocument =
    CCDFactory.eINSTANCE.createContinuityOfCareDocument().init();

PatientRole patientRole = CDAFactory.eINSTANCE.createPatientRole();
ccdDocument.addPatientRole(patientRole);
II id = DatatypesFactory.eINSTANCE.createII();
patientRole.getIds().add(id);
id.setRoot("996-756-495");
id.setExtension("2.16.840.1.113883.19.5");

// create an address object and add it to patient role
AD addr = DatatypesFactory.eINSTANCE.createAD();
patientRole.getAddrs().add(addr);
addr.getUses().add(PostalAddressUse.H);
addr.addStreetAddressLine("raleigh lane 1049");
addr.addCity("noroflkva");
addr.addState("VA");
addr.addPostalCode("23500");
 StringBuffer buffer = new StringBuffer();
buffer.append("<table border=\"1\" width=\"100%\">");
buffer.append("<thead>");
buffer.append("<tr>");`
buffer.append("<th>Substance</th>");
buffer.append("<th>Reaction</th>");
buffer.append("<th>Status</th>");
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:32:48.480

noClassDefinitionFound 意味着您的类路径以某种方式搞砸了。如果该按钮用于启动另一个活动，则您的活动可能未在清单中定义。使其不出现在类路径中。

# javascript - JavaScript，对 webfunction(vb) 的 ajax 调用不会返回成功或错误

> ID：11766066
> 
> 赞同：0
> 
> 时间：2012-08-01T19:21:08.850
> 
> 标签：javascript, ajax, vb.net

这是我的js。它由单击按钮触发，然后调用 Web 功能。webfunction可以正常工作，没有错误，但是在js上没有出现.done或成功或错误提示，所以我无法调试为什么它最终根本不调用webfunction。

函数 updateTicket(TicketID) {

```
var strActualEffort = document.getElementById("txtActualEffort").value;
var fltActualEffort;

fltActualEffort = parseFloat(strActualEffort);

if (!isNaN(fltActualEffort)) {
    CalculateRisk(fltActualEffort);
    jQuery.ajax({
        type: "POST",
        url: "web function url",
        data: { ID: TicketID, Effort: fltActualEffort },
        success: function OnSuccess(e) { alert('SUCCESS!' + e); },
        error: function OnError(e) { alert('Failed coz : ' + e); },
        complete: function OnComplete() { alert('COMPLETE'); }
    }).done(function (data) {
        alert("success" + data.slice(0, 100));
    }).fail(function () {
        alert("error");
    }).always(function () {
        alert("complete");
    }); 
} 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:07:18.027

问题已修复。

ajax 没有做任何事情，因为使用 IE 窗口在调用实际 Web 方法之前关闭。

通过将ajax函数调用设置为异步来解决它。

# sql - 如何在 PostgreSQL 中使用条件和子查询创建唯一索引？

> ID：11766074
> 
> 赞同：3
> 
> 时间：2012-08-01T19:22:04.043
> 
> 标签：sql, database, postgresql, constraints

我使用 PGSQL 并尝试在下面添加索引。

```
CREATE UNIQUE INDEX fk_client ON user_client (fk_client) WHERE fk_client NOT IN(SELECT fk_client FROM legal_entity); 
```

但是......这是不可能的，因为在创建索引时允许运行子查询。

我收到以下错误：

```
ERROR:  cannot use subquery in index predicate 
```

有没有办法解决这个问题？

![在此处输入图像描述](../Images/fd0af99772329f2b70779e7c130a5dab.png)

上面的模型代表了案例的情况。

*   客户可以是普通人，也可以是公司
*   如果是普通人，她不会在“legal_entity”表中有FK。
*   如果是普通人，她应该在“user_client”表中只有一条记录。

用索引没有，但是有什么办法可以解决这个问题吗？...

脚本生成表：

```
-- user is a special word, then renamed to users
CREATE TABLE users (
    id_user INT,
    name VARCHAR(50) NOT NULL,
    CONSTRAINT user_pkey PRIMARY KEY (id_user)
);

CREATE TABLE client (
    id_client INT,
    CONSTRAINT client_pkey PRIMARY KEY (id_client)
);

CREATE TABLE legal_entity (
    fk_client INT,
    federal_id VARCHAR(14) NOT NULL,
    CONSTRAINT legal_entity_pkey PRIMARY KEY (fk_client),
    CONSTRAINT legal_entity_fkey FOREIGN KEY (fk_client) REFERENCES client (id_client)
);

CREATE TABLE user_client (
    fk_client INT,
    fk_user INT,
    CONSTRAINT user_client_pkey PRIMARY KEY (fk_client, fk_user),
    CONSTRAINT user_client_fkey_1 FOREIGN KEY (fk_client) REFERENCES client (id_client),
    CONSTRAINT user_client_fkey_2 FOREIGN KEY (fk_user) REFERENCES users (id_user)
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:16:30.927

使用规则的缺点是规则只是在解析查询后重写查询，因此如果通过触发器添加数据，则不会触发。添加一个使用您的逻辑调用函数的 CHECK 约束会更安全。如果我正确地遵循了你的逻辑，它应该是这样的：

```
CREATE OR REPLACE FUNCTION check_user_client(fkc int) 
  RETURNS boolean AS
$$
DECLARE
  i int;
BEGIN
  SELECT count(*) INTO i FROM legal_entity WHERE fk_client = fkc;
  IF (i > 0) THEN
    RETURN true;
  END IF;

  SELECT count(*) INTO i FROM user_client WHERE fk_client = fkc;
  IF (i = 0) THEN
    RETURN true;
  END IF;

  RETURN false;  
END
$$ LANGUAGE plpgsql;

ALTER TABLE user_client ADD CONSTRAINT unique_user CHECK (check_user_client(fk_client)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:02:24.100

我通过添加规则表解决了我的问题：

```
CREATE OR REPLACE RULE rule_test AS ON INSERT
    TO user_client WHERE (
        (SELECT fk_client FROM legal_entity WHERE fk_client = new.fk_client) IS NULL) AND (
        (SELECT fk_client FROM user_client WHERE fk_client = new.fk_client) IS NOT NULL)
    DO INSTEAD NOTHING; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-01T19:30:46.437

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE foo
        ( id INTEGER NOT NULL PRIMARY KEY
        );
CREATE TABLE tbl_relation
        ( id INTEGER NOT NULL PRIMARY KEY
        , foo_id INTEGER REFERENCES foo(id)
        , fk_1 INTEGER
        );

CREATE UNIQUE INDEX fk_1 ON tbl_relation (fk_1)
        WHERE foo_id IS NULL; 
```

更新：这是修改数据模型后的新情况。关键是：legal_entity 和客户端似乎共享一个关键域（看起来不对）给 legal_entity 自己的关键域似乎更合适。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

-- user is a special word, then renamed to users
CREATE TABLE users
        ( id INTEGER PRIMARY KEY
        -- name is a special word
        , zname VARCHAR(50) NOT NULL
        );

CREATE TABLE client
        (id INTEGER PRIMARY KEY
        );

CREATE TABLE legal_entity
        ( id INTEGER PRIMARY KEY
        , client_id INTEGER REFERENCES client(id)
        , federal_id VARCHAR(14) NOT NULL
        );

CREATE TABLE user_client
        ( client_id INTEGER REFERENCES client (id)
        , user_id INTEGER REFERENCES users (id)
        , legal_id INTEGER REFERENCES legal_entity(id)
        , CONSTRAINT user_client_pkey PRIMARY KEY (client_id, user_id) 
        );

CREATE INDEX tres_stupide ON user_client (client_id) WHERE legal_id IS NULL; 
```

# java - “无法为低于 .. 的源级别打开字符串类型的值。”Eclipse 中的错误

> ID：11766081
> 
> 赞同：15
> 
> 时间：2012-08-01T19:22:29.453
> 
> 标签：java, eclipse

我正在使用 Eclipse 开发 Java 程序。我不得不将 JRE 和 JDK 从 1.7x 降级到 1.6。现在一切都指向 1.6.x（包括已安装的 JRE 和 JDK 合规性）。

但是现在Eclipse仍然给我一个错误的`switch`声明，表明：

> 无法为低于 1.7 的源级别打开字符串类型的值。只允许可转换的 int 值或枚举常量

在下面的代码上：

```
Switch("test") // Which is fine with 1.7.x 
```

我从计算机中删除了 1.7.x，不知道为什么它仍在寻找 1.7 而不是 1.6？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-01T19:24:45.420

开启字符串是在 Java 1.7 中引入的！

降级到 Java 1.6 时会**出现**错误消息。在那个版本中，您只能打开原始类型和枚举。

**相关问题：**

*   [为什么我不能打开字符串？](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-27T20:26:33.350

右键单击您的项目，转到属性。从左侧菜单中选择 Java 编译器。选择您的合规级别（1.7 或 1.6）。1.7 将停止该消息。1.6，正如其他人之前所说，不会让你使用字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T19:24:22.773

实际上，您的代码在 1.6 上无效。您不能对字符串进行切换。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T19:24:00.373

`switch(String)`是从 Java 7 开始适用的语法。因为你有不支持 switch(String) 的 1.6，所以 eclipse 给出了编译错误。

更改`switch(String)`为`switch(int)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-01T19:27:16.280

在 Java 4 及之前，您只能使用 switch on `boolean`、`char`、`short`、`byte`、`int`类型。

`Enum`在 Java 5 和 6中，除了以前的类型之外，您还可以使用 switch on 。

并且只有 Java 7 支持 switch on `String`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-30T07:01:21.257

更改您的 jdk 和编译器合规性级别： [![在此处输入图像描述](../Images/31b24afb1f5c952bfba95f59521eaa95.png)](https://i.stack.imgur.com/Wqtex.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-10T03:59:22.070

当我尝试使用 Ant 工具进行部署时，我遇到了同样的问题。

对我有用的解决方案是：

*   右键单击项目，然后单击属性
*   转到 Java 构建路径
*   转到 JRE 系统库
*   选择了执行环境；我改为选择 Alternate JRE，然后选择 jre7（如下所示）

[![在此处输入图像描述](../Images/144843d574ff11a1b9635ccdf72d256e.png)](https://i.stack.imgur.com/xBsXI.png)

# mysql - Mysql：选择所有字段都相等的行

> ID：11766083
> 
> 赞同：0
> 
> 时间：2012-08-01T19:22:35.887
> 
> 标签：mysql, database, sorting, duplicates, unique

如何从 mysql 数据库中删除（或选择）所有唯一行？

```
+-----------+----------+------------+
| FirstName | LastName | BirthDate |
+-----------+----------+------------+
| Tia | Carrera | 1975-09-18 |
| Tia | Carrera | 1975-09-18 |
| Nikki | Taylor | 1972-03-04 |
| Yamila | Taylor | 1972-03-04 |
+-----------+----------+------------+ 
```

删除或选定的行必须是**完全**重复的。示例输出

```
+-----------+----------+------------+
| FirstName | LastName | BirthDate |
+-----------+----------+------------+
| Tia | Carrera | 1975-09-18 |
| Nikki | Taylor | 1972-03-04 |
| Yamila | Taylor | 1972-03-04 |
+-----------+----------+------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:27:09.710

您想使用`SELECT DISTINCT`查询而不是`SELECT`查询。

例子：

```
SELECT DISTINCT
    FirstName,
    LastName,
    BirthDate

FROM YourTable; 
```

这会将所有相同的行折叠成一个结果。

# asp.net - 是否可以强制 WebControl 呈现为 而不是一个？

> ID：11766086
> 
> 赞同：4
> 
> 时间：2012-08-01T19:22:38.487
> 
> 标签：asp.net, html, .net-3.5, custom-server-controls

如何强制`WebControl`渲染为`<div>`？目前，它呈现为 a`<span>`并且我们的 UI 人员更喜欢它是`<div>`. 为了适应他，我想看看这是否可能，如果可能，怎么可能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T15:58:32.593

您可以覆盖 WebControl 的 RenderBeginTag 方法：

```
public override void RenderBeginTag(HtmlTextWriter writer)
{
    writer.RenderBeginTag("div");
} 
```

还有一个可以覆盖的 RenderEndTag，在这种情况下可能不需要：

```
public override void RenderEndTag(HtmlTextWriter writer)
{
    writer.RenderBeginTag();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:25:20.733

是的，这绝对是可能的。Asp.net 使您可以完全控制呈现的输出。

看看[控制适配器](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)

asp.net 团队已经发布了许多适配器，用于对菜单、TreeView 和 FormView 等控件进行 CSS 友好呈现。看看[CSS 好友控件适配器](http://www.asp.net/cssadapters/)

您始终可以根据您的 UI 人员的需要构建自己的渲染来自定义渲染。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-11T13:40:21.193

可能更好地`TagKey`像这样覆盖：

`protected override HtmlTextWriterTag TagKey => HtmlTextWriterTag.Div;`

然后将呈现的任何属性`WebControl`继续放置在开始标记上。

# jquery - 让 JSON 通过 REST 与 JQuery 一起工作？

> ID：11766089
> 
> 赞同：0
> 
> 时间：2012-08-01T19:22:48.787
> 
> 标签：jquery, json, rest, getjson, handlebars.js

我是一名 python 程序员，所以不确定如何在 JavaScript 中执行此操作。

**示例输入**（来自提供 JSON 的 REST 服务）：

```
[{"name": "foo", "id": 1024}, {"name": "bar", "id": 1025}] 
```

**输出**：

```
<table>
    <thead>
            <tr><th>name</th> <th>id</th></tr>
    </thead>
    <tbody>
            <tr><td>foo</td> <td>1024</td></tr>
            <tr><td>bar</td> <td>1025</td></tr>
    </tbody>
</table> 
```

**尝试**（据我所知，首先尝试使用[JQuery docs](http://api.jquery.com/jQuery.getJSON/)中的列表示例，然后再尝试使其成为表）：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <ul class="my-new-list"></ul>
        <script>
          $.getJSON('http://www.servicestack.net/ServiceStack.Northwind/customers?format=json', function(data) {
          var items = [];

          $.each(data, function(key, val) {
            items.push('<li id="' + key + '">' + val + '</li>');
          });

          $('<ul/>', {
            'class': 'my-new-list',
            html: items.join('')
          }).appendTo('body');
        });
        </script>
    </body>
</html> 
```

我确定这只是我的一些 n00bish 错误，但不确定它是什么。你能指出来吗？

最好我想要一个带有字典语法的类似 python 的视图（也许[Handlebars](http://handlebarsjs.com/)可以提供这个？），这样我就可以去`for person in this_list: <tr>person.name</tr>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:58:51.280

首先，您的 jQuery 甚至不会运行，因为您从未触发过它，或者将它包装在类似...

`$(document).ready(function() {`...`});`

见这里：[介绍 $(document).ready()](http://docs.jquery.com/Tutorials:Introducing_$%28document%29.ready%28%29)

其次，除非您使用 JSONP，否则您**无法通过 Javascript 从另一个域加载 JSON ，请参阅：** [jQuery's JSONP Explained with Examples](http://www.jquery4u.com/json/jsonp-examples/#.UBmDjMie6z4)。*通常，您将使用 PHP、.Net、Ruby 将 JSON 加载到您的服务器并使其可用于您的脚本。*

示例：[处理 PHP JSON 对象中的数据](https://stackoverflow.com/questions/263392/handling-data-in-a-php-json-object)

最后，javascript/jQuery 将允许您使用类似的语法，`person.name`这完全取决于您的对象或数组的结构。

至于“不错”的布局，有很多选项我无法在这里真正开始解释它们......但如果你甚至不能首先加载数据，那一切都不是！:)

这是一个古老但仍然有用的教程解释这一点：http: [//www.factsandpeople.com/facts-mainmenu-5/26-html-and-javascript/89-jquery-ajax-json-and-php](http://www.factsandpeople.com/facts-mainmenu-5/26-html-and-javascript/89-jquery-ajax-json-and-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:01:32.610

这里有几个问题。贾斯汀詹金斯已经提到了两个最严重的。

除此之外，还要确保来自服务器的答案是一个数组而不是一个对象。您当前的 url 响应带有一个对象。所以在这种情况下，你必须访问数组：`$.each(data.Customers ...`这里的技巧。

其次，通过遍历数组调用的函数得到一个键和一个值。但不是对象的属性，但在这种情况下，键是 0...n（数组的索引），值是对象。因此，如果要访问数组中的对象，请`val.property`改用。

然后代码可能看起来像这样：

```
$.getJSON('http://www.servicestack.net/ServiceStack.Northwind/customers?format=json', function(data) {

var items = [];

$.each(data.Customers, function(key, val) {
  items.push('<li id="' + val.id + '">' + val.name + '</li>');
});

$('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
}); 
```

当然，假设您的请求成功。

这是一个不使用请求的 jsfiddle，但向您展示了 jquery 迭代函数的使用。

[http://jsfiddle.net/jomikr/zg2y5/](http://jsfiddle.net/jomikr/zg2y5/)

# jquery - jQuery滑块绘制不同的高度？

> ID：11766090
> 
> 赞同：0
> 
> 时间：2012-08-01T19:22:51.480
> 
> 标签：jquery, wordpress, slider, slidetoggle

我不知道如何最好地解释这一点，但我正在尝试使用我在网上找到的一个脚本，它部分隐藏了 div 的内容，然后在单击“阅读更多”按钮时展开。

这是链接：[http ://elderoptions.staging.wpengine.com/](http://elderoptions.staging.wpengine.com/)

问题是有时它会切断屏幕最底部的内容。它在 Firefox 中效果最好。

似乎脚本正在绘制不同的高度。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:41:00.893

提到的网站已经过时，并使用折旧的 html 和 jquery 代码。就个人而言，我**不会**使用他们的脚本。

相反，我为您提供了一个类似的工作示例。随意使用这个。希望这可以帮助！

[http://jsfiddle.net/mTN2P/95/](http://jsfiddle.net/mTN2P/95/)

# java - 使用 WicketTester 验证 Validator 是否已添加到 TextField？

> ID：11766092
> 
> 赞同：4
> 
> 时间：2012-08-01T19:22:53.807
> 
> 标签：java, wicket, wicket-tester

我在检票口应用程序中使用了以下面板，我想编写一个测试以确保调用 addPatternValidator(String pattern) 将 PatternValidator 添加到 TextField。

```
public class StringTextBoxPanel extends Panel {
  private static final long serialVersionUID = 1L;

  private String stringModel = new String();
  private TextField<String> textfield;
  private Label label;

  public StringTextBoxPanel(String id, String labelText) {
    super(id);
    label = new Label("label", labelText);
    textfield = new TextField<String>("textField", new PropertyModel<String>(this, "stringModel"));
    add(label);
    add(textfield);
  }

  public String getValue() {
    return textfield.getValue();
  }

  public void addPatternValidator(String pattern) {
    this.get(textfield.getId()).add(new PatternValidator(pattern));
  }

  public void setRequired() {
    textfield.setRequired(true);
  }
} 
```

可以用 WicketTester 做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:24:01.847

在 WicketTester 中启动 FormTester，将一些非法值“输入”到您的 TextField，让 FormTester 提交表单并

a) 检查模型，无效值不会写入模型

b) 检查错误信息

但说实话并提供我没有被要求的想法，我不太明白，为什么你要测试这个...... add 方法是 wicket 的一部分，不应该由你测试，而是由 Wicket 开发人员测试。这同样适用于 PatternValidator 类，但您可能想要测试您的模式。至于此方法中的其余代码……就我而言，这很简单，不能证明测试是合理的。

附录（正如评论中提到的，有更简单的方法可以确保调用一个方法而不是调用一个 FormTester。这个片段只是被侵入到这个编辑器中，所以没有应用任何 IDE 检查）：

```
private Boolean methodCalled = false;

@Test
public void testSomething() {
    WicketTester tester = new WicketTester();
    tester.startComponentInPage(new StringTextBoxPanel("id", "someText") {

        @Override
        public void addPatternValidator(String pattern) {
            methodCalled = true;
        }
    });
    AssertTrue(methodCalled);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:28:32.743

我在提交表单后检查了错误/信息消息：

```
wicketTester.assertHasNoErrorMessage();
wicketTester.assertHasNoInfoMessage();
wicketTester.getMessages(FeedbackMessage.FATAL); //or another kind of messages 
```

# ajax - Zend Routes 给出 500 错误，与 Ajax 调用混淆

> ID：11766096
> 
> 赞同：0
> 
> 时间：2012-08-01T19:23:11.203
> 
> 标签：ajax, jquery, zend-route

我刚刚在我的 Zend 站点的引导程序中设置了几条路线，这是其中之一：

```
$route = new Zend_Controller_Router_Route('organizer/haveItem',
                                                array('controller'=> 'organizer',
                                                'action'=> 'haveItem')); 
    $router->addRoute('have', $route); 
```

另一个新的基本相同，将“拥有”替换为“想要”。我这样做是为了让任何 Ajax 调用都被这些路由捕获，而不是陷入我的索引操作，此时它们基本上永远丢失了，因为如果我尝试从那里重定向到正确的操作，我只会陷入无限环形。

我的问题是，当我使用这些路由时，我收到 500 错误。我相信这是因为这些路由正在从 Ajax 调用中删除参数化变量，或者因为任何参数化变量导致调用与这些路由不匹配并落入索引操作。这实际上会导致 500 错误吗？如果是这样，我该如何调整这些路由以考虑 Ajax 发布变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:55:08.420

Zend 的路由器可以完美地通过路由传递 ajax 变量。问题是我有多个路由到同一个控制器。就在拥有和想要的路线下方，我有这条路线：

```
$route = new Zend_Controller_Router_Route('organizer/:filter/:page',
                                                array('controller'=> 'organizer',
                                                'action'=> 'index',
                                                'page'=>1)); 
    $router->addRoute('organizer searches', $route); 
```

这吸引了我的有和想要的电话。当我将这个移到列表顶部时，它工作得非常好。我相信 Zend 路由器自下而上评估路由，如 Zend 文档[http://framework.zend.com/manual/en/zend.controller.router.html](http://framework.zend.com/manual/en/zend.controller.router.html)中所述，因此您必须坚持更具体的路由列表的底部。例如，我的所有在组织者段之后带有关键字的路线都必须在任何路线下方，`:filter`以便它们首先被捕获。

# android - 动态壁纸中的周期性动作

> ID：11766103
> 
> 赞同：0
> 
> 时间：2012-08-01T19:23:41.760
> 
> 标签：android, live-wallpaper

我正在努力确保在我的动态壁纸中使用最有效/最合适的代码。目前，如果我有任何周期性动作，我只需使用 Runnables 重复该动作，然后在它完成后 postDelay 它需要多长时间。

最好只有一个 Runnable，例如 drawFrame Runnable，然后为任何其他周期性操作解决这个问题？

例如：

```
int interval1 = 0;
int interval2 = 0;
drawFrame(){
  interval1++;
  interval2++;
  if (interval1==repeatInt1){
    interval1 = 0;
    // Periodic action 1
  }
  if (interval2==repeatInt2){
    interval2 = 0;
    // Periodic action 2
  }
// Regular drawFrame code here
} 
```

我认为上述方法会比运行 3 个可运行文件使用更少的资源，对吗？

为了澄清，我有多个动作（2个或更多）需要定期执行，但不一定都在相同的延迟。最好创建一个延迟最短的可运行文件，然后在 X 次循环后将其用作中心线程来执行其他操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:30:37.980

为什么不使用时间函数对区间进行建模？如果您有两个操作，并且想要在使用定义的时间段之间切换。

```
double period = 1000;
double time = (double) System.currentTimeMillis();
if ( Math.sine( 2*Math.PI * time / period) > 0)
  //State 1: do one thing
else
  //State 2: do the other 
```

有很多简单的方法可以改变数学，这些方法可以让你控制状态的数量、在状态之间切换的顺序以及在每个状态中花费的每个时间段的比例。

# oracle - 从 Oracle 中没有任何主键的多个表中插入单个表

> ID：11766110
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:24:06.300
> 
> 标签：oracle, insert, external

我应该从两个没有任何主键的不同外部文件中插入一个表。

每个外部文件都有不同的列。此外，值应按字母顺序插入。数据库中的表有一个自动递增的主键。

请告诉我实现这一目标的方法。

* * *

真的谢谢你的帮助...

这一切都是关于使用外部表插入具有 1:1 或/和 1:n 关系的表...每个表都有一个主键，按顺序递增。我已经插入了“预算”表之一：bu_id、bu_section 等。

```
insert into Budget (
bu_id,
bu_section
)

select dep.ID_seq.nextval, file1.section
from file1 
```

结果将是：

```
bu_id   bu_section
1006     blabla
1007     blablabla 
```

我想从两个不同的外部文件中插入具有 de_id、de_resource、de_comment 的（“详细信息”）表。其中一个是资源详细信息，另一个是评论。insert语句也要考虑bu_id和de_id的关系（de_id也要从1006开始）

@a_horse_with_no_name：每个外部文件中有超过 1800 条记录。所以我认为当我在插入表时在每个选择语句中使用 ID_seq.nextval 时它不起作用。

ps：我不允许使用SQL*loader。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:36:37.220

据我了解您的问题，应该这样做：

```
insert into real_table (id, col1, col2, col3)
select some_sequence.nextval,
       c1_1,
       c1_2,
       c1_3
from external_table_1
union 
select some_sequence.nextval,
       c2_1,
       c2_2,
       c2_3
from external_table_2; 
```

如果这不是你想要的，你需要让你的问题更清楚。

正如 Randy 指出的那样，您不按字母顺序插入，而是按特定顺序**检索行。**关系表中的行未排序。`ORDER BY`从真实表中检索时，您需要提供一个表达式：

```
select id, 
       col1, 
       col2, 
       col3
from real_table
order by col1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:41:33.063

没有“外部文件上的主键”之类的东西（假设您正在谈论平面文件）。如果您想将两个“平面文件”而不是“表”加载到一个表中，请开始阅读有关 SQL*Loader 的信息。

如果您想将两个不同的“表”（表 1 和表 2）的内容插入到一个表（表 3）中，答案已经发布。

# database - 使用 Booksleeve 和 Redis 进行检查和设置 (CAS) 操作

> ID：11766111
> 
> 赞同：4
> 
> 时间：2012-08-01T19:24:09.123
> 
> 标签：database, redis, booksleeve

Booksleeve 是否支持 CAS 操作（即 Redis [WATCH](http://redis.io/commands/watch)命令）？例如，如何实现以下内容？

```
WATCH mykey
val = GET mykey
val = val + 1
MULTI
SET mykey $val
EXEC 
```

当多个线程试图用相同的数据修改同一个对象时，我需要这个来避免竞争条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:35:56.003

~~目前在nuget中，我不这么认为。由于 BookSleeve*通常*用作多路复用器，这使得“手表”无法使用。我可以*添加*它，您必须在操作期间将使用限制为单个调用者（每个 BookSleeve 连接）。~~

现在[已经改变了](http://marcgravell.blogspot.co.uk/2012/10/multiplexed-transactions-in-booksleeve.html)；如果我们想手动实现`INCR`（根据您的示例），我们可以使用：

```
// note this could be null if the old key didn't exist
var oldVal = await connection.Strings.GetInt64(db, key);

var newVal = (oldVal ?? 0) + 1;
using (var tran = connection.CreateTransaction())
{
    // check hasn't changed (this handles the WATCH, a checked GET,
    // and an UNWATCH if necessary); note tat conditions are not sent
    // until the Execute is called
    tran.AddCondition(Condition.KeyEquals(db, key, oldVal));

    // apply changes to perform assuming the conditions succeed
    tran.Strings.Set(db, key, newVal); // the SET

    // note that Execute includes the MULTI/EXEC, assuming the conditions pass
    if (!await tran.Execute()) return null; // aborted; either a pre-condition
                                         // failed, or a WATCH-key was changed
    return newVal; // successfully incremented
} 
```

显然，您可能希望在重复的（在合理的范围内）循环中执行它，以便如果它因为 而中止`WATCH`，您可以从头开始重做。

这与您的示例*略有*不同，因为它实际上是这样（假设值在 initial`GET`和 second之间没有改变`GET`）：

```
val = GET mykey
newval = (val ?? 0) + 1
WATCH mykey
chk = GET mykey // and verifies chk == val as part of the Execute
MULTI
SET mykey $newval
EXEC 
```

请注意，`EXEC`如果值在`WATCH`和之间发生更改，仍然可以报告取消`EXEC`；或（如果它在两个s 之间发生了变化）*：*`GET`

```
val = GET mykey
newval = (val ?? 0) + 1
WATCH mykey
chk = GET mykey // and verifies chk == val as part of the Execute
UNWATCH 
```

不同之处在于`GET`，但这是它可以与多路复用器一起工作的唯一方式 - 即`Execute`优化为可靠快速，因此不会影响其他调用者。

# asp.net-mvc-2 - 将下拉列表仅列出数据 ID 到表中

> ID：11766117
> 
> 赞同：1
> 
> 时间：2012-08-01T19:24:29.640
> 
> 标签：asp.net-mvc-2

我有 2 张桌子：tbleducation 和 tblemployee。tblemployee 表有诸如：employeeID、employeeName 等字段，而 tbleducation 有诸如：Id、employeeID 等字段。

我想创建一个下拉列表，从 tblemployee 表中选择一个给定employeeName 的employeeID，以便将其插入到tbleducation 中。我编写的代码如下：

**模型**

```
public class UserModels
{

    public string EmployeeName { get; set; }
    public int EmployeeCode { get; set; }
    public IEnumerable<SelectListItem> Employee { set; get; }
} 
```

**控制器**

```
[HttpPost]
public ActionResult Education(FormCollection edu)
{
    tblEmployee_Education education = new tblEmployee_Education();
    education.EmployeeID = Convert.ToInt32(edu["EmployeeName"].ToString());
    education.Duration = edu["Duration"].ToString();
    education.Certificate = edu["Certificate"].ToString();
    education.Country = edu["Country"].ToString();
    education.SchoolName = edu["SchoolName"].ToString();
    education.Major = edu["Major"].ToString();
    education.SubDescript = edu["SubDescript"].ToString();
    context.AddTotblEmployee_Education(education);
    context.SaveChanges();
    return View();
} 
```

**看法**

```
<%= Html.DropDownListFor(x => x.EmployeeName, Model.Employee, "select EmployeeName")%> 
```

* * *

当我尝试插入时，我收到以下错误消息：

> “INSERT 语句与 FOREIGN KEY 约束 FK_tblEmployee_Education_tblEmployee_Employee 冲突”。冲突发生在数据库“MP_DBS_old”、表“dbo.tblEmployee_Employee”、列“代码”中。该语句已终止。”

我知道发生此错误是因为下拉列表中的值是一个字符串，并且数据库需要一个整数（employeeID）。我真的不知道如何解决它。请任何人帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:50:01.600

您收到此错误是因为您尝试插入 EmployeeName 而不是 EmployeeID。

Html.DropDownListFor(x => x.EmployeeName, Model.Employee, "select EmployeeName")%>: 错误

您正在填充 EmployeeName int dropdowmlist 。正确的路线是这样

```
Html.DropDownListFor(x => x.EmployeeID , Model.Employee, "select EmployeeName")%> 
```

接下来，您必须在此行中进行更正：

```
 education.EmployeeID =  Convert.ToInt32(edu["EmployeeID "].ToString()) 
```

我认为这将解决您的问题

# vba - 用于排序的 Excel 常量

> ID：11766118
> 
> 赞同：1
> 
> 时间：2012-08-01T19:06:43.767
> 
> 标签：vba, excel

我在 Excel VBA 中使用排序过程，并希望设置一个变量集，根据条件将顺序更改为升序或降序。我试过了，但出现“类型不匹配”错误。

```
If SBF = 0 Then
    S = "xlAscending"
Else: S = "xlDescending"
End If  
ActiveWorkbook.Worksheets(SN(x)).sort.SortFields.Add Key:=Range( _
        "B3:B" & last_cell), SortOn:=xlSortOnValues, Order:=S, DataOption:= _
        xlSortNormal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:05:04.927

这有效：

```
Public Enumeration, XlSortOrder, instance

Dim instance As XlSortOrder
If SBF = 0 Then
    instance = xlAscending
Else: instance = xlDescending
End If
ActiveWorkbook.Worksheets(SN(x)).sort.SortFields.Add Key:=Range( _
    "B3:B" & last_cell), SortOn:=xlSortOnValues, Order:=instance, DataOption:= _
    xlSortNormal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:08:23.580

`xlAscending`并且`xlDescending`是 Excel 常量。要查看他们的值，只需在“立即”窗口中打印即可。请参阅下面的快照。

![在此处输入图像描述](../Images/9fb007a7f446440c38d7845f89ed9939.png)

因此，您实际上可以将代码编写为

```
If SBF = 0 Then S = 1 Else S = 2

ActiveWorkbook.Worksheets(SN(x)).Sort.SortFields.Add _
Key:=Range("B3:B" & last_cell), _
SortOn:=xlSortOnValues, _
Order:=S, _
DataOption:=xlSortNormal 
```

同样，`xlSortOnValues`和的值`xlSortNormal`是`0`。如果你愿意，你也可以把上面的代码写成

```
If SBF = 0 Then S = 1 Else S = 2

ActiveWorkbook.Worksheets(SN(x)).Sort.SortFields.Add _
Key:=Range("B3:B" & last_cell), _
SortOn:=0, _
Order:=S, _
DataOption:=0 
```

**编辑**

我假设它`S`已被声明为 Integer 或 Long 而不是 String。

# windows - 在 powershell 中动态生成树节点

> ID：11766125
> 
> 赞同：0
> 
> 时间：2012-08-01T19:25:15.923
> 
> 标签：windows, powershell, windows-forms-designer, inventory, tree-nodes

我目前是新手，并且正在学习用于和管理目的的 powershell。我发布了这个问题，因为我在任何地方都找不到很多关于这个的信息。

我正在创建一个带有 gui 的脚本，它将我们所有的服务器列为树节点。从那里我想即时生成/填充/创建服务器的子节点（即当单击或选择节点'server1'时，它应该生成如下子节点）。由于我们有大量服务器，我不想在添加新属性时更新每台服务器上的子节点。谁能告诉我如何做到这一点？如果我的描述没有意义，我可以解释更多。

.....服务器1。. ......BIOSInfo（我通过使用标签来区分服务器节点及其子节点）。. ......PROCInfo

ETC

我正在使用带有 powershell 3.0 的 sapien 原始形式

这是示例代码；

```
function NodeClick( $object )
{
    if ($this.SelectedNode.Tag -eq "Server")
    {
        $Server = $this.selectednode.text
        $richTextBox1.Text = "Script for $Server Information"

        #~~< TreeNode11 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1111 = New-Object System.Windows.Forms.TreeNode("OS")
        $TreeNode1111.Tag = "DevInfo"
        $TreeNode1111.Text = "OS"
        #~~< TreeNode12 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1222 = New-Object System.Windows.Forms.TreeNode("Domain")
        $TreeNode1222.Tag = "DevInfo"
        $TreeNode1222.Text = "Domain"
        #~~< TreeNode13 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1333 = New-Object System.Windows.Forms.TreeNode("Serial")
        $TreeNode1333.Tag = "DevInfo"
        $TreeNode1333.Text = "Serial"
        #~~< TreeNode14 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1444 = New-Object System.Windows.Forms.TreeNode("BIOS")
        $TreeNode1444.Tag = "DevInfo"
        $TreeNode1444.Text = "BIOS"
        #~~< TreeNode15 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1555 = New-Object System.Windows.Forms.TreeNode("Processor")
        $TreeNode1555.Tag = "DevInfo"
        $TreeNode1555.Text = "Processor"
        #~~< TreeNode16 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1666 = New-Object System.Windows.Forms.TreeNode("Memory")
        $TreeNode1666.Tag = "DevInfo"
        $TreeNode1666.Text = "Memory"
        #~~< TreeNode17 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1777 = New-Object System.Windows.Forms.TreeNode("Partitions")
        $TreeNode1777.Tag = "DevInfo"
        $TreeNode1777.Text = "Partitions"
        #~~< TreeNode18 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1888 = New-Object System.Windows.Forms.TreeNode("Drive")
        $TreeNode1888.Tag = "DevInfo"
        $TreeNode1888.Text = "Drive"
        #~~< TreeNode19 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode1999 = New-Object System.Windows.Forms.TreeNode("IPInfo")
        $TreeNode1999.Tag = "DevInfo"
        $TreeNode1999.Text = "IPInfo"
        #~~< TreeNode110 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode2111 = New-Object System.Windows.Forms.TreeNode("PrintInfo")
        $TreeNode2111.Tag = "DevInfo"
        $TreeNode2111.Text = "PrintInfo"
        #~~< TreeNode111 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode2222 = New-Object System.Windows.Forms.TreeNode("FolderShare")
        $TreeNode2222.Tag = "DevInfo"
        $TreeNode2222.Text = "FolderShare"
        #~~< TreeNode112 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode2333 = New-Object System.Windows.Forms.TreeNode("Tasks")
        $TreeNode2333.Tag = "DevInfo"
        $TreeNode2333.Text = "Tasks"
        #~~< TreeNode113 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode2444 = New-Object System.Windows.Forms.TreeNode("Services")
        $TreeNode2444.Tag = "DevInfo"
        $TreeNode2444.Text = "Services"
        #~~< TreeNode114 >~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        $TreeNode2555 = New-Object System.Windows.Forms.TreeNode("Software")
        $TreeNode2555.Tag = "DevInfo"
        $TreeNode2555.Text = "Software"
        $this.SelectedNode = New-Object System.Windows.Forms.TreeNode("DOCACT01", [System.Windows.Forms.TreeNode[]] ( @($TreeNode1111, $TreeNode1222, $TreeNode1333, $TreeNode1444, $TreeNode1555, $TreeNode1666, $TreeNode1777, $TreeNode1888, $TreeNode1999, $TreeNode2111, $TreeNode2222, $TreeNode2333, $TreeNode2444, $TreeNode2555) ))
        $this.SelectedNode.Tag = "Server"
        $this.SelectedNode.Text = "$Server"

        $form1.refresh()
    }
    else
    {
        $this.SelectedNode.expand()
        $richTextBox1.Text = "Script for Server Information" 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:30:04.580

让它工作如下；

```
function NodeClick( $object )
{
if (($this.SelectedNode.Tag -eq "Server") -and ($this.SelectedNode.nodes.count -eq 0))
{           
    $Parent = $this.SelectedNode
    $richTextBox1.text = "Server Inventory Script"
    $Server = $Parent.text
    $Childs = ("OS", "Domain", "Serial", "BIOS", "Processor", "Memory", "Partitions", "Drive", "IPInfo", "PrintInfo", "FolderShare", "Tasks", "Services", "Software")
    $childs | %{
        $newNode = New-Object System.Windows.Forms.TreeNode             
        $newNode.Name = $_          
        $newNode.Text = $_              
        $newNode.Tag = "DevInfo"                
        $Parent.Nodes.Add($newNode) | Out-Null              
        return $newNode
        $Form1.refresh()
    }
} 
```

# javascript - 网站未加载。jQuery 未定义

> ID：11766128
> 
> 赞同：0
> 
> 时间：2012-08-01T19:25:26.367
> 
> 标签：javascript, jquery, browser

这不完全是一个编程问题，但我认为它会帮助 Javascript 开发人员。

我一直面临从任何浏览器打开一些网站的问题（特别是 Gawker Media 网站（Gizmodo、Lifehacker、Gawker ......）只有顶部面板在 Chrome 和 Firefox 中加载，而在 Internet Explorer 中没有图像的页面。

我查看了页面上的 Chrome 控制台，出现了类似的错误

`Uncaught ReferenceError: jQuery is not defined`

![这里是](../Images/f0f190eca7e925320007e12104ee7a52.png)截图

现在从我的搜索中我发现这通常可以通过在网页代码中添加某些行来解决，但显然这不是这里的问题。

如果这个问题不属于这里，我们深表歉意，但如果有人能回答，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:27:47.640

您的网络通道上的某些东西（例如 HOSTS 文件或防火墙）可能会阻止对定义 jQuery 的 JavaScript 文件的访问。查看“网络”选项卡，查看该文件是否无法加载。

# xml - 这个 XSD Regex 真正等同于什么？

> ID：11766132
> 
> 赞同：0
> 
> 时间：2012-08-01T19:25:55.503
> 
> 标签：xml, regex, xsd

我很难弄清楚这个 XSD 正则表达式匹配。这是 simpleType 定义：

```
 <xs:simpleType name="data-fuelcorrfact">
    <xs:restriction base="xs:float">
      <xs:pattern value="\-?[1-9]\.[0-9]{4}"/>
    </xs:restriction>
  </xs:simpleType> 
```

我可以猜测它需要一个介于 1 和 9 之间的数字、一个句点和另一个介于 0 和 9 之间的数字。我不明白它`\-?`是什么，并且例如将值 1.0 验证失败。

有人可以帮我破译这个正则表达式吗？此外，是否有人对可以解释给定 XSD 正则表达式值应包含的程序或网站有任何参考？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:29:54.957

我不熟悉 XSD，但假设它使用通常的 RegEx 规则，以下是细分：

首先，`\-?`。这匹配一个或零个破折号，即是否为负。The`\`只是一个转义字符，即将 the`-`视为一个实际`-`字符，而不是一个特殊的 RegEx 字符。但是，在方括号之外，它通常没有任何特殊含义。可能是 XSD 的事情。

接下来，`[1-9]`匹配任何非零数字字符（即 1、2、3、4、5、6、7、8 或 9）。所以是个位数。

`\.`事实上，确实匹配一个句点。

然后我们得到`[0-9]{4}`了完全匹配的 4 个数字字符（现在包括零）。

所以它正在寻找 (-10, 10) 中的任何数字，而不是 (-1, 1) 中恰好有四位小数的数字。奇怪的行为; 我怀疑`[1-9]`应该是`[01-9]`因为这样省略 0 左右的值非常奇怪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:28:53.770

你很接近。The`\-?`是一个可选的减号，由 . 转义`\`。我对 XSD 不是很熟悉，所以我不能确定是否真的需要转义。`'1.0'`验证失败，因为正则表达式需要 4 位小数——这`{4}`是`[0-9]{4}`. `'1.000'`应该匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:29:20.823

被`-`转义`\`- 我不相信这实际上是需要的，可能有人试图保证安全（如果转义字符不是特殊的，它将按原样输出）。

后面跟`?`零或一的意思。

所以，一开始是可选`-`的。

`1.0`由于`[0-9]{4}`后面的原因验证失败`.`- 这需要四个小数点，其中`1.0`只有一个。

有关XSD 正则表达式参考，请参见[此处。](http://www.regular-expressions.info/xml.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:37:05.857

实际上，与几乎所有其他正则表达式方言不同，XSD 规范**不允许**使用反斜杠转义连字符。您的 XML Schema 处理器似乎在接受的内容上过于自由。

# java - java不能将数组内联分配给非局部变量

> ID：11766135
> 
> 赞同：0
> 
> 时间：2012-08-01T19:26:20.367
> 
> 标签：java

这编译并工作：

```
public class Test {
    public static int[] array;
    public static void main(String[] args) {
        int[] temp = {42};
        array = temp;
    }
} 
```

这不会：

```
public class Test {
    public static int[] array;
    public static void main(String[] args) {
        array = {42};
    }
} 
```

为什么是这样？如何在不使用临时局部变量的情况下将数组分配给非局部变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:28:02.193

该变量已被声明。您需要这样分配它：

```
array = new int[] {42}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:34:35.833

初始化器只能出现在声明点。
在您的情况下，您已经宣布`array`为`static`会员，所以您错过了机会......

# python - Python导入文件名包含在变量中的函数

> ID：11766141
> 
> 赞同：3
> 
> 时间：2012-08-01T19:26:36.110
> 
> 标签：python, import

嗨，我在与我的主脚本相同的文件夹中有一个目录，名为“actions”，在这个文件夹中有几个脚本可以随时被主脚本使用。我现在在一个名为 VAR 的变量中以字符串的形式拥有脚本的名称（为了举例）。我希望能够使用该变量导入此文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:30:19.593

如果您的目标只是执行文件，您可以使用

```
with open(filename) as f:
    exec(compile(f.read(), filename, "exec")) 
```

或 Python 2.x 函数`execfile()`。

如果你真的想使用完整的导入机制来导入模块，你需要`__init__.py`在目录`actions`中，并且可以使用类似的东西

```
module = __import__("actions.foo") 
```

导入`actions/foo.py`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:32:21.793

使用`__import__`功能

```
__import__(str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T16:43:35.653

2021 年更新：Python3.9.5`__import__()`包含以下消息：

> 导入一个模块。因为这个函数是供 Python 解释器使用而不是一般用途，所以最好使用 importlib.import_module() 以编程方式导入模块。

于是就变成了：

```
from importlib import import_module
import_module(modulename_or_relative_filename) 
```

# iphone - 使用 iOS 5 的 Appearance API 自定义 UIButton 的 titleLabel

> ID：11766143
> 
> 赞同：3
> 
> 时间：2012-08-01T19:26:50.453
> 
> 标签：iphone, objective-c, ios, ios5

我正在尝试使用新的外观 API 自定义 UIButton 中标题标签的外观，但没有找到任何可行的方法。似乎以下代码应该可以工作：

```
[[UILabel appearanceWhenContainedIn:[UIButton class], nil] setShadowOffset:CGSizeMake(0, 2)];
[[UILabel appearanceWhenContainedIn:[UIButton class], nil] setFont:[UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:17]]; 
```

但我认为 UILabel 实际上并不是按钮的子视图。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:32:46.770

为什么不直接使用 的`titleLabel`属性修改标题标签`UIButton`？

```
button.titleLabel.font = [UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:17];
button.titleLabel.shadowOffset = CGSizeMake(0, 2); 
```

未经测试，但这应该有效，对吧？

编辑：为什么不创建 UIButton 的子类并添加这两行？

# git - 没有 .git 存储库文件夹显示，使用 Windows 7

> ID：11766147
> 
> 赞同：21
> 
> 时间：2012-08-01T19:27:09.700
> 
> 标签：git

我是 git (mysysgit) 的新手，我正试图让它在我的笔记本电脑上运行。我正在使用 Windows 7。我已经能够使用大多数命令，但我认为它没有保存在任何地方。我使用了 git init、git add .、git commit。一切似乎都很好，但我无法在任何地方找到我的 .git 文件夹。使用 SmartGit 后，我​​发现没有任何保存。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T19:51:26.273

如果 git 启动、添加和提交文件夹没有问题，那么那里有一个 .git 文件夹。如果在 Windows 资源管理器中看不到它，则需要在 Windows 资源管理器中启用隐藏和系统文件和文件夹的显示。

免费的电子书“ [Pro Git](http://www.git-scm.com/book) ”对于快速掌握 git 非常有帮助。还有另一个免费的叫做“ [Git Succincly](http://www.syncfusion.com/resources/techportal/ebooks) ”，你必须注册它，但它是 Pro Git 的一个削弱，我没有收到任何垃圾邮件或烦人的后续行动。

希望有帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-19T12:26:54.573

使用 git 2.9，该`.git/`文件夹默认保持隐藏状态，但现在有一个新配置：

```
git config core.hideDotFile dotGitOnly 
```

该新设置允许配置如何隐藏或不隐藏点文件。

请参阅[Johannes Schindelin (](https://github.com/dscho) [)的](https://github.com/dscho)[提交 ebf31e7](https://github.com/git/git/commit/ebf31e70bbea010c9bb505578ae29532445b5a4d)和[提交 f30afda](https://github.com/git/git/commit/f30afdabbfb9feeec402d351935879caf8b298ad)（2016 年 5 月 11 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 bfc99b6](https://github.com/git/git/commit/bfc99b63fe859e16ddcfcbe6ac09f98b8d06b34e))^(中，2016 年 5 月 17 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## `mingw`：介绍' `core.hideDotFiles`'设置：
> 
> 在 Unix（和 Linux）上，默认情况下通常不显示名称以点开头的文件和目录。Git 使用此约定：该 `.git/`目录应该由普通用户单独保留，并且只能通过 Git 本身访问。
> 
> **在 Windows 上**，不存在这样的约定。相反，**有一个明确的标志来将文件或目录标记为 hidden**。
> 
> 在早期，Git for Windows 并没有将`.git/`目录（或者就此而言，任何名称以点开头的文件或目录）标记为隐藏。这会导致相当多的混乱，甚至数据丢失。
> 
> 因此，Windows 版 Git 引入了该`core.hideDotFiles`设置，具有三个可能的值：true、false 和`dotGitOnly`，默认仅将`.git/`目录标记为隐藏 ( `dotGitOnly`)。
> 
> 基本原理：用户不需要`.git/`直接访问，而且确实（如所证明的那样）也不应该真正看到该目录。
> 然而，并非所有的点文件都应该默认隐藏，例如 Eclipse 不显示它们（因此用户将无法看到，比如说，一个 `.gitattributes`文件）。
> 
> 自从上次尝试将这个补丁引入核心 Git 以来的五年多时间里，这个补丁的一个稍微有缺陷的版本为 Windows 用户的 Git 提供了很好的服务：没有一份报告表明隐藏`.git/`目录存在问题，以及由以前非隐藏的 `.git/`目录只是停止了。
> 在将此补丁上传到上游的过程中，这些错误已得到修复。

[`git config`手册页](https://github.com/git/git/blob/bfc99b63fe859e16ddcfcbe6ac09f98b8d06b34e/Documentation/config.txt#L282-L286)现在包括：

```
core.hideDotFiles 
```

> （仅限 Windows）如果为 true，则将名称以点开头的新创建的目录和文件标记为隐藏。
> 如果是 ' `dotGitOnly`'，则只有`.git/`目录被隐藏，而没有其他以点开头的文件。
> 默认模式为“ `dotGitOnly`”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-17T20:43:00.377

尽管我选择了 Windows 资源管理器选项来显示隐藏文件和文件夹（甚至显示受保护的操作系统文件），但 .git 文件夹仍然不可见。我按了 <F5> 仍然没有出现。

但是，在命令提示符下，我可以通过键入

```
dir /ah 
```

从存储库目录。

一段时间后，.git 文件终于也出现在了 Windows Explorer 中。我怀疑资源管理器尚未收到目录已更改的回调通知，显然 <F5> 并没有覆盖它......对于隐藏文件。或者，也许 Windows 资源管理器起初担心第一次显示一个带点*和*隐藏的文件（文件夹）。:>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-09T15:07:05.403

我安装了`git`v1.9.2 并使用`CLI`.

更改 Windows 中的设置以显示隐藏的文件和文件夹后，我可以`.git`在我的存储库中看到该文件夹​​。

# java - Java 访问互联网搜索？

> ID：11766149
> 
> 赞同：0
> 
> 时间：2012-08-01T19:27:22.057
> 
> 标签：java, search

我想知道如何让 Java 程序搜索 Google。例如，我想写一个程序，用户可以输入一个餐馆的名字，然后让程序在谷歌上搜索名字，找到地址，然后返回。我确实认为这是可能的，因为我知道网络爬虫程序。但是我想知道如何学习特定的代码或编写它的方法，因为我完全不确定从哪里开始。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:42:58.560

Google 弃用了他们的搜索 API，转而使用更通用的自定义搜索 API：

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

使用您自己的 API 密钥，您可以执行以下操作：

```
GET https://www.googleapis.com/customsearch/v1?key=INSERT-YOUR-KEY&cx=017576662512468239146:omuauf_lfve&q=lectures 
```

这将返回[JSON](http://en.wikipedia.org/wiki/JSON)，您可以对其进行解析以任何您想要的方式显示数据。

以下是有关入门的好信息：http: [//blog.lux-medien.com/2011/08/google-custom-search-java-implementation/](http://blog.lux-medien.com/2011/08/google-custom-search-java-implementation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:35:02.950

如果您对网络爬虫感兴趣，这里有一篇详细介绍 Java 解决方案的文章。

[http://java.sun.com/developer/technicalArticles/ThirdParty/WebCrawler/](http://java.sun.com/developer/technicalArticles/ThirdParty/WebCrawler/)

# html - 使用 spry 菜单创建母版页

> ID：11766150
> 
> 赞同：0
> 
> 时间：2012-08-01T19:27:26.387
> 
> 标签：html, css, dreamweaver, spry

Dreamweaver 具有快速菜单功能，可让用户快速创建导航栏。假设我在一个网站上有多个页面，导航栏都是一样的。我们可以从asp.net 中借用母版页的概念吗？我的意思是通过使用 spry 菜单创建母版页？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:29:15.423

~~使用纯 html/css ...不，你不能。~~

~~您可以使用 PHP、ASP 或类似的服务器端技术。~~

* * *

再三考虑，也许您可​​以使用 AJAX 将菜单与 jQuery 库一起加载。

[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
$('#menu').load('menu.html'); 
```

因此，将 jQuery 添加到您的网页中。然后添加上面的脚本以及当前放置 Spry 菜单的位置...

```
<div id="menu"></div> 
```

将刚刚删除的菜单的代码放入一个名为 menu.html 的文件中。

# php - 检查一个变量是否与另一个数组中的值匹配。

> ID：11766154
> 
> 赞同：0
> 
> 时间：2012-08-01T19:27:33.153
> 
> 标签：php, variables, multidimensional-array

我有一个名为 $gID 的变量，我还有一个包含组值集的多维数组。

例如....

```
[data] => Array
    (
        [0] => Array
            (
                [userId] => 3
                [groupId] => 24
                [status] => 1
                [timestamp] => 2012-08-01 20:09:36
            )

        [1] => Array
            (
                [userId] => 3
                [groupId] => 25
                [status] => 1
                [timestamp] => 2012-08-01 20:08:01
            )

    ) 
```

我需要做的是搜索数组并返回 true 如果 status = 1 如果 [groupId] = $gID

最有效的方法是什么？有任何想法吗？我曾想过在两个 foreach 循环中执行此操作，但认为必须有更好的前进方式。

干杯克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:36:02.027

一开始我不会太担心性能。尽管如此，您可以使用一个`foreach`.

```
// simple boolean function
function search_stuff($arr, $gID) {
  foreach ($arr as $item) {
    if ($item['gID'] == $gID && $item['status'] == 1) {
       return false;
    }
  }

  return false;
}

// sample call
var_dump(search_stuff($arr['data'], $gID)); 
```

我建议将其作为一项功能，以实现灵活性和易于维护。这样，如果您找到更高效的解决方案，则只有一个地方可以更新。

# ruby - 如何让 IntelliJ 在 MacOS X 上获取我的环境变量？

> ID：11766155
> 
> 赞同：11
> 
> 时间：2012-08-01T19:27:34.583
> 
> 标签：ruby, intellij-idea, gemfile

我尝试使用 RCenvironment、.bashrc、.MacOSX/environment.plist 和 /etc/launchd.conf 设置这些并重新启动计算机....IntelliJ 仍然没有获取我的环境变量：

Gemfile p "ENVIRONMENT: #{ENV['VAR_PRIVATE_GEM_USERNAME']}" # 输出 "ENVIRONMENT:"

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T19:50:37.693

查看相关问题：

*   [https://apple.stackexchange.com/q/51677](https://apple.stackexchange.com/q/51677)
*   [https://apple.stackexchange.com/q/57385](https://apple.stackexchange.com/q/57385)

您的问题根本不是针对 IntelliJ IDEA 的。

在第一个链接中的**Mountain Lion**解决方案将不起作用，因此您可以在终端中执行以下操作：

```
export VAR_PRIVATE_GEM_USERNAME=John
open -a /Applications/IntelliJ\ IDEA\ 11.app/ 
```

另请注意，IntelliJ IDEA 中的许多运行/调试配置允许设置自定义环境变量：

![在此处输入图像描述](../Images/1a88b734534973a10862cf474df1938d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-13T22:49:00.273

您可以使用“launchctl”在 Mac 上设置所有应用程序（不仅仅是命令行）都可用的环境变量（参见[https://ss64.com/osx/launchctl.html](https://ss64.com/osx/launchctl.html)）

```
launchctl setenv VARIABLE_NAME VALUE 
```

# jquery - 使用后退按钮时移动浏览器上的 jQuery 延迟加载

> ID：11766158
> 
> 赞同：2
> 
> 时间：2012-08-01T19:27:49.470
> 
> 标签：jquery, lazy-loading

我正在尝试使用 jquerylazyload 插件在我的 webapp 上延迟加载内容，并且在第一次加载页面时它可以完美运行。这是我使用的代码：

```
 $(".lazy").lazyload({         
        effect : "fadeIn",
        container: $("#wrapper")
    }); 
```

问题在于浏览器的向后导航。当用户进入一个新页面，然后使用延迟加载功能点击后退按钮返回到该页面时，任何不在浏览器视口内的图像将继续延迟加载，但任何在视口内最后没有的图像'在页面更改之前未完成加载和显示将不会加载。因此，在先前加载的图像和未完成图像所在的下一个加载图像之间只有空白空间。

谁能想到解决这个问题的方法，以便在导航回来时未完成加载的图像继续加载或加载新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:09:37.013

阅读了一些文档后，我能够使用以下命令在所有浏览器中运行它：

```
function myLoadHandler(evt)
{
    if (evt.persisted) {

        $(".lazy").lazyload({         
            effect : "fadeIn",
            container: $("#wrapper")
        });

        return;
    }

        $(".lazy").lazyload({         
            effect : "fadeIn",
            container: $("#wrapper")
        });
}

function myUnloadHandler(evt)
{
    if (evt.persisted) {
        $.noop();

        return;
    }

    $.noop();
}

if ("onpagehide" in window) {
    window.addEventListener("pageshow", myLoadHandler, false);
    window.addEventListener("pagehide", myUnloadHandler, false);
} else {
    window.addEventListener("load", myLoadHandler, false);
    window.addEventListener("unload", myUnloadHandler, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:35:10.310

这是由[后向缓存](https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching)引起的。更好的解释可以在问题 [Mobile Safari back button](https://stackoverflow.com/questions/11979156/mobile-safari-back-button/12652160#12652160)中找到。显然问题只影响 iOS5 Mobile Safari。这已在[1.8.2](https://github.com/tuupola/jquery_lazyload/commit/6ca5fafe22f6e991c4a8b0d59fe9328d74963d66)中修复。

# python - Python：搜索元组列表，删除整个索引

> ID：11766161
> 
> 赞同：2
> 
> 时间：2012-08-01T19:27:53.227
> 
> 标签：python, list, nlp

> **可能重复：**
> [在 Python 中迭代时从列表中删除项目](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)

我有一个相当嵌入的列表：具体来说，它是一个元组列表的列表。为简化起见，整个列表是一个句子列表。在每个句子中，每个单词都被组成一个元组，包含有关该单词的信息。每个句子中的最后一个元组包含有关说话者的信息，但如果需要，可以删除。

我想搜索这些元组，如果找到某个值，则删除整个句子。

这是一个示例列表：

```
sentenceList = [[('the', 'det', '1|2|DET'), ('duck', 'n', '2|3|SUBJ'), ('xxx', 'unk', '3|0|ROOT'), ('*MOT', 373)],
                [('yyy', 'unk', '1|0|ROOT'), ('*CHI', 375)], 
                [('what', 'pro', '1|2|OBJ'), ('happen-PAST', 'v', '2|0|ROOT'), ('to', 'prep', '3|2|JCT'), ('the', 'det', '4|5|DET'), ('duck', 'n', '5|3|POBJ'), ('*MOT', 378)], 
                [('boom', 'int', '1|0|ROOT'), ('*CHI', 379)]] 
```

如果一个句子包含`'xxx'`or `'yyy'`，我想删除整个句子。我试过的代码是：

```
wordList = ['xxx','yyy']
for sentence in sentenceList:
    for wordTuple in sentence:
        for entry in wordTuple:
            if entry in wordList:
                del sentence 
```

这应该删除整个句子，即：

```
[('the', 'det', '1|2|DET'), ('duck', 'n', '2|3|SUBJ'), ('xxx', 'unk', '3|0|ROOT'), ('*MOT', 373)], [('yyy', 'unk', '1|0|ROOT'), ('*CHI', 375)] 
```

但是，这段代码似乎没有完成任务。知道如何解决吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:35:12.673

```
wordList = set(('xxx','yyy'))
for sentence in sentenceList[:]:
    removed = False
    for wordTuple in sentence:
        for entry in wordTuple:
            if entry in wordList:
                sentenceList.remove(sentence)
                removed = True
                break
            # end of if
        # end for each entry
        if removed:
            break
    # end for each word tuple
# end for each sentence 
```

笔记：

*   迭代列表的（浅）副本以避免因修改您正在遍历的集合而产生的错误
*   从列表中删除对象，而不是简单地从本地命名空间中删除变量名
*   这对于大型数据集效率不高

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:44:18.273

在使用`for`. 你真正想要的是一个while循环：

```
contrived_data = [[(1, 1, 1), ('hello', 'bar')], [(222, 3, 4), ('norweigan', 'blue')], [('anthrax', 'ripple'), (42, 'life')]]

looking_for = (1, 'life')

index = 0
while index < len(contrived_data):
    for two_pull in contrived_data[index]:
        for item in looking_for:
            if item in two_pull:
                print(contrived_data.pop(index))
                index -= 1
                break # Only jumps out of the innermost loop
    index += 1 
```

对于更大的数据集，这应该比复制原始列表更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T21:51:09.323

[这个答案](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)类似。为了应用它，我们需要一个谓词（一个只返回`True`or的参数的函数`False`）来确定条目是否应该保留。

假设我们在一个名为 的集合中有目标词`wordList`：

```
wordList = set(('xxx', 'yyy')) 
```

这个谓词应该起作用：

```
def keep_sentence(sentence):
    for wordTuple in sentence:
        for entry in wordTuple:
            if entry in wordList:
                return False
    return True  # Only executed if we didn't return false earlier 
```

现在我们有了一个谓词，我们可以只用告诉我们应该保留`sentenceList`的句子替换 of 的内容：`keep_sentence`

```
sentenceList[:] = [x for x in sentenceList if keep_sentence(x)] 
```

就将其应用于大型数据集而言 - 如果不并行化您的代码，可能不会有比这（或其他答案之一）更快的算法。为什么？为了检查每个句子不包含目标词之一，我们必须查看每个句子中的每个词。您可能可以通过某个恒定因素减少花在每个句子上的时间，但这并没有很大的帮助。

如果您对此感兴趣，您可能想查看该[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)模块，尤其是[进程池](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)。

# php - PHP Parse 错误：语法错误，意外 T_IS_EQUAL，期待

> ID：11766162
> 
> 赞同：1
> 
> 时间：2012-08-01T19:27:53.113
> 
> 标签：php, syntax, isset

我收到以下错误：

```
PHP Parse error:  syntax error, unexpected T_IS_EQUAL, expecting ','
or ')' in C:\etc\display.php on line 115 
```

display.php的第115行：

`if ((!isset($_POST['login']==NULL) OR !isset($_POST['passwd']==NULL))) msgerror("<font size=4>Fill all the missing fields and try again.</font>");`

我确定这是使用 ISSET 的语法问题，但我就是无法摆脱这个错误并让它工作（对不起，我是个新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:31:03.197

应该

```
if ( !isset($_POST['login']) || !isset($_POST['passwd']) ) { 
    msgerror("Fill all the missing fields and try again."); 
} 
```

更多信息`isset`： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

逻辑运算符：http: [//php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:29:26.017

只需删除`==NULL`s，它们是完全没有必要的，我不确定我能弄清楚你为什么首先将它们放在那里......

此外，最好使用`||`而不是`or`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:35:59.080

尝试这个 ：

```
if (!isset($_POST['login']) || empty($_POST['login']) || !isset($_POST['passwd']) || empty($_POST['passwd']))
msgerror("<font size=4>Fill all the missing fields and try again.</font>"); 
```

# three.js - 在three.js中导入模型后的智能居中和缩放

> ID：11766163
> 
> 赞同：8
> 
> 时间：2012-08-01T19:27:58.447
> 
> 标签：three.js

有没有办法确定模型的大小和位置，然后自动居中和缩放模型，使其定位在原点和相机视图内？我发现当我从 Sketchup 导入 Collada 模型时，如果模型在 Sketchup 中没有以原点为中心，那么它在 three.js 中也没有居中。虽然这是有道理的，但在导入后自动居中到原点会很好。

我在不同的文件加载器中看到了一些关于获取导入模型边界的讨论，但我一直找不到任何关于如何做到这一点的参考。

缩放问题不太重要，但我觉得它与边界函数有关，这也是我问它的原因。

编辑：

玩了一会儿和更多谷歌搜索后的更多信息......

我在加载 collada 文件时的回调函数的代码现在如下所示：

```
loader.load(mURL, function colladaReady( collada ) {

dae = collada.scene;
skin = collada.skins[ 0 ];

dae.scale.x = dae.scale.y = dae.scale.z = 1;
dae.updateMatrix();

//set arbitrary min and max for comparison              
var minX = 100000;
var minY = 100000;
var minZ = 100000;
var maxX = 0;
var maxY = 0;
var maxZ = 0;

var geometries = collada.dae.geometries;               
for(var propName in geometries){
if(geometries.hasOwnProperty(propName) && geometries[propName].mesh){
    dae.geometry = geometries[propName].mesh.geometry3js;
    dae.geometry.computeBoundingBox();
    bBox = dae.geometry.boundingBox;
    if(bBox.min.x < minX) minX = bBox.min.x;
    if(bBox.min.y < minY) minY = bBox.min.x;
    if(bBox.min.z < minZ) minZ = bBox.min.z;
    if(bBox.max.x > maxX) maxX = bBox.max.x;
    if(bBox.max.y > maxY) maxY = bBox.max.x;
    if(bBox.max.z > maxZ) maxZ = bBox.max.z;
}
}
//rest of function.... 
```

这会生成一些关于模型的有趣数据。我可以获得模型的整体极端坐标，我假设（可能不正确）将接近模型的整体边界框。但是尝试对这些坐标做任何事情（例如平均并将模型移动到平均值）会产生不一致的结果。

此外，必须遍历模型的每个几何图形似乎效率低下，有没有更好的方法？如果不是，这个逻辑可以应用到其他加载器上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-30T18:33:19.910

您可以使用[`THREE.Box3#setFromObject`](http://threejs.org/docs/#Reference/Math/Box3)获取任何 Object3D 的边界框，包括导入的模型，而无需自己循环遍历几何。所以你可以做类似的事情

```
var bBox = new THREE.Box3().setFromObject(collada.scene); 
```

得到模型的极端边界框；那么您可以使用 gaitat 链接的答案中的任何技术来正确设置相机位置。例如，您可以遵循这种技术（[如何将相机拟合到对象](https://stackoverflow.com/questions/14614252/how-to-fit-camera-to-object)）并执行以下操作：

```
var height = bBox.size().y;
var dist = height / (2 * Math.tan(camera.fov * Math.PI / 360));
var pos = collada.scene.position;
camera.position.set(pos.x, pos.y, dist * 1.1); // fudge factor so you can see the boundaries
camera.lookAt(pos); 
```

快速小提琴：http: [//jsfiddle.net/p19r9re2/](http://jsfiddle.net/p19r9re2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T02:42:25.787

试试geometry.center()

```
center: function () {

    var offset = new Vector3();

    return function center() {

        this.computeBoundingBox();

        this.boundingBox.getCenter( offset ).negate();

        this.translate( offset.x, offset.y, offset.z );

        return this;

    };

}(), 
```

# php - PHP IMAP 向 iPhone 推送电子邮件通知

> ID：11766165
> 
> 赞同：3
> 
> 时间：2012-08-01T19:28:01.183
> 
> 标签：php, iphone, imap

我正在开发一个 PHP 脚本，该脚本通过 IMAP 定期检查用户的收件箱是否有新消息。该脚本与 IMAP 服务器保持开放连接，并每 5 秒获取最新消息的 UID。如果 UID 大于最初记录的比较 UID，则脚本向用户的 iPhone 发送推送通知，通知他/她有新消息可用，将新 UID 记录为比较 UID，并继续检查新消息以这种方式。这是脚本：

```
<?php
$server = '{imap.gmail.com:993/ssl}';
$login = 'email_address@gmail.com';
$password = 'my_email_password';
$connection = imap_open($server, $login, $password) OR die ("can't connect: " . imap_last_error());

$imap_obj = imap_check($connection);
$number = $imap_obj->Nmsgs;
$uid = imap_uid($connection, $number);

//infinite loop, need to add some sort of escape condition...
for(;;){

$imap_obj = imap_check($connection);
$number = $imap_obj->Nmsgs;

    //if there is a new message send push notification
    if(imap_uid($connection, $number) > $uid){

    $uid = imap_uid($connection, $number);

$result = imap_fetch_overview($connection,$number,0);

$message = $result[0]->subject;

                $deviceToken = 'xxxxxxxxxxxxxxxxxx';
                $passphrase = 'my_secret_password';

                $ctx = stream_context_create();
                stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
                stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

                $fp = stream_socket_client(
                    'ssl://gateway.sandbox.push.apple.com:2195', $err,
                    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

                if (!$fp)
                    exit("Failed to connect: $err $errstr" . PHP_EOL);

                echo 'Connected to APNS' . PHP_EOL;

                // Create the payload body
                $body['aps'] = array(
                    'alert' => $message,
                    'sound' => 'default'
                    );

                // Encode the payload as JSON
                $payload = json_encode($body);

                // Build the binary notification
                $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

                // Send it to the server
                $result = fwrite($fp, $msg, strlen($msg));

                if (!$result)
                    //echo 'Message not delivered' . PHP_EOL;
                else
                    //echo 'Message successfully delivered' . PHP_EOL;

                // Close the connection to the server
                fclose($fp);

    }

sleep(5);
}

imap_close($connection);
?> 
```

这行得通。但这对我来说似乎非常低效。每个额外的用户都与 IMAP 服务器保持无限连接，并每隔几秒钟检查一次新消息，这似乎很愚蠢。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:32:02.910

你不能使用像 CRON 这样的东西来安排一个脚本每 30 秒运行一次，它会为每个用户保留最后一个 UID 的数据库记录，然后在本地搜索每个用户邮箱（通过本地 shell 而不是 imapd 连接），如果特定用户有一条新消息，推送通知并更新数据库中该用户的最新 UID...

这是假设 PHP 脚本位于邮件服务器上并且您具有 root 访问权限。

# spring - 让 Spring 计划任务与任务执行器线程一起运行

> ID：11766170
> 
> 赞同：4
> 
> 时间：2012-08-01T19:28:09.913
> 
> 标签：spring, jakarta-ee, websphere, workmanagers

**背景：** 我在我的 Websphere 7 应用程序中使用 Spring 3.0.x 来获取 CommonJ WorkManager 和 TimerManager。我使用它们在我部署的应用程序中以特定间隔执行任意任务。

**问题：**

我刚刚了解到，在调度程序中设置 bean 时，如下所示：

```
<bean id="threadTest" class="test.ThreadTester" />

<task:scheduled-tasks scheduler="myTimerExecutor">
    <task:scheduled ref="threadTest" method="execute" fixed-delay="300000" />
</task:scheduled-tasks> 
```

在 Websphere 中，它将`ThreadTester`直接在 TimerManager 线程池中运行该类。这个线程池比 WorkManager 线程池具有更高的优先级（并且线程更少）。我希望线程与 WorkManager 一起运行，而不是具有适当的优先级并使用为线程设置的适当资源。

作为替代方案，我可以像这样`@Scheduled`在类中使用 Spring 注释，而不是像上面那样在调度程序中设置 bean `ThreadTester`：

```
@Scheduled(fixedDelay = 300000)
public void execute() {
    ...
} 
```

**问题：**

使用`@Scheduled`注解使调度的类运行在 TimerManager 线程池还是 WorkManager 线程池中？

如果它使用 WorkManager 运行，那就太好了！这解决了我的问题。但是，如果它使用 TimerManager 直接执行该类，那么我想我必须编写一些包装器才能正确调用 WorkManager。

谢谢你的帮助！

**编辑：**这里我介绍了如何使用 Websphere 7 commonj 实现设置调度程序和执行程序：

```
<bean id="myTaskExecutor" class="org.springframework.scheduling.commonj.WorkManagerTaskExecutor"> 
    <property name="workManagerName" value="wm/default" />
    <property name="resourceRef" value="true"/>
</bean>

<bean id="myTaskScheduler" class="org.springframework.scheduling.commonj.TimerManagerTaskScheduler"> 
    <property name="timerManagerName" value="tm/default" />
    <property name="resourceRef" value="true" />
    <property name="shared" value="false" />
</bean>

<task:annotation-driven executor="myTaskExecutor" scheduler="myTaskScheduler" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:15:32.780

好吧，我发现是的，确实，`@Scheduled`bean 是在 Websphere 7 的 TimerManager 线程池中运行的。

我所要做的就是吐出线程的堆栈跟踪以查看调用它的层次结构。

```
for(StackTraceElement element: Thread.currentThread().getStackTrace()) {
    logger.debug(element.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:15:43.330

查看 Spring 文档，您似乎必须使用特定的 TaskScheduler 才能在 TimerManager 线程池 - [TimerManagerTaskScheduler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/commonj/TimerManagerTaskScheduler.html)中运行。

```
<bean name="scheduler" class="org.springframework.scheduling.commonj.TimerManagerTaskScheduler">
...
</bean>

<task:scheduled-tasks scheduler="scheduler">
    <task:scheduled ref="threadTest" method="execute" fixed-delay="300000" />
</task:scheduled-tasks> 
```

# c# - 从另一个网站调用一个网站上的网络服务；都托管在同一台服务器上

> ID：11766171
> 
> 赞同：0
> 
> 时间：2012-08-01T19:28:13.663
> 
> 标签：c#, web-services, iis, dns

我有一台服务器在一个 IP 下为多个网站提供服务，并绑定了特定的 URL。

但是，我托管的其中一个站点需要从位于同一服务器上的另一个 IIS 网站中的 Web 服务（.asmx 文件）中提取数据。该代码在本地运行良好，但是当我们将代码推送到我们的服务器时，似乎无法在本地解析查找。（得到可怕的“无法建立连接，因为目标机器主动拒绝它”。我认为正在发生的事情是它尝试使用端点地址并进行 DNS 查找，但是因为 DNS 查找最终解析为相同的 IP，它实际上是通过内存或管道或其他东西而不是网络来吸引流量，这导致 IIS 无法绑定到正确的站点，因此整个事情都陷入困境。

有没有办法可以使用 Windows 主机文件或其他机制来解决这个明显的 DNS 问题？也许有人可能会对此有所了解，也许根本就不是 DNS。谢谢！

更新 - 以下是相关域的快速细分。没有什么特别编码或指向“本地主机”。一切都在使用完全限定的域名。

DomainA.com 是一个网站，当提交表单时，它会从 DomainB.com 调用 Web 服务。DomainA.com 和 DomainB.com 都是在绑定到相同外部 IP 地址的同一台服务器上的 IIS 中设置的“网站”。我*认为*问题在于 DomainA.com 在提交表单时会对 DomainB.com 进行 DNS 查找，当它发现域是相同的 IP 地址时，在制作时不使用域名对 DomainB.com 的请求。如果没有使用/发送域名，IIS 不知道要连接到哪个站点，并且“目标机器主动拒绝”连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:37:54.887

您是否必须在配置文件中定位到您的网络服务？

查看您生成的代理类来使用它。主机通常被硬编码到该文件中。

如果您没有使用生产主机创建该文件（或服务引用），则它指向您的开发 Web 服务。这将无法从您的生产机器访问。

# xml - Marklogic DB 中的节点更新

> ID：11766172
> 
> 赞同：0
> 
> 时间：2012-08-01T19:28:25.670
> 
> 标签：xml, marklogic

我有多个员工 xml 文档使用 doc uri (/employee/*.xml) 保存在 ML DB 中，我想从新 XML 中获取更新，其中唯一引用键是 roleID（在 ML XML 中它的 roleID 和在新 XML 中它是 newroleID ）。每当找到匹配项时，它应该用新的 XMl 的 newFirstName 更新 ML xml 的 firstName 值，用 newlastName 更新 lastname 值，用新的 dep 更新 dep，xml 结构的其余部分应该保持不变。

Marklogic XML 结构如下：

```
 doc uri /employee/1.xml
    <employee>
        <firstName>Jim</firstName>
        <lastName>Day</lastName>
        <dep>IT</dep>
        <city>Boston</city>
        <roleID>1111<roleID>
        <internalID>2222</internalID>
    </employee>

    doc uri /employee/2.xml
    <employee>
        <firstName>Jan</firstName>
        <lastName>Silly</lastName>
        <dep>Finance</dep>
        <city>DC</city>
        <roleID>3333<roleID>
        <internalID>4444</internalID>
    </employee>

    doc uri /employee/3.xml
    <employee>
        <firstName>Jack</firstName>
        <lastName>John</lastName>
        <dep>HR</dep>
        <city>Virginia</city>
        <roleID>5555<roleID>
        <internalID>6666</internalID>
    </employee> 
```

我正在尝试这个但不确定如何更新文档，它似乎也没有优化 xquery，请帮助。

```
 let $newXML := <employees>
                        <newemployee>
                            <NewfirstName>New Fname1</newfirstName>
                            <newlastName>New Lname1</newlastName>
                            <newdep>New Dep1</newdep>
                            <newcity>Boston</newcity>
                            <newroleID>1111<newroleID>
                            <internalID>2222</internalID>
                        </newemployee>
                        <newemployee>
                            <newfirstName>New Fname2</newfirstName>
                            <newlastName>New Lname</newlastName>
                            <newdep>New Dep</newdep>
                            <newcity>Boston</newcity>
                            <newroleID>5555<newroleID>
                            <newinternalID>6666</newinternalID>
                        </employee>
                    </employees>
    for $oldXML in doc("/employee/*.xml")/employee
        where $newXML/newemployee/newroleID eq $oldXML/roleID
        return
          for $Matched in $oldXML
            return
            let $finalXML := 
                (: Not sure how to update some nodes in given URI, where rest of structure remain same :)

                <employee>
                    <firstName>{$newXML/newemployee/newfirstName/text()}</firstName>
                    <lastName>{$newXML/newemployee/newlastName/text()}</lastName>
                    <dep>{$newXML/newemployee/newdep/text()}</dep>              
                </employee> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:55:06.300

请参阅[xdmp:node-replace](http://developer.marklogic.com/pubs/4.2/apidocs/UpdateBuiltins.html#xdmp%3anode-replace)

从文档示例中：

```
(: insert the doc :)
xdmp:document-insert("/example.xml", <a><b>bbb</b></a>);
(: replace the b node in the doc with this c node :)
xdmp:node-replace(doc("/example.xml")/a/b, <c>ccc</c>);
doc("/example.xml") => <a><c>ccc</c></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:23:30.903

表达式`doc("/employee/*.xml")`不起作用。使用`xdmp:directory`will，前提是创建目录（自动或手动）。或者，如果启用了 URI 词典，您可以使用它`cts:uri-match`来查找员工的 uri，然后将它们传递给。`doc()`

但是..您方法中最大的瓶颈是遍历所有文档。那是没有必要的。如果 roleID 是唯一的，则将其用于 uri，因此您无需遍历所有文档，只需立即打开正确的文档即可。或者，使用可由 XQuery 处理器优化的表达式，或仅依赖于索引。类似于以下内容：

```
doc()[//roleID = $newRoleID] 
```

或者：

```
cts:search(doc(), cts:element-value-query(xs:QName("roleID"), $newRoleID)) 
```

对于更新本身，您可以`xdmp:node-replace`按照@sgarrett 的建议使用和关联，但您也可以简单地重新创建整个 XML，并使用 xdmp:document-insert 完全替换它。无论如何，该文档完全在幕后替换，因此您几乎不会注意到与如此小的文档有任何区别。

！

# jquery - facebook风格的下拉菜单

> ID：11766173
> 
> 赞同：2
> 
> 时间：2012-08-01T19:28:26.063
> 
> 标签：jquery, css, drop-down-menu

我正在尝试使用此下拉菜单：[http ://ttb.li/dump/buttons/dropdown.html](http://ttb.li/dump/buttons/dropdown.html)

在我的网站上，这看起来很好并且可以正常工作，但是打开的窗口放置在不正确的高度并且离右边很远（**在我的网站上**）。在**jsfiddle 上**它只是放置得太高了，但至少水平是正确的。

代码：http: [//jsfiddle.net/EA6LS/1/](http://jsfiddle.net/EA6LS/1/)

我从网站的演示中复制并粘贴了这个，我看不到我可能遗漏的任何内容......感谢您的想法。

**更新**

好吧，我只是想到了一些东西。在我的网站上，我将页面宽度定义为 900 像素。如果我在 firefox 上使用“inspect”，我可以看到 JS 为下拉菜单分配了 215px（给或取）左边距。这在我的屏幕上可能是准确的。但是，它将元素移动到我定义的 900px 区域的左侧，而不是在我的屏幕上.... 那么这可能是一个`relative`问题`absolute`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:59:08.227

You can remove the JavaScript code that positions the dropdown and just define it in the CSS. If you position `.dropdown` relatively, `.dropdown_content` will be positioned relative to it's parent, which makes positioning easy:

```
.dropdown {
    ...
    position: relative;
}
.dropdown .dropdown_content {
    ...
    top: 100%;
    left: 0;
    margin: 5px 0;
} 
```

Remove these lines of JavaScript:

```
var o = $(this).parent().find('.dropdown_button').offset();
var h = $(this).parent().find('.dropdown_button').height();
$(this).parent().find('.dropdown_content').css({'top':(o.top+h-1),'left':o.left}); 
```

(That is where your inline `top` and `left` values are coming from.)

Also, remove `overflow: hidden` from your `body` style definition.

**Working demo:** [http://jsfiddle.net/gilly3/EA6LS/2/](http://jsfiddle.net/gilly3/EA6LS/2/)

I also usually think it's a good idea to uncheck "Normalized CSS" in jsfiddle. When debugging CSS, that can lead to confusing results.

While you're at it... that JavaScript can be simplified: [http://jsfiddle.net/gilly3/EA6LS/4/](http://jsfiddle.net/gilly3/EA6LS/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:39:55.587

下拉菜单中的内容的顶部边距为 11 像素，但目前我无法确定它的定义位置。

在 css 中正确定义它似乎可以解决您的高度偏移问题。

```
.dropdown.open .dropdown_content {
    display: block;
    margin-top: 11px;    
} 
```

编辑：似乎在 chrome 中用户代理的 ul、menu 和 dir 样式表有

```
-webkit-margin-before: 1em; 
```

这是罪魁祸首（至少对我来说）

EDIT2：他们已经内联了css（通过jQuery以错误的方式），这也是你得到偏移错误的原因

```
<ul class="dropdown_content" style="top: 135px; left: 164px; "> 
```

See [this jsfiddle](http://jsfiddle.net/nickbabcock/EA6LS/3/) for the "correct" looking drop down. As per in the comment, here are the changes (note that in the javascript I deleted the part where it was setting the top of the drop down content):

*CSS*

```
.dropdown.open .dropdown_content {
    display: block;
    margin-top: 0px;    
} 
```

*javascript*

```
$(this).parent().find('.dropdown_content').css({'left':o.left}); 
```

# php - 使用 PDO 检查行是否存在

> ID：11766174
> 
> 赞同：0
> 
> 时间：2012-08-01T19:28:26.363
> 
> 标签：php

我无法检查是否存在用于登录某人的行。使用密码+我正在使用 PDO 的电子邮件在数据库中对密码进行了盐渍化。

```
function is_valid_developer($username, $password)
{
    global $db;
    $query = 'SELECT COUNT(*) FROM users WHERE username = :username AND password = sha(CONCAT(:password,(SELECT email FROM users WHERE username = :password))) AND developer = true';
    $statement = $db->prepare($query);
    $statement->bindValue(':username', $username);
    $statement->bindValue(':password', $password);
    $statement->execute();
    $count = $statement->fetchColumn();
    if ($count === 1)
    {
        return TRUE;
    }
    else 
    {
        return FALSE;   
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:31:40.803

您的子查询似乎不正确（请参阅`WHERE username = :password`子句），并且可能永远不会返回任何结果。此外，PDO 不支持两次使用相同的绑定参数（您使用`:password`两次）。除此之外，您实际上根本不需要子查询。试试这个查询：

```
SELECT COUNT(*) FROM users
WHERE username = :username
  AND password = sha(CONCAT(:password, email))
  AND developer; 
```

此外，请确保您在致电`$statement->closeCursor()`后致电`$statement->fetchColumn()`；完成后让 PDO 语句游标保持打开状态可能会导致数据库在*以后的所有查询*中失败。

# objective-c - NSTableView 窃取 -mouseUp：从 NSView 兄弟内部开始的鼠标拖动序列

> ID：11766180
> 
> 赞同：4
> 
> 时间：2012-08-01T19:28:42.310
> 
> 标签：objective-c, cocoa, nstableview, drag, mouseup

`NSView` *A*包含一个`NSTableView`（在一个`NSScrollView`），一个子`NSView` *B*，并通过实现来监听鼠标事件`-mouseDown/Dragged/Up:`。`NSView` *B*没有实现这两种方法，所以原来`NSResponder`的方法应该将相应的消息转发给它的下一个响应者（父视图）。

当鼠标在内部单击，从`NSView` *B*拖动，并在除 之外的任何对象上释放时`NSTableView`，整个拖动序列（向下/拖动/向上）正常发送到父视图。

**但是，如果在 上释放鼠标`NSTableView`，则`-mouseUp:`消息永远不会发送到父视图**。相反，它被 NSTableView 窃取。

这种行为可以通过继承`NSView` *B*并实现`-mouseUp:`消息来改变为正常行为，以便它简单地将事件传递给它的下一个响应者（正是原始 NSResponder 方法应该做的）。

在 OSX 10.7.4/Xcode 4.4 上观察到。可以从这里下载一个测试项目：[http ://www.filefactory.com/file/41ung2am0aax/n/TestDragging_zip](http://www.filefactory.com/file/41ung2am0aax/n/TestDragging_zip)

这是预期的行为还是错误？

# mono - Unity3D 中的 IronPython

> ID：11766181
> 
> 赞同：24
> 
> 时间：2012-08-01T19:28:46.577
> 
> 标签：mono, ironpython, unity3d

我正在尝试使用 IronPython 作为 Unity3D 的外部脚本语言。IronPython 执行所需的 DLL 在 Assets\Plugins 中加载得很好。但是，当我尝试运行脚本时，出现此错误：

```
PythonImportErrorException: No module named UnityEngine
IronPython.Modules.Builtin.__import__ (IronPython.Runtime.Calls.ICallerContext,string,object,object,object) <IL 0x0003b, 0x001cc>
(wrapper dynamic-method) object.__import__##5 (IronPython.Runtime.Calls.ICallerContext,object,object,object,object) <IL 0x0000e, 0x0004d>
IronPython.Runtime.Calls.FastCallableWithContextAny.Call (IronPython.Runtime.Calls.ICallerContext,object,object,object,object) <IL 0x00015, 0x00067>
IronPython.Runtime.Calls.BuiltinFunction.Call (IronPython.Runtime.Calls.ICallerContext,object,object,object,object) <IL 0x0000d, 0x00058>
IronPython.Runtime.Operations.Ops.CallWithContext (IronPython.Runtime.Calls.ICallerContext,object,object,object,object,object) <IL 0x00012, 0x000b0>
IronPython.Runtime.Importer.Import (IronPython.Runtime.PythonModule,string,IronPython.Runtime.List) <IL 0x0000d, 0x0006c>
IronPython.Runtime.Operations.Ops.Import (IronPython.Runtime.PythonModule,string) <IL 0x00007, 0x0003b>
(wrapper dynamic-method) object.<string>##1 (IronPython.Runtime.ModuleScope) <IL 0x0006b, 0x00210> 
```

该脚本和“UnityEngine.dll”位于同一文件夹中。这是脚本：

```
import clr
clr.LoadAssemblyFromFile("UnityEngine.dll")

import UnityEngine
from UnityEngine import *

Debug.Log("Hello World from Python!") 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T20:25:13.437

因此，从 Unity 脚本中：

```
PythonEngine engine = new PythonEngine();
engine.LoadAssembly(Assembly.GetAssembly(typeof(GameObject)));
engine.ExecuteFile("apple.py"); 
```

在 python 脚本中（我的是 apple.py，与 game.exe 位于同一文件夹中）：

```
import UnityEngine
from UnityEngine import *

Debug.Log("Hello From IronPython!") 
```

# 编辑#1

我应该注意到我之前收到错误的原因是因为运行时版本被指定为 4.0 而不是 3.5 或更低版本。

# 编辑#2

如果您需要从 IronPython 访问您的脚本，那么您也可以通过以下方式加载您的程序集：

```
engine.LoadAssembly(Assembly.GetAssembly(typeof(MyPlayerScriptOrSomething))); 
```

然后在脚本中使用它：

```
import MyPlayerScriptOrSomething 
```

请注意，您不必为每个脚本都执行 LoadAssembly，只需一次即可获取程序集。

# 编辑#3

IronPython DLL 应该放在“Assets”下的某个“Plugins”文件夹中（最简单的是：Assets->Plugins。这是我的设置：

```
> Assets
> > Plugins
> > > IronMath.dll
> > > IronPython.dll
> > > Microsoft.Scripting.dll
> > > Microsoft.Scripting.Core.dll 
```

# 编辑#4

您的脚本可以放在您的程序可以访问它们的任何地方。例如，如果您想将“apple.py”直接放在“C:\”下，您可以执行该文件：

```
engine.ExecuteFile(@"c:\apple.py"); 
```

# 编辑#5

我使用的版本是：

![在此处输入图像描述](../Images/aff4f35d200dadc0461726122744e36f.png)

# c - 包含 C 库的路径

> ID：11766182
> 
> 赞同：0
> 
> 时间：2012-08-01T19:28:49.513
> 
> 标签：c, gcc

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

我正在创建一个共享的 C 库。包含时有什么区别

```
#include <mylib/someheader.h> 
```

相对

```
#include "mylib/someheader.h" 
```

来自这个库的文件`*.c`或文件？`*.h`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:31:37.453

第一个版本用于系统头文件，第二个版本用于外部头文件。不过，大多数编译器都会找到正确的头文件，不管是什么符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:31:08.767

取决于编译器。其中一些可能在“系统”包含路径和“只是”包含路径之间有所不同。<> 表示系统包含路径

# string - 使用自定义源和查询字符串的 CloudFront 失效

> ID：11766185
> 
> 赞同：1
> 
> 时间：2012-08-01T19:29:01.757
> 
> 标签：string, cdn, amazon-cloudfront

我在使用查询字符串数据使 CloudFront 缓存内容无效时遇到问题。

例如，假设我试图使以下内容无效：

[http://d114hh0cykwyb0.cloudfront.net/imagesizer.php?h=80&src=/images/foo.jpg](http://d114hh0cykwyb0.cloudfront.net/imagesizer.php?h=80&src=/images/foo.jpg)

我使用AWS SDK发送失效路径，即：/imagesizer.php?h=80&src=/images/foo.jpg

然后我将进入 AWS 控制台->CloudFront->分发设置->无效

我看到了我的新失效请求。如果我看到上面的“详细信息”，对象路径会显示：/imagesizer.php%3Fh%3D80%26src%3D/images/foo.jpg

所以路径已经被编码。但是，失效完成后， [http://d114hh0cykwyb0.cloudfront.net/imagesizer.php](http://d114hh0cykwyb0.cloudfront.net/imagesizer.php?h=80&src=/images/foo.jpg) ?h=80&src=/images/foo.jpg 保持不变。

我还尝试使用 AWS 控制台中的“创建无效”，使用路径：/imagesizer.php?h=80&src=/images/foo.jpg

但我收到一个 XML 解析错误（因为 URL 未编码）。

以前有没有人处理过这种问题？你能找到解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-08-08T08:42:54.157

使用失效的一个非常简单的方法是使用第三方工具。我个人使用 CloudBerry - > [http://www.cloudberrylab.com/](http://www.cloudberrylab.com/)

# objective-c - 我们如何测量 Cocoa 中文本的可见边界？

> ID：11766189
> 
> 赞同：4
> 
> 时间：2012-08-01T19:29:22.580
> 
> 标签：objective-c, macos, cocoa, text, fonts

下面列出的方法都没有给出 Cocoa 中文本的确切可见边界。我们如何获得它？

*   `NSString`的`boundingRectWithSize:options:attributes:`
*   `NSAttributedString`的`boundingRectWithSize:options:`
*   `NSLayoutManager`的`usedRectForTextContainer:`

为了说明这一点，[这里是](http://ScrnSht.com/juixwk)使用上述第二种方法的结果的屏幕截图，如[示例代码片段](http://pastebin.com/t38EceGT)所示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:40:10.610

其实，从排版的角度来看，方框是正确的，但字体超出了自己的界限。您可以尝试`NSStringDrawingUsesDeviceMetrics`使用字形边界而不是印刷边界的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:52:37.757

这是我编写的解决方案。非常欢迎任何改进建议。
代码片段：[http](http://pastebin.com/qJMKwvau)
://pastebin.com/qJMKwvau 截图：http: [//ScrnSht.com/jskyqs](http://ScrnSht.com/jskyqs)

# c# - 如果表单上没有其他控件，图形就会消失

> ID：11766191
> 
> 赞同：1
> 
> 时间：2012-08-01T19:29:23.767
> 
> 标签：c#, system.drawing

这是我的代码

```
private void graphToolStripMenuItem_Click(object sender, EventArgs e)
        {

            button1.Visible = false;
            button2.Visible = false;
            button3.Visible = false;
            button4.Visible = false;
            label1.Visible = false;
            textBox1.Visible = false;
            textBox2.Visible = false;
            textBox3.Visible = false;
            textBox4.Visible = false;
            textBox5.Visible = false;
            textBox6.Visible = false;
            textBox7.Visible = false;
            textBox8.Visible = false;
            textBox9.Visible = false;
            textBox10.Visible = false;
            label2.Visible = false;
            label3.Visible = false;
            label4.Visible = true;
            gg = this.CreateGraphics();
            p3 = new Pen(Color.Blue,5);
            b1 = new SolidBrush(Color.Red);
            p2 = new Pen(Color.Red);
            Font f=new Font("Arial",16);
            float ox = this.ClientSize.Width / 2;
            float oy = this.ClientSize.Height / 2;
            gg.DrawLine(p3, ox - 500, oy, ox + 500, oy);
            gg.DrawLine(p3, ox, oy + 300, ox, oy - 300);
            gg.DrawString("Argument", f, b1, ox - 100, oy - 200);
            gg.DrawString("<----f(Argument)---->", f, b1, ox + 100, oy + 100);
            for (int i = 0; i < 1000; i++)
            {
                double tem1 = graphValuesCal();
                double temp2 = functionCal();
                gg.FillEllipse(b1, ox + (float)tem1/2,oy-20*(float)temp2, (float)5, (float)5);
                Thread.Sleep(10);
            }

        } 
```

当我运行此代码时，会绘制图表，但是当循环完成图表以及字符串和线条（轴）消失时。如果我注释掉这段代码

```
 button1.Visible = false;
                button2.Visible = false;
                button3.Visible = false;
                button4.Visible = false;
                label1.Visible = false;
                textBox1.Visible = false;
                textBox2.Visible = false;
                textBox3.Visible = false;
                textBox4.Visible = false;
                textBox5.Visible = false;
                textBox6.Visible = false;
                textBox7.Visible = false;
                textBox8.Visible = false;
                textBox9.Visible = false;
                textBox10.Visible = false;
                label2.Visible = false;
                label3.Visible = false; 
```

意味着如果所有这些控件之前都是可见的，那么当我单击该`Graph menu`项目时它们将保持可见。然后线条和图表不会消失这里可能有一些基本的东西，但我想我错过了那个。需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:32:42.440

不要在你的菜单中点击。相反，`Invalidate()`并在随后的`OnPaint`覆盖中绘制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:33:31.193

您的绘图应该在`OnPaint`事件方法中完成。

在您的表单上遵守`OnPaint`事件并将您的绘画添加到该方法中，如下所示：

```
// Put this in your constructor, or use VisualStudio to create the method for you
this.Paint += new System.Windows.Forms.PaintEventHandler(this.paint_Method);

private void paint_Method(object sender, PaintEventArgs e)
{ 
     gg = e.Graphics;
     p3 = new Pen(Color.Blue,5);
     b1 = new SolidBrush(Color.Red);
     p2 = new Pen(Color.Red);
     Font f=new Font("Arial",16);
     float ox = this.ClientSize.Width / 2;
     float oy = this.ClientSize.Height / 2;
     gg.DrawLine(p3, ox - 500, oy, ox + 500, oy);
     gg.DrawLine(p3, ox, oy + 300, ox, oy - 300);
     gg.DrawString("Argument", f, b1, ox - 100, oy - 200);
     gg.DrawString("<----f(Argument)---->", f, b1, ox + 100, oy + 100);
     for (int i = 0; i < 1000; i++)
     {
         double tem1 = graphValuesCal();
         double temp2 = functionCal();
         gg.FillEllipse(b1, ox + (float)tem1/2,oy-20*(float)temp2, 5f, 5f);
         // Thread.Sleep(10);
     }
} 
```

您可能也想`this.Invalidate()`在您的`graphToolStripMenuItem_Click`方法中调用，并记住我在此处移动的代码应该从该方法中删除。

# jquery - jQuery 添加项目

> ID：11766195
> 
> 赞同：0
> 
> 时间：2012-08-01T19:29:35.100
> 
> 标签：jquery, wordpress, click

所以，我在这里要做的是`onClick`添加另一个`<li>`与上面完全相同的。我在 PHP 中创建了一个 for 循环，以在其中创建适当的字段`<li>`。

我遇到的问题：当您单击`.repatable-add`按钮时，我会收到两次“替换前”警报，而“替换后”警报根本不会触发。**和想法？**

```
jQuery('.repeatable-add').click(function() { 
    field = jQuery(this).siblings('ul.image-details').find('li:last').clone(true);  
    fieldLocation = jQuery(this).siblings('ul.image-details').find('li:last');  
    jQuery('input', field).val('').attr('name', function(index, name) {
            alert(name +' before replace');
            return name.replace(/(\d+)/, function(fullMatch, n) {  
            return Number(n) + 1;  
            alert(name +' after replace');
        });  
    })  
    field.insertAfter(fieldLocation, jQuery(this).siblings('ul.image-details').find('li:last'))  
    return false;  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:35:33.977

在警报之前有一个返回，所以警报永远不会被执行：

```
{  
            return Number(n) + 1;  
            alert(name +' after replace');
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:35:55.893

好吧，“替换后”的警报根本不会触发，因为它之前有一个返回语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:55:30.037

不完全确定您在使用该输入部分做什么，但我认为这是因为您在返回后尝试做一些事情。这是我所拥有的：

```
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery('.repeatable-add').click(function(){
            var copyThis = jQuery(".image-details").find("li:last").clone(true);
            jQuery(".image-details").append(copyThis);
            var name = jQuery("input").attr("name");
            var count = name.replace(/\d+/, '');
            var newCount = count++;
            jQuery("input").attr("name",name.replace(newCount.toString(),count.toString()));
        return false;  
    });  
});
</script>

<ul class="image-details">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<input name="ithas1" />
<button class='repeatable-add'>button</button> 
```

# java - 无法将数据从一个 Activity 编辑和保存到另一个 Activity

> ID：11766199
> 
> 赞同：0
> 
> 时间：2012-08-01T19:30:00.617
> 
> 标签：java, android

目前正在开发一个使用 php 作为 API 从 SQL 检索数据的 android 应用程序。

我可以查看一个活动，但是当我转到下一个活动进行编辑时，它只显示空内容。

[我在此处](https://codereview.stackexchange.com/questions/14223/trouble-edit-and-save-data-from-one-activity-to-another-activity)的代码审查站点中发布了完整代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:57:26.773

```
btnEdit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(ViewRequestActivity, EditRequestActivity.class);
            i.putExtra("DATA", "" + your_value);

            startActivity(i);

        }
    }); 
```

在 EditRequestActivity 中获取此“DATA”值。

```
 Bundle receiveBundle = this.getIntent().getExtras();
    String data= receiveBundle.getString("DATA"); 
```

然后在您的编辑文本中设置此值。

```
 txtTitle.setText(data); 
```

# javascript - Js - 页面重新加载后仅工作一次的事件监听器

> ID：11766205
> 
> 赞同：2
> 
> 时间：2012-08-01T19:30:34.297
> 
> 标签：javascript, jquery

事件监听代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        document.getElementById("pagenumber").addEventListener( "keydown", function( e ) {
        var keyCode = e.keyCode || e.which;

        if ( keyCode === 13 ) {
            Dajaxice.gallery.gallerypages(Dajax.process, {'p': document.getElementById('pagenumber').value })
        }}, false);

    });
</script> 
```

问题是当我按下输入元素时，更改页码并按下回车它仅在页面重新加载后第一次起作用。

我的问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:38:04.763

关于 Dajaxice 对象不能说太多，但这对于事件处理程序来说似乎要容易得多：

```
$(document).ready(function(){
    $(document).on("keydown", "#pagenumber", function(e) {
        if ( e.which === 13 ) {
             Dajaxice.gallery.gallerypages(Dajax.process, {'p': this.value });
        }
    });
}); 
```

这是委托给文档级别的，所以如果输入元素被 ajax 替换，它应该仍然有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:44:06.980

`$(document).ready();`已过时。你应该使用`$(document).on("ready", function());`. 也`.on()`对添加到文档中具有相同类或 ID 的新元素应用相同的功能。试试看，运气！

# android - 如何使 Android 菜单填充平板电脑上的水平空间？

> ID：11766206
> 
> 赞同：2
> 
> 时间：2012-08-01T19:30:34.330
> 
> 标签：android, menu, tablet

我在手机上设计了一个应用程序并将其转移到平板电脑上。在 3.2 上测试，三星什么的。旧版菜单不会使用现有资源填满屏幕...

![菜单不够大！](../Images/75ed4b32c04fbef15e4ff3a847235159.png)

那么，尽管如此[，](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)我怎样才能让我的菜单填满水平空间？（除了用宽图像玩技巧，如果这甚至可以工作的话。）再次，我对做动作栏溢出的事情不感兴趣（还）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:56:13.613

SDK 不支持此功能。菜单的布局由操作系统决定，偶尔由设备制造商修改。作为 SDK 应用程序开发人员，您无法控制大小、行数/列数等。实际上，“菜单”是一种抽象——您只需指出其中应该包含哪些项目，以及这取决于Android。这就是为什么对于 API 级别 11+，使用操作栏需要*零*`android:targetSdkVersion`代码更改，而不是设置为 11 或更高。

# vba - Excel 数组和集合在模块之间传递混淆值

> ID：11766207
> 
> 赞同：1
> 
> 时间：2012-08-01T19:30:36.490
> 
> 标签：vba, excel, automation, office-automation

这真的难倒我。我昨天提出了一个关于在模块之间传递集合的问题（[见这里](https://stackoverflow.com/questions/11744344/excel-vba-workbook-not-adding-to-object-collection)），但我似乎没有得到更多关于那个的解释，所以我试图以一种通用的方式更清楚地重申这个问题。

我有一个模块（module1）和一个用户表单（userform1）。我在 userform1 中创建了一个集合（或数组）并将工作表对象添加到该数组中。然后我将控制权传递给 module1，它调用 userform1 中一个名为 addNewFile 的子程序，它应该将新创建的工作簿添加到集合中。但是，每次 module1 调用 addNewFile 时，我都会遇到以下两种情况之一：1）集合已被删除，所有已添加的工作表现在都消失了（对于集合），2）我收到一条错误消息，指出我的类型不匹配（对于一个数组）。我不知道为什么会这样，所以下面的代码可以更好地说明。任何帮助将不胜感激，即使只是告诉我不可能将工作表对象存储在数组中。

用户窗体1

```
Dim workBooksCollection as New Collection 'can also define as an array
Private Sub CommandButton1_click()

   Dim mainWorkBook as workbook
   Set mainWorkBook = ActiveWorkbook
   Dim testwb As Workbook

   workBooksCollection.Add Item:=mainWorkBook, key:="main" 'Adds successfully
   workBooksCollection.Add Item:=testwb, key:="test" 'Adds successfully
   MsgBox "the size of the array is: " & usedWorkBooks.Count 'Prints off as size 2

   Module1.initialize

   'After running initialize, prints off as size 0, meaning collection has been erased
   MsgBox "the size of the array is: " & usedWorkBooks.Count 'Prints off as size 0

End Sub
Public Sub addNewFile(filepath As String, sheetKey As String)
   Dim newWorkBook As Workbook  
   Set newWorkBook = Workbooks.Open(filepath)

   MsgBox "The name of the workbook is: " & newWorkBook.name  'Prints off name of workbook successfully

   workBooksCollection.Add Item:=newWorkBook, key:=sheetKey
   MsgBox "the size of the array is: " & workBooksCollection.Count 'Prints off as size 1
End Sub 
```

模块1

```
Public Sub intialize()
   Dim filepath as string
   'The filepath is set to any path of a workbook 

   'This will print out that the array size is 1
   UserForm1.addNewFile filePath, "secondBook"

End Sub 
```

抱歉，如果我似乎在这里打败了一匹死马，但我真的不知道这里发生了什么。我习惯于集合和列表是全局的并且在被另一个模块引用时不会改变的想法。对这里发生的事情的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:04:41.840

我想发表评论，但我不能发表评论，因为我不得不重做我的帐户，因为我被锁定在我的原始帐户之外。

如果我的回答没有帮助，我会删除一点，但如果你替换 -

```
Dim workBooksCollection as collection 'can also define as an array 
```

从 UserForm 模块，进入模块 1：

```
Public workBooksCollection as collection 'can also define as an array 
```

它有帮助吗？

# windows-xp - 管道中使用的任务列表输出已损坏

> ID：11766211
> 
> 赞同：2
> 
> 时间：2012-08-01T19:30:47.783
> 
> 标签：windows-xp, cmd, tasklist

操作系统：Windows XP

在 cmd shell 中，通过管道输出 from`tasklist /v`会做一些奇怪的事情。我正在尝试通过管道连接到 grep，以便过滤输出，结果是断断续续且不一致的。查看问题所在的一种更简单的方法`tasklist /v`是简单地执行命令`tasklist /v | more`- 一定有一堆奇怪的（光标向上？？）字符`tasklist /v`正在喷涌而出。任何人有任何见解？

这是来自的直接输出`tasklist /v`：

```
C:\Users\mcintd2\FPF\CVSROOT_working\bin
>tasklist /v

Image Name                   PID Session Name     Session#    Mem Usage Status          User Name                                              CPU Time Window Title
========================= ====== ================ ======== ============ =============== ================================================== ============ ========================================================================
System Idle Process            0 Console                 0         28 K Running         NT AUTHORITY\SYSTEM                                   258:04:49 N/A
System                         4 Console                 0         72 K Running         NT AUTHORITY\SYSTEM                                     1:24:24 N/A
smss.exe                    1448 Console                 0         60 K Running         NT AUTHORITY\SYSTEM                                     0:00:04 N/A
csrss.exe                   1520 Console                 0      3,144 K Running         NT AUTHORITY\SYSTEM                                     0:07:35 N/A
winlogon.exe                1568 Console                 0      9,440 K Running         NT AUTHORITY\SYSTEM                                     0:03:03 N/A
services.exe                1612 Console                 0      3,936 K Running         NT AUTHORITY\SYSTEM                                     0:26:43 N/A
lsass.exe                   1624 Console                 0      3,628 K Running         NT AUTHORITY\SYSTEM                                     0:07:55 N/A
ibmpmsvc.exe                1788 Console                 0        724 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
nvsvc32.exe                 1820 Console                 0      4,408 K Running         NT AUTHORITY\SYSTEM                                     0:02:37 NVSVCPMMWindowClass
svchost.exe                 1924 Console                 0      2,872 K Running         NT AUTHORITY\SYSTEM                                     0:03:50 N/A
svchost.exe                 1976 Console                 0      2,520 K Running         NT AUTHORITY\NETWORK SERVICE                            0:01:28 N/A
svchost.exe                  404 Console                 0     35,864 K Running         NT AUTHORITY\SYSTEM                                     0:31:27 N/A
Smc.exe                      488 Console                 0      7,612 K Running         NT AUTHORITY\SYSTEM                                     0:32:32 SS
S24EvMon.exe                 752 Console                 0      5,688 K Running         NT AUTHORITY\SYSTEM                                     0:00:02 IWMSWindow
svchost.exe                 1064 Console                 0      1,988 K Running         NT AUTHORITY\NETWORK SERVICE                            0:00:27 N/A
svchost.exe                 1180 Console                 0      1,732 K Running         NT AUTHORITY\LOCAL SERVICE                              0:03:04 N/A
ccSvcHst.exe                1300 Console                 0      3,028 K Running         NT AUTHORITY\SYSTEM                                     0:05:07 N/A
spoolsv.exe                  324 Console                 0      4,676 K Running         NT AUTHORITY\SYSTEM                                     0:01:37 N/A
LVPrcSrv.exe                 384 Console                 0      1,240 K Running         NT AUTHORITY\SYSTEM                                     0:00:20 N/A
svchost.exe                  680 Console                 0      1,908 K Running         NT AUTHORITY\LOCAL SERVICE                              0:00:01 N/A
tphkload.exe                1124 Console                 0        320 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
TPHKSVC.exe                 1368 Console                 0        384 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
trcboot.exe                  200 Console                 0        256 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
PCS_AGNT.EXE                 260 Console                 0        460 K Running         NT AUTHORITY\SYSTEM                                     0:00:01 PCS_AGNT
svchost.exe                 1112 Console                 0        412 K Running         NT AUTHORITY\LOCAL SERVICE                              0:00:00 N/A
CcmExec.exe                 1168 Console                 0     13,272 K Running         NT AUTHORITY\SYSTEM                                     0:19:28 N/A
cvsservice.exe              1888 Console                 0        508 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
cvslock.exe                 2056 Console                 0        464 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
DOZESVC.EXE                 2264 Console                 0        260 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
tpnumlk.exe                 2400 Console                 0        692 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
EvtEng.exe                  2408 Console                 0      4,080 K Running         NT AUTHORITY\SYSTEM                                     0:00:01 N/A
PresentationFontCache.exe   2720 Console                 0      1,004 K Running         NT AUTHORITY\LOCAL SERVICE                              0:00:00 N/A
unsecapp.exe                2828 Console                 0      1,116 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
wmiprvse.exe                2888 Console                 0      4,796 K Running         NT AUTHORITY\SYSTEM                                     0:00:06 N/A
miragent.exe                3012 Console                 0      3,624 K Running         NT AUTHORITY\SYSTEM                                     0:00:57 N/A
jqs.exe                     3468 Console                 0      1,412 K Running         NT AUTHORITY\SYSTEM                                     0:13:49 N/A
LMAgent.exe                 3492 Console                 0      5,280 K Running         NT AUTHORITY\SYSTEM                                     0:00:41 N/A
CamMute.exe                 3624 Console                 0        204 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
micmute.exe                 3640 Console                 0        312 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
LMS.exe                     3660 Console                 0        848 K Running         NT AUTHORITY\SYSTEM                                     0:01:23 N/A
mdm.exe                     3692 Console                 0      1,912 K Running         NT AUTHORITY\SYSTEM                                     0:00:27 N/A
sqlservr.exe                3708 Console                 0      6,836 K Running         NT AUTHORITY\NETWORK SERVICE                            1:34:58 N/A
NACAgent.exe                3780 Console                 0      1,268 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
nvPDsvc.exe                 3892 Console                 0        500 K Running         NT AUTHORITY\SYSTEM                                     0:00:19 N/A
PWMDBSVC.exe                3940 Console                 0      1,464 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
RegSrvc.exe                  640 Console                 0        628 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
SgeCtl.exe                  1220 Console                 0        792 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 OleMainThreadWndName
sqlbrowser.exe              1912 Console                 0        248 K Running         NT AUTHORITY\NETWORK SERVICE                            0:00:00 N/A
sqlwriter.exe               2072 Console                 0        856 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
svchost.exe                 2088 Console                 0      2,116 K Running         NT AUTHORITY\SYSTEM                                     0:00:07 N/A
SUService.exe               2100 Console                 0      4,068 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
Rtvscan.exe                 2168 Console                 0      5,084 K Running         NT AUTHORITY\SYSTEM                                     0:04:32 N/A
tvt_reg_monitor_svc.exe     2248 Console                 0      1,032 K Running         NT AUTHORITY\SYSTEM                                     0:00:17 OleMainThreadWndName
tvtsched.exe                2296 Console                 0      2,376 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 OleMainThreadWndName
wdfmgr.exe                  2212 Console                 0        256 K Running         NT AUTHORITY\LOCAL SERVICE                              0:00:00 N/A
UNS.exe                     2356 Console                 0     14,756 K Running         NT AUTHORITY\SYSTEM                                     0:04:37 N/A
WksCfgSrv.exe               2684 Console                 0      1,508 K Running         NT AUTHORITY\SYSTEM                                     0:01:04 SafeGuard Easy WksCfgSrv Class
Wuser32.exe                 2812 Console                 0        536 K Running         NT AUTHORITY\SYSTEM                                     0:00:23 N/A
ldlcserv.exe                3980 Console                 0        268 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
wmiprvse.exe                3148 Console                 0      2,272 K Running         NT AUTHORITY\SYSTEM                                     0:00:05 N/A
TPOSDSVC.exe                3420 Console                 0        412 K Running         MYFIRMMASKED\mywinid                                    0:00:14 tphkmgr
tpnumlkd.exe                3440 Console                 0      2,008 K Running         MYFIRMMASKED\mywinid                                    0:00:03 ThinkPad NumLock/CapsLock Indicator
TPONSCR.exe                 3776 Console                 0        688 K Running         MYFIRMMASKED\mywinid                                    0:00:02 tpvolbar
TpScrex.exe                 2860 Console                 0      3,992 K Running         MYFIRMMASKED\mywinid                                    0:00:01 TpUZoom
wmiprvse.exe                 980 Console                 0      8,456 K Running         NT AUTHORITY\NETWORK SERVICE                            0:01:58 N/A
explorer.exe                4112 Console                 0     24,272 K Running         MYFIRMMASKED\mywinid                                    0:21:22 N/A
SmcGui.exe                  4388 Console                 0      7,144 K Running         MYFIRMMASKED\mywinid                                    0:17:52 Network Activity
wmiprvse.exe                4488 Console                 0      3,436 K Running         NT AUTHORITY\SYSTEM                                     0:00:03 N/A
rundll32.exe                1480 Console                 0        364 K Running         MYFIRMMASKED\mywinid                                    0:00:00 BluetoothNotificationAreaIconWindowClass
tpam.exe                    4284 Console                 0        340 K Running         MYFIRMMASKED\mywinid                                    0:00:00 dummy
SynTPEnh.exe                4756 Console                 0      4,000 K Running         MYFIRMMASKED\mywinid                                    0:21:51 Syn Visual Window
ecview.exe                  4804 Console                 0      2,636 K Running         MYFIRMMASKED\mywinid                                    0:00:39 SafeGuardr Easy
scheduler_proxy.exe         5264 Console                 0        580 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
rundll32.exe                5292 Console                 0     11,084 K Running         MYFIRMMASKED\mywinid                                    0:02:33 ATM main window
tpfnf7sp.exe                5928 Console                 0      1,748 K Running         MYFIRMMASKED\mywinid                                    0:00:02 tpfnf7
SynTPLpr.exe                2600 Console                 0        320 K Running         MYFIRMMASKED\mywinid                                    0:00:00 Touchpad driver helper window
TpShocks.exe                4464 Console                 0        424 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
rundll32.exe                4692 Console                 0      5,760 K Running         MYFIRMMASKED\mywinid                                    0:00:03 MediaCenter
GravitixService.exe         3620 Console                 0      6,552 K Running         NT AUTHORITY\SYSTEM                                     0:00:06 N/A
pddm.exe                    3212 Console                 0        360 K Running         MYFIRMMASKED\mywinid                                    0:00:01 Desktop Deployment Manager
ccApp.exe                   3460 Console                 0        536 K Running         MYFIRMMASKED\mywinid                                    0:00:09 CCALERT
ctfmon.exe                  5252 Console                 0      2,780 K Running         MYFIRMMASKED\mywinid                                    0:01:05 N/A
SCHTASK.EXE                 5144 Console                 0      2,888 K Running         MYFIRMMASKED\mywinid                                    0:00:21 ScheduledTask
cmd.exe                     5364 Console                 0      1,276 K Running         MYFIRMMASKED\mywinid                                    0:00:00 cmd
thunderbird.exe            15540 Console                 0      1,576 K Running         MYFIRMMASKED\mywinid                                    0:00:19 MCI command handling window
notepad++.exe               5160 Console                 0     11,960 K Running         MYFIRMMASKED\mywinid                                    0:02:03 C:\Users\mcintd2\FPF\tasklistOut.txt - Notepad++
OUTLOOK.EXE                19324 Console                 0     52,680 K Running         MYFIRMMASKED\mywinid                                    0:25:49 Inbox - Microsoft Outlook
devenv.exe                 28940 Console                 0    154,576 K Running         MYFIRMMASKED\mywinid                                    2:59:07 FPF - Microsoft Visual Studio
wfcrun32.exe               34880 Console                 0      2,612 K Running         MYFIRMMASKED\mywinid                                    0:00:02 Remote Application Runtime
mstsc.exe                  40500 Console                 0     29,568 K Running         MYFIRMMASKED\mywinid                                    0:01:26 N/A
wincvs.exe                 40780 Console                 0     18,228 K Running         MYFIRMMASKED\mywinid                                    0:27:55 wincvs - [C:\Users\mcintd2\FPF\CVSROOT_working\bin\]
firefox.exe                39996 Console                 0    513,708 K Running         MYFIRMMASKED\mywinid                                    0:41:35 windows xp - tasklist output used in pipe is broken - Stack Overflow - M
WinMergeU.exe              37836 Console                 0      9,052 K Running         MYFIRMMASKED\mywinid                                    0:00:03 WinMerge
cmd.exe                    40036 Console                 0      2,868 K Running         MYFIRMMASKED\mywinid                                    0:00:00 dummyWindowTitle
cmd.exe                    40600 Console                 0      3,296 K Running         MYFIRMMASKED\mywinid                                    0:00:00 cmd - tasklist /v
mspdbsrv.exe               42136 Console                 0      3,032 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
cmd.exe                    43364 Console                 0        108 K Running         MYFIRMMASKED\mywinid                                    0:00:00 TD
nsload.exe                 43260 Console                 0     13,672 K Running         MYFIRMMASKED\mywinid                                    0:00:36 N/A
conset.exe                 43592 Console                 0        288 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
nsverctl.exe               44756 Console                 0      5,748 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
tasklist.exe               43156 Console                 0      5,740 K Running         MYFIRMMASKED\mywinid                                    0:00:00 OleMainThreadWndName 
```

这是来自的输出`tasklist /v | more`：

```
C:\Users\mcintd2\FPF\CVSROOT_working\bin
>tasklist /v | more

Image Name                   PID Session Name     Session#    Mem Usage Status          User Name                                              CPU Time Window Title
winlogon.exe                1568 Console                 0      9,440 K Running         NT AUTHORITY\SYSTEM                                     0:03:03 N/A
services.exe                1612 Console                 0      3,996 K Running         NT AUTHORITY\SYSTEM                                     0:26:36 N/A
svchost.exe                 1976 Console                 0      2,520 K Running         NT AUTHORITY\NETWORK SERVICE                            0:01:28 N/A
svchost.exe                 1180 Console                 0      1,732 K Running         NT AUTHORITY\LOCAL SERVICE                              0:03:04 N/A
tphkload.exe                1124 Console                 0        320 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
CcmExec.exe                 1168 Console                 0     13,180 K Running         NT AUTHORITY\SYSTEM                                     0:19:28 N/A
EvtEng.exe                  2408 Console                 0      4,080 K Running         NT AUTHORITY\SYSTEM                                     0:00:01 N/A
jqs.exe                     3468 Console                 0      1,440 K Running         NT AUTHORITY\SYSTEM                                     0:13:45 N/A                                                                     :00:00 N/A
mdm.exe                     3692 Console                 0      1,912 K Running         NT AUTHORITY\SYSTEM                                     0:00:27 N/A
RegSrvc.exe                  640 Console                 0        628 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
SUService.exe               2100 Console                 0      4,068 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
UNS.exe                     2356 Console                 0     14,680 K Running         NT AUTHORITY\SYSTEM                                     0:04:35 N/A
TPOSDSVC.exe                3420 Console                 0        412 K Running         MYFIRMMASKED\mywinid                                    0:00:14 tphkmgr
notepad++.exe               5160 Console                 0     11,960 K Running         MYFIRMMASKED\mywinid                                    0:02:03 C:\Users\mcintd2\FPF\tasklistOut.txt - Notepad++
wincvs.exe                 40780 Console                 0     18,228 K Running         MYFIRMMASKED\mywinid                                    0:27:25 wincvs - [C:\Users\mcintd2\FPF\CVSROOT_working\bin\]
mspdbsrv.exe               42136 Console                 0      3,032 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
tasklist.exe               41524 Console                 0      5,748 K Running         MYFIRMMASKED\mywinid                                    0:00:00 OleMainThreadWndName
more.com                   44544 Console                 0      1,604 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
nsverctl.exe               44756 Console                 0      5,748 K Running         NT AUTHORITY\SYSTEM                                     0:00:00 N/A
tpfnf7sp.exe                5928 Console                 0      1,748 K Running         MYFIRMMASKED\mywinid                                    0:00:02 tpfnf7
C:\Users\mcintd2\FPF\CVSROOT_working\bin                 0        320 K Running         MYFIRMMASKED\mywinid                                    0:00:00 Touchpad driver helper window
>pShocks.exe                4464 Console                 0        424 K Running         MYFIRMMASKED\mywinid                                    0:00:00 N/A
rundll32.exe                4692 Console                 0      5,760 K Running         MYFIRMMASKED\mywinid                                    0:00:03 MediaCenter
gravitixService.exe         3620 Console                 0      6,552 K Running         NT AUTHORITY\SYSTEM                                     0:00:06 N/A
pddm.exe                    3212 Console                 0        360 K Running         MYFIRMMASKED\mywinid                                    0:00:01 Desktop Deployment Manager
ccApp.exe                   3460 Console                 0        432 K Running         MYFIRMMASKED\mywinid                                    0:00:09 CCALERT
ctfmon.exe                  5252 Console                 0      2,780 K Running         MYFIRMMASKED\mywinid                                    0:01:03 N/A
SCHTASK.EXE                 5144 Console                 0      2,888 K Running         MYFIRMMASKED\mywinid                                    0:00:21 ScheduledTask
cmd.exe                     5364 Console                 0      1,276 K Running         MYFIRMMASKED\mywinid                                    0:00:00 cmd
thunderbird.exe            15540 Console                 0      1,576 K Running         MYFIRMMASKED\mywinid                                    0:00:19 MCI command handling window 
```

注意一半的输出丢失了，命令提示符出现在列表的中间。`tasklist /v | more`每次调用都会导致不同的、奇怪的行为。

这是第一次暂停的屏幕截图`more`：

[![命令窗口](../Images/a2992b8fb0b2bebb306606a59a47e20f.png)](https://i.stack.imgur.com/LQg95.jpg)

请注意丢失了多少数据以及光标的奇数位置。这是在上面的 cmd shell 窗口中点击空格后的截图：

[![cmd窗口再次](../Images/b26c6d0dbbe031205fbb76ef0dd40096.png)](https://i.stack.imgur.com/S0i5Q.jpg)

这次你看不到光标（我没有在正确的时间点击 prtsc），但它就在该行的正上方`--- more --`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:13:10.740

嗯，事实证明，任务列表向 stderr 吐出垃圾，这反过来会导致（显示）后期管道阶段出现问题。

要看到这一点，请将控制台字体更改为 Lucida（在属性中），将代码页更改为 437 ( `chcp 437`) 并重新运行`tasklist`

摆脱使用`tasklist 2>nul | more`（或者`grep`，显然）（据我所知，如果只影响显示，那么`tasklist |grep whatever >result.txt`也应该给出一致/正确的结果。

在与您相同的版本下测试（*5.1.2600 SP3*）。烦人......对我来说看起来像一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:46:30.947

管道通过`more`给我不少线条，实际上更多

```
C:\Steven\Desktop\etc>tasklist -v | C:\cygwin\bin\wc
     39     448    8780

C:\Steven\Desktop\etc>tasklist -v | more | C:\cygwin\bin\wc
     41     458    9013 
```

# debugging - 在windbg中的某个断点列出变量内容

> ID：11766214
> 
> 赞同：2
> 
> 时间：2012-08-01T19:30:54.687
> 
> 标签：debugging, windbg, breakpoints

我正在尝试在某些断点处增加某种 printf 或 cout 。有没有办法告诉windbg放置一个断点，而不是在执行流经该断点时打破列表变量。

我试图在谷歌上找到这件事，但在任何地方我都能得到与在某些情况下打破相关的帮助。

我确信必须有一种方法来做我想做的事情。

谢谢你的帮助。

-肖比特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:40:57.927

一个简单的命令是

```
bp MyFunction "dv;g" 
```

where`dv`显示局部变量，然后`g`继续执行。

# c# - 泛型类型参数推断

> ID：11766215
> 
> 赞同：2
> 
> 时间：2012-08-01T19:30:58.063
> 
> 标签：c#, generics

我的中间层有一个方便的集合，用于收集属于父事物的子事物。

```
public class ChildCollection<TParent, TChild>
{
    public IEnumerable<TChild> GetChildren();
    etc.
} 
```

在界面中，我有一个方便的网格，可以显示 ChildCollection<TParent,TChild> 的内容并让用户对其进行操作。

```
public abstract class ChildCollectionGrid<TCollection, TParent, TChild> : MyGridControl
    where TCollection : ChildCollection<TParent, TChild>
{
    public abstract TCollection Collection;
    etc.
} 
```

继承此类以使网格与 Widget 上的 Waffles 一起使用最终看起来像这样。

```
public class WidgetWafflesGrid : ChildCollectionGrid<WidgetWafflesCollection, Widget, Waffle> 
```

这有点多余。WidgetWaffleCollection*是*ChildCollection<Widget,Waffle>。指定第一个泛型类型参数后，除非您准确指定另外两个，否则该类将无法编译。

有没有更漂亮的方法来实现这一点，编译器可以推断出其他两种类型？我知道我很挑剔，但理想情况下我希望类声明看起来像：

```
public class WidgetWafflesGrid : ChildCollectionGrid<WidgetWafflesCollection> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:33:33.513

不，没有。泛型参数推断仅适用于方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:44:51.980

为什么要从你的收藏中获得？保持这样的状态：

```
public abstract class ChildCollectionGrid<TParent, TChild> : MyGridControl
{
    public abstract ChildCollection<TParent, TChild> Collection;
    etc.
}

public class WidgetWafflesGrid : ChildCollectionGrid<Widget, Waffle>
{  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:33:45.607

使用泛型处理集合中的继承的唯一方法是使用`Collection<TCollection,TChild> : where TCollection : Collection<TCollection,TChild> { }`模式。

这是一个带有具体类的示例

```
public abstract class Collection<TCollection, TChild>
    where TCollection : Collection<TCollection, TChild>, new()
{
    protected Collection()
    {
        List=new List<TChild>();
    }
    protected List<TChild> List { get; set; }

    public TCollection Where(Func<TChild, bool> predicate)
    {
        var result=new TCollection();
        result.List.AddRange(List.Where(predicate));
        return result;
    }

    public void Add(TChild item) { List.Add(item); }
    public void AddRange(IEnumerable<TChild> collection) { List.AddRange(collection); }
}

public class Waffle
{
    public double Temperature { get; set; }
}

public class WafflesCollection : Collection<WafflesCollection, Waffle>
{
    public WafflesCollection BurnedWaffles
    {
        get
        {
            return Where((w) => w.Temperature>108);
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        WafflesCollection waffles=new WafflesCollection();

        // Count = 3
        waffles.Add(new Waffle() { Temperature=100 });
        waffles.Add(new Waffle() { Temperature=120 });
        waffles.Add(new Waffle() { Temperature=105 });

        var burned=waffles.BurnedWaffles;
        // Count = 1
    }
} 
```

# ember.js - emberjs - 打印以控制台对象中的所有路径

> ID：11766216
> 
> 赞同：0
> 
> 时间：2012-08-01T19:30:58.450
> 
> 标签：ember.js, console, ember-old-router

我想查看某个对象中所有可能的路径。我怎样才能做到这一点？

示例我有：

```
App.Router = Em.Router.extend({
enableLogging: true,
location: 'hash',

root: Em.Route.extend({
    // EVENTS
    gotoAbout: Ember.Route.transitionTo('about'),
    gotoProjects: Ember.Route.transitionTo('projects'),
    gotoTechnology: Ember.Route.transitionTo('technology'),
    gotoContact: Ember.Route.transitionTo('contact'),

    // STATES
    about: Em.Route.extend({
        route: '/',
        connectOutlets: function (router, context) {
            router.get('applicationController').connectOutlet('about');
        }
    }),
...
}) 
```

我想打印到控制台（类似`console.log()`）所有可能的路径`App.Router`。我怎样才能做到这一点？如何检查 emberjs 对象中的“树”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:10:14.973

我会迭代`childStates`，并制作一个递归函数。

```
var walkState = function(state){
  console.log(state.get('path'));
  state.get('childStates').forEach(function(childState){
    walkState(childState);        
  });                    
}        

App.router.get('childStates').forEach(function(state){
   walkState(state);        
}); 
```

# cuda - 关于浮点运算

> ID：11766221
> 
> 赞同：1
> 
> 时间：2012-08-01T19:31:09.323
> 
> 标签：cuda, gpgpu

最近在用CUDA开发环境做程序（FDTD Operation），操作系统是Windows server 2008，显卡是TeslaC2070，编译器是VS2010。该程序使用单精度和双精度浮点计算。

我正在阅读 CUDA 编程指南 3.2 和 4.0 。在附录中，指南告诉我`sin()`，`cos()`最大精度为 2 ULP。我原来的 CPU 程序产生的结果与 CUDA 版本不同。

我想让结果正确相同。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:15:38.637

引用[Goldberg](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)（每一个计算机科学家、计算科学家，甚至可能是每一个编程科学家都应该阅读的论文）：

> 由于舍入误差，代数的结合定律不一定适用于浮点数。

这意味着当你改变运算的顺序时——即使是使用表面上的关联算术——你可能会得到稍微不同的答案。

根据定义，并行性导致相对于串行算术的不同操作顺序。“令人尴尬的并行”计算，即每个输出元素独立于所有其他元素计算的计算，有时不必担心这一点。但是集体操作，如缩减或扫描，以及空间邻域计算，如模板（如在 FDTD 中），确实会遇到这种影响。

在实践中，即使使用不同的编译器（甚至不同的编译器选项）也可以改变浮点计算的结果，即使在编译相同的代码时，不管有没有并行性。

# javascript - 检查是否安装了字体

> ID：11766224
> 
> 赞同：1
> 
> 时间：2012-08-01T19:31:17.770
> 
> 标签：javascript, html, css, fonts, typekit

我正在为 Proxima Nova 使用 Typekit，想知道是否有 Javascript 或 jQuery 插件来检查是否有人安装了 Proxima Nova？

如果是这样，我想使用它，然后使用 jQuery 删除 Typekit 加载类以使页面加载更快。

可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:38:50.350

您的任何访问者都不太可能安装此字体，因为它不是任何标准操作系统安装的一部分。

根据下面的链接，我也不相信它是 Adob​​e 套件的一部分，这使得有人拥有它的可能性更小。

[http://techinch.com/2010/05/21/what-fonts-are-included-with-photoshop-cs4-cs5-and-elements-8/](http://techinch.com/2010/05/21/what-fonts-are-included-with-photoshop-cs4-cs5-and-elements-8/)

因此，您将花费大量时间来尝试创建这种精心制作的检查，因为大多数人最终仍会从 typekit 获得它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:42:22.190

[how-to-detect-if-a-font-is-installed-only-using-javascript](http://remysharp.com/2008/07/08/how-to-detect-if-a-font-is-installed-only-using-javascript/)是一个有趣的教程，介绍如何检查是否安装了字体。教程中提到了几个潜在的问题，但您可以决定是否值得您花时间。

# azure - Windows Azure 网站的 SSL 证书

> ID：11766225
> 
> 赞同：26
> 
> 时间：2012-08-01T19:31:20.747
> 
> 标签：azure, ssl

我一直在使用新的 Windows Azure 网站预览版为客户构建网站。我最近部署了这个站点，并将它移动到一个保留实例，以便我可以根据客户的要求为该站点配置一个自定义域。到现在为止还挺好。

我的下一步是使用 SSL 证书保护站点。我在 azure 网站（以及 stackoverflow）上进行了长期而艰苦的搜索，但无法找到有关如何为保留的网站实例配置 SSL 证书的任何信息。

我已经看到很多使用 Web 角色（云服务）而不是保留网站来执行此操作的示例。

有谁知道这目前是否可行？或者这可能是 azure 网站仍处于预览模式的原因之一？

**更新：**在 Azure 论坛上发现一个帖子表明这在当前版本中是不可能的，但很快会在未来版本中推出。[http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/4bf975e7-56c0-4a4d-bb6a-b9b82f0da469](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/4bf975e7-56c0-4a4d-bb6a-b9b82f0da469)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T19:35:19.070

我做了一个快速的谷歌并找到[了这个链接](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazurewebsitespreview/thread/0218204f-7be3-4586-bfdb-831cde6b7937)。它有一些有用的信息。

感谢@twomm，这里是这种情况的 TLDR：

`just to keep everybody from clicking through, this is the current state there: "We are shooting for April or May for this feature"`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-03T07:47:04.103

从 2013 年 6 月 3 日起，Azure 网站现在根据[Azure 定价详细信息页面](http://www.windowsazure.com/en-us/pricing/details/web-sites/)`custom domains`支持网站的 SSL 。`reserved`

支持两种类型的 SSL 连接。

1 - `Server Name Indication`(SNI) SSL 连接，适用于现代浏览器。

2 - `IP-based SSL`适用于所有浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T23:43:26.937

目前 Azure 仅支持共享 SSL 证书。尚不支持自定义 SSL 证书，但 Microsoft 计划很快推出它们。

通过共享安全，您可以`https`使用`https`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-19T15:20:22.683

我看到这篇文章和答案来自几年前。现在可以为自定义域向 Azure 添加 SSL 证书，我认为在这里发布完整的解决方案会很有用。

我遵循的在 Windows Azure 站点上安装 GoDaddy 证书的 MSDN 博客文章是 Avkash Chauhan 的[完整解决方案：使用 Windows Azure 应用程序添加 SSL 证书](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/28/complete-solution-adding-ssl-certificate-with-windows-azure-application.aspx)。他没有详细说明证书颁发机构部分，但我在下面添加了有关如何在 GoDaddy 上完成的步骤。他的博客和他链接的另一个博客非常详细地了解了整个过程的其余部分。我对所有步骤的总结是：

1.  在 GoDaddy 购买您的 SSL 额度
2.  使用积分在 GoDaddy 上创建或更新您的 SSL 证书。作为创建过程的一部分，GoDaddy 会询问您的证书签名请求 (CSR)。CSR 应在您的 LOCAL IIS 服务器上创建，如下所示
3.  在您本地的 IIS 7 管理器中，转到服务器证书并选择右侧的创建证书请求...。您可以在此处指定域名和详细信息，包括加密强度。选择 2048 位或更高版本。RSA 作为加密提供者
4.  创建 CSR 文件后，将内容粘贴到 GoDaddy 创建表单中。完成证书创建需要 5 到 10 分钟。
5.  将证书下载为 .zip 文件并保存到您的计算机
6.  再次转到 IIS 7 管理器并选择 Complete Certificate Request... 它会要求您浏览到 *.cer 文件。实际上，您应该使用*.* 过滤并浏览到 .zip 文件中的 *.crt 文件。给它一个友好的名字，比如 MyDomainSSL2015
7.  现在证书已创建，突出显示它并选择导出以将其导出到 .pfx 文件。此时，您还将为导出的文件提供密码。
8.  （接下来的几个步骤来自[William Bellamy 的另一篇 MSDN 帖子](http://blogs.msdn.com/b/azuredevsupport/archive/2010/02/24/how-to-install-a-chained-ssl-certificate.aspx)，链接到我引用的另一篇帖子）登录到 Windows Azure，转到管理要安装证书的服务，然后选择证书选项卡
9.  点击底部的“上传”。它会要求您浏览到您的 .pfx 文件并输入您创建的密码
10.  现在您的证书已上传到 Azure，您仍然必须指定您希望您的角色使用它。这可以在 Visual Studio 中完成。所以打开你的 Visual Studio 项目
11.  右键单击您的角色并选择属性。转到证书选项卡
12.  单击添加证书。将在网格中创建一条新线。确保为 Store Location 选择 LocalMachine，为 Store Name 选择 CA（尽管 My 似乎也可以使用）。
13.  单击“指纹”列中的省略号。这将向您显示所有本地证书的列表。选择具有您之前创建的友好名称的名称
14.  转到端点选项卡。对于您的 HTTPS 端点，选择您刚刚添加的 SSL 证书名称。
15.  发布您的角色

就是这样。同样，我引用的两个博客有一些更详细的信息和一些屏幕截图，尽管有些屏幕截图已经过时了。

# python - JSON 转储 UnicodeDecodeError

> ID：11766231
> 
> 赞同：0
> 
> 时间：2012-08-01T19:31:47.527
> 
> 标签：python, json, unicode

我目前有一个程序可以从网站上抓取足球数据并将其移植到`dict`：

```
 dict5[name] = ['To: ' + toteam, 'From: ' + fromteam, 'Price: ' + price, 'Date: ' + newdate] 
```

该网站使用葡萄牙语，本机编码为 UTF-8。toteam、fromteam、价格和日期都预编码为 UTF-8，只是与`dict`. `stdout`当我尝试将其转储到这样的 json 文件时，该程序运行得很好并且打印没有问题......

```
with open('test.json', 'w') as f:
  f.write(json.dumps(dict5, indent=2)) 
```

...它出现以下错误：

```
Traceback:....
C:\Python27\lib\json\__init__.py, line 238, in dumps
  **kw).encode(obj)
C:\Python27\lib\json\encoder.py, line 203, in encode
  chunks = list(chunks)
C:\Python27\lib\json\encoder.py, line 428, in _iterencode
  for chunk in _iterencode_dict(o, _current_indent_level):
C:\Python27\lib\json\encoder.py, line 381, in _iterencode_dict
  yield_encoder(key)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xc3 in position 0: invalid continuation byte 
```

这本质上是从同一站点抓取的另一个程序的副本，具有相同的编码，但是可以正常工作。

我觉得有一些我没有掌握的 unicode 元素。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:36:21.200

> toteam、fromteam、价格和日期都预编码为 utf-8

嗯*，有*你的问题。[请改用`unicode`s。](http://farmdev.com/talks/unicode/)

# linux - 在shell脚本中提取版本字符串

> ID：11766232
> 
> 赞同：1
> 
> 时间：2012-08-01T19:31:52.143
> 
> 标签：linux, shell

我在我的 linux 机器中安装了一个名为 my-scheduler-1.1.0-1112 的程序

当我做 rpm -qa | grep my，它列出如下所示：

```
my-scheduler-1.1.0-1112 
```

我想要一个可以提取 1.1.0-1112 的命令，它是我的 shell 脚本中的版本部分。

在 shell 脚本中提取它的命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:55:47.930

对于这个问题，您可以尝试使用 rpm 的**--queryformat**参数。

像：

```
rpm -qa --queryformat '%{NAME}' | grep my 
```

应该打印

```
my-scheduler 
```

没有版本字符串...什么比用 sed 或类似的东西更好。因为你可以得到类似`package-1.0.3-rc2`或so..

对于版本发布：使用：

```
--queryformat "%{VERSION}-%{RELEASE}" 
```

也许会很有用阅读[http://www.rpm.org/max-rpm/ch-queryformat-tags.html](http://www.rpm.org/max-rpm/ch-queryformat-tags.html) - 这里有很多有用的查询格式标签，所以你可以直接得到你想要的和你想要的格式想要，无需脚本...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:35:15.560

不确定您可能会遇到哪些其他版本字符串，但您可以尝试：

```
sed -e 's/^[^0-9]*-//g' 
```

* * *

这是一个`sed`替换。它匹配正则表达式`^[^0-9]*-`，即：

*   从字符串的开头开始
*   匹配尽可能多的非数字
*   那么下一个字符是`-`

它替换了与空白匹配的所有内容，基本上将其删除。这应该留下版本字符串之后的所有内容。

# c++ - 在这种情况下避免使用 eof

> ID：11766234
> 
> 赞同：3
> 
> 时间：2012-08-01T19:32:00.903
> 
> 标签：c++, eof, getline

我发布了以下代码，我正在从输入文件中读取信息——将信息存储在结构中——然后写入输出文件。我知道该`eof`功能*不安全*，因此必须使用该`getline`功能检查是否检测到文件结尾；但是，在这个特定的代码中，我无法使用该`getline`函数，因此最终依赖于该`eof`函数。因此，您能否建议该函数的替代方案，或者让我知道在尝试初始化结构数组时`eof`如何使用该函数。`getline`我使用了两个**星号**来表示我想在哪里使用该`getline`功能。

```
#include <iostream>
#include <fstream>

using namespace std;
//student structure
struct student
{
  char name[30];
  char course[15];
  int age;
  float GPA;
};

ifstream inFile;
ofstream outFile;

student getData();
void writeData(student writeStudent);
void openFile();

int main (void)
{
  const int noOfStudents = 3; // Total no of students
  openFile(); // opening input and output files

  student students[noOfStudents]; // array of students

  // Reading the data from the file and populating the array
  for(int i = 0; i < noOfStudents; i++)
  {
        if (!inFile.eof()) // ** This where I am trying to use a getline function.
            students[i] = getData();
        else
            break ;
  }

  for(int i = 0; i < noOfStudents; i++)
    writeData(students[i]);

  // Closing the input and output files
  inFile.close ( ) ;
  outFile.close ( ) ;

}

void openFile()
{
  inFile.open("input.txt", ios::in);
  inFile.seekg(0L, ios::beg);
  outFile.open("output.txt", ios::out | ios::app);
  outFile.seekp(0L, ios::end);

  if(!inFile || !outFile)
  {
    cout << "Error in opening the file" << endl;
    exit(1);
  }

}

student getData()
 {
  student tempStudent;
  // temp variables for reading the data from file

  char tempAge[2];
  char tempGPA[5];

  // Reading a line from the file and assigning to the variables
  inFile.getline(tempStudent.name, '\n');
  inFile.getline(tempStudent.course, '\n');
  inFile.getline(tempAge, '\n');

  tempStudent.age = atoi(tempAge);

  inFile.getline(tempGPA, '\n');
  tempStudent.GPA = atof(tempGPA);
  // Returning the tempStudent structure
  return tempStudent;
 }

void writeData(student writeStudent)
 {
  outFile << writeStudent.name << endl;
  outFile << writeStudent.course << endl;
  outFile << writeStudent.age << endl;
  outFile << writeStudent.GPA << endl;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:36:34.720

你想`operator>>`为你的学生类型写一个。就像是：

```
std::istream& operator>>(std::istream& in, student& s) {
  in >> s.age; // etc.
  return in;
} 
```

然后允许您编写：

```
int studentNo = 0;
students[maxStudents];
while (studentNo < maxStudents && (in >> students[studentNo]))
  ++studentNo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:35:53.897

为什么不这样写？

代替

```
inFile.getline(tempStudent.name, '\n');
inFile.getline(tempStudent.course, '\n');
inFile.getline(tempAge, '\n'); 
```

你可以

```
while(inFile.getline(tempStudent.name, '\n'))
{
    inFile.getline(tempStudent.course, '\n');
    inFile.getline(tempAge, '\n');
    //do stuffs
} 
```

# ruby-on-rails - Rails 模型不是 ActiveRecord 或 ActiveModel 的子类是否易于处理？

> ID：11766249
> 
> 赞同：1
> 
> 时间：2012-08-01T19:32:50.383
> 
> 标签：ruby-on-rails

我不喜欢 Rails 模型同时用于业务逻辑和持久性的想法。我很想将两者分开：让我的模型包含业务逻辑，并使用另一个类层次结构来持久化。

有没有人试过这个并获得任何牵引力？在我的脑海中，它似乎对 Rails 过于强烈：form_for 需要一个 ActiveModel 对象才能工作，许多直接在业务对象上工作的常见插件也是如此。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:26:24.247

我认为完全按照您的说法去做会很困难/很烦人，但是有一些很好的方法可以分离出您的代码。

正如您所说，一种方法是拥有 2 个单独的类，一个用于持久性，一个用于业务逻辑。我们称它们为 Foo 和 FooBL。Foo 将从 ActiveRecord 继承，包含验证逻辑以及一些用于查询和操作数据的简单方法。FooBL 将是一个常规的 ruby​​ 类，它会根据需要使用 Foo 类。您甚至可以使用 Ruby 的一些[委托](http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-delegate/)功能，以便可以直接使用 Foo 的一些属性和方法。

另一种稍微不同的方法是使用 Presenters，就像在[Draper](https://github.com/jcasimir/draper) gem 中一样。它没有将业务逻辑从持久性逻辑中分离出来，而是分离了与视图相关的逻辑。不完全是您正在寻找的东西，但它仍然有助于清理您的代码。

我还建议您看一看 Avdi Grimm 的书[Object on Rails](http://objectsonrails.com)。他深入研究了其中一些模式和实践。

祝你好运！

# hibernate - OneToOne 连接在 Hibernate 中产生“参数未设置”

> ID：11766251
> 
> 赞同：0
> 
> 时间：2012-08-01T19:32:52.880
> 
> 标签：hibernate, jpa

具有以下实体：

```
@Entity
@Table(name = "NAMES")
public class Name {
    @Id
    @GeneratedValue(generator = "increment")
    @GenericGenerator(name = "increment", strategy = "increment")
    private Long id;

    @OneToOne(mappedBy = "name", optional = true)
    private Event event;
}

@Entity
@Table(name = "EVENTS")
public class Event{
    @Id
    @GeneratedValue(generator = "increment")
    @GenericGenerator(name = "increment", strategy = "increment")
    private Long id;

    @OneToOne(optional = false)
    private Name name;
} 
```

以及以下 JPQL 查询：

```
SELECT n FROM Name n JOIN n.event e WHERE e=:uref 
```

查询通过以下方式执行：

```
String queryString = "SELECT n FROM Name n JOIN n.event e WHERE e=:uref";
List<Name> result = entityManager.createQuery(queryString, Name.class)
            .setParameter("uref", userRef).getResultList(); 
```

我收到以下错误：

```
Hibernate: 
    select
        name0_.id as id1_ 
    from
        NAMES name0_ 
    inner join
        EVENTS event1_ 
            on name0_.id=event1_.name_id 
    where
        event1_.id=?
1-Aug-2012 3:18:31 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 90012, SQLState: 90012
1-Aug-2012 3:18:31 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Parameter "#1" is not set; SQL statement:
select name0_.id as id1_ from NAMES name0_ inner join EVENTS event1_ on name0_.id=event1_.name_id where event1_.id=? [90012-168] 
```

为什么加入不起作用？

奇怪的是，这个非常相似的查询有效：

```
SELECT e.name FROM Event e WHERE e=:uref
Hibernate: 
    select
        name1_.id as id1_ 
    from
        EVENTS event0_ 
    inner join
        NAMES name1_ 
            on event0_.name_id=name1_.id 
    where
        event0_.id=? 
```

这是用 Hibernate 4.1.5.SP1 和 4.1.0.Final 尝试过的

注意：第一个查询在 OpenJPA 中有效

# php - Facebook API - 检查帖子的点赞和评论

> ID：11766254
> 
> 赞同：1
> 
> 时间：2012-08-01T19:32:57.577
> 
> 标签：php, javascript, facebook, facebook-graph-api

有没有办法检查特定帖子的点赞数和评论数？我想在我的网站上显示这个数字，所以我需要以某种方式引用 API 以获得该结果。我正在寻找 PHP 或 javascript 解决方案。这也将动态完成。我想跟踪我的应用发布给不同用户的喜欢，所以我想我应该在发布帖子时存储帖子 ID。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:41:45.817

facebook 中的每个帖子都有一个特定的 ID

你可以使用 graph api 来获取这个 id 并查看它的所有评论、喜欢和分享。

您只需进行 POST 调用并获取生成的 JSON

更多信息可以在下面的链接中找到 [http://graph.facebook.com/19292868552_10150189643478553](http://graph.facebook.com/19292868552_10150189643478553)

[https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552_10150189643478553](https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552_10150189643478553)

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

# jsf - 从命令按钮调用另一个表单

> ID：11766255
> 
> 赞同：6
> 
> 时间：2012-08-01T19:33:01.330
> 
> 标签：jsf, jsf-2, primefaces

当我提交表单时，它应该调用另一个表单以便我可以呈现它。我使用 primefaces，我希望它能够像下面这样工作。但它抛出了一个错误。

# xhtml

```
<h:form id="from1">
<h:inputText=......
<h:outputText=....
<p:commandButton id="submit" actionlistener="#{bean.method}" value="submit" process="form2"/>

<h:form id="form2">
<h:outoutText value="it is working" render="#{bean.boolean}" />
</h:form> 
```

错误

```
[Faces Servlet]] (http--127.0.0.1-8080-2) Servlet.service() for servlet Faces Servlet threw exception: javax.faces.FacesException: Cannot find component with identifier "form2" referenced from "form1_submit". 
```

**更新**

```
<h:form id="from1">
    <h:inputText=......
    <h:outputText=....
    <p:commandButton id="submit" actionlistener="#{bean.method}" value="submit" update=":form1"/>
</h:form> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T19:53:13.900

有两个错误：

*   相对组件客户端 ID 与最近的父[`UINamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UINamingContainer.html)组件相关（在您的情况下是`<h:form id="form1">`）。客户端 ID“form2”不存在于“form1”上下文中的任何位置。您需要使用绝对客户端 ID，并以默认为`:`. 这将从视图根目录开始搜索组件。

    ```
    process=":form2" 
    ```

*   您不能通过提交一个表格来处理另一个表格。您需要处理的所有字段根本没有提交（注意这不是 JSF 限制，而是 HTML 限制）。只需将您需要处理的字段附在与您需要提交的格式相同的表格中即可。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-14T07:54:02.377

p:remoteCommand 和带有 onclick 的 JS 的另一种解决方案在 [这里](http://forum.primefaces.org/viewtopic.php?f=3&t=5666&sid=df0adc945a8dfd5e75ebfcbc71efe282&start=10)描述。

# jsf - 不能使用 JSF 2.0 重复标记的 varStatus 的“结束”属性

> ID：11766259
> 
> 赞同：0
> 
> 时间：2012-08-01T19:33:16.713
> 
> 标签：jsf, jsf-2

我正在使用`repeat`JSF 2.0 的标签来遍历对象列表并显示它们的一些属性。我想使用的`varStatus`属性，`repeat`以便我可以访问循环索引、最后一个列表项的编号，并判断是否已到达列表末尾（因此不会显示分隔符）。我认为这会起作用：

```
<ui:repeat var="anObject" varStatus="repeatStatus" value="#{objectList}">
    <h:panelGroup>
        <h:outputText value="Item #{repeatStatus.index + 1} of #{repeatStatus.end}" />
        <h:outputText value="#{anObject.text}" />
    </h:panelGroup>

    <h:outputText value="&nbsp;" rendered="#{false == repeatStatus.last}" />
</ui:repeat> 
```

但是，它从不显示任何内容`repeatStatus.end`。和属性运行良好`index`。`last`

而不是`repeatStatus.end`，我尝试使用`objectList.size()`，但这仅适用于列表中的第一项。

如何将列表中的项目数显示为“Item x of y”文本的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:48:43.683

`end`仅在设置属性时使用`size`。

```
<ui:repeat ... size="#{fn:length(objectList)}"> 
```

或者，您也可以直接使用它。

```
Item #{repeatStatus.index + 1} of #{fn:length(objectList)} 
```

顺便说一句，布尔比较`#{false == repeatStatus.last}`是丑陋的。它已经返回一个布尔值；如果您想否定它，请使用`#{not repeatStatus.last}`.

# ruby-on-rails - 一次渲染 n 个对象，插入代码然后重复下一个 n 个对象 - Rails

> ID：11766266
> 
> 赞同：1
> 
> 时间：2012-08-01T19:33:33.107
> 
> 标签：ruby-on-rails, ruby, object, loops, render

新手，非常感谢以 3 组为单位渲染对象的一些帮助。

我目前显示带有渲染的对象列表：

```
<%= render @gifts %> 
```

每个对象都有一些从部分 _gift.html.erb 呈现的特征

这一切都很好。但是，如何遍历所有 @gifts 对象，每 3 个对象用一个 div 包装？期望的结果是这样的：

```
<div class="row-fluid>
# The first 3 objects from @gifts
</div>

<div class="row-fluid>
# The next 3 objects from @gifts
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:37:41.673

```
<% @gifts.each_slice(3) do |slice| %>
  <div class="row-fluid>
    # slice now is a 3 element array, iterate over it and render as you see fit
  </div>
<% end %> 
```

我更像是一个 HAML 人，但这应该可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:38:42.663

`each_slice`就是你要找的。这里有更详细的介绍：

[https://stackoverflow.com/a/2852103/9465](https://stackoverflow.com/a/2852103/9465)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:45:25.063

还可以考虑 in_groups_of（一个 Rails 猴子补丁到数组）：

[http://apidock.com/rails/Array/in_groups_of](http://apidock.com/rails/Array/in_groups_of)

# javascript - 使用 Javascript 访问动态创建的链接

> ID：11766267
> 
> 赞同：0
> 
> 时间：2012-08-01T19:33:33.680
> 
> 标签：javascript, jquery, ajax

我目前正在构建的社交网络上有一个墙发布系统，它使用 jQuery 和 Ajax 将消息发布到墙上，然后 php 将其保存到数据库中。帖子出现在墙上后，会有“评论”和“点赞”链接。单击“评论”链接时，我试图关闭评论框，但是我似乎无法使用 javascript 访问该元素。

这是显示墙贴的代码：

```
var wall_post = '<li><div class="user_activity_feed_item_user_pic"><img src="images/temp/prof_pic_temp.jpg" class="avatar"></div><div class="user_activity_feed_item_title"><a href="proflie-view.php">Tyler Bailey</a></div> <div class="user_activity_feed_item_content"><p class="activity_feed_text">' + textarea_content + '</p> ' + image_html + '<div class="data"><p class="name"><a href="' + siteurl + '" target="_blank">' + sitetitle + '</a></p><p class="caption">' + siteurl + '</p><p class="description">' + sitedesc + '</p></div><div class="user_activity_feed_item_comment_bar"><ul> <li class="activity_feed_timestamp">July 16, 2012 2:08pm</li> <li><a id="comment" href="#">Comment</a></li><li><a id="like" href="#like_view">Like</a></li></ul></div></div></li>'; 
```

这是我试图用来访问的代码`<a id="comment" href="#">`：

```
 //initiate comment box for status feeds
$(document).ready(function(){
    $('#comment_wrapper').hide();

    $('a#comment').click(function(){
        $('#comment_wrapper').show();
    });
}); 
```

任何关于如何使这项工作的想法或提示将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:36:29.547

只需使用事件委托，`on()`例如：

```
var listEl = $('ul'); // parent of the newly added li element
listEl.on('click', 'a', function(e){
    e.preventDefault();
    // do something in response to a click on a link from within
    // the newly-added content.
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9KzaM/)。

要记住的重要一点是，您绑定或分配或委托`on()`方法的元素在绑定/分配时*必须*存在于 DOM 中。因此，使用 DOMReady 或 onLoad 文档中存在的新添加元素的最近父元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:37:54.697

您可以使用[`on`](http://api.jquery.com/on/)（[`delegate`](http://api.jquery.com/delegate/)如果您使用的是旧版本的 jQuery，则可以使用）来监听喜欢或评论按钮上的所有点击事件：

```
var comment_wrapper = $("#comment_wrapper");
comment_wrapper.hide();

$(document).on("click", ".comment", function() {
    comment_wrapper.show();
}); 
```

不要使用[`live`](http://api.jquery.com/live/)，除非您使用的是旧版本的 jQuery，它不为您提供`on`or `delegate`。如果我没记错的话，它是`bind`用于侦听来自多个元素的事件的事件侦听器（除了方法之外）效率最低的。

此外，如果页面上将有多个具有 ID 的元素，则不要使用 ID - ID 需要在整个文档中是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:37:34.260

由于链接是动态生成的，因此使用 live()

```
$('a#comment').live("click", function(event){

//your
//actions here

}); 
```

# .net - Outlook.com 的 API

> ID：11766269
> 
> 赞同：9
> 
> 时间：2012-08-01T19:33:42.810
> 
> 标签：.net, api, outlook, hotmail, outlook.com

是否有用于通过 outlook.com 检索或发送电子邮件的当前或计划 API？我似乎无法找到是否或将通过 POP、IMAP、Exchange 或其他方式支持。[Live Connect 开发人员中心](http://msdn.microsoft.com/en-us/live/)似乎还没有提到 outlook.com 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T10:26:16.277

我不知道它现在是否意味着什么，但微软已经发布了我们需要的东西

[http://msdn.microsoft.com/en-us/library/live/hh826535](http://msdn.microsoft.com/en-us/library/live/hh826535)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:43:56.133

我找不到很多（都是很新的）

[对 Azure 和 Outlook.com 应用市场的引用](http://blogs.msdn.com/b/devschool/archive/2012/08/01/developing-outlook-com-well-back-from-whatever-july-was-and-outlook-com-appears-impact-on-windows-8-win8.aspx)

[还有一个 MSDN 参考，看起来很有希望，但没有说明有关 Outlook.com 的任何信息，](http://msdn.microsoft.com/library/exchange/821c8eb9-bb58-42e8-9a3a-61ca635cba59)但我敢打赌，您也可以（或很快）使用这些 API 连接到 Outlook.com

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-23T21:28:46.237

[Outlook.com 现在支持 IMAP](http://blogs.office.com/2013/09/12/outlook-com-now-has-imap/)。

[Outlook.com IMAP 的 MSDN 参考](http://msdn.microsoft.com/en-us/library/live/dn440163.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T21:54:54.363

虽然这可能不是每个人的全部答案，但我的 Palm 自己提出了这些设置，它们似乎有效：

接收邮件服务器：

*   pop3.live.com
*   SSL 加密
*   端口 995

对外邮件服务器：

*   smtp.live.com
*   使用认证：开启
*   TLS 加密
*   端口 587

[这似乎与Microsoft Answers](http://answers.microsoft.com/en-us/windowslive/forum/mail-sync/are-there-pop3-settings-for-outlookcom/8515bbdb-14bd-487b-86c1-bea3edf6a24f)中提供的社区信息一致。

# c# - 指定要使用的 MSDataSetGenerator 工具版本？

> ID：11766270
> 
> 赞同：3
> 
> 时间：2012-08-01T19:33:46.280
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-2008, dataset

我正在尝试升级 VS 2008 项目以在 VS 2010 中工作，有很多 .xsd 文件使用自定义工具 MSDataSetGenerator 生成类型化数据集

该构建在 2008 年运行良好，但在 2010 年构建时会产生数百个错误，可能是因为它在 2010 年使用的 MSDataSetGenerator 与 VS 2008 使用的不同。是否可以告诉 2010 使用与 2008 相同的工具版本？

我收到错误，例如

“XXX”类型已包含“YYY”的定义

“XXX”和“XXX”之间的歧义

在生成的 Designer.cs 文件 2010 中显示：

`// This code was generated by a tool. // Runtime Version:4.0.30319.17020`

`[global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")]`

2008 年显示：

`// This code was generated by a tool. // Runtime Version:2.0.50727.3053`

`[global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "2.0.0.0")]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:15:00.123

事实证明，这是由于

*   VS2010 转换项目时更改了命名空间，我能够进入属性并将自定义工具命名空间设置为那些命名空间与它们所在的文件夹不同的文件所需的命名空间
*   由于不正确的 csproj 结构，除了已经存在的文件之外，VS 还生成了第二个 *.Designer.cs 文件。问题是原始 Designer.cs 依赖于 .cs 文件而不是 .xsd 文件，通过删除重复的文件然后编译

因此，2010 年使用的 MSDataSetGenerator 在进行这些修复后工作正常

# google-analytics - 谷歌分析没有捕获传出的图像链接

> ID：11766273
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:34:12.393
> 
> 标签：google-analytics

当用户单击我的 wordpress 博客中的传出文本链接时，我可以在实时统计信息和每日统计信息中看到它被点击以及被点击的次数。但是，我在网站上也有广告，它们只是图像的传出链接，Google Analytics 不会捕获这些链接。

我已经搜索过，没有理由应该有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:26:39.990

您可能有一些代码来跟踪出站链接点击。你还没有分享它，但我猜你分享了，那就是跟踪图像点击的那个。

该代码可能不适用于广告，因为广告存在于 iframe 中，无法通过页面上的代码进行检查。

也许广告网络提供了一个 API，您可以使用它来识别广告点击等事件。否则你会被卡住，根本无法检测到该 iframe 内的点击。

# java - Eclipse 调试步进不起作用

> ID：11766274
> 
> 赞同：2
> 
> 时间：2012-08-01T19:34:13.177
> 
> 标签：java, eclipse

我正在使用 Eclipse 开发 Java 程序，我不得不从 JRE/JDK 1.7.x 降级到 JRE/JDK 1.6。

当我逐步完成并调用一个新类时，我要么找不到源，要么没有进入新类。例如，

```
//Here, it doesn't go to the Another class
MyClass class = new AnotherClass(value1, value2); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:38:54.243

当您尝试进入“AnotherClass”并获取未找到源时，应该有一个“附加源”按钮。尝试单击它，并在出现提示时选择包含“AnotherClass”源的项目。

即使 AnotherClass 在当前项目中，也要这样做。如果可行，请告诉我们，我们将尝试找出最初的问题可能是什么。

此外，您的里程可能会有所不同，但尝试为一个全新的项目进行调试，看看会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:43:59.950

一般来说，要检查的事项：

1.  您附加了正确的源，并且，如果您要指定外部目录，则在正确的目录级别。它将是另一个类的顶级包之上的目录。
2.  如果您要附加来自另一个包含 AnotherClass 的项目的源代码，请确保它是在打开调试符号的情况下编译的。

# jquery - struts2+jquery 插件+tiles 插件：如何更改远程 div？

> ID：11766275
> 
> 赞同：0
> 
> 时间：2012-08-01T19:34:13.027
> 
> 标签：jquery, json, struts2, tiles, struts2-jquery

我正在尝试学习如何使用远程分区，所以我一直在检查 struts2-jquery-plugin 的展示，但我不太了解事情是如何工作的。这是他们在下载中的内容：

struts.xml：

```
<struts>
    // some other instructions and constants
    <include file="showcase.xml" />
</struts> 
```

showcase.xml :( 应该是空的吗？？）

```
<struts>
    <package name="showcase" extends="struts-default,json-default" namespace="/">
    </package>
</struts> 
```

RemoteDiv.java：

```
package com.jgeppert.struts2.jquery.showcase;

import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.ParentPackage;
import org.apache.struts2.convention.annotation.Result;

import com.opensymphony.xwork2.ActionSupport;

@ParentPackage(value = "showcase")
public class RemoteDiv extends ActionSupport {

  private static final long serialVersionUID = -6793556760537290969L;

  @Action(value = "/remote-div", results = {
    @Result(location = "remote-div.jsp", name = "success")
  })
  public String execute() throws Exception
  {
    return SUCCESS;
  }
} 
```

所以我的问题是：

1) 注释@Action 是强制性的还是替换我们应该在struts.xml 中声明的动作？

2) **/remote-div**是关于什么的？我们应该在 struts.xml 中提及的动作的名称？？

3) 就我而言，我使用的是**tiles**，我应该使用 location = "mypage.tiles" 吗，我的意思是在 tiles.xml 中给页面的名称？

4) **@ParentPackage(value = "showcase")**呢，我们应该只提及父包的名称而不提及整个路径吗？

5）在这种情况下我需要**json 插件**？

如果我的问题很愚蠢，我会提前道歉。但请理解我，伙计们，我还是个初学者。提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:49:28.753

1.  这是动作映射注释。必须通过注释、XML 配置、约定（即约定或 REST 插件）以某种方式映射操作。
2.  这是动作的名称。不要通过注释*和*XML 定义操作——选择一个。
3.  是的，您需要定义结果类型，或使用图块作为默认结果类型。
4.  这是 S2 包的名称，即`<package>`配置文件中的 。
5.  如果您想要 JSON 结果。

关于您的问题“包声明是否应该为空”——仅当您希望它为空时。它定义了一个包，以及与包相关的各种内容（如拦截器堆栈、结果类型、结果、URL 的第一部分等）

# facebook - 带有粉丝门的 Facebook 粉丝页面会被 Google 索引吗？

> ID：11766276
> 
> 赞同：0
> 
> 时间：2012-08-01T19:34:13.807
> 
> 标签：facebook, seo, facebook-apps, facebook-page, googlebot

我正在开发一个带有“喜欢”粉丝门的 Facebook 粉丝页面应用程序（页面选项卡）（喜欢该页面的用户会看到真实内容，而看不到“喜欢我们”图片的用户）。
问题是我需要在 Google 的搜索中找到粉丝页面。
只有粉丝才能以任何方式进入应用程序这一事实是否会影响 Google 机器人？我目前假设确实如此，但我想确定一下。
如果这是否意味着我无法控制粉丝页面的 SEO？
我已经阅读了有关 SEO 的信息，但我还没有找到任何关于此的内容。
如果这里有人可以帮助我，我会非常高兴，甚至可以向我推荐一些文档或任何相关内容。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:05:16.963

你的假设是正确的。这里有两个解决方法：

1.  检测 Google 的 User-Agent 并在适当的时候显示非门控内容。

2.  使用 div 覆盖对页面进行门控，以便所有未门控的内容仍然存在，但在用户单击*Like*之前对用户不可用。

# css - CSS 不适用于 Wordpress 自定义菜单

> ID：11766281
> 
> 赞同：0
> 
> 时间：2012-08-01T19:34:39.047
> 
> 标签：css, wordpress

我正在尝试在我的 Wordpress 主题中安装自定义菜单。我已成功启用该功能并将菜单嵌入到我的布局中，唯一的问题是 CSS 不适用于菜单。

我有一个名为 NAV 的自定义 CSS，我还尝试将 21 岁的 CSS 复制并粘贴到我的 CSS（称为访问）中。但无论我做什么，导航风格都不会改变。我开始认为这可能是我的嵌入代码。这里是：

```
<?php wp_nav_menu( array( 'sort_column' => 'menu_order', 'container_class' => 'access', 'menu_class' => 'access' ) ); ?> 
```

这是生成的 HTML：

```
<div class="access">
<ul id="menu-home" class="access">
<li id="menu-item-10" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10"><a href="http://www.studentbridges.org/new/sample-page/">About Us</a>
<ul class="sub-menu">
<li id="menu-item-11" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11"><a href="http://www.studentbridges.org/new/sample-page/history/">History</a>      
</li>
</ul>
</li>
</ul>
</div> 
```

这是相关的CSS：

```
#access {
background: #222; /* Show a solid color for older browsers */
background: -moz-linear-gradient(#252525, #0a0a0a);
background: -o-linear-gradient(#252525, #0a0a0a);
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#252525), to(#0a0a0a));   /* older webkit syntax */
background: -webkit-linear-gradient(#252525, #0a0a0a);
-webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 1px 2px;
-moz-box-shadow: rgba(0, 0, 0, 0.4) 0px 1px 2px;
box-shadow: rgba(0, 0, 0, 0.4) 0px 1px 2px;
clear: both;
display: block;
float: left;
margin: 0 auto 6px;
width: 100%;
}
#access ul {
font-size: 13px;
list-style: none;
margin: 0 0 0 -0.8125em;
padding-left: 0;
}
#access li {
float: left;
position: relative;
}
#access a {
color: #eee;
display: block;
line-height: 3.333em;
padding: 0 1.2125em;
text-decoration: none;
}
#access ul ul {
-moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
-webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
box-shadow: 0 3px 3px rgba(0,0,0,0.2);
display: none;
float: left;
margin: 0;
position: absolute;
top: 3.333em;
left: 0;
width: 188px;
z-index: 99999;
}
#access ul ul ul {
left: 100%;
top: 0;
}
#access ul ul a {
background: #f9f9f9;
border-bottom: 1px dotted #ddd;
color: #444;
font-size: 13px;
font-weight: normal;
height: auto;
line-height: 1.4em;
padding: 10px 10px;
width: 168px;
}
#access li:hover > a,
#access ul ul :hover > a,
#access a:focus {
background: #efefef;
}
#access li:hover > a,
#access a:focus {
background: #f9f9f9; /* Show a solid color for older browsers */
background: -moz-linear-gradient(#f9f9f9, #e5e5e5);
background: -o-linear-gradient(#f9f9f9, #e5e5e5);
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#f9f9f9), to(#e5e5e5)); /* Older webkit syntax */
background: -webkit-linear-gradient(#f9f9f9, #e5e5e5);
color: #373737;
}
#access ul li:hover > ul {
display: block;
}
#access .current-menu-item > a,
#access .current-menu-ancestor > a,
#access .current_page_item > a,
#access .current_page_ancestor > a {
font-weight: bold;
}

#img {border-bottom:2px solid #9bc5c4;margin:0;padding:0;max-height:125px;overflow:hidden;} #block-cck_blocks-field_hdr_img {height:128px;overflow:hidden;}
#nav {height:45px;background:url(img/main-nav-bkgd.jpg) repeat-x     #26243c;width:1008px;height:45px;z-index:90;position:relative;}
#nav ul.nice-menu {width:993px;margin:0 0 0 15px;padding:0;display:inline;}
#nav ul.nice-menu li {display:block;float:left;background:none;border:none;position:relative;color:#FFF;font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;height:45px;font-size:13px;font-weight:bold;}
#nav ul.nice-menu li a {display:block;color:#FFF;font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;padding:13px 23px 14px 23px;font-size:13px;font-weight:bold;text-decoration:none;}
#nav ul.nice-menu li a:hover, #nav ul.nice-menu-down li.menuparent:hover a, #nav ul.nice-menu-down li.over a, #nav ul li.active-trail a {background:url(img/nav-over.jpg) repeat-x;}
#nav ul.nice-menu li ul {position:absolute;top:45px;left:0;}
#nav ul.nice-menu li ul li {width:200px;margin:0;padding:0;height:auto!important;}
#nav ul.nice-menu li ul li a, #nav ul.nice-menu-down li.menuparent ul li a {font-size:11px;color:#231f20;font-family:Georgia, "Times New Roman", Times, serif;display:block;clear:both;padding:5px 20px;margin:0;width:160px;background:#dfccb0!important;border-bottom:1px solid #FFF;font-weight:normal;}
#nav ul.nice-menu li ul li a:hover, #nav ul.nice-menu-down li.menuparent ul li a:hover {background:#d0b389!important;}
#nav ul.nice-menu li ul li ul {display:none;} 
```

关于我可能做错的任何输入？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:52:57.333

您的导航包装器具有`class`“活动”，但在您的 css 中，您的目标是`ID`.

**选项1**

更改`#access`为`.access`

~~**选项2**（可能更容易）~~

~~更改`<div class="access">`为`<div id="access">`~~

[工作示例](http://jsfiddle.net/GjmLp/2/)

# java - 枚举列表与布尔值类

> ID：11766282
> 
> 赞同：4
> 
> 时间：2012-08-01T19:34:41.793
> 
> 标签：java

现在，我有一个带字段的类。

```
@Entity
public class Fuel {

    @Id @GeneratedValue
    private Long id;

    private boolean diesel;
    private boolean gasoline;
    private boolean etanhol;
    private boolean cng;
    private boolean electric;

    public Fuel() {
        // this form used by Hibernate
    }

    public List<String> getDeclaredFields() {
        List<String> fieldList = new ArrayList<String>();

        for(Field field : Fuel.class.getDeclaredFields()){
            if(!field.getName().contains("_") && !field.getName().equals("id") && !field.getName().equals("serialVersionUID") ) {
                fieldList.add(field.getName());

            }
            Collections.sort(fieldList);
        }
        return fieldList;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public boolean isDiesel() {
        return diesel;
    }

    public void setDiesel(boolean diesel) {
        this.diesel = diesel;
    }

    public boolean isGasoline() {
        return gasoline;
    }

    public void setGasoline(boolean gasoline) {
        this.gasoline = gasoline;
    }

    public boolean isEtanhol() {
        return etanhol;
    }

    public void setEtanhol(boolean etanhol) {
        this.etanhol = etanhol;
    }

    public boolean isCng() {
        return cng;
    }

    public void setCng(boolean cng) {
        this.cng = cng;
    }

    public boolean isElectric() {
        return electric;
    }

    public void setElectric(boolean electric) {
        this.electric = electric;
    }   

} 
```

我认为这是有道理的，但是当我问另一个问题时（可能是一个愚蠢的例子，因为只能有自动或手动变速箱）[https://stackoverflow.com/questions/11747644/selectonemenu-from-declared-fields-list-在-pojo](https://stackoverflow.com/questions/11747644/selectonemenu-from-declared-fields-list-in-pojo)中，一位用户建议我改用枚举。像这样：

```
public enum Fuel {
    DIESEL("diesel"),
    GASOLINE("gasoline"),
    ETANHOL("etanhol"),
    CNG("cng"),
    ELECTRIC("electric");

    private String label;

    private Fuel(String label) {
        this.label = label;
    }

    public String getLabel() {
        return label;
    }

} 
```

然而，由于市场上存在混合动力车（如丰田普锐斯），父类将以这种方式实现布尔类：

```
private Fuel fuel = new Fuel(); 
```

如果以这种方式使用枚举列表：

```
private List<Fuel> fuelList = new ArrayList<Fuel>(); 
```

最佳做法是什么？请记住，我可能有 100 种不同的燃料（例如 =）。不要忘记它是一个实体，因此会保存在数据库中。

提前感谢=）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:36:38.463

在我看来，你想要一个 EnumSet，是的，绝对超过一堆布尔值。

这让我想起了很多标志的设计模式，我最近发布了一个关于这个问题的 SO 问题： [Proper design pattern for passing flags to an object](https://stackoverflow.com/questions/11582028/proper-design-pattern-for-passing-flags-to-an-object)

这支持轻松拥有 100 种不同的燃料类型。但是，它不能轻松支持同时使用 100 种不同燃料类型的汽车。但这对我来说听起来非常好 - 制造这样一辆汽车会非常困难，这完全反映在编码的程序复杂性中:) （当然，除非它真的只是支持所有基于玉米的燃料 - 你在其中可能更喜欢多态模式。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:42:30.137

你应该明确地使用枚举。

要获取对象的燃料类型的图像。

如果你使用布尔值，你最终会得到这样的结果：

```
if (myClass.IsGasoline())
else if (myClass.IsOtherFuel())
else if
... 
```

如果您使用枚举，您可以简单地执行以下操作：

```
Fuel fuel = myClass.GetFuelType() 
```

（这只是伪代码；））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:42:49.720

如果混合的数量很少，我想使用 Enums 会更好，并将混合作为另一种情况。否则，您将不得不以一种麻烦的方式管理逻辑，因为当您将某个 Fuel 设置为 true 时，您很可能还必须将当前设置为 true 的设置为 false。我这么说是因为您有燃料类别的设定器，而且您不仅在施工中定义。

编辑：如何询问您正在使用的燃料类型的方式也将是支持枚举的论据。

# android - 使用andar for android方法冻结相机

> ID：11766283
> 
> 赞同：0
> 
> 时间：2012-08-01T19:34:41.953
> 
> 标签：android, camera, andar

我会说明情况。我正在尝试解决如何在出现标记时暂停相机。我所说的标记是从这个链接显示的。

[http://code.google.com/p/andar/](http://code.google.com/p/andar/)

当标记出现时，我想要一种暂停相机的方法，这样即使相机移动，标记也不会消失。我需要这个，所以在玩游戏时相机可以慢跑，但标记仍会留在正确的位置。这是标记活动的代码

公共类 CustomActivity 扩展 AndARActivity {

```
CustomObject2 someObject;
ARToolkit artoolkit;
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    CustomRenderer renderer = new CustomRenderer();//optional, may be set to null
    super.setNonARRenderer(renderer);//or might be omited
    try {
        //register a object for each marker type
        artoolkit = super.getArtoolkit();
        someObject = new CustomObject2
            ("test", "patt.hiro", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject);
        someObject = new CustomObject2
        ("test", "android.patt", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject);
        someObject = new CustomObject2
        ("test", "barcode.patt", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject);
    } catch (AndARException ex){
        //handle the exception, that means: show the user what happened
        System.out.println("");
    }       
    startPreview();
}

/**
 * Inform the user about exceptions that occurred in background threads.
 * This exception is rather severe and can not be recovered from.
 * TODO Inform the user and shut down the application.
 */
public void uncaughtException(Thread thread, Throwable ex) {
    Log.e("AndAR EXCEPTION", ex.getMessage());
    finish();
} 
```

}

@覆盖

用于绘制立方体的绘制函数

```
public final void draw(GL10 gl) {
        super.draw(gl);

        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_SPECULAR,mat_flash);
        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_SHININESS, mat_flash_shiny);    
        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_DIFFUSE, mat_diffuse);  
        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_AMBIENT, mat_ambient);

        //this code draws the cube. 
        gl.glColor4f(0, 1.0f, 0, 1.0f);
        gl.glTranslatef( 0.0f, 0.0f, 12.5f );

        // experement with the api
        //draw the box
      box.draw(gl);
    } 
```

我会在 startPreview 函数周围包装代码吗？或者我是否需要检查对象是否被绘制，然后以这种方式停止预览。

我找到了这个命令，但我不确定在显示标记时如何实现它。我知道我需要一些条件，但不确定它是什么。camera.stopPreview();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:04:26.410

也许尝试添加一些代码来停止发送相机预览缓冲区进行处理。这样，它将继续渲染相机预览，但不会处理新帧。

# php - 获取数组计数，然后在每个循环中平均

> ID：11766284
> 
> 赞同：0
> 
> 时间：2012-08-01T19:34:47.347
> 
> 标签：php, arrays, joomla

这应该很容易，但由于某种原因它正在逃避我。我在这里有一个非常简单的查询和循环。我没有添加实际的查询...但是 $results 中的对象数组。$totalHits 添加工作正常。将 $iratings 中的数字加起来也可以。我还想做的是获取 $iratings 中的记录计数并打印出平均值......我似乎无法让计数部分正常工作。如何修改它以获取 $iratings 的计数，然后将 TotalRating 除以数组中“$iratings”的数量？如果这有意义吗？

```
$result = $db->loadObjectList();

// Tally Up the Stats

    $totalHits = 0;
    $totalRating = 0;

    foreach ($result as $item) {
    $ihits = $item->ihits;
    $totalHits = $totalHits + $ihits;
    $iratings = $item->iratings;
    $totalRating = $totalRating + $iratings;
    }

echo ('<br/>Total Hits: '.$totalHits);
 echo ('<br/>Total Rating: '.$totalRating); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:42:20.187

```
$result = $db->loadObjectList();

// Tally Up the Stats
$totalHits = 0;
$totalRating = 0;
$numIterations = 0;

foreach ($result as $item) {
    $ihits = $item->ihits;
    $totalHits = $totalHits + $ihits;
    $iratings = $item->iratings;
    $totalRating = $totalRating + $iratings;
    $numIterations++;
}

echo ('<br/>Total Hits: '.$totalHits);
echo ('<br/>Total Rating: '.$totalRating);
echo ('<br />Average Rating: ' . ($totalRating/$numIterations)); 
```

# excel - Excel 网格查找

> ID：11766285
> 
> 赞同：4
> 
> 时间：2012-08-01T19:34:52.223
> 
> 标签：excel, excel-formula

我在一个文件中有一个数组，例如：

```
    名称 年龄 鞋码
    安德鲁 19 12
    玛丽 17 8
    莎拉 15 10
    卫斯理 19 11
```

我想根据给定的名称和数据类型精确定位一条数据。例如，精确定位`Sarah`和`Age`，我希望单元格读取`15`。

我已经阅读[了这份](http://www.cpearson.com/excel/TablesAndLookups.aspx)关于双重查找的有用指南，但有一件事仍然困扰着我。

这是公式：

`=OFFSET(A1:C5,MATCH("Sarah",OFFSET(A1:C5,0,0,ROWS(A1:C5),1),0)-1,MATCH("Age",OFFSET(A1:C5,0,0,1,COLUMNS(A1:C5)),0)-1)`

当数据在同一个文件中时它可以工作，但是当我尝试使用另一个文件中的给定公式时，它会`#VALUE!`出错。

从另一个文件读取的代码（我所做的只是添加文件路径）：

```
=OFFSET(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5,MATCH("Sarah",OFFSET(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5,0,0,ROWS(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5),1),0)-1,MATCH("Age",OFFSET(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5,0,0,1,COLUMNS(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5)),0)-1) 
```

这里是隔开的，所以更容易阅读：

```
=OFFSET(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5,
MATCH("Sarah", OFFSET(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5, 0, 0,
ROWS(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5),1), 0)-1,
MATCH("Age", OFFSET(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5, 0, 0, 1, 
COLUMNS(C:file\path\'[Lister.xls]Shhet1'!$A$1:$C$5)), 0)-1) 
```

有谁知道为什么它不喜欢其他文件？这是相同的信息。

我该如何解决？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:20:17.510

只是为了扩展 Scott 的答案，关闭工作簿的外部路径被视为数组而不是引用，因此如果工作簿关闭，则期望在 OFFSET、SUMIF 或 COUNTIF 等参数中引用的函数会返回错误。

另一方面，INDEX 确实允许数组作为参数，因此您可以尝试输入：

```
=INDEX(A1:C5,MATCH("Sarah",INDEX(A1:C5,0,1),0),MATCH("Age",INDEX(A1:C5,1,0),0)) 
```

这也应该允许引用已关闭的工作簿。

INDEX 的另一个优点是它不是易失性的，因此只会在从属单元格 (A1:C5) 中的一个单元格发生更改时重新计算，而 OFFSET 是一个易失性函数，并且只要在工作簿中的任何位置进行更改就会重新计算效率较低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:47:49.397

某些功能要求目标工作簿可以工作 - 偏移量就是其中之一。间接和 Sumif 和 Countif 是其他的。您必须打开目标，或重新设计流程。

您可以尝试使用 index 函数，因为它类似于 offset 函数。

# python - Python生成器返回停止迭代？

> ID：11766287
> 
> 赞同：2
> 
> 时间：2012-08-01T19:34:57.090
> 
> 标签：python, generator, primes

我无法弄清楚为什么这个输出是：

```
>  File "<pyshell#177>", line 6, in func
>     list.append(next(PrimeGen)) 
>  StopIteration 
```

当它在我脑海中变得如此有意义时！无论如何，基本上我正在尝试使用 ifprime 函数和生成器来制作素数生成器来收集列表中的素数。

这确定是否为素数，如果是则返回该值，否则什么也没有。

> ```
> def prime(x):
>     if (2**(x-1))%x ==1:
>         return x 
> ```

这使得生成器应该返回一个包含最多 x 的素数的列表，但却给出了上面的错误。我以 2 开始列表，因为上面的函数 prime(x) 不将 2 视为素数（因此范围将从 3 开始）

> ```
> def func(x):
>   count=0
>   list=[2]
>   PrimeGen = (prime(X) for X in range(3,x+1))
>   while count<99:
>       list.append(next(PrimeGen))
>       count+=1
>   print list 
> ```

谁能解释为什么它不起作用？先感谢您！五。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:38:07.843

生成的值少于 99 个。使用`itertools.islice()`而不是循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:43:34.367

请注意，您的主要测试

```
def prime(x):
    if (2**(x-1))%x ==1:
        return x 
```

是错误的，它声明了 eg`341 = 11*31`和`2047 = 23*89`prime。

此外，对于较大`x`的 ，产生非常大的中间值，更有效的是

```
pow(2,x-1,x) 
```

这减少了中间值。

更强的素性检查的适度有效实施：

```
# The primes below 200 used as bases for the strong Fermat test,
# prime bases have more discriminatory power than composite bases,
# therefore we use prime bases first
bases = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199]

# The strong Fermat test for base b, where n is odd and large,
# n - 1 = m * 2^s with odd m
# the strong test checks whether b**m % n == 1 or
# b**(2**j) % n == n-1 for a 0 <= j < s
# If the test returns False, n is definitely composite, otherwise probably prime
def strongFermat(b,n,m,s):
    a = pow(b,m,n)
    if a == 1:
        return True
    n1 = n-1
    for i in xrange(s):
        if a == n1:
            return True
        a = (a*a) % n
    return False

# Multiple strong Fermat tests, by default use 10 bases
# The probability that a composite passes is less than 0.25**iters
def sppTest(n, iters = 10):
    # Assumes n > 1 and with no prime divisors < 200
    m = n-1
    s = 0
    while (m & 1) == 0:
        m >>= 1
        s += 1
    pbases = iters if iters < 47 else 46
    for i in xrange(pbases):
        if not strongFermat(bases[i],n,m,s):
            return False
    if pbases < iters:
        for i in xrange(iters-pbases):
            if not strongFermat(211 + 2*i,n,m,s):
                return False
    return True

# Trial division to weed out most composites fast
def trialDivisionPrime(n):
    if n < 2:
        return 0        # Not a prime
    if n < 4:
        return 2        # definitely prime
    if n % 2 == 0 or n % 3 == 0:
        return 0        # definitely composite
    for d in xrange(5, 200, 6):
        if d*d > n:
            return 2    # definitely prime
        if n % d == 0 or n % (d+2) == 0:
            return 0    # composite
    return 1            # not yet decided

# The prime test, first do trial division by numbers < 200,
# if that doesn't decide the matter, use some strong Fermat tests
# using 20 tests is the paranoid setting for largish numbers,
# for numbers in 64-bit range, ten or fewer suffice
def prime(n):
    td = trialDivisionPrime(n)
    return td > 1 or (td == 1 and sppTest(n,20))

# just check a couple of larger numbers
for c in xrange(100000):
    if prime(c + 10**25):
        print c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:48:18.130

这有点好（让你的“素数”函数返回数字，如果它是素数或`None`其他数字似乎有点愚蠢，尽管它实际上可以很好地代替下面稍微修改的版本，因为如何`bool(None) == False`）并且没有t导致你得到`StopIteration`：

```
def isprime(x):
    return (2**(x-1))%x==1

def func(x):
    list=[2]
    list.extend(X for X in range(3,x+1) if isprime(X))
    print list 
```

但是按照 Daniel Fischer 的说法，你的主要功能无论如何都是不正确的。

# c# - 处理模型属性 MVC4 ASP.NET 中的动态内容

> ID：11766290
> 
> 赞同：3
> 
> 时间：2012-08-01T19:35:05.320
> 
> 标签：c#, asp.net-mvc

我将 html 存储在我的数据库中的 JSON blob 中，该 blob 反序列化为`ViewCargo`C# 中的动态 , 。在视图级别，然后我使用类似的东西`@Model.ViewCargo.PromoDetails`来输出 HTML。

这很好用，除非在我需要更新动态属性中的内容的情况下。一个例子可能是段落标记内的一些消息，其中包含一个锚标记，其中需要根据正在加载页面的用户设置 href 属性，例如：

```
<p>Thank you for coming back to our promotion! It looks like you have already 
received a promotional card for this promotion! You can click 
<a href="[need to inject URL here]" target="blank">here</a> to retrieve 
your promotional gift card!</p> 
```

在这种情况下，URL 来自对数据库的调用，该数据库查找用户和促销并确定用户已加入此促销。因此，我想为他们提供一个链接来检索他们现有的卡（而不是发行新卡）。

我考虑过的一件事是在我的 json'd HTML 中放置一个占位符并使用 String.Replace。例如：

```
string existingUrl = db.UserAlreadySubmitted(userId,promoId);
if(!string.IsNullOrEmpty(existingUrl)) {
    Campaign.ViewCargo.PromoDetails = Campaign.ViewCargo.PromoDetails.Replace("[URLPlaceholder]",existingUrl);
}
return View(Campaign); 
```

因为我有一个中央控制器来处理几十个视图的视图加载，所以我想避免用这样的代码阻塞我的控制器方法。还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:16:35.423

如果您的链接 Url 是对数据库的调用的产物，那么您应该真正将这些调用放在 Controller 或 ViewModel 中，并使用 Routing 生成适当的 Url。

例如：

### 查看模型

```
public class PromoViewModel {
    private readonly YourDataSourceType context;

    public PromoViewModel(YourDataSourceType context) {
        this.context = context;
    }

    public int UserId {
        get { // get the user id }
    }

    public int PromoId {
        get { // get the promo id }
    }
} 
```

### 控制器动作

```
public ActionResult TheViewName() {
    PromoViewModel model = new PromoViewModel(DatabaseContext);
    return View(model);
} 
```

### 风景

```
@model The.Namespace.To.PromoViewModel

<p>Thank you for coming back to our promotion! It looks like you have already 
received a promotional card for this promotion! You can click 
<a href="@Url.RouteUrl(new { controller = "Controller Name", action = "Action Name", userId = Model.UserId, promoId = Model.PromoId })" target="blank">here</a> to retrieve 
your promotional gift card!</p> 
```

这样，您将链接链接到**路由操作**而不是**硬编码 url**。如果您以不同方式重构路线，则链接不会中断。

# android - 检索 SQLite 表中的最后一条记录（再次）

> ID：11766297
> 
> 赞同：3
> 
> 时间：2012-08-01T19:35:49.867
> 
> 标签：android, sql, sqlite

我先搜索了几次，还有一个问题。

远远地，我找到的最好的答案就是在[这个](https://stackoverflow.com/a/9902506/1296968)SO 答案中。总结：

`SELECT * FROM TABLE WHERE ID = (SELECT MAX(ID) FROM TABLE);`

我想知道的是下面的方法是否同样有效（因为我懒得改变它，我碰巧喜欢它）。

`SELECT * FROM TABLE ORDER BY ID DESC LIMIT 1`

根据我们拥有的[SQLite Autoincrement](http://www.sqlite.org/autoinc.html)文档，

> 如果插入时没有指定 ROWID，或者指定的 ROWID 的值为 NULL，则会自动创建适当的 ROWID。*通常的算法是给新创建的行一个比插入前表中最大的 ROWID 大一的 ROWID*。如果表最初为空，则使用 1 的 ROWID。[重点补充]

并进一步，

> 只要您从不使用最大 ROWID 值并且您从不删除表中具有最大 ROWID 的条目，上述常规 ROWID 选择算法将生成单调递增的唯一 ROWID。*如果您曾经删除行或曾经创建具有最大可能 ROWID 的行，则在创建新行时可能会重用先前删除的行中的 ROWID，并且新创建的 ROWID 可能不会严格按升序排列。* [重点补充]

我对我提出的 SQL 语句的问题来自最后一句话。这似乎表明，如果您删除任何行，则可以重用先前删除的 ROWID，而不管是否使用了最大 ROWID。如果我们假设从未使用过最大 ROWID（手动或仅通过那么多记录），那么我们只需要担心删除记录。在这种情况下，第一个 SQLite 文档摘录听起来好像您不会在我的查询中遇到任何问题。

有人有确切消息么？

我喜欢我的查询，因为它只涉及一个选择（虽然，以订购为代价）。我想，我可能过于关注微小的优化，不是吗？

**编辑：实际上，重新查看上面引用的 SQLite 页面，我认为使用 AUTOINCREMENT 关键字可以保证 ROWID 单调递增。最后一节详细讨论了它。**

> 如果列的类型为 INTEGER PRIMARY KEY AUTOINCREMENT，则使用稍微不同的 ROWID 选择算法。为新行选择的 ROWID 至少比以前存在于同一个表中的最大 ROWID 大一个。如果表以前从未包含任何数据，则使用 1 的 ROWID。如果该表之前保存了具有最大可能 ROWID 的行，则不允许新的 INSERT，并且任何插入新行的尝试都将失败并返回 SQLITE_FULL 错误。

现在对我来说似乎很清楚。只是无法填满表格（最多 9223372036854775807）。

对不起，我之前只略过这部分！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-11T03:39:59.473

我想我会在这里写一点关于这两个查询运行的速度。
在一张有大约 15,000 行的表上，抓取其中的 1400 行，然后获取最后输入的行，这就是我得到的结果：

```
SELECT macAddr, time, onPeakTotalIn, onPeakTotalOut, offPeakTotalIn, offPeakTotalOut FROM trafficMon WHERE macAddr="02:d2:ee:aa:aa:aa" ORDER BY time DESC LIMIT 1; 
```

CPU 时间：用户 0.008124 sys 0.000000
虚拟机步数：58741 全扫描
步数：14156

```
SELECT macAddr, time, onPeakTotalIn, onPeakTotalOut, offPeakTotalIn, offPeakTotalOut FROM trafficMon WHERE id = (SELECT MAX(id) FROM trafficMon WHERE macAddr="02:d2:ee:aa:aa:aa"); 
```

CPU 时间：用户 0.000295 sys 0.000000
虚拟机步骤：49全
扫描步骤：3

如您所见，明智地执行 MAX(id) 资源要容易得多，而且花费的时间要少得多。

虽然 0.008124s 一直都是错误的，但当您在基于 MIPS 的嵌入式设备（在我的例子中是路由器）上运行相同的命令时，在脚本中运行 20-30 倍以及一堆其他东西，所有这些都会加起来。

希望有帮助:)

鸭子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:44:44.577

您显示的两个查询是等效的。

至于他们是否返回最后一条记录，这取决于您所说的“最后一条”是什么意思。如果删除行，则不能依赖任一查询来返回最后插入的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-11T05:39:13.140

首先，您应该检索最后插入的行 id，然后从该行 id 中，您可以通过选择查询获取最后插入的记录。

```
RowID = sqlite3_last_insert_rowid(sqlite3Database)

SELECT * FROM tableName where RowID=RowID 
```

此选择语句将为您提供最后插入的记录

[在此链接](http://www.iospond.com/ios/article/iOS-SQLite-tutorial-with-CRUD-action)中获取更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-17T03:31:09.637

如果 table 有一个类型为“autoincrement”的字段，那么最好使用：

```
SELECT seq FROM sqlite_sequence WHERE name='TABLE_NAME' 
```

查看示例（对于表“客户”）：

```
SELECT seq FROM sqlite_sequence WHERE name='customers' 
```

# glsl - GLSL 操作数顺序问题

> ID：11766303
> 
> 赞同：1
> 
> 时间：2012-08-01T19:36:20.427
> 
> 标签：glsl

我正在尝试将 GIMP 划分混合过滤器代码移植到 GLSL。我已经能够为各种其他混合模式做到这一点，但由于某种原因，这不起作用。

这是 C gimp 代码（基于 SVG）：

```
if (layA == 0.0 || inCa / layCa > inA / layA)
  outCa = layA * inA + layCa * (1 - inA) + inCa * (1 - layA);
else
  outCa = inCa * layA * layA / layCa + layCa * (1 - inA) + inCa * (1 - layA)); 
```

这是移植的代码：

```
mediump float r;
if (overlay.a == 0.0 || base.r / overlay.r > base.a / overlay.a)
  r = overlay.a * base.a + overlay.r * (1.0 - base.a) + base.r * (1.0 - overlay.a);
else
  r = base.r * overlay.a * overlay.a / overlay.r + overlay.r * (1.0 - base.a) + base.r * (1.0 - overlay.a); 
```

我为每个通道执行此操作，然后使用 vec4 合并结果。

我的 GLSL 代码提供了与 GIMP C 代码完全不同的结果。除非我已经查看了 2 个小时的代码并错过了一个错误，否则我认为这一定是操作数顺序错误。或者一些与 C 不相似的 GLSL 东西。

有任何想法吗？

更新：

它是什么样子的：http: [//i.imgur.com/EjPhz.jpg](http://i.imgur.com/EjPhz.jpg) 它应该是什么样子的：http: [//i.imgur.com/bqbFT.png](http://i.imgur.com/bqbFT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:53:03.773

问题出在我的代码中。我将初始值提取为lowp。

# dependencies - 常春藤 - 在多个项目中获取模块及其修订的平面列表

> ID：11766316
> 
> 赞同：2
> 
> 时间：2012-08-01T19:37:05.430
> 
> 标签：dependencies, report, ivy, dependency-management

我们使用 Ivy 来管理我们的库依赖项，我们需要创建所有模块及其在某些配置中的修订的报告，并将其结合到大约 30 个项目中。只是一个简单的列表，其中没有依赖项。

“某些配置”是指我们在 ivy.xml 文件中使用配置“compile”、“runtime”、“test”，我们只想包含“compile”和“runtime”，因为我们只对列表感兴趣实际随产品一起提供的库。

我熟悉 <ivy:report /> 任务，我们使用它为每个项目生成 HTML 报告。当然，可以选择使用此输出并对其进行解析，或者使用 XSLT 来实现所需的报告格式。但是，我想知道是否有更简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:34:52.850

[artifactreport](http://ant.apache.org/ivy/history/latest-milestone/use/artifactreport.html)任务可用于生成 XML 文件，详细说明配置中的工件：

```
<ivy:artifactreport tofile="build/runtime.xml" conf="runtime"/> 
```

这是一个稍微不同的解决方案，它结合了[groovy](http://groovy.codehaus.org/The+groovy+Ant+Task)和 ivy [cachefileset](http://ant.apache.org/ivy/history/latest-milestone/use/cachefileset.html)任务，根据编译依赖项生成 Eclipse“.classpath”文件

```
<macrodef name="eclipse">
    <attribute name="srcdir"/>
    <attribute name="outputdir"/>
    <attribute name="classpathref" default="build.path"/>
    <attribute name="conf" default="compile"/>
    <sequential>
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="@{classpathref}"/>

        <ivy:cachefileset setid="libfiles" conf="@{conf}"/>

        <groovy>
        <arg value="@{srcdir}"/>
        <arg value="@{outputdir}"/>

        import groovy.xml.MarkupBuilder

        //
        // Generate the classpath file
        //
        // The "lib" classpathentry fields are populated using the ivy artifact report
        //
        project.log("Creating .classpath")

        new File(".classpath").withWriter { writer ->
            def xml = new MarkupBuilder(writer)

            xml.classpath() {
                classpathentry(kind:"src",    path:args[0])
                classpathentry(kind:"output", path:args[1])
                classpathentry(kind:"con",    path:"org.eclipse.jdt.launching.JRE_CONTAINER")

                project.references.libfiles.each {
                    classpathentry(kind:"lib", path:it)
                }
            }
        }
        </groovy>        
    </sequential>
</macrodef> 
```

# go - Go 有 lambda 表达式或类似的东西吗？

> ID：11766320
> 
> 赞同：98
> 
> 时间：2012-08-01T19:37:20.453
> 
> 标签：go, lambda

Go 是否支持 lambda 表达式或类似的东西？

我想从另一种使用 lambda 表达式 (Ruby) 的语言移植一个库。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-01T19:44:05.463

是的。

[这是一个示例](http://livingcode.org/2009/11/13/go-language-and-functional-programming.html)，请仔细复制和粘贴：

> ```
> package main
> 
> import fmt "fmt"
> 
> type Stringy func() string
> 
> func foo() string{
>   return "Stringy function"
> }
> 
> func takesAFunction(foo Stringy){
>   fmt.Printf("takesAFunction: %v\n", foo())
> }
> 
> func returnsAFunction()Stringy{
>   return func()string{
>     fmt.Printf("Inner stringy function\n");
>     return "bar" // have to return a string to be stringy
>   }
> }
> 
> func main(){
>   takesAFunction(foo);
>   var f Stringy = returnsAFunction();
>   f();
>   var baz Stringy = func()string{
>     return "anonymous stringy\n"
>   };
>   fmt.Printf(baz());
> } 
> ```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-08-02T17:35:25.673

Lambda 表达式也称为函数文字。Go 完全支持它们。

请参阅语言规范： http: [//golang.org/ref/spec#Function_literals](http://golang.org/ref/spec#Function_literals)

查看代码步行，带有示例和描述： http: [//golang.org/doc/codewalk/functions/](http://golang.org/doc/codewalk/functions/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-07-21T06:38:55.687

> **是的**

在计算机编程中，**匿名函数或 lambda 抽象**（函数字面量）是不绑定标识符的函数定义，**Go 支持匿名函数**，可以形成闭包。当您想内联定义函数而不必命名时，匿名函数很有用。

```
 package main
    import "fmt"

    func intSeq() func() int {
        i := 0
        return func() int {
            i += 1
            return i
        }
    }

    func main() {
       nextInt := intSeq()
       fmt.Println(nextInt())
       fmt.Println(nextInt())
       fmt.Println(nextInt())
       newInts := intSeq()
       fmt.Println(newInts())
    } 
```

function intSeq 返回另一个函数，我们在 intSeq 的主体中匿名定义。返回的**函数关闭变量 i 以形成一个闭包**。

```
Output
$ go run closures.go
1
2
3
1 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-13T16:40:30.547

golang好像没有做lambda表达式，但是可以用一个字面的匿名函数，我在学习比较js的时候写了一些例子，希望对你有帮助！！

### 没有参数返回字符串：

```
func() string {
    return "some String Value"
}
//Js similar: () => 'some String Value' 
```

### 带字符串参数并返回字符串

```
func(arg string) string {
    return "some String" + arg
}
//Js similar: (arg) => "some String Value" + arg 
```

### 没有参数也没有回报（void）

```
func() {
   fmt.Println("Some String Value")
} 
//Js similar: () => {console.log("Some String Value")} 
```

### 带参数且无返回（无效）

```
func(arg string) {
    fmt.Println("Some String " + arg)
}
//Js: (arg) => {console.log("Some String Value" + arg)} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-23T11:52:16.533

我正在寻找的一个尚未提供的示例是将值直接分配给来自匿名函数的变量，例如

```
test1, test2 := func() (string, string) {
    x := []string{"hello", "world"}
    return x[0], x[1]
}() 
```

注意：您需要在函数末尾使用方括号`()`来执行它并返回值，否则仅返回函数并产生`assignment mismatch: 2 variable but 1 values`错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-16T16:15:49.583

这是一个“咖喱函数”示例。然而，相对于 Swift、C# 等其他语言中的 lambda 函数语法，语法似乎不清楚。

```
func main() int { 
  var f func(string) func(string) int
  f = func(_x1 string) func(string) int { return func(_x2 string) int { return strings.Compare(_x1,_x2) } }
  return ((f)("b"))("a")
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-08-05T01:24:02.747

是的，因为它是一种功能齐全的语言，但没有像通常的 lambda 符号那样的粗箭头 (=>) 或细箭头 (->)，并且为了清晰和简单起见，使用**func关键字。**

# security - 模块中的 Orchard CMS 和 app_data 文件夹

> ID：11766321
> 
> 赞同：1
> 
> 时间：2012-08-01T19:37:28.947
> 
> 标签：security, orchardcms

我正在创建一个模块，我需要在其中将证书文件存储在站点中。在普通网站中，我会将它们放在 app_data 文件夹中。在 Orchard 中，我在模块中创建了一个 ASP.Net App_Data 文件夹。然后我已将这两个文件添加到该目录中。

如何在代码中获取这两个文件。在正常的网站中，它会是这样的：

```
<acceptantCertificate filename="App_Data\my_private.pfx" password="something" /> 
```

现在在模块中，我创建了用于在上面存储此值的设置部分。所以不用担心密码。这存储在数据库中。现在我应该给这个设置什么路径才能找到文件。App_Data 文件夹是此类文件的正确位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:15:51.233

App_Data 很好。在“~/Modules/YourModuleName/App_Data/my_private.pfx”上做一个地图路径应该可以解决问题。

# sql - 如何仅为当前进程禁用 SQL Server 触发器？

> ID：11766322
> 
> 赞同：2
> 
> 时间：2012-08-01T19:37:29.053
> 
> 标签：sql, sql-server, transactions

有人可以仔细检查我的精简示例吗？当 Documents 表更新时，我希望它更新 Queue 表上的 EntryDate。但是，我不希望 Queue 表上的触发器仅针对此过程触发。意思是，如果其他进程在该进程运行时更新 Queue 表上的 EntryDate，我希望 Queue 表上的触发器为该特定事务触发。我不确定是否需要对以下代码进行任何类型的锁定，以确保没有其他进程被踩到。谢谢！

```
create trigger [dbo].[Documents_trigUpdate] on [dbo].[Documents]
for update
as

begin transaction

alter table [Queue] disable trigger Queue_trigUpdate
update  [Queue] set EntryDate = getdate()
alter table [Queue] enable trigger Queue_trigUpdate

commit transaction

go 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T19:53:37.580

您需要避免禁用然后重新启用触发器，因为这将影响所有进程，而不仅仅是当前进程。如果您放置某种类型的锁，您将序列化您的代码，这可能会成为您系统的瓶颈。

另一种方法是使用`Context_info`当前连接的 ，`Queue`如果已设置特定上下文，则将触发器更改为不执行。

[本文介绍了这种技术](http://www.mssqltips.com/sqlservertip/1591/disabling-a-trigger-for-a-specific-sql-statement-or-session/)，下面提供了一个示例：

```
-- Creating the queue trigger
create trigger [dbo].[Queue_trigUpdate] on [dbo].[Queue]
for update
as   

declare @Cinfo varbinary(128)  
select @Cinfo = Context_Info()  
if @Cinfo = 0x55555  
    return  

print 'Trigger Executed'  
-- Actual code goes here  
go 
```

要防止触发器被执行，您可以执行以下操作：

```
create trigger [dbo].[Documents_trigUpdate] on [dbo].[Documents]
for update
as

-- Save the original context info    
declare @originalContextInfo VARBINARY(128)
set @originalContextInfo = Context_Info()

set Context_Info 0x55555 
update  [Queue] set EntryDate = getdate()

-- Reset the context info
set Context_Info @originalContextInfo 
go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:53:33.933

我以前做过这个，我不知道这是否是最好的方法，甚至不知道你想要什么，但你可以使用 CONTEXT_INFO()。

在要忽略的进程中，运行：

```
DECLARE @ContextInfo varbinary(128)
SET @ContextInfo = CAST('SomethingMeaningfulToYou' AS varbinary(128))
SET Context_Info @ContextInfo 
```

然后，在您的触发器中，如果说，更新行。

```
CREATE TRIGGER X 
ON TABLE Y 
AFTER UPDATE AS
BEGIN
    UPDATE Something
    SET something = somethingelse
    WHERE yourconditions AND 
         (CONTEXT_INFO IS NULL OR CONTEXT_INFO() <> CAST('SomethingMeaningfulToYou' AS varbinary(128)))
END 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-01T19:52:11.797

您应该能够调用[DISABLE TRIGGER](http://msdn.microsoft.com/en-us/library/ms189748.aspx)执行一些工作，然后在完成后调用[ENABLE TRIGGER](http://msdn.microsoft.com/en-us/library/ms182706.aspx)

# java - 内存管理环境中的内存管理

> ID：11766323
> 
> 赞同：-3
> 
> 时间：2012-08-01T19:37:32.090
> 
> 标签：java, memory, memory-management, garbage-collection

如何在内存管理环境中进行内存管理？

它只是垃圾收集还是其他什么？

在 Java 中，GC 由 VM 定期完成，无需显式调用垃圾收集。我知道我们可以使用 System.gc() 来请求垃圾收集，但不能保证垃圾收集会发生。

那么，在内存管理环境中还有其他的内存管理方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:41:53.553

没有很多选择。您还可以检查不同类型的 GC 如何工作[http://sanjaal.com/java/574/java-general/all-about-java-garbage-collection-types-algorithms-advantages-and-disadvantages/](http://sanjaal.com/java/574/java-general/all-about-java-garbage-collection-types-algorithms-advantages-and-disadvantages/)或尝试调整 GC 参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:45:24.870

您的问题的简短回答是否定的。在 Java 环境中，您实际上无法直接控制如何释放或管理堆空间。话虽如此，现代 JVM 具有极其高效的 GC 算法，并且通常可以完美地管理除最极端情况外的所有内存使用情况。

即使您无法直接控制收集哪些对象以及该过程何时发生，您也可以使用[java.lang.ref](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/package-summary.html)中的引用类来影响哪些对象是合格的并且更有可能在给定时间被垃圾收集.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:39:38.540

垃圾收集是在托管环境中管理内存的方式（事实上，这就是它被称为托管环境的原因——因为内存是为程序员管理的）。

通常，您不需要在此类环境中管理内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:17:26.673

简短的回答：您不必担心垃圾收集；您唯一需要担心的是不要在 java 中导致内存泄漏。看到这个：[用Java创建内存泄漏](https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T19:54:19.327

即使你不能真正在技术层面管理你的内存，开发人员仍然能够在一定程度上管理内存。我的意思是，与其试图对抗或改进 JVM，不如让它为您完成工作。但是话虽如此，一个写得不好的程序（即糟糕的内存管理，也就是内存使用）会导致糟糕的程序体验。

但是，如果您从设计角度管理您的内存（即不浪费内存，使用适当的算法和数据结构，取消引用/释放您认为合适的内存），这些东西可以让您在一定程度上对开发人员进行控制。

# objective-c - Objective-C 编译错误

> ID：11766326
> 
> 赞同：4
> 
> 时间：2012-08-01T19:37:38.143
> 
> 标签：objective-c, linux, fedora

我正在使用 Fedora (laughlin)。我在这个发行版上用 c 和 java 做了很多编程。所以我决定在 linux 中尝试一些 Objective-C 编程。我在互联网上搜索了很多页面，最后找到了一个。

[http://www.techotopia.com/index.php/Building_and_Installing_GNUstep_on_Linux](http://www.techotopia.com/index.php/Building_and_Installing_GNUstep_on_Linux)

我按照此页面上的说明进行了安装`GNUstep`。

安装过程一切顺利。但是在写了一小段代码并使用命令编译之后：

```
gcc gnustep-config --objc-flags` -L/usr/GNUstep/System/Library/Libraries -lgnustep-base hello.m -o hello 
```

它给了我以下错误：

`/usr/bin/ld: /usr/GNUstep/System/Library/Libraries/libgnustep-base.so: undefined reference to symbol 'objc_msg_lookup' /usr/bin/ld: note: 'objc_msg_lookup' is defined in DSO /usr/lib/libobjc.so.2 so try adding it to the linker command line /usr/lib/libobjc.so.2: could not read symbols: Invalid operation collect2: ld returned 1 exit status`

我是 Objective-C 的新手。我不知道链接器命令存在哪里。我尝试将 添加`/usr/lib`到`env.`变量中。但它没有成功。我还试图在他们的论坛上找到解决方案（如果他们有的话！！）。但他们没有。

谁能帮我解决这个问题？

提前致谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T19:46:53.777

它抱怨您引用的代码没有链接到您的应用程序。有用的是，它会告诉您缺少什么以及它在哪里。尝试添加`-lobjc`到标志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-20T17:29:40.877

在我的情况下，只需将 -lobjc 标志添加到命令行参数就可以了。

```
gcc `gnustep-config --objc-flags` -Wl,--no-as-needed -lgnustep-base -lobjc firstObjcProg.m -o firstObjcProg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:47:22.470

尝试这个：

```
gcc `gnustep-config --objc-flags` -o hello hello.m -L /GNUstep/System/Library/Libraries -lobjc -lgnustep-base 
```

# permissions - GitLab 的公共项目/默认权限

> ID：11766328
> 
> 赞同：7
> 
> 时间：2012-08-01T19:37:50.950
> 
> 标签：permissions, gitlab

我将 Gitorious 与 Gitlab 进行比较，虽然我喜欢 Gitlab 的很多地方，但它有一个非常根本的问题。对于每个新存储库，创建者都需要管理有权访问该存储库的人员。

我们的模型相当简单：如果您可以访问 gitlab，那么您就可以访问大多数存储库。只有少数存储库会被关闭，我们甚至不需要在 gitlab 上使用它们。Gitorious 支持该模型，但我在 gitlab 上没有看到任何方法。

可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T20:05:30.187

公共存储库是开发人员一直拒绝添加支持的东西。他们不想让 gitlab 成为 github 的竞争对手。见[https://github.com/gitlabhq/gitlabhq/issues/12](https://github.com/gitlabhq/gitlabhq/issues/12)

团队支持仍处于开发阶段。希望您的要求将在某个时候实施。见： [https ://github.com/gitlabhq/gitlabhq/issues/739](https://github.com/gitlabhq/gitlabhq/issues/739)

在实现更好的团队支持之前，您最好的选择可能是使用如下脚本： [https](https://gist.github.com/1722391) ://gist.github.com/1722391将用户添加到所有项目。这是我目前正在使用的方法。

或使用新的 rake 命令批量添加用户：

```
rake add_user_to_project_teams[email]  # Add user to as a developer to all projects
rake add_users_to_project_teams        # Add all users to all projects, system administrators are added as masters 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T20:39:04.493

允许公共存储库的 Gitlab 分支如雨后春笋般涌现：[https ://github.com/ArthurHoaro/Public-GitLab](https://github.com/ArthurHoaro/Public-GitLab)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:11:34.510

对于 Gitlab，还有两个 Rake 任务可以管理将用户批量添加到存储库：

```
rake add_user_to_project_teams[email]  # Add user to as a developer to all projects
rake add_users_to_project_teams        # Add all users to all projects, system administrators are added as masters 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T14:27:23.780

自 GitLab 6.2 起允许公共项目。

公共项目是 GitLab uservoice 组中请求最多的功能，请参阅[http://gitlab.uservoice.com/forums/176466-general/suggestions/3159951-allow-public-repositories](http://gitlab.uservoice.com/forums/176466-general/suggestions/3159951-allow-public-repositories)

# javascript - 虚拟滚动 - 没有 Ajax

> ID：11766345
> 
> 赞同：3
> 
> 时间：2012-08-01T19:39:12.673
> 
> 标签：javascript, hammer.js

我一直在网上寻找各种“无限滚动”解决方案，这些解决方案让用户滚动浏览您网站上的数据或图像，然后将数据循环回开始或在它们进行时加载位。例如在一个选择框中，如：

[http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

我正在尝试做的是类似的事情，但我已经在一个数组中有一个包含 200 多条记录的完整数据集，每条记录都呈现为列表项。一次只有 5 个列表项适合屏幕，所以每次我到达该组的末尾时，下一组已经在那里等待滚动（使用触摸/鼠标事件）。

当我进入每个数据集时，我已经尝试附加/前置元素，但这在移动设备上非常慢。我接下来尝试的是这样的：

1）创建一些占位符。

2）当占位符被滚动出视觉边界时，将它们推回初始位置（使用新数据），创建无缝滚动的错觉。

3）从框位置找出要从中获取数据的页面索引。使用新数据重新填充所有占位符。

在触摸/鼠标移动事件处理程序中：

```
ondrag: function(e) {
  var top, row, rows, delta = 1, prefix;

  if(e.direction === 'up') {
    e.distance = e.distance * -1;
  }

  rows = Math.floor(this._grid.scrollHeight / this._grid.ticketHeight); 

  // Use a simpler row-snap rule.
  top = (this._previous.top + e.distance) * delta;  // Top offset.
  row = Math.floor(top / this.rowHeight);  // Row position.

  // Makes the scroll infinite by seamlessly bouncing back.
  if(Math.abs(row) > rows) {                
     top = (e.distance * delta);        
  }

  elems = this.$el.find('.ticketRow');
  for(i = 0; i < elems.length; i++) {
    elems[i].style.webkitTransform = 'translate(0px,' + ((i * this.rowHeight) + top) + 'px)';       
  }

  if(this._offset !== Math.abs(row)) {
    this._offset = Math.abs(row);

    if(e.direction == 'down') {
      this._track--;
    } else {
      this._track++;
    }
    // Get new data from data source and apply it to the place holders.
    this.update(this._track);
  }
}, 
```

然而，这会产生令人讨厌的弹跳/抖动效果。我还尝试将每行的新位置设置为移动距离的倍数，但我仍然得到非常不稳定的结果。

我的问题是，我是否正确地处理了这个问题？有什么东西可以为我做这件事吗？更好的是，上面我的数学缺陷在哪里？

任何帮助表示赞赏！

注意：我正在使用[hammer.js](http://eightmedia.github.com/hammer.js/)来捕捉我的触摸手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:32:05.790

您是否尝试过将所有项目设置为`display: none`并在初始化时显示前五个，然后仅将显示设置为`block`使用 scrollPosition？

# visual-studio-2010 - 如果我更改数据库，是否需要重新生成实体模型？

> ID：11766347
> 
> 赞同：0
> 
> 时间：2012-08-01T19:39:48.847
> 
> 标签：visual-studio-2010, entity-framework, entity-model

我得到了一个控制台应用程序，可以移动到不同的服务器。我还需要将此应用程序使用的表移动到不同的服务器/数据库。新数据库具有不同的名称。我相信该应用程序在我之前从 VS2005 转换为 VS2010。我更改了应用程序配置中的连接字符串。该项目包含实体模型。我在其中一个自动生成的模型文件中注意到这一行： [global::System.Data.Linq.Mapping.DatabaseAttribute(Name="OldDatabaseName")]

这是一个自动生成的文件。有没有办法在不重新创建模型和重建应用程序的情况下不引用旧数据库？谢谢你，珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:52:00.467

假设基础表具有相同的名称、结构和约束，您需要做的就是更改配置文件和生成的文件中的连接字符串以指向新数据库。

还值得更改`.edmx`文件的数据库属性以确保它与上述一致，以防您重新生成文件。

# vb.net - 如何通过设置 ObjectA = ObjectB 将绑定控件更新为对象

> ID：11766349
> 
> 赞同：0
> 
> 时间：2012-08-01T19:39:53.493
> 
> 标签：vb.net, object, data-binding

我有一个对象，它的属性也是对象并绑定到文本框。我希望能够设置 MyOriginalObj = MyNewOject 并让文本框显示新值。这不起作用。我要做的是 MyOriginalObj.PropertyA = MyNewObj.PropertyA。这将导致文本框更新。

我想避免使用后一种方法，因为我的实际类比下面的测试类具有更多的属性，并且会增加执行所有更新所需的代码。如果必须的话，我想我可以取消绑定并绑定到新对象，但这又是添加更多代码。MyOriginalObj = MyNewObj 方法将是最简单的解决方案，但我不确定是否可行。请指教。

```
Dim fam As New Family

Public Class Person

    Dim _Age As Integer = 0
    Dim _Name As String = ""

    Public Property Age() As Integer
        Get
            Return _Age
        End Get
        Set(ByVal value As Integer)
            _Age = value
        End Set
    End Property

    Public Property Name() As String
        Get
            Return _Name
        End Get
        Set(ByVal value As String)
            _Name = value
        End Set
    End Property

    Public Sub New(ByVal age As Integer, ByVal name As String)

        With Me
            ._Age = age
            ._Name = name
        End With

    End Sub

End Class 
```

-

```
Public Class Family

    Implements System.ComponentModel.INotifyPropertyChanged
    Public Event PropertyChanged(ByVal sender As Object, 
          ByVal e As System.ComponentModel.PropertyChangedEventArgs) _
          Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

    Dim _Father As New Person(0, "")
    Dim _Mother As New Person(0, "")

    Public Property Father() As Person
        Get
            Return _Father
        End Get
        Set(ByVal value As Person)
            _Father = value
            RaiseEvent PropertyChanged(Me, 
                New System.ComponentModel.PropertyChangedEventArgs("Father"))
        End Set
    End Property

    Public Property Mother() As Person
        Get
            Return _Mother
        End Get
        Set(ByVal value As Person)
            _Mother = value
            RaiseEvent PropertyChanged(Me, 
                New System.ComponentModel.PropertyChangedEventArgs("Mother"))
        End Set
    End Property

End Class 
```

-

```
Private Sub Form1_Load(ByVal sender As System.Object, 
                       ByVal e As System.EventArgs) Handles MyBase.Load

    TextBox1.DataBindings.Add("Text", fam, "Father.Name")
    TextBox2.DataBindings.Add("Text", fam, "Mother.Name")

End Sub 
```

-

```
Private Sub Button1_Click(ByVal sender As System.Object, 
                          ByVal e As System.EventArgs) Handles Button1.Click

    ' Method A - works, textboxes displays the new values.
    ' fam.Father = New Person(30, "Joe")
    ' fam.Mother = New Person(29, "Jane")
    ' Exit Sub

    ' Method B - does not update textboxes.
    Dim fam2 As New Family
    fam2.Father = New Person(40, "Bob")
    fam2.Mother = New Person(39, "Betty")

    ' I would like the updated properties to be shown in the bound 
    ' textboxes when I set fam = fam2\.  Object fam will contain 
    ' the new values but the textboxes will not reflect that.
    fam = fam2
    Console.WriteLine("{0},{1} : {2}, {3}", _
                      fam.Father.Name,  _
                      fam.Father.Age,  _
                      fam.Mother.Name,  _
                      fam.Mother.Age)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:09:29.590

你可以在你的`family`类中实现一个方法来实现你正在寻找的东西。

```
Public Class Family

  . . .

  Public Sub ReplaceFamily(newFamily As Family)
    With newFamily
      Me.Father = .Father
      Me.Mother = .Mother
    End With
  End Sub

End Class 
```

你的电话看起来像：

```
fam.ReplaceFamily(fam2) 
```

如果你有很多属性`family`，你可以在方法中使用反射，`ReplaceFamily`而不是单独设置每个属性。

# solr - 了解 Lucene 领先的通配符性能

> ID：11766351
> 
> 赞同：5
> 
> 时间：2012-08-01T19:39:55.217
> 
> 标签：solr, lucene, full-text-search

Lucene 默认情况下不允许在搜索词中使用前导通配符，[但可以通过以下方式启用](http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support_is_available_from_Lucene.3F)：

```
QueryParser#setAllowLeadingWildcard(true) 
```

我了解使用前导通配符会阻止 Lucene 使用索引。带有前导通配符的搜索必须扫描整个索引。

**如何演示领先的通配符查询的性能？什么时候可以使用`setAllowLeadingWildcard(true)`？**

我已经建立了一个包含 1000 万个文档的测试索引，格式如下：

```
{ name: random_3_word_phrase } 
```

磁盘上的索引为 360M。

我的测试查询执行良好，但我无法实际演示性能问题。例如，查询`name:*ing`在不到 1 秒的时间内生成超过 110 万个文档。查询`name:*ing*`同时产生超过 150 万个文档。

这是怎么回事？为什么这么慢？10,000,000 个文档还不够吗？文档是否需要包含多个字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T19:51:58.803

取决于你有多少内存，以及有多少令牌索引在内存中。

在任何旧计算机上都可以快速搜索 360MB 的总索引。360GB 的索引需要更长的时间...... ;)

例如，我启动了一个旧的 2GB 索引，并搜索“*e”。

在一个 8GB 的​​盒子上，它在 5 秒内返回了 50 万次点击。我在一个只有 1GB 内存的盒子上尝试了相同的索引，大约花了 20 秒。

为了进一步说明，这里有一些通用的 C# 代码，它基本上对 1000 万个随机 3 词短语进行“** E*”类型的搜索。

```
static string substring = "E";

private static Random random = new Random((int)DateTime.Now.Ticks);//thanks to McAden

private static string RandomString(int size)
{
    StringBuilder builder = new StringBuilder();
    char ch;
    for (int i = 0; i < size; i++)
    {
        ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
        builder.Append(ch);
    }

    return builder.ToString();
}

static void FindSubStringInPhrases()
{
    List<string> index = new List<string>();

    for (int i = 0; i < 10000000; i++)
    {
        index.Add(RandomString(5) + " " + RandomString(5) + " " + RandomString(5));
    }

    var matches = index.FindAll(SubstringPredicate);

}

static bool SubstringPredicate(string item)
{
    if (item.Contains(substring))
        return true;
    else
        return false;
} 
```

在将所有 1000 万个阶段加载到列表中之后，“var matches = index.FindAll(SubstringPredicate);”仍然只需要大约一秒钟 返回超过 400 万次点击。

关键是，内存很快。一旦事情不再适合内存并且您必须开始交换到磁盘，您就会看到性能下降。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:55:21.423

如果我理解正确的话，索引的一部分是术语字典，它是所有索引术语的排序列表。在没有通配符或尾随通配符的情况下进行搜索时，Lucene 可以利用许多术语具有共同前缀这一事实。另一方面，使用前导通配符进行搜索会扫描整个术语词典。这不是最优的，但是与索引的其他部分（例如频率和位置数据）相比，术语字典往往很小，因此对术语字典进行全面扫描通常本身并不是什么大问题。

# magento - Magento 中基于 URL 参数加载对象

> ID：11766355
> 
> 赞同：3
> 
> 时间：2012-08-01T19:40:10.277
> 
> 标签：magento, parameter-passing, magento-1.5

我在为我的 Magento 商店创建自定义模块时遇到问题。

我已经成功添加了一条路线（/着陆），并创建了/布局文件，这些文件在我的基本布局中显示了模板内容。我现在需要超越这一点。

我希望能够从 URL 加载参数，根据该参数获取对象，并根据对象的内容显示内容。

示例：用户浏览器访问 domain.com/landing/cool/。这（希望）会调用着陆控制器。控制器将能够以某种方式拉取“cool”参数，并拉取与cool关联的着陆对象。然后，我的模板可以获取该对象并显示其元素。

我知道那里有很多东西，但我一直在努力解决这个问题，但一无所获。Magento 必须对其所有类别、项目等执行此操作。有没有人知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:53:32.450

如果你做domain.com/landing/[controller]/cool/[key]/[value]，你可以做$this->getRequest()->getParam('[key]')来获取[value]的值]。然后您可以基于此设置模板，但我认为这是一个不同的问题。如果您仍然感到困惑，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:19:36.737

以下解释假设您已经以通常的方式定义了您的frontname：

```
<config>
    <modules>
        <Mycompany_Landing>
            <version>0.1.0</version>
        </Mycompany_Landing>
    </modules>
    <frontend>
        <routers>
            <landing>
                <use>standard</use>
                <args>
                    <module>Mycompany_Landing</module>
                    <frontName>landing</frontName>
                </args>
            </landing>
        </routers>
    </frontend>
</config> 
```

在这种情况下，Magento 标准路由器会将 URL 映射`landing/cool`到

```
Mycompany_Landing_CoolController::indexAction() 
```

这是因为 Magento 标准路由器使用`frontname/controller/action`模式处理 URL，在您的情况下，它知道

*   frontname 是`landing`，映射到`Mycompany_Landing`模块
*   控制器名称是`cool`，它将被转换为`CoolController`
*   缺少动作名称，这将导致`indexAction`默认使用

但是你想`cool`成为一个**参数**，而不是一个控制器。

我想这背后的原因是你想要有多个着陆区，除了`landing/cool`, like`landing/awesome`等等`landing/insane`。这意味着你必须设置多个控制器，一个用于每个不同的着陆区。

在这种情况下避免多个控制器的可能解决方案是实现您*自己的*路由器。

### 实现自己的路由器

要实现您自己的路由器，您需要挂钩`controller_front_init_routers`事件，例如通过像这样扩展您的`app/code/local/Mycompany/Landing/etc/config.xml`：

```
<config>
    <global>
        <events>
            <controller_front_init_routers>
                <observers>
                    <landing>
                        <class>Mycompany_Landing_Controller_Router</class>
                        <method>controllerFrontInitRouters</method>
                    </landing>
                </observers>
            </controller_front_init_routers>
        </events>
    </global>
</config> 
```

接下来创建一个适当的`app/code/local/Mycompany/Landing/Controller/Router.php`文件：

```
class Mycompany_Landing_Controller_Router extends Mage_Core_Controller_Varien_Router_Abstract
{

    /**
     * Add own router to Magento router chain
     *
     * @param Varien_Event_Observer $oObserver
     */

    public function controllerFrontInitRouters($oObserver)
    {
        // Add this router to the current router chain
        $oObserver
            ->getEvent()
            ->getFront()
            ->addRouter('landing', $this);
    }

    /**
     * Match routes for the landing module
     *
     * @param Zend_Controller_Request_Http $oRequest
     * @return bool
     */

    public function match(Zend_Controller_Request_Http $oRequest)
    {

        $sPathInfo = trim($oRequest->getPathInfo(), '/');
        $aPathInfo = explode('/', $sPathInfo);

        // Cancel if the route request is for some other module
        if ($aPathInfo[0] != 'landing') {
            return false;
        }

        // Cancel if it's not a valid landing zone
        if (!in_array($aPathInfo[1], array('cool'))) {
            return false;
        }

        // Rewrite the request object
        $oRequest
            ->setModuleName('landing')
            ->setControllerName('index')
            ->setActionName('index')
            ->setParam('zone', $aPathInfo[1])
            ->setAlias(
                'landing_router_rewrite',
                true
            );

        // Tell Magento that this router can match the request
        return true;

    }

} 
```

上面文件的`controllerFrontInitRouters()`方法注意将您自己的路由器合并到 Magento 路由器链中，使其看起来像这样：

```
Mage_Core_Controller_Varien_Router_Admin
Mage_Core_Controller_Varien_Router_Standard
Mage_Cms_Controller_Router
Mycompany_Landing_Controller_Router
Mage_Core_Controller_Varien_Router_Default 
```

Magento 将在调度时按照给定的顺序循环这个链。这意味着，像您这样的自定义路由器总是最早在第 4 位被调用。只有在前三个路由器都不能匹配路由请求的情况下，才会调用您的路由器。

当`match()`文件的方法被调用并检测到一个有效的路由（目前`landing/cool`仅）时，它会改变请求对象，这样`Mycompany_Landing_IndexController::indexAction()`就会被分派，有一个`zone`值为的参数`cool`。

请注意，这`match()`过于简单化了。它不包含消毒等。不要忘记修复这个^^

最后创建一个`app/code/local/Mycompany/Landing/controllers/IndexController.php`文件：

```
class Mycompany_Landing_IndexController extends Mage_Core_Controller_Front_Action
{

    public function indexAction()
    {

        if (!$this->getRequest()->getAlias('landing_router_rewrite')) {
            $this->_forward('noRoute');
            return;
        }

        $sZone = $this->getRequest()->getParam('zone');

        die(__METHOD__ . ' called with zone = ' . $sZone);

    }

} 
```

如果请求对象中没有设置别名，则第一个`if`块取消操作（请参阅路由器的方法）。`indexAction``landing_route_rewrite``setAlias()``match()`

这样做是因为用户也可以`indexAction()`通过使用其他 URL（如`landing`、`landing/index`、`landig/index/index`、等）来达到此目的`landing/index/index/zone/cool`。

我猜您不希望对此类其他 URL 进行 SEO 排名，也不希望实施两次验证和清理，但如果您不需要它，只需删除该`if`块。

现在您可以扩展`indexAction()`以对您的着陆区做任何您喜欢做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:57:45.537

我稍后会在这里进一步研究它，但现在唯一想到的是在“/”上爆炸以抓住它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:02:01.577

以下是我通过 Javascript 为我的一个项目执行此操作的方法：

```
function populateSelect(url, element, target) {
    var selectedValue = document.getElementById(element);
    var elementValue = selectedValue.options[selectedValue.selectedIndex].value;

    pathArray = url.split( '/' );
    pathArray.shift();
    pathArray.shift();
    pathArray.splice(5,0, element);
    pathArray.splice(6,0, elementValue);
    url = pathArray.join("/");
    url = 'http://' + url;

    new Ajax.Request(url, {
        method:    "POST",
        onSuccess:
            function(transport) {
                var json    = transport.responseText.evalJSON(true);
                var options = '';
                $(target).descendants().each(Element.remove);

                 for (var i = 0; i < json.length; i++) {
                    var opt = document.createElement('option');
                    opt.text = json[i].optionName;
                    opt.value = json[i].optionValue;
                    $(target).options.add(opt);
                }
            }
    });
} 
```

# qt - 插槽断开后的 Qt 信号

> ID：11766356
> 
> 赞同：3
> 
> 时间：2012-08-01T19:40:18.520
> 
> 标签：qt, signals-slots, qthread

我有来自生产者对象处理的某些硬件的实时数据流。这会连接到在自己的线程中处理它的消费者，以保持 gui 响应。

```
mainwindow::startProcessing(){
    QObject::connect(producer,SIGNAL(dataReady(data*),consumer,SLOT(doData(data*)));
    consumer->moveToThread(&consumerThread);        
    consumerThread.start(); 
}

mainwindow::stopProcessing(){
    producer->disconnect(SIGNAL(dataReady(data*));
    consumer->cleanup();                        
    delete consumer;
}

consumer::doData(data* x) {
    mutex.lock();
    processingObject stuff
    mutex.unlock()
}

consumer::cleanup() {
     mutex.tryLock();
      .... blah ....
      delete processingObject; // then doData gets called again
} 
```

我的问题是，在我销毁消费者对象之后 - 即使在断开连接之后，我仍然会收到信号。我已经尝试了一组越来越复杂的互斥锁来尝试阻止这种情况，但理想的解决方案是让清理等到所有未处理的信号都被处理完。

有没有办法监控有多少未处理的信号排队等待一个插槽？或者无论如何要清除它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:38:28.467

您似乎正在从与它所在的线程不同的线程销毁消费者对象。如果在正确的线程中完成，QObject 通常会在销毁时处理所有断开连接和事件队列自行清除。来自[Qt 的文档](http://doc-snapshot.qt-project.org/4.8/threads-qobject.html)：

> 从拥有对象的线程（或以其他方式访问对象）以外的线程对 QObject 调用 delete 是不安全的，除非您保证该对象此时没有处理事件。改用 QObject::deleteLater() ，一个 DeferredDelete 事件将被发布，对象线程的事件循环最终将拾取该事件。

只需将清理放在消费者的析构函数中，并用于`QMetaObject::invokeMethod(consumer, "deleteLater");`让消费者从自己的线程内部销毁自己。在插槽上使用 invokeMethod 将以线程安全的方式发送对 deleteLater 的调用，这似乎是必要的，因为我没有看到说明 deleteLater 本身是线程安全的文档。如果你必须阻塞直到消费者被销毁，你可以将连接类型指定为`Qt::BlockingQueuedConnection`，否则默认的`Qt::AutoConnection`应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:13:29.237

这里的问题是[连接类型](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)。您使用[默认类型的连接](http://qt-project.org/doc/qt-4.8/qobject.html#connect)，所以它是`Qt::AutoConnection`. 由于您正在连接来自不同线程的对象，因此它可以用作`Qt::QueuedConnection`.

现在我假设你的生产者创建数据比你的消费者吃它们更快。这导致消费者线程的事件队列中的数据缓冲。因此，当您断开信号时，您实际上已断开连接，但是您在事件队列中有大量数据在等待您，只给您一个仍然连接的填充。

如何解决？使消费者更快或在消费者中添加一些标志，这将导致忽略数据进入消费者插槽。或者让生产者变慢。尝试不同的沟通方式。或者使用[并发 API](http://qt-project.org/doc/qt-4.8/threads-qtconcurrent.html)将作业拆分到多个线程。最佳解决方案取决于您在做什么的细节。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:53:27.667

确保您没有多次连接信号，否则查看此邮件列表存档可能会给您一些提示/建议：

[http://lists.trolltech.com/qt-interest/2000-05/thread00051-0.html](http://lists.trolltech.com/qt-interest/2000-05/thread00051-0.html)

简而言之，也许可以尝试：

```
mainwindow::stopProcessing()
{
    // Block the producer's signals. 
    producer->blockSignals( true );

    // Perform clean up/stop
    consumer->cleanup();

    // Delete the consumer, this disconnects all signals connected 
    // to the consumer.
    delete consumer;

    // Restore the producer's signals
    producer->blockSignals( false );
} 
```

编辑：修复了`blockSignals`调用，它应该在生产者而不是消费者上。

# python - OpenCV：跟踪在 2D 平面中移动的 3D 对象

> ID：11766357
> 
> 赞同：7
> 
> 时间：2012-08-01T19:40:19.357
> 
> 标签：python, opencv, computer-vision, tracking, surf

我最近一直在研究对象跟踪问题的解决方案。我需要做的是识别和跟踪可能在 2D 平面上移动的 3D 对象，即在 x 和 y 中的平移，以及围绕 z 的旋转。要跟踪的对象是预先知道的，并且可以从中提取任何所需的信息。还假设照明条件不会发生任何剧烈变化，并且背景将保持相对静止。要跟踪的对象通常不是单一颜色的，因此不能选择按颜色进行跟踪。

我已经成功实现了一个原型，用于使用背景减法和动态模板匹配来跟踪多个 2D 对象。我现在想扩展到跟踪 3D 对象，但到目前为止，我对自己的发现/成就感到失望。我将列出我所做的一些尝试，希望有人能有所启发。

1.) 动态[模板匹配](http://opencv.itseez.com/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)：我会让用户在视频帧中选择对象，然后在对象周围定义一个搜索区域。然后将在该区域内搜索该对象。 [这个剪辑](http://www.youtube.com/watch?feature=endscreen&NR=1&v=G5GLIKIkd6E)最初给了我这个想法。不幸的是，这对我来说并没有真正起作用，因为对象在旋转时会丢失（将其转回相机）。[我还尝试在找到对象时不断更新模板，但这会导致模板在预期对象被遮挡](http://en.wikipedia.org/wiki/Hidden_surface_determination)时成为另一个（外部）对象。

2.) [Lucas-Kanade](http://opencv.willowgarage.com/documentation/python/motion_analysis_and_object_tracking.html#calcopticalflowpyrlk)光流：我使用 OpenCV 的 goodFeaturesToTrack 找到了一些要跟踪的好点，并尝试使用 calcOpticalFlowPyrLK 通过多个帧跟踪这些点。然而，这个算法的性能有点令人失望。我将其应用于[牛津走廊](http://www.robots.ox.ac.uk/~vgg/data.html)数据集，但我最初检测到的点很快就会丢失。

3.) [SURF](http://en.wikipedia.org/wiki/SURF)：我尝试使用 SURF 检测特征，但这里的问题是很难将其应用于可能与不同视角有很大差异的 3D 对象。我希望找到关于 cv2 的 SURF 的文档，因为这似乎提供了为 SURF 特征提取器提供关键点的功能（可能来自 goodFeaturesToTrack）。不幸的是，我还没有找到一种方法来做到这一点。我关于 SO 的问题：[OpenCV: Extract SURF Features from user-defined keypoints](https://stackoverflow.com/questions/11722502/opencv-extract-surf-features-from-user-defined-keypoints)

背景：我有一个固定的网络摄像头，所有处理都在台式计算机上完成。我在 Windows 7 上使用 OpenCV 的 Python 包装器和 Eclipse 的 PyDev 插件。

如果有人可以建议任何其他技术来尝试，或者甚至是一些改进已经提到的技术性能的指针，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:03:52.707

如果没有看到您要跟踪的对象，就很难提出一些有用的建议。如果你拍几张照片向我们展示肯定会有助于讨论的问题。这里的人有时也会实施他们的建议/想法并与您分享。

# c# - 指定的强制转换无效 – SQL float 到 C# double

> ID：11766358
> 
> 赞同：6
> 
> 时间：2012-08-01T19:40:20.230
> 
> 标签：c#, .net, sql-server-2008

在我的 c# 代码中，我有一个 double，我试图将它设置为我的 SQL Management 2008 R2 数据库中的浮点类型的值（它对应于 c# 中的一个 double，对吗？）。当我使用这种语法时

```
double x = (double)reader["column1"]; //reader is SqlDataReader object 
```

我收到错误“指定的演员表无效”。

是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T19:45:04.480

您可以简单地[`GetDouble`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getdouble.aspx)直接：

```
reader.GetDouble(reader.GetOrdinal("column1")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T19:48:24.453

我建议使用可通过 SqlDataReader 对象获得的帮助类...

```
double dbl = reader.GetDouble(reader.GetOrdinal("DoubleColumn")); 
```

如果该列有可能为空，您应该考虑到这一点......

```
double dbl = (reader["DoubleColumn"] != DBNull.Value ? dr.GetDouble(dr.GetOrdinal("DoubleColumn")) : 0.0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T19:42:59.547

使用`Convert.ToDouble`方法：

```
double x = Convert.ToDouble(reader["column1"]); 
```

# extjs4 - 重新加载商店并填充网格而不重绘窗口

> ID：11766359
> 
> 赞同：0
> 
> 时间：2012-08-01T19:40:22.877
> 
> 标签：extjs4, extjs4.1

我有一个网格，当我单击一行时，然后单击删除按钮。该记录将从服务器中删除，并且网格将得到更新。（如果有 10 条记录，如果我们删除 1 条，那么将有 9 条记录。）

当我们尝试从网格中删除一个项目时，这第一次起作用。一旦记录被删除并且网格被更新。`Window`包含网格的 被绘制在屏幕下方。我需要摆脱这个。

如何在`store`不重绘窗口的情况下重新加载。

我的代码；

```
var ras = Ext.getStore('RemoveARowStore');

ras.on('load', function() {
       var grid = Ext.ComponentQuery.query('#window1 > #form1 > #grid1')[0];
    grid.getStore.load();
       grid.getView().refresh();

}, this, { single: true });
ras.load(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:48:13.810

如果您更新商店，网格应自动更新网格。

因此，你不应该做`grid.getView.refresh()`这将是你的违规行。

此外，在当前片段中，实际观察`load`事件并对其采取行动是毫无意义的。（无论如何，网格都会自行更新）

# c# - 将多个 rdlc 报告导出为单个 word 文档

> ID：11766362
> 
> 赞同：0
> 
> 时间：2012-08-01T19:40:41.840
> 
> 标签：c#, asp.net, .net, rdlc, export-to-word

.net 中的报表查看器具有出色的内置导出功能，支持不同的导出格式，如 word、pdf 和 excel。但是，对于我的 asp 应用程序中的管理人员，我希望此导出功能生成一个包含多个 rdlc 报告的单个导出文件，以便他们可以浮动单个文档并继续喝咖啡！需要导出的报表是根据一些业务逻辑动态决定的。
我在论坛上找到了一个有用的代码片段来实现这一点，看起来不错：

```
 protected void ExportReportsToWord(object Sender, EventArgs e)
    {
        // Variables
        Warning[] warnings;
        string[] streamIds;
        string mimeType = string.Empty;
        string encoding = string.Empty;
        string extension = string.Empty;

        // reportViewer1 and reportViewer2 are reports on my asp.net page
        byte[] bytes1 = reportViewer1.LocalReport.Render("WORD", null, out mimeType, out encoding, out extension, out streamIds, out warnings);
        byte[] bytes2 = reportViewer2.LocalReport.Render("WORD", null, out mimeType, out encoding, out extension, out streamIds, out warnings);

        //create a single byte array out of multiple arrays
        byte[] bytes = (bytes2.Concat(bytes1)).ToArray();

        // Now that you have all the bytes representing the Word report, buffer it and send it to the client.
        Response.Buffer = true;
        Response.Clear();
        Response.ContentType = mimeType;
        Response.AddHeader("content-disposition", "attachment; filename=" + "singleReport" + "." + extension);
        Response.BinaryWrite(bytes); // create the file
        Response.Flush(); // send it to the client to download
        Response.End();

    } 
```

此代码符合要求，但使用此代码导出的文件在打开 word 文档时仍仅显示 1 个报告，即使较大的文件大小表明数据可能也存在于其他报告中。
有人可以指出可能是什么问题吗？如果它可以从多个 rdlc 报告中生成单个单词文件导出，我也愿意接受有关使用完全不同方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:45:37.013

嗨，我建议您宁愿拥有一份报告，然后将所有这些报告作为子报告包含在内，然后安排将该主要报告作为 Word 文档作为电子邮件发送给您的老板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:48:52.177

一个简单的解决方案是创建一个大型主报告。

在每个元素中都有一个列表，其中的每个元素都是一个子报告。

将参数传递给主报告以决定显示哪些报告以及隐藏哪些报告。

这样，用户可以选择他想要查看的报告，并且您可以获得 SSRS 为标准报告提供的所有功能。

# haskell - 成本敏感的折叠

> ID：11766365
> 
> 赞同：4
> 
> 时间：2012-08-01T19:40:52.913
> 
> 标签：haskell, functional-programming, fold

让我用一个例子来解释一下我所说的对成本敏感的折叠是什么意思：以任意精度计算 pi。我们可以使用[Leibniz 公式](http://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80)（不是很有效，但又好又简单）和惰性列表，如下所示：

```
pi = foldr1 (+) [(fromIntegral $ 4*(-1)^i)/(fromIntegral $ 2*i+1) | i<-[0..]] 
```

现在，显然这个计算永远不会完成，因为我们必须计算无限列表中的每个值。但在实践中，我不需要 pi 的确切值，我只需要它到某个指定的小数位数。我可以这样定义 pi'：

```
pi' n = foldr1 (+) [(fromIntegral $ 4*(-1)^i)/(fromIntegral $ 2*i+1) | i<-[0..n]] 
```

但我需要传入 n 的什么值才能获得我想要的精度，这一点并不明显。我需要的是某种对成本敏感的折叠，只要我达到所需的精度，它就会停止折叠。这样的折叠存在吗？

（注意，在这种情况下，很容易看出我们是否已经达到了要求的精度。因为莱布尼茨公式使用了一个与每一项交替符号的序列，所以误差总是小于下一项的绝对值。序列。）

编辑：拥有成本敏感的折叠，也可以考虑计算时间/功耗，这将是非常酷的。例如，考虑到我有 1 小时的计算时间和 10kW-hrs 的时间，我想要最准确的 pi 值。但我意识到这将不再是严格的功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T20:26:27.260

我的建议是使用扫描而不是折叠。然后遍历结果列表，直到找到所需的精度。`scanl`左扫描 ( ) 的一个有用的特例是`iterate`函数：

```
piList :: [Double]
piList =
    map (4*) .
    scanl (+) 0 .
    map recip .
    iterate (\x -> -(x + 2 * signum x)) $ 1 
```

您现在可以遍历此列表。例如，您可以检查对某个精度的更改何时变得不可见：

```
findPrec :: (Num a, Ord a) => a -> [a] -> Maybe a
findPrec p (x0:x1:xs)
    | abs (x1 - x0) <= p = Just x0
    | otherwise          = findPrec p (x1:xs)
findPrec _ _ = Nothing 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T20:21:42.723

Haskell 做到这一点的方法是生成一个无限的列表，其中包含越来越准确的答案，然后伸手去拿一个正确准确的答案。

```
import Data.List (findIndex)
pis = scanl (+) 0 [4*(-1)**i/(2*i+1) | i <- [0..]]
accuracies = zipWith (\x y -> abs (x-y)) pis (tail pis)
piToWithin epsilon = case findIndex (<epsilon) accuracies of
    Just n  -> pis !! n
    Nothing -> error "Wow, a non-terminating loop terminated!" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T20:32:36.473

在一般情况下，您要求的折叠不存在。您必须自己提供准确度估计。一般来说，这可能是个问题，但所有实际有用的序列确实对部分和的数值准确性有一个合理的上限，通常由其他人获得。但是，我应该鼓励您阅读相关的教科书，例如数值分析教科书，其中通常有部分关于估计无限数字序列的总和并对其进行上估计。

然而，有一个一般规则，如果数值过程有极限，那么数值位移会以粗略的几何级数趋近于零，因此如果两个后续位移是 1.5 和 1.0，那么接下来的位移将是大约 0.6，依此类推（最好在最后几个成员列表中累积这样的估计，而不仅仅是 2 个成员）。使用此规则和等式计算几何级数之和，您通常可以找到数值精度的合理估计。注意：这是经验法则（它有名字，但我忘记了），而不是严格的定理。

此外，IEEE Double/Float 的表示精度有限，并且在某些时候从序列尾部添加少量数字不会改变计算的部分总和。对于这种情况，鼓励您阅读 x86 中的浮点表示，您可能会发现自己的折叠。

总结：一般没有解决方案，但通常在实践中对最有用的序列有合理的估计，通常从文献中获得每种序列类型或硬件的数值限制

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T17:37:27.757

[Daniel Wagner](https://stackoverflow.com/users/791604/daniel-wagner)上面建议的一些很好的例子可以在论文[Why Functional Programming Matters中找到](http://www.cs.kent.ac.uk/people/staff/dat/miranda/whyfp90.pdf)

论文中的具体例子有：迭代求根、数值微分和数值积分。

# jquery - Rails 3 ajax 调用 - ActionView::MissingTemplate

> ID：11766367
> 
> 赞同：4
> 
> 时间：2012-08-01T19:40:59.923
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我正在尝试进行 ajax 调用，但我不想返回任何数据，或者可能只返回 200。

我的错误是

```
ActionView::MissingTemplate (Missing template .... 
```

我在控制器中的ajax方法是......

```
# Ajax
def updatePlayStat()
    #do something
    render :layout => false
end 
```

有没有办法告诉 rails 不返回任何内容，而无需创建额外的模板文件？

顺便说一句，我正在通过`$.post`在 js 文件中使用 jquery 的方法来进行 ajax 调用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T19:43:56.107

你不能渲染任何东西：

```
render :nothing => true 
```

见： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T19:45:47.777

首先，请使用 ruby​​ 风格的语法，并在 snake_case 中编写您的方法！

如果您只想返回状态 200，可以使用`head`控制器中的方法：http: [//apidock.com/rails/ActionController/Head/head](http://apidock.com/rails/ActionController/Head/head)

# ruby-on-rails-3 - 使用延迟作业发送电子邮件时报告错误

> ID：11766368
> 
> 赞同：10
> 
> 时间：2012-08-01T19:41:00.840
> 
> 标签：ruby-on-rails-3, delayed-job, error-reporting, airbrake, exception-notifier

使用 AirBrake 或 ExceptionNotifier 之类的工具从邮寄延迟的作业中获取错误报告的正确方法是什么？

我试图创建自己的延迟作业类，但由`Mailer.welcome()`（或类似）创建的邮件对象未正确序列化。我还尝试向and类添加一个`error(job, exception)`方法，但我相信我得到了更多通常与序列化相关的错误。我尝试了 psych 和 sych 来进行连载。`PerformableMailer``PerformableMethod`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-10T17:19:20.563

## 更新的解决方案

总的来说，解决方案非常简单。如果您正在对*对象*（如`MyClass.new.delay.some_method`）执行延迟作业，那么您需要将错误处理定义为对象方法。如果您在*Class* (like `MyTestMailer.test_email ...`) 上执行延迟作业，那么您需要将错误处理定义为类方法。

假设您有一个名为`TestMailer`. 解决方案是将错误处理定义为*类方法*，而不是*对象方法*：

```
# Your rails mailer
class TestMailer

  # Whoa! error has to be a class method!
  def self.error(job, e)
    puts "I can now handle test mailer errors in delayed job!!!!"
  end

end 
```

现在上述`def self.error`方法将用作延迟作业中的错误回调！

或者，如果您希望能够处理所有操作邮件错误，

```
class ActionMailer::Base
  def self.error(job, e)
    puts "I can now handle all mailer errors in delayed job!!!"
  end
end 
```

原因在于 DelayedJob 的内部`PerformableMethod`处理错误的方式。A`PerformableMethod`有两个东西：一个目标对象和一个目标方法。在 Action Mailer 的例子中，目标对象不是一个对象，而是你的 mailer 类`TestMailer`。目标方法是您使用的邮件方法，例如`test_mail`. DelayedJob 查找目标对象上的所有钩子（`error`、`before`、`after`等）。但在我们的例子中，目标对象就是类本身。因此，钩子必须定义为类方法。

处理 ActionMailer 邮件的方式`DelayedJob`有点笨拙。如果添加对象方法而不是类方法，则会引发不需要的异常。例如，这里是代码：

```
# In <delayed-job-gem>/lib/delayed/performable_method.rb
module Delayed
  class PerformableMethod

    # line #7
    delegate :method, :to => :object 
```

ruby 中的每个对象都有一个`method`函数，用于获取对该类中方法的原始引用。但是在 DelayedJob - 这个原始`method`函数已经被委托给其他一些目标对象。这种 hack 使我们无法正常使用该`def error`功能来处理作业错误。

编辑：添加脚注，次要澄清

编辑2：重新排序的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:43:33.723

首先，一个包含在邮件程序中的模块，可能还有其他延迟的工作：

```
module Delayed
  module Airbrake
    # Send error via Airbrake
    def error(job, e)
      ::Airbrake.notify(e, :component => job.name, :action => 'perform', :parameters => {:job => job.inspect})
    end
 end 
```

结尾

然后包括它：

```
Delayed::PerformableMailer.send(:include, Delayed::Airbrake) 
```

# networking - 网络掩码是否等同于范围 ID？

> ID：11766370
> 
> 赞同：1
> 
> 时间：2012-08-01T19:41:17.920
> 
> 标签：networking, ip, mask

范围 ID 和网络掩码是否代表同一事物？此外，屏蔽地址是否等同于具有其范围 ID 的地址。我问的原因是因为我经常看到地址后面的“/”后面表示网络掩码；范围 ID 通常表示为地址后面的“%”。

我需要知道的原因是因为我想使用 RtlIpv6StringToAddressEx 将屏蔽地址转换为其二进制形式，但它声明它将范围 ID 作为输入，而不是网络掩码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:30:51.623

它们在概念上是不同的东西，但通常是同构的。

网络掩码标识有多少地址属于同一路由规则。范围 ID 标识从同一池中获取的一组地址。

但

*   因为许多 IP 子网被组织到以太网“广播域”（看到相同广播帧的热点）上，并且......
*   因为没有 IP 地址的主机发送的 DHPC 发现数据包（尚未）是由路由器实现的广播帧，并且...
*   因为该路由器在中继之前使用自己的地址对该数据包进行签名，以让 DHCP 服务器保留一个可以发回的地址并...
*   因为该地址工作，必须由同一路由器路由...

我们得出的结果是网络子网（不是掩码！：地址/掩码对）和范围最多必须一致。（实际上范围可以小于子网）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:55:36.510

网络掩码是一种逻辑分离网络的方法。

范围 ID 告诉您节点的可达性。

[在MSDN](http://msdn.microsoft.com/en-us/library/aa917150.aspx)上阅读更多内容。

# php - Coldfusion cfhttp 到 PHP

> ID：11766380
> 
> 赞同：6
> 
> 时间：2012-08-01T19:41:35.563
> 
> 标签：php, coldfusion, cfhttp

我为我在 Wordpress（更具体地说是 PHP）中执教的运动队设计了一个网站。在过去的几年中，我们使用了一个在线 Web 服务，该服务在 Coldfusion 中运行基于统计的程序。他们最近打开了一个提要，这样用户就可以在那里使用自己的定制网站，并在其中实施他们的数据。

他们为我提供了这样的提要（出于安全原因，不会提供我的详细信息）：

```
<cfhttp url="http://datafeed" method="post" result="result">
            <cfhttpparam type="formfield" name="seasonID" value="29725">
            <cfhttpparam type="formfield" name="codekey" value="mycodekey">
<cfhttpparam type="formfield" name="showGameType" value="RS">
</cfhttp> 
```

我从来没有使用过 Coldfusion 的经验，我尝试阅读一些关于在 PHP 环境中使用它的信息，但我倾向于找到的所有内容都是 PHP 到 Coldfusion，而不是相反。

因为这个我来堆栈，我不完全确定这将如何在 PHP 中工作，但 cURL 会是答案吗？理想情况下，我只想创建几个 wordpress 函数并在我的模板页面上调用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:16:06.860

您拥有的代码示例是一个简单的表单样式 http 帖子，帖子的响应被写入变量“result”。

表单帖子包含三个字段；“seasonid”、“codekey”和“showgametype”。

老实说，我不知道您将如何用 PHP 编写它，cURL 是您需要使用的库。主 cURL 页面上评论中的示例看起来可以满足您的需要；从帖子中捕获 http 响应或获取 URL。

希望我对示例代码所做的描述将帮助您确定您的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:27:19.663

感谢所有人的帮助，通过上面提供的一些提示来解决这个问题。

我访问信息的数据源显然需要代码密钥，我不确定如何弄清楚但设法得到它，这就是我使用的，不是 100% 确定它是否正确，但我设法检索到最终成为的数据以 JSON 格式。

如果对此解决方案有任何提示，我全神贯注..

```
function name() {

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://urlhere.com");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, false);

$data = array(
    'codekey' => 'mycodekey'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$rawdata = curl_exec($ch);
curl_close($ch);

//Convert Returned JSON data to PHP Object
$output = (json_decode($rawdata));

foreach($output->DATA as $key => $val) {
    echo "<br />" . $val[1];
} 
```

这与我上面的示例有点不同，因为我决定使用一个更简单的提要，因为上面提要中返回的 JSON 数据包含更多数据（GP、Wins、Losses、Ties、PTS 等）等。

# javascript - javascript eval 删除问号后的所有内容

> ID：11766382
> 
> 赞同：0
> 
> 时间：2012-08-01T19:41:36.297
> 
> 标签：javascript

我肯定还在学习 Javascript，所以如果这是一个非常基本的问题，请原谅我。

我正在尝试将图像 URL 列表旋转到 href 中。所有的 URL 中都有问号，因为 URL 被传递到 Web 服务以详细说明有关图像的细节变量。在标题中，我将 php $imgArr 分解为单独的 javascript Image 对象 .src 值。到目前为止一切正常。

图片网址 例如：`http://webservices.ashx?size=25`

```
<script type="text/javascript">
<!--
var step = 1;
var timeOut;

function playforward() {
    if (!document.images) return
    alert(eval("image" + step + ".src"));
    document.images.slideleft.src = eval("image" + step + ".src")
    if (step < <?php echo count($imgArr); ?> ) step++
    else step = 1
    timeOut = setTimeout("playforward()", 500)
}

function stopPlay() {
    clearTimeout(timeOut);
}
//-->
</script> 
```

在上面的代码中，我有一个基本图像名称的警报，其中 step 变量循环显示图像编号。当弹出警报框时，图像 URL 是正确的，但是当我取出警报框并运行页面时，图像错误，并且属性显示问号后的所有内容都被删除。

我知道 eval 不是一个很好的解决方案，但我不知道更好的解决方案。有人有什么建议吗？

编辑：

根据请求，这里是我用来创建图像变量的代码。此代码在 Codeigniter 控制器中被调用并传递给文档标题。我不相信这会有很大的帮助，但它是：

```
for($i = 0; $i < count($imgArr); $i++)
    {
     $urlPieces = explode('?', $imgArr[$i]);
     $num = $i+1;
     $images .= 'var image'. $num .'=new Image()
       imageleft'. $num .'.src="'.$urlPieces[0].'" + "?" + "'.$urlPieces[1].'"; ';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:44:49.087

您根本没有理由`eval`在代码中使用。

说`<? php ...`的应该是`<?php`

```
<script type="text/javascript">

    var step = 1;
    var timeOut;

    function playforward() {
        if (!document.images) {
            return;
        }

        alert(window['image' + step].src);
        document.images.slideleft.src = window['image' + step].src;

        if (step < <?php echo count($imgArr); ?> ) {
           step++;
        } else {
           step = 1;
        }

        timeOut = setTimeout(playforward, 500);
    }

    function stopPlay() {
        clearTimeout(timeOut);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:46:07.297

您有诸如`image1`,`image2`等变量。

取而代之的是，做成`images`一个数组：

```
var images = []; 
```

所以，那么你可以这样做：

```
$images .= 'images['. $num .']=new Image()' 
```

然后在您的 JavaScript 中，您可以使用：

```
images[step].src 
```

PS不要将字符串传递给`setTimeout`，传递函数：

```
setTimeout(playforward, 500) 
```

# mdx - 我如何使用 EXCEPT 函数来显示一段时间内丢弃的数据？

> ID：11766386
> 
> 赞同：0
> 
> 时间：2012-08-01T19:41:44.450
> 
> 标签：mdx, except

我想过滤超过一定数量的账户余额，比如 1,000，只显示在选定时间超过 1,000 的账户，并且与第二个选定时间相比已被删除。因此，如果“Amy”在选定的“六月”月份中超过 1,000，而现在她的余额低于 1,000，我希望看到她列出，并有新的余额。

```
 select [Measures].[Amount] on 0,
      FILTER( [Instrument].[Account Num].MEMBERS, [Measures].[Committed Amt]>1000) 
    ON 1  
    from [TEST]
   where
except({[Time].[Calendar Year].[Month].&[06]&[2012]}, 
   {[Time].[Calendar Year].  [Month].&[07]&[2012]}); 
```

使用上面的代码，我可以过滤一定数量的余额。我不能只显示已删除的帐户，这是我试图通过使用 EXCEPT 功能来做的。有任何想法吗？这是使用 2008 分析服务器的 MDX 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:25:18.353

以下查询将为每个 [Measures].[Amount] 返回 [Measures].[Amount]，其中 6 月份的 [Measures].[Committed Amt] 低于 1000 且 7 月份高于 1000

```
SELECT
[Measures].[Amount] ON 0
,Filter
( [Instrument].[Account Num].MEMBERS  ,
  ([Measures].[Committed Amt],[Time].[Calendar Year].[Month].&[06]&[2012]) > 1000
AND
  ([Measures].[Committed Amt],[Time].[Calendar Year].[Month].&[07]&[2012]) > 1000
) ON 1
FROM [TEST] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:48:43.963

您只需将 July 放在 Where 子句中并在过滤器中使用此条件：

```
([Measures].[Committed Amt], [Time].[Calendar Year].[Month].&[06]&[2012]) > 1000 AND [Measures].[Committed Amt] < 1000 
```

查询变为：

```
SELECT [Measures].[Amount] ON 0,
FILTER( [Instrument].[Account Num].MEMBERS, ([Measures].[Committed Amt], [Time].[Calendar Year].[Month].&[06]&[2012]) > 1000 AND ([Measures].[Committed Amt] < 1000, [Time].[Calendar Year].[Month].&[07]&[2012])) ON 1  
FROM [TEST]
WHERE ([Time].[Calendar Year].[Month].&[07]&[2012]) 
```

在结果中，您将在 7 月获得承诺金额在 6 月 > 1000 并且在 7 月 < 1000 的工具的金额（如果要更改此金额，请更改 where 子句）。

# iis-6 - 如何设置 IIS6 日志文件位置

> ID：11766388
> 
> 赞同：1
> 
> 时间：2012-08-01T19:41:51.633
> 
> 标签：iis-6, wsh, logfiles

我试过这个：

```
 c:\inetpub\AdminScripts\adsutil.vbs set w3svc/1/logfiledirectory d:\logfiles\iis6 
```

在我们的 Windows Server 2003 机器上，但出现错误：

```
 Windows Script Host
       This script does not work with WScript.
         [OK] 
```

如何设置位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:49:47.603

使用脚本......

您可以使用类似的命令

```
cscript adsutil.vbs set w3svc/1/logfiledirectory d:\logfiles\iis6 
```

或将 cscript 设置为 vbscript 的默认主机。

# sql - 在嵌套 SELECT 语句中使用 SQL 结果变量

> ID：11766389
> 
> 赞同：1
> 
> 时间：2012-08-01T19:41:52.127
> 
> 标签：sql, select, insert, nested

我真的不确定这个标题是否是我想说的，但这是我能来的最接近的。我想要做的是从查询中获取初始结果，并在 INSERT 语句中的嵌套 Select 语句中使用它们。这是我的示例：这是我的初始查询，它为我提供了我正在寻找的正确工作；

```
 SELECT Min(Inquirer.ID) as MinID, Max(Inquirer.ID) as MaxID, 
    Min(Inquirer.Program) as MinProg, Max(Inquirer.Program) as MaxProg,
     COUNT(Inquirer.Name) AS NumOccurrences
    FROM Inquirer
    GROUP BY Inquirer.Name
    HAVING ( COUNT(*) = 2 ) 
```

结果显示如下；

```
MinID         MaxID           MinProg          MaxProg          NumOccurrences
 27             81            Pavilion         Appleton              2 
```

我想使用我在相应的 INSERT 中检索到的 MinID 和 MaxID 值，其中包含类似这样的嵌套 SELECT；

```
Insert into Transfer(InquiryID_fk, ReferElsewhere, ReferMcLean, ReferExternal, ReferredFrom, TransferInquiryID_fk)
Values(SELECT Inquiry.ID from Inquiry 
Where Inquiry.InquirerID_fk = MinID,'Yes',MaxProg,NULL,MinProg,
SELECT Inquiry.ID from Inquiry WHERE Inquiry.InquirerID_fk = MaxID) 
```

简而言之，这就是它，不确定它是否可以完成或如何完成，我是否必须事先制作一个临时表并循环通过它来获取值？任何帮助表示赞赏，在此先感谢您，

尼克G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:55:44.507

在这种情况下不要使用 VALUES，直接使用 INSERT INTO ( )... SELECT。

例如

```
INSERT INTO Transfer(InquiryID_fk, ReferElsewhere, ReferMcLean, ReferExternal, ReferredFrom, TransferInquiryID_fk)
SELECT Min(Inquirer.ID), 'Yes', Max(Inquirer.Program), NULL,     Min(Inquirer.Program), Max(Inquirer.ID)
    FROM Inquirer
    GROUP BY Inquirer.Name
    HAVING ( COUNT(*) = 2 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:01:55.363

尝试使用此代码

```
Insert into Transfer(
InquiryID_fk, 
ReferElsewhere,
 ReferMcLean,
 ReferExternal, 
ReferredFrom, 
TransferInquiryID_fk)
SELECT Min(Inquirer.id), `yes`,Max(Inquirer.Program), null, Min(Inquirer.Program), Max(Inquirer.ID)
FROM Inquirer
GROUP BY Inquirer.Name
HAVING ( COUNT(*) = 2 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:51:50.347

使用新表可以解决您的问题，但我不建议这样做，因为这会为您的查询添加太多嵌套选择，这可能会降低性能。

在你的情况下，我会为此创建一个存储过程

*   使用两个变量为此创建一个存储过程：`MinId`和`MaxId`
*   在您的第一个选择（您获得 minid 和 maxId）中，您设置这些变量的值

他们在您的查询中使用这些变量：

```
Insert into Transfer(InquiryID_fk, ReferElsewhere, ReferMcLean, ReferExternal, ReferredFrom, TransferInquiryID_fk)
 SELECT Inquiry.ID from Inquiry Where Inquiry.InquirerID_fk = @MinID
 ,'Yes'
 ,MaxProg
 ,NULL
 ,MinProg
 ,SELECT Inquiry.ID from Inquiry WHERE Inquiry.InquirerID_fk = @MaxID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:01:27.320

这应该有效。

```
;with cte as
(
    SELECT Min(Inquirer.ID) as MinID, Max(Inquirer.ID) as MaxID, 
    Min(Inquirer.Program) as MinProg, Max(Inquirer.Program) as MaxProg,
    COUNT(Inquirer.Name) AS NumOccurrences
    FROM Inquirer
    GROUP BY Inquirer.Name
    HAVING ( COUNT(*) = 2 )
)
    Insert into Transfer
    (InquiryID_fk, ReferElsewhere, ReferMcLean, ReferExternal, ReferredFrom, TransferInquiryID_fk)
    SELECT imin.id,'Yes',MaxProg,NULL,MinProg,imax.ID 
    from cte
        inner join inquiry imin on MinID = imin.inquirer_Id 
        inner join inquiry imax on MaxID = imax.inquirer_Id 
```

但我认为你想要的是选择阅读......

```
 SELECT imin.id,'Yes',qmax.Program,NULL,qmin.Program,imax.ID 
    from cte
        inner join inquiry imin on MinID = imin.inquirer_Id 
                 inner join inquirer qmin on minid = qmin.id
        inner join inquiry imax on MaxID = imax.inquirer_Id 
                 inner join inquirer qmax on minid = qmax.id 
```

...但这取决于您拥有哪种 SQL

# c# - 在php中生成Hexcode

> ID：11766406
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:43:06.297
> 
> 标签：c#, php, javascript, asp-classic

基本上我只想创建一个数字引脚和十六进制形式的令牌，并且长度完全相同的 32 位和引脚长度是 5 位。

就像我有一个密码

> PIN：15458，其令牌代码为 Toke：93f23ed246e7b2c47b5dbc6a341f2354
> 
> PIN：60703，其令牌代码为 Token：43e0e636d3f6b17615c96e2b5a9a908a

我想要在 php、asp、c#、javascript 中以编程方式使用适合轻松生成的任何东西。

我可以在其中使用 FOR LOOP 语句等系列

```
for($a = 10000; $a<60000; $a++)
{
   echo  $a." = ".  token algorithm exactly like mentioned aboved.
} 
```

假设 for 循环语句达到 $a = 15458

然后它生成一个令牌 93f23ed246e7b2c47b5dbc6a341f2354

令牌算法是我想要的实际东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:46:15.613

一个 32 位十六进制代码基本上只有 4 个字符长 - 你的意思是 32 个字符的代码？

最简单（也是目前最不可靠）的方法是简单地使用`md5()`：

```
$token = md5('60703'); // d0e98b043981d95898b7aa85f8e4978f 
```

# php - 匹配数组的结果

> ID：11766407
> 
> 赞同：0
> 
> 时间：2012-08-01T19:43:08.387
> 
> 标签：php

全部，

一段时间以来一直在尝试解决此问题，但没有任何进展......任何反馈都非常受欢迎。

我们正在使用基于用户呼叫者 ID 和 YoB 的简单身份验证 - 如果他有唯一的 YoB，他可以访问该服务，如果在该呼叫者 ID 下有另一个用户具有相同的 YoB：他会收到一条消息，要求额外的信息。

函数的目标是返回匹配用户的记录 - 目前，它始终返回最后一条记录。

PHP代码：

```
// $response -> XML record with firstName, lastName and dob (dd/mm/yyyy) 
// $yob -> YoB user has entered for authentication  

function parseResponseYOB($response, $yob) 
{ 
    $duplicates = 0; // If there are users with same YoB, display message that additional info is required 

    if(empty($response->CallerMembers->CallerMemberDetails->dob)) 
    { 
        $iterateArr = $response->CallerMembers->CallerMemberDetails; 
    }else{ 
        $iterateArr[] = $response->CallerMembers->CallerMemberDetails; 
    } 

    foreach($iterateArr as $result) 
    { 
        $parseResult['firstName'] = $result->firstName; 
        $parseResult['lastName'] = $result->lastName; 
        $parseResult['yob'] = substr($result->dob, -4); 

        if($parseResult['yob'] == $yob) 
        { 
            $duplicates++; 
        }else{ 
            continue; 
        } 
     }
// Check for duplicate YoBs 

    if($duplicates > 1) 
    { 
        return "Multiple members with the same YOB"; 
    }elseif($duplicates < 1){ 
        return "No members with the specified YOB found"; 
    }     

    return $parseResult; // No duplicates, return the record of the matching user 
    // PROBLEM: Always the last record is returned... not the one with matching YOB? 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:51:03.593

那是因为这正是你告诉它要做的事情。您当前正在将每个结果写入`$parseResult`- 并覆盖过程中的最后一个结果 - 在您检查它是否正确之前。您还在循环`return`内进行调用（以及检查）`foreach`，这实际上会在第一次迭代后终止循环。你想要的可能更像这样：

```
function something ($arg1, $arg2) {
$parseResult;
//...
foreach ($iterateArr as $result) {
    if (substr($result->dob, -4) == $yob) {
        $parseResult['firstName'] = $result->firstName; 
        $parseResult['lastName'] = $result->lastName; 
        $parseResult['yob'] = substr($result->dob, -4); 
        $duplicates++;
    }
}
// Check for duplicate YoBs 

if($duplicates > 1) 
{ 
    return "Multiple members with the same YOB"; 
}elseif($duplicates < 1){ 
    return "No members with the specified YOB found"; 
}     

return $parseResult; // No duplicates, return the record of the matching user 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:52:00.733

您的`return`陈述在`foreach`块内。基本上，`foreach`循环将运行一次并`parseResult`尽快输出`$parseResult['yob'] == $yob`。我想你可能在检查 duplicate 之前忘记了右括号`yobs`。希望这可以帮助。

# reporting-services - 在 SSRS 报表中的 Tablix 中使用边框样式表达式

> ID：11766410
> 
> 赞同：3
> 
> 时间：2012-08-01T19:43:20.340
> 
> 标签：reporting-services, border, ssrs-grouping

我对 SSRS 报告有一个有趣的困境，即已决定的权力需要一些额外的样式。

我基本上有一个列组，我需要有一个粗体边框。在下图中，我需要让我用红色绘制的线条更大（因此将它们的宽度设置为 3pt 字体）：

![示例截图](../Images/311e238befda4c1c40a810c9b8310de1.png)

第二张图片显示了构成图表的 tablix 的构造。列组分为 ClassroomMeasure（最低级别）和 ClassroomMeasureType（ClassroomMeasure 上方的标题和我需要在其上设置更粗边框的组）。我尝试将边框表达式设置为：

```
IIF(Fields!ClassroomMeasureType.Value = Previous(Fields!ClassroomMeasureType.Value), "1pt", "3pt") 
```

但这给出了一个错误：

> “不支持在 TablixCell 中使用 Previous 聚合函数。”

现在我想我可以通过检查每个组末尾排序的每个 ClassroomMeasure （较低的组）并设置其边界来解决这个问题，但是在本报告的每个版本中大约有 200 个，这将是一个巨大的头痛。

关于如何以编程方式实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-20T15:15:21.520

这可以通过在与 ClassroomMeasure 组相邻的 ClassroomMeasureType 组内添加一列来完成，拆分标题单元格，然后将该列设为 2pts 宽和黑色。

为此，您可以右键单击`<<expr>>`ClassroomMeasure 组的单元格并选择“插入列 - 组内”，然后右键单击 ClassroomMeasureType 标题并拆分单元格。然后会有一个新的列出现在你想要粗边框的地方，所以让它非常窄（即1pt），右边框很粗。

但是，如果您导出到 excel，这将显示为空列或隐藏列，这可能是不可取的。

# variables - 是禁用 LocalvariablesNamesEnhancer 的方法

> ID：11766414
> 
> 赞同：0
> 
> 时间：2012-08-01T19:43:25.930
> 
> 标签：variables, playframework, local, playframework-1.x

有没有办法`LocalvariablesNamesEnhancer`在 1.2.4/5 的 playframework 中禁用我的控制器

最好通过设置配置参数？

我的问题是它会导致 JPA 出现很多问题。我曾经使用旧版本的 play 并且我的应用程序运行良好，但自从引入这个增强器后，它会在这里和那里产生奇怪的错误。我厌倦了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:37:12.593

这似乎是不可能的。在 CorePlugin.enhance 方法中，没有任何条件地添加增强器，在 LocalvariablesNamesEnhancer.enhanceThisClass 方法中没有禁用标志。

您的解决方法可能是将有问题的代码放在另一个不从 Controller 继承的类中，并在您的控制器中通过委托调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:09:03.527

如果您在方法名称的末尾包含“$”，它将关闭此方法的局部变量名称增强功能。

# c# - Properties.Settings 变量在表单关闭之前未保存

> ID：11766417
> 
> 赞同：1
> 
> 时间：2012-08-01T19:43:37.233
> 
> 标签：c#, visual-studio-2010

设想：

我正在使用 Properties.Settings 通过单击按钮来保存变量。当我按下按钮时，它会将文本框内的文本保存到 Properties.Settings.Default.aString：

```
private void button1_Click(object sender, EventArgs e)
    {
        Properties.Settings.Default.aString = textBox1.Text;
    }

private void Form1_Load(object sender, EventArgs e)
    {

        label1.Text = Properties.Settings.Default.aString;
    } 
```

问题：

当表单第二次加载时（在关闭它并再次加载之后），Properties.Settings 变量没有更改为我在文本框中的内容。这可能是一个简单的修复，但为什么它不记得新值？感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:45:27.833

添加

```
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:45:47.430

设置不会自动保存。

你必须打电话`Properties.Settings.Default.Save()`

> **MSDN**您还必须显式调用此包装类的 Save 方法以保留用户设置。您通常在主窗体的 Closing 事件处理程序中执行此操作。

### 样本

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    Properties.Settings.Default.Save();
} 
```

### 更多信息

*   [MSDN - 应用程序设置](http://msdn.microsoft.com/en-us/library/a65txexh.aspx)

# xml - MSXML：当我尝试删除无效字符时，它有时会“卡住”

> ID：11766419
> 
> 赞同：0
> 
> 时间：2012-08-01T19:43:42.143
> 
> 标签：xml, vba, vb6, msxml

我需要解析其中包含许多无效字符的 XML 文件。这是我用来解析文件并替换无效字符的 VB6/VBA 代码：

```
Dim xmldoc As MSXML2.DOMDocument
Dim xmlNode As MSXML2.IXMLDOMNode
Dim xmlNodeList As MSXML2.IXMLDOMNodeList
dim XML as string
dim fno as integer

' get the XML file
fno = FreeFile
Open "input.xml" For Input As #fno
XML = Input(LOF(fno), fno)
Close #fno

TOP_OF_CODE:
Set xmldoc = New MSXML2.DOMDocument60
xmldoc.LoadXML XML
Set xmlNodeList = xmldoc.getElementsByTagName("*")
For Each xmlNode In xmlNodeList

    (a bunch of code to parse the XML)

Next xmlNode

If xmldoc.parseError.errorCode <> 0 And xmldoc.parseError.reason = "An invalid character was found in text content." & vbCrLf Then
    ' invalid character was found
    ptr = xmldoc.parseError.filepos
    XML = Left(XML, ptr - 1) & "x" & Mid(XML, ptr + 1)
    set xmldoc = Nothing
    GoTo TOP_OF_CODE
end if 
```

大多数情况下，代码完全按照预期工作：迭代删除每个无效字符，然后进行解析。然而，有时事情似乎会“卡住”：每次它在同一位置检测到一个无效字符，即使我已经用一个有效字符替换了无效字符。我尝试插入各种字符来替换无效字符，并且还简单地删除了该字符位置。我仍然在同一个地方收到无效字符错误。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:15:19.787

我不会打开文件“作为输入”。相反，我会打开它“作为二进制”，分配一个缓冲区：Redim abytData(1 To Lof(fno))，并使用 Get #fno, , abytData() 将数据拉入缓冲区。这意味着VB不会对数据进行任何处理。然后，您应该使用各种基于“B”字节的字符串函数版本，例如 InStrB()，来处理数据。

然后，我会尝试在解析 XML 之前尽可能多地进行预处理以删除无效字符，而不是依赖 XML 解析器来完成，这是一种低效的机制。

你能举例说明你发现了什么无效字符吗？

# hadoop - 高效地将数据存储在 Hive 中

> ID：11766421
> 
> 赞同：6
> 
> 时间：2012-08-01T19:43:48.207
> 
> 标签：hadoop, mapreduce, hive, lzo

如何有效地将数据存储在 Hive 中，并在 Hive 中存储和检索压缩数据？目前我将它存储为一个文本文件。我正在阅读[Bejoy 的文章](http://kickstarthadoop.blogspot.com/2011/10/how-to-efficiently-store-data-in-hive.html)，我发现 LZO 压缩对于存储文件很有用，而且它是可拆分的。

我有一个 HiveQL Select 查询正在生成一些输出，并且我将该输出存储在某处，以便我的一个 Hive 表（质量）可以使用该数据，以便我可以查询该`quality`表。

下面是`quality`我通过创建用于覆盖表的分区来从下面的 SELECT 查询中加载数据的表`quality`。

```
create table quality
(id bigint,
  total bigint,
  error bigint
 )
partitioned by (ds string)
row format delimited fields terminated by '\t'
stored as textfile
location '/user/uname/quality'
;

insert overwrite table quality partition (ds='20120709')
SELECT id  , count2 , coalesce(error, cast(0 AS BIGINT)) AS count1  FROM Table1; 
```

所以目前我在这里将它存储为一个`TextFile`，我应该把它作为一个`Sequence file`并开始存储数据`LZO compression format`吗？或者文本文件在这里也可以吗？从选择查询中，我将获得一些 GB 的数据，这些数据需要每天按表质量上传。

那么哪种方式最好呢？我应该将输出存储为 TextFile 还是 SequenceFile 格式（LZO 压缩），以便在查询 Hive 质量表时，我可以更快地获得结果。意味着查询更快。

**更新：-**

如果我使用块压缩存储为序列文件怎么办？如下图——

```
set mapred.output.compress=true;
set mapred.output.compression.type=BLOCK;
set mapred.output.compression.codec=org.apache.hadoop.io.compress.LzoCodec; 
```

除了上面之外，我还需要设置一些其他的东西来启用块压缩吗？而且我正在创建 Table 作为 SequenceFile 格式

**再次更新**

我应该像下面这样创建表格吗？还是需要进行一些其他更改才能使用序列文件启用 BLOCK 压缩？

```
create table lipy
( buyer_id bigint,
  total_chkout bigint,
  total_errpds bigint
 )
 partitioned by (dt string)
row format delimited fields terminated by '\t'
stored as sequencefile
location '/apps/hdmi-technology/lipy'
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:10:33.063

我没有太多使用 Hive，但根据 Hadoop 和结构化数据的经验，我从带有 BLOCK 压缩的 SequenceFiles 中获得了最佳性能。默认为行压缩，但在存储结构化数据且行不是特别大的情况下，效率不如 BLOCK 压缩。要打开它，我使用了 mapred.output.compression.type=BLOCK

# r - 使用 ggplot2 更改单个图形的刻度线位置

> ID：11766422
> 
> 赞同：4
> 
> 时间：2012-08-01T19:43:54.103
> 
> 标签：r, ggplot2

任何人都知道如何使用 ggplot2 在 R 中单个图的顶部绘制 X 轴刻度线？我一直在看教程、邮件列表和 Rhelp，但没有成功。

提前致谢。阿古斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:40:16.607

利用`position = 'top'`

```
library(ggplot2)

# Generate some data
df = data.frame(x = 1:10, y = 1:10)

# x-axis breaks
breaks = 1:10

# base plot
p <- ggplot(df, aes(x,y)) + geom_point() +
     scale_x_continuous(breaks = breaks, position = 'top') +
     scale_y_continuous(limits = c(0, 11), expand = c(0,0)) +
     theme_bw() 
```

**使用**原始解决方案**`gtable`（对 ggplot 2.1.0 进行了一些更新）。看[这里](https://stackoverflow.com/questions/28199667/r-ggplot2-log10-x-axis-on-top-and-y-axis-geom-line/28206324#28206324)**

 **```
library(ggplot2)
library(gtable)
library(grid)

# Generate some data
df = data.frame(x = 1:10, y = 1:10)

# x-axis breaks
breaks = 1:10

# base plot
p <- ggplot(df, aes(x,y)) + geom_point() +
     scale_x_continuous(breaks = breaks) +
     scale_y_continuous(limits = c(0, 11), expand = c(0,0)) +
     theme_bw() 

# Get ggplot grob
g1 <- ggplotGrob(p)  

## Get the position of the plot panel in g1
pp <- c(subset(g1$layout, name == "panel", se = t:r))

# Title grobs have margins. 
# The margins need to be swapped.
# Function to swap margins - 
# taken from the cowplot package:
# https://github.com/wilkelab/cowplot/blob/master/R/switch_axis.R
vinvert_title_grob <- function(grob) {
  heights <- grob$heights
  grob$heights[1] <- heights[3]
  grob$heights[3] <- heights[1]
  grob$vp[[1]]$layout$heights[1] <- heights[3]
  grob$vp[[1]]$layout$heights[3] <- heights[1]

  grob$children[[1]]$hjust <- 1 - grob$children[[1]]$hjust 
  grob$children[[1]]$vjust <- 1 - grob$children[[1]]$vjust 
  grob$children[[1]]$y <- unit(1, "npc") - grob$children[[1]]$y
  grob
}

# Get  xlab  and swap margins
index <- which(g1$layout$name == "xlab-b")
xlab <- g1$grobs[[index]]
xlab <- vinvert_title_grob(xlab)

# Put xlab at the top of g1
g1 <- gtable_add_rows(g1, g1$heights[g1$layout[index, ]$t], pp$t-1)
g1 <- gtable_add_grob(g1, xlab, pp$t, pp$l, pp$t, pp$r, clip = "off", name="topxlab")

# Get x axis (axis line, tick marks and tick mark labels)
index <- which(g1$layout$name == "axis-b")
xaxis <- g1$grobs[[index]]

# Swap axis ticks and tick mark labels
ticks <- xaxis$children[[2]]
ticks$heights <- rev(ticks$heights)
ticks$grobs <- rev(ticks$grobs)

# Move tick marks
  #  Get tick mark length
  plot_theme <- function(p) {
    plyr::defaults(p$theme, theme_get())
  }
  tml <- plot_theme(p)$axis.ticks.length   # Tick mark length

ticks$grobs[[2]]$y <- ticks$grobs[[2]]$y - unit(1, "npc") + tml

# Swap tick mark labels' margins and justifications
ticks$grobs[[1]] <- vinvert_title_grob(ticks$grobs[[1]])

# Put ticks and tick mark labels back into xaxis
xaxis$children[[2]] <- ticks

# Add axis to top of g1
g1 <- gtable_add_rows(g1, g1$heights[g1$layout[index, ]$t], pp$t)
g1 <- gtable_add_grob(g1, xaxis, pp$t+1, pp$l, pp$t+1, pp$r, clip = "off", name = "axis-t")

# Remove original x axis and xlab
g1 = g1[-c(9,10), ]

# Draw it
grid.newpage()
grid.draw(g1) 
```**

# iphone - ffmpeg：播放 udp 流

> ID：11766430
> 
> 赞同：5
> 
> 时间：2012-08-01T19:44:07.217
> 
> 标签：iphone, objective-c, ipad, ffmpeg, streaming

我正在使用 ffmpeg 在 iDevice 上播放 udp 流。它确实成功地播放了视频和音频。

我在这里遇到的唯一问题是以下函数调用确实需要很长时间

```
avformat_find_stream_info 
```

完成此功能的执行大约需要 10 秒。我正在播放的媒体具有以下属性：

```
MPEG-4 VIDEO v3 (DIV3)
RESOLUTION : 640x480
Frame rate : 25 
```

任何想法如何解决这个延迟？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-21T23:40:15.103

我意识到这是一个老问题，但我最近遇到了这个问题，所以虽然这可能对 OP 没有帮助，但为了后代，我会写下一个答案。

简短的回答：

将`AVFormatContext`字段设置为`probesize`和/或`max_analyze_duration`小于默认值，即

```
std::string url_path = "...";
AVFormatContext *format_ctx = NULL;
avformat_open_input(&format_ctx, url_path.c_str(), NULL, NULL);
format_ctx->max_analyze_duration = 50000;
avformat_find_stream_info(format_ctx, NULL); 
```

对于更长的答案：

`avformat_find_stream_info``AVFormatContext`从输入数据流中读取并尝试根据它看到的数据包来填写。它可以`max_analyze_duration`对结构中设置的值执行此操作`AVFormatContext`。

例如，本地视频文件通常会非常快，但对于网络流，这可能需要很长时间（尤其是在流损坏的情况下）。这就是漫长的等待时间`avformat_find_stream_info`发挥作用的地方。默认值为`max_analyze_duration`5000000（以 AV_TIME_BASE 为单位），这意味着假设`avformat_find_stream_info`可以从输入流中采样数据包长达该持续时间（IIRC AV_TIME_BASE 相当于微秒，因此默认的最大等待时间为 5 秒）。

通过将 设置`max_analyze_duration`为更小的值，比如 50,000 (~500ms)，我们强制`avformat_find_stream_info`选择`AVFormatContext`信息较少的字段，同时将最坏情况的等待时间限制为更合理的值。以我的经验，这并没有引起任何问题（尽管这可能取决于您的视频源）。该`probesize`字段确定`avformat_find_stream_info`可以从流中读取的字节数。请注意，如果您将此值设置得太低，您可能无法获得准确的编解码器信息

# javascript - 使用 jQuery 添加一些文本

> ID：11766432
> 
> 赞同：6
> 
> 时间：2012-08-01T19:44:18.273
> 
> 标签：javascript, jquery

我正在使用 jQuery，我有一个带有 H2 标签的 div

```
<div id="preload"><h2></h2></div> 
```

我想知道如何使用 jQuery 在`<h2> tags`

最终结果应该是：

```
<div id="preload"><h2>Some text here</h2></div> 
```

我需要添加文本而不替换`<h2></h2>`jQuery 脚本中的标签。

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T19:45:41.087

尝试这样的事情：

```
$("div#preload h2").html("Some Text Here") 
```

**[在此处](http://jsfiddle.net/8u5TG/)**查看示例 HTML 的上述代码

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T19:47:56.343

```
$("#preload h2").text('WOOt Woot'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T19:45:59.410

采用`.text`

```
$("#preload h2").text("Some text here"); 
```

也不是这必须在`$(document).ready(function () { ... })`or之内`$(function () { ... })`。我会使用后者，因为它可以节省打字。

```
$(function () {
    $("#preload h2").text("Some text here");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T19:45:44.593

```
$('#preload h2').html('foo'); 
```

或者

```
$('#preload h2').text('foo'); 
```

# biztalk - BizTalk HL7 加速器增强与延迟模式

> ID：11766434
> 
> 赞同：1
> 
> 时间：2012-08-01T19:44:38.997
> 
> 标签：biztalk, biztalk-2010, btahl7

我不确定**延迟模式**和**增强模式**之间的区别。两者都发送两个确认；1 表示接受，1 表示应用程序确认，除此之外，行为有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-16T23:57:04.970

唯一的区别是当消息中没有 MSH15 和 MSH16 时，延迟模式仅生成 AA（应用程序确认）确认，而增强模式生成 CA（提交接受）确认。由于与 v2.1 版本的向后兼容性，存在延迟模式。它基本上实现了延迟确认模式，该模式在 HL7 V2.1 标准中指定，然后从 V2.2 开始被弃用。这类似于增强模式，但以不同的方式实现。您会发现在延迟模式生成的确认中的一个不同之处是在 MSA5 字段中添加了“D”。

# asp.net-mvc - 错误获取记录“LINQ to Entities 无法识别该方法”

> ID：11766440
> 
> 赞同：4
> 
> 时间：2012-08-01T19:44:57.787
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework

在下面的代码中，我试图获取当前登录用户的配置文件。

```
Dim userProfile = db1.UserProfiles.Where(Function(p) p.UserId = Membership.GetUser.ProviderUserKey).Single 
```

错误是“LINQ to Entities 无法识别方法 'System.Object CompareObjectEqual(System.Object, System.Object, Boolean)' 方法，并且此方法无法转换为存储表达式。”

有谁知道这有什么问题，或者有更好的方法......而且，我怎样才能让它更安全；即如果没有找到记录，添加一个条件？

我正在使用 VB ASP.NET MVC 3。

谢谢你。

编辑：

这是我的新代码：

```
 Dim db1 As UserProfileDbContext = New UserProfileDbContext
        Dim user = Membership.GetUser()
        Dim key As Guid = user.ProviderUserKey
        Dim finalKey = key.ToString
        Dim userProfile = db1.UserProfiles.Where(Function(p) p.UserId = finalKey).Single
        Dim companyId = userProfile.CompanyId 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T19:48:43.110

L2E 正在尝试将您的 Lamba 表达式呈现`(p) p.UserId = Membership.GetUser.ProviderUserKey`为可用于访问数据库的 SQL 表达式。

但是，`Membership.GetUser()`是一种 .NET 方法。L2E 抱怨它不知道如何将此方法呈现为 SQL 语法。

试试这个：

```
Dim user = Membership.GetUser()
Dim userProfile = db1.UserProfiles.Where(Function(p) p.UserId = user.ProviderUserKey).Single 
```

**编辑**： MembershipUser.ProviderUserKey 是一个 CLR `Object`。SQL 无法比较两个对象，因此您需要在运行表达式之前对其进行强类型化。例如，如果您的用户密钥是`String`：

```
Dim user = Membership.GetUser()
Dim key as String= user.ProviderUserKey
Dim userProfile = db1.UserProfiles.Where(Function(p) p.UserId = key).Single 
```

这应该会更好，因为 L2E 可以理解简单的等式表达式`=`，并且可以将其呈现为等价的 SQL 表达式，例如：

`SELECT * FROM Profiles WHERE UserId = @Argument`，其中@Argument 由实体框架提供。

另外顺便说一句，L2E 将把链式调用分组到最后，所以表达式如下：

`db1.UserProfiles.Skip(10).Take(30).Where(Function(p) p.UserId = Membership.GetUser.ProviderUserKey)`

... 仍然会失败，因为 L2E 会将`Skip` `Take`和`Where`组件组合成一个 SQL 表达式。`ToArray` `ToList`您可以通过调用或来强制 L2E 访问服务器`ToDictionary`。该表达式可以通过将其更改为：

`db1.UserProfiles.Skip(10).Take(30).ToArray().Where(Function(p) p.UserId = Membership.GetUser.ProviderUserKey)`

`ToArray`强制执行 SQL 语句，为您提供一个支持复杂 lambas*的*.NET数组。

# android - 如何将 Google Places API 结果添加到地图叠加层？

> ID：11766441
> 
> 赞同：0
> 
> 时间：2012-08-01T19:45:00.243
> 
> 标签：android, json, google-maps, overlay, google-places-api

我是一个菜鸟，试图用谷歌地方开发一个基于位置的应用程序。我可以将我当前的位置添加到 ovelay 中，但我无法弄清楚我做错了什么，所以我可以将位置 api 结果添加到我的叠加层中。我的查询在我的网络浏览器中成功，但不是我的应用程序我得到 reQuest Deined 。如果有人可以提供帮助，将不胜感激。先感谢您！

主要活动：

```
package com.example.fdu;

public class FindDealer extends MapActivity implements LocationListener {
MapView finddealer;
long start;
long stop;
MyLocationOverlay compass;
MapController controller;
int x, y;
GeoPoint touchedPoint;
Drawable delta, zulu;
List<Overlay> overlayList;
LocationManager lm;
String towers;
int lat;
int lon;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.finddealer);
    finddealer = (MapView) findViewById(R.id.mvFindDealer);
    finddealer.setBuiltInZoomControls(true);

    Touchy tango = new Touchy();
    overlayList = finddealer.getOverlays();
    overlayList.add(tango);
    compass = new MyLocationOverlay(FindDealer.this, finddealer);
    overlayList.add(compass);
    controller = finddealer.getController();
    GeoPoint point = new GeoPoint(51643234, 7848593);//<--Germany

    controller.setZoom(12);
    finddealer.invalidate();//<--New

    delta = getResources().getDrawable(R.drawable.map_pin_48);
    zulu= getResources().getDrawable(R.drawable.ic_launcher);

    //placing pinpoint at location
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);      
    Criteria crit = new Criteria();
    towers = lm.getBestProvider(crit, false);
    Location location = lm.getLastKnownLocation(towers);
    if(location != null){
        lat = (int) (location.getLatitude()*1E6);
        lon = (int) (location.getLongitude()*1E6);          
        GeoPoint ourLocation = new GeoPoint(lat, lon);
        controller.animateTo(ourLocation);
        OverlayItem oscar = new OverlayItem(ourLocation, "What's Up", "Homie");
        CustomPinPoint custom = new CustomPinPoint(delta, FindDealer.this);
        custom.InsertPinpoint(oscar);
        overlayList.add(custom);    

        String googlelat = String.valueOf((int) (location.getLatitude()*1E6));
        String googlelon = String.valueOf((int) (location.getLongitude()*1E6));     
        String googleplacesapi = "https://maps.googleapis.com/maps/api/place/search/json?location=" + googlelat + "," + googlelon + "&radius=50000&type=store&keyword=gold&sensor=false&key=My Key Redacted";

        try {           
            JSONObject googleObject = StoresNearMe.getJSONfromURL(googleplacesapi);
            JSONArray parsedGoogle = googleObject.getJSONArray("results");
            if(parsedGoogle.equals(null) ){
                Toast.makeText(FindDealer.this, "Unable to locate tower", Toast.LENGTH_SHORT).show();
            }else{
            for (int i = 0; i < parsedGoogle.length(); i++) {
            JSONObject parsedlocales = parsedGoogle.getJSONObject(i);
            if (i == 0){
                JSONObject geometrylocation = parsedlocales.getJSONObject("geometry").getJSONObject("location");
                String lat0 = geometrylocation.getString("lat");
                String lng0 = geometrylocation.getString("lng");
                double overlaylat0 = Double.parseDouble(lat0);
                double overlaylng0 = Double.parseDouble(lng0);
                GeoPoint resultLocation0 = new GeoPoint((int) (overlaylat0), (int) (overlaylng0));                      
                OverlayItem whiskey = new OverlayItem(resultLocation0, "What's Up", "Homie");
                CustomPinPoint custom0 = new CustomPinPoint(zulu, FindDealer.this);
                custom0.InsertPinpoint(whiskey);
                overlayList.add(custom0);
                break;
            } 
            if (i == 1){
                JSONObject geometrylocation = parsedlocales.getJSONObject("geometry").getJSONObject("location");
                String lat1 = geometrylocation.getString("lat");
                String lng1 = geometrylocation.getString("lng");
                double overlaylat1 = Double.parseDouble(lat1);
                double overlaylng1 = Double.parseDouble(lng1);
                GeoPoint resultLocation1 = new GeoPoint((int) (overlaylat1),(int) (overlaylng1));                       
                OverlayItem foxtrot = new OverlayItem(resultLocation1, "What's Up", "Homie");
                CustomPinPoint custom1 = new CustomPinPoint(zulu, FindDealer.this);
                custom1.InsertPinpoint(foxtrot);
                overlayList.add(custom1);
                break;
            }
            if (i == 2){
                JSONObject geometrylocation = parsedlocales.getJSONObject("geometry").getJSONObject("location");
                String lat2 = geometrylocation.getString("lat");
                String lng2 = geometrylocation.getString("lng");
                double overlaylat2 = Double.parseDouble(lat2);
                double overlaylng2 = Double.parseDouble(lng2);
                GeoPoint resultLocation2 = new GeoPoint((int) (overlaylat2),(int) (overlaylng2));                       
                OverlayItem hotel = new OverlayItem(resultLocation2, "What's Up", "Homie");
                CustomPinPoint custom2 = new CustomPinPoint(zulu, FindDealer.this);
                custom2.InsertPinpoint(hotel);
                overlayList.add(custom2);
                break;
            }
            }
          }            
      } catch (JSONException e) {
         // Log.d("log_tag","JSON parsing error - Google Places Api:" + e.getMessage());
      }                     

    }else{
        Toast.makeText(FindDealer.this, "Couldn't get provider", Toast.LENGTH_SHORT).show();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    compass.disableCompass();
    super.onPause();
    lm.removeUpdates(this);
    finish();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    compass.disableCompass();
    super.onResume();
    lm.requestLocationUpdates(towers, 500, 1, this);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
class Touchy extends Overlay{
    public boolean onTouchEvent(MotionEvent echo, MapView mike){
        if(echo.getAction()==MotionEvent.ACTION_DOWN){
            start=echo.getEventTime();
            x = (int) echo.getX();
            y = (int) echo.getY();
            touchedPoint = finddealer.getProjection().fromPixels(x, y);
        }
        if(echo.getAction()==MotionEvent.ACTION_UP){
            stop=echo.getEventTime();
        }
        if (stop - start > 1500) {
            AlertDialog alert = new AlertDialog.Builder(FindDealer.this).create();
            alert.setTitle("Pick an Option");
            alert.setMessage("Hag");
            alert.setButton("place a pinpoint", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    OverlayItem oscar = new OverlayItem(touchedPoint, "What's Up", "Homie");
                    CustomPinPoint custom = new CustomPinPoint(zulu, FindDealer.this);
                    custom.InsertPinpoint(oscar);
                    overlayList.add(custom);

                }
            });
            alert.setButton2("Get Address", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                    try{
                        List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6 , touchedPoint.getLongitudeE6() / 1E6, 1);
                        if (address.size() > 0){
                            String display = "";
                            for (int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++ ){                                 
                                display += address.get(0).getAddressLine(i) + "\n";
                            }
                            Toast yankee = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                            yankee.show();
                        }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }finally{

                    }
                }
            });
            alert.setButton3("Toggle View", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    if (finddealer.isSatellite()){
                        finddealer.setSatellite(false);
                        finddealer.setStreetView(true);
                    }else{
                        finddealer.setSatellite(true);
                        finddealer.setStreetView(false);
                    }
                }
            });
            alert.show();
            return true;
        }
        return false;

    }
}
@Override
public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    lat = (int) (l.getLatitude()* 1E6);
    lon = (int) (l.getLongitude()* 1E6);
    GeoPoint ourLocation = new GeoPoint(lat, lon);
    OverlayItem oscar = new OverlayItem(ourLocation, "What's Up", "Homie");
    CustomPinPoint custom = new CustomPinPoint(delta, FindDealer.this);
    custom.InsertPinpoint(oscar);
    overlayList.add(custom);
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText( getApplicationContext(),"Gps Disabled", Toast.LENGTH_SHORT ).show();//<--New

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText( getApplicationContext(),"Gps Enabled",  Toast.LENGTH_SHORT ).show();//<--New
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
    Toast.makeText(FindDealer.this, "StatusChanged" +provider, Toast.LENGTH_SHORT).show();
}
} 
```

我附近的商店

```
public class StoresNearMe {

public static JSONObject getJSONfromURL(String url){
    InputStream is = null;
    String result = "";
    JSONObject googleObject = null;

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

  //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }

    try{

        googleObject = new JSONObject(result);            
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }

    return googleObject;
}
} 
```

自定义PinPoint Java

```
public class CustomPinPoint extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context charlie;

public CustomPinPoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}

public CustomPinPoint(Drawable mike, Context context) {     
    // TODO Auto-generated constructor stub
    this(mike);
    charlie = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void InsertPinpoint(OverlayItem india){
    pinpoints.add(india);
    this.populate();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:53:06.523

在您的`CustomPinPoint`构造函数中，您编写了

```
public CustomPinPoint(Drawable mike, Context context) {     
    // TODO Auto-generated constructor stub
    this(mike);
    charlie = context;
} 
```

你打电话`this(mike)`而不是`super(mike)` 所以你基本上从不调用不会创建 ItemizedOverlay 的超级构造函数

另外，我不知道这是否重要，但将本教程[http://about-android.blogspot.co.il/2010/03/steps-to-place-marker-in-map-overlay.html](http://about-android.blogspot.co.il/2010/03/steps-to-place-marker-in-map-overlay.html)与您的代码，

```
CustomPinPoint custom = new CustomPinPoint(delta, FindDealer.this); 
```

应该

```
CustomPinPoint custom = new CustomPinPoint(delta, this); 
```

最后一件事，你打电话给`this.populate()`你，`public void InsertPinpoint(OverlayItem india){` 因为你没有覆盖它，它应该只是`populate`为了确保你调用 super 的 populate()。不知道它是否会有所不同。

* * *

**编辑**：好吧，在玩了你的代码之后，我发现了一些东西。首先，你的查询没有返回任何结果。当我`keyword=gold`从 URL 中删除时，它开始返回结果。

我对你的坐标、地理点到位置和其他东西有点困惑，第一个结果，使用你的代码被放置在非洲附近的海中。我想那不是你的商店所在的地方。但是，它的坐标是 81,74 或类似的东西。几乎没有一个精确的坐标。也许您应该尝试将它乘以 1E6，就像您在 for 循环之前所做的那样。

但是关于你原来的问题。在进行了我之前告诉你的更改后，它不起作用。但恢复到您的原始代码，它确实如此。问题是您根本没有使用原始 URL 获得任何结果。一旦我更改了 URL，它就会接收位置并绘制标记（尽管您需要稍微修改一下以正确显示它）

希望对你也有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T05:10:42.640

在彻底解决了您的问题之后，这是一个非常简单的错误：D

```
double overlaylat0 = Double.parseDouble(lat0);
double overlaylng0 = Double.parseDouble(lng0) 
```

您只需将overlaylat0 乘以1E6，然后对overlaylng0 执行相同的操作。

# haskell - 从 Haskell 的 9 中列出所有可能的 4 选择

> ID：11766449
> 
> 赞同：3
> 
> 时间：2012-08-01T19:45:36.413
> 
> 标签：haskell

我无法找到一种有效的方法来从 Haskell 中的 9 个元素列表中挑选出 4 个元素的所有排列。做同样事情的python方式：

```
itertools.permutations(range(9+1),4) 
```

在 Haskell 中执行此操作的一种不太有效的方法：

```
nub . (map (take 4)) . permutations $ [1..9] 
```

我想找到类似的东西：

```
permutations 4 [1..9] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:06:22.493

这是我的解决方案：

```
import Control.Arrow

select :: [a] -> [(a, [a])]
select [] = []
select (x:xs) = (x, xs) : map (second (x:)) (select xs)

perms :: Int -> [a] -> [[a]]
perms 0 _  = [[]]
perms n xs = do
    (y, ys) <- select xs
    fmap (y:) (perms (n - 1) ys) 
```

它非常懒惰，甚至适用于无限列表，尽管那里的输出不是很有用。我没有费心实施对角化或类似的东西。对于有限列表，这很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:25:53.900

```
pick :: Int -> [a] -> [[a]]
pick 0 _ = [[]]
pick _ [] = []
pick n (x : xs) = map (x :) (pick (n - 1) xs) ++ pick n xs

perms :: Int -> [a] -> [[a]]
perms n l = pick n l >>= permutations 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T21:24:27.473

```
replicateM 4 [1..9] 
```

我相信会为你做这件事。它在`Control.Monad`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:51:37.810

这个怎么样

```
import Data.List (delete)

perms :: (Eq a) => Int -> [a] -> [[a]]
perms 0 _  = [[]]
perms _ [] = [[]]
perms n xs = [ (x:ys) | x <- xs, ys <- perms (n-1) (delete x xs) ] 
```

基本上，它说，一个集合中 n 个元素的排列是，选择任何元素作为结果的第一个元素，然后其余元素是来自集合其余部分的 n-1 个元素的排列。加上一些基本情况。假设列表中的元素是唯一的。

# html - 复制和粘贴需要 html 实体的文本

> ID：11766463
> 
> 赞同：2
> 
> 时间：2012-08-01T19:46:00.367
> 
> 标签：html, special-characters, dreamweaver

我想将 Outlook 邮件中的内容复制并粘贴到 DreamWeaver 中，但是很多自动格式化会搞砸。例如，我复制了“即将推出...”，“...”在 DreamWeaver 中正确显示，但实际上必须`&hellip;`

我可以吗：

1.  让 DreamWeaver 自动将粘贴的文本转换为适当的 html 实体
2.  如果 DreamWeaver 无法在 Web 浏览器中正确显示，则会导致其显示不正确。

我经常使用法语字符。

**或者**有没有办法强制 Outlook 正常显示内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:36:24.370

1.  将您的文档编码更改为“西欧”而不是例如。UTF-8。( `Modify -> Page properties -> Title/Encoding`. 每当您在“设计”视图中粘贴特殊字符时，Dreamweaver 都会自动将其转换为正确的 HTML 实体 - 例如。...将转换为`&hellip;`

2.  恐怕这不太可能——在许多情况下，即使没有 HTML 编码，网络浏览器也会正确呈现特殊字符——这一切都取决于您的具体设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:53:39.710

[http://centricle.com/tools/html-entities/](http://centricle.com/tools/html-entities/)之类的工具可能会为您提供帮助。它将根据您提供的文本对 HTML 实体进行编码或解码。

# c# - 实体框架代码优先 - 使用 MySql 创建数据库？

> ID：11766466
> 
> 赞同：1
> 
> 时间：2012-08-01T19:46:07.773
> 
> 标签：c#, mysql, entity-framework, ef-code-first

我只是想尝试使用实体框架来代替 NHibernate。我正在使用 MySql 数据库。所以我对代码优先系统做了一些测试。MsSql 数据库一切正常，并且模式是自动生成的。但是后来我用 MySql 进行了尝试，但模式生成不起作用。

```
public class Context : DbContext
{
    public Context()
    {

    }

    public Context(string str)
        : base (str)
    {

    }

    public DbSet<User> Users
    {
        get;
        set;
    }
}

public class User
{
    public int Id
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }
}

class Program
{
    static void Main(string[] args)
    {
      var sqlBuilder =
            new SqlConnectionStringBuilder
            {
                DataSource = "localhost",
                InitialCatalog = "test",
                Password = "",
                UserID = "root"
            };

        var entityBuilder =
            new EntityConnectionStringBuilder
            {
                Provider = "MySql.Data.MySqlClient",
                ProviderConnectionString = sqlBuilder.ConnectionString,
                Metadata = @"res://*"
            };

        var str = entityBuilder.ConnectionString;

        using (var ctx = new Context(str)) 
        {

            ctx.Users.Add(new User() // exception here
            {
                Name = "test"
            });

            ctx.SaveChanges();
        }

        using (var ctx = new Context(str))
        {
            foreach (var user in ctx.Users)
            {
                Console.WriteLine("id:{0} name:{1}", user.Id, user.Name);
            }
        }
    }
} 
```

我得到了这个例外：“实体类型 User 不是当前上下文模型的一部分。”

所以这是我的问题，如果我使用 MySql 可以自动生成数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:59:57.593

我不知道为什么它有效，但现在有效。我从代码中删除了连接属性，并创建了一个 app.config 文件并使用此博客[http://brice-lambson.blogspot.fr/2012/05/using-entity-framework更正了数据库创建中的错误-code-first-with.html](http://brice-lambson.blogspot.fr/2012/05/using-entity-framework-code-first-with.html)现在它可以工作了

# javascript - 要么/或单选按钮的jQuery表单验证

> ID：11766469
> 
> 赞同：1
> 
> 时间：2012-08-01T19:46:26.593
> 
> 标签：javascript, jquery, jquery-validate

如果单选按钮值不等于特定值，我正在尝试显示错误消息。具体来说，我试图提供一系列是/否问题，在提交或单击按钮时，如果提供的值为 a) null 或 b) 不等于，则在每组按钮下方显示免责声明到所需的值。到目前为止，我在搜索互联网时发现的所有验证选项都是简单的“非空”验证检查，而不是针对特定值。

我知道这不是与特定代码有关的问题，而更像是一个功能问题，但是任何人都可以对此提供帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:46:55.383

您可以编写类似这样的自定义验证方法

```
$("#idOfForm").validate({
    rules: {
        agerequirement : {
            radiocheckyes : true
        },
        areyoutheinventor : {
            radiocheckyes : true
        }
    }
});

$.validator.addMethod("radiocheckyes", function(value, element) {
    return (this.optional(element) || $(element).attr("checked"));
}, "Please select"); 
```

请注意，如果 yes 是使用此代码的单选按钮组中的第二个元素，它将不起作用，您需要根据需要更改自定义验证方法

# jquery - jQuery 仅替换元素的类而不更改其他内容

> ID：11766473
> 
> 赞同：0
> 
> 时间：2012-08-01T19:46:41.213
> 
> 标签：jquery

我有一个用 jQuery 触发的播放器。我可能在一个页面上有多个播放器，但工具栏中只有一个“miniPlayer”。如果触发另一个播放器事件，播放器工具栏需要播放/暂停等。为此，我只需要替换播放器元素中的类。

工具栏中的播放器的 id 为#miniPlayer，所有其他播放器都只是#player，这是用于样式的。因此，我只能替换元素中的类，以便在单击播放器中的按钮时不会更改 miniPlayer 的样式，反之亦然。

迷你播放器（播放）；

```
<a id="miniControls" class="play" href="" title=""></a> 
```

会变成;

```
<a id="miniControls" class="pause" href="" title=""></a> 
```

Onclick 迷你播放器暂停按钮或普通播放器暂停按钮。

普通玩家（播放）；

```
<a id="controls" class="play" href="" title=""></a> 
```

会变成;

```
<a id="controls" class="pause" href="" title=""></a> 
```

Onclick 迷你播放器暂停按钮或普通播放器暂停按钮。

如果点击普通播放器（播放），我目前拥有的 jQuery 将替换迷你播放器；

```
<a id="controls" class="pause" href="" title=""></a> 
```

但是 id 需要保留为样式的 miniControls。如果单击 miniPlayer，这将是相反但相同的问题。

jquery 脚本中的播放/暂停功能（目前仅适用于 miniPlayer）：

```
play.live('click', function(e) {
    e.preventDefault();
    song.play();

    $('.play').replaceWith('<a id="miniControls" class="pause" href="" title=""></a>');

    $('.seek').attr('max',song.duration);
});

pause.live('click', function(e) {
    e.preventDefault();
    song.pause();
    $('.pause').replaceWith('<a id="miniControls" class="play" href="" title=""></a>');

}); 
```

有没有办法只替换类，所以我只需将 $('.pause') 替换为 $('.play') 而不是整个`<a>`标签。我在 jquery 网站上看过，但找不到任何东西。也许我从错误的角度看它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:49:27.493

查看 jQuery 的 .toggleClass() 函数：

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:52:11.003

```
$('#miniControls').click(function(e){
    e.preventDefault();
    $(this).hasClass('play') ? song.pause():song.play();
    $(this).toggleClass('play pause');
}); 
```

您可以通过使用类似上述示例的方法来大大减少您的代码。在这种情况下，您将使用`.toggleClass()`在播放和暂停类之间进行切换，并`.hasClass()`用于确定要执行的操作。

# php - 多查询+单查询

> ID：11766474
> 
> 赞同：0
> 
> 时间：2012-08-01T19:46:43.160
> 
> 标签：php, mysqli

我怎样才能设置这个功能工作？最后一个查询没有被执行..我在一个循环中搜索了很多查询（foreach，for，while）但没有..我正在尝试存储会话。

```
private function gc($expire)
{
  $gcq = "SELECT `path`, `last`, LENGTH(`path`) FROM `sessions` WHERE LENGTH(`path`) > 0  AND DATE_ADD(`last`, INTERVAL ".(int) $expire." SECOND) < NOW();";
  $gcq .= "DELETE FROM `sessions` WHERE DATE_ADD(`last`, INTERVAL ".(int) $expire." SECOND) < NOW()";
            if($this->dbh->multi_query($gcq)) 
              {
                $arr_gc = null;
                $count = 0;
                do {
                      if($result = $this->dbh->store_result()) 
                      {
                        while($row = $result->fetch_assoc()) 
                        {
                         $arr_gc[$count] = array($row['path'], $row['last']);
                         $count++;
                        }
                        $result->free();
                      }
                      if($this->dbh->more_results()) 
                      {
                        $garbage = null;
                      }
                    } 
                     while($this->dbh->next_result());
                   }
                    // no problems up here..
                    // problems from here to end....         

                    $alfa = count($arr_gc);

                    if($alfa > 0)
                    {
                      $count = 0;

                        while($count < $alfa)
                        {
                         $this->dbh->query("INSERT INTO `store_sess` SET `xpath` = '".$this->dbh->real_escape_string($arr_gc[$count][0])."', in = '".$this->dbh->real_escape_string($arr_gc[$count][1])."', out = '0000-00-00 00:00:00'");
                         $count++;
                        }                        
                    }
  return $this->dbh->affected_rows;
} 
```

编辑： store_sess 表的结构：

```
id int (autoincrement)
xpath longtext
in datetime (tried also with varchar)
out varchar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:55:10.957

```
while($count < $alfa) {
    $this->dbh->query("INSERT INTO `store_sess` SET `xpath` = '".$this->dbh->real_escape_string($arr_gc[$count][0])."', in = '".$this->dbh->real_escape_string($arr_gc[$count][1])."', out = '0000-00-00 00:00:00'");
    $count++;
} 
```

上面的代码不是很可扩展。相反，您应该完整地设置查询（您可以使用一个查询进行多次插入）并在设置查询字符串后执行它。

**更新**

你的`while`循环也是不必要的。

**结束更新**

```
$insertVals = "";
for($count = 0; $count < $alfa, $count++) {
    $insertVals = ($insertVals == "" ? "" : ", ") . 
        "('" . $this->dbh->real_escape_string($arr_gc[$count][0]) . "', '" . 
        $this->dbh->real_escape_string($arr_gc[$count][1]) . 
        "', '0000-00-00 00:00:00')";
}

$query = "INSERT INTO `store_sess` (`xpath`, `in`, `out`) VALUES " . $insertVals; 
```

# javascript - 将 JavaScript 变量传递给 Rails 控制器

> ID：11766476
> 
> 赞同：1
> 
> 时间：2012-08-01T19:46:53.130
> 
> 标签：javascript, ruby-on-rails, parameter-passing

我正在使用 rails 3.2.6 版，我正在尝试将 Javascript 变量传递到另一个页面“Test10”。我在视图中有以下代码：

```
<script>
var message = "hello world!";
</script>

<%= link_to "Go!", Test10_path(), :with => "'message='+ message"  %> 
```

该参数未传递给 Test10。我在 Test10 控制器中有以下内容：

```
def Test10
  @hello = params[message]
end 
```

这是将Javascript变量传递给我的rails控制器的正确方法吗？它不工作。我会很感激任何指示。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:52:54.013

```
<%= link_to "Go!", Test10_path(), :id => "my_link"  %>

<script>
    var message = 'test';
    var url = $('#my_link').attr('href') + '?message=' + message;
    $('#my_link').attr('href', url);
</script> 
```

像这样的东西应该工作。虽然大多数时候，最好使用表单来传递参数......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:48:23.153

你不能这样做。JavaScript 和 Ruby 代码在完全不同的上下文中执行，JavaScript 在客户端，Ruby 在服务器上。

通常，如果您想将值从客户端传递到服务器，您需要通过将其以表单或作为查询字符串的一部分或通过 AJAX 将其发回。

在您的特定示例中，您必须编写一些 JavaScript 来选择锚标记并将`message`变量的内容附加到锚标记的查询字符串。类似于以下内容：

```
<script>
  var message = "hello world!";

  // Select your anchor tag
  var link = $('a#my-link');

  // Append your message to the link's href attribute
  link.attr('href', link.attr('href') + "?message=" + message);
</script> 
```

# android - ANDROID 添加新包

> ID：11766479
> 
> 赞同：2
> 
> 时间：2012-08-01T19:47:21.660
> 
> 标签：android, layout, package

在我的项目中，我有一些课程和一些布局。我在我的项目中添加了一个新包，我在这个新包的新类中出现了一个问题：例如，当我编写“setContentView(R.layout.author_xml);”时 我有红色下划线并传达：“R 无法解析为变量”。在我使用新包中的活动时，我在 adnroid 清单中添加：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tom"
android:versionCode="1"
android:versionName="1.0" >

<activity
    android:name=".menu.NewGameActivity"><!--I add .menu-->
</activity> 
```

通常在新包中的类中，我看不到布局。也许我应该在布局中添加一些东西，例如： android:package="com.tom.menu" -> 但它不起作用。在这种情况下我能做什么？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:00:30.093

如果您在子包中有一个类，例如，您必须从清单中提到的基础包中`com.tom.mypackage`导入您的类。`R`只需将 import 语句放入子包中且看不到的类中`R`：

```
package com.tom.menu; // class in subpackage

import com.tom.R;  // This will get you your R from base package

import android.app.Activity;

public class NewGameActivity extends Activity {

// use R here like you are used to

// remainder omitted... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:53:11.890

您需要`R`在代码文件中导入该类。我相信该类是在您的应用清单中的包中生成的。如果您使用的是 eclipse，您应该`R`在项目资源管理器中看到生成的类，并且可以看到它所在的包。还有一个`android.R`包，其中包含与 android OS 捆绑的所有资产。它有一些很酷的东西，但它与你的问题无关。

# java - 使用 XPath 从 XML 文件中获取特定值

> ID：11766482
> 
> 赞同：0
> 
> 时间：2012-08-01T19:47:23.110
> 
> 标签：java, xml, parsing, xpath

所以我在这里有一个 XML 文件，我想使用 XPath 从中获取一个值。有问题的文件是一个 zip 格式的 XML 文件，您可以[在此处](http://oasis.caiso.com/mrtu-oasis/SingleZip?queryname=PRC_INTVL_LMP&startdate=20110418&enddate=20110418&market_run_id=RTM&node=DLAP_PGAE-APND&opr_hr=1)下载：

我相信它是有效的 XML。

我当前的目标是解析出文档中的*最后一个*（最新）`LMP_PRC`值。

我当前的代码如下所示，每次都返回一个空字符串：

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
XPathExpression expr =
  xpath.compile("//m:OASISReport/m:MessagePayload/m:RTO/m:REPORT_ITEM[3]/m:REPORT_DATA[/m:DATA_ITEM='LMP_PRC'][last()]/m:VALUE/text()") ;
String result = (String) expr.evaluate(doc, XPathConstants.STRING); 
```

这`m:REPORT_ITEM[3]`对我来说一直是一个困惑的领域，所以我几乎对每个数字都进行了尝试，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:59:35.430

m:REPORT_ITEM[3] 仅表示匹配的第三个。由于以下原因，您没有得到任何匹配：

```
m:REPORT_DATA[/m:DATA_ITEM='LMP_PRC'][last()] 
```

你想要从那里的相对路径，而不是绝对路径：

```
m:REPORT_DATA[m:DATA_ITEM='LMP_PRC'][last()] 
```

所以整个事情看起来像：

```
//m:OASISReport/m:MessagePayload/m:RTO/m:REPORT_ITEM[3]/m:REPORT_DATA[m:DATA_ITEM='LMP_PRC'][last()]/m:VALUE/text() 
```

要处理的另一件事是名称空间解析。有关您的案例中发生的情况的一个很好的总结，请参阅[http://blog.davber.com/2006/09/17/xpath-with-namespaces-in-java/](http://blog.davber.com/2006/09/17/xpath-with-namespaces-in-java/)。所以你应该添加如下内容：

```
private static NamespaceContext getNamespaceContext() {
    NamespaceContext namespaceContext = new NamespaceContext() {
        public String getNamespaceURI(String prefix) {
            String uri = null;
            if (prefix == null) {
                throw new IllegalArgumentException("No prefix provided!");
            } else if(prefix.equals("m")) {
                uri = "http://oasis.caiso.com/mrtu-oasis/xsd/OASISReport.xsd";
            }
            return uri;
        }

        @SuppressWarnings("rawtypes")
        @Override
        public Iterator getPrefixes(String namespaceURI) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public String getPrefix(String namespaceURI) {
            // TODO Auto-generated method stub
            return null;
        }
    };

    return namespaceContext;
} 
```

然后使用该方法在您的`xpath`对象上设置命名空间上下文：

```
xpath.setNamespaceContext(getNamespaceContext()); 
```

# php - PHP 抓取没有扩展的远程图像

> ID：11766484
> 
> 赞同：0
> 
> 时间：2012-08-01T19:47:29.097
> 
> 标签：php, javascript, jquery, image, scraper

我开发了一个图像抓取工具，可以从远程站点抓取特定图像，并在粘贴到文本字段时显示它们。该逻辑包括查找以 .jpg .jpeg 结尾的图像。等。

我遇到了一个问题，很多网站将通过 javascript 生成图像，或者没有将图像扩展名作为显示图像的一部分。示例网站如

www.express.com 和 www.underarmour.com 有这个问题等等。

我可以使用什么功能从设置的 URL 中查找图像，然后相应地显示它们没有文件扩展名？

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:50:02.613

除非 url 来自`<img src="...">`，否则无法判断您将从特定 url 中得到什么。`http://example.com/index.html`实际上很可能是一个提供 zip 文件的 PHP 脚本。

在您实际点击 url 并检查标题 + 下载数据之前，不可能可靠地告诉您 url 会给您什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:51:07.600

我想，你有两个选择：

1.  生成一些启发式方法，判断 URL 是否可以是图像（例如`/images/`在 URL 中查找一部分）

2.  加载每个 URL 并检查返回的数据是否为图像（例如使用`getimagesize()`）

第二个版本更通用，但在带宽和资源方面都相当繁重。

# javascript - 单击时显示窗口警报

> ID：11766487
> 
> 赞同：0
> 
> 时间：2012-08-01T19:48:06.463
> 
> 标签：javascript, apex-code, visualforce

我不确定如何做到这一点，并且可以使用一些建议。

我在标准页面布局上创建了一个自定义按钮，当用户单击它时，我想检查用户是否在此对象中有联系人。

如果他不这样做，我想显示一个警报-“请添加联系人”并将他返回到他当前的**标准**页面。否则，我希望他能够访问已经编写好的新 VF 页面。我不知道该怎么做...

停！

代码：

```
<apex:page standardController="MY_List__c" extensions="MYListExtension" >
<apex:form >

           <script>
                var hasContact = {!totalContacts};
                if(hasContact == 0 ){
                    alert('Please add contacts!'); 
                    window.location ="/" + {"!theListId"};                    
                       }
                     else{
                          window.location = "/MYListSend?id=" + {"!theListId"};
                }

            </script>

            </apex:form>
</apex:page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:14:45.893

试试这个：

顶级类：

```
public Boolean checkContact { get; set; }
public Boolean hasContact   { get; set; }

public PageReference myMethod(){
    // your logic here
    hasContact = true;
    checkContact = true;

    return null;
} 
```

和visualforce页面：

```
<apex:commandButton value="Check user data" action="{!myMethod}" reRender="checkArea"/>

<apex:outputPanel id="checkArea">
    <apex:outputPanel id="showAfterCheck" rendered="{!checkContact}">
            <script>
                var hasContact = {!hasContact};
                if(!hasContact){
                    alert('Please add contacts!');
                    window.location = "/apex/YourCustomPageName1";
                }
                else{
                    window.location = "/apex/YourCustomPageName2";
                }

            </script>
    </apex:outputPanel>
</apex:outputPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:03:57.857

您不能在 apex 中执行此操作，因为它是服务器端语言，但在 javascript 中这是可能的。

# iphone - 网络应用程序中的 2 条腿 oauth 专门用于其随附的 iphone 应用程序？

> ID：11766493
> 
> 赞同：2
> 
> 时间：2012-08-01T19:48:33.720
> 
> 标签：iphone, ruby-on-rails, ios, rest, oauth-2.0

我是 iPhone 开发的新手，想知道做 2 legged oauth 的标准方法是什么。我已经登陆了 2 legged oauth，因为这个应用程序基本上是我的网络应用程序的另一个界面（就像 iphone 的 twitter / facebook 应用程序），所以在做了一些研究之后，我决定 2 legged oauth 可以完成工作对我来说，而不是 3 条腿。

我并不完全清楚 2-legged oauth 是如何工作的，但具体来说，我不清楚的是如何管理每个用户（每个 iphone）的公钥/私钥。我相信在每部 iPhone 上拥有相同的公钥/私钥并不是一个好主意。理想情况下，每部 iPhone 不应该有不同的私钥吗？如果所有 iPhone 都具有相同的公钥 + 私钥，那么任何人都不会很容易掌握这些并开始从任何地方发出任意请求吗？另外，我怎么知道是哪个用户提出了这些请求？每次请求都发送某种令牌（就像带有会话信息的 cookie）是个好主意吗？

如果有人能更清楚地了解当前的行业标准，以及 iphone 应用程序如何解决这个问题，那就太好了。

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:17:21.930

两足 OAuth 本身的问题是客户端访问和密钥的存储。Oauth 中的密钥（据我了解）不应通过 HTTP(S) 传输。这意味着您必须将其存储在应用程序中，这使得它很可能被逆向工程和发现。

我建议先使用 HTTPS，使用类似 [http://matteomelani.wordpress.com/2011/10/17/authentication-for-mobile-devices/这样简单的东西](http://matteomelani.wordpress.com/2011/10/17/authentication-for-mobile-devices/)

Oauth 将使其他客户端应用程序能够连接/使用您的 Rails 应用程序的 API，但是当您使用移动应用程序使用您自己的 API 时，“密钥”问题会杀死它。当您在移动应用程序中使用 facebook 或 twitter 或其他 Oauth 提供商进行消费时，密钥仍在您的后端，用于处理/授权令牌/代码。

到目前为止，这也是我的经验，它并不完全是一个明确的答案，也许其他人也可以对此进行更多说明。

# regex - 正则表达式单个空格

> ID：11766494
> 
> 赞同：0
> 
> 时间：2012-08-01T19:48:36.650
> 
> 标签：regex, string, expression, whitespace

我正在尝试制作一个正则表达式来验证此模式：

> 这是一个文本
> [TEXT][SINGLE SPACE][TEXT][SINGLE SPACE][TEXT][SINGLE SPACE][TEXT] 个人姓名
> William Smith
> [TEXT][SINGLE SPACE][TEXT]
> 另一个文本 [TEXT][SINGLE空格][文本][单个空格]

该模式将包含以下规则：

*   不以任何空格开头
*   字符串可以在单词之间只包含一个空格，也可以在字符串末尾包含一个空格

我有这个正则表达式

> /^[[A-Za-z0-9]+\s?[A-Za-z0-9]*]{0,10}$/

但我不知道如何重复模式并使其长度为 10

** 编辑 **

为了更容易理解，我正在开发一个 jQuery 插件，它将按键事件绑定到输入文本元素，然后添加一个表达式来验证每个按键按下的文本，就像一个蒙面的文本框，所以要应用规则对于只接受字母数字字符和单词之间的空格的掩码，我需要表达式验证每个按下的键，如下所示

T
Th
This
This
This I
This is
This is
This is a
This is a
This is at
This is a te
This is a tex
这是一个文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:53:32.577

好的，我*想*我已经正确理解了要求。

首先，这匹配一个单词，后跟一个空格：

```
/[a-zA-Z01-9]+ / 
```

然后我们需要重复 10 次，对吗？从头开始？

```
/^([a-zA-Z01-9]+ ){10}/ 
```

但是尾随空格是可选的，是吗？

```
/^([a-zA-Z01-9]+ ){9}[a-zA-Z01-9]+ ?$/ 
```

此外，使用它可能会更好，`\w`而不是`[a-zA-Z01-9]`. ¹并且`\s`会匹配任何空格，这可能比`只匹配空格更好。`

 `如果您的意思是*最多*10 次，那应该是`{0,9}`而不是`{9}`.

¹ `\w`将匹配下划线以及各种国际字母，而您的原始模式不会。不确定这是否是故意的，所以我没有使用它，但如果它不是故意的，那么这`\w`是一个更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:53:30.317

使用[组](http://www.regular-expressions.info/brackets.html)(with `()`) 而不是[字符类](http://www.regular-expressions.info/charclass.html)分隔符 ( ) 对最多[重复](http://www.regular-expressions.info/repeat.html)十次`[]`的表达式进行分组：

```
^\w+(\s\w+){0,9}\s?$ 
````

# html - 水平列表给了我很多问题

> ID：11766498
> 
> 赞同：0
> 
> 时间：2012-08-01T19:48:46.400
> 
> 标签：html, css, navigation

老实说，我在这个问题上已经深入了两个小时 - 子菜单的样式根本不会正确，而且无论我将我的列表与多少列表进行比较，我似乎都无法让它看起来正确。

**该网站：** [http](http://blacktiephotographers.com/) ://blacktiephotographers.com/ - 您必须单击“进入”才能看到列表，对此感到抱歉。

**问题：** “公司”类别下的子列表 - 我希望悬停的项目填充子 UL 的整个宽度。如您所见，黑色仅填充了 ul 宽度的 80% 左右。

我正在使用的代码：

```
<div id="navigation-menu-container">
   <ul>
      <li><a href="<?php echo home_url(); ?>" id="nav-home" class="noSlide <?php if (is_home() || is_front_page()) { echo "curr-page-nav"; }?>"><span class="nav-hidden">HOME</span></a></li>
      <li><a href="<?php echo get_page_link(838); ?>" id="nav-about" class="noSlide <?php if (is_page(838)) { echo "curr-page-nav";}?>"><span class="nav-hidden">ABOUT</span></a></li>
      <li><a href="<?php echo get_page_link(1033); ?>" id="nav-wedding" class="noSlide <?php if (is_page(1033)) { echo "curr-page-nav";}?>"><span class="nav-hidden">WEDDINGS</span></a></li>
      <li><a href="<?php echo get_page_link(1303); ?>" id="nav-mitzvah" class="noSlide <?php if (is_page(1303)) { echo "curr-page-nav";}?>"><span class="nav-hidden">MITZVAHS</span></a></li>
      <li><a href="<?php echo get_page_link(1530); ?>" id="nav-celebration" class="noSlide <?php if (is_page(1530)) { echo "curr-page-nav";}?>"><span class="nav-hidden">CELEBRATIONS</span></a></li>
      <li><a id="nav-corporate" class="accordionButton <?php if (is_page(1635) || is_page(1909)) { echo "curr-page-nav";}?>"><span class="nav-hidden">CORPORATE</span></a>
          <ul>
              <li><a href="<?php echo get_page_link(1635); ?>" id="nav-meeting" class="subitem"><span class="nav-hidden">MEETINGS</span></a></li>
              <li><a href="<?php echo get_page_link(1909); ?>" id="nav-event" class="subitem"><span class="nav-hidden">EVENTS</span></a></li>
          </ul>
      </li>
      <li><a href="<?php echo get_page_link(831); ?>" id="nav-testimonial" class="noSlide <?php if (is_page(831)) { echo "curr-page-nav";}?>"><span class="nav-hidden">TESTIMONIALS</span></a></li>
      <li><a href="<?php echo get_page_link(874); ?>" id="nav-associate" class="noSlide <?php if (is_page(874)) { echo "curr-page-nav";}?>"><span class="nav-hidden">ASSOCIATES</span></a></li>
</ul>
</div> 
```

我已经检查了很多次我的风格，似乎无法做出上述任何改变。

这是一个屏幕截图：[源代码对我来说是什么样的](http://i.stack.imgur.com/ZkOwh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:02:46.863

我强烈建议使用`<ul>`and`<li>`而不是你现在所拥有的。

像这样：http: [//jsfiddle.net/Nafhr/](http://jsfiddle.net/Nafhr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:01:08.020

你能提供一个屏幕截图来说明它应该如何表现..

同样在 FF3 中，子菜单显示在主图像后面而不是前面.. 你需要添加 zindex: 9999; 让它放在图像的顶部..并确保您的定位是相对的..

# jquery - 寻找更直观的 jQuery 选择器以从“this”行中的特定输入字段中获取值

> ID：11766499
> 
> 赞同：0
> 
> 时间：2012-08-01T19:48:46.773
> 
> 标签：jquery, jquery-selectors

我有一个由以下行组成的表：

```
<tr>
  <td>
    <a href="http://www.google.com/">Link</a>
  </td>
  <td>It takes about 3 seconds for a search instead of the normal .3 seconds.
  </td>
  <td>
    <input type="text" class="priority" size="3" value="-5"/>
  </td>
  <td>
    Functionality
  </td>
  <td>
    8/1/2012 6:57:03 AM</td><td>FarQuad
  </td>
  <td>
    <select class="assign">
      <option value="No One" selected="selected">No One</option>
      <option value="Landon" >Landon</option>
      <option value="Steve" >Steve</option>
      <option value="Brandon" >Brandon</option>
    </select>
  </td>
  <td>
    <select class="status">
      <option value="Unassigned" selected="selected">Unassigned</option>
      <option value="Assigned" >Assigned</option>
      <option value="In Progress" >In Progress</option>
      <option value="Completed" >Completed</option>
    </select>
  </td>
  <td>
    <input type="text" class="notes" value="Super notes"/>
  </td>
  <td> 
    <input type="button" id="16" Value="Save" onclick="updateThisIssueRow(this)" />
  </td>
</tr> 
```

请注意，最后一个单元格包含一个按钮，该按钮将通过 ajax 对数据库执行更新。

这是该方法的开始：

```
 function updateThisIssueRow(thisRowsButton) {

            var issueIDInput, newPriorityInput, newAssignPersonInput, newIssueStatusInput, newIssueNotesInput;

            var $currentRow = $(thisRowsButton).parent().parent();

            issueIDInput = thisRowsButton.id;
            newPriorityInput = $currentRow.children().eq(2).children().first().val();

            alert("Value of newPriorityInput is: " + newPriorityInput);
.
.
. 
```

现在，我基本上需要使用 jQuery 获取 issueIDInput、newPriorityInput 等的值，然后将它们提供给 ajax 函数的其余部分，该函数有效。我正在为这些值寻找对读者更友好的 jQuery 选择器。我知道我可以像为 newPriorityInput 所做的那样获取所有内容（这很有效），但我的老板对 jQuery 了解不多（因此不喜欢/不信任它）。这些是否有更直观的选择器？

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:54:22.480

怎么样，

```
 function updateThisIssueRow(thisRowsButton) {
        var issueIDInput, newPriorityInput, newAssignPersonInput, newIssueStatusInput, newIssueNotesInput;
        var $currentRow = $(thisRowsButton).closest('tr');
        issueIDInput = thisRowsButton.id;
        newPriorityInput = $currentRow.find('.priority').val();
        alert("Value of newPriorityInput is: " + newPriorityInput); 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

[http://api.jquery.com/find/](http://api.jquery.com/find/)

# .net - 如何使用 linq to sql 生成可为空的 guid

> ID：11766502
> 
> 赞同：0
> 
> 时间：2012-08-01T19:48:51.867
> 
> 标签：.net, linq-to-sql, orm

我有一个带有两个 guid 字段的（旧版）表。第二个 guid 字段可以为空，但我想使用 linq to sql 在插入时自动生成一个非重复的 guid。我将自动同步设置为“OnInsert”并将自动生成值设置为 True。但是由于某种原因，当将记录放入数据库时​​，它不会自动生成/插入 guid 值。我想我可以循环生成 guid，直到找到一个不在数据库中的 guid，然后将其添加进去，但这似乎不太优雅。我确信使用 linq to sql 有更好的方法来做到这一点。关于如何做到这一点的任何建议？是否因为可空属性设置为 T 而没有制作 guid？

![在此处输入图像描述](../Images/8ae7a8354997eacd1d25c2e83fb19482.png)

我之前遇到过类似的问题，但是学会了如何更改 ID 字段的属性，以便 linq to sql 可以添加 guid[如何防止 Linq 添加 GUID 以便 SQL 服务器可以做到这一点？](https://stackoverflow.com/questions/9741913/how-do-i-prevent-linq-from-adding-a-guid-so-that-sql-server-can-do-it)我不能在这里使用该解决方案，因为这种情况下的 guid 可以为空并且不是 PK，因此我无法像在链接问题中那样更改属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:24:12.363

> 我想我可以循环生成指南，直到找到不在数据库中的指南...

如果您使用`Guid.NewGuid()`生成 GUID，则永远不应生成两个相同的 GUID。如果发生这种情况，您将赢得绝对难以置信的赔率。可以安全地假设这`Guid.NewGuid()`将返回一个地球上没有人以前生成过的 GUID。

# ajax - 验证通过 ajax 拉入的表单

> ID：11766505
> 
> 赞同：1
> 
> 时间：2012-08-01T19:49:01.037
> 
> 标签：ajax, validation

在一个小型网站和索引页面上工作，通过 ajax 拉入 contact.php 页面。一切正常。

但验证不起作用，只需刷新页面即可。

如果我通过其直接链接查看该文件，则验证没有问题。

我读到使用： .ready 的 .load insetead 是要走的路，在验证 js 上

喜欢：

```
$("#formDiv").load("/Path/To/Form", function() { 
$("#formDiv form").validate();
}); 
```

但我就是不能让它打球。

我的设置是：index.php，头部加载了 jquery。

在页脚 validate.js 和我的验证规则 js 文件中。

在contact.php页面中我刚刚----内容-----

只是有点困惑我做错了什么。

测试页面（使用为 js 准备的文档，因为测试不是从 ajax 请求触发的）

（单击通函预订泳池检查）链接

这会引入ajax页面contact.php（我不确定我是否做得正确，因为我没有添加head body和html标签或任何js）我在索引页面中加载了所有这些

我创建的 test.php 可以工作，加载了所有 js 内容等进行测试

有人可以说明我做错了什么吗？

# c# - 当 asp.net MVC 验证出错时如何保留值？

> ID：11766506
> 
> 赞同：8
> 
> 时间：2012-08-01T19:49:08.370
> 
> 标签：c#, asp.net-mvc-3

我注意到如果提交表单时出现错误，它会显示验证错误消息，这很酷。但是，它不会保留我输入的值。实际上，它们已经消失了，更糟糕的是 datepicker 也不起作用。所以，我不能再使用选择器了。所以，我的问题是：

1.  如何保留我在验证之前输入的值？
2.  如果可能的话，在发生验证错误后有什么方法可以重用选择器控件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T19:55:42.277

假设您将表单值数据绑定到视图模型，只需在验证失败时将视图模型传递回视图。让我们看一个例子：

### 视图模型：

```
public class ViewModel {
    [Required]
    public string UserName { get; set; }

    [Required, DataType(DataTypes.Password)]
    public string Password { get; set; }
} 
```

### 控制器：

```
public class LoginController : Controller {
    [HttpGet]
    public ActionResult Login() {
        return View();
    }

    [HttpPost]
    public ActionResult Login(LoginViewModel model) {
        if( ModelState.IsValid ) {
            if( Membership.ValidateUser(model.UserName, model.Password) ) {
                FormsAuthentication.SetAuthCookie(model.UserName, false);
                return Redirect("~/");
            }
        }

        // If we got this far, something went wrong.
        // Pass the model back to the view.
        return View(model);
    }
} 
```

### 风景：

```
@Html.ValidationSummary()

using(@Html.BeginForm())
{
    @Html.EditorForModel()
} 
```

我们使用 HtmlHelper 方法`BeginForm`和`EditorForModel`. 我们也可以使用`EditorFor(model => model.UserName)`and `EditorFor(model => model.Password)`。或者我们可以手动编写 HTML。重要的是 HTML 字段名称与我们的视图模型类中的属性匹配：

`<input type="text" name="UserName" />`

ASP.NET Mvc 会自动将表单元素数据绑定到`HttpPost`动作中的 LoginViewModel。只需将无效模型传递回视图即可填充字段。

# ruby-on-rails - 在 Windows 上使用 Guard 和 rspec 更改文件时不运行测试

> ID：11766511
> 
> 赞同：7
> 
> 时间：2012-08-01T19:49:32.897
> 
> 标签：ruby-on-rails, rspec, rspec-rails, guard

我已经安装了guard-rspec gem 以在我的rails 应用程序中使用。当我通过命令行从命令行启动警卫时`bundle exec guard`，它第一次运行我的整个测试套件没有问题。

但是，每当我对我的 Guardfile 中指定的规范文件或任何监视文件进行任何更改时，Guard 似乎都无法识别这些更改，并且不会重新运行任何测试。

我什至尝试在我的 Guardfile 中添加一些明确的内容，如下所示：

```
watch("app/views/orders/new.html.erb")          { "spec/requests/orders_spec.rb" } 
```

当我编辑和保存正确时，哪个应该触发我的`orders_spec.rb`测试运行？`new.html.erb`好吧，当我编辑它并点击保存时，什么也没有发生，甚至没有错误或警告。

有没有人在 Windows 上运行 Guard 或遇到过类似的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T08:42:32.783

我不是 Windows 用户，这不是我个人的经验，但作为 Guard 维护者，我经常听说[fchange](https://github.com/stereobooster/rb-fchange) gem 有问题。您可以强制 Guard 轮询更改，从而跳过 fchange：

`bundle exec guard -p`

Maher Sallam 已经解决了这个问题并创建了[wdm](https://github.com/Maher4Ever/wdm)，这似乎更可靠。还有一个将其集成到 Guard 的[拉取请求](https://github.com/guard/listen/pull/56)。我建议您测试集成并给 Maher 一些来自真实世界 Windows 用户的反馈，因为 Maher 是 Linux 专家：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-27T13:21:01.063

我有这个问题（但在 Mac 上）。我有一个服务类的规范，当我保存规范时，测试会在警戒中运行，但是当我保存服务类时，相应的规范没有运行。只有这个类受到影响。原来我的规范文件名中有错字，并且与类文件名的名称不匹配。如果您的规范未在保存时运行，请确保您的文件名正确。

# windows - 我可以使用什么来代替 Unix 管道在 Windows 上进行进程间通信？

> ID：11766516
> 
> 赞同：4
> 
> 时间：2012-08-01T19:49:59.880
> 
> 标签：windows, linux, ipc, pipe, named-pipes

我有一个启动子进程的应用程序。子进程从标准输入读取要操作的文件。对于某些操作，它需要一个输入文件，其中包含有关如何处理它所操作的文件的信息——我们称之为“控制文件”。控制文件的名称也是从标准输入读取的。父应用程序可以使用临时文件作为控制文件，但我宁愿避免使用真实的磁盘支持文件。

在Linux上，这很简单：我可以创建一个Unix管道，fork，在启动子进程之前关闭管道的两端，并使用`/dev/fd/3`（或任何文件描述符）作为控制文件名，然后将控制数据写入父应用程序中的管道。`/tmp`或者，我可以在（或其他）中使用命名管道。

我怎样才能在 Windows 上实现类似的事情？可以使用 Windows 提供的奇怪的“命名管道”吗，也就是说，它们可以被通常的 C 库`fread()`函数读取吗？如果是，我使用什么文件名来访问它们？还是有比使用命名管道更好的方法？

（子进程是以批处理模式运行的[`exiftool`命令行实用程序](http://www.sno.phy.queensu.ca/~phil/exiftool/exiftool_pod.html)，所以我无法控制它。父应用程序是用 Python 编写的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:00:20.313

**更新：**

@Harry Johnston 指出我误读了您的问题-您不想修改子流程。在这种情况下，您可以尝试使用from调用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)并填写[`hStdInput`成员`STARTUPINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331(v=vs.85).aspx)。`HANDLE``CreateNamedPipe`

**上一个答案：**

一般来说，Windows CRT（C 运行时，或`libc`Unix 中的“”）是一个奇怪的野兽：它是 C 标准库的一个非常“准系统”的垫片，有一些额外的东西，维护得不是很好，也没有暴露很多东西Windows 可以做什么。用 C 语言编写 Windows 软件最自然的方法是 Win32 API。那说：

> 可以使用 Windows 提供的奇怪的“命名管道”吗，也就是说，它们可以被通常的 C 库 fread() 函数读取吗？

是的，我相信您可以使用 来做到这一点[`_open_osfhandle`](http://msdn.microsoft.com/en-us/library/bdts1c9x(v=vs.80).aspx)，其中第一个参数可以是`HANDLE`. 这会给你一个整数，这是 Windows CRT 对 Unix 文件描述符的奇怪嘲弄。然后你可以得到一个`FILE*`with [`_fdopen`](http://msdn.microsoft.com/en-US/library/dye30d82(v=vs.80))。

> 如果是，我使用什么文件名来访问它们？

我想你可以尝试生成一个不会碰撞的随机。也许在它前面加上您的应用程序的名称，并采用进程 ID 和当前时间的某种组合？那只是我要扔出去的东西。

> 还是有比使用命名管道更好的方法？

您可以在家庭中使用套接字`AF_UNIX`，尽管最终会非常相似...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-15T14:57:03.160

您可以使用 PowerShell 作为批处理子进程来创建命名管道，并使用它在 Windows 上的批处理和其他批处理/子系统之间构建 IPC。

这是一个使用快速着色批处理输出的示例：[PowerShell as a subprocess through named pipe](https://stackoverflow.com/a/66604485/3641635)

**编辑：**将其设置为消息模式并使其对@Bbb 更具可读性

**EDIT2：**添加缺少的 NOP 和安全警告。

**小心安全问题。使用命名管道的凭据并注意 fd 5 可由服务器上的任何控制台/进程读取。使用真正的双向管道或其他命名管道而不是 fd 5 来避免这种情况。不要在野外使用这个“原样”。**

通过 PowerShell 创建“双向”命名管道的示例批处理“代码”：

```
::
:: Launch a PowerShell child process in the background linked to the console and 
:: earing through named pipe which name provided as an argument of this function.
::
:: Parameters :
::   [ Name] : A name for the named pipe.
:: Return :
::   0 if the child PowerShell has been successfully launched and the named pipe is available.
::   1 if it fails.
::   3 if PowerShell is not present or doesn't work.
::
:LaunchPowerShellSubProcessPipe
  SET LOCALV_NAME=
  IF NOT "%~1" == "" SET "LOCALV_NAME=%~1"
  IF "%~1" == "" ( ECHO :LaunchPowerShellSubProcessPipe need a name.& EXIT /B 1)
  powershell -command "$_" 2>&1 >NUL
  IF NOT "!ERRORLEVEL!" == "0" EXIT /B 3
  REM As properly stated by WReach [https://mathematica.stackexchange.com/questions/198187/how-to-read-a-named-pipe-on-windows], Windows named pipe have their own hand shake logic (WaitNamedPipe... {humor}Microsoft hate us all probably{/humor}
  REM To "read" the named pipe from batch in a POSIX way, we redirected reply to fd 5\. Reply to the output part of the named pipe can't be read from batch directly nor with common windows tools. 
  REM Do not use [System.IO.Pipes.PipeOptions]::Asynchronous ! 
  (ECHO $CloseHandle = Add-Type 'A' -PassThru -MemberDefinition '[DllImport^^^("kernel32.dll"^^^)] public static extern bool CloseHandle^^^(IntPtr hObject^^^);'; & ^
ECHO # In case of, we close the fd beforehand & ^
ECHO $Clean = $CloseHandle::CloseHandle^^^(5^^^); & ^
ECHO $npipeServer = new-object System.IO.Pipes.NamedPipeServerStream^^^('%LOCALV_NAME%', [System.IO.Pipes.PipeDirection]::In, 1, [System.IO.Pipes.PipeTransmissionMode]::Message, [System.IO.Pipes.PipeOptions]::None, 256, 256^^^); & ^
ECHO Try { & ^
ECHO   $npipeServer.WaitForConnection^^^(^^^); & ^
ECHO   $pipeReader = new-object System.IO.StreamReader^^^($npipeServer^^^); & ^
ECHO   Try { & ^
ECHO     While^^^(^^^($msg = $pipeReader.ReadLine^^^(^^^)^^^) -notmatch 'QUIT'^^^) { & ^
ECHO       Try { & ^
ECHO         If ^^^($msg.Length -gt 0^^^) { & ^
ECHO           $disp='Server got :'+$msg; & ^
ECHO           Write-Host^^^($disp^^^); & ^
ECHO           $curdte = Get-Date -Format 'HH:mm:ss'; & ^
ECHO           $reply='Reply to '+$msg+', im here, time is '+$curdte; & ^
ECHO           $reply_flag=0; & ^
ECHO           While^^^($reply_flag -eq 0^^^) { & ^
ECHO             Try { & ^
ECHO               Write-Output^^^($reply^^^) ^^^>5; & ^
ECHO               $reply_flag=1; & ^
ECHO             } Catch [System.IO.IOException] { & ^
ECHO               # Deal as you whish with potential errors & ^
ECHO             }; & ^
ECHO           }; & ^
ECHO         } & ^
ECHO       } Finally { & ^
ECHO         $npipeServer.Disconnect^^^(^^^); & ^
ECHO         $npipeServer.WaitForConnection^^^(^^^); & ^
ECHO       } & ^
ECHO     }; & ^
ECHO   } Catch [System.IO.IOException] {  & ^
ECHO     # Deal as you whish with potential errors, you will have InvalidOperation here when the streamReader is empty & ^
ECHO   } & ^
ECHO } Finally { & ^
ECHO   If ^^^($npipeServer^^^) { & ^
ECHO     $npipeServer.Dispose^^^(^^^); & ^
ECHO   } & ^
ECHO   # We close the fd & ^
ECHO   $Clean = $CloseHandle::CloseHandle^^^(5^^^); & ^
ECHO } & ^
ECHO exit & ^
ECHO[)| START /B powershell 2>NUL >NUL
  SET /A LOCALV_TRY=20 >NUL
  :LaunchPowerShellSubProcessPipe_WaitForPipe
  powershell -nop -c "& {sleep -m 50}"
  SET /A LOCALV_TRY=!LOCALV_TRY! - 1 >NUL
  IF NOT "!LOCALV_TRY!" == "0" cmd /C "ECHO[|SET /P=|MORE 1>\\.\pipe\!LOCALV_NAME!" 2>NUL || GOTO:LaunchPowerShellSubProcessPipe_WaitForPipe
  IF "!LOCALV_TRY!" == "0" EXIT /B 1
  REM 250 ms. PowerShell isn't the fastest thing to start when dealing with fd redirection... And we need it fully up to write to pipe and read from fd 5.
  powershell -nop -c "& {sleep -m 250}"
  EXIT /B 0 
```

和一个实现的例子：

```
@echo off
SETLOCAL ENABLEEXTENSIONS
IF ERRORLEVEL 1 (
  ECHO Can't use extensions
  EXIT /B 1
)
::
SETLOCAL ENABLEDELAYEDEXPANSION
IF ERRORLEVEL 1 (
  ECHO Can't use expansion 
  EXIT /B 1
)
REM We create 'MyNamedPipe'
CALL:LaunchPowerShellSubProcessPipe "MyNamedPipe"
SET "LOCALV_RET=!ERRORLEVEL!"
IF NOT "!LOCALV_RET!" == "0" (
  ECHO Failed to create the named pipe... Exit code from LaunchPowerShellSubProcessPipe : !LOCALV_RET!
  EXIT /B 1
)
REM Sending something through the pipe to the PowerShell subprocess that can be used as an IPC gate for other processes
ECHO Batch send hi to the PowerShell subprocess
ECHO Hi from the batch>\\.\pipe\MyNamedPipe
REM A NOP equivalent to be sure pipe hand shake reach completion before any other comms and that nothing stay open from this CMD and the named pipe
ECHO[|SET /P=>NUL
REM At this time, the PowerShell subprocess will take few cycles to write on the console and then write the response through fd 5.
REM We can check the pipe availability in the same way it's done in :LaunchPowerShellSubProcessPipe, but a direct read will suffice here. 
REM If we've read from the pipe, it should have ben a blocked read as we've created a synchronous pipe. 
REM As we read reply from fd 5, it's not synchronous, so we need to wait until we get the reply.
:WaitForReply
SET LOCALV_REPLY=0
FOR /F "tokens=*" %%R IN ('MORE ^<5') DO (
  ECHO Batch got a reply from SubProcess : %%R
  SET LOCALV_REPLY=1
)
IF NOT "!LOCALV_REPLY!" == "1" GOTO :WaitForReply
ECHO caller is happy >\\.\pipe\MyNamedPipe
REM A NOP equivalent to be sure pipe hand shake reach completion before any other comms and that nothing stay open from this CMD and the named pipe
ECHO[|SET /P=>NUL
:WaitForReply2
SET LOCALV_REPLY=0
FOR /F "tokens=*" %%R IN ('MORE ^<5') DO (
  ECHO Batch got a 2nd reply from SubProcess : %%R
  SET LOCALV_REPLY=1
)
IF NOT "!LOCALV_REPLY!" == "1" GOTO :WaitForReply2
REM Waiting one second for visible time delta
powershell -nop -c "& {sleep -m 1000}" 
ECHO This is my leave. >\\.\pipe\MyNamedPipe
REM A NOP equivalent to be sure pipe hand shake reach completion before any other comms and that nothing stay open from this CMD and the named pipe
ECHO[|SET /P=>NUL
:WaitForReply3
SET LOCALV_REPLY=0
FOR /F "tokens=*" %%R IN ('MORE ^<5') DO (
  ECHO Batch got a 3th reply from SubProcess : %%R
  SET LOCALV_REPLY=1
)
IF NOT "!LOCALV_REPLY!" == "1" GOTO :WaitForReply3
REM We can now tell goodbye to the PowerShell subprocess
ECHO QUIT>\\.\pipe\MyNamedPipe
EXIT /B 0
::
:: Launch a PowerShell child process in the background linked to the console and 
:: earing through named pipe which name provided as an argument of this function.
::
:: Parameters :
::   [ Name] : A name for the named pipe.
:: Return :
::   0 if the child PowerShell has been successfully launched and the named pipe is available.
::   1 if it fails.
::   3 if PowerShell is not present or doesn't work.
::
:LaunchPowerShellSubProcessPipe
  SET LOCALV_NAME=
  IF NOT "%~1" == "" SET "LOCALV_NAME=%~1"
  IF "%~1" == "" ( ECHO :LaunchPowerShellSubProcessPipe need a name.& EXIT /B 1)
  powershell -command "$_" 2>&1 >NUL
  IF NOT "!ERRORLEVEL!" == "0" EXIT /B 3
  REM As properly stated by WReach [https://mathematica.stackexchange.com/questions/198187/how-to-read-a-named-pipe-on-windows], Windows named pipe have their own hand shake logic (WaitNamedPipe... {humor}Microsoft hate us all probably{/humor}
  REM To "read" the named pipe from batch in a POSIX way, we redirected reply to fd 5\. Reply to the output part of the named pipe can't be read from batch directly nor with common windows tools. 
  REM Do not use [System.IO.Pipes.PipeOptions]::Asynchronous ! 
  (ECHO $CloseHandle = Add-Type 'A' -PassThru -MemberDefinition '[DllImport^^^("kernel32.dll"^^^)] public static extern bool CloseHandle^^^(IntPtr hObject^^^);'; & ^
ECHO # In case of, we close the fd beforehand & ^
ECHO $Clean = $CloseHandle::CloseHandle^^^(5^^^); & ^
ECHO $npipeServer = new-object System.IO.Pipes.NamedPipeServerStream^^^('%LOCALV_NAME%', [System.IO.Pipes.PipeDirection]::In, 1, [System.IO.Pipes.PipeTransmissionMode]::Message, [System.IO.Pipes.PipeOptions]::None, 256, 256^^^); & ^
ECHO Try { & ^
ECHO   $npipeServer.WaitForConnection^^^(^^^); & ^
ECHO   $pipeReader = new-object System.IO.StreamReader^^^($npipeServer^^^); & ^
ECHO   Try { & ^
ECHO     While^^^(^^^($msg = $pipeReader.ReadLine^^^(^^^)^^^) -notmatch 'QUIT'^^^) { & ^
ECHO       Try { & ^
ECHO         If ^^^($msg.Length -gt 0^^^) { & ^
ECHO           $disp='Server got :'+$msg; & ^
ECHO           Write-Host^^^($disp^^^); & ^
ECHO           $curdte = Get-Date -Format 'HH:mm:ss'; & ^
ECHO           $reply='Reply to '+$msg+', im here, time is '+$curdte; & ^
ECHO           $reply_flag=0; & ^
ECHO           While^^^($reply_flag -eq 0^^^) { & ^
ECHO             Try { & ^
ECHO               Write-Output^^^($reply^^^) ^^^>5; & ^
ECHO               $reply_flag=1; & ^
ECHO             } Catch [System.IO.IOException] { & ^
ECHO               # Deal as you whish with potential errors & ^
ECHO             }; & ^
ECHO           }; & ^
ECHO         } & ^
ECHO       } Finally { & ^
ECHO         $npipeServer.Disconnect^^^(^^^); & ^
ECHO         $npipeServer.WaitForConnection^^^(^^^); & ^
ECHO       } & ^
ECHO     }; & ^
ECHO   } Catch [System.IO.IOException] {  & ^
ECHO     # Deal as you whish with potential errors, you will have InvalidOperation here when the streamReader is empty & ^
ECHO   } & ^
ECHO } Finally { & ^
ECHO   If ^^^($npipeServer^^^) { & ^
ECHO     $npipeServer.Dispose^^^(^^^); & ^
ECHO   } & ^
ECHO   # We close the fd & ^
ECHO   $Clean = $CloseHandle::CloseHandle^^^(5^^^); & ^
ECHO } & ^
ECHO exit & ^
ECHO[)| START /B powershell 2>NUL >NUL
  SET /A LOCALV_TRY=20 >NUL
  :LaunchPowerShellSubProcessPipe_WaitForPipe
  powershell -nop -c "& {sleep -m 50}"
  SET /A LOCALV_TRY=!LOCALV_TRY! - 1 >NUL
  IF NOT "!LOCALV_TRY!" == "0" cmd /C "ECHO[|SET /P=|MORE 1>\\.\pipe\!LOCALV_NAME!" 2>NUL || GOTO:LaunchPowerShellSubProcessPipe_WaitForPipe
  IF "!LOCALV_TRY!" == "0" EXIT /B 1
  REM 250 ms. PowerShell isn't the fastest thing to start when dealing with fd redirection... And we need it fully up to write to pipe and read from fd 5.
  powershell -nop -c "& {sleep -m 250}"
  EXIT /B 0 
```

预期输出：

```
批量发送 hi 到 PowerShell 子进程
Batch 得到了 SubProcess 的回复 : 回复 Hi from the batch，我在这里，时间是 14:15:34
Batch 收到 SubProcess 的第二个回复：回复调用者很高兴，我在这里，时间是 14:15:34
Batch 收到了来自 SubProcess 的第三个回复：回复 This is my leave。, 我在这里，时间是 14:15:35

```

# python - 如果前一个元素包含匹配的文本（），则选择元素的 XPath - Python，Scrapy

> ID：11766519
> 
> 赞同：3
> 
> 时间：2012-08-01T19:50:13.423
> 
> 标签：python, xpath, web-crawler, scrapy

如果前面的元素 text() 匹配特定条件，我想提取一个元素。例如，

```
<html>
<div>
<table class="layouttab">
    <tbody>
    <tr>
        <td scope="row" class="srb">General information:&nbsp;&nbsp;</td>
        <td>(xxx) yyy-zzzz</td>
    </tr>
    <tr>
        <td scope="row" class="srb">Website:&nbsp;&nbsp;</td>
        <td><a href="http://xyz.edu" target="_blank">http://www.xyz.edu</a>
        </td>
    </tr>
    <tr>
        <td scope="row" class="srb">Type:&nbsp;&nbsp;</td>
        <td>4-year, Private for-profit</td>
    </tr>
    <tr>
        <td scope="row" class="srb">Awards offered:&nbsp;&nbsp;</td>
        <td>Less than one year certificate<br>One but less than two years certificate<br>Associate's degree<br>Bachelor's
            degree
        </td>
    </tr>
    <tr>
        <td scope="row" class="srb">Campus setting:&nbsp;&nbsp;</td>
        <td>City: Small</td>
    </tr>
    <tr>
        <td scope="row" class="srb">Related Institutions:</td>
        <td><a href="?q=xyz">xyz-New York</a>
            (Parent):
            <ul>
                <li style="list-style:circle">Berkeley College - Westchester Campus</li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>
</div>
</html> 
```

现在，如果前一个元素在 text() 属性中具有“Website:”，我想提取 URL。我正在使用带有scrapy 0.14的python 2.x。我能够使用单个元素提取数据，例如

```
 item['Header_Type']= site.select('div/table[@class="layouttab"]/tr[3]/td[2]/text()').extract() 
```

但是，如果缺少网站参数并且 tr[3] 向上移动并且我在网站元素中得到“类型”，在类型中得到“提供的奖励”，这种方法就会失败。

xPath 中是否有特定命令，例如，

```
'div/table[@class="layouttab"]/tr/td[2] {if td[1] has text = "Website"} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T23:01:48.553

对于 python 和 scrapy，您应该使用以下选择“类型”字段，这对我来说非常有用。

```
item['Header_Type']= site.select('div[1]/table[@class="layouttab"]/tr/td[contains(text(),"Type")]/following-sibling::td[1]/text()').extract() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T19:57:44.983

`div/table[@class="layouttab"]\tr\td[text()="Website"]\following-sibling::node()`会工作的，我想。否则，您可以使用并从那里`parent`转到。`td[2]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:57:47.430

以下 XPath 将执行以下操作：

```
/html/div/table[@class='layouttab']/tbody/tr/td[contains(text(),'Website')]/following-sibling::td[1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T19:59:12.610

这对我有用：

```
/html/div/table[@class="layouttab"]/tbody/tr/td[. = 'Website:  ']/following-sibling::td/a/text() 
```

*   向下钻取`td`，看看它的文本是否匹配`Website:`
*   用于`following-sibling`转到下一个`td`
*   向下钻取以检索`a`并获取 URL 使用`text()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T10:24:37.647

这也将起作用..而且更通用..

```
//table[@class='layouttab']//td[contains(text(),'Website')]/following-sibling::td//text() 
```

如果您要提取数据的页面上只有一个表，那么这也可以。

```
//td[contains(text(),'Website')]/following-sibling::td//text() 
```

# tomcat - maven在一行中部署到tomcat集群（多个）

> ID：11766520
> 
> 赞同：3
> 
> 时间：2012-08-01T19:50:14.777
> 
> 标签：tomcat, deployment, maven-2, hudson, jenkins

我们正在尝试将 maven 部署到许多多台服务器，这些服务器仅在一行中就形成了我们的集群。

[这个解决方案](https://stackoverflow.com/q/732275/344220)工作得很好，除了我们需要重复运行它（每个服务器安装 1 次），我们的目标是在我们的集成服务器 (jenkins) 构建成功的工件之后执行它。目前，拥有矩阵功能并不是一个真正的选择。如果我们只需要部署它，为什么要为每台服务器重新构建项目？（加上做这件事的时间）

我们一直在尝试使用 maven 配置文件（每台服务器一个并尝试一次全部激活它们，或者一个包含所有服务器的大型配置文件）但该选项没有运气，tomcat-maven-plugin 不能那样工作。

詹金斯似乎有一个基于货物的部署插件，但一次只能处理一台服务器

有没有办法做到这一点？要么使用 maven-tomcat-plugin？还是 Jenkins/Hudson 插件？

您的专家还有其他关于如何在成功构建后将战争部署到集群的想法吗？（我试图避免使用 shell 脚本，只是因为可移植性问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:01:45.063

如果您只需要一行代码，我建议将 CMD、Ant、bash 等脚本作为“一行”执行，并让该脚本做不止一件事。

例如，如果您使用[Ant](http://ant.apache.org/) ...您的一行可能是这样的：`ant DeployToCluster`. 并且您的 build.xml 文件`DeployToCluster`可能包含许多步骤的目标。把它想象成重构出一种可以做很多事情的代码方法。调用您的方法的代码变成单行代码。

您可能不会找到一个命令来执行您想要的操作，除非它只是执行一个其他人编写的现有脚本来执行您想要的操作。

无论哪种方式，能够一次将代码部署到单个服务器通常是一个好主意。这使您可以始终保持您的应用程序/服务处于运行状态，因为您一次只影响一个节点，而其他节点可以继续运行。它还有一个优点是，如果出现严重错误，您可以不重新启用集群中的一个节点并诊断一台服务器的问题，而不是用一个糟糕的部署取出整个集群。我们的脚本遵循的部署策略步骤是：

1.  禁用单节点监控
2.  将该节点拉出集群
3.  向其部署新代码
4.  验证节点是否使用新代码正常运行
5.  将节点放回集群
6.  重新启用对该节点的监控
7.  对每个其他节点重复步骤

如果任何步骤出现任何问题，我们始终为用户提供工作环境。

# javascript - jQuery 文本解析器

> ID：11766522
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:50:21.893
> 
> 标签：javascript, jquery, html, parsing, text

嗨**stackoverflow**的人。我想用 jQuery 创建一个文本解析器。我想要的是创建一个函数，以便传递一个字符串并进行转换。

假设我有一个带有以下 HTML 代码的 div：

```
<div class="item">
    [styled] //The "command" in order to process. If not, return false;
        [code1]Text1[/code1]
        Text2
        [code3]Text3[/code3]
    [/styled]
</div> 
```

我想在 jQuery 中做到这一点

```
$(".item").html(my_decode($(this).html()); 
```

并将 'div.item' innerHTML 更改为

```
<div class="item">
    <span class="styled">
        <span class="code1">Text1</span>
        Text2
        <span class="code3">Text3</span>
    </span>
</div> 
```

如您所见，它检查 [styled]，如果存在，则创建一个`<span>`带有“styled”类的类。和对方[]，创建一个``<span>`同类的内容。

```
[a]1[/a] [2]a[/2] => <span class="a">1</span> <span class="2">a</span> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:00:18.357

[我建议您查看Jison](http://zaach.github.com/jison/)之类的开源解析器，并从中获得灵感。然后，您可以创建自己的解决方案并从经验中学到很多东西。

祝你好运！

# jquery - $.each 将所有项目保存到对象数组中

> ID：11766525
> 
> 赞同：0
> 
> 时间：2012-08-01T19:50:46.277
> 
> 标签：jquery

我写了这个 jquery 代码：

```
 <script type="text/javascript">
    $(document).ready(function () {
        var university = { title: 0, href: 1, link: 2 };
        var universities = [];
        $(".aname").each(function (key, value) {
            university.href = value.all[0].href;
            university.title = value.all[0].innerHTML;
            university.link = value.parentNode.all[2].all[0];
            universities[key] = university;                
        });
       debugger; // now if you watch universities this only last item.
    });
</script> 
```

它应该将所有大学对象保存到它工作的大学数组中，但它只替换 $.each 之后所有项目中的最后一项我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:56:21.113

怎么样：

```
var universities = $( '.aname' ).map(function () {
    return {
        href: this.all[0].href,
        title: this.all[0].innerHTML,
        link: this.parentNode.all[2].all[0]       
    };
}).get(); 
```

但是，我不认为该`all`集合是跨浏览器的。在这种情况下，请考虑用 jQuery 的遍历方法或本机方法替换它。例如，如果`all[0]`选择第一个孩子（是吗？），那么你可以写`this.children[0]`or `$( this ).children( ':first' )`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:57:46.993

因为您修改了全局大学对象而不是创建新对象。请注意，当您使用运算符 '=' javascript 复制引用对象而不是对象。如果你喜欢深拷贝对象，你可以使用 jQuery.extend 函数。

尝试这个：

```
var universities = [];
$(".aname").each(function (key, value) {
    var university = {};
    university.href = value.all[0].href;
    university.title = value.all[0].innerHTML;
    university.link = value.parentNode.all[2].all[0];
    universities[key] = university;                
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:54:46.073

我认为您可能需要使用数组的 .push() 函数向其中添加项目：

```
$(document).ready(function () {
    var university = { title: 0, href: 1, link: 2 };
    var universities = [];
    $(".aname").each(function (key, value) {
        university.href = value.all[0].href;
        university.title = value.all[0].innerHTML;
        university.link = value.parentNode.all[2].all[0];
        universities.push(university);                
    });
   debugger; // now if you watch universities this only last item.
}); 
```

# java - Java 将 Runnable 对象插入到 ExecutorService 中

> ID：11766526
> 
> 赞同：5
> 
> 时间：2012-08-01T19:50:52.533
> 
> 标签：java, threadpool

我有一个单线程池 ExecutorService 对象。在将来的某个时候，添加任务以使用 submit() 方法完成。我的理解是 submit 会将提交的 Runnable 添加到要完成的任务列表的末尾。但是，我有一种情况，基于布尔值，我可能希望将可运行文件提交到要执行的任务的前面。我不希望这影响当前的任务，只是下一个完成的任务将是我刚刚给它的那个。下面复制了一个示例方法。我该怎么做呢？

谢谢

```
private ExecutorService singleLoadPool = Executors.newSingleThreadExecutor();
public void submitTask(Runnable run, boolean doNow) {
    if (doNow)
        singleLoadPool.submitFront(run);  // This is the method I'm looking for
    else
        singleLoadPool.submit(run);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:37:19.390

我的偏好是使用`LinkedBlockingDeque`. 它直接支持位置插入/删除 -`putFirst(e)/takeFirst()`并且`putLast(e)/takeLast()`- 这是您的主要要求 - 您不必`Comparator`为您的元素实现 a。这也是有界的 - 这意味着它提供了针对`OutOfMemoryError`.

**编辑针对最新问题：**

首先，让 ExecutorService 像

`ExecutorService executorService = new ThreadPoolExecutor(1, 1, 1, TimeUnit.SECONDS, workQueue);`

其次，重要的问题是：什么是`workQueue`？

是对任何 implementation的`workQueue`薄包装`BlockingQueue`，它将所有方法委托给`LinkedBlockingDeque`它包含的实例，除了`offer()`method ，它由 the 调用`ThreadPoolExecutor`并且需要被覆盖，如下所示：

```
 public boolean offer(E e) {
       if(doNow)
         return linkedBlockingDequeInstance.offerFirst(e);
      else 
         return linkedBlockingDequeInstance.offerLast(e);
   } 
```

当然，当您覆盖任何方法时 - 您需要小心维护线程安全及其一般合同。这绝对需要仔细考虑和严格测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:58:58.717

我认为你最好的方法是用 a[实例化`ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#ThreadPoolExecutor%28int,%20int,%20long,%20java.util.concurrent.TimeUnit,%20java.util.concurrent.BlockingQueue%29)[`PriorityBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)a 。具体来说，使用一个 PriorityBlockingQueue 构造函数，该构造函数接受[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html). 你`Comparator`将是你用来实现你的“优先级”的东西。

```
PriorityBlockingQueue<Runnable> workQueue = new PriorityBlockingQueue<Runnable>(20, yourPriorityComparator);
ExecutorService executorService = new ThreadPoolExecutor(1, 1, 1, TimeUnit.SECONDS, workQueue); 
```

# mysql - mysql 像 textfield 和 varchar 只返回 varchar

> ID：11766529
> 
> 赞同：0
> 
> 时间：2012-08-01T19:51:10.877
> 
> 标签：mysql, text, field, sql-like, varchar

我有两张桌子。一个包含两个文本字段以及其他字段。另一个表包含一个 varchar 字段。我想使用 LIKE %keyword% 搜索这三个字段。当我只搜索文本字段或 varchar 字段时，它可以工作。当我尝试搜索所有三个时，仅搜索 varchar。这是sql

```
SELECT * 
        FROM modx_expertise e
        INNER JOIN modx_expertise_appraiser ea ON e.expertise_id = ea.expertise_id
        INNER JOIN modx_web_user_attributes ua ON ua.internalKey = ea.internalKey
        INNER JOIN modx_web_user_attributes_extended uae ON uae.internalKey = ua.internalkey
        WHERE uae.specialities
         OR uae.bio
         OR e.expertise
         LIKE  '%$keyword%'
         GROUP BY fname, lname"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:53:07.353

```
SELECT * 
        FROM modx_expertise e
        INNER JOIN modx_expertise_appraiser ea ON e.expertise_id = ea.expertise_id
        INNER JOIN modx_web_user_attributes ua ON ua.internalKey = ea.internalKey
        INNER JOIN modx_web_user_attributes_extended uae ON uae.internalKey = ua.internalkey
        WHERE uae.specialities
         LIKE  '%$keyword%'
         OR uae.bio
         LIKE  '%$keyword%'
         OR e.expertise
         LIKE  '%$keyword%'
         GROUP BY fname, lname"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:53:44.587

```
...
WHERE uae.specialities LIKE  '%$keyword%'
OR uae.bio LIKE  '%$keyword%'
OR e.expertise LIKE  '%$keyword%'
... 
```

# ios - 这种地理位置计算的准确性如何？

> ID：11766530
> 
> 赞同：2
> 
> 时间：2012-08-01T19:51:15.227
> 
> 标签：ios, geolocation, coffeescript, titanium, trigonometry

我正在玩 Titanium，并且正在使用这个公式来计算距离

```
 toRad = (x) ->
      x * Math.PI / 180

    toDeg = (x) ->
      x * 180 / Math.PI

    startingLat = hsc.models.startingPosition.latitude
    startingLon = hsc.models.startingPosition.longitude
    currentLat = e.coords.latitude
    currentLon = e.coords.longitude
    R = 6371
    dLat = toRad(currentLat - startingLat)
    dLon = toRad(currentLon - startingLon)
    a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(toRad(startingLat)) * Math.cos(toRad(currentLat)) *
        Math.sin (dLon/2) * Math.sin(dLon/2)
    c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))
    d = R * c;

    hsc.models.positionUpdateCallback (d * 1093.6133) if hsc.models.positionUpdateCallback
    console.log "distance is [#{d}]km" 
```

我正在测试如下。

从 A 点开始。
启用跟踪。
在 B 点结束。
记录值。清除。
启用跟踪。
回到A点。
记录值

在 6 次运行中，我得到了 122 到 135 之间的值。 [这个工具](http://www.freemaptools.com/measure-distance.htm)告诉我距离是 124.9 码。

这可能是 8 号铁杆和 7 号铁杆之间的区别，所以这很重要！

编辑：我想知道我获得初始位置的方式是否有缺陷。

这是我在用户点击开始时开始跟踪的方式。

```
hsc.models.startTracking = (onUpdate) ->
  return if hsc.models.isTracking
  Ti.App.idleTimerDisabled = true;

  Ti.Geolocation.setFrequency 100
  Titanium.Geolocation.setAccuracy = Titanium.Geolocation.ACCURACY_BEST;
  Titanium.Geolocation.setDistanceFilter 0

  hsc.models.positionUpdateCallback = onUpdate
  hsc.models.isTracking = true;
  Ti.Geolocation.addEventListener 'location', hsc.models.locationUpdate 
```

当用户点击结束时，这就是我完成的方式。

```
if hsc.models.isTracking is true
    Ti.App.idleTimerDisabled = false;
    hsc.models.isTracking = false
    hsc.models.startingPosition = null
    Ti.Geolocation.setFrequency 500000
    Titanium.Geolocation.setDistanceFilter 10
    Ti.Geolocation.removeEventListener 'location', hsc.models.locationUpdate 
```

在`locationUpdate`我做

```
if not hsc.models.startingPosition
    hsc.models.startingPosition = e.coords
else
    #do the calculation 
```

所以基本上我只是开始接收更新，当我收到第一个更新时，我设置了初始位置。我想知道是否需要做一个 initial `getCurrentPosition`，然后注册位置回调处理程序。这可能会更好地处理第一次更新有点延迟的情况。

更多信息

所以我实施并尝试了新策略——获取起始位置，然后开始监听变化的事件（在第 1 步发生时不移动），我仍然看到很大的差异。我从 A -> B 跑了 134 码，然后从 B -> A 跑了 117 码。我把它从我家门口跑到托儿所去接孩子，并登记了 2220 码，从我停放的汽车回到我家门口有 2268 码。

更重要的是，坐在同一个地方，它记录了位置的变化，上升了 20 码！

我一定在这里做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:14:01.123

作为一名前工程技术讲师，我可以告诉您，获得准确的 GPS 定位需要比几秒钟更多的时间。在 20 码范围内，对于转弯街道导航来说已经足够准确了，因为该应用程序会捕捉到最近的有效街道位置。

您正在尝试执行所谓的实时运动学 GPS。即使是用于土地测量和农业设备指导的高端（数万美元）gps 单元也需要一个固定的 Master 单元，该单元至少需要 20 分钟才能获得稳定的位置，然后可以用于无线连接中的纠错漫游者单位。在这些条件下，这些单位可以让您在几分之一英寸之内，这是您并不真正需要的。

但是，我可以亲自向您保证，设备在 A 点和 B 点保持静止的时间将是影响您距离准确性的主要因素。

# python - matplotlib - 来自矩形高度阵列的 3d 表面

> ID：11766536
> 
> 赞同：16
> 
> 时间：2012-08-01T19:51:42.017
> 
> 标签：python, matplotlib, 3d, hdf5, geometry-surface

我正在尝试在 matplotlib 中绘制一些 HDF 数据。使用 h5py 导入后，数据以数组的形式存储，如下所示：

```
array([[151, 176, 178],
       [121, 137, 130],
       [120, 125, 126]) 
```

在这种情况下，x 和 y 值只是数组字段的索引，而 z 值是特定字段的值。在 (x,y,z) 形式中，它看起来像：

```
(1,1,151)
(2,1,176)
(3,1,178)
(1,2,121)
... 
```

等等。

有没有一种简单的方法可以从这种数据中绘制曲面图？我知道我可以通过遍历整个数组来将其更改为 (x,y,z) 元组，但也许不需要它？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-02T11:28:08.947

如果你想要一个 3-d 曲面图，你必须创建第`meshgrid`一个。你可以试试：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

X = np.arange(1, 10)
Y = np.arange(1, 10)
X, Y = np.meshgrid(X, Y)
R = np.sqrt(X**2 + Y**2)
Z = np.sin(R)
fig = plt.figure()
ax = fig.gca(projection='3d')
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap='hot', linewidth=0, antialiased=False)
ax.set_zlim(-1.01, 1.01)

fig.colorbar(surf, shrink=0.5, aspect=5)
plt.show() 
```

这将产生， ![在此处输入图像描述](../Images/9797e99963355b69b6c936086afd31af.png)

但是，如果唯一相关信息在 z 值中，您可以简单地使用`imshow`. 在这里，z 值由它们的颜色表示。您可以通过以下方式实现：

```
im = plt.imshow(Z, cmap='hot')
plt.colorbar(im, orientation='horizontal')
plt.show() 
```

这会给，

![在此处输入图像描述](../Images/779a7e792352a944fc1e26825d20c53c.png)

# javascript - 我在 jQuery 中有一个循序渐进的过程，有没有更好的编码方法？

> ID：11766538
> 
> 赞同：2
> 
> 时间：2012-08-01T19:51:47.773
> 
> 标签：javascript, jquery

我有一个循序渐进的过程来指导用户完成设置过程。我想要一页中包含的所有代码（这意味着我有 setup.php，而不是 step1.php、step2.php 和 step3.php）。我在 jQuery 中这样编码：（一次只显示一个步骤）

```
$(document).ready(function() {
    // Hide all sections
    $("article").hide();

    // Show intro
    $("#intro").fadeIn("slow").delay(500).slideDown("slow", function() {
        // Listen for user to click "next" link
        $("#intro .next").click(function() {
            // Hide intro
            $("#intro").fadeOut("fast").delay(500).slideUp("fast", function() {
                // Show EULA section
                $("#eula").fadeIn("slow").delay(500).slideDown("slow", function() {
                    // Listen for user to click "next" link
                    $("#eula .next").click(function() {
                        $("#eula").fadeOut("fast").delay(500).slideUp("fast", function() {
                            // Show site section
                            $("#site").fadeIn("slow").delay(500).slideDown("slow", function() {
                                // Listen for user to click "next" link
                                $("#site .next").click(function() {
                                    $("#site").fadeOut("fast").delay(500).slideUp("fast", function() {
                                        // Show database section
                                        $("#database").fadeIn("slow").delay(500).slideDown("slow", function() {
                                            // Listen for user to click "next" link
                                            $("#database .next").click(function() {
                                                $("#database").fadeOut("fast").delay(500).slideUp("fast", function() {
                                                    // Show email section
                                                    $("#email").fadeIn("slow").delay(500).slideDown("slow", function() {
                                                        $("#email .next").click(function() {
                                                            $("#email").fadeOut("fast").delay(500).slideUp("fast", function() {
                                                                // Submit form to PHP script
                                                                $("#done").fadeIn("slow").delay(500).slideDown("slow", function() {

                                                                });
                                                            });
                                                        });
                                                    });
                                                });
                                            });
                                        });
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
}); 
```

是的，我意识到这非常丑陋，但我不知道另一种方法吗？谁能推荐一个更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:03:46.553

您可以使用命名函数指针代替匿名函数来分解它，它确实有助于缩进。

使用您的示例，这里是前几个步骤：

```
$(document).ready(function() {
    // Hide all sections
    $("article").hide();

    // Show intro
    $("#intro").fadeIn("slow").delay(500).slideDown("slow", Step1);
});

// Listen for user to click "next" link
function Step1() {
    $("#intro .next").click(Step2);
}

// Hide intro
function Step2() {
    $("#intro").fadeOut("fast").delay(500).slideUp("fast", Step3);
}

// Show EULA section
function Step3() {
    $("#eula").fadeIn("slow").delay(500).slideDown("slow", Step4);
}

function Step4() {
    // Continue this pattern until you reach the final step
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:14:27.000

正如您自己注意到的那样，代码重复以下模式：

```
$("#intro").fadeIn("slow").delay(500).slideDown("slow", function() {
    // Listen for user to click "next" link
    $("#intro .next").click(function() {
        // Hide intro
        $("#intro").fadeOut("fast").delay(500).slideUp("fast", function() { ... 
```

只是有不同的元素。因此，您可以轻松地为这件作品构建一个生成器：

```
function getStep(id, callback) {
    return function() {
        var el = $("#"+id);
        el.fadeIn("slow").delay(500).slideDown("slow", function() {
            // Listen for user to click "next" link
            el.find(".next").click(function() {
               // Hide it
               el.fadeOut("fast").delay(500).slideUp("fast", callback);
            });
        });
    };
}

getStep("intro", getStep("eula", getStep("site", getStep("database", getStep("email", function() {
    // Submit form to PHP script
    $("#done").fadeIn("slow").delay(500).slideDown("slow", function() {
        ...
    });
 }))))); 
```

当然，您可以使用循环（甚至递归函数）来构建步骤。如果要更改 的两个参数`getStep`，可以使用[reduce](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
 ["intro", "eula", "site", "database", "email"].reduce(function(cb, id){
     return getStep(id, cb);
   }, function() {
     // Submit form to PHP script
     $("#done").fadeIn("slow").delay(500).slideDown("slow", function() {
        ...
     });
   }); 
```

* * *

显然，在 DOMready 中立即将点击​​侦听器添加到已经存在的（但隐藏的）元素也更容易，而不是仅在fadeIn-callback 中递归执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:02:45.313

我认为您可以保存用户在变量上的步骤，并使您的代码更简单。

```
switch (step) 
{ 
   case '1': $("#intro").fadeOut("fast").delay(500).slideUp("fast");
   case '2': $("#eula").fadeOut("fast").delay(500).slideUp("fast");
   ...
} 
```

# c - 为什么这个 printf() 语句不会在 C 中打印两个字符串变量？

> ID：11766540
> 
> 赞同：4
> 
> 时间：2012-08-01T19:51:56.770
> 
> 标签：c, string, debugging, printf

我在学习 C 时一直在疯狂地研究。我一直在调试 C 程序，我认为我在[这里](https://stackoverflow.com/questions/11747579/why-is-fgets-and-strncmp-not-working-in-this-c-code-for-string-comparison)遇到了一些重大问题。现在我有关键问题。我制作了一个虚拟程序，在一个语句中打印两个字符串，如下所示：

```
 #include<stdio.h>

int main(int argc, char* argv[])
{
    char *herp = "Derp";
    char *derp = "Herp";

    printf("Herp %s Derp %s\n", herp, derp);

    return 0;
} 
```

这按预期打印出来。我明白了

```
Herp Derp Derp Herp 
```

所以，我想，让我通过做类似的事情来调试我自己的程序。我的程序中的以下行

```
printf("word is: %s and jumbled word is: %s\n", word, jumbleWord); 
```

应该打印出类似的东西

```
Word is: word and jumbled word is: dowr 
```

但它会打印出类似的东西

```
and jumbled word is: dowr 
```

*输出的第一部分去哪儿了*？我需要能够在同一行上打印它们以进行调试。此外，像这样的声明不起作用的事实告诉我，正在发生非常奇怪的事情，我因为扯掉头发而秃顶。正如我链接的帖子所表明的那样，我最终想比较这些字符串值，但是如果 printf() 不能正常工作，我怎么能这样做呢？

我在下面发布了整个程序，这样你就可以看到一切发生的地方。我只是在学习如何使用指针。当我想弄乱一个单词时，我最初有两个指针指向同一个内存，但效果不太好！所以我解决了这个问题，得到了两个单独的内存空间，里面有我需要的单词。现在，我只是无法打印它们。鉴于以下代码，这一切都说得通：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

#define MAX_WORD_LENGTH 25

//Define global variables 
int numWords; 

//Preprocessed Functions 
void jumblegame();
void readFile(char *[]);
void jumbleWord(char *);
void guess(char *,char *); 

int main(int argc, char* argv[])
{
    jumblegame();
    return 0;
}

void jumblegame()
{
    //Load File 
        int x = 5050; //Rows
        char *words[x];
        readFile(words);

    //Define score variables 
        int totalScore = 0;
        int currentScore = 0; 

   //Repeatedly pick a random work, randomly jumble it, and let the user guess what it is
         srand((unsigned int)time(NULL));
         int randomNum = rand() % numWords + 1;

         char source[MAX_WORD_LENGTH + 1];
         char jumble[MAX_WORD_LENGTH + 1];

         strncpy(source, words[randomNum], MAX_WORD_LENGTH + 1);
         strncpy(jumble, words[randomNum],MAX_WORD_LENGTH + 1);

         jumbleWord(jumble);

         guess(source, jumble);
         //printf("Random word is: %s\n ", words[randomNum]);
         //randomly jumble it           
}

void readFile(char *array[5049]) 
{
    char line[256]; //This is to to grab each string in the file and put it in a line. 
    int z = 0; //Indice for the array

    FILE *file;
    file = fopen("words.txt","r");

    //Check to make sure file can open 
    if(file == NULL)
    {
        printf("Error: File does not open.");
        exit(1);
    }
    //Otherwise, read file into array  
    else
    {
        while(!feof(file))//The file will loop until end of file
        {
           if((fgets(line,256,file))!= NULL)//If the line isn't empty
           {
             int len = strlen(line); 
             if (len > 0 && line[len - 1] == '\n') line[len - 1] = '\0';
             array[z] = malloc(strlen(line) + 1);
             strcpy(array[z],line);
             z++;
           }    
        }
    }
    fclose(file);
    numWords = z; 
}

void jumbleWord(char *word)
{
    int wordSize = strlen(word) - 1; 
    //durstenfeld Implementation of Fischer-Yates Shuffle
        int i; 
        int j; 
        char temp;
        for(i = wordSize - 1; i > 0; i--)
        {
            j =  rand() % (i + 1);
            temp = word[j];
            word[j] = word[i];
            word[i] = temp;
        }
}

void guess(char *word, char *jumbleWord)
{
     printf("original word is: %s\n", word);
     printf("jumbled word is: %s\n", jumbleWord);
     printf("source is: %s and jumbled word is: %s\n", word, jumbleWord);
} 
```

我认为此时大多数人会烧掉C并为自己吸得如此糟糕而扇耳光。但是，我将继续运输。所以让我为任何愚蠢的行为道歉，但请知道我已经花了很多时间可能真的很愚蠢并盯着这个。我很想说，“*嘿，C 太愚蠢了，因为它不会按照我说的去做*”。不幸的是，我无法相信这一点。我认为它正在做我告诉它做的事情，但我离这个问题太近了，看不出我做错了什么。

一如既往，感谢您的帮助。我最深的敬意，GeekyOmega

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T19:59:56.697

`'\r'`您在单词的末尾有一个回车符。

回车将写入光标移动到屏幕的左侧，因此它正在写入它，但它正在覆盖已经存在的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:02:57.233

你的words文件真的有`5049`条目吗？即使它没有，你也不应该假设它有。您的`readFile`函数应该在读取文件后确定数组中*实际*存在的单词数`words`，否则，将随机索引放入`words`数组将导致访问未初始化的字符串，我怀疑这会导致您的内存损坏。

所以，如果`readFile`只看到*10 个*单词，你应该只在 indices 之间选择一个随机单词`0..9`。您已经在方法中保留了变量`z`中的单词数`readFile`，并与您的其余代码共享。

当您为数组选择随机索引时，请注意，由于数组是从 0 开始的，因此您应该通过有效数组元素的数量获得随机数和 mod。所以使用`int randomNum = rand() % 5049;`没有`+1`.

此外，所有这些`strlen/+1/-1`东西都是不必要的和令人困惑的，更喜欢`strncpy`( `memcpy`and `strcpy`) 字符串，你不需要处理它。请注意， 的结果`strlen` **不**包括空终止符，因此您无需使用`-1`. 我认为您的`jumbleWord`功能应该始终忽略`char`混乱中的最后一个。

使用此策略分配字符串：您有`MAX_WORD_LENGTH`, 在游戏中将字符串声明为`char word[MAX_WORD_LENGTH + 1]`或`char *word = malloc(MAX_WORD_LENGTH + 1)`。现在要复制字符串，请使用`strncpy(src, dest, MAX_WORD_LENGTH)`.

# php - 创建在登录时仅显示一次的页面

> ID：11766543
> 
> 赞同：0
> 
> 时间：2012-08-01T19:51:58.600
> 
> 标签：php, html, login

我正在开发一个网站，当用户/成员第一次登录该网站时，它会显示一个教程页面，就像 Twitter 一样。

如果有人能指出我正确的方向甚至提供代码（如果不是太长的话），我会非常感激。

谢谢

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:56:34.780

如果他们必须登录到您的网站，您可能需要在用户表中添加一个额外的字段，称为“initial_page_viewed”（默认值 = false）。

一旦他们第一次登录并查看此页面，请将此字段更新为 true。仅当该字段设置为 false 时才显示页面。

Cookie 对于普通访问者来说是个好主意，但是如果他们清除 Cookie 并返回页面，他们将获得“教程页面”。

它也值得牢记新的欧盟 cookie 法，（不确定这是否适用于您的网站）。[http://www.ico.gov.uk/for_organisations/privacy_and_electronic_communications/the_guide/cookies.aspx](http://www.ico.gov.uk/for_organisations/privacy_and_electronic_communications/the_guide/cookies.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:54:18.003

使用 PHP 在教程页面上设置 cookie。

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

如果 cookie 已发送，则将用户转发到实际网站，而不是停留在教程页面上。

例如

```
if (isset($_COOKIE["tutorial"]))
header('Location: main.php'); 
```

# asp.net-mvc - 如何从强类型视图模型创建视图？

> ID：11766549
> 
> 赞同：1
> 
> 时间：2012-08-01T19:52:12.517
> 
> 标签：asp.net-mvc

我开始使用 ViewModels 创建自定义视图，这些视图代表 MVC4 中的几个底层 EF 实体。我在我的 MVC 项目中创建了一个名为“ViewModels”的文件夹，并将我的类放在该文件夹中。我想做的是基于强类型 ViewModel 类创建一个*新视图。*但是，在 ASP.NET MVC 中使用**“创建强类型视图”**选项和随后的**“模型类”**下拉选择创建视图时显示的向导*不*包含我的 ViewModel 类。列出的唯一类是我的实体框架模型中的类。

如何根据我创建的 ViewModel 类创建一个视图，或者让它显示在该模型类列表中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:11:05.627

您需要先编译 MVC 项目，然后新的 ViewModel 类才会显示在该下拉列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:55:45.083

Bu 默认情况下，向导将在 Model DropDown 中显示`Class file`除那些 Controller 文件（以 结尾）之外的所有名称 `Controller.cs`

只需创建一个新的普通视图，然后将其添加为视图文件的第一行

```
@model YourViewModelClassName 
```

假设`YourViewModelClassName`是您为 ViewModel 创建的类的名称。

例如：如果您有这样的客户视图模型

```
public class CustomerViewModel
{
  public string Name {set;get;}
} 
```

所以视图应该是这样的

```
@model CustomerViewModel
<p>Your view content can go here</p> 
```

如果您的类 ViewModel 类驻留在一个命名空间中，则需要指定完全限定的类名

```
@model MyNameSpaceName.CustomerViewModel 
```

假设`MyNameSpaceName`是这个类所在的命名空间的名称

# concurrency - VHDL 的新功能，不支持未受影响的波形

> ID：11766550
> 
> 赞同：1
> 
> 时间：2012-08-01T19:52:28.913
> 
> 标签：concurrency, signals, vhdl, xilinx

我正在使用 VHDL，但我的模拟器不支持以下示例代码中未受影响的波形，我需要在开始作业之前运行这些代码。我在网上阅读我可以传递相同的波形 Z，但我不知道该怎么做才能得到与 unaffected 关键字相同的结果......如何重写它以产生相同的结果？

PS：我需要在下一部分作业中使用 if-then-else 语句重写它，我知道在这种情况下我可以使用 next 关键字。这是我需要在作业之前运行的教科书中的代码。

谢谢你的帮助。

```
library IEEE;
use IEEE.std_logic_1164.all;

entity pr_encoder is
port (  S0, S1,S2,S3: in std_logic;
            Z : out std_logic_vector (1 downto 0));
end entity pr_encoder;

architecture behavioral of pr_encoder is
begin
    Z <= "00" after 5 ns when S0 = '1' else
    "01" after 5 ns when S1 = '1' else
    unaffected when S2 = '1' else
    "11" after 5 ns when S3 = '1' else
    "00" after 5 ns;
end architecture behavioral; 
```

**编辑：如果我注释掉该行，我会达到我想要的结果吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:01:44.063

不，如果您只是简单地评论带有`unaffected`行为的行将被更改。

看来您正在描述一个[闩锁](http://en.wikipedia.org/wiki/Latch_%28electronics%29)。（在同步设计中不建议这样做）。如果和 不是 如果确实`Z`会更新。`S2 /= '1'``S2 = '1'`

您确实可以将您的分配包装在一个流程和一个 if-else 结构中，但该`next`语句不是必需的。

```
process (S0, S1, S2, S3) is
begin
    if S0 = '1' then
        Z <= "00" after 5 ns;
    elsif S1 = '1' then
        Z <= "01" after 5 ns;
    elsif S2 = '1' then
        null;                 -- do nothing
    elsif S3 = '1' then
        Z <= "11" after 5 ns;
    else
        Z <= "00" after 5 ns;
    end if;
end process; 
```

或者您可以像现在一样保留*选定的赋值语句*并更改条件以使其成为`unaffected`默认（其他）情况。

```
Z <= "00" after 5 ns when S0 = '1' else
     "01" after 5 ns when S1 = '1' else
     "11" after 5 ns when S2 /= '1' and S3 = '1' else
     "00" after 5 ns when S2 /= '1';
     -- else unaffected is implicit 
```

旁注：

我以前从未听说过该`unaffected`关键字，我认为它的使用非常有限，因此可能并非所有工具都支持它？

你的模拟器是什么？

# svn - 需要升级和重新定位 Subversion repo - catch 22？

> ID：11766552
> 
> 赞同：2
> 
> 时间：2012-08-01T19:52:31.207
> 
> 标签：svn, version-control

今天我遇到了一个有趣的 Catch 22，试图恢复旧的 Subversion 存储库和工作副本。

我最初移动并升级了存储库，然后升级了工作副本并将其指向新移动的存储库。

```
$ svn upgrade
svn: E180001: Unable to connect to a repository at URL 'file:///OLD/REPO/PATH'
svn: E180001: Unable to open an ra_local session to URL
svn: E180001: Unable to open repository 'file:///OLD/REPO/PATH' 
```

因此，升级失败是因为 repo 指向了错误的位置。没问题，我会将工作副本重新指向新的 repo 路径：

```
$ svn switch --relocate file:///OLD/REPO/PATH file:///NEW/REPO/PATH .
svn: E155036: Please see the 'svn upgrade' command
svn: E155036: Working copy '/WORKING/COPY/PATH' is too old (format 10, created by Subversion 1.6) 
```

这是一个完美的第 22 条军规——因为 repo 路径错误而无法升级，因为您尚未升级，所以无法修复 repo 路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:44:12.930

我的工作副本建议我应该进行“svn 升级”。执行此操作后，我无法使用 URL“file:///...”连接到我的本地存储库。除了我在以下几行中注释掉的那个之外，所有替代方案都不起作用。

我通过执行以下步骤解决了这个问题：

1.  从同一个存储库“file:///...”创建一个新的工作副本：“svn checkout file:///...new-wc”。
2.  从我的旧工作副本应用当前更改（使用“rsync -a old-wc/new-wc/”）。
3.  提交对存储库的新更改。
4.  删除所有工作副本（“rm -rf old-wc”）。
5.  替换“工作”;-) 工作副本：“mv new-wc old-wc”。

这对我有用。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:52:31.207

我正在发布我想出的答案，以防它帮助某人。虽然这并不理想，所以我很想看看其他人是否有更好的解决方案。

我 grep 了工作副本中的文件以查看 /OLD/REPO/PATH 提到的位置；唯一的地方是在每个文件夹的“.svn/entries”文件中。

所以，我想我会制作自己的“svn switch --relocate”，只需运行一个快速的 bash 脚本来替换每个条目文件中的路径：

```
#!/bin/bash
for f in `sudo find . -name "entries"`
do
   sudo perl -pi -e 's/OLD\/REPO\/PATH/NEW\/REPO\/PATH/g' "$f"
done 
```

任何人都知道解决此问题的更简单方法，或者手动更改“条目”文件中的 repo 路径有什么缺点吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:56:10.070

一种解决方案是降级 subversion 客户端，或者将旧的二进制文件安装在不同的目录中，并临时将该位置添加到您的路径中。这将允许您首先重新定位存储库，然后您可以切换到新客户端并升级它。

# asp.net-mvc - MVC Html.Partial 或 Html.Action

> ID：11766554
> 
> 赞同：63
> 
> 时间：2012-08-01T19:52:39.267
> 
> 标签：asp.net-mvc, asp.net-mvc-partialview

我是 asp.net MVC 的新手，所以请多多包涵。我需要构建一个在多个视图中重复的菜单。什么会更好地服务于目的[`Html.Action`](http://msdn.microsoft.com/en-us/library/ee703423.aspx)或[`Html.Partial`](http://msdn.microsoft.com/en-us/library/ee402898.aspx)。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-08-01T20:47:48.320

以下是我认为使用 Html.Action 或 Html.Partial 的指南

**Html.Partial**

1.  `Html.Partial`在渲染静态内容时使用，或者，
2.  如果您要从发送到主视图的 ViewModel 传递数据

**Html.Action**

1.  `Html.Action`当您实际需要从服务器检索其他数据以填充部分视图时使用

基本上，如果是静态的，请使用`Html.Partial()`. 如果是动态的、模型独立的数据，请使用`Html.Action()`. 可能有更多的场景，但这会让你很好地了解去哪里/如何去。 `Html.RenderPartial()`并且`Html.RenderAction()`对于上面类似命名的函数是可互换的。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-08-01T21:26:56.567

**Html.Partial：**在不先点击控制器操作的情况下渲染**部分视图。**请参阅：[部分视图](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)

**Html.Action**调用一个**控制器 Action**，它**可能会返回一个视图/部分视图**（或者可能不会，它可能会抛出一个 HttpNotFound 或返回 Json 或其他东西）。

您的菜单是否需要视图模型，还是静态的？

如果它是静态菜单，`Html.Partial`将满足您的需求。将静态菜单内容放在局部视图中并调用`Html.Partial`您希望它呈现的位置。

如果菜单是从视图模型生成的，您可以使用*或* ：`Html.Partial``Html.Action`

**使用 Html.Partial 链接视图模型**：

```
public class MenuViewModel {
    // menu data goes here
}

public class GeneralViewModel : MenuViewModel {
    // general view info goes here
}

public ActionResult Index() {
    return View(new GeneralViewModel());
}

// View Code
@model GeneralViewModel
<div>@Html.Partial("_partialName", model)</div> 
```

在这里，我们将完整的视图模型传递给视图，视图调用 Partial 并将其模型交给局部视图。

** 使用 Html.Action 分离模型：**

```
public ActionResult Index() {
    return View(new GeneralViewModel());
}

public ActionResult MenuView() {
    return PartialView(new MenuViewModel());
}

// View Code
@model GeneralViewModel
<div>@Html.Action("MenuView")</div> 
```

这里视图调用控制器操作**MenuView**，它创建一个新的视图模型并将其传递给局部视图。

# java - Java 检查异常不在函数的抛出规范中？

> ID：11766557
> 
> 赞同：10
> 
> 时间：2012-08-01T19:52:46.963
> 
> 标签：java, exception, java-native-interface, throws

通常，Java 编译器确认所有抛出的检查异常都在 throw 规范中。当本机函数抛出不在函数抛出规范列表中的 java 检查异常时，是否会发生任何特殊情况，或者抛出规范列表是否在运行时被简单地忽略？

C++

```
void function(JNIEnv * env, jclass jc) {
    jclass newExcCls = env->FindClass("java/lang/NullPointerException");
    env->ThrowNew(newExcCls, "ERROR");
} 
```

爪哇

```
public class Tester {
    static {
        System.loadLibrary( "MyLibrary" );
    }        
    private static native void function();
    public static void main(String [ ] args) {
        try {
            function();
        } catch( Exception e ) { //is it caught? Or what happens?
            e.printStackTrace();
        }        
    }
} 
```

（C++ 函数名称可能会被破坏。loadLibrary 也应该在 try catch 中。不要在意，我不相信它与问题有关。代码中可能还有其他错误，但它们可能不相关任何一个。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:57:29.973

您甚至不必求助于本机代码来欺骗检查异常机制。请参阅[Thread.stop(Throwable) 上的 Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#stop%28java.lang.Throwable%29)。我曾经一整天都在想我`InterruptedException`的代码是如何在没有声明它的代码中间抛出一个。那时我什至没有找到答案，但现在我知道了:)

回答您的直接问题：是的，检查的异常逻辑是仅编译器的功能，在运行时被忽略。

# c# - C#/NHibernate 有注解吗？

> ID：11766563
> 
> 赞同：4
> 
> 时间：2012-08-01T19:53:01.457
> 
> 标签：c#, nhibernate

在 java JPA 中，如果我们需要创建到数据库的实体映射，我们只需使用注解，`@entity`它几乎是无代码的。在 C#/NHibernate 中，我们有类似的吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T20:01:57.777

有[NHibernate 映射属性](http://sourceforge.net/projects/nhcontrib/files/NHibernate.Mapping.Attributes/)，但我认为没有人真正使用它。目前我们有很多选项可以做 NHibernate 映射。除了标准的 .hbm.xml 映射之外，还有[FluentNHibernate](http://www.fluentnhibernate.org/)以及从 NHibernate 3.2 开始[的代码映射](http://fabiomaulo.blogspot.com/2011/04/nhibernate-32-mapping-by-code.html)。

如果您不想使用 .hbm.xml 映射，我建议使用 FluentNHibernate 或代码映射。FluentNHibernate 比较老，有一个可靠的[wiki](https://github.com/jagregory/fluent-nhibernate/wiki/)文档，通常更容易在网上找到示例。

通过代码映射是较新的，它带有 NHibernate（没有额外的程序集）。您可以开始在[此处查找文档](https://stackoverflow.com/questions/5777898/docs-examples-for-nhibernate-3-2-mapping-by-code)。

NHibernate 和按代码映射都有使用约定的自动映射的概念。他们将扫描您的程序集以搜索实体并使用默认或自定义约定映射它们。

# delphi - 在 Delphi 中使用 jpeg

> ID：11766564
> 
> 赞同：-1
> 
> 时间：2012-08-01T19:53:00.783
> 
> 标签：delphi, delphi-7

如何在此处使用此功能：[创建图像和彩色红外？](https://stackoverflow.com/questions/11728198/create-an-image-and-colored-ir)对于JPEG？

因为Bmp格式的尺寸很大。我想用小尺寸的图片来学习。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T19:59:40.287

```
procedure TForm1.GenerateImageWithRandomColors;
var
  I, J: Integer;
  ColorHEX: string;
  Bitmap: TBitmap;
  JpegImg: TJpegImage;
begin
  Randomize;

  Bitmap := TBitmap.Create;
  try        
    Bitmap.Width := 100;
    Bitmap.Height := 100;
    Bitmap.PixelFormat := pf24bit;

    for I := 0 to Pred(Bitmap.Width) do
    begin
      for J := 0 to Pred(Bitmap.Height) do
      begin
        Bitmap.Canvas.Pixels[I, J] := RGB(Random(256),
           Random(256),
           Random(256));

        // get the HEX value of color and do something with it
        ColorHEX := ColorToHex(Bitmap.Canvas.Pixels[I, J]);
      end;
    end;

    JpegImg := TJpegImage.Create;
    try
      JpegImg.Assign(Bitmap);
      JpegImg.SaveToFile('test.jpg');
    finally
      JpegImg.Free;
    end;

  finally
    Bitmap.Free;
  end;
end;

function TForm1.ColorToHex(Color : TColor): string;
begin
  Result :=
    IntToHex(GetRValue(Color), 2) +
    IntToHex(GetGValue(Color), 2) +
    IntToHex(GetBValue(Color), 2);
end; 
```

# sql-server-2008 - SQL Server Management Studio 的问题

> ID：11766567
> 
> 赞同：0
> 
> 时间：2012-08-01T19:53:10.940
> 
> 标签：sql-server-2008, sql-server-2008r2-express

我已经在我的机器上安装了 SQL Server 2008 R2。
看起来我的 SSMS（SQL Server Management Studio）有问题。

对于每次登录，它都会以不同的方式显示凭据信息。请注意同一 SSMS 上不同选项卡的以下屏幕截图上的工具提示。用户帐户信息始终如一。

对于每个 Windows 身份验证登录工具提示都以以下用户帐户结尾 (fs\c005057(105,128,114,51 等.....)) 示例：
如果以下屏幕截图不清楚，则工具提示显示如下。

```
TAB1(ToolTip) --c:\SQLSErver\CreateSP1\(fs\c005057(105))
TAB2(ToolTip) --c:\SQLSErver\ExeucuteScriptOfSP1\(fs\c005057(128))
TAB3(ToolTip) --c:\SQLSErver\CreateSP2\(fs\c005057(114))
TAB4(ToolTip) --c:\SQLSErver\ExeucuteScriptOfSP1\(fs\c005057(51)) 
```

问题，我现在遇到的是，如果我在 Tab1 中编译 Storedprocedure，并且如果我通过在同一 SSMS 中的 Tab2 中提供参数来执行 SP，结果完全出乎意料。怀疑是这个问题。我之前的 SSMS 没有看到这种凭证信息，所以很怀疑。

![在此处输入图像描述](../Images/c2acf4f12faf06e4464e403fbc94e1ce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:54:51.393

这些是 session_id 值。在任何查询窗口中运行以下命令：

```
SELECT @@SPID; 
```

它们将匹配工具提示。我保证，您的意外结果是由不同的问题引起的。

# java - 用 MVC 布局实现游戏状态？

> ID：11766572
> 
> 赞同：1
> 
> 时间：2012-08-01T19:53:18.003
> 
> 标签：java, model-view-controller, libgdx, states

您好我正在创建一个基本游戏并尝试用我的代码实现 MVC 模式。我目前有： **模型** 游戏对象、云、船水等。

**world** 这将所有模型联系在一起并定义对象

**WorldRenderer** 这会将所有纹理应用于对象

**GameScreen** 处理用户输入、触摸或键盘。

我的问题是我将如何以及在哪里实施游戏状态？我假设它会进入 GameScreen，但我已经实现了状态的基本布局，READY，RUNNING，PAUSED，NEXT_LVL，GAME_OVER，

但是我发现当状态就绪时游戏正在后台运行？

这是在 WorldRenderer 中定义的，即水 lvl 在后台的屏幕上上升，但我希望这仅在游戏状态切换到运行时发生。

当 Gamstate 切换到 RUNNING STATE 时，我如何让 Gamestate 仅初始化 WorldRenderer。我已将该语句应用`renderer.render();`到 RUNNING 语句中，但它仍以 READY 状态运行。

对此的任何帮助将不胜感激。

干杯

丹尼尔。

我正在附加 WorldRenderer、World 和 GameScreen 类

```
GameScreen Class

    import com.badlogic.gdx.Gdx;

    import com.badlogic.gdx.Input.Keys;

    import com.badlogic.gdx.Screen;
    import com.badlogic.gdx.graphics.GL10;
    import com.badlogic.gdx.graphics.OrthographicCamera;
    import com.badlogic.gdx.graphics.Texture;
    import com.badlogic.gdx.graphics.Texture.TextureFilter;
    import com.badlogic.gdx.graphics.g2d.SpriteBatch;
    import com.badlogic.gdx.graphics.g2d.TextureRegion;

    import com.badlogic.gdx.math.Rectangle;
    import com.badlogic.gdx.math.Vector3;

    public class GameScreen implements Screen {

    enum State{
        READY,RUNNING,PAUSED,LEVEL_END,GAME_OVER
    }

    MainThing game;

    OrthographicCamera cam;
    SpriteBatch batch;

    Texture pauseMenu;
    TextureRegion pauseMenuR;

    Texture pauseBtn;

    Texture ready;
    TextureRegion readyR;

    private World world;
    private WorldRenderer renderer;

    public static State state = State.READY;

    public GameScreen(MainThing game){

        this.game = game;
        cam = new OrthographicCamera(800,480);
        cam.position.set(800/2, 480/2, 0);
        batch = new SpriteBatch();
        state = State.READY;

        loadingTexture();

    }

    private void loadingTexture() {

        pauseBtn = Assets.manager.get("pause.png", Texture.class);

        pauseMenu = Assets.manager.get("resume-quit.png", Texture.class);
        pauseMenu.setFilter(TextureFilter.Linear, TextureFilter.Linear);
        pauseMenuR = new TextureRegion(pauseMenu,0,0,375,256);

        ready = Assets.manager.get("ready.png",Texture.class);
        readyR = new TextureRegion(ready,0,0,256,105);
    }

    public static void setState(State newState){
        state = newState;
    }

    private void update(float delta) {

        switch (state) {
        case READY:
            updateReady();
            break;
        case RUNNING:
            updateRunning(delta);
            break;
        case PAUSED:
            updatePaused();
            break;
        case LEVEL_END:
            updateLevelEnd();
            break;
        case GAME_OVER:
            updateGameOver();
            break;
        }

    }

    private void updateReady() {
        if (Gdx.input.justTouched()) {
            state = State.RUNNING;
        }

    }

    private void updateRunning(float delta) {

        if(Gdx.input.isTouched()) {
             Vector3 touchPos = new Vector3();
             touchPos.set(Gdx.input.getX(), Gdx.input.getY(), 0);
             WorldRenderer.cam.unproject(touchPos);
             Boat.position.x = touchPos.x - 1f / 2;
          }

        if(Gdx.input.isKeyPressed(Keys.LEFT)) {

        Boat.velocity.x = -Boat.SPEED * delta;
        }

        else if(Gdx.input.isKeyPressed(Keys.RIGHT)) {

            Boat.velocity.x = Boat.SPEED * delta;
          }
        else if(!Gdx.input.isKeyPressed(Keys.LEFT) && !(Gdx.input.isKeyPressed(Keys.RIGHT)) || (Gdx.input.isKeyPressed(Keys.LEFT) && (Gdx.input.isKeyPressed(Keys.RIGHT)))) {

            Boat.velocity.x = 0;
            }

          Boat.update(delta);

          if(Boat.position.x < 0) Boat.position.x = 0;
          if(Boat.position.x > WorldRenderer.cam.viewportWidth - 1f) Boat.position.x = WorldRenderer.cam.viewportWidth - 1f;

    }

    private void updatePaused() {
        // TODO Auto-generated method stub

    }

    private void updateLevelEnd() {
        // TODO Auto-generated method stub

    }

    private void updateGameOver() {
        // TODO Auto-generated method stub

    }

    private void draw(float deltaTime) {

        Gdx.gl.glClearColor(1, 1, 1, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        renderer.render(deltaTime);
        cam.update();
        batch.setProjectionMatrix(cam.combined);
        batch.begin();

        switch (state) {
        case READY:
            presentReady();
            break;
        case RUNNING:
            presentRunning(deltaTime);
            break;
        case PAUSED:
            presentPaused();
            break;
        case LEVEL_END:
            presentLevelEnd();
            break;
        case GAME_OVER:
            presentGameOver();
            break;
        }
        batch.end();
    }

    private void presentReady() {
        batch.draw(readyR, cam.viewportWidth /2 - 375 /2    , cam.viewportHeight /2 - 256 /2,375,256);

    }

    private void presentRunning(float delta) {
        // TODO Auto-generated method stub

    }

    private void presentPaused() {
        // TODO Auto-generated method stub

    }

    private void presentLevelEnd() {
        // TODO Auto-generated method stub

    }

    private void presentGameOver() {
        // TODO Auto-generated method stub

    }

    @Override
    public void render(float delta) {

        update(delta);
        draw(delta);

    }

    @Override
    public void resize(int width, int height) {
        renderer.setSize(width,height);

    }

    @Override
    public void show() {
        world = new World();
        renderer = new WorldRenderer(world, false);

    }

    @Override
    public void hide() {

    }

    @Override
    public void pause() {
        dispose();

    }

    @Override
    public void resume() {

    }

    @Override
    public void dispose() {
        Assets.unload();

        Boat.dispose();
        Cloud.dispose();
        WorldRenderer.dispose();

    }

} 
```

世界级

```
 package com.inspirednotion.thing;

import com.badlogic.gdx.math.MathUtils;

import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.utils.Array;
import com.badlogic.gdx.utils.TimeUtils;

public class World {

Boat boat;
Water water;
Cloud cloud;
long lastDropTime;
Array<Rain> raindrops = new Array<Rain>();

public Array<Rain> getRain(){
     return raindrops;

}

 Boat getBoat(){
    return boat;
}
public Water getWater(){
    return water;
}

public Cloud getCloud(){
    return cloud;
}

public World(){

    createWorld();
    spawnRaindrop();
    lastDropTime = TimeUtils.nanoTime();
}

private void createWorld() {
    boat = new Boat(new Vector2(WorldRenderer.CAMERA_WIDTH / 2 - Boat.BOAT_WIDTH / 2, Water.position.y +11.3f ));
    cloud = new Cloud(new Vector2(WorldRenderer.CAMERA_WIDTH / 2 - Cloud.CLOUD_WIDTH /2, 8));
    water = new Water(new Vector2(WorldRenderer.CAMERA_WIDTH /2 - Water.WATER_WIDTH/2, -11.3f));

}
void spawnRaindrop(){
raindrops.add( new Rain(new Vector2(MathUtils.random(cloud.position.x, cloud.position.x + Cloud.CLOUD_WIDTH ),cloud.position.y)));
lastDropTime = TimeUtils.nanoTime();
}

public static void dispose() {

}
} 
```

WorldRenderer 类

```
public class WorldRenderer {

    private static World world;
    public static OrthographicCamera cam;

    ShapeRenderer debugRenderer = new ShapeRenderer();

     static final float CAMERA_WIDTH = 20f;
    static final float CAMERA_HEIGHT = 12f;

    static Texture cloudTexture;
    private TextureRegion cR;
    static Texture boatAniTex;
    TextureRegion[]                 boatFrames;
    Animation                       boatAnimation;
    TextureRegion                   boatCurrentFrame;
    static TextureRegion                   currentFrameBoat;
    TextureRegion[][]               tmpBoat;

    static Texture cloudBg;
    private TextureRegion cloudBgR;

    static Texture rainDrop;
    long lastDropTime;
    float lastDropT;

    private static Texture water;
    TextureRegion[]                 waveFrames;
    Animation                       waveAnimation;
    TextureRegion                   currentFrame;
    TextureRegion                   currentFrameWav;
    TextureRegion[][]               tmp;

    float stateTime = 0f; 

    private static SpriteBatch batch;

    static int width;
     static int height;

    public void setSize(int w, int h){
        WorldRenderer.width= w;
        WorldRenderer.height = h;
    }

    public WorldRenderer(World world, boolean debug){

        WorldRenderer.world = world;
        WorldRenderer.cam = new OrthographicCamera(CAMERA_WIDTH ,CAMERA_HEIGHT);
        WorldRenderer.cam.position.set(CAMERA_WIDTH /2f, CAMERA_HEIGHT /2f, 0);
        WorldRenderer.cam.update();
        batch = new SpriteBatch();
        loadTextures();
        loadAnimations();

    }

    public void loadTextures(){
        boatAniTex = Assets.manager.get("bin.png", Texture.class);
        boatAniTex.setFilter(TextureFilter.Linear, TextureFilter.Linear);
        cloudTexture = Assets.manager.get("cloud.png", Texture.class);
        cloudTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);
        cR = new TextureRegion(cloudTexture,0,0,256,140);
        cloudBg = Assets.manager.get("cloudbg.png", Texture.class);
        cloudBg.setFilter(TextureFilter.Linear, TextureFilter.Linear);
        cloudBgR = new TextureRegion(cloudBg,0,0,800,480);
        water = Assets.manager.get("wavey.png", Texture.class);
        water.setFilter(TextureFilter.Linear, TextureFilter.Linear);
        rainDrop = new Texture(Gdx.files.internal("RainDrop_sml.png"));
    }

    private void loadAnimations() {

        water.setFilter(TextureFilter.Linear, TextureFilter.Linear);

        tmp = new TextureRegion(water).split(800,480);                                
        waveFrames = new TextureRegion[14];
        for (int x = 0, index = 0; x < 7; x++) {
            for (int y = 0; y < 2; y++, index++) {
               waveFrames[index] = tmp[x][y];
            }
         }

        waveAnimation = new Animation(0.14f, waveFrames); 

        //************************

boatAniTex.setFilter(TextureFilter.Linear, TextureFilter.Linear);

        tmpBoat = new TextureRegion(boatAniTex).split(64,64);                                
        boatFrames = new TextureRegion[7];
        for (int x = 0, indexed = 0; x < 1; x++) {
            for (int y = 0; y < 7; y++, indexed++) {
               boatFrames[indexed] = tmpBoat[x][y];
            }
         }

        boatAnimation = new Animation(0.2f, boatFrames); 

    }

    public void render(float delta){
        Gdx.gl.glClearColor(0, 0, 0, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        batch.setProjectionMatrix(cam.combined);
        stateTime += Gdx.graphics.getDeltaTime();  
        currentFrameWav = waveAnimation.getKeyFrame(stateTime += delta, true);
        currentFrameBoat = boatAnimation.getKeyFrame(stateTime += delta, true);
        batch.begin();

        batch.disableBlending();
        drawBackGround();
        batch.enableBlending();
        drawBoat();

        drawWater(delta);
        drawCloud();

        batch.end();
        drawRain();
    }

    private void drawRain() {
        batch.begin();
        for(  Rain bounds: world.raindrops) {
             batch.draw(rainDrop, bounds.position.x ,  bounds.position.y,.2f,.2f);

        }
        batch.end();
        if(TimeUtils.nanoTime() - world.lastDropTime >  500000000) world.spawnRaindrop();

        Iterator<Rain> iter = world.raindrops.iterator();
          while(iter.hasNext()) {
             Rain raindrop = iter.next();
             raindrop.position.y -=2f * Gdx.graphics.getDeltaTime();
            if(raindrop.position.y < Water.position.y  ) {
                System.out.println("water is hit");
                iter.remove();
            }
          }
    }

    private void drawWater(float delta) {
        batch.draw(currentFrameWav, Water.position.x , Water.position.y ,Water.WATER_WIDTH , Water.WATER_HEIGHT );
        if (Water.position.y < -4f){
            Water.position.y += .1 * Gdx.graphics.getDeltaTime();
            Boat.position.y += .1 * Gdx.graphics.getDeltaTime();
        }
    }

    private void drawBackGround() {

        batch.draw(cloudBgR, 0,0,CAMERA_WIDTH,CAMERA_HEIGHT);

    }

    private void drawCloud(){
        Cloud cloud = world.getCloud();
         batch.draw(cR,cloud.position.x ,cloud.position.y ,Cloud.CLOUD_WIDTH , Cloud.CLOUD_HEIGHT );
    }

    private void drawBoat(){
        world.getBoat();
         batch.draw(currentFrameBoat, Boat.position.x , Water.position.y +11.3f,Boat.BOAT_WIDTH , Boat.BOAT_HEIGHT );
    }

    private void drawDebug(){
        debugRenderer.setProjectionMatrix(cam.combined);
        debugRenderer.begin(ShapeType.Rectangle);

        Cloud cloud = world.getCloud();
        Rectangle rect =  cloud.bounds;
        float x1 = cloud.position.x + rect.x;
        float y1 = cloud.position.y + rect.y;
        debugRenderer.setColor(new Color(1,0,0,1));
        debugRenderer.rect(x1, y1, rect.width, rect.height);

        Boat boat = world.getBoat();
        Rectangle rec =  boat.bounds;
        float xx1 = Boat.position.x + rec.x;
        float yx1 = Boat.position.y + rec.y;
        debugRenderer.setColor(new Color(1,1,0,1));
        debugRenderer.rect(xx1, yx1, rec.width, rec.height);

        debugRenderer.end();
    }

public static   void dispose(){
    cloudTexture.dispose();
    water.dispose();
    boatAniTex.dispose();
    rainDrop.dispose();
    cloudBg.dispose();
    batch.dispose();

}
} 
```

请原谅凌乱的代码..在清理和调试问题的过程中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T11:16:25.250

前面的底线：您`GameScreen`处于`READY`状态，但您`WorldRenderer`不知道这一点并继续其快乐的方式。您需要确保您`WorldRenderer`的状态映射到`GameScreen`状态。

你的电话`renderer.render(deltaTime)`是`GameScreen.draw()`罪魁祸首。它一直在更新事物的位置，无论`GameScreen`.

假设想要的效果是让游戏在后台绘制，但游戏没有开始 -

1.  将状态枚举添加到`WorldRenderer`至少`WAITING`和`PLAYING`，并带有此枚举类型的字段。`WorldRenderer`确保创建了一个允许`GameScreen`设置此值的公共方法。
2.  创建时，请确保调用并将状态设置`GameScreen`为.`WorldRenderer``WorldRenderer``WAITING`
3.  当`GameScreen`转换到播放状态时，调用并将`WorldRenderer`状态设置为`PLAYING`.
4.  在中，仔细定义在一个状态、一个状态以及两者`WorldRenderer`中需要做什么。在这种情况下，您不希望水位上升，因此如果您处于状态，请不要更改水位和船的高度。`WAITING``PLAYING``WAITING`

# mod-rewrite - mod-rewrite php to html url未编入索引

> ID：11766577
> 
> 赞同：0
> 
> 时间：2012-08-01T19:53:30.363
> 
> 标签：mod-rewrite, url-rewriting, seo

我目前在我的 .htaccess 文件中使用 Rewriterule 将我网站上的每个 .php 页面更改为 .html。我也用它来改变搜索结果页面

```
www.example.com/search_page.php?city=name&state=name&id=1234 
```

类似于

```
www.example.com/result-google-friendly-url-1234.html 
```

一切正常，但是当我进行更改时，谷歌现在只索引我的索引页面。我认为这可能与我有 2 个指向同一页面的网址有关，而 google 决定不对任何一个进行索引。谷歌网站管理员说有 16 个页面“未选择”，然后说这可能归因于“规范化”，我不完全理解。

这些东西非常令人困惑，我有两件事要做：将每个页面扩展名从 php 更改为 html，然后将搜索结果页面从丑陋的 php 代码更改为干净的 html。我是否需要执行 301 重定向之类的其他操作来告诉 Google 发生了什么？这是我的 htaccess 文件：

```
Options -MultiViews +FollowSymLinks
RewriteEngine On    
RewriteRule ^([.a-zA-Z\-]+)([0-9]+)\.html$ search_page.php?id=$2
RewriteRule ^(?![^/]+/)(.+)\.html$ $1.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:33:40.430

从来没有找到让谷歌自己索引我的网站的解决方案。然而，我确实编写了一个 php 脚本，打印出我网站上的所有 7,000 个动态页面，并将其作为站点地图提交到谷歌网站管理员工具上，并且有效。所以我想站点地图是真正的解决方案。

# java - 从网页获取登录帖子请求

> ID：11766584
> 
> 赞同：1
> 
> 时间：2012-08-01T19:53:38.943
> 
> 标签：java, html, login

我想以编程方式（使用java）登录到一个站点。

（已有用户名和密码）

以这个网站为例： http://mediaforest-argentina.com/Membership/login.aspx?ReturnUrl= [%2fGuests%2fRealtimeCharts.aspx](http://mediaforest-argentina.com/Membership/login.aspx?ReturnUrl=%2fGuests%2fRealtimeCharts.aspx)

代码如下：

```
...
HttpPost httpost = new HttpPost("The url that I need");
List <NameValuePair> nvps = new ArrayList <NameValuePair>();
nvps.add(new BasicNameValuePair("IDToken1", "username"));
nvps.add(new BasicNameValuePair("IDToken2", "password"));
httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));
... 
```

我需要发布请求的网址。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:56:49.547

您需要检查网站的源代码，特别是登录表单并查看它发送的数据。看着`<form action="url_here" ...>`

在您的示例站点中，此 URL 为[http://mediaforest-argentina.com/Membership/login.aspx?ReturnUrl=%2fGuests%2fRealtimeCharts.aspx](http://mediaforest-argentina.com/Membership/login.aspx?ReturnUrl=%2fGuests%2fRealtimeCharts.aspx)但请注意，在很多情况下，此示例也不例外，存在隐藏表单包含您需要随请求一起发送的数据的元素。快速浏览会发现很多隐藏的表单元素：

```
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="">
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTEyOTA2MDE5Ng9kFgJmD2QWAgIBD2QWAgIBD2QWAgIED2QWAgIBD2QWAmYPZBYCAg8PEA8WAh4HQ2hlY2tlZGhkZGRkGAEFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYCBStjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJExvZ2luMSRSZW1lbWJlck1lBTJjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJExvZ2luMSRBZ3JlZVRlcm1zT2ZVc2FnZQ==">
<input type="hidden" name="__PREVIOUSPAGE" id="__PREVIOUSPAGE" value="HJPLOnv9G-WzfNEMvvC92zihg9ivnWKp_vC_6zv73e3_sOtSB4IhbCtPk3C75el4TZvgalSI2OHCaVGPxWZzWwUGXqo1">
<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWCQKP7Ne4AgK/1YTzDQLu8I/0DgKh+7V7Ao+F8Z4OAsz3upgFAueno7sBAs/QlOcIAozNmZwP"> 
```

可能还有更多，但我并没有真正寻找太久。另请注意，在发布表单之前，javascript 可能会对值进行一些调整。出于这个原因，我建议您使用浏览器中的开发工具（Firefox的[Firebug 、Chrome 的](http://getfirebug.com/)[Chrome 开发工具](https://developers.google.com/chrome-developer-tools/docs/overview)等）捕获完整的请求，并以此为基础创建登录脚本。

我知道这听起来很复杂，但原因是，除非网站所有者提供公共 API，否则他-她可能不希望您以这种方式登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:03:39.183

使用诸如 firebug 或 chrome 开发工具之类的工具，您将能够看到尝试登录时发送的请求。这实际上是您刚刚发布的 URL： http://mediaforest-argentina.com/Membership/login.aspx?ReturnUrl= [%2fGuests%2fRealtimeCharts.aspx](http://mediaforest-argentina.com/Membership/login.aspx?ReturnUrl=%2fGuests%2fRealtimeCharts.aspx)

# android - 不幸的是，计算器已停止。

> ID：11766588
> 
> 赞同：-4
> 
> 时间：2012-08-01T19:53:54.353
> 
> 标签：android

我在 Eclipse 中没有收到任何错误。（这只是一个部分应用程序，我只为第一个“添加”按钮功能编码。）请在这里帮忙，因为我的应用程序在输入值并单击添加按钮后崩溃。这是我的代码：-

```
package ajay.calculator;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   EditText box1 = (EditText)findViewById(R.id.box_1);
   EditText box2 = (EditText)findViewById(R.id.box_2);

}

public void addNumbers(EditText box1,EditText box2){

 double a,b; 

 String str,str2 = new String();     
 str = box1.getText().toString();
 str2 = box2.getText().toString();
 a = Double.parseDouble(str);
 b = Double.parseDouble(str2);

 Log.d(box1.getText().toString(),"TAG");
 Intent intent1 = new Intent(this,Result.class);
 intent1.putExtra("first_number", a);
 intent1.putExtra("second number", b);
 startActivity(intent1);

}

public void multiplyNumbers(EditText box1,EditText box2){

 double a,b; 

 String str,str2 = new String();     
 str = box1.getText().toString();
 str2 = box2.getText().toString();
 a = Double.parseDouble(str);
 b = Double.parseDouble(str2);
 Intent intent1 = new Intent(this,Result.class);
 intent1.putExtra("first_number", a);
 intent1.putExtra("second number", b);
 startActivity(intent1);

}

public void subtractNumbers(EditText box1,EditText box2){

 double a,b; 

 String str,str2 = new String();     
 str = box1.getText().toString();
 str2 = box2.getText().toString();
 a = Double.parseDouble(str);
 b = Double.parseDouble(str2);
 Intent intent1 = new Intent(this,Result.class);
 intent1.putExtra("first_number", a);
 intent1.putExtra("second number", b);
 startActivity(intent1);
}

public void divideNumbers(EditText box1,EditText box2){

 double a,b; 

 String str,str2 = new String();     
 str = box1.getText().toString();
 str2 = box2.getText().toString();
 a = Double.parseDouble(str);
 b = Double.parseDouble(str2);
 Intent intent1 = new Intent(this,Result.class);
 intent1.putExtra("first_number", a);
 intent1.putExtra("second number", b);
 startActivity(intent1);
}

}

and the second activity is as follows:-

package ajay.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class Result extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent1 = getIntent();
    double x = intent1.getDoubleExtra("first_number", 0.0);
    double y = intent1.getDoubleExtra("second number", 0.0);
    TextView tview = (TextView)findViewById(R.id.text1);
    tview.setText("The result is " + x+y);
    setContentView(tview);

}
} 
```

我的 xml 文件：-

1) 主要

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/box_1"
    android:hint="@string/enter_no"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="30dp"
    android:ems="10"
    android:inputType="numberDecimal" 
    >

</EditText>

<EditText
    android:id="@+id/box_2"
    android:hint="@string/enter_no"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/box_1"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:inputType="numberDecimal" 

    />

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/box_2"
    android:layout_below="@+id/box_2"
    android:layout_marginTop="47dp"
    android:text="@string/func_add"
    android:onClick="addNumbers" />

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignRight="@+id/box_2"
    android:text="@string/func_mult"
    android:onClick="multiplyNumbers" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="56dp"
    android:text="@string/func_divide"
    android:onClick="divideNumbers" />

 <Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button3"
    android:layout_alignBottom="@+id/button3"
    android:layout_alignRight="@+id/button2"
    android:text="@string/func_subtract" 
    android:onClick="subtractNumbers"/>

 <TextView 
     android:id="@+id/text1"
     android:hint="@string/result"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_centerHorizontal="true"

     />

</RelativeLayout> 
```

2）第二个活动的xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"

    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".Result" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:01:53.663

1.  按钮可以将参数传递给 addNumbers 因为不知道传递什么。
2.  首先你可以调用 setConetView 然后 findViewById。

    TextView tview = (TextView)findViewById(R.id.text1); tview.setText("结果是" + x+y); 设置内容视图（tview）；

3.  阅读更多关于 android 开发的基础知识

# android - SQL 确实存在时没有这样的列错误

> ID：11766589
> 
> 赞同：0
> 
> 时间：2012-08-01T19:53:56.540
> 
> 标签：android, android-sqlite

当我查询我的数据库时，我不断收到一条错误消息`SQLException: no such column`，我不明白为什么当我的查询看起来很好时

```
Cursor nameCursor = context.getContentResolver().query(StatusList.STATUS_URI,new String[] {StatusList.STATUS_NAME,StatusList.STATUS_PERMISSIONS,StatusList.STATUS_ECM2ID}
                ,StatusList.STATUS_TYPE+"=1"+" AND "+StatusList.STATUS_NAME+"="+incidentCursor.getString(0),null,null); 
```

这是完整的错误

```
08-01 15:39:59.104: W/System.err(8623): android.database.sqlite.SQLiteException: no such column: SIS (code 1): , while compiling: SELECT name, permissions, ecm2id FROM Status WHERE (type=1 AND name=SIS)
08-01 15:39:59.112: W/System.err(8623):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
08-01 15:39:59.112: W/System.err(8623):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
08-01 15:39:59.120: W/System.err(8623):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
08-01 15:39:59.120: W/System.err(8623):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
08-01 15:39:59.120: W/System.err(8623):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
08-01 15:39:59.120: W/System.err(8623):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
08-01 15:39:59.120: W/System.err(8623):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
08-01 15:39:59.120: W/System.err(8623):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
08-01 15:39:59.128: W/System.err(8623):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:400)
08-01 15:39:59.128: W/System.err(8623):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:294)
08-01 15:39:59.128: W/System.err(8623):     at ecm2.android.Providers.StatusList.query(StatusList.java:132)
08-01 15:39:59.128: W/System.err(8623):     at android.content.ContentProvider.query(ContentProvider.java:652)
08-01 15:39:59.128: W/System.err(8623):     at android.content.ContentProvider$Transport.query(ContentProvider.java:189)
08-01 15:39:59.128: W/System.err(8623):     at android.content.ContentResolver.query(ContentResolver.java:370)
08-01 15:39:59.135: W/System.err(8623):     at android.content.ContentResolver.query(ContentResolver.java:313)
08-01 15:39:59.135: W/System.err(8623):     at ecm2.android.MainActivity.createNewDialog(MainActivity.java:1167)
08-01 15:39:59.135: W/System.err(8623):     at ecm2.android.MainActivity$ListViews.onListItemClick(MainActivity.java:641)
08-01 15:39:59.135: W/System.err(8623):     at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
08-01 15:39:59.135: W/System.err(8623):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
08-01 15:39:59.135: W/System.err(8623):     at  android.widget.AbsListView.performItemClick(AbsListView.java:1086)
08-01 15:39:59.143: W/System.err(8623):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
08-01 15:39:59.143: W/System.err(8623):     at android.widget.AbsListView$1.run(AbsListView.java:3529)
08-01 15:39:59.143: W/System.err(8623):     at android.os.Handler.handleCallback(Handler.java:615)
08-01 15:39:59.143: W/System.err(8623):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 15:39:59.143: W/System.err(8623):     at android.os.Looper.loop(Looper.java:137)
08-01 15:39:59.143: W/System.err(8623):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-01 15:39:59.143: W/System.err(8623):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 15:39:59.151: W/System.err(8623):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 15:39:59.151: W/System.err(8623):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-01 15:39:59.151: W/System.err(8623):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-01 15:39:59.151: W/System.err(8623):     at dalvik.system.NativeStart.main(Native Method) 
```

基本上我正在尝试做的是查询我的数据库中的任何`type 1`内容`name`

我知道存在这样的记录，所以我不知道为什么会出现此错误

编辑：数据库创建代码

```
private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        createTables(db);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, 
                          int newVersion) 
    {
        Log.w("Messages", "Upgrading database from version " + oldVersion 
              + " to "
              + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS Incidents");
        db.execSQL("DROP TABLE IF EXISTS Distributions");
        onCreate(db);
    }

    private void createTables(SQLiteDatabase db){
        db.execSQL("CREATE TABLE " + INCIDENTS_TABLE + "(" + INCIDENT_ID + " integer primary key autoincrement, " +
                INCIDENT_ECM2ID + " INTEGER, " + INCIDENT_STATON_NAME + " TEXT, " + INCIDENT_READ + " INTEGER, " + INCIDENT_TOC + " TEXT, " +
                INCIDENT_STATION_ID + " INTEGER, " + INCIDENT_MESSAGE_ID + " INTEGER, " + INCIDENT_MESSAGE + " TEXT);");

        db.execSQL("CREATE TABLE " + DISTRIBUTION_MESSAGES_TABLE + "(" + DIST_ID + " integer primary key autoincrement, " +
                DIST_MESSAGE_ID + " INTEGER, " + DIST_ECM2ID + " INTEGER, " + DIST_SENDER_EMAIL + " TEXT, " + 
                DIST_SENDER_NAME + " TEXT, " + DIST_STATION_ID + " INTEGER, " + DISC_READ + " INTEGER, " + DIST_TOC + " TEXT, "
                + DIST_SUBJECT +" TEXT, " + DIST_MESSAGE + " TEXT);");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:57:16.597

`SIS`不是一列，它应该是一个字符串。使用`?`替换字符或将您的字符串用引号引起来。

使用 SQL 注入安全`?`：

```
Cursor nameCursor = context.getContentResolver().query(StatusList.STATUS_URI,
        new String[] {StatusList.STATUS_NAME, StatusList.STATUS_PERMISSIONS, StatusList.STATUS_ECM2ID},
        StatusList.STATUS_TYPE + "=1 AND " + StatusList.STATUS_NAME + "=?",
        new String[] {incidentCursor.getString(0)},
        null); 
```

使用引号：

```
Cursor nameCursor = context.getContentResolver().query(StatusList.STATUS_URI,
        new String[] {StatusList.STATUS_NAME, StatusList.STATUS_PERMISSIONS, StatusList.STATUS_ECM2ID},
        StatusList.STATUS_TYPE + "=1 AND " + StatusList.STATUS_NAME + "='" + incidentCursor.getString(0) + "'",
        null,
        null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:01:19.923

这是构建查询的正确方法：

```
Cursor nameCursor = context.getContentResolver().query(
        StatusList.STATUS_URI,
        new String[] { StatusList.STATUS_NAME, StatusList.STATUS_PERMISSIONS, StatusList.STATUS_ECM2ID },
        StatusList.STATUS_TYPE + "=?" + " AND " + StatusList.STATUS_NAME + "=?",
        new String[] { "1", incidentCursor.getString(0) },
        null); 
```

# oracle11g - 11g 如何在SQLPLUS中显示表SQL？

> ID：11766592
> 
> 赞同：0
> 
> 时间：2012-08-01T19:54:11.487
> 
> 标签：oracle11g, sqlplus

我对 Oracle 及其 11g 数据库 SQL 语言没有太多经验。

SQLPLUS 是否有一些命令或过程来查看定义表、存储过程或其他数据库对象的 SQL？

我知道有一个 DESCRIBE 命令，但它没有显示 SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:57:23.060

下面将显示当前模式中表 FOOBAR 的完整 DLL：

```
select dbms_metadata.get_ddl('TABLE', 'FOOBAR')
from dual; 
```

手册中的更多详细信息：http: [//docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#i1019414](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#i1019414)

顺便说一句：`CREATE TABLE`语句不是 PL/SQL，它“只是”SQL。PL/SQL 是您（仅）在过程（或 PL/SQL 块）中使用的语言。

# javascript - 调用引用 (theID) 的多个函数

> ID：11766597
> 
> 赞同：2
> 
> 时间：2012-08-01T19:54:36.287
> 
> 标签：javascript, html, css

所以，我是 HTML 的初学者，我想知道是否可以在下面做我想做的事情。它正在崩溃，但我不确定唯一的原因是我的语法，还是根本不可能。

函数声明：

```
<!-- Copyright 2005, Sandeep Gangadharan -->
<!-- For more free scripts go to http://www.sivamdesign.com/scripts/ -->

if (document.getElementById) {
document.writeln('<style type="text/css"><!--')
document.writeln('.texter {display:none} @media print {.texter {display:block;}}')
document.writeln('//--></style>') }

function close(theID) {
if (document.getElementById(theID).style.display == "block") { document.getElementById(theID).style.display = "none" } }

function open(theID) {
if (document.getElementById(theID).style.display == "block") { document.getElementById(theID).style.display = "none" }
else { document.getElementById(theID).style.display = "block" } }

// -->

</script>
</head> 
```

函数的使用：

```
<table>
<tbody>
<tr>
<td colspan="2" rowspan="0">
<div>•&amp;nbsp;<a href="/tallwalls/" target="_blank"><b>Tall Walls Sizer</b></a></div>
<p onClick="open('a4'), close('a1','a2','a3')" style="cursor:hand; cursor:pointer">       
<span style="color: #808080;">[Click here for more information]</span></p>
</td>
</tr>
<tr id="a4" class="texter">
<td style="padding:0px;width:210px;"><a href="/tallwalls/" target="_blank" title="Tall Walls Sizer"><img src="/images/logos/tallWALLS.gif" alt="" width="206" height="41"/></a></td>
<td>
<div>DESCRIPTION</div>
</td>
</tr>
</tbody>
</table> 
```

主要是**onClick="open('a4'), close('a1','a2','a3')"**是我不确定这是否是正确的语法。

* * *

**编辑**：忘了提，其他 id 确实存在。它们由相同的图案 x4 组成

* * *

提前致谢，

凯迪安爵士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:05:05.437

Javascript 行以 ; 结尾 所以你需要先使用`open('a4');`

此外，您只为一个参数定义了 close() ，因此您需要拆分`close('a1','a2','a3')`为`close('a1'); close('a2'); close('a3');`

如果您是 HTML 新手，我建议您阅读一下 jQuery。它的 hide() 和 show() 方法将使您尝试做的事情变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:56:36.323

试试这个 - 你需要使用分号来分隔函数调用。请参阅[有关使用分号的相关 SO 帖子](https://stackoverflow.com/q/4962916/175679)。

```
<p onClick="open('a4');close('a1');close('a2');close('a3'); return false;"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:02:39.660

让我们考虑您的方法 close(theID)：

```
function close(theID) {
if (document.getElementById(theID).style.display == "block") { document.getElementById(theID).style.display = "none" } } 
```

此函数仅接受一个参数，并且您尝试对多个参数应用 close。在这种情况下，代码看起来像

```
function close(){
   if(arguments.length > 0 ){
     for(var i=0; i<arguments.length; i++){
        closeMe(arguments[i]);
     }
   }
}

function closeMe(id){
 if (document.getElementById(theID).style.display == "block") {
    document.getElementById(theID).style.display = "none" 
 } 
} 
```

同样你的开放功能。

您的 onClick 处理程序存在严重问题

onClick="打开('a4'), 关闭('a1','a2','a3')"

应该

```
onClick ="open('a4'); close('a1', 'a2', 'a3');" 
```

# internet-explorer-9 - 白色背景div在IE9打印预览中是透明的

> ID：11766605
> 
> 赞同：7
> 
> 时间：2012-08-01T19:55:10.707
> 
> 标签：internet-explorer-9, printf

我有一个带有黑色文本和白色背景的 div。在 IE9 中显示得很好。但是，在打印预览中，白色背景是透明的。在 Chrome、Firefox 和 Safari 中运行良好。有任何想法吗？

下面的链接显示了该页面。显示很好，但是地图右下角的白框在打印预览中是透明的背景。

[http://www.mycoursewalk.com/course_walk/print/426](http://www.mycoursewalk.com/course_walk/print/426)

谢谢，

缺口，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-08T03:41:03.553

默认情况下，IE 不打印背景图像和颜色。有一个设置可以更改为打印网页的背景图像和颜色 [文件> 打印预览> 页面设置（齿轮图标）]。

我处于类似的情况，我无法控制客户端的浏览器设置。在尝试了许多其他方法之后，我最终使用了以下逻辑：-

1.  添加了一个绝对位置在顶部 0 和左侧 0 的图像（1px x 1px，白色）。

2.  将其设置为在@media screen{ .div {display: none} 中不显示，并在@media print{ .div {display: block} 中显示块

3.  使用 javaScript 将图像的高度（在您的情况下可能还需要宽度）设置为文本所在的 div 的高度： $('#whiteBg').height($('#content').height ());

html:

```
<body>
    <div id="wrapper"> <!-- not necessary -->
        <img scr="./img/white.png" id="whiteBg" />
        <div id="content">
            <!-- content here -->
        </div>
    </div>
    <div id="footer">
    </div>
</body> 
```

CSS：

```
@media screen {
    #whiteBg {
        display: none;
    }
}

@media print {
   #whiteBg {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1; //to send it to the background
   }
} 
```

jQuery：

```
 @('#whiteBg').height(  $('#content')).height()  ); 
```

我正在使用此代码将页脚设置在打印输出的最后一页的底部。我的每一页都有页脚，上面有内容（文本），就像你的一样。我使用白色背景来隐藏除最后一页之外的所有页脚。[在 IE 中打印出所有 HTML 页面底部的 HTML 页脚](https://stackoverflow.com/q/17482999/1378980)

# c# - C# 中的 ARIMA 算法

> ID：11766615
> 
> 赞同：4
> 
> 时间：2012-08-01T19:55:53.230
> 
> 标签：c#, .net, time-series, forecasting

我正在尝试在 C# 中实现我自己的 ARIMA 模型。我此时不需要使用任何“最佳模型”选择代码，我只需要像 ARIMA(p,d,q) 一样指定我想要的模型。

到目前为止，我已经制作了一种使用梯度下降来学习自回归系数的自回归方法，但是我读过这种方法不一定适合确定 MA 模型系数。在我自己的尝试中，在我通过阅读发现这一点之前，我最终得到了会很快分歧的模型。我的初始化和学习率可能做错了什么，但这无论如何都会导致我手头的问题。

有谁知道实际的伪代码 ARIMA 算法有什么好的资源？或者也许是一本关于算法的好书来阅读这个主题？

你知道有什么好的学习率选择方法可以与 MA 模型一起使用吗？

我了解 ARIMA 的想法，但我不确定使用什么方法来确定 MA 模型系数。我已经阅读了很多关于这方面的出版物，但大多数人似乎只是使用 R 或其他一些第三方工具，而这一切都是预制的，我想自己编程。

# python - “dict”对象没有属性“create”/“save”

> ID：11766617
> 
> 赞同：3
> 
> 时间：2012-08-01T19:56:02.033
> 
> 标签：python, django, django-models, django-forms

我尝试将 django poll 应用程序应用到我自己的应用程序（一个 IMC 计算器）中，以便为我在 python/django 中的第一步改进和构建一个小项目。

我尝试保存***accueil.html***上的第一个表单的数据：

```
<form action="" method="post">
  <table>
    {{ form.as_table }}
  </table>

 <input type ="submit" value="Submit">
</form> 
```

这是我的***forms.py***：

```
from django import forms

class IndividuDataForm(forms.Form):
    nom = forms.CharField(max_length=100)
    prenom = forms.CharField(max_length= 100)
    anniversaire = forms.DateField()
    taille = forms.IntegerField()
    poids = forms.IntegerField() 
```

这是我的***models.py***：

```
from django.db import models

from django.forms import ModelForm

class Individu(models.Model):

    nom = models.CharField(max_length=100)
    prenom = models.CharField(max_length= 100)
    anniversaire = models.DateField()
    taille = models.IntegerField()
    poids = models.IntegerField()

    def __unicode__(self):

       return self.nom

class ImcResultat(models.Model):

    individu = models.ManyToManyField(Individu)

    imc = models.IntegerField()

    date_imc = models.DateField()

class IndividuForm(ModelForm):

    class Meta:

        model = Individu

class ImcResultatForm(ModelForm):

    class Meta:

        model = ImcResultat 
```

最后我的*** *views.py* ***在这里：当我尝试将数据从表单保存到数据库时，问题出在第 13 行*** a = cd.create() *处。**

```
from django.shortcuts import render_to_response
from django.http import HttpResponse, HttpResponseRedirect
from models import Individu, ImcResultat
from forms import IndividuDataForm

def accueil(request):

    if request.method == 'POST':

        form = IndividuDataForm(request.POST)

        if form.is_valid():

            cd = form.cleaned_data

            a = cd.create() **#this is the problem**

            return HttpResponseRedirect('/accueil/page2/')

    else:

        form = IndividuDataForm()

        return render_to_response('accueil.html', {'form':form})

def page2(request):

    return render_to_response('page2.html') 
```

我猜是在views.py的第一部分，我的功能不能很好地工作，它没有将表单保存在数据库中。def accueil（请求）：

```
if request.method == 'POST':

    form = IndividuDataForm(request.POST)

    if form.is_valid():

        cd = form.cleaned_data

        a = cd.create() **#this is the problem**

        return HttpResponseRedirect('/accueil/page2/') 
```

检查表单是否有效后，我清理表单中的数据，然后尝试保存。我得到了这个错误：

```
Exception Type: AttributeError 
Exception Value: 'dict' object has no attribute 'create' 
```

我猜它来自字典，但在我的代码中我从来没有使用 { } 作为字典列表。所以我一无所知，停留在学习的过程中。

感谢您的帮助，我希望从我的第一篇 stackoverflow 帖子中我没有犯太多错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:03:24.737

丹尼尔的答案更正确

```
if form.is_valid():
    form.save() 
```

不过，我会留下我原来的答案，只是为了文档链接。

form.cleaned_data 是字典类型，没有 create() 方法。我假设您正在尝试为该数据创建一个模型到您的数据库中？

看一下[Can a dictionary to be passing to django models on create？](https://stackoverflow.com/questions/1571570/can-a-dictionary-be-passed-to-django-models-on-create)从该字典创建模型。一个例子可能是：

```
cd = form.cleaned_data
themodel = Individu(**cd)
themodel.save() 
```

这里也是处理表单数据的文档。

[https://docs.djangoproject.com/en/dev/topics/forms/#processing-the-data-from-a-form](https://docs.djangoproject.com/en/dev/topics/forms/#processing-the-data-from-a-form)

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T20:08:31.427

您应该使用 ModelForm，它将自动定义字段以匹配模型上的字段。然后您可以`form.save()`直接从表单调用创建实例。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-01T20:13:13.697

如果您只想将提交的数据保存为 django ModelForm，请使用 form.save()。

见：[https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/#s-the-save-method](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#s-the-save-method)

这将已经使用清理/验证的数据。

如果你需要做某事，你可以使用 form.cleaned_data。除了用模型实例保存它。

# javascript - Backbone.js - 访问父“集合”视图中的所有子视图

> ID：11766620
> 
> 赞同：3
> 
> 时间：2012-08-01T19:56:10.920
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views, backbone-relational

需要调用`.delegateEvents()`父“集合”视图中的所有子视图，以便在从页面中删除父视图然后将其重新打开后重新委托事件。

我可以看到两种方法，就正确的做法而言，这两种方法对我来说都不太正确：

*   每当`addOne(`在父视图中调用 ) 时，将刚刚创建的子视图保存到列表中。当视图被添加回页面时需要稍后重新委派事件。使用数组向后滚动该列表并调用`.delegateEvents()`每个子视图项。这种方法的问题是创建一个单独的数组来保存视图中的所有内容，当视图已经有一个 Backbone 认可的方式来影响它的子视图时`this.collection.each()`
*   使用视图内的内置`View.collection.each()`滚动浏览每个子模型。在每个模型上触发一个事件，导致其相应的视图调用`.delegateEvents()`自身。这种方法的问题在于，纯粹的面向视图的操作正在通过模型进行路由。

这些方法中的任何一种都好还是有更好的方法我应该这样做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:02:27.593

去第一个。无论如何，您都希望保留对 CollectionView 子视图的引用，以便正确删除和重新初始化。后一种模式的问题是，如果模型由多个集合视图表示，所有这些集合视图都将被不必要地触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:06:47.817

您可以通过更改删除列表视图的方式来避免整个问题。

如果您调用该[`jQuery.remove()`](http://api.jquery.com/remove/)函数（或该`Backbone.View.remove()`函数，这是同一件事），它会取消所有事件的委托以避免内存泄漏。但是，如果您认为稍后要将视图添加回页面，则可以使用[`jQuery.detach()`](http://api.jquery.com/detach/)从 DOM 中删除元素，而无需取消对所有事件的委托。然后你以后不需要重新委托它们，你只需将元素附加到 DOM 就可以了。我相信它也快一点。

例如，我在一些列表视图中使用了以下函数：

```
detach : function(){
  this.$el.detach();
},

attach : function(newParentEl){
  this.$el.appendTo(newParentEl);
} 
```

# api - Drupal 7 Form Invalid foreach with tableselect 编辑 - 如何从 tableselect 中删除选定的行

> ID：11766621
> 
> 赞同：1
> 
> 时间：2012-08-01T19:56:12.947
> 
> 标签：api, drupal-7, form-api

我要做的是使用表单 API 创建一个选择列表，用户可以在其中选择行并按下删除按钮，该按钮从数据库中删除选定的行，并重新加载具有已删除选定行的配置的表。使用我当前的代码，当我点击删除按钮时，我收到此错误：

警告：为 form_execute_handlers() 中的 foreach() 提供的参数无效（C:\xampp\htdocs\amaware\includes\form.inc 的第 1431 行）。

这是代码：

```
 /**
             * Implements hook_menu().
             */
            function smsfeed_menu() {
              $items = array();

              $items['admin/config/content/smsfeed'] = array(
                'title' => 'SMS Messages and Newsletters',
                'description' => 'Edit the Setting for the SMS Feed and Newsletter',
                'page callback' => 'drupal_get_form',
                'page arguments' => array('smsfeed_form'),
                'access arguments' => array('access administration pages'),
                'type' => MENU_NORMAL_ITEM,
                );

              $items['admin/config/content/smsfeed/settings'] = array(
                'title' => 'Settings',
                'type' => MENU_DEFAULT_LOCAL_TASK,
                    'weight' => 1,
                );  

              $items['admin/config/content/smsfeed/newsletter'] = array(
                'title' => 'Newsletter',
                'page callback' => 'drupal_get_form',
                    'page arguments' => array('newsletter_table_form'),
                'access arguments' => array('access administration pages'),
                'type' => MENU_LOCAL_TASK,
                    'weigth' => 2,
                    );

              $items['admin/config/content/smsfeed/feed'] = array(
                'title' => 'SMS Feed',
                'page callback' => 'drupal_get_form',
                'page arguments' => array('feed_form'),
                'access arguments' => array('access administration pages'),
                'type' => MENU_LOCAL_TASK,
                    'weight' => 3,
                    );

              $items['admin/config/content/smsfeed/questions'] = array(
                'title' => 'Questions',
                'page callback' => 'drupal_get_form',
                'page arguments' => array('questions_form'),
                'access arguments' => array('access administration pages'),
                'type' => MENU_LOCAL_TASK,
                    'weigth' => 4,
                    );

              return $items;
            }

            /**
             * Page callback: SMS Settings
             *
             * @see smsfeed_menu()
             */
            function smsfeed_form($form, &$form_state) {
              $form['response_time'] = array(
                '#type' => 'textfield',
                '#title' => t('Response Time (In Days)'),
                '#default_value' => variable_get('response_time', 3),
                '#size' => 2,
                '#maxlength' => 2,
                '#description' => t('The response time, in days, that users should expect.'),
              );

                $form['feed_keyword'] = array(
                  '#type' => 'textfield',
                '#title' => t('Feed Keyword'),
                '#default_value' => variable_get('feed_keyword', 'FEED'),
                '#size' => 10,
                '#maxlength' => 10,
                '#description' => t('The keyword users should text to have their message moderated and added to the website feed.'),
              );

                $form['join_keyword'] = array(
                  '#type' => 'textfield',
                '#title' => t('Join Keyword'),
                '#default_value' => variable_get('join_keyword', 'JOIN'),
                '#size' => 10,
                '#maxlength' => 10,
                '#description' => t('The keyword users should text to be added to the newsletter list.'),
              );

                $form['quit_keyword'] = array(
                  '#type' => 'textfield',
                '#title' => t('Quite Keyword'),
                '#default_value' => variable_get('quit_keyword', 'QUIT'),
                '#size' => 10,
                '#maxlength' => 10,
                '#description' => t('The keyword users should text to be removed from the newsletter list.'),
              );    

              return system_settings_form($form);
            }

            /**
             * Page Callback Newsletter
             */

            function newsletter_table_form($form, $form_state) {
                $rows = array();
                $header = array(t('User Name'), t('User Number'), t('User E-mail'),);

                $query = db_select('sms_newsletter');
                $query->fields('sms_newsletter', array('name', 'number', 'email',))
                    ->orderBy('name', 'ASC');
                $results = $query->execute();

                foreach ($results as $line) {
                    $rows[] = array(
                        $line->name,
                        $line->number,
                        $line->email,
                    );
                }

              $form['table'] = array(
                '#type' => 'tableselect',
                '#header' => $header,
                '#options' => $rows,
                '#empty' => t('No users found'),
              );

              $form['delete'] = array(
                '#type' => 'submit',
                '#value' => t('Delect Selected'),
                    '#submit' => 'newsletter_table_form_delete'
              );
              return $form;
            }

            function newsletter_table_form_delete ($form, &$form_state) {
                foreach ($form_state['values']['collections'] as $key => $value) {
                    if ($value) {
                            $delete = db_delete('sms_newsletter')
                            -> execute();
                    }
                }   
            } 
```

任何帮助都深表感谢。

编辑：我编辑了我的 news_letter_table_form 以阅读：

```
function newsletter_table_form_delete ($form, $form_state) {
    foreach (($form_state['values']['table']) as $rows) {
            //$delete = db_delete('sms_newsletter')
            //-> execute();
            drupal_set_message ('' . $rows  . '');
    //drupal_set_message ('' . $form_state['values']['table']       . '');
    }
} 
```

新的输出让我对如何识别选定的行并从数据库中删除它们感到困惑。使用上面的 newsletter_table_form_delete 我得到以下输出：

1.  如果我选择第一行没有任何反应
2.  如果我选择第二行输出为 1
3.  如果我选择第三行，则输出为 2，依此类推
4.  如果我选择多行，则输出是所选行的无序 html 列表。

我现在很好奇如何获取我现在拥有的内容并对其进行更改，以便我可以从数据库中删除选定的行。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:35:57.250

尝试改变

```
 $form['delete'] = array(
    '#type' => 'submit',
    '#value' => t('Delect Selected'),
        '#submit' => 'newsletter_table_form_delete'
  ); 
```

至

```
 $form['delete'] = array(
    '#type' => 'submit',
    '#value' => t('Delect Selected'),
        '#submit' => array('newsletter_table_form_delete') // <-- make this an array
  ); 
```

根据您的问题编辑中添加的附加信息，我注意到您的 tableselect 是在没有指定数组键的情况下构建的，例如：

```
foreach ($results as $line) {
    $rows[] = array(  // <-- No array keys specified here 
        $line->name,
        $line->number,
        $line->email,
    );
} 
```

由于没有指定键，PHP 的默认值是从 0 开始的索引。这就是为什么第一行没有结果，第二行没有结果，以此类推。

有关示例，请参阅[元素](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#tableselect)[的文档。`tableselect`](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#tableselect)

我不知道您的数据库表结构是什么样的，但您可能需要查询表的主键并将其作为数组键包含到您的`$rows`数组中。这样，当您在删除函数中处理数据时，您就有了要删除的行的主键并将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T10:15:01.327

对我来说，这并不清楚。

我只想补充一点，最后 nmc 说的是你应该像这样构造你的行，在其中添加一个键到行。

```
foreach ($results as $line) {
                    $rows[$line->name] = array(
                        $line->name,
                        $line->number,
                        $line->email,
); 
```

# facebook - FB.login() 弹出窗口仅在移动 Web 应用程序中被阻止

> ID：11766624
> 
> 赞同：3
> 
> 时间：2012-08-01T19:56:27.787
> 
> 标签：facebook, mobile, facebook-javascript-sdk

对于使用 Facebook Javascript SDK 的移动 Web 应用程序，我们希望检查用户的登录状态，然后在必要时显示 Facebook 登录对话框。以下代码在我们的 Web 应用程序中给定按钮的单击处理程序中运行：

```
$('#button').click(function() {
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // do something with the logged in and authorized user
        } else if (response.status === 'not authorized') {
            // logged in but has not authorized our app
        } else {
            // not logged in
            FB.login();
        }
    });
}); 
```

确保用户没有登录到 Facebook，这可以正常工作并在按下按钮时显示桌面网络浏览器的登录对话框，但不适用于移动网络（至少不适用于各种浏览器上的 Android，我不目前可以使用 iPhone）。移动网络应用程序上什么都没有出现，当我禁用弹出窗口阻止程序时，我会收到一个提示，询问我是否要允许这个弹出窗口，这很有效。

有谁知道为什么行为不同和/或已知/标准的解决方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T20:02:16.930

您的代码**不适**用于所有桌面浏览器。某些浏览器（移动和桌面）会阻止弹出窗口*，除非*它们是由用户单击启动的。例如，

```
$('#mybutton').click(function() {
   FB.login();
}); 
```

将起作用，因为该`FB.login()`函数*仅*在响应用户点击时被调用。因此，要修复您的代码，请将`FB.login()`调用替换为显示“登录”按钮和鼓励用户单击该按钮的文本的代码。

# php - if 语句未正确评估

> ID：11766628
> 
> 赞同：0
> 
> 时间：2012-08-01T19:56:43.197
> 
> 标签：php, javascript, jquery, ajax, if-statement

所以我正在`$.ajax`打电话并返回`json`数据。在所述数据中有一个名为状态的元素。我正在测试这个：`if(data.status === "success"){ ..do something..}`。我知道`json`来自`$.ajax`调用的数据实际上是`"success"`（我从 chrome 中的开发人员工具中知道 php 脚本正在返回`{status: success}`）但是 if 语句中没有任何内容正在评估。如果我在 if 语句中添加 else 语句，则该代码会被评估。这是我的代码：

```
$.ajax({
    type: "POST",
    url: "./php/checkuser.php",
    datatype: "json",
    success: function(data){
      console.log(1);
      if(data.status === "success"){
        console.log(2);
        $.get("./mainmenu.html", function(html){
          $("#content").html(html);
          console.log(3);
        });
        $.ajax({
          type:"POST",
          url:"./php/loaduserdata.php",
          dataType:"json",
          success:function(data){
            console.log(4);
            if(data.status === "success"){
              console.log(5);
              var lastlevel = data.lastlevel;
              if(lastlevel === 0){
                console.log(6);
                $("#continue-wrapper").removeClass("enabled").addClass("disabled");
                $('<img />').attr('src', "./images/menuitem_continue-disabled.png").attr('id', "continue").attr('alt', "Continue").load(function(){
                  $("#continue-wrapper").html($(this));
                });
              } else {
                console.log(7);
                $("#continue-wrapper").removeClass("disabled").addClass("enabled");
                $('<img />').attr('src', "./images/menuitem_continue-enabled.png").attr('id', "continue").attr('alt', "Continue").load(function(){
                  $("#continue-wrapper").html($(this));
                });
              }
            }
          }
        });
      } else {
        console.log(8);
      }
    }, 
    error: function(thrownError){
      console.log(thrownError);
    }
  }); 
```

在控制台中输出我得到`1`和`8`。我很难过有人能看到我看不到的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:03:52.880

在您拥有的第一个 ajax 请求中，`datatype`它应该是`dataType`，所以`data`它只是一个字符串并且`data.status`未定义。

# c - libssh2_scp_recv 未填充 struct stat

> ID：11766636
> 
> 赞同：0
> 
> 时间：2012-08-01T19:57:12.637
> 
> 标签：c, ssh, scp, libssh2

我可以使用 `libssh2_scp_send()`. 但是，当我尝试使用 接收文件 `libssh2_scp_recv()`时，它不会`struct stat` 用数据填充参数。文件大小始终返回“0”。

```
struct stat    file_info;

LIBSSH2_CHANNEL *channel = libssh2_scp_recv( session, source_file, &file_info );

printf( "file_info.st_size = %lu.\n",       file_info.st_size ); 
```

任何其他字段`file_info`也为空，即使`channel`不是 NULL。

我的会话已正确打开并适用于任何其他 SSH 操作（运行远程命令、发送文件......）

我正在使用“libssh2-1.3.0”。

请问有什么线索吗？

真的谢谢。

* * *

编辑：

我将第三行更改为：

```
fprintf( stderr, "** file_info { st_size = %lu; st_atime = %lu }. SSH last error = %d",
    file_info.st_size, file_info.st_atime,
    libssh2_session_last_errno( info->session ) ); 
```

结果是：

```
** file_info { st_size = 0; st_atime = 0 }. SSH last error = 0`. 
```

而已。返回的频道是有效的，我可以从中读取。`libssh2_session_last_errno()`没有错误，但`st_size`仍然是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:09:55.367

尝试做一些错误检查，这样我们就可以确切地看到发生了什么：

```
channel = libssh2_scp_recv(session, path_to_file, &struct_stat);
if (!channel && (libssh2_session_last_errno(session) != LIBSSH2_ERROR_EAGAIN)) 
{
    if ((struct_stat.st_mode == 0) && (struct_stat.st_atime == 0) && \
           (struct_stat.st_mtime == 0) && (struct_stat.st_size == 0)) 
    {
       fprintf(stderr, "No file found and the error %d\n", \
                     libssh2_session_last_errno(session));

       exit (EXIT_FAILURE);
   }
} 
```

希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T01:15:40.367

我的系统上的 libssh2_scp_recv(session, source_file, &file_info) 仅填充了 source_file 的更改时间和权限模式。因此，file_info.st_ctim.tv_sec 和 file_info.st_mode 具有有效值。

如果您查看 libssh2_scp_recv 的 libssh2 API 文档[http://libssh2.sourceforge.net/doc/#libssh2scprecv](http://libssh2.sourceforge.net/doc/#libssh2scprecv)，它并不能保证会填充 file_info 的所有字段。

文件的结尾由 libssh2_channel_read 返回的单个 NULL(0) 字节指示。

# javascript - 通过 JS 更新的输入值不会显示

> ID：11766647
> 
> 赞同：0
> 
> 时间：2012-08-01T19:57:42.267
> 
> 标签：javascript, input

我正在为输入创建并设置默认值（类型为默认值，但当专门设置为文本时，我遇到了同样的问题）元素。根据 JS，该值确实会更新，但我在显示的页面或源中都没有看到变化。

```
 temp3 = document.createElement('input'); temp2.appendChild(temp3);
    temp3.value = "a"; 
```

如果我通过警报（temp3.value）检查该值，我确实看到“a”，但我看到页面上创建的文本输入没有变化，也没有通过 Chrome 的 Inspect 元素功能进行检查。

# jquery - 通过 jQuery 加载内容和填写表单字段的最佳方式

> ID：11766650
> 
> 赞同：0
> 
> 时间：2012-08-01T19:57:44.247
> 
> 标签：jquery, forms, post

我正在使用 jQuery 并将发布请求发送到返回 JSON 数组的页面。在我正在执行发布请求的方法中，我触发另一个函数/控制器，然后显示一个表单（html 文件），我通过 get 加载该表单，然后使用第一个帖子返回的 json 对象中的值填充表单的表单字段要求。问题是，因为来自 jQuery 的 post Request 是异步的，所以 html 文件的加载比填充表单的下一行要慢，这意味着没有表单字段填充值。

有人可以给我一个例子，我应该如何在 jQuery 中做这种事情？如果你需要我发布一个我现在使用的示例片段，如果有什么不清楚的话。

我知道 jQuery 支持禁用异步请求，但这在 v1.8 中已被弃用，这就是我不想使用它的原因...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:20:02.270

您需要的是在初始 ajax 调用中使用回调来调用表单填写行。这将确保表单填写行仅在成功完成 ajax 进程时执行。

查看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)`success()`上的或`complete()`方法。如果您发布代码，我可以帮助您填写。

# ios - 使用依赖项目构建 Xcode 命令行

> ID：11766654
> 
> 赞同：1
> 
> 时间：2012-08-01T19:57:48.630
> 
> 标签：ios, xcode, xcode4, build

我正在构建一个 iOS 应用程序，它使用我使用[jverkoey 的框架结构](https://github.com/jverkoey/iOS-Framework)构建的库。一切都很好，直到我尝试让我的 CI 环境 (Jenkins) 构建我的项目。Jenkins使用命令行构建，当它这样做时，我的依赖框架被构建在它自己的构建目录中，当我的主应用程序构建在它自己的目录中时，它找不到框架。

作为测试，我将依赖框架构建目录的输出复制到主应用程序构建目录中，然后重新运行我的命令行构建，一切正常。因此，我认为我必须做的是更新我的 Jenkins 构建脚本，以便能够在构建主应用程序之前移动依赖的构建输出，或者将它们更改为与 XCode 从 IDE 使用它的 DerivedData 目录在同一目录中构建。

问题是，怎么做？在从命令行构建方面，我不是专家，我真的可以在这里使用一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:24:52.617

好的，我想通了。万一其他人有类似的问题，您可以在运行 xcodebuild 时将 SYMROOT 设置设置为您想要的任何目录。

`xcodebuild -target MyTarget SYMROOT=/Build/MyProj/Sym.root`

# scala - 用 Scala 写一个论坛有意义吗？

> ID：11766656
> 
> 赞同：7
> 
> 时间：2012-08-01T19:57:58.287
> 
> 标签：scala, open-source, forum

我正在寻找一个有意义的任务来学习 Scala（最终可用的东西，而不仅仅是编程练习），而且我还必须做一个论坛，我不想学习 PHP ......所以我'我正在考虑在 Scala 中实现一个开源论坛。

但这有意义吗？论坛没有高性能或可扩展性要求……而且 Java Hosting 更昂贵，所以即使我的论坛软件是免费的，大多数人也不会使用它。

我是否错过了用 Scala/Java 编写的论坛有意义的用例，并且比 PHP（或类似）论坛更可取？

我发现例如这个：

[http://java-source.net/open-source/forum-software](http://java-source.net/open-source/forum-software)

但它似乎被放弃了，就像这里所说的：

[http://www.coderanch.com/t/497053/Ranch-Office/forum-has-been-built-JForum](http://www.coderanch.com/t/497053/Ranch-Office/forum-has-been-built-JForum)

所以我可能是正确的，简单、便宜和慢更适合论坛= PHP？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T21:47:47.620

我认为用 Scala 编写的开源论坛会很有用，如果你能以一种易于使用 Lift and Play 框架与现有 Web 应用程序集成的方式构建它。

您的目标受众应该是任何使用 Scala 编写 Web 应用程序并想在论坛上发表文章的人。使用基于 php 的解决方案的前景不会吸引这些开发人员，但也不会重新实现轮子。如果您使用他们已经在利用的相同堆栈创建一个编写良好、易于实施的解决方案，那么您就有一个非常引人注目的价值主张。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:40:54.453

It depends on the purpose of the exercise.

**You want to learn Scala and need a project for exercise:** Anything goes, so does a forum. But it would probably be more interesting to get involved in some existing open source project. Think about the 5 first libraries you would probably consider for a project (logging, testing, web framework) check them out, find one that is open for contribution. Grab a bug or feature request and try to implement it.

**You want some forum** Forget it. Use some existing solution.

**Somebody forces you to write a forum** If things like being hostable on almost arbitrary webspace isn't a requirement, go ahead use Scala.

**You want to prove the power of Scala to yourself or somebody else** Go for something more challenging (Big Data, Akka ...)

# javascript - window.onbeforeunload - 仅在不提交表单时显示警告

> ID：11766658
> 
> 赞同：38
> 
> 时间：2012-08-01T19:57:59.147
> 
> 标签：javascript, jquery, onbeforeunload

我正在使用 window.onbeforeunload 来防止用户在更改表单上的值后离开。这工作正常，除了它在用户提交表单时也显示警告（不需要）。

提交表单时如何在不显示警告的情况下执行此操作？

当前代码：

```
var formHasChanged = false;

$(document).on('change', 'form.confirm-navigation-form input, form.confirm-navigation-form select, form.confirm-navigation-form textarea', function (e) {
    formHasChanged = true;
});

$(document).ready(function () {
    window.onbeforeunload = function (e) {
        if (formHasChanged) {
            var message = "You have not saved your changes.", e = e || window.event;
            if (e) {
                e.returnValue = message;
            }
            return message;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-01T20:03:33.647

使用表单的提交事件来设置标志可能对您有用。

```
 var formHasChanged = false;
 var submitted = false;

$(document).on('change', 'form.confirm-navigation-form input, form.confirm-navigation-form select, form.confirm-navigation-form textarea', function (e) {
    formHasChanged = true;
});

$(document).ready(function () {
    window.onbeforeunload = function (e) {
        if (formHasChanged && !submitted) {
            var message = "You have not saved your changes.", e = e || window.event;
            if (e) {
                e.returnValue = message;
            }
            return message;
        }
    }
 $("form").submit(function() {
     submitted = true;
     });
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-26T17:04:20.183

您可以使用 .on() 绑定 onbeforeunload ，然后使用 .off() 在表单提交中取消绑定

```
$(document).ready(function () {
    // Warning
    $(window).on('beforeunload', function(){
        return "Any changes will be lost";
    });

    // Form Submit
    $(document).on("submit", "form", function(event){
        // disable warning
        $(window).off('beforeunload');
    });
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-01T20:01:50.630

您可以处理[submit()](http://api.jquery.com/submit/)事件，该事件仅在您的表单提交时发生。

在该事件中，将您的标志变量设置`formHasChanged`为 false 以允许继续卸载。此外，这只是一个建议，但由于该标志变量的用途已经改变，因此您可能希望将其重命名为“warnBeforeUnload”

```
$(document).submit(function(){
    warnBeforeUnload = false;
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-26T18:47:15.390

我一直在寻找更好的解决方案。我们想要的只是从创建我们的“您确定吗？”中排除一个或多个触发器。对话框。所以我们不应该为越来越多的副作用创造越来越多的变通方法。如果表单在没有`click`提交按钮事件的情况下提交怎么办？如果我们的点击处理程序删除了`isDirty`状态但随后表单提交被阻止了怎么办？当然我们可以改变触发器的行为，但正确的地方应该是处理对话的逻辑。绑定到表单的`submit`事件而不是绑定到提交按钮的`click`事件是该线程中答案的优势，高于我之前看到的其他一些答案，但恕我直言，这只是修复了错误的方法。

在对事件的事件对象进行了一些挖掘之后，`onbeforeunload`我找到了`.target.activeElement`包含元素的属性，该元素最初触发了事件。所以，是的，它是按钮或链接或我们点击的任何东西（或者根本没有，如果浏览器本身导航离开）。我们的“你确定吗？” 然后对话逻辑将自身简化为以下两个组件：

1.  表格的`isDirty`处理：

    ```
    $('form.pleaseSave').on('change', function() {
      $(this).addClass('isDirty');
    }); 
    ```

2.  “你确定吗？” 对话逻辑：

    ```
    $(window).on('beforeunload', function(event) {
      // if form is dirty and trigger doesn't have a ignorePleaseSave class
      if ($('form.pleaseSave').hasClass('isDirty')
          && !$(event.target.activeElement).hasClass('ignorePleaseSave')) {
        return "Are you sure?"
      }
      // special hint: returning nothing doesn't summon a dialog box
    }); 
    ```

就是这样。无需变通方法。只需给触发器（提交和其他操作按钮）一个`ignorePleaseSave`类和我们希望将对话框应用于一个`pleaseSave`类的表单。卸载页面的所有其他原因然后召唤我们的“你确定吗？” 对话。

PS 我在这里使用 jQuery，但我认为该`.target.activeElement`属性也可以在纯 JavaScript 中使用。

# php - 检查两个 PHP 列表是否完全不相交

> ID：11766661
> 
> 赞同：0
> 
> 时间：2012-08-01T19:58:21.933
> 
> 标签：php, list

在 PHP 中，可以使用以下函数来确定一个列表（子列表）是否是另一个列表（父列表）的子集：

```
function issubset($child, $parent)
{
        $c = count($child);
        $valid = 1;
        for($i=0;$i<$c;$i++) {
            if(!in_array($child[$i], $parent)) {
                $valid = 0;
                return $valid;
            }
        }
    return $valid;
} 
```

一个相似但相反的概念是两个列表*不相交*的想法，因此它们没有任何共同的元素。

例如，列表 1,2,3,4 和 4,5,6,7 不是不相交的，因为它们有共同的元素*4*，但是列表 1,2,3 和 4,5,6 是不相交的，因为它们有没有共同的元素。

如何设计检查不相交性的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:00:59.750

```
function disjoint($arr1, $arr2) {
   return (count(array_intersect($arr1, $arr2)) == 0);
}

function is_subset($parent, $possible_child) {
   return count(array_intersect($parent, $possible_child)) == count($possible_child);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:01:14.293

`if (count(array_intersect($a, $b)) == 0) { /* do something */ }`

# html - 无法在 html 中检索简单的 xml 节点值

> ID：11766662
> 
> 赞同：0
> 
> 时间：2012-08-01T19:58:25.883
> 
> 标签：html, xml, xmlhttprequest

我在一个名为的文档中有以下 xml 代码`note.xml`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

我在一个名为 sample.html 的文件中有以下 html 代码

```
<!DOCTYPE html>
<html>
<body>
<h1>W3Schools Internal Note</h1>

<div>
<b>To:</b> <span id="to"></span><br />
<b>From:</b> <span id="from"></span><br />
<b>Message:</b> <span id="message"></span>
</div>
<script type="text/javascript">
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","C:\Users\cxpv2\Desktop\IV\New folder\Test Game descriptions\attempt test game1\note.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

document.getElementById("to").innerHTML=
xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
document.getElementById("from").innerHTML=
xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;
document.getElementById("message").innerHTML=
xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;

</script>

</body>
</html> 
```

这个例子直接取自 w3schools.com 上面xml中的节点值并没有显示在html文档中。我应该更改 html 文件的名称还是让我知道这是否是在 html 文件中显示 xml 内容的正确方法。

我改变了

```
xmlhttp.open("GET","note.xml",false); 
```

至

```
xmlhttp.open("GET","C:\Users\cxpv2\Desktop\IV\New folder\Test Game descriptions\attempt test game1\note.xml",false); 
```

提到整个确切的位置

# 更新

让我知道我是否至少做得对。如果 activexobject 有问题，我会问我的系统管理员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:47:07.413

您不能使用 XMLHttpRequest 发出本地请求，因为让脚本从您的本地计算机读取文件是安全漏洞。

如果您在浏览器中打开错误控制台，您很可能会在此处看到打印的错误。

# xcode - 除非删除可执行文件，否则 XCode 不会链接依赖项 (.a) 更改

> ID：11766663
> 
> 赞同：1
> 
> 时间：2012-08-01T19:58:37.367
> 
> 标签：xcode, linker

我在 XCode 中有一个子子项目（顶级项目的子项目的子项目），它生成一个静态库，顶级项目链接到该库。子子项目的输出位于 Build Settings > Link Binary With Libraries 列表中（虽然不在 Target Dependencies 中，因为 XCode 只允许您将直接子项放入其中）。如果我删除 Build 目录中 AppPackage 中的 Executable Unix File，它确实可以正确构建。它只是没有认识到被更改的库应该导致可执行文件链接，即使它今天早上工作正常。我检查了 git 并且项目文件没有改变。会发生什么？（我会在发布此消息后立即重新启动）

编辑：重新启动不起作用。转到以前的提交没有用。我开始怀疑它是否从未正常工作过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:11:21.737

我也有同样的问题。让应用程序链接到新版本的静态库的唯一方法是在构建之前进行清理。我什至将静态库项目设置为依赖项。

# iphone - 向 CALayer 添加文本：drawInRect 不起作用

> ID：11766664
> 
> 赞同：4
> 
> 时间：2012-08-01T19:58:43.443
> 
> 标签：iphone, ios, ipad, calayer

我做了以下事情：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx
{

      UIGraphicsPushContext ( ctx );

      CGRect r = CGRectMake( 500, 300, 200, 100 );
      NSString *text = [[NSString alloc] initWithString:@"raaaaaaaa!"];
      UIColor *color = [ UIColor colorWithRed: (200.0f)  green: (100.0)  blue:(200.0f) alpha: 1.0f ];
      [color set];

      [ text drawInRect: r withFont:[UIFont systemFontOfSize:50] lineBreakMode: UILineBreakModeWordWrap alignment: UITextAlignmentLeft ];
      [text release];

      UIGraphicsPopContext();
    }
  }
} 
```

上面的代码不起作用。为什么？

如果我改为执行以下操作，则它正在工作：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx
{
      UIGraphicsPushContext ( ctx );

      CATextLayer *label = [[CATextLayer alloc] init];
      [label setFont:@"Didot"];
      [label setFontSize:50];  
      [label setFrame:CGRectMake( 400, 300, 400, 100 )];
      [label setString:@"Helloooooooooooooooooo"];
      [label setAlignmentMode:kCAAlignmentCenter];
      [label setForegroundColor:[[UIColor blueColor] CGColor]];
      [layer addSublayer:label];
      [label release];

      UIGraphicsPopContext();
  }
} 
```

有什么区别，为什么 drawInRect 什么都不做？

谢谢

**编辑** 所以，我没有正确使用 UIColor，所以我改变了

```
UIColor *color = [ UIColor colorWithRed: (200.0f)  green: (100.0)  blue:(200.0f) alpha: 1.0f ]; 
```

为了这

```
UIColor *color = [UIColor colorWithRed:200 / 255.0 green:100 / 255.0 blue: 200 / 255.0 alpha: 1.0]; 
```

仍然没有运气，使用 drawInRect 时我看不到任何文字

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T07:02:30.297

你的问题有两个问题：

> 上面的代码不起作用。为什么？

起初我以为文字没有显示出来，因为它是用白底白字绘制的。虽然它可能仍然如此，但这不是唯一的问题。

您正在将文本绘制到 (r) 中的矩形是相对于您正在绘制的图层的边界。即，如果您想在图层的左上角绘制，矩形的原点应该是 (0, 0)。上面的代码*仍然*无法正常工作。

如果您检查 drawInRect:withFont:... 返回的 CGSize（渲染文本的大小），您可以看到渲染文本的大小为 0 宽。这表明要绘制的矩形的高度为 100 是不够的。增加矩形的高度可以解决这个问题，现在文本是可见的。如果您要在图层内绘制一些文本，那么最适合绘制的矩形可能是图层的边界 ( `CGRect r = [layer bounds];`)。

我做了什么使它工作：

*   更改了文本颜色
*   将原点更改`r`为 (0,0)
*   增加高度`r`

> 有什么区别 [...] ？

在第一个中，您将文本绘制到图层的图形上下文中（drawLayer:inContext: 应该做的），但在第二个示例中，您将另一个图层添加到图层的层次结构中，而不是在其中绘制。每次您的图层重绘时，都会向其中添加一个新的文本图层。所以实际上没有任何东西被绘制到图层图形上下文中。

接下来会发生什么，在您的图层自己绘制（空）之后，您的图层的子图层会自行绘制，并且它们的内容是在您的图层之上组成的。这就是为什么您会看到文本层的文本。

如果您添加这样的文本层，您可以通过无需进行任何手动绘图来提高代码效率。这需要在较早的时间点（仅一次）将文本图层添加到您的图层，并且您不进行任何自定义绘图（通常很慢）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:11:53.267

仅当您阅读过 UIColor 的类参考...

```
UIColor *color = [UIColor colorWithRed:200 / 255.0 green:100 / 255.0 blue: 200 / 255.0 alpha: 1.0]; 
```

将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T19:40:26.847

我觉得你的框架坐标可能是错误的。

```
 CGRect r = CGRectMake( 500, 300, 200, 100 );
[label setFrame:CGRectMake( 400, 300, 400, 100 )]; 
```

注意 iPhone 屏幕尺寸为 320*460 或 3 20*568(iPhone5)。在您的代码中，您设置 x 坐标 400 和 500 超出屏幕。

**请注意，您的坐标应遵循 x<=320 否则您无法在屏幕上看到它，除非您将其添加到滚动视图中**

# c++ - 如何从 Windows 7 中的崩溃错误中获取更多信息？

> ID：11766665
> 
> 赞同：3
> 
> 时间：2012-08-01T19:58:42.823
> 
> 标签：c++, windows-7, error-handling, signals, mingw

### 问题

我的应用程序似乎有问题，因为它意外崩溃。我正在尝试解决问题，但我遇到了以下问题：

在 Windows 7 上，当应用程序崩溃时，会出现以下窗口，而不是获取有关崩溃的一些有用信息：

![视窗 7 错误](../Images/e2319fda6c8b3a2939e51a2d32f78b91.png)

### 问题

是否可以让 Windows (7)**显示一些实际有用的信息**？像堆栈跟踪？内存转储？奇怪的错误代码？任何事物？我非常怀疑微软可以在这里帮助我......事实上，`checking for a solution to the problem`从来没有找到任何应​​用程序的解决方案，我不知道为什么这个窗口甚至存在。

我记得在 Windows XP 上，有那个*错误报告*窗口，并且在某个地方有一个指向另一个窗口的链接，它实际上显示了一些信息。

### 我试过的

我尝试使用信号处理自己处理应用程序崩溃。然而，使用 MinGW 的信号处理似乎很糟糕：写入空指针应该发送一个 SIGSEGV 信号，但程序崩溃了。在互联网上查找，我发现[这个](http://osdir.com/ml/gnu.mingw.msys/2005-01/msg00024.html)线程让我相信信号处理可能会被破坏。

将 GDB 与多线程一起使用给我带来了很多麻烦，因为需要完成一些对时间敏感的工作。

### 其他注释

我正在使用 MinGW 编译器套件 Eclipse IDE 在 Windows 7 上工作（显然）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:40:56.370

当此窗口出现时，不要单击取消。大约 1 或 2 分钟后，它将变成另一个窗口，允许您选择指定的编译器（在我的计算机上是 Visual Studio 2010）并进行调试。

# c# - 崩溃：试图读取或写入受保护的内存 c#

> ID：11766666
> 
> 赞同：1
> 
> 时间：2012-08-01T19:58:43.803
> 
> 标签：c#, memory, crash

我们的软件经常出现崩溃问题。我想我已经追踪到它发生的地方，但我不熟悉代码。调试非常困难。

我们无法在我们的开发环境中重现此问题，它发生在我们的实际环境中。用户使用刷卡登录我们的系统，终端有磁卡读卡器。当他们刷卡时，它可能每天发生一次。MSR 像键盘一样被读取。

我在不同的场合连续刷了几百次卡，在开发上没有任何问题。

有 try catch 但它没有捕获任何东西，我们在事件查看器中遇到的错误是：

“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”

这是我很确定它崩溃的功能：

```
 private void GetRawInputInfo(
        IntPtr rawInputHeader,
        ref IntPtr deviceHandle,
        ref bool handled,
        ref StringBuilder buffer)
    {
        try
        {
            uint cbSize = 0;
            IntPtr hRawInput;

            hRawInput = rawInputHeader;

            if (UnsafeNativeMethods.GetRawInputData(
                hRawInput,
                Structures.RAWINPUTDATAUICOMMAND.RID_INPUT,
                IntPtr.Zero,
                ref cbSize,
                (uint)Marshal.SizeOf(typeof(Structures.RAWINPUTHEADER))) == 0)
            {
                IntPtr ptr = Marshal.AllocHGlobal((int)cbSize);

                if (ptr != IntPtr.Zero &&
                    UnsafeNativeMethods.GetRawInputData(
                        hRawInput,
                        Structures.RAWINPUTDATAUICOMMAND.RID_INPUT,
                        ptr,
                        ref cbSize,
                        (uint)Marshal.SizeOf(typeof(Structures.RAWINPUTHEADER))) == cbSize)
                {

                    Structures.RAWINPUT raw = (Structures.RAWINPUT)Marshal.PtrToStructure(ptr, typeof(Structures.RAWINPUT));

                    deviceHandle = raw.header.hDevice;
                    handled = raw.header.dwType == Structures.RAWINPUTDEVICEDWTYPE.RIM_TYPEKEYBOARD &&
                        raw.keyboard.Message == Messages.WM_KEYDOWN;

                    if (handled)
                    {
                        byte[] state = new byte[256];

                        // Force the keyboard status cache to update
                        UnsafeNativeMethods.GetKeyState(0);

                        // Note: GetKeyboardState only returns valid state when
                        // the application has focus -- this is why we weren't
                        // getting shift keys when the application was not focused
                        if (UnsafeNativeMethods.GetKeyboardState(state))
                        {
                            //StringBuilder unmanagedBuffer = new StringBuilder(64);

                            if (UnsafeNativeMethods.ToUnicode(
                                raw.keyboard.VKey,
                                raw.keyboard.MakeCode,
                                state,
                                buffer,
                                64,
                                0) <= 0)
                            {
                                buffer.Remove(0, buffer.Length);
                            }
                        }
                    }
                }
                if (ptr != IntPtr.Zero)
                {
                    Marshal.FreeHGlobal(ptr);
                }
            }
        }
        catch (Exception e)
        {
            BLog.LogError("Error running: GetRawInputInfo()" + e.Message);
        }
    } 
```

任何正确方向的帮助或指示（双关语）将不胜感激，

谢谢

**- - 更新：**

如果这有任何帮助，这里是调用堆栈：

尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW（味精和味精）

在 System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop（Int32 dwComponentID，Int32 原因，Int32 pvLoopData）

在 System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner（Int32 原因，ApplicationContext 上下文）

在 System.Windows.Forms.Application.ThreadContext.RunMessageLoop（Int32 原因，ApplicationContext 上下文）

在 System.Windows.Forms.Application.RunDialog（窗体）

在 System.Windows.Forms.Form.ShowDialog（IWin32Window 所有者）

在 System.Windows.Forms.Form.ShowDialog()

在 MyApplication.UI.BaseDisplay.ShowDialog（SecurityData 安全，Int32 listViewState，Nullable`1 ticketId，Int32 currentSeatPosition）

我已经按照 Matt 进行了更改，并会查看崩溃是否有任何变化，但可能需要一两天的时间。有时它不会每天都崩溃，但通常每天都有一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:23:41.870

如果应用程序在 Marshal.AllocHGlobal((int)cbSize) 和 Marshal.FreeHGlobal(ptr) 之间的某个地方抛出异常，您最终可能会遇到一些内存问题，最终导致您的应用程序预期崩溃。

为了纠正这种情况，我建议在第一个 if 语句上方声明 IntPtr ptr，然后在 catch 块之后使用 finally 块检查 ptr 变量是否不为空，然后调用 Marshal.FreeHGlobal(ptr)。

虽然这可能会也可能不会解决您的问题，但最好确保始终释放内存。

代码如下所示

```
private void GetRawInputInfo(
        IntPtr rawInputHeader,
        ref IntPtr deviceHandle,
        ref bool handled,
        ref StringBuilder buffer)
    {
        try
        {
            uint cbSize = 0;
            IntPtr hRawInput;
            IntPtr ptr;

            hRawInput = rawInputHeader;

            if (UnsafeNativeMethods.GetRawInputData(
                hRawInput,
                Structures.RAWINPUTDATAUICOMMAND.RID_INPUT,
                IntPtr.Zero,
                ref cbSize,
                (uint)Marshal.SizeOf(typeof(Structures.RAWINPUTHEADER))) == 0)
            {
                ptr = Marshal.AllocHGlobal((int)cbSize);

                if (ptr != IntPtr.Zero &&
                    UnsafeNativeMethods.GetRawInputData(
                    hRawInput,
                    Structures.RAWINPUTDATAUICOMMAND.RID_INPUT,
                    ptr,
                    ref cbSize,
                    (uint)Marshal.SizeOf(typeof(Structures.RAWINPUTHEADER))) == cbSize)
            {

                Structures.RAWINPUT raw = (Structures.RAWINPUT)Marshal.PtrToStructure(ptr, typeof(Structures.RAWINPUT));

                deviceHandle = raw.header.hDevice;
                handled = raw.header.dwType == Structures.RAWINPUTDEVICEDWTYPE.RIM_TYPEKEYBOARD &&
                    raw.keyboard.Message == Messages.WM_KEYDOWN;

                if (handled)
                {
                    byte[] state = new byte[256];

                    // Force the keyboard status cache to update
                    UnsafeNativeMethods.GetKeyState(0);

                    // Note: GetKeyboardState only returns valid state when
                    // the application has focus -- this is why we weren't
                    // getting shift keys when the application was not focused
                    if (UnsafeNativeMethods.GetKeyboardState(state))
                    {
                        //StringBuilder unmanagedBuffer = new StringBuilder(64);

                        if (UnsafeNativeMethods.ToUnicode(
                            raw.keyboard.VKey,
                            raw.keyboard.MakeCode,
                            state,
                            buffer,
                            64,
                            0) <= 0)
                        {
                            buffer.Remove(0, buffer.Length);
                        }
                    }
                }
            }
        }
    }
    catch (Exception e)
    {
        BLog.LogError("Error running: GetRawInputInfo()" + e.Message);
    }
    finally
    {
        if (ptr != IntPtr.Zero)
            Marshal.FreeHGlobal(ptr);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:51:21.593

这有点晚了，但我在 C# 中的 ToUnicode 函数遇到了这个确切的问题。我们从来没有弄清楚如何让函数在不随机崩溃的情况下工作，所以我们像瘟疫一样避免它。

# coldfusion - 多CFML引擎测试环境

> ID：11766672
> 
> 赞同：5
> 
> 时间：2012-08-01T19:59:11.877
> 
> 标签：coldfusion, development-environment, railo, openbd, cfml

有没有人可以在合适的环境中一起设置多个 CFML 引擎及其版本，以交叉测试基于 CFML 的应用程序。

理想情况下，我希望它是基于 Ubuntu 服务器的，因为我将它与 VirtualBox（在 Windows 7 下）一起使用。另外，如果可以在两者之间切换会很有帮助，这样我的笔记本电脑就可以一次处理一个，而不是同时运行所有的。我在考虑以下几点：

*   Adobe ColdFusion 9
*   Adobe ColdFusion 10
*   Railo 3.3.x
*   铁路 4.x
*   开放式BD 2.x

我还想让它们从同一个共享目录中提供服务，因此我不必为每个引擎准备一份代码副本。干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T20:30:58.193

您提到能够“在两者之间切换，因此我的笔记本电脑可以一次处理一台，而不是一次全部运行”，我猜您认为每个人都将在不同的 VM 上运行，或者他们可能需要大量的内存。我认为你不必担心这一点。除非您要求它们位于不同的机器上，否则我认为您可以在一台 VM 和一个 servlet 容器实例（如 Tomcat）上完成所有这些操作。

从高层次的角度来看，这就是我的做法。

1.  安装 Tomcat
2.  为每个引擎创建或下载 .wars。
3.  将所述 .wars 部署到该 Tomcat 实例
4.  设置 Tomcat 以使用来自不同主机名 (server.xml) 的每个 servlet
5.  在 Tomcat 之外为您的一份代码创建一个代码目录
6.  在每个 webapp 中设置一个符号链接，将代码文件夹链接到 servlet

然后，您应该能够通过访问浏览器中的不同主机名从每个引擎中找到相同的源。

我可能会遗漏一些东西。我已经很久没有设置这样的东西了。您可能需要进行大量调整（JVM 设置、切换到 Sun/ORACLE JVM 与 OpenJDK 等）。

我不认为运行这么多引擎会给你带来很大的麻烦。根据我的开发经验，我在 Tomcat 上运行了 3 个 CF9 实例，只使用了 189mb 的 RAM。并且每增加一个实例并没有将这个数字增加 1/3。远不及。如果您可以使用少于 512md 的 RAM 轻松运行所有这些，我不会感到惊讶。如果你的记忆力真的很差，甚至可能是 256mb。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:28:04.433

对于 ColdFusion 10、Railo 和 OpenBD，您将考虑使用独立安装的 Tomcat、Jetty 或 JBoss 进行部署。

ColdFusion 9，可能最简单的解决方案是“企业多服务器配置”设置。

通过这些类型的安装，它们几乎与平台无关。

需要注意的是每个安装使用的 Web 服务器、代理和 jndi 端口，但前提是您希望一次运行多个服务器。

之后，您是否会为从 apache 或 Nginx 代理到服务器实例和您要使用的连接器而烦恼。

不知道这是否有帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T21:11:47.577

既然您提到了 VirtualBox，我将分享我个人处理此任务的方法。它包括几个相当简单的步骤：

1.  将 Ubuntu Server 安装为 VirtualBox 来宾（主机也是 Ubuntu）。
2.  仅设置 JVM 和更新等基本软件。设置虚拟
3.  机器网络作为桥接适配器使用我的 Wi-Fi 连接。
4.  配置我的 Wi-Fi 路由器 DHCP 为虚拟机的 MAC 地址分配静态 IP。
5.  向我的（主机）系统主机添加条目：`ip_assigned_to_vm virtual.ubuntu`
6.  设置来宾添加并将我的 ~/www 目录安装在机器内以访问 Web 应用程序。

现在，当我需要另一台机器进行实验或其他软件配置（我已经以这种方式测试过 ACF 10 和 Railo 4）时，我会做两件事：

1.  *克隆*现有的干净机器。
2.  确保它使用与桥接接口相同的 MAC 地址。

就是这样。

我运行哪台机器都没有关系，它们都可以作为[http://virtual.ubuntu](http://virtual.ubuntu)访问（当然，它需要在客户机上进行适当的 Web 服务器配置）。同时它们是独立的，制作任何我想要的东西并测试在 Ubuntu 上运行的任何东西都是完全安全的。

明显的缺点是我一次只能运行一台机器，而且使用了更多的磁盘空间。对我来说不是问题。

我已经尝试过使用 Tomcat 和多个 WAR 的方法，但它有几个问题：我不能使用不同的 JVM 和 Tomcat 设置，如果我搞砸了设置——所有 Tomcat 主机都已关闭。

希望这可以帮助。

# asp.net - 在转发器控件中查找 Div 或占位符，并向其添加控件

> ID：11766675
> 
> 赞同：0
> 
> 时间：2012-08-01T19:59:26.410
> 
> 标签：asp.net, vb.net

我在某些情况下遇到问题。我有一个中继器控件，里面有一个占位符（为了测试，我已经放置了一个 div 并尝试过）。我想在页面后面的代码中找到该占位符或 div，并将控件放入其中（目前，3 个文本框和 2 个按钮）

我对向占位符添加控件没有任何问题，我了解它是如何工作的，我在这里无法获得的是如何在这里找到这个动态控件。

这里有一些代码片段来帮助说明我正在尝试做的事情。

（ASP）

```
 <asp:Repeater id="rptSpecialNotes" runat="server">
        <ItemTemplate>
            <asp:UpdatePanel ID="udpSpecialNotesRepeater" runat="server">
                <ContentTemplate>
                    <asp:PlaceHolder ID="plhSpecialNotesRepeater" runat="server">
                    </asp:PlaceHolder>
                </ContentTemplate>
            </asp:UpdatePanel>
            <p><%# eval("subject") %></p>
            <div id="specialNotes" runat="server"></div>
            <asp:imagebutton runat="server" AlternateText="add Motion" ImageUrl="images/controls/Exclaim.png" width="40" height="40"></asp:imagebutton>
            <asp:imagebutton runat="server" AlternateText="add document" ImageUrl="images/controls/Documents.png" width="40" height="40"></asp:imagebutton>
            <asp:imagebutton runat="server" AlternateText="move up" ImageUrl="images/controls/Arrow-Up.png" width="40" height="40" CommandName="moveUp" CommandArgument='<%# Container.ItemIndex & "," &  eval("ItemID") %>'></asp:imagebutton>
            <asp:imagebutton runat="server" AlternateText="move down" ImageUrl="images/controls/Arrow-Down.png" width="40" height="40" CommandName="moveDown" CommandArgument='<%# Container.ItemIndex & "," &  eval("ItemID") %>'></asp:imagebutton>
            <asp:imagebutton runat="server" AlternateText="delete" ImageUrl="images/controls/Delete.png" width="40" height="40" CommandName="delete" CommandArgument='<%# Container.ItemIndex & "," &  eval("ItemID") %>'></asp:imagebutton>
            <asp:imagebutton runat="server" AlternateText="edit" ImageUrl="images/controls/Globe.png" width="40" height="40" CommandName="edit" CommandArgument='<%# Container.ItemIndex & "," &  eval("ItemID") %>'></asp:imagebutton>
        </ItemTemplate>
    </asp:Repeater> 
```

图像按钮编辑，点击 rptSpecialNotes_Item 命令，该命令调用一个方法（编辑特殊注释），看起来像这样

```
 Dim commandArguments() As String = Split(e.CommandArgument, ",")
    Dim divId As String = commandArguments(0)
    Dim itemId As String = commandArguments(1)

    'determine action based on command name
    If e.CommandName = "edit" Then
        Call editSpecialNotes(itemId,divId)
    End If 
```

和编辑特别说明是将东西放在给定的divID中。为了让它工作，我给了 divID 一个我知道存在的静态值 (rptSpecialNotes_plhSpecialNotesRepeater_1) 或类似程度的东西。但是，我总是得到一个空对象引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:01:51.837

用于[`FindControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx)在`rptSpecialNotes_Item`事件处理程序中获取嵌套控件 - 这将*返回*控件：

```
sender.FindControl("specialNotes") 
```

它将返回一个`Control`类型，因此如果您想使用该类型的特定属性和方法，则需要对正确的类型进行强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:18:20.627

我不确定，但也许这有帮助：

```
<asp:imagebutton runat="server" AlternateText="edit" ImageUrl="images/controls/Globe.png" width="40" height="40" CommandName="edit" CommandArgument='<%# Container.ClientID & "," &  eval("ItemID") %>'></asp:imagebutton> 
```

同样，对于 FindControl 方法，在 ItemDataBound 事件中；

```
Dim plh As PlaceHolder = e.Item.FindControl("YOURCONTROLID") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:46:58.467

在 rptSpecialNotes_Item 命令事件处理程序中：

```
Dim plh As PlaceHolder = CType(e.Item.FindControl("plhSpecialNotesRepeater"), PlaceHolder)

plh.Controls.Add(lbl) 
```

# oracle - 如果我不使用随机数据对 Oracle 11g 进行压力测试，这是否重要

> ID：11766680
> 
> 赞同：2
> 
> 时间：2012-08-01T19:59:39.457
> 
> 标签：oracle, load-testing, stress-testing

我们需要使用大约 500 万行插入对我们的 Oracle 数据库进行压力测试。根据我们的 DBA，唯一需要不同的列是主键或外键……所有其他列都可以相同。他说，如果我们这样做，那么 Oracle 在插入数据时不会做任何类型的缓存。

我只是想确保他是对的，并且通过这样做，压力测试结果几乎与使用随机数据一样准确。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:26:30.340

在非常有限的情况下，DBA 是正确的。如果您的所有查询都是基于主键和外键的查找，那么它们可能是正确的。过去，当基于规则的优化器为王时，数据并不那么重要。记录计数，是的，但不是真正的数据。

然而，在现实世界中，情况并非如此。你还有其他索引吗？然后数据很重要。您是否加入了除主键/外键之外的其他事物？然后数据很重要。您的字符串都是 1 字节还是 null？我对此表示怀疑，这些变长字段的大小可能会影响IO的数量。基本上，对于非平凡应用程序中的任何非平凡模式，拥有“真实”数据可能很重要。Oracle 优化器在确定如何执行查询时会考虑大量统计信息。

你真的只在这个负载测试中做插入吗？这有点傻。500 万条记录按照现代标准来说是小菜一碟。台式机通常在几秒钟内完成。即使是简单的应用程序也会执行一些选择来进行查找，或者根据非键值获取一组记录。

您似乎很聪明，可以评估 DBA 的陈述。如果你能让他把它写下来，签字，当他的负载测试想法没有按预期工作时，责任落在他身上，那就太好了。不过，听起来你是这个测试的负责人。

如果我站在你的立场上，我会想用尽可能准确的数据进行负载测试。从生产系统或已知测试数据集复制比“随机”更好的选择，并且比“除了主键之外的空值”方法好光年。

# ios - iOS PresentModalViewController 不工作

> ID：11766683
> 
> 赞同：0
> 
> 时间：2012-08-01T19:59:46.940
> 
> 标签：ios, uiviewcontroller

我在根视图控制器中。然后分配第二个viewcontroller

```
 SecondViewControl *second=[[SecondViewControl alloc] init];
         [self presentModalViewController:second animated:NO]; 
```

第二个 viewcontroller 的视图没有出现

AddSubView 方法虽然有效。[self.view addSubView:second.view];

为什么 presetModalViewController 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:03:14.970

通常你会分配`SecondViewControl`一个实际定义用户界面的 .xib 文件。考虑使用这样的行（为便于阅读而中断）：

```
SecondViewControl *second = [[SecondViewControl alloc]
                             initWithNibName:@"SecondView" 
                             bundle:nil]; 
```

如果没有随附的 .xib 来定义视图，您可能会留下一个视图控制器，该控制器没有设置实际支持用户交互所需的属性，因此`presentModalViewController:`可能会遇到麻烦。

# php - PHP 连接到 MS SQL

> ID：11766686
> 
> 赞同：0
> 
> 时间：2012-08-01T19:59:57.407
> 
> 标签：php, sql-server, linux, pdo

我正在运行 Red Hat Enterprise Linux 5（64 位），PHP 版本 5.3.3 配置为：

```
'./configure' '--build=x86_64-redhat-linux-gnu' '--host=x86_64-redhat-linux-gnu' '--target=x86_64-redhat-linux-gnu' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/var/lib' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir=lib64' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear' '--with-bz2' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--with-xpm-dir=/usr' '--enable-gd-native-ttf' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir=/usr' '--with-openssl' '--with-pcre-regex=/usr' '--with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg' '--with-kerberos' '--enable-ucd-snmp-hack' '--enable-shmop' '--enable-calendar' '--without-sqlite' '--with-libxml-dir=/usr' '--enable-xml' '--with-system-tzdata' '--with-apxs2=/usr/sbin/apxs' '--without-mysql' '--without-gd' '--disable-dom' '--disable-dba' '--without-unixODBC' '--disable-pdo' '--disable-xmlreader' '--disable-xmlwriter' '--without-sqlite3' '--disable-phar' '--disable-fileinfo' '--disable-json' '--without-pspell' '--disable-wddx' '--without-curl' '--disable-posix' '--disable-sysvmsg' '--disable-sysvshm' '--disable-sysvsem' 
```

我想（需要）连接到另一台服务器上的 MS SQL 数据库。我曾尝试使用 mssql_connect 但得到“调用未定义函数 mssql_connect() in ...”

我正在为我的 MySQL 连接使用 Zend DB 框架并想使用它，我很累`'adapter' => 'pdo_dblib'`，`'adapter' => 'pdo_mssql'`但只是收到有关未安装驱动程序的错误。

在`'/usr/lib64/php/modules'`我有：

```
curl.so, dom.so, fileinfo.so, gd.so, json.so, mbstring.so, mysqli.so, mysql.so, pdo.so, pdo_sqlite.so, phar.so, sqlite3.so, wddx.so, xmlreader.so, xmlwriter.so, xsl.so, zip.so 
```

任何人都可以给我一些建议吗？我已尽力找到似乎是“启用此扩展程序”的答案……那些不存在的答案！

我有一种感觉，我需要使用 Yum 下载一些文件并更改我的存储库。

非常感谢，大卫

# php - 表单提交 = AdWords 转化

> ID：11766697
> 
> 赞同：1
> 
> 时间：2012-08-01T20:00:30.957
> 
> 标签：php, google-ads-api

提交 html 表单后，我需要记录一次 AdWords 转换。get_support.html 调用contact.php。这是代码的表单部分：

```
 <form method="post" action="contact.php">
    <div class="field">
        <label>WHAT DO YOU NEED HELP WITH?: <span>*</span></label>
        <textarea name="message" class="text textarea" ></textarea>
    </div>
    <div class="field">
        <label>NAME: <span>*</span></label>
        <input type="text" name="name" class="text" />
    </div>
    <div class="field">
        <label>PHONE NUMBER: <span>*</span></label>
        <input type="text" name="phone" class="text" />
    </div>

    <div class="field">
        <label>EMAIL: <span>*</span></label>
        <input type="text" name="email" class="text" />
    </div>

    <div class="field">
        <input type="button" id="send" value="SUBMIT INFO" />
        <div class="loading"></div>
    </div>

</form> 
```

这是contact.php

```
 <?php
//Retrieve form data. 
//GET - user submitted data using AJAX
//POST - in case user does not support javascript, we'll use POST instead
$name = ($_GET['name']) ? $_GET['name'] : $_POST['name'];
$email = ($_GET['email']) ?$_GET['email'] : $_POST['email'];
$message = ($_GET['message']) ?$_GET['message'] : $_POST['message'];

//flag to indicate which method it uses. If POST set it to 1
if ($_POST) $post=1;

//Simple server side validation for POST data, of course, you should validate the email
if (!$name) $errors[count($errors)] = 'Please enter your telephone.';
if (!$email) $errors[count($errors)] = 'Please enter your email.'; 
if (!$message) $errors[count($errors)] = 'Please enter your message.'; 

//if the errors array is empty, send the mail
if (!$errors) {

    // ====== Your mail here  ====== //
    $to = 'US TECH SUPPORT <ustechsupport@techsupportheroes.com>';  
    //sender
    $from = $name . ' <' . $email . '>';

    //subject and the html message
    $subject = 'FORM-SUBMISSION-VIRUSREMOVALHEROES.COM';    
    $message = '
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head></head>
    <body>
    <table>
        <tr><td>Phone:</td><td>' . $name . '</td></tr>
        <tr><td>Email:</td><td>' . $email . '</td></tr>
        <tr><td>Message:</td><td>' . nl2br($message) . '</td></tr>
    </table>
    </body>
    </html>';

    //send the mail
    $result = sendmail($to, $subject, $message, $from);

    //if POST was used, display the message straight away
    if ($_POST) {
        if ($result) echo 'Help is on the way! We have received your message.';
        else echo 'Sorry, unexpected error. Please try again later';

    //else if GET was used, return the boolean value so that 
    //ajax script can react accordingly
    //1 means success, 0 means failed
    } else {
        echo $result;   
    }

//if the errors array has values
} else {}

//Simple mail function with HTML header
function sendmail($to, $subject, $message, $from) {
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= 'From: ' . $from . "\r\n";

    $result = mail($to,$subject,$message,$headers);

    if ($result) return 1;

    else return 0;  
}

?> 
```

以及来自 Google 的用于我的表单填写的转换代码

```
echo '<!-- Google Code for Form Submission Conversion Page --> 
<script type="text/javascript"> 
/* <![CDATA[ */ 
var google_conversion_id = 1004137309; 
var google_conversion_language = "en"; 
var google_conversion_format = "3"; 
var google_conversion_color = "ffffff"; 
var google_conversion_label = "H1HvCNOWswQQ3dbn3gM"; 
var google_conversion_value = 0; 
/* ]]> */ 
</script> 
<script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js&amp;quot;&amp;gt; 
</script> 
<noscript> 
<div style="display:inline;"> 
<img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/pagead/conversion/1004137309/?value=0&amp;amp;amp;label=H1HvCNOWswQQ3dbn3gM&amp;amp;amp;guid=ON&amp;amp;amp;script=0&amp;quot;/&amp;gt; 
</div> 
</noscript>'; 
```

我对此进行了研究，但无法弄清楚如何解决问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T06:36:41.613

Google Adwords 转换代码通过将转换跟踪代码放在“谢谢”页面上来工作。提交表单后，将用户引导至感谢页面。将您的转化跟踪代码放在此页面的源代码中，您将开始注册转化。由于用户访问此页面的唯一合乎逻辑的方式是提交一份填妥的联系表格。

此外，请确保除了提交表单（使用机器人并从现场所有其他页面取消链接）之外，没有其他方法可以访问此页面

# jquery - 加载图像/内容后从外部 URL 加载内容

> ID：11766700
> 
> 赞同：0
> 
> 时间：2012-08-01T20:01:04.723
> 
> 标签：jquery, ajax, html, image-processing

我正在尝试使用 pushstate/html5 从另一个 url 加载内容...我尝试加载的内容有一个很大的背景图像，需要时间来加载...

因此，当它动画快速完整图像似乎出现并滑入但随后图像再次重新加载......

我尝试使用

```
image preloader/
$(document).ready() 
```

他们都破坏了脚本，似乎无法弄清楚如何在这里加入它

```
 function goTo(href) {

    var left = $(window).width();
    $('#id').css("left", left);

    $.ajax({
        url: href,
        success: function (data) {

            var content = $(data).find('#id').html();

            // Windows Load Function
            $(window).load(function () {

                $("#id").html(content).animate({
                    left: '0',
                }, 'fast');

                var title = $('#id').find('h1').text();
                $('head').find('title').text(title);

            });
        }
    });
}

// check for support before we move ahead

if (typeof history.pushState !== "undefined") {
    var historyCount = 0;

    // On click of link Load content and animate
    $('.access a').live('click', function () {

        var href = $(this).attr('href');

        goTo(href);

        history.pushState(null, null, href);
        return false;
    });

    window.onpopstate = function () {
        if (historyCount) {
            goTo(document.location);
        }
        historyCount = historyCount + 1;
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:05:42.097

`$(window).load()`如果您想`$(document).ready()`等到所有内容和图像都加载完毕，您需要这样做。

所以你可能想要这样的东西：

```
$(window).load(function() {
    $('some element').css('background-image', 'url(big-background-image-file)');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:00:59.300

基督山，

我认为这是最好的解决[方案 Deferreds](http://api.jquery.com/category/deferred-object/)。

`goTo()`在下面的代码中，一个 Deferred 对象作为第二个参数传递给`animator`. `goTo()`当所有具有类的图像`imgSelector`都已加载时，此 Deferred 将在内部解决。在动画的分辨率上`animator`触发并且页面的标题被改变。

在外部创建`animator`并将其传递给`goTo()`允许此 Deferred 在被调用的范围内被拒绝`goTo()`。如果在动画触发之前发生另一个 click 或 popstate 事件，则包含此功能以禁止动画。

为了使这个工作，您需要为每个内容页面提供一个虚拟的离屏前景`<img>`，与`src`有问题的大背景图像和`class="critical"`. 这是在加载背景图像时触发事件的最简单方法。

```
$(function() {
    var $id = $("#id");
    var imgClass = 'critical';
    function goTo(href, animator) {
        $id.stop().css("left", $(window).width());
        $.ajax({
            url: href,
            success: function(data) {
                var deferreds = [];
                $id.html($(data).find('#id').html());
                $("img." + imgClass, $id).each(function() {
                    var d = new $.Deferred();
                    deferreds.push(d);
                    $(this).on('load error', function(){
                        d.resolve();
                    });
                });
                $.when.apply(null, deferreds).done(function() {
                    animator.resolve();
                });
                $.when(animator).done(function() {
                    $id.animate({
                        left: '0',
                    }, 'fast');
                    $('head title').text($('h1', $id).text());
                });
            }
        });
    }

    var historyCount = 0,
        animator = null;

    function getDeferred() {
        if(animator) {
            animator.reject();
        }
        animator = new $.Deferred();
        return animator;
    };

    if (typeof history.pushState !== "undefined") {
        $('.access a').live('click', function() {
            var href = $(this).attr('href');
            goTo(href, getDeferred());
            history.pushState(null, null, href);
            return false;
        });
        window.onpopstate = function() {
            if(historyCount) {
                goTo(document.location, getDeferred());
            }
            historyCount++;
        };
    }
}); 
```

*未经测试*

您可能需要调试和/或修改代码以获得您想要的。

# c# - 如何判断是通过关闭按钮关闭还是通过 WPF 中的 Application.Shutdown 关闭？

> ID：11766713
> 
> 赞同：3
> 
> 时间：2012-08-01T20:01:38.920
> 
> 标签：c#, wpf

我添加了标准代码“您确定要退出吗？” `this.Closing` 我的主窗口事件中的消息。

它可以按预期从 gui 关闭，但是我想在应用程序通过关闭时**禁用**此检查`Application.Shutdown()`。

在窗口关闭之前触发中没有事件，`Application`并且无法覆盖 Shutdown 方法。

如何检测导致关闭窗口的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:08:49.190

免责声明：如果可以的话，我会把它作为评论而不是答案，因为它是一个肮脏的黑客（不是一个干净的黑客）。但是，如果您真的需要某些东西并且没有更好的解决方案出现，我无论如何都会发布它以希望对您有所帮助......

如果您绝对无法控制/挂钩调用应用程序关闭的代码库部分，那么可能会找到其他响应关闭的东西，您可以在窗口关闭之前触发它。

我（不太理想）的想法是设置另一个隐藏窗口（[SO：加载 WPF 窗口而不显示它](https://stackoverflow.com/questions/1399037/loading-a-wpf-window-without-showing-it "加载 wpf 窗口而不显示它")），用户不会与之交互，但应用程序将在关机时关闭。

在该窗口的关闭事件中，您可以设置一个标志来指示应用程序正在关闭。然后在主窗口的关闭事件中，您可以对该标志做出反应。

要解决的大问题是配置事物，以便隐藏窗口始终在主窗口之前安全关闭。

我使用 MainWindow.Xaml 作为应用程序 Startupuri 进行了一些有限的测试，并从 application.onstartup 事件创建隐藏窗口，发现隐藏窗口将首先关闭 - 但我不想在所有场景中保证这一点！实际上让这个工作和充分测试可能是很多工作 - 正如我所说的，这是最后一次恢复肮脏的黑客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:05:56.793

谁打电话`Application.Shutdown()`？如果您负责，只需设置一个标志，表明您已完成此操作，并在`Closing`事件处理程序中检查该标志。

# extjs4 - 着色每个网格单元 extJS4

> ID：11766716
> 
> 赞同：0
> 
> 时间：2012-08-01T20:01:50.870
> 
> 标签：extjs4

> **可能重复：**
> [ExtJS4 中网格面板的颜色图例](https://stackoverflow.com/questions/11767469/color-legend-for-grid-panel-in-extjs4)

我有一个要求，即网格中的每个单元格都可以根据某些标准从可用的 8 种颜色中提取任何颜色。为了实现这一点，我在列中使用了“renderer”函数并将元属性的 tdCls 设置为 css 类，但它不起作用。有人可以帮我解决这个问题。

请在下面找到示例代码。

/** 包含网格面板的视图类*/

```
Ext.define('xxx.xxx.TestView', {
extend:'Ext.grid.Panel',

  columns:[{
    header:'A', 
    dataIndex:'a', 
    flex:1,
    //rendering function here
    renderer:function(value, metaData, record, rowIndex, colIndex, store) {       
       var cssClass = 'norepl';
       if(value != null && value != ' ') {
             var t = record.get('xxx');
             t = (t.substr(2,t.indexOf('-')-2))%8;
             cssClass = "replgrp"+t;
       }
       metaData.tdCls += cssClass; //attaching css property to tdCls of meta
       return value;
     }   
  }    
}); 
```

/** 8 个用于着色的 css 类*/

```
.replgrp0 .x-grid-cell {
background-color: #f0f6ff;
color: #09d6ff;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp1 .x-grid-cell {
background-color: rgba(255, 183, 189, 0.22);
color: #900;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp2 .x-grid-cell {
background-color: #e2ffe2;
color: #090;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp3 .x-grid-cell {
background-color: rgba(255, 233, 228, 0.12);
color: #99890e;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp4 .x-grid-cell {
background-color: rgba(186, 242, 250, 0.10);
color: #1a4f99;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp5 .x-grid-cell {
background-color: rgba(255, 242, 239, 0.23);
color: #ff7f00;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp6 .x-grid-cell {
background-color: rgba(228, 224, 255, 0.7);
color: rgba(29, 7, 255, 0.60);
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.replgrp7 .x-grid-cell {
background-color: rgba(255, 233, 228, 0.32);
color: rgba(255, 22, 12, 0.65);
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.norepl .x-grid-cell {
background-color: rgb(255, 255, 255);
color: rgb(255, 127, 0);
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
} 
```

谢谢和问候， Nari

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:10:04.940

我似乎记得做过类似的事情

```
 renderer:function(value, metaData, record, rowIndex, colIndex, store){
 if(value != null && value != ' ') {
         var t = record.get('xxx');
         t = (t.substr(2,t.indexOf('-')-2))%8;
         cssClass = "replgrp"+t;
         value="<div class="+cssClass+">"+value+"</div>
   }
  return value; 
```

不过，这可能是错误的方法:)

# php - 将波斯/阿拉伯数字转换为英文数字

> ID：11766726
> 
> 赞同：56
> 
> 时间：2012-08-01T20:02:20.977
> 
> 标签：php, unicode

如何使用简单的函数 将**波斯/阿拉伯数字**转换为**英文数字？**

***波斯/阿拉伯数字：***

```
۰   //  -> 0
۱   //  -> 1
۲   //  -> 2
۳   //  -> 3
۴   //  -> 4
۵   //  -> 5
۶   //  -> 6
۷   //  -> 7
۸   //  -> 8
۹   //  -> 9 
```

unicode 上的数字：

```
$num0="&#1776;";
$num1="&#1777;";
$num2="&#1778;";
$num3="&#1779;";
$num4="&#1780;";
$num5="&#1781;";
$num6="&#1782;";
$num7="&#1783;";
$num8="&#1784;";
$num9="&#1785;"; 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-01T20:20:56.637

这是一个简短的功能：

```
function convert($string) {
    $persian = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
    $arabic = ['٩', '٨', '٧', '٦', '٥', '٤', '٣', '٢', '١','٠'];

    $num = range(0, 9);
    $convertedPersianNums = str_replace($persian, $num, $string);
    $englishNumbersOnly = str_replace($arabic, $num, $convertedPersianNums);

    return $englishNumbersOnly;
} 
```

您可以使用 unicode 代替`$persian`（我认为）中的字符。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-08-21T16:51:31.193

我使用这个功能。它将波斯语和阿拉伯语数字转换为英语：

```
function faTOen($string) {
    return strtr($string, array('۰'=>'0', '۱'=>'1', '۲'=>'2', '۳'=>'3', '۴'=>'4', '۵'=>'5', '۶'=>'6', '۷'=>'7', '۸'=>'8', '۹'=>'9', '٠'=>'0', '١'=>'1', '٢'=>'2', '٣'=>'3', '٤'=>'4', '٥'=>'5', '٦'=>'6', '٧'=>'7', '٨'=>'8', '٩'=>'9'));
} 
```

样本：

```
echo faTOen("۰۱۲۳۴۵۶۷۸۹٠١٢٣٤٥٦٧٨٩"); // 01234567890123456789 
```

您也可以用同样的方式将英语转换为波斯语：

```
function enToFa($string) {
    return strtr($string, array('0'=>'۰','1'=>'۱','2'=>'۲','3'=>'۳','4'=>'۴','5'=>'۵','6'=>'۶','7'=>'۷','8'=>'۸','9'=>'۹'));
} 
```

或英语到阿拉伯语：

```
function enToAr($string) {
    return strtr($string, array('0'=>'٠','1'=>'١','2'=>'٢','3'=>'٣','4'=>'٤','5'=>'٥','6'=>'٦','7'=>'٧','8'=>'٨','9'=>'٩'));
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-09-23T06:08:15.190

> 因为波斯语和阿拉伯语地区的人们可能会使用其他键盘类型，所以这是转换两种类型的完整解决方案。

基于@palladium 的回答。

```
function convert2english($string) {
    $newNumbers = range(0, 9);
    // 1\. Persian HTML decimal
    $persianDecimal = array('&#1776;', '&#1777;', '&#1778;', '&#1779;', '&#1780;', '&#1781;', '&#1782;', '&#1783;', '&#1784;', '&#1785;');
    // 2\. Arabic HTML decimal
    $arabicDecimal = array('&#1632;', '&#1633;', '&#1634;', '&#1635;', '&#1636;', '&#1637;', '&#1638;', '&#1639;', '&#1640;', '&#1641;');
    // 3\. Arabic Numeric
    $arabic = array('٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩');
    // 4\. Persian Numeric
    $persian = array('۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹');

    $string =  str_replace($persianDecimal, $newNumbers, $string);
    $string =  str_replace($arabicDecimal, $newNumbers, $string);
    $string =  str_replace($arabic, $newNumbers, $string);
    return str_replace($persian, $newNumbers, $string);
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-03-07T14:31:50.137

这个更好。我们有两种阿拉伯文和波斯文数字。我们必须改变一切。

```
function convert($string) {
    $persinaDigits1= array('۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹');
    $persinaDigits2= array('٩', '٨', '٧', '٦', '٥', '٤', '٣', '٢', '١', '٠');
    $allPersianDigits=array_merge($persinaDigits1, $persinaDigits2);
    $replaces = array('0','1','2','3','4','5','6','7','8','9','0','1','2','3','4','5','6','7','8','9');
    return str_replace($allPersianDigits, $replaces , $string);
} 
```

*谢谢@Palladium*

复制代码时要小心！检查两次数组在编辑器中的显示方式，否则您将遇到麻烦！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-01T20:11:38.170

```
$fmt = numfmt_create('fa', NumberFormatter::DECIMAL);
echo numfmt_parse($fmt, "۵") . "\n";
// 5 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-01-06T14:16:11.520

要将所有波斯数字转换为英文格式，您可以使用此功能：

```
function Convertnumber2english($srting) {

        $srting = str_replace('۰', '0', $srting);
        $srting = str_replace('۱', '1', $srting);
        $srting = str_replace('۲', '2', $srting);
        $srting = str_replace('۳', '3', $srting);
        $srting = str_replace('۴', '4', $srting);
        $srting = str_replace('۵', '5', $srting);
        $srting = str_replace('۶', '6', $srting);
        $srting = str_replace('۷', '7', $srting);
        $srting = str_replace('۸', '8', $srting);
        $srting = str_replace('۹', '9', $srting);

        return $srting;
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-24T09:48:29.057

**两个有用的功能：**

先转换成英文数字：

```
function convert_to_en_number($string) {
    $persian = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
    $arabic = ['٩', '٨', '٧', '٦', '٥', '٤', '٣', '٢', '١','٠'];

    $num = range(0, 9);
    $convertedPersianNums = str_replace($persian, $num, $string);
    $englishNumbersOnly = str_replace($arabic, $num, $convertedPersianNums);

    return $englishNumbersOnly;
} 
```

第二次转换为波斯数字：

```
function convert_to_fa_number($string) {
    $num = range(0, 9);
    $arabic = ['٩', '٨', '٧', '٦', '٥', '٤', '٣', '٢', '١','٠'];
    $persian = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];

    $convertedEnglishNums = str_replace($num, $persian, $string);
    $persianNumbersOnly = str_replace($arabic, $persian, $convertedEnglishNums);

    return $persianNumbersOnly;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-24T13:34:55.270

使用以下函数将**阿拉伯数字转换为英文**数字的非常简单的方法：

```
function ArtoEnNumeric($string) {
    return strtr($string, array('۰'=>'0', '۱'=>'1', '۲'=>'2', '۳'=>'3', '۴'=>'4', '۵'=>'5', '۶'=>'6', '۷'=>'7', '۸'=>'8', '۹'=>'9', '٠'=>'0', '١'=>'1', '٢'=>'2', '٣'=>'3', '٤'=>'4', '٥'=>'5', '٦'=>'6', '٧'=>'7', '٨'=>'8', '٩'=>'9'));
}

echo ArtoEnNumeric('۶۰۶۳١۶۳٨'); 
Output = 60631638 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-18T17:31:12.107

我知道这是一个已有六年历史的问题，但我只是遇到了这个问题并开发了一个通用的解决方案，我想在这里分享给未来的读者。

基本上，我使用[NumberFormatter](http://php.net/manual/en/class.numberformatter.php)生成任何外语的数字，然后将输入字符串中的数字替换为英语中的数字。

它应该适用于任何语言，但我是用阿拉伯语写的。

```
/**
 * Replace Arabic numbers by English numbers in a string
 *
 * @param $value string A string containing Arabic numbers.
 * @param $source_language string The locale to convert chars from.
 *
 * @return string The string with Arabic numbers replaced by English numbers
 */
function englishifyNumbers ($value, $source_language = 'ar') {
    // Remove any direction overriding chars [LRO (U+202D)]
    $value = trim($value);

    // Create an Arabic number formatter to generate Arabic numbers
    $fmt = new \NumberFormatter(
        $source_language, 
        \NumberFormatter::PATTERN_DECIMAL
    );

    // Create an array of English numbers to use for replacement
    $english_numbers = range(0, 9);

    // Convert the English numbers to Arabic numbers using the formatter
    $arabic_numbers = array_map(function ($n) use ($fmt) {
        // Trim to remove direction overriding chars [PDF (U+202C)]
        return trim($fmt->format($n));

    }, $english_numbers);

    // Replace the numbers and return the result
    return str_replace($arabic_numbers, $english_numbers, $value);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-04T11:28:12.697

```
$sting= '٩٨٥٤٠٣٧٦٣٢١'; 

// search stings
$seachstrings = array("١", "٢", "٣", "٤", "٥", "٦", "٧", "٨", "٩", "٠"); 

// replace strings 
$replacestrings= array("1", "2", "3", "4", "5", "6", "7", "8", "9", "0"); 

// replace function 
$result= str_replace($seachstrings , $replacestrings, $sting); 

print_r($result); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-01T20:16:58.450

使用某种替换可能是一个更好的答案，但是对于自己编码，这会比你拥有的更好：

```
$len = strlen($arabic);
for ( $i = 0; $i < $len; ++$i )
{
    switch( $arabic[$i] )
    {
    case '&#1776':
        $english .= '0';
        break;
    case '&#1777':
        $english .= '1';
        break;
    case '&#1778':
        $english .= '2';
        break;
    // and so on
    case '&#1785':
        $english .= '9';
        break;
    default:
        $english .= $arabic[$i];
    }
} 
```

那应该这样做。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-01T20:17:06.970

像这样的东西怎么样...

```
$number = arbic_to_english("&#1777;&#1779;");

echo $number; // 13

function arbic_to_english($number) {
    $english_number = 0;
    $matches = array();
    preg_match_all('/&#\d{4};/', $number, $matches);
    if(!count($matches) || !count($matches[0])) {
        throw new Exception('Invalid number');
    }
    $power = count($matches[0]) - 1;
    foreach($matches[0] as $arbic_digit) {
        $english_digit = preg_replace('/&#\d{2}(\d{2});/', '$1', $arbic_digit) - 76;
        $english_number += $english_digit * pow(10, $power--);
    }
    return $english_number;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-13T08:51:50.053

无需分割输入字符串。

```
private function convert($input)
{
    $unicode = array('۰', '۱', '۲', '۳', '٤', '٥', '٦', '۷', '۸', '۹');
    $english = array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9');

    $string = str_replace($unicode, $english , $input);

    return $string;
} 
```

例子

```
convert("۱۲۳٤٥");   //output : 12345

convert("۱۲34٥");   //output : 12345

convert("12345");   //output : 12345 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-27T17:39:28.357

最好的方法是使用[NumberFormatter](https://www.php.net/manual/en/numberformatter.create.php)：

```
$formatter = \NumberFormatter::create('en', \NumberFormatter::DECIMAL);
echo $formatter->parse('۱۳۹۹'); // outputs: 1399 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-18T23:47:16.547

这是一个函数，它接受一个字符串和零的源语言和零的目标语言

在下面的示例中，我将给定字符串的数字从印地语转换为拉丁语

```
val = LangNum2Num("जिनसे आप कुछ ९० सीख सकते ३४ हैं हम लाये हैं ७ आपके लिये कुछ", "०", 0)
console.log(val)
// Prints जिनसे आप कुछ 90 सीख सकते 34 हैं हम लाये हैं 7 आपके लिये कुछ

// Coverts numbers insides a string to other language number
// str is the string
// zeroFrom is the zero number from the language you want to convert
// zeroTo is the zero number of the languague you want to convert to

function LangNum2Num(str, zeroFrom, zeroTo) {
  // Get the UTF-16 code points of zeros
  codezeroFrom = ("" + zeroFrom).codePointAt(0)
  codezeroTo = ("" + zeroTo).codePointAt(0)

  // Make array containing codepoints from 0 to 10 for the language
  var FromArr = [...Array(10).keys()].map(e => codezeroFrom + e)
  var ToArr = [...Array(10).keys()].map(e => codezeroTo + e)

  // Split the string into array, if we catch a number, we will return number from destination language
  return str.split('').map(e => FromArr.includes(e.codePointAt(0)) ? String.fromCodePoint(ToArr[FromArr.indexOf(e.codePointAt(0))]) : e).join('')

}
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-30T17:32:23.433

我使用了这个功能

```
function toEngNumbers($string)
{
    $arabic = ['٩', '٨', '٧', '٦', '٥', '٤', '٣', '٢', '١', '٠'];
    $persian = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
    $english = ['9', '8', '7', '6', '5', '4', '3', '2', '1', '0'];

    $convertedPersianNums = str_replace($persian, $english, $string);
    $converted = str_replace($arabic, $english, $convertedPersianNums);
    return $converted;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-14T16:12:29.347

基于@Root 答案：

```
function to_english_number( $string ) {

    $persianDecimal = [ '&#1776;', '&#1777;', '&#1778;', '&#1779;', '&#1780;', '&#1781;', '&#1782;', '&#1783;', '&#1784;', '&#1785;' ];
    $arabicDecimal  = [ '&#1632;', '&#1633;', '&#1634;', '&#1635;', '&#1636;', '&#1637;', '&#1638;', '&#1639;', '&#1640;', '&#1641;' ];

    $persian = [ '۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹' ];
    $arabic  = [ '٩', '٨', '٧', '٦', '٥', '٤', '٣', '٢', '١', '٠' ];

    $num = range( 0, 9 );

    $string = str_replace( $persianDecimal, $num, $string );
    $string = str_replace( $arabicDecimal, $num, $string );

    $string = str_replace( $persian, $num, $string );
    $string = str_replace( $arabic, $num, $string );

    return $string;
} 
```

# javascript - Zynga Scroller - 为可滚动区域设置起始偏移量

> ID：11766731
> 
> 赞同：3
> 
> 时间：2012-08-01T20:02:42.490
> 
> 标签：javascript, ios, scroll, transform, translate3d

有人熟悉[Zynga Scroller](https://github.com/zynga/scroller) JS 库吗？

如何为可滚动区域设置默认偏移量？

我使用以下方法设置元素的 CSS：

```
-webkit-transform' : 'translate3d(200px, 0px, 0) scale(1) 
```

假设我想要可滚动区域的偏移量为 200 像素，但代码在页面加载时会覆盖它，并快速回到 0 像素。当我硬编码 200px 偏移时，它会认为 200px 是起始位置并像边缘一样反弹回来。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:43:15.573

我在某种程度上遇到了同样的问题，我将在下面描述它以及解决方案。

我在一个元素大小相等的“无限水平滚动条”上工作。这个想法是您在 DOM 中将只有 nrVisibleElements + 2 个元素。1 在您的滚动窗口之前，第二个在它之后。第一个和最后一个元素根据移动方向交换。您可以在此处找到该库：[https ://github.com/bedeabza/JS-Infinite-Scroller](https://github.com/bedeabza/JS-Infinite-Scroller)

现在，我想对元素使用捕捉，但如果我激活捕捉，ZyngaScroller 将在我附加交换的元素之前捕捉，因为它认为我的容器将结束。这就是为什么我使用 setDimensions() 方法向它报告一个更大的容器 (1000 * actualDimension) 并使用 500 * actualDimension 偏移我的尺寸处理。

基本上每次我在 DOM 上设置实际变换时，我都会使用以下方法对其进行偏移：

```
offset: function (left) {
    return left + this.offsetValue;
}, 
```

left 是 ZyngaScroller 报告的左侧。

# java - DataNucleus JDO 实现中的复合键（字段 jdoStateManager）

> ID：11766732
> 
> 赞同：1
> 
> 时间：2012-08-01T20:02:43.893
> 
> 标签：java, key, jdo, datanucleus, composite

我正在尝试为名为 Item 的 JDO 实体创建一个 PK 类。JPA 非常简单，但现在我正在练习 JDO。我正在使用注释配置，这就是这两个类的样子：

```
 @PersistenceCapable(table="ITEM",identityType = IdentityType.APPLICATION,
    objectIdClass = ItemPK.class,schema="mgr") 
    public class Item {

        @PrimaryKey
        @Persistent(column="code")
        private long code; //WHY public?

        @PrimaryKey
        @Persistent(column="producer")
        private String producer;

        @PrimaryKey
        @Embedded
        private ItemPK id;

        @Persistent(column="price")
        private double price;

        @Persistent(column="name")
        private String name;

        @Persistent(column="description")
        private String description; 

            [... getters/setters...]
    } 
```

我希望将 ItemPK 类用作具有两列（代码、生产者）的主键类。所以这就是这个类的样子：

```
 @EmbeddedOnly
    @PersistenceCapable(embeddedOnly="true",identityType=IdentityType.APPLICATION)
    public class ItemPK implements Serializable{

        @Persistent
        @PrimaryKey
        public long code;

        @Persistent
        @PrimaryKey
        public String producer;

        @Override
        public String toString() {
                return code+"_"+producer;
        }

        @Override
        public int hashCode() {
        [...Eclipse autogenerated...]
        }

        @Override
            public boolean equals(Object obj) {
        [...Eclipse autogenerated...]
        }
        } 
```

尝试运行代码后得到的结果：

```
[...Caused  by]
Nested Throwables StackTrace:
Class pl.edu.pw.mini.entity.jdo.Item has been specified with an object-id class pl.edu.pw.mini.entity.jdo.ItemPK which has a field jdoStateManager which isnt Serializable. All non static fields of an objectId class must be serializable.
org.datanucleus.metadata.InvalidPrimaryKeyException: Class pl.edu.pw.mini.entity.jdo.Item has been specified with an object-id class pl.edu.pw.mini.entity.jdo.ItemPK which has a field jdoStateManager which isnt Serializable. All non static fields of an objectId class must be serializable. 
```

据我了解，增强器将 jdoStateManager 添加到 ItemPK，广告它不可序列化。但是由于 ItemPK 是嵌入的，要么它不应该获取 jdoStateManager，要么 JDO 应该知道 jdoStateManager 和常规字段之间的区别。为 2 列主键获取嵌入式类我做错了什么

我不知道如何使这件事起作用，谁能帮助我，并告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:23:33.210

文档很好地定义了如何做到这一点 [http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/compound_identity.html](http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/compound_identity.html) 并且不涉及使用@Embedded

# symfony1 - Breadcrumbs Symfony

> ID：11766735
> 
> 赞同：1
> 
> 时间：2012-08-01T20:02:48.823
> 
> 标签：symfony1, breadcrumbs

I'm using an old version of symfony 1.0.11

```
 slot('breadcrumbs');
  include_component('page','breadcrumbs',array('past_pages'=>array(
      '/module/action/parameter/value'=>'Home ')));
  end_slot(); 
```

The problem with this code is that parameter and value do not get passed, so If i click on home i get /module/action but the parameters are not being passed. Any suggestions?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:31:20.290

There is also a way automatically set the breadcrumbs this is in the breadcrumbs actions:

```
// Get the full path without get parameters
$fullPath = $request->getPathInfo();

// get the get parameters
$urlParams = $request->getGetParameters();

// set get parameters as string for url
$this->extend = "";
foreach ($urlParams as $key => $urlParam) {
   if (empty($this->extend)) {
      $this->extend = "?";
   }
   this->extend .= $key."=".$urlParam;
}

// Get the URL path and Explode by /
$paths = explode('/', $fullPath);;
$this->paths = $paths; 
```

then in the component itself, you can foreach through the paths and if empty just continue. And always give the GET variables with the link if the browser has some.

```
<a href="<?php echo url_for("home").$extend; ?>">Home</a>
<?php foreach($paths as $path): 
   if(empty($path))
        continue;

    if(empty($fullPath))
        $fullPath = "";

    $fullPath .= "/".$path.$extend;
    $path = str_replace("-", " ", $path);
?>
<?php if(key($paths->getRawValue()) != (count($paths)-1)): ?>
    <a href="<?php echo $fullPath; ?>"><?php echo ucwords($path); ?></a>
<?php else: ?>
    <span><?php echo ucwords($path); ?></span>
<?php endif; ?> 
```

This way you never have to set your breadcrumbs if you have a correct url structure.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:17:19.317

the way i fixed it is

```
include_component('page','breadcrumbs',array('past_pages'=>array(
  '/module/action?parameter=value'=>'Home '))); 
```

# jquery - jQuery 放大/缩小 MouseOver/MouseOut 上的特定图像

> ID：11766739
> 
> 赞同：0
> 
> 时间：2012-08-01T20:03:10.130
> 
> 标签：jquery

我将此代码与 jquery 一起使用来放大或隐藏 HOVER 上的图像（图像）。

该脚本工作得很好，除了如果用户非常快速地移动图像上的光标，脚本会不断放大图像。

所以我想避免这种情况并有办法正确停止动画。知道如何解决这个问题吗？非常感谢！

```
// Enlarge/Shrink a specific image on MouseOver/MouseOut
            $('#photos').find('img').hover(function() {
                // Get size for selecte image
                $this = $(this);
                originalWidth = $this.width();
                originalHeight = $this.height();
                scale = 20;
                speed = 250;
                newWidth = originalWidth + originalWidth/100*scale;
                newHeight = originalHeight + originalHeight/100*scale;
                $this.animate({         // Enlarge image on MouseOver
                    width : newWidth,
                    height : newHeight
                    },speed);
                }, function () {        // Shrink image on MouseOut
                $this.animate({
                    width : originalWidth,
                    height: originalHeight
                    },speed);
            }); // end hover 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:14:11.757

你应该用css来做。试试这个：

```
<style>
    #photos img {
        width: 100%;
        height: 100%;
        transition: width 2s, height 2s, transform 2s;
        -moz-transition: width 2s, height 2s, -moz-transform 2s;
        -webkit-transition: width 2s, height 2s, -webkit-transform 2s;
        -o-transition: width 2s, height 2s,-o-transform 2s;
    }
    #photos img:hover {
        width: 200%;
        height:200%;
    }
</style>
<div id="photos">
<img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:13:05.447

我在这里使用 .stop() 函数解决了这个问题`.stop()` ，它只是在开始一个新动画之前结束 img 上的任何动画，并防止多个动画在队列中堆积。

```
// Enlarge/Shrink a specific image on MouseOver/MouseOut
        $('#photos').find('img').hover(function() {
            // Get size for selecte image
            $this = $(this);
            originalWidth = $this.width();
            originalHeight = $this.height();
            scale = 20;
            speed = 250;
            newWidth = originalWidth + originalWidth/100*scale;
            newHeight = originalHeight + originalHeight/100*scale;
            $this.stop().animate({          // Enlarge image on MouseOver
                width : newWidth,
                height : newHeight
                },speed);
            }, function () {        // Shrink image on MouseOut
            $this.stop().animate({
                width : originalWidth,
                height: originalHeight
                },speed);
        }); // end hover 
```

# java - 将 ZipEntry 复制到新 ZipFile 的惯用方法是什么？

> ID：11766741
> 
> 赞同：3
> 
> 时间：2012-08-01T20:03:23.283
> 
> 标签：java, copy, zip, docx

我正在编写一个工具来在 DOCX 文件中进行一些小的文本替换，这是一种压缩格式。我的方法是`ZipEntry`使用`ZipOutputStream`. 对于大多数 DOCX 文件，这工作得很好，但偶尔我会遇到`ZipException`关于我编写的内容与包含在其中的元信息之间的差异`ZipEntry`（通常是压缩大小的差异）。

这是我用来复制内容的代码。为简洁起见，我去掉了错误处理和文档处理；到目前为止，我还没有遇到文档条目的问题。

```
ZipFile         original = new ZipFile(INPUT_FILENAME);
ZipOutputStream outputStream = new ZipOutputStream(new FileOutputStream(OUTPUT_FILE));
Enumeration     entries = original.entries();
byte[]          buffer = new byte[512];
while (entries.hasMoreElements()) {
    ZipEntry    entry = (ZipEntry)entries.nextElement();
    if  ("word/document.xml".equalsIgnoreCase(entry.getName())) {
        //perform special processing
    }
    else{
        outputStream.putNextEntry(entry);
        InputStream in = original.getInputStream(entry);
        while (0 < in.available()){
            int read = in.read(buffer);
            outputStream.write(buffer,0,read);
        }
        in.close();
    }
    outputStream.closeEntry();
}
outputStream.close(); 
```

`ZipEntry`将对象从一个对象直接复制`ZipFile`到另一个对象的正确或惯用方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T14:56:40.830

我找到了避免错误的解决方法。通过创建一个`ZipEntry`仅包含名称字段集的新内容，我可以毫无问题地复制内容。

```
ZipFile         original = new ZipFile(INPUT_FILENAME);
ZipOutputStream outputStream = new ZipOutputStream(new FileOutputStream(OUTPUT_FILE));
Enumeration     entries = original.entries();
byte[]          buffer = new byte[512];
while (entries.hasMoreElements()) {
    ZipEntry    entry = (ZipEntry)entries.nextElement();
    if  ("word/document.xml".equalsIgnoreCase(entry.getName())) {
        //perform special processing
    }
    else{
        // create a new empty ZipEntry
        ZipEntry newEntry = new ZipEntry(entry.getName()); 
//      outputStream.putNextEntry(entry);
        outputStream.putNextEntry(newEntry);
        InputStream in = original.getInputStream(entry);
        while (0 < in.available()){
            int read = in.read(buffer);
            if (read > 0) {
              outputStream.write(buffer,0,read);
            }
        }
        in.close();
    }
    outputStream.closeEntry();
}
outputStream.close(); 
```

但是，这种方法会丢失存储在原始字段中的任何元信息`ZipEntry`（例如：评论、额外）。API 文档并不清楚这是否重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:03:12.067

要保留 zip 条目的元数据，请使用 ZipEntry 的“复制构造函数”创建它：

```
ZipEntry newEntry = new ZipEntry(entry); 
```

然后您可以只修改名称或评论等，其他所有内容都将从给定的`entry`.

您还可以查看可以从 Java 填充[DocX](http://www.docmosis.com)文件的 Docmosis。

# android - 为移动设备正确调整图像大小

> ID：11766744
> 
> 赞同：0
> 
> 时间：2012-08-01T20:03:32.163
> 
> 标签：android, mobile, titanium, appcelerator

目前我正在尝试为 Android 设备开发一个移动应用程序（使用 Appcelerator）。

有很多具有不同屏幕分辨率的 Android 设备。所以我基本上希望应用程序在每台 Android 设备上看起来都一样。

所以假设我在屏幕中央有一个背景图像。这是（以像素为单位）550x300。

我只是尝试将图像视图的宽度和高度设置为**下降**（与密度无关的像素）。所以在我的情况下：`332dp`x `226dp`。

我首先在`HTC One X`. 在那里，图像很好地居中，我在屏幕边缘的左侧和右侧留有一个小空间。

然后我在稍旧的设备上进行了测试，`HTC Desire Z`. 在那里，图像宽度比屏幕的实际宽度略大。（示例屏幕。蓝色方块代表图像）

![在此处输入图像描述](../Images/d426bdc0a520efb18e0e9418faee7966.png)

所以这意味着将宽度和高度设置为**dp**对于图像来说也不是一个好的选择。

设置图像宽度和高度以使其在两部手机上看起来相同的好方法是什么。即，这样它们在图像的其他边缘上都有一个小的空白区域（就像我现在在 HTC One X 中一样）？？

关于这个问题有什么建议吗？

**编辑**

感谢您提供到目前为止的信息。你们中的一些人发布了资源等链接并提出了一些建议。我会在接下来的几天内尝试解决它们，所以我可能需要几天时间才能接受答案。同时，欢迎任何想法建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:06:32.193

我建议使用适合的尺寸。

在目标 c 中，它看起来有点像这样......不是一个 android 程序员，但这可能会有所帮助。

```
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

因此，如果您能想出一种方法来获取框架大小，那么您可以以任何视图定位的方式将图像设置为该大小。

如果你不希望它占据整个屏幕而只占据侧面，那么可能会有一个适用于 android 的自动调整大小功能，这样你的图像将随着你的框架而变得灵活，这将根据手机尺寸而变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:10:22.910

使用各种可绘制文件夹，即drawable、drawable-large、drawable-xlarge 来存储各种尺寸的背景图像资源。查看[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)了解更多信息。

另请参阅[Android: Scale a Drawable or background image?](https://stackoverflow.com/questions/1400782/android-scale-a-drawable-or-background-image) 获取有用的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:11:51.783

我认为问题不在于图像更宽，而是 HTC Desire Z 上手机的屏幕宽度更小。
我认为让图像在所有设备上看起来相同的最佳方法是设置宽度/高度以编程方式。
但我认为这并不重要，因为在为多种设备开发时，您会遇到更复杂的问题。两者看起来都不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:12:11.273

我会设置你`android:layout_width`的`fill_parent`，然后添加一个`android:layout_marginLeft`和`android:layout_marginRight`浸入。您还可以为顶部和底部设置边距，但根据您的屏幕截图，这似乎不是问题。

作为一般规则，尽量避免为小部件设置固定的高度和宽度。这是处理不同屏幕尺寸的一个很好的参考：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T20:22:43.693

> 所以我基本上希望应用程序在每台 Android 设备上看起来都一样。

不，你没有。你认为你有，但你真的没有。这就像试图将一张照片放入 4x6、5x7 和 8x10 的框架中一样——必须付出一些努力。您有小型手机、中型手机、大型手机、7 英寸平板电脑、10 英寸平板电脑——这些体验*不*一样，您只需对设计进行一些宽大处理即可使其正常工作。如果您只想要图像之外的特定空间量，只需为您的 ImageView 指定 DP 单位的特定边距，例如：

```
<ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dip"
    //...
    /> 
```

您应该努力使体验相同（尽管强烈建议使用不同的平板电脑布局），但您不能期望它在所有屏幕尺寸和密度上看起来都相同。

# javascript - 功能填写一些字段并在选择时提交

> ID：11766748
> 
> 赞同：0
> 
> 时间：2012-08-01T20:03:40.437
> 
> 标签：javascript, submit, onchange, onselect

```
<script type="text/javascript">

function FillCode(info) {
  var str = '';
  if (info != '') { str = info; }
  document.getElementById('coupon_code').value = str;
}

</script>

<div class="input-box">
<input class="input-text" type="hidden" id="coupon_code" name="coupon_code" value="<?php echo $this->htmlEscape($this->getCouponCode()) ?>" />
<select id="SBox" style="background-color: #666;" onchange="FillCode(value)">
      <option value="">Select Code</option>
      <option value="CODEDISCOUNT">X% Discount</option>
    </select> 
```

> 我想在下拉菜单中选择 X% 折扣选项时自动发送。

选择此项填写优惠券代码表格，但我需要按提交按钮自动更新表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:59:26.670

使用 jQuery 来执行此操作是否可以接受？

如果是这样，我在**[这里提出了一个工作示例](http://jsfiddle.net/UW7Dp/5/)**

使用 jQuery 这就是你要做的：

```
$("#SBox").change(function() {
    //alert($(this).val());
    $("input#coupon_code").val($(this).val());
    $("form").submit();
}); 
```

# c# - 重定向时丢弃路由值

> ID：11766749
> 
> 赞同：1
> 
> 时间：2012-08-01T20:03:40.963
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

因此，我已经尝试了几个小时来解决理论上应该非常简单的问题。让我们来看看这个示例网址：

```
http://sample.com/products/in/texas/dallas 
```

这映射到特定路线：

```
routes.MapRoute(
    "products",
    "products/in/{state}/{city}",
    new { controller = "Products", action = "List", state = UrlParameter.Optional, city = UrlParameter.Optional }); 
```

在我的操作方法中，我可以进行查找以确保“texas”和“dallas”存在，并且“dallas”存在于德克萨斯州。这一切都很好，花花公子。但是，在城市不存在的情况下（因为地理不正确或拼写错误），我希望它备份州级。例子：

```
http://sample.com/products/in/texas/dallax 
```

那应该发出重定向到

```
http://sample.com/products/in/texas 
```

执行此操作的“简单”方法是简单地发出 Redirect 调用，如下所示：

```
return Redirect("/products/in/" + stateName); 
```

但是，我试图将其与 URL 结构分离；例如，如果我们决定更改路由的外观（例如，将模式更改为`products/around/{state}/{city}`），那么我必须知道我需要对此控制器进行更新以修复 URL 重定向。

如果我可以制定一个解决方案，只检查路由值并找出问题所在，那么我不必担心更改路由模式，因为仍然可以找出路由值。

理想情况下，我想做这样的事情：

```
return RedirectToRoute(new { controller = "Products", action = "List", state = state }); 
```

（注意，这是一个简化的示例；控制器名称和操作方法名称等“必需”路由片段将分别由通用参数和表达式检查确定）。

这实际上执行了重定向，**但是**，来自当前请求的路由值被附加到重定向上，因此您进入重定向循环（请注意，我没有在路由对象中包含城市路由值）。**如何阻止“城市”路线值包含在此重定向中？**

我尝试了以下方法来摆脱路由值：

1.  编写我自己的`RouteValueDictionary`/匿名路由数据对象并将其传递给`RedirectToRoute`.
2.  创建我自己的操作结果来自己检查`RouteTable.Routes`和查找路线，并自己更换令牌。这似乎是最“笨拙”的，并且似乎是在重新发明轮子。
3.  制作一个这样的方法`RedirectWithout`需要一个键值并调用`RedirectToRouteResult.RouteValues.Remove(key)`- 这也不起作用。
4.  我还尝试为我不想添加的键添加空值；然而，这会改变路由到不正确的地方——即`new { controller = "Products", action = "List", state = stateName, city = (string)null }`发出一个重定向到`/Products/List?state=Texas`的不是正确的 URL。

这一切似乎都源于 RedirectToRoute 采用当前请求上下文来构造虚拟路径数据。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:11:24.420

如果您使用的是 T4MVC，您应该能够执行以下操作：

```
return RedirectToAction(MVC.Products.List(state, null)); 
```

你试过这个吗？

```
return RedirectToRoute(new 
{
    controller = "Products", 
    action = "List", 
    state = state,
    city = null, 
}); 
```

**回复评论**

也许 MVC 很困惑，因为您的可选参数不在末尾。下面应该与上面`RedirectToRoute`指定的内容一起使用`city = null`：

```
routes.MapRoute(
    "products",
    "products/in/{state}/{city}",
    new
    {
        controller = "Products",
        action = "List",
        // state = UrlParameter.Optional, // only let the last parameter be optional
        city = UrlParameter.Optional 
    }); 
```

然后，您可以添加另一个路由来处理 URL 的 where`state`是可选的：

```
routes.MapRoute(null, // I never name my routes
    "products/in/{state}",
    new
    {
        controller = "Products",
        action = "List",
        state = UrlParameter.Optional 
    }); 
```

# javascript - 最简单的 .ajax 调用 twitter search-api？

> ID：11766752
> 
> 赞同：0
> 
> 时间：2012-08-01T20:03:52.797
> 
> 标签：javascript, jquery

我正在尝试打电话给推特。对 twitter-search-api 最简单的工作调用是什么？

这就是我累了。通话失败。$.ajax({ dataType: 'json', url: "http://search.twitter.com/search.json?q=skjutsgruppen&callback=?", })

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:11:08.640

试试这个：

```
$.getJSON("http://search.twitter.com/search.json?callback=?&q=stackoverflow", 
  function (r) {
    console.log(r);
}); 
```

# php - 在选择 HTML 中保持数组顺序

> ID：11766753
> 
> 赞同：0
> 
> 时间：2012-08-01T20:03:52.870
> 
> 标签：php, cakephp

我的问题是。我有一个数组，其中的元素以这种方式定位：

[2] => '2 的值'
[3] => '3 的值'
[1] => '1 的值'

我想以这种方式出现在 . 但是当向 PHP/HTML 发送数据时，它们是有序的。

[1] => '1 的值'
[2] => '2 的值'
[3] => '3 的值'

注意：必须保留密钥，例如我不能执行以下操作：
[1] => 'Value of 2'
[2] => 'Value of 3'
[3] => 'Value of 1'

我应该保留钥匙到位。
（我在用谷歌翻译）

**编辑：**

我在 CakePHP 中使用这个字段：

```
<?php echo $this->Form->input('item_id', array('label' => 'Item', 'class' => 'span3', 'empty' => 'Escolha um item', 'data-depend-on' => '#ActionEstoqueId', 'data-source' => $this->Html->url(array('controller' => 'itens', 'action' => 'index', 'ext' => 'json'), true))) ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:57:30.763

那么这对你来说怎么样？（向下滚动以获取更新，因为这个原始答案没有帮助）。

```
<?php
    $array = array(
        "2" => "Value of 2",
        "3" => "Value of 3",
        "1" => "Value of 1",
    );

    echo "<pre>";
    print_r( $array );
    echo "</pre>";

    // Or

    foreach ($array as $key => $value)
    {
        echo $key.'=>'.$value.'<br />';
    }
?> 
```

更新：

```
$array = array(
    array( "2", "Value of 2" );
    array( "3", "Value of 3" );
    array( "1", "Value of 1" );
) 
```

我真的不知道这是如何转换为响应对象的，我猜你应该告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:16:46.110

我认为你必须使用 php 函数：

```
ksort($array); 
```

您可以在[http://php.net/manual/en/function.ksort.php上看到函数](http://php.net/manual/en/function.ksort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:07:05.533

是否可以改为这样做？

```
$arr = array(
    array(2 => 'Value of 2'),
    array(3 => 'Value of 3'),
    array(1 => 'Value of 1')
); 
```

# lotus-notes - 如何从浏览器将 Excel 文件保存到本地驱动器

> ID：11766756
> 
> 赞同：0
> 
> 时间：2012-08-01T20:03:58.947
> 
> 标签：lotus-notes, xpages

我有一个 XPage，它使用**服务器端 javascript**（感谢 Russ Maher）创建一个 Excel 文件。如果我在浏览器中本地运行 XPage，我知道如何将其保存到 C: 驱动器，但不知道如何在服务器上运行时将其保存到用户计算机，而无需先将其保存到服务器。以下代码用于从服务器的角度保存它。

```
var fileOut = new java.io.FileOutputStream(directory+fileName);
xl.write(fileOut);
fileOut.close(); 
```

有什么想法可以将其引导到用户的驱动器上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:49:26.873

不应将 Excel 工作簿写入 FileOutputStream，而应将其写入 ByteArrayOutputStream：

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
xl.write(outputStream); 
```

您可能需要使用 XAgent 创建输出，然后从 XPage 链接到 XAgent。也许[Declan Lynch 的这篇博客文章](http://www.qtzar.com/blog/generating-a-csv-file-from-xpages/)结合[这个关于如何在 servlet 中执行此操作的答案](https://stackoverflow.com/a/11249051/785061)可以引导您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:59:52.993

Paul Calhoun 向我发送了一些示例代码，我对其进行了按摩以生成我想要的电子表格。我不知道他做了什么我没有做过的事情，但是，就目前而言，我认为这是解决方案的核心，只是利用 OutputStream 而不是 FileOutputStream 或 ByteArrayOutputStream。

```
// The Faces Context global object provides access to the servlet environment via the external content
var extCont = facesContext.getExternalContext(); 
// The servlet's response object provides control to the response object
var pageResponse = extCont.getResponse();
//Get the output stream to stream binary data
var pageOutput = pageResponse.getOutputStream();

// Set the content type and headers
pageResponse.setContentType("application/x-ms-excel");
pageResponse.setHeader("Cache-Control", "no-cache");
pageResponse.setHeader("Content-Disposition","inline; filename=" + fileName);
//Write the output, flush the buffer and close the stream
wb.write(pageOutput);
pageOutput.flush();
pageOutput.close();

//  Terminate the request processing lifecycle.
facesContext.responseComplete(); 
```

如果其他人遇到此问题，我将很乐意提供帮助，并且希望在有人问的时候，我会更多地了解有什么不同之处......

# python - 使用 wx.DC 设置背景颜色的更好方法

> ID：11766759
> 
> 赞同：5
> 
> 时间：2012-08-01T20:04:09.273
> 
> 标签：python, wxpython, wxwidgets

现在，我正在设置这样的背景颜色，

`dc.DrawRectangle(0,0,width,height)`

你知道设置背景颜色的更好方法吗？

[http://wxpython.org/docs/api/wx.DC-class.html](http://wxpython.org/docs/api/wx.DC-class.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-13T02:48:36.683

如果您已经在 a`wx.DC`上绘制以绘制窗口的其余内容，那么最好的方法是设置背景画笔，然后清除 DC。像这样的东西：

```
def OnPaint(self, event):
    dc= wx.PaintDC(self)
    dc.SetBackground(wx.Brush(someColour))
    dc.Clear()
    # other drawing stuff... 
```

如果您使用窗口的`SetBackgroundColour`方法设置颜色，那么您可以使用它而不是一些固定的颜色值，如下所示：

```
def OnPaint(self, event):
    dc= wx.PaintDC(self)
    dc.SetBackground(wx.Brush(self.GetBackgroundColour()))
    dc.Clear()
    # other drawing stuff... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:45:22.407

适用于大多数窗口（包括按钮和其他小部件）的正常方法是调用 wxWindow::SetBackgroundColour()

[http://docs.wxwidgets.org/2.8/wx_wxwindow.html#wxwindowsetbackgroundcolour](http://docs.wxwidgets.org/2.8/wx_wxwindow.html#wxwindowsetbackgroundcolour)

巧妙的是，如果你在最顶层的父级上调用它，所有的子级将自动继承相同的背景颜色。请参阅链接以了解其工作原理。

# android - jenkins android 找不到 sdkmanager.jar

> ID：11766761
> 
> 赞同：3
> 
> 时间：2012-08-01T20:04:10.837
> 
> 标签：android, ant, jenkins

我在 Mac OS 上运行 Jenkins。我有一个试图`<exec executable="android">`在其中一个目标中执行的 ant 构建文件。我有正确的路径，因为我已经包含了 android sdk`tools`和`platform-tools`文件夹，但我仍然收到以下错误。

```
android can't find sdkmanager.jar 
```

如果我将描述的 jar 从 lib 文件夹移动到`tools`文件夹，我会收到与另一个 jar 相关的其他类似错误，所以它似乎无法从 lib 文件夹中获取这个 jar。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:32:09.817

我解决了我的问题。我有正确的路径和 sdk 安装目录。问题是我的 Jenkins 在另一个用户下运行并且无法使用 android lib 找到目录，因为他们拒绝了它。所以问题出在 sdk 文件夹权限中。我刚刚`chmod -R 0755 mySdkDirLocation`在 bash 下从控制台运行，并成为目前地球上最快乐的开发人员:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T18:22:39.540

我跑了之后`chmod -R 0755 mySdkDirLocation`。错误“android 找不到 sdkmanager.jar”消失了。但是当我运行时`android update sdk -u`，我无法安装档案。于是我跑了`chmod 777 mySdkDirLocation`。然后下载工作。

# php - 为什么我的 if 语句会导致 WordPress 崩溃？

> ID：11766762
> 
> 赞同：1
> 
> 时间：2012-08-01T20:04:13.867
> 
> 标签：php, wordpress, if-statement, wordpress-theming

我是一位经验丰富的网络开发人员，所以我很尴尬地问这个问题，但是为什么我的 if 语句兑现了 WordPress？

```
<!-- THE BLOCK FOR THE HEADER IN THE CMS !-->
<span class="PostHeader"><p>
<?php

    if(empty(get_the_block("Header"))){
        echo "Employment"; //Empty only on the employment screen
    } else {
        the_block("Header");
    }

?>
</p>
<!-- END OF THE BLOCK --> 
```

这是在 Wordpress 的模板中，如果我注释掉控制结构，它可以正常加载，但是一旦我尝试让它在模板中运行，页面就会停止加载。

为什么要这样做？

- 编辑 -

抱歉忘记提及“多个内容块”插件已启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:21:02.663

empty() 是一个结构而不是一个函数，它只接受变量，你应该使用它来代替：

```
<!-- THE BLOCK FOR THE HEADER IN THE CMS !-->
<span class="PostHeader"><p>
<?php

    $block = get_the_block("Header");

    if(empty($block)){
        echo "Employment"; //Empty only on the employment screen
    } else {
        the_block("Header");
    }

?>
</p>
<!-- END OF THE BLOCK --> 
```

有关更多信息，请参阅[PHP 空](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:07:46.003

`get_the_block()`根据[WordPress Codex](http://codex.wordpress.org)没有功能。

除非你已经定义了它或者有一个插件定义了它，否则你会遇到一个致命错误。您的服务器的错误日志可能会证实这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:09:16.347

您必须下载此插件： http: [//downloads.wordpress.org/plugin/multiple-content-blocks.zip](http://downloads.wordpress.org/plugin/multiple-content-blocks.zip)并安装它。

您尝试使用的功能不在 WordPress Codex 中，也找不到。这就是为什么你会得到一个空白页面，也就是白屏死机（也因为 php reporting_error 设置为 false）。你可以试着把这条线

```
error_reporting(-1); 
```

在您的 if else 语句之前。

材料 ：

> [http://plugins.trendwerk.nl/documentation/multiple-content-blocks/](http://plugins.trendwerk.nl/documentation/multiple-content-blocks/)

# javascript - 通过 Prototype JS 选择多个选择元素的第一个选项

> ID：11766764
> 
> 赞同：0
> 
> 时间：2012-08-01T20:04:23.063
> 
> 标签：javascript, prototypejs

`required-entry`我想在带有 Prototype JS 的页面中选择所有具有类的选择下拉列表中的第一个选项。我搜索了 SO 问题，发现了许多相关问题，但不是我真正需要的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:27:13.327

自从我完成任何 Prototype.js 以来已经有一段时间了。所以这可能不是最好的方法，但它*应该*有效。

假设您有一个页面：

```
<select class='required-entry'>
    <option value='a'>AAA</option>
    <option value='b'>BBB</option>
    <option​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ value='c'>CCC</option>
</select>

<select class='required-entry'>
    <option value='x'>XXX</option>
    <option value='y'>YYY</option>
    <option value='z'>ZZZ</option>
</select>​ 
```

`option`您可以通过以下方式为每个人获取第一个`select`：

```
var firstOptions = [];

$$('.required-entry').each(function(sel, i) {
    firstOptions.push($(sel).getElementsBySelector('option')[0]);
});

// firstOptions is now an array containing the first options 
```

现在，我无法从您的问题中判断您是要*检索*第一个选项，还是设置该`select`值以使第一个选项按字面意思*选择*。这是后来的：

```
$$('.required-entry').each(function(sel, i) {
    sel.selectedIndex = 0;
}); 
```

# vim - 如何在 Vim 中添加每三行？

> ID：11766766
> 
> 赞同：2
> 
> 时间：2012-08-01T20:04:37.577
> 
> 标签：vim, append

我对 Vim 一点也不熟悉，但我正在处理大型文本文件（~1G），而我的标准文本编辑器并没有削减它。

我的文件目前采用这种格式：

```
Arbitrary_title_of_sequenceA
SEQ1SEQ1SEQ1SEQ1
SEQ2SEQ2SEQ2SEQ2
Arbitrary_title_of_sequenceB
SEQ1SEQ1SEQ1SEQ1
SEQ2SEQ2SEQ2SEQ2 
```

我需要一种方便的方法将“SEQ2”行附加到“SEQ1”行，如下所示：

```
Arbitrary_title_of_sequenceA
SEQ1SEQ1SEQ1SEQ1SEQ2SEQ2SEQ2SEQ2
Arbitrary_title_of_sequenceB
SEQ1SEQ1SEQ1SEQ1SEQ2SEQ2SEQ2SEQ2 
```

考虑到这些文件的大小，单独执行每一行并不是一个真正的选择。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:33:29.020

一开始就提供正确的样品怎么样？

```
:g/SEQ1/norm Jx 
```

做*我认为*你想要的。

*   `:g/SEQ1`是`:global`允许您对包含模式的每一行执行操作的命令`SEQ1`。见`:help :global`。
*   `norm`是`:normal`您用来执行正常模式命令的命令，在此处与`:g/SEQ1`. 见`:help :normal`。

之后是有问题的正常命令：

*   `J`用于将当前行与下面的行连接起来。
*   `x`用于删除`<Space>`Vim 自动添加的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:15:58.553

```
:1,$s/\(.*\n\)\(.*\)\n\(.*\n\)/\1\2\3/

1,$          -> range is all file
s/PAT1/PAT2/ -> substitute PAT1 with PAT2
.*           -> match any character except new line
\n           -> match new line
\(PAT1\)     -> capture/remember the string that matched PAT1
\1,\2,\3     -> refers to the captured string for captures in order 
```

同样使用 sed 而不是 vim 应该更快：

```
sed -i 'n;N;s/\n/ /' input_file 
```

这可以概括为：

```
Read a line
Read another line and print previous line (n)
Read another line and append it to the previous line (N)
find the first newline and change it to space (s/\n/ /)
print the line (or merged lines) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:42:19.597

*如果*你有一个可靠的“SEQ1”模式，我认为 romainl 的解决方案是最好的。如果没有，并且您想从字面上加入每三行，您可以使用宏轻松地做到这一点：

```
qqjJxjq 
```

点击`G`查看文件中有多少行，然后重复多次宏（它比你需要的高并不重要）。因此，如果文件是 1000 行，您可以这样做`1000@q`。这种解决方案很容易记住并集成到您的正常工作流程中。

# perl - 安装 Perl 模块时出错。错误代码 129

> ID：11766772
> 
> 赞同：0
> 
> 时间：2012-08-01T20:05:08.627
> 
> 标签：perl, module, installation, cmd

感谢您花时间阅读本文，并希望能帮助我成功解决我的问题。

我删除了这个之前的帖子，因为它已经死了（几个小时没有答案），所以我希望能恢复它。

我试图安装一个名为 Rose::DB 的 perl 模块，经过多种方法后，我终于安装了它，但是每当我运行我的代码时，它都会告诉我找不到名为 Bit::Vector 的模块，所以我尝试安装它。

我首先没有错误地做了 Makefile.PL。然后，我尝试做 dmake... 它给了我很多行，其中大多数是这样的警告：

```
Vector.o:Vector.c:(.text+0x11591): undefined reference to `_imp__Perl_newXS'
Vector.o:Vector.c:(.text+0x115a0): undefined reference to `_imp__Perl_get_context' 
```

之后，最后几行显示了这一点：

```
collect2: ld returned 1 exit status
dmake.exe:  Error code 129, while making 'blib\arch\auto\Bit\Vector\Vector.dll' 
```

有人可以帮我正确安装模块吗？我真的很感激。

PS：这是查看所有行的链接： [http ://www.sendspace.com/file/97pk32](http://www.sendspace.com/file/97pk32)

PS：我正在使用 Strawberry，正在使用 ActivePerl 但给了我错误，建议使用 Strawberry。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-27T10:28:16.457

我在**Windows**上使用 Win32::UTCFileTime 模块遇到了同样的问题。

这可能是因为您同时安装了 Strawberry 和 ActivePerl。因此，您的 perl 配置可能是错误的。

如果你有类似的东西：

```
$ perl -V
...
cc='C:\STRAWB~1\c\bin\gcc.exe',...
...
ld='C:\STRAWB~1\c\bin\g++.exe', ldflags='... -L"C:\Perl\lib\CORE"...'
... 
```

这意味着您正在尝试使用 Strawberry 的编译器/链接器和 ActivePerl 库构建 perl 模块。这可能是原因。

此外，一个简单的“hack”是将 C:\Perl临时**重命名为 C:\whatever 。**然后，你应该有：

```
$ perl -V
...
cc='gcc',...
...
ld='g++', ldflags='... -L"C:\strawberry\lib\CORE"...'
... 
```

因此，您的链接器将能够找到 Strawberry perl CORE API 函数（_imp__Perl_*, [perlguts](http://perldoc.perl.org/perlguts.html)）。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T14:28:07.800

如果有两个像 Strawbery 和其他像 Dwimperl 或 activeperl 这样的 perl 安装，重命名一个不使用的，解决了我的 dmake.exe 问题：错误代码 129

# java - 如何将对象从视图传递到 java 函数？

> ID：11766775
> 
> 赞同：1
> 
> 时间：2012-08-01T20:05:24.080
> 
> 标签：java, spring, jsp, spring-mvc

我有一个jsp页面

```
<%@page import="org.springframework.web.servlet.ModelAndView"%>
  <%@page import="mvc3.helpers.Utils"%>
  <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
  <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
  <%@ page session="false" %>
  <html>
  <head>
      <title>View Topic</title>
  </head>
  <body>

  <fieldset>
       <legend>${topic.getName()}</legend>
       <div class="display-label-field"><b>Content:</b>${topic.getText()}</div>
       <div class="display-label-field"><b>Comments count:</b>${topic.getCommentsCount()}</div>
       <div class="display-label-field"><b>Last time updated:</b>${topic.getTimeLastUpdated()}</div>

  </fieldset>

  <p>
    <%=Utils.actionLink("Comment Topic", "Topic", "AddComment", Integer.toString( topic.getId() ) ) %>
    <%=Utils.actionLink("Back to Topic List", "", "home", null)%>
  </p> 
```

问题是，**${topic.getName()}**工作正常，但是**<%=Utils.actionLink("Comment Topic", "Topic", "AddComment", Integer.toString( topic.getId() ) ) %>**导致*主题无法解析*错误。我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:07:21.403

如果您在请求中设置了属性主题，则执行

```
Integer.toString( ((Topic)request.getAttribute("topic")).getId()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:07:44.423

我们不应该用 EL 访问 getId 吗？像下面这样的东西？

```
Integer.toString( ${topic.getId()}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:14:32.870

`"topic"`尚未为您的视图模型设置变量。在您的控制器中，您将需要以下内容：

```
myModelData.put("topic", topicId); 
```

# android - MediaRecorder“启动失败-12”

> ID：11766779
> 
> 赞同：4
> 
> 时间：2012-08-01T20:05:41.193
> 
> 标签：android, logcat, mediarecorder, error-code

所以我一直在为一个更大的应用程序开发一个记录模块。它在大多数设备上都可以正常工作，但有一批手机只是拒绝录音。

每当我使用 MediaRecorder 开始录制时，LogCat 都会亲切地告诉我 MediaRecorder 无法启动，导致错误代码 -12。我大部分时间都在网上搜索这些错误代码的解释。到目前为止，我一直很不走运。因此，我将自己转向开发者社区的其他成员。

```
MediaRecorder start failed -12 
```

对于这些错误代码，已经提出了不止一个问题，更具体地说是 16、19、22 和一个大得离谱的数字 2147483648，但事实证明，这些信息对我来说毫无用处。

有谁知道我在哪里可以找到可靠的 MediaRecorder 错误代码列表，包括这些错误代码的含义？或者更好的是，向我解释一下全能的 Android 预言机试图向我发出什么信号？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:27:06.757

我之前的回答不完整。经过更多的修补后，我发现许多设备可能对您认为大多数设备的默认设置非常敏感，但实际上有许多设备的行为方式与您预期的不同，它们会崩溃，给您带来许多不同的错误您将无法在 Internet 上找到的代码。这些错误代码的范围从 -12、-19、-21 到 -100 等，并且这些错误代码中的大多数都可以通过使用以下提示来解决。我将在下面给出一个简短的调查结果列表：

运行**API 10**的**HTC ChaCha**不使用 H264 编码器进行录制。我使用 MP4 和/或 H263 让它工作，但视频仍然完全失真。解决方案是将相机预览大小设置为 640*480，而不是使用谷歌自己的返回 576*432 的“最佳预览”方法。通过为这个模型设置例外，我能够让它完美地记录下来。

 **尝试使用 H264 录制时，运行**API 10**的**Galaxy Y崩溃。**这个例外使用 MP4 编码器。修复。

 **尝试使用 MP4 录制时，运行**API 10**的**Galaxy Ace崩溃，返回错误代码 -12。**使用 H264 编码器为此设备型号添加异常可解决此问题。

 **尝试使用 MP4 编码器录制时，运行**API 10**的**Desire Z崩溃。**给我一个错误-100（媒体服务器死机）。使用 H264 解决了这个问题。

 **```
if(API >=11){
        if(CamcorderProfile.hasProfile(mCamId, CamcorderProfile.QUALITY_480P)) {
            Log.d(TAG, "API 11+ 480P");
            mMediaRecorder.setProfile(CamcorderProfile.get(mCamId, CamcorderProfile.QUALITY_480P));
            mMediaRecorder.setVideoSize(640, 480);
            mMediaRecorder.setVideoEncodingBitRate(2000000);
        } else {
            Log.d(TAG, "API 11+ LOW");
            mMediaRecorder.setProfile(CamcorderProfile.get(mCamId, CamcorderProfile.QUALITY_LOW));
        }
    } else if (API < 11 && !MODEL.equals("GT-S5830") && !MODEL.equals("vision")){
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        Log.d(TAG, "API 9 device, defaulting");
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
        mMediaRecorder.setVideoSize(640, 480);
        mMediaRecorder.setVideoEncodingBitRate(2000000);
    } else if ((API < 11) && MODEL.equals("GT-S5830") || MODEL.equals("vision")) {
        //Galaxy Ace and Desire Z
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
        mMediaRecorder.setVideoSize(640, 480);
        mMediaRecorder.setVideoEncodingBitRate(2000000);
    } 
```

我敢打赌，我会遇到更多的模型作为隐喻的痛苦，当我这样做时，我会将它们添加到列表中。总结一下; 如果您遇到这些烦人的、几乎无法解释的错误代码，请查看 MediaRecorder 参数。我建议不要对任何低于 11 的 API 使用 CamcorderProfile 类，因为其中许多模型在使用它的高质量实例时会崩溃。如果您的录像机视频文件显示奇怪的绿色、穿过屏幕的半对角线等，请尝试将预览大小设置为与录像机视频大小相匹配。

```
Camera.Parameters param = mCamera.getParameters();
param.setPreviewSize(width, height);
mCamera.setParameters( param ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:03:21.830

我找到了解决我遇到的问题的方法。事实证明，并非所有设备都支持高质量录制。我认为这是相对的，这意味着高质量是该设备的最高质量，而不是一个常数。

所以我更换了：

```
`mMediaRecorder.setProfile(CamcorderProfile.get(camId, CamcorderProfile.QUALITY_HIGH));` 
```

和：

```
`mMediaRecorder.setProfile(CamcorderProfile.get(camId, CamcorderProfile.QUALITY_LOW));` 
```

这解决了问题。现在唯一剩下的错误是如何定义设备支持的最高质量而不使其在运行时崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:03:33.877

这段代码对我有用:)

```
 camId = Main.mHelper.getFrontFacingCameraId();
        mCamera = Camera.open(camId);

        Camera.Parameters param = mCamera.getParameters();
        param.set( "cam_mode", 1 );     
        mCamera.setParameters(param); 
```********

# .htaccess - .htaccess url 重写用于 ssl https 重定向

> ID：11766781
> 
> 赞同：4
> 
> 时间：2012-08-01T20:05:44.140
> 
> 标签：.htaccess, mod-rewrite, ssl, https

我在其他问题的解决方案和互联网上使用了此处提供的不同代码。我真的不精通`htaccess`。购买并确认有效的 SSL 证书，但我不熟悉应用这些重定向。

**目标：** *我需要在以下目录中将 http 重写为 https。*

*   [http://mydomain.com/products-page/checkout](http://mydomain.com/products-page/checkout)
*   [http://mydomain.com/products-page/your-account](http://mydomain.com/products-page/your-account)
*   [http://mydomain.com/wp-login](http://mydomain.com/wp-login)

我正在通过 Dreamhost 共享主机。如果有帮助，我有一个专用 IP。

我使用的初始代码由 Dreamhost 代表推荐给我：

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} wp-login 
RewriteRule ^(.*)$ https://mydomain.com/wp-login/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:06:47.080

在文档根目录的 htaccess 文件中尝试这些规则。

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteCond %{REQUEST_URI} ^(/wp-login|/products-page/checkout|/products-page/your-account)
RewriteRule ^(.*)$ https://mydomain.com/$1 [R,L] 
```

第一个条件检查请求是否不是 HTTPS，第二个条件检查请求是否以 、 或 开头`/wp-login`，`/products-page/checkout`如果`/products-page/your-account`两者都适用，则重写只需获取整个 URI 并重定向到 https://。

# python - IndexError: index out of bounds 尝试在 Matplotlib 中绘图时

> ID：11766782
> 
> 赞同：0
> 
> 时间：2012-08-01T20:05:44.000
> 
> 标签：python, matlab, matplotlib

我正在尝试将以下代码从 Trefethen 在 MATLAB 中的光谱方法转换为 Python。但是遇到以下关于索引越界的错误。对于什么索引超出范围以及如何修复它，我有点困惑。任何帮助，将不胜感激。

错误

```
Traceback (most recent call last):
  File "C:\Documents and Settings\My Documents\Computational Physics\Wave-eqn.py", line 56, in <module>
ax.plot_wireframe(x,tdata,data,rstride=10, cstride=10)
  File "C:\Python32\lib\site-packages\mpl_toolkits\mplot3d\axes3d.py", line 906, in  plot_wireframe
    tylines = [tY[i] for i in cii]
  File "C:\Python32\lib\site-packages\mpl_toolkits\mplot3d\axes3d.py", line 906, in  <listcomp>
    tylines = [tY[i] for i in cii]
IndexError: index out of bounds 
```

Trefethen 的代码

```
% p6.m - variable coefficient wave equation using differentiation matrices

% Grid, variable coefficient, and initial data:
N = 512; h = 2*pi/N; x = h*(1:N); t = 0; dt = h/4;
a = .1;
c = a + sin (x-1).^2;
v = exp(-100*(x-1).^2); vold = exp(-100*(x-a*dt-1).^2);

column = [0 .5*(-1).^(1:N-1).*cot((1:N-1)*h/2)];
D = toeplitz(column,-column);

% Time-stepping by leap frog formula:
tmax = 15; tplot = .15; clf, drawnow, set(gcf,'renderer','zbuffer')
plotgap = round(tplot/dt); dt = tplot/plotgap;
nplots = round(tmax/tplot);
data = [v; zeros(nplots,N)]; tdata = t;
for i = 1:nplots
 for n = 1:plotgap
        t = t+dt;
        %       v_hat = fft(v);
        %       w_hat = 1i*[0:N/2-1 0 -N/2+1:-1] .* v_hat;
        %       w = real(ifft(w_hat));
        w = (D*v')';
        vnew = vold - 2*dt*c.*w; vold = v; v = vnew;
    end
    data(i+1,:) = v; tdata = [tdata; t];
end
waterfall(x,tdata,data), view(10,70), colormap(1e-6*[1 1 1]);
axis([0 2*pi 0 tmax 0 3]), ylabel t, zlabel u, grid off 
```

我的代码

```
import numpy as np
from numpy import *
from math import  pi
from scipy.linalg import toeplitz
from scipy.special import cotdg
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt

N = 512
h = (2*np.pi)/N
x = h*(np.arange(N)+1)
t = 0
dt = h/4.
a = .1
c = a + np.sin(x - 1)**2
v = np.exp(-100 * (x - 1)**2)
vold = np.exp(-100 * (x - a*dt - 1)**2)

column = ((0.5*(-1)**arange(N))*cotdg(arange(N))*(h/2));
D = toeplitz(column,-column);
#print(D.shape);

tmax = 15   
tplot = .15
plotgap = int(around(tplot/dt));print(plotgap)
dt = tplot/plotgap
nplots = int(round((tmax/tplot)));print(nplots)
k = np.zeros(((nplots,N))) 
data = np.concatenate((v.reshape((512,1)).transpose(), k))
tdata = t

for i in range(nplots):
    for n in range(plotgap):
        t = t+dt
        w = (D*v)
        vnew = vold-2*dt*c*w
        vold = v
        v = vnew
    data[i,:] = v[0,:]
    tdata = vstack([tdata, t])
print('shape data =',data.shape)
print('shape v =',v.shape)
print('shape tdata =',tdata.shape)
print('shape x =',x.shape)

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_wireframe(x,tdata,data,rstride=10, cstride=10)
plt.show() 
```

由python完成的数组形状

```
 shape data = (101, 512)
 shape tdata = (101, 1)
 shape x = (512,) 
```

我有一个朋友在 MatLab 中为这段代码运行 size() 命令，他为数组想出了这些形状

```
data =  101 512
tdata = 101 1
x =     1   512 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:39:22.037

的前两个参数`plot_wireframe`需要是二维数组。[文档](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#wireframe-plots)。

我不确切知道如何自定义您的代码（因为代码很多），但我希望这会有所帮助。

编辑：尝试[`axes3d.get_test_data`](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/api.html?highlight=get_test_data#mpl_toolkits.mplot3d.axes3d.get_test_data)查看有效输入应该是什么样子的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:35:29.830

在 matplotlib-users@lists.sourceforge.net 的人们的帮助下，我想通了。数组

```
x and tdata 
```

需要广播所以我做了

```
X,Y = np.broadcast_arrays(x,tdata)
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_wireframe(X,Y,data,rstride=5, cstride=5)
plt.show() 
```

# macros - 使用宏创建记录

> ID：11766783
> 
> 赞同：2
> 
> 时间：2012-08-01T20:05:50.787
> 
> 标签：macros, clojure, record

我有记录`(defrecord Rec [id])`

我和它一起工作

```
(def my ( Rec. 2 ))
(println (:id my)) 
```

现在我想用宏替换记录定义。这样我就可以写

```
(r 2) 
(println (:id my)) 
```

我写了宏

```
(defmacro r [id]
   (list 'def 'my (symbol "(") 'Rec. id (symbol ")"))) 
```

我用macroexpand检查了它

```
(macroexpand-1 '(r 2))  => (def my ( Rec. 2 )) 
```

但我`RuntimeException: Too many arguments to def`继续`(r 2)`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T20:19:55.427

从左括号创建符号与使用左括号评估文本不同。前者无特殊意义；后者使读者生成一个嵌套列表，然后对其进行评估。

换句话说，Clojure 评估数据结构，而不是文本（或符号列表）。当您在 REPL 中键入内容时，该文本被读入数据结构，然后评估数据结构。

为了使其正常工作，宏需要自己生成一个嵌套列表：

```
(defmacro r [id]
  (list 'def 'my (list 'Rec. id))) 
```

或者更好的是，使用语法引号运算符：

```
(defmacro r [id]
  `(def my (Rec. ~id))) 
```

出于说明目的，您可以看到将 Clojure 代码读取为文本时会发生什么：

```
(read-string "(def my (Rec. 2))")
=> (def my (Rec. 2))
(map type (read-string "(def my (Rec. 2))"))
=> (clojure.lang.Symbol clojure.lang.Symbol clojure.lang.PersistentList) 
```

# matlab - 矩阵中不同数量的列，如何在分析方程中使用每一列？

> ID：11766785
> 
> 赞同：0
> 
> 时间：2012-08-01T20:05:56.470
> 
> 标签：matlab, matrix, indexing

我正在生成它们所拥有的列数量不同的矩阵，我需要对这些列中的每一列应用一些方程并分别存储它们的结果（新矩阵中的不同列会很好）。对于我的第一个等式，我将选取部分矩阵并使用它们进行一些分析，例如：

```
A1 = interpolate((817/2+.5):(908/2),:);
B1 = interpolate((909/2+.5):(1000/2),:);

averageB = sum(B1)/length(B1);
averageA = sum(A1)/length(A1);

tapWithSign = (averageB - averageA) / (averageB + averageA / 2) * 100;

tapA1B1 = abs(tapWithSign); 
```

我测试了我目前拥有的内容，并将这些特定部分正确地拉入了一个新矩阵。当我尝试将它们应用于等式时，问题就出现了。当我应该有 13 个值时，它只给了我一个值（如果我有 13 个列需要评估，则为 13 个值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:59:34.607

您的问题出在这一行：

```
tapWithSign = (averageB - averageA) / (averageB + averageA / 2) * 100; 
```

可以肯定的是我有这个权利：`averageB`并且`averageA`是尺寸为（1,13）的向量。您希望`tapWithSign`具有与这些相同的尺寸。

你需要做的是

```
tapWithSign = (averageB - averageA) ./ (averageB + averageA / 2) * 100; 
```

你需要`./`而不是`/`. `A ./ B`意思是“将 A 的每个元素除以 B 的每个元素，并将结果放入与 A 和 B 大小和形状相同的矩阵/向量中。” 是矩阵除法，您可以通过在 matlab 提示符 `A / B`下键入来准确读取它是什么。`doc mrdivide`

一旦`tapWithSign`有正确的尺寸，`abs(tapWithSign)`也会。

# javascript - 使用 jQuery 是否可以同时将选择器分配与更改事件重新分配结合起来？

> ID：11766786
> 
> 赞同：0
> 
> 时间：2012-08-01T20:05:58.247
> 
> 标签：javascript, jquery

```
var gsaForm = $("form#search"), 
    gsaSite = $(":input[name=site]", gsaForm).val();

$(":input[name=site]", gsaForm).on("change", function(e) {
  gsaSite = $(this).val();
}); 
```

我真的很想把它清理干净（对我来说看起来很丑）。必须有一种方法可以分配一次 gsaSite 但涵盖我的两个基地。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:11:29.413

听起来您想要的是一个始终等于表单输入值的变量。

您最好为输入分配一个变量，然后`.val()`在需要该值时使用：

```
var gsaField = $(':input[name="site"]',gsaForm);

gsaField.val(); 
```

每次您想要该值时调用的处理时间`.val()`不足以将`change`事件附加到字段以重新分配变量。

# javascript - Javascript IFrame 未在 HREF 更改上导航

> ID：11766787
> 
> 赞同：0
> 
> 时间：2012-08-01T20:05:59.947
> 
> 标签：javascript, jquery, html

```
<frameset rows="250px,*" onload="start_here();">
    <frame src="leftframe.htm" name="topo" id="topo" application="yes" />
    <frame src="leftframe.htm" name="link" id="link" />
</frameset> 
```

这是我的 Javascript 代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script language="text/javascript">
function start_here()
{
        var usernameFromCookie = GetCookie(site);
        var urlToSite = createCustomURL(usernameFromCookie);
        alert(urlToSite);
}
function createCustomURL(userName)
{
        var customURL = "http://server1/get/cgi-app.exe?HOSTID=AD&ALIAS=" + userName;
        return customURL;
}
function setUserLink(urlFromCookie)
{
        $('a#link').attr('href', urlFromCookie);
} 
```

我正在尝试让第二个框架（名称是链接）重定向到该站点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:10:01.410

我认为您正在寻找设置框架 src。

```
$('#link').attr('src', urlFromCookie); 
```

# oracle - 当前时间戳 Nhibernate

> ID：11766797
> 
> 赞同：1
> 
> 时间：2012-08-01T20:07:04.433
> 
> 标签：oracle, nhibernate

几天前我问了这个问题，但我认为我的问题措辞错误。有没有办法：

```
 var item = session.get<Item>(id)
 item.accpt_date = current_timestamp //db current timestamp
 session.merge(item) 
```

我不能在更新/插入触发器上使用，因为 accpt_date 仅在某些事件发生时才会填充。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:41:59.040

简单的：

```
item.accpt_date = session.CreateSQLQuery("select current_timestamp")
                         .UniqueResult<DateTime>(); 
```

* * *

我不知道那`session.merge`应该是什么意思。

# jquery - jQuery 添加新字段

> ID：11766801
> 
> 赞同：0
> 
> 时间：2012-08-01T19:27:35.390
> 
> 标签：jquery

所以，我在这里要做的是 onClick 添加另一个 <li> ，它与上面的完全一样。我在 PHP 中创建了一个 for 循环来在这个 <li> 中创建正确的字段。

我遇到的问题：当您单击 .repatable-add 按钮时，我会收到两次“替换前”警报，而“替换后”警报根本不会触发。**和想法？**

```
jQuery('.repeatable-add').click(function() { 
    field = jQuery(this).siblings('ul.image-details').find('li:last').clone(true);  
    fieldLocation = jQuery(this).siblings('ul.image-details').find('li:last');  
    jQuery('input', field).val('').attr('name', function(index, name) {
            alert(name +' before replace');
            return name.replace(/(\d+)/, function(fullMatch, n) {  
            return Number(n) + 1;  
            alert(name +' after replace');
        });  
    })  
    field.insertAfter(fieldLocation, jQuery(this).siblings('ul.image-details').find('li:last'))  
    return false;  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:27:23.133

我在其他地方发布了这个答案，不知道发生了什么。

这是因为你试图在返回后发出警报，所以它不会触发。

我不确定您要如何处理输入内容，但这是我想出的解决方案：

```
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery('.repeatable-add').click(function(){
            var copyThis = jQuery(".image-details").find("li:last").attr('outerHTML');
            jQuery(".image-details").append(copyThis);
            var name = jQuery("input").attr("name");
            var count = name.replace(/\D+/, '');
            var newCount = count++;
            jQuery("input").attr("name",name.replace(newCount.toString(),count.toString()));
        return false;  
    });  
});
</script>

<ul class="image-details">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<input name="ithas1" />
<button class='repeatable-add'>button</button> 
```

# python - 如果列表列表中的某个项目按顺序丢失，如何报告错误

> ID：11766802
> 
> 赞同：0
> 
> 时间：2012-08-01T20:07:25.607
> 
> 标签：python

```
for i, e in enumerate(l1):
    if (e[0] == e[1]) and ((e[0], e[1]) not in l1):
        raise ValueError, '%s is missing' %(e[0], e[1])

    if i!=len(l1)-1:
        if e[0]==l1[i+1][0] and e[1]!=l1[i+1][1]-1:
            raise ValueError, '(%s,%s) is missing ' %(e[0], e[1]+1) 
```

l1 = [(1, 2), (1, 3), (1, 4), (2, 1), (2, 3)]

我可以为缺少的 (1,2) 和 (2,2) 工作，但在上述情况下，首先它应该寻找 (1,1) 以报告错误，如果它不存在，但是在上面的代码中它未被检测到。同样，它应该遍历整个列表以检查是否缺少任何东西。如果我想要 (2,4) 并且它在 l1 中丢失怎么办。这里也应该报错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:13:07.070

```
l1=[(1, 1), (1, 2), (1, 4), (2, 1), (2, 2), (2, 5)]
for i,elem in enumerate(l1[:-1]):
    nxt = ((elem[0],elem[1]+1),(elem[0]+1,elem[1]))
    if l1[i+1] not in nxt:
       print "Error, something is missing should be one of:",list(nxt) 
```

输出：

```
Error, something is missing should be one of: [(1, 3), (2, 2)]
Error, something is missing should be one of: [(1, 5), (2, 4)]
Error, something is missing should be one of: [(2, 3), (3, 2)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:11:40.737

笼统：

```
from itertools import product

#`m` and `n` denote the upper limit to the domain of the first and second tuple elements.
complete_set = set(product(range(1, n), range(1, m)))

#`i` is whichever sublist you want to test. You get the idea.
test_set = set(l1[i])

missing_set = complete_set - test_set 
```

*编辑*

要检查序列是否乱序：

```
sorted(sequence) == sequence 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:13:03.943

我忽略了您的其他问题，因为您只需要检查前面的字母是否相同。

编辑：显然我错过了一些。新的解决方案效率极低而且有点丑陋：

```
missing = []
num = {}
for i,e in enumerate(l1):
    if not e[0] in num:                # first number groups
        num[e[0]] = []                 # make a list of them (empty... for now)
        for z,q in enumerate(l1):      # for all of the numbers
            if q[0]==e[0]:             # that are in the first number group
                num[e[0]].append(q[1]) # append 
                                       # then start again with second number group

for i in num.keys():                            # for each number group
    for e in xrange(min(num[i]),max(num[i])+1): # from minimum to maximum, iterate
        if not e in num[i]:                     # if any number isn't there
            missing.append((i,e))               # make note

print missing # [(1, 3), (2, 3), (2, 4), (3, 2)] 
```

# networking - 如何在android-x86中保存网络配置

> ID：11766804
> 
> 赞同：2
> 
> 时间：2012-08-01T20:07:29.443
> 
> 标签：networking, configuration, android-x86

在 VirtualBox 中加载 android-x86 后，我正在配置网络（用于 Bridge）：

```
route add default gw 192.168.0.1 dev eth0
setprop net.dns1 192.168.0.1 
```

一切正常，但我不想在加载虚拟机时编写此命令。有没有办法在一些配置或其他东西中编写这个命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:35:07.343

将其添加到 /etc/init.sh 的末尾

# facebook - 错误的响应代码：URL 返回了错误的 HTTP 响应代码：404

> ID：11766805
> 
> 赞同：3
> 
> 时间：2012-08-01T20:07:37.277
> 
> 标签：facebook, httpresponse

我已经解决这个问题很多个晚上了......请帮忙！

我已经更改了很多标题来尝试。而且我确实把 og:url 和 og:title 放在了页面的 html 代码上......但是报告说我没有这样做......

页面无法抓取....

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.cmaj7th.com%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.cmaj7th.com%2F)

有什么我不知道的问题吗？请帮我！

# android - 如果我使用特定的背景图像，Android 应用程序强制在启动屏幕后关闭

> ID：11766806
> 
> 赞同：0
> 
> 时间：2012-08-01T20:07:37.827
> 
> 标签：android, android-manifest, splash-screen

这让我很困惑。如果我将 android:background 设置为专门为 splashActivity 设计的 PNG，则应用程序会在图像显示三秒后关闭。

如果我使用与 mainActivity 相同的 android:background 图像，应用程序运行得很好。如果我不在 xml 中包含背景，它也可以正常运行。

唯一的区别是我使用了不同的背景图像。我正在使用的启动图像肯定位于 drawable-hdpi 中，并且它肯定在 R.java 中被引用。

有任何想法吗？

Logocat，这仅在我使用我想使用的启动图像时显示：

```
08-01 16:09:39.557: D/AndroidRuntime(15794): Shutting down VM
08-01 16:09:39.557: W/dalvikvm(15794): threadid=1: thread exiting with uncaught exception (group=0x40a471f8)
08-01 16:09:39.572: E/AndroidRuntime(15794): FATAL EXCEPTION: main
08-01 16:09:39.572: E/AndroidRuntime(15794): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.moboing.abcblast/com.moboing.abcblast.Main}: android.view.InflateException: Binary XML file line #826: Error inflating class <unknown>
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.os.Looper.loop(Looper.java:137)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.ActivityThread.main(ActivityThread.java:4424)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at java.lang.reflect.Method.invoke(Method.java:511)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at dalvik.system.NativeStart.main(Native Method)
08-01 16:09:39.572: E/AndroidRuntime(15794): Caused by: android.view.InflateException: Binary XML file line #826: Error inflating class <unknown>
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.Activity.setContentView(Activity.java:1835)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at com.moboing.abcblast.Main.onCreate(Main.java:28)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.Activity.performCreate(Activity.java:4465)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-01 16:09:39.572: E/AndroidRuntime(15794):    ... 11 more
08-01 16:09:39.572: E/AndroidRuntime(15794): Caused by: java.lang.reflect.InvocationTargetException
08-01 16:09:39.572: E/AndroidRuntime(15794):    at java.lang.reflect.Constructor.constructNative(Native Method)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
08-01 16:09:39.572: E/AndroidRuntime(15794):    ... 24 more
08-01 16:09:39.572: E/AndroidRuntime(15794): Caused by: java.lang.OutOfMemoryError
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.Bitmap.nativeCreate(Native Method)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.content.res.Resources.loadDrawable(Resources.java:1935)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.widget.ImageView.<init>(ImageView.java:119)
08-01 16:09:39.572: E/AndroidRuntime(15794):    at android.widget.ImageView.<init>(ImageView.java:109)
08-01 16:09:39.572: E/AndroidRuntime(15794):    ... 27 more 
```

# .net - 用另一个下拉列表 ASP.NET 中的值填充下拉列表

> ID：11766808
> 
> 赞同：0
> 
> 时间：2012-08-01T20:07:45.213
> 
> 标签：.net, sql, cascadingdropdown, html-select

根据另一个下拉列表中定义的值将下拉列表进行数据绑定时遇到了一些麻烦。

```
Protected Sub CategoryDDL_SelectedIndexChanged(sender As Object, e As EventArgs) Handles CategoryDDL.SelectedIndexChanged
    qaDDL.Items.Clear()
    qaDDL.Items.Insert(0, New ListItem("(New Question)"))

    If CategoryDDL.SelectedValue = "(New Category)" Then
        CategoryName.Text = Nothing
    Else
        Dim filter As String = "categoryID = '" + CategoryDDL.SelectedValue.ToString() + "'"
        Dim dv As DataView = CType(SqlDataSource1.Select(DataSourceSelectArguments.Empty), DataView)
        dv.RowFilter = filter
        For Each drv As DataRowView In dv
            CategoryName.Text = drv("Name").ToString()
        Next 
```

我已经尝试过类似于填充上面的文本框的方法，但我不知道如何将它用于数组。

```
 dv = CType(SqlDataSource2.Select(DataSourceSelectArguments.Empty), DataView)
        For Each drv As DataRowView In dv
            qaDDL.Items.Insert(drv("placement").ToString(), drv("Question").ToString())
        Next
    End If
End Sub 
```

我也尝试过使用简单的数据绑定与 asp:dropdownlist 连接的 datasourceID

```
qaDDL.Databind() 
```

这是页面的样子。

```
<asp:DropDownList runat="server" ID="CategoryDDL" DataSourceID="SqlDataSource1" Width="300px" DataTextField="Name" DataValueField="categoryID" AppendDataBoundItems="True" AutoPostBack="True" >
            <asp:ListItem Value="(New Category)">(New Category)</asp:ListItem>
        </asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings%>" SelectCommand="SELECT categoryID, Name, placement FROM FAQ_category ORDER BY placement"></asp:SqlDataSource>

<asp:DropDownList runat="server" ID="qaDDL" Width="300px" AppendDataBoundItems="True" AutoPostBack="True" DataSourceID="SqlDataSource2" DataTextField="Question" DataValueField="faqID">
            <asp:ListItem Value="(New Question)">(New Question)</asp:ListItem>
        </asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings%>" SelectCommand="SELECT faqID, categoryID, Question, Answer FROM FAQ WHERE (categoryID = @categoryID) ORDER BY placement"> 
```

那么完成此类任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:31:03.250

最好的方法可能是主观的，但我建议*最简单*的方法是使用 AjaxControlToolkit 的[CascadingDropDownList](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)扩展器控件，因为它可以为您节省回发，并且已经为您完成了很多工作。

# ruby-on-rails-3 - Rails field_error_proc - 更改默认错误目标

> ID：11766813
> 
> 赞同：0
> 
> 时间：2012-08-01T20:08:19.323
> 
> 标签：ruby-on-rails-3, slim-lang

我有以下所需的 html（超薄模板）：

```
li
    label
        span
            | Password
            small.error ERROR MESSAGE
        br
        = f.password_field :password 
```

**我想把错误（small.error）放在上面的“span”中。**

我的解决方案（到目前为止）是：

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
    if instance.error_message.kind_of?(Array)
        %(#{html_tag}<small class="error">
        #{instance.error_message.join(',')}</small>).html_safe
    else
        %(#{html_tag}<small class="error">
        #{instance.error_message}</small>).html_safe
    end
end 
```

但是以这种方式，小标签被放置在输入标签的正下方。

我可以更改那个目标位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:45:22.820

用javascript解决问题：

```
$("small.error").each(function(){
    $(this).appendTo($(this).parent("label").find("span"));
}); 
```

# javascript - 子 Div 中的 AJAX 加载

> ID：11766816
> 
> 赞同：1
> 
> 时间：2012-08-01T20:08:37.230
> 
> 标签：javascript, jquery, ajax, accordion

我很难解释这一点，但它是这样的：

我有一个自定义手风琴脚本，当用户单击链接时会触发该脚本。每个页面上有多个手风琴，每个都有自己的链接。该脚本完美运行，每个链接仅打开其正确的手风琴。

现在，我需要修改此脚本以通过 AJAX 将内容加载到手风琴内的 div 中。我加载了 AJAX，但不是加载到一个 DIV，而是加载到具有相同类的每个 DIV。我理解它为什么这样做，但我不知道如何将它与现有脚本联系起来。它使用相同的按钮来加载内容，因此应该相当容易。

手风琴脚本使用该`data-target`属性来指定要打开哪个手风琴，因此应该能够绑定到新脚本，但对于我来说，我无法弄清楚。

这是我到目前为止所拥有的：

HTML 链接：

```
<a class="button maximize accordionHeading" data-target="firstAccordion" href="/Load/?ID=1">More Info</a> 
```

HTML 格：

```
<div class="accordionHidden firstAccordion">
    <div class="row" style="margin-top:10px;">
        <div class="six columns">
            <img class="load-image" src="images/dirt.jpg" />
        </div><!--/.six.columns-->
        <div class="six columns load-description">
            <!-- this is where the content should be loading -->
        </div><!--/.six.columns-->
    </div><!--/.row-->
</div><!--/.accordionHidden firstAccordion--> 
```

脚本：

```
$("a.accordionHeading").bind("click", function(e){
    e.preventDefault();
    $("."+$(this).data("target")).slideToggle();
    $(this).addClass("minimize");
    if ($(this).text() == "More Info") {
       $(this).text("Less Info");
       $(this).removeClass("maximize").addClass("minimize");
    } else {
        $(this).addClass("maximize").removeClass("minimize").text("More Info");
    }

    // this is what I'm trying to add.
    var $loadID = $(this).attr("href");
    $(".load-description").load($loadID);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:13:39.757

根据`data-target`锚点，您可以通过类名选择目标 div，尝试以下操作：

```
var $loadID = $(this).attr("href");
var tgt = $(this).data('target')
$("." + tgt + " .load-description").load($loadID); 
```

# regex - r 正则表达式奇怪的行为

> ID：11766817
> 
> 赞同：3
> 
> 时间：2012-08-01T20:08:42.643
> 
> 标签：regex, r

我正在尝试获取字符串中空格的位置，但我不明白结果。

给定字符串：

> a = "12345,1300 英里"

```
> gregexpr("\\s", a)
[[1]]
[1] 11
attr(,"match.length")
[1] 1 
```

这是有道理的 b/c 空格在字符串的索引 11 中。

```
> gregexpr("[\\s]", a)
[[1]]
[1] 16
attr(,"match.length")
[1] 1 
```

这对我来说没有意义 b/c 索引 16 只是字符串的结尾。那里没有空白，我想知道为什么它跳过了索引 11。

我被难住了，谁能解释为什么会这样？

```
> gregexpr("\\s*", a)
[[1]]
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16
attr(,"match.length")
 [1] 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 
```

这对我来说也没有意义，因为空格匹配字符串中的每个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:24:54.480

在字符类中，您可能不应该使用转义的正则表达式序列。他们没有被正确识别。我不知道这是否是正确的正则表达式行为，但`?regex`页面中有一句话说：“大多数元字符在字符类中失去了特殊含义。”我可以成功`[:space:]`使用

```
> grep("[\\s]", "ttt rrr a vvv")
integer(0)
> grep("[[:space:]]", "ttt rrr a vvv")
[1] 1 
```

在第二种情况下，所有这些子字符串都将匹配该模式。这段代码的行为可能是你所期望的：

```
gregexpr("\\s.*", a)
[[1]]
[1] 11
attr(,"match.length")
[1] 6
attr(,"useBytes")
[1] TRUE 
```

或者：

```
gregexpr("\\s+", a)
[[1]]
[1] 11
attr(,"match.length")
[1] 1
attr(,"useBytes")
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:38:21.227

我可以向您解释`\s*`此案的行为。量词`*`匹配 0 次或多次出现。这个 0 表示如果没有找到空格则匹配：

> 12345,1300 英里

您的正则表达式`\s*`看到第一个字符 "1" ==> 没有`\s`，所以它匹配 0 次出现，意味着它匹配**长度**为 0

然后它继续到第二个字符 "2" ==> 没有`\s`，所以它匹配 0 次出现，意味着它匹配**长度**为 0

在第三个字符....

**此正则表达式不匹配“*字符串中的每个字符*”，它匹配这些字符之间的空字符串。**

# java - 媒体控制器可见性

> ID：11766818
> 
> 赞同：0
> 
> 时间：2012-08-01T20:08:44.060
> 
> 标签：java, android, android-videoview, mediacontroller

我有一个使用 VideoView 播放视频的 Android 应用程序，并且我也在使用媒体控制器。

我的问题是我无法防止媒体控制器在视频播放时消失，并且我还想在视频开始之前使媒体控制器可见，以便用户可以使用媒体控制器最初启动视频。我曾尝试使用 MediaController.show(0)，但这并没有解决我的问题。这是我的代码：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    mVideoView = (VideoView) findViewById(R.id.surface_view);

    mPlay = (ImageButton) findViewById(R.id.play);
    mPause = (ImageButton) findViewById(R.id.pause);
    mReset = (ImageButton) findViewById(R.id.reset);
    mStop = (ImageButton) findViewById(R.id.stop);
    MediaController mc = new MediaController(this);

    mVideoView.setMediaController(mc);

    mPlay.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            playVideo();
        }
    });

    mPause.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                mVideoView.pause();
            }
        }
    });

    mReset.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                mVideoView.seekTo(0);
            }
        }
    });

    mStop.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                current = null;
                mVideoView.stopPlayback();
            }
        }
    });
}

private void playVideo() {
    try {
        final String path = "http://toop.voxelperfect.net/video6.mp4";

        System.out.println("path "+path);
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(SampleActivity.this, "File URL/path is empty",
            Toast.LENGTH_LONG).show();
        } else {
            System.out.println("else ");
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {
                System.out.println("mVideoView.start() ");

                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;
            current = path;
            MediaController mc = new MediaController(this);
            mVideoView.setMediaController(mc);
            mVideoView.setVideoURI(Uri.parse(path)); 
            mVideoView.start();
            mVideoView.requestFocus();
            mc.show(0);
        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage());
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:04:56.253

我通过创建一个实现 MediaController 并覆盖 hide 方法的嵌套类解决了我的问题。

# javascript - 正则表达式检查 & ( ) 和重复字母

> ID：11766819
> 
> 赞同：2
> 
> 时间：2012-08-01T20:08:46.923
> 
> 标签：javascript, regex

我在 javascript 中工作，喜欢检查我的文本是否有一些迹象。我想检查我的文本是否有 ( ) 和 & 字母，或者它是否有重复的字母。一些例子：

> **测试**- 有多个 t
> 
> **测试&t** - 有 &
> 
> **test(test)** - 有 ( and ), 多个 t 和两次 'e' 字母
> 
> **test&(test** - 有 & 和 ( 以及多个 t 和 e
> 
> **test&(&t** - 有多个 t，多个 & 和 (
> 
> **tesra** - 这个不适合任何模式

我已经做了这样的事情：

```
if ((/(\w+)(?=\1)/g).test(str)) alert('multiple signs') 
```

但它只计算多个标志，如果它们是一个接一个，所以“测试”将适合模式并且测试不会。有谁能够帮我？我永远无法理解所有这些正则表达式功能:(它可以分为两个正则表达式。

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:26:39.677

您只需要在`.*`前瞻中添加一个。

```
(\w)(?=.*\1)|[()&] 
```

[在 regexr 上](http://regexr.com?31n4i)查看

我还添加了一个字符类的替代项，以包含您请求的字母`()&`

如果您只想要字母（ASCII）而不是`\w`使用字符类

```
([a-zA-Z])(?=.*\1)|[()&] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:26:57.800

这应该可以做到，尽管它可能不是很有效（因为它没有锚定）：

```
(?:[&()]|(\w)[^\1]*\1) 
```

另一种方法是简单地遍历字符，检查并计算它们：

```
function contains_multiple_chars(str, extra) {
    var chars = {};
    for(var i = 0,l = str.length; i < l;i++) {
        var c = str.charAt(i);
        if(c in chars || c in extra) {
            return true;
        }
        else {
            chars[c] = 1;
        }
    }
    return false;
}

var multiple = contains_multiple_chars(str, {'(': 1, ')': 1, '&': 1}); 
```

（我承认函数名不太合适）

# postgresql - 什么是“澳大利亚东部夏季标准时间”

> ID：11766820
> 
> 赞同：1
> 
> 时间：2012-08-01T20:08:48.727
> 
> 标签：postgresql, timezone

从 /usr/share/postgresql/timezonesets/默认值：

```
#################### AUSTRALIA ####################

ACSST   37800 D  # Central Australia (not in zic)
AESST   39600 D  # Australia Eastern Summer Standard Time (not in zic)
AEST    36000    # Australia Eastern Standard Time (not in zic)
AWSST   32400 D  # Australia Western Summer Standard Time (not in zic)
AWST    28800    # Australia Western Standard Time (not in zic)
CADT    37800 D  # Central Australia Daylight-Saving Time (not in zic)
CAST    34200    # Central Australia Standard Time (not in zic)
LHDT    39600 D  # Lord Howe Daylight Time, Australia (not in zic)
LHST    37800    # Lord Howe Standard Time (Australia)
                 #     (Australia/Lord_Howe)
LIGT    36000    # Melbourne, Australia (not in zic)
NZT     43200    # New Zealand Time (not in zic)
SADT    37800 D  # South Australian Daylight-Saving Time (not in zic)
SAST    34200    # South Australian Standard Time (not in zic)
WADT    28800 D  # West Australian Daylight-Saving Time (not in zic)
WAST    25200    # West Australian Standard Time (not in zic)
WDT     32400 D  # West Australian Daylight-Saving Time (not in zic) 
```

所以那里有一些夏令时条目，但对于“东部”，它改为“东部夏季标准时间”。那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:25:38.820

“夏季标准”是“夏令时”的旧名称。有关官方定义，请参阅[澳大利亚政府时间页面](http://australia.gov.au/about-australia/our-country/time)。

# c# - 确定 Base 类型的 Subtype 以显示不同的属性

> ID：11766823
> 
> 赞同：0
> 
> 时间：2012-08-01T20:09:10.790
> 
> 标签：c#, asp.net-mvc-4

我有一个 MVC 视图，它也调用了一些部分视图/

有一个可以是不同类型的文档，例如采购订单或发票。每种不同的文档类型都有一些独特的字段，而另一种则没有。它们都具有基本“文档”类的一些属性。

我的视图需要根据文档的特定类型显示文档详细信息，然后继续并显示所有文档类型具有的公共元素。

我想将文档作为 Document 传递，这样我就不必重复代码，然后在显示文档的独特方面时，只需检测文档是哪个子类型，并使用 switch 语句来显示该类型的特定部分视图。

但是，如果我从 Documents dbset 中提取 Document，它似乎不会被检测为采购订单或发票，并且无法转换为子类型。

我该如何做到这一点？

获取一个文档 -> 确定它是哪种类型 -> 在部分视图中显示唯一详细信息 -> 在部分视图中显示通用详细信息。

所以这样处理共同方面的代码可以被重用。

上下文的一些代码：主控制器：

```
public ActionResult Main(string doctype, int id)
    {
        ActionCenterViewModel acvm = new ActionCenterViewModel();
        acvm.Document = db.Documents
            .Where(i => i.ID == id)
            .SingleOrDefault();
    return View(acvm);
} 
```

主视图：

```
@model Production.ViewModels.ActionCenterViewModel
@{
ViewBag.Title = "Main";
}
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/actioncenter.css")" />
@Html.Action("DisplayDocumentDetails", Model.Document) 
```

次要动作：

```
public ActionResult DisplayDocumentDetails(Document doc)
    {
        switch (doc.DocumentType)
        {
            case "WorkOrder":
                return View("_DisplayWorkOrderDetails");
        }
                return null;

    } 
```

次要观点：

```
@model Production.Models.WorkOrder

<div id="documentDetails">
<div class="actionCenterDocInfoLabel fLeft">WorkOrder:</div> 
<div class="actionCenterDocInfoValue fLeft"> @Model.ID</div>

<div class="actionCenterDocInfoLabel fLeft leftMargin20">Vendor:</div> 
<div class="actionCenterDocInfoValue fLeft"> @Model.Vendor.FriendlyName</div> 
```

ETC...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:20:57.580

我理解这一点的方式是您有一个继承结构，并且您将基本类型传递给*主*视图。在这个*主*视图中，您正在呈现公共字段。如果实际模型类型是派生类，您可以在*主*视图中进行检查并调用`Html.RenderPartial`.

例如：

```
@if (Model is MyDerivedType) {
    Html.RenderPartial("myPartial", (MyDerivedType)Model);
} 
```

视图`myPartial`接受类型的模型`MyDerivedType`。我的例子可能很无聊，但希望你能明白。

# c# - 如何仅在 Web 浏览器控件中显示网页正文？

> ID：11766825
> 
> 赞同：0
> 
> 时间：2012-08-01T20:09:18.943
> 
> 标签：c#, .net, winforms

我正在尝试打开一个指向共享点页面的网络浏览器控件，但我需要去掉母版页和所有视觉垃圾，只显示正文。我对winforms有点缺乏经验，我想知道如何做到这一点。有没有办法只在浏览器控件中显示 body DOM 元素

更新：我试图下载完整的正文（希望只是对正文部分进行子字符串化），但我收到服务器错误“401 Unauthorized”。我确实将 WebClient 对象的凭据设置为适当的用户名和密码，但仍然是同样的错误。

我还尝试从 WebBrowser 控件中获取原始 HTML，但尽管它会成功 .navigate()，但如果我尝试访问该控件的任何属性，它表示 WebBrowser 控件未设置为目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:25:53.300

我认为这不能通过使用标准的网络浏览器控制来完成。您需要手动解析 html 文档并创建一个您想要查看的页面。另一种选择是从共享点 Web 服务请求必要的信息并以适当的方式显示它。

请查看[SharePoint 2010 Web 服务](http://msdn.microsoft.com/en-us/library/ee705814.aspx)和[将 SharePoint Foundation 2010 托管客户端对象模型与 Open XML SDK 2.0 一起使用](http://msdn.microsoft.com/en-us/library/ee956524.aspx)。第二种选择更可取。

# objective-c - 如何为按钮设置动画？（目标 c）

> ID：11766827
> 
> 赞同：1
> 
> 时间：2012-08-01T20:09:28.583
> 
> 标签：objective-c, xcode, animation, button, translation

我是 Xcode 和 Objectice C 的新手，希望对我的应用程序有所帮​​助。我想为按钮添加翻译动画。例如，将“按钮”从 X:30 Y:50 移动到 X:10 Y:70 的代码是什么？谢谢 ：）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T20:16:29.517

对于旧的编译器/iOS：

```
// set the original frame
button.frame = CGRectMake(30, 50, 100, 100);

// animate to the new one
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.75];
button.frame = CGRectMake(10, 70, 100, 100);
[UIView commitAnimations]; 
```

对于较新的编译器/iOS：

```
// set the original frame
button.frame = CGRectMake(30, 50, 100, 100);

// animate
[UIView animateWithDuration:0.75 animations:^{
    button.frame = CGRectMake(10, 70, 100, 100);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:18:44.917

UIView（UIButton 的超类）具有动画的能力，使用如下所示。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:2];
CGAffineTransform transform = CGAffineTransformMakeTranslation(-20, 20);
[aButton setTransform:transform];
[UIView commitAnimations]; 
```

# c# - C#：如何获取 MM/DD/YYYY 的日期字符串并将其转换为 YYYY-MM-DD

> ID：11766828
> 
> 赞同：0
> 
> 时间：2012-08-01T20:09:38.590
> 
> 标签：c#

> **可能重复：**
> [将日期格式从 dd/MM/yyyy 更改为 MM/dd/yyyy](https://stackoverflow.com/questions/2882070/changing-date-format-from-dd-mm-yyyy-to-mm-dd-yyyy)

我有一个字符串字段，其日期显示为 MM/DD/YYYY，但我需要它是 YYYY-MM-DD。

这是它的样子：

```
DateReported = (e.Attribute("hciIIDateReported") 
```

我想也许我可以做一个 string.Format() 但我找不到只给出 YYYY-MM-DD 的自定义日期和时间格式字符串。我在那种格式中找到的那个是随时间一起来的，这是行不通的。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:18:43.077

根据 Henk 的帖子，我几乎投票赞成重复，但注意到你说你“找不到只给出 YYYY-MM-DD 的自定义日期和时间格式字符串”。这对我来说似乎很奇怪 - 您是否阅读了[有关自定义日期和时间格式字符串的 MSDN 文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)？

重要的是，您几乎可以肯定地使用不变的文化进行解析和格式化；通常，您会使用具有不变文化（或其他一些已知的固定文化）的自定义格式模式和具有用户文化的标准格式模式。

所以，你想要这样的东西：

```
var culture = CultureInfo.InvariantCulture;
DateTime parsed = DateTime.ParseExact(text, "MM/dd/yyyy", culture);
string formatted = parsed.ToString("yyyy-MM-dd", culture); 
```

但是，我*强烈*`DateTime`建议您尽可能长时间地保持该值。你肯定需要它作为一个字符串*吗*？你真的应该只在API边界处转换回字符串，你绝对*被迫*这样做，IMO。您添加的每次转化都是潜在的错误来源。

顺便说一句，如果您想使用一组更丰富的日期/时间类型，您可能需要考虑我的[Noda Time](http://noda-time.googlecode.com)库，您可以在其中将此值保留为 a `LocalDate`，这表明它没有时间组件...

另请注意，如果这些是用户输入的可能无效的值，则应考虑[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:16:24.493

您可以先解析它：

```
DateTime datetime = DateTime.Parse("01/01/2012"); 
```

如果您不使用英国语言​​环境，则需要添加：

```
DateTime datetime = DateTime.Parse("01/01/2012", new CultureInfo("en-GB")); 
```

然后吐出来

```
string output = datetime.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:16:59.363

尝试`DateTime.ParseExact(yourDateString, "MM/dd/yyyy", null).ToString("yyyy-MM-dd")`

**评论后编辑**：

```
DateTime.ParseExact(yourDateString, @"MM\/dd\/yyyy", null).ToString("yyyy-MM-dd") 
```

我忘记了斜线 ( `/`) 在日期格式字符串中具有特殊含义。现在它已经逃脱了，这似乎有效。我尝试过这个。

但是，将其`CultureInfo.InvariantCulture`用作“提供者”而不是当前的文化（这就是你得到的`null`）更安全。这样人们就不必担心存在某种结果不同的异域文化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:13:18.663

```
DateReported.ToString("yyyy-MM-dd", CultureInfo.InvariantCulture); 
```

编辑：这是假设 DateReported 是 DateTime 类型的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T20:17:43.207

这是 MSDN 自定义格式字符串的链接； [http://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.71).aspx)

现在，如果您可以构建自己的：

```
DateTime.Now.ToString("yyyy-MM-dd"); 
```

在你的情况下，如果你想打印出 DateReported 这将是：

```
Console.WriteLine(DateReported.ToString("yyyy-MM-dd")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T20:38:48.240

这肯定有效

```
string DateReported = DateTime.ParseExact(e.Attribute("hciIIDateReported"), "MM/dd/yyyy", null).ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-01T20:15:09.473

如果您已经只有该字段，则字符串处理可能是最直接的方法：

```
string processDate(string inputDate) // inputdate is like "02/05/1995"
{
    string [] fields = inputdate.Split('/');
    return string.Format("{0}-{1}-{2}", fields[2], fields[0], fields[1]);
} 
```

我认为这会奏效。如果您可以先将其转换为 DateTime，则其他一些答案也可以。

# eclipse - Eclipse 上的 Oracle JDBC 驱动程序错误

> ID：11766829
> 
> 赞同：2
> 
> 时间：2012-08-01T20:09:46.167
> 
> 标签：eclipse, oracle, jdbc, timezone

我正在尝试使用 Eclipse 中的存储过程执行查询，但我不断收到此错误，我不确定我缺少什么才能执行查询。

该查询在将运行代码的实际服务器中工作，但我试图在 Eclipse 中模仿该环境（也就是说我知道问题不在代码中，但我显然缺少依赖项或其他东西？我是没有把握）。

错误是：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError:
oracle.jdbc.driver.T2CConnection.t2cSetSessionTimeZone(JLjava/lang/String;) 
```

这是我在 eclipse 项目中的内容：

图书馆：

*   激活.jar
*   邮件.jar
*   ojdbc5.jar
*   rt.jar
*   JRE系统库[J2SE-1.4]

订购和出口：

*   ojdbc5.jar
*   rt.jar
*   激活.jar
*   邮件.jar
*   源代码
*   JRE系统库[J2SE-1.4]

另外，编译器信息：

*   Java 编译器 - J2SE-1.4
*   生成的 .class 文件兼容性 - 1.2
*   源兼容性 - 1.3

不知道我应该提供什么其他信息..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:15:24.180

我记得`java.lang.UnsatisfiedLinkError`当一个应该在系统路径上的dll不存在时。

在我的例子中，有一些依赖于 dll 中的本地 C++ 代码的 JAVA 代码。每当类路径中缺少 dll 时，就会观察到错误。

[如果这敲响了警钟，请尝试按照此](https://stackoverflow.com/questions/957700/how-to-set-the-java-library-path-from-eclipse)答案的说明添加所需的 dll 。

**更新**

试试这个 ：

> 将 C:\app\\product\11.2.0\dbhome_2\jdk\bin 添加到 PATH 环境变量中。

另外，请检查[**此**](https://forums.oracle.com/forums/thread.jspa?threadID=2294381)线程以获取更多线索。该线程上的 OP 通过执行上述操作解决了他的问题。

**更新 2**

似乎可能需要特定版本的驱动程序 jar。您是否安装了 Oracle 客户端？看看**[这个](http://www.progtown.com/topic529131-problem-with-jdbc-oci-oracle-11g-r2-exception.html)**（不幸的是，翻译不好）线程。滚动到底部以查看该 OP 如何解决同样的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-24T06:20:00.530

问题也可能是因为“瘦”和“oci”驱动程序声明。将驱动程序名称从“oci”更改为“thin”将解决问题

# oracle - 使用 Data Pump API 排除统计信息

> ID：11766830
> 
> 赞同：0
> 
> 时间：2012-08-01T20:09:49.910
> 
> 标签：oracle, datapump

使用 Oracle Data Pump API（DBMS_DATAPUMP 包）导出数据时如何排除所有统计信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:52:35.733

[在OTN 论坛](https://forums.oracle.com/forums/thread.jspa?threadID=2422268&tstart=0)中回答

```
dbms_datapump.METADATA_FILTER(
  handle = your_handle_here,
  name = 'EXCLUDE_PATH_LIST',
  value = 'STATISTICS'
); 
```

# python - 将 Python 列表导出到 Excel

> ID：11766833
> 
> 赞同：10
> 
> 时间：2012-08-01T20:10:02.563
> 
> 标签：python, excel, com

我正在尝试通过我在标题处导入的 Win32COM 客户端将列表导出到 excel。我创建的对象编码如下，但我似乎无法让它将每个值导出到电子表格中自己的行。如果我能得到一个好的指针（除了放弃 python ！！:D），我将不胜感激。

```
class XcelExport():
    def excel(self):
        app = 'Excel'
        xl = win32.gencache.EnsureDispatch('%s.Application' % app)
        ss = xl.Workbooks.Open(r'C:\MyFile.xls')
        sh = ss.ActiveSheet
        xl.Visible = True
        sleep(.1)  
        sh.Cells(1,1).Value = 'Export-to-%s : Items' % app
        sleep(.1)
        for i in EventTableRFT:
            sh.Range("A").Value = i 
        sh.Cells(i+2,1).Value = "End of the List!"

xprt = XcelExport()
xprt.excel() 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T13:38:26.233

既然你似乎喜欢我的回答/评论，这里有一个正确的答案：

[Python Excel](http://www.python-excel.org/)几乎拥有您所需要的一切。如果您想要更集成但似乎有限的东西，可以[使用 IronSpread](http://www.ironspread.com/index.html)。XLRD 和 XLWT 是很棒的软件包，但它们不支持 *.xlsx 文件。IronSpread 仅适用于 Windows，并且仅支持 '07 和 '10 版本的 Excel。每个都有它的警告。最后，您可以同时使用两者（编辑为 *.xlsx，然后另存为 *.xls（我有人遇到过大 *.xls 文件的速度问题，但我的脚本在 1分钟。））。

哦，我肯定会阅读（略读）有关有趣功能的文档，例如获取 xlrd/xlwt 的单元格类型等。这是值得的，如果只是因为它很短，并且会为您节省实验的学习曲线。

xlwt 的超短示例：

```
import xlwt
from tempfile import TemporaryFile
book = xlwt.Workbook()
sheet1 = book.add_sheet('sheet1')

supersecretdata = [34,123,4,1234,12,34,12,41,234,123,4,123,1,45123,5,43,61,3,56]

for i,e in enumerate(supersecretdata):
    sheet1.write(i,1,e)

name = "random.xls"
book.save(name)
book.save(TemporaryFile()) 
```

xlrd 的超短示例：

```
import xlrd
from xlrd import open_workbook
book = open_workbook('random.xls')
sheet1 = book.sheet_by_index(0)
data = []

for i in xrange(sheet1.nrows):
    data.append(sheet1.cell(i,1).value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:45:27.850

您缺少 Range 中的单元格行号，并且需要在每次循环迭代后增加单元格行。

```
sh.Range("A1").Offset(0,x).Value = i 
```

这种改变应该奏效。

```
class XcelExport():
    def excel(self):
        app = 'Excel'
        xl = win32.gencache.EnsureDispatch('%s.Application' % app)
        ss = xl.Workbooks.Open(r'C:\MyFile.xls')
        sh = ss.ActiveSheet
        xl.Visible = True
        sleep(.1)  
        sh.Cells(1,1).Value = 'Export-to-%s : Items' % app
        sleep(.1)
        x=0
        for i in EventTableRFT:
            sh.Range("A1").Offset(0,x).Value = i #You need to increment the cell row
            x+=1
        sh.Cells(i+2,1).Value = "End of the List!"

xprt = XcelExport()
xprt.excel() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-18T14:21:45.933

```
class Signal(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def to_dict(self):
        return {
            'x': self.x,
            'y': self.y,
        }

def file_save_excel(dataset, filename, sheet_name, new_sheet):
    dataset = dataset.applymap(lambda x: x.encode('unicode_escape').
                               decode('utf-8') if isinstance(x, str) else x)

    print('Writing the processed dataset to excel file...')
    writer = pd.ExcelWriter(filename, engine='openpyxl')

    if os.path.exists(filename) and new_sheet:
        book = openpyxl.load_workbook(filename)
        writer.book = book

    dataset.to_excel(writer, sheet_name=sheet_name, index=False)
    writer.save()
    writer.close()
    return True

dataframe = pandas.DataFrame.from_records([s.to_dict() for s in signals])
file_save_excel(dataframe, 'FileName.xlsx', 'SheetName', True) 
```

# c# - MVC 比较属性在服务器端不起作用

> ID：11766837
> 
> 赞同：2
> 
> 时间：2012-08-01T20:10:23.933
> 
> 标签：c#, asp.net-mvc-4

我有以下代码

```
[Required]
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 8)]
[Display(Name = "Password")]
[DataType(DataType.Password)]
public string Password { get; set; }

[Required]
[DataType(DataType.Password)]
[Display(Name = "Confirm password")]
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 8)]
[Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
public string ConfirmPassword { get; set; } 
```

当我显示表单时，客户端验证有效，但是当我在服务器端测试它时，它始终有效（尝试使用 Password=pass1234 和 ConfirmPassword=nonmatchingpassword）

[我还尝试了其他一些属性，例如http://foolproof.codeplex.com/](http://foolproof.codeplex.com/)中的 EqualTo，但同样的问题。

我已经包含了方法

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Register(RegisterViewModel model) 
{
    if (WebSecurity.IsAuthenticated)
    {
        return RedirectToAction("Index", "Home");
    }

    if (ModelState.IsValid) 
    {
        // register user...
    }

    model.Countries = this.Countries.FindAll().OrderBy(c => c.Name);
    return View(model);
} 
```

这就是我渲染它的方式

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { @class = "form", @id = "register-form" }))
{
@Html.AntiForgeryToken()
<ul class="form-fields">
    ...
    <li class="form-field">
        @Html.LabelFor(m => m.Password)
        @Html.ValidationMessageFor(m => m.Password)
        @Html.EditorFor(m => m.Password)
    </li>
    <li class="form-field">
        @Html.LabelFor(m => m.ConfirmPassword)
        @Html.ValidationMessageFor(m => m.ConfirmPassword)
        @Html.EditorFor(m => m.ConfirmPassword)
    </li>
    ...     
    <li class="form-actions"> 
        <button class="submit">register</button>
    </li>
</ul>
} 
```

有什么想法可能是错的吗？我正在使用 MVC4 RC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:15:43.503

这是 Microsoft 在其默认 MVC 项目模板中的做法：

```
 [PropertiesMustMatch( "Password", "ConfirmPassword", ErrorMessage = "The                    password and confirmation password do not match." )]
    public class RegisterModel
    {
        [Required]
        [DisplayName( "User name" )]
        public string UserName { get; set; }

        [Required]
        [DataType( DataType.EmailAddress )]
        [DisplayName( "Email address" )]
        public string Email { get; set; }

        [Required]
        [ValidatePasswordLength]
        [DataType( DataType.Password )]
        [DisplayName( "Password" )]
        public string Password { get; set; }

        [Required]
        [DataType( DataType.Password )]
        [DisplayName( "Confirm password" )]
        public string ConfirmPassword { get; set; }
} 
```

我不确定您是如何进行服务器端测试的。如果这对您不起作用，也许您可​​以发布失败的测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:20:05.270

在第二个项目上取出 StringLength。您不需要它，因为第一个项目已经有了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T07:11:25.757

聚会有点晚了，但我只是遇到了类似的问题。这是由 jquery unobtrusive javascript 文件中的错误引起的。以后的版本会修复它，我刚刚跑了

`Install-Package jQuery.Validation.Unobtrusive`

它安装了 v2，对我来说效果很好。你的旅费可能会改变。

这个问题已经在[这里](https://stackoverflow.com/questions/8376322/mvc3-compareattribute-client-side-bug)得到了正确的回答。

# python - 如何在 python 中使用 std::wstring

> ID：11766847
> 
> 赞同：0
> 
> 时间：2012-08-01T20:11:31.017
> 
> 标签：python, internationalization, swig, std

Python 正在调用一个 C++ 函数（使用 swig 包装）。

**C++：**

```
 std::wstring getFilePathMultiByte(); 
```

我可以在python中调用这个函数。问题是如何使用这个返回的 wstring？想要将文件名附加到此路径，这会产生错误，如下面的输出所示。

**Python：**

```
 path = getFilePathMultiByte()
  print path, type(path)
  file = path + "/Information.log" 
```

**输出：**

```
_2012ad3900000000_p_std__wstring, type 'SwigPyObject'
TypeError: unsupported operand type(s) for +: 'SwigPyObject' and 'str' 
```

如何在 python 中创建 std::wstring？这可能允许我进行连接。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:01:35.020

以下示例在我的机器上使用 SWIG 2.0 按预期工作：

```
%module test

%include "std_wstring.i"

%inline %{
  std::wstring foo() {
    return L"hi";
  }
%} 
```

然后我测试了：

```
Python 2.7.3rc2 (default, Apr 22 2012, 22:30:17)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> path = test.foo()
>>> print path, type(path)
hi <type 'unicode'>
>>> file = path + "/Information.log"
>>> print file
hi/Information.log
>>> 
```

我不确定你在这里做错了什么——我猜你没有得到`%include "std_wstring.i"`，但鉴于你所展示的内容，很难确定。

# jquery-ui - JQuery UI datepicker 神奇地停止提取正确的月份

> ID：11766850
> 
> 赞同：0
> 
> 时间：2012-08-01T20:11:36.607
> 
> 标签：jquery-ui, jquery-ui-datepicker

编辑：我刚刚做了一个 jsfiddle 来演示这里的问题：http: [//jsfiddle.net/GvjRd/3/](http://jsfiddle.net/GvjRd/3/)

我有一个使用 JQuery UI 日期选择器的网络工具。它已经顺利运行了数周，但突然间它今天停止了工作。无论我在日历上选择哪一天/月/年，当我选择一天并调用`alert(currentTime.getMonth());`它时，都会返回“7”。它返回日/年就好了。

我开始单独测试日期选择器，制作了一个非常简单的页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link type="text/css" href="ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
    <link rel="stylesheet" href="demos.css">
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.21.custom.min.js"></script>
    <script type="text/javascript">
        $(function() {
            $("#datepicker").datepicker({
                onSelect : function(dateText, inst) {
                    var currentTime = new Date();
                    currentTime.setDate($("#datepicker").datepicker("getDate").getDate());
                    alert(currentTime.getMonth());
                }
            });
        });
    </script>

</head>
<body>
            Date:
            <input type="text" id="datepicker">
</body> 
```

即使在此页面上，无论我选择什么日期/月份/年份组合，警报都会显示“7”。还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:25:55.743

JavaScript 中的月份是从零开始的，因此 7 = 第 8 个月或 8 月。

在您的示例中，您将 设置`currentTime`为今天，然后仅将该日期对象的日期更改为日历上选择的日期，而月份和年份保持不变。因此，`currentTime.getMonth()`将始终显示运行脚本的月份，而不是从日历中选择的日期。为此，请使用`currentTime.setMonth($("#datepicker").datepicker("getDate").getMonth());`

**[jsFiddle 示例](http://jsfiddle.net/j08691/GvjRd/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:55:02.680

只要确保您没有`currentTime`提前设置变量：

```
$(function() {
                $("#datepicker").datepicker({
                    onSelect : function(dateText, inst) {
                        var currentTime;
                        currentTime = $("#datepicker").datepicker("getDate");
                        alert(currentTime.getMonth() + 1);
                    }
                });
            });​ 
```

# magento - 是否可以将多个属性值添加到 Magento 产品中的单个属性？

> ID：11766855
> 
> 赞同：0
> 
> 时间：2012-08-01T20:11:53.980
> 
> 标签：magento, enterprise

我在 Magento Enterprise (v1.11.2.0) 中有一个基本产品。我需要在该产品的许多说明书中添加 0。我知道我可以硬编码文本框中的链接并将它们显示在页面上，但在某些时候，我需要通过 Magento API 访问这些属性的值，所以我需要打破他们。

我知道我可以向集合中添加多个属性（例如指令 1、指令 2 等），但这不是很干净或可扩展的。

我也知道我可以添加多个“自定义选项”，但这似乎并不正确。如果我遇到需要这些自定义选项的产品，那真的会混淆区分两者（实际自定义选项和虚假自定义选项）的面向用户的视图逻辑。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:20:51.640

创建一个名为`instructions`eav_attribute`varchar`的属性。将指令1、指令2等的所有数据`instructions`以序列化形式保存在属性中。因此，下次当您显示说明时，只需对它们进行反序列化即可。

或者你在寻找不同的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:20:28.020

这取决于你愿意做多少工作。我最近构建了一个具有多对一关系的模块，并基于分层定价的工作原理。我基本上使用了一个自定义渲染器循环遍历所有当前值并将它们插入到表中。然后我使用 javascript 插入和删除行。如果您复制用于层级定价的类 magento，您应该不会有太多问题。

# r - 将R ggplot中直方图中的y轴标准化为比例

> ID：11766856
> 
> 赞同：55
> 
> 时间：2012-08-01T20:11:57.103
> 
> 标签：r, plot, ggplot2, histogram

我有一个非常简单的问题，让我把头撞在墙上。

我想缩放直方图的 y 轴以反映每个 bin 组成的比例（0 到 1），而不是像使用 y=..density.. 那样让条形的面积总和为 1，或将最高条设为 1，就像 y=..ncount.. 一样。

我的输入是名称和值的列表，格式如下：

```
name    value
A   0.0000354
B   0.00768
C   0.00309
D   0.000123 
```

我失败的尝试之一：

```
library(ggplot2)
mydataframe < read.delim(mydata)
ggplot(mydataframe, aes(x = value)) +
geom_histogram(aes(x=value,y=..density..)) 
```

这给了我一个面积为 1，但高度为 2000 和 1000 的直方图：

[![尝试](../Images/0d3ebf1362c2421656656d5910a342a0.png)](https://i.imgur.com/nhDcF.png)

并且 y=..ncount.. 给了我一个最高柱状图 1.0 的直方图，并按比例缩放到它：

[![尝试](../Images/9069542ac585dd2b1a50635d5b7f1a1c.png)](https://i.imgur.com/wog8K.png)

但我想让第一个条的高度为 0.5，另外两个为 0.25。

R 也不承认 scale_y_continuous 的这些用途。

```
scale_y_continuous(formatter="percent")
scale_y_continuous(labels = percent)
scale_y_continuous(expand=c(1/(nrow(mydataframe)-1),0) 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-01T20:34:18.920

请注意，重新缩放`..ncount..`到最大值 1.0，而`..count..`是未缩放的 bin 计数。

```
ggplot(mydataframe, aes(x=value)) +
  geom_histogram(aes(y=..count../sum(..count..))) 
```

这使：

![在此处输入图像描述](../Images/9d9e4bf3e731bf1ef6d839570adc7b75.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-08-14T23:07:53.203

从最新最好的 ggplot2 版本 3.0.0 开始，格式发生了变化。现在您可以将`y`值包装起来`stat()`而不是弄乱`..`东西。

```
ggplot(mydataframe, aes(x = value)) +
  geom_histogram(aes(y = stat(count / sum(count)))) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-01T20:37:15.493

从 ggplot2 0.9 开始，许多格式化程序函数已移至 scales 包，包括`percent_format()`.

```
library(ggplot2)
library(scales)

mydataframe <- data.frame(name = c("A", "B", "C", "D"),
                          value = c(0.0000354, 0.00768, 0.00309, 0.000123))

ggplot(mydataframe) + 
  geom_histogram(aes(x = value, y = ..ncount..)) +
  scale_y_continuous(labels = percent_format()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T15:20:14.743

总结以上答案：

```
library(tidyverse)

mydataframe <- data.frame(name = c("A", "B", "C", "D"),
                          value = c(0.0000354, 0.00768, 0.00309, 0.000123))

ggplot(mydataframe, aes(x = value)) +
  geom_histogram(aes(y = stat(count / sum(count)))) +
  scale_y_continuous(labels = scales::percent_format()) +
  labs(x="", y="") 
```

[![在此处输入图像描述](../Images/b3fa53b4b28542d46d6256ddcb3e3054.png)](https://i.stack.imgur.com/M6m23.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-16T16:00:50.797

我只是想缩放轴，将 y 轴除以 1000，所以我做了：

```
ggplot(mydataframe, aes(x=value)) +
  geom_histogram(aes(y=..count../1000)) 
```

# linux - 在 LAMP 中创建新文件或目录？

> ID：11766860
> 
> 赞同：0
> 
> 时间：2012-08-01T20:12:58.480
> 
> 标签：linux, ubuntu

如何使用终端和 LAMP 在 LAMP 根文件夹 (var/www) 中创建目录。我刚刚开始使用 Linux/Ubuntu，而且我刚刚设置了 LAMP，所以我仍然不确定如何做到这一点。

设置目录后，如何在该文件夹/目录中创建子文件夹（图像、css、包含等）。然后创建一个 .php、.css 和可能的 .js 文件并将它们保存到根目录和子文件夹中？

谢谢

将要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:16:43.737

`mkdir`是你想要的linux功能

例子：

```
mkdir DIR_NAME 
```

[http://www.oreillynet.com/linux/cmd/cmd.csp?path=m/mkdir](http://www.oreillynet.com/linux/cmd/cmd.csp?path=m/mkdir)

阅读 linux 的基础知识是个好主意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:04:06.550

每行步数：

1.  在 /var/www 下创建一个名为“mysite”的目录：“mkdir /var/www/mysite”
2.  将工作目录更改为 /var/www/mysite: "cd /var/www/mysite"
3.  打开名为“vile”的编辑器并从一个名为“index.php”的新文档开始：“vi index.php”

有关恶意编辑器的帮助，请访问[http://linux.die.net/man/1/vi](http://linux.die.net/man/1/vi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:32:56.757

如果你想创建一个文本文件，你可以使用一个编辑器，例如`emacs`

# jquery - 自制的 jQuery 工具提示脚本表现不稳定

> ID：11766866
> 
> 赞同：0
> 
> 时间：2012-08-01T20:13:15.363
> 
> 标签：jquery

这是我的脚本：http: [//jsfiddle.net/w3kXj/2/](http://jsfiddle.net/w3kXj/2/)

如您所见，我正在尝试使复选框输入显示`.terms-of-use`悬停时的 div。但是，div 的行为是非常不可预测的。有时它在悬停时根本不显示，尤其是当您从下方将鼠标悬停时。到底他妈发生了什么？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:24:32.830

使用 stop(true,true) [.stop()](http://api.jquery.com/stop/)来解决 div 一直消失的问题，但它仍然有点奇怪。

```
$(function(){
// email results page tooltip hover
    $('.terms-of-use').hide();
    $('.agree-statement, .terms-of-use').hover(function(){
        $('.terms-of-use').stop(true,true).fadeToggle(); 
    });   
});​ 
```

[http://jsfiddle.net/w3kXj/5/](http://jsfiddle.net/w3kXj/5/)

我会推荐使用这个插件[hoverintent](http://cherne.net/brian/resources/jquery.hoverIntent.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:25:28.553

通过在工具提示触发器和工具提示本身上侦听悬停和悬停，您将引入许多可能的问题。解决方法如下：

*   只听`mouseenter`_`.agree-statement`
*   听听`mouseleave`两者`.agree-statement`和`.terms-of-use`
*   在`mouseleave`处理程序中，仅当它不是工具提示本身**时才隐藏。**[`toElement`](https://stackoverflow.com/questions/8600174/event-toelement-in-ie8-and-firefox)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:33:37.380

我认为目的应该是将侦听器绑定到整个字段集，而不是分别绑定两个元素。

[http://jsfiddle.net/jomikr/w3kXj/10/](http://jsfiddle.net/jomikr/w3kXj/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:31:37.377

我能够让它工作得更好一点。

[http://jsfiddle.net/w3kXj/9/](http://jsfiddle.net/w3kXj/9/)

# objective-c - 从数组中移除 Sprite

> ID：11766868
> 
> 赞同：0
> 
> 时间：2012-08-01T20:13:20.540
> 
> 标签：objective-c, cocos2d-iphone, nsmutablearray, sprite

我有一个像玩家一样的“蛇游戏”，当身体达到一定长度时移除末端尾部时我遇到了一些问题。现在我有这个：

```
if (i > maxHealth) {
    id object = [tail objectAtIndex:i-maxHealth-1];
    [tail removeObject:object];//This part doesn't work, if I comment this line out it works but the object is still in the array 
    [self.tileMap removeChild:object cleanup:YES];
} 
```

当`i`场景初始化时“蛇”的长度`i`等于 0 并且玩家移动它时“蛇”的长度在哪里，将“尾巴”图像添加到场景和名为*tail*的 NSMutableArray中。我在调试器中得到了这个：

`Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM insertObject:atIndex:]: index 4 beyond bounds [0 .. 2]'`

这对我来说没有任何意义，因为在我添加线以从数组中删除精灵并仅用于`object`从场景中删除精灵之前它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:47:23.513

您应该学习如何使用断点来识别代码中的正确位置，因为很明显，您的问题不是您认为的那一行：

> [__NSArrayM **insertObject:atIndex:** ]: 索引 4 超出范围 [0 .. 2]'

它基本上告诉你所有需要知道的：你试图在一个只有三个索引 (0,1,2) 的数组的索引 4 处插入一个对象。因此，您对**removeObject**的调用不是您获得异常的原因，而是此异常的原因，稍后在您尝试**插入 Object**时发生。

我猜索引显然是错误的，因为您在之前的步骤中删除了索引 3 或 4 处的对象，但没有更新有效索引。

要解决这类问题，我建议转到 Xcode 中的 Breakpoints Navigator (cmd+6) 并单击左侧的小底部“+”和“Add Exception Breakpoint”设置为“all”。运行您的代码，调试器将在异常发生的地方弹出。

# android - 使用带有 HttpURLConnection 的 POST 发送文件

> ID：11766878
> 
> 赞同：128
> 
> 时间：2012-08-01T20:13:43.480
> 
> 标签：android, http, post, client-server, httpurlconnection

由于 Android 开发人员[建议](http://android-developers.blogspot.nl/2011/09/androids-http-clients.html)使用`HttpURLConnection`该类，我想知道是否有人可以为我提供一个很好的示例，说明如何通过 POST 将位图“文件”（实际上是内存中的流）发送到 Apache HTTP 服务器。我对 cookie 或身份验证或任何复杂的东西不感兴趣，但我只想拥有一个可靠且符合逻辑的实现。我在这里看到的所有示例看起来更像是“让我们试试这个，也许它会起作用”。

现在，我有这个代码：

```
URL url;
HttpURLConnection urlConnection = null;
try {
    url = new URL("http://example.com/server.cgi");

    urlConnection = (HttpURLConnection) url.openConnection();

} catch (Exception e) {
    this.showDialog(getApplicationContext(), e.getMessage());
}
finally {
    if (urlConnection != null)
    {
        urlConnection.disconnect();
    }
} 
```

其中 showDialog 应该只显示一个`AlertDialog`（如果 URL 无效？）。

现在，假设我生成了一个这样的位图：`Bitmap image = this.getBitmap()`在一个派生自的控件内`View`，我想通过 POST 发送它。实现这样的事情的正确程序是什么？我需要使用哪些类？我可以在[这个例子](https://stackoverflow.com/a/4126746/1174378)`HttpPost`中使用like吗？如果是这样，我将如何为我的位图构建？我会发现要求首先将位图存储在设备上的文件中是令人反感的。`InputStreamEntity`

* * *

我还应该提到，我确实需要将原始位图的每个未更改的像素发送到服务器，所以我无法将其转换为 JPEG。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-08-06T10:15:19.180

我不知道为什么`HttpURLConnection`该类不提供任何发送文件的方法而无需手动编写文件包装器。这是我最终做的事情，但如果有人知道更好的解决方案，请告诉我。

输入数据：

```
Bitmap bitmap = myView.getBitmap(); 
```

静态的东西：

```
String attachmentName = "bitmap";
String attachmentFileName = "bitmap.bmp";
String crlf = "\r\n";
String twoHyphens = "--";
String boundary =  "*****"; 
```

设置请求：

```
HttpURLConnection httpUrlConnection = null;
URL url = new URL("http://example.com/server.cgi");
httpUrlConnection = (HttpURLConnection) url.openConnection();
httpUrlConnection.setUseCaches(false);
httpUrlConnection.setDoOutput(true);

httpUrlConnection.setRequestMethod("POST");
httpUrlConnection.setRequestProperty("Connection", "Keep-Alive");
httpUrlConnection.setRequestProperty("Cache-Control", "no-cache");
httpUrlConnection.setRequestProperty(
    "Content-Type", "multipart/form-data;boundary=" + this.boundary); 
```

启动内容包装器：

```
DataOutputStream request = new DataOutputStream(
    httpUrlConnection.getOutputStream());

request.writeBytes(this.twoHyphens + this.boundary + this.crlf);
request.writeBytes("Content-Disposition: form-data; name=\"" +
    this.attachmentName + "\";filename=\"" + 
    this.attachmentFileName + "\"" + this.crlf);
request.writeBytes(this.crlf); 
```

转换`Bitmap`为`ByteBuffer`：

```
//I want to send only 8 bit black & white bitmaps
byte[] pixels = new byte[bitmap.getWidth() * bitmap.getHeight()];
for (int i = 0; i < bitmap.getWidth(); ++i) {
    for (int j = 0; j < bitmap.getHeight(); ++j) {
        //we're interested only in the MSB of the first byte, 
        //since the other 3 bytes are identical for B&W images
        pixels[i + j] = (byte) ((bitmap.getPixel(i, j) & 0x80) >> 7);
    }
}

request.write(pixels); 
```

结束内容包装：

```
request.writeBytes(this.crlf);
request.writeBytes(this.twoHyphens + this.boundary + 
    this.twoHyphens + this.crlf); 
```

刷新输出缓冲区：

```
request.flush();
request.close(); 
```

得到回应：

```
InputStream responseStream = new 
    BufferedInputStream(httpUrlConnection.getInputStream());

BufferedReader responseStreamReader = 
    new BufferedReader(new InputStreamReader(responseStream));

String line = "";
StringBuilder stringBuilder = new StringBuilder();

while ((line = responseStreamReader.readLine()) != null) {
    stringBuilder.append(line).append("\n");
}
responseStreamReader.close();

String response = stringBuilder.toString(); 
```

关闭响应流：

```
responseStream.close(); 
```

关闭连接：

```
httpUrlConnection.disconnect(); 
```

PS：当然我必须把请求包装在 中`private class AsyncUploadBitmaps extends AsyncTask<Bitmap, Void, String>`，为了让Android平台开心，因为它不喜欢在主线程上有网络请求。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-05-12T12:46:05.353

我实际上找到了一种使用 MultipartEntity 使用 HttpURLConnection 发送文件的更好方法

```
private static String multipost(String urlString, MultipartEntity reqEntity) {
    try {
        URL url = new URL(urlString);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(10000);
        conn.setConnectTimeout(15000);
        conn.setRequestMethod("POST");
        conn.setUseCaches(false);
        conn.setDoInput(true);
        conn.setDoOutput(true);

        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.addRequestProperty("Content-length", reqEntity.getContentLength()+"");
        conn.addRequestProperty(reqEntity.getContentType().getName(), reqEntity.getContentType().getValue());

        OutputStream os = conn.getOutputStream();
        reqEntity.writeTo(conn.getOutputStream());
        os.close();
        conn.connect();

        if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
            return readStream(conn.getInputStream());
        }

    } catch (Exception e) {
        Log.e(TAG, "multipart post error " + e + "(" + urlString + ")");
    }
    return null;        
}

private static String readStream(InputStream in) {
    BufferedReader reader = null;
    StringBuilder builder = new StringBuilder();
    try {
        reader = new BufferedReader(new InputStreamReader(in));
        String line = "";
        while ((line = reader.readLine()) != null) {
            builder.append(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return builder.toString();
} 
```

假设您正在上传带有位图数据的图像：

```
 Bitmap bitmap = ...;
    String filename = "filename.png";
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, bos);
    ContentBody contentPart = new ByteArrayBody(bos.toByteArray(), filename);

    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    reqEntity.addPart("picture", contentPart);
    String response = multipost("http://server.com", reqEntity); 
```

瞧！您的帖子数据将包含图片字段以及服务器上的文件名和路径。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2015-10-15T13:06:59.893

`MultipartUtility`以简单的方式使用一些参数将文件上传到服务器上。

*MultipartUtility.java*

```
public class MultipartUtility {

    private final String boundary;
    private static final String LINE_FEED = "\r\n";
    private HttpURLConnection httpConn;
    private String charset;
    private OutputStream outputStream;
    private PrintWriter writer;

    /**
     * This constructor initializes a new HTTP POST request with content type
     * is set to multipart/form-data
     *
     * @param requestURL
     * @param charset
     * @throws IOException
     */
    public MultipartUtility(String requestURL, String charset)
            throws IOException {
        this.charset = charset;

        // creates a unique boundary based on time stamp
        boundary = "===" + System.currentTimeMillis() + "===";

        URL url = new URL(requestURL);
        Log.e("URL", "URL : " + requestURL.toString());
        httpConn = (HttpURLConnection) url.openConnection();
        httpConn.setUseCaches(false);
        httpConn.setDoOutput(true); // indicates POST method
        httpConn.setDoInput(true);
        httpConn.setRequestProperty("Content-Type",
                "multipart/form-data; boundary=" + boundary);
        httpConn.setRequestProperty("User-Agent", "CodeJava Agent");
        httpConn.setRequestProperty("Test", "Bonjour");
        outputStream = httpConn.getOutputStream();
        writer = new PrintWriter(new OutputStreamWriter(outputStream, charset),
                true);
    }

    /**
     * Adds a form field to the request
     *
     * @param name  field name
     * @param value field value
     */
    public void addFormField(String name, String value) {
        writer.append("--" + boundary).append(LINE_FEED);
        writer.append("Content-Disposition: form-data; name=\"" + name + "\"")
                .append(LINE_FEED);
        writer.append("Content-Type: text/plain; charset=" + charset).append(
                LINE_FEED);
        writer.append(LINE_FEED);
        writer.append(value).append(LINE_FEED);
        writer.flush();
    }

    /**
     * Adds a upload file section to the request
     *
     * @param fieldName  name attribute in <input type="file" name="..." />
     * @param uploadFile a File to be uploaded
     * @throws IOException
     */
    public void addFilePart(String fieldName, File uploadFile)
            throws IOException {
        String fileName = uploadFile.getName();
        writer.append("--" + boundary).append(LINE_FEED);
        writer.append(
                "Content-Disposition: form-data; name=\"" + fieldName
                        + "\"; filename=\"" + fileName + "\"")
                .append(LINE_FEED);
        writer.append(
                "Content-Type: "
                        + URLConnection.guessContentTypeFromName(fileName))
                .append(LINE_FEED);
        writer.append("Content-Transfer-Encoding: binary").append(LINE_FEED);
        writer.append(LINE_FEED);
        writer.flush();

        FileInputStream inputStream = new FileInputStream(uploadFile);
        byte[] buffer = new byte[4096];
        int bytesRead = -1;
        while ((bytesRead = inputStream.read(buffer)) != -1) {
            outputStream.write(buffer, 0, bytesRead);
        }
        outputStream.flush();
        inputStream.close();

        writer.append(LINE_FEED);
        writer.flush();
    }

    /**
     * Adds a header field to the request.
     *
     * @param name  - name of the header field
     * @param value - value of the header field
     */
    public void addHeaderField(String name, String value) {
        writer.append(name + ": " + value).append(LINE_FEED);
        writer.flush();
    }

    /**
     * Completes the request and receives response from the server.
     *
     * @return a list of Strings as response in case the server returned
     * status OK, otherwise an exception is thrown.
     * @throws IOException
     */
    public String finish() throws IOException {
        StringBuffer response = new StringBuffer();

        writer.append(LINE_FEED).flush();
        writer.append("--" + boundary + "--").append(LINE_FEED);
        writer.close();

        // checks server's status code first
        int status = httpConn.getResponseCode();
        if (status == HttpURLConnection.HTTP_OK) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    httpConn.getInputStream()));
            String line = null;
            while ((line = reader.readLine()) != null) {
                response.append(line);
            }
            reader.close();
            httpConn.disconnect();
        } else {
            throw new IOException("Server returned non-OK status: " + status);
        }

        return response.toString();
    }
} 
```

给`upload`你`file`连同参数。

*注意：将此代码放在下面的非 ui-thread 中以获得响应。*

```
String charset = "UTF-8";
String requestURL = "YOUR_URL";

MultipartUtility multipart = new MultipartUtility(requestURL, charset);
multipart.addFormField("param_name_1", "param_value");
multipart.addFormField("param_name_2", "param_value");
multipart.addFormField("param_name_3", "param_value");
multipart.addFilePart("file_param_1", new File(file_path));
String response = multipart.finish(); // response from server. 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-03-10T19:41:17.600

**Jaydipsinh Zala**的解决方案对我不起作用，我不知道为什么，但它似乎接近解决方案。

**因此，将此课程与Mihai Todor**的出色解决方案和解释相结合，结果就是目前适合我的课程。如果对某人有帮助：

*MultipartUtility2V.java*

```
import java.io.*;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.file.Files;

public class MultipartUtilityV2 {
    private HttpURLConnection httpConn;
    private DataOutputStream request;
    private final String boundary =  "*****";
    private final String crlf = "\r\n";
    private final String twoHyphens = "--";

    /**
     * This constructor initializes a new HTTP POST request with content type
     * is set to multipart/form-data
     *
     * @param requestURL
     * @throws IOException
     */
    public MultipartUtilityV2(String requestURL)
            throws IOException {

        // creates a unique boundary based on time stamp
        URL url = new URL(requestURL);
        httpConn = (HttpURLConnection) url.openConnection();
        httpConn.setUseCaches(false);
        httpConn.setDoOutput(true); // indicates POST method
        httpConn.setDoInput(true);

        httpConn.setRequestMethod("POST");
        httpConn.setRequestProperty("Connection", "Keep-Alive");
        httpConn.setRequestProperty("Cache-Control", "no-cache");
        httpConn.setRequestProperty(
                "Content-Type", "multipart/form-data;boundary=" + this.boundary);

        request =  new DataOutputStream(httpConn.getOutputStream());
    }

    /**
     * Adds a form field to the request
     *
     * @param name  field name
     * @param value field value
     */
    public void addFormField(String name, String value)throws IOException  {
        request.writeBytes(this.twoHyphens + this.boundary + this.crlf);
        request.writeBytes("Content-Disposition: form-data; name=\"" + name + "\""+ this.crlf);
        request.writeBytes("Content-Type: text/plain; charset=UTF-8" + this.crlf);
        request.writeBytes(this.crlf);
        request.writeBytes(value+ this.crlf);
        request.flush();
    }

    /**
     * Adds a upload file section to the request
     *
     * @param fieldName  name attribute in <input type="file" name="..." />
     * @param uploadFile a File to be uploaded
     * @throws IOException
     */
    public void addFilePart(String fieldName, File uploadFile)
            throws IOException {
        String fileName = uploadFile.getName();
        request.writeBytes(this.twoHyphens + this.boundary + this.crlf);
        request.writeBytes("Content-Disposition: form-data; name=\"" +
                fieldName + "\";filename=\"" +
                fileName + "\"" + this.crlf);
        request.writeBytes(this.crlf);

        byte[] bytes = Files.readAllBytes(uploadFile.toPath());
        request.write(bytes);
    }

    /**
     * Completes the request and receives response from the server.
     *
     * @return a list of Strings as response in case the server returned
     * status OK, otherwise an exception is thrown.
     * @throws IOException
     */
    public String finish() throws IOException {
        String response ="";

        request.writeBytes(this.crlf);
        request.writeBytes(this.twoHyphens + this.boundary +
                this.twoHyphens + this.crlf);

        request.flush();
        request.close();

        // checks server's status code first
        int status = httpConn.getResponseCode();
        if (status == HttpURLConnection.HTTP_OK) {
            InputStream responseStream = new
                    BufferedInputStream(httpConn.getInputStream());

            BufferedReader responseStreamReader =
                    new BufferedReader(new InputStreamReader(responseStream));

            String line = "";
            StringBuilder stringBuilder = new StringBuilder();

            while ((line = responseStreamReader.readLine()) != null) {
                stringBuilder.append(line).append("\n");
            }
            responseStreamReader.close();

            response = stringBuilder.toString();
            httpConn.disconnect();
        } else {
            throw new IOException("Server returned non-OK status: " + status);
        }

        return response;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-06-18T00:13:27.827

这个答案[https://stackoverflow.com/a/33149413/6481542](https://stackoverflow.com/a/33149413/6481542)让我完成了将大文件上传到开发 Django 服务器的 90%，但我必须使用[setFixedLengthStreamingMode](https://developer.android.com/reference/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29)才能使其正常工作。这需要在写入内容之前设置 Content-Length，因此需要对上述答案进行相当大的重写。这是我的最终结果

```
public class MultipartLargeUtility {
    private final String boundary;
    private static final String LINE_FEED = "\r\n";
    private HttpURLConnection httpConn;
    private String charset;
    private OutputStream outputStream;
    private PrintWriter writer;
    private final int maxBufferSize = 4096;
    private long contentLength = 0;
    private URL url;

    private List<FormField> fields;
    private List<FilePart> files;

    private class FormField {
        public String name;
        public String value;

        public FormField(String name, String value) {
            this.name = name;
            this.value = value;
        }
    }

    private class FilePart {
        public String fieldName;
        public File uploadFile;

        public FilePart(String fieldName, File uploadFile) {
            this.fieldName = fieldName;
            this.uploadFile = uploadFile;
        }
    }

    /**
     * This constructor initializes a new HTTP POST request with content type
     * is set to multipart/form-data
     *
     * @param requestURL
     * @param charset
     * @throws IOException
     */
    public MultipartLargeUtility(String requestURL, String charset, boolean requireCSRF)
            throws IOException {
        this.charset = charset;

        // creates a unique boundary based on time stamp
        boundary = "===" + System.currentTimeMillis() + "===";
        url = new URL(requestURL);
        fields = new ArrayList<>();
        files = new ArrayList<>();

        if (requireCSRF) {
            getCSRF();
        }
    }

    /**
     * Adds a form field to the request
     *
     * @param name  field name
     * @param value field value
     */
    public void addFormField(String name, String value)
            throws UnsupportedEncodingException {
        String fieldContent = "--" + boundary + LINE_FEED;
        fieldContent += "Content-Disposition: form-data; name=\"" + name + "\"" + LINE_FEED;
        fieldContent += "Content-Type: text/plain; charset=" + charset + LINE_FEED;
        fieldContent += LINE_FEED;
        fieldContent += value + LINE_FEED;
        contentLength += fieldContent.getBytes(charset).length;
        fields.add(new FormField(name, value));
    }

    /**
     * Adds a upload file section to the request
     *
     * @param fieldName  name attribute in <input type="file" name="..." />
     * @param uploadFile a File to be uploaded
     * @throws IOException
     */
    public void addFilePart(String fieldName, File uploadFile)
            throws IOException {
        String fileName = uploadFile.getName();

        String fieldContent = "--" + boundary + LINE_FEED;
        fieldContent += "Content-Disposition: form-data; name=\"" + fieldName
                + "\"; filename=\"" + fileName + "\"" + LINE_FEED;
        fieldContent += "Content-Type: "
                + URLConnection.guessContentTypeFromName(fileName) + LINE_FEED;
        fieldContent += "Content-Transfer-Encoding: binary" + LINE_FEED;
        fieldContent += LINE_FEED;
        // file content would go here
        fieldContent += LINE_FEED;
        contentLength += fieldContent.getBytes(charset).length;
        contentLength += uploadFile.length();
        files.add(new FilePart(fieldName, uploadFile));
    }

    /**
     * Adds a header field to the request.
     *
     * @param name  - name of the header field
     * @param value - value of the header field
     */
    //public void addHeaderField(String name, String value) {
    //    writer.append(name + ": " + value).append(LINE_FEED);
    //    writer.flush();
    //}

    /**
     * Completes the request and receives response from the server.
     *
     * @return a list of Strings as response in case the server returned
     * status OK, otherwise an exception is thrown.
     * @throws IOException
     */
    public List<String> finish() throws IOException {
        List<String> response = new ArrayList<String>();
        String content = "--" + boundary + "--" + LINE_FEED;
        contentLength += content.getBytes(charset).length;

        if (!openConnection()) {
            return response;
        }

        writeContent();

        // checks server's status code first
        int status = httpConn.getResponseCode();
        if (status == HttpURLConnection.HTTP_OK) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    httpConn.getInputStream()));
            String line = null;
            while ((line = reader.readLine()) != null) {
                response.add(line);
            }
            reader.close();
            httpConn.disconnect();
        } else {
            throw new IOException("Server returned non-OK status: " + status);
        }
        return response;
    }

    private boolean getCSRF()
            throws IOException {
        /// First, need to get CSRF token from server
        /// Use GET request to get the token
        CookieManager cookieManager = new CookieManager();
        CookieHandler.setDefault(cookieManager);
        HttpURLConnection conn = null;

        conn = (HttpURLConnection) url.openConnection();

        conn.setUseCaches(false); // Don't use a Cached Copy
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.getContent();
        conn.disconnect();

        /// parse the returned object for the CSRF token
        CookieStore cookieJar = cookieManager.getCookieStore();
        List<HttpCookie> cookies = cookieJar.getCookies();
        String csrf = null;
        for (HttpCookie cookie : cookies) {
            Log.d("cookie", "" + cookie);
            if (cookie.getName().equals("csrftoken")) {
                csrf = cookie.getValue();
                break;
            }
        }
        if (csrf == null) {
            Log.d(TAG, "Unable to get CSRF");
            return false;
        }
        Log.d(TAG, "Received cookie: " + csrf);

        addFormField("csrfmiddlewaretoken", csrf);
        return true;
    }

    private boolean openConnection()
            throws IOException {
        httpConn = (HttpURLConnection) url.openConnection();
        httpConn.setUseCaches(false);
        httpConn.setDoOutput(true);    // indicates POST method
        httpConn.setDoInput(true);
        //httpConn.setRequestProperty("Accept-Encoding", "identity");
        httpConn.setFixedLengthStreamingMode(contentLength);
        httpConn.setRequestProperty("Connection", "Keep-Alive");
        httpConn.setRequestProperty("Content-Type",
                "multipart/form-data; boundary=" + boundary);
        outputStream = new BufferedOutputStream(httpConn.getOutputStream());
        writer = new PrintWriter(new OutputStreamWriter(outputStream, charset),
                true);
        return true;
    }

    private void writeContent()
            throws IOException {

        for (FormField field : fields) {
            writer.append("--" + boundary).append(LINE_FEED);
            writer.append("Content-Disposition: form-data; name=\"" + field.name + "\"")
                    .append(LINE_FEED);
            writer.append("Content-Type: text/plain; charset=" + charset).append(
                    LINE_FEED);
            writer.append(LINE_FEED);
            writer.append(field.value).append(LINE_FEED);
            writer.flush();
        }

        for (FilePart filePart : files) {
            String fileName = filePart.uploadFile.getName();
            writer.append("--" + boundary).append(LINE_FEED);
            writer.append(
                    "Content-Disposition: form-data; name=\"" + filePart.fieldName
                            + "\"; filename=\"" + fileName + "\"")
                    .append(LINE_FEED);
            writer.append(
                    "Content-Type: "
                            + URLConnection.guessContentTypeFromName(fileName))
                    .append(LINE_FEED);
            writer.append("Content-Transfer-Encoding: binary").append(LINE_FEED);
            writer.append(LINE_FEED);
            writer.flush();

            FileInputStream inputStream = new FileInputStream(filePart.uploadFile);
            int bufferSize = Math.min(inputStream.available(), maxBufferSize);
            byte[] buffer = new byte[bufferSize];
            int bytesRead = -1;
            while ((bytesRead = inputStream.read(buffer, 0, bufferSize)) != -1) {
                outputStream.write(buffer, 0, bytesRead);
            }
            outputStream.flush();
            inputStream.close();
            writer.append(LINE_FEED);
            writer.flush();
        }

        writer.append("--" + boundary + "--").append(LINE_FEED);
        writer.close();
    }
} 
```

用法与上面的答案基本相同，但我已经包含了 Django 默认使用的 CSRF 支持和表单

```
boolean useCSRF = true;
MultipartLargeUtility multipart = new MultipartLargeUtility(url, "UTF-8",useCSRF);
multipart.addFormField("param1","value");
multipart.addFilePart("filefield",new File("/path/to/file"));
List<String> response = multipart.finish();
Log.w(TAG,"SERVER REPLIED:");
for(String line : response) {
    Log.w(TAG, "Upload Files Response:::" + line);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-27T20:52:48.420

基于Mihai的解决方案，如果有人遇到像我的服务器上发生的那样在服务器上保存图像的问题。将位图更改为字节缓冲区部分：

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG,100,bos);
        byte[] pixels = bos.toByteArray(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T00:36:36.950

我没有对此进行测试，但您可以尝试使用 PipedInputStream 和 PipedOutputStream。它可能看起来像：

```
final Bitmap bmp = … // your bitmap

// Set up Piped streams
final PipedOutputStream pos = new PipedOutputStream(new ByteArrayOutputStream());
final PipedInputStream pis = new PipedInputStream(pos);

// Send bitmap data to the PipedOutputStream in a separate thread
new Thread() {
    public void run() {
        bmp.compress(Bitmap.CompressFormat.PNG, 100, pos);
    }
}.start();

// Send POST request
try {
    // Construct InputStreamEntity that feeds off of the PipedInputStream
    InputStreamEntity reqEntity = new InputStreamEntity(pis, -1);

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    reqEntity.setContentType("binary/octet-stream");
    reqEntity.setChunked(true);
    httppost.setEntity(reqEntity);
    HttpResponse response = httpclient.execute(httppost);
} catch (Exception e) {
    e.printStackTrace()
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-26T10:35:09.853

这是我为使用发布请求上传照片所做的。

```
public void uploadFile(int directoryID, String filePath) {
    Bitmap bitmapOrg = BitmapFactory.decodeFile(filePath);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();

    String upload_url = BASE_URL + UPLOAD_FILE;
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

    byte[] data = bao.toByteArray();

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost(upload_url);
    MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

    try {
        // Set Data and Content-type header for the image
        FileBody fb = new FileBody(new File(filePath), "image/jpeg");
        StringBody contentString = new StringBody(directoryID + "");

        entity.addPart("file", fb);
        entity.addPart("directory_id", contentString);
        postRequest.setEntity(entity);

        HttpResponse response = httpClient.execute(postRequest);
        // Read the response
        String jsonString = EntityUtils.toString(response.getEntity());
        Log.e("response after uploading file ", jsonString);

    } catch (Exception e) {
        Log.e("Error in uploadFile", e.getMessage());
    }
} 
```

**注意：**此代码需要库，因此请按照[此处](http://ogrelab.ikratko.com/using-newer-version-of-httpclient-like-4-1-x/)的说明获取库。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-17T18:45:30.620

我尝试了上面的解决方案，但没有一个对我有用。

但是[http://www.baeldung.com/httpclient-post-http-request](http://www.baeldung.com/httpclient-post-http-request)。第 6 行 POST 多部分请求在几秒钟内工作

```
public void whenSendMultipartRequestUsingHttpClient_thenCorrect() 
  throws ClientProtocolException, IOException {
    CloseableHttpClient client = HttpClients.createDefault();
    HttpPost httpPost = new HttpPost("http://www.example.com");

    MultipartEntityBuilder builder = MultipartEntityBuilder.create();
    builder.addTextBody("username", "John");
    builder.addTextBody("password", "pass");
    builder.addBinaryBody("file", new File("test.txt"),
      ContentType.APPLICATION_OCTET_STREAM, "file.ext");

    HttpEntity multipart = builder.build();
    httpPost.setEntity(multipart);

    CloseableHttpResponse response = client.execute(httpPost);
    client.close();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-21T14:42:58.537

我发现使用 okHttp 更容易，因为我无法让这些解决方案中的任何一个工作：[https ://stackoverflow.com/a/37942387/447549](https://stackoverflow.com/a/37942387/447549)

# javascript - d3.js & nvd3.js -- 如何设置 y 轴范围

> ID：11766879
> 
> 赞同：57
> 
> 时间：2012-08-01T20:13:43.280
> 
> 标签：javascript, d3.js, nvd3.js

我正在尝试将图表的 y 轴范围设置为 1-100。

查阅了 API 文档并找到了一个可能的解决方案，如此处所示 [https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)

但是，使用该选项不起作用。进一步阅读上面在axis.tickSize下链接的文档页面，发现以下行

> 结束刻度由关联比例的域范围确定，并且是生成的路径域的一部分，而不是刻度线

因此，我认为无法通过 Axis 选项设置范围的最小值和最大值。

关于我可以在哪里指定范围的任何想法？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-01T22:42:20.740

找到了解决方案。

附加`.forceY([0,100])`到图表的实例化会强制轴采用数组中指定的范围。

从这里的例子[http://nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)

附加`.forceY([0,100])`到图表变量有效。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-06T05:17:15.503

顾名思义，这会将数组中的值添加到您的`y`域中，它不会将 y 域设置为`[0,100]`. 因此，如果您将其设置为`[0,100]`并且您的数据域为`-10`，`110`则域将为`[-10,110]`.

现在，如果您希望域`[0,100]`即使您的数据更大，您也可以使用`chart.yDomain([0,100])`......但通常您希望您的域包含您的数据，所以我强烈建议使用 chart.forceY 而不是`chart.yDomain`. 如您所见，forceY 最常见的用途之一是`forceY([0])`在域中始终设为 0。

希望可以帮助您了解该函数实际在做什么，而arboc7，这应该可以解释为什么它不能使范围小于数据集的范围。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-11T11:30:28.183

对于堆积面积图，`.forceY([0,100])`不起作用。改为使用`.yDomain([0,100])`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-12-12T19:41:25.027

如果您的意思是`y-domain`为堆积面积图设置（应显示的数字范围），这对我有用：

```
nv.models.stackedAreaChart()
  .x(function(d) {...})
  .y(function(d) {...})
  .yDomain([0, maxY])
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-22T21:32:47.173

我有一个类似的问题并通过在yAxis的yScale中明确定义域来解决它，即

```
var yscale = d3.scale.linear()
                     .domain([0,100])
                     .range([250, 0]);
var yAxis = d3.svg.axis()
                  .scale(yscale); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-17T20:18:40.633

我试过像：

```
chart.forceY([DataMin, DataMax]); 
```

Datamin 和 Datamax 需要从数组中计算。此外，为了在应用过滤器时动态调整轴点，需要自定义处理过滤器的点击事件，例如：

```
$('g.nv-series').click(function() {
   //Calculate DataMin, DataMax from the data array                    
   chart.forceY([DataMin, DataMax]);                        
}); 
```

因此，每次应用过滤器时，图表都会进行调整。

# jquery - 在 Jquery Slider 中使用多个导航

> ID：11766880
> 
> 赞同：0
> 
> 时间：2012-08-01T20:13:52.943
> 
> 标签：jquery, css, slider

[http://frontend.iwssites.com/intellichoice/home.html](http://frontend.iwssites.com/intellichoice/home.html)

我正在尝试向此页面上的主滑块添加功能。现在有左/右箭头和灰色/蓝色框（下图），让用户在 4 张幻灯片之间导航（为 4 张幻灯片使用两个图像——所以它们重复）。我想要做的是将相同的功能添加到 4 框图形（下一步、节能等），以便当用户单击其中一个图形时，他们会被带到该幻灯片。同样，希望下面的蓝色/灰色框与幻灯片相对应。我对每个图形也有“开/蓝色”状态（下一个现在有什么）。

这有点棘手，我的 jquery 技能并没有达到标准。我在想也许functions.js文件中有一种方法可以创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:13:58.657

好吧，这实际上并不是那么困难。您有几个选项，具体取决于您实现滑块的方式（抱歉，我没有时间查看您的代码文件）：

*   方法一：你用JS给左边的元素设置动画(-1 * indexOfSlideAnimatingTo * slideWidth)
    *   这是我认为最好的解决方案，因为它轻巧且非常简单
    *   这仅在您使用相对位置使幻灯片工作时才有效
*   方法二：你用 JS 动画元素的左边距 (-1 * indexOfSlideAnimatingTo * slideWidth)
    *   如果您没有使用相对位置
    *   使这比方法一更糟糕的是，当您单击返回第一张幻灯片时，您还必须设计一个异常条件（或不同的处理程序）
        *   使用另一种解决方案，它只是将您移回相对于原始位置的 0 位置
        *   使用此解决方案，您必须通过调整边距一直回到开头

这是第一个的动画功能：

```
var move = (-1 * indexOfSlideAnimatingTo * slideWidth);
("#yourSlidesRelativeContainer").animate({ left: move }, speed); 
```

第二个将非常相似，但使用我们讨论过的额外条件/处理程序，`margin-left`而不是 just `left`。除非您需要更多帮助，否则我将把它留给您编写代码；）

祝你好运！:)

# ruby-on-rails - 渲染模板时传递变量

> ID：11766884
> 
> 赞同：0
> 
> 时间：2012-08-01T20:14:15.163
> 
> 标签：ruby-on-rails, variables

在我的论坛中，reply_to 和引用的变量被传递到新的帖子页面，非常好地启用回复和引用。当用户做错事时，问题就出现了；例如，如果帖子太短，控制器会呈现“posts/new”并出现 Flash 错误。

我一辈子都无法让控制器在渲染时传递这些。这是我的设置。

两个变量都在新方法中初始化：

```
def new
  @post = Post.new

  init_quoted
  init_reply_to

  if @quoted
    @post.content = "[quote="+@quoted.user.name+"]"+@quoted.content+"[/quote]"
  end
end

def init_reply_to
  if params[:reply_to]
    @reply_to = Discussion.find(params[:reply_to])
  end
end

def init_quoted
  if params[:quoted]
    @quoted = Post.find(params[@quote])
  end
end 
```

当用户没有犯错时，这很有效。但是，从以下代码中的“else”开始，变量没有被传递：

```
def create
  @post = current_user.posts.build(params[:post])

  if @post.save
    flash[:success] = "You reply has been added."
    redirect_to controller: 'discussions', action: 'show', id: @post.discussion.id, anchor: 'post'+@post.id.to_s
  else
    render template: 'posts/new', locals: { reply_to: @reply_to, quoted: @quoted }
  end
end 
```

我错过了什么吗？变量应该是全局的，那么为什么不转移它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:17:38.590

那么你不调用你的初始化函数`create`

这应该工作：

```
def create
  @post = current_user.posts.build(params[:post])

  if @post.save
    flash[:success] = "You reply has been added."
    redirect_to controller: 'discussions', action: 'show', id: @post.discussion.id, anchor: 'post'+@post.id.to_s
  else
    init_quoted
    init_reply_to
    render template: 'posts/new'
  end
end 
```

无需将它们指定为本地，只需在视图中访问`@quoted`它们`@reply_to`即可

# c++ - 如何在 C++ 代码中单步使用行内的特定函数

> ID：11766893
> 
> 赞同：1
> 
> 时间：2012-08-01T20:14:44.290
> 
> 标签：c++, gdb

在以下代码中：

```
 1 #include <iostream>
 2
 3 using namespace std;
 4
 5 int funcA(){
 6    cout << "A" << endl;
 7    return 1;
 8 }
 9
10 int funcB(){
11    cout << "B" << endl;
12    return 1;
13 }
14
15 int funcC(){
16    cout << "C" << endl;
17    return 1;
18 }
19
20 int funcAll( int a, int b, int c ){
21    return 1;
22 }
23
24 int main(){
25    cout << funcAll( funcA(), funcB(), funcC() ) << endl;
26    return 0;
27 }
28 
```

将打印 C、B，然后是 A。

但是当调试并停留在第 25 行时，如果我们`next`在 gdb 上命令光标会转到第 26 行，如果我们命令`step`gdb 将从 funcC 单步执行到 funcA，但是如何在不设置断点或步入 funcC 的情况下直接单步执行 funcB 或 funcA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:17:29.713

没有任何直接的方法可以做到这一点。通常的方法是在感兴趣的函数中设置断点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:20:31.897

C 和 C++ 中函数的参数的求值顺序是未指定的。在某些约束下，编译器可以自由地重新排序/交错它们，但它认为合适。因此，您不能依赖`funcC()`before 被调用`funcA()`。

如果您想确保参数将按特定顺序进行评估，请将它们分解为单独的语句，如下所示：

```
int a = funcA();
int b = funcB();
int c = funcC();
cout << funcAll(a, b, c,) << endl; 
```

这也将使调试更容易。

如果你不想重写你的代码，你还有一些选择。最简单的方法就是在您感兴趣的函数中设置一个断点，例如：

```
break funcB 
```

或者，如果您只需要这样做一次，请使用 a`tbreak`而不是`break`设置一个临时断点，该断点将在第一次被击中后自行清除。

您还可以使用`nexti`和`stepi`指令一次执行一个汇编指令。通过使用`disassemble`命令查看反汇编，您可以使用 进入适当的调用站点（例如`call`x86 或 x86-64 或`bl`PowerPC 上的指令）`nexti`，然后`stepi`进入它。 `stepi`和 和`nexti`一样工作`step`，`next`除了它们在汇编指令而不是代码行上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:22:03.880

你踏入C，然后走出并踏入B

```
step
finish
step 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:19:36.173

您可以使用该`until`命令运行，直到到达特定行。它没有设置断点，它只停在那里一次。请参阅[此处的文档](http://www.delorie.com/gnu/docs/gdb/gdb_38.html)。（具体来说，请参阅 上的文档`until *location*`。）

# python - 函数使用 print 进行迭代，但不使用 return

> ID：11766900
> 
> 赞同：5
> 
> 时间：2012-08-01T20:15:23.137
> 
> 标签：python, python-2.7

Python新手在这里，运行2.7。

我正在尝试创建一个使用函数生成文本的程序，然后将函数生成的文本输出到文件中。

当仅在 powershell 中打印函数时（例如：[http](http://codepad.org/KftHaO6x) ://codepad.org/KftHaO6x ），它会按照我的意愿进行迭代：

```
def writecode (q, a, b, c):
    while b < q:
        b = b + 1
        print "v%d_%d_%d = pairwise (caps[%d],sals[%d],poss[%d],poss[%d],poss[%d],pos_range)" %(a,b,c,a,a,a,b,c)
        print "votes%d_%d.append(v%d_%d_%d)" % (b,c,a,b,c,)
        print "v%d_%d_%d = pairwise (caps[%d],sals[%d],poss[%d],poss[%d],poss[%d],pos_range)" %(a,c,b,a,a,a,c,b)
        print "votes%d_%d.append(v%d_%d_%d)" % (c,b,a,c,b)

writecode (5,1,0,4) 
```

当试图将函数输出到文件中时（如：[http](http://codepad.org/8GJpp9QY) ://codepad.org/8GJpp9QY ），它只给出 1 个值，即不迭代：

```
def writecode (q, a, b, c):
    while b < q:
        b = b + 1
        data_to_write = "v%d_%d_%d = pairwise (caps[%d],sals[%d],poss[%d],poss[%d],poss[%d],pos_range)" %(a,b,c,a,a,a,b,c)
        data_to_write_two = "votes%d_%d.append(v%d_%d_%d)" % (b,c,a,b,c,)
        data_to_write_three = "v%d_%d_%d = pairwise (caps[%d],sals[%d],poss[%d],poss[%d],poss[%d],pos_range)" %(a,c,b,a,a,a,c,b)
        data_to_write_four = "votes%d_%d.append(v%d_%d_%d)" % (c,b,a,c,b)
        return data_to_write
        return data_to_write_two
        return data_to_write_three
        return data_to_write_four

x = writecode (5,1,0,4)

out_file = open("code.txt", "a")
out_file.write(x)
out_file.close() 
```

为什么会这样，我怎样才能使输出函数迭代（就像打印一样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:20:15.643

您的问题是您只能`return`从一个函数中执行一次：

```
def test():
    return 1
    return 2

x = test()
# x is now 1 
```

您将要使用`yield`或返回值的元组：

```
def this_will_work():
    yield 1
    yield 2

x = list(this_will_work()) # See below for why we are using list
# x is now [1, 2]

def so_will_this:
    return 1, 2

x = so_will_this()
# x is now (1, 2) 
```

Using`yield`将你的函数变成一个[`generator`](http://docs.python.org/tutorial/classes.html#generators)可以迭代的函数——如果你只对所有最终值感兴趣，你可以使用它`list`来将生成器变成你的生成器产生的所有值的列表。或者，您可以使用`for ... in`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:23:40.333

在您用于编写文件的版本中，函数`return`在循环的第一次迭代后返回（通过第一条语句）`while`。根据你所拥有的，你可能想要这样的东西：

```
def writecode (q, a, b, c):
    results = []
    while b < q:
        b = b + 1
        results.append("v%d_%d_%d = pairwise (caps[%d],sals[%d],poss[%d],poss[%d],poss[%d],pos_range)" % (a,b,c,a,a,a,b,c))
        results.append("votes%d_%d.append(v%d_%d_%d)" % (b,c,a,b,c,))
        results.append("v%d_%d_%d = pairwise (caps[%d],sals[%d],poss[%d],poss[%d],poss[%d],pos_range)" % (a,c,b,a,a,a,c,b))
        results.append("votes%d_%d.append(v%d_%d_%d)" % (c,b,a,c,b))
        results.append("")
    return "\n".join(results)

x = writecode (5,1,0,4)

out_file = open("code.txt", "a")
out_file.write(x)
out_file.close() 
```

它的工作原理是将每一行输出累积到一个列表中，然后返回单个字符串，其中所有结果与换行符和尾随换行符连接在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:19:49.167

[`return`](http://docs.python.org/reference/simple_stmts.html#grammar-token-return_stmt)立即存在函数：

> `return`将当前函数调用与表达式列表（或`None`）作为返回值。

您需要随时构建字符串（或者，为了获得更好的性能，在最后创建一个`list`值`join`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:55:23.097

轻微的变化；我使用了带有命名字段的新型字符串格式，应该更容易阅读。

请注意，您正在生成一些重复的块（b==c 在输出中出现两次的每种情况）。

```
from textwrap import dedent

codeblock = dedent("""\
    v{a}_{b}_{c} = pairwise (caps[{a}],sals[{a}],poss[{a}],poss[{b}],poss[{c}],pos_range)
    votes{b}_{c}.append(v{a}_{b}_{c})
    v{a}_{c}_{b} = pairwise (caps[{a}],sals[{a}],poss[{a}],poss[{c}],poss[{b}],pos_range)
    votes{c}_{b}.append(v{a}_{c}_{b})
""")

def get_code (q, a, b, c):
    return ''.join(codeblock.format(a=a, b=b, c=c) for b in xrange(b, q))

def main():
    with open('code.txt', 'a') as outf:
        outf.write(get_code(5,1,0,4))

if __name__=="__main__":
    main() 
```

# android - Android：如何解压缩分成几部分的文件

> ID：11766902
> 
> 赞同：2
> 
> 时间：2012-08-01T20:15:23.457
> 
> 标签：android, split, unzip

我想解压缩一个分成几部分的文件（file.part1、file.part2、file.part3 ...）。我将所有零件放在同一个文件夹中。在互联网上，我只找到了如何解压缩单个文件的示例。

有人知道是否有 API 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:20:43.600

压缩 API 与 Android 上的 Java、AFAIK 相同。在 Java 中，您可以轻松地解压缩多卷文件。我正在发布一些 Java 代码，您应该能够在 Android 上运行一些小的（如果有的话）修改。

```
public class Main {

public static void main(String[] args) throws IOException {
    ZipInputStream is = new ZipInputStream(new SequenceInputStream(Collections.enumeration(
        Arrays.asList(new FileInputStream("test.zip.001"), new FileInputStream("test.zip.002"), new FileInputStream("test.zip.003")))));
    try {
        for(ZipEntry entry = null; (entry = is.getNextEntry()) != null; ) {
            OutputStream os = new BufferedOutputStream(new FileOutputStream(entry.getName()));
            try {
                final int bufferSize = 1024;
                byte[] buffer = new byte[bufferSize];
                for(int readBytes = -1; (readBytes = is.read(buffer, 0, bufferSize)) > -1; ) {
                    os.write(buffer, 0, readBytes);
                }
                os.flush();
            } finally {
                os.close();
            }
        }
    } finally {
        is.close();
    }
} 
```

}

该代码来自一个较旧的 SO 问题，可以在[此处](https://stackoverflow.com/a/8117538/1069068)找到。

# regex - 正则表达式 - 在两者之间拆分 2 个字符串

> ID：11766903
> 
> 赞同：1
> 
> 时间：2012-08-01T20:15:24.873
> 
> 标签：regex

我一直在寻找一个 reg 表达式来将 html 元素分成 2 部分。首先是价格，其次是下载次数。这是我的 HTML，这是我尝试使用的 reg 表达式。我正在使用刮板程序，所以我**不能**使用 java-script 或 jQuery。

**HTML：**

```
<h2>$850 / 3Downlaods - Software Name</h2> 
```

**Re Expression 之前使用过 Marker：**

```
/$\/\s*/ 
```

**Re Expression used Marker After：**

```
/\/\ 
```

这应该只返回 850。没有美元符号。我坚持如何开始和结束下载次数。我需要另一组之前和之后的正则表达式来拉取下载次数。还要排除“下载”一词。

我使用的程序是 OutWit Hub Scraper [Link to docs](http://www.outwit.com/support/help/hub/helpcenter/editingScrapers.xhtml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:20:38.880

`<h2>`如果在（更复杂的）两个`()`捕获组中没有其他嵌套标签，则`/`应该这样做：

```
/<h2>\s*\$(\d+)\s*\/\s*(\d+)\s*Downloads.+?<\/h2>/ 
```

这分解为`<h2>`，可选的空格`\s*`，，要捕获`$`的一些数字，更多的可选空格，要捕获的一组数字，更多可选的空格之前，任何字符（非贪婪）直到结束。`(\d+)``/``Downloads``</h2>`

如果价格部分还可能包含`,.`该`(\d+)`组，则可以替换为`([0-9.,]+)`（或者更具体地，以确保它`,`在必要时不以开头，例如）

```
/<h2>\s*\$([0-9,.]+)\s*\/\s*(\d+)\s*Downloads.+?<\/h2>/ 
```

**关于使用正则表达式解析 HTML 的常见警告适用于此处。这只有在您的 HTML 输入相当可预测并且在`<h2>`.**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:29:37.940

试试这个：`(?:.*\$)(\d+(?:\.\d+)?).*(\d+)(?:\s*Downloads.*)`

这是发生了什么：

`(?:.*\$)`- 捕获并丢弃标签的开头，一直到它在美元符号后找到的第一个数字

`(\d+(?:\.\d+)?)`- 捕获美元金额（包括美分）

`.*`- 两个数字之间的任何废话

`(\d+)`- 下载次数

`(?:\s*Downloads.*)`- 标签的其余部分

我希望这会有所帮助！

# python - 有没有办法抑制 Python M2Crypto 的 RSA.gen_key 输出？

> ID：11766904
> 
> 赞同：0
> 
> 时间：2012-08-01T20:15:47.117
> 
> 标签：python, m2crypto

我正在使用 Python M2Crypto 包来生成 RSA 密钥。

```
>>> import M2Crypto
>>> rsa = M2Crypto.RSA.gen_key (2048, 65537)
.............................................................+++
............................+++
>>> 
```

请注意“openssl 的东西”。为了抑制写入标准输出/错误，我通常会这样做：

```
sys.stdout = open(os.devnull, 'w')
sys.stderr = open(os.devnull, 'w') 
```

在这种情况下，这没有任何影响。我假设这与 M2Crypto 包装 OpenSSL 的方式有关。

有没有办法阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:42:10.407

我查看了源代码`/M2Crypto/RSA.py`，发现了您的问题，然后意识到我可以只阅读文档。*总是先检查文档！！！*

根据[RSA.gen_key](http://www.heikkitoivonen.net/m2crypto/api/M2Crypto.RSA-module.html#gen_key)的文档，`gen_key`有一个可选参数称为`callback`，它允许您指定一个函数，以便在调用时`gen_key`调用（表面上是为了向用户提供反馈）。此回调的默认值将内容打印到`stdout`. 将您的函数调用更改为：

```
>>> rsa = M2Crypto.RSA.gen_key (2048, 65537, callback=lambda x, y, z:None) 
```

它应该可以解决问题。

**编辑**

下面是来自 M2PyCrypto 源的相关代码。我添加的评论。

```
def keygen_callback(p, n, out=sys.stdout): #sys.stdout is bound to `out` at definition time
    """
    Default callback for gen_key().
    """
    ch = ['.','+','*','\n']
    out.write(ch[p])
    out.flush()

def gen_key(bits, e, callback=keygen_callback): #keygen_callback is bound to `callback`
    #other code... 
```

# jquery - TinyMCE 显示 html 标签

> ID：11766906
> 
> 赞同：2
> 
> 时间：2012-08-01T20:15:49.567
> 
> 标签：jquery, tinymce

我在 SO 以及其他网站上看到了关于这个主题的其他问题，但我一直无法找到解决方案。我正在使用 TinyMCE 允许用户输入格式化文本。有一个保存按钮，它使用 JQuery 进行 Ajax 调用，并将 textarea 内容上传到服务器，在服务器中以 html 的形式存储在数据库中。

稍后，当用户返回页面时，我想显示他们之前输入的格式化文本。因此，当页面加载时，html 存储在 DataTable 的隐藏列中。TinyMCE 文本区域在页面加载时不存在，它是在用户单击按钮时使用 JQuery 动态构建的。JQuery 脚本将隐藏表格单元格中的 html 复制到 textarea 中，然后我再次使用 JQuery 插件调用 TinyMCE，将 textarea 转换为 TinyMCE 编辑器。

问题是 TinyMCE 编辑器显示保存的 html，包括 html 标签。例如：

```
<p>Saved text</p> 
```

我不希望它显示 html 标签，我希望它相应地格式化文本。我该如何解决？任何和所有的帮助表示赞赏。

我的 javascript 代码的缩写版本：

```
$('img').live('click', function() {

    // Copy the html into the textarea.
    $(this).closest('tr').next().find('textarea').val(gData[id].comments);

    // Convert the textarea into an editor.
    $(this).closest('tr').next().find('textarea').tinymce({

        // Location of TinyMCE script
        script_url : 'js/tiny_mce/tiny_mce.js',

        theme : "simple"
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:17:43.780

您正在客户端显示标签的**编码**版本。

因此，tinyMCE 将它们视为已编码并按原样显示它们。

例如：

它看到：`&lt;p&gt;`===> <p>

或者`&lt;p&gt;Saved text&lt;/p&gt;`===> <p>保存的文本</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:01:30.950

解决方案非常简单。您所要做的就是在客户端解码文本。

在 Ruby on Rails 中

```
<%= raw '<p>Some Text<p>' %> 
```

输出为“一些文本”。html标签被删除。

# node.js - 猫鼬错误处理

> ID：11766907
> 
> 赞同：1
> 
> 时间：2012-08-01T20:15:51.860
> 
> 标签：node.js, express, mongoose

我正在尝试使用 Express 和 Mongoose 对用户输入进行一些验证。以前，我直接在用户模型的“密码”字段上设置了一个“最小长度”验证器。它将检查输入的密码字符串是否足够长，如果不是，它将传递给尝试保存用户时创建的 ValidationError 对象。这将被发送回用户，并显示在适当的表单字段中。

但是现在我已经实现了散列、盐和加密，这并不能正常工作。密码的哈希版本比原始密码长得多。所以我想我可以做这样的事情：

```
exports.createNewUser = function(req, res, next){

    var user = new User({
            email : req.body.email
        , name : req.body.name
    })
    ,   minLength = Validator.minLength(req.body.password);

    if (!minLength) return next(new Error('Password aint right length'));

    user.setPassword(req.body.password);

    user.save(function(err){
        if (!err) return res.redirect('/');
        else {
            console.log('error saving usr', err);
            err['body'] = req.body;
            return res.render('user/register', err);
        }
    });
}; 
```

问题是

```
return next(new Error('err message')); 
```

简单地显示在控制台上。我需要某种方式将它附加到 mongoose Validation Errors 对象。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:27:31.090

看了一圈后，我找到了解决办法。基本上，您可以在尝试保存模型之前调用模型上的“验证”功能。然后，您可以对模型中不一定设置的其他属性应用额外的验证。在这种情况下，我正在测试非散列密码字符串的长度，看看它是否足够长。如果不是，我将一个对象添加到返回的 err 对象中。然后可以将其发送回表单。

```
user.validate(function(err){
        if (req.body.password.length < 20) {
            err.errors.password = { type : 'the pw should be longer'};
        }
        console.log(err);
    }); 
```

# sql-server-2008-r2 - SQL Server Management Studio 意外结果

> ID：11766908
> 
> 赞同：0
> 
> 时间：2012-08-01T20:15:52.960
> 
> 标签：sql-server-2008-r2, ssms

如果我在 Tab1 中编译**Storedprocedure**，并且如果我通过在同一 SSMS 中的**Tab2**中提供参数来执行 SP ，则结果完全出乎意料。

我通过 Windows 身份验证登录 SSMS。

如果有人为此类问题提供故障排除点，那就太好了。

例子：

打开 SSMS 并以 WindowAuthentication User
**Client TABLE身份登录**

```
ClientID ClientName  
1          A  
2          B  
3          C  
5          D
4          E  
0          A1 
```

**Tab 1 有以下代码

```
CREATE  PROCEDURE [ClientNames]
(
)
AS
BEGIN
    SELECT * FROM Client 
END -- End of the Procedure 
```

选项卡 2 具有以下代码

```
EXEC    [dbo].[RT_GetRIsExcludedFromMetricsReport] 
```

**结果**

```
ClientID ClientName  
1          A  
2          B  
3          C  
5          D
4          E  
0          A1 
```

现在关闭 SSMS 并再次以 WindowAuthentication 用户身份登录
打开 SSMS
**客户端表**

```
ClientID ClientName  
1          A  
2          B  
3          C  
5          D
4          E  
0          A1 
```

**Tab1 有以下代码

```
CREATE  PROCEDURE [ClientNames]
(
)
AS
BEGIN
    SELECT * FROM Client 
         **Order by ClientID -- Changed the Query**
END 
```

**选项卡 2 具有以下代码**

**执行 [dbo].[RT_GetRIsExcludedFromMetricsReport]**

**预期结果**

```
ClientID ClientName  
0          A1**
1          A  
2          B  
3          C  
4          E    
5          D 
```

**但结果显示为** **结果**

```
ClientID ClientName  
1          A  
2          B  
3          C  
5          D
4          E  
0          A1 
```

# perl - 使用 LWP::Simple 和重定向输出时的特殊 Perl 行为

> ID：11766910
> 
> 赞同：1
> 
> 时间：2012-08-01T20:16:04.050
> 
> 标签：perl, get

在没有输出重定向的情况下运行以下文件时，输出符合预期。

**输出**

```
./get_urls.pl
www.site1.com
www.site2.com
www.siten.com 
```

将 STDOUT 重定向到文件时，文件中不会记录任何内容。

```
./get_urls.pl > out
cat out 
```

-

```
#!/usr/bin/perl

use LWP::Simple;
use strict;
use warnings;

my $i = 1;

while (my $contents = get("http://www.validpage.com?page=$i"))
{
        #print STDERR $contents."\n".$url."\n";

        #print STDERR $i."\n";

        my @matches = ($contents =~ /_full'>(.*)?</g);

        for my $match (@matches)
        {
                $match =~ s/\s//g;
                print $match."\n";
        }

        $i++;
}

print STDERR "$i total matches.\n"; 
```

我怀疑这种行为是使用 LWP::Simple 的副作用，因为当 get() 函数调用被省略时，输出会按预期重定向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:46:56.297

添加

```
$| = 1; 
```

到代码的开头。当输出未发送到终端时，这是自动刷新问题。

当 STDOUT 是终端时，perl 会自动刷新输出，但如果 STDOUT 是这样的管道

```
perl print_urls.pl |cat 
```

它不再是 TTY，而是一个裸文件描述符，并且 autoflush 设置为 0 以优化文件操作（您不希望在写入每一行后刷新日志文件，对吗？）

即使禁用了自动刷新，您也会看到输出......迟早。通常缓冲区为 4096 字节，因此当您的程序输出达到第 4097 个字符时，您将立即看到前 4096 个字节。

另外，如果您没有全局启用自动刷新的功能，您也可以尝试

```
use IO::Handle;
STDOUT->autoflush(1); 
```

更多的阅读是 man perlvar 和 perldoc IO::Handle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:41:41.833

您的输出应该真正显示

```
www.site1.com
www.site2.com
www.siten.com
3 total matches. 
```

尝试重定向附加到输出文件

```
$ perl ./get_urls.pl >> out.log 2>> err.log
$ cat out.log 
```

# firefox - Safari 和 Firefox 之间的保证金问题

> ID：11766912
> 
> 赞同：1
> 
> 时间：2012-08-01T20:16:10.417
> 
> 标签：firefox, safari, margins

这是有问题的网站：http: [//newcombspring.stifel-marcin.com/](http://newcombspring.stifel-marcin.com/)

有问题的网站部分是“形成未来”div。在 Safari 中查看该站点时，它完全对齐，但在 Firefox 中查看时，您可以看到它向右移动了几个像素。是什么原因造成的，如何轻松解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:42:52.690

这里不涉及任何利润。您在这里遇到的问题基本上都是由于您使用表格进行布局这一事实引起的。一个简单的事实是，不建议将表格用于此类事情。

我真的很喜欢你在这里所做的。设计很棒。但是底层的 HTML 结构并不是那么好。您可以随心所欲地调整它，甚至可能接近解决问题，但只要您使用表格创建布局，您就永远不会真正摆脱这种问题。

不幸的是，除了废弃大部分页面正文并使用更结构化的布局重新做之外，我无法在这里提供太多解决方案。

我没有时间详细介绍如何做到这一点，但我建议查找[tableless design](http://www.google.co.uk/search?q=tableless+design+tutorial)。

好消息是，您在此处创建的基本两面板布局可以使用良好的无表格设计以相对较少的代码轻松完成。

我知道这不是您正在寻找的快速简单的答案，但我希望它有所帮助。

# xcode - xcode中的反向地理编码

> ID：11766915
> 
> 赞同：1
> 
> 时间：2012-08-01T20:16:23.967
> 
> 标签：xcode, mkreversegeocoder

我正在制作一个应用程序，它可以获取您当前的位置并确定您所在州的税收。所以，我需要使用反向地理编码。我在这个网站上找到了一些教程和类似的问题，但是我没有找到任何与 xcode 相关的东西，没有过时，并且向我展示了我需要做的事情（不仅仅是一个 api）。如果有人可以帮助我，即使只是给我一个好的教程的链接，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:33:45.147

MKReverseGeocoder 自 iOS 5.0 起已弃用，因此您必须使用 CLGeoCoder 类和称为 reverseGeocodeLocation 的方法。

对你来说幸运的是，Apple 甚至有一个例子来说明如何实现你正在寻找的东西。

在下面的链接中查找“使用 CLGeocoder 对位置进行地理编码”：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html)

我希望这有帮助！

# wso2 - WSO2 Carbon 的基本操作

> ID：11766927
> 
> 赞同：0
> 
> 时间：2012-08-01T20:17:33.327
> 
> 标签：wso2, wso2carbon

我是这个领域的新手，遵循安装 WSO2 业务流程服务器的所有步骤以及使用 eclipse 的整个过程。

我做了快速入门指南 - 根据导向建模流程，但即使按照快速入门的建议进行操作，但我无法做到这一点并部署门户或生成门户网站的 zip 包

**发生此错误**

```
"No properties path set - looking for transactions.properties in classpath...
Using init file: /C:/wso2bps-2.1.2/lib/transactions.properties" 
```

**和**

```
"ERROR - Http11NioProtocol - Failed to start end point associated with ProtocolHandler ["http-nio-9944"]
java.net.BindException: Address already in use: bind" 
```

我想帮助解决这些问题并继续前进。

对不起，如果我不是很技术，我也不是很清楚，但我能捕捉到的是通过

Tks

米歇尔·安图内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:00:51.960

请参考 WSO2 BPS[安装指南](http://wso2.org/project/bps/2.1.2/docs/bpel-installation-guide/bpel_installation_guide.html#WSO2-Business-Process-Server-Installation-Guide)。还要确保端口 9944 未被其他进程使用。

您可以在 carbon.xml (CARBON_HOME/repository/conf) 中更改端口偏移值。

```
<Offset>1</Offset> 
```

偏移量将所有端口移动给定值。

希望这可以帮助。

谢谢

蒂利尼

# c# - 用户界面中层次结构/树视图的根节点设计

> ID：11766930
> 
> 赞同：0
> 
> 时间：2012-08-01T20:17:42.717
> 
> 标签：c#, treeview, hierarchy, root-node

我想在树视图控件的用户界面中显示分层数据。

问题是用户是否可以自由定义其第一个根节点本身。

我不在乎一棵树是否有一个根节点是一棵树。

我只是考虑用户在 UI 中是否有预定义的根节点的优势。

您是否看到可用性方面的任何劣势或用户可能会受到限制

某些具有预定义根节点的可能性？

在我看来，根节点有这个缺点：

*   它只是一个愚蠢的占位符，只是在那里，所以孩子们在那里......
*   它通常不能被删除，因此我必须做额外的检查......
*   我必须为根节点考虑一个有创意的名称

不需要：

```
MySuperRootNode
  11
  12
    21
    22 
```

完全没问题应该是：

```
1
  11
  12
2
  21
  22 
```

# iphone - 枚举时集合发生了突变

> ID：11766937
> 
> 赞同：3
> 
> 时间：2012-08-01T20:18:17.460
> 
> 标签：iphone, ios, xcode, ipad, nsarray

我一直在搜索与我的问题相关的所有主题，但似乎找不到解决方案。在我的应用程序中，我有一个 .h 文件，其中包含构建“课程”对象库的信息（只是字符串和 NSNumber 的集合）。当我只有一个对象时，它似乎工作正常，但是当我添加第二个对象时，我得到了上述错误。

我添加了一些断点，似乎我通过了我的 viewDidLoad 方法，但是在该方法结束和我的 tableView 方法开始之间的某个地方，我得到了那个错误。我已经在下面发布了视图控制器的代码。如果您需要任何其他信息，请告诉我。提前致谢 ：）

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "Lesson.h"
#import "PDFViewController.h"
#import "MediaPlayer/MediaPlayer.h"
#import "PracticeViewController.h"
#import "StoreViewController.h"

@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

// Array to hold the purchased lessons.

@property (nonatomic,strong) NSMutableArray *purchasedLessons;
@property (nonatomic, strong) NSMutableArray *songLibrary;

@property (nonatomic, strong) NSNumber *purchaseMade;

@property (nonatomic, strong) ViewController *viewController;

// Lesson detail display items.

@property (strong, nonatomic) IBOutlet UIImageView *coverArt;
@property (weak, nonatomic) IBOutlet UILabel *lessonTitle;
@property (weak, nonatomic) IBOutlet UILabel *lessonSubtitle;
@property (weak, nonatomic) IBOutlet UILabel *durationLabel;
@property (weak, nonatomic) IBOutlet UILabel *notesLabel;
@property (weak, nonatomic) IBOutlet UILabel *timingLabel;
@property (weak, nonatomic) IBOutlet UILabel *keySignatureLabel;
@property (weak, nonatomic) IBOutlet UIImageView *difficultyImage;
@property (weak, nonatomic) IBOutlet UITextView *descriptionTextView;
@property (weak, nonatomic) IBOutlet UIImageView *dividerImage;
@property (weak, nonatomic) IBOutlet UIImageView *detailBackgroundImage;
@property (weak, nonatomic) IBOutlet UIImageView *detailsImage;

@property (strong, nonatomic) IBOutlet UITableView *tableView;

@property (nonatomic, strong) NSManagedObjectContext* managedObjectContext;

//Table Methods

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;

// Variables and Methods for the Video Player

@property (strong, nonatomic) MPMoviePlayerViewController *player;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "AppDelegate.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize coverArt;
@synthesize lessonTitle;
@synthesize lessonSubtitle;
@synthesize durationLabel;
@synthesize notesLabel;
@synthesize timingLabel;
@synthesize keySignatureLabel;
@synthesize difficultyImage;
@synthesize descriptionTextView;
@synthesize dividerImage;
@synthesize detailBackgroundImage;
@synthesize detailsImage;
@synthesize purchasedLessons;
@synthesize tableView;
@synthesize player;
@synthesize managedObjectContext;
@synthesize songLibrary;
@synthesize purchaseMade;
@synthesize viewController;

//TABLE METHODS

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return purchasedLessons.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // Create a cell.
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"purchased"];

    // Populate the cell with data.

    Lesson *temp = [[Lesson alloc] init];
    temp = [purchasedLessons objectAtIndex:indexPath.row];
    cell.textLabel.text = temp.title;
    cell.detailTextLabel.text = temp.subtitle;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Determine what row is selected and retrieve the correct Lesson object.
    Lesson *currentSelection = [[Lesson alloc] init];
    int row = [indexPath row];
    currentSelection = [purchasedLessons objectAtIndex:row];
    UIImage *tempCoverArt = [UIImage imageNamed:currentSelection.coverArtFilename];
    // Change the information in the details pane to the details for the current lesson.
    [coverArt setImage:tempCoverArt];
    lessonTitle.text = currentSelection.title;
    lessonSubtitle.text = currentSelection.subtitle;
    durationLabel.text = currentSelection.durationLabel;
    timingLabel.text = currentSelection.timing;
    keySignatureLabel.text = currentSelection.keySignature;
    descriptionTextView.text = currentSelection.lessonDescription;
    int diff = currentSelection.difficulty.intValue;
    switch (diff) {
        case 1:
            difficultyImage.image = [UIImage imageNamed:@"storeDiff1.png"];
            break;
        case 2:
            difficultyImage.image = [UIImage imageNamed:@"storeDiff2.png"];
            break;
        case 3:
            difficultyImage.image = [UIImage imageNamed:@"storeDiff3.png"];
            break;
        case 4:
            difficultyImage.image = [UIImage imageNamed:@"storeDiff4.png"];
            break;
        case 5:
            difficultyImage.image = [UIImage imageNamed:@"storeDiff5.png"];
            break;

        default:
            break;
    }

}

//END TABLE METHODS

- (void)viewWillAppear:(BOOL)animated {
    for (Lesson *lesson in purchasedLessons) {
        [purchasedLessons removeObject:lesson];
    }
    for (Lesson *lesson in songLibrary) {
        NSNumber *status = [[NSUserDefaults standardUserDefaults] objectForKey:lesson.productID];
        if ([status isEqualToNumber:[NSNumber numberWithInt:1]]) {
            [purchasedLessons addObject:lesson];
        }
    }
    [tableView reloadData];
}

- (void)viewDidLoad
{    
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.    

    purchaseMade = [NSNumber numberWithInt:0];
    viewController = self;
    purchasedLessons = [[NSMutableArray alloc] init];

    if (managedObjectContext == nil) 
    { 
        managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    }

    // Load background images.
    UIImage *detailsDivider = [UIImage imageNamed:@"detailsDividerImage.png"];
    [dividerImage setImage:detailsDivider];

    UIImage *detailsBackground = [UIImage imageNamed:@"detailsBackgroundImage.png"];
    [detailBackgroundImage setImage:detailsBackground];

    UIImage *detailsPanel = [UIImage imageNamed:@"detailsDisplayImage.png"];
    [detailsImage setImage:detailsPanel];

    // Load default cover art.
    UIImage *defaultCoverArt = [UIImage imageNamed:@"coverArtDefault.png"];
    [coverArt setImage:defaultCoverArt];

    // Get current version ("Bundle Version") from the default Info.plist file
    NSString *currentVersion = (NSString*)[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"];
    NSArray *prevStartupVersions = [[NSUserDefaults standardUserDefaults] arrayForKey:@"prevStartupVersions"];
    if (prevStartupVersions == nil) 
    {
        // Starting up for first time with NO pre-existing installs (e.g., fresh 
        // install of some version)

        // Import the song library.

        #import "songLibrary.h"

        // Save out the library to CoreData.

        NSError *error;
        if (![managedObjectContext save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
        }

        // Fetch the library and store it in the songLibrary array.

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription 
                                       entityForName:@"Lesson" inManagedObjectContext:managedObjectContext];
        [fetchRequest setEntity:entity];
        NSArray *tempArray = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
        songLibrary = [[NSMutableArray alloc] initWithArray:tempArray];

        [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:currentVersion] forKey:@"prevStartupVersions"];

        // Set the NSUserDefaults for the songLibrary

        for (Lesson *lesson in songLibrary) {
            [[NSUserDefaults standardUserDefaults] setObject:lesson.purchaseStatus forKey:lesson.productID];
        }
    }
    else
    {
        if (![prevStartupVersions containsObject:currentVersion]) 
        {
            // Starting up for first time with this version of the app. This
            // means a different version of the app was alread installed once 
            // and started.

            // Clear out any previously saved songs from the CoreData store.

            [managedObjectContext reset];

            // Import the updated song library.

            #import "songLibrary.h"

            // Save out the updated song library.

            NSError *error;
            if (![managedObjectContext save:&error]) {
                NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
            }

            // Fetch the updated library and save it to the songLibrary array.

            NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
            NSEntityDescription *entity = [NSEntityDescription 
                                           entityForName:@"Lesson" inManagedObjectContext:managedObjectContext];
            [fetchRequest setEntity:entity];
            NSArray *tempArray = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
            songLibrary = [[NSMutableArray alloc] initWithArray:tempArray];

            NSMutableArray *updatedPrevStartVersions = [NSMutableArray arrayWithArray:prevStartupVersions];
            [updatedPrevStartVersions addObject:currentVersion];
            [[NSUserDefaults standardUserDefaults] setObject:updatedPrevStartVersions forKey:@"prevStartupVersions"];

            // Set the NSUserDefaults for the songLibrary

            for (Lesson *lesson in songLibrary) {
                [[NSUserDefaults standardUserDefaults] setObject:lesson.purchaseStatus forKey:lesson.productID];
            }
        }
    }

    if (songLibrary.count == 0) {
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription 
                                       entityForName:@"Lesson" inManagedObjectContext:managedObjectContext];
        [fetchRequest setEntity:entity];
        NSError *error;
        NSArray *tempArray = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
        songLibrary = [[NSMutableArray alloc] initWithArray:tempArray];
    }

    // Save changes to disk
    [[NSUserDefaults standardUserDefaults] synchronize];

    // Determine purchased songs from NSDefaults and add to purchasedLessons.

    for (Lesson *lesson in songLibrary) {
        NSNumber *status = [[NSUserDefaults standardUserDefaults] objectForKey:lesson.productID];
        if ([status isEqualToNumber:[NSNumber numberWithInt:1]]) {
            [purchasedLessons addObject:lesson];
        }
    }
}

- (void)viewDidUnload
{
    [self setLessonTitle:nil];
    [self setLessonSubtitle:nil];
    [self setCoverArt:nil];
    [self setDurationLabel:nil];
    [self setNotesLabel:nil];
    [self setTimingLabel:nil];
    [self setKeySignatureLabel:nil];
    [self setDifficultyImage:nil];
    [self setDescriptionTextView:nil];
    [self setDividerImage:nil];
    [self setDetailBackgroundImage:nil];
    [self setDetailsImage:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    // Segue to the materials screen.

    if ([segue.identifier isEqualToString:@"materials"]) {
        PDFViewController *pdfViewController = [segue destinationViewController];

        NSIndexPath *path = [self.tableView indexPathForSelectedRow];
        int row = [path row];
        Lesson *selected = [purchasedLessons objectAtIndex:row];
        pdfViewController.selectedLesson = selected;

        pdfViewController.fileToView = @"materials";

    }

    // Segue to the sheet screen.

    else if ([segue.identifier isEqualToString:@"sheet"]) {
        PDFViewController *pdfViewController = [segue destinationViewController];

        NSIndexPath *path = [self.tableView indexPathForSelectedRow];
        int row = [path row];
        Lesson *selected = [purchasedLessons objectAtIndex:row];

        pdfViewController.selectedLesson = selected;

        pdfViewController.fileToView = @"sheet";
    }

    // Segue to the practice screen.

    else if ([segue.identifier isEqualToString:@"practice"]) {
        PracticeViewController *practiceViewController = [segue destinationViewController];

        NSIndexPath *path = [self.tableView indexPathForSelectedRow];
        int row = [path row];
        Lesson *selected = [purchasedLessons objectAtIndex:row];
        practiceViewController.selectedLesson = selected;
    }

    else if ([segue.identifier isEqualToString:@"store"]) {
        StoreViewController *storeViewController = [segue destinationViewController];
        storeViewController.songLibrary = songLibrary;
        storeViewController.libraryViewController = viewController;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T20:24:15.867

在快速枚举期间从可变数组中添加或删除对象确实违反规则。在这种情况下，课程对象将从数组中删除，导致枚举无效。

在 viewWillAppear 中，取

```
for (Lesson *lesson in purchasedLessons) {
    [purchasedLessons removeObject:lesson];
} 
```

相反，尝试

```
[purchasedLessons removeAllObjects]; 
```

如果由于某种原因，您确实需要一次删除一个，您可以尝试

```
while(purchasedLessons.count > 0) {
    [purchasedLesson removeLastObject];        
} 
```

# c# - 使用 LINQ 从文件中选择一个字符串，拆分它，并返回指定的成员

> ID：11766940
> 
> 赞同：0
> 
> 时间：2012-08-01T20:18:29.720
> 
> 标签：c#, .net, linq, file-io, lambda

我有一个很大的文件（> 1GB），它是用管道分隔的。我想使用 file.readlines 查询文件，分割每一行，根据索引列表从分割的行中选择特定元素（我将提供索引数组）并将其返回到自定义类型类对象的字典。

目前我有这个：

```
strIndexes = "1,3,5,7";
var selected = strIndexes.Split(',')
                         .Select(x => int.Parse(x))
                         .Select(index => File.readlines(myFile)
                         .Select(x => split('|')[index]).toArray(); 
```

但是，此查询由索引引导，效率不高。它返回 4 个向量，每个向量对应上例中指定的 4 个索引。

我将不胜感激任何帮助。

更新：

谢谢大家的评论。我正在添加一些示例数据。文件数据如下所示：

```
Line1: aa|ab|de|gt|hj|de|fr|gt|hy // Header
Line2: sd|12|f4|tr|hj|df|ds|e3|12
Line3: 34|fd|3d|35|df|45|dq|32|dd
.
.
.
Line N 34|df|f3|df|33|s2|23|df|44 
```

N = 数百万行。数据格式仅用于示例目的，每个单元格包含不同长度和结构的字符串。

现在，用户以标题列名称的形式输入他想要的请求数据，例如：ab，de，fr，hy，我解析并理解我需要列 2,3,7 和 9。现在我想解析文件并返回一个对象，其中每个条目都是一个字典条目，它表示一行中的数据，其中包含一个键（它是列数据之一）和一个值，它是标记化数据的 string[]。

因此，假设对于此示例，我希望数据按第 7 列排序，因此最终的 dict 将是：

```
[ds]->[12,f4,12]
[dq]->[fd,3d,dd]
.
.
.
[23]->[df,f3,44] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:31:18.033

我建议编写自己的标记器（或找到一个），您可以使用[String.IndexOfAny](http://msdn.microsoft.com/en-us/library/6wh7x3fs)并搜索“|” 或“，”，构建您自己的状态机来告诉它在哪里扑通这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:42:42.370

一些猜测，但也许这就是你想要做的：

```
// Split indexes string to integers
var indexes = strIndexes.Split(',').Select(int.Parse);

// Read file once
var lines = File.ReadLines(myFile);

// Split them (thank you, devundef!)
var splitLines = lines.Select(line => line.Split('|')).ToArray();

// Create dictionary index => column array
var dict = indexes.ToDictionary(
        index => index,
        index => splitLines.Select(splitLine => splitLine[index]).ToArray()
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:02:54.960

首先，在查询之外解析您的索引字符串 (strIndex) 以避免多次重复该步骤：

```
string strIndexes = "7,2,3,9";
int[] indexes = Array.ConvertAll(strIndexes.Split(','), e => int.Parse(e) - 1); 
```

请注意，我将 7 放在首位，因为假设第一个索引是您的关键索引可以简化所需的代码。我还注意到您的索引在字符串中似乎是从 1 开始的，这就是为什么我减去 1 来创建一个从 0 开始的索引数组。然后这会产生`Dictionary<string, string[]>`您要求的表格：

```
var selected = (from line in File.ReadLines(myFile)
                let lineArray = line.Split('|')
                select (from index in indexes
                select lineArray[index]))
               .ToDictionary(key => key.First(), value => value.Skip(1).ToArray()); 
```

对您的 4 行示例数据运行此操作会产生：

```
[fr]->[ab, de, hy]
[ds]->[12, f4, 12]
[dq]->[fd, 3d, dd]
[23]->[df, f3, 44] 
```

从此代码：

```
foreach (var item in selected)
{
    Console.WriteLine("[{0}]->[{1}]", item.Key, string.Join(", ", item.Value));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:25:55.177

尽管您要求使用 linq 解决方案，但我认为这可能不是一个好习惯，因为您的文件很大，并且您将为单个任务分配大量内存，甚至会出现 OutOfMemoryException。

您可以只解析文件的每一行并提取每个索引的值：

```
public Dictionary<int, List<String>> ParseFile(String fileName, int[] indexes)
    var file = File.OpenText(myFile);
    var dict = indexes.ToDictionary(i => i, i => new List<string>());

    while(!file.EndOfStream)
    {
        var line = file.ReadLine().Split('|');
        foreach(var entry in dict)
            entry.Value.Add(line[entry.Key]);
    }
    file.Dispose();
    return dict;
} 
```

# ios - iOS - GKTurnBasedMatch 中的文字聊天

> ID：11766941
> 
> 赞同：1
> 
> 时间：2012-08-01T20:18:39.847
> 
> 标签：ios, gamekit

我正在尝试使用 GameKit 在回合制比赛中实现聊天功能。我想我可以通过调用发送消息`[match endTurnWithNextParticipant:match.currentParticipant matchData:dataWithUpdatedChat completionHandler:...]`

换句话说，当我想发送一条聊天消息时，我会结束当前玩家的回合，以便将数据发送到 Game Center，但接下来当前玩家将采取行动，以便他可以正常进行。

但是，如果不是轮到当前玩家，我无法更新比赛数据。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:57:53.560

不，没有办法做到这一点。如果有的话，玩家之间很容易出现竞争状况。您需要其他服务来实现聊天功能。另一种选择是在游戏中实现有限的聊天，例如在结束回合时输入消息的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:51:14.700

在 iOS 6.0中添加了以下方法`GKTurnBasedMatch`，可以满足您的需要：

```
- (void)saveCurrentTurnWithMatchData:(NSData *)matchData
                   completionHandler:(void (^)(NSError *error))completionHandler 
```

“更新比赛数据而不将比赛推进给其他玩家”

# c# - 执行批量加载时遇到问题

> ID：11766944
> 
> 赞同：0
> 
> 时间：2012-08-01T20:18:47.007
> 
> 标签：c#, asp.net, sql, bulk-load

尝试使用 asp.net 上传文件工具将 .csv 上传到我的 sql 服务器时出现错误。应用程序位于本地主机上，而 SQL Server 不在同一台机器上。它使用适当的列在数据库内创建表，只是不会用数据填充它。这是代码错误：“无法批量加载，因为文件“c:\users\visual studio 2010\Projects\webImport\webImport\UploadedCSVFiles\Employee.csv”无法打开。操作系统错误代码3（系统找不到指定的路径。）。

这是后面的代码：

```
 private void LoadDataToDatabase(string tableName, string fileFullPath, string delimeter)
    {
        string sqlQuery = string.Empty;
        StringBuilder sb = new StringBuilder();
        sb.AppendFormat(string.Format("BULK INSERT {0} ", tableName));
        sb.AppendFormat(string.Format(" FROM '{0}'", fileFullPath));
        sb.AppendFormat(string.Format(" WITH ( FIELDTERMINATOR = '{0}' , ROWTERMINATOR = '\n' )", delimeter));

        sqlQuery = sb.ToString();
        using (SqlConnection sqlConn = new SqlConnection(GetConnectionString()))
        {
            sqlConn.Open();
            SqlCommand sqlCmd = new SqlCommand(sqlQuery, sqlConn);
            sqlCmd.ExecuteNonQuery();
            sqlConn.Close();
        }
    }

    protected void BTNImport_Click1(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {
            FileInfo fileInfo = new FileInfo(FileUpload1.PostedFile.FileName);
            if (fileInfo.Name.Contains(".csv"))
            {

                string fileName = fileInfo.Name.Replace(".csv", "").ToString();
                string csvFilePath = Server.MapPath("UploadedCSVFiles") + "\\" + fileInfo.Name;

                //Save the CSV file in the Server inside 'MyCSVFolder' 
                FileUpload1.SaveAs(csvFilePath);
                //Fetch the location of CSV file 
                string filePath = Server.MapPath("UploadedCSVFiles") + "\\";
                string strSql = "SELECT * FROM [" + fileInfo.Name + "]";
                string strCSVConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filePath + ";" + "Extended Properties='text;HDR=YES;'";
                // load the data from CSV to DataTable 
                OleDbDataAdapter adapter = new OleDbDataAdapter(strSql, strCSVConnString);
                DataTable dtCSV = new DataTable();
                DataTable dtSchema = new DataTable();
                adapter.FillSchema(dtCSV, SchemaType.Mapped);
                adapter.Fill(dtCSV);

                if (dtCSV.Rows.Count > 0)
                {
                    CreateDatabaseTable(dtCSV, fileName);
                    Label2.Text = string.Format("The table ({0}) has been successfully created to the database.", fileName);

                    string fileFullPath = filePath + fileInfo.Name;
                    LoadDataToDatabase(fileName, fileFullPath, ",");
                    Label1.Text = string.Format("({0}) records has been loaded to the table {1}.", dtCSV.Rows.Count, fileName);
                }
                else
                {
                    Label3.Text = "File is empty.";
                }
            }
            else
            {
                Label3.Text = "Unable to recognize file.";
            }

        }
    } 
```

我猜它与Server.MapPath 有关。是否可以将文件路由到与应用程序不同的服务器上保存和执行。如果那有意义的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:27:09.087

如果您使用批量加载的 TSQL 形式，则该代码**在 SQL server 上**执行，因此您指定的文件路径是相*对于 DB server 的*。

就您而言，我认为您应该查看代码项目中的 SqlBulkCopy 和“Fast CSV Reader”；他们一起工作得很好。然后，您正在 Web 服务器上处理 CSV，并通过非常高效的 API 将批量流发送到 SQL 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:27:59.503

`BULK INSERT`路径是从服务器的参考框架中使用的。如果我在我的机器上使用 Management Studio 或其他应用程序将查询代码发送到运行实际 SQL 服务器的另一台机器，服务器将获取我的查询并尝试从服务器的文件系统视图解析路径。

这意味着我的计算机可能在路径上有一个文件`C:\folder\foo.txt`。如果我连接到运行 SQL 服务器的计算机并尝试 a `BULK INSERT DBO.FOO from 'C:\folder\foo.txt'`，服务器将在它自己的`C:\`分区中查找以尝试定位`foo.txt`。

我已经设法通过以下方式解决这个问题：

*   将文件批量插入运行 SQL 服务器的实际机器上
*   使用两台机器都可以访问的网络共享。不过，这在带宽方面可能会很昂贵。

# jquery-mobile - 如何让jQuery移动嵌套列表在导航时保持在同一页面中？

> ID：11766947
> 
> 赞同：2
> 
> 时间：2012-08-01T20:18:54.813
> 
> 标签：jquery-mobile

在包含嵌套列表等内容/小部件的页面上，我希望页面在浏览类别时保持相同的内容，并且仅在单击具有“a href”的叶子项目时才转到另一个页面.

例如，此页面具有“嵌套列表”标题和边栏：http: [//jquerymobile.com/demos/1.1.1/docs/lists/lists-nested.html](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-nested.html)

单击“动物”应保持相同的标题/侧边栏，最终将“动物”分隔符/标题添加到列表（但不添加到页面）。点击“宠物”也是如此。只有点击“Canary”才能导航到另一个页面，它有自己的内容。这与[http://jquerymobile.com/demos/1.2.0-alpha.1/docs/lists/lists-collapsible.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/lists/lists-collapsible.html)类似（但我需要一个嵌套列表，而不是可折叠的列表）

在 Google 或 jQ 文档上找不到关于此的提及。有可能吗？怎么做？

# java - GWT/Maven 项目中的神秘 pom.xml 错误

> ID：11766949
> 
> 赞同：0
> 
> 时间：2012-08-01T20:19:02.717
> 
> 标签：java, eclipse, gwt, maven

我是从 .NET 进入 Java 世界的一个相对较新的人，所以有时我会遇到一些对于经验丰富的 Java 开发人员来说似乎很明显的事情，但这个问题甚至让我的一些头发花白的同事都感到难过。

这是我的环境：

*   JavaSE 1.6
*   日食靛蓝 SP2
*   m2e 插件 1.1.0.201205-30-0009
*   谷歌套件插件 2.5.2
*   GWT Maven 插件 2.4
*   春天 1.1

主项目使用 GWT 2.4.0 并自行编译和工作。我在同一个工作区中还有一个自定义数据库日志记录项目，该项目也可以毫无错误地构建。我需要在主 Web 应用程序中使用自定义 DB 日志记录功能，因此我使用 Maven 将前者作为依赖项添加到后者，这就是问题所在。

重建工作区后，Eclipse 在主项目的 pom.xml 中显示三个神秘错误：

```
null (org.apache.maven.plugins:maven-war-plugin:2.1.1:exploded:default:compile) pom.xml /TestApp    line 67 Maven Build Problem
null (org.codehaus.mojo:gwt-maven-plugin:2.4.0:compile:default:prepare-package) pom.xml /TestApp    line 44 Maven Build Problem
null (org.codehaus.mojo:gwt-maven-plugin:2.4.0:generateAsync:default:generate-sources)  pom.xml /TestApp    line 44 Maven Build Problem 
```

向下滚动到我的问题的末尾以查看整个 pom.xml。调用`net.cds.cps.dao.logger`有问题的依赖项，可以在依赖项列表的底部找到。

当在 Eclipse 中打开 pom.xml 时，插件的两个节点`<execution>`会突出显示。`gwt-maven-plugin``maven-war-plugin`

通常的故障排除步骤（清理项目、禁用/启用 Maven 的工作区依赖解析、更新项目配置）对错误没有影响。将依赖版本从 1.0.0 更改为更具体的 1.0.0.43 或更通用的范围 [1.0.0.0, 1.0.1.0) 也没有效果。

有人对我如何解决这个问题有任何建议吗？

```
001 <?xml version="1.0" encoding="UTF-8"?>
002 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
003     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
004 
005     <!-- POM file generated with GWT webAppCreator -->
006     <modelVersion>4.0.0</modelVersion>
007     <groupId>net.test.app</groupId>
008     <artifactId>TestApp</artifactId>
009     <packaging>war</packaging>
010     <version>1.0.0</version>
011     <name>Test App</name>
012 
013     <properties>
014         <!-- Convenience property to set the GWT version -->
015         <gwtVersion>2.4.0</gwtVersion>
016         <!-- GWT needs at least java 1.5 -->
017         <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
018         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
019 
020         <spring.version>3.1.1.RELEASE</spring.version>
021         <final.name>TestApp</final.name>
022     </properties>
023 
024     <build>
025         <resources>
026             <resource>
027                 <filtering>true</filtering>
028                 <directory>src/main/resources</directory>
029             </resource>
030         </resources>
031         <finalName>${final.name}</finalName>
032 
033         <!-- Generate compiled stuff in the folder used for developing mode -->
034         <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>
035 
036         <plugins>
037 
038             <!-- GWT Maven Plugin -->
039             <plugin>
040                 <groupId>org.codehaus.mojo</groupId>
041                 <artifactId>gwt-maven-plugin</artifactId>
042                 <version>2.4.0</version>
043                 <executions>
044                     <execution>
045                         <goals>
046                             <goal>compile</goal>
047                             <goal>i18n</goal>
048                             <goal>generateAsync</goal>
049                         </goals>
050                     </execution>
051                 </executions>
052                 <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
053                     documentation at codehaus.org -->
054                 <configuration>
055                     <runTarget>Main.html</runTarget>
056                     <hostedWebapp>${webappDirectory}</hostedWebapp>
057                     <i18nMessagesBundle>net.cds.cps.cpcadmin.client.Messages</i18nMessagesBundle>
058                 </configuration>
059             </plugin>
060 
061             <!-- Copy static web files before executing gwt:run -->
062             <plugin>
063                 <groupId>org.apache.maven.plugins</groupId>
064                 <artifactId>maven-war-plugin</artifactId>
065                 <version>2.1.1</version>
066                 <executions>
067                     <execution>
068                         <phase>compile</phase>
069                         <goals>
070                             <goal>exploded</goal>
071                         </goals>
072                     </execution>
073                 </executions>
074                 <configuration>
075                     <webappDirectory>
076                         ${webappDirectory}
077                     </webappDirectory>
078                 </configuration>
079             </plugin>
080 
081             <plugin>
082                 <groupId>org.apache.maven.plugins</groupId>
083                 <artifactId>maven-compiler-plugin</artifactId>
084                 <version>2.3.2</version>
085                 <configuration>
086                     <source>1.6</source>
087                     <target>1.6</target>
088                 </configuration>
089             </plugin>
090         </plugins>
091 
092         <pluginManagement>
093             <plugins>
094                 <plugin>
095                     <groupId>org.eclipse.m2e</groupId>
096                     <artifactId>lifecycle-mapping</artifactId>
097                     <version>1.0.0</version>
098                     <configuration>
099                         <lifecycleMappingMetadata>
100                             <pluginExecutions>
101                                 <pluginExecution>
102                                     <pluginExecutionFilter>
103                                         <groupId>org.codehaus.mojo</groupId>
104                                         <artifactId>gwt-maven-plugin</artifactId>
105                                         <versionRange>2.4.0</versionRange>
106                                         <goals>
107                                             <goal>resources</goal>
108                                             <goal>compile</goal>
109                                             <goal>test</goal>
110                                             <goal>i18n</goal>
111                                             <goal>generateAsync</goal>
112                                         </goals>
113                                     </pluginExecutionFilter>
114                                     <action>
115                                         <execute />
116                                     </action>
117                                 </pluginExecution>
118                                 <pluginExecution>
119                                     <pluginExecutionFilter>
120                                         <groupId>org.apache.maven.plugins</groupId>
121                                         <artifactId>maven-war-plugin</artifactId>
122                                         <versionRange>[2.1.1,)</versionRange>
123                                         <goals>
124                                             <goal>exploded</goal>
125                                         </goals>
126                                     </pluginExecutionFilter>
127                                     <action>
128                                         <execute />
129                                     </action>
130                                 </pluginExecution>
131                             </pluginExecutions>
132                         </lifecycleMappingMetadata>
133                     </configuration>
134                 </plugin>
135             </plugins>
136         </pluginManagement>
137         
138     </build>
139 
140     <dependencies>
141         
142         <!-- Google Web Toolkit Stuff -->
143         <dependency>
144             <groupId>com.google.gwt</groupId>
145             <artifactId>gwt-servlet</artifactId>
146             <version>${gwtVersion}</version>
147             <scope>runtime</scope>
148         </dependency>
149         <dependency>
150             <groupId>com.google.gwt</groupId>
151             <artifactId>gwt-user</artifactId>
152             <version>${gwtVersion}</version>
153             <scope>provided</scope>
154         </dependency>
155         <dependency>
156             <groupId>junit</groupId>
157             <artifactId>junit</artifactId>
158             <version>4.7</version>
159             <scope>test</scope>
160         </dependency>
161         <dependency>
162             <groupId>javax.validation</groupId>
163             <artifactId>validation-api</artifactId>
164             <version>1.0.0.GA</version>
165             <scope>test</scope>
166         </dependency>
167         <dependency>
168             <groupId>javax.validation</groupId>
169             <artifactId>validation-api</artifactId>
170             <version>1.0.0.GA</version>
171             <classifier>sources</classifier>
172             <scope>test</scope>
173         </dependency>
174 
175         <!-- Spring -->
176         <dependency>
177             <groupId>org.springframework</groupId>
178             <artifactId>org.springframework.context</artifactId>
179             <version>${spring.version}</version>
180         </dependency>
181         <dependency>
182             <groupId>org.springframework</groupId>
183             <artifactId>org.springframework.core</artifactId>
184             <version>${spring.version}</version>
185         </dependency>
186         <dependency>
187             <groupId>org.springframework</groupId>
188             <artifactId>org.springframework.web</artifactId>
189             <version>${spring.version}</version>
190         </dependency>
191         <dependency>
192             <groupId>org.springframework</groupId>
193             <artifactId>org.springframework.web.servlet</artifactId>
194             <version>${spring.version}</version>
195         </dependency>
196         <dependency>
197             <groupId>org.springframework</groupId>
198             <artifactId>org.springframework.beans</artifactId>
199             <version>${spring.version}</version>
200         </dependency>
201         <dependency>
202             <groupId>org.springframework</groupId>
203             <artifactId>org.springframework.oxm</artifactId>
204             <version>${spring.version}</version>
205         </dependency>
206         <dependency>
207             <groupId>org.springframework</groupId>
208             <artifactId>spring-jdbc</artifactId>
209             <version>${spring.version}</version>
210         </dependency>
211 
212         <!--db -->
213         <dependency>
214             <groupId>net.sourceforge.jtds</groupId>
215             <artifactId>jtds</artifactId>
216             <version>1.2.4</version>
217         </dependency>
218         <dependency>
219             <groupId>org.mybatis</groupId>
220             <artifactId>mybatis-spring</artifactId>
221             <version>1.0.2</version>
222         </dependency>
223         <dependency>
224             <groupId>org.springframework.data</groupId>
225             <artifactId>spring-data-commons-core</artifactId>
226             <version>1.1.0.RELEASE</version>
227         </dependency>
228         <dependency>
229             <groupId>commons-dbcp</groupId>
230             <artifactId>commons-dbcp</artifactId>
231             <version>1.2.2</version>
232         </dependency>
233 
234         
235         <!-- logging -->
236 
237         <dependency>
238             <groupId>ant</groupId>
239             <artifactId>ant-apache-log4j</artifactId>
240             <version>1.6.5</version>
241         </dependency>
242 
243         <dependency>
244             <groupId>log4j</groupId>
245             <artifactId>log4j</artifactId>
246             <version>1.2.16</version>
247         </dependency>
248 
249         <dependency>
250             <groupId>net.cds.cps.dao.logger</groupId>
251             <artifactId>LoggingDAO</artifactId>
252             <version>1.0.0</version>
253         </dependency>
254     </dependencies>
255 
256     <repositories>
257         <repository>
258             <id>asc.internal</id>
259             <name>Internal Repository</name>
260             <url>http://repository/maven2/internal</url>
261         </repository>
262         <repository>
263             <id>springsource-release</id>
264             <name>SpringSource Releases Repository</name>
265             <url>http://repository.springsource.com/maven/bundles/release</url>
266         </repository>
267         <repository>
268             <id>springsource-external</id>
269             <name>SpringSource External Releases Repository</name>
270             <url>http://repository.springsource.com/maven/bundles/external</url>
271         </repository>
272     </repositories>
273 
274     <pluginRepositories>
275         <pluginRepository>
276             <id>gwt-maven-plugins</id>
277             <url>http://gwt-maven.googlecode.com/svn/trunk/mavenrepo/</url>
278         </pluginRepository>
279     </pluginRepositories>
280     
281     <distributionManagement>
282         <repository>
283             <id>internal</id>
284             <name>Internal Shared Maven Repository</name>
285             <url>scp://maven/var/www/html/maven2/internal</url>
286         </repository>
287     </distributionManagement>
288         
289 </project> 
```

# iphone - 随时了解设备位置将在背景中应用

> ID：11766951
> 
> 赞同：0
> 
> 时间：2012-08-01T20:19:17.567
> 
> 标签：iphone, background, cllocationmanager

我正在开发一个应用程序，该应用程序每 5 分钟通知一个 WebService 设备位置（例如）：

因此，当应用程序离开前台执行并进入后台时，我必须午餐一个计时器，他 1 - 更新设备位置 2 - 将位置发送到 Web 服务

我该如何执行此操作？或者你知道我可以遵循的任何代码示例来实现这个设计吗？

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:43:08.093

看起来没有人给你一个可靠的答案，所以请允许我。

没有 iOS 认可的在后台运行 5 分钟（或任何分钟）计时器的方式（除非您的应用程序是 VOIP 或音乐）。您可以做的是在后台将您的应用注册为需要位置服务（编辑 info.plist 并添加一个键 Required Background Modes 然后添加一个值 App registers for location updates。这意味着您的 locationManager:didUpdateToLocation:fromLocation:方法和相应的区域监控/SLC 方法将在位置更改时触发，但计时器根本不起作用。

原因是计时器需要运行循环（执行代码的线程）并且必须在该线程上捎带，但是当应用程序处于后台时，即使从 LocationManager 执行代码，执行代码几乎总是在计时器响起之前完成。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:55:26.293

你不能这样做（在 iOS 上）。

（除非您的应用请求用于导航应用的权限）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-19T05:44:40.873

你好@阿拉丁加拉斯，

我开发了一个简单的应用程序，它支持 Xamarin 中 iOS 和 Android 的后台位置更新。

该应用程序每 2 秒推送一个新位置（如果您愿意，可以将其更改为 5 分钟）。

有一个功能我无法添加；这是为了在用户关闭应用程序（对于 iPhone）时保持服务。除此之外，只要应用程序打开，即使手机被锁定，服务也会继续运行。

如果有帮助，您可以查看该应用程序作为参考。

[GitHub 回购](https://github.com/shernandezp/XamarinForms.LocationService)

# spring - 如何在我的 spring 应用程序上下文中包含两个同名文件？

> ID：11766952
> 
> 赞同：3
> 
> 时间：2012-08-01T20:19:18.763
> 
> 标签：spring, junit, applicationcontext

不确定这是否有答案，但这里有。我正在使用 JUnit 4.8.1 来测试我的 Spring 3.1.0.RELEASE 项目。我的类路径上有两个 JAR 文件。在每个文件中，都有同名的文件—— /module/rootContext.xml 。

在我的 testApplicationContext.xml 文件（我的 JUnit 测试的 Spring 上下文文件）中，是否可以包含其中的每一个？现在，我唯一知道的就是

```
<import resource="classpath:/module/rootContext.xml" /> 
```

但我不知道如何指定每个文件所在的确切 JAR 文件。

因为我正在处理不是我自己的代码，所以不能选择更改 JAR 中 XML 文件的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T20:30:45.770

如果你想同时包含这两个文件，你可以这样做：

```
<import resource="classpath*:/module/rootContext.xml" /> 
```

**也可以看看：**

*   [4.7.2.2 类路径*：前缀](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/resources.html#resources-classpath-wildcards)

# c# - WPF中六边形的填充颜色

> ID：11766954
> 
> 赞同：0
> 
> 时间：2012-08-01T20:19:33.470
> 
> 标签：c#, wpf, shapes

我在使用此代码填充六边形时遇到问题，当此代码运行时，它仅绘制“白色”六边形的轮廓，我想用颜色填充六边形，但它不起作用。

我进行了很多搜索并尝试了很多东西，例如`drawingContext.Drawing()`，`drawingBrush`等。

我在这段代码中遗漏了什么吗？这是代码：

```
public void DrawHexagon(DrawingContext drawingContext)
{
   GeometryGroup hexaKey = new GeometryGroup();

        //making lines for hexagon 
        hexaKey.Children.Add(
           new LineGeometry(new Point(X1, Y1), new Point(X2, Y2)));

        hexaKey.Children.Add(
            new LineGeometry(new Point(X2, Y2), new Point(X3, Y3)));

        hexaKey.Children.Add(
            new LineGeometry(new Point(X3, Y3), new Point(X4, Y4)));

        hexaKey.Children.Add(
            new LineGeometry(new Point(X4, Y4), new Point(X5, Y5)));

        hexaKey.Children.Add(
            new LineGeometry(new Point(X5, Y5), new Point(X6, Y6)));

        hexaKey.Children.Add(
            new LineGeometry(new Point(X6, Y6), new Point(X1, Y1)));

        //
        // Create a GeometryDrawing.
        //
        GeometryDrawing hexaKeyDrawing = new GeometryDrawing();
        hexaKeyDrawing.Geometry = hexaKey;

        // Paint the drawing with a gradient.
        hexaKeyDrawing.Brush =new SolidColorBrush(Colors.Red);

        // Outline the drawing with a solid color.
        hexaKeyDrawing.Pen = new Pen(Brushes.White, 2);

        drawingContext.DrawGeometry(hexaKeyDrawing.Brush, hexaKeyDrawing.Pen, hexaKeyDrawing.Geometry);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:25:01.293

LineGeometry 没有办法填充......它们只是线条。你需要一条路。MSDN有[一个例子](http://msdn.microsoft.com/en-us/library/ms750593.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:21:53.987

一个例子，如何填充六边形： http: [//www.codeproject.com/Articles/14948/Hexagonal-grid-for-games-and-other-projects-Part-1](http://www.codeproject.com/Articles/14948/Hexagonal-grid-for-games-and-other-projects-Part-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:59:25.870

在您的示例中，您在 a内有许多`LineGeometry`实例。`GeometryGroup``GeometryDrawing`

首先，我会链接以提醒您注意您实际上并未使用`GeometryDrawing`. 在您的示例中，您仅将其用作`GemetryGroup`.

忽略这个问题是`LineGeometry`实例不打算绘制形状并且`GeometryGroup`无法意识到你的 6`LineSegments`一起形成一个封闭的形状。

但是不要绝望，因为有一种方法可以实现您想要的：`PathGeometry`. 这种几何形状本质上定义了可能被填充的区域的轮廓！该轮廓可以由起点和一系列`PathSegment`s 定义。

```
private Point GetExtremity(Point center, double radius, double orientation)
        {
            return new Point(
                center.X + Math.Cos(orientation) * radius,
                center.Y + Math.Sin(orientation) * radius
                );
        }

        public void DrawUniformShape(DrawingContext context, Brush brush, Pen pen, Point center, double radius, int sides, double orientationRadians)
        {
            context.DrawGeometry(
                brush,
                pen,
                new PathGeometry(
                    Enumerable.Repeat(
                        new PathFigure(
                            GetExtremity(center, radius, orientationRadians),
                            from vertex in Enumerable.Range(1, sides - 1)
                            let angle = orientationRadians + vertex * 2 * Math.PI / sides
                            select new LineSegment(GetExtremity(center, radius, angle), true),
                            true
                            ),
                        1
                        )
                    )
                );
        }

        public void DrawBarnColouredHexagon(DrawingContext context, Point center, double radius, double orientation)
        {
            DrawUniformShape(
                context,
                Brushes.Red,
                new Pen(Brushes.White, 2),
                center,
                radius,
                6,
                0
                );
        } 
```

# sql - 如何从 sql server 2008 中的 where 子句检查表中是否存在数据？

> ID：11766961
> 
> 赞同：0
> 
> 时间：2012-08-01T20:20:00.787
> 
> 标签：sql, sql-server

假设我有一个带有 columns的表`user_id`，`name`并且该表包含如下数据：

```
user_id   name
-------   -----
sou       souhardya
cha       chanchal
swa       swapan
ari       arindam
ran       ranadeep 
```

如果我想知道这些用户（`sou`, `cha`, `ana`, `agn`, `swa`）是否存在于这个表中，那么我想要这样的输出：

```
user_id    it exists or not
-------    -----------------
sou            y
cha            y
ana            n
agn            n
swa            y 
```

由于`ana`和`aga`不存在于表中，它必须显示“n”（如上面的输出）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:25:28.767

假设您现有的清单不在数据库中，您将不得不组装一个包含这些清单的查询。有很多方法可以做到这一点。使用 CTE，它看起来像这样：

```
with cte as
(
select 'sou' user_id
union all
select 'cha'
union all
select 'ana'
union all
select 'agn'
union all
select 'swa'
)
select 
  cte.user_id,
  case when yt.user_id is null then 'n' else 'y' end
from cte
left join YourTable yt on cte.user_id = yt.user_id 
```

这也假设`user_id`是唯一的。

这是带有概念证明的 SQLFiddle：[http ://sqlfiddle.com/#!3/e023a0/4](http://sqlfiddle.com/#!3/e023a0/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:25:49.057

假设您只是手动测试：

```
DECLARE @Users TABLE
(
    [user_id] VARCHAR(50)
)

INSERT INTO @Users 
SELECT 'sou'
UNION SELECT 'cha'
UNION SELECT 'ana'
UNION SELECT 'agn'
UNION SELECT 'swa'

SELECT a.[user_id]
    , [name]
    , CASE
        WHEN b.[user_id] IS NULL THEN 'N'
        ELSE 'Y'
        END AS [exists_or_not]
FROM [your_table] a
LEFT JOIN @Users b
    ON a.[user_id] = b.[user_id] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:28:07.053

```
;with usersToCheck as
(
          select 'sou' as userid
    union select 'cha'
    union select 'ana'
    union select 'agn'
    union select 'swa'
)
select utc.userid, 
(case when exists ( select * from usersTable as ut where ut.user_id = utc.userid) then 'y' else 'n' end)
from usersToCheck as utc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:25:37.567

您没有提供足够的信息来提供一个工作示例，但这应该让您接近：

```
select tbl1.user_id, case tbl2.user_id is null then 'n' else 'y' end
from   tbl1 left outer join tbl2 on tbl1.user_id = tbl2.user_id 
```

# xml - 在 XSLT 转换中保存原始 xml

> ID：11766965
> 
> 赞同：2
> 
> 时间：2012-08-01T20:20:05.967
> 
> 标签：xml, xslt

我正在尝试转换传入的 XML，但将原始 xml 保留在新节点中。

假设正在转换以下 XML。

```
<Document>
   <Number>12345</Number>
   <Name>Person Name</Name>
</Document> 
```

我想要的输出是这样的：

```
<Document>
   <Number>12345</Number>
   <OriginalXml>
       <![CDATA[
           ^^ the above xml ^^
       ]]
   </OriginalXml>
</Document> 
```

我在 C# 中很容易做到，但开发经理想看看它在 XSLT 中是否可行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:48:26.840

你可以这样做：

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" method="xml"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/Document">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
            <OriginalXml>
                <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                <xsl:copy-of select="."/>
                <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
            </OriginalXml>      
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Name"/>

</xsl:stylesheet> 
```

**输出**

```
<Document>
   <Number>12345</Number>
   <OriginalXml>
      <![CDATA[<Document>
         <Number>12345</Number>
         <Name>Person Name</Name>
      </Document>]]>
   </OriginalXml>
</Document> 
```

# c# - Sharepoint 2007 - 有没有办法确定是否首先签入文件？

> ID：11766972
> 
> 赞同：0
> 
> 时间：2012-08-01T20:20:34.867
> 
> 标签：c#, sharepoint-2007, moss, checkin, splistitem

我认为这会容易得多，但是我无法在我的事件处理程序中找到一种方法来确定它是否是文件的第一次签入..

你看，我打破了角色继承，并有选择地继承了 doc libs 中文件的权限，但我希望只做一次，在文件的第一次签入期间。

我尝试在 ItemAdded 事件中向“SPListItem.Properties”添加一个条目，以指示该文件是否是新文件，但是当我执行“SPListItem.Update()”时它消失了..

我玩过 ItemCheckingIn 和 ItemCheckedIn 事件但没有成功......

目前我唯一的希望是向 ContentType 添加一个 SPField 以指示是否是新文件，但我真的希望避免它..

有任何想法吗？？？？

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T09:35:25.483

我建议不仅考虑系统帐户是否具有访问权限，而且还要考虑文件的签出日期是否与文件的创建日期相同。

```
public bool IsFirstCheckIn(SPListItem item)
{
    // Item not null!
    if (item != null)
    {
        SPSecurity.RunWithElevatedPrivileges(delegate
        {
            // Open privileged Site
            using (SPSite pSite = new SPSite(site.ID))
            {
                // Open privileged Web
                using (SPWeb pWeb = pSite.OpenWeb(web.ID))
                {
                    // Create privileged SharePoint-Objects
                    SPList pList = GetList(pWeb, list.ID);
                    SPListItem pItem = GetListItem(pList, item.UniqueId);

                    // Check the Item
                    if (pItem == null)
                    {
                        // Can't access
                        return true;
                    }
                    else if (pItem.File != null && pItem.File.CheckedOutByUser != null)
                    {
                        // If the Item's File and checked out User is set, check if checked out date is equal creation date
                        return (pItem.File.CheckedOutDate.ToLocalTime() == pItem.File.TimeCreated.ToLocalTime());
                    }
                }
            }            
        });    
    }

    return false;
} 
```

使用系统账号，绝对是个好主意，否则授权设置会出问题。使用“本地时间”而不是“UTC-Time”，SharePoint 在存储时处理时区！

似乎，SharePoint 使用 UTF-FileTime 来存储文件的创建时间，但使用为 SPWeb 或 SPUser 定义的时区来存储基于“本地时间”的文件签出日期。

幸运的是，DateTime 值确实知道它是什么，并且可以在调用 ToLocalTime() 时将其转换为相同的“本地时间”。奇怪的是，在调用 ToUniversalTime(); 时它仍然是一个文件时间；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:39:46.093

所以我有一个解决方案。对不起，我不能在这里发布代码，我的开发机器上无法访问互联网。它应该对每个人都足够好。

解决方案：在 CheckingIn 事件期间，我尝试使用 SHAREPOINT\system("SPSecurity.RunWithElevatedPrivileges()") 访问文件。在第一次签入期间，文件是新的，除了上传者之外的其他用户无法访问。

因此，如果我无法使用 SHAREPOINT\system 获取文件，则意味着它是新的，我将其 Guid 保存在 EventHandlers 类的字典中。

然后在 CheckedIn 事件中，我只需检查字典是否包含当前项目的 Guid，如果包含 - FIRST CHECK-IN，如果不包含 - NOT FIRST CHECK-IN。

当然，在我完成文件后，我会从字典中删除条目。

希望对你有帮助，有什么问题欢迎提问：）

# r - xlConnect R 使用 JVM 内存

> ID：11766981
> 
> 赞同：2
> 
> 时间：2012-08-01T20:21:11.483
> 
> 标签：r, jvm, 32bit-64bit, heap-memory, xlconnect

我在 R 中使用**XLConnect** (Mirai Solutions) 遇到了 JVM 内存问题。

`loadWorkbook`使用or可以很好地将数据加载到 R 中，但是在使用任何导出函数（ 、等） `readWorksheetFromFile`导出期间，更大的数据（数据帧大约 3MB）在写入 JVM 时会卡住，并且 R 停止响应。`writeNamedRegion``writeWorksheetToFile`

我已经使用 重置了 java 参数`options(java.parameters = "-Xmx1500m")`，这增加了我能够导出到 Excel 的数据帧的大小，但是 R 仍然会减慢大约 1MB 并且不会在 3MB 左右工作。

我在 64 位 Windows 7 系统上运行 32 位 Office 软件和 32 位 Java，并在 8GB RAM 的机器上运行。与 JVM 中大约 750 MB 的可用内存相比，3MB 似乎不是很大，据说在导出开始时就在那里（用 选中`xlcMemoryReport`）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:01:41.813

鉴于您的参考值为 3MB，我得出的结论是，您正在尝试使用尺寸为 10 列 x 40k 行的数字变量编写一个 data.frame（或可比较的；这种 data.frame 的 object.size 大约为 3.2MB） .

根据您是尝试编写 xls (BIFF8) 还是 xlsx (OOXML) 文件，内存要求可能会有很大不同。原因是 xlsx 文档实际上是压缩的 XML 文件，而 Apache POI（这是 XLConnect 使用的底层 Java API **）**使用 xmlbeans 来操作这些文件——这可能会占用大量内存。另一方面，BIFF8 是一种二进制数据格式，需要较少的内存。

您应该能够将前面提到的维度的 data.frame 写入具有最大值的 xlsx 文档。堆大小为 1024m，即以下对我来说很好：

```
options(java.parameters = "-Xmx1024m") # required BEFORE any JVM is initialized in R
require(XLConnect)
tmp = as.data.frame(matrix(rnorm(4e5), ncol = 10))
writeWorksheetToFile(tmp, file = "test.xlsx", sheet = "test") 
```

... 将 R 2.15.1 32 位与 RStudio、XLConnect 0.2-0 和 JRE 1.6.0_25 一起使用（在 32 位 Windows XP 和 4GB RAM 上运行）。

对于那些对 Apache POI 方面的内存使用进行更深入讨论感兴趣的人，可以进行以下讨论：[http ://apache-poi.1045710.n5.nabble.com/HSSF-and-XSSF-memory-usage-一些数字-td4312784.html](http://apache-poi.1045710.n5.nabble.com/HSSF-and-XSSF-memory-usage-some-numbers-td4312784.html)

# php - Mysql查询平均时间

> ID：11766987
> 
> 赞同：5
> 
> 时间：2012-08-01T20:21:43.980
> 
> 标签：php, mysql, sql, time, average

我玩很多棋盘游戏，我维护一个网站/数据库来跟踪几个统计数据。其中一张表记录了不同的时间。它的结构是这样的：

*   **gameName**（文本 - 棋盘游戏的名称）
*   **numPeople** (int - 玩过的人数)
*   **timeArrived**（时间戳 - 我们到达我们正在玩游戏的房子的时间）
*   **beginSetup** (timestamp - 我们开始设置游戏的时间)
*   **startPlay** (timestamp - 我们真正开始玩游戏的时间)
*   **gameEnd** (timestamp - 游戏结束的时间)

基本上，我想做的是利用这些时间从中获取一些有趣/有用的信息（比如平均什么游戏需要最长的设置时间，什么游戏平均需要最长的时间，什么游戏是最长的到达完成等...）通常，我过于依赖 PHP，我只会做一个 select * ... 并抓住所有时间然后做一些 PHP 计算来找到所有的统计信息，但我知道 MySQL 可以通过查询为我做这一切。不幸的是，当涉及到更复杂的查询时，我很迷茫，所以我需要一些帮助。

我想要一些查询的示例，希望一旦有人让我开始，我就可以计算出其他平均时间查询。玩棋盘游戏的平均时间最长的查询是什么样的？平均最快的游戏/设置时间怎么样？

**附加信息：** draw010 - 你让我有了一个很好的开始，但我没有得到预期的结果。我给了你一些真实的例子……我有一个叫 Harper 的游戏，它已经玩了两次（所以数据库中有两条时间完整的记录）。以下是它的时代：

```
beginSetup(1) = 2012-07-25 12:06:03
startPlay(1) = 2012-07-25 12:47:14
gameEnd(1) = 2012-07-25 13:29:45

beginSetup(2) = 2012-08-01 12:06:30
startPlay(2) = 2012-08-01 12:55:00
gameEnd(2) = 2012-08-01 13:40:32 
```

然后，当我运行您提供给我的查询（并将秒数转换为小时/分钟/秒）时，我得到了这些结果（对不起，我不知道如何做您所做的酷表）：

```
gameName = Harper
Total Time = 03:34:32
...and other incorrect numbers. 
```

从数字来看，平均总时间*应该*是大约 1 小时 24 分钟，而不是 3 小时 34 分钟。知道为什么我会得到不正确的数字吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T20:34:30.437

这是一个查询，用于获取每场比赛的平均设置时间和播放时间，希望对您有所帮助：

```
SELECT
  gameName,
  AVG(UNIX_TIMESTAMP(startPlay) - UNIX_TIMESTAMP(beginSetup)) AS setupTime,
  AVG(UNIX_TIMESTAMP(gameEnd) - UNIX_TIMESTAMP(startPlay)) AS gameTime,
  AVG(UNIX_TIMESTAMP(gameEnd) - UNIX_TIMESTAMP(beginSetup)) AS totalTime,
FROM `table`
GROUP BY gameName
ORDER BY totalTime DESC; 
```

应该产生类似于以下的结果：

```
+----------+-----------+-----------+-----------+
| gameName | setupTime | gameTime  | totalTime |
+----------+-----------+-----------+-----------+
| chess    | 1100.0000 | 1250.0000 | 2350.0000 |
| checkers |  466.6667 |  100.5000 |  933.3333 |
+----------+-----------+-----------+-----------+ 
```

我刚刚插入了大约 8 个带有一些随机数据的测试行，所以我的数字没有意义，但这就是你会得到的结果。

请注意，这将扫描您的整个表，因此可能需要一段时间，具体取决于您在此表中有多少记录。如果您有大量游戏记录，这绝对是您想要定期在后台运行的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:34:44.787

对于设置需要多长时间，您可以编写如下内容：

```
SELECT DATEDIFF(HOUR, BeginSetup, StartTime) -- in hours how long to set up 
```

# css - 顶部标识标题不在 IE 中的页面宽度中 - CSS 问题

> ID：11766988
> 
> 赞同：1
> 
> 时间：2012-08-01T20:21:46.950
> 
> 标签：css, internet-explorer

在[这个页面上](http://pwtest.iurecsports.org/)，我无法让 IE 在页面的全宽中显示深红色的标识标题。但是它在 FF 和 Chrome 中运行良好。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:32:21.463

~~尝试给予`#header` `width: 100%;`而不是`width: auto;`~~

添加：

```
body, html { padding: 0; margin: 0; } 
```

到您的 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:38:30.920

你总是可以为 IE 做一个条件语句。

```
<!--[if IE]>
<style type="text/css">
/*Put your styles specific for ie below*/

</style>
<![endif]--> 
```

# vb.net - 搜索栏问题，无法重新搜索 VB 2008

> ID：11766991
> 
> 赞同：0
> 
> 时间：2012-08-01T20:22:09.363
> 
> 标签：vb.net

好吧，我正在创建一个搜索栏来查找我学校项目中的一些患者，但是当我搜索它时它可以工作，但是当我进行另一次搜索时，它向我发送了一条消息，就好像即使它存在，数字也不存在一样，这就是代码的按钮希望你能帮助我。

```
Private Sub cmdIDBuscar_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdBuscarID.Click

    Dim sqlCon As New SqlClient.SqlConnection
    Dim sqlComm As New SqlClient.SqlCommand

    'Ruta de la conección.
    sqlCon.ConnectionString = ("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Sistema para Hospitales.mdf;Integrated Security=True;User Instance=True")
    'Instrucción con la que se trabajara.
    sqlComm.CommandText = "SELECT * FROM [Pacientes] WHERE IDPaciente= '" & txtID.Text & "';"
    'Abrir la coneccion SQL
    sqlCon.Open()

    Do Until txtID.Text = txtCompararID.Text

        Me.PacientesBindingSource.MoveNext()

        Exit Do

        If EOF(True) Then KryptonMessageBox.Show("Error, no se encontro paciente.", "Error", MessageBoxButtons.AbortRetryIgnore, MessageBoxIcon.Error)

    Loop

    If txtID.Text = txtCompararID.Text Then
        txtNombres.Text = txtCompararN1.Text & " " & txtCompararN2.Text & " " & txtCompararN3.Text
        txtApellidos.Text = txtCompararAp1.Text & " " & txtCompararAp2.Text
        txtEdad.Text = txtCompararEdad.Text
        Select Case txtCompararSexo.Text
            Case Is = "F"
                txtSexo.Text = "Femenino"
            Case Is = "M"
                txtSexo.Text = "Masculino"
        End Select
        Select Case TipoAfiliacionTextBox.Text
            Case Is = "1"
                txtTAfiliacion.Text = "Cotizante"
            Case Is = "2"
                txtTAfiliacion.Text = "Beneficiario"
            Case Is = "3"
                txtTAfiliacion.Text = "Pensionado"
        End Select
        txtAltura.Text = AlturaTextBox1.Text
        txtPeso.Text = PesoTextBox1.Text
        txtPresion.Text = PresionTextBox.Text
        txtTemperatura.Text = TemperaturaTextBox.Text
    Else
        KryptonMessageBox.Show("No se encontro el paciente", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:28:07.650

除其他问题外，因为您在比较循环的中间有一个 Exit Do 语句，您可能只会匹配第一条记录，因为您的 do 循环最多执行一次。

我猜测 txtCompararID 是您的 PacientesBindingSource 的数据包，并且您的循环的目的是在此绑定源中移动，直到找到与 txtID 匹配的值。

如果是这种情况，您的 do 循环应该看起来更像：

```
' Get back to the top of the list
Me.PacientesBindingSource.MoveFirst()

Do Until txtID.Text = txtCompararID.Text

    Me.PacientesBindingSource.MoveNext()

    If EOF(True) Then 
       KryptonMessageBox.Show("Error, no se encontro paciente.", "Error", MessageBoxButtons.AbortRetryIgnore, MessageBoxIcon.Error)

       Exit Do
    End If
Loop 
```

此外，您应该为您的连接和命令对象使用 Using 语句，以便在您完成使用它们时正确关闭和处理它们。

例如：

```
Using sqlCon As New SqlClient.SqlConnection
Using sqlComm As New SqlClient.SqlCommand

... all of your code
End Using
End Using 
```

最后，也是最重要的，您应该使用参数化查询语句来防止 SQL 注入攻击，因为您允许直接输入值。这个说法：

```
sqlComm.CommandText = "SELECT * FROM [Pacientes] WHERE IDPaciente= '" & txtID.Text & "';" 
```

应该改为：

```
sqlComm.CommandText = "SELECT * FROM [Pacientes] WHERE IDPaciente= ?"
sqlComm.Parameters.AddWithValue("IDPaciente", txtID.text) 
```

# .htaccess - 使用 htaccess 强制 SSL 和 WWW 一起使用

> ID：11766995
> 
> 赞同：6
> 
> 时间：2012-08-01T20:22:31.853
> 
> 标签：.htaccess, redirect, ssl

我正在尝试通过 https 运行我的整个网站并强制使用 www。

我已经看到了许多提供强制 www 或 https 的解决方案，甚至有几个结合在一起，但我似乎无法让任何工作。我通常发现自己处于重定向循环中。

我得到的最接近的是以下，但还不够接近：

```
RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://www.example.com/$1 [L,R=301] 
```

我需要`https://www.example.com/`

`http://example.com SUCCESS`
`https://example.com SUCCESS`
`http://www.example.com FAIL`
`https://www.example.com SUCCESS`，虽然没有实际的重定向。

谢谢

**更新**
以下代码成功执行了我需要的重定向：

```
RewriteCond %{ENV:HTTPS} !on [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L]

RewriteCond %{ENV:HTTPS} on [NC]
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T19:15:01.060

强制 https 和 www 是通过结合其他提供的答案来完成的。

这似乎有效：

```
RewriteCond %{ENV:HTTPS} !on [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L]

RewriteCond %{ENV:HTTPS} on [NC]
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:02:38.283

试试这个条件，它应该强制网站进入你的域的 ssl

```
RewriteCond %{ENV:HTTPS} !on [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:32:19.190

尝试`[OR]`在您的条件中添加一个标志。你真的想要没有 www*或**没有*https：

```
RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC,OR]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://www.example.com/$1 [L,R=301] 
```

# javascript - 如何使用 d3js 创建多线图，其中 json 格式为 nvd3？

> ID：11766998
> 
> 赞同：3
> 
> 时间：2012-08-01T20:22:51.407
> 
> 标签：javascript, binding, charts, d3.js, demo

[我使用 nvd3 创建了一个多折线图](http://waas.faa.gov/ess/satops/agc.html)，但无法以某些重要方式对其进行修改。我想使用直接的 d3js 来推出自己的产品，但我正在努力*思考 joins*。

我需要为每个路径创建一个`d.key`对应的路径`d.values`。

我的数据为 nvd3 格式化如下（删节）。

```
[
    {
        "key":"brw-a",
        "values":[
            ["2012-07-11T00:00:00", 0.0 ],
            ["2012-07-11T23:59:59", 0.0 ],
            ["2012-07-05T06:31:47", 0.0 ],
            ["2012-07-05T23:59:59", 0.0 ]
        ]
    },
    {
        "key":"brw-c",
        "values":[
            ["2012-07-11T00:00:00", 0.0 ],
            ["2012-07-07T00:00:00", 2.0 ],
            ["2012-07-05T23:59:59", 4.0 ]
        ]
    }
] 
```

我似乎需要一个内部循环来访问存储在每个`d.values`. [我有一个工作示例](http://bl.ocks.org/3232349)，它演示了如何`d.values`在一大堆无用中出现。

```
var p = d3.select("body").selectAll("p")
        .data(data)
      .enter().append("p")
        .text(function(d) {return d.key +":  " + '[' + d.values + ']'}) 
```

我觉得我很接近了，这与以下内容有关：

```
.data(data, function(d) { return d.key; }) 
```

**更新**：我能够手动循环数据以创建所需的效果。也许没有办法通过连接来做到这一点？当然，除了使用美妙的 nvd3 库之外。请参阅下面的评论以获取链接。

```
var body = d3.select("body")

for (i=0; i < data.length; i++) {
    var key = data[i].key
    var values = data[i].values

    body.append("h3")
        .text(key)

    for (j=0; j < values.length; j++) {
        body.append("p")
            .text(values[j][0] + " -- " + values[j][1])
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:15:45.470

你对`.data()`功能的看法是对的。但是因为您需要遍历 中的元素`values`，所以这就是您需要作为嵌套选择的数据传递的内容：

```
.data(function(d) { return d.values}) 
```

你可以试试这个：

```
var p = d3.select("body").selectAll("p")
        .data(data)
      .enter().append("p")
        .attr("id", function(d) { return d.key})
        .text(function(d) {return d.key})
            .selectAll("span")
                .data(function(d) { return d.values})
                .enter().append("span")
                    .text(function(d) {return d}) 
```

产生：

```
<p id="brw-a">brw-a
    <span>2012-07-05T00:00:00,0</span>
    <span>2012-07-06T23:59:59,1</span>
    <span>2012-07-07T06:31:47,0</span>
    <span>2012-07-08T23:59:59,3</span>
</p>

<p id="brw-c">brw-c
    <span>2012-07-11T00:00:00,0</span>
    <span>2012-07-07T00:00:00,2</span>
    <span>2012-07-05T23:59:59,4</span>
</p> 
```