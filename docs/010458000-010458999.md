# StackOverflow 问答 10458000-10458999

# php - 如何通过 Order BY 正确使用 Union？

> ID：10458010
> 
> 赞同：0
> 
> 时间：2012-05-05T01:21:45.060
> 
> 标签：php, mysql, sql-order-by, union

我在下面的代码连接了 5 个表，然后假设按 date_timed_add 排序。如果我只加入 4 个表，查询就可以完美运行。出于某种原因，在第 4 桌之后，它给了我一些问题。问题是它首先对第 5 个表进行排序和显示，然后是其余的表。我该如何修复它，以便通过查询所有其他表来正确排序 date_time_add ？

```
//$sid is a variable that is drawn from DB

$sql = "select `client_visit`.`visit_id`, `client_visit`.
`why_visit`, `client_visit`.`date_time_added`, `client_visit`.
`just_date`, `client_visit`.`type` from `client_visit` where 
`client_visit`.`system_id` = '$sid' and `client_visit`.
`added_by` = '$sid' 
UNION
select `client_notes`.`note_id`, `client_notes`.`note_name`, 
`client_notes`.`date_time_added`, `client_notes`.`just_date`
, `client_notes`.`type` from `client_notes` where `client_notes`.
`added_by` = '$sid'
UNION
select `client_conditions`.`med_id`, `client_conditions`.`med_name`,  
`client_conditions`.`date_time_added`, `client_conditions`.`just_date`,    
`client_conditions`.`type` from `client_conditions` where 
`client_conditions`.`system_id` = '$sid' and `client_conditions`.
`added_by` = '$sid'
UNION
select `client_stats`.`stat_test_id`, `client_stats`.`stat_why`,  
`client_stats`.`date_time_added`, `client_stats`.`just_date`, 
`client_stats`.`type`
from `client_stats` where `client_stats`.`system_id` = '$sid' 
and `client_stats`.`added_by` = '$sid'
UNION
select `client_documents`.`doc_id`, `client_documents`.`doc_name`,  
`client_documents`.`date_time_added`, `client_documents`.`just_date`, 
`client_documents`.`type` from `client_documents` where `client_documents`.
`system_id` = '$sid' and `client_documents`.`added_by` = '$sid'
 ORDER BY `date_time_added` DESC LIMIT $startrow, 20";

 $query = mysql_query($sql) or die ("Error: ".mysql_error());

 $result = mysql_query($sql);

 if ($result == "")
 {
 echo "";
 }
 echo "";

 $rows = mysql_num_rows($result);

 if($rows == 0)
 {

 }
 elseif($rows > 0)
 {
 while($row = mysql_fetch_array($query))
 {

 //Just using these two variables i can display the same row info 
 //for all the other tables

 $stuffid = htmlspecialchars($row['visit_id']);
 $title = htmlspecialchars($row['why_visit');

 }

 }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:37:55.373

根据 MySQL 文档：[http ://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

如果要对整个结果集进行排序，则 ORDER BY 子句必须放在 UNION 中的 LAST 查询上，每个查询都用括号括起来。

```
(SELECT ...)
UNION
(SELECT ...)
ORDER BY ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:31:28.150

像这样应该做的事情。

```
SELECT Tbl1.field1
    FROM ( SELECT field1 FROM table1
           UNION
           SELECT field1 FROM table2
         ) Tbl1
    ORDER BY Tbl1.field1 
```

# .net - 控件引发的事件是否应该在 UI 线程上？

> ID：10458018
> 
> 赞同：4
> 
> 时间：2012-05-05T01:25:08.363
> 
> 标签：.net, winforms, multithreading, events

我知道，当您是调用者、调用方法或以其他方式操作控件时，您应该调用 UI 线程（或无论如何拥有该控件的线程）来执行此操作。

但是，当控件通过其事件之一被回调时，假设您在正确的线程上被调用是否安全？

根据我对常用控件的经验，这总是正确的，但也许这只是因为大多数事件是用户交互的结果，因此 Windows 消息由 UI 线程上的主消息循环处理。

最近我遇到了一个我自己的自定义控件的问题，它调用事件的原因不是响应用户交互，有时是在后台线程上调用的。在一种情况下，该事件的事件处理程序试图操纵另一个产生非法跨线程调用异常的控件。

我可以通过检查我的事件处理程序中是否需要调用来解决问题，但我很想知道谁在这里实际上是“有过错”的。

我在任何地方都找不到任何说明有关控件事件的任何“规则”甚至最佳实践的文档。有人知道吗？或者，在您看来，是否应该由控件负责在正确的线程上调用订阅者或订阅者负责检查？

编辑：似乎没有人听说过任何记录在案的约定，但普遍认为最好`Control`在控件所属线程的派生类上调用公共事件，以避免让消费者感到惊讶。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T02:07:09.250

> 我知道，当您是调用者、调用方法或以其他方式操作控件时，您应该调用 UI 线程（或无论如何拥有该控件的线程）来执行此操作。

嗯……值得商榷。当然，您永远不应该尝试从托管它的线程以外的线程访问任何 UI 元素。但是，使用编组技术`Invoke`并不总是更新 UI 元素的最佳机制，尤其是当您只想使用来自工作线程的进度信息更新 UI 时。别弄错我的意思。在某个时间和某个地方，使用封送操作非常有意义，但是很多时候让 UI 线程轮询它需要通过 a 进行自我更新的数据，这`System.Windows.Forms.Timer`使得解决方案通常更简单、更高效且同样优雅（如果不是更多）。

> 但是，当控件通过其事件之一被回调时，假设您在正确的线程上被调用是否安全？

不必要。我的意思是通常情况下，尤其是`Control`实例。但请记住，您也可以`Component`在表单上删除实例。其中许多在其他线程上引发事件。考虑`BackgroundWorker.DoWork`并`SerialPort.DataReceived`作为令人满意的反例。

> 我可以通过检查我的事件处理程序中是否需要调用来解决问题，但我很想知道谁在这里实际上是“有过错”的。

我不得不说，错在你。如果您的控件确实是子类`Control`，那么我会*非常*努力地确保在 UI 线程上引发所有事件。如果你不这样做，那么它肯定会让其他（正确或错误）假设他们在 UI 线程上的开发人员感到*困惑*。如果您的“控件”只有子类`Component`，那么您可能没问题，但请确保您记录了组件的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T10:00:12.877

避免在这里假设黑魔法在起作用，你描述的是理智的结果。如果您从工作线程引发事件，那么事件处理程序当然也会在该线程上运行。如果您在该处理程序中设置 UI 控件的属性，那么您将被提醒这不是合法的事情。

完全相同的机制在控件引发的事件中起作用。它们根据 Windows 发送的通知消息进行操作，因此这发生在泵送消息循环的线程上。总是你在 Winforms 或 WPF 应用程序中的主线程，除非你正在做一些不明智的事情，比如在工作线程上创建窗口。因此，这些事件在“正确”线程上引发，并且更新控件的属性不是问题。

事件不会从一个线程跳到另一个线程，除非您明确编写代码来这样做。Begin/Invoke()，你已经知道了。

并注意 ab/using InvokeRequired，它是一种反模式。事先不知道特定代码在哪个线程上运行是不健康的。假设您在工作人员上执行长时间运行的 dbase 查询以避免冻结 UI。因此，当它的结果可用时，您*知道*您将不得不调用以显示结果。使用 InvokeRequired 没有任何意义，只是它能够告诉您确实有问题。一定要在返回 false 时抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T02:00:30.650

在我看来，如果我是您的控件的消费者，并且使用它开始抛出线程异常，我可能会有点恼火:) 我想我会在检查被引发的事件的阵营，而不是取决于在订户上。

# php - 在 Symfony 2.0 NodeDefinition 中 defaultValue 究竟是如何工作的？

> ID：10458020
> 
> 赞同：2
> 
> 时间：2012-05-05T01:25:14.693
> 
> 标签：php, configuration, symfony

我试图在 Symfony 2.0 的包中公开语义配置，但我无法让 defaultValue 在 NodeDefinition 类中工作。我生成了一个空包并为配置工作创建了必要的文件，并且我能够获取配置值，但我想将 defaultValue 设置为配置项。我使用 defaultValue() 方法并从我的 config.yml 中删除配置项，然后它显示一个空数组？谁能解释 defaultValue() 的实际工作原理，我错过了什么吗？

```
<?php
// ./DependencyInjection/Configuration.php

namespace Test\Bundle\TestBundle\DependencyInjection;

use Symfony\Component\Config\Definition\Builder\TreeBuilder;
use Symfony\Component\Config\Definition\ConfigurationInterface;

class Configuration implements ConfigurationInterface
{
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('test_bundle');

        $rootNode
            ->children()
                ->scalarNode('foo')->defaultValue('bar')->end()
            ->end();

        return $treeBuilder;
    }
} 
```

-

```
<?php
// ./DependencyInjection/TestBundleExtension.php

namespace Test\Bundle\TestBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

class TestBundleExtension extends Extension
{
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        var_dump($configs); // empty array

        $loader = new Loader\XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.xml');
    }
} 
```

所以从上面的配置类中，当配置项'test_bundle.foo'丢失时，它的值肯定会设置为'bar'......是吗？好吧，这就是我的想法，但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:11:07.933

您的根节点是一个数组节点。默认情况下，如果您不设置键，则不应用默认值。2个关于如何让你的默认值起作用的例子：

1.  将值设置为空：

    ```
    # in the config.yml
    test_bundle:
        foo: ~ 
    ```

2.  如果未设置，请告诉您的根节点使用默认值：

    ```
    // in your Configuration.php
    $rootNode
        ->addDefaultsIfNotSet()
        ->children()
            ->scalarNode('foo')->defaultValue('bar')->end()
        ->end();

    # in the config.yml
    test_bundle: ~ 
    ```

# android - 如何在 Android 4.0 中启动 MediaRecorder

> ID：10458022
> 
> 赞同：1
> 
> 时间：2012-05-05T01:25:16.777
> 
> 标签：android, camera

嗨，我使用 MediaRecordor 类录制视频。代码如下

MediaRecorder 记录器=新的 MediaRecorder();

记录器.start();

上面的行 recorder.start() 在 Android 2.x 版本中工作正常，但在 Android 4.0 中执行时应用程序正在崩溃。任何建议。

感谢和问候，

文卡特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:07:47.450

我猜它与设备特性有关。尝试设置不同的 fps、videoRate、分辨率等。还要检查初始化 MediaRecorder 的步骤，因为它用作状态机。检查[http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

# objective-c - 使用 segue 返回两个 UIViewController

> ID：10458028
> 
> 赞同：2
> 
> 时间：2012-05-05T01:26:50.803
> 
> 标签：objective-c, ios, uiviewcontroller, segue

在我的 iOS 应用程序中，我有四个`UIViewController`s，为了便于讨论，我们称它们为 1、2、3 和 4。我有从一个逐渐引导到下一个的 segues（1->2、2->3、3 -> 4）。但是，在 4 中，我希望有一个可以继续返回的按钮。我只描绘了一种方法，但我无法弄清楚如何实现它......

这种方式是有一个直接连接 4->1 的 segue，当调用 segue 时，从内存中删除 2 和 3（否则用户可以继续构建`UIViewController`s，因为它们都没有被删除）。我不知道如何从内存中删除它们，因为我没有任何变量指向它们（也就是说，它们是在调用它们各自的 segue 时创建的，据我所知，我无法直接访问他们）。

我不知道这是否是最好的方法，但如果你能弄清楚如何做到这一点（或更好的方法），任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:13:12.383

如果您还没有，则需要使用 UINavigationController。

然后在您的第四个视图中，您只需要一个带有选择器的按钮，它执行以下操作：

```
- (IBAction)goBackToFirstView:(id)sender {
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

这将为您处理所有内存，并通过将其他所有内容从堆栈中弹出来将您送回第一个视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:10:19.413

```
 NSArray *array = [NSArray arrayWithObject:[navigationController.viewControllers objectAtIndex:navigation.viewControllers.count-1]];
    navigationController.viewControllers = array; 
```

然后执行segue。

# scala - 为什么它在运行应用程序时抛出运行时异常

> ID：10458030
> 
> 赞同：2
> 
> 时间：2012-05-05T01:27:05.160
> 
> 标签：scala

当我运行命令时：

> D:\scalaTest>fsc Summer.scala ChecksumAccumulator.scala
> 
> D:\scalaTest>scala 夏天你好世界

例外是：

```
Exception in thread "main" java.lang.RuntimeException: Cannot figure out how to run target: Summer
        at scala.sys.package$.error(package.scala:27)
        at scala.tools.nsc.GenericRunnerCommand.scala$tools$nsc$GenericRunnerCommand$$guessHowToRun(GenericRunnerCommand.scala:38)
        at scala.tools.nsc.GenericRunnerCommand$$anonfun$2.apply(GenericRunnerCommand.scala:48)
        at scala.tools.nsc.GenericRunnerCommand$$anonfun$2.apply(GenericRunnerCommand.scala:48)
        at scala.Option.getOrElse(Option.scala:108)
        at scala.tools.nsc.GenericRunnerCommand.<init>(GenericRunnerCommand.scala:48)
        at scala.tools.nsc.GenericRunnerCommand.<init>(GenericRunnerCommand.scala:17)
        at scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:33)
        at scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:89)
        at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala) 
```

这是包含两个 scala 文件的源代码：

一个是 Summer.scala：

```
import ChecksumAccumulator.calculate

object Summer {
  def main(args:Array[String]) {
    for(arg <- args)
      println(arg + ":" + calculate(arg))
  }
} 
```

另一个是 ChecksumAccumulator.scala：

```
import scala.collection.mutable.Map

class ChecksumAccumulator {

  private var sum=0

  def add(b:Byte) { sum += b }

  def checksum():Int = ~(sum & 0xFF) + 1
}

object ChecksumAccumulator {

  private val cache = Map[String,Int]()

  def calculate(s:String):Int =
    if(cache.contains(s))
      cache(s)
    else {
      val acc = new ChecksumAccumulator
      for(c<-s)
        acc.add(c.toByte)
      val cs = acc.checksum()
      cache += (s->cs)
      cs
    }
} 
```

**很感谢**

顺便说一句：这是 Martin Odersky 的“scala 2nd.Edition 编程”一书中的示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T01:44:48.923

如果我不得不猜测，那是因为您的`CLASSPATH`环境变量不包含`.`.

只要您的`Summer.class`文件生成正确，您应该能够让它运行

```
scala -cp . Summer hello world 
```

# vb.net - 在 VB.NET 中拆分字符串时出现奇怪的结果

> ID：10458032
> 
> 赞同：1
> 
> 时间：2012-05-05T01:27:45.740
> 
> 标签：vb.net, arrays, string, split

在对字符串进行多次拆分时，我得到了奇怪的结果，所以我决定做一个简单的测试来弄清楚发生了什么

测试字符串“1234567891011121314151617181920”

如果我想在 Javascript 中获得 10 到 20 之间的内容，我会这样做：

```
var results = testString.split("10")[1].split("20")[0] 
```

这将返回**111213141516171819**

但是，当我在 VB 中执行此操作时，我得到**111**

```
Split(testString,"10")(1).Split("20")(0) 
```

无论我放什么，似乎第二次拆分都只能识别第一个字符。

因此，当它在字符串中找到下一个“2”时它会停止，即使该字符串甚至不存在，即使“2abc”也会产生相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:44:40.687

String.Split 没有只接受 String 的重载。参数是 Char 数组或 String 数组。您的字符串可能正在转换为 char 数组。像这样显式传递一个字符串数组：

`testString.Split(New String() { "10" }, StringSplitOptions.None)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:45:06.370

Vb 仅将分隔符参数视为单个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T14:12:01.683

尝试包装第二个拆分，使其像第一个拆分一样，即：

```
Split( Split(testString,"10")(1), "20" )(0)" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-20T15:31:41.533

这是一个棘手的场景，我以前见过让人们绊倒，所以我认为比其他答案给出的解释更值得。在您的原始格式`Split(testString,"10")(1).Split("20")(0)`中，您在不知不觉中使用了两个**不同** `Split`的功能。

第一种`Split(testString,"10")`是使用`Microsoft.VisualBasic.Strings.Split`函数，它接受字符串类型的参数。 [http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.split(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.split(v=vs.110).aspx)

第二个`.Split("20")(0)`是 using`System.String.Split`方法，它没有带`String`参数的重载。[http://msdn.microsoft.com/en-us/library/System.String.Split(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/System.String.Split(v=vs.110).aspx)

所以发生的事情是：

1.  `Split(testString,"10")`使用`Microsoft.VisualBasic.Strings.Split`，它返回 new String() {"123456789", "11121314151617181920"}
2.  `(1)`表示获取返回数组的第一个位置，即“11121314151617181920”
3.  `"11121314151617181920".Split("20")(0)`使用`System.String.Split`, 并尝试在字符串分隔符“20”上拆分
4.  注意：字符串“20”参数被隐式转换为字符“2”，因为 String.Split 的唯一单个参数重载具有`Public Function Split (ParamArray separator As Char()) As String()`. ParamArray 参数选项允许您将逗号分隔的值列表传递到函数中，类似于 String.Format 如何使用动态替换值#。 [http://msdn.microsoft.com/en-us/library/538f81ec.aspx](http://msdn.microsoft.com/en-us/library/538f81ec.aspx)
5.  第 3 步代码变为`"11121314151617181920".Split(new Char() {CChar("20")})(0)`，使用文字值是`"11121314151617181920".Split(new Char() {"2"c})(0)`。结果是 {"111", "13141516171819", "0"}。获取第 0 个位置，返回“111”。

因此，为避免混淆，您应该将代码转换为在两侧使用相同版本的 Split。

**以下两个示例中的任何一个都应该有效：**

**示例 1**：使用`Microsoft.VisualBasic.Strings.Split`：

```
Split( Split(testString,"10")(1), "20" )(0) 
```

**示例 2**：使用`System.String.Split`：

```
testString _ 
    .Split(New String() {"10"}, StringSplitOptions.None)(1) _ 
    .Split(New String() {"20"}, StringSplitOptions.None)(0) 
```

# versioning - 用户编辑文本并保存以前的版本

> ID：10458043
> 
> 赞同：2
> 
> 时间：2012-05-05T01:31:01.943
> 
> 标签：versioning

嗨，我正在研究一种应用于 Web 项目的解决方案，我想听听您的意见。我将为我的用户提供编辑许多页面的某些部分的可能性。数据将保存在数据库中，我想知道维护以前版本的最佳选择是什么。你认为我必须将它们保存在不同的数据库表中吗？即使考虑到许多人会做出贡献的最坏情况（或从观点来看最好的情况），最好的选择是什么？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:07:32.113

这是 WikiMedia (Wikipedia) 用来跟踪用户更改的基本概念。您可以将其应用到您的项目中。

有一个[页表](http://www.mediawiki.org/wiki/Manual%3aPage_table)。这有一个标题、关于页面的一些其他元数据和一个修订 ID。修订 id 引用[修订表](http://www.mediawiki.org/wiki/Manual%3aRevision_table)。修订表包含有关修订的信息，例如用户 ID 和有关更新的评论。它还引用了一个[文本表](http://www.mediawiki.org/wiki/Manual%3aText_table)。文本表具有页面的实际文本（由用户编辑）。

# ruby-on-rails - Rails 3.2 Active Admin，登录时更改密码

> ID：10458046
> 
> 赞同：1
> 
> 时间：2012-05-05T01:31:23.197
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, activeadmin

我有一个使用活动管理员 0.4.3 的 rails 3.2 应用程序。它使用员工模型作为管理员用户。我添加了指向 Active Admin 仪表板的链接，因此当前登录的员工可以根据需要更改密码。

```
section :admin_tasks do
  div do
    link_to "Change Password", new_employee_password_path
  end
end 
```

但是，当我单击该链接时，我会收到一条提示我已经登录的消息。如何将更改密码对话框添加到我的应用程序的活动管理部分？

我使用`new_employee_password_path`它是因为它是路线中出现的，而且看起来很合适。我也试过`edit_employee_password_path`，但也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:06:05.733

ActiveAdmin wiki 中的此页面应有助于[https://github.com/gregbell/active_admin/wiki/How-to-add-User-Accounts-for-users-to-administer-their-personal-accounts](https://github.com/gregbell/active_admin/wiki/How-to-add-User-Accounts-for-users-to-administer-their-personal-accounts)

# c++ - 我的蹦床不会弹跳（绕行、C++、GCC）

> ID：10458048
> 
> 赞同：2
> 
> 时间：2012-05-05T01:31:48.960
> 
> 标签：c++, linux, memory, gcc, detours

感觉就像我在用我所有的问题滥用 Stackoverflow，但它毕竟是一个问答论坛:) 无论如何，我已经使用 detours 有一段时间了，但我还没有实现我自己的一个（我使用过包装器较早）。因为我想完全控制我的代码（谁不想呢？）我决定自己实现一个功能齐全的 detour'er，这样我就可以理解我的代码的每一个字节。

代码（如下）尽可能简单，但问题不是。我已经成功实现了 detour （即我自己的函数的挂钩），但我无法实现*trampoline*。

每当我调用蹦床时，根据我使用的偏移量，我会得到“分段错误”或“非法指令”。两种情况的结局都是一样的；'核心倾销'。我认为这是因为我混淆了“相对地址”（注意：我对 Linux 还很陌生，所以我还远远没有掌握 GDB）。

正如代码中所评论的那样，取决于`sizeof(jmpOp)`（在第 66 行），我要么得到非法指令，要么得到分段错误。对不起，如果这是显而易见的事情，我熬夜太晚了......

```
// Header files
#include <stdio.h>
#include <sys/mman.h>
#include <unistd.h>
#include "global.h" // Contains typedefines for byte, ulong, ushort etc...
#include <cstring>

bool ProtectMemory(void * addr, int flags)
{
    // Constant holding the page size value
    const size_t pageSize = sysconf(_SC_PAGE_SIZE);

    // Calculate relative page offset
    size_t temp = (size_t) addr;
    temp -= temp % pageSize;

    // Update address
    addr = (void*) temp;

    // Update memory area protection
    return !mprotect(addr, pageSize, flags);
}

const byte jmpOp[] = { 0xE9, 0x00, 0x00, 0x00, 0x00 };

int Test(void)
{
    printf("This is testing\n");
    return 5;
}

int MyTest(void)
{
    printf("This is ******\n");
    return 9;
}

typedef int (*TestType)(void);

int main(int argc, char * argv[])
{
    // Fetch addresses
    byte * test = (byte*) &Test;
    byte * myTest = (byte*) &MyTest;

    // Call original
    Test();

    // Update memory access for 'test' function
    ProtectMemory((void*) test, PROT_EXEC | PROT_WRITE | PROT_READ);

    // Allocate memory for the trampoline
    byte * trampoline = new byte[sizeof(jmpOp) * 2];

    // Do copy operations
    memcpy(trampoline, test, sizeof(jmpOp));
    memcpy(test, jmpOp, sizeof(jmpOp));

    // Setup trampoline
    trampoline += sizeof(jmpOp);
    *trampoline = 0xE9;

    // I think this address is incorrect, how should I calculate it? With the current
    // status (commented 'sizeof(jmpOp)') the compiler complains about "Illegal Instruction".
    // If I uncomment it, and use either + or -, a segmentation fault will occur...
    *(uint*)(trampoline + 1) = ((uint) test - (uint) trampoline)/* + sizeof(jmpOp)*/;
    trampoline -= sizeof(jmpOp);

    // Make the trampoline executable (and read/write)
    ProtectMemory((void*) trampoline, PROT_EXEC | PROT_WRITE | PROT_READ);

    // Setup detour
    *(uint*)(test + 1) = ((uint) myTest - (uint) test) - sizeof(jmpOp);

    // Call 'detoured' func
    Test();

    // Call trampoline (crashes)
    ((TestType) trampoline)();
    return 0;
} 
```

如果感兴趣，这是正常运行期间的输出（使用上面的确切代码）：

```
这是测试
这是**
非法指令（核心转储）

```

如果我在第 66 行使用 +/- sizeof(jmpOp)，这就是结果：

```
这是测试
这是 ******
分段错误（核心转储）

```

注意：我正在运行 Ubuntu 32 位并编译`g++ global.cpp main.cpp -o main -Iinclude`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T01:57:39.807

您不能不加选择地将 Test() 的前 5 个字节复制到您的蹦床中，然后跳转到 Test() 的第 6 个指令字节，因为您不知道前 5 个字节是否包含一个整数个 x86 可变长度指令。为此，您将必须至少对 Test() 函数进行最少量的自动反汇编，以便找到函数开头 5 个或更多字节的指令边界，然后复制适当的数字字节到你的蹦床，然后附加你的跳跃（它不会在你的蹦床上有固定的偏移量）。请注意，在典型的 RISC 处理器（如 PPC）上，您不会遇到此问题，因为所有指令的宽度都相同。

# python - 简单的while循环直到在Python中中断

> ID：10458049
> 
> 赞同：1
> 
> 时间：2012-05-05T01:32:04.163
> 
> 标签：python, while-loop, break

一个非常简单的`while`循环语句会继续下面的程序，直到用户键入“exit”？

例如，

```
while response = (!'exit')
    continue file
else
    break
    print ('Thank you, good bye!')
#I know this is completely wrong, but it's a try! 
```

到目前为止我的文件：

```
#!/usr/bin/python
friends = {'John' : {'phone' : '0401',
        'birthday' : '31 July',
        'address' : 'UK',
        'interests' : ['a', 'b', 'c']},
    'Harry' : {'phone' : '0402',
        'birthday' : '2 August',
        'address' : 'Hungary',
        'interests' : ['d', 'e', 'f']}}
response = raw_input("Please enter search criteria, or type 'exit' to exit the program: ").split()
try:
    print "%s's %s is %s" % (response[0], response[1], friends[response[0]][response[1]])
except KeyError:
    print "Sorry, I don't know about that. Please try again, or type 'exit' to leave the program: " 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T01:44:18.397

`continue`是一个不需要参数的关键字。它只是告诉当前循环立即继续到下一次迭代。它可以在`while`和`for`循环内部使用。

Your code should then be placed within the `while` loop, which will keep going until the condition is met. Your condition syntax is not correct. It should read `while response != 'exit':`. Because you are using a condition, the `continue` statement is not needed. It will by design continue as long as the value is not `"exit"`.

Your structure would then look like this:

```
response = ''
# this will loop until response is not "exit"
while response != 'exit':
    response = raw_input("foo") 
```

If you wanted to make use of `continue`, it might be used if you were going to do other various operations on the response, and might need to stop early and try again. The `break` keyword is a similar way to act on the loop, but it instead says we should immediately end the loop completely. You might have some other condition that is a deal breaker:

```
while response != 'exit':
    response = raw_input("foo")

    # make various checks on the response value
    # obviously "exit" is less than 10 chars, but these
    # are just arbitrary examples
    if len(response) < 10:
        print "Must be greater than 10 characters!"
        continue  # this will try again 

    # otherwise
    # do more stuff here
    if response.isdigit():
        print "I hate numbers! Unacceptable! You are done."
        break 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T01:37:54.153

您的 while 循环将继续，直到您设置的条件为假。所以你希望你的代码大部分都在这个循环中。完成后，您知道用户输入了“退出”，因此您可以打印错误消息。

```
#!/usr/bin/python
friends = {'John' : {'phone' : '0401',
        'birthday' : '31 July',
        'address' : 'UK',
        'interests' : ['a', 'b', 'c']},
    'Harry' : {'phone' : '0402',
        'birthday' : '2 August',
        'address' : 'Hungary',
        'interests' : ['d', 'e', 'f']}}

response = ['']
error_message = "Sorry, I don't know about that. Please try again, or type 'exit' to leave the program: "

while response[0] != 'exit':
    response = raw_input("Please enter search criteria, or type 'exit' to exit the program: ").split()
    try:
        print "%s's %s is %s" % (response[0], response[1], friends[response[0]][response[1]])
    except KeyError:
        print error_message
    except IndexError:
        print error_message

print ('Thank you, good bye!') 
```

这段代码是你想要的开始，但它仍然有一些错误。看看您是否可以对其进行重组，以便在用户输入“退出”时不打印错误消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T02:01:31.367

```
#!/usr/bin/python
friends = {
    'John' : {
        'phone' : '0401',
        'birthday' : '31 July',
        'address' : 'UK',
        'interests' : ['a', 'b', 'c']
    },
    'Harry' : {
        'phone' : '0402',
        'birthday' : '2 August',
        'address' : 'Hungary',
        'interests' : ['d', 'e', 'f']
    }
}

def main():
    while True:
        res = raw_input("Please enter search criteria, or type 'exit' to exit the program: ")
        if res=="exit":
            break
        else:
            name,val = res.split()
            if name not in friends:
                print("I don't know anyone called {}".format(name))
            elif val not in friends[name]:
                print("{} doesn't have a {}".format(name, val))
            else:
                print("{}'s {} is {}".format(name, val, friends[name][val]))

if __name__=="__main__":
    main() 
```

# lua - 如何检查一个值是否大于一个数字并小于Lua中的另一个数字？

> ID：10458058
> 
> 赞同：3
> 
> 时间：2012-05-05T01:34:27.433
> 
> 标签：lua

我需要检查一个数字是否大于或等于 100 且小于 200。

如果 100 =< x < 200 那么

Lua 中的正确语法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T01:37:27.927

这是正确的语法：

```
if x >= 100 and x < 200 then
    -- your code
end 
```

请记住，大多数编程语言（Python 是一个明显的例外）不支持**链式比较运算符**，您必须显式比较两次并将比较结果与**逻辑 and**结合起来。

另外，您写`=<`的是*“大于或等于”*。在几乎所有编程语言中，*“大于/小于或等于”*运算符都带有比较字符，例如：`<=`, `>=`。

# jquery - jQuery 的跨浏览器音频功能障碍

> ID：10458059
> 
> 赞同：0
> 
> 时间：2012-05-05T01:34:39.993
> 
> 标签：jquery, web-services

我有一个有点令人困惑的问题。我正在使用 jQuery 在鼠标悬停在页面的某个部分上播放声音。在本地测试脚本时，它在我正在测试的所有浏览器（Firefox、Chrome 和 Safari）上都可以正常工作，但是当脚本上传到服务器时，声音只会在 Chrome 中播放。

什么可能导致这个问题？

我重新上传了所有文件，但仍然有同样的问题。

我正在使用的代码块如下所示，以防万一。感谢您的任何建议！

```
$("myElement").mouseenter(function playSound() {
$("#soundSpan").add("<audio autoplay='autoplay' preload='auto'> 
<source src='myAudio.mp3'/></audio>");
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:46:17.930

请尝试将 type 属性添加到您的标签中，另外，我删除了回调中的函数名称，没有它也可以工作

[http://www.w3schools.com/html5/tag_audio.asp](http://www.w3schools.com/html5/tag_audio.asp)

```
$("myElement").mouseenter(function() {
    $("#soundSpan").add('<audio autoplay="autoplay" preload="auto"><source src="myAudio.mp3" type="audio/mp3"/></audio>');
}); 
```

# ruby - 写入文件时如何在 Ruby 中获取换行符：

> ID：10458062
> 
> 赞同：1
> 
> 时间：2012-05-05T01:36:18.120
> 
> 标签：ruby, file

我的输入文件是：

```
1  
3  
5  
7  
9 
```

我希望我的输出文件是正方形，每行一个：

```
1  
9  
25  
49  
81 
```

但我得到：

```
19254981 
```

即没有行空间

我的代码是：

```
a= File.open('inputs')
b= File.open('outputs', 'w')
a.each_line do |one_num|
  one_number = one_num.to_i
  square= one_number * one_number
  b << square
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:38:06.713

使用`puts`而不是`<<`.

```
 b.puts square 
```

**旁注：**您可以将整个事情作为一个长方法链来完成：

```
File.open('outputs','w').puts(File.open('inputs').readlines.map{ |l| n=l.to_i; n*n }) 
```

或者作为嵌套块更具可读性：

```
File.open('outputs','w') do |out|
  File.open('inputs') do |in|
    out.puts( in.readlines.map { |l| n=l.to_i; n*n } )
  end
end 
```

尽管缺少显式`close`语句，但这两种解决方案都具有不留下任何悬空文件句柄的优点。

# android - 从终端创建项目

> ID：10458063
> 
> 赞同：2
> 
> 时间：2012-05-05T01:36:34.353
> 
> 标签：android, terminal

我正在尝试从终端创建一个 Android 项目，但遇到了一个我不明白的错误。
使用 Android 开发网站，我导航到 android/tools 目录并输入：

```
 android create project \    
 > target 2 \
 > name terminalTest \
 > path ./terminalTest \
 > activity terminalTestActivity \ 
```

但是当我输入下一行时：

```
> package com.android.terminalTest 
```

我收到此错误：

```
 Error: Argument 'com.android.terminalTest' is not recognized. 
```

对比android开发网站上的资料：

```
 android create project \
  --target 1 \
  --name MyAndroidApp \
  --path ./MyAndroidAppProject \
  --activity MyAndroidAppActivity \
  --package com.example.myandroid 
```

它们看起来相同（当然除了目标），我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:46:49.143

您的路径中可能没有工具目录或当前目录。您可以尝试 ./android 从工具目录或 jusr 将其添加到您的路径。

# objective-c - 分辨率变化定位

> ID：10458066
> 
> 赞同：1
> 
> 时间：2012-05-05T01:37:11.003
> 
> 标签：objective-c, xcode, cocoa

我正在尝试通过使用`NSRect mainFrame = [[[NSScreen screens] objectAtIndex:0] frame];`并将其设置为矩形的 x 原点来定位 NSRects，如下所示：

`outlineBox.origin.x = (mainFrame.size.width - width2) / 2.0 * (some positioning number);`

width2 只是一个浮点值。

但是，当我将分辨率更改为最后乘以的定位数与新的分辨率框架相差甚远时，我该怎么做才能解决这个问题？谢谢！

# django - 在 Django 项目中放置 JavaScriptMVC 文件的合适位置在哪里

> ID：10458069
> 
> 赞同：0
> 
> 时间：2012-05-05T01:37:33.893
> 
> 标签：django, javascript-framework, javascriptmvc

Django 1.4 更新了它的默认项目布局，所以我的新项目布局变成了

```
root
    manage.py
    /project
        /settings.py
    /app1
        /static
    /app2
        /static 
```

现在我想为我的项目使用 JavascriptMVC 框架，在哪里放置它的最佳位置？仅对于裸框架来说，它是巨大的（39M）。

我不想在我的每个应用程序中都有一个框架。那么，有没有办法将它托管在一个中心位置并被我的所有应用程序使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:10:30.427

我个人将我的项目范围的静态文件放在顶级目录（root/static/）中并将其添加到`STATICFILES_DIRS`

[https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#staticfiles-dirs](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#staticfiles-dirs)

将它与应用程序保持在同一水平对我来说更有意义。我只将项目配置相关文件放在我的根/项目/等效文件夹中，例如 settings.py、urls.py、local_dev 标志/本地设置等。

# ruby - Ruby 中的文件创建/循环问题

> ID：10458082
> 
> 赞同：1
> 
> 时间：2012-05-05T01:40:19.130
> 
> 标签：ruby

编辑：我最初的问题是，我很抱歉。Mark Reed 帮助我找出了真正的问题，所以就在这里。

请注意，此代码有效：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

source_url = "www.flickr.com"
puts "Visiting #{source_url}"
page = Nokogiri::HTML(open("http://website/script.php?value=#{source_url}"))
textarea = page.css('textarea') 

filename = source_url.to_s + ".txt"
create_file = File.open("#{filename}", 'w')
create_file.puts textarea
create_file.close 
```

这真是太棒了，但我需要它来对大约 110 个 URL 执行此操作，而不仅仅是 Flickr。这是我的循环不起作用：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

File.open('sources.txt').each_line do |source_url|
  puts "Visiting #{source_url}"
  page = Nokogiri::HTML(open("http://website/script.php?value=#{source_url}"))
  textarea = page.css('textarea') 

  filename = source_url.to_s + ".txt"
  create_file = File.open("#{filename}", 'w')
  create_file.puts "#{textarea}"
  create_file.close
end 
```

我的循环做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:58:55.727

好的，现在您正在循环输入文件的行。当你这样做时，你会得到以 newilne 结尾的字符串。因此，您尝试创建一个名称中间有换行符的文件，这在 Windows 中是不合法的。

只需切碎字符串：

```
File.open('sources.txt').each_line do |source_url|
  source_url.chomp!
  # ... rest of code goes here ... 
```

您也可以使用`File#foreach`代替`File#open.each_line`：

```
File.foreach('sources.txt') do |source_url|
  source_url.chomp!
  # ... rest of code goes here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:43:34.310

您将括号放在错误的位置：

```
create_file = File.open(variable, 'w') 
```

# java - 使用 Ebean 映射字符串和枚举的集合（Play 2.0）

> ID：10458084
> 
> 赞同：10
> 
> 时间：2012-05-05T01:41:05.497
> 
> 标签：java, jpa, playframework-2.0, ebean

我在实体中映射字符串和枚举集合时遇到问题。我遵循了不同的建议，但似乎没有任何效果。我正在使用 PlayFramework 2.0 和提供的 Ebean 作为 ORM。

这是一个插图类：

```
package models;

import java.util.*;
import javax.persistence.*;
import play.db.ebean.Model;

@Entity
@Table(name = "foo")
public class Foo extends Model {

    private static final long serialVersionUID = 1L;

    private enum FooBar {
        FOO, BAR;
    }

    @Id
    public Long id;

    @ElementCollection
    @Enumerated(EnumType.STRING)
    @CollectionTable(name = "bar_foobar", 
        joinColumns = @JoinColumn(name = "bar_id", 
            referencedColumnName = "id"))
    @Column(name = "foobar")
    public List<FooBar> fooBars;

    @ElementCollection(targetClass = String.class)
    @CollectionTable(name = "bar_strings", 
        joinColumns = @JoinColumn(name = "bar_id"))
    @Column(name = "string", nullable = false)    
    public List<String> listOfStrings;

    @Basic
    public List<String> listOfStrings2;

    // Attempt to circumvent the issue, but this gives a strange error
    //public String[] arrayOfString;
} 
```

应用程序启动时生成的 DDL 如下所示：

```
create table foo (
id      bigint not null,
constraint pk_foo primary key (id))
; 
```

如果注释正确，我希望同时看到表`bar_foobar`和正在创建的表。`bar_strings`

如果使用该`arrayOfString`变量，我会在应用程序启动时收到一条奇怪的错误消息（与随机实体相关，不一定是 Foo.class

> PersistenceException: Error with [models.user.User] 它没有被增强，但它的超类 [class play.db.ebean.Model] 是什么？（不允许在单个继承层次结构中混合增强）marker[play.db.ebean.Model] className[models.user.User]

我知道我可以将我的字符串和枚举包装在实体中，并使用@ManyToMany 关系，但想到它让我不寒而栗。Play 2.0 或 Ebean（使用 v2.7.3）中是否存在错误？还有其他方法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:27:33.050

集合映射尚未在 Ebean 中实现。[EBEAN-378](http://www.avaje.org/bugdetail-378.html)你所能做的就是自己实现映射。`@PrivateOwned`如果从集合中删除字符串，则可以在侧面使用注释以`Foo`确保字符串不会保留在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:39:52.663

这是 2.0 ([链接](https://groups.google.com/d/topic/play-framework/WziP0HqjN4Y/discussion)) 中的一个已知问题，但应该在 2.0.1 中修复。

编辑：为清楚起见，“this”指的是 PersistenceException。

# java - 我去哪里购买 Java EE jar？

> ID：10458089
> 
> 赞同：0
> 
> 时间：2012-05-05T01:43:08.663
> 
> 标签：java, jakarta-ee, servlets, jms

我安装了 Java EE Eclipse 并尝试`ServletContextListener`使用，但当我尝试在我的 JDK 中搜索它时发现它不可用。根据 API 文档，它位于`javax.servlet`包下，但我似乎无法在任何地方找到 JAR。

许多 JMS 类也是如此。我猜我只是对 Java EE 开发人员应该去哪里使用 Java EE jar 感到困惑。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:52:18.293

Java EE jars 通常是 Web 容器或 EJB 实现的一部分；例如

*   雄猫，
*   码头，
*   玻璃鱼，
*   老板，
*   网络球，
*   等等。

请注意，其中一些仅支持 Java EE 技术的子集，因此占用空间更小。

另一种选择是在 Oracle 网站（或其他地方）上查看独立实施。例如，Oracle 为“javax.mail”提供了一个独立的 JAR 文件，它是 Java EE 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:24:08.780

对于初学者 Java EE 开发人员，我（以及我之前的许多其他人）建议不要使用 IDE 并手动配置所需的一切（至少一次）。

如果您选择 Tomcat，您正在寻找的是 servlet-api.jar。

简而言之，您将采取的步骤来开发和使用实现 ServletContextListener 的类：

1.  下载 Tomcat（或其他答案中列出的任何其他 servlet 容器）。
2.  在编译类路径中包含 Tomcat 的 servlet-api.jar。
3.  （可选）打包并部署到 tomcat。

# html - 奇怪的 z-index 问题，浮动列表项未显示在标题上方

> ID：10458090
> 
> 赞同：1
> 
> 时间：2012-05-05T01:43:32.453
> 
> 标签：html, css, positioning, z-index

这是我以前从未遇到过的 z-indexes 遇到的一个非常有趣的问题。让我继续回答你可能有的第一个想法：我已经为每个有 z-index 的元素设置了我需要的定位，不是那样的。我尝试尽可能地重新排序，但基本上我有两个固定元素，一个是网站的标题文本，下一个是`div`包含导航项的无序列表（每个都向左浮动并给出百分比宽度）。

[这是问题的位置（确保您以大于 1000 像素的宽度查看）。](http://patrickcason.com/bethanymiller/)

在我的一生中，我一直无法确定为什么前两个导航项（“Home”和“About”）实际上没有完全悬停鼠标。似乎它们的鼠标悬停功能被其上方标题中的下降器切断了。

我会创建一个问题的 jsFiddle，事实上我确实试图指出我的问题，但我为此使用了自定义字体，据我所知，这在 jsFiddle 中不起作用。请记住，问题是跨浏览器的，而不是特定于 IE 的。抱歉，否则我帮不上什么忙，但我猜 Firebug 是你的朋友。

但是，我将发布此 HTML/CSS 代码，因为它可能比在 Firebug 中查看更容易...

HTML：

```
<div id="header">
    <h1 id="logo"><a href="#">Page Title</a></h1>
    <h2 id="tagline"><a href="#">Here's a tagline</a></h2>
    <div id="nav">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Portfolio</a></li>
            <li><a href="#">Resume</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </div>
</div> 
```

CSS：

```
#logo, #tagline { font-weight: normal; font-family: 'Pacifico', cursive; font-size: 60px; display: inline; margin-right: 20px; position: relative; z-index: 4; }
#logo a, #tagline a { color: #FFF; text-shadow: 2px 2px 0px #f7be82; -webkit-text-shadow: 2px 2px 0px #f7be82; -moz-text-shadow: 2px 2px 0px #f7be82; -o-text-shadow: 2px 2px 0px #f7be82; }
#logo a:hover, #tagline a:hover { color: #FFF; }
#tagline { font-size: 18px; }
#tagline a { text-shadow: 1px 1px 0px #f7be82; -webkit-text-shadow: 1px 1px 0px #f7be82; -moz-text-shadow: 1px 1px 0px #f7be82; -o-text-shadow: 1px 1px 0px #f7be82; }

.pageTitle { text-align: center; font-size: 48px; }

#header {
    position: fixed;
    z-index: 3;
    width: 960px;
    background: #9cddc8;
}

#nav {
    position: fixed;
    z-index: 2;
    width: 100%;
    height: 50px;
    top: 81px;
    left: 0px;
    background: #f7be82;
    border-bottom: 2px solid #efb87e;
}

#nav ul { width: 900px; display: block; margin: 0 auto; overflow: hidden; }

#nav ul li {
    position: relative;
    z-index: 5;
    float: left;
    line-height: 50px;
    width: 16.66%;
    line-height: 45px;
    text-align: center;
}

#nav ul li a {
    font-family: 'Pacifico', cursive;
    font-size: 24px;
    color: #FFF;
    text-shadow: 1px 1px 0px #9cddc8; -webkit-text-shadow: 1px 1px 0px #9cddc8; -moz-text-shadow: 1px 1px 0px #9cddc8; -o-text-shadow: 1px 1px 0px #9cddc8;
} 
```

感谢您对这个问题的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:51:49.920

前两项被截断，因为`#logo`a`z-index`为 4 且`#nav`a`z-index`为 2。因此，`#logo`将在 上方`#nav`。

`li`其后代的`#nav`a为 5并不重要，`z-index`因为这些元素位于与 不同的[堆栈上下文](https://developer.mozilla.org/en/CSS/Understanding_z-index/The_stacking_context)中`#logo`。

您需要重新考虑设置背景的方式，因为您需要橙色条**上方**的徽标，但您需要导航元素**下方的徽标。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T01:55:17.720

你不需要`z-index`on `#nav`。将`position: relative`and `z-index: 10`（任意，任何 > 4 的索引都可以）应用于`ul`in `#nav`。

```
#nav {
    position: fixed;
    width: 100%;
    height: 50px;
    top: 81px;
    left: 0px;
    background: #F7BE82;
    border-bottom: 2px solid #EFB87E;
}

#nav ul {
    width: 900px;
    display: block;
    margin: 0 auto;
    overflow: hidden;
    position: relative;
    z-index: 10;
} 
```

这将使您的徽标保持在橙色条纹上方，并将您的菜单项放置在您的徽标“上方”，从而使悬停正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:56:26.730

```
#logo, #tagline { font-weight: normal; font-family: 'Pacifico', cursive; font-size: 60px; display: inline; margin-right: 20px; position: relative; <h1>z-index: 4</h1>; }

....
....
....

#nav {
    position: fixed;
    z-index: 2;
    width: 100%;
    height: 50px;
    top: 81px;
    left: 0px;
    background: #f7be82;
    border-bottom: 2px solid #efb87e;
}

...
...
... 
```

**您将徽标的 z-index 设置为 4，然后导航 1 为 2， taht**表示徽标将位于导航上方，只需将导航的 z-index 更改为 4 并将徽标的 z-index 更改为 2

希望这可以帮助

# python - 如何比较继承与几个类？

> ID：10458093
> 
> 赞同：9
> 
> 时间：2012-05-05T01:43:53.570
> 
> 标签：python

我想检查一个对象是否是类列表/类组中任何类的实例，但我找不到是否有这样做的pythonic方式

```
if isinstance(obj, Class1) or isinstance(obj, Class2) ... or isinstance(obj, ClassN):
    # proceed with some logic 
```

我的意思是，逐类比较。

如果它甚至存在的话，它更有可能使用一些类似于`isinstance`将接收 n 个类进行比较的函数。

在此先感谢您的帮助！！:)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-05T01:45:42.913

您可以将一个类元组作为第二个参数传递给 isinstance。

```
>>> isinstance(u'hello', (basestring, str, unicode))
True 
```

查找文档字符串也会告诉您这一点；）

```
>>> help(isinstance)
Help on built-in function isinstance in module __builtin__:

isinstance(...)
    isinstance(object, class-or-type-or-tuple) -> bool

    Return whether an object is an instance of a class or of a subclass thereof.
    With a type as second argument, return whether that is the object's type.
    The form using a tuple, isinstance(x, (A, B, ...)), is a shortcut for
    isinstance(x, A) or isinstance(x, B) or ... (etc.). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T01:47:16.940

`isinstance(obj, (Class1, Class2, ..., ClassN))`，或者`isinstance(obj, BaseClass)`如果他们有共同的祖先。

也就是说，在使用它之前你应该三思而后行。像这样的显式类型检查会损害代码的通用性，所以你最好有理由放弃鸭子打字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T01:55:44.657

另一种方法，虽然没有子类检查：

```
>>> obj = Class2()
>>> type(obj) in (Class1, Class2, Class3)
True 
```

*笔记。可能这只是为了考虑，而不是为了实际使用。*

# mysql - InnoDB 瓶颈：放宽 ACID 以提高性能

> ID：10458095
> 
> 赞同：13
> 
> 时间：2012-05-05T01:44:13.570
> 
> 标签：mysql, innodb, myisam, database-performance

在注意到我们的数据库已成为我们实时生产系统的主要瓶颈后，我决定构建一个简单的基准来查明问题的根源。

基准：我计算了将 InnoDB 表中的同一行增加 3000 次所需的时间，其中该行由其主键索引，并且正在更新的列不属于任何索引。我使用远程机器上运行的 20 个并发客户端执行这 3000 次更新，每个客户端都有自己独立的数据库连接。

我有兴趣了解为什么我进行基准测试的不同存储引擎 InnoDB、MyISAM 和 MEMORY 具有它们所做的配置文件。我也希望了解为什么 InnoDB 相比之下表现如此糟糕。

InnoDB（20 个并发客户端）：每次更新耗时 0.175s。所有更新均在 6.68 秒后完成。

MyISAM（20 个并发客户端）：每次更新需要 0.003 秒。所有更新都在 0.85 秒后完成。

内存（20 个并发客户端）：每次更新耗时 0.0019 秒。所有更新都在 0.80 秒后完成。

考虑到并发性可能会导致这种行为，我还对单个客户端执行 100 次顺序更新进行了基准测试。

InnoDB：每次更新需要 0.0026 秒。

MyISAM：每次更新需要 0.0006 秒。

内存：每次更新需要 0.0005 秒。

实际机器是一个 Amazon RDS 实例 ( [http://aws.amazon.com/rds/](http://aws.amazon.com/rds/) )，大部分是默认配置。

我猜答案将如下所示：每次更新后的 InnoDB fsyncs（因为每次更新都是符合 ACID 的事务），而 MyISAM 不支持，因为它甚至不支持事务。MyISAM 可能在内存中执行所有更新，并定期刷新到磁盘，这就是它的速度接近 MEMORY 存储引擎的方式。如果是这样，有没有办法使用 InnoDB 来支持它的事务，但也许可以放松一些约束（通过配置），以便以一些持久性为代价更快地完成写入？

另外，随着客户数量的增加，关于如何提高 InnoDB 性能的任何建议？它的扩展性显然比其他存储引擎差。

**更新**

我找到了[https://blogs.oracle.com/MySQL/entry/comparing_innodb_to_myisam_performance](https://blogs.oracle.com/MySQL/entry/comparing_innodb_to_myisam_performance)，这正是我想要的。设置 innodb-flush-log-at-trx-commit=2 允许我们在发生电源故障或服务器崩溃的情况下放松 ACID 约束（每秒刷新一次磁盘）。这为我们提供了与 MyISAM 类似的行为，但我们仍然可以从 InnoDB 中可用的事务功能中受益。

运行相同的基准测试，我们看到写入性能提高了 10 倍。

InnoDB（20 个并发客户端）：每次更新耗时 0.017 秒。所有更新都在 0.98 秒后完成。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T21:21:05.170

我找到了[https://blogs.oracle.com/MySQL/entry/comparing_innodb_to_myisam_performance](https://blogs.oracle.com/MySQL/entry/comparing_innodb_to_myisam_performance)，这正是我想要的。设置 innodb-flush-log-at-trx-commit=2 允许我们在发生电源故障或服务器崩溃的情况下放松 ACID 约束（每秒刷新一次磁盘）。这为我们提供了与 MyISAM 类似的行为，但我们仍然可以从 InnoDB 中可用的事务功能中受益。

运行相同的基准测试，我们看到写入性能提高了 10 倍。

InnoDB（20 个并发客户端）：每次更新耗时 0.017 秒。所有更新都在 0.98 秒后完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T02:01:36.607

我们在我们的应用程序中进行了一些类似的测试，我们注意到如果没有显式打开事务，则每条 SQL 指令都会在事务中处理，这需要更多时间来执行。如果您的业务逻辑允许，您可以将多个 SQL 命令放在一个事务块中，从而减少总体 ACID 开销。在我们的案例中，我们通过这种方法获得了很大的性能提升。

# javascript - 使用 javascript 在 php 页面中确认选择

> ID：10458097
> 
> 赞同：0
> 
> 时间：2012-05-05T01:44:22.873
> 
> 标签：javascript, jquery, ajax

我正在尝试确认删除某些内容，但似乎无法使其正常工作。

当“deleteReply”按钮时，我收到一条警报消息，但据我所知，没有其他任何事情发生。我试图简单地回显发布的变量，但它似乎不起作用。

```
<input type="button" id="deleteSomething" value="Delete" />
<script type="text/javascript">
$(document).ready(function(){
   $('#deleteSomething').click(function() {
      if (!confirm("Are you sure?"))
        return false;
    $.post('deleteProcessing.php', "replyID=" + replyID, function(response) {
        alert(response); 
    });
  });
});
</script> 
```

在我的删除处理页面上，我只有

```
$echo $_POST['replyID']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:58:54.670

```
<input type="button" id="deleteSomething" value="Delete" />
<div id="yesno" style="display:none;">
  <input type="button" id="buttonYes" value="Yes" />
  <input type="button" id="buttonNo" value="No" />
</div>
<script type="text/javascript">
// Here you attach a click event to the button Yes with id buttonYes
$('#deleteSomething').click(function() {
  $('#yesno').css('display', 'block');
});
$('#buttonNo').click(function() {
  $('#yesno').css('display', 'none');
});
$('#buttonYes').click(function() {
  $.ajax({
    beforeSend: function(e) {
      // Code to process before calling AJAX
    },
    url: "pathToPHPFile.php",
    dataType: "json",
    type: "POST",
    data: {
      parameter: 'Yes',
    },
    success: function (m) {
        console.log(m);
        alert(m.text);
    },
    error: function (e) {
      console.log("Something went wrong ...: "+e.message);
    },
  }); /* end ajax*/
  e.preventDefault();
});
</script>

<?php
// This is a separate php file named pathToPHPFile.php
if(isset($_POST['parameter']) && $_POST['parameter'] == 'Yes'){
  /* here you put the code that deletes the message */
  $response['text'] = 'messageDeleted'
  echo json_encode($response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:31:25.750

为什么你有

```
if(isset($_POST['deleteReply'])){
?> 
```

在javascript函数之前？您是否期望触发基于`$_POST['deleteReply']`var 的 javascript 代码？

您必须记住，php 在服务器端处理并输出 HTML 页面。只有在所有 php 运行后，您的 javascript 代码才会在客户端中运行。

一个更优雅的解决方案是在发送 AJAX 请求之前要求确认。

而且，您的 ajax 调用似乎没有达到您的预期。您正在手动设置 2 个参数以发送到您的 PHP，如果您在服务器端进行确认，这些参数将毫无用处。

参数应该类似于`Reply ID`您要删除的回复，并将请求发送到不同的 php 文件进行处理。

我建议您像 Marian Zburlea 为您所做的那样重写您的代码。

**编辑**

好的，如果你想要一个简单的确认窗口，试试这个：

```
<input type="button" id="deleteSomething" value="Delete" />

<script type="text/javascript">

$(document).ready(function(){
    $('#deleteSomething').click(function() {
        if (!confirm("Are you sure?"))
            return false;

        $.post('delete.php', "replyID=" + replyID, function(response) {
            alert(response); 
        });
    });
});
</script> 
```

**编辑**

如果您有多个删除按钮，最好的方法是将 存储`replyID`为传递给您的函数的参数。在您的 php 中回显您的删除按钮，如下所示：

```
echo '<input type="button" value="Delete" onclick="deleteSomething(\'' . $replyID . '\')" />'; 
```

这样，`$replyID`将存储在页面的 HTML 中，该 HTML 将传递给`deleteSomething(replyID)`您现在必须定义的函数（最好在`head`JQuery 库之后的文档中）：

```
<script type="text/javascript">

function deleteSomething(replyID)
{
    if (!confirm("Are you sure?"))
        return false;
    $.post('deleteProcessing.php', "replyID=" + replyID, function(response) {
        alert(response); 
    });
}
</script> 
```

请注意，我`ID`从按钮中删除了不生成重复 ID 并且不再需要它们，因为我在`onclick`事件中添加了一个函数调用，而不是像以前那样将匿名函数绑定到它们的 ID。

# algorithm - 分层多部分键值存储

> ID：10458098
> 
> 赞同：0
> 
> 时间：2012-05-05T01:44:26.927
> 
> 标签：algorithm, data-structures, tree, b-tree

我正在尝试设计一个配置/设置管理系统，我正在考虑将其存储在键值存储中。

我有一个多部分键 - OrganizationId + TenantId + UserId + ApplicationId 而 value 是一个序列化的配置/设置对象。密钥的多个部分是分层的 - 即用户 ID 属于属于组织 ID 的租户 ID

业务要求是我必须返回用户级别（用户 ID）配置/设置对象（如果存在），否则返回租户级别（租户 ID）或返回组织级别（组织 ID）对象。组织级对象将始终存在。

我计划将组织级别对象存储为 -(OrgId - a, TenantId - 0, UserId - 0, AppId - 0) 同样，租户级别对象将存储为 - (OrgId - a, TenantId - b, UserId - 0, AppId - 0) 等等...

当我收到返回某个配置/设置对象的查询时，我得到 - OrgId(a)、TenantId(b)、UserId(c) 和 AppId(d) 作为输入。我的工作是查询键值存储以在适当的级别返回对象

我可以通过在最坏的情况下对键值存储进行 4 次调用来实现这一点 -

1.  A B C D
2.  a, b, c, 0
3.  a, b, 0, 0
4.  一, 0, 0, 0

有什么方法可以在一次通话中实现这一目标吗？我可以维护任何其他数据结构来实现这一点？我可以用什么算法来解决这个问题？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:10:29.000

这是您的两个示例设置

```
(a,0,0,0) => 1
(a,b,0,0) => 2 
```

现在假设我按字典顺序浏览所有可能的组合，看看我得到了什么

```
(a,0,0,0) => 1
(a,0,0,a) => 1
....
(a,b,0,0) => 2
(a,b,0,a) => 2
...
(a,c,0,0) => 1 
```

我只存储事情发生变化的点

```
(a,0,0,0) => 1
(a,b,0,0) => 2
(a,c,0,0) => 1 
```

我没有将原始数据扩展超过两倍，我可以通过使用返回最大位置 <= 查询位置的单个查询来计算任何位置的设置。

# php - 如何使用 RegExp 制作 PHP BB 代码？

> ID：10458103
> 
> 赞同：-2
> 
> 时间：2012-05-05T01:45:10.083
> 
> 标签：php, regex, parsing, bbcode

对于我的网站，我想要一个简单的 BB 代码系统。没什么特别的——只是超链接和图像现在就可以了。

我不擅长正则表达式。时期。但是如果有人可以给我看一个例子，我可能会抓住它来克隆它到不同的标签中。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T02:00:10.683

我不得不想象这在某个地方免费存在，但这就是我的做法。

```
// Patterns
$pat = array();
$pat[] = '/\[url\](.*?)\[\/url\]/';         // URL Type 1
$pat[] = '/\[url=(.*?)\](.*?)\[\/url\]/';   // URL Type 2
$pat[] = '/\[img\](.*?)\[\/img\]/';         // Image
// ... more search patterns here

// Replacements
$rep = array();
$rep[] = '<a href="$1">$1</a>';             // URL Type 1
$rep[] = '<a href="$1">$2</a>';             // URL Type 2
$rep[] = '<img src="$1" />';                // Image
// ... and the corresponding replacement patterns here

// Run tests
foreach($DIRTY as $dirty)
{
    $clean = preg_replace($pat, $rep, $dirty);

    printf("D: %s\n", $dirty);
    printf("C: %s\n", $clean);
    printf("\n");
} 
```

**输出：**

```
D: Before [url]http://www.stackoverflow.com[/url] after
C: Before <a href="http://www.stackoverflow.com">http://www.stackoverflow.com</a> after

D: Before [url]http://www.stackoverflow.com[/url] [url]http://www.google.com[/url] after
C: Before <a href="http://www.stackoverflow.com">http://www.stackoverflow.com</a> <a href="http://www.google.com">http://www.google.com</a> after

D: Before [url=http://www.stackoverflow.com]StackOverflow[/url]
C: Before <a href="http://www.stackoverflow.com">StackOverflow</a>

D: Before [img]https://www.google.com/logos/2012/haring-12-hp.png[/img] after
C: Before <img src="https://www.google.com/logos/2012/haring-12-hp.png" /> after 
```

对于您添加的每个`$pat`模式元素，您需要添加一个`$rep`元素。该`$DIRTY`数组只是测试用例的列表，可以是您认为足够的任何长度。

这里的重要部分以及您将使用的部分是`$pat`and`$rep`数组和`preg_replace()`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T01:55:25.437

用户要求一些简单的东西，所以我给了他一些简单的东西。

```
$input = "[link=http://www.google.com]test[/link]";
$replacement = preg_replace('/\[link=(.*?)\](.*?)\[\/link\]/', '<a href="$1">$2</a>', $input); 
```

`/\[link=(.*?)\](.*?)\[\/link\]/`正则表达式在哪里，`<a href="$1">$2</a>`是格式，`$input`是输入/数据，`$replacement`是返回。

# ruby - 动态命名实例变量 Ruby

> ID：10458104
> 
> 赞同：-1
> 
> 时间：2012-05-05T01:45:15.790
> 
> 标签：ruby, variables, dynamic, naming

我想要做的是动态命名变量，例如：

```
def instance(instance)
    @instance = instance #@instance isn't actually a variable called @instance, rather a variable called @whatever was passed as an argument
end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T02:11:52.703

使用`instance_variable_set`.

```
varname = '@foo'
value = 'bar'
self.instance_variable_set varname, value
@foo   # => "bar" 
```

或者，如果您不希望调用者必须提供“@”：

```
varname = 'foo'
value = 'bar'
self.instance_variable_set "@#{varname}", value
@foo   # => "bar" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T02:10:09.393

如果我理解正确，您想使用“instance_variable_set”：

```
class A
end

a = A.new
a.instance_variable_set("@whatever", "foo")

a.instance_variable_get("@whatever") #=> "foo" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:48:51.867

你真的不能。

您可以玩弄`eval`，但实际上，它不可读。

使用正确的`if`或使用散列代替。

```
# With Hash:
values = {}
a = :foo
values[a] = "bar"
values[:foo] # => "bar"

# With if
calc = "bar"
if a_is_foo
  foo = calc
else
  oof = calc
end
foo # => "bar" 
```

# java - 启动 Apache Tomcat 7 时指定 JRE/JDK

> ID：10458109
> 
> 赞同：7
> 
> 时间：2012-05-05T01:46:39.630
> 
> 标签：java, jsp, tomcat, web-applications, servlets

有没有办法告诉 Tomcat 7 必须使用的 JVM 路径？例如：

```
startup --jvm /path/to/my/jvm 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-05T08:35:24.783

一种更灵活的方法是在其中创建一个名为`setenv.bat`/的文件`setenv.sh`（为您的平台选择正确的文件）`$CATALINA_BASE/bin`并在`JAVA_HOME`那里设置。这样它只会影响 Tomcat，而不影响您正在运行的任何其他东西。它还可以轻松地在不同的 JVM 上运行多个不同的 Tomcat 安装。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T01:51:42.943

1.  将`JAVA_HOME`变量添加到`.bash_profile`

2.  添加`path`/`classpath`条目

3.  导出它们

例如

```
JAVA_HOME=/usr/local/java
PATH=$PATH:$JAVA_HOME/bin
CLASSPATH=$CLASSPATH:$JAVA_HOME/lib

export JAVA_HOME PATH CLASSPATH 
```

# javascript - HTML 5 视频在 Ipad 上不起作用，并且 ipad 布局的侧面有黑色部分

> ID：10458112
> 
> 赞同：0
> 
> 时间：2012-05-05T01:47:20.940
> 
> 标签：javascript, css, ipad, html, html5-video

我被困在一个 HTML 5 项目上，该项目的视频在 Chrome 和 Safari PC 浏览器上运行，但在 iPad 上却不行。要求是仅在纵向模式下进行此工作，并且当点击/单击视频时，将播放视频。

```
<!doctype html>
<!--[if lt IE e 7]>    <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en">  <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang="en">         <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en">                <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en">                       <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>Page 1</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=768px, minimum-scale=1.0, maximum-scale=1.0"   />
        <style>
            #container{
                width:768px;
                margin:150px auto;
                position: relative;
            }
            #container video {
                position:relative;    
                z-index:0;
            }
            .overlay {
                position:absolute;
                top:170px;
                left:380px;
                z-index:1;
            }
        </style>

        <script>
            function play(){
                var video = document.getElementById('video');
                video.addEventListener('click',function(){
                    video.play();
                },false);
            }
    </script>

        <script>
            $(document).ready(function () {
                function reorient(e) {
                    var portrait = (window.orientation % 180 == 0);
                    $("body > div").css("-webkit-transform", !portrait ? "rotate(-90deg)" :       "");
                }
                window.onorientationchange = reorient;
                window.setTimeout(reorient, 0);
            });
        </script>
    </head>
    <body>
        <div id="container">
            <video id="video" width="770" height="882" onclick="play();">
                <source src="video/Motionv4-1.m4v" />
            </video>
            <div class="overlay">
                <div style="color:#356AFA; text-align:center; font-weight:bold; font-size:45px; line-height:60px; font-family:arial">
                    Tap the <br /> DoughBoy<br />to Join<br /> JavaWorld<br /> Wi-Fi!
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T08:04:59.350

好吧，iPad 有一个错误，它只查看提供的第一个 mime 时间，因此您需要先添加 .mp4 文件，然后它才会起作用。

更多信息在这里。[http://diveintohtml5.info/video.html](http://diveintohtml5.info/video.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:54:47.767

在从事此类项目时，我遇到了同样的问题。

我曾使用 jwplayer 来解决此问题。

[http://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)

# mysql - mysql count() 每列的行条目大于 0

> ID：10458114
> 
> 赞同：0
> 
> 时间：2012-05-05T01:47:32.080
> 
> 标签：mysql

我正在尝试运行总评级查询，其中一部分需要 **$sel = mysql_query("SELECT SUM(col1, col2, col3, col4, col5, col6, col7, col8)/XXXX as total FROM rating WHERE shop_id = $shop_id ");**

XXXX 在哪里，我需要计算每列高于 0 的行条目数，然后将 TOTAL 除以 # 以获得总评分。

数学是：总/大于 0 的值的数量

谢谢

我正在尝试计算 0 以上的条目数，这意味着 shop_id 为 1 的共有 35 个。35 除以 0 以上的条目数，即 5 以获得总结果，而不将 0 行/列作为投票.

这是我想要的与表中数据相关的输出。shop_id 1 -> 35/7 = 5 shop_id 2 -> 42/ = 3 shop_id 3 -> 40/8 = 5

![在此处输入图像描述](../Images/0c3ea5875df047703761b5869ab5292c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:00:02.473

```
SELECT 
SUM(col1, col2, col3, col4, col5, col6, col7, col8)/
SUM(IF(col1 > 0, 1, 0), IF(col2 > 0, 1, 0), ... ) AS total 
FROM ratings 
WHERE shop_id = $shop_id") 
```

为您正在测试的每一列替换`...`相同的逻辑。由于您有条件地输出零或一，因此总和基本上与计数具有相同的目的。

不要引用我的语法 - 但这应该为您指明正确的方向。

# python - 如何使用 Apache 2.2 和 Python 3.2 为 Windows 编译 mod_wsgi？

> ID：10458115
> 
> 赞同：2
> 
> 时间：2012-05-05T01:47:32.450
> 
> 标签：python, apache, mod-wsgi

[我从https://code.google.com/p/modwsgi/source/checkout](https://code.google.com/p/modwsgi/source/checkout)下载了最新的 mod_wsgi 源，但我无法在 Windows 中使用 Apache 2.2 和 Python 3.2 编译它。有一些未定义的变量，因为`MOD_WSGI_WITH_DAEMONS`是未定义的；`MOD_WSGI_WITH_DAEMONS`未定义，因为`APR_HAS_FORK`为 0。

在“mod_wsgi.c”中：

```
#if APR_HAS_OTHER_CHILD && APR_HAS_THREADS && APR_HAS_FORK
#define MOD_WSGI_WITH_DAEMONS 1
#endif
...
#if defined(MOD_WSGI_WITH_DAEMONS)
...
static WSGIDaemonProcess *wsgi_daemon_process = NULL;
...
#endif 
```

在“apr.h”中：

```
#define APR_HAS_FORK              0 
```

我有没有机会用 Apache 2.2 & Python 3.2 for Windows 编译 mod_wsgi？如果是这样，怎么做？

**更新：**

在默认分支中，在“wsgi_apache.h”中：

```
#if (APR_MAJOR_VERSION == 0) && \
    (APR_MINOR_VERSION == 9) && \
    (APR_PATCH_VERSION < 5)
extern apr_status_t wsgi_apr_unix_file_cleanup(void *);
extern apr_status_t wsgi_apr_os_pipe_put_ex(apr_file_t **, apr_os_file_t *,
                                            int, apr_pool_t *);
#define apr_unix_file_cleanup wsgi_apr_unix_file_cleanup
#define apr_os_pipe_put_ex wsgi_apr_os_pipe_put_ex
#endif 
```

但在“apr_version.h”中：

```
#define APR_MAJOR_VERSION       1
...
#define APR_MINOR_VERSION       4
...
#define APR_PATCH_VERSION       5 
```

所以`apr_unix_file_cleanup`不会被定义。

我在 Windows 7 (x64) 中使用 Apache 2.2.22 和 Python 3.2.3。

最新的 mod_wsgi-3.X 可以编译成 “.so” 文件，但是得到这个错误：

```
mod_wsgi.so.manifest : general error c1010070: Failed to load and parse the manifest. The system cannot find the file specified. 
```

我很担心这个。我不知道这是否是一个真正的问题。

而且，我无法加载 mod_wsgi 模块。Apache的错误日志说：

```
Fatal Python error: Py_Initialize: can't initialize sys standard streams
LookupError: unknown encoding: cp0
[Sat May 05 18:35:43 2012] [crit] (OS 1813)The specified resource type cannot be found in the image file.  : master_main: create child process failed. Exiting. 
```

我发现了这个：[http](http://bugs.python.org/review/6501/diff/2518/6050) ://bugs.python.org/review/6501/diff/2518/6050 。这可能会导致问题。我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:51:48.803

使用最新的源代码重试。您可能还想暂时使用 3.X 分支而不是默认分支。

# c# - 在运行程序中等待一秒钟

> ID：10458118
> 
> 赞同：139
> 
> 时间：2012-05-05T01:47:58.213
> 
> 标签：c#, wait

```
dataGridView1.Rows[x1].Cells[y1].Style.BackColor = System.Drawing.Color.Red;
System.Threading.Thread.Sleep(1000); 
```

我想在使用此代码打印我的网格单元之前等待一秒钟，但它不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-05-05T01:52:17.253

是否暂停，但您没有看到单元格中出现红色？试试这个：

```
dataGridView1.Rows[x1].Cells[y1].Style.BackColor = System.Drawing.Color.Red;
dataGridView1.Refresh();
System.Threading.Thread.Sleep(1000); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-12-27T10:30:09.127

我个人认为这`Thread.Sleep`是一个糟糕的实现。它锁定 UI 等。我个人喜欢计时器实现，因为它等待然后触发。

用法： `DelayFactory.DelayAction(500, new Action(() => { this.RunAction(); }));`

```
//Note Forms.Timer and Timer() have similar implementations. 

public static void DelayAction(int millisecond, Action action)
{
    var timer = new DispatcherTimer();
    timer.Tick += delegate

    {
        action.Invoke();
        timer.Stop();
    };

    timer.Interval = TimeSpan.FromMilliseconds(millisecond);
    timer.Start();
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-10-20T13:39:54.030

使用计时器的等待功能，没有 UI 锁定。

```
public void wait(int milliseconds)
{
    var timer1 = new System.Windows.Forms.Timer();
    if (milliseconds == 0 || milliseconds < 0) return;

    // Console.WriteLine("start wait timer");
    timer1.Interval = milliseconds;
    timer1.Enabled  = true;
    timer1.Start();

    timer1.Tick += (s, e) =>
    {
        timer1.Enabled = false;
        timer1.Stop();
        // Console.WriteLine("stop wait timer");
    };

    while (timer1.Enabled)
    {
        Application.DoEvents();
    }
} 
```

用法：只需将其放在需要等待的代码中：

```
wait(1000); //wait one second 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-11-21T17:23:05.550

.Net Core 似乎缺少`DispatcherTimer`.

如果我们可以使用异步方法，`Task.Delay`将满足我们的需求。如果您出于速率限制的原因想要在 for 循环内等待，这也很有用。

```
public async Task DoTasks(List<Items> items)
{
    foreach (var item in items)
    {
        await Task.Delay(2 * 1000);
        DoWork(item);
    }
} 
```

您可以等待此方法完成，如下所示：

```
public async void TaskCaller(List<Item> items)
{
    await DoTasks(items);
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-08-23T13:55:20.143

在不冻结主线程的情况下等待的最佳方法是使用[Task.Delay](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.delay?view=netcore-3.1#System_Threading_Tasks_Task_Delay_System_Int32_)函数。

所以你的代码看起来像这样

```
var t = Task.Run(async delegate
{              
    dataGridView1.Rows[x1].Cells[y1].Style.BackColor = System.Drawing.Color.Red;
    dataGridView1.Refresh();
    await Task.Delay(1000);             
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-15T21:09:20.890

我觉得这里的所有错误都是顺序，Selçuklu 希望应用程序在填充网格之前等待一秒钟，所以睡眠命令应该在填充命令之前。

```
 System.Threading.Thread.Sleep(1000);
    dataGridView1.Rows[x1].Cells[y1].Style.BackColor = System.Drawing.Color.Red; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-29T13:46:36.507

如果时间很短，繁忙的等待不会是一个严重的缺点。在我的例子中，需要通过闪烁控件向用户提供视觉反馈（它是一个可以复制到剪贴板的图表控件，它会在几毫秒内改变其背景）。它以这种方式工作正常：

```
using System.Threading;
...
Clipboard.SetImage(bm);   // some code
distribution_chart.BackColor = Color.Gray;
Application.DoEvents();   // ensure repaint, may be not needed
Thread.Sleep(50);
distribution_chart.BackColor = Color.OldLace;
.... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-14T22:50:09.010

使用`dataGridView1.Refresh();`:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-03T23:30:51.527

试试这个功能

```
public void Wait(int time) 
{           
    Thread thread = new Thread(delegate()
    {   
        System.Threading.Thread.Sleep(time);
    });
    thread.Start();
    while (thread.IsAlive)
    Application.DoEvents();
} 
```

调用函数

```
Wait(1000); // Wait for 1000ms = 1s 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-14T10:14:26.080

这个解决方案很短，据我所知，很简单。

```
public void safeWait(int milliseconds)
{
    long tickStop = Environment.TickCount + milliseconds;
    while (Environment.TickCount < tickStop)
    {
        Application.DoEvents();
    }
} 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2014-11-13T20:51:42.093

也许试试这个代码：

```
void wait (double x) {
    DateTime t = DateTime.Now;
    DateTime tf = DateTime.Now.AddSeconds(x);

    while (t < tf) {
        t = DateTime.Now;
    }
} 
```

# jquery - 改变 HTML5 的视角 标签

> ID：10458120
> 
> 赞同：2
> 
> 时间：2012-05-05T01:48:43.883
> 
> 标签：jquery, flash, html, css, canvas

我一直在尝试对此进行研究，但运气不佳。我似乎记得看到过有关执行此操作或类似内容的教程。

![在此处输入图像描述](../Images/567358b80e579cb6bb9cb998cc13c92f.png)

有谁知道如何改变 html5video 或 flash 的视角？使用 jQuery、css3、画布、flash？任何事物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:02:21.020

```
<style>
#masterContainer {
  perspective: 600px;
}

#masterContainer .video {
  transform: rotateY( 45deg );
}
</style>
<section class="container" id="masterContainer">
  <div class="video"></div>
</section> 
```

# android - 每次运行后如何清除数据库上的数据？

> ID：10458124
> 
> 赞同：2
> 
> 时间：2012-05-05T01:48:59.823
> 
> 标签：android, database, sqlite

如何在每次运行后清除数据库上的所有数据，或者换句话说，每当我运行我的应用程序时启动一个新数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:35:13.270

请看这段代码，最后部分是清除数据库。同样，您需要实现您的逻辑。

```
package com.collabera.labs.sai.db;

import java.util.ArrayList;

import android.app.ListActivity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

public class CRUDonDB extends ListActivity {

    private final String SAMPLE_DB_NAME = "myFriendsDb";
    private final String SAMPLE_TABLE_NAME = "friends";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<String> results = new ArrayList<String>();
        SQLiteDatabase sampleDB = null;

        try {
            sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

            sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    SAMPLE_TABLE_NAME +
                    " (LastName VARCHAR, FirstName VARCHAR," +
                    " Country VARCHAR, Age INT(3));");

            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Makam','Sai Geetha','India',25);");
            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Chittur','Raman','India',25);");
            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Solutions','Collabera','India',20);");

            Cursor c = sampleDB.rawQuery("SELECT FirstName, Age FROM " +
                    SAMPLE_TABLE_NAME +
                    " where Age > 10 LIMIT 5", null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String firstName = c.getString(c.getColumnIndex("FirstName"));
                        int age = c.getInt(c.getColumnIndex("Age"));
                        results.add("" + firstName + ",Age: " + age);
                    }while (c.moveToNext());
                } 
            }

            this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));

        } catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "Could not create or Open the database");
        } finally {
            if (sampleDB != null) 
                sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
                sampleDB.close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:37:48.177

只需在每次运行时从表中删除所有行，并在需要时插入新的 dataq。

按照以下方法从表中删除所有数据。

```
void deleteAllData()
{
    SQLiteDatabase sdb= this.getWritableDatabase();
    sdb.delete(tablename, null, null);

} 
```

# mysql - 使用 MAMP 检索 phpmyadmin 的 mySQL 密码/用户名

> ID：10458129
> 
> 赞同：4
> 
> 时间：2012-05-05T01:50:19.633
> 
> 标签：mysql, phpmyadmin, passwords, mamp

我已经建立了一个 mySQL 数据库，我想使用 phpmyadmin 访问该数据库。但是，当我尝试访问此数据库时，系统会提示我输入用户名和密码。首先，这是什么用户名和密码？它是我用 mySQL 创建的吗？如果是这样，我如何找到该用户名和密码。我正在使用 MAMP。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T01:54:05.410

用户名和密码：root

请参阅此链接更改密码： http: [//www.mamp.info/en/documentation/faq.html#q9](http://www.mamp.info/en/documentation/faq.html#q9)

# javascript - 简短的 ASP.NET 日期程序

> ID：10458132
> 
> 赞同：0
> 
> 时间：2012-05-05T01:51:41.910
> 
> 标签：javascript, asp.net, server-side

我不断收到运行时错误，但我的学校服务器不喜欢打印错误。我直接从书中复制了这个，我已经检查了很多次——它看起来对我来说是正确的。我在这里错过了什么吗？它只是告诉我`runtime error`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>A Simple ASP.NET Example</title>
    <style type="text/css">
        td{background-color:black;color:yellow;}
        strong{font-family:arial, sans-serif;}
        p{font-size:14pt}
    </style>
    <script runat="server" langauge="JScript">
        var dayAndTime : DateTime = DateTime.Now;
    </script>
</head>
<body>
    <strong>A Simple ASP.NET Example</strong>
    <p>
        <table border="6">
            <tr>
                <td>
                    <% Response.Write(dayAndTime.ToShortTimeString()); %>
                </td>
                <td>
                    <% Response.Write(dayAndTime.ToShortDateString()); %>
                </td>
            </tr>
        </table>
    </p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:56:31.380

由于您无法准确确定导致错误的原因并且您只有 3 行 .net，因此请尝试一次取出一行，直到程序运行。这将告诉您至少是哪条线路导致了问题。从`response.write`:p开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:10:40.833

你拼错了语言。由于它在 html 标记中，它没有纠正你，只是认为它是 VB 或 C#。

```
 <script runat="server" language="JScript">
         var dayAndTime : DateTime = DateTime.Now;
    </script>
</head>
<body>
    <strong>A Simple ASP.NET Example</strong>
    <p>
        <table border="6">
            <tr>
                <td>
                    <% Response.Write(dayAndTime.ToShortTimeString()); %>
                </td>
                <td>
                    <% Response.Write(dayAndTime.ToShortDateString());%>
                </td>
            </tr>
    </table> 
```

# c# - 为什么一个带有受保护修饰符的函数可以在任何地方被覆盖和访问？

> ID：10458142
> 
> 赞同：10
> 
> 时间：2012-05-05T01:53:29.930
> 
> 标签：c#, oop, d, access-modifiers

我是 C# 程序员，不熟悉 D 语言。我对 D 编程语言中的 OOP 有点困惑。

假设我有以下课程：

```
public class A {
   protected void foo() {
      writefln("A.foo() called.");
   }
};

public class B : A {
   public override void foo() {
      writefln("B.foo() called.");
   }
}; 
```

`protected`修饰符意味着我可以访问继承类上的方法`.foo()`，为什么这个**D**程序编译正常？

这是**C#.NET**的等价物：

```
using System;

public class A {
   protected virtual void foo() {
      Console.WriteLine("a.foo() called.");
   }
};

public class B : A {
   public override void foo() {
      Console.WriteLine("b.foo() called.");
   }
};

public class MainClass  {
   public static void Main(string[] args) {
      A a = new A();
      B b = new B();    
      a.foo();
      b.foo();
   }
}; 
```

它不编译并给出以下错误消息（如我所料）：

> test.cs(10,30): 错误 CS0507: `B.foo()': cannot change access modifiers when overriding`protected' 继承的成员 `A.foo()'

有人可以解释这种 D 行为吗？提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T01:57:46.810

阻止覆盖没有任何目的。派生类可以实现一个允许访问的简单转发功能。考虑：

```
public class A {
    protected void foo() {
        writefln("A.foo() called.");
    }
};

public class B : A {
   protected override void foo() { // OK
       writefln("B.foo() called.");
   }
   public void call_foo() {
       foo(); // But I allowed public access anyway!
   }
}; 
```

因此，即使我没有重新定义 的访问级别`foo`，我仍然允许公共访问它*，您对此无能为力*。允许重新定义更简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-22T11:41:51.617

因为对于“为什么可能？”这个问题有一些很好的答案。我认为 C# 值得解释为什么它不可能：它是关于语言设计的“哲学”，可以归结为“is-a”与“has-a”的思想冲突。

C++ 完全是关于“有”的思想，其中一些被传递给了 D 和 Java。B**有**方法`foo`，这对编译器和程序员来说都是最重要的——而不是 B 是什么。在 C++ 中，甚至可以将方法重新声明为私有（或将类继承为私有），这意味着 A 的成员不会被 B 公开。

C# 是关于“is-a”概念的核心。因此，因为这里的 B 实际上**是**A，所以 B 中的所有内容都必须与 A 中的一样。编译器和程序员都不必担心更改，因为不可能更改。B 始终是 A 的完美替代品。

“is-a”哲学禁止 C# 程序公开以前受保护的成员，即使通过公共包装器来做这件事是微不足道的。这没有什么意义，在这里只是一个小小的不便 - 但在保持语言哲学的一致性方面很重要。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-05T02:36:56.107

D 在这方面的行为与 Java 的行为相匹配。派生类可以为其函数赋予一个访问级别，该访问级别比基类中函数的访问级别限制更少，但限制级别更高。所以，一个`protected`函数可以被重写为`protected`or `public`，但它不能被重写为`private`，并且一个`public`函数只能被重写为`public`。

我不知道为什么 C# 会限制`protected`你不能用`public`函数覆盖它。作为一个使用 C++、D 和 Java 编写大量程序但很少使用 C# 的人，C# 的选择对我来说意义不大。C++、D 和 Java 都允许它。

# asp.net - 我应该如何创建与数据库相关的类？

> ID：10458145
> 
> 赞同：0
> 
> 时间：2012-05-05T01:54:19.230
> 
> 标签：asp.net, .net, entity-framework, orm, linq-to-entities

我想标题不是很清楚，但我想做的是：

我使用 .net 框架 3.5 和一个 asp.net 网络应用程序。

我的数据库中有 2 个表：

tb_provider():
provider_id
provider_name

tb_demand:
demand_id(pk)
demanda_name
cod_provider(fk)

它是一对多的关系。

1 个提供者可能有很多需求
1 个需求只与一个提供者相关。

所以我创建了这些类：

```
 public class ProviderVO
{
    public int Id_Provider{ get; set; }
    public string Name_Provider { get; set; }
    public List<DemandVO> List_Demand{ get; set; }
}

public class DemandVO
{
    public int Id_Demand{ get; set; }
    public string Name_Demand{ get; set; }
    public ProviderVO objProvider{ get; set; }
} 
```

我在提供者类中放置了一个需求列表，这样我就可以获得与该提供者相关的所有需求。

需求类也是如此。我试图将需求与其提供者对象联系起来。

我想对了吗？

这一切的原因是因为我无法在带有 linq 到实体查询的网格视图中加上提供者的需求。

所以我认为我的课可能有问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:04:29.167

实际上整个代码都是错误的。.NET 3.5 仅支持 EFv1，而 EFv1 没有内置对 POCO 类的支持。解决问题的最佳方法是添加 EDMX 文件并让 VS 生成可与 EFv1 一起使用的类。这些类将继承`EntityObject`并包含许多附加属性。此外，您的导航属性将使用不同的类型。

替代解决方案是升级到 .NET 4 和 EFv4+，您的代码在正确映射时可以工作。

# python - 如何使用 redis-py 在 python 脚本中模仿 redis MONITOR 命令？

> ID：10458146
> 
> 赞同：2
> 
> 时间：2012-05-05T01:54:32.397
> 
> 标签：python, redis

不幸的是，redis-py 库似乎没有 Monitor 例程。我想阅读redis服务器收到的所有命令，过滤它们，然后记录我感兴趣的命令。有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T18:24:46.183

这是一些在 python 中实现监视器代码的最小代码。

笔记 ：

1.  我改编自 redis-py 中的 PubSub 类。见[客户端.py](https://github.com/andymccurdy/redis-py/blob/master/redis/client.py)
2.  这不会解析响应，但这应该足够简单
3.  不进行任何类型的错误处理

```
导入redis        

班长（）：
    def __init__(self, connection_pool):
        self.connection_pool = 连接池
        self.connection = 无

    def __del__(self):
        尝试：
            self.reset()
        除了：
            经过

    定义重置（自我）：
        如果self.connection：
            self.connection_pool.release(self.connection)
            self.connection = 无

    def 监视器（自我）：
        如果 self.connection 为无：
            self.connection = self.connection_pool.get_connection(
                “监视器”，无）
        self.connection.send_command("监视器")
        返回 self.listen()

    def parse_response(self):
        返回 self.connection.read_response()

    def 听（自我）：
        而真：
            产生 self.parse_response()

如果 __name__ == '__main__'：
    pool = redis.ConnectionPool(host='localhost', port=6379, db=0)
    监视器 = 监视器（池）
    命令 = monitor.monitor()

    对于 c 命令：
        打印（c）

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-26T04:20:41.977

Now, the redis library already included the monitor support itself. [https://github.com/andymccurdy/redis-py/blob/master/redis/client.py#L3422](https://github.com/andymccurdy/redis-py/blob/master/redis/client.py#L3422)

# java - 标记方法参数final，值为

> ID：10458147
> 
> 赞同：2
> 
> 时间：2012-05-05T01:55:00.217
> 
> 标签：java

在这个例子中，声明`Object final`提供了什么价值？

```
private void doSomethingClever(final Object o) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:56:00.093

这样做的目的是让其他人来访问您的代码知道参数不能更改。如果他们设置了一个值，则会导致编译器错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T01:57:37.500

> 也就是说，使用它告诉读者和编译器该参数不会在方法中被修改。

**有用的链接：**

*   [为什么在 Java 中将局部变量和方法参数标记为“final”？](https://stackoverflow.com/questions/316352/why-would-one-mark-local-variables-and-method-parameters-as-final-in-java)

*   [Java 烦恼：最终参数](http://lpar.ath0.com/2008/08/26/java-annoyance-final-parameters/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T01:56:21.027

您将无法`o`在方法中分配给。

当有一个内部类（例如侦听器或一些可运行的访问此局部变量）时，它非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T02:47:10.990

老实说，我并没有真正看到在方法参数中使用 final 的意义。final 只会保证变量不会指向另一个对象，而不是对象本身不会是不可变的......您可以更改对象 o 的状态，您只是不能将 o 分配给另一个对象，例如 B

```
o = new Object(); 
```

或者

```
Object b = new Object();
o=b; 
```

但调用

```
o.doSomething(); 
```

很好。那么为什么到处都是丑陋的最终关键字使代码混乱呢？

至于性能优化，我相信即使方法参数中没有 final 关键字，现代编译器也会分析和优化代码。有人愿意纠正我吗，因为我不是 100% 确定这一点！

# c#-4.0 - Ninject 2.0 InRequestScope() 导致我出现问题 - 依赖项未处理

> ID：10458153
> 
> 赞同：0
> 
> 时间：2012-05-05T01:56:19.743
> 
> 标签：c#-4.0, asp.net-mvc-2, entity-framework-4, ninject-2

我将 Ninject 2.0 与 MVC 2/EF 4 项目一起使用，以便将我的存储库注入到我的控制器中。我已经读过，在做类似的事情时，应该使用 InRequestScope() 进行绑定。当我这样做时，每个请求都会获得一个新的存储库，但旧的存储库不会被处置。由于旧存储库保留在内存中，因此我与同时存在的多个 ObjectContext 发生冲突。

我的具体存储库实现了 IDisposable：

```
public class HGGameRepository : IGameRepository, IDisposable
{
    // ...

    public void Dispose()
    {
        if (this._siteDB != null)
        {
            this._siteDB.Dispose();
        }
    }
} 
```

还有我的忍者代码：

```
public class NinjectControllerFactory : DefaultControllerFactory
{
    private IKernel kernel = new StandardKernel(new HandiGamerServices());

    protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        try
        {
            if (controllerType == null)
            {
                return base.GetControllerInstance(requestContext, controllerType);
                // return null;
            }
        }
        catch (HttpException ex)
        {
            if (ex.GetHttpCode() == 404)
            {
                IController errorController = kernel.Get<ErrorController>();
                ((ErrorController)errorController).InvokeHttp404(requestContext.HttpContext);

                return errorController;
            }
            else
            {
                throw ex;
            }
        }

        return (IController)kernel.Get(controllerType);
    }

    private class HandiGamerServices : NinjectModule
    {
        public override void Load()
        {
            Bind<HGEntities>().ToSelf().InRequestScope();
            Bind<IArticleRepository>().To<HGArticleRepository>().InRequestScope();
            Bind<IGameRepository>().To<HGGameRepository>().InRequestScope();
            Bind<INewsRepository>().To<HGNewsRepository>().InRequestScope();
            Bind<ErrorController>().ToSelf().InRequestScope();
        }
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:51:08.493

我很确定您对您的对象未处置的猜测是错误的。当你认为它会发生时，这不会发生。但是，这确实在以后发生的事实不应该给你带来任何问题，`ObjectContexts`除非你做错了什么。`ObjectContexts`无论如何，在高负载的情况下，您将同时拥有很多。

但是，可能成为问题的是内存使用量增加。这就是为什么需要主动释放请求范围的原因。Ninject MVC 扩展会处理这个问题。否则，请查看 OnePerRequestModule 以了解它是如何完成的：

```
https://github.com/ninject/Ninject.Web.Common/blob/master/src/Ninject.Web.Common/OnePerRequestHttpModule.cs 
```

# python - python setup.py 配置在自定义目录中安装文件

> ID：10458158
> 
> 赞同：16
> 
> 时间：2012-05-05T01:57:03.253
> 
> 标签：python, configuration, installation, setup.py

我想创建一个 setup.py 将我的文件安装到自定义目录中。我有一个特定的前缀，我想在其中得到以下结果：

```
/my/prefix/
  bin/
    script.sh
  libexec/
    one.py
    two.py
    ...
  lib/pythonX.Y/site-packages/
    package/... 
```

我的初始项目如下：

```
/
  script.sh
  one.py
  two.py
  ...
  setup.py
  package/...
    __init__.py
    ... 
```

实现这一目标的最佳方法是什么？我希望以后能够安装它，例如：

```
python setup.py install --prefix=/my/prefix 
```

我可以将“包”很好地安装在正确的目录中，因为 --prefix 下的 lib/pythonX.Y/site-packages 是默认位置。但是有没有一种干净的方法可以将 script.sh 放入“bin”，将其他 python 文件放入“libexec”？我认为实现这一目标的唯一方法是在我的 setup.py 脚本中手动复制这些文件。也许有一种更清洁、更标准的方法来做到这一点？

（编辑）

**解决方案**

我最终得到了这样的 setup.py：

```
setup(name='mylib',
  scripts=['script.sh'],
  data_files=[('libexec', ['one.py', 'two.py'])]
) 
```

当然，您可以为 libexec 遍历所有 python 文件，但我只需要 2-3 个 python 文件。

（编辑2）

此外，我可以使用以下内容设置 setup.cfg：

```
[install]
prefix=/my/prefix 
```

而不是`python setup.py install --prefix=/my/prefix`我可以这样做：

```
python setup.py install 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T03:35:28.433

脚本通过使用`scripts`设置函数的参数来处理。对于 libexec，您可以将它们视为数据文件并使用数据选项。

```
setup(...
    scripts=glob("bin/*"),
    data_files=[(os.path.join(sys.prefix, 'libexec', 'mypackage'), glob("libexec/*"))],
    ...
) 
```

我不确定这将如何与`--prefix`选项一起使用，我从未尝试过。

# objective-c - 在 AVAssetReader 中设置时间范围会导致冻结

> ID：10458160
> 
> 赞同：1
> 
> 时间：2012-05-05T01:57:28.340
> 
> 标签：objective-c, ios, avassetreader

~~因此，我正在尝试对先前录制的音频（来自 AVAsset）进行简单计算，以创建波形视觉效果。我目前通过平均一组样本来做到这一点，其大小是通过将音频文件大小除以我想要的波形分辨率来确定的。~~

~~这一切都很好，除了一个问题......它太慢了。在 3GS 上运行，处理一个音频文件大约需要播放它所需时间的 3%，这很慢（例如，处理一个 1 小时的音频文件大约需要 2.5 分钟）。我试图尽可能优化该方法，但它不起作用。我将发布用于处理文件的代码。也许有人可以提供帮助，但我真正想要的是一种无需遍历每个字节即可处理文件的方法。因此，假设分辨率为 2,000，我想访问该文件并在 2,000 个点中的每一个点进行采样。我认为这会快很多，尤其是在文件较大的情况下。但我知道获取原始数据的唯一方法是以线性方式访问音频文件。有任何想法吗？这里'~~

所以我完全改变了这个问题。我姗姗来迟地意识到 AVAssetReader 有一个用于“寻找”的 timeRange 属性，这正是我正在寻找的（参见上面的原始问题）。此外，这个问题已经被问到并得到了回答（我只是之前没有找到），我不想重复问题。但是，我仍然遇到问题。我的应用程序冻结了一段时间，然后当我尝试时最终崩溃`copyNextSampleBuffer`。我不确定发生了什么事。我似乎没有处于任何递归循环中，它只是永远不会从函数调用中返回。检查日志显示给我这个错误：

```
Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  0

Application Specific Information:
App[10570] has active assertions beyond permitted time: 
{(
    <SBProcessAssertion: 0xddd9300> identifier: Suspending process: App[10570] permittedBackgroundDuration: 10.000000 reason: suspend owner pid:52 preventSuspend  preventThrottleDownCPU  preventThrottleDownUI 
)} 
```

我在应用程序上使用了时间分析器，是的，它只是以最少的处理量就坐在那里。无法完全弄清楚发生了什么。需要注意的是，如果我不设置 AVAssetReader 的 timeRange 属性，则不会发生这种情况。我已经检查并且 timeRange 的值是有效的，但是由于某种原因设置它会导致问题。这是我的处理代码：

```
- (void) processSampleData{
    if (!_asset || CMTimeGetSeconds(_asset.duration) <= 0) return;
    NSError *error = nil;
    AVAssetTrack *songTrack = _asset.tracks.firstObject;
    if (!songTrack) return;
    NSDictionary *outputSettingsDict = [[NSDictionary alloc] initWithObjectsAndKeys:
                                        [NSNumber numberWithInt:kAudioFormatLinearPCM],AVFormatIDKey,
                                        [NSNumber numberWithInt:16], AVLinearPCMBitDepthKey,
                                        [NSNumber numberWithBool:NO],AVLinearPCMIsBigEndianKey,
                                        [NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,
                                        [NSNumber numberWithBool:NO],AVLinearPCMIsNonInterleaved,
                                        nil];

    UInt32 sampleRate = 44100.0; 
    _channelCount = 1;

    NSArray *formatDesc = songTrack.formatDescriptions;
    for(unsigned int i = 0; i < [formatDesc count]; ++i) {
        CMAudioFormatDescriptionRef item = (__bridge_retained CMAudioFormatDescriptionRef)[formatDesc objectAtIndex:i];
        const AudioStreamBasicDescription* fmtDesc = CMAudioFormatDescriptionGetStreamBasicDescription (item);
        if(fmtDesc ) { 
            sampleRate = fmtDesc->mSampleRate;
            _channelCount = fmtDesc->mChannelsPerFrame;
        }
        CFRelease(item);
    }

    UInt32 bytesPerSample = 2 * _channelCount; //Bytes are hard coded by AVLinearPCMBitDepthKey
    _normalizedMax = 0;
    _sampledData = [[NSMutableData alloc] init];

    SInt16 *channels[_channelCount];
    char *sampleRef;
    SInt16 *samples;
    NSInteger sampleTally = 0;
    SInt16 cTotal;
    _sampleCount = DefaultSampleSize * [UIScreen mainScreen].scale;
    NSTimeInterval intervalBetweenSamples = _asset.duration.value / _sampleCount;
    NSTimeInterval sampleSize = fmax(100, intervalBetweenSamples / _sampleCount);
    double assetTimeScale = _asset.duration.timescale;
    CMTimeRange timeRange = CMTimeRangeMake(CMTimeMake(0, assetTimeScale), CMTimeMake(sampleSize, assetTimeScale));

    SInt16 totals[_channelCount];
    @autoreleasepool {
        for (int i = 0; i < _sampleCount; i++) {
            AVAssetReader *reader = [AVAssetReader assetReaderWithAsset:_asset error:&error];
            AVAssetReaderTrackOutput *trackOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:songTrack outputSettings:outputSettingsDict];
            [reader addOutput:trackOutput];
            reader.timeRange = timeRange;
            [reader startReading];
            while (reader.status == AVAssetReaderStatusReading) {
                CMSampleBufferRef sampleBufferRef = [trackOutput copyNextSampleBuffer];
                if (sampleBufferRef){
                    CMBlockBufferRef blockBufferRef = CMSampleBufferGetDataBuffer(sampleBufferRef);
                    size_t length = CMBlockBufferGetDataLength(blockBufferRef);
                    int sampleCount = length / bytesPerSample;
                    for (int i = 0; i < sampleCount ; i += _channelCount) {
                        CMBlockBufferAccessDataBytes(blockBufferRef, i * bytesPerSample, _channelCount, channels, &sampleRef);
                        samples = (SInt16 *)sampleRef;
                        for (int channel = 0; channel < _channelCount; channel++)
                            totals[channel] += samples[channel];
                        sampleTally++;
                    }
                    CMSampleBufferInvalidate(sampleBufferRef);
                    CFRelease(sampleBufferRef);
                }
            }
            for (int i = 0; i < _channelCount; i++){
                cTotal = abs(totals[i] / sampleTally);
                if (cTotal > _normalizedMax) _normalizedMax = cTotal;
                [_sampledData appendBytes:&cTotal length:sizeof(cTotal)];
                totals[i] = 0;
            }
            sampleTally = 0;
            timeRange.start = CMTimeMake((intervalBetweenSamples * (i + 1)) - sampleSize, assetTimeScale); //Take the sample just before the interval
        }

    }
    _assetNeedsProcessing = NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:48:11.420

我终于明白为什么了。显然，您可以为 AVAssetReader 的 timeRange 指定某种“最小”持续时间。我不确定这个最小值到底是多少，高于 1,000 但低于 5,000。资产的持续时间可能会发生最小变化……老实说，我不确定。相反，我保持持续时间（无限大）相同，只是更改了开始时间。我没有处理整个样本，而是只复制一个缓冲区块，处理它然后寻找下一次。我仍然遇到代码问题，但如果我无法弄清楚，我会将其作为另一个问题发布。

# mysql - 先用代码和mysql插入中文数据时的问题

> ID：10458165
> 
> 赞同：1
> 
> 时间：2012-05-05T01:57:53.880
> 
> 标签：mysql, asp.net-mvc-3, ef-code-first, cjk

我已经使用 Mysql 在 ASP.NET MVC 3 中完成了一个项目。要创建数据库，我首先使用代码 ef 4.1。我在数据库中插入的一些数据是汉字。当我插入数据时，它会显示为`????`. 我`connectionString`在我的网络配置中这样设置：

```
add name="mydbcontext" connectionString="server=localhost;user id=root; password=; database=mydbcontext; pooling=false; charset=utf8;" providerName="MySql.Data.MySqlClient" 
```

但问题仍然存在......这是我用来插入数据的方式：

```
public class MyMenu {
    public int Id { get; set; }
    public string Home { get; set; }
    public string About { get; set; }
    public string AppForSmartphone { get; set; }
    public string Games { get; set; }
    public string Softwares { get; set; }
    public string Language { get; set; }
    public string News { get; set; }
    public string Cart { get; set; }
}

public class MyDbContext : DbContext {
     public DbSet<MyMenu> MyMenus { get; set; }
     public MyDbContext()
        : base("MyDbContext") {
    }
 }
   private MyDbContext db = new MyDbContext();
   MyMenu tmpmenu = new MyMenu {
     About = 關於,
     Id = 1,
     Cart = 車,
     News = 新聞,
     AppForSmartphone = 應用程序的智能手機,
     Games = 遊戲,
     Softwares = 軟件,
     Home = 家,
     Language = ""
   };
    db.MyMenus.Add(tmpmenu);
    db.SaveChanges(); 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:41:22.750

您的代码中没有问题。您只需要检查保存中文数据的列的**DataType 。我猜您使用的是****varchar()**，而不是您应该使用**nvarchar()**。

一天前我遇到了同样的问题。并将数据类型更改为 nvarchar() 解决了我的问题。

**MySql 确实支持多语言。** 更改 DataType 应该可以解决您的问题。

问候。

# c - 在 C 中写入 Linux sysfs 节点

> ID：10458166
> 
> 赞同：6
> 
> 时间：2012-05-05T01:58:17.923
> 
> 标签：c, linux

在 shell 中，我可以像这样激活系统上的 LED：

```
#echo 1 > /sys/class/leds/NAME:COLOR:LOCATION/brightness 
```

我想从 C 程序中做同样的事情，但我找不到一个简单的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T02:02:33.113

像文件一样打开 sysfs 节点，向其写入“1”，然后再次关闭它。

例如：

```
#include <stdio.h>
#include <fcntl.h>

void enable_led() {
  int fd;
  char d = '1';
  fd = open("sys/class/leds/NAME:COLOR:LOCATION/brightness", O_WRONLY);
  write (fd, &d, 1);
  close(fd);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T02:03:14.950

像这样的东西：

```
#include <stdio.h>

int main(int argc, char **argv)
{
    FILE* f = fopen("/sys/class/leds/NAME:COLOR:LOCATION/brightness", "w");
    if (f == NULL) {
        fprintf(stderr, "Unable to open path for writing\n");
        return 1;
    }

    fprintf(f, "1\n");
    fclose(f);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T02:03:36.990

我没有启动到我的 linux 分区，但我怀疑它是这样的：

```
int f = open("/sys/class/leds/NAME:COLOR:LOCATION/brightness",O_WRONLY);
if (f != -1)
{
    write(f, "1", 1);
    close(f);
} 
```

# php - 使用 foreach 循环将 $var 发送到另一个 .php 页面？

> ID：10458174
> 
> 赞同：0
> 
> 时间：2012-05-05T01:59:51.157
> 
> 标签：php, foreach, cron

我正在尝试创建一种从 API 脚本更新数据库中价格的方法，该脚本一次搜索一个项目。

API 脚本按商品编号搜索，然后在同一页面中更新价格。

另一个页面，将有一个 cronjob 和一个 foreach 循环，其中所有可变项目编号都被输出到函数中。

然后，foreach 循环函数一个一个地获取项目编号，将它们发送到 API.php 页面，然后按项目编号搜索并更新到数据库中。

目前我正在尝试使用 echo 和 html“发布”到所需页面来做到这一点。以及一些在页面加载后自动将项目提交到 api 页面的 javascript。也许我对这一切都错了！

正在发生的事情是，foreach 循环读取所有数字并正确输出它们，但随后我在其中的 javascript 代码提交。而且我只收到发送到 API 的第一个项目编号条目，当然也插入到数据库中。

由于这会使页面远离 .php foreach 循环页面，因此 foreach 循环无法继续，我只被第一个条目卡住了。

对不起，很长的帖子！只是想清楚...

这是我的代码的样子：

```
$sql = "SELECT id, item_number FROM products ORDER BY id DESC";
$query = mysql_query($sql) or die (mysql_error());
while ($result = mysql_fetch_array($query)) {

$itemnumber = array($result['item_number']); 
```

//由于所有 item_numbers 都被从数据库中拉出，因此正在设置数组上方 - 所以这不仅仅是一个项目编号，如回显中所示...

```
foreach ($itemnumber as $item_number) {

echo "<form method=\"post\" action=\"api.php\" name=\"ChangeSubmit\" id=\"ChangeSubmit\" >";
echo "<input type=\"text\" name=\"item_number\" value=\"{$item_number}\"/>";

echo "<script type=\"text/javascript\">
function myfunc () {
var frm = document.getElementById(\"ChangeSubmit\");
frm.submit();
}
window.onload = myfunc;
</script></form>";

/*This outputs on the page all the item numbers of every product, with input text boxes next to them, then after a split second the javascrip echo submits -- only the very first item number to the api. */
}
}

?> 
```

所以这是主页，然后将其发送到“api.php”，它只是通过类似（搜索：$_POST['item_number'] ---然后插入/更新数据库）来查找项目编号。

我认为就是这样！希望一切都有意义！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:22:11.383

现在，代码回显了我数据库中的所有项目编号。如果我单击其中一个，它会连接到“api.php”并在我的数据库中插入一个新条目，但它不会返回到与项目编号相呼应的页面。我不确定我是否应该回应其中的任何一个，或者 ajax 是否在正确的位置。

项目编号被使用并发送到“api.php”，它将连接到我的数据库并更新我的数据库。

这是我一直在尝试合并 ajax 的方式。让我知道你们的想法。谢谢

```
<?php

mysql_connect("", "", "") or die(mysql_error());

mysql_select_db("") or die (mysql_error());

$sql = "SELECT id, item_number FROM products WHERE retailer LIKE ('%api%') ORDER BY id DESC";
$query = mysql_query($sql) or die (mysql_error());
while ($result = mysql_fetch_array($query)) {

$itemnumber = array($result['item_number']);

foreach ($itemnumber as $item_number) {

echo "<form method=\"post\" action=\"api.php\" name=\"ChangeSubmit\" id=\"ChangeSubmit\" >";
echo "<input type=\"submit\" name=\"item_number\" value=\"{$item_number}\" />";

echo "<script type=\"text/javascript\">
$('#ChangeSubmit').click(function() {
  $.ajax({
    url: \"api.php\",
    dataType: \"json\",
    type: \"POST\",
    data: {
      itemNumber: <?php print $item_number; ?>,
    },
    success: function (m) {
        console.log(m);
    },
    error: function (e) {
      console.log(\"Something went wrong ...: \"+e.message);
    },
  }); /* end ajax*/
  e.preventDefault();
});
</script>" ;

}

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:21:49.357

像这样使用 jQuery：

```
<script type="text/javascript">
$('#ChangeSubmit').click(function() {
  $.ajax({
    url: "api.php",
    dataType: "json",
    type: "POST",
    data: {
      itemNumber: <?php print $item_number; ?>,
    },
    success: function (m) {
        console.log(m);
    },
    error: function (e) {
      console.log("Something went wrong ...: "+e.message);
    },
  }); /* end ajax*/
  e.preventDefault();
});
</script> 
```

# excel - Excel 宏排序 PivotItems

> ID：10458175
> 
> 赞同：0
> 
> 时间：2012-05-05T02:00:00.880
> 
> 标签：excel, vba, date, loops, pivot-table

背景：我在 Excel 中有一个数据透视表，其中“日期”作为 XLColumn 字段。源数据总是在变化，我注意到当添加新数据时，数据透视表不会对数据透视项目进行排序以按日期过滤。它会将其作为字符串添加到末尾。此后，我更改了源数据并确保 Date 列确实是日期。

第一件事：我需要在 VBA 中以编程方式订购日期透视项目。也就是说，即使添加了新日期（从旧到更新），用户也可以过滤按顺序列出的日期。

第二件事：我想循环显示日期枢轴项目，显示第一个和第二个，然后是第二个和第三个，然后是第三个和第四个等。

就像是：

```
-code that hides all pivot items
Pf.pivotitems (i).visible = true (12/04/2012)
Pf.pivotitems(i + 1).visible = true (19/04/2012)
i = i + 1 
```

这一直对我返回错误，无法设置数据透视项的可见属性。

谢谢，

需要任何进一步的信息，请询问。

分枝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:48:59.637

像这样？

> 第一件事：我需要在 VBA 中以编程方式订购日期透视项目。也就是说，即使添加了新日期（从旧到更新），用户也可以过滤按顺序列出的日期。

```
'~~> Change Sheet1 with the relevant sheet name
With Sheets("Sheet1")
    '~~> Change PivotTable1 and DateField to the respective pivot and field name.
    .PivotTables("PivotTable1").PivotFields("DateField").AutoSort xlAscending, "DateField"
End With 
```

> 第二件事：我想循环显示日期枢轴项目，显示第一个和第二个，然后是第二个和第三个，然后是第三个和第四个等。

```
Pf.PivotItems(i).Visible= True
Pf.PivotItems(i + 1).Visible= True 
```

# java - JAXB @XmlSeeAlso 导致与域对象的紧密耦合

> ID：10458179
> 
> 赞同：9
> 
> 时间：2012-05-05T02:00:14.857
> 
> 标签：java, web-services, jaxb, jax-ws, cxf

我正在使用 JAXB 绑定直接解组到我的域层对象，这些对象是生成的 web 服务类型的子类。这是一个很好的解决方案，因为我可以重写方法并提供编写自定义逻辑等。但是，XJC 编译器坚持将 @XmlSeeAlso({MySubclass.class}) 注释放在所有生成的类上，这导致它们成为与我的域对象紧密耦合。这显然是不可取的，并且会导致我的项目之间出现各种参考问题，我不会在这里讨论。

是否可以生成没有 @XmlSeeAlso 注释的类？解组到子类的实际工作似乎发生在 ObjectFactory 类中。是否可以省略 jaxb 绑定，并为每个应用程序替换自定义 ObjectFactory？这将允许我在共享实用程序中自动生成 Web 服务类型，而每个 Web 项目都可以解组为这些类型的不同子类。

```
<jaxb:bindings node="//xs:complexType[@name='AutogeneratedWebserviceType']">
  <jaxb:class implClass="my.project.CustomSubclass" />
</jaxb:bindings> 
```

此绑定将在 ObjectFactory 中创建一个方法，该方法似乎完成了对我的子类进行解组的实际工作：

```
public AutogeneratedWebserviceType createAutogeneratedWebserviceType() {
  return new CustomSubclass();
} 
```

如果可能，我希望通过提供客户 ObjectFactory 来实现这种没有 @XmlSeeAlso 注释的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:59:49.867

您是否尝试使用参数 -target 2.0 运行 XJC？我相信这将禁用 @XmlSeeAlso 注释的生成。

# php - 如何使用 preg_match_all 获取页面中的特定部分

> ID：10458185
> 
> 赞同：0
> 
> 时间：2012-05-05T02:01:16.347
> 
> 标签：php

您好，我使用 preg_match_all 函数来抓取页面上的内容，但是当我尝试抓取一些特定部分（如细节部分）时，它会向我发送一个数组！

该页面上的代码结构是

```
<div class="f slp">DETAILS I WANT TO GET</div> 
```

以前为了获取网址 n 标题，我使用了类似的代码

```
//so this gets URLs in href=""
preg_match_all('/a href="([^"]+)" class=l.+?>.+?<\/a>/',$scraped,$results); 
```

但这次我想在该页面的结构下获取一些细节

```
<div class="f slp">DETAILS I WANT TO GET</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:07:14.120

```
preg_match_all("#<div class=\"f slp\">(.*?)<\/div>#si", $source, $match);

foreach($match[1] as $val) {
    echo $val."<br>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:21:39.480

请查看[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)一个非常易于使用的库，它可以很容易地从 html 中提取内容。

```
// from the documentation
$html = str_get_html("<div>foo <b>bar</b></div>");
$e = $html->find("div", 0);
echo $e->tag; // Returns: " div"
echo $e->outertext; // Returns: " <div>foo <b>bar</b></div>"
echo $e->innertext; // Returns: " foo <b>bar</b>"
echo $e->plaintext; // Returns: " foo bar" 
```

阅读更多[手册](http://simplehtmldom.sourceforge.net/manual.htm)

# javascript - HTML5 中的字母正则表达式

> ID：10458189
> 
> 赞同：2
> 
> 时间：2012-05-05T02:01:39.990
> 
> 标签：javascript, regex, html

我对正则表达式真的很陌生，但我需要找到一种将过滤器添加到 HTML5 表单的方法：

```
<input type="text" required="true" name="firstname" pattern="WHAT DO I PUT HERE"> 
```

谁能帮我在模式属性中添加什么，例如

公认：

*   `John`
*   `Frank`

不接受：

*   `Ke$ha`
*   `B0B`

（只接受字母字符。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T02:06:37.320

一些很好的例子：[http ://html5pattern.com/](http://html5pattern.com/)

在你的情况下，我会使用：

```
[a-zA-Z]+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:05:38.307

你不是太具体，但我假设你想排除非字母字符。

非空字母词的模式是

```
[a-zA-Z]+ 
```

其中`a-z`代表小写字母`A-Z`的范围，代表大写字母的范围。`[a-zA-Z]`then 表示任何字母并且`+`表示至少一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T02:05:04.870

```
pattern="[A-Za-z ]" 
```

只允许字母字符和空格

# html - 尝试创建电子邮件注册表单，但为 NilClass:Class 获取未定义的方法“model_name”

> ID：10458191
> 
> 赞同：0
> 
> 时间：2012-05-05T02:01:57.107
> 
> 标签：html, ruby-on-rails, ruby, forms

我已经盯着这个看了一段时间，谷歌并没有提供太多帮助，所以我向你们寻求帮助。这应该是一个非常简单的修复。

代码的目标是从注册字段中获取电子邮件地址并将其放入数据库中。

我认为我需要的大部分内容都在那里，但我收到了这个错误：

`undefined method model_name for NilClass:Class`

我的 home.html.erb 文件包含以下内容：

```
 <%= form_for(@signup) do |f| %>
        <div class="field">
            <%= f.label :email %><br />
            <%= f.text_field :email %>
        </div>

        <div class="actions">
            <%= f.submit "Enter" %>
        </div>
    <% end %> 
```

该模型包含以下内容：

```
class Signup < ActiveRecord::Base

  attr_accessible :email
     email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
     validates(:email, :presence => true,
                    :length => {:maxiumum => 40},
                    :format => {:with => email_regex})

end 
```

控制器包含：

```
class SignupController < ApplicationController

  def show
  end

  def new
    @signup = Signup.new
  end

  def create
    @signup = Signup.new(params[:id])
    if @signup.save
    else
      render 'new'
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:10:22.927

问题很可能是因为您在 form_for 中使用的实例变量未设置为 ActiveRecord 对象。看来您在“新”操作中正确设置了它，但是由于您提到表单位于“home.html.erb”中，因此尚不清楚您是否正在呈现正确的模板？

无论哪种方式，请确保您在 form_for 中使用的任何内容都设置为有效的 ActiveRecord 对象，您的问题可能会得到解决。

此外，您可能希望更改创建操作以使用表单中的所有参数：

```
@signup = Signup.new(params[:signup]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:04:47.057

将此添加到`home`页面控制器中的操作：

```
@signup = Signup.new 
```

错误的原因是您`@signup`在表单中使用，但您没有在`show`控制器操作中定义它。

# java - 机器人类 - Java

> ID：10458192
> 
> 赞同：0
> 
> 时间：2012-05-05T02:02:07.193
> 
> 标签：java, awtrobot

```
import java.awt.*;
import java.awt.event.InputEvent;
import java.awt.image.BufferedImage;

public final class test
{
    private static Robot robot;
    public static boolean clickStatus;

    public static void leftClick (int R, int G, int B)
    {
            Color myColorToMatch = new Color (R, G, B);
            BufferedImage image = robot.createScreenCapture (new Rectangle (Toolkit.getDefaultToolkit ().getScreenSize ()));
            int w = image.getWidth (null);
            int h = image.getHeight (null);
            int[] rgbs = new int[w*h];
            image.getRGB (0, 0, w, h, rgbs, 0, w);
            for (int y=0; y<h; y++) {
                for (int x=0; x<w; x++) {
                      if (new Color (image.getRGB (x, y)).equals (myColorToMatch))
                               robot.mouseMove(x, y);
                               robot.mousePress (InputEvent.BUTTON1_MASK);
                               robot.mouseRelease(InputEvent.BUTTON1_MASK);
                               break;
                    }
                    break;
            }
    }        

    public static void main(String[] args)
    {
            try
            {
                    robot = new Robot();
            }
            catch(Exception Error)
            {
                    Error.printStackTrace();
            }             
            // dImp: 130,40,32 - 160,99,57 - 217,135,79
            // banker: 139, 130, 129                
            boolean botLoop = true;
            boolean bankStatus;

            while (botLoop == true)
            {
                    robot.delay (1000);
                    leftClick (96,96,98);
            }
    }
} 
```

但是有一个问题，我不知道如何解决它。机器人只会在鼠标所在的地方每秒不断地单击，而不是转到/单击所需的像素。有人可以帮我吗？我找不到错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T02:05:12.110

mousePress 和 Release 周围没有括号，因此无论颜色如何，它仍然会按下鼠标，以及其他一些问题......

```
 import java.awt.Color;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.event.InputEvent;
import java.awt.image.BufferedImage;

public final class fff {
    private static Robot robot;
    public static boolean clickStatus;

    public static void leftClick(int R, int G, int B) {
        Color myColorToMatch = new Color(R, G, B);
        BufferedImage image = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
        int w = image.getWidth(null);
        int h = image.getHeight(null);
        int[] rgbs = new int[w * h];
        image.getRGB(0, 0, w, h, rgbs, 0, w);
        for (int y = 0; y < h; y++) {
            for (int x = 0; x < w; x++) {
                if (new Color(image.getRGB(x, y)).equals(myColorToMatch)) {
                    robot.mouseMove(x, y);
                    robot.mousePress(InputEvent.BUTTON1_MASK);
                    robot.mouseRelease(InputEvent.BUTTON1_MASK);
                    break;
                }
            }
        }
    }

    public static void main(String[] args) {
        try {
            robot = new Robot();
        } catch (Exception Error) {
            Error.printStackTrace();
        }
        // dImp: 130,40,32 - 160,99,57 - 217,135,79
        // banker: 139, 130, 129
        boolean botLoop = true;
        while (botLoop == true) {
            robot.delay(1000);
            leftClick(0, 0, 0);
            break; //no lop
        }
    }
} 
```

# excel - Excel---统计重复数据

> ID：10458196
> 
> 赞同：1
> 
> 时间：2012-05-05T02:02:48.980
> 
> 标签：excel, vba

```
APC NM000038
APC NM000038
APC NM000038
APC NM000038
APC NM001127510
APC NM001127510
APC NM001127510 
```

我试图在excel中计算重复数据。我找不到相关的答案，所以我只是在这里问。并感谢您提前回答。

我正在尝试使用两列信息来计算。如果A列中的值=某些标准，我想计算一个值出现在B列中的次数（不要计算B列中的相同值，只计算不同的值）-并非A列中的所有值都对应b 列值。因此，如果我想查看有多少女性获得了“5”，我需要查看 A 列中有多少“女性”在 B 列中有相应的“5”值。（并非所有女性都有“5”，值可以是 1 到 5）

在上面的例子中，我期望

```
NM001127510  2
NM000038     2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:53:58.183

Assuming that you data is in cell A1 to B1000, use this formula

```
=SUMPRODUCT((A1:A1000="APC")*(B1:B1000="NM000038")) 
```

similarly

```
=SUMPRODUCT((A1:A1000="APC")*(B1:B1000="NM001127510")) 
```

**FOLLOWUP**

> I did that, but the data sets are huge, several hundred MB excel file. I m not sure whether i need to use vba to do that, cuz i dont know a lot about vba – Maggie Mi 7 hours ago

If you Excel Files are >= 100 mb then opening it and then running the VBA code or using formulas **will take a lot of time**. If you are just concerned with the results then try this :)

Open a new Excel File. Ensure your other file is closed. In a module paste this code. When you run this, the output will be pasted in Sheet1.

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim adodb As Object
    Dim result

    Set ws = Sheets("Sheet1")

    Set adodb = CreateObject("ADODB.Connection")

    adodb.CursorLocation = 3

    adodb.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & _
                  "C:\book1.xlsx" & ";Extended Properties=""Excel 12.0 Xml;IMEX=1" & _
                  "HDR=NO;" & """"

    Set result = adodb.Execute("Select F1, F2, Count(*) from [Sheet1$] Group by F1,F2")

    With ws
        .Range(.Cells(1, 1), .Cells(result.RecordCount, result.Fields.Count)) _
        = Application.Transpose(result.GetRows)
    End With

    '~~> Cleanup
    result.Close
    adodb.Close
    Set adodb = Nothing
    Set result = Nothing
End Sub 
```

**MY ASSUMPTIONS (Change the above code - My code is based on below assumptions)**

1) You are working with Excel 2007/2010 files. If not, then you will have to change the connection string. Please see this link for an appropriate connection string.

[http://connectionstrings.com/excel](http://connectionstrings.com/excel)

2) The name of your Excel file which has the data is called `Book1.xlsx` and the data is in `Sheet1`. Also it resides in `C:\`

**SNAPSHOT**

![enter image description here](../Images/aa67b247ce6bdd0615ee2334be398563.png)

# jquery - 使用 Jquery 开发 asp.net mvc Web 应用程序时如何考虑未来的 Web 浏览器版本

> ID：10458203
> 
> 赞同：0
> 
> 时间：2012-05-05T02:03:52.107
> 
> 标签：jquery, browser

我正在开发一个 asp.net mvc 3 Web 应用程序，我在几乎每个视图上都使用 Jquery。我正在三个不同的浏览器（IE 9、firefox 12、chrome）上测试我的应用程序，以确保我的应用程序在这些浏览器上运行良好。

但我的问题是；**如果我的应用程序目前在这三个浏览器上运行良好，那么我可以保证它们在这些 Web 浏览器的任何未来版本中仍然可以正常运行，而无需对我的应用程序代码进行任何修改。**

**如果答案是否定的（我不能保证），**那么将可能需要的任何未来工作的风险和工作量降至最低的最佳方法是什么。BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:12:40.030

A）您可能想使用 Jasmine 之类的东西创建单元测试。然后，您可能想要运行 cron 作业来运行您的 jasmine 测试，然后在出现问题时报告。如果您的代码库不断变化，这将特别有用。

B) 如果您使用单一版本的 jQuery 并且从未升级您，则存在浏览器更改未在 jQuery 中捕获的风险。话虽如此，如果使用最新版本的 CDN 版本，您将面临弃用警告或错误的风险。

C）如果您使用 jQuery（或其他一些框架），它应该尽量减少管理这些可能发生的浏览器更改的需要，虽然这可能并不完美，但您几乎不会对您的代码进行修改。不过，没有什么是完美的，而且您还会发现，随着用户数量的增加，事情会出乎意料地发生，并且会以非常奇怪的方式发生。

最后，通过使用由其他人管理的库，您基本上获得了为您的项目工作的整个团队。您可以从某些第三方库中利用的越多，您需要维护的代码就越少。当然，只有当项目管理良好时，这才是正确的！

# java - 在 JPA 中将类映射到基元

> ID：10458206
> 
> 赞同：0
> 
> 时间：2012-05-05T02:04:09.697
> 
> 标签：java, jpa

我想将一个类映射到一个原始类型

```
@Entity
@Table(name="PERSON")
public class Person implements Serializable {
    ...
   private Email email = null;
    ...
   @Column(name="email")
   public Email getEmail() {
      return email;
   }
   public void setEmail(Email email) {
      this.email=email;
   }
} 
```

在此示例中，我想将电子邮件保存为字符串

我希望是这样的：

```
interface someInterface{

   String getValue();
   void setValue(String p);

} 
```

然后，如果我在电子邮件中实现这个接口，它可以透明地保存和加载（我还没有找到这样的东西）。

我不想序列化课程

我以电子邮件为例，但我想到了许多其他类，几乎没有成为一个完整的实体。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:22:47.490

JPA2.1 提供了 AttributeConverter，这意味着可以使用转换器将字段标记为将其持久化为例如字符串。目前所有的 JPA 实现都有自己的变体，但[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1)已经提供了 JPA2.1 功能，请参阅[本页](http://www.datanucleus.org/products/accessplatform_3_1/jpa/types.html)的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:53:16.693

制作两个变量。电子邮件是对象并且您标记为 @Transient 和 emailStr 存储在数据库中。emailStr getter 和 setter 应该是私有的，getEmail 基于 emailStr 创建 email 对象（惰性）。

如果您在许多实体中有电子邮件，另一种解决方案是创建自定义用户类型。

只是谷歌休眠用户类型..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:05:59.860

为此，您可以在 EclipseLink 中使用转换器，

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Default_Conversions_and_Converters](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Default_Conversions_and_Converters)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-05T02:16:22.090

就 JPA 而言，没有什么能阻止您在类中使用 String。或任何其他原始类型...

编辑：你的意思是这样的希望

```
@Entity
@Table(name="PERSON")
public class Person implements Serializable {
    ...
   private String email = null;
    ...
   @Column(name="email")
   public String getEmail() {
      return email;
   }
   public void setEmail(String email) {
      this.email=email;
   }
} 
```

# mysql - 在 MySQL 中获取直到上个月最后一天的数据

> ID：10458208
> 
> 赞同：1
> 
> 时间：2012-05-05T02:04:14.293
> 
> 标签：mysql, datetime, date

我有一个mysql-db，里面有费用，还有一个日期时间。每个月我都想创建一张包含上个月或更早的所有费用的发票。因此，如果是 2012 年 2 月 2 日、5 日或 30 日，我仍然只想要 2012 年 4 月或更早的发票。我试过使用 date_sub，但它只是减去一个月，所以它只在上个月的同一天开具发票。我该怎么做？

从广告中获取 * WHERE AdEnd > ??

泰！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:42:22.037

我总是发现，如果你从当前日期减去一个月中的天数，你会得到上个月的最后一天。例如，在每月的 15 日，减去 15 天，您将得到上个月的最后一天：

```
SELECT (DATE_SUB(CURDATE(),INTERVAL DAYOFMONTH(CURDATE()) DAY)) 
```

如果`CURDATE()`是`2012-05-05`则以上返回`2012-04-30`。

因此，要将广告投放到上个月的最后一天，请执行以下操作：

```
SELECT *
FROM Ads
WHERE AdEnd <= (DATE_SUB(CURDATE(),INTERVAL DAYOFMONTH(CURDATE()) DAY)) 
```

如果 AdEnd 是 DATE，则此方法有效，但如果它是 DATETIME，您只需要做`less than the first of the month`，因此您减去一天即可获得每月的第一天，如下所示：

```
SELECT *
FROM Ads
WHERE AdEnd < (DATE_SUB(CURDATE(),INTERVAL DAYOFMONTH(CURDATE()) - 1 DAY)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T02:09:11.273

试试`date_diff`，例如：

```
SELECT DATEDIFF('2008-11-30','2008-11-29') AS DiffDate 
```

产量：

```
1 
```

# c# - 当 IDENTITY_INSERT 设置为 OFF 时，无法在表中插入标识列的显式值

> ID：10458214
> 
> 赞同：3
> 
> 时间：2012-05-05T02:05:22.177
> 
> 标签：c#, sql-server, linq, linq-to-sql

我正在尝试将旧数据库中的记录导入到新的数据库干净数据库中。我已经将新数据库设置为具有 IDENTITY 主键，但是我想插入与原始数据库相同的值。

在 SQL 中我做了：

```
set IDENTITY_INSERT plans on 
```

我正在使用 LINQ to SQL 并且我已关闭自动生成的列，但我仍然收到此错误：

```
Cannot insert explicit value for identity column in table 'Plans' when IDENTITY_INSERT is set to OFF. 
```

但它是开启的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T02:11:41.513

该`identity_insert`设置是数据库会话的本地设置。设置时必须使用与插入时相同的数据库连接。

# ruby-on-rails - 在视图显示上调整 Rails 图像大小？

> ID：10458216
> 
> 赞同：17
> 
> 时间：2012-05-05T02:05:54.753
> 
> 标签：ruby-on-rails, css, image-processing

如何将现有图像调整为“260x180”？

我目前正在使用 Carrierwave 和 Rmagick 将图像上传到我的 Amazon S3 存储桶，它会创建图像的 2 个版本：原始版本和拇指版本（70x70）。

现在，我知道我可以创建另一个版本，以便创建三个版本，包括 260x180，但我觉得这会过度堵塞存储数据库，我想知道我是否可以在视图级别上做到这一点。

我试过

```
<%= image_tag(@syllabus.image_url, :size => "260x180") %> 
```

但它似乎不起作用 - 图像尺寸不同。

另外，如果图像小于我想要的输出，我是否需要做一些与更大的图像不同的事情？例如，我需要剪掉较大的，但扩大较小的，还是会自动缩放到所需的大小？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-05T04:25:08.667

就像@Yosep 说的那样，这里的轨道没有什么神奇之处。`<%= image_tag %>`在结果 html 中生成一个`<img>`标签。如果你通过 a `:size => '260x180'`，结果`<img>`标签将有它的`width`和`height`设置为 260 和 180。

你的问题的答案来了。提供另一种图像尺寸的最佳方式是您一开始拒绝的方式。您需要在后端调整这些图像的大小并将它们存储在某个地方。

通过设置标签的宽度和高度来调整图像大小`<img>`不会保持图像的原始纵横比。如果原来的比例是260:180，那就没问题了。但如果不是，结果将是丑陋的。此外，这样做还有另一个缺点，这与您也不应该使用 CSS 调整图像大小的原因相同。在客户端将大图像调整为较小的图像最终会极大地浪费您的网络，这样做会减慢您网站的渲染速度。这是 YSlow 的规则之一。

要使用 CSS 调整图像大小，您可以使用`max-width`和`max-height`，较大的图像将相应调整大小，较小的图像不会调整大小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T02:26:20.060

当看到你的代码时，Rails 所做的就是转

```
<%= image_tag(@syllabus.image_url, :size => "260x180") %> 
```

变成类似的东西

```
<image tag="image.jpg" width="260" height="190" ../> 
```

在页面上 (HTML)。

也就是说，如果您的代码看起来无法正常工作，请尝试为其分配一个 CSS 类：

```
.image-size {
  max-width: 300px;
  max-height: 200px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T15:20:23.057

如果您愿意，可以使用我们在云端自动调整图像大小。例如，以下命令将调整图像大小以填充 260x180 矩形。

```
<%= cl_image_tag("my_image.png", :size => "260x180", :crop => :fill) %> 
```

这篇[博](http://cloudinary.com/blog/ruby_on_rails_image_uploads_with_carrierwave_and_cloudinary)文介绍了如何使用 CarrierWave，同时所有图像都存储在云中，通过快速 CDN 交付，所有转换都在云中动态完成（无需安装 RMagick）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T02:25:55.307

在视图中，无需处理新图像？按照惯例，您将使用 CSS。

```
.image_container img {
  width: 260px;
  height: 180px
} 
```

这里有一些有趣的 CSS 裁剪方法： http: [//cssglobe.com/post/6089/3-easy-and-fast-css-techniques-for-faux-image](http://cssglobe.com/post/6089/3-easy-and-fast-css-techniques-for-faux-image)

# sharepoint - SharePoint2k7：自定义列表EditForm烦人的字段标签，如何去除？

> ID：10458219
> 
> 赞同：1
> 
> 时间：2012-05-05T02:06:11.957
> 
> 标签：sharepoint, sharepoint-2007, customization

在我的 TST 和 PRD 环境之间，我在 SharePoint 2007 上遇到了一些“奇怪”的差异。我正在自定义列表的 EditForm，我注意到我在 TST 上创建的新表单正确显示如下： ![正确的显示格式](../Images/a96e3eb7b00c5b7cf7909bb7802a8d42.png)

这是我想要的风格。但是，当我在 PRD 上执行完全相同的操作时，这就是我得到的结果，请注意额外的表单字段标签和围绕相同两个字段的包装器： ![带有额外字段容器和字段标签的显示格式不正确](../Images/7b459337e2969ee5cfa24c401df23568.png)

（生成的 html 文件的）来源也不同：

```
 Correctly displayed:

<tr><td width="190px" valign="top" class="ms-formlabel"><H3 class="ms-standardheader"><nobr>Profit Centre<span class="ms-formvalidation"> *</span></nobr></H3></td>
<td width="400px" valign="top" class="ms-formbody"><span dir="none">
        <input name="ctl00$m$g_193d5406_ba72_454b_b14c_87873ba714d6$ff5_1$ctl00$ctl00$TextField" type="text" value="ALL" maxlength="255" id="ctl00_m_g_193d5406_ba72_454b_b14c_87873ba714d6_ff5_1_ctl00_ctl00_TextField" title="Profit Centre" class="ms-long" /><br>
    </span></td></tr>
<tr><td width="190px" valign="top" class="ms-formlabel"><H3 class="ms-standardheader"><nobr>Status<span class="ms-formvalidation"> *</span></nobr></H3></td>
<td width="400px" valign="top" class="ms-formbody"><span dir="none"><select name="ctl00$m$g_193d5406_ba72_454b_b14c_87873ba714d6$ff6_1$ctl00$DropDownChoice" id="ctl00_m_g_193d5406_ba72_454b_b14c_87873ba714d6_ff6_1_ctl00_DropDownChoice" title="Status" class="ms-RadioText">
                    <option selected="selected" value="Not Yet Reconciled">Not Yet Reconciled</option>
                    <option value="Reconciled">Reconciled</option>
                    <option value="Reviewed">Reviewed</option>
                    <option value="Rejected by Reviewer">Rejected by Reviewer</option>
                    <option value="Approved">Approved</option>
                    <option value="Rejected by Approver">Rejected by Approver</option>

                </select><br></span></td></tr>

===========================================================
Annoying wrapper displayed:

<tr><td width="190px" valign="top" class="ms-formlabel"><H3 class="ms-standardheader"><nobr>Profit Centre<span class="ms-formvalidation"> *</span></nobr></H3></td>
<td width="400px" valign="top" class="ms-formbody">
<div align="left" class="ms-formfieldcontainer">
<div class="ms-formfieldlabelcontainer" nowrap="nowrap">
<span class="ms-formfieldlabel" nowrap="nowrap">Profit Centre</span></div>
<div class="ms-formfieldvaluecontainer">
<span dir="none">
        <input name="ctl00$m$g_7716bb24_9fc9_4e72_a2c6_bec888418014$ff6_1$ctl00$ctl00$TextField" type="text" value="ALL" maxlength="255" id="ctl00_m_g_7716bb24_9fc9_4e72_a2c6_bec888418014_ff6_1_ctl00_ctl00_TextField" title="Profit Centre" class="ms-long" /><br>
    </span></div></div></td></tr>
<tr><td width="190px" valign="top" class="ms-formlabel"><H3 class="ms-standardheader"><nobr>Status<span class="ms-formvalidation"> *</span></nobr></H3></td>
<td width="400px" valign="top" class="ms-formbody">
<div align="left" class="ms-formfieldcontainer">
<div class="ms-formfieldlabelcontainer" nowrap="nowrap">
<span class="ms-formfieldlabel" nowrap="nowrap">Status</span></div><div class="ms-formfieldvaluecontainer">
<span dir="none">
<select name="ctl00$m$g_7716bb24_9fc9_4e72_a2c6_bec888418014$ff7_1$ctl00$DropDownChoice" id="ctl00_m_g_7716bb24_9fc9_4e72_a2c6_bec888418014_ff7_1_ctl00_DropDownChoice" title="Status" class="ms-RadioText">
                    <option value="Not Yet Reconciled">Not Yet Reconciled</option>
                    <option selected="selected" value="Reconciled">Reconciled</option>
                    <option value="Reviewed">Reviewed</option>
                    <option value="Rejected by Reviewer">Rejected by Reviewer</option>
                    <option value="Approved">Approved</option>
                    <option value="Rejected by Approver">Rejected by Approver</option>
                </select><br></span></div></div></td></tr> 
```

如何删除额外的字段容器和相关字段标签？为什么它在这两个 SP2007 环境中表现不同？

非常感谢您的提示和回答。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:01:00.017

事实证明，这两种环境具有不同的风味。TST 环境正在运行 Microsoft.SharePoint.dll 版本 = 12.0.6421.1000 的 SharePoint Content Management Server。而 PRD 环境是企业版，Microsoft.SharePoint.dll 版本 = 12.0.6565.5001。

并感谢 Mirjam 提供了这个出色的解决方案： [http ://social.msdn.microsoft.com/Forums/en-CA/sharepointcustomization/thread/f00d37d3-2254-44fa-8f4d-ae7683c645cf](http://social.msdn.microsoft.com/Forums/en-CA/sharepointcustomization/thread/f00d37d3-2254-44fa-8f4d-ae7683c645cf)

解决方法是注入一段 CSS 样式表来覆盖这两个 OOB 类：

```
<style type="text/css">
.ms-formfieldlabelcontainer {
    display: none;
}
.ms-formfieldvaluecontainer {
    border: 0px;
    border-style:hidden;
    padding:0px;
    margin:0px;
}
</style> 
```

现在一切看起来都很棒！

# iphone - CCSprite + NSCoding

> ID：10458222
> 
> 赞同：0
> 
> 时间：2012-05-05T02:06:55.353
> 
> 标签：iphone, objective-c, cocos2d-iphone, ccsprite, nscoding

我已经对其进行了子类`NSCoding`化并添加了我的游戏特定内容，例如健康等。我已经序列化了我已经子类化的对象，但是在解码然后通过 将精灵添加到屏幕时`[self addChild:sprite]`，它无法将精灵绘制到屏幕上。我猜这是因为`CCSprite`还需要实现`NSCoding`协议所以我的问题是：

1）我对我上面的假设是否正确（我不想浪费时间实施这个解决方案才发现这不是问题） 2）最好`CCSprite`的实施方法是`NSCoding`什么？是使用类别还是只是将其子类化并强制子类实现`NSCoding`协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:24:05.127

大声笑对不起，我写的时候已经很晚了，我在清晨找到了解决方案。我遇到的问题是我将 CSSprite 的子类从一个进程发送到另一个进程，我很困惑为什么精灵没有在接收进程中显示。我发现并不是所有的精灵数据都被序列化了。我实施的解决方案是只发送我需要的信息，如坐标、图像名称等，然后在接收端从头开始重建精灵:)

# ruby-on-rails - Rails 3：如何延迟内容提交以防止用户快速发送垃圾邮件？

> ID：10458227
> 
> 赞同：1
> 
> 时间：2012-05-05T02:07:59.537
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, spam-prevention

例如，如果用户提交了一个帖子，那么他或她应该有 10 分钟的延迟时间，在此期间他或她不能提交另一个帖子。

有人可以指出一个好的宝石/教程/方法吗？作为参考，我在 Rails 3 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T02:14:21.980

如果您按用户进行跟踪，您可以保留一个名为`last_active`datetime 字段的列，并在用户提交表单时更新它。（假设没有很多形式，那么也许考虑给这些时间戳提供他们自己的模型）。

然后，只需执行日期数学，看看是否已经过去了十分钟。

`user.last_active + 10.minutes > Time.now ? "User can post" : "User cannot post"`

**注意：**不在控制台前，那可能是`10.minute`

然后你的表单逻辑：

```
def form_stuff
  //Form Logic
  @user.last_active = Time.now
end 
```

# ruby-on-rails-3 - 使用 index_by 添加重复键的属性

> ID：10458228
> 
> 赞同：0
> 
> 时间：2012-05-05T02:08:08.510
> 
> 标签：ruby-on-rails-3

在一些帮助下，我能够采用一种方法来显示项目中每天的字数，并将其减少到几乎一个数据库查询。这是方法

```
def project_range(project, start, finish, &blk)
  words = project.words.where(:wrote_on => start..finish)
  word_map = words.index_by(&:wrote_on)
  for day in start..finish
    word_count = word_map[day] ? word_map[day].quantity : 0
    blk.call(day, word_count)
  end
end 
```

原来的问题在这里：

[减少 Rails 中的数据库命中](https://stackoverflow.com/questions/7309844/reducing-database-hits-in-rails)

不过，现在我们想改变用户输入每天字数统计的方式——我们想让他们有机会在一天内输入多个字数，而不是每天只输入一个字数。但是，此方法仅返回输入的最后一天的字数，而不是该特定日期的所有字数。

我尝试将 index_by 更改为 group_by，但我得到了一个未定义的方法错误`quantity`。所以，我的问题是......我如何处理同一天的多个条目，其中有两个`wrote_on`对象，比如 2012 年 5 月 4 日？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:37:24.977

`group_by`与另一个修改一起工作。更改被注释掉。

```
def project_range(project, start, finish, &blk)
    words = project.words.where(:wrote_on => start..finish)
    #word_map = words.index_by(&:wrote_on)
    word_map = words.group_by(&:wrote_on)
    for day in start..finish
      #word_count = word_map[day] ? word_map[day].quantity : 0
      word_count = word_map[day] ? word_map[day].sum(&:quantity) : 0
      blk.call(day, word_count)
    end
  end 
```

# php - 检查sql行是否存在的方法？

> ID：10458232
> 
> 赞同：0
> 
> 时间：2012-05-05T02:09:06.483
> 
> 标签：php, mysql

我的问题是这个

我正在通过这个获取一个mysql行

```
 $sql_istorrenthere = $this->query_silent("SELECT media_type
FROM " . DB_PREFIX . "auction_media WHERE
                auction_id='" . $item_details['auction_id'] . "'"); 
$row = mysql_fetch_array($sql_istorrenthere); 
```

然后用这个调用它

```
if ($row['media_type'] == 4) 
{

        $display_output = GMSG_TORRENT;}
        else
        {
        $display_output = GMSG_NOTORRENT;
        }
} 
```

但是，media_type 有多个值，(1,2,3,4) 如何编写它以检查 4 是否存在？因为现在我相信它正在检查 media_type 是否等于 4 并且这是错误的，这给了我错误的 display_output

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:15:03.163

您可以使用 mysql_num_rows 来确定是否返回了任何行，这可以通过在查询中添加搜索条件并将“AND media_type = 4”添加到末尾

```
if(mysql_num_rows($sql_istorrenthere)) {

} else {

}

// You can loop through records by doing the following, this prints out every media type :)
while ($row = mysql_fetch_array($sql_istorrenthere)) {
    echo $row['media_type'] . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:15:59.530

```
// Comment the next line after you get what it is
@print ("Value of media type is: >>>".$row['media_type']."<<<"); // Line to be commented

if (isset($row['media_type']) && $row['media_type'] == 4) {
  $display_output = GMSG_TORRENT;
}
else {
  $display_output = GMSG_NOTORRENT;
} 
```

要获取所有媒体类型：

```
<?php
$sql_istorrenthere = $this->query_silent("SELECT media_type FROM " . DB_PREFIX . "auction_media"); 
while ($row = mysql_fetch_array($sql_istorrenthere)) {
// Comment the next line after you get what it is
  @print ("Value of media type is: >>>".$row['media_type']."<<<"); // Line to be commented

  if (isset($row['media_type']) && $row['media_type'] == 4) {
    $display_output = GMSG_TORRENT;
  }
  else {
    $display_output = GMSG_NOTORRENT;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T02:16:08.517

您可以在查询中添加“AND media_type = '4'”。但是你真的应该使用参数化查询。

一旦您的查询具有“AND media_type = '4'”，您就可以检查 RowCount。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T02:17:11.027

可能有更好的方法，但这里有一个想法。

```
$media_type_ids = explode(',', $row['media_type']);
if (array_search(4, $media_type_ids) !== FALSE) {
    // found
} 
```

甚至可以在数据库查询中就地执行此操作……可能。

# c++ - const boost::shared_ptr 的目的 & 作为函数参数？

> ID：10458235
> 
> 赞同：4
> 
> 时间：2012-05-05T02:09:12.793
> 
> 标签：c++, boost

我正在使用某个大型且维护良好的开源 C++ 库，并遇到了一个具有以下构造函数的类定义

```
class SomeClass {
    SomeClass( const boost::shared_ptr<SomeOtherClass>& );
} 
```

我的问题是：`const boost::shared_ptr<T>`通过引用传递 a 有什么意义？是否真的存在与传递按值相关的不可忽略的开销，或者传递一个我不知道的`boost::shared_ptr<T>`其他类型的危险？`boost::shared_ptr<T>`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T02:15:20.580

按值传递它会复制它，这会导致引用计数增加，并在所有线程之间同步。绝对不容忽视。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:15:37.133

您不仅避免了复制 a 的任何（轻微）开销，`shared_ptr`而且还声明了不保留指针副本的意图。我不认为你可以在`shred_ptr`不修改它的情况下复制它，并且`const`会阻止它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T02:20:15.537

如果您不需要复制，那为什么要复制？如果他们继续将其复制到正文中，那将是另一个问题。

# objective-c - 从单独的类中调用静态方法上的选择器

> ID：10458258
> 
> 赞同：6
> 
> 时间：2012-05-05T02:13:41.543
> 
> 标签：objective-c, ios5

假设我想创建以下手势识别器

```
UITapGestureRecognizer * c1 = [[UITapGestureRecognizer alloc] 
          initWithTarget:self 
          action:@selector([[MyGestureRecognizer ViewWasClicked1:]]; // error 
[c1 setNumberOfTapsRequired:1];
[c1 setNumberOfTouchesRequired:1];
[[self view] addGestureRecognizer:c1]; 
```

但我想在一个单独的类上调用选择器。我有方法：

```
+ (void)ViewWasClicked1:(UITapGestureRecognizer *)sender {    

    NSLog(@"click1 mouse down");

} 
```

在 MyGestureRecognizer 类中。我在寻找什么有可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T02:16:20.643

语法是：

```
UITapGestureRecognizer * c1 = [[UITapGestureRecognizer alloc] 
      initWithTarget:[MyGestureRecognizer class]
      action:@selector(ViewWasClicked1:)]; // error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T00:01:25.430

要检查和调用静态方法，您可以这样做：

```
SEL staticMethodSelector = @selector(methodName);
if ([[ClassName class] respondsToSelector:staticMethodSelector]) {
    [[ClassName class] performSelector:staticMethodSelector];
} 
```

# xcode - 可可：找不到 webView 对象

> ID：10458264
> 
> 赞同：0
> 
> 时间：2012-05-05T02:15:28.790
> 
> 标签：xcode, macos, xcode4, xcode4.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:57:46.940

webView 是您的窗口实例（您在 AppWindow.h 中声明的）的一个属性，因此您需要以某种方式获取对它的引用。一种方法是将此行放在 mouseUp 方法中：

WebView *webView = [(AppWindow *)self.superview.window webView];

（您还需要将“AppWindow.h”导入ButtonStyle.m）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:28:23.837

您尚未声明在该方法`webView`中可见的名为的变量。`mouseUp:`

如果您有该名称的属性，则需要使用属性语法访问它：`self.webView`，而不是`webView`.

否则，请确保您正确命名了变量，您使用您给它的名称来引用它，您在正确的位置声明它，并且您在声明它的范围内使用它。

如果您打算`webView`作为局部变量存在（仅存在于 中`mouseUp:`），则需要在同一方法中在突出显示的消息上方声明它，并为其分配一个 WebView。

如果您打算`webView`成为一个实例变量，那么您需要在 ButtonStyle 类的实例变量部分中声明它，并在`mouseUp:`之前调用的任何一个或更可能的另一个方法中为其分配一个 WebView。

如果你想在 nib 中创建 WebView，那么你应该声明`webView`为一个 outlet 属性，并使用我上面展示的属性访问语法来访问它。

# algorithm - 循环遍历最多 k 位 ON 的整数的最佳方法是什么？

> ID：10458267
> 
> 赞同：6
> 
> 时间：2012-05-05T02:15:52.370
> 
> 标签：algorithm

我需要遍历所有最多有 k 位 ON（位 1）的 n 位整数，其中 0 < n <= 32 和 0 <= k <= n。例如，如果 n = 4 且 k = 2，则这些数字为（二进制）：0000、0001、0010、0100、1000、0011、0101、0110、1001、1010、1100。这些数字的顺序是循环并不重要，但每个只访问一次。

目前我正在使用这个简单的算法：

```
for x = 0 to (2^n - 1)
    count number of bits 1 in x
    if count <= k
        do something with x
    end if
end for 
```

我认为这种算法效率低下，因为它必须遍历太多数字。例如，如果 n = 32 且 k = 2，则它必须遍历 2^32 个数字才能仅找到 529 个数字（具有 <= 2 位 1）。

我的问题是：有没有更有效的算法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T02:42:47.227

您将需要制作自己的按位计数算法来增加循环计数器。基本上，为了计算序列中的下一个数字，如果少于 k 个“1”位，则正常递增，如果有 k 个“1”位，则假设最低有效“1”之后的“0”位不存在正常存在并递增。

另一种说法是，使用标准计数器，您将最低有效位加 1 并进位。在您的情况下，当有 k 个“1”时，您会将 1 添加到最低的“1”位。

例如，如果 k 是 2 并且您`1010`忽略了最后一个`0`并增加了，`101`那么您得到`110`然后添加`0`for `1100`。

这是用于增加数字的伪代码：

```
Count 1 bits in current number
If number of 1's is < k
  number = number + 1
Else
  shift_number = number of 0 bits after least significant 1 bit
  number = number >> shift_number
  number = number + 1
  number = number << shift_number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:38:22.133

以[Bit hack 的答案来生成具有给定数量 1 的所有整数](https://stackoverflow.com/questions/8281951/bit-hack-to-generate-all-integers-with-a-given-number-of-1s)并循环`[1,k]`。这将生成每个具有最多`k`位的整数一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T03:14:39.407

组合学。

如果您有具有`n`位长度和`r`位设置的整数，那么就有`nCr`这样的数字。只需使用组合生成器并根据需要迭代组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T02:43:29.280

如果必须在 4 中设置 2 位，则设置的最低位最多必须是第三位（从 0...3 开始计数），最高位必须至少是第二位。

所以你可以循环2个循环

```
for lowest in 0 to (n-k)
  for highest in lowest + 1 to 3 
    (0000).setBit (lowest).setBit (highest) 
```

由于您不想为 16 位编写 16 个循环，因此您可以将这个想法转换为递归的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-05T02:57:14.893

您可以使用如下所示的 while 循环。这个循环只会循环没有位。如果你的位数是固定的，你可以使用休息

```
countbits = 0
while num > 0
    num = num & (num-1)
    countbits = countbits + 1
end while 
```

例如：
如果 64(1000000) 它将只循环一次，
如果 72(1001000) 则循环 2 次

# jquery - Fancybox 2.0 缓动和动画

> ID：10458268
> 
> 赞同：1
> 
> 时间：2012-05-05T02:15:55.100
> 
> 标签：jquery, fancybox, jquery-animate, easing

是否可以提供一些关于如何在 fancybox 2.0 中使用 nextEasing 和 prevEasing 参数的示例？如果我添加缓动插件 1.3，然后我使用像 easeInCubic 这样的缓动动画值，则不会发生任何事情。如何实现新型转型。

当我从一张图片滑到另一张图片时，我还希望在这个新版本 2.0 中具有与之前版本 1.3.4 相同的调整大小/调整框架的效果。

```
$("a.image").fancybox({
    arrows   : true,
    loop       : false,
    openEffect : 'none',
    closeEffect: 'none',
    prevEffect : 'fade',
    nextEffect : 'fade',
    prevEasing : 'easeInCubic',
    nextEasing : 'easeInCubic',
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T09:11:16.227

我试图使用 easing 选项，但我没有发现文档在 fancybox 网站上具有所有允许的值，我只能找到：

> 每种过渡类型的缓动方法。**如果**easing 插件包含在
> String中，你有很多选择；默认值：“摇摆”

如果我尝试使用值“easeInCubic”，我可以在浏览器的 Javascript 控制台中看到：

```
Uncaught TypeError: Object #<Object> has no method 'easeInCubic' jquery-latest.min.js:6 
```

不确定它是否也是您的情况，但您需要确保包含/激活缓动插件，这不是花哨的盒子的一部分，通过添加这个

```
<!-- Easing plugin -->
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js" /> 
```

在我的 HTML 顶部解决了 Javascripts 错误。看一下[这个演示会](http://jqueryui.com/resources/demos/effect/easing.html)显示每个值的作用。默认值和默认值之间的差别`easeInCubic`不是很大。

也就是说，对于您想要实现的目标，此选项似乎不是一个好选项，您可以在[此 demo](http://jsfiddle.net/PwMjP/)中找到一个示例，这似乎更合适。

# c++ - 类树与结构树节点

> ID：10458270
> 
> 赞同：1
> 
> 时间：2012-05-05T02:16:03.853
> 
> 标签：c++, class, tree

我有两个独立的程序，都处理带有中缀和后缀的表达式树。一种基于结构，另一种基于类。现在我被困在我的作业部分（对于课堂版本）说：

> “完成 createExpressionTree() 方法的实现”

然后

> “它与您之前的实现非常相似，只是您将使用“类树”的实例而不是“结构树节点”的实例。”

两者都比下面的内容更多，但我认为您可以了解事情的要点，所以我要问的是：类实现与结构一有多相似？我可以复制并粘贴下面显示的旧代码并进行微调吗？我一直在尝试，但在访问私人成员等方面存在问题。

所以这是类树和我应该与之配套的新版本 createExpressionTree

```
#ifndef TREE_H
#define TREE_H

#include <vector>
#include <stack>
#include <sstream>
#include <map>
# define TYPE_NUMBER 0
# define TYPE_VARIABLE 1
# define TYPE_OPERATOR 2

class Tree
{
public:
Tree(std::string input,Tree *leftSubTree=NULL,Tree *rightSubTree=NULL);
Tree(const Tree &inTree);   //COPY CONSTRUCTOR
~Tree(); //DESTRUCTOR

int evaluate(std::map< std::string, int > ipMap); //EVALUATE THE EXPRESSION
void postOrderPrint();
void inOrderPrint();

private:
Tree *leftPtr;
std::string Op;
Tree *rightPtr;
int NodeType;

}; 
```

与树类关联的代码

```
Tree::Tree(std::string input,Tree *leftSubTree,Tree *rightSubTree){
Op = input;
leftPtr = leftSubTree;
rightPtr = rightSubTree;
int num;
if (input == "+"|input == "-"|input == "*"|input == "/")
            NodeType = TYPE_OPERATOR;
else if(std::istringstream(Op)>>num)
    NodeType = TYPE_NUMBER;
else
    NodeType = TYPE_VARIABLE;
}
// copy constructor

Tree::Tree(const Tree &inTree){
Op = inTree.Op;
NodeType = inTree.NodeType;

if (inTree.leftPtr == NULL){
   leftPtr = NULL;
}
else {
   leftPtr =  new Tree(*(inTree.leftPtr));
}
if (inTree.rightPtr == NULL){
   rightPtr = NULL;
}
else {
   rightPtr =  new Tree(*(inTree.rightPtr));
}
}

// tree destructor

Tree::~Tree(){
std::cout << "Tree destructor called" << std::endl;

if (leftPtr != NULL) {
    delete(leftPtr);
    leftPtr = NULL;
}
if (rightPtr != NULL) {
    delete(rightPtr);
    rightPtr = NULL;
}

}

#endif 
```

新的 createExpressionTree 我希望得到一些帮助：

```
void arithmetic_expression::createExpressionTree(std::vector<std::string> expression)
{
std::stack <Tree> localStack;
std::string Op;
//Very similar to old implementation 
} 
```

并且这里是之前实现的结构treeNode和之前完成的createExpressionTree

```
struct treeNode {
treeNode *leftPtr;     /* pointer to left subtree */
std::string Op;                     /* integer data value */
treeNode *rightPtr;    /* pointer to right subtree */
};
typedef struct treeNode TreeNode;
typedef TreeNode * TreeNodePtr; 
```

以前的 createExpressionTree

```
void arithmetic_expression::createExpressionTree(std::vector<std::string> expression)
{
std::stack <TreeNodePtr> localStack;
std::string Op;
TreeNodePtr ptr;

for(int i=0; i<expression.size();i++)
{

    Op = expression[i];

    ptr = createNewTreeNode(Op);

    if(char_is_operator(Op))
    {

        // adding element to right tree
        if (localStack.empty())
        {
            std::cout<< "Invalid expression: tree not created  " << std::endl;
            topPtr = NULL;
            return;
        }
        else
        {
            ptr->rightPtr = localStack.top();
            localStack.pop();
        }

        // adding element to left tree
        if (localStack.empty()) {
            std::cout<< "Invalid expression: tree not created  " << std::endl;
            topPtr = NULL;
            return;
        }
        else
        {
            ptr->leftPtr = localStack.top();
            localStack.pop();
        }

    }
    // pushing element to stack
    localStack.push(ptr);
}

if (localStack.empty()) {
    std::cout<< "Invalid expression: tree not created  " << std::endl;
    topPtr = NULL;
}
else
{
    topPtr = localStack.top();
    localStack.pop();
    if (!localStack.empty()) {
        std::cout<< "Invalid expression: tree not created  " << std::endl;
        topPtr = NULL;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:34:10.813

我认为类和结构版本之间没有任何区别（结构和类之间的唯一区别是类默认情况下具有私有数据）。

如果他只是想让你把“struct”这个词改成“class”，那么你可以使用访问修饰符“public”来访问leftPtr/rightPtr

例子：

```
struct blah
{
  int boringNumbers;
  string boringStrings;
}; 
```

是相同的：

```
class blah2
{
public:
  int boringNumbers;
  string boringStrings;
}; 
```

* * *

但是，他可能还希望您设计应用程序以将更多代码移动到类中。

这至少包括将功能移动`char_is_operator`到类中。

我对此表示怀疑，但他/她可能还希望您创建节点层次结构，因此您不需要将数据存储为通用字符串。

# apache2 - 如果同时运行其他脚本，则从 crontab 运行的 php 脚本超时

> ID：10458278
> 
> 赞同：1
> 
> 时间：2012-05-04T23:17:00.153
> 
> 标签：apache2, cron, crontab, amazon-s3, zend-framework

我的房间里有一台带有双核处理器和基本互联网的服务器（没什么花哨的）

我正在运行 ubuntu 11.04，并且正在从 crontab 运行 php 脚本。

```
0 3 * * * php back_up_to_s3.php 
```

此脚本运行大约需要 20-30 分钟。从 crontab 运行时它工作正常，但是如果我与其他需要大约 5-10 分钟才能运行的脚本同时运行它。

```
0 3 * * * php back_up_to_s3.php
0 3 * * * php do_this.php
0 3 * * * php do_that.php 
```

它没有完成。我的猜测是它正在超时。这里是来源`back_up_to_s3.php`

```
include('Zend/Service/Amazon/S3.php');
include("connect_to_database.php");

$my_aws_key = '******';
$my_aws_secret_key = '******';
Zend_Service_Amazon_S3::setKeys($my_aws_key, $my_aws_secret_key);
$s3 = new Zend_Service_Amazon_S3();

$fileName = exec("date +'%m_%d_%y'") . '.tar';

$filePath ="/home/me/temp_db_backups/$fileName";

exec("mysqldump -h localhost -u root -ppassword DATABASE_NAME > $filePath");

$s3->putObject('myBucket/' . $fileName, file_get_contents($filePath),
    array(Zend_Service_Amazon_S3::S3_ACL_HEADER =>
            Zend_Service_Amazon_S3::S3_ACL_PRIVATE,            
            Zend_Service_Amazon_S3::S3_CONTENT_TYPE_HEADER =>
            'audio/mpeg'
));                   

unlink($filePath); 
```

我知道脚本没有完成，因为 tarred 备份没有出现在我的 s3 存储桶中。但是 tar 文件被创建并且仍在我的文件中，`/home/me/temp_db_backups`所以我知道脚本在`$s3-putObject`执行时终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:54:43.720

你好 LedZeppelin（怀疑我是否会这么说:)
与其猜测可能发生的事情，不如将输出重定向到一个日志文件，你肯定会知道

```
0 3 * * * php back_up_to_s3.php >/tmp/backup_cronoutput 2>&1
0 3 * * * php do_this.php >/tmp/do_this_cronoutput 2>&1
0 3 * * * php do_that.php >/tmp/do_that_cronoutput 2>&1

```

# iphone - 将 plist mutablearray 中的字符串与相同的字符串进行比较。说不相等

> ID：10458284
> 
> 赞同：0
> 
> 时间：2012-05-05T02:19:23.323
> 
> 标签：iphone, objective-c, xcode, nsmutablearray, plist

绝对令人困惑的问题，如果我尝试将可变数组中的字符串从外部 plist 与字符串进行比较，相同的字符串拒绝承认它们是相同的。但是，如果我直接使用其中的字符串创建可变数组，然后尝试比较，它会说它们是相同的。

一个例子可能更简单：

```
NSString *dragDocPath = [documentsDirectory stringByAppendingPathComponent:@"draggable.plist"];

NSMutableArray *dragArray1 = [[NSMutableArray alloc] initWithContentsOfFile:dragDocPath];

NSString *s1 = [dragArray1 objectAtIndex:0]; //This is <string>skip</string> and checked with logging

NSString *s2 = @"skip";

if (s1==s2) {  //do this 
}

else { //do the other important thing 
} 
```

毫无疑问，它会执行后者并且拒绝看到 s1==s2

但是，我后来做到了

```
 NSMutableArray *dragArray1 = [[NSMutableArray alloc] init];

[dragArray1 addObject:@"skip"];

NSString *s1 = [dragArray1 objectAtIndex:0];

NSString *s2 = @"skip"; 
```

结果没问题。我在之前的测试项目中注意到了这一点，但假设我做的事情显然是错误的，所以离开了它。

我很困惑

我的 plist 文件是（并且它们适用于我可以为其中的数组找到的所有其他用途）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"     "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>

<string>skip</string>

</array>
</plist> 
```

任何帮助，指出明显的缺陷等......将不胜感激

我应该补充一点，我在每一步都将它记录到第 n 级，上面写着“第一个是跳过”，“第二个是跳过”和“跳过不等于跳过”......

编辑：由于下面的回答，问题解决了。始终使用 isEqualToString

例如： if([s1 isEqualToString:s2]){....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T02:23:15.173

这不是您比较字符串的方式，您实际上是在比较指针（它们是不同的）。你应该使用 isEqualToString：

# c# - AutoCompleteExtender 每次都显示所有 500 个选项

> ID：10458285
> 
> 赞同：1
> 
> 时间：2012-05-05T02:19:30.233
> 
> 标签：c#, asp.net, autocompleteextender

我有一个带有 AutoCompleteExtender 的文本框，而不是使用 Web 服务，我只是在代码后面有一个方法，它从 xml 中提取字符串名称列表。现在，每次您从文本框开始时，AutoCompleteExtender 都会显示其中包含所有 500 个名称。也没有顺序（例如，如果我输入“Riha”开始输入“Rihana”，您会认为只有以“Riha”开头的字符串会显示，但所有 500 个字符串都会显示，甚至没有任何顺序。我试过了设置 CompletionSetCount="5" ，但没有运气。有一个简单的解决方法吗？

我认为这部分代码运行正常......

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static List<string> GetNames(string prefixText, int count)
{
    XmlDocument xmlArtist = new XmlDocument();        
    xmlArtist.Load(string.Format(" http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key={0}&limit=500",  key));
    List<string> topartists = new List<string>();
             foreach (XmlNode node in xmlArtist.SelectNodes("lfm/artists/artist"))
             {                     
                 topartists.Add(node.SelectSingleNode("name").InnerText.ToString());
             }
             return topartists;            
} 
```

这是.aspx代码

```
 <asp:TextBox ID="txtEnterBand" runat="server" CssClass="txtbox" Width="400px"  >     </asp:TextBox>
<asp:AutoCompleteExtender ID="txtEnterBand_AutoCompleteExtender" runat="server" TargetControlID="txtEnterBand" ServiceMethod="GetNames" UseContextKey="true" ServicePath="" MinimumPrefixLength="1" CompletionSetCount="5"></asp:AutoCompleteExtender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:18:41.097

```
GetNames（字符串前缀文本，整数计数，字符串 contextKey）
{
   返回到partists.Take(count).ToList();
}

```

在源页面中：

```
<asp:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" 
UseContextKey="True"  TargetControlID="txtAuto" ServiceMethod="SearchCustomers" 
MinimumPrefixLength="2" CompletionInterval="100" EnableCaching="false" 
CompletionSetCount="10" FirstRowSelected="false" 
OnClientItemSelected="ClientItemSelected">
</asp:AutoCompleteExtender> 
```

`UseContextKey="True"`在`<asp:AutoCompleteExtender>`标签中添加此属性。

# php - 这个 SQL 语句有什么问题导致列计数与第 1 行的值计数不匹配？

> ID：10458287
> 
> 赞同：1
> 
> 时间：2012-05-05T02:19:39.520
> 
> 标签：php, mysql

Mysql表（migration_terms）字段如下

```
oldterm   count    newterm  seed 
```

我使用了以下创建表语句。

```
CREATE TABLE `migration_terms` 
    ( 
      `oldterm` varchar(255) DEFAULT NULL, 
      `count` smallint(6) DEFAULT '0', 
      `newterm` varchar(255) DEFAULT NULL, 
      `seed` int(11) NOT NULL AUTO_INCREMENT, PRIMARY KEY (`seed`) 
    )   ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

它有效，没有问题。

但是当我使用以下`insert into`语句填充它时；

```
"INSERT INTO migration_terms 
     SELECT looseterm as oldterm, 
            COUNT(seed) AS count 
            FROM looseterms 
            GROUP BY looseterm 
            ORDER BY count DESC " 
```

我收到此错误；

```
 Column count doesn't match value count at row 1 
```

我不知道为什么？

如果您需要looseterms 表的表结构，它是由以下create table 语句创建的。

```
CREATE TABLE looseterms
(
     `seed` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
     `looseterm` varchar(255)
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T02:21:21.470

如果您的 select 语句的列数少于表，则需要指定列

```
"INSERT INTO migration_terms 
        (oldterm, 
         count) 
SELECT looseterm   AS oldterm, 
       Count(seed) AS count 
FROM   looseterms 
GROUP  BY looseterm 
ORDER  BY count DESC  " 
```

从[MySql 文档插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

> 如果您没有为 INSERT ... VALUES 或 INSERT ... SELECT 指定列名列表，则表中每一列的值必须由 VALUES 列表或 SELECT 语句提供。如果您不知道表中列的顺序，请使用 DESCRIBE tbl_name 查找。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T02:21:12.013

您的插入添加了 2 列数据，而表的定义有 4 列

# ruby - 在 Vim 中使用 Ctags 跳转到 Ruby bang 方法

> ID：10458291
> 
> 赞同：7
> 
> 时间：2012-05-05T02:21:21.107
> 
> 标签：ruby, vim, ctags

我在使用 Exhuberant Ctags 跳转到 Ruby bang 方法时遇到问题。我搜索了其他有类似问题的人，但找不到任何东西。可以使用以下小型 Rub​​y 类显示该问题的示例：

```
class Hello
  def start
    method!
  end

  def method
    # Blah
  end

  def method!
    # Blah
  end
end 
```

在`ctags -R .`此文件上运行时，生成的`tags`文件包含以下 2 行，表明在生成时发现了这两种方法：

```
method  test.rb /^  def method$/;"  f   class:Hello
method! test.rb /^  def method!$/;" f   class:Hello 
```

但是，如果我将光标放在第`method!`3 行的调用上并按下，`^]`那么光标会跳转到`method`定义而不是正确的 bang 版本。似乎感叹号未包含在搜索的标识符中。

有没有办法解决这个问题，以便跳转到正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-25T22:03:28.383

我意识到这已经过时了，但我在 Vim 8.0 和 Neovim 中都遇到了同样的问题。如果我`:tag mymethod!`从 vim 的命令行输入，它会找到相关的标签，但如果我尝试**`<C-]>`**将光标放在方法名称上，它会出错（注意它搜索的名称`E426: tag not found: mymethod`中缺少）。`!`

您可以通过添加`!`到 Ruby 语法中被识别为关键字字符的字符列表来解决此问题：

```
:set iskeyword+=! 
```

您可以将`~/.vim/after/syntax/ruby.vim`其添加到您打开的任何 Ruby 文件中。不过我还没有测试过，所以不能说它是否会对其他任何事情产生不利影响。我知道它会改变单词跳跃行为。**`w`**例如，会将 the`!`视为“小”字的一部分。

再想一想，它肯定会处理不当之类的事情`!some_test`。如果你**`<C-]>`**用光标点击那里的任何地方，它会搜索一个名为 的方法`!some_test`，这绝对不是你想要的。更好的解决方案是围绕 Ruby 文件的标记查找编写一个包装函数。我实际上正在为此做一些事情，所以当我有一些像样的东西时我会发布。

*更新*：我发现了一个非常简单的解决方法：

```
nnoremap <buffer><silent> <C-]> :tag <C-R><C-W><CR> 
```

出于某种原因，**`<C-R><C-W>`**命令行模式下的行为与 的行为不同`expand('<cword>')`，并且可以说与文档不同。即使`!`不是`'iskeyword'`字符，`expand('<cword>')`结果为`mymethod`，**`<C-R><C-W>`**结果为`mymethod!`。这同样适用于`is_this_your_method?`。您可以通过将以下内容放入以下内容来应用此解决方法`~/.vim/ftplugin/ruby.vim`：

```
nnoremap <buffer><silent>  <C-]> :tag     <C-R><C-W><CR>
nnoremap <buffer><silent>     g] :tselect <C-R><C-W><CR>
nnoremap <buffer><silent> g<C-]> :tjump   <C-R><C-W><CR> 
```

*更新 2*

事实证明 的特殊行为`<C-R><C-W>`是由 vim-ruby 提供的（并且默认包含在 Vim 的运行时文件中）。该脚本自定义`<C-R><C-W>`并添加了一个`<Plug><cword>`映射以正确识别 Ruby 游标标识符。我只是遇到了处理不当，`!`因为在添加我发现更舒适的键绑定时，我无意中破坏了 vim-ruby 已经提供的映射：

```
nnoremap <C-.> <C-]> 
```

如果我这样做了`nmap`，vim-ruby 的映射本可以完成它的工作。或者，您可以利用 vim-ruby 提供的功能（在 ruby​​ ftplugin 文件中）：

```
nnoremap <buffer><silent>  <C-]> :<C-U>exe v:count1."tag <Plug><cword>"<CR>
nnoremap <buffer><silent>     g] :<C-U>tselect <Plug><cword><CR>
nnoremap <buffer><silent> g<C-]> :<C-U>tjump   <Plug><cword><CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T03:54:18.427

您可以随时使用`:tag`：

```
 :tag method! 
```

或视觉模式 - 如果您在点击**^]之前突出显示任何文本（使用****v** + 移动），它将使用突出显示的文本作为标记，而不是尝试在光标下找到“标识符”。因此，如果您的光标位于in上，则**`m``method!`**

 **```
 vE^] 
```

应该做的伎俩。如果您的光标在单词的其他位置，`b`请先点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T10:55:36.277

在我发布这个问题时，我正在使用 MacVim 快照 63。我现在正在使用快照 72，问题已经消失。我可以在这里给出的唯一建议是升级您正在使用的 Vim 版本。**

# ruby-on-rails - 来自不同视图控制器的过期页面缓存？

> ID：10458296
> 
> 赞同：0
> 
> 时间：2012-05-05T02:22:03.977
> 
> 标签：ruby-on-rails, ruby, activeadmin

我是一个小菜鸟，有这种情况。我有一个模型：类别。这些类别是通过出色的 activeadmin 进行编辑的。

现在，我正在构建这个 Rails 应用程序作为 iOS 应用程序的后端。结果，这些类别将被大量查询，因此我想缓存它们。但问题是：当通过activeadmin添加或编辑类别时，我需要找到一种清除缓存的方法。

我正在使用页面缓存：`caches_page :index`在类别视图控制器中`categories_controller.rb`

我做了一些挖掘，看起来 ActiveAdmin 没有在我的控制器中调用 create 方法。它实际上有它自己的创建方法`app/admin/categories.rb`

我需要找到一种方法将消息从管理员的 create 方法发送到视图控制器，以便我可以使缓存过期。我该怎么做呢？这是一种不好的方法吗？我做错了？

谢谢，

-大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:09:15.520

你的答案是扫地机！[http://guides.rubyonrails.org/caching_with_rails.html#sweepers](http://guides.rubyonrails.org/caching_with_rails.html#sweepers)

# apache - 使用 mod_rewrite 和脚本语言限制对文件的未经身份验证的访问

> ID：10458302
> 
> 赞同：1
> 
> 时间：2012-05-05T02:23:38.857
> 
> 标签：apache, authentication, mod-rewrite, file-access

我已经在网上寻找答案，但似乎没有一个与我想要达到的目标相似。因此，我希望stackoverflow的专家可以帮助我。

**我想要完成什么？** 我想限制非授权用户对内容的访问。非授权用户可访问的内容将在白名单中指定。所有其他内容都被列入黑名单。

**我的环境是什么？** 我将 Apache 与一种与 PHP 非常相似的脚本语言一起运行。脚本语言不会被很多人知道，但它是 Fazzt（如果你知道并且能够推断出它与 PHP 相比的差异......没有指针/内存管理、十进制值和二进制数据） . 由于项目的性质，我必须使用这个环境。

**网站上发生了什么？** 该站点对用户进行身份验证并将身份验证存储在会话中。未经身份验证的用户会看到一个样式化的（包含图像、css、js 等）网页。因此，我需要将所有静态图像、css、js 文件列入白名单，以便客户端浏览器可以下载它们。登录后，会显示更广泛的动态内容（因此，任何未列入白名单的内容都会自动列入黑名单）。

**我打算如何解决这个问题？** 这很愚蠢，但我想并不总是很明显。我的方法涉及 mod_rewriting 对与 .fzt 和 .fsp 页面不匹配的现有文件的所有请求。重写将转到一个脚本文件，该文件将根据白名单检查请求的文件。如果该文件存在于列表中，则请求将直接路由到该文件（是的，我很傻……它会再次被 mod_rewritten >_< ）。如果它不在列表中，将检查用户的身份验证。如果用户未通过身份验证，则会返回“未找到文件”HTTP。否则，请求将被重定向到文件并提供服务（同样愚蠢）。

如您所见，这种方法存在很大缺陷。但是，我确信某些性质的东西应该是可能的……但是，我还没有找到任何证据。你怎么看？mod_rewrite / script 是执行此任务的完全错误的方式吗？否则你会怎么做？请注意，我不能简单地将 .htaccess 作为由 Fazzt 跟踪的用户身份验证确定的访问权限（阅读上文，类似于 PHP 的脚本语言）。

任何建议或想法将不胜感激！

# xcode - xcode 应用程序：safari 不会去应用商店链接

> ID：10458303
> 
> 赞同：0
> 
> 时间：2012-05-05T02:24:09.590
> 
> 标签：xcode, hyperlink, app-store

我在 iPhone 应用程序（xcode 4.2）的按钮上放了一个链接。该链接确实打开了一个到其他网站的 Safari 窗口，但没有打开到特定应用程序的 iTunes 预览页面。如果直接在代码中输入链接，则会出现此问题。它也发生在到应用商店页面的间接链接上——即一个带有到 iTunes 应用页面的工作链接的页面可以从 Mac 本身的 Safari 那里很好地到达那里，但当页面在 iPhone 模拟器上加载时并没有链接被点击。有任何想法吗？

# lua - 获取lua中函数的参数名称

> ID：10458306
> 
> 赞同：3
> 
> 时间：2012-05-05T02:25:26.017
> 
> 标签：lua

当调用像这样的lua函数时

PrintMe（我的变量名）

我希望能够实际打印“MyVariableName”而不是它的值（嗯，用于演示目的）。

显然我可以只传递字符串，但这需要额外的引号，我也想打印它的值。

例如，

```
MyVariable = 4
PrintVariable(MyVariable) 
```

将打印“MyVariable is 4”或其他

我不想重复名称和变量，例如

```
PrintVariable(MyVariable, "MyVariable") 
```

因为这是不必要的重复。

lua可以处理吗？

我现在正在做的是在引号中传递变量名并使用 loadstring 来获取值，但我想直接传递变量而不需要额外的不必要的引号（我认为 debug.getlocal 做了但它最终返回了值而不是名称）。

* * *

这是模拟示例

```
function printme1(var, val)
    print(var.." = "..val)
end

function printme2(v)
    local r
    loadstring("r = "..v)() -- equivalent to r = a but must be used since v is a string representing a and not the object a
    print(v.." = "..tostring(r))
end

function printme3(v)
    -- unknown
end

a = 3

printme1("a", a)
printme2("a")
printme3(a) 
```

在这种情况下，所有 3 都应该打印相同的东西。printme3 显然是最方便的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T05:24:10.613

您不能说`PrintVariable(MyVariable)`，因为 Lua 无法确定使用哪个变量（如果有的话；可以使用常量）将参数传递给您的函数。但是，您*可以*说`PrintVariable('MyVariable')`然后使用调试 API 在调用者的范围内查找具有该名称的局部变量：

```
function PrintVariable(name)
  -- default to showing the global with that name, if any
  local value = _G[name]

  -- see if we can find a local in the caller's scope with that name
  for i=1,math.huge do
    local localname, localvalue = debug.getlocal(2,i,1)
    if not localname then
      break -- no more locals to check
    elseif localname == name then
      value = localvalue
    end
  end

  if value then
    print(string.format("%s = %s", name, tostring(value)))
  else
    print(string.format("No variable named '%s' found.", name))
  end
end 
```

现在你可以说：

```
PrintVariable('MyVariable') 
```

而在这种情况下将打印“MyVariable = 4”。

* * *

不，如果您*真的*想在没有引号的情况下执行此操作，您可以检查调用者的本地变量是否具有提供的值，但如果调用者的范围内有多个变量，这有时会给您错误的变量名称给定的值。话虽如此，您可以这样做：

```
function PrintVariable(value)
  local name

  -- see if we can find a local in the caller's scope with the given value
  for i=1,math.huge do
    local localname, localvalue = debug.getlocal(2,i,1)
    if not localname then
      break
    elseif localvalue == value then
      name = localname
    end
  end

  -- if we couldn't find a local, check globals
  if not name then
    for globalname, globalvalue in pairs(_G) do
      if globalvalue == value then
        name = globalname
      end
    end
  end

  if name then
    print(string.format("%s = %s", name, tostring(value)))
  else
    print(string.format("No variable found for the value '%s'.", tostring(value)))
  end
end 
```

现在你可以说`PrintVariable(MyVariable)`，但是如果在调用者的作用域中碰巧有另一个具有 value 的变量`4`，并且它发生在之前`MyVariable`，那么将打印*那个变量名。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:01:14.930

我有个坏消息，我的朋友。您可以访问出现在函数顶部的函数参数名称，但不存在用于准确访问它们在调用函数中命名的数据。请参阅以下内容：

```
function PrintVariable(VariableToPrint)
  --we can use debug.getinfo() to determine the name 'VariableToPrint'
  --we cannot determine the name 'MyVariable' without some really convoluted stuff (see comment by VBRonPaulFan on his own answer)
  print(VariableToPrint);
end

MyVariable = 4
PrintVariable(MyVariable) 
```

为了说明这一点，想象一下如果我们这样做了：

```
x = 4
MyVariable = x
MyOtherVariable = x
x = nil

PrintVariable(MyVariable) 
```

现在，如果你是 Lua，你会在元数据中为最终传递给函数的变量附加什么名称？是的，您可以使用 debug.getint() 向上查找传入的变量，但您可能会找到几个引用。还要考虑：

```
PrintVariable("StringLiteral") 
```

你会怎么称呼那个变量？它有一个值但没有名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T04:40:58.093

你可以用调试库做这样的事情......这样的事情你似乎正在寻找：

```
function a_func(arg1, asdf)
    -- if this function doesn't use an argument... it shows up as (*temporary) in 
    -- calls to debug.getlocal() because they aren't used...
    if arg1 == "10" then end
    if asdf == 99 then end
    -- does stuff with arg1 and asdf?
end

-- just a function to dump variables in a user-readable format
function myUnpack(tbl)
    if type(tbl) ~= "table" then
        return ""
    end

    local ret = ""
    for k,v in pairs(tbl) do
        if tostring(v) ~= "" then
            ret = ret.. tostring(k).. "=".. tostring(v).. ", "
        end
    end
    return string.gsub(ret, ", $", "")
end

function hook()
    -- passing 2 to to debug.getinfo means 'give me info on the function that spawned 
    -- this call to this function'. level 1 is the C function that called the hook.
    local info = debug.getinfo(2)
    if info ~= nil and info.what == "Lua" then
        local i, variables = 1, {""}
        -- now run through all the local variables at this level of the lua stack
        while true do
            local name, value = debug.getlocal(2, i)
            if name == nil then
                break
            end
            -- this just skips unused variables
            if name ~= "(*temporary)" then
                variables[tostring(name)] = value
            end
            i = i + 1
        end
            -- this is what dumps info about a function thats been called
        print((info.name or "unknown").. "(".. myUnpack(variables).. ")")
    end
end

-- tell the debug library to call lua function 'hook 'every time a function call
-- is made...
debug.sethook(hook, "c")

-- call a function to try it out...
a_func("some string", 2012) 
```

这导致输出：

```
a_func(asdf=2012, arg1=some string) 
```

你可以做一些更漂亮的东西来美化它，但这基本上涵盖了如何做你所要求的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:47:30.640

你可以使用这种形式：

```
local parms = { "MyVariable" }

local function PrintVariable(vars)
   print(parms[1]..": "..vars[1])
end

local MyVariable = "bar"

PrintVariable{MyVariable} 
```

这使：

```
MyVariable: bar 
```

它不是通用的，但很简单。您可以通过这种方式避免调试库和加载字符串。如果你的编辑器不错，你可以写一个宏来做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T00:57:21.963

另一种可能的解决方案是您自己添加此设施。Lua C API 和源代码非常简单且可扩展。

我/我们不知道您的项目/工作的背景，但如果您正在制作/嵌入自己的 Lua 构建，您可以扩展`debug`库以执行此操作。

Lua 通过引用传递它的值，但不知道这些值是否包含字符串名称以及是否易于访问。

在您的示例中，值声明与以下内容相同：

```
_G["MyVariable"] = 4 
```

因为它是全球性的。如果它被声明了，`local`那么就像这里所说的其他人一样，您可以通过`debug.getlocal()`. 但同样在实际引用上下文的 C 上下文中，它可能并不重要。

实现一个`debug.getargumentinfo(...)`使用名称键值对扩展参数表的 a。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-15T10:14:05.893

这是一个相当古老的话题，我很抱歉让它重新焕发生机。

根据我使用 lua 的经验，我所知道的最接近 OP 要求的是这样的：

```
PrintVariable = {}
setmetatable(PrintVariable, {__index = function (self, k, v) return string.format('%s = %s', k, _G[k]) end})

VAR = 0
VAR2 = "Hello World"

print(PrintVariable.VAR, PrintVariable.VAR2)
-- Result: VAR = 0  VAR2 = Hello World 
```

我不做更多解释，因为代码可读性很强，但是：这里发生的事情很简单，您只需为`PrintVariable`变量设置一个元表并添加`__index`当表被迫在其索引中搜索值时调用的元方法，多亏了这个功能，您可以实现您在示例中看到的内容。

参考：[https ://www.lua.org/manual/5.1/manual.html](https://www.lua.org/manual/5.1/manual.html)

我希望未来和新的访问者会发现这很有帮助。

# ruby-on-rails - 试图在一个简单的字段中接收电子邮件，得到未定义的方法“signups_path”错误

> ID：10458307
> 
> 赞同：0
> 
> 时间：2012-05-05T02:25:37.193
> 
> 标签：ruby-on-rails, ruby, forms, input

我有一个在 home.html.erb 加载并由页面控制器控制的页面。

在页面中，我有一个表单，它是一个用于获取电子邮件地址的字段。

我得到的错误是：

```
undefined method `signups_path' 
```

这是我的代码供您参考，我不确定如何准确定义路线的去向。

Home.html.erb 包含这种形式：

```
 <%= form_for(@signup) do |f| %>
        <div class="field">
            <%= f.label :email %><br />
            <%= f.text_field :email %>
        </div>

        <div class="actions">
            <%= f.submit "Enter" %>
        </div>
    <% end %> 
```

`Pages`控制器包含：

```
class PagesController < ApplicationController

  def home
    @title = "Open Domain - Liberate your domains from obscurity"
    @signup = Signup.new
  end

end 
```

`Signup`控制器包含：

```
class SignupController < ApplicationController

  def show
    @signup = Signup.new
  end

  def new
  end

  def create
    @signup = Signup.new(params[:signup])
    if @signup.save
    else
      render 'new'
    end
  end

end 
```

该`signup`模型包含：

类注册 < ActiveRecord::Base

```
 attr_accessible :email

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates(:email, :presence => true,
                    :length => {:maximum => 40},
                    :format => {:with => email_regex})

end 
```

任何帮助将不胜感激。我觉得这是一个小问题，我是一个初级开发人员。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:30:46.640

form_for(@signup) 正在尝试构建一个 POST 到的路由。如果您的 routes.rb 中没有命名路由，您将收到此错误。尝试：

路线.rb

```
 post '/signup', :to=>"signup#create", :as=>"signups" 
```

这基本上是说：当请求到 '/signup' 路径的 POST 时，将其路由到注册控制器中的创建操作。此外，使该路径的帮助器可使用名称访问：“signups_path”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:37:30.207

你可以用这个替换你的 form_for 标签：

```
<%= form_for @signup, :url => { :action => "create" } do |f| %> 
```

这会将其发布到“注册/创建”。

# ruby - 如何使此代码设置实例变量的值？

> ID：10458309
> 
> 赞同：0
> 
> 时间：2012-05-05T02:26:08.810
> 
> 标签：ruby, class, dynamic, methods, instance-variables

我有以下代码，旨在将普通变量转换为实例变量。

```
BasicObject.class_eval do
    def instance(ins)
        self.instance_variable_set("@#{ins}", ins)
    end
end 
```

假设用户说

```
class X
  foo = 3
end
bar = X.new
bar.instance(:foo) 
```

我想要它做的是将新创建的变量设置`@foo`为 3，而不是设置`@foo`为`:foo`. 如何让代码做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:43:22.453

在您的`instance`方法中，参数`ins`包含变量的名称，而不是其值。正如所写的那样，从那时起没有办法获得它的价值。

如果您`instance`从代码中源变量实际可见的点调用，它不在您的示例中（请参阅我上面的评论），您也可以传递局部变量绑定，然后使用它。像这样的东西：

```
def instance(var, bound)
    eval "@#{var}=#{var}", bound
end 
```

这会像这样工作：

```
foo = 3
instance('foo', binding)
@foo   # => 3 
```

# mongodb - 有没有办法一起链接到 Meteor.Collections() ？

> ID：10458311
> 
> 赞同：4
> 
> 时间：2012-05-05T02:26:36.443
> 
> 标签：mongodb, meteor

我终于开始尝试流星了，我认为到目前为止真的很酷。我一直在尝试将两个 Meteor.Collections() 链接在一起，就像在关系数据库中一样。

例如，假设用户输入了“狗”之类的动物类型，然后其他用户可以输入“杜宾”、“拉布拉多”等狗的类型。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T09:00:05.283

基本上，像 MongoDB 这样的基于文档的数据库背后的想法不是试图模仿关系数据库。尝试查看是否可以将类型作为动物类型的子项添加（嵌入）到同一集合中，而不是在两个集合之间创建链接。话虽如此，仍然有一种方法可以链接到集合 - 这样做的方法是在查询之外 - 这意味着您从一个查询中获取结果，然后将它们作为参数传递给另一个查询（如您所见，它不是一种有效的方法）。

更多背景信息可以在 - [http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking 找到](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)

或 - [MongoDB 和“加入”](https://stackoverflow.com/questions/4067197/mongodb-and-joins)

# javascript - jQuery 事件处理程序 - 内存使用

> ID：10458312
> 
> 赞同：2
> 
> 时间：2012-05-05T02:26:42.677
> 
> 标签：javascript, jquery, memory, pointers, event-handling

我一直在这样做：

```
$('#id').on('click',function(e){myFunction(var1,var2);});

function myFunction(x,y){blah blah blah} 
```

我想改成这样：

```
$('#id').on('click',function(e){blah blah blah}); 
```

如果我使用许多不同的 DOM 元素执行此操作，我是否会消耗更多内存空间，因为我将 myFunction 占用的空间与每个闭包相乘？还是只使用指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:36:01.770

第一个代码具有重用的优点，但缺点是定义一个匿名函数只是为了调用真正的函数。如果它真的很重要，那么额外的功能就是开销。

第二个将占用更少的内存，因为您只传递一个函数。函数也通过引用传递。这意味着这个函数可以被存储一次并被许多不同的调用者调用。

* * *

但是，您连接它的方式也会影响性能。如果你这样做：

```
$('#id1').on('click',function(e){myFunction(var1,var2);});
$('#id2').on('click',function(e){myFunction(var1,var2);}); 
```

这个调用 jQuery 4 次（2`$()`和 2 `on()`），创建 2 个匿名函数并调用外部函数两次。计数：6 个调用，3 个函数只是为了执行您的操作（不包括内部 jQuery 调用）。

```
$('#id1').on('click',function(e){blah blah blah});
$('#id2').on('click',function(e){blah blah blah}); 
```

如果你这样做，该函数不再可重用，但你有 4 次调用 jQuery，2 个函数，但你正在重复代码。从 DRY 的角度来看不好。

```
$('#id1, #id2').on('click',function(e){blah blah blah}); 
```

这个，你有 2 个调用和 1 个函数。这个更好。

```
$('#id1, #id2').on('click',function(e){myFunction(var1,var2);}); 
```

你也可以这样做，该函数可以通过牺牲一个额外的匿名函数和调用来重用。计数：3 个调用，2 个函数。

* * *

您可以`.on`通过将处理程序附加到最近的“最近的公共父级”来利用 ，这样气泡就不会向上移动很远。相比之下，`live()`将事件附加到`document`，使处理程序甚至可用于新元素。但是附加到`document`使得它对于深度嵌套的元素来说非常遥远。

```
$('nearest_common_parent').on('click','dynamic_element',function(){
    //do stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:36:28.663

我相信你的第二种方法按照惯例是正确的。特别是，因为第一次，您无法访问`$(this)`

您必须将其作为 var 传递

```
$('#test').on('click', function(e) {myFunction($(this), e, other_vars)}); 
```

VS

```
$('test').on('click', function(e) {
  e.preventDefault();
  var $this = $(this);
  //yadda yadda
}); 
```

它确实也使您的代码更具可读性。我知道我没有回答实际问题，但我认为这些是正确编写函数的一些正当理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T02:50:29.370

当主要使用 id 时，约瑟夫的回答是一个很好的解释。但是，如果您是选择器的类或标签名称，则最好利用[on](http://api.jquery.com/on/)函数的`selector`参数。例子：

```
 $('#page-wrap').on('hover', 'a', function() {
    // do something
  }); 
```

这只会创建**一个**与元素的绑定，`#page-wrap`但会在其中的任何`a`元素上触发。它在内存使用和设置速度方面更好，特别是如果您绑定到很多元素。

# lua - lua：将 io.popen 的结果写入文件？

> ID：10458313
> 
> 赞同：2
> 
> 时间：2012-05-05T02:26:56.267
> 
> 标签：lua

我想将结果保存`f = io.popen(command)`到文件中。有没有办法从文件描述符中做到这一点`f`，还是我必须将数据复制到一个新字符串并通过新的文件描述符写入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:48:41.610

在不知道更多有关您要做什么的情况下，这将变得很简单...

```
local fout = io.open("/path/to/file", "w+")
f = io.popen(command)
fout:write(f:read("*a")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:58:55.410

在普通的 Lua 中没有标准的方法来做到这一点。但是您总是可以将输出重定向到文件`command`本身。（即`io.popen("echo foo | tee bar")`，或`os.execute("echo foo >bar")`。）

# css - 水平对齐位置：相对 divs (CSS)

> ID：10458315
> 
> 赞同：0
> 
> 时间：2012-05-05T02:27:18.060
> 
> 标签：css, html, alignment

我想从我的网站上执行此操作：[http](http://project.jazzassite.tk) ://project.jazzassite.tk 并能够将内容放入我可以居中或对它们做任何我想做的事情的 div 中。唯一的问题是，如果我浮动它，它就不起作用，如果我使用 position:relative 它们会产生楼梯效果。

我希望我能够纯粹用 CSS 来做到这一点，而不是使用任何表格等。

任何帮助表示赞赏，爵士乐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:33:17.827

你想将`navigate`包含所有 6 个孩子的 div 居中吗？如果是这样，这应该工作：

```
#navigate {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-left: -540px;
    margin-top: -15px;
} 
```

margin-left 是内容宽度的一半，然后设为负数。margin-right 是内容高度的一半，然后变为负数。这将使您的对象垂直和水平居中。这是你要找的还是我错过了重点？

# python - 使用 Python 计算文件中的词素并在列中列出它们

> ID：10458316
> 
> 赞同：0
> 
> 时间：2012-05-05T02:27:34.037
> 
> 标签：python, count

这是作为初学者非常友好地提供给我的脚本：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from __future__ import with_statement    # needed for Python 2.5
from itertools import chain

def chunk(s):
    """Split a string on whitespace or hyphens"""
    return chain(*(c.split("-") for c in s.split()))

def process(latin, gloss, trans):
    chunks = zip(chunk(latin), chunk(gloss))
    # now you have to DO SOMETHING with the chunks!

def main():
    with open("examples.txt") as inf:
        try:
            while True:
                latin = inf.next().strip()
                gloss = inf.next().strip()
                trans = inf.next().strip()
                process(latin, gloss, trans)
                inf.next()    # skip blank line
        except StopIteration:
            # reached end of file
            pass

if __name__=="__main__":
    main() 
```

我不确定我是否遗漏了任何东西，但输出只是空白，让我回到 $.

我正在尝试执行以下操作：
我有一个非英语语言的文本，使用连字符分解成语素（每个单词的一部分），带有英语光泽（每个语素的语言翻译）和下面的直接翻译。

例如。

> Itali-am fat-o profug-us Lavini-a-que ven-it
> 
> 意大利-Fem:Sg:Acc 命运-Neut:Sg:Abl 逃亡-Masc:Sg:Nom Lavinian-Neut:Pl:Acc come:Perf-3-Sg:Indic:Act
> 
> “在飞行中[驱使]命运来到意大利和拉维尼亚[海岸]”

我将在一个文件中包含多个文本，例如上述文本 - 即

> 空行
> 
> 一行用连字符分隔的拉丁文
> 
> 一条用相应连字符分解的光泽线，使用冒号连接元素
> 
> 一行翻译
> 
> 空行
> 
> 拉丁
> 
> 光泽度
> 
> 翻译
> 
> 无止境。

我需要做的是编写一个文件，它给我以下输出：

```
意大利语：1 意大利
上午：1 Fem：Sg：Acc
脂肪：1 命运
o: 1 中性:Sg:Abl
profug: 1 逃离
我们：1 Masc：Sg：Nom
拉维尼：1个拉维尼
a: 1 Neug:Pl:Acc
que: 1 来：Perf
文：1 3
它：1 Sg：Indic：Act

```

其中第一列表示没有连字符的第一行文本；第二列表示出现的次数（在本例中每个只有 1 次），第三列是第一列的英文翻译，如文中所写。

如果有一个拉丁语素没有对应的英语注释/翻译，拉丁栏将照常显示，但英语栏将打印 [unknown]，如：

```
a:  1   [unknown] 
```

如果相反，即没有对应拉丁语的英语语素，它应该打印

```
[unknown]:  1   kitten 
```

最后，prog 需要能够处理同音词素（即两个拼写相同但含义不同的拉丁语素）。例如

```
a:  16  Neuter:Plural
a:  28  Feminine:Singular 
```

再次，这是家庭作业，任何指针都会很棒。现在正在整理一些脚本以上传到这里以供批评！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:30:07.283

由于多行结构，处理文件有点棘手；而不是通常的逐行迭代，我建议这样的事情（根据您的示例，我假设文件实际上并不以空行开头，而是它使用空行作为分隔符）：

```
with open("input.txt") as inf:
    try:
        while True:
            latin = inf.next().strip()
            gloss = inf.next().strip()
            trans = inf.next().strip()
            process(latin, gloss, trans)
            inf.next()    # skip blank line
    except StopIteration:
        # reached end of file
        pass 
```

`process`然后必须将它们分成块`latin`并`gloss`适当地配对：

```
from itertools import chain

def chunk(s):
    """Split a string on whitespace or hyphens"""
    return chain(*(c.split("-") for c in s.split()))

def process(latin, gloss, trans):
    chunks = zip(chunk(latin), chunk(gloss)) 
```

像这样称呼它

```
process(
    "Itali-am fat-o profug-us Lavini-a-que ven-it",
    "Italy-Fem:Sg:Acc fate-Neut:Sg:Abl fleeing-Masc:Sg:Nom Lavinian-Neut:Pl:Acc come:Perf-3-Sg:Indic:Act",
    "in flight [driven] by fate came to Italy and the Lavinian [shores]") 
```

叶`chunks`含

```
[('Itali', 'Italy'),
 ('am', 'Fem:Sg:Acc'),
 ('fat', 'fate'),
 ('o', 'Neut:Sg:Abl'),
 ('profug', 'fleeing'),
 ('us', 'Masc:Sg:Nom'),
 ('Lavini', 'Lavinian'),
 ('a', 'Neut:Pl:Acc'),
 ('que', 'come:Perf'),
 ('ven', '3'),
 ('it', 'Sg:Indic:Act')] 
```

剩下的就是学生的练习——保持块的连续计数，然后适当地排序和显示。希望有帮助！

# mysql - 关于嵌套选择的sql问题

> ID：10458318
> 
> 赞同：0
> 
> 时间：2012-05-05T02:28:08.060
> 
> 标签：mysql, sql

我有两张桌子

```
1\. Table A
userId
userFirstName
UserLastName

2\. Table B
createdByUserId
updatedByUserId
deletedByUserId
tableName
tableCreateDate 
```

我想选择表 B（包括 createByUserID、updatedByUserId 和 deletedByUserId）并在一个查询中获取表 A 的 userFirstName 和 userLastName（根据 userID 获取用户名）？这可能在一个嵌套查询中吗？或者它真的需要两个查询，一个查询取出 userId，第二个取出 userdetail。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:31:06.363

如果我明白你想要什么，你可以加入三次。（我选择了左连接以防某些 ID 为空）

```
Select 
      b.tableName,
      b.tableCreateDate,
      CUser.userFirstName CreateUserFirstName,
      CUser.UserLastName  CreateUserLastName ,
      CUser.userFirstName UpdateUserFirstName,
      UUser.UserLastName  UpdateUserLastName ,
      UUser.userFirstName DeleteUserFirstName,
      DUser.UserLastName  DeleteUserLastName 
FROM
    TableB b
    LEFT JOIN TableA CUser
    ON b.createdByUserId = CUser.UserId
    LEFT  JOIN TableA UUser
    ON b.updatedByUserId= UUser.UserId
    LEFT  JOIN TableA DUser
    ON b.updatedByUserId= DUser.UserId 
```

# php - php MySQL CRUD：我可以安全删除吗？

> ID：10458319
> 
> 赞同：1
> 
> 时间：2012-05-05T02:28:24.557
> 
> 标签：php, mysql, security, crud, sql-delete

我正在尝试确定使用 php 和 MySQL 在 CRUD 中删除的最安全方法或最佳实践。我被教导的方式是创建`<a href="delete.php=?{$id}">Delete</a>`链接并让 delete.php在变量`delete()`中传递的 id 上运行我的方法。`$_GET`

1.  如果我允许网络爬虫查看此页面，如果它爬取每个页面上的每个删除链接，它不能删除整个数据库吗？

2.  无法以某种方式找出调用页面的人无法`delete()`使用他们想要的任何数字手动加载 url`$_GET`并删除记录？

3.  永远不要通过 CRUD 删除任何内容，而是将 Deleted 列添加到表中并使其看起来好像已被用户删除，这样会更好吗？

4.  我只是偏执狂吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:30:59.263

**如果我允许网络爬虫查看此页面，如果它爬取每个页面上的每个删除链接，它不能删除整个数据库吗？**

是的。

**无法以某种方式找出调用 delete() 的页面的人无法在 $_GET 中使用他们想要的任何数字手动加载 url 并删除记录？**

是的。

**永远不要通过 CRUD 删除任何内容，而是将 Deleted 列添加到表中并使其看起来好像已被用户删除，这样会更好吗？**

如果你真的想删除它，imo，删除更好。

**我只是偏执狂吗？**

一点也不。

* * *

如果您只有一个 delete.php 脚本，它具有以下内容（忽略 CRUD atm 并谈论 MySQL）：

```
$q = "DELETE FROM mytable WHERE row = $_GET['id']";
$r = mysql_query($q); 
```

那么是的，您的前两个担忧实际上是会发生什么。偶然发现这些链接的蜘蛛会导致数据库记录被删除，而发现这些链接的恶意用户同样可以从数据库中删除行。

这通常有两种处理方式：

1.  不要将 delete.php 链接提供给不应该拥有它的人（未登录的人、未以管理员身份登录的人等）——但请注意，*这只是一个细节，并没有保护您的数据库免受意外/恶意删除。*

2.  在 delete.php 脚本中，验证运行它的人是否被允许删除行。大部分时间是通过检查登录时设置的会话变量来完成的（例如`if($_SESSION['can_delete'] != true){ die('Insufficient Privileges'); }`）。

尽管不将 delete.php 链接提供给不应该拥有它的人会很有帮助，但如果您希望它是安全的，则需要明确检查 delete.php 脚本**中的权限。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:31:57.203

阅读[末日蜘蛛](http://thedailywtf.com/Articles/The_Spider_of_Doom.aspx)。

您可以使用链接来删除内容，*但*该链接不应公开暴露在可能被抓取的地方，甚至不应该被内部索引蜘蛛抓取。相反，您必须检查每个删除操作的用户授权，以确保进行删除的用户拥有或有权修改它。

因此，您的`delete()`方法必须做的不仅仅是删除（或调用的控制器脚本`delete()`）。*在执行任何修改或删除之前，请始终*检查用户授权。

您是否实际执行删除或只是将行标记为已删除取决于您是否需要您的应用程序能够取消*删除*它们。无论哪种方式，在采取行动之前都要检查授权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T02:33:08.930

1.  是的。这发生在相当多的人身上，谷歌抓取了一个“删除”页面并删除了他们的内容。我记得有一篇关于它的非常好的博客文章，但似乎找不到。

2.  是的，这是完全可能的，而且很容易做到。这就是为什么你需要建立一个授权系统。这意味着在执行任何操作之前，系统应该在执行操作之前检查是否允许用户执行他所请求的操作。

3.  同样，这取决于。如果数据不再有用，那么一定要删除它并摆脱它。但是，如果您想支持某种“取消删除”，则只需将该项目标记为已删除。

4.  不 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T02:39:59.627

一种简单的方法是启动一个会话，如：

```
$somevar = 'abc123'
$_SESSION['secureDelete'][$id] = $somevar; 
```

然后打印：

```
<a href="delete.php?id={$id}&action={$somevar}">Delete</a> 
```

当您要删除文件时，请检查该会话是否存在该 $somevar 值：

```
if (isset($_SESSION['secureDelete'][$id]) && $_SESSION['secureDelete'][$id] == $_GET['action']) {
  deleteFunction($_GET['id']);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T09:04:06.433

尝试使用POST方法并隐藏ID，应该是这样的

```
<form action="" method="POST">
<input type="hidden" name="id" value="<?= $id; ?>"/> 
<button type="submit">Delete</button> 
</form> 
```

# ruby-on-rails - CarrierWave：多个模型的单个上传器？

> ID：10458324
> 
> 赞同：2
> 
> 时间：2012-05-05T02:30:18.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image-processing, subclass, carrierwave

如何根据创建图像的模型使单个图像上传器执行不同的操作？

我有一个图片上传器，我想为用户和帖子上传图片。对于用户，我想要原始图像和缩略图（70x70）。对于帖子，我想要原始图像和特色缩略图 (260x180)。我可以为每个图像制作 3 个版本，然后调用所需的版本，但这可能真的很糟糕，因为它会阻塞我的存储数据库。

我看了看： [载波；多个上传者还是只有一个？](https://stackoverflow.com/questions/4796709/carrierwave-multiple-uploaders-or-just-one) 看起来一个可能的解决方案是创建子类。但是，我不太确定我会如何做到这一点 - 我尝试按照答案建议做，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:11:01.350

由于行为不同，您应该使用单独的载波上传器。除非您想在这两个上传者之间共享一些代码，否则这里不需要子类。

`version`只需添加另一个上传者，除了该部分之外，它应该与您现有的上传者相同。

# linux - gvimrc 和 vimrc 放在哪里？

> ID：10458334
> 
> 赞同：1
> 
> 时间：2012-05-05T02:32:22.283
> 
> 标签：linux, vim, fedora

好的，我刚刚安装了 Fedora，但我通常是 Mac 用户。好吧，我想在 Fedora 中设置 vim，就像在 OSX 中设置它一样。我的问题是我应该把我的 gvimrc 和 vimrc 文件放在哪里？在 /usr/share/vim? （我相信这就是路径）。插件也是。我可以在 vim/autoloads 中安装病原体并将插件放在 vim/bundles 中吗？感谢您的任何回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T02:35:13.280

传统上是您的个人`.vimrc`并`.gvimrc`进入您的主目录（`~/.vimrc`和`~/.gvimrc`）。根据[这个网站](http://tammersaleh.com/posts/the-modern-vim-config-with-pathogen)，你所有的病原体插件都在`~/.vim/bundle`.

# c# - 通过按钮单击添加的自定义 ASP.NET 成员资格控件

> ID：10458335
> 
> 赞同：1
> 
> 时间：2012-05-05T02:32:38.313
> 
> 标签：c#, asp.net

我可以自定义 ASP.NET DB 成员资格提供程序吗？

在我的 ASP.NET 数据库中，我在 Membership 表中添加了两列：Age 和 Address。

在 Register.aspx 页面中有内置字段，例如用户名、电子邮件、密码、确认密码。

我想添加年龄和地址，当用户单击创建用户按钮时，年龄和地址中输入的数据将存储在 ASP.NET DB 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:39:59.587

`RegistrationForm`如果您想在页面中添加新字段，则必须以编程方式创建自己的字段。

`textboxes`在您的设计视图中拖动，并在文件后面的代码中写下这个，

```
protected void CreateUser_Button_Click(object sender, EventArgs e)
    {
        MembershipCreateStatus result;
        try
        {
            if (Page.IsValid)
            {
                Membership.CreateUser(TextBox1.Text, TextBox2.Text, TextBox3.Text, TextBox4.Text, TextBox5.Text, true, out result);

                switch (result)
                {
                    case MembershipCreateStatus.DuplicateEmail:
                        Response.Write("Email ID is already exist");
                        break;
                    case MembershipCreateStatus.DuplicateProviderUserKey:
                        break;
                    case MembershipCreateStatus.DuplicateUserName:
                        Response.Write("UserName is already Exists !");
                        break;
                    case MembershipCreateStatus.InvalidAnswer:
                        break;
                    case MembershipCreateStatus.InvalidEmail:
                        Response.Write("Not a Valid Email ID");
                        break;
                    case MembershipCreateStatus.InvalidPassword:
                        Response.Write("Atleast 6 Charcters are required for Password");
                        break;
                    case MembershipCreateStatus.InvalidProviderUserKey:
                        break;
                    case MembershipCreateStatus.InvalidQuestion:
                        break;
                    case MembershipCreateStatus.InvalidUserName:
                        break;
                    case MembershipCreateStatus.ProviderError:
                        Response.Write("Fail to Register ");
                        break;
                    case MembershipCreateStatus.Success:
                        Response.Write("Successfulley Registered");
                        break;
                    case MembershipCreateStatus.UserRejected:
                        Response.Write("Fail to Register, ");
                        break;
                    default:
                        break;
                }
            }
        }
        catch (Exception err)
        {
            Response.Write(err.Message);
        }
    } 
```

并告诉我它是否适合你...

# c - 错误 C2275 错误与 typedef 结构

> ID：10458352
> 
> 赞同：4
> 
> 时间：2012-05-05T02:36:32.550
> 
> 标签：c, typedef

我正在编写一个程序，它是一个基本的图像绘制程序。它在 C 中。

最初我声明

```
typedef struct 
{   
  int red;
  int green;
  int blue;
} pixel_colour; 
```

我有一个功能来填充接受这个的背景，所以我像使用它一样。

```
pixel_colour flood_colour = {80,50,91};
FloodImage(flood_colour); 
```

现在，如果它是我的主要内容中唯一的东西，这可以正常工作，但是一旦我添加了一个开关/案例和我的其余代码，我就不能再使用了`pixel_colour flood_colour = {80,50,91};`

而不是得到

```
error C2275: 'pixel_colour' : illegal use of this type as an expression
1>          c:\users\xxxx\documents\visual studio 2010\projects\xxx.c(20) : see declaration of 'pixel_colour' 
```

主要代码如下，在我尝试使用 pixel_colour 之前，它适用于我的所有函数，它将被设置为变量而不是 200,200,200 但即使这样也不起作用

```
char instring[80] = "FL 201 3 56";
  int pst = FirstTwo(instring);
  switch( pst )
  {
  case 1: 
    printf( "FL ");
    CaseFL(instring);
    pixel_colour flood_colour = {200,200,200};
    FloodImage(flood_colour);
    break;

  case 2: 
    printf( "LI" );
    break;

  case 3: 
    printf( "RE" );
    break;

  case 4: 
    printf( "CH" );
    break;

  case 5: 
    printf( "FI" );    
    break;

  case 6: 
    printf( "EX" );    
    exit(EXIT_FAILURE);
    break;

  default  : 
    printf( "Something went wrong" );

    break;
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T02:41:55.170

在 MSVC 支持的 C89 中，您只能在代码块的开头声明变量。相反，您可以这样做：

```
case 1: 
{
    // first thing in the block - variable declaration / initialization
    pixel_colour flood_colour = {200,200,200};
    printf( "FL ");
    CaseFL(instring);
    FloodImage(flood_colour);
    break;
} 
```

C99、C11 和 C++ 都允许根据需要声明变量。

# javascript - “切片”之后未引用的数组不是那么未引用？

> ID：10458356
> 
> 赞同：1
> 
> 时间：2012-05-05T02:37:22.330
> 
> 标签：javascript, arrays, pass-by-reference

**注意：**这不是使用`arr.slice(0)`修复此“问题”的常见数组副本“问题”的数百万重复之一

也就是说，我想了解为什么会得到这个意想不到的结果：

```
var oldArr = [[1,2],[3,4]];
var find = oldArr[1];

var newArr = oldArr.slice(0);
console.log(newArr.indexOf(find)); //1?

//proof that newArr is NOT referenced to oldArr
newArr[0] = "Hi";
newArr[1] = "How are you?";
console.log(oldArr+" "+newArr); //"1,2,3,4 Hi,How are you?" 
```

[jsFildde 演示](http://jsfiddle.net/yLQ3u/)

如果您替换`find`为以下任何替代方案，它会返回预期的`-1`：

*   `[3,4]`直接使用
*   使用可变持有`[3,4]`
*   使用引用另一个数组的变量`[3,4]`

我找不到任何解释为什么最后三种方法与第一个示例之间有任何区别。据我所知，应该没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:45:54.197

在：

```
[[1,2],[3,4]] 
```

创建了三个**数组对象**。

只有外部的被`slice`'d。这会导致“浅拷贝”。

考虑一下：

```
var a = [1,2]
var b = [3,4]
var c = [a,b]
var d = c.slice(0)
d[0] === a       // true, which means it is the /same/ object
d[0][0] = "Hi!"
a                // ["Hi!", 2] 
```

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:56:47.893

一切都按预期工作

`indexOf`通过引用而不是值搜索，因此如果两个对象不`===`相互，`indexOf`将找不到它们

在你的情况下：

```
var oldArr = [[1,2],[3,4]];
var find = oldArr[1];

var newArr = oldArr.slice(0); 
```

`find`指向数组 [3,4]；所以 newArray 包含 2 个对象（两个数组）。如果你想看看到底发生了什么，试试 find.push(5)

# ruby-on-rails - 我是否在资产管道中正确加载了我的 js 文件？

> ID：10458363
> 
> 赞同：2
> 
> 时间：2012-05-05T02:38:54.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

在 main.js 中，我有：

```
$(document).ready(
  function(){

  alert('foo');

}); 
```

`app/assets/javascripts/application.js`拥有：

```
//= require jquery
//= require jquery_ujs
//= require main 
```

开发中。运行后`rake assets:precompile`，我刷新任何页面，它执行`alert('foo')`两次。它应该只做一次。似乎正在加载两个 main.js 副本。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:01:15.530

在您的 config/environments/development.rb 尝试设置：

```
 config.assets.debug = false 
```

或者只是不要在开发中预编译您的资产。js 可能会在您的开发环境中执行两次，因为您已经预编译了资产；因此，它现在正在执行原始文件中的脚本和您预编译的脚本。

# java - 本教程中的@color/cream_dark 是什么？

> ID：10458369
> 
> 赞同：0
> 
> 时间：2012-05-05T02:41:19.040
> 
> 标签：java, android, xml, eclipse

我想在我的应用程序的按钮后面创建一个阴影，但是当我尝试做这里所做的事情时：[http](http://www.anotherandroidblog.com/2011/06/29/drop-shadow-linearlayout/) ://www.anotherandroidblog.com/2011/06/29/drop-shadow-linearlayout/ ，Eclipse 可以'找不到@color/cream_dark 或@color/cream。有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:08:52.720

您必须在“res”文件夹中的“values”文件夹中名为 color.xml 的文件中指定这些颜色。您可以将任何 RGB 值放入此资源中。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="cream_dark">#000000</color>
    <color name="cream">#ffffff</color>
</resources> 
```

请参阅此链接：[颜色 xml 文件说明](http://developer.android.com/guide/topics/resources/more-resources.html#Color)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:55:12.440

而且您可能想要使用一些 alpha，以便底层背景通过阴影闪耀：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="shadow_dark">#5000</color>
    <color name="shadow_light">#0000</color>
</resources> 
```

# php - 在 PHP 中执行数组交集时如何保留多维数组信息？

> ID：10458370
> 
> 赞同：3
> 
> 时间：2012-05-05T02:41:31.547
> 
> 标签：php, arrays, array-intersect

我有许多包含一个 ID 作为主键的数组，每个 id 下都有多维信息。这里有两个例子：

**第一个示例数组：**

```
array
  14181 => 
    array
      'industries' => 
        array
          'weight' => string '105652' (length=6)
          'count' => string '11' (length=2)
  48354 => 
    array
      'industries' => 
        array
          'weight' => string '508866' (length=6)
          'count' => string '10' (length=2) 
```

**第二个示例数组：**

```
array
  16434 => 
    array
      'business_types' => 
        array
          'weight' => string '104614' (length=6)
          'count' => string '1' (length=1)
  48354 => 
    array
      'business_types' => 
        array
          'weight' => string '103610' (length=6)
          'count' => string '10' (length=2) 
```

我想获得许多像这样的数组的交集（基于键），但我需要为每个键保留每个数组的权重和计数数据。请注意，每个数组的权重和计数数据不同。在这种情况下，business_type 和行业。

**需要的最终数组：**

```
array
  48354 => 
    array
      'business_types' => 
        array
          'weight' => string '103610' (length=6)
          'count' => string '10' (length=2)
      'industries' => 
        array
          'weight' => string '508866' (length=6)
          'count' => string '10' (length=2) 
```

最初我并没有试图保持重量和计数，所以我只是简单地执行一个`array_intersect_keys()`并且工作完成了。现在我需要保留这些数据。我将子数组命名为不同的东西，希望`array_intersect_keys()`能保留它，但是，它只保留函数中的第一个数组。

**有没有首选的方法来做这样的事情？**

我能想出的唯一解决方案是将所有数组减少为最终 ID (keys) 的列表，然后循环遍历该数组，从我们比较的每个原始数组中提取权重和计数信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:00:48.877

您提出的解决方案似乎很好，但您可能会考虑将一个列表合并到另一个列表中，例如

```
<?php

$a1 = array(14181 => array('industries'     => array('weight' => "105652", 'count' => "11")),
            48354 => array('industries'     => array('weight' => "508866", 'count' => "10")));
$a2 = array(16434 => array('business_types' => array('weight' => "104614", 'count' => "1")),
            48354 => array('business_types' => array('weight' => "103610", 'count' => "10")));

//print_r($a1);
//print_r($a2);

foreach($a2 as $a2k => $a2v)
{
    // The loop below should only go through once, but if there are multiple types it will be ok
    foreach($a2v as $a2vk => $a2vv)
    {
        $a1[$a2k][$a2vk] = $a2vv;
    }
}

printf("Output:\n");
print_r($a1);

printf("Output:\n");
print_r($a1); 
```

**输出：**

```
Output:
Array
(
    [14181] => Array
        (
            [industries] => Array
                (
                    [weight] => 105652
                    [count] => 11
                )

        )

    [48354] => Array
        (
            [industries] => Array
                (
                    [weight] => 508866
                    [count] => 10
                )

            [business_types] => Array
                (
                    [weight] => 103610
                    [count] => 10
                )

        )

    [16434] => Array
        (
            [business_types] => Array
                (
                    [weight] => 104614
                    [count] => 1
                )

        )

) 
```

我相信这会比您提出的解决方案略快。

* * *

**编辑：**上面是一个数组合并类型算法，即使数组中的键不常见，它也会合并数组。下面的算法只会产生两个数组的**交集**。我最初得到这个问题的错：

```
<?php

$a1 = array(14181 => array('industries'     => array('weight' => "105652", 'count' => "11")),
            48354 => array('industries'     => array('weight' => "508866", 'count' => "10")));
$a2 = array(16434 => array('business_types' => array('weight' => "104614", 'count' => "1")),
            48354 => array('business_types' => array('weight' => "103610", 'count' => "10")));

//print_r($a1);
//print_r($a2);

// Pass the smaller array as first argument
if(count($a1) <= count($a2))
{
    $res = my_merge($a1, $a2);
}
else
{
    $res = my_merge($a2, $a1);
}

function my_merge($a1, $a2)
{
    $res = array();
    foreach($a1 as $a1k => $a1v)
    {
        if(array_key_exists($a1k, $a2))
        {
            $res[$a1k] = array_merge($a1[$a1k], $a2[$a1k]);
        }
    }
    return $res;
}

printf("Output:\n");
print_r($res); 
```

**输出：**

```
Array
(
    [48354] => Array
        (
            [industries] => Array
                (
                    [weight] => 508866
                    [count] => 10
                )

            [business_types] => Array
                (
                    [weight] => 103610
                    [count] => 10
                )

        )

) 
```

# python - 使用 Django 的外键字段

> ID：10458375
> 
> 赞同：0
> 
> 时间：2012-05-05T02:41:55.763
> 
> 标签：python, sql, database, django

我在模型中使用 Django 制作应用程序我不想要外键中的 id 我想要另一个字段，例如名称

我有这样的东西

```
class Musician(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    instrument = models.CharField(max_length=100)

class Album(models.Model):
    artist = models.ForeignKey(Musician)
    name = models.CharField(max_length=100)
    release_date = models.DateField()
    num_stars = models.IntegerField() 
```

我想过滤音乐家并给了我一个错误

```
Exception Type:    DatabaseError
Exception Value:    no such column 
```

# android - 为多项活动保留页脚

> ID：10458376
> 
> 赞同：0
> 
> 时间：2012-05-05T02:42:00.553
> 
> 标签：android, android-activity, footer

我正在创建一个应用程序，它要求页脚在各种活动中保持不变。也就是说，当动画到另一个活动时，页脚不会随之动画 - 它停留在那里。这是我的意思的一个例子：[http ://www.youtube.com/watch?v=EwXjdTvVXHQ&feature=related](http://www.youtube.com/watch?v=EwXjdTvVXHQ&feature=related)

我知道这是一个很棒的应用程序，但请不要忘记我的问题；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T03:28:50.420

使用 Fragments 切换您的内容，然后您可以使用相同的页脚保留一项活动。片段一直向后移植到 Donut。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:54:22.087

在您的应用程序中仅使用一个带有页脚和正文的活动，仅像活动中的开关一样切换和动画正文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T03:25:58.967

创建一个扩展 Activity 的虚拟类并为其添加页脚。使用 xml（或与其他活动相同的方式）。并在您的应用程序中将此类扩展至您想要页脚的任何位置。

# java - 如何从两个单独的类加载器制作 java.lang.reflect.Proxy？

> ID：10458378
> 
> 赞同：1
> 
> 时间：2012-05-05T02:42:12.697
> 
> 标签：java, osgi, classloader

我使用 CXF JAXRSClientFactory 从各种 JAX-RS 接口创建代理实例。在内部，这个工厂调用 Proxy.newProxyInstance()，传入我的接口和 CXF 客户端接口。

在 OSGi 下，如果包含我的接口类的包导入 org.apache.cxf.jaxrs.client，这将非常有用。但是有一天我决定要从我的应用程序类中隐藏 CXF，所以我创建了一个包，将客户端工厂封装在一个服务中。现在我从 Proxy 得到 IllegalArgumentException 说“MyInterface 在类加载器中不可见”或“客户端在类加载器中不可见”。

问题是我的工厂包导入 CXF 但不是我的应用程序。而且我的应用程序包不导入 CXF。因此，容器中的任何地方都没有可以看到 CXF 客户端类和我的 JAX-RS 接口的类加载器。

有没有办法在不将 CXF 导入我的应用程序包的情况下解决这个问题？例如，我的工厂包是否可以动态创建一个新的类加载器，它是两个类加载器的联合，所以它可以看到 CXF 和我的应用程序类？或者我可以欺骗代理接受这两个接口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:56:45.160

从 CXF 2.6.1 开始，这现在是一个可解决的问题。已关闭的问题[CXF-4290](https://issues.apache.org/jira/browse/CXF-4290)添加了一个新 API 以将自定义类加载器传递给 JAXRSClientFactory。有了它和新的 org.apache.cxf.jaxrs.client.ProxyClassLoader 类，我现在可以为任意应用程序类制作代理。

```
 ProxyClassLoader classLoader = new ProxyClassLoader();
    classLoader.addLoader(resourceApiClass.getClassLoader());
    classLoader.addLoader(JAXRSClientFactoryBean.class.getClassLoader());

    JAXRSClientFactoryBean bean = new JAXRSClientFactoryBean();
    bean.setAddress(baseUrl);
    bean.setServiceClass(resourceApiClass);
    bean.setClassLoader(classLoader);
    return bean.create(resourceApiClass); 
```

# php - phpstorm ftp设置

> ID：10458381
> 
> 赞同：21
> 
> 时间：2012-05-05T02:43:22.407
> 
> 标签：php, phpstorm

![在此处输入图像描述](../Images/9b49f6ff8625cb0f310e33376da33805.png)

以上是截图。

我已经设置了 FTP，当我双击 FTP 图标时，FTP 连接正常。它无法显示服务器的所有文件和目录，我想更改来自远程服务器的文件的一些代码，为什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-14T18:19:09.813

单击“高级选项...”并切换“被动模式”。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-08T22:03:29.137

不要使用“远程主机”面板。

尝试“部署”：

菜单**工具 -> 部署 -> 配置**

在那里您可以定义许多 (S)FTP 服务器、使用映射、webpath。您必须填写“映射”页面，这有助于 phpStorm 确定本地文件应该发送到 FTP 路径的位置和方式。

如果您正确配置它（这很简单），您现在可以启用“自动上传”，它会在每个“保存”选项后激活文件上传！您还可以通过 RigthClick->Upload 从“项目”窗格手动上传特定文件

如果上传选项被禁用（灰色）尝试再次打开配置，从左侧列表中选择服务器并选择图标“设置为默认值”（左面板上方的第四个图标 -*服务器带有绿色勾号*）

自动上传就像 phpStorm 中的魅力一样！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-08T23:17:03.417

For me, enabling passive ftp didn't fix the grayed out ftp buttons. I did this:

*   Open the `Tools > Deployment > Configuration > Mappings`
*   Changed a mapping path, saved, then changed it back and saved again.

Then it worked, the buttons **[Upload to]**, **[Download from]** were not grayed out anymore.

# android - 在 Android 中实现代理

> ID：10458385
> 
> 赞同：5
> 
> 时间：2012-05-05T02:44:03.307
> 
> 标签：android, proxy

我想在 Andorid 中实现一个代理，以便我的所有应用程序（由我创建）数据都应该通过该代理传递，以便我可以控制它。是否有可能或是否有任何现有的？

# python - 如何在 Appengine 上使用 xlrd 读取 excel 文件

> ID：10458388
> 
> 赞同：2
> 
> 时间：2012-05-05T02:45:13.197
> 
> 标签：python, google-app-engine, flask, xlrd

我在 appengine 中使用 xlrd。我用烧瓶

我无法读取输入文件并且它一直显示相同的错误消息

代码是

```
def read_rows(inputfile):
    rows = []
    wb = xlrd.open_workbook(inputfile)
    sh = wb.sheet_by_index(0)
    for rownum in range(sh.nrows):
        rows.append(sh.row_values(rownum))
    return rows

@app.route('/process_input/',methods=['POST','GET'])
def process_input():
  inputfile = request.files['file']
  rows=read_rows(request.files['file'])
  payload = json.dumps(dict(rows=rows))
  return payload 
```

我意识到这可能是由于未上传并将其保存为文件造成的。有什么解决方法吗？这也将帮助许多其他人。任何帮助表示赞赏，谢谢

更新：找到了我在下面发布的解决方案。对于那些对使用 xlrd 感到困惑的人，可以参考我发布的开源项目 repo。关键是传递文件的内容而不是文件名

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T06:36:09.027

终于找到解决办法

这就是我的做法。我没有保存文件，而是读取文件的内容并让 xlrd 读取它

```
def read_rows(inputfile):
  rows = []
  wb = xlrd.open_workbook(file_contents=inputfile.read())
  sh = wb.sheet_by_index(0)
  for rownum in range(sh.nrows):
    rows.append(sh.row_values(rownum))
  return rows 
```

工作得很好，并将 excel 文件转换为 JSON 格式。如果要输出 json，只需使用 json.dumps()。

完整的代码示例可以在[https://github.com/cjhendrix/HXLator/blob/master/gae/main.py](https://github.com/cjhendrix/HXLator/blob/master/gae/main.py)找到，它具有 xlrd 的完整实现以及如何处理数据。

谢谢指点

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T18:32:48.187

采用：

```
wb = xlrd.open_workbook(file_contents=inputfile) 
```

您调用的方式`open_workbook`期望您传入的是文件名，而不是`FileStorage`包装实际文件的 Flask 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:51:17.920

从您的回溯中判断。

```
File "/Users/fauzanerichemmerling/Desktop/GAEHxl/gae/lib/xlrd/init.py", line 941, in biff2_8_load
    f = open(filename, open_mode) 
```

您可以尝试将此行更改为：

```
f = filename 
```

# ios - 有没有办法将 UIView 放在 UIPopoverController 上方？

> ID：10458390
> 
> 赞同：1
> 
> 时间：2012-05-05T02:45:16.460
> 
> 标签：ios, ipad, uiview, uipopovercontroller

我的应用程序中有代码添加`UIView`到根视图控制器的视图中。这个视图是半透明的，并且作为覆盖整个应用程序的模式覆盖（视图包含一个按钮，当单击该按钮时，它会从其父视图中删除视图，这是用户返回主应用程序的方式）。

到目前为止，这一切都很好，但是现在我们正在使用`UIPopoverController`s 并尝试使用相同的模态覆盖来阻止主应用程序。问题是它`UIView`显示在弹出框的*后面*，而不是在它的顶部。

有没有办法将子视图添加到根视图控制器的视图中，使其出现在任何可见`UIPopoverController`的顶部，但不关闭它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:32:25.040

UIPopoverController 上的参考说明：

> “弹出内容在一种特殊类型的窗口中叠加在现有内容之上。”

subviews-array 的 NSLogging 显示，该视图未添加到显示它的 viewController 的视图层次结构中。从我的角度来看，您尝试做的事情是不可能的。

这是一个想法：

您可以将阻止 UIView 添加到 UIPopOverController 的 contentViewController 并使用它来设置 contentViewController 上的属性。

然后你设置你的主视图控制器，它实际上显示 UIPopoverController，作为弹出窗口的委托，并执行以下操作：

```
- (void) popoverControllerShouldDismissPopover:(UIPopoverController*)popoverController
{
    if(popoverController.contentViewController.yourProperty)
    {
        return YES;
    }
    return NO;
} 
```

我不知道这对您目前的情况有多大帮助，但也许它可以帮助您入门。

# django - 我如何才能永久启用 Django 端口 8080

> ID：10458393
> 
> 赞同：1
> 
> 时间：2012-05-05T02:46:51.110
> 
> 标签：django

我想永久启用 Django 在端口 8080 上运行。

现在我正在使用以下命令运行 Django： `python manage.py runserver`

现在的问题是：如何永久启用 Django？

祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:09:26.973

您可以将快捷方式绑定到`./manage.py runserver <ipaddress>:8080`

# c# - 实体框架、SQLite 和延迟加载

> ID：10458395
> 
> 赞同：3
> 
> 时间：2012-05-05T02:47:30.663
> 
> 标签：c#, .net, sqlite, entity-framework-4, lazy-loading

您好我使用 SQL Compact 和 EF4 开发了一个 C# Budget 应用程序，我通过 VS2010 实体数据模型模板创建了 EF 模型。这一切都运作良好。但是我正在考虑开发一个 iPhone 应用程序来支持现金交易，并认为在两个平台上都支持后端数据库会更好。在创建 SQLite DB 并创建新模型后，我在尝试通过模型中的导航属性访问引用数据时遇到了问题。尝试显示引用表的属性时出现 NullReferenceException。

使用以下代码时，我在最后一行得到异常：

```
BudgetEntities budget = new BudgetEntities();
var accounts = budget.BankAccounts.ToList();

foreach (BankAccount a in accounts)
{
    Console.WriteLine("Name:" + a.Description);
    Console.WriteLine("Number:" + a.AccountNumber);
    Console.WriteLine("Type:" + a.BankAccountType.AccountType); //Exception occurs here.
} 
```

奇怪的是，这个例子中没有发生异常。我不确定发生了什么？

```
BudgetEntities budget = new BudgetEntities();
var accoutTypes = budget.BankAccountTypes;

var account = new BankAccount();
account.ID = Guid.NewGuid();
account.AccountTypeID = accoutTypes.First(t => t.AccountType.StartsWith("Credit")).ID;
account.BSB = "3434";
account.AccountNumber = "32323";
account.Description = "Test";
account.TrackingAccount = true;

budget.AddObject("BankAccounts", account);
budget.SaveChanges();
var accounts = budget.BankAccounts.ToList();

foreach (BankAccount a in accounts)
{
    Console.WriteLine("Name:" + a.Description);
    Console.WriteLine("Number:" + a.AccountNumber);
    Console.WriteLine("Type:" + a.BankAccountType.AccountType); //Exception doesn't happen.
} 
```

这只是一个简单的例子，我知道我可以通过在查询中添加 .Include("BankAccountTypes") 来修复它，但是我有其他非常复杂的查询正在创建对象，其中包括来自查询中的引用对象的属性，我我不太确定如何为他们解决这个问题。

**编辑：** 在项目之间休息后，我又回到了这个问题，我终于解决了我的问题。它与代码无关。它与数据有关。我已经通过转储和加载将 SQL Compact 数据库转换为 SQLite，并且我的 Guid 列数据的语法错误。我将 Guid 插入为 '7cee3e1c-7a2b-462d-8c3d-82dd6ae62fb4' 而它应该是 x'7cee3e1c7a2b462d8c3d82dd6ae62fb4'

希望我为解决这个问题而拔出的头发会长回来:)

谢谢各位的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:38:02.300

在第二个示例中，您的代码片段以：

```
var accoutTypes = budget.BankAccountTypes; 
```

这会将所有银行账户类型加载到您的应用程序中，您不再需要延迟加载（EF 将自动识别这些实体已经加载并修复与银行账户的关系）。

首先检查您的帐户类是否是动态代理（只需`a`在调试器中检查类型）。如果不是你在类定义中犯了一些错误，那么延迟加载将不起作用。`budget.ContextOptions.LazyLoadingEnabled`接下来检查是否在您的上下文实例（属性）上启用了延迟加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:17:51.060

确保 BankAccountType 属性在 BudgetEntities 中声明为虚拟。

# c - 可变参数宏中标记的串联

> ID：10458402
> 
> 赞同：5
> 
> 时间：2012-05-05T02:48:57.713
> 
> 标签：c, macros, variadic

在 C 中，是否可以在可变参数宏中连接每个变量参数？

例子：

```
MY_MACRO(A, B, C) // will yield HDR_A, HDR_B, HDR_C
MY_MACRO(X, Y)    // will yield HDR_X, HDR_Y 
```

普通`##`运算符对可变参数宏具有特殊含义（避免空参数列表的逗号）。当与 with 一起使用时，连接`__VA_ARGS__`仅与第一个标记一起发生。

例子：

```
#define MY_MACRO(...) HDR_ ## __VA_ARGS__

MY_MACRO(X, Y)    // yields HDR_X, Y 
```

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T08:11:05.780

首先，您提到的逗号规则是 gcc 扩展，标准 C 没有它，而且很可能永远不会有它，因为该功能可以通过不同的方式实现。

您正在寻找的是带有宏的元编程，这是可能的，但您需要一些技巧来实现这一点。[P99](http://p99.gforge.inria.fr/p99-html/group__preprocessor__for.html)为您提供了以下工具：

```
#define MY_PREFIX(NAME, X, I) P99_PASTE2(NAME, X)
#define MY_MACRO(...) P99_FOR(HDR_, P99_NARG(__VA_ARGS__), P00_SEQ, MY_PREFIX, __VA_ARGS__) 
```

*   这里`MY_PREFIX`描述了必须对各个项目执行的操作。
*   `P00_SEQ`声明项目应该如何分开
*   `P99_NARGS`只计算参数的数量

# php - 显示带有换行符的段落

> ID：10458403
> 
> 赞同：2
> 
> 时间：2012-05-05T02:49:04.527
> 
> 标签：php, html

我有一种情况，用户可以输入问题并将其写入 mysql 表中。

然后，我在管理面板中显示此文本以进行审核和回复。

我可以看到管理面板中的文本具有相同的新行（chrome 开发人员），但它显示为一个文本块（没有新行）...

我目前正在用来显示此文本...我已经尝试过，但它仍然没有换行符。

我应该如何用它包含的新行来显示这个文本？是否有 HTML 标记来执行此操作，或者我是否需要使用 PHP 和 sub \n 来表示 br 标记？

下面的例子：

```
 <span class="description">txthere

 txthere

 txthere

 txthere

 txthere.</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T03:00:52.900

在显示时，您可以使用 CSS 设置带有原始换行符的 HTML 样式，尝试`white-space`：

```
white-space: pre-line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:51:57.593

如果它是 textarea 或控制台，基本上它会使用`/n`浏览器无法识别为换行符的换行符，您需要转换`/n`为`<br/>`告诉浏览器这是一个换行符，使用这个 php 的函数

```
nl2br(); 
```

更多信息在这里：http: [//in.php.net/nl2br](http://in.php.net/nl2br)

这会将您的所有`/n`标签转换为`<br/>`标签，以便浏览器将其作为换行符处理

# php - 使用 DOMDocument 循环遍历多个 HTML 元素

> ID：10458404
> 
> 赞同：0
> 
> 时间：2012-05-05T02:49:36.077
> 
> 标签：php, domdocument

我有一个看起来像这样的页面：

```
...
<div class="container">

<div class="info">
<h3>Info 1</h3>
<span class="title">Title for Info 1</span>
<a href="http://www.example.com/1">Link to Example 1</a>
</div> <!-- /info -->

<div class="info">
<h3>Info 2</h3>
<span class="title">Title for Info 2</span>
<a href="http://www.example.com/2">Link to Example 2</a>
</div> <!-- /info -->

<div class="info">
<h3>Info 3</h3>
<span class="title">Title for Info 3</span>
<a href="http://www.example.com/3">Link to Example 3</a>
</div> <!-- /info -->

</div> <!-- /container -->
... 
```

每个 info 类 div 的结构都是相同的，我希望能够遍历文档并为每个具有类 info 的 div 将各种组件解析为数组或单个变量以达到目的以某种人类可读的格式输出数据，例如 csv 文件或 HTML 表格。

我尝试过使用 DOMDocument 方法，并使用 getElementByTagName 来提取每个标签的内容，但是由于 div 包含多种标签类型（h3、a、span），我还没有弄清楚如何完成我正在寻找的内容去做。

最后，我希望能够以如下格式放置数据：

```
divclass, h3, spanclass, spantitle, ahref, a
info, Info 1, title, Title for Info 1, http://www.example.com/1, Link to Example 1
... 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:07:01.160

```
<?php
$html = '
<div class="container">

<div class="info">
<h3>Info 1</h3>
<span class="title">Title for Info 1</span>
<a href="http://www.example.com/1">Link to Example 1</a>
</div> <!-- /info -->

<div class="info">
<h3>Info 2</h3>
<span class="title">Title for Info 2</span>
<a href="http://www.example.com/2">Link to Example 2</a>
</div> <!-- /info -->

<div class="info">
<h3>Info 3</h3>
<span class="title">Title for Info 3</span>
<a href="http://www.example.com/3">Link to Example 3</a>
</div> <!-- /info -->

</div> <!-- /container -->
';

$dom_document = new DOMDocument();

$dom_document->loadHTML($html);
$dom_document->preserveWhiteSpace = false;

//use DOMXpath to navigate the html with the DOM
$dom_xpath = new DOMXpath($dom_document);

$elements = $dom_xpath->query("//*[@class='info']");

if (!is_null($elements)) {

  foreach ($elements as $element) {
    echo "\n[". $element->nodeName. "]";

    $nodes = $element->childNodes;
    foreach ($nodes as $node) {
      echo $node->nodeValue. "\n";
    }

  }
} 
```

# javascript - 在页面重新加载时保留表单数据

> ID：10458406
> 
> 赞同：1
> 
> 时间：2012-05-05T02:50:02.057
> 
> 标签：javascript, forms, html, reload

我目前正在制作一个网站，我需要一种简单的方法来在页面重新加载时保留表单数据。是否有可能做到这一点？我在想它可以用javascript来完成。无论如何，如果您对如何执行此操作有任何想法，请发表评论。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:56:47.660

看看[sisyphus.js](http://simsalabim.github.com/sisyphus/)，它将通过`localStorage`客户端存储表单数据并在提交/重置时清除它。直接来自文档的简单示例：

```
$('form').sisyphus(); 
```

仅作记录，还有其他可用的库/解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:59:47.670

如果这不必是客户端，为什么不偶尔将表单发送到服务器以供以后检索。类似于使用 jQuery 的 serialize() 发送 ajax 帖子（参见[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)）。在服务器上，您可以将其保留在内存（会话状态）中，或者如果需要长时间保存到数据库中。

更好的解决方案可能是捕获 window.onbeforeunload 事件，将表单数据 ajax 到服务器，然后在重新加载从服务器重新检索表单时使用发布的数据。

但是，您可能需要注意，因为我注意到一些浏览器已经尝试这样做。据我回忆，FireFox 实际上会尝试保持表单状态，因此请确保这两种方法（您的和浏览器的）不会在某些浏览器中发生冲突。

# c# - 如何使用 JQuery 从部分视图访问根视图中的其他元素

> ID：10458409
> 
> 赞同：1
> 
> 时间：2012-05-05T02:50:17.917
> 
> 标签：c#, jquery, asp.net-mvc-3, views, show

我对一些 JQuery 有部分看法......

```
 $("#btnCancelPayment").click(function () {
        $(this).closest('#test').show('fast');
        $(this).closest("#paymentSection").hide('fast');
    }); 
```

而这个部分视图位于根视图中 id 为 paymentSection 的 div 中...想知道如何在根视图上找到除 paymentSection div 之外的其他元素...（上面的隐藏有效，但显示没有）。根视图：

```
<div id="test">testing </div>

<div id="paymentSection"></div> 
```

这是JQuery...

```
$("#btnYesPayment").click(function () {
   ....
        $("#paymentSection").load('/Donation/AddPaymentInfo', function () {
            $("#paymentSection").show('fast');
            $('#spinner').hide();
        });
    }); 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:25:03.107

更改此行

```
 $(this).closest('#test').show('fast'); 
```

到

```
if($('#test').length>0){
 $('#test').show('fast');
}else console.log('there is no such element'); 
```

# ios - 如何处理搜索词中的空格

> ID：10458410
> 
> 赞同：1
> 
> 时间：2012-05-05T02:50:20.263
> 
> 标签：ios, string, search, space

我正在使用以下代码片段实现搜索。

```
-(void)getData:(NSString *)searchString
{
    //Search string is the string the user keys in as keywords for the search. In this case I am testing with the keywords "epic headline"
    searchString = [searchString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSString *resourcePath = [NSString stringWithFormat:@"/sm/search?limit=100&term=%@&types[]=users&types[]=questions&types[]=topics",searchString];

    [self sendRequests:resourcePath];
}

//URL sent to server as a result
send Request /sm/search?limit=100&term=epic headline&types[]=users&types[]=questions&types[]=topics 
```

我的搜索不起作用，因为它无法处理“史诗”和“标题”之间的空格。如何修改搜索词以便处理间距？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T02:56:49.213

对结果字符串调用 stringByAddingPercentEscapesUsingEncoding 以按照 URL 规则的要求对空格字符进行编码。

# javascript - EXTJS 网格 + JSP 数据未加载

> ID：10458412
> 
> 赞同：0
> 
> 时间：2012-05-05T02:51:05.697
> 
> 标签：javascript, jsp, extjs

我尝试使用 jsp 对 EXTJS Grid 进行编码。我修改了EXTJS的例子，从jsp页面获取数据，但是数据没有加载。

能否请你帮忙 ？

网格js

```
<script type="text/javascript">

Ext.Loader.setConfig({enabled: true});

Ext.Loader.setPath('Ext.ux', './js/ux/');
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.toolbar.Paging',
    'Ext.ux.PreviewPlugin',
    'Ext.ModelManager',
    'Ext.tip.QuickTipManager'
]);

Ext.onReady(function(){
    Ext.tip.QuickTipManager.init();

   var store = new Ext.data.Store({
    proxy: new Ext.data.HttpProxy({
        url: 'data.jsp'
    }),
    reader: new Ext.data.JsonReader({
        root: 'topics',
        totalProperty: 'totalCount',
        id: 'threadid'
    },
     [
       {name: 'title'},
       {name: 'postid'},
       {name: 'username'},
       {name: 'lastpost'},
       {name: 'excerpt'},
       {name: 'userid'},
       {name: 'dateline'},
       {name: 'forumtitle'},
       {name: 'forumid'},
       {name: 'replycount'},
       {name: 'lastposter'}        
   ]),
    baseParams: {
        abc: 123
    }
});   

    var pluginExpanded = true;
    var grid = Ext.create('Ext.grid.Panel', {
        width: 700,
        height: 500,
        title: 'ExtJS.com - Browse Forums',
        store: store,
        disableSelection: true,
        loadMask: true,       
        // grid columns
        columns:[{
            id: 'topic',
            text: "Topic",
            dataIndex: 'title',
            flex: 1,           
            sortable: false
        },{
            text: "Author",
            dataIndex: 'username',
            width: 100,
            hidden: true,
            sortable: true
        },{
            text: "Replies",
            dataIndex: 'replycount',
            width: 70,
            align: 'right',
            sortable: true
        },{
            id: 'last',
            text: "Last Post",
            dataIndex: 'lastpost',
            width: 150,            
            sortable: true
        }],
        // paging bar on the bottom
        bbar: Ext.create('Ext.PagingToolbar', {
            store: store,
            displayInfo: true,
            displayMsg: 'Displaying topics {0} - {1} of {2}',
            emptyMsg: "No topics to display"
        }),
        renderTo: 'topic-grid'
    });

    // trigger the data store load
    store.loadPage(1);
});
</script> 
```

jsp，数据.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  pageEncoding="ISO-8859-1"%>

<%
String data = "{\"totalCount\":\"1\",\"topics\":[{\"title\":\"XTemplate with in EditorGridPanel\",\"threadid\":\"133690\",\"username\":\"kpr@emco\",\"userid\":\"272497\",\"dateline\":\"1305604761\",\"postid\":\"602876\",\"forumtitle\":\"Ext 3.x: Help\",\"forumid\":\"40\",\"replycount\":\"2\",\"lastpost\":\"1305857807\",\"lastposter\":\"kpr@emco\",\"excerpt\":\"Hi\"}]}";

out.println(data);

System.out.println(data);
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:29:12.960

您的 json 列标题似乎都与您的 ExtJS 模型不匹配。

模型需要与数据具有相同的列名，以便它知道将数据放在哪里。

**更新**

我对您的商店数据模型实施感到困惑。我从未见过它作为 new 的第二个参数实现`JsonReader`。

但是因为您使用的是`baseParam`配置，所以我假设您使用的是 ExtJS 3.x 而不是 4.x，而且我承认我对 3.x 不是很熟悉，所以这可能是一个合法的数据模型实现。

在 ExtJS 4.x 中，数据模型通常被实现为与 store 不同的对象，如下所示：

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'title',       type: 'string'},
        {name: 'postid',      type: 'int'},
        {name: 'username',    type: 'string'},
        {name: 'lastpost',    type: 'int'},
        {name: 'excerpt',     type: 'string'},
        {name: 'userid',      type: 'int'},
        {name: 'dateline',    type: 'int'},
        {name: 'forumtitle',  type: 'string'},
        {name: 'forumid',     type: 'int'},
        {name: 'replycount',  type: 'int'},
        {name: 'lastposter',  type: 'string'}        
    ]
});

var store = Ext.create('Ext.data.Store', {
    model: 'User',
    proxy: {
        type: 'ajax',
        url : 'data.jsp',
        reader: {
            type: 'json',
            root: 'topics',
            totalProperty: 'totalCount',
            idProperty: 'threadid'
        }
    }
}); 
```

如果您实际使用的是 3.x，我不确定这在其他版本的 ExtJS 中是如何工作的，您必须检查自己的 ExtJS 文档。同样按照建议，您应该在浏览器的错误控制台中看到一条错误消息。这将告诉您确切的问题是什么。

# ms-access - 在内存中，独立，断开连接的 ADO 记录集

> ID：10458418
> 
> 赞同：5
> 
> 时间：2012-05-05T02:53:17.540
> 
> 标签：ms-access, ms-access-2007, vba

当我的表单加载并且我没有收到任何错误消息或代码中断时，我正在我的数据表子表单上运行此代码。我的 debug.print 显示 Recordset rs 充满了应有的 2131 条记录，但我的表单显示了带有 #Name 的单行？在每个领域。我的控件上的控件源属性肯定与我上面列出的字段名称匹配。RS 是一个表单级变量，在表单关闭之前我不会关闭它或将其设置为空。

知道我在做什么错吗？

```
Set rs = New ADODB.Recordset
rs.Fields.Append "TimesUsed", adInteger
rs.Fields.Append "strWorkType", adVarWChar, 150
rs.Fields.Append "DateLastUsed", adDate
rs.Fields.Append "SelectedYN", adBoolean
Set rs.ActiveConnection = Nothing
rs.CursorLocation = adUseClient
rs.LockType = adLockBatchOptimistic
rs.Open

Dim sSQL As String
sSQL = "MyComplicated SQL Statement Ommitted from this SO Question"

Dim r As DAO.Recordset
Set r = CurrentDb.OpenRecordset(sSQL, dbOpenDynaset, dbSeeChanges)
If Not (r.EOF And r.BOF) Then
    r.MoveFirst
    Dim fld
    Do Until r.EOF = True
        rs.AddNew
        For Each fld In r.Fields
            rs(fld.Name) = r(fld.Name).value
        Next
        rs.Update
        r.MoveNext
    Loop
End If
r.Close
Set r = Nothing
Debug.Print rs.RecordCount '2131 records
Set Me.Recordset = rs 
```

好的，所以我刚刚[在 MSDN 网站上阅读了这篇文章](http://msdn.microsoft.com/en-us/library/bb243828%28v=office.12%29.aspx)：

*记录集必须包含一个或多个具有唯一索引的字段，例如表的主键。*

（注意：在这种情况下，此信息似乎是错误的。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T03:14:11.827

*是否可以在仅作为内存对象的记录集上设置主键？*

是的，用作`adFldKeyColumn`Append [Method](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681564%28v=vs.85%29.aspx)。阅读有关[FieldAttributeEnum](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676553%28v=vs.85%29.aspx)的更多详细信息。`Attrib`

如果您的 SQL 语句中已经有一个合适的唯一字段（或字段组合），请使用它。如果没有，请创建一个长整数字段并将其用作假主键字段...增加您插入的每一行的值。

```
rs.Fields.Append "pkey", adInteger, , adFldKeyColumn 
```

另请参阅 Danny Lesandrini 的 Database Journal 中的这篇文章是否有帮助：[Create In-Memory ADO Recordsets](http://www.databasejournal.com/features/msaccess/article.php/3846361/Create-In-Memory-ADO-Recordsets.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T15:00:16.140

我发现我可以完成这项工作的唯一方法是使用 LockType adLockPessimistic 或 adLockOptimisic。adLockReadOnly 出于明显的原因不起作用，并且由于某种原因，adLockBatchOptimistic 不允许记录在我的表单中显示，即使记录集似乎功能齐全。

我还发现您不必为这种类型的断开连接的 Recordset 定义主键以绑定到表单。我确定您将无法通过表单对记录集进行任何编辑或更新，但在我的测试中，我发现无论如何我都无法对这种类型的表单/记录集进行任何编辑，因为我收到了错误 3270 （与缺少的属性有关）。这确实超出了这个问题的范围。

以下是创建工作内存记录集所需的最少代码量：

```
Dim rs As ADODB.Recordset 'Form Level variable

Private Sub Form_Load()
    Set rs = New ADODB.Recordset
    rs.Fields.Append "ID", adInteger
    'Set rs.ActiveConnection = Nothing 'Not Required
    'rs.CursorType = adOpenKeyset 'Not Required
    'rs.CursorLocation = adUseClient 'Not Required
    rs.LockType = adLockPessimistic 'May also use adLockOptimistic
    rs.Open

    Dim i as Integer

    For i = 1 To 10
        rs.AddNew
        rs("ID").Value = i
        rs.Update
    Next i

    Set Me.Recordset = rs
End Sub 
```

在我看来，将表单（在我的情况下为数据表视图）绑定到这种类型的断开连接的记录集对于我的特定需求来说是一个很好、简单的解决方案。但是，我遇到了几个问题。当您将表单绑定到 ADO 记录集时，默认表单排序似乎不起作用。此外，由于某种原因，我永远无法让这个记录集可编辑/可更新，这是我的需求（我基本上将它用作多检查列表）。如果您从表中获取记录集（即使它是一个空表），然后断开连接，您可以解决此问题。显然，该表提供了我在上面的代码中未能设置的某种结构或属性，从我尝试添加/编辑记录时收到的 3270 错误消息来看。而我没有

总之，我认为我将改用 Access“临时”表，因为它不会那么复杂，并且不会出现我刚刚在上面列出的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T06:37:31.130

[注意：通过使用上面在创建内存中 ADO 记录集中](http://www.databasejournal.com/features/msaccess/article.php/3846361/Create-In-Memory-ADO-Recordsets.htm)显示的示例，我能够使一切正常工作以及插入新记录， 然后将以下内容更改为表单代码...'注意：诀窍是使用 rstADO。 rstADO.Update 之后的 MoveFirst & rstADO.MoveLast

```
Option Compare Database
Dim rstADO As ADODB.Recordset
Dim lngRecordID As Long

Private Sub Form_BeforeInsert(Cancel As Integer)

    lngRecordID = lngRecordID + 1
    rstADO.AddNew
    rstADO("EmployeeID").value = lngRecordID
    rstADO.Update
    rstADO.MoveFirst
    rstADO.MoveLast

End Sub

Private Sub Form_Load()

    Dim fld As ADODB.Field

    Set rstADO = New ADODB.Recordset
    With rstADO
        .Fields.Append "EmployeeID", adInteger, , adFldKeyColumn
        .Fields.Append "FirstName", adVarChar, 10, adFldMayBeNull
        .Fields.Append "LastName", adVarChar, 20, adFldMayBeNull
        .Fields.Append "Email", adVarChar, 64, adFldMayBeNull
        .Fields.Append "Include", adInteger, , adFldMayBeNull
        .Fields.Append "Selected", adBoolean, , adFldMayBeNull

        .CursorType = adOpenKeyset
        .CursorLocation = adUseClient
        .LockType = adLockPessimistic
        .Open
    End With
    Set Me.Recordset = rstADO

End Sub

Private Sub Form_Unload(Cancel As Integer)

    Set rstADO = Nothing

End Sub 
```

# django - 为什么 django 在 IE 中显示不可读的字符？

> ID：10458420
> 
> 赞同：0
> 
> 时间：2012-05-05T02:53:32.507
> 
> 标签：django, internet-explorer

我的 django 代码在 chrome 和 firefox 中工作，但在 IE 中，网页显示不可读的字符。以下是我的代码设置：

```
DEFAULT_CHARSET = 'utf8'
FILE_CHARSET = 'utf8' 
```

并且模板文件保存为 utf8 格式，但我的模板文件除了英语还有其他语言。那个非英文部分是不可读的。

我应该更改 django 的一些设置吗？我网站的大部分访问者可能使用IE，所以这是一个大问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:24:35.513

您是否将此元添加到您的基本 html 中？

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

# javascript - javascript奇怪的行为

> ID：10458421
> 
> 赞同：0
> 
> 时间：2012-05-05T02:54:05.733
> 
> 标签：javascript, css, position

我有一些代码试图根据它们的高度列出图像。奇怪的是，当我尝试使用 2 张图片时，相同的代码有点用，但当我尝试使用 3 张或更多图片时却不起作用

网站：[http ://bit.ly/JV5I0Z](http://bit.ly/JV5I0Z)

如果您单击菜单按钮，图像应该在另一个下方列出自己，填充宽度与黑线一样宽。如果您单击创建 2 个缩略图的第一个按钮，它们可以工作，但其他按钮不执行任何操作

代码：http: [//jsfiddle.net/5qt3s/](http://jsfiddle.net/5qt3s/)

我试图删除所有不相关的东西以使其尽可能简单

我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:16:46.180

您的网络空间 (euroscala.balkanium.com) 上只有两个小图像：

```
images/shkalla/small/1.jpg
images/shkalla/small/2.jpg 
```

`images/shkalla/small/3.jpg`不存在所以当它到达这个图像时（在循环里面`createThumbs`）而不是触发`img.onload`它触发的事件`img.onerror`，因为它无法加载图像。这意味着您的`totalLoaded`计数永远不会达到`totalThumbs`并且`redrawThumbs`不会被调用。

要么创建丢失的图像，要么挂钩`img.onerror`事件并跳过图像。

# javascript - JS 来监控 CSS 属性的变化，比如“display:none”=>“display:block”？

> ID：10458428
> 
> 赞同：4
> 
> 时间：2012-05-05T02:56:26.873
> 
> 标签：javascript, jquery, css, callback

当图像的 CSS 属性“显示”已被任何其他 JS 脚本/函数更改时，我想运行一些 JS 代码。是否有任何方法可以监视该更改并设置回调函数？

```
$(this).bind.('propertychange', function(){}) 
```

不能这样做，并且 setInterval 也是一个坏主意。

还能做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T03:12:33.967

这就是您要查找的内容：

```
document.documentElement.addEventListener('DOMAttrModified', function(e){
  if (e.attrName === 'style') {
    console.log('prevValue: ' + e.prevValue, 'newValue: ' + e.newValue);
  }
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:26:21.773

这是您不想修改的旧 JavaScript 文件中的内容：

```
// this is your original, unmodified function
function originalFunction(sel) {
    alert(sel);
    $(sel).css("display","none");
} 
```

这是在您的代码中：

```
// here is a sample callback function you pass into the extended function below
function myCallback(s) {
    alert("The image with src = '" + $(s).attr("src") + "' has been modified!");
}

// here is how you can extend the function to do what you want 
  // without needing to modify the actual code above
originalFunction = (function(legacyFn, callback) {

    // 1 arg function to be returned and reassigned to originalFunction
    return function(sel) {

        // call "original" originalFunction, with alert and image hide.
        legacyFn(sel);  

        if(callback) callback(sel);  // invoke your callback
    }

})(originalFunction, myCallback); 
```

该变量`originalFunction`被分配了一个接受一个参数的函数。接受一个参数的函数由一个匿名的、自执行的函数返回，该函数接受两个参数、对`originalFunction`修改前的引用和对`callback`函数的引用。这两个函数引用在闭包内被“锁定”，因此当`originalFunction`自执行函数随后为 分配新值时，`legacyFn`参数仍然包含对`originalFunction`修改之前的引用。

总而言之，在更高的层次上，`originalFunction`and`myCallback`作为参数传递给自执行匿名函数，并传递给变量 legacyFn 和 callback，然后将新函数分配给`originalFunction`.

现在，当您调用 时`originalFunction('.someClassOnAnImage')`，legacyFn 将触发，这将提醒选择器并将 display 属性设置为 none。之后，回调函数（如果存在）将触发，然后您将看到：

```
The image with src = '.someClassOnAnImage' has been modified! 
```

虽然这不如假设的或特定于平台的 addEventListener 好，但它确实允许您修改遗留代码中函数的行为，而无需物理地打开这些文件并修改它们。这只是扩展功能以执行其他行为，但无需为此修改原始功能甚至原始文件。

您可以将所有扩展巧妙地包含在一个单独的 JavaScript 文件（或您正在使用的任何 JavaScript 文件）中，如果您想返回原始行为，只需删除您的扩展函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:58:35.357

答案：查看其他帖子 >>[是否有可以在 webkit 中使用的 DOMAttrModified 的替代品](https://stackoverflow.com/questions/1882224/is-there-an-alternative-to-domattrmodified-that-will-work-in-webkit)

咆哮：DOM Mutation 事件是解决问题的关键。然而，在新一波的浏览器大战中，Wekit 和 Gecko 不能在事情上达成一致。虽然 Gecko 有 DOMAttrModified，但 webkit 有一个叫做突变观察者的东西（它打破了事件处理程序附加到事件的模式，但是当我们想要锁定用户/编码器时，谁关心一致性？;）

PS：这里只是为具有相同智慧的未来寻求者添加这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T03:09:35.423

基于 Jeff 的建议，我建议编写一个修改图像样式属性的函数，然后将该函数用作所有其他函数必须通过才能修改该图像样式属性的瓶颈。

```
function showImage(selector, callback) {
    $(selector).css("display","block");
    if(callback)
        callback();
}

function hideImage(selector, callback) {
    $(selector).css("display","none");
    if(callback)
        callback();
} 
```

当您必须更改图像 CSS 属性时，可以从 JavaScript 中的任何位置调用上述两个函数。这些函数还将函数作为参数，假设函数作为第二个参数传入，之后将执行该函数。

您可以将其进一步简化为一个函数，但我将把它留给您，因为我不知道您这样做的确切目标是什么。

# objective-c - 在自定义类上实现 touchesBegan

> ID：10458432
> 
> 赞同：0
> 
> 时间：2012-05-05T02:56:54.503
> 
> 标签：objective-c, ios5

我有一个 UIViewController 有很多方法，因此我想把它分成单独的类，让我的代码更有条理。我想知道是否可以放置

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {
    // code
 } 
```

单独的类上的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:22:06.120

触摸控制功能适用于您放置它们的 UIView 或 UIViewController。因此，据我所知，您可以不将它们按原样放置在不同的类中。

也就是说，如果你的目标是清理你的代码，你可以继承 UIView 并在你的项目中放置一个新 UIView 的实例，而不是让你的 UIViewController 处理触摸。将 UIView 设置为您想要的大小并将 alpha 设置为 0，这样用户就不会知道它的存在。

如果您只想在屏幕的某个区域进行触摸识别，这种方法也会让您的生活更轻松。

# android - 从 WebView 调用

> ID：10458435
> 
> 赞同：1
> 
> 时间：2012-05-05T02:57:41.060
> 
> 标签：android, webview, android-webview

我正在开发一个在 webview 上运行的应用程序。
他们是一个自动拨打号码的链接，但如果我将它添加到我的 WebView 并单击该链接，它会退出我的应用程序。

```
 myWebView.loadUrl("http://m.calleridfaker.com");
 myWebView.setWebChromeClient(new WebChromeClient() {

public void onProgressChanged(WebView view, int progress)
{

   setTitle("Loading ..... This app uses Internet connection");
   // setProgress(progress * 100);
    setProgress(progress);

    if(progress == 100)
        setTitle(R.string.app_name);

    myWebView.loadUrl("javascript: {document.getElementById('id_my_phoneno').value ='"+phoneNumber+"'};"); 
      myWebView.loadUrl("javascript: {document.getElementById('id_email').value ='"+possibleEmail+"'};"); 
      myWebView.loadUrl("javascript: {document.getElementById('admob').style.display ='none'};"); 
      myWebView.loadUrl("javascript: {document.getElementById('download-apps').style.display ='none'};"); 
      myWebView.loadUrl("javascript: {document.getElementById('id_record').style.display ='none'};"); 
      myWebView.loadUrl("javascript: {document.getElementById('secondHeader').style.display ='none'};"); 

     myWebView.loadUrl("javascript:(function() { " +
             "document.getElementsByTagName('small')[0].style.display = 'none'; " +
             "})()");
     myWebView.loadUrl("javascript:(function() { " +
             "document.getElementsByTagName('img')[2].style.display = 'none'; " +
             "})()");
     myWebView.loadUrl("javascript:(function() { " +
             "document.getElementsByTagName('div')[20].style.display = 'none'; " +
             "})()");
     myWebView.loadUrl("javascript:(function() { " +
             "document.getElementsByTagName('div')[15].style.display = 'none'; " +
             "})()");

   }
 });

}} 
```

有一个链接导致当我在 WebView 中单击它时，应用程序将关闭。

# python - Python2 中的 dict.items() 和 dict.iteritems() 有什么区别？

> ID：10458437
> 
> 赞同：754
> 
> 时间：2012-05-05T02:58:27.393
> 
> 标签：python, dictionary, python-2.x

[`dict.items()`](http://docs.python.org/library/stdtypes.html#dict.items)和之间有任何适用的区别[`dict.iteritems()`](http://docs.python.org/library/stdtypes.html#dict.iteritems)吗？

来自[Python 文档](https://docs.python.org/2/library/stdtypes.html#mapping-types-dict)：

> `dict.items()`：返回字典的（键，值）对列表的**副本。**
> 
> `dict.iteritems()`:在字典的 (key, value) 对上返回一个**迭代器。**

如果我运行下面的代码，每个似乎都返回对同一对象的引用。我是否缺少任何细微的差异？

```
#!/usr/bin/python

d={1:'one',2:'two',3:'three'}
print 'd.items():'
for k,v in d.items():
   if d[k] is v: print '\tthey are the same object' 
   else: print '\tthey are different'

print 'd.iteritems():'   
for k,v in d.iteritems():
   if d[k] is v: print '\tthey are the same object' 
   else: print '\tthey are different' 
```

输出：

```
d.items():
    they are the same object
    they are the same object
    they are the same object
d.iteritems():
    they are the same object
    they are the same object
    they are the same object 
```

* * *

## 回答 #1

> 赞同：919
> 
> 时间：2012-05-05T03:26:27.157

这是进化的一部分。

最初，Python`items()`构建了一个真实的元组列表并将其返回。这可能会占用大量额外的内存。

然后，生成器被引入到语言中，并且该方法被重新实现为名为 的迭代器-生成器方法`iteritems()`。原始保留是为了向后兼容。

Python 3 的变化之一是 `items()`现在返回视图，并且 a`list`从未完全构建。该`iteritems()`方法也消失了，因为`items()`在 Python 3 中的工作方式与`viewitems()`在 Python 2.7 中一样。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-05-05T03:00:52.600

`dict.items()`返回 2 元组 ( `[(key, value), (key, value), ...]`) 的列表，而`dict.iteritems()`是产生 2 元组的生成器。前者最初需要更多的空间和时间，但访问每个元素很快，而第二种最初需要更少的空间和时间，但生成每个元素的时间要多一些。

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2013-12-02T13:33:29.677

## 在 Py2.x 中

commands`dict.items()`和返回字典的对、键和值`dict.keys()`列表**的**副本**。**如果复制的列表非常大，这可能会占用大量内存。`dict.values()`****`(k, v)`****

 ****commands`dict.iteritems()`和返回字典对、键和值`dict.iterkeys()`的**迭代器。**`dict.itervalues()`**`(k, v)`**

 **commands `dict.viewitems()`，`dict.viewkeys()`并`dict.viewvalues()`返回[**视图对象**](http://docs.python.org/2/library/stdtypes.html#dictionary-view-objects)，可以反映字典的变化。（即如果您在字典中`del`添加一个项目或添加一对，则视图对象可以同时*自动*更改。）`(k,v)`

 *```
$ python2.7

>>> d = {'one':1, 'two':2}
>>> type(d.items())
<type 'list'>
>>> type(d.keys())
<type 'list'>
>>> 
>>> 
>>> type(d.iteritems())
<type 'dictionary-itemiterator'>
>>> type(d.iterkeys())
<type 'dictionary-keyiterator'>
>>> 
>>> 
>>> type(d.viewitems())
<type 'dict_items'>
>>> type(d.viewkeys())
<type 'dict_keys'> 
```

* * *

# 在 Py3.x 中

在 Py3.x 中，事情更加干净，因为只有`dict.items()`,`dict.keys()`和`dict.values()`available ，它们返回**视图对象**，就像`dict.viewitems()`在 Py2.x 中一样。

### 但

正如@lvc 所指出的，**视图对象**与**迭代器**不同，所以如果你想在 Py3.x 中返回一个**迭代器**，你可以使用[`iter(dictview)`](http://docs.python.org/3.3/library/stdtypes.html#dictionary-view-objects)：

```
$ python3.3

>>> d = {'one':'1', 'two':'2'}
>>> type(d.items())
<class 'dict_items'>
>>>
>>> type(d.keys())
<class 'dict_keys'>
>>>
>>>
>>> ii = iter(d.items())
>>> type(ii)
<class 'dict_itemiterator'>
>>>
>>> ik = iter(d.keys())
>>> type(ik)
<class 'dict_keyiterator'> 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2012-05-05T06:29:57.203

你问：'dict.items() 和 dict.iteritems() 之间有什么适用的区别吗？

这可能会有所帮助（对于 Python 2.x）：

```
>>> d={1:'one',2:'two',3:'three'}
>>> type(d.items())
<type 'list'>
>>> type(d.iteritems())
<type 'dictionary-itemiterator'> 
```

你可以看到它`d.items()`返回一个键值对的元组列表，并`d.iteritems()`返回一个字典迭代器。

作为一个列表， d.items() 是可切片的：

```
>>> l1=d.items()[0]
>>> l1
(1, 'one')   # an unordered value! 
```

但不会有一个`__iter__`方法：

```
>>> next(d.items())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: list object is not an iterator 
```

作为迭代器， d.iteritems()**不能**切片：

```
>>> i1=d.iteritems()[0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'dictionary-itemiterator' object is not subscriptable 
```

但确实有`__iter__`：

```
>>> next(d.iteritems())
(1, 'one')               # an unordered value! 
```

所以物品本身是一样的——运送物品的容器是不同的。一个是列表，另一个是迭代器（取决于 Python 版本...）

所以 dict.items() 和 dict.iteritems() 之间的适用差异与列表和迭代器之间的适用差异相同。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-09-11T02:26:01.923

`dict.items()`返回元组列表，并将`dict.iteritems()`字典中元组的迭代器对象作为`(key,value)`. 元组相同，但容器不同。

`dict.items()`基本上将所有字典复制到列表中。尝试使用以下代码比较 和 的执行`dict.items()`时间`dict.iteritems()`。你会看到不同之处。

```
import timeit

d = {i:i*2 for i in xrange(10000000)}  
start = timeit.default_timer() #more memory intensive
for key,value in d.items():
    tmp = key + value #do something like print
t1 = timeit.default_timer() - start

start = timeit.default_timer()
for key,value in d.iteritems(): #less memory intensive
    tmp = key + value
t2 = timeit.default_timer() - start 
```

在我的机器上输出：

```
Time with d.items(): 9.04773592949
Time with d.iteritems(): 2.17707300186 
```

这清楚地表明`dictionary.iteritems()`效率更高。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-10-16T13:40:33.890

`dict.iteritems`在 Python3.x 中没有了所以使用`iter(dict.items())`来获得相同的输出和内存分配

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-09-11T01:37:43.510

如果你有

`dict = {key1:value1, key2:value2, key3:value3,...}`

在**Python 2**中，`dict.items()`复制每个元组并返回字典 ie 中的元组列表`[(key1,value1), (key2,value2), ...]`。含义是整个字典被复制到包含元组的新列表中

```
dict = {i: i * 2 for i in xrange(10000000)}  
# Slow and memory hungry.
for key, value in dict.items():
    print(key,":",value) 
```

`dict.iteritems()`返回字典项迭代器。返回的项目的值也是相同的 ie `(key1,value1), (key2,value2), ...`，但这不是一个列表。这只是字典项迭代器对象。这意味着更少的内存使用（减少 50%）。

*   列为可变快照：`d.items() -> list(d.items())`
*   迭代器对象：`d.iteritems() -> iter(d.items())`

元组是相同的。你比较了每个元组，所以你得到了相同的结果。

```
dict = {i: i * 2 for i in xrange(10000000)}  
# More memory efficient.
for key, value in dict.iteritems():
    print(key,":",value) 
```

在**Python 3**中，`dict.items()`返回迭代器对象。dict.iteritems() 已删除，因此不再有问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-07T22:54:59.633

如果您想要一种方法来迭代适用于 Python 2 和 3 的字典的项目对，请尝试以下操作：

```
DICT_ITER_ITEMS = (lambda d: d.iteritems()) if hasattr(dict, 'iteritems') else (lambda d: iter(d.items())) 
```

像这样使用它：

```
for key, value in DICT_ITER_ITEMS(myDict):
    # Do something with 'key' and/or 'value'. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-29T12:50:31.807

`dict.iteritems()`: 给你一个迭代器。您可以在循环之外的其他模式中使用迭代器。

```
student = {"name": "Daniel", "student_id": 2222}

for key,value in student.items():
    print(key,value)

('student_id', 2222)
('name', 'Daniel')

for key,value in student.iteritems():
    print(key,value)

('student_id', 2222)
('name', 'Daniel')

studentIterator = student.iteritems()

print(studentIterator.next())
('student_id', 2222)

print(studentIterator.next())
('name', 'Daniel') 
```

* * *

## 回答 #10

> 赞同：-7
> 
> 时间：2018-01-17T14:32:17.007

python 2 中的 dict.iteritems() 等价于 python 3 中的 dict.items()。*******

# iphone - iOS 使用音量按钮作为输入

> ID：10458438
> 
> 赞同：3
> 
> 时间：2012-05-05T02:58:44.617
> 
> 标签：iphone, ios5

我最近下载了一个使用“音量-”按钮切换值的应用程序，它使用“音量+”按钮开始/停止视频录制。该应用名为 SloPro，可在应用商店中找到。我认为不允许修改 iPhone 硬件的行为。关于如何完成的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T03:22:31.617

有关更多详细信息，请参阅[音频会话服务参考](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007915)，但基本上您使用`AudioSessionInitialize`. 然后你让它活跃起来`AudioSessionSetActive`。然后侦听音量的变化`AudioSessionAddPropertyListener`，您可以在其中传递具有 type 的回调`AudioSessionPropertyListener`。

查看以下网站以获取示例： http: [//fredandrandall.com/blog/2011/11/18/taking-control-of-the-volume-buttons-on-ios-like-camera/](http://fredandrandall.com/blog/2011/11/18/taking-control-of-the-volume-buttons-on-ios-like-camera/)

# java - 如何使用 Ant 将非 java 资源文件包含在已编译的类中

> ID：10458443
> 
> 赞同：5
> 
> 时间：2012-05-05T02:59:50.057
> 
> 标签：java, ant

我有一个 Java 项目，文件`src`夹中包含所有源文件。这个 src 文件夹包含几个包。其中一些包/文件夹不包含任何 Java 代码。它们只包含一些我在应用程序中用作图标的图像。

目录结构类似于以下。

```
src/
com/
   example/
       pk1/     # This contains only some Java files.
       pk2/     # This will contain some XML and Java code.
       im1/     # This subfolder will contain just the images 
```

现在，当我使用该`javac`任务时，它会将所有 Java 文件编译为类文件并将它们存储在我指定的目标目录中。但是，非 java 文件仍保留在源文件夹中。

我在 SO 上提到了这个[问题。](https://stackoverflow.com/questions/1216744/adding-non-code-resources-to-jar-file-using-ant)但是，我认为在我的情况下，我想将所有非 Java 资源文件（无需显式指定要移动的文件）自动包含到`build`目录（包含所有类文件的目录）中，同时遵循相同的目录结构在源。

如果我遗漏了一些非常琐碎的事情，请原谅我，但是我该如何让 Ant 这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T03:01:27.293

使用 ant[`copy`](http://ant.apache.org/manual/Tasks/copy.html)任务将您的资源复制到`classes`目录（或`.class`存储文件的任何位置）。默认情况下，ant 保持目录结构。

例如：

```
<copy todir="classes">
  <fileset dir="com/example">
    <exclude name="**/*.java"/>
  </fileset>
</copy> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-25T08:32:42.677

只是为了完成上一个答案，块

```
<copy todir="classes">
  <fileset dir="com/example">
    <exclude name="**/*.java"/>
  </fileset>
</copy> 
```

在任务 javac 之前

```
<javac [...] 
```

并在目标编译内

```
<target name="compile" [...] 
```

然后

```
<target name="compile" [...]>
   <copy todir="&&&" [...]>
       [...]
   </copy>

   <javac srcdir="[...]" destdir="&&&" >
   </javac>
</target> 
```

在我的例子中，标签“copy”的属性“todir”与标签“javac”的属性“destdir”相同；我想详细说明答案，以便尽快为您提供解决方案。

# objective-c - 防止在 segue 中关闭视图控制器

> ID：10458444
> 
> 赞同：1
> 
> 时间：2012-05-05T03:00:10.857
> 
> 标签：objective-c, ios, uiviewcontroller, uistoryboard, uistoryboardsegue

我正在使用 StoryBoards 并试图将视图控制器的视图覆盖在另一个视图控制器的视图之上，以便两者可见（顶部有几个透明区域）。

如果我用模态 Segue 将两者连接在一起，然后调用`[self performSegueWithIdentifier:@"showTutorial" sender:nil];`源视图被删除并显示目标视图。没有喜悦。

如果我用 push Segue 连接它们，调用`[self performSegueWithIdentifier:@"showTutorial" sender:nil];`不会带来新的视图。在导航控制器中嵌入源视图控制器会调出目标视图，但也会删除源视图。没有喜悦。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:52:50.280

@Inafziger：我以为我可以通过转场来做到这一点，但转场不是办法。另外，因为我想继续使用 Storyboard 并避免从头开始制作新的 nib 文件，所以我做了以下工作：

`tutorialView = [self.storyboard instantiateViewControllerWithIdentifier:@"Tutorial"];`

`[self.view addSubview:tutorialView.view];`

然后在 Storyboard 中，在 ViewController 的 Identifier 字段中写入“Tutorial”。

# image - 如何将 Adob e Flex 中的图像 URL 与数据库中的数据绑定？

> ID：10458445
> 
> 赞同：0
> 
> 时间：2012-05-05T03:00:16.740
> 
> 标签：image, apache-flex, bind

目前我正在从存储在数据网格中的数据库中检索数据。我创建了一个使用 ItemRenderer 的新列，在其中我想显示一个 facebook 个人资料图像。我没有将这些存储在我的数据库中，因为它们可以公开访问。我有我用户的 facebook ID，所以我希望将此数据与所需的 URL 绑定以显示正确的图像。

我已经尝试了以下两种方法： `<s:Image id="fbImg" source="http://graph.facebook.com/{getUserResult.lastResult.facebookid}/picture?‌​type=normal"/>`

和

`<s:Image id="fbImg" source="{'http://graph.facebook.com/' + getUserResult.lastResult.facebookid + '/picture?type=normal'}"/>`

我收到 1120 错误（访问未定义的属性），但我不知道为什么。我的数据网格是使用填充的`<s:AsyncListView list="{getUserResult.lastResult}"/>`，我可以设法从 getUserResult.lastResult.databasefield 命令中提取其他数据，但不能显示图像。getUserResult 是指调用以从数据库中检索数据的 php 函数的结果。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:24:34.407

```
 override public function set data(value:Object):void {
    if (value != null) {
        super.data = value;
        this.fbImg.source = "http://graph.facebook.com/" + value.facebookId + "/picture?‌​type=normal value.facebookid";
    }

<s:Image id="fbImg" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:42:12.130

您的 itemRenderer 很可能无法访问 getUserResult 服务；这就是为什么您会收到一条错误消息，指出您正在访问未定义的属性。

在 itemRenderer 中，您必须使用 data 属性来访问渲染器尝试显示的 dataProvider 的元素。

所以，很可能你想做这样的事情：

```
<s:Image id="fbImg" source="http://graph.facebook.com/{data.facebookid}/picture?‌​type=normal"/> 
```

但是，我强烈建议不要在 itemRenderer 中使用 Binding。相反，在 dataChange 事件处理程序（我的偏好）中修改图像的源属性或通过覆盖 set data 方法。 [这里有一堆关于 itemRenderers 的链接可能会有所帮助](https://www.google.com/search?q=Flex+4.6+Building+ItemRenderers&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)；

# .net - 字符串“job XXXXXXX”的正则表达式匹配

> ID：10458450
> 
> 赞同：0
> 
> 时间：2012-05-05T03:00:48.840
> 
> 标签：.net, regex

我似乎无法让它工作。我正在尝试匹配文本“job XXXXXXX”，其中 X 是一个整数。

好像破解不了 我知道它很简单，但正则表达式不是我的事。

这就是我正在使用的。任何帮助，将不胜感激。

```
^[job\s]([0-9]{7}$) 
```

谢恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:02:47.453

```
^job\s+\d+$ 
```

^ 匹配字符串的开头

工作 - 错误..工作

\s+ 一个或多个空格

\d+ 一个或多个数字

$ 字符串结尾

如果您需要号码，您可以使用

```
^job\s+(\d+)$ 
```

\d+ 周围的括号会将数字放入一个组中，您可以在比赛后参考。

**编辑**：由于您编辑了原始帖子，让我告诉您为什么您编辑的正则表达式不起作用：

```
^[job\s]([0-9]{7}$) 
```

正则表达式中的 [] 创建一个字符集。这意味着正则表达式正在尝试匹配字母 j*或*字母 o*或*字母 b*或*空白字符，然后是数字。

**编辑 2**：

匹配一个字符串，如：

```
string x = @"Please refer to job 1000000 for more information"; 
```

你需要一个稍微不同的正则表达式。您不想使用 ^ 匹配字符串的开头或使用 $ 匹配结尾，因为显然这与整行不匹配。

相反，你会想做这样的事情：

```
Console.WriteLine(Regex.Replace(x,@"job\s+(\d+)","REDACTED!!")); 
```

如果您想引用替换中的数字，可以执行以下操作：

```
Console.WriteLine(Regex.Replace(x, @"job\s+(\d+)", "Super Awesome Job: $1")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:07:51.713

它的正则表达式将是**^JOB\s\d{5}$**其中 5 是整数位数。如果计数不固定，则**^JOB\s\d+$**

# eclipse - Eclipse 中 Scala 控制器中 Play 2.0 视图路径的自动完成

> ID：10458461
> 
> 赞同：4
> 
> 时间：2012-05-05T03:02:17.997
> 
> 标签：eclipse, scala, autocomplete, playframework-2.0

这是对谷歌小组讨论的视觉参考： [https ://groups.google.com/group/play-framework/browse_thread/thread/14660fd7056d577e/a3afb4ca06d25ce5#a3afb4ca06d25ce5](https://groups.google.com/group/play-framework/browse_thread/thread/14660fd7056d577e/a3afb4ca06d25ce5#a3afb4ca06d25ce5)

所以，我只是想在视图中添加一些详细信息：

![在此处输入图像描述](../Images/959180097d020a1b10cc4ee26c88e348.png)

当我根据 Google Group 中提供的示例在 Scala 控制器中引用或尝试引用其中一个文件时，我收到一个错误：

![在此处输入图像描述](../Images/8b0df31362590d18232bd54cc3ad6e7b.png)

![在此处输入图像描述](../Images/1d2ed5a419c638d1633f9d2b7ee2c27f.png)

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T12:00:48.183

**免责声明：** *我不是 Eclipse 用户，只是创建并导入了空白 Play 的项目来检查这个问题！我没有时间测试 Eclipse 配置，只是按照 Play 文档中的描述导入。也许这是一种更好的配置方式，但你需要自己搜索:)*

我不会责怪 Play，它可以正常工作，否则根本无法编译。正如我在 Google Group 的主题中所写，您需要将视图放入包中：（`/views/nested/index.scala.html`当然`nested`只是一个名称，也可以是其他名称），然后您可以通过以下方式捕获它：`Ok(views.html.`**`nested.index()`**`)`

在 Eclipse 中：

1.  在`Package Explorer`单击`views`包中：`right mouse button`> `New`>`Package`并写包的名称`views.nested`或`views.one`其他内容，甚至可以是：`views.nested.one.two.three`
2.  将新视图添加到此包中`myNewView.scala.html`
3.  在浏览器中运行任何请求（让 Play 编译新视图），您可以选择使用命令运行 Play，`play ~run`以便在保存到 IDE 后立即编译您的新视图或更改的视图。
4.  在 Eclipse 菜单中选择`Project`> `Clean...`。事实上，这就是线索，我不太清楚为什么需要这种清理，因为 Play 可以正确编译所有内容，请阅读开头的免责声明。
5.  从现在开始，您的 Eclipse 将看到这个新视图

**截屏**

![在此处输入图像描述](../Images/1ebb7a28c7dd2e22a770280e7a8480ab.png)

# haskell - 线程无限期阻塞 - Haskell - Acid State

> ID：10458462
> 
> 赞同：5
> 
> 时间：2012-05-05T03:02:25.690
> 
> 标签：haskell, acid

我担心 Acid State 会生成许多事件文件和检查点，用户“stepcut”告诉我有一个名为 createArchive 的酸解决方案的实现，它删除旧事件......问题是当我使用它时我得到这个错误：

```
<fileName.exe>: thread blocked indefinitely in an MVar operation 
```

我认为它应有 w7 权限，但是当我在“管理员”下运行它时，我无法看到控制台，但事件文件仍然存在，所以我认为它不起作用。

如果我通过 ghci 运行代码，我不会收到错误，但它会锁定控制台，所以我需要 CtrlC 才能继续工作。

有人收到这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-09T22:56:35.360

在我编译我的程序没有优化后，这个错误从我的程序中消失了，如`ghc --make -O0 Main`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:59:40.143

这当然与权限无关。当尝试从没有人可以写入的空值中读取`MVar`，或者类似地尝试将值放入`MVar`已经满且不会被清空的值时，就会出现错误。这意味着某人的代码中存在错误。

如果 vivian（在评论中）认为这与[GHC 错误](http://hackage.haskell.org/trac/ghc/ticket/5943)有关，那么[这个相关错误](http://hackage.haskell.org/trac/ghc/ticket/5859)表明编译`-fno-state-hack`可能足以解决您的问题。看起来该错误至少从 GHC 7.2.2 开始就存在，但在（迄今为止未发布的）GHC 7.4.2 中已修复。

或者，它可能只是 中的一个错误`acid-state`，它似乎大量使用了`MVar`s。在这种情况下，您应该确保您使用的是最新版本的库，然后尝试生成一个简单的测试用例，以便其他人可以验证问题。

# css - 如何设置元素的高度以匹配另一个元素的高度？

> ID：10458465
> 
> 赞同：20
> 
> 时间：2012-05-05T03:02:51.553
> 
> 标签：css, html, height

我目前有两列，它们之间还有另一列。我想要的是让左列和右列在高度上延伸，因为中心列添加了更多内容。

需要注意的是，我无法为父 div 设置确切的高度，然后将左右列设置为“高度：100%”。这是因为中心栏中可能只有少量内容，也可能很多。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-05T03:20:15.883

看起来您将不得不实现 Javascript 方法。我会采取的方法是抓住高度，`.legs`然后将其应用于`.flight_no`and `.price`。

我能想到的唯一其他选择是通过提供`.flight`一个背景图像来“伪造它”，但是你的左列和右列在风格上是不同的，然后`repeat-y`在你的 CSS 中。如果你这样做，侧边栏实际上不必跨越相同的高度。

像这样的东西，使用 jQuery，会动态地将你的侧边栏设置为中间列的高度。

```
$(document).ready(function() {
  $(".flight_no, .price").css("height", $(".legs").height());
}); 
```

* * *

编辑：

时代变了——jQuery 不再是曾经的主宰，我们欢迎 Flexbox 走向世界。有关基于列的解决方案，请参阅此 SO 页面：

[CSS - 等高列？](https://stackoverflow.com/questions/2114757/css-equal-height-columns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:39:33.967

将 div 扩展到正确的高度，或者说容器的 100% 高度，您必须链接`height:100%`到具有固定高度的容器或与另一个`height: 100%;`. 从长远来看，您可能需要此解决方案。

由于没有固定的高度，我使用`height: 100%`并链接到 body 一个 html。

```
body, html { height: 100%; }
.flight
{
    float: right;
    border: 1px solid green;
    height: 100%;
} 
```

[演示](http://jsfiddle.net/PD8Ap/)

要为侧边栏提供容器的确切高度，您必须使用固定高度或使用 javascript。

# css - 谷歌浏览器呈现自己的风格

> ID：10458466
> 
> 赞同：1
> 
> 时间：2012-05-05T03:03:00.120
> 
> 标签：css, google-chrome

我正在将网站从 HTML 更改为 Wordpress（第一次，所以要温柔！）我遇到了 Google Chrome 应用我从未知道存在的样式的问题！在这种情况下，我引用定位 bg.gif 图像背景的样式。在 IE9 和 Firefox 中，背景元素似乎都可以正常工作，但在 Google Chrome 中我遇到了问题。

如果你访问这个站点：[http](http://www.richmindonline.com/doggy2/) ://www.richmindonline.com/doggy2/然后在谷歌浏览器中右键单击页面的右上角，然后单击“检查元素”，你会注意到正在应用的样式与我的样式表无关。

有人可以就如何解决这个问题提供一些指导。我已经尝试添加自己的样式来胜过 Chrome 样式，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:13:00.467

您要覆盖哪些样式？您看到的是浏览器默认值 - 所有浏览器都有它们，无论它们是否显示给您。

我在检查器中看到的是 Chrome 识别文本方向和语言环境。您是否使用 CSS 重置？

[http://www.cssreset.com/](http://www.cssreset.com/)

在以相同的默认值启动所有浏览器方面应该有很长的路要走。

# security - CakePHP 在保存修改数据时会自动处理批量赋值漏洞吗？

> ID：10458468
> 
> 赞同：8
> 
> 时间：2012-05-05T03:03:16.283
> 
> 标签：security, cakephp, cakephp-2.0, mass-assignment

**编辑：**

从 DCoder 收到更多信息后，我在这里搜索的短语是“批量分配漏洞”。也就是说，利用将所有有效字段保存到数据库中的方法的便利性，而不管它们是否存在于初始表单上（使它们容易受到包含比预期字段更多[可能更关键]字段的操纵 POST 数据的攻击）。

然后将这两种常见的响应适当地命名为白名单和黑名单；将用于修改的字段列入白名单，或将不应修改的字段列入黑名单。

然后我的问题是：CakePHP 是否只自动将提交表单中的那些字段列入白名单，或者我（和其他 Cake 粉丝）是否有必要小心我们适当地列入白名单或列入黑名单？

* * *

**原始问题：**

Cake 提供了许多很棒的方法来生成表单并几乎自动处理它们。当我考虑安全性时，我想知道：Cake 是否知道提交的表单中存在哪些字段，或者它是否会简单地接受任何有效字段？如果我没有意义，请采取以下 senario（如果他们能想到更好的表达方式，欢迎有人编辑我的问题以更好地措辞）：

假设我允许我的用户编辑他们的个人资料。我在 action 下创建了一个包含用户名、电子邮件和密码字段的表单`edit`。

一位聪明的用户想要进来并将他们的`is_admin`字段从更改`false`为`true`，因此他们使用像 firebug 这样的应用程序将自定义帖子数据提交给`edit`操作，其中包括`is_admin`设置为的字段`true`。

问题是，Cake 会自己意识到这`is_admin`不是原始形式，还是我需要小心明确指定给定操作可以修改的唯一字段？有没有更简单的方法？

谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T05:26:11.743

您必须`SecurityComponent`在控制器中加载，CakePHP 会为您防止表单篡改，请参阅[http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#form-tampering -预防](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#form-tampering-prevention)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-05T04:13:23.183

CakePHP 内置了可用的验证选项。表单会根据您在模型中提到的验证标准自动生成字段并进行验证。此验证将在 Save 方法之前自动调用。

此外，如果您想添加一些自定义验证，您可以在模型中添加它。

使用您的特定查询，您可以`is_admin`从编辑表单中删除该字段，以便用户无法对其进行编辑。如果您想增加更多安全性并确保该`is_admin`字段具有 false 值，您可以在控制器编辑方法中编辑其值。

在 edit 方法中，您可以在调用 Save 操作之前添加以下代码。
`$this->request->data['ModelName']['is_admin] = false;`

# iphone - 无法将子视图推送到 navigationController

> ID：10458472
> 
> 赞同：0
> 
> 时间：2012-05-05T03:04:51.070
> 
> 标签：iphone, objective-c, ios5

试图将新控制器推入导航控制器，不知道为什么它不工作。1）我检查了 secondViewController 的实例也不起作用。2）。尝试后缀“.xib”，也不起作用。3）尝试过 bundle:nil 也不起作用。

我正在使用 ARC。有人可以指出这里有什么问题吗？

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@" YOU SELECTED ROW ..");
    secondViewController *secController = [[secondViewController alloc] initWithNibName:@"secondViewController.xib" bundle:[NSBundle mainBundle]];
    NSLog (@"View Controller %@ ", secController);
        [self.navigationController pushViewController:secController animated:YES];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:18:19.200

我编辑你的代码试试这个。

```
 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@" YOU SELECTED ROW ..");
    secondViewController *secController = [[secondViewController alloc] initWithNibName:@"secondViewController" bundle:nil];
    NSLog (@"View Controller %@ ", secController);
    [self.navigationController pushViewController:secController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:36:48.650

您是否精通导航控制器？检查 self.NaviagationController 是否在内存中？可能是 0*0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:10:09.447

如果 nib 位于主包中，则不需要传递包。传入 nil 会起作用，所以改变这个：

```
[[secondViewController alloc] initWithNibName:@"secondViewController.xib" bundle:[NSBundle mainBundle]]; 
```

对此：

```
[[secondViewController alloc] initWithNibName:@"secondViewController" bundle:nil]; 
```

您还可以利用 UIKit 将查找与类同名的nib 并传入`nil`nib 名称这一事实。

# sql-server - 从 SQL Server 中的字符串中删除子字符串的第二次出现

> ID：10458473
> 
> 赞同：0
> 
> 时间：2012-05-05T03:05:41.143
> 
> 标签：sql-server, tsql, substring

如果两个子字符串彼此相邻，我需要从主字符串中删除第二次出现的子字符串。例如：

`Jhon\Jhon\Jane\Mary\Bob`需要结束`Jhon\Jane\Mary\Bob`

但`Mary\Jane\Mary\Bob`必须保持不变。

任何人都可以提出一种高效的方式来做到这一点吗？

'\' 是不同名称的分隔符，因此可以作为要替换的子字符串的限制。

**编辑**：这是在 SELECT 语句上运行的，所以它应该是一个单行解决方案，我不能使用变量。另外，如果名字在其他地方重复，我必须让他们在那里。如果第一个和第二个名称相同，则仅删除一个匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:41:01.180

所以这是一个尝试，但正如我所说，我认为您不会在本机 T-SQL 中获得*快速解决方案。*

首先，如果您还没有数字表，请创建一个：

```
SET NOCOUNT ON;
DECLARE @UpperLimit int = 4000;

;WITH n AS
(
    SELECT rn = ROW_NUMBER() OVER (ORDER BY s1.[object_id])
    FROM sys.all_objects AS s1
    CROSS JOIN sys.all_objects AS s2
)
SELECT [Number] = rn - 1
INTO dbo.Numbers FROM n
WHERE rn <= @UpperLimit + 1;

CREATE UNIQUE CLUSTERED INDEX n ON dbo.Numbers([Number]); 
```

然后创建两个函数。一个将字符串拆分成一个表，然后另一个重新加入第一个函数的结果但忽略任何后续重复项。

```
CREATE FUNCTION dbo.SplitStrings
(
    @List  nvarchar(4000),
    @Delim char(1)
)
RETURNS TABLE
AS
    RETURN ( SELECT 
      rn = ROW_NUMBER() OVER (ORDER BY CHARINDEX(@Delim, @List + @Delim)),
      [Value] = LTRIM(RTRIM(SUBSTRING(@List, [Number],
      CHARINDEX(@Delim, @List + @Delim, [Number]) - [Number])))
      FROM dbo.Numbers
      WHERE Number <= LEN(@List)
      AND SUBSTRING(@Delim + @List, [Number], 1) = @Delim
    );
GO 
```

第二个功能：

```
CREATE FUNCTION dbo.RebuildString
(
    @List  nvarchar(4000),
    @Delim char(1)
)
RETURNS nvarchar(4000)
AS
BEGIN
    RETURN ( SELECT newval = STUFF((
     SELECT @Delim + x.[Value] FROM dbo.SplitStrings(@List, @Delim) AS x
      LEFT OUTER JOIN dbo.SplitStrings(@List, @Delim) AS x2
      ON x.rn = x2.rn + 1
      WHERE (x2.rn IS NULL OR x.value <> x2.value)
      ORDER BY x.rn
      FOR XML PATH(''), TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'')
    );
END
GO 
```

现在您可以针对您在问题中提供的两个示例进行尝试：

```
;WITH cte(colname) AS
(
    SELECT 'Jhon\Jhon\Jane\Mary\Bob'
    UNION ALL SELECT 'Mary\Jane\Mary\Bob'
)
SELECT dbo.RebuildString(colname, '\')
FROM cte; 
```

结果：

```
Jhon\Jane\Mary\Bob
Mary\Jane\Mary\Bob 
```

但我强烈、强烈、强烈建议您在决定使用它之前根据您的典型数据大小彻底测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:22:33.467

我决定进行字符串操作。我认为执行查询需要更长的时间，但是在... ejem ...生产环境中进行测试... ejem ...我发现它没有（令我惊讶的是）。它不漂亮，我知道，但它很容易维护......

这是我最终查询的简化版本：

```
SELECT SOQ.PracticeId,
       CASE WHEN LEFT(SOQ.myString, SOQ.SlashPos) = SUBSTRING(SOQ.myString, SOQ.SlashPos + 1, LEN(LEFT(SOQ.myString, SOQ.SlashPos)))
            THEN RIGHT(SOQ.myString, LEN(SOQ.myString) - SOQ.SlashPos)
            ELSE SOQ.myString
       END as myString
  FROM (SELECT OQ.AllFields, OQ.myString, CHARINDEX('\', OQ.myString, 0) as SlashPos
          FROM MyOriginalQuery OQ) SOQ 
```

# iphone - Xcode 基本历史功能

> ID：10458474
> 
> 赞同：0
> 
> 时间：2012-05-05T03:06:20.553
> 
> 标签：iphone, xcode, ios4, uiimageview, xcode4.2

嗨，我是 iPhone Xcode 开发的新手，一直坚持实现历史功能。

用外行的话来说，我有

4 个按钮（每个按钮都有自己独特的图像）

（按钮 1） （按钮 2） （按钮 3） （按钮 4）

和 5 个图像视图

(imageview 位置 1) (imageview 位置 2) (imageview 位置 3) (imageview 位置 4) (imageview 位置 5)

每次单击按钮（最多 5 次）时，我都需要将其显示在适当的图像视图中。

即，如果首先按下按钮 4，它将在图像视图 1 中显示，如果第二次按下按钮 3，它将在图像视图 2 中显示，依此类推。

我真的很感激一些帮助或朝着正确的方向前进。

提前致谢

* * *

更新代码：

```
viewcontroller.h

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

IBOutlet UIImageView *imageview_history_1;
IBOutlet UIImageView *imageview_history_2;
IBOutlet UIImageView *imageview_history_3;
IBOutlet UIImageView *imageview_history_4;
IBOutlet UIImageView *imageview_history_5;

}

// I would think this could be consolidated into one function
-(IBAction)showhistory_1;
-(IBAction)showhistory_2;
-(IBAction)showhistory_3;
-(IBAction)showhistory_4;
-(IBAction)showhistory_5; 

@end

#import ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

// function to add to history
// Need an if/for statement???
// On button event 1 display result at image view_history 1, 
// On button event 2 display result at image view_history 2.

- (IBAction)showhistory_1 {
UIImage *img = [UIImage imageNamed:@"button1"];

[imageview_history_1 setImage:img];

}

@end 
```

//我一直在创建函数。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:43:29.157

首先，在你的xib中，给每个按钮一个标签号以便于识别它：
假设你给button1一个标签1，button2是标签2，等等。

然后，我会将您的 UIButton 操作更改为全部指向相同的功能：

。H：

```
- (IBAction)show_history:(UIButton)sender; 
```

米：

```
- (void)setNextHistoryImage:(UIImage *)img {
    if (imageview_history_1.image == nil) {
        imageview_history_1.image = img;
    } else if (imageview_history_2.image == nil) {
        imageview_history_2.image = img;
    }  else if (imageview_history_3.image == nil) {
        imageview_history_3.image = img;
    }  else if (imageview_history_4.image == nil) {
        imageview_history_4.image = img;
    }  else if (imageview_history_5.image == nil) {
        imageview_history_5.image = img;
    }
}

- (IBAction)show_history:(UIButton)sender {
    NSString *imgName = [NSString stringWithFormat:@"button%d", sender.tag];
    UIImage *img      = [UIImage imageNamed:imgName];
    [self setNextHistoryImage:img];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:26:54.157

你可以这样做：

```
-(IBAction)showhistory_1:(id)sender
{

    if(sender == firstbutton)
    {
       UIImage *img = [UIImage imageNamed:@"button4"];
       [imageview_history_4 setImage:img];
    }
    else if(sender == secondbutton)
    {
       UIImage *img = [UIImage imageNamed:@"button3"];
       [imageview_history_3 setImage:img];
    }
    else if(sender == thirdbutton)
    {
      UIImage *img = [UIImage imageNamed:@"button2"];
      [imageview_history_2 setImage:img];
   }
   else if(sender == fourthbutton)
   {
      UIImage *img = [UIImage imageNamed:@"button1"];
      [imageview_history_1 setImage:img];
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:44:22.203

做一件事，只需更改按钮单击时 imageview 的位置。像这样使用并尝试它的工作是否通知我们，如果不是，我还将提供更多方法。

```
 ImageView.frame=CGRectMake(0, 0, 305, 135); 
```

使用不同的 2 位置。

# cuda - 使用向量和迭代器进行 NVidia 推力编程 - 基本问题

> ID：10458478
> 
> 赞同：0
> 
> 时间：2012-05-05T03:07:53.017
> 
> 标签：cuda, nvidia, thrust

我正在尝试编写一些简单的程序来学习 NVidia CUDA/Thrust。我是个菜鸟。我想要做的是使用带有自定义谓词的 find_if 。目前我的谓词只是在所有内容上都返回 true，所以我正在尝试获取所有输入。我想最终搜索字符串，在其中我用一些字符串 X 初始化函子，然后让 GPU 找到所有匹配的字符串。

我对这里的几点感到困惑。

我尝试填充一个充满指向我的字符串的指针的 device_vector，然后针对我的 MemCmp 谓词运行它。

首先，device_vector“知道”将我的字符串从主内存复制到GPU内存还是只是复制一个指针值？

其次，在“count = d_inputVector.end() - iter;”这一行 它返回 12 是我的迭代器中的项目数，它是 find_if 的结果。这不是错的吗？如果我尝试 iter - d_inputVector.begin() 返回零，这不会让我到任何地方。

最后，我获取小程序结果的方法是否正确？我是否要使用thrust::copy 将内存复制到host_vector 中，并且最后的循环是否足以查看结果？

非常感谢任何建议。谢谢，

米

```
struct MemCmp
{
    __host__ __device__
    bool operator()(char *data)
    {
        bool rv = false;
        rv = true;

        return rv;
    }
};

....

// I initialize a device_vector and then copy pointers from main memory into the device_vector.
thrust::device_vector<char*> d_inputVector( itemCount );

for( int i=0; i<itemCount; i++ ){
    d_inputVector[i] = inputData[i];
}

thrust::device_vector<char*>::iterator iter;
iter = thrust::find_if( d_inputVector.begin(), d_inputVector.end(), MemCmp() );

    // this is the count that I think is wrong. 
count = d_inputVector.end() - iter; 

thrust::host_vector<char*> results( count );

thrust::copy( d_inputVector.begin(), iter, results.begin() );

for( thrust::host_vector<char *>::iterator it = results.begin(); it != results.end(); it++ ){
    char* foo = *it;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:04:17.100

`find_if`不是找到所有匹配的字符串的好功能。它只是找到第一个匹配的第一个元素。看看`copy_if`。

> 首先，device_vector“知道”将我的字符串从主内存复制到GPU内存还是只是复制一个指针值？

您最终会得到在 GPU 上没有意义的指针值。

在 C++ 中，要在 CPU 上运行，您将使用`std::string`存储字符串。所以这将是一个`std::vector<std::string>`. 由于没有设备实现`string`，因此事情变得复杂，因此您无法将它们复制到 GPU。

此外，许多 STL 算法（我猜它与 相同`thrust`）要求作为向量中元素的对象具有有效的复制构造函数和赋值运算符。编译器为基本类型提供这些，但不为字符数组提供。

因此，您学习 CUDA/Trust 的简单练习可能不会那么简单。我*认为*您需要一个 C++ 类来封装固定大小的字符数组并为必要的运算符实现设备功能。

此外，以这种方式将包含许多项目的向量移动到设备内存非常低效，因为您对这些项目执行的每个分配都会`device_vector`导致在后台执行从主机到设备内存的单独副本。相反，填充 a`host_vector`然后将 分配`host_vector`给`device_vector`。然后，只执行从主机到设备内存的单个副本。

> 其次，在“count = d_inputVector.end() - iter;”这一行 它返回 12 是我的迭代器中的项目数，它是 find_if 的结果。这不是错的吗？如果我尝试 iter - d_inputVector.begin() 返回零，这不会让我到任何地方。

表达式应该是`count = d_inputVector.begin() - iter;`并且它应该返回 0，因为向量中的第一个元素与查找匹配。

> 最后，我获取小程序结果的方法是否正确？我是否要使用thrust::copy 将内存复制到host_vector 中，并且最后的循环是否足以查看结果？

使用结果创建 a 后`device_vector`，只需将其分配给 a`host_vector`即可在一次操作中将其移动到主机内存。

```
thrust::host_vector<char*> H = D; 
```

# session - Tomcat如何保持会话

> ID：10458481
> 
> 赞同：1
> 
> 时间：2012-05-05T03:08:36.527
> 
> 标签：session, tomcat

以下是迄今为止我知道的tomcat如何保持会话的两种方式。

1.  在 URL 中添加“JSESSIONID=xxxxxxxxxxxxxxx”之类的参数，每次向服务器端发送请求时，tomcat 都会查询带有“xxxxx”的会话映射
2.  在 cookie 中添加一个字段，例如“JSESSIONID=xxxxxxxxxxxxxxx”。

因此，据我了解，如果我们在浏览器中禁用 Cookie，并使用不带“JSESSIONID=xxxxxxxxxxxxxxx”之类的参数的 URL 访问我们的页面。会话 ID 将被更改。用jsp写一段代码

```
<%  
    out.println(request.getSession().getId());  
%> 
```

每当我们访问这个 jsp 时，会话 id 都会改变。但事实是 sessionId 永远不会改变。

我观察了浏览器中的 cookie，**我确实禁用了 cookie**。当我第一次访问该页面时，请求和响应如下：

```
 Request URL:http://localhost:8080/examples/testt.jsp
    Request Method:GET
    Status Code:200 OK
    ----------
    Request Headersview source
    Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    Accept-Charset:GBK,utf-8;q=0.7,*;q=0.3
    Accept-Encoding:gzip,deflate,sdch
    Accept-Language:zh-CN,zh;q=0.8
    Cache-Control:max-age=0
    Connection:keep-alive
    Host:localhost:8080
    User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19

    -------
    Response Headersview source
    Content-Length:342
    Content-Type:text/html;charset=ISO-8859-1
    Date:Sat, 05 May 2012 03:01:32 GMT
    Server:Apache-Coyote/1.1
    Set-Cookie:JSESSIONID=6C71760FD3B85C4696CD8E6204574A06; Path=/examples 
```

当我第二次访问该页面时，请求和响应如下：

```
Request URL:http://localhost:8080/examples/testt.jsp
Request Method:GET
Status Code:200 OK
--------
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:GBK,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:zh-CN,zh;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:JSESSIONID=6C71760FD3B85C4696CD8E6204574A06
Host:localhost:8080
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19
--------
Response Headersview source
Content-Length:342
Content-Type:text/html;charset=ISO-8859-1
Date:Sat, 05 May 2012 03:03:19 GMT
Server:Apache-Coyote/1.1 
```

* * *

有人可以告诉我当 cookie 被禁用并且 URL 不包含“JSESSIONID=xxxxxxxxxxxxxxx”时，tomcat 如何保持会话。

非常感谢。

* * *

我在 Chrome 中禁用 cookie 时犯了一个错误，在上述测试中我并没有真正禁用 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:30:56.047

您没有禁用 cookie。浏览器在请求标头中发送 cookie。

# iphone - 无法将视图与另一个类链接。初学者XD

> ID：10458483
> 
> 赞同：0
> 
> 时间：2012-05-05T03:08:57.353
> 
> 标签：iphone, ios, xib

X-) 我在尝试解决这个问题时遇到了一些麻烦，我有我的 rootviewcontroler 主类，从那里有一个带有 3 个 TabBars 的 navigationController，但是当我想从不同的类或 xib 加载该标签栏视图时。实际上，我不能......即使在界面构建器中它说从“PAQUETES”加载视图但是当我构建它时，它会崩溃并且使用调试器控制台它会这样说：

*[会话开始于 2012-05-05 02:52:04 +0000。] 2012-05-04 21:52:54.231 Zoo[2263:9203] ** * 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：'- [UIViewController _loadViewFromNibNamed:bundle:] 加载了“paquetes”笔尖，但未设置视图出口。'*

虽然我不明白这意味着什么，因为通常要更改不同的xib。查看您只是更改了NIB名称吗？所以……谢谢XD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:33:09.953

在 Interface Builder 中转到您的 XIB 文件并执行以下 2 个步骤：

-将“类”设置为您的 UIViewController 类的名称（这是在“身份检查器”中设置的 - 单击文件所有者，然后单击右侧面板上的第三个小图标） -
将“视图”插座连接到 XIB 的主视图（这是在“连接检查器”中设置的 - 单击文件所有者，然后单击右侧面板上的最后一个小图标）

那应该这样做。

# css - wordpress.com 和托管 wordpress 之间的风格差异

> ID：10458484
> 
> 赞同：3
> 
> 时间：2012-05-05T03:09:09.333
> 
> 标签：css, wordpress, styles, wordpress.com

我试图了解我的托管安装的 Wordpress 与安装在我的 Wordpress.com 帐户上的确切主题之间的风格差异来自哪里。我正在迁移我的博客，由于某种原因，它们完全不同。

【无关紧要，实验】

似乎发生了什么？我试图检查 CSS 和 JS，但这些都没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:17:33.783

这两个站点的 HTML 和 CSS 完全不同。此外，wordpress.com 站点也比您的 .org 站点导入更多的资源。如果您在 Chrome 调试器中查看 NET 选项卡，您还可以看到 .com 站点中正在加载的其他 CSS 文件可能会覆盖或与其他一些样式发生冲突。

您需要确保将所有 CSS、图像和 JavaScript 从原始站点导入到新站点；否则，会有差异。

# mysql - 在没有 MySQL 的情况下创建和访问数据库？

> ID：10458487
> 
> 赞同：0
> 
> 时间：2012-05-05T03:09:20.040
> 
> 标签：mysql, database, database-connection

我在安装 MySQL 时遇到问题，有没有办法在没有 MySQL 的情况下使用数据库？

例如，是否有任何数据库文件可以放在我的网站根目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:15:07.180

你可以试试 sqlite：[http](http://www.sqlite.org/about.html) ://www.sqlite.org/about.html 。

您是否在此处或超级用户上提交了有关安装难度的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:15:13.173

[SQLite (PHP API)](http://us.php.net/manual/en/book.sqlite.php)是基于文件的数据库，但也必须安装它。但是，由于它不运行服务器，因此它比 MySQL 等基于服务器的 RDBMS 更易于管理。仅建议用于低流量、低容量的站点。

但是，您*不应*将数据库存储在站点根目录中。该文件应存储在站点的文档根目录之外，因此无法从 Web 访问。

[（SQLite 主页）](http://www.sqlite.org/)

# ios5 - RestKit loadObjectsAtResourcePath:delegate 工作一次，但再也不会

> ID：10458490
> 
> 赞同：23
> 
> 时间：2012-05-05T03:09:41.987
> 
> 标签：ios5, xcode4, restkit

我对 Objective-C 和 XCode 还很陌生，但对 RestKit 还是比较陌生，尽管我已经用 Java 编程了 12 年。

我有一个连接到 RestKit 的 IOS 应用程序，并且从休息服务器加载的操作仅在第一次工作，如果我返回导航控制器并再次尝试相同的操作，`loadObjectsAtResourcePath:delegate`则调用该方法，但没有任何委托方法被调用（我实现了所有这些只是为了在它们发生时记录）。

我觉得我错过了 Restkit 的一些基本内容，也许是它的异步性质，因为映射显然第一次工作正常，所以后续调用一定会丢失在异步队列中。

我用谷歌搜索了这个，看到类似的人被类似的东西困住了，但都试过了，似乎没有什么不同。缓存被禁用，`objectLoaderDidLoadUnexpectedResponse`并且`didFailWithError`永远不会被调用，它会掉到地上。

代码来源：

[我的 XCode 项目在](https://github.com/tallpsmith/ElasticSearchIOSHead)github 上

执行加载调用的特定 View Controller 在[这里](https://github.com/tallpsmith/ElasticSearchIOSHead/blob/master/ElasticSearchHeadIOS/ESRKServerViewController.m)（参见 setUpRestKit 方法）

调用顺序如下：

*   用户填写主机名和端口，然后点击连接
*   [ESRKConnectionViewController.m](https://github.com/tallpsmith/ElasticSearchIOSHead/blob/master/ElasticSearchHeadIOS/ESRKConnectionViewController.m)通过**prepareForSegue**获取调用并使用此地址设置共享 RKClient（虽然我后来发现 RKClient 并没有太多使用，RKOBjectManager 似乎只需要一个 baseURL，所以那里有点多余）
*   **ESRKServerViewController.m**然后在 RKObjectManager 上设置映射并调用**loadObjectsAtResourcePath**将自身作为委托传递（是的，我意识到这些映射可能应该在 App Delegate 的开始时配置，但我看不出如何再次设置它不仅仅是冗余代码）
*   objectLoader **:didLoadObjects**回调然后负责获取映射的对象并为表格视图配置模型 - 这只会触发一次。

启用日志，这是我看到的模式，在第一个调用完成时以及第二个调用何时开始等上带有注释（为了清楚起见，此处修剪了时间戳）：

```
ElasticSearchHeadIOS[25064:fb03] I restkit:RKLog.m:32 RestKit initialized...
ElasticSearchHeadIOS[25064:fb03] I restkit.support:RKCache.m:178 Invalidating cache at path: /Users/paulsmith/Library/Application Support/iPhone Simulator/5.1/Applications/BDB8B59F-8307-4F18-A4E7-C55849618D77/Library/Caches/RKClientRequestCache-localhost/SessionStore
ElasticSearchHeadIOS[25064:fb03] I restkit.network.reachability:RKReachabilityObserver.m:155 Reachability observer initialized with hostname localhost
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKClient.m:271 Reachability observer changed for client <RKClient: 0x80756e0>, suspending queue <RKRequestQueue: 0x8082600 name=(null) suspended=YES requestCount=0 loadingCount=0/5> until reachability to host 'localhost' can be determined
ElasticSearchHeadIOS[25064:fb03] Connecting to http://localhost:9200/ -- http://localhost:9200/ -- http://localhost:9200/
ElasticSearchHeadIOS[25064:fb03] I restkit.support:RKCache.m:178 Invalidating cache at path: /Users/paulsmith/Library/Application Support/iPhone Simulator/5.1/Applications/BDB8B59F-8307-4F18-A4E7-C55849618D77/Library/Caches/RKClientRequestCache-localhost/SessionStore
ElasticSearchHeadIOS[25064:fb03] I restkit.network.reachability:RKReachabilityObserver.m:155 Reachability observer initialized with hostname localhost
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKClient.m:271 Reachability observer changed for client <RKClient: 0x8087840>, suspending queue <RKRequestQueue: 0x8087a40 name=(null) suspended=YES requestCount=0 loadingCount=0/5> until reachability to host 'localhost' can be determined
ElasticSearchHeadIOS[25064:fb03] I restkit.network.reachability:RKReachabilityObserver.m:369 Network availability has been determined for reachability observer <RKReachabilityObserver: 0x8088980 host=localhost isReachabilityDetermined=YES isMonitoringLocalWiFi=1039984 reachabilityFlags=-R -----ld>
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKClient.m:401 Reachability to host 'localhost' determined for client <RKClient: 0x8087840>, unsuspending queue <RKRequestQueue: 0x8087a40 name=(null) suspended=YES requestCount=1 loadingCount=0/5>
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKRequest.m:435 Sending asynchronous GET request to URL http://localhost:9200/_cluster/state.
ElasticSearchHeadIOS[25064:fb03] T restkit.network:RKRequest.m:381 Prepared GET URLRequest '<NSMutableURLRequest http://localhost:9200/_cluster/state>'. HTTP Headers: {
    Accept = "application/json";
    "Content-Length" = 0;
}. HTTP Body: .
ElasticSearchHeadIOS[25064:fb03] I restkit.network.reachability:RKReachabilityObserver.m:369 Network availability has been determined for reachability observer <RKReachabilityObserver: 0x6c5c530 host=localhost isReachabilityDetermined=YES isMonitoringLocalWiFi=1039984 reachabilityFlags=-R -----ld>
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKClient.m:401 Reachability to host 'localhost' determined for client <RKClient: 0x80756e0>, unsuspending queue <RKRequestQueue: 0x8082600 name=(null) suspended=YES requestCount=0 loadingCount=0/5>
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKResponse.m:195 NSHTTPURLResponse Status Code: 200
ElasticSearchHeadIOS[25064:fb03] D restkit.network:RKResponse.m:196 Headers: {
    "Content-Length" = 4462;
    "Content-Type" = "application/json; charset=UTF-8";
}
 ElasticSearchHeadIOS[25064:fb03] T restkit.network:RKResponse.m:203 Read response body: {"cluster_name":"paul","master_node":"FGewvE3-TEKjXugOGJpWmQ","blocks":{},"nodes":{"FGewvE3-TEKjXugOGJpWmQ":{"name":"Namor the Sub-Mariner","transport_address":"inet[/192.168.0.12:9300]","attributes":{}}},"metadata":{"templates":{},"indices":{"melpaul":{"state":"open","settings":{"index.number_of_replicas":"1","index.number_of_shards":"5","index.version.created":"190299"},"mappings":{"project":{"properties":{"projectAddress":{"type":"string"},"id":{"type":"string"},"suburb":{"type":"string"},"name":{"type":"string"},"state":{"type":"string"},"postalAddress":{"type":"string"},"ownerOrganizationID":{"type":"long"},"shortName":{"type":"string"},"deliveryAddress":{"type":"string"},"country":{"type":"string"}}},"organization":{"properties":{"id":{"type":"string"},"tradingName":{"type":"string"},"name":{"type":"string"},"extParticipant":{"type":"string"},"code":{"type":"string"}}},"task":{"properties":{"aggregateCount":{"type":"long"},"dueDateIso":{"type":"string"},"assignedByUser":{"type":"string"},"pertinent":{"type":"boolean"},"assignedByUserId":{"type":"long"},"assignedBy":{"type":"string"},"projectId":{"type":"long"},"type":{"type":"string"},"id":{"type":"string"},"creationDate":{"type":"long"},"assignedToUserId":{"type":"long"},"description":{"type":"string"},"featureId":{"type":"string"},"aggregated":{"type":"boolean"},"assignedToUser":{"type":"string"},"projectName":{"type":"string"},"dueDate":{"type":"long"},"referenceLabel":{"type":"string"}}},"user":{"properties":{"sortlastName":{"type":"string"},"position":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"accessEnabled":{"type":"string"},"orgName":{"type":"string"},"directoryVisibility":{"type":"string"},"id":{"type":"string"},"orgId":{"type":"string"},"orgTradingName":{"type":"string"},"title":{"type":"string"},"divisionName":{"type":"string"},"email":{"type":"string"},"sortfirstName":{"type":"string"},"userName":{"type":"string"},"extParticipant":{"type":"string"},"firstName":{"type":"string"},"accountUnlocked":{"type":"string"},"mobile":{"type":"string"}}}},"aliases":[]}}},"routing_table":{"indices":{"melpaul":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":0,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"melpaul"}],"1":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":1,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":1,"index":"melpaul"}],"2":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":2,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":2,"index":"melpaul"}],"3":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":3,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":3,"index":"melpaul"}],"4":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":4,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":4,"index":"melpaul"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":1,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":2,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":3,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":4,"index":"melpaul"}],"nodes":{"FGewvE3-TEKjXugOGJpWmQ":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":0,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":1,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":2,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":3,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":4,"index":"melpaul"}]}},"allocations":[]}
 ElasticSearchHeadIOS[25064:1400b] D restkit.network:RKObjectLoader.m:262 Beginning object mapping activities within GCD queue labeled: org.restkit.ObjectMapping
 ElasticSearchHeadIOS[25064:1400b] D restkit.network:RKObjectLoader.m:250 No object mapping provider, using mapping provider from parent object manager to perform KVC mapping
 ElasticSearchHeadIOS[25064:1400b] T restkit.network:RKObjectLoader.m:187 bodyAsString: {"cluster_name":"paul","master_node":"FGewvE3-TEKjXugOGJpWmQ","blocks":{},"nodes":{"FGewvE3-TEKjXugOGJpWmQ":{"name":"Namor the Sub-Mariner","transport_address":"inet[/192.168.0.12:9300]","attributes":{}}},"metadata":{"templates":{},"indices":{"melpaul":{"state":"open","settings":{"index.number_of_replicas":"1","index.number_of_shards":"5","index.version.created":"190299"},"mappings":{"project":{"properties":{"projectAddress":{"type":"string"},"id":{"type":"string"},"suburb":{"type":"string"},"name":{"type":"string"},"state":{"type":"string"},"postalAddress":{"type":"string"},"ownerOrganizationID":{"type":"long"},"shortName":{"type":"string"},"deliveryAddress":{"type":"string"},"country":{"type":"string"}}},"organization":{"properties":{"id":{"type":"string"},"tradingName":{"type":"string"},"name":{"type":"string"},"extParticipant":{"type":"string"},"code":{"type":"string"}}},"task":{"properties":{"aggregateCount":{"type":"long"},"dueDateIso":{"type":"string"},"assignedByUser":{"type":"string"},"pertinent":{"type":"boolean"},"assignedByUserId":{"type":"long"},"assignedBy":{"type":"string"},"projectId":{"type":"long"},"type":{"type":"string"},"id":{"type":"string"},"creationDate":{"type":"long"},"assignedToUserId":{"type":"long"},"description":{"type":"string"},"featureId":{"type":"string"},"aggregated":{"type":"boolean"},"assignedToUser":{"type":"string"},"projectName":{"type":"string"},"dueDate":{"type":"long"},"referenceLabel":{"type":"string"}}},"user":{"properties":{"sortlastName":{"type":"string"},"position":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"accessEnabled":{"type":"string"},"orgName":{"type":"string"},"directoryVisibility":{"type":"string"},"id":{"type":"string"},"orgId":{"type":"string"},"orgTradingName":{"type":"string"},"title":{"type":"string"},"divisionName":{"type":"string"},"email":{"type":"string"},"sortfirstName":{"type":"string"},"userName":{"type":"string"},"extParticipant":{"type":"string"},"firstName":{"type":"string"},"accountUnlocked":{"type":"string"},"mobile":{"type":"string"}}}},"aliases":[]}}},"routing_table":{"indices":{"melpaul":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":0,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"melpaul"}],"1":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":1,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":1,"index":"melpaul"}],"2":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":2,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":2,"index":"melpaul"}],"3":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":3,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":3,"index":"melpaul"}],"4":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":4,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":4,"index":"melpaul"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":1,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":2,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":3,"index":"melpaul"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":4,"index":"melpaul"}],"nodes":{"FGewvE3-TEKjXugOGJpWmQ":[{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":0,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":1,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":2,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":3,"index":"melpaul"},{"state":"STARTED","primary":true,"node":"FGewvE3-TEKjXugOGJpWmQ","relocating_node":null,"shard":4,"index":"melpaul"}]}},"allocations":[]}
 ElasticSearchHeadIOS[25064:1400b]  willMapData
 ElasticSearchHeadIOS[25064:fb03] did finish loading 
```

* * *

好的，显示从上述调用返回的映射数据的表格视图现已完成，我可以在屏幕上正确看到结果。

## 我点击导航控制器，再次尝试相同的请求，这就是日志的作用。此处的日志在我单击连接按钮并启动与上面相同的调用后立即开始（在上面的块和下面的块之间没有其他日志出现）。

```
I restkit.support:RKCache.m:178 Invalidating cache at path: /Users/paulsmith/Library/Application Support/iPhone Simulator/5.1/Applications/BDB8B59F-8307-4F18-A4E7-C55849618D77/Library/Caches/RKClientRequestCache-localhost/SessionStore
I restkit.network.reachability:RKReachabilityObserver.m:155 Reachability observer initialized with hostname localhost
D restkit.network:RKClient.m:271 Reachability observer changed for client <RKClient: 0x808ce90>, suspending queue <RKRequestQueue: 0x80834c0 name=(null) suspended=YES requestCount=0 loadingCount=0/5> until reachability to host 'localhost' can be determined
D restkit.network:RKClient.m:256 Reachability observer changed for RKClient <RKClient: 0x80756e0>, disposing of previous instance: <RKReachabilityObserver: 0x6c5c530 host=localhost isReachabilityDetermined=YES isMonitoringLocalWiFi=1039984 reachabilityFlags=-R -----ld>
Connecting to http://localhost:9200/ -- http://localhost:9200/ -- http://localhost:9200/
I restkit.support:RKCache.m:178 Invalidating cache at path: /Users/paulsmith/Library/Application Support/iPhone Simulator/5.1/Applications/BDB8B59F-8307-4F18-A4E7-C55849618D77/Library/Caches/RKClientRequestCache-localhost/SessionStore
I restkit.network.reachability:RKReachabilityObserver.m:155 Reachability observer initialized with hostname localhost
D restkit.network:RKClient.m:271 Reachability observer changed for client <RKClient: 0x81b0bc0>, suspending queue <RKRequestQueue: 0x81b0d20 name=(null) suspended=YES requestCount=0 loadingCount=0/5> until reachability to host 'localhost' can be determined
D restkit.network:RKClient.m:256 Reachability observer changed for RKClient <RKClient: 0x81b0bc0>, disposing of previous instance: <RKReachabilityObserver: 0x81b1c80 host=localhost isReachabilityDetermined=NO isMonitoringLocalWiFi=1039984 reachabilityFlags=-- ------->
I restkit.network.reachability:RKReachabilityObserver.m:369 Network availability has been determined for reachability observer <RKReachabilityObserver: 0x807f2f0 host=localhost isReachabilityDetermined=YES isMonitoringLocalWiFi=1039984 reachabilityFlags=-R -----ld>
D restkit.network:RKClient.m:401 Reachability to host 'localhost' determined for client <RKClient: 0x808ce90>, unsuspending queue <RKRequestQueue: 0x80834c0 name=(null) suspended=YES requestCount=0 loadingCount=0/5> 
```

这是模拟器中的[Jing 截屏视频](http://people.apache.org/~psmith/restkitObjectLoadingOnce.swf)（您可以看到第一次调用委托方法的断点，但第二次则没有）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:46:09.343

这是一个保留问题。您正在创建对象的本地副本，而不是将其分配给任何导致它被保留的东西。这可能是 RKObjectManager 之类的。创建一个属性，例如 myObjectManager 并像这样分配 self.myObjectManager = [[RkObjectManager alloc] init];

确保您学习并了解内存管理。使用 ARC，但您仍然需要对内存管理有基本的了解！

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T14:49:21.967

我还在文档中找到了这个方法：loadObjectsAtResourcePath:usingBlock: 但我不能使用它，因为它告诉我：没有可见的 @interface for 'RKObjectManager' 声明......如果你试图以 Core Data 为目标，那么你会想要使用 RKManagedObjectRequestOperation 和 managedObjectRequestOperationWithRequest:success:failure: 。.... Restkit Post 不发送对象·1·PUT 请求，更改标题并保存...

# php - 如何使用 preg_match_all 获取 html 标签中的详细信息

> ID：10458491
> 
> 赞同：0
> 
> 时间：2012-05-05T03:10:02.890
> 
> 标签：php

我正在使用`preg_match_all`函数来获取网页上的详细信息。但问题是它返回给定结构的完全匹配。

例子：

```
<span class="st">Details I want to get</span> 
```

但实际上它看起来像：

```
<span class="st"><em>Details </em>I want to <b>get<b></span> 
```

所以它只返回一些与上面给出的第一个代码完全匹配的结果！

我发现了一篇关于抓取的文章，并且有一个代码，是否可以使用这样的代码来执行此操作，因为我发现它适用于上述结构？

```
$nodes = $xPath->query('//span[@class="st"]');
foreach($nodes as $node) {
    echo $node->nodeValue, PHP_EOL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:44:25.377

使用 php DOMDocument 和 strip_tags

```
$xml = '<span class="st">Details i want to get</span>';
$dom = new DOMDocument;
$dom->loadXML($xml);
$spans = $dom->getElementsByTagName('span');
foreach ($spans as $span) {
 // you can check class etc with conditional statements
  #strip_tags to remove <em> and other tags inside that tag
  echo strip_tags($span->nodeValue), PHP_EOL;
} 
```

# wpf - WPF 中的字符映射

> ID：10458492
> 
> 赞同：0
> 
> 时间：2012-05-05T03:10:19.547
> 
> 标签：wpf, fonts

我喜欢在 WPF 中构建自己的字符映射。有没有最简单的方法来遍历真正类型字体的所有 unicode 字符？

我试过这样的事情。

```
 FontFamily fontfamily = combo.SelectedItem as FontFamily;
        var typefaces = fontfamily.GetTypefaces();
        foreach (Typeface typeface in typefaces)
        {
            GlyphTypeface glyph;
            typeface.TryGetGlyphTypeface(out glyph);
            if (glyphs != null)
            {
                mylist.Items.Add(glyph);
            }              
        } 
```

这只是将 Glyphs 命名空间添加到我的列表框中。在这种情况下，我不确定如何定义我的数据模板。

问候，

贾瓦哈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:11:57.803

由 MSDN 指定：

> GlyphTypeface 是与磁盘上的字体文件直接对应的字体。然而，字体是字体的表示。字体是同一字体系列中字体的单一变体。

因此，如果您想构建完整的地图，请尝试考虑 Typeface 类本身。然后，要遍历所有字体，有一个非常简单的方法：

```
foreach (FontFamily fontFamily in Fonts.SystemFontFamilies) {
   foreach (Typeface tFace in fontFamily.GetTypefaces) {
       //Get wat you want with tFace
   }
} 
```

# python - Pandas：如何将年度数据相互叠加

> ID：10458493
> 
> 赞同：1
> 
> 时间：2012-05-05T03:10:23.920
> 
> 标签：python, pandas

我有一系列按时间值（浮点数）索引的数据，我想获取该系列的大部分并将它们绘制在彼此之上。例如，假设我在 20 周内大约每 10 分钟获取一次股票价格，我想通过绘制 20 条股票价格线来查看每周模式。所以我的 X 轴是一周，我有 20 条线（对应于一周内的价格）。

**更新**

索引不是均匀间隔的值，它是一个浮点数。它是这样的：

```
t = np.arange(0,12e-9,12e-9/1000.0)
noise = np.random.randn(1000)/1e12
cn = noise.cumsum()
t_noise = t+cn
y = sin(2*math.pi*36e7*t_noise) + noise
df = DataFrame(y,index=t_noise,columns=["A"])
df.plot(marker='.')
plt.axis([0,0.2e-8,0,1]) 
```

所以索引不是均匀分布的。我正在处理来自模拟器的电压与时间数据。我想知道如何创建一个时间窗口 T，并将 df 拆分为 T 长的块并将它们绘制在彼此之上。因此，如果数据长度为 20*T，那么我将在同一个图中有 20 条线。

对困惑感到抱歉; 我使用股票类比认为它可能会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T23:19:22.297

假设以`pandas.TimeSeries`对象为起点，您可以按 ISO 周数和 ISO 工作日对元素进行分组 [`datetime.date.isocalendar()`](http://docs.python.org/library/datetime.html#datetime.date.isocalendar)。以下语句忽略了 ISO 年份，汇总了每天的最后一个样本。

```
In [95]: daily = ts.groupby(lambda x: x.isocalendar()[1:]).agg(lambda s: s[-1])

In [96]: daily
Out[96]: 
key_0
(1, 1)     63
(1, 2)     91
(1, 3)     73
...
(20, 5)    82
(20, 6)    53
(20, 7)    63
Length: 140 
```

执行下一步可能有更简洁的方法，但目标是将索引从元组数组更改为 MultiIndex 对象。

```
In [97]: daily.index = pandas.MultiIndex.from_tuples(daily.index, names=['W', 'D'])

In [98]: daily
Out[98]: 
W   D
1   1    63
    2    91
    3    73
    4    88
    5    84
    6    95
    7    72
...
20  1    81
    2    53
    3    78
    4    64
    5    82
    6    53
    7    63
Length: 140 
```

最后一步是从 MultiIndex 中“取消堆叠”工作日，为每个工作日创建列，并用缩写替换工作日数字，以提高可读性。

```
In [102]: dofw = "Mon Tue Wed Thu Fri Sat Sun".split()

In [103]: grid = daily.unstack('D').rename(columns=lambda x: dofw[x-1])

In [104]: grid
Out[104]: 
    Mon  Tue  Wed  Thu  Fri  Sat  Sun
W                                    
1    63   91   73   88   84   95   72
2    66   77   96   72   56   80   66
...
19   56   69   89   69   96   73   80
20   81   53   78   64   82   53   63 
```

要为每周创建一个线图，请转置数据框，因此列是周数，行是工作日（请注意，可以通过在上一步中取消堆叠周数代替工作日来避免此步骤），然后调用`plot`.

```
grid.T.plot() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:55:50.610

让我试着回答这个问题。基本上我会用完整的工作日填充或重新索引，每 5 天采样一次，同时删除由于假期或暂停而丢失的数据

`>>> coke = DataReader('KO', 'yahoo', start=datetime(2012,1,1))`

`>>> startd=coke.index[0]-timedelta(coke.index[0].isoweekday()-1)`

`>>> rng = array(DateRange(str(startd), periods=90))`

`>>> chunk=[]`

`>>> for i in range(18):`

`... chunk.append(coke[i*5:(i+1)*5].dropna())`

`...`

然后你可以循环块来绘制每周数据

# c++ - shared_ptr 的用途 && 作为构造函数参数

> ID：10458494
> 
> 赞同：2
> 
> 时间：2012-05-05T03:10:32.443
> 
> 标签：c++, constructor, c++11, shared-ptr, rvalue-reference

这个问题扩展了上一篇讨论作为构造函数参数 的有用性的[帖子：](https://stackoverflow.com/questions/10458235/purpose-of-const-boostshared-ptrt-as-function-argument)`boost::shared<T>&`

```
class SomeClass {  
    SomeClass( const boost::shared_ptr<SomeOtherClass>& );  
} 
```

用右值引用参数代替`boost::shared_ptr<T>&`提议有什么好处吗？

```
class SomeClass {  
    SomeClass( const boost::shared_ptr<SomeOtherClass>&& );  
} 
```

特别是，对于多线程设置，具有 shared_ptr 类型的右值引用的构造函数是否比按值传递或按引用传递更有用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:34:32.410

`shared_ptr`并不特别。与几乎任何其他对象相同的规则适用于它。你会做一个 const rvalue 引用参数吗？我看不出任何正当理由。那么其他类的右值引用呢？除了在类自己的移动构造函数和移动赋值运算符中，在大多数情况下，您不应该通过右值引用获取对象。如果您需要对象的副本，则按值获取它，然后移动它，如下所示：

```
class SomeClass {
    std::shared_ptr<SomeOtherClass> myptr;
public:
    SomeClass(std::shared_ptr<SomeOtherClass> yourptr)
        :myptr(std::move(yourptr))
    {}
}; 
```

如果您不需要副本，那么如果您的意图只是检查它，则通过 const 引用获取它，或者如果您打算修改它，则通过普通引用获取它。

如果你想保证你不会修改指向的对象，那么你可以接受`const std::shared_ptr<const SomeOtherClass> &`，即使参数没有内部 const 限定符，它也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:42:07.293

`const`右值没有目的。但是通过右值获取可以更快地转移所有权，因为只需要交换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:19:00.767

我不确定是否存在 const rvalue 引用之类的东西，我也不知道它是什么意思。当它到达函数并有了名称时，它与 const 左值引用基本相同（如果它有名称，则左值就是规则）。你不会被允许移动它。

我不确定它在呼叫站点意味着什么……如果有的话。当然，它只会使人们感到困惑，因此简直是坏事。

坦率地说，如果编译的话，我会有点恼火。不过我不能说这是违法的。

现在，去掉 const 部分，你就有了不同的故事。现在您可以“移动”shared_ptr。我相当怀疑 shared_ptr 有一个移动构造函数，但也许它确实有。这将意味着移动总是意味着：接收实体可以接管提供的变量，可能会破坏它。

# javascript - 如何结合这两个视频功能？

> ID：10458495
> 
> 赞同：0
> 
> 时间：2012-05-05T03:10:54.997
> 
> 标签：javascript, jquery, ios, html, html5-video

第一个用于多个视频，因此当点击相关缩略图时，它会淡出它

```
$(window).load(function(){
$('li', '.thumbs').on('click', function() {
    var numb = $(this).index(),
        videos = ['images/intro01.m4v', 'images/clip2.mp4', 'images/intro01.m4v', 'images/clip2.mp4', 'images/intro01.m4v', 'images/clip2.mp4'],
        myVideo = document.getElementById('myVid');
    $(myVideo).animate({
        opacity: 0
    }, 500, function() {
        myVideo.src = videos[numb];
        myVideo.load();
        myVideo.play();
        $(myVideo).animate({
            opacity: 1
        }, 500);

    });
});
});//]]> 
```

第二个是为 iPad 制作视频播放 onClick

```
function playVideo1() {
   var myVideo = document.getElementsByTagName('video')[0];
           myVideo.src = 'images/01.m4v'
           myVideo.load();
       myVideo.play();
           myVideo.easeIn(); 
        } 
```

第一个不单独完成工作，第二个不会褪色。我真正需要的是`play()`第二个，但我不确定如何在不干扰另一个的情况下做到这一点。谁能帮我？将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:23:41.637

```
$(window).load(function(){
$('li', '.thumbs').on('click', function() {
    var numb = $(this).index(),
        videos = ['images/intro01.m4v', 'images/clip2.mp4', 'images/intro01.m4v', 'images/clip2.mp4', 'images/intro01.m4v', 'images/clip2.mp4'],
        myVideo = document.getElementById('myVid');
    $(myVideo).stop().animate({
        opacity: 0
    }, 500, function() {
        myVideo.src = videos[numb];
        myVideo.load();
        myVideo.play();
        $(myVideo).stop().animate({
            opacity: 1
        }, 500, playVideo1);

    });
});
});//]]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:33:57.967

试试这个：http: [//jsfiddle.net/3Vu5w/6/](http://jsfiddle.net/3Vu5w/6/)

```
$('li').on('click', function() {
console.log('clicked');
var numb = $(this).index(),
    videos = ['http://video-js.zencoder.com/oceans-clip.mp4', 'http://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.mp4', 'http://media.jilion.com/videos/demo/midnight_sun_sv1_360p.mp4', 'images/clip2.mp4', 'images/intro01.m4v', 'images/clip2.mp4'],
    myVideo = document.getElementById('myVid');
$(myVideo).animate({
    opacity: 0
}, 
      500, 
     function() {
    myVideo.src = videos[numb];
    myVideo.load();
    myVideo.play();
    $(myVideo).animate({
        opacity: 1
    }, 500);
}); //animate
}); //click

<li>thumbs0</li>
<li>thumbs1</li>
<li>thumbs2</li>
<div class="video" data-id="3" >
<video id="myVid" class="video" width="50%" height="50%"  controls="controls"      poster="http://cheerioscoupons.info/wp-content/uploads/_Cheerios-Coupons-1-300x283.jpg"> 
```

# google-earth-plugin - 以可靠的方式获取地面高度

> ID：10458498
> 
> 赞同：3
> 
> 时间：2012-05-05T03:11:37.367
> 
> 标签：google-earth-plugin

程序应如何确定 Google Earth API 已获取某个位置的准确高度？

Google Earth Plugin API 有以下方法来获取地面高度：

```
double GEGlobe.getGroundAltitude(double lat, double lon) 
```

但是，此函数根据相机与目标纬度、经度的距离返回不同的结果。例如，如果某个位置的真实高度为：+181.60

当相机与该位置的距离不同时调用该函数会返回以下高度：

getGroundAltitude 在不同相机位置的返回值：

-19.38（相机离位置很远）

+06.11（相机现在更近了）

+89.13 (...)

+166.82

+177.47

+181.53（相机现在靠近该位置）

返回值 181.53 足够接近 181.60 的真实高度

问题是，程序应该如何确定它已经可靠地获得了最准确的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:37:09.820

这是 Google 地球的缺陷之一。地面高度取决于该给定点可用的图像质量。所以，如果图像好，价值将是准确的，如果图像不好，价值可能是坏的。

您可以检查加载了多少图像`getStreamingPercent()`——随着流百分比的增加，地面高度值应该变得更加准确。

您可能想要使用 Google 的海拔 API，它实际上调用以从外部服务器获取数据（其中加载的百分比不起作用。）这种方法的缺点是它需要互联网连接，所以这是记住。

[https://developers.google.com/maps/documentation/elevation/](https://developers.google.com/maps/documentation/elevation/)

**编辑**

另一件事要记住，那个`getGroundAltitude()`电话非常挑剔。它试图获取地球上单个点的值——但它没有很好的错误检查（即它可能不知道点 X、Y 的值，因此即使周围的所有点都返回错误X,Y 有有效数据。）

# jquery - 显示/隐藏多个 div 并切换父级的背景图像

> ID：10458500
> 
> 赞同：0
> 
> 时间：2012-05-05T03:11:49.880
> 
> 标签：jquery, show-hide

我有五个 div，每个都有自己独特的背景图像。每个 div 内部都有一个文本链接。将鼠标悬停在任何 div 或文本链接上应创建翻转效果，交换 div 的背景。每个 div 的翻转状态也是唯一的，因此 div 1 (#colOne) 在 bgOne.png 和 bgOne_ro.png 之间交替，div 2 (#colTwo) 在 bgTwo.png 和 bgTwo_ro.png 之间交替，等等。

这对 CSS 来说很简单，但在这里它变得有点复杂。

单击文本链接应将其父 div 的背景更改为 bg*_ro.png 以便它持续存在，即使在鼠标关闭时也是如此。同时，它应该显示一个隐藏的 div，该文本链接独有。

这个隐藏的 div 将有自己的关闭按钮（大概是通过 display:hidden with CSS）。关闭它应该使显示它的文本链接的父 div 应该将其背景重置回 bg*.png。事情现在会表现得像在显示隐藏的 div 之前一样。

由于有五个文本链接，因此可能会显示五个隐藏的 div。任何时候都不应显示超过一个隐藏的 div。单击文本链接应该隐藏当前显示的任何隐藏 div，以及明显显示与之关联的 div。

我已经包含了一些结构代码，希望有助于使事情更清晰。

任何帮助将不胜感激。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
body {
font-family:Arial, Helvetica, sans-serif;
background-color:#333333;
margin: 0px;
padding: 0px;
}
#Container {
width:1000px;
margin:auto;
left:50%;
}
.Column {
width:199px;
height:700px;
float:left;
border-left-width: 1px;
border-left-style: solid;
border-left-color: #FFFFFF;
text-align:center;
}
#colOne {
background-image: url(bgOne.png);
}
#colOne:hover {
background-image: url(bgOne_ro.png);
}
#colTwo {
background-image: url(bgTwo.png);
}
#colTwo:hover {
background-image: url(bgTwo_ro.png);
}
#colThree {
background-image: url(bgThree.png);
}
#colThree:hover {
background-image: url(bgThree_ro.png);
}
#colFour {
background-image: url(bgFour.png);
}
#colFour:hover {
background-image: url(bgFour_ro.png);
}
#colFive {
background-image: url(bgFive.png);
}
#colFive:hover {
background-image: url(bgFive_ro.png);
}
a {
position:relative;
text-align:center;
top:600px;
}
</style>
</head>
<body>
<div id="Container">
  <div class="Column" id="colOne">
    <a>Testing</a>
</div>
  <div class="Column" id="colTwo">
    <a>Testing</a>
</div>
  <div class="Column" id="colThree">
    <a>Testing</a>
</div>
  <div class="Column" id="colFour">
    <a>Testing</a>
</div>
  <div class="Column" id="colFive">
    <a>Testing</a>    
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:20:23.727

```
$('.Column').click(function () {
  $('#Container').css('background-image', $(this).css('background-image'));
}); 
```

# search - Safari 网络检查器下一场比赛？

> ID：10458502
> 
> 赞同：0
> 
> 时间：2012-05-05T03:12:20.813
> 
> 标签：search, safari, find, web-inspector

我正在我的 Javascript 文件中搜索某些文本。我将该文本输入到搜索框中，它很有帮助地告诉我有四个匹配项。到目前为止，一切都很好。但是我怎样才能参加下一场/上一场比赛呢？

![在此处输入图像描述](../Images/74afa993c444fe03a8a4dec7b03ee069.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:17:13.200

只需点击 Return 和 Shift-Return。

# java - Android - 为什么我的 Toast 消息不显示？

> ID：10458512
> 
> 赞同：0
> 
> 时间：2012-05-05T03:14:42.607
> 
> 标签：java, android, toast

我的吐司没有出现，我很困惑，因为我认为我做对了，我不明白。正如您所看到的，它是一个显示三个按钮的程序，第一个按钮会激活下载，该下载应该会自动打开 PDF 文件 - 如果没有 pdf 阅读器，应该会弹出一个 toast 说没有阅读器。其他按钮进入新屏幕并用作后退按钮。

```
public class myactivity extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myactivity);
    mProgressDialog = new ProgressDialog(myactivity.this);
    mProgressDialog.setMessage("Please be patient, file downloading...");
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    Button Section = (Button) findViewById(R.id.Section);
    Section.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // TODO Auto-generated method stub
            Intent Section = new Intent(view.getContext(),
                    Section.class);
            startActivity(Section);

        }
    });

    Button Back = (Button) findViewById(R.id.Back);
    Back.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            setResult(RESULT_OK);
            finish();
        }
    });

    startBtn = (Button) findViewById(R.id.Search);
    startBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            startDownload();
        }
    });
}

private void startDownload() {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile
            .execute("http://www.website.com/document.pdf");

}

class DownloadFile extends AsyncTask<String, Integer, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected String doInBackground(String... aurl) {
        try {

            URL url = new URL(aurl[0]);
            URLConnection connection = url.openConnection();

            connection.connect();
            int fileLength = connection.getContentLength();
            int tickSize = 2 * fileLength / 100;
            int nextProgress = tickSize;

            Log.d(

            "ANDRO_ASYNC", "Lenght of file: " + fileLength);

            InputStream input = new BufferedInputStream(url.openStream());

            String path = Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files";
            File file = new File(path);
            file.mkdirs();
            File outputFile = new File(file, "test1.pdf");

            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024 * 1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                if (total >= nextProgress) {
                    nextProgress = (int) ((total / tickSize + 1) * tickSize);
                    this.publishProgress((int) (total * 100 / fileLength));
                }
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            showPdf();

        } catch (Exception e) {
        }
        return null;
    }

}

private void showPdf() {
    // TODO Auto-generated method stub
    mProgressDialog.dismiss();

    File file = new File(Environment.getExternalStorageDirectory()
            + "/Android/Data/" + getApplicationContext().getPackageName()
            + "/files/test1.pdf");
    Intent testIntent = new Intent(Intent.ACTION_VIEW);
    testIntent.setType("application/pdf");
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    Uri uri = Uri.fromFile(file);
    intent.setDataAndType(uri, "application/pdf");
    try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(myactivity .this,
                "No Application Available to View PDF", Toast.LENGTH_LONG).show();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:17:29.157

```
 try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(myactivity .this,
                "No Application Available to View PDF", Toast.LENGTH_LONG).show();
    } 
```

上面的代码仅在您没有在清单文件中声明活动时才显示 toast，但在 pdf 不存在时不显示。您必须`FileNotFoundException`根据您的要求使用。

更新：：：

```
try{
 File file = new File(Environment.getExternalStorageDirectory()
            + "/Android/Data/" + getApplicationContext().getPackageName()
            + "/files/test1.pdf");
    Intent testIntent = new Intent(Intent.ACTION_VIEW);
    testIntent.setType("application/pdf");
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    Uri uri = Uri.fromFile(file);
    intent.setDataAndType(uri, "application/pdf");
    try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(myactivity .this,
                "No Application Available to View PDF", Toast.LENGTH_LONG).show();
    }
} catch (FileNotFoundException e) {
        Toast.makeText(myactivity .this,
                "No Application Available to View PDF", Toast.LENGTH_LONG).show();
    } 
```

# java - 使用 MouseListener 开始或结束一个无限循环

> ID：10458518
> 
> 赞同：2
> 
> 时间：2012-05-05T03:16:05.013
> 
> 标签：java, eclipse, swing, jframe, awt

我想让鼠标点击开始一个循环，报告鼠标的位置，直到点击鼠标。我开始循环并报告位置没有问题，但是即使鼠标单击两次鼠标单击方法结束循环，或者应该，程序无限继续循环。

```
public JFramethingy() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.addMouseListener(new MouseAdapter() {
        int numClicked;
        public void mouseClicked(MouseEvent arg0) {
            numClicked++;
            for (int i = 0; i > -1;) {
                if(i % 1002000 == 0){
                PointerInfo a = MouseInfo.getPointerInfo();
                Point b = a.getLocation();
                int x = (int) b.getX();
                int y = (int) b.getY();
                System.out.println(x + "," + y); 

                }
                if (numClicked > 1){
                    numClicked = 0;
                    i = -3;
                }
                i++;
            }               
        }   
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:55:59.397

您的无限循环正在 EDT 上发生（这就是调用侦听器的原因），这意味着 Swing 不能再处理任何事件。这意味着 mouseClicked 不会再次被调用，这就是为什么 numClicked 没有被递增的原因。

您需要在单独的线程中关闭无限循环，并使 EDT 仅增加 numClicked。然后你需要让 numClicked 变得易变，或者更好的是，一个 AtomicInteger。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T05:38:18.333

不，不需要*直接*创建后台线程，因为您可以通过使用 Swing Timer 或 javax.swing.Timer 轻松解决这个问题，因为这正是它所构建的那种情况。

# c# - 如何异步回调 WCF 中的递归函数？

> ID：10458519
> 
> 赞同：0
> 
> 时间：2012-05-05T03:16:07.677
> 
> 标签：c#, wcf, recursion, asynccallback, wcf-callbacks

**简介**：我有一个服务器 [ *WCF 服务库*] 和客户端 [ *Winform* ]，客户端使用 netTcpBinding 连接到服务器。

**服务器的工作是使用文件管理器功能 { 新建文件夹、移动、复制、删除、属性、属性和搜索**}将计算机文件共享给客户端。

![在此处输入图像描述](../Images/73ecd0c6e3df8db1d161ec124c67354c.png)

**问题：** 搜索函数是一个递归函数，当它找到包含搜索键的（文件夹/文件）名称时，它会立即将项目添加到客户端 ListView（*使用客户端 CALLBACK ）。*
所以一切都很完美，直到我添加了一个停止搜索按钮，它假设允许用户停止递归函数**_Search()**，当我尝试停止搜索时会发生什么情况是冻结 GUI 并且永远不会从冻结模式恢复，直到我“停止调试”。
事实上，当我在调试模式下设置点以查看搜索功能有什么问题时，它可以工作并且搜索停止。

这是我用于搜索的代码：

**WCF 库端**：

```
 [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerSession)]
  public class MainService : IFileManager,ITaskManager
  {

    IFileManagerCallback callback = OperationContext.Current.GetCallbackChannel<IFileManagerCallback>();

 bool stopSearch = false;

    public void StopSearch()    //client call this function to stop SEARCHING.
    {
        stopSearch = true;
    }

    public void Search(string path, string name)     //client call this function to start searching
    {
        _Search(path, name);
        callback.SearchEnd();
        if (stopSearch)
        {
            callback.InfoLabel("Search Cancelled", InfoState.Info);
            stopSearch = false;
            return;
        }
        callback.InfoLabel("Search Done.", InfoState.Done);
    }

    private void _Search(string path, string name)    //the evil recursive function
    {
        if (stopSearch) return;
        DirectoryInfo Roots = new DirectoryInfo(path);

        foreach (FileInfo file in Roots.GetFiles())
        {
            if (stopSearch) return;
            if (file.Name.IndexOf(name, StringComparison.InvariantCultureIgnoreCase) > -1)
            {
                _File item = new _File();
                item.Name = file.Name;
                item.Size = file.Length;
                item.Path = file.FullName;
                callback.File(item);
            }
        }
        foreach (DirectoryInfo folder in Roots.GetDirectories())
        {
            if (stopSearch) return;
            if (folder.Name.IndexOf(name, StringComparison.InvariantCultureIgnoreCase) > -1)
            {
                _Folder item = new _Folder();
                item.Name = folder.Name;
                item.Path = folder.FullName;
                callback.Folder(item);
            }
            _Search(folder.FullName, name);
        }
    } 
 } 
```

WCF接口：

```
 [ServiceContract(CallbackContract = typeof(IFileManagerCallback))]
public interface IFileManager
{
    [OperationContract]
    void StopSearch();
     [OperationContract(IsOneWay = true)]
    void Search(string path, string name);
}

     public interface IFileManagerCallback
{
    [OperationContract]
    void File(_File file);

    [OperationContract]
    void Folder(_Folder folder);

    [OperationContract]
    void InfoLabel(string value, InfoState state);

    [OperationContract]
    void SearchEnd();

} 
```

**客户端 ：**

```
 class Callback : IFileManagerCallback
{
    public delegate void OnFileReceived(object sender, _File item);
    private OnFileReceived _fileReceivedHandler = null;
    public event OnFileReceived OnFileReceivedEvent
    {
        add { _fileReceivedHandler += value; }
        remove { _fileReceivedHandler -= value; }
    }
    private void RaiseFileEvents(_File file)
    {
        if (_fileReceivedHandler != null)
        {
            _fileReceivedHandler(this, file);
        }
    }
    public void File(_File file)
    {
        RaiseFileEvents(file);
    }
    // **I WILL AVOID POSTING Folder event and handler it's the same of the file.**
    public void Folder(_Folder folder)
    {
        RaiseFolderEvents(folder);
    } 
```

客户端 Form1.cs ：

```
 public partial class Form1 : Form
{

       private void callback_FileReceivedEvent(object sender, _File file)
    {
        ListViewItem item = new ListViewItem();
        item.Text = file.Name;
        item.ToolTipText = file.Path;
        item.Tag = item.ImageIndex;
        item.Name = item.Text;
        item.SubItems.Add(CnvrtUnit(file.Size));
        item.Group = listView1.Groups[0];
        item.ImageIndex = _iconListManager.AddFileIcon(file.Path);
        listView1.Items.Add(item);
    }
    bool IsSearch = false;
    private void btnSearch_Click(object sender, EventArgs e)
    {
        if (!IsSearch)
        {
           IsSearch = true;
           listView1.Items.Clear();
           client.Search(currAddress, txtAddress.Text);
           return;
        }
        client.StopSearch();
    }
    public void StopSearching()
    {
        UpdateLabel();    //updating GUI label "Selected 0:,Items: 0"
        IsSearch = false;
    }
} 
```

我对修复它真的很困惑，我不确定我是否为我的问题选择了正确的标题，所以如果发生这种情况是因为我需要异步回调，我将如何使用 WCF 转换我的搜索函数和异步回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:30:19.310

我想我知道这里发生了什么，但这只是一个有根据的猜测。由于您的 WCF 代码设置为每个会话一个实例，并且您处于同一会话中，因此您正在创建一个循环锁。基本上，您正在达到一个点，`callback.File(item)`即在您的客户端代码调用`StopSearch`. 因此，客户端代码在收到回复之前不会响应，`StopSearch`并且服务器在收到客户端回复之前不会到达`if(stopSearch)`/ `stopSearch = true`（忙于等待 WCF，忙于等待客户端，即.. ..明白这点）。尝试将其标记`StopSearch`为`OneWay`（我相信，我的 WCF 不是太强）客户端中的调用将立即返回（而不是等待 WCF），从而解锁客户端。

或者，您可以使您的 WCF 代码更加多线程，但是您可能会遇到更多问题。

**更新**

根据您的回复，您似乎需要使您的[WCF 服务调用真正 async](https://stackoverflow.com/questions/400798/how-to-make-a-call-to-my-wcf-service-asynchronous)，或者使客户端代码更加异步（使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)或[backgroundworkers](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)或只是启动一个新线程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:41:33.237

我找到了一个解决方案，也许不是完美的，但我不得不使用 Thread.Abort 来阻止它。

```
 public void Search(string path, string name)
    {
        Thread th = new Thread(s => SearchThread(path, name));
        th.Start();
    }

    private void SearchThread(string path, string name)
    {
        try
        {
            _Search(path, name);
        }
        finally
        {
            callback.SearchEnd();
            if (stopSearch)
            {
                callback.InfoLabel("Search Cancelled", InfoState.Info);
                stopSearch = false;
            }
            else
                callback.InfoLabel("Search Done.", InfoState.Done);
        }
    } 
```

我`Thread.Abort()`改用 if`return`

```
private void _Search(string path, string name)
    {
        if (stopSearch) Thread.CurrentThread.Abort();
        DirectoryInfo Roots = new DirectoryInfo(path);

        foreach (FileInfo file in Roots.GetFiles())
        {
            if (stopSearch) Thread.CurrentThread.Abort(); 
            if (file.Name.IndexOf(name, StringComparison.InvariantCultureIgnoreCase) > -1)
            {
                _File item = new _File();
                item.Name = file.Name;
                item.Size = file.Length;
                item.Path = file.FullName;
                callback.File(item);
            }
        }
        foreach (DirectoryInfo folder in Roots.GetDirectories())
        {
            if (stopSearch) Thread.CurrentThread.Abort();
            if (folder.Name.IndexOf(name, StringComparison.InvariantCultureIgnoreCase) > -1)
            {
                _Folder item = new _Folder();
                item.Name = folder.Name;
                item.Path = folder.FullName;
                callback.Folder(item);
            }
            _Search(folder.FullName, name);
        }
    } 
```

# git - GIT 最短命令

> ID：10458525
> 
> 赞同：1
> 
> 时间：2012-05-05T03:16:49.673
> 
> 标签：git

我试图弄清楚 git 命令，所以我不必一直调用整个 URL，有人可以帮助我吗？

它是这样的：

```
$ git remote add git@github.com:JREAM/library.git
$ git push -u origin master
$ git pull 
```

我知道这是不正确的，但是有谁知道将存储库添加到我的 git 文件以便我可以键入**最少数量的命令**的最短方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:18:50.283

git remote add *origin* git@github.com:JREAM/library.git

# php - PHP：用颜色填充图像块并保存信息

> ID：10458531
> 
> 赞同：0
> 
> 时间：2012-05-05T03:18:31.783
> 
> 标签：php, javascript, html, image

我正在寻找一个包含网格纸图像的页面。可以选择这些网格，根据用户选择的链接类型，颜色将被填充和保存。一旦所有的块都被填满，这将被存档，然后将显示一个新的工作表。我想在后端使用 PHP / MySQL，但想知道什么是好的客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:00:04.740

为什么要为网格绘制图像？更好的解决方案是使用一个表格或一个充满 div 的列表来创建网格。然后在用户单击链接时使用 jQuery 填充背景。

网格示例：

```
<ul id="grid">
    <li>
        <div class="cell" id="cell_id"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
    </li>
    <li>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
    </li>
    ...
</ul> 
```

CSS 示例：

```
<style>
    #grid {
        list-style: none;
    }

    #grid li {
        height: 50px;
    }

    #grid .cell {
        float: left;
        width: 100px;
        height: 50px;
        border: 1px solid black;
    }
</style> 
```

最后，当用户单击链接时，使用 jQuery 填充单元格。您可以通过计算行和单元格来找到单元格，或者只给单元格一个 id。保存部分可以通过对将信息保存到数据库的页面的 AJAX 调用来完成。

简单的 jQuery 示例（您必须自己考虑其余部分）：

```
<script>
    $('link').click(function() {
        //place check for new sheet here 

        var id = $(this).attr('id');

        //set the bg color
        $('cell_id').css('background-color', 'red'); //or color code #FF0000

        //save the info
        $.post('save_info.php', { cell_id: id, color: "red" }, function(data) {
             alert('saved!');
        });
    });
</script> 
```

您可以在以下位置找到更多信息并下载 jQuery：http: [//jquery.com/](http://jquery.com/)

在填充所有单元格时创建新工作表的 jQuery 代码可以通过在 click 函数中进行一点检查来完成。此检查必须计算所有具有 bg 颜色的单元格，这与总单元格相同吗？然后通过删除所有单元格的 bg 颜色并设置新的 id 来创建一个新工作表。但是你可以自己解决这个问题；）。

# javascript - JavaScript - for 循环抛出未定义的变量。（提供SSCCE）

> ID：10458532
> 
> 赞同：0
> 
> 时间：2012-05-05T03:18:33.807
> 
> 标签：javascript, jquery, html, a-star

我在一个简单的 JavaScript 中使用 A* 寻路脚本。我将我的游戏分解为 SSCCE。无论如何，我的游戏有 15 列和 10 行。

寻路一直有效，直到您单击最右侧 5 列上的任意位置。所以如果`X`是`11`或更大。你会得到这个错误。您单击的轴在哪里`Uncaught TypeError: Cannot read property '7' of undefined`。`7``Y`

这是我的`SSCCE`。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript' src='graphstar.js'></script>
<script type="text/javascript">
    var board;
</script>
<script type='text/javascript' src='astar.js'></script>
<script type="text/javascript">
    $(document).ready(function()
{
        // UP to DOWN - 10 Tiles (Y)
        // LEFT to RIGHT - 15 Tiles (X)
        graph = new Graph([
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 1, 13, 13, 1], 
        [1, 13, 1, 1, 13, 1, 1, 13, 1, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 1, 1, 1, 13, 13, 1, 13, 13, 1, 1, 1, 13, 1], 
        [1, 13, 13, 1, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 1], 
        [1, 13, 1, 1, 1, 1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ]);
        //Let's do an example test.
        start = graph.nodes[1][2]; // x - y (15 columns across, 10 rows down)
        end = graph.nodes[12][7]; // x - y (15 columns across, 10 rows down)
        result = astar.search(graph.nodes, start, end);
    });
</script>
</head>
<body>
Loading... pathfinding. Look in Chrome Console/Firefox Firebug for more information.
</body>
</html> 
```

如您所见，我的游戏是`jQuery`. 还有`graphstar.js`和`astar.js`。不要担心，`astar.js`因为它工作正常。`graphstar.js`是我的问题所在。`astar.js`是`nodes`布置的地方。`graphstar.js`是地图绘制的地方。

在这里查看全部内容：http `graphstar.js`: [//pastebin.com/kx4mw86z](http://pastebin.com/kx4mw86z)（这里是`astar.js`： http: [//pastebin.com/wtN2iF15](http://pastebin.com/wtN2iF15)）

这是它的布局`graphstar.js`：

```
// Creates a Graph class used in the astar search algorithm.
function Graph(grid) {
    var nodes = [];

    var row, rowLength, len = grid.length;

            for (x = 0; x <= 10; x++) {
             row = grid[x];
             nodes[x] = new Array(15);
                for (y = 0; y <= 15; y++) {
                   nodes[x][y] = new GraphNode(x, y, row[y]); 
                }
            }

    this.input = grid;
    this.nodes = nodes;
} 
```

我知道我的`X`最高值是 10。但我试着弄乱它.. 我会出错。有时没有错误，页面会卡住。`15``Y`

帮助？

新的图形格式：

```
for (y = 0; y <= 10; y++) {

    row = grid[y];
    nodes[y] = new Array(15);

    for (x = 0; x <= 15; x++) {

        console.log("X: " + x + " Y: " + y);
        //console.log("Row: " + row[x]);
        nodes[x][y] = new GraphNode(x, y, row[x]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:25:27.677

如果我正确理解这一切，我认为您只是将索引倒退。

```
graph.nodes[12][7] 
```

`graph.nodes[12]`未定义，因为 中只有 11 个元素`nodes`：

```
for (x = 0; x <= 10; x++) {

    nodes[x] = new Array(15);  // x only goes up to 10 
```

**编辑：**

这条评论说明了一切：

```
// UP to DOWN - 10 Tiles (Y)
// LEFT to RIGHT - 15 Tiles (X) 
```

**这是倒退。** 你没有 15 x 和 10 y，你有 10 x 和 15 y。

# php - 如何使用 LEFT JOIN mysql 从另一个表中派生 count(*)

> ID：10458534
> 
> 赞同：1
> 
> 时间：2012-05-05T03:19:51.423
> 
> 标签：php, mysql, sql

我有如下表定义：

*   地点
    （ID，名称）
*   评论
    （id、userid、placeid）
*   收藏夹
    （id、userid、placeid）
*   照片
    (id, url, placeid)
    其中`placeid`是表 id 的外键`Place`。

在那张桌子上，我想得出这种信息：
`- placeid, place name, totalReview, totalFavorite, totalPhoto.`

我被卡住了。我目前的进展我可以只从 1 个表中获取信息，就像我可以通过使用这个 mysql 语句知道地方的总评论一样： `SELECT p.*, count(r.id) as totalReview from Place p left join Review r on p.id = r.placeid group by p.id`。但是，我不知道如何得出totalFavorite 和totalPhoto。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:27:44.893

您需要分别聚合每个表。这是一种解决方案：

```
SELECT p.*, 
       totalreview, 
       totalfavorite, 
       totalphoto 
FROM   place p 
       LEFT OUTER JOIN (SELECT placeid, 
                               Count(*) AS totalReview 
                        FROM   review 
                        GROUP  BY placeid) r 
                    ON p.placeid = r.placeid 
       LEFT OUTER JOIN (SELECT placeid, 
                               Count(*) AS totalFavorite 
                        FROM   favorite 
                        GROUP  BY placeid) f 
                    ON p.placeid = f.placeid 
       LEFT OUTER JOIN (SELECT placeid, 
                               Count(*) AS totalPhoto 
                        FROM   photo 
                        GROUP  BY placeid) ph 
                    ON p.placeid = ph.placeid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:26:25.660

这是一种简单的方法：

```
SELECT
p.id, p.name,
(SELECT COUNT(*) FROM Review r WHERE r.placeId=p.id) AS totalReview
(SELECT COUNT(*) FROM Favorite f WHERE f.placeId=p.id) AS totalFavorite
(SELECT COUNT(*) FROM Photo ph WHERE ph.placeId=p.id) AS totalPhoto
FROM Place p 
```

# winforms - 在屏幕外/被遮挡后触发自定义控件上的重绘？

> ID：10458535
> 
> 赞同：0
> 
> 时间：2012-05-05T03:19:55.443
> 
> 标签：winforms, custom-controls, repaint

我有一些包含在图像中的自定义控件，如果它们被拖出屏幕并重新打开，则图像无法正确重新绘制。我已经为这些不同的控件覆盖了油漆，它们似乎工作正常，除了如果反复拖出屏幕，它们就不能正确绘制。任何人都知道为什么会发生这种情况和/或解决方案？

**编辑：即使对话框只是移动调整大小太快，其中一些似乎也存在问题，而不仅仅是将其移出屏幕。他们开始看起来像是被吸引到了自己身上。哪种是有道理的，但我不知道如何治愈它。**

**编辑 2：**这些是具有四种状态的自定义按钮（悬停、单击、正常、禁用），所以我不认为容器的问题是我不认为的问题..？OnPaint 代码是：

```
 private void CQPButton_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.Clear(BackColor);

    if (BackgroundImage != null)
        e.Graphics.DrawImage(BackgroundImage, e.ClipRectangle);

    if (Image != null)
    {
        RectangleF rect = new RectangleF();
        rect.X = (float)((e.ClipRectangle.Width - Image.Size.Width) / 2.0);
        rect.Y = (float)((e.ClipRectangle.Height - Image.Size.Height) / 2.0);
        rect.Width = Image.Width;
        rect.Height = Image.Height;
        e.Graphics.DrawImage(Image, rect);
    }

    if (Text != null)
    {
        SizeF size = e.Graphics.MeasureString(this.Text, this.Font);

        // Center the text inside the client area of the PictureButton.
        e.Graphics.DrawString(this.Text,
            this.Font,
            new SolidBrush(this.ForeColor),
            (this.ClientSize.Width - size.Width) / 2,
            (this.ClientSize.Height - size.Height) / 2);
    }

} 
```

我尝试强制重绘各种事件，LocationChanged 和 Move 尝试处理调整大小问题，ClientSizeChanged 尝试在它们离开屏幕时处理，并且没有任何问题。我不知道我错过了什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:18:18.543

看到代码片段后，我完全改变了我的答案。它有一个错误：

```
 RectangleF rect = new RectangleF();
    rect.X = (float)((e.ClipRectangle.Width - Image.Size.Width) / 2.0);
    rect.Y = (float)((e.ClipRectangle.Height - Image.Size.Height) / 2.0); 
```

在这里使用 e.ClipRectangle 是不正确的，它是一个始终在变化的值，具体取决于控件的哪个部分需要重新绘制。是的，当您调整控件大小或将其部分拖出屏幕时，它的变化最大。您需要使用控件的*实际*大小：

```
 rect.X = (float)((this.ClientSize.Width - Image.Size.Width) / 2.0);
    rect.Y = (float)((this.ClientSize.Height - Image.Size.Height) / 2.0); 
```

# python - 从多个复选框获取数据时的格式是什么？我可以得到一份清单吗？

> ID：10458537
> 
> 赞同：2
> 
> 时间：2012-05-05T03:20:22.213
> 
> 标签：python, google-app-engine, django-templates, google-cloud-datastore

我有一个带有属性 tagName 的 Kind Tag，在 html 中，我这样编码

```
{% for tag in tags%}
    <input type="checkbox" name="tagName" value={{tag.tagName}}>{{tag.tagName}}
{% endfor%} 
```

现在，在我的 python 文件中，我尝试这样做：

```
tagNames = self.request.get('tagName') 
```

我想要一个包含用户选择的每个选项的列表。但我得到的似乎不是。所以。

1.  如何使用 request.get() 获取用户选择列表？

2.  还有其他方法吗？我对django不熟悉，我只是导入gae的模板。我可以使用 gae 的模板来简化这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:37:51.090

假设您使用的是 webapp 框架，而不是`self.request.get()`, use `self.request.get_all('tagName')`，它将返回一个值列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T09:48:45.523

[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict)

Looks like QueryDict.getlist(key, default) will get you what you want.

ie. self.request.getlist('tagName')

# javascript - 有没有办法使用 javascript 来控制像 yahoo 这样的电子邮件服务？

> ID：10458539
> 
> 赞同：-1
> 
> 时间：2012-05-05T03:20:43.040
> 
> 标签：javascript, email, browser-addons

我正在为 firefox 和 chrome 制作一个开源插件，我想知道是否有办法使用 javascript 来控制像 yahoo 这样的电子邮件服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:26:35.567

您可以控制页面的外观，并且可能（尽管我不能确定）发送和编辑消息而无需使用页面按钮，但是您不能执行服务器端的操作，例如从没有登录它或从电子邮件发送页面以外的页面发送消息。如果您对控制某一特定事物有任何具体问题，请在评论中添加，我可能会回答。

# jquery-mobile - JQuery Mobile 的不同页面方向

> ID：10458543
> 
> 赞同：1
> 
> 时间：2012-05-05T03:21:33.637
> 
> 标签：jquery-mobile

我的 JQuery Mobile 项目中有 2 页。我希望第 1 页固定为纵向，第 2 页固定为横向。

可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:39:49.757

```
when you click on a link to open page then check window.orientation, then change your page accordingly . As well as implement event orientationchange and whenever orientation is changed then open the relevent page. 
```

您可以使用以下更改/浏览到相关页面

$.mobile.changePage("#LandscapePage", { transition: "slide" });

如果您需要进一步的帮助，请询问

# c++ - 什么是“外部链接和与 C 语言链接”

> ID：10458545
> 
> 赞同：1
> 
> 时间：2012-05-05T03:22:03.850
> 
> 标签：c++, c

以下段落中的“外部链接”和“C语言链接”是什么意思，摘自[1]。

`C`“extern声明有两种不同的形式：`C`上面使用的 extern，以及`C`带有大括号之间的声明的 extern { ... }。第一种（内联）形式是具有外部链接和 C 语言链接的声明；第二种仅影响语言链接。因此，以下两个声明是等价的：

你能进一步详细说明他试图用这个例子解释什么吗？

[1] [http://tldp.org/HOWTO/C++-dlopen/thesolution.html](http://tldp.org/HOWTO/C++-dlopen/thesolution.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:28:43.537

作者所说的与这两行有关：

```
extern "C" int foo;
extern "C" { int bar; } 
```

`foo`是已声明但未定义的变量。它存在于别处。另一方面，`bar`既是声明的*又*是定义的。

将声明视为只是说明某物存在于某处，但并未实际创建它。因此，定义是声明*加上*使该事物存在。

后者与 C 链接完全相同，`int bar;`但将“发布”变量。例如，一个函数`int max (int a, int b);`可以`_max`以 C 语言链接和`_max$$int$int`C++ 语言链接的形式发布（以允许多个具有相同名称的函数）。

请注意，此上下文中的“发布”是函数在链接器中的外观，以便您的代码可以链接到它。如果没有 C 语言链接，通常很难将 C 代码与 C++ 库链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T03:32:28.550

笨拙的措辞，是的。他想要达到的是，

```
extern "C" int foo(); 
```

是相同的

```
extern "C" { extern int foo(); } 
```

但*不*一样

```
extern "C" { int foo(); } 
```

`extern int foo();`...除了在 C++ 中的文件范围内“ ”和“ ”之间没有实际区别`int foo();`，因此完全可以原谅你摸不着头脑。这是一个实际上有所作为的案例：

```
extern "C" const int x = 12;
extern "C" { const int y = 12; } 
```

`x`将在翻译单元外可见，`y`不会。

# c - 用C在linux中挂载USB驱动器

> ID：10458549
> 
> 赞同：2
> 
> 时间：2012-05-05T03:22:52.833
> 
> 标签：c, linux, usb

我希望以编程方式在 Linux 中挂载 USB 驱动器，以便可以使用 fprintf 编写文本文档。我无法找出如何安装驱动器。我一直在网上搜索答案，我找到了许多关于如何通过命令行执行此操作的教程，但在 C 语言中没有。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T03:49:56.183

```
man 2 mount 
```

例如

```
#include <sys/mount.h>

if (mount("/dev/mmcblk0p1", "/mnt/sd", "vfat", MS_NOATIME, NULL)) {
    if (errno == EBUSY) {
        printf("Mountpoint busy");
    } else {
        printf("Mount error: %s", strerror(errno));
    }
} else {
    printf("Mount successful");
} 
```

# java - 为什么服务器不选择我在图像标签中给它的路径？

> ID：10458551
> 
> 赞同：0
> 
> 时间：2012-05-05T03:23:07.053
> 
> 标签：java, jsp, glassfish

我正在使用玻璃鱼。我写的时候在一个jsp页面上：

```
<img src="/home/non-admin/project users/pic.jpg"/> 
```

IDE 突出显示该行，并指出这是一个错误的值。但是，当我从项目内的目录中提供路径（指向同一图像）时，它会拾取它并显示图像。就像`project/images/pic.jpg` 为什么它不从我的系统中获取任何路径。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:28:09.480

它无法获取您系统的任何路径（想象一下有人正在通过访问他们的浏览器中的路径来读取您的系统文件:)），您需要编写一个 Servlet，它将从您的系统中读取该文件并写入输出回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:29:13.370

问题是因为它基于网页基础的路径，通常类似于 /var/www/htdocs 要允许主目录中的某些内容，您可以从 web 目录中创建指向该目录的链接，`ln -s /home/non-admin/project\ users/ /var/www/htdocs/userdata`例如使用`<img src="/userdata/pic.jpg"/>`. 您还需要设置目录/文件的权限以允许 www 用户读取它。

# ruby-on-rails - 如何在深度关联中使用 ActiveRecord

> ID：10458555
> 
> 赞同：0
> 
> 时间：2012-05-05T03:24:34.667
> 
> 标签：ruby-on-rails, activerecord

我想通过以下模型中的 bar 获取与单个 foo 关联的 Bar 记录， `Foo <-> Bar <-> Baz`.

```
class Foo < ActiveRecord::Base
  has_many :foo_bar_assocs
  has_many :bars, through: :foo_bar_assocs
end

class Bar < ActiveRecord::Base
  has_many :bar_baz_assocs
  has_many :bazs, through: :bar_baz_assocs
  attr_readonly :name
end

class Baz < ActiveRecord::Base
end

class FooBarAssoc < ActiveRecord::Base
  belongs_to :foo
  belongs_to :bar
end

class BarBazAssoc < ActiveRecord::Base
  belongs_to :bar
  belongs_to :baz
end 
```

天真的实现：

```
foo = Foo.find(id)
baz_of_foo = foo.bars.where(name: params[:name]).map{|b| b.bazs}.flatten.uniq 
```

此代码生成错误查询，它执行了很多次。我想要的是如下内容：

```
baz_of_foo = foo.something_good_query(bar_name: params[:name]) 
```

另外，我想获取像 ActiveRecord::Relation 这样的对象，以便优化生成的 SQL 查询。

```
baz_of_foo.each{ ... } # SELECT DISTINCT baz.* FROM ...
baz_of_foo.count       # SELECT COUNT(DISTINCT baz.*) FROM ...
baz_of_foo.exists?     # SELECT baz.* FROM ... TAKE 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:53:04.780

你也应该定义反向关系，一旦你完成了，你应该能够做这样的事情：

```
Baz.joins(:bar => :foo).where(:bar => {:name => params[:name], :foo => {:id => foo_id}}) 
```

对于复杂的查询，我还推荐使用[squeel gem](https://github.com/ernie/squeel)，它允许更紧凑的查询并且还支持外连接。

# php - 如何从php中的另一个文件获取ID？

> ID：10458556
> 
> 赞同：1
> 
> 时间：2012-05-05T03:24:36.133
> 
> 标签：php, edit, show

我要在我的网站上制作编辑菜单。所以我将页面从产品引导到编辑页面。我感到困惑的是如何从产品页面获取产品 ID 以在编辑页面中使用？这是我在产品中的代码

```
<?php $query= "SELECT * FROM game";
$rs = mysql_query($query);
while($data = mysql_fetch_array($rs)) { ?>
<div class="gameBox">
    <div style="margin:5px;">
        <?php echo "<image src=\"images/".$data['gameId'].".png\" alt=\"gameImage\" </image>"?>
        <div class="cleaner"></div>
        <div class="myLabel">Name</div><div>: <?php echo $data['gameName'];?></div>
        <div class="myLabel">Developer</div><div>: <?php echo $data['gameDeveloper']; ?></div>
        <div class="myLabel">Price</div><div>: $ <?php echo $data['gamePrice']; ?></div>
        <br />
        <a href="edit.php" <?php $id=$data['gameId'];?>><input type="button" value="Edit"/></a>
        <a href="<!-- Delete -->"><input type="button" value="Delete"/></a>
    </div>
</div>
<?php } ?> 
```

这是我在编辑页面中的代码

```
<?php include("connect.php");
$id[0] = $_REQUEST['id'];
$query = "SELECT * FROM game WHERE gameId=".$id."";
$rs = mysql_query($query);
while($data = mysql_fetch_array($rs)) { ?>
    <form action="doUpdate.php" method="post">
        <?php echo "<image src=\"images/".$id.".png\" alt=\"gameImage\" </image>"?>
        <div class="cleaner"></div>
        <div class="myLabel">Name</div><div>: <input type="text" value="<?php echo $data['gameName'];?>" id="gameName" name="gameName"/></div>
        <div class="myLabel">Developer</div><div>: <input type="text" value="<?php echo $data['gameDeveloper'];?>" id="gameDeveloper" name="gameDeveloper"/></div>
        <div class="myLabel">Price</div><div>: <input type="text" value="<?php echo $data['gamePrice'];?>" id="gamePrice" name="gamePrice"/></div>
        <br/>
        <div id="txtError">
        <!--error message here-->
        </div>
        <input type="submit" value="Submit"/>
        <a href="product.php"><input type="button" value="Cancel"/></span></a>
<?php } ?> 
```

当我尝试访问编辑页面时，出现错误提示

```
"Undefined index:$id[0] = $_REQUEST['id'];" 
```

在编辑页面中。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:31:08.143

看起来您混淆了在`<a href...>`s 中的页面、表单和查询字符串之间传递数据的两种方法。

**表格**：

数据在`<input>`-type 元素（或朋友）和`<form...>`标签内。

例如

```
<form action="handler.php">
    <input type="text" name="var1" />
    <input type="text" name="var2" />
    <input type="submit">
</form> 
```

通常通过 POST 传递并在 PHP 中通过`$_POST`.

例如，上面引用的文本框中的值可以通过以下方式访问：

```
<?php
echo $_POST['var1'];  // First text box
echo $_POST['var2'];  // Second text box 
```

**链接**：

在 中作为查询字符串传递`<a href...>`，例如：

```
<a href="http://www.yoursite.com/index.php?var1=foo&var2=bar">Click Me</a> 
```

通常通过 GET 传递并在 PHP 中通过`$_GET`.

例如，上面提供的查询字符串中的值可以通过类似的方式访问

```
<?php
echo $_GET['var1'];  // "foo"
echo $_GET['var2'];  // "bar" 
```

* * *

所以在这种情况下，看起来你正在超链接一个输入按钮——这不是通常的做事方式，但你可以通过改变它来修复它：

```
<a href="edit.php" <?php $id=$data['gameId'];?>><input type="button" value="Edit"/></a> 
```

至，这

```
<a href="edit.php?id=<?php echo $data['gameId'];?>"><input type="button" value="Edit"/></a> 
```

然后将 edit.php 中的变量引用为`$_GET['id']`.

但既然你知道它将是一个整数，没有别的，就像：

```
$id = (int)$_GET['id']; 
```

足够好的卫生设施（至少对于那个变量）。

最后，我注意到您将变量分配给`$id[0]`然后引用`$id`。将变量分配给`$id[0]`与将其分配给不同`$id`，`$id`前者是数组，后者是整数。在我看来，您可以将`[0]`wrt`$id`放到您的 edit.php 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:26:39.793

将 id 作为参数添加到您的编辑 url：

```
<a href="edit.php?id=<?php echo $data['gameId'];?>"><input type="button" value="Edit"/></a> 
```

也在你的edit.php的顶部：

```
$id = $_REQUEST['id']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:28:41.603

您可以通过查询字符串

```
<a href="edit.php?<?php $id=$data['gameId'];?>> 
```

在这种情况下，您的 PHP 代码将更改为

```
$id[0] = $_SERVER['QUERY_STRING']; 
```

# java - 捕获活动窗口的屏幕截图

> ID：10458558
> 
> 赞同：1
> 
> 时间：2012-05-05T03:24:51.927
> 
> 标签：java, screenshot, clipboard, awtrobot

我创建了一个小型应用程序，允许用户捕获屏幕截图并将图像保存在用户定义的位置。它还允许用户捕获活动窗口的屏幕截图。

问题在于活动窗口。我了解到 Java 没有提供获取活动窗口屏幕截图的方法。于是，我google了一下，发现开发者一直在使用Alt+PrntScrn来获取截图，从剪贴板获取图片。

代码如下：

```
 robot.keyPress(KeyEvent.VK_ALT);
     robot.keyPress(KeyEvent.VK_PRINTSCREEN);
     robot.keyRelease(KeyEvent.VK_PRINTSCREEN);
     robot.keyRelease(KeyEvent.VK_ALT);
     Thread.sleep(1500);
     RenderedImage image = (RenderedImage)getClipboard();
     saveToImage(image,targetLocation); 
```

现在发生的情况是，当机器人类按下 Alt 键时，焦点转到用户想要获取屏幕截图的应用程序的工具栏上，并且屏幕截图是从工具栏而不是窗口的工具栏上截取的。用户有重点。

请就如何解决此问题提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:01:15.047

如果这是我的应用程序，我会使用[JNA -- Java Native Access](http://en.wikipedia.org/wiki/Java_Native_Access)来获取活动窗口及其大小，然后使用该信息让机器人抓取图像。

# php - 如何更改 jQuery 中的标签文本？

> ID：10458564
> 
> 赞同：5
> 
> 时间：2012-05-05T03:25:39.310
> 
> 标签：php, jquery, ajax, onchange

我有一个文本框和一个标签。如果用户想要更改标签文本，他/她必须在文本框中输入文本。每次用户在更改文本框中输入内容时，如何更新标签文本？

我知道可以将 AJAX 与 jQuery 和 PHP 一起使用。有没有更简单的方法？请告诉我。这是我的代码和链接：http: [//jsfiddle.net/uQ54g/1/](http://jsfiddle.net/uQ54g/1/)

```
$('#change1').change(function(){
    var l = $(this).val();
    $('label').replaceWith(l);

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:29:14.740

首先，您必须在 jquery 中使用`.text`或`.html`设置标签内的文本。您当前的代码实际上将删除标签元素并仅替换为文本。因此，如果您再次尝试编辑该值，它将不再起作用。您可能还想在标签中添加一个类或一个 ID，因为您很可能会在一个页面上拥有多个标签。

HTML：

```
<input type="text" id="change1"/><br/>
<label id="test">Hello</label> 
```

Javascript：

```
$('#change1').change(function(){
    var l = $(this).val();
    $('#test').text(l);
    // OR $('#test').html(l);
}); 
```

如果您想在输入每个字符后更改标签，则需要使用`keyup`而不是`change`.

这是一个更新的[jsfiddle](http://jsfiddle.net/uQ54g/6/) ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T03:30:25.820

正如我在评论中提到的那样，您小提琴中的代码工作正常，或者您可以`keyup`使用

```
$('#change1').keyup(function(){
var l = $(this).val();
$('label').text(l);
//alert($('#change1').val())
}); 
```

[http://jsfiddle.net/uQ54g/4/](http://jsfiddle.net/uQ54g/4/)

另请注意，当您使用`replaceWith`它时，它将替换匹配的元素，在您的情况下，它`label`在触发更改`<label>hello</label>`后将被替换为，`Changed Text`因此如果您`$("label")`再次这样做，它将返回未定义，[**请自行查看**](http://jsfiddle.net/uQ54g/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:37:42.270

试试这个：

```
$('#change1').keyup(function(){
l=$(this).val()
$('label').html(l)
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T04:26:53.687

将此与 jquery 库一起使用

```
$('#change1').on('keyup',function(){ //Change1 is id of textbox
   $('#label1').html($(this).val()) //label1 is the id of the label
});
$('#change1').blur(function() { //if we copy paste some text into the textbox it will also work if use this blur and trigger function
   $(this).trigger('keyup');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T03:42:08.233

这个怎么样

```
$('#change1').change(function(item){
     $('label').text(item.target.value);
}); 
```

# c - 使用 C 编程和 Linked-List 的词频但频率计数错误

> ID：10458571
> 
> 赞同：-1
> 
> 时间：2012-05-05T03:27:12.627
> 
> 标签：c, hash, linked-list, frequency

我在这上面花了几天时间被困住并被搜查。我需要使用 C 创建一个词频程序。为了跟踪冲突，我使用了一个链表，但我的代码没有给出正确的频率（例如，“the”的频率应该是 25，但它是 18）。我究竟做错了什么？。这是我的代码：

```
void addToArr( char *str, HASH_ARR_ELEM hashArr[]){
int homeAddress = 0;
int addResult = 0;
WORD *tempWord;
homeAddress = hashFunct(str);

if(!(tempWord = (WORD*)malloc(sizeof(WORD))))
    printf("Memory Allocation Error\n"),
        exit(100);

strcpy(tempWord->str,str);
tempWord->count = 1;

if(hashArr[homeAddress].wordPtr == NULL){
    // allocate memory
    if(!(hashArr[homeAddress].wordPtr = (WORD*)malloc(sizeof(WORD))))
        printf("Memory Allocation Error\n"), exit(100);

    strcpy(hashArr[homeAddress].wordPtr->str,tempWord->str);
    hashArr[homeAddress].wordPtr->count = 1;

} else if(hashArr[homeAddress].wordPtr != NULL && hashArr[homeAddress].headPtr == NULL){        

    if(strcmp(hashArr[homeAddress].wordPtr->str,tempWord->str))
        hashArr[homeAddress].wordPtr->count++;
    else{
        hashArr[homeAddress].headPtr = createList(cmpWord);
        if(!hashArr[homeAddress].headPtr)
            printf("\aCannot create list\n"),
            exit(100);

        addNode(hashArr[homeAddress].headPtr,tempWord);
        }
}else
    if(strcmp(hashArr[homeAddress].wordPtr->str,tempWord->str))
        hashArr[homeAddress].wordPtr->count++;
    else 
    {
        addResult = addNode(hashArr[homeAddress].headPtr,tempWord);
        if(addResult != 0)
            if(addResult == -1)
                printf("Memory Overflow adding node\n"),
                    exit(120);
            else
            {
                retrieveNode(hashArr[homeAddress].headPtr,tempWord,(void**)&tempWord);
                tempWord->count++;
                    printf("%s %d\n\n", tempWord->str, tempWord->count);
            }
    }
 } // end addToArr 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:32:09.307

至少您的一个问题出在字符串比较行中。

`strcmp`如果两个字符串相等，则返回`0`，这意味着您仅在字符串不同时才增加计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:32:35.843

如果我正确阅读此内容，则如果字符串相等，您希望 if(strcmp(...)) 为真。但如果字符串相等，则返回 0。

所以这：

```
if(strcmp(hashArr[homeAddress].wordPtr->str,tempWord->str)) 
```

应该是这样的：

```
if(!strcmp(hashArr[homeAddress].wordPtr->str,tempWord->str)) 
```

strcmp 将告诉您第一个差异的位置，因此任何大于零的数字都将是一个差异，因此 0 是字符串相等的全部。

# algorithm - redis.h 中的 skiplistnode 变量“span”是什么意思？

> ID：10458572
> 
> 赞同：4
> 
> 时间：2012-05-05T03:27:17.647
> 
> 标签：algorithm, data-structures, redis, skip-lists

在`redis.h`中，skipnode 定义如下：

```
typedef struct zskiplistNode {
    robj *obj;
    double score;
    struct zskiplistNode *backward;
    struct zskiplistLevel {
        struct zskiplistNode *forward;
        unsigned int span;
    } level[];
} zskiplistNode; 
```

var`span`是什么意思？这个 var 存储什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T04:58:13.373

`span`at a specific node 存储当前节点和当前级别的 node->forward 之间的节点数。`span`用于计算跳过列表中元素的从 1 开始的排名。

例如，考虑以下跳过列表： ![跳过列表](../Images/07894a29bb130d7810db615b8b598a79.png)

考虑头节点。所有级别的跨度均为 1。

考虑节点 1。在级别 0，跨度为 1，因为如果您跟随前向指针，您将*跨越1 个元素。*在级别 1，跨度为 2，因为如果您遵循前向指针，您将*跨越2 个元素（节点 2 和节点 3）。*

看看[t_zet.c 中的函数 zslGetRank](https://github.com/antirez/redis/blob/unstable/src/t_zset.c#L320)。您可以看到如何根据每个级别的 span 值计算排名。

# android - Android：MapView.GetLatitudeSpan()、GetLongitudeSpan() 异常？

> ID：10458575
> 
> 赞同：2
> 
> 时间：2012-05-05T03:27:26.517
> 
> 标签：android, android-mapview

我正在开发一个地图应用程序，该应用程序根据用户的查询在 MapView 上绘制图钉。我正在尝试缩放地图以适合所有结果图钉，但我遇到了一个看似奇怪的情况。

我设置了两个变量：

latSpan 是任意一个结果点的最大纬度和最小纬度之差

lonSpan 是任何结果点的最大经度和最小经度之间的差

这种方法

```
 while ((mapView.getLatitudeSpan()) < latSpan) || (mapView.getLongitudeSpan() < lonSpan)){
            mapController.zoomOut();
        }//end of while loop 
```

应该缩小以确保所有图钉都适合可查看的地图屏幕。

但我正在经历一些相当奇怪的事情。mapView.getLatitudeSpan() 和 mapView.getLongitudeSpan() 的结果通常大于我的 latSpan 和 lonSpan 值，因此 MapController 没有足够缩小。

我的地图放大得很远——15级或更高。

例如，一组搜索结果给出了以下值：

纬度 = 17928

长跨度 = 11636

mapView.getLatitudeSpan() = 21933

mapView.getLongitudeSpan() = 20598

根据这些数字，您不会认为 MapController 需要缩小。然而，在屏幕顶部上方和底部下方都绘制了图钉。我将我的 WHILE 循环更改为阅读

```
while ((mapView.getLatitudeSpan() - 6000) < latSpan... 
```

这会有所帮助，但正确的查询仍然会导致问题。

但真正的问题是，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:24:31.877

我不确定为什么您的代码无法从提供的代码段中运行。您可能没有将 latSpan 和 lonSpan 转换为 microDegrees（如下所示），这会导致一些问题。

此外，如果您试图确保您的 mapView 显示所有结果，那么尝试确定它是否需要在缩放之前进行缩放并没有多大意义，只需每次都缩放它。如果事实证明它不需要缩放，那么似乎什么都不会发生，如果确实发生了，那么它会发生。

您可以设置地图以包含所有点并移动到点的质心，如下所示：

```
GeoPoint max = new GeoPoint(maxLatitude, maxLongitude);
GeoPoint min = new GeoPoint(minLatitude, minLongitude);

int maxLatMicro = max.getLatitudeE6();
int maxLonMicro = max.getLongitudeE6();
int minLatMicro = min.getLatitudeE6();
int minLonMicro = min.getLongitudeE6();

GeoPoint center = new GeoPoint((maxLatMicro+minLatMicro)/2,(maxLonMicro + minLonMicro)/2);

controller.zoomToSpan(maxLatMicro - minLatMicro, maxLonMicro - minLonMicro);
controller.animateTo(center); 
```

# opengl - OpenGL透视xy坐标到正交

> ID：10458586
> 
> 赞同：-1
> 
> 时间：2012-05-05T03:29:43.153
> 
> 标签：opengl, 3d, perspective, orthogonal

假设我在 OpenGL 中有一个透视图，并在给定深度选择一个点。假设它位于 z=-10。我怎么知道这个点有哪些实际的 x 和 y 坐标？具有正视图时很容易，因为它对于每个深度都是相同的。但对于观点一：我如何找到这些 xy 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:40:47.757

您提供的坐标基本上是“世界”坐标——即，事物存在于您构建的虚拟世界中的位置。换句话说，您使用的坐标始终是正交的。

举个例子，如果我要做一个房子的 3D 模型，我可以设置它，这样我就可以用实际的英尺来工作，所以当我可以画一条从 0,0 到 0,10 的线来表示精确的 10一英尺长。无论我近距离观看，它都会保持 10 英尺，所以它充满了我的视野，或者从很远的地方观看，所以它只有几个像素长。

只有在显示对象时才进行透视变换。我根本不会在输入系统的坐标上这样做。

如果您询问计算对象的屏幕坐标，是的，您可以。通常的方法是使用`gluUnProject`. 至少根据我的经验，你最终需要这样做是相对不寻常的。

您最关心的一次是当您使用鼠标在屏幕上选择某些内容时。虽然*可以*使用 gluUnProject，但 OpenGL 有一个专门用于这种目的的选择模式，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:41:09.287

将光标`gluProject`位置投影到“世界”位置（以及`gluUnproject`找出对象在屏幕上的位置）的一种方式。

# java - 组合框代码正确吗？

> ID：10458587
> 
> 赞同：-1
> 
> 时间：2012-05-05T03:29:59.213
> 
> 标签：java

下面的代码看起来是否正确，是否有任何错误？我必须创建一个音乐流派的下拉框。

我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ComboBoxWindow extends JFrame
{
    private JPanel musicPanel;
    private Jpanel selectMusicPanel;
    private JComboBox MusicBox;
    private JLabel label;
    private JTextField selectedMusic;

    private String[] music = {"Rock","Metal","Electro","Pop","Country","Jazz","Indie"};

    public ComboBoxWindow()
    {
        super("Combo Box Demo");

        setDefultCloseOperation(JFrame.EXIT_ON_CLOSE);

        setLayout(new BorderLayout());

        buildMusicPanel();
        buildSelectedMusicPanel;

        add(musicPanel,BorderLayout.CENTER);
        add(selectedMusicPanel, BorderLayout.SOUTH);

        pack();
        setVisible(true);
    }

    private void buildMusicPanel()
    {
        musicPanel = new JPanel();

        musicBox = new JComboBox(music);

        musicBox.addActionListener(new ComboBoxListener());
        musicPanel.add(MusicBox);
    }

    private void buildSelectedCoffeePanel()
    {
        selectedMusicPanel = new JPanel();

        label = new JLabel("You selected: ");

        selectedMusic = new JTextField(10);
        selectedMusic.setEditable(flase);

        selectedMusicPanel.add(label);
        selectedMusicPanel.add(selectedMusic);
    }

    private class ComboBoxListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String selection = (String) MusicBox.getSelectedItem();
            selectedMusic.setText(selection);

            public static void main(String[] args)
            {
                new ComboBoxWindow();
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T03:33:23.957

尝试[ideone.com](http://ideone.com/)来解释它。

# php - 显示来自 MySQL 数据库的提醒页面

> ID：10458591
> 
> 赞同：0
> 
> 时间：2012-05-05T03:30:44.633
> 
> 标签：php, mysql

我创建了一个用于添加和查看提醒的 PHP 程序。添加页面有效，但我在正确显示它们时遇到了一些问题。我应该如何编码才能只获取实际数据？另外，我怎么能把它放到 HTML 表中？（即名称、描述和日期列；行是检索到的数据）

谢谢

当我在浏览器中打开文件时，我得到这个输出：

> 数组 ( [reminderID] => 14 [reminderName] => Test [reminderDescript] => Test_Descript [reminderDate] => 2012 05 7 )

代码：

```
<?php include 'header.php'; ?>
<?php include 'database.php'; ?>
<div id="content">
  <h1>Reminder List</h1>
        <table align ="center">
    <thead>
        <tr>
            <td>Name</td>
            <td>Description</td>
            <td>Date</td>
        </tr>
    </thead>
    <?php 
        $query = 'SELECT * FROM reminder_event';
        $result = mysql_query($query);
            while($row = mysql_fetch_assoc($result)) {
                print_r($row);
            }
        ?>
  </table>
  <p><a href='reminder_add.php'>Add Reminder</a></p>
</div>
<?php include 'footer.php'; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:33:08.657

[`print_r()`](http://us3.php.net/manual/en/function.print-r.php)是用于调试的*诊断工具*，不能用于实际输出。相反，使用从您的行中获取的数组键将 HTML 输出到表中。

```
// Open a table
echo "<table>";
while($row = mysql_fetch_assoc($result)) {
  // Output each row
  echo "<tr>
   <td>{$row['reminderName']}</td>
   <td>{$row['reminderDescript']}</td>
   <td>{$row['reminderDate']}</td>
  </tr>";
}
// Close the table
echo "</table>"; 
```

更好的是，在输出之前使用 [ ] (http://us3.php.net/manual/en/function.htmlspecialchars.php) 转义 HTML 输出的每个值，`htmlspecialchars()`以防止跨站点脚本攻击和破坏 HTML，如果字符像`< > &`在值中遇到。

```
echo "<table>";
while($row = mysql_fetch_assoc($result)) {
  // Encode all values for HTML output
  $name = htmlspecialchars($row['reminderName']);
  $desc = htmlspecialchars($row['reminderDescript']);
  $date = htmlspecialchars($row['reminderDate']);

  // Then output the encoded values
  echo "<tr><td>$name</td><td>$desc</td><td>$date</td></tr>";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:33:37.183

改变：

```
while($row = mysql_fetch_assoc($result)) {
  print_r($row);
} 
```

到：

```
while($row = mysql_fetch_assoc($result)) {
  echo $row['reminderID'];
  echo $row['reminderName'];
  echo $row['reminderDescript'];
  echo $row['reminderDate'];
} 
```

您可以在任何您喜欢的 HTML 中回显这些值。因此，例如，如果您想在表格中使用它，您可以执行以下操作：

```
echo "<table><tr>";
while($row = mysql_fetch_assoc($result)) {
  echo "<td>" . $row['reminderID'] . "</td>";
  echo "<td>" . $row['reminderName'] . "</td>";
  echo "<td>" . $row['reminderDescript'] . "</td>";
  echo "<td>" . $row['reminderDate'] . "</td>";
}
echo "</tr></table>"; 
```

您可以稍微清理一下以从 PHP 中取出部分（或全部）HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:37:36.527

```
<?php include 'header.php'; ?>
<?php include 'database.php'; ?>
<div id="content">
  <h1>Reminder List</h1>
    <table>
        <thead><tr><td>id</td><td>name</td><td>description</td><td>date</td></tr></thead>
        <tbody>
        <?php 
            $query = 'SELECT * FROM reminder_event';
            $result = mysql_query($query);
            while($row = mysql_fetch_assoc($result)) { ?>
            <tr>
                <td><?php echo $row['reminderID']; ?></td>
                <td><?php echo $row['reminderName']; ?></td>
                <td><?php echo $row['reminderDescript']; ?></td>
                <td><?php echo $row['reminderDate']; ?></td>
            </tr>
           <?php } ?>
        </tbody>
    </table>
  <p><a href='reminder_add.php'>Add Reminder</a></p>
</div>
<?php include 'footer.php'; ?> 
```

# sql - 向此关系添加基于元组的检查

> ID：10458592
> 
> 赞同：0
> 
> 时间：2012-05-05T03:31:04.393
> 
> 标签：sql, database, check-constraints

> 在关系 Person (SSN, State, Name) 中，添加一个基于元组的检查：如果一个人的州是 NY，那么他的 SSN 的前三位数字必须在“050”和“134”之间。（提示：在 SQL 中使用 LEFT 函数）。

```
CREATE TABLE Person (
    SSN   INT PRIMARY KEY,
    State   CHAR(50),
    Name  CHAR(100),
    CHECK ( 
        SELECT LEFT (SSN, 3) AS FirstThreeDigits, SSN FROM Person,
        WHERE Person.State == ‘NY’) between '050' and between '134'
); 
```

我对这里的 CHECK 条件感到不舒服。我不确定这是否是进行条件检查的正确方法。有人可以验证一下吗？如果不是，我们如何进行条件检查？

我们需要这个：

```
if state == 'NY', perform CHECK 
```

我们需要触发器吗？我在想，如果发生新的插入/更新，请检查该值。但问题不是这样问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:45:59.447

好的，所以它是通用的，但 DDL 通常不是，但无论如何让我们使用[SQL Server CHECK Constraints](http://msdn.microsoft.com/en-us/library/ms188258.aspx)上的文档作为指南

> 您可以使用基于逻辑运算符返回 TRUE 或 FALSE 的任何逻辑（布尔）表达式创建 CHECK 约束。对于前面的示例，逻辑表达式为：
> `salary >= 15000 AND salary <= 100000.`

请注意，文档中的上述示例*不是*SELECT 语句，而是表达式。这意味着您需要做的就是想出一个返回 TRUE 的表达式

当以下所有都为真时

1.  州是纽约
2.  SSN 的左三位是 => '050'
3.  SSN 的左三位是 <= 134。

或者

1.  萨特不是纽约

请记住，您可以在 Parens 中对一组逻辑表达式进行分组

例如

```
(Group of logical expressions) OR (Group of logical expressions) 
```

应该不会太难

# java - 薪资计划第 2 部分（运行时发出的问题

> ID：10458594
> 
> 赞同：0
> 
> 时间：2012-05-05T03:32:01.940
> 
> 标签：java

```
// Week 3 Checkpoint1: Payroll Program Part 2
// Due May 04, 2012
// Created by: Kennith Adkins

import java.util.Scanner;

public class Assignment1
 {
    public static void main ( String[] args )
    {
        Scanner input = new Scanner(System.in);

        // Variables
        String employeeName = null;
        int hours;
        double rate;
        double pay;

        while ( employeeName != "stop")
        {
        // Request information from user
        System.out.print ( "Employee Name: ");
        employeeName = input.nextLine();
        System.out.print ( "Hourly Rate: ");
        rate = input.nextDouble();
        System.out.print ( "Number of Hours worked this week: ");
        hours = input.nextInt();

        // Calculate pay
        pay = rate * hours;

        // Display information
        System.out.printf ("%s will get paid $%.2f this week.\n", employeeName, pay);

        }
    }
} 
```

当我运行程序时，它运行良好。当它进入循环并重复时，Employee Name: 和 Hourly Rate 似乎聚集在一起。另外，在输入 stop 作为员工姓名后，我如何让它立即停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:35:18.743

由于这似乎是一个家庭作业问题，我将为您指明学习方向。

因此，对于员工姓名问题，我会将您重定向到[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

~~问题在于，当您重新进入循环并调用scanner(input).nextLine 时，它​​实际上会读取它尚未看到的输入文本。因此，一种选择是切换到其他东西来舔 BufferedReader 或将扫描仪减速向下移动到循环中。~~

**更多研究**

我在扫描仪类上工作不多，看到这个后我有点困惑。问题实际上是 nextInt 和 nextDouble。他们不要求退货包机，因此当您下次拨打下一行时，它会拾取剩余的退货字符。

因此，我在重新输入时重置扫描仪的选项在这种特定情况下有效，但您应该使用 2 个扫描仪或离开扫描仪。

```
Scanner txtinput = new Scanner(System.in);
Scanner numberinput = new Scanner(System.in); 
```

# objective-c - Objective-c中的贝塞尔曲线算法

> ID：10458596
> 
> 赞同：3
> 
> 时间：2012-05-05T03:32:11.513
> 
> 标签：objective-c, bezier

比我聪明的人可以看看这个。我正在尝试实现我在 Objective-c 中找到[的贝塞尔曲线算法。](http://webtweakers.com/swag/GRAPHICS/0074.PAS.html)

输出是错误的。我想我正确地转换了代码，所以要么原件是错误的，要么没有像这样使用......如果我使用内置`NSBezierPath`的曲线看起来很棒，但我不能使用内置的`NSBezierPath`.

### NSBezierPath 示例

```
NSBezierPath *bezierPath = [[NSBezierPath alloc] init];
[bezierPath setLineWidth:1.0f];
[bezierPath moveToPoint:NSMakePoint(x1, y1)];
[bezierPath curveToPoint:NSMakePoint(x4, y4) controlPoint1:NSMakePoint(x2, y2) controlPoint2:NSMakePoint(x3, y3)]; 
```

### 我的代码试图绘制贝塞尔曲线

```
- (void)drawBezierFrom:(NSPoint)from to:(NSPoint)to controlA:(NSPoint)a controlB:(NSPoint)b color:(NSUInteger)color
{
    float qx, qy;
    float q1, q2, q3, q4;
    int plotx, ploty;
    float t = 0.0;

    while (t <= 1)
    {
        q1 = t*t*t*-1 + t*t*3 + t*-3 + 1;
        q2 = t*t*t*3 + t*t*-6 + t*3;
        q3 = t*t*t*-3 + t*t*3;
        q4 = t*t*t;

        qx = q1*from.x + q2*to.x * q3*a.x + q4*b.x;
        qy = q1*from.y + q2*to.y * q3*a.y + q4*b.y;

        plotx = round(qx);
        ploty = round(qy);

        [self drawPixelColor:color atX:plotx y:ploty];

        t = t + 0.003;
    }
} 
```

### 编辑

请参阅[Objective-c 中的 Bezier 曲线算法需要](https://stackoverflow.com/questions/10466302/bezier-curve-algorithm-in-objective-c-needs-a-tweak)对完整的功能性 Bezier 曲线方法进行调整。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:36:27.643

我在 xy 绘图仪上使用了这个 Bezier 函数，发现“to”有一个小错误。需要切换`to.x` `to.y`和以使笔从 开始并在 结束。`b.x` `b.y``from``to`

```
qx = q1*from.x + q2*a.x + q3*b.x + q4*to.x;
qy = q1*from.y + q2*a.y + q3*b.y + q4*to.y; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:39:40.330

在我看来，您的每个点的系数都错误，并且您的一个加法变成了乘法。我想你想要的是这样的：

```
 qx = q1*from.x + q2*a.x + q3*to.x + q4*b.x;
    qy = q1*from.y + q2*a.y + q3*to.y + q4*b.y; 
```

# php - CActiveDataProvider 没有解析标准中的参数

> ID：10458597
> 
> 赞同：2
> 
> 时间：2012-05-05T03:32:13.733
> 
> 标签：php, yii

我正在关注[使用 Yii 1.1 和 PHP5 进行敏捷 Web 应用程序开发](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CHcQFjAA&url=http://www.amazon.com/Agile-Web-Application-Development-PHP5/dp/1847199585&ei=sZykT9H9EeOviQLiiMzqAg&usg=AFQjCNHsc34PiJIVJFk-7dc-V6uJw_GqEg&sig2=G5QQV381maBljonqIhNz5g)，从事“TrackStar”项目。对于我的生活，我无法理解我的问题在哪里。我得到了例外：

> CDbCommand 执行 SQL 语句失败：SQLSTATE[HY093]：参数号无效：参数未定义。执行的 SQL 语句为：SELECT COUNT(*) FROM `tbl_issue` `t`WHERE project_id=:projectId

看来（对于这个菜鸟的解释）我的 CActiveDataProvider 中的参数在标准中无法像视图中那样解析：

```
(in /protected/controllers/ProjectController.php)

55         public function actionView()
56         {
57             $issueDataProvider = new CActiveDataProvider('Issue', array(
58                 'criteria' => array(
59                     'condition' => 'project_id=:projectId',
60                     'params' => array(':projectId=' => $this->loadModel()->id),
61                 ),
62                 'pagination' => array( 
63                     'pageSize' => 1,
64                 ),      
65             )); 
66             $this->render('view',array(
67                     'model'=>$this->loadModel(),
68                     'issueDataProvider' => $issueDataProvider,
69             ));
70         } 
```

[我对照github 存储库](https://github.com/jefftulsa/TrackStar/tree/master/trackstar)检查了我的代码，但在任何地方都找不到任何差异。是否有一些简单的我在这里遗漏而无需发布我的所有代码（并让有人真正查看它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:37:04.977

看起来您的标准参数有错误。（`=`在 :projectId 之后）。正确的说法是

```
 'params' => array(':projectId' => $this->loadModel()->id), 
```

Params 数组是由参数占位符索引的查询参数值列表。例如，array(':name'=>'Dan', ':age'=>'31')。

# java - Java2D 图形规范：光栅化

> ID：10458598
> 
> 赞同：0
> 
> 时间：2012-05-05T03:32:23.860
> 
> 标签：java, opengl, graphics2d

这**不是**关于“如何使用 Java Graphics 2D？”

我的问题是：“Graphics2D 的数学规范是什么？确定笔划、字体和形状以及光栅化为像素的规范是什么？”

例如，假设我想为 Java Graphics2D 实现 OpenGL 后端，我需要了解有关如何对笔划/字体/形状进行光栅化的规范，以便将其渲染到 OpenGL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:24:59.597

我从来没有遇到过数学规范。我相信光栅化通常被视为实现特定的细节，因为 Java 可以利用主机系统提供的 DirectX 或 OpenGL 功能。

如果您还没有找到它们，这里有一些很好的阅读材料：

*   [使用 Java 2D 进行渲染](http://docs.oracle.com/javase/1.4.2/docs/guide/2d/spec/j2d-awt.html#wp67506)
*   [Java 2DTM 技术的系统属性](http://docs.oracle.com/javase/1.5.0/docs/guide/2d/flags.html)
*   [诊断渲染和性能问题](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/java2d.html#gdpio)

# iphone - UIPanGestureRecognizer 获取所有触摸的线

> ID：10458603
> 
> 赞同：3
> 
> 时间：2012-05-05T03:33:13.300
> 
> 标签：iphone, objective-c, uipangesturerecognizer

我添加了以下手势识别器：

```
UIPanGestureRecognizer *d2 = [[UIPanGestureRecognizer alloc] 
                              initWithTarget:self 
                              action:@selector(ViewDragging2:)];
[d2 setMinimumNumberOfTouches:2];
[d2 setMaximumNumberOfTouches:2];
[targetView addGestureRecognizer:d2]; 
```

发生该事件时触发的方法是：

```
-(void)ViewDragging2:(UIPanGestureRecognizer*)sender {

    // some point
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:targetView];
} 
```

即使我用两根手指触摸，这也让我一触即发。如何找回第一次和第二次触摸的绳索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T04:53:01.557

您可以使用以下方法访问所有触摸：

*   `(NSUInteger)numberOfTouches`
*   `(CGPoint)locationOfTouch:(NSUInteger)touchIndex inView:(UIView *)view`

它们在基类[UIGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)中定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T05:26:25.407

试试下面的代码。

```
UIPanGestureRecognizer *d2 = [[UIPanGestureRecognizer alloc] 
                          initWithTarget:self 
                          action:@selector(ViewDragging2:)];
  [d2 setMinimumNumberOfTouches:2];
  [d2 setMaximumNumberOfTouches:2];
 [targetView addGestureRecognizer:d2]; 
```

发生该事件时触发的方法是：

```
 -(void)ViewDragging2:(UIPanGestureRecognizer*)sender
    {
      // where touchIndex is either 0 or 1.
       CGPoint location = [recognizer locationOfTouch:touchIndex inView:self.view];
   } 
```

检查此链接 [locationOfTouch 和 numberOfTouches](https://stackoverflow.com/q/5979333/730776)

问候，尼尔。

# java - java中重命名文件的路径如何保持不变？

> ID：10458604
> 
> 赞同：0
> 
> 时间：2012-05-05T03:33:21.130
> 
> 标签：java, rename

所以我终于把名字改成了`file1`另一个名字。然而让我沮丧的是路径保持不变！你能告诉我为什么以及如何处理它，因为我总是需要file1的处理程序来进行进一步的操作？这是我的示例代码：

```
import java.io.File;
import java.io.IOException;

public class TestFile {
volatile private static File file1;
volatile private static File file2;

public static void main(String[] args) throws IOException {
    file1 = new File("D:\\work\\triangle\\src\\original\\test1.java");
    file2 = new File("D:\\work\\triangle\\src\\original\\test2.java");
    File tmpFile;

    String file2name = file2.getAbsolutePath().toString().replace("\\", "/") + ".bak";
    System.out.println(file2name);

    String file1name = file1.getAbsolutePath().toString()
            .replace("\\", "/");
    System.out.println(file1name);

    tmpFile = new File(file2name);
    if (!file1.renameTo(tmpFile)) {
        System.err.println("file1->file2name-bak");
    }
    System.out.println("file1\t"+file1.getAbsolutePath().toString());
    System.out.println("tmpFile\t"+tmpFile.getAbsolutePath().toString());

}
} 
```

我得到了这些输出：

```
D:/work/triangle/src/original/test2.java.bak
D:/work/triangle/src/original/test1.java
file1   D:\work\triangle\src\original\test1.java
tmpFile D:\work\triangle\src\original\test2.java.bak 
```

`file1`和`tmpFile`yield 不同的路径如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T03:39:09.537

您误解了 a`File`是什么。

A`File`表示文件名/路径，而不是*特定*文件的名称/路径。因此，当您使用 a`File`重命名文件时，存储在`File`对象中的路径名不会改变。`File`对象是不可变的。

> 那么有什么办法可以同时改变它们吗？

不会。对象中编码的名称/路径`File`不会更改，也无法更改。如果您不相信我，请查看 JDK 随附的源代码。

（a 的路径名状态`File`由字符串值`path`属性表示。分配的唯一位置`path`是构造函数和`readObject`方法。）

# php - 如何禁用 PHP 的“复活节彩蛋”URL？

> ID：10458610
> 
> 赞同：65
> 
> 时间：2012-05-05T03:34:24.987
> 
> 标签：php

我最近发现了PHP 中所谓的[“复活节彩蛋 URL” ：](http://www.0php.com/php_easter_egg.php)

> 这些是您可以添加到 PHP 网页末尾的四个 QUERY 字符串，以查看（有些）隐藏的图像或网页：

1.  `?=PHPE9568F36-D428-11d2-A769-00AA001ACF42`

> 这个是最有趣的，它展示了一个“复活节彩蛋”图像，要么是房子里的兔子（Sterling Hughes 的兔子，名叫 Carmella），要么是草丛中的棕色狗，要么是黑色的苏格兰梗犬，要么是邋遢的孩子手——绘制的，蜡笔色的 php 标志，一个拿着面包棒（看起来像铅笔或炸薯条）的家伙像海象一样从嘴里伸出来，或者 PHP 大象标志。

![在此处输入图像描述](../Images/613470d4c8b07e022abc8402d542d02d.png)

其他包括：

*   `?=PHPE9568F34-D428-11d2-A769-00AA001ACF42`（PHP 标志）
*   `?=PHPE9568F35-D428-11d2-A769-00AA001ACF42`（Zend 标志）
*   `?=PHPB8B5F2A0-3C92-11d3-A3A9-4C7B08C10000`（PHP 学分）

我震惊地发现这确实适用于很多网站，包括我自己的网站。我认为这是愚蠢的并想禁用它，但据我所知，唯一的方法是在 php.ini 中使用`expose_php = Off`，并且[不能在运行时](http://php.net/manual/en/ini.list.php)使用`ini_set()`.

**我无法直接访问实时服务器上的 php.ini。**但是，我已经弄清楚了如何`X-Powered-By`通过使用[`Header unset X-Powered-By`](https://stackoverflow.com/a/2661808/398242)in`.htaccess`或`header('X-Powered-By: ')`PHP 代码来取消设置标头。

有没有其他方法可以禁用这些“复活节彩蛋”，或者我是否必须在主要更改此设置`php.ini`（这确实是禁用这些 URL 的正确/唯一方法）？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-16T19:13:27.610

在 php.ini 中

```
; Decides whether PHP may expose the fact that it is installed on the server
; (e.g. by adding its signature to the Web server header).  It is no security
; threat in any way, but it makes it possible to determine whether you use PHP
; on your server or not.
; http://php.net/expose-php
 expose_php = Off 
```

这将有效地去除复活节彩蛋

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-05T03:42:41.740

快速的 HTACCESS 全局重写可以从每个 URL 中正则表达式精确的字符串，从而摆脱 PHP 唯一有趣的部分，而无需触及 ini 文件，也不需要每个文件开头的函数。

尚未对此进行测试，但这应该可以：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} \PHPE9568F36-D428-11d2-A769-00AA001ACF42\ [NC]
RewriteRule .* - [F] 
```

当然，只需为每个其他可能的查询复制最后两行，或者编写更通用的正则表达式。我不擅长正则表达式。:)

这个版本涵盖了所有复活节彩蛋的乐趣，可以[在这里找到：](https://akeeba.assembla.com/code/master-htaccess/git/nodes/htaccess.txt)

```
RewriteEngine On
RewriteCond %{QUERY_STRING} \=PHP[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12} [NC]
RewriteRule .* - [F] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-07T06:12:16.840

更新：这在 PHP 5.5 中被删除，请注意这些链接如何不再在 php.net 上工作

[http://phpsadness.com/sad/11](http://phpsadness.com/sad/11)

# xml - 使用groovy比较SOAPUI中SOAP响应和JDBC响应的元素值

> ID：10458613
> 
> 赞同：1
> 
> 时间：2012-05-05T03:34:33.850
> 
> 标签：xml, groovy, compare

我想比较从 SOAP 响应和 JDBC 请求中获取的节点下元素的值。我可以使用下面的 groovy 代码打印值，但无法比较相同的值，因为我不太擅长编码。

注意：两个响应中的元素名称相同但顺序不同。

我想根据两个响应中的元素名称比较值，而不管元素的顺序如何。注意：仅当 JDBC 元素值不为空时进行比较。

> def groovyUtils = new com.eviware.soapui.support.GroovyUtils( 上下文 )
> 
> def JMSHolder = groovyUtils.getXmlHolder("SOAPTestStep#Response")
> def JDBCHolder = groovyUtils.getXmlHolder("JDBC Request step#ResponseAsXml")
> 
> def node1 = JMSHolder.getDomNodes("//ns0:Study[1]/ *")
> def node2 = JDBCHolder.getDomNodes("//Row[1]/* ")
> 
> node1.each {
> log.info it.QName.getLocalPart()
> log.info it.firstChild.nodeValue
> }
> 
> node2.each {
> log.info it.QName.getLocalPart()
> log.info it.firstChild.nodeValue
> }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:17:34.920

请看这个脚本，也许会对你有所帮助

```
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( "Request#Request" );
def holder2 = groovyUtils.getXmlHolder("Responses#ResponseAsXml")

def stringList=[]
def stringList2=[]

for( node in holder['//name] )
{  
  stringList =stringList+node 
}

for( node2 in holder2['//name'] )
{ 
  stringList2 =stringList2+node2 
    if (node2 in stringList ) assert true
    else assert null
}

log.info "Request>" + stringList
log.info "result>"+ stringList2 
```

# html - 使用 CSS 将两行水平链接均匀对齐

> ID：10458614
> 
> 赞同：0
> 
> 时间：2012-05-05T03:34:48.937
> 
> 标签：html, css, alignment

我有 6 个链接，两行所有不同的字符长度。我需要一切都对齐。像这样：

```
Home       About Us     Location
Contact    Visit        Schedule 
```

我想这样做的方法是制作`li`一个特定的宽度，然后在右侧应用适当的边距，但由于某种原因我不能应用宽度。如果我有以下 html 骨架，我将如何编辑 CSS 来完成此操作？我在网上寻找解决方案，但我没有发现任何类似的问题，因为我的菜单位于两条单独的行上。

```
<div class="footer">
 <ul id="footerlinks">
  <li><a href="link 1">Home</a></li>
  <li><a href="link 2">About Us </a></li>
  <li><a href="link 3">Location</a></li>
<br>
  <li><a href="link4">Contact</a></li>
  <li><a href="link5">Visit</a></li>
  <li><a href="link6">Schedule</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:47:48.393

`<ul>`固定和的宽度`<li>`。并删除`<br />`它会使标记无效。

HTML

```
<ul id="footerlinks">
  <li><a href="link 1">Home</a></li>
  <li><a href="link 2">About Us </a></li>
  <li><a href="link 3">Location</a></li>
  <li><a href="link4">Contact</a></li>
  <li><a href="link5">Visit</a></li>
  <li><a href="link6">Schedule</a></li>
</ul> 
```

CSS

```
#footerlinks { width: 300px; }
#footerlinks li { width: 100px; display: inline-block; } 
```

[演示](http://jsfiddle.net/jBPmF/)

[演示（带有空白修复）](http://jsfiddle.net/jBPmF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:49:59.007

首先， a`<br/>`不是 的有效子元素`<ul/>`。

要将宽度应用于`<li/>`，您需要将其设为块级元素。

```
<ul id="footerlinks">
  <li><a href="link 1">Home</a></li>
  <li><a href="link 2">About Us </a></li>
  <li><a href="link 3">Location</a></li>
  <li><a href="link4">Contact</a></li>
  <li><a href="link5">Visit</a></li>
  <li><a href="link6">Schedule</a></li>
</ul>​ 
```

和

```
#footerlinks {
    background:#ccc;
    overflow:hidden;
    padding:5px;
    width:300px;
}

#footerlinks li {
    float:left;
    padding:5px 0;
    width:33%;
}​ 
```

这是一个工作示例 - [http://jsfiddle.net/jaredhoyt/xbvyP/](http://jsfiddle.net/jaredhoyt/xbvyP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T03:44:26.307

给 li 元素一个显示属性 inline-block 和一个宽度。这是一个[jsfiddle](http://jsfiddle.net/c4XuZ/)来演示：

```
li { display: inline-block; width: 100px; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T03:45:12.270

检查这个：

```
<pre>
test
&#x09;test
&#x09;&#x09;test
</pre> 
```

资料来源：[如何在 html 中创建制表符缩进](https://stackoverflow.com/questions/1068647/how-do-i-create-tab-indenting-in-html)

# java - Android - “微调器不支持项目点击事件。调用此方法将引发异常。”

> ID：10458618
> 
> 赞同：0
> 
> 时间：2012-05-05T03:35:07.527
> 
> 标签：java, android, spinner

我有一个屏幕有大约 50 个按钮的程序，它看起来相当难看。每个按钮都有一个异步下载，它只是从一个按钮复制到另一个按钮，并将 URL 和文件名保存为已更改。我希望能够从使用按钮更改为使用一个微调器，希望只有一个异步下载任务，并且微调器作为选择下载 URL 和要另存为的文件名的方式运行。这甚至可能吗？在阅读了一些有关它的文档后，我感到困惑。谢谢您的帮助。

更新：

使用下面的建议代码，我创建了这个：

```
public class SpinnerActivity extends Activity{

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

Spinner spDownloadFrom;
private ArrayAdapter<CharSequence> spinnerArrayAdapter;
String url[]= {"www.abc.com/download/a.txt",
    "www.abc.com/download/a.txt",
    "www.abc.com/download/a.txt",
    "www.abc.com/download/a.txt",
    "www.abc.com/download/a.txt",
    "www.abc.com/download/a.txt",
    "www.abc.com/download/a.txt"
    };
String links[]= {"Server 1",
    "Server 2",
    "Server 3",
    "Server 4",
    "Server 5",
    "Server 6",
    "Server 7",
    };
public void onCreate(Bundle savedInstanceState )
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

mProgressDialog = new ProgressDialog(SpinnerActivity.this);
mProgressDialog.setMessage("Please be patient, file downloading...");
mProgressDialog.setIndeterminate(false);
mProgressDialog.setMax(100);
mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

spDownloadFrom=(Spinner)findViewById(R.id.Spinner01);

spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_spinner_item, links);
spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spDownloadFrom.setAdapter(spinnerArrayAdapter);

spDownloadFrom.setOnItemSelectedListener(new SpinnerListener(spDownloadFrom));
}
public class SpinnerListener implements OnItemSelectedListener
{
Spinner sp;
public SpinnerListener(View v)
{
    sp=(Spinner)findViewById(v.getId());
}
@Override
public void onItemSelected(AdapterView<?> arg0, View v, int arg2,
        long arg3) {
    //Call to download class
        new DownloadFile().equals(url[arg2].toString());

}
@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}
}
class DownloadFile extends AsyncTask<String, Integer, String> { //put your download code

@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show();
}

@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
    mProgressDialog.setProgress(progress[0]);
}

@Override
protected String doInBackground(String... aurl) {
    try {

        URL url = new URL(aurl[0]);
        URLConnection connection = url.openConnection();

        connection.connect();
        int fileLength = connection.getContentLength();
        int tickSize = 2 * fileLength / 100;
        int nextProgress = tickSize;

        Log.d(

        "ANDRO_ASYNC", "Lenght of file: " + fileLength);

        InputStream input = new BufferedInputStream(url.openStream());

        String path = Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName() + "/files";
        File file = new File(path);
        file.mkdirs();
        File outputFile = new File(file, "test1.pdf");

        OutputStream output = new FileOutputStream(outputFile);

        byte data[] = new byte[1024 * 1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            if (total >= nextProgress) {
                nextProgress = (int) ((total / tickSize + 1) * tickSize);
                this.publishProgress((int) (total * 100 / fileLength));
            }
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
        mProgressDialog.dismiss();

    } catch (Exception e) {
    }
    return null;
}
protected void onProgressUpdate(String... progress) {
     Log.d("Downloading",progress[0]);

}

@Override
protected void onPostExecute(String unused) {

    File file = new File(Environment.getExternalStorageDirectory()
            + "/Android/Data/" + getApplicationContext().getPackageName()
            + "/files/test1.pdf");
    Intent testIntent = new Intent(Intent.ACTION_VIEW);
    testIntent.setType("application/pdf");
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    Uri uri = Uri.fromFile(file);
    intent.setDataAndType(uri, "application/pdf");
    try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(SpinnerActivity .this,
                "No Application Available to View PDF", Toast.LENGTH_LONG).show();
    }
}
}
 } 
```

这对我想要完成的事情是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:13:46.333

```
public class Example extends Activity{

Spinner spDownloadFrom;
private ArrayAdapter<CharSequence> spinnerArrayAdapter;
String url[]= {"www.abc.com/download/a.txt",
        "www.abc.com/download/a.txt",
        "www.abc.com/download/a.txt",
        "www.abc.com/download/a.txt",
        "www.abc.com/download/a.txt",
        "www.abc.com/download/a.txt",
        "www.abc.com/download/a.txt"
        };
String links[]= {"Server 1",
        "Server 2",
        "Server 3",
        "Server 4",
        "Server 5",
        "Server 6",
        "Server 7",
        };
public void onCreate(Bundle savedInstanceState )
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    spDownloadFrom=(Spinner)findViewById(R.id.addQuotation_spinnerProduct);

    spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_spinner_item, links);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spDownloadFrom.setAdapter(spinnerArrayAdapter);

    spDownloadFrom.setOnItemSelectedListener(new SpinnerListener(spDownloadFrom));
}
public class SpinnerListener implements OnItemSelectedListener
{
    Spinner sp;
    public SpinnerListener(View v)
    {
        sp=(Spinner)findViewById(v.getId());
    }
    @Override
    public void onItemSelected(AdapterView<?> arg0, View v, int arg2,
            long arg3) {
        //Call to download class
            new DownloadFile().equals(url[arg2].toString());

    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}
class DownloadFile extends AsyncTask<String, String, String> { //put your download code

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

    }

    @Override
    protected String doInBackground(String... aurl) {

        return null;

    }
    protected void onProgressUpdate(String... progress) {
         Log.d("Downloading",progress[0]);

    }

    @Override
    protected void onPostExecute(String unused) {
    }
}
 } 
```

这是一个满足您要求的示例课程。如果有错误，我没有运行它很抱歉，但基本的想法就在这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:19:47.450

很有可能。将您的数据设置为数组并创建微调器。虽然微调器不支持点击事件，但它确实进行了选择，因此在创建微调器后您将拥有一些类似这样的代码：

```
yourSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        // Nothing to do here
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view,int pos, long id) {
        // Your code to get the URL and filename here
    }
}); 
```

您可以通过将所有必要的代码放入 中，在选择后立即触发它`onItemSelected`，或者只是在其中设置一些变量，然后在布局中（微调器外部）有一个按钮来获取您设置的变量并启动在线活动。第二个选项允许用户改变主意，而无需开始不需要的在线活动。

希望这可以帮助。

# sql - 为什么仍然没有在 where 条件中包含/不包含空值的 sql 快捷方式？

> ID：10458621
> 
> 赞同：0
> 
> 时间：2012-05-05T03:36:18.750
> 
> 标签：sql, sql-standards

```
 select 1 where somevalue = '' or somevalue is null from sometable 
```

*我完全理解为什么*我必须有两个不同的条件背后的原因。令我困惑的是为什么这么多年后仍然没有一个标准的快捷表示法。

我可以看到为什么各种 dbms 实现不提供快捷方式，因为它不是必需的，这样做会使您的 sql 的可移植性大大降低，但是考虑到这种快捷方式在所有 dbms 中的有用性，我无法理解为什么权力尚未在 sql 规范中添加执行此操作的快捷方式。

我的问题：实际上是否有正当理由，如果有，那是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:00:21.413

我习惯在 Oracle 中工作，其中空字符串*为*NULL，但这不起作用吗？

```
SELECT 1 FROM sometable WHERE COALESCE( somevalue, '' ) = '' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T04:14:29.450

你可以

```
select * from table where isnull(columnname,'')='' 
```

或者如果您担心 ' ' 值，那么您将使用 ltrim 和/或 rtrim。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:48:42.283

我没有看到这个问题。唯一的奇怪是由于Oracle没有遵循使NULL与''相同的标准。

这很容易做到： `coalesce(columnname,'')=''`

在 MS SQL Server 上，您还可以使用它： `isnull(columnname,'')=''`

但请注意，它是 MS 独有的功能。

# php - 使用php将数组中的项目保存在mysql上

> ID：10458628
> 
> 赞同：2
> 
> 时间：2012-05-05T03:38:30.817
> 
> 标签：php, arrays

嗨，我有一种情况，我不知道我到底需要做什么。

这是一个多文件上传，所以我这样做

```
$files = $_POST["files-temp"]; 
```

这个返回（iten1.jpg;iten2.jpg;iten3.jpg;）最后一个iten上有一个分号

然后我做了

```
$array = preg_split('/;/',$files); 
```

然后我得到了

```
Array ( [0] => iten1.jpg [1] => iten2.jpg [2] => iten3.jpg [3] => ) 
```

所以有一个不存在的iten 4，所以我需要找到一种更好的方法来执行此操作，然后计算并执行查询以保存在mysql上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:55:44.057

如果`$files`包含一个字符串并且想要删除最后一个额外的数组位置：

尝试：

```
$files = 'iten1.jpg;iten2.jpg;iten3.jpg;';
$result = explode(";", rtrim($files,';'));
print_r( $result ); 
```

[在这里测试](http://codepad.org/YMbMtmRe)

# c# - 如何修复此功能以便我可以输入任何类的列表

> ID：10458629
> 
> 赞同：1
> 
> 时间：2012-05-05T03:38:31.353
> 
> 标签：c#, collections, generic-collections

如何修复此功能以便我可以输入任何类的列表

```
private static List<Type> CopyObjList(List<Type> Group, List<Type> AddGroup)
{
    foreach (Type obj in AddGroup)
        Group.Add(obj);
    return Group;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:15:20.207

有几点需要考虑：

*   泛型
*   我们是否也希望能够添加派生类型
*   您是否真的要修改现有列表。

    ```
    private static List<TList> CopyObjList<TList, TElem>(List<TList> Group, List<TElem> AddGroup)
      where TElem : TList
    {
      List<TList> result = new List<TList>(Group);

      foreach (var item in AddGroup)
      {
        result.Add(item);
      }

      return result;
    } 
    ```

这将使原始列表保持不变，返回新列表，并且还允许添加派生类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:45:48.020

泛型和 AddRange

```
private static void CopyObjList<T>(List<T> Group, List<T> AddGroup)
{
      Group.AddRange(AddGroup);
} 
```

返回类型不是强制性的，因为 List 是一个引用类型。

祝你今天过得愉快

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:47:52.810

如我所见，您只需将一系列元素添加到现有列表中。您不需要为此编写函数。你可以简单地使用

```
AddRange 
```

List类的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T04:13:39.280

不确定您的问题，但似乎您需要一个接受任何类型的集合。如果是这样，一个 ArrayList 可以完成这项工作：

```
private static ArrayList CopyObjList(ArrayList Group, ArrayList AddGroup) 
{ 
    ArrayList arr = new ArrayList(Group);
    arr.AddRange(AddGroup);
    return arr;
} 
```

如果要添加的组可能与 ArrayList 不同，那么您可以为其设置 ICollection：

```
private static ArrayList CopyObjList(ArrayList Group, ICollection AddGroup)
{
    ArrayList arr = new ArrayList(Group);
    arr.AddRange(AddGroup);
    return arr;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T03:40:51.540

[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.80%29.aspx)。

```
private static List<T> CopyObjList<T>(List<T> Group, List<T> AddGroup)
{
    foreach(T obj in AddGroup)
        Group.Add(obj);
    return Group;
} 
```

这允许您将编译时类型传递给函数。

例子：

```
List<string> employees = new List<string> { "Bob", "Joe", "Fred" };
List<string> newHires = new List<string> { "Steve", "John" };

List<string> allEmployees = CopyObjList<string>(employees, newHires);

foreach(string employeeName in allEmployees)
    Console.WriteLine(employeeName); 
```

# javascript - try-catch 不适用于 XMLHTTPRequest

> ID：10458632
> 
> 赞同：23
> 
> 时间：2012-05-05T03:39:20.543
> 
> 标签：javascript, xmlhttprequest, try-catch

我正在尝试使用这些`try-catch`语句来处理来自 的错误`XMLHTTPRequest`，如下所示：

```
var xhr = new XMLHttpRequest();
xhr.open('POST', someurl, true);
try{
    xhr.sendMultipart(object);
}
catch(err){
    error_handle_function();
} 
```

当 抛出 401 错误时`xhr.sendMultipart`，`error_handle_function`没有调用 。知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-05T03:43:59.320

我认为您无法以这种方式捕获服务器错误。您应该改为检查状态代码：

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange=function() {
    if (xhr.readyState === 4){   //if complete
        if(xhr.status === 200){  //check if "OK" (200)
            //success
        } else {
            error_handle_function(); //otherwise, some other code was returned
        }
    } 
}
xhr.open('POST', someurl, true);
xhr.sendMultipart(object); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T03:42:07.670

> 当 xhr.sendMultipart 抛出 401 错误时

它没有被抛出。它是异步返回的。

这意味着此代码在响应到达之前完成运行。这就是`true`你`open`通话中的意思。

您需要在那里注册一个`onReadyStateChange`处理程序并处理错误响应。

# opencv - 如何在 OpenCV 中使用 cv::BackgroundSubtractorMOG？

> ID：10458633
> 
> 赞同：13
> 
> 时间：2012-05-05T03:39:28.260
> 
> 标签：opencv, computer-vision, background-subtraction, mog, shadow-removal

我正在使用OpenCV2.2通过背景减法的方法实现运动物体检测。我使用高斯混合模型（GMM）方法对背景参考图像进行建模。

我通过使用 OpenCV2.2 中提供的类 cv::BackgroundSubtractorMOG 直接获取前景像素（或前景蒙版）。这很方便，但是 cv::BackgroundSubtractorMOG 返回的前景蒙版不如我预期的那么好。此外，cv::BackgroundSubtractorMOG 的性能似乎比 OpenCV1.0 中提供的用 C 语言编写的 GMM 方法差。

以下是我在 OpenCV2.2 中的代码：

```
cv::BackgroundSubtractorMOG mog;
mog(frame, fgMask, 0.01); 
```

那么，我是否以错误的方式使用了该方法？

顺便说一句，cv::BackgroundSubtractorMOG 是否对前景像素执行阴影去除？

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T10:52:52.803

创建 mog 时，您没有定义任何参数，因此它是使用默认参数创建的。[这里](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=backgroundsubtractormog#backgroundsubtractormog-backgroundsubtractormog)你有每个参数的描述，也许就是这样。尝试使用 3、4 5 高斯。

此功能不执行阴影去除，但您有[其他](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=backgroundsubtractormog#backgroundsubtractormog2-backgroundsubtractormog2)功能可以执行。祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-02T04:59:35.353

最近有一些算法可以比 OpenCV 中的标准 GMM 实现更好地去除背景（检测前景）。

例如，[这篇期刊文章](http://arxiv.org/pdf/1303.4160v1.pdf)中描述了一种基于块的分类器级联方法，以及它的基于 C++ 的[源代码](http://arma.sourceforge.net/foreground/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:29:54.920

FX 在[这个线程](https://dsp.stackexchange.com/questions/3341/emgucv-detect-a-ball-in-the-frame/3342#3342)上的回答给出了示例参数

```
backgroundSubtractor = new BackgroundSubtractorMOG(3, 4, 0.8); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T16:12:56.090

我建议使用以下设置开始。然后你可以开始调整你的参数：

```
cv::BackgroundSubtractorMOG2 mog;
mog(rawFrame,foregroundFrame,-1);
mog.set("nmixtures", 3);
mog.set("detectShadows",1); 
```

在这个例子中，我将 MOG2 减法器设置为 3 个高斯混合。我还启用了阴影检测。

# javascript - 有没有更好的方法来创建元素并将文本附加到/围绕它们？

> ID：10458638
> 
> 赞同：2
> 
> 时间：2012-05-05T03:40:48.633
> 
> 标签：javascript, jquery, html

我目前有一堆看起来像这样的行：

```
txt = "Can't print the value for <span class='keyword'>"+arguments[1]+"</span> before it's set"; 
```

然后我在做

```
$('#mydiv').append($('<div/>').html(txt)); 
```

这看起来很糟糕，我需要转义参数中的任何 html[1]

我能想到的唯一选择是确保所有文本都在它自己的元素内：

```
var spans = [];
spans[0] = $('<span/>').text("Can't print the value for ");
spans[1] = $('<span/>').text(arguments[1]).className('keyword');
spans[2] = $('<span/>').text(" before it's set");
$('#mydiv').append($('<div/>').append(spans[0],spans[1],spans[2])); 
```

对于一个简单的文本行来说，这是相当多的。还有什么我可以做的吗？

编辑：这不是模板引擎应该处理的事情。它是由 javascript 日志记录功能生成的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:50:24.433

如果格式一致，我会将其添加为普通字符串，然后搜索关键字部分。

```
$('<div/>')
  .appendTo('#mydiv')
  .html("Can't print the value for <span class='keyword'></span> before it's set")
  .find('.keyword').text(arguments[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:50:52.823

如果您将继续使用 JS 创建大量 HTML，我建议您使用模板库。我是最近的皈依者，我花了很长时间才明白这一点。但是看到许多成功的网站（twitter、github 等）和伟大的 John Resig[推广](http://ejohn.org/blog/javascript-micro-templating/)和/或大量使用模板，我很高兴我坚持试图理解。现在我懂了。这是为了分离关注点，将逻辑排除在视图之外。

我正在使用这个非常简单的模板库：[http](http://blueimp.github.com/JavaScript-Templates/) ://blueimp.github.com/JavaScript-Templates/虽然[underscore.js](http://documentcloud.github.com/underscore/)和[mustache.js](https://github.com/janl/mustache.js/)提供的模板更受欢迎。

我使用的库的优点是它非常小，<1kb，如果你熟悉这些，基本上就像编写 php/asp 代码一样。

您可以在标签内编写 HTML`<script>`而无需转义：

使用您的变量，`txt`语法如下所示：

```
<script>
  var data={txt : "Can't print the value for <span class='keyword'>"+arguments[1]+"</span> before it's set"};

  <div>{%=o.txt%}</div>
</script> 
```

# asp.net - 我的连接已经打开，但为什么系统说它关闭了？

> ID：10458651
> 
> 赞同：0
> 
> 时间：2012-05-05T03:42:47.400
> 
> 标签：asp.net, connection, sql-server-ce, executenonquery

`ExecuteNonQuery requires an open and available Connection. The connection's current state is closed.`

为什么系统总是返回该消息？

我有一个子：

```
Private Sub Initialization()    

    If myCEConnection.State = ConnectionState.Closed Then '--> *1
        Try
            myCEConnection.Open()
        Catch ex As Exception

        End Try
    End If

    Dim reader As SqlCeDataReader
    Dim myCommand As SqlCeCommand = myCEConnection.CreateCommand()

    myCommand.CommandText = "Command goes here"
    Try
        reader = myCommand.ExecuteReader() 
    Catch ex As Exception '--> *2

    End Try

    myCEConnection.Close()
End Sub 
```

我从这个子中调用了该函数：

```
Public myCEConnection As New SqlCeConnection("Connection String Goes Here")

Private Sub Report()
    If myCEConnection.State = ConnectionState.Closed Then '--> *1
        Try
            myCEConnection.Open()
        Catch ex As Exception

        End Try
    End If

    Initialization()

    myCEConnection.Close()
End Sub 
```

当我尝试为该`*1`行设置断点时，系统返回`myCEConnection.State = Open {1}`. 但是当我继续运行断点时，`*2`我得到了：`ExecuteReader requires an open and available Connection. The connection's current state is Closed.`

![在此处输入图像描述](../Images/b612159e696a5ba2db598d702d5c4921.png)

代码有什么问题？

注意：类上的每个子/功能总是有`If myCeConnection.State = .....`检查连接是否已经打开的部分。也许这导致了问题，但我不太确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:57:53.917

您需要关联连接和命令：

```
myCommand.Connection = myCEConnection 
```

还可以考虑将您的代码更改为以下内容：

```
Dim reader As SqlCeDataReader

Using myCEConnection As New SqlCeConnection("Connection String Goes Here")
  myCEConnection.Open()
  Using myCommand As SqlCeCommand = myCEConnection.CreateCommand()
    myCommand.Connection = myCEConnection
    myCommand.CommandText = "Command goes here"
    reader = myCommand.ExecuteReader()
  End Using
End Using 
```

您实际上并不需要 Try-Catch，我猜最初`myCEConnection.Open()`是抛出异常，但由于 Try-Catch，您永远不会看到它。

# c# - 为什么 Control.Padding 不影响停靠控件的布局？

> ID：10458653
> 
> 赞同：1
> 
> 时间：2012-05-05T03:43:10.020
> 
> 标签：c#, winforms

当一个控件`Dock = DockStyle.Fill`是具有任何填充集的另一个控件的子控件时，停靠控件完全忽略容器控件的填充。如果容器控件是 UserControl 类型的子类，则不会发生这种情况。

例如，考虑以下两个类。

```
[Designer("System.Windows.Forms.Design.ParentControlDesigner, System.Design", typeof(IDesigner))]
public class Container : Control
{
    public Container()
    {
        Dock = DockStyle.Fill;
        Padding = new Padding(30, 30, 30, 30);
        BackColor = Color.Blue;
        Controls.Add(new Contained());
    }
}

public class Contained : Control
{
    public Contained()
    {
        Dock = DockStyle.Fill;
        BackColor = Color.White;
    }
} 
```

这`DesignerAttribute`只是用作设计人员的辅助工具。除非您将`Container`控件更改为继承自`UserControl`，否则`Contained`控件将不符合`Container`控件的`Padding`属性。

为什么是这样？我是否必须使用 UserControl 才能将另一个控件停靠在具有自定义填充的自定义控件中？

注意：我正在使用 .NET 4.5 运行 VS11。这可能是问题所在，但我无法在其他版本或平台上对其进行测试以确定。

谢谢，布兰登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:04:40.513

容器控件应派生自 ContainerControl 类。这给了它一些“像容器一样的行为”行为。包括观察 Padding 属性。

# ruby-on-rails - Rails 3任务范围？

> ID：10458654
> 
> 赞同：0
> 
> 时间：2012-05-05T03:43:54.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在开发一个简单的 rails 3 todo 应用程序，我正在尝试通过已完成的任务和未完成的任务来过滤应用程序，但是每当我尝试调用范围时，我都会收到错误消息。

```
undefined method `completed' for #<Array:0x007fe8420d0e58> 
```

任务.rb

```
scope :completed , where(:completed => true)
scope :incomplete , where(:finished => false) 
```

index.html.erb

```
<table>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Finished</th>
    <th>User</th>
  </tr>
  <% @tasks.each do |task| %>
  <tr>
    <td><%= task.name %><%= button_to "complete", complete_task_path(task.id)%></td>
    <td><%= task.description %></td>
    <td><%= task.finished %></td>
    <td><%= task.user_id %></td>
    <td><%= link_to 'Show', task %></td>
    <td><%= link_to 'Edit', edit_task_path(task) %></td>
    <td><%= link_to 'Destroy', task, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<%= content_tag :h2, "Stuff Ive done" %>
<table>
  <tr>
    <th>Name</th>
  </tr>
  <% @tasks.completed.each do |task| %>
  <tr>
    <td><%= task.name %></td>
  </tr>
<% end %>
</table> 
```

task_controller.rb

```
def complete
 @task = Task.find(params[:task_id])
 @task.completed = true
 @task.save
 redirect_to task_path
end 
```

路线.rb

```
match "tasks/:id/complete" => "task#complete", :as => :complete_task 
```

rails 给我这个错误的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:20:41.327

只需查看您的视图 (index.html.erb)，您就可以在一个地方将其视为一种关系。

```
<% @tasks.each do |task| %> 
```

稍后在代码中，您尝试将其作为单个对象进行访问。

```
<% @tasks.completed.each do |task| %> 
```

由于您在第二个实例上看到错误，因此您需要访问“已完成”，如下所示：

```
<% @tasks.completed.each do |task| %>
  <% completed = task.completed %>
     <% completed.each do |com| %> 
```

这有意义吗？

# android - Iphone 和 Android 移动应用程序创建

> ID：10458656
> 
> 赞同：-1
> 
> 时间：2012-05-05T03:44:17.263
> 
> 标签：android, iphone, mobile

我有兴趣创建一个移动应用程序。我熟悉 C 和 Java，但移动平台对我来说很陌生。我首先关心的是使应用程序跨平台的最佳方式。在做了一些阅读之后，似乎最好的方法是让大部分逻辑被卸载到远程服务器：只有 ui 独立完成。我不确定如何解决这个问题。我应该创建代码来查询我计划显示的特定数据，还是最好创建网站的移动版本并全部在 html 中完成？

任何有关此的建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:01:25.897

由于你想制作一个跨平台的应用程序，你可以选择 phonegap。在这种情况下，你必须在 HTML 中进行 95% 的编码，而在 java 或 Objective c 中仅进行 5% 的编码。它是跨平台应用程序的一个非常好的工具。除了适用于 android 和 iOS 的本机应用程序外，您还可以拥有一个使用与您的应用程序相同的代码的网站。

除了 Android 和 iPhone，您还可以在其他平台上拥有应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:20:02.627

使其跨平台（适用于 iOS 和 Android）的一种方法是使用 Adob​​e AIR。AIR 应用程序可以用 Flash/ActionScript3（与 Javascript 没有太大区别）或 HTML/JavaScript 编写...... AIR 在过去几年中得到了相当大的改进，因此可以创建功能齐全的游戏和运行的基本应用程序跨设备。您只需编写一次代码，然后针对任一设备进行构建。大概 90% 的代码在不同设备上是相同的，然后 10% 必须针对每个平台和屏幕分辨率进行调整。但是你所有的 UI、逻辑和后端代码都基本相同。还有 AIR 的原生扩展，可以让你做一些事情，比如振动手机或调出原生警报框。

如果您希望 UI 组件（选项卡、表格等）具有标准的 iPhone 外观和感觉，请不要使用 AIR——在这种情况下，您可能应该使用 iOS/Xcode。但是对于快速原型制作来说，AIR 很棒。此时，两个应用商店上都有许多为 AIR 编写的应用程序。

# php - array_walk vs array_map vs foreach

> ID：10458660
> 
> 赞同：26
> 
> 时间：2012-05-05T03:45:08.527
> 
> 标签：php, arrays, foreach

我试图比较这三个，但它似乎`array_map`只管用。

```
$input = array( '  hello   ','whsdf                                    ','                              lve you','                              ');
$input2 = array( '  hello   ','whsdf                                    ','                              lve you','                              ');
$input3 = array( '  hello   ','whsdf                                    ','                              lve you','                              ');

$time_start = microtime(true);
$input = array_map('trim',$input);
$time_end = microtime(true);
$time = $time_end - $time_start;

echo "Did array_map in $time seconds<br>";

foreach($input as $in){
    echo "'$in': ".strlen($in)."<br>";
}

////////////////////////////////////////////////

$time_start = microtime(true);
array_walk($input2,'trim');
$time_end = microtime(true);
$time = $time_end - $time_start;

echo "Did array_walk in $time seconds<br>";

foreach($input2 as $in){
    echo "'$in': ".strlen($in)."<br>";
}

////////////////////////////////////////////////

$time_start = microtime(true);
foreach($input3 as $in){
    $in = trim($in);
}
$time_end = microtime(true);
$time = $time_end - $time_start;

echo "Did foreach in $time seconds<br>";

foreach($input3 as $in){
    echo "'$in': ".strlen($in)."<br>";
} 
```

我究竟做错了什么？这是输出：

```
Did array_map in 0.00018000602722168 seconds
'hello': 5
'whsdf': 5
'lve you': 7
'': 0
Did array_walk in 0.00014209747314453 seconds
' hello ': 10
'whsdf ': 41
' lve you': 37
' ': 30
Did foreach in 0.00012993812561035 seconds
' hello ': 10
'whsdf ': 41
' lve you': 37
' ': 30 
```

它不是修剪 for`array_walk`和`foreach`循环。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-05T03:54:19.483

[`array_walk`](http://php.net/manual/en/function.array-walk.php)不看结果函数给出了什么。相反，它通过回调传递对项目值的引用。所以你让它工作的代码需要是

```
function walk_trim(&$value) {
    $value = trim($value);
} 
```

`foreach`也不存储更改的值本身。将其更改为

```
foreach ($input3 as &$in) {
    $in = trim($in);
} 
```

[阅读有关参考](http://www.php.net/manual/en/language.references.whatdo.php)的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T13:39:24.867

自**PHP 5.3**起可以使用匿名函数。前任：

```
$arr = array('1<br/>','<a href="#">2</a>','<p>3</p>','<span>4</span>','<div>5</div>');
array_walk($arr, function(&$arg){
    $arg = strip_tags($arg);
});
var_dump($arr); // 1,2,3,4,5 ;-) 
```

玩得开心。

# c# - ChildWindow_Loaded 的全局事件

> ID：10458667
> 
> 赞同：1
> 
> 时间：2012-05-05T03:46:03.360
> 
> 标签：c#, wpf, linq, childwindow

我偶然发现了如何创建一个全局事件的答案，当另一个父窗口显示子窗口时将触发该事件。我想要一个事件处理程序，所有这些子窗口都可以使用它而不将它（事件处理程序）附加到每个子窗口。

这在WPF中甚至可能吗？如果可能的话，任何帮助将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:40:30.140

以“全局”方式处理[Window.Loaded](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)事件是不可能的，因为它的路由类型是“直接”。直接路由事件不遵循路由，它们仅在引发它们的同一元素内处理。但是，您可以使用以下技巧来处理应用程序中的任何窗口创建：

```
 // Main window initialization code 
    _argsField = typeof(DispatcherOperation).GetField("_args",
        BindingFlags.NonPublic | BindingFlags.Instance);

    Dispatcher.Hooks.OperationCompleted += Hooks_OperationCompleted;
}
FieldInfo _argsField;
void Hooks_OperationCompleted(object sender, DispatcherHookEventArgs e) {
    if(e.Operation.Priority == System.Windows.Threading.DispatcherPriority.Loaded) {
        var source = _argsField.GetValue(e.Operation) as System.Windows.Interop.HwndSource;
        if(source != null) {
            Window w = source.RootVisual as Window;
            // ... here you can operate with newly created window
        }
    }
} 
```

# objective-c - 在保留对象的同时从 NSMutableArray 中删除指向对象的指针？

> ID：10458670
> 
> 赞同：1
> 
> 时间：2012-05-05T03:46:36.180
> 
> 标签：objective-c, pointers, nsmutablearray

我正在尝试删除 NSMutableArray 中指向另一个数组中的对象的指针，而不删除对象本身。例如：

```
// In ViewController.m – Code abridged and somewhat simplified

@interface ViewController ()
@property (nonatomic, strong) NSMutableArray *objectPool;
@property (nonatomic, strong) NSMutableArray *objectsOwnedByFriend;
@property (nonatomic, strong) NSMutableArray *objectsOwnedByMe;
- (void)transferPointerToObjectFromFriendToMe;
- (void)copyPointerToObjectFromFriendToMe;
@end

@implementation ViewController

@synthesize objectPool = _objectPool;
@synthesize objectsOwnedByFriend = _objectsOwnedByFriend;
@synthesize objectsOwnedByMe = _objectsOwnedByMe;

- (void)setObjectPool:(NSMutableArray *)objectPool
{
    _objectPool = objectPool;
}

- (NSMutableArray *)objectPool
{
    if (!_objectPool) _objectPool = [[NSMutableArray alloc] initWithArray:self.objects]; // self.objects is a mutable array containing multiple NSObjects
    return _objectPool;
}

- (void)setObjectsOwnedByFriend:(NSMutableArray *)objectsOwnedByFriend
{
    _objectsOwnedByFriend = objectsOwnedByFriend;
}

- (NSMutableArray *)objectsOwnedByFriend
{
    if (!_objectsOwnedByFriend)
    {
        _objectsOwnedByFriend = [[NSMutableArray alloc] init];
        [_objectsOwnedByFriend addObjectsFromArray:self.objectPool];
    }
    return _objectsOwnedByFriend;
}

- (void)setObjectsOwnedByMe:(NSMutableArray *)objectsOwnedByMe
{
    _objectsOwnedByMe = objectsOwnedByMe;
}

- (NSMutableArray *)objectsOwnedByMe
{
    if (!_objectsOwnedByMe) _objectsOwnedByMe = [[NSMutableArray alloc] init];
    return _objectsOwnedByMe;
}

- (void)transferPointerToObjectFromFriendToMe
{
    [self.objectsOwnedByMe addObject:[self.objectsOwnedByFriend lastObject]];
    [self.objectsOwnedByFriend removeLastObject];
}

- (void)copyPointerToObjectFromFriendToMe
{
    [self.objectsOwnedByMe addObject:[self.objectsOwnedByFriend lastObject]];
}

@end 
```

在上面的代码中，当我使用 transferPointerToObjectFromFriendToMe 时，删除最后一个对象会同时删除 self.objectsOwnedByFriend 中指向它的指针（如我所愿）以及 self.objectPool 中的对象本身（我*不想*发生）。

我想要的是一个包含所有实际对象的数组（self.objectPool），然后是两个可变数组（self.objectsOwnedByFriend 和 self.objectsOwnedByMe），其中包含指向 self.objectPool 中对象的指针以及添加和删除更多对象的能力将 self.objectPool 中的对象指向 self.objectsOwnedByFriend 和 self.objectsOwnedByMe 的指针。

~~此外，当我使用 transferPointerToObjectFromFriendToMe 或 copyPointerToObjectFromFriendToMe 时，似乎没有正确添加对象，因为通过 self.objectsOwnedByMe.count 进行的后续检查会导致 0 而不是 1。~~
SOLUTION = 我的原始代码中缺少 self.objectsOwnedByMe 的惰性实例化：S
我能够通过以下方式检查 self.objectsOwnedByMe 是否正确创建：

```
NSLog(@"self.objectsOwnedByMe = %@", self.objectsOwnedByMe); 
```

* * *

** 我的第一个 StackOverflow 问题！** 我希望我很清楚......找不到类似的问题，如果我错过了一个旧线程，我深表歉意。如果您需要更多信息来诊断，请告诉我。（我正在尝试学习 Obj-C。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:27:24.157

错字：P 抱歉偷看。在我在 Xcode 中的实际代码中，我有：

```
- (void)setObjectPool:(NSMutableArray *)objectPool
{
    _objectPool = objectPool;
}

- (NSMutableArray *)objectPool
{
    if (!_objectPool) _objectPool = [[NSMutableArray alloc] initWithArray:self.objects];
    return _objectsOwnedByFriend;
} 
```

我认为我的错误非常明显（如果不是，错误是我的 getter`objectPool`正在返回`_objectsOwnedByFriend`......我以某种方式错过的复制/粘贴错误）。

现在一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:30:01.503

这是非常奇特和令人困惑的代码。我怀疑问题是某些东西正在调用其中一个设置器，`-setObjectPool:`或者`-setObjectsOwnedByFriend:`，与另一个对象的数组一起调用。这些设置器只是让 ivar 引用传入的对象。因此，它们很容易导致对象被共享。

通常，像这样的属性将使用`copy`语义声明和实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:21:13.163

它看起来`self.objectsOwnedByMe`从未初始化，因此您总是使用`nil`而不是实际的 NSMutableArray。

在某个地方（也许在下面的 objectsOwnedByMe 的自定义 getter 中？）您需要在开始使用它之前创建一个数组：

```
- (NSMutableArray *)objectsOwnedByMe {
    if (_objectsOwnedByMe == nil) {
        _objectsOwnedByMe = [[NSMutableArray alloc] init];
    }
    return _objectsOwnedByMe;
} 
```

这可以解释这两个问题：因为`nil`它永远不会保留对象，因此当它们从另一个数组中删除时它们会消失，以及为什么它们永远不会添加到 _objectsOwnedByMe 数组中。

# ocaml - 将 OCaml 字符串转换为 format6

> ID：10458672
> 
> 赞同：8
> 
> 时间：2012-05-05T03:47:32.793
> 
> 标签：ocaml

以下代码无法编译：

```
let x = "hello" in
Printf.printf x 
```

错误是：

```
Error: This expression has type string but an expression was expected of type
     ('a, out_channel, unit) format =
       ('a, out_channel, unit, unit, unit, unit) format6 
```

1）有人可以解释错误信息吗？

2）为什么不能将字符串传递给 printf ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T03:57:52.617

printf 的第一个参数必须是非`('a, out_channel, unit) format`字符串类型。字符串文字可以自动转换为适当的格式类型，但字符串通常不能。

原因是格式字符串的确切类型取决于字符串的内容。例如，表达式的类型`printf "%d-%d"`应该是`int -> int -> ()`，而类型`printf "%s"`应该是`string -> ()`。显然，当编译时不知道格式字符串时，这种类型检查是不可能的。

在您的情况下，您可以这样做`printf "%s" x`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T03:57:11.900

正如 sepp2k 指出的那样，OCaml`printf`格式具有不同的类型，而不仅仅是字符串。字符串*文字*会自动转换为`printf`格式，但`x`不是字符串文字。如果要为格式命名，可以自己显式转换：

```
> let x = format_of_string "hello" in Printf.printf x
hello- : unit = () 
```

您也可以通过为 x 指定类型来进行隐式转换，但是格式的类型非常复杂，这非常痛苦：

```
# let (x: ('a,'b,'c,'d,'d,'a) format6) = "hello" in Printf.printf x;;
hello- : unit = () 
```

（我个人不理解`format6`类型。）

# c# - Gui 没有正确更新（来自异步）

> ID：10458675
> 
> 赞同：1
> 
> 时间：2012-05-05T03:47:59.287
> 
> 标签：c#, user-interface, asynchronous, delegates

我有一个问题让我整个星期都发疯了。我创建了一个非常简单的异步 TCP 客户端/服务器。当我收到一条 TCP 消息时，我想将其添加到文本框（基本上是一个简单的聊天程序）。我意识到异步方法是在后台线程上运行的，所以我`InvokeRequired`用来确保 GUI 由正确的线程更新（参见下面的代码）。

消息被接收并添加到文本框中。奇怪的是，每当收到新消息时，文本框都会添加新消息，但会删除其他所有内容。这只发生在异步调用中（其他调用不会删除文本框）。这有什么原因吗？

谢谢

```
private void UpdateText(string message)
{
    if (this.InvokeRequired)
    {
        UpdateDelegate update = new UpdateDelegate(UpdateText);
        this.Invoke(update, new object[] { message });
    }
    else
    {
        textHistory.Text = message + System.Environment.NewLine + textHistory.Text;
        textHistory.Refresh();
    }
} 
```

放置 Write 语句以确保 GUI 线程正确访问文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:52:17.283

尝试

```
private void UpdateText(string message)
{
    if (this.InvokeRequired)
    {
        UpdateDelegate update = new UpdateDelegate(UpdateText);
        this.Invoke(update, new object[] { message });
    }
    else
    {
        var V = message + System.Environment.NewLine + textHistory.Text;
        textHistory.Text = V;
        textHistory.Refresh();
    }
} 
```

# r - R中igraph中转置边缘列表的邻接

> ID：10458678
> 
> 赞同：2
> 
> 时间：2012-05-05T03:48:42.693
> 
> 标签：r, social-networking, igraph

我有一个相对较大的 2 模式网络，采用 4000 行和 9000 列的邻接矩阵形式，我有兴趣查看列之间的关系。

使用较小的网络我会这样做`t(matrix) %*% matrix`，但是我认为 9000^2 矩阵会最大化我计算机上的内存。

一种选择是将 igraph 邻接矩阵转换为 sna pacakge 格式，然后使用`sna::gt`，但我想知道 igraph 中是否有类似的功能？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:42:16.403

用于[`graph.incidence`](http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=igraph%3agraph.incidence)从邻接矩阵构造二分图，然后[`bipartite.projection`](http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=igraph%3abipartite.projection)根据行或列将其投影到相应的单模网络。

# java - RtfWriter2 (iText) 的问题

> ID：10458679
> 
> 赞同：0
> 
> 时间：2012-05-05T03:49:17.100
> 
> 标签：java, itext, rtf

我正在尝试使用 iText 创建文档。我正在使用 Eclipse IDE。我已经导入了 jar 文件（itextpdf-5.2.1.jar 和 itext-xtra-5.2.1.jar）。

但是 RtfWriter2 没有被识别为一个类。

```
Document doc = new Document();
RtfWriter2 writer = new RtfWriter2();
RtfWriter2.getInstance(doc,new FileOutputStream("testRTFdocument.rtf")); 
```

有人可以帮我弄清楚我错过了什么。我对 iText 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:40:41.003

[自iText 5.0.0](http://itextpdf.com/history/?branch=50&node=500)以来，RTF 支持已被删除。包含 RTF 功能的最后一个 iText 版本是 iText 2.1.7。请注意，iText 2.x 不再维护，因此如果需要，您不应期望任何错误修复。

# ruby-on-rails - RSpec - 测试是否设置了活动记录关联

> ID：10458684
> 
> 赞同：0
> 
> 时间：2012-05-05T03:50:26.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rspec2, rspec-rails

我在测试以下内容时遇到问题。创建对象时，会分配“待定”状态。状态实际上是一个活动记录关联。所以看起来像这样

```
def object
  belongs_to :object_status
end

def object_status
  has_many :objects

  def self.pending
    find_by_name('pending')
  end
end 
```

然后在控制器中创建它这样做

```
@object = Object.new(params[:object])
@object.object_status = ObjectStatus.pending
@object.save 
```

在 RSpec 中，我想测试以确保对象的状态为挂起，因此我在我的 objects_controller_spec 中执行此操作：

```
post :create, :object => @attr # I'm using pre-defined attributes
p = Object.last
p.object_status_id.should eq(Factory(:object_status_pending).id) 
```

RSpec 测试失败并出现以下情况（16 是 Factory 对象的 id）： 预期 16 得到 nil 出于某种原因，它没有检索 object_status_id 的值。如果我在我的开发服务器中运行代码，则数据库中的对象的 object_status_id 设置正确，所以我知道代码通过了测试。我有多个我无法弄清楚的实例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:44:14.517

这是由于对 Factory_Girl 缺乏了解。我实际上并没有在测试数据库中创建对象，只是在夹具中。

# ruby-on-rails-3 - Rails 3在创建后重定向到奇怪的ID

> ID：10458686
> 
> 赞同：0
> 
> 时间：2012-05-05T03:50:47.780
> 
> 标签：ruby-on-rails-3

Trail has_many 章节

章节belongs_to trail

我的路线：

```
resources :trails do
  member do
    resources :chapters do
      member do
        resources :clues
    end
  end
 end
end 
```

从 new.html 视图中的标准表单调用

来自我的 chapters_controller.rb

```
def creat
  @trail = Trail.find(params[:id])
  @chapter = @trail.chapters.build(params[:chapter])
     if @chapter.save
       flash.now[:status] = "Chapter created"
       redirect_to @chapter
     else
       flash.now[:error] = "Name needed"
       render 'new'
     end
end 
```

显示跟踪 ID 如何开始为 1 的日志，然后在创建后跟踪 ID 为 28（或 chapter_id）。

```
Started POST "/trails/1/chapters" for 127.0.0.1 at Fri May 04 20:31:15 -0700 2012
Processing by ChaptersController#create as HTML
Parameters: {"commit"=>"Create New Chapter", "chapter"=>{"name"=>"", "gate"=>"", "assetkind"=>"url", "description"=>"", "asset"=>""}, "authenticity_token"=>"Puu7EL8yQEsU4/NimBdL6mJRXiXoFTbHb1DSYvFNDgI=", "utf8"=>"✓", "id"=>"1"}

.
.
.
(3.7ms)  commit transaction
Redirected to http://localhost:3000/trails/28/chapters/28 
```

我希望它重定向到 ..trails/1/chapters/28 ...当我更改 url 以反映我期望的路径时，正确的页面会显示正确的内容。

我遇到了很多问题，但我认为这可能是帮助我解决问题的线索。我的路线或关联有问题吗？我有点重组了我的关联并将它们嵌套，现在我遇到了问题。

非常感谢您的时间和关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:29:21.210

您的路线过于具体。你真的只需要这个：

```
resources :trails do
  resources :chapters do
    resources :clues
  end
end 
```

`clues`实际上，您可能应该考虑将嵌套留在第三层而不是提供浅层路由是否值得。

此外，您需要将用于构建嵌套`chapter`路由的两个对象都交给路径助手：

```
redirect_to trail_chapter_path(@trail, @chapter) 
```

否则它将只有章节的 ID。这就是导致您的跟踪 ID 意外跳到 28 的原因。

# c++ - 有什么建议可以精确地制作以下 c++ 代码吗？

> ID：10458689
> 
> 赞同：0
> 
> 时间：2012-05-05T03:51:02.903
> 
> 标签：c++, constructor, overloading

考虑以下讲师，无论如何我都必须初始化 treeItem 和 status ，但是在重载函数中，我也可以引入 id 变量。

但这看起来很傻，我不应该在这两个功能中都这样做，有什么建议吗？

```
Contact ()
{
    treeItem = NULL;
    status = offline;
}

Contact (const QString & id)
{
    treeItem = NULL;
    status = offline;

    this->id = id;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:55:30.203

您将从*ctor-initializer-list 中*受益，但在升级到 C++11 之前，您确实需要为每个构造函数复制变量初始化。

一种选择是使用默认参数来减少构造函数的数量，如下所示：

```
Contact (const QString& identifier = QString())
    : treeItem(NULL), status(offline), id(identifier)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:58:21.290

使用默认参数来避免显式定义两个构造函数。并使用初始化列表。像这样：

```
Contact (const QString & id = QString())
    : treeItem(NULL)
    , status(offline)
    , id(id) // yes this works but you may wish to change the parameter name)
{} 
```

或者在 C++11 中使用委托构造函数::

```
Contact ()
    : treeItem(NULL)
    , status(offline)
{}

Contact (const QString & id = QString())
    : Contact()
    , id(id)
{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T03:58:14.210

如果你真的想重载构造函数（而不是提供默认值），你能做的最好的是将公共代码移动到它自己的函数中，然后从每个构造函数中调用它：

```
Contact()
{
    init();
}

Contact(const QString &id)
{
    init();
    this->id = id;
}

private void init() {
    treeItem = NULL;
    status = offline;
} 
```

# javascript - 如何在我的图像上添加叠加层

> ID：10458690
> 
> 赞同：0
> 
> 时间：2012-05-05T03:51:05.793
> 
> 标签：javascript, jquery, html, css

如何在我的代码中添加叠加层。

```
<div class="demo">
    <div style="width: 300px; height: 91px; position: absolute; top: 148px; left: 12px;" class="resizable ui-draggable ui-resizable ui-draggable-disabled ui-state-disabled" id="resizable" aria-disabled="true">

    <div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 1001;"></div></div>
    <div class="zoomslide ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="display: block;"><a href="#" class="ui-slider-handle ui-state-default ui-corner-all" style="left: 0%;"></a></div>
<div id="the_image" style="top: 12px; left: 12px; position: absolute;" class="ui-draggable"><div class="imgdiv" style="background: none repeat scroll 0% 0% red; height: 350px; width: 300px; overflow: visible;"><img width="334" height="350" src="images/lion-man.jpg" class="img1 image" id="first" style="position: relative; top: 0px; left: -17px;"></div></div></div> 
```

我需要的是当单击裁剪按钮并显示完整图像时，它应该覆盖在白色边框之外的图像部分。

我认为它应该创建 div 并在白框之外设置不透明度，但我在实现它时遇到了麻烦。

它应该是这样的：

```
function overlay(){
//codes here
} 
```

请提供任何帮助。

[http://deadwoodfilms.com/jquery/picture3/picture.html](http://deadwoodfilms.com/jquery/picture3/picture.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:32:21.107

试试这个大小：[http](http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/) ://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/ 如果不出意外，它会激发想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:13:03.980

## 问题：

不幸的是 CSS 背景本质上是附加的，你可以覆盖一些东西来添加颜色，但你不能否定颜色。

## 解决方案一：

您需要做的是实际上有两个版本的图像。一个作为基础，被覆盖物覆盖。第二个作为选择（在覆盖的顶部），边缘被切断。正确定位它，用户永远不会知道他们看到的是两个图像。

您将需要一个`<img>`（或`<div>`带背景的）加上两个`<div>`与图像尺寸相同的元素，另一个与选择的尺寸相同。这三个都应该使用`position: absolute;`并包含在一个带有`position: relative;`.

第一个`<div>`将充当叠加层，只需给它一个漂亮的背景颜色，如果你愿意，还可以不透明度。

第二个`<div>`是魔法。您将把它的背景设置`<div>`为您的图像。

现在使用 JS 你可以调整`background-position: Xpx Ypx;' 属性，以便显示的图像部分与选择的位置匹配。

假设图像是 500x500px，选择在 (100,100)。设置`背景位置：100px 100px;' 应该使它匹配，尽管可能需要进行一些调整以考虑您可能使用的任何边框。

显然，您的 JavaScript 还需要考虑对图像大小的任何修改，因为这会影响选择对齐。

## 解决方案二：

您可以使用 4 个`<div>`元素，全部覆盖，这样`<div>`图像顶部有一个，底部有另一个，选区的每一侧都有一个。然后这些`<div>`'s 将使用 JavaScript 动态调整大小以考虑选择的大小。这将具有覆盖您选择之外的所有区域的效果。

# opencv - opencv人脸检测；在哪里放置'haarcascade_frontalface_alt.xml'？

> ID：10458692
> 
> 赞同：0
> 
> 时间：2012-05-05T03:51:39.983
> 
> 标签：opencv

我是新来的。我目前一直在使用 opencv 做一些简单的项目。我目前在 opencv 的项目是人脸检测。我有如下所述的代码：

```
#include <stdio.h>
#include "cv.h"
#include "highgui.h"

CvHaarClassifierCascade *cascade;
CvMemStorage            *storage;

void detectFaces( IplImage *img );

int main( int argc, char** argv )
{  
        CvCapture *capture;
IplImage  *frame;
int       key;
char      *filename = "haarcascade_frontalface_alt.xml";

cascade = ( CvHaarClassifierCascade* )cvLoad( filename, 0, 0, 0 );
storage = cvCreateMemStorage( 0 );
capture = cvCaptureFromCAM( 0 );

assert( cascade && storage && capture );

cvNamedWindow( "video", 1 );

while( key != 'q' ) {
    frame = cvQueryFrame( capture );

    if( !frame ) {
        fprintf( stderr, "Cannot query frame!\n" );
        break;
    }

    cvFlip( frame, frame, -1 );
    frame->origin = 0;

    detectFaces( frame );

    key = cvWaitKey( 10 );
}

cvReleaseCapture( &capture );
cvDestroyWindow( "video" );
cvReleaseHaarClassifierCascade( &cascade );
cvReleaseMemStorage( &storage );

return 0;
}

void detectFaces( IplImage *img )
{
int i;

CvSeq *faces = cvHaarDetectObjects(
        img,
        cascade,
        storage,
        1.1,
        3,
        0 /*CV_HAAR_DO_CANNY_PRUNNING*/,
        cvSize( 40, 40 ) );

for( i = 0 ; i < ( faces ? faces->total : 0 ) ; i++ ) {
    CvRect *r = ( CvRect* )cvGetSeqElem( faces, i );
    cvRectangle( img,
                 cvPoint( r->x, r->y ),
                 cvPoint( r->x + r->width, r->y + r->height ),
                 CV_RGB( 255, 0, 0 ), 1, 8, 0 );
}

cvShowImage( "video", img );
} 
```

我现在坚持的是我应该在哪里放置 xml 文件？我当前的 opencv2.1 目录位于 C:/OpenCV2.1。

谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:00:58.827

如果您在 Windows 资源管理器中使用其图标运行应用程序，请将 XML 文件放在它旁边。

如果您从命令行终端运行，请将 XML 放入当前工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:58:15.787

由于您正在使用此 char *filename = "haarcascade_frontalface_alt.xml"; 然后你需要把你的xml文件放在当前目录下。如果它在其他目录中，请搜索文件夹，而不是像 char *filename = "C://opencv//...haarcascade_frontalface_alt.xml";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T20:07:30.840

你可以使用-

```
face_cascade.load("d:\\haarcascade_frontalface_alt.xml") 
```

所以代码看起来像 -

```
/** @function main */
 int main( int argc, const char** argv )
 {
   CvCapture* capture;
   Mat frame;
   face_cascade.load("F:\\haarcascade_frontalface_alt.xml");
   eyes_cascade.load("F:\\haarcascade_eye_tree_eyeglasses.xml"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T06:52:25.683

最好将 haar 级联文件放在：

首先，将你的 Haar_cascade.xml 文件放在你项目的解决方案文件夹下（VS 环境项目文件夹）

**步骤：** 1\. 右键单击​​解决方案文件。2\. 点击选项“配置属性” 3\. 点击调试。4、调试中。**在命令参数**下的右侧给出您的级联 xml 的名称。例如 haar_cascade_frontalface.xml

# windows-phone-7 - Windows Phone - https 帖子 404

> ID：10458695
> 
> 赞同：1
> 
> 时间：2012-05-05T03:53:03.650
> 
> 标签：windows-phone-7, https

现在的宁静。

我有这段代码，它是一个普通的 .NET 命令行应用程序，它可以工作：

```
var postData = "hello@email.com:MyPassword";
Guid appKey = new Guid("a guid that is a valid app key");
var url = "https://the.internet.com/2.0/Authentication/Basic";
var login = "Basic " + Convert.ToBase64String(Encoding.Default.GetBytes(postData));

var request = HttpWebRequest.Create(url) as HttpWebRequest;
request.Method = "POST";
request.Headers["Authorization"] = login;
request.Headers["app_key"] = appKey.ToString();
var requestStream = request.GetRequestStream();
requestStream.Write(Encoding.Default.GetBytes("1"), 0, 1);

var response = request.GetResponse();
Console.WriteLine(response.ToString()); 
```

好的，这很棒，我喜欢它。我在控制台上得到了预期的响应。但是，我正在尝试将此关节移植到 WP7，所以我尝试做的是：

```
public void Authenticate(string username, string password)
{
    Guid appKey = new Guid("a guid that is a valid app key");
    var url = "https://the.internet.com/2.0/Authentication/Basic";

    var request = HttpWebRequest.Create(url) as HttpWebRequest;
    request.Method = "POST";        
    request.Headers["app_key"] = appKey.ToString();
    var postData = "hello@email.com:MyPassword";
    var login = "Basic " + Convert.ToBase64String(Encoding.UTF8.GetBytes(postData));
    request.Headers["Authorization"] = login;
    request.BeginGetRequestStream(OpenRequestStream, request);      
}

void OpenRequestStream(IAsyncResult result)
{
    var request = result.AsyncState as HttpWebRequest;
    var stream = request.EndGetRequestStream(result);
    stream.Write(Encoding.UTF8.GetBytes("1"), 0, 1);
    stream.Flush();
    stream.Close();
    request.BeginGetResponse(AuthCallback, request);
}

void AuthCallback(IAsyncResult asyncResult)
{
    HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;
    // this line is where i get the 404 exception
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asyncResult);
    using (StreamReader streamReader1 = new StreamReader(response.GetResponseStream()))
    {
        string resultString = streamReader1.ReadToEnd();
        Console.Write(resultString);
    }

    if (Response != null)
        Console.WriteLine("you won the game");
} 
```

当我在 WP7 模拟器上运行此代码时，我得到 404！这根本不是我想要的。我确定我知道 URL 是正确的，那么这里发生了什么？会不会是模拟器的问题？我这里没有设备，所以我无法验证它不是。

我有一种强烈的感觉，有些愚蠢的事情正在发生，因为我知道我在很久以前曾对 WP7 进行过类似的调用。一件非常奇怪的事情是，在提琴手中，对于我的一个错误请求，我只收到隧道请求，并且标头看起来像这样：

```
CONNECT the.internet.com:443 HTTP/1.0
User-Agent: NativeHost
Host: the.internet.com:443
Content-Length: 0
Connection: Keep-Alive
Pragma: no-cache 
```

我认为这很奇怪，因为它告诉我我们正在执行 HTTP 1.0，但 ProtocolVersion 在 WP7 上不可用，因此我无法将其设为 1.1，正如您将在工作请求中看到的那样。当我运行一个工作请求（命令行程序）时，我得到一个 fiddler 隧道条目，如下所示：

```
CONNECT the.internet.com:443 HTTP/1.1
Host: the.internet.com
Connection: Keep-Alive 
```

然后我得到了我期望的正常请求/响应对。

我如何使它成为 1.1，这甚至重要吗？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:28:11.050

当前的 Windows Phone 操作系统有一个令人恼火的习惯，即为由于各种原因失败的请求声明 404 /“未找到”。

为了帮助您继续前进，我能想到的最可能的原因是您的 HTTPS 证书是自签名的（或者不是来自[受支持的根证书](http://msdn.microsoft.com/en-us/library/gg521150%28v=VS.92%29.aspx)），因此失败了。如果是这种情况，您将需要获得正确的证书，因为这些错误不容忽视。

如果这不是问题，请设置断点以便您可以处理`WebException`，然后将其`Response`属性值转换为 an`HttpWebResponse`并检查其属性。如果`HttpWebResponse.StatusCode`是`0`，则无法建立连接。

`WebException.Status`检查属性以确定非协议错误也是值得的（不过，WP7 喜欢声称一切都是`Unknown`）

# jquery - 我无法运行我的代码

> ID：10458698
> 
> 赞同：-3
> 
> 时间：2012-05-05T03:53:46.937
> 
> 标签：jquery

嗨，我有这个代码，但我无法让它工作。我是 Ajax jQuery 和 JavaScript 的新手，所以请善待 :) 并感谢您的帮助 :) 这段代码应该是一个简单的表单验证，但是当我进入下一个输入框时它什么也不做。它应该显示 uname 长度小于 5 个字符的错误消息。谢谢！

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
function validateUsername(){
    var uname=document.getElementById("uname").value;
    if(uname<5){
        document.getElementById("errormsg").value = "wait";
    }

}
</script>

<body>
<form method=post id=regform action=jscript.html>
<table>
    <tr>    
        <td>Username</td>
        <td><input type=text name=uname id=uname onBlur="javascript:validateUsername()"/></td>
        <td><input type=hidden name=errormsg value='' id=errormsg"/></td>
    </tr>
    <tr>    
        <td>Password</td>
        <td><input type=text name=uname id=uname onBlur="javascript:validatePassword()"/></td>
        <td><input type=hidden name=errormsg value='' id=errormsg"/></td>
    </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:03:21.683

试试这个，我希望它会有所帮助。你需要改进你的 html，在每个属性的值周围加上引号，比如 **type="text" name="uname"**并且你写的只是 javascript，而不是 jquery，所以你也不需要包含那个 .js 文件。在您的函数 validateUsername 中，uname 保存用户输入的字符数，如果小于 5，则 errormsg（这是 div 的 id）将显示**wait** msg

您不需要输入 type="hidden" 向用户显示错误消息，为此使用 DIV 或 SPAN

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function validateUsername(){
    var uname=document.getElementById("uname").value.length;
if(uname<5){
    document.getElementById("errormsg").innerHTML = "wait";
}

}
</script>
</head>
<body>
<form method="post" id="regform" action="jscript.html">
<table>
<tr>    
    <td>Username</td>
    <td><input type="text" name="uname" id="uname" onBlur="validateUsername()"/></td>
    <td><div id="errormsg"></div></td>
</tr>
<tr>    
    <td>Password</td>
    <td><input type="text" name="pass" id="pass" /></td>
    <td></td>
</tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:04:40.857

(uname<5) 必须是 (uname.length<5) 我猜

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T04:10:27.177

您的一些问题是：

```
 <input type=hidden name=errormsg value='' id=errormsg"/> 
```

您在值周围缺少一组引号`id`。它应该是：

```
 <input type=hidden name=errormsg value='' id="errormsg"/> 
```

此外，在 HTML 中，id 需要在整个文档中是*唯一的。*因此，您不允许有 2 个 ID 为“errormsg”的输入字段，您必须给它们不同的输入字段。

此外，正如 Wezelkrozum 所发现的，您需要测量用户名的*长度*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T04:29:57.693

您可能会受益于在[jsbin](http://jsbin.com)或[jsfiddle](http://jsfiddle.net/)中使用您的代码测试您的代码。

这是一个活生生的例子，说明你可以如何解决你的问题。

[http://jsbin.com/oyejic/7/edit#javascript,html,live](http://jsbin.com/oyejic/7/edit#javascript,html,live)

我鼓励你使用 jsbin 中的示例。下面是来自 jsbin 示例的代码（删除了库的外部链接）。

```
<!DOCTYPE html>
<html>
<head>
<script class="jsbin" src="jquery.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
</style>
</head>
<body>
<form method="post" id="regform" action="jscript.html">
<table>
    <tr>    
        <td>Username</td>
        <td><input type="text" name="uname" id="uname" /></td>
        <td><input type="hidden" name="uname_errormsg" value="" id="uname_errormsg" /></td>
    </tr>
    <tr>    
        <td>Password</td>
        <td><input type="text" name="pword" id="pword" /></td>
        <td><input type="hidden" name="pword_errormsg" value="" id="pword_errormsg" /></td>
    </tr>
</table>
</form>

  <div id="testing"></div>

<script type="text/javascript">
function validateField( inputID ) {
    var fieldName = $('#' + inputID).val();
    if ( fieldName.length < 5 ) {
        $('#' + inputID + '_errormsg').val("wait");
        $("#testing").empty()
                     .text("hey, wait " + inputID + "!" ); 
    } else {
        $("#testing").empty()
                     .text("Ah, 5 or more characters for " + inputID + "!" );     
    }
} 

  $("#uname, #pword").blur(function() {
    validateField( this.id ); 
  });
  </script>
</body>
</html> 
```

几点注意事项：

1.  通过开始学习[jQuery](http://docs.jquery.com/How_jQuery_Works)库，您可能会受益。您在代码中引用了 jQuery，但您没有使用它。我发布的示例确实使用了 jQuery。

2.  尽量避免使用内联 javascript。将 javascript 事件（例如`onBlur="javascript:validateUsername()"` 直接放在 html 中）可能会很混乱并导致维护问题。

3.  关闭您的 html 属性。`id=errormsg"`应该`id="errormsg"`

4.  您可能还会发现值得一读[Javascript Enlightenment 。](http://javascriptenlightenment.com/)

# php - 使用 php 使用动态生成的变量访问多维数组键（需要避免 eval）

> ID：10458699
> 
> 赞同：1
> 
> 时间：2012-05-05T03:53:53.993
> 
> 标签：php, multidimensional-array, eval

我需要再次避免 eval() 。我想访问这样的多维数组：

```
$items = $xml2array[$explode_path[0]][$explode_path[1]]; 
```

问题是 $explode_path[0] 和 $explode_path[1] 是通过 for 循环计算的：

`for($i=0; $i<$count_explode; $i++) { }`

现在整个代码如下所示：

```
function getValues($contents, $xml_path) {
    $explode_path = explode('->', $xml_path);
    $count_explode = count($explode_path);
    $xml2array = xml2array($contents);

    $correct_string = '$items = $xml2array';

    for($i=0; $i<$count_explode; $i++) {
        $correct_string .= '[$explode_path['.$i.']]';
    }

    $correct_string .= ';';
    eval($correct_string);
    return $items;
}

$contents = readfile_chunked($feed_url, true);
$items = getValues($contents, 'deals->deal'); # will get deals->deal from MySQL

foreach($items as $item) {
    echo $item['deal_title']['value'].' - '.$item['dealsite']['value'].'<br />';
} 
```

我不知道如何以这种方式访问​​ $xml2array 数组：

```
$items = $xml2array[$explode_path[0]][$explode_path[1]]; 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:05:25.750

`getValues()`用以下内容替换您的功能怎么样：

```
function getValues($contents, $xml_path) {
    $explode_path = explode('->', $xml_path);
    $count_explode = count($explode_path);
    $items = xml2array($contents);

    for($i=0; $i<$count_explode; $i++) {
        $items = $items[$explode_path[$i]];
    }

    return $items;
} 
```

**编辑：**更清洁的版本：

```
function getValues($contents, $xml_path) {
    $items = xml2array($contents);

    foreach(explode('->', $xml_path) as $k)
    {
        $items = $items[$k];
    }

    return $items;
} 
```

# c++ - 将c++程序与mysql连接时出现意外错误

> ID：10458705
> 
> 赞同：0
> 
> 时间：2012-05-05T03:55:25.877
> 
> 标签：c++, mysql, visual-studio-2010, connector

我正在使用 Visual C++ 2010 开发一个连接到 mySQL 数据库所需的 C++ 控制台应用程序。我正在使用 wamp 服务器进行 mysql 和 mySQL C++ 连接器进行连接。代码可以正常读取数据库，但是当我尝试插入数据时，它会出现意外错误。有人有过这样的经历吗？

这是我的完整代码：（代码的输出是：“SQL 错误：错误消息：未知异常”）

```
 // Standad C++ includes
#include <iostream>
#include <cstdlib>
#include <string>
using namespace std;

// Include the Connector/C++ headers
#include "cppconn/driver.h"
#include "cppconn/exception.h"
#include "cppconn/resultset.h"
#include "cppconn/statement.h"
#include "cppconn/sqlstring.h"

// Link to the Connector/C++ library
#pragma comment(lib, "mysqlcppconn.lib")

// Specify our connection target and credentials
const string server   = "tcp://127.0.0.1:3306";
const string username = "cashif";
const string password = "111222"; // No password - NEVER DO THIS ON A PRODUCTION SERVER!

int main()
{
    sql::Driver     *driver; // Create a pointer to a MySQL driver object
    sql::Connection *dbConn; // Create a pointer to a database connection object
    sql::Statement  *stmt;   // Create a pointer to a Statement object to hold our SQL commands
    sql::ResultSet  *res;    // Create a pointer to a ResultSet object to hold the results of any queries we run

    // Try to get a driver to use to connect to our DBMS
    try
    {
        driver = get_driver_instance();
    }
    catch (sql::SQLException e)
    {
        cout << "Could not get a database driver. Error message: " << e.what() << endl;
        system("pause");
        exit(1);
    }

    // Try to connect to the DBMS server
    try
    {
        dbConn = driver->connect(server, username, password);
    }
    catch (sql::SQLException e)
    {
        cout << "Could not connect to database. Error message: " << e.what() << endl;
        system("pause");
        exit(1);
    }

    stmt = dbConn->createStatement(); // Specify which connection our SQL statement should be executed on

    // Try to query the database
    try
    {
        stmt->execute("use dengue_test");              // Select which database to use. Notice that we use "execute" to perform a command.

        stmt->execute("insert into patients values(3,\"Amina\",\"Iqbal Town\""); // Perform a query and get the results. Notice that we use "executeQuery" to get results back
    }
    catch (sql::SQLException e)
    {
        cout << "SQL error. Error message: " << e.what() << endl;
        system("pause");
        exit(1);
    }

    // While there are still results (i.e. rows/records) in our result set...
/*
    while (res->next())
    {
        // ...get each field we want and output it to the screen
        // Note: The first field/column in our result-set is field 1 (one) and -NOT- field 0 (zero)
        // Also, if we know the name of the field then we can also get it directly by name by using:
        // res->getString("TheNameOfTheField");
        cout << res->getString(1) << " - " << res->getString(2) << " - " << res->getString(3) << endl;                
    }
    */
    // Clean up after ourselves
    //delete res;
    delete stmt;
    delete dbConn;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:06:13.440

您的 SQL 中有两个错误，一个是 MySQL 可以让您逃脱的错误，一个是它不会允许的错误。你也养成了一个坏习惯。

两个错误都在这里：

```
stmt->execute("insert into patients values(3,\"Amina\",\"Iqbal Town\""); 
```

SQL 中的字符串文字使用单引号，而不是双引号；不过，MySQL 会让你侥幸逃脱。但是，您也缺少右括号，而 MySQL 一点也不喜欢。你应该这样说：

```
stmt->execute("insert into patients values(3, 'Amina', 'Iqbal Town')"); 
```

不指定 SQL INSERT 中的列是一个坏习惯，所以你应该这样说：

```
insert into patients (col1, col2, col3) values (...) 
```

where`col1`和friends 当然是真正的列名。表中的列没有任何明确定义的顺序，因此您应该具体避免有趣的错误和维护噩梦。

# c# - Windows Phone/XNA 检测触摸开始

> ID：10458707
> 
> 赞同：0
> 
> 时间：2012-05-05T03:55:40.450
> 
> 标签：c#, windows-phone-7, xna, touch, windows-phone

我想让按钮在 windows Phone 中触摸时改变颜色，但唯一可用的手势是`GestureType.Tap`在点击完成后调用，因此在用户触摸按钮后颜色会改变。如何在触摸时立即检测到触摸？

```
 while (TouchPanel.IsGestureAvailable)
        {

            GestureSample gs = TouchPanel.ReadGesture();
            switch (gs.GestureType)
            {
               //this is called AFTER the tap
               case GestureType.Tap:
                    if (Restart.tapped(gs.Position))
                        Restart.selectDrawColor = Color.OrangeRed;
                    else
                        Restart.selectDrawColor = Color.White;

                    if (uploadScore.tapped(gs.Position))
                        uploadScore.selectDrawColor = Color.OrangeRed;
                    else
                        uploadScore.selectDrawColor = Color.White;

                    if (MainMenu.tapped(gs.Position))
                        MainMenu.selectDrawColor = Color.OrangeRed;
                    else
                        MainMenu.selectDrawColor = Color.White;
                    break;
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:36:13.907

触摸屏幕不被视为手势，因此`ReadGesture`不会返回。您将需要调用[`TouchPanel.GetState()`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.touch.touchpanel.getstate.aspx)并查找任何`TouchLocation`具有`State`of 的对象`Pressed`。

```
// using System.Linq;

TouchLocation[] newTouchLocations = TouchPanel.GetState()
    .Where(loc => loc.State == TouchLocationState.Pressed)
    .ToList(); 
```

根据[文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.touch.touchlocationstate.aspx)，`TouchLocationState.Pressed`表示：

> 这个触摸位置位置是新的。

# c# - 如何模拟采用动态对象的方法调用

> ID：10458714
> 
> 赞同：13
> 
> 时间：2012-05-05T03:57:15.567
> 
> 标签：c#, mocking, moq, rhino-mocks

说我有以下内容：

```
public interface ISession 
{
   T Get<T>(dynamic filter); }
} 
```

我有以下要测试的代码：

```
var user1 = session.Get<User>(new {Name = "test 1"});
var user2 = session.Get<User>(new {Name = "test 2"}); 
```

我将如何模拟这个电话？

使用起订量，我厌倦了这样做：

```
var sessionMock = new Mock<ISession>();
sessionMock.Setup(x => x.Get<User>(new {Name = "test 1")).Returns(new User{Id = 1});
sessionMock.Setup(x => x.Get<User>(new {Name = "test 1")).Returns(new User{Id = 2}); 
```

那没有用。返回结果为空

我还尝试使用 Rhino Mocks 执行以下操作：

```
var session = MockRepository.GenerateStub<ISession>();
session.Stub(x => x.Get<User>(new {Name = "test 1"})).Return(new User{Id=1}); 
```

也没有运气。再次为空。

那么我该怎么做呢？

谢谢，

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-05T06:45:03.937

您可以将`It.Is<object>`匹配器与反射一起使用。您不能在表达式树中使用动态，因此`It.Is<dynamic>`无法正常工作，这就是为什么您需要反射来按名称获取属性值的原因：

```
sessionMock
    .Setup(x => x.Get<User>(
        It.Is<object>(d => d.GetPropertyValue<string>("Name") == "test 1")))
    .Returns(new User{Id = 1});
sessionMock
    .Setup(x => x.Get<User>(
        It.Is<object>(d => d.GetPropertyValue<string>("Name") == "test 2")))
    .Returns(new User { Id = 2 }); 
```

哪里`GetPropertyValue`有小帮手：

```
public static class ReflectionExtensions
{
    public static T GetPropertyValue<T>(this object obj, string propertyName)
    {
        return (T) obj.GetType().GetProperty(propertyName).GetValue(obj, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T04:08:59.003

`It.IsAny<T>`为该案例提供的起订量

```
sessionMock.Setup(x => x.Get<User>(It.IsAny<object>()).Returns(new User()); 
```

*动态是任何对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T15:21:04.003

首先，匿名对象并不是真正的`dynamic`.

如果你使用`dynamic`像

```
dynamic user1Filter = new ExpandoObject();
user1Filter.Name = "test 1";
var user1 = session.Get<User>(user1Filter); 
```

你可以嘲笑它

```
sessionMock.Setup(x => x.Get<User>(DynamicFilter.HasName("test 1"))); 
```

通过实现自定义参数匹配器：

```
static class DynamicFilter
{
    [Matcher] public static object HasName(string name) { return null; }
    public static bool HasName(dynamic filter, string name)
    {
        string passedName = filter.Name; //dynamic expression
        return name.Equals(passedName);
    }
} 
```

# java - 效率：switch 语句优于 if 语句

> ID：10458719
> 
> 赞同：30
> 
> 时间：2012-05-05T03:58:11.000
> 
> 标签：java, pmd

[`PMD`](http://pmd.sourceforge.net/pmd-5.0.0/)告诉我

> 少于 3 个分支的 switch 效率低下，请改用 if 语句。

这是为什么？为什么是3？他们如何定义效率？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-05T04:06:48.823

因为一条`switch`语句是用两个特殊的 JVM 指令编译的，它们是`lookupswitch`和`tableswitch`。它们在处理大量案例时很有用，但当您只有几个分支时它们会导致开销。

相反，一条`if/else`语句被编译成典型的`je` `jne`... 链，这些链更快，但在长链分支中使用时需要更多的比较。

您可以通过查看字节码看到差异，无论如何我不会担心这些问题，如果有任何问题可能会出现问题，那么 JIT 会处理它。

实际例子：

```
switch (i)
{
  case 1: return "Foo";
  case 2: return "Baz";
  case 3: return "Bar";
  default: return null;
} 
```

被编译成：

```
L0
 LINENUMBER 21 L0
 ILOAD 1
 TABLESWITCH
   1: L1
   2: L2
   3: L3
   default: L4
L1
 LINENUMBER 23 L1
FRAME SAME
 LDC "Foo"
 ARETURN
L2
 LINENUMBER 24 L2
FRAME SAME
 LDC "Baz"
 ARETURN
L3
 LINENUMBER 25 L3
FRAME SAME
 LDC "Bar"
 ARETURN
L4
 LINENUMBER 26 L4
FRAME SAME
 ACONST_NULL
 ARETURN 
```

尽管

```
if (i == 1)
  return "Foo";
else if (i == 2)
  return "Baz";
else if (i == 3)
  return "Bar";
else
  return null; 
```

被编译成

```
L0
 LINENUMBER 21 L0
 ILOAD 1
 ICONST_1
 IF_ICMPNE L1
L2
 LINENUMBER 22 L2
 LDC "Foo"
 ARETURN
L1
 LINENUMBER 23 L1
FRAME SAME
 ILOAD 1
 ICONST_2
 IF_ICMPNE L3
L4
 LINENUMBER 24 L4
 LDC "Baz"
 ARETURN
L3
 LINENUMBER 25 L3
FRAME SAME
 ILOAD 1
 ICONST_3
 IF_ICMPNE L5
L6
 LINENUMBER 26 L6
 LDC "Bar"
 ARETURN
L5
 LINENUMBER 28 L5
FRAME SAME
 ACONST_NULL
 ARETURN 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T04:04:08.963

尽管与使用 if 语句相比，使用 switch 的效率提升很小，但在大多数情况下，这些收益可以忽略不计。任何称职的源代码扫描器都会认识到[微优化](https://stackoverflow.com/a/3387765/836738)是代码清晰度的次要因素。

他们说如果 switch 非常短，if 语句比 switch 语句更易于阅读并且占用的代码行数更少。

来自[PMD 网站](http://pmd.sourceforge.net/rules/index.html)：

> TooFewBranchesForASwitchStatement：Switch 语句旨在用于支持复杂的分支行为。只在少数情况下使用 switch 是不明智的，因为 switch 不像 if-then 语句那样容易理解。在这些情况下，使用 theif-then 语句来增加代码的可读性。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-05T04:06:52.270

> 这是为什么？

当 JIT 编译器（最终）将代码编译为本机代码时，会使用不同的指令序列。切换由执行间接分支的一系列本机指令实现。（该序列通常从表中加载一个地址，然后分支到该地址。） if / else 被实现为评估条件的指令（可能是比较指令），然后是条件分支指令。

> 为什么是3？

这是一个经验观察，我假设基于分析生成的本机代码指令和/或基准测试。（或者可能不是。为了绝对确定，您需要询问该 PMD 规则的作者他们是如何得出该数字的。）

> 他们如何定义效率？

执行指令所花费的时间。

* * *

我个人会对这条规则提出异议……或者更准确地说，是这条信息。我认为应该说一个`if / else`语句比带有 2 个 case 的 switch 更简单、更易读。效率问题是次要的，可能无关紧要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T04:04:33.600

我相信这与 switch 和 if/else 的编译方式有关。

假设处理一个 switch 语句需要 5 次计算。假设一个 if 语句需要两次计算。您的 switch 中少于 3 个选项将等于 ifs 中的 4 个计算与 switch 中的 5 个计算。但是，交换机中的开销保持不变，因此如果它有 3 个选择，则 ifs 将被 3 * 2 处理，而交换机仍然为 5。

查看数百万次计算所获得的收益是极其微不足道的。它更多的是“这是更好的方法”，而不是任何可能影响您的事情。它只会在一个相当迭代中在该函数上循环数百万次的东西上这样做。

# ruby-on-rails - Memcached :expires_in 在 Heroku 上用于片段缓存

> ID：10458723
> 
> 赞同：2
> 
> 时间：2012-05-05T03:59:18.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, memcached

我正在尝试使用带有 Rails 3.1 的 Memcached 插件和 Heroku cedar 堆栈上的 dalli 设置缓存系统，其中有许多项目应该在每天结束时过期。

为此，我使用了一种实用方法：

```
def self.seconds_to_next_day
  ((DateTime.now.end_of_day - DateTime.now) * 24 * 60 * 60).to_i.seconds
end 
```

在haml视图中像这样缓存：

```
- cache "user_#{current_user.id}_my_groups", :expires_in => Utils.seconds_to_next_day do
  = render "shared/my_groups" 
```

但它不会在每天结束时到期。我也尝试过将秒数作为整数传递，不带 .seconds，但没有任何区别。

现在我已经退回到每天 00:00 运行的计划任务并清除对日期敏感的缓存项，但我更喜欢使用本机缓存到期。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:18:03.690

为了在 Rails 和 Heroku 上正确计算时间，您需要适当地使用 Time 和 zone。因此，您想要的是以下内容。

```
Time.zone.now.end_of_day - Time.zone.now 
```

# java - 将选择的值从组合框中发送到 servlet

> ID：10458730
> 
> 赞同：1
> 
> 时间：2012-05-05T04:01:36.397
> 
> 标签：java, jsp, servlets, href, option

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:36:19.840

`<a href="location">`不是表单提交，是重定向，参数是从查询字符串中读取的。

查看您的查询字符串

```
command=all_test_edit&subject_id=${subject} 
```

没有`subject`，所以`request.getParametr("subject");`会一直给你`null`。如果您使用`<input type="submit">`或`<button>`然后完成表单提交。

正如你所说，你不能使用 JavaScript。因此，对此没有其他出路。对于 `command`and`subject_id`参数，您可以使用

```
<input type="hidden" name="command" value='all_test_edit'> 
```

其他静态参数也类似。

更新：

看起来您可以使用该`submit`值传递操作参数。这是一个例子：

JSP

```
<form id="form1" action="SomeServlet">
    Insert text:
    <input type="text" name="txtInputText" />
    <br />
    <input type="submit" name="btnAction" value="Add" />
    <br />
    <input type="submit" name="btnAction" value="Edit" />
    <br />
    <input type="submit" name="btnAction" value="Delete" />
    <br />
</form> 
```

小服务程序：

```
System.out.println(request.getQueryString());
String s = request.getParameter("btnAction"); 
```

当您单击`Add`按钮时，`s`将是“添加”。当您单击`Edit`按钮时，`s`将是“编辑”，依此类推。这不灵活，但可以解决您的问题。

# java - 如何在一个按钮下制作一个覆盖Android中其他按钮的阴影

> ID：10458737
> 
> 赞同：0
> 
> 时间：2012-05-05T04:04:00.123
> 
> 标签：java, android, button, widget

我想做的是让一个按钮在相对布局中的其他按钮上投下阴影；我目前拥有的是这样的：

[当前 http://dl.dropbox.com/u/42852467/device-2012-05-04-205730.png](http://dl.dropbox.com/u/42852467/device-2012-05-04-205730.png)

然而，我需要的是这个：

[需要 http://dl.dropbox.com/u/42852467/UI%20Design.png](http://dl.dropbox.com/u/42852467/UI%20Design.png)

我尝试在 View 方法之上使用 View，但它在相对布局中并不能很好地覆盖其他按钮。shadow 属性仅在文本下投射阴影，因此也不起作用。我的想法是使用 9-patch 并在绝对布局中使按钮过大，但这样平铺衬里图案将无法正常工作。有任何想法吗？

另外，如果有人能告诉我如何在 android 应用程序中使用自定义 ttf 字体，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:22:46.117

# bash - bash：一次从字符串中读取一个字符，带有空格

> ID：10458743
> 
> 赞同：6
> 
> 时间：2012-05-05T04:05:24.197
> 
> 标签：bash, char, sleep, ifs

我很无聊，决定使用 bash 为我的基于文本的冒险编写一个脚本。基本上，它应该在某些情况下为打字机设置动画，以讲述戏剧性的故事。我可以在这样的文件中手动执行此操作：

```
sleep 0.1 
echo -n "h"
sleep 0.1 
echo -n "e"
sleep 0.1 
echo -n "l"
sleep 0.1 
echo -n "l"
sleep 0.1 
echo -n "o" 
```

可以想象，这非常乏味。相反，我想一次从字符串（或文件）中提取一个字符，并将 sleep 命令应用于每个字符。

到目前为止，我有以下内容，从文件中读取。IFS= 允许保留空格，但不允许保留任何其他类型的空格（例如换行符）。

```
IFS=
while read -n1 achar
do
   echo $achar
done < aFile 
```

有没有办法可以使用它来获取所有空格？作为一个额外的问题，你能告诉我如何将它应用于用户定义的脚本，所以我不必从单独的文件中读取吗？因此，例如，假设我有一个名为“hello”的字符串，只要我在 bash 终端中运行我的文件，我就可以简单地将它传递给我的函数以作为打字机进行动画处理。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T04:21:34.303

怎么样

```
#!/bin/bash

function typewriter
{
    text="$1"
    delay="$2"

    for i in $(seq 0 $(expr length "${text}")) ; do
        echo -n "${text:$i:1}"
        sleep ${delay}
    done
}

typewriter "Typewriters are cool." .1
echo # <-- Just for a newline 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:06:51.253

要回答原始问题，您还需要使用空分隔符：

```
#!/bin/bash
getc() {
  IFS= read -r -n1 -d '' "$@"
}

typewriter() {
  while getc ch; do
    sleep 0.1; echo "$ch"
  done
} 
```

基本上，`read`即使它还没有消耗足够的字符，它也会在换行符（默认分隔符）处停止。该`-r`标志还告诉它不要使用反斜杠。

完整说明：http: [//jayferd.us/posts/2011-01-12-bash-adventures-read-a-single-character-even-if-its-a-newline](http://jayferd.us/posts/2011-01-12-bash-adventures-read-a-single-character-even-if-its-a-newline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T04:20:11.520

@derp 不，您需要使用`tr -s [:blank:]`将多个空白压缩到一个空白。

HTH。

# java - 如何填充和访问 3 维数组列表的任何元素

> ID：10458752
> 
> 赞同：1
> 
> 时间：2012-05-05T04:06:53.540
> 
> 标签：java, generics, vector, arraylist

我需要创建一个 3-Dimensional ArrayList。

```
 ArrayList<ArrayList< ArrayList<Object>>> data_Header_Mapper; 
```

我如何填充 3D 数组列表以及如何访问 3 维数组列表的叶子（对象）。非常感谢您的任何帮助。

我熟悉 Vectors 的工作，但由于一些问题，我想将 Vectors 的以下代码转换为 ArrayList。填充 3D 向量的代码如下。

```
 for (int r=0;r<totalRows;r++) // r - Rows
   {

     for (int c=0;c<totalViewedCols;c++) //c- Columns
     {

       cAct=0;
       while (cAct < totalActualCols)
      // for (int cAct=0;cAct<totalActualCols;cAct++) //c- Columns
       {
         if (Cols.get(cAct).toLowerCase().equals(columnName.toLowerCase())  )
         {
          ColValindex =  colHeader_ForSave.indexOf(columnName)  ;//Temp Comment
          colValue= (String)data_ForSave.elementAt(r).get(ColValindex);
         //  ColValindex =  header.indexOf(columnName)  ;
         //  colValue= (String)data.elementAt(r).get(ColValindex);

           data_Header_Mapper_Element.add(columnName); 
           data_Header_Mapper_Element.add(colValue); 
          }
         cAct++;
       }
       if (data_Header_Mapper_Element.size() !=0)
       {
        data_Header_Mapper_Row.add(data_Header_Mapper_Element);
       // data_Header_Mapper_Element.removeAllElements();
      data_Header_Mapper_Element =null;
      data_Header_Mapper_Element=new Vector<String>();
       }
     }
      if (data_Header_Mapper_Row.size() !=0)
     {
       data_Header_Mapper.add(data_Header_Mapper_Row);

       data_Header_Mapper_Row =null;
       data_Header_Mapper_Row=new Vector<Vector<String>>();
      }

   } 
```

访问 3D 向量的代码如下

```
 for(int r=0;r<rowSize;r++)
      {

      for (int c=0;c<colSize;c++)
      {

      // To Build Insert And Update Query 
           columnDataType=  dbe.GetDataTypeOfTableColumn(rsMetaData,data_Header_Mapper.elementAt(r).get(c).get(0).toString());
           dataSize=dbe.GetDataSizeOfTableColumn(rsMetaData,data_Header_Mapper.elementAt(r).get(c).get(0).toString());
           Validation.ValidateData(columnDataType, data_Header_Mapper.elementAt(r).get(c).get(1), dataSize);

         }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:19:46.803

```
public class My3DArray {

    private List<List<List<Object>>> list;

    public My3DArray() {
        this.list = generate3DArray(5, 5, 5);
    }

    public List<List<List<Object>>> generate3DArray(int dim1, int dim2, int dim3) {
        List<List<List<Object>>> list = new ArrayList<List<List<Object>>>();
        for(int i = 0; i < dim1; i++) {
            List<List<Object>> list2 = new ArrayList<List<Object>>();
            for(int j = 0; j < dim2; j++) {
                List<Object> list3 = new ArrayList<Object>(dim3);
                list2.add(list3);
            }
            list.add(list2);
        }
        return list;
    }

    public Object getElementIn3DArray(int i, int j, int k)
        throws NullPointerException, ArrayIndexOutOfBoundsException {
        return list.get(i).get(j).get(k);
    }

    public void setElementIn3DArray(Object o, int i, int j, int k)
        throws NullPointerException, ArrayIndexOutOfBoundsException {
        list.get(i).get(j).add(o);
    }
}

public class Main {
    public static void main(String[] args) {
        My3DArray x = new My3DArray();
        x.setElementIn3DArray("Hello World", 0, 0, 0);
        System.out.println(x.getElementIn3DArray(0, 0, 0));
        System.exit(0);
    }
} 
```

我省略了类中的一些变量，例如尺寸，但这是一个想法。如何使用此示例取决于您。

# delphi - Delphi - 当一个是UNC并且一个是驱动器号指定时比较两个路径名

> ID：10458753
> 
> 赞同：5
> 
> 时间：2012-05-05T04:07:11.113
> 
> 标签：delphi, path, directory-structure, delphi-2006, unc

我有一种情况，用户可以指定两个单独的路径名，我需要检查一个路径名是否在另一个路径名“内部”。如果两个路径名都是 UNC，或者两者都是基于驱动器号的，我可以这样做，但是如果它们混合在一起怎么办？

您能否将诸如“C:\Program Files”之类的路径“规范化”为“\\[此计算机名称]\C\Program Files”？显然，我不能另辟蹊径，因为 UNC 格式的网络文件夹可能没有对应的驱动器号映射到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T04:58:57.183

看看[ExpandUNCFileName](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.ExpandUNCFileName)函数。

# javascript - 从ajax中的js封闭函数返回值

> ID：10458756
> 
> 赞同：0
> 
> 时间：2012-05-05T04:08:12.070
> 
> 标签：javascript, jquery

如何从封闭的 js 函数返回值？我尝试了下一个示例，但它不起作用（它返回给我：

```
function executeCommand(data, func){                
$.ajax({
type: 'POST',
url: SERVERPATH+'Commands/',
data: data,
success: func,
dataType: 'json'
});     
}

function executeServiceOperation(data){
var result = null;
executeCommand(data,
result = (function(data,status){        
      if( status=='success' ){                                  
        return data.result;     
      }
      else return null;          
    })(data,status)
);
 return result; 
} 
```

`result`每次都是空的。我认为它的发生是因为`status`. 我怎样才能得到`status`变量？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:17:33.190

根据您的代码，您必须在第二个参数中传递一个函数，但您要返回一个赋值（相当于“true”）。它会失败。

相反，请执行以下操作：

```
executeCommand(data, function(data,status){ //function as second parameter       
    if( status=='success' ){                                  
       return data.result;     
    } else {
       return null;  
    }        
}); 
```

但是，它仍然是错误的。任何涉及 AJAX 的东西都是异步的。因此，您不能从中“返回”任何东西。您应该做的是在“成功”发生时传递回调。

```
function executeServiceOperation(data, callbacks){

    //do some set-up stuff you want

    executeCommand(data,function(data,status){        
        if( status === 'success'){                              
            callbacks.success(data.result) //execute callback with result
        } else {
            callbacks.fail(null);     //execute fail callback, with null if necessary
        }          
    });
);

executeServiceOperation(data, {
    success :function(result){
        //do something with result
    },
    fail : function(){
        //do something as if it returned null
    }
}); 
```

上面的这段代码是用传统的回调方式编写的。你应该看看[Deferred Objects](http://api.jquery.com/category/deferred-object/)的“含糖”代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:16:03.963

无法返回从 ajax 函数获得的数据。相反，您必须分配一个函数，该函数将在 ajax 函数成功后调用。

# c# - 这个 getter 每次被引用时都会调用数据库吗？

> ID：10458757
> 
> 赞同：1
> 
> 时间：2012-05-05T04:08:26.443
> 
> 标签：c#, properties, getter

假设我有这样的课程：

```
public class MyClass {
...    
    public List<SomeClass> MyProperty {
        get { 
            SomeClass.GetCollectionOfThese(someId);
        } 
    }
...
} 
```

`GetCollectionOfThese()`调用数据库以检索构建集合所需的记录。现在假设我在其他地方有以下代码：

```
MyClass obj = new MyClass(someId);
List<SomeClass> temp = obj.MyProperty;

...

SomeClass otherObj = obj.MyProperty.FirstOrDefault(i => i.Foo == "bar"); 
```

在这种情况下，数据库是否被调用了两次？还是属性值缓存在内存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:23:26.260

您的实现将导致多个数据库调用。如果你需要的话，你必须做缓存。就像是：

```
public class MyClass {
...    

    private List<SomeClass> _myProperty = null;
    public List<SomeClass> MyProperty {
        get { 
            if (_myProperty == null) _myProperty = SomeClass.GetCollectionOfThese(someId);
            return _myProperty;
        } 
    }
...
} 
```

当然，那么您可能希望为客户端提供一种刷新缓存的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:19:00.593

这取决于您在数据层中使用的技术。例如，如果您将 Linq2Sql 与单个 DataContext 一起使用，DataContext 将为您缓存实体并从缓存中重新查询它，以便您只访问数据库一次。但这不是典型的方案。

# c - 是否有重构工具可以自动将大功能拆分为小功能？

> ID：10458758
> 
> 赞同：2
> 
> 时间：2012-05-05T04:08:34.400
> 
> 标签：c, function, ide, refactoring

我想从一个函数中使用一些 C 代码，但是，该函数有 300 多行代码和 20 个变量，这让我非常头疼。

我只是想知道是否有这样的工具可以自动将小功能与大功能分开（重构）。然后它将为我节省大量时间来处理像这样的长函数。

（我认为这不是一件很难的事情，因为这个工具只需要分析第一次定义变量的位置，以及最后使用变量的位置，然后给我一些关于在哪里拆分的建议.. )

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T04:16:43.417

问题是计算机很难知道函数的目的是什么。如果碰巧一个任务需要所有 20 个变量和 300 行代码，并且将任务拆分是没有意义的，那么它是一个很好的函数。这有点难以想象，但仍然如此。

不要*仅仅*因为它很长就将其分解。打破它，因为这样做是有意义的。保持功能只执行一件事。到目前为止，计算机还不够聪明，无法弄清楚函数的用途，尤其是还不够聪明，无法决定可以合理分割出函数的哪些子部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:49:13.507

是的，有一些工具可以做到这一点。您想要的是一个程序转换工具，它可以将 C 解析为 AST，可以确定函数内的数据流，并且可以使用数据流作为指导来转换 AST，并且可以从转换后的树中重新生成文本。

您必须面对的问题之一是如何告诉工具*在哪里*拆分功能。您想要哪个部分作为子功能？可以说你可以指定*任何集合*函数中的操作（赋值、子表达式或语句）进入子函数，一般来说你需要那么多的控制；这可能是一个相当长且详细的描述（可能是一组行/列对）。但通常你想要一些自动选择，例如“将所有支持仅操作的东西”放入子程序中；然后，具有数据流分析的工具可以从操作中计算后向切片，找出后向切片的哪一部分仅用于操作，并移动相应的代码。作为一个实际问题，您需要结合这些想法。无论哪种情况，该工具现在都知道必须移动什么。将指定代码移动到子程序中“只是”一组标准程序转换；大多数编译器都有内部机制来执行此操作。

您甚至可能希望该工具提供代码的交互式图形切片视图，以便您做出此决定。（Grammatech 提供了一个名为[CodeSurfer](http://www.grammatech.com/products/codesurfer/overview.html)的 C 切片工具，它正是这样做的）。

可以计算此类切片并进行代码转换的工具是我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)。（它不像 CodeSurfer 那样具有交互性；但是 CodeSurfer 不能更改代码）。您需要配置 DMS 以实现该特定任务；它具有上述所有机器。实际上，这可能比您手动拆分一个功能所花费的努力要多。

话虽如此，您仍然无法决定*如何*拆分功能。这似乎是您遇到的实际问题，而不是工具。

# javascript - 在 jQuery 中调用此函数时感到困惑

> ID：10458761
> 
> 赞同：0
> 
> 时间：2012-05-05T04:09:08.503
> 
> 标签：javascript, jquery

我有一个 jQuery 代码，

```
<script type="text/javascript">
$.idleTimeout('#idletimeout', '#idletimeout a', {
  idleAfter: 3,
  pollingInterval: 2,
  keepAliveURL: 'keepalive.php',
  serverResponseEquals: 'OK',
  onTimeout: function(){
    $(this).slideUp();
    window.location = "timeout.htm";
  },
  onIdle: function(){
    $(this).slideDown(); // show the warning bar
  },
  onCountdown: function( counter ){
    $(this).find("span").html( counter ); // update the counter
  },
  onResume: function(){
    $(this).slideUp(); // hide the warning bar
  }
});
//
</script> 
```

现在，如果我调用它，它会隐藏滑块。

```
function loadXMLDoc(message)
{
$.get("test1.php?data="+message, function(result){

$('#idletimeout').slideUp(); // hide
    });
}
</script> 
```

有没有办法在**loadXMLDoc函数中调用****onResume**函数（在顶部）？谢谢。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:31:49.443

查看插件，它将 resume 函数绑定到传入的第二个参数的单击处理程序（在您的情况下为“#idletimeout a”）。如果您想手动重置计时器，您应该可以这样做：

```
$('#idletimeout a').click(); 
```

这将触发`onResume`向上滑动 div 并重置计时器的功能。

作为参考，我只是看了一下插件的源代码，看看发生了什么。您可以在此处查看相关部分。这是单击 resume 元素（第二个参数）时发生的情况：

```
// bind continue link
this.resume.bind("click", function(e){
    e.preventDefault();

    win.clearInterval(self.countdown); // stop the countdown
    self.countdownOpen = false; // stop countdown
    self._startTimer(); // start up the timer again
    self._keepAlive( false ); // ping server
    options.onResume.call( self.warning ); // call the resume callback
}); 
```

如果您只想直接调用它（并且没有任何重置计时器的内部操作发生），您也可以这样做：

```
var idlePlugin = $.idleTimeout('#idletimeout', '#idletimeout a', { ...

idlePlugin.options.onResume.call(); 
```

但请记住，这不会重置计时器，它只会直接调用 onResume 函数。重置计时器的唯一方法是调用单击处理程序，因为这是定义此功能的地方。**

# java - 如何将不同类型的对象添加到 Android 中的 hashmap？

> ID：10458762
> 
> 赞同：2
> 
> 时间：2012-05-05T04:09:33.823
> 
> 标签：java, data-structures, hashmap

我正在尝试添加要通过单个键值添加/检索的各种记录。

每个数据记录应具有以下参数；

```
public class WebRecord {
        Integer UniqueCustomerID;
        Integer Count; // Number of websites for a given customer

//Repeat the following 'Count' number of times
       { // Each Record for a given Website for the same customer
    String BusinessName, Websites, siteTag;
    Integer uniqueWebID, BusinessTypeID;
       }

} 
```

我希望这些记录基于我从 Web 服务获得的计数值而存在。我打算如下使用Hashmap：

有人可以告诉我如何在 HASHMAP 中实现该数据结构吗？我想使用单个键值 UniqueCustomerID 放置和获取这些记录；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:25:49.390

对java概念不好，但我认为你可以做到，

```
 class WebRecord{ 
          int UniqueCustomerID; 
          int Count;
     } 

     class ContactRecord{ 
        String BusinessName, Websites, siteTag; 
        int uniqueWebID, BusinessTypeID; 
    } 
```

在你的java文件中

```
 MyActivity{ 
            public Map<WebRecord,ArrayList<ContactRecord>> map=new HashMap<WebRecord,ArrayList<ContactRecord>>(); 

        //now create one object of web record

        //create arraylist of ContactRecord depending upon "count" variable's value

        // fill the above both and put into map

            map.put(webRec, arrContact); 
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:38:34.740

如果您有多个`ContactRecord`等于该`Count`值的对象，则无需显式存储该值。

鉴于您上面的数据结构，您可以做到。

```
public HashMap<Integer, ArrayList<ContactRecord>> map; 
```

地图的关键是`UniqueCustomerID`. 要发现`Count`价值，您可以像这样查询地图中的列表。

```
map.get(customerId).size(); 
```

# jquery - 仅将操作分配给父元素，排除子元素

> ID：10458765
> 
> 赞同：0
> 
> 时间：2012-05-05T04:10:29.783
> 
> 标签：jquery, jquery-selectors

如何使用 jquery 选择器仅选择父项但排除子项

HTML

```
<div id="container">
  <div class="element">
    <img src="something.jpg"/>
    <a href="somelink">Some link</a>
    <p>Blah blah...</p>
  </div>
  <div class="element">
    <img src="something2.jpg"/>
    <a href="somelink2">Some link2</a>
    <p>Blah blah...</p>
  </div>
</div> 
```

查询：

仅当用户单击（div“元素”）而不是单击 <a> 和 <img> 时，如何触发警报（“Hi”）

```
 $("#container").delegate(".element", "click", function(){
                        alert("Hi");
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:13:44.637

除非您明确停止它们的传播，否则事件会在 DOM 中冒泡。我建议您尝试使用它，而不是反对它。也就是说，如果您坚持，请检查[`event.target`](http://api.jquery.com/category/events/event-object/)以确保`div.element`被点击，而不是它的孩子之一：

```
$("#container").delegate(".element", "click", function(event) {
    if (!$(event.target).hasClass("element")) return;
    alert("Hi");
}); 
```

[http://jsfiddle.net/mattball/JMDLq/](http://jsfiddle.net/mattball/JMDLq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:28:53.057

昨天刚回答了同样的问题，问之前先搜索一下。

[https://stackoverflow.com/a/10440234/1331430](https://stackoverflow.com/a/10440234/1331430)

只需替换那里的 2 个 ID 选择器，`$('.element')`一切就绪。

# php - 合并两个mysql COUNT(*) 结果，不同的列

> ID：10458770
> 
> 赞同：0
> 
> 时间：2012-05-05T04:11:37.740
> 
> 标签：php, mysql, sql, aggregate-functions

我正在尝试合并以下查询的计数：

```
 SELECT recipient AS otheruser, COUNT(*) 
    FROM privatemessages 
   WHERE sender = '$userid' 
GROUP BY recipient

  SELECT sender AS otheruser, COUNT(*) 
    FROM privatemessages 
   WHERE recipient = '$userid' 
GROUP BY sender 
```

如果无论如何要结合这两个查询，并将每个“其他用户”的计数（*）加在一起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:19:48.400

最直接的方法是使用 SUM / Condition

```
SELECT
     CASE WHEN sender = '$userid' THEN recipient else sender END AS OtherUser,
     SUM(sender = '$userid') AS RCount,
     SUM(recipient = '$userid') AS SCount,
     COUNT(*) total
FROM
     privatemessages 
WHERE
     '$userid' IN (sender , recipient )
GROUP BY
     OtherUser 
```

[演示](http://sqlfiddle.com/#!2/01946/3)

**更新**

感谢 deltab 和 Michael Buen，我清理了 SUM 和 GROUP BY 语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:28:06.017

最直接的方法就是使用 2 个查询。
使用 2 个查询请求 2 个不同的数据集绝对没有害处，但没有一个理由这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T04:29:09.200

您可以像这样将它们与 UNION 结合起来：

```
SELECT otheruser, COUNT(*) FROM
(SELECT recipient AS otheruser
FROM privatemessages 
WHERE sender = '$userid' 
GROUP BY recipient
UNION
SELECT sender AS otheruser
FROM privatemessages 
WHERE recipient = '$userid' 
GROUP BY sender) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-05T04:29:21.270

```
SELECT recipient AS r, sender AS s, COUNT(total) // can't use same alias
FROM privatemessages
WHERE sender = '$userid' AND recipient = '$userid'
GROUP BY s; 
```

然后在你的结果函数中，调用 count

```
while ($row = $result) {
  echo $row['COUNT(total)'];
} 
```

我相信这个查询应该按预期工作。您原来的唯一问题是双重别名和您对两个不同字段的分组。这在 2 个单独的查询中是可能的，但结合起来，它不能完成（至少是别名，对于 GROUP BY 不这么认为）。

希望这对你有用。

**更新**

一个*很好的*替代方法`COUNT`是简单地使用`num_rows`... 因此，上面的查询将是：

```
SELECT recipient AS r, sender AS s // can't use same alias
FROM privatemessages
WHERE s = '$userid' AND r = '$userid'
GROUP BY s; 
```

然后在你的结果函数中，调用`num_rows`函数：

```
mysql_num_rows($result); 
```

# php - Kohana内存泄漏？

> ID：10458771
> 
> 赞同：4
> 
> 时间：2012-05-05T04:12:51.627
> 
> 标签：php, kohana

我这里有潜在的内存泄漏。应该是小韩的吧。我希望得到你的见解。（这几天一直在调试这个脚本，昨晚我终于放弃了）。

下面是这个脚本的作用：

基本上，这是一个后台工作者（托管在 Pagodabox）。这就是为什么它是一个无限的while循环的原因。一步步：

1.  它试图获取一篇未处理的文章
2.  然后从相关表中获取相关信息
3.  它将信息保存到表中（emailerscheds）
4.  自然地，由于从表中只取到一篇文章记录，它会返回顶部并获取另一篇文章。
5.  并再次从 1 开始。

问题：第一次记录后内存没有被清除，最终分配的内存，无论多么大，都用完了。我不得不认为，由于您正在处理一个新的数据库对象，因此必须清除内存。但事实并非如此。

我尝试了不同的方法，你可以想到清除内存。我尝试将变量设为 NULL，unset()，我已经声明了 gc_enable，gc_collect_cycles()，我尝试让脚本休眠 60 秒，希望垃圾收集器能在平静的时刻完成他的工作（*眨眼*——我知道我疯了）。我认为 ORM 是问题，所以我尝试了 DB。我试过关闭分析——顺便说一句，这有帮助，但首先不是问题。我试过__destruct。

内存仍然耗尽。

您可能会说数据集可能很大。这是。但问题是，这可以在内存不足之前处理大约 3 到 4 条文章记录。意思是，它实际上可以处理至少一个。我希望在 1 条记录之后，内存被释放。

* * *

```
public function action_grab_article_topics()
{
    gc_enable();

    $x = 1;
    while ($x == 1)
    {

        // $articles = ORM::factory('article')
        //   ->where('sent', '=', 0)
        //   // ->limit(1)
        //   ->find();

        $articles = DB::select()
                ->from('articles')
                ->where('sent', '=', 0)
                ->as_object()
                ->execute()
                ->current();

        $topics = array();
        //foreach ($articles as $a)
        //{
            //$topics = $articles->topics->find_all()->as_array();
        if ($articles)
        {   
            $topics = DB::select('topic_id')
                    ->from('articles_topics')
                    ->where("article_id", '=', $articles->id);

            if (! empty($topics))
            {
                $members = DB::select('members.id', 'members.email', 'members_topics.topic_id', 'topics.topic_name')
                        ->from('members_topics')
                        ->join('members')
                        ->on('members.id', '=', 'members_topics.member_id')
                        ->join('topics')
                        ->on('topics.id', '=', 'members_topics.topic_id')
                        ->where('members_topics.topic_id', 'IN', $topics)
                        // ->limit(20)
                        ->as_object()
                        ->execute();

                foreach ($members as $m)
                {
                    $topic_id = $m->topic_id;
                    $topic_name = $m->topic_name;

                    $data = array(
                                "member_id" => $m->id,
                                "topic_id" => $topic_id,
                                "article_id" => $a->id,
                                "topic_name" => $topic_name,
                                "title" => $a->title,
                            );

                        $emailersched = ORM::factory('emailersched')->values($data)->save();

                        unset($m);

                 }

                $members->__destruct();

            //sleep(2);

            //$m = NULL;
            }

            $data = array('sent'=> time());

            $query = DB::update('articles')
                    ->set($data)
                    ->where('id', '=', $articles->id)
                    ->execute();

             // $articles->sent = time();
             // $articles->save();

            //}

         //echo "done";
            //$a = NULL;
            //$articles->__destruct();

            $articles = NULL;
            $topics = NULL;
            unset($articles);
            unset($topics);

            }

        gc_collect_cycles();
        //sleep(60);

    }
} 
```

编辑：在我的“内存泄漏”调查中（因为我的代码继续遇到问题），这里有一些我遇到的奇怪的东西：

[http://pastebin.com/c7pc5XjW](http://pastebin.com/c7pc5XjW)此代码在 Kohana 和 FuelPHP 上运行 - 相同的基本代码库，使用内置 DB 模块，不使用 ORM，访问相同的数据库。燃料不使用油。它是通过公共 http 访问的，就像访问 Kohana 一样。

此代码尝试处理总共约 10k 条记录中的 50 条记录。

这是我对 Kohana 的记忆日志：http: [//pastebin.com/gUiF9D2w](http://pastebin.com/gUiF9D2w)

这是我的 FuelPHP 内存日志：http: [//pastebin.com/v8Pzwu77](http://pastebin.com/v8Pzwu77)

请注意，Kohana 以 3Mb 开始，以 7Mb 结束。然而，FuelPHP 开始时大约 11Mb，但也以 11MB 结束。虽然 Kohana 一开始很小，但在我看来，它在这方面确实存在漏洞。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T11:04:24.303

您是否还确保已禁用数据库分析？

**配置/数据库.php**

```
'profiling'    => FALSE 
```

如果它设置为 TRUE，这会导致巨大的泄漏，默认情况下它是。

很容易错过这个设置，只更改引导文件中的主要分析设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T12:36:50.530

调试一个遗留的 Kohana 1 项目，我发现 config/database.php 中的“基准”设置是罪魁祸首。在现有配置中设置为 TRUE 会导致内存泄漏，每个数据库查询对应于 UPDATE/INSERT 中的数据大小或 SELECT 中结果集的大小。设置为 FALSE 并且内存泄漏消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:38:03.217

这是一场精彩的框架大战：在我绝望的情况下，我尝试将相同的代码运行到 FuelPHP（通过 OIL 上的任务）。

结果：

-302k 记录在 2 分钟内处理 - 内存泄漏消失了！

所以，我想这里的结论是，Kohana 代码库在某个地方存在泄漏，不知何故。

# r - 如何使用索引获取与 data.frame 隔离的变量的名称？

> ID：10458780
> 
> 赞同：3
> 
> 时间：2012-05-05T04:14:22.463
> 
> 标签：r, dataframe, plyr

给定一个与数据框隔离的变量，如何获得它的名称？它需要在内部完成索引的函数中工作（例如，应用）。

```
df<-data.frame(a=1:10,b=1:10)

names(df[,1]) 
```

产生：

```
>NULL

test<-df[,1]
test[0] 
```

这是一个可能有用的示例：

```
library(plyr)
relabel<-colwise(function(column){
  column<-paste(names(column),column)})
relabel(df) 
```

给

```
data.frame(a=c(.1,.2,.3,...), b=c(.1,.2,...)) 
```

期望的结果是：

```
data.frame(a=c('a.1','a.2','a.3'), b=c('b.1','b.2', 'b.2')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:20:04.163

`drop = FALSE`在索引中使用参数，如下所示：

```
df<-data.frame(a=1:10,b=1:10)

names(df[,1, drop=FALSE]) 
```

这是一个执行您正在寻找的功能的功能：

```
namer.guy <- function(x) paste(rep(names(x), nrow(x)),  unlist(x), sep=".")

namer.guy(df[, 1, drop=F]) 
```

**编辑：Per Etienne Low-Decarie 的要求...**

```
namer.guy2 <- function(df){
    name.paster <- function(i) paste(names(df)[i], df[, i], sep=".")
    DF <- data.frame(sapply(seq_along(df), name.paster))
    names(DF) <- names(df)
    return(DF)
}

namer.guy2(df) 
```

# javascript - 隐藏和/或显示表格列

> ID：10458781
> 
> 赞同：-1
> 
> 时间：2012-05-05T04:14:25.837
> 
> 标签：javascript, jquery, html, css

我需要一个只能显示某些列的表格，具体取决于是否选中了复选框。如果选中，我希望显示所有列。如果未选中，我需要它只显示“每周”类列。**我想使用尽可能少的 JavaScript（如果有的话）并且需要跨浏览器兼容**。

```
 <table>
   <tr class="weekly">
     <td></td>
   </tr>
   <tr class="overall">
     <td></td>
   </tr>
 </table>
 <input type="checkbox" name="data" value="Show Overall Data"  /> 
```

简而言之，我需要一个表格来隐藏和显示某些列，具体取决于复选框的状态。

另外，我不擅长编码，所以我需要有人粘贴整个代码，包括 HTML 标签等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:48:48.230

Javascript

```
function check()
{

  if(document.getElementById("weekly").style.display == "none")
    document.getElementById("weekly").style.display = "block";
  else
    document.getElementById("weekly").style.display = "none";
  if(document.getElementById("overall").style.display == "block")
   document.getElementById("overall").style.display = "none";
  else
   document.getElementById("overall").style.display = "block";

} 
```

和 HTML

```
<table>
   <tr class="weekly" id="weekly" style="display:none">
     <td>ABBB</td>
   </tr>
   <tr class="overall" id="overall" style="display:none">
     <td>BCC</td>
   </tr>
 </table>
<input type="checkbox" name="data" value="Show Overall Data" onclick="check()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:32:10.083

已编辑：此处为完整的 html。使用 jQuery

```
<html>
<head>
<script type="text/javascript" src="jquery.min.js"></script>
<script>

$(document).ready(function(){

if ($("input:checkbox").is(":not(:checked)")){
    $('tr').hide();
   $('tr.weekly').show();
}

});
</script>
</head>
<body>
<input type="checkbox" name="data"/>

<table>
   <tr class="weekly">
     <td>WEEEKLY</td>
   </tr>
   <tr class="overall">
     <td>OVERLLL</td>
   </tr>
 </table>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T04:32:42.560

使用 jQuery

```
$(document).ready(function () {
    $('.overall').hide();
}); 

$("#data").is(':checked')
    ? $(".overall").show() 
    : $(".overall").hide(); 
```

将名称 =“数据”更改为 Id =“数据”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T04:57:41.710

基于@anu 在较早的 stackoverflow 答案中指出的示例，这是 jsbin 中的一个实时示例。

[http://jsbin.com/ehodul/4/edit#javascript,html,live](http://jsbin.com/ehodul/4/edit#javascript,html,live)

下面是（大部分）代码，但我再次鼓励您修改 jsbin 上的示例。

```
<!DOCTYPE html>
<html>
<head>
<script class="jsbin" src="jquery.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  table { padding: 0; border-collapse: collapse; }
  table th { background-color: #eee; }
  table td, th { border: 1px solid #d7d7d7; padding: 7px; }
</style>
</head>
<body>

<select id="myOptions">
  <option value="1">hide col 1</option>
  <option value="2">hide col 2</option>
  <option value="3">hide col 3</option>
  <option value="4">hide col 4</option>
</select>  

  <p>&nbsp;</p>

<table id="myTable" cellspacing="0" cellpadding="0">
  <thead>
    <tr>
      <th>col 1</th>
      <th>col 2</th>
      <th>col 3</th>
      <th>col 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1abcdefg</td>
      <td>2abcdefg</td>
      <td>3abcdefg</td>
      <td>4abcdefg</td>
    </tr>
    <tr>
      <td>1abcdefg</td>
      <td>2abcdefg</td>
      <td>3abcdefg</td>
      <td>4abcdefg</td>
    </tr>
    <tr>
      <td>1abcdefg</td>
      <td>2abcdefg</td>
      <td>3abcdefg</td>
      <td>4abcdefg</td>
    </tr>
    <tr>
      <td>1abcdefg</td>
      <td>2abcdefg</td>
      <td>3abcdefg</td>
      <td>4abcdefg</td>
    </tr>
  </tbody>
  </table>  

  <script type="text/javascript">
function hideColumn(columnIndex) {
   $('#myTable thead th, #mytable tbody td').show();
   $('#mytable thead th:nth-child('+(columnIndex)+'), #mytable tbody td:nth-child('+(columnIndex)+')').hide();

}

    $("#myOptions").change(function() {
      selectedVal = $(this).val();
      console.log(selectedVal);
      hideColumn( selectedVal );
    });

  </script>
</body>
</html> 
```

# htmlpurifier - 如何配置 HTML 净化器以允许锚点 href 值中的“callto:123”？

> ID：10458783
> 
> 赞同：3
> 
> 时间：2012-05-05T04:14:30.853
> 
> 标签：htmlpurifier

有人可以指出我需要什么来允许这样的锚标记通过 htmlpurifier，不受影响？：

```
<a href="callto:+1-800-555-1212" class="callUsBtn" style="">...</a> 
```

用我的配置。设置，该`callto:...`值不被识别为允许，因此整个`href`属性被剥离。我想我需要覆盖值的*类型*（<-- 或者叫什么？）`href`，从`URI`到`CDATA`（？），但不知道如何。我希望有一种比这里找到的方向更快/更简单的方法：http: [//htmlpurifier.org/docs/enduser-customize.html](http://htmlpurifier.org/docs/enduser-customize.html)（即使这样会导致解决方案？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:30:18.887

感谢爱德华的回答，我得到了它的工作。

试试这个：

在你相当于这里：
`/htmlpurifier-4_4_0/library/HTMLPurifier/URIScheme/`

添加一个名为：`callto.php`
...包含以下内容的文件：

```
<?php

// replicated this class/file from '../htmlpurifier-4_4_0/library/HTMLPurifier/URIScheme/mailto.php'

// VERY RELAXED! Shouldn't cause problems, ... but be careful!

/**
 * Validates 'callto:' phone number in URI to included only alphanumeric, hyphens, underscore, and optional leading "+"
 */

class HTMLPurifier_URIScheme_callto extends HTMLPurifier_URIScheme {

    public $browsable = false;
    public $may_omit_host = true;

    public function doValidate(&$uri, $config, $context) {
        $uri->userinfo = null;
        $uri->host     = null;
        $uri->port     = null;

        /* notes:
            where is the actual phone # parked?  Answer in $uri->path.  See here:

            echo '<pre style="color:pink;">';
            var_dump($uri);
            echo '</pre>';

            object(HTMLPurifier_URI)#490 (7) {
              ["scheme"]=>
              string(6) "callto"
              ["userinfo"]=>
              NULL
              ["host"]=>
              NULL
              ["port"]=>
              NULL
              ["path"]=>
              string(15) "+1-800-555-1212"
              ["query"]=>
              NULL
              ["fragment"]=>
              NULL
            }
        */

        // are the characters in the submitted <a> href's (URI) value (callto:)  from amongst a legal/allowed set?
            // my legal phone # chars:  alphanumeric, underscore, hyphen, optional "+" for the first character.  That's it.  But you can allow whatever you want.  Just change this:
            $validCalltoPhoneNumberPattern = '/^\+?[a-zA-Z0-9_-]+$/i'; // <---whatever pattern you want to force phone numbers to match
            $proposedPhoneNumber = $uri->path;
            if (preg_match($validCalltoPhoneNumberPattern, $proposedPhoneNumber) !== 1) {
                // submitted phone # inside the href attribute value looks bad; reject the phone number, and let HTMLpurifier remove the whole href attribute on the submitted <a> tag.
                return FALSE;
            } else {
                // submitted phone # inside the href attribute value looks OK; accept the phone number; HTMLpurifier should NOT strip the href attribute on the submitted <a> tag.
                return TRUE;
            }
    }

} 
```

...并且不要忘记更新您的 HTMLpurifier 配置。从默认值开始，包括以下内容：

```
$config->set('URI.AllowedSchemes', array ('http' => true, 'https' => true, 'mailto' => true, 'ftp' => true, 'nntp' => true, 'news' => true, 'callto' => true,)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T08:19:37.557

您需要实施一个新的`HTMLPurifier_URIScheme`. 中有大量示例`library/HTMLPurifier/URIScheme`，使用常规配置很容易添加自定义 URI 方案。

# nsstring - 我需要从一个类中返回多个字符串

> ID：10458788
> 
> 赞同：0
> 
> 时间：2012-05-05T04:15:31.953
> 
> 标签：nsstring, return-value, objective-c-2.0

我有代码，其中有问题的类从服务器获取数据，并解析它，结果是两个字符串。我需要返回两个 NSString，但由于 NSString 类型，大多数尝试都有问题。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:22:17.697

返回一个数组，第一个字符串在索引 0 处，第二个在索引 1 处。

# java - Netbeans JDialog 大小

> ID：10458796
> 
> 赞同：3
> 
> 时间：2012-05-05T04:17:37.840
> 
> 标签：java, swing, user-interface, netbeans, ide

我正在使用 netbeans 作为我的 IDE 创建一个 JDialog。我在netbeans中将大小更改为我想要的大小，我可以看到它更新了prefferredSize，但是当我运行我的应用程序时，它看起来像这样：

![在此处输入图像描述](../Images/d180852af1a57981826f809ad80e019f.png)

我还需要设置其他东西来设置大小吗？或者至少使其尺寸合适，以便我可以看到控件...（上面有 6 个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:20:52.290

在表单设计器中切换到属性窗口的“代码”选项卡。有一个名为“表单大小策略”的属性。

这默认为 pack() ，这意味着对话框的大小被调整为与包含的组件需要的一样大。有关更多详细信息，请阅读 pack() 方法的 Javadocs。在不知道您在对话框中放置了哪些组件的情况下，很难说出为什么 pack() 不适合您。

如果您将其更改为“生成调整大小代码”，对话框将坚持您定义的大小：

![在此处输入图像描述](../Images/a7b46b455d7b1aa9d25b71c379a76e18.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T06:43:02.347

我猜您可能正在使用 Netbeans GUI 构建器，可能的解决方案/建议，

1.  你可能会失踪 `dialog.pack();`
2.  右键单击 jDialog > Properties > (Set) minimumSize
3.  （建议）放弃 GUI Builder，学习 Java 而不是学习 IDE！

顺便说一句，这对我有用，

```
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class DialogsTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame();

                f.setSize(400, 300);
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setVisible(true);

                JPanel message = new JPanel();
                message.add(new JLabel("This is a dialog :)"));
                JDialog dialog = new JDialog(f, "Dialog");

                dialog.setContentPane(message);
                dialog.pack();
                dialog.setLocationRelativeTo(f);
                dialog.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T11:48:23.787

[从https://netbeans.org/downloads/](https://netbeans.org/downloads/)下载最新的 Netbean IDE

并设置以下属性：[![Jframe 属性](../Images/4f8db10d21ec196aa7759e0b6ff78768.png)](https://i.stack.imgur.com/8HQNk.png)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T04:37:02.587

请改用该`setSize()`方法。出于某种原因，这有效，但`setPreferredSize()`没有（至少不像预期的那样）。

顺便说一句，通常建议不要在组件上设置特定大小。

# visual-studio-2010 - 使用openGL将Visual Studio设置为Windows子系统？

> ID：10458798
> 
> 赞同：1
> 
> 时间：2012-05-05T04:17:55.400
> 
> 标签：visual-studio-2010, opengl

如何设置我的项目以便它打开一个窗口而不是控制台？

```
#include <GL\glew.h>
#include <GL\glfw.h>

int main()
{
    glfwInit();
    glfwOpenWindow(0, 0, 0, 0, 0, 0, 0, 0, GLFW_WINDOW);
    glfwTerminate();
    return 0;
} 
```

此代码打开一个窗口，但它也打开一个控制台，如何设置我的项目以便只出现窗口？使用 VS 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:28:56.320

在这里查看我的答案：[https ://stackoverflow.com/a/6882500/524368](https://stackoverflow.com/a/6882500/524368)

（逐字引用）：

* * *

在项目构建链接器选项集中

```
/SUBSYSTEM:windows
/ENTRY:mainCRTStartup 
```

或者在源文件中使用以下*#pragma*`int main(...)`

```
#pragma comment(linker, "/SUBSYSTEM:windows /ENTRY:mainCRTStartup") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:22:57.987

当您有一个名为 的函数时，链接器会自动假定您要使用控制台子系统`main`。一些明显（但未经测试）的可能性是：

1.  使用名为 WinMain 的入口点
2.  明确指定`-subsystem:windows`给链接器
3.  (1|2) 使用完全不同的入口点，告诉链接器入口点和子系统。

# performance - 高性能 IIS 的最佳实践/工具？

> ID：10458805
> 
> 赞同：-2
> 
> 时间：2012-05-05T04:19:35.073
> 
> 标签：performance, iis, webserver, scalability

最近我遇到了高性能的 Web 服务器 nginx。

我想知道，就性能而言，IIS 站在哪里？

为托管在 IIS 上的 Web 应用程序提高 IIS 7 / 7.5 性能的工具/最佳实践是什么。

Apache、nginx 或 IIS 等 Web 服务器在性能方面发挥着重要作用，这肯定会帮助开发人员了解为可扩展的 Web 应用程序选择正确的 Web 服务器有多重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:50:48.590

在 Apache/Nginx 和 IIS 之间进行有意义的基准测试/比较非常困难，但如果您真的关心 ASP.NET/IIS 性能，那么这是一个好的开始：[第 6 章 — 提高 ASP.NET 性能](http://msdn.microsoft.com/en-us/library/ff647787.aspx)。

实际上，与简单地调整 IIS 相比，分析您的应用程序/解决应用程序中的性能问题并正确使用缓存可能会带来更大的性能提升。

# asp.net-mvc-3 - 通过表单将复杂类型从部分视图传递到控制器操作

> ID：10458812
> 
> 赞同：1
> 
> 时间：2012-05-05T04:20:15.280
> 
> 标签：asp.net-mvc-3, forms, razor, partial-views, form-submit

所以，我正在使用 ASP.NET MVC 开发一个新项目。老实说，我之前对它（或任何 Web 开发）没有太多经验，所以这可能是一个简单的问题。

我有一个局部视图，它是一个在各种 Web 视图之间共享的搜索框。该视图有一个下拉列表和一个文本框。`SearchFilterModel`一旦用户发布表单（使用搜索按钮），我需要该值作为对象到达搜索控制器的索引操作。

现在，表单正在调用 Search 控制器上的 index 操作。这是有效的（见附件代码）。但问题是，索引方法的 id 参数（必须是 a `SearchFilterModel`）没有到达（它为空）。

我不知道如何将对象从表单传递到控制器。¿ 我做错了什么？

问题是如果我替换`new { id = search }`为`new { id = "something" }`（更改发送参数的类型，然后一个字符串到达​​（它有效）或者如果我写然后一个 int 到达。我想有一些与不是本机类型`new { id = 1 }`的东西相关的东西，而是`SearchFilterModel`复杂的。

任何的想法？

```
@using Hermes.Models.Helpers

@{
    var search = CacheHelper.Instance.SearchFilter;
    using (Html.BeginForm("Index", "Search", new { id = search  }, FormMethod.Post))
    {
        @Html.ValidationSummary(true, "No se creó la cuenta. Corrija los errores e inténtelo de nuevo.")
        <div>
            <fieldset>
                <legend>Búsqueda por tipo de producto</legend>

                <div class="editor-label">
                    @Html.LabelFor(s => search.SearchFilter)
                    &nbsp;&nbsp;&nbsp;
                    @Html.DropDownListFor(s => search.SelectedSearchFilter, new SelectList(search.SearchFilter))
                    &nbsp;&nbsp;&nbsp;
                    @Html.LabelFor(s => search.SearchQuery)
                    &nbsp;&nbsp;&nbsp;
                    @Html.TextBoxFor(s => search.SearchQuery)
                    @Html.ValidationMessageFor(s => search.SearchQuery)
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="submit" value="Buscar" />
                </div>
            </fieldset>
        </div>
    }
} 
```

搜索控制器的索引操作

```
[HttpPost]
        public ActionResult Index(SearchFilterModel id)
        {
            var x = CacheHelper.Instance.SearchFilter;

            ViewBag.Filter = id.SelectedSearchFilter;
            ViewBag.msg = String.Format("Se están buscando {0}, con el filtro {1}", id.SelectedSearchFilter, id.SearchQuery);
            ViewBag.ResultsCount = 0;

            return View();
        } 
```

搜索过滤器模型

```
public class SearchFilterModel
{
    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "¿Qué características?")]
    public string SearchQuery { get; set; }

    [Required]
    [DataType(DataType.Text )]
    [Display(Name = "¿Qué buscar?")]
    public List<String> SearchFilter { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "¿Qué buscar?")]
    public string SelectedSearchFilter { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:18:36.720

您必须构建一个语法与类定义匹配的 JSON，然后将此数据发送到您的操作，MVC 应该处理 JSON 到您的类的转换，或者您可以使用类的`Deserialize`方法`JavaScriptSerializer`并将对象创建为字符串.

因此，将事件处理程序绑定到您的提交函数，然后使用一些 ajax api 来发送数据。下面是一个使用 jquery 的例子：

```
var searchFilter=[];
for each( value in the dropdown)
   searchFilter.push(value);

var searchFilterModel={
SearchQuery: "value1", //get the data from the textbox
SelectedSearchFilter: "value2", //get the value from dom
SearchFilter: searchFilter
}

$.ajax(
{
url: url //your action method
data: {
SearchFilterModel:searchFilterModel
},
success:function(){} //callback function
}) 
```

动作签名保持不变。

并使用 JavaScriptSerializer 方法：

```
var searchFilter=[];
for each( value in the dropdown)
   searchFilter.push(value);

var searchFilterModel={
SearchQuery: "value1", //get the data from the textbox
SelectedSearchFilter: "value2", //get the value from dom
SearchFilter: searchFilter
}

$.ajax(
{
url: url //your action method
data: {
id1: searchFilterModel
},
success:function(){} //callback function
})

[HttpPost]   
public ActionResult Index(string id1)
{
var id=new JavaScriptSerializer().Deserialize<SearchFilterModel>(id1);
var x = CacheHelper.Instance.SearchFilter;
ViewBag.Filter = id.SelectedSearchFilter;
ViewBag.msg = String.Format("Se están buscando {0}, con el filtro {1}", id.SelectedSearchFilter, id.SearchQuery);
ViewBag.ResultsCount = 0;
return View();
} 
```

让我知道这是否适合你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:03:11.390

使用表单发布复杂对象时，属性“名称”与对象属性匹配很重要。

通过使用`@Html.TextBoxFor(s => search.SearchQuery)` mvc 将为您创建必要的属性。

并且您应该替换表单标签，因为表单包含创建对象所需的信息`using (Html.BeginForm("Index", "Search", FormMethod.Post))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:52:26.150

所有发布的答案都不起作用，所以最终解决方案是：

在“主页”控制器（其视图呈现“搜索”部分视图）中，我声明了一个新实例`SearchViewModel`，将其传递给“主页”视图（通过`ViewBag`）在“主页”视图上恢复它并将其传递给通过`Render`方法“搜索”部分视图：

```
SearchFilterModel searchFilter = ViewBag.SearchFilter;
@Html.Partial("SearchProduct", searchFilter) 
```

现在，在“搜索”视图中，像往常一样声明 Begin 表单，现在它可以完美运行了。（对我来说）问题似乎与对象的生命周期有关（在我的问题和我最初的尝试中，我试图在表单之前声明它，在我看来，这是不可能的） . 现在，它工作得很好，但我担心这样做对性能的影响。任何建议将不胜感激。

# c# - 简单的 LINQ to XML 查询不起作用

> ID：10458815
> 
> 赞同：1
> 
> 时间：2012-05-05T04:21:34.717
> 
> 标签：c#, xml, performance, linq

这有效，但很慢，

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static List<string> GetNames(string prefixText, int count)
 {
    XmlDocument xmlArtist = new XmlDocument();
    xmlArtist.Load(string.Format(" http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key={0}&limit=100", key));
    List<string> topartists = new List<string>();
    foreach (XmlNode node in xmlArtist.SelectNodes("lfm/artists/artist"))
    {
        string a = node.SelectSingleNode("name").InnerText.ToString();
        if (a.Contains(prefixText))
        {
            topartists.Add(a);
        }

    }

    return topartists; 
```

我想把它变成一个 LINQ 查询来加快速度，我有一段时间没有使用 LINQ 并且查看了很多示例，但无法弄清楚为什么这不起作用。

```
 [System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static List<string> GetNames(string prefixText, int count)
 {
     List<string> topartists = new List<string>();
     XElement element = XElement.Load("http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=...&limit=100");
     IEnumerable<XElement> artists =
     from el in element.Elements("artist")
     where el.Element("name").Value.Contains(prefixText)
     select el;
     foreach (XElement el in artists)
         topartists.Add(el.Value);
     return topartists; 
```

这是我使用的 XML 的一部分：

```
 <lfm status="ok">
   <artists page="1" perPage="100" totalPages="10" total="1000">
    <artist>
     <name>Coldplay</name> 
     <playcount>849564</playcount> 
     <listeners>124389</listeners> 
     <mbid>cc197bad-dc9c-440d-a5b5-d52ba2e14234</mbid> 
     <url>http://www.last.fm/music/Coldplay</url> 
     <streamable>1</streamable> 
     <image size="small">http://userserve-ak.last.fm/serve/34/214667.png</image> 
     <image size="medium">http://userserve-ak.last.fm/serve/64/214667.png</image> 
     <image size="large">http://userserve-ak.last.fm/serve/126/214667.png</image> 
     <image size="extralarge">http://userserve-ak.last.fm/serve/252/214667.png</image> 
     <image size="mega">http://userserve-ak.last.fm/serve/_/214667/Coldplay.png</image> 
   </artist>
      <artist>
        <name>Radiohead</name> 
        <playcount>960812</playcount> 
        <listeners>104849</listeners> 
        <mbid>a74b1b7f-71a5-4011-9441-d0b5e4122711</mbid> 
        <url>http://www.last.fm/music/Radiohead</url> 
        <streamable>1</streamable> 
        <image size="small">http://userserve-ak.last.fm/serve/34/24688757.png</image> 
        <image size="medium">http://userserve-ak.last.fm/serve/64/24688757.png</image> 
        <image size="large">http://userserve-ak.last.fm/serve/126/24688757.png</image> 
        <image size="extralarge">http://userserve-ak.last.fm/serve/252/24688757.png</image> 
        <image size="mega">http://userserve-ak.last.fm/serve/_/24688757/Radiohead.png</image> 
      </artist>
      <artist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:26:20.857

`Elements()`只返回你的直接子元素，但你的根元素是`lfm`，所以你唯一的子元素是`artists`不匹配“艺术家”的 - 所以没有匹配的元素。您可以像这样修复您的查询：

```
IEnumerable<XElement> artists =
     from el in element.Element("artists").Elements("artist")
     where el.Element("name").Value.Contains(prefixText)
     select el; 
```

我怀疑这个 Linq to XML 查询会比你以前的查询快得多，因为它本质上是在做同样的工作。

# android - 如何将包存储在数据库 blob 中？

> ID：10458817
> 
> 赞同：2
> 
> 时间：2012-05-05T04:21:57.900
> 
> 标签：android, database, bundle

我一直在谷歌搜索一种将 a`bundle`转换为适合作为`BLOB`类型存储在数据库中的字符串的方法。我发现了很多将其序列化为文件的示例，但没有提及如何将其放入字符串或字节数组中。谁能给我一个例子来说明这是如何做到的？

我正在开发一个应用程序，该应用程序将插件用于自定义 UI 组件，并希望在插件中调用配置活动，传递存储在数据库中的一组配置选项。该活动将返回带有更新选项的捆绑包，然后我需要将其保存回数据库。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:51:32.847

您的第一步是创建一个表来放置它。在这种情况下，应该做一些基本的事情。

```
CREATE TABLE bundles (
    _id INTEGER PRIMARY KEY AUTOINCREMENT, 
    name TEXT, 
    value BLOB); 
```

然后，您将需要一种插入 的方法`Bundle`，如下所示：

```
private void put(SQLiteDatabase db, String name, Bundle bundle) {
    ByteArrayOutputStream valueStream = new ByteArrayOutputStream();
    try {
        ContentValues rows = new ContentValues();
        rows.put("name", name);
        Parcel p = Parcel.obtain();
        bundle.writeToParcel(p, 0);

        valueStream.write(p.marshall());
        rows.put("value", valueStream.toByteArray());

        db.insert("bundles", null, rows);   

        valueStream.close();
    } catch (IOException e) {       
        Log.e("error writing object", e.toString());
    }
} 
```

# python - 列表修改如何在python中工作

> ID：10458818
> 
> 赞同：1
> 
> 时间：2012-05-05T04:21:58.040
> 
> 标签：python, list

我有 10 个元素的列表，其中包含 2 个元素的元组，我想为每个元组添加一个值，但是当我编写以下代码时，似乎计算了累积总和。这是怎么回事。请帮忙

```
# -*- coding: utf-8 -*-
i=0
k=10
count=[]
value=[1,2]
while i < k:
  count.append(value)
  i=i+1
t=[10,2]
i=0
#for item in count:
  #print item
while i <(len(count)):
  count[i][0]+=t[0];
  count[i][1]+=t[1];
  i+=1;

for item in count:
  print item 
```

outpus 即将出现

```
[101, 22]
[101, 22]
[101, 22]
[101, 22]
[101, 22]
[101, 22]
[101, 22]
[101, 22]
[101, 22]
[101, 22] 
```

正如我所期望的那样

```
[11, 4]
[11, 4]
[11, 4]
[11, 4]
[11, 4]
[11, 4]
[11, 4]
[11, 4]
[11, 4]
[11, 4] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:35:09.873

那是因为您实际上有一个包含十个对相同（单个）2 项列表的引用的列表。您在第二个循环中重复添加到同一个列表。你真的想要一个子列表的新实例（你真正拥有的是一个可变列表，而不是一个元组）。

你可以这样做：

```
while i < k:
  count.append(value[:])
  i=i+1 
```

获取嵌入列表的新副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T04:28:23.963

尝试这个：

```
i=0
k=10
count=[]

while i < k:
  count.append([1,2])
  i=i+1

t=[10,2]
i=0

while i <(len(count)):
  count[i][0]+=t[0];
  count[i][1]+=t[1];
  i+=1;

for item in count:
  print item 
```

问题出在这一行：`count.append(value)`，您正在向列表添加相同*的*可变引用，并一遍又一遍地更新它。`[1, 2]``count`

通过用您替换该行，`count.append([1,2])`确保每次添加一个新的、不同的列表。

顺便说一句，您没有在代码中的任何地方使用元组（如问题中所述），而只是列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T04:44:05.760

问题在于python如何使用内存，每次将值附加到计数时，实际上都是在附加对值的内存位置的引用。发生的事情是 t[0] 每次循环时都会被添加到 value[0] 中。请参阅下面的操作（与您使用的设置相同）

```
n [54]: for i, item in enumerate(count):
print count[i];
count[i][0] += t[0]
print count[i]
....:     
[1, 2]
[11, 2]
[11, 2]
[21, 2]
[21, 2]
[31, 2]
[31, 2]
[41, 2]
[41, 2]
[51, 2]
[51, 2]
[61, 2]
[61, 2]
[71, 2]
[71, 2]
[81, 2]
[81, 2]
[91, 2]
[91, 2]
[101, 2] 
```

相反，您想要的输出仅附加列表对象本身 [1,2] 而不将其分配给变量。

此外， enumerate() （python 内置）在循环中生成索引号和项目，因此您不必在任何地方都使用 while。

# database - “数据库引擎”和“查询引擎”有什么区别？

> ID：10458824
> 
> 赞同：2
> 
> 时间：2012-05-05T04:22:26.427
> 
> 标签：database

从我不断阅读这两个术语的上下文来看，它们似乎是等效的。但是，有谁知道两者在使用方式和设计方式上是否存在显着差异？

关于这些如何适合新手/新手的“DBMS”和“数据库”概念的额外背景也将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-01T15:36:43.137

在我脑海里 ：

查询可以要求数据、操作或其他，并且可以有多种形式（SQL、JSON、自定义语言......）。因此，查询是软件中用户/后端请求的消息。

数据库存储您的数据并处理呈现数据的请求。现在每个现有的数据库都有一个引擎来处理这些请求，所以他们有一个查询引擎，它是整个数据库引擎的一部分，称为 DBMS；但在这里，它只会响应正确的数据查询（SQL 或 JSON，取决于数据库）。

但是可以完全实现一个查询引擎来响应其他类型的查询；例如，您想将结果呈现给您设计的计算查询......您需要一个引擎来处理已发送的查询，计算结果并将其发送回任何要求它的实例。

# c++ - 将随机数插入到数组中，其中每个值都通过 for 循环输入

> ID：10458836
> 
> 赞同：0
> 
> 时间：2012-05-05T04:25:11.657
> 
> 标签：c++, arrays, random, for-loop, cout

```
//Encryption of pass-phrase
char passReverse(char usrPass[]){
    char newPass[pSize];
    int value;
    int randNum;
    int rand_NumOut;

    //Random number generation
    srand(time(0));
    randNum = rand();
    rand_NumOut = ((randNum %12)+2);
    //Reversing array for-loop
    for (int i=0; i<pSize && usrPass[i] != '\0'; i++){
        char letter = usrPass[i];
        newPass[i] = letter;
        int maxVal = strlen(usrPass);
        if (maxVal >=0){
            newPass[i] = usrPass[(maxVal-1)-i];
        }
        cout << newPass[i];
        value = i;
    }
    return value;
} 
```

理想情况下，`rand_NumOut`将在最后一个循环之后立即放置在 newPass[] 中。

我遇到的问题是，当放在`for`-loop 中时，当然`rand_NumOut`是放在数组中的每个 char 之后，而在循环之外，我不能将它放在数组的内容中。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:51:23.040

有更好的反转字符串的方法，但除此之外，`newPass`当您返回 的长度时，您将在函数末尾丢弃，因此您不附加到数组`usrPass`并不重要。`rand_NumOut``char`

如果您只想将随机数发送到标准输出，请在语句`cout << rand_NumOut;`之前添加。`return`

也许更好的方法是使用 C++ 的`std::string`类：

```
#include <cstdlib>
#include <ctime>
#include <iostream>
#include <sstream>

std::string passReverse(const std::string& userPass)
{
    srand(time(0));
    const int randNum = rand();
    const int rand_NumOut = randNum % 12 + 2;

    std::string reversed(userPass.rbegin(), userPass.rend());

    std::ostringstream oss;
    oss << reversed << rand_NumOut;
    return oss.str();
}

int main()
{
    std::cout << passReverse("password") << std::endl;
} 
```

[看它跑！](http://ideone.com/btWRl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:50:40.057

在**for**循环的末尾只需添加行

```
if(usrPass[i+1]=='\0')
{
//code to insert rand_NumOut
//output rand_NumOut
} 
```

# java - Java无参数构造函数：抛出不可能的异常，或者有空的catch块？

> ID：10458838
> 
> 赞同：4
> 
> 时间：2012-05-05T04:25:26.060
> 
> 标签：java, exception, constructor

无参数构造函数抛出一个不可能的异常或有一个空的 catch 块更好吗？假设我有这样的课程。

```
public class Foo {
    private int num;
    private String numString;

    public Foo() throws NumberFormatException {
        setNum("1");
    }

    public void setNum(String s) throws NumberFormatException {
        // In reality, complex code goes here
        num = Integer.parseInt(s);
        numString = s;
    }
} 
```

编译器强制构造函数要么抛出 NumberFormatException （这永远不会发生），要么有一个 try/catch 块。但是，有一个空的 catch 块是否正确，这通常是不受欢迎的？

```
public Foo() {
    try {
        setNum("1");
    } 
    catch (NumberFormatException e) { }
} 
```

请注意， Foo 将是一个库类，其他人会使用它，所以让一个无参数构造函数抛出一个不可能的异常会令人困惑。另请注意，真正的异常是自定义异常，而不是 NumberFormatException，这可能会使库用户更加困惑，他们可能会觉得他们必须在不需要时阅读自定义异常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T04:32:57.620

`NumberFormatException`是 a `RuntimeException`，所以你不需要在你的`throws`子句中列出它——只要假装它不存在。这适用于方法和构造函数。

`RuntimeException`（包括其自身）的任何子类`RuntimeException`都是“未经检查的异常”，这意味着编译器不会强制您在 try/catch 子句中检查它。相反，任何`Exception`不是其子类的东西`RuntimeException`都可以很容易地称为受检异常。

如果它*是*一个已检查异常（即，不是 的子类`RuntimeException`），但您确定永远无法触发它，那么捕获它是安全的。与其完全吞下它，不如将它包裹在一个未经检查的异常周围。

```
try {
    thisCodeCanNeverThrowAnIOException();
}
catch (IOException e) {
    throw new AssertionError(e); // juuust in case!
} 
```

现在您的代码可以编译，没有`throws`针对您从未期望抛出的异常的子句，但是如果由于某些错误或将来的更改，该异常最终确实被抛出，则不会隐藏严重错误。

（阅读评论的人请注意：我最初在代码示例中使用`throw new RuntimeException(e)`，但 Stephen C 和 Peter Lawrey 指出，在 Java 1.4.2 和更新版本中，AssertionError 更好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:29:29.003

既然 s 必须是一个数字，为​​什么不通过 setNum() 而不是当前字符串传递一个整数？整数始终可以解析为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T04:43:02.903

我想说这取决于您的业务关怀或个人编码风格，如果您选择抛出异常，则拥有和包装的异常可能会更好，如果您传入的参数不正确或没有意义，您可以抛出现在例外。

无论 NumberFormatException 必须抛出什么，这都是你在哪里抓住它的一个公正的决定。它可能在您的库类中，或者在调用者类中，或者在您不知道的地方。没有它，程序将关闭。

在您的情况下，您是否将无编号字符串视为合法值，如果是，则您有责任将异常保留在您的包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:53:44.917

我会说：永远不要有一个空的 catch 块（无论如何）。正如@yshavit 指出的那样，吞下可能的错误并不是一个好习惯。

正如@stephen-c 所说，使用断言是向前迈出的一步，但该解决方案有两个缺点：

1.  也许断言没有在“操作/生产”服务器上启用，所以你真正拥有的非常类似于一个空的 catch 块
2.  如果它们在服务器上启用，则在执行这段代码期间出现错误将表明您的应用程序中存在错误，只要它是不期望出现的东西（“这不应该发生”，但它发生了！所以...)

所以我的建议是@yshavit 提案。

# android - TextView 选取框不起作用

> ID：10458844
> 
> 赞同：2
> 
> 时间：2012-05-05T04:27:02.000
> 
> 标签：android, textview, marquee

我已经尝试了所有，我能想到的让这个选框效果起作用。这是我的xml：

```
<TextView android:id="@+id/curPlaying"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:ellipsize="marquee"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:marqueeRepeatLimit ="marquee_forever"
    android:focusable="true"
    android:focusableInTouchMode="true" 
    android:textColor="#83A602"
    android:textSize="20dp"
    android:text="Nothing Loaded" /> 
```

我将它设置为在代码中选择。我认为它可能不起作用的唯一原因是代码以相对频繁的间隔修改了文本。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:52:42.740

嗨，请尝试下面的代码，它对我来说工作正常......

```
<TextView
            android:id="@+id/mywidget"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:lines="1"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:text="Simple application that shows how to use marquee, with a long text"
            android:textColor="#ff4500" /> 
```

* * *

```
TextView tv = (TextView) this.findViewById(R.id.mywidget);
        tv.setSelected(true); // Set focus to the textview 
```

它正在我的三星 Galaxy ACE 手机上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:48:34.547

您可以查看[**Android 1.1R1 中 TextView 的 Marquee 功能**](http://bear-polka.blogspot.in/2009/03/marquee-feature-of-textview-in-android.html)，它解释了 marquee 在工作中可能出现问题的某些方式。[**ScrollTextView - 为 Android 滚动 TextView**](http://bear-polka.blogspot.in/2009/01/scrolltextview-scrolling-textview-for.html)可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-09T15:12:49.590

如果`TextView`填充整个宽度，您需要添加这些代码行

```
<TextView
    .
    .
    android:singleLine="true"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    /> 
```

也不要忘记设置选择`TexrtView`如下

```
textview.setSelected(true); 
```

如果`TextView`不填充宽度，唯一的就是调用这个方法并传递`TextView`给它。

```
 fun addMarquee(textView: TextView) {
    textView.viewTreeObserver.addOnGlobalLayoutListener(object :
        ViewTreeObserver.OnGlobalLayoutListener {
        override fun onGlobalLayout() {
            val pixels = textView.measuredWidth - 1
            val params = textView.layoutParams
            params.width = pixels
            textView.layoutParams = params
            textView.isSelected = true
            textView.ellipsize = TextUtils.TruncateAt.MARQUEE
            textView.isSingleLine = true
            textView.marqueeRepeatLimit = -1
            textView.viewTreeObserver.removeOnGlobalLayoutListener(this)
        }
    })
} 
```

**注意：**此方法仅在 textView 宽度为`wrap_content`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-28T11:11:10.030

我发帖是因为没有可接受的答案......并帮助未来访问 Stack Overflow 寻求答案的访客。

```
 public class AlwaysMarqueeTextView extends TextView {

  public AlwaysMarqueeTextView(Context context) {
  super(context);
  }

  public AlwaysMarqueeTextView(Context context, AttributeSet attrs) {
  super(context, attrs);
  }

  public AlwaysMarqueeTextView(Context context, AttributeSet attrs, int defStyleAttr) {
  super(context, attrs, defStyleAttr);
  }

  @TargetApi(Build.VERSION_CODES.LOLLIPOP)
  public AlwaysMarqueeTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
  super(context, attrs, defStyleAttr, defStyleRes);
  }

  @Override
  public boolean isFocused() {
  return true;
  }
  } 
```

**活动.xml**

```
<ivar.kov.util.textViewUtil.AlwaysMarqueeTextView
  android:id="@+id/artist_tv2"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:ellipsize="marquee"
  android:focusable="true"
  android:focusableInTouchMode="true"
  android:marqueeRepeatLimit="marquee_forever"
  android:scrollHorizontally="true"
  android:singleLine="true"
  android:text="@string/appbar_scrolling_view_behavior"/> 
```

# perl - 运行 perl 源

> ID：10458847
> 
> 赞同：0
> 
> 时间：2012-05-05T04:27:34.670
> 
> 标签：perl

> **可能重复：**
> [安装缺少的 Perl 模块的最简单方法是什么？](https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module)

我下载了 perl 脚本的[源代码](https://dev.mobileread.com/trac/mobiperl/wiki) 。但是，当我尝试运行它时，它给了我以下错误：

```
Can't locate Palm/PDB.pm in @INC (@INC contains: /root/Desktop /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .) at /etc/perl/MobiPerl/MobiFile.pm line 3.
BEGIN failed--compilation aborted at /etc/perl/MobiPerl/MobiFile.pm line 3.
Compilation failed in require at ./html2mobi line 21.
BEGIN failed--compilation aborted at ./html2mobi line 21. 
```

我可以做些什么来运行这个脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:33:31.283

您需要从 CPAN 下载正确的模块 - 在本例中为 [Palm::PDB](http://search.cpan.org/perldoc?Palm::PDB)

[这个问题](https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module)的答案解释了如何[安装缺少的 Perl 模块](https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T04:30:55.350

您将需要[`Palm::PDB`](http://search.cpan.org/perldoc?Palm%3a%3aPDB)从某个地方找到并安装该模块。它在 CPAN 上可用。

# php - PHP：如何在 foreach 循环中移动数组指针？

> ID：10458848
> 
> 赞同：6
> 
> 时间：2012-05-05T04:27:46.500
> 
> 标签：php

```
$animals = array('cat', 'dog', 'horse', 'elephant');
foreach($animals as $animal)
{
   var_dump($animal);
   next($animals);
} 
```

上面的代码输出：猫、狗、马、大象。我认为该`next`函数应该移动的内部指针`$animals`，因此，我应该得到这个输出：猫，马。

如何使 $animals 的内部指针向前（和向后）移动，使其在 foreach 中受到影响？

编辑1：

从手册：

> 由于 foreach 依赖于内部数组指针，因此在循环内更改它可能会导致意外行为。

尽管如此，我认为这是我需要做的。

编辑2：

根据“您的常识”的链接，我将对我的问题提供更详细的解释。这是一些伪代码：

```
array $foos;

start loop of $foos
 - do thing #1
 - do thing #2
 - do thing #3
 - keep doing thing #3 while the current value of $foos in the loop meets a certain criteria
loop 
```

当执行返回到循环的开头时，它应该从 #3 访问的最后一个数组继续执行。**请注意，该数组是 associative**，因此一种`for ($i = 0 ...`方法不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T20:03:57.083

您可以创建一个[`ArrayIterator`^(*Docs*)](http://php.net/ArrayIterator) 即[`seekable`^(*Docs*)](http://php.net/SeekableIterator)。

*由于它是一个迭代器，因此您可以在迭代它时*更改**位置** ，一些基本示例：

 *```
foreach ($iterator as $current) {
    $iterator->next();
} 
```

它应该提供开箱即用的一切。如果没有，您也可以将自己的需求**封装**到[`Iterator`^(*文档*)](http://php.net/class.iterator)中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T04:34:52.717

您不应该`foreach`与直接指针访问混用。如果您想在数组中移动，只需将 替换`foreach`为 C-style `for`。它在顶部更冗长，但使用与`foreach`案例相同的循环体，不同之处在于您可以使用内部指针并获得所需的结果。

```
$animals = array('cat', 'dog', 'horse', 'elephant');
for ($animal = current($animals), $index = key($animals); 
       $animal; 
       $animal = next($animals), $index = key($animals)) {
  print "$index:";
  var_dump($animal);
  next($animals);
} 
```

输出：

```
0:string(3) "cat"
2:string(5) "horse" 
```

使用直通式迭代构造非常具有误导性，例如`foreach`当您实际上在数组中来回移动时。上面的`for`循环在这方面更好，但不是很多；在`while`循环体中明确说明所有细节的循环可能是最佳选择。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-21T01:22:51.097

Mark 的解决方案非常接近，但如果数组包含像 0、false 或 "" 这样在第二个 for 循环表达式中评估为 false 的值，则会失败。

该解决方案适用于所有数组，并且更接近 for 循环的“精神”。第一个循环表达式中的 reset() 确保我们从数组的开头开始，这将是 foreach 的情况。for 循环中的第二个表达式需要评估数组指针指向的元素是否存在。如果数组指针指向数组末尾之外或数组为空，则 key() 返回 null。第三个表达式在每次迭代结束时使数组指针前进。

```
$animals = array('cat', 'dog', 'horse', 'elephant');
for (reset($animals); key($animals) !== null; next($animals)) {
    $animal = current($animals);
    var_dump($animal);
    next($animals);
} 
```

这输出：

```
string(3) "cat"
string(5) "horse" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-07T14:44:29.353

增加`&`价值

```
foreach ($variable as $key => &$value) {

} 
```

现在`$value`参考`$variable[$key]`地址

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T08:26:57.550

我认为因为他只想跳过元素，所以他可以在 foreach 中使用“继续”和 if 子句。

```
$skip=array ('dog', 'elephant');
$animals = array('cat', 'dog', 'horse', 'elephant');
foreach($animals as $animal)
{
   if (in_array($animal, $skip)) {
       continue;
   }
   var_dump($animal);
} 
```

这将输出：

```
string(3) "cat" 
string(5) "horse" 
```

没有 continue 的变体 2 具有相同的效果：

```
$skip=array ('dog', 'elephant');
$animals = array('cat', 'dog', 'horse', 'elephant');
foreach($animals as $animal)
{
   if (!in_array($animal, $skip)) {
        var_dump($animal);
   }

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-05T04:36:18.507

您不需要在 foreach 循环结束时手动增加指针 - 它会自动完成。您只需要：

```
foreach($animals as $animal) {
    var_dump($animal)
} 
```*

# javascript - 将表单输入字段加载到 javascript 数组中，然后进行验证

> ID：10458852
> 
> 赞同：0
> 
> 时间：2012-05-05T04:28:35.220
> 
> 标签：javascript, arrays, forms, validation

我似乎真的被什么东西困住了。我有一个函数来检查所有表单输入字段是否等于 null 或 "" 这一切都很好，但想看看是否有另一种方法可以通过将所有字段加载到 javascript 数组中然后执行 for 循环连同一个 if 语句来检查是否有任何字段为空，不幸的是我似乎无法让它工作，并且想知道我是否只是在某个地方错过了一些东西。这是我的代码：

```
function checkempty()
{
    fname = document.getElementById("firstname").value;
    lname = document.getElementById("lastname").value;
    fage = document.getElementById("age").value;
    addressl1 = document.getElementById("addressline1").value;
    addressl2 = document.getElementById("addressline2").value;
    ftown = document.getElementById("town").value;
    fcounty = document.getElementById("county").value;
    fpcode1 = document.getElementById("pcode1").value;
    fpcode2 = document.getElementById("pcode2").value;
    ftelephone = document.getElementById("telephone").value;
    fcomment = document.getElementById("comment").value;

    var myArray = [];
    myArray[0] = fname;
    myArray[1] = lname;
    myArray[2] = fage;
    myArray[3] = addressl1;
    myArray[4] = addressl2;
    myArray[5] = ftown;
    myArray[6] = fcounty;
    myArray[7] = fpcode1;
    myArray[8] = fpcode2;
    myArray[9] = ftelephone;
    myArray[10] = fcomment;

    for(i=0;i<myArray.length;i++)
    {
        if(!myArray[0])
        {
            return true;
        }
    }
    return false;
} 
```

然后我使用另一个功能：

```
function checkform()
{
  if(checkempty)
  {
     display_errormessage("One or more fields empty!");
  }
  else
  {
     alert("Thanks for you input!");
  }
 } 
```

display_errormessage() 函数只是将错误消息放入表单顶部的 div 中，以在表单不完整时显示错误消息。

谁能看到我哪里出错了？

提前感谢您的帮助！

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:35:54.507

`if(!myArray[0])`应该是`if(!myArray[i])`，但更重要的一点是您只是在验证该值不是假的（null、''、0、false 等），而不是它是否适合该任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:41:50.153

猜猜你不需要这个功能，因为你已经修复了你的，但我会把它留在这里，因为它将来可能会有所帮助。[JSFiddle](http://jsfiddle.net/ult_combo/XWMuK/)

```
function checkform()
{
    arr1 = document.getElementsByTagName('input');
    arr1 = Array.prototype.slice.call(arr1);
    arr2 = document.getElementsByTagName('textarea');
    arr2 = Array.prototype.slice.call(arr2);
    arrs = arr1.concat(arr2);

    for(i=0;i<arrs.length;i++)
    {
        if (arrs[i].type == "text" || arrs[i].type == "textarea")
        {
            if (arrs[i].value == '')
            {
                alert("Fill all fields before submitting!");
                return false;
            }
        }
    }
    alert("Thanks for your input!");
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:26:07.293

First, function `checkform` is not called. The `if (checkform)` should be `if (checkform())` or you will test only test the availability of the function, not the result.

Then the `if (!myArray[0])` should be `if (!myArray[i])` to not only test the firstname

Or better, `if (myArray[i].length==0)` to be sure to explicitly test for empty string and not just doing an implicit boolean conversion (javascript evaluate `0==""` as `true`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T05:29:09.987

根据您的`input`字段格式为`form`：

```
var allTrue = [].every.call( document.forms.form.elements, function( el ) {
    return !!el.value;
} );
if ( allTrue ) {
    alert( "Thanks for your input!" );
}
else {
    alert( "Some fields are missing!" );
} 
```

# c# - 搜索文件时访问被拒绝错误

> ID：10458862
> 
> 赞同：0
> 
> 时间：2012-05-05T04:30:06.713
> 
> 标签：c#

当我尝试在 c:\ 目录中搜索文件时出现以下错误。

> 拒绝访问路径“C:\$RECYCLE.BIN\S-1-5-21-3560828095-1020290111-2102031911-500”。

我使用的代码是：

```
private void button12_Click(object sender, EventArgs e)
    {

        string[] files = Directory.GetFiles("C:\\",
      "*.*",
      SearchOption.AllDirectories);

        // Display all the files.
        foreach (string file in files)
        {
            MessageBox.Show(file);
        }

    } 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:32:32.270

这是一个问题......如何？回收站子目录归您计算机上的各个用户所有，而您运行此目录的帐户正试图访问其他帐户的回收站。

# iphone - 当我运行 iPhone 模拟器时，PickView 不可见

> ID：10458865
> 
> 赞同：1
> 
> 时间：2012-05-05T04:30:33.883
> 
> 标签：iphone, objective-c, ios, interface-builder

我将一个`PickerView`和一个按钮拖到我的 xib 文件中的视图中。

但是，当我构建代码时，模拟器中只显示我的按钮。似乎`PickerView`已被隐藏，因为我已从`PickerView`.

这个问题的原因是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:58:48.757

您必须至少实现 UIPickerViewDataSource 中的 2 个方法和 UIPickerViewDelegate 中的 1 个方法才能显示选取器视图。以下 3 种方法创建了一个仅在 3 列和 12 行中显示单词“文本”的选择器视图：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return @"Test";
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 3;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return 12;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:06:33.773

并且不要忘记将您的 UIViewController 类声明为 UIPickerViewDataSource 和 UIPickerViewDelegate 的委托：

```
@interface YourCustomClassViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:41:43.990

在`YourCustomClassViewController.h`档案中，

```
@interface YourCustomClassViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate>{
IBOutlet UIPickerView *pickerView;

} 
```

在`YourCustomClassViewController.m`文件中，您可以添加以下方法

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return @"YourName";
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return 5;
} 
```

在您的 xib 文件 ( `YourCustomClassViewController.xib`) 中，将 Picker 连接到 File's Owner。就像下面的方式...

```
pickerView --->Picker

dataSource --->Picker

delegate ---->Picker 
```

我希望它一定会对你有所帮助。如果你有任何疑问可以问我。

# html - 为什么绝对定位的div在相对定位时会改变宽度？

> ID：10458868
> 
> 赞同：3
> 
> 时间：2012-05-05T04:31:01.043
> 
> 标签：html, css, width, css-position

我有一个 div 显示一些文本并且绝对定位在页面上。虽然它是绝对定位的，但 div 的大小刚好足以显示它包含的文本。当我向该 div 添加内联样式以将其更改为相对定位时，该 div 的宽度突然扩大到占据页面的 100%...

我使用 Chrome 开发工具来打开/关闭相对位置。关闭它会导致宽度正确，重新打开它会导致 div 扩展。它是一种内联样式，因此没有任何 CSS 类或选择器会改变我的宽度。

我在 Firefox 中遇到了同样的问题。在 Firebug 中删除`position: relative`会导致宽度缩小到刚好适合文本的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:01:52.893

如果你想要**相对**位置 DIV 取他的内容宽度，那么你可以给`float`,`display:inline`或`display:inline-block`给你的 DIV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:46:27.560

能否请您发布 HTML 和 CSS，我可以看看它。同时，您可能想看看 [使用 CSS 相对于其容器定位一个 HTML 元素](https://stackoverflow.com/questions/104953/position-an-html-element-relative-to-its-container-using-css) ，看看这是否可能对您有帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:51:36.263

随着内容的增长/缩小改变大小使用类似的东西：

```
<div style="min-height:30px;max-height:300px;"> 
```

这意味着它会根据内容在 30 到 300 像素之间变化

或者

```
<div style="min-height:30px;height:auto;"> 
```

这将在 30px 和它的容器允许的大小之间变化（所以永远，本质上）

# ios4 - UIKeyboardFrameBeginUserInfoKey/UIKeyboardFrameEndUserInfoKey：有什么区别？

> ID：10458870
> 
> 赞同：0
> 
> 时间：2012-05-05T04:31:14.620
> 
> 标签：ios4, uikeyboard

可以在苹果文档中阅读以下内容：

UIKeyboardFrameBeginUserInfoKey NSValue 对象的键，其中包含标识键盘起始帧的 CGRect ……</p>

UIKeyboardFrameEndUserInfoKey NSValue 对象的键，其中包含标识键盘结束帧的 CGRect ……</p>

这是否意味着键盘具有“起始帧”和“结束帧”？我想是的。

但是当键盘出现时，我看不到任何帧变化。它只是从头到尾保持不变。

所以我的问题是：那些“起始帧”和“结束帧”指的是什么？我肯定错过了什么。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:39:22.343

键盘确实有一个开始和结束帧，并且属性完全按照您的假设进行。然而，它们的键盘并不总是有动画；有时它只是出现或改变大小。例如，如果您在日文键盘上键入，则在`keyboardWillShow`击中第一个字符后触发。没有动画，但键盘上方会出现一个附加栏，从而改变大小。您上面列出的属性告诉您键盘大小改变了多少。

当您说没有框架发生变化时，我不确定您到底在看什么。我想当您从一个可编辑的文本字段移动到另一个时，您可能会收到`keyboardWillShow`通知，即使屏幕上没有任何变化。

# c - 在屏幕上绘制一个像素

> ID：10458878
> 
> 赞同：0
> 
> 时间：2012-05-05T04:32:33.090
> 
> 标签：c, visual-c++, drawing

我需要知道绘制像素的方法是什么，在什么库中可以找到它以及如何使用它？
我做了什么：
我在互联网上搜索，我发现： 1.一个用C语言
调用的方法， 但我有Microsoft Visual Stdio，它没有 我什至多次下载turbo c++（它有Graphics.h头文件）但我无法将它安装在我的 PC 中（我使用的是 Wondows 7 64 位系统）。 2.头文件中调用的方法，但我知道如何使用它。 使用我设法在屏幕上绘制了一个红色像素，但每次执行时程序都不稳定： a。像素不会出现在同一位置。`putpixel()``Graphics.h``Graphics.h`
`Setpixel()``windows.h`
`Setpixel()` `GetPixel`

湾。一段时间后消失。
C。根本不出现。

那么该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-12T16:03:20.423

试试这个代码：

```
#include <stdio.h> 
```

……

```
putchar(".");
fflush(stdout); 
```

应该做的伎俩。

# ruby - 在分叉之前强制断开与 DataMapper（DataObjects 适配器）的连接？

> ID：10458882
> 
> 赞同：3
> 
> 时间：2012-05-05T04:33:10.380
> 
> 标签：ruby, datamapper

使用 DataMapper，在分叉子进程的过程中，由于父级中的数据库连接仍在打开（和使用），我遇到了数据包损坏。我想强制断开连接并重新连接，就像你在分叉时应该做的那样，但 DataMapper 看起来甚至没有考虑过这个用例。

现在我正在通过一个私有 API，并且必须弄清楚内部结构及其连接池才能做到这一点，所以感觉不对：

```
DataMapper.repository(:default).adapter.send(:open_connection).dispose 
```

有谁知道是否有更“公开”和正确的方法来做到这一点？我在 IRC 频道上问过，但没有人回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:12:03.397

我在另一个问题中提出[的解决方案取得了成功，例如](https://stackoverflow.com/questions/4262135/force-datamapper-to-disconnect-from-postgresql/4262261)

```
# Disconnects an existing DataMapper Session
def disconnect!
  DataObjects::Pooling.pools.each do |pool|
    pool.dispose
  end
end 
```

# linux - 在 Linux 单板计算机上挂载 USB 以用于 C 程序

> ID：10458884
> 
> 赞同：0
> 
> 时间：2012-05-05T01:56:08.957
> 
> 标签：linux, usb, c

我继承了一个将数据从单板计算机记录到 USB 闪存驱动器的项目。执行此操作的代码是用 C 编写的。旧代码是：

```
 //Get the Start time
  sttime = localtime(&starttime);

  //Get the name of the drive
  sprintf(fname,"/mnt/SJ-HMIData%.4i%.2i%.2i%.2i%.2i%.2i.sjrd",(*sttime).tm_year+1900,(*sttime).tm_mon+1,(*sttime).tm_mday,(*sttime).tm_hour,(*sttime).tm_min,(*sttime).tm_sec);

  //Open an IO port with read only
  UsbFile = open(fname, O_CREAT|O_WRONLY|O_TRUNC);//Open csv on flash drive to be appended 
```

我的问题是，这取决于我插入闪存驱动器的时间，即该程序运行的时间。我怎样才能做到这一点，这样我就不需要时间打开设备了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:51:12.043

我怀疑日期/时间与安装无关。闪存驱动器很可能安装在 /mnt

日期和时间用于组装要写入已安装文件系统的文件的名称。如果您定期执行此操作，实际上在文件名中添加某种时间戳是很常见的做法 - 它比可能意外丢失或文件移动到另一个系统的文件系统日期字段更方便查看，更可靠或存储介质，然后再进行分析。

实际上，您似乎不应该在这里遇到问题。如果您想以该样式创建文件，请使用当前代码（最好至少将注释更新为它现在所做的，这看起来与编写它们的版本中所做的不同） . 如果您想使用不同的时不变名称创建文件，请执行此操作。

也许您的闪存驱动器没有自动挂载（也许它上面没有预期的文件系统，或者本应处理此问题的某些守护程序不起作用）。很可能是这种情况，但是您发布的代码与安装或安装失败无关。相反，它的代码尝试将可能已经安装的文件系统写入，或者失败，写入应该用作安装点的父文件系统的目录......

# php - 如何在php中更新数据库？

> ID：10458888
> 
> 赞同：0
> 
> 时间：2012-05-05T04:34:42.573
> 
> 标签：php, database

我想在用户登录时更新我的​​产品。这是我在edit.php中的代码

```
 <?php
                $id= (int)$_GET['id'];

                $query = "SELECT * FROM game WHERE gameId=".$id."";
                $rs = mysql_query($query);
                while($data = mysql_fetch_array($rs))
                {
            ?>
            <form action="doUpdate.php" method="post">
                <?php echo "<image src=\"images/".$id.".png\" alt=\"gameImage\" </image>"?>

                <div class="cleaner"></div>

                <div class="myLabel">Name</div><div>: <input type="text" value="<?php echo $data['gameName'];?>" name="gameName"/></div>
                <div class="myLabel">Developer</div><div>: <input type="text" value="<?php echo $data['gameDeveloper'];?>" name="gameDeveloper"/></div>
                <div class="myLabel">Price</div><div>: <input type="text" value="<?php echo $data['gamePrice'];?>" name="gamePrice"/></div>

                <br/>

                <div id="txtError" style="color:#D70005">
                    <?php
                        if(isset($err))
                        {
                            if($err==1) echo"All Fields must be filled";
                            else if($err==2) echo"Price must be numeric";
                            else if($err==3) echo"Price must be between 1-10";
                        }
                    ?>
                </div>
                <input type="submit" value="Submit"/>
                <a href="product.php"><input type="button" value="Cancel"/></span></a>
                <?php
                }
                ?>
            </form> 
```

这是我在 doUpdate.php 中的代码

```
<?php
$nama = $_POST['gameName'];
$dev = $_POST['gameDeveloper'];
$harga =$_POST['gamePrice'];
$id= (int)$_REQUEST['id'];

if($nama == "" || $dev == "" || $harga == "" )
{
    header("location:edit.php?err=1");  
}
else if(!is_numeric($harga))
{
    header("location:edit.php?err=2");  
}
else if($harga < 1 || $harga >10)
{
    header("location:edit.php?err=3");  
}
else
{
    $query = "UPDATE game SET gameName='".$nama."', gameDeveloper='".$dev."', gamePrice=".$harga." where gameId=".$id.""; 
    mysql_query($query);
    header("location:product.php");
} 
```

?>

为什么我不能更改名称、开发商或价格，即使我已经在表格中给出了操作？为什么如果我删除名称、开发人员和价格以了解验证是否有效，它表示 edit.php 中的未定义索引 $id= (int)$_GET['id']; ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:00:31.567

您试图进入`$_REQUEST['id']`doUpdate.php 但表单中没有这样的字段。
您必须将其添加为隐藏字段。

你也必须格式化你的字符串。
您要查询的每个字符串都必须转义其中的特殊字符。

# javascript - 调用咖啡脚本定义的函数？

> ID：10458891
> 
> 赞同：21
> 
> 时间：2012-05-05T04:35:03.197
> 
> 标签：javascript, html, coffeescript

我有以下咖啡脚本代码来生成和警告框：

```
show_alert = () ->
  alert("Hello! I am an alert box!") 
```

编译为：

```
(function() {
  var show_alert;

  show_alert = function() {
    return alert("Hello! I am an alert box!");
  };

}).call(this); 
```

在我的 html 中，我有以下内容

```
<input onclick='show_alert()' type='button' value='Show alert box' /> 
```

但是，没有警报框显示？以下是从浏览器复制的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Test Rails Application</title>
    <style type='text/css'>.application h1 {
  color: lime; }
</style>
    <script type='text/javascript'>(function() {
  var show_alert;

  show_alert = function() {
    return alert("Hello! I am an alert box!");
  };

}).call(this);
</script>
  </head>
  <body>
    <h1>Hello from applicaiton.html.haml</h1>
    <div class='application'><h1>Hello World</h1>
<input onclick='show_alert()' type='button' value='Show alert box' />
</div>
  </body>
</html> 
```

为什么我无法显示警报框？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-05T05:01:38.143

您的问题是生成的 javascript 代码在另一个范围内。您必须通过将`-b`参数添加到咖啡脚本编译器或通过显式导出函数来解决此问题

```
root = exports ? this
root.show_alert = () -> alert("Hello! I am an alert box!") 
```

有关导出和范围问题的更多信息，请查看[https://stackoverflow.com/a/4215132/832273](https://stackoverflow.com/a/4215132/832273)

我用上面的咖啡脚本代码创建了一个[工作 jsfiddle](http://jsfiddle.net/tV97u/2/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-09T11:31:24.900

我找到了两种方法来解决这个问题首先在函数名之前添加@

```
@say_hi = () ->
  $(alert('Hello!!!')) 
```

SECOND 在咖啡文件末尾添加

```
window["say_hi"] = say_hi 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-05T04:42:34.263

在您的咖啡脚本代码中，尝试将函数保存到窗口：`window["show_alert"] = show_alert`

# c++ - 如何在 c 或 c++ 中实现 3d kDTree 构建和搜索算法？

> ID：10458898
> 
> 赞同：2
> 
> 时间：2012-05-05T04:36:27.297
> 
> 标签：c++, c, data-structures

如何在 c 或 c++ 中实现 3d kDTree 构建和搜索算法？我想知道我们是否有工作代码可以遵循

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:44:26.257

我想向您推荐两个好的演示文稿：

*   [《kd树简介》](http://www.cs.umd.edu/class/spring2002/cmsc420-0401/pbasic.pdf)
*   [“第 6 讲：Kd 树和范围树”](http://www.cise.ufl.edu/class/cot5520fa09/CG_RangeKDtrees.pdf)。

两者都提供了您开始编写自己的实现所需的所有内容（kd-trees 背后的基本思想、简短的可视化示例和代码片段）。

2021 年 19 月 10 日更新：资源现在不再公开。感谢@Hari 在评论下方发布新链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T05:57:21.590

我发现[Vlastimil Havran](http://dcgi.felk.cvut.cz/home/havran/publications.html)的出版物非常有用。他的[博士论文](http://dcgi.felk.cvut.cz/home/havran/DISSVH/phdthesis.html)很好地介绍了 kd-trees 和遍历算法。进一步的文章是关于一些改进的，例如如何在[O(nlogn)](http://dcgi.felk.cvut.cz/home/havran/ARTICLES/ingo06rtKdtree.pdf)中构造 kd-tree 。在不同的图形库中也有很多实现。你应该只是谷歌它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:14:30.457

有关 C 中 3D kd-tree 实现的示例，请查看[kd3](https://github.com/shawnchin/kd3)。它不是通用库，需要输入数据为特定形式，但思想和方法应该是可转移的。

*披露：我是 kd3 的作者。*

*免责声明：它是作为现有应用程序的概念验证代码编写的，因此没有应有的通用性或经过良好测试。欢迎错误报告/修复。*

# objective-c - 提高 Xcode 中的文本文件读取速度？

> ID：10458903
> 
> 赞同：0
> 
> 时间：2012-05-05T04:37:09.780
> 
> 标签：objective-c, xcode, full-text-search, nsbundle

我目前正在从事一个涉及大量文本文件读取的项目。我需要将文件的内容放入 NSStrings 中，以便进一步操作它们。我正在使用什么：

```
NSString *file = [[NSBundle mainBundle] pathForResource:fileName ofType:@"txt"];
NSString *fileContents = [NSString stringWithContentsOfFile:file encoding:NSUTF8StringEncoding error:nil]; 
```

它工作得很好，但是随着我的项目的增长，文本文件的数量也在增长。我开始认为应该有一种更有效的方式来搜索项目中包含的文本文件。

在许多情况下，我确切地知道要搜索什么文件。我根据需要阅读的时间将文件组织到组文件夹中。有没有办法缩小初始文件搜索的范围？当我知道我需要的文件在更具体的级别上时，每次搜索整个应用程序包似乎都是没有意义的。

有什么方法可以搜索组而不是捆绑包？我可以以某种方式从搜索中排除某些文件吗？据我所知，为这个上下文定义自定义包不适合使用 NSBundle 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:53:16.357

你看过方法`-[NSBundle pathForResource:ofType:inDirectory:]`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:05:18.283

我遇到了几乎类似的情况，为了进行更多优化，我将所有资源文件都保存在字典中，并带有一些键，

您可以尝试关注

1 -- 在我们的应用程序中，您可能有某种模式或您可以在哪里找到主要组，

2 - 每个组有多个字典，在组内，您可以存储文件名，

3 -- ken 建议使用 -[NSBundle pathForResource:ofType:inDirectory:]

# java - jframe中的jinternalframe

> ID：10458904
> 
> 赞同：0
> 
> 时间：2012-05-05T04:37:19.467
> 
> 标签：java

用按钮关闭一个`jframe`并同时打开另一个`jframe`(1) 很容易，我们可以通过`close(), dispose,this.setvisibe(false)`

我的查询是：-我`jinternalframe`在其中创建了一个`jframe`我使用 jdesktopPane 实现的我在`jinternalframe`其中关闭了`jinternalframe`唯一的按钮（而不是`jframe`内部框架所在的按钮）并打开了另一个`jframe`（1）。我想要一个`jframe`在单击按钮登录时关闭的代码（具有内部框架）`jinternalframe`

# string - 关于字符串功能

> ID：10458913
> 
> 赞同：-2
> 
> 时间：2012-05-05T04:41:26.457
> 
> 标签：string

我正在开发下面的课程..

```
public class Test1 
{
    public void method(Object o)
    {
        System.out.println("Object Verion");
    }   
    public void method(String s)
    {
        System.out.println("String Version");
    }

    public static void main(String args[])
    {
        Test1 question = new Test1();
        //question.method(question);

        question.method(null);
    }

} 
```

现在在执行时调用字符串版本作为输出所以请在这里建议字符串被视为空，我们应该传递什么来调用对象版本。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:45:10.100

在所有其他条件相同的情况下，**将调用最具体的方法。**从[JLS](http://docs.oracle.com/javase/specs/)：

> ### [15.12.2.5。选择最具体的方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)
> 
> 如果多个成员方法既可访问又适用于方法调用，则有必要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。
> 
> 非正式的直觉是，如果第一个方法处理的任何调用可以传递给另一个方法而不会出现编译时类型错误，那么一个方法比另一个方法更具体。

`question.method(null)` *可能*表示 the`String`或`Object`重载，但由于`String`比 更具体（更窄）`Object`，`String`重载是被调用的方法。

# api - YouTube 播放列表 API 不再起作用？

> ID：10458918
> 
> 赞同：0
> 
> 时间：2012-05-05T04:42:06.640
> 
> 标签：api, youtube

根据 YouTube 的文档： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_playlists](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists)

我可以转到以下 URL 以检索 youtube 播放列表中的视频列表： [https ://gdata.youtube.com/feeds/api/playlists/8BCDD04DE8F771B2?v=2](https://gdata.youtube.com/feeds/api/playlists/8BCDD04DE8F771B2?v=2)

运作良好对吗？好吧，不...除了 youtube 提供的播放列表之外，我一直无法找到一个真正有效的播放列表。我在这里有一个播放列表：[http](http://www.youtube.com/playlist?list=PLABD2A8CE079F70FA) ://www.youtube.com/playlist?list=PLABD2A8CE079F70FA 。如果我简单地将播放列表的 ID 插入 gdata URL，它应该返回有效数据，这将是合乎逻辑的，对吗？不...不起作用：

[https://gdata.youtube.com/feeds/api/playlists/PLABD2A8CE079F70FA](https://gdata.youtube.com/feeds/api/playlists/PLABD2A8CE079F70FA)

该 API 似乎不适用于以新“PLA”格式开头的任何播放列表。我需要做什么才能让 youtube API 与新的播放列表系统一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:02:22.513

好吧，我想通了。播放列表 API 的设计考虑到了 OLD Youtube 播放列表 ID，即开头没有“PL”的那些。因此，如果您想检索有关播放列表中视频的信息，您需要从播放列表 ID 中删除 PL，然后它将正常工作......

示例： [https ://gdata.youtube.com/feeds/api/playlists/ABD2A8CE079F70FA](https://gdata.youtube.com/feeds/api/playlists/ABD2A8CE079F70FA)

VS： [https ://gdata.youtube.com/feeds/api/playlists/PLABD2A8CE079F70FA](https://gdata.youtube.com/feeds/api/playlists/PLABD2A8CE079F70FA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:40:18.777

您可以将查询参数添加到 url。使用该`max-results`查询，您最多可以获取 50 个结果。`start-index`如果您想要超过 50 个请求，则需要使用查询多次调用它。

`https://gdata.youtube.com/feeds/api/playlists/PLABD2A8CE079F70FA?v=2&max-results=50`最多会给出 50 个结果。通过添加查询来获取接下来的 50 个结果`start-index=51&max-results=50`。目前，这是您实现它的唯一方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T05:29:11.250

**检查这个你的播放列表，它工作正常**

[http://gdata.youtube.com/feeds/api/users/Jaxelrod/playlists/DC725B3F130398B2?v=2](http://gdata.youtube.com/feeds/api/users/Jaxelrod/playlists/DC725B3F130398B2?v=2)

# javascript - 限制表单中的复选框

> ID：10458924
> 
> 赞同：10
> 
> 时间：2012-05-05T04:43:54.993
> 
> 标签：javascript, jquery, html

我有一个带有一组复选框的 HTML 表单，如何让用户只能检查固定数量的复选框

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-05T04:57:35.593

此示例将在检查每个输入后计算检查输入的数量，并与允许的最大数量进行比较。如果超过最大值，则禁用剩余的复选框。

```
jQuery(function(){
    var max = 3;
    var checkboxes = $('input[type="checkbox"]');

    checkboxes.change(function(){
        var current = checkboxes.filter(':checked').length;
        checkboxes.filter(':not(:checked)').prop('disabled', current >= max);
    });
}); 
```

这是一个工作示例 - [http://jsfiddle.net/jaredhoyt/Ghtbu/1/](http://jsfiddle.net/jaredhoyt/Ghtbu/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T04:50:23.833

这为每个复选框绑定了一些逻辑，用于检查当前表单中选中了多少个复选框。如果该数字等于 2，我们将禁用所有其他框。

```
$("form").on("click", ":checkbox", function(event){
  $(":checkbox:not(:checked)", this.form).prop("disabled", function(){
    return $(this.form).find(":checkbox:checked").length == 2;
  });
}); 
```

这适用于每个表单，这意味着您可以拥有多个不涉及彼此输入的表单。在下面的演示中，我展示了三个表单，它们都包含三个复选框。2 个复选框的限制仅限于它们各自的形式。

演示：http: [//jsbin.com/epanex/4/edit](http://jsbin.com/epanex/4/edit)

# google-cloud-datastore - 迁移到 HRD 后如何恢复 Blob

> ID：10458931
> 
> 赞同：0
> 
> 时间：2012-05-05T04:46:14.657
> 
> 标签：google-cloud-datastore

我刚刚迁移到 HRD，现在它告诉我我无法访问自己的 blob...

```
Uncaught exception from servlet
java.lang.SecurityException: This application does not have access to that blob.
at com.google.appengine.api.blobstore.BlobstoreServiceImpl.fetchData(BlobstoreServiceImpl.java:200)
at com.droidastic.telljokes.server.servlet.ServeBlobsServlet.checkBlobKeyExists(ServeBlobsServlet.java:100)
at com.droidastic.telljokes.server.servlet.ServeBlobsServlet.doGet(ServeBlobsServlet.java:64) 
```

我将密钥作为字符串存储在数据存储实体中，然后像这样创建它们：

```
BlobKey key = new BlobKey(this.params.blobKey); 
```

我怎样才能恢复斑点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:31:28.273

我找到了一个解决方案：

```
public String getMigratedBlobKey(String oldKey) {
  String migrationEntityKey = "__BlobMigration__";
  Key createKey = KeyFactory.createKey(migrationEntityKey, oldKey);
  Entity migrationEntity = datastore.get(createKey);
  BlobKey newKey = (BlobKey) migrationEntity.getProperty("new_blob_key");
  return newKey.getKeyString();
}

"__BlobMigration__" and "new_blob_key" are GAE constants. 
```

# c# - 为面板上的正方形设置动画

> ID：10458936
> 
> 赞同：1
> 
> 时间：2012-05-05T04:47:25.390
> 
> 标签：c#, winforms, animation

我在一个表单上有一个面板，它创建了用于路由数据包的网络拓扑。我能够在面板上绘制拓扑。但是，现在我希望通过单击按钮将小方块从一个点移动到目的地。我怎样才能在面板上做到这一点？当我点击按钮时没有任何反应。如果有人可以帮助我，我将不胜感激。这是我的代码的一部分：

```
public Form1()
{            
     InitializeComponent();

     this.SetStyle(ControlStyles.UserPaint 
          | ControlStyles.AllPaintingInWmPaint
          | ControlStyles.DoubleBuffer, true);

    //Initialize the point to start in the top left corner
    this.SetStyle(ControlStyles.UserPaint
          | ControlStyles.AllPaintingInWmPaint
          | ControlStyles.DoubleBuffer, true);

    //Initialize the point to start in the top left corner
    mPoint = new Point(mRect.Location.X, mRect.Location.X);

    //Set up the function to call when the timer fires
    TimerCallback timercb = new TimerCallback(TimerCB);

    //Set up the timer to fire at the set animation rate
    mTimer = new System.Threading.Timer(timercb,
        null, ANIMATION_RATE, ANIMATION_RATE);    
}

private void panel2_Paint(object sender, PaintEventArgs e)
{
    if(sendbut) {
        Graphics dc = panel2.CreateGraphics();
        //Fill the background of the client area
        dc.FillRectangle(SystemBrushes.Control, this.ClientRectangle);

        //Draw the big rectangle track
        dc.DrawRectangle(Pens.Black, mRect);

        //Clone the point
        Point p = new Point(mPoint.X, mPoint.Y);

        //Offset it by half the width and height of the desired rectangle
        p.Offset(-(RECT_WIDTH / 2), -(RECT_HEIGHT / 2));

        //Draw the little moving rectangle
        dc.FillRectangle(Brushes.Black, 
            new Rectangle(p, new Size(RECT_WIDTH, RECT_HEIGHT)));
    }
}

protected void TimerCB(object o)
{
    //Move the rectangle
    MovePoint();

    //Redraw the form
    Invalidate();
}

private void button3_Click(object sender, EventArgs e)
{          
    sendbutt = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:46:46.463

假设`panel2_Paint`是`panel2.Paint`事件的处理程序，该方法将在绘制发生*后调用。*相反，您要做的是创建一个从 Panel 继承的自定义控件并覆盖 OnPaint 方法。见[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)。

# javascript - javascript：在列视图中显示嵌套数组

> ID：10458937
> 
> 赞同：0
> 
> 时间：2012-05-05T04:47:37.753
> 
> 标签：javascript, jquery, arrays, json

我正在尝试创建一个简单的列视图，它允许我探索嵌套数组。目标是让用户单击“名称”列中的“名称”，并让相应的电影列表出现在下一列中。例如，我会提供一个这样的 JSON 数组：

```
var array = [
    {
        "name":"sean connery",
        "index":0,
        "movies": [
            {"name": "Goldfinger",
             "id": 43},
            {"name":"Thunderball",
             "id":103}
            ]
    },{
      "name":"pierce brosnan",
        "index":1,
        "movies": [
            {"name": "Goldeneye",
             "id": 22},
            {"name":"The world is not enough",
             "id":100}
            ]  

    }
    ] 
```

基本上，我有点作弊，以便检索相应名称的电影数组。我读取了附加到 li 元素的“索引”属性，并使用它来挑选适当的索引来检索电影数组。

```
// sorts alphabetically 
array.sort(function(a, b) {
    return b.name < a.name ? 1 : b.name > a.name ? -1 : 0;
});

$.each(array, function(index, value){
   listitem = document.createElement('li');
$(listitem).html(value.name).appendTo($("ul#list")).attr("data-id",value.index);        
});

//make it a scrollbox
$("ul#list").scrollTop(); 

//click to display movies
$("ul#list li").click(function(){
 var id = $(this).attr("data-id"); 
movies = array[id].movies;
    console.log(movies); 
});​ 
```

但这似乎不是这里的理想方法。似乎应该有一种方法可以在不需要更改 DOM 的情况下检索适当的电影数组。有什么建议么？还是我正在做的事情是合法的？

谢谢！和一个包含我的代码的小提琴：http: [//jsfiddle.net/bmcmahen/WXvWv/2/](http://jsfiddle.net/bmcmahen/WXvWv/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:20:57.700

您可以更进一步，将整个电影数组附加到`<li>`using [`data`](http://api.jquery.com/data/)：

```
$.each(array, function(index, value) {
    var $li = $('<li>').html(value.name).data('movie', value.movies);
    $('ul#list').append($li);
});

$("ul#list li").click(function() {
    console.log($(this).data('movie'));
});​ 
```

演示：http: [//jsfiddle.net/ambiguous/Ug43b/](http://jsfiddle.net/ambiguous/Ug43b/)

或者，如果这在您的情况下没有意义，您可以使用它[`index`](http://api.jquery.com/index/)来找出`<li>`内部的位置`<ul>`并使用它来索引数组：

```
$.each(array, function(index, value) {
    var $li = $('<li>').html(value.name)
    $('ul#list').append($li);
});

$("ul#list li").click(function() {
    var i = $('ul#list li').index(this);
    console.log(array[i].movies);
});​ 
```

`$('ul#list li')`如果需要，您还可以缓存：

```
var $lis = $('ul#list li');
$lis.click(function() {
    var i = $lis.index(this);
    console.log(array[i].movies);
}); 
```

演示：http: [//jsfiddle.net/ambiguous/kbvGf/](http://jsfiddle.net/ambiguous/kbvGf/)

你走哪条路当然取决于你的具体情况。该`index`方法确实需要您`<ul>`完全匹配`array`，这可能是一个问题，使用数据属性很好地回避了这个问题，通过直接或间接通过索引将每个`<li>`直接绑定到一组电影。`data-movies``data-id`

# c# - 制作2个动画wpf

> ID：10458940
> 
> 赞同：0
> 
> 时间：2012-05-05T04:48:14.097
> 
> 标签：c#, wpf, animation

我想创建一个由 2 个不同的小动画组成的文本动画。我不知道如何在同一动画中将其翻倍。

```
<DoubleAnimation>
   <Int32KeyFrame...>
</DoubleAnimation> 
```

例如，我想沿着波浪 y=sinx 移动我的文本字母，并且在一个周期后，我希望它们在重复正弦路径之前上下跳跃 5 秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:15:59.013

创建一个故事板以包含两个动画

将第二个动画的开始时间设置为第一个动画的持续时间。

您可以使用 KeyFrame 动画来模拟正弦函数，但您可以[使用缓动函数](http://blogs.msdn.com/b/llobo/archive/2009/10/23/new-wpf-features-easing-functions.aspx)

然后开始故事板。

如果您希望字母紧密跟踪正弦，则必须创建一个不同的设置[，如您在此处看到](http://www.codeproject.com/Articles/30090/Text-On-A-Path-in-WPF)的那样。请注意，这不是动画，但您可以为路径设置动画并且字母可以跟随。

# vb.net - 创建一个文本文件并写入它

> ID：10458942
> 
> 赞同：4
> 
> 时间：2012-05-05T04:48:19.790
> 
> 标签：vb.net

我想创建一个文本文件并将一些文本写入该文件，但我的代码无法创建文本文件。

错误信息：

```
 UnauthorizedAccessExcepion was unhandled by user code
 Access to the path 'c:\save.txt' is denied. 
```

我的代码：

```
 Dim fileLoc As String = "c:\save.txt"
                    Dim fs As FileStream = Nothing
                    If (Not File.Exists(fileLoc)) Then
                        fs = File.Create(fileLoc)
                        Using fs

                        End Using
                    End If
                    If File.Exists(fileLoc) Then
                        Using sw As StreamWriter = New StreamWriter(fileLoc)
                            a = "Test: " + TextBox1.Text
                            c = "=============================================="
                            sw.Write(a)
                            sw.Write(c)
                        End Using
                    End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:50:17.593

在较新版本的 Windows 中，C: 驱动器的根目录默认为只读。尝试将文件放在另一个文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:00:20.087

如果你有点痴迷，想直接写入 C 盘目录，你可以使用这个：

```
Imports System.Security.Principal

Module VistaSecurity

    'Declare API
    Private Declare Ansi Function SendMessage Lib "user32.dll" Alias "SendMessageA" (ByVal hwnd As Integer, ByVal wMsg As Integer, ByVal wParam As Integer, ByVal lParam As String) As Integer
    Private Const BCM_FIRST As Int32 = &H1600
    Private Const BCM_SETSHIELD As Int32 = (BCM_FIRST + &HC)

    Public Function IsVistaOrHigher() As Boolean
        Return Environment.OSVersion.Version.Major < 6
    End Function

    ' Checks if the process is elevated
    Public Function IsAdmin() As Boolean
        Dim id As WindowsIdentity = WindowsIdentity.GetCurrent()
        Dim p As WindowsPrincipal = New WindowsPrincipal(id)
        Return p.IsInRole(WindowsBuiltInRole.Administrator)
    End Function

    ' Add a shield icon to a button
    Public Sub AddShieldToButton(ByRef b As Button)
        b.FlatStyle = FlatStyle.System
        SendMessage(b.Handle, BCM_SETSHIELD, 0, &HFFFFFFFF)
    End Sub

    ' Restart the current process with administrator credentials
    Public Sub RestartElevated()
        Dim startInfo As ProcessStartInfo = New ProcessStartInfo()
        startInfo.UseShellExecute = True
        startInfo.WorkingDirectory = Environment.CurrentDirectory
        startInfo.FileName = Application.ExecutablePath
        startInfo.Verb = "runas"
        Try
            Dim p As Process = Process.Start(startInfo)
        Catch ex As Exception
            Return 'If cancelled, do nothing
        End Try
        Application.Exit()
    End Sub

End Module 
```

# php - 从不同目录通过 php 中的 exec() 调用 sql 文件？

> ID：10458947
> 
> 赞同：0
> 
> 时间：2012-05-05T04:48:57.840
> 
> 标签：php, mysql, linux

我有一个 PHP 脚本，它下载两个巨大的 sql 文件（每个大约 200MB）。第一个做一堆东西，然后它调用第二个。从命令行，我可以输入这两行，它工作正常：

```
> cd /path/to/the/sql/files
> mysql -uroot -ppassword < firstfile.sql 
```

但是当我让 PHP 尝试执行第一个文件时，它无法启动第二个文件，大概是因为 PHP 在不同的目录中运行。我试图这样做，这可能真的很幼稚：

```
exec("cd /path/to/the/sql/files");
exec("mysql -uroot -ppassword < firstfile.sql"); 
```

有没有办法让第二个 exec() 知道要从哪个目录运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:58:25.857

当该进程退出时，在被分叉以执行您的 cd 命令的进程中修改的环境将丢失，因此不会影响第二个命令的执行。

如果您不能通过提供数据文件的完整路径来使其工作，您可以通过在同一个 exec() 中执行 cd 命令和 mysql 命令来使其工作，用分号分隔它们。

```
exec("cd /path/to/the/sql/files; mysql -uroot -ppassword < firstfile.sql"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:52:08.000

您可以将完整路径放在行首：

`exec("/path/to/mysql -uroot -ppassword < firstfile.sql");`

# opencv - 无法访问从 OpenCV 函数返回的 Mat 值

> ID：10458951
> 
> 赞同：0
> 
> 时间：2012-05-05T04:50:22.110
> 
> 标签：opencv, matrix

我正在使用 cv::imread 加载图像并对该图像进行一些处理，但我不知道为什么我无法从 imread 函数中读取返回的 Mat 的值。我使用了 Mat.at 方法：

```
Mat iplimage = imread("Photo.jpg",1); //input
    for(int i=0;i<iplimage.rows;i++){
        for(int j=0;j<iplimage.cols;j++){
            cout<<(int)iplimage.at<int>(i,j)<<" ";
        }
        cout<<endl;
    } 
```

但它出现了一个错误：

> OpenCV 错误：断言失败 ( dims <= 2 && data && (unsigned)i0 < (unsigned)size.p[0] && (unsigned)(i1*DataType<_Tp>::channels) < (unsigned)(size.p [1]*channels()) && ((((Sizeof(size_t)<<28)|0x8442211) >> ((DataType<_Tp>::depth) & ((1 << 3) -1))*4 ) & 15) == elemSize1()) 是未知函数，文件：“c:\opencv2.2\include\opencv2\core\mat.hpp”，第 517 行

但是如果我使用直接访问方式就可以了：

```
 Mat iplimage = imread("Photo.jpg",1); //input
     for(int i=0;i<iplimage.rows;i++){
         for(int j=0;j<iplimage.cols;j++){
        cout<<(int)iplimage.data[i*iplimage.cols + j]<<" ";                 
         }
    cout<<endl;
     } 
```

谁能告诉我如何使用 Mat.at 方法来访问上面的 Mat？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:52:38.830

您正在尝试加载 3 通道图像，如果您更改为此 Mat iplimage = imread("Photo.jpg",0); //输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:21:30.937

我找到了解决方案。那是因为我用了 : `inputImage.at<int>(i,j)`or`inputImage.at<float>(1,2)` 代替了，`(int)inputImage.at<uchar>(1,2)`or`(float)inputImage.at<uchar>(1,2)` 对不起我的粗心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:16:54.403

看到这个[答案](https://stackoverflow.com/a/4505166/1334399)。在您的情况下，返回的 Mat 是 3 维`iplimage.at<int>`的，因此断言失败，您只需要像提到的答案解释的方式那样访问每个通道中的强度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T10:15:02.370

Mat iplimage = imread("Photo.jpg",1) 读取 3 通道彩色图像。您可以使用 Mat iplimage = imread("Photo.jpg",0) 以灰度形式读取图像，以便您的 iplimage.at(i,j) 可以工作。请注意，如果您的图像是 8 位而不是 .at，则应使用 .at。

如果您的图像不是 8 位，则应使用 iplimage = imread("Photo.jpg",CV_LOAD_IMAGE_ANYDEPTH)

# java - Java - 覆盖列表的键处理

> ID：10458954
> 
> 赞同：1
> 
> 时间：2012-05-05T04:50:26.530
> 
> 标签：java, list, input, components

我有一个列表添加到我的小程序中，重点是。

在 handleEvent 我处理所有按键。

我对键执行操作。

当键是方向键时，列表也跳来跳去。这是不可取的。该列表应该只响应鼠标事件而不是按键事件。

如何覆盖或删除 List 组件的默认键处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:57:30.050

假设它是一个支持 KeyListener 的组件，只需添加一个`KeyListener`并且`consume()`它不会到达组件。*添加了一些额外的键。*

```
jl.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent ke) {
                            int key = ke.getKeyCode();
                switch (key){
                             case KeyEvent.VK_DOWN:
                             case KeyEvent.VK_UP:
                             case KeyEvent.VK_RIGHT:
                             case KeyEvent.VK_LEFT:
                             case KeyEvent.VK_KP_DOWN:
                             case KeyEvent.VK_KP_UP:
                             case KeyEvent.VK_KP_RIGHT:
                             case KeyEvent.VK_KP_LEFT:
                    ke.consume();
                                    break;
                 default: 
                    }
        }); 
```

# c# - 在 WebKit.NET 上获取 HTTP 标头

> ID：10458961
> 
> 赞同：2
> 
> 时间：2012-05-05T04:51:42.550
> 
> 标签：c#, .net, http, webkit, webkit.net

我一直在试图弄清楚如何处理 401 响应`WebKit.NET`并显示一个身份验证框，以便用户可以输入他的凭据，然后将它们发送回服务器。

[这家伙](https://github.com/therealmitchconnors/webkitdotnet/commit/e4fba420ff9146a951eab90f9647711a727b6574)想出了一种方法来将正确的标头添加到新请求并将它们发送到服务器，但似乎代码正在将它们发送到浏览器导航到的每个页面，这不是我想要的。我对代码进行了一些研究，并调用了这个接口`IWebResourceLoadDelegate`，其中包含两个调用的事件处理程序`didReceiveResponse`，`didReceiveContentLength`每个响应都会调用它，但无法弄清楚如何从传递的参数中读取标头。我认为标题根本没有通过。

此外，似乎[web kit sharp](http://code.google.com/p/open-webkit-sharp/)的人也没有解决这个问题，但 Chrome 确实可以正确处理它。我不确定 WebKit Chrome 使用的是哪个版本。我只是希望不是自定义构建，这样我就别无选择，只能在余生中尝试构建 WebKit（而其他人则在尝试添加缺少的功能）。

任何人都知道我怎么能开始弄清楚如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:22:03.853

我已经有一段时间没有从事这个项目了，但在我看来，您应该能够从[WebURLResponse](http://trac.webkit.org/browser/trunk/Source/WebKit/win/WebURLResponse.cpp)对象获取请求标头，也许是从 allHeaderFields 或 statusCode 方法...

如果您能完成我的工作以在 WebKit.NET 中获得完整的 HTTP Auth 支持，那就太好了。我只是没有时间...... Chrome 和 Safari 有自己的专有实现可以解决问题。

# javascript - 如何获取然后将此下拉值更改为默认值？

> ID：10458965
> 
> 赞同：0
> 
> 时间：2012-05-05T04:52:18.477
> 
> 标签：javascript, jquery

我有一个下拉列表，

```
<select id='idleReason' onChange="loadXMLDoc(this.value)" size="1">
<option value="nothing" selected="selected">Select a site</option>
<option value="Option 1">Option 1</option>
<option value="Option 2">Option 2</option>
<option value="Option 3">Option 3</option>
<option value="Option 4">Option 4</option>
</select> 
```

现在我希望在更改时调用**loadXMLDoc()** javascript 函数，其中将包含一些其他事件。但我无法执行一件事。我希望当从下拉列表中选择值时，事件转到**loadXMLDoc()**函数，并将下拉值重置为空（**这**是默认值）。

有人可以给我任何想法在 jQuery 或 Javascript 中实现这个吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:09:58.340

**HTML**

```
<select id='idleReason'  size="1">
<option value="nothing" selected="selected">Select a site</option>
<option value="Option 1">Option 1</option>
<option value="Option 2">Option 2</option>
<option value="Option 3">Option 3</option>
<option value="Option 4">Option 4</option>
</select>​ 
```

**脚本**

```
$(function(){
    $("#idleReason").change(function(){
       var item=$(this); 
       if(item.val()!="nothing")
       {
           loadXMLDoc(item.val());
           item.val("nothing"); 
       }         
    });     
}); 
```

**工作样本：http: [//jsfiddle.net/spe6B/2/](http://jsfiddle.net/spe6B/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T04:58:05.423

怎么样：

```
<select id='idleReason' onChange="if (this.value!='nothing') {loadXMLDoc(this.value); this.value='nothing';}" size="1">
<option value="nothing" selected="selected">Select a site</option>
<option value="Option 1">Option 1</option>
<option value="Option 2">Option 2</option>
<option value="Option 3">Option 3</option>
<option value="Option 4">Option 4</option>
</select>​ 
```

# mysql - 仅对符合 ON 条件的行使用 MAX

> ID：10458972
> 
> 赞同：1
> 
> 时间：2012-05-05T04:54:19.603
> 
> 标签：mysql, join

如何修改以下查询以将添加限制为`choice`每行仅一行`nid`，即字段中具有最高值的行`foo`？也就是说，表中有多行`choice`具有相同的`nid`，我希望将`foo`每行中的最高`nid`连接到`node`。

```
SELECT *
FROM `node`
LEFT JOIN `choice` ON node.nid = choice.nid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:17:23.357

```
SELECT *
  FROM node
  LEFT JOIN choice c USING (nid)
 WHERE (c.nid, c.foo) IN (SELECT nid, max(foo) FROM choice GROUP BY nid); 
```

[在 SQLFiddle 上尝试一下](http://www.sqlfiddle.com/#!2/b0f1d/1)。

* * *

**编辑：**

说话回合添加`bar`到列表中。

在子查询中，我`MAX(foo)`为每个`nid`, 因此`GROUP BY nid`. `bar`按原样添加没有逻辑，您应该在该列上使用聚合或将其包含到`GROUP BY`. 正是 MySQL 的“扩展”（*我个人认为它容易出错*）允许你做这样的事情。我假设 MySQL`MAX(bar)`在幕后工作。如果您要运行查询：

```
mysql> SELECT nid, max(foo), max(bar) FROM choice GROUP BY nid;
+------+----------+------+
| nid  | max(foo) | bar  |
+------+----------+------+
|    1 |        3 | Uno  |
|    2 |        1 | Eins |
+------+----------+------+ 
```

你会看到，那`MAX(foo)`和`MAX(bar)`取自不同的行。将输出与以下内容进行比较：

```
SELECT nid, max(foo), bar FROM choice GROUP BY nid; 
```

只要`nid`+`foo`组合在其中是唯一的，`choice`我建议*不要*在子查询中添加更多值。否则需要改变整体方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:01:33.480

您可以通过这样的连接非常有效地完成此操作：

```
SELECT *
FROM node
LEFT JOIN choice c1
  ON c1.nid = node.nid
LEFT JOIN choice c2
  ON c2.nid = node.nid
  AND c2.foo > c1.foo
WHERE c2.foo IS NULL 
```

这种方法的一个缺点是，如果你有重复 foo 的记录，你会得到重复的记录。

# c - 求和中每个单独项的除法公式

> ID：10458975
> 
> 赞同：4
> 
> 时间：2012-05-05T04:55:14.970
> 
> 标签：c, math, complexity-theory

例子： ![![数学]http://mathurl.com/83cpbet.png](../Images/1a4b9d34adf958b70e62e0f50df51bba.png)

当除法作为一个整体应用时，结果是，

![http://mathurl.com/79p3hoh](../Images/c1ca38bda66d42170e10fd5318695c3c.png)

求和公式由下式给出， ![求和](../Images/ea70709807da39e9faa2d9dda4f3112b.png)

使用求和规则可以在 O(1) 中轻松计算上述内容。

但是当它单独应用于每个术语时（在商中的小数点后截断），=0+1+1+2+3+3+4+5=19。[在C中使用正常`int`/`int`除法]

上述方法需要 O(N)，因为无法应用求和规则。

~~我了解上述情况是由于将除法应用于每个术语而不是最后一个术语时，精度损失更多。~~但这正是我所需要的。[在上面的例子中，19 是必需的解决方案，而不是 21]

是否有一个公式可以作为将除法单独应用于每个术语的捷径，类似于求和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T05:08:04.997

所以，你得到：

0 + (1+1+2) + (3+3+4) + 5

让我们将其乘以 3：

0 + (3+3+6) + (9+9+12) + 15

并将其与 (1+...+15)/3 的分子进行比较：

1 + (3+5+7) + (9+11+13) + 15

您可以清楚地看到，您所寻求的总和平均每 3 个术语会丢失 3 个分子，或者平均每个术语会丢失 1 个。我们如何将术语分组为三元组并不重要：

(0+3+3) + (6+9+9) + 12+15
(1+3+5) + (7+9+11) + 13+15

甚至

0+3 + (3+6+9) + (9+12+15)
1+3 + (5+7+9) + (11+13+15)

因此，您的 sum*3 比 (1+...+15)/3 的分子少大约项数。

分子可以使用算术级数之和的公式计算：`n`²，其中`n`是和中的项数：

1+3+5+7+9+11+13+15 = 2 ⁸ = 64

现在从 64 中减去 8，得到 56，然后除以 3，得到 18.6(6)。这个数字不等于 19，因为`n`（术语的数量）不是 3 的倍数。

因此，最终公式不完全是 ( `n`² - `n`)/3，但与正确公式的值最多相差 1。

事实上，它是：

(n*n-n+1)/3 向下舍入或使用整数除法计算。

将数字插入其中，我们得到：

(8*8-8+1)/3 = 57/3 = 19

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:09:48.737

简短的回答：是的，有这样一个公式。

长答案（我猜你想要公式）：

如何获得：您已经意识到求和公式与 int 除法之和之间的差异来自每个被加数处 int 除法的舍入。

制作一个包含行的表格：

第一行，每个加法的结果，当您以全精度除法时。

第二行，当您执行整数除法时，每个加法的结果。

第三排，两者的区别。

现在你应该意识到这个模式，它总是 1/3、0、2/3。

这来自除以 3，如果你愿意，你可以证明它是正式的（例如归纳）。

所以最后你的公式是： (n^2)/3 - (n/3)

n*n/3 是常规求和公式，对于所有完整的 3 个和数 1 丢失，我们减去 n/3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T06:19:51.087

结果将是

```
1+1 + 2 + 3+3 + 4 + 5+5 + 6 + 7+7 + 8 + 9+9 + 10 + ... 
```

换句话说，所有奇数出现两次，所有偶数出现一次。第一个`n`自然数的和是`n*(n+1)/2`所以第一个`n`偶数自然数的和是它的两倍，而第一个`n`奇数的和是`n*n`。

我认为你现在拥有所有部件来获得你需要的结果......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:21:53.897

为了增加 s，您需要的总和是`n`：1、2、4、7、10、14、19、24、30、36 ...

将这些插入[整数序列在线百科全书™ (OEIS™)](http://oeis.org)，您将获得符合您要求的[A007980系列。](http://oeis.org/A007980)它的计算公式为 a(n)=ceil((n+1)*(n+2)/3)。

这使得 a(0) = 1, a(1) = 2, a(6) = 19，意味着索引偏移 2：sum(1,8) = a(8-2)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T10:56:11.610

```
#include <stdio.h>

typedef struct fraction {
    int n;//numerator
    int d;//denominator
} Fraction;

int gcd(int x, int y){
    x = (x < 0)? -x : x;
    y = (y < 0)? -y : y;
    while(y){
        int wk;
        wk = x % y;
        x = y;
        y = wk;
    }

    return x;
}

Fraction rcd(Fraction x){
    int gcm;
    gcm = gcd(x.n, x.d);
    x.n /= gcm;
    x.d /= gcm;
    return x;
}

Fraction add(Fraction x, Fraction y){
    x.n = y.d*x.n + x.d*y.n;
    x.d = x.d*y.d;
    return rcd(x);
}

int main(void){
    Fraction sum = {0,1};
    int n;

    for(n=1;n<=8;++n){
        Fraction x = { 2*n-1, 3 };
        sum = add(sum, x);
    }
    printf("%d/%d=",sum.n,sum.d);
    printf("%d",sum.n/sum.d);

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T05:27:54.263

```
Σ((2i+1)/3) where i =0 to n-1 and Σ((2i+1)/3) = n*n/3 
```

# mysql - 如何根据最后一个用户帖子将线程放在顶部（凹凸）？

> ID：10458976
> 
> 赞同：1
> 
> 时间：2012-05-05T04:55:21.540
> 
> 标签：mysql, sql, forum, posting

[http://www.vidyasocks.com/requests.php](http://www.vidyasocks.com/requests.php)

我想要它，所以当我在一个线程中发布时，它会将该线程撞到顶部。

这是我目前拥有的页面`"SELECT * from forum ORDER BY id DESC LIMIT 12";`

数据库有一个 id(pk) 的线程，并用一个 id(pk) 和一个 thread_id(fk) 回复

我该怎么办？我假设某种内部连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:21:03.103

您是否有插入线程和回复的日期/时间戳？您不能仅根据回复 ID 进行排序，因为有些线程没有任何回复，并且无法将 thread_id 顺序与回复 ID 顺序相关联。

如果我对你的表结构有正确的想法，你会在给定一些时间戳的情况下做这样的事情：

```
 SELECT DISTINCT forum.* FROM forum 
      LEFT JOIN replies on
          forum.id = replies.thread_id
  ORDER BY coalesce(replies.reply_timestamp, forum.thread_timestamp) DESC
    LIMIT 12 
```

如果回复存在，则合并将返回replies.reply_timestamp，否则将使用forum.thread_timestamp。

**编辑：**根据 Ami 的评论添加了 DISTINCT

# mysql - 将数据从 MySQL 迁移到 SQL Server

> ID：10458977
> 
> 赞同：2
> 
> 时间：2012-05-05T04:55:58.803
> 
> 标签：mysql, sql-server, database-migration

我希望将数据从 MySQL 迁移到 SQL Server。我的第一个想法是以 .bak 格式进行数据备份并转储到 SQL Server 中。那么有什么办法可以得到一个.bak格式的MySQL数据库备份文件呢？

否则，有没有更简单、更容易的方法将数据从 MySQL 迁移到 SQL Server？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:11:30.987

您是否尝试过 MS SQL 中的 SSIS（随标准版或更高版本一起提供）？我不知道您要传输什么，但表格和视图通过这种方式很容易：

1.  创建一个新的 MS SQL 数据库（空）
2.  右键单击数据库并选择任务 -> 导入数据
3.  作为源，您选择 mySQL 驱动程序（需要先安装 - [http://dev.mysql.com/downloads/connector/odbc/](http://dev.mysql.com/downloads/connector/odbc/)）
4.  选择数据库，连接它，然后按照助手选择视图和表
5.  在助手结束时，您可以保存 SSIS 包并使用 Visual Studio 商业智能中的 SSIS 项目对其进行编辑（还附带 MS SQL 标准或更高版本），或者您只需运行它。如果您遇到传输/转换问题，您可能需要使用 Studio 版本对其进行编辑并修改包以处理有问题的表/列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:05:48.467

我希望您不必这样做，但作为最后的手段，您可以生成自定义 SQL 数据转储，如下所示；

```
SELECT CONCAT_WS( ' '
   , 'INSERT INTO [dbo].[table_name] (col1,col2) VALUES'
   , col1
   , CONCAT( '"', col2, '"' )
   , ';'
) AS '-- Inserts'
FROM table_name
ORDER BY col1 ASC; 
```

这可以像你喜欢的那样复杂，但我只建议你在将数据导入 SQL Server 时遇到问题，例如自动数据转换问题。除非您的数据量很大，否则您最好使用例如或`mysqldump`过滤输出。`sed``perl`

# c# - 将“原始”XML 字符串插入 XElement

> ID：10458978
> 
> 赞同：4
> 
> 时间：2012-05-05T04:56:18.123
> 
> 标签：c#, linq, xelement

我正在尝试将节点（以字符串格式）加载到 XElement 中。虽然这应该很容易，但我发现了一些问题：

*   我尝试加载的节点在某些子节点中包含命名空间引用
*   当我尝试使用`XElement.Load()`或`Xelement.Parse()`收到预期的未定义命名空间错误时

我知道解决方案是使用命名空间定义创建一个周围节点，然后加载整个内容，但我想知道是否有更优雅的解决方案不涉及字符串操作。

这是我失败的尝试:(

我有一组命名空间属性：

```
private readonly List<XAttribute> _namespaces; 
```

这已经填充并包含所有必要的名称空间。因此，要将我的 XML 字符串嵌入到另一个节点中，我正在这样做：

```
var temp = new XElement("root", (from ns in _namespaces select ns), MyXMLString); 
```

但正如我所料，MyXMLString 的内容被转义并变成了一个文本节点。我得到的结果是这样的：

```
<root xmlns:mynamespace="http://mynamespace.com">&lt;mynamespace:node&gt;node text&lt;/node&gt;</root> 
```

我正在寻找的结果是：

```
<root xmlns:mynamespace="http://mynamespace.com">
<mynamespace:node>node text</node>
</root> 
```

有没有一种巧妙的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T08:08:16.660

大概您的 XML 文本实际上格式正确（注意结束标记上的命名空间限定符）：

```
var xml = "<mynamespace:node>node text</mynamespace:node>"; 
```

在这种情况下，您可以使用它来手动指定命名空间：

```
var mngr = new XmlNamespaceManager( new NameTable() );
mngr.AddNamespace( "mynamespace", "urn:ignore" ); // or proper URL
var parserContext = new XmlParserContext(null, mngr, null, XmlSpace.None, null); 
```

现在阅读并加载：

```
var txtReader = new XmlTextReader( xml, XmlNodeType.Element, parserContext );
var ele = XElement.Load( txtReader ); 
```

按预期工作。而且您不需要包装“根”节点。现在可以将它作为`XElement`anywhere 插入到any 中。

# php - 如何在 PHP 中检索访问者的 ISP？

> ID：10458979
> 
> 赞同：0
> 
> 时间：2012-05-05T04:56:38.957
> 
> 标签：php, dns, ip, whois

如何找出查看 PHP 页面的人的 ISP 提供商？

是否可以使用 PHP 来跟踪或揭示它？

如果我使用以下内容：

```
gethostbyaddr($_SERVER['REMOTE_ADDR']); 
```

`Fixed Now`:它返回我的 IP 地址，而不是我的主机名或 ISP。

我尝试了这里提到的解决方案。它不再起作用了。

*   错误信息：http: [//i.imgur.com/H8M9M.png](https://i.imgur.com/H8M9M.png)
*   错误消息 2：http: [//i.imgur.com/pf5Su.png](https://i.imgur.com/pf5Su.png)

[如何通过 PHP 检索访问者的 ISP？](https://stackoverflow.com/questions/855967/how-do-i-retrieve-the-visitors-isp-through-php) [如何通过 PHP 检索访问者的 ISP](https://stackoverflow.com/questions/9366521/how-do-i-retrieve-the-visitors-isp-through-php)

还有其他解决方案来实现这一目标吗？我想获得关于访客 IP 的信息：

*   [http://i.imgur.com/3hDiz.png](https://i.imgur.com/3hDiz.png)

解决方案需要在 php 中，或者在 php 中实现。

**PS**我已经知道，依靠这些数据是不够可靠的，因为这些数据很容易被欺骗。但我的系统只需要这些数据。即使它不够可靠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:32:20.513

如果您想要真实的数据，则不应依赖 PTR（反向 DNS）记录，因为它们通常可以由用户自己设置或根本不设置。

相反，您可以使用 RIR 提供的 RIS WHOIS 服务，例如 RIPE。这种查询将准确返回您“拥有”您的客户端连接的 IP 地址块的人。这种查询的一个例子是[here](http://pwhois.org/ris.who)。

*有关详细信息，请参见[http://www.ripe.net/data-tools/stats/ris/riswhois](http://www.ripe.net/data-tools/stats/ris/riswhois)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:01:30.957

粗略估计，[phpWhois](http://www.phpwhois.org/)可能会给你一些有用的东西。也就是说，不要指望它！如果他们是从另一个位置获得 VPN 的呢？运行 Tor 之类的东西来匿名他们的连接？在星巴克 Wi-Fi 网络上？“借用”邻居的开放网络？有太多变量无法得到可靠的答案，所以不要将任何结果视为权威。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:03:08.073

> 它返回我的 IP 地址，而不是我的主机名或 ISP。

表示您的服务器配置错误。
您必须将您的站点移至其他有线索的 ISP。

澄清一下：这`REMOTE_ADDR`是配置错误的变量，而不是任何解析器或东西。
因此，在尝试使用任何 IP 之前，您必须先获得该 IP。

# ruby - 为什么这个方法不初始化显示的变量？

> ID：10458986
> 
> 赞同：0
> 
> 时间：2012-05-05T04:58:17.920
> 
> 标签：ruby

我得到零，零，但我预计结果是 9，“我的 Soduko”

```
class Soduko
  attr_accessor :name, :rows, :columns
  def initialize
    rows = 9
    columns = 9
    name = 'My Soduko'
  end
end

new_soduko= Soduko.new
puts new_soduko.rows
puts new_soduko.name

$ ruby soduko.rb 
nil
nil 
```

我认为 new 会使用初始化方法并设置这些属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T05:09:07.907

您需要的是`instance variable`方法中的一个`initialize`。您可以通过在名称前加上 @ 来创建实例变量。当您使用 new_soduko= Soduko.new 创建一个新的 Soduko 对象时，您希望为该特定对象设置实例变量。如果没有 @ 你刚刚在初始化方法中创建了局部变量。

```
class Soduko
  attr_accessor :name, :rows, :columns
  def initialize
    @rows = 9          # adding @ makes these instance variables.
    @columns = 9
    @name = 'My Soduko'
  end
end

new_soduko= Soduko.new
puts new_soduko.rows
puts new_soduko.name 
```

# activex - 64 位 Windows 应用程序中的 32 位活动 x 控件

> ID：10458989
> 
> 赞同：0
> 
> 时间：2012-05-05T04:58:39.320
> 
> 标签：activex, x86-64, vb.net-2010, xceed

我正在 vb.net 中创建一个 Windows 应用程序，我希望能够为“所有 CPU”进行编译。现在，我想在 64 位 ActiveX 控件中编译应用程序，因为我已经从所有 CPU 更改为 x64，并且我编译了应用程序，但它显示了找不到 Xceed-controls 的错误。如何解决这个错误。

# javascript - 回历（波斯历）对于 DwtCalendar.js

> ID：10458992
> 
> 赞同：5
> 
> 时间：2012-05-05T04:59:40.470
> 
> 标签：javascript, calendar, zimbra, dwt, hijri

[这](http://www.koders.com/javascript/fid5654087A885151D86F28122345D9F76C5C99024F.aspx?s=checkbox)是一个 DHTML 公历小部件。我正在尝试制作一个 Hijri（波斯日历 - Jalali）小部件。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T05:24:08.793

试试这个网站，它包含 JQuery 日历：

[http://keith-wood.name/calendars.html](http://keith-wood.name/calendars.html)

请注意，此站点包含许多可供选择的日历，其中之一是波斯日历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:32:15.267

您想为 Zimbra 核心更改它还是只是在 zimlet 中使用它？如果是 zimbra 核心，你需要更熟悉 zimbra 的结构，它不仅仅是一个需要翻译的文件，它有一系列的设置和一些额外的部分（更多提示请看我评论的末尾！）

如果你看

```
http://files.zimbra.com/docs/zimlet/zcs/7.2.0/jsdocs/symbols/DwtCalendar.html 
```

会注意到它与全球化没有太大关系

但是，如果您想要一个扩展日历的 zimlet，您需要通过覆盖 onShowMSG 中的日历调用函数来覆盖日历视图

它只需要一个函数来将日历转换为波斯日历并映射日期

您可能知道波斯日历对话只是名称问题和很少的数学计算。

只需添加计算，设置 firstdayoftheweek 并设置天的名称....

[您可以在 Javascript 中的波斯日历实现中](http://farhadi.ir/downloads/JalaliJSCalendar-1.4.tar.gz)找到一些有用的提示

.

一些技巧：

1.  许多配置选项位于 \ajax\config\msgs\AjxMsg.properties\
2.  它不是重要的 dwtCalender，但主要是其他与日期相关的文件，例如：\ajax\util\ 中的 AjxDateUtil.js
3.  Zimbra 有全球化的能力，试着看看 zimbra 的其他语言，熟悉他们的翻译方式和应该改变的地方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T07:20:51.017

你可以使用这个支持所有 jquery 版本的回历日历。我将这些用于波斯日历。

[amib 日历](http://amib.ir/weblog/?page_id=316)和[hashminezhad 日历](http://hasheminezhad.com/datepick)

# jquery - 如何组合两个 jQuery 选择器？

> ID：10458994
> 
> 赞同：0
> 
> 时间：2012-05-05T04:59:45.873
> 
> 标签：jquery, jquery-selectors

我有以下选择器：

```
$('#menu a[href^="/C"]').live('click', function (event) { } )
$('#menu a[href^="/T"]').live('click', function (event) { } ) 
```

一个选择以 /C 开头的 href，另一个选择 /T

有没有办法可以结合这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T05:05:41.003

您提供的选择器完全相同，但通常您所要做的就是用逗号分隔两个选择器，如下所示：

```
$('#firstSelector, #secondSelector'); 
```

有关更多信息，请查看有关多个[选择器的 jquery 站点](http://api.jquery.com/multiple-selector/)

**编辑：**

这应该是您正在寻找的：

```
$('#menu a[href^="/C"], #menu a[href^="/T"]').live('click',function(e){}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T05:04:26.477

多个 jquery 选择器可以用逗号分隔：

```
$('#menu a[href^="/C"], #menu a[href^="/T"]').live('click',function(e){}); 
```

# javascript - 还有另一个“如何找到 Javascript 对象的类/构造函数名称”？

> ID：10458996
> 
> 赞同：5
> 
> 时间：2012-05-05T05:00:18.853
> 
> 标签：javascript

是的，我以前看过这个问题并回答过。但这里是我仍然不明白的：

如果我创建了一个构造函数，并且不覆盖函数的`prototype`属性，那么我们的自动`constructor`属性就会挂在函数的`prototype`属性之外。那是`MyConstructor.prototype.constructor === MyConstructor`=>真的。伟大的。但是现在当我`prototype`用自己的对象覆盖而不修补`constructor`属性时会发生什么？`constructor`now 上不存在`prototype`，并且如果仅在原型链上找到引用，则`MyConstructor.prototype.constructor === Object`=> true。美好的。所以...

为什么在 Javascript 调试器（如 Chrome）中，如果我用自己的对象覆盖构造函数的原型，并新建该构造函数的实例，然后在命令行上键入该实例变量，Chrome 会高兴地告诉我类型? 它怎么知道？？？即我能做些什么来通过代码找出同样的事情？

简单的复制：

```
> function Foo() {}
undefined
> Foo.prototype.constructor === Foo
true
> Foo.prototype = {}
Object
> Foo.prototype.constructor === Foo
false
> f = new Foo()
Foo
> f
Foo 
```

它是纯粹的调试器魔法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T22:03:02.247

也许解决方案只是*不*将原型设置为您的自定义对象？您可以遍历自定义对象的所有属性，并将它们作为属性添加到现有原型中，从而保留原始原型对象的所有属性，例如构造函数。

# php - 将 URL 重写为全部小写

> ID：10458998
> 
> 赞同：0
> 
> 时间：2012-05-05T05:00:52.077
> 
> 标签：php, regex, .htaccess

我的 .htaccess 中有这个重写规则

```
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^/.]+)/?(.*)$ /$1.php/$2 [QSA,L]
RewriteRule ^api/([a-z]+)/([a-z]+) /api/$1_$2.php 
```

如何修改它以将我的 URL 中的所有内容更改为小写？

即这个：

```
www.mysite.com/ThisURL/SHOULD/be_all_lowercse 
```

应该

```
www.mysite.com/thisurl/should/be_all_lowercase 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:03:52.707

这篇[文章](http://www.chrisabernethy.com/force-lower-case-urls-with-mod_rewrite/)描述了如何做到这一点：

```
RewriteEngine On
RewriteMap  lc int:tolower
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:07:25.137

定义`int`引用该函数的类型（内部）的 RewriteMap `tolower`，并在要进行小写的地方调用它：

```
RewriteMap  lc int:tolower
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^/.]+)/?(.*)$ /${lc:$1}.php/${lc:$2} [QSA,L]
RewriteRule ^api/([a-z]+)/([a-z]+) /api/${lc:$1}_${lc:$2}.php} 
```

# c++ - 如何在不放置任何物理依赖项的情况下指定 Makefile 目标构建顺序？

> ID：10458999
> 
> 赞同：4
> 
> 时间：2012-05-05T05:01:04.957
> 
> 标签：c++, makefile

我一直在研究一个链接到 .so（动态库）文件的 C++ 项目。假设我有一个目标 PROG 需要链接到 a.so，并且 a.so 也是由我构建的，在下面的 Makefile 中指定。

```
PROG_SRCS = prog.cpp
PROG_OBJS = $(PROG_SRCS: %.cpp:%.o)

all: PROG
PROG: $(PROG_OBJS) liba.so
    $(LINK.cpp) -o $@ $(PROG_OBJS) -la

LIBA_SRCS = liba/a.cpp
LIBA_OBJS = $(LIBA_SRCS: %.cpp:%.o)

liba.so: $(LIBA_OBJS)
    $(LINK.cpp) -shared -Wl.-soname,$@ -o $@ $^ 
```

我已经使用自动依赖生成来让 .cpp 文件获得它们自己对 .h 文件的依赖。而且prog.cpp包含啊

但是通过这种方式，一旦我更改了a.cpp，liba.so 将被remake，那么PROG 将被remake(relink)，这不是我想要的。我只是更改了 liba.so 的实现，但没有更改任何接口定义。我改了PROG应该重拍啊

我想让 a.so 应该在 PROG 构建之前构建，但是 a.so 的更改不会导致 PROG 的构建。

下面的 Makefile 是我想出的方法，但有一点副作用（生成一个临时文件）。

```
ORDER = /tmp/.ORDER

all: PROG
PROG: $(PROG_OBJS) $(ORDER)
    $(LINK.cpp) -shared -Wl,-soname,$@ -o $@ $(PROG_OBJS) -la

$(ORDER): liba.so
    test -e $@ || touch $@ 
```

这样，每次 liba.so 重新制作时，$(ORDER) 也会重新制作。但它只会在文件不存在的情况下触及该文件。

有什么方法可以指定这种没有任何副作用的依赖关系，例如创建一个 tmp 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T06:50:08.220

如果您愿意依赖 GNU make 的不可移植方面，您可以为此使用 order-only 先决条件[order-only 先决条件](http://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html "仅订购的先决条件")。除了您已经发现的邮票文件方法之外，这是唯一的方法。