# StackOverflow 问答 11708000-11708999

# lua - 通过连接到字符串将 Lua 表显示到控制台

> ID：11708001
> 
> 赞同：3
> 
> 时间：2012-07-29T09:06:52.607
> 
> 标签：lua, lua-table

我想知道是否可以在控制台中显示表格。就像是：

```
player[1] = {}
player[1].Name   = { "Comp_uter15776", "maciozo" }

InputConsole("msg Player names are: " .. player[1].Name) 
```

但是，这显然是错误的，因为我收到有关它无法连接表值的错误。有解决方法吗？

非常感谢提前！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:33:08.900

要将类似数组的表转换为字符串，请使用`table.concat`：

```
InputConsole("msg Player names are: " .. table.concat(player[1].Name, " ")) 
```

第二个参数是放置在每个元素之间的字符串；它默认为`""`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:50:40.733

为了让自己的生活更轻松......我也建议在内表中命名元素。当您需要获取表中对某些目的有意义的特定值时，这使得上面的代码更易于阅读。

```
-- this will return a new instance of a 'player' table each time you call it.  
-- if you need to add or remove attributes, you only need to do it in one place.
function getPlayerTable()
    return {FirstName = "", LastName = ""}
end

local players = {}

local player = getPlayerTable()
player.FirstName = "Comp_uter15776"
player.LastName = "maciozo"
table.insert(players, player)

... more code to add players ...

local specific_player = players[1]
local specific_playerName = specific_player.FirstName.. 
                            " ".. specific_player.LastName
InputConsole("msg Some message ".. specific_playerName) 
```

# vb.net - 将文本从 VB.NET 中的网站放入文本框中

> ID：11708005
> 
> 赞同：0
> 
> 时间：2012-07-29T09:07:26.280
> 
> 标签：vb.net, text, textbox, insert

我想知道如何使用 VB.NET 将文本放入网站的文本框中。就像你完成一个文本框并按回车一样。像这样的东西：

将网页作为网页浏览器进行调暗

web.document.textbox(1).insert("文本")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:41:28.113

它看起来像这样：

```
WebBrowser1.Document.GetElementById("login_password").SetAttribute("value", TextBox2.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T06:45:49.040

正如 giuseppe 所建议的，您需要在文档中搜索元素，然后设置它的 value 属性。例如，以下代码通过设置其用户 ID 和密码文本框并单击提交按钮来登录网站。

```
Dim htmlDoc=WebBrowser1.Document
Dim elem_Input_UsrName As HtmlElement = htmlDoc.GetElementById("username")
Dim elem_Input_PssWrd As HtmlElement = htmlDoc.GetElementById("password")
Dim elem_Input_Submit As HtmlElement = getElementByClassName("Submit", "Input", htmlDoc)
If elem_Input_UsrName IsNot Nothing AndAlso elem_Input_PssWrd IsNot Nothing Then
   elem_Input_UsrName.SetAttribute("value", "xyz@ABC.com")
   elem_Input_PssWrd.SetAttribute("value", "yourpassoword")
   elem_Input_Submit.InvokeMember("click")
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T02:30:19.297

这将帮助 100%：

```
webbrowser1.document.getElementById("yourtextboxidinwebsite").innertext = textbox1.text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-27T21:19:41.130

我有一种方法，如果你想从网站本身接收另一种方式，我需要从网站接收结果到文本框中。你可以使用这个方法。首先，制作一个网页浏览器来加载页面

WebBrowser1.Navigate("https://tools.keycdn.com/geo")

那么这个

```
 TextBox1.Text = WebBrowser1.Document.GetElementById("geoResult").InnerText 
```

# html - 嵌入 iframe 更改其容器的位置

> ID：11708008
> 
> 赞同：0
> 
> 时间：2012-07-29T09:07:33.907
> 
> 标签：html, css, iframe

iframe 标签有问题（[检查代码](http://jsfiddle.net/QVEFq/1/)）。`div`我在容器 ( ) 中嵌入了 Youtube/Vimeo 视频`display: inline-block`，但它改变了它的容器。请参阅演示中的最后两个（调整结果窗口的大小以显示两个或多个`div`内联）。
我尝试用 or 改变`div`，`span`但`li`它没有帮助。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:31:59.923

您的问题似乎是包含视频的 div 未与其他 div 正确对齐。（不是吗？）将显示更改为阻止和向左浮动可以解决此问题。

见：http: [//jsfiddle.net/QVEFq/4/](http://jsfiddle.net/QVEFq/4/)

# user-controls - UI 编辑器更改时 VB.NET 立即更新用户控件

> ID：11708009
> 
> 赞同：0
> 
> 时间：2012-07-29T09:07:38.267
> 
> 标签：user-controls, editor

我在 VB.NET (VS 2010) 中有一个从图片框继承的用户控件。我还有一个类，它包含 40 个左右的控件属性。我还有一个带有属性网格的表单，用作编辑器。在 IDE 中单击控件的“自定义”属性时会打开编辑器表单。表单上有一个确定和取消按钮，用于保存或放弃更改。

所有这些都可以正常工作，但是当网格中的属性发生更改时，我需要让我的控件“刷新”。属性网格对此有一个事件，但我不知道如何在控件中调用或调用我的 sub 来实质上重新绘制控件。如果我直接调用子控件，直到我关闭编辑器表单（对话框）之后，控件才会刷新。有没有办法让控件在编辑器对话框仍然打开的情况下重绘/重绘？

谢谢， EluZion

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:54:41.257

尝试使用`Context.Instance`调用 UI_Editor 时传递的内容。在`GetEditStyle`覆盖中，`Context`传递了一个对象。这包含对调用的引用`UserControl`。

我做这样的事情（CUSTOM UI_TYPE_EDITOR）：

```
Dim ContextOBJ as MyUserControl

Public Overrides Function GetEditStyle(ByVal context As System.ComponentModel.ITypeDescriptorContext)......

contextOBJ = CType(context.Instance, MyUserControl) 
```

在`GetEditValue`覆盖中，您可以调用`ContextOBJ.Refresh`并且您`UserControl`应该立即反映任何更改。这个对我有用。

# c++ - 有没有办法测试输入是否是 C++ 中的数字？

> ID：11708010
> 
> 赞同：1
> 
> 时间：2012-07-29T09:07:42.047
> 
> 标签：c++, testing, input

问题全在标题中。我正在做一个计算器，我显然需要输入。我使用 cin>> 函数，但我想知道是否有办法测试输入以找出它是否是数字。如果我输入任何不是数字的东西，程序就会崩溃。是否有内置函数/运算符？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:14:33.120

*如果输入是*数字，则输入运算符只会读取整数。否则它将把字符留在输入缓冲区中。

尝试这样的事情

```
int i;
if (cin >> i)
{
    // input was a number
}
else
{
    // input failed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:11:35.720

`atoi`并且`sscanf`是你的朋友，或者只是比较输入的字符码是否在“0”-“9”范围内

# java - 什么是更好的包装和命名安排？

> ID：11708012
> 
> 赞同：2
> 
> 时间：2012-07-29T09:08:00.380
> 
> 标签：java, model-view-controller, design-patterns, naming-conventions, code-organization

只是想知道以下命名和包装约定：

```
thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ tree src/
src/
├── META-INF
│   └── persistence.xml
├── net
│   └── bounceme
│       └── dur
│           └── usenet
│               ├── controller
│               │   ├── CommentsDefaultListModel.java
│               │   ├── GroupDefaultListModel.java
│               │   ├── MessageBean.java
│               │   └── MessagesDefaultListModel.java
│               ├── model
│               │   ├── Articles.java
│               │   ├── NewsgroupsArticles.java
│               │   ├── Newsgroups.java
│               │   ├── PropertiesReader.java
│               │   └── Usenet.java
│               └── swing
│                   ├── Comments.form
│                   ├── Comments.java
│                   ├── Groups.form
│                   ├── Groups.java
│                   ├── MainFrame.form
│                   ├── MainFrame.java
│                   ├── Messages.form
│                   ├── Messages.java
│                   ├── PanelWithTabs.form
│                   └── PanelWithTabs.java
└── usenet.properties

8 directories, 21 files
thufir@dur:~/NetBeansProjects/USENET$ 
```

在 swing 包中，我放置了 Swing GUI 类，“模型”类型的 Swing 类除外。它们似乎与 JPane 的有点不同，所以我将其`MessagesDefaultListModel`放入控制器包中，因为它本身并不是真正的模型，至少在我看来，因为它从“模型”包中获取数据。所以，尽管`MessagesDefaultListModel` **它是**JList 的模型，但我更多地将其视为控制器。

`Newsgroups`，`Articles`并且`NewsgroupsArticles`是@Entity类，所以我把它们放到模型包中。这些实体对应于表`newsgroups`和。`articles``newsgroups_articles`

这是一个理智的包装和命名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:30:43.077

我通常更喜欢进行第一个功能级别的隔离，然后在功能域内进行第二次技术隔离。

我会改为命名`model`包。`domain`在控制器包中有名为 model 的类感觉很奇怪。这些是 Swing MVC 架构中的模型，而不是控制器。

另外，我讨厌将任何东西放在根包中。为什么不将属性文件放在一个包中，就像负责解析和保存属性的类一样？

您的实体应该有一个单数名称，而不是复数名称。这可能是我看到的最重要的重构：一个实例`Articles`是一篇文章，所以类应该命名为`Article`，而不是`Articles`。

最后，我看到了实体，看到了与表示相关的类，但没有看到任何服务和数据访问层。数据访问不应在表示层中完成。那不是它的责任。而且您需要一个划分事务的地方（最好以声明的方式）：应该是服务层。像 Spring 这样的依赖注入框架在这方面有很大帮助，并使代码易于测试。

# c++ - C++/Eclipse 共享库：为什么 g++ 找不到这个库？

> ID：11708014
> 
> 赞同：0
> 
> 时间：2012-07-29T09:08:18.647
> 
> 标签：c++, eclipse

我正在按照 [http://tayefeh.wordpress.com/2009/07/06/creating-and-using-ac-shared-library-with-eclipse-cdt-galileo-and-gnu-c-compiler-上的说明进行操作and-linker/](http://tayefeh.wordpress.com/2009/07/06/creating-and-using-a-c-shared-library-with-eclipse-cdt-galileo-and-gnu-c-compiler-and-linker/) 建立一个共享库。

我已经到了第 II 步，第 16 点，但我构建项目的尝试失败并出现以下错误：

```
**** 为项目 UseDLL 构建配置调试 ****

做所有
构建目标：UseDLL
调用：GCC C++ 链接器
g++ -L"/home/ken/workspace/testlib/Debug" -o"UseDLL" ./src/UseDLL.o -ltestlib -l/home/ken/workspace/testlib/Debug
/usr/bin/ld: 找不到 -l/home/ken/workspace/testlib/Debug
collect2: ld 返回 1 个退出状态
make: *** [UseDLL] 错误 1

```

谁能告知构建失败的原因？该目录确实存在并`ls`显示

```
[ken@localhost 调试]$ ls /home/ken/workspace/testlib/Debug/
libtestlib.so 测试类.o

```

如果有帮助，我正在运行 CentOS 6.3。

谢谢，肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:16:04.307

你应该删除这个：

> -l/home/ken/workspace/testlib/Debug

它会`g++`查找该名称的库。

# blackberry-webworks - 在 9700 中显示可滚动数据中的数据

> ID：11708020
> 
> 赞同：1
> 
> 时间：2012-07-29T09:09:03.000
> 
> 标签：blackberry-webworks

我想在可滚动的列表中显示数据。我得到了 Web 服务响应，并得到了一份 BlackBerry 支持表单来滚动数据。但我想在 web 服务调用之后实现这个。

对于滚动，我使用了这个：

```
<div class="scroll-pane" id="mainBodyDiv">
<ul x-blackberry-focusable="true">
<li x-blackberry-focusable="true" id="1" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> a</li>
<li x-blackberry-focusable="true" id="2" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> b</li>
<li x-blackberry-focusable="true" id="3" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> c</li>
<li x-blackberry-focusable="true" id="4" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> d</li>
<li x-blackberry-focusable="true" id="5" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> d</li>
<li x-blackberry-focusable="true" id="6" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> e</li>
<li x-blackberry-focusable="true" id="7" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> f</li>
<li x-blackberry-focusable="true" id="8" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> g</li>
<li x-blackberry-focusable="true" id="9" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> g</li>

<li x-blackberry-focusable="true" id="11" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> a</li>
<li x-blackberry-focusable="true" id="12" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> b</li>
<li x-blackberry-focusable="true" id="13" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> c</li>
<li x-blackberry-focusable="true" id="14" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> d</li>
<li x-blackberry-focusable="true" id="15" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> d</li>
<li x-blackberry-focusable="true" id="16" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> e</li>
<li x-blackberry-focusable="true" id="17" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> f</li>
<li x-blackberry-focusable="true" id="18" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> g</li>
<li x-blackberry-focusable="true" id="19" x-blackberry-onUp="scroll()" x-blackberry-onDown="scroll()"> g</li>
</ul> 
```

但是，如果我想在 Web 服务调用之后在列表中打印 10 个数字（例如）怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:24:47.990

我不确定我是否理解正确。您是在问网络作品中是否可以滚动列表？如果是这样，是的，这是可能的。请参阅以下示例应用程序，其中大多数都有列表。

[https://developer.blackberry.com/html5/sampleapps](https://developer.blackberry.com/html5/sampleapps)

谢谢

纳文 M

# c++ - 原生类型的封装会影响效率吗？

> ID：11708023
> 
> 赞同：3
> 
> 时间：2012-07-29T09:10:04.687
> 
> 标签：c++, performance, inline, encapsulation, abstraction

我想将 a 封装`float`在两个结构中，例如：

```
struct AngleDeg {
    explicit AngleDeg(float angle):value(angle) {}
    float value;
};

struct AngleRad {
    explicit AngleRad(float angle):value(angle) {}
    float value;
}; 
```

然后在一个类中使用这些结构重载一个函数，例如：

```
...
void DoStuff(AngleRad angle);
inline void DoStuff(AngleDeg angle) { DoStuff(Deg2Rad(angle.value)); }
... 
```

这会像使用以下两个函数一样有效吗？

```
void DoStuffRad(float angle);
inline void DoStuffDeg(float angle) { DoStuffRad(Deg2Rad(angle)); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T09:21:13.770

它可能不会影响程序的运行速度，但会增加使程序正确的几率。这很有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:43:45.960

This question was investigated in a [Technical Report on C++ Performance](http://www.open-std.org/jtc1/sc22/wg21/docs/TR18015.pdf). See appendix D.3 for the Stepanove Abstraction Penalty Benchmark. To quote

> The structure of the benchmark is really quite simple. It adds 2000 doubles in an array 25000 times. It does it in 13 different ways that introduce more and more abstract ways of doing it:
> 0 - uses simple Fortran-like for loop.
> 1 - 12 use STL style accumulate template function with plus function object.
> 1, 3, 5, 7 ,9, 11 use doubles. 2, 4, 6, 8, 10, 12 use Double - double wrapped in a class.
> 1, 2 - use regular pointers.
> 3, 4 - use pointers wrapped in a class.
> 5, 6 - use pointers wrapped in a reverse-iterator adaptor.
> 7, 8 - use wrapped pointers wrapped in a reverse-iterator adaptor.
> 9, 10 - use pointers wrapped in a reverse-iterator adaptor wrapped in a reverse-iterator adaptor.
> 11, 12 - use wrapped pointers wrapped in a reverse-iterator adaptor wrapped in a reverse-iterator adaptor.

Output on [Ideone](http://ideone.com/OfSeD): the abstraction penalty (geometric mean of all 13 tests) for a modern compiler (gcc 4.5.1) is less than 1%.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:09:01.233

我认为空间和访问与@jalf 相同，但不确定。所以我听了@quamrana 和@jalf，做了一个运行时测试。

在调试模式下，使用结构的方法要慢约 30%，但在发布模式下它们是等效的。它可能取决于编译器，但我将使用结构的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T09:52:56.397

不可能肯定地说。如果您想 100% 确定，请检查生成的程序集（或只是时间执行代码）。

但是，有两个观察结果可能对您有所帮助：

*   首先，您`struct`的大小与 a 相同`float`，因此不会浪费空间。并且没有不必要的间接：`float`可以像以前一样有效地访问包含的内容。所以没有根本原因为什么它应该变慢
*   但是，这可能会导致某些编译器优化失效。在某些情况下，它可能只是为`struct`s 生成与内置类型不同的代码。或者，它可能`floats`对“大小为 a 的对象”使用不同的调用约定`float`。

所以也许，也许不是。但速度差异不太可能产生可衡量的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T10:07:23.840

对于任何值得您花钱的编译器（即使它是免费的），它不会比使用普通浮点数产生任何开销。

# excel - 用于使用原始文件中的数据更新主工作簿的 VBA 代码

> ID：11708026
> 
> 赞同：0
> 
> 时间：2012-07-29T09:10:36.743
> 
> 标签：excel, vba

我正在尝试编写一个代码，该代码使我能够从原始文件中复制数据，并为原始文件 A 列中的每个值更新主工作簿中的各个工作表。

背景：原始文件的A列中提到了许多唯一ID，其他列包含与每个唯一ID对应的数据。每个唯一 ID 在主工作簿中都有一个单独的工作表。

要求：

1.  删除原始文件中要删除的工作表中提到的不需要的唯一 ID
2.  从原始文件复制整行，在主工作簿中找到相关的唯一 ID 表并将数据粘贴到最后一行。
3.  如果主工作簿中没有唯一的 ID 表，则创建它并粘贴数据。

问题：

1.  我的代码卡在在主文件中找到正确的工作表，它无法找到工作表，并且当它去创建一个具有名称的新工作表时，它给出了工作表名称已经存在的错误。
2.  如果需要为唯一 ID 创建新工作表，它应该继续循环并粘贴其他 ID 的数据。
3.  它应该在最后给出一个消息框，提供所有创建的新工作表的详细信息。

请帮帮我....我已经尝试解决这个问题一段时间了。

原始文件（Excel）： ![原始文件中的列 excel](../Images/0a9c2fd905976e70351c59da803e7f8f.png)

主文件（Excel）： ![主文件中的列](../Images/67e4c3a8845af4e31129f562c92677d4.png)

主文件中的工作表名称： ![主文件中的图纸名称](../Images/de928bceccc435026f4849a30537c43a.png)

代码：

```
 Sub unique_ids()
    Dim NewFN As String, MasterFN As String
    Dim lrow As Long, i As Long, drow As Long, j as Long
    Dim rngf As Range, rngv As Range
    Dim SName As Variant
    Dim FoundDup As Range

    'Open the Master file
    proceed:
    MasterFN = Application.GetOpenFilename(FileFilter:="All files (*.*), *.*",       Title:="Please open the Master File")
    If MasterFN = "" Then
    MsgBox "You have not selected a file."
    GoTo proceed
    Else
    Workbooks.Open Filename:=MasterFN
    End If
    MasterFN = ActiveWorkbook.Name

    'Open the raw file
    proceed1:
    NewFN = Application.GetOpenFilename(FileFilter:="All files (*.*), *.*", Title:="Please open the raw File")
    If NewFN = "" Then
    MsgBox "You have not selected a file."
    GoTo proceed1
    Else
    Workbooks.Open Filename:=NewFN
    End If

    'Save backup file
    ActiveWorkbook.SaveAs Filename:="D:\Counts-" & Format(Date, "dd-mmm-yy") & ".xlsx", FileFormat:= _
    xlOpenXMLWorkbook, CreateBackup:=False
    Workbooks("Counts-" & Format(Date, "dd-mmm-yy") & ".xlsx").Close
    Workbooks.Open Filename:=NewFN
    NewFN = ActiveWorkbook.Name

    'Delete the "to be removed" IDs
    Sheets("counts").Select  
    For Row = Range("A65536").End(xlUp).Row To 2 Step -1 

    Set FoundDup = Sheets("To be deleted").Range("A:A").Find(Cells(Row, 1), LookIn:=xlValues, lookat:=xlWhole) 

    If Not FoundDup Is Nothing Then 
        Cells(Row, 1).EntireRow.Delete 
    End If 

    Next Row

    ‘Update Data

    For j = 2 To lrow
    SName = Workbooks(NewFN).Worksheets("counts").Range("K" & j).Value
    On Error GoTo new_tab
    Workbooks(NewFN).Worksheets("Counts").Range("A" & j & ":I" & j).Copy     Workbooks(MasterFN).Worksheets(SName).Range("B" & Rows.Count).End(xlUp).Offset(1, 0)
    Workbooks(MasterFN).Worksheets(SName).Range("A" & Rows.Count).End(xlUp).Value = Format(Date, "dd-mmm-yy")
    drow = Workbooks(MasterFN).Worksheets(SName).Range("K" & Rows.Count).End(xlUp).Offset(-1, 0).Row
    Workbooks(MasterFN).Worksheets(SName).Range("K" & drow - 1 & ":S" & drow - 1).Copy Workbooks(MasterFN).Worksheets(SName).Range("K" & drow & ":S" & drow)
    Next j

    new_tab:
    MsgBox "New ID encountered", vbCritical
   Workbooks(MasterFN).Sheets.Add(after:=Workbooks(MasterFN).Sheets(Worksheets.Count)).Name = SName
    Workbooks(NewFN).Worksheets("counts").Range("A" & j & ":I" & j).Copy       Workbooks(MasterFN).Worksheets(SName).Range("B" & Rows.Count).End(xlUp)
    Workbooks(MasterFN).Worksheets(SName).Range("A" & Rows.Count).End(xlUp).Value = Format(Date, "dd-mmm-yy")
    drow = Workbooks(MasterFN).Worksheets(SName).Range("K" & Rows.Count).End(xlUp)
    Workbooks(MasterFN).Worksheets(SName).Range("K" & drow - 1 & ":S" & drow - 1).Copy  Workbooks(MasterFN).Worksheets(SName).Range("K" & drow & ":S" & drow)

    MsgBox "This work is now complete, new sheet added - " & SName

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:22:44.273

我在这里看到的第一个潜在问题是在`For j = 2 To lrow`循环中你一直引用变量`i`而不是我假设的变量`j`。我看不到`i`变量已在任何地方初始化？

# java - 在没有默认键盘的情况下在 EditText 中输入数据

> ID：11708038
> 
> 赞同：-3
> 
> 时间：2012-07-29T09:12:00.340
> 
> 标签：java, android, keyboard, android-edittext

如何使用我自己的按钮而不是默认键盘在我的 EditText 中输入数据（我的意思是在计算器应用程序中）。请给我写一些方法或展示合适的例子。谢谢。我初始化了veriable，甚至尝试了一些算法。但是，如果不知道如何输入数据，就没有理由走得更远。当然，我一直在寻找答案。

```
public class MainActivity extends Activity implements OnClickListener{
Button b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,bPlus,bMin,bDiv,bMult,bEqual;
String sN1,sN2,func,result;
EditText etEnter;
SoundPool pool; int shot = 0;
TextView tvShow;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculator);
    initVars();

}
private void initVars(){
    etEnter =(EditText)findViewById(R.id.etCalc);
    tvShow = (TextView)findViewById(R.id.tvShow);
     b0 = (Button)findViewById(R.id.button0);
     b1 = (Button)findViewById(R.id.button1);
     b2 = (Button)findViewById(R.id.button2);
     b3 = (Button)findViewById(R.id.button3);
     b4 = (Button)findViewById(R.id.button4);
     b5 = (Button)findViewById(R.id.button5);
     b6 = (Button)findViewById(R.id.butt6);
     b7 = (Button)findViewById(R.id.butt7);
     b8 = (Button)findViewById(R.id.butt8);
     b9 = (Button)findViewById(R.id.butt9);
    bMin = (Button)findViewById(R.id.bMinus); 
    bPlus = (Button)findViewById(R.id.bPlus);
    bDiv = (Button)findViewById(R.id.bDiv);
    bMult = (Button)findViewById(R.id.bMult);
    bEqual = (Button)findViewById(R.id.bEqual);
    b0.setOnClickListener(this);
    b1.setOnClickListener(this);
    b2.setOnClickListener(this);
    b3.setOnClickListener(this);
    b4.setOnClickListener(this);
    b5.setOnClickListener(this);
    b6.setOnClickListener(this);
    b7.setOnClickListener(this);
    b8.setOnClickListener(this);
    b9.setOnClickListener(this);
    bMin.setOnClickListener(this);
    bPlus.setOnClickListener(this);
    bDiv.setOnClickListener(this);
    bMult.setOnClickListener(this);
    bEqual.setOnClickListener(this);

    pool = new SoundPool(5,AudioManager.STREAM_MUSIC,0);
    shot = pool.load(this, R.raw.shot, 1);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.button0:

        break;
    case R.id.button1:

        break;
    case R.id.button2:

break;
    case R.id.button3:

break;
    case R.id.button4:

        break;
    case R.id.button5:

break;
    case R.id.butt6:

        break;
    case R.id.butt7:

break;
    case R.id.butt8:

break;
    case R.id.butt9:

break;
    case R.id.bMinus:

func = "-";
break;
        case R.id.bPlus:

func = "+";
break;
        case R.id.bDiv:

func = "/";
break;
        case R.id.bMult:

            func = "*";
            break;
        case R.id.bEqual:
pool.play(shot, 1, 1, 0, 0, 1);
if(func.contentEquals("+")){
    if(sN1!=null && sN2!=null){
    long l1 = Long.parseLong(sN1);
    long l2 = Long.parseLong(sN2);
    long lRes = l1+l2;
    result = String.valueOf(lRes);
    tvShow.setText(result);
    }else if(sN1!=null && sN2==null){
        tvShow.setText(sN1);
    }
    sN1=sN2=null;
}else if(func.contentEquals("-")){
    if(sN1!=null && sN2!=null){
        long l1 = Long.parseLong(sN1);
        long l2 = Long.parseLong(sN2);
        long lRes = l1-l2;
        result = String.valueOf(lRes);
        tvShow.setText(result);
        }else if(sN1!=null && sN2==null){
            tvShow.setText(sN1);
        }
        sN1=sN2=null;
}else if(func.contentEquals("/")){
    if(sN1!=null && sN2!=null){
        long l1 = Long.parseLong(sN1);
        long l2 = Long.parseLong(sN2);
        long lRes = l1/l2;
        result = String.valueOf(lRes);
        tvShow.setText(result);
        }else if(sN1!=null && sN2==null){
            tvShow.setText(sN1);
        }
        sN1=sN2=null;
}else if(func.contentEquals("*")){
    if(sN1!=null && sN2!=null){
        long l1 = Long.parseLong(sN1);
        long l2 = Long.parseLong(sN2);
        long lRes = l1*l2;
        result = String.valueOf(lRes);
        tvShow.setText(result);
        }else if(sN1!=null && sN2==null){
            tvShow.setText(sN1);
        }
        sN1=sN2=null;
}

break;
}
} 
```

和 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/rainbow"
 >

<LinearLayout android:paddingTop="22dp" android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="wrap_content" >
<EditText
    android:id="@+id/etCalc"
    android:layout_width="260dp"
    android:layout_height="60dp"
    android:layout_gravity="center"
    android:gravity="right"
    android:textSize="30dp"
    android:inputType="number" />
</LinearLayout>

<LinearLayout android:paddingRight="33dp" android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="wrap_content" >
<TextView
    android:id="@+id/tvShow"
    android:layout_width="100dp"
    android:layout_height="45dp"
    android:text=":-)"
    android:textSize="35dp"
    android:paddingRight="10dp"
    android:layout_gravity="right"
    android:background="@drawable/rect_buttons"
    android:gravity="right"
    ></TextView>"
</LinearLayout>
 <LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content"      android:gravity="center" android:paddingTop="20dp" >
<Button
    android:id="@+id/bPlus"
    android:layout_width="70dp"
    android:layout_height="50dp"
    android:textSize="30dp"
    android:gravity="center"
    android:text="+" />

<Button
    android:id="@+id/bMinus"
   android:layout_width="70dp"
    android:layout_height="50dp"
    android:textSize="30dp"
    android:text="-" />
 <Button
    android:layout_gravity="center"        
    android:id="@+id/bEqual"
    android:layout_width="70dp"
    android:layout_height="50dp"
    android:textSize="30dp"
    android:text="=" />

</LinearLayout>
<LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content"    android:gravity="center" >

<Button
    android:id="@+id/button1"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="1"
    android:textSize="30dp" />
<Button
    android:id="@+id/button2"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="2"
    android:textSize="30dp" />
  <Button
    android:id="@+id/button3"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="3"
    android:textSize="30dp" />
</LinearLayout>

<LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content"    android:gravity="center" >

<Button
    android:id="@+id/button4"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="4"
    android:textSize="30dp" />
<Button
    android:id="@+id/button5"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="5"
    android:textSize="30dp" />
  <Button
    android:id="@+id/butt6"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="6"
    android:textSize="30dp" />
</LinearLayout>
<LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content"    android:gravity="center" >

<Button
    android:id="@+id/butt7"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="7"
    android:textSize="30dp" />
<Button
    android:id="@+id/butt8"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="8"
    android:textSize="30dp" />
  <Button
    android:id="@+id/butt9"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:text="9"
    android:textSize="30dp" />
</LinearLayout>
<LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content"    android:gravity="center" >
<Button
    android:id="@+id/bDiv"
    android:layout_width="70dp"
    android:layout_height="50dp"
    android:textSize="30dp"
    android:text="/" />
<Button
    android:layout_gravity="center"        
    android:id="@+id/button0"
    android:layout_width="70dp"
    android:layout_height="50dp"
    android:textSize="30dp"
    android:text="0" />
<Button
    android:id="@+id/bMult"  android:layout_width="70dp"   android:layout_height="50dp" android:textSize="30dp" android:text="*" />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:19:40.657

`editText`当您单击按钮时，您必须使您的不可聚焦/可编辑并修改里面的文本。简单的 ！

# android - 如何将图像文件从 URL 下载到 ByteArray？

> ID：11708040
> 
> 赞同：2
> 
> 时间：2012-07-29T09:12:20.893
> 
> 标签：android, image, download

以下是我的代码：

```
private byte[] downloadImage(String image_url) {
            byte[] image_blob = null;
            URL _image_url = null;
            HttpURLConnection conn = null;
            InputStream inputStream = null;
            try {
                _image_url = new URL(image_url);
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }
            try {
                conn = (HttpURLConnection) _image_url.openConnection();

            } catch (IOException e) {
                e.printStackTrace();
            }
            conn.setDoInput(true);
            try {
                conn.connect();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            conn.setUseCaches(false);
            try {
                inputStream = conn.getInputStream();
                inputStream.read(image_blob);

            } catch (IOException ex) {
                ex.printStackTrace();
            } finally {
                try {
                    inputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                conn.disconnect();
            }
            return image_blob;
        } 
```

我想要做的是获取图像的字节数组。在包裹中使用它以将其转移到另一个活动。

使用此代码会报告 NullPointerException。任何人都可以说什么是错的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:26:31.620

您可能想像这样尝试：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(imageUrl);
HttpResponse response = client.execute(request);
HttpEntity entity = response.getEntity();
int imageLength = (int)(entity.getContentLength());
InputStream is = entity.getContent();

byte[] imageBlob = new byte[imageLength];
int bytesRead = 0;
while (bytesRead < imageLength) {
    int n = is.read(imageBlob, bytesRead, imageLength - bytesRead);
    if (n <= 0)
        ; // do some error handling
    bytesRead += n;
} 
```

顺便说一句： NullPointerException 是因为`image_blob`为空而引起的。您需要先分配数组，然后才能将数据读入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:27:45.677

您可以发送在缓存中下载的图像路径，而不是发送图像。您可以使用此方法来提供图像路径并将图像下载到本地路径。

```
 private String createLocal(String surl) {       
    URL url;
    try {

        url = new URL(surl);

        String tempname=String.valueOf(surl.hashCode());

        File root=getCacheDir();

        File localfile=new File(root.getAbsolutePath()+"/"+tempname);

        localfile.deleteOnExit();
        if(!localfile.exists()){
            InputStream is=url.openStream();
            OutputStream os = new FileOutputStream(localfile);
            CopyStream(is, os);
            os.close();
        }
        return localfile.getAbsolutePath();
    } catch (Exception e){
        return null;
    }
}
public static void CopyStream(InputStream is, OutputStream os) {
    final int buffer_size=1024;
    try {
        byte[] bytes = new byte[buffer_size];
        for(;;) {
            int count=is.read(bytes, 0, buffer_size);
            if(count == -1)
                break;
            os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T09:31:11.413

您的 byte[] image_blob 为空，在使用它之前，您必须像这样新建足够的空间：

```
image_blob = new byte[enough];
inputStream.read(image_blob); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-01T18:11:59.087

```
public static byte[] getByteArray(String url) throws IOException {
    InputStream inputStream = (InputStream) new URL(url).getContent();
    return IOUtils.toByteArray(inputStream);
} 
```

# wordpress - 更改 wordpress 管理员登录网址

> ID：11708048
> 
> 赞同：0
> 
> 时间：2012-07-29T09:13:09.237
> 
> 标签：wordpress

我已经搜索了一个小时，但找不到任何东西。所以我真的希望当有人访问 myblog.com/wp-admin 时看到 404 错误或其他错误。当他访问 myblog.com/wp-login.php 时，我想要用户体验同样的事情。所以基本上我需要限制对这 2 个 URL 的访问，以及如何配置让 myblog.com/login 拥有与 myblog.com/wp-admin 页面中相同的登录页面？我这样做是为了保护我的 wp 网站免受黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:18:55.993

您可以将`.htaccess`文件配置为仅接受您的 IP 地址，还可以使用用户名/密码保护您的 wp-admin 文件夹。

网上有很多关于这个的教程。

# c - 当两个进程试图访问 semaphore = 0 的临界区时会发生什么？

> ID：11708049
> 
> 赞同：2
> 
> 时间：2012-07-29T09:13:14.923
> 
> 标签：c, linux, shared-memory, semaphore

在我的代码中，我执行以下初始化：

```
struct PipeShm myPipe = { .init = 0 , .flag = FALSE , .mutex = NULL , .ptr1 = NULL , .ptr2 = NULL ,
        .status1 = -10 , .status2 = -10 , .semaphoreFlag = FALSE };

int initPipe()
{
    if (!myPipe.init)
    {
        myPipe.mutex = mmap (NULL, sizeof *myPipe.mutex, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, -1, 0);

        if (!sem_init (myPipe.mutex, 1, 0))  // semaphore is initialized to 0
        {
            myPipe.init = TRUE;
        }
        else
            perror ("initPipe");
    }
    return 1;   // always successful
} 
```

我可以有多个可以从中调用的进程`main()`（注意**fork**）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:49:01.097

AFAICS 你的错误在你的控制变量中。只有您的`mutex`变量在进程之间共享，而不是您的`init`或`flag`变量。这些是写时复制，因此您不会在不同的过程中看到更改。

您必须将所有控制变量打包到您创建的段中。为您需要的所有字段创建适当的`struct`类型。

顺便说一句，调用信号量`mutex`真的是个坏主意。互斥体具有与信号量完全不同的语义。（或者如果你真的将它用作互斥锁，我没有检查，在初始化程序中使用`pthread_mutex_t`with 。）`pshared`

**编辑后编辑：**不，它不会像这样工作。您确实必须将整体`struct`放在共享段中。所以你`struct PipeShm`必须包含 a`sem_t sem`而不是 a `sem_t* mutex`。然后你会做类似的事情

```
struct PipeShm * myPipe = 0;

int initPipe()
{
    if (!myPipe->init)
    {
        myPipe = mmap (NULL, sizeof *myPipe, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, -1, 0);

        if (!sem_init (myPipe->sem, 1, 0))  // semaphore is initialized to 0
        {
            myPipe->init = true;
        }
        else
            perror ("initPipe");
    }
    return 1;   // always successful
} 
```

您应该注意的其他事项：

*   `sem_t`接口可以被任何类型的 IO 或其他信号中断。您必须始终检查这些函数的返回，尤其是在收到函数时重新启动该函数`EINTR`。
*   Mondern C 有一个布尔值。您可以通过包含 和的`<stdbool.h>`名称轻松使用它。`bool``false``true`

# jquery - 砌体仅适用于第一个 div 类

> ID：11708051
> 
> 赞同：0
> 
> 时间：2012-07-29T09:13:23.020
> 
> 标签：jquery, wordpress, themes, blogs

我正在尝试将砌体应用到我正在制作的新博客主题中，但砌体仅适用于第一个 div 类“帖子”。你可以在这里看到它[http://mhutchinson.me.uk/](http://mhutchinson.me.uk/)。

我的砌体代码是

```
 $('#wrapper').masonry({ itemSelector: '.post',  columnWidth: 300}); 
```

如您所见，如果您检查元素，第一个 div 类只会获得 masonry 的附加定位。有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:28:32.430

看看你的源代码——你已经包含了 masonry Javascript 和

```
$('#wrapper').masonry({ itemSelector: '.post',  columnWidth: 300}); 
```

在循环内部，因此它被多次包含和调用。

将它放在您的 footer.php 中，而不是在 body 标记之前。更好的是，看看实现`imagesLoaded()`。`$(window).load()`我这么说的原因是，如果您有很多充满图像的帖子，您可能会在正确定位内容时遇到问题。这里的一些链接可能会有所帮助；

[http://masonry.desandro.com/demos/images.html](http://masonry.desandro.com/demos/images.html)

[带有 Wordpress 和 imagesLoaded 的 jQuery 砌体](https://stackoverflow.com/questions/11375195/jquery-masonry-with-wordpress-and-imagesloaded)

# c# - C# Panel.Refresh() 不调用绘画方法

> ID：11708056
> 
> 赞同：2
> 
> 时间：2012-07-29T09:14:36.197
> 
> 标签：c#, panel, repaint, .refresh

我正在尝试调用**panel1**绘制方法以用橙色线重新绘制面板（它以蓝色线启动）。

我已经尝试过 invalidate()、update() 和 refresh()，但似乎没有任何东西可以调用 panel1 的绘制事件...

绘画事件处理程序已添加到 panel1：

```
this.panel1.Paint += new System.Windows.Forms.PaintEventHandler(this.panel1_Paint); 
```

有人可以帮忙吗？

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Form1 testForm = new Form1();
        Application.Run(testForm);

        testForm.drawNewLine();
    }
} 
```

* * *

```
public partial class Form1 : Form
{
    bool blueLine = true;
    bool orangeLine = false;

    public Form1()
    {
        InitializeComponent();
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        Graphics g = e.Graphics;

        if (blueLine == true)
        {
            Pen bluePen = new Pen(Color.Blue, 3);
            g.DrawLine(bluePen, 30, 50, 30, 250);
        }
        else if (orangeLine == true)
        {
            Pen orangePen = new Pen(Color.Orange, 3);
            g.DrawLine(orangePen, 30, 50, 30, 250);
        }

        g.Dispose();
    }

    public void drawNewLine()
    {
        blueLine = false;
        orangeLine = true;
        //panel1.Invalidate();
        //panel1.Update();
        panel1.Refresh();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T09:27:07.313

`Application.Run(testForm);`阻塞直到表单关闭，所以当`drawNewLine()`被调用时 - 表单不再存在（创建一个在单击时调用它的按钮并检查自己，代码正在运行）。`Invalidate()`应该可以正常工作。

此外，您不应`Graphics`在绘制事件中处理传递给您的代码的对象。你不负责创建它，所以让创建它的代码来销毁它。

此外，`Pen`在您创建对象时处理它们。

# c# - 如何使用 REST 协议登录 WebService

> ID：11708061
> 
> 赞同：3
> 
> 时间：2012-07-29T09:15:25.507
> 
> 标签：c#, web-services, rest, httpwebrequest

我有 pdf 与 API 的描述。我必须登录他们的网络服务。Webservice 基于 REST 协议。要登录此网络服务，我必须像这样调用 url： [http ://api.webepartners.pl/wydawca/Authorize?login=test&password=pass](http://api.webepartners.pl/wydawca/Authorize?login=test&password=pass)

我有账号和密码。当我用我的登录名和 psw 和过去的 url 替换 test 并通过 webbrowser 时，它看起来没问题。不会发生错误。但我必须在 C# 中以编程方式进行。在谷歌我发现：http: [//developer.yahoo.com/dotnet/howto-rest_cs.html](http://developer.yahoo.com/dotnet/howto-rest_cs.html)

我试试这段代码：

```
Uri address = new Uri(@"http://api.webepartners.pl/wydawca/Authorize");

            // Create the web request  
            HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;

            // Set type to POST  
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";

            // Create the data we want to send  
            //string appId = "YahooDemo";
            //string context = "Italian sculptors and painters of the renaissance"
            //                    + "favored the Virgin Mary for inspiration";
            //string query = "madonna";

            string userName = "mylogin";
            string passsword = "mypassword";

            StringBuilder data = new StringBuilder();
            //data.Append("appid=" + HttpUtility.UrlEncode(appId));
            //data.Append("&context=" + HttpUtility.UrlEncode(context));
            //data.Append("&query=" + HttpUtility.UrlEncode(query));
            data.Append("login=" + HttpUtility.UrlEncode(userName));
            data.Append("&password=" + HttpUtility.UrlEncode(passsword));

            // Create a byte array of the data we want to send  
            byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.ToString());

            // Set the content length in the request headers  
            request.ContentLength = byteData.Length;

            // Write data  
            using (Stream postStream = request.GetRequestStream())
            {
                postStream.Write(byteData, 0, byteData.Length);
            }

            // Get response  
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse) // error
            {
                // Get the response stream  
                StreamReader reader = new StreamReader(response.GetResponseStream());
            } 
```

我在使用 (HttpWebResponse response = request.GetResponse() as ..

```
An exception of type 'System.Net.WebException' occurred in System.dll but was not handled in user code

Additional information: The remote server returned an error: (405) Method Not Allowed. 
```

谁能帮我 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:29:48.467

您正在发送带有用户名和密码的 POST 请求作为请求正文的一部分。但似乎 Web 服务需要一个 GET 服务，其中所有内容都在请求的 URL 中。

```
String uriStr = @"http://api.webepartners.pl/wydawca/Authorize?login="
    + HttpUtility.UrlEncode(userName) + "&password=" + HttpUtility.UrlEncode(passsword);
Uri address = new Uri(uriStr);
HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;

// Get response 
using (HttpWebResponse response = request.GetResponse() as HttpWebResponse) // error
{
    // Get the response stream  
    StreamReader reader = new StreamReader(response.GetResponseStream());
} 
```

…………

```
GET http://api.webepartners.pl/wydawca/Authorize?from=2012-07-29%2013:47:05 HTTP/1.1
Content-Type: text/xml; encoding='utf-8'
Host: api.webepartners.pl
Cookie: .ASPXAUTH=7521F26EBCE8CE487C6860C5E98248B540E5591BD6AE7EC936ECE29B0912AC49C71837B98D7972ABA9C868F18A0C6FCD1EB38B22BE86DBCCCDF8D56D0440170FECF497FF00A1B5D7B268EF6DF27B2B9DB806291E517654A136EC5617A67182DB3E3ECF0D8ADA6F3927C2F955A92E20B7BF7AE6D7DAE2AED0B0D9A7BD406C2CF4

HTTP/1.1 403 Forbidden
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Sun, 29 Jul 2012 11:47:03 GMT
Content-Length: 1233

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>403 - Forbidden: Access is denied.</title>
<style type="text/css">
<!--
body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
fieldset{padding:0 15px 10px 15px;} 
h1{font-size:2.4em;margin:0;color:#FFF;}
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
background-color:#555555;}
#content{margin:0 0 0 2%;position:relative;}
.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
-->
</style>
</head>
<body>
<div id="header"><h1>Server Error</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>403 - Forbidden: Access is denied.</h2>
  <h3>You do not have permission to view this directory or page using the credentials that you supplied.</h3>
 </fieldset></div>
</div>
</body>
</html> 
```

就是这样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:29:22.690

这个 url`http://api.webepartners.pl/wydawca/Authorize?login=test&password=pass`有一个查询字符串。由于在 a 期间不使用查询字符串值`POST`，也许您应该尝试 a`GET`吗？您使用的 HTTP 动词不正确并出现错误是有道理的`405`。

# asp.net - ASP.NET 查看成员是否在线

> ID：11708070
> 
> 赞同：2
> 
> 时间：2012-07-29T09:16:42.793
> 
> 标签：asp.net, asp.net-membership, umbraco, membership-provider

我正在 umbraco 开发一个 ASP.NET 站点，我需要查看具有给定 ID 的成员是否在线。我怎样才能做到这一点？

到目前为止，我已经尝试通过以下方式获得成员：

```
Member m = new Member(myID); 
```

但是如何检查返回的成员是否已登录？

编辑：我点击了链接，并从中提取了以下代码：

```
var users = Membership.GetAllUsers();

foreach(MembershipUser user in users){
  Response.Write(user.IsOnline.ToString() +"<br/>");
  Response.Write(user.LastActivityDate.ToString() + "<br/>");
  Response.Write(user.LastLoginDate.ToString() + "<br/>");
} 
```

但是，返回的结果显示属性 isOnline 对于每个成员都是 true，即使他们不在线。我知道这是因为每当我访问用户时 LastActivityDate 都会自动更新，如此处所述：[是否可以在不更新 LastActivityDate 的情况下访问个人资料？](https://stackoverflow.com/questions/3438200/is-it-possible-to-access-a-profile-without-updating-lastactivitydate). 不幸的是，我没有得到这个问题的解决方案。

我还尝试通过以下方式访问成员： MembershipUser m = Membership.GetUser('myID',false); 但即使我将 false 作为第二个参数，LastActivityDate 仍然会更新。我该如何解决这个问题？我应该注意，我在本地主机的 umbraco 4.7 中使用 ASP.NET v. 4.0。

谢谢！

:编辑结束

最好的问候， Brinck10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:51:32.703

如果当前日期和时间减去 UserIsOnlineTimeWindow 属性值早于用户的 lastActivityDate，则可以使用[MembershipUser.IsOnline 属性。](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.isonline.aspx)

[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.isonline.aspx)上有一个示例。

相对：
[asp.net 成员的正确 100% IsOnline 实施](https://stackoverflow.com/questions/1130548/proper-100-isonline-implementation-for-asp-net-membership)
[如果用户在线，如何检查 ASP.NET？](https://stackoverflow.com/questions/2350278/how-to-check-in-asp-net-if-the-user-is-online)
[asp.net 自定义成员资格提供程序：IsOnline 属性](https://stackoverflow.com/questions/1288248/asp-net-custom-membership-provider-isonline-property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:47:05.503

问题的解决方案：

(1) 我在名为 lastActivityDate 的 membertype 中创建了一个 costum 字段。

(2) 我在主页上放了一个宏，在会员在线的情况下，将会员的lastActivityDate更新为当前时间。

(3) 在验证页面上，我检查了 lastActivityDate + CostumBuffer 是否大于 DateTime.Now。

感谢您的耐心亚里斯托斯。

# c++ - 另一个与“解释”概念有关的混淆。请参见

> ID：11708072
> 
> 赞同：0
> 
> 时间：2012-07-29T09:16:50.377
> 
> 标签：c++, compilation, interpreter

我将通过使用我想出的以下示例来说明我心中的疑问。

考虑下面编写的 C++ 代码：

```
#include<iostream.h>

void main()
{
 cout<<"LULZ \n";
 cout<<"\n Enter anything\n";
 int a;
 cin>>a;

 goto noexistence; 

} 
```

现在，我的问题是，如果这段代码被编译然后在不同的情况下被解释，最终用户的输出会有什么不同？当我们编译它时，它会给出一个编译时错误并且会抱怨不存在这样的标签（noexistence）。

但是当这段代码被解释时会发生什么呢？我不知道是否有 C/C++ 的解释器（我从 CERN 听说过 CINT ROOT，但我不知道如何操作它）但从理论上讲，解释如何在标签不存在的情况下捕捉到这种谬误定义？

我问这个问题是因为我在解释中读过很多次，“代码是逐行执行的”。我永远无法理解“逐行”的概念。任何人都可以对此有所了解，因为这个问题现在正在吞噬我，呵呵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:27:18.160

解释器读取输入代码并在执行前快速解析它。

有时，解析只是将行读入链表。如果这全部是解析解释器实现的，那么它将开始扫描所有输入行以查找 goto 标签，并打印一个错误，指出未找到标签。

更智能的解释器可以在继续执行已执行的行时创建跳转表。在这种情况下，可以在此表中搜索标签（用于向后引用），也可以在以下行中扫描（用于向前引用）。

另一个解释器可以选择解析所有输入中的所有标记，并在运行第一条语句之前创建一个跳转表。这样的解释器只会检查跳转表并打印出错误消息。

所以这一切都取决于。但是，编译器会在任何执行尝试之前解析输入并将其编译为可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:23:21.250

你读过关于[编译器](http://en.wikipedia.org/wiki/Compiler)、[解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)、[字节码](http://en.wikipedia.org/wiki/Byte_code)、[C++的东西吗？](http://en.wikipedia.org/wiki/C++)

C++ 标准没有说明如何执行 C++ 程序。你可以在头脑中（或用铅笔和纸）来做，你可以使用一群人类奴隶（但这是不道德的），你可以使用魔法来执行 C++ 程序。大多数人使用编译器和计算机。

你可以有一个 C++ 解释器

在实践和历史上，C++ 是从 C 演变而来的，主要（不为人知的）假设是它可以以某种方式用真实的编译器编译用于真实的硬件。

解释器和编译器不是黑白分明的；有中间方法（特别是转换为字节码或[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，然后对其进行解释）。

我当然不会将“解释器”定义为逐行工作的东西。大多数口译员不是这样工作的。他们通常至少读取和解析整个“函数”。

# c++ - 结构和对象创建

> ID：11708079
> 
> 赞同：0
> 
> 时间：2012-07-29T09:18:17.783
> 
> 标签：c++, arrays, object, structure

我正忙于一项任务，我必须创建一个结构，并且使用该结构我必须创建和删除一个对象。

这是我如何创建内部带有函数的结构。

```
struct Operation
{
    char op;
    double (*apply)(Operation*, double,double); // takes two doubles
} 
```

我完全理解。现在必须创建对象。

```
Operation* Make(char op)
{
    Operation* ret = new Operation;
    ret -> op = op;
    ret -> apply = doit;//doit is a norther function 
    return ret;
} 
```

我知道“->”歌剧与说：

```
(*ret).op = op; 
```

和删除对象；

```
void BrakeObject(Operation& o)
{
    delete o;
    o = NULL;
} 
```

该功能（应用）是否与基本功能相同？这是一个数组吗？

```
 Operation* ret = new Operation; 
```

对象是什么，它只是一个函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:30:56.423

为什么是动态分配？为什么不简单：

```
Operation Make(char op)
{
    Operation ret = {op, doit};
    return ret;
} 
```

或者，如果您使用的是 C++11，只需：

```
Operation Make(char op)
{
    return {op, doit};
} 
```

在这两种情况下，不再需要手动删除。

还有，为什么`apply`要另做手术？评论说“需要两次双打”，所以：

```
double (*apply)(double,double); 
```

对我来说更有意义。还有，`doit`从哪里来？将 apply 函数也作为参数传递不是更有意义吗？这是包含所有建议更改的程序：

```
struct Operation
{
    char op;
    double (*apply)(double, double);
}

Operation Make(char op, double (*apply)(double, double))
{
    Operation ret = {op, apply};
    return ret;
}

double add(double x, double y)
{
    return x + y;
}

Operation op_add = Make('+', add); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:33:12.767

看来您的愿景与任务不匹配...

A）结构 `char op;`不能是“对象”。这是一个“价值”，嗯......但`char *op;`可能没问题？

B) 数组。

```
Operation* ret = new Operation; //is this a array? 
```

没有。您已经创建了一个指向单个值的指针。

C) 操作员。这是错误的语法

```
(*ret) op = op; 
```

这会好的

```
(*ret).op = op; 
```

D) 删除

```
void break(Operation& o) 
```

这是错误的语法，这没关系

```
void BrakeObject(Operation*& o)
{
  delete o;
  o = NULL;
} 
```

# sql - 比较同一组中的列数据

> ID：11708086
> 
> 赞同：0
> 
> 时间：2012-07-29T09:19:26.540
> 
> 标签：sql, sql-server, sql-server-2008

我有一个问题，我无法转换成 sql 假设我有 2 个表 table1 和 table2，这样 table1 的 3 列（P，L，T）代表传输状态之前

```
P1 L1 t1
P1 L1 t2
P1 L2 t3
P2 L5 t4
P2 L5 t5
P2 L6 t6 
```

表 2 的 3 列 (P, L, T) 表示转移后

```
P1 L3 t1
P1 L3 t2
P1 L4 t3 
P2 L15 t4
P2 L16 t5
P2 L16 t6 
```

table1 和 table2 之间的唯一区别是 L 列。我们将有相同的 P 和 T 列。我想选择 p 使得属于同一个旧 L 的 T 仍然属于同一个新 L，其中 T 的计数按 L > 1 分组。

```
**Case** (table1)t1,t2 At L1(old L) and (Table2)t1, t2 At L3(new L). Count of T grouped by L =2  and t1, t2 belong to same L group then return P.

**Case** table1: t3 at L2 and table2: t3 at L4\. Count of T grouped by L =1 then ignore P.

**Case** (table1)t4,t5 At L5(old L) and (Table2)t4, t5 At L15 and L16(new L). Count of T grouped by L =2  but t4, t5 belong to different L group then ignore P. 
```

我需要按 L 比较 count(T) 和 Ts 组并返回 P 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:35:36.460

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:47:35.727

我通过创建一个包含无效行的表变量解决了这个问题，P,T 的表变量并从 table1 join table2 group by table1.p 中选择，table1.L

```
Drop table table1
Drop table Table2
create table table1
(
P bigint, L bigINt, T BigInt
)
create table table2
(
P bigint, L bigINt, T BigInt
)
Declare @Invalid_Ps table(P BIGINT, L BIGINT)
Insert INTO @Invalid_Ps (P, L)
Select a.Tbl1P ,a.Tbl1L
FROM
(Select tbl1.P as Tbl1P, tbl1.L as Tbl1L,Tbl2.L as Tbl2L , Tbl1.T as Tbl1T
from Table1 as tbl1 Join Table2 as tbl2
ON tbl1.P = Tbl2.P
Group By tbl1.P, tbl1.L,Tbl2.L, Tbl1.T
) a
 GROUp BY a.Tbl1P,a.Tbl1L
Having (SUM(a.Tbl2L) IS NULL OR count(distinct a.Tbl2L) <> 1) 
```

# html - 填充容器顶部间隙的浮动元素？

> ID：11708089
> 
> 赞同：-1
> 
> 时间：2012-07-29T09:19:52.733
> 
> 标签：html, css, css-float

是否可以让具有相同宽度（100 像素）和不同高度的 HTML 元素填充具有固定宽度（300 像素）的容器顶端的所有间隙？

到目前为止我得到了什么。[**小提琴**](http://jsfiddle.net/Adsgn/vXyxV/)

如您所见，第 4、第 5 和第 6 块并没有填补上面的空白。在不需要 Javascript 的情况下，这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:22:53.700

使用您正在使用的 html 布局的纯 CSS 是不可能的。有一个名为 Masonry 的插件在这种布局中很受欢迎：http: [//masonry.desandro.com/](http://masonry.desandro.com/)

# google-app-engine - 每个用户的 Google 存储空间

> ID：11708091
> 
> 赞同：0
> 
> 时间：2012-07-29T09:20:02.530
> 
> 标签：google-app-engine, google-cloud-storage

我想创建由桌面应用程序和谷歌云存储组成的应用程序。所以，我的每个客户都应该有单独的云存储。谷歌提供这样的东西吗？

更多信息。因为我不知道什么可以提供谷歌应用引擎我写了这个问题。我的桌面应用程序需要一些数据库托管。将来我想我会切换到 GWT 和应用程序引擎。我想出售我的应用程序，这样我的每个客户都无法访问我的其他客户数据库。我在想如果每个客户端都在单独的数据库中拥有数据会更安全，这样我就不会在代码中犯一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:31:01.150

您可以使用谷歌应用引擎上的命名空间来分隔数据存储区中的数据：

[https://developers.google.com/appengine/docs/java/multitenancy/multitenancy](https://developers.google.com/appengine/docs/java/multitenancy/multitenancy)

由您决定如何实现命名空间。您可以通过您的用户身份验证系统将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:34:39.410

您可以使用上面@dragonx 指出的 GAE 命名空间功能，无需 Google 身份验证。

使用客户端名称作为命名空间标识符（需要唯一）。如何获取此客户名称取决于您。如果您愿意，它可以存储在 GAE 本身中，或者可以从特定于客户端使用的 url 中破译。

请查看 GAE 多租户链接[https://developers.google.com/appengine/docs/java/multitenancy/multitenancy](https://developers.google.com/appengine/docs/java/multitenancy/multitenancy)

这里的示例可以很容易地适应每个客户端使用任何字符串标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T09:36:55.477

您可以为每个客户端创建一个文件夹并将文件夹访问权限限制为用户（仅适用于 Google 帐户），或者您可以对存储桶执行相同操作，为每个用户创建一个存储桶（如果您有很多用户，这可能是一个开销） .

* * *

对于数据库 AppEngine 数据存储区能够[按命名空间分隔数据](https://developers.google.com/appengine/docs/java/multitenancy/multitenancy)。这不需要任何用户帐户，您有责任为每个请求选择使用哪个命名空间。

# javascript - 检测浏览器自动填充

> ID：11708092
> 
> 赞同：213
> 
> 时间：2012-07-29T09:20:06.877
> 
> 标签：javascript, jquery, events, event-handling, autofill

如何判断浏览器是否自动填充了文本框？尤其是在页面加载时自动填充的用户名和密码框。

我的第一个问题是这在页面加载序列中何时发生？是在 document.ready 之前还是之后？

其次，我如何使用逻辑来确定是否发生了这种情况？不是我想阻止这种情况发生，只是加入事件。最好是这样的：

```
if (autoFilled == true) {

} else {

} 
```

如果可能的话，我希望看到一个 jsfiddle 显示您的答案。

**可能的重复**

[浏览器密码自动填充的DOM事件？](https://stackoverflow.com/questions/3535738/dom-event-for-browser-password-autofill)

[浏览器自动填充和 Javascript 触发事件](https://stackoverflow.com/questions/4938242/browser-autofill-and-javascript-triggered-events)

--这两个问题都没有真正解释触发了什么事件，它们只是不断地重新检查文本框（对性能不利！）。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-07-29T15:07:47.180

问题是不同浏览器对自动填充的处理方式不同。有些发送更改事件，有些则不发送。因此，几乎不可能挂钩在浏览器自动完成输入字段时触发的事件。

*   更改不同浏览器的事件触发器：

    *   对于用户名/密码字段：

        1.  Firefox 4、IE 7 和 IE 8 不会调度 change 事件。
        2.  Safari 5 和 Chrome 9 确实会发送 change 事件。
    *   对于其他表单字段：

        1.  IE 7 和 IE 8 不会调度 change 事件。
        2.  当用户从建议列表中选择一个值并从字段中选择一个值时，Firefox 4 会发送 change change 事件。
        3.  Chrome 9 不会调度 change 事件。
        4.  Safari 5 确实调度了 change 事件。

您最好的选择是禁用表单中使用`autocomplete="off"`的表单的自动完成功能，或者定期轮询以查看其是否已填写。

对于您是否在 document.ready 之前或之前填写的问题，它因浏览器而异，甚至因版本而异。仅当您选择用户名密码字段时，才会填写用户名/密码字段。因此，如果您尝试附加到任何事件，您将拥有一个非常混乱的代码。

你可以好好阅读[这里](http://avernet.blogspot.in/2010/11/autocomplete-and-javascript-change.html)

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2017-01-08T06:35:59.627

## WebKit 浏览器解决方案

***来自:-webkit-autofill*** CSS 伪类的 MDN 文档：

> 当元素的值被浏览器自动填充时， :-webkit-autofill CSS 伪类匹配

编辑后，我们可以在所需元素上定义一个 void*过渡*css 规则。JS 将能够挂钩该事件。`<input>``:-webkit-autofill``animationstart`

感谢[Klarna UI](https://github.com/klarna/ui)团队。在这里查看他们很好的实现：

*   [CSS 规则](https://github.com/klarna/ui/blob/v4.10.0/Field/styles.scss#L228-L241)
*   [JS钩子](https://github.com/klarna/ui/blob/v4.10.0/Field/index.jsx#L104-L114)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-06-01T18:36:16.270

这适用于我最新的 Firefox、Chrome 和 Edge：

```
$('#email').on('blur input', function() {
    ....
}); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-05-31T09:24:15.890

我正在阅读很多有关此问题的信息，并希望提供一个非常快速的解决方法来帮助我。

```
let style = window.getComputedStyle(document.getElementById('email'))
  if (style && style.backgroundColor !== inputBackgroundNormalState) {
    this.inputAutofilledByBrowser = true
  } 
```

我的模板在哪里`inputBackgroundNormalState`是 'rgb(255, 255, 255)'。

所以基本上当浏览器应用自动完成时，它们倾向于通过在输入上应用不同的（烦人的）黄色来指示输入是自动填充的。

编辑：这适用于每个浏览器

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2016-05-24T07:36:46.663

对于谷歌浏览器自动完成，这对我有用：

```
if ($("#textbox").is(":-webkit-autofill")) 
{    
    // the value in the input field of the form was filled in with google chrome autocomplete
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-08-19T21:14:38.687

以防万一有人正在寻找解决方案（就像我今天一样），要收听浏览器自动填充更改，这是我构建的自定义 jquery 方法，只是为了在向输入添加更改侦听器时简化过程：

```
 $.fn.allchange = function (callback) {
        var me = this;
        var last = "";
        var infunc = function () {
            var text = $(me).val();
            if (text != last) {
                last = text;
                callback();
            }
            setTimeout(infunc, 100);
        }
        setTimeout(infunc, 100);
    }; 
```

你可以这样称呼它：

```
$("#myInput").allchange(function () {
    alert("change!");
}); 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-05-12T15:15:36.373

我也遇到了同样的问题，标签没有检测到自动填充和填充文本上移动标签的动画重叠，这个解决方案对我有用。

```
input:-webkit-autofill ~ label {
    top:-20px;
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-07-16T15:06:49.600

不幸的是，我发现检查这个跨浏览器的唯一可靠方法是轮询输入。为了使其响应也听事件。Chrome 已经开始从需要 hack 的 javascript 中隐藏自动填充值。

*   每半秒到三分之一秒轮询一次（在大多数情况下不需要即时）
*   使用 JQuery 触发更改事件，然后在侦听更改事件的函数中执行您的逻辑。
*   为 Chrome 隐藏的自动填充密码值添加修复程序。

    ```
    $(document).ready(function () {
        $('#inputID').change(YOURFUNCTIONNAME);
        $('#inputID').keypress(YOURFUNCTIONNAME);
        $('#inputID').keyup(YOURFUNCTIONNAME);
        $('#inputID').blur(YOURFUNCTIONNAME);
        $('#inputID').focusin(YOURFUNCTIONNAME);
        $('#inputID').focusout(YOURFUNCTIONNAME);
        $('#inputID').on('input', YOURFUNCTIONNAME);
        $('#inputID').on('textInput', YOURFUNCTIONNAME);
        $('#inputID').on('reset', YOURFUNCTIONNAME);

        window.setInterval(function() {
            var hasValue = $("#inputID").val().length > 0;//Normal
            if(!hasValue){
                hasValue = $("#inputID:-webkit-autofill").length > 0;//Chrome
            }

            if (hasValue) {
                $('#inputID').trigger('change');
            }
        }, 333);
    }); 
    ```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-09-13T23:28:41.850

我的解决方案：

`change`像往常一样收听事件，并在 DOM 内容加载时执行以下操作：

```
setTimeout(function() {
    $('input').each(function() {
        var elem = $(this);
        if (elem.val()) elem.change();
    })
}, 250); 
```

这将在用户有机会编辑它们之前为所有非空字段触发更改事件。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-04-27T23:16:46.283

在 github 上有一个新的 polyfill 组件来解决这个问题。看看[autofill-event](https://github.com/tbosch/autofill-event)。只需要凉亭安装它，瞧，自动填充按预期工作。

```
bower install autofill-event 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-06-02T12:14:03.380

我一直在寻找类似的东西。仅限 Chrome ......在我的情况下，包装器 div 需要知道输入字段是否被自动填充。所以我可以给它额外的css，就像Chrome在自动填充输入字段时所做的那样。通过查看上面的所有答案，我的组合解决方案如下：

```
/* 
 * make a function to use it in multiple places
 */
var checkAutoFill = function(){
    $('input:-webkit-autofill').each(function(){
        $(this).closest('.input-wrapper').addClass('autofilled');
    });
}

/* 
 * Put it on the 'input' event 
 * (happens on every change in an input field)
 */
$('html').on('input', function() {
    $('.input-wrapper').removeClass('autofilled');
    checkAutoFill();
});

/*
 * trigger it also inside a timeOut event 
 * (happens after chrome auto-filled fields on page-load)
 */
setTimeout(function(){ 
    checkAutoFill();
}, 0); 
```

这个工作的html是

```
<div class="input-wrapper">
    <input type="text" name="firstname">
</div> 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-09-05T13:28:16.940

这是来自 Klarna UI 团队的 CSS 解决方案。在这里查看他们很好的实现[资源](https://github.com/klarna/ui/blob/v4.10.0/Field/styles.scss#L228-L241)

对我来说很好。

```
input:-webkit-autofill {
  animation-name: onAutoFillStart;
  transition: background-color 50000s ease-in-out 0s;
}
input:not(:-webkit-autofill) {
  animation-name: onAutoFillCancel;
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-04-10T21:15:20.927

我知道这是一个旧线程，但我可以想象很多人会在这里找到解决方案。

为此，您可以检查输入是否具有以下值：

```
$(function() {
    setTimeout(function() {
        if ($("#inputID").val().length > 0) {
            // YOUR CODE
        }
    }, 100);
}); 
```

当加载以启用提交按钮时，我自己使用它来检查登录表单中的值。该代码是为 jQuery 编写的，但如果需要，很容易更改。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-06-09T01:43:50.360

在 chrome 上，您可以通过为自动填充元素设置特殊的 css 规则来检测自动填充字段，然后使用 javascript 检查元素是否应用了该规则。

例子：

CSS

```
input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 30px white inset;
} 
```

JavaScript

```
 let css = $("#selector").css("box-shadow")
  if (css.match(/inset/))
    console.log("autofilled:", $("#selector")) 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-02-12T17:22:56.583

这是带有**webkit 渲染引擎**的浏览器的解决方案。当表单被自动填充时，输入将得到伪类**：-webkit-autofill-**（fe 输入：-webkit-autofill {...}）。所以这是您必须通过 JavaScript 检查的标识符。

使用一些测试表格的解决方案：

```
<form action="#" method="POST" class="js-filled_check">

    <fieldset>

        <label for="test_username">Test username:</label>
        <input type="text" id="test_username" name="test_username" value="">

        <label for="test_password">Test password:</label>
        <input type="password" id="test_password" name="test_password" value="">

        <button type="submit" name="test_submit">Test submit</button>

    </fieldset>

</form> 
```

和 javascript：

```
$(document).ready(function() {

    setTimeout(function() {

        $(".js-filled_check input:not([type=submit])").each(function (i, element) {

            var el = $(this),
                autofilled = (el.is("*:-webkit-autofill")) ? el.addClass('auto_filled') : false;

            console.log("element: " + el.attr("id") + " // " + "autofilled: " + (el.is("*:-webkit-autofill")));

        });

    }, 200);

}); 
```

页面加载时的问题是获取密码值，甚至长度。这是因为浏览器的安全性。还有**timeout**，这是因为浏览器会在一段时间后填写表单。

此代码会将类**auto_fill**添加到填充的输入。另外，我尝试检查输入类型密码值或长度，但它在页面上发生某些事件后才起作用。所以我尝试触发一些事件，但没有成功。现在这是我的解决方案。享受！

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-06-26T09:54:55.260

我有这个问题的完美解决方案试试这个代码片段。
[演示在这里](https://jsfiddle.net/sureshpattu/zg88c7um/1/)

```
function ModernForm() {
    var modernInputElement = $('.js_modern_input');

    function recheckAllInput() {
        modernInputElement.each(function() {
            if ($(this).val() !== '') {
                $(this).parent().find('label').addClass('focus');
            }
        });
    }

    modernInputElement.on('click', function() {
        $(this).parent().find('label').addClass('focus');
    });
    modernInputElement.on('blur', function() {
        if ($(this).val() === '') {
            $(this).parent().find('label').removeClass('focus');
        } else {
            recheckAllInput();
        }
    });
}

ModernForm();
```

```
.form_sec {
  padding: 30px;
}
.form_sec .form_input_wrap {
  position: relative;
}
.form_sec .form_input_wrap label {
  position: absolute;
  top: 25px;
  left: 15px;
  font-size: 16px;
  font-weight: 600;
  z-index: 1;
  color: #333;
  -webkit-transition: all ease-in-out 0.35s;
  -moz-transition: all ease-in-out 0.35s;
  -ms-transition: all ease-in-out 0.35s;
  -o-transition: all ease-in-out 0.35s;
  transition: all ease-in-out 0.35s;
}
.form_sec .form_input_wrap label.focus {
  top: 5px;
  color: #a7a9ab;
  font-weight: 300;
  -webkit-transition: all ease-in-out 0.35s;
  -moz-transition: all ease-in-out 0.35s;
  -ms-transition: all ease-in-out 0.35s;
  -o-transition: all ease-in-out 0.35s;
  transition: all ease-in-out 0.35s;
}
.form_sec .form_input {
  width: 100%;
  font-size: 16px;
  font-weight: 600;
  color: #333;
  border: none;
  border-bottom: 2px solid #d3d4d5;
  padding: 30px 0 5px 0;
  outline: none;
}
.form_sec .form_input.err {
  border-bottom-color: #888;
}
.form_sec .cta_login {
  border: 1px solid #ec1940;
  border-radius: 2px;
  background-color: #ec1940;
  font-size: 14px;
  font-weight: 500;
  text-align: center;
  color: #ffffff;
  padding: 15px 40px;
  margin-top: 30px;
  display: inline-block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<form class="form_sec">
    <div class="row clearfix">
        <div class="form-group col-lg-6 col-md-6 form_input_wrap">
            <label>
                Full Name
            </label>
            <input type="text" name="name" id="name" class="form_input js_modern_input">
        </div>
    </div>
    <div class="row clearfix">
        <div class="form-group form_input_wrap col-lg-6 col-md-6">
            <label>
                Emaill
            </label>
            <input type="email" name="email" class="form_input js_modern_input">
        </div>
    </div>
    <div class="row clearfix">
        <div class="form-group form_input_wrap col-lg-12 col-md-12">
            <label>
                Address Line 1
            </label>
            <input type="text" name="address" class="form_input js_modern_input">
        </div>
    </div>
    <div class="row clearfix">
        <div class="form-group col-lg-6 col-md-6 form_input_wrap">
            <label>
                City
            </label>
            <input type="text" name="city" class="form_input js_modern_input">
        </div>
        <div class="form-group col-lg-6 col-md-6 form_input_wrap">
            <label>
                State
            </label>
            <input type="text" name="state" class="form_input js_modern_input">
        </div>
    </div>
    <div class="row clearfix">
        <div class="form-group col-lg-6 col-md-6 form_input_wrap">
            <label>
                Country
            </label>
            <input type="text" name="country" class="form_input js_modern_input">
        </div>
        <div class="form-group col-lg-4 col-md-4 form_input_wrap">
            <label>
                Pin
            </label>
            <input type="text" name="pincode" class="form_input js_modern_input">
        </div>
    </div>
    <div class="row cta_sec">
        <div class="col-lg-12">
            <button type="submit" class="cta_login">Submit</button>
        </div>
    </div>
</form>
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-08-21T22:55:02.720

在 Chrome 和 Edge (2020) 中，检查`:-webkit-autofill`会告诉您输入已被填充。但是，在用户以某种方式与页面交互之前，您的 JavaScript 无法获取输入中的值。

在代码中使用`$('x').focus()`和`$('x').blur()`/或触发鼠标事件无济于事。

见[https://stackoverflow.com/a/35783761/32429](https://stackoverflow.com/a/35783761/32429)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-12-25T10:09:52.857

在 2020 年，这就是在 chrome 中对我有用的方法：

```
// wait 0.1 sec to execute action after detecting autofill
// check if input username is autofilled by browser
// enable "login" button for click to submit form
 $(window).on("load", function(){
       setTimeout(function(){

           if ($("#UserName").is("input:-webkit-autofill")) 
           $("#loginbtn").prop('disabled', false); 

      }, 100);
 }); 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-09-17T14:56:03.040

我将此解决方案用于相同的问题。

HTML 代码应更改为：

```
<input type="text" name="username" />
<input type="text" name="password" id="txt_password" /> 
```

和 jQuery 代码应该在`document.ready`：

```
$('#txt_password').focus(function(){
    $(this).attr('type','password');
}); 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-12-07T01:21:22.150

我花了几个小时解决了在第一页加载时检测自动填充输入的问题（没有采取任何用户操作），并**找到了适用于 Chrome、Opera、Edge 和 FF 的理想解决方案**！

## 在 Chrome、Opera 上，Edge 问题得到了相当的解决 EZ

通过使用伪类搜索元素`input:-webkit-autofill`并执行所需的操作（在我的情况下，我正在更改输入包装类以使用浮动标签模式更改标签位置）。

## 问题出在火狐上

因为 FF 没有这样的伪类或类似的类（正如许多人建议的“:-moz-autofill”），只需搜索 DOM 就可以看到。您也找不到输入的黄色背景。唯一的原因是浏览器通过更改过滤器属性添加了这种黄色：

`input:-moz-autofill, input:-moz-autofill-preview { filter: grayscale(21%) brightness(88%) contrast(161%) invert(10%) sepia(40%) saturate(206%); }`

因此，对于 Firefox，您必须首先搜索所有输入并获取其计算样式，然后与浏览器设置中硬编码的此过滤器样式进行比较。我真的不知道他们为什么不使用简单的背景颜色，而是使用那个奇怪的滤镜！？他们让生活变得更加艰难；）

这是我的代码在我的网站（[https://my.oodo.pl/en/modules/register/login.php](https://my.oodo.pl/en/modules/register/login.php)）上像一个魅力一样工作：

```
<script type="text/javascript">
/* 
 * this is my main function
 */
var checkAutoFill = function(){
    /*first we detect if we have FF or other browsers*/
    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
    if (!isFirefox) {
        $('input:-webkit-autofill').each(function(){
        /*here i have code that adds "focused" class to my input wrapper and changes 
        info instatus div. U can do what u want*/
        $(this).closest('.field-wrapper').addClass('focused');
        document.getElementById("status").innerHTML = "Your browser autofilled form";
        });
    }
    if (isFirefox) {
        $('input').each(function(){
        var bckgrnd = window.getComputedStyle(document.getElementById(this.id), null).getPropertyValue("background-image");
        if (bckgrnd === 'linear-gradient(rgba(255, 249, 145, 0.5), rgba(255, 249, 145, 0.5))') {
        /*if our input has that filter property customized by browserr with yellow background i do as above (change input wrapper class and change status info. U can add your code here)*/
        $(this).closest('.field-wrapper').addClass('focused');
        document.getElementById("status").innerHTML = "Your Browser autofilled form";
        }
        })
    }
}
/*im runing that function at load time and two times more at 0.5s and 1s delay because not all browsers apply that style imediately (Opera does after ~300ms and so Edge, Chrome is fastest and do it at first function run)*/
checkAutoFill();
setTimeout(function(){ 
checkAutoFill();
}, 500);
setTimeout(function(){ 
checkAutoFill();
}, 1000);
})
</script> 
```

我在这里手动编辑了上面的代码，以丢弃一些对你来说不重要的垃圾。如果它对您不起作用，请粘贴到您的 IDE 中并仔细检查语法；）当然添加一些调试警报或控制台日志并进行自定义。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-12-09T20:13:26.530

对于正在寻找 2020 年纯 JS 解决方案来检测自动填充的任何人，都可以。

请原谅标签错误，不能让它很好地坐在 SO

```
 //Chose the element you want to select - in this case input
    var autofill = document.getElementsByTagName('input');
    for (var i = 0; i < autofill.length; i++) {
      //Wrap this in a try/catch because non webkit browsers will log errors on this pseudo element
      try{
        if (autofill[i].matches(':-webkit-autofill')) {
            //Do whatever you like with each autofilled element
        }
      }
      catch(error){
        return(false);
      }
     } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-04-29T22:39:37.073

我在用户名上使用了 blur 事件来检查 pwd 字段是否已自动填充。

```
 $('#userNameTextBox').blur(function () {
        if ($('#userNameTextBox').val() == "") {
            $('#userNameTextBox').val("User Name");
        }
        if ($('#passwordTextBox').val() != "") {
            $('#passwordTextBoxClear').hide(); // textbox with "Password" text in it
            $('#passwordTextBox').show();
        }
    }); 
```

这适用于 IE，应该适用于所有其他浏览器（我只检查过 IE）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-10-24T08:43:27.640

我有同样的问题，我已经写了这个解决方案。

它在页面加载时开始轮询每个输入字段（我设置了 10 秒，但您可以调整此值）。
10 秒后，它停止轮询每个输入字段，并且仅开始轮询焦点输入（如果有）。当你模糊输入时它会停止，如果你聚焦一个，它会再次启动。

这样，您仅在真正需要时才进行轮询，并且仅在有效输入时进行。

```
// This part of code will detect autofill when the page is loading (username and password inputs for example)
var loading = setInterval(function() {
    $("input").each(function() {
        if ($(this).val() !== $(this).attr("value")) {
            $(this).trigger("change");
        }
    });
}, 100);
// After 10 seconds we are quite sure all the needed inputs are autofilled then we can stop checking them
setTimeout(function() {
    clearInterval(loading);
}, 10000);
// Now we just listen on the focused inputs (because user can select from the autofill dropdown only when the input has focus)
var focused;
$(document)
.on("focus", "input", function() {
    var $this = $(this);
    focused = setInterval(function() {
        if ($this.val() !== $this.attr("value")) {
            $this.trigger("change");
        }
    }, 100);
})
.on("blur", "input", function() {
    clearInterval(focused);
}); 
```

当您自动插入多个值时，它不能很好地工作，但可以调整它以查找当前表单上的每个输入。

就像是：

```
// This part of code will detect autofill when the page is loading (username and password inputs for example)
var loading = setInterval(function() {
    $("input").each(function() {
        if ($(this).val() !== $(this).attr("value")) {
            $(this).trigger("change");
        }
    });
}, 100);
// After 10 seconds we are quite sure all the needed inputs are autofilled then we can stop checking them
setTimeout(function() {
    clearInterval(loading);
}, 10000);
// Now we just listen on inputs of the focused form
var focused;
$(document)
.on("focus", "input", function() {
    var $inputs = $(this).parents("form").find("input");
    focused = setInterval(function() {
        $inputs.each(function() {
            if ($(this).val() !== $(this).attr("value")) {
                $(this).trigger("change");
            }
        });
    }, 100);
})
.on("blur", "input", function() {
    clearInterval(focused);
}); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-12-02T02:21:06.757

如果您只想检测是否使用了自动填充，而不是准确检测何时以及使用了哪个字段自动填充，您可以简单地添加一个将自动填充的隐藏元素，然后检查是否包含任何值。我知道这可能不是很多人感兴趣的。将输入字段设置为负的 tabIndex 并使用远离屏幕的绝对坐标。重要的是输入与输入的其余部分属于同一表单的一部分。您必须使用将由自动填充选择的名称（例如“secondname”）。

```
var autofilldetect = document.createElement('input');
autofilldetect.style.position = 'absolute';
autofilldetect.style.top = '-100em';
autofilldetect.style.left = '-100em';
autofilldetect.type = 'text';
autofilldetect.name = 'secondname';
autofilldetect.tabIndex = '-1'; 
```

将此输入附加到表单并在表单提交时检查其值。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-04-01T18:19:58.043

*似乎确实*有一个不依赖轮询的解决方案（至少对于 Chrome）。这几乎是骇人听闻的，但我确实认为比全球民意调查要好一些。

考虑以下场景：

1.  用户开始填写 field1

2.  用户选择自动填充字段 2 和字段 3 的自动完成建议

解决方案：在所有字段上注册一个 onblur，通过以下 jQuery 片段 $(':-webkit-autofill') 检查是否存在自动填充的字段

这不会立即生效，因为它会延迟到用户模糊 field1，但它不依赖于全局轮询，因此 IMO，它是一个更好的解决方案。

也就是说，由于按下回车键可以提交表单，因此您可能还需要相应的 onkeypress 处理程序。

或者，您可以使用全局轮询来检查 $(':-webkit-autofill')

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-01-25T08:03:31.927

根据我的个人经验，以下代码适用于 firefox IE 和 safari，但在 chrome 中选择自动完成时效果不佳。

```
function check(){
clearTimeout(timeObj);
 timeObj = setTimeout(function(){
   if($('#email').val()){
    //do something
   }
 },1500);
}

$('#email').bind('focus change blur',function(){
 check();
}); 
```

下面的代码效果更好，因为它会在用户每次点击输入字段时触发，从那里您可以检查输入字段是否为空。

```
$('#email').bind('click', function(){
 check();
}); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-05-10T15:11:35.180

我在 chrome 上成功了：

```
 setTimeout(
       function(){
          $("#input_password").focus();
          $("#input_username").focus();
          console.log($("#input_username").val());
          console.log($("#input_password").val());
       }
    ,500); 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-06-20T11:39:02.193

我的解决方案是：

```
 $.fn.onAutoFillEvent = function (callback) {
        var el = $(this),
            lastText = "",
            maxCheckCount = 10,
            checkCount = 0;

        (function infunc() {
            var text = el.val();

            if (text != lastText) {
                lastText = text;
                callback(el);
            }
            if (checkCount > maxCheckCount) {
                return false;
            }
            checkCount++;
            setTimeout(infunc, 100);
        }());
    };

  $(".group > input").each(function (i, element) {
      var el = $(element);

      el.onAutoFillEvent(
          function () {
              el.addClass('used');
          }
      );
  }); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-09-28T13:34:32.857

经过研究，问题是 webkit 浏览器不会在自动完成时触发更改事件。我的解决方案是自己获取 webkit 添加的自动填充类并触发更改事件。

```
setTimeout(function() {
 if($('input:-webkit-autofill').length > 0) {
   //do some stuff
 }
},300) 
```

这是铬问题的链接。[https://bugs.chromium.org/p/chromium/issues/detail?id=636425](https://bugs.chromium.org/p/chromium/issues/detail?id=636425)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-11-26T23:03:00.907

我很难在 Firefox 中检测到自动填充。这是唯一对我有用的解决方案：

[演示](https://stackblitz.com/edit/js-autofill)

HTML：

```
<div class="inputFields">
   <div class="f_o">
      <div class="field_set">
        <label class="phold">User</label>
        <input type="tel" class="form_field " autocomplete="off" value="" maxlength="50">
      </div>
   </div>
   <div class="f_o">
      <div class="field_set">
         <label class="phold">Password</label>
         <input type="password" class="form_field " autocomplete="off" value="" maxlength="50">
      </div>
   </div>
</div> 
```

CSS：

```
/* Detect autofill for Chrome */
.inputFields input:-webkit-autofill {
    animation-name: onAutoFillStart;
    transition: background-color 50000s ease-in-out 0s;
}
.inputFields input:not(:-webkit-autofill) {
    animation-name: onAutoFillCancel;
}

@keyframes onAutoFillStart {
}

@keyframes onAutoFillCancel {
}
.inputFields {
  max-width: 414px;
}

.field_set .phold{
  display: inline-block;
  position: absolute;
  font-size: 14px;
  color: #848484;
  -webkit-transform: translate3d(0,8px,0);
  -ms-transform: translate3d(0,8px,0);
  transform: translate3d(0,8px,0);
  -webkit-transition: all 200ms ease-out;
  transition: all 200ms ease-out;
  background-color: transparent;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  margin-left: 8px;
  z-index: 1;
  left: 0;
  pointer-events: none;
}

.field_set .phold_active {
   font-size: 12px;
   -webkit-transform: translate3d(0,-8px,0);
  -ms-transform: translate3d(0,-8px,0);
  transform: translate3d(0,-8px,0);
  background-color: #FFF;
  padding-left: 3px;
  padding-right: 3px;
}

.field_set input[type='text'], .field_set select, .field_set input[type='tel'], .field_set input[type='password'] {
    height: 36px;
}

.field_set input[type='text'], .field_set input[type='tel'], .field_set input[type='password'], .field_set select, .field_set textarea {
    box-sizing: border-box;
    width: 100%;
    padding: 5px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: 1px solid #ababab;
    border-radius: 0;
}

.field_set {
    margin-bottom: 10px;
    position: relative;
}

.inputFields .f_o {
    width: 100%;
    line-height: 1.42857143;
    float: none;
} 
```

JavaScript：

```
 // detect auto-fill when page is loading
  $(window).on('load', function() {
    // for sign in forms when the user name and password are filled by browser
    getAutofill('.inputFields');
  });

  function getAutofill(parentClass) {
    if ($(parentClass + ' .form_field').length > 0) {    
      var formInput = $(parentClass + ' .form_field');
      formInput.each(function(){   
        // for Chrome:  $(this).css('animation-name') == 'onAutoFillStart'
        // for Firefox: $(this).val() != ''
        if ($(this).css('animation-name') == 'onAutoFillStart' || $(this).val() != '') {
          $(this).siblings('.phold').addClass('phold_active');
        } else {
          $(this).siblings('.phold').removeClass('phold_active');
        }
      });
    }
  } 

  $(document).ready(function(){

    $(document).on('click','.phold',function(){
      $(this).siblings('input, textarea').focus();
    });
    $(document).on('focus','.form_field', function(){
      $(this).siblings('.phold').addClass('phold_active');
    });

    // blur for Chrome and change for Firefox
    $(document).on('blur change','.form_field', function(){
      var $this = $(this);
      if ($this.val().length == 0) {        
        $(this).siblings('.phold').removeClass('phold_active');
      } else {
        $(this).siblings('.phold').addClass('phold_active');
      }
    });

    // case when form is reloaded due to errors
    if ($('.form_field').length > 0) {
      var formInput = $('.form_field');
      formInput.each(function(){
        if ($(this).val() != '') {
          $(this).siblings('.phold').addClass('phold_active');
        } else {
          $(this).siblings('.phold').removeClass('phold_active');
        }
      });
    }

  }); 
```

对于 Chrome，我使用： `if ($(this).css('animation-name') == 'onAutoFillStart')`

对于火狐： `if ($(this).val() != '')`

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-04-17T08:18:38.560

```
$('selector').on('keyup', aFunction);
// If tab is active, auto focus for trigger event keyup, blur, change...
// for inputs has been autofill
$(window).on('load', () => {
  if (!document.hidden) {
    window.focus();
  }
}) 
```

这对我有用。在 Chrome 上测试。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-08-05T09:07:47.790

你可以试试这个来检测并清除所有自动填充

```
 var autofillclear = false;
  setInterval(function() {
    if ($("input:-webkit-autofill") && autofillclear == false) {
      $("input:-webkit-autofill").each(function() {
        if ($(this).val() != '') {
          $(this).val('');
          autofillclear = true;
        }
      });
    }
   }, 500); 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-08-26T12:44:14.997

我在使用 Instagram 自动填充进行电子邮件和电话输入时遇到了这个问题，尝试了不同的解决方案，但没有任何效果，最后我必须做的就是禁用自动填充，就是为电话和电子邮件设置**不同的名称属性，这样就可以了。**

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-12-01T10:37:28.353

有一个技巧可以理解浏览器是否填充输入（布尔值）：

```
const inputEl = inputRef.current; // select the el with any way, here is ReactJs ref
let hasValue;
try {
  hasValue = inputRef.current.matches(':autofill');
} catch (err) {
  try {
    hasValue = inputRef.current.matches(':-webkit-autofill');
  } catch (er) {
    hasValue = false;
  }
}

// hasValue (boolean) is ready 
```

在最后一个花括号之后`hasValue`就可以使用了。您能够检测到浏览器自动填充是否发生。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2021-12-03T14:13:28.693

我找到了 angularjs 的工作解决方案。

诀窍是当指令检测到该字段由浏览器通过自动填充填充时，从输入字段中禁用所需属性。

由于不再需要输入字段，因此启用了登录提交按钮。

即使用户没有点击窗口正文，这也有效（请参阅[Chrome Autofill/Autocomplete no value for password](https://stackoverflow.com/questions/35049555/chrome-autofill-autocomplete-no-value-for-password/35783761#35783761)）。

指示：

```
angular.module('formtools').directive('autofill', [
        '$interval', function ($interval)
        {
            return {
                scope: false,
                require: 'autofill',
                controller: function AutoFillController(){
                    this.applied = false;
                },
                controllerAs: 'autoFill',
                link: function (scope, elem, attrs, autofill)
                {
                    var refresh = $interval(function() {
                        // attention: this needs jquery, jqlite from angular doesn't provide this method
                        if(elem.is(':-webkit-autofill'))
                        {
                            autofill.applied = true;
                            $interval.cancel(refresh);
                        }
                    }, 100, 100);
                }
            }
        }]); 
```

HTML：

```
<form name="loginform">

  <input 
     type="text" 
     name="username" 
     autofill 
     ng-required="!autoFill.applied">

  <input 
     type="password" 
     name="password" 
     autofill 
     ng-required="!autoFill.applied">

  <button ng-disabled="loginform.$invalid">Login</button>   
</form> 
```

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2019-11-21T23:29:33.097

例如，为了检测电子邮件，我尝试了“on change”和突变观察者，但都没有奏效。setInterval 与 LinkedIn 自动填充配合得很好（没有透露我所有的代码，但你明白了），如果你在此处添加额外的条件来减慢 AJAX，它与后端配合得很好。如果表单字段没有变化，比如他们没有打字来编辑他们的电子邮件，lastEmail 会阻止无意义的 AJAX ping。

```
// lastEmail needs scope outside of setInterval for persistence.
var lastEmail = 'nobody';
window.setInterval(function() { // Auto-fill detection is hard.
    var theEmail = $("#email-input").val();
    if (
        ( theEmail.includes("@") ) &&
        ( theEmail != lastEmail )
    ) {
        lastEmail = theEmail;
        // Do some AJAX
    }
}, 1000); // Check the field every 1 second 
```

* * *

## 回答 #37

> 赞同：-3
> 
> 时间：2016-07-10T19:48:10.753

在 CSS 中尝试

`input:-webkit-autofill { border-color: #9B9FC4 !important; }`

# gwt - 使用 SuperDevMode 进行日志记录。System.out.println 不工作

> ID：11708096
> 
> 赞同：4
> 
> 时间：2012-07-29T09:21:12.700
> 
> 标签：gwt

为什么？

在客户端中使用**System.out.println时 -** **CodeServer**的控制台中不会输出任何内容。

现在我正在登录浏览器控制台，但是如何登录系统控制台？

ps 我知道登录 gwt 的最佳方式是使用**com.google.gwt.logging.Logging**模块。它现在也可以与系统控制台一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:12:50.377

超级开发模式与生产编译基本相同（只是没有优化）

在生产中（编译的 javascript） System.out 不会将任何内容打印到您的 java 服务器端进程中。您的代码在 Javascript VM 中运行，它需要通过网络打印到 Java 控制台。

如果您在开发模式下运行，则您在连接到浏览器内插件的 JVM 中运行。这就是 System.out 有效的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T14:52:02.217

不是最漂亮的解决方案，但您可以像这样创建本机 JSNI 方法：

```
public static native void debug(String text)/*-{
    console.debug(text)
}-*/; 
```

然后只需调用：

```
debug("text here"). 
```

它应该输出到控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T00:28:58.090

我设置了一个远程记录器来解决这个问题。这样，所有客户端日志语句都将发送到日志仍然有效的服务器。您可以在此处找到说明：[在 GWT 中设置 remoteLoggingServlet](https://stackoverflow.com/questions/5812035/setup-a-remoteloggingservlet-in-gwt)。

然后您可以使用普通的 java util 日志记录。

```
import java.util.logging.Logger;
private static Logger log = Logger.getLogger("mylogger"); 
```

不幸的是，堆栈跟踪在 javascript 中。我还没有弄清楚如何获得正确的java。希望这可以帮助！

# java - JIS X 0208 转换：如何处理统一（合并）代码点

> ID：11708099
> 
> 赞同：1
> 
> 时间：2012-07-29T09:22:29.487
> 
> 标签：java, character-encoding

我正在尝试将 Java 字符转换为 JIS X 0208“x-JIS0208”编码（或任何兼容的，如 EUC-JP，但不是 Shift-JIS），但我希望正确处理统一（合并）代码点。

例如，高被分配[到此 JISX0208 图表](http://www.dennougedougakkai-ndd.org/pub/gutenberg/jisx0208-1990.gif)中的第 25 行第 66 列，而相似字符髙虽然被归类为未分配的代码点，但与前者合并。我从维基百科引用：“形式 [ ] (高) 和具有梯状结构 (髙) 的不太常见的形式都包含在同一个代码点中”。

我在下面的代码中尝试了这个，无论我尝试什么编码，我总是得到一个异常或未分配的字符占位符`?`（ASCII 或全角）。

有没有办法，也许是不同的结束或完全不同的转换方式，所以这两个字符都返回相同的代码点？或者，是否有一个 API 可以找到这些字符，以便我可以在转换之前合并它们？

```
static Charset      charset1    = Charset.forName("x-JIS0208");
static Charset      charset2    = Charset.forName("EUC-JP");
static Charset[]    charsets    = {charset1, charset2};

static CharBuffer   in          = CharBuffer.allocate(1);

public static void main(String[] args) throws Exception
{
    CharsetEncoder[] encoders = new CharsetEncoder[charsets.length];
    for (int i = 0; i < charsets.length; i++)
        encoders[i] = charsets[i].newEncoder();

    char[] testChars = {'　', 'Ａ', '？', '亜', '唖', '蔭', '高', '髙'};

    for (char ch : testChars)
    {
        System.out.print("'" + ch + "'\t(" + Integer.toHexString(ch) + ")\t=");

        for (int i = 0; i < charsets.length; i++)
        {
            System.out.print("\t" + interpret(encode1(encoders[i], ch)));
            System.out.print("\t" + interpret(encode2(charsets[i], ch)));
        }
        System.out.println();
    }
}

private static String interpret(int i)
{
    if (i == -1)
        return "excepti";
    if (i < 0x80)
        return "'" + (char)i + "'";
    return Integer.toHexString(i);
}

private static int encode1(CharsetEncoder encoder, char ch)
{
    in.rewind();
    in.put(ch);
    in.rewind();

    try
    {
        ByteBuffer out = encoder.encode(in);

        if (out.limit() == 1)
            return out.get(0) & 0xFF;
        return out.get(1) & 0xFF | (out.get(0) & 0xFF) << 8;
    }
    catch (CharacterCodingException e)
    {
        return -1;
    }
}

private static int encode2(Charset charset, char ch)
{
    in.rewind();
    in.put(ch);
    in.rewind();

    ByteBuffer out = charset.encode(in);

    if (out.limit() == 1)
        return out.get(0) & 0xFF;
    return out.get(1) & 0xFF | (out.get(0) & 0xFF) << 8;
} 
```

输出：

```
'　' (3000)  =   2121    2121    a1a1    a1a1
'Ａ' (ff21)  =   2341    2341    a3c1    a3c1
'？' (ff1f)  =   2129    2129    a1a9    a1a9
'亜' (4e9c)  =   3021    3021    b0a1    b0a1
'唖' (5516)  =   3022    3022    b0a2    b0a2
'蔭' (852d)  =   307e    307e    b0fe    b0fe
'高' (9ad8)  =   3962    3962    b9e2    b9e2
'髙' (9ad9)  =   excepti 2129    excepti '?' 
```

注意：我只对转换单个字符感兴趣，很多字符，而不是字符串或流，所以我实际上更喜欢一种不同的方法（如果存在），它不会在每次转换时分配一个 ByteBuffer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-31T16:13:24.060

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T06:59:49.150

我只知道在规范“ARIB STD-B24”（用于日本的 ISDB-T 1seg）中，这个字符是用 DRCS 模式数据编码的，从 DRCS-1 到 DRCS-15，每组由 94 个字符组成。

# maven-release-plugin - 使用 maven-release-plugin 准备发布时无法标记 SCM

> ID：11708100
> 
> 赞同：1
> 
> 时间：2012-07-29T09:22:37.523
> 
> 标签：maven-release-plugin

我在使用 maven 发布插件准备项目发布时遇到问题。

单片机连接：

```
<scm>
    <connection>scm:svn:https://subversion.assembla.com/svn/myrepo</connection>
    <developerConnection>
        scm:svn:https://subversion.assembla.com/svn/myrepo
    </developerConnection>
</scm> 
```

发布插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <autoVersionSubmodules>true</autoVersionSubmodules>
        <providerImplementations>
            <svn>javasvn</svn>
        </providerImplementations>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>com.google.code.maven-scm-provider-svnjava</groupId>
            <artifactId>maven-scm-provider-svnjava</artifactId>
            <version>2.0.3</version>
        </dependency>
    </dependencies>
</plugin> 
```

一切顺利，直到需要标记 SCM：

```
Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare (default-cli) on project myproject: Unable to tag SCM
Provider message:
SVN tag failed.
Command output:
svn: E175002: unknown host
svn: E175002: OPTIONS request failed on '/svn/myrepo' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:01:59.467

也许使用 https 无法使用 subversion 存储库？对我来说，它可以更改为 svn 协议：

```
scm:svn:svn://subversion.assembla.com/svn/myrepo 
```

# shell - GPG 对称 - 数据库

> ID：11708105
> 
> 赞同：0
> 
> 时间：2012-07-29T09:23:04.653
> 
> 标签：shell, gnupg, encryption-symmetric

我是 GNU PGP 安全方面的初学者。我正在努力学习一些东西。

例如，如果我为特定文件使用对称密钥`blah`

```
gpg --symmetric --no-use-agent "$blah" 
```

它现在告诉我输入 `secret key/password`。输入后，它会生成一个名为`blah.gpg`.

但是，是否有 gpg 存储所有密钥的地方？如果是，在哪里，我可以通过它访问数据库`sqlite3`并且可以移植到服务器端。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:52:49.790

不存储对称密钥。你给它们，程序就会应用并忘记它们。默认情况下，非对称密码的密钥存储在 ~/.gnupg/ 中。而且我不认为它们是使用 sqlite3 存储的。

# magento - Magento 安装：无需在 URL 中间放置 /index.php/

> ID：11708106
> 
> 赞同：0
> 
> 时间：2012-07-29T09:23:08.460
> 
> 标签：magento, mod-rewrite

> **可能重复：**
> [主页以外的 Magento URL 在没有 index.php 的情况下无法工作](https://stackoverflow.com/questions/11702708/magento-urls-other-than-home-page-do-not-work-without-index-php)

我已经发布了这个问题并浏览了档案，但没有得到有效的解决方案，所以我再次发布：

[没有 index.php，除主页外的 Magento URL 不起作用](https://stackoverflow.com/questions/11702708/magento-urls-other-than-home-page-do-not-work-without-index-php)

希望这个网站上的人可以帮助解决这个烦人的问题，

对此的任何帮助将不胜感激，

约翰·戈切

# javascript - javascript累积CPU使用率

> ID：11708109
> 
> 赞同：0
> 
> 时间：2012-07-29T09:23:17.977
> 
> 标签：javascript

我有一个 ajax 应用程序，每次执行 ajax 事务时，它会额外占用大约 1% 的 cpu。

如果 1 小时后没有用户活动，则页面重新加载并且 cpu 使用率下降到 5% 以下，但是随着每个 ajax 事务的执行，cpu 使用率会增加，并且在页面重新加载之前永远不会释放。

我怀疑孤儿计时器，但我似乎找不到任何计时器，我正在使用 firefox 和 firebug，并且分析显示了我期望的调用。如果我在交易完成后进行分析并且页面处于非活动状态（除了 1 秒计时器时钟），我看不到任何计时器在运行，除了屏幕时钟上的实时时间。

关于这可能是什么以及如何追踪它的任何建议？

我正在使用纯javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:57:54.150

好的，解决了，我最初的直觉是正确的，每次 ajax 调用时，它都会将服务器时间与本地实时时钟同步，因为它们的同步至关重要。

在重新同步本地时钟之前，我没有为 setInterval() 函数分配变量，也没有使用 window.clearInterval() 清除旧的 setInterval()。这导致了不断增加的 setInterval() 活动调用。

不管怎么说，还是要谢谢你 ：-）

# php - 如何在 PHP 的 href 链接中发送多个值？

> ID：11708112
> 
> 赞同：2
> 
> 时间：2012-07-29T09:23:35.883
> 
> 标签：php

我想使用`href`链接将多个值发送到不同的页面。但我检索到的只是前 2 个值，其余显示未定义索引的错误。

我的代码是：

```
<?php 

echo "<a href='index.php?choice=search&cat=".$cat."&subcat=".$subcat."&srch=".$srch."&page=".$next."'> Next </a>";

?> 
```

我只得到“选择”和“猫”的值。请告诉我上面的代码有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:27:35.340

尝试使用urlencode，好像字符串中有任何特殊字符，它可能会对整个查询字符串产生影响；

```
echo "<a href='index.php?choice=search&cat=".urlencode($cat)."&subcat=".urlencode($subcat)."&srch=".urlencode($srch)."&page=".urlencode($next)."'> Next </a>"; 
```

另外，您在 srch 和 page 之间有一个空格，这可能会导致问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T09:26:00.470

您必须正确地对这些 & 符号进行 HTML 转义：

```
?coice=search&amp;cat=...&amp;subcat=...&amp;srch=... 
```

`&sub`(of `&subcat`) 被解释为`&sub;`子集运算符的特殊 HTML 实体：

```
&sub; or &#8834; = subset of ⊂ 
```

还要确保正确转义变量以防止 XSS。

# c++ - 使用内联实例化时谓词继承编译错误

> ID：11708113
> 
> 赞同：1
> 
> 时间：2012-07-29T09:23:39.447
> 
> 标签：c++, templates, stl, g++

我正在使用一个测试框架（tut）并注意到很多可重复性，所以我开始抽象出我需要的谓词函数。下面是一个简化的例子。

它有效，但我希望我能在一行中做到这一点。问题是当我尝试内联实例化派生谓词类时，它无法编译。任何想法为什么？

```
#include <string>
#include <functional>
#include <iostream>

using namespace std;

template <class T>
struct TestPredicate : public binary_function<T,T,bool>
{
  virtual bool operator() (const T& expected, const T& data) const = 0;
};

template <class T>
struct IsEqual : public TestPredicate<T>
{
  virtual bool operator() (const T& expected, const T& data) const
  {
    cout << "IsEqual: " << expected << ", " << data << endl;
    return data == expected;
  }
};

template <class T>
struct IsNotEqual : public TestPredicate<T>
{
  virtual bool operator() (const T& expected, const T& data) const 
  {
    cout << "IsNotEqual: " << expected << ", " << data << endl;
    return data != expected;
  }
};

struct Tester
{
  template <class T>
  void test( const T& data, const T& expected, TestPredicate<T>& value_condition ) 
  {
    if ( value_condition( expected, data ) ) 
    {
      cout << "PASSED" << endl;
    }
    else 
    {
      cout << "FAILED" << endl;
    }
  }
};

int main() 
{
  Tester test;

  string data("hello");
  string expected("hello");

  // this doesn't compile with an inline instantiation of IsEqual
  //test.test( data, expected, IsEqual<string>() );   // compilation error (see below)

  // this works with an explicit instantiation of IsEqual
  IsEqual<string> pred;
  test.test( data, expected, pred );

  return 0;
} 
```

编译输出：

```
test2.cpp: In function ‘int main()’:
test2.cpp:61:48: error: no matching function for call to ‘Tester::test(std::string&, std::string&, IsEqual<std::basic_string<char> >)’
test2.cpp:61:48: note: candidate is:
test2.cpp:40:8: note: void Tester::test(const T&, const T&, TestPredicate<T>&) [with T = std::basic_string<char>]
test2.cpp:40:8: note:   no known conversion for argument 3 from ‘IsEqual<std::basic_string<char> >’ to ‘TestPredicate<std::basic_string<char> >&’ 
```

使用 g++ 4.6.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T10:10:35.680

除了其他答案之外，您实际上并不需要具有虚函数的运行时多态性。您可以让测试仪采用另一个模板参数：

```
template<class T, class Pred>
void test( const T& data, const T& expected, Pred value_condition ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T09:29:27.953

您的`Tester::test`方法需要`const`引用谓词才能与两个实例一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T09:44:16.093

临时对象始终为 const，即方式`test.test( data, expected, IsEqual<string>() );` `IsEqual<string>()`为 类型`const TestPredicate<T>`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T12:22:29.340

编译器为什么抱怨的解释既简单又……有点令人沮丧。

C++ 标准排除了临时对象（例如由表达式创建的`IsEqual<string>()`）可以绑定到 const 引用，在这种情况下，它的生命周期会扩展到引用的生命周期。

由于 Stroustrup 担心绑定到非 const 引用只会成为错误的来源，因此不允许这样做。事后看来，缺乏对称性往往更令人惊讶。VC++ 允许绑定到非常量引用（作为扩展）。`&&`在 C++11 中，通过允许绑定到“引用引用”（

...并让我们陷入您发现自己所处的不愉快的境地。

在网络上，这可能被称为[最重要`const`](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)的。

# android - 在右侧的 EditView 中显示文本

> ID：11708116
> 
> 赞同：1
> 
> 时间：2012-07-29T09:23:56.680
> 
> 标签：android

我正在为 RTL 语言环境开发一个应用程序。我在右侧的 AutoCompleteTextView 中显示提示时遇到问题。但是字符串显示在右侧。但是如果我添加重力=右，提示字符串显示在右侧，但 AutoCompleteTextView 上的字符串显示在左侧。我不知道如何解决这个问题。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="10dip" >

<TextView
    android:id="@+id/supplierNameTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/supplierNameTV"
    android:textColor="#FFFFFF" 
    android:layout_gravity="right"/>

<AutoCompleteTextView
    android:id="@+id/supplierName_CB"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/supplierNameTV"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:04:29.793

你想要像下图这样的东西吗，让我知道你到底想要它是什么样子，在图像下方找到代码......

![图片](../Images/39de1e99d453e852109850c6d82d92d6.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="10dip" android:gravity="right">

<TextView
    android:id="@+id/supplierNameTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="asdbakdsn"
    android:textColor="#FFFFFF" 
    android:layout_gravity="right"/>

<AutoCompleteTextView
    android:id="@+id/supplierName_CB"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:hint="adsas"/>
</LinearLayout> 
```

# javascript - 简单的 ajax load() 在 jquery 中不起作用

> ID：11708117
> 
> 赞同：0
> 
> 时间：2012-07-29T09:24:00.163
> 
> 标签：javascript, jquery, ajax

我试图找出该功能`load()`在 Chrome 和 Firefox 中不起作用的问题。使用 Internet Explorer，它运行良好。

我有一个 WampServer。

在 Chrome 中，我收到错误：

> Access-Control-Allow-Origin 不允许 Origin null

我把文件放在本地服务器上，它是在线的。我可以访问图像，请参阅代码。但是有什么问题`load()`呢？

```
<body>
    here is a image
    <img src="/wamp/www/testing/baby2.jpg" width="100px" height="200px"></img>   

    <ul id="aj">
        <li><a href="/wamp/www/testing/celeb1.html">One</a></li>
        <li><a href="/wamp/www/testing/celeb2.html">Two</a></li>
        <li><a href="/wamp/www/testing/celeb3.html">Three</a></li>
    </ul>
    <br>
    <div id="desc">

    </div>

    <script>
    $(document).ready(function(){
        $('#aj a').click(function(){
            var v= $(this).attr('href');

            $('#desc').load(v);
            return false;
        });
    });//ready
    </script>
</body> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:41:30.903

我认为 URL 中的问题

试着把它们写成....

```
 <ul id="aj">
       <li><a href="/testing/celeb1.html">One</a></li>
       <li><a href="/testing/celeb2.html">Two</a></li>
       <li><a href="/testing/celeb3.html">Three</a></li>
    </ul> 
```

你也可以看看@这个[话题](https://stackoverflow.com/questions/4742467/circumventing-chrome-access-control-allow-origin-on-the-local-file-system)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:50:32.437

这是 Chrome 的一个问题：[请参阅此错误](http://code.google.com/p/chromium/issues/detail?id=40787&q=ajax%20local&colspec=ID%20Stars%20Pri%20Area%20Feature%20Type%20Status%20Summary%20Modified%20Owner%20Mstone%20OS)以及[此答案](https://stackoverflow.com/questions/4208530/xmlhttprequest-origin-null-is-not-allowed-access-control-access-allow-for-file)。

您可能需要使用特殊的命令行标志启动 Chrome：

```
chrome.exe --allow-file-access-from-files 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T22:02:02.020

在您的 Apache 设置中（转到 WAMP 安装中名为 httpd.conf 的文件），您为主目录指定了什么？当您使用以正斜杠开头的链接（例如`/testing/celeb1.html`.

通常情况下，它会像`/wamp/www/`. 因此，您只需`/testing/...`将 URI 的一部分用于超链接。

# python - Python 错误处理

> ID：11708121
> 
> 赞同：-1
> 
> 时间：2012-07-29T09:24:47.007
> 
> 标签：python, python-3.x, python-2.7

我试图使用以下代码将列表转换为集合：

```
set1=set(list1) 
```

代码运行良好，但突然开始出现以下错误，

```
set1=set(list1)
TypeError: unhashable type: 'list' 
```

请让我知道我该如何解决。

有时一些运行良好的程序在没有更改参数的情况下突然出错，我该如何调试它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:28:19.580

您的列表包含另一个列表：

```
>>> set([['contained list'], 1, 2])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list' 
```

集合只能包含可[*散列*](http://docs.python.org/glossary.html#term-hashable)的项目；任何不能被变异的标准类型都是可散列的，但 a`list`不是（它可以被变异）。相比之下， a`tuple`是不可变的，可以存储在 a 中`set`。

错误会发生，即使在已经运行了一段时间的代码中也是如此。使用 print 语句调试它，或者更好的是，使用像[pdb](http://docs.python.org/library/pdb.html)这样的调试器。

如果您的错误只是间歇性地出现，请使用`try`/`except`块来捕获错误，然后打印出信息或使用调试器来找出发生了什么：

```
try:
    set1=set(list1)
except TypeError:
    print 'list1 not hashable? contents: %r' % list1
    # optionally: import pdb; pdb.set_trace()
    raise 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T09:28:29.813

您的错误表明您的列表包含一个列表。列表是可变的，因此不能被散列用于集合或字典。一种解决方法是使用 将列表转换为元组`tuple(some_list)`，但如果它们嵌套严重，它会变得更加复杂。

# c#-4.0 - 我们可以通过条件语句将许多对象作为任何方法的参数传递吗

> ID：11708122
> 
> 赞同：0
> 
> 时间：2012-07-29T09:24:50.420
> 
> 标签：c#-4.0

例如，我们可以通过条件语句将许多对象作为方法参数的一个参数传递吗

二级：一级和二级

传递方法是

```
public void passe(one||two)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:37:26.280

您不能按照您描述的方式对方法使用条件参数。

如果两个参数的类型相同（或属于继承链），您可以简单地将值有条件地传递给方法。

或者，您可以使用[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

```
public void passe(typex one = someXdefualt, typey two = someYdefualt)
{
} 
```

# php - PHP SOAP如何修改响应

> ID：11708124
> 
> 赞同：1
> 
> 时间：2012-07-29T09:25:01.517
> 
> 标签：php, soap

好的，首先让我向您展示我的脚本。

```
<?php  
$soap_exception_occured = false;

$wsdl_path = 'http://vrapi.xyz.com/?wsdl';

$response = '';

ini_set('soap.wsdl_cache_enabled', '0'); // disabling WSDL cache

try {
    $client = new SoapClient($wsdl_path);
    }

catch(SoapFault $exception) {
    $soap_exception_occured = true;
    $response .= '\nError occoured when connecting to the SMS SOAP Server!';
    $response .= '\nSoap Exception: '.$exception;
    } 

/* Create a Recharge at VR */
$client_id = 'appl45fgysssl';

$balance_info = new stdClass(); 
try {  
$balance_info = $client->GetBalanceInfo($client_id); 
} 

catch(SoapFault $exception) { 
 $soap_exception_occured = true;  
 $response .= "\nError occoured at method GetBalanceInfo($client_id)";  
 $response .= "\nSoap Exception: ".$exception; 
 } 

 /* Do something or print results */
 if($soap_exception_occured || $balance_info==null) echo $response; 
 else print_r($balance_info); 

 ?> 
```

并在浏览器中输出

```
stdClass Object ( [client_user_id] => appl45fgysssl [available_credit] => 9755 [last_updated_time] => 2012-07-29 14:30:15 ) 
```

我想以排列良好的格式显示数据。前任。

客户端：appl45fgysssl

余额：9755

时间：2012-07-29 14:30:15

请帮我这样做。任何参考对我来说都应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:33:52.177

要以人类可读的形式输出结果，而不是 print_r，您可以简单地在 foreach 循环中循环遍历结果；

```
foreach($balance_info as $key=>$value) {
    echo "$key: $value<br />";
} 
```

或者对于更具体的命名，如果您知道列是什么，则使用 a`->`访问对象属性并将它们回显；

```
Client: <?php echo $balance_info->client_user_id; ?><br />
Balance: <?php echo $balance_info->available_credit; ?></br />
Time: <?php echo $balance_info->last_updated_time; ?> 
```

[http://php.net/manual/en/sdo.sample.getset.php](http://php.net/manual/en/sdo.sample.getset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:00:16.647

正如@Stu 所说，这将是您的完美答案。检查这部分。

```
/* Do something or print results */
if($soap_exception_occured || $balance_info==null) echo $response; 
else { ?>

        Client: <?php echo $balance_info->client_user_id; ?><br />
        Balance: <?php echo $balance_info->available_credit; ?></br />
        Time: <?php echo $balance_info->last_updated_time; ?>
<?php } ?> 
```

# c# - NavigationService.Navigate 从页面构造函数

> ID：11708125
> 
> 赞同：1
> 
> 时间：2012-07-29T09:25:26.903
> 
> 标签：c#, windows-phone-7

我想`NavigationService.Navigate(new Uri(uri, UriKind.Relative));`在页面构造函数中使用。但我得到一个 NullReferenceException。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:41:05.860

Page 只能在 Page 引发 Loaded 事件时获得对其 NavigationService 的引用。如果您订阅页面的加载事件，那么您将获得 NavigationService 实例。

```
public Home()
    {
        InitializeComponent();
        this.Loaded += (s, e) =>
                           {
                               var ns = NavigationService;
                               ns.Navigate(new Uri("/About", UriKind.Relative));
                           };
    } 
```

# ios - 由于未捕获的异常“NSRangeException”索引而终止应用程序

> ID：11708131
> 
> 赞同：0
> 
> 时间：2012-07-29T09:26:02.963
> 
> 标签：ios, objective-c, xcode

我经常被这个问题困扰，***由于未捕获的异常'NSRangeException'而终止应用程序，原因：'*** -[__NSArrayM objectAtIndex:]: index 2 beyond bounds [0 .. 1]'

这使我的应用程序崩溃。我之前没有遇到过这个问题，但是有一天它开始出现，但是由于我有这么多数组，我什至不知道它来自哪里。有没有办法告诉应用程序不要因为这个错误而崩溃，或者找到导致问题的数组？

顺便说一句，每次我运行代码时，我都会这样做：

```
[messagename removeAllObjects];
[messageframe removeAllObjects];
[messagetext removeAllObjects];
[MapViewArray removeAllObjects];
[DeleteButtonArray removeAllObjects];

NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager removeItemAtPath:reloadPath error:NULL];
[fileManager removeItemAtPath:reloadInfoPath error:NULL];
[fileManager removeItemAtPath:uploadPath error:NULL];
[fileManager removeItemAtPath:uploadPathMap error:NULL]; 
```

这应该清除所有数组...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:33:37.590

您可以将断点设置为特定异常或所有异常。
- 打开断点导航器 ( `CMD`+ `6`)
- 单击`+`底部的符号
- 添加异常断点
- 可选择仅选择 Objective-C 异常

[检查苹果文档](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/about_breakpoint_navigator.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:33:32.757

在 Xcode 中，您可以在“所有 Objective-C 异常”上设置异常断点。然后调试器将在异常发生时中断，您可以看到它发生在哪里。

# android - AndEngine 模拟和aretouched 问题？

> ID：11708134
> 
> 赞同：1
> 
> 时间：2012-07-29T09:26:31.020
> 
> 标签：android, button, andengine, area

我正在使用 AndEngine GLES 2.0 并且我一直在阅读很多内容以寻找答案，但我找不到任何东西......发生的事情是我正在玩游戏并且我`AnalogOnScreenControl`在屏幕的左侧, 和 2 个`onAreaTouched`“按钮”，所以当我使用模拟并将手指一直移动到任何“按钮”时，当我抬起手指时，模拟仍然在“移动”，就好像我的手指仍然在屏幕上一样...那么有什么办法可以防止这种情况发生吗？喜欢为模拟设置响应区域？我不知道我是否很好地解释了自己......但非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T18:38:21.660

尝试启用多点触控：

在您的`onCreateEngineOptions()`添加中：`options.getTouchOptions().setNeedsMultiTouch( true );`

现在，当您将手指放在操纵杆上并用另一根手指按下按钮时，它将引用不同的指针 ID。

# sql-server - 更新 sql server 日期时间字段

> ID：11708138
> 
> 赞同：1
> 
> 时间：2012-07-29T09:27:19.850
> 
> 标签：sql-server, database

我已经在表中插入了名为 enddate 的日期时间列的数据。我想更新所有行

```
 enddate = enddate - 1 minute. 
```

我怎么能这样做？

谢谢萨默

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:32:01.990

```
UPDATE tableName
SET enddate = DATEADD(minute, -1, enddate) 
```

细节[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

# hardware - 多显示器物理设置的描述文件

> ID：11708141
> 
> 赞同：3
> 
> 时间：2012-07-29T09:27:38.457
> 
> 标签：hardware, multiple-monitors, virtual-reality

我需要多显示器和 VR 设置的机器可读描述，例如简单的双屏计算机、[Powerwalls](http://en.wikipedia.org/wiki/Powerwall)和[Caves](http://en.wikipedia.org/wiki/Cave_Automatic_Virtual_Environment)。此描述必须包括物理空间中所有输出（显示或投影）的大小和位置。

远的目标是将用户（头部）跟踪、移动设备的设备跟踪等与多显示器环境相结合。

*   最简单的问题是要注意多显示器设置的屏幕之间的间隙，因为展示柜的边框。
*   最复杂的设置可能是具有多边形或弯曲投影表面的洞穴。

我的印象是，那里的每个 VR 软件都定义了自己的 setup-config-crackpot-text-file-format。我缺少一个*共同的标准*或*惯例吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T07:27:30.810

VR （还）没有通用标准，尤其是您感兴趣的类型，但您可能想查看[vrui](http://idav.ucdavis.edu/~okreylos/ResDev/Vrui/)。

该项目的作者了解对可以完成您想做的事情的中间软件的需求：[http](http://doc-ok.org/?p=123) ://doc-ok.org/?p=123 。他还有一篇很棒的文章，他认为对于 VR，标准相机模型可以改变并带来巨大的好处，其方式类似于您在问题中提出的要求：[http ://doc-ok.org/?p =27](http://doc-ok.org/?p=27)

也许，一旦 VR 因 Oculus 等而获得一定的普及和牵引力，对标准的需求就会上升——HMD 已经有了标准，请查看[OSVR 项目](http://www.osvr.com/)。但我真的认为这不太可能——由于涉及成本和所需空间，CAVE 和 Powerwall 设置不会如此普遍。使用 HMD 可能会更便宜，更便携/方便。

编辑：我也发现了这个 - [http://www.middlevr.com/](http://www.middlevr.com/)

# c# - 如何设置固定的图像地图热点？

> ID：11708145
> 
> 赞同：1
> 
> 时间：2012-07-29T09:27:49.787
> 
> 标签：c#, asp.net, image, imagemap

在由 ASP.NET 使用 C# 开发的基于 Web 的应用程序中，发送给所有用户的图像在特定区域（热点）中嵌入了超链接。我可以发送电子邮件并使用链接映射图像。现在的问题是当我使用另一个大小不同的屏幕时，热点去了另一个地方。我希望它被修复。**那么该怎么做呢？**

我使用以下内容来映射图像：

```
 body += "<map id ='clickMap' name='clickMap'> " +
                     "<area shape ='rect' coords ='752,394,1394,491' href ='http://pmv/pssp/StartQuiz.aspx?testid=" + quizid + "' alt='Quiz' /></map>"; 
```

我的 C# 邮件功能：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Send();
    }

    protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml, AlternateView av)
    {
        SmtpClient sc = new SmtpClient("MAIL Server");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("Test@MAILServer.com", "Test");

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            msg.AlternateViews.Add(av);
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void Send()
    {
        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=Test;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            string quizid = "";

            // Open DB connection.
            conn.Open();

            string cmdText = "SELECT MIN (QuizID) As mQuizID FROM dbo.QUIZ WHERE IsSent <> 1";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        // There is only 1 column, so just retrieve it using the ordinal position
                        quizid = reader["mQuizID"].ToString();

                    }
                }
                reader.Close();
            }

            string cmdText2 = "SELECT Username FROM dbo.employee";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(",");
                            }
                            // Just use the ordinal position for the user name since there is only 1 column
                            sbEmailAddresses.Append(sName).Append("@MailServer.com");
                        }
                    }
                }
                reader.Close();
            }

            string cmdText3 = "UPDATE dbo.Quiz SET IsSent = 1 WHERE QuizId = @QuizID";
            using (SqlCommand cmd = new SqlCommand(cmdText3, conn))
            {
                // Add the parameter to the command
                var oParameter = cmd.Parameters.Add("@QuizID", SqlDbType.Int);

                var sEMailAddresses = sbEmailAddresses.ToString();
                string link = "<a href='http://localhost/StartQuiz.aspx?testid=" + quizid + "'> Click here to participate </a>";
                string body = @"Good day, <br /><br />
                                <b> Please participate</b>"
                                    + link +
                                    @"<br /><br /> <h1>Picture</h1><br/><img src='cid:image1' usemap ='#clickMap' alt='Click HERE'>";

                body += "<map id ='clickMap' name='clickMap'> " +
                     "<area shape ='rect' coords ='752,394,1394,491' href ='http://localhost/StartQuiz.aspx?testid=" + quizid + "' alt='Quiz' /></map>";

            }
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:02:55.570

使用 WIDTH 和 HEIGHT 指定图像大小，然后提供该约束内的坐标。

作为示例，我假设您的原始图像大小为 1600 X 1200 像素。使用您的坐标的热点是 coords ='752,394,1394,491'（以像素为单位）。如果您在“img”标签上指定 width=1600 和 height=1200，那么热点应该始终位于您想要的位置。

但是如果你需要指定一个不同的尺寸，也许你希望它是 800 x 600，你会相应地缩放你的坐标......

```
int orig_width = 1600;
int orig_height = 1200;
int design_width = 800;
int design_height = design_width * orig_height / orig_width; // keeps aspect ratio, or just use 600

int coord_x1 = design_width * 752 / orig_width;
int coord_y1 = design_height * 394 / orig_height;
int coord_x2 = design_width * 1394 / orig_width;
int coord_y2 = design_height * 491 / orig_height;

...
string body = @"Good day, <br /><br />   
    <b> Please participate in the new short safety quiz </b>"   
    + link +   
    @"<br /><br /> <h1>Picture</h1><br/><img width='"
    + design_width +
    "' height='"
    + design_height +
    @"' src='cid:image1' usemap ='#clickMap' alt='Click HERE'>";   

// ...

body += "<map id ='clickMap' name='clickMap'> " +   
      "<area shape ='rect' coords ='"
      + coord_x1 + "," + coord_y1 + "," + coord_x2 + "," + coord_y2 +
      "' href ='http://localhost/StartQuiz.aspx?testid="
      + quizid + "' alt='Quiz' /></map>"; 
```

# jquery - 如何使用 jQuery 将一个选择框的选定文本和值传输到另一个？

> ID：11708146
> 
> 赞同：1
> 
> 时间：2012-07-29T09:28:07.770
> 
> 标签：jquery

如果我有两个这样的选择？

```
<select id="A">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>

<select id="B">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

如何将所选值和文本从选择 A 传输到选择 B。我不希望发生这种情况以响应任何更改或单击。我只需要某种方式，以便以后可以将选择 B 窗口中显示的内容同步到选择 A 中的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:48:42.483

如果您的两个`select`s 相同，则：

你可以简单地试试这个：

```
 $('#B').val( $('#A').val() ); 
```

您也可以通过函数调用来实现：

```
function changeValue() {
  $('#B').val( $('#A').val() );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:34:40.453

试试这个：

```
 var selA = $('#A option:selected').val();
  $('#B option[value="'+ selA +'"]').attr('selected', 'selected'); 
```

查看[演示](http://jsbin.com/avixeh/1)（更改第一次选择后单击更改）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T09:43:47.270

另一种选择：

```
var idx = $('#A option:selected').index();

$('#B option').eq(idx).attr('selected', 'selected'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T09:46:59.193

如果两个列表不同怎么办

```
var _AOption = $('#A option:selected');
var _BOptions = $('#B option');
var isInList = 0;
_BOptions.each(function()
{
    $(this).removeAttr('selected');
    if($(this).attr('value') == _AOption.attr('value'))
    {
        $(this).attr('selected', '1');
        isInList = 1;
    }
});

if(isInList  == 0)
{
    $('#B').append('<option selected="1" value="'+_AOption.attr('value')+'" >'+_AOption.html()+'</option>');
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T10:55:08.357

您可以使用`append()`方法：

```
$('#B').append($('#A option:selected')) 
```

[演示](http://jsfiddle.net/dT6Fa/)

# python - 有没有办法将多个包与 Python setuptools 捆绑在一起？

> ID：11708150
> 
> 赞同：5
> 
> 时间：2012-07-29T09:28:37.223
> 
> 标签：python, setuptools

我有包 A 和 B，都有自己的 git 仓库、PyPI 页面等。包 A 依赖包 B，通过使用`install_requires`关键字我可以让 A 自动下载和安装 B。

但是假设我想为我特别不精通的用户更进一步；我实际上想在包 A 的 tar/zip 中包含包 B，因此无需下载（这也让他们有可能对包 B 进行任何手动编辑`setup.cfg`）

是否有建议的（理想情况下是自动化的）方法，

*   当我要求 A 时，将 B 包含在`sdist`A 中
*   告诉 setuptools B 与 A 捆绑以解决依赖关系（类似于 local `dependency_links`）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:37:03.963

这被称为“供应商”，不，不支持这种方法。

这也是一个坏主意；您希望将安装留给专门的工具，这些工具不仅可以管理依赖关系，还可以管理安装的版本。使用[buildout](http://www.buildout.org/)或[pip 的 requirements.txt 格式](https://pip.pypa.io/en/stable/user_guide/#requirements-files)等工具，您可以非常精确地控制正在使用的版本。

通过将依赖项的版本捆绑在其中，您要么强制用户使用他们要使用的版本，要么使此类工具更难确保给定安装的使用版本是一致的。此外，您可能会浪费带宽和空间；如果其他软件包也包含相同的要求，您现在有多个副本。而且，如果您的依赖项已更新以解决关键的安全问题，则您必须重新发布捆绑它的任何软件包。

过去，一些包确实使用 vendorize 打包来在其分发中包含依赖项。`requests`是一个典型的例子；他们放弃了这种方法，因为它使他们的发布过程变得复杂。例如，每次在其中一个供应商的软件包中出现错误时，他们都必须生成一个新版本来包含修复。

如果您确实想坚持包含软件包，则必须编写自己的支持。我相信`requests`手动只是将供应商化的软件包添加到他们的存储库中；所以他们保留了一份不时更新的静态副本。或者，您可以`setup.py`在创建分发时扩展以下载代码。

# javascript - 如何提交 html5 画布作为表单帖子的一部分？

> ID：11708154
> 
> 赞同：7
> 
> 时间：2012-07-29T09:29:36.283
> 
> 标签：javascript, html, node.js, canvas, stream

我正在寻找将图像数据从画布标签流式传输到 node.js 服务器。我可以自己处理服务器端代码，但如何从画布提交数据？我希望提出涉及多部分表单数据的建议，因为我想流式传输数据，因为我希望图像在 50 MB 左右的范围内。如果我尝试一次发布所有数据，它往往会使客户端的浏览器崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T09:41:46.607

您可以使用[`FormData`](https://developer.mozilla.org/en/XMLHttpRequest/FormData)模拟普通`"multipart/form-data"`文件提交：

```
canvas.toBlob( function(blob) {

    var formData = new FormData();

    formData.append("image_file", blob );
    var xhr = new XMLHttpRequest;
    xhr.open( "POST", "abc.php" );
    xhr.send(formData);

}, "image/png"); 
```

canvas 方法`.toBlob`已[指定](http://www.w3.org/TR/html5/the-canvas-element.html#dom-canvas-toblob)但未实现，可以使用诸如[canvas-to-blob.js 之类的 polyfill](https://github.com/blueimp/JavaScript-Canvas-to-Blob/blob/master/canvas-to-blob.js)

# android - 使 ViewPager.setVisibility(GONE) 触发 onPause 到 onDestroyView 回调

> ID：11708156
> 
> 赞同：0
> 
> 时间：2012-07-29T09:29:40.700
> 
> 标签：android, android-layout, android-fragments

我想在特定场合显示和隐藏 ViewPager，但是这个 ViewPager 元素包含相当多的应该回收的位图。当我在 VierPager 上执行 setVisibility(GONE) 时，它不会触发任何与其页面相关的回调。

有什么系统方法可以告诉 ViewPager 销毁它托管的所有页面的视图吗？我想我可以写得有点像：

```
foreach(page from viewPagerPages) {
    page.onPause();
    page.onStop();
    page.onDestroyView();
} 
```

但我不确定。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:51:51.053

要销毁`Views`使用`ViewPager's`方法[removeAllViews ()](http://developer.android.com/reference/android/view/ViewGroup.html#removeAllViews%28%29)。它继承自`ViewGroup`.

`removeAllViews () - Call this method to remove all child views from the ViewGroup.`

这里有很多不同的方法来操作 ViewPager。

# python - 用 Pygame 绘制抛物线

> ID：11708161
> 
> 赞同：1
> 
> 时间：2012-07-29T09:30:20.660
> 
> 标签：python, math, graphics, pygame

我想在pygame中画一条抛物线。我制作了一个像素数组对象并循环遍历它以确定像素是否在抛物线上。我似乎得到了一个点之间有间隙的图像。我如何使它成为一条连续的线？

```
import pygame
import sys
from pygame.locals import *
import math

WIDTH = 640
HEIGHT = 480

pygame.init()
screen = pygame.display.set_mode((WIDTH, HEIGHT), 0, 32)

pxarray = pygame.PixelArray(screen)

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

    screen.fill((0,0,0))

    for y, py in enumerate(pxarray):
        for x, px in enumerate(py):
            if int(x) == (int(y)*int(y)) - 30*int(y) + 450:
                pxarray[y][x] = 0xFFFFFF

    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T10:08:20.970

```
color = 255, 0, 0
first = True
prev_x, prev_y = 0, 0
while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

    screen.fill((0,0,0))

    for y, py in enumerate(pxarray):
        for x, px in enumerate(py):
            if int(x) == (int(y)*int(y)) - 30*int(y) + 450:
                pxarray[y][x] = 0xFFFFFF

                if first:
                    first = False
                    prev_x, prev_y = x, y
                    continue

                pygame.draw.line(screen, color, (prev_y, prev_x), (y, x))
                prev_x, prev_y = x, y

    first = True
    pygame.display.flip() 
```

![在此处输入图像描述](../Images/80823049fd194fd63bf4f61273677a42.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:54:49.500

您需要将抛物线绘制为一系列线段。您使用多少段将决定它看起来有多平滑，因此如果您正在计算抛物线 x = y^2 + 30y + 450，您将计算多个 y 值的 x 值并从 (x0 ,y0) 到 (x1,y1) 等等。

如果您没有画线原语，则需要使用[Bresenham's Algorithm 之](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithmhttp://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)类的方法来实现。

# c++ - 如何制作一个节点图以与 Dijkstra 的最短路径一起使用？

> ID：11708168
> 
> 赞同：1
> 
> 时间：2012-07-29T09:31:18.490
> 
> 标签：c++, graph, dijkstra

我正在玩 Dijkstra 的算法，并找到了许多有关它的站点和代码片段，并且认为我能够掌握它，但我没有找到有关如何构建图形本身的信息。也许我不知道谷歌搜索的正确术语，但我只是找不到任何关于如何构建 grpah 它自己绘制图形的信息。

我正在制作一个学习项目，一个小型 c++ 吃豆人游戏，并希望使用这个算法来控制跟随 pac-man 的幽灵。我有一张地图（位图），想在迷宫的每个路口放置一个“节点”。

我该怎么做呢？这是我无法理解的一点。如何构建图表本身？

是否有可视化图形编辑器？任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:26:50.593

您可以将网格视为图形，并且可以使用图形显示搜索空间表示：

![网格如何像图表的图片](../Images/da7115b7a62bc4b1c1b19c1bbd94eb1f.png)

块 A、B、C、D 是图的节点，节点之间的权重可以表示节点之间的路径距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:45:34.637

图形可以通过编程方式定义，常见的表示形式如下所述。（注意：对于 djiksta 的算法，您还需要存储各种边的权重）。例如，该图的 A 连接到 B（权重 = 5），B 连接到 C（权重 = 1）。

1)**邻接表**：用于将边表示为列表，更常用于稀疏图。它将有 A->B(5) 和 B->C(1)。（可以promatically表示为链表数组，链表的每个节点都存储传出的顶点标识和权重）

2）**邻接矩阵**：它将有一个二维矩阵，定义为：

```
 A B C
A   0 5 0
B   0 0 1
C   0 0 0 
```

[编辑：您可以在此关于图形的 topcoder 教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=graphsDataStrucs1)系列中找到更多详细信息：第 1 节讨论图形表示，第 3 节讨论 dijksta 算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T16:57:22.693

都是抽象的。因此，我将描述我如何在我的 android 游戏中制作图表。最终，您可以随心所欲地定义它，但这是我的实现。

一点背景知识，游戏是一个塔防，图表代表了敌人从源头到汇点时所走的路径。为我的模型编写 Dijkstra 算法并不需要太多时间。我有 3 个主要课程：`Graph`、`Node`和`Connection`。

是`Graph`主要对象。它包含一个节点列表和一个连接列表。此类具有`addConnection(Node n1, Node n2, int magnitude)`（这是我实际构建图形的方式）、、、`getAllSinks()`和`getAllSources()`（`getNeighbors(Node n)`返回与参数节点共享连接的所有节点）之类的方法。这可能是一种`findShortestPath(Node start, Node stop)`方法的用武之地。

由于它是一个游戏，因此 a`Node`在屏幕上具有其位置的 X 和 Y。一个节点也有一个`NodeType`，它是 Source、Sink 和 Normal（以及其他与游戏相关的用途，如塔）的枚举。Dijkstra 不需要 NodeType。

My`Connection`是从一个节点到另一个节点的 1 对 1 链接，它是双向的。如果您区分两个节点端点，您可以使其具有方向性，我只是不需要在我的游戏中这样做。Connection 存储连接的权重。在我的例子中，我将我的图表加权为与源的距离，以便敌人总是可以尝试并采取“最重”的路径来尝试使其到达水槽，例如塔防路径的尽头。重量可以是距离或任何你想要的。此类具有`getOtherEndpoint(Node n)`、`getBothEndpoints()`和等方法`getWeight()`。

所有这些课程都是我自己构建的。他们不继承任何东西。您可以完全按照您想要的方式构建它们，并将您需要的任何信息与图表的任何部分联系起来。这只是我在 Java 中的实现。如果您愿意，或者如果您受到启发编写自己的代码，您可以在 C++ 中做同样的事情，那么我不会接受它。

# jquery - jQuery改变div

> ID：11708169
> 
> 赞同：0
> 
> 时间：2012-07-29T09:31:25.210
> 
> 标签：jquery, asp.net

我有两个 div，我在做这个 div 的改变

```
div class="switchLeft

div class="switchRight" 

<tab> 
(function ($) {  

    $(".switchLeft").click(function () {
        $(this).toggleClass("switchLeft switchRight"); 
    });

})(jQuery);
</tab> 
```

我还有另外两个 div 我改变了上面的 div，我想看看改变这个 div

我已经这样做了，但没有工作：

```
$(".switchLeft").click(function (){
{ $(this).toggleClass("switchLeft switchRight"); });
var myClass = $(this).attr("class");

if (myClass == "switchLeft") {
    $('.advertTabMenu').hide();
    $('.searchTabMenu').show();
}
else {
    $('.searchTabMenu').hide();
    $('.advertTabMenu').show();
}

}; 
```

我无法向网站添加代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:35:38.470

您的代码错误，您在代码块之前关闭了函数，因此您的语句从未执行。

你的代码：

```
$(".switchLeft").click(function (){
{ $(this).toggleClass("switchLeft switchRight"); });//Closed the function here
var myClass = $(this).attr("class");

if (myClass == "switchLeft") {
    $('.advertTabMenu').hide();
    $('.searchTabMenu').show();
}
else {
    $('.searchTabMenu').hide();
    $('.advertTabMenu').show();
}
};//Invalid syntax 
```

使用以下内容。

```
 $(".switchLeft").click(function (){
            {
            $(this).toggleClass("switchLeft switchRight"); 
            var myClass = $(this).attr("class");

            if (myClass == "switchLeft") {
                $('.advertTabMenu').hide();
                $('.searchTabMenu').show();
            }
            else {
                $('.searchTabMenu').hide();
                $('.advertTabMenu').show();
            }

        }); 
```

# google-tv - Google TV - Javascript 远程键码

> ID：11708173
> 
> 赞同：0
> 
> 时间：2012-07-29T09:32:21.213
> 
> 标签：google-tv

任何人都可以参考索尼遥控器的键码，我已经播放并停止工作，但需要暂停键码，播放暂停似乎引用了相同的键码，但遥控器上的按钮是分开的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:56:37.293

以下是媒体密钥代码： [https ://developers.google.com/tv/android/docs/gtv_controlguide#MediaKeys](https://developers.google.com/tv/android/docs/gtv_controlguide#MediaKeys)

# ios - App Store 评论：我的应用需要英国 IP 地址

> ID：11708174
> 
> 赞同：1
> 
> 时间：2012-07-29T09:32:35.877
> 
> 标签：ios, ip-address

我有一个仅适用于英国 IP 地址的 iOS 应用程序 - 因此苹果将无法正确查看它。在审查过程中，人们如何处理此类问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:49:27.633

如果可能，请在获得批准之前取消限制。如果您在实际连接开始之前控制服务器或在应用程序本身下载具有限制等的小型配置文件，则可以执行此操作。

如果没有，请为他们提供具有英国 IP 地址的代理。您可以自行设置，也可以在 VPN 提供商处获得 1 个月（左右）的服务。并在 iTunes Connect 中添加相应的指令来配置 iPhone 代理（以防万一）。

# java - 克隆单链表

> ID：11708183
> 
> 赞同：3
> 
> 时间：2012-07-29T09:34:14.163
> 
> 标签：java, data-structures, linked-list

我有一个单链表。除了正常的“Next”指针外，每个节点中还有一个指针（随机 ptr）指向列表中的某个随机节点。如何创建这样一个列表的克隆？（小于 O(n^2)）。

使用 Java 的任何建议或解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:41:58.370

您可以按顺序克隆所有节点，并在第一次通过时，构建一个身份映射，将每个原始节点与其克隆相关联。

然后做第二遍，对于每个原始节点，获取其关联的随机节点，然后从映射中获取对应的克隆，并将原始节点的克隆与随机节点的克隆相关联。整个过程仍然是 O(n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:04:44.520

可以有两种方法：

1）散列所有节点的地址，并存储随机指针指向的节点。（总体复杂度为`O(n)`.）

2）另一个O（n）解决方案将如链接所示（不使用任何额外空间）：[http ://www.geeksforgeeks.org/archives/1155](http://www.geeksforgeeks.org/archives/1155)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:42:24.033

这是 O(n) 时间和 O(1) 空间的答案。（具有哈希表或关联映射的解决方案需要 O(n) 空间）。shg的链接也是O(n)时间和O(1)空间的解。

*   遍历列表以计算单元格的数量，n。
*   创建一个大小为 n 的数组`t`，每个单元由两个指针`a`和组成`b`。在算法结束时，这将是副本。但现在不是。
*   遍历原始列表。对于原始列表 的`k`^(第 th 个)单元格：`c`
    *   让`t[k].a`成为一个指针 `c`
    *   let`c.next`是一个指向的指针`t[k]`（原来的列表暂时被破坏了，我们稍后会恢复它。）。我们现在可以在原始列表和`t`.
*   遍历原始列表，对于每个单元格`c`，让`c.next.b`是指向 的指针`c.random.next`。（`c.next`是 中的一个单元格`t`，所以也是`c.random.next`）。这样，`b`单元格的字段是原始列表中指针`t`结构的副本。`random`
*   恢复原始列表：对于每个`k`，让`t[k].a.next`指向`t[k+1].a.next`
*   制作`t`一个链表：对于每个`k`，让`t[k].a`指向`t[k+1]`。

与 shg 的链接相反，此解决方案的缺点是需要内存中大小为 n 的连续块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T09:55:16.247

列表中的每个节点都有两个引用：“下一个”和“随机”。假设“随机”总是引用前一个。你得到**双链表**。在不失一般性的情况下，您可以将克隆双链表的过程应用于克隆您的列表。检查**[这个](https://stackoverflow.com/questions/2965414/implementing-clone-on-a-linkedlist)**SO answer 他们如何克隆 DL 列表。复杂度应该是 O(n)。

# uml - 捕获基于非交互系统的功能需求

> ID：11708186
> 
> 赞同：1
> 
> 时间：2012-07-29T09:34:57.417
> 
> 标签：uml, actor, use-case

我正在尝试找到正在开发的系统的功能要求。问题是系统应该按照预定的时间间隔自行采取行动。例如，系统应每 20 分钟运行一次优化算法。它应在另一个时间间隔等向其他服务请求数据。

我无法使用用例对这种行为进行建模。我考虑过使用时间作为演员，但这会产生一个非常复杂的图表。是否有任何其他方法可以在没有外部交互的情况下找到系统的功能需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:35:34.347

如果您的系统很复杂，那么使用复杂的用例图有什么问题？您的解决方案没问题：应该及时调用的每个操作都应该连接到时间参与者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:43:46.760

UML Actors 可以概括为“有目标的角色”。因此，不要使用一个参与者来处理与多个用例相关的时间。为每个单独的计时器事件/间隔使用链接到一个用例的多个 Actor。

# html - 通过 css 将文本添加到 dt

> ID：11708188
> 
> 赞同：1
> 
> 时间：2012-07-29T09:35:18.867
> 
> 标签：html, css

我想做一个非常密集的 dl 布局。dt 与后面的 dd 在同一行。因此需要一些额外的突出显示来将 dt 与 dd 分开。在传统的书面文件中，这是通过 mdash 或冒号完成的。

是否可以通过 CSS 指定，或者我必须根据我选择的样式重写数据？

（与 h1,h2 ... - headers 有类似的问题。如果仅通过将段落开始的同一行中的文本加粗来实现标题，则应在标题文本之后插入句点。在 LaTex 中有一个额外的命令，但我想知道 CSS 是否可以做到这一点。）

（我知道[这个问题](https://stackoverflow.com/questions/7260619/css-adding-text-to-the-styles-in-stylesheet)，只是不确定这是否也适用于此。）

编辑：我意识到它对冒号的工作方式如下，但不适用于 mdashes

```
.myclass dt:after { content: ":"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:32:46.620

您可以通过输入破折号字符来执行此操作，前提是您的字符编码允许这样做并且您知道如何键入它。您可以使用例如 windows-1252 或 utf-8。但是您需要正确声明编码，请参阅[http://www.w3.org/International/tutorials/tutorial-char-enc/](http://www.w3.org/International/tutorials/tutorial-char-enc/)

为了避免编码问题，并且能够仅使用 Ascii 字符编写文档，您可以在 CSS 中使用“反斜杠转义”，例如

```
dt:after { content: "\2014"; } 
```

（如果你想要文本“-”，即破折号和空格，你需要输入两个空格：`"\2014 "`。这种奇怪是由于反斜杠转义在其后消耗一个空格的约定造成的。）

按照 CSS 规则，`&mdash;`没有特殊含义：它只是七个数据字符。即使您将它放在`style`HTML 文档的元素中，旧的 HTML 规则也不会改变：在解析 HTML 时，`style`元素被视为纯文本，其中不识别标记，所有字符都被视为这样并传递给CSS 解释，当然`</style>`需要识别的结束标签除外。

原则上，XHTML 改变了这一点，并且在真正的 XHTML（使用 XHTML 内容类型的服务器）中，在支持的浏览器（例如，*不是*IE 8）中，您可以`content: "&mdash;"`在`style`元素中使用（因为该元素的内容被解析以便实体引用被认可）。然而，这不是一个好主意，因为存在上述替代方案。

最后，您可以使用 Ascii 连字符减号“-”作为破折号的替代品，但它是一个非常糟糕的替代品，短且设计用于词内使用，而不是用作标点符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:45:47.550

这个[小提琴](http://jsfiddle.net/qHJxR/1/)对你有什么帮助吗？据我所知，纯粹使用 CSS 会忽略一些浏览器（IE7，可能是 IE8）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T09:47:02.527

如果我理解正确，那么您链接的问题完美地回答了您的问题：

```
dt:after {
  content:': '; /* or content:' – ';
} 
```

对于标题：

```
h1, h2, h3, h4, h5, h6 {
  font-weight:bold;
  display:inline;
}
h1:after, h2:after, h3:after, h4:after, h5:after, h6:after {
  content:'. ';
} 
```

# java - 运行更新后 noclassdefFoundError

> ID：11708191
> 
> 赞同：2
> 
> 时间：2012-07-29T09:36:03.663
> 
> 标签：java, android, eclipse

嗨，我是 android 开发的新手。最近有人离开我的公司时，我接手了一个项目，我能够构建和运行该应用程序。由于在 Eclipse 上运行更新，我无法再运行该应用程序，因此出现此错误：

```
07-29 10:27:13.843: E/AndroidRuntime(314): FATAL EXCEPTION: main
07-29 10:27:13.843: E/AndroidRuntime(314): java.lang.NoClassDefFoundError: uk.co.mosquitodigital.panic.dao.DaoMaster
07-29 10:27:13.843: E/AndroidRuntime(314):  at uk.co.mosquitodigital.panic.dao.DaoMaster$OpenHelper.onCreate(DaoMaster.java:48)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
07-29 10:27:13.843: E/AndroidRuntime(314):  at uk.co.mosquitodigital.panic.PanicApplication.onCreate(PanicApplication.java:64)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4244)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.app.ActivityThread.access$3000(ActivityThread.java:125)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.os.Looper.loop(Looper.java:123)
07-29 10:27:13.843: E/AndroidRuntime(314):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-29 10:27:13.843: E/AndroidRuntime(314):  at java.lang.reflect.Method.invokeNative(Native Method)
07-29 10:27:13.843: E/AndroidRuntime(314):  at java.lang.reflect.Method.invoke(Method.java:521)
07-29 10:27:13.843: E/AndroidRuntime(314):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-29 10:27:13.843: E/AndroidRuntime(314):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-29 10:27:13.843: E/AndroidRuntime(314):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:40:00.027

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在 /libs 文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于 /libs 中。将其放在那里并将其重新添加到构建路径中。

大多数情况下，出现此类错误是因为较新版本的 ADT 要求所有外部 jar 都位于 libs 文件夹中。您的同事可能与您使用的版本不同，因此出现了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:21:48.540

**1.**您必须做的第一件事是**清理项目。**

**2.**正确**配置构建路径**。

**3.**如果有**外部库**，则**在你的项目中创建一个“libs”文件夹，然后配置构建路径。**

**4\. 重启**你的 Eclipse

# c - C：从字符串中提取数字

> ID：11708192
> 
> 赞同：2
> 
> 时间：2012-07-29T09:36:05.170
> 
> 标签：c, string, strstr

我有一堆像这样结构的字符串

```
Trim(2714,8256)++Trim(10056,26448)++Trim(28248,49165) 
```

我想要做的是将所有数字保存到一个数组中（为了这个答案，假设我只想保存一个字符串的数字）。

我的计划是找到每个数字的第一个数字的位置，然后用 sscanf 读取数字，但尽管我已经考虑过了，但我找不到合适的方法。我已经阅读了很多关于 strstr 的内容，但它用于将一个字符串搜索到另一个字符串，所以我应该搜索确切的数字或做 10 个案例以涵盖从 0 到 9。

提前感谢您的支持！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:39:13.297

你可以尝试这样的事情：

*   遍历字符串，直到找到第一个数字（使用`isdigit`）
*   用于`strtoul`提取从该位置开始的数字
    *   `strtoul`返回数字
    *   第二个参数 ( `endptr`) 指向字符串中的下一个字符，*紧跟在提取的数字之后*
*   冲洗，重复

或者，您可以[标记](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok.html)字符串（使用`"(,+)"`）并尝试`strtoul`一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T10:01:22.410

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main() {
  int arr[10], idx=0, d, l=0;
  char *p, *str = "Trim(2714,8256)++Trim(10056,26448)++Trim(28248,49165)";
  for (p = str; *p != 0; p+=l) {
    l = 1;
    if (isdigit(*p)){
      sscanf(p, "%d%n", &d, &l);
      arr[idx++] = d;
    }   
  }   
  for (l=0; l<idx; l++) {
    printf("%d\n", arr[l]);
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:02:41.913

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main() {
  int array[8], count=0, data;
  const char *s = "Trim(+2714,8256)++Trim(10056,26448)++Trim(28248,49165)";
  char *p;
  while(*s) {
    if(isdigit(*s) || *s=='-' && isdigit(s[1])){
      data = strtol(s, &p, 10);
      s = p;
      array[count++] = data;
    } else
        ++s;
  }
  {//test print
    int i;
    for(i=0;i<count;++i)
      printf("%d\n", array[i]);
  }
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T10:36:38.627

您也可以尝试使用 YACC 或 Lex，它们将根据需要格式化您的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T14:06:42.133

以下是我对代码的看法：

> *   在源数组字符上开始循环
>     *   如果（源数组的）当前位置的字符是数字
>     *   将其复制到目标数组（在目标数组的当前位置）
>     *   移动到目标数组中的下一个位置
>     *   移动到源数组中的下一个位置
>     *   如果到达源字符串的末尾，则退出循环
> *   确保目标字符串正确终止（即由'\0'）

请注意，我们使用两个不同的计数器进行计数，一个用于源数组，它将随着每次循环迭代而增加，另一个用于目标数组，并且仅在找到数字时才会增加

可以使用函数“isdigit()”检查字符是否为数字，但需要头文件 ctype.h

检查字符是否为数字的另一种方法是通过参考 ASCII 表字符“0”等于 48 和字符“9”等于 57 检查其值。因此，如果字符在该范围内，则它是数字，否则它是一个字符。您实际上可以直接与角色进行比较。

```
if (character >= '0' && character =< '9') printf("%c is a digit", character); 
```

# c++ - 带有功能支持的后缀中缀

> ID：11708195
> 
> 赞同：1
> 
> 时间：2012-07-29T09:36:29.110
> 
> 标签：c++, algorithm, function, infix-notation, postfix-notation

整个网络上有许多算法可以将中缀转换为后缀。但我的问题是如何使它支持功能？例如 sin(x+y)*z。

我会很感激一个代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:47:11.463

这很简单：它也适用于函数，您使用的常规运算符（如 +、-、*）也是函数。您的问题是，您认为“功能”（如 sin）不是中缀，而是前缀。

回到您的问题：只需将这些前缀函数转换为后缀（您也应该在网络上找到后缀的前缀 - 我的假设是您不知道“前缀”术语）。

**编辑**：基本上，首先转换参数并按顺序输出它们，然后附加函数的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-24T00:34:30.653

如果您正在寻找一种算法，可以将中缀转换为后缀，包括函数调用支持，您可以使用下面的伪代码（看起来像 python 代码）。我已经为我的案例写了这个，但还没有经过彻底的测试。如果您发现任何错误，请告诉我。

我还为此编写了一个 Java 实现。

此外，关于此实现，有几点需要注意：

1.  该算法假定中缀中的标记流。它不解析表达式字符串。因此，每个标记都可以识别为操作数、运算符、函数调用等。

2.  有 7 种不同的令牌：

    *   操作数 X、Y 等
    *   左括号 - (
    *   右括号 - )
    *   运算符 - +, *
    *   函数调用开始 - sin(
    *   函数调用结束 - sin( x **)**
    *   逗号 - ,
3.  函数调用开始在算法中用`[`字符表示，函数调用结束用 表示`]`。请注意，函数调用终止是与右括号不同的标记，`)`尽管它们可能由字符串表达式中的相同字符表示。

4.  每个运算符都是二元运算符，具有优先级和关联性作为它们通常的含义。

5.  逗号`,`是一种特殊的二元运算符，其优先级`NEGATIVE INFINITY`和关联性为 LEFT（与 + 和 * 相同）。逗号运算符用于分隔函数调用的参数。所以对于函数调用：

    ```
    f(a,b,c)

    first comma separates a and b
    second comma separates a,b and c

    So the postfix for the above will be 
    ab,c,f 
    ```

    > 您可以将逗号运算符视为添加到列表函数，它将第二个参数添加到第一个参数指定的列表中，或者如果两者都是单个值，它会创建一个包含两个值的列表。

### 算法

```
infix_to_postfix(infix):

    postfix = []
    infix.add(')')
    stack = []
    stack.push('(')
    for each token in infix: 
        if token is operand:
            postfix.add(token)
        if token is '[':
            stack.push(token)
        else if token is operator:
            if stack is empty OR 
               stack[top] is '(' or stack[top] is '[':
                stack.push(token)
            else if (operator)token['precedence'] > stack[top]['precedence'] OR
               ( (operator)token['precedence'] == stack[top]['precedence'] AND 
                 (operator)token['associativity') == 'RIGHT' ):
                stack.push(token)     
            else
                postfix.add(stack.pop())
                stack.push(token)
        else if token is '(':
            stack.push(token)
        else if token is ')':            
            while topToken = stack.pop() NOT '(':
                postfix.add(topToken)
        else if token is ']':
            while True:
                topToken = stack.pop()
                postfix.add(topToken)
                if topToken is '[':
                    break

        else if token is ',':
            while topToken = stack.peek() NOT '[':
                postfix.add(topToken)
                stack.pop()
            stack.push(token) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T09:50:10.890

您必须自己编写代码。以您的具体案例为例可能会帮助您入门；的后缀形式`sin(x + y) * z`是：

> xy + 罪 z *

请注意，在这一示例中，一些操作对两个值 (`+`和`*`) 进行操作，而其他操作对一个 ( `sin`)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-31T19:02:38.757

尽管@mickeymoon 算法似乎有效，但我仍然需要进行一些调整（对我不起作用），所以我认为它对其他实现（类似 Java 的实现）可能会有所帮助。基于[https://en.wikipedia.org/wiki/Shunting-yard_algorithm](https://en.wikipedia.org/wiki/Shunting-yard_algorithm)

```
Stack<Token> stack = new Stack<>();
List<Token> result = new ArrayList<>();
//https://en.wikipedia.org/wiki/Shunting-yard_algorithm
// with small adjustment for expressions in functions. Wiki example works only for constants as arguments
for (Token token : tokens) {
    if (isNumber(token) || isIdentifier(token)) {
        result.add(token);
        continue;
    }
    if (isFunction(token)) {
        stack.push(token);
        continue;
    }

    // if OP(open parentheses) then put to stack
    if (isOP(token)) {
        stack.push(token);
        continue;
    }
    // CP(close parentheses) pop stack to result until OP
    if (isCP(token)) {
        Token cur = stack.pop();
        while (!isOP(cur)) {
            if (!isComma(cur)) {
                result.add(cur);
            }
            cur = stack.pop();
        }
        continue;
    }
    if (isBinaryOperation(token)) {
        if (!stack.empty()) {
            Token cur = stack.peek();
            while ((!isBinaryOperation(cur)
                    || (isBinaryOperation(cur) && hasHigherPriority(cur, token))
                    || (hasEqualPriority(cur, token) && isLeftAssociative(token)))
                    && !isOP(cur)
            ) {
                // no need in commas in resulting list if we now how many parameters the function need
                if (!isComma(cur)) {
                    result.add(cur);
                }

                stack.pop();
                if (!stack.empty()) {
                    cur = stack.peek();
                }
            }
        }
        stack.push(token);
        continue;
    }

    if (isComma(token)) {
        Token cur = stack.peek();
        while (!(isOP(cur) || isComma(cur))) {
            result.add(cur);
            stack.pop();
            if (!stack.empty()) {
                cur = stack.peek();//  don't pop if priority is less
            }
        }
        stack.push(token);

    }
}
while (!stack.empty()) {
    Token pop = stack.pop();
    if (!isComma(pop)) {
        result.add(pop);
    }

}
return result; 
```

我用各种复杂的表达式测试了它，包括函数组合和复杂的参数（不适用于 Wiki 算法的示例）。几个例子（e 只是一个变量，min，max，rand - 函数）：

**输入：** (3.4+2^(5-e))/(1+5/5)

**输出：** 3.4 2 5 e - ^ + 1 5 / + /

**输入：** 2+rand(1.4+2, 3+4)

**输出：** 2 1.4 2 + 3 4 + 兰特 +

**输入：** max(4+4,min(1*10,2+(3-e)))

**输出：** 4 4 + 1 10 * 2 3 e - + min max

我还使用具有三个参数的复杂函数（其中每个参数本身就是一个表达式）对其进行了测试，并且它的文字很好。

这是我的[java 函数](https://github.com/vtsyvina/sim-it/blob/master/src/main/java/sim/grammar/SimItGrammarParser.java#L238-L326)的 github，它获取标记列表并以后缀表示法返回标记列表。这是从第一个[函数](https://github.com/vtsyvina/sim-it/blob/master/src/main/java/sim/grammar/SimItGrammarParser.java#L407-L467)获取输出并计算表达式值的函数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T09:49:04.593

二元运算符 like`+`可以被视为`+(x,y)` 类似地考虑 sin、cos 等函数作为一元运算符。所以，sin(x+y)*z 可以写成`x y + sin z *`。您需要对这些一元函数进行特殊处理。

# perl - 在 perl 中使用 $/

> ID：11708201
> 
> 赞同：5
> 
> 时间：2012-07-29T09:37:03.460
> 
> 标签：perl

我在 Internet 上看到了很多使用`$/`perl over 的示例，`split`但我无法理解其用法。

有谁能解释一下我们如何在 Perl 中使用`$/`over吗？`split`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T10:27:50.557

如果在标量上下文中使用`readline $filehandle`(or `<$filehandle>`)，它将返回文件中未读部分的剩余部分，直到并包括下一次出现在`$/`. 默认情况下，这设置为换行符，因此返回文件的下一行。

```
my $line = <$filehandle> 
```

和

```
while (<$filehandle>) { ... } 
```

两者都施加标量上下文，因此变量设置为文件的下一行，并且循环在变量中一次执行文件的一行`$_`。

`$/`如果文件中的数据单元超过几行，更改 的值有时会很有用。例如，如果文件包含`}`在行尾总是以 a 结尾的块，那么您可以设置`$/ = "}\n"`. 然后你会得到一切，直到返回块的下一个结尾，可能带有嵌入的换行符。

有几个特殊值`$/`。将其设置为空字符串`$/ = ''`将使 Perl 返回所有内容，直到文件中出现一个或多个空行。显然，这仅在文件中的数据被分隔为带有空行的单元时才有用。

设置`$/`为`undef`将允许读取一直持续到文件末尾。这就是将文件插入内存的意思*，*有时对于小文件很实用。如果绝对有必要，最好`local`在一个小代码块的范围内使用，例如

```
my $data = do {
  open my $filehandle, '<', 'file.txt' or die $!;
  local $/;
  <$filehandle>;
}; 
```

设置`$/`为对数值的*引用将强制读取在特定数量的字符后停止。*例如，`$/ = \4096`将为`readline`您从文件中获取下一个 4KB 的数据（如果剩余少于 4KB，则为文件的其余部分）。这可以用于特殊目的，例如缓存您自己的文件读取。

通过“`$/`在 Perl 中使用`split`”，我想您的意思是这与在整个文件上使用之间的区别，`split`整个文件都变成了一个标量变量。主要考虑因素是内存空间。如果文件超过几 KB，那么在不完全必要的情况下一次将其全部读入 Perl 变量是非常浪费的。使用`$/`and`while`将允许一次仅将一条记录读入内存、处理并在读取下一条记录时丢弃。

如果您认为您需要数组中的所有文件，以便您可以向后和向前看，例如，您应该考虑[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)使整个文件*看起来*好像在数组中的模块（甚至让您修改它）但实际上会根据需要将数据分页进出内存。

使用的一个优点`split`是它需要一个正则*表达式*来识别拆分字符串的位置。这与`$/`只能设置为简单字符串的情况相反。如果您需要以更复杂的方式划分文件，这可能很有用。

通常，`$/`与 with 一起使用`while`是读取文件的最佳方式，并且应该是您的首选，除非有一个压倒一切的原因需要不同的东西。它将防止过度使用内存，并通过迫使您一次专注于单个数据记录来鼓励更好的编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T09:48:35.993

来自 Perl 文档

> $/ 和 $\ 分别是输入和输出记录分隔符。当您读取或写入数据时，它们控制定义“记录”的内容。

默认情况下，使用的分隔符是`\n`. 然而，

如果文件包含，

```
Lorem ipsum dolor sit amet, --- consectetuer --- adipiscing elit. 
```

定义`$/ = "---\n";`, 将使分隔符`---`而不是`\n`相应地读入。您在分隔符处“拆分”了字符串。

**[（参考）](http://www.perl.com/pub/2004/06/18/variables.html)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T09:53:11.093

不知道你在说什么例子，但有人可能会认为

```
my @lines = split $/, $very_long_string; 
```

类似于将文件放入数组中，如

```
my @lines = <$FILE>; 
```

但是，它并不完全相同，因为 of 的第一个参数`split`是一个正则表达式，而 while`$/`仅被解释为一个字符串。对于 的默认值`$/`，没有区别，但是将其设置为 eg`.`应该会显示出区别。

# php - array_search 错误的参数数据类型

> ID：11708203
> 
> 赞同：0
> 
> 时间：2012-07-29T09:37:51.387
> 
> 标签：php, arrays

我正在玩这个：

```
$sort = array('t1','t2');

function test($e){
    echo array_search($e,$sort);
}

test('t1'); 
```

并得到这个错误：

```
Warning: array_search(): Wrong datatype for second argument on line 4 
```

如果我在没有这样的函数的情况下调用它，我得到的结果是 0；

```
echo array_search('t1',$sort); 
```

这里出了什么问题？？感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:40:58.727

PHP 中的变量具有**函数作用域**。该变量`$sort`在您的函数中不可用`test`，因为您还没有将它传入。您还必须将它作为参数传递给函数，或者在函数中定义它。

[也可以使用`global`关键字，但真的不推荐。明确地传递数据。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:42:46.723

您必须将数组作为参数传递！因为函数变量与php中的全局变量不同！

这是固定的：

```
$sort = array('t1','t2');

function test($e,$sort){
    echo array_search($e,$sort);
}

test('t2',$sort); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T09:43:03.493

您不能从内部函数直接访问全局变量。你有三个选择：

```
function test($e) {
  global $sort;

  echo array_search($e, $sort);
}

function test($e) {
  echo array_search($e, $GLOBALS['sort']);
}

function test($e, $sort) {
  echo array_search($e, $sort);
} // call with test('t1', $sort); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T09:46:07.113

取函数内部的 $sort 或将 $sort 作为参数传递给函数 test()..

例如

```
function test($e){
$sort = array('t1','t2');
    echo array_search($e,$sort);
}

test('t1');

----- OR -----
$sort = array('t1','t2');
function test($e,$sort){

    echo array_search($e,$sort);
}

test('t1',$sort); 
```

# azure - 唤醒 Windows Azure 辅助角色

> ID：11708204
> 
> 赞同：0
> 
> 时间：2012-07-29T09:38:01.677
> 
> 标签：azure, azure-worker-roles

在 Windows Azure Worker 角色中处理“紧急”消息的最佳方式是什么？

我有一个工人角色开始，做一个无限的while(true)循环，在这个循环中：

1.  读取队列是否有消息
2.  处理它们并删除它们
3.  如果没有更多消息进入睡眠，首先使用 Thread.Sleep(interval) 进行较小的间隔（10 秒），然后逐渐将睡眠间隔增加到 2 分钟
4.  如果队列中出现一条消息，它将睡眠间隔重置为 0 并返回到第一步

问题是，如果工作人员正在睡眠 2 分钟并且队列中出现一条消息，我想唤醒工作人员而不是等待剩余时间。

有没有办法获取工作者角色的实例并告诉它唤醒？我想在数据库中写一些东西，但是我遇到了同样的问题，即使我有一个这样做的角色，我将如何唤醒另一个已经在睡觉的工作角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:18:20.647

这是使用 Windows Azure 存储队列的缺点之一。您必须在成本和延迟之间做出选择。如果您想优化成本，您将实施退避策略（就像您所做的那样），但这意味着这将影响您的消息何时被处理（增加延迟）。

[在您的情况下，评估 Windows Azure 服务总线队列可能会很有趣（在此处](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)了解差异）。使用服务总线队列的优点是它支持长轮询，这意味着它将保持与服务器的连接，直到消息到达（或超时）。

这是您通常会编写的一些示例代码（您仍然需要管理异常等...）：

```
QueueClient queueClient = factory.CreateQueueClient("myqueue");
while (true)
{
    BrokeredMessage msg = queueClient.Receive(TimeSpan.FromSeconds(45));
    if (msg != null)
    {
        var request = msg.GetBody<CreateOrderMessage>();
        // Do something
        msg.Complete();
    }
} 
```

以下是一些可以帮助您入门的好资源：

*   [http://www.cloudcasts.net/devguide/Default.aspx?id=12042](http://www.cloudcasts.net/devguide/Default.aspx?id=12042)
*   [http://windowsazurecat.com/2011/08/how-to-simplify-scale-inter-role-communication-using-windows-azure-service-bus/](http://windowsazurecat.com/2011/08/how-to-simplify-scale-inter-role-communication-using-windows-azure-service-bus/)
*   [http://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:58:52.650

只是睡得少一点。你为什么要睡两分钟而不是一秒钟？从一个实例每秒轮询一次队列的交易费用约为每月 0.25 美元。

# java - 堆栈指针混乱

> ID：11708205
> 
> 赞同：-6
> 
> 时间：2012-07-29T09:38:11.713
> 
> 标签：java, stack

我正在研究 java 堆栈，只是对这个特定场景中的指针感到好奇。

当我们将一个对象或一个节点压入堆栈时，这点在哪里：

*   在第一个节点的前面？
*   在第一个节点的后面？

任何人都可以帮助我或提供一些演示链接来描述堆栈中的堆栈推送和弹出节点吗？并详细说明指针在任何给定时间指向的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:49:20.343

这是堆栈的工作方式：

你像这样将元素推入其中。新添加的元素始终处于“顶部”，因为它是后进先出 (LIFO) 结构。您只能访问顶部元素：

![堆栈推送](../Images/56a6d25ddad11b668ffbb56b9c359eca.png)

然后你可以弹出这些元素，但 pop 总是删除最上面的元素，像这样：

![在此处输入图像描述](../Images/0e6c9d09577a86b5cf26c6bb34323448.png)

如果我误解了您的问题，请发表评论，我将删除此帖子！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T09:58:23.667

> 我正在研究java堆栈，我只是对这个指针感到好奇。

Java 使用虚拟机。字节码需要在真机上运行。这意味着在虚拟意义上，虽然它使用堆栈来推送和弹出值，但它被编译为使用多个寄存器（例如 8 到 16）的本机代码，并且具有选择性使用的 CPU 堆栈（因为它是慢点）

您可以成为一名经验丰富的 Java 开发人员，但对 Java 堆栈或它如何虚拟工作或它如何转换为本机代码一无所知。作为初学者，可能还有其他一些更有用的知识。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:22:58.930

不幸的是，这个问题无法用 Java 来回答。

Java 虚拟机确实有概念堆栈——一个用于线程的本地帧，另一个用于计算表达式时的操作数。但是，这些是*概念*堆栈，可能会或可能不会使用本机代码“堆栈指针”来实现。当然，本机代码堆栈/堆栈指针的任何使用都是*实现细节*。

如果您想了解本机堆栈/堆栈指针的工作原理，最好阅读处理器架构、指令集和汇编语言编程。[或者，调用堆栈](http://en.wikipedia.org/wiki/Call_stack)上的 Wikipedia 页面对它们的工作方式给出了 ISA 中立的描述。

# java - 如何动态创建以下字符串

> ID：11708206
> 
> 赞同：1
> 
> 时间：2012-07-29T09:38:39.233
> 
> 标签：java, json, recursion

我在这里使用**Lucen**库做项目，我需要使用**Json**对象动态构建查询。所以在这里我使用了 jettison 库。作为一个例子，我的 json 像这样

`{"OR":{"OR": {"fildKey1": "value1","fildKey2": "value2","fildKeyabc": "valueabc"},"AND": {"AND": {"fildKey3": "value3","OR": {"fildKey4": "value4","fildKey5": "value5"}},"fildKeyw": "valuew"}}}`

使用上面的 json 我需要创建以下查询

```
(( fildKey1 : value1 OR fildKey2 : value2 OR fildKeyabc : valueabc )OR(( fildKey3 : value3 AND( fildKey4 : value4 OR fildKey5 : value5 ))AND fildKeyw : valuew )) 
```

但我无法得到上面的查询。我的结果是这样的

```
(( fildKey1 : value1 OR fildKey2 : value2 OR fildKeyabc : valueabc )OR(( fildKey3 : value3 AND( fildKey4 : value4 OR fildKey5 : value5 )AND)AND fildKeyw : valuew )OR) 
```

我需要删除以上额外的 2 个运算符这是我的代码

```
public class JettisionCls {
   static Stack s = new Stack();
   String operater = null;
   static String res = "";
   int bracket_counter = 0;   

public void getKeyAndValue(JSONObject json_obj) throws JSONException{
    Iterator<String> iter = json_obj.keys();

    while (iter.hasNext()) {
        String obj = iter.next();
        if(obj.toLowerCase().equals("and") || obj.toLowerCase().equals("or")){
            //System.out.print(obj);
            operater = obj;              
        }

        JSONObject temp = null;
        try {
            temp = new JSONObject(json_obj.get(obj).toString());
        } catch (JSONException e) {
            e.getStackTrace();
        }

        if (temp != null) {
            //System.out.print("(");
            res = res +"(";
            bracket_counter=bracket_counter+1;
            s.push(operater);

            getKeyAndValue(temp);

            //System.out.print(")");
            res = res +")";
            bracket_counter=bracket_counter-1;                          
            if((s.size()) != 0 && bracket_counter != 0){
                //System.out.print(s.peek());
                s.pop();
                res = res +s.peek(); 
            }
            else{
                s.pop();
            }
        }            
        else{
            if(iter.hasNext()){
                res = res+" "+obj + " : " + json_obj.get(obj) + " " + operater;                                    }
            else{
                res = res+" "+obj + " : " + json_obj.get(obj)+" ";
            }
        }
    }
} 
```

我的主要方法看起来像这样

```
String multiLevelQuery = "{\"OR\":{\"OR\": {\"fildKey1\": \"value1\",\"fildKey2\": \"value2\",\"fildKeyabc\": \"valueabc\"},\"AND\": {\"AND\": {\"fildKey3\": \"value3\",\"OR\": {\"fildKey4\": \"value4\",\"fildKey5\": \"value5\"}},\"fildKeyw\": \"valuew\"}}}";

JSONObject jobj = new JSONObject(multiLevelQuery);
JettisionCls obj = new JettisionCls();
obj.getKeyAndValue(jobj);
System.out.println(JettisionCls.res); 
```

如果有人可以请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T05:23:45.080

我认为您可以使用字符串替换来做到这一点。

```
public void createQry(String s){
    String temp = s;

    if(temp.contains(")OR)")){
        temp = temp.replace(")OR)", "))");
    }
    if(s.contains(")AND)")){
        temp = temp.replace(")AND)", "))");
    }
    System.out.println(temp);        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:40:31.417

嗯，这是一个有趣的问题。但不是蛮力，我会选择更优雅的东西，比如`recursion`. 推送、弹出和连接将通过递归为您完成。在您的代码中，我可以看到很多地方可以破坏。即使您解决了此问题，它也有可能因其他情况而失败。

具有递归的示例算法将是

```
public String generateQuery(JSONObject json_obj) {

if(single_json_obj)
   return generated_query_for_single_condition;

//else complex json with inner children
else
   return generateQuery(innerJSONObject)
} 
```

}

# sql - 如何将所有字段选择语句汇总为一行？

> ID：11708212
> 
> 赞同：-2
> 
> 时间：2012-07-29T09:39:52.170
> 
> 标签：sql, sql-server, sql-server-2005

我的 sql 有问题。我尝试在我的声明中将最大数量总和设为一行，但它不起作用。警告消息在 ')' 附近显示不正确的语法。这是我的代码：-

```
select sum(A) from (select t.ticketid, lt.description ticketsource,
c.description tickedcreted,
max_score = isnull(
(select max(si.marks) as max_score
from survey_items si
left join survey_questions sq on (si.question_id = sq.question_id)
left join survey s on (sq.survey_id = s.survey_id
and s.code_interaction= 1)),0
),
sum(si.marks) totalAnswer,

count(t.ticketid) totalticketcreated,
count(t.feedback) totalfeedbackreceived
from  survey_items si
left join lookup_questions lq on (si.item_id = lq.item_id)
left join feedback fb on (fb.feedback_id = lq.feedback_id)
left join ticket t on (t.ticketid = fb.ticketid)
left join survey_questions sq on (si.question_id = sq.question_id)
left join survey s on (sq.survey_id = s.survey_id)
left join lookup_assignedOfficer c on (c.code = t.enteredby )
left join lookup_department ld on t.department_code =ld.code
left join lookup_ticketsource lt on lt.code = s.code_interaction
where t.trashed_date is null and lt.enabled =1 and ld.description is not null
and
((t.assigned_date BETWEEN '7/16/2012' AND '7/16/2012'))
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:26:03.467

当使用从 select 语句中检索的结果集作为表时，您必须将别名传递给表。

尝试这个：

```
select sum(A) from 
(
    select t.ticketid, lt.description ticketsource,
    c.description tickedcreted,
    max_score = isnull(
    (select max(si.marks) as max_score
    from survey_items si
    left join survey_questions sq on (si.question_id = sq.question_id)
    left join survey s on (sq.survey_id = s.survey_id
    and s.code_interaction= 1)),0
    ),
    sum(si.marks) totalAnswer,

    count(t.ticketid) totalticketcreated,
    count(t.feedback) totalfeedbackreceived
    from  survey_items si
    left join lookup_questions lq on (si.item_id = lq.item_id)
    left join feedback fb on (fb.feedback_id = lq.feedback_id)
    left join ticket t on (t.ticketid = fb.ticketid)
    left join survey_questions sq on (si.question_id = sq.question_id)
    left join survey s on (sq.survey_id = s.survey_id)
    left join lookup_assignedOfficer c on (c.code = t.enteredby )
    left join lookup_department ld on t.department_code =ld.code
    left join lookup_ticketsource lt on lt.code = s.code_interaction
    where t.trashed_date is null and lt.enabled =1 and ld.description is not null
    and
    ((t.assigned_date BETWEEN '7/16/2012' AND '7/16/2012'))
) AS result 
```

其次，您试图找到 A 列的总和，但结果集中不存在 A 列。

# c - 如何减慢 glutIdleFunc 动画速度

> ID：11708214
> 
> 赞同：1
> 
> 时间：2012-07-29T09:40:25.673
> 
> 标签：c, opengl, animation

亲爱的，我正在尝试使用 OpenGL 通过`glutIdleFunc()`. 下面是我的代码：

```
float t = 0.0;

void idle (void)
{
    t += 0.1;
    if (t > 2*pi)  
    { 
        t = 0.0; 
    }
    glutPostRedisplay();
}

//in main function
glutIdleFunc(idle); 
```

我一直在尝试调整 t 的增量以减慢我的动画速度。但不知何故，我的动画一直移动得太快，直到我无法用眼睛捕捉到它。有谁知道如何减慢这种动画的速度？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:33:28.723

与其尝试`t`在空闲函数中使用人为的值，不如使用真正的计时器（例如 C's ）可能会更好`time()`。然后，在给定自上一帧绘制以来经过的时间的情况下，只需将动画推进适当的量即可。

以下是它的外观：

```
time_t lastTime;

void draw() {
  const time_t now = time();
  const double dt_s = difftime(now, lastTime);

  // Update your frame based on the elapsed time.  For example, update an angle
  // based on a specified rotation rate (omega_deg_s):
  const double omega_deg_s = 10.0;
  angle += dt_s * omega_deg_s;
  angle = fmod(angle, 360.0);

  // Now draw something based on the new angle info:
  draw_my_scene(angle);

  // Record current time for next time:
  lastTime = now;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T11:39:02.383

您需要使用自上次函数调用以来的时间而不是直接值作为指标，因为该时间可能会有所不同。
有关更多信息，请阅读[valkea 在 GameDev 上的回答](https://gamedev.stackexchange.com/a/13011/11274)，它建议您使用`glutGet(GLUT_ELAPSED_TIME)`来计算该值。

# magento - 如何将 Magento 管理 URL 更改为 domainname.com/index.php/customname1/customname2

> ID：11708217
> 
> 赞同：0
> 
> 时间：2012-07-29T09:41:03.247
> 
> 标签：magento

有很多文章谈论如何将 Magento Admin Url 更改为单个不同的名称，例如 domainname.com/index.php/myadmin，但没有一篇文章告诉我如何将 admin url 更改为多路径 url，例如域名。 com/index.php/name1/name2/name3

我试图更改 local.xml 中的名称，但它仅适用于单个名称。请帮忙？提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:04:47.207

我不确定这是否可能。基本方法是在local.xml中将前端名称“admin”更改为“whatever”，以获取对后端的访问权限。基于它，您可能可以通过重写对路由器的行为进行一些更改。

适用于模块的一种可能方法是重写，但我没有在后端模块（adminhtml）上进行测试，它可能不适用于其他后端模块或制造一些麻烦。这是local.xml中的一个示例，做一些测试。“来自”标签中的正则表达式也可以工作：

```
<config>
...
    <rewrite>
        <mage_adminhtml>
            <from><![CDATA[#^/whatevermodule/whatevercontroller/whateveraction#]]></from>
            <!--
                - whatevermodule matches the router frontname below
                - whatevercontroller matches the path to your controller Considering the router below,
                "/whatevermodule/whatevercontroller/" will be "translated" to
                "/Mage/Adminhtml/controllers/Catalog/ProductController.php" (?)
            -->
            <to>/admin/catalog_product/index</to>
        </mage_adminhtml> 
```

# apache - Apache 在 80 端口上运行，但无法远程连接

> ID：11708226
> 
> 赞同：1
> 
> 时间：2012-07-29T09:42:37.277
> 
> 标签：apache

我在 Windows 7 上安装了 Apache。它运行成功 - 我可以从本地主机连接到它。问题是本地无线网络上的其他计算机都没有连接。

我已将 \apache\conf\httpd.conf 配置为“全部允许”和“监听 80”

我禁用了端口 80 的防火墙

此外，命令 netstat -abn 显示： TCP 0.0.0.0:80 0.0.0.0: LISTENING

谁能想到阻止我从另一台机器连接的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T00:34:03.143

尝试使用防火墙上的修复选项 - 有时那里的向导会添加解决问题的其他规则。

# f# - F# printfn 异常

> ID：11708229
> 
> 赞同：3
> 
> 时间：2012-07-29T09:43:27.810
> 
> 标签：f#

谁能解释为什么这会导致错误：

```
let xs = [| "Mary"; "Mungo"; "Midge" |]

Array.iter printfn xs 
```

虽然这不会：

```
Array.iter printfn [| "Mary"; "Mungo"; "Midge" |] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T10:15:56.323

printfn 的签名是`Printf.TextWriterFormat<'a> -> 'a`. 编译器将字符串的文字值推断为`Printf.TextWriterFormat<unit>`动态字符串，但不能这样做。

您可以通过添加正确的类型注释来帮助第一个示例中的编译器：

```
let xs: Printf.TextWriterFormat<unit> [] = [| "Mary"; "Mungo"; "Midge" |]
Array.iter printfn xs 
```

或使用显式构造函数：

```
let xs = [| "Mary"; "Mungo"; "Midge" |]
Array.iter (fun s -> printfn <| Printf.TextWriterFormat<unit>(s)) xs 
```

一般来说，这样做太冗长了。因此，指定格式字符串（例如`"%s"`for strings 和`"%O"`for types 覆盖`ToString()`方法）是一个不错的方法：

```
let xs = [| "Mary"; "Mungo"; "Midge" |]
Array.iter (printfn "%s") xs 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T16:32:06.973

除了@pad 的出色回答。

造成混淆的主要原因是误解了论点会发生什么。让我们看一下单次迭代。它应该是

```
printfn "%s" "Mary" // or whatever default format specifier instead of %s 
```

但事实上，它是

```
printfn "Mary" () 
```

所以`"Mary"`不是要格式化的字符串。**它是一个格式说明符**，非常无用，但非常适合格式化`unit`.

尝试对您的示例进行此修改：

```
Array.iter printfn [| "Mary %s"; "Mungo"; "Midge" |] 
```

它会拒绝编译。

# c# - 通过lucene获取搜索词的位置

> ID：11708234
> 
> 赞同：1
> 
> 时间：2012-07-29T09:44:25.420
> 
> 标签：c#, lucene.net

我想获得 lucene 在其中搜索的字段中单词的位置。例如，如果 lucene 在“TextContent”字段中搜索“Hamid”并在其中找到 5 个单词，请告诉我这 5 个单词在 RichTextBox 中突出显示的位置。我将 C# 和 Lucene.net 用于我的 Windows 应用程序。谢谢。

# asp.net - BackgroundWorker – 等待它完成或超时

> ID：11708236
> 
> 赞同：1
> 
> 时间：2012-07-29T09:44:57.430
> 
> 标签：asp.net, vb.net, backgroundworker

我有一个网页，它由一个用于数据输入的表单和一个用于显示结果的面板组成。此页面是用 VB.Net 编写的，托管它的网站是 ASP.Net。

页面的正常使用情况如下：

1.  用户输入带有一些数据/过滤器的表单
2.  用户按下“搜索”按钮
3.  A`BackgroundWorker`开始寻找解决方案

BackgroundWorker 实例存储在一个静态变量中，因为我不关心多用户场景，但我不受此选择的约束，我可以更改它。此外，搜索过程是异步的，但我真的不需要在搜索过程中显示任何内容。BackgroundWorker 将结果存储在一个`SolutionStorage`对象中。

我的目标如下。
当 BackgroundWorker 结束时，找到的解决方案必须显示在页面上。但是，如果经过一段固定的时间（目前为三分钟）它仍在运行，我想终止它并显示在那一刻存在于 SolutionStorage 中的解决方案。

代码如下。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
  If Not IsNothing(worker) Then
    worker.CancelAsync()
  End If
  worker = New BackgroundWorker()
  worker.WorkerReportsProgress = False
  worker.WorkerSupportsCancellation = True
  AddHandler worker.DoWork, AddressOf workerDo
  AddHandler worker.RunWorkerCompleted, AddressOf workerComplete
End Sub

Protected Sub search(ByVal sender As Object, ByVal e As EventArgs) Handles submitButton.Click
  worker.RunWorkerAsync()
  Thread.Sleep(180 * 1000)
  If worker.IsBusy Then
    worker.CancelAsync()
    Dim solutions = repository.getSolutions()
    '' Display solutions
    If (solutions.Count > 0) Then
      SolutionsRepeater.DataBind()
    End If

  End If
End Sub

Protected Sub workerDo()
  '  Collect data from the form
  '  Build the SolutionStorage
  '  Start the search
End Sub

Protected Sub workerComplete(sender As Object, e As RunWorkerCompletedEventArgs) 
  '' Display solutions
  If (solutions.Count > 0) Then
    SolutionsRepeater.DataBind()
  End If
End sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
  If Not IsNothing(worker) Then
    worker.CancelAsync()
  End If
  worker = New BackgroundWorker()
  worker.WorkerReportsProgress = False
  worker.WorkerSupportsCancellation = True
  AddHandler worker.DoWork, AddressOf workerDo
  AddHandler worker.RunWorkerCompleted, AddressOf workerComplete
End Sub 
```

这是一种正确的做事方式吗？这是更好的做事方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:16:03.117

用睡眠调用锁定一个 asp .net 线程 3 分钟并不是一个很好的解决方案。

我建议您构建一个可以在后台进行搜索的后台系统，以便您的 asp .net 页面立即返回。然后，您可以每 10 秒刷新一次页面，以查看搜索是否仍在运行、完成或失败。

这是您可能可以使用的一个小技巧，但它有一些限制和警告：

[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

阅读评论以查看警告和限制。

但是由于您不关心多用户支持，而且我认为您页面的访问次数非常有限，因此我看不出您当前的解决方案存在直接问题。但是一旦你扩展它，它可能会给你带来一些问题。

# button - 如何从输入元素创建一个没有角的 Jquery Mobile 按钮？

> ID：11708237
> 
> 赞同：0
> 
> 时间：2012-07-29T09:45:03.043
> 
> 标签：button, jquery-mobile, rounded-corners

我正在使用 Jquery Mobile 输入构建控制组，如下所示：

```
<div data-role="controlgroup">
    <span class="ui-li ui-li-divider ui-bar-a ui-corner-top"><span class="ui-divider-text">Divider</span></span>
    <input type="button" data-icon="arrow-r" data-iconpos="right" value="text" />
    ....
</div> 
```

虽然这很好用，但我经常会遇到输入元素也会出现角落。我尝试通过在输入中添加*data-corners="false"*来覆盖 JQM

```
<input type="button" data-icon="arrow-r" data-corners="false" data-iconpos="right" value="text" /> 
```

但由于这是在包装输入元素的 div.ui-btn 上进行的，所以它不起作用。

**问题：**
有没有办法告诉 JQM 不要在元素上设置角？我无法将类添加到输入元素（如**ui-corner-I-don't-need**，因为角将在**ui-btn**和**ui-btn-inner**包装上，我只能通过 Jquery 访问（不要'不想要）。

还有其他想法吗？

感谢您的投入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:00:14.457

用你的代码试试这个，只需将 id 给 div

```
<script type="text/javascript">
        $(document).ready(function(){
            $('#buttongp > div.ui-controlgroup-controls > div:first').removeClass("ui-corner-top");
        });
    </script>

<div data-role="controlgroup" data-inset="true" id="buttongp">
                <span  id="buttonspangp" data-role="list-divider" class="ui-li ui-li-divider ui-bar-a ui-corner-top"><span class="ui-divider-text">Divider</span></span>
                <input type="button" data-icon="arrow-r" data-corners="false" data-iconpos="right" value="text" />
                <input type="button" data-icon="arrow-r" data-corners="false" data-iconpos="right" value="text" />
                <input type="button" data-icon="arrow-r" data-corners="false" data-iconpos="right" value="text" />
            </div> 
```

# sql - 如何使用while循环更新sql表

> ID：11708240
> 
> 赞同：0
> 
> 时间：2012-07-29T09:45:24.310
> 
> 标签：sql

我正在使用 while 循环更新我的 sql 表，在我的表记录中，“id”的顺序是 27、28、29、30 到 45。我正在尝试将这个“id”更新为 2、3、4、5 到 16 我使用这个循环，但只得到错误

```
DECLARE @a INT 
DECLARE @b INT
SET @a = 2
SET @b = 27
WHILE @b < 42
BEGIN
exec sp_executesql 'UPDATE Cpart2_TEST_2 SET id = @a where id = @b   

SET @a = @a + 1
SET @b = @b + 1
END 
```

这是错误信息

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'DECLARE @a INT 附近使用正确的语法

```
DECLARE @b INT
SET @a = 2
SET @b = 27
WHILE @b < 42
BEGIN
' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:52:32.497

将您的执行行更改为：

```
exec sp_executesql 'UPDATE Cpart2_TEST_2 SET id = ' + CAST(@a AS nvarchar(3)) + ' where id = + ' CAST(@b AS nvarchar(3)) 
```

我没有解析这个，所以它可能有语法错误。但是让它发挥作用，你应该会很好。

需要考虑的一件事...如果“id”是 IDENTITY 列，您可能无法更改它。

# javascript - 使用 django / javascript 保存 DnD 状态

> ID：11708246
> 
> 赞同：0
> 
> 时间：2012-07-29T09:46:38.750
> 
> 标签：javascript, django

我正在做一个 javascript 程序来将用户拖放到组中。我想将用户和组的配置保存在数据库中。如果我可以发出发布请求，我会在视图中轻松保存。

所以，我考虑过用 javascript 创建一个发布请求，是否可能，安全？

django 有更好的可能性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:51:44.897

你在使用 jQuery 吗？如果是这样，请查看： [http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

你可以这样称呼：

```
$.post('script_to_run.php?infotosave=3'); 
```

然后您创建“script_to_run.php”文件来查询您的数据库并存储您需要的任何信息。

你可以只用 javascript（没有 jQuery）来做，但是用 jQuery 更简单

# unique - 允许每台计算机一票（不是 IP，未登录用户）

> ID：11708251
> 
> 赞同：3
> 
> 时间：2012-07-29T09:47:13.870
> 
> 标签：unique, ip-address, rating

我有一个网站，我想在各种事情上给予 5 星评级。但是，就像许多其他人在 SO 上提出问题一样，我只想允许每人投一票。

起初，我计划在投票发生时记录 IP 地址，然后扫描以查看当前 IP 之前是否投票过，这会很好用。

但后来我意识到一个问题，该网站是为一所特定学校的大学生设计的。如果我正确理解 IP，这有几个问题：

1.  使用学校计算机/连接到学校 wifi 的人将拥有相同的 IP（可能是少数，但不是每台计算机都是唯一的）
2.  许多人住在 4-8 人的房子里，他们都将共享相同的 IP（假设他们在同一个网络上）

我如何在不使用 IP 地址或用户登录的情况下检测唯一投票？有没有其他方法可以做这样的事情？

或者也许我误解了 IP 地址的工作原理，我仍然可以使用它 - 希望是这样。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:50:11.320

你可以用任何你想要的方式做到这一点。没有“一条正确的方法”。

在极端情况下，您可以让用户在请求帐户时提交血液样本。然后，您可以对照您的数据库检查新的血液样本。这可能会导致人们提交家庭成员的血液样本。如果这是一个问题，您可能希望他们签署一份合同，最有可能经过公证，说明他们已经提交了自己的血液样本。

您也可以让他们亲自到您的办公室注册。例如，您可以收集指纹并将其与您的数据库进行比较。

IP 地址对于此目的不是很有用。有些人可以访问数十个 IP 地址，在某些情况下，许多人共享一个 IP 地址。

您只能给在论坛上发表大量智能帖子的用户投票。这至少会减少人们创建投票账户的便利性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-29T09:51:38.690

我不确定它是否可以在您的应用程序中实现，但尝试记录唯一的 MAC 地址而不是唯一的 IP 地址。MAC 地址对于每个网络控制器来说都是唯一的，通常 PC 只有一个。

# linux - 解决 NodeJS 中的 NPM 问题

> ID：11708254
> 
> 赞同：1
> 
> 时间：2012-07-29T09:47:24.967
> 
> 标签：linux, node.js, 64-bit, npm, oracle-enterprise-linux

当我执行以下命令时

```
npm install request 
```

输出是：

```
bash: npm: command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:53:52.353

安装`npm`

通过

```
sudo curl http://npmjs.org/install.sh | sh 
```

然后运行

```
npm install request 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:29:28.003

对于终端安装请求模块：

```
npm install request 
```

以下是输出

```
npm http GET https://registry.npmjs.org/request
npm ERR! Error: failed to fetch from registry: request
npm ERR!     at /opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/get.js:139:12
npm ERR!     at cb (/opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/request.js:32:9)
npm ERR!     at Request._callback (/opt/node0610/lib/node_modules/npm/lib/utils /npm-registry-client/request.js:137:18)
npm ERR!     at Request.callback (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:109:22)
npm ERR!     at Request.<anonymous> (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:198:58)
npm ERR!     at Request.emit (events.js:88:20)
npm ERR!     at ClientRequest.<anonymous> (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:195:10)
npm ERR!     at ClientRequest.emit (events.js:67:17)
npm ERR!     at CleartextStream.<anonymous> (http.js:1134:11)
npm ERR!     at CleartextStream.emit (events.js:67:17)
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR! 
npm ERR! System Linux 2.6.18-194.el5
npm ERR! command "node" "/opt/node0610/bin/npm" "install" "request"
npm ERR! cwd /home/applmgr
npm ERR! node -v v0.6.10
npm ERR! npm -v 1.1.0-3
npm ERR! message failed to fetch from registry: request
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/applmgr/npm-debug.log
npm not ok 
```

文件 /home/applmgr/npm-debug.log 的内容

```
info it worked if it ends with ok
verbose cli [ 'node', '/opt/node0610/bin/npm', 'install', 'request' ]
info using npm@1.1.0-3
info using node@v0.6.10
verbose config file /home/applmgr/.npmrc
verbose config file /opt/node0610/etc/npmrc
verbose config file /opt/node0610/lib/node_modules/npm/npmrc
verbose cache add [ 'request', null ]
silly cache add: name, spec, args [ undefined, 'request', [ 'request', null ] ]
verbose parsed url { pathname: 'request', path: 'request', href: 'request' }
verbose addNamed [ 'request', '' ]
verbose addNamed [ null, '' ]
silly name, range, hasData [ 'request', '', false ]
verbose raw, before any munging request
verbose url resolving [ 'https://registry.npmjs.org/', './request' ]
verbose url resolved https://registry.npmjs.org/request
http GET https://registry.npmjs.org/request
ERR! Error: failed to fetch from registry: request
ERR!     at /opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/get.js:139:12
ERR!     at cb (/opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/request.js:32:9)
ERR!     at Request._callback (/opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/request.js:137:18)
ERR!     at Request.callback (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:109:22)
ERR!     at Request.<anonymous> (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:198:58)
ERR!     at Request.emit (events.js:88:20)
ERR!     at ClientRequest.<anonymous> (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:195:10)
ERR!     at ClientRequest.emit (events.js:67:17)
ERR!     at CleartextStream.<anonymous> (http.js:1134:11)
ERR!     at CleartextStream.emit (events.js:67:17)
ERR! You may report this log at:
ERR!     <http://github.com/isaacs/npm/issues>
ERR! or email it to:
ERR!     <npm-@googlegroups.com>
ERR! 
ERR! System Linux 2.6.18-194.el5
ERR! command "node" "/opt/node0610/bin/npm" "install" "request"
ERR! cwd /home/applmgr
ERR! node -v v0.6.10
ERR! npm -v 1.1.0-3
ERR! message failed to fetch from registry: request
verbose exit [ 1, true ] 
```

# android - 如何在所有移动浏览器上正确显示网页

> ID：11708257
> 
> 赞同：2
> 
> 时间：2012-07-29T09:48:02.403
> 
> 标签：android, html, mobile, browser

我分享了这个截图，向你展示它是如何在所有安卓浏览器上显示的：

![浏览器比较](../Images/1842d2b7feba235d76d3a60f4d9f85ba.png)

我用过`<meta name="viewport" content="width=device-width, initial-scale=0.3">`，但它似乎只适用于安卓默认浏览器。

我整理了一个[测试链接](http://www.pausapizza.it/test/step1_indirizzo-incompleto.html)

正确的视图应该像 Android 默认浏览器一样，在垂直或水平模式下调整 100% 的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T01:17:10.430

解决此问题的一种方法是将视口设置为文档的宽度。每个浏览器和设备都有不同的可显示区域或默认像素宽度。将视口更改为以下内容：

```
<!-- When viewing your css and live widths I got 944 wrapper width,
update if incorrect -->
<meta name="viewport" content="width=944" /> 
```

让它显示相同的唯一其他方法是使用移动文档类型而不是 html5。但这可能会破坏某些功能。

```
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd"> 
```

# php - 要求将 css/js 文件写入 PHP 以减少 HTTP 请求数

> ID：11708260
> 
> 赞同：0
> 
> 时间：2012-07-29T09:48:17.117
> 
> 标签：php, javascript, css, performance, import

我一直在考虑一种方法，通过减少下载文件的数量来减少加载页面时完成的 HTTP 请求的数量，但仍然保留服务器的单独文件。

这个想法是：

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">@import url("../CSS/main.css.php") screen;</style>
        <script type="text/javascript" src="../JS/main.js.php"></script>
    </head>
    <body>
    </body>
</html> 
```

在服务器端：

```
CSS/ foler :
- main.css.php
- main.css
- some_css1.css
- some_css2.css

JS/ folder :
- main.js.php
- main.js
- some_js1.js
- some_js2.js

main.css.php :
<?php
require('main.css');
require('some_css1.css');
require('some_css2.css');
?>

main.js.php :
<?php
require('main.js');
require('some_js1.js');
require('some_js2.js');
?> 
```

这种导入文件的方式会改善页面下载时间吗？服务器要求文件需要很长时间吗？下载时间的增加（如果有的话）是否大于服务器进行的额外计算导致的时间损失？为什么我应该或不应该这样做的任何理由？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:57:42.743

您可能通过减少 HTTP 请求获得的任何收益很容易被 PHP 脚本默认不发送缓存友好的标头（最后修改等）这一事实所抵消，因此用户最终将为他们查看的每个页面下载这些文件您的网站。您也可以修改 PHP 脚本来处理标头，但确实有更好的方法可以做到这一点。

相反，我会考虑在部署时合并文件的一次性工作。另请查看 gzip 压缩文件（如果您还没有），并为静态文件发送过期标头，这会完全删除后续页面请求中的 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:58:53.853

减少 HTTP 请求有很大帮助。

一些浏览器甚至限制了可以同时发出的 HTTP 请求的数量。

您还可以通过压缩**css**和**js**文件进行更多优化。

* * *

**CSS：** [CSS 压缩器](http://www.csscompressor.com/)

**JS：** [闭包编译器](http://closure-compiler.appspot.com/home) [YUI 压缩器](http://refresh-sf.com/yui/)

# ruby-on-rails - 部署后使用 capistrano 创建目录

> ID：11708264
> 
> 赞同：0
> 
> 时间：2012-07-29T09:49:00.003
> 
> 标签：ruby-on-rails, linux, bash, capistrano

我有带有这段代码的 deploy.rb 文件：

```
after :deploy do
  run "if [ -d #{rails_root}/tmp/pids ]; then mkdir #{rails_root}/tmp/pids && chmod 0777 #{rails_root}/tmp/pids; fi"
end 
```

有问题，可以看@终端截图： ![在此处输入图像描述](../Images/a4e8bbe204256d9a381a7da7690523e3.png)

同样的麻烦是与日志目录，但它只是从 git repo 克隆（通过 capistrano）。当我手动克隆项目时 - 日志目录运行良好。 ![在此处输入图像描述](../Images/d28bce06e8536488d0d05488fe97bed7.png)

两个问题：

1.  什么是 pids/log “目录”，如果它不是文件或目录或其他东西？
2.  我该如何解决这个麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:10:33.747

几个建议：

`man test`节目

```
-d file       True if file exists and is a directory. 
```

所以你可能是说如果 [ ！-d xxx/tmp/pids];

为了更容易试用，只需在临时目录中运行 shell 命令：

```
if [ ! -d xxx/tmp/pids ]; then mkdir xxx/tmp/pids && chmod 0777 xxx/tmp/pids; fi 
```

如果路径更远的目录不存在，则 mkdir 失败 - 使用 mkdir -p

```
if [ ! -d xxx/tmp/pids ]; then mkdir -p xxx/tmp/pids && chmod 0777 xxx/tmp/pids; fi 
```

那应该做你想要的。

（屏幕截图很难破译。如果您想获得有关文件类型的更多信息，请使用`ls -l`此处的文本输出而不是主要显示您的背景图像的屏幕截图...）

# mysql - Magento - 将 magento 从 1.6.2 更新到 1.7.0.2

> ID：11708274
> 
> 赞同：6
> 
> 时间：2012-07-29T09:50:12.667
> 
> 标签：mysql, magento

嗨，当我将我的 magento 1.6.2 更新到 1.7.0.2 时，文件更新工作正常......（我都在我的测试服务器上尝试这个）

我，当尝试通过 diff 文件或 magento 连接（更新 mage_all_latest）进行更新时得到相同的错误

但是当我第一次在网上商店登录时，它正在尝试更新 mysql 表。

但是我在错误之后得到错误。

这里是错误列表：

```
a:5:{i:0;s:237:"Error in file: "/var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/SalesRule/sql/salesrule_setup/upgrade-1.6.0.2-1.6.0.3.php" - SQLSTATE[42S01]: Base table or view already exists: 1050 Table 'salesrule_website' already exists";i:1;s:1122:"
#0 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/Resource/Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...') 
```

和同样的：

*   目录产品实体组价格
*   salesrule_customer_group
*   report_viewed_product_aggregated_daily
*   report_viewed_product_aggregated_monthly
*   report_viewed_product_aggregated_jearly
*   oauth_consumer

为了解决这个问题，我删除了这些键。（虽然这看起来不对）

但是我无法删除最后一个键。我得到 #1217 - 无法删除或更新父行：外键约束失败

谁能告诉我我做错了什么...

**更新 01-08-2012**

我使用magento的reapir工具修复了数据库。之后我通过将 mage_all_latest 更新到 1.7.0.2 来更新 magento。

一切正常，除了最后我得到：“缓存和会话清理期间的异常”，但安装过程中没有其他错误。

然后我回到管理员我得到一个白屏。等了一会儿后，我清除了 var/cache 和 apc。

现在我收到这条消息：

```
a:5:{i:0;s:255:"Error in file: "/var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Catalog/sql/catalog_setup/upgrade-1.6.0.0.9-1.6.0.0.10.php" - SQLSTATE[42S01]: Base table or view already exists: 1050 Table 'catalog_product_entity_group_price' already exists";i:1;s:1132:"
#0 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/Resource/Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/Resource/Setup.php(437): Mage_Core_Model_Resource_Setup->_modifyResourceDb('upgrade', '1.6.0.0.8', '1.6.0.0.14')
#2 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/Resource/Setup.php(320): Mage_Core_Model_Resource_Setup->_upgradeResourceDb('1.6.0.0.8', '1.6.0.0.14')
#3 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/Resource/Setup.php(235): Mage_Core_Model_Resource_Setup->applyUpdates()
#4 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/App.php(417): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/code/core/Mage/Core/Model/App.php(343): Mage_Core_Model_App->_initModules()
#6 /var/www/vhosts/liefstoereigenwijs.nl/site1/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#7 /var/www/vhosts/liefstoereigenwijs.nl/site1/index.php(87): Mage::run('', 'store')
#8 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

我确实注意到升级后很多文件的文件权限都发生了变化，比如 index.php 更改为 666。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:13:25.637

根据您的安装，它似乎没有`DROP TABLE IF EXISTS`前面的命令。这实际上是在帮助你。我将以 admin 或 root 身份登录到 db 服务器并执行以下命令：

```
create table catalog_product_entity_group_price_backup like catalog_product_entity_group_price;

insert into catalog_product_entity_group_price_backup select * from catalog_product_entity_group_price;

drop table catalog_product_entity_group_price; 
```

这应该将`catalog_product_entity_group_price`表中的所有内容创建到备份中，并将其删除，以便 Magento 可以完成升级。升级完成后，您可以比较两个表并将信息合并到 - 如果表在结构上没有不同，您甚至可以执行`insert into catalog_product_entity_group_price select * from catalog_product_entity_group_price_backup;`

干杯。

# hibernate - 休眠关系左连接

> ID：11708280
> 
> 赞同：0
> 
> 时间：2012-07-29T09:50:48.333
> 
> 标签：hibernate, hql

我有 3 个实体：

```
class A {
   @ManyToOne
   B b1;

   @ManyToOne
   B b2;
   ...
}

class B {
...
}

class C {
   @ManyToOne
   B b;
} 
```

我想在 HQL 中加入“A”类“b2”字段和“C”类“b”字段。所以我喜欢的hql：

```
SELECT a FROM A as a INNER JOIN a.b1 LEFT JOIN C as c on a.b2=c.b 
```

但是在这种情况下我不能使用左连接，因为 A 类和 C 类没有连接。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:12:19.530

Afaik，如果实体没有关系，则无法在 HQL 中执行外连接。（据我所知，直到 Hibernate 3.x。：P）

考虑在这种情况下编写 SQL

# html - 自动将子 Div 拉伸到父级并使用 % vs px 边距/填充

> ID：11708281
> 
> 赞同：0
> 
> 时间：2012-07-29T09:51:27.210
> 
> 标签：html, css

我似乎无法让子 div 伸展到父级，我不太确定是否需要在 #fullpage-content 上指定 % 宽度，即使 #middle 设置为 76%？好像忘记了。。

**[这是一个](http://www.inside-guides.co.uk/brentwood/restaurants-pubs-and-bars/gastropubs/the-greyhound-brentwood-487.html)页面链接，当单击按钮时，它们各自的容器不适合容器。

这是主要的CSS：

```
#fullpage-content {clear:both;margin-top:1.5em;padding:10px 25px 30px;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;border:px solid #e6e4e3;box-shadow:inset 0px 1px 4px #e0e0e0;background: -webkit-gradient(linear, left top, left bottom, from(#f3f1f1), to(#fff));}

.Advert .tab {box-shadow:inset 0px 1px 4px #cac7c6;background:#fff;padding:5px 18px 15px;margin:0 0 8px 0;clear:left;float:left;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;}

#contact {float:right;clear:right;width:220px;margin:15px 0 0 35px;}

.aboutus ul {list-style-image:url(/Assets/Images/SiteStructure/Advert-Template/bullet.gif);color:#4b4b4b;line-height:normal;padding-left:30px;}
.aboutus li  {padding:0 0 10px 5px;}
.abullets1, .abullets2 {float:left;width:30%;}
.bullets1, .bullets2  {width:33%;padding-left:20px;} 
```

我还想知道是否需要添加 position:relative 到任何容器 div 并指定流体 % 边距/填充以使其不会中断？试图让它正常工作......

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:02:32.883

将元素的宽度设置为 100% 将使其与父元素的宽度相同。根据您给出的内容，我无法完全说出您的 CSS 中的内容，但我会拼凑出一个小提琴来向您展示。

[**小提琴**](http://jsfiddle.net/WgGfF/)

但是是的，如果它是 div 或块级元素，则不需要如上所述

# java - 弹簧拦截

> ID：11708284
> 
> 赞同：1
> 
> 时间：2012-07-29T09:51:42.987
> 
> 标签：java, spring, rest, spring-mvc

首先，我是 Spring 新手，这是我第一次尝试使用 Spring 编写基于 REST 的应用程序。

我计划在请求参数和响应中都使用 Json。这给我带来了两个问题。

1.  有没有办法`produces="application/json"`为我的所有 mvc 控制器响应全局设置为默认值。

2.  如果有人发送请求并期望得到其他格式的结果`application/json`，我想返回一条错误消息。我想这是拦截器的责任，但了解如何设置检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:28:33.550

它实际上更简单。您只需从控制器返回 Java 对象，Spring 将根据`Accept`标头确定要使用的格式：

```
@ResponseBody
public MyPojo noView(@RequestBody request) {
  return new MyPojo();
} 
```

请求也是如此——Spring MVC 将尽最大努力将请求体转换为`request`对象。一旦配置好（例如，您需要`jackson*.jar`在 CLASSPATH 上处理 JSON），它就可以工作了。

此外，由于您免费获得 XML，因此将端点限制为 JSON 是没有意义的。如果用户请求其他格式，Spring 将为您发送适当的错误消息（*错误请求*？）

# 也可以看看

*   [Spring MappingJacksonJsonView，如何告诉使用它而不是 JSP 视图？](https://stackoverflow.com/questions/6794974)
*   [JAXB 类：REST 的重用](https://stackoverflow.com/questions/11632668)
*   [不在 RESTful 应用程序中解析视图](https://stackoverflow.com/questions/8399531)
*   [仅从 Spring MVC 3 控制器返回字符串消息](https://stackoverflow.com/questions/7672858)
*   [@ResponseBody 在 Java 6 中不生成 XML](https://stackoverflow.com/questions/7881735)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:22:40.530

虽然没有办法`produces`全局设置，而且正如 Tomasz 所说，将内容协商留给 spring 通常更容易，但将功能实现为拦截器也很容易。

基本上，您需要在任何没有`Accept`标头`application/json`作为值的请求上返回 415 状态代码。

所以首先实现拦截器：

```
public class WrongAcceptHeaderInterceptor extends HandlerInterceptorAdapter {

    public boolean preHandle(
            HttpServletRequest request,
            HttpServletResponse response,
            Object handler) throws Exception {
        if (!"application/json".equals(request.getHeader("Accept"))) {
            //you can change or omit the message 
            response.sendError(SC_UNSUPPORTED_MEDIA_TYPE, "Your error message"); 
            // return false to skip further processing
            return false;
        }
    }
} 
```

然后在您的上下文中注册它：

```
<mvc:interceptors>
    <bean class="foo.bar.baz.WrongAcceptHeaderInterceptor" />
</mvc:interceptors> 
```

# asp.net-mvc - 对象引用未设置为 MVC3 中的对象实例

> ID：11708286
> 
> 赞同：1
> 
> 时间：2012-07-29T09:51:48.690
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

下面是我的视图，其中包含一个下拉列表。

```
@model CommerceSuite.Web.Models.RelocateStock.RelocateStockModel

@Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.products)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model=>model.ProductId,Model.products,"Select Product")<br />
        @Html.ValidationMessageFor(model => model.ProductId)
    </div> 
```

这是我的模型课。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.ComponentModel.DataAnnotations;
using CommerceSuite.Web.Models.LocationDetail;
using CommerceSuite.Web.Models.Product;

namespace CommerceSuite.Web.Models.RelocateStock
{
public class RelocateStockModel
{
    public RelocateStockModel()
    {
        products = new List<SelectListItem>();
        Fromlocations = new List<SelectListItem>();
        Tolocations = new List<SelectListItem>();
        product = new ProductModel();
        locationDetail = new LocationDetailModel();
    }

    [HiddenInput(DisplayValue = false)]
    public long ProductStockId { get; set; }

    public long ProductId { get; set; }

    [Display(Name = "Product Id")]
    [Required]
    public IList<SelectListItem> products { get; set; }

    public long LocationFromId { get; set; }

    [Display(Name = "Location From")]
    [Required]
    public IList<SelectListItem> Fromlocations { get; set; }

    public long LocationToId { get; set; }

    [Display(Name = "Location To")]
    [Required]
    public IList<SelectListItem> Tolocations { get; set; }

    [Display(Name="Quantity Shifted")]
    public long Quantity { get; set; }

    public LocationDetailModel locationDetail { get; set; }
    public ProductModel product { get; set; }

}
} 
```

这是我的控制器。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using CommerceSuite.Services;
using CommerceSuite.Web.Models.Product;
using CommerceSuite.Data.Models;
using CommerceSuite.Web.Models.RelocateStock;

namespace CommerceSuite.Web.Controllers
{

public class RelocateStockController : BaseCsController
{
    private readonly IProductService _product;
    private readonly ILocationDetailService _locationDetail;
    private readonly IProductStockService _productStock;

    public RelocateStockController(IProductService product, ILocationDetailService locationDetail, IProductStockService productStock)
    {
        this._productStock = productStock;
        this._product = product;
        this._locationDetail = locationDetail;
    }
    //
    // GET: /RelocateStock/

    private List<SelectListItem> PopulateProductId()
    {
        var productCollection = new SelectList(_product.GetAllProduct(), "ProductId", "Name").ToList();
        return productCollection;
    }

    private List<SelectListItem> PopulateLocation()
    {
        var locationCollection = new SelectList(_locationDetail.GetAllLocationDetail(), "LocationId", "Name").ToList();
        return locationCollection;
    }

    public ActionResult Index()
    {
        return PartialView("_RelocateStockView");
    }

    [HttpGet]
    public ActionResult StockRelocate()
    {
        var model = new RelocateStockModel();
        model.products = PopulateProductId();
        model.Fromlocations = PopulateLocation();
        model.Tolocations = PopulateLocation();
        return PartialView("_RelocateStockView");
    }

    [HttpPost]
    public ActionResult StockRelocate(RelocateStockModel model)
    {
        CommerceSuiteWMDBContext context = new CommerceSuiteWMDBContext();

        var productStockId = (from ProductStock in context.ProductStocks
                             where (ProductStock.ProductId == model.ProductId) && (ProductStock.LocationId == model.LocationFromId)
                             select ProductStock.ProductStockId).SingleOrDefault();

        var proStocksId = (from ProductStock in context.ProductStocks
                        where (ProductStock.ProductId == model.ProductId) && (ProductStock.LocationId == model.LocationToId)
                        select ProductStock.ProductStockId).SingleOrDefault();

        var productStock = _productStock.GetProductStockById(productStockId);

        var ProStock = new ProductStock();
        ProStock.ProductId = model.ProductId;
        var qty = model.Quantity;
        ProStock.LocationId = model.LocationFromId;
        ProStock.PackageId = 10000;
        ProStock.QuantityOnHand = ProStock.QuantityOnHand - qty;
        _productStock.UpdateProductStock(ProStock);
        SuccessNotification("Edited Successfully");
        return RedirectToAction("Index");
    }
}

} 
```

当我尝试运行我的代码时，我的视图中出现错误`@Html.DropDownListFor`......它说：

> 你调用的对象是空的。

这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T21:12:05.883

你不显示你的控制器，所以我想，你不发送你的模型来查看。尝试在您的控制器中使用此操作方法：

```
public ActionResult Index() 
{ 
    return View(new RelocateStockModel()); 
} 
```

更新：您需要此操作方法：

```
public ActionResult StockRelocate()
{
    var model = new RelocateStockModel();
    model.products = PopulateProductId();
    model.Fromlocations = PopulateLocation();
    model.Tolocations = PopulateLocation();
    return PartialView("_RelocateStockView", model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:05:30.653

这意味着有些东西是空的。在视图的该部分放置一个断点，然后将鼠标悬停在每个对象上以找出什么是空的。

此外，很难判断您使用的是 lambda 对象还是 Model 对象，因为您使用小写字母调用了您的 Lamba 变量“model”。

# java - 如何获取从插件（如灯箱）加载的元素的属性

> ID：11708288
> 
> 赞同：1
> 
> 时间：2012-07-29T09:52:01.063
> 
> 标签：java, selenium, lightbox

我正在尝试通过单击 href 来获取加载的图像的属性。我看到当我单击链接时，它会在主体顶部加载一个包含所有元素的 div。

所以我尝试的是：

```
js.executeScript("showModal(1,2,'"+nv+"',0);");
WebElement im =(new WebDriverWait(d, 10))
.until(new ExpectedCondition<WebElement>(){
@Override
   public WebElement apply(WebDriver d) {
      return d.findElement(By.id("imgView"));
   }});

System.out.println(im.findElement(By.tagName("img")).getAttribute("src")); 
```

但我检索：

```
Exception in thread "main" org.openqa.selenium.TimeoutException: Timed out after 10 seconds waiting for mm.Main$2@741827d1
Build info: version: '2.21.0', revision: '16552', time: '2012-04-11 19:08:38'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.8', java.version: '1.6.0_33'
Driver info: driver.version: unknown
    at org.openqa.selenium.support.ui.FluentWait.timeoutException(FluentWait.java:252)
    at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:221)
    at mm.Main.main(Main.java:85)
Caused by: org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"id","selector":"imgView"}
Command duration or timeout: 43 milliseconds 
```

该函数`showModal`让灯箱发生并加载其中的图像。

我该如何解决？有人能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:04:07.097

尝试查看您的堆栈跟踪：

引起：org.openqa.selenium.NoSuchElementException：无法定位元素：{“method”：“id”，“selector”：“imgView”}

Selenium 执行您的代码很好，只是在 html 中找不到带有 id=imgView 的元素。通过 id 查找元素通常比纯 xpath 或 css 定位器快得多，但我有过由于某种原因它们中断的经验，然后我必须使用 xpath 或 css。

尝试通过 css 定位器查找您的元素：我显然看不到您的 html 源代码，但如果您不熟悉编程 css 定位器，请尝试以下操作：[http ://sauceio.com/index.php/2010/01/selenium -totw-css-selectors-in-selenium-demystified/](http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/)

如果 css 不起作用，则使用 xpath ......虽然社区通常不推荐这样做，但有时我在运行测试时别无选择。

这可以让您详细了解每种定位器的优缺点[http://marakana.com/bookshelf/selenium_tutorial/locators.html](http://marakana.com/bookshelf/selenium_tutorial/locators.html)以及一些有用的示例。

# cassandra - 如何配置 cassandra 以侦听真实 IP 地址而不是 0.0.0.0 上的 jmx 端口？

> ID：11708290
> 
> 赞同：7
> 
> 时间：2012-07-29T09:52:43.087
> 
> 标签：cassandra

我想让 cassandra 在外部 ip 上 litsen 到 jmx，而不是默认使用的 0.0.0.0。我已经在 cassandra-env 中添加了标志，但它仍然在 0.0.0.0 接口上启动

```
JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.host=172.16.40.60" 
```

我还应该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T06:28:24.303

添加这个：

`JVM_OPTS="$JVM_OPTS -Djava.rmi.server.hostname=172.16.40.60"`

此行来自`cassandra-env.sh`in `apache/cassandra`，请参见此处：[cassandra-env.sh#L204](https://github.com/apache/cassandra/blob/6ab4bd7a1a357a2709d6958f6c153270c3a4f8fa/conf/cassandra-env.sh#L204)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:41:09.350

目前，您无法在 cassandra 中配置 jmx 以仅侦听单个接口。这是因为通常在 Java 应用程序中很难做到这一点。如果您出于安全原因尝试这样做，那么解决方案通常是阻止除 localhost 之外的所有接口的 jmx 端口，然后使用隧道从本地节点访问 jmx。

有关将此功能添加到 cassandra 的讨论，请参见：

[https://issues.apache.org/jira/browse/CASSANDRA-2967](https://issues.apache.org/jira/browse/CASSANDRA-2967)

和一个潜在的解决方法：

[https://blogs.oracle.com/jmxetc/entry/jmx_connecting_through_firewalls_using](https://blogs.oracle.com/jmxetc/entry/jmx_connecting_through_firewalls_using)

# sourceforge - 如何使用交互式 shell 在 Sourceforge 中安全地移动文件

> ID：11708291
> 
> 赞同：2
> 
> 时间：2012-07-29T09:52:44.603
> 
> 标签：sourceforge

我正在尝试使用交互式 shell 整理我的项目在 Sourceforge 上的发布文件，而[Sourceforge wiki](https://sourceforge.net/p/forge/documentation/Release%20Files%20for%20Download/)根本没有帮助。

我的项目文件的当前结构类似于：

```
home
 \-frs
    \-project
         |-f
         | \-fo
         |    \-fooproject
         |          \- (contents same as fooproject below!)
         \-fooproject
               |-folder1
               |    |-v1.0
               |        \-file1.0.zip
               |    |-v2.0
               |        \-file2.0.zip
               \-folder2
                    |-v3.0
                    |   \-file3.0.zip
                    |-v4.0
                    |   \-file4.0.zip 
```

我想做一些重命名/移动（只是文件夹 - 而不是文件），所以它看起来像这样：

```
home
 \-frs
    \-project
         |-f
         | \-fo
         |    \-fooproject
         |          \- (contents same as fooproject below!)
         \-fooproject
               |-1.0
               |   \-file1.0.zip
               |-2.0
               |   \-file2.0.zip
               |-3.0
               |   \-file3.0.zip
               |-4.0
                   \-file4.0.zip 
```

我尝试这样做（使用`mv`命令）并且文件夹在 SF 网站上正确显示，但文件丢失（并且下载最新文件链接已损坏）。所以我恢复了我的更改，现在它恢复正常了。

我错过了什么吗？我该如何重命名和移动这些文件夹？我对重复的 fooproject 文件夹有点困惑（我看不到任何符号链接） - 我对`home/frs/project/fooproject`目录进行了更改。

我还担心会丢失下载历史记录——我在某个地方读到了基于文件名的内容，所以只要我不重命名任何文件就可以了——对吗？

**更新：**

所以我又试了一次，看起来只需要一分钟，然后文件就会出现（这很好），并且最新的文件链接确实更新了（也很好），但是下载统计信息重置为零（不好！）和更改与镜像不同步（不确定需要多长时间）。因此，下载统计信息似乎基于完整路径，重命名任何文件夹都会重置其中任何文件的计数:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:31:01.130

本质上，您可以使用交互式 shell 移动文件，但是：

*   重命名任何文件/文件夹将重置该文件/文件夹的下载统计信息（您可以恢复更改并且统计信息仍然存在）

*   文件移动需要一段时间才能反映在 Sourceforge 上（至少等待 30 秒）

我联系了 Sourceforge 支持并收到了以下回复（希望他们更新他们的 wiki 以使这一点更清楚）。

```
Download stats are associated with the path and filename. So if you
move/rename a file the download stats for that particular file won't be
attached to the file anymore. That said, the counts will still apply to
the aggregate stats though (ie., total downloads per project).

Other than that, moving files/folders around should work as expected after
a short delay for items to sync (on the mirrors as you suggest, etc.)

As for the folders appearing empty, I'm not sure what happened there, if
(given the stats caveat), you still want to do this, give this another
try, and if the issue persists, please leave at least one folder in this
state and let us know so we can review.

Regards,
Chris Tsai, !SourceForge.net Support 
```

# java - android项目中的J2ME类

> ID：11708292
> 
> 赞同：0
> 
> 时间：2012-07-29T09:52:45.847
> 
> 标签：java, android, multithreading, sockets, code-reuse

我将端口扫描器类复制到了我的 android 项目中，而没有更改源代码中的任何内容。Eclipse 没有抱怨代码，但我的代码似乎在 android 中无法正常工作。这是我的整个端口扫描仪代码。

```
import java.net.InetSocketAddress;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Collection;
import java.util.LinkedList;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

public class PortScanner {

    private final String ip;
    private final int sPort, ePort, timeout, poolSize;
    private ArrayList<Integer> openPorts = new ArrayList();
    private final ExecutorService es;
    private Collection<Future<?>> futures = new LinkedList<>();

    public PortScanner(String ip, int sPort, int ePort, int timeout, int poolSize) {
        this.ip = ip;
        this.sPort = sPort;
        this.ePort = ePort;
        this.timeout = timeout;
        this.poolSize = poolSize;
        es = Executors.newFixedThreadPool(this.poolSize);

    }

    public ArrayList<Integer> getPorts() {
        return openPorts;
    }

    public void runScanner() {

        for (int startPort = sPort; startPort <= ePort; startPort++) {
            futures.add(es.submit(new Check(ip, startPort, timeout)));
        }

        es.shutdown();

    }

    private class Check implements Runnable { //  BEGININ OF INNER CLASS

        private String ip;
        private int port, timeout;

        private Check(String ip, int port, int timeout) {
            this.ip = ip;
            this.port = port;
            this.timeout = timeout;
        }

        @Override
        public void run() {

            try {
                Socket socket = new Socket();
                socket.connect(new InetSocketAddress(ip, port), timeout);
                socket.close();
                openPorts.add(port);
            } catch (Exception ex) {
            }
        }
    }                                       // END OF INNER CLASS
} 
```

我以几种不同的方式测试了我的代码，并且它确定唯一不能正常工作的是内部类运行方法，因为当我手动将一些端口添加到数组列表时它们会打印，但是当我 lat 我的扫描仪添加它们时它总是返回空的。相同的端口扫描代码在桌面上完美运行。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:02:55.717

不确定这是否是您遇到的问题，但是您正在从多个线程向 ArrayList 添加东西，这不是线程安全的，没有任何同步。这将导致不稳定的行为。

此外，您不会显示如何以及何时显示此列表的内容。调用代码无法知道扫描何时结束，因此如果您在`runScanner()`调用后立即请求列表，则很有可能尚未完成任何扫描任务执行。顺便说一句，如果您从不使用此列表，为什么要将期货添加到期货列表中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:06:44.820

你检查过异常吗？如果在将套接字添加到 openPorts 之前抛出异常，您将得到一个空数组列表。而且当异常捕获时您没有打印异常堆栈-当我忘记在异常-catch中打印错误日志时，我也遇到了类似的问题。

```
 try {
            Socket socket = new Socket();
            socket.connect(new InetSocketAddress(ip, port), timeout);
            socket.close();
            openPorts.add(port);
        } catch (Exception ex) {
            //It's better to do something at least print an error log
            ex.printStackTrace();
        } 
```

# scala - 如何在 Option[String] 中设置字符串？

> ID：11708298
> 
> 赞同：55
> 
> 时间：2012-07-29T09:54:14.367
> 
> 标签：scala

当我试图在 Option[String] 类型的字段中影响 String 类型的值时，我收到以下错误：

```
type mismatch; found : String required: Option[String] 
```

如何影响`myValue:String`字段中的值`myField:Option[String]`？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-29T11:17:26.560

您也可以只使用`Option(myValue)`将 null 转换为`None`和非 null 转换为`Some`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-29T10:01:19.217

您可以`Option`像这样包装任何对象：

```
val opt = Some("foo") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-29T10:02:28.283

您可以将对象包装在 Some 类中

```
val myField = Some(myValue) 
```

或者，如果您没有任何东西，请通过

```
None 
```

它称为选项模式

[http://www.codecommit.com/blog/scala/the-option-pattern](http://www.codecommit.com/blog/scala/the-option-pattern)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-20T11:05:19.373

如果要将空字符串转换为 None 更通用的解决方案是：`Option(str).filter(_.nonEmpty)`

# java - logback-smtpAppender 有没有办法从应用程序的主题中添加一些信息？

> ID：11708306
> 
> 赞同：3
> 
> 时间：2012-07-29T09:56:17.330
> 
> 标签：java, logback, appender, smtpappender

我正在尝试使用带有一些附加信息的 logback 邮寄错误日志。例如，当发生错误时，我想添加登录应用程序的用户标签，最好在主题中。我知道如果存在登录用户，我可以捕获所有错误并将用户标签添加到错误消息中，但是有更好的方法吗？现在我的 logback 看起来像这样：

```
<appender name="EMAIL" class="ch.qos.logback.classic.net.SMTPAppender">
            <SMTPHost>${smtpHost}</SMTPHost>
            <Username>${smtpUser}</Username>
            <Password>${smtpPass}</Password>
            <To>${mail}</To>
            <From>${mailFrom}</From>
            <Subject>SYSTEM ERROR: %logger{20} - %m</Subject>
            <layout class="ch.qos.logback.classic.PatternLayout">
                <Pattern>%date %logger{35} - %message%n</Pattern>
            </layout>

 </appender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:23:25.670

首先，实施 MDC 解决方案以在您的应用程序中跟踪用户，请参阅：[在 Web 应用程序中记录用户活动](https://stackoverflow.com/questions/6115858)。完成此操作后（您可以在许多其他地方从中受益），只需将自定义键添加到您的主题：

```
<Subject>SYSTEM ERROR: %logger{20} - %X{user} - %m</Subject> 
```

证明可以工作。

# css - 如何在我的网站上自动调整谷歌地图的大小？

> ID：11708308
> 
> 赞同：0
> 
> 时间：2012-07-29T09:57:53.093
> 
> 标签：css, html, height

我想在网页上放置一个谷歌地图，并在`div`其后有几个文本框：

```
 <div id="map_area">
      <div id="map_canvas"></div>
    </div>
    <div id="date_range">
      <input type="text" id="start_datepicker" />
      <input type="text" id="end_datepicker" />
    </div> 
```

我希望文本输入具有自动高度，并且 map_area/map_canvas 占据所有其余部分。`height`我需要在 map_canvas 上设置什么样式。到目前为止，只有 px 中的百分比或高度有效，但是发送 div 要么太大要么太小。

是否有设置可以让第二个 div 为自动高度并使地图的高度为总减秒 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:03:55.363

您需要将 html 和 body 标签设置为 height:100%。

然后将 map_area 设置为 ay height:90% 并将 date_range 设置为 10%s。

然后将 map_canvas 设置为高度 100%。

这样，map_area 和 date_range 将占据 100% 的可用屏幕高度，而 map_canvas 将占据 map_area 的全部高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:29:13.087

最后，我使用`display: table`了 body 和`display: table-row`div 元素。虽然我想要放置的元素位于地图的动态图块后面，但它的效果非常好。

最后，我只是`div`按照谷歌建议的“自定义控件”制作了一个并将其放在地图上。更容易，看起来不错。

# report - 生成阿拉伯语报告 pdf 时内容已更改

> ID：11708314
> 
> 赞同：1
> 
> 时间：2012-07-29T09:59:06.817
> 
> 标签：report, openerp, rml

我在**openERP** **6.0**版中用**阿拉伯文本做了一个****rml**报告，我遇到了一个小问题。当我从**SXW生成****rml**时，阿拉伯文本是正确的，但是当我生成 PDF 时，阿拉伯文本是向后的。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:11:39.543

最好用英文创建一份报告，然后将翻译工作留给 OpenERP 翻译引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:49:47.027

出现这个问题是因为 python 没有内置的[unicode 双向](http://www.unicode.org/reports/tr9/)算法。阿拉伯文本，与任何其他双向语言（希伯来语、波斯语等）一样，必须通过双向算法重新格式化，然后才能将其导出到便携式文本渲染系统，如 PDF、视频播放器字幕渲染引擎、3D 设计软件......

openerp 有一个钩子可以解决这个问题：http: [//github.com/barsi/openerp-rtl](http://github.com/barsi/openerp-rtl)

它是使用这个线程的想法构建的：[pyfribidi for windows or any other bidi algorithm](https://stackoverflow.com/questions/6137119/pyfribidi-for-windows-or-any-other-bidi-algorithm/)******

# jquery - 隐藏 jQuery 模态框内容

> ID：11708315
> 
> 赞同：0
> 
> 时间：2012-07-29T09:59:12.447
> 
> 标签：jquery, html, popup, modal-dialog

我们有以下代码，每三天在加载我们的网站时弹出一次带有 cookie 的代码。它使用 Reveal 模式弹出窗口。

```
<div id="myModal" class="reveal-modal">
<p>Text here</p>
<a class="close-reveal-modal">&#215;</a>
</div> 
```

该代码仅在页面加载时显示，因为它应该在 iPad 版 Chrome 中除外。内容不是弹出窗口，而是显示在页面上，就好像它是标准对象一样。我把它放在页面的底部，以尽可能地避开。我尝试像这样包装上面的代码：

```
<div style="display: none">
<div id="myModal" class="reveal-modal">
<p>Text here</p>
<a class="close-reveal-modal">&#215;</a>
</div>
</div> 
```

...但这不仅隐藏了内容，还使弹出窗口不起作用，即内容被隐藏，因此弹出窗口似乎没有任何可显示的内容。

它甚至在 iPhone 版本的 Chrome 上也能正常工作，只是在 iPad 版本上不行。也许我不应该出汗。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:02:25.380

您不能在弹出代码中设置`display: none`然后控制`myModal`该属性吗？`display`

# sparql - 我可以使用 DBpedia 来引用维基百科上一个人的第一个/给定/教名吗？

> ID：11708316
> 
> 赞同：1
> 
> 时间：2012-07-29T09:59:25.243
> 
> 标签：sparql, wikipedia, semantic-web, ontology, dbpedia

我不相信维基百科的信息框会考虑到一个人姓名的各个部分，例如将姓氏与给定的（又名名字或基督教）姓名分开等。

但我也相信 DBPedia 除了直接从 Wikipedia 获得的内容外，还使用了其他几种本体。

所以我想知道是否可以进行 SPARQL 查询，该查询将仅根据他们的名字从维基百科中选择人。

例如我可以查询`All knights of the British empire whose first name is "Tim"`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:22:28.177

这是一个类似于您想要的查询：

```
SELECT * 
    WHERE 
      {
         ?person rdf:type yago:BritishKnights  . 
         ?person foaf:givenName ?name.
         FILTER regex(?name, "Walter", "i")
      }  
LIMIT 100 
```

它选择了名为“沃尔特”的英国骑士。它适用于[DBPedia sparql 端点](http://dbpedia.org/sparql)。我认为这是一个不错的起点。

您会发现以下资源很有用：

*   [British Knights](http://dbpedia.org/page/Category%3aBritish_knights) - 我的示例查询中使用的概念
*   [按职业划分的骑士](http://live.dbpedia.org/page/Category%3aKnights_by_occupation)- 在这里您可以找到更多资源的链接，而不仅仅是 BritishKnights。例如，上面的查询不会返回 Musicians 和 Actors，而是可以在不同的类别中找到它们。

*   [骑士](http://live.dbpedia.org/page/Category%3aKnights)- 更笼统地说，在这里您可以找到描述来自不同国家的骑士等资源的超链接。

*   [先生](http://live.dbpedia.org/page/Sir)——“先生”的概念
*   [Friend Of A Friend](http://xmlns.com/foaf/spec/) - 用于描述人和他们的关系的本体。我在示例中使用了它的`givenName`属性
*   [vCard RDF 本体](http://www.w3.org/TR/vcard-rdf/)- 另一个具有名称属性的本体
*   SPARQL 过滤器[教程](http://jena.apache.org/tutorials/sparql_filters.html)

编辑：也可以找到 Tim Berners-Lee。英国的荣誉制度似乎一点也不简单。祝您搜索顺利。此查询考虑了 T. Berners-Lee 所获得的骑士勋章。

```
SELECT * 
WHERE 
  {
     ?person dcterms:subject category:Knights_Commander_of_the_Order_of_the_British_Empire . 
     ?person foaf:givenName ?name.
     FILTER regex(?name, "Tim", "i")
  }  
LIMIT 100 
```

这完全是了解正确的数据集的问题。

编辑：

如果您使用适当的 RDF 文字，也可以避免使用 a `FILTER`，例如：

```
SELECT ?person
WHERE 
  {
     ?person rdf:type yago:BritishKnights  . 
     ?person foaf:givenName "Walter"@en .
  } 
```

更多信息可以在[w3c 规范中找到](http://www.w3.org/TR/sparql11-query/#matchingRDFLiterals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-06T01:46:11.953

我知道这个问题现在已经三年了，但我刚刚找到它，并认为根据 wikidata 现在存在的内容提供解决方案可能会很有趣。这个链接到 Wikipedia 的新语义数据库有一个 Given name 属性，它允许这种类型的查询。

```
prefix wdt: <http://www.wikidata.org/prop/direct/>
prefix entity: <http://www.wikidata.org/entity/>
SELECT ?item WHERE {
    ?tree0 (wdt:P527)* ?item .
    ?tree0 (wdt:P166|wdt:P361)* entity:Q14420 .
    ?item wdt:P735 entity:Q1369663 .
} 
```

您可以在[wikidata 查询端点](https://query.wikidata.org)上运行它，目前有 28 个，很想知道您使用 DBpedia 找到的数字是否有很大不同。

# javascript - 将 HTML5 音频对象拆分为多个音频对象

> ID：11708317
> 
> 赞同：1
> 
> 时间：2012-07-29T09:59:54.603
> 
> 标签：javascript, html, html5-audio

假设我已经将几个音频文件合并到一个音频文件中（因此只使用一个 HTTP 请求），我可以在客户端使用 JavaScript 将它们拆分为几个 HTML5 音频对象，如果可以，如何？另外，如果可能的话，这对多个请求有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:33:25.697

[https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video)提示您可以在“指定播放范围”下执行此操作。

指定 uri 时，您可以添加 #start,stop 以指定剪辑的开始结束时间。

我还没有尝试过，所以我不知道这将如何影响缓冲（即这会导致您从一开始就试图避免的多个请求，还是只会请求一次然后缓冲源？）但它可能是值得的玩弄

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:20:22.680

到目前为止，这就是我发现的……HTML5 音频不是为此而构建的。Safari 也出现了许多其他问题（请参阅[此问题及其答案](https://stackoverflow.com/questions/9811429/html5-audio-tag-on-safari-has-a-delay?rq=1)）但是，Web Audio API 似乎可以解决问题。虽然尚未完全支持，但[github 上有 polyfills，](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)并且[对 API 的支持](http://www.html5audio.org/2012/06/ios-6-and-safari-6-to-support-the-web-audio-api.html)正在迅速成为现实。已经制作了使用此 API 的游戏（请参阅[Field Runners](http://www.html5rocks.com/en/tutorials/webaudio/fieldrunners/)）

我还找到了一些关于如何使用它的不错的教程——主要是在[creativejs](http://creativejs.com/resources/web-audio-api-getting-started/)和[html5rocks](http://www.html5rocks.com/en/tutorials/webaudio/intro/)。

最后，我发现[了一个很好](http://jsfiddle.net/thingsinjars/eLqU5/2/)的使用 API 的例子。（不过，示例中的声音非常安静。您可能需要调高音量才能听到它）

# c++ - 运行时错误：非法文件打开 (/dev/tty)

> ID：11708320
> 
> 赞同：0
> 
> 时间：2012-07-29T10:00:06.693
> 
> 标签：c++, memory-management, runtime

我最近在 USACO 在线培训计划注册，我目前正在处理问题 2。我已经完成了编码并且一切都正确编译。但是当我提交代码时，我不断收到以下错误：

*运行 1：执行错误：您的程序出现此运行时错误：打开了非法文件 (/dev/tty)。程序在出错前运行了 0.011 CPU 秒。它使用了 3348 KB 的内存。*

我试图寻找问题是徒劳的。但是，我认为这是一个内存管理问题，因为我使用了指针向量。在 USACO 常见问题解答中，他们说：

*运行我们的评分系统的 Linux 在内存访问方面比 Windows 更加挑剔。因此，Windows 上允许的无效数组索引和错误指针取消引用可能会导致您的程序在 Linux 下崩溃。或者，它们会破坏内部数据结构并给出最神秘的错误消息，例如“无法打开 /dev/[mumble]”。*

这是代码：

```
/*
ID: freebie1
PROG: gift1
LANG: C++
*/
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <fstream>
using namespace std;

class Person {
    public:
    Person():m_volatile(0) {}

    void setName(string name) { m_name = name; }
    string getName() { return m_name; }
    void setMoney(int money){ m_sMoney = money; }
    int getMoney() { return m_volatile; }
    void receive(int money) { m_volatile += money; }
    void giveGifts(vector<Person*> fTab){
        int splitMoney = m_sMoney/fTab.size();
        for(vector<Person*>::iterator it=fTab.begin();it!=fTab.end();it++) {
            (*it)->receive(splitMoney);
        }
        m_volatile-=splitMoney*fTab.size();
    }

    private:
    string m_name;
    int m_sMoney; // starting money
    int m_volatile;
}; 
```

.

```
class FindFriend {
    public:
    FindFriend(string query):m_query(query){}
    bool operator()(Person &individu){
        if(individu.getName()==m_query) { return true; }
        else { return false; }
    }
    private:
    string m_query;
};

vector<Person*> setFriends(vector<string> &namesTab,vector<Person> &personsTab){
    vector<Person*> tab;
    for(vector<string>::iterator it=namesTab.begin();it!=namesTab.end();it++) {
        FindFriend f(*it);
        vector<Person>::iterator trouve=find_if(personsTab.begin(),personsTab.end(),f);
        tab.push_back(&*trouve);
    }
    return tab;
}

int main() {
    ofstream fout("gift1.out");
    ifstream fin("gift1.in");

    if(fin) {
        int np(0);
        fin>>np; // Number of persons

        // Each one is assigned a name...
        vector<Person> personsTab(np);
        for(vector<Person>::iterator it=personsTab.begin();it!=personsTab.end();it++){
            string namePerson;
            fin>>namePerson;
            it->setName(namePerson);
        }
        // ...money and the friends we'll give the money to
        while(!fin.eof()){
            string name;
            int money(0),nFriends(0);
            fin>>name;
            FindFriend g(name);
            vector<Person>::iterator trouve=find_if(personsTab.begin(),personsTab.end(),g);
            fin>>money>>nFriends;
            trouve->setMoney(money); // Somme de depart
            // Amis
            if(nFriends!=0 || money!=0) {
                vector<string> friendsTab;
                for(int i(0);i<nFriends;i++) {
                    string chaine;
                    fin>>chaine;
                    friendsTab.push_back(chaine);
                }
                // We create a vector of pointers to his friends
                vector<Person*> pFriends(nFriends);
                pFriends=setFriends(friendsTab,personsTab);
                trouve->giveGifts(pFriends); // Each person share the money among his friends
            }
        }

        // We output the net loss/profit for each one
        for(vector<Person>::iterator it=personsTab.begin();it!=personsTab.end();it++) {
            string name=it->getName();
            int money=it->getMoney();
            fout<<name<<" "<<money<<endl;
        }
    }
    return 0;
} 
```

这是输入文件gift1.in

```
5
dave
laura
owen
vick
amr
dave
200 3
laura
owen
vick
owen
500 1
dave
amr
150 2
vick
owen
laura
0 2
amr
vick
vick
0 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:05:28.083

问题是您没有正确测试文件结尾。使用`fin.eof()`是错误的，因为`eof()`只有在您尝试读取并失败后才变为真，它并**不能**预测下一次读取是否会失败。难以置信有多少初学者会犯这个错误。

这是一个更好的方法

```
 string name;
   while(fin >> name){
        int money(0),nFriends(0);
        ...
   } 
```

你的错误的结果是你比你应该多循环一次。在最后一次循环中，循环`name`不包含有效值，并且您的调用`find_if`失败并且程序在不久之后崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:15:06.483

我在这里猜测，但是在网上查找该文件描述时，我发现 /dev/tty 是 UNIX 上用于将文本发送到进程的控制终端窗口的特殊文件（请参阅：[What is special about /dev/ tty？](https://stackoverflow.com/questions/8514735/what-is-special-about-dev-tty)）。

奇怪的是，提交机制是一项服务，并且没有用于输出文本的父终端窗口，因此肯定有一些东西试图输出到标准输出，从而导致了这个问题。

当它试图将错误发送到屏幕时，很可能在某个地方隐藏了一个错误。如果您在 Windows 机器上工作，我建议您获取 VMware 播放器（免费）并构建一个 Linux VM（下载免费发行版并将 VMware 播放器指向它应该非常容易），然后在该环境中编译和运行您的程序所以你可以看到它的行为。通过这种方式，您可以看到它试图告诉您的内容并从那里开始工作。

好机会。

PS：我有一台 Linux 机器，稍后会自己尝试，但你应该通过制作 Linux VM 来解决其他问题，因为你很可能会再次遇到这个问题。

在 Linux 上按原样运行程序，输出文件有：

```
dave 302
laura 66
owen -359
vick 141
amr -150 
```

它抛出了这个异常：

```
*** glibc detected *** ./test.out: free(): invalid pointer: 0x0000000001b43510 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7a6e6)[0x7f3dfaa846e6]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x6c)[0x7f3dfaa889cc]
/usr/lib/x86_64-linux-gnu/libstdc++.so.6(_ZNSsD1Ev+0x23)[0x7f3dfb0641e3]
./test.out[0x401ece]
./test.out[0x404808]
./test.out[0x40439d]
./test.out[0x403d40]
./test.out[0x403269]
./test.out[0x40249c]
./test.out[0x4019ae]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f3dfaa2b30d]
./test.out[0x401169]
... 
```

使用 gdb 逐行执行，异常发生在“personsTab”变量超出范围并被销毁时。

# java - 如何使用 java.util.Calendar 类在 jquery datepicker 上设置日期

> ID：11708327
> 
> 赞同：0
> 
> 时间：2012-07-29T10:01:19.580
> 
> 标签：java, jquery, jakarta-ee, struts2

我试图编辑用户个人资料。我有一个“出生日期”文本字段，为此我使用 jqueryui 日期选择器。在服务器端我有struts2。Struts2 在 java.util.Calendar 对象中返回日期。我希望找到一种可以使用此日历对象设置日期选择器默认日期的方法。

这可以使用 struts-jquery 插件来完成吗？

我试过这样

```
 $(function() {
        $("#txtDob").datepicker( "setDate" , <s:property value="#vendor.dateOfBirth" />);
        $( "#txtDob" ).datepicker({
            yearRange: '1930:-18',
            changeMonth: true,
            changeYear: true,
        });
    }); 
```

什么都没有发生，甚至日期选择器也不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:04:16.737

```
$("#yourinput").datepicker( "setDate" , "<% date_here %>" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T21:03:34.360

使用[Struts2 jQuery 插件](http://code.google.com/p/struts2-jquery/)，您可以使用 DatePickerTag 中的 value 属性来设置 DatePicker 的[值](http://code.google.com/p/struts2-jquery/wiki/DatePickerTag)。

```
<sj:datepicker value="%{vendor.dateOfBirth}" id="txtDob" name="dateOfBirth" label="Birthday" /> 
```

当使用纯 jQuery Ui 和 Struts2 时，您可以使用 Struts2 DateTag 来设置日期。

```
$("#txtDob").val($.datepicker.formatDate(params.dateFormat, new Date(<s:date name="%{vendor.dateOfBirth}" format="yyyy, MM, dd" />))); 
```

注意：您应该在通过 $(elem).datepicker("setDate", val) 设置日期之前初始化您的日期选择器

# c# - IoC - 单个接口的多种实现支持

> ID：11708329
> 
> 赞同：17
> 
> 时间：2012-07-29T10:01:24.833
> 
> 标签：c#, inversion-of-control, castle-windsor, ioc-container

我想知道为什么 .Net IoC 容器不容易支持单个接口的多个实现！可能是我错了，但据我所知，像 Ninject 这样的框架使用注释部分支持此功能（[如何？](https://stackoverflow.com/questions/11684022/annotation-based-di-with-producers/11684470#11684470)）。我不认为像 Windsor 或简单注入器这样的其他框架有一个简单的机制来支持这种情况。

许多框架不支持这一点有什么原因吗？AFAIK，使用接口的最重要原因之一是实现松散耦合。如果旨在改善松散耦合的框架不能流畅地支持单个接口的多个实现，我不明白为什么！

PS 当然我知道在运行时会有一个解决问题，容器会混淆选择哪个实现，但这是设计中必须考虑的事情，对吧？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T10:29:34.233

[Unity](http://unity.codeplex.com/)具有相同的功能

注册命名依赖

```
 var container = new UnityContainer();
    container.RegisterType<IConnector, Connector>("TestConnector"); 
```

按名称解决

```
 container.Resolve<IConnector>("TestConnector"); 
```

相同的方法

```
 [Dependency("TestConnector")]
    public IConnector Connector { get; set; } 
```

**温莎**也一样

```
class Program
{
    static void Main(string[] args)
    {
        var container = new WindsorContainer()
            .Register(Component.For<IConnector>().ImplementedBy<ConnectorA>().Named("ConnectorA"))
            .Register(Component.For<IConnector>().ImplementedBy<ConnectorB>().Named("ConnectorB"));

        var connectorA = container.Resolve<IConnector>("ConnectorA");
        Console.WriteLine("Connector type: {0}", connectorA.GetType());
        var connectorB = container.Resolve<IConnector>("ConnectorB");
        Console.WriteLine("Connector type: {0}", connectorB.GetType());
        Console.ReadKey();
    }
}

public interface IConnector
{
}

public class ConnectorA : IConnector
{

}

public class ConnectorB : IConnector
{

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-29T16:47:56.420

我建议看一下*约定优于配置*，尤其是*基于约定的依赖注入*和基于*上下文的*依赖注入。大多数 IoC（如果不是全部）都支持这两种方法。当多个实现绑定到一个接口时，您可以找到许多具有不同 IoC 库的有趣示例，以及它的用途。

例如[ninject](/questions/tagged/ninject "显示标记为“ninject”的问题")确实支持绑定一个接口的多个实现：依赖[于上下文或属性，通过名称，等等](https://github.com/ninject/ninject/wiki/Contextual-Binding)。

## 按上下文

以下代码片段绑定在实现上自动取决于目标类型：

```
Bind<IWarrior>().To<Samurai>().WhenInjectedInto(typeof(OnLandAttack));
Bind<IWarrior>().To<SpecialNinja>().WhenInjectedInto(typeof(AmphibiousAttack)); 
```

## 按名字

当您在 XML 或数据库中进行配置时非常有用。还要考虑[`InNamedScope`](https://github.com/ninject/ninject.extensions.namedscope)：

```
Bind<IWeapon>().To<Shuriken>().Named("Strong");
Bind<IWeapon>().To<Dagger>().Named("Weak"); 
```

## 按照[惯例](https://github.com/ninject/ninject.extensions.conventions/wiki/What-is-configuration-by-convention)

在项目的不同部分使用不同的依赖配置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T00:09:53.663

你的前提是错误的。

Windsor 非常乐意接受同一服务的多个实现的注册。除了 GSerjo 提到的命名组件解析支持之外，在 Windsor 中（默认情况下），第一个注册的实现将获胜，但您可以`IsDefault()`在注册替代实现时使用方法覆盖它。有关详细信息，请参阅[http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx 。](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx)

如果您希望对来自多个实现的选择进行更多控制，您可以创建一个 IHandlerSelector 实现来执行此操作。请参阅[http://stw.castleproject.org/Windsor.Handler-Selectors.ashx](http://stw.castleproject.org/Windsor.Handler-Selectors.ashx)了解更多详情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T10:35:46.063

我的容器 Griffin.Container 支持它。

```
registrar.RegisterConcrete<OneImplementation>();
registrar.RegisterConcrete<AnotherImplementation>(); 
```

并获取：

```
var services = container.Resolve<ITheService>(); 
```

但是，您无法获得一种特定的实现方式。这是一个设计决定。如果必须获得特定的实现，最好在容器中注册工厂。在最佳实践部分阅读更多[信息。](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)

Griffin.Container 可以在 github 上找到：[https ://github.com/jgauffin/griffin.container](https://github.com/jgauffin/griffin.container)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T16:56:17.313

你的问题有点含糊，因为你没有提供一个具体的例子来说明你什么时候需要这个。在大多数情况下，您的应用程序或设计存在问题，或者您没有遵循 DI 最佳实践。

所有容器都允许您使用相同的接口注册多个依赖项作为`IEnumerable<ThatInterface>`，即使它们没有对多个实例的深度支持。然而，将服务列表注入其他服务是一种设计味道，最好将此列表隐藏在 Composite 后面。这隐藏了抽象背后有多个实现的事实，并允许您通过仅更改应用程序中的单个位置来轻松更改使用这些多个实现的方式。我不相信任何 IoC 框架都支持为您生成复合材料，因为没有一种默认方式来处理包装的实现。您必须自己编写此 Composite。然而，由于编写这样的组合非常非常简单，这证明了在框架中没有这样的功能是合理的。

如果你想有多个实现，但总是需要返回一个，基于一些配置，总有办法做到这一点。大多数容器允许您在 XML 配置文件中配置这些依赖项。但是即使容器不包含这样的特性，手动从配置文件中读取这个值并在容器中注册正确的类型也很容易。

如果您有一个用于生产的某个接口的实现和另一个用于单元测试目的的实现，您应该只在容器中注册生产实现。您的单元测试应该清除任何 DI 容器，并且您应该手动创建一个被测类，并在其构造函数中注入虚假依赖项，只需`new`将类型向上添加即可。使用 DI 容器会污染测试并使测试复杂化。要实现这一点，您需要围绕构造函数注入模式设计这种类型。不要在被测服务内调用容器（或容器上的任何其他外观）来检索依赖项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-29T10:11:22.597

StructureMap 提供以下功能：

```
For<IMyInterface>().Add<MyInterfaceImpl1>().Named("MyInterfaceImpl1");
For<IUsingInterface>().Add<UsingInterfaceImpl>().Ctor<IMyInterface>().Is(i => i.GetInstance<IMyInterface>("MyInterfaceImpl1")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-16T21:17:28.770

如果你想在特定条件下访问实现，你可以使用 Dictionary。

> UC_Login：用户必须根据身份验证模式（通过数据库或活动目录）验证他们的凭据，每种身份验证模式都有不同的业务逻辑。

我的代码：我有一个名为 IAuthService.cs 的接口 我有两个名为 DatabaseAuthService.cs 和 ActiveDirectoryAuthService.cs 的类，它们都具有依赖于同一接口的相同 IsValidCredential（用户用户）方法。

```
public interface IAuthService
{
  Task<bool> IsValidCredentialAsync(User user);
}

public class DatabaseAuthService : IAuthService
{
  private readonly IDatabaseAuthRepository _databaseAuthRepository;
  // User IServiceProvider for access to any other interfaces
  // using Microsoft.Extensions.DependencyInjection; using System;
  public DatabaseAuthService(IServiceProvider serviceProvider)
  => _databaseAuthRepository = serviceProvider.GetService<IDatabaseAuthRepository>();

  public async Task<bool> IsValidCredentialAsync(User user)
  {
    // return await _databaseAuthRepository.something...
  }
}

public class LdapAuthService : IAuthService
{
  public LdapAuthService()
  {
  }
  public async Task<bool> IsValidCredentialAsync(User user)
  {
    // something...
  }
} 
```

实现条件：我使用 AuthenticationAppService 类和 LoginAsync (LoginDto dto) 方法。

```
public class AuthenticationAppService
{
  private readonly Dictionary<AuthenticationModeEnum, IAuthService> _authProviders =
      new Dictionary<AuthenticationModeEnum, IAuthService>();
  public AuthenticationAppService(IServiceProvider serviceProvider)
  {
    _authProviders.Add(AuthenticationModeEnum.Database, new DatabaseAuthService(serviceProvider));
    _authProviders.Add(AuthenticationModeEnum.ActiveDirectory, new LdapAuthService());
  }

  public Task<bool> LoginAsync(LoginDto dto)
  {
    var user = Mapper.Map<user, LoginDto>(dto);
    return await _authProviders[(AuthenticationModeEnum)dto.AuthMode].IsValidCredentialAsync(user);
  }
} 
```

也许不是主题，但希望它有所帮助。

# java - 在 NetBeans 中添加 CLASSPATH

> ID：11708330
> 
> 赞同：0
> 
> 时间：2012-07-29T10:01:46.330
> 
> 标签：java, netbeans, classpath

我需要在`NetBeans`. 我正在阅读**“Thinking in Java 4th Edition”**一书。

来自文档：

> “在项目窗口中，右键单击项目节点并选择属性。单击项目属性对话框左侧面板中的库。在右侧面板中添加库路径。”

我这样做了，但是当我写：*import static net.mindview.util.print.** 我看到下一个：*包 net 不存在*

帮助。为什么包不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-12T06:24:52.567

我最近在 Netbeans 中为 Java mysql-connector 添加了一个类路径。这可能会帮助像我一样一直在努力做到这一点的人

1.  已下载您计算机中的连接器，对于我来说，我是从[https://dev.mysql.com/downloads/connector/j/下载的](https://dev.mysql.com/downloads/connector/j/)

2.  在项目窗口中右键单击您的项目，如图所示 [右键单击图像](https://i.stack.imgur.com/EI6jM.png)

3.  在对话框窗口中单击库，然后单击添加 jar/文件夹。确保选中复选框（在类路径上构建项目）。

4.  在您的情况下选择您想要的连接器/ jar 文件。然后点击打开。
5.  它将附加在对话框中，如下所示。 [对话框的图像](https://i.stack.imgur.com/MbN0X.png)

点击确定

# .net - .NET 基本类型实现

> ID：11708331
> 
> 赞同：0
> 
> 时间：2012-07-29T10:01:49.330
> 
> 标签：.net, vb.net

我对 .NET 和 Java 中的面向对象编程有很好的理解。我了解 Java 和 .NET 中的所有内容都源自一个对象。

我的问题是关于原始类型的。我知道原始类型不是从 Object 派生的，而且我也知道它们有多宽，例如一个字节是 8 位，一个整数是 32 位。我也明白拳击是对象等价物。

我的问题是：如果原始类型不是对象，它们是如何实际实现的？我对编译器理论有一点了解，但可能需要更深入地研究它。

在我的 SCJP 书中它说：“如果排除原始类型，那么 Java 中的一切都是对象”。在我的 .NET 书中也有同样的说法。他们没有深入细节。

我在这个问题中谈到了 Java，因为我来自 Java 背景并且 Java 是面向对象的（如 .net）。但是，我正在寻找一个特定于 .NET 的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:58:09.010

在 Java 中，原始类型不是从 type 派生的`java.lang.Object`。因此，有额外的类（例如`java.lang.Integer`，对于`int`原始类型）包装原始类型，因此它们可以存储在引用变量中。

CLR 也知道原始类型，但它们被定义为结构。所有结构内部都派生自`System.ValueType`，而后者又继承自`System.Object`。C# 中的名称`int`,`double`等只是.NET 框架中的`System.Int32`,`System.Double`等结构类型的别名。CLR 中对这些类型进行了特殊处理，但与 Java 不同的是，它们是统一类型层次结构的一部分。

Java VM 和 CLR 在这方面有很大不同。在 Java 中，类型`int`和`java.lang.Integer`是完全独立的，除了编译器知道如何在它们之间进行转换。在 CLR 中，只有一种类型，`System.Int32`可以以装箱和未装箱形式出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T14:46:10.173

这取决于你戴的眼镜。如果你有“实现”眼镜，那么你会看到任何引用类型值都有一个对象头。这使得它们继承 System.Object。对象头有两个字段，同步块存储各种信息，如哈希码和调用 Monitor.Enter() 的线程 ID。重要的字段是第二个字段，方法表指针。标识对象类型。方法表包含类方法的地址，它总是以 Object 实现的方法 Equals、GetHashCode 和 ToString 开头。

戴着同样的眼镜，一个值类型的值没有*这个*对象头。它只占用存储值所需的空间量。一个字节用于 bool，两个字节用于 Char，四个字节用于 int，等等。这使得值类型非常有效。

您可以戴的第二副眼镜是“类型系统”眼镜。值类型值始终可以转换为对象。然后回来。这种转换称为*拳击转换*。返回称为拆箱。快点戴上实现眼镜，你会发现你确实得到了一个带有这两个字段的对象，方法表指针标识了值类型。方法表有额外的方法指针。与 IConvertible 类似，这是一个由值类型实现的接口。除了这两个字段之外，对象的其余部分由值类型值位占用。在装箱转换之前它仍然是一个简单值时具有的相同位。装箱的对象和所有引用类型的对象一样，存在于垃圾收集堆上。

在绝大多数情况下，C# 或 VB.NET 编译器完全自动应用装箱转换。您不必自己在代码中编写演员表。例如，您可以调用 ToString 或 IConvertible 方法之一，您将免费获得装箱转换。

这产生了值类型继承自 System.Object 的错觉。这是一个相当不错的错觉，任何戴“类型系统”眼镜的人都会坚持认为值类型绝对继承自 Object。如果您戴“实施”眼镜，那么您往往会担心拳击。它经过高度优化，但肯定不是免费的。进行转换会花费 cpu 周期，并且装箱的值类型值会占用更多空间并产生垃圾。泛型集合类型已完全取代旧的 System.Collection 类的原因之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:06:12.587

这是完全错误的。在 .NET 中，“原始”类型（= 值类型）实际上*是*从`System.Object`. 但是，它们仅在涉及类型系统时才这样做。它们的处理方式仍然不同于参考类型。

这只是通过编译器和运行时中的特殊处理来处理。最直接的实现是引用类型是通过指向堆分配存储的指针实现的，而值类型根本不是。但是，请注意，这严格来说是 Microsoft 的 CLR (.NET) 实现的一个实现细节。其他实现可能会以不同的方式处理这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T10:59:22.223

简短回答：原始类型派生自 System.Object，它的实现方式与 .net 中的任何其他类型一样。

长答案：然而，原始类型在 .NET 中被称为是因为支持它们的类被编译器识别为内置类型。此外，原始类型不是引用类型，它们是值类型（在 .net 中也称为**轻量类型**），因此它们不是在托管堆上分配，而是在线程堆栈上分配。

例如：

```
var a = new Int32(16);
var b = 16; 
```

两种声明都将生成相同的 IL 指令。编译器会将**b = 16**解释为**b = new Int32(16)**。编译器将对涉及内置轻量类型/基元的代码进行一些优化，例如：

```
int a = 1 + 2; 
```

将编译为：

```
int a = 3; 
```

当然还有其他不那么明显的优化，但我欠你一个很好的解释。

关键是类型和轻量级类型（原语所属）之间的区别。这是一篇讨论这两种类型之间差异的文章，是一个很好的起点：http: [//msdn.microsoft.com/en-us/magazine/cc301569.aspx](http://msdn.microsoft.com/en-us/magazine/cc301569.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T10:05:25.940

> 我知道原始类型不是从 Object 派生的

它们确实继承自对象。例如，参见[`System.Int32`](http://msdn.microsoft.com/en-us/library/system.int32.aspx)（这是 VB.NET 翻译`Integer`的内容）。

就像 Java 一样，在 .NET 中所有类型都继承自`Object`，包括原始类型。

您所看到的语言原始类型在编译期间被转换为继承自`Object`.

# php - file_get_contents() 是否使用缓存？

> ID：11708332
> 
> 赞同：1
> 
> 时间：2012-07-29T10:01:52.357
> 
> 标签：php, http, file-get-contents

如果我写：

```
 $mypage=file_get_contents("www.mywebsite.com/mypage.htm"); 
```

第一次运行脚本时，file_get_contents() 肯定会向 www.mywebsite.com 发出 HTTP 请求以获取 mypage.htm，并获得包含 mypage.htm 内容的响应。

但是每次我运行脚本时，file_get_contents() 会在 www.mywebsite.com 上获取真实文件吗？或者它在本地主机上有某种缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:12:16.763

它**没有**。但是，由于DNS 记录由服务器的操作系统缓存，因此会加快速度，因为**DNS 解析步骤在后续尝试中可能会更快（直到缓存条目过期）。**

# linux - PGP：没有足够的随机字节可用。请做一些其他的工作让操作系统有机会收集更多的熵

> ID：11708334
> 
> 赞同：70
> 
> 时间：2012-07-29T10:02:02.527
> 
> 标签：linux, random, gnupg, entropy

设置：具有 6 核和 3GB RAM 的虚拟机上的 Ubuntu 服务器。

当我试图生成这样的通`asymmetric key pair`孔时。我收到以下错误：`GPG``gpg --gen-key`

```
Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! 
```

我试着用谷歌搜索了一下。这就是我意识到的，我需要启动另一个终端并输入`cat /udev/random`--> 它随机生成一系列随机生成的值以增加熵。

我在这里看不到任何变化`watch cat /proc/sys/kernel/random/entropy_avail`

它仍然给我同样的错误

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-10-19T20:46:19.607

运行以下命令：

```
find / > /dev/null 
```

这帮助我快速完成了我的密钥生成。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-02-11T15:27:29.390

尝试安装`haveged`，这是一个守护进程，它可以帮助系统为您的密钥生成随机数。

`sudo aptitude install haveged`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-02-28T09:51:53.740

步骤 1 先在 shell 上运行，让它运行 ls / -R

第2步现在尝试生成将完成的密钥

有关更多信息，请关注 [http://alsdias.blogspot.jp/2012/11/gpg-not-enough-random-bytes-available.html](http://alsdias.blogspot.jp/2012/11/gpg-not-enough-random-bytes-available.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-10T09:22:42.640

我在观察`/proc/sys/kernel/random/entropy_avail`价值的同时尝试了不同的技巧。但是尝试对整个磁盘进行 MD5 散列确实给了我的系统**熵在类固醇上，**而无需安装额外的软件包。

`find /dev/disk/by-uuid/ -type l | xargs md5sum`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-11T16:23:04.240

尝试安装 rngd。如果您的 CPU 相当现代，它将内置一个硬件随机数生成器，并且 rngd 将使用它来生成足够的熵。

**当心**那些告诉你跑的人`rngd -r /dev/urandom`。虽然这会消除您的错误，但它是通过伪造熵来实现的，并导致密钥不安全。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-11T10:58:31.427

在新选项卡中移动鼠标 30 秒左右，然后尝试以下操作：

```
base64 /dev/urandom 
```

这将开始将随机代码打印到屏幕上。在几分钟内，将生成足够数量的伪随机数据来完成密钥生成。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-29T12:58:15.013

这就是我找到的解决方案

我必须做`gpg --gen-key --no-use-agent`

之后在另一个终端我开火了`cat /dev/random`

这对我来说幸运的是最后工作了:)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-08T18:28:45.473

尝试在命令行上运行（在另一个终端选项卡中） `$cat /proc/sys/kernel/random/entropy_avail` ，它返回小于 100-200，然后出现问题，安装 rng-tools `$sudo apt-get install rng-tools`

那应该已经解决了这个问题，检查上一个标签，你有钥匙

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-14T03:55:10.393

我做了几次 apt-get install libreoffice 和 apt-get remove libreoffice* 。那成功了。选择一些其他的大胖程序供自己使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-11T13:59:22.480

我尝试解决。我使用带有 gpg1 和 gpg2 的 Fedora 25 已安装为机器的标准。

**声明问题**。
如果您使用 Fedora 25 操作系统，我会在 otrust.tmp 看到 gpg 与 ownertrust 冲突（请删除旧的 trustdb.gpg）。并且必须创建新的 trustdb.gpg。

请在您的终端命令中执行此命令。（不必root模式）。您可以尝试使用以下命令重新创建 trustdb：

> cd ~/.gnupg
> 
> gpg2 --export-ownertrust > otrust.tmp
> rm trustdb.gpg
> gpg2 --import-ownertrust < otrust.tmp

那么你可以使用

> gpg --list-secret-keys --keyid-format LONG
> 然后导出为 asci 格式。
> gpg --armor --export“在这里输入你的secKEY”

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-27T17:37:57.770

```
 sudo apt-get install rng-tools to set it up. 
```

然后`sudo rngd -r /dev/urandom`在生成密钥之前运行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-06T20:02:34.793

在 gpg 消息的末尾，你会看到括号（剩余 125 字节）

gpg 需要一些你必须输入的随机字节。所以按 Ctrl-z 并输入一组随机的 x（括号中的数字）字符，不一定有意义，例如：dfkheuhasdkjvdaiugekjfhflsdfhuhggskdfjhsjdf

然后执行 2 或 3 次，GPG 会显示一个答案，告诉你它已完成密钥生成:)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-05T05:47:02.753

您可以安装守护程序来收集熵。该命令将安装两个这样的守护进程：

```
sudo apt-get install haveged rng-tools 
```

我个人更喜欢 haveged（因为创建它的人）而不是 rng-tools。但是，我更喜欢安装两者，因为它们完全不同。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-09-30T17:03:55.193

跑步`$ sudo rngd -r /dev/urandom`

然后运行`$ gpg --user-agent`

和`$ ps -ef | egrep rngd`（显示 rngd 的进程号，例如 9999）

然后`$ sudo kill 9999`

在我的 Ubuntu 13.04 系统上为我工作。

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2014-05-12T09:07:53.953

只需在 Ubuntu 下使用另一个随机生成器：

```
mv /dev/random /dev/chaos && ln -s /dev/urandom /dev/random 
```

并重试你的 gpg 命令

# jboss - JSR 303 验证消息未显示 (Jboss 7+primefaces 3.3)

> ID：11708337
> 
> 赞同：0
> 
> 时间：2012-07-29T10:02:27.067
> 
> 标签：jboss, primefaces, bean-validation

嗨，我有这个没有显示验证消息的表单。我相信我所做的一切都是正确的。

在 JPA 实体中

```
@NotEmpty(message="{not_empty}")
Private String studentNo; 
```

在部署战争时类内部的 ValidationMessages.properties 中，我有 Not_empty=Field is required

在 xhtml 中，我还配置了 faces-config 中指向验证消息的消息包。

我相信我已经完成了一切，但验证失败时仍然没有显示验证消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:25:36.117

在命令按钮中，我添加了 update="@Form" 。因此，当验证失败时，它会显示验证消息。傻我！

# html - 匹配未知的自定义数据属性？

> ID：11708344
> 
> 赞同：1
> 
> 时间：2012-07-29T10:03:24.817
> 
> 标签：html, css, css-selectors

有没有办法匹配具有未知自定义数据属性的元素？未知我的意思是一个元素可能看起来像这样：

```
<div data-unknown="foo"></div> 
```

或者

```
<td data-someOtherCustomDataAttribute="bar"></td> 
```

我想匹配所有具有 data-* 属性的元素。也就是说，*div*和*td*标签都应该匹配。我知道如何匹配值，但不知道属性本身。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:22:40.063

有一类特殊的选择器。它们被称为“[属性选择器](http://www.w3.org/TR/css3-selectors/#attribute-selectors)”在上[一个答案](https://stackoverflow.com/a/11709257/1144057)中提出了类似的解决方案，但它需要一个值，而我的 - 不需要:)

它应该是这样的：

```
[data-unknown]{
    color: red;
} 
```

基本上 - 你重复整个属性，无论是它`data-unknown`还是`data-anything_you_want`.

它的一个活生生的例子可以在这里看到：http: [//jsfiddle.net/skip405/2vhBj/](http://jsfiddle.net/skip405/2vhBj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:11:50.007

CSS 本身没有用于此目的的工具。

只有一种方法可以通过属性的存在来选择元素：`selector[attribute]`. 并且无法定义属性外观的某种模式（例如 regexp 或类似的东西），因此您只能设置属性名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:32:07.657

你可以这样做：

```
div[attribute=value]
{
    /*css here...*/
} 
```

选择器中没有空格非常重要。

尚未测试它是否适用于未知属性。应该这样做，因为 css 也可以设置 XML 样式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T15:44:00.217

如果您使用 HTML5 的 data- 属性，并且您的浏览器支持 HTML5 JavaScript 的`dataset`element 属性，则可以动态选择（我使用 jQuery 来缩短示例）：

```
$('.contains-data').each( function() {
    $(this).dataset().each( function (key, value) {
        if (value != '') { // put your "selector" criteria here
             alert(key + ': ' + value);
        }
    }
}); 
```

您可以在不使用 jQuery 的情况下完成相同的操作，只需多做一些工作即可最初选择所有具有“包含数据”类的页面元素。

这个策略确实需要使用 JavaScript，所以 YMMV。

有关详细信息，请参阅[HTML5 自定义数据属性 (data-*)：将数据属性与 JavaScript 一起使用](http://html5doctor.com/html5-custom-data-attributes/)。

# radeditor - Telerik RadEditor 无法正确显示

> ID：11708348
> 
> 赞同：0
> 
> 时间：2012-07-29T10:04:35.897
> 
> 标签：radeditor, telerik-editor

每当我将 RadEditor 放在页面上时，它都不会正确显示，而是以项目符号的形式显示在页面上。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:03:28.900

提供的信息确实不够，但尝试手动注册 RadEditor 的皮肤 css 文件 [http://www.telerik.com/support/kb/aspnet-ajax/editor/register-external-skin-vista-radeditor.aspx](http://www.telerik.com/support/kb/aspnet-ajax/editor/register-external-skin-vista-radeditor.aspx) 或通过CDN 皮肤服务器[http://www.telerik.com/help/aspnet-ajax/stylesheetmanager-cdn-support.html](http://www.telerik.com/help/aspnet-ajax/stylesheetmanager-cdn-support.html)

# android - 在 Windows 上手动安装 Android SDK 4.1 时，我应该在哪里提取 armeabi-v7a 存档？

> ID：11708350
> 
> 赞同：5
> 
> 时间：2012-07-29T10:04:44.873
> 
> 标签：android, windows, installation

我手动下载了所有 SDK zip 文件。

平台、平台工具、示例、文档和 USB 驱动程序正在工作，但我不知道将系统映像文件夹/文件放在哪里。

所以任何安装了 4.1 的人，你能给我提供文件路径或者可能是 android-sdk 文件夹的树命令的输出吗？

我相信默认位置是

```
C:\Users\<USERNAME>\AppData\Local\Android\android-sdk\ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T10:21:26.413

...\android-sdk\system-images\android-16\armeabi-v7a

# c# - Web 部件区域标题在 ASP.NET 中显示 Untitled[0]

> ID：11708365
> 
> 赞同：2
> 
> 时间：2012-07-29T10:06:12.213
> 
> 标签：c#, asp.net, web-applications, web-parts, webpartpage

我有一个面板放置在一个包含图表的 webpart 内。webpart 区域的标题是 Untitled[0],Untitled[1]....面板控件或 web 部件中没有标题标签。任何人都知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:43:25.160

试试这个：

```
 <asp:WebPartZone Height="100px" Width="75%" runat="server" 
                ID="productSummaryZone" HeaderText="Product summary">
                <ZoneTemplate>
                    <uc:ProductSummary title="Product summary title" runat="server" ID="productSummary" />
                </ZoneTemplate>
            </asp:WebPartZone> 
```

*   `HeaderText="Product summary"`. 此标题用于在您处于编辑、设计模式或连接模式时标识您的 Web 部件（这不是标题）

*   `<uc:ProductSummary title="Product summary title" runat="server" ID="productSummary" />`. 这代表 a`UserControl`在这种情况下，这是添加到的`ZoneTemplate`，如您所见，即使您没有声明具有该名称的属性，您也可以将 a 传递`title="..."`给您，然后使用该属性显示标题...有点棘手`UserControl``WebPart`

输出

![在此处输入图像描述](../Images/6fed0dbb97a64ea47da7e2a468bc95dc.png)

# android - android.R.attr.state_checked 的反义词是什么？

> ID：11708368
> 
> 赞同：5
> 
> 时间：2012-07-29T10:07:04.803
> 
> 标签：android, android-layout

我正在为按钮构建一个选择器，带有一个可绘制的状态列表，

```
 states.addState(new int[] {android.R.attr.state_checked},
                               checkedDrawable.getDrawable());

    states.addState(new int[] {},
                               unCheckDrawable.getDrawable()); 
```

我应该把什么放在第二个状态？没有 android.R.attr.state_unchecked

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T10:16:15.720

[这个问题](https://stackoverflow.com/questions/5092649/android-how-to-update-the-selectorstatelistdrawable-programmatically)可能会对你有所帮助。

它说，你应该使用你需要的状态的否定。所以在你的情况下应该是：

```
states.addState(new int[] {-android.R.attr.state_checked}, unCheckDrawable.getDrawable()); 
```

# ipad - 我如何在不通过 Apple Store 的情况下销售 iPad 应用程序

> ID：11708373
> 
> 赞同：0
> 
> 时间：2012-07-29T10:07:29.733
> 
> 标签：ipad, app-store

我正在构建一个 iPad 应用程序，以出售给特定客户 [商店] 以处理他们的活动。我不想从 App Store 传递，而是安装在他们的 iPad 上。是否可以？如果是，必须申请什么样的许可证/证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:15:00.207

如果您在自己的组织之外分发 iPad 应用程序，则 iPad 需要越狱，或者应用程序必须通过 App Store。Apple 不提供任何其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:15:04.217

您需要查看[iOS 开发者企业计划。](https://developer.apple.com/programs/ios/enterprise/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T10:16:29.670

> 为了在 iOS 设备上开发和安装应用程序，开发者必须在 Apple 注册并加入 iOS 开发者计划。每个开发者的真实身份，无论是个人还是企业，都由 Apple 在颁发证书之前进行验证。该证书使开发人员能够签署应用程序并将其提交到 App Store 以供分发。因此，App Store 中的所有应用程序都是由可识别的个人或组织提交的，从而对恶意应用程序的创建起到威慑作用。Apple 还对它们进行了审查，以确保它们按描述运行并且不包含明显的错误或其他问题。除了已经讨论过的技术之外，这个管理过程让客户对他们购买的应用程序的质量充满信心。
> 
> 企业还可以编写内部应用程序以供其组织内部使用，并将其分发给员工。企业和组织可以使用 DUNS 编号申请 iOS 开发者企业计划 (iDEP)。Apple 在验证申请人的身份和资格后批准申请人。一旦组织成为 iDEP 的成员，它就可以注册以获取允许内部应用程序在其授权的设备上运行的配置文件。用户必须安装配置文件才能运行内部应用程序。这可确保只有组织的目标用户才能将应用程序加载到他们的 iOS 设备上。

来自苹果

# java - 具有更改日志和数据库同步的实体

> ID：11708374
> 
> 赞同：0
> 
> 时间：2012-07-29T10:07:58.520
> 
> 标签：java, jpa, locking, synchronisation

我正在寻找一个针对 java、jpa2、spring、hibernate 数据库应用程序的解决方案，它允许我基本上为实体做类似 SCM 的事情。我有一个托管在多个应用程序服务器上的数据库驱动的 Java 企业应用程序。这些应用程序服务器托管无状态 Web 应用程序（REST API 等），这些应用程序都基于相同的 java 代码并使用相同的数据库。此应用程序提供的一项服务是文件管理。用户（通过各种 api 客户端和前端应用程序）能够创建（上传）、删除、重命名、移动文件和文件夹。

现在一段时间以来，文件版本的要求不断涌现，我想最终解决这个问题。这是我在java实体方面提出的：

```
public class File {

    private String id;
    private ReadableInstant created;

    private List<FileVersion> versions;

}

public class FileVersion {

    private String name;
    private FileVersion parent;
    private List<FileVersion> children;
    private ReadableInstant modified;
    private FileOperation operation;

}

public enum FileOperation {

    CREATE,
    RENAME,
    UPDATE,
    DELETE

} 
```

我打算公开`File`而不是`FileVersion`直接通过授权。为此，我需要某种简单的方法来检索“头”版本（这将是版本集合中的最后一个条目）。基本上每个写操作都`File`需要`FileVersion`根据当时的“头”创建一个新的。鉴于多个应用程序服务器访问同一个数据库，我不确定是否有某种方法可以锁定相应的`File`实体（行级锁定？），以便我确定我的新文件版本基于正确的“头” ”。

我的另一个想法是让客户提供他的更改所基于的某种版本标识符。`FileVersion`如果在持久化此版本标识符时与给定应用程序的最新版本不匹配，`File`则应用程序将不得不拒绝更改...

我是朝着正确的方向前进还是我的方法被认为是失败的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:11:33.800

我会有一个只有“头”值的表（就像普通表一样）和第二个表，其中包含所有更改的日志。这也将允许您获得任何以前的版本。您可以创建触发器来更新日志表或在 Java 中进行。

# spring - spring Dispatcher Servlet 如何在没有任何 XML 配置的情况下创建默认 bean？

> ID：11708383
> 
> 赞同：1
> 
> 时间：2012-07-29T10:08:34.833
> 
> 标签：spring, servlets, javabeans, default, dispatcher

Spring Dispatcher Servlet 如何在没有任何预定义 XML 配置文件的情况下创建 Default beans。（我不是在谈论注释）。

如果我们不提供任何默认值：

1) 处理程序映射对象 2) 多部分解析器 3) 主题解析器等...在 XML 配置文件中，Spring 自动创建这些 bean。

当任何地方都没有明确声明这些 bean 时，Spring 如何创建这些 bean？一旦创建，这些默认 bean 在应用程序上下文中是否可用？我的意思是我们可以通过调用上下文对象上的 getBean() 方法来获取这些 bean 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:45:50.840

签出[`DispatcherServlet.initStrategies()`](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-webmvc/3.1.1.RELEASE/org/springframework/web/servlet/DispatcherServlet.java#DispatcherServlet.initStrategies%28org.springframework.context.ApplicationContext%29)：

```
protected void initStrategies(ApplicationContext context) {
    initMultipartResolver(context);
    initLocaleResolver(context);
    initThemeResolver(context);
    initHandlerMappings(context);
    initHandlerAdapters(context);
    initHandlerExceptionResolvers(context);
    initRequestToViewNameTranslator(context);
    initViewResolvers(context);
} 
```

您会注意到，它会`DispatcherServlet`尝试查找具有某些固定名称的现有 bean，并且如果未找到，则使用默认值或不使用任何名称。

> 1) 处理程序映射对象

如果没有配置其他解析器，则不使用解析器。

> 2) 多部分解析器

退房[`AnnotationDrivenBeanDefinitionParser.parse()`](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-webmvc/3.1.1.RELEASE/org/springframework/web/servlet/config/AnnotationDrivenBeanDefinitionParser.java#AnnotationDrivenBeanDefinitionParser.parse%28org.w3c.dom.Element%2Corg.springframework.beans.factory.xml.ParserContext%29)- 相当复杂，请注意。

> 3) 主题解析器

`FixedThemeResolver`如果没有配置其他解析器，则使用。

Spring MVC 上下文启动的内部结构过于复杂是有原因的——你不应该把它们弄乱。只需提供要替换的回调或 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-10T21:31:36.493

当调用提到的“init”方法时，默认对象被添加到上下文中。例如，在 中`private void initHandlerMappings(ApplicationContext context)`，默认处理程序映射是通过调用`getDefaultStrategies(context, HandlerMapping.class)`. 在这里，会发生以下情况：

1.  A`String[]`使用默认类名填充`DispatcherServlet.properties`

2.  为每个创建一个`Class`实例。

3.  但要实际实例化默认对象，它调用以下方法，传入类实例：

    ```
     protected Object createDefaultStrategy(ApplicationContext context, Class<?> clazz) {
         return context.getAutowireCapableBeanFactory().createBean(clazz); 
    ```

    }

正是在这里，默认对象被完全初始化为 bean。

# android - 在视图中动态添加片段

> ID：11708386
> 
> 赞同：4
> 
> 时间：2012-07-29T10:09:17.473
> 
> 标签：android, android-layout, android-fragments

我已经开始了[如何使用以编程方式创建的内容视图将片段添加到活动中](https://stackoverflow.com/questions/5159982/how-do-i-add-a-fragment-to-an-activity-with-a-programmatically-created-content-v)

在 Activity 中创建和添加 Fragment。

但是当我尝试在动态视图中添加相同的片段时，它失败了。

你能解决它背后的问题吗？

```
public class MainActivity extends FragmentActivity {

    private static final int CONTENT_VIEW_ID = 10101010;
    private static final int CONTENT_VIEW_ID1 = 10101011;

    public FragmentManager fm = getSupportFragmentManager();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        View view = new View(this);

        FrameLayout frame = new FrameLayout(this);
        frame.setId(CONTENT_VIEW_ID);
        frame.addView(view,new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        view.setId(CONTENT_VIEW_ID1);
        setContentView(frame);
        if (savedInstanceState == null) {
            Fragment newFragment1 = new DebugExampleTwoFragment();
            FragmentTransaction ft = fm.beginTransaction(); 
            ft.add(CONTENT_VIEW_ID1, newFragment1);
            ft.commit();
        }

public static class DebugExampleTwoFragment extends Fragment {
        public static int count = 0;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = new View(getActivity());
            v.setBackgroundColor(Color.RED);
            return v;
        }
    } 
```

它失败了`ClassCastException`，没有显示确切的行号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:42:00.100

您可能会收到这样的消息：

> java.lang.ClassCastException: android.view.View 不能转换为 android.view.ViewGroup

那是因为片段可以插入`ViewGroup`或继承自`ViewGroup`. 您不能将片段插入`View`. 要使您的代码运行更改此行：

```
View view = new View(this); 
```

进入，例如，这个：

```
FrameLayout view = new FrameLayout(this);//FrameLayout inherits from ViewGroup 
```

# javascript - 使用 JavaScript 获取链接标签的内容 - 而不是 CSS

> ID：11708387
> 
> 赞同：6
> 
> 时间：2012-07-29T10:09:24.083
> 
> 标签：javascript, dom, link-tag

假设我有

```
<LINK rel="Index" href="index.html">
<LINK rel="Next"  href="Chapter3.html">
<LINK rel="Prev"  href="Chapter1.html"> 
```

（取自[W3C](https://en.wikipedia.org/wiki/World_Wide_Web_Consortium)网站示例）

这些可以通过 JavaScript DOM 访问吗？

我想知道我在 HTML 文档中是否有这样的链接标签，它们是否像主文档一样被读取并添加到 DOM 中，以及我是否也可以访问它们的 DOM。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-26T15:26:16.090

我有这个代码：

```
<script type="text/javascript">
var your_url = 'http://www.example.com';
</script>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" ></script>
<script type="text/javascript">
// jquery.xdomainajax.js  ------ from padolsey

jQuery.ajax = (function(_ajax){

    var protocol = location.protocol,
        hostname = location.hostname,
        exRegex = RegExp(protocol + '//' + hostname),
        YQL = 'http' + (/^https/.test(protocol)?'s':'') + '://query.yahooapis.com/v1/public/yql?callback=?',
        query = 'select * from html where url="{URL}" and xpath="*"';

    function isExternal(url) {
        return !exRegex.test(url) && /:\/\//.test(url);
    }

    return function(o) {

        var url = o.url;

        if ( /get/i.test(o.type) && !/json/i.test(o.dataType) && isExternal(url) ) {

            // Manipulate options so that JSONP-x request is made to YQL

            o.url = YQL;
            o.dataType = 'json';

            o.data = {
                q: query.replace(
                    '{URL}',
                    url + (o.data ?
                        (/\?/.test(url) ? '&' : '?') + jQuery.param(o.data)
                    : '')
                ),
                format: 'xml'
            };

            // Since it's a JSONP request
            // complete === success
            if (!o.success && o.complete) {
                o.success = o.complete;
                delete o.complete;
            }

            o.success = (function(_success){
                return function(data) {

                    if (_success) {
                        // Fake XHR callback.
                        _success.call(this, {
                            responseText: data.results[0]
                                // YQL screws with <script>s
                                // Get rid of them
                                .replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi, '')
                        }, 'success');
                    }

                };
            })(o.success);

        }

        return _ajax.apply(this, arguments);

    };

})(jQuery.ajax);

$.ajax({
    url: your_url,
    type: 'GET',
    success: function(res) {
        var text = res.responseText;
        // then you can manipulate your text as you wish
        alert(text);
    }
});

</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T10:17:04.230

试试这个 - [http://jsfiddle.net/TpTsJ/](http://jsfiddle.net/TpTsJ/)（前两个是 JSFiddle 链接 - 你的页面上不会有它们）：

```
var links = document.getElementsByTagName("link");
for ( var i = 0; i < links.length; i++ ) {
    alert( links[i].getAttribute("rel") + ' : ' + links[i].getAttribute("href") );
}​ 
```

# c - 将 void * 传递给函数不是好习惯吗？

> ID：11708390
> 
> 赞同：1
> 
> 时间：2012-07-29T10:09:48.713
> 
> 标签：c, pointers

在 C 中，将 a`void *`作为参数传递给`free`函数是不好的做法吗？如果不是，该函数如何知道从`void *`指向的位置开始释放多少内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T10:11:40.680

`free()`只需要内存块的起始地址；它的内容无关紧要。这就是为什么它实际上`void*`在它的签名中有 a （所以不管你传递什么样的指针，它总是会得到 a `void*`）。

> 该`free()`函数释放由 指向的内存空间`ptr`，该空间必须由先前调用或`malloc()`所返回。`calloc()``realloc()`

如您所见，您只能释放由这些函数之一分配的内存 - 它们在内部存储块的大小。

* * *

如果您好奇，甚至不需要将信息存储在单个位置的单独结构中；例如，默认`malloc`/的各种替换通常`free`会分配 N+M 字节的内存，其中 M 是元数据结构的大小。在该分配返回的地址，它们存储自己的元数据（例如分配的大小），然后返回 ptr+M 指向元数据之后的内存。

当释放该内存时，它可以简单地从地址中减去 M 以获得指向元数据的初始指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:11:45.457

free 不需要数据类型，`void *`可以正常工作。释放多少内存是内部管理的。重要的是您传递给`free`以前从兼容的分配函数获得的值：`malloc`它是朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T10:55:54.603

`free()`实现应该从传递的指针中知道要释放的堆单元有多大。指针必须从`malloc()`或`calloc()`获得`realloc()`。确切的方式可能因平台而异 - 为了可移植代码，不应假设任何技术细节。

`void*` is a good way to specify argument type, because then it can enjoy implicit downgrade conversion from any other pointer type.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-29T10:21:40.047

没有真正释放内存，它只是允许其他程序在这里也分配内存。顺便说一句，如果你想要正确的内存长度，你就有这个功能`strlen`。（不确定那个）

# android - 在没有完成（）的情况下重新加载 Android 中的活动

> ID：11708391
> 
> 赞同：2
> 
> 时间：2012-07-29T10:10:06.360
> 
> 标签：android, ios, android-layout, android-intent, android-activity

在 iOS 中，有一种方法可以重新加载 a`viewcontroller`而不会杀死它，例如

```
[self.view setNeedsDisplay]; 
```

例如，当您更改按钮标题时，它会自动重新加载。

Android中是否有类似的方法？

我找到了一些链接，例如[Reload activity in Android](https://stackoverflow.com/questions/3053761/reload-activity-in-android)，但它需要`finish()`它

```
startActivity(getIntent()); finish(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:16:57.163

因为`View`它是`invalidate()`或`postInvalidate()`。您不需要`Activity`手动重绘，并且在大多数情况下，您也不需要重绘视图（操作系统为您提供的所有这些东西）。

如果您的 Activity 中有某些内容`onCreate`或`onStart`方法，您需要为单个屏幕执行多次，那么最好重新编写代码。

# svn - Windows 服务器上的 XCode 源代码控制

> ID：11708393
> 
> 赞同：1
> 
> 时间：2012-07-29T10:10:27.107
> 
> 标签：svn, version-control, xcode4

如何将版本控制源控件安装到 windows 服务并将此控件连接到 XCode 4.x 以使多开发人员能够处理同一个项目（从 XCode 签入和签出）并将此版本托管在我自己的服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:21:53.550

您可以在 Windows 上使用[GIT 等版本控制系统。](http://msysgit.github.com/)

请参阅这篇文章：[带有 xcode-4 和 git 的版本控制系统](http://www.smartapps.co/2011/01/version-control-system-with-xcode-4-and-git/)

然后将主存储库设置为 Windows 服务器上的主存储库。

# javascript - 处理损坏的 JSON 的错误

> ID：11708396
> 
> 赞同：7
> 
> 时间：2012-07-29T10:10:59.190
> 
> 标签：javascript, jquery, json, exception

如果元素`#the-json`为空，则会导致此错误：

> 未捕获的 SyntaxError：输入意外结束

对于以下代码：

```
myJSON = JSON.parse($("#the-json").attr('value')); 
```

应该如何处理这个错误，这样它就不会停止整个脚本的工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T10:13:38.163

使用 try-catch 语句：

```
try {
  myJSON = JSON.parse($("#the-json").attr('value'));
} catch (e) {
  // handle error
} 
```

或者在做某事之前检查：

```
var myJSON = JSON.parse('{}'); // default value

if ($("#the-json").attr('value')) {
  myJSON = JSON.parse($("#the-json").attr('value'));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T10:15:32.150

而不是在错误发生时捕捉错误 -**首先防止错误发生！** 只需测试 value 属性，如果它为空 - 明确指定它是。然后你的 JSON 解析器不会抱怨——它只会创建一个空对象。

您可以简单地测试空内容并提供一个空对象 -

```
var data = $("#the-json").attr('value') == ''? '{}': $("#the-json").attr('value');
myJSON = JSON.parse(data);
if ($.isEmptyObject(myJSON)){
  // there was no value
} 
```

`{}`语法意味着一个空的 JavaScript 对象。

# php - PHP类中的奇怪错误对象

> ID：11708402
> 
> 赞同：0
> 
> 时间：2012-07-29T10:11:56.550
> 
> 标签：php, class, object, error-handling

我有一个奇怪的问题，无法进入课堂`$_POST`，很奇怪，这是问题和错误？类很简单，只是为了演示。

```
if(isset($_POST['name']))
{
$name=$_POST['name'];
$email=$_POST['email'];
$comment=$_POST['comment'];
$komentar = new comments($name,$email,$comment);
$komentar->provera();
} 
```

班级：

```
class comments 
{
public function __construct($name, $email, $comment)
{
$this->name=$name;
$this->email=$email;
$this->comment=$comment;
}
public static function provera()
{
$poruka=$this->comment; 
echo $poruka;
}
} 
```

我收到了这个错误

```
Fatal error: Using $this when not in object context in 
classes\comments.inc.php on line 12 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T10:13:51.913

您不能`$this`在静态方法中使用。除非您需要`provera()`静态调用，否则请`static`从其声明中删除关键字。

# php - PHP时间前函数返回所有日期的4小时

> ID：11708403
> 
> 赞同：1
> 
> 时间：2012-07-29T10:12:08.627
> 
> 标签：php, date, timestamp, timeago

我不知道为什么，但以下所有日期/时间在 4 小时前返回

```
function ago($timestamp){
        $difference = floor((time() - strtotime($timestamp))/86400);
        $periods = array("second", "minute", "hour", "day", "week", "month", "years", "decade");
        $lengths = array("60","60","24","7","4.35","12","10");
        for($j = 0; $difference >= $lengths[$j]; $j++)
            $difference /= $lengths[$j];
        $difference = round($difference);
        if($difference != 1)
            $periods[$j].= "s";
        $text = "$difference $periods[$j] ago";
        return $text;
    } 
```

我发送的日期是

```
 "replydate": "29/07/2012CDT04:54:27",
"replydate": "29/07/2012CDT00:20:10", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:21:57.127

函数`strtotime`不支持这种格式`'29/07/2012CDT00:20:10'`。使用这样的语法`'0000-00-00 00:00:00'`。而且没有必要`86400`。所有代码：

```
function ago($timestamp){
  $difference = time() - strtotime($timestamp);
  $periods = array('second', 'minute', 'hour', 'day', 'week', 'month', 'years', 'decade');
  $lengths = array('60', '60', '24', '7', '4.35', '12', '10');

  for($j = 0; $difference >= $lengths[$j]; $j++) $difference /= $lengths[$j];

  $difference = round($difference);
  if($difference != 1) $periods[$j] .= "s";

  return "$difference $periods[$j] ago";
}

echo ago('2012-7-29 17:20:28'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T03:57:51.487

与其编写自己的日期/时间函数，不如使用 PHP 的[DateTime 类](http://php.net/manual/en/class.datetime.php)等标准实现。正确计算时间有一些微妙之处，例如时区和夏令时。

```
<?php
    date_default_timezone_set('Australia/Melbourne');

    // Ideally this would use one of the predefined formats like ISO-8601
    //   www.php.net/manual/en/class.datetime.php#datetime.constants.iso8601 
    $replydate_string = "29/07/2012T04:54:27";

    // Parse custom date format similar to original question
    $replydate = DateTime::createFromFormat('d/m/Y\TH:i:s', $replydate_string);

    // Calculate DateInterval (www.php.net/manual/en/class.dateinterval.php)
    $diff = $replydate->diff(new DateTime());

    printf("About %d hour%s and %d minute%s ago\n",
        $diff->h, $diff->h == 1 ? '' : 's',
        $diff->i, $diff->i == 1 ? '' : 's'
    );
?> 
```

# mongodb - mongodb检索e文本的切片

> ID：11708407
> 
> 赞同：0
> 
> 时间：2012-07-29T10:13:25.487
> 
> 标签：mongodb

mongodb中是否有类似“$slice”的东西，它检索文本字段的切片，数组的插入？

我的意思是我们可以通过这种方式获得评论片段： db.posts.find({}, {comments:{$slice: 5}}) // 前 5 条评论

以某种方式获取描述片段，如下所示： db.posts.find({}, {description:{$slice: 100}}) // 前 100 个字符

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:10:36.703

MongoDB 的[$slice](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements)运算符仅适用于数组，不适用于文本字段。如果要修剪字符串，则必须在应用程序的显示代码中处理这一点（或者可能保存字段的“修剪”版本以供显示）。

请注意，如果您要截断评论或描述等文本，通常的做法是截断到最接近的整个单词（因此逻辑比简单的 # 个字符更复杂一些）。

例如：[如何将 PHP 中的字符串截断为最接近一定字符数的单词？](https://stackoverflow.com/questions/79960/how-to-truncate-a-string-in-php-to-the-word-closest-to-a-certain-number-of-chara).

# magento - 获取 magento 产品类别

> ID：11708411
> 
> 赞同：1
> 
> 时间：2012-07-29T10:13:55.137
> 
> 标签：magento

嗨，我是 magento 的新手，所以这对于大多数有经验的开发人员来说可能是显而易见的

我如何找到产品所在的所有类别。我需要使用集合吗？

我有一个产品模型，它正在使用 $product = Mage::getModel('catalog/product')->load() 并将产品 ID 作为参数提供给 load()

现在我需要产品所在的类别对象

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:19:01.257

您假设使用集合是正确的。幸运的是，产品模型为此提供了一个方便的方法：[getCategoryCollection()](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Catalog/Model/Product.php#L396)

您将使用如下：

```
$categoryCollection = $product->getCategoryCollection(); 
```

# javascript - 与 JavaScript 中 Python 的 chr() 对应

> ID：11708413
> 
> 赞同：3
> 
> 时间：2012-07-29T10:14:27.483
> 
> 标签：javascript, python, node.js, fromcharcode

JavaScript 方法在以下意义上`String.fromCharCode()`与 Python 的行为等效：`unichar()`

```
print unichr(213) # prints Õ on the console 
console.log(String.fromCharCode(213)); // prints Õ on the console as well 
```

但是，出于我的目的，我需要一个与 Python 函数等效的 JavaScript `chr()`。是否有这样的 JavaScript 函数或使`String.fromCharCode()`行为类似的方法`chr()`？

也就是说，我需要在 JavaScript 中模仿的东西

```
print chr(213) # prints � on the console 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:01:45.040

所以结果你只想在 node.js 中使用原始字节，[有一个模块可以做到](http://nodejs.org/api/buffer.html)。如果你是一个真正的巫师，你可以让这些东西单独使用 javascript 字符串，但它更难，效率也低得多。

```
var b = new Buffer(1);
b[0] = 213;

console.log(b.toString()); //�

var b = new Buffer(3);
b[0] = 0xE2;
b[1] = 0x98;
b[2] = 0x85;

console.log(b.toString()); //★ 
```

* * *

`print chr(213) # prints � on the console`

因此，这会打印一个原始字节 ( `0xD5`)，它以 UTF-8（很可能）解释，这不是有效的 UTF-8 字节序列，因此显示为替换字符 (�)。

UTF-8 的解释与此处无关，您很可能只需要原始字节。

要在 javascript 中创建原始字节，您可以使用`UInt8Array`.

```
var a = new Uint8Array(1);
a[0] = 213; 
```

您可以**选择**将原始字节解释为 utf-8：

```
console.log( utf8decode(a)); // "�"

//Not recommended for production use ;D
//Doesn't handle > BMP to keep the answer shorter
function utf8decode(uint8array) {
    var codePoints = [],
        i = 0,
        byte, codePoint, len = uint8array.length;
    for (i = 0; i < len; ++i) {
        byte = uint8array[i];

        if ((byte & 0xF8) === 0xF0 && len > i + 3) {

            codePoint = ((byte & 0x7) << 18) | ((uint8array[++i] & 0x3F) << 12) | ((uint8array[++i] & 0x3F) << 6) | (uint8array[++i] & 0x3F);
            if (!(0xFFFF < codePoint && codePoint <= 0x10FFFF)) {
                codePoints.push(0xFFFD, 0xFFFD, 0xFFFD, 0xFFFD);
            } else {
                codePoints.push(codePoint);
            }
        } else if ((byte & 0xF0) === 0xE0 && len > i + 2) {

            codePoint = ((byte & 0xF) << 12) | ((uint8array[++i] & 0x3F) << 6) | (uint8array[++i] & 0x3F);
            if (!(0x7FF < codePoint && codePoint <= 0xFFFF)) {
                codePoints.push(0xFFFD, 0xFFFD, 0xFFFD);
            } else {
                codePoints.push(codePoint);
            }
        } else if ((byte & 0xE0) === 0xC0  && len > i + 1) {

            codePoint = ((byte & 0x1F) << 6) | ((uint8array[++i] & 0x3F));
            if (!(0x7F < codePoint && codePoint <= 0x7FF)) {
                codePoints.push(0xFFFD, 0xFFFD);
            } else {
                codePoints.push(codePoint);
            }
        } else if ((byte & 0x80) === 0x00) {
            codePoints.push(byte & 0x7F);
        } else {
            codePoints.push(0xFFFD);
        }
    }
    return String.fromCharCode.apply(String, codePoints);
} 
```

您最有可能尝试做的事情与尝试将字节解释为 utf8 无关。

另一个例子：

```
//UTF-8 For the black star U+2605 ★:
var a = new Uint8Array(3);
a[0] = 0xE2;
a[1] = 0x98;
a[2] = 0x85;
utf8decode(a) === String.fromCharCode(0x2605) //True
utf8decode(a) // ★ 
```

在 python 2.7 (Ubuntu) 中：

```
print chr(0xE2) + chr(0x98) + chr(0x85)
#prints ★ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:49:29.710

如果你想为每个不在标准 ASCII 表中的数字设置这个“盒子里的问号”，这个小函数怎么样？

```
function chr(c) {
    return (c < 0 || c > 126) ? '�' : String.fromCharCode(c);
} 
```

# mysql - MySQL 从表 1 中检索最后一条记录并从表 2 中连接数据

> ID：11708414
> 
> 赞同：2
> 
> 时间：2012-07-29T10:14:42.947
> 
> 标签：mysql, group-by

我有两个表（下面的代码），想从表中检索表的**最后**一行和每个表的*（连接）*信息`trackers_data``GROUP BY tracker_id`*`tracker_id``Devices`*

 ***设备/表：**

```
 /*Table: devices*/
id  tracker_id  name        device_name
-----------------------------------
1   1242        Driver A    Benz
2   1255        Driver B    Volvo
3   1256        Driver C    BMW 
```

**Trackers_data/表：**

```
 /*Table: trackers_data*/
id  tracker_id  longitude   latitude
-------------------------------------
5       1255    53.25       11.52
6       1255    52.63       11.63
7       1242    52.23       13.11
8       1242    52.25       15.27
9       1242    54.63       13.86 
```

**示例/结果应如下所示：**

```
 /* Results */
id  tracker_id  lonitude    latitude    name        device_name
6   1255        52.63       11.63       Driver B    Volvo
9   1242        54.63       13.86       Driver C    BMW 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:21:08.890

您可以使用此解决方案：

```
SELECT b.*, c.name, c.device_name
FROM   (SELECT MAX(id) AS id FROM trackers_data GROUP BY tracker_id) a
JOIN   trackers_data b ON a.id = b.id
JOIN   devices c ON b.tracker_id = c.tracker_id 
```*

# jquery - jquery中crop\zoom工具的几何计算

> ID：11708418
> 
> 赞同：2
> 
> 时间：2012-07-29T10:15:04.190
> 
> 标签：jquery, html, math, geometry, crop

我正在用 jQuery 编写一个新的crop\zoom 工具，但我已经用简单的几何图形碰了壁。请看一下：

[http://jsfiddle.net/opherv/74Jep/33/](http://jsfiddle.net/opherv/74Jep/33/)

它的工作方式是这样的：要裁剪\缩放的图像位于“dragcontainer”（黄色背景）内，该“dragcontainer”（黄色背景）位于视口（黑色边框矩形）内。视口将具有“溢出：隐藏”，因此只会显示图像的一部分。

用户有两个控件 - 一个用于拖动图像以将其放置在视口内，另一个用于缩小原始图像。

它工作正常，但我在缩放时调整图像位置时遇到问题，因此放大\缩小看起来是正确的。

**我想要什么：** 缩放时，图像应该使用视口的中心作为注册点来改变比例，而不是“滑动”到两侧。

**更多信息：**

这是因为浏览器进行的缩放使用图像的左上角作为注册点。黄色的拖动容器已正确缩放，但它的大小不会线性变化的事实让我在尝试解决这个问题时感到困惑。我被迫依靠一个非常丑陋的黑客来检查图像是否离开了拖动容器，如果是，则将其返回到正确的位置，而不是正确地计算它。

如果有人可以在他的两美分中筹码，我会很高兴，并详细说明在缩放时计算拖动容器内图像的顶部\左侧位置的正确方法应该是什么，以便它“看起来正确”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T11:31:40.047

可能这个插件会帮助你，它似乎可以满足你的需求：[http ://www.tmatthew.net/jwindowcrop](http://www.tmatthew.net/jwindowcrop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:22:50.527

您可以在每次缩放之前和之后找到图像宽度的差异，然后根据放大或缩小将图像向左或向右移动一半的差异。

对于高度和顶部/底部也可以这样做。

希望这会有所帮助-可能有一种更简单的方法，这是我的第一个想法。如果还有什么突然想到我会回来的

# nsurlconnection - NSURLConnection 没有下载所有数据

> ID：11708422
> 
> 赞同：0
> 
> 时间：2012-07-29T10:16:12.893
> 
> 标签：nsurlconnection, nsdata, nsurlrequest, yahoo-finance

为什么当我运行这段代码时，下载的数据似乎已经从第一行中截取了一些信息？

```
NSURL *url = [NSURL URLWithString:@"http://ichart.finance.yahoo.com/table.csv?   s=GOOG&d=6&e=27&f=2012&g=d&a=6&b=25&c=2011&ignore=.csv"];
NSURLRequest *request = [[NSURLRequest alloc]initWithURL:url];
NSURLConnection *connection= [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start]; 
```

然后数据在这里排序：

```
NSString *strData = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];
strData = [strData stringByReplacingOccurrencesOfString:@"Date,Open,High,Low,Close,Volume,Adj Close" withString:@""];
NSArray* arrUncleanDataLine = [strData componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
NSMutableArray *arrCleanDataLine = [[NSMutableArray alloc]init];
NSString *temp = [[NSString alloc]init]; 
```

顶线被剪掉。为什么是这样？是因为 NSData 只能保存一定数量的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:25:35.170

因为您自己通过以下代码删除了第一行“Date,Open,High,Low,Close,Volume,Adj Close”：

```
strData = [strData stringByReplacingOccurrencesOfString:@"Date,Open,High,Low,Close,Volume,Adj Close" withString:@""]; 
```

所以只需评论这一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:07:12.400

我已经修好了。当我下载数据时，它没有附加旧数据并将其添加到新数据中。

# php - 优化数组中的字符串替换

> ID：11708426
> 
> 赞同：0
> 
> 时间：2012-07-29T10:16:40.820
> 
> 标签：php, string, optimization, loops

我有一个包含一组模板的表。这些模板有占位符，需要在运行时替换给定键值对数组。这是我进行替换的代码：

```
function replace_placeholders(&$input_values) {
    $result = execute_pdo_query("SELECT name,value FROM templates");
    foreach($result as $currow) {
        $varname = $currow[name];
        $varvalue = $currow['value'];
        foreach($input_values as $key => $value) {
            $key = '{'.strtolower($key).'}';
            $varvalue = str_replace($key,trim($value),$varvalue);
        }
        $input_values[$varname] = $varvalue;
    }
} 
```

问题是有大量的模板和许多键值对。所以，这个嵌套循环被执行了很多次，几乎占用了半秒。有没有办法优化这个替换？我已经搜索了优化，但大多数人说这`str_replace`是可以做到的最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:42:44.857

您没有向我们展示`$input_values`包含的内容，但我认为这是要替换的所有可能标签的全局列表。

在这种情况下，一个明显的弱点是你为每个模板循环这个。如果一个模板恰好只有一个标签，这是一种浪费。

我很想尝试对其进行更改，以便您仅对模板中提到的标签进行操作，而不是遍历每个模板的所有可能标签，通过`preg_replace_callback`. 我不能保证这会更快，但这将是我尝试的第一件事。

这是一个简化的示例：

```
$transformations = array(
    'name'     => 'John',
    'pronoun'  => 'you'
    'animal'   => 'dog'
    'building' => 'house'
    'food'     => 'chocolate'
    'friend'   => 'Kelvin'
    /* etc, potentially many more */
);
$template = "hello, {name}, how are {pronoun}?";

$transformed_template = preg_replace_callback('/\{(\w*)\}/', function($match) {
    global $transformations;
    if (isset($transformations[$match[1]]))
      return trim($transformations[$match[1]]);
}, $template); 
```

该模板只包含两个占位符，我们只对它们采取行动，而不是循环遍历`$transformations`.

（注意我使用匿名函数作为回调`preg_replace_callback()`。如果您使用的是 PHP < 5.3，则需要一个命名函数。）

# objective-c - 我将图像倒置但如何水平翻转

> ID：11708429
> 
> 赞同：7
> 
> 时间：2012-07-29T10:16:54.487
> 
> 标签：objective-c, rotation, uiimage, flip

我从相机胶卷加载图像，但这个图像是颠倒的。所以我写了旋转它的方法。

```
CGImageRef imageRef = [image CGImage];

float width = CGImageGetWidth(imageRef);
float height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
Byte *rawData = malloc(height * width * 4);
Byte bytesPerPixel = 4;
int bytesPerRow = bytesPerPixel * width;
Byte bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);
int byteIndex = 0;
CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

Byte *rawData2 = malloc(height * width * 4);

for (int i = 0 ; i < width * height ; i++) {
    int index = (width * height) * 4;
    rawData2[byteIndex + 0] = rawData[index - byteIndex + 0];
    rawData2[byteIndex + 1] = rawData[index - byteIndex + 1];
    rawData2[byteIndex + 2] = rawData[index - byteIndex + 2];
    rawData2[byteIndex + 3] = rawData[index - byteIndex + 3];

    byteIndex += 4;
}

CGContextRef ctx = CGBitmapContextCreate(rawData2, CGImageGetWidth( imageRef ), CGImageGetHeight( imageRef ), 8, CGImageGetBytesPerRow( imageRef ), CGImageGetColorSpace( imageRef ),kCGImageAlphaPremultipliedLast );

imageRef = CGBitmapContextCreateImage (ctx);
image = [UIImage imageWithCGImage:imageRef];

CGContextRelease(context);

return image; 
```

没关系，但现在我必须水平翻转它，我不知道该怎么做。我试着在第二天做这个。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-29T10:19:00.927

你有没有试过这个：

```
imageView.transform = CGAffineTransformMakeScale(-1, 1); 
```

?

您还可以使用转换进行旋转：

```
imageView.transform = CGAffineTransformMakeRotation(M_PI); 
```

您可以像这样将两个转换合二为一：

```
imageView.transform = CGAffineTransformRotation(CGAffineTransformMakeScale(-1, 1), M_PI); 
```

如果您想制作自己的`UIImage`对象，而不是操作视图和转换，我仍然建议您使用上述方法让视图根据需要绘制图像，然后将您的`UIView`内容转换为`UIImage`对象：

```
UIGraphicsBeginImageContext(rect.size);
[imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# php - 通过 PHP 函数提供图像 src

> ID：11708434
> 
> 赞同：0
> 
> 时间：2012-07-29T10:17:10.427
> 
> 标签：php, image, src

我已经使用了该构造`<img src="http://yoursite.com/image.php?request_id=XXXX">` ，它可以很好地服务于可能需要一些预处理的图像。但是，如果 image.php 需要很多参数，则 src 会变得非常笨拙。因此，我想将 image.php 包装成一个函数，并将其捆绑到我的内容页面中`include_once "image.php"`。

但是，该策略会产生可怕的“无法修改标头信息”错误。我相信这是因为在引用 img 之前，页面上已经有输出。这是否意味着不可能通过函数而不是通过获取单独的文件来输出图像 src？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:31:17.243

这将不起作用，因为您在一个响应中发送两种不同类型的内容，一种是 text/html，另一种是例如 image/jpeg。这是我的建议：有一个函数接受渲染图像所需的所有参数，并让此函数将其保存在磁盘上的某个位置（例如缓存/图像），然后该函数应返回此图像的路径，以便您可以放置它在你的源代码中。

# c# - C# 图形绘制任何对象

> ID：11708435
> 
> 赞同：0
> 
> 时间：2012-07-29T10:17:24.083
> 
> 标签：c#, generics, graphics

我想在 Windows 窗体上绘制许多不同的形状。以下代码仅适用于矩形。

```
// render list contains all shapes
List<Rectangle> DrawList = new List<Rectangle>();

// add example data
DrawList.Add(new Rectangle(10, 30, 10, 40));
DrawList.Add(new Rectangle(20, 10, 20, 10));
DrawList.Add(new Rectangle(10, 20, 30, 20));

// draw
private void Form1_Paint(object sender, PaintEventArgs e)
{
    Graphics g = e.Graphics;
    foreach (Rectangle Object in DrawList)
    {
        g.FillRectangle(new SolidBrush(Color.Black), Object);
    } 
} 
```

如何改进代码以处理任何类型的形状，如矩形、直线、曲线等？

我想我需要一个可以包含不同类型对象的列表和一个根据其形状类型绘制任何对象的函数。但不幸的是，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T10:24:17.883

像这样的东西：

```
public abstract class MyShape
{
   public abstract void Draw(PaintEventArgs args);
}

public class MyRectangle : MyShape
{
    public int Height { get; set; }
    public int Width { get;set; }
    public int X { get; set; }
    public int Y { get; set; }

    public override void Draw(Graphics graphics)
    {
        graphics.FillRectangle(
            new SolidBrush(Color.Black),
            new Rectangle(X, Y, Width, Height));
    }
}

public class MyCircle : MyShape
{
    public int Radius { get; set; }
    public int X { get; set; }
    public int Y { get; set; }

    public override void Draw(Graphics graphics)
    {
        /* drawing code here */
    }        
}

private void Form1_Paint(object sender, PaintEventArgs e)
{
    List<MyShape> toDraw = new List<MyShape> 
    {
        new MyRectangle
        {
            Height = 10,
            Width: 20,
            X = 0,
            Y = 0
        },
        new MyCircle
        {
           Radius = 5,
           X = 5,
           Y = 5
        }
    };

    toDraw.ForEach(s => s.Draw(e.Graphics));
} 
```

或者，您可以为要绘制的每种类型创建一个扩展方法。例子：

```
public static class ShapeExtensions
{
    public static void Draw(this Rectangle r, Graphics graphics)
    {
        graphics.FillRectangle(new SolidBrush(Color.Black), r);
    }
} 
```

# haskell - 如何在 emacs - haskell 模式下运行 haskell 应用程序？

> ID：11708440
> 
> 赞同：3
> 
> 时间：2012-07-29T10:18:33.763
> 
> 标签：haskell, emacs, haskell-platform, haskell-mode

helloworld.hs 中的代码：

> main = do
> putStrLn "你好，你叫什么名字？"
> name <- getLine
> putStrLn ("Hey " ++ name ++ ", you rock!")

在终端中测试的应用程序：

> optimight@optimight:~$ ghc --make helloworld
> [1 of 1] 编译 Main (helloworld.hs, helloworld.o)
> 链接 helloworld ...
> optimight@optimight:~$ ./helloworld
> 你好，你叫什么名字？
> 约翰
> 嘿约翰，你摇滚！

helloworld.hs 在 emacs 中加载 - haskell 主要模式：

> GHCi，版本 7.4.1：[http](http://www.haskell.org/ghc/) ://www.haskell.org/ghc/ :? 寻求帮助
> 加载包 ghc-prim ... 链接 ... 完成。
> 加载包 integer-gmp ... 链接 ... 完成。
> 正在加载包库...链接...完成。
> Prelude> :load "/home/optimight/helloworld.hs"
> [1 of 1] 编译 Main ( /home/optimight/helloworld.hs, 解释)
> 好的，加载的模块：Main。
> *主要>

现在，**如何（程序是什么？）在 emacs - haskell 模式环境中测试它？**（我相信，当我使用 emacs - haskell mode 时，应该不需要切换到终端。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T20:17:39.960

要执行与您在命令行上执行的操作类似的操作，您需要在 ghci 中加载程序（您已经完成），然后调用该`main`方法（您只需`main`在提示符处键入即可执行此操作）。

# ruby-on-rails - 设计：尝试创建没有 ID 的记录

> ID：11708442
> 
> 赞同：1
> 
> 时间：2012-07-29T10:18:52.330
> 
> 标签：ruby-on-rails, ruby, sqlite, devise

我是 Rails 的新手，我正在尝试使用 devise 为身份验证部分创建一个应用程序。我注意到的第一件事是我的测试失败了，因为我的用户设备没有 ID，所以我把它放在我的`User`模型上

```
self.primary_key = :id 
```

这有助于我的测试运行，但现在我遇到了另一个问题。每次我尝试添加用户时，Devise 控制器都会失败并显示以下消息：

```
ActiveRecord::StatementInvalid in Devise::RegistrationsController#create

SQLite3::ConstraintException: users.id may not be NULL: INSERT INTO "users" ("active", "created_at", "current_sign_in_at", "current_sign_in_ip", "default_business_id", "email", "encrypted_password", "first_name", "last_name", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

为什么没有自动创建用户 ID？我正在使用 Rails 3.2 运行 Devise 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:16:50.493

好吧，我终于找到了问题所在。表`users`列`id`没有被定义为数据库中的主键，所以这就是 Rails 没有自动为其分配值的原因。我不知道它是怎么发生的，因为我没有接触到创建这个表的迁移（这个文件是由 Devise 生成的）。无论如何，完全回滚并再次执行迁移解决了这个问题。感谢所有回复的人，并希望这对未来的任何人都有帮助。

# php - 将列乘以用户定义的变量

> ID：11708449
> 
> 赞同：1
> 
> 时间：2012-07-29T10:19:54.150
> 
> 标签：php, mysql

我有一个 select 语句，如下所示

```
$test = $pdo->query('Select col1, SUM(col2), SUM(col3), SUM(col3)*SUM(col2) from table group by col1'); 
```

我现在想将 col2 的总和相乘，所以我让这条线工作

```
$test = $pdo->query('Select col1, SUM(col2)*100, SUM(col3), SUM(col3)*SUM(col2) from table group by col1'); 
```

但是我希望用户能够在表单中定义数字。我有表单工作，我创建了一个变量，如下所示。

```
$custom = ($_POST['custom']); 
```

但是，当我尝试将 $custom 放入我的选择语句时，我得到了一个错误。我在这里尝试了一些不同的东西，但似乎无法得到结果。我认为类似于下面的东西可能会起作用，但不是吗？处理这个问题的最佳方法是什么？

```
$test = $pdo->query('Select col1, SUM(col2)*'$custom', SUM(col3), SUM(col3)*SUM(col2) from table group by col1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:28:19.077

最好的办法是使用准备好的语句来传递参数。但是，您不能在列列表中使用准备好的语句参数，因此您必须引用该值。

```
$test = $pdo->query('
    Select 
        col1, 
        SUM(col2)*' . $pdo -> quote ($_POST ['custom']) . ', 
        SUM(col3), 
        SUM(col3)*SUM(col2) 
    from table 
    group by col1'); 
```

您还必须确保 $_POST 是数字，因为如果它是空白的或者您不能乘以的东西，那么查询仍然会失败。你可以这样做。

```
$custom = $_POST ['custom'] * 1;
$test = $pdo->query('
    Select 
        col1, 
        SUM(col2)*' . $pdo -> quote ($custom) . ', 
        SUM(col3), 
        SUM(col3)*SUM(col2) 
    from table 
    group by col1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:32:27.130

将其转换为如下数字并尝试此

```
$custom = $_POST ['custom'] * 1;
$test = $pdo->query('Select col1, SUM(col2)*' . $custom . ', SUM(col3), SUM(col3)*SUM(col2) from table group by col1'); 
```

# java - android中的Java定时器

> ID：11708450
> 
> 赞同：3
> 
> 时间：2012-07-29T10:20:06.667
> 
> 标签：java, android, timer

这怎么能在android中完成？

```
public final Timer timer = new Timer(10, new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {  
          // Do task here       
        }
    }); 
```

我需要能够调用 timer.start(); 来自计时器所在的活动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T10:49:48.853

在大多数情况下，使用处理程序而不是定时器要好得多。处理程序能够发送延迟消息。使用 Handler 的好处是：

*   它在主（UI）线程上运行 -> 可以访问视图（与不能直接访问视图的计时器不同）
*   如果需要，您可以删除待处理的延迟消息
*   更少的代码

例子：

```
class MyActivity extends Activity {

    private static final int DISPLAY_DATA = 1;
    // this handler will receive a delayed message
    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            // Do task here
            if (msg.what == DISPLAY_DATA) displayData();
        }
 };

 @Override
 void onCreate(Bundle b) {
     //this will post a message to the mHandler, which mHandler will get
     //after 5 seconds
     mHandler.sendEmptyMessageDelayed(DISPLAY_DATA, 5000);
 }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T10:27:49.173

尝试这样的事情：

```
// this will run when timer elapses
TimerTask myTimerTask = new TimerTask() {

    @Override
    public void run() {
        // ...
    }

};

// new timer
Timer timer = new Timer();

// schedule timer
timer.schedule(myTimerTask, delayInMs); 
```

如果您希望在活动的主线程中完成任务，请像这样修改它：

```
// get a handler (call from main thread)
final Handler handler = new Handler();

// this will run when timer elapses
TimerTask myTimerTask = new TimerTask() {
    @Override
    public void run() {
        // post a runnable to the handler
        handler.post(new Runnable() {
            @Override
            public void run() {
                // ...
            }
        });
    }
};

// new timer
Timer timer = new Timer();

// schedule timer
timer.schedule(myTimerTask, delayInMs); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T10:43:51.583

Android 也有一个不错的[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T21:32:42.087

我已经在另一个问题中回答了这个问题。

我会避免使用 TimerTask，如果你把它们中的很多都关掉，它们不仅难以管理，而且对性能不利。

这些天，我会推荐`Handler`几乎任何基于时间的任务。

请参阅[定时器应用程序](https://stackoverflow.com/questions/13100196/making-a-interval-timer-in-java-android)

# css - 使 iOS WebView 表现得像电子书阅读器

> ID：11708451
> 
> 赞同：3
> 
> 时间：2012-07-29T10:20:30.427
> 
> 标签：css, ios, jquery-mobile, uiwebview

通常在 webview 中，当您的页面太长时，您可以像浏览器一样垂直滚动，这是默认设置。

我想让这个 webview 表现得像一个电子书阅读器，比如当你需要 3 个页面来显示整个内容时，你可以像电子书阅读器一样滑动到下一页（例如 iOS Kindle 应用程序），而不是垂直滚动。

关于如何实现这一点的任何想法？或者我可以使用的任何现有组件？

欢呼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:19:49.810

很大程度上取决于您（想要）对 html 有多少控制......

对于完整的布局控制（类似杂志），有[baker framework](http://bakerframework.com/)。

或者，如果您需要一个快速而肮脏的脚本自动生成带有分页的 html 文件（类似 instapaper），我会使用[css3 多列](http://dev.w3.org/csswg/css3-multicol/)布局，并使用一些 js 来计算所需的列。并使用[SwipeView](http://cubiq.org/swipeview)之类的东西来管理滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:23:36.853

这不是微不足道的，有几个 HTML 项目与分页有关。无处不在的 jQuery 还包括对 HTML 内容分页的支持。

有关更多详细信息，请查看[此 SO 帖子](https://stackoverflow.com/questions/3397162/html-pagination)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:48:42.540

您可以在 UIWebView 上使用 UISwipeGestureRecognizer 并以编程方式移动到页面

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T14:54:09.673

为此，您可以从 a 开始并使用 a[`UIPageViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)填充每个页面，每个页面`UIWebView`向下滚动到某个偏移量并禁用底层滚动视图的滚动。

# stored-procedures - 程序 发送邮件警报

> ID：11708455
> 
> 赞同：0
> 
> 时间：2012-07-29T10:21:11.783
> 
> 标签：stored-procedures, plsql, oracle10g

我有一个发送电子邮件的程序，这个程序被其他函数和程序调用（主要用于发送警报和通知）。

我面临的一个问题是，如果我们的邮件服务器出现故障，那么调用函数或过程就会停止执行，我的意思是他们没有执行他们应该执行的任何功能。我如何确保调用函数或过程或任何调用 MailProcedure 的客户端即使在邮件服务器关闭时也应该执行其功能。

我怎样才能做到这一点？任何帮助都是非常可观的。

邮件程序

```
CREATE OR REPLACE PROCEDURE MailProcedure(frm_id IN VARCHAR2, to_id IN VARCHAR2, subject IN VARCHAR2, body_text IN VARCHAR2)
AS
c utl_tcp.connection;
rc integer;
BEGIN
 c := utl_tcp.open_connection('email_server', 25);  
 rc := utl_tcp.write_line(c, 'string'); 
 rc := utl_tcp.write_line(c, 'from address'); 
 rc := utl_tcp.write_line(c, 'to address');  
 rc := utl_tcp.write_line(c, 'Subject'); 
 rc := utl_tcp.write_line(c, 'body');  
 utl_tcp.close_connection(c); 
EXCEPTION
    WHEN OTHERS
    THEN
        null;
END;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T06:33:24.650

由于您希望将电子邮件排队以供以后发送，因此最简单的选择是异步发送所有电子邮件消息。您的其他过程将调用一个`QueueMail`将行插入新`mail_queue`表的过程

```
CREATE OR REPLACE PROCEDURE QueueMail(p_from IN VARCHAR2, 
                                      p_to IN VARCHAR2, 
                                      p_subject IN VARCHAR2, 
                                      p_body IN VARCHAR2)
AS
BEGIN
  INSERT INTO mail_queue( mail_queue_id. from, to, subject, body )
    VALUES( mail_queue_seq.nextval, p_from, p_to, p_subject, p_body );
END; 
```

然后，您将有一个单独的过程在一个单独的线程中运行，该线程实际感测电子邮件并从队列中删除消息。就像是

```
CREATE OR REPLACE PROCEDURE SendQueuedMessages
AS
BEGIN
  FOR msg IN (SELECT * FROM mail_queue )
  LOOP
    sendMessage( msg.from, msg.to, msg.subject, msg.body );
    DELETE FROM mail_queue
     WHERE mail_queue_id = msg.mail_queue_id;
    commit;
  END LOOP;
END; 
```

where`sendMessage`实现了发送电子邮件的实际逻辑。我认为您可能希望使用`utl_mail`或`utl_smtp`包来发送电子邮件，而不是使用`utl_tcp`，但当然，您可以使用`utl_tcp`. 然后，您将`SendQueuedMessages`使用`dbms_job`或`dbms_scheduler`包安排该过程。像这样的东西

```
DECLARE
  l_jobno PLS_INTEGER;
BEGIN
  dbms_job.submit( l_jobno,
                   'BEGIN SendQueuedMessages; END;',
                   sysdate + interval '1' minute,
                   'sysdate + interval ''1'' minute' );
  commit;
END; 
```

`SendQueuedMessages`将创建一个每分钟运行该过程的作业。如果邮件服务器关闭，则该`SendQueuedMessage`过程将失败并且该作业会自动重新安排以稍后运行。第一次失败后，作业会在 1 分钟后再次运行。第二次失败后，2分钟后运行，然后4分钟、8分钟等，直到连续失败16次。如果您想在过程中捕获异常，您可以选择默认行为以外的其他行为`SendQueuedMessages`。由于作业失败会导致将失败写入警报日志，因此您的 DBA 可能会要求您处理异常并重新安排作业，以避免将不必要的数据写入警报日志。

# c# - 在 propertyChanged 上的背景颜色之间淡入淡出

> ID：11708457
> 
> 赞同：1
> 
> 时间：2012-07-29T10:21:22.750
> 
> 标签：c#, .net, wpf

我想知道，如何使两种背景颜色之间的过渡更加平滑。是否可以进行某种淡入淡出过渡？

我创建了这个小示例项目来说明行为。

主窗口.xaml

```
<Window x:Class="FadeTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Converter="clr-namespace:FadeTest" Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Converter:BackgroundPercentConverter x:Key="backgroundPercentConverter"/>
</Window.Resources>
<DockPanel>
    <Label Content="{Binding PercentComplete}" Height="100" Width="200" 
           DockPanel.Dock="Top" Foreground="White" FontSize="28" 
           Background="{Binding PercentComplete, Converter={StaticResource backgroundPercentConverter}}" 
           HorizontalContentAlignment="Center" VerticalContentAlignment="Center" />
    <Button DockPanel.Dock="Bottom" Click="Button_Click" Width="100" Height="32">Click</Button>
</DockPanel> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new MyClass {PercentComplete = 0};
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        ((MyClass) DataContext).PercentComplete++;
    }
} 
```

我的类.cs

```
class MyClass : INotifyPropertyChanged 
{
    private int _percentComplete;
    public int PercentComplete
    {
        get { return _percentComplete; }
        set
        {
            if (value >= 10)
                value = 0;
            _percentComplete = value;
            OnPropertyChanged("PercentComplete");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

背景百分比转换器.cs

```
public class BackgroundPercentConverter : IValueConverter
{
    private static readonly SolidColorBrush[] MyColors = new[]
                                                             {
           new SolidColorBrush(Color.FromRgb(229, 29, 37)),
           new SolidColorBrush(Color.FromRgb(252, 52, 0)),
           new SolidColorBrush(Color.FromRgb(253, 81, 0)),
           new SolidColorBrush(Color.FromRgb(255, 101, 1)),
           new SolidColorBrush(Color.FromRgb(255, 133, 0)),
           new SolidColorBrush(Color.FromRgb(254, 175, 0)),
           new SolidColorBrush(Color.FromRgb(221, 182, 3)),
           new SolidColorBrush(Color.FromRgb(173, 216, 2)),
           new SolidColorBrush(Color.FromRgb(138, 191, 62)),
           new SolidColorBrush(Color.FromRgb(47, 154, 69))
                                                             };

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if ((int)value < 0 || (int)value >= MyColors.Length)
            return MyColors[0];

        return MyColors[(int)value];
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:36:31.510

你可以定义一个 StoryBoard，它有一个 ColorAnimation，它定义了一个从和到的颜色，即你想要在它们之间平滑插值的颜色。

您的动画应该以 SolidColorBrush 的 Color 属性为目标，该属性可以是定义为 Resource 然后由您的控件引用的属性（即您的 Label 在背景中使用 {StaticResource xxxxxx} 来引用它，或者您的动画可以针对直接在标签中的背景如果背景包含一个画笔，它是一个 SolidColorBrush（...通常是这种情况...但这完全取决于控件模板的设计方式）。

然后您需要开始和暂停动画并寻找与您的百分比相对应的动画位置。例如，您可以将 Duration 设置为 100 秒，然后您可以简单地将百分比值用作 TimeSpan 中的秒数。（可能必须设置 IsControllable=true）。

您将在加载控件时启动和暂停动画，然后根据您的百分比变化同步更改搜索位置。

请注意，始终运行动画可能是个坏主意，只是将范围值映射到演示颜色，但这是您所拥有的另一种选择。

否则坚持你的值转换器，你可以自己计算两种颜色之间的线性插值。请参阅此链接：

*   [算法：如何使用 RGB 值通过黄色从红色渐变到绿色？](https://stackoverflow.com/questions/6394304/algorithm-how-do-i-fade-from-red-to-green-via-yellow-using-rgb-values)

以下是一些与动画相关的链接：

*   [http://social.msdn.microsoft.com/Forums/en/wpf/thread/d2517850-81cc-4d22-be7d-cad522540ad2](http://social.msdn.microsoft.com/Forums/en/wpf/thread/d2517850-81cc-4d22-be7d-cad522540ad2)

*   [如何在不运行时将 WPF 故事板寻找到特定的帧/时间偏移](https://stackoverflow.com/questions/3983108/how-to-seek-a-wpf-storyboard-to-a-specific-frame-time-offset-when-not-running)

# macos - Applescript 获取元素

> ID：11708459
> 
> 赞同：2
> 
> 时间：2012-07-29T10:21:30.870
> 
> 标签：macos, applescript

[这个 SO 答案](https://stackoverflow.com/questions/11700006/applescript-api-documentation)让我在编写新 MacBook Retina 屏幕分辨率更改脚本方面更进一步。我被困在这里：

![在此处输入图像描述](../Images/ae11acfb4deb8cb11092367c2712f6ba.png)

我可以使用此脚本到达此窗格：

```
tell application "System Preferences"
    activate
    set the current pane to pane id "com.apple.preference.displays"
    reveal anchor "displaysDisplayTab" of current pane
    get elements of current pane
    tell application "System Events"

    end tell
    --get the name of every anchor of current pane
end tell 
```

但是，如果此窗格内容，如何知道如何选择位？例如，如何参考“缩放”单选按钮并选择 5 种可能的分辨率之一？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T10:34:34.737

我发现这段 AppleScript 显然检索了 Window 中可用的每个 UI 元素：

```
tell application "System Events"
tell process "Process Name"
set visible to true
return every UI element of front window
return name of every UI element of front window
end tell
end tell 
```

（还没有测试自己。在[这里](http://webcache.googleusercontent.com/search?q=cache%3aY3zloUpd0tYJ%3amabblog.com/blog/2010/07/applescript-tips-tricks/%20&cd=1&hl=en&ct=clnk&gl=nl)找到。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-08T17:09:02.273

[图片告诉您属性所需的单选按钮编号：第 7 行的 _MS](https://i.stack.imgur.com/MIhRv.png)

```
use sys : application "System Events"
use prefs : application "System Preferences"

property prefsUI : a reference to process "System Preferences"
property _W : a reference to windows of prefsUI
property _DD : a reference to radio button "Default for display" of radio group 1 of tab group 1 of _W
property _SD : a reference to radio button "Scaled" of radio group 1 of tab group 1 of _W
property _MS : a reference to radio button 4 of radio group 1 of group 2 of tab group 1 of _W

property pane : "com.apple.preference.displays"
property anchor : "displaysDisplayTab"
property tab : anchor (my anchor) of pane id (my pane)

set defaultDisplay to null
if tab ≠ (reveal tab) then return null

tell _DD to if exists then set defaultDisplay to its value as boolean

if defaultDisplay is false then
    click _DD
else
    click _SD
    click _MS
end if

quit prefs 
```

该脚本会根据当前处于活动状态的分辨率在默认分辨率和“最大空间”分辨率之间交替。

# mysql - MySQL - 选择 3 个具有正确左连接语法的表

> ID：11708464
> 
> 赞同：1
> 
> 时间：2012-07-29T10:22:03.267
> 
> 标签：mysql, syntax, left-join

希望你能帮助我正确的 SQL 查询语法（使用 MySQL 5.5.25）。

我有 3 张桌子：

*   数据
*   数据_tmp
*   用户

`data`表是空的 - 有它自己的结构但没有行

**数据**：

```
id | name | who
---------------- 
```

**数据时间**：

```
id | cars | who
---------------
1  | lambo| 2 
```

**用户**

```
who | name |
------------
 2  | john 
```

我的查询是：

```
SELECT DISTINCT 
    users.name, 
    (SELECT count(id) FROM data WHERE who = 1) as number, 
    data_tmp.cars 
FROM 
    users, data, data_tmp 
WHERE 
    users.who = 2 
    AND data_tmp.who = 2 
    AND data.who = 2 
```

这当然会返回一个空结果（没有适合所有参数的行，因为`data`它是空的）。

我想要实现的是：

```
users.name | number | data_tmp.cars |
-------------------------------------
 john      |    0   | lambo         | 
```

我确信我必须 - 以某种方式 - 使用`LEFT JOIN`但找不到正确的语法。希望您能够帮助我。

卡雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:10:26.540

试试看（*不使用子查询*）

```
SELECT  a.name, b.cars, count(c.id) as  number
FROM    users a 
            INNER JOIN data_tmp b
                on a.who = b.who
            LEFT JOIN data c
                on a.who = c.who AND
                   a.name = c.name
WHERE    a.who = 2 
GROUP BY a.name, b.cars 
```

这适用于不同的服务器：

**[MSSQL 服务器@SQLFIDDLE](http://sqlfiddle.com/#!3/9e16a/1)**
**[MYSQL@SQLFIDDLE](http://sqlfiddle.com/#!2/9e16a/1)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:27:23.510

您的假设是正确的：您必须以这种方式使用左联接：

```
SELECT DISTINCT users.name, (SELECT count(id) FROM data WHERE who = 1) as number, data_tmp.cars 
FROM users
JOIN data_tmp USING (who)
LEFT JOIN data USING(who)
WHERE users.who = 2 
```

# macos - 如何让 Leopard 从命令行使用 ssl

> ID：11708468
> 
> 赞同：0
> 
> 时间：2012-07-29T10:22:52.470
> 
> 标签：macos, git, curl, darwin

我尝试通过 https 连接的一切都失败了。Bellow 是一个 curl 输出，但它使用 git mongo 和所有东西来完成。达尔文只是不喜欢 https。

*   即将 connect() 到 github.com 端口 443 (#0)
*   尝试 207.97.227.239... 已连接
*   连接到 github.com (207.97.227.239) 端口 443 (#0)
*   成功设置证书验证位置：
*   CAfile：/usr/share/curl/curl-ca-bundle.crt CApath：无
*   SSLv2，客户端你好（一）：
*   SSLv3、TLS 握手、Server hello (2)：
*   SSLv3、TLS 握手、CERT (11)：
*   SSLv3、TLS 警报、服务器问候 (2)：
*   SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败
*   关闭连接 #0 curl: (60) SSL 证书问题，验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

您可能会说没有问题，只需将 https 更改为 http，是的，当您只有 1 个 url（如 git clone）但在 rvm install 上，大约 50 个所需的东西因此无法安装时，这很好。我不想进入 rvm 并将所有出现的 https 更改为 http。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:40:03.043

事实证明，我的 curl 版本使用旧证书来验证 https。

我在 Leopard 下的 git for cURL 上遇到了这个问题：

[https://github.com/mxcl/homebrew/issues/11947](https://github.com/mxcl/homebrew/issues/11947)

错误消失了，我现在可以从 cURL 下载 https 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:16:12.617

看看这篇文章，略有不同，但我认为它会回答你的问题：

[SSL 证书被拒绝尝试通过防火墙后的 HTTPS 访问 GitHub](https://stackoverflow.com/questions/3777075/https-github-access)

您基本上可以让 OSX 忽略 SSL 证书验证，并接受连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-29T16:14:05.740

这看起来像是 curl 本身的问题，而不是 OSX 的问题。你用的是什么版本？如果它特别旧，那么这里对[“严重过时的 CA 文件”](http://curl.haxx.se/docs/sslcerts.html)的引用可能适用。

尝试从 macports 安装最新版本的 curl 和 git。

# iphone - UITableViewCell 中的 iOS 动态按钮标记未检测到表中的正确行

> ID：11708470
> 
> 赞同：0
> 
> 时间：2012-07-29T10:23:07.553
> 
> 标签：iphone, ios, ios4, didselectrowatindexpath, nsindexpath

我现在遇到了一个大问题，因为我的更新按钮根本没有检测到由于回收而被选中的行！尝试标记按钮，但它也没有检测到正确的按钮。请帮忙！我已经坚持了好几天了。如果没有，请随意推荐除标记之外的其他更好的解决方案。我通过 NSDictionary 解析部分和行，如下所示：

```
"15/08/2012" =     (
            {
        BIBNo = 290408;
        date = "15/08/2012";
        itemSequence = 000010;
        name = "Sams teach yourself iPhone application development in 24 hours / John Ray.";
        noOfRenewal = 3;
        number = 000290408;
        status = "Normal Loan";
        time = "24:00";
        type = Loans;
    }
);
"16/08/2012" =     (
            {
        BIBNo = 187883;
        date = "16/08/2012";
        itemSequence = 000010;
        name = "Positive thinking / Susan Quilliam.";
        noOfRenewal = 3;
        number = 000187899;
        status = "Normal Loan";
        time = "24:00";
        type = Loans;
    },
            {
        BIBNo = 161816;
        date = "16/08/2012";
        itemSequence = 000010;
        name = "Malaysian Q & As / compiled by Survey & Interview Department ; illustrations by Exodus.";
        noOfRenewal = 1;
        number = 000161817;
        status = "Normal Loan";
        time = "24:00";
        type = Loans;
    }
);
"17/08/2012" =     (
            {
        BIBNo = 187882;
        date = "17/08/2012";
        itemSequence = 000010;
        name = "Increasing confidence / Philippa Davies.";
        noOfRenewal = 1;
        number = 000187907;
        status = "Normal Loan";
        time = "24:00";
        type = Loans;
    },
            {
        BIBNo = 244441;
        date = "17/08/2012";
        itemSequence = 000010;
        name = "Coach : lessons on the game of life / Michael Lewis.";
        noOfRenewal = 2;
        number = 000244441;
        status = "Normal Loan";
        time = "24:00";
        type = Loans;
    },
            {
        BIBNo = 291054;
        date = "17/08/2012";
        itemSequence = 000010;
        name = "iPhone application development for IOS 4 / Duncan Campbell.";
        noOfRenewal = 3;
        number = 000291054;
        status = "Normal Loan";
        time = "24:00";
        type = Loans;
    }
); 
```

}

我的代码`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";
UserCustomCell *cell = (UserCustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell.bookTitle.frame = CGRectMake(12, 0, 550, 40);

if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"UserCustomCell" owner:self options:nil];
    cell = userCustomCell;
    self.userCustomCell = nil;
}

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    cell.bookTitle.frame = CGRectMake(12, 0, 550, 40);
    cell.renewButton.frame = CGRectMake(600, 14, 68, 24);
}
[cell.renewButton useBlackActionSheetStyle];

dataSource = [[NSMutableDictionary alloc] init]; // This would need to be an ivar

for (NSDictionary *rawItem in myArray) {
    NSString *date = [rawItem objectForKey:@"date"]; // Store in the dictionary using the data as the key

    NSMutableArray *section = [dataSource objectForKey:date]; // Grab the section that corresponds to the date

    if (!section) { // If there is no section then create one and add it to the dataSource
        section = [[NSMutableArray alloc] init];
        [dataSource setObject:section forKey:date];
    }
    [section addObject:rawItem]; // add your object
}
self.dataSource = dataSource;
NSLog(@"Data Source Dictionary: %@", dataSource); 

NSArray *sections =[[dataSource allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
NSString *sectionTitle = [sections objectAtIndex:indexPath.section];

NSArray *items = [dataSource objectForKey:sectionTitle];

NSDictionary *dict = [items objectAtIndex:indexPath.row];
cell.bookTitle.text = [dict objectForKey:@"name"];
cell.detail.text = [NSString stringWithFormat:@"Due Date: %@ Due Time: %@", 
                    [dict objectForKey:@"date"], [dict objectForKey:@"time"]];

cell.renewButton.tag = indexPath.row;
return cell; 
```

}

现在的样子： ![](../Images/229c9617572a9d6282ded20cc707b9ad.png)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:04:25.203

我通过在@Phillip 推荐的数组中添加索引解决了这个问题，如下所示：

```
for (int a = 0; a < myArray.count; a++){

    NSMutableDictionary *mDict = [myArray objectAtIndex:a];
    NSNumber *myIndex = [NSNumber numberWithInt:a];
    [mDict setValue:myIndex forKey:@"index"];
    NSLog(@"added index: %@", myArray);
}
self.myArray = myArray; 
```

在我在按钮中设置标签之前，它会检测到正确的项目。

```
 NSString *index = [dict objectForKey:@"index"];
NSInteger index_tag = (@"%d", [index intValue]);
NSLog(@"%d", index_tag);
cell.renewButton.tag = index_tag; 
```

希望它可以帮助任何和我有同样问题的人:)

# php - 如何访问php生成的导航

> ID：11708475
> 
> 赞同：1
> 
> 时间：2012-07-29T10:24:20.940
> 
> 标签：php, javascript, jquery, html, navigation

我从一个数据库中构建一个导航，在那里我要求不同类别的项目。所以基本上我的导航有两个部分：

第一部分是类别导航（文化、网页设计等）。如果我单击它，我会向我的数据库询问具有此类别的项目并使用 PHP 创建新链接：

```
$query="SELECT * FROM projects WHERE category=\"$category\"";

$result=mysql_query($query);

$num=mysql_numrows($result);

mysql_close();

$i=0;
while ($i < $num) {
$title=mysql_result($result,$i,"title");
$id=mysql_result($result,$i,"id");
echo "<div class=\"sublink\" data-id=\"$id\" ><a href=\"#\">$title<br />";
$i++;
} 
```

但似乎我无法使用 jQuery 从我的主页调用这些链接，就像我对类别所做的那样：

```
<div class="link" data-subsite="design"><a href="#"> design *</a></div>
$(document).ready(function(){
$('.link').click(function(){
var subsite = $(this).data('subsite');
        $('#naviLeftContent').load('php/getNavi.php?category='+subsite);
    });
}); 
```

现在我想对我的子导航做或多或少的相同操作，以将特定的文本/标题/信息加载到正确的 div 中。但是从我的子导航中新生成的 div 似乎不在我的源代码中，因此 JavaScript 无法识别它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:37:56.190

您似乎正在搜索`jQuery.on()`(resp. `jQuery.live()`，自 1.7 版起已弃用)：

> 为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

**编辑：**示例：

**HTML：**

```
<div id="menu">
    <div id="category1">
        <a href="#">link 1</a>
        <a href="#">link 2</a>
    </div>
    <div id="category2"></div>
</div> 
```

**JS：**

```
$(document).ready(function(){
    // Attach click handler
    $(document).on("click", "#menu a", function(){
        alert("click!");
    });

    // Now load menu content, click handler will also work for this
    $("#category2").load("content.php");
}); 
```

* * *

**编辑 2：**在聊天中找到的解决方案：

```
$('.link').click(function(){
    var subsite = $(this).data('subsite');
    $('#naviLeftContent').load('php/getNavi.php?category='+subsite);
});
$(document).on("click", ".sublink", function(){
    var subsite = $(this).data('subsite');
    $('#textContent').load('php/subsite.php?page='+subsite);
}); 
```

* * *

不知道我是否理解正确，但是您是否通过 AJAX 加载导航内容？这不是太复杂了吗？通常，您让 PHP 生成整个导航并使用 CSS 隐藏不需要的部分。这有很多优点：更少的服务器负载，更好的用户体验，......

此外，像这样在 PHP 中迭代 MySQL 结果更具可读性：

```
$result = mysql_query($query);
while ($row = mysql_fetch_object($result)) {
    echo $row->title;
} 
```

# google-apps-script - 确定执行 UrlFetchApp 调用的节点的 IP 地址

> ID：11708477
> 
> 赞同：4
> 
> 时间：2012-07-29T10:24:26.180
> 
> 标签：google-apps-script, urlfetch

对于通过 Google Apps 脚本中的 UrlFetchApp 调用 Web API，我必须提交 HTTP 客户端 IP（通过 HTTP-GET）以进行身份​​验证（namecheap.com API）。

有没有办法确定将执行 UrlFetchApp 调用以将其添加到查询 URL 的节点的 IP 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T17:02:59.590

不，这是不可能的。但是，Google 确实为您提供了一系列 IP 地址，您可以通过这些地址拨打电话：

```
64.18.0.0 - 64.18.15.255
64.233.160.0 - 64.233.191.255
66.102.0.0 - 66.102.15.255
66.249.80.0 - 66.249.95.255
72.14.192.0 - 72.14.255.255
74.125.0.0 - 74.125.255.255
173.194.0.0 - 173.194.255.255
207.126.144.0 - 207.126.159.255
209.85.128.0 - 209.85.255.255
216.239.32.0 - 216.239.63.255 
```

来源：[https ://developers.google.com/apps-script/guides/jdbc#creating_other_database_connections](https://developers.google.com/apps-script/guides/jdbc#creating_other_database_connections)

# node.js - 在 node.js 中解码 https 响应数据

> ID：11708480
> 
> 赞同：6
> 
> 时间：2012-07-29T10:24:50.057
> 
> 标签：node.js

在 node.js 中使用 https 时，我一直在阅读响应数据。以下是 https 请求的代码；

```
https.get(options, function(resp) {                     
    console.log(resp.headers)        //working fine
    resp.on('data', function(d) {           
        console.log(d)             // buffered data; like <Buffer 7b 22 69...
        process.stdout.write(d);  // working fine(prints decoded data in console)
        var decoded_data=???    }); 
}).on('error', function(e) {
    console.error(e);
}); 
```

但是，如何解码响应数据并将其写入变量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T11:55:22.093

```
var decoded_data = d.toString('utf8'); 
```

或者，早些时候：

```
resp.setEncoding('utf8'); 
```

然后你所有的`on`事件都会给你一个字符串而不是一个缓冲区。

# iphone - unarchiveObjectWithFile 时出现奇怪的错误

> ID：11708481
> 
> 赞同：-1
> 
> 时间：2012-07-29T10:24:55.753
> 
> 标签：iphone, objective-c, ios, encoding, nsmutablearray

这是我的代码：

```
array = [[NSMutableArray alloc] init];

NSArray *paths = NSSearchPathForDirectoriesInDomains
(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

//make a file name to write the data to using the
//documents directory:
NSString *fullFileName = [NSString stringWithFormat:@"%@/file", documentsDirectory];

array = [NSKeyedUnarchiver unarchiveObjectWithFile:fullFileName]; 
```

我的代码有什么问题？

这是错误

```
[__NSArrayM count]: message sent to deallocated instance 0xd5864e0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:32:04.400

该声明

```
array = [NSKeyedUnarchiver unarchiveObjectWithFile:fullFileName]; 
```

会给你一个自动释放对象，该对象将在第一个适当的时刻被释放。因此，当您稍后访问其`count`方法时，该对象不再存在。这就是导致崩溃的原因。

解决此问题的一种方法是正确管理您的阵列，以便它在您需要时一直存在。如果您使用 ARC，这可能意味着通过`strong`属性管理对象；如果您不使用 ARC，这涉及使用`retain`. 您没有指定如何`array`声明，所以我不能更准确。

既然您说该属性被声明为：

```
@property (nonatomic,retain) NSMutableArray *array 
```

简单地做：

```
self.array = [NSKeyedUnarchiver unarchiveObjectWithFile:fullFileName]; 
```

应该解决问题。

# eclipse-rcp - 如何隐藏 MPart 上的最小化按钮？

> ID：11708482
> 
> 赞同：1
> 
> 时间：2012-07-29T10:25:08.303
> 
> 标签：eclipse-rcp, eclipse-juno

我在 Eclipse Juno 中编写了一个 rcp 应用程序，并创建了一个带有修剪窗口的应用程序模型，该窗口包含一个带有一个透视图的透视图堆栈。此透视图包含一个带有两个部件堆栈的部件容器。每个零件堆栈包含一个零件。

如果我运行应用程序，每个部分都有一个我想禁用的最小化按钮。我怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:30:01.253

您可以通过向.css 文件`MPartStack`中的选择器添加样式属性来隐藏 s 的最小化按钮：`.MPartStack`

```
.MPartStack {
  swt-minimize-visible: false;
} 
```

（见：http: [//garethcooper.com/2012/05/eclipse-4-css/](http://garethcooper.com/2012/05/eclipse-4-css/)）

# iphone - RestKit 映射请求

> ID：11708486
> 
> 赞同：0
> 
> 时间：2012-07-29T10:25:57.447
> 
> 标签：iphone, objective-c, ios, json, restkit

我为自己的 API 请求创建了某种包装类，如下所示：

```
+ (void)sendGETRequestWithURLString:(NSString *)request mapping:(NSString *)mapping withFailBlock:(RKRequestDidFailLoadWithErrorBlock)failBlock completion:(kServiceCompleteBlock)completion {

    RKObjectManager *manager = [RKObjectManager sharedManager];

    [manager loadObjectsAtResourcePath:request usingBlock:^(RKObjectLoader *loader) {        
        loader.onDidLoadResponse = ^(RKResponse *response) {
            [self fireErrorBlock:failBlock onErrorInResponse:response];
            if (completion)
                completion(response);
        };
    }];
} 
```

我正在尝试映射响应。当我使用 RestKit 0.9 时，我将它映射到 AppDelegate 中，如下所示：

```
RKObjectMapping* categoryMapping = [RKObjectMapping mappingForClass:[Category class]];
[categoryMapping mapKeyPath:@"id" toAttribute:@"categoryID"];
[categoryMapping mapKeyPath:@"name_ar" toAttribute:@"arabicName"];
[categoryMapping mapKeyPath:@"name_en" toAttribute:@"englishName"];
[categoryMapping mapKeyPath:@"img" toAttribute:@"imageUri"];
[categoryMapping mapKeyPath:@"img_en" toAttribute:@"imageEnUri"]; 
```

在 10.0 之前的代码中，我如何将上述映射连接到我的请求？

# sql - 一个高效的 SQL 调用，而不是 500 个

> ID：11708488
> 
> 赞同：0
> 
> 时间：2012-07-29T10:26:18.317
> 
> 标签：sql, ruby-on-rails, loops, controller, refactoring

在我看来，我有一个复杂的循环，它创建了 500 个 SQL 查询（以获取 500 本书的信息）。如何通过在控制器中加载变量来避免大量 SQL 查询？

我当前的（伪）代码：

控制器索引操作：

```
@books = Book.scoped.where(:client_id => @client.id).text_search(params[:query])
@feature_root = Book.multiple_summary_details_by_category( @books ) 
  #...returns a hash of books
@features = @feature_root.to_a.paginate(:page => params[:page], :per_page => 4) 
```

index.html.haml

```
 = render :partial => "feature", :locals => { :features => @features } 
```

_features.html.haml

```
 - features.each_with_index do |(cat_name, array_of_books), i|  
    %h2
      = cat_name
    - array_of_books[0..10].each do |feature|
      = link_to image_tag(feature[:cover], :class => "product_image_tiny"), book_path(feature[:book])
    # more code
    - array_of_books.sort_by{ |k, v| k["Author"] }.each do |feature|
      - feature.each do |heading,value|
        %span.summary_title
          = heading + ':'
        %span.summary_value
          = value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:42:02.400

你试过什么了？[使用http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)中记录的标准 ActiveRecord 查询应该很容易。

此外，而不是

```
array_of_books.sort_by{ |k, v| k["Author"] } 
```

尝试类似的东西

```
Book.order("author DESC") 
```

（不确定您在这里的确切模型）让数据库进行排序而不是将它们放在一个数组中并让 ruby​​ 处理它。

# xml - MSXML VBA：针对 XSD 验证 XML：“提供的 '' 命名空间与架构的 targetNamespace 不同。”

> ID：11708492
> 
> 赞同：8
> 
> 时间：2012-07-29T10:27:02.717
> 
> 标签：xml, vba, dom, xsd, msxml

我正在尝试针对具有 MSXML 6.0 DOM 的 .XSD 文件验证 .XML 文件，但在执行代码时我收到以下错误消息：

```
Test.xsd#/schema/targetNamespace[1]
"The '' namespace provided differs from the schema's 'http://somewhere.com/root' targetNamespace." 
```

.XML 和 .XSD 文件的高度简化版本也会产生相同的错误：

**文件**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
<ns2:noderoot xmlns:ns2="http://somewhere.com/root">
    <general>
        <year>2011</year>
        <month>02</month>
    </general> 
</ns2:noderoot> 
```

**XSD 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="http://somewhere.com/root" 
            targetNamespace="http://somewhere.com/root" 
            xmlns:xs="http://www.w3.org/2001/XMLSchema" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            elementFormDefault="unqualified" 
            attributeFormDefault="unqualified">

    <xs:complexType name="TYPE_nodeGeneral">
        <xs:sequence>
            <xs:element name="year">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:length value="4"/>
                        <xs:pattern value="\d{4}"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name="month">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:length value="2"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>           

    <xs:complexType name="TYPE_noderoot">
        <xs:sequence>
            <xs:element name="general" type="TYPE_nodeGeneral"></xs:element>            
        </xs:sequence>
    </xs:complexType>

    <xs:element name="noderoot" type="TYPE_noderoot"></xs:element>

</xs:schema> 
```

为了验证 XML 文件，我使用了用 VBA (Excel 2010) 编写的代码：

```
Sub XSD_Validation()

   XML_FILE = "I:\Test.xml"    
   XSD_FILE = "I:\Test.xsd"

    Dim xmlDoc As MSXML2.DOMDocument60
    Set xmlDoc = New MSXML2.DOMDocument60
    xmlDoc.async = False
    xmlDoc.validateOnParse = False
    xmlDoc.resolveExternals = False

    xmlDoc.Load XML_FILE

    ' Open XSD file
    Dim obXSD As MSXML2.DOMDocument60
    Set objXSD = New MSXML2.DOMDocument60
    objXSD.async = False
    objXSD.Load XSD_FILE

    ' Populate schema cache
    Dim objSchemaCache As XMLSchemaCache60
    Set objSchemaCache = New MSXML2.XMLSchemaCache60
    objSchemaCache.Add "", objXSD

    ' XSD XML Bind
    Set xmlDoc.Schemas = objSchemaCache

    'Error visualization
    Dim objErr As MSXML2.IXMLDOMParseError
    Set objErr = xmlDoc.Validate()
    If objErr.errorCode <> 0 Then
        Debug.Print "Error parser: " & objErr.errorCode & "; " & objErr.reason
    Else
        Debug.Print "No errors found"
    End If

    Set objErr = Nothing
    Set objXSD = Nothing
    Set objSchemaCache = Nothing
    Set xmlDoc = Nothing

End Sub 
```

XSD 文件可以修改，但 XML 文件必须保持不可触碰。

我一直在尝试解决这个问题超过 8 个小时，但没有任何积极的结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T12:56:18.693

尝试将命名空间 URI 添加到架构缓存中。

```
Sub XSD_Validation()
    Dim xmlDoc As MSXML2.DOMDocument60
    Dim objSchemaCache As New XMLSchemaCache60
    Dim objErr As MSXML2.IXMLDOMParseError

    objSchemaCache.Add "http://somewhere.com/root", LoadXmlFile("I:\Test.xsd")

    Set xmlDoc = LoadXmlFile("I:\Test.xml")
    Set xmlDoc.Schemas = objSchemaCache

    Set objErr = xmlDoc.Validate()
    If objErr.errorCode = 0 Then
        Debug.Print "No errors found"
    Else
        Debug.Print "Error parser: " & objErr.errorCode & "; " & objErr.reason
    End If
End Sub

Function LoadXmlFile(Path As String) As MSXML2.DOMDocument60
    Set LoadXmlFile = New MSXML2.DOMDocument60

    With LoadXmlFile
        .async = False
        .validateOnParse = False
        .resolveExternals = False
        .load Path
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T12:43:07.297

您不必更改 xml/xsd 中的任何内容，因为它们一起有效。问题出在您的代码中，因此我建议您查看[此示例](http://msdn.microsoft.com/en-us/library/ms256068.aspx)，该示例显示了我认为与您的代码不同的地方：当您将 XSD 添加到缓存中时，请使用目标命名空间[http://somewhere.com/ root](http://somewhere.com/root)而不是空字符串。

# android - 随机化三个单选按钮的值，产生零结果

> ID：11708493
> 
> 赞同：1
> 
> 时间：2012-07-29T10:27:04.970
> 
> 标签：android, arrays, random

我一直得到一个零值作为我的一个单选按钮的输出。我正在尝试使单选按钮中的值以随机顺序显示。

主要任务是随机化我给出示例的各种值的顺序

第一个选项的值为 2 第二个选项的值为 3 第三个选项的值为 1

我想随机化单选按钮的顺序。我试图有一个大小为 3 的数组，但得到了 ArrayOutOfBounds 异常。

我也不希望重复任何问题值。例如

单选按钮 1 的值为 2 单选按钮 2 的值为 2 单选按钮 3 的值为 1

如果！= null，我可以设置吗？我的意思是我可以进行一些验证以检查特定数组索引是否具有值以及它是否不忽略它。

```
 int opmin = 1;
    int opmax = 3;

    int randomoption  = opmin + (int)(Math.random() * ((opmax - opmin) + 1));
    int randomoption1  = opmin + (int)(Math.random() * ((opmax - opmin) + 1));
    int randomoption2 = opmin + (int)(Math.random() * ((opmax - opmin) + 1));

    int[] options = new int[4];
    choice = numberText + numberText2;
    answer = choice;
    options[0] = answer;
    options[3] = Min + (int)(Math.random() * ((Max - Min) + 1));
    radio.setText(String.valueOf(options[0]));
    choice1 = Min + (int)(Math.random() * ((Max - Min) + 1));

    radio1.setText(String.valueOf(options[1]));
    choice2  = Min + (int)(Math.random() * ((Max - Min) + 1));
    options[2] = choice2;
    radio2.setText(String.valueOf(options[2])); 
```

# android - 记录无法删除

> ID：11708494
> 
> 赞同：0
> 
> 时间：2012-07-29T10:27:18.067
> 
> 标签：android

我有一个 Adapter 类，我在其中创建了一个从表中删除记录的方法。在我的表中只有三个字段：id、status(bool) 和 num。在这种情况下，当我尝试使用带有 id 的触发查询删除记录时，我实现的删除如下：

```
public boolean deleteContact(long rowID){
  return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowID, null) > 0;
} 
```

但我想按数字删除记录，它是 sqlite 文本数据类型：

```
public void deleteFromNum(String num){
  db.delete(DATABASE_TABLE, KEY_NUM + "=" + "740-514-8806", null);
} 
```

以上方法无效。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:41:18.417

字符串应该包含在`''`

```
public void deleteFromNum(String num){
  db.delete(DATABASE_TABLE, KEY_NUM + "='" + "740-514-8806" + "'", null);
} 
```

# android - 在 Android 中安排闹钟的数组

> ID：11708496
> 
> 赞同：0
> 
> 时间：2012-07-29T10:27:25.627
> 
> 标签：android, android-intent

我正在做一个个人组织者。从日历中，用户可以选择日期，然后可以指定一个特定小时的日期。在这个日期和时间，应用程序应该显示另一个活动，即通知。用户一天只能做一个笔记。所以每个音符的pk是YYYYMMDD。

所以，我想知道我所做的是对还是错。我有一项以应用程序启动的服务。该`onStartCommand`服务检查当前日期数据库中是否有注释，如果有，他调用活动通知。我有一个可运行的线程，每分钟循环一次，它会更新服务的日期，因为日期`onStartCommand`是静态的。如果 runnable 获得的日期等于`onStartCommand`'s date 然后继续循环，否则我再次启动服务：

```
Intent myIntent = new Intent(Receiver.this, NotificaSuoneria.class);
startActivity(myIntent); 
```

这样我没有任何麻烦，但我想知道可运行线程是否可以被android杀死，因为如果被杀死我无法检查其他日子的警报。

而且，当我每次更新日期重新启动服务时，旧的可运行线程会被杀死还是会有很多线程？

PS我不使用`AlarmManager`for安排警报。如果 datenow 与警报有一些联系，我会计算剩下的时间并在这段时间内睡觉，然后我将启动通知活动。对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:43:47.870

您应该为此使用 AlarmManager 并使用如下循环`edited`

```
try {
            cntxt = createPackageContext("your.app.package",CONTEXT_IGNORE_SECURITY);
           } catch (NameNotFoundException e) {
              // handle exception here
              e.printStackTrace();
           }

Intent myIntent = new Intent(cntxt , yourreciever.class);
    PendingIntent pi;
    AlarmManager alarmManager;
        for(int i=0;i<=timesinday;i++)
        {
        pi=PendingIntent.getBroadcast(cntxt, i,myIntent, 0);

        alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
                                        alarmManager.set(AlarmManager.RTC_WAKEUP, currentcal.getTimeInMillis(),pi);

        } 
```

不要忘记在 Android Menifest 中添加 NotificaSuoneria 作为接收器。如果你想让闹钟每天响起，你应该使用

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,todaycal.getTimeInMillis(),AlarmManager.INTERVAL_DAY,pendingIntent); 
```

@Meesta我正在编辑你不必在这里提及活动的答案，`Intent myIntent = new Intent(Receiver.this, here.class);`这里将是接收者类，你可以从那里开始你的活动，另见[http://androidword.blogspot.in/2010/10/how-to-use- broadcast-receiver.html](http://androidword.blogspot.in/2010/10/how-to-use-broadcast-receiver.html)并尝试在从广播接收器启动活动时添加 flag_new_activity

# c# - COM 库初始化失败，C# 中的代码为 0x80010106

> ID：11708497
> 
> 赞同：9
> 
> 时间：2012-07-29T10:27:41.763
> 
> 标签：c#

我试图使用 c# 手动将数据推送到 NT，但出现错误：“无法初始化 COM 库（0x80010106）。” 我已经添加了参考'Ninjatrader.Client.dll' 我发布我的代码如下：

```
using System;
using System.Runtime.InteropServices;
using System.Threading; 
using System.Diagnostics;

namespace read_file
{
 public static class Program
 {
    [DllImport("NtDirect.dll", EntryPoint = "Connected", SetLastError = true)]
    public extern static int Connected(int showMessage);

    [DllImport("NtDirect.dll", SetLastError = true)]
    public static extern int Last(string instrument, double price, int size);

    public static void Main(string[] args)
    {
        NinjaTrader.Client.Client NTClient = new NinjaTrader.Client.Client();
        int ConnectStatus = Connected(1);

        NTClient.Command("PLACE", "Sim101", "ES 03-08", "BUY", 1, "LIMIT", 1245.00, 0,   "GTC", "ax1234", "", "", "");
        int k;
        for (int i = 0; i < 100; i++)
        {
            k = 10 * (i + 1);
            Last("AUDUSD", k, 4);
            for (int j = 0; j < 999999999; j++)
            {
            }
            Console.WriteLine(k);
                        }
        }
    }
 } 
```

请告诉我正确的建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-29T13:58:47.200

从 WinError.h SDK 头文件：

```
//
// MessageId: RPC_E_CHANGED_MODE
//
// MessageText:
//
// Cannot change thread mode after it is set.
//
#define RPC_E_CHANGED_MODE               _HRESULT_TYPEDEF_(0x80010106L) 
```

这是您正在使用的 DLL 中的一个错误。DLL 不应该在它*没有*创建的线程上调用 CoInitializeEx()。然而，这是一个相当常见的错误，您对此无能为力。但有一件事，您必须初始化线程的单元状态，使其与 DLL 所需的状态相匹配，这样 CoInitializeEx() 调用就不会失败。

*   如果您在程序的主线程上进行此调用，则更改 Main() 方法上的属性。使其成为 [STAThread] 或 [MTAThread]，这取决于使 DLL 满意的原因。请注意，这可能对您的程序有害，如果您的程序创建任何窗口或使用任何其他需要 STA 的 COM 对象，则必须使用 [STAThread]。

*   如果在创建的线程上进行此调用，则在启动线程之前调用线程的 SetApartmentState() 方法。

*   如果您从线程池线程（例如由 BackgroundWorker 或 Task、委托的 BeginInvoke 方法或 QueueUserWorkItem() 方法创建的线程池线程）进行此调用，则您无法更改单元类型，它始终是 MTA。您将不得不创建一个线程，请参阅上一个项目符号。

还要注意公寓的要求。如果 DLL 只对 STA 满意（可能），那么您必须使用 Application.Run() 泵送消息循环。不这样做会导致死锁或组件内部的代码无法运行，这可能很难诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T11:56:53.060

将属性设置`[STAThread]`为您的类`Program`。

*据我了解，每当您需要在STA（单线程单元）*上运行的 COM 对象时，您都需要`STAThreadAttribute`为您的程序指定。

您可以*[从此处了解有关 STAThreadAttribute 的更多信息](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)*...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:07:42.967

这可能有很多原因。
所有这些都与 COM 工厂无法创建您的对象这一事实有关。

我有一种情况，我启动一个程序并捕获相同的异常，如果它有以下之一：

1.  许可证验证失败
2.  弹出数据库备份通知，延迟了程序的加载。
3.  Windows Server 2008R2 由于权限错误而阻止应用程序显示其主窗口

我暗示的是：检查是什么阻止了 NinjaTrader 加载...
尝试检查事件日志或应用程序注销...

可能是权限问题等

# audio - 对编程语言的音频支持

> ID：11708500
> 
> 赞同：0
> 
> 时间：2012-07-29T10:27:51.913
> 
> 标签：audio, programming-languages

我想开始一个爱好项目，专注于以某种方式显示文件夹中的音频文件，并且能够播放这样的音频文件并显示播放的基本控制选项。但是，我正在努力为此寻找合适的编程语言。

显示**部分**不应该太难，并且可以在大多数编程语言中完成。**音频部分**是我最关心的，因为它不是项目的主要重点，应该只做有限的事情（所以它不应该太难）而且我对我目前知道的编程语言中的声音支持一无所知. （Java、C 和 C++）

具体来说，我希望能够做这些事情：

1.  *播放*声音文件
2.  *停止/暂停*正在播放的歌曲
3.  调节*音量*
4.  显示一个显示歌曲中*当前位置的栏*

大多数文件将是**.mp3**文件，但能够处理其他格式当然是一个加分项。因为这只是一个小项目，所以如果它只在**Windows**上运行就可以了。可扩展性会很好，但不是必需的。

如果能够以不太复杂的方式完成这些简单的事情以及个人经验，那么对编程语言的音频支持/音频库有一个小的概述（我总是喜欢新的东西）会很好。

通过这种方式，我希望更好地了解哪种编程语言最适合我的项目。（我非常希望不必在项目中途更改语言）

--

**编辑**：如果第一部分成功，这仅适用于项目的后期阶段：我将要更改显示的音频文件的文件名。（使它们遵循特定的格式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:20:13.213

我写的音频处理程序不多，但我知道其中有很多是用于 C 和 C++ 的。也许对于 Java 也是如此，但我不知道 Java。我曾在游戏中使用[SDL](http://www.libsdl.org/)音频，但它没有那么多功能，我不推荐它。

有[这个问题](https://stackoverflow.com/q/1042752/912144)要求使用 C 语言库，并且 SO 提出了一些类似的问题。你可能想看看那些。

您还需要寻找加载不同文件类型的库。至少 SDL 只打开`.wav`文件，我相信大多数播放库都会支持。对于 MP3，您很可能需要一个额外的库。我知道[Audacity](http://audacity.sourceforge.net/)使用[LAME Mp3](http://lame.sourceforge.net/)，所以我猜这应该不错。

您想要的一些功能也可以自己完成。例如，知道音乐的长度和你已经阅读的数量，你就会知道你在音频中的距离。调整音量也是一种乘法（在最简单的情况下），如果库不提供，您可以对音频数据执行此操作。

[Audacity 使用的](http://www.portaudio.com/apps.html)[PortAudio](http://www.portaudio.com/)似乎是一个非常好的选择，并且在我上面提到的问题的公认答案中也推荐了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T23:10:34.603

我已经用 Java 和 C++ 完成了音频应用程序。Java 开发速度更快，因为它是一种更强大的语言并且具有垃圾收集功能，但 JavaSound 是一个非常糟糕的音频解决方案。当然，还有 FFMPEG 和其他东西的包装器，所以你可以让很多东西正常工作。这是一个 Java 音频应用程序的示例：http: [//www.indabamusic.com/help/mantis](http://www.indabamusic.com/help/mantis)

OTOH，C++ 为您提供大量控制、低延迟和丰富的库。（另一个答案提到了 Portaudio，它确实很棒。）但是您肯定会发现它还有更长的开发周期。

你当然可以用任何一种语言做任何你想做的事情。

# python - shell退出时需要捕获什么样的信号

> ID：11708502
> 
> 赞同：1
> 
> 时间：2012-07-29T10:28:27.380
> 
> 标签：python

我有一个 python 程序，当 shell 意外退出时需要清理一些东西，必须捕获什么样的信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:45:01.587

使用[信号](http://docs.python.org/library/signal.html)模块为特定信号添加处理程序。例如 SIGINT 和 SIGTERM：

```
import signal
def handler(signum, frame):
    print('Caught signal %d' % signum)
    # Now do something (clean-up?) ...
signal.signal(signal.SIGINT, handler)
signal.signal(signal.SIGTERM, handler)

input() # Example to keep the program running 
```

# android - 用户或当前进程都没有 android.permission.BLUETOOTH

> ID：11708503
> 
> 赞同：4
> 
> 时间：2012-07-29T10:28:28.487
> 
> 标签：android, adt

我有一个简单的应用程序，到目前为止只是打开/关闭蓝牙，当我在模拟器或 nexus 7 上运行它时，它说我的应用程序已停止响应，然后在启动时自行关闭。我尝试添加一个 onStart() 方法，因为它在类似的问题中解决了这个问题，添加了获得用户许可的意图并将各种事物切换到不同的方法，但是仍然崩溃。

Logcat 有以下消息：

```
07-29 01:05:41.541: E/AndroidRuntime(9745): FATAL EXCEPTION: main
07-29 01:05:41.541: E/AndroidRuntime(9745): java.lang.RuntimeException: Unable to start activity ComponentInfo{mypackagename/mmypackagename.MainActivity}: java.lang.SecurityException: Need BLUETOOTH permission: Neither user 10067 nor current process has android.permission.BLUETOOTH. 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mypackagename"
    android:versionCode="1"
    android:versionName="1.0" >

        <uses-feature android:name="android.hardware.bluetooth" android:required="true" />
        <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
        <uses-permission android:name="android.permission.BlUETOOTH"/>
        <uses-sdk
            android:minSdkVersion="5"
            android:targetSdkVersion="16" />

        <application
            android:icon="@drawable/homeiconsmall"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" 
                android:launchMode="singleTask" 
                android:alwaysRetainTaskState="true">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T10:32:46.130

您在清单 ( `BlUE`!= `BLUE`) 中拼错了权限：

```
<uses-permission android:name="android.permission.BlUETOOTH"/> 
```

# restsharp - 将 JSON 对象反序列化为包含列表的 C# 对象

> ID：11708505
> 
> 赞同：0
> 
> 时间：2012-07-29T10:28:30.453
> 
> 标签：restsharp

我如何使用 Rest Sharp 反序列化，但我不知道如何构建正确的类

JSON：

> ```
>  {
>       "LIST_ID":34468,
>       "CREATED_PERSONAL_FIELDS":[],
>       "EXISTING_PERSONAL_FIELD_NAMES":[ ["41028","Test1"] , ["41029","Test2"] ]
>     } 
> ```

我试过这门课：

```
 public class PersonalFieldsAddResponse
    {
        public string LIST_ID { get; set; }
        public List<List<string>> SUBSCRIBERS_CREATED { get; set; }
        public List<List<string>> BAD_PERSONAL_FIELDS { get; set; }
    } 
```

和这个：

```
 public class PersonalFieldsAddResponse
    {
        public string LIST_ID { get; set; }
        public List<string> SUBSCRIBERS_CREATED { get; set; }
        public List<string> BAD_PERSONAL_FIELDS { get; set; }
    } 
```

反序列化确实让我得到了 LIST_ID，但我总是在 SUBSCRIBERS_CREATED 和 BAD_PERSONAL_FIELDS 处得到 NULL。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:41:16.800

大声笑，它需要是：

```
 public class PersonalFieldsAddResponse
    {
        public string LIST_ID { get; set; }
        public List<List<string>> CREATED_PERSONAL_FIELDS { get; set; }
        public List<List<string>> EXISTING_PERSONAL_FIELD_NAMES { get; set; }
    } 
```

# javascript - 无法摆脱backbone.js 视图的外部div

> ID：11708507
> 
> 赞同：3
> 
> 时间：2012-07-29T10:29:06.647
> 
> 标签：javascript, backbone.js

我正在使用 Backbone 0.9.2，并且我有一个使用 twitter 引导程序的小胡子模板，看起来像这样：

```
<div class="modal hide something" id="something-modal">
...
</div> 
```

我试图摆脱`<div>`主干添加的额外内容，因为我希望视图是 1 对 1 作为我的模板。我的渲染函数看起来像：

```
render: function(){

    var $content = $(this.template()),
          existing_spots = $content.find('.spots-list'),
          new_spot;

      this.collection.each(function (spot) {
          new_sweetspot = new SpotView({ model: spot });
          existing_spots.append(new_spot.render().el);
      });

      $content.find("[rel=tooltip]").tooltip();
      this.setElementsBindings($content);
      //this.$el.html($content).unwrap('div'); // didn't work!
      this.$el.html($content);
      console.log(this.$el); 
      return this;
    } 
```

我知道通过添加：

```
tagName: "div",
className: "modal", 
```

我会摆脱它，但我希望视图元素的控制属于模板，而不是 JS 代码。

`this.SetElement`将导致列表不更新（它将为空），`this.$el = $content;`也不会工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:52:08.713

上周在 SO 上有一个很好的话题。

[主干，而不是“this.el”包装](https://stackoverflow.com/questions/11594961/backbone-not-this-el-wrapping/11598543#11598543)

tl; dr您可以使用`setElement`，但您确实需要知道主干中何时发生事情，以确保一切都正确连接。

# encoding - mysql中的十六进制编码/解码函数

> ID：11708509
> 
> 赞同：0
> 
> 时间：2012-07-29T10:29:30.983
> 
> 标签：encoding

mysql 是否会识别任何十六进制编码/解码函数以避免写出整个算法。base16_encode/decode 不起作用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:33:05.213

MySQL 理解十六进制文字

> MySQL 支持使用 X'val'、x'val' 或 0xval 格式编写的十六进制值，其中 val 包含十六进制数字（0..9，A..F）。数字的字母大小写无关紧要。对于使用 X'val' 或 x'val' 格式写入的值，val 必须包含偶数位数。对于使用 0xval 语法编写的值，包含奇数位数的值被视为具有额外的前导 0。例如，0x0a 和 0xaaa 被解释为 0x0a 和 0x0aaa。

[http://dev.mysql.com/doc/refman/5.0/en/hexadecimal-literals.html](http://dev.mysql.com/doc/refman/5.0/en/hexadecimal-literals.html)

# python - QtGui.QTabWidget PySide 内的布局

> ID：11708514
> 
> 赞同：0
> 
> 时间：2012-07-29T10:30:20.880
> 
> 标签：python, qt, layout, pyqt, pyside

如何在 a 中添加布局而不是小部件`QtGui.QTabWidget`？像这样的东西：

```
 tabs = QtGui.QTabWidget()
    tabs.addTab(QtGui.QVBoxLayout(), "Layout") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:35:03.743

您不会将布局添加到选项卡小部件，而是添加小部件。

这里最简单的选择是 a [`QFrame`](http://qt-project.org/doc/qt-4.8/qframe.html)（甚至是 plain `QWidget`），你可以设置你想要的任何布局。

# database - 如何使用 shell 脚本将记录插入到 oracle 表中？

> ID：11708521
> 
> 赞同：-1
> 
> 时间：2012-07-29T10:31:16.580
> 
> 标签：database, oracle, shell

我想使用 shell 脚本将记录插入到 Oracle 表中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T21:20:03.663

您可以为此使用[SQL*Plus](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)：

```
sqlplus user/password@database <<EOF
INSERT INTO EMPLOYEE...
EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-12T15:14:07.387

您有多种方法可以从 unix 命令提示符在 oracle 数据库中插入数据。

1）从命令提示符

```
[oracle@OLE1]$ echo "insert into EMP values (7001,'TESTUSER','CLERK',7902,sysdate,2500,800,10);"|sqlplus -s scott/tiger;

auto COMMIT upon EXIT. 
```

2) 从 shell 脚本

```
vi insert_stm.sh

    echo "Insert Data into EMP table of scott."
    sqlplus -s /nolog<<-EOF
    conn scott/tiger;
    set heading on feedback on;
    insert into EMP values (7001,'TESTUSER','CLERK',7902,sysdate,2500,800,10);
    commit; 
    EOF

    echo "Insert Done."
:wq

[oracle@OLE1 Desktop]$ sh insert_stm.sh
Insert Data into EMP table of scott.

1 row created.

Commit complete.

Insert done.
[oracle@OLE1 Desktop]$ 
```

注意：如果您使用远程数据库，请使用“@”符号，如：

sqlplus -s scott/tiger@stringname;

conn scott/tiger@stringname;

# javascript - 使用 javascript api 以编程方式登录 Linkedin

> ID：11708529
> 
> 赞同：0
> 
> 时间：2012-07-29T10:32:48.190
> 
> 标签：javascript, linkedin

我有一个个人博客，我想用我的 Linkedin 数据填充“关于我”部分。

使用我自己的凭据以编程方式登录 Linkedin 并提供数据的最佳方式是什么？

我不希望访问者必须登录到linkedin 才能看到“我的”linkedin 数据。

关于最佳方法的任何想法？

这是我的代码的开始，我刚刚开始并了解流程。

```
(function($, window) {
"use strict";

var Linkedin = {
    Config: {
        API_KEY: "API_KEY",
        SECRET_KEY: "SECRET_KEY",
        URL: "http://www.hanger-designs.co.uk:8888/wemustcreate/",
        END_POINT: "http://platform.linkedin.com/in.js"
    },
    initalise: function() {
        this.insertScript(this.returnedFunc, this.Config.END_POINT);
    },
    insertScript: function(callback, endPoint) {
        var code = "api_key:" + this.Config.API_KEY + "\n" + 
                   "onLoad:" + callback + "\n" +
                   "authorize: true"
        var scriptElement = document.createElement('script');
        scriptElement.text = code;
        scriptElement.type = 'text/javascript';
        scriptElement.src = this.Config.END_POINT;

        document.body.appendChild(scriptElement);
    },
    returnedFunc: function() {
        console.log('callback', arguments);
    }

}

Linkedin.initalise();

})(jQuery, window); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:43:43.770

为此，您需要使用 OAuth 进行授权。你的博客可以做这个授权（PHP/Perl/whatnot），但客户端不能（JavaScript）。

原因如下：

*   您正在共享密钥，它可以允许任何人访问
*   您需要将状态存储在某处（令牌）。您不应将其存储在客户端上。您需要一个服务器才能保存令牌。

# java - 使用 DefaultListModel 从 JList 中删除元素时出错

> ID：11708531
> 
> 赞同：3
> 
> 时间：2012-07-29T10:34:01.167
> 
> 标签：java, swing

我有一个`JList`在程序运行时会更改的标准。为了让生活更轻松，我创建了一个`DefaultListModel`并将其分配给`JList`：

```
JList CharList = new JList();
DefaultListModel CharListModel = new DefaultListModel();

CharList.setModel(CharListModel); 
```

我可以将文件加载到列表中，稍后我可以将项目添加到列表中，如下所示：

```
File ChFile = new File (CharListFile);
FileReader freeder = new FileReader (ChFile);
BufferedReader breeder = new BufferedReader(freeder);
String line;
while((line=breeder.readLine())!=null)
{
int pos = CharList.getModel().getSize();
CharListModel.add(pos, line);
}
...
...
//and to add items..
int pos = CharList.getModel().getSize();
CharListModel.add(pos, NewCharName); 
```

但是，我需要能够从列表中删除项目，这给我带来了相当大的麻烦！

我尝试了最明显的方法（是的，选择了一个项目，并且我已经检索了该索引处的索引和字符串）：

```
CharListModel.removeElement(CharList.getSelectedValue()); 
```

但是，这给了我一个“ *java.lang.ArrayIndexOutOfBoundsException: -1* ”错误。

我已经尝试了您可以在下面的代码中看到的所有排列（有些已被注释掉，但您明白了）：

```
DefaultListModel model = (DefaultListModel) CharList.getModel();//CharListModel;
int selectedIndex = CharList.getSelectedIndex();
if (selectedIndex != -1) {
    //model.remove(selectedIndex);
    //model.removeElement(CharList.getSelectedValue());
    //model.removeElementAt(selectedIndex);
} 
```

以及其他一些排列：

```
CharListModel.removeElementAt(CharList.getSelectedIndex());
//or
CharListModel.remove(CharList.getSelectedIndex());
//or
CharList.remove(SelItemIndex); 
```

在每种情况下，我都会收到相同的“ *ArrayIndexOutOfBoundsException* ”错误，即使先前找到了选定的索引也没有问题。是的，我知道我刚才说的是“以前”，所以有些事情可能会改变事情，但这是在我尝试删除元素之前直接运行的代码：

```
int SelItemIndex = CharList.getSelectedIndex();
if(SelItemIndex == -1)
{
    JOptionPane.showMessageDialog(null, "You have to select something!");
    return;
}
String SelItem = CharList.getModel().getElementAt(SelItemIndex).toString();
//Create warning
final JComponent[] inputs = new JComponent[]
{
    new JLabel("<html>Bla Bla " + SelItem + " Are you sure?</html>")
};
int n = JOptionPane.showConfirmDialog( null, inputs,"Deletion Confirmation Warning", JOptionPane.YES_NO_OPTION);
if( n == 1)
{
    //Do not delete
    return;
} 
```

这就是在尝试删除所选元素之前的全部内容。

对于我的生活，我不知道为什么这不起作用！我在这里错过了一些非常愚蠢的东西吗？

# 令人困惑的更新

如果我使用了这段代码 - 代码中的注释解释了为什么这会如此令人困惑！`ActionPerformed`：`JButton`

```
DefaultListModel CharListModel = (DefaultListModel)CharList.getModel();
if( CharListModel.contains(CharList.getSelectedValue()) == true)
{
    //Selected item is found
    int selItemIndex = CharListModel.indexOf(CharList.getSelectedValue());
    if(selItemIndex != -1)
    {
        //Selected item index is NOT -1 and is correct
        CharListModel.remove(selItemIndex);
        //Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1
    }
    else
    {
        //NEVER reached
        JOptionPane.showMessageDialog(null, "OUCH!");
    }
} 
```

如您所见，所选项目的索引直到删除它为止都是正确的，因此我再次遇到超出范围的异常。我也在同一个地方尝试过，但结果相同：

```
CharListModel.removeElement(CharList.getSelectedValue()); 
```

# 更混乱

为了弄清楚发生了什么，我创建了一个新的`DefaultListModel`，枚举旧的，并将每个名称放入新模型中，除了我要删除的那个（记住我可以获得索引、对象和文本，我只是不能删除它）。

这已经奏效了，我现在有一个`DefaultListModel`正确的项目，但是，当我尝试的那一刻，我`CharList.setModel(NewModel);`再次得到了越界异常。

这让我拔了头发！任何人都可以提供任何想法尝试吗？

# 各种各样的决议

根本不是一个真正的解决方案，但为了解决这个令人抓狂的问题，我使用了上面列出的方法，我创建了列表模型的副本，减去我想要删除的项目，然后在使用时简单地捕获异常`setModel`，因为更新的列表模型被添加到列表中就好了，并且后续操作（例如添加项目等）工作正常，直到我再次尝试再次删除项目！

感谢您尝试提供帮助 - 如果您对如何解决此问题有任何想法，请务必发帖！

问候

最大限度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:57:49.313

作为参考，我在此[示例](https://stackoverflow.com/a/5760093/230513)中添加了以下代码。如果它没有帮助，它可能是更新您的问题的有用[sscce](http://sscce.org/)。

```
panel.add(new JButton(new AbstractAction("Remove") {

    @Override
    public void actionPerformed(ActionEvent e) {
        int index = list.getSelectedIndex();
        if (index != -1) {
            model.remove(index);
        }
    }
})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-22T02:17:02.533

我有一个类似的问题。事实证明，错误不是源于删除元素，而是显示列表。实施时

```
public void valueChanged(ListSelectionEvent e) 
```

方法会更新屏幕上的列表，请确保在设置值之前检查模型是否为空。这就是在我的情况下导致异常的原因。

创建一个列表，从那里删除，然后用列表更新模型也是一种可用的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T13:57:15.587

我遇到了同样的问题。似乎当从模型中删除项目时，它也会从数组中删除。因此会弄乱数组索引。

作为一种解决方法，我将数组内容移动到一个列表中，并从模​​型中删除列表内容。现在它对我来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T16:54:10.893

我有同样的问题，我解决了这个问题：

**按钮动作**

```
int index = mylist.getSelectedIndex();
MyObject = (MyObject) mylist.getSelectedValue();
int Size = mylistmodel.getSize(); 
if (index >= 0 && MyObject != null && Size > 0) {
    modeloLista.removeElementAt(indice);
} 
```

和。

**列表值已更改**

```
if (list.getSelectedValue() != null) {
    your code..
} 
```

# jquery - Jquery Menu 鼠标悬停不工作

> ID：11708533
> 
> 赞同：0
> 
> 时间：2012-07-29T10:34:38.513
> 
> 标签：jquery, jquery-selectors, menu, onmouseover, onmouseout

您好我正在尝试使用 jquery 实现一个简单的菜单，但没有运气。
请查看这个小提琴。在此先感谢
[http://jsfiddle.net/Gg3cR/12/](http://jsfiddle.net/Gg3cR/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:37:28.140

而不是可见性：隐藏；你需要显示：无；开始

这里是更新的小提琴：http: [//jsfiddle.net/Gg3cR/13/](http://jsfiddle.net/Gg3cR/13/)

编辑：从长远来看，将列表保存在 div 中并在鼠标悬停时显示/隐藏 div 可能会更好

这是显示两者之间区别的链接：http: [//www.w3schools.com/css/css_display_visibility.asp](http://www.w3schools.com/css/css_display_visibility.asp)

如果你还想使用可见性，你可以使用 .css('visibility', visibilityState)

# android - Android：R.java 类中的错误

> ID：11708539
> 
> 赞同：3
> 
> 时间：2012-07-29T10:36:14.767
> 
> 标签：android, android-layout

我有一个奇怪的错误，我无法在我的 android 应用程序的类 R.java 中解决

错误在以下行

```
 public static final class string {

            public static final int =0x7f05002f; 
```

因为它之后没有变量`int`

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T10:38:34.737

`R.java`是自动生成的，不能手动编辑。

如果您遇到问题，请删除`R.java`并重建您的项目，它将根据您的布局再次生成。

如果问题仍然存在，请查看您的 xml 文件 ( `strings.xml, layout.xml, etc`) 是否有任何错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T10:54:04.087

检查您的**strings.xml**文件。似乎您已经保存了一些值而没有为其分配任何名称。

**查找没有任何`name`属性的条目。**之类的东西`<string>8</string>`，要么删除它，要么为它分配一个名称属性`<string name="anyname">8</string>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T10:53:00.860

一个糟糕的 R.java 将意味着其他地方的错误。如果删除它并重建 projetc 不能解决它，请查看您的清单和其他 xml 资源是否有错误。

# php - 如何检查是否有任何变量通过 URL 传递？

> ID：11708546
> 
> 赞同：-3
> 
> 时间：2012-07-29T10:38:05.733
> 
> 标签：php

我想将变量 ( `foo=bar`) 传递给 URL。
如果 URL 已经有一个变量，那么`foo`应该用`&`和附加到当前 URL `foo=bar`。
但是如果地址栏没有任何变量，那么当前 URL 应该附加`?`和`foo=bar`

那么如何检查当前 URL 中是否存在任何变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:39:32.740

在 URL 中传递的变量称为`GET`参数。您可以使用`$_GET`数组通过 PHP 检索它们。

给定网址 -`http://mycoolsite.com?foo=bar&stack=overflow`

做一个`print_r()`on`$_GET`会给你 -

```
Array ( 
  [foo] => bar 
  [stack] => overflow 
) 
```

`in_array()`一旦你有了这个数组，你就可以使用这个函数来测试某个变量的存在。

```
if (in_array('foo',$_GET)){
  // the foo variable is was passed
} 
```

或者，您可以简单地迭代您传递的所有参数并以这种方式检查 -

```
foreach($_GET AS $key=>$value){
  // $key = the name of the variable
  // $value = the value of the variable
} 
```

* * *

资源

*   `$_GET`- [http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)
*   `in_array()`- [http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T15:51:33.617

正确的方法是：

```
$url = 'http'.(empty($_SERVER['HTTPS'])?'':'s').'://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
    if(strpos($url, "?") !== FALSE){
            $url .= "&var=foo&stack=overflow"; 
}else{

 $url .= "?var=foo&stack=overflow"; 
}

header("Location: ".$url); 
exit(); 
```

strpos 颠倒顺序 ;) 这是一个例子：

```
$mystring = 'abc'; 
$findme   = 'a'; 
$pos = strpos($mystring, $findme); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:19:09.710

我想您想将 var=foo 和 stack=overflow 变量传递给当前 URL。换句话说，您希望将用户重定向到当前地址 + 您的新变量。你可以试试这个：

```
$url = 'http'.(empty($_SERVER['HTTPS'])?'':'s').'://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
if(strpos("?", $url) !== FALSE){
    $url .= "&var=foo&stack=overflow";
}else{
    $url .= "?var=foo&stack=overflow";
}

header("Location: ".$url);
exit(); 
```

它获取当前的 URL，检查它是否已经有一个`?`。如果是，它会在`var`& 堆栈上附加 a `&`，否则附加 a`?`并`&`相应地附加。

# extjs - 在开发和生产中将 Ext JS 4.1 MVC 应用程序集成到重写的 URL (mod_rewrite) 中

> ID：11708549
> 
> 赞同：5
> 
> 时间：2012-07-29T10:38:59.087
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

根据 Sencha 的[MVC 应用程序架构指南](http://docs.sencha.com/ext-js/4-1/#/guide/application_architecture)中的文件结构部分创建一个新的 Ext JS 4.1.1 应用程序我最终得到了这个结构：

```
/wwwroot
    /myapplication
        /app
            /controller
            /view
        app.js
    /extjs-4.1.1 
```

app.js 文件包含：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    appFolder: '/myapplication/app',
    autoCreateViewport: true,
    name: 'MyApplication',
    controllers: [
        ...
    ]
}); 
```

一切都好。然后我将 app.js 包含在我的**服务器端**MVC 应用程序中输出（不要与**客户端**Ext JS MVC 结构混淆）。服务器端应用程序使用的语言和结构对于这个问题并不重要，但输出的结果才是。在开发中，应用程序的 URL 为：

```
http://servername/someidentifier1/someidentifier2 
```

与许多应用程序一样，mod_rewrite 用于赋予标识符以意义并将 URL 映射到服务器端代码。这些标识符**不**映射到“物理”目录。这个 URL 的输出是：

```
<!DOCTYPE html>
<html>
<head>
<title>MyApplication</title>
<link href="/extjs-4.1.1/resources/css/ext-all-debug.css" media="screen" rel="stylesheet" type="text/css" >
<script type="text/javascript" src="/extjs-4.1.1/ext-debug.js"></script>
<script type="text/javascript" src="/myapplication/app.js"></script>
</head>
<body>
</body>
</html> 
```

Ext JS 不在默认推荐位置，即 /wwwroot/myapplication/extjs-4.1.1，而是上一级，因为它在多个应用程序之间共享。如果您回头查看上面的 app.js，您还会注意到需要设置 appFolder 设置才能使其与“不存在”的 URL 一起使用。

这一切在开发中都可以正常工作，但下一步是使用[Sencha SDK 工具](http://www.sencha.com/products/sdk-tools/)生成代码的“构建” （问题基于 Windows 的 2.0.0 Beta 3 版本）。这就是它出错的地方。我采取以下步骤：

1.  命令行我进入 /wwwroot/myapplication 目录。
2.  我执行`sencha create jsb -a http://servername/someidentifier1/someidentifier2 -p myapplication.jsb3`生成一个 jsb3 文件。
3.  我执行`sencha build -p myapplication.jsb3 -d .`

构建失败。在这种情况下，因为它试图在路径 c:\...\myapplication\myapplication\app\controller 中找到例如控制器的自定义代码：当前路径 + appFolder 设置。您会假设运行它更高一级会更好，但是它找不到（共享）extjs-4.1.1 目录。

我猜想时间会让 Ext JS MVC 结构和 SDK Tools 更加灵活，不推荐稍微偏离默认结构。都可以接受，但另一方面：将 Ext JS 4.x（以 MVC 方式的 Ext JS）与 URL 重写（mod_rewrite）集成也必须是一种非常普遍的做法吗？

任何建议的工作设置/结构都将受到高度赞赏。

目标应该是：

*   无需手动编辑 jsb3 文件。
*   将 extjs-4.1.1 目录保持在顶层以在应用程序之间共享。
*   没有 app.html 文件，因为它从未在服务器端 MVC 应用程序中使用，否则需要手动更新。
*   一个不错的附加功能是将 app.js 的内容包含在服务器端生成的 HTML 中，因为这样它就能够接收动态生成的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:13:35.850

夫妇的事情。

首先 - 您不需要在加载器中为 ExtJs 库和您的应用程序指定绝对路径。

```
...
appFolder: 'app' // should be enough
... 
```

其次 - 至于构建和生产之间的差异 - 我最终有两个 .html 文件 - index.html 和 index-dev.html。这些文件不会被更改（一旦您设置它们），因此保持它们同步不是问题。

您使用 index-dev.html 来满足您的开发需求、调试以及构建过程。基本上这个文件是为你的本地开发环境配置的。

index.html 仅使用您的 app.js 的组合和缩小版本，并配置用于生产部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:59:27.163

使用 mod rewrite，您可以使用 Symfony 中稍作修改的 .htaccess 文件

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    #<IfModule mod_vhost_alias.c>
    #    RewriteBase /
    #</IfModule>

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

这个文件让你

*   如果它们是真实文件（css、js、图像等），则从服务器获取资源
*   如果服务器文件系统上没有匹配项，则将 url 部分转换为查询参数。

这应该适用于您的设置，只需将 app.php 行更改为您的应用程序入口点

对于目录设置，你的很好，只是几件事：

*   您的 SDK 工具已过时，因为您可以下载： [http](http://www.sencha.com/products/sencha-cmd/download/) ://www.sencha.com/products/sencha-cmd/download/ (v3.0.0)

*   按照[http://docs.sencha.com/ext-js/4-1/#!/guide/command](http://docs.sencha.com/ext-js/4-1/#!/guide/command)上的文档，您可以使用所需的类获得“构建”，但最后还是您手动在开发之间切换/ 生产 javascript 文件，或者您在代码中使用环境变量进行切换。

*   实际上，我认为您可以在构建目录中使用“假” index.html 来通过构建工具进行修改，然后在生产代码中您可以模仿 sencha build 生成的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T01:44:01.190

创建一个 index.html 文件来生成项目文件将是一种方法。我还发现 sencha 架构师非常死板且难以使用。最烦的是我无法使用外部编辑器来编辑生成的代码。一切都必须在设计器中完成，如果设计器能够提供我需要的所有功能，那就很好了。但它不能。

# c# - XML 命名空间“clr-namespace:XXX”中不存在标签“Bootstrapper”

> ID：11708550
> 
> 赞同：4
> 
> 时间：2012-07-29T10:39:00.947
> 
> 标签：c#, windows-phone, caliburn.micro

我得到了以下 app.xml：

```
<Application 
    x:Class="WeDoneIt.WP2.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WeDoneIt.WP2"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone">

    <Application.Resources>
        <local:Bootstrapper x:Key="bootstrapper" />
    </Application.Resources>
</Application> 
```

和引导程序：

```
namespace WeDoneIt.WP2
{
    public class Bootstrapper : Caliburn.Micro.Autofac.AutofacBootstrapper
    {
        public Bootstrapper()
        {
            Instance = this;
        }

        protected static Bootstrapper Instance { get; private set; }

        protected override void ConfigureContainer(ContainerBuilder builder)
        {
            builder.RegisterType<ShellViewModel>();
            builder.RegisterType<ItemViewModel>();

            base.ConfigureContainer(builder);
        }

        public static T ResolveModel<T>() where T : INotifyPropertyChangedEx
        {
            return (T)Instance.GetInstance(typeof (T), null);
        }
    }
} 
```

为什么找不到呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T07:18:56.603

您的问题是由`Caliburn.Micro.Autofac`包裹引起的。它声明它需要`Autofac (>= 2.6.1.841)`，因此 Nuget 将下载满足当前`Autofac (2.6.3.862)`. 但是该`Caliburn.Micro.Autofac`程序集是针对 Autofac 版本构建的，`2.6.1.841`因此它不会找到所需的 Autofac dll，并且由于这个神秘的异常而导致构建失败。

解决方法：删除所有 Autofac 和 Caliburn 相关的软件包，并按以下方式安装它们：

```
PM> Install-Package Caliburn.Micro
Successfully installed 'Caliburn.Micro 1.3.1'.

PM> Install-Package Autofac -Version 2.6.1.841
Successfully installed 'Autofac 2.6.1.841'.

PM> Install-Package Caliburn.Micro.Autofac -IgnoreDependencies
Successfully installed 'Caliburn.Micro.Autofac 1.4.1'. 
```

我是怎么想出来的：我创建了一个 repro 项目并安装了`Caliburn.Micro.Autofac`复制你的代码的包，我看到了错误消息。然后，我删除了 app.xaml 的引导程序 init，并`var bootstrapper = new Bootstrapper();`在后面代码的 App 构造函数中添加了一行。然后我在VS中打开了所有异常复选框的中断，并且我有一个与内部异常`TargetInvocationException`有关的行`new Bootstrapper()`：无法加载Autofac dll版本...。

# java - 我需要让所有类不可变吗？

> ID：11708552
> 
> 赞同：4
> 
> 时间：2012-07-29T10:39:25.063
> 
> 标签：java, immutability, effective-java

我读了 Effective Java，并写了

> 如果一个类不能成为不可变的，则尽可能限制它的可变性......

和

> ...使每个字段都成为最终的，除非有令人信服的理由使它成为非最终的。

所以我需要让我所有的 POJO（例如简单的`Book`类`ID`，`Title`和`Author`字段）类不可变吗？当我想改变我的对象的状态时（例如用户在代表许多书籍的表中改变它），而不是设置器使用这样的方法：

```
public Book changeAuthor(String author) {
   return new Book(this.id, this.title, author);  //Book constructor is private
} 
```

但我的东西真的不是好主意..

请解释一下何时使类不可变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T10:45:54.267

不，你不需要总是让你的 POJO 不可变。就像你说的，有时这可能是个坏主意。如果您的对象具有随时间变化的属性，那么 setter 是最舒适的方法。

但是你应该考虑让你的对象不可变。它将帮助您发现错误、更清晰地编程和处理并发。

但我认为您引用的内容说明了一切：

> 如果一个类不能成为不可变的，则尽可能限制它的可变性......

和

> ...使每个字段都成为最终的，除非有令人信服的理由使它成为非最终的。

这就是你应该做的。除非这是不可能的，因为你有一个二传手。但是请注意并发性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:50:57.887

**1.** A`POJO`是一个有`private Instance Variables`with`Getter`和`Setter` **methods 的。**

**2.**像`String class`一直需要一个**常量** `behavior/implementation`的类**必须是 final**的，而不是需要随时间变化的。

**3.**为了使一个**类不可变，final 不仅是解决方案**，One can have `private Instance variables`, with only `Getter methods`。并且**他们的状态被设置为** `Constructor`.

**4.**现在根据您的编码决定，尝试纠正哪些**字段需要在整个程序中保持不变**，如果您觉得某些字段需要`immutable`，请将它们定为最终。

**5\. JVM**使用一种称为**常量折叠**的机制来**预先计算**常量值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:55:07.800

在 OOP 世界中，我们有**state**。说明它是您对象中的所有属性。当您更改对象状态时返回新对象保证您的应用程序将在并发环境中正常工作，而无需特定事物（同步、锁定、原子等）。但是你**总是**创建新对象。

假设您的对象包含 100 个属性，或者是具有 100 个元素的真实集合。要遵循不变性的想法，您还需要复制此集合。这是很大的内存开销，也许它是由 GC 处理的。在大多数情况下，最好手动处理对象的状态，而不是使对象不可变。在某些困难的情况下，如果并发问题非常困难，最好返回副本。这取决于任务。没有银弹。

# extjs - mapPanel topToolbar 功能不起作用

> ID：11708555
> 
> 赞同：1
> 
> 时间：2012-07-29T10:39:32.880
> 
> 标签：extjs

我在我的应用程序中使用带有 ExtJs3.4 的 geoExt！我创建了一个 mapPanel 并使用以下代码将 openlayers 地图添加到其中。

```
var mapPanel = new GeoExt.MapPanel({
        renderTo: 'gxmap',
        height: 500,
        width: 800,
        map: map,
        title: 'Map'
    }); 
```

之后我创建了 extjs 切换按钮

```
var button = new Ext.Button({
text: 'Measure Things',
enableToggle: true,
handler: function(toggled){
    if (toggled) {
        polygon.activate();
    } else {
        polygon.deactivate();
    }
}
}); 
```

当我想将此按钮添加到地图面板时，我得到 mapPanel 的 topPanel，之后当我想使用 topPanel 功能时，这些功能不起作用！

```
mapPanel.getTopToolbar().addButton(button); 
```

或以下代码

```
topToolbar = mapPanel.getTopToolbar();
topToolbar.addButton(button); 
```

当我看到 chrome 开发人员工具时，我看到 addButton 功能或面板 topToolbar 的其他功能出现此错误！ **错误：**

```
uncaught typeError: cannot call method 'addButton' of undefined 
```

为什么我不能使用 topToolbar 功能？[使用添加按钮映射](http://geoext.org/tutorials/control-button-tutorial.html#extjs-buttons)
的 geoext 教程链接`mapPanel.getTToolbar().addButton(button);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T11:30:29.693

我有同样的问题。您必须在创建 mapPanel 之前添加此额外行：

```
var toolbar = new Ext.Toolbar(); 
```

在 mapPanel 里面添加这个属性：

```
tbar: toolbar 
```

您现在可以将按钮添加到工具栏：

```
mapPanel.getTopToolbar().addButton(button); 
```

# search - 使用 Solr 实现 Search Everything

> ID：11708556
> 
> 赞同：2
> 
> 时间：2012-07-29T10:39:46.517
> 
> 标签：search, solr, lucene, search-engine

搜索所有类型的应用程序如何将数据编入索引并将其跟踪到其搜索索引中。

最近我一直在研究 Apache Solr，它正在为搜索产生惊人的结果。但这是针对正在搜索的一个特定产品目录部分。由于 Solr 是一个存储它的数据文档，我们将可搜索字段索引为 solr 中的文档。我不确定它如何用于构建搜索所有类型的搜索？我应该如何将数据索引到 Solr？

通过搜索我的意思是，在不同的模块中搜索客户、服务、帐户、订单、目录、支持票等信息。因此，搜索返回的结果是单个搜索表单的结果，用户不需要进入不同的形式来搜索那个模块？

我是否需要为每个此类数据模型构建不同的索引或将它们作为单个文档存储到 solr 中？实现这一点的最佳策略是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T17:23:38.443

您可以将所有数据存储在单个索引中，每个文档都有一个额外的字段来存储其类型（客户、订单等）。对于模块内搜索，只需将搜索查询限制为该类型的文档。对于 Search All 功能，使用 copyField 将每个文档类型中的所有相关字段复制到一个大字段中，并在文档类型字段不受约束的情况下进行搜索。

# c# - 优惠券代码生成

> ID：11708559
> 
> 赞同：53
> 
> 时间：2012-07-29T10:40:05.043
> 
> 标签：c#, algorithm, hash, coupon

我想生成优惠券代码，例如`AYB4ZZ2`。但是，我还希望能够标记已使用的优惠券并限制其全球数量，比如说`N`。天真的方法类似于*“生成`N`唯一的字母数字代码，将它们放入数据库并在每个优惠券操作上执行数据库搜索”。*

但是，据我所知，我们也可以**尝试找到一个函数** `MakeCoupon(n)`，它将给定的数字转换为具有预定义长度的类似优惠券的字符串。

*据我了解，`MakeCoupon`应满足以下要求：*

*   是双射的。它的逆`MakeNumber(coupon)`应该是有效可计算的。

*   的输出`MakeCoupon(n)`应该是字母数字，并且应该具有小而**恒定**的长度 - 这样它就可以被称为*人类可读*的。例如`SHA1`摘要不会通过这个要求。

*   实用的独特性。`MakeCoupon(n)`每个自然的结果`n <= N`应该是完全唯一的或在相同的条件下是唯一的，例如，`MD5`是唯一的（具有相同的极小碰撞概率）。

*   *（这个很难定义）*如何从一个优惠券代码中枚举所有剩余的优惠券不应该很明显 - 假设`MakeCoupon(n)`并且`MakeCoupon(n + 1)`应该在视觉上有所不同。

    > 例如`MakeCoupon(n),`，仅输出`n`用零填充的输出将无法满足此要求，因为实际上`000001`并`000002`没有“视觉上”的不同。

## 问：

**是否存在满足以下要求的函数或函数生成器？**我的搜索尝试只引导我到[`[CPAN]`CouponCode，](http://search.cpan.org/dist/Algorithm-CouponCode/lib/Algorithm/CouponCode.pm)但它并没有满足相应函数是双射的要求。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-01T09:20:04.590

基本上你可以将你的操作分成几个部分：

1.  以某种方式“加密”您的初始数字`n`，以便两个连续的数字产生（非常）不同的结果
2.  从第 1 步的结果构建您的“人类可读”代码

对于第 1 步，我建议使用简单的分组密码（例如，具有您选择的轮函数的[Feistel 密码）。](http://en.wikipedia.org/wiki/Feistel_cipher)另请参阅[此问题](https://stackoverflow.com/questions/959916/way-to-encrypt-a-single-int)。

Feistel 密码在*几轮*中工作。在每一轮中，将一些*轮函数*应用于输入的一半，将结果`xor`与另一半相结合，然后交换两半。Feistel 密码的好处是轮函数不必是双向的（轮函数的输入在每一轮之后保持不变，因此可以在解密期间重建轮函数的结果）。因此，您可以选择您喜欢的任何疯狂操作:)。此外，Feistel 密码是对称的，可以满足您的第一个要求。

C# 中的一个简短示例

```
const int BITCOUNT = 30;
const int BITMASK = (1 << BITCOUNT/2) - 1;

static uint roundFunction(uint number) {
  return (((number ^ 47894) + 25) << 1) & BITMASK;
}

static uint crypt(uint number) {
  uint left = number >> (BITCOUNT/2);
  uint right = number & BITMASK;
  for (int round = 0; round < 10; ++round) {
    left = left ^ roundFunction(right);
    uint temp = left; left = right; right = temp;
  }
  return left | (right << (BITCOUNT/2));
} 
```

（请注意，在最后一轮之后没有交换，在代码中交换只是在结果的构造中撤消）

除了满足您的要求 3 和 4（函数是*total*，因此对于不同的输入，您会得到不同的输出，并且根据您的非正式定义，输入是“完全打乱的”）它也是它自己的逆（因此隐含地满足要求 1），即对于输入域中`crypt(crypt(x))==x`的每个（在此实现中）。就性能要求而言，它也很便宜。`x``0..2^30-1`

对于第 2 步，只需将结果编码为您选择的某个基础。例如，要编码 30 位数字，您可以使用 32 个字符的字母表中的 6 个“数字”（因此您可以编码 6*5=30 位）。

C# 中此步​​骤的示例：

```
const string ALPHABET= "AG8FOLE2WVTCPY5ZH3NIUDBXSMQK7946";
static string couponCode(uint number) {
  StringBuilder b = new StringBuilder();
  for (int i=0; i<6; ++i) {
    b.Append(ALPHABET[(int)number&((1 << 5)-1)]);
    number = number >> 5;
  }
  return b.ToString();
}
static uint codeFromCoupon(string coupon) {
  uint n = 0;
  for (int i = 0; i < 6; ++i)
    n = n | (((uint)ALPHABET.IndexOf(coupon[i])) << (5 * i));
  return n;
} 
```

对于输入 0 - 9，这会产生以下优惠券代码

```
0 => 5VZNKB
1 => HL766Z
2 => TMGSEY
3 => P28L4W
4 => EM5EWD
5 => WIACCZ
6 => 8DEPDA
7 => OQE33A
8 => 4SEQ5A
9 => AVAXS5 
```

请注意，这种方法有两个不同的内部“秘密”：第一，轮函数以及使用的轮数，第二，用于编码加密结果的字母表。但还要注意，所示的实现在密码学意义上绝不是安全的！

另请注意，显示的函数是一个*完全双射*函数，从某种意义上说，每个可能的 6 字符代码（包含字母表之外的字符）都会产生一个唯一的数字。为了防止任何人只输入一些随机代码，您应该对输入数字定义某种限制。例如，仅为前 10.000 个号码发放优惠券。然后，一些随机优惠券代码有效的概率为 10000/2^30=0.00001（大约需要 50000 次尝试才能找到正确的优惠券代码）。如果您需要更多“安全性”，您可以增加位大小/优惠券代码长度（见下文）。

**编辑：更改优惠券代码长度**

更改生成的优惠券代码的长度需要一些数学运算：第一步（加密）仅适用于具有偶数位数的位串（这是 Feistel 密码工作所必需的）。

在第二步中，可以使用给定字母表编码的位数取决于所选字母表的“大小”和优惠券代码的长度。这个以比特为单位的“熵”通常不是整数，更不是偶数。例如：

使用 30 个字符字母的 5 位代码会产生 30^5 个可能的代码，这意味着*ld(30^5)=24.53*位/优惠券代码。

对于四位代码，有一个简单的解决方案：给定一个 32 个字符的字母表，您可以编码 *ld(32^4)=5*4=20* 位。因此，您只需将 设置`BITCOUNT`为 20 并将`for` 代码第二部分中的循环更改为运行直到`4`（而不是`6`）

生成一个五位代码有点棘手，并且会“削弱”算法：您可以将 设置`BITCOUNT`为 24，然后从 30 个字符的字母表中生成一个 5 位代码（从`ALPHABET`字符串中删除两个字符并让`for`循环运行直到`5`）。

但这不会生成所有可能的 5 位代码：使用 24 位，您只能从加密阶段获得 16,777,216 个可能的值，5 位代码可以编码 24,300,000 个可能的数字，因此永远不会生成一些可能的代码。更具体地说，代码的最后位置永远不会包含字母表中的某些字符。这可以看作是一个缺点，因为它以一种明显的方式缩小了有效代码的范围。

解码优惠券代码时，您首先必须运行该`codeFromCoupon`函数，然后检查是否设置了结果的第 25 位。这将标记您可以立即拒绝的无效代码。请注意，在实践中，这甚至可能是一个优势，因为它允许快速检查（例如在客户端）代码的有效性，而不会泄露算法的所有内部结构。

如果未设置第 25 位，您将调用该`crypt`函数并获取原始编号。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-07T10:49:03.703

虽然我可能会因为这个答案而被搁置，但我觉得我需要做出回应——我真的希望你能听到我在说什么，因为它来自很多痛苦的经历。

虽然这项任务在学术上**非常**具有挑战性，并且软件工程师倾向于**挑战他们的智力与解决问题**，但如果可能的话，我需要为您提供一些指导。世界上没有哪家零售店无论如何都取得了任何成功，也没有很好地跟踪生成的每一个**实体**；从每件库存到他们发出的每一张优惠券或礼品卡。如果你是，那只是不是一个好管家，因为这不是如果人们会欺骗你，而是何时，所以如果你的武器库中有所有可能的物品，你就会准备好。

现在，让我们谈谈在您的场景中使用优惠券的过程。

当客户兑换优惠券时，前面会有某种POS系统对吗？这甚至可能是一个在线业务，他们可以输入他们的优惠券代码而不是收银员扫描条形码的寄存器**（我假设这就是我们在这里处理的）**？所以现在，作为供应商，你说如果你有一个有效的优惠券代码，我会给你一些折扣***，***因为我们的目标是生成可撤销的优惠券代码，我们不需要数据库为了验证该代码，我们可以将其反转！我的意思是这只是数学对吗？**嗯，是的，也不是。**

是的，你是对的，这只是数学。事实上，这也是问题所在，因为[破解 SSL](http://www.readwriteweb.com/archives/breaking_the_internet_researchers_successfully_hac.php)也是如此。但是，我假设我们都意识到 SSL 中使用的数学比这里使用的任何东西都要复杂一些**，而且**密钥要**大得多**。

你不应该这样做，尝试提出某种计划，你只是确定没有人关心足以打破，对你来说也不明智，尤其是在**金钱**方面。你让你的生活变得非常困难，试图解决一个你真的不应该尝试解决的问题，因为你需要保护自己免受那些使用优惠券代码的人的伤害。

因此，这个问题不必要地复杂，可以这样解决。

```
// insert a record into the database for the coupon
// thus generating an auto-incrementing key
var id = [some code to insert into database and get back the key]

// base64 encode the resulting key value
var couponCode = Convert.ToBase64String(id);

// truncate the coupon code if you like

// update the database with the coupon code 
```

1.  创建具有自动递增键的优惠券表。
2.  插入该表并取回自动递增键。
3.  Base64 将该 ID 编码为优惠券代码。
4.  如果需要，请截断该字符串。
5.  将该字符串与刚刚插入的优惠券一起存储回数据库中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T11:53:27.793

您想要的称为[Format-preserving encryption](http://en.wikipedia.org/wiki/Format-preserving_encryption)。

不失一般性，通过以 36 为基数进行编码，我们可以假设我们谈论的是整数`0..M-1`而不是符号字符串。`M`应该是 2 的幂。

选择密钥并指定`M`后，FPE 会为您提供 的伪随机排列`0..M-1` `encrypt`及其逆`decrypt`。

```
string GenerateCoupon(int n) {
    Debug.Assert(0 <= n && n < N);
    return Base36.Encode(encrypt(n));
}

boolean IsCoupon(string code) {
    return decrypt(Base36.Decode(code)) < N;
} 
```

如果你的 FPE 是安全的，那么这个方案是安全的：没有攻击者可以生成其他优惠券代码，其概率高于 O(N/M) 给定任意多优惠券的知识，即使他设法猜测与他知道的每张优惠券相关联的号码.

这仍然是一个相对较新的领域，因此此类加密方案的实现很少。[这个 crypto.SE 问题](https://crypto.stackexchange.com/questions/3279/format-preserving-encryption-implementations)只提到了[Botan](http://botan.randombit.net/fpe.html)，一个带有 Perl/Python 绑定的 C++ 库，但没有提到 C#。

提醒一句：除了 FPE 还没有被广泛接受的标准这一事实之外，您还必须考虑实施中存在错误的可能性。如果有很多钱，您需要权衡这种风险与避免使用数据库的相对较小的好处。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-29T11:31:50.410

您可以使用 base-36 数字系统。假设您需要 coupen 输出中的 6 个字符。

MakeCoupon 的伪代码

MakeCoupon(n) {

有一个固定大小的字节数组，比如 6。将所有值初始化为 0。将数字转换为基数 - 36 并将“数字”存储在一个数组中（使用整数除法和模运算）现在，对于每个“数字”查找假设数字从 0..9,A..Z 开始的相应 ascii 代码使用此约定输出六位数字作为字符串。

}

现在计算后面的数字是这个操作的逆过程。

这适用于具有 6 个允许字符的非常大的数字 (35^6)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-01T10:55:14.147

*   选择一个加密函数`c`。对 c 有一些要求，但现在让我们使用 SHA1。

*   选择一个密钥`k`。

您的优惠券代码生成功能可以是 number `n`：

*   将 n 和 k 连接为`"n"+"k"`（这在密码管理中称为加盐）
*   计算 c("n"+"k")
*   SHA1 的结果是 160 位，将它们（例如使用 base64）编码为 ASCII 字符串
*   如果结果太长（正如您所说的 SHA1 的情况），请将其截断以仅保留前 10 个字母并命名此字符串`s`
*   您的优惠券代码是`printf "%09d%s" n s`，即零填充`n`和截断哈希的串联`s`。

是的，猜测`n`优惠券代码的数量是微不足道的（但见下文）。但是很难生成另一个有效的代码。

满足您的要求：

1.  要计算反向函数，只需读取代码的前 9 位
2.  长度始终为 19（n 的 9 位数字，加上哈希的 10 个字母）
3.  它是唯一的，因为前 9 位数字是唯一的。最后 10 个字符也是，很有可能。
4.  即使有人猜测您使用了 SHA1，如何生成散列也不明显。

一些评论：

*   如果担心读起来`n`太明显，可以轻轻混淆一下，比如base64编码，在代码中交替使用`n`and的字符`s`。
*   我假设您不需要超过十亿个代码，因此将 n 打印为 9 位数字，但您当然可以将参数 9 和 10 调整为您想要的优惠券代码长度。
*   SHA1 只是一个选项，您可以使用其他加密功能，如私钥加密，但您需要检查此功能在截断和提供明文时是否保持强大。
*   这在代码长度上不是最优的，但具有简单和广泛可用的库的优点。

# python - 通过 API 读取 setup.py 以测试需求

> ID：11708561
> 
> 赞同：0
> 
> 时间：2012-07-29T10:40:16.030
> 
> 标签：python

我正在开发一个插件系统，并且正在考虑为每个“插件”简单地使用一个 setup.py 文件，因为它已经是一个现有的依赖项。问题是，我需要一种测试需求的方法。

是否已经为此提供了现有的 API，或者只是滚动自定义系统并手动检查它是否更有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:54:08.760

setup.py 是一个脚本，您通常无法解析它来确定要求，尤其是因为某些安装脚本会根据用于运行它们的 python 版本来更改要求。

即将推出的标准将解决此问题：[PEP 345](http://www.python.org/dev/peps/pep-0345/ "佩普 345")。在这个时间点，虽然很少有软件包使用它。有关该主题的更多信息，您可以查看该主题多次出现的[distutils-sig 列表档案。](http://mail.python.org/pipermail/distutils-sig/)

你看过鸡蛋的入口点吗？他们基本上实现了一个可以直接使用的插件系统。[这个stackoverflow问题](https://stackoverflow.com/questions/774824/explain-python-entry-points)有一些可能很有趣的信息。

# asp.net - asp.net MVC3 中自动生成的表单

> ID：11708563
> 
> 赞同：3
> 
> 时间：2012-07-29T10:40:22.803
> 
> 标签：asp.net, asp.net-mvc-3

根据用户在几个步骤中完成的多项选择，我必须在网页中为用户生成一个表单。

在数据库中，我拥有所有必要的东西（每个表单字段、名称、类型等的正则表达式验证）我想知道使用 MVC3 自动生成表单的最佳方法是什么。

我是否应该自动生成一个模型，将我的视图模型设置为动态，并为我的动态模型的每个属性注入一些验证属性？

我应该如何获得我的帖子操作的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:11:33.327

由于字段都是动态的（来自数据库），您的模型可以很容易地存储一个 IEnumerable ，其中 Question 是一个对象，其中包含有关字段类型的信息。即 Id、TypeId（文本、复选框、选择列表）、Wording、Heading、ValidationTypeId 等。然后使用 mvchelpers 将 Question 传递给确定要输出的 html 的方法。这很可能包括一个验证器。在 Model.SurveyQuestions 的表单循环上，并为每一行将 Question 发送到 mvc 助手。助手，了解有关问题的所有信息，可以输出标签、输入框类型和所需的验证器。

这是完成您尝试做的事情的明智方法，因为您的输入字段是动态的。我刚刚完成了一个正是这样做的项目。

# php - 正则表达式部分隐藏电子邮件？

> ID：11708565
> 
> 赞同：0
> 
> 时间：2012-07-29T10:40:38.997
> 
> 标签：php, regex, utf-8

我想要实现的目标相当简单，我想要输入，例如

```
漢aelena@tratata.com 
```

成为：

```
漢******@tratata.com 
```

所以我做了这个正则表达式来匹配第一个字符和'@'。

```
mb_regex_encoding ('UTF-8' );
mb_ereg_replace('(?<=^.{1}).*?(?=@)','*','漢aelena@tratata.com',1); 
```

但问题是，它只会匹配一次，因此只会放一颗星，而不是六颗星。像这样的东西，是我会得到的：

```
漢*@tratata.com 
```

然后我想使用 mb_ereg_replace_callback，返回：

```
return $matches[1].str_repeat('*', strlen($matches[1])); 
```

然后我阅读了规范，它说 mb_ereg_replace_callback 在 PHP 5.4.1 或更高版本中可用。

...任何想法我怎么能做到同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:18:00.043

无需使用回调函数，单个正则表达式即可。

```
(?<=.).(?=.*@) 
```

*   `(?<=.)`, 确保之前至少有一个字符，这样它就不会替换第一个字符。
*   `.`, 匹配任何字符。
*   `(?=.*@)`，确保`@`字符后面有一个。

将函数更改为`preg_replace`使用 unicode 修饰符的示例（如建议的那样）：

```
echo preg_replace('/(?<=.).(?=.*@)/u','*','漢aelena@tratata.com'); 
```

输出：

```
漢******@tratata.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:50:13.430

您可以使用[PCRE 系列](http://www.php.net/manual/en/ref.pcre.php)[`preg_replace_callback()`](http://php.net/manual/en/function.preg-replace-callback.php)中的功能。您可以使用[修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)来支持 UTF-8。`u`

请注意，PCRE ( ) 和 POSIX ( ) 方式之间存在[一些较小的差异](http://php.net/manual/en/reference.pcre.pattern.posix.php)，除了后者已被弃用。`preg_``ereg_`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:53:33.750

```
<?php

$email = '漢aelena@tratata.com';

    $email = preg_replace_callback('#^(.){1}(.*?)@#u', function($matches)
            {
                return $matches[1] . str_repeat('*', mb_strlen($matches[2])) . '@';
            },
    $email);

echo $email; # 漢******@tratata.com 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T11:01:25.557

替换回调是一种选择。

```
echo preg_replace_callback('/(?<=^.).+(?=@)/u', function($match) {
    return str_pad('', strlen($match[0]), '*');
}, "something@something.com");
//s*******@something.com 
```

注意我使用匿名函数作为回调——这只是 PHP >= 5.3。如果您使用的是 < 5.3，请使用命名函数或使用`function_create()`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-29T10:52:50.957

当这可以更快地完成时，为什么还要使用正则表达式？

```
if(($pos = mb_strpos($email,'@')) > 0) {
    for($i=1;$i<=$pos;$i++) {
        $email[$i] = '*';
    }
} 
```

# python - 具有缺失值的元组

> ID：11708568
> 
> 赞同：1
> 
> 时间：2012-07-29T10:41:37.483
> 
> 标签：python, tuples

我在 python 中有一个函数可以对字符串进行错误检查。如果函数发现错误，它将返回一个带有错误代码和该错误标识符的元组。稍后在程序中我有处理错误的函数。它将元组接受为两个变量。

```
errCode, i = check_string(s,pathType) 
```

check_string 是产生元组的函数。如果没有错误，我想要它做的是只返回零。当返回零时，上面的代码似乎失败了，因为变量 i 没有任何内容。

有没有一种简单的方法可以让它工作，或者如果没有发现错误，我只需要让程序返回一个 0 和 0 的元组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:48:38.527

我会为此使用异常系统。

```
class StringError(Exception):
    NO_E = 0
    HAS_Z = 1

def string_checker(string):
    if 'e' not in string:
        raise StringError('e not found in string', StringError.NO_E)
    if 'z' in string:
        raise StringError('z not allowed in string', StringError.HAS_Z)
    return string.upper()

s = 'testing'
try:
    ret = string_checker(s)
    print 'String was okay:', ret
except StringError as e:
    print 'String not okay with an error code of', e.args[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:43:39.933

为什么不在尝试检索值之前简单地检查元组的长度？

```
err_tup = check_String(s, pathType)
if len(err_tup) == 2:
    errCode, i = err_tup
else: # assuming it can only be 1 otherwise
    errCode = err_tup 
```

这无需对生成元组的其余代码进行任何更改即可工作，并且语义清晰。

基于*“简单胜于复杂”。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:52:41.737

您可以使用 None 作为错误的值

```
def check_string(s,pathType):
    # No error
    return (None, i) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T11:07:10.670

如果您要返回零：

```
foo = func()
if not foo:
    print 'No errors'
else:
    # foo is tuple 
```

# python - urllib2 请求问题

> ID：11708573
> 
> 赞同：0
> 
> 时间：2012-07-29T10:42:18.717
> 
> 标签：python, url, request, urllib2

我正在尝试使用 urllib2 打开一个页面

```
 req = urllib2.Request("http://1033kissfm.com",
        headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0'})
 response = urllib2.urlopen(req)
 rstPage = response.read() 
```

响应是

```
<html>
<head><title>400 Bad Request</title></head>
<body bgcolor="white">
<center><h1>400 Bad Request</h1></center>
<hr><center>nginx/1.0.3</center>
</body>
</html> 
```

但是当我在浏览器中打开这个网址时，它工作正常，这是网址

```
http://1033kissfm.com 
```

在浏览器中它重定向到

```
http://www.1033kissfm.com/pages/main 
```

页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:02:32.720

我解决了这个问题，因为我认为库不提供任何处理重定向的支持。此代码将有助于找到重定向以获得正确的响应

```
def get_hops(url):
    redirect_re = re.compile('<meta[^>]*?url=(.*?)["\']', re.IGNORECASE)
    hops = []
    while url:
            if url not in hops:
                hops.insert(0, url)
            response = urllib2.urlopen(url)
            if response.geturl() != url:
                hops.insert(0, response.geturl())
                # check for redirect meta tag
            match = redirect_re.search(response.read())
            if match:
                url = urlparse.urljoin(url, match.groups()[0].strip())
            else:
                url = None
    return hops 
```

# wpf - 自动完成文本框多个条目逗号分隔

> ID：11708575
> 
> 赞同：2
> 
> 时间：2012-07-29T10:42:40.557
> 
> 标签：wpf, xaml, autocomplete, textbox

有没有办法制作一个自动完成的 TextBox 小部件，但允许您在每次有分隔符时自动完成，例如“，”。

假设我想在文本框中写一个水果列表，例如：

“苹果，梨”

...并且我的有效条目列表是 [Apples, Pears, Oranges, Clementines] 所以每次我输入逗号时它都会重置自动完成，例如“A”自动完成为“Apples”，然后输入一个逗号，然后输入“Pe”将自动完成“Pears”。

大问我知道，但以防万一......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:07:29.433

我建议从那里看一下这个[自动完成文本框](http://wpfactb.codeplex.com/)，你使用正则表达式用逗号分割输入文本并将它们分开，然后再次将控件填充到任何结果。希望能帮助到你！

# javascript - 这个程序有什么错误？它显示未捕获的类型错误

> ID：11708580
> 
> 赞同：-1
> 
> 时间：2012-07-29T10:43:22.477
> 
> 标签：javascript

我收到以下错误

> 未捕获的类型错误：对象不是函数

在下面的代码中。

```
<html>
<head>
<title>Reverse</title>
</head>
<body>
<form name="rev1">
Enter the string : <input type="text" name="str">
<input type="button" value="click" onclick="rev1()" /> 
```

这是我发现错误的地方：

```
reverse of given string : <input type="text" name="res">
</form>
<script type="text/JavaScript">
function rev1(){
//var a=rev1.str.value;
//document.write("hello");
alert("hello");
}
</script>
</body>
</html> 
```

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:53:37.810

重命名表单，或完全删除它。`rev1`引用`form`给定脚本中的元素。

Demos: [**Original**](http://jsfiddle.net/ult_combo/3PwR7/1/) - [**Working**](http://jsfiddle.net/ult_combo/3PwR7/2/)
(点击按钮直接调用函数)

编辑：我已经看到这件事引起了很多讨论，所以我也会留下一些参考资料：

*   Bobince 回答了一个值得注意的问题：[IE/Chrome：DOM 树元素是全局变量吗？](https://stackoverflow.com/q/3434278/1331430)（顺便说一句，这也适用于现在的 Firefox）
*   另一个相关问题：[直接引用 HTML 元素](https://stackoverflow.com/q/7826737/1331430)

# java - JPA 移除 MySql 触发器

> ID：11708589
> 
> 赞同：0
> 
> 时间：2012-07-29T10:44:16.247
> 
> 标签：java, mysql, triggers, eclipselink, toplink

因为我的 persistence.xml 使用`drop-and-create-tables`：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="USENETPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>net.bounceme.dur.usenet.model.NewsgroupsArticles</class>
    <class>net.bounceme.dur.usenet.model.Article</class>
    <class>net.bounceme.dur.usenet.model.Newsgroup</class>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/nntp"/>
      <property name="javax.persistence.jdbc.password" value="password"/>
      <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
      <property name="javax.persistence.jdbc.user" value="java"/>
      <property name="toplink.ddl-generation" value="drop-and-create-tables"/>
      <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

我的触发器每次运行都会被删除。我可以将触发器放在哪里，以免它们被移除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:00:27.353

您应该使用`SessionCustomizer`. 在您的持久性属性中，您应该插入一个指向您的`SessionCustomizer`实现的属性。

```
properties.put(PersistenceUnitProperties.SESSION_CUSTOMIZER, MySessionCustomizer.class.getName()); 
```

或者

```
<property name="eclipselink.session.customizer" value="foo.bar.MySessionCustomizer" /> 
```

在这个会话定制器中，您可以加载您的触发代码并让它执行：

```
unitOfWork.executeNonSelectingSQL(sql); 
```

您可以在[此处找到有关此主题的详细说明](https://stackoverflow.com/a/2731513/1001027)

# javascript - Google Maps api v3 - 仅带有单个标记的地图

> ID：11708593
> 
> 赞同：3
> 
> 时间：2012-07-29T10:45:01.103
> 
> 标签：javascript, google-maps-api-3

我正在谷歌地图中创建一张我只想有一个标记的地图。当用户第一次点击地图时，会创建一个标记（周围有一个圆圈）。当用户再次单击时，旧标记（和圆圈）将移动到新位置。

所以基本上，这可以通过移动标记和圆圈来完成，或者通过删除它们并创建一个新的标记和圆圈来完成。

目前我正在尝试使用后一种方法，但不幸的是它不起作用。有人可以帮忙吗？

```
<script>
  //Initial variables (map and the markers array, which we're going to try to get rid of)
  var map;
  var markersArray = [];

  //and GO!
  function initialize()
  {
    //need to correct our starting location - over UK would be nice
    var haightAshbury = new google.maps.LatLng(37.7699298, -122.4469157);
    var mapOptions =
    {
      zoom: 12,
      center: haightAshbury,
      mapTypeId: google.maps.MapTypeId.TERRAIN
    };
    map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
    //listen out for clicks and, when clicked, add a marker
    google.maps.event.addListener(map, 'click', function(event)
    {
      addMarker(event.latLng);
    });
  }

  // Add a marker to the map and push to the array.
  function addMarker(location)
  {
    markersArray = [];
    setAllMap(null);
    var marker = new google.maps.Marker(
    {
      position: location,
      map: map,
      draggable: true
    });
    //create a circle
    var circle = new google.maps.Circle(
    {
      map: map,
      radius: 3000
    });
    //bind the circle to the marker we've also just created
    circle.bindTo('center', marker, 'position');
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:27:47.080

如果您一次只需要一个标记，则不需要一个数组来存储标记。您必须确保使用`setMap`方法和传递清除标记和圆圈的地图属性`null`。圆圈是错误的，您没有所需的所有选项，也没有`bindTo`方法。这是[圈子文档](https://developers.google.com/maps/documentation/javascript/reference#Circle)。

我看到您将标记的属性设置`draggable`为 true，因此您还需要在标记上添加一个`dragend`事件，以使用圆圈上的方法将圆圈重新定位到标记的新位置`setCenter`。

这是一个完整的例子：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps</title>
    <style>
    #map_canvas{
        height:800px;
        width:800px;
    }   
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
    <script>        
      var marker, myCircle, map;
      function initialize() {
        var myLatlng = new google.maps.LatLng(37.7699298, -122.4469157);
        var mapOptions = {
          zoom: 12,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById('map_canvas'), 
            mapOptions);

        google.maps.event.addListener(map, 'click', function(event){
            addMarker(event.latLng);
        });
      }

      function addMarker(latLng){       
        //clear the previous marker and circle.
        if(marker != null){
            marker.setMap(null);
            myCircle.setMap(null);
        }

        marker = new google.maps.Marker({
            position: latLng,
            map: map,
            draggable:true
        });

        //circle options.
        var circleOptions = {
            strokeColor: '#FF0000',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#FF0000',
            fillOpacity: 0.35,
            map: map,
            center: latLng,
            radius: 3000
          };
         //create circle
        myCircle = new google.maps.Circle(circleOptions);

        //when marker has completed the drag event 
        //recenter the circle on the marker.
        google.maps.event.addListener(marker, 'dragend', function(){
            myCircle.setCenter(this.position);
        });     
    }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas"></div>
  </body>
</html> 
```

# ruby-on-rails - Rails 3 关系

> ID：11708594
> 
> 赞同：0
> 
> 时间：2012-07-29T10:45:03.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个模型，活动和城市

```
class activity
  has_many :attachments, :as => :attachable 
  accepts_nested_attributes_for :attachments
  belongs_to city
end

class city
  has_many :activties
end

city_controller
  @activity_deals = @city.activities.find_all_by_deals(true)
end 
```

查看城市

```
 - @activity_deals.attachments.each do |a|
    = image_tag(a.file.url, :height =>"325px", :width =>"650px" )
       = a.description 
```

我收到错误`undefined method`附件'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:58:30.297

你有课`Attachement`吗？您正在尝试调用附件类：`- @activity_deals.attachments.each`...但是您正在获取`undefined method`...
因此，您必须将此类添加到您的应用程序中：

```
class Attachment < ActiveRecord::Base
  belongs_to :activity
end 
```

但是，我认为您正在尝试使用[polymorphic](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

如果是这样的话：

```
class Attachment < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true
end

class activity
  has_many :attachments, :as => :attachable 
  accepts_nested_attributes_for :attachments
  belongs_to city
end

class city
  has_many :activties
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:02:55.947

`@activity_deals`将是一个`Array`对象`Activity`，而不是单个`Activity`对象。

我不是 HAML 用户，所以我可能会弄错语法，但你可以使用类似这样的东西：

```
 - @activity_deals.each do |activity|
    - activity.attachments.each do |a|
      = image_tag(a.file.url, :height =>"325px", :width =>"650px" )
         = a.description 
```

确保查看整个错误消息，它将帮助您调试此类问题。整个消息将类似于`undefined method 'attachments' for […]:Array`，它告诉您您正在调用`attachments`的是`Array`，而不是`Activity`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T11:15:57.950

在你的视图城市，`@activity_deals`是一个数组。所以上面没有“附件”定义的方法。

您必须访问数组中每个元素的附件。

像那样 ：

```
- @activity_deals.attachments.each do |a|
= image_tag(a.file.url, :height =>"325px", :width =>"650px" )
   = a.description

- @activity_deals.each do |deal|
  - deal.attachments.each do |a|
    = image_tag(a.file.url, :height =>"325px", :width =>"650px" )
      = a.description 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T11:04:25.617

似乎您正在对一系列活动调用附件方法。这就是为什么它给您错误 undefined ethod attacments 的原因。请给你错误日志

# html - 页面周围出现异常的“边框”

> ID：11708595
> 
> 赞同：2
> 
> 时间：2012-07-29T10:45:09.753
> 
> 标签：html, css

出于某种原因，我的页面上有一个不寻常的边框。我无法在代码中找到它的原因：

[http://danie1.me/temp/](http://danie1.me/temp/)

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:46:43.550

您必须`<body>`像这样更新样式：

```
body {
  color: green;
  margin: 0;
  padding: 0;
} 
```

并且通常使用某种[CSS 重置](http://www.cssreset.com/)来避免在不同浏览器中出现大量故障排除是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:52:27.833

默认的所有元素都有一些风格。`body`默认情况下标签`margin`不为0。所以

```
body { margin: 0px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:29:13.670

你的身体有额外的边缘。最好使用 CSS 重置，一个简单的：

```
* {margin: 0; padding: 0; list-style: none;} 
```

或者只是身体：

```
body {margin: 0; padding: 0; list-style: none;} 
```

# ios - loadNibNamed 与 initWithFrame 两难设置框架的高度和宽度

> ID：11708597
> 
> 赞同：1
> 
> 时间：2012-07-29T10:45:26.217
> 
> 标签：ios, uiview, loadnibnamed, initwithframe, designated-initializer

我创建了一个与 .xib 文件关联的 UIView 子类。此 UIView 子类将在 UIViewController 中使用。在控制器中，我认为我们如何实例化 UIView 子类有两种选择：

```
MyUIView *myView=[[MyUIView alloc] initWithFrame:aRect]; 
```

和

```
MyUIView *myView = [[[NSBundle mainBundle] loadNibNamed:@"MyUIView" 
                                                  owner:self 
                                                options:nil] lastObject]; 
```

我更喜欢允许我执行自定义初始化的第一种方法或其变体。唯一的问题是我必须指定一个框架的矩形，它已经在 . `xib`（我的意思是框架的高度和宽度`MyUIView`）。是的，我可以在 中再次对其进行硬编码`aRect`，但这维护起来很繁琐（例如，当我在 .xib 中更改 UI 的位置时，我也必须更新`aRect`）。

因此，应该考虑第二种方法，因为框架矩形是自动设置的。剩下的问题是我无法自定义初始化程序（例如，我想在初始化期间传递额外的参数）。

你的偏好是什么？你认为哪一个更好？

EDIT1：受塞尔吉奥回答的启发，我想出了这个解决方法：

```
// In MyViewController.m
MyUIView *myView=[[MyUIView alloc] initWithFrame:CGRectMake(x, y, 0.0, 0.0)];

// In MyView.m
- (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame]) {
        self = [[[NSBundle mainBundle] loadNibNamed:@"UnmovableTagView" 
                                              owner:self 
                                            options:nil] lastObject]; 
        [self setFrame:CGRectMake(frame.origin.x, 
                                  frame.origin.y, 
                                  [self frame].size.width, 
                                  [self frame].size.height)]; 
        // frame's width and height already determined after 
        // loadNibNamed was called
       ...
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T10:49:59.757

您是否尝试过使用：

```
MyUIView *myView=[[MyUIView alloc] initWithFrame:CGRectZero]; 
```

我不知道它是否适用于您的情况（从笔尖加载视图），但是当我以编程方式创建自定义视图时，我成功使用了它。

你可以试一试。

## 编辑：

您可以为您的视图定义自己的`init`方法：

```
-(id)initWithPosition:(CGPoint)pos; 
```

然后调用：

```
-(id)initWithPosition:(CGPoint)pos {

  if (self = [super initWithFrame:{pos,{0,0}}]) {
    self = [[[NSBundle mainBundle] loadNibNamed:@"UnmovableTagView" 
                                          owner:self 
                                        options:nil] lastObject]; 
    [self setFrame:CGRectMake(frame.origin.x, 
                              frame.origin.y,  
                              [self frame].size.width,    
                              [self frame].size.height)]; 
     // frame's width and height already determined 
     // after loadNibNamed was called

  } 
```

# node.js - 包装异步函数并保持异步

> ID：11708598
> 
> 赞同：0
> 
> 时间：2012-07-29T10:45:33.193
> 
> 标签：node.js, asynchronous

我正在使用设置如下的[节点请求模块：](https://github.com/mikeal/request/)

```
request(object,function(data)); 
```

该函数是一个回调，其中包含响应数据。我想输入一组预定义的对象，并将请求函数包装在另一个函数中，如下所示：

```
var quickReq(object,func){
  request(object,func);
}

quickReq({
  "method":"GET",
  "url":"http://someapi.com",
}
,function(error, response, data) {
  res.send(data);
}); 
```

这是有效的异步代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:47:42.223

> 这是有效的异步代码吗？

是的，是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:49:11.497

完全不清楚您要做什么，但是`request`回调的第一个参数是错误代码，*第二个*参数是返回的内容（假设成功）。

# c# - 如何将视图数据传递到“filterContext.Result = new RedirectResult(target_page)”的 target_page

> ID：11708600
> 
> 赞同：1
> 
> 时间：2012-07-29T10:45:49.900
> 
> 标签：c#, asp.net-mvc, filterattribute

当我写一个

> FilterAttribute, IAuthorizationFilter

我无法将 viewdata 传递给 target_page

`filterContext.Result = new RedirectResult(target_page)`

我试过：

```
filterContext.Controller.ViewData.Add("_errorInfo", "xxxxx"); 
```

但它不工作。

# c++ - 如何更改字符串类型？

> ID：11708612
> 
> 赞同：0
> 
> 时间：2012-07-29T10:47:20.640
> 
> 标签：c++, arrays

我想输入一个字符串。

```
string value;
cin >> value; 
```

我想获取字符串并将字符串的一部分更改为整数。

例如。00：输入 22 我想将“00”（不带“:”）更改为整数。保留“输入”一个字符串并将最后两个字符转换为整数。

现在我想取出我已经改变的部分并在一个数组中显示。转换后的字符串的每一部分都有一个 col。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:53:47.383

1 -[返回子字符串](http://www.cplusplus.com/reference/string/string/substr/)

2 -[将字符串转换为 int](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)

# python - Flask-WTForms 在我的项目目录中找不到 WTForms

> ID：11708613
> 
> 赞同：6
> 
> 时间：2012-07-29T10:47:31.290
> 
> 标签：python, google-app-engine, flask, wtforms

这是我在 StackOverflow 上的第一篇文章，大家好。

我正在做博客应用程序来学习 Python 和 Flask，我想在 Google App Engine 上启动它。不幸的是，我在将 WTForms 导入应用程序时遇到了小问题。我目前正在使用 Flask 0.9、WTForms 1.0.1 和 Flask-WTForms 0.8。我已将 flaskext_wtf 文件夹添加到我的项目的根路径，但我从 html5.py 文件中收到错误。

```
File "/Users/lucas/Workspace/blog/flask_wtf/html5.py", line 1, in <module>
from wtforms import TextField
File "/Users/lucas/Workspace/blog/flask/exthook.py", line 86, in load_module
raise ImportError('No module named %s' % fullname)
ImportError: No module named flask.ext.wtf.wtforms 
```

看起来它试图在扩展路径而不是我的项目路径中找到 wtforms。如何通知 html5.py 文件在根目录中查找 wtforms？

这是我的项目的来源 - [https://bitbucket.org/lucas_mendelowski/wblog/src](https://bitbucket.org/lucas_mendelowski/wblog/src)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-14T05:30:44.087

我认为您的 Virtualenv 没有 Flask-WTF 模块。在 virtualenv 下的命令行中编写以下命令

```
pip install Flask-WTF 
```

或者您可以这样做，但不建议这样做。

```
easy_install Flask-WTF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:36:38.743

我想，我终于解决了这个问题（但我不确定这是否是正确的方法）。

更改这些文件中的导入：

1) 烧瓶wtf/init_.py

从：

```
from flask.ext.wtf import html5
from flask.ext.wtf.form import Form
from flask.ext.wtf import recaptcha

from flask.ext.wtf.recaptcha.fields import RecaptchaField
from flask.ext.wtf.recaptcha.widgets import RecaptchaWidget
from flask.ext.wtf.recaptcha.validators import Recaptcha 
```

至：

```
import html5
from form import Form
import recaptcha

from recaptcha.fields import RecaptchaField
from recaptcha.widgets import RecaptchaWidget
from recaptcha.validators import Recaptcha 
```

2）flaskwtf/recaptcha/init_.py：

从：

```
from flask.ext.wtf.recaptcha import fields
from flask.ext.wtf.recaptcha import  validators 
from flask.ext.wtf.recaptcha import  widgets 
```

至：

```
import fields
import validators 
import widgets 
```

我还在 github 上发布了一个解决方案 - [https://github.com/rduplain/flask-wtf/issues/46#issuecomment-7376577](https://github.com/rduplain/flask-wtf/issues/46#issuecomment-7376577)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:37:46.353

您的导入不正确。你可能正在做：

```
from flask.ext.wtf import wtforms 
```

没有这样的模块。相反，您应该这样做：

```
from flask.ext.wtf import Form, TextField 
```

如果您想要 HTML5 小部件，只需使用以下内容。例如，您可以将 URLField 导入为

```
from flask.ext.wtf.html5 import URLField 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T18:31:02.657

您的导入错误。另外，请确保您安装了 Flask-WTF，它会自动安装 WTForm。

根据文档，就导入字段而言。

```
From version 0.9.0, Flask-WTF will not import anything from wtforms 
you need to import fields from wtforms.

    from flask_wtf import Form
    from wtforms import TextField
    from wtforms.validators import DataRequired

    class MyForm(Form):
        name = TextField('name', validators=[DataRequired()]) 
```

请查看[Flask-WTF 快速入门指南](https://flask-wtf.readthedocs.org/en/latest/form.html)。

# expression - 没有办法对视频流畅流进行编码

> ID：11708614
> 
> 赞同：0
> 
> 时间：2012-07-29T10:47:39.937
> 
> 标签：expression, expression-encoder-sdk, smooth-streaming

您需要安装什么，以便我可以通过编码器对视频流畅流进行编码？![在此处输入图像描述](../Images/9779e1d048b6886a916135b9b7eb7a43.png)- 我指出要流畅的流式传输

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:11:42.843

您需要先获得专业版。而您目前正在使用 3.0。继续升级版本。

# xml - 是否有任何 BPEL 工具使用 RESTful Web 服务而不是 Big Web 服务

> ID：11708617
> 
> 赞同：3
> 
> 时间：2012-07-29T10:48:24.170
> 
> 标签：xml, rest, soap, bpel

我发现了一些工具，它们提供了使用 BPEL 构建业务流程的图形工具。但是 BPEL 是否意味着生成的业务流程将仅基于 SOAP？或者 BPEL 通常可以生成 SOAP 或 RESTful Web 服务，而不仅仅是 SOAP，这取决于用于构建业务流程的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:45:03.010

我使用 Netbeans IDE 来编排 Web 服务：它们是基于 SOAP 和 RESTful 服务的混合。我的意思是一些服务是基于 SOAP 的，而另一些是 RESTful 的，它们被编排以实现一个来的目标。

坚持您的问题，一般而言，BPEL 确实支持它们。

**BPEL**是一种编排语言，它指定可执行流程并控制其消息交换和执行的顺序。请记住，服务（无论是基于 SOAP 还是 RESTful）在 BPEL 之外，并且仅被视为 BPEL 流程的输入。

据我所知，NetBeans 是一个很好的 BPEL IDE，它的 GUI 设计使它变得简单。

我的建议是获取这个 IDE 并开始享受它：[GlassFishESBv22](http://www.logicoy.com/download_glass)（它是带有 Glass Fish 服务器的 NetBeans）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:28:48.253

BPEL 语言有一个称为[BPEL for REST](http://www.jopera.org/docs/publications/2008/bpel4rest/)的扩展，它由一个名为[JOpera](http://www.jopera.org/)的工具支持。它可作为 Eclipse 的插件使用。然而，它并没有得到太多的认可，当涉及到 RESTful Web 服务时，它并没有成为一种自然的编程模型。它仍然感觉像是一个面向 RPC 的解决方案。

您还可以查看[Apache ODE](http://ode.apache.org/)。上次我检查时，他们在Apache ODE 2.0的**beta版本中提供了对***WSDL 1.1 Extension for REST的支持。*

# c# - 如何精确测量字符串的宽度？

> ID：11708621
> 
> 赞同：7
> 
> 时间：2012-07-29T10:48:38.650
> 
> 标签：c#, winforms, gdi+

首先，[`How to measure width of character precisely?`](https://stackoverflow.com/questions/9957982/how-to-measure-width-of-character-precisely)已回答的问题*对于这种情况并没有真正的帮助，所以这不是 that 的重复*。

我有一个字符串。我使用 绘制`graphics.DrawString`，但是当我需要在它之后放置另一个时，我需要知道前一个字符串的精确宽度。

为此，我使用 graphics.MeasureString 与：

```
StringFormat format = new StringFormat(StringFormat.GenericTypographic);
format.Alignment = StringAlignment.Center;
format.Trimming = StringTrimming.None;
format.FormatFlags = StringFormatFlags.MeasureTrailingSpaces; 
```

我已经尝试了许多其他功能，`TextRendered.MeasureText`但是所有可能的参数组合都失败了。

上面提到的 MeasureString 组合最接近我需要的组合（它在大多数情况下都有效，特殊字符除外），但是使用 # 打破它之类的字符。宽度或短或长。

有没有办法获得 DrawString 函数产生的文本的精确大小？DrawString 如何计算绘图区域的大小？显然它必须是其他一些功能，因为大小总是不同的。

整个应用程序的源代码在这里[https://gitorious.org/pidgeon/pidgeon-main/](https://gitorious.org/pidgeon/pidgeon-main/)（我使用它的文件是[https://gitorious.org/pidgeon/pidgeon-main/blobs/master/scrollback /SBABox.cs](https://gitorious.org/pidgeon/pidgeon-main/blobs/master/scrollback/SBABox.cs) )

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T11:41:09.973

你只需要消除额外的宽度。您可以使用[字符串格式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534052%28v=vs.85%29.aspx)来做到这一点：

```
GdipStringFormatGetGenericTypographic() 
```

您还可以使用：

```
float doubleWidth = g.MeasureString(text+text,...).Width;
float singleWidth = g.MeasureString(text).Width;
float textWidth = doubleWidth-singleWidth; 
```

*这将允许您使用其他语言，例如日语*。

[在 codeproject 上](http://www.codeproject.com/Articles/2118/Bypass-Graphics-MeasureString-limitations#premain1)，Pierre Anaud 的解决方案是使用`MeasureCharacterRanges`，它返回一个与指定字符串的边界框完全匹配的区域：

```
static public int MeasureDisplayStringWidth(Graphics graphics, string text, Font font)
{
    System.Drawing.StringFormat format  = new System.Drawing.StringFormat ();
    System.Drawing.RectangleF   rect    = new System.Drawing.RectangleF(0, 0, 1000, 1000);
    var ranges  = new System.Drawing.CharacterRange(0, text.Length);
    System.Drawing.Region[] regions = new System.Drawing.Region[1];

    format.SetMeasurableCharacterRanges (ranges);

    regions = graphics.MeasureCharacterRanges (text, font, rect, format);
    rect    = regions[0].GetBounds (graphics);

    return (int)(rect.Right + 1.0f);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-22T12:53:57.783

我在这里参加聚会有点晚了，但我试图做类似的事情并偶然发现了这个问题。您可能已经从[MSDN 上](http://msdn.microsoft.com/en-us/library/ms142109.aspx)[的方法文档中`Graphics.MeasureString`](http://msdn.microsoft.com/en-us/library/ms142109.aspx)看到以下注释：

> [MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring.aspx)方法设计用于单个字符串，并在字符串前后包含少量额外空间，以允许悬垂字形。此外，[DrawString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawstring.aspx)方法会调整字形点以优化显示质量，并且可能会显示比[MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring.aspx)报告的更窄的字符串。要获得适合布局中相邻字符串的度量（例如，在实现格式化文本时），请使用[MeasureCharacterRanges](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurecharacterranges.aspx)方法或采用[StringFormat的](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.aspx)[MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring.aspx)方法之一，并传递[GenericTypographic](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.generictypographic.aspx)。此外，确保[图形](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)的[TextRenderingHint](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.textrenderinghint.aspx)是[抗锯齿](http://msdn.microsoft.com/en-us/library/ssazt6bs.aspx)。

您似乎正在尝试遵循此建议，因为您将其用作自定义对象`StringFormat.GenericTypographic`的起点。`StringFormat`然而，线

```
format.FormatFlags = StringFormatFlags.MeasureTrailingSpaces; 
```

有效地否定了您开始使用的事实，`StringFormat.GenericTypographic`因为它清除了任何先前设置的标志。您可能打算做的是设置`StringFormatFlags.MeasureTrailingSpaces`标志，同时保留其他标志，如下所示：

```
format.FormatFlags |= StringFormatFlags.MeasureTrailingSpaces; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T11:45:32.330

**尝试使用以下方法：**

```
GDI+ (graphics.MeasureString and graphics.DrawString) >> System.Drawing.Graphics
GDI (TextRenderer.MeasureText and TextRenderer.DrawText) 
```

**它还可以帮助您：**

> *编写自定义度量方法：*
> 
> *   在特殊字符上拆分条目字符串
> *   使用上述 .net 方法
> *   计算特殊字符的宽度并求和...

[**阅读*伊恩博伊德的*答案**](https://stackoverflow.com/questions/1203087/why-is-graphics-measurestring-returning-a-higher-than-expected-number)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-26T15:24:55.160

此处给出了一种使用 Graphics.MeasureCharacterRanges 来返回包含字符串中每个单独字母的所有矩形及其位置的方法：[Measure character Position when drawing long strings in C#](http://csharphelper.com/blog/2015/02/measure-character-positions-when-drawing-long-strings-in-c/)

我已经使用了该帖子中的 MeasureCharactersInWord 和 MeasureCharacters 方法，然后为了找到确切的宽度而不在字符串的每一侧添加空格，我使用以下代码：

```
var w = 0F;
var rects = MeasureCharacters(Graphics.FromHwnd(IntPtr.Zero), font, text);
if (rects.Count>0)
{
    if (rects.Count == 1)
    {
        w = rects.First().Width;
    }
    else
    {
        var r0 = rects.First();
        var rN = rects.Last();
        w = rN.X - r0.X + rN.Width;
    }
} 
```

请注意，矩形的高度是字体的高度，而不是字符本身的高度。如果您需要高度，请查看这篇文章：[确定指定字体中的确切字形高度](https://stackoverflow.com/questions/9924066/determining-exact-glyph-height-in-specified-font)

最后一点：我使用 MeasureCharacterRanges 的原因是因为我尝试的所有其他方法都未能给我一个边界框，文本的左右两侧没有空间。这篇文章[The wonders of text rendering and GDI](https://theartofdev.com/2013/08/12/the-wonders-of-text-rendering-and-gdi/)提供了一种使用 TextRenderer 获取字符串宽度并删除此空间的方法，因此整个事情可以在大约两行代码中完成。虽然我还没有检查结果。

# php - PDO 为 select 语句返回错误值

> ID：11708622
> 
> 赞同：0
> 
> 时间：2012-07-29T10:48:46.160
> 
> 标签：php, mysql, select, pdo, rows

我有一个通过 PDO 与 MySQL 一起工作的 PHP 应用程序。我有一张包含不同记录的表，我必须防止插入重复的记录。但是当我想检查现有项目时，`select`语句不会返回真值。这是我的代码：

```
$sql = "SELECT COUNT(id) FROM tbl_product_category1 WHERE title = '?'";
$q = $db->prepare($sql);
$q->execute(array($title));
if ($q->fetchColumn() == 0)
{
    ... 
```

我也测试了这个：

```
$sql = "SELECT id FROM tbl_product_category1 WHERE title = '?'";
$q = $db->prepare($sql);
$q->execute(array($title));
$rows = $q->rowCount();
if ($rows == 0)
{
    ... 
```

想象一下`$title=1`。我有 4 条具有此值的记录。`SELECT`但我在声明中看不到任何内容。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:51:02.843

试试这个：（*不要用单引号包裹标题的值*）

```
$sql = "SELECT COUNT(id) FROM tbl_product_category1 WHERE title = ? "; 
```

# iphone - 使用 IB 更改 UINavigationBar

> ID：11708624
> 
> 赞同：0
> 
> 时间：2012-07-29T10:49:03.907
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, interface-builder

我正在尝试`UINavigationController`使用 IB 将导航栏更改为我的自定义导航栏（UINavigationBar 的子类）。
所以我有一个带有 的 xib 文件`UINavigationController`，但是当我站在导航栏上并去检查员更改它的类时，它向我显示了一个`UINavigationItem`类 not `UINavigationBar`，我无法选择我的自定义导航栏。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:19:23.963

为了回答我自己的问题，我在[这篇文章中找到了解决方案](https://stackoverflow.com/questions/10006011/how-to-use-custom-uinavigationbar)

只有在我点击“显示文档大纲”按钮（左下角的圆形箭头）后，我才能在导航控制器下找到导航栏，并更改他的类。

# zooming - Three.js 的类似 GoogleEarth 的控件

> ID：11708629
> 
> 赞同：1
> 
> 时间：2012-07-29T10:50:07.337
> 
> 标签：zooming, three.js, projector

我尝试为three.js 构建一个类似GoogleEarth 的控件，但没有成功（因为我对3D 几何的理解很差，而且很遗憾没有时间深入研究）。也许有人可以帮助我，或者可能已经有了。无论如何，我认为这将是对 three.js 库的一个很好的补充。

这是我正在尝试构建的特定功能：

1.  用鼠标滚轮放大鼠标光标
2.  按住 Shift 围绕场景旋转
3.  按鼠标左键平移。
4.  作为奖励：在上面的 1 和 2 操作期间显示一个小目标图标。

我在 1 上遇到了最大的麻烦，并且没有尝试过 2。平移很容易（有很多例子）。

现在我无法放大场景以使其固定在光标下（所以我可以指向屏幕的右上角，放大并仍然看到光标下的内容）。

我提前感谢亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:10:23.993

我在过去的生活中实现了类似的东西。我在这里假设您正在与平面进行交互；将这些技术转换为与球体相切的平面留给读者作为练习。;)

**用鼠标滚轮放大鼠标光标**

为此，您需要将光线投射到场景中，并注意它击中的位置。然后，您需要将相机的视点平移到该交叉点。为了感觉“正确”，您需要某种比例放大而不是固定步长——例如，每个缩放步长都会将当前眼点到目标的距离减少 20%，而不是仅仅移动 20 个单位。这将在相机接近时自动减慢相机速度。

**按住 Shift 围绕场景旋转**

按住 shift 键时，您会希望鼠标左右移动围绕您的视点旋转。为此，您需要绕垂直于您的交点的轴偏航。您将向场景中投射光线（一旦按住 shift 键），注意交点，然后围绕该轴旋转相机的视点。请注意，您还需要重新定向相机以在旋转时不断指向该交叉点，或者可能让眼睛方向旋转以与从眼睛点到交叉轴的向量保持恒定角度。

**按鼠标左键平移。**

您只需要获取右眼向量和上眼向量，并沿适当的方向移动（将鼠标 dx/dy 与归一化的右眼/上眼相乘，并乘以时间步长以实现与帧速率无关的移动）。

**作为奖励：在上面的 1 和 2 操作期间显示一个小目标图标。**

在场景的交叉点处，添加一个小对象。退出模式后，移除对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T13:15:24.707

对于您的第一个问题，您可以在鼠标滚轮下使用此程序

```
mousewheel = function (event) {
event.preventDefault();
var factor = 15;
var mX = (event.clientX / jQuery(THREE_STUFF.container).width()) * 2 - 1;
var mY = -(event.clientY / jQuery(THREE_STUFF.container).height()) * 2 + 1;
var vector = new THREE.Vector3(mX, mY, 0.1);
vector.unproject(camera);
vector.sub(camera.position);
if (event.deltaY < 0) {
camera.position.addVectors(camera.position, vector.setLength(factor));                       trackBallControls.target.addVectors(trackBallControls.target, vector.setLength(factor));
} else {
camera.position.subVectors(camera.position, vector.setLength(factor));                        trackBallControls.target.subVectors(trackBallControls.target, vector.setLength(factor));
}
} 
```

我希望这会对你有所帮助。

# php - 在 setInterval jquery 之前显示一些东西

> ID：11708631
> 
> 赞同：-1
> 
> 时间：2012-07-29T10:50:27.603
> 
> 标签：php, javascript, jquery, html, ajax

我的问题是如何在 jquery 中加载 setInterval 之前立即显示一些信息，以及何时加载 setInterval 将更新它。

```
<script type=\"text/javascript\">
    function getData(){
        $(\"#whereshow\").load(\"somefile.php\");
    }
    setInterval(\"getData()\", 5000);
</script> 
```

我可以做这样的东西吗？

```
<script type=\"text/javascript\">
    function getData1(){
        $(\"#whereshow\").load(\"somefile.php\");
    }
    function getData(){
        $(\"#whereshow\").load(\"somefile.php\");
    }
    setInterval(\"getData()\", 5000);
</script> 
```

...并且 getData1() 将显示即时加载页面信息，然后将停止，并且 setIntervall 将执行其他更新工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:52:41.283

基本上你想要做的是`setInterval`立即和间隔着火。

这很容易。

```
(function() {
    var getData = function() {
        $("#whereshow").load("somefile.php");
    }
    setInterval(getData,5000);
    getData();
})(); 
```

看，只需调用该函数；）我还为您的脚本添加了一些改进。

* * *

编辑：我刚刚想到的另一种方法：

```
setInterval((function() {
    $("#whereshow").load("somefile.php");
    return arguments.callee;
})(),5000); 
```

# javascript - 点击事件后：如何通过 javascript 向 URL 添加一些内容？

> ID：11708632
> 
> 赞同：2
> 
> 时间：2012-07-29T10:50:28.663
> 
> 标签：javascript, jquery, video, iframe

我想找到一种简单的方法，通过隐藏它们并在单击预览图像后立即使它们可见，从而在我的博客中为我的视频获取自定义预览图像。用户 Dominic Green 帮助我几乎开始了它。

问题是：视频已经在页面加载后立即以自动播放模式开始播放（即使它被隐藏）（您可以在后台听到声音），但我希望在点击预览后立即开始自动播放-图片...

在此示例中，我已经手动添加了“autoplay=1”，但我想在单击后立即通过 javascript 将此行添加到视频 URL！

这是到目前为止我是如何做到的示例（单击花卉图像将使视频可见）：[http ://brayaz.de/test/example.html](http://brayaz.de/test/example.html)

我绝对不喜欢javascript，所以任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:50:46.477

只需更改 iframe 的来源以包含自动播放：

```
$(document).ready(function(){
    $(".video").hide();
    $(".loader").on('click', function(){
        $(this).hide();
        elm = $(this).siblings(".video")
        elm.show();
        var iframe = elm.find('iframe');
        iframe.prop('src', iframe.prop('src')+'&autoplay=1');
    });
}); 
```

[**小提琴**](http://jsfiddle.net/q9mUJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:38:25.893

## HTML 代码

```
<param name="myvideo" value="http://www.youtube.com/v/v_MVwUqrwDc?rel=0"> 
```

## jQuery

```
$('param[name="myvideo"]').val(function(i, oldVal) {
    return oldVal + (oldVal.indexOf('?') ? '&autoplay=1' : '?autoplay=1');
}); 
```

# javascript - 如果我将谷歌地图 api 放入框架中，如何访问谷歌地图？

> ID：11708635
> 
> 赞同：0
> 
> 时间：2012-07-29T10:51:20.823
> 
> 标签：javascript, iframe, google-maps-api-3

我将谷歌地图 v3 api 放入框架/iframe

那么显然，如果我仍然使用以下方法创建地图实例：

```
var map=new google.maps.Map(...) 
```

会错的。

那么是否可以在父窗口中创建地图，而无需再次加载api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:38:34.070

请参阅在框架中使用地图的[讨论（第 39 部分在 iframe 之间通信）](http://econym.org.uk/gmap/iframes.htm)，它来自 Mike Williams 的 v2 教程，但这些概念适用于 v3。

# mysql - MySql 控制台无响应

> ID：11708636
> 
> 赞同：0
> 
> 时间：2012-07-29T10:51:30.567
> 
> 标签：mysql, sql, triggers, console, delimiter

输入触发器后，控制台似乎处于未响应正常命令的奇怪状态。我是否无意中使用分隔符这样做？

```
mysql> use nntp;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+---------------------+
| Tables_in_nntp      |
+---------------------+
| articles            |
| newsgroups          |
| newsgroups_articles |
+---------------------+
3 rows in set (0.00 sec)

mysql> show triggers;
Empty set (0.00 sec)

mysql> DELIMITER $$
mysql> USE `nntp`$$
Database changed
mysql> CREATE
    -> TRIGGER `nntp.newsgroups.before_insert`
    -> BEFORE INSERT ON `nntp`.`newsgroups`
    -> FOR EACH ROW
    -> BEGIN
    -> set new.hash = md5(new.newsgroup);
    -> END$$
Query OK, 0 rows affected (0.18 sec)

mysql> DELIMITER $$
mysql> USE `nntp`$$
Database changed
mysql> CREATE
    -> TRIGGER `nntp.newsgroups.before_update`
    -> BEFORE UPDATE ON `nntp`.`newsgroups`
    -> FOR EACH ROW
    -> BEGIN
    -> set new.hash = md5(new.newsgroup);
    -> END$$
Query OK, 0 rows affected (0.19 sec)

mysql> show triggers;
    -> ^CCtrl-C -- exit!
Aborted
thufir@dur:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:18:22.660

完成创建触发器或例程后，您需要将分隔符改回来，否则您必须对`$$`随后的所有语句使用相同的分隔符（在本例中）。

例如：

```
mysql> DELIMITER $$
mysql> USE `nntp`$$
Database changed
mysql> CREATE
    -> TRIGGER `nntp.newsgroups.before_update`
    -> BEFORE UPDATE ON `nntp`.`newsgroups`
    -> FOR EACH ROW
    -> BEGIN
    -> set new.hash = md5(new.newsgroup);
    -> END$$
Query OK, 0 rows affected (0.19 sec)

mysql> DELIMITER ;
mysql> show triggers; 
```

`DELIMITER`注意关键字的第二次使用。

# python - 关于python的返回值

> ID：11708638
> 
> 赞同：0
> 
> 时间：2012-07-29T10:51:41.417
> 
> 标签：python

```
 def createMenu(self, menuData):
        menu = wx.Menu()
        for eachItem in menuData:
            if len(eachItem) == 2:
                label = eachItem[0]
                subMenu = self.createMenu(eachItem[1])
                menu.AppendMenu(wx.NewId(), label, subMenu)
            else:
                self.createMenuItem(menu, *eachItem)
        return menu 
```

在这段代码中，返回值为`menu`.it 指的是 Object `wx.Menu()`。这个对象是一个局部变量。并且当这个函数调用结束时它会被删除。但是书中的下一个代码是 `menuBar.Append(self.createMenu(menuItems), menuLabel)`。 `createMenu(menuItems)`它是如何工作的？我的意思是`menu`指向的对象已被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:59:45.917

我不是 100% 确定我理解你的问题。但是您可以尝试以下方法：

```
menuBar = wx.MenuBar()
print menuBar.__class__ 
```

# c++ - 使用指针进行 C++ 类型转换

> ID：11708640
> 
> 赞同：4
> 
> 时间：2012-07-29T10:52:38.350
> 
> 标签：c++, pointers, casting

我来自 C# 和 Java 的背景，我似乎无法理解在 C++ 中使用指针进行强制转换意味着什么。

例如：

```
int x = 1;
char c = *((char*)&x); 
```

它有什么作用？它有什么用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T11:05:17.017

在您的两个示例中，您都犯了错误，导致代码无法编译。因此，我假设您正在尝试执行以下操作：

```
int x = 1;
char c = *((char*)&x); 
```

根据您的体系结构，`c`现在将具有`x`. 在此示例中，这将是 0 或 1（这实际上可以用于检测字节顺序）。

您的第二个示例不起作用，因为您试图忽略`const`导致非法操作/错误转换的结果（这也称为“const 正确性”）。

编辑：关于您对“这是什么意思？”的评论：

在表达式中： `&somevariable`将返回 的地址`somevariable`。 `*somevariable`将假定 的内容`somevariable`是实际值的地址，然后返回。

在声明中： `datatype`是一个普通的变量/对象。这是“按值”传递的。 `datatype&`是参考。这与 Java/C# 中的普通变量完全一样，并且通过引用传递。 `datatype*`是一个指针。这仅包含实际值所在的地址（见上文），并且本质上也是通过引用传递的。

实际转换的工作方式与 Java/C# 非常相似，但指针就是这样：它们指向实际值的位置。虽然这可能会让您感到困惑，但 C/C++ 中的指针的工作方式与 Java/C# 中使用的标准变量/引用非常相似。

看这个：

```
MyClass x; // object of MyClass
MyClass *x; // pointer to an object of MyClass - the actual value is undefined and trying to access it will most likely result in an access violation (due to reading somewhere random).
MyClass *x = 0; // same as above, but now the default value is defined and you're able to detect whether it's been set (accessing it would essentially be a "null reference exception"; but it's actually a null pointer).
MyClass &x = MyClass(); // creating a new reference pointing to an existing object. This would be Java's "MyClass x = new MyClass();" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T11:04:36.337

C++ 中的强制转换就像 Java 中的强制转换一样，不涉及指针。

```
int x = 1;
char c = (char) x; // Lose precision 
```

但是，你在这里做什么：

```
int x = 1;
char *c = (char *)x; 
```

告诉编译器的值`x`是一个字符的地址。它相当于

```
char *c;
c = 1; // Set the address of c to 0x0000000000000001 
```

您需要执行此操作的次数很少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T11:44:27.837

C++ 中有两个根本不同的概念，它们有时都被称为“转换”：一个是*转换*，一个是*重新解释*。

转换会创建一个与现有对象具有“相同值”但类型不同的新对象。这里有些例子：

**示例 1：类型提升**

```
// 1a: promote int to double to get the correct type of division

int numerator = rand(), denominator = rand();
double d = double(numerator) / double(denominator); 
```

```
// 1b: convert int to double to achieve a particular argument deduction

int n;
template <typename T> void do_numeric_stuff(T x) { /* ... */ }

do_numeric_stuff(double(n)); 
```

**示例 2：派生到基础的转换**

```
struct B { }; struct D : B { };
D x;

D * p = &x;  // pointer to x
B * q = p;   // implicit conversion; may change the value! 
```

另一方面，重新解释允许我们将一个变量视为另一个变量。关于此的唯一正确和有用的应用程序是*序列化*，以一种或另一种形式。

**示例 3：序列化**

```
std::ofstream file("output.bin");    // output file
char large_buffer[HUGE];             // in-memory buffer

unsigned int n = get_data();

char const * p = reinterpret_cast<char const *>(&n);
file.write(p, p + sizeof n);                         // write the bytes of `n`
std::copy(p, p + sizeof n, large_buffer);            // ditto

std::copy(large_buffer + 17, large_buffer + 17 + sizeof n,
          reinterpret_cast<char *>(&n));   // repopulate `n` from buffer 
```

该标准表示，通过不正确类型的指针访问对象是未定义的行为（也称为“类型双关语”）。虽然可以将对象指针存储在 a 中`void*`，然后将其转换回并使用它，但*不能*将浮点数视为整数等。访问一个对象的*唯一*可接受的方式是另一种是我演示的，即将一个类型的对象`T`当作一个数组来处理`char[sizeof(T)]`——也就是说，你可以访问每个对象的底层二进制表示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T11:06:06.450

你应该尽量避免像 (char*) 这样的 c 类型转换。如果您真的需要进行类型转换，请查看`dynamic_cast`,`static_cast`和`reinterpret_cast`.

但如前所述，您几乎不需要演员阵容。

[在这里查看更多信息： http](http://www.cplusplus.com/doc/tutorial/typecasting/) ://www.cplusplus.com/doc/tutorial/typecasting/

[http://www.parashift.com/c++-faq/static-typing-and-cpp.html](http://www.parashift.com/c++-faq/static-typing-and-cpp.html)

[http://www.parashift.com/c++-faq-lite/print-char-or-ptr-as-number.html](http://www.parashift.com/c++-faq-lite/print-char-or-ptr-as-number.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T11:11:17.593

很多年前，我使用该习惯用法在自定义 IO 板上的指定地址访问硬件。因此，例如在 PIC（可编程中断控制器）上写入以重置某些标志（虚构代码）：

```
#define PIC_LOC 0x1000
#define PIC_ENABLE_PORT *((char*)(PIC_LOC+0x10))
#define BIT_ENABLE (1 << 3)

...
PIC_ENABLE_PORT |= BIT_ENABLE;
... 
```

# objective-c - 滑动删除表格单元格时出错

> ID：11708648
> 
> 赞同：0
> 
> 时间：2012-07-29T10:53:14.440
> 
> 标签：objective-c, ios, uitableview

我试图在用户滑动时删除一行。我得到这个错误让我发疯。我花了三个小时试图找出原因。但是，到目前为止，我还没有任何线索。

这是我的代码来实现这一点。
在.h

```
 #import <UIKit/UIKit.h>
  #import "CustomCell.h"
  @interface FollowersTableViewController : UITableViewController
  @property (nonatomic,strong)NSMutableArray *arrayWithUser ;
  @end 
```

在 .mi 中有这个代码。

```
#import "FollowersTableViewController.h"
@implementation FollowersTableViewController
@synthesize  arrayWithUser ;
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}
    -(void)viewDidLoad
    {
        [super viewDidLoad];
        NSDictionary *dicUrlList= [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Urls" ofType:@"plist"]];
        NSString *baseURl = [dicUrlList objectForKey:@"urlWithUser"];
        baseURl = [baseURl stringByAppendingFormat:@"getfollowers"];
        NSURL *urlToGetFollowers = [NSURL URLWithString:baseURl];
        NSURLRequest *request = [NSURLRequest requestWithURL:urlToGetFollowers];
        NSError *error = nil ; 
        NSURLResponse *response = nil ; 
        NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
        arrayWithUser = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:nil];

    } 
    - (void)viewDidUnload
    {
        [super viewDidUnload];
    }
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }        
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {

        return 1;
    }
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    { 
        return [arrayWithUser count];
    }   
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {  
        static NSString *MyIdentifier = @"Cell";
        CustomCell *customCell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
        if (customCell == nil) 
        {
            customCell = [[CustomCell alloc] initWithFrame:CGRectMake(0, 0, 320, 50)] ;
        }
        NSDictionary *dicWithUser = [arrayWithUser objectAtIndex:indexPath.row];
        NSString *photoUrl = [dicWithUser objectForKey:@"profilePhotoUrl"];
        if(![photoUrl isEqualToString:@""])
            [customCell.thumbnail setImageWithURL:[dicWithUser objectForKey:@"profilePhotoUrl"] placeholderImage:[UIImage imageNamed:@"placeholder.png"] ];
        else 
        {
            [customCell.thumbnail setImage:[UIImage imageNamed:@"placeholder.png"]];
        }
        customCell.titleLabel.text = [dicWithUser objectForKey:@"username"];
        UIButton *buttonFollow = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [buttonFollow setTitle:@"Follow" forState:UIControlStateNormal];
        CGRect frame = buttonFollow.frame ; 
        frame = CGRectMake(200, 10, 60, 30);
        buttonFollow.frame = frame ;
        buttonFollow.tag = indexPath.row ;
        [buttonFollow addTarget:self action:@selector(followButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
        customCell.accessoryView = buttonFollow ;
        return customCell;    
    }   
    -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        return 60 ;
    }
    - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // Return NO if you do not want the specified item to be editable.
        return YES;
    }
    - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if (editingStyle == UITableViewCellEditingStyleDelete) {
            // Delete the row from the data source
            [arrayWithUser removeObjectAtIndex:indexPath.row];
        }    
    } 
```

到目前为止，我可以看到删除按钮，但是当我按下它时，我出现了这个错误

> [__NSCFArray removeObjectAtIndex:]：发送到不可变对象的变异方法。

由于我已经使用过`NSMutableArray`，我不知道为什么会出现此错误？

我已经尝试清理项目。它没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:57:34.540

从 JSON 调用对 arrayWithUser 的分配在 viewDidLoad 中返回 NSArray 而不是 NSMutableArray。修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:57:25.420

您的 Json 调用返回一个 NSArray。您可以去创建一个 mutableCopy - 这样您就可以使用“removeAtIndex..”方法。

```
NSArray *rData = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:nil];
arrayWithUser = [rData mutableCopy]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:39:09.703

实际上，您的 array(arrayWithUser) 强烈指向 JSONObjectWithData 返回的数组，因为您没有返回数组的所有权，因此无法删除其对象。你最好做一件事，拥有那个阵列的所有权。

```
arrayWithUser = [[NSMutableArray alloc]arrayByAddingObjectsFromArray:[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:nil]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T14:39:40.957

只需替换以下行

```
arrayWithUser = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:nil]; 
```

和

```
arrayWithUser = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil]; 
```

来自 Apple 的文档：
**NSJSONReadingMutableContainers**：指定将数组和字典创建为可变对象。
**NSJSONReadingMutableLeaves**：指定 JSON 对象图中的叶字符串创建为 NSMutableString 的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-11T05:09:41.597

你在 viwDidLoad 中使用过

arrayWithUser = [NSJSONSerialization JSONObjectWithData：数据选项：NSJSONReadingMutableLeaves 错误：无]；

让我们试试这样

NSMutableArray *userMutarr = [NSMutableArray alloc]initWithCapacity:3];

self.arrayWithUser = userMutarr;

[userMutarr 发布];

然后

self.arrayWithUser = [NSJSONSerialization JSONObjectWithData：数据选项：NSJSONReadingMutableLeaves 错误：无]；

# android - 从 ip 地址获取数据并显示在我的 android 应用程序上

> ID：11708652
> 
> 赞同：-3
> 
> 时间：2012-07-29T10:53:40.460
> 
> 标签：android

我在 android 中创建了一个应用程序，它显示了工厂正在进行的连续单元生产。

应用程序中显示的数据取自 IPAddress。谁能告诉我如何将 IPAddress 中的数据显示到我的应用程序中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:55:07.990

如果您在 IP 地址上托管网站或网络服务器，您可以在[此处](http://developer.android.com/reference/java/net/HttpURLConnection.html)阅读如何下载网页内容。如果要显示网页，可以使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)。

如果您不使用 HTTP 协议，而只是使用 FTP，您可以阅读[此处](http://developer.android.com/reference/java/net/URLConnection.html)的操作。

**编辑**

FTP 示例：

```
 URL url = new URL("ftp://1.2.3.4/test.csv");
   URLConnection urlConnection = url.openConnection();
   InputStream in = new BufferedInputStream(urlConnection.getInputStream());
   String result = "";

   try {
     BufferedReader reader = new BufferedReader(new InputStreamReader(in));
     String line;
     while((line=reader.readLine())!=null){
       result += line;
      }
     yourTextView.setText(result);
    finally {
     in.close();
   }
 } 
```

# android - for循环后已安装应用程序的重复条目

> ID：11708659
> 
> 赞同：0
> 
> 时间：2012-07-29T10:55:30.537
> 
> 标签：android, loops, android-permissions

我正在尝试获取在我的应用程序中使用我的位置权限的应用程序列表，并且我正在尝试获取使用位置权限的应用程序：

```
 public void getPermissions(Context context) {
        PackageManager packageManager = context.getPackageManager();
        final List<PackageInfo> apps = context.getPackageManager()
            .getInstalledPackages(PackageManager.GET_PERMISSIONS);

        for (PackageInfo pi : apps) {
            String[] permissions = pi.requestedPermissions;
            if (permissions != null) {
                for (String permission : permissions) {
                    Log.d("TAG", permission);
                                if (permission.equals("android.permission.ACCESS_FINE_LOCATION") || permission.equals("android.permission.ACCESS_COARSE_LOCATION") || permission.equals("android.permission.ACCESS_MOCK_LOCATION") || permission.equals("android.permission.ACCESS_LOCATION_EXTRA_COMMANDS") || permission.equals("android.permission.ACCESS_INSTALL_LOCATION_PROVIDER")) {

                                    String appname=pi.applicationInfo.loadLabel(packageManager).toString();
                                    //ImageView appicon;

                                    //appicon = pi.applicationInfo.setImageDrawable(packageManager);
                                    // Log.e("TAG", "Permission found for "+ appname);

                                    locationArray.add(appname);
                                }
                }
            }
        }
   } //end of getPermissions method 
```

但是有了这个我会得到多个条目，比如

```
Angry Birds
Angry Birds
CWM
CWM
CWM
Facebook 
```

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:03:55.873

获得重复条目是正常的，因为您遍历a 的**所有**权限`PackageInfo`并测试每个权限以查看它是否是与位置相关的权限之一。例如，当您迭代 Angry Birds 游戏的权限时，您会遇到两个权限（如果我没记错 ACCESS_FINE 和 ACCESS_COARSE），因为这些权限都满足 if 条件，所以您最终会添加 Angry Birds 两个次。

`for (String permission : permissions)`诀窍是在找到第一个权限时突破：

```
for (String permission : permissions) {
                    Log.d("TAG", permission);
                                if (permission.equals("android.permission.ACCESS_FINE_LOCATION") || permission.equals("android.permission.ACCESS_COARSE_LOCATION") || permission.equals("android.permission.ACCESS_MOCK_LOCATION") || permission.equals("android.permission.ACCESS_LOCATION_EXTRA_COMMANDS") || permission.equals("android.permission.ACCESS_INSTALL_LOCATION_PROVIDER")) {

                                    String appname=pi.applicationInfo.loadLabel(packageManager).toString();
                                    //ImageView appicon;

                                    //appicon = pi.applicationInfo.setImageDrawable(packageManager);
                                    // Log.e("TAG", "Permission found for "+ appname);

                                    locationArray.add(appname);
                                    break;   
                                }
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:08:53.887

如果您不想重复您可以将 locationArray 的所有内容添加到 HashSet（不允许重复）并将 HashSet 添加回 locationArray。

```
// add elements to hs, including duplicates
HashSet hs = new HashSet();
hs.addAll(localArray);
localArray.clear();
localArray.addAll(hs); 
```

现在 localArray 不会有任何重复。

# image - 在图像中查找黑色方块 ( matlab )

> ID：11708661
> 
> 赞同：1
> 
> 时间：2012-07-29T10:55:51.060
> 
> 标签：image, matlab, image-processing

我有数百张纸质表格，我想自动阅读这些表格。第一步是校准扫描的纸张。（找到4个正方形的坐标）

但我不知道如何在matlab中做到这一点:(

这是图片： ![http://i.imgur.com/wR463.png](../Images/bfebab69654c2f267a9ea619fd1c9333.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:57:02.467

这是使用 OpenCV的[解决方案。](https://stackoverflow.com/questions/11532078/how-can-i-detect-registration-markers-on-paper-using-opencv)要检测纸张本身，请参阅[此](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:01:47.543

谢谢哈佛，

这个解决方案帮助了我。这就是我所做的：

```
I = imread('inv-small.png');
BW = edge(I,'canny',0.3);
imshow(BW);
C = corner(BW,4);
imshow(I);
hold on
plot(C(:,1), C(:,2), 'r*');
hold off 
```

结果是 ： ![在此处输入图像描述](../Images/482a7c9bd313af64da746462a33eb76f.png)

# java - URLConnection 似乎早早死去 Java

> ID：11708663
> 
> 赞同：0
> 
> 时间：2012-07-29T10:55:55.640
> 
> 标签：java, http

这是我正在使用的代码

```
 URLConnection connection = null;
    InputStream inputStream = null;
    Scanner scanner = null;

    try {
        connection = new URL("http://www.aol.com").openConnection();
        inputStream = connection.getInputStream();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

    scanner = new Scanner(inputStream);

    System.out.println(connection.getReadTimeout());

    while(scanner.hasNextLine())
    {
        System.out.println(scanner.nextLine());
    } 
```

似乎超时设置为 0，但它总是死在同一个地方，具体取决于我执行此代码的位置。但是每个位置总是在同一个位置停止阅读。我运行了一个调试器，它死后，scanner.next() 没有返回。我知道这不是输入的一部分，因为此代码的不同位置在不同时间停止。我假设它与运行时间有关。

请帮忙 ：-（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:03:16.250

我运行了您的（略微简化的）代码并取回了整个 HTML 页面。

```
final URLConnection connection = new URL("http://www.aol.com").openConnection();
System.out.println(connection.getReadTimeout());
final Scanner scanner = new Scanner(connection.getInputStream());
while(scanner.hasNextLine()) System.out.println(scanner.nextLine());
scanner.close(); 
```

输出：

```
0
<html
   ... many tons of html ...
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:08:21.417

您的代码在这里没有任何问题。您应该检查您的网络连接。您的代理可能非常不响应。尝试使用：

```
new URL("http://www.aol.com").openConnection(Proxy.NO_PROXY); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-29T11:08:44.857

考虑直接从标准 Java SE 类访问 HTTP 数据是低级的。[Apache HTTP 客户端](http://hc.apache.org/httpclient-3.x/)库将处理许多细微差别 - 通常会在代码中显示出来，例如您的问题。如果您遇到配置问题，这实际上可能会透明地处理它们。试试看是否有帮助：

```
HttpClient client = new HttpClient();
client.getHttpConnectionManager().getParams().setConnectionTimeout(5000);
HttpMethod method = new GetMethod("http://www.aol.com");
method.setFollowRedirects(true);
client.executeMethod(method);
String responseBody = method.getResponseBodyAsString();
method.releaseConnection(); 
```

否则，其他解决方案可能会帮助您缩小配置的确切问题，因为您的代码看起来不错。

# c# - windows phone拦截http流并将其重定向到代理地址

> ID：11708665
> 
> 赞同：1
> 
> 时间：2012-07-29T10:56:10.047
> 
> 标签：c#, silverlight, windows-phone-7

嗨，我正在使用 windows phone 7 平台，该应用程序为移动 3G（压缩图像、声音、视频）提供与 onavo 相同的优化服务（[http://bloguedegeek.net/2011/05/11/onavo-mise -a-lessai-du-compresseur-de-donnees-cellulaires/](http://bloguedegeek.net/2011/05/11/onavo-mise-a-lessai-du-compresseur-de-donnees-cellulaires/) ) 。我的意思是压缩是由代理服务器完成的，问题是如何拦截 http 流并将其重定向到代理地址。

有没有人可以提供有用的信息。

# c++ - QuantLib + Python：TARGET() 宏和默认日历（RuntimeError：选项已过期）

> ID：11708666
> 
> 赞同：1
> 
> 时间：2012-07-29T10:56:12.017
> 
> 标签：c++, python, quantlib, quantlib-swig

我正在使用 Quantlib 对历史数据进行计算。

设置所需的框架（曲线等）后，当我调用时，`option.ImpliedVolatility()`我得到以下异常抛出（对于已过期的选项）：

```
 File "/usr/local/lib/python2.6/dist-packages/QuantLib/QuantLib.py", line 3683, in impliedVolatility
    def impliedVolatility(self, *args): return _QuantLib.VanillaOption_impliedVolatility(self, *args)
RuntimeError: option expired 
```

用于设置所需曲线等的代码行片段如下所示：

```
 dividend_yield = YieldTermStructureHandle(FlatForward(0, TARGET(), div_yield, Actual365Fixed()))
        risk_free_rate = YieldTermStructureHandle(FlatForward(0, TARGET(), rf_rate, Actual365Fixed()))
        volatility = BlackVolTermStructureHandle(BlackConstantVol(0, TARGET(), annualized_histvol, Actual360())) 
```

我**强烈**怀疑使用的`TARGET()`宏默认为当前系统日期。

如何设置图书馆以使用特定的历史日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:06:50.700

评估日期是通过运行来设置的，比如说，

```
Settings.instance().evaluationDate = Date(14,March,2010) 
```

在计算之前。如果未设置，则默认为您怀疑的当前日期。

TARGET 日历只是告诉曲线哪些日子是假期，但对评估日期本身没有影响。

# c++ - C++ Singleton 类 getInstance (as java)

> ID：11708667
> 
> 赞同：2
> 
> 时间：2012-07-29T10:56:24.930
> 
> 标签：c++, singleton

> **可能重复：**
> [任何人都可以为我提供 C++ 中的 Singleton 示例吗？](https://stackoverflow.com/questions/270947/can-any-one-provide-me-a-sample-of-singleton-in-c)
> [C++ Singleton 设计模式](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)
> [C++ 不同的单例实现](https://stackoverflow.com/questions/11580461/c-different-singleton-implementations)

我需要一些 C++ 类中的 Singleton 示例，因为我从未编写过这样的类。对于java中的一个例子，我可以声明一个私有的静态字段，它在构造函数中初始化，一个方法getInstance也是静态的，并返回已经初始化的字段实例。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:57:50.783

```
//.h
class MyClass
{
public:
    static MyClass &getInstance();

private:
    MyClass();
};

//.cpp
MyClass & getInstance()
{ 
    static MyClass instance;
    return instance;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T10:59:04.673

示例：
logger.h：

```
#include <string>

class Logger{
public:
   static Logger* Instance();
   bool openLogFile(std::string logFile);
   void writeToLogFile();
   bool closeLogFile();

private:
   Logger(){};  // Private so that it can  not be called
   Logger(Logger const&){};             // copy constructor is private
   Logger& operator=(Logger const&){};  // assignment operator is private
   static Logger* m_pInstance;
}; 
```

记录器.c：

```
#include "logger.h"

// Global static pointer used to ensure a single instance of the class.
Logger* Logger::m_pInstance = NULL; 

/** This function is called to create an instance of the class.
    Calling the constructor publicly is not allowed. The constructor
    is private and is only called by this Instance function.
*/

Logger* Logger::Instance()
{
   if (!m_pInstance)   // Only allow one instance of class to be generated.
      m_pInstance = new Logger;

   return m_pInstance;
}

bool Logger::openLogFile(std::string _logFile)
{
    //Your code..
} 
```

更多信息：

[http://www.yolinux.com/TUTORIALS/C++Singleton.html](http://www.yolinux.com/TUTORIALS/C++Singleton.html)

# sql - 本地 SQL 数据库接口到云数据库

> ID：11708669
> 
> 赞同：0
> 
> 时间：2012-07-29T10:57:02.370
> 
> 标签：sql, cloud

对不起，如果问题很简单。我们有多个医疗诊所，每个诊所都运行自己的 SQL 数据库 EHR。

无论如何我可以将每个本地 SQL 数据库与云系统连接起来吗？

我本质上想使用当时正在咨询的当前患者数据来生成链接到云的病理请求？谷歌应用程序引擎数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T00:34:52.000

作为一名医学生/软件开发人员，您的这个项目让我非常感兴趣！

如果你不介意我问，你在哪里？我来自英国，不幸的是，由于大多数数据都锁定在专有数据库中，因此这样的系统无法启动。

无论如何，您所说的内容相当复杂，无论您在哪个国家/地区，我认为在处理患者数据的任何云系统周围都必须进行*大量检查/安全。*但从理论上讲，理想情况下您想做的是创建一个在线数据库（云、托管、内部网等），然后完全废弃本地数据库。

然后，每个诊所可以从一个“池”数据中提取信息（即患者#3563 的所有记录）。然后他们可以编辑该数据和/或插入新记录并保存它们，将它们导出回主数据库。

如果需要将某些信息保密给一家诊所，这仍然可以通过多种方式在一个数据库上实现，或者您可以保留本地数据库的部分内容，并根据请求将它们与云数据合并由诊所

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T02:20:54.093

这可能有点过时了，但你们应该查看[https://www.firebase.com/](https://www.firebase.com/)。它会让你很容易地做你想做的事。我们只是为与您完全相同的业务的客户进行了此操作。

基本上，Firebase 允许您使用云上的中央数据库，该数据库会自动与其所有前端同步。它甚至可以自动处理失去与服务器的连接。这是迄今为止我发现的最好的解决方案，可以让多个系统仅针对一个云数据库运行。

我们曾经有自己的后端，它会尽力同步更改，但是您需要非常小心您的表的系统间唯一 ID（即转到其中一个分支并创建一个新用户不会产生与任何其他分支或中央数据库中已存在的 ID 相同）。它很快变得很麻烦。

CakePHP 可以很容易地自动生成这种唯一 ID，但是您仍然需要将所有本地数据库与中央存储库同步。

# java - JFrame.repaint() 和 JPanel.repaint() 之间的区别

> ID：11708678
> 
> 赞同：8
> 
> 时间：2012-07-29T10:58:35.383
> 
> 标签：java, swing

`JPanel.repaint()`可以请任何人解释方法和方法之间的区别`JFrame.repaint()`，我猜两者都调用`paintComponent()`JPanel 中的方法。

请澄清一下，谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-29T11:06:25.007

调用`repaint()`任何组件都会向重绘管理器添加一个请求以绘制该组件。如果条件正确，管理器将安排`paint(...)`调用组件的方法。由于组件的绘制方法随后将调用`paintComponent(...)`，这将使组件自身绘制，其边框`paintBorder(...)`和`paintChildren(...)`级联绘制递归到其所有子级、它们的子级、其子级的子级等。在 JFrame 上调用此函数将导致整个级联发生整个顶级窗口，而在子组件上调用它只会导致该组件及其子组件的重新绘制。

请注意，调用`repaint()`并不能保证重绘管理器将绘制组件，尤其是在有堆叠请求的情况下。有关详细信息，请阅读[AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-29T11:02:08.557

**1.**当`repaint()`方法被调用时，**事件处理线程通知所有组件，然后每个组件调用它们的** `paintComponent()` **方法。**

**2.**调用`JPanel.repaint()`会将**JPanel 内的所有组件变为** `repaint()`，调用`JFrame.repaint()`会将**JFrame 内的所有组件变为** `repaint()`。

**3.**调用**JFrame.repaint() 也可以重新绘制 JPanel，而不需要 JPanel.repaint()....**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-11T18:00:57.070

简单来说，

*   `JPanel.repaint()`将重新绘制自己和它的孩子。
*   `JFrame.repaint()`将重新绘制自己和它的孩子。但由于`JFrame`是基础，这将重新绘制其中的每个组件。

详情请查看“@Hovercraft Full Of Eels”答案。

# jar - 在 EMR 上运行 mahout RecommenderJob

> ID：11708688
> 
> 赞同：1
> 
> 时间：2012-07-29T11:00:33.387
> 
> 标签：jar, mahout, amazon-emr, emr

我正在尝试在亚马逊 EMR 上运行 RecommenderJob。我有一个名为 SmartJukebox.jar（不可运行）的 jar，它包含一个 main.TrackRecommander 类（仅此而已）。

我用 jar 创建了一个工作流程：

s3n://smartjukebox/SmartJukebox.jar

和参数：

main.TrackRecommander --input s3n://smartjukebox/ratings.csv --output s3n://smartjukebox/output --usersFile s3n://smartjukebox/user.txt。

TrackRecommander 类使用 RecommenderJob 类。

我运行作业流程，我在错误日志中得到了这个 -

> 在 sun.reflect.NativeMethodAccessorImpl.invoke0（Native方法）在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在org.apache.hadoop.util.RunJar.main(RunJar.java:156) 原因：java.lang.ClassNotFoundException：org.apache.mahout.cf.taste.hadoop.item.RecommenderJob at java.net.URLClassLoader$1。在 java.net.URLClassLoader.findClass(URLClassLoader.java:190) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:306) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247) ... 还有 6 个

现在我看到 JVM 找不到 RecommenderJob 并且我没有将 RecommenderJob 放入我的 jar 中。我以为 EMR 会内置 mahout 罐子，但我找不到任何相关信息。

这里的解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T11:50:43.090

您将需要创建一个作业 jar，其中包含运行代码所需的所有类，其中也包括 mahout 类。看看 [https://github.com/tdunning/MiA](https://github.com/tdunning/MiA)

检查如何使用 pom.xml 中的 maven 程序集插件和 src/main/resources 目录中的 job.xml 创建作业 jar。如果您排除了 hadoop 类，那么您可以在任何 hadoop 实例上运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:37:43.497

你的问题正是你所说的：“我没有把 RecommenderJob 放在我的罐子里。” 除非你把这些类放在你的 JAR 中，否则它当然是找不到的。为什么 EMR 会内置此功能？首先将 Mahout“.job”文件类添加到您的 JAR。

# c++ - 在 C++ 中添加两个字符串

> ID：11708690
> 
> 赞同：1
> 
> 时间：2012-07-29T11:00:46.787
> 
> 标签：c++, visual-c++

> **可能重复：**
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)

在 csharp 中

```
string s1="12345"
string s2="54321"

public double (string s1,string s2)
{
  convert.todouble(s1) +convert.to-double(s2)
} 
```

我在 C++ 中怎么做，因为没有转换类

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T11:07:25.530

除了其他答案之外，最简单的方法（至少在 C++11 中）是：

```
double add(const std::string &s1, const std::string &s2)
{
    return std::stod(s1) + std::stod(s2);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T11:06:40.247

如果您的编译器支持 C++11，则有一个`stod`将字符串转换为双精度的函数。

你的功能将只是

```
return std::stod(s1) + std::stod(s2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T11:04:26.497

使用`boost::lexical_cast`例如。

```
double func (const std::string& s1, const std::string& s2)
{
    return boost::lexical_cast<double>(s1) + boost::lexical_cast<double>(s2);
} 
```

或使用`std::stringstream`等`strtod`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T11:04:32.030

```
double doubleFromString(const std::string &str)
{
    std::istringstream is(str);
    double res;
    is >> res;
    return res;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T11:06:20.403

c ++ 11包含`std::stod`将a转换`string`为double。否则，您可以使用`stringstreams`or `boost::lexical_cast<double>`。因此，您的选择是：

```
return std::stod(s1) + std::stod(s2); //(c++11 only), or:
return boost::lexical_cast<double>(s1) + boost::lexical_cast<double>(s2); //or:
std::stringstream ss1(s1);
std::stringstream ss2(s2);
double a, b;
ss1>> a;
ss2>>b;
return a+b; 
```

当然你也可以走 c 路线并使用`sprintf`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-29T13:21:06.997

我会使用字符串流，因为您不需要对 c++11 的支持。

[cplusplus.com 中的这篇文章回答了您的问题： http](http://www.cplusplus.com/reference/iostream/istringstream/istringstream/) ://www.cplusplus.com/reference/iostream/istringstream/istringstream/

但这就是我要做的：

```
#include <string>
#include <sstream>

double function (std::string s1, std::string s2)
{
    std::istringstream iss (std::string(s1 + " " + s2), std::istringstream::in);
    double a, b;
    iss >> a;
    iss >> b;

    return a + b;
} 
```

# jquery - 以任何服务器语言使用 AJAX 过滤结果的正确方法

> ID：11708692
> 
> 赞同：0
> 
> 时间：2012-07-29T11:01:21.143
> 
> 标签：jquery, ajax, filtering

我有一个处理酒店搜索的控制器（带有 RoR，但假设我有一些服务器正在监听请求）。默认搜索是**按城市**，因此给定一个城市，控制器将查找该城市的所有酒店。

呈现该视图后，我有一个表单可以让您过滤结果。我的问题是：

我应该如何保存用户偏好（过滤器和城市）的当前状态，以便再次将它们发送到控制器操作？

因此，假设用户点击**sort by price**，并通过 AJAX 我想获取按价格排序的给定城市（之前选择的）的酒店。我怎么知道他之前选择了哪个城市？我是否需要将其存储在隐藏字段中，或者这样做的适当方式是什么？

如果在按价格过滤订单后，用户选择了豪华酒店选项，则会出现同样的问题。我需要按给定城市获取酒店，按价格和奢侈品类别排序。我应该在哪里存储搜索的先前状态？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:29:42.160

您可以将先前的状态简单地存储在 JavaScript 变量或隐藏的表单字段中。两者都可以，正确的选择将更多地取决于您的代码设计，而不是任何类型的功能/性能问题。如果您无法确定哪种方式更适合您的特定情况，请不要担心，因为它可能无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:36:22.230

您可以在用户每次按下 sortBy 时发送所有排序选项，因此每次您的控制器获取城市和价格时，您的 sql 将看起来像“..WHERE city='city1' ORDER BY price ASC, anotherOption DESC”并保存每个用户的结果：我认为最好的地方是 cookie。您还可以仅按 cookie 对结果进行排序，并仅在获得 smth 时更改它们。来自 ajax 调用的新功能。

# python - 如何在 Pymacs 中加载 GTK 程序

> ID：11708696
> 
> 赞同：3
> 
> 时间：2012-07-29T11:01:34.690
> 
> 标签：python, emacs, pymacs

您好我正在尝试编写一个 Python 程序来保存 Emacs 的文件，以防止失去窗口焦点。

为此，我编写了一个 Python 程序，它创建了一个完整的 gtk 应用程序并使用了 wnck 模块：

```
from Pymacs import lisp

import wnck
import gtk

class AutoSaver(object):
    """This class watches if Emacs looses focus and if Emacs looses
    focus saves all buffers with files
    """

    def __init__(self):
        """
        """
        self.screen = wnck.screen_get_default()
        self.screen.force_update()
        self.screen.connect("active_window_changed", self.watch_for_emacs)

    def watch_for_emacs(self, screen, data=None):
        screen.force_update()
        win_list = screen.get_windows()
        for win in win_list:
            if win.get_application().get_name().startswith("emacs"):
                self.save_all_buffers()

    def save_all_buffers(self):
        lisp.save_some_buffers(True, None)

    def main(self):
        """
        Starts GTK's main loop.
        """
        gtk.main()

def start():
    autosaver = AutoSaver()
    autosaver.main()

start.interaction = '' 
```

不幸的是，Python 程序冻结了 Emacs；可能是因为 Emacs 等待程序完成。有没有办法让程序在后台运行？

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:50:29.470

Pymacs 主要只是意味着您可以在 python 中编写 emacs 扩展。它不是 IPC 方法。

如果你想让两个程序同时运行并在外部事件发生时互相发送消息，你需要 IPC。

现代 Linux 系统上一种非常常见的 IPC 形式是（可怕的无证）dbus。Emacs 支持 dbus（这似乎也没有很好的文档记录）。

但是，[here（rakete 的回答）是一个非常好的示例，说明如何为 emacs 函数提供 dbus 接口](https://stackoverflow.com/questions/4474290/how-do-i-use-emacss-dbus-interface)。

因此，您可能想要做的是在 emacs 中创建一个“安全缓冲区”方法，将其注册为可从 dbus 访问，启动程序以监视未聚焦事件并通过 dbus 调用该“安全缓冲区”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:52:50.547

我制作了[Python-EPC](https://github.com/tkf/python-epc)，一个用 Python 实现的 EPC 服务器。EPC 是一个 RPC 堆栈，专为 Emacs Lisp 设计。使用 Python-EPC，您可以从 Emacs 调用 Python 函数，从 Python 调用 Emacs Lisp 函数。这是与 GTK 集成的示例：[https ://github.com/tkf/python-epc/blob/master/examples/gtk/server.py](https://github.com/tkf/python-epc/blob/master/examples/gtk/server.py)

# numerical-methods - 计算第一类修正贝塞尔函数的算法

> ID：11708697
> 
> 赞同：3
> 
> 时间：2012-07-29T11:01:34.913
> 
> 标签：numerical-methods, bessel-functions

你能告诉我一种快速准确的方法来计算 BesselK(mu,z), BesselI(mu,z)，其中 mu 是实数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:02:43.060

有几种方法可以表示贝塞尔函数，但它们都不容易在数学上或封闭形式中完成。然而，这篇论文似乎是最近有效评估它们的方法：

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.120.6055](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.120.6055)

这似乎比 1950 年代的老式方法更好：

[http://www.ams.org/journals/mcom/1959-13-066/S0025-5718-1959-0105794-5/S0025-5718-1959-0105794-5.pdf](http://www.ams.org/journals/mcom/1959-13-066/S0025-5718-1959-0105794-5/S0025-5718-1959-0105794-5.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T18:41:00.957

除了看到它可以工作之外，我还没有时间自己对其进行广泛而详尽的测试，但是用于 Java 的 Colt 库在 cern.jet.math 包中包含整数阶 Bessel 函数。

[https://dst.lbl.gov/ACSSoftware/colt/](https://dst.lbl.gov/ACSSoftware/colt/)

我也高度认可数学函数数字图书馆：

[http://dlmf.nist.gov/](http://dlmf.nist.gov/)

# php - CodeIgniter - 用户应该只能访问他们自己的图像

> ID：11708702
> 
> 赞同：1
> 
> 时间：2012-07-29T11:02:51.023
> 
> 标签：php, codeigniter, session, permissions

我目前正在尝试使用 CodeIgniter 开发一个图片上传网站。问题是，我今天遇到了一个问题，我非常感谢任何形式的帮助来解决它。

所以基本上，该网站正在运行。但问题是，这些文件不是私有的。用户可能希望确保用户上传的文件仅对他们可见，而不是仅由猜测一堆 url 的人可见。（例如，user1 上传了他想要保密的 image1，对于他自己 =>[localhostlocalhost/upload_script/files/image1.jpg]，user2 可以通过猜测和输入 url [localhost/upload_script/files/image1.jpg] 来访问 image1这是我们不希望发生的事情。）我已经做了一些研究，我认为这可能需要另一个控制器来提供文件（检查会话数据）。在过去很长一段时间里，我一直在“玩”PHP 中的会话等，但我在 CodeIgniter 中对它们并不熟悉。这是唯一的方法吗？我不 不认为我需要为每个用户创建单独的目录，是吗？你能告诉我如何走向正确的方向或给我一个例子吗？

提前致谢，

哈里斯21

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:57:39.903

为了保护文件，您需要将它们保存在您的 Web 根目录之外，否则人们将始终能够通过*url 破解*他们的方式。

我已经为 apache 使用了非常方便的[mod_xsendfile](https://tn123.org/mod_xsendfile/)（如果您对服务器具有这种访问权限），这将允许您提供可以通过访问控制保护的文件，并且在没有适当凭据的情况下无法访问。

您可以放入 CI 控制器中以显示图像的代码片段（改编自 mod_xsendfile 页面）：

```
...
if ($user->isLoggedIn())
{
    header("X-Sendfile: $path_to_somefile");
    header('Content-Type: image/jpeg');
    exit;
} 
```

If you cannot install mod_xsendfile then your only other option would be to use `readfile()` as TheShiftExchange says.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T11:10:49.020

使用 PHP 返回图像并将图像目录锁定在网络服务器根目录后面。这样，在提供图像之前，您可以通过会话变量检查用户凭据，确保允许他查看图像。否则，您可以将用户直接重定向回网站，提醒他他无权访问。像这样提供图像比通过网络服务器（apache、nginx、...）提供图像要慢得多，但它可以让您控制图像的下载。

更准确地说，将图像详细信息保存在数据库中，例如具有以下列：id、file_path、title、uid。每次用户想要下载图像时，例如调用[http://domain.com/files/download/3](http://domain.com/files/download/3)，您可以检查是否可以为当前登录的用户下载 id 为 3 的图像。您需要编写自己的控制器来执行此操作。

我在这里做类似的事情[http://www.mediabox.si/](http://www.mediabox.si/)你可以检查图像是如何提供的。我允许缩略图图像，并且我正在为普通访问者可见的较大图像添加水印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T14:50:43.627

唯一的方法是将图像存储在 public_html 之外。否则，根据定义，您将打开文件以直接访问。

使用控制器检查是否允许用户访问文件，并使用 php 函数 readfile() 来提供文件

您可以在此处阅读我的其他问题之一的一些代码：[此 PHP 函数是否可以防止文件横向传输？](https://stackoverflow.com/questions/10492935/does-this-php-function-protect-against-file-transversal)

这实际上非常快 - 你根本不会注意到性能下降

# python - pip 和 virtualenv (w/o virtualenvwrapper): pip install package_name 授予权限被拒绝但使用 sudo 全局安装

> ID：11708708
> 
> 赞同：1
> 
> 时间：2012-07-29T11:04:09.607
> 
> 标签：python, linux, installation, virtualenv

我有`neurolab`包版本`0.2.0`在`/usr/local/lib/python2.7/dist-packages`. 现在我想在虚拟环境中安装`neurolab`版本。`0.1.0`

这是在安装 pip 和 virtualenv 之后：

```
~$ mkdir neuro_env
~$ cd neuro_env
~/neuro_env$ virtualenv envi
~/neuro_env$ source envi/bin/activate
(envi)~/neuro_env$ pip install neurolab==0.1.0 
```

然后安装失败，在错误的最后一行：

```
IOError: [Errno 13] Permission denied: '/home/username/.pip/pip.log' 
```

但是当我使用这样的权限安装它时：

```
(envi)~/neuro_env$ sudo pip install neurolab==0.1.0 
```

然后版本`0.1.0`只是再次全局安装（在`/usr/local/lib/python2.7/dist-packages`）

我读到我可以使用 -E 标志，但这似乎不再可能： `error: no such option: -E`

那么如何仅为我的项目安装`neurolab`版本呢？`0.1.0``~/neuro_env`

## 编辑

```
(envi)~/neuro_env$ ls -l /home/username/.pip
total 4
-rw-r--r-- 1 root root 874 2012-07-28 13:18 pip.log 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T11:29:24.997

问题是您的`/home/username/.pip/pip.log`文件只能由 root 写入，因此当您尝试以`pip`其他用户身份使用时，您无权更新日志文件并且整个操作失败。

更改日志文件的所有权（使用`sudo chown username:username /home/username/.pip/pip.log`）或删除它（使用`sudo rm /home/username/.pip/pip.log`）应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T18:28:34.283

如果您使用的是窗户。输入 powershell 或终端：

```
python -m pip install WHATEVER 
```

# android - 在安装 MyFbApp.apk 之前以编程方式安装 facebook.apk

> ID：11708714
> 
> 赞同：1
> 
> 时间：2012-07-29T11:04:36.840
> 
> 标签：android, facebook

我正在开发一个需要安装 facebook 应用程序的 fb 应用程序，所以我正在尝试的是，当用户安装我的应用程序时，应该首先安装 facebook.apk .. 有没有办法做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:21:06.233

您可以检查是否以这种方式安装了 facebook 应用程序

```
 PackageManager pm = getPackageManager();
    boolean appInstalled = false;
    try
    {
           pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
           appInstalled = true;
    }
    catch (PackageManager.NameNotFoundException e)
    {
           appInstalled = false;
    } 
```

Facebook 应用程序 uri 在我看来是`com.facebook.katana`，但你可以通过 adb 检查然后你最终可以开始 Intent 标题到 Google Play 上的 Fecebook 页面。希望这会有所帮助

# heroku - 到 Heroku 的 SSL 通配符证书

> ID：11708715
> 
> 赞同：4
> 
> 时间：2012-07-29T11:04:39.857
> 
> 标签：heroku, dns, ssl-certificate

我最近刚刚将 SSL 端点插件添加到我的“示例”应用程序中，并将我的 SSL 证书和私钥从 DNSimple 更新到 Heroku（根据这篇文章： [http ://ryan.mcgeary.org/2011/09/16 /how-to-add-a-dnsimple-ssl-certificate-to-heroku/](http://ryan.mcgeary.org/2011/09/16/how-to-add-a-dnsimple-ssl-certificate-to-heroku/) ）感谢这个命令：

```
$ heroku certs:add STAR_example_com-bundle.pem STAR_example_com-private.key --app example
Adding SSL endpoint to example... done
example now served by oita-4417.herokussl.com
Certificate details:
    subject: /OU=Domain Control Validated/OU=EssentialSSL Wildcard/CN=*.example.com
    start date: 2012-07-28 02:00:00 CEST
    expire date: 2013-07-29 01:59:59 CEST
    common name(s): *.example.com, example.com
    issuer: /OU=Domain Control Validated/OU=EssentialSSL Wildcard/CN=*.example.com
    SSL certificate is verified by a root authority. 
```

[但是现在，当我尝试使用https://example.com （以及](https://example.com)[https://foo.example.com](https://foo.example.com)等子域）访问我的应用程序时，我有一个警告（在一个大红页内，使用 Chrome )...

我该如何解决这个问题？也许我得等几个小时？谢谢！

# php - 使用 XML 文件的 PHP 反射

> ID：11708716
> 
> 赞同：1
> 
> 时间：2012-07-29T11:04:47.393
> 
> 标签：php, xml, reflection

我想使用反射类从 XML 文件创建一个 PHP 对象。

是否有任何 API 可以将 PHP 对象（属性、方法）转换为 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:11:55.797

看看 PEAR 的[XML_Serializer](http://pear.php.net/package/XML_Serializer/redirected)

# java - 创建证书时将 IP 地址作为主机名 (CN)？（HTTPS 主机名错误：应该是 )

> ID：11708717
> 
> 赞同：13
> 
> 时间：2012-07-29T11:05:14.147
> 
> 标签：java, ssl, https, keytool

> **可能重复：**
> [如何解析 SSL 证书服务器名称/我可以使用 keytool 添加替代名称吗？](https://stackoverflow.com/questions/8443081/how-are-ssl-certificate-server-names-resolved-can-i-add-alternative-names-using)

我创建了一个证书并将 CN 设置为我的服务器的 IP 地址，格式为 xxx.xxx.xxx.xxx。但是当我尝试在 Java 中运行我的代码时，我收到一条`HTTPS hostname wrong: should be <xxx.xxx.xxx.xx>`错误消息。

有什么问题？我确定我正在连接到正确的 IP 地址。但是，我没有在证书上指定服务器的端口。为 CN 提供值时是否需要端口？但我使用的是 https 的默认端口，即 8443。此外，我尝试将我的 CN 从服务器的 IP 地址更改为“localhost”。之后它就起作用了。我在想如果 CN 部分不接受 IP 地址作为值？

您能否解释一下 CN 的工作原理以及它所需的值是什么？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-29T16:13:33.083

您需要放入证书中的身份必须是您通过 URL 查找的身份。例如，如果您使用的是`https://www.example.net`，您的证书需要对`www.example.net`;有效。如果您正在使用`https://10.0.0.1/`，您的证书需要对`10.0.0.1`.

证书的主题 DN 中的通用名称 RDN 通常仅在 (a) 没有主题备用名称 DNS 条目和 (b) 它正在寻找主机名而不是 IP 地址时使用。这在[RFC 2818 第 3.1 节](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)中定义：

> 如果存在 dNSName 类型的 subjectAltName 扩展，则必须将其用作身份。否则，必须使用证书主题字段中的（最具体的）通用名称字段。尽管使用通用名称是现有的做法，但它已被弃用，并且鼓励证书颁发机构使用 dNSName 代替。
> 
> [...]
> 
> 在某些情况下，URI 被指定为 IP 地址而不是主机名。在这种情况下，iPAddress subjectAltName 必须出现在证书中，并且必须与 URI 中的 IP 完全匹配。

一般来说，不建议在证书中使用 IP 地址（请参阅[RFC 6125](https://www.rfc-editor.org/rfc/rfc6125#section-1.7.2)中提到的问题。但是，如果您确实需要，则需要一个 IP 地址为 IP 地址类型的 SAN 条目的证书，您可以生成如[本答案](https://stackoverflow.com/a/8444863/372643)所述。

# jsp - 自定义 Taglib 编译错误

> ID：11708719
> 
> 赞同：0
> 
> 时间：2012-07-29T11:05:26.450
> 
> 标签：jsp, jsp-tags, taglib

我正在尝试为我的自定义标签创建一个标签库。但是我在 Eclipse IDE 中遇到编译错误。这是我的 TagLib 描述：

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
  <tlib-version>1.0</tlib-version>  
  <uri>MyFunction</uri>
  <function>
      <name>myFunc</name>
      <function-class>com.tldcls.MyClass</function-class>
      <function-signature>int age()</function-signature>
  </function> 
</taglib> 
```

我在标签上收到编译错误。错误告诉：

```
cvc-complex-type.2.4.a: Invalid content was found starting with element 'uri'. 
```

我无法弄清楚问题出在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T13:21:34.483

文件 (http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd) 中提到的 XSD 显示 taglib 元素具有以下子元素，按此顺序

*   `tlib-version`
*   `short-name`
*   `uri`
*   ...

不是可选的`short-name`，它应该是用于此标记库的建议前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T10:15:50.780

存在 XSD 版本错误。

您可以使用 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee [http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd](http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd) "。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T21:06:19.327

uri 的模式定义指向“anyURI”类型，

[https://www.w3.org/TR/xmlschema-2/#anyURI](https://www.w3.org/TR/xmlschema-2/#anyURI)

这指的是 XLink href 属性，该属性又指的是 RFC 2396，它反过来说 URI 如下所示，

```
<scheme>:<scheme-specific-part> 
```

# javascript - 如何使用 Rhino 构建 PEG.js 0.7.0 解析器（Java SE 6 ScriptEngine API）

> ID：11708721
> 
> 赞同：2
> 
> 时间：2012-07-29T11:05:32.417
> 
> 标签：javascript, rhino, parser-generator, scriptengine, pegjs

我一直在使用 PEG.js 版本 0.6.1 成功地使用 Maven 插件（即从 Java 代码调用 PEG.js）构建解析器，但现在在尝试升级到新版本时，它失败并显示错误消息：

`sun.org.mozilla.javascript.internal.EcmaError: SyntaxError: missing ; before statement (#3213(eval)#1) in #3213(eval) at line number 1`

在调试时，我注意到来自 PEG.buildParser() 函数调用的解析器看起来在语法上是错误的，而从浏览器调用它时当然不会发生这种情况。

我是这样称呼它的：

```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine jsEngine = manager.getEngineByName("JavaScript");

jsEngine.eval(new InputStreamReader(this.getClass().getResourceAsStream(PEGJS_LIB)));

Invocable invok = (Invocable) jsEngine;
Object peg = jsEngine.get("PEG");

invok.invokeMethod(peg, "buildParser", grammarSource); 
```

其中，`grammarSource`在我的测试用例中，是网站中用作[示例](http://pegjs.majda.cz/online)的基本语法，而`PEGJS_LIB = peg-0.7.0.js`.

欢迎任何想法！我这里已经用完了...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T12:21:09.387

我追查了这个问题的原因。'PEG.compiler.emitter.Codie.pushRaw.unndent()' 第 3681 行破坏了模板。我还没有完全确定这个函数对解析器有多重要，但它似乎是一个“很高兴拥有”。我在本地替换了函数的主体，Rhino 按预期工作。

```
function unindent(code, level, unindentFirst) {
  return code
} 
```

我知道 David 对支持 Rhino 不感兴趣，但我想我应该在这个线程上分享这个，以便其他人可以根据需要解决问题。

# cakephp - Cakephp 多对多同一张桌子

> ID：11708722
> 
> 赞同：2
> 
> 时间：2012-07-29T11:05:37.993
> 
> 标签：cakephp, many-to-many

我是 CakePHP 的新手，所以请放轻松。

我有这个问题，我似乎无法解决。我有一个“联系人”表，并希望该表与其自身具有多对多关系。目的是显示一个联系人与同一公司的其他联系人相关。因此，当单击联系人的个人资料时，我将能够查看与该特定人员相关的其他联系人。

我不知道如何处理这个问题。我正在考虑一个连接表，但似乎不可能？或者我可能是错的。如果有人知道如何做到这一点，请留下尽可能多的细节，以便我能够理解如何做到这一点（正如我之前所说的那样，我是 CakePHP 的新手）。

谢谢！！

编辑：尝试了 User996302 所述的方法，但仍然无法正常工作。

这是关系的 Contact 模型的一部分：

```
public $hasAndBelongsToMany = array( 'Relation' => array( 'className' => 'Contact', 'joinTable' => 'contacts_contacts', 'foreignKey' => 'contact_id', 'associationForeignKey' => 'related_id', 'unique' => true, 'conditions' => '', 'fields' => '', 'order' => '', 'limit' => '', 'offset' => '', 'finderQuery' => '', 'deleteQuery' => '', 'insertQuery' => '' ) ); 
```

我在控制器中使用 saveAll 函数。在控制器的添加部分，最后我有这个：

```
$relations = $this->Contact->Relation->find('list');     $this->set(compact('relations')); 
```

在添加视图页面中，我有这行代码来显示选择框：

```
echo $this->Form->input('Relation', array('type'=>'select', 'multiple' => true)); 
```

我有一个联系人和一个 contacts_contacts 表。contacts_contacts 表具有三个属性：id、contact_id、related_id。

我已经完成了所有这些，但表单中的选择列表没有显示任何我可以选择的联系人。不确定问题出在哪里。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:59:20.550

这些链接应该对您有所帮助：[example](http://tomscrape.com/content/cakephp-self-referencing-habtm)，[SO question on the question](https://stackoverflow.com/questions/1801187/self-referential-manytomany-convention-in-cakephp)。

编辑以纠正错误。

# android - Android - 带有加密信息的 SMS 节目

> ID：11708724
> 
> 赞同：0
> 
> 时间：2012-07-29T11:06:07.980
> 
> 标签：android, sms, broadcastreceiver, messaging, inbox

![在此处输入图像描述](../Images/5c9be9486f1fc8ea1132d10df52a1c8c.png)

当我向另一个模拟器发送消息时，我可以成功接收短信。但是还有一条额外的线显示。如何删除第二行？如果使用下面给定的代码更新代码将会很有帮助。

**收件箱类**

```
 public class Inbox extends Activity implements OnClickListener, OnItemClickListener
  {
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.inbox);
    this.findViewById( R.id.btn_updateSMS ).setOnClickListener( this );
}

   ArrayList<String> msgList = new ArrayList<String>();

public void onItemClick( AdapterView<?> parent, View view, int pos, long id ) 
{

}

public void onClick( View v ) 
{

    Cursor cursor = getContentResolver().query( Uri.parse( "content://sms/inbox" ), null, null, null, null);

    int indexBody = cursor.getColumnIndex( SmsReceiver.BODY );
    int indexAddr = cursor.getColumnIndex( SmsReceiver.ADDRESS );

    if ( indexBody < 0 || !cursor.moveToFirst() ) return;

    msgList.clear();

    do
    {
        String str = "Sender: " + cursor.getString( indexAddr ) + "\n" + cursor.getString( indexBody );
        msgList.add( str );
    }
    while( cursor.moveToNext() );

    ListView smsListView = (ListView) findViewById( R.id.msgList );
    smsListView.setAdapter( new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1, msgList) );
    smsListView.setOnItemClickListener( this );
}
 } 
```

**短信接收类**

```
 public class SmsReceiver extends BroadcastReceiver 
  {

  public static final String ADDRESS = "address";

  public static final String BODY = "body";

  private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
  private static final String TAG = "SMSBroadcastReceiver";

public void onReceive( Context context, Intent intent ) 
{

    if (intent.getAction() == SMS_RECEIVED) {
        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            Object[] pdus = (Object[])bundle.get("pdus");
            final SmsMessage[] messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
            }
            if (messages.length > -1) {
                Log.i(TAG, "Message recieved: " + messages[0].getMessageBody());
            }
        }
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:57:46.510

当您填写短信列表时，只需添加一个计数器`i=1`，每次向列表中添加一条短信时，将其递增。只有在`i%2!=0`.

在我的例子中：

```
public List<String> getSMS() {      
    List<String> list = new ArrayList<String>();
    Uri uri = Uri.parse("content://sms/inbox");
    Cursor c = null;
    try{
        c = getApplicationContext().getContentResolver().query(uri, null, null ,null,null); 
    }catch(Exception e){
        e.printStackTrace();
    }
    try{
        int i=1;
        for (boolean hasData = c.moveToFirst(); hasData; hasData = c.moveToNext()) {
            final String address = c.getString(c.getColumnIndex("address"));
            final String body = c.getString(c.getColumnIndexOrThrow("body"));
            //Android cripta i messaggi, quindi non devo aggiungerli alla lista:
            if(i%2!=0)
                list.add("Number: " + address + " .Message: " + body);
            i++;
        }
    }catch(Exception e){
        e.printStackTrace();
    }

    // c.close(); 
    return list;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:09:33.803

并没有真正解决您的问题，但为什么只是自己删除它的明显方法是一个问题？只需寻找（最有可能的）换行符并将该部分从消息的开头删除到该位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:32:56.563

`\n`在这里删除：

```
 do
    {
        String str = "Sender: " + cursor.getString( indexAddr ) + "\n" + cursor.getString( indexBody );
        msgList.add( str );
    }
    while( cursor.moveToNext() ); 
```

改用`<br>`html 标签。确保通过`fromHtml()`函数解析字符串：

就像是 ：`textView.setText(Html.fromHtml(str));`

还要避免其他特殊字符，如撇号（`'`）..

# javascript - 从另一个域寻找视频位置宽度视频

> ID：11708725
> 
> 赞同：0
> 
> 时间：2012-07-29T11:06:08.717
> 
> 标签：javascript, flash, video, jwplayer, seek

[http://www.67games.com/video.html](http://www.67games.com/video.html)

视频开始后您会注意到，如果您尝试跳到视频中的另一个位置，它将重置并重新开始。所以这就是问题所在。

如您所见，来源是外部的。这使用 JW 播放器，但我已经尝试与其他播放器一起使用。

我尝试过使用其他主机和视频格式，但问题相同。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:01:21.367

我认为另一个服务器/域上的源媒体文件与您的问题没有任何关系。

您在这里有一个渐进式下载视频，并且可以很好地找到下载点。是的，如果您尝试越过最后下载的标记，它会从头开始重新启动，但这是可以预料的。（客户如何寻找它甚至还没有的数据？）

你有两个选择：

*   调整播放器，使其**永远不会尝试超出最后下载的点**。如果您只想拥有这么小的剪辑，那么这个解决方案似乎很好。
*   **将剪辑放在流媒体或 psedu 流媒体服务器后面**。（更适合较长的剪辑。）
    *   *流媒体*：red5、Wowza、FMS 等
    *   *伪流式传输：带有*[mod_h264_streaming](http://h264.code-shop.com/trac)的apache/lighttpd/etc + 一些客户端逻辑表示要流式传输到的位置

# python - gmpy2：如何跟踪 mpc 操作的精度？

> ID：11708729
> 
> 赞同：1
> 
> 时间：2012-07-29T11:06:27.277
> 
> 标签：python, math, precision, gmp

假设我有两个`gmpy2.mpc`对象`x`并且`y`精确到 p 位。当我计算`x+y`时，x 和 y 的某些部分可能会取消，所以我的精度会降低。

例如

```
from gmpy2 import *

x = mpc('-0.55555')
y = mpc('0.5555500000001')
print(x+y) 
```

结果仅精确到 4 个有效数字`x`，并且`y`精确到 ~15。

我认为我需要计算出在进行加法和减法时发生了多少位取消，然后将其从`x`or`y`的精度的最小值中移除。对于乘法和除法，我想我最多只会损失 1 位精度。

所以这个问题很笼统：我如何跟踪`mpc`对象的精度，尤其是在加减对象时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:54:26.283

`mpfr`以下函数将返回两个对象的匹配位数。

```
import gmpy2

def matching_bits(x, y):
    '''Returns the number of bits that match between x and y. The
    sign of x and y are ignored. x and y must be of type mpfr.'''

    # Force both values to be positive, and x >= y.
    x = abs(x)
    y = abs(y)
    if x < y:
        x, y = y, x

    if not isinstance(x, type(gmpy2.mpfr(0))) or not isinstance(y, type(gmpy2.mpfr(0))):
        raise TypeError("Arguments must be of type 'mpfr'.")

    x_bits, x_exp, x_prec = x.digits(2)
    y_bits, y_exp, y_prec = y.digits(2)

    # (x_exp - y_exp) is the number of zeros that must be prepended
    # to x to align the mantissas. If that is greater than the precision
    # y, then no bits in common.
    if (x_exp - y_exp) > x_prec:
        return 0

    x_bits = "0" * (x_exp - y_exp) + x_bits

    count = 0
    while count < min(x_prec, y_prec) and x_bits[count] == y_bits[count]:
        count += 1
    return count 
```

我没有对这个功能进行广泛的测试，但它应该给你一个开始。您将需要分别检查实部和虚部。您可能需要对其进行修改以检查符号以及您是否正在执行加法与减法。

# android - sqlite 匹配运算符

> ID：11708736
> 
> 赞同：0
> 
> 时间：2012-07-29T11:07:17.837
> 
> 标签：android, sqlite

在 Android 上，我想使用与此类似的查询：

```
SELECT docid FROM docs WHERE docs MATCH '("sqlite database" OR "sqlite library") AND linux' 
```

[http://www.sqlite.org/fts3.html#section_3](http://www.sqlite.org/fts3.html#section_3)

问题是我收到“格式错误的匹配表达式错误”。当我进行更基本的匹配查询时，它可以工作，而且似乎问题可能是因为括号。

当我使用完全相同的语句（表列名除外）时，错误是相同的。

完整的错误信息：

```
sqlite 返回：错误代码 = 1，msg = statement aborts at 7: 
[SELECT * FROM namedays WHERE names MATCH '("sqlite database" OR "sqlite library") AND linux';]
格式错误的 MATCH 表达式：[("sqlite database"或“sqlite 库”）和 linux]，db=/data/data/org.xyz/databases/data
```

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:10:49.920

我相信您没有使用 SQLITE_ENABLE_FTS3_PARENTHESIS 选项编译 SQLite。因此，您只能使用[Standard Query Syntax](http://www.sqlite.org/fts3.html#section_3_2)，而不是[Enhanced Query Syntax](http://www.sqlite.org/fts3.html#section_3_1)

您可以通过执行[`compile_options`pragma](http://www.sqlite.org/pragma.html#pragma_compile_options)轻松验证这一点。例如，我们看到我的 sqlite3 没有增强的语法：

```
sqlite> PRAGMA compile_options;
DISABLE_DIRSYNC
ENABLE_COLUMN_METADATA
ENABLE_FTS3
ENABLE_RTREE
ENABLE_UNLOCK_NOTIFY
SECURE_DELETE
TEMP_STORE=1
THREADSAFE=1 
```

# symfony-2.1 - 使用默认 {_locale} 参数链接到索引

> ID：11708739
> 
> 赞同：1
> 
> 时间：2012-07-29T11:07:36.900
> 
> 标签：symfony-2.1

我的项目中有一个语言选择器，可以使用语言环境参数 {_locale} 重定向到索引页面，但是当链接是在 routing.yml 中设置的默认语言环境时，链接看起来不同。这是我的代码：

我在代码中生成链接：

```
<a href="{{ path('ProjectBaseBundle_index', {'_locale': country.idlang}) }}">
    ...
</a> 
```

这是routing.yml：

```
ProjectBaseBundle_index:
    pattern:  /{_locale}
    defaults: { _controller: ProjectBaseBundle:Default:index, _locale: es }
    requirements:
        _locale: en|fr|de|es 
```

这会正确生成所有语言的路线，购买默认的路线看起来不同：

```
http://project.dev/app_dev.php/en
http://project.dev/app_dev.php/fr
http://project.dev/app_dev.php/de
http://project.dev/app_dev.php/?_locale=es 
```

*es*是我们的默认语言代码。我正在使用 Symfony 2.1

**任何人都知道如何为默认语言生成相同的路由？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:22:26.930

发生这种情况是因为要求的条件和提供的参数[`UrlGenerator`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Routing/Generator/UrlGenerator.php#L201)- 通过参数数组传递的未知参数会自动附加到 URL 的末尾作为 GET 参数。

您是否尝试将默认语言环境放入`config.yml` **而不是**将其放入`defaults`路线部分？

**Symfony-2.0**：

```
framework:
    session: { default_locale: es } 
```

**Symfony-2.1**：

```
framework:
    default_locale: es 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:41:30.560

我刚刚发现它是有道理的，因为默认语言的参数 {_locale} 不存在，因此系统将该参数附加为 GET 参数。

我找到了解决方法：

```
ProjectBaseBundle_default:
    pattern: /{_locale}
    defaults: { _controller: ProjectBaseBundle:Default:index , _locale: %locale% }

ProjectBaseBundle_index:
    pattern: /{_locale}
    defaults: { _controller: ProjectBaseBundle:Default:index }
    requirements:
        _locale: en|fr|de|es 
```

我在 Symfony 板上打开了一个问题：[https ://github.com/symfony/symfony/issues/5135](https://github.com/symfony/symfony/issues/5135)

# xamarin.android - Monodroid Spinner 资源引用错误

> ID：11708742
> 
> 赞同：2
> 
> 时间：2012-07-29T11:07:59.973
> 
> 标签：xamarin.android, android-spinner

我正在关注 monodroid 教程中的微调器。但是遇到资源问题。![在此处输入图像描述](../Images/5a1046a38829c6e5468bd41b95c9fddf.png)

它无法在 VS 2010 上查找 SimpleSpinnerItem 和 SimpleSpinnerDropDownItem。我错过了什么吗？

编辑：根据 jonp 创建一个部分类来注册 android 运行时

```
public partial class Resource
{
    public partial class Layout
    {
        [Register("simple_spinner_dropdown_item")]
        public const int SimpleSpinnerDropDownItem = 17367049;
        [Register("simple_spinner_item")]
        public const int SimpleSpinnerItem = 17367048;
    }
} 
```

编辑 2：尝试了全局资源

![在此处输入图像描述](../Images/4304aa11ec45a225564cc98c54bda81e.png)

编辑 3：我的项目命名空间上的冲突

我已经确定了为什么无法识别 const。这是因为我的命名空间 projectname.Android，它被复制了。当我将其更改为 projectname.AndroidMobile 时，全局资源就在那里。

请参阅下面的冲突。

![在此处输入图像描述](../Images/201586b314e4398e224803fe0614a403.png)

此外，为了避免冲突，只需按照 jonp 使用 global::

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T15:44:51.050

您需要限定类，因为有两种`Resource`类型：[一种是项目本地的](http://docs.xamarin.com/android/tutorials/Android_Resources/Part_1_-_Android_Resource_Basics)（`Your.Namespace.Resource`位于 中`Resource.designer.cs`），另一种是[global::Android.Resource](http://androidapi.xamarin.com/)。您需要使用[global::Android.Resource.Layout.SimpleSpinnerItem](http://androidapi.xamarin.com/?link=F%3aAndroid.Resource.Layout.SimpleSpinnerItem)。

# android - 如何将 ProGuard 与 android api 4 (android 1.6) 一起使用？

> ID：11708743
> 
> 赞同：0
> 
> 时间：2012-07-29T11:08:07.283
> 
> 标签：android, proguard

首先，我是 ProGuard 的新手，但我阅读了一些教程，并且我知道在 android 上使用它的最佳方法是 android.developer 指南中描述的方法。

我试图用 ProGuard 混淆我的新 Android 应用程序的代码。为此我进入这个网站：http: [//developer.android.com/tools/help/proguard.html#enabling](http://developer.android.com/tools/help/proguard.html#enabling)

但它告诉：“当你创建一个Android项目时，会在项目的根目录下自动生成一个proguard.cfg文件。”

该文件在我的项目根目录中不存在，所以我不知道如何继续。我的 Android 应用程序适用于 api 级别 4、1.6，那么，这可能是使用 ProGuard 的问题吗？

我如何将 proguard 与 api 4 (android 1.6) 的应用程序一起使用

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:21:53.783

你需要一个 proguard.cfg 文件。您可以手动创建它，也可以使用 proguard-GUI ( `> java -jar proguardgui.jar`)。使用 GUI 使一些事情变得更容易，但仍然需要对 proguard 和混淆有基本的了解。使用 gui 混淆您的发布 apk 不是很舒服，因此提供配置文件和使用 SDK 构建工具仍然是最好的方法。

ACRA 文档提供了一个 proguard.cfg 示例[http://code.google.com/p/acra/wiki/ACRAProGuardHowTo](http://code.google.com/p/acra/wiki/ACRAProGuardHowTo)大多数内容与 ACRA 相关，如果您在项目中不使用 ACRA，则可以省略。

我不知道 SDK 是否应该创建一个 proguard.cfg。如果从未见过自动创建的文件，那么我建议您使用 acra-guys 提供的文件作为起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:47:19.190

1.  确保您使用的是最新的 Android SDK。`android`您可以使用 SDK中的标准应用程序检查这一点。

2.  然后确保您的项目目录也是最新的，通过键入

    ```
    adb update project -p MyProjectDirectory 
    ```

    （从命令行，使用项目目录的正确路径）。这应该会创建一个 ProGuard 配置文件，该文件`proguard-project.txt`在最新版本的 SDK 中被调用。

3.  然后，您可以通过取消注释`project.properties`.

# php - 获取mysqli结果时如何在while循环内抛出异常？

> ID：11708744
> 
> 赞同：2
> 
> 时间：2012-07-29T11:08:13.487
> 
> 标签：php, mysql, oop, mysqli, prepared-statement

我以 OOP 方式使用 mysqli 准备好的语句。一切都按预期工作，但我似乎找不到任何关于如何检测然后在 while 循环期间抛出异常的文档。这就是我的代码目前的状态，并且运行良好。

```
$rslt=array();
$data=array();
$stmt->bind_result($rslt['col1'], $rslt['col2'], $rslt['col3'], $rslt['col4']);
while($stmt->fetch()){
    $data[]=$rslt;
} 
```

但是，它不包含引发异常的方法。这就是我在类似脚本中抛出异常的方式，该脚本限制为 1 个结果（因此我不需要在此示例中循​​环遍历它们）。

```
$rslt=array();
$data=array();
$stmt->bind_result($rslt['col1'], $rslt['col2'], $rslt['col3'], $rslt['col4']);
if(!$stmt->fetch()){
   throw new Exception('Failed to fetch results', 1);
}
$data[]=$rslt; 
```

我几乎正在尝试执行以下代码中的操作，但它会引发以下错误：-

> “解析错误：语法错误，第 95 行 xxx/xxx/includes/_xxxClass.php 中的意外 T_THROW

```
while($stmt->fetch()){
    $data[]=$rslt or throw new Exception('Failed to fetch results', 1);
} 
```

我正在寻找一种方法来查看获取结果是否存在错误，然后在我的 while 循环中抛出异常。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:22:48.290

您正在执行的测试有缺陷。[`mysqli::fetch()`](http://www.php.net/manual/en/mysqli-stmt.fetch.php)失败时返回 false，因此您的 while 循环将在看到 false 时立即退出。如果没有返回结果，则循环不会执行并且 $data 将为空。

相反，您需要做的是测试在 while 循环之后是否填充了 $data，然后如果它为空则抛出异常：-

```
while($stmt->fetch()){
    $data[]=$rslt;
}
if(empty($data)) throw new Exception('Failed to fetch results', 1); 
```

反思一下，您不应该仅仅因为没有返回结果就抛出异常，只需返回空数组：-

异常用于处理异常情况，空结果集并非异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:22:51.553

考虑到`$mysqli`您的 mysqli 处理程序，您可以尝试：

```
if ($mysqli->errno) { // an error occurred, throw exception } 
```

# java - urlFetch , Servlet 和线程

> ID：11708748
> 
> 赞同：2
> 
> 时间：2012-07-29T11:08:44.047
> 
> 标签：java, multithreading, urlfetch

我正在用 Appengine-Java 开发一个 webapp。我是这个领域的新手，我很难过。

我目前正在使用循环。每个循环从列表中访问某个 isbn，然后通过 urlFetch 获取书籍的详细信息。我的问题是我想通过使用线程而不是循环来提​​高它的性能，但是 java 只支持一个超类，我不能扩展线程。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:50:00.413

应用引擎对线程有限制。请务必阅读[https://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)。

关于您的继承问题，无法在应用引擎中扩展 Thread ，无论如何都是不好的做法。您应该实现 Runnable，并按照我链接到的文档在应用引擎中执行它。

# css - 在自定义工具栏中使用 jquery UI 主题

> ID：11708752
> 
> 赞同：0
> 
> 时间：2012-07-29T11:09:01.973
> 
> 标签：css, jquery-ui

我想在我自己的工具栏中使用 jquery UI 主题而不使用 jquery 本身。

我有：

```
<div class="toolbar ui-widget-header ui-corner-all">
  <a href="#" class="ui-icon ui-icon-circlesmall-close">close</a>
  <a href="#" class="ui-icon ui-icon-circlesmall-plus">open</a>
</div> 
```

CSS：

```
.toolbar {
    height:28px;
}
    .toolbar a {
        display:inline-block;
        height:24px;
        width:24px;
    } 
```

它可以工作，但是当我在 a hrefs 上设置填充或大小时，我没有在按钮上获得一个很好的居中图标，因为它在图标文件中显示图标和周围图标的一部分。

有可能纠正这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:55:16.153

您可以使用边距而不是填充。这将使图标保持居中。

```
.toolbar {
    height:28px;
}
.toolbar a {
    display:inline-block;
    height:16px;
    width:16px;
    margin:6px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:12:13.783

我在这里找到了答案：

[http://www.filamentgroup.com/lab/styling_buttons_and_toolbars_with_the_jquery_ui_css_framework/](http://www.filamentgroup.com/lab/styling_buttons_and_toolbars_with_the_jquery_ui_css_framework/)

看起来它需要一个合适大小的单独跨度来防止图标文件显示周围的图标（精灵）。

# linux - VimTutor 方向键 v/s hjkl

> ID：11708753
> 
> 赞同：3
> 
> 时间：2012-07-29T11:09:08.870
> 
> 标签：linux, vim

VimTutor 在第一课中说：

> 注意：光标键也应该起作用。但是使用 hjkl，一旦你习惯了它，你将能够更快地移动。真的！

但是，我发现它们之间没有任何区别。使用 hjkl v/s 箭头键真的有区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T11:17:46.077

您不必将手从触摸类型位置移动即可使用 hjkl，而使用箭头键则可以。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T09:19:33.293

问题是您开始使用“hjkl”键只是作为移动光标的更好方法，但事实是它们实际上是`motions`.

*   `h`向左移动一个字符
*   `j`向下移动一行
*   `k`动一排
*   `l`向右移动一个字符

例如，使用 delete 运算符`d`:`dl`删除当前字符，`dh`删除前一个字符，`dj`删除当前行及其下方的一行，并`dk`删除当前行及其上方的一行。`y`, `c`,`V`和`gU`任何运算符当然也是如此。

另一个例子是拆分窗口。`Control-w`您可以使用+`s`和`Control-w`+创建几个窗口`v`，然后使用可靠的 hjkl 在窗口之间移动， `Control-w`+`h`向左移动一个窗口，`Control-w`+`j`向下移动一个窗口，等等。

因此，它们不仅仅是对箭头键的改进。随着您对 Vim 理解的加深，您将了解到 hjkl 键可以通过多种方式与其他命令结合使用，并且您会很高兴可以使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T14:04:53.513

事实上，`h j k l`当您必须使用箭头键时，使用键是一种很好的做法，可以避免键盘上的大部分右手移动，但是，使用 vim 浏览文本文件有更有效的方法：

*   `f <char>`: 转到`<char>`当前行中下一个出现的字符。光标放在角色上方；
*   `t <char>`: 转到`<char>`当前行中下一个出现的字符。光标放在角色的正前方；
*   `T`和`F`：在这一行向后搜索你的字符，但是`T`会将光标放在字符之后（或者如果你向后思考，则放在之前;）），`F`并将其放在它的上方。
*   `/ <char> <Enter>`: 跳到下一个与行无关的字符。执行此操作一次后，按`n`或`N`转到下一个和上一个事件。
*   `? <char> <Enter>`: 向后跳到与行无关的字符的下一个匹配项。`n`将搜索下一个事件（向后）`N`并将转到上一个事件。
*   `{`和`}`：在段落上导航。段落基本上是由空行分隔的块。有关详细信息，请参阅`:help paragraph`。
*   `(`and : 在 Sentences( )`)`上前后导航。`:help sentence`句子是一组以空格、制表符或尾行`words`结尾`. !`或`?`后跟的一组。
*   `e`: 接下来`word`，将光标放在末尾`word`
*   `w`：下一步`word`，将光标放在开头`word`
*   `b`: back 1 `word`, 将光标放在开头`word`
*   `ge`：返回 1 `word`，将光标放在末尾`word`
*   `E W B`和`gE`：与 相同`e w b ge`，但带有`WORD`。有关详细信息，请参阅`:help word`。

如果您想从养成使用或其他动作的第一个好习惯开始`h j k l`并避免使用箭头键，请在您家中的 .vimrc 文件中添加以下行以禁用它们：

```
noremap <Up> <NOP>
noremap <Down> <NOP>
noremap <Left> <NOP>
noremap <Right> <NOP> 
```

# microsoft-metro - Metro 应用程序中的异步和等待关键字？

> ID：11708763
> 
> 赞同：0
> 
> 时间：2012-07-29T11:11:25.547
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml, winrt-async

我是 Metro 应用程序开发的新手，我请求您帮助我了解 async 和 await 关键字的用法，

据我所知，我知道我们同时异步和等待两者。

但是，如果将一种方法/功能提到为异步：-

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    Uri inputUri  = new Uri("http://examplewebservices");

    try
    {

   string result =  await httpClient.GetStringAsync(inputUri);

///
i have to do some operations on this string result here 
///

    }
    catch (Exception ex)
    {

    }
} 
```

1）创建一个单独的线程会发生什么？以及异步运行的每件事？

2) await 关键字在这里做什么？

3）如果它是异步的，代码中有我需要对字符串结果执行一些操作的地方，如果没有完成它会显示错误吗？

请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:33:00.750

请阅读我的[`async`/`await`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

> 1）创建一个单独的线程会发生什么？以及异步运行的每件事？

不，`async`方法是同步的，直到它们`await`的操作未完成。

> 2) await 关键字在这里做什么？

它将异步等待操作完成。

在这种情况下，它将返回到消息循环并安排方法的其余部分在下载完成后运行（在 UI 线程上）。

> 3）如果它是异步的，代码中有我需要对字符串结果执行一些操作的地方，如果没有完成它会显示错误吗？

不会。由于 ，`await`该方法的其余部分在下载完成之前不会运行。

# javascript - NodeJS + JS：根据当前用户选择生成动态链接

> ID：11708770
> 
> 赞同：0
> 
> 时间：2012-07-29T11:13:44.640
> 
> 标签：javascript, jquery, node.js, hyperlink, dynamic-data

我正在尝试为我博客中的帖子创建一个简单的排序选项。问题是我想要使用的最后一件事是基于 JS 的重定向，因为事实上有些用户没有在他们的浏览器中启用 JS，这就是为什么他们无法对我博客中的帖子进行排序。让我给你举个例子：

我的博客中有几个类别：

```
//categories selection
<ul>
    <li class="active"><a id="cat1" href="/?category=music">Music</a></li>
    <li><a id="cat2" href="/?category=photo">Photo</a></li>
    <li><a id="cat3" href="/?category=cinema">Cinema</a></li>
    <li><a id="cat4" href="/?category=computers">Computes</a></li>
</ul> 
```

另外，我有两个排序选项：

```
//sorting options
<div>
    <a class="active">Last posts</a>
    <a>Last comments</a>
</div> 
```

根据当前的活动元素，用户会被重定向到带有此类参数的页面，例如'/?category=music&sort=posted' 或'/?category=personal&sort=commented'。

例如，让我们在类别选择中选择“CINEMA”选项卡此时处于活动状态（

```
<li class="actvie"><a id="cat3" href="/?category=cinema">Cinema</a></li> 
```

）。因此，如果用户单击最后评论链接，它应该重定向到

```
'/?category=cinema&sort=comments' 
```

另一个例子：当前 Last comments 处于活动状态 (

```
<a class="active">Last comments</a> 
```

）。用户点击类别选择中的计算，它应该重定向到

```
'/?category=computers&sort=comments'. 
```

那么，是否有任何变体可以在没有 JS 的情况下执行此类功能？如果没有，您能否建议我最优雅的解决方案，除了手动运行类别中的每个元素并使用 JS/jQuery 对选项和生成链接进行排序？

提前致谢！

**服务器端：**

```
db.collection("posts", function (err, collection) {
    //getting posts dependinc on requested category
    collection.find({category: req.query['category']}, {sort: [['time_added', -1]], limit:20}, function (err, posts) {
        //getting posts and rendering page
    });
}); 
```

**更新**：我找到了一个马马虎虎的解决方案。对于一个单独的类别，我使用不同的帖子列表呈现两个 div。一个用于“最后发布”，第二个 - 用于“最后评论”。排序选择器只会隐藏一个 div 并显示另一个。问题只是传输到客户端的数据大小的两倍。我知道，它需要一点 JS，但是没有'#'-hrefs 的主要类别链接会很清楚。和排序选项 - 它只是一个工具，它可能没有真正的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:54:20.797

似乎您正在刷新页面以选择新类别。使用 selected category 参数来确定排序选项的 URL。需要更多来自服务器端的代码来给你一个更具体的例子。

如果您不想使用 Javascript，则必须`<a class="active">Last posts</a>`根据选择的类别动态生成排序链接的 href 属性。您今天如何渲染页面？只是静态文件？看看像 mustache.js 这样的模板引擎，然后你可以这样做：

```
<a class="active" href="/?category={{category}}&sort=comments">Last posts</a> 
```

查看本教程，了解使用 mustache.js [http://mrjaba.posterous.com/a-gentle-introduction-to-nodejs的 Node.js 示例](http://mrjaba.posterous.com/a-gentle-introduction-to-nodejs)

在您发表评论后编辑：或使用 EJS 的类似内容

```
<div>
    <a href="/?category=<%=category%>&sort=posts" class="active">Last posts</a>
    <a href="/?category=<%=category%>&sort=comments">Last comments</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T22:57:15.147

您是在谈论在客户端还是服务器端进行实际排序？如果是后者，没有问题；只需坚持您拥有的 URL，让服务器重写它们并重定向到新的 URL（如果您甚至必须这样做；您可以将“较短”的 URL 视为已排序内容的实际 URL）。这绝不是依赖于可用的客户端脚本。

*当然，您可以在此之上*实现客户端排序，以便为确实有客户端脚本可用的用户提供方便；这里的关键是使用不显眼的 JavaScript（例如在加载时安装处理程序以拦截对排序链接的点击）。

# c# - 我如何通过 c# 加密整个 xml 文件

> ID：11708771
> 
> 赞同：-2
> 
> 时间：2012-07-29T11:13:56.157
> 
> 标签：c#, xml, encryption

在我的项目中，我编写了两个方法来加密和解密我的 xml 文件中的一些字符串，但我知道我想加密整个 xml 文件

我想编辑方法来加密和解密整个文件而不是字符串

```
 public static string Encrypt(string plainText)
          {
                byte[] initVectorBytes = Encoding.ASCII.GetBytes("teto1620@#$%asdf");
                byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);
                byte[] keyBytes = Encoding.Unicode.GetBytes("_+)&qwer9512popo");
                RijndaelManaged symmetricKey = new RijndaelManaged();
                symmetricKey.Mode = CipherMode.CBC;
                ICryptoTransform encryptor = symmetricKey.CreateEncryptor(keyBytes, initVectorBytes);
                MemoryStream memoryStream = new MemoryStream();
                CryptoStream cryptoStream = new CryptoStream(memoryStream, encryptor, CryptoStreamMode.Write);
                cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);
                cryptoStream.FlushFinalBlock();
                byte[] cipherTextBytes = memoryStream.ToArray();
                memoryStream.Close();
                cryptoStream.Close();
                string cipherText = Convert.ToBase64String(cipherTextBytes);
                return cipherText;
          }
          public static string Decrypt(string cipherText)
          {
                byte[] initVectorBytes = Encoding.ASCII.GetBytes("teto1620@#$%asdf");
                byte[] cipherTextBytes = Convert.FromBase64String(cipherText);
                byte[] keyBytes = Encoding.Unicode.GetBytes("_+)&qwer9512popo");
                RijndaelManaged symmetricKey = new RijndaelManaged();
                symmetricKey.Mode = CipherMode.CBC;
                ICryptoTransform decryptor = symmetricKey.CreateDecryptor(keyBytes, initVectorBytes);
                MemoryStream memoryStream = new MemoryStream(cipherTextBytes);
                CryptoStream cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read);
                byte[] plainTextBytes = new byte[cipherTextBytes.Length];
                int decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);
                memoryStream.Close();
                cryptoStream.Close();
                string plainText = Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
                return plainText;
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:25:33.360

[`File.ReadAllText()`](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx)返回一个字符串，因此您可以`ReadAllText()`使用普通字符串方法进行加密，然后使用`File.WriteAllText()`将加密版本写回文件。

*但是，对于大文件*，您可以改为逐行读取和处理。例如

```
using (StreamReader sr = new StreamReader("xmlfile.txt")) 
{
    string line;
    while ((line = sr.ReadLine()) != null) 
    {
         File.WriteAllText("mynewxmfile.xml", MyEncryptMethod(line));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:16:35.723

它非常简单，将您的 XML 转换为字符串并将其传递给加密/解密函数。您使用什么类来创建 XML？如果您正在使用 XMLDocument，那么可以使用以下函数将您的 XML 转换为字符串

```
public string ConvertToString(XmlDocument xml)
{
    StringWriter sw = new StringWriter();
    XmlTextWriter tx = new XmlTextWriter(sw);
    xml.WriteTo(tx);
    string str = sw.ToString(); 
    return str;
} 
```

同样，您可以在解密时将解密的字符串转换为 XML，如下所示

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(decruptString); 
```

# c# - OpenFileDialog时如何释放内存？

> ID：11708773
> 
> 赞同：4
> 
> 时间：2012-07-29T11:14:08.043
> 
> 标签：c#, openfiledialog

Winform OpenFileDialog，每次打开，内存都会增加，dispose()和OpenFileDialog = null都不行，内存不会丢失。.

如何解决这个问题？

```
 private void btnLocalPicture_Click(object sender, EventArgs e)
    {
        OpenFileDialog ofdSelectPicture = new OpenFileDialog();
        ofdSelectPicture.Filter = "PicFile|*.jpg;*.png;*.jpeg;*.gif;*.bmp;*.tif";
        if (ofdSelectPicture.ShowDialog() == DialogResult.OK)
        {
            if (showPicture != null)
                showPicture.Dispose();
            showPicture = Image.FromFile(ofdSelectPicture.FileName);
            if (pbShowPicture.Image != null)
                pbShowPicture.Image.Dispose();
            pbShowPicture.Image = showPicture;
            path = ofdSelectPicture.FileName;
            WordTip.Visible = false;
            if (pbShowPicture.Image != null)
                picOK.Enabled = true;
        }
        ofdSelectPicture.Dispose(); //not working
        ofdSelectPicture = null;  //not working
        GC.Collect();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T13:12:54.960

您可以查看 Project + Properties 的“调试”选项卡发生了什么，勾选“启用非托管调试”选项。启动您的程序并选择输出窗口。获取显示的对话框。

您现在将看到加载到您的进程中的 DLL 列表。这些是在您的机器上注册的 shell 扩展。你会得到什么是不可预测的，每个人都有自己喜欢的扩展集。程序员往往有很多。

是的，这些扩展会在您的进程中消耗内存。只是因为这些 DLL 占用了您的虚拟内存地址空间中的空间。还因为这些 DLL 分配内存供自己使用。写得不好肯定会泄漏内存。请注意，这些扩展分配的内存始终是非托管内存，因此请确保您有一个可以显示泄漏的好工具。像 TaskMgr.exe 这样的东西还不够好。

你可以做两件基本的事情。首先是忽略它，这个问题是特定于你的机器的，你的用户不会有同样的问题。您无法修复泄漏，您没有扩展的源代码。或者，您可以使用 SysInternals 的 AutoRuns 实用程序追查麻烦制造者。它向您显示注册了哪些 shell 扩展，并允许您通过单击复选框来取消注册它们。

# objective-c - 文本框选择器

> ID：11708775
> 
> 赞同：0
> 
> 时间：2012-07-29T11:15:26.437
> 
> 标签：objective-c, ios, textbox, uipickerview

我正在练习使用选择器将值输入到文本字段中。我尝试调整此处找到的一些代码，以便在触摸文本框以填写文本字段时显示选择器。文本框是在代码[SOURCE](http://pastie.org/1962865)中构建的，我想在 IB 中构建文本框。然而，这已经停止了演示选择器视图，现在只显示键盘

也许有人会在这里为我指明正确的方向。我的代码：

。H

```
#import <UIKit/UIKit.h>

@interface pick2 : UIViewController

<UIPickerViewDelegate, UIPickerViewDataSource> {
UIPickerView *locationsPicker;
UIToolbar    *accessoryView;

UITextField *text1;

NSArray      *locations;
}

@property (nonatomic, readonly) UIPickerView *locationsPicker;
@property (nonatomic, readonly) UIToolbar *accessoryView;
@property (strong, nonatomic) IBOutlet UITextField *text1;

- (void)onLocationSelection;

@end 
```

.m

```
#import "pick2.h"

@interface pick2 ()

@end

@implementation pick2
@synthesize text1;

- (UIPickerView *)locationsPicker {
if ( locationsPicker == nil ) {
    locationsPicker = [[UIPickerView alloc] init];
    locationsPicker.delegate = self;
    locationsPicker.dataSource = self;
    locationsPicker.showsSelectionIndicator = YES;
}

    return locationsPicker;
}

- (UIToolbar *)accessoryView {
if ( accessoryView == nil ) {
    accessoryView = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]      initWithBarButtonSystemItem:UIBarButtonItemStylePlain
                                                                                   target:self
                                                                                   action:@selector(onLocationSelection)];
    [accessoryView setItems:[NSArray arrayWithObject:doneButton]];
}

return accessoryView;
}

 #pragma mark - Memory management

  - (void)didReceiveMemoryWarning
  {
 [super didReceiveMemoryWarning];
  }

#pragma mark - View lifecycle

- (void)onLocationSelection {
NSInteger row = [self.locationsPicker selectedRowInComponent:0];

( [text1 isFirstResponder] ); {
    text1.text = [locations objectAtIndex:row];
    [text1 resignFirstResponder];
}
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - picker view delegate/datasource

- (NSString*)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row     forComponent:(NSInteger)component {
return [locations objectAtIndex:row];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:     (NSInteger)component {
return [locations count];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

 - (void)viewDidLoad
 {

locations = [[NSArray alloc] initWithObjects:@"New York", @"Chicago", @"Memphis",  @"California", @"Seattle",@"London",@"Paris", nil]; 

[super viewDidLoad];
 // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
[self setText1:nil];
[super viewDidUnload];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:14:42.123

通过使用 IB 构建文本框和

`NSInteger selectedRow = [select selectedRowInComponent:0]; text1.text = [arrStatus objectAtIndex: selectedRow]; [text1 resignFirstResponder];`

检索文本值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:42:59.390

您所要做的就是将 UITextField 的 inputView 作为您的pickerview 的对象。

```
text1.inputView  = locationsPicker; 
```

现在点击 UITextField 将显示选择器视图。

# nsis - Exec vs ExecWait vs ExecShell vs nsExec::Exec vs nsExec::ExecToLog vs nsExec::ExecToStack vs ExecDos vs ExeCmd

> ID：11708779
> 
> 赞同：55
> 
> 时间：2012-07-29T11:15:55.513
> 
> 标签：nsis, shellexecute

`Exec`我能知道每个, `ExecWait`, `ExecShell`, `nsExec::Exec`, `nsExec::ExecToLog,` `nsExec::ExecToStack`,`ExecDos`和之间有什么区别`ExecCmd`，就像什么时候使用 which 一样吗？

我已经发布了我知道的各种执行调用。我正在尝试制作一个全面的列表，以便对未来的访问者有所帮助..

1.  `Exec`: 简单地执行被调用的字符串，无论是应用程序、控制台还是文件。

2.  `ExecWait`: 像执行一样执行，`Exec`但要等到进程退出。

3.  `ExecShell`:**有什么用？**

4.  `nsExec::Exec`: 就像`Exec`or`ExecWait`但仅适用于命令提示符，而无需打开控制台窗口。我不确定它是否等待进程退出。**是否`nsExec::Exec`等待子进程退出？**

5.  `nsExec::ExecToLog`:`The documentation says ExecToLog`类似于plain `nsExec`，但它输出到日志窗口。**这是什么意思，什么是日志窗口？**

6.  `nsExec::ExecToStack`：文档说`ExecToStack`类似于普通`nsExec`但它将输出推送到堆栈。我明白了。

7.  `ExecDos`: 一样，`nsExec::ExecToStack`但有额外的（**不是**吗？）

    一个。接受用作运行应用程序的标准输入的字符串参数。

    湾。在同步/异步模式下工作。

    C。它适用于部分 - 用于 .onInit 签出。

8.  `ExecCmd`: 相同，`ExecDos`但不需要这些

    ```
    ExpandEnvStrings $3 %COMSPEC% 
    ExecDos::exec  /C 
    ```

    部分。**我对么？**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-29T14:56:16.550

**1) 2) 3)**

`Exec`并在内部`ExecWait`使用[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)并且只能启动程序和批处理文件。

`ExecShell`使用[ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)这意味着它还可以启动任何已注册的文件类型（.txt .chm 等）和 URL。如果您开始的程序需要使用 UAC 进行升级，也应该使用它。

**4)**

nsExec 重定向标准输出，因此当子进程执行时控制台窗口不可见。是的，它在等待。

**5)**

instfiles 页面上的日志窗口。

**7)**

是的，ExecDos 和 ExecCmd 都是 nsExec 的更高级版本。

**8)**

正确的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-06T12:01:45.543

`ExecWait`等待，因此可以**返回**东西！[文档](http://nsis.sourceforge.net/Docs/Chapter4.html#execwait)。

`ExecShell`也能够**隐藏输出窗口**。[文档](http://nsis.sourceforge.net/Docs/Chapter4.html#execshell)

`ExecCmd`被认为已过时并被`ExecDos`. 两者都是 NSIS 的额外插件，默认情况下不提供。[文档](http://nsis.sourceforge.net/ExecDos_plug-in)

# asp.net - 对事件日志设置源的健康监控

> ID：11708784
> 
> 赞同：1
> 
> 时间：2012-07-29T11:16:45.063
> 
> 标签：asp.net, health-monitoring

我想在我的 asp.net 应用程序中设置健康监控（使用 .net 4.5）。

在生产中，我们会将健康事件记录到一个单独的数据库中（连同其他操作类型的数据）。

在开发中，虽然我想设置使用事件日志，所以在开发时不需要设置其他数据库。

我已经将日志记录到事件日志中，但是我不知道如何仅为我的应用程序过滤掉事件日志事件。

看着他们，一个事件看起来像这样

```
Log Name:      Application
Source:        ASP.NET 4.0.30319.0
Date:          29/07/2012 8:50:46 PM
Event ID:      1305
Task Category: Web Event
Level:         Information
Keywords:      Classic
User:          N/A
Computer:      scorpion
Description:
Event code: 1004 
Event message: Application compilation finished. 
Event time: 29/07/2012 8:50:46 PM 
Event time (UTC): 29/07/2012 10:50:46 AM 
Event ID: 41f9c898cda14f7685f5c448f13f806a 
Event sequence: 10 
Event occurrence: 4 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/5/ROOT-1-129880325799889790 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: c:\users\pyro\documents\visual studio 2012\Projects\MvcApplication3\MvcApplication3\ 
    Machine name: SCORPION 

Process information: 
    Process ID: 556 
    Process name: iisexpress.exe 
    Account name: scorpion\pyro 

Custom event details: 

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="ASP.NET 4.0.30319.0" />
    <EventID Qualifiers="16384">1305</EventID>
    <Level>4</Level>
    <Task>3</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2012-07-29T10:50:46.000000000Z" />
    <EventRecordID>6775</EventRecordID>
    <Channel>Application</Channel>
    <Computer>scorpion</Computer>
    <Security />
  </System>
  <EventData>
    <Data>1004</Data>
    <Data>Application compilation finished.</Data>
    <Data>29/07/2012 8:50:46 PM</Data>
    <Data>29/07/2012 10:50:46 AM</Data>
    <Data>41f9c898cda14f7685f5c448f13f806a</Data>
    <Data>10</Data>
    <Data>4</Data>
    <Data>0</Data>
    <Data>/LM/W3SVC/5/ROOT-1-129880325799889790</Data>
    <Data>Full</Data>
    <Data>/</Data>
    <Data>c:\users\pyro\documents\visual studio 2012\Projects\MvcApplication3\MvcApplication3\</Data>
    <Data>SCORPION</Data>
    <Data>
    </Data>
    <Data>556</Data>
    <Data>iisexpress.exe</Data>
    <Data>scorpion\pyro</Data>
  </EventData>
</Event> 
```

唯一可能有用的是应用程序域，但看起来没有一种方法可以通过事件日志条目访问它，而无需[进行](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogentry.aspx)某种讨厌的解析。

有什么我在这里遗漏的吗，我实际上可以在日志中设置一些内容，以便更容易地过滤掉我的应用程序，我可以查找 asp.net 字符串，但这并不能保证它只会获取与我的应用直接相关的内容。

如果在不重写提供程序的情况下无法做到这一点，是否有更好的提供程序用于不需要太多设置的一次性开发场景。

# c++ - 生产者和消费者 - 多线程

> ID：11708788
> 
> 赞同：3
> 
> 时间：2012-07-29T11:17:21.050
> 
> 标签：c++, multithreading

我写了一个这样的多线程程序，

```
#include <queue>
#include <cstdio>
#include <cstdlib>
#include <pthread.h>
#include <unistd.h>

using namespace std;

pthread_mutex_t mu = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t ec = PTHREAD_COND_INITIALIZER;
pthread_cond_t fc = PTHREAD_COND_INITIALIZER;

queue<int> qu;
const int N = 2;

void *producer(void *arg)
{
    while(1) {
        pthread_mutex_lock(&mu);
        int tmp = rand();
        qu.push(tmp);
        pthread_cond_signal(&ec);
        if ((int) qu.size() > N) {
            pthread_cond_wait(&fc, &mu);
        }
        pthread_mutex_unlock(&mu);
    }
}

void *consumer(void *arg)
{
    while(1) {
        pthread_mutex_lock(&mu);
        if ((int) qu.size() < 1) {
            pthread_cond_wait(&ec, &mu);
        }
        int tmp = qu.front();
        qu.pop();
        if ((int) qu.size() <= N) {
            pthread_cond_signal(&fc);
        }
        pthread_mutex_unlock(&mu);
        //sleep(1);
    }
}

int main()
{
    pthread_t tid;
    pthread_create(&tid, NULL, producer, NULL);
    for (int i = 0; i < N; i++) {
        pthread_t tid;
        pthread_create(&tid, NULL, consumer, NULL);
    }

    printf("all created\n");

    sleep(600);
} 
```

当`qu.size()`大于`N`时，`producer`应该停止生产，当它小于 时`N`，`producer`恢复生产。

奇怪的问题是，如果我删除`sleep(1);`in `consumer`，程序将运行`segmentation fault`，如果我保留`sleep(1);`，程序运行正常。

为什么？这是否意味着`consumer`消耗太快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T11:50:47.690

[虚假唤醒](http://linux.die.net/man/3/pthread_cond_wait)可能是原因。如果条件为真，您的线程将继续，但如果您的线程继续，您不能假设条件为真。

> 可能会发生来自 pthread_cond_timedwait() 或 pthread_cond_wait() 函数的虚假唤醒。由于 pthread_cond_timedwait() 或 pthread_cond_wait() 的返回并不意味着该谓词的任何值，因此应在此类返回时重新评估谓词。

所以例如

```
if (qu.size() == 0) {
    pthread_cond_wait(&ec, &mu);
} 
```

应该成为

```
while (qu.size() == 0) {
    pthread_cond_wait(&ec, &mu);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:44:48.983

如果您保持`sleep(1)`通话并且整个事情没有崩溃，那么您很幸运:)

尝试使用 pthread_mutex_init() 显式初始化互斥锁，否则您的 pthread_mutex_lock() 调用似乎会失败。

从[文档](http://linux.die.net/man/3/pthread_mutex_lock)：

```
Errors

The pthread_mutex_lock() and pthread_mutex_trylock()
functions may fail if: 

EINVAL: The value specified by mutex
does not refer to an initialized mutex object. 
```

# java - 以两种不同的格式输入日期。如何解析它

> ID：11708791
> 
> 赞同：-2
> 
> 时间：2012-07-29T11:17:27.043
> 
> 标签：java, struts-1

> **可能重复：**
> [如何使用 SimpleDateFormat 解析多种格式的日期](https://stackoverflow.com/questions/4024544/how-to-parse-dates-in-multiple-formats-using-simpledateformat)

我正在使用 a 来获取输入日期。日期字符串可以采用两种不同的格式 - MM/dd/yyy 和 dd.MM.yyyy。提交后，我需要将此字符串解析为 sql.Date 并将其设置为 ActionForm 中嵌套对象的属性。以不同格式解析此字符串的最佳方法是什么，它应该发生在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:22:44.810

首先检查字符串是否包含“。” 或“/”，然后应用适当的`DateFormat`.

```
static Date parseDate(String in) throws ParseException {
  return new SimpleDateFormat(in.contains(".")? "dd.MM.yyyy" : "MM/dd/yyyy")
    .parse(in);
}
public static void main(String[] args) throws Exception {
  System.out.println(parseDate("31.01.2001"));
  System.out.println(parseDate("01/31/2001"));
} 
```

# sql-server - 为什么这个插入会破坏我的表？

> ID：11708792
> 
> 赞同：0
> 
> 时间：2012-07-29T11:17:31.783
> 
> 标签：sql-server, tsql, insert, corruption, insert-into

运行此程序后，我无法选择或删除表。

我也从来没有得到回滚或错误

**表**：

```
cmid pk in not null
cmcid int null
cmctitle nvarchar(4000) 
```

询问：

```
begin transaction
INSERT INTO [mydatabasename].[dbo].[mytable]
           (cmcid,cmctitle)
         values(396,'*ADVANCED 2-D ART – Painting  &amp; Drawing'),
(397,'Advanced 3D Art'),
(398,'AP Studio Art')
(399,'Digital Art'),
(400,'Intro to Visual Art'),
(401,'Bible 9 - Scripture'),
(402,'Bible 10 - God  &amp; Christ'),
(403,'Bible 11 -Doctrine and World Religions'),
(404,'Bible 12 - Worldviews'),
(405,'Accounting'),
(406,'AP Macroeconomics'),
(407,'AP Microeconomics'),
(408,'Personal Finance'),
(409,'Introduction to Life Calling'),
(410,'*ACADEMIC SKILLS'),
(411,'*BASIC SKILLS TRAINING – Resource'),
(412,'Directed Studies'),
(413,'*INTERNATIONAL STUDENT SEMINAR'),
(414,'*STUDENT ACHIEVEMENT TRAINING'),
(415,'AP Language and Composition 11'),
(416,'American Literature 11'),
(417,'British Literature 12'),
(418,'Grammar  &amp; Composition 9'),
(419,'*ENGLISH 10 – World Literature'),
(420,'Honors American Literature 11'),
(421,'Honors British Literature 12'),
(422,'Honors Dramatic Literature'),
(423,'Honors World Lit and Composition 10'),
(424,'World Literature  &amp; Composition 10'),
(425,'*HONORS SHAKESPEAREAN COMEDIES'),
(426,'Speech'),
(427,'Yearbook'),
(428,'AP Calculus'),
(429,'AP Statistics'),
(430,'Algebra 1'),
(431,'Algebra 1 with Lab'),
(432,'Algebra 2'),
(433,'Geometry'),
(434,'Honors Geometry'),
(435,'PreCalculus'),
(436,'Introduction to Life Calling'),
(437,'Missions'),
(438,'*ADVANCED MUSIC THEORY'),
(439,'*ADVANCED ORCHESTRA'),
(440,'Concert Band'),
(441,'HS Chapel Praise  &amp; Worship Team'),
(442,'Encore'),
(443,'Colla Voce'),
(444,'Musical Theatre'),
(445,'Jazz Band'),
(446,'Intro to Music Theory'),
(447,'HS Orchestra  &amp; Ensemble'),
(448,'Theater Production'),
(449,'*THEATRE ARTS'),
(450,'Theater Production'),
(451,'*ADVANCED PE, STRENGTH  &amp; CONDITIONING '),
(452,'Physical Education - Health'),
(453,'*HEALTH – Girls'),
(454,'Physical Education for Boys'),
(455,'Physical Education for Girls'),
(456,'Physical Education for Athletes'),
(457,'Physical Education Advanced Weight Training'),
(458,'AP Biology'),
(459,'*ADVANCED PLACEMENT CHEMISTRY'),
(460,'Bioethics'),
(461,'Biology 1'),
(462,'Botany'),
(463,'*BIOLOGY II - ZOOLOGY'),
(464,'Biomedical Sciences Professional Seminar'),
(465,'Chemistry'),
(466,'Honors Biology 1'),
(467,'Honors Bio II = Physiology'),
(468,'Honors Chemistry'),
(469,'Honors Physics'),
(470,'Integrated Chemistry-Physics'),
(471,'Zoology'),
(472,'*SCIENCE RESEARCH - INDEPENDENT STUDY'),
(473,'AP Government'),
(474,'AP US History'),
(475,'Civil War  &amp; Reconstruction'),
(476,'Economics'),
(477,'Geography and History of the World'),
(478,'Psychology'),
(479,'Sociology'),
(480,'Government'),
(481,'US History'),
(482,'*TEACHER ASSISTANCE'),
(483,'Video Production'),
(484,'*ADVANCED PLACEMENT COMPUTER SCIENCE'),
(485,'*DATABASE APPLICATION'),
(486,'Computer Programming'),
(487,'*VIDEO PRODUCTION'),
(488,'Web Design'),
(489,'French 1'),
(490,'French 2'),
(491,'French 3'),
(492,'Honors French 4'),
(493,'Latin I'),
(494,'Latin II'),
(495,'Latin III'),
(496,'Spanish 1'),
(497,'Spanish 2'),
(498,'Spanish 3'),
(499,'Honors Spanish 4'),
(500,'Honors Spanish 5')

go
IF @@ERROR <> 0
BEGIN
   PRINT 'error!'
   ROLLBACK TRANSACTION
   RETURN
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T11:24:46.637

首先：在你`INSERT`的s结束时，如果一切正常，你就需要进行**`COMMIT`**交易了！

否则实际上没有数据插入到表中，并且您在表上放置了一个锁（因此您不能再从中选择 - 而该事务仍处于打开状态并等待提交或回滚）。

所以你`INSERT`并**没有破坏**你的表——你只是让你的事务处于打开状态，而在这种情况下，表是（部分）锁定的。

另外：如果它是一`NVARCHAR`列，则应**始终**在插入中使用`N'`前缀！像这样的东西：

```
INSERT INTO [mydatabasename].[dbo].[mytable](cmcid, cmctitle)
VALUES(396, N'*ADVANCED 2-D ART – Painting  &amp; Drawing')` . 
            *
            *-- this N prefix is important! 
```

否则，插入的字符串会在插入支持 Unicode 的列之前转换回**非 Unicode**`NVARCHAR`！

您没有提及您使用的是什么**版本**的 SQL Server - 如果您使用的是 SQL Server **2005**或更高版本，您应该真正使用[`TRY ... CATCH`SQL Server 的机制](http://msdn.microsoft.com/en-us/library/ms175976.aspx)来进行错误处理 - 例如：

```
BEGIN TRY
BEGIN TRANSACTION    -- Start the transaction

  INSERT .....

  COMMIT TRANSACTION  -- if successful - *COMMIT* your transaction
END TRY
BEGIN CATCH
  ROLLBACK TRANSACTION   -- if error, roll back your transaction
END CATCH 
```

# dns - Tumblr 和自定义域的问题（获得 www. 和没有 www. 的工作）

> ID：11708794
> 
> 赞同：2
> 
> 时间：2012-07-29T11:17:47.527
> 
> 标签：dns, tumblr

我正在尝试将我的 Tumblr 与我的自定义域连接 - 目前我没有 A 记录，只有两条 CNAME 记录：

> *.mydomain.com——domains.tumblr.com
> www.mydomain.com——domains.tumblr.com

我的 Tumblr 设置为连接到 www.mydomain.com，目前当我通过 www.mydomain.com 访问它时它可以正常工作；但是，我需要使[http://mydomain.com](http://mydomain.com)地址也可以使用。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T11:51:48.497

在撰写本文时，官方 tumblr 文档说为 mydomain.com 对 Tumblr IP 做一个 A 记录，或者如果它是 www.mydomain.com，则使用 CNAME 到 domain.tumblr.com。[http://www.tumblr.com/docs/en/custom_domains](http://www.tumblr.com/docs/en/custom_domains)

我认为你也可以同时做到这一点，但还没有尝试过。（参见 SO 上的其他帖子中的引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:59:23.700

为二级域添加 CNAME 记录：

```
mydomain.com -- domains.tumblr.com 
```

该版本`*.mydomain.com`将仅影响 和 之类的域`foo.mydomain.com`，`bar.mydomain.com`而不影响二级域本身。

# jquery - 通过jquery在图像条中交换图像位置

> ID：11708795
> 
> 赞同：0
> 
> 时间：2012-07-29T11:17:47.573
> 
> 标签：jquery, html, image, strip

不确定我是否正确地构建了问题，因为我不确定术语，对于 Web 开发来说是新手。我有一个页面，其中在单独的 div 中有四个图像，在父 div 内设置为带有单独链接的图像条。我想交换他们的位置，比如说通过 jquery 的每 2 分钟可能是随机的或循环的。

```
<div class="featurelisting-images">

     <div class="fl-list" id="fl1">
         <a href="/xyz.html" alt="xyz" title="xyz">
         <img src="/uploads/photo_1239.jpg"  title="xyz" alt="xyz" class=""/></a>                    
         <p class="title"><a href="/xyz.html" alt="xyz" title="xyz">xyz</a></p>
     </div>

     <div class="fl-list"    id="fl2">            
          <a href="/abc.html" alt="abc" title="abc">
          <img src="/uploads/photo_1357.jpg"  title="abc" alt="abc" class=""/></a>                    
          <p class="title"><a href="/abc.html" alt="abc" title="abc">abc</a></p>
     </div>

          // two more div elements like this...

</div> 
```

我对 Jquery 的了解非常有限，正在寻找适合我的脚本。我尝试了谷歌它，但没有得到正确的解决方案，可能是因为此功能的搜索术语错误。尝试了一些东西，但没有任何效果。（[参见小提琴](http://jsfiddle.net/abhijatyatewari/ejTSG/2/)）我正在尝试在 Jquery 中使用插入元素，而不是更改每个 div 元素的所有属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:49:06.310

```
<script>
  function do(){  
     var divs =  $(".featurelisting-image").children();
     var first_href = divs[0].children[0].href;
     var first_src = divs[0].children[1].src;
     var first_second_href = divs[0].children[1].children[0].href;
     var first_inner = divs[0].children[1].children[0].innerHTML;
     for(var i = 1;i< divs.length;i++){
         divs[i-1].children[0].href = divs[i].children[0].href;
         divs[i-1].children[1].src = divs[i].children[1].src;
         divs[i-1].children[1].children[0].innerHTML = divs[i].children[1].children[0].innerHTML
     }
     divs[divs.length-1].children[0].href = first_href;
     divs[divs.length-1].children[1].src = first_.src;
     divs[divs.length-1].children[1].children[0].innerHTML = first_inner;

  }
</script> 
```

您可以将此功能添加到计时器或按钮单击事件...我没有更改所有属性，但我想您明白了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:28:28.710

使用将所有项目放在一行中`float:left`

每两秒钟后，将第一个移到最后。

[您可以在此处](http://jsfiddle.net/codebombs/fZmk6/1/)找到一个工作示例。

如果我错了或者你想要别的东西，请纠正我。

# css - CSS - 浮动 div 左对齐

> ID：11708796
> 
> 赞同：0
> 
> 时间：2012-07-29T11:17:50.930
> 
> 标签：css, alignment

我在一个页面上有 6 个浮动 div（左对齐）。这些 div 有 2 种不同的宽度（取决于图像 () ）。一个 div 有 295px，另一个有 216px。高度由 HTML 自动计算。容器有 1050px，所以在容器的一个“行”中我可以插入 3 个 div，另一个 3 在第二个“行”上。

CSS 规则有效，所有 div 都向左浮动，每个 div 有 20px 边距，但问题是它们的对齐方式。我想按比例对齐这些 div。目前，如果某些图片的高度不同，则在第二“行”上有一些空格（因为上面图片的高度）。

我想要一些东西让这些 div 在 Y 坐标（比例）上浮动。

看看这些图片： ![在此处输入图像描述](../Images/32e909bedf1b3e40d9842303b5b3acce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:27:28.663

制作一个 jsfiddle 供人们玩耍。

但是，您可能希望为每一行创建一个容器 div。这封装了 3 个内部 div，与它们一样高，并允许下一个容器很好地适合下面

看我的小提琴：http: [//jsfiddle.net/TJxmT/](http://jsfiddle.net/TJxmT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:46:42.563

您是否尝试过`clear: both;`在新行的每个第一个 div 上放置一个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:31:37.940

尝试使用名为[Masonry](http://masonry.desandro.com/)的 jQuery 插件来修复该布局......你会感到惊讶！

编辑：

您始终可以使用 css 清除行中的第一项和每第三项：

```
li:nth-child(3n+4) { clear:left; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T11:28:02.983

浮动div的最小高度不会解决问题吗？

# javascript - 在 DOM 中将文件输入作为 img 插入

> ID：11708797
> 
> 赞同：5
> 
> 时间：2012-07-29T11:17:51.007
> 
> 标签：javascript, html, blob, same-origin-policy

两部分问题...

基本上，在一天结束的时候，我想要一个`file` `<input>`并让用户从他们的文件系统中选择一个图片文件。然后我想将它显示在页面上的 img 标签中。稍后我需要处理它，所以我知道`data:`这条路不会走，似乎它离开`blob:`了，我无法用我的 googlefu 弄清楚它是否是 X 起源。

那么被`blob:`认为是X起源吗？如果我有一个`<img>`'s`@src`作为`blob:`URI，我可以`getImageData()`使用它吗？

如果是这样，那么你如何进行这一切？我想如果有人知道怎么做，那可能很简单，但我的 googlefu 又让我失望了……

所以：

*   是`blob:`X起源吗？
*   如果不是，如何`blob:`从 a 的内容派生 URI `file` `<input>`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T11:33:13.757

用于从or对象[`URL.createObjectURL`](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)生成`blob:`-URI ：`File``Blob`

基本演示：http: [//jsfiddle.net/HGXDT/](http://jsfiddle.net/HGXDT/)

```
​&lt;input type="file" id="file">​​​​​​​​​​​​​​&lt;img id="preview">​​​​​​​​​​​​​​

window.URL = window.URL || window.webkitURL || window.mozURL;
document.getElementById('file')​.onchange = function() {
    var url = URL.createObjectURL(this.files[0]);
    console.log(url);
    document.getElementById('preview').src = url;
};​ 
```

检查脚本是否受同源策略影响的代码（答案：**没有**）。（实际上，页面本身不受影响，因为它创建了`blob:`-URI，但其他页面无法`blob:`在画布上绘制URI并使用它）：http:
[//jsfiddle.net/HGXDT/1/](http://jsfiddle.net/HGXDT/1/)

```
<input type="file" id="file">
<img id="preview">
<canvas id="canvas"></canvas>
​
window.URL = window.URL || window.webkitURL || window.mozURL;
document.getElementById('file').onchange = function() {
    var url = URL.createObjectURL(this.files[0]);
    console.log(url);

    var img = document.getElementById('preview');
    canvasSOPTest(img, url);
};
// See console. SOP error has to show up
canvasSOPTest(new Image(), 'http://stackoverflow.com/favicon.ico?'+new Date());

function canvasSOPTest(img, url) {
    // Same Origin Policy check
    img.onload = function() {
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
        console.log('Painting image...');
        ctx.drawImage(img, 0, 0);
        console.log('Attempting to get image data');
        try {
            ctx.getImageData(0, 0, canvas.width, canvas.height);
            console.log('Success! No errors');
        } catch (e) {
            console.log(e);
        }
    };
    img.src = url;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:27:52.457

您想要的是使用 HTML5 File Api 显示图像，然后上传该图像或其他？

这是如何使用 File Api 预览图像的一个很好的例子。

[http://html5demos.com/file-api/](http://html5demos.com/file-api/)

# python - 在python中创建类期间初始化属性/属性的任何方法？

> ID：11708799
> 
> 赞同：0
> 
> 时间：2012-07-29T11:18:11.360
> 
> 标签：python, class, properties

任何等效于 Python 中的这一行代码？

```
// C# just shows how class looks like
class MyClass {
    public int A {get; set;}
    public int B {get; set;}
}

// This is that one-line code in C#. Any pythonic way to do something like this?
// var x = MyClass() { A=1, B=2 } - "var" syntax sugar, at compile time it's == MyClass
MyClass x = MyClass() { A=1, B=2 } 
```

编辑：也许我的问题不是那么精确。我的主要目标是不将参数传递给构造函数。

如何初始化许多类成员（它们的任何组合）而不将它们传递给构造函数并且没有具有所有默认值的构造函数。

编辑：谢谢你的答案，很抱歉这个令人困惑的问题。我只是想知道主题中问题的答案 - 什么是初始化类的属性子集而不在构造函数中明确写入它们的最佳方法（pythonic 方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:35:04.403

我不确定您要实现什么，但您可能希望将泛型参数传递给类构造函数，例如：

```
class MyClass:
    def __init__(self, **kwargs):
        for key in kwargs:
            setattr(self, key, kwargs[key])

x = MyClass(a='test', b='test2')
# x.a == 'test'
# x.b == 'test2'
y = MyClass(c=123, d='something else')
# y.c = 123
# y.d = 'something else' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T11:22:04.337

实际上，我不知道 C#，但查看您的代码，我认为这是您正在查看的代码。

```
def MyClass (object):
    def __init__ (A, B):
        self.A = A
        self.B = B

x = MyClass(A=1, B=2) 
```

编辑：

如果您正在寻找 100 个参数，请使用类似`**kwargs`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:25:45.363

在 Python 中创建一个类只需这样做：

```
class Name:
    def __init__(self, arg1): # When an instance of a class is made this will be executed.
        self.var1 = 1
        self.var2 = 2
        self.arg1 = arg1

person1 = Name("arg1") # Create instance of the class 
```

我个人不知道是否有一种方法可以在一行中以 Python 方式执行此操作，因为您还需要创建 init() 方法。

# javascript - YUI3 - DataTable 数据源轮询

> ID：11708802
> 
> 赞同：2
> 
> 时间：2012-07-29T11:18:57.150
> 
> 标签：javascript, yui3

我是 YUI3 的新手；我试图每 10 秒轮询一次数据源以刷新数据表。但是在下面的代码中，它说“没有要显示的数据”......对不起大量的代码......

```
YUI().use("datatable", "datasource-get", "datasource-jsonschema", "datatable-datasource", "datasource-polling", "datasource-function", function (Y) {

var url = "http://query.yahooapis.com/v1/public/yql?format=json" +
              "&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",
    query = "&q=" + encodeURIComponent(
            'select * from local.search ' +
            'where zip = "94089" and query = "pizza"'),
    dataSource,
    table;

dataSource = new Y.DataSource.Get({ source: url });

dataSource.plug(Y.Plugin.DataSourceJSONSchema, {
    schema: {
        resultListLocator: "query.results.Result",
        resultFields: [
            "Title",
            "Phone",
            {
                key: "Rating",
                locator: "Rating.AverageRating",
                parser: function (val) {
                    // YQL is returning "NaN" for unrated restaurants
                    return isNaN(val) ? -1 : +val;
                }
            }
        ]
    }
});

intervalId = dataSource.setInterval(10000, {
    request : query,
    callback: {
        success: function (e) {
            table.datasource.load(e.response);
        },
        failure: function (e) {

        }
    }
});

table = new Y.DataTable({
    columns: [
        "Title",
        "Phone",
        {
            key: "Rating",
            formatter: function (o) {
                if (o.value === -1) {
                    o.value = '(none)';
                }
            }
        }
    ],
    summary: "Pizza places near 98089",
    caption: "Table with JSON data from YQL"
});

table.plug(Y.Plugin.DataTableDataSource, { datasource: dataSource });

// This line works (but it doesnt poll)
//table.datasource.load({ request: query });

table.render("#pizza");
}); 
```

我不确定的线是...

```
success: function (e) {
            table.datasource.load(e.response);
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T16:12:49.950

以下内容应满足您的需求：http: [//developer.yahoo.com/yui/examples/datatable/dt_polling.html](http://developer.yahoo.com/yui/examples/datatable/dt_polling.html)

# ios - 无法调试 icloud 应用程序：权利文件与您的配置文件中指定的不匹配

> ID：11708805
> 
> 赞同：1
> 
> 时间：2012-07-29T11:19:24.547
> 
> 标签：ios, code-signing, icloud, entitlements

我已经按照 Ray Wenderlich 的教程中的所有步骤来集成 iCloud：

*   创建了新的启用云的应用程序 ID

*   使用该应用程序 ID 创建、下载和安装配置文件到计算机和设备中。

*   选中 xcode 项目中的权利和 iCloud 复选框。

*   为权利添加了“get-task-allow = YES”
*   将代码添加到 xcode 项目中以检测是否在 AppDidFinishedLoading 中启用了 icloud。

当我运行它时，我不断收到错误：

> 您的应用程序的代码签名权利文件中指定的权利与您的配置文件中指定的权利不匹配。

像在 xcode 3 中那样调试具有权利的应用程序是否可能无效？但是如果我删除了它，那么我就无法访问 iCloud .....那么我该如何调试 iCloud 应用程序呢？

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:10:53.643

我已经找到了我所有代码签名的罪魁祸首。我想把它写在这里，以便其他人可以从我的经验中受益。

首先尝试我之前提出的所有步骤。如果它仍然不起作用，请执行以下操作：

```
Go to "PRODUCT" ---> "EDIT SCHEME" ---> Go to "Run app" and Change the setting to "DEBUG" (if it is in RELEASE for any strange reason). 
```

# ruby-on-rails - Rails 3 使用 link_to 增加我的计数器的值

> ID：11708806
> 
> 赞同：0
> 
> 时间：2012-07-29T11:19:34.657
> 
> 标签：ruby-on-rails, ruby, counter, increment, link-to

早上好，在我的 Ruby On Rails 应用程序中，我正在尝试为胜利和失败构建一个统计计数器。这些统计信息显示在我页面的侧边栏中，始终可见。对于这些值，我使用名为 Stats 的模型。统计信息应该是全局可用的，因为我想在每一面都显示它们，所以它们被放入 application_helper.rb。我还有两个操作，如果您单击添加赢/添加损失链接，则应调用该操作，该链接仅对管理员显示。单击链接后，您将被重定向到主页。目前，每次有人进入或刷新站点时，这两个计数器都会增加。你能帮我吗，我现在想解决这个问题几个小时，但我仍然不明白。

我的 application_helper

```
module ApplicationHelper

def stats
    @stats = Stats.find(1)
end
def addwin
    @stats = Stats.find(1)
    @stats.update_attribute(:wins, @stats.wins+1)
end

def addloss
    @stats = Stats.find(1)
    @stats.update_attribute(:loss, @stats.loss+1)

end 
```

结尾

我的 application.html.erb 文件的摘录，侧边栏所在的位置：

```
 <tr><td>Dotards StatsTracker</td></tr>
    <tr><td>Wins: </td><td style="color:green"><%= stats.wins%></td></tr>
    <tr><td>Losses: </td><td style="color:red"><%= stats.loss%></td></tr>

    <hr>
    </table >
    <%if user_signed_in? && current_user.admin? %>
        <small><%= link_to "Add Win", news_index_path(addwin) %>|<%= link_to "Add Loss", news_index_path(addloss)%></small>
    <% end %> 
```

如果有人可以帮助我会很棒，因为我不知道我还能做什么。非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:27:15.703

```
news_index_path(addwin) 
```

在页面生成时直接调用 add win 方法，这就是计数器增加的原因。

将这两种方法移动到适当的控制器（可能是 news_controller？）并在 config/routes.rb 中创建路由，如下所示：

```
match '/addwin', to: 'news#addwin' 
```

然后你会得到路径助手，你可以像这样使用：

```
link_to "Add Win" addwin_path 
```

运行`rake routes`以查看生成的助手名称。

另外：我还将您的 Singleton Stat 考虑为模型，并在那里定义控制器仅使用的方法。

# xml - Spring MVC 上的全局 XML 配置？

> ID：11708807
> 
> 赞同：0
> 
> 时间：2012-07-29T11:19:38.553
> 
> 标签：xml, spring, configuration

Spring MVC 创建一些开箱即用的默认对象，例如 HandlerMapping、ViewResolver 等。

配置这些默认创建的bean的配置文件在哪里？（我不是在谈论我们提供的配置文件）。

我在问Spring用来创建上述对象的默认开箱即用实现的默认配置存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:15:45.817

我假设您正在询问默认的 handlerMapping，当您指定类似`<mvc:annotation-driven>`.

这基本上是一个名为 mvc 的自定义 Spring 命名空间，这个自定义命名空间由[MvcNamespaceHandler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/config/MvcNamespaceHandler.html)处理。如果你看这个类的来源，这是一些相关的内容：

```
 registerBeanDefinitionParser("annotation-driven", new AnnotationDrivenBeanDefinitionParser());
    registerBeanDefinitionParser("default-servlet-handler", new DefaultServletHandlerBeanDefinitionParser());
    registerBeanDefinitionParser("interceptors", new InterceptorsBeanDefinitionParser());       
    registerBeanDefinitionParser("resources", new ResourcesBeanDefinitionParser());
    registerBeanDefinitionParser("view-controller", new ViewControllerBeanDefinitionParser()); 
```

这本质上是根据找到的标签注册一系列解析器，所以上面是为命名空间的标签注册一个[AnnotationDrivenBeanDefinitionParser](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/config/AnnotationDrivenBeanDefinitionParser.html)。`annotation-driven``mvc`

在这里注册默认值。

例如，handlerMapping 是这样注册的：

```
 RootBeanDefinition methodMappingDef = new RootBeanDefinition(RequestMappingHandlerMapping.class);
    methodMappingDef.setSource(source);
    methodMappingDef.setRole(BeanDefinition.ROLE_INFRASTRUCTURE);
    methodMappingDef.getPropertyValues().add("order", 0);
    String methodMappingName = parserContext.getReaderContext().registerWithGeneratedName(methodMappingDef); 
```

沿着同样的路线注册其他组件。所以本质上，配置是通过代码在不同的 AnnotationDrivenBeanDefinitionParsers 中，而不是在任何特定的配置文件中。

# arraylist - 迭代arraylist并获得逐行列表

> ID：11708808
> 
> 赞同：0
> 
> 时间：2012-07-29T11:19:50.487
> 
> 标签：arraylist

我正在迭代`ArrayList`并保存这样的值：

```
operRepList=(List<OperRepDTO>) resultMap.get(CFSConstants.MAP_KEY_RESULT_LIST);

        if(!Utilities.isListNullOrEmpty(operRepList)) {

            for(OperRepDTO A:operRepList) {
                operRepDTO.setComp(A.getComp());
                operRepDTO.setContSize(A.getContSize());
                operRepDTO.setProdType(A.getProdType());
                operRepDTO.setProdDesc(A.getProdDesc());
                operRepDTO.setTon(A.getTon());
                operRepDTO.setNoOfCont(A.getNoOfCont());

            }
        } 
```

但是在迭代第二个值时与第一个值重叠，因此当涉及到最终值时，变量仅包含最后一行值。

如何存储逐行列表并进入另一个`ArrayList`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:18:33.383

在我看来，静态 setter 方法总是设置相同的字段，因此您最终会得到上次迭代的值。您应该发布 operRepDTO 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:27:57.697

我认为您没有为每次迭代创建对象。您只是在每次迭代中更新 operRepDTO 对象，因此它只是使用当前行值进行更新，并且在最后一次迭代中它将只包含您的最后一行值。

你应该修改你的循环如下：

```
 List<OperRepDTO> result = new ArrayList<OperRepDTO>(operRepList.size());

     for(OperRepDTO A:operRepList) {

            OperRepDTO operRepDTO = new OperRepDTO ();

            operRepDTO.setComp(A.getComp());

            operRepDTO.setContSize(A.getContSize());

            operRepDTO.setProdType(A.getProdType());

            operRepDTO.setProdDesc(A.getProdDesc());

            operRepDTO.setTon(A.getTon());

            operRepDTO.setNoOfCont(A.getNoOfCont());

            results.add(operRepDTO);

        } 
```

这样在 for 循环之后，结果数组列表将包含所有值。

# jquery - Jquery搜索和哈希

> ID：11708811
> 
> 赞同：1
> 
> 时间：2012-07-29T11:20:16.370
> 
> 标签：jquery, search, hash

如何使用哈希进行实时搜索？现在我有一个简单的 jquery 搜索：

```
 $(function(){
/// Start searching
       $("form#search-form").submit(function(e){     
          var hash = 'q=' + encodeURI(document.getElementById('q').value); 
          window.location.hash = hash;
          e.preventDefault();
          $("#results").fadeOut();
            $.ajax({
               type:"GET",
               data: $(this).serialize(),
               url: "search.php",
               success: function(msg){
                      $("#results").html(msg).fadeIn();      
                                     }
                    });     
        }); 
}); 
```

如您所见，我在这里添加了

```
 var hash = 'q=' + encodeURI(document.getElementById('q').value); 
 window.location.hash = hash; 
```

在哈希中进行搜索输入。所以我的想法是输入“http://url/#q=word”并得到“word”的结果。目前我的“哈希函数”没用，它什么都不做——只是为地址栏增加了价值。我怎样才能让 jquery 以这种方式执行？

我试图添加

```
 if (window.location.hash != "") {
} 
```

但这无济于事。或者我以前做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:55:02.750

尝试这个

```
$(function(){
    $("form#search-form").submit(function(e){     
        e.preventDefault();
        var hash = 'q=' + encodeURI(document.getElementById('q').value); 
        window.location.hash = hash;
        search();
    });

    if (window.location.hash != "") {
        search()
    }

    function search() {
        var search = window.location.hash.replace('#q=','');

        $.ajax({
            type:"GET",
            data: { 'search' : search },
            url: "test2.php",
            success: function(msg){
                $("#results").html(msg).fadeIn();      
            }
        });
    }
}); 
```

为了获得更好的性能，请使用 jquery.hashchange 插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:43:28.407

所以..可能太难了，但它有效：

```
$(function(){
    $("form#search-form").submit(function(e){     
        e.preventDefault();
        var hash = 'search=' + $('#q').val() + '&lang=' + $('.lang:checked').val(); // radio-buttons have class="lang"
        window.location.hash = hash;
        search();
    });

    if (window.location.hash != "") {
        search()
    }

    function search() {
        var hash_arr = window.location.hash.substr(1).split('&'),
            values = new Array(),
            i = 0,
            json = '{';

        for (var key in hash_arr) {
            values = hash_arr[key].split('=');
            if (i++ != 0) json += ',';
            json += '"' + values[0] + '":"' + values[1] + '"';
        }

        json += '}';

        $("#results").fadeOut();
        $.ajax({
            type:"POST",
            data: { data : json },
            url: "test2.php",
            success: function(msg){
                $("#results").html(msg).fadeIn();      
            }
        });
    }
}); 
```

在 PHP 中：

```
$data = (array)json_decode($_POST['data']);
$search = $data['search'];
$language = $data['language']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:18:55.773

这就是一切正常工作的方式：我在索引中拥有的内容：

```
 $(document).ready(function() {

   $("form#search-form").submit(function(e){     
      e.preventDefault();
      var hash = '' + encodeURI(document.getElementById('q').value); 
      window.location.hash = hash;

      $("#results").fadeOut();
        $.ajax({
           type:"GET",
           data: $(this).serialize(),
           url: "search.php",
           success: function(msg){
                      $("#results").html(msg).fadeIn();      
           }
        });     
   }); 

if (window.location.hash != "") {
    s();
}

function s() {
    var s = window.location.hash.replace('#','');

    if($('#language1').attr('checked')===true) {
    var lang = 'language1';
    }
    else if($('#language2').attr('checked')===true) {
    var lang = 'language2';
    }
    else if($('#language3').attr('checked')===true) {
    var lang = 'language3';
    }

    $.ajax({
        type:"GET",
        data: { 's' : s, language : lang},
        url: "search.php",
        success: function(msg){
            $("#results").html(msg).fadeIn();      
        }
    });
}    

}); 
```

在 PHP 中：

```
 $search = filter_var($_GET["s"], FILTER_SANITIZE_STRING);
 $search_term = urldecode($search); 
```

所以地址栏看起来像： 127.0.0.1/dictionary/#search_term 必要的语言来自cookies——所以非常方便。唯一的小问题是在您的脚本中（因为我已经采取了您的脚本）地址栏中的 search_term 更改。我会试着解释一下。如果我使用链接 127.0.0.1/dictionary/#word，它会显示“word”。如果我尝试将地址栏中的“单词”更改为“其他单词”，它什么也不会显示——我必须重新加载页面才能获得结果，或者只是打开一个新的选项卡/窗口。我不知道为什么以前的代码不起作用。可能是我的错误——我不知道。

# ios - DragonMobile SDK for iOS 中的超过每天的最大交易数错误

> ID：11708812
> 
> 赞同：0
> 
> 时间：2012-07-29T11:20:17.023
> 
> 标签：ios, speech-to-text

当我测试我的应用程序使用 Dragon Mobile SDK 免费试用的 Speech To Text 功能时，出现以下错误。

```
Exceeded maximum number of transactions per day. 
```

我想知道我每天可以使用多少次 Speech To Text。

在不购买他们的金牌服务的情况下，有没有办法解决这个限制？

谢谢你的时间。

如果打扰到你，真的很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:28:24.550

您每天最多可以使用 500 个语音。

[在此处](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=memberServicesSilver)查看有关 Silver 计划的更多详细信息。

# ruby - 是否可以在 Ruby 中重新打开匿名模块？

> ID：11708813
> 
> 赞同：3
> 
> 时间：2012-07-29T11:20:18.757
> 
> 标签：ruby

是否可以在 Ruby 中重新打开匿名模块？以下不起作用：

```
m = Module.new
module m
end 
```

“SyntaxError: (eval):2: class/module name must be CONSTANT”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T11:22:55.263

是的。但是你必须使用一个常数。

```
M = Module.new
module M
end 
```

你也可以这样做`M = m`。

* * *

另一种方式：

```
m = Module.new do
  def self.foo1
    1
  end
end

m.class_eval do
  def self.foo2
    2
  end
end

m.foo1 + m.foo2  #=> 3 
```

# android - 我如何通过意图从单独的包中启动活动

> ID：11708816
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:21:22.427
> 
> 标签：android

我的应用程序 com.first.main 和 com.second.activity2 中有两个包。我已经尝试了几次，但即使我已将这些文件添加到清单中，我仍然找不到类。

1.如何从第一个包中启动第二个包中的活动。2\. 如果我必须向第一个包添加第二个活动，例如 com.first.secondactivity ，我是否需要做任何不同的事情才能从 com.first.main 活动启动它？

在过去的几个小时里我真的坚持这个，所以希望能得到一些帮助

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:45:17.563

您可能没有在清单中说明完整的包名称，因此该活动应该在您的主包中。您应该在 Activity 声明中说明完整的包名称。例如：

```
<activity android:name="com.second.activity2.Activity"/> 
```

而不仅仅是

```
<activity android:name=".Activity"/> 
```

# python - django modelForm 重新组合字段

> ID：11708820
> 
> 赞同：0
> 
> 时间：2012-07-29T11:21:55.480
> 
> 标签：python, django

我有一个项目，我试图重新组合一些字段，其中一些是可见的，而另一些将显示在一个表单中，这样我就可以在字段上应用 java 脚本来扩展。谁能告诉我如何在我的modelForm类和模板结构中做这样的事情？

模型.py

```
class Page(models.Model):
    # version control columns
    version_from = models.DateTimeField(auto_now_add=True, editable=False)
    version_to = models.DateTimeField(null=True, blank=True, editable=False)
    # data
    name = models.CharField(_('Name'), max_length=10, help_text=_('The name of the page will be used as a display name & in navigation menus'))
    show_in_navigation = models.BooleanField(default=True)
    slug = models.SlugField(_('Slug'), )
    subject = models.CharField(_('Subject'), max_length=30, )
    html_title = models.CharField(_('HTML Title'), max_length=15, blank=True, null=True)
    keywords = models.CharField(_('HTML Keywords'), max_length=200, blank=True, null=True)
    content = models.TextField(_('Content'), )
    parent = models.ForeignKey('self', null=True, blank=True)
    # audit
    created_at = models.DateTimeField(auto_now_add=True)
    created_by = models.ForeignKey(User, editable=False)

    # objects manager
    objects = PageManager()

    class Meta:
        unique_together = (
            'id',
            'slug'
        ) 
```

表格.py

```
class PageForm(forms.ModelForm):
    class Meta:
        model = Page 
```

page-form.html

```
 <form class="form well" method="POST">
        {% csrf_token %}
            {% if form.errors %}
            <div class="alert alert-error">
                <a class="close" data-dismiss="alert" href="add_blog.html#">&times;</a>
                <h3>Error</h3>
                {{ form.non_field_errors }}
                {% for field in form %}
                        {{ field.errors }}
                {% endfor %}
            </div>
            {%endif%}

            {% csrf_token %}

            {# Include the hidden fields #}
            {% for hidden in form.hidden_fields %}
                {{ hidden }}
            {% endfor %}

            {# Include the visible fields #}
            {% for field in form.visible_fields %}

                    {{ field.label_tag }} {{ field }}
                    <span class="help-block">{{ field.help_text }}</span>

            {% endfor %}
        <br />
        <input type="submit" value='{% trans 'Login' %}' class="btn" />
    </form> 
```

我的挑战是，如何使字段 slug 和关键字在 html 中呈现在 div 标签中并在最后呈现。

以下是我希望实现的示例

```
 <form class="form well" method="POST">
        {% csrf_token %}
            {% if form.errors %}
            <div class="alert alert-error">
                <a class="close" data-dismiss="alert" href="add_blog.html#">&times;</a>
                <h3>Error</h3>
                {{ form.non_field_errors }}
                {% for field in form %}
                        {{ field.errors }}
                {% endfor %}
            </div>
            {%endif%}

            {% csrf_token %}

            {# Include the hidden fields #}
            {% for hidden in form.hidden_fields %}
                {{ hidden }}
            {% endfor %}

            {# Include the visible fields #}
            {% for field in form.visible_fields %}

                    {{ field.label_tag }} {{ field }}
                    <span class="help-block">{{ field.help_text }}</span>

            {% endfor %}
            {% for collapsible_field in form.collapsible_fields %}
            <div class='collapsible'>
                    {{ field.label_tag }} {{ field }}
                    <span class="help-block">{{ field.help_text }}</span>                             
            </div>
            {%endfor%}
        <br />
        <input type="submit" value='{% trans 'Login' %}' class="btn" />
    </form> 
```

上面的例子是为了进一步解释我的观点，但我会采用其他方法。请指教？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:47:17.033

您提出的所需解决方案看起来不错。只需将这些添加到您的 Form 类中：

```
class PageForm(forms.ModelForm):
    class Meta:
        model = Page

    def normal_fields(self):
        return [field for field in self if not field.is_hidden
               and field.name in ('field1', 'field2')]

    def collapsible_fields(self):
        return [field for field in self if not field.is_hidden
               and field.name in ('field4', 'field5', 'field3')] 
```

然后在您的模板中使用以下方法：

```
{# Include the visible fields #}
{% for field in form.normal_fields %}

        {{ field.label_tag }} {{ field }}
        <span class="help-block">{{ field.help_text }}</span>

{% endfor %}
{% for field in form.collapsible_fields %}
<div class='collapsible'>
        {{ field.label_tag }} {{ field }}
        <span class="help-block">{{ field.help_text }}</span>                             
</div>
{%endfor%} 
```

# django - Django IPython sqlite 抱怨天真的日期时间

> ID：11708821
> 
> 赞同：16
> 
> 时间：2012-07-29T11:21:55.717
> 
> 标签：django, ipython, pytz

我在 Django 1.4 中有一个新项目，使用 sqlite db。也使用 django_extenstions 的 shell_plus 没有问题。

当我安装 IPython 时，两者都`shell`开始`shell_plus`抱怨：

```
/path/to/my/virtualenv/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:50:
RuntimeWarning: SQLite received a naive datetime (2012-07-29 13:15:45.229464) while time zone support is active. 
```

似乎 IPython 本身使用了未知的日期时间。如何解决这个问题？

**编辑：**

我不想禁用 Django 的时区支持。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T11:23:44.420

我把它放在我的 local_settings.py 中：

```
#ignore the following error when using ipython:
#/django/db/backends/sqlite3/base.py:50: RuntimeWarning:
#SQLite received a naive datetime (2012-11-02 11:20:15.156506) while time zone support is active.

import warnings
import exceptions
warnings.filterwarnings("ignore", category=exceptions.RuntimeWarning, module='django.db.backends.sqlite3.base', lineno=53) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-28T08:47:30.037

我有同样的问题，但我不认为这真的是一个问题。IPython 似乎在内部使用天真的日期时间，而 Django 只是警告它。当您打开时区支持以及检测到幼稚的日期时间时，Django 总是会发送此警告。在我的机器上，此警告仅在我启动或关闭 IPython 时出现。此警告不会以任何方式影响您使用 IPython 的工作。因此，您可以在 IPython 中安全地创建感知日期时间，并将它们保存到您的数据库中。为了摆脱该警告，您可能必须处理 IPython 的内部结构。

一般来说，当使用有意识的日期时间时，我强烈建议为此目的使用[pytz 。](http://pytz.sourceforge.net/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-22T03:07:37.797

修改 settings.py，将 USE_TZ 设置为 False 可以解决这个问题。

# qt - 在 Qt for Symbian 中显示阿拉伯语测试

> ID：11708824
> 
> 赞同：0
> 
> 时间：2012-07-29T11:22:05.953
> 
> 标签：qt, qt4, symbian, symbian3

我在 Qt 中为 symbian 显示阿拉伯字符时遇到问题，并且整天都被困在这里，希望有人可以帮助我。简单地说，我有一个阿拉伯语单词，说 العالمين（不知道这个词的意思），我必须使用 QGraphicsTextItem 显示它。请给我一段代码来做到这一点。这是我徒劳的尝试。

`QString name("العالمينن");`

`QTextStream *p = new QTextStream(&name);`

`p->setCodec("ISO8859-6");`

`QGraphicsTextItem *text = new QGraphicsTextItem(p->readAll());`

`text->setPos(0,50);`

`scene->addItem(text);`

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:50:31.013

在这种情况下，手机应该默认支持这种字体。否则它将显示为框或根本不显示。但是，如果系统中安装了该字体，它将在 Desktop 中正常工作。

检查手机是否支持字体设置 -> 常规 -> 个性化 -> 语言 -> 手机语言。

# c - FFTW 1 线程总是比多线程好

> ID：11708835
> 
> 赞同：0
> 
> 时间：2012-07-29T11:23:16.730
> 
> 标签：c, multithreading, fft, performance-testing, fftw

我正在使用线程对 FFTW 进行一些测试，对于 1 个线程来说，大双复数值的一维变换（向前和向后）的时间总是比 2-3 或 4 个线程更好。有人可以帮我解决这个问题吗？谢谢！！

1个线程的输出是：

```
time           N
0.001515        16384   
0.003364        32768   
0.002625        65536   
0.006060        131072  
0.016190        262144  
0.042389        524288  
0.091719        1048576         
0.209468        2097152         
0.523317        4194304        
1.196903        8388608 
```

而对于 4 个线程（结果与 2 或 3 个线程相似......）：

```
time            N
0.002071        16384   
0.004009        32768  
0.007989        65536   
0.008715        131072  
0.020615        262144  
0.055483        524288  
0.159392        1048576         
0.322355        2097152         
0.761479        4194304         
1.647288        8388608 
```

我在两台不同的机器上测试我的代码，结果相同。机器1：

```
Ubuntu 10.04.1 LTS
2.6.32-24-generic  x86_64 GNU/Linux
gcc version 4.4.3 
Intel(R) Core(TM)2 Quad CPU    Q9550  @ 2.83GHz
ram 4gb 
```

机器2：

```
Ubuntu 10.04.1 LTS
2.6.32-21-server  x86_64 GNU/Linux
gcc version 4.4.3 
Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz
ram 8gb 
```

我有生成随机复数值并进行正向和反向变换的代码，并在这两个操作中花费时间，而不考虑对计划或内存分配的调用。

FFTW 配置为：

```
./configure --prefix=/home/.... --enable-threads 
```

我也尝试使用`-sse2`选项，但结果相同，1 个线程总是更好。

我编译：

```
gcc 1DFFTW.c -o 1DFFTW -I/$HOME/opt/fftw-3.3.2/include -L/$HOME/opt/fftw-3.3.2/lib -lrt -lfftw3_threads -lfftw3 -lpthread -lm 
```

代码的重要部分是：

```
 if(nThreads>1){
     int err=fftw_init_threads();
     if (err==0) 
        printf("thread creation error : %d\n",err);
     else 
        fftw_plan_with_nthreads(nThreads);
  }
  int i;
  fftw_complex *in;
  fftw_complex *in2;

  fftw_complex *out;

  fftw_plan plan_backward;
  fftw_plan plan_forward;

  struct timespec start, stop;
  printf ( "\n" );
  printf ( "N= %d \n",n);

  in = fftw_malloc ( sizeof ( fftw_complex ) * n );

  srand ( time(NULL) );

  for ( i = 0; i < n; i++ )
  {
    in[i][0] = rand() / (double)RAND_MAX;
    in[i][1] = rand() / (double)RAND_MAX;
  }

  out = fftw_malloc ( sizeof ( fftw_complex ) * n );

  in2 = fftw_malloc ( sizeof ( fftw_complex ) * n );

  plan_forward = fftw_plan_dft_1d ( n, in, out, FFTW_FORWARD, FFTW_ESTIMATE );

  plan_backward = fftw_plan_dft_1d ( n, out, in2, FFTW_BACKWARD, FFTW_ESTIMATE );

  clock_gettime(CLOCK_PROCESS_CPUTIME_ID,&start);

  fftw_execute ( plan_forward );

  fftw_execute ( plan_backward );

  clock_gettime(CLOCK_PROCESS_CPUTIME_ID,&stop); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:12:18.717

多线程算法具有与在多个 CPU 之间分配任务和合并单个子问题的结果相关的开销。您正在测量 CPU 时间，而不是挂钟时间。

如果要最小化 CPU 时间，请使用一个线程。这样，就没有线程开销。如果您想尽量减少挂墙时间，请使用更多线程。

# python - Django：模板和迭代字典

> ID：11708841
> 
> 赞同：2
> 
> 时间：2012-07-29T11:25:05.713
> 
> 标签：python, html, django, django-templates, django-views

我有一个字典：

```
 >>> some_dict
{1: ['String1', 'String2', 'String3','String4' ],
 2: ['String1_2', 'String2_2', 'String3_2', 'String4_2' ],} 
```

在我的模板中，我想遍历这个字典并在 html 中显示值。所以我从视图中发送了这个字典：

```
return render_to_response('tournament.html', 
        {.....
        'some_dict' : some_dict,
        'some_dict_range' : range(4),
             .....
        }) 
```

在锦标赛.html 中，我尝试迭代 some_dict。我想获得应该如下所示的输出：

```
'String1', 'String2', 'String3','String4'

 {% for iter1 in some_dict_range%}         
{{some_dict.0.iter1}}<br>{% endfor %} 
```

结果，我什么也没得到。但是当我试图在没有迭代器的情况下获得相同的结果时：some_dict.0.0、some_dict.0.1 等我得到了我需要的东西（'String1'、'String2'、'String3'、'String4'）。当我试图查看“iter1”的值时，我得到了正确的数字：

```
 {% for iter1 in some_dict_range%}         
{{iter1}}<br>  {% endfor %} 
```

0, 1, 2 ... 为什么这样不行？如果我在设计上错了，它应该是什么样子？我的意思是-迭代这个dict并在html-template中显示值的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T11:29:56.777

不应该：

```
{{some_dict.0.iter1}}<br>{% endfor %} 
```

是：

```
{{some_dict.iter1.0}}<br>{% endfor %}
            ^^^^^^^ 
```

否则，您正在尝试访问不存在的 some_dict[0] ...

为避免传入范围（因为我假设您希望按键顺序输出 dict），您可以使用以下命令：

```
{% for k, v in some_dict.items|sort %}
    Position {{ k }} has a first value of {{ v.0 }} and has:<br>
    {{ v|join:"<br/>" }}
    {% for item in v %}
        {{ item }}
    {% endfor %}
{% endfor %} 
```

# php - PHP可以充当代理的特定IP吗？

> ID：11708842
> 
> 赞同：1
> 
> 时间：2012-07-29T11:25:28.600
> 
> 标签：php, proxy

有什么方法可以运行 php（我可以访问它）并且 php 获取我的 ip 并从另一个假装是我的站点获取一些东西（通过代理我的 ip 到远程位置）？

假设我的 ip 是：192.353.89.xx
我的服务器 php 在我执行时会抓取我的 ip。
然后它使用我的 ip 从远程站点获取一些东西并处理并回显给我，以便远程服务器认为是我在拉信息..

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:30:36.480

使用 PHP 无法做到这一点。您可以让服务器从远程端点获取页面（使用[curl](http://php.net/manual/en/book.curl.php)或[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)），但**不能** [欺骗您的 IP 地址](http://en.wikipedia.org/wiki/IP_address_spoofing)。

# haxe - 在 FDT 5.5 中创建 Haxe 项目

> ID：11708843
> 
> 赞同：1
> 
> 时间：2012-07-29T11:25:32.690
> 
> 标签：haxe, fdt

我已经下载了 FDT 5.5 免费版来测试 Haxe 项目。但是当我创建 FDT 项目时，我只看到 Web、AIR 和插件**而不是 Haxe 项目**。有没有人可以帮我弄清楚。我浏览了 Flash 开发人员常见问题解答网站，没有找到任何东西，教程是 FDT 5 版本的 jsut

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:47:54.467

也许您的安装有问题。点击*File* , *New* , *New FDT Project*应该给你一个选项来创建一个新的 Haxe 项目：

![使用 FDT 的新 Haxe 项目](../Images/3771e18e2a34ed2f94f23d3923b596c5.png)

# dotnetnuke - 如何恢复 DNN 备份

> ID：11708846
> 
> 赞同：0
> 
> 时间：2012-07-29T11:25:56.183
> 
> 标签：dotnetnuke

我通过以下方式进行了 DNN 6 备份

1.  从 C:\inetpub\wwwroot 复制 DNN 文件夹
2.  取Sqlserver 2008 Enterprise edition 数据库备份

当我尝试恢复它时，我收到错误：

> 连接错误：索引 #：0 来源：.Net SqlClient 数据提供程序类：14 编号：18456 消息：Sql 登录失败

我正在使用以下链接进行恢复：

```
.../Install/InstallWizard.aspx 
```

笔记 ！！！当我更改数据库和用户名时，它将安装全新安装但不恢复备份数据库。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:06:22.460

这里的一些答案将取决于您在哪里/如何恢复数据库。

如果您将数据库从一台服务器带到另一台服务器，则从服务器登录的角度来看，用户帐户不会随之而来。因此，在恢复数据库后，您将需要创建一个新的用户帐户来管理对数据库的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:11:48.913

我不确定是否需要运行 /InstallWizard.aspx 来执行还原。第一步是将文件放在您想要的 Windows 目录中，然后进行 IIS 设置并正确指出，确保您对文件具有正确的安全访问权限（取决于您的 IIS 版本）。如果你做对了，从文件的角度来看，你会很好。

就 SQL Server 而言，您将需要手动恢复数据库，并且正如 Mitch 所说，创建一个可以访问数据库的新帐户 - 您需要更改 web.config 中的两个数据库访问语句以指定新用户。（如果它们都存在，则为标准和旧版）最后，如果您指定 SQL 用户，请确保在混合模式身份验证中配置 SQL 服务器。

# git - 单个开发人员的 Github 工作流程

> ID：11708848
> 
> 赞同：15
> 
> 时间：2012-07-29T11:26:20.773
> 
> 标签：git, github, workflow, github-for-windows

我想要一些关于我的 git 工作流程的反馈，因为这是我第一次使用它，尽管阅读了各种文章和 Stack Overflow 问题，但我不确定我的流程是否正确。这是我当前的工作流程（请注意，我使用 Github for Windows 应用程序进行所有 git 交互）：

1.  决定我要实现的下一个特性是什么。
2.  为该功能创建一个具有适当描述性名称的分支。我通过单击 Github for Windows 中的分支按钮并输入一个新名称来完成此操作。
3.  写一些代码。
4.  将这些更改提交到我的新分支。
5.  再写一些代码。
6.  将这些更改提交到我的新分支。
7.  我已经完成了该功能的实现，所以我想将我的更改合并回主分支。所以我点击分支标题下方的“管理”按钮。
8.  将新分支合并到主分支。
9.  删除新分支。

我对第 7 步之前的过程非常满意，此时我有点困惑。我认为我的困惑在于我试图使用 Github for Windows 应用程序而不是使用命令行。该应用程序似乎确实让事情变得更容易，但我看到的一些命令/指令与您在应用程序中采取的操作之间存在一些脱节。

让我问一些具体的问题：

1.  我的工作流程真的正确吗？如果没有，它有什么问题，我该如何改进它？
2.  我应该“发布”我对新分支的更改吗？我的理解是，这相当于`git push`在命令行中执行。真的吗？如果是这样，我想我只想在完成该功能的实现或它处于良好状态时才这样做？
3.  当我将分支合并到主分支时，我应该删除它还是应该永远保留它？
4.  完成合并后是否需要发布主分支，或者这是隐含的？
5.  我有时无法执行合并并收到此错误消息：

    > 无法合并
    > 
    > 无法将“测试”合并到“主”。您可能需要打开一个 shell 并调试此 repo 的状态。

以前发生这种情况时，我能够更改到主分支并将新分支合并到主分支中，但是不再起作用。无论我在哪个分支，我都无法合并这两个分支。两者都是同步的，我已经发布了我的测试分支的所有更改。我应该在 shell 中输入什么来找出为什么我不能合并分支？

作为参考，这些是提示我的过程的主要链接：

1.  [Scott Chacon 谈 Gitub 的工作流程](http://scottchacon.com/2011/08/31/github-flow.html])
2.  [本地存储库上单个开发人员的 Git 工作流](https://stackoverflow.com/questions/4056372/git-workflow-for-a-single-developer-on-a-local-repository)
3.  [单个用户的 Git 工作流](https://stackoverflow.com/questions/3007352/git-workflow-for-single-user)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T12:42:05.663

您所描述的听起来像是一个通用的分支工作流程，即使对于同一代码库上的多个开发人员也能很好地工作。[git flow](https://github.com/nvie/gitflow/)几乎完全涵盖了它，它是 git 命令行的扩展，用于自动化某些步骤。值得一试。

我不是 git 的 UI 工具的忠实粉丝。我大部分时间都在使用命令行。所以我没有使用 GitHub for Windows 的经验。但我敢打赌，您的问题出现是因为您的合并不再是快进了。这将需要工具未涵盖的手动合并步骤（afaik）。

在将分支合并到上游之后，没有充分的理由保留分支。但一个是跟踪某个功能的提交。如果您决定保留它们，我建议发布分支。您不依赖于本地机器上的代码。顺便说一句，保留分支不会使您的存储库变得更大，但会污染视线。大多数情况下，提交无论如何都存在于您的上游分支中。

合并后，您必须发布（推送）您的主分支。

为了熟悉 git 命令行工具，我建议从GitHub 人员的[Git 和 GitHub 简介](http://training.github.com/schedule/index.html)开始，然后按照他们的链接参考了解更多详细信息。

希望有帮助

# c - 可以将地址类型转换为整数吗？

> ID：11708851
> 
> 赞同：0
> 
> 时间：2012-07-29T11:26:35.093
> 
> 标签：c, casting

```
Queue queue = createQueue(); //queue to store int values
Node *node = getNode(8); 
enQueue(queue, (int)node);//storing an address in the int

..... some other statements ....

Node *root = (Node *) deQueue(queue);//typecasting an int to address
Node *left = root->left; 
```

在上面的代码中，队列可以存储整数值，同时将地址存储在其中。*它会产生任何问题吗？*

**在 int 中存储地址可能有问题的情况或任何架构是什么？**

请举一些例子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T11:28:02.190

> 在 int 中存储地址可能有问题的情况或任何架构是什么？

指针大于`int`. 也就是说，大多数 64 位系统。您可以使用 type`long`或更好的`intptr_t`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:58:46.087

你不必去那些你的假设会咬你屁股的古怪架构，采用 64 位英特尔拱门：

```
#include <stdio.h>
#include <stdlib.h>

int
main(int argc, const char *argv[])
{
    printf("sizeof int is %i\n", sizeof(int));
    printf("sizeof long is %i\n", sizeof(long));
    printf("sizeof void * is %i\n", sizeof(void *));

    exit(0);
} 
```

哪个输出

```
sizeof int is 4
sizeof long is 8
sizeof void * is 8 
```

所以，是的，你会遇到问题，因为你会默默地截断地址的高 4 个字节，导致在本质上是随机内存上乱涂乱画。

故事的寓意：如果您正在处理指针，请使用指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T15:02:26.657

对于 32 位系统， 和 的大小`int`通常`long`是`int*`一致的，所以这不是问题。但是在 64 位架构中将指针转换为整数（和返回）可能会失败。

对于 C99 或 C11，它存在一个可选功能：`(u)intptr_t`from `stdint.h`（一种可以存储存储在`void`指针中的值的整数类型）。它适用于许多平台，除了使用补码的机器。

使用 C89，您可以使用`unsigned long`变量；它通常会起作用。但是你为什么不使用`void`指针呢？

# php - php mysql INSERT INTO 列（如果存在）

> ID：11708852
> 
> 赞同：0
> 
> 时间：2012-07-29T11:26:34.577
> 
> 标签：php, mysql

在使用这行代码在表格 TABONE 中插入一些文本的 php 文件中

```
mysql_query("INSERT INTO `TABONE` VALUES ('$q1', '$q2', '$q3',  '$q4',  '$q5')") ; 
```

代码工作正常，因为“**我们收到 5 个变量，这个表包含 5 列**”

但有时**我们会收到一个只包含 3 列的表的 5 个变量，在这种情况下，我们只想在 3 列中插入前 3 个变量（'$q1'、'$q2'、'$q3'）**。

在这种情况下

```
mysql_query("INSERT INTO `TABONE` VALUES ('$q1', '$q2', '$q3',  '$q4',  '$q5')") ; 
```

不起作用 - 如何纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:31:06.367

如[手册](http://dev.mysql.com/doc/en/insert.html)所述：

> *   如果您未在严格的 SQL 模式下运行，则任何未显式给定值的列都将设置为其默认值（显式或隐式）。例如，如果您指定的列列表未命名表中的所有列，则未命名的列将设置为其默认值。默认值分配在[第 11.5 节“数据类型默认值”</a> 中进行了描述。另请参阅](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html)[第 1.8.6.2 节，“对无效数据的约束”</a>。](http://dev.mysql.com/doc/refman/5.5/en/constraint-invalid-data.html)
>     
>     [](http://dev.mysql.com/doc/refman/5.5/en/constraint-invalid-data.html)
>     
>     [如果您希望](http://dev.mysql.com/doc/refman/5.5/en/constraint-invalid-data.html)[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语句生成错误，除非您为所有没有默认值的列显式指定值，则应使用严格模式。请参阅[第 5.1.6 节，“服务器 SQL 模式”</a>。](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html)
>     
>     
> [](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html)
> *   [使用关键字`DEFAULT`将列显式设置为其默认值。这使得编写](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html)[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)将值分配给除少数列之外的所有列的语句变得更加容易，因为它使您能够避免编写`VALUES`不包含表中每一列的值的不完整列表。否则，您将不得不写出与列表中每个值对应的列名`VALUES`列表。
>     
>     
>     
>     您还[`DEFAULT(col_name)`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_default)可以将其用作更通用的形式，可在表达式中使用以生成给定列的默认值。

因此，您可以：

1.  命名列并省略那些您想要默认值的列：

    ```
    INSERT INTO TABONE (colA, colB, colC) VALUES ('$q1', '$q2', '$q3') 
    ```

    或者，如果您更喜欢以下`SET`语法：

    ```
    INSERT INTO TABONE SET colA='$q1', colB='$q2', colC='$q3' 
    ```

2.  `DEFAULT`使用关键字将其他列显式设置为其默认值：

    ```
    INSERT INTO TABONE VALUES ('$q1', '$q2', '$q3', DEFAULT, DEFAULT) 
    ```

# android - Android SDK：我在重新安装 SDK 选择哪个版本？

> ID：11708856
> 
> 赞同：0
> 
> 时间：2012-07-29T11:27:32.023
> 
> 标签：android

嗨，我正在重新安装 SDK，因为它在 sdk 工具 rev 20 升级时分崩离析。我想知道我应该安装哪些选项。我注意到[这里的链接](http://developer.android.com/about/dashboards/index.html)Api 10 2.3.3 是最受欢迎的。但是在安装我的 SDK 开始编码时，如果我只是想发布这个版本，我应该选择这个选项进行安装吗？我会假设所有新版本都将与早期版本兼容，是这样吗，所以针对 API 10 进行编码将使 API10-latest 的任何人都可以使用该软件？如果是这种情况，是否值得针对最低 API 进行编码？

![在此处输入图像描述](../Images/a944580f2a04e8d0f701b7b56c90bcee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:44:14.047

我会建议 2.3.3、3.2、4.0.3、4.1。您应该安装的其他库包括 Android 支持库、Google AdMob 广告 SDK、Google Play APK 扩展库、Google Play 许可库、Google USB 驱动程序和 Google Web 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:32:21.087

我的偏好是`2.2, 2.3.3, 4.0.3, 4.1`。对于额外的库：`Google USB Driver, Android Support Library, Google AdMob Ad SDK, Google Play APK Expansion Library, Google Web Driver`.

它仅取决于您将在其中部署产品的目标平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:38:55.677

安装与您在自己的移动设备上相同的 Android 版本。

# java - 如何在 Android 中使用这些特殊字符？

> ID：11708861
> 
> 赞同：1
> 
> 时间：2012-07-29T11:27:53.030
> 
> 标签：java, android, special-characters, htmlspecialchars

我正在开发一个 Android 本机应用程序，我需要在其中使用一些特殊字符。在谷歌大量搜索后，我发现以下[如何在 TextView、EditView 或其他 Android UI 元素中放置一些特殊的数学符号。](http://www.hrupin.com/2011/12/how-to-put-some-special-math-symbols-in-textview-editview-or-other-android-ui-element)我尝试了相同的代码，但是在我的文本视图中执行它时，它没有按照该 url 中给出的图表显示为特殊字符。获取与我们传递的相同文本的输出..我遵循的代码是..

代码：

```
 String htmlStringWithMathSymbols = "&amp;#8722;   &amp;#43;   &amp;#177; &amp;#215;   &amp;#247;   &amp;#37;   &amp;#137;   &amp;#61;   &amp;#8800;";

    txtv.setText(Html.fromHtml(htmlStringWithMathSymbols)); 
```

根据我的代码，当我执行它时，我没有像特殊的数学符号那样得到输出，而是像“− + ±....”这样的相同文本得到输出

那么，我们如何从上面提到的 URL 中按照以下代码获取特殊的数学符号......

提前致谢.........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:35:39.223

你做错的是写作`&amp;#xxxx;`。这样，您就可以告诉 HTML 解析器，您希望在`&amp;`后面加上符号（& 符号本身是什么）。

如果你想把它写成数学符号`&#xxx;`，那么它会起作用。

# python - 对于向一堆网络服务器发送即发即弃任务的网络服务器，正确的 ZMQ 架构是什么？

> ID：11708864
> 
> 赞同：1
> 
> 时间：2012-07-29T11:28:12.723
> 
> 标签：python, web-applications, distributed-computing, zeromq

我有一个网站，它向工作服务器发送繁重的处理任务。目前，只有一个工作服务器，但将来会添加更多。这些工作非常耗时（需要 5 分钟 - 1 小时）。这个想法是有一个配置，只需构建一个新的工作服务器就足以增加整个系统的容量，而无需在 webserver 部分进行额外配置。

目前，我已经使用 python-zeromq 和 PUSH/PULL 架构完成了一个基本的实现。

每次有新的工作请求时，网络服务器都会创建一个套接字，连接到其中一个工作人员并发送工作（不需要回复，这是一种即发即弃的工作）：

```
context = zmq.Context()
socket = context.socket(zmq.PUSH)
socket.connect("tcp://IP:5000")
socket.send(msg) 
```

在工人方面，这一直在运行：

```
context = zmq.Context()
socket = context.socket(zmq.PULL)
# bind to port in it's own IP
socket.bind("tcp://IP:5000")
print("Listening for messages...")
  while True:
  msg = socket.recv()
  <do something> 
```

现在我对此进行了更多研究，我认为这不是正确的做法。由于添加一个新的工作服务器需要将它的 IP 添加到 webserver 脚本中，连接到它们等等。

我宁愿让网络服务器有一个持久的套接字（而不是每次都创建一个），而是让工作人员连接到网络服务器。有点像这里： [https ://github.com/taotetek/blog_examples/blob/master/python_multiprocessing_with_zeromq/workqueue_example.py](https://github.com/taotetek/blog_examples/blob/master/python_multiprocessing_with_zeromq/workqueue_example.py)

简而言之，与上面的相反，webserver 的套接字绑定到它自己的 IP，并且工作人员连接到它。我想然后作业是通过循环方式发送的。

但是我担心的是，如果网络服务器重新启动（经常发生的事情）或离线一段时间会发生什么。使用 zeromq，所有工作连接都会挂起吗？不知何故变得无效？如果网络服务器宕机，当前队列会消失吗？

在当前的设置中，事情似乎运行得有些好，但我不能 100% 确定这样做的正确（而且不太复杂）的方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:57:26.090

来自[ZeroMQ 指南](http://zguide.zeromq.org/page%3aall#Why-We-Needed-MQ)：

> 组件可以动态地来来去去，ØMQ 会自动重新连接。

如果底层的 tcp 连接断开，ZeroMQ 将反复尝试重新连接，一旦连接成功就发送您的消息。

请注意，PAIR 套接字是一个例外。它们不会自动重新连接。（请参阅[zmq_socket 文档](http://api.zeromq.org/2-1%3azmq-socket)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:03:28.033

服务器上的绑定可能会起作用。但是，您确定您永远不需要超过一台 Web 服务器吗？我会考虑在您的服务器和工作人员之间放置一个代理。

无论哪种方式，我认为持久套接字是要走的路。

# java - java中的c ++中的printf可能吗？或者类似的东西？

> ID：11708866
> 
> 赞同：1
> 
> 时间：2012-07-29T11:28:27.000
> 
> 标签：java, c++

我有一个 C++ 程序，它循环了很多计算。对于每个循环，我使用 printf 打印出计算的百分比，例如

“计算已完成 64.7%。”

每个打印输出都会覆盖前一个，因此在控制台中仅使用一行，而不是在彼此下方打印几行。

这在java中可能吗？java中的printf每次都会打印出一个新行。

或者你们对我如何轻松看到进度有​​其他想法。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T11:33:34.730

对的，这是可能的。用户`System.out.print("your text\r")`。它打印行并且不会将光标移动到下一行。该序列`\r`使光标移动到当前行的开头，因此下一行将从相同的位置再次打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:39:37.830

从[如何返回到控制台中的行首？](https://stackoverflow.com/questions/301759/java-console-pretty-printing-returning-to-the-start-of-a-line)我明白那个

```
System.out.print('\r'); 
```

将返回到行首。这也应该适用`printf`。

# javascript - onfocus onblur 问题 javascript 同一字段的多个实例

> ID：11708872
> 
> 赞同：0
> 
> 时间：2012-07-29T11:28:55.930
> 
> 标签：javascript, jquery

```
<input type="text" rel="Credit card number" class="defaultColor" name="cc_num" id="txtCardNumber" runat="server" maxlength="20" onblur="cc_number_saved = this.value; this.value = this.value.replace(/[^\d]/g, '');" onfocus="if(this.value != cc_number_saved) this.value = cc_number_saved;"/> 
```

我正在保存信用卡的价值并替换非数字字符 onblur 并将它们再次放在焦点上（基本上是空格和破折号）。如果有更多房间，该字段将被创建多次（我的意思是如果用户选择多个房间，我们将在不同容器中为每个房间填充信用卡字段。

目前，如果我在其他房间输入不同的信用卡信息，它将用第一个房间替换值，我如何为这个信用卡字段的每个房间创建不同的实例。我已经在全局范围内声明了变量，所以它引起了我相信的问题。但不确定如何使用当前方法将每个生成的输入信用卡字段设为私有。

```
var cc_number_saved = ""; 
```

如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:39:05.790

使用 jQuery 将值附加到表示相关输入的 DOM 元素。

在输入上有一个 id：

```
<input id = 'input1' > 
```

然后，您可以为附加到输入的数据字段分配一个值，如下所示：

```
$('#input1').on('blur', function(){
    $(this).data('temp', $(this).val();
} 
```

...无论您对输入的值做什么，都保留该值。

然后像这样再次检索它：

```
var originalVal = $('#input1').data('temp'); 
```

然后将操纵值应用回输入，如下所示：

```
var newVal = someFunction(originalVal);
$('#input1').val(newVal); 
```

...管他呢。

# r - 如何在 R 中自动调整绘图大小

> ID：11708873
> 
> 赞同：2
> 
> 时间：2012-07-29T11:29:02.507
> 
> 标签：r, statistics, plot

假设我通过使用包有一个巨大的决策树`party`，如何声明自动大小以将所有内容放入 jpeg 或 png 中？

例子：

```
library(party)
data(Boston) 
jpeg("test.jpg")
tree <- ctree(crim ~ zn + indus + chas + nox + rm + age + dis + rad + tax + ptratio + black, data = Boston)
plot(tree) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T12:54:31.450

所以我认为你的问题是你没有得到输出。原因在于图形设备的工作方式。您必须打开要写入的文件，在文件中输入所需的数据，然后关闭图形设备。

对于你想做的事情：

```
png("test.png", 1200, 600)
plot(tree)
dev.off() 
```

这些数字以像素为单位设置 png 的宽度和高度。

编辑：如果您希望它自动调整大小，我建议根据终端节点的数量对其进行修改：

```
png("test.png", 140*length(unique(tree@where)), 600)
plot(tree)
dev.off() 
```

![自动尺寸](../Images/10eddb409642e4f557d0e7ad89d4b807.png)

# excel - MS Excel 程序

> ID：11708874
> 
> 赞同：-4
> 
> 时间：2012-07-29T11:29:13.537
> 
> 标签：excel

我正在**Excel**中创建发票。

我想从下拉列表中计算总数。

这意味着如果我选择**含税**，它应该将总金额显示为小计金额，如果我选择排除它应该计算..

我希望将函数应用于下拉列表的数量怎么可能，下面的img url

[https://lh3.googleusercontent.com/-act7lJiprYo/UBUDEKFtroI/AAAAAAAAAEc/r_j3lCzbvxA/s800/snap.png](https://lh3.googleusercontent.com/-act7lJiprYo/UBUdEKFtroI/AAAAAAAAAEc/r_j3lCzbvxA/s800/snap.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:07:39.027

```
 =If(e37='inclusive';sum(f3:f35)*1,36;sum(f3:f35)) 
```

假设 g3 到 g35 是计算中使用的数字范围，税收为 36%，并且包含的​​术语当然应该与选择列表中使用的 ia 完全相同

# javascript - 没有错误或延迟的第 3 方像素

> ID：11708876
> 
> 赞同：0
> 
> 时间：2012-07-29T11:29:13.810
> 
> 标签：javascript, tracking

我有一个第三方跟踪像素数据库，我将其添加到自己的输出中，以通知第三方事件或让他们设置 cookie。最容易处理的是图像像素——您只需设置好`<img src="...">`一切就可以了。但是，数据库中的某些像素属于`script`类型 - 即 3rd 方服务器返回空字符串和`Content-Type`as `text/javascript`。

到目前为止，我想到了以下方法：

1.  只需将它们插入相同的`img`. 请求会成功，但控制台上会出现警告，有些用户就是不喜欢这样
2.  `<script>`在写入时给这些像素适当的标签`document.write`- 取决于浏览器，第 3 方服务器的缓慢响应可能会导致整个页面停止，这也很糟糕。
3.  动态生成必要的 DOM`script`元素`src`并将其附加到`head`. 似乎有效，但我还没有进行广泛的测试，也不确定我是否遗漏了任何隐藏的问题。

那么，是否有一些普遍接受的方法来包含这些像素，以保证控制台中没有错误或在缓慢的第 3 方服务器响应时停止？（如果它可以处理一些其他任意内容类型，则附加点，而不仅仅是`text/javascript`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:39:00.277

IE 忽略了一个 async 属性，但会使您的脚本在其他浏览器中异步加载，从而不会阻止站点下载。

[http://davidwalsh.name/html5-async](http://davidwalsh.name/html5-async)

关于如何很好地插入它（也许这也适用于 IE，请查看评论）： https: [//plus.google.com/116910304844117268718/posts/TripyAFKMof](https://plus.google.com/116910304844117268718/posts/TripyAFKMof)

# php - 从列唯一的数据库中获取值并添加条件

> ID：11708878
> 
> 赞同：0
> 
> 时间：2012-07-29T11:29:46.837
> 
> 标签：php, sql, sql-server-2000

我需要有关高级 SQL 查询 (MSSQL 2000) 的帮助。

我有一个名为 Result 的表格，其中列出了田径 100 米和 200 米的比赛时间。一个跑步者可以有多个比赛时间，但我只想展示每个跑步者在每场比赛中的最佳时间。

结果表包含五列，Result_id、sports_id、result_time、result_date、event_code。因此，当我列出值时，sports_id 必须是唯一的，并且 result_time 必须是最快（最低）的值。此外，我希望能够选择 event_code 应该是“= 1”还是“= 2”，因为 100 和 200 米的结果时间混合在同一个表中。

几天前我问了一个类似的问题，但没有 event_code 条件。

这是我们想出的答案。

```
select r.*
from result r
inner join (
    select athelete_id, min(result_time) as FastestTime
    from result
    group by athelete_id
) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime 
```

有什么想法可以将 event_code 条件添加到此代码段中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:04:02.370

试试这个：

```
select r.*
from result r
inner join (
    select athelete_id, min(result_time) as FastestTime
    from result
    where event_code = 1
    group by athelete_id
) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:41:54.850

在子查询的输出中包含事件代码。然后您可以同时显示所有事件或在外部 where 子句中选择它们：

```
select r.*
from result r inner join
     (select athlete_id, event_code, min(result_time) as FastestTime
      from result
      group by athlete_id, event_code
     ) rm
     on r.athelete_id = rm.athlete_id and
        r.result_time = rm.FastestTime and
        r.event_code = rm.event_code
-- where event_code = xx 
```

最后一行是一个可选的 WHERE 子句，以防您一次只需要一个事件。

# android - Android：动态填充操作栏列表

> ID：11708881
> 
> 赞同：0
> 
> 时间：2012-07-29T11:30:57.057
> 
> 标签：android, android-actionbar, actionbarsherlock, android-spinner

我正在使用 SherlockActionbar，我想动态填充操作栏中的 ListNavigation 微调器。问题是我的列表导航不显示任何内容。但是，该应用程序正在模拟器上运行，没有任何错误。

这是活动代码：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.content.Context;
import android.os.Bundle;
import android.widget.ArrayAdapter;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;

public class TestView extends SherlockFragmentActivity {

    private ArrayAdapter<String> listnav;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.test_view_menu, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final ActionBar ab = getSupportActionBar();
        ab.setDisplayShowTitleEnabled(false);
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        Context context = ab.getThemedContext();
        setContentView(R.layout.test_view);

        List<String> items = new ArrayList<String>(Arrays.asList(getResources().getStringArray(R.array.testarray)));

        listnav = new ArrayAdapter<String>(context, R.layout.sherlock_spinner_item, items);
        listnav.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    }

} 
```

这是数组资源的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="testarray">
        <item >2011</item>
        <item >2012</item>
    </string-array>

</resources> 
```

我解决了这个问题。可以使用 setListNavigationCallbacks 访问操作栏中的微调器。 [有关此方法的更多信息，请单击此处](http://developer.android.com/reference/android/app/ActionBar.html#setListNavigationCallbacks%28android.widget.SpinnerAdapter,%20android.app.ActionBar.OnNavigationListener%29)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:24:39.860

我解决了这个问题。可以使用 setListNavigationCallbacks 访问操作栏中的微调器。[有关此方法的更多信息，请单击此处](http://developer.android.com/reference/android/app/ActionBar.html#setListNavigationCallbacks%28android.widget.SpinnerAdapter,%20android.app.ActionBar.OnNavigationListener%29)

# dynamic - 在 Camel 路由中创建动态过滤器 (xpath) 的选项

> ID：11708882
> 
> 赞同：1
> 
> 时间：2012-07-29T11:31:05.730
> 
> 标签：dynamic, filter, apache-camel

我在服务器启动时加载了以下静态路由。它侦听端口上的 UDP 消息并将这些消息推送到下面路由中定义的 seda 队列。

from("mina:udp://hostipaddress:9998?sync=false").wireTap("seda:sometag?size=100&blockWhenFull=true&multipleConsumers=true");

现在我可以有多个想要接收/订阅这些消息的客户端。他们还希望动态选择他们需要的提要。每个客户端向服务器发送订阅请求 (REST)（使用 Spring-MVC、Jetty、Camel 实现）。一旦服务器收到请求，我就会创建一个新的 Camel 路由，如下所示：

```
 from("seda:sometag?multipleConsumers=true")
                .routeId(RouteIdCreator.createRouteId(toIP, toPort, "sometag"))
                .filter()
                .xpath(this.xpathFilter).unmarshal().jaxb("sometag").marshal()
                .json().wireTap("mina:udp://client_ip_address:20001?sync=false"); 
```

部署此路由后，它将开始向 client_ip_address: 20001 发送 UDP 消息（如上面的动态路由中指定的那样。）

客户端可以向服务器发送不同的过滤器。

如果此服务器接收到新过滤器，它会执行以下操作 1\. 检查是否有路由正在运行（基于客户端 ip 和端口） 2\. 如果有路由正在运行，它会停止该路由并使用旧过滤器删除该路由 3.然后它重新创建一个新路由，该路由与 xpathfilter 中的最后一个路由不同。

我的问题是第 2 步需要很长时间（停止并重新启动）

有没有办法解决这个问题？基本上我想在不停止/迁移路线的情况下更改路线中的 XPath 表达式。

PS：我也在[Camel 官方邮件列表](http://camel.465427.n5.nabble.com/Options-for-creating-dynamic-filters-tc5716584.html)上发布了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:28:47.987

当您收到新订阅时，您可以尝试将 xpath 过滤器存储在数据库中（基本上是一个带有 ip 和关联过滤器的简单表）。然后你可以从路由中的数据库中读取这个过滤器，并将其用作过滤器。

```
from("seda:sometag?multipleConsumers=true")
                .routeId(RouteIdCreator.createRouteId(toIP, toPort, "sometag"))
                .setHeader("ip").constant(client_ip_adresse)
                .filter().xpath(simple("${bean:xpathFilterComponent?methode=find}"))
                .unmarshal().jaxb("sometag").marshal()
                .json().wireTap("mina:udp://client_ip_address:20001?sync=false"); 
```

你的豆子应该看起来像

```
public class XpathFilterCompnent {

       public void save(String ip, String filter){
         //store a filter for an ip in database, when a subscription is received
       }

       public void find(@Header("ip") String ip){
         String filter = ... //retreive filter from database
         return filter;
       }
} 
```

# ruby-on-rails - 使用指南针编译 css 资源时出错

> ID：11708886
> 
> 赞同：0
> 
> 时间：2012-07-29T11:31:46.460
> 
> 标签：ruby-on-rails, compass-sass, sass

嗨，我正在尝试使用指南针转换以下内容，尽管我收到一个编译错误，指出“未定义的 mixin 背景图像”

```
#header_toolbar {
height: 40px;
/* The black toolbar gradient :) */
background: #313131; /* Old browsers */
@include background-image(linear-gradient(left top, #313131, #101010));
/*background: -moz-linear-gradient(top,  #313131 0%, #101010 100%); *//* FF3.6+ *//*
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#313131), color-stop(100%,#101010)); *//* Chrome,Safari4+ *//*
background: -webkit-linear-gradient(top,  #313131 0%,#101010 100%); *//* Chrome10+,Safari5.1+ *//*
background: -o-linear-gradient(top,  #313131 0%,#101010 100%); *//* Opera 11.10+ *//*
background: -ms-linear-gradient(top,  #313131 0%,#101010 100%); *//* IE10+ *//*
background: linear-gradient(top,  #313131 0%,#101010 100%); *//* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#313131', endColorstr='#101010',GradientType=0 ); /* IE6-9 */ 
```

}

宝石文件

```
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
  gem "compass", "~> 0.12.1"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:42:54.630

您需要在 scss 中导入 mixin：

```
 @import "compass/css3/images" 
```

[http://compass-style.org/reference/compass/css3/images/](http://compass-style.org/reference/compass/css3/images/)

在这里查看有关将您的导入放在一个地方而不是在每个 scss 文件中定义它们的想法：http: [//compass-style.org/help/tutorials/best_practices/](http://compass-style.org/help/tutorials/best_practices/)

# c# - 可以在aspx页面上设置控件的appcode文件夹cs类

> ID：11708893
> 
> 赞同：1
> 
> 时间：2012-07-29T11:32:48.050
> 
> 标签：c#, class, controls, app-code

我是 C# 新手，我在我的 appcode 文件夹中创建了几个类作为方法。这些是从主类调用的，主类是包含大量 HTML 控件的 aspx 页面的代码。被调用的方法将希望使这些 asp HTML 控件中的一些可见/不可见，例如 Gridview1 或 Label1。但是，这些 appcode 类看不到主类的控件。我试图继承主类，但这似乎不允许我这样做。我在这里错过了一个概念吗？我需要使用命名空间吗？我需要使用指令吗？我是否需要以某种方式为我的主类添加前缀才能继承它。我原以为任何方法都可以看到主要的 aspx 控件，所以我遗漏了一些东西。您是否有一个简单的代码隐藏 cs (A) 和一个简单的 appcode 文件夹 cs (B) 的示例，它使 (A's) 控件不可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:53:51.943

如果您使用的是 ASP.NET：

然后，您有一个`.aspx`文件，其中包含您的控件（例如标签、文本框等）。您还将拥有一个`.cs`与您的文件“协同工作”的`.aspx`文件。

假设您有以下代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm7.aspx.cs" Inherits="Test.WebForm7" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:Label id="ThisIsYourLabel" runat="server" text="Make me invisible"/>
    </div>
    </form>
</body>
</html> 
```

在`.cs`页面指令 ( `CodeBehind="WebForm7.aspx.cs"`) 中指定的文件中，您可以访问您的控件。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Test
{
    public partial class WebForm7 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            ThisIsYourLabel.Visible = Tools.ChangeVisibility();
        }
    }
} 
```

在您的情况下，您的 app_code 文件夹中有一组方法。

我在 app_code 中做了一个小方法：

```
public class Tools
{
    public static boolean ChangeVisibility()
    {
        return false;
    }
} 
```

换句话说：您可以访问文件`.aspx`中页面上的控件。`.cs`您不能直接从`.aspx`app_code 文件夹中的 1 个特定页面访问控件。`designer.cs`您可以在页面文件中将访问级别从受保护更改为公开，**但我当然不建议您这样做**。

如果您运行此代码，您将不会在浏览器中看到任何内容，因为标签将设置为`Visible = false;`，但如果您调试它，您将看到它是如何工作的 :)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T06:41:59.023

我认为这可能对你有帮助..，你可以尝试这样的事情......在你的 appcode 文件夹下的类文件中......

```
using System.Web.UI.WebControls;
public class Tools()
{

public static void set_label_properties(Label lb)
{

lb.Visible=false;
lb.Text="Your status msg..";

}

} 
```

并且在您的 aspx.cs 文件中，您需要调用此方法..无论您需要..并将适当的 Web 控件（标签）作为您的方法参数传递..

```
Tools.set_label_properties(Label1); 
```

# windows-phone-7 - ios开发后的Windows Phone 7

> ID：11708898
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:33:28.970
> 
> 标签：windows-phone-7, ios5

这可能听起来有点话题，但我真的很想知道在 ios 开发之后学习 windows phone 7 开发是否是一个好主意。我还在学习ios，但基本的东西都被覆盖了。所以我正在考虑并排开始Windows 7开发。

那么这是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T00:59:50.893

这应该是个好主意。首先，您只是不了解 .NET 世界的部分框架，而且您的范围仅限于将在 Windows Phone 7/8 中使用的可用命名空间。

一旦你开始学习 Windows Phone 7，你应该很容易切换到另一个框架类库 (FCL)，即 Silverlight，可用于在 Web 浏览器中开发应用程序，然后切换到用于开发桌面应用程序的 WPF .

以我的真实观点，您不仅会从 Windows Phone 7 开发开始，而且您还将开始学习应用设计模式，只需为手机开发简单的应用程序即可。一旦您对它感到满意，就应该很容易在 Silverlight 和 WPF 中应用这些先进的东西。

作为一名开发人员，你不应该犹豫去学习、重新学习和忘记。这是21世纪。一切变化如此之快。

# c - 每次递归都可以改成迭代吗？

> ID：11708903
> 
> 赞同：4
> 
> 时间：2012-07-29T11:34:02.783
> 
> 标签：c, recursion, iteration

*每个*递归函数都可以转换为迭代吗？递归函数应该具有什么特征才能使用迭代来实现？

我一直在尝试使用迭代定义以下函数，但似乎不行！它应该探索迷宫中的所有路径（节点）。任何人都可以使用迭代重写它吗？如果不可能，为什么不呢？

```
typedef int[0,99] id_t;
bool visited[id_t];
int path[id_t];
int pathCounter = 0;

struct { 
    id_t id;
    bool free;
    int neighborNode[4];
} nodeMap[id_t];

void findPath(int current){
    visited[current] = true;
    for (i : int[0, 3]){
        if(nodeMap[nodeMap[current].neighborNode[i]].free == true && visited[nodeMap[current].neighborNode[i]] == false && nodeMap[current].neighborNode[i] != -1){
        path[pathCounter] = nodeMap[nodeMap[current].neighborNode[i]].id;
        pathCounter++;
        findPath(nodeMap[current].neighborNode[i]);
        path[pathCounter] = nodeMap[current].id;
        pathCounter++;      
        }
    }
    path[0] = current;
} 
```

扩展：是否可以在不实现我自己的堆栈的情况下将提到的递归函数转换为迭代？其中一个答案表明，每个*尾递归*函数都可以在*不*使用堆栈结构的情况下转换为迭代......如果是这样，每个递归函数都可以转换为尾递归吗？如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T11:48:37.943

是的，每个递归函数都可以通过遵循相当机械的过程转换为迭代函数。

回想一下，编译器通过使用堆栈来实现递归，这通常在 CPU 的硬件中实现。您可以构建自己的软件堆栈，使其适合保持函数的状态（即其局部变量），将初始状态推送到该堆栈，并编写一个`while`循环将新状态推送到堆栈而不是创建一个递归调用，弹出堆栈而不是返回，并在堆栈不为空时继续该过程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T11:50:37.100

通常可以将任何递归算法转换为循环。方法很简单：我们可以模仿编译器生成函数调用的代码：进入函数，从函数返回，继续执行。

要将递归函数转换为迭代循环，您可以：

*   定义一个记录，它存储函数的参数和局部变量。这相当于堆栈帧。
*   定义一个堆栈，其中记录了一个推送。这类似于程序堆栈。
*   调用函数时，创建参数和局部变量的当前值的记录并推送到堆栈。
*   从函数返回时，从堆栈中弹出并用记录中的值覆盖当前值。

上面的整个过程是在一个while循环中完成的，当栈为空时会退出，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T12:32:59.533

就像已经说过的其他答案一样，在技术上可以通过模拟堆栈来做到这一点。但我猜你不想那样做。您可能想要一个不使用堆栈的迭代解决方案。如果是这种情况，您需要有一个尾递归函数。AFAIR 这是唯一可能的方法。您可以将每个尾递归函数重写为命令式函数，而无需模拟堆栈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T12:39:52.853

如果您有一个简单的“尾”递归，那么您可以使用循环代替（例如阶乘函数）。在更复杂的函数中，您必须使用`stack`结构和`while (!stack.empty())`循环。但是，如果您有相当复杂的递归，例如`Towers of Hanoi`、`Merge Sort`和`printing truth table`，您将不得不使用`stack`with`while`循环，如前所述，但使用`switch`语句来确定当前调用状态。

**递归：**

```
void mergeSort(int start, int end)
{
    if (start < end)
    {
         mergeSort(start, (start + end) / 2);
         mergeSort((start + end) / 2 + 1, end);
         Merge(start, end);
    }

} 
```

**迭代：**

```
void mergeSort()
{
  stack<int> st;
  st.push(1);
  int status;

  while (!st.empty())
  {
      status = st.pop();
      switch (status)
      {
        case 1:
             ....
            break;
        case 2:
             break;
      }
  }
} 
```

我强烈推荐[这个优秀的 pdf](http://www.cs.sun.ac.za/rw711/2012term2/lectures/lec9_2010/l9_2010.pdf)，它详细解释了这个过程。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-29T11:37:12.953

根据[http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Recursion_versus_iteration](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Recursion_versus_iteration)所有递归定义的函数都可以转换为迭代函数。

# apache-flex - flexmojos:copy-flex-resources 不复制资源文件

> ID：11708904
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:34:06.557
> 
> 标签：apache-flex, maven, flexmojos

嗨，我一直在建立一个 flex 项目，它基本上分为 3 个模块，一个 flex，一个 java 和一个 war 项目。我能够编译所有，但 flexmojos:copy-flex-resources 插件仅将“.swf”文件复制到 webapp 目录中。还有其他文件（如 html 包装器）被跳过。有没有人整理一下。谢谢！

我的 SWF POM

瑞士法郎申请

```
<properties>
    <path_to_services_config_xml>${basedir}/src/main/resources/services-config.xml</path_to_services_config_xml>
</properties>

<build>
    <sourceDirectory>src/main/flex</sourceDirectory>
    <testSourceDirectory>src/test/flex</testSourceDirectory>
    <directory>target</directory>
    <plugins>
        <plugin>
            <groupId>org.sonatype.flexmojos</groupId>
            <artifactId>flexmojos-maven-plugin</artifactId>
            <!-- <version>3.8</version> -->
            <executions>
                <execution>
                    <id>html-wrapper</id>
                    <goals>
                        <goal>wrapper</goal>
                    </goals>
                    <configuration>
                        <templateURI>folder:/html-template</templateURI>
                        <parameters>
                            <swf>${project.build.finalName}</swf>
                            <width>100%</width>
                            <height>100%</height>
                            <version_major>${flash.major}</version_major>
                            <version_minor>${flash.minor}</version_minor>
                            <version_revision>${flash.revision}</version_revision>
                            <bgcolor>#FFFFFF</bgcolor>
                        </parameters>
                        <htmlName>Main</htmlName>
                        <!-- <targetPlayer>${flash.major}.${flash.minor}.${flash.revision}</targetPlayer> -->
                    </configuration>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>com.adobe.flex.compiler</groupId>
                    <artifactId>flex-compiler-oem</artifactId>
                    <version>4.5.1.21328</version>
                </dependency>
            </dependencies>
            <extensions>true</extensions>
            <configuration>
                <debug>true</debug>
                <!-- <output>target/bin/</output> <sourcePaths> <path>src/main</path> 
                    </sourcePaths> Configuration to copy assets (Images) folder to target -->
                <includeFileSets>
                    <fileset>
                        <directory>src/main/assets</directory>
                        <includes>
                            <include>*.*</include>
                        </includes>
                    </fileset>
                </includeFileSets>

                <!-- service-config.xml specification (path defined above) -->
                <services>${path_to_services_config_xml}</services>

                <!-- Context Root URL -->
                <contextRoot>clv-web-0.3</contextRoot>
                <localesCompiled>
                    <locale>en_US</locale>
                    <locale>fr_FR</locale>
                </localesCompiled>
                <localesSourcePath>${basedir}/src/main/locale/{locale}</localesSourcePath>
                <!-- <localesSourcePath>${basedir}/src/main/locale/fr_FR</localesSourcePath> -->
                <!-- <templateURI>${basedir}/html-template/</templateURI> <outputDir>target/flex-html</outputDir> 
                    <htmlName>myindex.html</htmlName> <parameters> <swf>${build.finalName}</swf> 
                    </parameters> -->
            </configuration>
            <!-- <executions> <execution> <goals> <goal>wrapper</goal> </goals> </execution> 
                </executions> -->
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>com.adobe.flex.framework</groupId>
        <artifactId>flex-framework</artifactId>
        <version>4.5.1.21328</version>
        <type>pom</type>
    </dependency>

    <dependency>
        <groupId>com.adobe.flexunit</groupId>
        <artifactId>flexunit</artifactId>
        <version>0.85</version>
        <type>swc</type>
        <scope>test</scope>
    </dependency> 
```

我的战争 POM 是

```
<packaging>war</packaging>
<build>
    <plugins>
        <plugin>
            <groupId>org.sonatype.flexmojos</groupId>
            <artifactId>flexmojos-maven-plugin</artifactId>
            <version>4.1-beta</version>
            <extensions>true</extensions>
            <executions>
                <!-- <execution> <id>wrapper</id> <phase>generate-resources</phase> 
                    <goals> <goal>wrapper</goal> </goals> <configuration> <wrapperArtifact> <groupId>com.cat.clv.swf</groupId> 
                    <artifactId>clv-swf</artifactId> <version>0.3</version> </wrapperArtifact> 
                    <htmlName>Main</htmlName> </configuration> </execution> -->
                <execution>
                    <goals>
                        <goal>copy-flex-resources</goal>
                    </goals>
                    <configuration>
                    <webappDirectory>>${basedir}/src/main/webapp/demo</webappDirectory>
                        <stripVersion>true</stripVersion>
                    </configuration>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <webResources>
                    <resource>
                        <!-- this is relative to the pom.xml directory -->
                        <directory>src/main/webapp</directory>
                    </resource>
                </webResources>
                <debug>true</debug>
                <!-- <warSourceExcludes>index.template.html</warSourceExcludes> <webResources> 
                    <resource> <directory>target</directory> </resource> </webResources> -->
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:22:29.720

我是正式接管 flexmojos 开发的人。

您遇到的问题可能与盯着 3.x 的 flexmojos 中的一些更改有关（不记得版本）我遇到了与您相同的问题。在寻找原因时，我发现 flexmojos 无法从项目 pom 中确定 finalName，因为在某些情况下 maven 会抛出错误。当我自己指定 finalName 时，我通过在 copy-flex-resources 配置中设置 false 解决了这个问题。最终这会有所帮助。

我必须在另一个项目中使用的另一个解决方案是在我的战争项目中明确使用 copy-flex-resources mojo 的 oder 版本。3.7.1 似乎是最后一个没有这个问题的版本。

不幸的是，我还没有设法解决这个错误，但它仍然在我的雷达上。

克里斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:51:01.020

我在 flexmojos-maven-plugin 版本 3.8 中遇到了一个非常相似的配置问题，我通过将 warSourceDirectoryPath 添加到 swf 项目中包装目标配置的 outputDirectory 来修复该问题：

我定义了一个属性：warSourceDirectoryPath = ../workbench-server/src/main/webapp/flex

```
 <plugin>
    <groupId>org.sonatype.flexmojos</groupId>
    <artifactId>flexmojos-maven-plugin</artifactId>
    <version>3.8</version>
    <executions>
        <execution>
            <id>flex-ui-wrapper</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>wrapper</goal>
            </goals>
            <configuration>
                <templateURI>folder:/html-template</templateURI>
                   <templateOutputDirectory>${project.build.directory}/templates</templateOutputDirectory>
                <outputDirectory>${warSourceDirectoryPath}</outputDirectory>
                <parameters>
                    <swf>${project.build.finalName}</swf>
                    <title>Workbench</title>
                    <application>myapp</application>
                </parameters>           
                <htmlName>Workbench</htmlName>
            </configuration>
        </execution>
    </executions>       
    <dependencies> 
       ...      
    </dependencies>
    <extensions>true</extensions>    
    <configuration>
      <debug>true</debug>
      <sourceFile>${basedir}/src/main/flex/Workbench.mxml</sourceFile>
      <contextRoot>/workbench-server</contextRoot>          
      <generateHtmlWrapper>true</generateHtmlWrapper>
      <targetPlayer>11.1.0</targetPlayer> 
      <!-- <services>generated-resources</services> this is the default -->
    </configuration>
  </plugin> 
```

希望有帮助。

# scala - 是否有一个规格匹配器可以将 Option 和 Either 拆箱

> ID：11708905
> 
> 赞同：8
> 
> 时间：2012-07-29T11:34:18.523
> 
> 标签：scala, bdd, specs

我创建了一个规范测试，以验证一些 JSON 解析。尽管测试运行良好，但感觉相当嘈杂。

我想知道规范中是否有现有的代码来取消选项和任何一个？

```
"twitter json to Scala class mapper" should {
    "parsing a tweet" in {
      TwitterJsonMapper.tweetP(tweetS) match {
        case Right(t: Tweet) => {
          implicit def unOption[T](t: Option[T]): T = t.get
          implicit def unEither[T](t: Either[T,Throwable]): T = t match {case Left(left) => left ;case Right(t) => throw t}
          "test id" in {
            true must_== (t.id.get == 228106060337135617l)
          }
          "test id_str" in {
            true must_== (t.id_str.get == "228106060337135617")
          }
          "test time" in {
            true must_== (t.created_at.getHours == 13 )
          }
        }
        case Left((pe: JsonParseException, reason: String)) => fail(reason + "\n" + pe)
      }
    }
  }

 //The Tweet is produced from JSON using Fasterxml's Jackson-Scala library. 
 //I want to use Option or Either monads over all child attributes - for the usual reasons.
case class Tweet(
  @BeanProperty contributors: Option[String],
  @BeanProperty coordinates: Option[String],

  @BeanProperty @JsonDeserialize (
      using = classOf[TwitterDateDeserializer]
  ) created_at: Either[Date,Throwable],
  @BeanProperty favorited: Boolean = false,
  //elided etc etc
  @BeanProperty id_str: Option[String]
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T23:25:41.113

和 确实有一些特定的匹配`Option`器`Either`：

```
t.id must beSome(228106060337135617l)
t.id_str must beSome("228106060337135617")
t.created_at.left.map(_.getHours) must beLeft(13) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T23:09:04.277

我还没有发现这是必要的。请记住，Option/Either 具有相等的值。只需匹配 Option/Either 而不是匹配它们包含的值。

```
 "Option should match other options" >> {
        Some(21) must be equalTo Some(21)
      }

      "Either should match Either" >> {
        Right("Some string") must be equalTo Right("Some string")
      } 
```

我没有尝试编译这些，但它们应该可以工作。您可能需要添加一些显式类型（或使用`must_==`不是类型安全的）

```
 t.id must be equalTo Some(228106060337135617l)
      t.id_str must be equalTo Some("228106060337135617")
      t.created_at.left.map(_.getHours) must be equalTo Left(13) 
```

# mysql - 多维mysql表

> ID：11708906
> 
> 赞同：1
> 
> 时间：2012-07-29T11:34:45.917
> 
> 标签：mysql

我需要一个 mysql 表来包含静态和动态数据，因此第一个数据是标准信息，例如姓名电子邮件地址等

```
Person 1| name| address| age|work record--->  within-> work record: experience|Qualifications
person 2| name| address| age|work record
person3 | name| address| age|work record 
```

所以第 1 个人可能只有一列经验，第 2 个人可能有 5 列，所以我需要一个新维度来避免为每个人创建单独的表格。这可以在mysql中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:59:07.227

这样做的正确方法是为经验和资格设置第二个（和第三个）表。（如果您要存储的数据相似，您可以将这两个抽象到同一个表中）

然后，您将使用与“人员”表的 1:n 关系，使用人员表的主键作为经验和资格表中的外键。

这些表可能看起来像这样：

```
PERSON table:
-------------
PersonID (Primary Key)
Name
Address
Age

QUALIFICATION table:
--------------------
QualificationID (Primary Key)
PersonID (Foreign key to Person table)
Qualification-field1
Qualification-field2
Qualification-fieldn

EXPERIENCE table:
-----------------
ExperienceID (Primary Key)
PersonID (Foreign key to Person table)
Experience-field1
Experience-field2
Experience-fieldn 
```

使用约束可以确保您不能拥有引用不存在的 PERSON 记录的 EXPERIENCE 记录。

# c - 我们如何获得以下输出？

> ID：11708910
> 
> 赞同：2
> 
> 时间：2012-07-29T11:35:11.010
> 
> 标签：c, casting

```
#include <stdio.h>

int main(void)
{ 
    int i = 258;
    char ch = i;
    printf("%d", ch)
} 
```

输出为 2！

变量的范围如何工作？c语言中不同数据类型的范围是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T11:37:51.947

当分配给较小的类型时，值是

*   截断，即`258 % 256`如果新类型是无符号的
*   如果新类型已签名，则以实现定义的方式进行修改

> 否则，如果新类型是无符号的，则通过 **在新类型中可以表示的最大值的基础上反复加减一来转换该值，直到该值在新类型的范围内**。
> 
> 否则，新类型是有符号的，值不能在其中表示；结果要么是实现定义的，要么是产生实现定义的信号。

因此，所有花哨的“加法或减法”意味着它的分配就像您说的那样：

```
ch = i % 256; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T11:39:27.057

`char`是 8 位长，而`258`需要 9 位来表示。转换为`char`砍掉二进制的最高有效位，导致, 是`258`二进制的。`100000010``10``2`

当您传递`char`到 时`printf`，它会*被提升为*，然后由格式说明符`int`拾取，并打印为。`%d``2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T11:53:36.643

```
#include <stdio.h>

int main(void)
{ 
    int i = 258;
    char ch = i;
    printf("%d", ch)
} 
```

这`i`是`0000000100000010`机器级别的。`ch`占用 1 个字节，因此占用最后 8 位，它是`00000010`，它是 2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T13:24:37.933

char 为**8 位**，因此，当您转换（将整数分配给 char）时，在**32 位**机器中，i（int 为 32 位）var 为：

```
00000000 00000000 00000001 00000010 = 258 (in binary) 
```

当你想要一个来自这个 int 的 char 时，你会截断最后 8 位（char 是 8 位），所以你得到：

**00000010 表示十进制的 2**，这就是你看到这个输出的原因。

问候。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T12:04:09.897

为了找出 C 语言中各种类型的长度，您应该参考 limits.h（或 C++ 中的 climits）。char 不保证为 8 位长。它只是：

> 机器的最小可寻址单元，可以包含基本字符集。它是一个整数类型。实际类型可以是有符号的或无符号的，具体取决于实现

其他类型也有相同的模糊定义。

或者，您可以使用运算符`sizeof`动态找出类型的大小（以字节为单位）。

您可能无法假设本机 C 数据类型的确切范围。标准只放置最小的限制，所以你可以说`unsigned short`至少可以容纳 65536 个不同的值。上限可能不同

更多阅读请参考[维基百科](http://en.wikipedia.org/wiki/C_data_types)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T11:31:17.837

您正在使用**little-endian**机器。

258 的二进制表示是

```
00000000 00000000 00000001 00000010 
```

在将整数分配给 char 时，只有 8 个字节的数据被复制到 char。即LSB。

这里只有`00000010`ie 0x02 会被复制到 char 中。

**在大端**机器 的情况下，相同的代码将给出零。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-29T12:55:11.907

这是**溢出**；结果是未定义的，因为`char`可能是`signed`（未定义的行为）或`unsigned`（明确定义的“环绕”行为）。

# ios - Iphone TableView解析json

> ID：11708911
> 
> 赞同：0
> 
> 时间：2012-07-29T11:35:13.150
> 
> 标签：ios, uitableview, uilabel

任何人都可以帮我做这样的事情吗？我需要解析来自 mysql/php 的信息，以便为每个产品创建一个相册！

谢谢！

[http://codecanyon.net/item/galleries-reloaded/473922?ref=mythodeia&ref=mythodeia&clickthrough_id=72212227&redirect_back=true](http://codecanyon.net/item/galleries-reloaded/473922?ref=mythodeia&ref=mythodeia&clickthrough_id=72212227&redirect_back=true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:52:59.927

使用`SBJSON`API 解析来自服务器的 JSON 响应，并将该输出设置为方法`text`中的表格视图单元格的属性`-cellForRowAtIndexPath:`。

# vb.net - VB.Net SQL 插入难度

> ID：11708914
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:35:29.763
> 
> 标签：vb.net

我在 vs 2010 中编程一个 vb.net 项目。不知道我插入数据时发生了什么，因为它给出了以下消息：

`A first chance exception of type 'System.Data.SqlClient.SqlException' occurred in System.Data.dll`

怎么了？

这是使它的代码的一部分

```
Imports System.Data
Imports System.Data.SqlClient

Public Class atl

 Dim myconnection As SqlConnection

   Dim mycommand As SqlCommand

 Dim myConnectionString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\uss.mdf;Integrated Security=True;User Instance=True"

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button2.Click
    myconnection = New SqlConnection(myConnectionString)
    mycommand = New SqlCommand("insert into atl([nome],[morada],[sexo],[datan],[telf],[desporto]) values ('" & txtNome.Text & "','" & txtMorada.Text & _
                               "','" & ComboSexo.Text & "','" & CType(txtDataN.Text, DateTime).ToString("yyy-MM-dd") & "','" & txtTelemovel.Text & "','" & ComboBox1.Text & "')", myconnection)
    myconnection.Open()
    Try
        mycommand.ExecuteNonQuery()
        Label1.Content = "O atleta " + txtNome.Text + " foi registado!!!"
    Catch ex As Exception
        Label1.Content = "Falhou a ligação a base de dados!!!"
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:47:59.567

您的某些值是否包含单引号？你的陈述很容易受到`sql injecton`. 为什么不使用sql参数？

```
Dim myConnectionString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\uss.mdf;Integrated Security=True;User Instance=True"
Dim sqlStatement =  "insert into atl([nome],[morada],[sexo],[datan],[telf],[desporto]) "
sqlStatement &= "VALUES (@nome, @morada, @sexo, @datan, @telf, @desporto)"  

Using xConn As New SqlConnection(myConnectionString)
    Try
        Dim xComm As New SqlCommand(sqlStatement, xConn)
        With xComm
            .CommandType = CommandType.Text
            .Parameters.AddWithValue("@nome", txtNome.Text)
            .Parameters.AddWithValue("@morada", txtMorada.Text)
            .Parameters.AddWithValue("@sexo", ComboSexo.Text)
            .Parameters.AddWithValue("@datan", CType(txtDataN.Text, DateTime).ToString("yyyy-MM-dd") )
            .Parameters.AddWithValue("@telf", txtTelemovel.Text)
            .Parameters.AddWithValue("@desporto", ComboBox1.Text)
        End With

        xConn.Open()
        xComm.ExecuteNonQuery()
        xComm.Dispose()
    Catch ex As SqlException
        MsgBox (ex.Message)
    End Try
End Using 
```

你也有一个错误：`CType(txtDataN.Text, DateTime).ToString("yyy-MM-dd")`它不`yyyy-MM-dd`应该`yyy-MM-dd`

# javascript - Jquery ajax addClass问题

> ID：11708916
> 
> 赞同：1
> 
> 时间：2012-07-29T11:36:08.163
> 
> 标签：javascript, jquery, html, ajax

首先对不起，我是一个大初学者，只是在做实验，我用 oembed 制作了一个类似 facebook 的墙。

并且想添加一个喜欢和不喜欢的按钮。

我从点赞按钮开始，它也可以工作，喜欢和不喜欢，cookie 完美地保存了类值。

我的问题是ajax调用，所以实际上当我点击like按钮时，它会覆盖所有锚href val并添加一个类而不是点击什么。

这是我的代码

**jQuery**

```
var cookieLike = "like_"
$('a.like').each(function(){
    var id = $(this).attr('href'), cookieLiked = cookieLike + id;

    switch($.cookies.get(cookieLiked) ) {
        case "unliked":
            $(this).removeClass('btn-success');
        break;
        case "liked":
            $(this).addClass('btn-success');
        break;
    }
}).on('click', function(e){
    e.preventDefault()
    var likeId = $(this).attr('href');
    $.ajax({
        url: "<?php echo base_url(); ?>stream/like/" + likeId ,
        type: "post",
        data: likeId,
        dataType: "json",
        success: function(like)
        {

            if(like.likeStatus == "unliked") {
                $('a.like').attr('href', likeId).removeClass('btn-success');
                $.cookies.set(cookieLike + likeId, 'unliked');

            }else if(like.likeStatus == "liked") {
                $('a.like').attr('href', likeId).addClass('btn-success');
                $.cookies.set(cookieLike + likeId, 'liked');

            }

        }
    });

}); 
```

**html**

```
<div class="stream-bottom">
    <a href="#" class=" btn btn-mini comment">Komment</a>
    <div class="pull-right like-options">
        <a href="<?php echo $sp->sid; ?>" class=" btn btn-mini like"><i class="icon-thumbs-up" title="tetszik"></i> </a>
        <a href="<?php echo $sp->sid; ?>" class=" btn btn-mini dislike"><i class="icon-thumbs-down" title="nem tetszik"></i></a>
    </div>
</div> 
```

可以请有人指出我缺少什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T11:40:21.917

绑定目标元素（点击的链接）并在成功回调中引用

在 .on('click') 回调中

```
var $link = $(this); 
```

在成功回调中使用

```
$(this).attr('href', likeId) 
```

代替

```
$('a.like').attr('href', likeId) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T11:42:53.440

也许：

```
.on('click', function (e) {
    e.preventDefault();

    var button = $(this);
    var likeId = button.attr('href');

    $.ajax({
        url: "<?php echo base_url(); ?>stream/like/" + likeId,
        type: "post",
        data: likeId,
        dataType: "json",

        success: function (like) {
            if (like.likeStatus == "unliked") {
                button.removeClass('btn-success');
                $.cookies.set(cookieLike + likeId, 'unliked');
            } else if (like.likeStatus == "liked") {
                button.addClass('btn-success');
                $.cookies.set(cookieLike + likeId, 'liked');
            }

        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:46:46.420

当您使用`$("a")`或`$("a.like")`您指的是**整个**锚标签集或以“like”作为类名的锚标签时。要专门使用您单击的锚标记，请使用 $(this) 变量。

这将为您提供生成事件的元素，在本例中为您单击的锚标记。

# google-maps - 谷歌静态地图

> ID：11708920
> 
> 赞同：-2
> 
> 时间：2012-07-29T11:37:10.247
> 
> 标签：google-maps

我需要使用 Google Static Map api，但我需要将它从 (latitude, longitude) 到 (latitude, longitude) 并显示这两个地方之间的地图

任何人都可以支持这部分吗

我正在使用此代码获取一个地方的地图

[http://maps.google.com/staticmap?center=30.0566,31.2262&format=png32&zoom=10&size=360x602](http://maps.google.com/staticmap?center=30.0566,31.2262&format=png32&zoom=10&size=360x602)

但我想得到两个地方之间的地图

从：30.0566,31.2262 到：25.6969,32.6422

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:32:52.303

**谷歌静态地图不支持行车路线。**但是它确实支持绘图线，包括编码的折线。一切都受制于 URL 的最大长度（2048 个字符）。

这意味着您可以使用 Directions API 服务器端，从结果中提取编码折线并使用该线构造静态地图 URL。

[路线 API 的文档](https://developers.google.com/maps/documentation/directions/)

# html - 如何将多行带到dataTable中的一行

> ID：11708924
> 
> 赞同：0
> 
> 时间：2012-07-29T11:37:39.857
> 
> 标签：html, jsf, jsf-2, datatable

我正在使用 JSF 2.0 创建页面，在其中显示所有图像。我使用的代码是：

```
<h:dataTable id="imageList3" value="#{PersonalInformationDataBean.loadReviewReportDataById()}" var="reviewMyList" width="100%" border="1">
    <h:column>
        <h:graphicImage 
        value="DisplayImage?mainID=reviewReport&amp;id=#{reviewMyList.drawingId}" 
        />
    </h:column>
</h:dataTable> 
```

目前这是每行显示一个图像，这是正确的。我想做的是，**在 1 行中显示四个图像**。如果有 9 张图像我应该以以下格式输出，而不是 9 行。

```
+++++++++++++++++++++++++++++++++++++++++
+ Image 1 + Image 2 + Image 3 + Image 4 +
+ Image 5 + Image 6 + Image 7 + Image 8 +
+ Image 9 +         +         +         +
+++++++++++++++++++++++++++++++++++++++++ 
```

如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:33:27.643

您可以将四个放在`<h:column>`一个`h:graphicImage`或四个`h:graphicImage`放在一个中`<h:column>`

好吧，您可以修改您的对象（r​​eviewMyList）以容纳最多 3 个内部对象，您将在每列中访问这些对象，例如

`reviewMyList.first.drawingId`

`reviewMyList.second.drawingId`

`reviewMyList.third.drawingId`,

当然你必须添加

`rendered="reviewMyList.first ne null"`

`rendered="reviewMyList.second ne null"`

`rendered="reviewMyList.third ne null"`给你的`<h:graphicImage`

# php - 列出子文件夹中的文件并作为 key = value 放入数组中

> ID：11708928
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:37:58.507
> 
> 标签：php, arrays, filesystems

如果这个问题对忍者来说很明显，我很抱歉，但我是 PHP 的新手，我整天都在努力解决这个问题..

我正在尝试从文件夹结构中获取所有文件的列表。

目前它给了我类似的东西

Array([0]->path/filename [1]->path/filename) Array([0]->path/filename [1]->path/filename..)

（每个文件夹一个）

```
function o99_list_all_files_in_dir($dir) //need to ocheck for server compatibility (unix,linux,win)
{ 

    $root = scandir($dir); 
    foreach($root as $value) 
    { 
        if($value === '.' || $value === '..') {continue;} 

        if(is_file("$dir/$value")) {$result[]="$dir/$value";continue;} 

    //if(is_file("$dir/$value")) {$result["$dir"]="$value";continue;} 

        foreach(k99_list_all_files_in_dir("$dir/$value") as $value) 
        { 
            $result[]=$value; 

        //$result["$dir"]=$value; 
        }
    } 

    //print_r($result);
    return $result; 
} 
```

几个问题：

1 - 我需要路径和文件名对，所以我想得到一个像这样的数组：

结果（[路径] -> [文件名] [另一个路径] -> [另一个文件名]）。

但是如果我尝试构建另一个数组（切换取消注释和注释行），该函数将只给我每个目录中的第一个文件。

2 - 后来，我使用这个函数来分隔路径和文件名，所以我尝试了这个：

```
$result = o99_list_all_files_in_dir($upload_dir);   
                foreach ($result as $image) {
                 reset($image);
                 while (list($key, $val) = each($image)) {
                    // echo "$key => $val\n";
                 }
                $filename = pathinfo($image);// I need the path here ...
                         ... 
```

...但显然它不起作用（否则我不会在这里:-)

3 - 额外问题：如何从结果中过滤文件（例如 thumbs.db）或决定如何忽略或不忽略某些扩展？

**编辑 I** 4 - !important （之前忘记了） - 在处理未知的服务器路径（Linux、Win、Unix）时我需要注意什么......这个功能是否适用于所有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:43:37.877

试试这个代码：

```
function scanFileNameRecursivly($path = '', &$name = array() )
{
  $path = $path == ''? dirname(__FILE__) : $path;
  $lists = @scandir($path);

  if(!empty($lists))
  {
      foreach($lists as $f)
      { 
          if(is_dir($path.DIRECTORY_SEPARATOR.$f) && $f != ".." && $f != ".")
          {
              scanFileNameRecursivly($path.DIRECTORY_SEPARATOR.$f, &$name); 
          }
          else
          {
              $name[] = $path.DIRECTORY_SEPARATOR.$f;
          }
      }
  }
  return $name;
}

$path = "abs path to your directory";
$file_names = scanFileNameRecursivly($path);

echo "<pre>";
var_dump($file_names);
echo "</pre>"; 
```

# mercurial - mercurial：包括预先提交更改的文件

> ID：11708929
> 
> 赞同：2
> 
> 时间：2012-07-29T11:38:01.993
> 
> 标签：mercurial, mercurial-hook

在提交到存储库时，我在 Mercurial 中定义了一个钩子：

```
[hooks]
precommit.exportDB=exportDB.bat 
```

这会从我的数据库中创建/更新一个 SQL 转储，它应该包含在提交中。但是：虽然这可行，但 Sql 被标记为新的，但不是现在提交的变更集的一部分。我怎样才能自动包含它，以便它进入一组更改的文件？

希望这是有道理的...

谢谢莱因哈德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T02:28:40.620

这听起来很疯狂，但你可以分两步完成。首先将你的`precommit`钩子改为一个`pre-commit`钩子——是的，两者都存在并且它们是不同的。没有破折号，提交已经开始并且已经获得了一些锁。使用破折号，它发生在提交开始之前，您仍然可以`hg add`使用新文件。

在像这样的 Unix 上，总的变化是：

```
[hooks]
pre-commit.exportDB=exportDB.sh && hg add resulting.sql 
```

大概在 Windows 上有类似的东西，或者你可以制作`hg add`批处理文件的最后一行。

PS 不要提交生成的文件。:)

**更新：**

我刚刚对此进行了测试，它按照我的建议工作：

```
ry4an@four:~$ hg init reinhard
ry4an@four:~$ cd reinhard/
ry4an@four:~/reinhard$ vi .hg/hgrc
ry4an@four:~/reinhard$ cat .hg/hgrc 
[hooks]
pre-commit = hg add otherfile
ry4an@four:~/reinhard$ echo text > afile
ry4an@four:~/reinhard$ echo more > otherfile
ry4an@four:~/reinhard$ hg add afile
ry4an@four:~/reinhard$ hg status
A afile
? otherfile
ry4an@four:~/reinhard$ hg commit -m 'message'
ry4an@four:~/reinhard$ hg status --all
C afile
C otherfile 
```

请注意，在提交之前，只添加了“afile”，而“otherfile”是未知的，在提交之后，两个文件都是“C”（意思是“干净”——它们已被添加并提交）。

# javascript - 添加 facebook Like 按钮

> ID：11708935
> 
> 赞同：0
> 
> 时间：2012-07-29T11:39:04.273
> 
> 标签：javascript, html, facebook

我希望有人能帮我解决这个问题：我尝试了 facebook 之类的 HTML5 按钮插件代码生成器，但无法显示按钮。这是我的代码（我只想尝试页面上的按钮），我们的网站被谷歌取代：

```
<!doctype html>
<html>
<head>
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.google.com" data-send="false" data-width="450" data-show-faces="true"></div>

</body>
</html> 
```

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:46:15.823

试试下面的代码：

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>

<fb:like href="http://www.google.com" send="false" width="75" height="20" show_faces="false" layout="button_count"></fb:like> 
```

# android - 如何为选项卡式活动的每个选项卡创建 UI？

> ID：11708937
> 
> 赞同：2
> 
> 时间：2012-07-29T11:39:08.123
> 
> 标签：android, eclipse, android-layout

我正在学习为 android 开发，但我不知道如何为 Fragment 创建 UI。我创建了一个新活动，并在创建过程中选择了导航类型“Tabs + Swipe”。现在我有一个布局 xml，我无法使用 WYSIWYG 界面修改它，如果我 - 例如 - 在类文件中使用 java 创建一个按钮小部件，它会在每个“选项卡视图”中创建它。

我基本上想为每个选项卡（片段）创建不同的界面。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T13:43:44.353

在刚刚创建的 Activity 中，您可以找到内部类`SectionsPagerAdapter`。看看这个方法：

```
@Override
public Fragment getItem(int i) {
    Fragment fragment = new DummySectionFragment();
    Bundle args = new Bundle();
    args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
    fragment.setArguments(args);
    return fragment;
} 
```

每个选项卡的此方法返回 DummySectionFragment 的实例，只有不同的包。如果您想为每个选项卡创建具有不同视图的片段，您应该检查`i`变量的值并根据该值创建正确的片段。例如：

```
@Override
public Fragment getItem(int i) {
    Fragment fragment; 
    switch(i){
    case 0:
         fragment = new MyFragment1();
         break;
    case 1:
         fragment = new MyFragment2();
         break;
    case 3:
         fragment = new MyFragment3();
         break;
    default:
         throw new IllegalArgumentException("Invalid section number");
    }

    //set args if necessary
    Bundle args = new Bundle();
    args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
    fragment.setArguments(args);

    return fragment;
} 
```

而不是`DummySectionFragment`类创建三个类：MyFragment1、MyFragment2、MyFragment2 和每个，内部方法`onCreateView`创建或膨胀视图，例如：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.my_fragment1.xml, null);
    return v; 
```

}

其中 R.layout.my_fragment1.xml 是 MyFragment1 片段的布局。

# c# - 通用方法，是否可以返回 StreamReader 实例？

> ID：11708939
> 
> 赞同：4
> 
> 时间：2012-07-29T11:39:18.340
> 
> 标签：c#, unit-testing, c#-4.0, generics

我遇到了 Jon Skeet 发布以下内容的帖子：

> 您不能使用任何参数化构造函数。如果您有“where T : new()”约束，则可以使用无参数构造函数。

我有以下方法：

```
public T ReturnReader<T>(String filePath) where T : TextReader, new()
{
    return new T(filePath);
} 
```

这违反了他上面提到的内容。我需要上述方法才能返回 StreamReader （生产代码）和 StringReader （单元测试目的）。据我所知，streamReader 不包含无参数构造函数，因此我无法创建无参数实例，然后在调用方法中将 filePath 分配给它。

有人看到解决方案吗？

谢谢你的时间！

**编辑：**原始方法，A 和 B

```
 /// <summary>
    /// Ensures number of columns stated == number of columns in file.
    /// </summary>
    /// <param name="errorMessageList">A running list of all errors encountered.</param>
    public static void ValidateNumberOfColumns(string filePath, int userSpecifiedColumnCount, List<String> errorMessageList)
    {
        int numberOfColumnsInFile = GetNumberOfColumnsInFile(filePath, errorMessageList);

        if (userSpecifiedColumnCount != numberOfColumnsInFile) errorMessageList.Add("Number of columns specified does not match number present in file.");
    }

    public static int GetNumberOfColumnsInFile(string filePath, List<String> errorMessageList)
    {
        int numberOfColumns = 0;
        string lineElements = null;

        try
        {
            using (StreamReader columnReader = new StreamReader(filePath))
            {
                lineElements = columnReader.ReadLine();
                string[] columns = lineElements.Split(',');
                numberOfColumns = columns.Length;
            }
            return numberOfColumns;
        }
        catch (Exception ex)
        {
            errorMessageList.Add(ex.Message);
            return -1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T12:10:10.500

如果您必须求助于反射来使代码可用于单元测试，那有点异味 - 只是*表明*您可能想要重新考虑设计，但肯定需要考虑一些事情。

我很想将其抽象为一个单独的接口 -`IPathReader`或类似的东西：

```
public interface IPathReader
{
    TextReader CreateReader(string path);
} 
```

然后将其注入您正在测试的类中 - 使用`StringReader`在测试中的实现和`StreamReader`在生产中使用的实现。（我*怀疑*你真的不需要它来返回不同的类型。）

请注意，这实际上只是一个`Func<string, TextReader>`- 因此如果需要，您可以使用它而不是界面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T12:09:11.997

`Activator.CreateInstance`这不是个好主意，因为它太贵了，所以你可以试试这个

```
 StringReader reader = ReturnReader(() => new StringReader(filePath));
    StreamReader streamReader = ReturnReader(() => new StreamReader(filePath));

    private T ReturnReader<T>(Func<T> reader)
        where T : TextReader
    {
        return reader();
    } 
```

**编辑**

根据代码，我认为最好的方法是分离 NumberOfColumns 并获得第一行。所以新方法 NumberOfColumns 将不依赖于流阅读器

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T11:51:27.623

您可以通过使用反射轻松完成此操作：

```
 public T ReturnReader<T>(String filePath) where T : TextReader
    {
        return (T)Activator.CreateInstance(typeof(T),filePath);
    } 
```

用法：

```
 var rdr = ReturnReader<StringReader>("c:\\test.txt");
        var rdr2 = ReturnReader<StreamReader>("c:\\test.txt"); 
```

# android - 通过 Parcel 传输 ByteArray 返回 NullPointerException

> ID：11708945
> 
> 赞同：20
> 
> 时间：2012-07-29T11:39:59.083
> 
> 标签：android, byte, parcelable

```
import android.os.Parcel;
import android.os.Parcelable;

public class MClass implements Parcelable {
    private byte[] _byte;

    public MClass() {
    }

    public MClass(Parcel in) {
        readFromParcel(in);
    }

    public byte[] get_byte() {
        return _byte;
    }

    public void set_byte(byte[] _byte) {
        this._byte = _byte;
    }

    public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel dest, int flags) {
        dest.writeByteArray(_byte);
    }

    public void readFromParcel(Parcel in) {
        in.readByteArray(_byte); //LOE - Line Of Exception
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public MClass createFromParcel(Parcel in) {
            return new MClass(in);
        }

        public MClass[] newArray(int size) {
            return new MClass[size];
        }
    };

} 
```

每当我要检索以下数组中的字节时，它都会返回`NullPointerException`. 任何人都可以说是什么问题吗？我想要做的是将下载的图像字节从一个活动传输到另一个活动。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-29T13:11:16.140

您永远不会在读取包裹时初始化 _byte 数组，因此它为空。

我要做的是，当你写你的包裹时，存储字节数组的长度，然后是实际的字节数组。当您读取包裹时，首先读取长度并将您的 _byte 数组初始化为该大小的新数组，然后读取字节数组。

* * *

代码从评论中移出

***在写...***

```
dest.writeInt(_byte.length); 
dest.writeByteArray(_byte); 
```

***并在阅读中...***

```
_byte = new byte[in.readInt()]; 
in.readByteArray(_byte); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-12-07T13:40:43.053

不存储字节数组长度的更短的解决方案：

```
dest.writeByteArray(byteArray);
byteArray = in.createByteArray(); 
```

# multithreading - 这样可以避免多线程代码可能的死锁吗？

> ID：11708948
> 
> 赞同：0
> 
> 时间：2012-07-29T11:40:33.117
> 
> 标签：multithreading, deadlock

我们知道，如果线程获得互斥锁但在它有机会释放它之前，线程被主线程挂起或被调度程序抢占，多线程代码可能会出现死锁？

我是使用 pthread 库的初学者，所以如果我的以下查询/建议的解决方案可能不可行或完全错误，请多多包涵。

```
void main()
{
    thread_create(T1,NULL,thr_function,NULL)

    suspend_thread(T1);

    acquire_lock(Lock1);<--- //Now here is a possible deadlock if thread_function acquried Lock1 before main and main suspended T1 before its release
    //Do something further;
}

void *thr_function(void *val)
{
    ///do something;
    acquire_lock(Lock1);
    //do some more things;
    //do some more things;
    release_lock(Lock1);

} 
```

在我上面的下面的伪代码段中，线程运行时/编译器不能一起工作以确保获得互斥锁的线程是否被挂起/抢占然后它执行一些“清理代码”在它出来之前释放它持有的所有锁。编译器/链接器可以识别线程函数中获取、释放锁的位置，然后当线程在这两个位置之间挂起时（即在获取之后但在释放之前），线程函数中的执行应该通过某种' `goto label;`'跳转由运行时插入，`label:`线程将释放锁，然后线程被阻塞或发生上下文切换。[我知道如果一个线程获得了超过 1 个锁，那么跳过这些点来释放这些锁可能会变得混乱......]

但是基本的想法/问题是线程函数能否在它被阻塞或退出执行状态等待或其他状态之前为互斥锁、信号量执行必要的释放锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:47:53.887

不会。线程持有锁的原因是它可以使数据暂时不一致或看到该数据本身的一致视图。如果某个方案在线程再次使数据一致之前自动释放该锁，其他线程将获取锁，看到不一致的数据，然后失败。或者当该线程恢复时，它要么没有锁，要么拥有锁并看到不一致的数据本身。这就是为什么您只能在该线程的合作下可靠地挂起该线程。

考虑使用此逻辑将对象添加到受互斥锁保护的链表中：

1.  获取保护链表的锁。
2.  修改链接的头指针。
3.  修改对象的 next 指针。
4.  释放锁。

现在想象一下，如果在第 2 步和第 3 步之间暂停线程。如果锁被释放，其他线程将看到链接的头指针指向尚未链接到列表的对象。并且当线程恢复时，它可能将对象设置为错误的指针，因为列表已更改。

普遍的共识是挂起线程是如此邪恶，以至于即使您可能想要挂起线程的感觉也表明应用程序设计不正确。设计合理的应用程序几乎没有理由要挂起线程。（如果你不希望那个线程继续做它正在做的工作，你为什么要编码它来继续做那个工作？）

顺便说一句，调度程序抢占不是问题。最终，线程将再次被调度并释放锁。只要有其他线程可以向前推进，就没有坏处。如果没有其他线程可以向前推进，系统唯一能做的就是调度被抢占的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:49:46.630

避免这种死锁的一种方法是拥有一个全局的、互斥的变量，`should_stop_thread`该变量最终被`true`主线程设置为。

子线程定期检查变量，如果是，则以受控方式终止`true`。从这个意义上说，“受控”意味着所有数据（指针）都有效（再次）并且互斥锁被释放。

# bash - Shell sha1($salt.$password) 错误

> ID：11708951
> 
> 赞同：2
> 
> 时间：2012-07-29T11:41:06.783
> 
> 标签：bash, string-concatenation, command-substitution

我尝试直接在我的控制台上做这样的事情作为一些测试运行：

它似乎不起作用..知道我在做什么错误

```
salt="3245678906789045689"
password="12321312231"
blub=`sha1($salt.$password)`
-bash: command substitution: line 1: syntax error near unexpected token `$salt.$password'
-bash: command substitution: line 1: `sha1($salt.$password)' 
```

它抛出了一个错误，这是我最后打算做的：

```
echo $blub 
```

有人可以帮忙看看我在做什么错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T12:46:15.723

可能您想使用[OpenSSL 包](http://www.openssl.org/docs/apps/dgst.html)中的 SHA1 。这应该已经安装在您的系统上。

```
echo -n "$salt$password" | openssl dgst -sha1
(stdin)= a1b2ce5a82e18f454db6b2d6ee82533914f90337 
```

仅捕获 sha1-digest：

```
blub=`echo -n "$salt$password" | openssl dgst -sha1 |awk '{print $NF}'`
echo $blub
a1b2ce5a82e18f454db6b2d6ee82533914f90337 
```

**我假设您从PHP**复制了您的代码。函数用括号调用，`.`-Operator 连接字符串。**在这种解释中，我的代码与您在BASH**中的代码完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T17:16:31.313

我没有遇到很多关于如何轻松地在 bash 中进行 SHA 校验和并以正确的方式将其放入变量中的解释，同时我们不应该再使用 sha1，但是更难以暴力破解的东西，比如沙512：

```
dash=`echo -n $password$salt|sha512sum` ##gives hash with trailing dash
read hash rest <<< "$dash" ##removes trailing dash and gives $hash
echo $hash
6555b9d2331203634664f48f604b59372b32badbc115ec6b2586890ef4d3a6b6816d84cc424cdfc538f6a7ccf664c90caeeb942dbf7953051bb1d7414a191c51 
```

# ruby-on-rails - 对贝宝 ipn 感到困惑和迷失方向

> ID：11708955
> 
> 赞同：0
> 
> 时间：2012-07-29T11:42:07.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-adaptive-payments

我正在使用这个 gem 在 paypal [https://github.com/tc/paypal_adaptive中付款](https://github.com/tc/paypal_adaptive)

我对这颗宝石感到非常困惑和迷失方向。它的文档记录很差，我很难理解如何从贝宝获取关于 ipn 响应的数据。

我希望这个问题能帮助更多有同样问题的人。

我的步骤是：

**1º**我`orders_controller.rb`使用方法 preaproval_payment 从我的贝宝发送请求。

```
def preapproval_payment
preapproval_request = PaypalAdaptive::Request.new
data = {
  "returnUrl" => response_paypal_user_orders_url(current_user),
  "cancelUrl"=>  cancel_payment_gift_url(@gift),
  "requestEnvelope" => {"errorLanguage" => "en_US"},
  "senderEmail" => "gift_1342711309_per@gmail.com",
  "startingDate" => Time.now,
  "endingDate" => Time.now + (60*60*24) * 30,
  "currencyCode"=>"USD",
  "maxAmountPerPayment" => "@gift.price",
  "ipnNotificationUrl" => ipn_notification_url,
  "ip" => request.remote_ip
  }
    preapproval_response = preapproval_request.preapproval(data)
    puts data
  if preapproval_response.success?
    redirect_to preapproval_response.preapproval_paypal_payment_url
  else
    redirect_to gift_url(@gift), alert: t(".something_was_wrong")
  end
end 
```

**2º**这些是我从命令的日志控制台中请求的数据`puts data`：

```
{"returnUrl"=>"http://localhost:3000/en/u/maserranocaceres/orders/response_paypal", "cancelUrl"=>"http://localhost:3000/en/gifts/gift-1/cancel_payment", "requestEnvelope"=>{"errorLanguage"=>"en_US"}, "senderEmail"=>"gift_1342711309_per@gmail.com", "startingDate"=>2012-07-29 13:05:49 +0200, "endingDate"=>2012-08-28 13:05:49 +0200, "currencyCode"=>"USD", "maxAmountPerPayment"=>9, "ipnNotificationUrl"=>"http://localhost:3000/ipn_notification?locale=en", "ip"=>"127.0.0.1"} 
```

**3º**我重定向到贝宝页面，我在贝宝上成功付款：D。

**4º**付款成功完成后，我将被引导至：

`http://localhost:3000/en/u/maserranocaceres/orders/response_paypal`

我有`response_paypal`行动`orders_controller.rb`。这是 GET 操作，我的操作代码是：

```
def response_paypal
  respond_to do |format|
       format.html { redirect_to user_orders_url(current_user), :alert => "works fine return url"}
    end
 end 
```

到目前为止，一切正常。

**现在我需要的是获取我从贝宝收到的数据，并在付款成功处理后为我的数据库保存一个新订单。**

**5º**为此，我制作了一个文件，并将来自[https://github.com/tc/paypal_adaptive/blob/master/templates/paypal_ipn.rb](https://github.com/tc/paypal_adaptive/blob/master/templates/paypal_ipn.rb)`lib/paypal_ipn.rb`的内容添加到该文件中

```
# Allow the metal piece to run in isolation
require(File.dirname(__FILE__) + "/../../config/environment") unless defined?(Rails)

class PaypalIpn
  def self.call(env)
    if env["PATH_INFO"] =~ /^\/paypal_ipn/
      request = Rack::Request.new(env)
      params = request.params
      ipn = PaypalAdaptive::IpnNotification.new
      ipn.send_back(env['rack.request.form_vars'])
      if ipn.verified?
        #mark transaction as completed in your DB
        output = "Verified."
      else
        output = "Not Verified."
      end

      [200, {"Content-Type" => "text/html"}, [output]]
    else
      [404, {"Content-Type" => "text/html"}, ["Not Found"]]
    end
  end

end 
```

在我的**routes.rb**我添加：

```
match "/ipn_notification" => PaypalIpn 
```

**我的两个问题是：**

**a)**我没有看到付款后这个文件被解雇，我在控制台数据中看不到我从贝宝获得的数据。

**b）**我想在我的请求中发送到贝宝，对象的 ID`@gift`以便以后能够恢复`paypal_ipn.rb`并保存我的数据库。

**我做错了什么以及如何解决这些问题？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:00:10.643

我没有用过那个 gem，但我以前用过 PayPal IPN。以下是您应该检查的一些事项：

1.  您是否已将 PayPal 帐户设置为使用 IPN？您必须在帐户上启用此设置才能使其正常工作。

2.  您是否验证了当您在付款过程中传递 ipn_notification_url 时，它与您的“/ipn_notification”路由匹配？

3.  为此，PayPal 必须能够直接与运行此应用程序的服务器通信。这意味着通常，除非您在本地计算机上使用动态 DNS 或其他东西进行自定义设置，否则您需要实际将此代码部署到服务器，以便 PayPal 能够与您的应用程序通信。换句话说，如果它在 上运行`http://localhost:3000`，这将不起作用。

要回答您的第二个问题，如何恢复 @gift 以记录它在您的数据库中支付的事实，我不完全确定如何使用此 gem，但我会告诉您我如何使用 ActiveMerchant - 它可能非常相似。

1.  在您对 PayPal 的付款请求中，您可以传入发票编号。我相信该领域只是称为“发票”。在这里，您将传递礼物的 ID。

2.  当 PayPal 通过 IPN 通知您的应用程序已付款时，它会将发票编号传回给您。使用此发票编号检索@gift，然后您可以使用它做您需要的事情。

以下是我使用 ActiveMerchant gem 的工作 PayPal 代码的相关部分：[https ://gist.github.com/3198178](https://gist.github.com/3198178)

祝你好运！

# javascript - 找不到定位器硒 - Javascript

> ID：11708956
> 
> 赞同：0
> 
> 时间：2012-07-29T11:42:09.170
> 
> 标签：javascript, selenium

我正在尝试使用 Javascript 片段来确保两个具有某些文本的 div 共同存在于另一个中 [基本上验证某个帖子上是否存在评论]

JS 适用于 firebug，但在 selenium IDE 上失败。

```
javascript{
  return ($.grep(  $("#Posts li") .map(function(index,element){
    if($(element).has(".puls_content:contains('post text')").length > 0){
      if($(element).has("*:contains('this is a comment')").length > 0) {
        return true
      }
    }
    return false
  }) , function(x){ return x}).length > 0) } 
```

我从 selenium-api.js 收到 Unexpected Exception 错误，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:57:35.783

Selenium 不会在与 firebug 相同的上下文中运行 javascript。您实际上是从正在测试的窗口外的 selenium 窗口运行的。但永远不要害怕！他们已经想到了这一点。您将需要添加类似

`var jQuery=selenium.browserbot.getUserWindow().jQuery;`

进入您的脚本并将您的所有 $ 更改为 jQuery 以使其按您希望的方式工作。看看这个[问题和答案](https://stackoverflow.com/questions/4185640/get-element-with-jquery-and-selenium-ide-1-0-8)。

其次，我建议使用 CSS 或 Xpath 选择器执行此操作，并分别验证帖子和评论部分。它会让你花更少的时间来弄清楚你需要什么。

# algorithm - 在特定时刻在无限的数字流中查找特定数字的计数

> ID：11708957
> 
> 赞同：5
> 
> 时间：2012-07-29T11:42:44.477
> 
> 标签：algorithm, memory, data-structures, stream, distributed-computing

我在最近的一次采访中遇到了这个问题：

您有一个范围内的传入数字流，`0 to 60000`并且您有一个函数将从该范围内获取一个数字并返回该数字的出现次数直到那一刻。给出一个合适的数据结构/算法来实现这个系统。

我的解决方案是：

制作一个指向位向量的大小为 60001 的数组。这些位向量将包含传入数字的计数，并且传入数字也将用于索引到相应数字的数组中。当计数变得太大而无法容纳时，位向量将动态增加。

因此，如果这些数字以一定的速度出现，`100numbers/sec`那么 100 万年后的总数将是 = `(100*3600*24)*365*1000000 = 3.2*10^15`。在最坏的情况下，流中的所有数字都相同，`ceil((log(3.2*10^15) / log 2) )= 52bits`并且如果数字均匀分布，我们将有`(3.2*10^15) / 60001 = 5.33*10^10`每个数字的出现次数，这将需要`36 bits`每个数字的总数。因此，假设 4 字节指针我们需要`(60001 * 4)/1024 = 234 KB`用于数组的内存，并且对于具有相同数字的情况，我们需要位向量大小 =`52/8 = 7.5 bytes`仍然在 234KB 左右。而对于另一种情况，我们需要`(60001 * 36 / 8)/1024 = 263.7 KB`总计约 500KB 的位向量。所以，用普通的PC和内存来做这件事是非常可行的。

但面试官说，因为它是无限流，它最终会溢出，并给我提示，如果有很多 PC，我们怎么能做到这一点，我们可以在它们之间传递消息或考虑文件系统等。但我一直在想这个解决方案是否那时不工作，其他人也会。不用说，我没有得到这份工作。

如何用更少的内存来解决这个问题？你能想到另一种方法吗（可能是使用网络PC）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T13:36:53.047

该问题的正式模型可能如下。

我们想知道它是否存在一个常数空间有界图灵机，这样，在任何给定时间，它都能识别所有对的语言 L（数量，到目前为止的出现次数）。这意味着所有正确的配对都将被接受，所有不正确的配对都将被拒绝。

作为 Hopcroft-Ullman 中定理 3.13 的推论，我们知道**由常数空间有界机器识别的每种语言都是正则的**。

可以通过使用正则语言的泵引理来证明上述语言不是正则语言。所以你不能用一个恒定空间有界的机器来识别它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:31:52.743

您可以轻松地使用基于索引的搜索，通过使用像 int arr[60000][1] 这样的数组，每当您获得一个数字（例如 5000）时，直接访问 index(num-1) = (5000-1) as, arr[ num-1][1]，并增加数字，现在每当您想知道特定 num 发生了多少次时，您只需通过 arr[num-1][1] 访问它，您就会得到计数对于那个数字，它是最简单的线性时间实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-29T16:17:58.480

这不是[外部排序](http://en.wikipedia.org/wiki/External_merge)吗？将无限流存储在文件中。在文件中执行 seek() （`RandomAccessFile.seek()`在 Java 中）并获取适当的时间戳。这类似于二分搜索，因为数据是按时间戳排序的。一旦你得到适当的时间戳，问题就变成了从无限的数字集中计算一个特定的数字。在这里，由于数字范围有限，因此可以进行计数排序，而不是在内存中进行快速排序。

# java - 为什么数组的元素为空？

> ID：11708962
> 
> 赞同：0
> 
> 时间：2012-07-29T11:43:29.027
> 
> 标签：java, android

我有一个具有以下变量的活动

```
static CharSequence[] categories; 
```

我正在使用 JSON 接收数据

```
try
{
    Thread cThread = new Thread(new getStringContent("http://192.168.0.101/curltest/getcategories.php"));
    cThread.start();            
}
catch(Exception ex)
{
    Log.i("YGo", ex.toString());
}

public class getStringContent implements Runnable {
        String suri;
        public getStringContent(String uri)
        {
            suri = uri; 
        }
        @Override
        public void run() {         
            try {
                JSONArray jsonArray = new JSONArray(getPageContent(suri));
                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONArray jsonSArray = jsonArray.getJSONArray(i);
                    categories = new CharSequence[jsonArray.length()];
                    categories[i] = jsonSArray.getString(0);
                    Log.i("YGo", categories[i].toString());
                }               
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                Log.e("YGo", e.toString());
            }
            dialog.dismiss();
        }       
    } 
```

在 GUI 线程中，如果我单击按钮，我想显示接收到的数据：

```
for(int i=0; i<categories.length; i++)
{
   Log.i("Ygo", String.valueOf(categories[i]));
   Log.i("Ygo", String.valueOf(selectedData[i]));
}
AlertDialog.Builder builder = new AlertDialog.Builder(PreferencesClass.this);
            builder.setTitle("Pick categories");

            builder.setMultiChoiceItems(categories, selectedData, onClickCatChooser);           
            builder.setPositiveButton("Ok", clickedOnClickCatOk);

            AlertDialog alert = builder.create();
            alert.show(); 
```

但在`categories`我有的变量中`null,null,Data3`，而不是`Data1`我`Data2`只有`null`。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T11:46:18.310

线

```
categories = new CharSequence[jsonArray.length()]; 
```

应该在`for`循环之外。您在循环中的每次迭代中重置数据，因此最后您只剩下最后一次操作的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:48:41.257

可能是因为 data1&2 的路径没有正确定义 try categories = new CharSequence[jsonArray.length()]; 在 for 循环之外。

# spring - Spring MVC 中的 ApplicationContext 和 WebApplicationContext 有什么区别？

> ID：11708967
> 
> 赞同：203
> 
> 时间：2012-07-29T11:44:12.243
> 
> 标签：spring, spring-mvc, applicationcontext

应用程序上下文和 Web 应用程序上下文有什么区别？

我知道它`WebApplicationContext`用于面向 Spring MVC 架构的应用程序吗？

我想知道`ApplicationContext`MVC 应用程序中的用途是什么？中定义了什么样的bean `ApplicationContext`？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-07-29T12:35:00.827

Web 应用程序上下文扩展了应用程序上下文，旨在与标准[javax.servlet.ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)一起使用，因此它能够与容器通信。

```
public interface WebApplicationContext extends ApplicationContext {
    ServletContext getServletContext();
} 
```

在 WebApplicationContext 中实例化的 Bean 如果实现了 ServletContextAware 接口，也将能够使用 ServletContext

```
package org.springframework.web.context;
public interface ServletContextAware extends Aware { 
     void setServletContext(ServletContext servletContext);
} 
```

ServletContext 实例可以做很多事情，例如通过调用 getResourceAsStream() 方法访问 WEB-INF 资源（xml 配置等）。通常，servlet Spring 应用程序中 web.xml 中定义的所有应用程序上下文都是 Web 应用程序上下文，这既涉及根 webapp 上下文，也涉及 servlet 的应用程序上下文。

此外，根据 Web 应用程序上下文功能可能会使您的应用程序更难测试，您可能需要使用[MockServletContext](http://static.springsource.org/spring/docs/1.1.4/api/org/springframework/mock/web/MockServletContext.html)类进行测试。

**servlet 和根上下文之间的区别** Spring 允许您构建多级应用程序上下文层次结构，因此如果当前应用程序上下文中不存在所需的 bean，则将从父上下文中获取所需的 bean。默认情况下，在 Web 应用程序中，有两个层次结构级别，根上下文和 servlet 上下文：![Servlet 和根上下文](../Images/8ea8a420a391a51d0ea8ff318c078176.png).

这允许您将一些服务作为整个应用程序的单例运行（Spring Security bean 和基本数据库访问服务通常驻留在此处），而另一个作为相应 servlet 中的独立服务运行，以避免 bean 之间的名称冲突。例如，一个 servlet 上下文将为网页提供服务，而另一个将实现无状态 Web 服务。

当您使用 spring servlet 类时，这种两级分离是开箱即用的：要配置根应用程序上下文，您应该在 web.xml 中使用*context-param*标记

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/root-context.xml
            /WEB-INF/applicationContext-security.xml
    </param-value>
</context-param> 
```

（根应用程序上下文由在 web.xml 中声明的[ContextLoaderListener创建](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/context/ContextLoaderListener.html)

```
<listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
```

) 和servlet 应用程序上下文的*servlet标记*

```
<servlet>
   <servlet-name>myservlet</servlet-name>
   <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
   <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>app-servlet.xml</param-value>
   </init-param>
</servlet> 
```

请注意，如果 init-param 将被省略，那么 spring 将在此示例中使用 myservlet-servlet.xml。

另请参阅：[Spring Framework 中 applicationContext.xml 和 spring-servlet.xml 之间的区别](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-09-13T13:46:03.917

接受的答案是通过，但对此有官方解释：

> WebApplicationContext 是普通 ApplicationContext 的扩展，它具有 Web 应用程序所需的一些额外功能。它与普通的 ApplicationContext 不同之处在于它能够解析主题（请参阅使用主题），并且它知道它与哪个 Servlet 相关联（通过链接到 ServletContext）。WebApplicationContext 绑定在 ServletContext 中，并且通过在 RequestContextUtils 类上使用静态方法，如果需要访问它，您可以随时查找 WebApplicationContext。
> 
> 引用自[Spring Web 框架参考](https://docs.spring.io/spring/docs/5.0.0.RC3/spring-framework-reference/web.html#spring-web)

顺便说一句，servlet 和根上下文都是**webApplicationContext**：

![Spring Web MVC 中的典型上下文层次结构](../Images/ccb357919c09962e37bceb962f6560ef.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-03-16T16:08:42.533

回到 Servlet 时代，web.xml 只能有一个`<context-param>`，因此当服务器加载应用程序时只会创建一个上下文对象，并且该上下文中的数据在所有资源之间共享（例如：Servlet 和 JSP）。这与在上下文中具有数据库驱动程序名称相同，不会更改。类似地，当我们在 Spring 中声明 contextConfigLocation 参数时，`<contex-param>`会创建一个 Application Context 对象。

```
 <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>com.myApp.ApplicationContext</param-value>
 </context-param> 
```

一个应用程序中可以有多个 Servlet。例如，您可能希望以一种方式处理 /secure/* 请求，而以另一种方式处理 /non-seucre/* 请求。对于这些 Servlet 中的每一个，您都可以拥有一个上下文对象，即 WebApplicationContext。

```
<servlet>
    <servlet-name>SecureSpringDispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextClass</param-name>
        <param-value>com.myapp.secure.SecureContext</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>SecureSpringDispatcher</servlet-name>
    <url-pattern>/secure/*</url-pattern>
</servlet-mapping>
<servlet>
    <servlet-name>NonSecureSpringDispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextClass</param-name>
        <param-value>com.myapp.non-secure.NonSecureContext</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>NonSecureSpringDispatcher</servlet-name>
    <url-pattern>/non-secure/*</url-patten>
</servlet-mapping> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-02-06T04:40:14.080

ApplicationContext（Root Application Context）：每个 Spring MVC Web 应用程序都有一个 applicationContext.xml 文件，该文件被配置为上下文配置的根。Spring 加载此文件并为整个应用程序创建一个 applicationContext。该文件由配置为 web.xml 文件中的上下文参数的 ContextLoaderListener 加载。每个 Web 应用程序只有一个 applicationContext。

WebApplicationContext ：WebApplicationContext 是一个Web 感知应用程序上下文，即它具有servlet 上下文信息。一个 Web 应用程序可以有多个 WebApplicationContext，每个 Dispatcher servlet（它是 Spring MVC 架构的前端控制器）都与一个 WebApplicationContext 相关联。webApplicationContext 配置文件 *-servlet.xml 特定于 DispatcherServlet。由于一个 Web 应用程序可以有多个配置为服务多个请求的调度程序 servlet，因此每个 Web 应用程序可以有多个 webApplicationContext 文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-12T11:20:46.470

**由接口指定的**Web 应用**[`WebApplicationContext`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/context/WebApplicationContext.html)程序上下文是 Web 应用程序的 Spring 应用程序上下文。它具有常规 Spring 应用程序上下文的所有属性，假设`WebApplicationContext`接口扩展了`ApplicationContext`接口，并添加了一个用于检索`ServletContext`Web 应用程序的标准 Servlet API 的方法。**

 **除了标准 Spring bean 作用域`singleton`和`prototype`之外，Web 应用程序上下文中还有另外三个可用作用域：

*   `request`- 将单个 bean 定义限定为单个 HTTP 请求的生命周期；也就是说，每个 HTTP 请求都有自己的 bean 实例，该实例是在单个 bean 定义的后面创建的
*   `session`- 将单个 bean 定义范围限定为 HTTP 会话的生命周期
*   `application`- 将单个 bean 定义范围限定为 a 的生命周期`ServletContext`**

# c# - 如何根据 c# 中基于角色的策略隐藏某些文件夹

> ID：11708970
> 
> 赞同：0
> 
> 时间：2012-07-29T11:44:23.087
> 
> 标签：c#, asp.net, c#-4.0

有一个名为 Stackoverflow 的目录，还有一些子目录，例如 stack、oveflow、webpages。

我想在使用管理员帐户登录时查看所有文件夹。我不想看到所有文件夹，我只想在使用 webdeveloper 帐户登录时看到网页目录。

我从数据库检查身份验证。有一个表包括 {AccountID, AuthenticationID, DirectoryName}。

```
AccountID {1: admin, 2: webdeveloper}
AuthenticationID { 1:show, 2:hide}

DirectoryName

--------------------------------------------------------
- AccountID      AuthenticationID       DirectoryName  -
--------------------------------------------------------
-  1           -         1           -   Stackoverflow -
--------------------------------------------------------
-  2           -         2          -    stack         -
--------------------------------------------------------
-  2           -         2          -    oveflow       -
--------------------------------------------------------
-  2           -         1          -    webpages      -
-------------------------------------------------------- 
```

另一方面，对于网页目录，还有两个子目录，例如 pages、css。和 webdeveloper 帐户应该只看到 pages 目录，而不是 css。

任何想法？我控制了目录并且它有效，但是我如何控制子目录，例如 css ..

谢谢

# iphone - 代表呼吁将焦点留在文本框上

> ID：11708975
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:44:52.490
> 
> 标签：iphone, ios, uitextfield

textFieldShouldEndEditing 仅在从第一个文本字段离开焦点并聚焦第二个文本字段时调用。这里我想在我单击文本框外部而不是关注其他文本框时调用委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:04:22.313

1.  为 UITextField 提供一个实例： UITextField *currentTextField;
2.  在 textfieldDidBeginEditting 中说 currentTextField = textField;
3.  在整个屏幕上放置一个没有图像和标题的自定义按钮，并为其提供以下操作：

现在，当您点击屏幕上的任何位置（不包括其他控件）时，将调用您的代理。

```
-(IBAction)hideCurrentKeyboard{
        [currentTextField resignFirstResponder];
    } 
```

# javascript - 如何使用窗口滚动（jquery）调整div宽度 - 但只有css中div宽度的1/3

> ID：11708976
> 
> 赞同：3
> 
> 时间：2012-07-29T11:44:52.140
> 
> 标签：javascript, jquery

[http://jsfiddle.net/95EtZ/1/](http://jsfiddle.net/95EtZ/1/)

问题在行动中解决了一半。

现在它是用 javascript 中硬编码的容器宽度设置的。

我需要 js 来获取容器 div 的宽度 - 使用窗口滚动调整它的大小。但仅将其调整为#container div 宽度的 1/3。

它目前的设置方式是，您必须手动将脚本设置为css中div的宽度。我希望能够更改css中div的宽度并让js抓取它，并且只允许用户在到达窗口的最底部时调整其宽度的1/3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:05:46.660

我在代码中发布了答案：

[http://jsfiddle.net/95EtZ/11/](http://jsfiddle.net/95EtZ/11/)

宽度取自节点，调整大小从底部的 100% 变为 33%。

# objective-c - Objective-C 获取滑块值并将其显示在文本框上

> ID：11708978
> 
> 赞同：0
> 
> 时间：2012-07-29T11:45:04.373
> 
> 标签：objective-c

我有一个非常简单的应用程序。它获取滑块值并将其显示在文本框中。接口和实现如下：

```
#import <Foundation/Foundation.h>

@interface HelloWorld : NSObject
@property (assign) IBOutlet NSTextField *Tf;
@property (assign) IBOutlet NSSliderCell *Sc;

@end

#import "HelloWorld.h"

@implementation HelloWorld
@synthesize Tf;
@synthesize Sc;
- (IBAction)Pressed:(id)sender {
    [Tf setStringValue:@"Hey"];
}
- (IBAction)Scroll:(id)sender {
    [Tf setStringValue: [Sc indexOfTickMarkAtPoint]];
}

@end 
```

用户界面：

![在此处输入图像描述](../Images/6999660f052eb0b27325a64dc8cd36ff.png)

问题：当我移动滑块时应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:54:13.500

`indexOfTickMarkAtPoint`返回 NSInteger 但`setStringValue:`想要（有点明显）一个字符串。查看 NSString 方法的文档以`stringWithFormat:`了解如何进行转换。

就像是：

```
[Tf setStringValue:[NSString stringWithFormat:@"%d", [Sc indexOfTickMarkAtPoint]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:54:35.730

发生的事情是它是一个 NSInteger 而不是指向对象的指针

```
[Tf setIntegerValue:[Sc indexOfTickMarkAtPoint]]; 
```

# .net - 我正在寻找基于 .NET 而不是 java 的开源业务流程管理 (BPM)

> ID：11708984
> 
> 赞同：0
> 
> 时间：2012-07-29T11:45:39.837
> 
> 标签：.net, open-source, business-process-management

我正在寻找一个基于 .NET 的业务流程管理 (BPM) 系统，但我找不到这样的工具，因为我发现的所有开源 BPM 主要基于 Java，很少基于 php，而我没有找到任何基于.NET 的工具。

**那么任何人都可以提出这样一个基于 .NET 的 BPM 吗？**

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:24:45.247

我认为至少有一个 BPM 工具适用于 .net 平台，但我无法提醒产品名称。

顺便说一句，大多数 BPM 软件，即使它们是用 php 或 Java 编写的，都提供了一个基于 HTTP（主要是 REST）的公共 API，因此它们可以与 .net 软件交互。几周前，我帮助某人从 .net 平台驱动 bonitasoft 引擎和流程，它运行良好。

因此，为您执行案例的好方法可能是选择满足您需求的 BPM 软件，然后使用 HTTP 接口对其进行接口。这样的界面非常容易从所有语言中查询。

希望能帮助到你

# ruby-on-rails - 避免使用嵌套属性的 has_and_belongs_to_many 的多个复选框形式 - Rails

> ID：11708995
> 
> 赞同：1
> 
> 时间：2012-07-29T11:47:00.330
> 
> 标签：ruby-on-rails, checkbox, partial, nested-attributes, has-and-belongs-to-many

我是 Rails 的新手，并且被困在复杂表单的最佳实践中。

我有 3 层深嵌套的属性形式。用户 > 收件人 > Gift_profile。

我想为 _gift_profile_fields 创建一个单独的部分，这样我就可以在站点周围以多种形式使用这些字段，而不会重复自己。它们位于层次结构的不同级别。

在我添加 check_box_tag 之前它工作正常，我在其中手动指定了与另一个名为 Sport 的模型的 HABTM 关系的名称，该模型具有_and_belongs_to_many 礼品配置文件。

```
<%= f.label :gender, "Gender" %>
<%= f.select :gender, options_for_select(GiftProfile::GENDERS), :include_blank => true %>

<% for sport in Sport.find(:all) %>
<div>
 <%= check_box_tag "recipient[gift_profile_attributes][sport_ids][]", sport.id, @gift_profile.sports.include?(sport) %>
 <%= sport.sport %>
</div> 
```

该表单完美运行，但显然仅适用于收件人表单。它无法在我认为我需要的其他表单位置上工作：

```
"user[recipient_attributes][gift_profile_attributes][sport_ids][]" 
```

有没有帮助或方法来动态更新它，以便我可以继续在我的所有表单上使用部分？check_box_tag 是执行此操作的最佳方法，还是有其他 Rails 助手？

一位朋友建议我使用助手来根据控制器生成名称。

# php - 是否在幕后使用了 javascript

> ID：11708997
> 
> 赞同：2
> 
> 时间：2012-07-29T11:47:14.520
> 
> 标签：php

这个 type="submit" 的例子在幕后有 javascript 吗？

```
<html>
<head>
</head>

<body>
    <form action="process.php" method="post">
        Username: <input type="text" name="username" value=""/><br />
        Password: <input type="text" name="username" value=""/><br />
        <input type="submit" value="Submit"/>
    </form>
</body> 
```

因为将数据输入提交到服务器的另一种方式是这样的。

```
<html>
<head>
    <script>
        function submit(form){
            form.submit();
        }
    </script>
</head>

<body>
    <form action="process.php" method="post">
        Username: <input type="text" name="username" value=""/><br />
        Password: <input type="text" name="username" value=""/><br />
        <input type="button" value="Submit" onclick="submit(this.form);" />
    </form>
</body> 
```

如果是这样，那么我们不需要 javascript 将数据发送到服务器？我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T11:50:06.200

如果使用`<input type='submit'>`，则无需添加 JavaScript。在这种情况下，即使 JavaScript 被禁用，浏览器也会提交表单。

如果你想使用 JavaScript 提交表单，那么你可以使用上面你写的方法。在这种情况下，您可以使用任何其他控件，然后单击即可提交。

所以，很明显，`<input type='submit'>`不使用任何 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T12:26:46.677

您给定的示例不使用 javascript 向服务器提交数据。默认情况下，提交按钮将所有信息从您的表单发送到服务器。但是，您可能需要 javascript 来处理诸如错误检查和发布之类的事情，而无需重新加载单个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:54:14.267

上述代码片段中提到的示例不使用 javascript 进行表单提交。单击时输入按钮具有`type="submit"`提交表单的默认行为。

因此，无论浏览器中是否启用了 Javascript，都将使用提交按钮提交表单。我们也可以通过以下代码片段使用 javascript 提交表单

```
document.formName.submit(); 
```

# arrays - 如何创建一个数组来保存 Tk Tcl 中几个自动生成的复选框的值

> ID：11708998
> 
> 赞同：1
> 
> 时间：2012-07-29T11:47:14.123
> 
> 标签：arrays, tcl, tk

我有一个未知长度的对象列表，我想创建 2 个复选框列表，在每个列表中为列表的每一行创建一个复选框。我还需要能够访问复选框并检查它们的值。

由于我没有找到从路径获取复选框值的方法，我想创建一个全局数组来保存复选框的变量，并尝试了以下方法：

```
 global cb
    set i 0
    foreach port $ports {
    set to_cb    [checkbutton $to.cb_to_$i     -variable [list $cb(to$i)]   -text $port -command [list __sp_from_to_changed $from $to]]
    set from_cb  [checkbutton $from.cb_from_$i -variable [list $cb(from$i)] -text $port -command [list __sp_from_to_changed $from $to]]

    grid $to_cb   -row [expr $i + 2] -sticky nsew
    grid $from_cb -row [expr $i + 2] -sticky nsew
    incr i 
```

当我获取错误`can't read "cb(to0)": no such variable`时，如何在数组中为复选框分配一个变量，或者更好的是，有没有办法直接从复选框获取当前值而不使用中间变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:16:20.637

Checkbuttons 总是需要绑定到一个变量（有一个默认值，但你不想使用它）。您需要做的是为每个检查按钮生成一个唯一的变量*名称；*数组元素在这里是一个*很好*的选择。

那么你的代码有什么问题？只是你试图通过在变量`$`前面放一个来取消引用变量；与其他一些语言不同，Tcl*总是*使用`$`来表示“读取这个变量”（除了在正则表达式中）。您也不需要将变量名包装在`list`; 只有将它放入生成的脚本中才会有用。相反，您需要这样的行：

```
set to_cb    [checkbutton $to.cb_to_$i     -variable cb(to$i)   -text $port \
        -command [list __sp_from_to_changed to $i]]
set from_cb  [checkbutton $from.cb_from_$i -variable cb(from$i) -text $port \
        -command [list __sp_from_to_changed from $i]] 
```

这里的变化是：

*   `-variable`从期权的价值中去除了额外产生的复杂性；一个裸数组元素名称就足够了。
*   将参数更新为，`__sp_from_to_changed`以便他们说出实际修改的内容（第一个参数是 now `to`or `from`，第二个是索引；由此，您应该能够非常简单地构造所需的所有元素名称）。
*   为那些长行添加了反斜杠，以便我可以将它们分解以提高可读性。:-)

# java - 我的比较器有什么问题？

> ID：11708999
> 
> 赞同：1
> 
> 时间：2012-07-29T11:47:25.793
> 
> 标签：java, int, comparator

我正在尝试根据年龄对员工进行排序（简化示例），但我无法让我的单元测试正常工作。

```
public class Employee{

    private int age;    

    public void setAge(int age){
        this.age=age;    
    }

    public int getAge(){
        return this.age;    
    }
} 
```

我的比较器如下所示：

```
class AgeComparator implements Comparator<Employee>{

    public int compare(Employee emp1, Employee emp2){

        int emp1Age = emp1.getAge();        
        int emp2Age = emp2.getAge();

        if(emp1Age > emp2Age)
            return 1;
        else if(emp1Age < emp2Age)
            return -1;
        else
            return 0;    
    }
} 
```

我的单元测试：

```
public class AgeComparatorTest {

    @Test
    public void testAge(){
        Employee e1 = new Employee();
        e1.setAge(4);

        Employee e2 = new Employee();
        e2.setAge(7);

        List<Employee> employeeList = new ArrayList<Employee>();
        employeeList.add(e1);
        employeeList.add(e2);

        Collections.sort(employeeList, new AgeComparator());
        Employee actual = employeeList.get(0);

        Assert.assertEquals(e2.getAge(), actual.getAge());

    }
} 
```

我希望 7 岁的员工在 4 岁之前，但我得到了。

junit.framework.AssertionFailedError: 预期：<7> 但是是：<4>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:50:43.503

您按升序对它们进行排序，因此这正是您的代码的预期行为。

请注意，您可以`Comparator`像这样简化您的行为以获得您想要的行为，您不必完全返回`-1/1`，任何正面或负面`int`都可以。
**[编辑]** 正如@JBNizet 在评论中指出的那样，简单地返回`emp2.getAge() - emp1.getAge()`比较器可能会溢出大值。例如使用以下方法要好得多`Guava` `Ints.compare()`：

```
class AgeComparator implements Comparator<Employee>{
    public int compare(Employee emp1, Employee emp2){
        return Ints.compare(emp2.getAge(), emp1.getAge());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T11:50:21.177

你的比较器没有问题。只是您选择按升序排列项目。

我建议你看看[Guava Ordering](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html)类。它有一个非常方便的方法`reverse`。

如果您有升序比较器，则可以非常简单地生成根据您的升序实现的降序比较器。

如果您想修复比较器以进行降序排序，只需在声明中切换变量名称并保持逻辑相同，例如

```
public int compare(Employee emp2, Employee emp1){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:51:16.510

`java.utils.Collections`将指定列表**按升序**排序，因此列表中的第一个员工年龄为 4。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T11:53:17.370

更改 if 条件并反转您的比较条件！自然排序遵循从小到高的顺序，而您想要从高到低的顺序