# StackOverflow 问答 10656000-10656999

# python - 如何计算python中元组列表的平均值？

> ID：10656000
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:03:04.950
> 
> 标签：python, statistics, python-2.7, finance, stocks

我有一个格式为元组的列表：

[（证券、支付的价格、购买的股票数量）....]

```
[('MSFT', '$39.458', '1,000'), ('AAPL', '$638.416', '200'), ('FOSL', '$52.033', '1,000'), ('OCZ', '$5.26', '34,480'), ('OCZ', '$5.1571', '5,300')] 
```

我想合并数据。这样每个证券只列出一次。

[（证券名称、支付的平均价格、拥有的股份数量）、...]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:21:18.103

目前还不是很清楚你要做什么。一些示例代码以及您尝试过的一些信息会有所帮助。即使你的方法完全错误，它也会让我们对你的目标有一个模糊的概念。

同时，也许 numpy 的`numpy.mean`功能适合您的问题？我建议将您的元组列表转换为一个 numpy 数组，然后将 mean 函数应用于所述数组的一个切片。

也就是说，它确实适用于任何类似列表的数据结构，您可以指定要执行平均的访问。

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.mean.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.mean.html)

**编辑：**

根据我收集的信息，您的元组列表以下列方式组织数据：

```
(name, dollar ammount, weight) 
```

我首先使用 numpy 将元组列表转换为数组。从那里，在第一列（名称）中找到唯一值：

```
import numpy as np
a = np.array([(tag, 23.00, 5), (tag2, 25.00, 10)])
unique_tags = np.unique(a[0,:])  # note the slicing of the array 
```

现在计算每个标签的平均值

```
meandic = {}
for element in unique_tags:
   tags = np.nonzero(a[0,:] == element)  # identify which lines are tagged with element
   meandic[element] = np.mean([t(1) * t(2) for t in a[tags]]) 
```

请注意，此代码未经测试。我可能弄错了一些小细节。如果您无法解决问题，请发表评论，我很乐意纠正我的错误。您必须删除 '$' 并在必要时将字符串转换为浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:56:57.967

我用 a`dictionary`作为输出。

```
lis=[('MSFT', '$39.458', '1,000'), ('AAPL', '$638.416', '200'), ('FOSL', '$52.033', '1,000'), ('OCZ', '$5.26', '34,480'), ('OCZ', '$5.1571', '5,300')]

dic={}
for x in lis:
    if x[0] not in dic:
     price=float(x[1].strip('$'))
     nos=int("".join(x[2].split(',')))
     #print(nos)
     dic[x[0]]=[price,nos]
    else:
     price=float(x[1].strip('$'))
     nos=int("".join(x[2].split(',')))
     dic[x[0]][1]+=nos
     dic[x[0]][0]=(dic[x[0]][0]+price)/2
print(dic) 
```

**输出：**

```
{'AAPL': [638.416, 200], 'OCZ': [5.20855, 39780], 'FOSL': [52.033, 1000], 'MSFT': [39.458, 1000]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:24:36.267

```
>>> lis
[('MSFT', '$39.458', '1,000'), ('AAPL', '$638.416', '200'), ('FOSL', '$52.033', '1,000'), ('OCZ', '$5.26', '34,480'), ('OCZ', '$5.1571', '5,300')]
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> for i in lis:
...    amt = float(i[1].strip('$'))
...    num = int(i[2].replace(",", ""))
...    d[i[0]].append((amt,num))
... 
>>> for i in d.iteritems():
...   average_price = sum([s[0] for s in i[1]])/len([s[0] for s in i[1]])
...   total_shares = sum([s[1] for s in i[1]])
...   print (i[0],average_price,total_shares)
... 
('AAPL', 638.416, 200)
('OCZ', 5.20855, 39780)
('FOSL', 52.033, 1000)
('MSFT', 39.458, 1000) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:59:57.033

干得好：

```
the_list = [('msft', '$31', 5), ('msft','$32', 10), ('aapl', '$100', 1)]
clean_list = map (lambda x: (x[0],float (x[1][1:]), int(x[2])), the_list)
out = {}

for name, price, shares in clean_list:
    if not name in out:
        out[name] = [price, shares]
    else:
        out[name][0] += price * shares
        out[name][1] += shares

# put the output in the requested format
# not forgetting to calculate avg price paid
# out contains total # shares and total price paid

nice_out = [ (name, "$%0.2f" % (out[name][0] / out[name][1]), out[name][1])
              for name in out.keys()]

print nice_out
>>> [('aapl', '$100.00', 1), ('msft', '$23.40', 15)] 
```

# jquery - 如何使网站在移动设备上显示为完整站点？

> ID：10656006
> 
> 赞同：1
> 
> 时间：2012-05-18T16:03:19.200
> 
> 标签：jquery, css, html, jquery-mobile

如何使我的网站在移动设备上显示为完整站点。我在桌面网站上使用 jquery-mobile，并希望将网页显示为移动设备上的普通桌面网站页面。用户可以放大和缩小的位置。

到目前为止，我能够让网站出现在移动设备上，但用户必须上下滑动页面才能看到页面上的所有内容。

我使用缩放（但是，这只允许缩放。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:33:45.857

不确定您的意思，通常，jQuery Mobile 页面应该在 HTML 头部部分包含这一行，

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

它将要求移动浏览器将 jQuery Mobile 页面显示为正常缩放比例，例如，

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    ......
</head> 
```

你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:01:01.493

在我看来，让桌面网站在移动设备上正确显示的最佳方式是使用媒体查询。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

但是，如果您的网站从一开始就没有设计为响应式，这可能会很棘手。

# nhibernate - NHibernate 3.3 中的映射继承

> ID：10656007
> 
> 赞同：4
> 
> 时间：2012-05-18T16:03:21.673
> 
> 标签：nhibernate, mapping-by-code

我有下面描述的继承：

```
public abstract class BaseEntity<TId> {....}

public abstract class ModelEntity : BaseEntity<Int32>{....}

public abstract class AuditableEntity : ModelEntity,IAuditable{....}

public class ApplicationUser : AuditableEntity{....}

public class SuperUser : ApplicationUser 
```

我正在使用 NHibernate 3.3，我想为该继承创建映射

```
public abstract class ModelEntityMap<TEntity> : ClassMapping<TEntity>
        where TEntity : ModelEntity
{...}

public class AuditableEntityMap<TEntity> : ModelEntityMap<TEntity> where TEntity : AuditableEntity
{ ...}

public class ApplicationUserMap : AuditableEntityMap<ApplicationUser>
{...}

public class SuperUserMap : JoinedSubclassMapping<SuperUser>{...} 
```

当应用程序启动并尝试设置数据库时，它会引发以下异常：SuperUser 的模糊映射找到多个根实体 BaseEntity / ApplicationUser

可能的解决方案 - 合并根实体的映射代表层次结构中的真实根 - 注入带有逻辑的 IModelInspector 以发现真正的根实体。

我使用具有相同继承的 Fluent nhibernate，并且使用定义为公共类 SuperUserMap 的 SuperUserMap 工作正常：SubClassMap {...}

我是 Nhibernate 代码映射的新手，很困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:29:46.997

我相信有两种方法可以解决这个问题：a）使用鉴别器的概念来识别存储的类的类型，从而从数据库中检索到正确的对象，在这种情况下，你的类被映射到一个包含所有列加上鉴别器列。不知道这如何与多级继承一起工作，但这是你可以用谷歌搜索的东西。

b) 看看这篇关于他如何处理继承的帖子：http: [//fabiomaulo.blogspot.co.nz/2011/04/nhibernate-32-mapping-by-code_13.html](http://fabiomaulo.blogspot.co.nz/2011/04/nhibernate-32-mapping-by-code_13.html)你可能会有一些想法来解决你的问题问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-13T20:39:24.300

您可以通过覆盖用于创建映射的模型映射器的 IsRootEntity 逻辑来影响实体是否为根实体的决定。

这是一个定义默认 NHibernate 代码映射行为的示例：

```
 var modelMapper = new ConventionModelMapper();
    modelMapper.IsRootEntity((type, declared) =>
    {
        if (declared) return true; // Type has already been declared as root entity
        return type.IsClass 
            && typeof(object) == type.BaseType 
            && modelMapper.ModelInspector.IsEntity(type);
    }); 
```

您将不得不调整此决策逻辑以将 BaseEntity 类排除为可能的根实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T16:46:26.327

我在使用 NHibernate 4.1.1（2017 年 5 月）时遇到了这个错误，所以我正在回答我如何解决它以供将来参考

就我而言，我复制了继承类的现有映射，忘记将父映射类更改为`ClassMapping`并遇到相同的错误

换句话说，在您的映射类中，检查父类，确保它是`ClassMapping`或者`JoinedSubclassMapping`它是否是子类

# mysql - MySQL删除重复的行集

> ID：10656009
> 
> 赞同：0
> 
> 时间：2012-05-18T16:03:23.000
> 
> 标签：mysql, duplicates

我是新来的，需要帮助（首先对不起我的英语）。

我有一张像这样的桌子：

```
 P |  A  |  B  |  C 
--------------------
 1 | 222 | 333 | 444
 2 | aaa | bbb | ccc
 3 | 222 | 333 | fff
 4 | 222 | 555 | ggg 
```

我认为第 1 行和第 3 行是重复的，因为 A 列和 B 列在这些行中是相同的，所以我想删除它们。您知道删除（当然留下一个）这些重复项的查询吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:12:05.333

这可以工作：

```
delete from Table
where p in (
    SELECT min(p),a,b,c (or max)
    FROM table
    HAVING COUNT(a) > 1 and COUNT(b) > 1 ) 
```

# google-maps - Google 地图 API - 地理编码器找不到“加利福尼亚州卡森”

> ID：10656012
> 
> 赞同：3
> 
> 时间：2012-05-18T16:03:26.970
> 
> 标签：google-maps, google-geocoder

我有一个具有基于 Google 地图 API 的商店定位器功能的客户。几天前，有人抱怨定位器无法找到“加利福尼亚州卡森”这是谷歌本身的一个非常简单的演示，但它也不起作用： http: [//gmaps-samples.googlecode.com/svn/trunk/geocoder/ singlegeocode.html](http://gmaps-samples.googlecode.com/svn/trunk/geocoder/singlegeocode.html)

有没有办法联系 Google 支持？我试图搜索任何联系信息，但找不到任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:22:22.590

它看起来确实像个虫子，因为在洛杉矶以南的地图上标有 Carson。它发生了：地理编码器数据得到更新，有时事情会被遗漏。需要在问题跟踪器中提出错误。一定要先搜索（虽然我没有找到以前的报告）并在提出新错误时选择正确的模板。

[http://code.google.com/p/gmaps-api-issues/issues/list](http://code.google.com/p/gmaps-api-issues/issues/list)

对于商店定位器应用程序，您可能会发现搜索 West Carson 提供了一个不错的起点，尽管这几乎不是一个可用的解决方法。请尝试改用邮政编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:30:55.730

我不认为这实际上是一个错误。让我温和地建议您可能使用错误的 API 来查找“Carson, CA”。我不是苛刻，只是想帮忙。但是地理编码有两个基本功能：

1.  给定一个地址作为输入，回复该地址的最佳 Lat-Lng 坐标。
2.  给定坐标作为输入，回复最近的已知地址（有时称为反向地理编码）。

使用“Carson, CA”作为输入，您似乎没有提供足够的信息来定义地址，这可能意味着地理编码器没有足够的信息。商店定位器也是如此；“Carson, CA”不是*商店*。

[^(我认为您确实想使用 Google Places API dev-guide)](https://developers.google.com/maps/documentation/javascript/places)进行此类搜索，因为您实际上是在寻找*地点*，而不是坐标或地址。例如，使用 Google Places Autocomplete，您可以将工具设置为搜索不同`types`的 ，例如：`countries`、`cities`或`geocode`（还有其他）。第一个，`countries`将让您找到以下地点：澳大利亚、巴哈马或加拿大。第二个，`cities`将让您找到以下地点：Albuquerque、Baton Rouge 或*Carson,* CA。最后，`geocode`将限制您进行地址搜索，这实际上是您在使用地理编码器时所使用的。

前几天我向地理编码器发送了一个包含“箭牌场”的请求时，我自己也犯了同样的错误；结果是在乔治亚州的“箭牌球场路”上的某个地址，这让我非常困惑，直到我想了一会儿，然后才明白了。箭牌球场是一个*地方*，而不是一个地址。我最近一直在与`Autocomplete`一堆工作，这确实使两种查找模式之间的区别变得清晰。作为一种可能的解决方案，如果您不提供特定`type`的`Autocomplete`，它将使用所有这些，这将允许您查找地点和/或地址。它可能会为您的网站提供更实用的解决方案。

无论如何，只是想提供一些有用的反馈，我希望我能帮助 -

# jquery - Smooth Div Scroll Manuel 滚动选项

> ID：10656016
> 
> 赞同：0
> 
> 时间：2012-05-18T16:03:37.653
> 
> 标签：jquery, html, scroll, smooth

我正在使用 Thomas Kahn 的 jquery 插件 smooth-div-scroll，我非常喜欢它。我已将 manualContinuousScrolling 选项设置为“true”，但我大循环中的无休止的手动滚动只能向左而不是向左和向右。文档说它应该左右工作。这是我的测试站点：[http](http://test.somersetheights.co.za/unser_haus.html) ://test.somersetheights.co.za/unser_haus.html 。

知道为什么它不会在两个方向上无限滚动吗？谢谢你的帮助。

问候，

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:35:36.303

我知道这个答案来得太晚了，我想这就是测试站点不再在线的原因（？）

在[smoothdivscroll.com](http://www.smoothdivscroll.com)上，有一些示例可以在两个方向上连续手动滚动，所以我认为您在代码中遗漏了一些东西？既然你问了这个问题，插件已经更新到 1.3 版。也许您可以检查更新是否解决了您的问题？

# java - Java 良好实践 - 声明接口类型而不是声明实现类型

> ID：10656019
> 
> 赞同：1
> 
> 时间：2012-05-18T16:03:57.540
> 
> 标签：java, types, encapsulation

在“O'Reilly - Programming Android”中，他们建议避免使用以下代码：

```
ArrayList<String> a = new ArrayList<String>(); 
```

但用这个替换它：

```
List<String> a = new ArrayList<String>(); 
```

他们认为，如果以后`a`应该将类型更改为链表，则维护代码会更容易。如果是这样，为什么不把它做成 type `Collection`，甚至`Object`？

我觉得由于必须更改实例化以更改其类型，因此最好尽可能限制其类型并在需要时更改额外的行。

他们是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:09:19.890

他们是正确的。

您应该尽可能使用最受限制的类型。If`Collection`对您来说是正确的抽象，而不是`List`or `Set`，然后使用它。如果您需要将某物用作`Object`，那么请务必将其称为`Object`。但如果你需要更具体，那就更具体。诀窍是避免在不需要时进行强制转换。

正如您所提到的，这个想法是在您不希望公开实现细节时隐藏它们。这使您的软件更易于使用且更易于维护。例如，如果您有一个返回 a 的方法`List`，那么使用您的软件的人不必担心`List`它的真正实现是什么。这有助于使您的软件更易于理解。现在，正因为如此，您可以自由更改`List`返回的类型，而不会（在大多数情况下）损害调用该方法的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:04:59.213

因为你不能对`Object`参考做任何有用的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:07:56.273

在我个人看来，您应该使用尽可能高的界面（在层次结构中）并拥有您需要的操作。

在某些情况下，您只需要存储对象、迭代并使用索引获取它们。`List`界面提供了这一点。Object 没有为您提供这些方法。

使用`Object`- 您将使代码的可读性降低，并且可能会出现强制转换异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:29:20.577

他们错了。

如果一个类型出现在公共 API 中，它应该在语义允许的范围内具有通用性。

```
List<String> getStringList(); 
```

作为实现细节，类型应该与程序员所知道的一样具体。

```
ArrayList<String> stringList = new ArrayList<>(); 
```

# python - 如何使用神经网络预测峰值（最好在 python 中使用神经实验室或 pybrain）

> ID：10656025
> 
> 赞同：3
> 
> 时间：2012-05-18T16:04:07.447
> 
> 标签：python, artificial-intelligence, neural-network, time-series

我想使用神经网络根据 A 系列（我有 A 系列的完整历史）和未来 30 天内的事件 E 列表（E 是一个列表）来预测未来 30 天内的时间序列 B二进制单位）。知道 B 与 A 成线性比例，并且当第 i 天的事件发生时（E[i] = 1），它会触发 B 的峰值（比率未知）。我有包含（A，E，B）元组的训练数据。我已经用前馈网络进行了测试，但它的表现不是很好（不能预测正确的尖峰）。我应该使用循环网络吗？我该如何做那个 neurolab 或 pybrain ？谢谢。

[您可以在这里](http://i.imm.io/pHvc.png)查看一个示例。

编辑：代码有点复杂，所以我不能在这里粘贴。但是我的想法是我将 A + E 作为输入并预测 B，所以有 30 + 30 个输入单元，30 个输出单元，没有隐藏层（我已经测试了 1 个隐藏层，包括 30 个单元和 90 个单元，但它们没有t表现更好）。时间序列数据显示在上面的链接中。（红线是B，A是类似的形状，没有尖刺）。

```
A_list, B_list, E_list = input()
X, Y = [A + E for A, E in zip(A_list, E_list)], B_list
indim, outdim = len(X[0]), len(Y[0])
network = nl.net.newp([[-1, 1]]*indim, outdim, transf=nl.trans.LogSig())    

errors = network.train(norm_X(X),                                                        
                       norm_Y(Y),
                       epochs=4000, show=1000,
                       lr=0.01) 
```

其中 norm_X(X) 将 X 缩放为 [-1,1]，norm_Y 将 Y 缩放为 [0, 1]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:17:53.487

尝试使用**neurolab.net.newff**和**train_bfgs**：

```
network = nl.net.newff([[-1, 1]]*indim, [10,outdim], transf=nl.trans.LogSig()) 
network.trainf = nl.train.train_bfgs
network.train(...) 
```

使用循环网络，您可能会看到：[http ://packages.python.org/neurolab/ex_newelm.html](http://packages.python.org/neurolab/ex_newelm.html)

# jquery - 定位悬停列表项的“a”同级

> ID：10656028
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:04:22.757
> 
> 标签：jquery, html

我的网站上有嵌套导航。它看起来像这样：

```
<ul>
  <li><a>Main Link 1</a>
    <ul>
      <li>Sublist Item of Main Link 1</li>
    </ul>
  </li>

  <li><a>Main Link 2</a>
    <ul>
      <li>Sublist Item of Main Link 2</li>
    </ul>
  </li>

</ul> 
```

我只想`a`在它是兄弟时定位链接，在这种情况下`ul`，孩子们悬停。我正在尝试使用 jQuery 来实现这一点，但找不到正确的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:12:20.563

如果您在 HTML 中添加一些标识类：

```
<ul>
  <li><a class="mainLink">Main Link 1</a>
    <ul class="linkHoverTarget">
      <li>Sublist Item of Main Link 1</li>
    </ul>
  </li>

  <li><a class="mainLink">Main Link 2</a>
    <ul class="linkHoverTarget">
      <li>Sublist Item of Main Link 2</li>
    </ul>
  </li>
</ul> 
```

您可以注册悬停事件，然后访问这些悬停事件中的相应链接，如下所示：

```
$(".linkHoverTarget li").hover(
    function() {
        // get the link in a sibling of our parent ul
        $(this).parent().parent().find(".mainLink");
    }
); 
```

这可能可以通过更复杂和脆弱的选择器来完成，而无需添加标识类，但它肯定不像这样做那样清晰或可维护。

# python - 如何使用 Python 在循环中逐列填充 CSV？

> ID：10656036
> 
> 赞同：0
> 
> 时间：2012-05-18T16:04:39.457
> 
> 标签：python, loops, csv

## 已解决：我的一个朋友帮助我添加了代码，该代码获取输出的 csv 文件并将它们组合成一个新文件。我会在周末之后添加代码，以防以后有类似问题的其他人想看到它！

让我从分享我现有的工作代码开始。此代码从 csv 文件中获取一些原始数据并从中生成新的 csv 文件。数据由两列组成，一列代表电压，一列代表电流。如果电压值没有变化，则将当前值发送到一个新的 csv 文件，该文件的名称反映了恒定电压。一旦达到新的稳定电压，就会为该电压制作另一个 csv，依此类推。这里是：

```
for x in range(1,6):
    input=open('signalnoise(%d).csv' %x,"r") # Opens raw data as readable
    v1 = 0
    first = True
    for row in csv.reader(input,delimiter='\t'):
            v2 = row[0]
            if v1==v2:
                voltage=float(v1)*1000
                if first:
                    print("Writing spectra file for " +str(voltage) + "mV")
                    first = False
                output=open('noisespectra(%d)' %x +str(voltage)+'mV.csv',"a")
                current = [row[1]]
                writer=csv.writer(output,delimiter='\t')
                writer.writerow(current)
            else:
                v1 = row[0]
                first = True 
```

请注意，由于某种原因，在整个脚本运行完成之前，打印命令似乎不会关闭，但它会打印正确的内容。这可能只是我的电脑在脚本运行时挂起。

我想更改它，以便我只有一个包含多列的输出文件，而不是一堆文件。每列的第一个条目是电压值，然后是为该电压记录的所有电流。到目前为止，这是我的想法，但我被困住了：

```
for x in range(1,6):
    input=open('signalnoise(%d).csv' %x,"r") # Opens raw data as readable
    v1 = 0
    first = True
    for row in csv.reader(input,delimiter='\t'):
            v2 = row[0]
            if v1==v2:
                voltage=float(v1)*1000
                if first:
                    column = ['voltage']
                    print("Writing spectra file for " +str(voltage) + "mV")
                    first = False
                column=column+[row[1]] # Adds the current onto the column
                saved = True # Means that a column is being saved

             elif saved: # This is executed if there is a column waiting to be appended and the voltage has changed
#I get stuck here... 
```

在这一点上，我认为我需要以某种方式使用 item.append() ，就像[这里](http://bytes.com/topic/python/answers/912694-how-use-python-add-column-csv-file)的示例一样，但我不完全确定如何实现它。然后我将设置 saved = False 和 v1 = row[0] 并具有与原始工作代码相同的 else 语句，以便在下一次迭代中事情会按需要进行。

这是一些简单的示例数据（尽管我的实际上是制表符分隔的）：

```
.1, 1
.2, 2
.2, 2
.2, 2.1
.2, 2
.3, 3
.4, 4
.5, 5.1
.5, 5.2
.5, 5
.5, 5.1 
```

我的工作代码会采用这个并给我两个名为“noisespectra(#)200.0mV.csv”和“noisespectra(#)500.0mV.csv”的文件，它们是单列“2,2,2.1,2”和“5.1”，分别为 5.2、5、5.1'。我想要生成一个名为“noisespectra(#).csv”的单个文件的代码，该文件有两列，“200.0mV,2,2,2.1,2”和“500.0mV,5.1,5.2,5,5.1”。一般来说，一个特定的电压不会有相同数量的电流，我认为这可能是使用 item.append() 技术的潜在问题，特别是如果第一个电压的相应电流少于未来的电压。

随意忽略'for x in range()'; 我正在遍历具有相似名称的文件，但这对我的问题并不重要。

我非常感谢任何人可以给我的任何帮助！如果有任何问题，我会尽快解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:24:20.113

跟踪两个列表中的两组值，然后执行...

```
combined = map(None, list_1, list_2) 
```

然后将组合列表输出到csv。

# css - 如何让 Facebook Like Box 响应式？

> ID：10656038
> 
> 赞同：67
> 
> 时间：2012-05-18T16:04:45.327
> 
> 标签：css, widget, responsive-design

我通过将 Facebook 代码粘贴到文本小部件中来使用[侧边栏中的 Facebook 类似框代码。](http://noahsdad.com/)我的主题是响应式的，我想让喜欢的框正确调整大小。我找到了这个[教程](http://inspectelement.com/tutorials/how-to-make-the-facebook-like-box-responsive/)，但他说他这样做的方式不是“完全响应”，所以我不知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-05-23T19:23:20.810

注意：此答案已过时。有关最新解决方案，请参阅[下面的社区 wiki 答案。](https://stackoverflow.com/a/15116982/364446)

* * *

我今天找到了这个 Gist，它运行良好：[https ://gist.github.com/2571173](https://gist.github.com/2571173)

（非常感谢[https://gist.github.com/smeranda](https://gist.github.com/smeranda)）

```
/* 
Make the Facebook Like box responsive (fluid width)
https://developers.facebook.com/docs/reference/plugins/like-box/ 
*/

/* 
This element holds injected scripts inside iframes that in 
some cases may stretch layouts. So, we're just hiding it. 
*/

#fb-root {
    display: none;
}

/* To fill the container and nothing else */

.fb_iframe_widget, .fb_iframe_widget span, .fb_iframe_widget span iframe[style] {
    width: 100% !important;
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-08T06:16:21.817

Colin's example for me clashed with the like button. So I adapted it to only target the Like Box.

```
.fb-like-box, .fb-like-box span, .fb-like-box span iframe[style] { width: 100% !important; } 
```

Tested in most modern browsers.

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-27T16:18:33.620

注意：科林的解决方案对我不起作用。Facebook 可能已经改变了他们的标记。使用`*`应该更具前瞻性。

用 div 包裹 Like 框：

```
<div id="likebox-wrapper">
    <iframe src="..."></iframe> <!-- likebox code -->
</div> 
```

并将其添加到您的 css 文件中：

```
#likebox-wrapper * {
   width: 100% !important;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-08-04T12:22:13.393

截至 2015 年 8 月 4 日，本机 facebook like 框在 Facebook 开发人员页面上提供了一个响应式代码片段。

您可以在此处生成响应式 Facebook likebox

[https://developers.facebook.com/docs/plugins/page-plugin](https://developers.facebook.com/docs/plugins/page-plugin)

这是有史以来最好的解决方案，而不是破解 CSS。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-12T16:49:40.797

您可以在此处找到截至 2013 年 6 月您正在寻找的答案：

[https://gist.github.com/dineshcooper/2111366](https://gist.github.com/dineshcooper/2111366)

它是使用 jQuery 重写包含 facebook 小部件的父容器的内部 HTML 来完成的。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T04:20:24.113

我试图在 Drupal 7 上使用“fb_likebox”模块（[https://drupal.org/project/fb_likebox](https://drupal.org/project/fb_likebox)）来做到这一点。让它响应。原来我必须编写自己的 Contrib 模块 Variation 并删除宽度设置选项。（默认高度选项对我来说并不重要）。删除宽度后，我将其添加`<div id="likebox-wrapper">`到 fb_likebox.tpl.php 中。

这是我的 CSS 样式：

```
 `#likebox-wrapper * {
  width: 100% !important;
  background: url('../images/block.png') repeat 0 0;
  color: #fbfbfb;
 -webkit-border-radius: 7px;
  -moz-border-radius: 7px;
   -o-border-radius: 7px;
  border-radius: 7px;
   border: 1px solid #DDD;}` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-30T21:56:06.770

没有一个 css 技巧对我有用（在我的情况下，类似 fb 的框是用“float:right”拉到右边的）。然而，没有任何额外技巧的工作是 IFRAME 版本的按钮代码。IE：

```
<iframe src="//www.facebook.com/plugins/like.php?href=..." 
        scrolling="no" frameborder="0" 
        style="border:none; overflow:hidden; width:71px; height:21px;" 
        allowTransparency="true">
</iframe> 
```

（注意样式中的自定义宽度，无需包含额外的 javascript。）

# c# - 如何在 c# 中调用 c++/cli 构造函数以及如何包含 cli 的 dll

> ID：10656040
> 
> 赞同：1
> 
> 时间：2012-05-18T16:04:47.227
> 
> 标签：c#, c++-cli

我有一个具有构造函数和析构函数以及方法名称要求的 c++/cli 类。我需要在 c# wcf 程序中调用这个方法，所以这就是我在 c# wcf 代码中调用 c++/cli 方法所做的。

```
Class1 test= new Class1();
test.requirment(); 
```

我的问题是 c# 程序如何知道它指的是哪个 c++/cli 程序，我添加了这个 cli dll 作为对 c# wcf 程序的引用，并将它用作命名空间。所以我想知道我所做的是否正确，也想知道是否有其他方法可以做到这一点，或者是否需要在 c# 程序中更改任何其他设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:10:32.620

这是由您的项目引用定义的（右键单击项目 -> 添加引用...）。如果 C++/CLI 项目在同一解决方案中，则应将其添加到“项目”选项卡下，否则选择“浏览”并选择文件系统上的 C++/CLI 程序集。

在这方面，C++/CLI 项目和程序集与任何其他 .NET 项目或程序集没有什么不同。

为确保代码中的标识符“Class1”引用正确的类型，您可以使用 Go To Definition，它应该会显示类型的定义位置。如果存在歧义或缺少引用，则代码无论如何都不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:11:31.990

在我看来，你正在做的事情是正确的，你不需要做任何其他事情。确保 Class1 在 C++/CLI 程序集中被声明为托管类（公共引用类 Class1），一切顺利。

由于您已经添加了 C++/CLI 程序集作为对具有 WPF 代码的程序集的引用，并且还在 using 子句中添加了命名空间，因此运行时和编译器有足够的信息来解决这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:06:04.987

你只能做得稍微好一点，就像你已经在做的那样。如果您的 C++/CLI 类包含一些本机资源（通常是使用 C++/CLI 的唯一原因）并且您已经正确实现了 C++/CLI“析构函数”即`~Class1()`方法：

```
using (var test1 = new Class1()) {
    test1.requirement();
} 
```

这是因为每个 C++/CLI 类`IDisposable`默认实现并映射`~Class1()`到`Dispose`.

# ios - 如何为基于 iPad 的调查/图表应用程序模仿 iOS 地图应用程序，其中我有图像（建筑或场地平面图）而不是地图

> ID：10656056
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:05:57.373
> 
> 标签：ios, xcode, image, ipad

我正在开始开发 iPad 应用程序，以帮助测量员进行建筑/现场调查。基本场景是应用程序将呈现选定建筑物或地点的平面图（可以以通常的 iPad 方式进行操作 - 缩放、旋转、平移）。然后，测量员（用户）将能够选择要放置在计划上的图钉，该图将弹出用于输入针对图钉的调查详细信息的弹出窗口。想想 iOS 地图应用程序，但使用计划/图表而不是地图，并且（我猜）使用图像坐标而不是地理信息。

我已将计划加载到 UIImageView 中，并且各种手势都工作顺利，我现在面临的一个大问题是如何在缩放/旋转时将引脚“连接”或锁定到计划/平移（并保存/恢复）。我尝试了一些想法，例如使用 addsubview 将引脚作为 UIImageView 对象添加到基本计划图像。这样做的原因是，引脚被锁定在基本图像上的位置，但是当使用手势时，它们也会随着基本图像一起缩放和旋转。然后我对这种方法提出的问题是......如何在基本图像可以缩放和旋转时跟踪与基本图像（平面图/图表）相关的引脚位置？如何防止引脚缩放（始终大小相同）？保持引脚方向？

再次，考虑到 iOS 地图应用程序（或谷歌地图），我正在寻求一些指导，以在更高级别上寻求最佳方法，但显然越详细和细节越好！

提前谢谢了。迈克尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:19:18.223

这个问题在我随后询问的另一个问题中得到解决，可以在这里找到... [iOS - 数学帮助 - 使用捏合手势缩放基本图像需要叠加图像调整 X/Y 坐标相对](https://stackoverflow.com/questions/10709280/ios-math-help-base-image-zooms-with-pinch-gesture-need-overlaid-images-adjus)

基本上，我改用了 scrollView 并使用以下计算来定位 x，y ...

```
newX = (pin.baseX * scrollView.zoomScale) + 
    (((pin.frame.size.width * scrollView.zoomScale) - 
    pin.frame.size.width) / 2);
newY = (pin.baseY * scrollView.zoomScale) + 
    ((pin.frame.size.height * scrollView.zoomScale) - 
    pin.frame.size.height); 
```

注意：“pin”是从 UIImageView 继承的自定义对象，它具有“baseX”和“baseY”属性，我将 pin 的原始 x/y 坐标存储在 zoomScale 1.0 处。有关我的完整实施示例，请参阅上面的链接。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:21:08.747

您必须以数学方式计算引脚的坐标，而不是使用像素，例如，如果您的图像是 100 x 100 并且您想将引脚放在地图的中心点而不是设置 x 和 y 坐标到 (50, 50) 您将它们设置为 (image.size.width/2,image.size.height/2) 因为如果您要缩小视图，则引脚将保留在中心点。

显然，这是一个相当基本的示例，但无论您将图钉放在图像上的何处，都可以应用相同的逻辑。

希望这可以帮助。

或者

您可以通过图像的缩放程度来计算新坐标。如果图像再次为 100 x 100 并且您将其缩小到 50 x 50 并且您希望您的图钉保持在您会做的相同位置 (x / (100/50), y / (100/50))

公式为：

x = x /（原始宽度/新宽度）

y = y /（原始高度/新高度）

# reporting-services - 如何在报表生成器中冻结一个数据集？

> ID：10656058
> 
> 赞同：3
> 
> 时间：2012-05-18T16:06:00.533
> 
> 标签：reporting-services

我在报表生成器 2.0 中有两个数据集。第一个数据集位于顶部，只有一行。第二个数据集具有相同的列数，但大约 100 行。当滚动 100 行时，我成功冻结了第二个数据集的列。但是我需要将第一个数据集冻结在顶部（就在第二个数据集上方），这样当我滚动第二个数据集的 100 行时，我可以一直看到第二个数据集的上表和列。有什么在报告生成器中为此？任何帮助表示赞赏。

谢谢， 普尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:14:35.233

[此链接](http://msdn.microsoft.com/en-us/library/ee240753.aspx)将帮助您执行此操作。您想使用数据集填充 tablix 控件并遵循本指南。如果您有任何问题，请随时回复此答案并发表评论，我会回来更新我的答案。

# vmware - ESXi 5 是否支持本地存储来存储 VM 映像？

> ID：10656059
> 
> 赞同：0
> 
> 时间：2012-05-18T16:06:05.933
> 
> 标签：vmware, esxi

我有一台想与 ESXi 一起使用的家庭服务器。这是一个相当不错的系统，配备 45W 双核 AMD Athlon，6GB DDR RAM 在双通道模式下运行。

ESXi 5 是否允许我使用本地数据存储而不是使用 NFS 或 iSCSI 目标？

谢谢，

F。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:02:29.640

简短的回答：是的。它将创建一个本地 VMFS 分区。

您将无法使用需要共享存储的更高级功能：DRS、高可用性、容错等。但无论如何，这些都需要 vCenter 和多个 ESX 服务器。

# javascript - 如何从asp：buttonfield制作javascript确认框？

> ID：10656060
> 
> 赞同：0
> 
> 时间：2012-05-18T16:06:09.413
> 
> 标签：javascript, asp.net, buttonfield

我很难从 asp:buttonfield 获得一个 javascript 确认框：

这是 Gridview 的原始代码，但是按钮字段似乎不接受“onClientClick”

```
<asp:GridView ID="gvNavios" runat="server"  onrowcommand="gvNavios_RowCommand">
<Columns>
    <asp:ButtonField runat="server" ButtonType="Button" Text="delete" CommandName="Eliminar" />
</Columns>
</asp:GridView> 
```

所以我尝试了 asp:Linkbutton 代替：

```
<asp:TemplateField HeaderText="Delete">
<ItemTemplate>
     <asp:LinkButton ID="eliminar" CommandName="delete" runat="server" Text="delete"/>
</ItemTemplate>
</asp:TemplateField> 
```

但是这种方式我无法获得点击了哪一行，因为 e.commandargument 未填充

C# 代码隐藏：

```
 protected void gvNavios_RowCommand(object sender, GridViewCommandEventArgs e)
{

    string currentCommand = e.CommandName;
    int currentRowIndex = Int32.Parse(e.CommandArgument.ToString());
    string imo = gvNavios.Rows[currentRowIndex].Cells[3].Text;

    if (currentCommand.Equals("delete"))
    {
        eliminarNavio(imo);
        Response.Redirect(Request.RawUrl);
    } 
```

}

我很欣赏以下其中一项：在 asp:button 中插入 javascript，或从 linkbutton 获取行号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:11:14.840

您需要将 CommandArgument 添加到 LinkBut​​ton 并提供一些索引（对象 ID 将是最好的）。

```
<asp:LinkButton ID="eliminar" CommandArgument='<%# Eval("ID") %>' CommandName="delete" runat="server" Text="delete"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:23:36.613

Porque no usas un templatefield ?, creo es mas facil

为什么不使用模板字段？¿

在**RowDataBound**内：

首先创建一个templatefield，然后在templatefield里面插入一个imageButton，命名为img_borrar(commandName)。

然后在rowcommand中，找到它，设置索引（CommandArgument），设置一些样式，以及java确认：

```
If e.Row.RowType = DataControlRowType.DataRow Then
                Dim boton_borrar As ImageButton = CType(e.Row.Cells(1).FindControl("img_borrar"), ImageButton)
                boton_borrar .CommandArgument = e.Row.RowIndex.ToString
                boton_borrar .Style("cursor") = "hand"
                boton_borrar .Attributes.Add("onClick", "return window.confirm(' ¿Desea borrar este registro? ');")

            End If 
```

# jquery - 将 jquery 验证添加到文件上传

> ID：10656064
> 
> 赞同：0
> 
> 时间：2012-05-18T16:06:19.913
> 
> 标签：jquery, validation

有人可以指出我正确的方向吗？我对此很陌生，所以我不确定这里发生了什么。这似乎很简单，但由于某种原因不起作用。

我有一个（Telerik）模态弹出窗口，其中包含一个带有多个输入字段的表单，其中大多数使用 html 帮助器进行输入。我对那些工作的领域进行了验证。该表单还具有文件上传功能。这就是我要验证的。

现在，我只想验证用户是否选择了一个文件。如果他们提交表单而不上传文件，他们应该在窗口关闭之前收到一条消息。

这是我的输入

```
<input type="file" name="file1" id="file1" /><br />
<label for="file1" id="file1Error">Please choose a file</label> 
```

这是最初隐藏错误消息的 jquery，检查文件是否存在，如果不存在则显示错误

```
$('#Submit')
  .click(function()
  {
   ('#file1Error').hide();
   var file = $('#file1').val();
   if (! file)
  {
  $('#file1Error').show();
  return;
  }
  }); 
```

我觉得代码没有被触及。我试过把它放在几个地方：在页面上现有的 Telerik 脚本注册器中（加载模式窗口的 javascript 所在的位置），在它自己的脚本注册器中，将它嵌套在加载脚本的 .open() 中。

有人可以给我一个正确的方向来解决这个问题吗？

编辑：暂时改变我的要求范围。我只想在单击提交按钮时显示错误消息。（我可以稍后添加验证）。那么为什么这不起作用：

```
 //initially hide the message--this works fine

 $(function()
   {
      $('#file1Error').hide();

 //display the message on submit click--this does not work
   $('#Submit').click(function()
   {
      $('#file1Error').show();
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:10:35.187

您需要在提交表单**之前对其进行测试。**看看[这里](http://api.jquery.com/submit/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:46:06.163

```
$('#Submit').click(function()
  {
   ('#file1Error').hide();
   var file = $('#file1').val();
   if (file == "")
  {
  $('#file1Error').show();
  return false;
  }
return true; 
//or $('#frm1').submit();
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:12:51.170

检查第四行。
$('#file1Error').hide();

# actionscript-3 - 构造函数中无法访问 TLFTextField 文本属性

> ID：10656065
> 
> 赞同：0
> 
> 时间：2012-05-18T16:06:29.207
> 
> 标签：actionscript-3, tlf

我已将 TLFTextField 放置在带有一些默认文本的 MovieClip 中，为 MovieClip 分配了一个类，

在构造函数中，

```
trace(first_name, first_name.text); //textField is available but not the default text 
```

但是稍后可以在另一个函数中使用默认文本，我需要在构造函数中使用默认文本来进行一些验证

（例如，如果字段为空，则在焦点输出事件中获取默认文本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:36:53.233

明白了，TLFTextFields 只有在添加到舞台后才可用，我在 stageaddedhandler 中完成了工作。

# android - 无法在 Sherlock 中使用标签

> ID：10656070
> 
> 赞同：3
> 
> 时间：2012-05-18T16:06:58.710
> 
> 标签：android, tabs, android-fragments, actionbarsherlock

好的，所以我正在尝试使用 Sherlock 显示多个选项卡，每个选项卡用于一个片段。我只有 4 个类：一个用于我的主要活动，两个用于我的片段，一个用于 TabListener。一切都应该没问题（我在没有 Sherlcock 的情况下有完全相同的程序，在 4.0 设备上工作），所以我不明白为什么我会得到 NullPointerException。

这是错误的一部分

```
05-18 17:46:57.197: E/AndroidRuntime(9312): FATAL EXCEPTION: main
05-18 17:46:57.197: E/AndroidRuntime(9312): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.micky.testing/com.micky.testing.SherlockTestActivity}: java.lang.NullPointerException
...
05-18 17:46:57.197: E/AndroidRuntime(9312): Caused by: java.lang.NullPointerException
05-18 17:46:57.197: E/AndroidRuntime(9312):     at com.micky.testing.MyTabListener.onTabSelected(MyTabListener.java:21)
...
05-18 17:46:57.197: E/AndroidRuntime(9312):     at com.micky.testing.SherlockTestActivity.onCreate(SherlockTestActivity.java:39) 
```

这是我的片段之一：
**HomeFragment**

```
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.SherlockFragment;

public class HomeFragment extends SherlockFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.homefragment, container, false);
    }
} 
```

这是我的 tabListener ：
**MyTabListener**

```
public class MyTabListener implements TabListener {

public SherlockFragment fragment;

MyTabListener(SherlockFragment fr) {
    Log.d("MYTAG", "Creating a fragmentListener w/ " + fr);
    this.fragment = fr;
}
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub
    Log.d("TAG", "" + fragment);
    ft.replace(R.id.fragment_container, fragment);
} 
```

}

我的主要活动：
**SherlockTestActivity**

```
public class SherlockTestActivity extends SherlockActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //We take the support actionbar
    ActionBar ab = getSupportActionBar();
    //We set to navigationmode with tabs
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    //we create the tabs
    ActionBar.Tab homeTab = ab.newTab().setText("Home");
    ActionBar.Tab tagsTab = ab.newTab().setText("Tags");

    //We create the fragments
    SherlockFragment homeFragment = new HomeFragment();
    SherlockFragment tagsFragment = new TagFragments();

    //And we set the tabsListener;
    homeTab.setTabListener(new MyTabListener(homeFragment));
    tagsTab.setTabListener(new MyTabListener(tagsFragment));

    Log.d("","" + homeTab);
    ab.addTab(homeTab);
    ab.addTab(tagsTab);
} 
```

好的，所以当我将选项卡添加到操作栏时似乎会引发错误。当我不将 TabListener 添加到选项卡时，没有错误。代码`ft.replace(R.id.fragment_container, fragment);`（MyTabListener）似乎是问题所在，但我无法理解为什么。fragment 不为空（在实例化新的 tabListener 时初始化），并且 fragment_container 没有理由出错。

所以，如果有人能在这里帮助我！谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T16:17:31.463

您应该扩展 SherlockFragmentActivity 而不是 SherlockActivity。在管理片段时使用片段活动。

# iphone - NSOperation 子类不调用委托方法和 NSOperationQueue 不等到完成

> ID：10656072
> 
> 赞同：0
> 
> 时间：2012-05-18T16:07:07.460
> 
> 标签：iphone, objective-c, xml, nsoperation, nsoperationqueue

我使用这段代码来创建一些 NSOperations 并将它们添加到队列中：

```
HUD = [MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES];
        //HUD.labelText = @"Downloading..";
        //HUD.dimBackground = YES;

        /* Operation Queue init  */
        NSOperationQueue *queue = [NSOperationQueue new];

        // Spawn request operations & add them to queue
        SoapRequestOperation *operation = [[SoapRequestOperation alloc] initWithRequest:@"<?xml version=\"1.0\" encoding=\"utf-8\"?> <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> <soap:Body> <Categories xmlns=\"http://tempuri.org/\"> <UID>string</UID> <Username>string</Username> <Password>string</Password> </Categories>      </soap:Body> </soap:Envelope>" andValue:@"Categories"];

        [queue addOperation:operation];

        operation = [[SoapRequestOperation alloc] initWithRequest:@"<?xml version=\"1.0\" encoding=\"utf-8\"?> <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> <soap:Body> <Currencies xmlns=\"http://tempuri.org/\"> <UID>string</UID> <Username>string</Username> <Password>string</Password> </Currencies>      </soap:Body> </soap:Envelope>" andValue:@"Currencies"];

        [queue addOperation:operation];

        operation = [[SoapRequestOperation alloc] initWithRequest:@"<?xml version=\"1.0\" encoding=\"utf-8\"?> <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> <soap:Body> <Nominals xmlns=\"http://tempuri.org/\">   <UID>string</UID> <Username>string</Username> <Password>string</Password> </Nominals> </soap:Body> </soap:Envelope>" andValue:@"Nominals"];

        [queue addOperation:operation];

        operation = [[SoapRequestOperation alloc] initWithRequest:@"<?xml version=\"1.0\" encoding=\"utf-8\"?> <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> <soap:Body> <Projects xmlns=\"http://tempuri.org/\">   <UID>string</UID> <Username>string</Username> <Password>string</Password> </Projects>        </soap:Body> </soap:Envelope>" andValue:@"Projects"];

        [queue addOperation:operation];

        operation = [[SoapRequestOperation alloc] initWithRequest:@"<?xml version=\"1.0\" encoding=\"utf-8\"?> <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> <soap:Body> <Register xmlns=\"http://tempuri.org/\">   <UID>string</UID> <Username>string</Username> <Password>string</Password> <OrganisationCode>string</OrganisationCode> </Register> </soap:Body> </soap:Envelope>" andValue:@"Register"];

        [queue addOperation:operation];

        [queue waitUntilAllOperationsAreFinished];

        [self reloadTableData];

        HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
        HUD.mode = MBProgressHUDModeCustomView;
        [HUD hide:YES afterDelay:2]; 
```

这是我的 NSOperation 子类的 .m 文件：

```
#import "SoapRequestOperation.h"
#import "Currency.h"
#import "Category.h"
#import "Project.h"
#import "Constants.h"

@implementation SoapRequestOperation

@synthesize request, value;

-(id) initWithRequest:(NSString *)l_Request andValue:(NSString *)l_Value{
    if (self = [super init]) {
        /* do most of initialization */
        self.request = l_Request;
        self.value = l_Value;
        xmlBlock = 0;
        appDelegate = [[UIApplication sharedApplication] delegate];
    }
    return(self);
}

- (void) main {
    if ([value isEqualToString:@"Category"]){
        xmlBlock = CATEGORY;
    }
    else if ([value isEqualToString:@"Currency"]){
        xmlBlock = CURRENCY;
    }
    else if ([value isEqualToString:@"Nominal"]){
        xmlBlock = NOMINAL;
    }
    else if ([value isEqualToString:@"Project"]){
        xmlBlock = PROJECT;
    }
    else {
        xmlBlock = REGISTER;
    }

    NSString *soapMsg = request;
    //---print it to the Debugger Console for verification---
    NSLog(@"%@", soapMsg);
    NSURL *url = [NSURL URLWithString:
                  @"http://www.$^$%£%@%^£.co.uk/$$^$^£$^£.asmx"];
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    //---set the headers---
    NSString *msgLength = [NSString stringWithFormat:@"%d",
                           [soapMsg length]];
    [req addValue:@"text/xml; charset=utf-8"
forHTTPHeaderField:@"Content-Type"];
    [req addValue:[NSString stringWithFormat:@"http://tempuri.org/%@", value]
forHTTPHeaderField:@"SOAPAction"];
    [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    //---set the HTTP method and body---
    [req setHTTPMethod:@"POST"];
    [req setHTTPBody: [soapMsg dataUsingEncoding:NSUTF8StringEncoding]];
    //[activityIndicator startAnimating];
    conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
    if (conn) {
        webData = [NSMutableData data];
    }
}

-(void) connection:(NSURLConnection *) connection
didReceiveResponse:(NSURLResponse *) response {
    [webData setLength: 0];
}

-(void) connection:(NSURLConnection *) connection
    didReceiveData:(NSData *) data {
    [webData appendData:data];
}

-(void) connection:(NSURLConnection *) connection
  didFailWithError:(NSError *) error {

}

-(void) connectionDidFinishLoading:(NSURLConnection *) connection {
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[NSString alloc]
                        initWithBytes: [webData mutableBytes]
                        length:[webData length]
                        encoding:NSUTF8StringEncoding];
    //---shows the XML---
    NSLog(@"%@", theXML);

    xmlParser = [[NSXMLParser alloc] initWithData: webData];
    [xmlParser setDelegate: self];
    [xmlParser setShouldResolveExternalEntities:YES];
    [xmlParser parse];

}

//---when the start of an element is found---
-(void) parser:(NSXMLParser *) parser
didStartElement:(NSString *) elementName
  namespaceURI:(NSString *) namespaceURI
 qualifiedName:(NSString *) qName
    attributes:(NSDictionary *) attributeDict {
    currentElement = [elementName copy];

    //Category
    if( [currentElement isEqualToString:@"Item"])
    {
        category = [[NSMutableDictionary alloc] init];
        categoryName = [[NSMutableString alloc] init];
    }

    //Currency
    if ([currentElement isEqualToString: @"Currency"]) {
        currency = [[NSMutableDictionary alloc] init];
        countryName = [[NSMutableString alloc] init];
        currencyName = [[NSMutableString alloc] init];
        currencyUnit = [[NSMutableString alloc] init];
        shortName = [[NSMutableString alloc] init];
    }

    //Nominal
    if( [currentElement isEqualToString:@"Nominal"])
    {
        nominal = [[NSMutableDictionary alloc] init];
        name = [[NSMutableString alloc] init];
        description = [[NSMutableString alloc] init];
        paid = [[NSMutableString alloc] init];
    }

    //Project
    if( [currentElement isEqualToString:@"Project"])
    {
        project = [[NSMutableDictionary alloc] init];
        projectName = [[NSMutableString alloc] init];
        projectDescription = [[NSMutableString alloc] init];
    }

    //Register
    if( [currentElement isEqualToString:@"RegisterResult"])
    {
        elementFound = YES;
    }

}

-(void)parser:(NSXMLParser *) parser foundCharacters:(NSString *)string
{
    //Category
    if (xmlBlock == CATEGORY){
        if ([currentElement isEqualToString: @"Item"]){
            [categoryName appendString:string];
        }
    }

    //Currency
    if (xmlBlock == CURRENCY){
        if ([currentElement isEqualToString: @"CountryName"]){
            [countryName appendString:string];
        }
        else if ([currentElement isEqualToString: @"CurrencyName"]){
            [currencyName appendString:string];
        }
        else if ([currentElement isEqualToString: @"Unit"]){
            [currencyUnit appendString:string];
        }
        else if ([currentElement isEqualToString: @"ShortName"]){
            [shortName appendString:string];
        }
    }

    //Nominal
    if ([currentElement isEqualToString: @"Name"] && xmlBlock == NOMINAL){
        [name appendString:string];
    }
    else if ([currentElement isEqualToString: @"Description"] && xmlBlock == NOMINAL){
        [description appendString:string];
    }
    else if ([currentElement isEqualToString: @"Paid"]){
        [paid appendString:string];
    }

    //Project
    if (xmlBlock == PROJECT) {
        if ([currentElement isEqualToString: @"Name"]){
            [projectName appendString:string];
        }
        else if ([currentElement isEqualToString: @"Description"]){
            [projectDescription appendString:string];
        }
    }

    //Register
    if (xmlBlock == REGISTER && elementFound){
        registerVal = string;
    }
}

//---when the end of element is found---
-(void)parser:(NSXMLParser *)parser
didEndElement:(NSString *)elementName
 namespaceURI:(NSString *)namespaceURI
qualifiedName:(NSString *)qName
{    
    if ([elementName isEqualToString:@"Item"])
    {
        // save values to an item, then store that item into the array...
        [category setObject:categoryName forKey:@"categoryName"];

        [categories addObject:[category copy]];

        Category *c = [[Category alloc] init];
        c.categoryName = categoryName;
        c.totalValue = @"0.00";
        [appDelegate.categories addObject:c];

        NSLog(@"%d", [appDelegate.categories count]);
    }

    //Currency
    if ([elementName isEqualToString: @"Currency"]) {
        // save values to an item, then store that item into the array...
        [currency setObject:countryName forKey:@"countryName"];
        [currency setObject:currencyName forKey:@"currencyName"];
        [currency setObject:currencyUnit forKey:@"unit"];
        [currency setObject:shortName forKey:@"shortName"];

        [currencies addObject:[currency copy]];

        Currency *c = [[Currency alloc] init];
        c.totalValue = @"0.00";
        c.countryName = countryName;
        c.currencyName = currencyName;
        double myDouble = [currencyUnit doubleValue];
        c.unit = myDouble;
        c.shortName = shortName;

        [appDelegate.currencies addObject:c];

        NSLog(@"%d", [appDelegate.currencies count]);

    }

    //Nominal
    if ([elementName isEqualToString:@"Nominal"])
    {
        // save values to an item, then store that item into the array...
        [nominal setObject:name forKey:@"name"];
        [nominal setObject:description forKey:@"description"];
        [nominal setObject:paid forKey:@"paid"];

        [nominals addObject:[nominal copy]];

        NSLog(@"%d", [nominals count]);

    }

    if ([elementName isEqualToString:@"Project"])
    {
        // save values to an item, then store that item into the array...
        [project setObject:projectName forKey:@"projectName"];
        [project setObject:projectDescription forKey:@"projectDescription"];

        [projects addObject:[project copy]];

        Project *p = [NSEntityDescription
                      insertNewObjectForEntityForName:@"Project"
                      inManagedObjectContext:appDelegate.managedObjectContext];
        [p setValue:projectName forKey:@"name"];
        [p setValue:@"0.00" forKey:@"totalValue"];
        NSError *error;
        if (![appDelegate.managedObjectContext save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
        }
        [appDelegate.projects addObject:p];

        NSLog(@"%d", [appDelegate.currencies count]);
    }

    if ([elementName isEqualToString:@"RegisterResult"])
    {
        if ([registerVal isEqualToString:@"true"]){
            boolRegister = YES;
        }
        else {
            boolRegister = NO;
        }

        NSLog(@"BOOL = %@", (boolRegister ? @"YES" : @"NO"));

        elementFound = FALSE;
    }
} 
```

不幸的是，没有调用 NSURLConnection 和 NSXMLParser 委托方法（一切都在头文件中）。而且我不确定我是否完全理解这条线：

```
[queue waitUntilAllOperationsAreFinished]; 
```

这不应该导致调用线程等待所有操作完成吗？我有一种感觉，由于 NSOperation 子类本身的错误，这条线不起作用？

有谁可以帮我离开这里吗？

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:32:04.147

问题是您如何设置操作。它被设置为非并发操作，因此它在单独的线程中执行 main 方法，然后完成。当委托被调用时，线程已经消失了。噗。您的问题是您没有保留线程。请参阅此处：[如何在 NSOperation 中执行异步 NSURLConnection？](https://stackoverflow.com/questions/1304508/how-do-i-do-an-asychronous-nsurlconnection-inside-an-nsoperation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:32:26.420

Joel 在`start`您应该调用该`main`方法以在主线程上启动的方法中是正确的，或者您需要保持调用方法 id 的线程处于活动状态。

# c++ - “类型 foo 的成员具有私有复制构造函数”错误：为什么会出错？

> ID：10656076
> 
> 赞同：4
> 
> 时间：2012-05-18T16:07:23.520
> 
> 标签：c++, class, copy-constructor

我试图定义一个这样的类：

```
#include <library/foo.h>

class my_class {
private:
  someone_elses foo;
public:
  myclass();
  ~myclass();
  //...
}; 
```

但是编译器失败了：“someone_elses 类型的字段 foo 有一个私有复制构造函数”。现在我知道我可以通过以下方式解决这个问题：

```
class my_class {
private:
  someone_elses *foo;
//...
};

my_class::my_class() { foo = new someone_elses(); }
my_class::~my_class() { delete foo; } 
```

我的问题是为什么编译器关心对象的字段是否实现了可访问的复制构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:16:25.207

在第一个版本中，当您`my_class`复制`someone_elses`.

在后一个版本中，当您做同样的事情时，您正在制作指向`someone_elses`. 因此，您无需制作副本，而是在`my_class`.

由于您实际上是`someone_elses`在析构函数中删除，因此您将遇到各种问题。您需要能够复制`someone_elses`，但似乎由于某种原因不允许您复制，因为该课程的作者认为如此重要以至于无法复制。

如何应对这个问题在很大程度上取决于你遗漏的细节。可能是您不能允许复制`my_class`并且也应该将其复制构造函数设为私有。这当然会在其他地方破坏某些东西，因为如果不使用该构造函数，则不会创建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:13:02.847

原因是您的`my_class`复制构造函数调用了`someone_elses`' 复制构造函数。您必须定义一个不复制构造的复制构造函数`someone_elses`，尽管从语义上讲这没有多大意义。

```
class my_class {
private:
  someone_elses foo;
public:
  my_class(const my_class& rhs) {
   // do nothing, end up with default constructed someone_elses.
  } 
  myclass();
  ~myclass();
  //...
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:14:45.163

**C++03标准12.8（复制类对象）复制构造：**

> 每个子对象都以适合其类型的方式复制：
> 
> *   **如果子对象是类类型，则使用该类的复制构造函数；**
> *   如果子对象是一个数组，则以适合元素类型的方式复制每个元素；
> *   如果子对象是标量类型，则使用内置赋值运算符。

`someone_elses`您的代码违反了第一个要求，如果您的情况下的子对象的复制构造函数`private`不能使用，因此编译器会准确指出错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:11:20.070

因为 的复制构造函数`my_class`会调用 的复制构造函数`foo`。这是一个对象，而不是指针，因此需要调用它的复制构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T16:14:08.157

> 为什么编译器关心对象的字段是否实现了可访问的复制构造函数？

因为您的程序在`my_class`的隐式复制构造函数中调用它。考虑：

```
int main () {
  my_class m1;
  my_class m2(m1);
} 
```

`m2`调用的创建`my_class::my_class(const my_class&)`。如果您没有提供，系统会自动为您提供一个。此*隐式*复制构造函数仅将 的每个字段复制`m1`到 的相应字段中`m2`。具体来说，它必须复制`foo`.

但是，由于`someone_elses::someone_else(const someone_else&)`是私有的，它不能复制`foo`. 因此错误。

# .net - 我的 app.config 文件有什么问题？

> ID：10656077
> 
> 赞同：18
> 
> 时间：2012-05-18T16:07:24.033
> 
> 标签：.net, app-config

我有一个 app.config 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="TestKey" value="TestValue" />
  </appSettings>
  <newSection>
  </newSection>
</configuration> 
```

我正在尝试以这种方式使用它：

```
System.Configuration.ConfigurationFileMap fileMap = new ConfigurationFileMap(@"C:\app.config");  
System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenMappedMachineConfiguration(fileMap); 
```

但是，它似乎不起作用。当我在读入文件后立即中断和调试时，我尝试查看`configuration.AppSettings`我得到一个`'configuration.AppSettings' threw an exception of type 'System.InvalidCastException'`.

我确定我正在阅读该文件，因为当我查看 configuration.Sections["newSection"] 时，我返回一个空`{System.Configuration.DefaultSection}`（而不是 null）。

我猜我有一些非常基本的错误...... AppSettings 发生了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-22T10:04:10.557

您使用了错误的函数来读取 app.config。OpenMappedMachineConfiguration 旨在打开您的 machine.config 文件，但您正在打开一个典型的 application.exe.config 文件。以下代码将读取您的 app.config 并返回您期望的内容。

```
 System.Configuration.ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();
    fileMap.ExeConfigFilename = @"C:\app.config";
    System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);
    MessageBox.Show(configuration.AppSettings.Settings["TestKey"].Value); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T11:19:15.380

如果您阅读 MSDN 上有关您尝试使用的功能的文档：

[OpenExe 配置 MSDN](http://msdn.microsoft.com/en-us/library/ms224437.aspx)

在您使用的方式中，它会尝试查找 app.config.exe 的配置。如果您确实想使用 appSettings，请将它们添加到应用程序的配置文件的配置中，然后使用配置管理器访问它们：

[使用 appsetting .net MSDN](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T16:33:45.730

我认为“newSection”元素导致了问题。除非你也添加一个“configSections”元素来声明什么是“newSection”，.NET 将无法转换它。

你需要类似的东西：

```
<configSections>
  <section name="newSection" type="Fully.Qualified.TypeName.NewSection,   
  AssemblyName" />
</configSections> 
```

在第一种情况下，我会尝试删除“newSection”元素，看看这是否能改善这种情况。

[此链接](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)解释了自定义配置部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T15:11:50.663

任何时候我在我的 webconfig 中使用了一个键，我都这样做了

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <SectionGroup>
      Section Stuff
    </SectionGroup>
  </configSections>
<appsettings>
   <add key="TestKey" value="TestValue" />
</appSettings>
</configuration> 
```

我不完全理解为什么，但它总是会给我在 configsettings 中设置应用程序设置错误。

# sql-server - 如何：插入、选择 - 但一个字段来自其他地方？

> ID：10656088
> 
> 赞同：0
> 
> 时间：2012-05-18T16:08:31.890
> 
> 标签：sql-server, select, insert

这就是插入，选择通常工作的方式（示例来自：[https](https://stackoverflow.com/a/576442/101055) ://stackoverflow.com/a/576442/101055 ）：

```
INSERT INTO new_table (Foo, Bar, Fizz, Buzz)
SELECT Foo, Bar, Fizz, Buzz
FROM initial_table 
```

**`Fizz`但是-如果不在initial_table中，而是一个变量，如何做到这一点`@fizz`？**

这*失败了*：

```
INSERT INTO new_table (Foo, Bar, @fizz, Buzz)
SELECT Foo, Bar, Buzz
FROM initial_table 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:10:33.900

```
INSERT INTO new_table (Foo, Bar, Fizz, Buzz)
SELECT Foo, Bar, @fizz, Buzz
FROM initial_table 
```

插入语法是

```
insert into destination_table (destination_colum1, destination_colum2, ...)
select source_value1, source_value2, ...  from source_table 
```

首先，您命名要写入的列**，然后**选择源

# jquery - 中断 jquery .load()

> ID：10656091
> 
> 赞同：1
> 
> 时间：2012-05-18T16:08:45.977
> 
> 标签：jquery, load, interrupt

这将打开一个 div 并显示加载页面的内容。它可以正常工作，但是如果您快速浏览“测试”链接，则会将所有页面加载到最后。

有什么想法可以解决这个问题吗？

扳机

```
<a name="1" class="zoom">test1</a>
<a name="2" class="zoom">test2</a>
<a name="3" class="zoom">test3</a>
<a name="4" class="zoom">test4</a> 
```

jQuery代码：

```
$(".zoom").mouseover(function(){
    id=$(this).attr('name');
    page="../order.php";
    $('#trigga').load(page+'?id_ordine_testa='+id);
    $('#trigga').fadeIn();
}); 

$(".zoom").mouseout(function(){  
    $('#trigga').fadeOut();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:12:18.750

我认为您正在寻找的是 jQuery 的[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件：

```
$('.zoom').hoverIntent({
    timeout: 100,
    over: function() {
        var id = $(this).attr('name');
        var page = "../order.php";
        $('#trigga').load(page+'?id_ordine_testa='+id, function() {
            $('#trigga').fadeIn();
        });
    },
    out: function() {
        $('#trigga').fadeOut();
    }
}); 
```

# xamarin.ios - MonoTouch 和 MonoForAndroid 之间的代码共享

> ID：10656092
> 
> 赞同：5
> 
> 时间：2012-05-18T16:08:45.873
> 
> 标签：xamarin.ios, monodevelop, xamarin.android

在 MonoTouch 和 Mono For Android 项目之间共享业务逻辑 c# 代码的最佳实践是什么？

编辑：最初，我的问题是关于物理文件共享：

1.  您建议使用什么：网络文件共享或一些代码版本控制（git、svn）？在我的例子中，我使用了两个工作站——Mac（带有 MonoTouch 的 MonoDevelop）和 PC（带有 MonoDroid 的 Visual Studio）。
2.  解决方案/项目文件夹结构怎么样？在“博客文章：[Xamarin Mobile World Congress 2012 Unofficial Conference App Released！](http://blog.xamarin.com/2012/02/24/mwc_2012/) ”中的示例结构相当混乱：一个文件夹中的多个解决方案，然后在一个具有不同文件夹和项目名称的子文件夹中的不同平台项目。它不能用 IDE 原生完成。他们是否在 IDE 环境之外手动编辑解决方案文件和文件夹名称的内容？
3.  对于通用代码的项目，使用什么样的配置文件（模板）？Monotouch 有几个：Empty Project、MonoTouch Library Project 和 MonoTouch Binding Projects？我想在 Android 中 - Android 类库？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T16:46:00.497

这是一个非常普遍的问题，但这里有一些资源可以帮助您入门：

1.  视频：[跨平台移动开发](http://www.youtube.com/watch?v=WkNbRUqnSSc)
2.  博客文章：[Windows Phone 7、MonoDroid 及更高版本的共享库](http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/)
3.  书籍：[使用 C# 进行移动开发](http://shop.oreilly.com/product/0636920024002.do)
4.  博客文章：[Xamarin Mobile World Congress 2012 非官方会议应用发布！](http://blog.xamarin.com/2012/02/24/mwc_2012/)

**编辑（回答您的新问题）**

5.  跨项目链接文件背后的想法是文件只有一个实际副本，而不必自己管理多个副本并使它们保持同步。该文件实际上只存在于一个项目中并链接到其他项目中，但是当项目被编译时，它会将文件视为实际存在。

6.  我不能确切地说他们是如何创建他们的文件夹结构的，但我知道在很多情况下我会手动编辑项目或解决方案文件以获得我想要的文件夹结构，因为没有办法得到我想要的东西单独的IDE。这实际上归结为您希望如何构建文件夹的个人偏好。

7.  最后，您需要的是针对您想要定位的每个平台的类库项目。使用链接文件方法时，放置物理文件的位置完全取决于您。我经常使用的一种方法是实际创建一个标准的 .NET 4.0 类库，将文件放入其中，然后将它们链接到我的 Mono for Android 和 MonoTouch 类库中。如果您关心的只是针对 iOS 和 Android，那可能比它的价值更麻烦，您可以让文件存在于一个项目中并将它们链接到另一个项目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T18:11:44.730

**免责声明：**我有一种[特殊的 Mvvm 方法](https://github.com/slodge/MvvmCross/)，用于跨多平台项目共享代码......

尽管如此，我真的不相信“一刀切”的框架——我认为你需要谨慎选择最适合你的项目、开发人员和组织的方法。

话虽如此，您可以在 Mono 开发方法中使用的一些工具是：

*   使用[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)在平台之间共享完全相同的代码
*   使用特定于平台的类库在平台之间共享代码，使用Microsoft的[Project Linker 工具链接这些代码](http://msdn.microsoft.com/en-us/library/ff921108%28v=PandP.20%29.aspx)
*   在你的类库中使用#define 代码来提供项目的平台特定实现（我个人尽量避免这种方法，但它通常提供最快的上市途径）
*   使用 DI/IoC 技术为确实需要平台特定实现的情况提供组件。
*   使用程序集链接来提供 IoC - 例如，这就是[Xamarin MobileAPI](http://xamarin.com/mobileapi)所做的
*   使用基于服务器的逻辑来实现真正的共享功能 - 例如使用 REST 或 SOAP-XML 服务来实现逻辑
*   在平台之间共享测试（例如 NUnit）以确保您的逻辑质量
*   使用共享代码技术 - MVC（[MonoCross](http://code.google.com/p/monocross/)）或 MVVM（[MonoMobile.Views](https://github.com/RobertKozak/MonoMobile.Views)或[MvvmCross](http://github.com/slodge/mvvmcross)）用于 UI“控制器”逻辑；MonoTouch.Dialog 和 MonoDroid.Dialog 用于“视图级”抽象；用于 UI“绘图”的[CrossGraphics ；](https://github.com/praeclarum/CrossGraphics)用于数据库的 SQLite.Net；等等

我发现 MonoTouch、MonoDroid 和 Microsoft 工具在开发跨平台代码方面提供了真正而显着的好处——但你必须努力思考才能实现这一点。

# java - 动态更改模拟对象返回值

> ID：10656096
> 
> 赞同：1
> 
> 时间：2012-05-18T16:08:56.350
> 
> 标签：java, easymock, powermock

假设我有以下方法：

```
public void runLoop(SomeIterator it){
    while(it.hasNext()){
        //do something
    }
} 
```

现在我想传入一个`SomeIterator`Mock 对象，该对象将返回`Boolean.TRUE`以进入循环，但我也希望它`Boolean.FALSE`在某个时候返回（例如在 10 次之后），有没有办法通过 PowerMock/ 实现这一点易模？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:18:24.033

[这是EasyMock 文档](http://www.easymock.org/EasyMock3_1_Documentation.html)的摘录：

> 更改同一方法调用的行为
> 
> 也可以为方法指定变化的行为。方法times、andReturn 和andThrow 可以被链接。例如，我们将 voteForRemoval("Document") 定义为
> 
> *   前三个调用返回 42，
> *   为接下来的四个调用抛出 RuntimeException，
> *   返回 -42 一次。

```
expect(mock.voteForRemoval("Document"))
    .andReturn((byte) 42).times(3)
    .andThrow(new RuntimeException(), 4)
    .andReturn((byte) -42); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:22:43.177

我不太了解 powermock，但是使用 easymock 的方法是 .andAnswer() 而不是 .andReturn 在你的模拟中。

伪代码：

```
it.hasNext();
expectLastCall().anyTimes().andAnswer(
    new IAnswer<Boolean>(){ compute your return value }
); 
```

# radwindow - RadWindow 限制区（全屏 - 浏览器）

> ID：10656097
> 
> 赞同：1
> 
> 时间：2012-05-18T16:09:02.403
> 
> 标签：radwindow

我想为 RadWindow Restriction Zone 设置一个参数。

我不想移出浏览器窗口。

如何阻止将窗口移出浏览器？

如何设置限制区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-27T13:16:24.633

您可以使用 radwindow 的 RestrictionZoneID 属性来解决您的问题。[在http://demos.telerik.com/aspnet-ajax/window/examples/restrictionzone/defaultvb.aspx](http://demos.telerik.com/aspnet-ajax/window/examples/restrictionzone/defaultvb.aspx)参考这篇文章

# java - 使用用户签名在服务器文档上签名 PDF

> ID：10656100
> 
> 赞同：7
> 
> 时间：2012-05-18T16:09:26.117
> 
> 标签：java, php, digital-signature, signing

这是我想做的事情：

1.  用户创建文档 (html)
2.  编辑 -> 在服务器上保存 PDF
3.  询问用户是否要签署文件
    *   （是的）这是问题
    *   （不）没问题
4.  ？？？（不重要）

所以现在我面临的问题是如何在第 3 步中做到这一点（是）。如果签名在服务器上没问题，我有一些 html->php->pdf 类可以使用数字签名进行签名，但签名必须是在服务器上作为文件。问题是，我怎样才能直接在服务器上进行。用户选择是，签名被读取（从他的计算机上的阅读器）并发送到服务器并完成签名。在这里，我相信如果没有 Java 之类的东西，我将无法做到这一点。在我看来，PHP 和 JavaScript 肯定不足以完成这个动作。

有没有人遇到过这样的问题？也许一些准备好使用的图书馆？

PS不太确定标签是否正确，但不知道该放哪个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T16:51:15.893

如果带有私钥的证书在客户端上，那么您需要一个客户端模块来进行签名。JavaScript 还不够，因为它无法访问客户端上的密钥。[虽然您可以尝试从 JavaScript](https://stackoverflow.com/questions/10553377/how-to-make-a-digital-signature-in-a-web-application-javascript-using-a-smartc)调用CAPICOM ，但这是部分（不支持 PKCS#11）、特定于 Windows 且已过时的解决方案。更好的选择是使用 Java 编写的浏览器小程序来执行签名（见下文）。

我们的 SecureBlackbox 产品有一个分布式签名插件，它完全符合您的描述（目前支持 PHP、Java、ASP.NET 和编译模块）。您可以看到该插件如何工作的方案：

![在此处输入图像描述](../Images/aa17b18b3757873d9766e7773772604c.png)

在我们的产品中，我们提供了预构建的浏览器模块——Java Applet、ActiveX 控件和 Flash 小程序，但 Java 小程序在大多数情况下就足够了，因为它可以访问 Windows 上的 PKCS#11 存储和 Windows 证书存储。对于不支持 Java 小程序的浏览器，SecureBlackbox 允许通过 Java Web Start 将小程序用作外部“应用程序”。

您可能需要重新创建这个完整的方案，但是在服务器上计算哈希并将其传递给客户端进行签名然后将签名嵌入回文档中是一个很大的技巧。

将完整的文档传输到客户端并拥有一个 Java 小程序可能会更容易，该小程序将使用我们的 SecureBlackbox 的 iText 或 Java 版本对该文档进行签名，然后将文档上传回服务器。

# variables - PowerShell：比较 2 个变量

> ID：10656105
> 
> 赞同：0
> 
> 时间：2012-05-18T16:09:50.920
> 
> 标签：variables, powershell, comparison

谁能告诉我为什么下面的代码不起作用？我想最终得到与 F: 和 G: 匹配的驱动器

我知道它很简单，但无法弄清楚。欢迎快速解释。谢谢

```
$USBDrives =$null 
$WMIUSBDrives="E:","F:","G:"
$SystemDrives="D:","F:","G:"
$USBDrives = $SystemDrives | Where {$_ -contains $WMIUSBDrives}
$USBDrives 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:18:38.673

您实际上应该以其他方式使用... :)

```
$USBDrives = $SystemDrives | Where {$WMIUSBDrives -contains $_}
$USBDrives 
```

以您想要的方式工作的运算符是 -in，它是在 v3 中添加的。HTH 巴特克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:22:09.157

为了使上述方法起作用，我认为 $WMIUSBDrives 和 $SystemDrives 必须匹配。

试试这个：

```
$USBDrives =$null 
$WMIUSBDrives="E:","F:","G:"
$SystemDrives="D:","F:","G:"
foreach($drive in $WMIUSBDrives)
{
    if($SystemDrives  -contains $drive){$USBDrives += $drive}
}
$USBDrives 
```

# core-data - 核心数据优化获取请求

> ID：10656106
> 
> 赞同：0
> 
> 时间：2012-05-18T16:09:54.243
> 
> 标签：core-data

这个 Fetch Request 在 iPhone 上执行大约需要 10 秒。目标是从每个类别中获取 1 个随机缩略图。设置 fetchlimit = 1 大多数时候返回相同的缩略图，所以我必须从每个类别中获取所有照片。

有任何想法吗 ？

```
 [categoriesArray enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop) {

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Photos"];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"place.subcategory.category == %@", object];
    [request setPredicate:predicate];
    NSError *error;
    NSArray *photosManagedObjectsArray = [managedObjectContext executeFetchRequest:request error:&error];

    NSUInteger randomIndex = arc4random() % [photosManagedObjectsArray count];

    NSManagedObject *photoObject = [photosManagedObjectsArray objectAtIndex:randomIndex];
    UIImage *photoImage = [UIImage imageWithData:[photoObject valueForKey:@"thumbnail"]];   
    UIImage *resizedImage = [photoImage imageCroppedToFitSize:CGSizeMake(IMAGE_WIDTH, IMAGE_HEIGHT)];
    [imagesArray addObject:resizedImage];
    [objectsArray addObject:photoObject];

}]; 
```

非常感谢！账单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:18:25.660

您不需要将所有对象拉入数组。只是改变

```
NSArray *photosManagedObjectsArray = [managedObjectContext executeFetchRequest:request error:&error];`
NSUInteger randomIndex = arc4random() % [photosManagedObjectsArray count]; 
```

对此

```
NSUInteger count = [managedObjectContext countForFetchRequest:request error:&error];
NSUInteger randomIndex = arc4random() % count; 
```

现在使用`fetchOffset`来抓取您需要的单个对象。

```
[request setFetchOffset:randomIndex];
[request setFetchLimit:1]; 
```

# c# - 即使使用 CriticalFinalizerObject，在未处理的异常后也不会调用终结器

> ID：10656107
> 
> 赞同：7
> 
> 时间：2012-05-18T16:09:54.463
> 
> 标签：c#, .net, finalizer

我有这样的测试代码：

```
public class A : CriticalFinalizerObject 
{
    ~A()
    {
        File.WriteAllText("c:\\1.txt", "1z1z1");
    }
}

class Program
{
    static void Main(string[] args)
    {
        A a = new A();
        throw new Exception();
    }
} 
```

首先，我尝试在不从 CriticalFinalizerObject 派生 A 的情况下运行它。此程序结束后未调用终结器。这让我感到惊讶，因为我认为它更具确定性但还可以。然后我阅读了关于确保调用其终结器的 CriticalFinalizerObject。我从中得出 A。你猜怎么着。它仍然没有被执行。我在做什么/理解错误？

（请不要写关于垃圾收集器是非确定性的明显内容，我知道。程序结束时并非如此，我想我可以在一个很好的未处理的*托管*异常之后安全地清理。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T17:00:53.003

首先，让我们读一下[MSDN中的](http://msdn.microsoft.com/ru-ru/library/system.runtime.constrainedexecution.criticalfinalizerobject.aspx)**CriticalFinalizerObject**，我们可以读到：

> 在从 CriticalFinalizerObject 类派生的类中，公共语言运行时 (CLR) 保证所有关键的终结代码都将有机会执行，前提是终结器遵循 CER 的规则，即使在 CLR 强制**卸载**应用程序域的情况下也是如此或中止线程。

这里的主要词是**UNLOAD**。

其次，让我们再次阅读[MSDN](http://msdn.microsoft.com/en-us/library/ms228965.aspx)，这次是关于托管线程中的异常：

> 如果这些异常在主线程中或在从非托管代码进入运行时的线程中未处理，它们将正常进行，从而导致应用程序**终止**。

主要词是**TERMINATION**。

因此，当主线程中存在未处理的异常时 - 应用程序终止，但 CriticalFinalizerObject 仅有助于卸载域。

例如，CriticalFinalizerObject 可以在这种情况下提供帮助：

```
// Create an Application Domain:
AppDomain newDomain = AppDomain.CreateDomain("NewApplicationDomain");

// Load and execute an assembly:
newDomain.ExecuteAssembly(@"YouNetApp.exe");

//Unload of loaded domain
AppDomain.Unload(newDomain); 
```

在这种情况下，域被卸载，CriticalFinalizerObject 向您保证，您的终结器将被调用。

在您终止应用程序的情况下，您可以尝试订阅

```
AppDomain.CurrentDomain.UnhandledException 
```

并手动完成您的对象。

**UPD：** Jeffrey Richter 在他的“通过 C# 的 CLR”一书中写了关于 CriticalFinalizerObject 的文章，它适用于将代码发送到 SQLServer 的情况，例如可以将 C# 作为过程运行。在这种情况下，如果 SQLServer 将卸载库的域，CriticalFinalizerObject 可以帮助您清理对象。此外，CriticalFinalizerObject 适用于您需要在对象的终结器中调用另一个对象的方法的情况，因为 CriticalFinalizerObject 向您保证，它将在所有非 CriticalFinalizerObject 对象的终结器之后调用它的终结器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:14:07.033

好的。写了一个简单的测试。如果我在创建 A 对象的构造函数中有异常，确实无法使终结器工作，但是当我创建 A 对象时，不是在其他类的构造函数中而是在其他方法中，然后抛出异常它起作用了。

所以我怀疑，如果构造函数从未完成构造类，并且它的创建终止，则永远不会创建对象，清除堆栈，从堆中删除对象而没有完成，就像它们从未发生过一样。

这是我的猜测。但是为了解决这个问题，我会在 try-catch-finally 中包装构建对象的关键构造代码，并显式调用清理代码。

示例：这行得通

```
 public Form1()
       {
           InitializeComponent();
       }
       protected override void OnLoad(EventArgs e)
       {
           base.OnLoad(e);
           var a = new A();
           throw new Exception();
       }
   } 
```

这并没有

```
public Form1()
       {
           InitializeComponent();
           var a = new A();
           throw new Exception();
       }

   } 
```

# c# - How do I make a report that constantly updates when I set values?

> ID：10656111
> 
> 赞同：1
> 
> 时间：2012-05-18T16:10:14.900
> 
> 标签：c#, wpf, winforms, report

Ok so I don't really know if this exists with some package somewhere, or if I need to roll my own (which I don't really want to do). Basically what I am looking for is a reporting type system that would almost reflect Task Manager, the best example I could think of.

I have a WCF service that communicates business logic back to subscribed clients when data changes. So I would like to have that report updated whenever the event hits the client.

I have created a new .rdlc and started building the thing but it seems very cumbersome with what I am actually trying to accomplish and heavy. Are the basic reports my only options?

**Edit**

My question might be a little misleading. I am looking for an alternative if it exists for reporting that can update in a live fashion.

Thanks

**Edit 2**

I do not want to use the reports inside visual studio....I am looking for alternatives to reports. Sorry for misleading.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:17:57.023

If you are using wsDualHttpBinding in WCF you can send your callbacks to the client. Then your client object can fire events off that other forms or objects can subscribe to to be notified of updates.

Even if you are using traditional binding, you can still fire off events from your client object that your forms or reports can subscribe to.

**Edit:**

I'll elaborate a bit more you since you don't understand what I'm saying.

1.  You appear to be using ReportViewer since you implied .rdlc in your question. You should make that explicit, especially if it is the focus of your question.
2.  You mention that your data is delivered from a WCF service. This is an important fact when you are asking about how to update a report.
3.  You said your client has subscribed to this service. Good, we got that out of the way.
4.  Your question was "is basic reports your only option?"

Therefore my answer remains, No, you can update basic reports (or any other object) very easily using events, here's how:

Once your callback gets called (or your client hits the server if you are not using dual communication) you need to fire an event that your form containing your ReportViewer object will subscribe to. When your form receives the notice of that event, you will need to force your report to refresh itself by calling `reportViewer.RefreshReport();`

# javascript - 在动态生成的处理程序函数中访问 javascript 对象属性

> ID：10656113
> 
> 赞同：0
> 
> 时间：2012-05-18T16:10:28.080
> 
> 标签：javascript, jquery, html

我有以下 Javascript 文件，其中一些 html 是动态生成的：

```
(function ($){

NunoEstradaViwer: {
  settings: {
  total: 0,
  format: "",
  num: 0;
  },
  init: function (el, options) {
  if (!el.length) { return false; }
    this.options = $.extend({}, this.settings, options);
    this.itemIndex =0;
    this.container = el;

    this.total = this.options.total;
    this.format = ".svg";
    this.num = 0;
    this.generateHtml(el);
  },
  generateHtml: function(container){
        var bnext = document.createElement('input');
        bnext.setAttribute("type", "button");
        bnext.setAttribute("id", "bnext");
        bnext.onclick = this.nextImage();
        bnext.setAttribute("value", "Next");
        container.appendChild(bnext);

  },
  nextImage: function(){
     this.num++;

 }
 }); 
```

我想做的是访问函数内部的`NunoEstradaViwer`属性，而是 this 对象指向按钮。`num``nextImage``bnext`

你知道我该怎么办吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:03:18.133

@rahen，我尝试了您的建议，但不幸的是没有一个奏效。我发现对我有用的是一个涉及 jquery 的解决方案。我做了以下事情：

```
generateHtml: function(container){
    var bnext = document.createElement('input');
    bnext.setAttribute("type", "button");
    bnext.setAttribute("id", "bnext");
    bnext.setAttribute("value", "Next");
    container.appendChild(bnext);

$("#bnext").bind('click',{viewer: this}, function(event) {
            event.data.viewer.nextImage();
        });

},
nextImage: function(){
 this.num++;
} 
```

这样我就可以访问 num 的值，并为 NunoEstradaViwer 更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:40:02.770

检查[链接](http://jsfiddle.net/hd2Dt/1/)

```
bnext.onclick = this.nextImage; // not bnext.onclick = this.nextImage(); 
```

另一件事是

```
NunoEstradaViwer.num++ ;  // instead of this.num++ 
```

# php - 使我的函数在当前范围内设置变量

> ID：10656118
> 
> 赞同：3
> 
> 时间：2012-05-18T16:10:46.637
> 
> 标签：php, variables

可以做到吗？

```
function my_function(&$array){

  // processing $array here

  extract($array); // create variables but not here
}

function B(){

  $some_array = array('var1' => 23423, 'var2' => 'foo');

  my_function($some_array);

  // here I want to have $var, $var2 (what extract produced in my function)
} 
```

例如 parse_str() 能够做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:15:45.787

**编辑**在我的第一个答案中没有考虑。

答案是不; 你可以`extract`在你的函数中移动调用`B`，就是这样。

顺便说一句，有了你问题的更多背景，我可以改进我的答案:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:30:04.047

我想如果你想制作一个单线，你需要返回一个值。

```
function my_function($array){

  // processing $array here

  // Return the processed array
  return $array;
}

function B(){

  $some_array = array('var1' => 23423, 'var2' => 'foo');

  // If you don't pass by reference, this works
  extract(my_function($some_array));
} 
```

PHP 不允许您使用另一个函数的作用域，这是一件好事。如果你在一个实例化的对象中，你可以`$this->`用来处理一个属性，但我想你已经知道了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:16:24.273

这有效，但它不会提取到它被调用的上下文中，只是全局...

```
function my_function($array){
  foreach($array as $key => $value) {
      global $$key;
      $$key = $value;
  }
} 
```

[键盘](http://codepad.org/uatB94tU)。

但是，我不会推荐它。将一堆东西解压到全局范围内很少（但也不是完全没有）是个好主意。

至于将函数调用的范围提取到范围内，我认为这是不可能的，或者至少不值得做。

# javascript - Javascript 从事件处理程序中获取对父对象/类的引用

> ID：10656119
> 
> 赞同：10
> 
> 时间：2012-05-18T16:10:47.093
> 
> 标签：javascript, jquery, class, oop, jquery-events

我有一个名为 Foo 的类（或包含函数的对象；我听说没有 Javascript 类之类的东西），它带有一个附加到单击事件的事件处理程序。当调用事件处理程序时，我想修改我的类 Foo 的属性。通常，我会使用`this`关键字，但在事件处理程序中，`this`引用设置为对 html 元素的引用。这是我的代码：

```
function Foo() {

    this.num=0;
    $('element').click(this.eventHandler);// jQuery to attach an onclick event to my element.

    this.eventHandler=function() {
        this.num++;// This doesn't work.
        // Normally, "this" would refer to my instance of Foo,
        // but as an event handler, "this" refers to the html element.
    }
} 
```

所以我的问题是：如何将我的 Foo 实例引用到我的事件处理程序中，以便我可以修改它的属性（如`num`）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T16:12:07.003

```
function Foo() {
    var _self = this;
    this.num=0;

    $('element').click(this.eventHandler);// jQuery to attach an onclick event to my element.

    this.eventHandler=function() {
        _self.num++;
    }
} 
```

使用`_self = this`在外部范围中定义的引用

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-18T16:15:54.723

您需要绑定函数的上下文；否则`this`将是全局对象：

```
$('element').click($.proxy(this.eventHandler, this)); 
```

在现代浏览器中，您还可以使用`Function.prototype.bind`：

```
$('element').click(this.eventHandler.bind(this)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-16T11:09:42.667

```
function Foo() {
   this.num=0;
   $(document).on('click', 'element', this, this.eventHandler);
   this.eventHandler=function(e) {
      var _this = e.data; 
      _this.num++;
   }
} 
```

1) 使用 JQuery on() 方法附加事件监听器。2) 使用引用 _this 来访问父类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:12:15.303

您可以`this`在构造函数中存储一个引用，您可以在事件处理程序中访问该引用。

```
function Foo() {

    this.num=0;
    $('element').click(this.eventHandler);// jQuery to attach an onclick event to my element.

    var that = this;
    this.eventHandler=function() {
        that.num++;// This doesn't work.
    }
} 
```

# twitter - 限制 twitter.lookupUser 方法的结果？

> ID：10656122
> 
> 赞同：1
> 
> 时间：2012-05-18T16:10:51.187
> 
> 标签：twitter, twitter4j

在 twitter4j 库中：有没有办法减少 twitter.lookupUser 方法的结果数量？即只返回某些字段，甚至只返回不为空的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:16:55.513

其实我已经找到答案了。因此，对于正在寻找相同事物的人：

如果您使用 lookupUser 方法，则会返回用户列表。因此，您可以使用该列表中的所有 User 方法。例如 getLocation，它只返回列表中用户的位置。

# c# - 正则表达式 - 删除跨越多个换行符的 HTML 注释

> ID：10656123
> 
> 赞同：5
> 
> 时间：2012-05-18T16:10:57.040
> 
> 标签：c#, regex, vb.net, replace

我正在使用这个脚本：

[http://www.codeproject.com/Articles/11902/Convert-HTML-to-Plain-Text](http://www.codeproject.com/Articles/11902/Convert-HTML-to-Plain-Text)

将某些 Outlook HTML 转换为纯文本。

它几乎可以工作，唯一留下的是`<!-- -->`除了`<style>`标签（已删除）之外，outlook 在 html 注释标签中放置的 CSS

**这是原文：**

```
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="Generator" content="Microsoft Word 14 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
    {font-family:Calibri;
    panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin:0cm;
    margin-bottom:.0001pt;
    font-size:11.0pt;
    font-family:"Calibri","sans-serif";
    mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
    {mso-style-priority:99;
    color:blue;
    text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
    {mso-style-priority:99;
    color:purple;
    text-decoration:underline;}
span.EmailStyle17
    {mso-style-type:personal-compose;
    font-family:"Calibri","sans-serif";
    color:windowtext;}
.MsoChpDefault
    {mso-style-type:export-only;
    font-family:"Calibri","sans-serif";
    mso-fareast-language:EN-US;}
@page WordSection1
    {size:612.0pt 792.0pt;
    margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
    {page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang="EN-GB" link="blue" vlink="purple">
<div class="WordSection1">
<p class="MsoNormal">tesst<o:p></o:p></p>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
<p class="MsoNormal"><b><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:dimgray;mso-fareast-language:EN-GB">JOE BLOGS</span></b><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:dimgray;mso-fareast-language:EN-GB">
</div>
</body>
</html> 
```

**这是生成的文本：（**注意 HTML 注释没有被删除）

```
<!--
/* Font Definitions */
@font-face
    {font-family:Calibri;
    panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin:0cm;
    margin-bottom:.0001pt;
    font-size:11.0pt;
    font-family:"Calibri","sans-serif";
    mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
    {mso-style-priority:99;
    color:blue;
    text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
    {mso-style-priority:99;
    color:purple;
    text-decoration:underline;}
span.EmailStyle17
    {mso-style-type:personal-compose;
    font-family:"Calibri","sans-serif";
    color:windowtext;}
.MsoChpDefault
    {mso-style-type:export-only;
    font-family:"Calibri","sans-serif";
    mso-fareast-language:EN-US;}
@page WordSection1
    {size:612.0pt 792.0pt;
    margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
    {page:WordSection1;}
-->

tesst
&nbsp;
JOE BLOGS 
```

我已经尝试使用附加替换来调整 StripHTML() 函数 - 但这些也不起作用。

```
result = System.Text.RegularExpressions.Regex.Replace(result, "(<!--).*?(-->)", String.Empty, System.Text.RegularExpressions.RegexOptions.IgnoreCase)
result = System.Text.RegularExpressions.Regex.Replace(result, "<!--*-->", String.Empty, System.Text.RegularExpressions.RegexOptions.IgnoreCase) 
```

请帮忙 - 这是一个 2 分钟的工作，我从午餐开始就一直*坚持*

干杯

**编辑1**：也尝试了以下 - 仍然没有乐趣

```
result = System.Text.RegularExpressions.Regex.Replace(result, "<!--.*-->", String.Empty, System.Text.RegularExpressions.RegexOptions.IgnoreCase)
result = System.Text.RegularExpressions.Regex.Replace(result, "<!--.*?-->", String.Empty, System.Text.RegularExpressions.RegexOptions.IgnoreCase) 
```

**编辑 2：**我注意到这个问题得到了很多意见，任何阅读这个问题的人都应该三思而后行，而不是我建议使用 Lynx（基于开源文本的浏览器）将 HTML 转换为纯文本，我问了一个类似的问题[在这里](https://stackoverflow.com/questions/13839225/handle-large-amounts-of-output-from-p-waitforexit-with-redirectstandardoutput)，我根据应该让您从 .net 应用程序中开始使用 lynx.exe 的答案在编辑中提供示例代码。这是我们最终使用的方法，从那以后没有任何问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T16:12:36.390

您的第二个正则表达式有三个原因：

*   你需要用来`.`匹配任何字符。
*   `*`是贪婪的。你想`*?`懒惰地匹配。
*   你需要`RegexOptions.Singleline`.

尝试这个：

```
result = Regex.Replace(result, "<!--.*?-->", "", RegexOptions.Singleline); 
```

我强烈建议您不要使用正则表达式来解析 HTML。如果您改为使用[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex) ，您将为自己省去一个痛苦的世界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T10:12:41.120

关于为此目的使用 HTML Agility Pack，在 h​​tmlagilitypack-xxxx\Release\1_4_0\Html2Txt 文件夹下的源下载中有一个名为 Html2Txt 的项目。

HtmlConvert.cs 包含将 HTML 转换为文本和处理 HTML 注释等所需的所有功能。

# zend-view - 在控制器构造器中设置一些视图变量

> ID：10656124
> 
> 赞同：0
> 
> 时间：2012-05-18T16:11:05.063
> 
> 标签：zend-view, zend-framework2, zend-framework-mvc

我的 zf2 控制器中有以下代码：

```
<?php
namespace Accounting\Controller;

use Zend\Mvc\Controller\ActionController,
Zend\View\Model\ViewModel,
Accounting\Model,
Zend\Paginator,
Accounting\Scripts\CMSTranslator;

class AdminController extends ActionController {

protected $translator;

public function setTranslator(CMSTranslator $translator) {
    $this->translator = $translator;
    return $this;
}

public function __construct(\Doctrine\ORM\EntityManager $em,CMSTranslator $translator) {
    $this->em = $em;

    //$this->translator = new \Zend\Translator\Translator('ArrayAdapter', __DIR__ . '/../../../lang/lang-fa.php', 'fa');
    $this->translator = $translator;

    \Zend\Registry::set('tr', $this->translator);
    // now you can use the EntityManager!
} 
```

如您所见，我正在使用 zend\translator 模块。
我想将它添加到我的控制器构造函数中的视图中。我已经尝试过：

```
return ViewModel(array('tr'=>$translator)); 
```

但这不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:51:00.213

添加一个私有类变量`private $viewModel`。然后在您的构造函数中创建 ViewModel，添加任何变量：

```
$this->viewModel = new ViewModel();
$this->viewModel->tr = $translator; 
```

然后`$this->viewModel`从您的操作函数返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:08:20.497

最终解决方案 module.config.php

```
'Accounting\Controller\AccountingController' => array(
            'parameters' => array(
                'em' => 'doctrine_em',
                'translator' => 'Accounting\Scripts\CMSTranslator',
            ),
        ),
        'Zend\View\Helper\Translator' => array(
            'parameters' => array(
                'translator' => 'Accounting\Scripts\CMSTranslator'
            )
        ),
        'Accounting\Scripts\CMSTranslator' => array(
            'parameters' => array(
                'options' => array('adapter' => 'ArrayAdapter', 'content' => __DIR__ . '/../lang/lang-fa.php', 'local' => 'fa')
            )
        ),
        'translateAdapter' => array(
            'parameters' => array(
                'options' => array('adapter' => 'ArrayAdapter', 'content' => __DIR__ . '/../lang/lang-fa.php', 'local' => 'fa')
            )
        ), 
```

# cocoa - 当我尝试遵循别名时，枚举目录会给我一个错误

> ID：10656125
> 
> 赞同：1
> 
> 时间：2012-05-18T16:11:11.820
> 
> 标签：cocoa, nsfilemanager

我希望我的用户能够将文件夹放入我的 OSX 应用程序中。然后我查看目录及其子目录中的所有文件。这很好用，但当目录中有别名时就不行了。别名已正确解析（感谢 Matt Gallagher，Apple 真丢脸），但枚举器不允许我枚举目标目录（它只是不返回任何元素和下面的错误）。这是一些示例代码：

```
-(void)enumDirAtPath:(NSString*)path  {
    NSString* file_enum = nil;
    NSDirectoryEnumerator* enumerator = [[NSFileManager defaultManager] enumeratorAtPath:path];
    while (file_enum = [enumerator nextObject])
    {
        NSString* file =  [[NSString stringWithFormat:@"%@/%@",path,file_enum] stringByResolvingSymlinksAndAliases];

        BOOL isDirectory = NO;
        [[NSFileManager defaultManager] fileExistsAtPath:file isDirectory: &isDirectory];
        if (!isDirectory) {
            NSLog(@"Adding file: %@",file);
        } else {
            NSLog(@"Found dir: %@",file);
           [self enumDirAtPath: file];
        }
   }
} 
```

相同的代码`enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:`给了我这个错误：

> error: Error Domain=NSCocoaErrorDomain Code=257 "无法打开文件“Mus​​ik”，因为您没有查看权限。" UserInfo=0x1094cf670 {NSURL=file://localhost/Users/david/Desktop/Musik, NSFilePath=/Users/david/Desktop/Musik, NSUnderlyingError=0x1094d43f0 "操作无法完成。操作不允许"}

即使我只是 dispatch_async 递归调用它也不会让我这样做。有什么方法可以遍历目录并获取所有内容吗？

注意：我完全清楚这可能会导致无限循环。这段代码只是为了说明问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:42:15.840

我非常确定错误消息中的答案就在那里：

> 无法打开文件“Mus​​ik”，因为您没有查看它的权限。

在 Finder 应用程序中显示别名的目的地，并通过“获取信息”或`ls -l@`在终端中检查其权限——我敢打赌，您的用户帐户`david`没有被授予以下权限之一：

*   `read`
*   `execute`
*   `list`

最后一个通常在命令行上**不**可见，除非与显式`deny`-access-control-entry 结合使用。

# c# - EWS：访问约会重复模式

> ID：10656136
> 
> 赞同：1
> 
> 时间：2012-05-18T16:11:42.693
> 
> 标签：c#, exchangewebservices

我正在尝试在下面的代码中获取与约会相关的重复模式。当我调试代码并在 Locals 窗口中展开 microsoftAppointment.Recurrence 属性时，我可以看到一个名为 [Microsoft.Exchange.WebServices.Data.Recurrence.WeeklyPattern] 的嵌套类，其中包含我需要的信息，但我无法弄清楚如何在我的代码中访问这些信息。显然在内存中，我只是不明白为什么在运行时无法在代码中读取它。我试过 FindAppointments ，但它只返回 Recurrence 为空。

```
FindItemsResults<Item> findResults = exchangeService.FindItems(WellKnownFolderName.Calendar, new ItemView(folderCount));

exchangeService.LoadPropertiesForItems(findResults.Items, new PropertySet(AppointmentSchema.Subject, AppointmentSchema.Location, AppointmentSchema.Body, AppointmentSchema.Start, AppointmentSchema.End, AppointmentSchema.IsAllDayEvent, AppointmentSchema.Body, AppointmentSchema.IsRecurring, AppointmentSchema.Recurrence));

foreach (var v in findResults.Items)
{
    Microsoft.Exchange.WebServices.Data.Appointment microsoftAppointment = v as Microsoft.Exchange.WebServices.Data.Appointment;

    if (microsoftAppointment.IsRecurring)
    {
    ...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:09:24.083

以下演员表最终为我工作。您可以跳过间隔模式步骤，但在那之后我做了一个切换来查找类型（每周、每天等），这样我就可以正确地转换间隔模式。

```
Microsoft.Exchange.WebServices.Data.Recurrence.IntervalPattern pattern = (Microsoft.Exchange.WebServices.Data.Recurrence.IntervalPattern)microsoftAppointment.Recurrence;
weeklyPattern = (Microsoft.Exchange.WebServices.Data.Recurrence.WeeklyPattern) pattern; 
```

# ruby - Ruby yard doc没有显示任何文件

> ID：10656142
> 
> 赞同：2
> 
> 时间：2012-05-18T16:12:02.777
> 
> 标签：ruby, gem, rdoc, yard

这是我的设置：

*   红宝石 1.9.2 p290
*   码 0.8.1

文件夹结构不是宝石，只是简单的旧 Ruby 代码：

```
.
├── classes
│   ├── crawl.rb
│   └── page.rb
└── run.rb 
```

问题是 yard 没有看到任何文件。

`yard doc`产生这个输出：

```
 Files:           0
 Modules:         0 (    0 undocumented)
 Classes:         0 (    0 undocumented)
 Constants:       0 (    0 undocumented)
 Methods:         0 (    0 undocumented)
 0.00% documented 
```

任何想法为什么它看不到我的任何文件，或者不是

* * *

编辑（附加信息）：

Yard 确实有权创建文件。

运行`yard doc`命令后，我的目录显示 yard 文件：

```
.       ..      .yardoc classes doc     run.rb 
```

* * *

编辑（回复关于 rdoc 的评论）

一旦我删除了 yard 创建的 doc 文件夹（rdoc 抱怨它）`rm -rf doc`，rdoc 就会生成文档并提供此输出

```
 Files:       7

 Classes:     6 ( 4 undocumented)
 Modules:     0 ( 0 undocumented)
 Constants:   2 ( 2 undocumented)
 Attributes: 18 (18 undocumented)
 Methods:    24 (20 undocumented)

 Total:      50 (44 undocumented)
  12.00% documented 
```

* * *

编辑（附加信息）

Yard 不适用于我的其他 ruby​​ 版本，包括 MRI 1.8.7 和 jRuby 1.6.4。它的行为方式与上述相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T04:18:57.897

Yard 不会自动记录目录结构中的所有 ruby​​ 文件。它在目录中查找文件`./lib`。如果要记录其他人，则必须在命令或 .yardopts 文件中指定

例子 `yard classes/*.rb *.rb`

# android - 动态更改要使用的资源文件的名称？

> ID：10656146
> 
> 赞同：1
> 
> 时间：2012-05-18T16:12:10.653
> 
> 标签：android, android-ui

可以执行以下操作：

```
if (colorScheme == 1)
    button.setBackgroundResource(R.drawable.button + "_1") 
```

为了使用 R.drawable.button_1 作为配色方案 1 中此按钮的资源，如果 drawable 文件夹中有名为 button_1.png、button_2.png、button_3.png 的文件。（根据所使用的配色方案为同一 UI 元素动态使用不同的资源文件？）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:33:35.357

我使用 getIdentifier() 做了一些类似的事情：

```
int resId = context.getResources().getIdentifier("button_1","drawable",context.getPackageName());
button.setBackgroundResource(resId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:56:22.483

为了使它是动态的，将需要一些代码。您可以在 xml 中设置布局，如下所示：

```
<Button 
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

然后在您的代码中引用它，如下所示：

```
int resId = context.getResources().getIdentifier("button_1","drawable",context.getPackageName());
Button button = (Button view.findViewById(R.id.button1);
button.setBackgroundResource(resId); 
```

我没有测试过这个，但这应该给你的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:15:19.467

放入`R.drawable.button_n`一个数组`int res[]`，然后调用它们`button.setBackgroundResource(res[i])`

# django - 即使在我关闭我的 ssh 会话后，如何保持我的 Django 服务器运行？

> ID：10656147
> 
> 赞同：24
> 
> 时间：2012-05-18T16:12:14.533
> 
> 标签：django, server-administration

我想出了如何通过`sudo python /home/david/myproject/manage.py runserver 68.164.125.221:80`. 但是，在我退出终端后，服务器停止运行。

我试图在后台运行这个进程，但是服务器在我执行后很快就关闭了`sudo python /home/david/myproject/manage.py runserver 68.164.125.221:80 &`。

即使在终端中退出 ssh 会话后，如何保持 Django 应用程序运行？

PS - 对不起，如果这个问题让你觉得很初级。当前端 javascript 程序员必须以极快的速度转变为服务器管理员时，就会出现这种愚蠢的情况。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-18T16:19:24.523

满足[屏幕](http://www.gnu.org/software/screen/)。

通过ssh连接，启动画面。这会在 ssh 提供的模拟器之上打开一个虚拟控制台模拟器。在那里启动你的服务器。

然后按 Ctrl-a，然后按 d。这将分离屏幕会话，使其在后台运行。

要 [R] 附加到它，请使用 screen -r。

如果未安装 screen 并且您无法安装它，您也可以通过在命令中添加 & 来在后台启动应用程序，就像您尝试的那样。但是你不应该关闭终端窗口；只需断开连接，使用 bash 命令退出或 Ctrl-d。

screen 的优点是您仍然可以从服务器读取输出，以防出现错误或任何情况。

Screen 是一个非常强大的工具，具有更多的命令。您可以使用 Ctrl-a 添加一个新的虚拟窗口，然后使用 c (for Create) ；使用 Ctrl-a 切换窗口，然后使用 n（下一个）或 p（上一个），...

但是您需要安装它才能使用它。由于您似乎具有 root 访问权限，因此这应该不是问题。

编辑：[tmux](https://tmux.github.io/)是同一用例的另一个很好的解决方案。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-24T11:52:11.007

用于`screen`创建一个新的虚拟窗口，并在那里运行服务器。

```
$ screen
$ python manage.py runserver 
```

您将看到 Django 服务器已开始运行。

现在按`Ctrl+A`再按`D`键以从该屏幕分离。它会说：

```
$ [detached from ###.pts-0.hostname] 
```

您现在可以安全地从终端注销，重新登录终端，在其他目录中进行其他编码，去度假，做任何您想做的事情。

* * *

要返回您已分离的屏幕，

```
$ screen -r 
```

现在要杀死 django 服务器，只需按`Ctrl+C`正常操作即可。

* * *

到`terminate`当前屏幕而不是`detaching`从此屏幕，使用`Ctrl+D`. 它会说：

```
$ [screen is terminating]
$ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-04T10:43:06.110

使用 nohup。更改您的命令如下：

```
nohup sudo python /home/david/myproject/manage.py runserver 68.164.125.221:80 & 
```

# php - 现实世界的面向对象的 PHP 应用程序

> ID：10656158
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:12:38.860
> 
> 标签：php, oop

任何人都知道使用 PHP 的面向对象应用程序的好教程/书籍/指南吗？我不是在谈论学习 OO，我知道 OO，但是我在用 Web Development 实现这个概念时遇到了一些困难。

如果我能找到一个真实世界的例子，包括 OOP、PHP、MySQL、Sessions（登录名、购物车……）等，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:16:04.690

你应该看看 PHP 框架的源代码。Zend、CodeIgnitor 等。另请阅读用法。它将让您了解 OOP Lamp 堆栈的工作原理。

# android - 在 ICS 中获取 appengine 的身份验证令牌

> ID：10656166
> 
> 赞同：0
> 
> 时间：2012-05-18T16:13:03.397
> 
> 标签：android, google-app-engine, accountmanager

我在为 Android 中的 appengine 应用程序检索身份验证令牌时遇到问题。

我正在关注文档，因为我获取了用户的 google 帐户，并尝试从帐户管理器那里获取身份验证令牌，这很好。但是，我从客户经理那里得到了一个意图，这也很好，因为这意味着需要用户输入。

当我尝试启动提示用户授予访问权限的活动 (GrantCredentialsPermissionActivity) 时，问题就开始了。它只是在创建时抛出一个空指针异常。[这里](http://code.google.com/p/android/issues/detail?id=23421)记录了一个错误。

自从我升级到 ICS 4.0.3 后才发生这种情况，我在网上发现其他人对此有问题，但我正在努力寻找解决方案。有没有其他人遇到过这个问题并找到了解决方案？我知道这个领域还有其他关于堆栈溢出的问题，但是“解决方案”并不令人满意（通常是在谈论使令牌无效，我已经这样做了）。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:57:31.033

好的，所以我想通了！我一直这样做是为了从客户经理那里获取帐户：

```
accountManager.getAccounts(); 
```

它返回了所有帐户。我有两个帐户关联的电子邮件地址相同，当我循环访问这些帐户时，我通过电子邮件而不是 gmail 匹配了一个三星帐户。我将获取帐户的调用更改为：

```
accountManager.getAccountsByType("com.google"); 
```

所以我的错，但一个烦人的发现，希望这对其他人有帮助。

# javascript - jQuery 乘 this.index

> ID：10656167
> 
> 赞同：2
> 
> 时间：2012-05-18T16:13:05.180
> 
> 标签：javascript, jquery, html, css

尝试编写一个简单的 jQuery 函数，它将对象的索引乘以 20，并将该值作为 CSS 分配给`top`对象。因此，如果有 5 个对象，顶部的顶部值为 20，第二个的值为 40，第三个的值为 60，依此类推。这就是我所拥有的：

```
$('ul.nav li').each(function(){
    var $n = $('ul.nav li').index(this);
    $(this).css('top', 20 * n );
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T16:15:39.030

`index`已由以下人员提供`$.each`：

```
$("ul.nav li").each(function(index){
  $(this).css( "top", 20 * ++index );
}); 
```

您的代码的问题是您是 creatin `$n`，但*使用* `n`的是（注意被放弃的`$`）。

您还可以使用隐式循环：

```
$("ul.nav li").css("top", function(i){
  return 20 * ++i;
}); 
```

# css - 可以将 CSS 背景 URL 传递给动态查询字符串，如果可以，如何？

> ID：10656168
> 
> 赞同：3
> 
> 时间：2012-05-18T16:13:05.353
> 
> 标签：css, background

是否可以将`url`属性传递给动态查询字符串？例如`url( ./SOME_IMAGE_GENERATOR?image=1 );`在哪里`image`变化？

我需要通过 JS 设置这个属性：

```
$( "#elem" )[ 0 ].style.background = "url( ./renders/circuit.php?circuit=" + dirY + dirX + "&dims=1|1 )"; 
```

链接`url`指向一个文件，该文件生成并返回一个图像。图像生成正确，但未用作背景。

**澄清**

我要放入的图像尚不存在。它由页面生成和返回`circuits.php`，取决于参数。

如果图像存在，背景会很好地改变。我注意到，与更改标签的`src`属性不同`img`，虽然参数由浏览器创建请求，发送和接收标头和信息，`background`但不会。

我曾考虑向`circuit.php`生成器发送请求，让他将图像保存在服务器上，然后使用`setTimeout`更改背景，但我不能依赖特定的时间来生成。

那就是问题所在。现在，你们有任何想法如何超越这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:56:51.813

# 工作示例

我已经使用 Jsfiddle 和我自己的网站上保存的图像生成脚本复制了您的场景。

如您所见，确实可以使用生成的图像动态更改背景：http: [//jsfiddle.net/DigitalBiscuits/Eh8yY/6/](http://jsfiddle.net/DigitalBiscuits/Eh8yY/6/)

# 调试你的代码

所以....你的有什么问题？首先，如果您使用的是 Firefox 或 Chrome，请使用开发人员工具检查发生了什么。确保控制台中没有显示任何 Javascript 错误。

然后我建议你检查你的 javascript 是否真的在选择元素，并且它能够改变背景（比如说静态图像）。隔离给您带来问题的代码并在一个新的空白页面中对其进行测试，有点像我在上面链接到您的 JSfiddle。

附带说明一下，您的 javascript 代码对我来说有点陌生。

代替：

> ```
> $( "#elem" )[ 0 ].style.background = ... 
> ```

尝试使用：

> ```
> document.getElementById('myImg').style.background = ... 
> ```

最后，确保您在生成图像的 php 脚本中设置了正确的标头，并且在设置标头之前没有发生任何输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:07:07.933

你在使用 jQuery 吗？这应该很容易做到。

将生成的图片 url 存储在一个变量中，然后使用 jQuery 更改 CSS 背景图片的值，如下所示：

> ```
> var imageUrl = "./renders/circuit.php?circuit=" + dirY + dirX + "&dims=1|1";
> $('#myDiv').css('background-image', 'url(' + imageUrl + ')'); 
> ```

这是一个展示这个概念的jsfiddle。单击`div`以查看通过 JS 动态更改的背景图像。 [http://jsfiddle.net/DigitalBiscuits/F3PUy/2/](http://jsfiddle.net/DigitalBiscuits/F3PUy/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:18:38.467

是的，它可以使用 CSS 将动态图像设置为背景图像。

这与您如何将动态图像用于`img`元素没有什么不同。

# mysql - 弱实体的数据库建模

> ID：10656173
> 
> 赞同：5
> 
> 时间：2012-05-18T16:13:36.317
> 
> 标签：mysql, sql, database, database-design, data-modeling

我的数据库中有 2 个表`orders`和`orderHistory`.

```
 -----------------                    -----------------------
 |  orders       |                    |  orderHistory       |
 -----------------                    -----------------------
 | orderID  (PK) |                    | historyLineID  (PK) |
 | orderDate     |                    | status              |
 | price         |                    | quantity            |
 -----------------                    ----------------------- 
```

现在一个`order`可以有多个`history lines`. 但是，a`history line`不能单独存在。我听说这被称为弱实体，因此来自的**PK**`orders`必须是table的**PK**`orderHistory`的一部分。

**问题**

1.  这真的是正确的*弱实体*关系吗？还有其他方法可以识别它们吗？
2.  我应该将表的PK**添加**`order`到表中`orderHistory`并使其成为复合主键吗？
3.  如果我决定向 中添加新记录`orderHistory`，我将如何添加新的复合键？（`orderID`可从 table 获得`orders`，但`historyLineID`应自动递增。）
4.  如果我决定将其建模为普通**的一对多**关系，**只**`orderID`添加为外键怎么办？这样做有什么坏处？
***   如果所有表都处于第 3 范式，那么在设计后期完全忽略弱实体会导致任何问题吗？**

 ****笔记**

`orderID`&都是`historyLineID`代理键。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T19:29:54.353

一个实体不是弱的，因为它不能独立存在，而是因为它不能独立**识别**。因此，将“引导”到弱实体的关系称为“识别”关系。在实践中，这意味着父主键被迁移到子 PK 的（通常是[正确的](http://www.mathwords.com/p/proper_subset.htm)）子集（术语“弱实体”通常与主键相关定义，尽管理论上它可以适用于任何键）。

拥有一个不能独立存在但可以独立识别的实体是完全合法的——换句话说，它与非 NULL 存在非识别关系。

你要问：可以`historyLineID`单独**使用**，还是结合使用`orderID`？我怀疑是后者，这将使它成为一个弱实体。

> 这真的是正确的弱实体关系吗？

您向我们展示的并不是一个弱实体 - 父母的 PK 不会迁移到孩子的 PK 中。

> 还有其他方法可以识别它们吗？

您基本上有两个选择：

*   `orderHistory`有一个复合 PK: `{orderID, historyLineID}`，其中`orderID`是 FK。顺便说一句，这个 PK 可以被认为是“自然的”：

    ![在此处输入图像描述](../Images/d7200795a0144e82728fe131c22978b2.png)

*   `orderHistory`有一个代理 PK: `{orderHistoryID}`，而`orderID`在 PK 之外。不过，您仍然需要备用密钥`{orderID, historyLineID}`：

    ![在此处输入图像描述](../Images/69c7abb7692f9cf47fb250948ec5e310.png)

> 我应该将表顺序的PK添加到表orderHistory并使其成为复合主键吗？

是的，这是上面描述的第一个选项。除非您自己有孩子关系，否则`orderHistory`这也是最好的解决方案。如果`orderHistory`确实有孩子，那么这可能是也可能不是最好的解决方案，这取决于几个因素。

> 如果我决定将其建模为普通的一对多关系，其中 orderID 被添加为外键怎么办？这样做有什么坏处？

这不是非此即彼。一个字段既可以是 FK，也可以是（主或备用）键的一部分，如上所示。

> 如果所有表都处于第 3 范式，那么在设计后期完全忽略弱实体会导致任何问题吗？

除非您正确指定密钥，否则您将无法达到 3NF，并且如果不考虑哪些实体可以独立识别，哪些不能独立识别，您将无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:34:54.090

1.  由于依赖，它是一种弱实体关系，但本质上是优柔寡断的一个例子。一个订单可能有一对多历史记录行，但每个历史记录行必须有一个 orderID，对吗？

这听起来像是一种可选-强制关系。因此，您的 orderId 在 orderHistory 中具有“可选”属性... 2\. 您可以通过将主键设置为 orderID 和 historyLineID 3 的组合来部分解决问题。您必须在 orderID 表上建立一个内卷关系。因此您必须重新加入 order.orderID，然后创建新的 historyLineID，否则您无法在尚不存在的东西上创建。4.这是应该的方式。对于将来编写脚本的人，可能还有您自己，这种方式更容易理解。使用外键创建具有多个historyLineID（子）的orderID（父），因为订单可以有多个订单行，这种方法可能是最好的。

LINK：[在此处输入链接描述](http://www.devarticles.com/c/a/Development-Cycles/Entity-Relationship-Modeling/9/)**

# arrays - 在 Delphi 中使用 SetLength() 时，释放该内存的正确方法是什么？

> ID：10656177
> 
> 赞同：14
> 
> 时间：2012-05-18T16:13:50.423
> 
> 标签：arrays, delphi

我最近正在查看一些使用 SetLength 为字节数组分配内存的代码，但我没有看到任何释放该内存空间的逻辑。我已经读过，对于一个字节数组，您应该将值设置为 nil 或使用 Finalize？

处理此问题的最佳方法是什么...根据我的发现，它建议如下...

```
var
  x: array of byte;
begin
  SetLength(x, 30);
  // Do something here
  :
  // Release the array
  x := nil;
  Finalize(x);
end; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-18T16:15:04.477

通常，您根本不需要释放内存，因为这是在标识符（在本例中为`x`）超出范围时自动完成的。因此，代码中的最后两行完全没有意义。

但是，如果您的标识符在程序关闭之前不会超出范围，那么您可能希望手动释放与其关联的内存。特别是，如果标识符是一个大的位图图像或类似的东西，您可能想要这样做。然后你可以做`x := nil`，`SetLength(x, 0)`或类似的事情。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-18T16:19:05.347

动态数组是托管类型。这意味着当对数组的最后一个引用超出范围时，编译器将释放内存。这意味着在代码中释放数组的代码是毫无意义的。

如果需要，您可以使用以下任何等效代码行提前取消分配数组：

```
SetLength(x, 0);
Finalize(x);
x := nil; 
```

请注意，如果您对同一个数组有多个引用，那么您需要对对该数组的所有引用执行此操作。

# asp.net - 如何从我的 Web 服务器传送加密文件？

> ID：10656178
> 
> 赞同：0
> 
> 时间：2012-05-18T16:13:53.780
> 
> 标签：asp.net, web-applications, encryption

我有一个在 Windows/IIS 下运行的 Web 应用程序，其中包括一些通过 SSRS 的报告。

我希望能够呈现报告，以某种方式将其保存在 Web 或 SSRS 文件系统上，创建加密版本，并将该加密文件交付给用户。

我考虑过创建一个带有密码的 zip 文件，但不确定它的效果如何。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:36:45.500

您需要在项目中引用`http://<Server Name>/ReportServer/ReportExecution2005.asmx`. [请参阅ReportExecutionService.Render 方法](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render%28v=sql.105%29)中包含的示例，了解如何执行和呈现报告。然后，您可以从 render 方法中获取返回的字节数组，并基于它创建一个 MemoryStream。

[您可以使用System.IO.Compression 命名空间](http://msdn.microsoft.com/en-us/library/3z72378a)中的东西执行简单的压缩，如下所示：

```
public void CompressData(Stream uncompressedSourceStream, Stream compressedDestinationStream)
{
    using (DeflateStream compressionStream = new DeflateStream(compressedDestinationStream, CompressionMode.Compress))
    {
        uncompressedSourceStream.CopyTo(compressionStream);
    }
}

public void DecompressData(Stream compressedSourceStream, Stream uncompressedDestinationStream)
{
    using (DeflateStream decompressionStream = new DeflateStream(uncompressedDestinationStream, CompressionMode.Decompress))
    {
        compressedSourceStream.CopyTo(decompressionStream);
    }
}

using (FileStream sourceStream = File.OpenRead(@"C:\MyDir\MyFile.txt))
using (FileStream destinationStream = File.OpenWrite(@"C:\MyDir\MyCompressedFile.txt.cp"))
{
    CompressData(sourceStream, destinationStream)
} 
```

有关如何加密数据的信息，请参阅[AesCryptoServiceProvider 类。](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx)修改示例以加密流而不是字符串应该不难。

也可以向用户颁发证书并在此基础上执行加密/解密，但它更复杂。为此，您需要查看[System.Security.Cryptography.X509Certificates Namespace](http://msdn.microsoft.com/en-us/library/ztkw6e67)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:23:00.907

这有几个问题 - 我必须假设加密的目的是您希望能够以只有授权用户才能查看的方式分发报告。

实现此目标的最简单方法是使用登录方案，并通过 HTTPS 提供报告。这意味着只有登录的人才能下载报告，并且无法使用网络嗅探来拦截。

过去，一位客户坚称他们希望避免允许用户下载未加密的文件，因为他们可能会将（未加密的）报告转发给未经授权的用户。为了满足这个要求，我们创建了一个创建加密 ZIP 文件的 windows 服务；我们使用了一项服务，因为性能测试表明在 Web 请求的上下文中创建 ZIP 会产生严重的可伸缩性问题。

这个方案的主要问题是分发解密密钥；确保每个人都有正确的报告密钥是背后的巨大痛苦。

它也没有阻止用户解密 ZIP 文件并通过电子邮件发送未加密的报告——但这显然违反了 IT 政策，这对于未加密的报告来说更难做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:23:10.233

也许是 7-zip 或 TrueCrypt？

然而，两者都需要安装额外的软件。我真的不确定 ZIP 文件密码保护有多强，所以如果不做一些研究，我会犹豫走这条路。

据我了解，TrueCrypt 非常安全。

# asp.net-mvc - 在一个 mvc 应用程序中使用两个配置文件提供程序

> ID：10656183
> 
> 赞同：0
> 
> 时间：2012-05-18T16:14:13.333
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership, asp.net-profiles

我有两个 MVC 应用程序。说公共和私人应用程序。我希望用户能够在公共应用程序上注册，并且管理员可以在私人应用程序上验证和编辑和..他们。

私人网站有自己的会员/角色和个人资料提供者，效果很好。

公共网站有会员/角色和个人资料提供者，我想在私人网站中使用这些提供者，这样我就可以更改私人网站上公共用户的状态。

我在私有应用程序中与公共提供者合作时遇到了几个问题。

有没有关于如何做到这一点的样本、信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:47:07.550

共享同一个数据库就足够了。将两个项目配置为使用相同的连接字符串并使用相同的表。

# pdf - 是否存在 PDF 文件指定其编码的字段？

> ID：10656184
> 
> 赞同：32
> 
> 时间：2012-05-18T16:14:33.397
> 
> 标签：pdf, unicode, utf

我知道仅仅通过查看数据是不可能确定任何字符串形式数据的字符编码的。这不是我的问题。

我的问题是：PDF 文件中是否有按照惯例指定编码方案的字段（例如：UTF-8）？这与`<html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8">`HTML 中的内容大致相似。

非常感谢你，Blz

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T17:08:21.960

快速浏览一下[PDF 规范](https://www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)似乎表明您可以在 PDF 文件中使用不同的编码。看看第 86 页。因此，具有某种低级访问权限的 PDF 库应该能够为您提供用于字符串的编码。但是，如果您只想要文本而不关心使用的内部编码，我建议让库为您处理转换。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-03T11:22:48.363

PDF 使用“命名”字符，因为字符是名称而不是数字代码。字符“a”的名称为“a”，字符“2”的名称为“two”，欧元符号的名称为“euro”，举几个例子。PDF 定义了一些“标准”“基本”编码（命名为“WinAnsiEncoding”、“MacRomanEncoding”等等，具体记不清了），编码是字符名和字节值之间的一一对应（是的, 只有 0 到 255)。这些预定义编码的准确规范值在 PDF 规范中。所有这些编码都使用 US-ASCII 字符的 ASCII 值，但它们的高字节值不同。

PDF 文件可以通过采用“基本”编码（例如，WinAnsiEncoding）并重新定义几个字节来定义新的编码，例如，PDF 作者可以将名为“MySuperbEncoding”的新编码定义为 WinAnsiEncoding，但字节值 65 已更改表示字符“ntilde”（此定义位于 PDF 文件中），然后指定文件中的某些字符串使用编码“MySuperbEncoding”。在这种情况下，包含字节值 65-66-67 的字符串将表示字符“ñBC”而不是“ABC”。请注意，我指的是字符，与字形或字体无关。PDF 文件中的不同字符串可能使用不同的编码（这提供了一种在 PDF 文件中使用更多 tan 256 字符的方法，即使每个字符串都定义为字节序列，

因此，您的问题的答案是：PDF 文件中的字符可以很好地在内部以针对特定 PDF 文件现场制作的临时编码进行内部编码。PDF 解析器应在必要时进行适当的替换。我不知道 PDFMiner，但我很惊讶它（作为 PDF 解析器）给出了不正确的值，因为规范非常清楚必须如何解释它。可以从 PDF 文件中获取所有必要的信息，但是，正如 Mattias 所说，这可能是一个大型项目，我认为一个名为 PDFMiner 的程序应该可以完成这种工作。

# javascript - 更新到 addEventListerner 可能会导致函数的返回值不传播？

> ID：10656192
> 
> 赞同：2
> 
> 时间：2012-05-18T16:15:35.317
> 
> 标签：javascript, html, addeventlistener

我最近从经典注册升级使用

```
element.property = function 
```

使用高级注册

```
element.addEventListener( "property", function,  bool ); 
```

在函数中，当用户按下回车键时，我返回了一个 false 来禁用表单提交，如下所示：

```
tweet_input.addEventListener( "keypress", function( event )
{ 
    if( event.keyCode === 13 )
    {
       new ModelTweet().invoke(); 
       return false;
    }
}, false ); 
```

但是，这不再有效，并且每次用户按回车键时，都会提交表单。

HTML 如下所示：

```
 <form id="tweet" method="post" name="tweet">
    <div id="tweet_input_wrap">
      <input id="tweet_input" name="tweet" type="text" maxlength="40">
        <p id="tweet_label">Comment
        </p>
      </input>
    </div>
    <p id="tweet_button" href="javascript:void(0)">Share
    </p>
    <div id="tweet_response" class="response">
    </div>
    <div id="tweet_fill">
      <!--TWEET FILL 
      -->
    </div>
  </form> 
```

我在其他 3 种形式上使用此方法，效果很好。

更新到高级注册是我所做的最后一项重大更改，但由于其他 3 种表格运行良好......我不明白问题是什么。

当我将代码与其他 3 种有效的形式进行比较时，我看不出有什么不同。

I also recently updated the Model for Tweet, but is is obvious the form is submitted twice, once when I do it by grabbing the Enter Key, and once when it is sumbitted internally by an "enter key post".

Odd.

```
/**
 *ModelTweet
 */

var ModelTweet = ( function() 
{
    var ModelTweetI = function ( )
    {
        this.form_elements = document.getElementById( 'tweet' ).elements, 
        this.response_element = document.getElementById( 'tweet_response' );
        this.fill_element = document.getElementById( 'tweet_fill' );

        this.text_object = new TextValidator( this.form_elements );
        this.message_object = new Message( this.response_element );
        this.effects_object= new Effects( this.response_element );

        this.ajax_object = new AjaxRequest();
        this.shared_object = new Shared();

        this.TIME = this.shared_object.get( 'TIME' );
        this.load_on = this.shared_object.get( 'load_on' );
    };
    ModelTweetI.prototype.invoke = function( ) 
    {
        if( this.load_on === 1 )
        {
            if( !this.text_object.checkEmpty() ) 
            {
                this.message_object.display( 'empty' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( !this.text_object.checkPattern( 'tweet' ) ) 
            {
                this.message_object.display( 'tweet' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
        }
        var response_element = this.response_element;
        var fill_element = this.fill_element;
        this.ajax_object.invoke( this.ajax_object.serializeArray( this.form_elements ) + '&ajax_type=tweet_control', function( server_response_text ) { new AjaxResponse( server_response_text, 'tweet', response_element, fill_element ); } );
        var tweet_input = document.getElementById( 'tweet_input' );
            tweet_input.value='';
            tweet_input.blur();
        }
    };
    return ModelTweetI;
} ) (); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:43:34.543

The return value of the event handler does not do anything when used with `addEventListener()` so returning false is not designed to do what you are trying to do.

If you want to prevent the default behavior, then you need to call `event.preventDefault()` (and possibly `event.stopPropagation()` too) like this:

```
tweet_input.addEventListener( "keypress", function( event )
{ 
    if( event.keyCode === 13 )
    {
       new ModelTweet().invoke(); 
       event.preventDefault();
    }
}, false ); 
```

Note: this syntax doesn't work in older versions of IE that don't support `addEventListener` or `event.preventDefault()`. They have their own way of doing things with `attachEvent` and `window.event.returnValue = false;`.

# mysql - Mysql：使用变量中的案例设置变量

> ID：10656195
> 
> 赞同：3
> 
> 时间：2012-05-18T16:15:46.067
> 
> 标签：mysql

我有一个位列`NonMileage`，基于该位列，我想创建一个可以在 where 子句中使用的变量。

这是一个两部分的问题：

1.  你如何区分一个变量？下面的代码不区分@NoMileageListing
2.  然后我将@MileListingClause 设置为字符串，我可以像@MileListingClause 一样使用@MileListingClause 吗？

.

```
SET @NoMileageListing = (SELECT NonMileage FROM tbldealerships);
SELECT 
    @NoMileageListing CASE @NoMileageListing when 1 then 
        SET @MileListingClause = 'tblcargarage.miles >= 0' else 
        SET @MileListingClause = 'tblcargarage.miles != 0' end case; 
```

这是答案

```
SET @NoMileageListing = (SELECT NonMileage FROM tbldealerships);

SELECT CASE @NoMileageListing
          WHEN 1 THEN 'tblcargarage.miles >= 0'
          ELSE 'tblcargarage.miles != 0'
       END
  INTO @NoMileWhereClause;
  select @NoMileWhereClause; 
```

在这里找到： [Mysql 使用 SELECT CASE 的结果存储变量](https://stackoverflow.com/questions/7871014/mysql-storing-a-variable-with-the-result-of-an-select-case)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T13:59:39.443

我认为问题出在 when 部分。它应该是：

```
SELECT CASE @NoMileageListing
WHEN @NoMileageListing = 1 THEN 'tblcargarage.miles >= 0'
ELSE 'tblcargarage.miles != 0'
END
INTO @NoMileWhereClause;
select @NoMileWhereClause; 
```

要使用 @noMileWhereClause 创建动态查询，请参阅此处的答案： [如何在 MySQL 存储过程中使用动态 SQL](https://stackoverflow.com/questions/190776/how-to-have-dynamic-sql-in-mysql-stored-procedure)

# php - 如何测试 PHP 变量是否是特定数组的一部分？

> ID：10656203
> 
> 赞同：0
> 
> 时间：2012-05-18T16:16:04.660
> 
> 标签：php, arrays, variables

基本上我有这个：

```
<?php
    $variable = 8;
    if ( $variable == array(5,6,7) ) :
    echo '<p>'.$variable.'</p>;
    endif;
?> 
```

我可以测试一个变量是否是这样的值之一，还是我必须单独测试每个变量，例如：

```
<?php
    $variable = 8;
    if ( ( $variable == 5 ) || ( $variable == 6 ) ) :
    echo '<p>'.$variable.'</p>;
    endif;
?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:18:10.263

您可以使用[in_array](http://www.php.net/manual/en/function.in-array.php)

```
if (in_array($variable, array(5,6,7))) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:18:10.913

我想你正在寻找[`in_array()`](http://us.php.net/in_array)：

```
if(in_array($variable, array(5,6,7) )){
    // $variable is in the array!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:18:45.017

使用[`in_array`](http://php.net/manual/en/function.in-array.php)：

```
if (in_array($variable, array(5, 6, 7)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:19:06.857

为此使用[in_array](http://php.net/manual/en/function.in-array.php)函数

# android - Eclipse 显示窗口不起作用我无法在那里运行任何东西

> ID：10656206
> 
> 赞同：2
> 
> 时间：2012-05-18T16:16:08.203
> 
> 标签：android, eclipse, command-line, execute

Eclipse 显示窗口不工作我不能在那里运行任何东西。

例如，我试图在显示视图窗口中执行此操作：

```
 System.out.println("test") 
```

但是什么也没有发生，当我查看 Eclipse 文档a 和互联网时，我发现在突出显示代码行后显示窗口右上角的 j 图标应该是活动的，或者在突出显示代码后我可以右键单击并查看执行代码的选项。但没有任何工作。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:19:36.733

尝试突出显示您在显示窗口中键入的文本。一旦你这样做，你也许可以执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T05:02:46.170

这是因为`Display`仅在调试代码时使用。将 a`Breakpoint`放入代码中，当进程停在那里时，使用 Display 来执行您的代码。它必须工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:36:48.383

我假设它`Consol Window`没有在你的 Eclipse 中打开。只需按照以下步骤，

*   转到窗口菜单
*   选择显示视图
*   选择Consol（或者快捷键是Alt+Shift+QC）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T07:48:06.327

只需选择如下命令：

`System.out.println("test")`

并在突出显示的文本上按`Ctrl+U`或`right click`并选择执行。它会起作用的。

# sharepoint-2007 - 按日期对 SharePoint 文件夹内容进行排序

> ID：10656207
> 
> 赞同：1
> 
> 时间：2012-05-18T16:16:11.870
> 
> 标签：sharepoint-2007

我对 SharePoint 非常陌生。我需要做的是按日期对文件夹的内容进行排序。我们有一个自动报告列表，它实际上是一个不同报告文件夹的列表。我需要这个列表按名称排序（它是）。然而; 我需要能够对每个文件夹中的文件进行排序，以按日期排序 - 降序。我创建了一个视图，我以为我将它分配给了一个特定的文件夹，但整个自动报告列表按日期排序。

所以，我的问题是：我应该使用视图吗？而且，如果是这样，我如何将其分配给特定文件夹？而且，如果没有，我应该怎么做才能将文件设置为始终按降序排序？

另外，请注意：我不确定我们使用的 SharePoint 版本是 2007 还是 2010。最好的猜测是 2007。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:59:15.363

我的一个朋友为此找到了一个简单的解决方案。

您需要创建类型为**Date 和 Time**的网站栏，并将**今天的日期**分配给它。然后，将此站点列附加到**Document内容类型，并首先按字段****Today**，然后按**Title**进行排序视图。

Folder 内容类型没有 Today 网站栏，因此它将按标题排序。当您在文件夹中上传文档时，您将通过“今天”列进行排序设置。

# java - java sql语法错误插入

> ID：10656213
> 
> 赞同：1
> 
> 时间：2012-05-18T16:16:37.127
> 
> 标签：java, sql, insert

我在运行这个 sql 语句时遇到问题。如果我在 mysql 中运行它，它工作正常，但在 java 中我得到这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds 
  to your MySQL server version for the right syntax to use near '' at line 1 
```

数据库有一个 id(pk) 自动生成，varchar，int，varchar；

有人能帮我吗？

```
int i = statement.executeUpdate("INSERT INTO sala values('','"+ nume.getText() + "', "+ Integer.parseInt(capacitate.getText())+ ", '" + sunet.getText()+"'"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:19:11.257

*不要*只是尝试通过根据 adarshr 的回答调整 SQL 来修复此代码。您在这里有一个基本的安全问题，您应该立即*解决*。由于直接在 SQL 中包含用户数据，您很容易受到[SQL 注入攻击。](http://bobby-tables.com)

您应该使用`PreparedStatement`, 将参数声明为 SQL 中的占位符，但随后分别给出值。*具体*如何操作将取决于您的 JDBC 提供程序，但它看起来*像*这样：

```
// TODO: Fix the column names, and close the statement in a try/finally block
PreparedStatement pst = conn.prepareStatement(
    "INSERT INTO sala (nume, capacitate, sunet) VALUES (?, ?, ?)");
pst.setString(1, nume.getText());
pst.setInt(2, Integer.parseInt(capacitate.getText()));
pst.setString(3, sunet.getText());
pst.executeUpdate(); 
```

请注意，如果您能`capacite`以一种不需要整数解析的方式获得，那就太好了。否则，请考虑使用`NumberFormat`哪个对语言环境更友好。另请注意，我已将列名添加到 SQL 中，以使其在面对模式更改时更加健壮。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T16:19:19.380

您尚未关闭查询。

```
int i = statement.executeUpdate("INSERT INTO sala values('','"+ nume.getText() + "', "+ Integer.parseInt(capacitate.getText())+ ", '" + sunet.getText()+"')");
                                                                                                                                                          ^ 
```

但更重要的是，您必须`PreparedStatement`按照[Jon](https://stackoverflow.com/a/10656249/343955)下面的建议使用。

# c++ - 访问冲突阅读位置：链表 c++

> ID：10656214
> 
> 赞同：0
> 
> 时间：2012-05-18T16:16:43.973
> 
> 标签：c++, linked-list, nodes

我正在尝试做一个 int 值的链接列表。我将 3 个 int 值添加到列表中，然后打印它们，但打印 3 个值后出现问题，程序返回打印函数以打印第 4 个值，因为 (tempNode != NULL) 给出 true 但打印后应该为 NULL 3个值，所以它给我打印方法中的访问冲突读取错误`cout << "index " << size-- << ", value: "<< tempNode->num << endl;`

它超出了我的列表节点，但我不知道哪里做错了。

请帮助，2天我试图解决这个问题。

下面的代码。

```
IntList::IntList()
{
    first = NULL;
    last = NULL;
    size = 0;
}

 IntList::Node::Node(const int& info, Node* next = NULL)
 {
    num = info;
    next = next;
 }

 IntList::~IntList()
 {
    Node* tempNode = first;
    while ( tempNode != NULL )
    //for(int i = 0; i < size; i++)
    {
        Node* nextNode = tempNode->next;
        delete tempNode;
        tempNode = nextNode;
    }

    first = last = NULL;
    size = 0;
  }

IntList::IntList(const IntList& wl)
{
     cout << "here word list copy conts " << endl;

     first = last = NULL;
     size = wl.size;
     if(wl.first != NULL){

        Node* tempNode = wl.first;
        for(int i = 0; i < wl.size; i++)
        {
              addLast(tempNode->num);
              tempNode = tempNode->next;
        }
     }
}

IntList& IntList::operator = (const IntList& wl)
{
    cout << "here word list =" << endl;
    if(this == &wl)
        return *this;

    Node* tempNode = first;
    while ( tempNode != NULL )
    {
        Node* nextNode = tempNode->next;
        delete tempNode;
        tempNode = nextNode;
    }

    first = NULL;
    last = NULL;

    if(wl.first != NULL)
    {
        for(int i = 0; i < wl.size; i++)
        {
           addLast(tempNode->num);
           tempNode = tempNode->next;
           size++;
    }
}

return *this;
}

 void IntList::addFirst(int& winfo)
{
    Node* firstNode = new Node(winfo);
    //Node firstNode(winfo);
    if(first == NULL) 
    {
        first = last = firstNode;
    }
    else 
    {
        firstNode->next = first;
        first = firstNode;  
    }
    //increment list size
    size++;
}

void IntList::print(ostream& out)
{
    Node* tempNode = first;
    while ( tempNode != NULL )
    {
        out << "\t";
        cout << "index " << size-- << ", value: "<< tempNode->num << endl;
        tempNode = tempNode->next;
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:23:52.980

构造函数的`next`参数`Node`隐藏其`next`成员，因此`next = next`分配给参数。
重命名其中之一。

此外，请勿`size`在打印时进行修改。

# android - 创建主页按钮

> ID：10656215
> 
> 赞同：-2
> 
> 时间：2012-05-18T16:16:46.613
> 
> 标签：android, android-intent, android-activity

我创建了一个应用程序，它有 3 个名为`HOME, About, Contact`. 每个活动都有一个按钮，`Home`有一个按钮，单击它`About`会启动活动，并且`About`活动有另一个按钮将打开`Contact`活动。`Contact`我的问题是从一个活动回到另一个`Home`活动。我怎样才能实现它？我曾尝试放置一个按钮并设置一个新的`intent`，从 开始`startActivity(newIntent)`。当我单击`Home Button`联系页面时，模拟器会要求我选择要启动的活动。我在想的是该过程在被杀死之前被重新创建。有人可以建议我解决它的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:06:37.203

首先创建一个名为 Home 的活动，然后使用 Intent 调用第二个活动。用户 StartActivity 开始新的意图。现在使用完成来终止您的第一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:32:11.567

据我了解，您正在寻求做这样的事情。

在您的 ACTIVITY1 课程中，您应该有这样的内容：

```
private ACTIVITY1 thisActivity = this;

button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        finish();
                startActivity(new Intent(thisActivity, HOMEActivity.class));
    }
}); 
```

在你的清单中，你应该有这样的东西：

```
<activity android:name="my.app.path.HOMEActivity" />
<activity android:name="my.app.path.ACTIVITY1" />
<activity android:name="my.app.path.ACTIVITY2" /> 
```

还要确保名称反映活动的正确路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:29:22.637

无需在按钮单击上添加任何活动或重新创建任何活动，只需在按钮单击事件中调用 finish()。

```
button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                finish():
             }
         });
     } 
```

这将直接导航到主屏幕。

# asp.net - 从 Telerik Windows 获取返回值后如何自动回发 textchange

> ID：10656216
> 
> 赞同：0
> 
> 时间：2012-05-18T16:16:47.627
> 
> 标签：asp.net, telerik

我有带有事件 textchanged 的​​文本框，并且 autopostback 为真，当文本框从返回值对话框 Telerik 事件 textchange 获取值时不起作用（不是回发，而值文本已更改）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:36:06.187

我假设文本框正在从 Telerik 控件获取文本并且它正在工作？

您的视图状态是否启用？ [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textchanged.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textchanged.aspx)

此外，您可能想查看此线程： [http ://forums.asp.net/t/1123520.aspx/2/10](http://forums.asp.net/t/1123520.aspx/2/10)

根据您编写代码的方式（由于您没有给出任何代码，因此无法判断），您可能必须从文本框中跳出 TAB 才能进行更新。您很可能需要使用一些 javascript 来帮助您。

# asp.net - 在 ASP.net (C#) 中将数据从文本框链接到 SQL 数据库

> ID：10656217
> 
> 赞同：0
> 
> 时间：2012-05-18T16:16:51.550
> 
> 标签：asp.net, sql-server, textbox

我正在尝试创建一个 Web 表单，其中来自多个文本框的数据会将数据输入到我创建的 SQL 数据库中。我的代码在下面列出，问题是当它编译时，它就像没有编译一样。messagedisplay.text 没有改变，SQL 数据库也没有更新。有谁知道解决方案？

```
protected void createButton_Click(object sender, EventArgs e)
    {
        string state = stateTextBox.Text;
        string country = countryTextBox.Text;
        string lake = lakeTextBox.Text;

         SqlConnection connection = new SqlConnection("Data Source=.MetricSample;Initial Catalog=ElementID;"+ "Integrated Security=true;");

         connection.Open();
            try
            {
                using (SqlCommand command = new SqlCommand(
                    "INSERT INTO ResearcherID VALUES(@ResearcherFname, @ResearcherLName)", connection))
                {
                    command.Parameters.Add(new SqlParameter("ResearcherFName", country));
                    command.Parameters.Add(new SqlParameter("ResearcherLName", state));
                    command.ExecuteNonQuery();
                }
                messageDisplay.Text = "DB Connection Successfull";
            }
            catch
            {
               messageDisplay.Text = "DB Connection Failed";
            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:29:14.640

尝试这个

```
using (SqlCommand sqlCmd = new SqlCommand("INSERT INTO ResearcherID (FieldNameForFirstName, FieldNameForLastName) VALUES (@ResearcherFname, @ResearcherLName)", sqlConn)) {                  

            sqlCmd.Parameters.AddWithValue("@ResearcherFname", country);  
            sqlCmd.Parameters.AddWithValue("@ResearcherLName", state);  
       } 
```

也可以`connection.Open();`在里面使用`try`

# xml - XML 样式表：此 XML 文件似乎没有任何与之关联的样式信息

> ID：10656218
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:16:53.740
> 
> 标签：xml, xslt

我有一个简单的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document>
    <Page x1="71" y1="120" x2="527" y2="765" type="page" chunkCount="1" pageNumber="1" wordCount="1">...</Page>
        <Chunk x1="206" y1="120" x2="388" y2="144" type="unclassified">
            <Word x1="206" y1="120" x2="214" y2="144" font="Times-Roman" style="font-size:22pt">WORD</Word>
        </Chunk>       
</Document> 
```

当试图查看它时，我的浏览器告诉我我缺少一个样式表。由于我以前没有使用 XML 的经验，我的问题是：一个简单的 XSLT（据我所知？）看起来如何，这将使我能够在文件中坐标给定的位置查看 XML 文件的每个元素。帮助很大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:55:24.730

您上面的 XML 有错误，您关闭**Page**两次，并且**Chunk**被**Chuck错误地关闭**

在 xml 文件上指定 xslt（样式表）是可选的，浏览器只是告诉他为什么显示原始 xml，没关系。您可以在服务器端应用 xsl 样式并决定应用哪个表，无需在 xml 文件中引用它。您也可以在客户端进行 xslt 翻译，这将更加棘手，因为浏览器不同的实现来实现这一点。

但是，如果您指定样式表，所有主要浏览器都将在客户端进行转换（旧浏览器不会），但即使是 IE6 也会

指向在 xml 文件中指定的样式表的链接如下所示：

```
<?xml-stylesheet type="text/xsl" href="so.xslt"?> 
```

样式表可能如下所示：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

<xsl:output omit-xml-declaration="yes" method="html"/>
<xsl:strip-space elements="*"/>

<xsl:template match="Document">
    <html>
     <head><title>Test</title></head>
        <xsl:apply-templates/>
    </html>
</xsl:template>

<xsl:template match="Page">
    <body>
        <xsl:apply-templates/><hr/>
        Page:<xsl:value-of select="@pageNumber"/>
    </body>
</xsl:template>

<xsl:template match="Chunk">
    <xsl:value-of select="."/><br/>
</xsl:template>

<xsl:template match="*">
<xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet> 
```

但正如您所见，您几乎可以用它构建任何东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-05T21:32:40.873

只需将 xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" 添加到您的 html 标签。这对我有用。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title></title>
</head>
<body>

</body>
</html> 
```

# c++ - 使用 cin.get(); 两次

> ID：10656224
> 
> 赞同：4
> 
> 时间：2012-05-18T16:17:28.887
> 
> 标签：c++

我不明白为什么可能需要两次，这是我正在阅读的书中的引述；

> cin.get() 语句读取下一次击键，因此该语句使程序等待，直到您按下 Enter 键。（在您按下 Enter 之前，不会将击键发送到程序，因此按下另一个键是没有意义的。）如果程序在常规输入后留下未处理的击键，则需要第二条语句。例如，如果您输入一个数字，您键入该数字，然后按 Enter。程序读取该数字但未处理 Enter 键击，然后由第一个 cin.get() 读取。

我将它放在源代码中，并没有看到它存在两次的意义。

您输入一些数字并按Enter键结束程序，唯一不同的是如果在结束前没有输入任何内容，则按两次Enter。

它的目的是暂停程序，它这样做了，为什么要使用它两次呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T16:21:51.637

`cin.get();`从输入中检索单个字符。因此，如果您有`5\n`（`\n`相当于按`ENTER`）输入，`cin.get();`将返回`5`，另一个`cin.get();`将返回`\n`。如果您一个接一个地阅读多个数字，比如说`while`循环，如果您忘记了`\n`字符，您可能会遇到问题。

`cin.ignore(256, '\n');`一旦你读完你想要或关心的字符，使用也可以纠正这个问题。

# apache - 在端口 443 上禁用 apache 中的 ssl

> ID：10656229
> 
> 赞同：2
> 
> 时间：2012-05-18T16:17:54.117
> 
> 标签：apache, node.js, ssl, https

我在 apache 上运行 NodeJS 应用程序并使用 mod_proxy 将 443 上的请求转发到 nodeJS 应用程序。

这在端口 80 上工作正常，但是当我尝试将其设置为端口 443 时，我在 apache 中收到以下错误：

```
[error] Server should be SSL-aware but has no certificate configured [Hint: SSLCertificateFile] ((null):0) 
```

看来这个错误是因为我试图在 apache 中侦听端口 443 但没有提供 ssl 证书......但我不需要，因为我的 NodeJS 应用程序正在执行 SSL。

我怎样才能告诉 apache 忽略这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:22:29.697

你正在尝试的东西是行不通的。连接到端口 443 的客户端将使用 HTTPS/SSL - 因此处理连接的应用程序需要使用 SSL 进行该端口上的连接。

# xml - 我可以在 Eclipse 中为 XML 指定格式化程序吗？

> ID：10656231
> 
> 赞同：0
> 
> 时间：2012-05-18T16:18:03.710
> 
> 标签：xml, eclipse, xslt

我知道在 Java 代码的代码样式下有一个格式化程序选项，它会影响 Eclipse 在您 ctrl + shift + f 时格式化您的代码的方式。

但是，在 XML/XSL 文档中使用此快捷方式时，它会以我不喜欢且可读性不强的方式对其进行格式化。

我可以以某种方式覆盖 oXygen 插件甚至默认 XML 编辑器的这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:40:56.843

对于 Eclipse XML 编辑器，您可以在 Preferences > XML > XML Files > Editor 中获得所有内容。那里的内容不如 Java 格式化程序丰富，但我发现它已经足够了。

# css - wordpress 上的跨浏览器边距问题

> ID：10656234
> 
> 赞同：0
> 
> 时间：2012-05-18T16:18:13.120
> 
> 标签：css, wordpress

嗨，我在我的网站[http://www.my-cv.info](http://www.my-cv.info)上安装了一个 wordpress 主题，我遇到的问题是边缘周围的间距，在 Firefox 中，页面边缘和右侧的登录框。但是在 Google 中，登录框会离开页面。最初页面背景是白色的，所以直到我添加了彩色背景才注意到。我查看了 CSS 并进行了多项更改，但似乎没有任何区别。

谢谢

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:22:22.493

试着把它放在你的 CSS 中：

```
#home-page-layout_c1_col-1-4_2 form td input[type=text], #home-page-layout_c1_col-1-4_2 form td input[type=password] { 
     width: 110px;
} 
```

# joomla - 如何以编程方式查找在 Joomla 2.5 中分配给文章的菜单项？

> ID：10656237
> 
> 赞同：0
> 
> 时间：2012-05-18T16:18:25.427
> 
> 标签：joomla, joomla2.5

在 Joomla 2.5 中，基于文章 id，如何以编程方式查找分配了这篇文章的相关菜单项？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:29:09.783

嗯……这可能会变得混乱。除非有像这样的更简单的解决方案可以帮助您入门（经过测试并且可以正常工作）：

```
$db =& JFactory::getDBO();
$query = $db->getQuery(true);
$query->SELECT('
    menu.id AS id
    ,menu.link AS link');
$query->FROM('#__menu AS menu');
$query->GROUP('
     menu.id
     ,menu.link');
$db->setQuery($query);
$results = $db->loadAssocList();

//take the results, loop, explode the link apart to isolate the article id
foreach ($results as &$result) {
    $articleid = explode('view=article&id=', $result[link]);
    echo $result[id] . " - " . $articleid[1] . "<br />";
} 
```

# python - 迁移到 pygobject、glade 和 gtk3 时使用条目组合框

> ID：10656239
> 
> 赞同：5
> 
> 时间：2012-05-18T16:18:29.607
> 
> 标签：python, combobox, glade, gtk3, pygobject

自 3 个月以来，我使用 glade 和 pygtk 在 python 中进行开发，但即使在我有时间习惯它之前，它已经过时了。

使用 Archlinux，我的系统不断更新，所以我不得不使用 gtk3，即使我发现它与 gtk2 相比有点缺乏功能。

所以我决定改用pygobject。不幸的是，文档并不完整。

我成功地将我的 glade 文件和我的 python 代码升级到了新系统，但仍然存在一个错误。

在我的一个程序中，我有一个带有条目的组合框。我使用调用 get_active_text() 方法来获取条目的内容，无论它是从组合框中选择的还是由用户输入的。

这种方法不再存在（我想，因为它给了我一个错误）所以我改用它：

```
def get_license(self):
    #return self.combobox_license.get_active_text()
    tree_iter = self.combobox_license.get_active_iter()
    if tree_iter != None:
        model = self.combobox_license.get_model()
        return model[tree_iter][0]
    else:
        entry = self.combobox_license.get_child()
        return entry.get_text() 
```

如您所见，旧代码已被注释。

此代码有效，但我有一个奇怪的问题：我无法使用该条目！

我可以从组合框中选择文本，但该条目不可用。我可以选择，但我不能输入它。

这是我需要在某处激活的新行为吗？使用gtk2版本的程序，我没有任何问题。

这是我的林间空地文件中描述组合框条目的部分：

```
 <object class="GtkComboBox" id="combobox_license">
    <property name="visible">True</property>
    <property name="can_focus">False</property>
    <property name="model">liststore_license</property>
    <property name="has_entry">True</property>
    <property name="entry_text_column">0</property>
    <signal name="changed" handler="on_combobox_license_changed" swapped="no"/>
    <child>
      <object class="GtkCellRendererText" id="cellrenderertext_license"/>
    </child>
    <child internal-child="entry">
      <object class="GtkEntry" id="combobox-entry2">
        <property name="can_focus">False</property>
        <property name="buffer">entrybuffer1</property>
      </object>
    </child>
  </object> 
```

我创建了一个列表存储，其中包含一列 gchararray 类型的文本。单元格由 GtkCellRenderer 渲染（但未定义 cellrenderer 的属性“文本”，因为如果我将其定义为 0（gchararray），我会得到**两次**文本！）

我认为添加入口缓冲区会有所帮助，但它不会改变任何东西。

编辑：我找到了解决方案：can_focus 对于嵌入式条目是错误的。现在它可以工作了，不需要入口缓冲区。

我在发布之前找到了解决方案，但我发布它以防其他用户也有这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T11:58:04.570

将组合框的嵌入条目的 can_focus 属性更改为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:45:12.733

如果您更喜欢使用这些`get_active_text()`方法，那么您只需要创建 a`Gtk.ComboBoxText`而不是 a `Gtk.ComboBox`。此 API 在 GTK 3 中被拆分为另一个类。

# vb.net - 作为参数传递时更改变量值（vb.net）

> ID：10656240
> 
> 赞同：1
> 
> 时间：2012-05-18T16:18:31.667
> 
> 标签：vb.net, variables

有没有办法我可以在 vb.net 中这样做

```
dim idx = -1
dim a = array(idx = idx + 1)
dim b = array(idx = idx + 1)
dim c = array(idx = idx + 1)
dim d = array(idx = idx + 1) 
```

我想要的是 idx 在每一行之后不断增加，而不是在单独的行上增加它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:38:48.363

我不认为 VB.Net 有这样的东西，但你可以做一个扩展来接近它：

```
Imports System.Runtime.CompilerServices

Public Module Module1

  <Extension()> _
  Public Function UpIndex(ByRef value As Integer) As Integer
    value += 1
    return value
  End Function

End Module 
```

注意`ByRef`参数中的使用。

然后您的电话将如下所示：

```
Dim a = array(idx.UpIndex)
Dim b = array(idx.UpIndex) 
```

# sas - Proc GLM ODS 编号格式

> ID：10656244
> 
> 赞同：0
> 
> 时间：2012-05-18T16:18:56.780
> 
> 标签：sas, glm

您如何格式化 SAS 中 Proc GLM 中 ODS 的参数估计值？我的代码是

```
proc glm data = dat;
model y = x1 x2 ;
ods output ParameterEstimates=parmsdat ;
run ; 
```

我想将 beta 至少写到第四位有效数字，但如果 beta_x1 是 int，并且 beta_x2 绝对小于 1，则输出会将 beta_x2 四舍五入到最接近的数字。有什么建议么？提前致谢。

# asp.net-mvc - 哪个 CMS 支持 ASP.NET MVC

> ID：10656253
> 
> 赞同：2
> 
> 时间：2012-05-18T16:19:26.393
> 
> 标签：asp.net-mvc, content-management-system

我要为一家 IT 公司开发一个网站，我想使用 ASP.NET MVC 3 来开发它我还想使用一个 CMS，这样就可以轻松更改网站的内容，而无需进入代码。

我想为此使用 MVC 3。

谁能帮我决定我应该去哪个CMS？

我的要求是使用 ASP.NET MVC 3 为 IT 公司创建一个网站，并使用 CMS，以便内容管理变得容易。

任何想法/帮助/链接/将不胜感激。

更新：现在 Wordpress 也可用于 .NET

温暖的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:24:42.967

没有可以在 MVC 中使用的“插件”CMS。你必须自己写。

但是，有许多 CMS 允许您通过 MVC 扩展它们。例如，果园是一个受欢迎的。

具有 CMS 的 MVC 站点与允许您使用 MVC 扩展它的 CMS 之间存在很大差异。您应该了解这种区别，并决定要走哪条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:25:35.447

听起来您正在寻找像 N2 CMS 这样的解决方案。它是一个 API，可让您以编程方式创建 CMS。

[http://n2cms.codeplex.com/](http://n2cms.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T05:41:51.580

You can try to use [MVC Easy CMS](http://mvceasycms.ism-ukraine.com/). It can be installed as NuGet package to the existing MVC 3.0 project.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:04:47.900

您可以将 Umbraco v5 插入现有 MVC 站点或将现有 MVC 站点插入 Umbraco v5。Umbraco v5 是目前基于 MVC3 的完全重写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T01:07:47.973

开源[DD4T 项目（Tridion 的动态交付）为](http://code.google.com/p/dynamic-delivery-4-tridion/)[SDL Tridion WCM](http://www.sdl.com/en/wcm/)托管内容提供了 MVC.NET 前端。

然而，Tridion 相当昂贵，所以我不确定我是否应该提及它......

# java - 如何从另一个类 java 访问 JTable

> ID：10656256
> 
> 赞同：1
> 
> 时间：2012-05-18T16:19:47.827
> 
> 标签：java, swing, jtable

我有三个班级，一个是a `JFrame`，另外两个是`JPanel`。A 类有一个`JTable`，我需要访问`JTabel`另一个类中的选定项目。是否可以使用模型获取所选项目？或者如何访问`JTable`B 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:23:47.587

仅仅因为您使用的是 Swing GUI 并不会改变任何良好的面向对象程序技术的规则。您将需要为类提供相互通信的方法，可能是通过 getter 或 setter 方法，但您将希望限制这种通信以保持封装/数据隐藏所需的最少暴露。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:24:26.623

您可以在任何类（包括 B 类）中访问 JTable 中的选定项，该类具有对 JTable、其 ListSelectionModel 或其他公开选定项的引用。

例如，如果 B 类有对 A 类的引用——而 A 类有一个 JTable——那么 B 类可以向 A 类询问当前选择的项目。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-11-09T02:17:10.863

请将您的 jTable 变量访问修饰符替换为

# java - 在netbeans中调用sqlserver函数

> ID：10656258
> 
> 赞同：1
> 
> 时间：2012-05-18T16:20:04.350
> 
> 标签：java, sql-server, function, call

我需要帮助才能在 netbeans 中调用 sqlserver 函数。首先，对不起，我的英语太差了，而且是个新手。

我在 netbeans 中使用了这段代码：

```
public void generateNoOrder()
{
    ResultSet rset = null;
    con = conf.makeConnection();
    //String result="";
    try{
        CallableStatement cs = con.prepareCall("{call get_date()}");
        cs.registerOutParameter(1, java.sql.Types.CHAR);
        rset = cs.executeQuery();
        //while(rset.next())
        //{
         String result = cs.getString(1);
        //}
        System.out.println(result);
    }
    catch (Exception ex){
        System.out.println(ex.getMessage());
        //return null;
    }
    finally {
        conf.closeConnection(con, s, rset);
    }
} 
```

此函数不需要输入参数，并且此函数返回类型 char[12]

错误消息是：参数索引 1 无效。

请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:46:14.090

如果不需要输入参数并且它是您正在调用的函数，请尝试不使用 ()

```
CallableStatement cs = con.prepareCall("{call get_date}") 
```

如[http://www.java2s.com/Code/JavaAPI/java.sql/ConnectionprepareCallStringsql.htm所示](http://www.java2s.com/Code/JavaAPI/java.sql/ConnectionprepareCallStringsql.htm)

并且因为您正在尝试检索输出参数，所以您还应该注册输出参数，就像这样

```
// Call a function with no parameters; the function returns a VARCHAR
// Prepare the callable statement
cs = connection.prepareCall("{? = call get_date}");

// Register the type of the return value
cs.registerOutParameter(1, java.sql.Types.CHAR);

// Execute and retrieve the returned value
cs.execute();
String result = cs.getString(1); 
```

它在调用 MySQL 函数时对我有用，它应该与 SQL Server IMAO 一起使用。

# php - http 错误 - 页面处理

> ID：10656264
> 
> 赞同：0
> 
> 时间：2012-05-18T16:20:23.387
> 
> 标签：php, http-headers

如果我将 http 标头设置为 404，页面会停止处理吗？在一台服务器上似乎是这样，但在另一台服务器上它会继续处理页面上的内容。我希望它继续处理，以便我可以在页面上提供进一步的错误消息。它可能是服务器上的设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:23:47.607

当您引发 404 错误时，页面不会停止处理。除非您明确提出要求。

简单的非技术示例：如果页面停止处理，则不会有具有自定义 404 页面的网站。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:24:05.770

该页面仍将处理，否则无法自定义 404 页面。确保您打开了错误报告，因为您可能有一个 PHP 错误导致脚本在页面生成之前停止运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:24:25.090

通常你可以在 apache 中设置你的 404 页面。这个页面应该被处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T16:37:50.047

原来这是 CURL 的问题。谢谢你的帮助。

# sql-server - VB.net 中的哪个数据库模块允许我同时连接到 SQL Server 和 MDF 文件？

> ID：10656266
> 
> 赞同：0
> 
> 时间：2012-05-18T16:20:32.320
> 
> 标签：sql-server, database, vb.net

您知道 VB.net 中的哪个模块允许我连接到文件 ( `mdf/mdb`) 和 SQL Server（不是同时，而是在运行时更改）。

或者您知道两个具有相同 API 的模块吗？

我正在构建软件，我不会在本地和服务器上工作。但我不想仅仅因为我使用不同的模块而去更改我的所有代码。我知道 VB.net，但我从未使用过数据库。

有这么多不同的数据库连接器，令人困惑！

谢谢，非常感谢您的回答和评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:43:09.787

System.Data 命名空间提供了可以通过 ADO 处理任何受支持的数据源的基类。您可以使用 OleDb 提供程序连接到 SQL 和 MDB，但如果您在访问 SQL Server 时使用本机 SqlClient 提供程序，速度会快得多。您可能会发现 DbProviderFactories 类非常有用：

[http://msdn.microsoft.com/en-us/library/dd0w4a2z.aspx](http://msdn.microsoft.com/en-us/library/dd0w4a2z.aspx)

# php - Cocoa URL API：如何从服务器返回错误*并且*仍然下载请求的数据？

> ID：10656268
> 
> 赞同：1
> 
> 时间：2012-05-18T16:20:46.220
> 
> 标签：php, cocoa, nsurlconnection, nsurl

有趣的编程难题...

我未能将错误初始化为零，所以下面的代码崩溃了。

```
 NSString *query = [NSString stringWithFormat:@"http://mysite.com/getlatest.php?a=%@", aSuiteName];
    NSURL *url = [NSURL URLWithString:query];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:10];
    [request setHTTPMethod:@"GET"];
    NSURLResponse *response = nil;
    NSError *error;
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    if ( !data || error != nil ) {
        NSLog(@"Error downlading %@", error); //CRASH
        return NO;
    } 
```

我的问题是，我怎样才能让我的服务器返回一个错误，使得 sendSynchronousRequest:returningResponse:error: 实际上收到一个错误，但仍然继续下载数据？某种非致命错误会导致错误被初始化为 NSError 对象？

这与一个类似的难题有关，我之前希望返回状态信息而不会完全失败。所以，虽然晦涩难懂，但我很想知道是否有这种技术。

虽然这是一个 Cocoa 问题，但我认为答案将在 php.ini 中。就像是

```
<?php

    header( set 503 error here );

    return data;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:40:40.237

我通过将数据包装到一个 NSError 对象中来处理这个问题。在纯文本响应的情况下，我还将响应用作本地化描述。我使用单独的方法来评估结果是否成功。如果 URL 请求本身产生错误，我也认为是失败，并传递 URL 请求提供的 NSError。

这是从我的 ServerRequest 类中截取的：

```
+ (NSError *) errorForStatusCode:(NSInteger) statusCode
                     contentType:(NSString *) contentType
                textEncodingName:(NSString *) textEncodingName
                            data:(NSData *) data {

    NSMutableDictionary *userInfo = [NSMutableDictionary dictionary];
    if ([contentType isEqualToString:@"text/plain"]) {
        [userInfo setValue:[[NSString alloc] initWithData:data encoding:[self stringEncodingForTextEncodingName:textEncodingName]]
                    forKey:NSLocalizedDescriptionKey];
    } else if ( ... ) {
        // handle other relevant types         
    }

    return [NSError errorWithDomain:[[self class] description]
                               code:statusCode
                           userInfo:userInfo];
}

- (BOOL) statusCodeIndicatesSuccess:(NSInteger) statusCodeValue {
    return 201 == statusCodeValue; // Modify this based on your API
}

- (BOOL) runSynchronouslyReturningResult:(NSData **) resultPtr error:(NSError **) errorPtr {
    NSHTTPURLResponse *response = nil;
    NSError *error = nil;
    NSData *result = [NSURLConnection sendSynchronousRequest:[self request] returningResponse:&response error:&error];
    if (error) {
        if (errorPtr) *errorPtr = error;
        return NO;
    }

    self.statusCode = [response statusCode];
    self.MIMEType = [response MIMEType];
    self.textEncodingName = [response textEncodingName];
    if ([self statusCodeIndicatesSuccess:self.statusCode]) {
        if (resultPtr) *resultPtr = result;
        return YES;
    } else {
        if (errorPtr) *errorPtr = [ServerRequest errorForStatusCode:self.statusCode
                                                        contentType:self.MIMEType
                                                   textEncodingName:self.textEncodingName
                                                               data:result];
        if (resultPtr) *resultPtr = result;
        return NO;
    }
} 
```

# php - 尝试使用php根据排名设置对象的购买价格

> ID：10656271
> 
> 赞同：0
> 
> 时间：2012-05-18T16:21:05.510
> 
> 标签：php

我正在尝试根据排名为对象定价。我的问题是，如果对象没有排名，它将进入下一层。这是我的代码示例：

```
switch ($amazonResult['SalesRank']) {
case ($amazonResult['SalesRank'] < 1 || trim($amazonResult['SalesRank'])===''|| !isset($amazonResult['SalesRank']) || $amazonResult['SalesRank']=== null):
    $Price=((float) $lowestAmazonPrice) *<some percent to pay>;
    $payPrice = round($Price, 0);  //to round the price up or down to the nearest $
    break; 
case ($amazonResult['SalesRank'] > 0 && $amazonResult['SalesRank'] <= 15000):
    $Price=((float) $lowestAmazonPrice) * <some percent to pay>;
    $payPrice = round($Price, 0);  //to round the price up or down to the nearest $
    break;
default:
    $Price=((float) $lowestAmazonPrice) * <some percent to pay>;
    $payPrice = round($Price, 0);  //to round the price up or down to the nearest $
    break;
} 
```

如果排名为空、null 或 0，如何获取排名？

$amazonResult['SalesRank'] 可以为空，并且是需要在每种情况下进行比较的值。此变量从查询中提取，并在每次要为商品定价时运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:27:15.443

尝试这个：

```
if(!isset($amazonResult['SalesRank']) || empty(trim($amazonResult['SalesRank'])) {
    // case if the variable is empty.
} else if($amazonResult['SalesRank'] < 1) {
    // some "valid" value
    $Price=((float) $lowestAmazonPrice) *<some percent to pay>;
    $payPrice = round($Price, 0);  //to round the price up or down to the nearest $
    break;
} else if($amazonResult['SalesRank'] > 0 && $amazonResult['SalesRank'] <= 15000) {
    $Price=((float) $lowestAmazonPrice) * <some percent to pay>;
    $payPrice = round($Price, 0);  //to round the price up or down to the nearest $
    break;
} else {
    $Price=((float) $lowestAmazonPrice) * <some percent to pay>;
    $payPrice = round($Price, 0);  //to round the price up or down to the nearest $
    break;
} 
```

之后的值`case`应该是常量，以便您可以将其与中的变量进行比较`switch`。

您的问题是您的 case 构造将返回 true 或 false ，这可能不等于`$amazonResult['SalesRank']`.

# c# - 在 Windows Phone 中生成 SHA1 哈希会输出不同的哈希

> ID：10656273
> 
> 赞同：4
> 
> 时间：2012-05-18T16:21:11.227
> 
> 标签：c#, windows-phone-7.1, sha1

我目前正在使用 Windows Phone 和 Silverlight 中的内置方法来创建字符串的 SHA1 哈希。这是代码：

```
private static string CalculateSHA1(string text)
    {
        SHA1Managed s = new SHA1Managed();
        UTF8Encoding enc = new UTF8Encoding();
        s.ComputeHash(enc.GetBytes(text.ToCharArray()));
        System.Diagnostics.Debug.WriteLine("Original Text {0}, Access {1}", text, Convert.ToBase64String(s.Hash));
        return Convert.ToBase64String(s.Hash);
    } 
```

例如，我尝试为这个字符串生成一个哈希：“hello”。

银光输出：`LPJNul+wow4m6DsqxbninhsWHlwfp0JecwQzYpOLmCQ=`

正确的输出：`aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d`

我在代码中做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T16:25:19.113

在您的示例中，您正在对字节数组进行 Base64 编码。您的正确输出是十六进制格式，您可以使用以下方法实现：

```
return BitConverter.ToString(s.Hash).Replace("-", ""); 
```

代替：

```
return Convert.ToBase64String(s.Hash); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-21T18:07:00.757

我比较了这两种解决方案：

解决方案 A：

```
// compatible Windows Phone 7.1, 8.0 and 8.1
public static string CalculateSHA1(string str)
{
    var bytes = Encoding.UTF8.GetBytes(str);
    byte[] sha1Bytes;
    using (var algorithm = new SHA1Managed())
        sha1Bytes = algorithm.ComputeHash(bytes);
    return BitConverter.ToString(sha1Bytes).Replace("-", "").ToLowerInvariant();
} 
```

解决方案 B（基于 D for Developer）：

```
// compatible Windows Phone 8.1 only
public static string CalculateSHA1New(string str)
{
    var vector = CryptographicBuffer.ConvertStringToBinary(str, BinaryStringEncoding.Utf8);
    var digest = HashAlgorithmProvider.OpenAlgorithm("SHA1").HashData(vector);
    return CryptographicBuffer.EncodeToHexString(digest);
} 
```

好吧，解决方案 A 快了 40 倍。所以只使用解决方案A。:)

# c# - 等待然后在 C# 中执行代码？

> ID：10656274
> 
> 赞同：1
> 
> 时间：2012-05-18T16:21:15.330
> 
> 标签：c#, visual-c#-express-2010

好的，我的表格上有一个结束事件。它里面的代码使表单淡出，然后打开另一个表单。有没有办法等到褪色完成？这是我的代码：

```
 private void form1_closing(object sender, FormClosingEventArgs e)
    {
        if (this.Opacity > 0.01f)
        {
            e.Cancel = true;
            timer1.Interval = 47;
            timer1.Enabled = true;
            timer1.Start();

        }
        else
        {
            timer1.Enabled = false;
        }
    }

    private void timer2_Tick(object sender, EventArgs e)
    {
        progressBar1.Increment(+1);
        label4.Text = progressBar1.Value.ToString() + "%"; 
        if (progressBar1.Value == 100)
        {
            progressBar1.Value = 100; 
            timer2.Stop();
            this.Close();
            Form2 frm2 = new Form2();
            frm2.Show(); 
        }
    } 
```

基本上，form2 很早就打开了，我希望它在淡入淡出效果完成后等待。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:46:27.650

我猜这个代码应该可以。

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        for (double i = 1.0; i > 0.0; i-=0.01)
        {
            this.Opacity = i;
            Thread.Sleep(10);
        }

  //Handle whatever you want to do here. The control comes here only when the form is faded out.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:51:37.540

代码 ：

```
void Wait(int Milliseconds)
{
    Stopwatch sw = new Stopwatch();
    sw.Start();
    while(sw.ElapsedMillisecods < Millisecods)
    {
        Application.DoEvents();
    }
    sw.Stop();
} 
```

这是一个`Wait`函数，如果您可以像这样计算褪色期间花费的总时间，则可以使用它：

```
Wait(Time) 
```

# php - 如何使用 finfo 确定多种文件类型？

> ID：10656276
> 
> 赞同：0
> 
> 时间：2012-05-18T16:21:33.287
> 
> 标签：php, file-upload

我试图在将文件上传到服务器之前使用 finfo 来确定文件是否是图像文件。我的问题是，下面的代码仅适用于 jpeg，但我也允许使用其他文件类型。所以我有两个问题：

问题一：

如何使用 finfo 检查多种文件类型，例如 gif、tiff、png、ico 等。

问题2：我是否需要使用其他验证方法来检查是否是图像或者我下面得到的是否足够？

下面是代码：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mimetype = image_type_to_mime_type(exif_imagetype('/path/to/file.jpg'));

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg")
|| ($_FILES["file"]["type"] == "image/tiff")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/bmp")
|| ($_FILES["file"]["type"] == "image/ico")

{

   if ($finfo !== FALSE){

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

   @finfo_close($finfo);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:20:03.403

这应该可以检查文件类型是否为图像：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mimetype = finfo_file($finfo, '/path/to/file.jpg';
finfo_close($finfo);

if (substr ($mimetype, 0, 5) == 'image') {
    // its an image
}
else {
    // its not an image!
} 
```

第二种选择，如果您使用的是 PHP 5.2 或更低版本：

```
$mimetype = mime_content_type('/path/to/file.jpg';

if (substr ($mimetype, 0, 5) == 'image') {
    // its an image
}
else {
    // its not an image!
} 
```

至于其他验证方法，你应该使用`getimagesize()`函数： http: [//php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

```
if (getimagesize ('/path/to/file.jpg')) {
    // its an image
}
else {
    // its not an image!
} 
```

这样，您的脚本就不会被更改文件的 mime 类型或扩展名所欺骗。

# asp.net-mvc - asp.net mvc 错误重定向到错误的位置

> ID：10656281
> 
> 赞同：0
> 
> 时间：2012-05-18T16:21:56.283
> 
> 标签：asp.net-mvc, error-handling

在 json 请求期间，asp.net 错误重定向会将它们发送到不正确的路径 - 它一直在 Home（视图的主文件夹，好像它正在尝试使用我的主控制器）下寻找 Error.cshtml 视图，当他们都在错误文件夹/控制器设置下，这在我的配置文件中有明确概述：

```
 <customErrors mode="On" defaultRedirect="~/Error/Error">
     <error statusCode="404" redirect="~/Error/NotFound" />
     <error statusCode="403" redirect="~/Error/Forbidden" />
   </customErrors> 
```

现在，对于常规的网页请求，如果出现异常，它会重定向到错误控制器，只是在从 jquery .ajax 发送请求时，它会尝试在 Home 文件夹下而不是 Error 下查找。不知道如何纠正这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:50:26.350

在 HomeController 中创建此操作方法：

```
public ActionResult Error()
        {
            return View("Error");
        } 
```

和

利用

```
<customErrors mode="On" defaultRedirect="~/Home/Error" /> 
```

在 web.config 文件中

错误页面的位置 (Error.cshtml)：Views\Shared Folder

# php - 是否可以将 mysqli 准备好的语句与多个插入结合起来？

> ID：10656284
> 
> 赞同：3
> 
> 时间：2012-05-18T16:22:06.957
> 
> 标签：php, mysqli, prepared-statement

我精通旧的 php mysql 扩展。

我正在编写我的第一个使用 mysqli 扩展的脚本。

我将在动态生成的表中插入大量行。

是否可以在事先不知道每次插入的新行数的情况下使用准备好的语句将多行插入到表中？

```
$stmt   = $mysqli->prepare("INSERT INTO `activity` (`id`, `name`, `type`) VALUES ?, ?, ?;"); 
```

如果那不可能，那将更有效：

1.  准备好的语句，一次一行
2.  未准备好的语句，一次约 50 行

    ```
    // prepared statement

    $stmt   = $mysqli->prepare("INSERT INTO `activity` (`id`, `name`, `type`) VALUES (?, ?, ?)");

    for($i=0;$i<$limit;$i++)

    {

        $stmt->bind_param('iss', $id[$i], $name[$i], $type[$i]);

        $stmt->execute();

    }

    // non-prepared statement

    $query  = "INSERT INTO `activity` (`id`, `name`, `type`) VALUES ";

    for($i=0;$i<$limit;$i++)

    {

        $query  .= "\n(".$mysqli->real_escape_string($id[$i]), $mysqli->real_escape_string($name[$i]), $mysqli->real_escape_string($type[$i])."),";

    }

    $query  = substr($query, 0, -1).';'; 
    ```

PHP v.5.3.8

MySQL v. 5.1.60

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:23:20.543

```
$stmt = $mysqli->stmt_init();

if($stmt->prepare("INSERT INTO `activity` (`id`, `name`, `type`) VALUES (?, ?, ?)"))
{
   $stmt->bind_param('iss', $_id, $_name, $_type);
   for($i=0;$i<$limit;$i++)
   {
      $_id = $id[$i];
      $_name = $name[$i];
      $_type = $type[$i];
      $stmt->execute();
   }

} 
```

应该为你做！

# actionscript-3 - 导出到 AIR 时，AS3 相机输入失真

> ID：10656293
> 
> 赞同：1
> 
> 时间：2012-05-18T16:22:39.700
> 
> 标签：actionscript-3, flash, air, webcam

我用 flash/as3 构建了一个 AIR 应用程序，它在舞台上有一个网络摄像头显示。在构建应用程序时，在我所有的测试中，一切看起来和工作都很好，但是当我为 AIR 发布时，图像被拉伸了。图像的边界似乎保持不变，但实际的凸轮输出是失真的。有没有人遇到过这个问题？

我应该补充一点，这是一个桌面应用程序，它永久安装在一台机器上，因此设备兼容性应该不是问题。

这是相机设置：

```
 var cam:Camera = Camera.getCamera();
    cam.setMode(280,380,20);
    var video:Video = new Video(380,380); 
```

这是我第一次调用相机的地方......

```
 video.attachCamera(cam);
    video.x = 355;
    video.scaleX = -1;
    video.y = -100;
    addChildAt(video, 0); 
```

尺寸奇怪的原因是它位于框架后面，在整个交互过程中会改变位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:55:55.723

不一定是您正在寻找的答案，但您应该记住这一点：

您要求相机以 280 x 380 的分辨率进行拍摄，这不是标准的 4:3 纵横比。

当您致电`cam.setMode(280,380,20);`文档时，Flash 会尝试将相机分辨率设置为您的规格，如果相机不支持该分辨率，它将尝试找到匹配的分辨率。因此，您可能会或可能不会获得此实际分辨率。

`setMode()`有第四个参数，可以禁用此功能。阅读相关[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setMode%28%29)，以便了解其中的含义:)

然后在 380x380 的 Video 对象中显示视频。所以我希望图像在水平方向上被拉伸（b / c原始来源只有280）。

目前尚不清楚为什么会有不同的行为：您是说运行应用程序的调试版本可以工作，但是当您导出发布版本并运行时，它看起来很时髦？

最后，在`scaleX = -1`做什么？我记得这是我过去使用的某种漂亮技巧......但它的目的是逃避我:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T10:47:08.990

是的，源代码会很酷。顺便说一句，我建议您在视频流运行后立即手动设置 video.width 和 video.height 属性。这将强制凸轮以正确的尺寸显示。

# ios - 如何让按钮在 iOS 的每个屏幕上都做同样的事情？

> ID：10656294
> 
> 赞同：0
> 
> 时间：2012-05-18T16:22:43.057
> 
> 标签：ios, uiviewcontroller

我的应用程序的每个屏幕的工具栏中（通过情节提要制作）都有一个“注销”按钮。无论点击哪个页面，我都希望它执行相同的操作。

有没有办法让所有这些按钮做同样的事情而不必`IBAction`在每个视图控制器中创建相同的方法（我有一堆不同类型的视图控制器）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:41:13.497

一种解决方案是在所有工具栏中共享按钮。这既丑陋又困难。我的偏好是将注销逻辑封装在它自己的类中，然后从所有按钮中调用它：

```
#import "AccountManager.h"

@implementation AccountManager

+ (id)sharedManager
{
    static AccountManager *sharedManager = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedManager = [[AccountManager alloc] init];
    });

    return sharedManager;
}

- (void)logout
{
    // logout logic
}

@end 
```

然后在您的视图控制器中，您可以拥有

```
#import "AccountManager.h"

- (IBAction)didSelectLogout:(id)sender
{
    [[AccountManager sharedManager] logout];
} 
```

在这种情况下，您仍然在每个控制器中都有一个操作，但您的注销逻辑并未遍布整个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:48:10.143

我有一个类似的问题。我需要许多 viewController 上的按钮。点击它会转到付费版本的 iTunes 链接。这就是我所做的。

自定义按钮.h

```
+(void)createDownloadFullVersionButton:(UIButton*)button 
```

自定义按钮.m

```
+(void)createDownloadFullVersionButton:(UIButton*)button
{
//    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
// Since the buttons can be any width we use a thin image with a stretchable center point
UIImage *buttonImage = [[UIImage imageNamed:@"button_slice.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0];
UIImage *buttonPressedImage = [[UIImage imageNamed:@"button_slice_over.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0];
[button.layer setCornerRadius:10.0f];
[button.layer setMasksToBounds:YES];

[button.layer setBorderColor:[[UIColor whiteColor]CGColor]];
button.layer.borderWidth = 1.0;
[button addTarget:self action:@selector(actionDownloadPaidVersion:) forControlEvents:UIControlEventTouchUpInside];

//CGRect buttonFrame = [button frame];
//buttonFrame.size.width = 220;
//buttonFrame.size.height = 48;
//[button setFrame:buttonFrame];

[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[button setBackgroundImage:buttonPressedImage forState:UIControlStateHighlighted];

UIImage *image = [UIImage imageNamed:@"fullversion_icon.png"];
UIImageView *iconView = [[UIImageView alloc]initWithFrame:CGRectMake((button.frame.size.height - (image.size.width / 2))/2, (button.frame.size.height - (image.size.width / 2))/2, image.size.width / 2, image.size.height / 2)];
iconView.image = image;
[button addSubview:iconView];
[iconView release];

UILabel     *iconLabel = [[UILabel alloc]initWithFrame:CGRectMake(iconView.frame.origin.x * 2 + iconView.frame.size.width, (button.frame.size.height - (image.size.width / 2))/2, 180, 24)];
iconLabel.text = @"Download Full Version";
iconLabel.shadowColor = [UIColor blackColor];
iconLabel.shadowOffset = CGSizeMake(1.0, 1.0);
iconLabel.backgroundColor = [UIColor clearColor];
iconLabel.textColor = [UIColor whiteColor];
iconLabel.font = [UIFont boldSystemFontOfSize:14.0];
[button addSubview:iconLabel];
[iconLabel release];

}

+(void)actionDownloadPaidVersion:(id)sender
{
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.apple.com/app/filehider/id475295711"]];
} 
```

现在在我需要按钮的视图控制器上。

1.  添加一个简单的按钮（buttonAd）。

2.  使用参数 buttonAd 调用 CustomButton 的 createDownloadFullVersionButton 方法，如下所示：

    ```
    [CustomBarButton createDownloadFullVersionButton:buttonAd]; 
    ```

# sencha-touch - 来自 JSONP 代理的 Sencha Touch 成功回调？

> ID：10656296
> 
> 赞同：1
> 
> 时间：2012-05-18T16:22:45.300
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我只是在学习煎茶触摸。我正在尝试从服务器检索数据（按照入门示例）。我正在尝试在成功回调中打印对控制台的响应。这是我尝试使用的代码，但没有将任何内容打印到控制台。

```
proxy: {
  type: 'jsonp',
  url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://feeds.feedburner.com/SenchaBlog',
  reader: {
    type: 'json',
    rootProperty: 'responseData.feed.entries'
  },
  listeners: {
    success: function(response) {
      console.log(response)
    }
} 
```

那么，成功回调的正确语法是什么，以便我可以对响应执行一些操作，例如在控制台中打印它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:34:05.327

改变这个

```
rootProperty: 'responseData.feed.entries' 
```

为了这：

```
root: 'responseData.feed.entries' 
```

或者你可以改变上面`proxy: {type: 'jsonp' ... }`的`proxy: {type: 'ajax' ... }`加号。

我希望这些有帮助。

# javascript - 使用 javascript 在 html 中查找文本并返回以下字符串

> ID：10656298
> 
> 赞同：0
> 
> 时间：2012-05-18T16:22:50.790
> 
> 标签：javascript, jquery, google-chrome

我正在编写一个简单的 chrome 扩展来查找页面正在运行的 wordpress 主题的名称。解析“wp-content/theme”然后返回主题后的下一个单词是最容易的吗？

例子：

查找 - wp-content/theme/

```
<link rel="stylesheet" id="pagelines-pro-css" href="http://example.com/wp-   content/themes/platformpro/" 
```

返回文本 - Plateforpro

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:52:09.620

你可以得到 jQuery 的链接并检查它是否是 wordpress 主题的链接，然后得到最后一部分，如下所示：

```
$('link').each(function() {  
    var href = $(this).attr('href');  
    if (href.indexOf('wp-content/themes') != -1) {  
        if (href.lastIndexOf('/') == href.length - 1) {  
            href = href.substring(0, length- 2);  
        }  
        var theme = href.substring(href.lastIndexOf(/), href.length - 1);  
    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:32:51.870

除了主题可以在主题的子文件夹中。你要小心那个。

# c# - 各代垃圾收集及阈值

> ID：10656314
> 
> 赞同：6
> 
> 时间：2012-05-18T16:23:38.183
> 
> 标签：c#, .net, garbage-collection

[我下载了“在 .Net 内存管理的幕后](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/learning-memory-management/memory-management-fundamentals?utm_source=reflector&utm_medium=blog&utm_content=rickyleeks5&utm_campaign=antsmemoryprofiler)”一书的免费副本。在其中一章中，作者提到了各个代的阈值，这将迫使 GC 收集该特定代和所有其他子代。下面给出的确切文本：

*在以下条件之一下，GC 会在单独的线程上自动运行。*

*当任何一代中的对象大小达到特定于一代的阈值时。准确地说，当：*

*   *第 0 代命中 ~256 K*
*   *Gen 1 命中 ~ 2 MB（此时 GC 收集 Gen 1 和 0）*
*   *Gen 2 达到 ~10 MB（此时 GC 收集 Gen 2、1 和 0）*

*值得牢记的是，上述阈值仅仅是起始级别，因为 .NET 会根据应用程序的行为修改级别。*

我想知道是否有一种方法可以确定给定应用程序运行时的第二代当前阈值是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:28:47.497

[类似的问题](https://stackoverflow.com/questions/3055651/net-4-gc-known-thresholds-to-trigger-collection)和[另一个](https://stackoverflow.com/questions/6146334/what-triggers-a-gen2-garbage-collection)，都说不。[我在GC 类](http://msdn.microsoft.com/en-us/library/baa1f39s)中也看不到任何东西。

# perl - 如何从包含在子文件夹中的多个 PDF 文件中提取文本？

> ID：10656319
> 
> 赞同：0
> 
> 时间：2012-05-18T16:23:56.340
> 
> 标签：perl, pdf, batch-file, indexing

我需要组织数千个名称和组织不当的 PDF 文件。它们位于一个主文件夹中，但它们存储在各种子文件夹中，我无法更改该文件夹结构。

我的目标是提取所有 PDF 的文本并将其附加到一个大文本文件中，这对于以后的索引很有用。在我的文本文件中，我想在文本文件夹中获取 PDF 文件路径和每一页的末尾`@@@@ End of page # 1 @@@@`。

文本文档将开始：

```
@@@@ PDF Filepath : $thefilepath @@@@
.... text ....
.... text ....
.... text ....
@@@@ End of page # 1 @@@@
.... text ....
.... text ....
@@@@ End of page # 2 @@@@
@@@ PDF Filepath : $thenextfilepath @@@@
.... text ....
....
.... 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:42:29.423

最明显的方法是简单地遍历文件，使用**readdir**内置函数来获取子文件夹和文件的名称。对于每个文件，您使用一些 Perl 模块或命令行实用程序（例如[CAM::PDF](http://search.cpan.org/dist/CAM-PDF/)、[Text::FromAny](http://search.cpan.org/perldoc?Text%3a%3aFromAny)或**pdftotext**）提取文本，并将其与 PDF 文件路径和页面信息一起附加到输出文本文件中。

# svn - 如何在 SVN 中重新集成具有损坏合并历史的功能分支？

> ID：10656320
> 
> 赞同：0
> 
> 时间：2012-05-18T16:23:56.717
> 
> 标签：svn, merge, branching-and-merging, merge-conflict-resolution, tree-conflict

我有一个长期存在的功能开发分支，我们称之为 dev-foo。问题是，当我尝试将它合并到 release-1 中时，我会遇到各种可怕的树冲突和源冲突，这些都没有任何意义。我已经将它们重新集成到一个新的基于主干的分支中，以及其他想要集成在一起的功能。我尝试与此集成分支进行的每次合并都同样存在可怕的冲突。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:09:40.047

我强烈怀疑您的开发分支中的主干合并之一在解决冲突和提交它的过程中被您意外破坏。这意味着你的开发分支的合并历史是“中毒”的，合并它只会延长你和其他人的痛苦和折磨。

振作起来，一切都不会丢失！

这是我用来“重建”损坏的开发分支以重新集成而不从主干引入先前损坏的合并的方法：

1.  从启动开发分支的同一点启动一个新分支。
2.  将所有 dev-branch 修订合并到重建分支中 - 直到但不包括来自其父分支（主干）的下一次合并。
3.  从 dev-branch-parent（主干）合并到重建分支中与原始 dev-branch 历史中下一步合并的相同修订。这次不要误会了。
4.  比较（在 SVN URL 之间）此时的 dev-branch 与到目前为止的重建分支。在继续之前证明或解决任何差异。
5.  重复步骤 2-4，直到您重建了整个开发分支，但没有合并问题。
6.  将重新集成目标分支合并到重构的开发分支中。
7.  解决任何开发冲突并测试构建。
8.  Re-integrate 将重构的开发分支合并到目标分支中。

# android - Android FragmentStatePagerAdapter

> ID：10656323
> 
> 赞同：24
> 
> 时间：2012-05-18T16:24:09.993
> 
> 标签：android, android-fragments, fragmentpageradapter

我正在使用[此示例](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)使用 FragmentStatePagerAdapter 。

MyAdapter 类实现如下：

```
public static class MyAdapter extends FragmentStatePagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {
            return ArrayListFragment.newInstance(position);
        }
    } 
```

ListFragment 类包括以下创建新实例的方法：

```
 /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static ArrayListFragment newInstance(int num) {
        ArrayListFragment f = new ArrayListFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    } 
```

当我在我的活动中创建一个新的片段状态寻呼机适配器时，`getItem`会调用它，然后调用`newInstance`ListFragment 类中的方法。当我想创建一个新片段时，这很棒。

但是我不清楚如何修改`getItem`（如果甚至需要）以在片段对象*已经存在时*获取片段对象以及用户页面从例如第 2 页到第 1 页。我希望我的 Activity 之前检索现有的创建片段，以便它可以运行`AsyncMethod`位于片段类中的内部类。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-10-06T14:52:29.760

我认为解决方案比提供的答案简单得多。

如果您查看 的[来源`FragmentStatePagerAdapter.instantiateItem()`](https://github.com/android/platform_frameworks_support/blob/432f3317f8a9b8cf98277938ea5df4021e983055/v4/java/android/support/v4/app/FragmentStatePagerAdapter.java#L92)，您会注意到它`instantiateItem()`为您处理此逻辑，因此您的实现`getItem()`应该始终返回一个新实例。

因此，为了返回现有的 Fragment，只需执行以下操作（假设您从 调用`ViewPager`）：

```
Fragment f = (Fragment) getAdapter().instantiateItem(this, getCurrentItem()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-02T11:36:26.530

虽然@imiric 的解决方案非常简洁，但它需要了解类的实现仍然让我感到困扰。我的解决方案包括将以下内容添加到您的适配器中，它应该与 FragmentStatePagerAdapter 表现良好，可能会破坏片段：

```
 private SparseArray<WeakReference<Fragment>> mFragments = new SparseArray<>();

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Fragment f = (Fragment) super.instantiateItem(container, position);
        mFragments.put(position, new WeakReference<>(f));  // Remember what fragment was in position
        return f;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        super.destroyItem(container, position, object);
        mFragments.remove(position);
    }

    public Fragment getFragment(int position) {
        WeakReference<Fragment> ref = mFragments.get(position);
        Fragment f = ref != null ? ref.get() : null;
        if (f == null) {
            Log.d(TAG, "fragment for " + position + " is null!");
        }
        return f;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T20:45:39.510

我已经实现了与您所拥有的类似的东西。我像这样扩展了`FragmentPagerAdapter`课程：

```
public class ContactsFragmentPagerAdapter extends FragmentPagerAdapter {
    ActionBar mActionBar;
    private List<Fragment> mFragments;

    public ContactsFragmentPagerAdapter(FragmentManager fm, List<Fragment> fragments) {
        super(fm);
        mFragments = fragments;
    }

    @Override
    public int getCount() {
        return mFragments.size();
    }

    @Override
    public Fragment getItem(int position) {
        return mFragments.get(position);
    }

    public void setActionBar(ActionBar bar) {
        mActionBar = bar;
    }
} 
```

`List`请注意，我已向构造函数添加了一个参数以传入`Fragment`对象。这样`getItem()`，此类的方法可以返回任何扩展`Fragment`的类或其任何子类，而不是`ArrayListFragment`像您所做的那样仅返回一个特定的类。

在`Activity`我实例化我的子类的地方，`FragmentPagerAdapter`我传入了`Fragment`对象列表：

类实例化 FragmentPagerAdapter

```
public final class ContactManager extends Activity {
    private ContactsFragmentPagerAdapter mAdapter;
    private ViewPager mPager;
    public ActionBar mActionBar;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.contact_manager);

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, ContactsListFragment.class.getName()));
        fragments.add(Fragment.instantiate(this, GroupsListFragment.class.getName()));
        mAdapter = new ContactsFragmentPagerAdapter(this.getFragmentManager(), fragments);

        mPager = (ViewPager) findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mPager.setOnPageChangeListener(new OnPageChangeListener() {
            @Override
            public void onPageScrollStateChanged(int arg0) {}

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {}

            @Override
            public void onPageSelected(int arg0) {
                mActionBar.getTabAt(arg0).select();
            }
        });

    }

} 
```

通过访问变量“fragments”，您可以访问先前创建`Fragment`的，以便您可以运行该`Fragment`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-12T19:13:28.433

```
public class MyPagerAdapter extends FragmentStatePagerAdapter {
    final Context m_context;
    final WeakReference<Fragment>[] m_fragments;

    public DetailPagerAdapter(FragmentManager fm) {
        super(fm);
        m_context = ...
                m_fragments = new WeakReference[enter size here];
    }

    @Override
    public Fragment getItem(int position) {
        final Fragment fragment = instantiate your fragment;
        m_fragments[position] = new WeakReference<Fragment>(fragment);
        return fragment;
    }

    @Override
    public int getCount() {
        return ...
    }

    public Fragment getFragment(final int position) {
        return m_fragments[position] == null ? null :
            m_fragments[position].get();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T06:19:52.140

不需要修改 FragmentPagerAdapter，因为 FragmentManager 缓存了 Fragment。所以你必须在里面找到。使用此函数按寻呼机适配器位置查找片段。

```
public Fragment findFragmentByPosition(int position) {
    FragmentPagerAdapter fragmentPagerAdapter = getFragmentPagerAdapter();
    return getSupportFragmentManager().findFragmentByTag(
            "android:switcher:" + getViewPager().getId() + ":"
                    + fragmentPagerAdapter.getItemId(position));
} 
```

*v4 支持 api 的示例代码。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-11T10:46:12.850

我认为这可能会有所帮助：

```
class HomePagerAdapter(fragmentManager: FragmentManager) : FragmentStatePagerAdapter(fragmentManager, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT) {

    private val fragmentConstructors: List<() -> Fragment> by lazy {
        listOf(
                ::AuctionLotsFragment,
                ::ChatListFragment,
                ::MarketHomeFragment,
                ::WalletSectionsFragment,
                ::SettingsFragment
        )
    }

    private val fragments: HashMap<Int, WeakReference<Fragment>> by lazy {
        HashMap()
    }

    override fun getCount(): Int = fragmentConstructors.size

    override fun getItem(position: Int): Fragment {
        return fragments[position]?.get() ?: this.createFragmentForPosition(position)
    }

    private fun createFragmentForPosition(position: Int): Fragment {
        val fragment = fragmentConstructors[position].invoke()
        fragments[position] = WeakReference(fragment)
        return fragment
    }

} 
```

# ruby-on-rails - ubuntu 10.04 中的“update-rc.d：/etc/init.d/unicorn_app：文件不存在”

> ID：10656324
> 
> 赞同：6
> 
> 时间：2012-05-18T16:24:16.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu, nginx, unicorn

我正在尝试在 linode 的 ubunton 10.04 中配置 unicorn + nginx 以部署我的 rails 应用程序，并且当我执行命令时：

```
sudo update-rc.d unicorn_app defaults 
```

我得到下一个错误：

```
update-rc.d: /etc/init.d/unicorn_app: file does not exist 
```

但是我可以看到`unicorn_app`文件`init.d`夹中的文件。在 ubuntu 终端中，`unicorn_app`文件颜色为红色，背景为灰色。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:48:11.260

我猜 LS 中的“红色”颜色意味着 unicorn_app 是一个损坏的符号链接。请尝试`ls -l /etc/init.d/unicorn_app`，看看它指向的文件是否存在。

此外，您可以运行`file /etc/init.d/unicorn_app`查看它是否是损坏的符号链接。

# cakephp - 为什么我用 cakephp 看到这个会话错误

> ID：10656327
> 
> 赞同：3
> 
> 时间：2012-05-18T16:24:26.283
> 
> 标签：cakephp, cakephp-1.3

我在 godaddy 上安装了 cakephp 应用程序，但是出现了问题，我看到了这个错误，请任何人帮助我..脚本正常工作，但我无法使用用户控制器登录

```
 Warning (2): session_start() [function.session-start]: open(/var/chroot/home/content/37/7269737/tmp/sess_5fngsu7g8llj60a9075mkkgh07, O_RDWR) failed: No such file or directory (2) [ROOT/7269737/html/cake/libs/cake_session.php, line 587]

    Warning (2): session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/content/37/7269737/html/cake/libs/debugger.php:683) [ROOT/7269737/html/cake/libs/cake_session.php, line 587]

    Warning (2): session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/content/37/7269737/html/cake/libs/debugger.php:683) [ROOT/7269737/html/cake/libs/cake_session.php, line 587]

    Warning (2): Cannot modify header information - headers already sent by (output started at /home/content/37/7269737/html/cake/libs/debugger.php:683) [ROOT/7269737/html/cake/libs/cake_session.php, line 588]

    Warning (2): Unknown: open(/var/chroot/home/content/37/7269737/tmp/sess_5fngsu7g8llj60a9075mkkgh07, O_RDWR) failed: No such file or directory (2) [Unknown, line ??]

    Warning (2): Unknown: Failed to write session data (files). Please verify that the current setting of session. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:48:55.397

您必须执行以下步骤

1.  将写入权限设置为默认的 /tmp 文件夹
2.  更改 php.ini 以指向您有权访问的目录而不是 /tmp
3.  设置 Configure::write('Session.save', 'cake') 并将它们放在 cake app/tmp 中，您可以在其中明确管理权限。

为此，您必须更改**config/core.php**文件中的会话设置。有几种选择。默认是使用 php.ini 设置来保存会话。更多细节[CakePHP 核心配置变量](http://book.cakephp.org/1.2/view/44/CakePHP-Core-Configuration-Variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:45:22.327

这个错误的直接原因是您无法在目录中写入`/var/chroot/home/content/37/7269737/tmp/`。

要么此文件夹不存在，请创建它。

或者它在那里，你需要给它`0644`权限级别。

希望这可以帮助！

# jquery - 可以定位不相对于视口的 Jquery ui 对话框

> ID：10656330
> 
> 赞同：0
> 
> 时间：2012-05-18T16:24:49.063
> 
> 标签：jquery, jquery-ui

我尝试在网站上以严格的位置定位 Jquery ui 的对话框。我尝试将它们用作小弹出窗口，转一圈然后在不同的位置重新弹出它们。但是，当我滚动页面时，对话框会跟随我的视口。我用这段代码来定位它们：

```
$("#bubble").dialog("option", "position", [xLoc,yLoc]); 
```

有没有办法给他们严格的位置？

在这里你可以查看我尝试过的网站。当您向下滚动弹出窗口时，跟随您:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:03:24.953

根据[jQuery UI 对话框的文档](http://jqueryui.com/demos/dialog/#option-position)，位置选项显示相对于用户视口的对话框。

因此，如果您不想要此功能，您只需通过更改对话框的值`top`和`left`CSS 值来重新定位对话框。无论视口如何，这都会将对话框定位在屏幕的左上角。

```
$('.ui-dialog').css({
    top: 0,
    left: 0
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:32:05.783

```
$('your_selector').dialog({
  open: function(){
    $('.ui-dialog').css({
        "position": "absolute",
        "top": ( $(window).height() - $(this).height() ) / 2+$(window).scrollTop() + "px",
        "left": ( $(window).width() - $(this).width() ) / 2+$(window).scrollLeft() + "px"
    });
  }
}); 
```

我知道它是在某个帖子中添加的，很抱歉重新添加，但这应该可以

# iphone - iPhone：从相机捕获视频后打开新的视图控制器

> ID：10656334
> 
> 赞同：2
> 
> 时间：2012-05-18T16:25:29.417
> 
> 标签：iphone, xcode

我想在按下停止视频捕获按钮后打开新的视图控制器。我正在使用此代码，但我无法执行此操作。

```
-(void)shootvideo
    {

    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;

        imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

        imagePicker.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];

    [self presentModalViewController:imagePicker animated:YES];

    }

    -(void) imagePickerController: (UIImagePickerController *) picker
    didFinishPickingMediaWithInfo: (NSDictionary *) info 
    {

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

         if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)
         == kCFCompareEqualTo) 
         {

         NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];

           NSURL *videoUrl=(NSURL*)[info objectForKey:UIImagePickerControllerMediaURL];

         if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
         UISaveVideoAtPathToSavedPhotosAlbum (moviePath, nil, nil, nil);
         }
         }

         [self dismissModalViewControllerAnimated:YES];

         // nextviewcontroller *test=[[nextviewcontroller alloc]init];

     //[self.navigationController pushViewController:test animated:YES];

         }

    } 
```

按下停止捕获视频按钮后，我想导航到另一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:37:16.377

您已经展示了图像选择器，`presentModalViewcontroller`因此您无法调用`[self.navigationController pushViewController:test animated:YES];`图像选择器。你有两个选择一个很简单

1）而不是调用`[self dismissModalViewControllerAnimated:YES];`图像选择器，只需调用

```
 nextviewcontroller *test=[[nextviewcontroller alloc]init];
   [self presentModalViewController:nextviewcontroller animated:YES]; 
```

2）使用委托来调用新的视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:05:41.953

如果您使用延迟时间为 0.2 的 performSelector 是可能的......这里只需调用该方法及其工作正常，在方法中您可以推送您的 nextViewController....希望这对您有所帮助... :)

# excel - 在 Excel 中连接字段

> ID：10656335
> 
> 赞同：-2
> 
> 时间：2012-05-18T16:25:31.320
> 
> 标签：excel, formula

我有一个 Excel 文档，其中 A 列中的表名和 B 列中的列名。

```
A1      B1
Account Account_ID 
```

我可以得到正确的语法。

公式为：

```
=CONCATENATE("Select '",$A$1,"','",B1,"',",B1,", count(*) From ",$A$1, " group by '",",B1,";") 
```

我得到的输出是：

```
Select 'ACCOUNT','ACCOUNT_ID',ACCOUNT_ID, count(*) From ACCOUNT group by 'ACCOUNT','ACCOUNT_ID',ACCOUNT_ID; 
```

我需要的输出是：

```
Select 'ACCOUNT','ACCOUNT_ID',ACCOUNT_ID, count(*) From ACCOUNT group by ACCOUNT_ID; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:37:12.420

尝试使用 & 符号进行连接。

您可以将字符串文字和单元格内容链接在一起。

```
="String1" & "'" & "String2" 
```

将导致

```
String1'String2 
```

因此，要尝试从 excel 单元格构建 sql 语句，假设您有一个包含表格和字段的 excel 表

```
 A        B       C
1 Table1  Column1  Column2
2 Table2  COlumn1  Column2 
```

您可以从这些值构建 sql 语句

```
="SELECT 'Table1', " & B1 & ", " & C1 & " FROM " & A1
="SELECT 'Table2', " & B2 & ", " & C2 & " FROM " & A2 
```

将产生

```
SELECT 'Table1', Column1, Column2 FROM Table1
SELECT 'Table2', Column1, Column2 FROM Table2 
```

引号指定字符串，而代号 (&) 将它们连接在一起。将评估一组字符串之外的任何内容。

例如，可以修剪和连接带有一堆空格的字符串

```
= TRIM(A1) & " Trimmed" 
```

会产生

```
Table1 Trimmed 
```

您的特定示例看起来像这样

```
="SELECT '" & A1 & "', '" & B1 & "', Account_ID, COUNT(*) FROM " & A1 & " GROUP BY " & B1 
```

# seo - 如何修复 Facebook Open Graph 调试工具中的“Parser Mismatched Metadata”错误？

> ID：10656337
> 
> 赞同：7
> 
> 时间：2012-05-18T13:41:30.727
> 
> 标签：seo, html, facebook

我最近将 Open Graph 标记添加到的网页的[Facebook 对象调试器](https://developers.facebook.com/tools/debug/)出现错误：

> 此元数据的解析器结果与输入元数据不匹配。这很可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。以下是解析结果中未看到的输入属性 => 内容对：'article:published_time => 2012-05-15'

以下是该工具报告的元标记：

```
Meta Tag:   <meta property="og:site_name" content="Mysite.com" />
Meta Tag:   <meta property="og:url" content="ful url" />
Meta Tag:   <meta property="fb:app_id" content="a number" />
Meta Tag:   <meta property="article:published_time" content="2012-05-15" />
Meta Tag:   <meta property="article:author" content="url to user profile page" />
Meta Tag:   <meta property="og:image" content="url to png" />
Meta Tag:   <meta property="og:type" content="article" />
Meta Tag:   <meta property="og:title" content="Well Versed" /> 
```

起初我认为这是发布时间的日期表单问题，但该字段似乎遵循[Facebook 在他们的示例中使用的时间格式](https://developers.facebook.com/docs/opengraph/objects/builtin/#article)。我不确定是什么产生了这个错误。顺序重要吗？

**更新**：我将下面的答案标记为已接受，因为显然人们通过他的修复解决了这个问题。但是，这不是对我有用的解决方案。这个[Stack Overflow 开放图答案](http://facebook.stackoverflow.com/a/11384431/43)成功了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:40:42.917

我的解决方案听起来很奇怪，但我使用修剪解决了这个问题，问题出在标题中，我的标题类似于“我的标题”。修剪字符串后一切正​​常。在我看来，Facebook 解析器不喜欢空格......至少尝试一下，看看是否可以为您修复错误。

希望有帮助！

# c# - 为什么我的 MySqlCommand 实际上没有更新我的表？

> ID：10656340
> 
> 赞同：0
> 
> 时间：2012-05-18T16:26:17.777
> 
> 标签：c#, mysql, mono, connector-net

我在 Mono 中有以下代码，使用 MySQL 连接器/网络：

```
try
{
    MatchPersonResult mpr = personServ.MatchPerson(p, "MatchAndStore", null);
    using(MySqlCommand successcmd = new MySqlCommand())
    {
        successcmd.CommandText = "UPDATE myccontacts SET mcid = @mcid, matchresult = @mr, datetimematched = @dtm WHERE id = @id";
        successcmd.Connection = conn;
        successcmd.Parameters.Add("@mcid", MySqlDbType.Int32).Value = int.Parse(mpr.PersonID);
        successcmd.Parameters.Add("@mr", MySqlDbType.Enum).Value = mpr.MatchResultStatus;
        successcmd.Parameters.Add("@dtm", MySqlDbType.DateTime).Value = DateTime.Now.Year.ToString() + "-" + DateTime.Now.Month.ToString() + "-" + DateTime.Now.Day.ToString() + " " + DateTime.Now.Hour.ToString() + ":" + DateTime.Now.Minute.ToString() + ":" + DateTime.Now.Second.ToString();
        successcmd.Parameters.Add("@id", MySqlDbType.Int32).Value = person["id"];
        successcmd.ExecuteNonQuery();
        Console.WriteLine(mpr.PersonID);
    }
} 
```

执行查询时，表实际上并没有更新任何内容。我在 Console.WriteLine 调用上设置了一个断点，这样我就可以检查发生了什么，当它被击中时，我使用代码中提到的 id 加载行并且它尚未更新。即使我不调试而只是让代码执行，我也看到数据库没有发生任何事情。为清楚起见 - personServ.MatchPerson 实际上是导入到我的解决方案中的 Web 参考，因此我可以在另一端检查并确实看到正确的数据已发送过来，并且应该进行数据库更新。

有谁知道该怎么做？

TIA，本杰

PS：*除了*数据库更新之外的所有东西都在工作——这里的catch块（为了简洁起见没有发布）永远不会被击中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:33:29.307

你可以试试这个代码吗？

```
 try
    {
        MatchPersonResult mpr = personServ.MatchPerson(p, "MatchAndStore", null);
        using(MySqlCommand successcmd = new MySqlCommand())
        {
            successcmd.CommandText = "UPDATE myccontacts SET mcid = @mcid, matchresult = @mr, datetimematched = @dtm WHERE id = id";
            successcmd.Connection = conn;
            successcmd.Parameters.AddWithValue("@mcid",int.Parse(mpr.PersonID));
            successcmd.Parameters.AddWithValue("@mr",(int)mpr.MatchResultStatus);
            successcmd.Parameters.AddWithValue("@dtm", DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss"));
            successcmd.Parameters.AddWithValue("@id",Convert.Int32(person["id"]); 
            successcmd.Connection.Open();
            successcmd.ExecuteNonQuery();
            successcmd.Connection.Close();
            Console.WriteLine(mpr.PersonID);
        }
    } 
```

# javascript - Javascript - 我的网址是什么？

> ID：10656341
> 
> 赞同：0
> 
> 时间：2012-05-18T16:26:22.833
> 
> 标签：javascript, url

> **可能重复：**
> [如何从该脚本中获取脚本文件名？](https://stackoverflow.com/questions/710957/how-might-i-get-the-script-filename-from-within-that-script)
> [JavaScript - 如何获取被调用脚本的 URL？](https://stackoverflow.com/questions/2976651/javascript-how-do-i-get-the-url-of-script-being-called)

如何在我的 javascript 代码中确定加载 javascript 的 URL，例如，如果我有一个页面[http://www.example.com/index.html](http://www.example.com/index.html)

```
<html>
<script src='/code/whereami.js'></script>
... 
```

然后我的 javascipt 将从[http://www.example.com/code/whereami.js](http://www.example.com/code/whereami.js)加载，但是如何*从*代码中找到这个 URL？

（是的，根据定义，作为程序员，我应该知道我的文件在哪里——这里练习的重点是验证结果页面的完整性）

# actionscript-3 - 使用 TOUCH BEGIN/MOVE/END 为四个并发用户创建 TAP/SWIPE 事件

> ID：10656345
> 
> 赞同：0
> 
> 时间：2012-05-18T16:27:00.717
> 
> 标签：actionscript-3, air, multi-touch, user-interaction

我正在使用多点触控屏幕通过 Adob​​e AIR 进行交互式演示，并且四个人将同时使用该屏幕。

我已经用 MouseEvent 进行了一些测试（它适用于一个用户），我认为用我自己的可以处理多个用户的事件替换该事件是可行的方法，或者我在这里错过了什么？

有一些工作可以创建该事件，所以我很想提供一些意见，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:39:28.827

您需要将 inputMode 设置为使用多点触控，然后您会想要监听 TouchEvents 而不是 MouseEvents（相信至少单点它仍会调度 MouseEvent，但不确定这是否适用于多点触控）。

[http://help.adobe.com/en_US/flex/mobileapps/WSe11993ea1bd776e5-13e27e4812a431dbafc-8000.html](http://help.adobe.com/en_US/flex/mobileapps/WSe11993ea1bd776e5-13e27e4812a431dbafc-8000.html)

```
flash.ui.Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT; 
```

# c++ - 在 Visual Studio 中通过 printf() 打印 std::string

> ID：10656346
> 
> 赞同：2
> 
> 时间：2012-05-18T16:27:12.933
> 
> 标签：c++, visual-c++, visual-studio-2012, std

```
#include <string>
#include <cstdio>
int main() {
  std::string s = "12345678";
  std::printf("[%s]\n", s);
} 
```

这是缺少“.c_str()”的明显错字。但是即使使用 /Wall VS2011 也不会发出任何警告，并且程序可以正常工作。如果要在 gcc 中编译此代码，它会显示“警告：不能通过 '...' 传递非 POD 类型的对象 'struct std::string'；调用将在运行时中止”并且程序因“非法指令”而崩溃.

他们是否真的在 VS STL 中实现了一个技巧来使具有这种错字的程序工作，只是因为这种错字很常见？

**更新**：问题是为什么它在 VS 中有效？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T16:36:47.257

原因似乎是在 Visual Studio 的实现中`std::string`，第一个成员是`char*`. 传递`string`值将这个指针（以及其他数据成员）复制到堆栈上，以及读取它的`%s`原因- 并正确解释它，因为需要以空值结尾。`printf()``char*``string`

当然，这依赖于未定义的行为，您不应该这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T16:34:12.177

它之所以有效，是因为未定义行为的一种可能结果是程序按照您的意愿行事。你不需要再看这个了。未定义的行为是您简单地避免而不是试图理解它在特定编译器中的表现形式。

# ruby - 在 CLI gem 中，我在哪里存储第三方二进制可执行文件？

> ID：10656348
> 
> 赞同：2
> 
> 时间：2012-05-18T16:27:22.887
> 
> 标签：ruby, binary, gem, command-line-interface

似乎gem的可执行文件通常存储在`/bin`文件夹中，所有代码都存储在`/lib`文件夹中。我有一些第三方二进制可执行文件需要包含在我的 gem 中。我应该把它们放在`/bin`文件`/lib`夹中吗？

从我所见，该`/bin`文件夹更多地用于系统可执行文件或我希望我的系统能够从命令行调用的脚本。所以我不确定是否应该在文件夹中包含第三方二进制`/bin`文件。它们需要根据需要从`/lib`代码中调用，而不是从命令行调用。

我想我可以把它们放在一个`/lib/binaries`文件夹里。随后，是否有从我的代码中调用这些可执行文件的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:59:23.453

一般来说，您不想在您的应用程序中包含“第三方可执行文件”；理想情况下，如果它们是 RubyGems，您可以在 gemspec 中依赖它们。

话虽如此，假设您有充分的理由这样做，您可以通过以下方式确保它们分布在您的 RubyGem 中：

*   将它们放入`bin`
*   确保它们包含在`files`gemspec 的属性中
*   确保它们包含在`executables`gemspec 的属性中
*   确保`bindir`已设置。

所以，如果你有 / /bin /bin/your_app /bin/other_app /bin/other_app2 /lib/your_app.rb

您的 gemspec 将需要如下所示：

```
spec = Gem::Specification.new do |s| 
  s.name = 'your_app'
  s.version = '1.2.3'
  s.author = 'Your'
  s.email = 'your@email.com'
  s.platform = Gem::Platform::RUBY
  s.summary = 'Your app summary'
  s.description = 'Your app description`
  s.files         = [
    'bin/your_app',
    'bin/other_app',
    'bin/other_app2',
    'lib/your_app.rb',
  ]
  s.executables   = ["your_app","other_app","other_app2"]
  s.require_paths = ["lib"]
  s.bindir = 'bin'
end 
```

当用户通过 RubyGems 安装您的应用程序时，三个可执行文件将位于其路径中。

# probability - 事件的概率

> ID：10656349
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:27:26.247
> 
> 标签：probability, probability-theory

这是一个概率问题：您观察到在道路上平均每 5 分钟有 0.5 辆汽车从您面前经过。在 10 分钟内看到至少 1 辆车的概率是多少？

我试图通过两种方式解决这个问题。第一种方法是说：P（5 分钟内没有车）= 1 - .5 = .5。P（前 5 分钟无车，后 5 分钟无车）= P（前 5 分钟无车）* P（后 5 分钟无车）独立。因此 P（10 分钟内至少 1 辆车）= 1 - .5*.5 = .75。

但是，如果我尝试相同的方法，使用泊松分布，每单位时间的速率 lambda = .5，在 2 个单位时间内，我得到：P（至少 1 辆汽车在 2 个单位时间内）= 1 - exp(- 2*λ) = .63。

难道我做错了什么？如果不是，如何解释这种差异？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:19:56.270

你的第一个计算不正确。平均 0.5 辆车/5 分钟并不意味着 P（5 分钟内没有车）= 0.5。例如，考虑一个过程，每 5 分钟，您看到没有汽车的概率为 90%，或者有 5 辆汽车的概率为 10%。平均每五分钟你会看到 0.5 辆车，但你在接下来的 5 分钟内看到 0 辆车的概率显然不是 50%。

我还没有检查你的第二个例子的计算；计算逻辑看起来正确，但结论不正确：您正在对分布（泊松）进行假设，这是合理的，但问题陈述并未暗示。

如果你再看我的例子，这与你的问题描述一致，在 10 分钟内看到 0 辆车的概率是 0.9 x 0.9 = 0.81，这给你 19% 的看到一辆车或更多。我们可以任意改变我的例子，给你各种各样的概率。

从您的问题陈述中，您唯一可以说的是“从长远来看，您每 5 分钟会看到 0.5 辆汽车”。除此之外，您无法在 10 分钟内就预期的情况做出声明，除非您对到达汽车的分布做出一些假设。

# c - 我是否需要为 MPI::Isend 提供相应的 MPI::Irecv？

> ID：10656350
> 
> 赞同：10
> 
> 时间：2012-05-18T16:27:28.550
> 
> 标签：c, mpi

一个看似愚蠢的问题，但我似乎无法以某种方式找到明确的答案。

基本问题是我是否需要为 MPI::Isend 提供相应的 MPI::Irecv？

也就是说，即使消息发送是非阻塞的，只要我在重用发送缓冲区之前等待发送完成，我是否需要使用非阻塞接收和等待接收发送的缓冲区？

我的观点是，我想在发送消息时使用非阻塞发送来“做其他事情”，但接收进程将立即使用缓冲区，所以我希望它们阻塞直到真正接收到缓冲区。

似乎我应该能够使用 MPI::Recv 接收消息，即使它们是使用 MPI::Isend 发送的，但我想知道我是否遗漏了什么？

一点简单的伪代码

```
 if( rank == 0 ){
   int r;
   for ( int i = 0; i < n; i++ ){

     // DO SOME STUFF HERE...

     request.Wait(status);
     request2.Wait(status);
     request3.Wait(status);

     r = i;
     memcpy( key, fromKey(i), ...);
     memcpy( trace, fromTrace(i), ...);

     request  = MPI::COMM_WORLD.Isend( &r, 1, MPI::INT, node, tag );
     request2 = MPI::COMM_WORLD.Isend( key, 10, MPI::INT, node, tag );
     request3 = MPI::COMM_WORLD.Isend( trace, nBytesTotal, MPI::BYTE, node, tag );

     // DO SOME MORE STUFF HERE.

   }
   r = -1;
   request  = MPI::COMM_WORLD.Isend( &r, 1, MPI::INT, node, tag );

   // Carry on ...

  } else {

   int r = -1;
   MPI::COMM_WORLD.Recv( &r, 1, MPI::INT, 0, tag, status );
   while( r >= 0 ){

     MPI::COMM_WORLD.Recv( &key, 10, MPI::INT, 0, tag, status );
     memcpy( saveKey, key, ...);

     MPI::COMM_WORLD.Recv( &trace, nBytesTotal, MPI::BYTE, 0, tag, status );
     memcpy( saveTrace, trace, ...);

     MPI::COMM_WORLD.Recv( &r, 1, MPI::INT, 0, tag, status );
  } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T16:54:41.460

不，您可以在通信两端自由混合阻塞和非阻塞 MPI 操作。阻塞与 MPI 调用何时将控制权返回给您的代码有关，而不是与正在传输的消息的内容有关。

每个 MPI 消息都带有一个“信封”，其中包含它的源、目标、标签和通信器。要成功接收消息，您的接收操作应该只**匹配它的信封**。信封绝不指定消息发送的准确程度——是通过阻塞，是通过非阻塞操作，是同步发送（`MPI_Ssend`）还是缓冲发送（ `MPI_Bsend`）。唯一的例外是所谓的“就绪模式”发送，它启动`MPI_Rsend()`或`MPI_Irsend()`要求匹配的接收操作已经发布，否则消息将不会被传递。

这就是为什么在整个 MPI 标准中使用术语“匹配接收操作”而不是类似于“相应接收功能”的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:39:58.753

是的，这很好。不要求发送/接收“种类”（或您想称呼它们的任何东西）匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:11:26.977

这与您使用什么发送/接收无关；但实施很重要。您必须注意代码中的阻塞点。例如，在使用阻塞通信时，您必须关心发送和接收呼叫，例如查看此代码

```
 if(rank==0)
 {
 MPI_Send(x to process 1)
 MPI_Recv(y from process 1)
 }
 if(rank==1)
 {
 MPI_Send(y to process 0);
 MPI_Recv(x from process 0);
 } 
```

在这种情况下会发生什么？进程0将x发送到进程1并阻塞直到进程1接收到x，进程0将y发送到进程0并阻塞直到进程0接收到y，但是进程0被阻塞所以进程1无限阻塞直到你杀死2个进程

# javascript - 在谷歌地图中关闭后重新打开信息窗口

> ID：10656351
> 
> 赞同：4
> 
> 时间：2012-05-18T16:27:32.200
> 
> 标签：javascript, google-maps-api-3

我有一张带有街景全景图、信息窗口和可拖动标记的地图。拖动标记后，函数请求 getPanoramaByLocation 以查看视图服务是否可用。如果不是，它会关闭信息窗口。这很好，但是当我再次单击标记时，信息窗口不再打开。请问你知道什么问题吗？发送

```
 var sv = new google.maps.StreetViewService();

    function initialize() {

        var optionMap = {
            zoom: 13,
            center: new google.maps.LatLng(47.390251,0.68882),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var myMap = new google.maps.Map(document.getElementById("mapDiv"), optionMap);
        var optionsMarker = {
            position: new google.maps.LatLng(47.390251,0.68882),
            map: myMap,
            draggable: true,
            title: "my marker"
            }
        var marker = new google.maps.Marker(optionsMarker);
        var infowindowDiv = '<div id="streetview" style="width:300px;height:200px;"' +'</div>';

        var infoWindow = new google.maps.InfoWindow({
            content: infowindowDiv,
            position: myMap.getCenter() });

        google.maps.event.addListener(marker, 'click', function() {
         infoWindow.open(myMap, marker);
         });

        google.maps.event.addListener(infoWindow, 'domready', function() {
            var panorama = new
        google.maps.StreetViewPanorama(document.getElementById("streetview"));
            panorama.setPosition(infoWindow.getPosition());

        google.maps.event.addListener(marker, 'dragend', function(event) {
          sv.getPanoramaByLocation(event.latLng, 50, processSVData);});             

        function processSVData(data, status) {
          if (status == google.maps.StreetViewStatus.OK) {

              var markerPanoID = data.location.pano;
              // Set the Pano to use the passed panoID
              panorama.setPano(markerPanoID);
              panorama.setPov({
                heading: 270,
                pitch: 0,
                zoom: 1
              });
              panorama.setVisible(true);
            } 
            else {
            infoWindow.close();
            infoWindow = null;              
            };
        }                   
    }); 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:46:37.490

来自 GMaps API 文档：

```
close() None    Closes this InfoWindow by removing it from the DOM structure. 
```

[https://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

所以...如果你关闭信息窗口，它就消失了。永远。如果你真的通过说“infoWindow = null;”来确保它消失了，那就更是如此 你必须做一个新的。我的建议是重构您的代码，使其具有一个单独的函数，该函数可以按需创建信息窗口并返回它。在您的点击事件定义中，检查 infowindow 是否为空，如果是，则获取一个新的。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:11:05.617

正如另一个答案所解释的，当用户单击关闭按钮时，信息框 html 会从 DOM 中删除，但 JS 对象仍然存在。

创建信息窗口时，您必须调用 open 方法才能在地图上看到它

```
myInfoWindow.open(mymap); 
```

因此，如果您收听“closeclick”事件并保持信息窗口状态

```
var infoWindowClosed = false;
google.maps.event.addListener(myInfoBox, "closeclick", function () {
    infoWindowClosed = true;
}); 
```

您可以按需重新打开 myInfoWindow

```
if(infoWindowClosed){
    myInfoWindow.open(mymap);
} 
```

# c++ - 立体声校准时访问冲突？

> ID：10656353
> 
> 赞同：0
> 
> 时间：2012-05-18T16:27:50.840
> 
> 标签：c++, opencv, access-violation, camera-calibration

我在立体声校准中执行调试时遇到访问冲突错误

代码如下

```
 for(int j=0;j<n;j++){    
                       cornersR[j]=cvPoint2D32f(cornersRp[j].x,cornersRp[j].y);
                       cornersL[j]=cvPoint2D32f(cornersLp[j].x,cornersLp[j].y);
                       } 
```

这些初始化如下，n是一个固定整数

```
 CvPoint2D32f* cornersRp = new CvPoint2D32f[ n ];
           CvPoint2D32f* cornersLp = new CvPoint2D32f[ n ];
           vector<CvPoint2D32f> cornersR;
           vector<CvPoint2D32f> cornersL; 
```

请帮帮我......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T16:34:40.333

为了使用`vector[]`，您必须确保`vector`在该索引处有一个元素。在这种情况下，两个向量都是空的，导致访问冲突。

将声明更改为：

```
vector<CvPoint2D32f> cornersR(n);
vector<CvPoint2D32f> cornersL(n); 
```

这将填充 . 的`vectors`默认`n`构造实例`CvPoint2D32f`。

如果没有默认构造函数，`CvPoint2D32f`您可以：

```
vector<CvPoint2D32f> cornersR(n, CvPoint2D32f(1,1));
vector<CvPoint2D32f> cornersL(n, CvPoint2D32f(1,1)); 
```

这将使用第二个参数的副本填充向量，或者使用[`vector::push_back()`](http://en.cppreference.com/w/cpp/container/vector/push_back)而不是`vector::operator[]`指定向量的初始大小：

```
vector<CvPoint2D32f> cornersR;
vector<CvPoint2D32f> cornersL;

cornersR.push_back(cvPoint2D32f(cornersRp[j].x,cornersRp[j].y)); 
```

# java - 当屏幕插图发生变化时，我该如何收听？

> ID：10656354
> 
> 赞同：1
> 
> 时间：2012-05-18T16:27:52.087
> 
> 标签：java, swing

我正在开发一个应用程序来设置它的大小以适应屏幕的边界（考虑到屏幕的插图）。但是，如果插图发生变化，例如当我在应用程序已经可见时自动隐藏我的任务栏时，窗口的大小将保持不变。是否可以监听这些插图何时可能发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:32:00.600

好吧，要隐藏任务栏，您的应用程序必须失去焦点，对吗？因此，您可以使用 WindowFocusListener 并在获得焦点时再次获得屏幕插图。

# java - 在JPA中删除多对多关系时出现奇怪的sql行为

> ID：10656356
> 
> 赞同：2
> 
> 时间：2012-05-18T16:27:53.900
> 
> 标签：java, hibernate, jpa-2.0

这是关于 Hibernate 生成的关于在多对多映射下删除一个关系的 sql 的问题，而不是“级联”问题。

我使用 JPA 2 和 hibernate 作为它的实现。

我有两个模型，用户和角色。一个用户可以有多个角色，一个角色可以有多个用户，所以它们是多对多映射：

```
@Entity
class User{
    @Id Long id;

    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
    @JoinTable(name = "user_role", inverseJoinColumns = @JoinColumn(name = "role_id"),
                joinColumns = @JoinColumn(name = "user_id"))
    private List<Role> roles;
 }

@Entity
class Role{
    @Id Long id;

    @ManyToMany(fetch = FetchType.LAZY,cascade = CascadeType.REFRESH, mappedBy = "roles")
    private List<User> users; 
 } 
```

并且映射工作良好，休眠自动为此映射创建三个表

```
table user
table role
table user_role 
```

现在问题来了，我想要的只是从一个用户中删除一个角色（不是删除一个用户或一个角色，只是一个用户和一个角色之间的一种关系，意味着只需要从表中删除一条记录`user_role`）。这是我尝试过的代码：

```
public void removeOneRoleFromUser(long userId, long roleId){
    User user = userService.getById(userId);
    Role role = roleService.getById(roleId);
    user.getRoles().remove(role);     //here
    userService.update(user);
} 
```

当我执行此代码时，它确实从用户中删除了该角色。但是当我检查hibernate为其生成的sql时，这不是我所期望的，hibernate生成的sql是：

```
delete from user_role where user_id = {userId}
insert into user_role values({user_id}, {role_id_not_removed}) 
...
insert into user_role values({user_id}, {another_role_id_not_removed}) 
```

**所以要从一个用户中删除一个角色，hibernate首先从用户中删除所有角色，然后将那些不应该删除的角色一一添加回用户。**

而我所期望的只是一个 sql 语句归档它：

```
delete from user_role where user_id = {userId} and role_id = {role_id} 
```

我知道还有其他一些方法可以存档，比如引入另一个`UserRoleMapping`映射到表的实体`user_role`，然后直接删除一个 UserRoleMapping 实例将从一个用户中删除一个角色；但我想知道是否有任何解决方案可以通过当前解决方案获得预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:40:08.727

我没有检查过[这个解释](http://assarconsulting.blogspot.fr/2009/08/why-hibernate-does-delete-all-then-re.html)是否属实，但它有好处。

没有任何索引列，列表实际上是一个包：没有顺序，并且允许重复。所以 Hibernate 认为你有可能在一个用户的角色列表中有两次相同的角色。

所以发布`delete from user_role where user_id = ? and role_id = ?`是不可能的，因为它可能会删除几个角色，而不仅仅是你从列表中删除的那个。

尝试添加索引列，或使用 a`Set<Role>`而不是`List<Role>`.

# facebook - 如何在php中保存访问令牌？

> ID：10656357
> 
> 赞同：0
> 
> 时间：2012-05-18T16:27:56.700
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我正在使用此端点来获取长期令牌：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

但我想知道如何使用 php 获取它。

我需要使用 curl 库吗？还是有最简单的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:17:52.500

这是一个与 facebook sdk 一起使用的简单 curl 函数。不要忘记将路径更改为`fb_ca_chain_bundle.crt`.

```
function curl($url, $certificate = false) {

    $c = curl_init($url);

    curl_setopt($c, CURLOPT_HTTPGET, true);
    curl_setopt($c, CURLOPT_FRESH_CONNECT, true);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);

    curl_setopt ($c, CURLOPT_SSL_VERIFYPEER, TRUE); 
    curl_setopt ($c, CURLOPT_CAINFO, dirname(__FILE__) . '/sdk/fb_ca_chain_bundle.crt');

    $output = curl_exec($c);

    if ($output === false) {
        curl_close($c);
        return false;
    }

    curl_close($c);
    return $output;

} 
```

这是获取长寿命令牌的方法调用：

```
§token = curl('https://graph.facebook.com/oauth/access_token?client_id='.
               $app_id.'&client_secret='.
               $app_secret.'&grant_type=fb_exchange_token&fb_exchange_token='.
               $api->getAccessToken()); 
```

# javascript - jQuery：根据索引分配类

> ID：10656358
> 
> 赞同：2
> 
> 时间：2012-05-18T16:27:59.340
> 
> 标签：javascript, jquery, html, css

使用 jQuery，是否可以根据其索引将类分配给对象？

例如，如果我有一个`ul`包含五个列表项的列表，我将如何将类“0”分配给第一项，将“1”分配给第二项，将“2”分配给第三项，等等？

这是我的第一次尝试：

```
$('ul.nav li').each(function(index){
  $(this).addClass(index);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T16:32:18.017

但要避免以数字开头类或id；

```
$('ul.nav li').each(function(index){
  $(this).addClass('at_'+ index);
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T16:31:15.443

请记住，类不能以数字开头，应该这样做：

```
$('ul.nav li').each(function(){
  $(this).addClass("index_"+$(this).index);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:32:43.913

类名不应以数字开头。而是做类似的事情

```
$('ul.nav li').each(function(index){
  $(this).addClass("class_"+index);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:32:57.867

它对我有用：

```
$('ul.nav li').each(function(index){
  $(this).attr('class', 'class'+index);
});​ 
```

[http://jsfiddle.net/8JCXD/7/](http://jsfiddle.net/8JCXD/7/)

# makefile - make 如何选择使用哪个规则

> ID：10656363
> 
> 赞同：2
> 
> 时间：2012-05-18T16:28:26.967
> 
> 标签：makefile

所以我在这里有一个makefile，看起来像

```
ALL_FILES=$(shell find . -name '*')

install : $(ALL_FILES)

$(INSTALL_LOCATION)/%.sh : %.sh  ;   /bin/usr/install -D $^ $@

$(INSTALL_LCOATION)/% : %   ;   /usr/bin/install -D $^ $@

$(INSTALL_LOCATION)/dir1/% : dir1/%   ;  /usr/bin/install -D $^ $@ 
```

我的问题是，第二次安装显然是第一个的超集，但我想第一个是第一个运行的，所以第二个被忽略了。但是，第二个不也是第三个的完整超集吗？

那么 make 如何选择使用哪个规则呢？它会选择最具体的规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:36:59.300

取决于make的版本。例如，在 3.82 之前的 GNU make 中，它会按照声明的顺序搜索模式，并简单地使用第一个匹配的模式，而不管具体性如何。在 3.82 及更高版本中，GNU make 使用最具体的规则，而不管声明顺序如何。这是一个简单的例子：

```
all: sub/foo.x

%.x:
    @echo "Prefer first match (stem is $*)."

sub/%.x:
    @echo "Prefer most specific match (stem is $*)." 
```

将输出与 gmake 3.81 和 gmake 3.82 进行比较：

```
$ gmake-3.81 
Prefer first match (stem is sub/foo).
$ gmake-3.82
Prefer most specific match (stem is foo). 
```

# hibernate - 获取错误 org.jasypt.exceptions.EncryptionOperationNotPossibleException

> ID：10656364
> 
> 赞同：3
> 
> 时间：2012-05-18T16:28:32.190
> 
> 标签：hibernate, struts

我正在使用 jasypt 1.9.0 用于数据库密码加密

# jdbc.properties

```
jdbc.driverClassName=oracle.jdbc.driver.OracleDriver
jdbc.url=jdbc:oracle:thin:@localhost:1521:XE
jdbc.username=aosmaster
jdbc.password=ENC(aiQkX+5+EicZU3x0/ZWeW9ExV+OW/yc+) 
```

# 应用程序上下文.xml

```
<bean class="org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfigurer">
        <constructor-arg>
            <bean class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
                <property name="config">
                    <bean class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
                        <property name="algorithm" value="PBEWithMD5AndDES" />
                        <property name="passwordSysPropertyName" value="APP_ENCRYPTION_PASSWORD" />
                    </bean>
                </property>
            </bean>
        </constructor-arg>
        <property name="locations">
            <list>
                <value>classpath:/META-INF/props/db/jdbc.properties</value>
            </list>
        </property>
    </bean> 
```

我添加到 JBOSS run.bat

```
rem JVM memory allocation pool parameters. Modify as appropriate.
set JAVA_OPTS=%JAVA_OPTS% -Xms128m -Xmx512m -DAPP_ENCRYPTION_PASSWORD=aiQkX+5+EicZU3x0/ZWeW9ExV+OW/yc+ 
```

我收到错误。我无法找到过去 3 天的解决方案，请帮助我

```
org.jasypt.exceptions.EncryptionOperationNotPossibleException
2012-05-19 09:49:01,562 ERROR [STDERR]  at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:981) 
```

最后我解决了这个问题：

首先，我们需要决定加密算法和密码。然后我们将使用 Jasypt 附带的命令行工具来加密上面的数据库密码： c:\jasypt 9.0.1\bin input="mypassword" algorithm=PBEWithMD5AndDES password=MY_APPS_PWD

kh1AU2abA4JpwlW1eqixhUzI0PerdI0Z

粘贴到 jdbc 属性 ENC(kh1AU2abA4JpwlW1eqixhUzI0PerdI0Z)

从上面带走的重要一点是配置。属性 passwordSysPropertyName 告诉 Jasypt 它应该从名为 APP_ENCRYPTION_PASSWORD 的系统属性中加载加密密码。现在，如上所述，我将一个运行时属性添加到我的容器中，以便将此密码作为系统属性注入运行时环境：

我将 run.bat 添加到 jboss

设置 JAVA_OPTS=%JAVA_OPTS% -DAPP_ENCRYPTION_PASSWORD=MY_APPS_PWD

run.bat 文件。

干杯!

# objective-c - 来自大量项目的 NSString

> ID：10656365
> 
> 赞同：0
> 
> 时间：2012-05-18T16:28:38.587
> 
> 标签：objective-c, memory, nsstring

我正在为 iOS 开发一个应用程序。这是一个游戏。

在游戏屏幕中，用户可以加载从 UIImageView 子类化的对象。为了保存游戏，我开发了这个函数，它通过主视图的子视图数组进行迭代并生成一个 XML 字符串。

```
#pragma mark I/O Functions
-(NSString *)getXMLFromItemsView:(UIView *)items
{
    int a;
    NSString *XML = [[[NSString alloc] init] autorelease];

    XML = [XML stringByAppendingString:@"<PAGE>"];

    for (a=0;a<[items.subviews count];a++)
    {
        iItem *item = [items.subviews objectAtIndex:a];

        if ([item isKindOfClass:[iItem class]] || [item isKindOfClass:[iText class]])
        {
            NSLog(@"INFO -> Saving...Item Id: %d",item.itemId);

            XML = [XML stringByAppendingString:@"<ITEM>\n"];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<CLASS>%@</CLASS>\n",[item class]]];

            //OriginalTransform
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalTransform.a>%f</originalTransform.a>\n",item.originalTransform.a]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalTransform.b>%f</originalTransform.b>\n",item.originalTransform.b]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalTransform.c>%f</originalTransform.c>\n",item.originalTransform.c]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalTransform.d>%f</originalTransform.d>\n",item.originalTransform.d]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalTransform.tx>%f</originalTransform.tx>\n",item.originalTransform.tx]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalTransform.ty>%f</originalTransform.ty>\n",item.originalTransform.ty]];

            //InitialTransform
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<initialTransform.a>%f</initialTransform.a>\n",item.initialTransform.a]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<initialTransform.b>%f</initialTransform.b>\n",item.initialTransform.b]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<initialTransform.c>%f</initialTransform.c>\n",item.initialTransform.c]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<initialTransform.d>%f</initialTransform.d>\n",item.initialTransform.d]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<initialTransform.tx>%f</initialTransform.tx>\n",item.initialTransform.tx]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<initialTransform.ty>%f</initialTransform.ty>\n",item.initialTransform.ty]];

            //OriginalFrame
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalFrame.x>%f</originalFrame.x>\n",item.originalFrame.origin.x]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalFrame.y>%f</originalFrame.y>\n",item.originalFrame.origin.y]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalFrame.w>%f</originalFrame.w>\n",item.originalFrame.size.width]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<originalFrame.h>%f</originalFrame.h>\n",item.originalFrame.size.height]];

            //zOrder
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<zOrder>%d</zOrder>\n",item.zOrder]];

            //itemId
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<itemId>%d</itemId>\n",item.itemId]];

            //itemIdColor
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<itemIdColor>%d</itemIdColor>\n",item.itemIdColor]];

            //itemIdTexture
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<itemIdTexture>%d</itemIdTexture>\n",item.itemIdTexture]];

            //itemIdStyle
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<itemIdStyle>%d</itemIdStyle>\n",item.itemIdStyle]];

            //textureLevel
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<textureLevel>%d</textureLevel>\n",item.textureLevel]];

            //currentSizePercent
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentSizePercent>%f</currentSizePercent>\n",item.currentSizePercent]];

            //currentRotation
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentRotation>%f</currentRotation>\n",[item currentRotation]]];

            //holdItem
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<holdItem>%d</holdItem>\n",item.holdItem]];

            //isInverted
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<isInverted>%d</isInverted>\n",item.isInverted]];

            //isMerged
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<isMerged>%d</isMerged>\n",item.isMerged]];

            //selectedFrame
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<selectedFrame>%@</selectedFrame>\n",item.selectedFrame]];

            //mergedFrame
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<mergedFrame>%@</mergedFrame>\n",item.mergedFrame]];

            //NSLog(@"Item Saved Frame: X:%f Y:%f W:%f H:%f",item.frame.origin.x,item.frame.origin.y,item.frame.size.width,item.frame.size.height);

            //currentFrame
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentFrame.x>%f</currentFrame.x>\n",item.frame.origin.x]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentFrame.y>%f</currentFrame.y>\n",item.frame.origin.y]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentFrame.w>%f</currentFrame.w>\n",item.frame.size.width]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentFrame.h>%f</currentFrame.h>\n",item.frame.size.height]];

            //currentBounds
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentBounds.x>%f</currentBounds.x>\n",item.bounds.origin.x]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentBounds.y>%f</currentBounds.y>\n",item.bounds.origin.y]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentBounds.w>%f</currentBounds.w>\n",item.bounds.size.width]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentBounds.h>%f</currentBounds.h>\n",item.bounds.size.height]];

            //currentTransform
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentTransform.a>%f</currentTransform.a>\n",item.transform.a]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentTransform.b>%f</currentTransform.b>\n",item.transform.b]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentTransform.c>%f</currentTransform.c>\n",item.transform.c]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentTransform.d>%f</currentTransform.d>\n",item.transform.d]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentTransform.tx>%f</currentTransform.tx>\n",item.transform.tx]];
            XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentTransform.ty>%f</currentTransform.ty>\n",item.transform.ty]];

            if ([[NSString stringWithFormat:@"%@",[item class]] isEqual:@"iText"])
            {
                XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<currentText>%@</currentText>\n",[item text]]];

            }

            XML = [XML stringByAppendingString:@"</ITEM>\n"];

        }
    }

    if (fondo)
    {
        XML = [XML stringByAppendingString:@"<FONDO>\n"];

        XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<selectedFrame>%@</selectedFrame>",fondo.selectedFrame]];
        XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<picturePath>%@</picturePath>",fondo.picturePath]];

        XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<idCurrentColor>%d</idCurrentColor>",fondo.idCurrentColor]];
        XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<idCurrentTexture>%d</idCurrentTexture>",fondo.idCurrentTexture]];
        XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<idCurrentStyle>%d</idCurrentStyle>",fondo.idCurrentStyle]];
        XML = [XML stringByAppendingString:[NSString stringWithFormat:@"\t<textureLevel>%d</textureLevel>",fondo.textureLevel]];

        XML = [XML stringByAppendingString:@"</FONDO>\n"];
    }

    XML = [XML stringByAppendingString:@"</PAGE>"];
    NSLog(@"INFO -> ItemsViewXML: %@",XML);
    return XML;
} 
```

目前，如果要迭代的项目数量少于 20，则此方法可以正常工作。但是当它必须处理超过 50 个项目时，应用程序会因为内存而崩溃。

我已经使用仪器调试了这种方法，并且没有检测到泄漏，但是分配会增加，直到使用大量 RAM。

创建字符串使用超过 100MB 的 VM 是不正常的。

任何人都知道我失去了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:18:13.793

首先，您没有创建**字符串**，您当前正在为每个对象创建 O(50) 个字符串。这是非常低效的——在空间上（正如你在内存使用中看到的那样）和时间上（应该花费大量时间）。

因此，您*可以*采用 Mattias˚ 的建议并使用一个可变字符串来附加数据。

这将解决您看到的许多内存压力问题，但仍然会很慢：
解析格式字符串相对耗时，保存操作应尽可能快。

所以让我们忽略症状，看问题：

您基本上想要一个对象层次结构的存档，对吗？

在您的自定义类中，实现`-initWithCoder:`和`-encodeWithCoder:`.

然后您的保存操作变得如此简单

```
NSData *encodedObjectGraph = [NSKeyedArchiver archivedDataWithRootObject:yourObjectGraphsRootGoesHere];
NSError *saveError;
if ([encodedObjectGraph writeToURL:storeURL options:NSDataWritingAtomic error:&saveError])
    return;

NSLog(@"Uh oh: %@", saveError); 
```

而你的加载操作只是变成

```
NSError *loadError;
NSData *savedObjectData = [NSData dataWithContentsOfURL:storeURL options:0 error:&loadError];
if (!savedObjectData) {
    NSLog(@"No data at %@: %@", storeURL, loadError);
    return;
}

objectGraphRoot = [NSKeyedUnarchiver unarchiveRootObjectWithData:savedObjectData]; 
```

（注意`unarchiveRootObjectWithData:`返回一个自动释放的对象！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:41:16.710

`NSMutableString`从部件构建字符串时应该使用。

```
NSMutableString *xml = [NSMutableString string];
[xml appendFormat:@"....", ...];
[xml appendFormat:@"....", ...]; 
```

但在这种情况下，您甚至可能想要使用适当的 XML 序列化器等`NSXMLDocument`。

# php - php `:` 符号用法

> ID：10656367
> 
> 赞同：0
> 
> 时间：2012-05-18T16:28:45.303
> 
> 标签：php

我想知道，有哪些`:`使用案例？

我只知道：

```
if(expression):
    // do Something
endif;

while(expression):
    // and others: `for` `foreach` etc.
endwhile; 
```

还有其他用途吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:29:48.497

> PHP 为它的一些控制结构提供了另一种语法；即 , `if`, `while`, `for`,`foreach`和`switch`。在每种情况下，备用语法的基本形式是将左大括号更改为冒号 ( `:`)，将右大括号分别更改为`endif;`, `endwhile;`, `endfor;`, `endforeach;`, or `endswitch;`。

[http://us3.php.net/manual/en/control-structures.alternative-syntax.php](http://us3.php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:31:28.117

三元条件：`($a == $b) ? true : false`.
类内的静态调用：`self::$a`.
静态方法调用：`MyClass::MyMethod()`，
类内的静态变量：`MyClass::MyVariable`
父方法调用：`parent::hello()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T16:30:52.580

`switch`将其用于`case 123:`和`default:`。

`::`用于访问静态类成员。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T16:32:23.490

它也用作三元运算符“?:”的一部分。

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# java - 如何创建我的 OSGi 项目的可执行版本？

> ID：10656371
> 
> 赞同：1
> 
> 时间：2012-05-18T16:28:58.977
> 
> 标签：java, eclipse, osgi

是否可以将我的 OSGi 项目（由几个包组成）保存到单个可执行文件中，例如 .exe 文件，这样我就可以将它复制并运行到任何具有 JVM 的 PC 上。我知道正常的方法是打开一个命令提示符，一个一个地安装需要的bundles/jar文件。但是由于我的项目包含相当多的捆绑包，因此该方法似乎很乏味。

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:50:49.957

您绝对可以比一个一个地安装捆绑包做得更好，即使您没有像 .exe 这样的单个“本机可执行”存档。有许多商业和开源 OSGi 应用程序以 zip 存档的形式发布；用户解压缩存档，然后调用`java -jar some.osgi.jar`或运行 shell 脚本。

OSGi 运行时有几种方法可以确定要安装的包。一些特定于 OSGi 框架（例如 Equinox 或 Felix），而另一些则更通用。如果您使用的是 Equinox，您可以创建一个`config.ini`文件并将其放在`configuration`与您的 OSGi jar 相同级别的文件夹中。列出您要在该`osgi.bundles`属性中启动的任何捆绑包。config.ini 文件可以列出所有要启动的包，以及您可能需要的任何[其他配置属性。](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)

Eclipse 还允许您在 config.ini 中定义最小的捆绑包，并使用[配置](http://www.eclipse.org/equinox/documents/quickstart-framework.php)器启动插件文件夹中的所有内容。同样，如果您使用 Felix，[自动部署目录](http://felix.apache.org/site/apache-felix-framework-usage-documentation.html#ApacheFelixFrameworkUsageDocumentation-autodeploy)中的任何包都将自动启动。您还可以查看[Felix File Install](http://felix.apache.org/site/apache-felix-file-install.html)，它允许您将捆绑包放入受监控的文件夹中进行安装（一旦安装了 FileInstall 本身）。尽管有这个名字，但 FileInstall 可以在 Equinox 和 Felix 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:13:32.077

这类似于[使用 Felix 和 Maven 创建完整的 OSGi 应用程序](https://stackoverflow.com/questions/9316578/creating-a-complete-osgi-application-with-felix-maven)- [Sling Launchpad 插件](http://sling.apache.org/site/maven-launchpad-plugin.html)可用于创建包含一组特定捆绑包的可执行 jar 或 war 文件。如果您还没有使用 Maven，它并不像“将项目保存到可执行文件”那么简单，但您可以将 jar 文件生成机制适应您的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T13:14:03.080

谢谢。根据上面的答案，我遇到了本书的第 9 章。 [http://my.safaribooksonline.com/9780321561510/ch09#ch09](http://my.safaribooksonline.com/9780321561510/ch09#ch09) 它有一个通过产品配置导出项目的演练教程。它正是我所需要的。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:28:52.657

Eclipse 有产品的概念。您可以从现有捆绑包中创建产品，然后可以将您的产品导出为可执行文件。有关产品的详细信息，请参阅[http://www.vogella.com/articles/EclipseRCP/article.html中的 Eclipse RCP 教程](http://www.vogella.com/articles/EclipseRCP/article.html)

本教程介绍了 Eclipse RCP 应用程序，但您不需要从那里获得所有内容 - 无需创建整个 Eclipse 应用程序即可创建产品。

这限制了您的选择，因为您或多或少地绑定到 Eclipse Equinox 作为您的 OSGi 运行时，但是从它创建可执行产品可能是一个可行的折衷方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-20T07:34:42.470

如果使用 bnd(tools)，则可以从 bndtools GUI 或通过 bnd 命令行（bnd package xyz.bndrun; java -jar xyz.jar）将项目导出到可执行 jar。生成的 jar 文件包含所有包、启动器和框架。

# php - 我们如何计算 PHP 和 MySQL 中的时区

> ID：10656373
> 
> 赞同：0
> 
> 时间：2012-05-18T16:29:05.973
> 
> 标签：php, mysql, timezone

我正在制作一个社交网站，这个网站真的让我很紧张。

如何处理基于 PHP 和 MySQL 的社交网站中的时区，以便任何用户从任何国家访问。我将简要解释一下

我有一个名为 posts 的表，我执行一个 mysql 查询来放置内容、用户名、用户图片以及它之前发布的时间。

例如，如果印度的某人与伦敦的某人是朋友。印度人在 london guy 的个人资料上发帖，并弹出一条通知，说这个印度人在 5 个半小时前在他的个人资料上发帖。我该如何纠正？

请给出有用的答复。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:32:43.000

用于`timezone-offset-get`根据服务器时间进行更正。

```
/**    Returns the offset from the origin timezone to the remote timezone, in seconds.
*    @param $remote_tz;
*    @param $origin_tz; If null the servers current timezone is used as the origin.
*    @return int;
*/
function get_timezone_offset($remote_tz, $origin_tz = null) 
```

[http://php.net/manual/en/function.timezone-offset-get.php](http://php.net/manual/en/function.timezone-offset-get.php)

# vim - 将文本格式化为块（对齐第二列）

> ID：10656374
> 
> 赞同：3
> 
> 时间：2012-05-18T16:29:06.567
> 
> 标签：vim, text-formatting

很多时候，我的一些代码中有一个初始化器列表，如下所示：

```
class Foo(object):
    def __init__(self, data):
        self.foo       = data.getFoo()
        self.bar       = data.getBar()
        self.something = data.getSomething() 
```

如您所见，我喜欢我的代码像表格一样对齐。在很多情况下，上面的代码可以通过脚本 Vim 生成，来自其他程序的输出（`DESCRIBE "foo";`例如在数据库中）。不幸的是，脚本输出通常如下所示：

```
class Foo(object):
    def __init__(self, data):
        self.foo = data.getFoo()
        self.bar = data.getBar()
        self.something = data.getSomething() 
```

因此，在自动生成赋值语句之后，我必须手动对齐所有语句以获得所需的外观。

现在：有没有办法让 vim 自动对齐语句的“后半部分”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:47:03.687

[表格插件](https://github.com/godlygeek/tabular)正是这样做的。[您可以在此处](http://vimcasts.org/episodes/aligning-text-with-tabular-vim/)查看它的运行情况（并了解如何使用它）。

更新：我会简单解释一下插件的使用，但没有解释会[比德鲁的视频](http://vimcasts.org/episodes/aligning-text-with-tabular-vim/)更好，所以我强烈建议大家观看。

要使用该插件，只需调用`:Tab /=`它，它将对齐**文件中的所有等号**。如果要指定要对齐的行，只需给它一个范围`:5,10Tab /=`或使用可视模式（`v`或`V`）选择所需的行，按`:`并插入 Tabularize 命令，您的命令行将如下所示`:'<,'>Tab /=`：

命令中的参数`Tab`是一个正则表达式，这意味着你可以使用这个命令来对齐很多东西。您只会受到正则表达式知识的限制。

对不起任何英语错误：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:19:58.847

已经提到的*表格*插件的替代品是古老的[对齐插件](http://www.vim.org/scripts/script.php?script_id=294)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:35:37.100

一种天真的方法是首先在等号周围留出足够的空间：

```
:s/=/                         =/ 
```

然后，块选择 ( `Ctrl-V`) 以便选择所有`=`字符和后面的所有内容。Yank( `y`) ，将其粘贴到其他地方。

接下来，取消缩进粘贴的行（`10<`通常就足够了），直到它们与最左边的位置对齐。然后，再次选择块并粘贴到它们被切断的位置。

不过，为了达到预期的效果，这感觉像是做了大量工作。

# vb.net - 术语“connect-nacontroller”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称

> ID：10656375
> 
> 赞同：1
> 
> 时间：2012-05-18T16:29:13.110
> 
> 标签：vb.net, powershell

是不是觉得 在我发布这个之后的片刻，我终于让它工作了。我会发布我所做的，以防其他人在未来遇到这个问题。这对我来说是一个很大的疏忽！

在用户名行之前，我添加了这一行：
“Import-Module DataOnTap”& Environment.NewLine & _**

我正在尝试从 VB.Net 2010 代码中运行 PowerShell 脚本。当我在 PowerShell 中运行代码时，它运行良好。当我在 VS2010 中运行它时，我收到错误：“术语 'connect-nacontroller' 未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。请检查名称的拼写，或者如果路径已包含，请验证路径是否正确，然后重试。” 当它到达“Dim results As Collection(Of PSObject) = MyPipeline.Invoke()”行时会发生错误。

这是我的代码（我更改了用户名和密码，一旦我开始工作，我将更改它进入代码的方式。我还更改了卷的名称）：

```
Protected Sub ExecuteCode_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    resultBox.Text = RunScript(powerShellCodeBox.Text)
End Sub

Private Function RunScript(ByVal scriptText As String) As String
    Dim MyRunSpace As Runspace = RunspaceFactory.CreateRunspace()
    MyRunSpace.Open()
    Dim MyPipeline As Pipeline = MyRunSpace.CreatePipeline()
    Dim userName As String = "abc"
    Dim password As String = "123"
    Dim myscript As String = "$username = " & Chr(34) & userName & Chr(34) & Environment.NewLine & _
                 "$password = ConvertTo-SecureString  " & Chr(34) & password & Chr(34) & " -AsPlainText -Force" & Environment.NewLine & _
                 "$cred = New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList $userName,$password" & Environment.NewLine & _
                 "connect-nacontroller mydrive -credential $cred" & Environment.NewLine
    MyPipeline.Commands.AddScript(myscript)
    MyPipeline.Commands.Add("Out-String")
    Dim results As Collection(Of PSObject) = MyPipeline.Invoke()
    MyRunSpace.Close()
    Dim MyStringBuilder As New StringBuilder()
    For Each obj As PSObject In results
        MyStringBuilder.AppendLine(obj.ToString())
    Next
    Return MyStringBuilder.ToString()

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:41:26.247

在用户名行之前，我添加了这一行：“Import-Module DataOnTap”& Environment.NewLine & _**

# php - 需要增加 PDO 变量

> ID：10656380
> 
> 赞同：0
> 
> 时间：2012-05-18T16:29:27.610
> 
> 标签：php, pdo

我一直找不到任何明确回答这个问题的东西，并且一直想知道。对不起，如果这是一个新手问题。

在以下情况下，我是否必须增加或更改我的 PDO 变量。如果我有两个这样的查询：

```
$stmt     = $dbh->prepare('
    INSERT INTO messages 
        (content) 
    VALUES 
        (:content)
        ');
$stmt->bindValue('content', $content);
$stmt->execute();
$msg_id  = $dbh->lastInsertId(); 
```

......

```
$stmt1     = $dbh->prepare('
    INSERT INTO something else 
        (stuff) 
    VALUES 
        (:stuff)
        ');
$stmt1->bindValue('stuff', $stuff);
$stmt1->execute();
$var_id  = $dbh->lastInsertId(); 
```

如果我在两者上都使用 $stmt，而在第二个上使用 $stmt 被认为是不好的做法，或者一旦我有了 $msg_id，我可以重用 $stmt 吗？作为 PDO 的新手，重复变量会很方便，但我不想引入以后需要修复的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:45:36.053

从技术上讲，一旦您完成了第一个查询的 $stmt 工作，您就可以将该 PHP 变量重用于另一个语句/查询：没有什么可以阻止您这样做。

尽管如此，我还是喜欢有两个具有**明确名称**的变量的想法——这意味着比`$stmt`and更具信息性`$stmt1`。

For example, if you have two PHP variables named `$stmtSaveMessage` and `$stmtSaveUser`, each time one of these variables is used, **you will immediately know what the code does** : you will not have to think if `$stmt` right now points to the statement that saves a message, or if it's been overridden to point to the statement that saves something else.

By itself, `$stmt` generally indicates that you are working with a statement, that does something database-related ; but using a more significant variable name will immediately make your code easier to read, easier to understand, and easier to maintain -- and, when programming, we tend to spend more time maintaining old code than writing new one...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:31:47.610

我认为重用相同的变量是个好主意。它不那么混乱并节省了一点内存。

真的，这完全取决于您，但我个人认为为每个查询创建一个新的资源句柄是一种不好的做法，除非有特定的原因要挂在旧的资源句柄上。

# javascript - Javascript 中的事件处理程序范围

> ID：10656382
> 
> 赞同：3
> 
> 时间：2012-05-18T16:29:47.763
> 
> 标签：javascript

这可能是一个简单的问题，但我无法找出最佳答案。

我`<div>`在屏幕上有 10 个元素。他们每个人都有一个`click()`事件监听器：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    <div id="element0">Click me! (0)</div>
    <div id="element1">Click me! (1)</div>
    <div id="element2">Click me! (2)</div>
    <div id="element3">Click me! (3)</div>
    <div id="element4">Click me! (4)</div>
    <div id="element5">Click me! (5)</div>
    <div id="element6">Click me! (6)</div>
    <div id="element7">Click me! (7)</div>
    <div id="element8">Click me! (8)</div>
    <div id="element9">Click me! (9)</div>
    <script type="text/javascript">
    for ( var i = 0; i < 10; i++ ) {
        var element = document.getElementById( "element" + i );
        element.onclick = function () {
            alert( "Element " + i );
        }
    }
    </script>
</body>
</html> 
```

但每次我点击一个元素时，它都会显示“元素 10”！似乎所有这些事件处理程序都使用相同的`i`.

我希望它显示“元素 N”，其中 N 是当前元素的编号。我不想从元素 id 中提取 N 。我也不想使用`data()`jQuery 的方法来存储它。我相信这个问题必须有一个更简单的解决方案，但我找不到它。任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T16:32:26.310

`i`您在所有点击处理程序共享的外部范围内只有一个变量。您需要`i`为每个闭包创建一个局部变量。这将起作用：

```
for ( var i = 0; i < 10; i++ ) {
    var element = document.getElementById( "element" + i );
    element.onclick = (function(i){
        // returns a new function to be used as an onclick handler
        return function () {
            alert( "Element " + i );
        }
    })(i); // Pass in the value of the outer scope i
} 
```

[查看本文](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)中的“臭名昭著的循环”问题（并阅读整篇文章）以获取更多信息：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:38:25.077

因此，正如另一篇文章所说，您的问题是在循环内执行异步代码的性质。在你的情况下，虽然有一个更好的方法来解决这个问题，那就是使用事件委托。

```
document.body.onclick = function(e) {
  if (e.target.tagName.toLowerCase() === "div") {
    alert( "Element " + e.target.id );
  }
} 
```

如果你有 jQuery，你可以这样做：

```
$(document.body).on("click", "div", function() {
  alert($(this).attr("id"));
}); 
```

有关更多信息，请查看这篇文章： [http ://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)

显然 jQuery 和其他库也会自动处理这些东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:39:43.737

您可以从元素的`id`属性中获取数字：

```
for ( var i = 0; i < 10; i++ ) {
    var element = document.getElementById( "element" + i );
    element.onclick = function () {

        var i = this.id.substr(7);
        alert( "Element " + i );
    }
}​ 
```

[JsFiddle 在这里](http://jsfiddle.net/u3jmP/)。

# python - 使用烧瓶方法视图

> ID：10656387
> 
> 赞同：2
> 
> 时间：2012-05-18T16:30:23.070
> 
> 标签：python, flask

我正在尝试适应这一点：

[http://flask.pocoo.org/docs/views/](http://flask.pocoo.org/docs/views/)

进入蓝图本身，（基于我看过的其他蓝图）。将 api 注册从应用程序抽象到蓝图初始化中。这是来自烧瓶文档的代码，有一些更改。

这似乎有效：

```
 class MyAPI(MethodView):

    def __init__(self, name):
        self.name = name
        bp = Blueprint(name, __name__)
        bp_endpoint = '{0}_api'.format(name)
        bp_url = '/{0}/'.format(name)
        bp_pk = '{0}_tag'.format(name)
        self.register_api(bp, bp_endpoint, bp_url, bp_pk, 'string')
        self._blueprint = bp

    def register_api(self, blueprint, endpoint, url, pk='id', pk_type='int'):
        view_func = self.as_view(endpoint)
        blueprint.add_url_rule(url, defaults={pk: None},
                         view_func=view_func, methods=['GET',])
        blueprint.add_url_rule(url, view_func=view_func, methods=['POST',])
        blueprint.add_url_rule('{0}<{1}:{2}>'.format(url, pk_type, pk), view_func=view_func,
                         methods=['GET', 'PUT', 'DELETE'])

    def get(self, my_tag):
         #... with post, put methods etc. 
```

然后在我的应用程序中，我可以这样做：

```
m = MyAPI('my')
app.register_blueprint(m._blueprint) 
```

这似乎工作，注册网址，所以我可以得到：

```
Map([<Rule '/my/' (POST, OPTIONS) -> my.my_api>,
 <Rule '/my/<my_tag>' (PUT, HEAD, DELETE, OPTIONS, GET) -> my.my_api>,
 <Rule '/static/<filename>' (HEAD, OPTIONS, GET) -> static>,
 <Rule '/my/' (HEAD, OPTIONS, GET) -> my.my_api>]) 
```

但是，现在去路线时出现错误（我刚刚尝试过 GET）：

```
Traceback (most recent call last):
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/app.py", line 1518, in __call__
    return self.wsgi_app(environ, start_response)
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/app.py", line 1506, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/app.py", line 1504, in wsgi_app
    response = self.full_dispatch_request()
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/app.py", line 1264, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/app.py", line 1262, in full_dispatch_request
    rv = self.dispatch_request()
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/app.py", line 1248, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/media/686e26f8-c6d4-4448-8fe4-c19802726dcb/projects/1_current/private/pycleaver/venv/lib/python2.7/site-packages/flask/views.py", line 83, in view
    self = view.view_class(*class_args, **class_kwargs)
**TypeError: __init__() takes exactly 2 arguments (1 given)** 
```

aaand 这比我能想到的 atm 低一两个级别。任何输入都对我错过的内容表示赞赏。我认为最初可能与 register_api 中的 view_func 有关。

编辑：

一种答案

```
class MyAPI(MethodView):  

    def __init__(self, name):
        self.name = name
        bp = Blueprint(name, __name__)
        self.endpoint = '{0}_api'.format(name)
        self.url = '/{0}/'.format(name)
        self.pk = '{0}_tag'.format(name)
        self._blueprint = bp
        self.register_api(self._blueprint, self.endpoint, self.url, self.pk)

    def register_api(self, bp, endpoint, url, pk ='id', pk_type='int'):
        view_func = self.__class__.as_view(endpoint)
        bp.add_url_rule(url, defaults={pk: None},
                     view_func=view_func, methods=['GET',])
        bp.add_url_rule(url, view_func=view_func, methods=['POST',])
        bp.add_url_rule('{0}<{1}:{2}>'.format(url, pk_type, pk), view_func=view_func,
                     methods=['GET', 'PUT', 'DELETE']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:48:19.293

我认为您可以将您的初始化方法只保留一个参数：

```
def __init__(self):
    bp = Blueprint("what?", __name__)  # here
    bp_endpoint = '{0}_api'.format(name)
    bp_url = '/{0}/'.format(name)
    bp_pk = '{0}_tag'.format(name)
    self.register_api(bp, bp_endpoint, bp_url, bp_pk, 'string')
    self._blueprint = bp 
```

`as_view`或在不修改您的初始化方法的情况下提供足够的价值。

```
def register_api(self, blueprint, endpoint, url, pk='id', pk_type='int'):
    view_func = self.as_view(endpoint, name="what?")  # here
    # ... omit ... 
```

但在我看来，在方法视图中创建蓝图并不是一个好主意。蓝图是一个子应用程序，应该由许多视图共享。

# mysql - 删除指定了 3 个字段中的 2 个的 mysql 行？

> ID：10656391
> 
> 赞同：1
> 
> 时间：2012-05-18T16:30:51.783
> 
> 标签：mysql, delete-row

我正在尝试在 mysql 中构造一个简单的删除语句，但似乎无法正确执行。我希望能够在不指定描述字段的情况下仅使用`x`and字段来删除一行。`y`

该表如下所示：

```
+------------------+-------------------+-------------+
| x                | y                 | description |
+------------------+-------------------+-------------+
|  52.847202686351 | -113.833362226293 |             |
| 52.6810078148914 |  -113.65208781223 |             |
| 52.7625225559979 | -113.937732343481 |             |
| 52.8985943615787 | -113.415881757543 |             |
| 53.0969562533962 | -113.479053144262 | millet      |
+------------------+-------------------+-------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:42:00.390

您的问题可能是由`float`数据类型的不精确引起的。众所周知，浮点数很难用于精确比较。您最好将此数据存储为`decimal`类型？

```
ALTER TABLE table MODIFY x DECIMAL(15,12);
ALTER TABLE table MODIFY y DECIMAL(15,12); 
```

# jquery - window.location 与 jQuery Mobile 冲突

> ID：10656393
> 
> 赞同：0
> 
> 时间：2012-05-18T16:31:00.583
> 
> 标签：jquery, jquery-mobile, iphone-web-app

我正在构建一个移动网络应用程序，我遇到了一个非常非常奇怪的问题。

我的应用程序的核心看起来像一个合适的 iPhone 应用程序，带有标签栏。在我的一个屏幕上，如果单击选项卡栏链接，则在重定向之前，我们必须向服务器发出 POST 请求，然后在成功时执行重定向。

在桌面浏览器中，这完全符合预期。

在 Mobile Safari 中，它根本不起作用。POST 请求发生，但重定向没有。我已经尝试了许多不同的重定向技术，但都没有产生任何影响。

我正在使用 jQuery Mobile，但是因为我需要重定向到一个完全不同的页面，没有过渡也没有 AJAX，所以我使用 window.location.href 进行重定向。

有谁知道为什么会发生这种情况？如有必要，很高兴提供更多详细信息，我已经为此苦苦挣扎了 2 天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:29:26.900

好的，所以这里的问题是在桌面浏览器中运行我的应用程序和在 Mobile Safari 中运行它之间的行为变化。

在桌面上，jQuery Mobile 基本上只提供样式和过渡。

在 Mobile Safari 中，它正在重写我页面上的所有 URL。由于直接在手机或模拟器中调试网站非常困难（我知道调试控制台，但它的帮助很小），我花了很长时间才看到这一点。

我通过向我的每个链接添加一个 data-url 属性来解决这个问题 - 这**不是**由 jQuery Mobile 重写的，因此我能够使用它来将用户带到他们应该从一开始就去的地方。

我找不到任何关于 jQuery Mobile 正在执行此 URL 重写这一事实的参考，但也许我在他们的文档中遗漏了一些东西。

# android - 更新后活动堆栈损坏？

> ID：10656397
> 
> 赞同：0
> 
> 时间：2012-05-18T16:31:21.177
> 
> 标签：android

初始活动 (A) 启动活动 (B)。当用户在 (B) 上，按主页，然后返回应用程序时，再次显示 (B)。如果您更新应用程序（我正在通过电子邮件进行更新，因为它尚未发布）并从更新屏幕启动它，它将不再记得返回到 (B)。它只是重新启动活动 (A)。

如果您通过按后退按钮退出应用程序，那么从那里它会继续正常工作。

我在这里看到了这样的描述：[Activity history stack wrong upon first install on device?](https://stackoverflow.com/q/1845460/758074) . 这是一个已知的 Android 错误吗？我正在运行蜂窝和 ICS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:33:41.037

这个问题的答案与此处描述的答案相同：[https ://stackoverflow.com/a/3890397/758074](https://stackoverflow.com/a/3890397/758074)

据我所知，问题是当您从 android 安装程序启动应用程序时，它会将 Activity (A) 实例启动到现有任务中。如上面的答案链接中所述，描述了该错误

此处：[http](http://code.google.com/p/android/issues/detail?id=2373) ://code.google.com/p/android/issues/detail?id=2373 此处：[http ://code.google.com/p/android/issues/detail?id=26658](http://code.google.com/p/android/issues/detail?id=26658)

Activity (A) onCreate() 中的这段代码解决了这个问题。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    if (!isTaskRoot()) 
    {
        Log.d("SplashActivity", "Splash is not Task Root, finish()");
        finish();
        return;
    }
} 
```

# haskell - 是否可以在 Haskell 中编程和检查不变量？

> ID：10656402
> 
> 赞同：30
> 
> 时间：2012-05-18T16:31:55.660
> 
> 标签：haskell, types, invariants, theorem-proving

当我编写算法时，我通常会在注释中写下不变量。

例如，一个函数可能返回一个有序列表，而另一个函数期望一个列表是有序的。
我知道定理证明存在，但我没有使用它们的经验。

我也相信智能编译器 [原文如此！] 可以利用它们来优化程序。
那么，是否可以写下不变量并让编译器检查它们？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-18T20:42:18.190

以下是一个特技，但它是一个相当安全的特技，所以请在家里尝试一下。它使用一些有趣的新玩具将*顺序*不变量烘焙到 mergeSort 中。

```
{-# LANGUAGE GADTs, PolyKinds, KindSignatures, MultiParamTypeClasses,
    FlexibleInstances, RankNTypes, FlexibleContexts #-} 
```

为了简单起见，我将有自然数。

```
data Nat = Z | S Nat deriving (Show, Eq, Ord) 
```

但是我会`<=`在类型类 Prolog 中定义，所以类型检查器可以尝试隐式地找出顺序。

```
class LeN (m :: Nat) (n :: Nat) where
instance             LeN Z n where
instance LeN m n =>  LeN (S m) (S n) where 
```

为了对数字进行排序，我需要知道任何两个数字都可以以*一种方式或另一种方式*排序。让我们说一下两个数字如此可排序意味着什么。

```
data OWOTO :: Nat -> Nat -> * where
  LE :: LeN x y => OWOTO x y
  GE :: LeN y x => OWOTO x y 
```

我们想知道每两个数字确实是可排序的，只要我们有它们的运行时表示。这些天来，我们*通过*为`Nat`. `Natty n`是 的运行时副本的类型`n`。

```
data Natty :: Nat -> * where
  Zy :: Natty Z
  Sy :: Natty n -> Natty (S n) 
```

除了有证据之外，测试数字的方式很像通常的布尔版本。step case 需要解包和重新打包，因为类型会发生变化。实例推理有利于所涉及的逻辑。

```
owoto :: forall m n. Natty m -> Natty n -> OWOTO m n
owoto Zy      n       = LE
owoto (Sy m)  Zy      = GE
owoto (Sy m)  (Sy n)  = case owoto m n of
  LE -> LE
  GE -> GE 
```

现在我们知道如何排列数字，让我们看看如何制作有序列表。该计划是描述*松散界限之间*的秩序。当然，我们不想排除任何可排序的元素，因此*边界*的类型将元素类型扩展为底部和顶部元素。

```
data Bound x = Bot | Val x | Top deriving (Show, Eq, Ord) 
```

我相应地扩展了 的概念`<=`，因此类型检查器可以进行边界检查。

```
class LeB (a :: Bound Nat)(b :: Bound Nat) where
instance             LeB Bot     b        where
instance LeN x y =>  LeB (Val x) (Val y)  where
instance             LeB (Val x) Top      where
instance             LeB Top     Top      where 
```

这里是有序的数字列表： an`OList l u`是一个序列`x1 :< x2 :< ... :< xn :< ONil`，使得`l <= x1 <= x2 <= ... <= xn <= u`. 高于下限的`x :<`检查，然后作为下限强加在尾部。`x``x`

```
data OList :: Bound Nat -> Bound Nat -> * where
  ONil :: LeB l u => OList l u
  (:<) :: forall l x u. LeB l (Val x) =>
          Natty x -> OList (Val x) u -> OList l u 
```

`merge`我们可以像普通列表一样编写有序列表。关键不变式是，如果两个列表共享相同的边界，那么它们的合并也是如此。

```
merge :: OList l u -> OList l u -> OList l u
merge ONil      lu         = lu
merge lu        ONil       = lu
merge (x :< xu) (y :< yu)  = case owoto x y of
  LE  -> x :< merge xu (y :< yu)
  GE  -> y :< merge (x :< xu) yu 
```

案例分析的分支扩展了从输入中已知的内容，仅使用足够的排序信息来满足对结果的要求。实例推理充当基本定理证明者：幸运的是（或者更确切地说，通过一些实践）证明义务很容易。

让我们敲定交易吧。我们需要为数字构建运行时见证，以便以这种方式对它们进行排序。

```
data NATTY :: * where
  Nat :: Natty n -> NATTY

natty :: Nat -> NATTY
natty Z      =                           Nat Zy
natty (S n)  = case natty n of Nat n ->  Nat (Sy n) 
```

我们需要相信这个翻译给了我们与我们想要排序的`NATTY`内容相对应的内容。和之间的`Nat`这种相互作用有点令人沮丧，但这就是刚才在 Haskell 中所需要的。一旦我们有了这些，我们就可以按照通常的分而治之的方式进行构建。`Nat``Natty``NATTY``sort`

```
deal :: [x] -> ([x], [x])
deal []        = ([], [])
deal (x : xs)  = (x : zs, ys) where (ys, zs) = deal xs

sort :: [Nat] -> OList Bot Top
sort []   = ONil
sort [n]  = case natty n of Nat n -> n :< ONil
sort xs   = merge (sort ys) (sort zs) where (ys, zs) = deal xs 
```

我经常惊讶于有多少对我们有意义的程序对类型检查器也同样有意义。

[这是我为看看发生了什么而制作的一些备用工具包。

```
instance Show (Natty n) where
  show Zy = "Zy"
  show (Sy n) = "(Sy " ++ show n ++ ")"
instance Show (OList l u) where
  show ONil = "ONil"
  show (x :< xs) = show x ++ " :< " ++ show xs
ni :: Int -> Nat
ni 0 = Z
ni x = S (ni (x - 1)) 
```

并且什么都没有隐藏。]

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-18T16:41:56.727

是的。

你在 Haskell 类型系统中编码你的不变量。然后编译器将强制执行（例如执行类型检查），以防止您的程序在不保留不变量的情况下进行编译。

对于有序列表，您可能会考虑一种实现[智能构造函数](http://www.haskell.org/haskellwiki/Smart_constructors)的廉价方法，该构造函数在排序时更改列表的类型。

```
module Sorted (Sorted, sort) where

newtype Sorted a = Sorted { list :: [a] }

sort :: [a] -> Sorted a
sort = Sorted . List.sort 
```

现在您可以编写假定`Sorted`为持有的函数，编译器将阻止您将未排序的内容传递给这些函数。

您可以走得更远，将极其丰富的属性编码到类型系统中。例子：

*   [静态检查数组访问](http://hackage.haskell.org/package/vector-static)
*   [检查数据库访问](http://hackage.haskell.org/package/MetaHDBC)
*   [检查物理尺寸](http://hackage.haskell.org/package/dimensional)

通过实践，语言可以在编译时强制执行相当复杂的不变量。

但是有限制，因为类型系统并不是为证明程序的属性而设计的。对于重型证明，请考虑模型检查或定理证明语言，例如 Coq。Agda 语言是一种类似 Haskell 的语言，其类型系统旨在证明丰富的属性。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-18T16:39:55.540

嗯，答案是肯定的和否定的。没有办法只写一个与类型分开的不变量并检查它。在 Haskell 的一个名为 ESC/Haskell 的研究分支中有一个实现，但是： http: [//lambda-the-ultimate.org/node/1689](http://lambda-the-ultimate.org/node/1689)

您确实有各种其他选择。一方面，您可以使用断言：[http ://www.haskell.org/ghc/docs/7.0.2/html/users_guide/assertions.html](http://www.haskell.org/ghc/docs/7.0.2/html/users_guide/assertions.html)

然后使用适当的标志，您可以关闭这些断言以进行生产。

更一般地，您可以对类型中的不变量进行编码。我打算在这里添加更多，但不要击败我的妙语。

另一个例子是这种非常好的红黑树编码：[http ://www.reddit.com/r/haskell/comments/ti5il/redblack_trees_in_haskell_using_gadts_existential/](http://www.reddit.com/r/haskell/comments/ti5il/redblack_trees_in_haskell_using_gadts_existential/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T04:37:07.233

这里的其他答案都很棒，但即使你的问题特别提到了编译器检查，我觉得如果没有至少对[QuickCheck](http://hackage.haskell.org/package/QuickCheck)的提示，这个页面将是不完整的。QuickCheck 在运行时而不是在编译时在类型系统中完成它的工作，但它是一个很好的工具，用于测试在类型系统中静态表达可能过于困难或不方便的属性。

# jquery-ui - dataTables jquery 使行的任何部分都可以点击

> ID：10656404
> 
> 赞同：0
> 
> 时间：2012-05-18T16:31:59.453
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

我希望能够单击行的任何部分并获得响应。目前我只能点击第 3 行来获取数据。这是小提琴 [http://jsfiddle.net/byhs/](http://jsfiddle.net/byhs/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:46:09.203

`td:eq(2)`使用to切换选择器`td`。

# ruby - 如何包含特定于页面的 JavaScript？

> ID：10656407
> 
> 赞同：3
> 
> 时间：2012-05-18T16:32:02.067
> 
> 标签：ruby, ruby-on-rails-3

在我的 Rails 应用程序中，每个页面都包含`assets`.

一些自定义脚本用于 Ajax 和一些花哨的东西。它不必要地从每一页运行，并导致我不必要的超载。

例如，会话页面根本不需要任何 JavaScript，仍然包含所有脚本。我该如何改变？我有 Rails 3.2.2。

```
<script src="/assets/jquery-1.7.2.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.core.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.widget.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.position.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.autocomplete.js?body=1" type="text/javascript"></script>
<script src="/assets/special.js?body=1" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T16:41:16.413

我用`content_for`.

### 应用程序.html.erb

```
<head>
  <%= yield :custom_js %>
</head> 
```

### your_page.html.erb

```
<% content_for :custom_js do %>
   <!-- your script includes go here -->
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:41:46.387

不要把`<script>`元素放在你的布局中，把它们放在你需要的页面上。或者，让您的布局根据控制器中设置的逻辑有条件地包含它们。

# c# - FileHelpers：非引用 CSV 中的可选字段

> ID：10656409
> 
> 赞同：4
> 
> 时间：2012-05-18T16:32:06.300
> 
> 标签：c#, filehelpers

我正在使用[FileHelpers](http://www.filehelpers.com)从 CSV 文件导入数据。问题是，某些版本的 CSV 文件具有比其他版本更多的字段。

因此，我已将有时缺少的字段标记为可选，但这似乎不起作用，因为它不仅在缺少字段时忽略（这似乎没问题），它也总是将最后一个字符砍掉存在的最后一个字段。

例如...

*   包含“ABC,DEF,GHI”（不带引号）的行导入为“ABC”、“DEF”和“GHI”
*   包含“ABC,DEF”的行（同样不带引号）导入为“ABC”和“DE”

我的记录格式定义如下...

```
[DelimitedRecord(@",")]
public class RecordFormat {

    [FieldTrim(TrimMode.Both)]
    public String FirstValue;

    [FieldTrim(TrimMode.Both)]
    public String SecondValue;

    [FieldOptional]
    [FieldTrim(TrimMode.Both)]
    public String OptionalValue;

} 
```

有人可以建议我缺少什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:19:49.970

看起来像是在最新版本 2.9.9 中修复的错误

[请参阅http://www.filehelpers.com/forums/](http://www.filehelpers.com/forums/)上的链接

# javascript - 使用 JSON 和 JQUERY 解析远程文件并创建动态 SELECT 控件

> ID：10656410
> 
> 赞同：1
> 
> 时间：2012-05-18T16:32:09.880
> 
> 标签：javascript, jquery, json

最近，我被告知我需要使用对相应 State 的查询从远程 Sales Force Counties 对象中读取，然后动态创建一个 select 语句这些值。我的问题是：虽然我知道当我在浏览器中手动使用查询时，我会得到 JSON 格式的数据，但是当我尝试解析县名时，我会在整个迭代中得到一个空值。这是我的代码。感谢您提供的任何建议/帮助：

```
<script language="JavaScript">

function getCounties(chosenState){

var url = "https://api.url=1&action=query/?q=SELECT Name FROM US_Counties__cWhere     State_Name__c =";
url = url + "'"+chosenState+"'";
alert(url);
$.getJSON(url, 
function(data) {
console.log(data)

    var options = '';
    $.each(data.records[0], function(i,item){

        options += '<option value="' + item.attributes.url + '">' + item.attributes.Name + '</option>';
    });
    $("select#counties").html(options);
});
}
 </script> 
```

这是数据的一部分：

```
{
    "totalSize": 36,
    "done": true,
    "records": [
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJLMA2"
            },
            "Name": "Baker"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJMMA2"
            },
            "Name": "Benton"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJNMA2"
            },
            "Name": "Clackamas"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJOMA2"
            },
            "Name": "Clatsop"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJPMA2"
            },
            "Name": "Columbia"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJQMA2"
            },
            "Name": "Coos"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJRMA2"
            },
            "Name": "Crook"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJSMA2"
            },
            "Name": "Curry"
        },
        {
            "attributes": {
                "type": "US_Counties__c",
                "url": "/services/data/v20.0/sobjects/US_Counties__c/a1FR00000034BJTMA2"
            },
            "Name": "Deschutes"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:06:21.900

我为在个人项目上启用跨站点执行所做的就是这样做

```
 if ((isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') === FALSE)
        die('You shouldn\'t be here');

    header('Access-Control-Allow-Origin: ' . $_SERVER['HTTP_ORIGIN']);
    header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
    header('Access-Control-Max-Age: 1000');
    header('Access-Control-Allow-Headers: Content-Type'); 
```

如果你想让它更安全一点，你可以这样做

```
 if ((isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') === FALSE)
        die('You shouldn\'t be here');

switch($_SERVER['HTTP_ORIGIN']){
case 'domain.com':
case 'whatever.com':
        header('Access-Control-Allow-Origin: ' . $_SERVER['HTTP_ORIGIN']);
        header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
        header('Access-Control-Max-Age: 1000');
        header('Access-Control-Allow-Headers: Content-Type');
} 
```

希望这会有所帮助，我花了很长时间才弄清楚哈哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:38:16.733

```
$.each(data.records, function() {
  console.log(this.Name);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:41:42.357

这听起来像是一个跨域问题。除非其他服务器授予您访问权限，否则您无法从其他域访问 JSON 数据。

您可以选择使用 JSONP，但同样，仅当远程站点支持它时。

# visual-studio-2010 - 如何使用 VS 或 Power Tool 从光标删除直到行尾

> ID：10656417
> 
> 赞同：15
> 
> 时间：2012-05-18T16:32:31.170
> 
> 标签：visual-studio-2010, editor, productivity-power-tools

在VS2010中，如何从光标位置删除直到行尾。我曾经读过这样的快捷方式，但现在找不到了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T03:14:06.510

调用编辑器命令`Edit.DeleteToEOL`您可以在工具 --> 选项 --> 环境 --> 键盘对话框中看到它。没有为其分配预定义的键盘快捷键，但 Visual Studio 为您提供了创建一个的选项。

![在此处输入图像描述](../Images/6b002c8cd2041ac72a10edaf8ae4309e.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-29T22:06:35.420

Visual Studio 没有从光标到结束行删除的组合键。我使用 Shift+End 和 Delete。

# c# - i==0 和 0==i 有区别吗？

> ID：10656419
> 
> 赞同：8
> 
> 时间：2012-05-18T16:32:36.880
> 
> 标签：c#, php, c++, c

第一个代码：

```
 if(i==0) {// do instructions here} 
```

第二个代码：

```
 if(0==i) { // do instructions here } 
```

块之间有什么区别？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-18T16:34:44.480

从功能上讲，没有区别。
一些开发人员更喜欢编写第二种格式以避免分配拼写错误（以防您错过 a `=`），以便编译器警告拼写错误。
第二个是著名的**[尤达条件](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)**。

![尤达条件](../Images/7b395dcafd49b694d09009878290b9f4.png)

我说没有区别，因为你不能防范每一个微小的细节，而是依靠编译器为你大声喊叫。如果你打算写 a`==`你应该期望自己写 a`==`而不是 a `=`。
使用第二种格式只会导致一些晦涩难懂的代码。
此外，大多数主流编译器都会在启用所有警告后发出警告，而不是相等错字来警告分配（无论如何您都**[应该](http://ideone.com/Qk3Dd)**这样*做*）*。*

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T16:34:38.070

第二个版本应该更安全。

如果您忘记了一个等号，它不会将 i 的值更改为零。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T16:35:46.727

在功能上，它们在 C 中是相同的；我不确定其他语言是否会出现诸如运算符重载之类的丑陋事物。

从风格上讲，后者非常违反直觉，我个人觉得它非常难看。`=`关键是让编译器在你不小心写而不是时抛出错误`==`，但是好的编译器有一个选项会警告你无论如何，所以它是不必要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T16:49:41.260

对于 C++，虽然不太可能，但可能存在差异。这取决于我的类型。例如

```
struct Foo
{
    int x;
};

bool operator==(Foo lhs, int rhs)
{
    return lhs.x == rhs;
}

bool operator==(int lhs, Foo rhs)
{
    std::cout << "Hi!";
    return true;
} 
```

写这样的代码的人当然应该被枪杀。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T16:35:48.060

是的，就 C# 而言，它们是相同的。对于更复杂的情况，请访问[A==B vs B==A，有什么区别](https://stackoverflow.com/questions/9878563/a-b-vs-b-a-what-are-the-differences)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T16:34:55.670

当您编写 (0==i) 时，如果 (i = 0) 错误地使用单等号（例如 ），则消除了错误。没有其他的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T16:34:56.470

没有区别，有些人更喜欢第二个来捕捉做赋值（`=`）而不是相等测试（`==`）的常见错误

`0 = i`编译失败

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-18T16:34:47.867

在 C# 中没有区别。然而，在 C++ 中，性能存在差异，这就是为什么你现在看到两者都在 C# 代码中使用 - 实际上我正在考虑 i++ 与 ++i 关于性能 - 0 == i 是 C/C++ 中的常见编码建议避免 i = 0 作为意外操作*

# python - SQLAlchemy 示例项目

> ID：10656426
> 
> 赞同：18
> 
> 时间：2012-05-18T16:32:56.993
> 
> 标签：python, sqlalchemy

有没有我可以研究的使用 SQLAlchemy（带有 Python 类）的好的示例项目？（它至少有一些基本的数据库操作 - CRUD）

我相信，这是通过查看某人的代码来学习任何编程语言的好方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-15T15:57:52.973

我的[Flask-Security-Admin-Example](https://github.com/sasaporta/flask-security-admin-example)项目可能会有所帮助。它在 Python Flask Web 应用程序中使用 SQLAlchemy ORM，该应用程序还集成了 Flask-Security 和 Flask-Admin。

此外，虽然它不是一个项目，但[SQLAlchemy ORM 教程](http://docs.sqlalchemy.org/en/rel_0_9/orm/tutorial.html)非常好，它会引导您编写 SQLAlchemy 项目中所需的代码。

请注意，以上两个示例都使用 SQLAlchemy ORM。如果您不想要对象关系映射器，可以使用[SQLAlchemy Core](http://docs.sqlalchemy.org/en/latest/core/)。不过，我没有一个项目可以说明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:09:17.453

您希望在 SQLAlchemy 之上使用什么样的环境？

很可能，如果您使用的是流行的 Web 框架，如 django、Flask 或 Pylons，您可以找到许多特定于该框架的示例和教程，包括 SQLAlchemy。

这将提高您对 SQLAlchemy 以及您正在使用的任何其他工具的了解。

很有可能，您不会在“只是”SQLAlchemy 中找到任何好的项目示例，因为它本质上是一个工具。

# java - 在我的 java 程序中包含 gson

> ID：10656428
> 
> 赞同：3
> 
> 时间：2012-05-18T16:33:06.387
> 
> 标签：java, classpath, gson

到目前为止，我只在我的程序中使用了标准库。我只是在制作一个简单的控制台应用程序，我没有使用任何 IDE，只是简单的文本编辑器（因为我目前不需要更复杂的东西）。

我不知道将我下载的 jar 文件放在哪里，我也不知道如何正确调用它。我读过一些关于包含路径的东西？但我不确定我是否理解。

我只有简单的文件夹结构，如下所示：

*   项目
    *   类.java
    *   类.class
    *   gson-2.2.1.jar

我试过这个：

```
import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonParser; 
```

但我知道它不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:37:45.120

此答案假设您在 *nix 环境中使用`javac`and命令。`java`

要编译您的代码，您需要将 jar 和 Java 文件放到带有`-cp`标志的类路径中。对于这个小示例，您实际上只需要提供包含您的 main 方法的 Java 文件。`YourClass.java`这是因为编译器将通过在类路径中搜索它们来查找需要编译的任何 Java 文件。

```
javac -cp /path/to/java/files:/path/to/gson-2.2.1.jar YourClass.java 
```

要运行您的代码，您需要做同样的事情，但只需使用您的 main 方法引用该类。

```
java -cp /path/to/class/files:/path/to/gson-2.2.1.jar YourClass 
```

请记住，`/path/to/java/files`and`/path/to/class/files`目录必须指向你的包的*根*目录（如果你使用包，你应该这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:38:41.827

将类路径设置为同时包含当前目录 ( `.`)（以便编译器找到您的类）和*gson-2.2.1.jar*（以便编译器在该 jar 中找到类）

类路径就像`PATH`evnrionmental 变量，对于不同的操作系统（`:`对于 *nix 和`;`对于 Windows），您将需要不同的分隔符——至少对于*javac*

对于*javac*`-cp` ，您可以通过在选项中指定直接设置类路径。或者，设置`CLASSPATH`环境变量（就像设置`PATH`env.var 一样。）

# .htaccess - .htaccess 在本地主机上工作正常，但在服务器上不行？

> ID：10656431
> 
> 赞同：1
> 
> 时间：2012-05-18T16:33:10.370
> 
> 标签：.htaccess

这在本地服务器上工作非常好。但是在服务器上上传时，这不起作用。

```
RewriteRule ^activate_account/([a-zA-Z0-9]+)\.html$ activate_account.php?activation_code=$1 
```

页面工作但传递的参数没有得到。[现场演示](http://itbrainsteer.com/activate_account/Gajanand1337097636.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:38:43.310

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此更新的代码放在您`.htaccess`的`DOCUMENT_ROOT`目录中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^activate_account/([^.]+)\.html$ activate_account.php?activation_code=$1 [L,QSA,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:34:34.807

1.  首先检查 AllowOverride 是否对您的托管解决方案有效。
2.  下一步是检查 ModRewrite 模块是否处于活动状态。
3.  如果在 localhost 上有效，您需要该语句`RewriteEngine on`应该处于活动状态

# android - 拼写建议使用 android.text.TextWatcher 提供冗余值

> ID：10656433
> 
> 赞同：10
> 
> 时间：2012-05-18T16:33:16.067
> 
> 标签：android, android-edittext

我正在使用[android.text.TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)界面来收听我的一个应用程序中 EditText 的更改。我使用 beforeTextChanged() 和 onTextChanged() 监视更改以允许撤消选项。

通常，更改一次发生一个字符，例如，如果用户键入“hello”，我将获得以下值作为 beforeTextChanged() 方法的 start、after 和 count 值：

```
start = 0; count = 0; after = 1;      // typed 'h'
start = 1; count = 0; after = 1;      // typed 'e' 
start = 2; count = 0; after = 1;      // typed 'l'
start = 3; count = 0; after = 1;      // typed 'l'
start = 4; count = 0; after = 1;      // typed 'o' 
```

现在，在 ICS / Samsung Galaxy Nexus 上，拼写建议处于活动状态，当我键入相同的文本时，该单词在 EditText 中带有下划线，直到我插入一个空格并得到以下结果：

```
start = 0; count = 0; after = 1;      // typed 'h'
start = 0; count = 1; after = 2;      // typed 'e'
start = 0; count = 2; after = 3;      // typed 'l'
start = 0; count = 3; after = 4;      // typed 'l'
start = 0; count = 4; after = 5;      // typed 'o' 
```

根据文档，后一种行为被视为“用户输入了一个 1 个字母的单词，然后删除它并输入了一个 2 个字母的单词，然后删除了它并输入了一个 3 个字母的单词，依此类推……”。当我在 EditText 上执行撤消操作时，我得到“hello”、“”、“hell”、“”、“hel”、“”、“he”、“”、“h”，我只想拥有“你好”， ””。

有没有办法阻止拼写建议给出这些值。恕我直言，这违反了方法文档中给出的合同。

如果没有，有没有办法阻止对我的编辑文本的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:42:52.063

您可以很容易地阻止建议：

```
<EditText
    ...
    android:inputType="textNoSuggestions" /> 
```

我确信这适用于所有 ICS 设备。我相信该字段在旧设备上不可用，但在不应该成为问题的情况下。

# performance - R中更快的比例表

> ID：10656438
> 
> 赞同：5
> 
> 时间：2012-05-18T16:33:41.680
> 
> 标签：performance, r, xts

我正在创建基于 xts 对象的比例表。由于这是一个（不幸的是）需要大约 10^6 个循环的大型程序的一部分，它造成了相当大的瓶颈，我想加快它的速度。

这是我开始的一个例子：

```
library(quantmod)

test.xts <- xts(sample(seq(1,5, by=.5), 50, replace=T), as.Date(1:50))

system.time(for(i in 1:10000){

  prop.table(table(test.xts))

})

>user  system elapsed 
 19.86    0.00   18.58 
```

我已经将 xts 更改为矩阵，从而显着提高了速度。我只提到它最初是一个 xts，以防我错过了 xts 的某些东西，这些东西会加快速度，超出我已经看到的将其转换为矩阵的增益。

```
test.mat <- as.matrix(test.xts)

system.time(for(i in 1:10000){

  prop.table(table(test.mat))

})

>user  system elapsed 
 2.78    0.00    2.90 
```

但我真的希望它尽可能快，所以我希望其他人有进一步改进的建议。我希望有一个明显的方法我忽略了。

另一条信息是，这些表的输出最终会与不同时间段的类似输出合并，因此维度需要保持命名。（即，我需要能够将时间 1 的“10”值的比例与时间 2 的“10”的比例相匹配）。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:49:05.740

`table()`隐含地创建了一个昂贵的因素。在您的情况下，您可以通过使用节省很多（超过 10 倍），`tabulate()`因为您已经有整数：

```
a <- tabulate(test.mat)
names(a) <- seq_along(a)
a / sum(a)
   1    2    3    4    5    6    7    8    9   10 
0.16 0.14 0.08 0.14 0.08 0.16 0.02 0.06 0.10 0.06 
```

时间：

```
system.time(for(i in 1:10000){
  a <- tabulate(test.mat)
  names(a) <- seq_along(a)
  a/sum(a)
})

 user  system elapsed 
0.208   0.002   0.210 
```

您的比较时间：

```
system.time(for(i in 1:10000) prop.table(table(test.mat)))
 user  system elapsed 
3.373   0.028   3.402 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:51:34.693

以 joran 的评论为基础，`tabulate()`直接使用可以证明更快。它确实有三个值得注意的怪癖：

1.  它只处理整数并截断小数。
2.  它默默地忽略所有负值和零。
3.  它为所有值 1:n 创建一个 bin，即使计数为零

详情请参阅`?tabulate`。

有了这个警告，这里有一个函数可以加快大约 9 倍的速度：

```
prop2 <- function(x){
  x <- tabulate(x)
  out <- x/sum(x)
  names(out) <- seq_along(out)
  return(out)
} 
```

测试速度：

```
library(rbenchmark)
test.mat <- as.matrix(test.xts)
f1 <- function() prop.table(table(test.mat))
benchmark(f1(), prop2(test.mat),
           replications = 1000,
           columns = c("test", "relative", "elapsed"),
           order = "relative")
#------
             test relative elapsed
2 prop2(test.mat)      1.0    0.10
1            f1()      9.1    0.91 
```

确认输出相同：

```
> prop.table(table(test.mat))
test.mat
   1    2    3    4    5    6    7    8    9   10 
0.04 0.02 0.20 0.12 0.08 0.10 0.06 0.14 0.12 0.12 
> prop2(test.mat)
   1    2    3    4    5    6    7    8    9   10 
0.04 0.02 0.20 0.12 0.08 0.10 0.06 0.14 0.12 0.12 
```

# javascript - 使用 Node.js 从 Amazon S3 动态创建 ZIP 文件

> ID：10656444
> 
> 赞同：6
> 
> 时间：2012-05-18T16:34:05.383
> 
> 标签：javascript, node.js, amazon-s3, zip

我正在创建一个带有在线商店的 Web 应用程序来购买小型数字文件。当用户添加了他们想要购买的所有文件后，他们会付费，然后应该会看到他们购买的 ZIP 下载。

该网站/应用程序是用 Node.js 制作的，并使用 Node raw（例如，没有 Nginx 或 Apache）。这些文件存储在 Amazon S3 上。除了必要的 Node.js 模块外，购物车和 Web 应用程序都是内部的。

我正在寻找一种解决方案，我可以在其中选择用户从 Amazon S3 订购的文件，将它们打包为 ZIP 文件并作为下载提供给用户。

如果可能的话，我正在寻找一种相对简单的解决方案，是否存在？

非常感谢！詹姆士

# .htaccess - 无法将 HTTPS 应用于正确的站点区域

> ID：10656447
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:34:24.697
> 
> 标签：.htaccess, https

新开发。我正在尝试将 HTTPS 应用于我网站的某些页面，而其他页面仍然不安全。我已经尝试了我的 .htaccess 文件，但仍然卡住了。任何帮助将不胜感激。

现在，当您在访问开始时到达索引页面时，HTTPS 尚未激活。一旦您离开索引页面，它就会被激活，然后在您访问的剩余时间里保持活动状态。该规则的例外是 Best Practices Blog (Wordpress) 和 Store (Zen Cart)，它们被完整上传并且运行正常。

在不打扰 Zen Cart 或 Wordpress 的情况下，我想将 HTTPS 应用于 Pay_My_Bill_Online 部分，而 Index、About_Us、Contact_Us 和链接仍然不安全。现在站点文件都在根目录中（除了文件夹中的博客和商店），如果可能的话，我希望此时不要将每个页面隔离到一个文件夹中。

注意：Pay_My_Bill_Online 内容不是最终形式。完成后，Paypal 按钮将消失，底部的表单将重新设置样式以输入付款信息。

网站地址： [http ://www.mconchicago.com](http://www.mconchicago.com)

我当前的 .htaccess 文件：

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} !=443
RewriteCond %{REQUEST_URI} html 
RewriteRule ^(.*)$ https://mconchicago.com/$1 [R=301,QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:04:20.623

我最终决定删除 Pay_My_Bill_Online。我有一种感觉，需要基本 HTTPS 之上的安全知识才能拥有这样的功能。经反思，拥有一张包含信用卡信息的表格似乎涉及重大的潜在责任。环顾各种博客表明，没有多少人走上了同一条路。所以我暂时不考虑这个想法，并找到一种通过 Store 部分运行所有事务的方法。我不认为这对于计费工作来说是理想的。但是，将金融交易交给专业人士（商户提供商/Paypal）似乎是最谨慎的做法。我将来可能会将 HTTPS 应用于 Contact_Us 表单。但简单的姓名、地址和电子邮件内容使这成为一个较低优先级的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:42:28.120

只是为了将我的上述问题得出一个有用的结论：

我确实分解并将 Pay_My_Bill_Online 文件移动到他们自己的文件夹中。我将上面的 .htaccess 文件放入新文件夹中，并将其从主站点目录中删除。它现在可以在 IE9、Firefox Chrome 和 Safari 中正确应用。它没有在 Opera 中正确应用。正如我所阅读的报道，引用 Opera 用于 2-5% 的搜索，这是我计划解决的问题。一旦我弄清了这个最后的小问题，我会回来报告的。当然，如果有人在此期间发表评论，我将不胜感激。

# c - 全局键盘挂钩回调函数

> ID：10656449
> 
> 赞同：0
> 
> 时间：2012-05-18T16:34:31.007
> 
> 标签：c, winapi, hook, keyboard-hook, keylogger

我正在尝试使用全局键盘挂钩编写一个简单的键盘记录程序。我需要一些帮助来实现键盘挂钩回调函数。到目前为止，我的功能有效，但无法处理按下键但未释放的情况。

```
LRESULT CALLBACK KeyboardProc( int code,WPARAM wParam,LPARAM lParam ){
    DWORD keyStroke=wParam;
    if(code>=0 && lParam&0x40000000){
        buff[charCount++]=(WCHAR)keyStroke;
        buff[charCount]=L'\0';
        if(charCount==1024 && charCount>0){
            writeCacheToFile(buff,1025);
            charCount=0;
        }
    }
    return CallNextHookEx(NULL,code,wParam,lParam);
} 
```

在这里，我尝试将字符存储在缓冲区中，然后使用 writeCacheToFile 将它们写入文件。

有人可以给我一些处理按键事件的示例代码吗？

任何帮助将不胜感激。

谢谢，阿希什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:27:32.933

我没有仔细看，但这里有一个优先级问题；

```
if(code>=0 && lParam&0x40000000) 
```

你需要;

```
if( code >= 0 && (lParam & 0x40000000) ) 
```

而且，这很奇怪。

```
if( charCount == 1024 && charCount > 0 ) 
```

如果 charCount 是 1024，那么它总是大于 0。

# android - 如何创建一个没有任何按钮可以唤醒它的空闲布局？

> ID：10656451
> 
> 赞同：0
> 
> 时间：2012-05-18T16:34:35.217
> 
> 标签：android

我正在开发一个安全应用程序，我想创建一个空闲布局。当有人试图登录手机时，系统只允许3次尝试，3次尝试失败后，将激活15分钟的空闲布局，直到定时器超时，任何按键或按钮都不能唤醒它。我试图设置计时器并且它成功但我不知道如何确保它变得空闲没有任何按钮可以打扰它......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:39:02.707

3 次尝试后，设置按钮禁用槽`Button.setEnabled()` 并启动`Timer`. 进入`TimerTask`runnable，将启用状态设置为`true`。

见[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html) , [Timer](http://developer.android.com/reference/java/util/Timer.html) , [setEnabled](http://developer.android.com/reference/android/view/View.html#setEnabled%28boolean%29)

# c# - 如何使用 ext.net 在 asp.net c# 中创建水晶报表？

> ID：10656456
> 
> 赞同：2
> 
> 时间：2012-05-18T16:34:47.197
> 
> 标签：c#, asp.net, linq-to-sql, ext.net

我想创建`crystal-report`，`asp.net` `c#`但使用 ext.net？

是否有任何链接/资源显示创建水晶报告的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:54:53.330

您应该能够将 CrystalReport 查看器控件添加到任何容器类型 Ext.NET 组件的区域中，例如面板、窗口、容器等。

希望这可以帮助。

# grails - 登录后grails spring secruity插件重定向

> ID：10656457
> 
> 赞同：0
> 
> 时间：2012-05-18T16:34:47.497
> 
> 标签：grails

在 grails 中，我试图在登录到我的人员控制器后引导用户。我试图在 config.groovy 中添加重定向，但它不起作用。它仍然将我重定向回登录页面。

我的`config.grooovy`Spring 安全部分如下

```
// Added by the Spring Security Core plugin:
grails.plugins.springsecurity.userLookup.userDomainClassName = 'grail4.User'
grails.plugins.springsecurity.userLookup.authorityJoinClassName = 'grail4.UserRole'
grails.plugins.springsecurity.authority.className = 'grail4.Role'

//grails.plugins.springsecurity.successHandler.defaultTargetUrl = 'https://www.yahoo.com'
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap
grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/index'

grails.plugins.springsecurity.interceptUrlMap = [

 '/people/*':   ['IS_AUTHENTICATED_REMEMBERED'],   

   ]

***grails.plugins.springsecurity.successHandler.defaultTargetUrl ="/people"*** 
```

输入正确的用户名密码后，如果我复制并粘贴 URL，我可以访问人员类页面。但是登录页面不会将其重定向到该页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:02:31.033

以下应该工作 -

```
 grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/people' 
```

看起来用户未成功通过身份验证。您应该尝试注册 spring 安全侦听器

1.  在 Config.groovy

    ```
    grails.plugins.springsecurity.useSecurityEventListener = true 
    ```

2.  实现一个安全监听器——

    ```
    class MySecurityEventListener implements ApplicationListener<ApplicationEvent> {
    static Log logger = LogFactory.getLog(CGWSecurityEventListener.class);

    public void onApplicationEvent(final ApplicationEvent e) {
        if (e instanceof AbstractAuthenticationEvent) {
            if (e instanceof AbstractAuthenticationFailureEvent) {
                logger.warn(String.format("Authentication failure",    ((AbstractAuthenticationFailureEvent) e).getAuthentication().principal),
                        ((AbstractAuthenticationFailureEvent) e).getException());
            }
            else if (e instanceof AuthenticationSuccessEvent) {
                logger.debug(String.format("user %s has been authenticated sucessfully", ((AuthenticationSuccessEvent) e).getAuthentication().principal))
            }
        }

    } 
    ```

    }

[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/7%20Events.html#7.2%20Registering%20an%20Event%20Listener](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/7%20Events.html#7.2%20Registering%20an%20Event%20Listener)

# powershell - Powershell 运行历史记录删除

> ID：10656465
> 
> 赞同：1
> 
> 时间：2012-05-18T16:35:20.910
> 
> 标签：powershell, registry

我正在尝试运行 Powershell 脚本以通过注册表清除运行历史记录。它工作得很好，但我遇到的问题是我希望它显示注册表值数据，但我无法让它正确显示。这是脚本：

```
function Delete
{
$Reg = Get-RegistryValues 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU'
foreach ($Value in $Reg)
    {
    $Item = Get-ItemProperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU\' -name $Value
    $yes = New-Object System.Management.Automation.Host.ChoiceDescription "&Yes",""
    $no = New-Object System.Management.Automation.Host.ChoiceDescription "&No",""
    $choices = [System.Management.Automation.Host.ChoiceDescription[]]($yes,$no)
    $caption = "Warning!"
    $message = ("Do you want to delete the run value "+$Item)
    $result = $Host.UI.PromptForChoice($caption,$message,$choices,0)
    if($result -eq 0) 
        {              
        Remove-ItemProperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU' -name $Value 
        }
    if($result -eq 1) { }
    }
}

function Get-RegistryValues($Key) 
{
(Get-Item $Key).GetValueNames()

}

Delete 
```

每当我尝试运行它时，我都会得到 $Message 的以下输出

```
Do you want to delete the run value @{MRULIST=idhgfcaeb} 
```

有谁知道获取价值数据的方法，所以它是：

```
idhgfcaeb 
```

工作解决方案：

```
function Delete
{
$Reg = Get-RegistryValues 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU'
foreach ($Value in $Reg)
    {
    if ($Value -eq 'MRUList') {Set-ItemProperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU\' -name $Value -value ' '}
    Else 
        {
        $Item = (Get-ItemProperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU\' -name $Value).$Value.TrimEnd("\1")
        $yes = New-Object System.Management.Automation.Host.ChoiceDescription "&Yes",""
        $no = New-Object System.Management.Automation.Host.ChoiceDescription "&No",""
        $choices = [System.Management.Automation.Host.ChoiceDescription[]]($yes,$no)
        $caption = "Warning!"
        $message = ("Do you want to delete the run value "+$Item)
        $result = $Host.UI.PromptForChoice($caption,$message,$choices,0)
        if($result -eq 0) 
            {              
            Remove-ItemProperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU' -name $Value 
            }
        if($result -eq 1) { }
        }
    }
}

function Get-RegistryValues($Key) 
{
(Get-Item $Key).GetValueNames()
}

Delete 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:42:39.493

你可以使用：

```
$Item = (Get-ItemProperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU\' -Name mrulist).MRUList 
```

或者：

```
("Do you want to delete the run value " + $Item.MRUList) 
```

# oracle - Oracle NLS_UPPER 索引列

> ID：10656466
> 
> 赞同：0
> 
> 时间：2012-05-18T16:35:29.770
> 
> 标签：oracle, indexing

我有一个表，它有一个包含 3 列的索引。其中一列是 NSL_UPPER("CODE")。当我从 ALL_IND_COLUMNS 或 DBA_IND_COLUMNS 中选择索引列时，它会为 NSL_UPPER（“CODE”）返回“SYS_NC00101$”。如何到达名为 NSL_UPPER("CODE") 的索引列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:17:08.113

看看 ALL_IND_EXPRESSIONS 而不是 ALL_IND_COLUMNS 基于函数的索引是基于表达式而不是列

# java - ArrayList 和 LinkedList 之间的性能差异

> ID：10656471
> 
> 赞同：68
> 
> 时间：2012-05-18T16:35:58.927
> 
> 标签：java, arraylist, doubly-linked-list

是的，这是一个老话题，但我仍然有些困惑。

在 Java 中，人们说：

1.  如果我随机访问它的元素，ArrayList 比 LinkedList 快。我认为随机访问意味着“给我第 n 个元素”。为什么 ArrayList 更快？

2.  LinkedList 的删除速度比 ArrayList 快。我理解这一点。ArrayList 的速度较慢，因为需要重新分配内部备份数组。代码说明：

    ```
    List<String> list = new ArrayList<String>();
    list.add("a");
    list.add("b");
    list.add("c");
    list.remove("b");
    System.out.println(list.get(1)); //output "c" 
    ```

3.  LinkedList 的插入速度比 ArrayList 快。这里的插入是什么意思？如果是指将一些元素往回移动，然后将元素放在中间的空白处，ArrayList 应该比 LinkedList 慢。如果插入只意味着一个 add(Object) 操作，这怎么可能慢？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-18T16:38:21.280

> 如果我随机访问它的元素，ArrayList 比 LinkedList 快。我认为随机访问意味着“给我第 n 个元素”。为什么 ArrayList 更快？

`ArrayList`对列表中的每个元素都有直接引用，因此它可以在恒定时间内获取第 n 个元素。`LinkedList`必须从头开始遍历列表才能到达第 n 个元素。

> LinkedList 的删除速度比 ArrayList 快。我理解这一点。ArrayList 的速度较慢，因为需要重新分配内部备份数组。

`ArrayList`速度较慢，因为它需要复制数组的一部分才能删除已空闲的插槽。如果删除是使用[`ListIterator.remove()`](https://docs.oracle.com/javase/8/docs/api/java/util/ListIterator.html#remove--)API 完成的，`LinkedList`只需要操作几个引用；如果删除是按值或按索引完成的，`LinkedList`则必须先扫描整个列表以找到要删除的元素。

> 如果这意味着将一些元素移回然后将元素放在中间的空白处，则 ArrayList 应该更慢。

是的，这就是它的意思。`ArrayList`确实比它要慢，`LinkedList`因为它必须释放数组中间的一个插槽。这涉及移动一些引用，在最坏的情况下重新分配整个数组。`LinkedList`只需要操作一些参考。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-18T18:00:05.430

暂时忽略这个答案。其他答案，尤其是*aix*的答案，大多是正确的。从长远来看，它们是下注的方式。如果你有足够的数据（在一台机器上的一个基准上，它似乎有大约一百万个条目）ArrayList 和 LinkedList 目前确实像广告宣传的那样工作。但是，有一些适用于 21 世纪初的要点。

根据我的测试，现代计算机技术似乎给阵列带来了巨大的优势。数组的元素可以以疯狂的速度移动和复制。因此，在大多数实际情况下，数组和 ArrayList 在插入和删除方面的性能通常会显着优于 LinkedList。换句话说，ArrayList 将在自己的游戏中击败 LinkedList。

ArrayList 的缺点是它在删除后往往会挂在内存空间上，而 LinkedList 在放弃条目时会放弃空间。

*数组和 ArrayList更大*的缺点是它们会分割空闲内存并使垃圾收集器过度工作。随着 ArrayList 的扩展，它会创建新的更大的数组，将旧数组复制到新数组，然后释放旧数组。内存被大的连续空闲内存块填充，这些空闲内存不足以进行下一次分配。最终没有适合该分配的空间。尽管 90% 的内存是空闲的，但没有任何一块内存足够大来完成这项工作。GC 会疯狂地移动东西，但如果重新排列空间的时间过长，它会抛出 OutOfMemoryException。如果它不放弃，它仍然会减慢您的程序速度。

最糟糕的是这个问题很难预测。您的程序将运行良好一次。然后，可用内存少一点，没有警告，它会减慢或停止。

LinkedList 使用小而精致的内存，GC 喜欢它。当您使用 99% 的可用内存时，它仍然可以正常运行。

因此，一般来说，对于不太可能删除大部分内容的较小数据集，或者当您对创建和增长有严格控制时，请使用 ArrayList。（例如，创建一个使用 90% 内存的 ArrayList 并在程序运行期间使用它而不填充它是可以的。继续创建和释放使用 10% 内存的 ArrayList 实例会杀死你。）否则，使用 LinkedList （或某种地图，如果您需要随机访问）。如果您有非常大的集合（例如超过 100,000 个元素），不担心 GC，并且计划大量插入和删除并且没有随机访问，请运行一些基准测试以查看最快的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-18T17:09:03.543

该类`ArrayList`是数组的包装类。它包含一个内部数组。

```
public ArrayList<T> {
    private Object[] array;
    private int size;
} 
```

A`LinkedList`是链表的包装类，具有用于管理数据的内部节点。

```
public LinkedList<T> {
    class Node<T> {
        T data;
        Node next;
        Node prev;
    }
    private Node<T> first;
    private Node<T> last;
    private int size;
} 
```

请注意，当前代码用于显示类的可能方式，而不是实际的实现。知道了实现可能如何，我们可以做进一步的分析：

> 如果我随机访问它的元素，ArrayList 比 LinkedList 快。我认为随机访问意味着“给我第 n 个元素”。为什么 ArrayList 更快？

ArrayList 的访问时间：O(1)。LinkedList 的访问时间：O(n)。

在数组中，您可以使用 访问任何元素`array[index]`，而在链表中，您必须从开始浏览所有列表，`first`直到获得所需的元素。

> LinkedList 的删除速度比 ArrayList 快。我理解这一点。ArrayList 的速度较慢，因为需要重新分配内部备份数组。

ArrayList 的删除时间：访问时间 + O(n)。LinkedList 的删除时间：访问时间 + O(1)。

ArrayList 必须将所有元素从要删除的项目移动`array[index]`到开始的索引。`array[index-1]`LinkedList 应该导航到该项目，然后通过将其与列表分离来删除该节点。

> LinkedList 的删除速度比 ArrayList 快。我理解这一点。ArrayList 的速度较慢，因为需要重新分配内部备份数组。

ArrayList 的插入时间：O(n)。LinkedList 的插入时间：O(1)。

为什么 ArrayList 可以取 O(n)？因为当你插入一个新元素并且数组已满时，你需要创建一个更大的新数组（你可以用像 2 * size 或 3 * size / 2 这样的公式来计算新的大小）。LinkedList 只是在最后一个节点旁边添加一个新节点。

这种分析不仅在 Java 中，而且在 C、C++ 和 C# 等其他编程语言中。

更多信息在这里：

*   [http://en.wikipedia.org/wiki/Array_data_structure](http://en.wikipedia.org/wiki/Array_data_structure)
*   [http://en.wikipedia.org/wiki/Linked_list](http://en.wikipedia.org/wiki/Linked_list)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-11T20:29:17.300

对于 ArrayList 和 LinkedList，remove() 和 insert() 的运行时效率均为 O(n)。然而，线性处理时间背后的原因来自两个截然不同的原因：

在 ArrayList 中，您可以在 O(1) 中找到元素，但实际上删除或插入某些内容会使它成为 O(n)，因为需要更改以下所有元素。

在 LinkedList 中，实际上需要 O(n) 才能到达所需的元素，因为我们必须从头开始，直到到达所需的索引。一旦我们到达那里，删除或插入是不变的，因为我们只需要更改 remove() 的 1 个引用和 insert() 的 2 个引用。

两者中哪一个更快插入和删除取决于它发生的位置。如果我们更接近开始，LinkedList 会更快，因为我们必须通过相对较少的元素。如果我们更接近终点，ArrayList 会更快，因为我们在恒定时间内到达那里，只需要更改它后面的少数剩余元素。

奖励：虽然没有办法为 ArrayList 制作这两种方法 O(1)，但实际上在 LinkedLists 中有一种方法可以做到这一点。假设我们要遍历整个 List 删除和插入元素。通常你会从一开始就使用 LinkedList 来处理每个元素，我们也可以使用迭代器“保存”我们正在处理的当前元素。在 Iterator 的帮助下，当我们在 LinkedList 中工作时，remove() 和 insert() 的效率为 O(1)。使它成为唯一的性能优势，我知道 LinkedList 总是比 ArrayList 更好。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-06T18:07:04.397

**数组列表**

*   如果我们的频繁操作是检索操作，ArrayList 是最好的选择。
*   如果我们的操作是在中间插入和删除，ArrayList 是最糟糕的选择，因为在内部执行了几个移位操作。
*   在 ArrayList 中，元素将存储在连续的内存位置，因此检索操作将变得容易。

**链表：-**

*   如果我们的频繁操作是中间的插入和删除，LinkedList是最好的选择。
*   LinkedList 是最差的选择是我们的频繁操作是检索操作。
*   在 LinkedList 中，元素不会存储在连续的内存位置，因此检索操作会很复杂。

**现在来回答你的问题：-**

1) ArrayList 根据索引保存数据，它实现了 RandomAccess 接口，这是一个标记接口，它提供了对 ArrayList 进行随机检索的能力，但 LinkedList 没有实现 RandomAccess 接口，这就是 ArrayList 比 LinkedList 快的原因。

2) LinkedList 的底层数据结构是双向链表，因此在 LinkedList 中的中间插入和删除非常容易，因为它不必像 ArrayList 那样每次删除和插入操作都移动每个元素（即如果我们的操作是中间的插入和删除，不建议这样做，因为内部执行了几次移位操作）。
[资源](https://javaquicky.com/2019/02/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T16:39:13.513

对 1 的回答：ArrayList 在后台使用一个数组。访问 ArrayList 对象的成员就像访问提供的索引处的数组一样简单，假设索引在后备数组的范围内。LinkedList 必须遍历其成员才能到达第 n 个元素。LinkedList 是 O(n)，而 ArrayList 是 O(1)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T16:43:30.473

在 LinkedList 中，元素对它之前和之后的元素都有引用。在 ArrayList 中，数据结构只是一个数组。

1.  LinkedList 需要遍历 N 个元素才能获得第 N 个元素。ArrayList 只需要返回后备数组的元素 N。

2.  需要为新大小重新分配后备数组，并复制该数组，或者需要向上移动删除元素之后的每个元素以填充空白空间。LinkedList 只需要将删除后元素的上一个引用设置为删除之前的元素，并将删除元素之前的元素的下一个引用设置为删除元素之后的元素。解释时间更长，但做起来更快。

3.  与此处删除的原因相同。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-18T15:45:19.137

我想添加一条关于性能差异的额外信息。

我们已经知道，由于`ArrayList`实现是由一个支持的，`Object[]`它支持随机访问和动态调整大小，并且`LinkedList`实现使用对 head 和 tail 的引用来导航它。它没有随机访问功能，但也支持动态调整大小。

首先，使用 ArrayList，您可以立即访问索引，而使用 LinkedList，您可以遍历对象链。

其次，插入 ArrayList 的速度通常较慢，因为一旦达到其边界，它就必须增长。它必须创建一个更大的新数组，并从原始数组中复制数据。

但**有趣的**是，当您**创建一个已经足够大**以容纳所有插入的 ArrayList 时，它显然不会涉及任何数组复制操作。添加到它会比使用 LinkedList 更快，因为 LinkedList 必须处理它的指针，而巨大的 ArrayList 只是在给定索引处设置值。

[![在此处输入图像描述](../Images/cdcbb38c87ffd45d0df712fa9223441a.png)](https://i.stack.imgur.com/SpCcj.png)

查看更多[ArrayList 和 LinkedList 的区别](https://javatutorial.net/difference-between-arraylist-and-linkedlist-in-java)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-17T07:12:56.397

**ArrayList** : ArrayList 有一个类似数组的结构，它直接引用每个元素。所以 ArrayList 中的随机访问速度很快。

**LinkedList**：在 LinkedList 中，为了获取第 n 个元素，您必须遍历整个列表，与 ArrayList 相比需要时间。每个元素都有一个指向其前一个 & 嵌套元素的链接，因此删除速度很快。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-20T10:22:24.203

**ArrayList：** ArrayList 类扩展了 AbstractList 并实现了 List 接口和 RandomAccess（标记接口）。ArrayList 支持可以根据需要增长的动态数组。**它给了我们对元素的第一次迭代。**

**LinkedList：** LinkedList 是按索引位置排序的，就像 ArrayList 一样，只是元素之间是双向链接的。此链接为您提供了从头或尾添加和删除的新方法（超出您从 List 接口获得的方法），这使其成为实现堆栈或队列的简单选择。请记住，LinkedList 的迭代速度可能比 ArrayList 慢，**但是当您需要快速插入和删除时，它是一个不错的选择。**从 Java 5 开始，LinkedList 类已得到增强，可以实现 java.util.Queue 接口。因此，它现在支持常见的队列方法：peek()、poll() 和 offer()。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-02-05T08:40:28.000

即使它们看起来相同（相同的实现接口列表 - 非线程安全），它们在添加/删除和搜索时间和消耗内存的性能方面给出不同的结果（LinkedList 消耗更多）。

如果您使用性能 O(1) 的高度插入/删除，则可以使用 LinkedLists。如果您使用性能 O(1) 的直接访问操作，则可以使用 ArrayList

此代码可能会清除这些注释，您可以尝试了解性能结果。（对不起样板代码）

```
public class Test {

    private static Random rnd;

    static {
        rnd = new Random();
    }

    static List<String> testArrayList;
    static List<String> testLinkedList;
    public static final int COUNT_OBJ = 2000000;

    public static void main(String[] args) {
        testArrayList = new ArrayList<>();
        testLinkedList = new LinkedList<>();

        insertSomeDummyData(testLinkedList);
        insertSomeDummyData(testArrayList);

        checkInsertionPerformance(testLinkedList);  //O(1)
        checkInsertionPerformance(testArrayList);   //O(1) -> O(n)

        checkPerformanceForFinding(testArrayList);  // O(1)
        checkPerformanceForFinding(testLinkedList); // O(n)

    }

    public static void insertSomeDummyData(List<String> list) {
        for (int i = COUNT_OBJ; i-- > 0; ) {
            list.add(new String("" + i));
        }
    }

    public static void checkInsertionPerformance(List<String> list) {

        long startTime, finishedTime;
        startTime = System.currentTimeMillis();
        int rndIndex;
        for (int i = 200; i-- > 0; ) {
            rndIndex = rnd.nextInt(100000);
            list.add(rndIndex, "test");
        }
        finishedTime = System.currentTimeMillis();
        System.out.println(String.format("%s time passed at insertion:%d", list.getClass().getSimpleName(), (finishedTime - startTime)));
    }

    public static void checkPerformanceForFinding(List<String> list) {

        long startTime, finishedTime;
        startTime = System.currentTimeMillis();
        int rndIndex;
        for (int i = 200; i-- > 0; ) {
            rndIndex = rnd.nextInt(100000);
            list.get(rndIndex);
        }
        finishedTime = System.currentTimeMillis();
        System.out.println(String.format("%s time passed at searching:%d", list.getClass().getSimpleName(), (finishedTime - startTime)));

    }

} 
```

# groovy - 常规列表文字是 ArrayLists 还是 LinkedLists？

> ID：10656477
> 
> 赞同：2
> 
> 时间：2012-05-18T16:36:37.147
> 
> 标签：groovy

groovy 的文字列表`['foo','bar','baz']`是由 ArrayList（动态数组）还是 LinkedList 支持的？在不同情况下使用一种代替另一种会[带来性能优势。](http://en.wikipedia.org/wiki/Dynamic_array#Performance)

相关：有没有一种方法可以在运行时在 groovy 中找出变量的类型，类似于 JavaScript 的`typeof`运算符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:45:30.780

查看对象上的类以了解它是什么：

```
groovy:000> [].class
===> class java.util.ArrayList 
```

用 来检查它的类型`instanceof`，就像在 Java 中一样：

```
groovy:000> [] instanceof ArrayList
===> true 
```

它告诉您对象是 ArrayList 还是 ArrayList 的子类。

或者测试它的类：

```
groovy:000> [].class == ArrayList
===> true 
```

它告诉您对象的具体类是否为 ArrayList。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:44:13.340

除非指定，否则它会将其创建为 ArrayList。`def myList = [] as LinkedList`您可以通过直接实例化或通过实例化来指定链表`def myLinkedList = new LinkedList()`

`myList.getClass().name`会告诉你类型。

# java - Jpa ejbql 按列表属性查询

> ID：10656478
> 
> 赞同：0
> 
> 时间：2012-05-18T16:36:41.237
> 
> 标签：java, hibernate, jpa, ejbql

我有对象：

```
PersenInfo : (long id,String name, String lastName,String email)
AnsMsg : (long id,PersenInfo fromPersoninfo,String theMsg)
Person : (PersonInfo personInfo, List<AnsMsg> msgs) 
```

person.hbm 看起来像这样：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated May 4, 2012 2:48:41 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="Entities.Person" table="PERSON">
        <id name="id" type="long">
            <column name="ID" />
            <generator class="increment" />
        </id>
        <many-to-one name="personInfo" class="Entities.PersonInfo" cascade="all" not-null="false" lazy="false"/>

        <property name="_pass" type="java.lang.String" access="field" lazy="false">
            <column name="_PASS" />
        </property>
        <property name="_IsConnect" type="int" access="field" lazy="false">
            <column name="_ISCONNECT" />
        </property>
        <property name="c2dmId" type="java.lang.String" lazy="false">
            <column name="C2DMID" />
        </property>

        <property name="lastSeen" type="long" lazy="false">
            <column name="LASTSEEN" />
        </property>
        <list name="msgList" inverse="false" table="ANSMSG" lazy="false" >
             <key column="parent_id" />
              <index column="idx"  />
            <one-to-many class="msg.AnsMsg"  />
        </list>
    </class>
</hibernate-mapping> 
```

现在我尝试获取`AnsMsg`fromPerson=6 和`AnsMsg`parent_id=3 的所有列表；

我的查询应该是什么样子？（我的意思是这样的：

```
"from AnsMsg ansMsg where ansMsg.fromPerson.id='6' or ansMsg.parent_id='6'" 
```

当然这个查询不应该工作..）

我的数据看起来很像：

![数据库示例](../Images/3506eb170a2f37c29d68ed9dafff5b69.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:14:45.353

尝试这个：

```
select m.* from Person p, p.msgList m, m.fromPersonInfo f where p.id = 6 or f.id = 6 
```

1.  父 ID（我想是收件人）确定加入 Person 和 AnsMsg 表。
2.  某人发送的消息使用 进行检索`m.fromPersonInfo.id`，尽管 JPA 无法评估此类表达式，因此必须将其分离到`m.fromPersonInfo f`and`f.id = 6`

Obs.：如果您使用 Person 和 PersonInfo 实例作为查询的参数，您应该这样做：`select m.* from Person p, p.msgList m where p = :person or m.fromPersonInfo = :fromPersonInfo`

# android - 将某些任务发送到后台的最快和最轻的方法是什么？

> ID：10656479
> 
> 赞同：0
> 
> 时间：2012-05-18T16:36:42.523
> 
> 标签：android, android-asynctask, handler

在后台线程中执行某些任务的内存消耗更少且最快（就代码行和执行时间而言）的方式是什么？

我需要将许多简单的任务发送到后台线程，我显然不会`AsyncTask`为此使用类。那是`handler`我正在寻找的还是有更快的方法？

```
 final Handler handler = new Handler();
    final Runnable runnable = new Runnable() {
        @Override
        public void run() {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            handler.post(new Runnable() {
                @Override
                public void run() {
                    infoMsg.setVisibility(View.INVISIBLE);
                }
            });
        }
    };
    new Thread(runnable).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:58:30.447

handler 通常用于 UI 线程，以推迟将来要做的事情。在您的示例中，此解决方案将是完美的。

当您不关心何时以及应该执行任务的顺序时，使用 asynctask 。asynctasks 不应该用于太长的操作（例如在最终用户停止之前一直保持活动状态的连接）。您不能假设有多个 asynctask 处于活动状态（但可以假设一个）。

对于任何其他用途，我只是使用一个线程，但大多数情况下处理程序和 asynctask 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:39:41.763

在撰写本文时，处理程序似乎是最快的方法。如果出现更快的方法，我将更改此问题或将其他帖子标记为答案。

# java - 无法从上下文访问 getContentResolver()？

> ID：10656485
> 
> 赞同：-1
> 
> 时间：2012-05-18T16:36:52.483
> 
> 标签：java, android, parameters, crash, android-context

我有两个班，`MainActivity`和`DoHardWork`。DoHardWork extends `AsyncTask`，并且在类中我需要访问上下文才能获取`contentResolver`并执行查询。

没问题，对吧？让我们将它作为参数传递给`DoHardWork`：

```
 Context currCont = this;
    new DoHardWork(currCont).execute(); 
```

然后在构造函数中，我获取上下文并将其存储在一个名为`ccc`.

但是，一旦我尝试访问上下文，它就会崩溃，没有任何有意义的错误。

```
try {
    Cursor cursor = ccc.getContentResolver().query(
            Uri.parse("content://sms/inbox"), null, null, null, null);
}
catch (Exception e) {
    Log.e("apptag", e.getMessage());
    e.printStackTrace();
} 
```

我得到的是：

```
05-18 18:54:06.725: E/apptag(29063): Crashed
05-18 18:54:06.725: E/apptag(29063): java.lang.NullPointerException
05-18 18:54:06.725: E/apptag(29063):    at android.content.ContextWrapper.getContentResolver(ContextWrapper.java:91)
05-18 18:54:06.725: E/apptag(29063):    at se.jbhalmstad.ndroid.DoHardWork.getTextMessages(DoHardWork.java:214)
05-18 18:54:06.725: E/apptag(29063):    at se.jbhalmstad.ndroid.DoHardWork.returnResults(DoHardWork.java:114)
05-18 18:54:06.725: E/apptag(29063):    at se.jbhalmstad.ndroid.DoHardWork.doInBackground(DoHardWork.java:55)
05-18 18:54:06.725: E/apptag(29063):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
05-18 18:54:06.725: E/apptag(29063):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-18 18:54:06.725: E/apptag(29063):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-18 18:54:06.725: E/apptag(29063):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
05-18 18:54:06.725: E/apptag(29063):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
05-18 18:54:06.725: E/apptag(29063):    at java.lang.Thread.run(Thread.java:856) 
```

为什么我无法访问上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:18:53.753

发现了问题。

它的工作方式是从 MainActivity 类中，我设置了一个重复的 AlarmManager。当警报响起时，GetOperations 类充当 BroadcastReceiver 并被执行。因为我需要 AsyncTask 类中的繁重工作，所以我在一个名为 DoHardWork 的类中完成了所有这些工作。（是的，我知道名字不好，而且大多数编码都需要改进）但是我不能从 BroadcastReceiver 调用 DoHardWork，我需要从 MainActivity 调用它。因此，我没有尝试从 BroadcastReceiver 调用它，而是创建了一个新的 MainActivity 实例并在其中调用一个方法，然后调用 DoHardWork。这就是我提出问题的地方。MainActivity 不是静态的，所以当我创建它的新实例时，没有上下文。

我最终做的是将上下文从 BroadcastReceiver 传递给 MainActivity。

这可能在解释时变得非常混乱，但我希望你能明白它的要点。谢谢大家的帮助！

# c++ - Qt - 没有使用正确的源文件

> ID：10656487
> 
> 赞同：0
> 
> 时间：2012-05-18T16:36:54.097
> 
> 标签：c++, qt, dll

我有几个创建 dll 的 Qt 项目。然后，我有一个“主”项目，可以将它们全部加载并显示一个 GUI。一切运行良好。

我的问题是，我现在有另一个 Qt 项目（我们称之为 NEWEST 项目），我需要在其中合并主项目......所以一切看起来都在工作，但是当我对其中一个 dll 项目进行更改时，这些更改不要传播到最新的项目。我重建并复制了 dll，但该项目仍然执行旧文件。我已经用调试器逐步完成了它，在我注释掉的地方，这些行被执行。

我知道这很难理解，所以请让我知道我是否可以更具体，或者如果您不理解某些内容。

谢谢。

**编辑** 但是，如果我自己运行“主”项目，则确实会应用更改。供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:50:16.023

您的 Qt IDE 在运行时使用旧的二进制文件。`So Go to your build directories of your two projects and remove all those binaries generated in previous builds`.现在，如果您对新集成项目中的任何文件进行更改，它将被反映，因为它没有旧的二进制文件可以运行。因此 qt IDE 将编译新更新的源代码并运行最新的二进制文件。

# android - 自定义视图的状态已保存，但从未恢复

> ID：10656490
> 
> 赞同：3
> 
> 时间：2012-05-18T16:36:56.370
> 
> 标签：android, android-layout, android-widget, custom-controls, android-view

我已经使用了 [如何防止自定义视图在屏幕方向更改时丢失状态](https://stackoverflow.com/questions/3542333/how-to-prevent-custom-views-from-losing-state-across-screen-orientation-changes/3542895#3542895)的建议， 但即使我`View`正确保存了它的状态，`onRestoreInstanceState`也不会被调用。调用 Activity 的恢复方法使事情变得陌生。

```
import java.text.DecimalFormat;
import java.text.NumberFormat;
import com.szyk.myheart.R;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Path.Direction;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.Parcel;
import android.os.Parcelable;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.VelocityTracker;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Scroller;

public class NumberScroller extends View implements OnTouchListener{

    private final float VIEW_FILL_PERCENTAGE = 80;
    private final int MIN_VELOCITY_Y = 100;
    private final int VELOCITY_UNIT = 1000;
    private final String TAG = "NumberScroller";
    private final int ALIGNING_DURATION = 1000;

    private boolean isCustomizing = true;
    private boolean isDragged = false;
    private boolean isNewVelocityTracker = false;

    private Scroller scroller;
    private VelocityTracker velocityTracker;
    private float lastY;
    private int absoleteY;
    private float velocityY;
    private float ascent;
    private Integer maxScrollerNumber;
    private Integer minScrollerNumber;

    private Paint paintNumber;
    private Paint paintNumberActivated;
    private Paint paintBorder;
    private float textOffsetX;
    private Drawable foregroundBorder;
    private Drawable foregroundAlpha;
    private NumberFormat numberFormatter;

    /**
     * Initializes attributes and variables.
     * @param attrs - AttributeSet for Number Scroller
     * @param context in which scroller exists.
     */
    public NumberScroller(Context context, AttributeSet attrs) {
        super(context, attrs);
        Log.i(TAG, "Creating NumberScroller.");
        initAttrs(attrs, context);
        scroller = new Scroller(getContext());
        setOnTouchListener(this);

        foregroundAlpha = getResources().getDrawable(R.drawable.foreground_alpha);

        numberFormatter = new DecimalFormat();
        numberFormatter.setMinimumIntegerDigits(maxScrollerNumber.toString()
                .length());
        numberFormatter.setMinimumFractionDigits(0);

        setSaveEnabled(true);

    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
    }
    /**
     * (non-Javadoc)
     * @see android.view.View#onMeasure(int, int)
     */

/**
     * Initializes attributes from xml description.
     * @param attrs - AttributeSet for Number Scroller
     * @param context in which scroller exists.
     */
    private void initAttrs(AttributeSet attrs, Context context) {
        TypedArray typedArray = context.obtainStyledAttributes(attrs,
                R.styleable.NumberScroller);
        maxScrollerNumber = typedArray.getInteger(
                R.styleable.NumberScroller_maximum, 99);
        minScrollerNumber = typedArray.getInteger(
                R.styleable.NumberScroller_minimum, 0);
        if (maxScrollerNumber < minScrollerNumber) {
            int tmp = minScrollerNumber;
            minScrollerNumber = maxScrollerNumber;
            maxScrollerNumber = tmp;
        }
        typedArray.recycle();
    } 
```

V1：

```
@Override
  public Parcelable onSaveInstanceState() {
    Log.i(TAG,"SAve");
    //begin boilerplate code that allows parent classes to save state
    Parcelable superState = super.onSaveInstanceState();

    SavedState ss = new SavedState(superState);
    //end

    ss.stateToSave = absoleteY;

    return ss;
  }

  @Override
  public void onRestoreInstanceState(Parcelable state) {
      Log.i(TAG,"REstore");
    //begin boilerplate code so parent classes can restore state
    if(!(state instanceof SavedState)) {
      super.onRestoreInstanceState(state);
      return;
    }
    SavedState ss = (SavedState)state;
    super.onRestoreInstanceState(ss.getSuperState());
    //end

    absoleteY = ss.stateToSave;
  }

  public static class SavedState extends BaseSavedState {
   int stateToSave;

    SavedState(Parcelable superState) {
      super(superState);
    }

    private SavedState(Parcel in) {
      super(in);
      this.stateToSave = in.readInt();
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
      super.writeToParcel(out, flags);
      out.writeInt(this.stateToSave);
    }
    //required field that makes Parcelables from a Parcel
    public static final Parcelable.Creator<SavedState> CREATOR =
        new Parcelable.Creator<SavedState>() {
          public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
          }
          public SavedState[] newArray(int size) {
            return new SavedState[size];
          }
    };
  } 
```

V2：

```
@Override
protected Parcelable onSaveInstanceState() {
    Log.i(TAG, "Saving state.");
    Bundle bundle = new Bundle();
    bundle.putParcelable("state", super.onSaveInstanceState());
    bundle.putInt("absoleteY", absoleteY);
    return bundle;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    Log.i(TAG, "Restoring state");

    if(state instanceof Bundle){

        Bundle bundle = (Bundle) state;
        absoleteY = bundle.getInt("absoleteY");
        super.onRestoreInstanceState(bundle.getParcelable("state"));
        return;
    }

    super.onRestoreInstanceState(state); 
} 
```

在日志中，我从未看到“正在恢复状态”。

看来，如果我没有在 android.support.v4.view.ViewPager 中使用我的自定义视图，则会调用 onRestoreInstanceState。有谁知道原因，我是否必须从活动中调用保存/恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-01T19:59:39.197

这个问题很老了，但我在谷歌搜索解决方案时偶然发现了它，然后在我想通了之后。

问题可能是自定义视图是在根 Activity 的 onCreate 方法中以编程方式创建的。

解决方案是从包含 ViewPager 的根 Activity 调用 onSaveInstanceState 和 onRestoreInstanceState 并以编程方式存储自定义视图的状态。

在您的根 Activity 中实现以下内容：

保存自定义视图的状态

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putParcelable("STATE_COLLECTION", collectionFrameLayout.onSaveInstanceState());
    super.onSaveInstanceState(outState);
} 
```

创建自定义视图后，在 onCreate() 内部将其恢复。

```
 if (savedInstanceState != null) {
     Parcelable state = savedInstanceState.getParcelable("STATE_COLLECTION");
     if (state != null) {
         collectionFrameLayout.onRestoreInstanceState(state);
     }
 } 
```

# c# - 减去两个日期时间

> ID：10656492
> 
> 赞同：1
> 
> 时间：2012-05-18T16:37:04.027
> 
> 标签：c#, datetime

我在 winform 中使用以下代码减去两个日期时间。这些是完整的日期时间，其中包括日期、月份和年份。我想知道如何仅用日和月减去两个日期时间。例如减去没有任何年份的 5/12 和 6/12。

```
 DateTime date1 = new DateTime(byear, bmonth, bday, 0, 0, 0);
    DateTime datenow =  DateTime.Now;
TimeSpan timeSpan = datenow - date1; 
```

请给我一些代码，以便我可以用它的日期和月份减去两个日期时间。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:54:05.017

尝试这个：

```
int year = DateTime.Now.Year;
DateTime dt1 = new DateTime(year, month1 , day1);
DateTime dt2 = new DateTime(year, month2,  day2);
int days = (int) Math.Round((dt1 - dt2).TotalDays); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:43:12.130

您可以使用一些默认年份，如 datetime.now 并像往常一样进行减法。尽管 2012 年是闰年，但这不适用于非闰年。

```
 DateTime dt1= new DateTime(DateTime.Now.Year, month1, day1);
 DateTime dt2= new DateTime(DateTime.Now.Year, month2, day2);
 TimeSpan t= dt1 - dt2; 
```

# c# - 如何在现有列表框中选择（突出显示）项目

> ID：10656493
> 
> 赞同：0
> 
> 时间：2012-05-18T16:37:10.613
> 
> 标签：c#, .net, sql-server, winforms

我有一个已经存在的`listbox`，需要显示我从数据库中检索到的值。

这里需要在插入之前检查值，如果它已经存在，寻找突出现有项目的方法。

这是我正在使用的代码

```
try { 
     myConnection.Open(); 
     SqlCommand myCommand2 = new SqlCommand("SELECT * FROM PatientDataFields where  PatientID='" + x + "'", myConnection); 
     SqlDataReader rdr = myCommand2.ExecuteReader(); 

     while (rdr.Read()) 
     { 
         Form2 form2 = new Form2(); 
         form2.Show();
         form2.Race.SelectedItem = rdr["Race"].ToString();
     } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:42:47.133

这样做，并确保从 db 返回的值必须存在于列表框控件项中

如果数据库值在 listBox (DataTextField) 的 Text 字段中

```
listbox.SelectedText = valueFromDB; 
```

或者如果数据库值在 listBox (DataValueField) 的值字段中

```
listbox.SelectedValue = valueFromDB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:39:21.753

如果要进行多项选择，请确保将 SelectionMode 设置为 MultiSimple。你的其余代码对我来说看起来不错。

```
try 
{ 
    myConnection.Open(); 
    SqlCommand myCommand2 = new SqlCommand("SELECT * FROM PatientDataFields where  PatientID='" + x + "'", myConnection); 
    SqlDataReader rdr = myCommand2.ExecuteReader(); 

    Form2 form2 = new Form2(); 
    form2.Show();
    form2.Race.SelectionMode = SelectionMode.MultiSimple;
    while (rdr.Read()) 
    {
        string item = rdr["Race"].ToString();

        if (form2.Race.FindString(item) != -1)
            form2.Race.SelectedItem = item;
        else
            form2.Race.Items.Add(item);
    } 
} 
```

# css - 使用 css 将图像添加到容器背景

> ID：10656496
> 
> 赞同：3
> 
> 时间：2012-05-18T16:37:20.843
> 
> 标签：css, background, containers

首先我有我的容器。

```
 .container {
    width: 780px;
    background: #FFF;
    margin: 0 auto;
} 
```

然后我添加它的目的是让图像显示在整个容器中并跨越 780 像素。图像将在底部褪色为纯黑色，然后与背景颜色混合。

```
.container {
        width: 780px;
        background: #FFF url(picture.png) no-repeat center top;
        margin: 0 auto;
} 
```

当我这样做时没有任何反应，当我通过“body”做类似于我的网站背景的事情时它确实有效。

谢谢您的帮助。

编辑：我想得越多，我是否必须通过 HTML 来做到这一点，有没有办法让插入到 html 中的图像落后于其他所有内容并且无法与之交互？

编辑2：在前2个答案的帮助下，我在这个：

```
.container {
    width: 780px;
    background: url(Portfolio Assets/PortfolioUnderNavbg.png) no-repeat center top #000;
    margin: 0 auto;
    height: 100%; 
} 
```

但它仍然不起作用，我忘了提到页面确实有一个标题，所以我想我必须以某种方式让背景图像向下移动到标题下方但仍然在容器中。我读到背景只接受高度的百分比调整，但那是较旧的文档。有没有办法让它从容器顶部向下 100px 开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:40:56.007

改成`background:url('your-image.png') no-repeat center top #FFF`

发生的事情是#FFF 颜色代码覆盖了图像 url。

[一些文档。](http://www.w3.org/TR/CSS21/colors.html#background-properties)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:44:47.707

```
 .container 
    {
        width: 780px;
        background: #FFF url(picture.jpg) no-repeat center top;
        margin: 0 auto;
        height:100%;
   } 
```

我想....你给身高：100％；像上面的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:06:47.840

.container { 宽度：780px; 背景：#FFF url('picture.jpg') 不重复中心顶部；边距：0 自动；高度：'你的图片尺寸'; }

我想它正在工作......

# objective-c - 是否可以触发从 html 页面到 iphone 应用程序的功能？

> ID：10656498
> 
> 赞同：0
> 
> 时间：2012-05-18T16:37:38.403
> 
> 标签：objective-c, ios, cocoa-touch, ios4

我现在正在创建一个 iphone 应用程序`UIWebView`，其中一个页面中有一个。加载的页面有一个链接，我想知道点击链接时是否有触发应用程序内部的功能。从技术上讲，如果单击链接，我只想创建一个后退按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:44:06.990

您可以`UIWebViewDelegate`在视图控制器中实现，并在 webview 即将加载另一个网页时收到通知。

例子：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
   // Check here if the link was clicked by checking the request object

   return YES;
} 
```

不要忘记`[webView setDelegate:self`在您的方法中调用 ] `viewDidLoad`（或直接在 IB 中连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:40:04.370

看看这里

[https://stackoverflow.com/a/3742635/474535](https://stackoverflow.com/a/3742635/474535)

另一篇关于 UIWebview 与目标 C 通信的文章

[http://imagineric.ericd.net/2011/10/18/uiwebview-communication-to-objective-c/](http://imagineric.ericd.net/2011/10/18/uiwebview-communication-to-objective-c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:35:08.683

如果是您自己的网页，您可以使用[URL 方案](https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18)

# mapping - 学说 2 中的查询或只读属性

> ID：10656503
> 
> 赞同：1
> 
> 时间：2012-05-18T16:38:05.633
> 
> 标签：mapping, doctrine-orm, dql

我希望在主要用于保存计数的实体上创建一个属性。例子：

```
Brand
- id
- name
- numberOfProducts 
```

numberOfProducts 属性只不过是产品的计数。但是，这个计数会根据我对产品的看法而变化。例如，也许我只想要该品牌的**活跃**产品数量与该品牌的所有产品数量。

nHibernate 有类似的东西，请参阅：[Query Unmapped Columns in NHibernate](https://stackoverflow.com/questions/657170/query-unmapped-columns-in-nhibernate)

这可能吗？或者有没有更好的方法来解决我的问题？我当然可以为每种情况添加 2 个计数属性，然后添加一个非规范化字段，但这对于或多或少一次性使用的情况来说是很多工作。

我也可以简单地创建以在一个 DQL 语句中获取所有品牌以及计数查询，但这意味着我必须手动将计数字段映射到属性中。我希望教义可以为我做那种映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:28:10.023

我认为这里最好的解决方案是创建自定义水合器，它能够将额外的（非托管字段）设置到实体属性中：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#custom-hydration-modes](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#custom-hydration-modes)

# node.js - 如何在 Mongoose 中将文档设置为 DBref 并且仍然可以访问该文档

> ID：10656504
> 
> 赞同：0
> 
> 时间：2012-05-18T16:38:07.350
> 
> 标签：node.js, mongoose

如何使用引用的文档本身设置 DBref，并且仍然可以访问该文档，就好像它已填充在父对象上一样？

如果我有一个将字段设置为 dbref 字段的简单模式：

```
var PostSchema = new Schema({
  'title': String,
  '_author', { type: Schema.ObjectId, ref: 'users'}
});
var Post = mongoose.model('posts', PostSchema);

var UserSchema = new Schema({
  'name': String
});
Var User = mongoose.model('users', UserSchema); 
```

如果我尝试这样做：

```
var john = User.findOne({'name': 'john'});
var post = new Post({'title': 'My Post'});
post._author = john;

post.save(function(err) {
  if (!err) {
    console.log(post._author);
  }
}); 
```

post._author属性的值为 author._id **。**我希望 _author 属性具有整个作者文档的值（类似于我对帖子集合执行查找查询并填充作者对象）。

我唯一的解决方案是在保存回调中执行这样的 findOne 查询，并确保我将作者重新填充...这感觉有点不对劲，因为当我已经拥有所有信息时，我基本上不得不重新查询。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:49:23.993

这是Mongoose的[填充功能的目的。](http://mongoosejs.com/docs/populate.html)在您的示例中，您`post._author = john._id`在创建帖子时进行了设置，然后在查询帖子集合时，您将使用这样的代码来填充`_author`完整的 User 对象：

```
post.findOne({'title': 'My Post'}).populate('_author').exec(function (err, post) {
    // post._author contains a User model instance
}); 
```

# javascript - 将数据推送到数组然后迭代？

> ID：10656505
> 
> 赞同：0
> 
> 时间：2012-05-18T16:38:08.833
> 
> 标签：javascript, jquery, arrays, object

我试图在 for 语句中获取一堆数据，将其推送到对象数组然后提取它？IE

```
var d = {
    city: [{
       region: '',
       name: '',
       type: ''
    }]
} 
```

我正在从中获取数据`cityList[i]`- 每个大约有 10 个 - 比如

```
for(var i=0, city; i < cityList.len; i++ {
      city = cityList[i]

     //manipulate a bit 

    d.city.push(data, data1, data2) //i.e. region, name, type

} 
```

然后我想显示来自的数据`d.city`？我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:40:08.570

将数据设置为数组保持外观：

```
d.city.push({
   region: data,
   name: data2,
   type: data3
}); 
```

要从`d.city`您那里检索数据，可以使用：

```
$.each(d.city, function() {
  console.log(this.region);
  console.log(this.name); // etc
}); 
```

# php - 使用 JavaScript 确认对话框在后台进行 PHP 调用

> ID：10656506
> 
> 赞同：5
> 
> 时间：2012-05-18T16:38:13.293
> 
> 标签：php, javascript, function

好的，不确定这是否可能，但我想我还是会问:)

我有一个 HTML 页面，其中包含一些信息和一个链接。该链接调用 JavaScript 确认对话框。如果用户选择 OK，那么我想在 PHP 文件中调用一个函数，但在后台，即我不想更改页面、重新加载或任何事情。

这可能吗？

谢谢

吨

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T16:41:21.187

使用 AJAX。以下使用 jQuery：

```
if(confirm('Are you sure?')) {
    $.ajax({
        url: '/path/to/file.php',
        data: 'url=encoded&query=string', // Can also be an object
        success: function(output) {
            // This function is called after the PHP file completes.
            // The variable passed in is a string containing all output of
            // your PHP script (i.e. echo / print )
        }
    });
} 
```

有关更多信息，请查看 jQuery 的[AJAX](http://api.jquery.com/jQuery.ajax/)文档。如果你不能使用 jQuery，有很多关于使用原生 JavaScript 进行 AJAX 请求 的[教程。](http://www.google.com/search?q=native%20ajax&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&client=firefox-a&hs=gl6&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&q=native%20ajax%20tutorial&oq=native%20ajax%20tutorial&aq=f&aqi=q-w1&aql=1&gs_l=serp.3..33i21.16874.17643.0.17761.9.7.0.0.0.0.151.621.3j3.6.0.eish.1.0.0.u2DIxOXf6cE&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=1dc8ed790bd95263&biw=1680&bih=919)

如果您要从 PHP 将大量数据返回给您的成功函数，则值得将 PHP 中的数据作为[JSON 编码数组](http://php.net/manual/en/function.json-encode.php)返回，这样可以在客户端安全地将其[解析为 JavaScript 对象。](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:45:42.963

```
$('.LinkClass').click(function(){

  if( confirm('Is it OK?') ) {

    $.ajax({
        url: 'action.php',
        type: 'POST',
        data: 'data=value', // Can also be an object
        success: function(data) {
            // Do Nothing
        },
        error: function(){
           alert('Error');
        }
    });

  }

}); 
```

# qt - 当插槽确实存在时，Qt连接“没有这样的插槽”

> ID：10656510
> 
> 赞同：10
> 
> 时间：2012-05-18T16:38:24.980
> 
> 标签：qt, signals-slots

Qt v4.8.0，VC2010编译器

我有一个`QMainWindow`基础类，我正在尝试向它发送信号，涉及`QUuid`

但是，每次我运行它时，我都会收到错误：

```
Object::connect: No such slot MainWindow::on_comp_connected(QUuid) in ..\..\src\mainwindow.cpp:143
Object::connect:  (receiver name: 'MainWindow') 
```

它让我如厕，因为插槽确实存在（它在 moc_ 中）

```
class MainWindow : public QMainWindow
{
Q_OBJECT

// SNIP private typedefs

public:
    MainWindow(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~MainWindow();
// SNIP public methods

signals:
   void testSendQuuid(const QUuid &qcid);

public slots:
   void on_comp_connected(const QUuid &qcid);

private:
// SNIP private parts

QOpenAcnController *acnInt;  // This is where the signal comes from

}; 
```

在`MainWindow`构造函数的末尾（提到的第 143 行）我有：

```
connect(acnInt, SIGNAL(callback_comp_connected(QUuid)),
        this, SLOT(on_comp_connected(QUuid))); 
```

鉴于插槽*肯定*存在于 moc_mainwindow.cpp 中（我检查过，它是插槽 #1），到底是什么阻止了连接的发生？

如果我尝试将`testSendQuuid(QUuid)`信号连接到插槽，我不会得到这样的信号，也不会得到这样的插槽。

我一生都无法弄清楚为什么 Qt 否认存在一个*绝对*存在的插槽！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-12T07:38:15.470

我通过在主窗口类中添加 Q_OBJECT 宏来解决问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T17:17:21.423

检查是否`moc_mainwindow.cpp`在您的`Build Path`. 或者您正在使用其他一些 moc_window.cpp 文件。因为，例如：在 QtCreator 中，它将源构建到新的构建目录。如果您尝试在其他位置打开源代码，它也会使用旧的 moc_cpp 文件。

我想说的是您检查的 moc 文件可能包含那些插槽定义，但编译器可能正在使用之前创建的其他一些 moc 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-27T08:38:46.370

我解决了这样的问题

```
private slots:
    void on_comp_connected(const QUuid &qcid); 
```

然后在构造函数中

```
connect(tabWidget, SIGNAL(currentChanged(int)), this, SLOT(on_comp_connected(QUuid))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:22:05.057

你需要

```
connect(acnInt, SIGNAL(callback_comp_connected(QUuid)),         this, SLOT(on_comp_connected(const QUuid&))); 
```

按值传递不应匹配传递 const 引用。

但我试过了，它确实如此。我在 Windows 上使用 Qt 4.7.4 创建了一个带有 QtCreator 2.4.1 的最小项目。我在主窗口中添加了一个标签并修改了 MainWindow.cpp 如下

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    connect(
      this, SIGNAL(testSendQuuid(QUuid)),
      this, SLOT(on_comp_connected(QUuid))
    );
    QUuid x = QUuid::createUuid();
    emit testSendQuuid(x);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_comp_connected(const QUuid &qcid)
{
    ui->label->setText(qcid.toString());
} 
```

我的主窗口上有一个 uuid。

我还尝试将连接中的两个 QUuid 参数更改为 const QUuid& 并且也可以。

所以你的问题必须与构建相关。

# android - 以编程方式将文件从缓存目录移动到 SDCard

> ID：10656512
> 
> 赞同：5
> 
> 时间：2012-05-18T16:38:28.247
> 
> 标签：android, caching, storage, move

我正在尝试以编程方式将文件从 Android 的内部存储器移动到 SD 卡中的现有目录。
我尝试了两种方法。在第一个中，我使用了 File.renameTo：

```
String destName = externalDirPath + File.separatorChar + destFileName;
File originFile = new File(cacheDirPath + File.separatorChar + originalfileName);

originFile.renameTo(new File(destName)); 
```

在另一个我使用了 Runtime.getRuntime()：

```
Process p = Runtime.getRuntime().exec("/system/bin/sh -");
DataOutputStream os = new DataOutputStream(p.getOutputStream());

String command = "cp " + cacheDirPath + "/" + originalfileName+ " " + externalDirPath + "/" + destFileName+ "\n";

os.writeBytes(command); 
```

对他们两个都不起作用..有

什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T13:44:51.520

根据 Android API 参考[`renameTo`](http://developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29)，

> 两条路径都在同一个挂载点上。在 Android 上，应用程序在尝试在内部存储和 SD 卡之间进行复制时最有可能遇到此限制。

您可能必须将其读`File`入 a`byte[]`然后将其写入新的`File`. [这个答案](https://stackoverflow.com/a/9293885/801065)涵盖了它。

# android - 在 Android 中更新 SQLite 数据库

> ID：10656513
> 
> 赞同：0
> 
> 时间：2012-05-18T16:38:29.957
> 
> 标签：android, database, sqlite

我的 DatabaseHandler 类中有一个方法可以让您更新饮料（名称、类别、成分等），但我似乎无法让它工作。这是代码：

```
 // Updating single drink
  public int updateDrink(Drink drink) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, drink.getName());
    values.put(KEY_CAT, drink.getCategory());
    values.put(KEY_IN1, drink.getIngredient1());
    values.put(KEY_IN2, drink.getIngredient2());
    values.put(KEY_IN3, drink.getIngredient3());
    values.put(KEY_IN4, drink.getIngredient4());
    values.put(KEY_IN5, drink.getIngredient5());
    values.put(KEY_IN6, drink.getIngredient6());
    values.put(KEY_TI1, drink.getTime1());
    values.put(KEY_TI2, drink.getTime2());
    values.put(KEY_TI3, drink.getTime3());
    values.put(KEY_TI4, drink.getTime4());
    values.put(KEY_TI5, drink.getTime5());
    values.put(KEY_TI6, drink.getTime6());

    // updating row
    return db.update(TABLE_DRINKS, values, KEY_ID + " = ?",
            new String[] { String.valueOf(drink.getID()) });
} 
```

然后我在这里的活动中调用它：

```
db = new DatabaseHandler(order.this);

db.updateDrink(new Drink(drinkname.getText().toString(), 
    category.getText().toString(), 
    ing1.getText().toString(), 
    ing2.getText().toString(),
    ing3.getText().toString(), 
    ing4.getText().toString(), 
    ing5.getText().toString(), 
    ing6.getText().toString(), 
    Integer.parseInt(t1.getText().toString()), 
    Integer.parseInt(t2.getText().toString()), 
    Integer.parseInt(t3.getText().toString()),
    Integer.parseInt(t4.getText().toString()), 
    Integer.parseInt(t5.getText().toString()), 
    Integer.parseInt(t6.getText().toString()))); 
```

# ruby-on-rails - 登录后渲染视图，其中包含登录前的估算信息

> ID：10656514
> 
> 赞同：0
> 
> 时间：2012-05-18T16:38:30.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的网站上有一个博客，只有经过身份验证的用户才能发帖。如果尚未通过身份验证的现有用户在点击“创建”时正在输入评论，他将被重定向到登录视图进行身份验证，然后重定向到文章视图。我想通过呈现用户创建评论的视图来改进我的博客的功能，这样他就不必再次输入他的评论。

我对编程和红宝石相当陌生，所以我不确定如何解决这个问题。欢迎任何建议。先感谢您。

我的网站可以在[https://github.com/MariusLucianPop/mariuslp-找到](https://github.com/MariusLucianPop/mariuslp-)

下面是我认为代码的重要部分。如果您希望我更新任何内容，请告诉我。

**评论控制器.rb**

```
before_filter :confirm_logged_in, :only => [:create]

def create
  article_id = params[:comment].delete(:article_id)
  @comment = Comment.new(params[:comment])
  @comment.article_id = article_id
  @comment.posted_by = session[:username]
  @article = Article.find(article_id)
  if @comment.save
    redirect_to article_path(@article)
  else
    render "articles/show"    
  end
end

protected 

def confirm_logged_in
  unless session[:user_id]
    flash[:notice]="Please login before posting a comment."
    redirect_to login_path
    return false
  else
    return true
  end
end 
```

**访客控制器.rb**

```
def login
  #atempting to log in
  authenticated_user = Visitor.authenticate(params[:username],params[:password])
    if authenticated_user 
      session[:user_id]=authenticated_user.id
      session[:username]=authenticated_user.username
          flash[:notice] = "You are now logged in."
          redirect_to articles_path
      end
    else
      if !params[:username].blank? # only rendering the notice if the user tried to login at least once
        flash[:notice] = "Invalid username/password combination. Please try again"
      end
      render "login"
    end
end 
```

**路线.rb**

```
 root :to => "static_pages#index"

  get "static_pages/work_in_progress"

  get "categories/new"
  match "work" => "static_pages#work_in_progress"

  match "login" => "visitors#login" # not rest
  match "logout" =>"visitors#logout" # not rest

  resources :articles do 
    resources :comments
  end

 resources :tags, :taggings, :visitors, :categories

 match 'contact' => 'contact#new', :as => 'contact', :via => :get
 match 'contact' => 'contact#create', :as => 'contact', :via => :post 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:02:08.493

快速方法\KIS

应用程序/视图/文章/_comment_form.html.erb

```
<% if confirm_logged_in  %> # helper method to detect if current is logged in

  <%= form_for [@article,@article.comments.new] do |f|%>
    <%= f.hidden_field :article_id%>

    <%= f.label :body %><br />
    <%= f.text_area :body, :cols => 50, :rows => 6 %><br />

    <%= f.submit%>
  <%end%>

<% else %>

  <%= link_to "Login to add a comment", login_path %>

<% end %> 
```

# android - 在 Android 上通话期间单击键

> ID：10656523
> 
> 赞同：1
> 
> 时间：2012-05-18T16:38:57.913
> 
> 标签：android, events, call

嘿，我想在通话过程中按 1 或 2。例如，当您致电呼叫中心并希望按 1 键去销售部门而不用手单击此号码时，但我想在通话期间单击它有问题。

现在我可以调用按键并处理呼叫事件，但它不起作用。

```
PhoneStateListener myCallListener = new PhoneStateListener(){
            @Override
            public void onCallStateChanged(int state, String incomingNumber) {
            // the variable incomingNumber holds the number calling.
            // the state variable holds the state of the phone (Ringing, Idle ...)
              switch (state) {
              case TelephonyManager.CALL_STATE_RINGING:
                  Log.e("Incoming_call", incomingNumber+" is calling me ...");
                  break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    KeyEvent eventDown = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_1);
                    dispatchKeyEvent(eventDown);
                  // your logic here, right now the incoming caller is logged.
                  Log.e("Out Call", incomingNumber+" is calling me ...");
                break;
                default:
                break;
            }
            super.onCallStateChanged(state, incomingNumber);
           }
        };
        TelephonyManager phoneManager = (TelephonyManager) 
        this.getSystemService(TELEPHONY_SERVICE);
        phoneManager.listen(myCallListener,
        PhoneStateListener.LISTEN_CALL_STATE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:56:08.340

可以以编程方式拨打电话，并根据需要添加 DTMF 音和暂停：

```
Intent i = new Intent("android.intent.action.CALL",Uri.parse("tel://" + number + ',' + dtmf)); 
```

无法在通话过程中决定将 DTMF 音调插入音频上行链路，尽管这是一项[要求的功能](http://code.google.com/p/android/issues/detail?id=1428)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:48:27.440

您的代码将为**您的**活动生成按键事件，而不是为电话应用程序生成按键事件。

据我所知，不可能实现你想要的，但我可能是错的。但是，如果可能的话，这是一个潜在的问题，因为任何应用程序都可以在通话期间发送任何按键，并在用户不知情的情况下触发不良事件。

# mysql - SQL where ANY 列等于一个值

> ID：10656529
> 
> 赞同：5
> 
> 时间：2012-05-18T16:39:45.337
> 
> 标签：mysql, sql

在 MySQL 中是否可以选择 ANY 列包含指定值的所有行？

我正在尝试编写一个通用搜索函数，它可以在没有任何关于表模式的信息的情况下工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:41:17.307

用于[`SHOW COLUMNS`](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)获取表中列的列表，然后根据结果动态构建查询。

# php - 无法通过 PHPMailer 发送邮件

> ID：10656532
> 
> 赞同：2
> 
> 时间：2012-05-18T16:39:53.827
> 
> 标签：php, sendmail, phpmailer

这是我的php代码

```
require("class.phpmailer.php");

$mail = new PHPMailer();

$mail->IsSMTP();  // telling the class to use SMTP
$mail->Host     = "smtp.gmail.com"; // SMTP server

$mail->From     = "example@gmail.com";
$mail->AddAddress("example@yahoo.com");

$mail->Subject  = "First PHPMailer Message";
$mail->Body     = "Hi! \n\n This is my first e-mail sent through PHPMailer.";
$mail->WordWrap = 50;

if(!$mail->Send()) {
echo 'Message was not sent.';
echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
echo 'Message has been sent.';
} 
```

我的php.ini有这个邮件配置【邮件功能】

```
SMTP = smtp.gmail.com
smtp_port = 465
sendmail_from =example@gmail.com 
```

我的错误是

> 以下发件人地址失败：example@gmail.com 邮件未发送。邮件程序错误：以下发件人地址失败：example@gmail.com SMTP 服务器错误：5.7.0 必须首先发出 STARTTLS 命令。i1sm13250552pbv.49

请帮助我。在此先感谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T14:04:49.773

首先确保你有最新版本的 phpmailer()

从[https://github.com/PHPMailer/PHPMailer下载](https://github.com/PHPMailer/PHPMailer)

通过 php 编辑器打开 class.phpmailer.php

将所有“HELO”单词替换为“EHLO”

EHLO（不是 HELO）必须由客户在 AUTH 之前给出。（对于谷歌邮件）

它会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:53:52.367

尝试一次 phpgmailer [http://www.thedanglybits.com/2006/10/13/update-send-email-with-php-and-gmail-hosted-for-your-domain/](http://www.thedanglybits.com/2006/10/13/update-send-email-with-php-and-gmail-hosted-for-your-domain/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:42:51.887

smtp.gmail.com 要求您使用 SSL 和端口 587 或 465。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T02:57:27.943

将您的主机更改为

```
ssl://smtp.gmail.com:465 
```

# facebook - Facebook：如何设置身份验证对话框按钮以显示“好的，观看视频”而不是“转到应用程序”

> ID：10656540
> 
> 赞同：2
> 
> 时间：2012-05-18T16:40:10.537
> 
> 标签：facebook, authentication, button, dialog

Facebook：如何设置身份验证对话框按钮以显示“好的，观看视频”而不是“转到应用程序”？

其他类似的应用程序，如 socialcam、dailymotion、metacafe、viddy ... 显示一个带有“好的，观看视频”字样的身份验证对话框。

![在此处输入图像描述](../Images/cfe3b5f3022294e5f01b0a350644237a.png)

# spring - Apache Camel 与 Spring Batch 的集成

> ID：10656541
> 
> 赞同：2
> 
> 时间：2012-05-18T16:40:22.200
> 
> 标签：spring, apache-camel, spring-batch

Apache Camel 是否支持 Spring Batch？我是使用骆驼路线的批次。现在我们想迁移到 Spring Batch，但不确定我的骆驼路线是否可以与 Spring Batch 集成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T19:57:59.080

**更新答案：** 从 Camel 2.10 开始支持 Spring 批处理，

[http://camel.apache.org/springbatch.html](http://camel.apache.org/springbatch.html)

本质上，Camel 中的 Spring Batch 组件将能够从路由中触发 Spring 批处理作业。

示例： `from("direct:startBatch").to("spring-batch:myJob");`其中“myJob”是在别处定义的春季批处理作业。

交换中的所有 Camel 标头都作为参数发送到 spring 批处理作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T14:05:30.957

考虑一种情况，必须从文件夹中挑选并处理已删除的文件。apache camel 和 spring batch 的结合可以用最少的代码解决这种集成。使用简单的骆驼 DSL 代码。

Apache Camel 解决集成问题，Spring Batch 以批处理模式处理。

对于集成，需要 apache 骆驼路线，对于批处理，需要 spring 批处理作业。

更多细节，

将构建 Apache Camel Route 以选择任何已删除的 csv 文件并触发春季批处理。

**注意：**我没有提供 Spring Batch Job 将做什么的详细信息。假设它的一个 JOB 只是为了处理文件。

```
@Value("${dir.location}")
private String dropLocation;

@Override
public void configure() throws Exception {

    from(
            "file:"
                    + dropLocation
                    + "?delay=550&include=.*.csv&moveFailed=error")
            .to("spring-batch:anyFileProcessingJob?jobLauncherRef=fileProcessingJobLauncher");
} 
```

Apache Camel 配置了上面的路由，以选择放置在文件夹“dropLocation”中的任何文件。Camel 将密切关注文件夹，如果任何文件丢失，将触发 Spring Batch JOB。

在这里，任何文件都放在配置的文件夹“dropLocation”中，camel 将触发作业 anyFileProcessingJob，作业启动参考将是 fileProcessingJobLauncher。

“fileProcessingJobLauncher”将运行批处理作业，如果需要，可以将必要的参数从“fileProcessingJobLauncher”传递给作业。

# android - 如何在android中以编程方式捕获手机屏幕

> ID：10656543
> 
> 赞同：1
> 
> 时间：2012-05-18T16:40:37.867
> 
> 标签：android, screen-capture

我想知道如何以编程方式捕获手机屏幕。我只是用谷歌搜索并知道我必须使用 view.getDrawingCache()。但是 getDrawingCache() 总是返回 null。

我的 xml 布局是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/screenlayout">
<ImageView  
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:id="@+id/screen"
/>
</LinearLayout> 
```

.java 文件::

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    View vScreen = findViewById(R.id.screenlayout);
    ImageView imageview = (ImageView)findViewById(R.id.screen);

    Bitmap bitmap;
    View v1 = vScreen.getRootView();
    v1.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(v1.getDrawingCache());   //getting null here     
    v1.setDrawingCacheEnabled(false)      
    imageview.setImageBitmap(bitmap);

} 
```

有人可以纠正我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:05:43.423

使用以下代码来避免**空位**图：

* * *

```
public class AndroidWebImage extends Activity {

ImageView bmImage; 
LinearLayout view;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      view = (LinearLayout)findViewById(R.id.screen);
      bmImage = (ImageView)findViewById(R.id.image);

      view.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          

      view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

      view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 

      view.buildDrawingCache(true);
      Bitmap b = Bitmap.createBitmap(view.getDrawingCache());
      view.setDrawingCacheEnabled(false); // clear drawing cache

      bmImage.setImageBitmap(b);   

};

} 
```

* * *

好好看看，你要使用：

```
 view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

 view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 
```

* * *

我使用了以下**main.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
   android:id="@+id/screen"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="@string/hello"
  />
<ImageView
  android:id="@+id/image"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
/>
</LinearLayout> 
```

* * *

## 结果是：

![在此处输入图像描述](../Images/9b5932eb5190f2f1d361a4ca93b57a54.png) [参考](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:59:06.950

所有允许屏幕截图的程序都只能在有根手机上运行？如果您的手机是植根手机，您可以尝试使用：

```
public class ScreenCapture extends Activity{

        LinearLayout view;

        @Override

        protected void onCreate(Bundle savedInstanceState) {

                // TODO Auto-generated method stub

                super.onCreate(savedInstanceState);

                setContentView(R.layout.main);

                view = (LinearLayout)findViewById(R.id.screen);

                Button myBtn = (Button)findViewById(R.id.myBtn);

                myBtn.setOnClickListener(new View.OnClickListener(){

                        @Override

                        public void onClick(View v) {

                                // TODO Auto-generated method stub

                                View v1 = view.getRootView();

                                System.out.println("Root View : "+v1);

                                v1.setDrawingCacheEnabled(true);

                                Bitmap bm = v1.getDrawingCache();

                                System.out.println("Bitmap : "+bm);

                                showScreen(bm);

                        }

                });

        }

} 
```

您还可以看到这个库：[Android 屏幕截图库](http://code.google.com/p/android-screenshot-library/)(ASL) 能够以编程方式从 Android 设备捕获屏幕截图，而无需具有 root 访问权限

# excel - Excel格式的数字

> ID：10656546
> 
> 赞同：0
> 
> 时间：2012-05-18T16:40:40.163
> 
> 标签：excel, jasper-reports, ireport

*我在iReport*的文本字段（该字段是一个字符串）中有大量数字。它最多有 20 个数字。当这个字段被导出到 excel 时，它变成了 4.5656 E+。*有什么办法可以通过调整iReport* textField 使其按原样导出，从而使这个数字在 Excel 中按原样显示（4575758585995050857） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:13:38.323

我创建了一个包含两个 20 位列的文本文件。一个我作为文本导入，一个我作为常规导入。下面的图片显示了我是如何做到的以及效果。

![在此处输入图像描述](../Images/698d4bec2b49fcc6921e2f1c37983597.png)

![在此处输入图像描述](../Images/9b43c6e532f5c577d171bd1db8d0cc1a.png)

不知道为什么 Tab 仍然打勾。我当时没有注意到。

![在此处输入图像描述](../Images/931ca3640c193bc8a63ef9c76e81304e.png)

请注意，我已将第 2 列的类型更改为文本。第 3 栏我作为将军离开了。

![在此处输入图像描述](../Images/e0c3da516e0aa3cf8c423baac0b946f3.png)

![在此处输入图像描述](../Images/19b79d78c9f87023725d15cc38f5a403.png)

第 2 列是文本；第 3 列是一个数字。

# c# - 将 Facebook 提要转换为一些数据源

> ID：10656553
> 
> 赞同：0
> 
> 时间：2012-05-18T16:41:28.557
> 
> 标签：c#, wpf, facebook, facebook-graph-api

我通过 Graph API 获取 Facebook 提要，并且需要一些工具/东西来表示每个项目，例如 Wall Post。

我的问题是否有任何免费/开源 dll 可以用来将结果转换为某些数据源以在 WPF 下使用？

谢谢！

```
string AccessToken = string.Concat(appID, "|", secretKey);
FacebookClient fb = new FacebookClient(AccessToken);
dynamic feed = (IDictionary<string, object>)fb.Get(profileID + "/feed"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:20:08.393

对于结果，您可以使用[json.net](http://json.codeplex.com/)，对于使用 Facebook 图形 API，我会推荐[Facebook SDK](http://csharpsdk.org/)

# c# - 具有任务范围的ninject（或其他IoC）？

> ID：10656557
> 
> 赞同：6
> 
> 时间：2012-05-18T16:41:41.310
> 
> 标签：c#, design-patterns, inversion-of-control, ninject, task-parallel-library

我不确定 TPL 表面是否足以使其可行，因此，请随意指出可行的替代模式。:)

我试图弄清楚我是否可以将 Ninject 用于 ctor-injected 依赖项，理想情况下，这些依赖项应该限定为特定的根/父 Task 实例。

它有点类似于 asp.net 请求范围，但在这种情况下，它是一个控制台应用程序，它创建了 N 个将并行运行的不同任务。我想知道是否有能力让 Ninject 基于每个根 Task 实例进行运行时依赖注入，以便作为每个任务的一部分创建的对象图共享给定接口的相同实例，但不同的任务都有单独的实例。

谢谢！

**[编辑]**继续搜索，看起来 InNamedScope*可能*是基于“定义对象是其依赖项的范围”的描述的正确答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T15:29:21.063

如果我正确理解您的问题，`InNamedScope`是一个不错的选择。另一种选择是`InCallScope`. 这篇[博客文章](http://www.planetgeek.ch/2010/12/08/how-to-use-the-additional-ninject-scopes-of-namedscope/)很好地讨论了这些差异：

> 命名范围允许您在绑定上定义由绑定创建的对象是其他对象的范围，这些对象是注入创建的对象的对象树的一部分。
> 
> 让我们通过一个例子来看看它是如何工作的。想象一下，您正在创建一个具有多个工作表的类似 Excel 的应用程序......
> 
> ```
> const string ScopeName = "ExcelSheet";
> Bind<ExcelSheet>().ToSelf().DefinesNamedScope(ScopeName);
> Bind<SheetPresenter>().ToSelf();
> Bind<SheetCalculator>().ToSelf();
> Bind<SheetDataRepository>().ToSelf().InNamedScope(ScopeName); 
> ```

在这里，`SheetDataRepository`使用`ExcelSheet`范围内的。文章更详细地解释了。

# android - 操作栏不可见

> ID：10656559
> 
> 赞同：3
> 
> 时间：2012-05-18T16:41:45.920
> 
> 标签：android, android-actionbar

我创建了一个包含操作项和片段选项卡的操作栏。但是，操作栏和片段选项卡在其他活动中不可见。清单文件还具有所需的：

```
 <uses-sdk android:minSdkVersion="4"
          android:targetSdkVersion="11" /> 
```

如何使应用程序的操作栏和片段选项卡永久化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:06:04.157

```
// Set up the action bar.
final ActionBar actionBar = getActionBar(); 
```

我在我的项目中找到了这段代码。我希望它可以帮助你。

# objective-c - Xcode - 当数字为十进制时，标签不会自动收缩

> ID：10656561
> 
> 赞同：0
> 
> 时间：2012-05-18T16:41:51.503
> 
> 标签：objective-c, ios, cocoa-touch

我正在制作一个计算一些数字的应用程序，有些答案没有小数点，有些有。`NSNumberFormatter`所以我做了一个 if-else，根据它们是否有小数来格式化数字。

如果没有，一切正常，数字格式正确，标签自动收缩正确。但是，当数字有小数时，它不会自动收缩。如果所有数字都不会进入标签，它将删除最后一个小数，直到没有小数。然后它会正常工作

例如，如果我有“123,456,789.123456789”，标签将不足以显示所有内容，而是显示“123,456,789.1234”。如果我更改参数，那么答案将是 10 倍，答案将是“1,234,567,891.234”。现在直到我到达“1,234,567,891,234”，它不会自动收缩让我看到数字。但是，当数字没有小数时，它会自动收缩，我会看到所有的数字。

这是有效的代码（当没有小数时）：

```
NSNumber *input = [NSNumber numberWithDouble: numberDouble];  
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];  
[formatter setGroupingSize:3];  
[formatter setGroupingSeparator:@","];  
[formatter setUsesGroupingSeparator:YES];  
stringWithDecimals = [formatter stringFromNumber:input];  
NSMutableString* someString = [NSMutableString stringWithString: stringWithDecimals];  
[someString appendString: @" unit"];  
stringWithDecimals = someString;  
label.text = stringWithDecimals; 
```

这是不起作用的代码：

```
NSNumber *input = [NSNumber numberWithDouble: numberDouble];  
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];  
[formatter setGroupingSize:3];  
[formatter setGroupingSeparator:@","];  
[formatter setUsesGroupingSeparator:YES];  
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];  
[formatter setRoundingMode: NSNumberFormatterRoundHalfUp];  
stringWithDecimals = [formatter stringFromNumber:input];  
NSMutableString* someString = [NSMutableString stringWithString: stringWithDecimals];  
[someString appendString: @" unit"];  
stringWithDecimals = someString;  
label.text = stringWithDecimals; 
```

变量“numberDouble”是一个双精度数。

所以我想做的是让它适用于第二种情况。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:40:46.493

假设这是一个`UILabel`我认为它不支持在文本更改时自动更改其边界（您可以通过设置背景颜色来测试它并查看实际大小）。

但是您可以在更新文本后手动发送`sizeToFit`到标签以使其更改其边界以适合所有文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:24:34.633

我不认为您的意思是自动收缩，但是您始终可以将数字转换为字符串（无论如何，您必须这样做才能将其放入标签中），然后使用 NSString 的实例方法 sizeWithFont: 来获取所需的大小您的标签以完整显示数字。

代码将是这样的：

```
NSString *yourString = [NSString stringWithFormat:@"%f", yourNumber];
CGSize labelSize = [yourString sizeWithFont:yourFont]; 
```

# sql-server - 如何将数据从一个表复制到另一个表，id 的变化和 id<>parentid 关系保持正确？

> ID：10656562
> 
> 赞同：1
> 
> 时间：2012-05-18T16:41:54.183
> 
> 标签：sql-server, triggers

我有两张桌子：

新表

> 编号 | 父母身份 | f1 | f2 | 客户ID

initial_table（没有 customerid）

> 编号 | 父母身份 | f1 | f2

**我需要做的是将所有项目从 initial_table 移动到 new_table。但是，新表中的 id 更改（自动生成）！**

--

所以，我的想法（现在）是：

1 - 将除initial_table之外的所有数据移动到`id`new_table`parentid`

2 - 使用lookup_table

> 编号 | 原始父母ID | 新父母ID | 客户ID

3 - 浏览 lookup_table 并用 new 更新 new_table parentid`parentid`列

--

所以...

**问题 - 1 - 这是正确的方法吗？**

**问题 - 2a - 如果是，该怎么做？**

**问题 - 2b - 如果没有，那怎么办？**

2 中的问题是我是通过触发器执行此操作的，`customerid`并且`SELECT @customerid = id FROM inserted`这很好。那我在做

```
INSERT INTO new_table (f1, f2, customerid)
SELECT f1, f2 @customerid FROM initial_table 
```

但是当我这样做时，我没有从 new_table 获得新的 ID。

--

所以，请帮我写这个触发器：

**我需要将所有数据从initial_table复制到new_table，问题是id会改变，我需要在new_table中相应地更新parentid**

谢谢

--

这是我当前的触发器：

```
ALTER TRIGGER Copy
ON dbo.Customers

FOR INSERT
AS

BEGIN TRANSACTION

/* variables */
DECLARE
    @customerid bigint

SELECT @customerid = id FROM inserted

/* insert all for this customer */
INSERT INTO new_table (f1, f2, customerid)
    SELECT f1, f2 @customerid FROM initial_table

/* TODO: add entries to lookup table */

/* TODO: fix the pages' parentid's */

/* execute */
COMMIT TRANSACTION

GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:51:49.200

我会`IDENTITY INSERT`关闭初始插入并避免整个混乱。你有什么理由不能这样做吗？这样的事情应该这样做：

```
SET IDENTITY_INSERT dbo.Customers ON 
```

然后当你完成后，只需运行

```
SET IDENTITY_INSERT dbo.Customers OFF 
```

# jquery - 覆盖页面但排除特定 div - jQuery Impromptu

> ID：10656563
> 
> 赞同：3
> 
> 时间：2012-05-18T16:41:54.557
> 
> 标签：jquery, overlay, z-index, impromptu

我正在使用 jQuery 即兴在我的网站上创建一个“叠加之旅”。这是源页面：[http ://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)

**我想更改一个 div 的 z-index，以便当它在游览中出现时，它被放置在覆盖层之上**（或其他方式，以便覆盖层不适用于此 div）。

这是我的代码的一个工作示例（我希望将第二个列表项放在覆盖层之上）：http: [//jsfiddle.net/bTxng/2/](http://jsfiddle.net/bTxng/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:22:02.527

在同一功能下，您可以在 li id 上使用 .css 方法并将其 z 索引更改为 1000（根据您的代码），例如：

```
$('#listitem2').css({'z-index':'1000'}); 
```

其中 listitem2 是您的第二个列表项的 ID。

PS：编辑：

在你的 CSS 中试试这个：

```
li#impromptuVerticalNav {
  position: relative;
  z-index: 1000;
} 
```

如果这有效，请更改

```
<a href="#" onClick="$.prompt(tourStates);">Take Tour</a> 
```

到

```
<a id="take-tour" href="#">Take Tour</a> 
```

然后将其添加到 html 的 <head></head> 部分。

```
$(document).ready(function () {
  $('#take-tour').click(function() {
    $('#impromptuVerticalNav').css({'position':'relative', 'z-index':'1000'});
    $.prompt(tourStates);
  });
}); 
```

# image - 带有img标签的div高度错误

> ID：10656570
> 
> 赞同：26
> 
> 时间：2012-05-18T16:42:15.807
> 
> 标签：image, css, html, height

我有一个内部带有图像标签的 div，并且 div 的高度似乎比图像大一点。

我可以通过为 div 设置特定高度（与图像相同）来解决此问题，但我正在使用响应式布局，并且我不想为 div 设置特定高度，因此当浏览器窗口缩放（例如在移动设备中） div 将缩放并保持比例。

我需要 div 高度与图像高度完全相同。

这是场景：

`<div class='box'><img src='image.jpg'></div>`

CSS是：

`img { height: auto; max-width: 100%; width: auto; }`

有谁知道如何解决这个问题？

![截屏](../Images/b9bc8e44ba4cbddc681a97aafa627876.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-18T18:26:19.780

问题是图像的自然样式在底部有一点边距，至少可以说是丑陋的。一个简单的解决方法是只显示：块，浮动：在图像上留下，空间应该消失。

如果你真的不想浮动它，或者你可以在图像上播放边框折叠。但是，这是一个最终可能会导致更多问题的解决方案。

所以最终会变成这样

```
.box img {
  display: block; /*inline block would be fine too*/
  float: left;
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-22T19:09:48.387

最简单的方法是确定图像的垂直对齐方式。

```
img {
  vertical-align:middle;
} 
```

[http://jsbin.com/xozatu/edit?html,css,输出](http://jsbin.com/xozatu/edit?html,css,output)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-14T09:40:06.450

使用 img: 块。就这样....

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T16:50:18.217

要`div`使其元素与其子`img`元素相同：

```
div {
    display: inline-block;
    padding: 0;
}

div img {
    margin: 0;
} 
```

不过，我建议您使用 a`span`而不是 a `div`（这样它会自动将其宽度“折叠”到其内容的宽度：

```
span {
    padding: 0;
}
span img {
    margin: 0;
} 
```

[JS Fiddle 概念验证（两者都适用）](http://jsfiddle.net/davidThomas/ZB3QD/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T16:47:41.323

您是在谈论仅设置 Div 的大小吗？在 CSS 中：

```
.box
{
 height: 10px;
 width:10px;
} 
```

您也可以不在代码中设置图像，而是将“框”的 DIV 背景图像设置为该图像：

```
.box
{
 height: 10px;
 width:10px;
 background:url('/imgURL/filename.gif') white no-repeat;
} 
```

（当然，10px 只是一个随机数。将其设置为您需要的任何大小）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-03T19:37:11.563

有效的简单现代解决方案如下

```
div {
    display: flex;
} 
```

# ruby-on-rails - 通过不带 ajax 的 Select 标签对 Rails 模型进行排序和过滤

> ID：10656571
> 
> 赞同：0
> 
> 时间：2012-05-18T16:42:24.887
> 
> 标签：ruby-on-rails

对于我的问题，没有 Ajax 没有找到任何干净简单的解决方案。

问题是——如何使用`select`标签对任何 ActiveRecord 模型列表进行排序和过滤。

我基本上需要的是：

*   当用户选择另一个值时，浏览器会打开带有更新 URL 参数的新页面
*   所有其他 url 参数保持不变，我不会从头开始创建 URL

例如：

1.  用户继续`/controller/action?sort=date&page=18&filter=A`
2.  然后他单击下拉列表并将其更改`filter`为`Z`
3.  Huray1 用户前往`/controller/action?sort=date&page=18&filter=Z`
4.  PS：我的应用程序不关心任何其他 url 参数、控制器、操作等。它只是更新`filter`字段并将用户移动到那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:45:55.127

您应该将表单标签上的方法设置为`"GET"`并使用 nil URL 将其提交到当前位置。

```
<%= form_tag nil, :method => 'GET' do %>
  ... 
```

然后，当用户更改下拉列表的选择时，您可以使用 javascript 提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:48:58.940

到目前为止，我提出的最佳解决方案是将所有当前参数放入隐藏的表单字段，并在选择值更改时通过 JS 代码提交表单。

# php - php 字符串关联数组只返回第一个单词

> ID：10656572
> 
> 赞同：0
> 
> 时间：2012-05-18T16:42:25.600
> 
> 标签：php, associative-array

在这个关联数组中，我只有包含空格的文本字符串。当我访问数组的一个元素来打印文本时，我只得到第一个单词。如何检索所有带有空格的文本？

```
 $feast_description = array('Mother_of_God' => 'Recognition of the Blessed Virgin Mary as the Mother of Jesus who is the Son of God and is God Himself.',
    'Epiphany' => 'Recognition of Jesus by the Magi as one sent by God.',
    'Baptism_of the Lord' => 'Jesus asks of John the Baptist that he baptize Him in the Jordan river. This act was to teach us of the necessity of baptism to be washed clean of our corruption for admittance among God\'s children and for salvation. This day God also revealed Jesus to be His Son.',
    'Presentation_of_the_Lord' => 'Jesus as first born of the Holy Family is presented at temple and consecrated to God.',
    'Ash_Wednesday' => 'Beginning of Lent the season of penance to make up for our sins and draw nearer to God in preparation for Easter.',
    'Holy_Thursday' => 'First feast of the Easter Triduum. We commemorate the Last Supper when Jesus began the Sacrament of the Eucharist.  On that day He also gave an example of service and of humility by washing the feet of His disciples.','Good_Friday' => 'Day of the Passion of Jesus when He was crucified and died to offer His life in reparation for our sins.  By giving up His earthly life as a sacrifice to God the Father, He earned for us divine life, eternal life with the Father in Heaven.',
    'Holy_Saturday' => 'A day of waiting between Good Friday and the Resurrection of the Lord on Easter Sunday morning.  On the vigil of Easter the Church celebrates a special liturgy which traces the history of salvation.',
    'Easter' => 'Jesus who was crucified three days earlier, went among the dead, descended into hell and returned to life victorious over death.  He won that victory for all mankind.  Upon the Resurrection of Jesus is founded the hope of every Christian that we too will conquer death.',
    'Ascension' => 'Jesus returns to the Father, having fulfilled His mission on earth, to teach us of the Father\'s love, show us His commands, and teach us the way back to Him.  He did not linger in His earthly life to be our intercessor and our advocate at the right hand of the Father. By ascending to the Father Jesus secures our place with Him.  He returns to the Father, taking up with Him all of humanity and forever defeats the one who constantly seeks to separate us from our God.',
    'Pentecost' => 'Jesus promised that He would not leave us by ourselves as He returns to the Father.  He promised to send a paraclete, a helper, an advocate.  He does on Pentecost, He sends the Holy Spirit, to be with us in this new manner and to remain with us until the end of time.',
); 
```

这个数组元素

```
$feast_description['Mother_of_God'] 
```

仅返回 word `Recognition`，即字符串中的第一个单词。

`title`我用这样的 echo 语句在`<a>`标签中输出字符串。

```
echo ' '.$litweek.' week <a title='.$feast_description['Mother_of_God'].'>'.$litsea.'</a>&nbsp;&#8226;'; 
```

获取所有文本的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:18:54.320

我认为您需要在括号前丢失点，应该是：

```
$feast_description['Mother_of_God'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:53:05.533

试试这个：

```
foreach ($feast_description as $name => $text) {
    echo $name . " : " . $text . "<br/>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:04:21.710

数组元素周围缺少引号。HTML 必须指定为

```
echo ' '.$litweek.' week <a title="'.$feast_description['Mother_of_God'].'">'.$litsea.'</a>&nbsp;&#8226;'; 
```

$feast_description 周围有双引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T19:39:54.833

您可能想尝试使用打印格式并传入值，而不是 echo。它使编写 html 并保持值分配整洁。

```
printf(' %s week <a title="%s">%s</a>&nbsp;&#8226;', 
    $litweek, $feast_description['Mother_of_God'], $litsea); 
```

# node.js - 如何在 Node.js Web 应用程序中管理 MongoDB 连接？

> ID：10656574
> 
> 赞同：341
> 
> 时间：2012-05-18T16:42:34.093
> 
> 标签：node.js, mongodb, database-connection, connection-pooling

我正在使用带有 MongoDB 的[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)驱动程序来编写网站。

我对如何管理连接有一些疑问：

1.  对所有请求只使用一个 MongoDB 连接就足够了吗？是否存在性能问题？如果没有，我可以设置一个全局连接以在整个应用程序中使用吗？

2.  如果没有，如果我在请求到达时打开一个新连接，并在处理请求时关闭它，是否很好？打开和关闭连接是否昂贵？

3.  我应该使用全局连接池吗？我听说驱动程序有一个本机连接池。这是一个不错的选择吗？

4.  如果我使用连接池，应该使用多少个连接？

5.  还有其他我应该注意的事情吗？

* * *

## 回答 #1

> 赞同：516
> 
> 时间：2013-01-22T17:41:07.950

[node-mongodb-native 的主要提交者说](https://groups.google.com/d/msg/node-mongodb-native/mSGnnuG8C1o/Hiaqvdu1bWoJ)：

> 当您的应用程序启动并重用 db 对象时，您打开 do MongoClient.connect 一次。它不是一个单例连接池，每个 .connect 都会创建一个新的连接池。

因此，要直接回答您的问题，请**重用由[`MongoClient.connect()`](http://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect)**. 这为您提供了池，并且与在每个数据库操作上打开/关闭连接相比，将提供显着的速度提升。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2015-10-14T10:09:46.350

在 Node.js 应用程序启动时打开一个新连接，并重用现有的`db`连接对象：

## `/server.js`

```
import express from 'express';
import Promise from 'bluebird';
import logger from 'winston';
import { MongoClient } from 'mongodb';
import config from './config';
import usersRestApi from './api/users';

const app = express();

app.use('/api/users', usersRestApi);

app.get('/', (req, res) => {
  res.send('Hello World');
});

// Create a MongoDB connection pool and start the application
// after the database connection is ready
MongoClient.connect(config.database.url, { promiseLibrary: Promise }, (err, db) => {
  if (err) {
    logger.warn(`Failed to connect to the database. ${err.stack}`);
  }
  app.locals.db = db;
  app.listen(config.port, () => {
    logger.info(`Node.js app is listening at http://localhost:${config.port}`);
  });
}); 
```

## `/api/users.js`

```
import { Router } from 'express';
import { ObjectID } from 'mongodb';

const router = new Router();

router.get('/:id', async (req, res, next) => {
  try {
    const db = req.app.locals.db;
    const id = new ObjectID(req.params.id);
    const user = await db.collection('user').findOne({ _id: id }, {
      email: 1,
      firstName: 1,
      lastName: 1
    });

    if (user) {
      user.id = req.params.id;
      res.send(user);
    } else {
      res.sendStatus(404);
    }
  } catch (err) {
    next(err);
  }
});

export default router; 
```

### 资料来源：[如何在 Node.js/Express 应用程序中打开数据库连接](https://medium.com/@tarkus/how-to-open-database-connections-in-a-node-js-express-app-e14b2de5d1f8)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-11-18T13:05:44.787

下面是一些管理 MongoDB 连接的代码。

```
var MongoClient = require('mongodb').MongoClient;
var url = require("../config.json")["MongoDBURL"]

var option = {
  db:{
    numberOfRetries : 5
  },
  server: {
    auto_reconnect: true,
    poolSize : 40,
    socketOptions: {
        connectTimeoutMS: 500
    }
  },
  replSet: {},
  mongos: {}
};

function MongoPool(){}

var p_db;

function initPool(cb){
  MongoClient.connect(url, option, function(err, db) {
    if (err) throw err;

    p_db = db;
    if(cb && typeof(cb) == 'function')
        cb(p_db);
  });
  return MongoPool;
}

MongoPool.initPool = initPool;

function getInstance(cb){
  if(!p_db){
    initPool(cb)
  }
  else{
    if(cb && typeof(cb) == 'function')
      cb(p_db);
  }
}
MongoPool.getInstance = getInstance;

module.exports = MongoPool; 
```

启动服务器时，调用`initPool`

```
require("mongo-pool").initPool(); 
```

然后在任何其他模块中，您可以执行以下操作：

```
var MongoPool = require("mongo-pool");
MongoPool.getInstance(function (db){
    // Query your MongoDB database.
}); 
```

这是基于[MongoDB 文档](https://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connection-pooling)。看看它。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-02-05T23:00:02.630

在单个独立模块中管理 mongo 连接池。这种方法提供了两个好处。首先，它使您的代码模块化并且更易于测试。其次，您不必被迫在您的请求对象中混合您的数据库连接，这不是数据库连接对象的位置。（鉴于 JavaScript 的性质，我认为将任何东西混入由库代码构造的对象是非常危险的）。因此，您只需要考虑一个导出两种方法的模块。`connect = () => Promise`和`get = () => dbConnectionObject`。

有了这样的模块，您可以首先连接到数据库

```
// runs in boot.js or what ever file your application starts with
const db = require('./myAwesomeDbModule');
db.connect()
    .then(() => console.log('database connected'))
    .then(() => bootMyApplication())
    .catch((e) => {
        console.error(e);
        // Always hard exit on a database connection error
        process.exit(1);
    }); 
```

在飞行中，您的应用程序可以`get()`在需要数据库连接时简单地调用。

```
const db = require('./myAwesomeDbModule');
db.get().find(...)... // I have excluded code here to keep the example  simple 
```

如果您以与以下相同的方式设置您的 db 模块，您不仅可以确保您的应用程序不会启动，除非您有数据库连接，您还可以通过全局方式访问您的数据库连接池，这将出错如果您没有连接。

```
// myAwesomeDbModule.js
let connection = null;

module.exports.connect = () => new Promise((resolve, reject) => {
    MongoClient.connect(url, option, function(err, db) {
        if (err) { reject(err); return; };
        resolve(db);
        connection = db;
    });
});

module.exports.get = () => {
    if(!connection) {
        throw new Error('Call connect first!');
    }

    return connection;
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-08-08T18:48:50.300

如果你有 Express.js，你可以使用[express-mongo-db](https://github.com/floatdrop/express-mongo-db)在没有池的请求之间缓存和共享 MongoDB 连接（因为接受的答案说这是共享连接的正确方法）。

如果没有 - 您可以查看它的源代码并在另一个框架中使用它。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-10-26T20:43:09.780

您应该创建一个连接作为服务，然后在需要时重用它。

```
// db.service.js
import { MongoClient } from "mongodb";
import database from "../config/database";

const dbService = {
  db: undefined,
  connect: callback => {
    MongoClient.connect(database.uri, function(err, data) {
      if (err) {
        MongoClient.close();
        callback(err);
      }
      dbService.db = data;
      console.log("Connected to database");
      callback(null);
    });
  }
};

export default dbService; 
```

我的 App.js 示例

```
// App Start
dbService.connect(err => {
  if (err) {
    console.log("Error: ", err);
    process.exit(1);
  }

  server.listen(config.port, () => {
    console.log(`Api runnning at ${config.port}`);
  });
}); 
```

并在任何你想要的地方使用它

```
import dbService from "db.service.js"
const db = dbService.db 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-05-18T18:12:04.683

我一直在我的应用程序中使用带有 redis 连接的通用池 - 我强烈推荐它。它是通用的，我绝对知道它适用于 mysql，所以我认为你不会对它和 mongo 有任何问题

[https://github.com/coopernurse/node-pool](https://github.com/coopernurse/node-pool)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-22T08:18:49.173

我在我的项目中实现了以下代码以在我的代码中实现连接池，因此它将在我的项目中创建最小连接并重用可用连接

```
/* Mongo.js*/

var MongoClient = require('mongodb').MongoClient;
var url = "mongodb://localhost:27017/yourdatabasename"; 
var assert = require('assert');

var connection=[];
// Create the database connection
establishConnection = function(callback){

                MongoClient.connect(url, { poolSize: 10 },function(err, db) {
                    assert.equal(null, err);

                        connection = db
                        if(typeof callback === 'function' && callback())
                            callback(connection)

                    }

                )

}

function getconnection(){
    return connection
}

module.exports = {

    establishConnection:establishConnection,
    getconnection:getconnection
}

/*app.js*/
// establish one connection with all other routes will use.
var db = require('./routes/mongo')

db.establishConnection();

//you can also call with callback if you wanna create any collection at starting
/*
db.establishConnection(function(conn){
  conn.createCollection("collectionName", function(err, res) {
    if (err) throw err;
    console.log("Collection created!");
  });
};
*/

// anyother route.js

var db = require('./mongo')

router.get('/', function(req, res, next) {
    var connection = db.getconnection()
    res.send("Hello");

}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-17T06:58:03.320

实现连接池的最佳方法是创建一个全局数组变量，该变量保存数据库名称和返回的连接对象`MongoClient`，然后在需要联系数据库时重用该连接。

1.  在你的`Server.js`定义中`var global.dbconnections = [];`

2.  创建一个服务命​​名`connectionService.js`。它将有 2 个方法`getConnection`和`createConnection`. 因此，当用户调用时`getConnection()`，它将在全局连接变量中查找详细信息，如果已存在则返回连接详细信息，否则它将调用`createConnection()`并返回连接详细信息。

3.  使用调用此服务`<db_name>`，如果它已经有连接对象，它将返回连接对象，否则它将创建新连接并将其返回给您。

希望能帮助到你 ：）

这是`connectionService.js`代码：

```
var mongo = require('mongoskin');
var mongodb = require('mongodb');
var Q = require('q');
var service = {};
service.getConnection = getConnection ;
module.exports = service;

function getConnection(appDB){
    var deferred = Q.defer();
    var connectionDetails=global.dbconnections.find(item=>item.appDB==appDB)

    if(connectionDetails){deferred.resolve(connectionDetails.connection);
    }else{createConnection(appDB).then(function(connectionDetails){
            deferred.resolve(connectionDetails);})
    }
    return deferred.promise;
}

function createConnection(appDB){
    var deferred = Q.defer();
    mongodb.MongoClient.connect(connectionServer + appDB, (err,database)=> 
    {
        if(err) deferred.reject(err.name + ': ' + err.message);
        global.dbconnections.push({appDB: appDB,  connection: database});
        deferred.resolve(database);
    })
     return deferred.promise;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-03T09:44:53.833

如果使用 express，还有另一种更直接的方法，即利用 Express 的内置功能在应用程序内的路由和模块之间共享数据。有一个名为 app.locals 的对象。我们可以将属性附加到它并从我们的路由内部访问它。要使用它，请在您的 app.js 文件中实例化您的 mongo 连接。

```
var app = express();

MongoClient.connect('mongodb://localhost:27017/')
.then(client =>{
  const db = client.db('your-db');
  const collection = db.collection('your-collection');
  app.locals.collection = collection;
});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              // view engine setup
app.set('views', path.join(__dirname, 'views')); 
```

这个数据库连接，或者你希望在你的应用程序模块周围共享的任何其他数据现在可以在你的路由中访问，`req.app.locals`如下所示，而无需创建和需要额外的模块。

```
app.get('/', (req, res) => {
  const collection = req.app.locals.collection;
  collection.find({}).toArray()
  .then(response => res.status(200).json(response))
  .catch(error => console.error(error));
}); 
```

此方法可确保您在应用程序运行期间打开数据库连接，除非您选择随时关闭它。它很容易访问，`req.app.locals.your-collection`不需要创建任何额外的模块。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-24T04:19:08.850

如果有人想要在 2021 年使用 Typescript 的东西，这就是我正在使用的东西：

```
import { MongoClient, Collection } from "mongodb";

const FILE_DB_HOST = process.env.FILE_DB_HOST as string;
const FILE_DB_DATABASE = process.env.FILE_DB_DATABASE as string;
const FILES_COLLECTION = process.env.FILES_COLLECTION as string;

if (!FILE_DB_HOST || !FILE_DB_DATABASE || !FILES_COLLECTION) {
  throw "Missing FILE_DB_HOST, FILE_DB_DATABASE, or FILES_COLLECTION environment variables.";
}

const client = new MongoClient(FILE_DB_HOST, {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

class Mongoose {
  static FilesCollection: Collection;

  static async init() {
    const connection = await client.connect();
    const FileDB = connection.db(FILE_DB_DATABASE);
    Mongoose.FilesCollection = FileDB.collection(FILES_COLLECTION);
  }
}

Mongoose.init();

export default Mongoose; 
```

我相信如果一个请求发生得太快（在`Mongo.init()`有时间完成之前），就会抛出一个错误，因为`Mongoose.FilesCollection`它是未定义的。

```
import { Request, Response, NextFunction } from "express";
import Mongoose from "../../mongoose";

export default async function GetFile(req: Request, res: Response, next: NextFunction) {
  const files = Mongoose.FilesCollection;
  const file = await files.findOne({ fileName: "hello" });
  res.send(file);
} 
```

例如，如果你调用`files.findOne({ ... })`and`Mongoose.FilesCollection`是未定义的，那么你会得到一个错误。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2021-07-13T09:57:11.030

### 使用以下方法，您可以轻松管理尽可能多的连接

```
var mongoose = require('mongoose');

//Set up default mongoose connection
const bankDB = ()=>{
    return  mongoose.createConnection('mongodb+srv://<username>:<passwprd>@mydemo.jk4nr.mongodb.net/<database>?retryWrites=true&w=majority',options);

}

bankDB().then(()=>console.log('Connected to mongoDB-Atlas bankApp...'))
       .catch((err)=>console.error('Could not connected to mongoDB',err));

//Set up second mongoose connection
const myDB = ()=>{
    return  mongoose.createConnection('mongodb+srv://<username>:<password>@mydemo.jk4nr.mongodb.net/<database>?retryWrites=true&w=majority',options);

}
myDB().then(()=>console.log('Connected to mongoDB-Atlas connection 2...'))
       .catch((err)=>console.error('Could not connected to mongoDB',err));

module.exports = { bankDB(), myDB() }; 
```

# java - 如何从对象中查找一个类是否是单例类？

> ID：10656576
> 
> 赞同：4
> 
> 时间：2012-05-18T16:42:44.263
> 
> 标签：java, singleton

给定一个对象，我们如何检查一个类是否是单例类？

目前我正在使用这个

```
public class SingletonClass implements IsSingleton 
```

`IsSingleton`我在单例类上实现的空白接口在哪里。所以这个类可以作为单例测试

```
SingletonClass obj = SingletonClass.getInstance();
if(obj instanceof IsSingleton)
    System.out.println("Class is Singleton");
else
    System.err.println("Class not singleton"); 
```

有没有更好的方法来确定单例类。我已经尝试过了，`reflection`但问题是`getConstructors()`只返回*声明*的公共类。因此，它会将没有声明构造函数的类视为 Singleton。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T19:41:05.483

我认为这可能会对您有所帮助.... 每当在内存中创建任何对象时，总会有一个与之关联的哈希码。该哈希码是通过使用少量参数（例如起始内存分配地址）的数学运算计算得出的。因此，如果您对任何对象调用 hashcode() 任意次数，它将返回相同的哈希码。因此，只需调用返回您预期的单例类型对象的方法并在其上调用 hashcode() 方法。如果每次都打印相同的哈希码，则表示它是单例的，否则不是。

很多人都说 instanceof 关键字可以帮助你判断一个对象是否是单例的。但是，我真的不明白这怎么可能？instanceof 只是让我们检查实例是否属于任何特定类。因此，如果有多个类 A 的实例并且它们不是由单例模式创建的，那么检查它们中的任何一个的 instanceof 总是会返回 true。但是，它不能被称为单例，因为内存中的每个对象都存在单独的实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T16:50:00.107

单例是一种语义定义，通常不能通过代码进行测试。没有接口或任何其他方案可以保证该类仅作为单例运行。

因此（语义性质），IMO 最好创建一个自定义注释来指示此功能

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:45:09.473

没有通用的方法可以以编程方式知道一个类是否是单例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:46:57.193

instanceof 应该与接口一起使用。

```
SingletonClass obj = SingletonClass.getInstance();

if (obj instanceof IsSingleton)
    System.out.println("Yay !"); 
```

但小心点 ！

[http://www.xyzws.com/Javafaq/how-does-instanceof-work-with-interface/67](http://www.xyzws.com/Javafaq/how-does-instanceof-work-with-interface/67)

如果对象来自最终类（如 String），这将不起作用。对于您的自定义类，只要您不使类本身成为最终类，就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T16:45:01.090

这看起来很复杂。

Java 支持“instanceof”

```
SingletonClass obj = SingletonClass.getInstance();
if(obj instanceof IsSingleton)
    System.out.println("Class is Singleton");
else
    System.err.println("Class not singleton"); 
```

# c# - ASPxGridView GetSelectedFieldValues 不起作用

> ID：10656579
> 
> 赞同：0
> 
> 时间：2012-05-18T16:43:00.067
> 
> 标签：c#, asp.net, devexpress, aspxgridview, selectionchanged

我想选择一行并用它的 Id 列做一些事情，但是它不起作用，我遇到了最后提到的错误。这是我得到的-

## ASPxGridView 片段 -

```
<dx:ASPxGridView ID="ASPxGridView1" runat="server" Font-Names="Arial" Font-Size="Small"
  Width="100%" ClientInstanceName="grid" oncustomcallback="grid_CustomCallback"                                              
  onbeforegetcallbackresult="ASPxGridView1_BeforeGetCallbackResult" 
  EnableCallBacks="False" EnableRowsCache="False" KeyFieldName="ID">

... Columns here ...

<ClientSideEvents ContextMenu="OnContextMenu" SelectionChanged="OnSelectionChanged" />      
</dx:ASPxGridView> 
```

### 注意：网格通过 DataTable 填充

## 数据表代码 -

```
protected DataTable GetHeadlineData(SqlDataReader rdr)
{
    DataTable headlineTable = new DataTable();        
    headlineTable.Load(rdr)
    headlineTable.PrimaryKey = new DataColumn[] { headlineTable.Columns["ID"] };
    return headlineTable;
} 
```

## 页面加载代码 -

```
DataTable dt= new DataTable();    
dt= FillGrid(); //this function internally calls the above GetHeadlineData function
Session["headTable"] = dt;
ASPxGridView1.DataSource = Session["headTable"];
ASPxGridView1.KeyFieldName = "ID";
ASPxGridView1.DataBind(); 
```

## SelectionChanged 函数 -

```
 function OnSelectionChanged(s, e) {              
        grid.GetSelectedFieldValues("ID", OnGetSelectedFieldValues);            
    }

    function OnGetSelectedFieldValues(result) {
        for (var i = 0; i < result.length; i++)
            for (var j = 0; j < result[i].length; j++) {
                document.getElementById('selectedRowDiv').innerHTML = result[i];                    
            }
    } 
```

## 我得到的错误 -

```
A primary key field specified via the KeyFieldName property is not found in the 
underlying data source. Make sure the field name is spelled correctly. Pay 
attention to the character case. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:33:55.413

```
 <dx:ASPxGridView ID="grid" ClientInstanceName="grid" runat="server" DataSourceID="AccessDataSource1"
            KeyFieldName="CustomerID" Width="100%">
                    </dx:ASPxGridView> 
```

您必须提供唯一的 Ky 列名**KeyFieldName="Unique Column Name"**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:21:46.823

尝试将您的代码从 Page_Load 移动到 Page_Init 方法。在这种情况下，一切都应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:47:40.390

最终起作用的是使用 RowClick 事件而不是 SelectionChanged。

# tfs - TFS 2010 更新的开始/完成日期未从 MS Project 2010 发布

> ID：10656584
> 
> 赞同：1
> 
> 时间：2012-05-18T16:43:19.317
> 
> 标签：tfs

我们在使用 MS Project 2010 和 TFS 2010 时遇到了一些发布/刷新问题。我们的情况是我们正在尝试使用 MS Proejct 安排和排序任务（在工作实际开始之前）。我们有一个不在现场的项目经理，必须使用断开连接的 .mpp。当他进行更改时，我收到文件，然后发布到 TFS，然后刷新。在大多数情况下，这工作正常。但是，我们遇到了以下问题：

当我们的 PM 重新分配资源，然后在 MS Project 中对它们进行分级，然后我发布到 TFS 时，似乎对于少数任务，在 MS Proejct 中对其开始/完成日期的更改并未发布到 TFS。如果我在发布之后从 TFS 刷新 .mpp 文件，那么 .mpp 中的相同任务将恢复到 PM 更新之前的开始/完成日期。

从受影响任务的工作项历史记录来看，似乎很明显这是一个发布问题……因为上次发布期间记录的工作项开始/完成日期没有任何修改。手动修复 MS Project 任务中的开始/完成日期并发布/刷新解决问题的方法......但这意味着我们确实需要在每次发布然后刷新时仔细检查项目计划中发生的情况。

我完全被难住了。这不会发生在所有任务上，并且从一个发布到下一个发布，没有明显的方法可以预测哪些任务/工作项会受到影响。

非常感谢任何帮助或指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:56:14.783

我无法确认以下是答案，但这是给您的提示：

将 MS 项目绑定到团队项目后，文件会以每个任务链接到相应工作项的方式进行修改，因此如果您的 PM 仍然使用初始文件（未链接到 TFS），则更新部分不会第二次工作。你应该把你制作的文件的修改版本还给他。

我担心的是，如果他无法连接到 TFS，我不确定他是否能够编辑此版本。

但无论如何，你必须尝试...

# box2d - 为什么我不应该在 Box2D 中使用像素作为单位？

> ID：10656588
> 
> 赞同：3
> 
> 时间：2012-05-18T16:43:53.930
> 
> 标签：box2d, physics, simulation

在手册中说我应该使用小单位（0.1-10 米）。不鼓励使用像素作为度量单位。但是为什么 Box2D 会比我使用小单元时工作得更好，并且具有更好的模拟呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T16:53:11.610

Box2D 是一个内部使用[MKS 单位系统的](http://en.wikipedia.org/wiki/MKS_system_of_units)模拟框架。如果您想要一个可靠且可预测的模拟，您应该在这个单位系统内以合理的值表达您创建的模拟系统。你希望一个盒子表现得像一个盒子，一个岩石表现得像一个岩石，一个球表现得像一个球。

如果你以像素为单位，你有一个 20 x 20 像素的盒子，标量质量值为 10，你实际上创建了一个边长为 20 米的盒子，其质量仅为 10 公斤。从本质上讲，您的模拟变得难以设置并使其表现得真实。

没有什么能阻止您使用像素作为单位。但是为了让它可靠、自然和可预测地运行，最好、更容易地以它期望的单位和合理的边界来表达输入模拟框架的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:57:30.260

取自[这里](http://www.cocos2d-iphone.org/forum/topic/7739#post-45475)

> Box2D 物理对象用米来定义长度和宽度。Box2D 针对 1x1 米大小的对象进行了调整。您想要 PTM（像素到米）的原因是您不希望像素大小和米大小之间存在 1 比 1 的相关性。
> 
> 例如，如果您有一辆长 200 像素、高 50 像素的汽车，并且您没有使用 PTM 转换，您最终会创建一辆 200 米乘 50 米的 Box2D 汽车。那是 656 英尺长或大约 12 辆半卡车的长度。想象一下你必须施加在这辆车上的力来移动它。
> 
> 你想要的是将你的像素尺寸缩小到 Box2D 的米尺寸，大多数时候我最终使用 30 或 32 像素到 1 米的 PTM。

我相信 Box2D 最适合 1 米的原因是对数字 1 的计算比对其他数字的运算要快。例如 root(1) = 1。（并且根是物理引擎中的常见计算）。因此，您应该调整您的 PTM 比率，以便您最常见的对象大小为 1X1 米。

[Box2D 文档](http://www.box2d.org/manual.html) 第[1.7 节]   也提供了一些见解：

> Box2D 与浮点数一起工作，必须使用容差才能使 Box2D 表现良好。这些公差已经过调整，可以很好地与米-千克-秒 (MKS) 单位配合使用。特别是，Box2D 已经过调整，可以很好地处理 0.1 到 10 米之间的移动物体。所以这意味着汤罐和公共汽车之间的物体大小应该可以正常工作。静态物体可能高达 50 米大，没有太多麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:47:16.540

可能是因为像素数可以在设备/显示器之间改变，所以它不可靠。例如，如果您在 iPad1 上移动 10 个像素，您将比在 iPad3 上移动 10 个像素移动得更远，因为 iPad3 上的分辨率更高（每英寸更多像素）。使用仪表为物理引擎提供了一个可靠的测量单位，该单位将在所有设备/显示器上保持一致。

# javascript - 检测列表框是否为空（没有选项）

> ID：10656595
> 
> 赞同：2
> 
> 时间：2012-05-18T16:44:41.670
> 
> 标签：javascript, jquery, html

我从一个在 Internet 上发现有用的示例中获得了此代码。它使用两个列表框，一个在左侧，另一个在右侧，并将左侧的一个元素传递到右侧，反之亦然。这是带有选项的选择的 HTML：

```
<select id="SelectLeft" multiple="multiple">
 <option value="1">Stack Overflow</option>
 <option value="2">Server Fault</option>
 <option value="3">Ask Ubuntu</option>
 <option value="4">Super User</option>
</select>
<button id="MoveRight"> >> </button>
<button id="MoveLeft"> << </button>
<select id="SelectRight" multiple="multiple"></select> 
```

这是在列表框之间移动元素的 JavaScript：

```
$(function() {
 $("#MoveRight,#MoveLeft").click(function(event) {
  var id = $(event.target).attr("id");
  var selectFrom = id == "MoveRight" ? "#SelectLeft" : "#SelectRight";
  var moveTo = id == "MoveRight" ? "#SelectRight" : "#SelectLeft";
  var selectedItems = $(selectFrom + " :selected").toArray();
  $(moveTo).append(selectedItems);
   selectedItems.remove;
  });
}); 
```

如您所见，代码只是根据按下的按钮确定必须添加和删除哪些选定元素。我需要检测右侧的列表框（“SelectRight”）何时没有选项。例如，在一开始没有按下任何内容或用户删除所有项目时。

我需要一种方法来检测这一点，以便我可以触发我拥有的验证过程。

## 编辑

感谢您的回答，我发现这`$("#SelectRight").is(":empty")`似乎是我需要的。但是这种行为不是我需要的。每次清空列表框时，我都需要启动一个事件。例如，如果我这样做：

```
if($("#SelectRight").is(":empty")) alert("It works?? =O"); 
```

此警报仅在页面加载时显示，但如果我添加然后删除元素，则不再触发。所以我想我需要添加一个事件处理程序或其他东西。也许是一个 JQuery 之类的`.on()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T16:47:26.073

```
$("#SelectRight").is(":empty") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:47:34.570

```
$('#SelectRight option').length: 
```

或者

```
$('#SelectRight').is(':empty'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T16:50:22.000

怎么样：

```
$("#MoveRight,#MoveLeft").click(function(event) {
    var id = $(event.target).attr("id");
    var selectFrom = id == "MoveRight" ? "#SelectLeft" : "#SelectRight";
    var moveTo = id == "MoveRight" ? "#SelectRight" : "#SelectLeft";
    var selectedItems = $(selectFrom + " :selected").toArray();
    $(moveTo).append(selectedItems);
    selectedItems.remove;
    if($('#SelectRight option').length<=0) console.log('Right empty');
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/D6aSD/)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:51:29.420

用这个：

```
​$('#SelectRight').find('option').size(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T19:18:19.700

为什么不添加一个 if 语句来检查列表框是否为空。我会把它放在 selectedIteams.remove 之后，每次调用函数时都会检查它以更改列表框，这将清空它。或者您可以向您的元素添加一个 onchange = 'someFunction()' 函数，并在每次元素更改时进行检查。

# design-patterns - 什么是设计模式标题？

> ID：10656598
> 
> 赞同：0
> 
> 时间：2012-05-18T16:44:53.467
> 
> 标签：design-patterns, uml

有人可以解释一下 UML 中的设计模式标题是什么吗？我能找到的大部分信息对于初学者来说都太复杂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:08:05.363

不确定这是否是您要查找的内容，但经典的四人帮模式最常根据特定模板进行记录，将模式描述分解为多个部分。

它将模式描述为一个整体，模式背后的动机。然后是更详细的信息，描述参与者、变化、后果、实际系统中的已知用法等。

请参阅：[四人组模板](http://hillside.net/gang-of-four-template)，[我如何记录设计模式？](http://www.jguru.com/faq/view.jsp?EID=1223)

# python - 无法使用 PayPal 模块处理交易

> ID：10656603
> 
> 赞同：2
> 
> 时间：2012-05-18T16:45:03.680
> 
> 标签：python, paypal

我正在尝试测试 Python 和 Paypal 的集成。

这是我对 PayPal 模块的调用：http: [//www.chickenwingsw.com/paypal-on-python](http://www.chickenwingsw.com/paypal-on-python)

```
def testPayPal():
   import paypal
   PAYPAL_TEST_USERNAME = 'noeldo_1337351894_biz_api1.testacc.com'
   PAYPAL_TEST_PASSWORD = '1337353453'
   PAYPAL_TEST_SIGNATURE = 'AZ89-T17NMRVoILpOrfuXDv1jXZAlfJ0g5ZB76Rp5DNC010UYwxC2KS'
   PAYPAL_TEST_SIG_URL = 'https://api-3t.sandbox.paypal.com/nvp'
   paypal.SKIP_AMT_VALIDATION = True
   pp = paypal.PayPal(PAYPAL_TEST_USERNAME, PAYPAL_TEST_PASSWORD, PAYPAL_TEST_SIGNATURE, PAYPAL_TEST_SIG_URL)

   rresp = pp.DoDirectPayment(paymentaction='Sale',
                             ipaddress='127.69.56.20',
                             creditcardtype='Visa',
                             acct='4188161369058553',
                             expdate=paypal.ShortDate(2017, 5),
                             cvv2='111',
                             salutation='Mr',
                             firstname='Homer',
                             middlename='J',
                             lastname='Simpson',
                             suffix='GSTEST',
                             street='742 Evergreen Terrace.',
                             city='San Jose',
                             state='CA',
                             countrycode='US',
                             zip='95131',
                             phonenum='123-456-7890',
                             shiptostreet='742 Evergreen Terrace.',
                             shiptocity='San Jose',
                             shiptostate='CA',
                             shiptozip='95131',
                             shiptocountrycode='US',
                             amt='100.00',
                             currencycode='USD')

   logging.info('testPayPal: got response %s' % resp) 
```

运行时出现错误`print(testPayPal())`

> > PayPalException: ['由于地址无效，交易无法处理。']

我已经使用帐户类型 Website Payments Pro 设置了我的 Paypal 沙盒帐户。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:08:34.107

嗯，奇怪的事情发生了。

周五尝试这个但没有用，但周一又回来了，ta'da，它奏效了。

我在星期五用 paypal 设置了我的沙盒帐户，所以不确定我是否需要等待或者沙盒环境是否存在问题。

无论如何，如果有人正在寻找示例，此代码应该可以工作。

干杯。

# php - PHP - 我可以使用表单构建动态 Mongo 查询吗？

> ID：10656606
> 
> 赞同：0
> 
> 时间：2012-05-18T16:45:10.720
> 
> 标签：php, arrays, mongodb

我是一名初级中级 PHP 开发人员，开始使用 MongoDB。我想创建一个**Mongo**查询类，它根据传递给方法的参数构建查询。我希望这是可能的，我只是缺少一些基本的 PHP 技术。

我从静态查找功能开始：

```
$dateRange = $this->collection->find(array(

        'timeStamp' => array(
            '$gt' => $startTime,
            '$lt' => $endTime
        ),
        'userAgent' => array(
            '$ne' => 'ELB-HealthChecker/1.0'
        )

)); 
```

我希望能够将时间范围、用户代理、紧急级别等传递到方法中，然后根据这些参数是否存在来构建查询。我试过这样的事情：

```
if($startTime && $endTime){
$filter = "

     'timeStamp' => array(
                '$gt' => $start,
                '$lt' => $end
            )";
}

if($userAgent){
$filter .= ",
        'userAgent' => array(
            '$ne' => 'ELB-HealthChecker/1.0'
        )";

$dateRange = $this->collection->find(array($filter); 
```

没用。那么，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:06:24.040

看起来您正在尝试使用字符串，而您应该只使用数组。

```
$qry = array();

if(isset($startTime) && isset($endTime)) {
    // Add the timestamp array
    $qry['timestamp'] = array('$gt' => $startTime, '$lt' => $endTime);
}

if(isset($userAgent)) {
    // add the userAgent
    $qry['userAgent'] = array('$ne' => 'ELB-HealthChecker/1.0');
}

$dateRange = $this->collection->find($qry); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:48:48.720

你试过`if(isset($startTime) && isset($endTime))`吗？似乎您也可能需要其中的一些`else`语句。

# python - python从列表中的条目中删除所有空格

> ID：10656607
> 
> 赞同：4
> 
> 时间：2012-05-18T16:45:14.210
> 
> 标签：python, string, list

在调用`readlines()`.srt 文件时，我得到了一个包含大量前导和尾随空格的字符列表，如下所示

```
with open(infile) as f:
    r=f.readlines()
    return r 
```

我得到了这份清单

```
['\xef\xbb\xbf1\r\n', '00:00:00,000 --> 00:00:03,000\r\n', "[D. Evans] Now that you've written your first Python program,\r\n",'\r\n', '2\r\n', '00:00:03,000 --> 00:00:06,000\r\n', 'you might be wondering why we need to invent new languages like Python\r\n', '\r\n'] 
```

为简洁起见，我只包含了一些元素。如何清理此列表，以便删除所有空白字符并仅获取相关元素，例如

```
 ['1','00:00:00,000 --> 00:00:03,000',"[D. Evans] Now that you've written your first Python program"...] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T16:51:39.437

您可以剥离每一行。如果您正在处理一个大文件，将其作为生成器运行也可以为您节省一些内存。

此外，看起来您正在处理一个带有 BOM 的 UTF-8 文件（这有点愚蠢，或者至少是不必要的），因此您需要以不同的方式打开它。

```
import codecs

def strip_it_good(file):
    with codecs.open(file, "r", "utf-8-sig") as f:
        for line in f:
            yield line.strip() 
```

# jquery - 需要帮助构建页面

> ID：10656609
> 
> 赞同：0
> 
> 时间：2012-05-18T16:45:24.663
> 
> 标签：jquery, html, css, jquery-ui, jquery-mobile

*我失败的尝试是在* [http://jsfiddle.net/NZtc4/](http://jsfiddle.net/NZtc4/)

我正在尝试制作一个显示以下页面的网页应用程序页面，无论屏幕大小如何。

`[Toolbar]`
`[ Image ]`
`[img][img][img]`<-- 该行应该是可滚动的<->（可拖动）

*   工具栏是jquery mobile 的。
*   图像应为剩余高度的 67% 和 100% 宽度。
*   imgs 应该是页面宽度的 50%，并且是剩余的高度。（在任何给定时间显示两个等效的完整图像。）
*   任意数量的imgs > 2。
    （所有图像都是锚点，但这超出了问题的范围。）

页面应该是无缝的；即元素之间没有间隙。

答案是所描述页面实现的演示或解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:03:14.063

如果您的元素是`inline-block`. 为了消除这个差距，您需要添加`font-size:0`. 作为副作用，这需要您为实际包含文本的元素提供字体大小。（否则他们不会显示任何文本）。在 CSS3 中，您可以使用`font-size:1rem`将字体大小设置为主体（根）之一。

对于底部滚动条，您不需要指定`width`，而是需要`white-space:nowrap`让您的元素出现在同一行。

见编辑的例子：http: [//jsfiddle.net/NZtc4/2/](http://jsfiddle.net/NZtc4/2/)

# php - 查明网站是否返回 200

> ID：10656610
> 
> 赞同：1
> 
> 时间：2012-05-18T16:45:26.100
> 
> 标签：php, validation, get-headers

我正在使用以下代码来检查用户提供的链接是否真的指向现有网站：

```
$headers=get_headers($imageurl);
if (strpos($headers[0], '200') === false) {
    echo "not valid1";
    exit;
} 
```

作为测试，我使用了 img [http://cdn.thegloss.com/files/2012/04/stormtr.jpg](http://cdn.thegloss.com/files/2012/04/stormtr.jpg)

只要我在本地主机上使用它，它就可以正常工作 - 即它说 url 是有效的并且没有回显“not valid1” - 现在它在不同的服务器上并且它回显“not valid1”。怎么来的？有人知道吗？

谢谢！丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:55:06.453

`get_headers()`返回 false 因为它失败了。
这可能是因为`allow_url_fopen`在服务器上设置为关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:59:10.057

试试这个，它将只返回 3 位 HTTP 响应代码

```
function get_response_code($theURL) {
    $headers = get_headers($theURL);
    return substr($headers[0], 9, 3);
} 
```

# jquery - jQuery Masonry 拉伸图像

> ID：10656622
> 
> 赞同：0
> 
> 时间：2012-05-18T16:46:15.310
> 
> 标签：jquery, css, plugins, jquery-masonry

**[注意：我目前没有足够的声誉来发布图片，所以很遗憾它们是作为链接发布的]**

好的，所以，我目前正在开发一个 Wordpress 主题，并借助 jQuery Masonry 插件的一些帮助。根据您正在查看的页面，帖子中的图像必须为 200 像素或 500 像素宽。早些时候，我遇到了一个问题，即在调整宽度大小时图像不会保留它们的纵横比，我用一些简单的 CSS 解决了这个问题：

```
#post img {
width:100%;
height:100%;
} 
```

这似乎很好地解决了这个问题。然而，现在页面上的图像发生了一些非常奇怪的事情，它们在页面加载时被不成比例地拉伸（图像几乎是屏幕截图的两倍）：

[http://i.stack.imgur.com/5dAgU.jpg](http://i.stack.imgur.com/5dAgU.jpg)

奇怪的是，不管它们的初始高度差异如何，所有图像都拉伸到相同的长度。

当我刷新页面时，图像会恢复到正确的纵横比。页面应该是这样的：

[http://i.stack.imgur.com/YK4Sl.jpg](http://i.stack.imgur.com/YK4Sl.jpg)

我已经将问题定位到 jQuery Masonry 插件。当我把它拿走时，图像渲染得很好。除此之外，尽管我完全不知道发生了什么以及如何解决它。

仅供参考：当我调整页面大小时，插件通常会打乱砖块，但图像会拉伸得更远。也许这可能意味着什么？

我到处寻找答案都是徒劳的。也许你们好小伙子对可能是什么问题有一个遥远的线索？

提前致谢，

朱利安

# c# - 以编程方式将控件添加到 TabPage

> ID：10656629
> 
> 赞同：4
> 
> 时间：2012-05-18T16:46:40.220
> 
> 标签：c#, richtextbox, tabpage

所有，我想向`RichTextBox`WinForm添加自定义`TabPage`。我尝试了以下代码所示的各种事情

```
TabPage tmpTabPage = new TabPage("Test");
tabControl1.TabPages.Add(tmpTabPage);

CustomRichTextBox tmpRichTextBox = new CustomRichTextBox();
tmpRichTextBox.LoadFile(@"F:\aaData\IPACostData\R14TData\ACT0\1CALAEOSAudit_log.rtxt");

// Attempted FIX.
tabControl1.SuspendLayout();
tabControl1.TabPages["Test"].Controls.Add(tmpRichTextBox); // This throws a NullReferenceException??
tabControl1.ResumeLayout();

tmpRichTextBox.Parent = this.tabControl1.TabPages["test"];

tmpRichTextBox.WordWrap = tmpRichTextBox.DetectUrls = false;
tmpRichTextBox.Font = new Font("Consolas", 7.8f); 

tmpRichTextBox.Dock = DockStyle.Fill;
tmpRichTextBox.BringToFront(); 
```

在我添加“aAttempted FIX”之前，代码将毫无例外地运行，但`CustomRichTextBox`不会出现。现在我明白了`NullReferenceException`，我对这两种情况都感到困惑。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T17:04:58.717

您真正缺少的是为您的 TabPage 变量设置“名称”属性。您传递给 TabPage 的构造函数的字符串只是设置 TabPage.Text 属性。

只需在实例化 TabPage 后添加以下代码，就可以了：

```
TabPage tmpTabPage = new TabPage("Test");
tmpTabPage.Name = "Test"
// Rest of your code here 
```

您收到 NullReferenceException 的原因是因为以下代码：

```
tabControl1.TabPages["Test"] 
```

未返回对 TabPage 的引用，因为未设置 TabPage 的“名称”属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:50:36.457

通过将 tmpRichTextBox 添加到 tmpTabPage 然后将 tmpTabPage 添加到 tabControl1 来尝试这样

```
 TabPage tmpTabPage = new TabPage("Test");
        CustomRichTextBox tmpRichTextBox = new CustomRichTextBox();
        tmpRichTextBox.LoadFile(@"F:\aaData\IPACostData\R14TData\ACT0\1CALAEOSAudit_log.rtxt");

        // Attempted FIX. 
        tmpTabPage.SuspendLayout();
        tmpTabPage.Controls.Add(tmpRichTextBox); // This throws a NullReferenceException?? 
        tmpTabPage.ResumeLayout();

        tmpRichTextBox.Parent = tmpTabPage;

        tmpRichTextBox.WordWrap = tmpRichTextBox.DetectUrls = false;
        tmpRichTextBox.Font = new Font("Consolas", 7.8f);

        tmpRichTextBox.Dock = DockStyle.Fill;
        tmpRichTextBox.BringToFront();

        //tmpTabPage.Controls.Add(tmpRichTextBox);
        tabControl1.TabPages.Add(tmpTabPage); 
```

# oracle - Oracle sqlplus 行大小

> ID：10656631
> 
> 赞同：3
> 
> 时间：2012-05-18T16:46:50.770
> 
> 标签：oracle, sqlplus

在 SQLplus 中，为什么我将行大小设置为最大（32767），它仍然不格式。如何解决？

```
select * from user_tables
TABLE_NAME                     TABLESPACE_NAME                CLUSTER_NAME                   IOT_NAME                       STATUS     PCT_FREE   PCT_U
_TRANS  MAX_TRANS INITIAL_EXTENT NEXT_EXTENT MIN_EXTENTS MAX_EXTENTS PCT_INCREASE  FREELISTS FREELIST_GROUPS LOG B   NUM_ROWS    BLOCKS EMPTY_BLOCKS  A
  CHAIN_CNT AVG_ROW_LEN AVG_SPACE_FREELIST_BLOCKS NUM_FREELIST_BLOCKS DEGREE    INSTANCES  CACHE TABLE_LO SAMPLE_SIZE LAST_ANAL PAR IOT_TYPE     T S NE
_ ROW_MOVE GLO USE DURATION       SKIP_COR MON CLUSTER_OWNER                  DEPENDEN COMPRESS COMPRESS_FOR       DRO REA 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T20:59:16.790

将此作为上面的评论，但在此处作为答案提交：

如果您从命令控制台（例如 Windows 命令提示符）运行它，控制台将包装您的行，而不管您的`LINESIZE`. 假脱机到一个文件，你会看到你的行长设置的效果，这将是很多空白字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T23:24:19.160

```
set lines 9999
set trimspool on
spool myfile.txt
select * from user_tables;
spool off 
```

将 myfile.txt 带入编辑器，列将“排列”。设置 trimspool on 将摆脱让您更加困惑的尾随空白。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T17:00:12.957

您尝试在 sql*plus 中执行的确切命令是什么？

它应该是`SET LINESIZE ###`

将您的 linesize 设置为 32767 列非常宽，这是您的意图吗？

# android - Android 上 Handler postDelayed() 的单元测试

> ID：10656636
> 
> 赞同：1
> 
> 时间：2012-05-18T16:47:19.787
> 
> 标签：android, unit-testing, timer, handler, junit4

我正在为 Android 应用程序编写一个简单的类来充当计时器，它将定期更新 Activity UI。计时器类使用 Handler postDelayed() 函数来执行 Runnable。

这是计时器的代码：

```
public class MyTimer
{
    private MyTimerDelegate _delegate;
    private int _seconds = 0;

    public MyTimerDelegate delegate() {
        return _delegate;
    }

    public void setDelegate(MyTimerDelegate delegate) {
        _delegate = delegate;
    }

    public int seconds() {
        return _seconds;
    }

    public void setSeconds(int seconds) {
        if (seconds < 0)
            throw new IllegalArgumentException();
        _seconds = seconds;
    }

    public void start() throws Exception {
        if (_delegate == null)
            throw new Exception("A delegate has not been set.");

        _delegate.MyTimerStartedFromSeconds(this, _seconds);

        // Schedule the first timer fire.
        final Handler handler = new Handler();
        final MyTimer MyTimer = this;
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                // The timer fired. Decrement seconds.
                _seconds -= 1;
                // Inform the delegate.
                _delegate.MyTimer_countedDownToSeconds(MyTimer, _seconds);

                // If there are seconds remaining, schedule the next fire.
                // Otherwise, stop the timer.
                if (_seconds > 0) {
                    handler.postDelayed(this, 1000);
                } else {
                    _delegate.MyTimerStopped(MyTimer);
                }
            }
        }, 1000);
    }
} 
```

我的问题是：**如何编写 JUnit 4 测试以确保 MyTimer 在倒计时期间的每个时间间隔都调用其委托？**

这是我到目前为止所做的：

```
public void testCountdownCallsDelegate() throws Exception {
    class MockMyTimerDelegate implements MyTimerDelegate {

        public int callbackCount = 0;

        @Override
        public void biteTimerStartedFromSeconds(BiteTimer biteTimer, int seconds) {
        }

        @Override
        public void biteTimerStopped(BiteTimer biteTimer) {
        }

        @Override
        public void biteTimer_countedDownToSeconds(BiteTimer biteTimer, int seconds) {
            callbackCount++;
        }

    }

    MockMyTimerDelegate delegate = new MockMyTimerDelegate();
    MyTimer timer = new MyTimer();
    timer.setDelegate(delegate);
    timer.setSeconds(1);
    timer.start();

    // Need some way to wait here and allow the timer to call its delegate...

    assertEquals("The timer should have called the delegate when counting down.", 1, delegate.callbackCount);
} 
```

显然，我不能用 Thread.sleep() 调用阻塞线程。有任何想法吗？

**找到解决方案**

这个解决方案似乎有效。我把它贴在这里以防它帮助别人。如果你有办法，请改进它。

```
public void testMyTimerDelegateIsCalledForEachSecondDuringCountdown() throws Exception {
    // An object to sync our threads with.
    Object syncLock = new Object();

    // This thread class will perform the actual test.
    class TimerThread extends Thread
    {
        Object _syncLock;

        TimerThread(Object syncLock) {
            _syncLock = syncLock;
        }

        @Override
        public void run() {
            // Since MyTimer is calling Handler postDelayed(), we need a Looper.
            Looper.prepare();

            // myTimer was instantiated in setUp()
            myTimer.setDelegate(new MockMyTimerDelegate() {
                @Override
                public void myTimer_countedDownToSeconds(MyTimer myTimer, int seconds) {
                    countdownToSecondsCallCount++;

                    if (countdownToSecondsCallCount >= 3) {
                        synchronized (_syncLock) {
                             // The test is complete. Now the parent thread can continue and assert the results.
                            _syncLock.notify();
                        }
                    }
                }
            });

            myTimer.setSeconds(3);
            try {
                myTimer.start();
                Looper.loop();
            } catch (Exception e) {
            }
        }
    }

    // Run the test on its own thread and wait for it to finish.
    TimerThread t = new TimerThread(syncLock);
    t.start();
    synchronized (syncLock) {
        // Wait more time than should be needed, but timeout in case of failure.
        syncLock.wait(5000);
    }

    assertEquals("MyTimerDelegate should have been called 3 times during three second countdown.", 3, ((MockMyTimerDelegate) myTimer.delegate()).countdownToSecondsCallCount);
} 
```

# telerik - @Model 或 @Html.DisplayFor 在 mvc4 的编辑器模板中不起作用

> ID：10656638
> 
> 赞同：2
> 
> 时间：2012-05-18T16:47:23.413
> 
> 标签：telerik, asp.net-mvc-4

我正在使用 mvc4 并且有一个启用了编辑模式的 Telerik 控制网格。编辑模式是“PopUp”，这意味着单击编辑按钮时，应该会出现一个叠加层，其中一些字段填充在文本框中，一些字段填充在标签中。

问题是字段值未在标签中呈现。字段值在文本框中呈现以进行编辑，这很好。

**查看模型**

```
namespace Admin.Models
{
   public class ViewModel
   {
       public int Id{ get; set; }
       [DataType(DataType.Text)]
       public string Name { get; set; }
   }
} 
```

**.cshtml 文件**

```
@model Admin.Models.ViewModel

<div>
   <div class="editor-label">
      @Html.LabelFor(model => model.Id)
   </div>
   <div class="editor-field">
      @Model.Id **Does not work,always return 0, should    return  value 1,2,...**
      @Html.DisplayFor(model => model.Id)  **Does not work,always return 0, should    return  value 1,2,...**
   </div>
   <div class="editor-label">
      @Html.LabelFor(model => model.Name)
   </div>
   <div class="editor-field">
      @Html.EditorFor(model => model.Name)  
   </div>
</div> 
```

**控制器代码**

```
[GridAction]
public ActionResult Index()
{
   IList<ViewModel> viewModels = GetModelItems();
   return View(new GridModel
   {
      Data = viewModels
   });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:09:17.723

Teleric 在编辑模板时似乎不支持 DisplayFor。在这个来自的帖子中，他们确认了[http://www.telerik.com/community/forums/aspnet-mvc/grid/clajax-databinding-client-editing.aspx#1906385](http://www.telerik.com/community/forums/aspnet-mvc/grid/clajax-databinding-client-editing.aspx#1906385)

# unix - 具有可变长度参数的 shell 脚本

> ID：10656639
> 
> 赞同：1
> 
> 时间：2012-05-18T16:47:25.710
> 
> 标签：unix, command-line-arguments

如何将 shell 脚本的整个参数列表传递给程序？

例如，如果我有一个名为 JavaFoo 的 Java 程序，它可以接受任意数量的参数，这应该在我的脚本中调用。

如何将脚本的参数传递给 java 程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:51:19.967

在 Bash 中：

```
#!/usr/bin/env bash
java /path/to/JavaFoo "$@" 
```

将所有参数单独引用为传递给 Bash 脚本本身。也适用于 Dash，但我不知道其他与 Bourne 兼容的 shell。

假设您想将除第一个参数之外的所有参数传递给 Java 程序的 shell 脚本，使用`shift`如下：

```
#!/usr/bin/env bash
shift
java /path/to/JavaFoo "$@" 
```

`shift`如果需要，在传递参数之前使用更多实例来删除更多参数。

假设你调用 shell 脚本 ( `myscript`) 如下：

```
./myscript a b c 
```

将`shift`摆脱`a`。再加一个`shift`，它也摆脱了`b`。`"$@"`即使您可以像`$0`在许多 shell 中一样访问它，脚本本身的名称也不包括在内。

# c# - 如何异步处理集合的集合？

> ID：10656642
> 
> 赞同：1
> 
> 时间：2012-05-18T16:47:37.940
> 
> 标签：c#, multithreading

过去，我很容易通过使用 PLINQ 将 for 循环变成多任务速度恶魔。

但是，由于处理集合的集合，我遇到了困难。

我可能会自己解决这个问题，但我认为看看其他人如何解决这个问题也会很有用。

**更新**：我确信下面的代码存在概念性问题，但我无法完全用语言表达。如果有人能看到我在说什么，那太好了，但我会更多地考虑这一点，并尝试使问题整体变得更好（或者如果我意识到这完全是我的错误，则将其删除）

以下是主要逻辑：

```
 public static void Execute()
    {
        var service = Locator.Get<ICakeService>();
        using (var db = new Cake.Model.CakeContainer())
        {
            foreach (var campaigns in service.ExportCampaigns())
            {
                // --> THIS LOOP SHOULD BE EXECUTED IN A SEPARATE THREAD
                foreach (var campaign in campaigns)
                {
                    // ... logic to process a campaign ...
                }
            }
        }
    } 
```

这是服务：

```
 public IEnumerable<campaign[]> ExportCampaigns()
    {
        campaign[] result = null;
        var service = new exportSoapClient("exportSoap");
        // --> IF I DO A PARALLEL FOREACH HERE THE CLIENT CODE ABOVE 
        // STOPS MAKING SENSE TO ME...
        foreach (var offer in this.ExportOffers())
        {
            var response = service.Campaigns(
                                api_key: this.apiKey,
                                offer_id: offer.offer_id);
            yield return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:04:00.133

并行化的另一种选择是

```
Parallel.Foreach(service.ExportCampaigns(), campaigns =>
{
    // --> THIS LOOP will be run in multiple threads at the same time

    foreach (var campaign in campaigns)
    {
        // ... logic to process a campaign ...
    }
}); 
```

如果内部`foreach`工作量太少，这可能是比[esskar 的解决方案](https://stackoverflow.com/a/10656708/80274)更好的选择。

这是一个没有 lambdas 的版本

```
public static void Execute(Action<campaign[]> action)
{
    var service = Locator.Get<ICakeService>();
    using (var db = new Cake.Model.CakeContainer())
    {
        Parallel.Foreach(service.ExportCampaigns(), action);
    }
}

//This method will be executed in parallel for each element in the IEnumerable<campaign[]>.
private void ProcessCampaigns(campaign[] campaigns)
{
    foreach (var campaign in campaigns)
    {
        // ... logic to process a campaign ...
    }
}

// Call to Execute looks something like this:
command.Execute(ProcessCampaigns) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:53:02.397

使用 System.Threading.Task 中的[Parallel](http://msdn.microsoft.com/de-de/library/system.threading.tasks.parallel.aspx) Helper

```
Parallel.Foreach(campaigns, compaign => 
{
    // ... logic to process a campaign ...
}); 
```

编辑：这里有一个完整的例子

```
public static void Execute()
{
    var service = Locator.Get<ICakeService>();
    using (var db = new Cake.Model.CakeContainer())
    {
        foreach (var campaigns in service.ExportCampaigns())
        {
            ProcessCampaigns(campaigns);                
        }
    }
}

private void ProcessCampaigns(IEnumerable<Campaign>> campaigns)
{
    Parallel.Foreach(compaigns, ProcessCampaign);
}

private void ProcessCampaign(Campaign campaign)
{
    // ... logic to process a campaign ...
} 
```

# ruby - 从包含数组的 JSON 中获取数据

> ID：10656646
> 
> 赞同：0
> 
> 时间：2012-05-18T16:48:12.220
> 
> 标签：ruby, json

我将以下 JSON 返回到 Ruby RestClient 发布请求：

```
{"importResults":[{"status":"success","id":"ed2a89538d84eff5b92b5baad1fb5a4e"}]} 
```

我正在尝试检索状态（成功）和 id（ed2a89538d84eff5b92b5baad1fb5a4e）。

我尝试了以下代码：

```
jdoc = JSON.parse(jsonAbove)
status = jdoc.fetch("importResults").fetch("status") 
```

这给了我错误`TypeError: can't convert String into Integer`。

我知道这是因为响应中有一个数组，我收到了这个错误，但我似乎无法正确处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:51:12.080

正如许多其他人已经说过的那样，您需要`first`在您的请求中。

```
status = jdoc.fetch("importResults").first.fetch("status") 
```

看起来你是新手。我建议使用 irb 来解决问题。例如，您可以键入`s = jdoc.fetch("importResults")`并查看结果。然后，您可以`s`在控制台中使用该变量，看看有什么用。 `s.first`,`s.class`等`s[0]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:50:14.833

对，所以它是一个数组。获取它的第一个（或另一个适当的）元素并继续。

```
status = jdoc.fetch("importResults").first.fetch("status")
#                                      ^^ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T16:51:07.203

那是因为您需要从数组中获取第一项。改变这个：

```
status = jdoc["importResults"].first["status"] 
```

或者：

```
status = jdoc["importResults"][0]["status"] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T16:51:16.430

你需要

```
status = jdoc.fetch("importResults").first.fetch("status") 
```

# java - Java 正则表达式匹配字符串

> ID：10656651
> 
> 赞同：0
> 
> 时间：2012-05-18T16:48:55.730
> 
> 标签：java, regex

基本上我正在尝试匹配Java中字符串中的字符串。例如，我想匹配“hello！there！hello！”中的“hello”，匹配所有的 hello。

我目前有这个，但它不工作：

```
if(word.matches(wordToMatch)) {
word = word.replaceAll(wordToMatch, plugin.greenyPhrases.get(wordToMatch));
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:51:42.080

你有没有尝试过

```
String word = "hello!there!hello!";
word = word.replaceAll("hello", "replaced"); 
```

编辑：继承人完整的字符串类符号：[http ://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:01:27.633

如果你想通过matches方法使用正则表达式引擎，你需要使用.*

```
String word = "hello!there!hello!";
String requestedWord = "hello"

if( word.matches( ".*" + requestedWord + ".*" ) )
{
    System.out.println( " This will be printed " );
} 
```

最好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:52:27.907

您可以使用 Matcher.find() 来执行此操作

# django - 从 django list_filter 中删除重复项

> ID：10656653
> 
> 赞同：2
> 
> 时间：2012-05-18T16:49:02.760
> 
> 标签：django, django-admin

我在 django admin 中对相关对象的字段使用列表过滤器。

```
class A(models.Model):
   #..
   pass
class B(models.Model):
   fk = models.ForeignKey(A)
   val models.CharField(max_length=1) 
```

在 admin 中`A`，我正在尝试`list_filter`on `B__val`，但结果是`A`为每个`B`满足过滤器值的内容列出了 duplicate 。

有没有一种简单的方法可以拦截查询结果以删除重复项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:08:46.833

管理源确实尝试添加`.distinct()`，但由于某种原因错过了它（一定是错误？）。

我通过以下方式获得了我正在寻找的行为：

```
class NoDuplicates(ChangeList):
    def __init__(self, *args):
        super(NoDuplicates,self).__init__(*args)

    def get_query_set(self):
        return super(NoDuplicates,self).get_query_set().distinct()

class AAdmin(admin.ModelAdmin):
    def get_changelist(self, request, **kwargs):
        return NoDuplicates

    list_filter = [ B__val ] 
```

# java - 移除 JProgressBar 的不确定模式

> ID：10656658
> 
> 赞同：1
> 
> 时间：2012-05-18T16:49:26.443
> 
> 标签：java, swing, jprogressbar

当按下开始按钮时，我启动我的进度条，当我的任务完成时，我调用我试图停止进度条的不确定模式的函数，但我仍然无法做到这一点（我正在使用`SwingWorker`我的应用）

这是我启动进度条的代码；这段代码写在开始按钮内：

```
private void StartButtonMouseClicked(java.awt.event.MouseEvent evt) {
    Main f22 = new Main();

    f2.getfile(FileName, 0);
    f2.execute();

    SwingUtilities.invokeLater(new Runnable()
    {
        @Override
        public void run()
        { 
            jProgressBar1.setIndeterminate(true);

        }
    }); 
```

这是函数内部的代码，一旦任务完成就会调用。

```
jProgressBar1.setVisible(false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:39:29.633

请尝试通过此代码，它是 JProgressBar 与 SwingWorker 的工作代码，然后一旦您了解它的工作原理，请随时以您的方式实现它。

```
 import java.awt.*;

 import java.awt.event.*;

 import java.util.List;

 import javax.swing.*;

 public class ProgressBarTest
 {
    public static void main(String[] args)
    {
       EventQueue.invokeLater(new Runnable()
          {
             public void run()
             {
                JFrame frame = new ProgressBarFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
             }
         });
    }
 }

 /**
 * A frame that contains a button to launch a simulated activity, a progress bar, and a
  * text area for the activity output.
  */
 class ProgressBarFrame extends JFrame
 {
    public ProgressBarFrame()
    {
       setTitle("ProgressBarTest");
       setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT);

       // this text area holds the activity output
       textArea = new JTextArea();

       // set up panel with button and progress bar
       final int MAX = 1000;
       JPanel panel = new JPanel();
       startButton = new JButton("Start");
       progressBar = new JProgressBar(0, MAX);
       progressBar.setStringPainted(true);
       panel.add(startButton);
       panel.add(progressBar);

       checkBox = new JCheckBox("indeterminate");
       checkBox.addActionListener(new ActionListener()
          {
             public void actionPerformed(ActionEvent event)
             {
                progressBar.setIndeterminate(checkBox.isSelected());
                progressBar.setStringPainted(!progressBar.isIndeterminate());
             }
          });
       panel.add(checkBox);
       add(new JScrollPane(textArea), BorderLayout.CENTER);
       add(panel, BorderLayout.SOUTH);

       // set up the button action

       startButton.addActionListener(new ActionListener()
         {
             public void actionPerformed(ActionEvent event)
             {
                startButton.setEnabled(false);
                activity = new SimulatedActivity(MAX);
                activity.execute();
             }
          });
    }

    private JButton startButton;
    private JProgressBar progressBar;
    private JCheckBox checkBox;
    private JTextArea textArea;
    private SimulatedActivity activity;

    public static final int DEFAULT_WIDTH = 400;
    public static final int DEFAULT_HEIGHT = 200;

    class SimulatedActivity extends SwingWorker<Void, Integer>
    {
       /**
        * Constructs the simulated activity that increments a counter from 0 to a
        * given target.
        * @param t the target value of the counter.
        */
       public SimulatedActivity(int t)
       {
          current = 0;
          target = t;
       }
       protected Void doInBackground() throws Exception
       {
         try
          {
             while (current < target)
             {
                Thread.sleep(100);
                current++;
                publish(current);
             }
          }
          catch (InterruptedException e)
          {
          }
          return null;
       }

       protected void process(List<Integer> chunks)
       {
          for (Integer chunk : chunks)
          {
             textArea.append(chunk + "\n");
             progressBar.setValue(chunk);
          }
       }

       protected void done()
       {
         startButton.setEnabled(true);
      }

      private int current;
       private int target;
    }
 } 
```

# twitter - ios 5 推特初始登录

> ID：10656661
> 
> 赞同：0
> 
> 时间：2012-05-18T16:49:55.300
> 
> 标签：twitter, ios5

在 ios5 中使用 twitter api 我如何开始让用户登录？如果用户已经在设备上登录，我会看到它是如何使用 accounts.h 工作的，但是如果还没有登录的 Twitter 帐户，有没有办法让用户进入设置 twitter 屏幕进行登录？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:22:07.333

如果在设置中没有添加设备上的帐户，则使用此代码，它将转移到设置页面

```
-(void)postOnTwitter:(id)sender
{
    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
    [twitter addImage:self.imgView.image];
    [twitter setInitialText:@"Photo From Application on iPhone"];
    [self presentModalViewController:twitter animated:NO];

    twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) 
    {
        [self dismissModalViewControllerAnimated:YES];
    };

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:44:30.117

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=TWITTER"]];`或者您可以在 iOS 5.0中转到设置页面（**但在 iOS 5.1 中它不应该工作）**

为了那个原因

这有点棘手，我通过删除子视图得到`*TWTWeetComposeViewController*`，所以它只在用户未登录时显示警报，通过点击设置按钮，我们可以在我的应用程序中打开设置页面。

```
 + (void)setAlertForSettingPage :(id)delegate 
{
 // Set up the built-in twitter composition view controller.
    TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

    // Create the completion handler block.
    [tweetViewController setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
        [delegate dismissModalViewControllerAnimated:YES];
    }];

    // Present the tweet composition view controller modally.
    [delegate presentModalViewController:tweetViewController animated:YES];
    //tweetViewController.view.hidden = YES;
    for (UIView *view in tweetViewController.view.subviews){
        [view removeFromSuperview];
    } 
```

}

在这里， deleate 是您的视图控制器，如果您在视图控制器中使用此方法，只需使用`self`而不是`delegate`.

# php - 在 IIS 上运行 PHP - 文件权限正确但上传不起作用

> ID：10656662
> 
> 赞同：0
> 
> 时间：2012-05-18T16:49:59.113
> 
> 标签：php, iis, permissions

我正在将 wordpress 安装从 XAMPP 移动到运行 PHP 并运行到此的 IIS 服务器。

按照托管公司的指示，我的两个 Plesk 用户的文件权限都设置为这个（我要求提供与 chmod 755 等效的权限）： ![文件权限](../Images/f65b6a4bd5007468718b8392d4d11bd1.png)

不过，这不适用于任何文件/插件上传。我每次都遇到这个错误：

> 警告：touch() [function.touch]：无法创建文件 C:\Inetpub\vhosts\zzzzz.com\httpdocs\oly/wp-content/slide1.tmp 因为权限在 C:\Inetpub\vhosts\zzzzz 中被拒绝。 com\httpdocs\oly\wp-admin\includes\file.php 在第 177 行

我已经检查过了，我的 php.ini 似乎没问题`file_uploads`（on）`upload_max_filesize`和`post_max_size`（每个 20M）。也`safe_mode`关了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:06:13.210

PHP 似乎抱怨在`C:\Inetpub\vhosts\zzzzz.com\httpdocs\...\wp-content/`目录中写入，因为屏幕截图显示`...\httpdocs\...\wp-content/uploads`了子文件夹的设置。

检查正在写入文件的文件夹的权限。看截图，我可以猜到父目录没有为 IIS 匿名用户/工作进程设置权限。

# java - 如何使用 JSF 实现 JQuery 确认对话框

> ID：10656664
> 
> 赞同：1
> 
> 时间：2012-05-18T16:50:01.980
> 
> 标签：java, javascript, jsf, jsf-2, jquery-ui-dialog

当我按下按钮进入 JSF 页面时，我想使用 JQuery 对话框以确认操作执行（在我的情况下是确认删除行）。我发现这个 JQuery 代码运行良好：

```
<html>
    <head>
        <title>jQuery UI Example Page</title>
        <link type="text/css" href="css/custom-theme/jquery-ui-1.8.18.custom.css" rel="stylesheet" />   
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
        <script type="text/javascript">
            $(function(){

                // Accordion
                $("#accordion").accordion({ header: "h3" });

                // Tabs
                $('#tabs').tabs();

                // Dialog           
                $('#dialog').dialog({
                    autoOpen: false,
                    width: 600,
                    buttons: {
                        "Ok": function() { 
                            $(this).dialog("close"); 
                        }, 
                        "Cancel": function() { 
                            $(this).dialog("close"); 
                        } 
                    }
                });

                // Dialog Link
                $('#dialog_link').click(function(){
                    $('#dialog').dialog('open');
                    return false;
                });

                // Datepicker
                $('#datepicker').datepicker({
                    inline: true
                });

                // Slider
                $('#slider').slider({
                    range: true,
                    values: [17, 67]
                });

                // Progressbar
                $("#progressbar").progressbar({
                    value: 20 
                });

                //hover states on the static widgets
                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); }, 
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            });
        </script>
        <style type="text/css">
            /*demo page css*/
            body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
            .demoHeaders { margin-top: 2em; }
            #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
            #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
            ul#icons {margin: 0; padding: 0;}
            ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
            ul#icons span.ui-icon {float: left; margin: 0 4px;}
        </style>    
    </head>
    <body>

        <!-- Dialog NOTE: Dialog is not generated by UI in this demo so it can be visually styled in themeroller-->
        <h2 class="demoHeaders">Dialog</h2>
        <p><a href="#" id="dialog_link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a></p>

        <!-- ui-dialog -->
        <div id="dialog" title="Dialog Title">
            <p>Dialog Test</p>
        </div>

    </body>
</html> 
```

问题是我需要从这个按钮调用对话框到 Java Server Faces 页面：

```
<h:commandButton value="Delete" action="#{bean.deleteid}" >
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

你能帮我实现这个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:13:16.237

这是我使用的一种方法

你需要两个按钮

第一个将被隐藏并在单击`Yes`确认对话框时被调用，此隐藏按钮将调用服务器端方法并`render`使用`f:ajax`

```
<h:commandButton id="myHiddenButtonID" value="DeleteHiddenButton" action="#{bean.deleteid}" style="display:none">
    <f:ajax render="@form" ></f:ajax>
</h:commandButton> 
```

现在到将打开对话框的按钮，此按钮还将向服务器提交表单`execute="@form"`（例如，如果您有选择列）

```
<h:commandButton value="Delete">
    <f:ajax execute="@form" onevent="openDialogFunc()"></f:ajax>
</h:commandButton> 
```

现在到js函数的实现

```
function openDialogFunc(data){
    if (data.status === 'success') {
        $('#dialog').dialog({
             autoOpen: false,
             width: 600,
             buttons: {
                 "Ok": function() { 
                     $("#myHiddenButtonID").click();
                     $(this).dialog("close"); 
                 }, 
                 "Cancel": function() { 
                     $(this).dialog("close"); 
                 } 
             }
         });
    }
} 
```

请注意，只有在单击“确定”对话框按钮时，才会执行隐藏按钮，`$("#myHiddenButtonID").click();`否则不会发生任何事情......

但我真的强烈建议您使用`h:head`而不是`head`和`<h:panelGroup`而不是 div ...看看我之前的示例... [JSF 中的 jQuery Dialog](https://stackoverflow.com/a/9439565/617373)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:03:08.357

如果你必须调用它说点击命令按钮然后使用`onclick`事件

```
<h:commandButton value="Delete" action="#{bean.deleteid}" onclick="return myjavascriptmethod">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

然后在对话框中，您可以检查确认条件，点击 Okay dispatch the event。

编辑根据评论：

当您不想使用 div 时，我只是使用了面板 Grid，您可以执行以下操作：

xhtml

```
<h:panelGrid id="panelGridAsDialogTest" style="display:none;">
        <h:outputLabel value="I Am a dialog test" />
    </h:panelGrid>
var alreadyValidated = false;
function testJQueryDialog(buttonReference){
    if(!alreadyValidated) {                
    $('#panelGridAsDialogTest').dialog({
            autoOpen: true,
            width: 600,
            buttons: {
                "Ok": function(event) { 
                    $(this).dialog("close"); 
                    alreadyValidated = true;
                    jQuery(buttonReference).trigger("click");
                }, 
                "Cancel": function(event) { 
                    event.preventDefault();
                    $(this).dialog("close"); 
                } 
           }
       });
    }
    return alreadyValidated;
} 
```

如果您想坚持使用 div 但让您的代码正常工作，您可以使用上面给出的相同 javascript，并将 id 替换为 div id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-07T14:15:23.267

一个更简单的方法是不使用 jquery dailog 来确认消息，只需在**onclick**中使用普通的 javascript 确认框，无需重新发明轮子：

```
<h:commandButton value="Delete" action="#{bean.deleteid}" onclick="return confirm('Are you sure you want to delete this?')">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

您必须添加**return**否则 jsf 将忽略用户从确认框中选择的内容，因此如果用户说单击取消，删除功能仍将执行。

# c# - 定义静态方法的更好方法

> ID：10656665
> 
> 赞同：5
> 
> 时间：2012-05-18T16:50:10.433
> 
> 标签：c#, generics, static, lambda, extension-methods

我面临在我的基类上创建一个静态方法的要求，但不喜欢我必须声明类型参数，所以我想知道我是否以正确的方式去做。

基本上，我正在分配我将与类上的属性相关联的代表。我可以轻松地将方法放在继承的类上，如下所示：

```
public class Foo 
{
   public string Property1 { get; set; }
}

public class InheritsFoo : Foo 
{
    public void AssignDel<TVal>(
        Expression<Func<InheritsFoo, TVal>> expr, 
        Action<InheritsFoo, TVal> action) 
    {
    }
} 
```

或者，在扩展类中，我可以这样做：

```
public static void AssignDel<T, TVal>(
    this T source, 
    Expression<T, TVal>> expression, 
    Action<T, TVal> action) 
    where T : Foo 
{
} 
```

这两个都可以让我`AssignDel`在实例化类中使用：

```
var foo = new InheritsFoo();
foo.AssignDel(x => x.Property1, handler); 
```

但我有一个要求，使`AssignDel`静态。这使得这样做的扩展方式毫无用处。它仍然适用`InheritsFoo`，但我真的很想把它移到基类中。如果我尝试，则无法推断泛型参数，我必须更改方法的用法：

```
InheritsFoo.AssignDel<InheritsFoo, string>(x => x.Property1, handler); 
```

这里有没有办法，另一种我没有想到的方法？

编辑：为了解决关于扩展方法是否/应该工作的评论中的问题......我去了@Mark M引用的网址。事实证明，如果我这样写......

```
InheritsFoo foo = null;
foo.AssignDel(x => x.Property1, handler); 
```

编译（虽然不知道它是否会运行）。不过，不要认为这符合使用静态方法的条件，因为 'foo' 仍然被认为是一个实例；一个空实例，但仍然是一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:29:19.013

扩展方法已经是静态的。

假设您不必以扩展方法的方式使用它，这应该可以：

```
InheritsFoo.AssignDel(x => x.Property1, handler); 
```

以同样的方式，编译器将为扩展方法形式推断类型参数，它将为老式的静态方式推断。

如果您需要具有两个类型参数的方法，您可以为此创建一个泛型类：

```
public class Foo<T> where T : Foo {

    public void AssignDel<TVal>( Expression<Func<T, TVal>> expr, Action<T, TVal> action) 
    {
         //...
    }
} 
```

在这种情况下，您可以这样做：

```
Foo<InheritFoo>.AssignDel(x => x.PropertyFromInheritFoo, handler); 
```

如您所见，您只需要声明一个类型参数，另一个正在推断。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:24:57.317

> 但我需要将 AssignDel 设为静态。这使得这样做的扩展方式毫无用处。它在 InheritsFoo 中仍然有效，但我真的很想把它移到基类中。如果我尝试，则无法推断泛型参数，我必须更改方法的用法：

这没有多大意义。

`InheritsFoo.AssignDel`是一种静态方法。

你通过这样做来调用所说的静态方法`InheritsFoo.AssignDel<InheritsFoo, string>(x => x.Property1, handler);`似乎符合你的要求。

我不明白您提出的第二个选项有什么问题。它做了你需要做的事情，很清楚正在发生什么，真的是因为你通过`InheritsFoo`而`string`不是`foo.AssignDel(x => x.Property1, handler);`？

看来您可以简单地执行以下操作并实现您想要的。

```
 public class Foo 
    {
       public string Property1 { get; set; }
    }

    public class InheritsFoo : Foo 
    {
        public static void AssignDel<TVal>(
            Expression<Func<InheritsFoo, TVal>> expr, 
            Action<InheritsFoo, TVal> action) 
        {
        }
    } 
```

我一定遗漏了一些东西，因为看起来你会使用它`InheritsFoo.AssignDel(x => x.Property1, handler);`正是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:27:13.573

通过在继承链中实现另一个级别，我设法完成了我需要的工作。

```
public class Foo  
{    
   public string Property1 { get; set; } 
} 

public class Foo<T> : Foo
{
   public static void AssignDel<TVal>(Expression<Func<T, TVal>> expr, Action<T, TVal> action)
   {   }
}

public class InheritsFoo : Foo<InheritsFoo>
{     } 
```

我可以根据需要处理 InheritsFoo。

# mysql - mysql数据库结构

> ID：10656668
> 
> 赞同：1
> 
> 时间：2012-05-18T16:50:14.670
> 
> 标签：mysql, database

我有这个学校管理项目。问题是每年我都必须手动创建一个新数据库来保存所有学生、教师记录（个人资料和成绩）。现在我正在考虑创建一个中央数据库来保存所有一年中不变的数据，那么每年都应该有一个数据库来保存学生的年度记录。这是一个好的数据库结构想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:21:57.460

我根本不会为年度记录创建一个全新的数据库。在不知道您需要存储的实际数据的情况下（您可以提供的详细信息越多越好），通常我会设置一个数据库来容纳所有数据（静态*和*动态），并使用记录本身来区分年份/班级/学生/老师。如：

```
table `teachers`
----------------
id
first name
last name
email
phone
...

table `students`
----------------
id
first name
last name
year
email
...

table `classes`
---------------
class_id
class_name
class_description
....

table `teacher_classes`
-----------------------
year
class_id
teacher_id
...

table `student_classes`
-----------------------
year
class_id
student_id
grade
... 
```

等等。那么您不必每年都创建新的表/数据库；您只需在适当的表中输入新记录并将它们关联起来。

# excel - 使用 Excel VBA 在行和列之间进行单元格引用，并在列之间进行跳转

> ID：10656671
> 
> 赞同：0
> 
> 时间：2012-05-18T16:50:18.920
> 
> 标签：excel, vba

我之前尝试过将行引用到列/列到行。它们并不完美，但它们很有效。但是，当它跳跃时我遇到了麻烦，我真的需要帮助。

![在此处输入图像描述](../Images/a6e84916bff2dacf0f7e670ffcb12462.png)

我的代码没有返回错误，但只有 1 个单元格具有值“=”。

![在此处输入图像描述](../Images/6b32d416eca64808390ab493d1bd9b6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:09:25.673

这对你有用吗：

*添加了用户需要引用单元格的因素，而不仅仅是单元格值。

```
Sub Row2ColumnReferance()

Dim rRangeCopy As Range, CRangePaste As Range
Dim jump As Integer

'get input
Set rRangeCopy = Application.InputBox("Select Copy Range", "Transform", Type:=8)
Set CRangePaste = Application.InputBox("Select Destination Range", "Transform", Type:=8)
jump = Application.InputBox("Enter")

Dim cel As Range, intCnt As Integer

'place new cells
intCnt = 1
For Each cel In rRangeCopy
    CRangePaste.Cells(intCnt, 1).Formula = "=" & cel.Address(False, False)
    intCnt = intCnt + 1
Next

Dim intRows As Integer

'insert space
intCnt = CRangePaste.Rows.Count
For intRows = intCnt To 2 Step -1
    Range(CRangePaste.Cells(intRows, 1), CRangePaste.Cells(intRows + jump - 1, 1)).Insert shift:=xlDown
Next

End Sub 
```

# php - CodeIgniter 自定义库错误：调用非对象上的成员函数

> ID：10656673
> 
> 赞同：3
> 
> 时间：2012-05-18T16:50:32.993
> 
> 标签：php, codeigniter

我正在尝试构建一个自定义库，其中包含可通过整个站点使用的功能。在里面`/application/libraries`我做了一个新文件`CustomFuncts`：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * @brief CommonFuncts      
 * This class is used to provide common user functions to the whole application.
 *
 * @version 1.0
 * @date May 2012
 *
 * 
 */
class CommonFuncts extends CI_Controller {

 protected $ci;

/**
 * function constructor
 */
function __construct()
{
    $this->ci =& get_instance();
}
 /**
* @brief checkCookie
* 
* Checks for a previous cookie, and if exists:
* @li Loads user details to CI Session object.
* @li Redirects to the corresponding page.
* 
*/
public function verificaCookie(){
    $this->ci->load->view('index');
}
 }
/* End of file CommonFuncts.php */
/* Location: ./application/libraries/CommonFuncts.php */ 
```

在控制器中`welcome.php`：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Welcome extends CI_Controller {

/**
 * Index Page for this controller.
 *
 * Maps to the following URL
 *      http://example.com/index.php/welcome
 *  - or -  
 *      http://example.com/index.php/welcome/index
 *  - or -
 * Since this controller is set as the default controller in 
 * config/routes.php, it's displayed at http://example.com/
 *
 * So any other public methods not prefixed with an underscore will
 * map to /index.php/welcome/<method_name>
 * @see http://codeigniter.com/user_guide/general/urls.html
 */
public function index()
{
    $this->load->library('commonFuncts');
    $this->commonFuncts->verificaCookie();  
}
}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */ 
```

我收到以下错误消息：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Welcome::$commonFuncts

Filename: controllers/welcome.php

Line Number: 23

Fatal error: Call to a member function verificaCookie() on a non-object in
/var/www/vhosts/unikodf.com/httpdocs/application/controllers/welcome.php on line 23 
```

我尝试了很多东西，包括在库中扩展`CI_Controller`和使用`$this->load->view' instead of`$this->ci->load->view`，但我仍然收到相同的消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T06:11:28.977

如果您的库扩展`CI_Controller`. 这意味着您实际上是在扩展控制器的功能。而是像这样声明您的库：

```
class CommonFuncts { } 
```

您不需要继承 from `CI_Controller`，因为您正在编写库而不是控制器，并且库不是 MVC 模型的一部分。它是扩展框架功能、修复常见问题或具有许多控制器使用的功能的单个类。

***要访问它的方法，请使用：***

```
$this->load->library('CommonFuncts');
$this->commonfuncts->verificaCookie(); 
```

**如果要简化调用库的名称，请使用：**

```
// The second argument is the optional configuration passed to the library
// The third argument is the name with which you would like to access it
$this->load->library('CommonFuncts', '', 'common');
$this->common->verificaCookie(); //  /\ = configuration
//     /\/\/\ = name 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:57:21.303

您将[controllers](http://codeigniter.com/user_guide/general/controllers.html)与[library](http://codeigniter.com/user_guide/general/creating_libraries.html)混淆了。

自定义库*不应*扩展 CI_Controller。[该文档概述了如何创建您自己的自定义库](http://codeigniter.com/user_guide/general/creating_libraries.html)。

其次，您需要先加载库，然后才能访问其方法：

```
$this->load->library('CommonFuncts');
// The "CommonFuncts" library is now ready to use
$this->commonFuncts->verificaCookie(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T06:05:16.670

这里有一些在 CI 中创建自定义库的好教程

[创建库](http://codeigniter.com/user_guide/general/creating_libraries.html)

[使用 CodeIgniter 库](http://codeigniter.com/user_guide/general/libraries.html)

[CodeIgniter - 表单：创建菜单库](http://www.phpeveryday.com/articles/CodeIgniter-Form-Creating-Menu-Library-P230.html)

[使用 CodeIgniter 构建：使用库](http://eeinsider.com/articles/building-with-codeigniter-codeigniter-libraries/)

[创建一个简单、可扩展的 CodeIgniter 身份验证库](http://nelsonwells.net/2010/05/creating-a-simple-extensible-codeigniter-authentication-library/)

[在 CodeIgniter 中创建自己的库](http://blog.zeratool.net/2008/02/03/creating-your-own-library-in-codeigniter/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-16T13:26:39.437

这里我想修改一件事（我使用的是代码点火器 2.1.3）：

```
//回显 CI_VERSION; 获取代码点火器版本
请使用
$this->commonfuncts->verificaCookie(); //f 在这里比较小
代替
$this->commonFuncts->verificaCookie();
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-31T15:02:46.850

您的构造函数不正确。你用过：

```
$this->ci =& get_instance();  //This is invalid syntax. 
```

分配`codeIgniter`给一个变量并在 codeigniter 的资源上使用该变量

```
class exampleClass{
    protected $codeIgniter;

    public function __construct()
    {
        $this->codeIgniter =& get_instance();
        $this->codeIgniter->load->helper('url');
        $this->codeIgniter->config->item('base_url');

    }
} 
```

# visual-studio-2010 - 我可以在 Visual Studio 中更改 XML 注释模板吗？

> ID：10656676
> 
> 赞同：9
> 
> 时间：2012-05-18T16:50:46.583
> 
> 标签：visual-studio-2010, visual-studio, xml-comments

我想在`<tag>`Visual Studio 2010 提供的 XML 注释标签的“标准”模板中添加一两个。当我输入`///`我的源代码时，我希望在插入的注释块中看到默认标签中包含的新标签. 如何在 C# 环境中执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T05:29:49.990

我们在过去（针对我们的一位客户）对这个主题进行了一些研究，虽然 XML 注释模板可以为 VB 定制 - 请参阅[Lisa Feigenbaum 的帖子](http://msdn.microsoft.com/en-us/magazine/dd722812.aspx)- 这不适用于 C#。

Lisa 和 Visual Studio 团队的人员证实，该技巧在 VS10 的 C# 中不起作用。

有请求将此添加到 VS11 中的 C# 编辑器。如果您希望该功能进入 VS，请在此处投票 - [http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2709987-xml-comments-schema-customization-in-c-](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2709987-xml-comments-schema-customization-in-c-)

与此同时，我们的客户选择使用我们的[GhostDoc Pro](http://submain.com/ghostdoc/)产品，因为它允许使用 T4 模板进行任何 XML 注释自定义。

# powershell - Powershell：在后台而不是前台运行计划任务脚本

> ID：10656688
> 
> 赞同：2
> 
> 时间：2012-05-18T16:51:45.003
> 
> 标签：powershell, scheduled-tasks, background-process

我正在使用 Windows“计划任务”来运行带有参数的 powershell 脚本。

由于某种原因，它在后台而不是前台执行。我希望能够看到它正在执行......它需要 1 个多小时才能完成，我想观察它的进度。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T19:15:08.130

我能想到的两个可能的原因：

*   选择“无论用户是否登录都运行”选项
*   参数 -WindowStyle 隐藏在指定的 powershell.exe 上。

如果两者都不是，那么我不知道可能是什么原因。也许其他一些隐藏 PowerShell 窗口的脚本元素？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T19:49:34.580

它是 Windows Server 还是 Windows 7 机器？

在 Windows Sever 任务计划程序中，以无用户模式启动应用程序（除非在策略中指定），而在 Windows 7 中，计划程序在系统帐户中启动应用程序。这可能是 Windows 被隐藏的原因。

此外，如果您的脚本需要一个小时来运行显示 PS 窗口不是一个好主意，您可以将 PS 输出路由到文本文件并检查文件详细信息以在需要时监控进度。

# python - 查询并获取信息 2 backrefs deep

> ID：10656690
> 
> 赞同：0
> 
> 时间：2012-05-18T16:51:47.563
> 
> 标签：python, orm, sqlalchemy

`many-many`我在用户和拍卖之间有一张名为`placedBids`.

我正在从拍卖中查询，所以我`placedBids`也调用了 backref，`placedbids`所以我可以从拍卖中访问它，然后我可以得到例如已`userid`放置的出价，但我真的想要它，所以我在和调用`username`之间的关系中创建了一个 backref （这个我改变了，因为已经有另一个名为 的 backref ，尽管可能存在一些问题）尝试这样做，我是新手，我尝试了很多事情，甚至在backref 中急切加载也无济于事。`user``placedbids``userbids``users``sqlalchemy``userbids`

这是我的最后一个查询：

```
auction = dbsession.query(Auction.id, Auction.endTime, Auction.currentPrice, Product.description, Product.title, User.username, PlacedBids.timeplaced, PlacedBids.userbids.username).outerjoin(Auction.placedbids).join(Auction.products).outerjoin(Auction.leader).filter( Auction.id == request.matchdict['id']).all() 
```

错误：

> 2012-05-18T16:40:36+00:00 app[web.1]：AttributeError：“InstrumentedAttri bute”对象和“比较器”对象都没有属性“用户名”

我也尝试过加入喜欢`outerjoin(Auction.placedbids.userbids)`或`PlacedBids.userbids`等等......

我没有太多经验`sqlalchemy`，我可以做一个额外的查询来获得`username`我`user_id`可以毫无问题地获得，但我想知道如何在没有它的情况下进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:42:53.903

连接必须始终是显式的，并根据其实际父类指定引导实体属性。相关类之间没有“多点”访问——这意味着连接必须始终单独列出。

假设 PlacedBids.userbids 是 UserBid 的一个实例：

```
auction = dbsession.query(Auction.id, Auction.endTime, 
   Auction.currentPrice, Product.description, Product.title, User.username, 
    PlacedBids.timeplaced, UserBid.username).\
    outerjoin(Auction.placedbids).\
    join(Auction.products).\
    outerjoin(Auction.leader).\
    outerjoin(PlaceBids.userbids).\ 
    filter( Auction.id == request.matchdict['id']).all() 
```

# php - 无法通过 cURL 发送图像

> ID：10656692
> 
> 赞同：2
> 
> 时间：2012-05-18T16:51:49.293
> 
> 标签：php, curl, remote-server

由于某种原因，我无法通过 cURL 将图像发送到外部服务器。可能是一些小东西，但我一直在看这段代码几个小时，但仍然不知道出了什么问题......

```
$ch = curl_init();

$data = array(
    'fbid' => $userProfile['id'],
    'name' => $userProfile['name'],
    'email' => $userProfile['email'],
    'gender' => $userProfile['gender'],
    'title' => $_POST['title'],
    'original' => '@' . UPLOAD_PATH . $imageFilename,
    'thumbnail' => '@' . UPLOAD_PATH . $thumbnailFilename,
    'cropped' => '@' . UPLOAD_PATH . $croppedImageFilename
);

curl_setopt($ch, CURLOPT_URL, 'http://www.domain.com/curl.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_exec($ch); 
```

文本正在通过，如果我在远程服务器上打印出 $_POST 这就是我得到的......

```
Array (
    [fbid] => 12345
    [name] => My Name
    [email] => email@domain.com
    [gender] => male
    [title] => Image title
) 
```

任何帮助将不胜感激：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:18:13.670

忘记我的最后一个答案。太仓促了。我相信问题在于您正在 $_POST 中查找文件上传。文件上传包含在 $_FILES 中。

尝试将 $_FILES 的内容转储到远程服务器上。

# html - 在 chrome 中具有溢出自动的框布局

> ID：10656693
> 
> 赞同：1
> 
> 时间：2012-05-18T16:51:50.683
> 
> 标签：html, google-chrome, css, boxlayout

我在 chrome 中遇到了一个奇怪的错误，但在 firefox 中没有。我创建了一个尽可能简单的示例：

```
<html>
<head>
    <style>
        body
        {
            width:100%;
            height:100%;
            margin:0;
            padding:0;
            display:-webkit-box;
            display:-moz-box;
            -webkit-box-orient:vertical;
            -moz-box-orient:vertical;
        }
        .scrollable
        {
            -webkit-box-flex:1;
            -moz-box-flex:1;
            overflow:auto;
            background-color:red;
            display:-webkit-box;
            display:-moz-box;
        }
        .fixed
        {
            background-color:blue;
        }
        button:hover
        {
            background-color:red;
            opacity:.2;
        }
    </style>
</head>
<body>
<div class="fixed">
    <h1>Fixed</h1>
    <button>Test</button>
</div>
<div class="scrollable">
    <div>
        <h1>Scrollable</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ultrices nulla nec nulla vehicula a condimentum enim suscipit. Morbi accumsan est eget elit aliquet dictum bibendum ligula feugiat. Nam gravida sagittis luctus. Vestibulum cursus leo eu velit fermentum a commodo dolor imperdiet. Fusce non libero nec nisi molestie auctor et in est. Ut ac nibh est, vitae posuere velit. Quisque vulputate mattis sapien, interdum imperdiet purus placerat ornare. Aliquam erat volutpat. Phasellus est erat, suscipit non sollicitudin eget, porta et sem. Suspendisse tempor ullamcorper tellus, sed luctus magna auctor et. Sed et enim vel dolor eleifend eleifend sollicitudin at velit. Phasellus ac enim turpis. Phasellus lobortis nisi et augue sodales non fringilla tellus rutrum. Cras pretium metus facilisis metus viverra et commodo sapien viverra. Donec purus tellus, adipiscing ultricies interdum sed, aliquam feugiat nunc.</p>
        <button>Test</button>
    </div>
</div>
</body> 
```

本质上，我正在尝试创建一个布局，顶部有一个固定的标题，下面有一个可垂直滚动的部分，它填充了窗口的整个高度。这似乎在 chrome 和 firefox 中运行良好。我在 Chrome 中遇到的问题是按钮上的悬停效果导致窗格滚动回顶部。我的猜测是，悬停效果会导致疼痛再次出现，当它这样做时，它会滚动到顶部。

通过其他测试，它似乎是由一个带有溢出的框布局元素引起的：自动。

有没有其他人遇到过这个问题？有没有人对如何以不同方式执行此操作或修复它有任何建议？

谢谢！

**编辑：**

我正在尝试制作的完整布局是：

```
|---------------------------|
| Main Header               |
|---------------------------|
| Content Header   | Side   |
|------------------| Bar    |
|                  |        |
| Content          |        |
|                  |        |
----------------------------- 
```

我希望“内容”和“侧边栏”独立滚动。“内容”应水平和垂直滚动，而“侧边栏”应仅垂直滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:15:12.297

Dipak 提供的答案是一个很好的解决方案，除非有特定原因您宁愿拥有一个可滚动的 div 而不是使用浏览器的本机滚动。

我对此提出的唯一其他建议是，您确保可滚动的 div 有一个 padding-top 以弥补固定标题所覆盖的空间。

所以是这样的：

```
#header {
  position: fixed;
  height: 100px;
  width: 100%
  top: 0;
  left: 0;
}

.scrollable-div {
  display: block;
  padding-top: 100px;
} 
```

您可能需要额外的样式，但请注意您所掩盖的内容。此外，如果您需要可滚动的 div 在不使用固定标题的情况下工作，您应该在主体上进行填充或创建一个可以占用空间的空“填充”div。这样，随着您网站的发展，您不必担心单个元素；每次更改标题时，它将保持独立。

只是要记住的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:35:36.997

这里做了一些 CSS mods，它工作正常 - [http://jsfiddle.net/VHKbp/1/](http://jsfiddle.net/VHKbp/1/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:21:49.063

嗯，这有点吓人，但谷歌似乎刚刚发布了一个更新来解决这个问题。弹性框布局现在适用于我想要的布局。

# r - R合并重新排序行

> ID：10656697
> 
> 赞同：0
> 
> 时间：2012-05-18T16:52:11.923
> 
> 标签：r, merge

我有 2 个要合并的数据框。一个是 ID 号列表和每个 ID 号的完成百分比。第二个是一个更大的数据集，我想将 % 完成变量附加到。

Df1 看起来像这样：

```
> rowIdd <- data.frame(id=seq(1,1000000,1))
> rowIdd$adQuery1 <- factor(paste(proj3[1:1000000,"adid"], " | ", proj3[1:1000000,"queryid"], sep=""))
> head(rowIdd)
  id    adQuery1
1  1 9027213 | 5
2  2 9027213 | 5
3  3 9027213 | 1
4  4 9027213 | 5
5  5 9027213 | 5
6  6 9027213 | 5
> str(rowIdd)
'data.frame':   1000000 obs. of  2 variables:
 $ id      : num  1 2 3 4 5 6 7 8 9 10 ...
 $ adQuery1: Factor w/ 717927 levels "1000467 | 17284",..: 704056 704056 703739 704056 704056 704056 704110 704056 704056 704056 ... 
```

Df2 看起来像：

```
> rowIdd2 <- data.frame(adQuery1 = names(sumclick))
> rowIdd2$pCTR <- sumclick / sumimpress
> str(rowIdd2)
'data.frame':   717927 obs. of  2 variables:
 $ adQuery1: Factor w/ 717927 levels "1000467 | 17284",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ pCTR    : num [1:717927(1d)] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 1
  .. ..$ : chr  "1000467 | 17284" "1000467 | 34711" "1000471 | 173750" "1000479 | 1924662" ...
> head(rowIdd2)
            adQuery1 pCTR
1    1000467 | 17284    0
2    1000467 | 34711    0
3   1000471 | 173750    0
4  1000479 | 1924662    0
5      1000479 | 869    0
6 1000515 | 12208696    0 
```

当我尝试使用此代码合并 2 时：

```
> rowIdd3 <- merge(rowIdd, rowIdd2, by="adQuery1", sort=F,all.x=TRUE)
> nrow(rowIdd3)
[1] 1000000
> head(rowIdd3)
     adQuery1     id       pCTR
1 9027213 | 5      1 0.04567665
2 9027213 | 5      2 0.04567665
3 9027213 | 5 669222 0.04567665
4 9027213 | 5      4 0.04567665
5 9027213 | 5      5 0.04567665
6 9027213 | 5      6 0.04567665 
```

仅看第三行显然是错误的。

我需要最终合并的数据帧与第一个数据帧的顺序完全相同，因为它需要绑定到另一个数据帧。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T19:17:20.737

尝试：

```
rowIdd3[order(rowIdd3$id), ] 
```

# html - div在容器中并排

> ID：10656698
> 
> 赞同：1
> 
> 时间：2012-05-18T16:52:15.617
> 
> 标签：html, css

我正在尝试并排创建两个 div。我试图放入`float: left`和`.holder-left`放入`float: right`，`.holder-right`但它们漂浮在父持有者和内容 div 之外。

我该如何解决？

**CSS**

```
div.holder {
    margin: 10px 10px 0 10px;
    width: 1002px;
}

div.holder > div.holder-left {
    float: left;
}

div.holder > div.holder-right {
    float: right;
} 
```

**HTML**

```
<div class="holder">
    <div class="holder-left">
        aufgftf ftftfy
    </div>
    <div class="holder-right">
        afytf fttyfttyty
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:55:25.423

`div.holder`通过添加`overfow`属性来修改快速而肮脏的解决方案。这将允许外部 div 正确包裹内部浮动 div。我不记得为什么，但是这个解决方案有些古怪，所以请参阅下面的“clearfix”解决方案。

```
div.holder {
    margin: 10px 10px 0 10px;
    width: 1002px;
    overflow: hidden;
} 
```

* * *

虽然，您应该正确实施“clearfix”解决方案。（这里您不需要使用`overflow`如上所示的属性。）这是我使用的 clearfix 解决方案的 CSS：

```
.group:after{
    visibility: hidden;
    display: block;
    content: "";
    clear: both;
    height: 0;
}

* html .group{ zoom: 1; } /* IE6 */
*:first-child+html .group { zoom: 1; } /* IE7 */ 
```

然后更改浮动 div 的 HTML，如下所示。您需要做的就是将`group`类添加到包含浮动元素的 div 中。这将确保浮动 div 完全保持在外部 div 内。

```
<div class="holder group">
    <div class="holder-left">aufgftf ftftfy</div>
    <div class="holder-right">afytf fttyfttyty</div>
</div> 
```

[这是此 clearfix 解决方案的来源。](http://perishablepress.com/new-clearfix-hack/)

# c++ - 单元测试采用“特征”模板参数的对象

> ID：10656706
> 
> 赞同：3
> 
> 时间：2012-05-18T16:52:54.333
> 
> 标签：c++, unit-testing, googletest, googlemock

我有一个 Visual Studio 2008 C++03 项目，我想在其中对一个使用公开静态方法（基于策略的设计、策略模式）的特征模板参数的类进行单元测试。我正在使用 Google Test 和 Google Mock 框架。

例如：

```
/// the class under test
template< typename FooTraits >
class Foo
{
public:
    void DoSomething()
    {
        FooTraits::handle_type h = FooTraits::Open( "Foo" );
        /* ... */
        FooTraits::Close( h );
    };
};

/// a typical traits structure
struct SomeTraits
{
    typedef HANDLE handle_type;
    static handle_type Open( const char* name ) { /* ... */ };
    static void Close( handle_type h ) { /* ... */ };
};

/// mocked traits that I would like to use for testing
struct MockTraits
{
    typedef int handle_type;
    static MOCK_METHOD1( Open, handle_type( const char* ) );
    static MOCK_METHOD1( Close, void( handle_type ) );
};

/// the test function
TEST( FooTest, VerifyDoSomethingWorks )
{
    Foo< MockTraits > foo_under_test;

    // expect MockTraits::Open is called once
    // expect MockTraits::Close is called once with the parameter returned from Open
    foo_under_test.DoSomething();
}; 
```

显然这不会按原样工作。Google Mock 不能模拟静态方法，我需要在测试中创建一个 Mocked 类的实例来设置它的行为和期望。

那么使用 Google Test / Google Mock 对接受模板策略的类进行单元测试的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:25:49.027

你能用非静态方法创建一个类，创建它的全局实例（或在你的特征中是静态的），并让你的特征类服从它吗？

因此，为了澄清受 Rob 评论启发的想法：

```
struct FunnyDoodad
{
   FunnyDoodad();
   ~FunnyDoodad();

   MOCK_METHOD1( Open, HANDLE( const char* ) );
   MOCK_METHOD1( Close, void( handle_type ) );

};

struct FunnyGlobal {
  FunnyGlobal() : pimpl() {}
  ~FunnyGlobal() { delete pimpl; }

  // You'd want some protection here rather than just dereferencing.
  // it's the whole point.  I'd suggest using whatever unit test assertion
  // mechanism your framework uses and make it a fatal check.    
  handle_type Open(char const* name) { return pimpl->Open(name); }
  void Close(handle_type h) { pimpl->Close(h); }
private:
   FunnyDoodad * pimpl;

  friend struct FunnyDoodad;

  void register(FunnyDoodad* p) { pimpl = p; }
  void deregister() { pimpl = 0; }
};

FunnyGlobal funnyGlobal;

FunnyDoodad::FunnyDoodad() { funnyGlobal.register(this); }
FunnyDoodad::~FunnyDoodad() { funnyGlobal.deregister(); }

struct TestTraits
{
    typedef HANDLE handle_type;
    static handle_type Open( const char* name ) { return funnyGlobal.Open(name); };
    static void Close( handle_type h ) { funnyGlobal.Close(h); };
};

TEST_CASE(blah)
{
   FunnyDoodad testDoodad;

   ...
} 
```

我想上面可以被模板化，几乎变成了一种模式……也许吧。

# google-app-engine - Google App Engine：从 Webapp2 缓存属性 (current_user) 获取用户对象

> ID：10656713
> 
> 赞同：0
> 
> 时间：2012-05-18T16:53:16.487
> 
> 标签：google-app-engine, webapp2

我想要实现的是从 webapp2.cached 属性获取用户对象。我在我的请求处理程序中定义了一个方法，它给了我当前用户。

```
@webapp2.cached_property
  def current_user(self):
  user_dict = self.auth.get_user_by_session()
  return self.auth.store.user_model.get_by_id(user_dict['user_id']) 
```

我想获取用户对象，因为它是我的一个模型的 UserProperty()，如下所示：

```
class CountryImage(db.Model):
  image = db.BlobProperty()
  user = db.UserProperty()
  country = db.ReferenceProperty(Country)
  approved = db.BooleanProperty(default=False) 
```

现在，当上传表单发布时，一切正常，除了“用户”在数据存储中显示为“无”。

我在交互式控制台中使用它时发现的可能原因是 current_user 方法传递了一个 Web 缓存属性，而不是实际的用户对象。

例如：

```
< webapp2.cached_property object at 0xb46aee8c > 
```

现在我的问题是检索用户对象的最佳方法是什么？提前感谢您的所有帮助。

神话

PS：编辑：

以下是我试图将图像存储在数据存储中的代码：

```
NewImg = models.CountryImage()
NewImg.image = self.request.get('image')
NewImg.user = self.current_user
NewImg.country = models.Country.all().filter("url_name =", country).get()
continue_url = self.request.url
NewImg.put() 
```

PS：

补充一下，我也尝试过使用“users.get_current_user()”方法，该方法也返回“None”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:40:03.887

感谢您的回复，但是我已经解决了这个问题。如果您使用`User`模型 from `webapp2_extras`（这是 User model from 的扩展`appengine.api.users`），您可以按如下方式获取用户

```
from google.appengine.api import users
from webapp2_extras.appengine.auth.models import User

user = users.User(User.get_by_auth_id(self.current_user.auth_ids[0]).name) 
```

或者

```
user = users.User(User.get_by_auth_id(self.current_user.auth_ids[0]).email) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:26:33.447

我很好奇，这个国家的图片，是用户上传的吗？还是您将这些作为资源进行管理？

如果没有，您最好在用户模型上使用 StringProperty，然后引用静态图像资产的字符串路径并为自己节省额外的数据库查找

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T03:23:12.603

users.get_current_user() 应该是要走的路，但这需要用户先登录。您是否尝试支持匿名用户？

# unit-testing - 如何在所有测试运行之前打开 mongodb 连接，并在所有测试运行后关闭它，在 mocha 中？

> ID：10656716
> 
> 赞同：2
> 
> 时间：2012-05-18T16:53:33.020
> 
> 标签：unit-testing, mongodb, mocha.js

我正在使用[mocha](http://visionmedia.github.com/mocha/)为 nodejs+mongodb Web 应用程序编写单元测试。有很多测试文件需要运行mongodb。

所以我想在所有测试运行之前打开一个连接，并在所有测试之后关闭它，但我不知道该怎么做。

目前，我创建了一个文件`dbtest_global.js`，其中包含以下代码：

```
before(function(done) {
    console.log('before all');
    global.connection = openMongoDB();
    done();
});

after(function(done) {
   global.connection.close(done);
}); 
```

然后在其他测试中，我习惯`require('./dbtest_global')`要求它。

但是我发现在运行`mocha`的时候，`before`方法会被多次调用，导致`global.connection`修改了很多次。

我想知道有没有办法让`before`and`after`方法在运行时只被调用一次`mocha`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:27:48.213

您是否尝试过使用普通的全局条件变量，以确保如果变量已设置，则 before 函数立即返回？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:41:03.057

试试这个用于 mocha 的 mongodb 助手 - [https://github.com/arunoda/mocha-mongo](https://github.com/arunoda/mocha-mongo)

它为您创建数据库连接并在测试前清理集合。

# c - 如何通过 Watcom 编译器从 C 生成 16 位可执行 BINARY RAW 格式？

> ID：10656717
> 
> 赞同：1
> 
> 时间：2012-05-18T16:53:40.137
> 
> 标签：c, assembly, compilation, watcom

我想生成一个 16 位可执行的 BINARY RAW 格式`Watcom C compiler`。类似于在实模式下运行的没有任何标题的 EXE 文件。

我使用`Large`内存模型，因此代码段和数据段可能不同，可以增加超过 64K 字节。

我喜欢这样：

```
// kernel.c
void kernel(void)
{
    /* Print Hello! */
    __asm
    {
        mov ah, 0x0E;
        mov bl, 7

        mov al, 'H'
        int 0x10

        mov al, 'e'
        int 0x10

        mov al, 'l'
        int 0x10

        mov al, 'l'
        int 0x10

        mov al, 'o'
        int 0x10

        mov al, '!'
        int 0x10
    }
    return;
} 
```

为了编译上面的代码，我在批处理文件下面运行：

```
@rem build.bat

@rem Cleaning.
del *.obj
del *.bin

cls

@rem Compiling.
@rem 0:     8088 and 8086 instructions.
@rem d0:    No debugging information.
@rem ml:    The "large" memory model (big code, big data) is selected.
@rem s:     Remove stack overflow checks.
@rem wx:    Set the warning level to its maximum setting.
@rem zl:    Suppress generation of library file names and references in object file.
wcc -0 -d0 -ml -s -wx -zl kernel.c

@rem Linking.
@rem FILE:      Specify the object files.
@rem FORMAT:    Specify the format of the executable file.
@rem NAME:      Name for the executable file.
@rem OPTION:    Specify options.
@rem Note startup function (kernel_) implemented in kernel.c.
wlink FILE kernel.obj FORMAT RAW BIN NAME kernel.bin OPTION NODEFAULTLIBS, START=kernel_

del *.obj 
```

运行`build.bat`Watcom 编译器和链接器生成的以下消息后：

```
D:\Amir-OS\ckernel>wcc -0 -d0 -ml -s -wx -zl kernel.c
Open Watcom C16 Optimizing Compiler Version 1.9
Portions Copyright (c) 1984-2002 Sybase, Inc. All Rights Reserved.
Source code is available under the Sybase Open Watcom Public License.
See http://www.openwatcom.org/ for details.
kernel.c: 28 lines, included 35, 0 warnings, 0 errors
Code size: 39

D:\Amir-OS\ckernel>wlink FILE kernel.obj FORMAT RAW BIN NAME kernel.bin OPTION N
ODEFAULTLIBS, START=kernel_
Open Watcom Linker Version 1.9
Portions Copyright (c) 1985-2002 Sybase, Inc. All Rights Reserved.
Source code is available under the Sybase Open Watcom Public License.
See http://www.openwatcom.org/ for details.
loading object files
Warning! W1014: stack segment not found
creating a RAW Binary Image executable 
```

输出文件成功生成。

但我的问题是：

**如何解决`W1014`警告？**

有没有办法指定初始 CS 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:58:01.430

堆栈段信息通常在最终调用 main 的 cstartup 模块中初始化。链接器将对链接中包含的模块的堆栈要求求和，这将反映在 sp 中的 cstartup 值中。堆栈段将是 ds 和 es 分组的一部分，除非您具有多线程标志（当 ss 将是单独的时）。您还可以尝试在链接器命令文件中设置堆栈大小。

我建议您编写一个 .asm 模块，该模块在调用内核之前定义大内存模型所需的段和组。很多试验和错误，但你学到的将适用于大多数环境的启动代码。

查看 Watcom 可以生成的（反汇编）.lst 文件，您应该获得有关如何编写 .asm 模块的足够指导。

# git - Git如何在mergetool之后合并冲突

> ID：10656719
> 
> 赞同：1
> 
> 时间：2012-05-18T16:53:43.067
> 
> 标签：git

我在 git 中使用了 mergetool，它会弹出我喜欢的 opendiff。我查看更改并选择应该去哪里。我点击“保存”然后回头看看终端。它要求我`Was the merge successful? [y/n]`回答是，但我不知道怎么说“使用我刚刚保存的新合并文件！不是他们的，不是我们的，而是我刚刚保存的那个”

```
Normal merge conflict for 'www/httpdocs/manifest/subsectionmanager-storage':
  {local}: modified file
  {remote}: modified file
Hit return to start merge resolution tool (opendiff): 
www/httpdocs/manifest/subsectionmanager-storage seems unchanged.
Was the merge successful? [y/n] y

Normal merge conflict for 'www/httpdocs/workspace/themes/active/less/common.less':
  {local}: modified file
  {remote}: modified file
Hit return to start merge resolution tool (opendiff): 
www/httpdocs/workspace/themes/active/less/common.less seems unchanged.
Was the merge successful? [y/n] ^[[A
www/httpdocs/workspace/themes/active/less/common.less seems unchanged.
Was the merge successful? [y/n] y
kirkstrobeck:atheycreek kirkstrobeck$ git add .
kirkstrobeck:atheycreek kirkstrobeck$ git add -u
kirkstrobeck:atheycreek kirkstrobeck$ git commit -m 'merged'
[master f6fed72] merged
 12 files changed, 1330 insertions(+), 29 deletions(-)
 mode change 100644 => 100755 www/httpdocs/workspace/data-sources/data.status_all_entries.php
 mode change 100644 => 100755 www/httpdocs/workspace/data-sources/data.twitter.php
 mode change 100644 => 100755 www/httpdocs/workspace/data-sources/data.twitter_latest_entry.php
 create mode 100755 www/httpdocs/workspace/themes/active/less/common.less.orig
 mode change 100644 => 100755 www/httpdocs/workspace/uploads/members/photos/amy_mcreynolds-4fb2e70566fb9.jpg
 mode change 100644 => 100755 www/httpdocs/workspace/uploads/members/photos/rachel-4fb2e793b13bd.jpg
 mode change 100644 => 100755 www/httpdocs/workspace/uploads/members/photos/tim-4fb3da80b15e3.jpg
 mode change 100644 => 100755 www/httpdocs/workspace/xml-importers/xml-importer.twitter.php
 mode change 100644 => 100755 www/httpdocs/workspace/xml-importers/xml-importer.ustream.php
 mode change 100644 => 100755 www/httpdocs/workspace/xml-importers/xml-importer.vimeo.php
 mode change 100644 => 100755 www/mysql/atheycreek_2012-05-16.sql
kirkstrobeck:atheycreek kirkstrobeck$ git stash apply
Auto-merging www/httpdocs/workspace/themes/active/less/common.less
CONFLICT (content): Merge conflict in www/httpdocs/workspace/themes/active/less/common.less
Auto-merging www/httpdocs/manifest/subsectionmanager-storage
CONFLICT (content): Merge conflict in www/httpdocs/manifest/subsectionmanager-storage
kirkstrobeck:atheycreek kirkstrobeck$ 
```

* * *

```
kirkstrobeck:atheycreek kirkstrobeck$ git config --global --list
user.name=kirkstrobeck
user.email=kirk@strobeck.com
user.user=kirkstrobeck
user.token=fd0010cb7e13a3f9bafe9766cfa81e7c
core.editor=nano
core.excludesfile=/Users/kirkstrobeck/.gitignore_global
github.user=kirkstrobeck
github.token=fd0010cb7e13a3f9bafe9766cfa81e7c
difftool.sourcetree.cmd=/Applications/Kaleidoscope.app/Contents/MacOS/ksdiff -w "$LOCAL" "$REMOTE"
difftool.sourcetree.path=
mergetool.sourcetree.cmd=/Applications/SourceTree.app/Contents/Resources/opendiff-w.sh "$LOCAL" "$REMOTE" -ancestor "$BASE" -merge "$MERGED"
mergetool.sourcetree.trustexitcode=true
difftool.Kaleidoscope.cmd=ksdiff-wrapper git "$LOCAL" "$REMOTE"
difftool.prompt=false
diff.tool=Kaleidoscope
mergetool.keepbackup=true
kirkstrobeck:atheycreek kirkstrobeck$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:55:24.987

听起来好像`opendiff`在 git 中没有正确配置。您应该在您的

```
git config mergetool.<tool>.trustExitCode true 
```

> 如果自定义合并工具通过其退出代码正确指示合并解析成功，则可以将配置变量 mergetool..trustExitCode 设置为 true。否则，git-mergetool 会在自定义工具退出后提示用户指示解析成功。

[http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-mergetool.html](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-mergetool.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:01:04.030

您需要运行以下命令才能接受合并的结果作为要使用的新代码：

```
git config --global mergetool.[tool].trustExitCode true 
```

# objective-c - 异或或其他简单的文件混淆方法 ios objective c

> ID：10656721
> 
> 赞同：3
> 
> 时间：2012-05-18T16:53:49.730
> 
> 标签：objective-c, ios, xcode, pdf, encryption

我正在开发一个使用受版权保护的 pdf 文件的 ios 应用程序。我正在寻找一些简单的方法来混淆文件以确保安全，这些方法不需要我通过额外的大众市场 CCATS 加密审查过程，但也将确保版权所有者我已尽我所能保护他们的数据安全。我当然用密码保护文件，但我想更进一步。是否有一种简单的方法来异或或以其他方式散列或混淆我将在我的服务器上托管的 pdf 文件，然后让 ios 设备下载它并使用 Objective-c 代码将其恢复为常规密码保护的 pdf 文件，以便它可以保存它在文档目录中（我并不担心它在设备上的安全性，就像它在服务器上一样）。我认为这对于任何文件类型都是相同的。

因此，为了澄清起见，我正在我的桌面上寻找一种简单的 XOR 或 Hash 混淆/加密方法，该方法具有相应的目标 c 代码，ios 设备可以在下载后快速解码我的文件并将其保存到文档目录。

非常感谢！

这里有一个关于 CCATS 限制的答案供参考…… [如果使用简单的 XOR 密码，需要申请 CCATS 吗？](https://stackoverflow.com/questions/4882502/need-to-apply-for-ccats-if-using-simple-xor-cipher)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:10:30.380

但是，您正在下载文件，您可能最终会得到一个`NSData`? 如果是这样，无论您在哪里都可能有这样的东西：

```
[myData writeToFile:...] 
```

只需冲过所有字节并应用您的 XOR。假设它是一个密集的 8 位模式，那就是：

```
/* assuming myData is mutable... take [data mutableCopy] if required */
uint8_t *bytes = (uint8_t *)[myData mutableBytes];

for(int index = 0; index < [myData length]; index++)
    bytes[index] ^= 0xe8; // or whatever your mask is 
```

这表明了应用更长模式的最简单的方法：

```
uint8_t *bytes = (uint8_t *)[myData mutableBytes];
uint8_t pattern[] = {0xe8, 0xf4, 0x98, 0x32, 0x63}; // or whatever
const int patternLengthInBytes = 5;

for(int index = 0; index < [myData length]; index++)
    bytes[index] ^= pattern[index % patternLengthInBytes]; 
```

It'd be slightly faster to proceed in 32-bit steps, but the saving to disk is probably going to be the only thing that has any significant sort of cost and that's at least very clear.

# hibernate - 来自重复名称列表的 Grails 复杂的唯一变量

> ID：10656724
> 
> 赞同：0
> 
> 时间：2012-05-18T16:53:56.517
> 
> 标签：hibernate, grails, groovy

继我的另一个问题[Grails query - can't access join table](https://stackoverflow.com/questions/10643491/grails-query-cant-access-join-table)

我现在有一个搜索结果列表，但我需要为每个参数显示每个名称和一个选择框。我有一个名字和一个价值。名称有重复，例如，颜色和净度重复多次，如下例所示：

```
NAME    VALUE
Color   red          
Color   blue    
Color   green    
Clarity clear
Clarity turbid
Clarity hazy 
```

我需要一个变量 ${name} 来表示要为名称列表中的每个唯一项目打印一次的颜色或清晰度。我还需要生成一个下拉框，其中包含与名称关联的值：IE

颜色值红、蓝、绿

我想我可以在某处使用'unique()'，但我不知道该怎么做。我应该查看控制器还是 gsp 端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:52:38.953

我会在服务器/控制器端做，我会使用[Collection.groupBy](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#groupBy%28groovy.lang.Closure%29)方法。例如：

```
yourListOfStuff.groupBy {it.name} 
```

# sqlite - Sqlite 加密层

> ID：10656728
> 
> 赞同：0
> 
> 时间：2012-05-18T16:54:08.153
> 
> 标签：sqlite, dll, encryption

想知道 sqlite 有多安全。我很清楚需要传递的密码（通过使用 ChangePassword() 或 SetPassword()。假设数据库已加密，并且应用程序正在写入数据库或从数据库读取。突然应用程序停止工作，数据库会发生什么？当它从数据库中读取时，它会解密吗？如果应用程序挂起，它会保持解密状态吗？我正在为 Visual Studio 2010 使用 System.Data.Sqlite dll。

谢谢。

# python - 如何获得 FFMPEG Progress 以创建进度条？

> ID：10656731
> 
> 赞同：1
> 
> 时间：2012-05-18T16:54:17.273
> 
> 标签：python, user-interface, python-3.x, ffmpeg, pyside

我正在尝试为 ffmpeg 创建一个简单的 GUI，但在获取命令进度时遇到问题。我使用 PySide 作为 GUI 工具包，我也在使用 python3。我正在使用 QProcess 来运行命令，并且希望能够创建一个进度条。代码可以在这里找到：[https ://github.com/stephenmac7/ffpy/blob/master/ffpy.py](https://github.com/stephenmac7/ffpy/blob/master/ffpy.py)

另外，我希望能够使用主窗口的状态栏。谢谢你。

编辑：最好我想使用 QProgressDialog： http: [//www.pyside.org/docs/pyside/PySide/QtGui/QProgressDialog.html](http://www.pyside.org/docs/pyside/PySide/QtGui/QProgressDialog.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:00:05.943

您不会在进程生成接口上拥有一个非常好的 API。此外，它可能不稳定。

相反，您应该使用 Python 绑定到`libavcodec`其他 FFMPEG 库。[网上](http://code.google.com/p/pyffmpeg/)有[很多这样](http://code.google.com/p/ffvideo/) 的。

# android - android使用样式更改微调器按钮的外观

> ID：10656732
> 
> 赞同：1
> 
> 时间：2012-05-18T16:54:19.307
> 
> 标签：android, styles, spinner

我试图改变我的微调按钮的样式（不是项目！）。不知何故，它没有得到应用：

```
 <style name="myStyle"  parent="@android:style/Widget.TextView.SpinnerItem">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">50dip</item>
    <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
    <item name="android:textStyle">italic</item>
 </style>

<Spinner 
     android:id="@+id/widget_type_spinner"
     style="@style/myStyle"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/> 
```

另一方面，如果我在我的主题中定义它，它就像一个魅力：

```
<style name="Standard" parent="android:style/Theme.Black">
    <item name="android:spinnerItemStyle">@style/myStyle</item> 
</style> 
```

但我不希望所有微调器都有这种行为......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:16:55.523

我认为你可以这样做：

**在`onCreate()`**

```
Spinner spinner = (Spinner) findViewById(R.id.widget_type_spinner);
ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(this, R.layout.my_spinner,getResources().getStringArray(R.array.array_of_strings));
spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(categorySpinnerAdapter); 
```

**在您的布局**中（在您的布局文件夹中）

```
<Spinner 
 android:id="@+id/widget_type_spinner"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/> 
```

**my_spinner.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textview_spinner"
    android:layout_width="wrap_content"
    android:layout_height="50dip"
    android:textAppearance="@android:style/TextAppearance.Small"
    android:textStyle="italic" >
</TextView> 
```

# reporting-services - RDLC 是否需要与浏览器不同的东西而不是 RDL？

> ID：10656734
> 
> 赞同：0
> 
> 时间：2012-05-18T16:54:38.930
> 
> 标签：reporting-services

所以我是微软报告系统的新手，我一直在挖掘 RDL 和 RDLC 之间的差异。

我目前唯一担心的是 RDLC 是否需要任何类型的额外插件才能使浏览器正常工作。

它是 RDLC 中的客户端一直在抛出我，我一直认为用户本地计算机需要做一些事情，但到目前为止，它看起来只是一个不需要报表服务器的报表，因此无法共享（您需要进入它内置的项目才能使用）但仍然由VS构建并由服务器运行并使用reportviewer显示。

有人可以启发我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:29:36.850

在服务器报表中，`ReportViewer`控件将请求发送到报表服务器并在服务器中创建报表。在这种类型的报告中，`ReportViewer`只显示报告，但在客户端报告中，您不需要报告服务器。对于这种类型的报告，`ReportViewer`任务是呈现报告。

在客户端计算机上查看客户端报告不需要任何东西。

# c++ - OpenSSL AES 错误加密

> ID：10656739
> 
> 赞同：1
> 
> 时间：2012-05-18T16:55:07.373
> 
> 标签：c++, encryption, openssl

我在下面有一些代码。我的问题是我有一个奇怪的加密和解密字符数组结尾。

```
#include <iostream>
#include <openssl\evp.h>

#define AES_BLOCK_SIZE 16

static EVP_CIPHER_CTX Encrypt_Context, Decrypt_Context;

int aes_init(unsigned char *key_data, int key_data_len, unsigned char *salt, EVP_CIPHER_CTX *e_ctx, 
             EVP_CIPHER_CTX *d_ctx)
{
  int i, nrounds = 1;
  unsigned char key[16], iv[16];

  i = EVP_BytesToKey(EVP_aes_128_cbc(), EVP_sha1(), salt, key_data, key_data_len, nrounds, key, iv);
  if (i != 16) {
    printf("Key size is %d bits - should be 128 bits\n", i);
    return -1;
  }

  EVP_CIPHER_CTX_init(e_ctx);
  EVP_EncryptInit_ex(e_ctx, EVP_aes_128_cbc(), NULL, key, iv);
  EVP_CIPHER_CTX_init(d_ctx);
  EVP_DecryptInit_ex(d_ctx, EVP_aes_128_cbc(), NULL, key, iv);

  return 0;
}

unsigned char *aes_encrypt(EVP_CIPHER_CTX *e, unsigned char *plaintext, int *len)
{
  int c_len = *len + AES_BLOCK_SIZE, f_len = 0;
  unsigned char *ciphertext = (unsigned char *)malloc(c_len);
  EVP_EncryptInit_ex(e, NULL, NULL, NULL, NULL);
  EVP_EncryptUpdate(e, ciphertext, &c_len, plaintext, *len);
  EVP_EncryptFinal_ex(e, ciphertext+c_len, &f_len);
  *len = c_len + f_len;
  return ciphertext;
}

unsigned char *aes_decrypt(EVP_CIPHER_CTX *e, unsigned char *ciphertext, int *len)
{
  int p_len = *len, f_len = 0;
  unsigned char *plaintext = (unsigned char*)malloc(p_len);
  EVP_DecryptInit_ex(e, NULL, NULL, NULL, NULL);
  EVP_DecryptUpdate(e, plaintext, &p_len, ciphertext, *len);
  EVP_DecryptFinal_ex(e, plaintext+p_len, &f_len);
  *len = p_len + f_len;
  return plaintext;
}

void main()
{
    unsigned char * data_to_encrypt = (unsigned char*)"aaaaaaaaabbbbbbbbbbbbbbccccccccc";
    unsigned char *key_data = (unsigned char *)"aaaaaaaaaaaaaaaa";
    int key_data_len = strlen((const char*) key_data);
    char * ciphertext;
    char * plaintext;

    aes_init(key_data, 16, NULL, &Encrypt_Context, &Decrypt_Context);

    int length = strlen((const char*) data_to_encrypt)-1;

    printf("Clear text :%s\n", data_to_encrypt);

    ciphertext = (char *)aes_encrypt(&Encrypt_Context, data_to_encrypt, &length);
    printf("Crypted text :%s\n", ciphertext);

    plaintext = (char *)aes_decrypt(&Decrypt_Context, (unsigned char*)ciphertext, &length);
    printf("Decrypted text :%s\n", plaintext);
} 
```

使用此代码，我进入控制台：

> 明文：aaaaaaaaabbbbbbbbbbbbcccccccccc 加密文本：°ЁТ☼#єз▬├^^，♦Ёфм:ЇъШ╙y╒КzukЩu@8¤════════════════════解密¤ aaaaaaaabbbbbbbbbbbbbbcccccccc☺¤¤¤¤</p>

什么是加密文本末尾的═══════════════¤¤¤¤和解密末尾的☺¤¤¤¤？我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:00:05.127

加密例程处理二进制数据，而不是 C 字符串，它们返回指针的数组不是以空字符结尾的，因此当使用`printf`（期望以空字符结尾的字符串）打印时，您会得到随机垃圾，恰好是位于这些阵列之后。

要解决这个问题，请确保空终止，使用类似`fwrite`或迭代字符以打印数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:01:04.423

`ciphertext`并且`plaintext`不是 C 风格的字符串。它们只是指向 s 数组的指针`unsigned char`。in 中的`%s`说明符`printf`需要一个以 null 结尾的字符串才能打印。你有两个选择：

*   确保`ciphertext`和`plaintext`都以空值结尾
*   循环遍历数组（因为您知道它们的长度）并单独打印每个字符

通常，密码学中的所有此类字节字符串都使用十六进制，因此，使用后者可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:05:18.060

大多数加密算法会在加密之前填充数据，以确保无法从加密消息的确切长度中推断出信息。一些工具甚至在加密数据之前添加压缩（然后是填充）。

因此，一长串统一字符很可能是填充。

其余的可能意味着您看到了一些未初始化的数据。这意味着您提供的缓冲区在实际消息之后没有填充零，因此您可能会一路加密垃圾。或者，在解密时，您不会在解密数据停止时以零终止您期望的字符串。

# java - Spring LDAP 事务管理器

> ID：10656742
> 
> 赞同：0
> 
> 时间：2012-05-18T16:55:11.023
> 
> 标签：java, spring, spring-ldap

关于 Spring 的事务回滚，我有一个令人困惑的场景。

我成功地创建了一个新用户，将其添加到一个组并分配了一个角色，但是当我尝试测试事务回滚以查找“用户已存在”等异常时，我遇到了我的问题。

因此，当我尝试创建现有用户时，Spring 触发了一个异常并启动了回滚操作，但是没有任何反应，并且该用户仍保留在用户列表中。

我的问题是，我应该创建回滚方法，还是应该由 spring 代表我处理。

我在文档中花了很多时间，但我有点挣扎，因为我有点像 Spring / LDAP 新手

提前致谢

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:38:06.637

所以你尝试添加一个已经存在的用户。

这当然失败了。

Spring LDAP 然后尝试回滚之前发生的所有事情。由于用户创建是您事务的第一步，因此我没有得到您期望回滚的内容。

我是不是误会了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:52:06.833

PICNIC - 最后是配置文件问题.. d'oh!!

[http://www.usewisdom.com/fun/computer.html](http://www.usewisdom.com/fun/computer.html)

# javascript - 如何在谷歌地图 api V3 中偏移中心点

> ID：10656743
> 
> 赞同：88
> 
> 时间：2012-05-18T16:55:12.020
> 
> 标签：javascript, google-maps-api-3

我有一张谷歌地图，上面有一个覆盖部分区域的半透明面板。我想调整地图的中心点以考虑地图中部分被遮挡的部分。见下图。理想情况下，放置十字准线和大头针的位置将是地图的中心点。

我希望这是有道理的。

原因很简单：当您缩放时，它需要将地图置于十字准线的中心，而不是 50% 50%。此外，我将在地图上绘制标记并按顺序移动它们。当地图以它们为中心时，它们也需要处于偏移位置。

提前致谢！

![我正在构建的地图模型](../Images/5b2e56971e580a692b602f4820344cd3.png)

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-19T14:28:07.497

一旦找到[相关的先前答案，](https://stackoverflow.com/questions/2674392/how-to-access-google-maps-api-v3-markers-div-and-its-pixel-position)这并不是特别困难。

您需要将地图的中心转换为其世界坐标，找到地图需要居中的位置以将*明显的中心放置在您想要的位置，然后使用**真实*的中心重新居中地图。

API 将始终将地图居中在视口的中心，因此在使用时需要小心，`map.getCenter()`因为它会返回真正的中心，而不是明显的中心。我想有可能重载 API 以便替换它的`getCenter()`和`setCenter()`方法，但我没有这样做。

代码如下。[在线示例](http://acleach.me.uk/gmaps/v3/map-offsetcentre.htm)。在示例中，单击按钮将地图中心（那里有一个路口）向下移动 100 像素，向左移动 200 像素。

```
function offsetCenter(latlng, offsetx, offsety) {

    // latlng is the apparent centre-point
    // offsetx is the distance you want that point to move to the right, in pixels
    // offsety is the distance you want that point to move upwards, in pixels
    // offset can be negative
    // offsetx and offsety are both optional

    var scale = Math.pow(2, map.getZoom());

    var worldCoordinateCenter = map.getProjection().fromLatLngToPoint(latlng);
    var pixelOffset = new google.maps.Point((offsetx/scale) || 0,(offsety/scale) ||0);

    var worldCoordinateNewCenter = new google.maps.Point(
        worldCoordinateCenter.x - pixelOffset.x,
        worldCoordinateCenter.y + pixelOffset.y
    );

    var newCenter = map.getProjection().fromPointToLatLng(worldCoordinateNewCenter);

    map.setCenter(newCenter);

} 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-07-09T07:37:46.993

还可以查看 maps 对象上的 panBy(x:number, y:number) 函数。

文档中提到了有关该功能的内容：

> 将地图的中心更改为给定距离（以像素为单位）。如果距离小于地图的宽度和高度，则过渡将平滑动画。请注意，地图坐标系从西向东（对于 x 值）和从北向南（对于 y 值）增加。

像这样使用它：

```
mapsObject.panBy(200, 100) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-08T12:11:02.160

`panBy()`以下是使用地图 API 的方法解决问题的示例：http: [//jsfiddle.net/upsidown/2wej9smf/](http://jsfiddle.net/upsidown/2wej9smf/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-06-26T11:25:58.963

刚刚找到另一个最简单的解决方案。如果您使用 fitBounds 方法，则可以将可选的第二个参数传递给它。此参数是填充，将在拟合边界时考虑。

```
// pass single side:
map.fitBounds(bounds, { left: 1000 })

// OR use Number:
map.fitBounds(bounds, 20) 
```

进一步阅读：[官方文档](https://developers.google.com/maps/documentation/javascript/reference/3/map#Map.fitBounds)。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-30T01:36:43.847

这是一种更简单的方法，可能在响应式设计中更有用，因为您可以使用百分比而不是像素。没有世界坐标，没有点的纬度！

```
var center;  // a latLng
var offsetX = 0.25; // move center one quarter map width left
var offsetY = 0.25; // move center one quarter map height down

var span = map.getBounds().toSpan(); // a latLng - # of deg map spans

var newCenter = { 
    lat: center.lat() + span.lat()*offsetY,
    lng: center.lng() + span.lng()*offsetX
};

map.panTo(newCenter);  // or map.setCenter(newCenter); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-05-22T20:38:07.813

安德鲁的答案是。但是，就我而言， map.getBounds() 一直返回未定义。我修复了它等待 bounds_changed 事件，*然后*调用该函数来偏移中心。像这样：

```
var center_moved = false;
google.maps.event.addListener(map, 'bounds_changed', function() {
  if(!center_moved){
    offsetCenter(map.getCenter(), 250, -200);
    center_moved = true; 
  }
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-29T15:11:43.850

老问题，我知道。但是，以 CSS 为中心的方式怎么样？

[http://codepen.io/eddyblair/pen/VjpNQQ](http://codepen.io/eddyblair/pen/VjpNQQ)

我所做的是：

*   将地图和叠加层包装在一个容器中`overflow: hidden`

*   用`position: absolute`

*   *通过设置负数将地图的表观宽度*扩展为覆盖宽度（加上任何填充和偏移）`margin-left`。

*   然后为了遵守[https://www.google.com/permissions/geoguidelines/attr-guide.html](https://www.google.com/permissions/geoguidelines/attr-guide.html)定位小部件和属性`div`。

这样，地图的中心就与所需区域的中心一致。js只是标准的地图js。

重新定位街景图标是读者的练习:)

* * *

如果您想要左侧的叠加层，只需将第 32行`24` `margin-left`更改为.`margin-right``right``left`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-08-23T11:23:33.897

经过大量搜索后，我找不到包括缩放在内的方法。谢天谢地，一个[聪明的小伙子](https://www.reonomy.com/offsetting-bounds-and-zoom-on-a-google-map/)已经弄清楚了。这里还有一个[小提琴](https://jsfiddle.net/vh3s88mc/15/)

```
'use strict';

const TILE_SIZE = {
  height: 256,
  width: 256
}; // google World tile size, as of v3.22
const ZOOM_MAX = 21; // max google maps zoom level, as of v3.22
const BUFFER = 15; // edge buffer for fitting markers within viewport bounds

const mapOptions = {
  zoom: 14,
  center: {
    lat: 34.075328,
    lng: -118.330432
  },
  options: {
    mapTypeControl: false
  }
};
const markers = [];
const mapDimensions = {};
const mapOffset = {
  x: 0,
  y: 0
};
const mapEl = document.getElementById('gmap');
const overlayEl = document.getElementById('overlay');
const gmap = new google.maps.Map(mapEl, mapOptions);

const updateMapDimensions = () => {
  mapDimensions.height = mapEl.offsetHeight;
  mapDimensions.width = mapEl.offsetWidth;
};

const getBoundsZoomLevel = (bounds, dimensions) => {
  const latRadian = lat => {
    let sin = Math.sin(lat * Math.PI / 180);
    let radX2 = Math.log((1 + sin) / (1 - sin)) / 2;
    return Math.max(Math.min(radX2, Math.PI), -Math.PI) / 2;
  };
  const zoom = (mapPx, worldPx, fraction) => {
    return Math.floor(Math.log(mapPx / worldPx / fraction) / Math.LN2);
  };
  const ne = bounds.getNorthEast();
  const sw = bounds.getSouthWest();
  const latFraction = (latRadian(ne.lat()) - latRadian(sw.lat())) / Math.PI;
  const lngDiff = ne.lng() - sw.lng();
  const lngFraction = ((lngDiff < 0) ? (lngDiff + 360) : lngDiff) / 360;
  const latZoom = zoom(dimensions.height, TILE_SIZE.height, latFraction);
  const lngZoom = zoom(dimensions.width, TILE_SIZE.width, lngFraction);
  return Math.min(latZoom, lngZoom, ZOOM_MAX);
};

const getBounds = locations => {
  let northeastLat;
  let northeastLong;
  let southwestLat;
  let southwestLong;
  locations.forEach(function(location) {
    if (!northeastLat) {
      northeastLat = southwestLat = location.lat;
      southwestLong = northeastLong = location.lng;
      return;
    }
    if (location.lat > northeastLat) northeastLat = location.lat;
    else if (location.lat < southwestLat) southwestLat = location.lat;
    if (location.lng < northeastLong) northeastLong = location.lng;
    else if (location.lng > southwestLong) southwestLong = location.lng;
  });
  const northeast = new google.maps.LatLng(northeastLat, northeastLong);
  const southwest = new google.maps.LatLng(southwestLat, southwestLong);
  const bounds = new google.maps.LatLngBounds();
  bounds.extend(northeast);
  bounds.extend(southwest);
  return bounds;
};

const zoomWithOffset = shouldZoom => {
  const currentzoom = gmap.getZoom();
  const newzoom = shouldZoom ? currentzoom + 1 : currentzoom - 1;
  const offset = {
    x: shouldZoom ? -mapOffset.x / 4 : mapOffset.x / 2,
    y: shouldZoom ? -mapOffset.y / 4 : mapOffset.y / 2
  };
  const newCenter = offsetLatLng(gmap.getCenter(), offset.x, offset.y);
  if (shouldZoom) {
    gmap.setZoom(newzoom);
    gmap.panTo(newCenter);
  } else {
    gmap.setCenter(newCenter);
    gmap.setZoom(newzoom);
  }
};

const setMapBounds = locations => {
  updateMapDimensions();
  const bounds = getBounds(locations);
  const dimensions = {
    width: mapDimensions.width - mapOffset.x - BUFFER * 2,
    height: mapDimensions.height - mapOffset.y - BUFFER * 2
  };
  const zoomLevel = getBoundsZoomLevel(bounds, dimensions);
  gmap.setZoom(zoomLevel);
  setOffsetCenter(bounds.getCenter());
};

const offsetLatLng = (latlng, offsetX, offsetY) => {
  offsetX = offsetX || 0;
  offsetY = offsetY || 0;
  const scale = Math.pow(2, gmap.getZoom());
  const point = gmap.getProjection().fromLatLngToPoint(latlng);
  const pixelOffset = new google.maps.Point((offsetX / scale), (offsetY / scale));
  const newPoint = new google.maps.Point(
    point.x - pixelOffset.x,
    point.y + pixelOffset.y
  );
  return gmap.getProjection().fromPointToLatLng(newPoint);
};

const setOffsetCenter = latlng => {
  const newCenterLatLng = offsetLatLng(latlng, mapOffset.x / 2, mapOffset.y / 2);
  gmap.panTo(newCenterLatLng);
};

const locations = [{
  name: 'Wilshire Country Club',
  lat: 34.077796,
  lng: -118.331151
}, {
  name: '301 N Rossmore Ave',
  lat: 34.077146,
  lng: -118.327805
}, {
  name: '5920 Beverly Blvd',
  lat: 34.070281,
  lng: -118.331831
}];

locations.forEach(function(location) {
  let marker = new google.maps.Marker({
    position: new google.maps.LatLng(location.lat, location.lng),
    title: location.name
  })
  marker.setMap(gmap);
  markers.push(marker);
});

mapOffset.x = overlayEl.offsetWidth;

document.zoom = bool => zoomWithOffset(bool);
document.setBounds = () => setMapBounds(locations);
```

```
section {
  height: 180px;
  margin-bottom: 15px;
  font-family: sans-serif;
  color: grey;
}
figure {
  position: relative;
  margin: 0;
  width: 100%;
  height: 100%;
}
figcaption {
  position: absolute;
  left: 15px;
  top: 15px;
  width: 120px;
  padding: 15px;
  background: white;
  box-shadow: 0 2px 5px rgba(0, 0, 0, .3);
}
gmap {
  display: block;
  height: 100%;
}
```

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>

<section>
  <figure>
    <gmap id="gmap"></gmap>
    <figcaption id="overlay">
      <h4>Tile Overlay</h4>
      <p>To be avoided by the map!</p>
    </figcaption>
  </figure>
</section>
<button onclick="zoom(true)">zoom in</button>
<button onclick="zoom(false)">zoom out</button>
<button onclick="setBounds()">set bounds</button>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-05T08:52:58.363

可以在此处找到偏移路线或一组标记的另一种方法：

[https://stackoverflow.com/a/26192440/1238965](https://stackoverflow.com/a/26192440/1238965)

它仍然使用`fromLatLngToPoint()`@Andrew Leach 回答中描述的方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-08T10:45:11.337

下面是一个**简单**的使用示例：

*   对于**DESKTOP**版本，**左侧**为**OVERLAY**，宽度为`500`
*   **当页面底部**为**OVERLAY**且高度为MOBILE**版本**时****`250`****

 ****当屏幕尺寸实时更改时，该解决方案也将顺利运行。

要求在**css**中使用and定义**查询****`@media screen and (min-width: 1025px)``@media screen and (max-width: 1024px)`**

 **代码：

```
function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
        zoom: 13
    });

    bounds = new google.maps.LatLngBounds();
    // add markers to bounds

    // Initial bounds
    defineBounds()

    // Trigger resize browser and set new bounds
    google.maps.event.addDomListener(window, 'resize', function() {
        defineBounds()
    });
}

function defineBounds() {
    if (window.matchMedia("(min-width:1025px)").matches) {
        map.fitBounds(bounds, {
            top: 100,
            right: 100,
            left: 600, // 500 + 100
            bottom: 100
        });
    } else {
        map.fitBounds(bounds, {
            top: 80,
            right: 80,
            left: 80,
            bottom: 330 // 250 + 80
        });
    }
} 
```

该解决方案可以针对位于屏幕两侧的 OVERLAY 进行定制******

# visual-studio - TortoiseSVN 补丁文件应用不正确

> ID：10656745
> 
> 赞同：3
> 
> 时间：2012-05-18T16:55:20.743
> 
> 标签：visual-studio, svn, tortoisesvn, patch, visualsvn

我在开发时尝试使用 SVN 补丁文件从 Web API 中删除身份验证。删除身份验证的补丁文件工作正常，如下所示：

```
Index: WebApplication.Api/Global.asax.cs
===================================================================
--- WebApplication.Api/Global.asax.cs   (revision 18939)
+++ WebApplication.Api/Global.asax.cs   (working copy)
@@ -115,7 +115,7 @@
             _dependencyRegister.AddRegistration<WebApplication.Application.Aspects.AuthorisationAspect>();

             // WebApplication.Application.CurrentUser
-            _dependencyRegister.AddRegistration<WebApplication.Application.CurrentUser.ICurrentUserService, WebApplication.Application.CurrentUser.CurrentUserService>();
+            _dependencyRegister.AddRegistration<WebApplication.Application.CurrentUser.ICurrentUserService, WebApplication.Api.DummyServices.CurrentUserService>();

             // WebApplication.Application.Interface.Manager
             _dependencyRegister.AddRegistration<WebApplication.Application.Interface.Manager.IAspNetMembershipManager, WebApplication.Application.Manager.AspNetMembershipManager>();
Index: WebApplication.Api/Web.config
===================================================================
--- WebApplication.Api/Web.config   (revision 18939)
+++ WebApplication.Api/Web.config   (working copy)
@@ -64,14 +64,12 @@
     </sessionState>
       <httpModules>
           <add name="PerRequestLifestyle" type="Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor" />
-          <add name="ProtectedResourceModule" type="WebApplication.Api.Modules.ProtectionModule"/>
       </httpModules>
   </system.web>
   <system.webServer>
     <validation validateIntegratedModeConfiguration="false" />
       <modules runAllManagedModulesForAllRequests="true">
           <add name="PerRequestLifestyle" type="Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor" />
-          <add name="ProtectedResourceModule" type="WebApplication.Api.Modules.ProtectionModule"/>
       </modules>
       <httpErrors existingResponse="PassThrough" />
   </system.webServer> 
```

如您所见，它更改了接口的 DI 实现并从 XML 配置文件中删除了两个节点。

由于没有办法（我发现）反向应用补丁（我在 Visual Studio 中使用 VisualSVN 来应用补丁），我创建了一个基于原始补丁文件的“反向补丁”：

```
Index: WebApplication.Api/Global.asax.cs
===================================================================
--- WebApplication.Api/Global.asax.cs   (revision 18939)
+++ WebApplication.Api/Global.asax.cs   (working copy)
@@ -115,7 +115,7 @@
             _dependencyRegister.AddRegistration<WebApplication.Application.Aspects.AuthorisationAspect>();

             // WebApplication.Application.CurrentUser
+            _dependencyRegister.AddRegistration<WebApplication.Application.CurrentUser.ICurrentUserService, WebApplication.Application.CurrentUser.CurrentUserService>();
-            _dependencyRegister.AddRegistration<WebApplication.Application.CurrentUser.ICurrentUserService, WebApplication.Api.DummyServices.CurrentUserService>();

             // WebApplication.Application.Interface.Manager
             _dependencyRegister.AddRegistration<WebApplication.Application.Interface.Manager.IAspNetMembershipManager, WebApplication.Application.Manager.AspNetMembershipManager>();
Index: WebApplication.Api/Web.config
===================================================================
--- WebApplication.Api/Web.config   (revision 18939)
+++ WebApplication.Api/Web.config   (working copy)
@@ -64,14 +64,12 @@
     </sessionState>
       <httpModules>
           <add name="PerRequestLifestyle" type="Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor" />
+          <add name="ProtectedResourceModule" type="WebApplication.Api.Modules.ProtectionModule"/>
       </httpModules>
   </system.web>
   <system.webServer>
     <validation validateIntegratedModeConfiguration="false" />
       <modules runAllManagedModulesForAllRequests="true">
           <add name="PerRequestLifestyle" type="Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor" />
+          <add name="ProtectedResourceModule" type="WebApplication.Api.Modules.ProtectionModule"/>
       </modules>
       <httpErrors existingResponse="PassThrough" />
   </system.webServer> 
```

简单地说，我所做的就是将 + 符号更改为 - ，反之亦然。这会创建一个对我有意义的反向补丁文件。

反向补丁工作正常，除了 XML 配置文件中的最终“添加行”以及添加行，还删除了以下几行，导致 XML 格式错误。

谁能告诉这是为什么？我需要用魔法做点什么`@@ -64,14 +64,12 @@`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:16:21.667

似乎最简单的方法是通过命令行。我找不到任何方法通过 Visual SVN 或 Tortoise 的 UI 反向应用补丁文件，而且我不知道为什么手动修改补丁文件不起作用。

在命令行中，导航到工作副本目录并输入以下命令以应用补丁文件：

```
svn patch [path and name of patch file] 
```

要反向应用它：

```
svn patch --reverse-diff [path and name of patch file] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T17:43:02.750

我只是好奇，我认为这应该可以在互联网上找到。所以这就是我所做的：

*   用谷歌搜索`visualsvn create reverse patch`
*   选择了第一个链接： http: [//www.visualsvn.com/support/svnbook/ref/svn/c/patch/](http://www.visualsvn.com/support/svnbook/ref/svn/c/patch/)
*   阅读选项部分并找到[反向差异](http://www.visualsvn.com/support/svnbook/ref/svn/#svn.ref.svn.sw.reverse_diff)

似乎这将处理您的正常补丁并执行您想做的事情。所以应该不需要手动手动*反转补丁*。

另一种方法可能是从正确的开始[`diff command`](http://www.visualsvn.com/support/svnbook/ref/svn/c/diff/)，有一个选项可以通过交换修订的顺序来创建反向补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T15:06:11.103

交换`14`and`12`也可以吗？（更改`@@ -64,14 +64,12 @@` 为`@@ -64,12 +64,14`）

# objective-c - 如何为带有部分的表格视图设置单元格

> ID：10656749
> 
> 赞同：0
> 
> 时间：2012-05-18T16:55:31.897
> 
> 标签：objective-c, ios5

我有一个动态表视图，实际上就像静态的，但我将它设置为动态的，因为它嵌入在视图控制器中。我有一个问题，即表格视图在表格视图委托方法中设置了 3 个单元格的 4 个部分，但我有一个带有字典的数组，准备好填充单元格数据。

正如您在这段代码中看到的那样，它始终在所有部分中设置相同的数据，因为 indexPath.row 用于遍历数组，尽管数组有更多值，但它不会上升到三个。

这是当前代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

 NSDictionary *jornada = [[NSDictionary alloc] initWithDictionary: [copaReyArray objectAtIndex:indexPath.row]];

        self.copaReytable.backgroundColor = [UIColor whiteColor];

        if (indexPath.row==0){

            cuartosReyCell *headerCell = [tableView dequeueReusableCellWithIdentifier:@"header"];

            if (headerCell == nil) {
                headerCell = [[ cuartosReyCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"header"];

            }

            headerCell.cuartos.text = @"1/4 final";

            headerCell.backgroundColor = [UIColor colorWithRed:0.008 green:0.235 blue:0.451 alpha:1];

            return headerCell;
        }

        if (indexPath.row==1){

            localCopaReyCell *localCell = [tableView dequeueReusableCellWithIdentifier:@"local"];

            if (localCell == nil) {
                localCell = [[ localCopaReyCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"local"];

            }

            NSString *equipoLoc = [jornada valueForKey:@"id_local"];

            UIImage *img = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@.png",[self applicationDocumentsDirectory],equipoLoc ]];

            [localCell.escudo setImage:img];

            localCell.escudo.contentMode = UIViewContentModeScaleAspectFit;

            localCell.equiLoc.text = [equiposDic valueForKey:equipoLoc]; 

            localCell.equiLoc.textColor = [UIColor colorWithRed:0.004 green:0.29 blue:0.553 alpha:1];

            localCell.primerPartido.text = [jornada valueForKey:@"res_local"]; 

            localCell.primerPartido.textColor= [UIColor colorWithRed:0.722 green:0.145 blue:0.345 alpha:1];

            return localCell;
        }

        if (indexPath.row==2){

            visitanteCopaReyCell *visitanteCell = [tableView dequeueReusableCellWithIdentifier:@"visitante"];

            if (visitanteCell == nil) {
                visitanteCell = [[ visitanteCopaReyCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"visitante"];

            }

            NSString *equipoLoc = [jornada valueForKey:@"id_local"];

            UIImage *img = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@.png",[self applicationDocumentsDirectory],equipoLoc ]];

            [visitanteCell.escudo setImage:img];

            visitanteCell.escudo.contentMode = UIViewContentModeScaleAspectFit;

            visitanteCell.equiLoc.text = [equiposDic valueForKey:equipoLoc]; 

            visitanteCell.equiLoc.textColor = [UIColor colorWithRed:0.004 green:0.29 blue:0.553 alpha:1];

            visitanteCell.primerPartido.text = [jornada valueForKey:@"res_local"]; 

            visitanteCell.primerPartido.textColor= [UIColor colorWithRed:0.004 green:0.29 blue:0.553 alpha:1];

            return visitanteCell;

        } 
```

我不知道如何正确迭代 copaReyArray 并设置节和行。该数组包含 8 个字典，对应于每个部分（8 个部分，每部分 3 个单元格）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:09:44.370

要遍历数组，我首选的方法是`forin`：

```
for(Object *obj in array) {
    // do stuff with obj
} 
```

请记住，尽管`cellForRowAtIndexPath`表格视图中的数据源已经在一个循环中（一个隐藏在视野之外的某个地方）。您可以使用该`indexPath`参数来确定您所在的位置。它包含`section`和`row`属性。

# javascript - 更改 GEvent addlistener Google 地图

> ID：10656750
> 
> 赞同：0
> 
> 时间：2012-05-18T16:55:47.450
> 
> 标签：javascript, google-maps, dom-events

我正在尝试从 econym 调整一些 Google 地图 API 代码以满足某些需求：我需要将点击事件更改为 onmouseover，这可能吗？这是原始代码，我试图简单地将“点击”侦听器更改为鼠标悬停，但什么也没发生。

```
<?php
include("dbinfo.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1    /DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps</title>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=<?php echo $key; ?>" type="text/javascript"></script>
</head>
<body onunload="GUnload()">

<div id="map" style="width: 800px; height: 600px"></div>
<a href="inside.htm">Back to the tutorial page</a>

<script type="text/javascript">
//<![CDATA[

if (GBrowserIsCompatible()) {

  var polys = [];
  var labels = [];

  // === A method for testing if a point is inside a polygon
  // === Returns true if poly contains point
  // === Algorithm shamelessly stolen from http://alienryderflex.com/polygon/ 
  GPolygon.prototype.Contains = function(point) {
    var j=0;
    var oddNodes = false;
    var x = point.lng();
    var y = point.lat();
    for (var i=0; i < this.getVertexCount(); i++) {
      j++;
      if (j == this.getVertexCount()) {j = 0;}
      if (((this.getVertex(i).lat() < y) && (this.getVertex(j).lat() >= y))
      || ((this.getVertex(j).lat() < y) && (this.getVertex(i).lat() >= y))) {
        if ( this.getVertex(i).lng() + (y - this.getVertex(i).lat())
        /  (this.getVertex(j).lat()-this.getVertex(i).lat())
        *  (this.getVertex(j).lng() - this.getVertex(i).lng())<x ) {
          oddNodes = !oddNodes
        }
      }
    }
    return oddNodes;
  }

  // Display the map, with some controls and set the initial location 
  var map = new GMap2(document.getElementById("map"));
  map.addControl(new GLargeMapControl());
  map.addControl(new GMapTypeControl());
  map.setCenter(new GLatLng(42.16,-100.72),4);

  GEvent.addListener(map, "click", function(overlay,point) {
    if (!overlay) {
      for (var i=0; i<polys.length; i++) {
        if (polys[i].Contains(point)) {
          map.openInfoWindowHtml(point,"You clicked on "+labels[i]);
          //i = 999; // Jump out of loop
        }
      }
    }
  });

  // Read the data from states.xml

  var request = GXmlHttp.create();
  request.open("GET", "states.xml", true);
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      var xmlDoc = GXml.parse(request.responseText);

      // ========= Now process the polylines ===========
      var states = xmlDoc.documentElement.getElementsByTagName("state");

      // read each line
      for (var a = 0; a < states.length; a++) {
        // get any state attributes
        var label  = states[a].getAttribute("name");
        var colour = states[a].getAttribute("colour");
        // read each point on that line
        var points = states[a].getElementsByTagName("point");
        var pts = [];
        for (var i = 0; i < points.length; i++) {
           pts[i] = new GLatLng(parseFloat(points[i].getAttribute("lat")),
                               parseFloat(points[i].getAttribute("lng")));
        }
        var poly = new GPolygon(pts,"#000000",1,1,colour,0.5,{clickable:false});
        polys.push(poly);
        labels.push(label);
        map.addOverlay(poly);
      }
      // ================================================           
    }
  }
  request.send(null);

}

// display a warning if the browser was not compatible
else {
  alert("Sorry, the Google Maps API is not compatible with this browser");
}

// This Javascript is based on code provided by the
// Community Church Javascript Team
// http://www.bisphamchurch.org.uk/   
// http://econym.org.uk/gmap/

//]]>
</script>
</body>

</html> 
```

# php - 如何为登录页面创建会话？

> ID：10656753
> 
> 赞同：2
> 
> 时间：2012-05-18T16:56:16.517
> 
> 标签：php, forms

有两个输入字段，一个用于输入用户名作为密码。从数据库中获取用户名和密码，如果找到用户名和密码组合，则标志设置为 1。

```
$match = 1;
if ($match) {
    header('Location: http://www.example.com/myProfile');
} else {
    header('Location: http://www.example.com/errorpage');
} 
```

该页面仍然存在一个问题，即任何人都可以输入网址“www.example.com/myPforile”并访问内容。如何防止创建会话变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:08:29.247

这是我用来查看会话是否已设置的代码示例：

```
<?php
session_start();
if(!isset($_SESSION['userId'])){
    header('Location: http://example.com/errorpage');
}else{
    header('Location: http://www.example.com/myProfile');
}
?> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:06:49.650

这是我的建议。

首先确保包含`session_start();`在页面顶部。

对于 PHP 代码，您的登录页面应该如下所示。

```
if($_POST['submit']=='Login') {

$err = array();
// will hold our errors

if(!$_POST['email'] || !$_POST['password'])
     $err[] = 'All the fields must be filled in!';

if(!count($err)) {

$row = mysql_fetch_assoc(mysql_query("SELECT id FROM members WHERE email='{$_POST['email']}' AND pass='".$hash."'"));

if($row['id'])
$_SESSION['id'] = $row['id'];

}

} 
```

然后在您想要登录的任何页面上放置一些检查您创建的会话 ID 的内容。

```
if(!isset($_SESSION['id']) || empty($_SESSION['id'])) {

// redirect them to the login page, they have no session id set

} 
```

这是我所做的事情的基本示例。绝对扩展它并根据您的需要进行调整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:59:38.563

如果我正确理解您的问题，则说明您没有保护您的`myProfile`网页。

您需要做的是在成功登录时设置一个会话变量，并在`myProfile`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T17:01:55.553

我假设您的意思是您仍然可以在不登录的情况下访问该页面，在这种情况下您需要执行类似的操作

```
$logged in = $_SESSION['loggedin'];
if($loggedin) {
   die('whatever not allowed here or something')
} 
```

# java - 使用 Java 制作 Windows 快捷方式

> ID：10656757
> 
> 赞同：1
> 
> 时间：2012-05-18T16:56:38.763
> 
> 标签：java, windows, windows-7, windows-xp, command-prompt

我正在寻找一种在 Java 中为 WinXP、Vista 和 Win7 创建快捷方式的方法。除了快捷方式本身，我还需要能够指定快捷方式的图标。

该解决方案可以使用命令行命令，但是我不能使用 GPL 解决方案。

如果 WinXP 创建的快捷方式与 Vista/7 不同，那么我可以添加条件逻辑（我只需要知道如何为这两种情况执行此操作）。

## 背景

快捷方式的创建将在安装过程中进行。我们使用的安装程序是基于 Java 的，这就是为什么我正在寻找 Java 中的解决方案。因此，重要的是要注意快捷方式可能会有所不同，具体取决于用户选择的安装目录。如果没有一种干净的方法来做到这一点，那么我将不得不采用创建 VBScript 或 C# 程序来为我完成工作的推荐建议，然后从我的 java 代码中调用它。不过，我更喜欢更简单的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:59:05.047

部署应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。

> JWS 提供了许多吸引人的特性，包括但不限于启动屏幕、**桌面集成**、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、体系结构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

桌面快捷方式通常在 JNLP 文件中指定，用于提供启动应用程序所需的值。它可以包含一个图标。

这是我桌面的一小部分（Windows 7）。

![桌面快捷方式](../Images/f5a744254ef91e061c29ce4f2c0b677d.png)

RHS 上的两个快捷方式是 JWS 应用程序。底部的（Star Zoom Animation）定义了一个图标，而另一个使用默认的“咖啡杯”图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T17:03:19.647

“Windows 快捷方式”是 COM/ActiveX [Monikers](http://msdn.microsoft.com/en-us/library/aa741006%28VS.85%29.aspx)和 Win32 API 的组合。

这两者都不是由 Java 直接暴露给 JVM 环境的。

建议：只需编写一个 Java 程序调用的小 VBscript (getRuntime()/Process.exec())。

或者使用已经可以满足您的需求的软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:12:45.697

我为 win32 api 调用编写了一个 swt win32 扩展。

您可以使用它来制作 Windows 快捷方式。

[您可以从http://feeling.sourceforge.net](http://feeling.sourceforge.net)下载该库，它是开源的。

但是如果你想使用它，你应该依赖eclipse swt库。

![在此处输入图像描述](../Images/5148c0364773c8b8af20a6e3204c011e.png)

# r - 如何将数据框的名称转换为 R 中的字符串？

> ID：10656758
> 
> 赞同：20
> 
> 时间：2012-05-18T16:56:44.680
> 
> 标签：r

我正在遍历 R 中的数据框列表，并希望将它们的名称用作我保存绘图的文件名的一部分。

下面的代码是我尝试遍历数据帧，绘制第一列（var1）与第二列（var2）然后保存图。

```
first.data = data.frame( var1 = 1:4, var2 = 5:8 );
second.data = data.frame( var1 = 9:12, var2 = 13:16 );

for ( dataFrame in list(first.data, second.data) ) {
     plot( dataFrame[["var1"]], dataFrame[["var2"]] );
     dev.copy( pdf, paste( dataFrame, "_var1_vs_var2.pdf", sep="" ) );
     dev.off();
} 
```

我希望这个循环生成文件名形式为“first.data_var1_vs_var2.pdf”的 PDF 文件，但是数据框的名称被替换为框架中的第一列，所以我得到类似“c(1, 2, 3、4)_var1_vs_var2.exchemVbuffer.pdf"。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-18T17:17:40.597

我知道直接在列表中的数据帧上以这种方式工作的唯一方法是附加一个包含名称的注释，然后您可以使用它在循环中携带其名称：

```
df1 <- data.frame(var1=rnorm(10), var2=rnorm(10))
df2 <- data.frame(var1=rnorm(10), var2=rnorm(10))
comment(df1) <- "df1"
comment(df2) <- "df2"

for ( dataFrame in list(df1,df2) ) { 
     dFnm <- comment(dataFrame) 
     pdf(file=paste( dFnm, "_var1_vs_var2.pdf", sep="" ))
     plot( dataFrame[["var1"]], dataFrame[["var2"]] )     
     dev.off();
} 
```

（当对象作为循环变量传递时，您确实会丢失对象的名称。如果您`deparse(substitute())`在该循环中执行此操作，则会得到“dataFrame”而不是原始名称。）另一种方法是使用数据帧的名称，但随后您将需要使用`get`or `do.call`，这可能会有点混乱。这种方式看起来相当简单。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-29T12:38:39.383

下面的代码回答了标题中的问题，但对帖子正文中的问题可能有帮助，也可能没有帮助：

```
my.data <- read.table(text='
    x1    x2     x3
     1    10    111
     2    20    222
     3    30    333
     4    40    444
     5    50    555
', header = TRUE, stringsAsFactors = FALSE)

my.data

deparse(substitute(my.data))

# [1] "my.data" 
```

我在这里找到了这个解决方案：

[https://www.mail-archive.com/r-help@r-project.org/msg60789.html](https://www.mail-archive.com/r-help@r-project.org/msg60789.html)

经过相当广泛的搜索并考虑是否可能有助于其他人将代码包含在当前问题中，这是我在互联网上搜索时得到的第一个命中：`convert data frame name to string r`.

BondedDust 的回答确实提到了`deparse`。

这是似乎解决帖子正文中问题的代码。虽然我省略了绘图生成的代码：

```
df1 <- data.frame(var1=rnorm(10), var2=rnorm(10))
df2 <- data.frame(var1=rnorm(10), var2=rnorm(10))

list.function <-  function() { 

     sapply(c("df1", "df2"), get, environment(), simplify = FALSE) 
} 

my.list <- list.function()

my.df.names <- names(my.list)
# [1] "df1" "df2"

for (i in 1:length(my.list) ) {

     df.name <- my.df.names[i]
     print(df.name)

}

[1] "df1"
[1] "df2" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-18T17:49:51.740

略有不同的解决方案：

```
dataframe1 = data.frame(iv = rnorm(50), dv = rnorm(50))
dataframe2 = data.frame(iv = rnorm(50), dv = rnorm(50))
dataframe3 = data.frame(iv = rnorm(50), dv = rnorm(50))

LIST = list(dataframe1 = dataframe1,
            dataframe2 = dataframe2,
            dataframe3 = dataframe3)

for(i in 1:length(LIST)){
  pdf(file=paste(names(LIST)[i], paste(colnames(LIST[[i]]), collapse="."), 
                 "pdf", sep="."))
  plot(LIST[[i]][,1],LIST[[i]][,2], 
       xlab = colnames(LIST[[i]])[1], 
       ylab = colnames(LIST[[i]])[2],
       main = paste("Plot based on data in", names(LIST)[i]))
  dev.off()
  } 
```

# ruby-on-rails - 如何在 Rails 中设置继承类的网络列表

> ID：10656764
> 
> 赞同：0
> 
> 时间：2012-05-18T16:57:05.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, single-table-inheritance

在我的 Rails 应用程序中，我将有以下关系：

类位置 < ActiveRecord::Base; 结尾

类公园<位置; 端类露营地<位置；结束类 Trails < Location; 结尾

我的目标是能够将所有特定类型的位置链接在一起。例如，如果我选择一个公园，我希望能够看到与该公园相关的所有露营地和小径。同样，如果我要选择一个 Trail 或 Campground，我希望能够找到与 Trail 或 Campground 相关的其他类型的位置。

任何想法我可以如何实现这一目标？

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:02:42.610

根据您希望它们如何关联，您可能需要一个单独的关系/表来存储该信息。例如，您可以执行以下操作：

```
class Location < ActiveRecord::Base
  has_and_belongs_to_many :location_groups
end

class Park < Location; end class Campground < Location; end class Trails < Location; end

class LocationGroup < ActiveRecord::Base
  has_and_belongs_to_many :locations
end 
```

然后在同一位置组（可能属于多个位置组）中查找其他“位置”：

```
@park = Park.first
@group = @park.location_groups.first
@group.locations # All locations in that group 
```

希望对你有所帮助！

# java - 使用 JPA 处理集合更新

> ID：10656765
> 
> 赞同：3
> 
> 时间：2012-05-18T16:57:07.237
> 
> 标签：java, hibernate, jpa, collections

我有一组自定义对象，我想使用 JPA 以最简单的方式保存它。

我的`CustomObject`班级被映射到一张桌子。现在我想知道 JPA 是否提供了某种实用程序来处理对象收集。

特别是我想在我的集合中添加或删除对象，然后传递给一个`save(Collection<CustomObject> cco)`方法而不检查哪些对象已更改（我需要添加哪些对象以及删除哪些对象......）

可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T17:13:06.837

如果您正在寻找[`EntityManager`](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html)可以保存或更新集合的东西，答案是否定的。您将不得不循环并进行保存或更新。

如果您使用[`EntityManager.merge()`](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#merge%28T%29)API，如果记录存在，它将更新，否则将插入新记录。

就删除而言，JPA 或任何其他 ORM 将如何确定您要删除该实例，如果它是一个软删除，例如更新一列`is_active`，`true/false`那么可以通过调用 merge 来完成，但是如果您想要一个硬删除，那么 JPA 将无法自行确定，您必须手动进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T16:04:38.317

简要说明：所以我有用户及其相应的权限。我希望能够使用这些信息维护我的数据库。

这是我使用的解决方案：

**豆子 ：**

```
...
@Entity
public class User implements Serializable {
...
@OneToMany(mappedBy = "idu", cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH}, orphanRemoval = true)
private List<Userrights> userRightsList;
...
}

...
@Entity
public class Userrights implements Serializable {
...
@JoinColumn(name = "idu", referencedColumnName = "idu")
@ManyToOne
private User idu;
...
} 
```

**春天 ：**

```
@Component
public class UserBean implements IUser {

    @Autowired
    private MyPersistenceContext<User> pc;
    ...
    @Transactional
    @Override
    public void update(User user) throws Exception {
        pc.update(user, UPDATE_ERR);
    }
    ...
}

@Component
public class MyPersistenceContext<T> {
    @PersistenceContext
    protected EntityManager EM;
    ...
    public void insert(T object, String errMsg) {
        EM.persist(object);
    }
    public void update(T object, String errMsg) {
        EM.merge(object);
    }
...
}

public void delete(T object, String errMsg) {
    T forDeletion = null;

    if (!EM.contains(object)) {
        forDeletion = EM.merge(object);
    }

    if (forDeletion != null) {
        EM.remove(forDeletion);
    }
} 
```

**测试 ：**

```
@Test
public void testDb_InsertOrUpdateOfExistinguserRights() throws Exception {
        User u = null;
        try {
            u = IAS.DS().user().getByUsername("kor1 username");
        } catch (Exception e) {
        }

        List<Userrights> lur = new ArrayList<>();
        boolean newUser = true;

        if (u != null) {
            newUser = false;
            lur = IAS.DS().userRights().get(u);
        } else {
            u = new User("kor1", "kor1 prezime", "kor1 username", "kor1 pass");
        }

        if (lur.isEmpty()) {
            lur.add(new Userrights(u, IAS.DS().roles().get(1)));
            lur.add(new Userrights(u, IAS.DS().roles().get(2)));
            lur.add(new Userrights(u, IAS.DS().roles().get(4)));
        } else {
            lur.clear();
            lur.add(new Userrights(u, IAS.DS().roles().get(1)));
            lur.add(new Userrights(u, IAS.DS().roles().get(5)));
        }

        u.setUserRightsList(lur);
        if (!newUser) {
            IAS.DS().user().update(u);
        } else {
            IAS.DS().user().insert(u);
        }
    } 
```

# python - 将多个列表聚集在一起

> ID：10656771
> 
> 赞同：1
> 
> 时间：2012-05-18T16:57:33.910
> 
> 标签：python, events, python-3.x

我正在创建一个游戏，它具有键盘事件和一个事件系统，可以在其上注册功能，并且需要返回两个列表（任意大小）：游戏时间事件列表和真实列表时间事件（按此顺序）。赛事主办方随后将

我正在重构代码以执行此操作。在以前的系统中，事件会手动将它们的事件与主游戏时间/实时事件队列合并。

我正在尝试重构在按下/释放键时触发所有事件的代码。当前代码：

```
class KeyReleaseEventRunner
    GameEvents = []
    RealEvents = []        

    def __call__(self):
        """Run all relevant events."""

        # Run key-specific key release events
        KeyReleaseEvent[self.key]()

        # Run key-specific key toggle events
        KeyToggleEvent[self.key](False)

        # Run generic key release events
        KeyReleaseEvent(self.key)

        # Run generic key toggle events
        KeyToggleEvent(self.key, False) 
```

我的问题是如何合并这些函数中的所有事件。

**有没有更简单易读的方法来做到这一点？：**

```
 def __call__(self):
        """Run all relevant events."""

        # Run key-specific key release events
        g_events, r_events = KeyReleaseEvent[self.key]()
        self.GameEvents.extend(g_events)
        self.RealEvents.extend(r_events)

        # Run key-specific key toggle events
        g_events, r_events = KeyToggleEvent[self.key](False)
        self.GameEvents.extend(g_events)
        self.RealEvents.extend(r_events)

        # Run generic key release events
        g_events, r_events = KeyReleaseEvent(self.key)
        self.GameEvents.extend(g_events)
        self.RealEvents.extend(r_events)

        # Run generic key toggle events
        g_events, r_events = KeyToggleEvent(self.key, False)
        self.GameEvents.extend(g_events)
        self.RealEvents.extend(r_events)

        # Events must maintain sorted-ness
        self.GameEvents.sort()
        self.RealEvents.sort() 
```

我不想在 KeyReleaseEventRunner 上创建方法（这种情况在其他几个地方，并且经常使用局部变量而不是 GameEvents/RealEvents）。

**更一般地说，让这些函数返回两个列表是否有更好的解决方案？**

可以区分 g_events 和 r_events 中的事件。

**编辑：**

为了消除关于对象既可调用又可索引的任何混淆：

可能值得注意的是，实例`Event`是注册函数的接口，调用时会调用所有注册的对象。 `KeyToggleEvent`和`KeyReleaseEvent`(and also `KeyPressEvent`) 是 的子类的实例`Event`，其他模块可以通过它注册键特定事件（通过注册到`KeyReleaseEvent[key]`）和非键特定事件（通过注册到`KeyReleaseEvent`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:39:47.747

我想知道索引和调用组合的原因是它似乎使您的界面过于复杂。这可能不是您想听到的，但我不禁觉得您最好使用关键字参数而不是索引来指定事件子集。然后你可以创建一个参数列表和一个对象列表，并遍历它们。像这样的东西：

```
arg_list = [{'key':self.key, 'foo':False}, {'key':self.key}, ... ]
handlers = [KeyReleaseEvent, KeyToggleEvent, ...]
for handler, args in zip(arg_list, handlers):
    g_events, r_events = handler(*args)
    self.GameEvents.extend(g_events)
    self.RealEvents.extend(r_events)
self.GameEvents.sort()
self.RealEvents.sort() 
```

或者更简洁：

```
gevents_revents = [handler(*args) for handler, args in zip(arg_list, handlers)]
all_gevents, all_revents = zip(*gevents_revents)
self.GameEvents.extend(e for sublist in all_gevents for e in sublist)
self.RealEvents.extend(e for sublist in all_revents for e in sublist) 
```

当然，您仍然可以使用当前设置执行类似的操作。但我担心它会不那么优雅。

我还认为您应该考虑为您的事件队列使用不同的数据结构。您是否考虑过使用优先级队列而不是简单的列表，例如由 提供的优先级队列[`heapq`](http://docs.python.org/library/heapq.html)？这将允许您避免重复的 (O(n log n)) 排序。单独的插入和删除将是 O(log n)，这比使用列表的简单方法 (O(n)) 更好，但比更谨慎的方法 (O(1)) 更差。实际上，随着时间的推移，您会分散工作，因为单个项目会从队列中删除，而不是一次性完成所有工作。但是你仍然会得到 O(n) 合并！

这是否是正确的方法取决于您自己的情况。（例如，如果您需要查看未来事件的顺序，这不是最好的方法。）如果您有兴趣，我可以写更多关于此的内容，但基本思想是您可以使用`heapq.heapify`(O( n)) 而不是`sort`(O(n log n))。

```
arg_list = [{'key':self.key, 'foo':False}, {'key':self.key}, ... ]
handlers = [KeyReleaseEvent, KeyToggleEvent, ...]
for handler, args in zip(arg_list, handlers):
    g_events, r_events = handler(*args)
    self.GameEvents.extend(g_events)
    self.RealEvents.extend(r_events)
heapq.heapify(self.GameEvents)
heapq.heapify(self.RealEvents) 
```

然后从队列中取出最高优先级的项目：

```
next_game_event = heapq.heappop(self.GameEvents) 
```

# android - 我需要一些帮助来理解 Android 应用程序开发中的异常

> ID：10656773
> 
> 赞同：2
> 
> 时间：2012-05-18T16:57:36.937
> 
> 标签：android, eclipse

我仍然是开发 Android 应用程序的初学者，而且我总是遇到强制关闭。当我阅读 LogCat 中的错误时，我无法理解它们的含义，甚至我的代码也没有突出显示错误的原因。你能帮我吗，你怎么能修复这些错误，或者你怎么知道你有语法错误，缺少参数等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:26:59.747

Jemz 可以在您的日志猫中抛出不同的异常，以向您显示代码中的错误：（RuntimeException、NullPointerException、ClassNotFoundException、ClassCastException 以及您在编写 Android 应用程序时会发现的许多其他异常 :)

请记住，LogCat 是您的朋友，有时也是互联网！

例如，在 log cat 中，您会看到这样的红线：

```
01-10 02:10:31.861: E/AndroidRuntime(2216): java.lang.NullPointerException
01-10 02:10:31.861: E/AndroidRuntime(2216):     at   com.whooznear.android.ServiceServer.serverThreadProc(ServiceServer.java:61)
01-10 02:10:31.861: E/AndroidRuntime(2216):Caused By .... 
```

从 log cat 中的这些信息中，您可以获得：

您正在尝试使用 Null 对象，导致该异常的代码行是第 61 行，并且从由您引起的子句中，您可以对负责此异常的类有所了解：希望这有助于了解 logcat 的工作原理

# facebook - 从网站发布 Facebook 状态更新

> ID：10656774
> 
> 赞同：0
> 
> 时间：2012-05-18T16:57:43.643
> 
> 标签：facebook

我有一个网站，在转换过程之后，客户希望用户能够在 Facebook 和 Twitter 等上分享它。

我以前见过的概念，我的页面中有一个 Facebook 面板，可以直接在他们的 Facebook 上发布 - 很像 Twitter 分享：

![在此处输入图像描述](../Images/9e3eac3b362bf48a7e1917c2a10381a3.png)

问题是，鉴于我在网上找不到类似的东西，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:28:51.057

你可以看看[这个](http://nocturnsoft.com/devblog/?p=1745)或[这个](http://bobbelderbos.com/2011/08/example-facebook-php-sdk-post-to-friends-wall/)。[您可以使用 Javascript 来执行此](https://stackoverflow.com/questions/5845837/posting-to-friends-wall-using-facebook-javascript-sdk)操作，如此处所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:02:41.860

您在这里看到的是评论（[Facebook 评论](http://developers.facebook.com/docs/reference/plugins/comments/)）。在这个特定的屏幕短片中，您已登录并且没有人发表评论。

但您可能还想看看[发送按钮](http://developers.facebook.com/docs/reference/plugins/send/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:17:06.690

我过去并没有过多地研究这个，但在 facebook API 中可能有一些功能用于这类东西，无论这是否支持你正在寻找的东西，我不完全确定。以下是一些可能对您有用的链接：

[http://developers.facebook.com/docs/reference/api/status/](http://developers.facebook.com/docs/reference/api/status/)

[http://developers.facebook.com/docs/plugins/](http://developers.facebook.com/docs/plugins/) - 这可能对使用插件有用

# php - 正常运行时间远程计数器php

> ID：10656777
> 
> 赞同：0
> 
> 时间：2012-05-18T16:57:54.657
> 
> 标签：php, counter, ping, uptime

我想要的是超出我对 webdev 的基本知识的一点。

我正在寻找一种开发 php 计数器的方法，以向我展示网络上有多少时间在线计算机（因为我认为他应该通过对那台计算机的 ping 来解决）。

例子：

计算机 1：在线 - 02:45:02 h（仍在实时递增计数）

给定页面上的刷新，状态可能会更改为：

计算机 1：离线 - 00:00:00 h（可能计算机已关闭）

作为另一个刷新页面，状态可能会更改为：

计算机 1：在线 - 00:00:01 h（再次在线，开始新计数）

我已经有一个 ping 功能在工作。

额外：我可能需要在一种 LOG 中注册这些状态更改，但我现在把它放在后台！

编辑：我在 php 中询问它，但它可以以一种简单的方式完成，我在听你的！我对一些英语错误感到抱歉:)

我希望我也向我解释过！既然已经感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:14:38.037

如果你已经有一个 ping 函数工作，那么在我看来你可以简单地设置一个 cron 作业来每分钟运行一次该脚本（例如），然后将你的 ping 函数的结果存储在数据库中（MySQL 左右） .

然后，当您查看状态页面时，该页面会从数据库中获取所有计算机的最新记录，并显示它们是在线还是离线。如果他们在线，您可以计算当前时间与特定计算机在当前会话中首次在线的时间之间的差异，并显示该系统的正常运行时间。

当然，这假设您知道这些计算机运行的 IP 地址在它们在线时不会更改（尽管这看起来不太可能，但您可能需要记住这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:36:24.700

另一种选择是使用简单的 ajax 调用，根据用户的 IP 地址不断更新数据库记录。你可以让它每 10 秒或 30 秒运行一次，或者任何你喜欢的。您需要做的就是创建一个 MySQL 表，该表存储用户的 IP、创建条目的日期时间以及最后记录的日期时间。每个 ajax 调用它都会检查是否存在具有相同 IP 的行和在您的时间间隔内（10 秒或您设置的任何时间）的最后记录日期时间，如果是，则更新最后记录的日期时间，如果没有插入新行.

然后，在您的 php 页面上，您将检查在您的设置间隔（例如 10 秒）内最后记录日期时间的任何记录，如果是这样，您可以使用 javascript/jquery 时钟向您显示自记录日期时间以来经过的时间被创建。

另一个更容易的选择是简单地安装谷歌分析，他们有一个新的实时功能，你可以实时看到谁在你的网站上，他们正在看什么页面等等......

# javascript - 有没有办法在 IntelliJ 中查找 JavaScript 的方法结构？

> ID：10656783
> 
> 赞同：1
> 
> 时间：2012-05-18T16:58:48.077
> 
> 标签：javascript, intellij-idea

我想查看 JavaScript 文件原型中定义的函数列表。我正在寻找像`CTRL`+这样的快捷方式`F12`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:11:57.790

根据[IntelliJ IDEA 版本比较](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)，它仅在 Ultimate 版本中受支持。我已经检查过并且确实`CTRL`+`F12`在那里的 java 脚本文件中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T02:10:34.867

使用**Alt + 7**或**Ctrl + f12**将显示文件结构包括标签 JSP、HTML、Java。

# ruby-on-rails - Capistano 部署：更新在 git clone 失败

> ID：10656790
> 
> 赞同：3
> 
> 时间：2012-05-18T16:59:12.347
> 
> 标签：ruby-on-rails, ruby, git, amazon-web-services, capistrano

我正在尝试使用 Capistrano 部署更新，但出现以下错误。为什么这会失败？我之前已经部署到这个服务器。我已经包含了我的 deploy.rb 文件。

```
failed: "sh -c 'git clone -q --depth 1 git@github.com:username/sample_app.git /var/www    
/apps/sample_app/releases/20120518162414 && cd /var/www/apps/sample_app/releases/20120518162414 &&
git checkout -q -b deploy 1eac914d3b04039b8286416f51b4f223b626b267 && (echo 
1eac914d3b04039b8286416f51b4f223b626b267 > /var/www/apps/sample_app/releases/20120518162414   
/REVISION)'" on server.domain.com 
```

部署.rb

```
# The name of your app
set :application, "sample_app"

# The directory on the EC2 node that will be deployed to
set :deploy_to, "/var/www/apps/#{application}"

set :keep_releases, 3

# deploy with git
set :scm, :git
set :repository,  "git@github.com:username/sample_app.git"
set :git_shallow_clone, 1
set :branch, "master"
set :use_sudo, true

set :user, "ubuntu"
ssh_options[:keys] = ["/ServerKeys/key.pem"]
ssh_options[:forward_agent] = true
default_run_options[:pty] = true

# The address of the remote host on EC2 (the Public DNS address)
set :location, "server.domain.com"

# setup some Capistrano roles
role :app, location
role :web, location
role :db,  location, :primary => true

after 'deploy:update_code', 'deploy:symlink_db'

namespace :deploy do

 desc "Restart Application"
 task :restart, :roles => :app do
 run "touch #{deploy_to}/#{shared_dir}/tmp/restart.txt"
 end

 desc "Symlinks the database.yml"
 task :symlink_db, :roles => :app do
 run "ln -nfs #{deploy_to}/shared/config/database.yml #{release_path}/config/database.yml"
 end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:00:18.970

问题是它拥有我的根 ubuntu 无权访问根文件

# git - 为什么我的包文件中仍然存在大文件，在使用过滤器分支清理它们之后？

> ID：10656794
> 
> 赞同：19
> 
> 时间：2012-05-18T16:59:28.807
> 
> 标签：git, git-filter-branch

我重写了我的存储库的历史以删除一些使用`git filter-branch`. [我主要关注的是关于删除敏感数据](http://help.github.com/remove-sensitive-data/)的 Github 文章以及互联网上其他地方的类似说明：

删除大型 FLV：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch public/video/*.flv' --prune-empty -- --all 
```

删除原始参考：

```
rm -rf .git/refs/original/ 
```

清除 reflog：

```
git reflog expire --expire=now --all 
```

修剪不可达对象：

```
git gc --prune=now 
```

*积极*修剪不可到达的对象：

```
git gc --aggressive --prune=now 
```

重新包装东西：

```
git repack -A -d 
```

我的 gitdir 仍然是 205 MB，几乎完全包含在一个包文件中：

```
$ du -h .git/objects/pack/*
284K    .git/objects/pack/pack-f72ed7cee1206aae9a7a3eaf75741a9137e5a2fe.idx
204M    .git/objects/pack/pack-f72ed7cee1206aae9a7a3eaf75741a9137e5a2fe.pack 
```

使用[这个脚本](http://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/)，我可以看到我删除的 FLV 仍然包含在包中：

```
All sizes are in kB's. The pack column is the size of the object, compressed, inside the pack file.
size   pack   SHA                                       location
17503  17416  1be4132fa8d91e6ce5c45caaa2757b7ea87d87b0  public/video/XXX_FINAL.flv
17348  17261  b7aa83e187112a9cfaccae9206fc356798213c06  public/video/YYY_FINAL.flv
.... 
```

`git clone --bare my-repo`通过产量克隆存储库，`my-repo.git`其大小也是 205MB。

我该怎么做才能从包中删除这些（可能）未引用的对象并将我的存储库缩小到如果它们从未被提交时的大小？如果它们仍然以某种方式被引用，有没有办法告诉哪里？

**更新**

在尝试重新运行`git filter-branch`时，我收到了以下通知：

```
Cannot create a new backup.
A previous backup already exists in refs/original/
Force overwriting the backup with -f 
```

我验证了**没有**refs `.git/refs/original`，确实，该目录根本不存在。还有其他一些我不知道的 git 存储参考的方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T17:25:01.903

克隆存储库的新副本后，我能够**完全**按照上述方式运行命令，并获得预期的结果：我的 .git 目录从 205 MB 减少到 20 MB，并且从包文件。

第一次尝试也是在我没有对其进行任何修改的新克隆上执行的，因此对于为什么 FLV 文件继续留在包文件中，我没有令人满意的解释。

我最初提交了以下答案，认为我在 remove 之前运行会导致问题*，*`git repack -a`导致`.git/refs/original`原始 refs 被打包，因此当我删除时没有效果；我原来的 refs 仍然会引用大的 FLV 文件。然而，这似乎站不住脚。在新克隆的存储库副本上运行上述命令并立即添加 after似乎不会影响结果 - FLV 文件仍会从包文件中清除。我没有理由相信这与原始问题有关。*`.git/refs/original``git repack -a``git filter-branch`*

 ** * *

> 还有其他一些我不知道的 git 存储参考的方式吗？

**有**。事实证明，我对上面列出的命令顺序并不完全真实。我在running`git repack -a` **之前**已经 run了`rm -rf .git/refs/original`，Git 已经把 refs 打包了（待定在哪里；现在正在试验）。当我然后运行`rm -rf .git/refs/original`时，没有任何内容被删除。`git gc`无法缩小我的包文件，因为由于打包的引用，我仍然对旧文件有挥之不去的*引用*`refs/original`。*

# c++ - 函数返回的临时对象不总是 r 值吗？

> ID：10656795
> 
> 赞同：2
> 
> 时间：2012-05-18T16:59:29.960
> 
> 标签：c++, rvalue-reference, temporary-objects

```
struct Test
{
    Test()
    {}

    Test(const Test& other)
    {
        cout << "Copy" << endl;
    }

    Test(Test&& other)  
    {
        cout << "Move" << endl;
    }
};

Test* f()
{
    static Test t;
    return &t;
}

int main()
{   
    auto t = *f();
    return 0;
} 
```

输出是：**复制**

`*f()`显然是一个匿名临时对象，因此它应该是一个 r 值并且应该调用移动构造函数。为什么编译器将`*f()`其视为左值？

是编译器的错误，还是我的理解错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T17:04:27.763

的结果`f()`是类型为 的匿名临时对象`Test*`。[`f()`是一个右值](http://ideone.com/1GUiz)。

`*f()`通过所述指针执行间接寻址。与使用间接运算符时的情况一样，结果是左值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T17:04:10.080

> 为什么编译器将 *f() 视为左值？

因为它*是*一个左值。将 operator* 应用于指针时的结果*始终*是左值。而且您不能隐式地从左值移动。

记住运动的黄金法则：运动只有在*保证*安全的情况下才会发生（对于“保证”的特定定义）。

看看你的代码。您要从中移动的对象是否很明显将被破坏并且在移动后无法访问？如果没有，那么你*必须*使用`std::move`它来移动它；这告诉系统您要对因运动而发生的任何错误负责。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T17:03:12.873

实际上，返回的`f()`是一个指针。取消引用指针不会导致新对象出现。但是，您正在将返回值指向的内存地址中的任何内容复制到`t`. 在这种情况下，我当然希望得到一份副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T17:00:55.450

“*f() 显然是一个匿名的临时对象……”

不，这不对！它是一个静态对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T17:08:19.817

```
Test f()
{
    return Test();
}

int main()
{   
    auto t = f();
    return 0;
} 
```

*现在*您正在返回一个匿名临时 - 线索是创建一个临时并按值返回它而不将其绑定到名称。

正如其他所有人正确指出的那样，您正在做的是返回一个指向静态（非临时）命名（非匿名）对象的指针。*指针*可能是匿名临时的，但它指向的东西*不是*。

# php - PDO：行名作为结果数组的索引

> ID：10656796
> 
> 赞同：2
> 
> 时间：2012-05-18T16:59:32.223
> 
> 标签：php, mysql, pdo

我有这个“旧式”非 PDO MySQL 查询（代码没有收紧，只是为了准确说明我的意思）：

```
<?php
include('db_conn.php'); //Contains the connection info.

$category = 'cars';
$q = "SELECT * FROM `photos` WHERE `category` = '$category'";
$qResult = mysql_query($q);
$Numq = mysql_numrows($qResult);

$count = 0;
while ($count < $Numq)
{
$ThisID = mysql_result($qResult,$count,"id");
$ThisCaption = mysql_result($qResult,$count,"caption");
echo '<img src="images/'.$ThisID.'.jpg" alt="" />';
echo '<br />'.$ThisCaption.'<br /><br />';
$count++;
}
?> 
```

我想以 PDO 形式重新转换查询（我正在学习）。我写了这个：

```
<?php
//I've set out the connection info format in case there's anything wrong with it...
$db = new PDO('mysql:host=my_host;dbname=my_db_name;charset=UTF-8', 'db_user', 'user_password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); //I prefer to throw PHP errors.
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$category = 'cars';
$statement = $db->prepare("SELECT * FROM `photos` WHERE `category`=?");
$statement->execute(array($category));
$statement->setFetchMode(PDO::FETCH_BOTH);

while ($result = $statement->fetch()) {
//$result[0] = the ID, $result[1] = the caption...
echo '<img src="images/'.$result[0].'.jpg" alt="" />';
echo '<br />'.$result[1].'<br /><br />';
}
?> 
```

...在“旧”非 PDO 表单中，我只需指定列名即可捕获 ID 和标题。...但在 PDO 表单中，我必须指定 $result[0] 和 $result[1]。...如何更改 PDO 表单，以便不必显式指定（“记住”）数组的哪个成员是 ID，哪个是标题等（因为“旧”方法允许） ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:02:17.980

**`PDO::FETCH_BOTH`**您可能不想使用 as 获取模式，而是使用**`PDO::FETCH_ASSOC`**-- 将数据作为关联数组获取。

`$result['id']`然后你可以通过: ,`$result['caption']`等来访问数组的成员。

PDO 支持几种有趣的获取模式；包含

*   associative-array ：数组的键将是从数据库返回的列名；这可能是你习惯的
*   对象；包括您指定的类的实例

要了解可能的情况，您可能需要查看不同的**`PDO::FETCH_*`**常量 - 可以在此处找到列表：[**预定义常量**](http://fr2.php.net/manual/en/pdo.constants.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:03:16.410

```
$statement->setFetchMode(PDO::FETCH_ASSOC); 
```

[在此](http://www.php.net/manual/en/pdostatement.fetch.php)指定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:04:25.387

`PDO::FETCH_BOTH`应该允许您以关联数组和迭代器的形式访问结果，这样应该可以工作。您可以尝试将其更改为`PDO::FETCH_ASSOC`并查看是否有效，但也可以尝试明确说明查询中的列，而不是使用`*`.

# tfs - Team Foundation Server 2010：如何报告代码审查员

> ID：10656798
> 
> 赞同：0
> 
> 时间：2012-05-18T16:59:47.640
> 
> 标签：tfs

我与一家使用 Team Foundation Server 2010 (TFS) 进行源代码控制的公司合作。我们制定了一项政策，要求将文件检查到源代码控制中的人员输入代码审查者的姓名。这一直运作良好，因为我们得到了管理层对这项政策的良好支持。但是，我们发现有些人只是在代码审查员位置输入“N/A”，而不是某人的姓名。我们希望通过某种方式对此进行报告，或者以其他方式确定输入“N/A”的人员、时间和地点。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:23:22.717

如果您安装了[TFS 电动工具](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)，则可以从命令行运行该命令`tfpt searchcs`。这将打开一个 UI，允许您使用多个条件搜索变更集，代码审查员应该是您可以搜索的字段之一。

# scala - 什么时候需要 Scala 分号

> ID：10656799
> 
> 赞同：3
> 
> 时间：2012-05-18T16:59:54.630
> 
> 标签：scala, jvm, postfix-notation

我被困在工作中，电脑被锁定。但我正在尝试练习我的 Scala。我正在使用 Ideone.com，因为我什至无法安装`scalac`...

无论如何，这不是编译：

```
class DPt(var name: String, var x: Double, var y: Double){

        def print = println("DPt; name: " + name + " x: " + x + " y: " + y)
}

object Main {
  def main(args: Array[String]) {
        val pt0 = new DPt("Joe", 1.0, 1.0)
        println("checking generated accessor: " + pt0.x)
        pt0 print
        pt0.x_=(3.0)
        pt0 print
  }
} 
```

我从 Ideone.com scala 编译器收到这条消息：

```
Main.scala:12: error: Unit does not take parameters
    pt0 print
            ^
one error found
spoj: The program compiled successfully, but Main.class was not found.
      Class Main should contain method: def main(args: Array[String]). 
```

但是，当我在语句末尾添加分号时，如下所示：

```
class DPt(var name: String, var x: Double, var y: Double){

        def print = println("DPt; name: " + name + " x: " + x + " y: " + y)
}

object Main {
  def main(args: Array[String]) {
        val pt0 = new DPt("Joe", 1.0, 1.0);
        println("checking generated accessor: " + pt0.x);
        pt0 print;
        pt0.x_=(3.0);
        pt0 print;
  }
} 
```

我发现 Scala 中的中缀和后缀表示法*很棒*，但我一定遗漏了一些东西。为什么 Scala 不将行尾视为语句的结尾？

* * *

这个博客上的第二张海报似乎有答案。Scala 的人应该继续这样做。这样的烦恼....虽然这是我在这种原本美丽的语言中遇到的第一个令人讨厌的问题。 [http://www.scala-lang.org/node/4143](http://www.scala-lang.org/node/4143)

文档中的另一个解释：http: [//docs.scala-lang.org/style/method-invocation.html](http://docs.scala-lang.org/style/method-invocation.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T17:05:05.690

当您删除点时，Scala 假定您正在使用`arg0 operator arg1`语法。类似这样的东西也是一样的`1 + 2`：Scala 假设一个参数将跟随在操作符之后。

所以，假设这`print`是一个接受参数的方法，它会去下一行寻找一个。你会得到一个错误，因为这实际上不起作用：`print`不接受参数。

通过添加分号，您告诉编译器该方法肯定不会有参数，因此它将停止寻找。这有助于编译器找出`print`不需要参数，所以一切都很好。

要解决这个问题，只要说`pt0.print`，你会没事的。

# java - jersey http客户端自定义请求方法

> ID：10656812
> 
> 赞同：6
> 
> 时间：2012-05-18T17:01:22.827
> 
> 标签：java, rest, jersey, httpurlconnection

使用以下代码，使用`jersey`：

```
 <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-apache-client4</artifactId>
    <version>1.13-b01</version> 
```

我在使用自定义请求方法时遇到问题，例如 FOOBAR、PATCH、SEARCH 等。那些在`httpUrlConnection`.

```
 DefaultClientConfig config = new DefaultClientConfig();
 config.getProperties().put(URLConnectionClientHandler.PROPERTY_HTTP_URL_CONNECTION_SET_METHOD_WORKAROUND, true);

 Client c = Client.create(config);
 Form f = new Form();
 f.add("id", "foobar");

 WebResource r = c.resource("http://127.0.0.1/foo");
 String methodName = "foobar";
 String response = r.type(MediaType.APPLICATION_FORM_URLENCODED_TYPE).accept(MediaType.APPLICATION_JSON_TYPE).header("USER-AGENT", "my-java-sdk /1.1").method(methodName.toUpperCase(), String.class, f); 
```

结果是以下异常：

```
 com.sun.jersey.api.client.ClientHandlerException: java.net.ProtocolException: Invalid HTTP method: FOOBAR 
```

我尝试了各种方法来尝试解决这个问题，但没有成功。

*   [http://java.net/jira/browse/JERSEY-639](http://java.net/jira/browse/JERSEY-639)已经在上面实现了`config.getProperties()`。仍然收到错误
*   当我切换到 apache http 客户端时，我收到来自服务器的 411 错误，该服务器接收所有非 GET 和非 PUT 请求的请求。

长话短说，我想实现通过 Java 提供的类似功能：

*   [使用 Android 使用自定义请求方法](https://stackoverflow.com/questions/9742273/consuming-custom-request-methods-with-android)
*   [使用 iOS5 使用自定义请求方法](https://stackoverflow.com/questions/10076883/consuming-custom-request-methods-with-ios5)

预先感谢您的反馈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-08T02:46:53.007

使用 Jersey 2.x `Client`，我们将设置属性

*   [`HttpUrlConnectorProvider.SET_METHOD_WORKAROUND`](https://jersey.github.io/apidocs/latest/jersey/org/glassfish/jersey/client/HttpUrlConnectorProvider.html#SET_METHOD_WORKAROUND)

至`true`

```
Client client = ClientBuilder.newClient();
client.property(HttpUrlConnectorProvider.SET_METHOD_WORKAROUND, true);
String response = client.target(url).request().method("PATCH", entity, String.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T19:05:51.303

这不是一个错误，它是一个功能。:)

不过实话说。HttpUrlConnection 不允许您使用自定义 HTTP 方法，因为：

> // 这个限制将阻止人们使用这个类来
> 
> // 使用 java 试验新的 HTTP 方法。

所以你不能使用（在java 6中）以外的其他方法：“GET”、“POST”、“HEAD”、“OPTIONS”、“PUT”、“DELETE”、“TRACE”

Jersey 提供了一种解决方法，它使用反射来省略此检查：

```
DefaultClientConfig config = new DefaultClientConfig();
config.getProperties().put(URLConnectionClientHandler.PROPERTY_HTTP_URL_CONNECTION
     _SET_METHOD_WORKAROUND, true);
Client c = Client.create(config);
WebResource r = c.resource("http://google.com");
String reponse = r.method("FOOBAR", String.class); 
```

# c# - 如何在具有可变字段的 .NET 应用程序中包含 HTML 文档？

> ID：10656815
> 
> 赞同：5
> 
> 时间：2012-05-18T17:01:47.467
> 
> 标签：c#, .net, html, embedded-resource

我有一个 C#/.NET 应用程序，它当前使用 StringBuilder 生成 HTML 电子邮件。

一种新的消息格式已经被开发出来，现在包括更多的格式和 CSS。我想避免使用 StringBuilder 附加文​​件的每一行，所以我认为最好将 HTML 文件作为资源包含在内。

但是，CSS 和 HTML 中有大约 21 个变量，我需要随时更改它们。我的第一个想法是用标准的 String.Format 占位符（{0}、{1} 等）替换它们，但是在查看 HTML 时，验证会抱怨这些。

对于存储 200 行 HTML 文件并在包含在电子邮件中之前更改部分内容的最佳做法，我感到很困惑。

例子：

在 CSS 中，我需要更改某些元素的颜色，如下所示：

```
#header
{
    background-color: {0};
} 
```

在 HTML 中，我需要更改字符串和 URL，如下所示：

```
<img src="{1}" />
<span>{2}</span> 
```

似乎最好将 HTML 作为资源包含在项目中，但是由于上述验证错误，尝试将 String.Format 与该资源一起使用，无论它是否有效，都是一种糟糕的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:13:12.080

我想你可以试试[t4 模板](http://msdn.microsoft.com/en-us/library/ee844259.aspx)

使用 t4 模板，您甚至可以做更复杂的事情，例如

```
<table>
<# for (int i = 1; i <= 10; i++)
   { #>
     <tr><td>Test name <#= i #> </td>
         <td>Test value <#= i * i #> </td> </tr>
 <# } #>
</table> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:39:20.877

您可以使用 Razor 引擎呈现 HTML 字符串：

```
<h2>Items:</h2>
@foreach(var item in list)
{
    <p>Item: @item.Description</p>
} 
```

这些答案[是否可以在 asp.net 之外使用 Razor View Engine](https://stackoverflow.com/questions/3628895/is-it-possible-to-use-razor-view-engine-outside-asp-net)提供一些不错的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T17:14:08.433

不要使用 {1}，而是使用名称，例如 Table1HeaderImage，然后不要使用 String.Format，而是使用 String.Replace。然后，您可以将一组东西放入 html 中，快速循环，甚至是用户版本自定义的额外属性等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T08:37:15.740

您可以创建一个预处理的 T4 文本模板文件。 [http://msdn.microsoft.com/en-us/library/ee844259](http://msdn.microsoft.com/en-us/library/ee844259) T4 文本模板的优点之一是它们可以用来自动生成任何类型的文本文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T17:16:18.953

我所做的是这样的：

```
StreamReader reader = new StreamReader(Server.MapPath("Email/email.html"));
string email_html = reader.ReadToEnd();
reader.Close();

email_html = email_html.Replace("[link]", activation_link); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T17:54:50.677

我会使用`<%0%>`,`<%1%>`等代替`{0}`,`{1}`等。

在运行时，您将：

1.  `{`用`{{`和`}`替换所有`}}`
2.  `<%`用`{`和`%>`替换所有`}`
3.  `String.Format()`

您也可以按照 Val Bakhtin 的建议进行操作，并使用名称而不是数字。那么这个过程将很简单：

1.  全部替换`<%name%>`为`dictionary["name"]`

# ios - ASIHTTPRequest 和 jpeg 上传的问题

> ID：10656816
> 
> 赞同：1
> 
> 时间：2012-05-18T17:01:48.383
> 
> 标签：ios, image, ipad

当我使用 .png 文件执行以下操作时，一切正常。

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setDelegate:self];
[request setTag:APICreateUserRequestType];

picture = [UIImage imageNamed:@"pic.jpg"];
NSData *imageData = UIImageJPEGRepresentation(picture, 1.0);
[request setData:imageData withFileName:@"profilepic.jpg" andContentType:@"image/jpeg" forKey:@"picture"];

[request startAsynchronous]; 
```

但是，如果我像上面那样选择一个 jpg 图像，它会在“startAsynchronous”上崩溃，并带有 BAD ACCESS。

我的错误是什么？

克里斯

# ios - 在 UIWebView 中加载 twitter 主题标签提要

> ID：10656817
> 
> 赞同：0
> 
> 时间：2012-05-18T17:01:49.323
> 
> 标签：ios, twitter, uiwebview, hashtag

我正在尝试在 UIWebView中加载 Twitter 主题标签提要（例如[http://www.twitter.com/#technology ）。](http://www.twitter.com/#technology)但我只是被重定向到 Twitter 登录页面。当我在 Chrome 或 Safari 上尝试相同的操作时，我同样会被定向到登录页面，但随后它会快速重定向到主题标签提要。

有什么方法可以确保我的 UIWebView 以相同的方式重定向，以便我可以显示主题标签提要页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:09:31.637

尝试使用特定的移动视图。这应该可以防止 Twitter 尝试将您重定向到登录。

```
https://mobile.twitter.com/search/%23hashtag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:19:59.347

为什么不自己创建提要？您可以向 twitter 的 JSON 搜索发布请求并以您自己的方式发布值，而无需 UIWebView。

链接是[http://search.twitter.com/search.json](http://search.twitter.com/search.json)？并且搜索参数是 q，所以[http://search.twitter.com/search.json?q=%23hashtag](http://search.twitter.com/search.json?q=%23hashtag)将搜索“#hashtag”。

# hadoop - 如何检查hadoop序列文件是否为空

> ID：10656818
> 
> 赞同：0
> 
> 时间：2012-05-18T17:01:52.707
> 
> 标签：hadoop, hdfs

我注意到在这种情况下，这些文件的大小是恒定的（在我的情况下，我选择了 128 字节的压缩）。是否有 API 或方法来检查文件是否没有任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:34:32.027

除了打开文件并尝试获取第一个键/值对之外，没有。原因是没有标题详细说明每个“块”中的记录数（主要是因为数据是流出的，所以在写入标题时，没有关于键数的先验知识）。

以前有一些关于如何避免创建这些“空”文件的线程，但唯一真正的方法是创建自己的 OutputFormat 和 OutputComitter，它跟踪输出值的数量，并且不提交文件如果没有写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:19:12.310

在 HDFS 或 S3 中打开和检查序列文件的一种简单解决方案

**hadoop fs -text path_of_sequence_file**

# cordova - Phonegap 谷歌认证

> ID：10656820
> 
> 赞同：2
> 
> 时间：2012-05-18T17:02:00.787
> 
> 标签：cordova, google-authentication

这甚至可能吗？我尝试了很多解决方案：oAuth2，查看了 Twitter oauth 示例，clientLogin ......而且它需要在 Phonegap (Javascript) 中工作。我很难弄清楚这一点，我需要的只是用户的电子邮件（已验证）。有人试过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:42:55.870

这是可能的，但有点像个婊子，请原谅我的法语。首先，您需要注册您的应用程序。我正在将 Google oAuth2 集成到 Android 应用程序中，因此我选择了“已安装的应用程序”作为选项。G 给了我一个客户端 ID，我必须传递一堆其他参数，包括一个虚假的重定向 uri，以便代码出现在页面中，包括标题和 .

最坏的情况——这就是我所处的情况——如果你和我有类似的情况，请将用户重定向到浏览器进行身份验证，并要求他们将给出的代码复制回你的应用程序。之后使用它。

或者，如果您足够聪明，可以在自己的页面中加载身份验证页面并直接获取代码，请使用它。

一旦我解决了这个问题，我会回复你的。

高温高压

编辑：好的，我已经开始工作了。我将在谷歌代码上上传一个示例项目，在几个小时内寻找 googleoauth2phonegap。[http://code.google.com/p/googleoauth2phonegap/](http://code.google.com/p/googleoauth2phonegap/)

# asp.net-mvc-3 - MVC3 - 忽略路由正则表达式

> ID：10656822
> 
> 赞同：0
> 
> 时间：2012-05-18T17:02:13.770
> 
> 标签：asp.net-mvc-3

我似乎无法让 MVC 忽略此路由（如果文件不存在，则抛出未找到控制器 - 这种情况偶尔会发生，如果生成未完成，则预计会发生这种情况）

```
 /WebDirectory/signalFiles/52f23308-6d2d-40e6-9048-319e0539c83d.txt 
```

我现在正在 Global.ASAX 中尝试这个来消除错误

```
 routes.IgnoreRoute("{*signalstxt}", new { signalstxt = @".*/signalFiles/.*.txt" }); 
```

这在 RegEx 测试器中完美匹配，但在实际应用程序中不执行任何操作

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:33:07.927

由于 IIS 7 和 MVC3 通过托管管道处理请求的方式，需要[付出大量努力](https://stackoverflow.com/questions/8387500/iis-understand-static-files-in-mvc-as-dynamic-content)来防止通过路由引擎运行静态文件请求。我已经看到一些证据表明将静态文件移动到 Web 应用程序目录之外的虚拟目录会产生预期的效果，但我没有机会亲自测试这一点。

**编辑**

澄清：您看到的异常是 MVC3 操作的正常部分。这是处理程序如何通知 IIS 管道它无法处理请求，从而调用下一个处理程序。您可以通过在 Visual Studio 调试设置中启用“仅我的代码”来防止它干扰您的调试。

# javascript - .NET 4.0 转换后的 Javascript 问题

> ID：10656824
> 
> 赞同：0
> 
> 时间：2012-05-18T17:02:28.807
> 
> 标签：javascript, .net, .net-4.0, addeventlistener

我使用自动转换向导将一组 Web 服务从 1.1 升级到 4.0。在解决方案中还有一个网站。由于转换它的行为不正确。

在一个页面上，有一个 javascript 验证功能，用于检查是否在允许运行报告之前检查了一组复选框中的至少一个。该页面回发到自身以显示报告，并且有一个“新报告”链接按钮可以返回到搜索条件页面。

在转换后的页面中单击新报告 lb 时，即使复选框不存在，它也会触发该验证并显示“请选择标准”。我可以解决这个问题，但我想了解为什么会发生这种情况，因此我不必在整个站点上测试类似问题。

也许相关，或者更重要的是，现在我到处都收到“Microsoft JScript 运行时错误：对象不支持属性或方法'addEventListener'”，显然来自 Infragistics 脚本，即使我正在使用 IE9 进行调试。在一台装有 IE8 的旧机器上运行本网站的 1.1 版本没有任何这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:08:00.207

关于您的最后一段，对于 8 之后的 IE 版本，您需要使用 attachEvent 而不是 addEventListener。IE 9+ 不再支持它。这也可能是您遇到其他问题的原因。

[http://msdn.microsoft.com/en-us/library/ms536343%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms536343%28v=vs.85%29.aspx)

例子：

```
div.attachEvent("onmousedown", handleMouseDown); 
```

# scala - Akka 和内置 Scala Actors：本地使用有什么区别？

> ID：10656825
> 
> 赞同：8
> 
> 时间：2012-05-18T17:02:41.753
> 
> 标签：scala, actor, akka

我知道[Akka](http://akka.io)是一个强大的（[演员模型](http://en.wikipedia.org/wiki/Actor_model)）框架，能够在分布式系统上同时运行任务。我知道[Scala](http://www.scala-lang.org/)中的actor模型实现[有很好的比较](http://doc.akka.io/docs/misc/Comparison_between_4_actor_frameworks.pdf)。但我仍然想知道使用 Akka 在多核机器上进行本地计算是否比内置 Scala 演员有什么好处？就内存/CPU 使用而言，其中哪一个更有效？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T20:18:42.510

Scala Actors 被提取到 Scala 2.10 的自己的 jar 中，并且也将被弃用。Akka 将作为继任者发货。至于效率，Akka 有一个非常可靠的故事。随意对自己进行基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:05:48.750

Scala 2.10 已弃用内置 Scala Actors，默认库为 Akka。请参阅[Scala 2.10 发布公告](http://www.scala-lang.org/node/27499)

这是[Akka 的迁移指南](http://docs.scala-lang.org/overviews/core/actors-migration-guide.html)。

# paypal - 剩余天数取消 PayPal 定期付款

> ID：10656828
> 
> 赞同：7
> 
> 时间：2012-05-18T17:02:46.543
> 
> 标签：paypal, paypal-ipn

我有一个基于订阅的会员资格，但是我遇到了以下问题：

1.  用户于 2012 年 5 月 1 日订阅，每月无限期付款。
2.  IPN 发送到服务器，激活订阅
3.  用户于 2012 年 5 月 3 日取消。
4.  IPN 发送到服务器，订阅被取消，服务器取消会员资格。

然而，由于用户在 2012 年 5 月 1 日订阅，如果他要在一个月前取消，他还有几天的时间。有什么办法可以解决这个问题？PayPal 是否会针对此类问题发送任何 IPN？

我想到的一个解决方案是每天晚上做一个 cronjob 来检查这个月是否到了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:51:05.847

当我们在自己的网站上实现订阅服务时，我们基本上是这样处理事件的：

*   **订阅确认**- 我们在我们的服务器上将用户的订阅标记为“自动续订”
*   **收到的钱**- 我们根据商定的期限（每月或每年）移动用户的订阅到期日期；使用试用期，此事件仅在试用期结束时发送
*   **订阅取消**- 我们将用户在我们服务器上的订阅标记为“手动续订”
*   **退款**- 我们根据商定的期限将用户的订阅到期日期向后移动。

用户登录后，我们会检查订阅是否已过期（如果您将其存储在数据库中，这很容易）。

基本上，订阅事件与支付事件是分开的。订阅可以取消，但这并不意味着付款会被退还；那将是一个单独的事件。

顺便说一句，支付和订阅事件可以以不同的顺序出现（例如，可以先支付，然后是订阅通知）；满足这一点很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T06:31:08.943

当用户订阅时，贝宝将创建一个定期付款配置文件，这意味着用户必须在订阅之日（例如 5 月 1 日、6 月 1 日、7 月 1 日）每月（每年，每天，取决于配置文件）支付总金额. 当用户取消时，他取消了支付配置文件，而不是支付本身。所以在那之后贝宝不会要求任何其他付款。如果您想为用户提供剩余天数，您必须存储有关订阅的信息。

您可以将他订阅的日期和取消的日期存储在数据库中。从那里您可以知道用户还有多少天。Paypal 在创建定期付款配置文件、付款本身以及取消时都会发送 IPN 消息。

您可以在此处找到有关 IPN 消息的信息： [https ://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T18:52:28.637

IPN 消息中的 D/V 对之一是**next_payment_date**后跟这样的日期：**2013 年 7 月 6 日 03:00:00 PDT**

**除了 IPN 消息中的profile_status**值之外，我将日期转换为 YYYY-MM-DD 并将其存储在数据库中。当个人订阅时，我在数据库中还有一个简单的 TRUE/FALSE 订阅者单元格。

因此，如果订阅者取消，他们的**profile_status**在数据库中更新为“已取消”，**订阅者**单元格更新为 FALSE。

当用户访问高级内容时，数据库中的**订阅者**单元格被检查为 TRUE。如果是这样，他们就会得到内容。如果为 FALSE，则检查**profile_status**单元格，如果该单元格为“已过期”或 NULL，则它们不会获得内容。如果单元格的内容为“已取消”，则**提取 next_payment_date**数据，添加一天（以处理时区问题），如果大于当前时间，则加载高级内容。如果它小于当前日期，则他们的**profile_status**单元格将更新为“已过期”并且他们没有获得内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-03T20:00:30.483

这是一个相当古老的（2012 年）问题，但当我在 2019 年寻找该信息时，我能够用谷歌搜索它。

目前，用于取消付款的 PayPal webhook 包括下一次付款的日期。这意味着您可以将用户状态标记为已取消，并将其帐户到期日期设置为下一个付款日期。

相关信息在里面`.resource.billing_info.next_billing_time`

# sql - 在 SQL Server 中删除字母字符

> ID：10656830
> 
> 赞同：3
> 
> 时间：2012-05-18T17:02:57.573
> 
> 标签：sql, sql-server

我需要改变

```
ABC2001  
ABCD2001 
ASDF111111 
```

到

```
2001
2001
111111 
```

我需要删除 SQL Server 中的字母字符，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:08:34.497

下面的功能会照顾

```
create function NoLetters(@string2number varchar(200)) 
 returns varchar(200)
as
begin
  declare @c int
  declare @num varchar(200)
  set @num = ''
  declare @txtCurrent char(1)
  set @c=1
  while @c<=len(@string2number)
    begin
     set @txtCurrent = substring(@string2number,@c,1)
     if ascii(@txtCurrent) between 48 and 57
       set @num = @num + @txtCurrent
     set @c=@c+1
   end
 return @num
end 
```

# python - Python日志记录：每个进程不同的日志记录目标

> ID：10656831
> 
> 赞同：2
> 
> 时间：2012-05-18T17:03:04.597
> 
> 标签：python, logging, multiprocessing

我刚开始使用 Python 日志记录模块，有些东西我听不懂。

我正在编写一个按以下方式工作的脚本：

**第一部分**（单个进程）：它获取一些数据来计算（如何计算并不重要）。在这里，我通过以下方式创建一个记录器：

```
import logging
logging.basicConfig(format='%(asctime)-6s: %(name)s - %(levelname)s - %(message)s')
logger = logging.getLogger('Pipeline')
logger.setLevel(logging.INFO)
logger.warning('Pipeline started') 
```

换句话说，我登录到屏幕。

**第二部分**（多处理）：我创建了几个进程（数据分析真的很费时间和CPU）来分析之前找到的数据。

现在我希望每个进程只记录到​​不同的文件而不记录到屏幕。

我写的是：

```
fh = logging.FileHandler('/tmp/'+multiprocessing.current_process().name+'_worker.log')
fmt = logging.Formatter(%(asctime)-6s: %(name)s - %(levelname)s - %(message)s)
fh.setFormatter(fmt)
local_logger = logging.getLogger(multiprocessing.current_process().name+'_worker')
local_logger.addHandler(fh)
local_logger.warning(multiprocessing.current_process().name + ' (worker) Process started') 
```

我得到的是每个进程都记录到不同的文件，但也记录到屏幕上！

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:40:39.150

怀疑您的本地记录器正在将其日志消息向上传递到顶层，在那里它得到输出到标准输出。尝试关闭本地记录器上的传播。我相信你可以这样做：

```
local_logger.propagate = False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T19:00:25.557

你可以按照 Art Swri 的方式来做，或者只是省略`basicConfig()`调用。这就是将控制台处理程序添加到根记录器的原因。

# asp.net-mvc - 如何使用 ASP.NET MVC ApiController 获取 GET 参数

> ID：10656841
> 
> 赞同：30
> 
> 时间：2012-05-18T17:03:28.543
> 
> 标签：asp.net-mvc, api, asp.net-mvc-4, asp.net-web-api

问这个问题我觉得有点荒谬，但我找不到一种方法来获取 `/api/foo?sort=name`例如 get 请求的参数。

在`ApiController`课堂上，我给了一个`public string Get()`。Putting`Get(string sort)`是`/api/foo`一个错误的请求。中的请求实例`ApiController`类型为`System.Net.Http.HttpRequestMessage`。它没有`QueryString`or`Parameters`属性或任何东西。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-03T10:44:24.487

ApiController 设计为在没有 HttpContext 对象的情况下工作（使其可移植，并允许它在 IIS 之外托管）。

您仍然可以访问查询字符串参数，但它是通过以下属性完成的：

```
Request.GetQueryNameValuePairs() 
```

这是一个遍历所有值的示例循环：

```
foreach (var parameter in Request.GetQueryNameValuePairs())
{
     var key = parameter.Key;
     var value = parameter.Value;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-09T16:30:33.193

你可以使用

```
HttpContext.Current.Request.QueryString 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-22T07:23:53.540

这是一个从请求中获取查询字符串 q 并使用它来查询帐户的示例：

```
 var q = Request.GetQueryNameValuePairs().Where(nv => nv.Key =="q").Select(nv => nv.Value).FirstOrDefault();
        if (q != null && q != string.Empty)
        {
            var result = accounts.Where(a=>a.Name.ToLower().StartsWith(q.ToLower()));
            return result;
        }
        else
        {
            throw new Exception("Please specify a search query");
        } 
```

可以这样调用：

url/api/帐户？q=p

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-28T00:49:08.763

将所有查询字符串名称/值对放入一个变量中：

```
IEnumerable<KeyValuePair<string, string>> queryString = request.GetQueryNameValuePairs(); 
```

然后提取指定的查询字符串参数

```
string value = queryString.Where(nv => nv.Key == "parameterNameGoesHere").Select(nv => nv.Value).FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-19T07:28:45.857

您还可以使用以下

```
var value = request.GetQueryNameValuePairs().Where(m => m.Key == "paramName").SingleOrDefault().Value; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T17:07:23.020

您正在尝试构建 OData Web 服务？如果是这样，只需返回一个 IQueryable，Web API 将完成剩下的工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-03T14:27:04.877

如果我们有适合该请求的模型

例如

```
 public class JustModel 
    {
      public int Id {get;set;}
      public int Age {gets;set;}
    } 
```

并像这样查询

```
/api/foo?id=1&Age=10 
```

你可以只使用 `[FromUri]`属性

例如

```
public IHttpActionResult GetAge([FromUri] JustModel model){} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-08T21:52:52.897

添加默认值可以完成这项工作：

```
public string Get(string sort="") 
```

# android - Robolectric - ShadowCanvas - InvocationPlan.toString() 上的 NullPointerException

> ID：10656842
> 
> 赞同：0
> 
> 时间：2012-05-18T17:03:34.370
> 
> 标签：android, reflection, robolectric

尝试执行 ShadowCanvas.getHeight() 时，我在 ShadowWrangler.InvocationPlan.toString() 中收到 NullPointerException

我的应用程序代码：

```
public float getCanvasHeight() {
    return mCanvas.getHeight();
} 
```

抛出异常：

> 方法引发了“java.lang.NullPointerException”异常。无法评估 com.xtremelabs.robolectric.bytecode.ShadowWrangler$InvocationPlan.toString()

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:12:44.930

我猜这会出现在您的调试器中，但在您实际运行代码时不会被抛出？

调试器在显示变量时可能会调用 toString()，并且在 toString() 的实现中使用的某些值尚未初始化。因此，它不会向您显示内容字符串，而是显示此异常。

除非您在代码中实际调用 toString()，否则不会在运行时引发此异常，尽管未初始化的值可能是其他地方的问题。

# powershell - Powershell UNC 路径不支持异常

> ID：10656846
> 
> 赞同：3
> 
> 时间：2012-05-18T17:04:04.920
> 
> 标签：powershell, filepath, unc

好吧，我已经为这个挣扎了足够长的时间。我有一个项目来比较两个文件夹，两台服务器各有一个。我们将源服务器上的文件与目标服务器上的文件进行比较，并将创建一个源文件列表，一旦目标服务器上的更新完成，就需要刷新这些文件。

这是我的脚本（非常感谢[http://quickanddirtyscripting.wordpress.com](http://quickanddirtyscripting.wordpress.com)的原文）：

```
param ([string] $src,[string] $dst)

function get-DirHash()
{
    begin 
    {
        $ErrorActionPreference = "silentlycontinue"
    }
    process 
    {
        dir -Recurse $_ | where { $_.PsIsContainer -eq $false -and ($_.Name -like "*.js" -or $_.Name -like "*.css"} | select Name,FullName,@{Name="SHA1 Hash"; Expression={get-hash $_.FullName -algorithm "sha1" }}
    }
    end 
    {
    }
}  

function get-hash 
{
    param([string] $file = $(throw 'a filename is required'),[string] $algorithm = 'sha256')
    try
    {
        $fileStream = [system.io.file]::openread((resolve-path $file));
        $hasher = [System.Security.Cryptography.HashAlgorithm]::create($algorithm);
        $hash = $hasher.ComputeHash($fileStream);
        $fileStream.Close();
    }
    catch
    {
        write-host $_
    }
    return $hash
}

Compare-Object $($src | get-DirHash) $($dst | get-DirHash) -property @("Name", "SHA1 Hash") 
```

现在由于某种原因，如果我对本地路径`c:\temp\test1 c:\temp\test2`运行它说它工作正常，但是当我使用`UNC`两台服务器之间的路径运行它时，我得到

> **使用“1”参数调用“OpenRead”的异常：“不支持给定路径的格式。”**

对此的任何帮助将不胜感激。最终结果应该是文件列表，但由于某种原因它不喜欢`UNC`路径。

脚本名称是`compare_js_css.ps1`这样调用的：

`.\compare_js_css.ps1 c:\temp\test1 c:\temp\test2` <-- 这行得通

`.\compare_js_css.ps1 \\\\devserver1\c$\websites\site1\website \\\\devserver2\c$\websites\site1\website` <-- 返回上述异常。

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T23:30:34.063

这给出了您在没有以下情况下的路径`Microsoft.PowerShell.Core\FileSystem::`：

```
(Resolve-Path $file).ProviderPath 
```

无需使用字符串替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:14:28.447

`OpenRead`支持 UNC 路径。`Resolve-Path`返回一个对象。用作`(Resolve-Path MyFile.txt).Path.Replace('Microsoft.PowerShell.Core\FileSystem::', '')`的参数`OpenRead`。使用 UNC 路径时返回的`Resolve-Path`路径包括 PowerShell 的完全限定架构，其中包含该`OpenRead`方法不支持的标头，因此需要将其省略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T08:51:30.523

使用`Convert-Path`cmdlet，它将为您提供“常规”UNC 格式的路径。每当您使用任何 shell 命令或需要将整个路径传递给 .Net 方法等时，都需要这样做...

请参阅[https://technet.microsoft.com/en-us/library/ee156816.aspx](https://technet.microsoft.com/en-us/library/ee156816.aspx)

# c# - 从 Windows 服务启动的控制台应用程序没有文件系统访问权限

> ID：10656847
> 
> 赞同：0
> 
> 时间：2012-05-18T17:04:09.600
> 
> 标签：c#, .net, windows, file, service

我有一个旨在启动多个控制台应用程序的 Windows 服务。控制台应用程序将写入物理日志文件以及文件系统操作。

当服务启动控制台时，它们无法访问文件系统，日志文件中也不会出现任何内容。

当我通过双击可执行文件手动启动控制台时，它们写入日志文件没有问题。

我尝试在本地系统、本地服务、网络服务、本地管理员帐户甚至我自己的登录凭据下运行该服务：

这是启动进程的代码：

```
Process p = new Process();
p.StartInfo.FileName = agent.AgentLocation; /// Physical path to executable
p.StartInfo.CreateNoWindow = true;
p.StartInfo.ErrorDialog = false;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
p.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:57:56.660

更新：

问题原来是需要设置工作目录如下：

```
Process p = new Process(); 
p.StartInfo.FileName = agent.AgentLocation; /// Physical path to executable 
p.StartInfo.WorkingDirectory = agent.AgentLocation.Substring(0, agent.AgentLocation.LastIndexOf("\\") + 1);
p.StartInfo.CreateNoWindow = true; 
p.StartInfo.ErrorDialog = false; 
p.StartInfo.RedirectStandardError = true; 
p.StartInfo.RedirectStandardInput = true; 
p.StartInfo.RedirectStandardOutput = true; 
p.StartInfo.UseShellExecute = false; 
p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; 
p.Start(); 
```

# asp.net - Razor 显示模板未通过 XHTML 1.0 过渡验证

> ID：10656851
> 
> 赞同：2
> 
> 时间：2012-05-18T17:04:28.507
> 
> 标签：asp.net, html, asp.net-mvc-3, razor, resharper-6.0

我刚从 mvc3 和 razor 开始，过去做过一些 mvc2，有些事情让我感到困惑。

我正在尝试从我的模型中的集合中呈现一个无序列表，并且已经成功地做到了。使用此代码。

在我看来：

```
@using (Html.BeginForm())
{
    <ul>
        @Html.DisplayFor( m => m.SomeThings)
    </ul>
} 
```

在我的显示模板中：

```
@model MyNamespace.Models.SomeType               
<li>
    <a href="@Url.Content(String.Format("~/SomeUrl/{0}", @Html.DisplayFor(x => x.UrlText)))">@Html.DisplayFor(x => x.Name)</a>
</li> 
```

这一切都正常，但我注意到显示模板未通过 XHTML 1.0 过渡验证，因此会生成警告（元素 'li' 不能嵌套在元素 li' 中）这很烦人，因为它没有嵌套但无论如何都可以停止这个错误？还是我必须忍受的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:19:42.590

代码对我来说看起来不错，我还注意到模板试图得到验证，我学会了忍受它，resharper 报告说一切都很好，但只是一个绿色提示而不是错误，因为它正在尝试验证某些东西因为不是 XHTML，那么你可以离开它。

# json - json.net 检查孩子是否存在

> ID：10656852
> 
> 赞同：1
> 
> 时间：2012-05-18T17:04:37.130
> 
> 标签：json, json.net

我有一些 json 并使用 json.net 解析内容。首先，我使用 JToken 并将帖子中的字段拆分为对象列表，然后从每个对象中读取值。问题是其中一些对象有时具有字段，有时不具有字段，并且不确定如何防止调用 nullexception 错误。这是json示例：

```
{"id": "dfdksfjaisdfdsjfksdjdfsdafernd"}
{"body": "test data for parsing"}
{"object": { "summary":"hello test data you trouble maker", "id" :"problem stuff",
             "link": "http://testdata.com",
             "objecttype": "link"
}}
{"user": { "name": "Joe Somebody", "age":"43", "location": { "name": "outer space"},
         }
} 
```

现在在某些帖子中，用户对象中不存在位置字段，这导致我的代码中出现空错误，如下所示，并且有时对象对象的格式不同，如下所示：

```
 {"id": "dfdksfjaisdfdsjfksdjdfsdafernd"}
  {"body": "test data for parsing"}
  {"object": { "object": 
             {"summary":"hello test data you trouble maker", "id" :"problem stuff",
             "link": "http://testdata.com",
             "objecttype": "link"
         }
  }}
  {"user": { "name": "Joe Somebody", "age":"43",
           }
  } 
```

现在如果我的代码如下：

```
 Dim results As List(Of JToken) = jobj.Children().ToList

        If results.Count = 0 Then
            Exit Sub
        End If

        For Each item As JProperty In results
            item.CreateReader()
            If item.Name = "id" Then
                id = item.Value
            End If
            If item.Name = "actor" Then
                author = item.Value("name").ToString
                location = item.Value("location").Item("name").ToString
                age = item.Value("age").ToString
            End If
            If item.Name = "object" Then
               htext = item.Value("summary").ToString
               csubject = item.Value("objectType").ToString
            End If
     Next 
```

然后，如果位置和对象不同，则此代码将不起作用。那么如何检查位置字段是否存在，以及对象路径是否与摘要字段之前的另一个对象不同。

编辑：

好吧，我想我想通了

```
 If Not item.Value("location") Is Nothing Then
  bla bla bla 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T17:27:22.087

好的，我猜它确实有效，并且来自格式错误的 json 的空异常：

```
 If Not item.Value("location") Is Nothing Then
  bla bla bla 
```

对象也一样

```
 If Not item.Value("summary") Is Nothing Then
   bla bla bla
  else
     htext = item.Value("object").Item("summary").tostring 
```

# clojure - 我对 core.cache 做错了什么？

> ID：10656853
> 
> 赞同：2
> 
> 时间：2012-05-18T17:04:38.933
> 
> 标签：clojure

```
lein new caching 
```

然后我进入并像这样编辑我的 project.clj 文件。

```
(defproject caching "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.clojure/core.cache "0.5.0"]]
  :plugins [[lein-swank "1.4.3"]]) 
```

我执行：

```
lein repl 
```

依赖关系被拉出来，一切都很好。

[然后，受https://github.com/clojure/core.cache/wiki/LRU](https://github.com/clojure/core.cache/wiki/LRU)上的示例文档的启发，我使用以下内容编辑 core.clj

```
(ns caching.core
  (:require [clojure.core.cache :as cache]))

(cache/lru-cache-factory {} :limit 2) 
```

并在编译 core.clj 时返回以下错误。所以......我做错了什么？有没有人让它正常工作？

```
Wrong number of args (3) passed to: cache$lru-cache-factory
  [Thrown class clojure.lang.ArityException]

Restarts:
 0: [QUIT] Quit to the SLIME top level

Backtrace:
  0:        AFn.java:437 clojure.lang.AFn.throwArity
  1:         AFn.java:47 clojure.lang.AFn.invoke
  2:    NO_SOURCE_FILE:1 caching.core/eval2247
  3:  Compiler.java:6465 clojure.lang.Compiler.eval
  4:  Compiler.java:6431 clojure.lang.Compiler.eval
  5:       core.clj:2795 clojure.core/eval
  6:        core.clj:532 swank.core/eval782[fn]
  7:    MultiFn.java:163 clojure.lang.MultiFn.invoke
  8:        basic.clj:54 swank.commands.basic/eval-region
  9:        basic.clj:44 swank.commands.basic/eval-region
 10:        basic.clj:73 swank.commands.basic/eval968[fn]
 11:        Var.java:401 clojure.lang.Var.invoke
 12:    (Unknown Source) caching.core/eval2245
 13:  Compiler.java:6465 clojure.lang.Compiler.eval
 14:  Compiler.java:6431 clojure.lang.Compiler.eval
 15:       core.clj:2795 clojure.core/eval
 16:        core.clj:100 swank.core/eval-in-emacs-package
 17:        core.clj:256 swank.core/eval-for-emacs
 18:        Var.java:409 clojure.lang.Var.invoke
 19:        AFn.java:167 clojure.lang.AFn.applyToHelper
 20:        Var.java:518 clojure.lang.Var.applyTo
 21:        core.clj:600 clojure.core/apply
 22:        core.clj:107 swank.core/eval-from-control
 23:        core.clj:330 swank.core/spawn-worker-thread[fn]
 24:        AFn.java:159 clojure.lang.AFn.applyToHelper
 25:        AFn.java:151 clojure.lang.AFn.applyTo
 26:        core.clj:600 clojure.core/apply
 27:        core.clj:326 swank.core/spawn-worker-thread[fn]
 28:     RestFn.java:397 clojure.lang.RestFn.invoke
 29:         AFn.java:24 clojure.lang.AFn.run
 30:     Thread.java:662 java.lang.Thread.run 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:14:58.270

core.cache 的 0.5.0 版似乎`lru-cache-factory`有不同的 args 列表。

这是提交[a052bb568a1ca84b73ffda0bd252f01c5fa310aa的差异副本](https://github.com/clojure/core.cache/commit/a052bb568a1ca84b73ffda0bd252f01c5fa310aa#L1L483)

```
-  [limit base]
+  [base & {limit :limit :or {limit 32}}] 
```

尝试使用 core.cache 的 0.6.0-SNAPSHOT 以遵循教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:04:21.657

如果您想继续依赖 0.5.0，您可以将代码更改为如下所示：

```
(ns caching.core
  (:require [clojure.core.cache :as cache]))

(cache/lru-cache-factory 2 {}) 
```

# tfs - 在 TFS 中构建管道

> ID：10656854
> 
> 赞同：2
> 
> 时间：2012-05-18T17:04:40.567
> 
> 标签：tfs, continuous-integration, jenkins

2009 年，有一个[关于同一主题的 SO 问题](https://stackoverflow.com/questions/1160130/how-can-i-implement-a-build-pipeline-with-tfs)。

我想知道 Team Foundation Server 的更高版本是否更适合更长的构建管道。参考 Jenkins、TeamCity、ThoughtWorks 的 Go（我的雇主）的功能。

构建管道的可视化对我很重要，以及有关各个阶段通过或失败的通知。随着该分支的出现，该分支的“主干”管道成为一个用于发布分支的管道的卓越克隆能力。

其次，个人的圣杯是 CI 服务器将其配置存储在 SCM 中，该 SCM 本身拥有可构建的东西，甚至可以默默地创建分支以提供新的管道；是否可以将 TFS 配置为将 CI 定义/脚本存储在其 SCM 端而不是其随附的 SqlServer 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:30:00.147

TFS 构建由三个组件组成：

1.  构建定义 - 存储在 SQL Server 数据层上。
2.  构建工作流 - 存储在源代码管理中的 XAML 文件。
3.  支持的 MSBuild 脚本 - 通常包含用户定义的操作，也存储在源代码管理中。

随着构建的进行，您可以看到构建步骤的可视化，您还可以获得主构建和 MSBuild 输出的不同日志。

TFS 中的构建定义只是构建设置的集合，类似于 CC.Net 的配置文件和 TeamCity 的构建配置选项卡，它们也都存储在文件系统中。假设数据库上有备份计划，您实际上并不需要将构建定义存储在源代码管理中，但如果必须，可以通过导出`tbl_BuildDefinition`表来实现。

[TFS Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)为构建定义添加了克隆功能。

尽管使用 TFS-API 相当可行，但没有 OOTB 支持从新分支配置构建定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:07:13.547

聚会有点晚了，但如果您想要高级构建管道自动化，请不要打扰 TFS。它根本没有削减它。

我已经广泛使用了 Jenkins 和 TFS。Tfs 只是。纯的。废话。这就是为什么。

没有下游/上游构建。没有 piepline/orchestraion 构建。（如 jenkins）添加构建步骤的晦涩方式并回退到使用 MsBuild。慢并且仍然轮询源代码控制。将您与 MsTest 联系起来。

并且请不要指出“哦，如果您编写自定义活动，您可以做任何事情”。我不会浪费时间为封闭源代码、低于标准的平台进行开发。如果我要贡献一些东西，那是免费的。开源平台。

# c - ANSI C - 比较奇数

> ID：10656858
> 
> 赞同：1
> 
> 时间：2012-05-18T17:05:01.047
> 
> 标签：c, compare

我正在尝试比较整数和双精度：

```
printf("%d\n", pos<(td+tr));
            if(td <= pos < (td+tr))
            {} 
```

print 语句`pos<(td+tr)`正确地评估比较。比较`if(td <= pos < (td+tr))`未正确评估。

Pos 是一个 int：`int pos;` td 和 tr 是双精度数：`double td,tr;`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T17:08:34.983

```
td <= pos < (td+tr) 
```

从左到右进行评估。所以首先

```
td <= pos 
```

被评估为真值。然后将该真值与 进行比较`td+tr`。

那不是你想要的。你要

```
if (td <= pos && pos < td+tr) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:07:43.903

您的代码没有做您可能认为的事情，也许您需要

```
td <= pos && pos < (td+tr) 
```

?

# django - apache中的django mkdir权限

> ID：10656859
> 
> 赞同：0
> 
> 时间：2012-05-18T17:05:01.340
> 
> 标签：django

我有一个 django 应用程序，其中包含一个带有文件上传字段的模型。上传字段获取目标文件并将副本上传到媒体根目录中的现有目录，或者，如果尚未创建目录，它会创建目录并将文件放入其中。

该应用程序在开发中运行良好，利用内置的 django 服务器，但是当我将它移动到生产服务器（我的 OSX 机器运行带有 mod_wsgi 的 apache2 实例）时，我从 mkdir 函数中得到“[Error 13] Permission denied”每当我尝试上传文件时，都在 django 的 storage.py 中。我强烈怀疑需要将权限语法添加到我的 apache httpd.conf 中。我不知道为什么 django 服务器对代码没有问题，但 apache gags。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:05:05.680

我想有时一条错误消息正是它所说的。在这种情况下，“[Error 13] Permission denied”被抛出，因为 apache 没有对 django 应用程序试图上传到的目录的写访问权限。我只是导航到我设置为文件上传目录的目录，并在系统范围内授予对它们的写权限。这可能不是最安全的解决方案，但它是最实用的，因为它可以工作，而且我不知道如何在不打开系统范围内的目录的情况下明确设置 apache2 的写权限。

另外，我没有在 serverfault 上发布问题，因为我不知道这是 django 配置问题还是 apache 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:09:07.380

权限问题在 mod_wsgi 文档中描述：

[http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Access_Rights_Of_Apache_User](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Access_Rights_Of_Apache_User)

# jquery - 使用复选框、AJAX、jQuery 更改属性

> ID：10656860
> 
> 赞同：0
> 
> 时间：2012-05-18T17:05:04.643
> 
> 标签：jquery, ruby-on-rails, ajax, coffeescript

我希望根据是否选中复选框来更改我的任务资源的布尔属性。我被卡住了，因为我不知道该怎么做......在添加这个 AJAX 复选框之前我已经拥有了一切，整个 CRUD，一切都用 rspec 和 capybara 测试并引导。我有以下代码...

**意见/任务/show.html.erb**

```
 27      <%= form_for [@project, @task], :remote => true do |f| %>
 28        <%= f.label :completed %>       
 29        <%= f.check_box :completed %>
 30      <% end %> 
```

这个 :completed 是任务的布尔属性。

**javascripts/tasks.js.coffee**

```
 8 jQuery ->
  9   $('#task_completed').bind 'change', (event) =>
 10     $.post() 
```

不知道如何完成这个 $.post() 事情以及如何使控制器中的代码工作......到目前为止我只有这个......

**控制器/tasks_controller.rb**

```
 1 class TasksController < ApplicationController
  2 
  3   before_filter :authenticate_user!
  4   before_filter :find_project_from_project_id
  5   before_filter :find_task, :only => [:show, :edit, :update]
  6 
  7   def show
  8     @title = @task.name
  9   end
 10 
 11   def new
 12     @title = 'New task'
 13     @task = @project.tasks.build
 14   end
 15 
 16   def create
 17     @task = @project.tasks.build(params[:task])
 18     if @task.save
 19       current_user.tasks.push(@task)
 20       redirect_to [@project, @task], :notice => 'Task created'
 21     else
 22       render 'new'
 23       flash.now[:alert] = 'Task not created'
 24     end
 25   end 
 26     
 27   def edit 
 28     @title = 'Edit task'
 29   end 
 30   
 31   def update
 32     if @task.update_attributes(params[:task])
 33       redirect_to [@project, @task], :notice => 'Task updated'
 34     else
 35       render 'edit'
 36       flash.now[:alert] = 'Task not updated'
 37     end
 38   end 
 39 
 40   private
 41   #controller doesn't respond to these methods as actions
 42   
 43   def find_project_from_project_id
 44     @project = current_user.projects.find(params[:project_id])
 45     rescue ActiveRecord::RecordNotFound
 46       redirect_to projects_path
 47       flash[:alert] = 'Project you were looking for could not be found'
 48   end
 49 
 50   def find_task
 51     @task = @project.tasks.find(params[:id])
 52     rescue ActiveRecord::RecordNotFound
 53       redirect_to project_path(@project)
 54       flash[:alert] = 'Task you were looking for could not be found'
 55   end
 56 
 57 end 
```

*另外，对于那些想要更多的人......如何为这个东西编写测试？我应该为此写它们吗？*

编辑：经过研究，我发现人们正在这样做......这是要走的路吗？在检查元素时，我可以看到当我更改复选框时正在发出新请求，但布尔值仍然是错误的......

```
 8 jQuery ->
  9   $('#task_completed').bind 'change', (event) =>
 10     $('#task_completed').parents('form:first').submit()
 11     $('.task_headline').toggleClass('completed_task') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:58:14.340

这在很多方面都不是一个优雅的解决方案，但它确实有效:)

**显示.html.erb**

```
<script>
window.monitorTaskCompletion(1,1)
</script> 
```

**任务.coffee**

```
window.monitorTaskCompletion = (project_id, task_id)  ->
    jQuery ->
      $('#task_completed').bind 'change', (event) =>
        $.ajax
          url: "/projects/#{project_id}/tasks/#{task_id}/complete"
          data: {completed: if $('#task_completed').is(':checked') then 1 else 0}
          type: "PUT" 
```

**任务控制器.rb**

```
def complete
  @completed = params[:completed].to_i > 0
  @task.complete(@completed)
  respond_to :js
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T17:37:37.353

您没有为 $.post 操作提供属性。

尝试做这样的事情：

```
$('#task_completed').bind('change', function() {
    var url = $(this).closest('form').attr('action');
    var data = {};
    data.task = {};
    data.task.completed = $(this).is(':checked'); 
    $.post({
        url: url,
        data: data
    });
}); 
```

正如您在 IRC 会议室中向我解释的那样，这将提供您需要的功能。由于仅在选中复选框时才会发送复选框值，因此无论是否选中复选框，我们都必须设置一个自定义布尔值（由 $(this).is(':checked') 函数实现）。

使用 Firebug 或 Chrome/Opera/Safari 检查器检查 ajax 请求。您可以在 $.post 函数中添加更多功能，例如完成事件的函数。查看有关 ajax 和 $.post 函数的 jQuery 文档：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:42:00.147

由于这是一个 ajax 操作，因此您需要在控制器中以不同于通常的方式处理它。

```
def update
  if @task.update_attributes(params[:task])
    @notice = 'Task updated'
  else
    @notice = 'Task not updated'
  end
end 
```

在 update.js.erb 视图中，类似：

```
$(#notice).html('<%= @notice %>') 
```

在 jquery .post() 中，您还应该指定 url 并包含 data 参数，如前所述。

# php - 为什么我的 Amazon S3 图像加载缓慢？

> ID：10656862
> 
> 赞同：13
> 
> 时间：2012-05-18T17:05:07.383
> 
> 标签：php, amazon-s3, amazon-web-services

似乎从亚马逊 s3 读取的图像加载速度非常慢。我将图像与网站放在同一台服务器上，并且加载速度非常快。它加载缓慢是因为它现在必须从 s3 访问它吗？

我真的无能为力吗？

*使用它来读取图像文件：*

```
$secure_link = gs_prepareS3URL("myAmazon."/thumb/thumb_".$id, $bucket);
    readfile($secure_link); 
```

功能来自：[http ://www.richardpeacock.com/blog/2010/07/amazon-aws-s3-query-string-authentication-php](http://www.richardpeacock.com/blog/2010/07/amazon-aws-s3-query-string-authentication-php)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T17:07:30.260

如果您要嵌入图像，则应通过 Amazon CloudFront（Amazon 的 CDN 服务）提供它们。CloudFront 从 S3（或自定义源）加载图像/文件，然后将其缓存在其边缘服务器上。

CloudFront 教程 - [http://www.hongkiat.com/blog/amazon-cloudfront-how-to-setup-cloudfront-to-work-with-s3/](http://www.hongkiat.com/blog/amazon-cloudfront-how-to-setup-cloudfront-to-work-with-s3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-31T06:23:01.260

S3 仅适用于静态存储，默认情况下它没有优化性能，但有办法让它变得更好。

在配置 CloudFront 之前，您应该尝试在 S3 存储桶上启用“传输加速”。

来源：[https ://docs.aws.amazon.com/AmazonS3/latest/userguide/transfer-acceleration.html](https://docs.aws.amazon.com/AmazonS3/latest/userguide/transfer-acceleration.html)

好处是，

1.  您的客户从世界各地上传到一个集中的存储桶。
2.  您定期跨大洲传输 GB 到 TB 的数据。
3.  上传到 Amazon S3 时，您无法使用 Internet 上的所有可用带宽。

这是有代价的..（[https://aws.amazon.com/about-aws/whats-new/2016/04/transfer-files-into-amazon-s3-up-to-300-percent-faster/](https://aws.amazon.com/about-aws/whats-new/2016/04/transfer-files-into-amazon-s3-up-to-300-percent-faster/) )

> Amazon S3 Transfer Acceleration 的定价很简单，没有前期成本或长期承诺。您只需为通过该服务传输的数据支付较低的每 GB 费率。定价旨在无风险：如果 Amazon S3 Transfer Acceleration 不太可能影响上传速度（例如，当您从东京的客户短距离上传数据到日本的 S3 存储桶时） ，您不会为该上传支付任何额外费用。有关定价的更多信息，请参阅 Amazon S3 定价。

# python - 似乎无法让 fortran 可执行文件通过 python 正确运行

> ID：10656863
> 
> 赞同：2
> 
> 时间：2012-05-18T17:05:09.477
> 
> 标签：python, fortran, subprocess, os.system

我在 SO 和其他网站上阅读了许多不同的主题，但无法直接回答我的问题/问题。目前我有这个运行完全正常的python脚本，除了没有调用运行fortran程序正常工作。我尝试过使用子进程命令、os.system 命令、打开通过 python 打开的 bash 脚本文件，但没有运气。这是我遇到的一些示例和错误。

一种尝试：

```
subprocess.Popen(["sh", "{0}{1}".format(SCRIPTS,"qlmtconvertf.sh"), "qlmt"], shell=False, stdout=subprocess.PIPE) 
```

这会导致程序无法正确读取文件的错误。

```
 forrtl: severe (24): end-of-file during read, unit 1, file /home/akoufos/lapw/Ar/lda/bcc55_mt1.5_lo_e8_o4/DOS/lat70/qlmt 
```

另一种尝试：

```
subprocess.Popen(["./{0}{1}".format(SOURCE,"qlmtconvertf"), "qlmt"], shell=False, stdout=subprocess.PIPE) 
```

这给出了找不到文件的错误。

```
 File "/home/akoufos/lapw/Scripts_Plots/LAPWanalysis.py", line 59, in DOS
subprocess.Popen(["./{0}{1}".format(SOURCE,"qlmtconvertf"), "qlmt"], shell=False, stdout=subprocess.PIPE)
    File "/usr/lib64/python2.7/subprocess.py", line 672, in __init__
errread, errwrite)
    File "/usr/lib64/python2.7/subprocess.py", line 1202, in _execute_child
raise child_exception
    OSError: [Errno 2] No such file or directory 
```

又一次尝试：

```
os.system("{0}{1}".format(SOURCE,"qlmtconvertf qlmt")) 
```

这给出了与第一个示例等效的错误。在所有示例中 SOURCE="/home/myusername/lapw/Source/"，其中 fortran 源文件是 SCRIPTS="/home/myusername/lapw/Scripts_Plots/"，其中我有其他文件和 python 脚本，qlmtconvertf是一个已编译的 fortran 程序，而 qlmt 是 qlmtconvertf 读取的文件。如果我在 shell 中调用它，这个源代码完全可以正常工作，就像我做过无数次一样，但我正在尝试自动调用这些代码。我也写了一个 bash 脚本，它可以满足我的需要，但我试图通过 python 来做所有事情。对于我做错了什么以及正在发生的事情的任何想法、建议或答案将不胜感激。谢谢大家。

**编辑：**我得到它与弗朗西斯下面给出的建议一起工作。我必须保留完整的路径（即/home/username/etc）并`os.path.join`正确调用程序。

```
 import os.path
    LAPW = "/home/myusername/lapw/"
    SOURCE = os.path.join(LAPW,'Source')
    SCRIPTS = os.path.join(LAPW,'Scripts_Plots')
    QLMTCONVERT = os.path.join(SOURCE,'qlmtconvertf')
    qargs = [QLMTCONVERT,'qlmt']
    #CALLING PROGRAM
    subprocess.Popen(qargs, stdout=subprocess.PIPE).communicate(input=None) 
```

为了让它正常工作，我还必须关闭我在 python 脚本中创建的“qlmt”文件。我也在包含“qlmt”文件的目录中工作。

（**编辑**也添加`.communicate(input=None)`到子流程的末尾。这对于此流程调用来说是不必要的，但对于我在脚本中创建的试图使用该流程正在创建的文件的后一个来说很重要。从我的理解`.communicate`到进程，基本上是等它完成后再执行下一条python行。类似于`.wait()`，但更高级。如果有更了解这个的人想要详细说明，请随意。**编辑**）

我不确定为什么这种方法有效，但是使用字符串作为子进程的输入会出错。如果有人对此有任何见解，如果您能传授您的知识，我将不胜感激。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:17:14.803

我认为您忘记了文件名中的斜杠：

`"{0}{1}".format(SOURCE,"qlmtconvertf qlmt") == '/home/myusername/lapw/Sourceqlmtconvertf qlmt'`

我猜你的意思是这个？

`"{0}/{1}".format(SOURCE,"qlmtconvertf qlmt") == '/home/myusername/lapw/Source/qlmtconvertf qlmt'`

我建议使用[`os.path.join`](http://docs.python.org/library/os.path.html#os.path.join)而不是直接构造字符串来创建路径名：

```
import os.path

executable = os.path.join(SOURCE, 'qlmtconvertf')
args = ['qlmt']

subprocess.Popen(executable+args, stdout=subprocess.PIPE) 
```

# php - Yii 同时使用 mongo DB 和 MySQL

> ID：10656875
> 
> 赞同：5
> 
> 时间：2012-05-18T17:06:15.217
> 
> 标签：php, mysql, security, mongodb, yii

我正着眼于在 Yii 框架中构建一个用于处理本地语言、标签和此类数据的系统。

我已经选择了 MongoDB 来存储我的数据，因为我认为它很好，并且会以更少的成本获得更好的性能（数据库将拥有大量数据）。

我的问题是关于用户身份验证、支付等......这是敏感的信息位和我认为数据相关的区域。

所以： 1\. 你会使用两个不同的数据库系统吗？我应该需要它们还是我让这件事复杂化了？2\. 如果你推荐两个数据库的方法，我将如何在 Yii 中实现？

谢谢你的时间！

PS：我不打算让这个问题成为关系与非关系人之间的另一个无休止的讨论。话虽如此，我认为我的数据支持 mongo，但是如果您对此有话要说，请继续；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T18:43:47.667

您可能会对OpenSky 基础架构的[演示](http://www.slideshare.net/jwage/opensky-infrastructure)感兴趣，其中 MongoDB 与 MySQL 一起使用。Mongo 主要用于 CMS 类型的数据，其中灵活的模式很有用，他们依赖 MySQL 进行交易（例如客户订单、付款）。如果您最终使用 Doctrine 库，您会发现[ORM](https://github.com/doctrine/doctrine2)（用于 SQL 数据库）和[MongoDB ODM](https://github.com/doctrine/mongodb-odm)共享相似的 API，这应该会使实验过程更容易。

不过，我不会回避使用 MongoDB 来存储用户数据，因为这通常是可以从嵌入式文档存储中受益的记录（例如，在单个用户文档中存储多个帐单/送货地址）。如果有的话，Mongo 应该足够灵活，使您能够开发应用程序，而不必担心由于不断变化的产品需求而导致的模式更改。随着这些要求变得更加清晰，您将能够根据应用程序的性能需求和最终需要的数据库查询类型做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:16:44.543

使用多个数据库（如果你真的需要的话）并没有什么坏处，许多大型网站都在使用多个数据库，所以请开始你的项目。

# html - HTML5 验证正在跳过

> ID：10656888
> 
> 赞同：0
> 
> 时间：2012-05-18T17:07:32.397
> 
> 标签：html, validation

我有一个奇怪的问题。我在表单中有一个输入字段：

```
<form id="frmAddAdvertiser" method="POST" action="" onsubmit="return false;">    
<input name="firstname" id="firstname" type="text" value="" required />
</form> 
```

当我在 Chrome 或 Safari 中点击提交按钮时，它会显示一条气泡消息，说明该字段尚未填写，但它会提交表单。为什么是这样？

# eclipse-cdt - Eclipse CDT 默认生成文件：读取 CXXFLAGS 变量？

> ID：10656889
> 
> 赞同：2
> 
> 时间：2012-05-18T17:07:39.290
> 
> 标签：eclipse-cdt

是否有一个选项可以强制生成的makefile读取`CXXFLAGS`和`CFLAGS`变量并像大多数makefile一样使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:59:55.977

Eclipse CDT 生成的 makefile 包含以下几行：

`-include ../makefile.init`

`-include ../makefile.defs`

您可以创建文件 makefile.defs 在其中定义 CFLAGS 或 CXXFLAGS ，然后转到 project `Properties`-> `C++ Build Properties`-> `Settings`-> GCC or G++ compiler -> `Miscellaneous`。在这里，您可以在字段中添加您的 $(CFLAGS) 或 $(CXXFLAGS) 选项`Other flags`。

这应该将您的附加选项添加到编译器命令行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-09T22:09:47.197

我通过不选择 C/C++ 构建设置中的“使用默认构建命令”单选框解决了这个问题。

指定自定义构建命令：make -f Makefile。您可以在目标 Makefile 中定义的 $CCFLAGS 中添加其他编译器选项。

[![在此处输入图像描述](../Images/f16c77fbc682ef4bdc1ae0877a87bceb.png)](https://i.stack.imgur.com/cmhbL.png)

# iphone - 'NSInternalInconsistencyException'，原因：“Foo”不是 NSManagedObject 的子类

> ID：10656895
> 
> 赞同：10
> 
> 时间：2012-05-18T17:08:11.253
> 
> 标签：iphone, core-data

好的，这是我得到的错误

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '"Place" is not a subclass of NSManagedObject.' 
```

我认为这意味着“地点”没有作为实体添加到核心数据模型中？？？但它如下图所示。

我猜我的假设是不正确的，所以任何帮助或想法都会很好。

![](../Images/f6267ea40f462aa7cd35209947eb96c8.png)

我很确定这是导致它的原因：

```
 NSManagedObject* place = [NSEntityDescription
                               insertNewObjectForEntityForName:@"Place" 
                               inManagedObjectContext:context]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T19:58:34.430

如果您没有使用自定义类（没有 Place.[hm]），听起来好像不是，请检查**Entity**选项卡，并确保**Class** name 为空白（= **NSManagedObject**） - 而不是**Place**。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-24T21:51:11.293

我对名为 Message 和 Connection 的类也有同样的问题。该错误只是在使用 MessageUI 库添加电子邮件工具后出现。我相信发生冲突是因为库将具有名为 Message 和 Connection 的类，因此它们不被视为 NSManagedObject 的子类。通过前缀更改它们的名称（在我的情况下使用 X）使实体独一无二。我打算在未来给我所有的实体加上前缀，以减少发生冲突的机会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T20:09:15.863

遇到此类错误时要做的第一件事是验证实体的类名：

*   打开 XCDataModel
*   选择您的实体
*   打开右窗格实用程序
*   单击“显示数据模型检查器”按钮
*   验证类名，使其与您生成的模型同步

希望这可以帮助 ！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T20:23:33.930

解决此问题的另一种方法是确实使用`NSManagedObject`子类（推荐）。

```
Place *place = [NSEntityDescription
                           insertNewObjectForEntityForName:@"Place" 
                           inManagedObjectContext:context]; 
```

# wpf - 验证在文本框中不起作用

> ID：10656906
> 
> 赞同：1
> 
> 时间：2012-05-18T17:08:37.280
> 
> 标签：wpf, validation

我有一个 TExtBox 并从[这里](http://www.codeproject.com/Articles/43257/Simple-Validator-in-Windows-Presentation-Foundatio)创建了一个 ValidationRule 类，这是我的 xaml：

```
<TextBox Name="ctsTxt" Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"
                     local:SimpleValidator.ValidationType="{x:Type system:Double}"
                     Validation.ErrorTemplate="{StaticResource validationTemplate}"
                     Style="{StaticResource txtBoxStyle}" 
                     Grid.Column="1" Grid.Row="2" Margin="2"                          
                     /> 
```

根据这个和验证器类，文本框 sh 只接受双重输入，但它接受所有内容。

我的验证根本没有发生的 xamls 有什么问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:33:22.590

您是否尝试像这样设置您的文本绑定？

```
Text="{Binding Text, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
```

# html - 在富文本框中编写的 CSS 悬停

> ID：10656907
> 
> 赞同：1
> 
> 时间：2012-05-18T17:08:39.467
> 
> 标签：html, css, sitecore, sitecore6

# 我的问题

我们正在使用 Sitecore，一个内容编辑器正在填充富文本框字段。

这个富文本框字段使他们可以选择放入 html 以更好地控制内容样式。所以他们决定加入一些 CSS。

他们提供了下面的 html 和 CSS。下面的 CSS 添加图像与相关`.button`但`.button145x28`不起作用。

奇怪的是，当我们使用相同的方法使用背景图像添加图像时，`.cutOffCorner`它会起作用。

我们正试图看看是什么阻止了下面的实际工作。

富文本框控件是来自telerik 的一个asp.net 控件。我们正在使用 Sitecore 版本 6.4.1 更新 3。

# 我的代码

## HTML/CSS

你们中的一些人可能会注意到并非所有的 html 都在那里，但如果我可以让按钮图像出现在下面的链接上，我很确定我可以让它在其余部分上工作。

```
<style>

.GenericSignupCallToAction .button a {padding: 6px 20px 10px 22px; border: none; background-image:url('~/media/Images/Content/Register-generic-page/button_off.ashx'); background-repeat: no-repeat; width:auto; text-decoration: none; color:#ffffff; font-weight:bold; font-size:13px;}

.GenericSignupCallToAction .button a:hover {padding: 6px 20px 10px 22px; border: none; background-image:url('~/media/Images/Content/Register-generic-page/button_on.ashx'); background-repeat: no-repeat; width:auto; text-decoration: none; color:#ffffff; font-weight:bold; font-size:13px;}

.GenericSignupCallToAction .button145x28 a {padding: 8px 30px 10px 26px; border: none; background-image:url("~/media/Images/Content/Register-generic-page/button_off_145x28.ashx"); background-repeat: no-repeat; width:auto; text-decoration: none; color:#ffffff; font-weight:bold; font-size:13px;}

.GenericSignupCallToAction .button145x28 a:hover {padding: 8px 30px 10px 26px; border: none; background-image:url("~/media/Images/Content/Register-generic-page/button_on_145x28.ashx"); background-repeat: no-repeat; width:auto; text-decoration: none; color:#ffffff; font-weight:bold; font-size:13px;}

.GenericSignUpCallToAction .cutOffCorner { background-image:url("~/media/Images/Landing-Pages/MyHiFX/corner_left_top.ashx"); position:absolute; top:-1px; left:-1px; background-repeat:no-repeat; height: 14px; width: 12px; }

</style>

<div class="GenericSignUpCallToAction">

    <div class="box">

        <div class="cutOffCorner">
        </div>

        <div class="headerText">
            <h1>blah</h1><br /><br />
            <p>blahblah</p>
        </div>

        <div class="button">
            <a href="somelink" title="Sign Up Now">Proceed</a>
        </div>

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:13:07.167

**您可以通过使样式更具体**来覆盖样式。

`textarea .GenericSignUpCallToAction`比`.GenericSignUpCallToAction`单独更具体。

`body .GenericSignUpCallToAction`比大多数其他声明更具体。

请参阅：[http ://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:53:20.073

最疯狂的点差游戏：

`.GenericSignupCallToAction`应该`.GenericSignUpCallToAction`

这解决了这个问题。

# java - 如何在 Eclipse 控制台 (Java) 中记录循环

> ID：10656908
> 
> 赞同：0
> 
> 时间：2012-05-18T17:08:51.900
> 
> 标签：java, android, eclipse, logging, console

我正在使用带有 Java 和 Android SDK 的 Eclipse。

我有一个 while 循环给了我问题，我需要查看它在下面的 if 语句中记录的内容（添加到两个 ArrayList 中的内容）。这是循环：

```
 while (totalDebt > 0) {

 // stuff

 if (totalDebt > 0) {
    debtList.add(totalDebt);
    feeList.add(interestFeeTotal);
 }

} 
```

我如何使用 log 来查看每次迭代中发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:11:29.123

在你的文件的顶部，你需要把

```
import android.util.log; 
```

然后在该文件的任何地方你可以写

```
Log.d("Tag","Message"); 
```

您可以在哪里获取消息，例如

```
Log.d("Tag", String.format("Iteration(%d), added to the debtList", i); 
```

假设`i`是你的迭代变量

# tridion - 内容交付服务报告“无法检索所需结果”。

> ID：10656909
> 
> 赞同：4
> 
> 时间：2012-05-18T17:09:02.320
> 
> 标签：tridion, tridion-content-delivery

使用 Web 浏览器测试我的 Tridion 内容交付 Web 服务时，我可以通过调用“http://webservice/odata.svc/”成功获取可用集合的列表，但是当我尝试访问其中一个集合时，例子;

```
http://webservice/odata.svc/Publications 
```

我明白了；

```
<message xml:lang="en-US">Unable to retrieve desired results.</message> 
```

或特定项目

```
http://webservice/odata.svc/Publications(19) 
```

我得到：

```
<message xml:lang="en-US">Unable to build publication entry: 
                             Unable to retrieve desired results.</message> 
```

在日志中，我得到以下信息（我删除了时间戳等以使其更具可读性）：

```
ODataService - ODATA.NET: Resource retrieval: Publications
WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@576504fa, thread: Thread-5
ODataWebserviceHandler - Requested a OData feed/entry: Publications with type: application/atom+xml
ODataWebserviceHandler - Setting $top to 25
ResolverBase - Requested OData collection
StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 0 / Query / null
JPQLExecutor - Can not create JPAQueryDAO object
    com.tridion.broker.StorageException: No Data Access Object for Query
    at com.tridion.storage.filesystem.FSDAOFactory.getDAOForTypeMapping(FSDAOFactory.java:177) ~[cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.getOriginalDAO(StorageManagerFactory.java:450) ~[cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.getDAO(StorageManagerFactory.java:271) ~[cd_datalayer.jar:na]        
    at com.tridion.storage.StorageManagerFactory.getDefaultDAO(StorageManagerFactory.java:178) ~[cd_datalayer.jar:na]
    at com.tridion.webservices.odata.input.jpql.JPQLExecutor.<init>(JPQLExecutor.java:61) [cd_webservice.jar:na]
    at com.tridion.webservices.odata.input.jpql.JPQLExecutor.getExecutor(JPQLExecutor.java:103) [cd_webservice.jar:na]
    at com.tridion.webservices.odata.input.resolver.PublicationsResolver.resolveCollection(PublicationsResolver.java:34) [cd_webservice.jar:na]
    at com.tridion.webservices.odata.input.resolver.ResolverBase.resolve(ResolverBase.java:74) [cd_webservice.jar:na]
    at com.tridion.webservices.odata.input.handler.ODataFeedRenderer.renderODataFeed(ODataFeedRenderer.java:45) [cd_webservice.jar:na]
    at com.tridion.webservices.odata.input.handler.ODataWebserviceHandler.handleODataEntity(ODataWebserviceHandler.java:193) [cd_webservice.jar:na]
    at com.tridion.webservices.odata.input.handler.ODataWebserviceHandler.handleResourceRequest(ODataWebserviceHandler.java:169) [cd_webservice.jar:na]
FilterValue - check if value: 25 is of Integer type
FilterValue - value: 25 is Integer
JPQLExecutor - JPAQueryDAO has not been instantiated. Probably FS storage type was used.    
ResolverBase - Unable to build feed Unable to retrieve desired results. 
```

此消息指向我的存储配置，但是我无法在文档中找到有关如何设置它以支持 Web 服务的任何明确指导。

我的存储应该如何配置？期望服务和网站有单独的部署程序是否正常？我还应该考虑哪些其他问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:40:37.733

CD Web 服务要求您的所有内容都在 CD DB 中。这对文件系统没有任何意义。如果 FS 上还有东西，CD Webservice 的某些部分将无法工作。例如，考虑可能在 FS 上的页面——您将无法通过 CD Webservice 检索 PageContent。

对于您的问题，请检查您的 CD Web 服务 cd_storage_conf.xml 是否定义了数据库 (JPA) 连接。当然，它是功能性的。检查通常的嫌疑人、数据库连接、用户、通行证、url、JAR...

**编辑：**仔细查看您的堆栈跟踪，您必须已将 FS 定义为默认存储介质（由于`getOriginalDAO(...)`，产生 a `FSDAOFactory.getDAOForTypeMapping(...)`）。所以我认为这是问题的根源。还要检查您的许可证是否有效，以及您的“绑定”是否由于缺少/过期的 CD 许可证而恢复为 FS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T18:36:25.070

作为其他人的额外输入，我也遇到了“无法检索所需结果”。响应，在我的情况下，这是由于我的 cd_licenses.xml 与其他配置文件不在 bin/config 目录中。

# java - java线程同步：我得到“未定义的值”

> ID：10656911
> 
> 赞同：0
> 
> 时间：2012-05-18T17:09:04.537
> 
> 标签：java, android, multithreading, synchronization

以下android代码块尝试从javascript函数获取返回值，然后将其分配给类变量，然后在实例化另一个类时使用该类变量；

这是我的代码：

```
 //class variables
                String innerElementNum = "0";
                private final Object lock = new Object();
                MyAdapter myAdapter;

            synchronized (lock) {
                try {
                    webView.loadUrl("javascript:inner()");
                    while (responseFromJS.equals(""))
                        lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                (!responseFromJS.equals("empty"))
                    innerElementNum = responseFromJS;
                }
                responseFromJS = "";
            }

        myAdapter = new MyAdapter(EditorActivity.this); 
```

在 MyAdapter 类中，我使用变量“innerElementNum”，如下所示：

```
public class MyAdapter extends BaseAdapter {

       Context context;

       int itemsNum = Integer.parseInt(innerElementNum); 
       String[] itemsArray = new String[itemsNum];

       MyAdapter(Context c){
           context = c;
           if (itemsNum > 0) {
           for (int i=0 ; i<itemsNum ; i++) {
               int j = i+1; 
               itemsArray[i] = j+"";
           }
           }
       }
       ....... etc
} 
```

我的问题是同步：当实例化 MyAdapter 类时，“innerElementNum”变量具有“未定义”值，我的意思是，当我实例化类时，变量还没有正确的值。

欢迎任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:33:02.353

好吧，“未定义”是特定于 Javascript 的。你几乎肯定在解析一个看起来像的 json

```
{
   elementNum: "undefined"
} 
```

这似乎与并发无关。

当你说

> “未定义”值，我的意思是，当我实例化类时，变量还没有正确的值。

`String num = "undefined"`在技​​术上是用 Java 分配的。我认为您需要修复构建此 json 的 Javascript。

**也作为旁注：**

您不应该由`==`操作员测试字符串等价性。这测试参考等效性而不是内容。你应该使用`.equals`

# xpages - xpages 和 domino 中的持久连接

> ID：10656912
> 
> 赞同：2
> 
> 时间：2012-05-18T17:09:07.787
> 
> 标签：xpages, keep-alive, persistent-connection

当我从浏览器登录到 xpage 应用程序时，连接断开在 5 分钟内完成，而当我访问传统的 domino 应用程序时，连接断开大约是 1 分钟。我在单个服务器上使用基于会话的身份验证，并且在这两种情况下都设置了 domauthsessid。我正在使用 netstat 来跟踪会话。为什么 xpage 连接超时与普通应用程序不同？我的 xpage 上没有任何 keepalive 设置。为了对服务器文档进行测试，我将持久连接超时设置为 600 秒。但是我的任何一个应用程序都没有达到该超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:56:33.980

XPage 会话的默认超时为 30 分钟，可以通过每个数据库中的应用程序属性进行设置。在此之上应用多米诺会话超时。

# javascript - 关于 @symbol 对 JSON 键的影响

> ID：10656922
> 
> 赞同：1
> 
> 时间：2012-05-18T17:10:10.057
> 
> 标签：javascript, arrays, json

我的 JSON 结构如下

```
var myJSON = {
               "userTypes": {
                     "@type": "Array",
                     "type": [
                               "Administrator",
                               "Customer",
                               "Guest"
                              ]
                            }
             } 
```

当我尝试访问`myJSON.userTypes.@type`时收到错误“ **SyntaxError: Unexpected token ILLEGAL** ”，但如果我这样访问，`myJSON.userTypes.type`则可以访问数组。

所以我的问题是，

1.  @ 符号即使存在也真的无关紧要吗？
2.  这会产生什么影响？

问候，

纳文

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T17:13:05.307

在访问 JavaScript 对象中的属性时，您可以使用点表示法或方括号表示法。

If you use dot-notation, then you can only access properties which can be represented as an identifier. An identifier cannot start with an `@` character.

Since the property you are trying to access cannot be represented by an identifier, you are limited to square bracket notation. Such:

```
myJSON.userTypes['@type'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:11:32.333

你需要这样做：`myJSON.userTypes["@type"]`. 然后，您可以随心所欲地使用`@`。正如我所演示的，关键是通过字符串引用属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T17:12:01.307

问题在于以“@”开头的标识符在语法上无效。要访问该密钥，您需要执行`myJSON.userTypes['@type']`.

# javascript - 适用于 Adob e Acrobat 的 JavaScript API - 如何使用 JavaScript 创建指向非 PDF 文档的相对链接？

> ID：10656931
> 
> 赞同：3
> 
> 时间：2012-05-18T17:11:02.477
> 
> 标签：javascript, pdf, xml-serialization, relative-path, acrobat-sdk

我的公司想要设置一些 PDF 文档来跟踪项目。我们希望在 PDF 中创建链接，单击该链接时，使用相对路径打开给定文档（.doc、.xls 等）。

有 app.openDoc JavaScript 方法，但仅适用于 PDF 文件。

有“打开文件”操作，但这似乎只适用于绝对路径。

我查看了 API（[http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)）无济于事......有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:15:13.237

[doc 对象](http://livedocs.adobe.com/acrobat_sdk/9.1/Acrobat9_1_HTMLHelp/JS_API_AcroJS.88.433.html)没有这样的方法，但您可以执行以下操作：

*   将 .doc 或 .xsl 文件转换为 .docx 或 .xslx
*   将 XML 文件附加到 PDF
*   使用[Doc.getDataObjectContents()](http://blogs.adobe.com/formfeed/2009/08/base64_encode_a_pdf_attachment.html)读取数据

作为替代方案，您还可以在封闭环境中使用[util.readFileIntoStream](http://acrobatusers.com/tutorials/getting-external-data-into-acrobat-x-javascript)方法，您可以在每个人的系统上安装文件夹级脚本。

# image - UNIX命令将图像尺寸添加到文件名？

> ID：10656933
> 
> 赞同：0
> 
> 时间：2012-05-18T17:11:17.863
> 
> 标签：image, unix, command-line, dimensions

我确信这可以通过某种方式完成，但是我对 UNIX 命令行的有限知识需要在这里轻推。我想要做的是以下内容：

1.  有一个充满PNG文件的目录
2.  确定每个图像文件的图像尺寸宽度和高度
3.  将文件 foo.png 重命名为 [width_value]x[height_value]_foo.png

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:16:18.883

```
for i in `ls *.png`
do
   params=`get parameters from $i`
   mv $i params$i
done 
```

作为 OP 的练习留下的是从 png 文件中获取信息的程序

请注意，这`sips`是获取图像信息的 bsd 命令：

```
height=`sips -g pixelHeight $i`
width=`sips -g pixelWidth $i`
mv $i $heightX$width$i 
```

# ios - 具有透明图像背景的 UIButton 不透明

> ID：10656936
> 
> 赞同：4
> 
> 时间：2012-05-18T17:11:40.760
> 
> 标签：ios, uiimage, uibutton

我遇到了一个奇怪的问题。我有一个`UIButton`.`UIButtonTypeCustom`

对于它的背景图像，我使用的是透明图像。问题是实际图像的透明度似乎不正确。奇怪的是它实际上是透明的，因为背景正确显示在按钮后面。

下面是按钮外观（左）和按钮外观（右）的示例。我截取了一张截图并将图像覆盖在 Photoshop 中的背景上，背景在图像中正确显示，而在左侧的实际按钮中却没有。值得注意的是，左侧 UIButton 上的辉光比插入背景时的实际图像更强烈。

![UIButton 问题](../Images/3fca1483aa58d4e8abc552914ce861d8.png)

这是我用来证明它确实具有透明度的图像：

![使用的图像](../Images/ea5f36771042a45b52f3aebcd028d7c2.png)

这是我的代码：

```
UIButton *nextButton = [UIButton buttonWithType:UIButtonTypeCustom];
nextButton.backgroundColor = [UIColor clearColor];
nextButton.frame = CGRectMake(0, 0, 30, 30);
[nextButton setBackgroundImage:[[UIImage imageNamed:@"ButtonBackground.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:5] forState:UIControlStateNormal]; 
```

forState:UIControlStateHighlighted]; [自我 addSubview:nextButton];

我在其他地方使用了完全相同的图像进行绘制，并且透明度没有问题。

**更新：**添加其他透明图像同样会增加 alpha 的强度。虽然它们是透明的，但它们看起来更暗，因此透明度更低。同样，在其他地方也很完美。

**更新 2：**更糟糕的是，我刚刚创建了一个新项目，使用从另一个项目中拖动的完全相同的图像，创建了一个按钮，并且按钮正确显示没有问题。多么令人讨厌！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:16:46.710

您不必将背景颜色设置为透明。另外，尝试删除图像上的可拉伸调用。

此外，您应该设置图像，而不是背景图像。

如果这些都没有帮助，那么 Apple 可能只是不正确地渲染了您的图像。尝试创建一个 CALayer 并将其内容设置为您的图像，看看它是否正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:18:43.230

尝试这个

```
 UIButton *nextButton = [UIButton buttonWithType:UIButtonTypeCustom];

    nextButton.frame = CGRectMake(0, 0, 30, 30);

    nextButton.alpha=0.5f;

    [nextButton setBackgroundColor:[UIColor clearColor]];

    [nextButton setOpaque:NO];

    [nextButton setBackgroundImage:[UIImage imageNamed:@"ButtonBackground.png"] 
                          forState:UIControlStateNormal]; 
```

# asp.net - 无法更新由 gridview asp.net 中的图像字段绑定的列

> ID：10656937
> 
> 赞同：0
> 
> 时间：2012-05-18T17:11:52.257
> 
> 标签：asp.net, gridview, imagefield

我的网格视图中有三列名为 TweetText、TweetImageUrl 和一个 ImageFied 列，其 DataImageUrl 字段是 TweetImageURl。我的问题是，当我使用网格的编辑、更新功能时，我无法编辑/更新 TweetImageUrl，但我可以更新 TweetText。但是当我删除 ImageField 列时，我也可以更新 TweetImageUrl 列。那么任何人都可以提供帮助，以便我也可以在 Grid 中使用 ImageField 更新 TweetImageUrl 吗？

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False" DataKeyNames="TwitterUserId" 
        DataSourceID="SqlDataSource1" onrowcommand="GridView1_RowCommand" 
           PageSize="14" >
            <Columns>
                <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
            <asp:TemplateField>
                  <ItemTemplate>
                    <asp:LinkButton ID="Approve" runat="server" 
                      CommandName="Approve" 
                      CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"
                      Text="Approve" />

                  </ItemTemplate> 
                </asp:TemplateField>
            <asp:BoundField DataField="TweetText" HeaderText="TweetText" 
                SortExpression="TweetText" />
            <asp:BoundField DataField="TweetImageUrl" HeaderText="TweetImageUrl"
                SortExpression="TweetImageUrl" />
                <asp:ImageField DataImageUrlField="TweetImageUrl" HeaderText="Images"  ItemStyle-Height = "10px" ItemStyle-Width = "10px"
                    NullImageUrl="~/Admin/ajax-loader.gif">
                </asp:ImageField>
                       </Columns>
            <PagerSettings Mode="NextPreviousFirstLast" />
    </asp:GridView>

   <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConflictDetection="CompareAllValues" 
    ConnectionString="<%$ ConnectionStrings:mistersmartyplantsConnectionString %>" 
    DeleteCommand="DELETE FROM [TwitterData] WHERE [TwitterUserId] = @original_TwitterUserId AND (([TweetId] = @original_TweetId) OR ([TweetId] IS NULL AND @original_TweetId IS NULL)) AND (([TwitterUserName] = @original_TwitterUserName) OR ([TwitterUserName] IS NULL AND @original_TwitterUserName IS NULL)) AND (([TweetText] = @original_TweetText) OR ([TweetText] IS NULL AND @original_TweetText IS NULL)) AND (([TweetImageUrl] = @original_TweetImageUrl) OR ([TweetImageUrl] IS NULL AND @original_TweetImageUrl IS NULL)) AND (([TwitterDate] = @original_TwitterDate) OR ([TwitterDate] IS NULL AND @original_TwitterDate IS NULL))" 
    InsertCommand="INSERT INTO [TwitterData] ([TweetId], [TwitterUserId], [TwitterUserName], [TweetText], [TweetImageUrl], [TwitterDate]) VALUES (@TweetId, @TwitterUserId, @TwitterUserName, @TweetText, @TweetImageUrl, @TwitterDate)" 
    OldValuesParameterFormatString="original_{0}" 
    SelectCommand="SELECT [TweetId], [TwitterUserId], [TwitterUserName], [TweetText], [TweetImageUrl], [TwitterDate] FROM [TwitterData] WHERE ([Approved] = @Approved) ORDER BY [TwitterDate] DESC" 
    UpdateCommand="UPDATE [TwitterData] SET [TweetId] = @TweetId, [TwitterUserName] = @TwitterUserName, [TweetText] = @TweetText, [TweetImageUrl] = @TweetImageUrl, [TwitterDate] = @TwitterDate WHERE [TwitterUserId] = @original_TwitterUserId AND (([TweetId] = @original_TweetId) OR ([TweetId] IS NULL AND @original_TweetId IS NULL)) AND (([TwitterUserName] = @original_TwitterUserName) OR ([TwitterUserName] IS NULL AND @original_TwitterUserName IS NULL)) AND (([TweetText] = @original_TweetText) OR ([TweetText] IS NULL AND @original_TweetText IS NULL)) AND (([TweetImageUrl] = @original_TweetImageUrl) OR ([TweetImageUrl] IS NULL AND @original_TweetImageUrl IS NULL)) AND (([TwitterDate] = @original_TwitterDate) OR ([TwitterDate] IS NULL AND @original_TwitterDate IS NULL))">
    <DeleteParameters>
        <asp:Parameter Name="original_TwitterUserId" Type="String" />
        <asp:Parameter Name="original_TweetId" Type="String" />
        <asp:Parameter Name="original_TwitterUserName" Type="String" />
        <asp:Parameter Name="original_TweetText" Type="String" />
        <asp:Parameter Name="original_TweetImageUrl" Type="String" />
        <asp:Parameter Name="original_TwitterDate" Type="String" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="TweetId" Type="String" />
        <asp:Parameter Name="TwitterUserId" Type="String" />
        <asp:Parameter Name="TwitterUserName" Type="String" />
        <asp:Parameter Name="TweetText" Type="String" />
        <asp:Parameter Name="TweetImageUrl" Type="String" />
        <asp:Parameter Name="TwitterDate" Type="String" />
    </InsertParameters>
    <SelectParameters>
        <asp:Parameter DefaultValue="No" Name="Approved" Type="String" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="TweetId" Type="String" />
        <asp:Parameter Name="TwitterUserName" Type="String" />
        <asp:Parameter Name="TweetText" Type="String" />
        <asp:Parameter Name="TweetImageUrl" Type="String" />
        <asp:Parameter Name="TwitterDate" Type="String" />
        <asp:Parameter Name="original_TwitterUserId" Type="String" />
        <asp:Parameter Name="original_TweetId" Type="String" />
        <asp:Parameter Name="original_TwitterUserName" Type="String" />
        <asp:Parameter Name="original_TweetText" Type="String" />
        <asp:Parameter Name="original_TweetImageUrl" Type="String" />
        <asp:Parameter Name="original_TwitterDate" Type="String" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:46:19.410

利用

```
 <asp:TemplateField HeaderText="Images" ItemStyle-Height="10px" ItemStyle-Width="10px" >
            <ItemTemplate>
                <asp:Image ID="Image1" runat="server" ImageUrl='<%# Eval(TweetImageUrl) %>' Height="10px" Width="10px" />
            </ItemTemplate>
        </asp:TemplateField> 
```

而不是

```
<asp:ImageField DataImageUrlField="TweetImageUrl" HeaderText="Images"  ItemStyle-Height = "10px" ItemStyle-Width = "10px" NullImageUrl="~/Admin/ajax-loader.gif"></asp:ImageField> 
```

希望能帮助到你。祝你好运。

# ruby-on-rails-3 - 为什么即使使用 use_transactional_fixtures = false after_commit 也不运行

> ID：10656942
> 
> 赞同：15
> 
> 时间：2012-05-18T17:12:21.577
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, commit, rspec2, rspec-rails

rspec 中的事务性固定装置阻止调用 after_commit，但即使我禁用它们

```
RSpec.configure do |config|
  config.use_transactional_fixtures = false
end 
```

`after_commit callback`不运行。

这是一个带有最新 rspec / rails 的 rails 应用程序，我在此问题上产生了问题： [git://github.com/sheabarton/after_commit_demo.git](https://github.com/sheabarton/after_commit_demo)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-04T03:08:04.667

`commit`解决此问题的一种方法是手动触发回调。例子：

```
describe SomeModel do
  subject { ... }

  context 'after_commit' do
    after { subject.run_callbacks(:commit) }

    it 'does something' do
      subject.should_receive(:some_message)
    end
  end
end 
```

有点晚了，但希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-22T11:59:21.147

就我而言，我通过下面的 database_cleaner 设置解决了此类问题：

```
config.use_transactional_fixtures = false

config.before(:suite) do
  DatabaseCleaner.strategy = :deletion
  DatabaseCleaner.clean_with(:truncation)
end

config.before(:each) do
  DatabaseCleaner.start
end

config.after(:each) do
  DatabaseCleaner.clean
end 
```

感谢使用[Rspec 测试 after_commit/after_transaction](https://devblog.supportbee.com/2012/01/14/testing-after_commitafter_transaction-with-rspec/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-10T17:24:42.703

这类似于上面@jamesdevar 的答案，但我无法添加代码块，所以我必须单独输入。

您没有更改整个规范套件的策略。您可以在`:transaction`全局范围内继续使用，然后根据需要使用`:deletion`或`:truncation`（它们都有效）。只需在相关规范中添加一个标志。

```
config.use_transactional_fixtures = false

config.before(:suite) do
  # The :transaction strategy prevents :after_commit hooks from running
  DatabaseCleaner.strategy = :transaction
  DatabaseCleaner.clean_with(:truncation)
end

config.before(:each, :with_after_commit => true) do
  DatabaseCleaner.strategy = :truncation
end 
```

然后，在您的规格中：

```
describe "some test requiring after_commit hooks", :with_after_commit => true do 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-01T00:31:21.933

如果您使用的是[database_cleaner](https://github.com/bmabey/database_cleaner)，您仍然会遇到这种情况。我正在使用[test_after_commit](https://github.com/grosser/test_after_commit) gem，这似乎对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T18:22:12.993

[这个要点](https://gist.github.com/990357)帮助了我。

即使使用事务性固定装置，它也会对 ActiveRecord 进行猴子补丁以触发 after_commit 回调。

```
module ActiveRecord
  module ConnectionAdapters
    module DatabaseStatements
      #
      # Run the normal transaction method; when it's done, check to see if there
      # is exactly one open transaction. If so, that's the transactional
      # fixtures transaction; from the model's standpoint, the completed
      # transaction is the real deal. Send commit callbacks to models.
      #
      # If the transaction block raises a Rollback, we need to know, so we don't
      # call the commit hooks. Other exceptions don't need to be explicitly
      # accounted for since they will raise uncaught through this method and
      # prevent the code after the hook from running.
      #
      def transaction_with_transactional_fixtures(options = {}, &block)
        rolled_back = false

        transaction_without_transactional_fixtures do
          begin
            yield
          rescue ActiveRecord::Rollback => e
            rolled_back = true
            raise e
          end
        end

        if !rolled_back && open_transactions == 1
          commit_transaction_records(false)
        end
      end
      alias_method_chain :transaction, :transactional_fixtures

      #
      # The @_current_transaction_records is an stack of arrays, each one
      # containing the records associated with the corresponding transaction
      # in the transaction stack. This is used by the
      # `rollback_transaction_records` method (to only send a rollback hook to
      # models attached to the transaction being rolled back) but is usually
      # ignored by the `commit_transaction_records` method. Here we
      # monkey-patch it to temporarily replace the array with only the records
      # for the top-of-stack transaction, so the real
      # `commit_transaction_records` method only sends callbacks to those.
      #
      def commit_transaction_records_with_transactional_fixtures(commit = true)
        unless commit
          real_current_transaction_records = @_current_transaction_records
          @_current_transaction_records = @_current_transaction_records.pop
        end

        begin
          commit_transaction_records_without_transactional_fixtures
        rescue # works better with that :)
        ensure
          unless commit
            @_current_transaction_records = real_current_transaction_records
         end
        end
      end
      alias_method_chain :commit_transaction_records, :transactional_fixtures
    end
  end
end 
```

将这个新文件放在 Rails.root/spec/support 目录中，例如`spec/support/after_commit_with_transactional_fixtures.rb`.

Rails 3 会在测试环境中自动加载它。

# mysql - 如何存储百分比值？

> ID：10656948
> 
> 赞同：47
> 
> 时间：2012-05-18T17:12:51.397
> 
> 标签：mysql, ruby-on-rails, ruby, database, ruby-on-rails-3

我正在使用 Rails 3.2.2，我想在我的数据库表列中*存储*和*处理百分比值。*你有什么建议（例如，我应该设置什么类型的 - `:integer`, `:float`, `:decimal`, ... - 列）？关于存储百分比值，我必须/应该知道一些警告吗？

精度应为*2* ( `1.99%`, `50.01%`, ...)。

*注意*：我读过[这篇文章](https://stackoverflow.com/questions/8203268/storing-a-percentage-in-rails-mysql)。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-18T17:20:56.477

这在一定程度上取决于您计划如何使用该值，但通常 a`decimal`将是存储百分比的不错选择。请注意，您可以将其存储为百分比值 (10.01) 或小数 (.1001)。所以这会影响列的实际大小和精度。

存储为百分比或分数之间的选择取决于使用需求，但我*怀疑*在大多数情况下将其存储为分数会更简单（例如，0.10 表示 10%），因为它可以直接用于大多数情况计算更容易（不需要记住除以 100）。

正如@ismaelga 在评论中指出的那样，小数对于准确性来说是一个不错的选择（在处理货币计算时尤其好）。

# python - redis + gevent - 性能不佳 - 我做错了什么？

> ID：10656953
> 
> 赞同：21
> 
> 时间：2012-05-18T17:13:26.027
> 
> 标签：python, performance, redis, gevent

我刚刚写了一段简单的代码来测试 Redis + gevent 以了解异步如何帮助提高性能，我很惊讶地发现性能不佳。这是我的代码。如果您去掉前两行来猴子修补此代码，那么您将看到“正常执行”时间。

在 Ubuntu 12.04 LTS VM 上，我看到了

没有猴子补丁 - 54 秒 有猴子补丁 - 61 秒

我的代码/方法有问题吗？这里有性能问题吗？

```
#!/usr/bin/python

from gevent import monkey

monkey.patch_all()

import timeit
import redis
from redis.connection import UnixDomainSocketConnection

def UxDomainSocket():
    pool = redis.ConnectionPool(connection_class=UnixDomainSocketConnection, path =    '/var/redis/redis.sock')
    r = redis.Redis(connection_pool = pool)
    r.set("testsocket", 1)
    for i in range(100):
            r.incr('testsocket', 10)
    r.get('testsocket')
    r.delete('testsocket')

print timeit.Timer(stmt='UxDomainSocket()',
 setup='from __main__ import UxDomainSocket').timeit(number=1000) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-19T08:08:20.920

这是意料之中的。

您在 VM 上运行此基准测试，系统调用的成本高于物理硬件。当 gevent 被激活时，它往往会产生更多的系统调用（以处理 epoll 设备），因此最终性能会降低。

您可以通过在脚本上使用 strace 轻松检查这一点。

如果没有 gevent，内部循环会生成：

```
recvfrom(3, ":931\r\n", 4096, 0, NULL, NULL) = 6
sendto(3, "*3\r\n$6\r\nINCRBY\r\n$10\r\ntestsocket\r"..., 41, 0, NULL, 0) = 41
recvfrom(3, ":941\r\n", 4096, 0, NULL, NULL) = 6
sendto(3, "*3\r\n$6\r\nINCRBY\r\n$10\r\ntestsocket\r"..., 41, 0, NULL, 0) = 41 
```

使用 gevent，您将遇到以下情况：

```
recvfrom(3, ":221\r\n", 4096, 0, NULL, NULL) = 6
sendto(3, "*3\r\n$6\r\nINCRBY\r\n$10\r\ntestsocket\r"..., 41, 0, NULL, 0) = 41
recvfrom(3, 0x7b0f04, 4096, 0, 0, 0)    = -1 EAGAIN (Resource temporarily unavailable)
epoll_ctl(5, EPOLL_CTL_ADD, 3, {EPOLLIN, {u32=3, u64=3}}) = 0
epoll_wait(5, {{EPOLLIN, {u32=3, u64=3}}}, 32, 4294967295) = 1
clock_gettime(CLOCK_MONOTONIC, {2469, 779710323}) = 0
epoll_ctl(5, EPOLL_CTL_DEL, 3, {EPOLLIN, {u32=3, u64=3}}) = 0
recvfrom(3, ":231\r\n", 4096, 0, NULL, NULL) = 6
sendto(3, "*3\r\n$6\r\nINCRBY\r\n$10\r\ntestsocket\r"..., 41, 0, NULL, 0) = 41 
```

当 recvfrom 调用阻塞 (EAGAIN) 时，gevent 会返回事件循环，因此会执行额外的调用来等待文件描述符事件 (epoll_wait)。

请注意，这种基准测试对于任何事件循环系统来说都是最坏的情况，因为您只有一个文件描述符，因此无法将等待操作分解为多个描述符。此外，异步 I/O 在这里无法改进任何东西，因为一切都是同步的。

对于 Redis 来说，这也是最坏的情况，因为：

*   它生成到服务器的多次往返

*   它系统地连接/断开连接（1000 次），因为池是在 UxDomainSocket 函数中声明的。

实际上，您的基准测试并未测试 gevent、redis 或 redis-py：它锻炼了 VM 的能力，以维持两个进程之间的乒乓球比赛。

如果你想提高性能，你需要：

*   使用流水线减少往返次数

*   使池在整个基准测试中保持不变

例如，考虑以下脚本：

```
#!/usr/bin/python

from gevent import monkey
monkey.patch_all()

import timeit
import redis
from redis.connection import UnixDomainSocketConnection

pool = redis.ConnectionPool(connection_class=UnixDomainSocketConnection, path = '/tmp/redis.sock')

def UxDomainSocket():
    r = redis.Redis(connection_pool = pool)
    p = r.pipeline(transaction=False)
    p.set("testsocket", 1)
    for i in range(100):
        p.incr('testsocket', 10)
    p.get('testsocket')
    p.delete('testsocket')
    p.execute()

print timeit.Timer(stmt='UxDomainSocket()', setup='from __main__ import UxDomainSocket').timeit(number=1000) 
```

使用这个脚本，我获得了大约 3 倍的性能提升，并且 gevent 几乎没有开销。

# c++ - boost::python 函数调用中 boost::shared_ptr 的转换

> ID：10656954
> 
> 赞同：4
> 
> 时间：2012-05-18T17:13:37.043
> 
> 标签：c++, python, boost, shared-ptr, boost-python

考虑以下示例：

```
#include "Python.h"
#include <boost/python.hpp>
#include <boost/shared_ptr.hpp>

class A {};

class B : public A{};

void foo(boost::shared_ptr<A>& aptr) { }

BOOST_PYTHON_MODULE(mypy)
{
  using namespace boost::python;   
  class_<A, boost::shared_ptr<A> >("A", init<>());
  class_<B, boost::shared_ptr<B>, bases<A> >("B", init<>());
  def("foo", foo);
} 
```

如果我调用 python 代码

```
import mypy
b = mypy.B()
mypy.foo(b) 
```

我明白了

```
ArgumentError: Python argument types in
    mypy.foo(B)
did not match C++ signature:
    foo(boost::shared_ptr<A> {lvalue}) 
```

我已经用谷歌搜索了很多，但我找不到一个很好的解释/修复/解决方法。非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T01:03:14.370

问题是您要求对 a 进行非常量引用`shared_ptr<A>`，而您`b`在 Python 中的实例根本不包含一个；它包含一个`shared_ptr<B>`. 虽然 `shared_ptr<B>`可以隐式转换为`shared_ptr<A>`，`shared_ptr<B>&` **但不能**隐式转换为`shared_ptr<A>&`。

如果您可以修改`foo`为`shared_ptr<A>`, 或`shared_ptr<A> const &`，那将解决您的问题。

如果没有，您还需要包装一个接受`shared_ptr<B>&`.

# html - 我可以使用云 API 促进 Mobile Safari 中的“上传”吗？

> ID：10656958
> 
> 赞同：1
> 
> 时间：2012-05-18T17:13:52.770
> 
> 标签：html, mobile, safari

这也许是对旧的 SO 问题“ [A html5 web app for mobile safari to upload images from the Photos.app?](https://stackoverflow.com/questions/3891831/a-html5-web-app-for-mobile-safari-to-upload-images-from-the-photos-app) ”的重新讨论。我意识到 iOS Safari 根本不允许文件上传。但是，我想知道是否有办法利用 Dropbox 或 iCloud 等云存储 API 来实现相同的目标。因此，例如，我将有一个链接到 dropbox/icloud 的 url，而不是文件上传对话框，然后可以提示用户发送文件。

对不起，如果我太含糊了 - 但我想我不太关心交付机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:40:37.957

如果您的意思是 url 属于 dropbox/icloud 文件，那么您甚至不需要“选择”任何文件，因为 url 已经指向一个文件，因此表单中的简单文本框就足够了。

如果这不是你的意思，你能详细说明吗？

# objective-c - dateFromString：返回零

> ID：10656962
> 
> 赞同：-2
> 
> 时间：2012-05-18T17:14:10.477
> 
> 标签：objective-c, cocoa, nsdateformatter

我正在尝试将 NString 转换为 NSData 但我不明白......怎么了？

```
NSString* createAt = @"Wed May 16 06:42:05 +0000 2012";
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"eee, dd MMM yyyy HH:mm:ss ZZZZ yyyy"];            
NSDate *currentDate = [df dateFromString:createAt];  //returns nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:18:44.773

格式和字符串不匹配。

正确的格式是`@"eee MMM dd HH:mm:ss ZZZZ yyyy"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:21:52.213

您的日期格式字符串错误。它应该是：

```
@"eee MMM dd HH:mm:ss Z yyyy" 
```

# javascript - 是否有 Javascript iCalendar 库？

> ID：10656965
> 
> 赞同：17
> 
> 时间：2012-05-18T17:14:20.997
> 
> 标签：javascript, icalendar, rfc2445

是否有可用于 Javascript 的 iCalendar 库 - 解析器或日历对象本身？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-31T09:39:23.660

这是kewisch的另一个，但仍然是最新的

[https://github.com/mozilla-comm/ical.js/](https://github.com/mozilla-comm/ical.js/)

**编辑**

还有用于在 HTML 中显示日历的 dhtmlx 调度程序。 [http://dhtmlx.com/docs/products/dhtmlxScheduler/](http://dhtmlx.com/docs/products/dhtmlxScheduler/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-07T08:40:37.920

还有[https://github.com/jakubroztocil/rrule](https://github.com/jakubroztocil/rrule)，它比这里的其他选择更受欢迎，并且在撰写本文时仍然有效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-15T23:29:55.933

[https://github.com/kewisch/ical.js](https://github.com/kewisch/ical.js)

由 Thunderbird 背后的闪电侠。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-25T15:22:40.117

所有其他答案都已经过时了。

*   使用这个[ics 包](https://www.npmjs.com/package/ics)进行 ics 生成
*   还有其他一些选择，但这很简单，也是最好的
*   `RRULE`您必须为该`recurrenceRule`物业使用某种在线生成器
*   如果您需要 ics 阅读器/解析器，那么有很多选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T17:17:16.800

在google上很容易找到一些：

*   [jQuery iCalendar 插件](http://keith-wood.name/icalendar.html)
*   [javascript iCalendar 插件](http://sourceforge.net/projects/jsicalendar/)

# java - 测试向后兼容性？

> ID：10656971
> 
> 赞同：1
> 
> 时间：2012-05-18T17:14:51.897
> 
> 标签：java, android

如何在 android 模拟器中测试向后兼容性？我有一个带有 SDK 15 的测试应用程序。现在，如果我将编译器版本切换到 SDK 7（用于在 Android2.1 仿真上运行它），Eclipse 会抱怨所有使用的导入仅包含 >SDK7。当然。

但是在我的代码中，我关心的是关键代码`if(Build.VERSION.SDK_INT > 11)`...，因此在旧设备上运行时这应该不是问题。无论如何，当然，日食仍然在抱怨。

那么，我怎样才能进行这些反向测试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:28:43.960

在 AndroidManifest.xml 文件中，将 Min sdk version 属性更改为您希望应用程序在其上运行的 sdk 版本，然后 eclipse 不会抱怨....

例如：

```
 < uses-sdk android:minSdkVersion="10" /> 
```

# php - 使用 AJAX 传递表单条目以查询传递并更新到 div 标记的数据库

> ID：10656973
> 
> 赞同：0
> 
> 时间：2012-05-18T17:14:59.167
> 
> 标签：php, javascript, mysql, html, ajax

我正在尝试使用 AJAX 样式表单创建页面。在提交时，表单中的值会搜索和查询数据库，并将搜索结果输出到与表单相同的 DIV 中。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:28:09.233

jQuery 可能是您正在寻找的...

文档很简单。[http://jquery.com/](http://jquery.com/)

一般来说，jQuery 遵循 find something then do something 的方法。

*   找到一些东西--->注意对某些元素的一些操作（在你的情况下，点击提交）
*   做某事--->对您想要运行查询的php页面进行ajax调用并返回结果，然后将结果插入页面上您想要的位置

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

此任务的其他一些有用的 jQuery 命令可能是...

*   [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)
*   [http://api.jquery.com/remove/](http://api.jquery.com/remove/)
*   [http://api.jquery.com/append/](http://api.jquery.com/append/)

希望这可以帮助。

# ios - CALayer 委托导致僵尸崩溃——为什么？

> ID：10656975
> 
> 赞同：0
> 
> 时间：2012-05-18T17:15:05.493
> 
> 标签：ios, uiviewcontroller, core-animation

我是 Core Animation 的新手，并且无法在委托中使用 drawLayer 方法实现 CALayer 对象。

我已将问题缩小到一个非常简单的测试。我有一个名为 LBViewController 的主视图控制器，它推送一个名为 Level2ViewController 的辅助视图控制器。在2 级控制器中，在viewWillAppear: 中，我创建了一个CALayer 对象，它的delegate=self（即2 级控制器）。无论我是否真正实现了 drawLayer:inContext: 方法，我都有同样的问题——当我返回主 viewController 时，我遇到了僵尸崩溃。在分析器中，出现问题的对象似乎是 2 级 viewController 对象——它在弹出后被释放。

我尝试使用子类 CALayer 对象而不是委托，它工作正常。如果我注释掉委托分配，它也运行良好。我想了解为什么委派会导致这个问题。任何意见是极大的赞赏。

这是我的代码---

**Level2ViewController**

```
@implementation Level2ViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    CALayer *box1 = [[CALayer alloc] init];
    box1.delegate = self;   // problem disappears if I comment out this assignment
    box1.backgroundColor = [UIColor redColor].CGColor;
    box1.frame = CGRectMake(10,10,200,300);
    [self.view.layer addSublayer:box1];
    [box1 setNeedsDisplay];

}

// makes no difference whether or not this method is defined as long
// as box1.delegate == self
- (void)drawLayer:(CALayer *)theLayer inContext:(CGContextRef)theContext
{
    CGContextSaveGState(theContext);
    CGContextSetStrokeColorWithColor(theContext, [UIColor blackColor].CGColor);
    CGContextSetLineWidth(theContext, 3);
    CGContextAddRect(theContext, CGRectMake(5, 5, 40, 40));
    CGContextStrokePath(theContext);
    CGContextRestoreGState(theContext);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

LBViewController （主控制器）中推送二级视图控制器**的方法**

```
- (IBAction)testAction:(id)sender {
    Level2ViewController *controller = [[Level2ViewController alloc]   
                                  initWithNibName:@"Level2ViewController" bundle:nil];
    controller.title = @"Level2";

    // this push statement is where the profiler tells me the messaged zombie has been malloc'ed
    [self.navigationController pushViewController:controller animated:YES];
    [controller release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:06:26.650

您可能希望在`nil`释放委托对象之前将图层的委托设置为。所以在你`Leve2ViewController`这样做：

```
-(void)viewWillDisappear:(BOOL)animated
{
    if (box1) {
        box1.delegate = nil;
    }
    box1 = nil;
} 
```

显然，这需要`box1`将其转换为字段（因此可以在 中访问`viewWillDisappear:`）

由于您`box1`在`viewWillAppear:`上面的代码中创建使用`viewWillDisappear:`. 最近，当我遇到类似的问题时，我有一个单独的委托对象，我在其中使用了`init`和`dealloc`.

注意：您调用`[super viewDidAppear:animated];`. `viewWillAppear`看起来像错字或复制/粘贴故障:-)

# jquery - jQuery .css 不适用于 chrome，但适用于 FF、Safari、IE9

> ID：10656978
> 
> 赞同：0
> 
> 时间：2012-05-18T17:15:28.130
> 
> 标签：jquery, css, forms, google-chrome, hide

我一直在尝试更好地掌握 jQuery，并且一直在想出一些随机页面来测试其中的一些。我制作了一个小型的模拟旅行社页面，其中包含一个带有出发地和目的地国家选项的表格。默认出发地/目的地是美国，美国的第二个选项出现在其下方。当用户选择美国以外的其他内容时，states 选项会消失，Chrome 除外。

网站： http: [//www.stephenweigel.com/portfolio/somewheresomehow](http://www.stephenweigel.com/portfolio/somewheresomehow)

脚本：（确实有 $(document).ready(function() ，不认为我需要发布整个 JS 文件）

```
 $('#destination').click(function(){
            // Show US States if Destination is US
            var destination = $('#destination').val();
            var domestic = 'USA';

            if (destination == domestic) {
                $('#usDest').css("display","inline");
            } else {
                $('#usDest').css("display","none");
            } 
```

html:

```
<div>
      <select name="destination" id="destination">
        <option value="USA" selected="selected">USA</option>
        <option value="Canada">Canada</option>
        <option value="Mexico">Mexico</option>
        <option value="Italy">Italy</option>
         <option value="France"> France </option>
        <option value="Spain"> Spain </option>
      </select> <!--end destination-->
     </div>
     <div>
     <select name="usDest" id="usDest">
        <option value="Alabama" selected="selected">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <option value="District of Columbia">District of Columbia</option>
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
      </select> <!-- end usDest-->
      </div> 
```

也许我遗漏了一些东西，但它适用于 Firefox、Safari 和 Internet Explorer 9 但不适用于 chrome 似乎很奇怪。

我也尝试过使用：

```
 $('#origin').click(function(){
            var origin = $('#origin').val();
            var domestic = 'USA';

            if (origin == domestic) {
                $('#usOrigin').removeClass("invisible");
                $('#usOrigin').addClass("visible");
            } else {
                $('#usOrigin').removeClass("visible");
                $('#usOrigin').addClass("invisible");
            } 
```

与CSS：

```
.visible {
    display: inline;

}

.invisible {
    display: none;  
} 
```

但这在 chrome 中也不起作用。（适用于其他浏览器）

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:23:00.060

你可以很容易地使用jQuery`hide()`来`show()`实现这个效果。但是根据人们在这里发布的内容，我猜你在[JS 传播](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFoQFjAA&url=http://www.quirksmode.org/js/events_order.html&ei=X4W2T_KBGYum8QSpgIHHCg&usg=AFQjCNHBzjK5MxmBx8E0A3Pl40grLbcDEA&sig2=yVv8ycMIqsz06SeLcAWAYg)方面遇到了问题（代码中的错误）。这可能是由错误的扩展引起的，这就是您得到它的原因，而其他人没有。测试您的应用程序`Incognito Mode`以轻松暂时禁用扩展程序。在 Chrome 中启动隐身模式`CTRL + SHIFT + N`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:29:51.593

这是我放在一起的内容：http: [//jsfiddle.net/XzQkb/](http://jsfiddle.net/XzQkb/)。

```
<div>
    <select name="destination" id="destination">
        <option value="USA" selected="selected">USA</option>
        <option value="Canada">Canada</option>
        <option value="Mexico">Mexico</option>
        <option value="Italy">Italy</option>
        <option value="France"> France </option>
        <option value="Spain"> Spain </option>
    </select> <!--end destination-->
</div>
<div>
    <select name="usDest" id="usDest">
        <option value="Alabama" selected="selected">Alabama</option>
        <option value="Alaska">Alaska</option>
        <option value="Arizona">Arizona</option>
        <option value="Arkansas">Arkansas</option>
        <option value="California">California</option>
        <option value="Colorado">Colorado</option>
        <option value="Connecticut">Connecticut</option>
        <option value="Delaware">Delaware</option>
        <option value="District of Columbia">District of Columbia</option>
        <option value="Florida">Florida</option>
        <option value="Georgia">Georgia</option>
        <option value="Hawaii">Hawaii</option>
        <option value="Idaho">Idaho</option>
        <option value="Illinois">Illinois</option>
        <option value="Indiana">Indiana</option>
        <option value="Iowa">Iowa</option>
        <option value="Kansas">Kansas</option>
        <option value="Kentucky">Kentucky</option>
        <option value="Louisiana">Louisiana</option>
        <option value="Maine">Maine</option>
        <option value="Maryland">Maryland</option>
        <option value="Massachusetts">Massachusetts</option>
        <option value="Michigan">Michigan</option>
        <option value="Minnesota">Minnesota</option>
        <option value="Missouri">Missouri</option>
        <option value="Montana">Montana</option>
        <option value="Nebraska">Nebraska</option>
        <option value="Nevada">Nevada</option>
        <option value="New Hampshire">New Hampshire</option>
        <option value="New Jersey">New Jersey</option>
        <option value="New Mexico">New Mexico</option>
        <option value="New York">New York</option>
        <option value="North Carolina">North Carolina</option>
        <option value="North Dakota">North Dakota</option>
        <option value="Ohio">Ohio</option>
        <option value="Oklahoma">Oklahoma</option>
        <option value="Oregon">Oregon</option>
        <option value="Pennsylvania">Pennsylvania</option>
        <option value="Rhode Island">Rhode Island</option>
        <option value="South Carolina">South Carolina</option>
        <option value="South Dakota">South Dakota</option>
        <option value="Tennessee">Tennessee</option>
        <option value="Texas">Texas</option>
        <option value="Utah">Utah</option>
        <option value="Vermont">Vermont</option>
        <option value="Virginia">Virginia</option>
        <option value="Washington">Washington</option>
        <option value="West Virginia">West Virginia</option>
        <option value="Wisconsin">Wisconsin</option>
        <option value="Wyoming">Wyoming</option>
    </select> <!-- end usDest-->
</div>​ 
```

和

```
$("#destination").on("change", function () {
    $("#usDest").toggle($(this).val() === "USA");
});​ 
```

# ruby-on-rails-3 - Rails 3.1 UJS link_to remote true 必须重新加载页面才能工作

> ID：10656982
> 
> 赞同：1
> 
> 时间：2012-05-18T17:15:51.827
> 
> 标签：ruby-on-rails-3, jquery

所以我有一个我想使用 ajax 处理的注销链接。

```
<li><%= link_to('Logout', "#", :method => :delete, :remote => true, :class => 'logout') %></li> 
```

但是，每次都必须重新加载页面才能使注销工作，然后才能呈现部分。登录工作绝对正常。当在没有重新加载页面的情况下单击注销链接时，它只会删除到 localhost，由于某种原因它不会删除到 /users/sign_out。然后页面需要再次重新加载以更新 $(#user_login_box)。这仅在注销时。

```
$(document).ready(function() {

 function setNotice(data) {

 var $flash = $("<div>",{
  'class': 'alert alert-success',
  'html': data.data.message 
 });

var $link  = $("<a>",{
  'html': 'x',
  'class': 'close',
  'href': '#',
  'data-dismiss': 'alert'
}).data("dismiss","alert").prependTo( $flash );

$('#account').html(function(){
 return data.login ? data.email : "Account" ;
});
$('.row').prepend($flash);
$('#user_login_box').html(data.content);    
}

$('form#sign_in').bind('ajax:success', function(e, data, status, xhr) {
  console.log(data);
 if(data.success) { 
   setNotice(data)

} else {
  $('#status').html(data.data.message);

}
});

 $(".logout").on("click", function(e){
   e.preventDefault();
  $.post("/users/sign_out", {_method:"delete"}, function(data){
   setNotice(data);
  });
 });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:57:10.710

也许尝试将您的退出路径添加到链接。现在看起来 href 属性设置为哈希。据我所知，jquery-rails 使用 href 属性来确定请求的 url。

# c++ - 英特尔 TBB 中的原子双精度/浮点数

> ID：10656983
> 
> 赞同：8
> 
> 时间：2012-05-18T17:16:06.103
> 
> 标签：c++, atomic, tbb

根据文档，原子支持整数类型、枚举类型或指针类型的 T。英特尔 TBB 是否正式支持浮点数/双精度数？我在[这里](https://stackoverflow.com/questions/242172/is-this-%20c-implementation-for-an-atomic-float-safe)和 Raf Schietekat[在这里](http://software.intel.com/en-us/forums/showthread.php?t=58680)看到了一些补丁，它们可能/可能没有被合并到最新的 4.0 版本中。从我读过的补丁中，我注意到的唯一主要区别是将 reinterpret_cast 从整数类型添加到浮点/双精度。如果有人能澄清这一点，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:45:22.183

您可以轻松地添加对基于 64 位和 32 位原子整数的浮点数的支持。原子加载/存储/交换可以使用 reinterpret_cast 作为直接包装器来实现，原子算术运算可以使用带有原子比较交换的循环来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:23:49.617

C++11 支持原子浮点数和双精度数。`std::atomic_fetch_add`但是，仅整数类型支持算术函数。

如果您有 C++11 编译器，我建议您切换到，`std::atomic`这样您就不必依赖未记录的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T14:11:22.987

test_atomic.cpp 中对非整数类型的测试是在 2008 年添加的（在与 Raf 讨论之后不久）。因此，甚至早于问题的时间，TBB 就支持浮点和双原子（尽管仅限于 fetch_and_store 和 compare_and_exchange 读取-修改-写入操作）。

# c# - 可以在文件中插入一行，而无需在 C# 中读取整个文件

> ID：10656984
> 
> 赞同：0
> 
> 时间：2012-05-18T17:16:09.967
> 
> 标签：c#, memory-management, file-io

所以这只是一个想法......假设我想在第一个换行符处将一行插入文件，但我不想将整个文件读入内存。有没有办法将文件逐行读入内存，然后在到达第一个换行符时，插入一行并关闭文件阅读器？

谢谢！

***对不起，我的标题/描述中的早期错字***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:24:12.343

您可以一次读取一个字节并截取换行符。然后在那个位置做一个stream.WriteLine()。您必须打开文件进行读+写

编辑：我想过使用 FileStream 对象，但我不确定。现在任何尝试这里提到的建议：http: [//social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/e5077949-5d23-4d26-a530-6d503745a197](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/e5077949-5d23-4d26-a530-6d503745a197)

再次编辑：检查[How to read and write a file in C#](https://stackoverflow.com/questions/605685/how-to-both-read-write-file-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:20:29.110

尝试以下操作：

```
using (StreamWriter w = File.AppendText("test.txt"))
{
     w.Write("\r\nTest");
     w.Flush();
     w.Close();
} 
```

**更新：**

在现有文本文件中插入行（我假设您正在使用文本文件，因为您提到了换行符）：没有办法使用文件 I/O API 来执行此操作 - 您必须在第一行*之后*阅读文本中断，覆盖文件并添加原始尾随文本。

# android - 为什么我不能在 ListView 之后放置 Adview？

> ID：10656985
> 
> 赞同：2
> 
> 时间：2012-05-18T17:16:10.927
> 
> 标签：android, listview, adview

我正在测试`Adview`我的布局。如果我把它放在`Adview`之前`ListView`一切都很好，但如果我把它放在它之后`ListView`它就不会出现。

怎么了？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="bottom"
        android:background="@android:color/white" />

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="xxxx"
        ads:testDevices="xxxx" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:18:13.040

您将`ListView`'s设置`layout_height`为`fill_parent`，因此它将占用布局中所有剩余的垂直空间。你`AdView`在那里，它只是被`ListView`.

如果你想把它放在`AdView`底部，并`ListView`占据所有剩余的垂直空间，你可以用权重来做：

```
<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="@android:color/white" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T17:19:09.327

你的`Listview height is fill parent`所以你的垂直空间已经被listview占用了，，，

所以制作 Listview`android:layout_weight="1"`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ListView android:layout_weight="1"
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="bottom"
        android:background="@android:color/white" />

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="xxxx"
        ads:testDevices="xxxx" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-19T03:04:44.337

将您的布​​局更改为`RelativeLayout`并添加`android:layout_above="@+id/adView"`您的`ListView`. 我希望能帮助你。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/list_view"
        android:layout_above="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:divider="@null" />

    <com.google.android.gms.ads.AdView 
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        ads:adSize="BANNER"
        ads:adUnitId="xxxxx" />

</RelativeLayout> 
```

# c# - 将 GUID 数组转换为 int 数组

> ID：10656986
> 
> 赞同：0
> 
> 时间：2012-05-18T17:16:13.237
> 
> 标签：c#, linq

我正在使用 linq 查询根据它的 id 创建我的集合，它是一个 guid。我有一个可以与 1 个或多个产品关联的项目。我需要显示与该项目和其他数据关联的所有产品名称就像名称，摘要，日期一样。我的问题是当我尝试使用变量 i 时，它是我的数组中的一个 guid，它会抛出 Guid 无法转换为 int 的错误。我很确定我必须转换我的Guid 数组到 int 数组，但不知道如何实现它。下面是我的代码。

```
 foreach( Guid  i in itemid)  
       {           

          var vals = from r in datacontext.ItemTable_s where r.itemID == i select r;

            ItemTable_s[] tempdata = vals.ToArray<.ItemTable_s>();       

            Facet[] ftemp= new Facet[tempdata.Length]; 

   ItemImage image = null;
   string s1="";

      for (int iv = 0; iv < tempdata.Length; iv++)
          {
          s1 += tempdata[i].productname + "\n";

          }

           ftemp[3] = new facet("Productname",facettype.text,s1);   
          collection.AddItem( tempdata[i].ItemName, null, null,
                               new ItemImage(new Uri(-tempdata[i].location))
                                                                );

   } 
```

在我上面的代码 tempdata[i] 是我得到错误消息的地方，说 guid 不能隐式转换为 int。我该如何解决这个问题还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:33:39.260

改变你的逻辑。不要使用 foreach，而是使用 int for 语句。然后从数组中访问 itemid。像这样的东西：像这样的东西：

```
 for( int i=0; i<items.Count; i++)
{
    ...
    var vals = from r in datacontext.ItemTable_s where r.itemID == itemid[i] select r;
    ...
    s1 += tempdata[i].productname + "\n";
} 
```

没有尝试代码，但我希望你能明白......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:32:26.543

（GUID 是 128 位，因此不能安全地将其转换为 32 位整数。）

更好的选择可能是使用`Dictionary<Guid, ItemTable_s>`. 然后您仍然可以使用 GUID 对其进行索引。

```
var tempdata = new Dictionary<Guid, ItemTable_s>;
foreach(var anItem in datacontext.ItemTable_s)
{
    tempdata.Add(anItem.ItemID, anItem);
} 
```

那么当前引发异常的行 ( `s1 += tempdata[i].productname + "\n";`) 应该按原样工作。

这也将使您的`itemid`阵列变得不必要。或者，您可以保留您正在使用的两个数组。然后，您必须将该行更改为：

```
s1 += tempdata[itemid.IndexOf(i)].productname + "\n"; 
```

看起来这就是你打算做的。但这比使用字典要慢得多。`itemid`这意味着每次您需要确定条目在哪里时，您都将对数组进行顺序搜索`tempdata`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:30:21.647

GUID 看起来像这样

7c9e6679-7425-40de-944b-e07fc1f90ae7

如您所见，该字符没有 Int 表示。您的 Facet 构造函数需要使用 GUID 而不是 int。

# .htaccess - 使用 htaccess 限制从子域查看域

> ID：10656990
> 
> 赞同：1
> 
> 时间：2012-05-18T17:16:28.483
> 
> 标签：.htaccess

我的网站 (mywebsite.name) 位于共享主机上，并且我在那里有一个插件域 (addondomain.eu)。由于它是共享主机上的插件域，任何人都可以从 addondomain.mywebsite.name 访问我的插件域

如何使用 htaccess 限制对 addondomain.mywebsite.name 的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:22:04.943

我确定您可以使用 urlrewrite 来阻止从特定 url 访问该站点。但更好的问题是你为什么要这样做？您所做的只是阻止合法访问者。更好的选择是将人们重定向回您的主域。

# html - 为什么 AJAX 优于 iFrame？

> ID：10656992
> 
> 赞同：10
> 
> 时间：2012-05-18T17:16:37.987
> 
> 标签：html, ajax, post, iframe

我是一个相对较新的程序员，与他告诉我的合作伙伴交谈，在 AJAX 之前，他使用 iframe 发送数据和更改内容（显然是在 JavaScript 的帮助下）。

我知道两者是相似的技术，但我没有找到一篇文章来描述它们的特点，

AJAX 比 Iframe 有什么优势？

**编辑** 我没有找到对该技术的任何解释，但我的搭档告诉我他通过隐藏的 iframe 发布数据并提交 iframe，听起来只是 iframe 必须刷新，但我从来没有这样做过

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T17:29:55.440

1.  AJAX 的一个优势是能够读取请求的状态/状态。您还可以访问页眉，而 iframe 则没有。
2.  Ajax 可以处理多个异步请求。使用 iframe 有点棘手，因为您需要为每个请求创建一个 iframe（并跟踪所有这些以在以后删除它们）而不是回收同一个。
3.  现有的库充满了 AJAX 的优点，并且有更大的社区支持基础。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T17:35:42.687

```
iframe 
```

是一种在一个页面中分别显示**两个**（或多个）网页的方式

```
 ajax 
```

是一种**将**两个（或多个）网页（或新数据）**合并为**一个的方法

我发现 Ajax 的主要优势是：

*   CSS 将流向调用它的页面。
*   一种无需刷新页面即可检索数据并向访问者更新新信息的方法。

对这个网站的一个很好的提及是因为它巧妙地使用了 Ajax。

通过 Ajax 实现“Google 即时”和提示性搜索

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-24T19:29:35.930

只是我的两分钱：

我同意上面的克里斯，我不会说它们具有可比性。

有一个用例，我发现 iFrames 通过 AJAX 更容易使用，也就是说，如果您需要将复杂的表单提交到另一个页面但您不需要任何响应 - iframe 路由是迄今为止最容易编码的。

除此之外，使用隐喻的 AJAX 充当了一个非常博学的中间人。它将处理多个请求、这些请求的状态，并以您需要的格式交回数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-27T05:28:33.997

我只是想添加这个，因为我没有看到任何答案。

使用 Ajax 的原因主要是关于控制，你会得到很多。上面已经提到了这些原因。

然而，Ajax 的一个严重缺点是它是一个 JS 修复程序。JavaScript 是一门很棒的语言，但一段时间以来人们一直在把它扔到每一个问题上，如果将它们内置到浏览器中，可以优化的事情现在正在用 JS 慢慢完成（与编译语言相比）。

iFrame 就是一个很好的例子。它们代表了一个非常常见的用例，希望在其他一些 html 中包含一些 html。不幸的是，他们在这方面并不是很了不起，往往比其他任何事情都更令人头疼。

如果你想包含一些东西而不是让它弄乱你的网站，也不想让你的网站弄乱它，那么 iFrame 很棒。对于在其他 html 中包含一些随机 html 的更常见用例，Ajax 更好。

这就是我要说明的一点：这很愚蠢。没有理由不应该有像 iFrame 这样更像 Ajax 的东西。但是，通过加入 Ajax（就像我们所有人一样），我们现在别无选择。

这是一个问题的最大原因是 JS 从来都不是互联网的绝对构建块。此外，几乎每个网站都在使用它来侵犯用户隐私。因此，如果您正在寻找使用 iFrame 的充分理由，这是我的：

不需要 JS 感觉很好。如果您可以通过 JS*改进*您的网站而不是**依赖**它，那将是一项来之不易的成就，并且该网站整体上会感觉不那么“hacky”。

无论如何，这只是我的输入。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T17:32:25.313

根据我的经验，通过 AJAX 加载的数据比 iFrame 中的数据更容易操作。AJAX 也非常适合创建更好的用户体验。但是我不确定我是否必须将 iFrame 和 AJAX 放在同一类别中，因为 AJAX 是异步内容，而 iFrame 实际上只是从您的站点外部加载的另一个页面。

我还可以看到 iFraming 造成 SEO 障碍并造成糟糕的用户体验。老实说，如果我可以访问内容，我会更喜欢 AJAX。

# facebook-graph-api - 如何在 facebook 上获取活动中的成员数量？

> ID：10656993
> 
> 赞同：0
> 
> 时间：2012-05-18T17:16:42.120
> 
> 标签：facebook-graph-api

我需要获取设置选项“GOING”、“MAYBE”和“INVITED”的成员数量。有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T21:47:51.437

您可以使用

```
/v1.0/{event_id}/invited?summary=true&limit=0
// use "limit=0" if you're not interested in data, just the summary 
```

它返回信息，例如：

```
{
  "data": [
  ], 
  "summary": {
    "maybe_count": 0, 
    "declined_count": 0, 
    "attending_count": 3, 
    "count": 3
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:35:05.830

Facebook 不会`count`在这些表上公开方法。做到这一点的唯一方法是进行查询，返回所有成员并用您的脚本计算它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:31:17.947

根据您想要处理信息的方式，您有多种攻击方式

*   graph.facebook.com/{event_id}/invited - 返回所有受邀用户，每个用户的 rsvp_status 值与以下其他选项不完全匹配（参加、不确定、拒绝、未回复）
*   graph.facebook.com/{event_id}/attending - 正是你所期望的
*   graph.facebook.com/{event_id}/maybe - 正是你所期望的
*   graph.facebook.com/{event_id}/noreply - 正是你所期望的
*   graph.facebook.com/{event_id}/declined - 正是你所期望的

# mysql - 一年中的一周，从星期六开始的几周

> ID：10656996
> 
> 赞同：2
> 
> 时间：2012-05-18T17:17:00.830
> 
> 标签：mysql, date

我们的客户目前已定义从周六、周日或周一开始的周数。遇到了这些 DATE_FORMAT 选项，它们可以很好地处理从周日和周一开始的一周，但找不到从周六开始的一周的方法。有什么建议么？

> ```
> %U    Week (00..53), where Sunday is the first day of the week
> %u    Week (00..53), where Monday is the first day of the week 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:23:10.073

我有一个类似的问题：我需要根据以下规则计算周数：

*   一周从星期五开始
*   一年中的剩余天数（一年中最后一个星期五之后未完成一周的所有天数）应计入下一年的第一周。

例如：

*   27/12/2012（星期四）应该是 2012 年的第 52 周
*   28/12/2012（星期五）应该是 2013 年的第 1 周
*   2013 年第 1 周从 28/12/2012 到 3/1/2013

我做了这个声明，根据这些规则计算 YEAR 和 WEEKNUMBER，您可以轻松地适应您的情况：

```
SELECT IF(ceil(( dayofyear(current_date) + dayofweek(date_format(current_date, '%Y-01-01'))+1 )/7) > 52, YEAR(current_date)+1, YEAR(current_date)), 
        IF(ceil(( dayofyear(current_date) + dayofweek(date_format(current_date, '%Y-01-01'))+1 )/7) > 52, 1, ceil(( dayofyear(current_date) + dayofweek(date_format(current_date, '%Y-01-01'))+1 )/7)); 
```

棘手的部分就是这个表达式：

```
ceil(( dayofyear(current_date) + dayofweek(date_format(current_date, '%Y-01-01'))+1 )/7) 
```

其余的（If 子句）仅用于调整表达式的结果以使第 53 周的 year+1 和 week = 1。

我会尽力解释这个表达式。以下表达式为您提供了简单的周数（一年中的某一天除以一周中的 7 天，向上取整）：

```
ceil(( dayofyear(current_date))/7) 
```

但现在你想让它在星期五（或任何其他日子）开始。为此，您需要将第一周的天数添加到当前日期，这些天数是上一年的一部分（这就像您的当前实际上是几天前开始的，因为您的第一周包含前一年的天数）。此表达式根据 1 月 1 日的工作日计算该偏移量：

```
dayofweek(date_format(current_date, '%Y-01-01'))+OFFSET 
```

偏移量是 7 和您希望一周开始的 weekdaynumber 之间的差：

*   周六 0
*   1 周五
*   2 星期四
*   3 周三...

因此，现在您只需将其添加到前一个表达式中，即可得到上述表达式，该表达式计算从任何工作日开始的周数，并假设第 1 周从上一年开始：

```
ceil(( dayofyear(current_date) + dayofweek(date_format(current_date, '%Y-01-01'))+OFFSET )/7) 
```

然后我只是添加了一个 IF 将第 53 周变为第 1 周，如果是第 53 周，则将另一个添加到年份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T19:00:56.697

我花了一段时间来思考这个问题。

[ISO 标准](http://en.wikipedia.org/wiki/ISO_week_date)定义了从星期一开始的第一周并包含一年中的第四天。MySQL 的函数提供[了更多的选择](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)。

`date_format()`标志`%U`并`%u`使用符号，其中第一周是第一次遇到星期日或星期一的一周。由于这不符合 ISO，我将提供两种变体。

如果要从星期六开始计算周数，并且第一年的一周是包含星期六的那一周，则可以使用以下表达式之一：

```
SELECT sign(dayofweek(current_date) - 7) + ceil(dayofyear(current_date)/7);
SELECT ceil((dayofyear(current_date)+
            (dayofweek(date_format(current_date, '%Y-01-01'))%7-7))/7); 
```

如果第一年的一周是一年中的第四天，请使用：

```
SELECT ceil((dayofyear(current_date)+
            (dayofweek(date_format(current_date, '%Y-01-04'))%7-4+1))/7); 
```

第一个表达式非常简单。

我将详细说明第 2 和第 3 个。我通过取一年中的当前日期，除以 7 和上限来计算周数，非常简单。周数需要根据年初的情况进行调整。

*   对于第一种情况（第一周从第一个星期六开始），我将主题中的一年中的 Jan/1 设为星期几，将星期六作为日期`0`，然后根据差异调整一年中的日期。这使得第一个星期六之前的所有日子都产生负调整数，并且上限为零；
*   对于第二种情况（第一周是一年中的 4 天），我将一年中的 Jan/4 设为星期几，将星期六设为日期`0`。该`-4+1`公式对 1 月 4 日之前的第一个星期六进行了调整，`+1`用于一年中的天数从 1 开始，而不是从 0 开始。负调整意味着一年中的第一天不在一年的第一周。

[这是SQL Fiddle](http://www.sqlfiddle.com/#!2/d41d8/701)上的一些测试日期。

如果你想从其他任何一天开始计算周数，你只需要改变公式，让那一天`0`在序列中。比如说，要从星期三开始计算周数，请使用：

```
SELECT ceil((dayofyear(current_date)+
    ((dayofweek(date_format(current_date, '%Y-01-04'))+3)%7-4+1))/7); 
```

`+3`用于补充`dayofweek()`周三到 7 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:58:56.003

根据 进行调整[`DAYOFWEEK()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)。

# android - 向模拟器发送位置

> ID：10656997
> 
> 赞同：0
> 
> 时间：2012-05-18T17:17:01.110
> 
> 标签：android, google-maps, android-emulator

我正在测试使用内置 Eclipse 工具将坐标发送到 Android 模拟器的选项。但它似乎没有收到它们。我有这个简单的代码：

```
public class Main extends MapActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView view = (MapView) findViewById(R.id.themap);
    view.setBuiltInZoomControls(true);

    final MapController mp = view.getController();

    LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    LocationListener listener = new LocationListener() {

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onLocationChanged(final Location location) {
            // TODO Auto-generated method stub
            mp.setCenter(new GeoPoint((int)location.getLatitude(), (int)location.getLongitude()));

        }
    };
    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

我在 Manifest 中拥有 ACCESS_FINE_LOCATION 和 INTERNET 的权限。如果有人有任何解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:06:46.113

你加了吗

```
<uses-library android:name="com.google.android.maps" /> 
```

到清单中的应用程序标签？您还需要 Google 提供的 SDK 调试证书的 MD5 指纹才能接收 Google 地图数据。你可以在[这里](https://developers.google.com/maps/documentation/android/mapkey?hl=de-DE#getdebugfingerprint)得到它。

尝试在 onLocationChanged 方法中放置一个断点，看看它是否在向模拟器发送位置命令时停止。当您还没有证书时，这也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:10:14.153

这对我有用。

监听器实现...

```
public class MyLocationListener implements LocationListener {
    public static final String TAG = "MyLocationListener";

    private Context context;

    public MyLocationListener(Context c) {
        this.context = c;
    }

public void onLocationChanged(android.location.Location location) {
        Log.d(TAG,"LocationChanged: Lat: "+location.getLatitude()+" Lng: "+location.getLongitude());
    }
} 
```

用法...

```
MyLocationListener locationListener = new MyLocationListener(this);
// Acquire a reference to the system Location Manager
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
// Register the listener with the Location Manager to receive location updates
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,locationListener); 
```

# matlab - Fisheriris 数据和感知器

> ID：10656999
> 
> 赞同：-1
> 
> 时间：2012-05-18T17:17:07.870
> 
> 标签：matlab, matlab-figure

我想对fisheriris数据应用感知器算法，我试过这个代码

```
function [  ] = Per(  )
%PERCEPTON_NN Summary of this function goes here
%   Detailed explanation goes here
%%%%%%%%%%%STEP ONE INPUT DATA PREPERATION
%N=3000;
load fisheriris
tr=50; %traning
te=50; %test
epochs =150;

data=meas;
%N = size(meas,1);
%species=nonomil(species)
%figure,plot(data_shuffeled(1,:),data_shuffeled(2,:),'rx');
%%%%%%%%%%%%%%%%%%%STEP TWO INTIALIZE  WEIGHT
baise=1;
w=[baise; 1 ; 1;1 ; 1];
eta=0.9; %%learning rate
%%%%%%%%%%%%%%%%%%%%%%%% Rosen Blatt learning Algo
for epoch=1 : epochs 
for i=1 : tr
   x=[1;data(i,1);data(i,2);data(i,3);data(i,4)]; % input vector
   N = size(species,i); %desiard output
   y=w'*x; % y=actual output ,w'= transpose w , mmoken y=w.*x 
   %%%%%%%%%%%%%%% Activation function (hardlimit)(step fn)
   y=1*(y>=0)+(-1)*(y<0); % da badl el if 
   %%%%%%%%%%% Error calcualtion %%%%%%%
   err(i)=N-y;
   %%%%%%%%%%%%%% update weight %%%%%%%%%5
   wnew=w+ eta*err(i)*x;
   w=wnew;
end
mse(epoch)=mean(err.^2);
end
%%%%%%%%%%%%%%%%%%%%%%  step four classification (testing) %%%%%%%%%%%%%%%%%%5
hold on
for i=1 : te
    %x=[1;data(i,1);data(i,2),data(i,3);data(i,4)];
     x=[1;data(i,1);data(i,2);data(i,3);data(i,4)]; 
   % d=data_shuffeled(3,i+tr);
    N = size(species,i);
    y=w'*x;
    y=1*(y>=0)+(-1)*(y<0);
    if (y==1)
        plot(x(2),x(3),x(4),x(5),'rx');
    elseif y==-1
        plot(x(2),x(3),x(4),x(5),'r&');
    end
end
hold off

 if abs(N-y)>1E-6
    testerro=testerro+1;

end 
```

我编写了这段代码来制作以fisheriris数据“meas”作为输入，物种作为“输出”的感知器算法

代码中的任何帮助或对此代码的任何修改。

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:41:25.933

首先，您是否知道 MATLAB 有一个用于神经网络训练的东西，称为[神经网络工具箱？](http://www.mathworks.com/products/neural-network/)

其次，认为 data_shuffled 是您自己的功能。`randperm`您应该使用 MATLAB 中的某些东西来打乱您的数据。

第三，当您可以在 MATLAB 中使用向量/矩阵时，您要避免使用 for 循环。

而不是做（用于测试）

```
for i = 1:te,
   ....
end 
```

你可能想做

```
X = [ones(te,1), data]; %X is [50x5] so each row of X is x'
y = X*w;   %y is [50x1], X is [50x5], w is [5x1]
idx_p1 = y==1; %all the indices of y where y is +1
idx_m1 = y==-1; %all the indicies of y where y is -1

plot(X(idx_p1,1),y(idx_p1),'rx');
plot(X(idx_m1,1),y(idx_m1),'r&'); 
```

我不知道你是如何使用`plot`4 维 X 的，所以上面只绘制了 X 的第一个特征（列）。

此外，训练对我来说看起来很奇怪。一方面，我认为您不应该将 N 用于数据矩阵测量的大小和所需的输出。'yhat' 或 'ybar' 是一个更好的名字。此外，如果 N 是所需的输出，那么为什么`size(species,i)`i 在 1:50 循环？物种是一个 [150x1] 向量。`size(species,1) = 150`. 其中`size(species,x)`x 是 2 到 50 将是 1。你确定要这个吗？不应该是这样的：

```
yhat = -ones(50,1); %Everything is -1
yhat(strmatch('virginica,species)) = 1; %except virginicas which are +1 
```